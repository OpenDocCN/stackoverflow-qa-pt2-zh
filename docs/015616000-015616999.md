# StackOverflow 问答 15616000-15616999

# powershell - 使用相对路径复制文件

> ID：15616002
> 
> 赞同：4
> 
> 时间：2013-03-25T13:20:27.113
> 
> 标签：powershell

我想将某种类型的所有文件从某个子目录及其相对路径从该子目录复制到另一个目录，并且相对路径完好无损。例如：

源子目录：

```
c:\temp\sourcedirectory 
```

源文件：

```
c:\temp\sourcedirectory\tonymontana\fileOne.txt
c:\temp\sourcedirectory\poker\fileTwo.txt 
```

目标目录：

```
c:\temp\targetdirectory 
```

期望的结果：

```
c:\temp\targetdirectory\tonymontana\fileOne.txt
c:\temp\targetdirectory\poker\fileTwo.txt 
```

到目前为止，我想出了：

```
Set-Location $srcRoot
Get-ChildItem -Path $srcRoot -Filter $filePattern -Recurse |
    Resolve-Path -Relative |
    Copy-Item -Destination {Join-Path $buildroot $_.FullName} 
```

然而，这种“一切都是对象”à la PowerShell 让我失望（至少我怀疑是这样）。即文件被复制，但没有它们的相对路径。

任何人都可以启发我一点吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T13:33:48.950

不要为此烦恼 PowerShell cmdlet，只需使用`robocopy`：

```
robocopy C:\temp\sourcedirectory C:\temp\targetdirectory *.txt /s 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T13:36:04.027

你可以试试这个：

```
$srcroot = "c:\temp\sourcedirectory"
$builroot= "c:\temp\targetdirectory"
gci -path $srcroot -filter $filepattern -recurse | 
  % { Copy-Item $_.FullName -destination ($_.FullName -replace [regex]::escape($srcroot),$builroot) } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T13:28:30.937

尝试这个：

```
Copy-item $srcRoot -destination $destination -recurse 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-12T23:47:30.313

为了防止复制文件夹本身，即创建

```
c:\temp\targetdirectory\sourcedirectory 
```

更改为源文件夹，然后使用通配符而不是文件夹作为源：

```
cd C:\temp\sourcedirectory\
Copy-item * -destination c:\temp\targetdirectory -recurse` 
```

# java - 休眠中的问题

> ID：15616005
> 
> 赞同：0
> 
> 时间：2013-03-25T13:20:31.427
> 
> 标签：java, spring, hibernate

我在 Hibernate 中有表，它的代码在这里

```
@Entity
@Table(name="CDSCurve")
public class CDSCurve {

    private String ticker;
    private Subordination subordination;
    private String currency;
    private float three_m;
    private float six_m;
    private float nine_m;
    private float one_y;
    private float two_y;
    private float five_y;
    private float ten_y;
    private float fifteen_y;
    private float twenty_y;
    private float thirty_y;
    @Transient
    private String desc;

    public String getDesc() {
        return desc;
    }

    public void setDesc(String desc) {
        this.desc = desc;
    }

    public CDSCurve() {
        super();
    }

    public CDSCurve(String ticker, Subordination subordination, String currency,
            float three_m, float six_m, float nine_m, float one_y, float two_y,
            float five_y, float ten_y, float fifteen_y, float twenty_y,
            float thirty_y) {
        super();
        this.ticker = ticker;
        this.subordination = subordination;
        this.currency = currency;
        this.three_m = three_m;
        this.six_m = six_m;
        this.nine_m = nine_m;
        this.one_y = one_y;
        this.two_y = two_y;
        this.five_y = five_y;
        this.ten_y = ten_y;
        this.fifteen_y = fifteen_y;
        this.twenty_y = twenty_y;
        this.thirty_y = thirty_y;
    }
    @Id
    @Column(name="Ticker")
    public String getTicker() {
        return ticker;
    }
    public void setTicker(String ticker) {
        this.ticker = ticker;
    }

    @OneToOne(cascade=CascadeType.ALL)
    public Subordination getSubordination() {
        return subordination;
    }
    public void setSubordination(Subordination subordination) {
        this.subordination = subordination;
    }
    @Column
    public String getCurrency() {
        return currency;
    }
    public void setCurrency(String currency) {
        this.currency = currency;
    }

    @Column
    public float getThree_m() {
        return three_m;
    }
    public void setThree_m(float three_m) {
        this.three_m = three_m;
    }

    @Column
    public float getSix_m() {
        return six_m;
    }
    public void setSix_m(float six_m) {
        this.six_m = six_m;
    }

    @Column
    public float getNine_m() {
        return nine_m;
    }
    public void setNine_m(float nine_m) {
        this.nine_m = nine_m;
    }

    @Column
    public float getOne_y() {
        return one_y;
    }
    public void setOne_y(float one_y) {
        this.one_y = one_y;
    }

    @Column
    public float getTwo_y() {
        return two_y;
    }
    public void setTwo_y(float two_y) {
        this.two_y = two_y;
    }

    @Column
    public float getFive_y() {
        return five_y;
    }
    public void setFive_y(float five_y) {
        this.five_y = five_y;
    }

    @Column
    public float getTen_y() {
        return ten_y;
    }
    public void setTen_y(float ten_y) {
        this.ten_y = ten_y;
    }

    @Column
    public float getFifteen_y() {
        return fifteen_y;
    }
    public void setFifteen_y(float fifteen_y) {
        this.fifteen_y = fifteen_y;
    }

    @Column
    public float getTwenty_y() {
        return twenty_y;
    }
    public void setTwenty_y(float twenty_y) {
        this.twenty_y = twenty_y;
    }

    @Column
    public float getThirty_y() {
        return thirty_y;
    }
    public void setThirty_y(float thirty_y) {
        this.thirty_y = thirty_y;
    }

} 
```

这里有作为外键的列 SubordinationID。

和其他表是从属

```
@Entity
@Table(name="Subordination")
public class Subordination {

    int subordinationId;
    String description;

    public Subordination(String description) {
        super();
        this.description = description;
    }

    @Id
    @Column
    @SequenceGenerator(sequenceName="subordination_sequence", name="subordination_sequence")
    @GeneratedValue(generator="subordination_sequence")
    public int getSubordinationId() {
        return subordinationId;
    }
    public void setSubordinationId(int subordinationId) {
        this.subordinationId = subordinationId;
    }

    @Column
    public String getDescription() {
        return description;
    }
    public void setDescription(String description) {
        this.description = description;
    }

} 
```

我想要的是如何在 CSDCurve 表中插入数据。如何使用休眠保存数据。请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:41:22.563

看看[手册的这一部分](http://docs.jboss.org/hibernate/core/4.1/manual/en-US/html/ch11.html#objectstate-makingpersistent)。

TL;博士：

```
session.save(myObject); 
```

# c# - 好奇的用户在应用程序处于后台进程时按键，如何忽略这种额外的按键

> ID：15616007
> 
> 赞同：2
> 
> 时间：2013-03-25T13:20:35.203
> 
> 标签：c#, winforms, validation, user-interface, sendkeys

我在 C# win form application 4.0 中工作，在一个表单上，我在每个文本框上使用 3 个文本框，当用户输入“Tab”键然后焦点跳转到下一个文本框。

现在在验证事件的第一个文本框中，我添加了一些代码来检查数据有效性，它连接到数据库服务器并花费一些纳秒的时间，同时用户按下更多的“Tab”键，这就是为什么我的焦点转移到第三或第四个文本框，它没有跳到第二个文本框。

请指导我如何解决这个问题。如何忽略这个击键。

我需要一个解决方案，其中用户界面将暂停，直到不执行验证事件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T13:25:41.443

首先，没有理由发送 TAB 键。只需`Focus`在您想要关注的文本框上进行设置。

您想要做的是`OnKeyDown`在您希望忽略回车键时收听您关注的文本框或控件。通过设置`e.Handled`为`true`，按键将被忽略。

```
private void textBox_KeyDown(object sender, KeyEventArgs e)
{
    if (bIgnoreInput)
        e.Handled = true;
} 
```

编辑：

我建议按下按钮来触发验证，而不是仅在文本更改时（如果这是您正在做的事情，因为它不是很清楚）。这样您就可以处理验证并提供用户反馈（例如进度条或等待动画）。

如果您根本不需要任何输入，请在文本框上设置`Enabled`为`false`，直到您处理完代码。未启用控件时，不会触发任何事件。请务必检查`InvokeRequired`是否`Invoke`是。

```
void ValidateInput()
{
    SetisValidatingState(true);

    System.Threading.Thread workThread = new System.Threading.Thread(delegate() 
        { 
            ////
            // Validate here
            ////
            SetisValidatingState(false);
        });
    workThread.Start();
}

delegate void SetisValidatingStateDelegate(bool state);
void SetisValidatingState(bool state)
{
    if (InvokeRequired)
    {
        Invoke(new SetisValidatingStateDelegate(SetisValidatingState), new object[] { state });
        return;
    }

    textBox1.AcceptsTabs = textBox2.AcceptsTabs = textBox3.AcceptsTabs = textBox4.AcceptsTabs = !state; // Disable tab while validating = true
    progressBar.visible = state; // show progress while validating = true
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T13:26:56.883

在调用验证服务器之前调用 GetNextControl 以找出验证完成时应将焦点移至何处。验证完成后，在该控件上调用 Focus()

[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.getnextcontrol.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.getnextcontrol.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T13:26:01.303

您可以引入 bool 类型的标志 (dbFlag)，您可以在执行数据库操作之前设置该标志，然后再将其重置。

您的 KeyDown-Code 可以看起来像：

```
private void KeyDown(object sender, KeyDownEventArgs e)
{
   //check the state of your flag
   if(!dbFlag && e.KeyCode == Keys.Return)
      SendKeys.Send("{Tab}");
} 
```

# java - libGDX html5 项目不支持 swarmconnect

> ID：15616012
> 
> 赞同：0
> 
> 时间：2013-03-25T13:20:47.327
> 
> 标签：java, android, libgdx

我在使用 swarmconnect 和 libGdx 时遇到了一些问题。我已成功将其集成到我的游戏中，但 HTML 5 项目未编译。这是因为我已经导入了 swarm：

```
import com.swarmconnect.Swarm; 
```

有没有办法只在android正在编译而不是在其他项目中导入？![我得到的错误](../Images/37003524fcbfa13ad10c579e9aa8051c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T01:28:43.307

在这里领导 Swarm 的开发人员。看起来您应该能够将逻辑抽象为仅在 Android 中加载的类：[http ://code.google.com/p/libgdx/wiki/ApplicationPlatformSpecific](http://code.google.com/p/libgdx/wiki/ApplicationPlatformSpecific)

# scala - Play Framework 2 重新编译所有文件而不是一个文件

> ID：15616013
> 
> 赞同：3
> 
> 时间：2013-03-25T13:20:48.490
> 
> 标签：scala, playframework-2.0

Play Framework 有一个非常棒的自动编译功能，我非常喜欢。但是我们的项目包含大约 1300 个 java 文件，每当我更改其中一个并在开发模式下刷新页面时，Play 都会重新编译所有这些文件，而不仅仅是一个文件。应该是这样吗？或者有没有办法强制播放只编译真正*的新*文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T22:44:57.637

试用最新版 Play：2.1.1-RC1

[https://groups.google.com/d/msg/play-framework/E_yLjyIpDMY/KUJCbMlLV2AJ](https://groups.google.com/d/msg/play-framework/E_yLjyIpDMY/KUJCbMlLV2AJ)

他们声明“修复了 Windows 上的一些编译问题”。它适用于我的情况。现在它只重新编译一个类，而不是以前的 10-20 个。

# php - 更改 SESSION 变量以停止“while 循环”

> ID：15616019
> 
> 赞同：2
> 
> 时间：2013-03-25T13:21:03.460
> 
> 标签：php, ajax

我是 php 新手，我想控制一个 php while 循环脚本，使用按钮（开始/停止），开始按钮对定义和执行循环的*start.php*`$_SESSION['loop'] = TRUE`脚本进行 ajax 调用，停止按钮进行ajax 调用*stop.php*脚本，该脚本只是更改`$_SESSION['loop']`为`FALSE`.

下面是我到目前为止的代码，但是当我点击停止按钮时，我只有在 while 循环完成循环后才成为警报*（成功停止）*，这意味着循环没有像我假设的那样中断。

我认为这是在循环执行时锁定的会话。如果是这样，如何更改`$_SESSION['loop']`值并使循环**每次都**读取该值？

**索引.php**

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function(){
        $('#start').click(function(){
            $.ajax({
                url: "start.php"
            });
        });

        $('#stop').click(function(){
            $.ajax({
                url: "stop.php",
                success: function(){
                    alert('success stop');
                },
                error: function(){
                    alert('failure stop');
                }
            });
        });
    });
</script>

<button id="start">Start</button>
<button id="stop">Stop</button> 
```

**开始.php**

```
<?php
    session_start();
    $_SESSION['loop'] = TRUE;

    ini_set('max_execution_time', 300);
    $i = 0;
    while($i < 100) {

        if ($_SESSION['loop'] == TRUE) {

            //query to save some variables

            // Pause 10s after saving 2
            if ($i != 0 && $i%2 == 0) {
                sleep(10);
            }

            $i++;

        } else {
            break;
        }
    }
?> 
```

**停止.php**

```
<?php
    session_start();

    if(isset($_SESSION['loop'])) {
        $_SESSION['loop'] = FALSE;
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:23:55.700

您的启动和停止操作在两个不同的会话中，因此在一个会话中更改 $SESSION 对另一个会话没有影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:26:01.443

我认为，你应该使用多线程来做这些事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T13:31:06.087

请花点时间阅读：

“会话数据通常在脚本终止后存储，无需调用 session_write_close()，但由于会话数据被锁定以防止并发写入，因此只有一个脚本可以随时对会话进行操作。”

[http://php.net/manual/en/function.session-write-close.php](http://php.net/manual/en/function.session-write-close.php)

因此，似乎 $_SESSION['loop'] 最后被写入会话文件。

如果要显式将数据写入会话文件，请在 $_SESSION['loop'] = TRUE 之后添加 session_write_close。注意，如果您需要在同一个脚本中再次读取/写入一些会话数据，您需要启动会话然后读取/写入数据。

# java - 在 Scala 模板中，如何结束没有空格的变量？

> ID：15616023
> 
> 赞同：1
> 
> 时间：2013-03-25T13:21:21.930
> 
> 标签：java, scala, playframework, playframework-2.0

我需要在 Play 应用程序中快速更改内置 Scala 的页面。不太清楚如何做到这一点......

我有一个包含“foo”的变量@name，我想这样做：

```
<div id="@name" class="@name_class"> 
```

并让它决心

```
<div id="foo" class="foo_class"> 
```

但是 Play 正在尝试寻找一个名为 @name_class 的变量

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-25T14:31:45.317

您可以使用以下方法避免临时变量：

```
<div id="@name" class="@{name}_class"> ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:29:07.530

你可以用括号括起来，我还没有真正用花括号测试过。

```
<div id="@name" class="@(name)_class"> ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T13:35:19.633

您可以首先连接字符串和显示：

```
@val class_name = name + "_class" 
```

然后赋值：

```
<div id="@name" class="@class_name"> 
```

**编辑**

正如@Chirlo 在评论中所解释的那样，从 Play 2.1 开始，上述内容将不起作用，您可以将连接放在可重用的块中并按以下方式使用：

```
@mkClassString(name:String,tag:String):String = { name + tag } 
```

并使用它：

```
<div id="@name" class="@mkClassString(name,"_class")"> 
```

或`@defining`按照评论指示使用。

# rest - 为 Cowboy REST API 启用 CORS

> ID：15616027
> 
> 赞同：11
> 
> 时间：2013-03-25T13:21:32.393
> 
> 标签：rest, erlang, cors, cowboy

如何为牛仔休息处理程序启用 CORS？我尝试添加 options/2 方法，如下所示：

```
options(Req, State) ->
    {[
       {<<"access-control-allow-origin">>, <<"*">>},
       {<<"access-control-allow-methods">>, <<"GET, OPTIONS">>}
     ], Req, State}. 
```

但这会导致错误，例如：

```
Error in process <0.263.0> with exit value: {{case_clause,{[{<<27 bytes>>,<<1 byte>>},{<<28 bytes>>,<<12 bytes>>}],{http_req,#Port<0.2636>,ranch_tcp,keepalive,<0.263.0>,<<7 bytes>>,{1,1},{{127,0,0,1},56522},<<9 bytes>>,undefined,9090,<<8 bytes>>,undefined,<<0 bytes>>,undefined,<<0 bytes>>,[],[{<<4 bytes>>,<<14 bytes>>},{<<10 bytes>>,<<74 bytes>>},{<<6 bytes>>,<<63 bytes>>},{<<15 bytes>>,<<14 bytes>>},{<<15 bytes>>,<<13 bytes>>},{<<6 bytes>>,<<4 bytes>>},{<<29 bytes>>,<<3 bytes>>},{<<30 bytes>>,<<16 bytes>>},{<<10 bytes>>,<<10 bytes>>}],[{<<10 bytes>>,[<<10 bytes>>]}],undefined,[],waiting,undefined,<<0 bytes>>,false,waiting,[],<<0 bytes>>,undefined},undefined... 
```

我的错误在哪里？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-25T16:00:47.343

牛仔文档说您需要使用 set_resp_headers 设置标题，而不是返回标题列表：

```
 %% If you need to add additional headers to the response at this point,
 %% you should do it directly in the options/2 call using set_resp_headers. 
```

所以你的代码应该是这样的：

```
options(Req, State) ->
    Req1 = cowboy_req:set_resp_header(<<"access-control-allow-methods">>, <<"GET, OPTIONS">>, Req),
    Req2 = cowboy_req:set_resp_header(<<"access-control-allow-origin">>, <<"*">>, Req1),
    {ok, Req2, State}. 
```

你可以用

```
curl -H "Origin: http://example.com" \
  -H "Access-Control-Request-Method: GET" \
  -H "Access-Control-Request-Headers: X-Requested-With" \
  -X OPTIONS --verbose \
http://localhost:8080
* About to connect() to localhost port 8080 (#0)
*   Trying 127.0.0.1... connected
* Connected to localhost (127.0.0.1) port 8080 (#0)
> OPTIONS / HTTP/1.1
> User-Agent: curl/7.21.4 (universal-apple-darwin11.0) libcurl/7.21.4 OpenSSL/0.9.8r     zlib/1.2.5
> Host: localhost:8080
> Accept: */*
> Origin: http://example.com
> Access-Control-Request-Method: GET
> Access-Control-Request-Headers: X-Requested-With
>
< HTTP/1.1 200 OK
< connection: keep-alive
< server: Cowboy
< date: Mon, 25 Mar 2013 15:59:11 GMT
< content-length: 0
< access-control-allow-methods: GET, OPTIONS
< access-control-allow-origin: *
<
* Connection #0 to host localhost left intact
* Closing connection #0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-15T12:23:12.390

我的 REST 仅在提供令牌的情况下才允许访问资源。所以我必须实现`is_authorized/2`对 OPTIONS 和 GET 请求不同的回调。见下文：

1) 实现`options/2`如下

```
options(Req0, State) ->
  % cors
  Req1 = cowboy_req:set_resp_header(
    <<"access-control-allow-methods">>, <<"GET, OPTIONS">>, Req0),
  Req2 = cowboy_req:set_resp_header(
    <<"access-control-allow-origin">>, <<"*">>, Req1),
  Req3 = cowboy_req:set_resp_header(
    <<"access-control-allow-headers">>, <<"authorization">>, Req2),
  {ok, Req3, State}. 
```

2) 实现`is_authorized/2`如下

```
is_authorized(Req, State) -> 
  case cowboy_req:method(Req) of
    <<"GET">> ->
      case cowboy_req:parse_header(<<"authorization">>, Req) of
        {bearer, <<Token/binary>>} ->
          {true, Req, Token};
        _ ->
          {{false, <<"Basic realm=\"cowboy\"">>}, Req, State}
      end;
    <<"OPTIONS">> ->
      {true, Req, State}
  end. 
```

3)`to_json/2`方法发送`access-control-allow-origin`

```
to_json(Req0, State) ->
  R = #{ foo => [<<"bar">>] },
  % cors
  Req1 = cowboy_req:set_resp_header(
      <<"access-control-allow-origin">>, <<"*">>, Req0),
  Body = jsx:encode(R),
  {Body, Req1, State}. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-04T22:30:04.083

除了在这里找到的答案之外，Cowboy 2.* 似乎还有一个中间件功能，您可以使用它来拦截对服务器的所有 REST 处理程序请求，并添加所需的响应标头： [https ://ninenines.eu/docs/en /cowboy/2.7/guide/middlewares/](https://ninenines.eu/docs/en/cowboy/2.7/guide/middlewares/)

可以在这个 Github gist 中找到一个示例 CORS 中间件实现： [https ://github.com/ninenines/cowboy/blob/master/examples/markdown_middleware/src/markdown_middleware_app.erl](https://github.com/ninenines/cowboy/blob/master/examples/markdown_middleware/src/markdown_middleware_app.erl)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-25T17:02:38.430

你可以试试这个：

```
Req1 = cowboy_req:set_resp_header(<<"access-control-allow-origin">>, <<"*">>, Req0 -> Worked for me. 
```

# c# - asp.net mvc Bundle.IncludeDirectory 例子？

> ID：15616031
> 
> 赞同：24
> 
> 时间：2013-03-25T13:21:44.757
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, bundle, bundling-and-minification

嗨，谁能给我一个关于如何使用 Scriptbundle 方法 IncludeDirectory for Javascripts 的示例，无法获得如何编写搜索模式字符串，它是正则表达式吗？

```
bundles.Add(new ScriptBundle("~/bundles/customjs").IncludeDirectory(
                "~/Scripts/Custom",?); 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-25T13:26:53.263

你可以这样写：

```
bundles.Add(new ScriptBundle("~/bundles/customjs").IncludeDirectory(
                "~/Scripts/Custom","*.js")); 
```

如果你想要例如 javascript。

你可以在这里阅读更多：[http ://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)

# git - Git保存文件然后停止跟踪

> ID：15616041
> 
> 赞同：2
> 
> 时间：2013-03-25T13:22:20.673
> 
> 标签：git

我想在我的项目中存储一个数据文件，该文件存储一个默认密码。然后我想停止在 git 中跟踪它，并将虚拟值更改为实际值。我希望随后，当我推送时，我更改的文件将保持不变，并希望当我拉动时也是如此。

```
$ echo generic > mysecret.txt
$ git add mysecret.txt
$ git commit -m "added a generic data to the secret file"
$ echo "mysecret.txt" >> .gitignore
$ echo secret > mysecret.txt 
```

希望在那之后我的密码是安全的（虽然我很确定它不是，所以在这里寻求建议）

我应该如何更好地处理这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T13:23:25.550

您可以`git update-index --assume-unchanged <path/to/file>`在将虚拟值替换为实际值后使用。

# php - AJAX reCAPTCHA 验证

> ID：15616045
> 
> 赞同：0
> 
> 时间：2013-03-25T13:22:32.980
> 
> 标签：php, javascript, jquery, ajax, recaptcha

我有下一个 HTML 表单：

```
<form name="register" method="post" action="register.php" >
<fieldset>
    <legend>Register</legend>
    <input type="hidden" name="regform" value="true" />

    <label for="username">Username:</label>
    <input type="text" name="username" id="username" />
    <br />
    <label for="email">Email:</label>
    <input type="text" name="email" id="email" />
    <br />
    <label for="password1">Password:</label>
    <input type="password" name="password1" id="password1" />
    <br />
    <label for="password2">Password:</label>
    <input type="password" name="password2" id="password2" />
    <br />

    <?php
    $config = new Config();
    $publickey = $config->getCaptchaPublicKey();
    echo recaptcha_get_html($publickey);
    ?>

</fieldset>
<input type="submit" value="Register!" /> 
```

我想做的是，当用户按下提交按钮时，我通过 AJAX 从表单发送数据并验证它们。但我想知道如何更新recaptcha？我可以在我的 PHP 脚本中验证它，并回显一个包含在错误中的新脚本。但是我如何将它发送回客户端并让 javascript (jQuery) 用新的 reCAPTCHA 替换旧的 reCAPTCHA？

希望有人可以帮助我。

问候，

卢克索

PS：在发送到服务器之前，我应该使用 javascript 加密来加密密码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:42:58.123

1）要请求图像，您必须在 AJAX 中请求带有正确标头的重新验证码，该标头在您的情况下发送用于请求图像的标头

2）如果通过 AJAX 进行验证，您必须加密，否则任何流浪汉都可以触摸密码，因为您使用存储在数据库中的相同加密进行加密，例如：如果您使用 php 中的 md5 加密，而不是使用 JS 使用 md5 加密 pwd并发送哈希

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:27:51.877

如果你使用 jQuery，那么 $('#form-id').serialize(); 就是你要找的。将此函数返回的数据用作发布 Ajax 的数据。

如果您没有 HTTPS，那么使用 JavaScript 加密密码是毫无价值的。

# java - 3 维 ConcurrentSkipListMap 映射

> ID：15616046
> 
> 赞同：0
> 
> 时间：2013-03-25T13:22:33.340
> 
> 标签：java

我已经写`ConcurrentSkipListMap`了 3 dimensional ，但无法找到一种迭代它的方法。我如何定义`iterator`相同的。

```
import java.util.concurrent.ConcurrentSkipListMap;
/**
 * Helper implementation to handle 3 dimensional sorted maps
 */
public class MyCustomIndex {
    private ConcurrentSkipListMap<byte[], ConcurrentSkipListMap<byte[], ConcurrentSkipListMap<byte[], byte[]>>> table;

    public MyCustomIndex() {
        this.table = new ConcurrentSkipListMap<byte[], ConcurrentSkipListMap<byte[], ConcurrentSkipListMap<byte[], byte[]>>>(new CustomComparator); 
    }
    /**
     * 
     * @param K
     * @param F
     * @param Q
     */
    public void put(byte[] K, byte[] F, byte[] Q) {
        ConcurrentSkipListMap<byte[], byte[]> QToDummyValueMap; 
        ConcurrentSkipListMap<byte[], ConcurrentSkipListMap<byte[], byte[]>> FToQMap;

        if( table.containsK(K)) {
            FToQMap = table.get(K);
            if ( FToQMap.containsK(F)) {
                QToDummyValueMap = FToQMap.get(F);
            } else {
                QToDummyValueMap = new ConcurrentSkipListMap<byte[], byte[]>(new CustomComparator); 
            }
        } else {
            QToDummyValueMap = new ConcurrentSkipListMap<byte[], byte[]>(new CustomComparator);
            FToQMap = new ConcurrentSkipListMap<byte[], ConcurrentSkipListMap<byte[], byte[]>>(new CustomComparator);
        }       
        QToDummyValueMap.put(Q, new byte[0]);
        FToQMap.put(F, QToDummyValueMap);
        table.put(K, FToQMap);
    }

    public ConcurrentSkipListMap<byte[], ConcurrentSkipListMap<byte[], ConcurrentSkipListMap<byte[], byte[]>>> gettable() {
        return table;
    }
    public void settable(
            ConcurrentSkipListMap<byte[], ConcurrentSkipListMap<byte[], ConcurrentSkipListMap<byte[], byte[]>>> table) {
        this.table = table;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:18:39.470

这是一个嵌套迭代器，它将采用 an`Iterator<Iterator<T>>`并将其转换为`Iterator<T>`. 还有一些静态方法可以让你`Iterator<V>`从 s 中生成对象`Map<K,V>`以及一些高阶的东西（`Iterator<Iterator<V>>`等等`Map<K,Map<K,V>`）。

如您在三路测试和 MapMapMap 测试中所见，在更高级别的迭代器上进行迭代的想法`Iterator<Iterator<Iterator<T>>>`是将其中一个包装在另一个中。

```
public class NestedIterator<T> implements Iterator<T> {
  // Outer iterator. Goes null when exhausted.
  Iterator<Iterator<T>> i2 = null;
  // Inner iterator. Goes null when exhausted.
  Iterator<T> i1 = null;
  // Next value.
  T next = null;

  // Takes a depth-2 iterator.
  public NestedIterator(Iterator<Iterator<T>> i2) {
    this.i2 = i2;
    // Prime the pump.
    if (i2 != null && i2.hasNext()) {
      i1 = i2.next();
    }
  }

  @Override
  public boolean hasNext() {
    // Is there one waiting?
    if (next == null) {
      // No!
      // i1 will go null if it is exhausted.
      if (i1 == null) {
        // i1 is exhausted! Get a new one from i2.
        if (i2 != null && i2.hasNext()) {
          /// Get next.
          i1 = i2.next();
          // Set i2 null if exhausted.
          if (!i2.hasNext()) {
            // Exhausted.
            i2 = null;
          }
        } else {
          // Exhausted.
          i2 = null;
        }
      }
      // A null i1 now will mean all is over!
      if (i1 != null) {
        if (i1.hasNext()) {
          // get next.
          next = i1.next();
          // Set i1 null if exhausted.
          if (!i1.hasNext()) {
            // Exhausted.
            i1 = null;
          }
        } else {
          // Exhausted.
          i1 = null;
        }
      }
    }
    return next != null;
  }

  @Override
  public T next() {
    T n = next;
    next = null;
    return n;
  }

  @Override
  public void remove() {
    throw new UnsupportedOperationException("Not supported.");
  }

  // Iterating across Maps of Maps of Maps.
  static <K1, K2, K3, V> Iterator<Iterator<Iterator<V>>> iiiV(Map<K1, Map<K2, Map<K3, V>>> i) {
    final Iterator<Map<K2, Map<K3, V>>> iV = iV(i);
    return new Iterator<Iterator<Iterator<V>>>() {
      @Override
      public boolean hasNext() {
        return iV.hasNext();
      }

      @Override
      public Iterator<Iterator<V>> next() {
        return iiV(iV.next());
      }

      @Override
      public void remove() {
        iV.remove();
      }
    };
  }

  // Iterating across Maps of Maps.
  static <K1, K2, V> Iterator<Iterator<V>> iiV(Map<K1, Map<K2, V>> i) {
    final Iterator<Map<K2, V>> iV = iV(i);
    return new Iterator<Iterator<V>>() {
      @Override
      public boolean hasNext() {
        return iV.hasNext();
      }

      @Override
      public Iterator<V> next() {
        return iV(iV.next());
      }

      @Override
      public void remove() {
        iV.remove();
      }
    };
  }

  // Iterating across Map values.
  static <K, V> Iterator<V> iV(final Map<K, V> map) {
    return iV(map.entrySet().iterator());
  }

  // Iterating across Map.Entry Iterators.
  static <K, V> Iterator<V> iV(final Iterator<Map.Entry<K, V>> i) {
    return new Iterator<V>() {
      @Override
      public boolean hasNext() {
        return i.hasNext();
      }

      @Override
      public V next() {
        return i.next().getValue();
      }

      @Override
      public void remove() {
        i.remove();
      }
    };
  }

  // **** TESTING ****
  enum I {
    I1, I2, I3;
  };

  public static void main(String[] args) {
    // Two way test.
    testTwoWay();
    System.out.flush();
    System.err.flush();
    // Three way test.
    testThreeWay();
    System.out.flush();
    System.err.flush();
    // MapMap test
    testMapMap();
    System.out.flush();
    System.err.flush();
    // MapMapMap test
    testMapMapMap();
    System.out.flush();
    System.err.flush();
  }

  private static void testMapMap() {
    Map<String,String> m = new TreeMap<> ();
    m.put("M-1", "V-1");
    m.put("M-2", "V-2");
    Map<String,Map<String,String>> mm = new TreeMap<> ();
    mm.put("MM-1", m);
    mm.put("MM-2", m);
    System.out.println("MapMap");
    Iterator<Iterator<String>> iiV = iiV(mm);
    for (Iterator<String> i = new NestedIterator<>(iiV); i.hasNext();) {
      System.out.print(i.next() + ",");
    }
    System.out.println();
  }

  private static void testMapMapMap() {
    Map<String,String> m = new TreeMap<> ();
    m.put("M-1", "V-1");
    m.put("M-2", "V-2");
    m.put("M-3", "V-3");
    Map<String,Map<String,String>> mm = new TreeMap<> ();
    mm.put("MM-1", m);
    mm.put("MM-2", m);
    Map<String,Map<String,Map<String,String>>> mmm = new TreeMap<> ();
    mmm.put("MMM-1", mm);
    mmm.put("MMM-2", mm);
    System.out.println("MapMapMap");
    Iterator<Iterator<Iterator<String>>> iiiV = iiiV(mmm);
    for (Iterator<String> i = new NestedIterator<>(new NestedIterator<>(iiiV)); i.hasNext();) {
      System.out.print(i.next() + ",");
    }
    System.out.println();
  }

  private static void testThreeWay() {
    // Three way test.
    System.out.println("Three way");
    List<Iterator<I>> lii1 = Arrays.asList(
            EnumSet.allOf(I.class).iterator(),
            EnumSet.allOf(I.class).iterator(),
            EnumSet.allOf(I.class).iterator(),
            EnumSet.allOf(I.class).iterator());
    List<Iterator<I>> lii2 = Arrays.asList(
            EnumSet.allOf(I.class).iterator(),
            EnumSet.allOf(I.class).iterator(),
            EnumSet.allOf(I.class).iterator(),
            EnumSet.allOf(I.class).iterator());
    List<Iterator<I>> lii3 = Arrays.asList(
            EnumSet.allOf(I.class).iterator(),
            EnumSet.allOf(I.class).iterator(),
            EnumSet.allOf(I.class).iterator(),
            EnumSet.allOf(I.class).iterator());
    Iterator<Iterator<Iterator<I>>> liii = Arrays.asList(
            lii1.iterator(),
            lii2.iterator(),
            lii3.iterator()).iterator();
    // Grow a 3-nest.
    // Unroll it.
    for (Iterator<I> ii = new NestedIterator<>(new NestedIterator<>(liii)); ii.hasNext();) {
      I it = ii.next();
      System.out.print(it + ",");
    }
    System.out.println();
  }

  private static void testTwoWay() {
    System.out.println("Two way");
    List<Iterator<I>> lii = Arrays.asList(
            EnumSet.allOf(I.class).iterator(),
            EnumSet.allOf(I.class).iterator(),
            EnumSet.allOf(I.class).iterator());
    for (Iterator<I> ii = new NestedIterator<>(lii.iterator()); ii.hasNext();) {
      I it = ii.next();
      System.out.print(it + ",");
    }
    System.out.println();
  }
} 
```

您的代码现在看起来像这样。请注意，我根本没有对此进行测试，并且我尽可能地使用了`Map`代替，并且我正在使用Java 7 中的东西来帮助很多。`ConcurrentSkipListMap``<>`

```
public class MyCustomIndex  implements Iterable<byte[]> {
  private Map<byte[], Map<byte[], Map<byte[], byte[]>>> table;

  public MyCustomIndex() {
    this.table = new ConcurrentSkipListMap<>();
  }

  /**
   * @param K
   * @param F
   * @param Q
   */
  public void put(byte[] K, byte[] F, byte[] Q) {
    Map<byte[], byte[]> QToDummyValueMap;
    Map<byte[], Map<byte[], byte[]>> FToQMap;

    if (table.containsKey(K)) {
      FToQMap = table.get(K);
      if (FToQMap.containsKey(F)) {
        QToDummyValueMap = FToQMap.get(F);
      } else {
        QToDummyValueMap = new ConcurrentSkipListMap<>();
      }
    } else {
      QToDummyValueMap = new ConcurrentSkipListMap<>();
      FToQMap = new ConcurrentSkipListMap<>();
    }
    QToDummyValueMap.put(Q, new byte[0]);
    FToQMap.put(F, QToDummyValueMap);
    table.put(K, FToQMap);
  }

  public Map<byte[], Map<byte[], Map<byte[], byte[]>>> gettable() {
    return table;
  }

  public Iterator<byte[]> iterator () {
    // **** This is what I have been aiming at all along ****
    return new NestedIterator(new NestedIterator<>(NestedIterator.iiiV(table)));
  }

} 
```

# java - 为什么在 Lucene 4,1 分析器中使用 MappingCharFilter 会破坏通配符匹配

> ID：15616047
> 
> 赞同：2
> 
> 时间：2013-03-25T13:22:37.997
> 
> 标签：java, lucene

在分析器中使用 MappingCharFilter 打破通配符匹配

我创建了这个简单的 StripSpacesAndSeparatorsAnalyzer

```
public class StripSpacesAndSeparatorsAnalyzer extends Analyzer {

    protected NormalizeCharMap charConvertMap;

    protected void setCharConvertMap() {

        NormalizeCharMap.Builder builder = new NormalizeCharMap.Builder();
        builder.add(" ","");
        builder.add("-","");
        builder.add("_","");
        builder.add(":","");
        charConvertMap = builder.build();
    }

    public StripSpacesAndSeparatorsAnalyzer() {
        setCharConvertMap();
    }

    @Override
    protected TokenStreamComponents createComponents(String fieldName, 
                                                     Reader reader) {
        Tokenizer source = new KeywordTokenizer(reader);
        TokenStream filter = new LowercaseFilter(source);
        return new TokenStreamComponents(source, filter);
    }

    @Override
    protected Reader initReader(String fieldName,
                                Reader reader)
    {
        return new MappingCharFilter(charConvertMap, reader);
    }
} 
```

以便它忽略字段中的某些字符，例如连字符，以便我可以搜索

```
catno:WRATHCD25
catno:WRATHCD-25 
```

并获得相同的结果，并且有效（添加到索引的字段的原始值是 WRATHCD-25）

但是通配符搜索存在问题

```
catno:WRATHCD25* 
```

有效，但是

```
catno:WRATHCD-25* 
```

才不是

如果我修改分析器以注释掉 initReader() 方法，那么

```
catno:WRATHCD-25* 
```

现在有效，但当然

```
catno:WRATHCD25 
```

不再工作。

请问我做错了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:12:29.473

让我猜猜：要解析查询，您使用的是常规`QueryParser`，对吗？

尝试使用[`AnalyzingQueryParser`](http://lucene.apache.org/core/4_1_0/queryparser/org/apache/lucene/queryparser/analyzing/AnalyzingQueryParser.html)，它应该可以解决问题。从javadoc：

> 覆盖 Lucene 的默认 QueryParser，以便模糊查询、前缀查询、范围查询和通配符查询也通过给定的分析器，但通配符（如 *）不会从搜索词中删除。

# php - 控制器级别的 Codeigniter 中的自定义验证

> ID：15616053
> 
> 赞同：0
> 
> 时间：2013-03-25T13:22:57.790
> 
> 标签：php, codeigniter, validation

我想在控制器端使用自定义验证。我想在验证中使用 CI 的表单验证器。

注意：我将对 Web 服务使用该验证。（这就是为什么它将保持在控制器级别）

我试着这样做，它是可以接受的格式吗？

```
 $this->form_validation->set_rules('$userFullName', 'Username', 'trim|required|min_length[5]|max_length[12]|xss_clean');
        $this->form_validation->set_rules('$userNickName', 'UserNickname', 'trim|required|min_length[5]|max_length[12]|xss_clean');
        $this->form_validation->set_rules('$userEmail', 'Email', 'trim|valid_email');
        $this->form_validation->set_rules('$userPassword', 'Password Confirmation', 'trim|required|alpha_numeric|min_length[5]|max_length[12]|');

           if ($this->form_validation->run() == FALSE)
       { 
            if(!$this->validate_member->set_message($userFullName,'userFullName', 'trim|required|min_length[5]|max_length[12]|xss_clean'))
            {

                $error_code = '102';

            } else if (!$this->validate_member->set_message($userNickName,'userNickName', 'UserNickname', 'trim|required|min_length[5]|max_length[12]|xss_clean')){

                $error_code = '103';

            } else if (!$this->validate_member->set_message($userEmail, 'Email', 'trim|valid_email')){

                $error_code = '104';

            } else if(!$this->validate_member->set_message($userEmail, '$userPassword', 'Password Confirmation', 'trim|required|alpha_numeric|min_length[5]|max_length[12]|')){

                $error_code = '105';

            } else {

                $error_code = '106';

            } 
```

任何建议将不胜感激..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:42:22.470

我认为您可以在位于 system>libaries 的 Form_validation.php 中设置自定义验证，您可以设置新的函数名称和新的验证，并以语言设置错误消息。

# asp.net - 尝试在页面级别设置上传限制设置时遇到问题

> ID：15616058
> 
> 赞同：0
> 
> 时间：2013-03-25T13:23:14.940
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2

我的应用程序中有上传功能。我遇到了上传问题，发现在 Web.Config 中有`httpRuntime`标签。我将更改设置如下。

```
<httpRuntime requestValidationMode="2.0" maxRequestLength="2147483647" /> 
```

这解决了我的上传问题。以上是我的根文件夹中的 Web.Config，这是我们默认获取的。

问题。

1.  我可以创建一个单独的 Web.config 文件吗？如果是，我必须将文件上传到其他虚拟目录中，并且我的代码在其他项目中。那么我应该把 Web.Config 文件放在哪里呢？

2.  是否可以在页面级别设置这些设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:30:44.240

您可以将 web.config 文件添加到几乎任何文件夹（我*怀疑*app_data 会允许它（但我可能是错的，但这是题外话））。

您当然可以（如果可能）为您需要的每个设置创建许多文件夹。换句话说，每个文件夹有 1 个文件来解决您的问题。

或者，创建一个新的父文件夹，您希望所有子文件夹从中“继承”新的 web.config 文件。您的 web.config 文件进入这个新的父文件夹。

请记住，web.config 文件继承自父 web.config 文件，因此您无需重新编写整个配置，只需要添加/覆盖的部分即可。

# java - 已知起始索引时 Substring 与 RegEx 之间的性能比较

> ID：15616066
> 
> 赞同：8
> 
> 时间：2013-03-25T13:23:59.750
> 
> 标签：java, regex, string

我需要提取在 a 中找到的第一个整数，`java.lang.String`并且不确定是尝试使用`substring`方法还是正则表达式方法：

```
// Want to extract the 510 into an int.
String extract = "PowerFactor510";

// Either:
int num = Integer.valueof(extract.substring(???));

// Or a regex solution, something like:
String regex = "\\d+";
Matcher matcher = new Matcher(regex);
int num = matcher.find(extract); 
```

所以我问：

*   哪种类型的解决方案在这里更合适，为什么？和
*   如果子字符串方法更合适，我可以用什么来表示数字的开头？
*   否则，如果正则表达式是合适的解决方案，我应该使用什么正则表达式/模式/匹配器/方法来提取数字？

**注意：**字符串**总是**以单词开头，`PowerFactor`后跟一个非负整数。提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T13:26:46.380

> 该字符串将始终以单词“PowerFactor”开头，后跟一个非负整数

这意味着您确切地知道您将在哪个索引处找到该数字，我会说您最好直接使用子字符串，至少考虑到它的性能会比搜索和匹配工作快得多。

```
extract.substring("PowerFactor".length()); 
```

我找不到任何直接比较，但您可以阅读以下两个选项中的每一个：

*   [Java 子字符串性能](https://stackoverflow.com/questions/4679746/time-complexity-of-javas-substring)
*   [Java 正则表达式性能](https://stackoverflow.com/questions/3910514/java-regex-performance)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T13:44:25.507

有点好奇并尝试了以下

```
String extract = "PowerFactor510";
long l = System.currentTimeMillis();
System.out.println(extract.replaceAll("\\D", ""));
System.out.println(System.currentTimeMillis() - l);

System.out.println();

l = System.currentTimeMillis();
System.out.println(extract.substring("PowerFactor".length()));
System.out.println(System.currentTimeMillis() - l); 
```

结果发现第二次测试要快得多，因此`substring`获胜。

# .htaccess - .htaccess 重定向 - 两个具有相似路径的 URL

> ID：15616069
> 
> 赞同：0
> 
> 时间：2013-03-25T13:24:04.437
> 
> 标签：.htaccess, redirect, rewrite

这就是我所拥有的。

*   www.website.com/foo（用于营销作品的漂亮 URL）
*   www.website.com/foobar（网站上实际存在的 URL）

我可以让 www.website.com/foo 与此完美配合：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /foo [NC]
RewriteRule ^ http://www.website.com/redirected/url-goes-here/   [L,R=301] 
```

但这也使得 www.website.com/foobar URL 也可以到达那里。

我确定这是一个正则表达式问题，我只是不知道正确的符号来让事情正常工作，但是如何在不影响 /foobar 的情况下正确地进行 /foo 重定向？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:36:38.160

试试这个：

```
RewriteCond %{REQUEST_URI} ^/foo$ [NC]
RewriteRule ^ http://www.website.com/redirected/url-goes-here/   [L,R=301] 
```

`REQUEST_URI`将摆脱额外的请求标头`THE_REQUEST`。然后，您可以使用 和 匹配所请求 URL 的开头和`^`结尾`$`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:44:02.963

你不需要`RewriteCond`. 只是具体的`RewriteRule`模式

```
RewriteRule ^foo$ http://www.website.com/redirected/url-goes-here/   [L,R] 
```

查看更多关于[正则表达式](http://httpd.apache.org/docs/current/rewrite/intro.html#regex)的信息。

永远不要在启用的情况下进行测试，有关详细信息`301`，请参阅此答案[提示调试 .htaccess 重写规则](https://stackoverflow.com/a/9204355/1741542)。

# android-fonts - 为卢比使用自定义字体

> ID：15616073
> 
> 赞同：2
> 
> 时间：2013-03-25T13:24:15.080
> 
> 标签：android-fonts

我想使用卢比的自定义字体作为印度货币。我不知道如何使用自定义字体。所以请建议我。

我可以直接在 XML 文件中使用它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:27:33.667

试试这个：

在 assets 文件夹中创建一个名为“fonts”的文件夹。然后将此代码用作：

```
Typeface fontName = Typeface.createFromAsset(getAssets(), "fonts/font.TTF");
textView.setTypeface(fontName); 
```

希望它对你有用。因为它对我有用。

# c# - TinyMCE 编辑器未在 N2 CMS 中显示

> ID：15616076
> 
> 赞同：1
> 
> 时间：2013-03-25T13:24:43.240
> 
> 标签：c#, asp.net-mvc-4, tinymce, n2cms, dinamico

我创建了一个新的 MVC4 项目，并从 Nuget 添加了 N2 和 Dinamico。一直运行良好，直到我注意到 tinyMCE 编辑器没有显示在文本框中，所以我也从 Nuget 添加了 tinyMCE，但它仍然没有显示。

在 Firebug 控制台中，存在三个 Javascript 错误，因此我怀疑脚本在到达 tinyMCE 初始化代码之前停止运行。错误都在 Edit.aspx 末尾生成的代码中：

```
TypeError: jQuery("#Frame_Outside_Name_e").n2name is not a function 
TypeError: jQuery(".datePicker").n2datepicker is not a function 
TypeError: $.cookie is not a function 
```

我想我缺少一两个文件，但我不知道如何获取它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:17:56.643

I recommend that you upgrade to the latest version of N2 (at [http://github.com/n2cms/n2cms](http://github.com/n2cms/n2cms)) which uses ckeditor rather than tinymce. You can get binaries here: [http://bitbucket.org/bherila/n2cms/downloads](http://bitbucket.org/bherila/n2cms/downloads) and install via NuGet: `Install-Package N2CMS.Dinamico -Source [path_to_extracted_archive]`

*   Relevant forum thread at N2CMS forums: [https://n2cms.codeplex.com/discussions/435952](https://n2cms.codeplex.com/discussions/435952)
*   Relevant commits on Github: [https://github.com/n2cms/n2cms/commits/n2cms-2.5](https://github.com/n2cms/n2cms/commits/n2cms-2.5)

# html - Outlook 上的 HTML 邮件

> ID：15616077
> 
> 赞同：-4
> 
> 时间：2013-03-25T13:24:43.820
> 
> 标签：html, outlook, newsletter

我想创建一个与 Outlook 兼容的时事通讯。**仅**在 Outlook 客户端上，我在左侧有一个巨大的差距。它是用 HTML 编写的。

[http://www.nikosdelig.com/eurasia-newsletter-russian.html](http://www.nikosdelig.com/eurasia-newsletter-russian.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:44:05.737

在 Outlook，尤其是 Outlook 2013 中，您必须指定任何`<td>`高度低于`12px`by: 的表数据 ( ) `style="font-size: 1px; line-height: 1px;"`。例如：

```
<td height="1" bgcolor="#000000" style="font-size: 1px; line-height: 1px;">&nbsp;</td> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-25T19:46:41.573

我不会尝试调试，而是为您提供一个简化且稳定的框架供您使用。如您所见，您不需要代码中的大量额外内容，尤其是嵌套表和`<tbody>`标签。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title></title>
  <style type="text/css">           
    /* Client-specific Styles */
    #outlook a {padding:0;}
    body{width:100% !important; -webkit-text-size-adjust:100%; -ms-text-size-adjust:100%; margin:0; padding:0;} /* force default font sizes */
    .ExternalClass {width:100%;} .ExternalClass, .ExternalClass p, .ExternalClass span, .ExternalClass font, .ExternalClass td, .ExternalClass div {line-height: 100%;} /* Hotmail */
    #backgroundTable {margin:0; padding:0; width:100% !important; line-height: 100% !important;}
    table td {border-collapse: collapse;}
  </style>
</head>
<body style="margin: 0px; padding: 0px; background-color: #FFFFFF;" bgcolor="#FFFFFF"><table bgcolor="#f1f1f1" width="100%" border="0" align="center" cellpadding="0" cellspacing="0"><tr><td><table width="600" border="0" align="center" cellpadding="0" cellspacing="0"><tr><td valign="top" style="padding-top:30px; padding-bottom:30px;">

<table width="100%" border="0" cellpadding="0" cellspacing="0" bgcolor="#FFFFFF">
  <tr>
    <td width="150">
      LOGO
    </td>
    <td width="450" style="padding:20px;">
      HEADER TEXT
    </td>
  </tr>
</table>
<table width="100%" border="0" cellpadding="0" cellspacing="0" bgcolor="#FFFFFF">
  <tr>
    <td width="150" valign="bottom">
      COLUMN
    </td>
    <td width="450" style="padding:20px;">
      BODY<br>
      ...<br>
      ...<br>
      ...<br>
      ...<br>

    </td>
  </tr>
</table>

</td></tr></table></td></tr></table></body></html> 
```

# sql - 清单数据库设计。一对多关系和存储用户信息

> ID：15616078
> 
> 赞同：0
> 
> 时间：2013-03-25T13:24:43.923
> 
> 标签：sql, database, ms-access, relationships

我基本上是在设计一个网络清单。过程如下：用户登录，选择列表的“工作名称”，点击它，进入下一页，从列表中选择“程序列表”，点击它，进入下一页，他看到了一个清单，他基本上可以在其中添加评论，然后单击单个列表上的复选框。我知道如何编写大部分代码，但目前我正在尝试弄清楚如何设置关系+要添加哪些额外的表来保存信息。

我目前的总体布局：

```
Table: User_list
User_ID
Username

Table: Job_list
Job_ID
Job Name

Table: Procedure_List
Procedure_ID
Procedure Name
Job_ID

Table: Check_List
Job_ID
Checklist_ID
Description 
```

Job_ID -> Procedure_ID -> Checklist_ID 是一对多的...但是如何添加用户列表以存储用户所做的所有更改。

所以你基本上可以有一页看到：

```
Job Name
Procedure
Checklist done 
```

以及用户完成的所有细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:23:48.743

我假设这些关系是 Job 1:m Procedure 1:m Checklist。并且用户可以选择任意数量的工作。作业/程序/清单的组合由用户选择。例如，我假设一个 Job 可能有 10 个关联的过程，并且用户选择其中的 1 个或多个。程序相同：给定程序具有与其关联的某些清单，用户可以选择任意数量的这些清单。

使用“连接表”。

1.  User_Job 表。用户可以与任何工作或任何数量的工作相关联。user_ID 和 job_ID 进入 User_Job 表。将主键设为 User_ID + job_ID。
2.  Job_Procedure 表。将 User_Job 键（两列）和 procedure_id 放在此表中。制作主键User_ID、Job_ID、Procedure_ID
3.  Procedure_Checklist 表。将 Job_procedure 键（所有列）和 checklist_id 放在此表中。使用所有列使主键成为复合键。

主键的想法

每个表的主键的序列号将限制相关表中的列数。但是，此键没有真正的意义，例如，如果您正在查看 Procedure_Checklist 表，则如果不查询其他表 - PITA，您将无法分辨出哪个作业和用户。对这样的key进行排序也是没有意义的。它并不能防止重复行。

# grails - 带有格式视图的脚手架不起作用

> ID：15616083
> 
> 赞同：0
> 
> 时间：2013-03-25T13:24:47.887
> 
> 标签：grails, csv, scaffolding

我想在我的脚手架控制器中使用 withFormat 并添加一个脚手架视图“list.csv.gsp”。但是在没有生成我的 list.csv.gsp 视图的情况下，grails 不使用脚手架 list.csv.gsp 视图。

生成 de list.csv.gsp 视图后，它工作正常。但我不会创建所有这些视图，因为它们都是一样的。

我的脚手架控制器列表操作以以下代码结束：

```
 withFormat {
        html {
            [${propertyName}List: ${propertyName}List, ${propertyName}Total: ${propertyName}List.getTotalCount(), params: cleanParams(params)]
        }
        csv {
            response.setContentType('text/csv')
            response.setHeader('Content-Disposition', "attachment; filename=\${message(code: '${domainClass.propertyName}.label')}.csv")
            [${propertyName}List: ${propertyName}List]
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T11:12:24.310

我不知道您是否对此仍有疑问，但带有格式的 grails 文档有此引用：

> Grails 会忽略 HTTP Accept 标头，除非您在 Config.groovy 文件中添加 grails.mime.use.accept.header = true 设置。换句话说，如果没有该设置， withFormat() 将完全不受 Accept 标头的影响。

请参阅grails 文档中的[withFormat](http://grails.org/doc/2.2.1/ref/Controllers/withFormat.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T11:46:47.197

在您看来，您可能需要将其编写为通用的并放在一个公共目录中并参考您的控制器模板以使用它。也许把它做成一个 _template 并渲染它。希望这可以帮助。

# c# - 带有实体框架自动代码迁移的表前缀

> ID：15616084
> 
> 赞同：0
> 
> 时间：2013-03-25T13:24:53.520
> 
> 标签：c#, entity-framework, ef-code-first, entity-framework-migrations

我开始了一个新项目 C#，并在包控制台窗口中使用了“enable-migrations”命令。这自然地为我的项目添加了迁移。然后我将自动迁移设置为 true，这样当我调用“update-database”时，它会为我创建包含所有键的表。

唯一的问题是我有多个网站想要这样做，它们都使用 ASP.NET 成员资格提供程序来登录。通过自动代码迁移创建一堆帐户表供我使用。但是这些表都被称为相同的，所以如果我针对不同站点的相同数据库执行此操作，它们将相互覆盖。所以我得到的问题是：如何为实体框架创建的表指定前缀？

我在搜索时看到了一些关于如何执行此操作的想法，但它们对我不起作用（由于某种原因，必要的属性不存在等等。）

谢谢

异种

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:38:39.260

我不确定您打算如何做到这一点-如果我做对了，您会想保留`one database (shared) in between number of web sites`-但是，每个站点都有自己的成员资格表，名称不同，前缀不同，对吗？

第一个问题是`for each Db/table name change - you need a 'code to match'`- 即代码优先的实体和代码，Db 中的“迁移表” - 并且表都是同步的 - 所以它们都可以按照应有的方式一起工作。从这个意义上说，*仅仅更改 Db 中的脚本或表名是行不通的*。`It has to be done at the level of attributes (as @Steven suggested) or fluent configuration.`

在您的情况下，这意味着您需要以某种方式为每个站点“构建”单独的配置，将它们分别部署（代码）到每个站点 - 并构建一个`mega Db`包含每个站点的所有小`variants`部分合并在一起的站点。

这将很难管理 - 但你可以尝试（我上面描述的） - 我不知道它是否有效（因为这需要很多“基础设施”来尝试这个） - 但也许沿着这些路线...... .

*   放置`Table`属性（或通过流利的配置）
*   构建代码 - 为每个“改变”表名称 - 并重建（理想情况下，您可能需要使用一些工具，代码生成器来批量自动执行此操作 - 即您构建，外部复制文件，更改名称并重复）
*   还为每个案例（表名）构建“迁移” - 将迁移保存为文件 - 并`Update-Database -Script`为每个案例保存实际脚本（重要）。
*   保存每次迁移 - 或者我们可以说一个“脚本”来表示。
*   一旦完成 - 你需要`merge`迁移 - 脚本 - 进入`one big master script`- 即删除相同的表集（当然只留下一个） - 并复制所有不同的成员表集。
*   从数据库中删除`migration table` - 因为那肯定会不同步并且不会让你做任何事情（或者我认为代码中还有一个标志可以忽略它，现在没有它）。有关详细信息，请参阅下面我的另一篇文章。
*   部署一个主数据库 - 使用您创建的脚本
*   将特定代码部署到每个站点。
*   **祈祷一切顺利**:)

必须有一些更聪明的东西 - 但另一方面，迁移不适用于这种情况，因此即使不是不可能，也很难做到这一点。

一些可能有帮助的一般信息...

*如何与现有数据库同步迁移*- 面向生产场景，保持 Db-s 和 CF 匹配。这不完全是您所需要的，但有详细的描述，解决这个问题的可能方法，这是我前段时间写的......

[MVC3 和 Code First 迁移 - “自从创建数据库以来，支持‘blah’上下文的模型已经改变”](https://stackoverflow.com/questions/10254613/mvc3-and-code-first-migrations/10255051#10255051)

总结...

> 对我有用的是使用 Update-Database -Script
> 
> 这将创建一个具有“迁移差异”的脚本，您可以将其作为 SQL 脚本手动应用到目标服务器数据库上（并且您应该插入正确的迁移表行等）。
> 
> 如果这仍然不起作用 - 你仍然可以做两件事......（更多内部）......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:35:38.547

我不知道如何让 Entity Framework 在所有实体中自动执行此操作。但是您可以使用属性或流式 API 强制使用表名或模式来获得所需的效果。例如：

```
[Table("[put prefix here]_Users", Schema = "[put schema here]")]
public class User { 
    // ... 
} 
```

# bash - bash 命令查找前 5 个最消耗 cpu 的进程并发送电子邮件

> ID：15616092
> 
> 赞同：-1
> 
> 时间：2013-03-25T13:25:23.003
> 
> 标签：bash, email, cpu-usage

我正在尝试设置小型内部 cpu 监控 bash 脚本，当 cpu 使用率达到 90% 时，该脚本会向具有前 5 个 cpu 消耗最多的进程的用户发送电子邮件。如果有多个 CPU，它应该能够取所有 CPU 的平均值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:19:49.393

查看该[命令的](http://unixhelp.ed.ac.uk/CGI/man-cgi?ps)[手册页`ps`](http://unixhelp.ed.ac.uk/CGI/man-cgi?ps)。选项之一是`-o`选项。这允许您以`ps`各种方式格式化命令的输出。

例如，要`ps`仅打印这些字段：

```
ps -oni -orss -o%cpu -osize --no-header 
```

您可以通过循环读取它并进入`read`语句：

```
ps -oni -orss -o%cpu -osize --no-header | while read nice mem cpu disk
do
    echo nice = $nice, memory = $mem, cpu = $cpu, disk = $disk
done 
```

以您想要的方式获取 JSON 格式取决于您。我也不是 100% 确定您正在寻找什么价值。是什么`Cpu-Nice`？是nice的值还是cpu使用量？“磁盘使用情况”是什么意思？

查看`ps`联机帮助页，找到所需的列，然后显示它们。也可以使用您的*无标题*选项，或者简单地执行以下操作：

```
ps -oni= -orss= -ocpu%= -osize= 
```

这也将不显示任何标题。

# python - 启动 Python 时遇到了一个。无法获取运行项目

> ID：15616093
> 
> 赞同：8
> 
> 时间：2013-03-25T13:25:24.600
> 
> 标签：python, python-3.x, aptana

启动 Python 时遇到问题。无法获取运行项目

它会让我把单词问题放在标题中。

标题是我尝试在 Aptana 3 中运行/调试文件时得到的确切消息。

我一直能够在 Eclipse 中毫无问题地运行 Python。有谁知道是什么导致了这个错误？

出于测试目的，我刚刚创建了一个新的 Pydev 项目，其中只有 1 个文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-09-26T12:11:53.290

我和 Aptana 有同样的问题，刚刚解决了。在我的例子中，我配置了另一个解释器（IronPython）来运行另一个脚本。当我回到之前的脚本时，我收到了与“无法获取运行项目”相同的错误消息，因为它试图使用 IronPython 而不是 Python 运行它。

因此，我建议以下几点：

1）检查您的解释器配置。-> 窗口 -> 首选项 -> Pydev -> 解释器 Python

如果您没有解释器，请尝试自动配置。如果它不起作用，您必须通过单击新建来自己浏览它（那么它应该在 C:\Python27\python.exe 之类的地方）

2) 如果您有解释器，则意味着 Aptana 正在尝试使用另一个解释器运行您的脚本。在这种情况下，右键单击 Aptana 中的脚本文件 -> 运行方式 -> Python 运行。

这对我有用。

祝你好运 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-18T13:52:13.660

转到运行 -> 运行配置 -> Python 运行
删除“新配置”
然后它必须工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-23T18:20:48.207

I had similar issue. Below action solved my problem.

Go to Run > run configuration > python run Delete all the configurations below python run - it may not be a great option if you have any custom configuration settings.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-29T21:42:35.933

当您为运行程序创建**新配置时会发生这种情况。**转到**运行**>**运行配置**> **python 运行**

**选择**“新配置”

按下**删除**图标

并再次**运行**程序。

这对我有用。

# python - 两个大文件的选择性连接

> ID：15616094
> 
> 赞同：1
> 
> 时间：2013-03-25T13:25:24.937
> 
> 标签：python

我有两个非常大的平面文本文件（每个 > 10 GB）。这些文件由许多行组成 - 每行是一个字符串（大约 80 个字节）分隔符，然后是另一个更大的字符串。第一个字符串类似于第一个文件的唯一键，但可以在第二个文件中重复。所以，我需要得到一个结果文件——它应该包含键（可能像在第二个文件中一样重复）分隔符是第一个文件中的第二个字符串，然后是第二个文件中的第二个字符串。

我正在考虑使用 dict 来存储来自第一个文件的信息： key = someHash(str1), value = position in file 并通过第二个文件进行迭代并将结果打印到第三个文件但我不知道应该是哪个哈希used 和 if 应该使用 以及如何解决可能的冲突？最后如何为这个问题构建有效的（内存+时间）解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:46:16.553

python 提供的散列被设计为具有加密强度，这意味着，简单来说，它们是处理器密集型的。如果您决定使用脚本解决方案，请参阅[此问题以了解其他选项。](https://stackoverflow.com/questions/2575787/looking-for-a-fast-hash-function)

# php - 强制将 html 代码下载为文件（PHP、jQuery）

> ID：15616097
> 
> 赞同：0
> 
> 时间：2013-03-25T13:25:34.647
> 
> 标签：php, jquery, dropbox, privacy

首先，我已经做**了很多**研究，但没有一个解决方案适用于我。我的问题似乎更具体一点。

我有一个 html 页面，我正在其上生成 html 内容（更具体地说，它是一个从用户的 Dropbox 帐户加载图像的画廊）。

将画廊存储在服务器上将是一个**巨大**的隐私问题，因此我需要将 html 代码直接保存到用户计算机上的文件中。

我尝试了两个主要的解决方案：

1）一个php文件-我认为不可能这样做，因为页面将重新加载，然后html代码丢失

2）单独的html（登录Dropbox，生成画廊）和php（保存）文件-似乎不可能通过ajax将画廊代码发送到php文件。

请问有什么想法吗？

这是一个非常开放的问题，我的主要目标是提出一个注重隐私的解决方案，以便用户可以保存它而不必怀疑我是否保留了他或她的数据。

一个想法，例如：将图库保存为文件（我知道如何执行此部分）并在文件下载后将其删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:31:03.340

我会将它保存到服务器，然后使用 PHP 下载文件。如果您需要在之后删除它，请执行此操作。

```
$fp = fopen ("http://www.example.com/yourfile.html", "r");

while (!feof ($fp)) 
{
    $buffer = fgets($fp, 4096);
    echo $buffer;
}

fclose ($fp); 
```

# wix - WIX 安装程序 - 如果已安装和/或注册 dll，则阻止安装和注册

> ID：15616098
> 
> 赞同：1
> 
> 时间：2013-03-25T13:25:37.740
> 
> 标签：wix, windows-installer

我有一个安装程序，其中包含正确安装的各个组件中的大量文件。

我现在被告知，只有当其中一个文件不存在且尚未注册时，才需要注册它。

我已经使用 heat 为文件生成适当的条目；

```
<Component Id="AXSListenerdll" Guid="b1f80295-8806-4f6a-bf28-0ee35540317c">
              <File Name="AXSListener.dll" KeyPath="yes" Vital="yes">
                <TypeLib Id="{CE807033-6BEE-44D3-A86A-E9BC1D0716A4}" Description="AXSListenerLib" Language="0" MajorVersion="1" MinorVersion="0">
                  <Class Id="{C66BC66D-546E-4E74-A69F-BA97E4117E6B}" Context="InprocServer32" Description="IImplementedAlarmTypesCollection Class" ThreadingModel="both" Programmable="yes">
                    <ProgId Id="SymEvents.IImplementedAlarmTypesCollection.1" Description="IImplementedAlarmTypesCollection Class">
                      <ProgId Id="SymEvents.IImplementedAlarmTypesCollection" Description="IImplementedAlarmTypesCollection Class" />
                    </ProgId>
                  </Class>
                </TypeLib>
              </File>
            </Component> 
```

我的问题是，如果该特定文件已经存在并已注册，我该如何防止它被安装。

我只是对此有点心理障碍。

我敢肯定答案一定很明显，我就是看不到！

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:44:25.877

默认情况下，Windows Installer 使用文件版本控制来决定是否需要安装/重新安装此文件。例如，如果 MSI 有 1.0.0.0 版本要安装并且 1.0.0.0 已经存在，那么它不会重新安装。安装时，它将重新应用 DLL 的注册表项。

提供给您的要求有点奇怪/错误。它可以被读取为好像 MSI 有文件 2.0 但 1.0 已经存在，不要安装。这不是一个好的设计，微星也不是那样运作的。

# c++ - memcpy 和 std 组件，例如 map: runtime failer

> ID：15616099
> 
> 赞同：-1
> 
> 时间：2013-03-25T13:25:37.890
> 
> 标签：c++, c

我有一个我尝试修改的旧 C 库。有这样一行：

```
memcpy(&m_agents[idx].params, params, sizeof(dtCrowdAgentParams)); 
```

当然，C stule pod 之类的值和结构也会被复制。但我尝试添加`params.some_struct.some_inner_map_field` `std::map`，但它没有在 memcpy 上初始化。

所以我想知道如何复制我的地图使其保持活力？（如果可能，不要扩展`params`and的方法`params.some_struct`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:35:36.857

我需要查看结构的完整定义才能确定，但​​这应该有效：

```
m_agents[idx].params = *params; 
```

对于 POD 类型，它的作用与 memcpy 相同。对于非 POD 类型，它将调用它们的赋值运算符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T13:46:51.097

将其替换为

```
m_agents[idx].params = *params; 
```

将纠正该实例。但是，可以合理地假设您正在使用的 C 库始终假设 POD，因此您需要检查整个代码库以确保它没有做任何会破坏其他地方的事情。

您的地图在库中是可变的，还是在库处理数据时您可以将它们视为常量？如果您可以将它们视为常量，请考虑将句柄或指针传递给您映射到库中，而不是将映射本身包含在参数结构中。

# c - 在预定义的结构上创建动态向量

> ID：15616103
> 
> 赞同：1
> 
> 时间：2013-03-25T13:25:46.280
> 
> 标签：c, dynamic, vector, struct

我有一个预定义的结构要使用：

```
typedef struct somestruct_s {
    int s;
    union {
        unsigned char *ptr;
        unsigned char l_ptr[sizeof(char *)];
    };
}somestruct_t, *somestruct; 
```

它包含联合以减少内存使用。我知道大小会因 m32 和 m64 编译（指针大小）而有所不同。我的问题是如何为我的精确分配“使用”该结构。该结构的目的是实现基本的位操作，s 变量包含位图的大小（以字节为单位）。如果位图可以放入指向位图的指针所占用的内存中，那么我们将她分配在那里。我在上面写了一些位图操作，但我无法真正获得结构或如何对其进行操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:48:23.037

我无法理解你的问题是什么。您必须有一个主要功能，它将根据指针大小返回正确的位图指针：

```
unsigned char* somestruct_get_bitmap(somestruct_t* ths) {
    if( sizeof(char*) > ths->s ) 
        return ths->ptr;
    return ths->l_ptr;
} 
```

所有其他函数必须使用这个函数来获得正确的位图指针。您还需要构造函数/析构函数对以正确的方式初始化/取消初始化位图指针（因为我展示了假设您有以空值结尾的位图的最简单示例）：

```
unsigned char* somestruct_init(somestruct_t* ths, unsigned char* ptr) {
    ths->s = strlen(ptr) + 1;
    if( sizeof(char*) > ths->s )  {
       ths->ptr = strdup(ptr);
       return;
    }
    strcpy(ths->l_ptr, ptr);
}

unsigned char* somestruct_destroy(somestruct_t* ths) {
    if( sizeof(char*) > ths->s )  {
        free(ths->ptr);
        return;
    }
} 
```

# ajax - facebook同步提要/评论的方式

> ID：15616114
> 
> 赞同：0
> 
> 时间：2013-03-25T13:26:24.887
> 
> 标签：ajax, facebook, comments, feed

我正在开发一个与 facebook.com 非常相似的系统。在这个功能中，我们案例中的用户（学生）可以向他/她的大学同学发送状态消息，就像我们在 facebook 中使用的一样。我们也可以针对提要发送评论。我已经完成了将提要同步到该提要的所有查看者的功能。一旦将新评论添加到特定提要中，我想对评论执行相同的操作，提要使用最新评论进行更新，而无需重新加载页面。这对于发送评论但也想更新其他评论的特定用户来说效果很好。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:36:32.607

使用 javascript/jquery 定期检查数据库中的新提要，例如 5 秒。

如果在数据库中保存了一些新的提要/评论，则响应定期请求发回，并附加到相应提要的底部或顶部。

# github-pages - 为什么这个 github 托管站点 (http://gitready.com) 既不是“用户/组织页面”也不是“项目页面”？

> ID：15616117
> 
> 赞同：1
> 
> 时间：2013-03-25T13:26:27.617
> 
> 标签：github-pages

[Github页面帮助页面](https://help.github.com/articles/user-organization-and-project-pages)说有两种基本类型的页面可用，用户/组织页面和项目页面：
在用户/组织页面中，repo必须使用`username/username.github.com`命名方案并且`username.github.com`是页面的域，并且内容应该放在`master`分支。
在项目页面中，`gh-pages`分支用于构建和发布。

但是在这个[Jekyll 支持的博客列表中](https://github.com/mojombo/jekyll/wiki/Sites)，我发现这个具有自定义域的[repo](https://github.com/gitready/gitready)`http://gitready.com`似乎不符合两种页面（分支名称和 repo 命名方案）中的任何一种的要求。但是根据[这个测试](http://uptime.netcraft.com/up/graph?site=http%3A%2F%2Fgitready.com)，do 似乎托管在 github 上。

这个网站托管在 github 上吗？如果是，为什么不符合要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:17:38.133

首先，[从昨天（2013 年 4 月 5 日）开始](https://github.com/blog/1452-new-github-pages-domain-github-io)，这应该是**username/username.github.io**

其次，您可以拥有自己的域，并重定向到正确的 github 地址。

请参阅“[使用 Pages 设置自定义域](https://help.github.com/articles/setting-up-a-custom-domain-with-pages)”。

> GitHub Pages 允许您将您选择的域名定向到您的页面。
> 
> 当您设置自定义域时，服务器会自动为您创建一些重定向：

```
username.github.io ⇒ example.com for user pages 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-09T15:38:23.367

这看起来是 GitHub Pages 规则的一个例外（正如您所指出的，它似乎既不是从 a`master`也不是`gh-pages`分支提供），但服务器签名似乎仍然与[其他 GitHub Pages 站点](http://toolbar.netcraft.com/site_report?url=jekyllrb.com#last_reboot)的签名相匹配。可能的原因包括：

*   [Nick Quaranto](http://toolbar.netcraft.com/site_report?url=quaran.to#last_reboot)是 Git Ready 的创建者，也是 Jekyll 的[创建者之一，Jekyll](https://github.com/jekyll/jekyll)是为 GitHub Pages 提供支持的静态站点生成器，并且当 GitHub从[他的用户存储库](https://github.com/qrush/gitready)[移动](https://github.com/gitready/gitready/commit/2d1c7df0a9d359274da0ead48257ba45801890e0)到自己的组织回购。
*   GitReady 对 GitHub 具有重要的战略意义（鼓励更多的 Git 用户），因此他们破例在常规 Pages 规则之外支持它，因为它是 GitHub Pages 功能的早期流行示例

# javascript - Javascript循环显示文档中的隐藏元素（Jquery也可以）

> ID：15616118
> 
> 赞同：1
> 
> 时间：2013-03-25T13:26:41.760
> 
> 标签：javascript, jquery, html

我有一个使 div 可见/隐藏的冗余过程，我相信提高效率的方法是使用循环。

目前我在文档中有很多 div，但我特别想处理 6 个。我有一系列对应于六个 div 的按钮。当人们单击按钮时，AI 想要显示（使可见）div A 并隐藏 Div 的 B、C、D、E、F。我的 javascript 是这样的：

```
<a href="#" onclick="ShowMe('A'); return false" />
<a href="#" onclick="ShowMe('B'); return false" />
<a href......etc />

<div id="A">blah...blah</div>
<div id="B">blah...blah</div>

<script type="java....">

   function ShowHideDiv(DivName)
   {
      if(DivName == 'A')
      {
         var diva = document.getElementById('A');
         div.style.visibility = 'visible';

         var divb = document.getElementById('B');
         div.style.visibility = 'hidden';

         etc....
      }
      else if (DivName == 'B')
      {
         var diva = document.getElementById('A');
         div.style.visibility = 'hidden';

         var divb = document.getElementById('B');
         div.style.visibility = 'visible';
         etc...............
      }

   }

</script> 
```

所以正如提到的循环的主要候选者，但我的问题是如何包含循环。例如，如果我的循环遍历整个文档对象，那么我会希望隐藏可见的 div，那么我该如何避免这种情况呢？

我有两个想法，但如果其他人有其他想法、想法、技术等。

1.  给我的 div 一个非常奇怪的前缀，比如 ShowHide_A，然后我的循环可以遍历文档对象中的所有 div，解析它的名称，如果它没有前缀，则移动到下一个。如果我们有一个大文档并且脚本获取每个对象并解析然后检查名称，这当然会非常低效。

2.  将有问题的 div 包装在父容器中，例如：

然后我的 javascript 可以包含在仅通过 DivParent 树的循环中。但是如果我的 div 位于文档模型中的不同位置怎么办？我是否将它们保留在 ParentDiv 和位置，然后它们属于 css 位置属性？

任何其他想法将不胜感激 JB

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:35:25.470

让我提出一个更好的方法。

如果可以使用 jQuery，则可以执行以下操作：

`box`为所有 div分配一个类（例如）。然后你的按钮需要调用这个函数：

```
function toggleDiv (divID) {
    $(".box").hide();
    $("#"+divID).show();
} 
```

您还可以做的是`data-div`为您的按钮分配 eg 属性，其中包含要隐藏/显示的 div 的 ID，然后您可以将上面的内容转换为以下内容（假设您的按钮具有`button`类）：

```
$(".button").click(function () {
    var divID = $(this).attr("data-div");
    $(".box").hide();
    $("#"+divID).show();
}); 
```

以上涵盖了所有内容，将事件分配给按钮和隐藏/显示 div。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T13:39:35.417

看看假设你有这样的标记

```
<div id="A" class="marked" >A</div>
<div id="B" class="marked" >B</div>
<div id="C" class="marked" >C</div>
<div id="D" class="marked" >D</div>
<div id="E" class="marked" >E</div>

<input type="button" value="Show A" data-target-div="A"  />
<input type="button" value="Show B" data-target-div="B" /> 
```

然后添加这样的脚本：

```
$('input[type=button]').click(function(){
    $('.marked').hide(200);
   $('#'+$(this).data('target-div')).show();
}); 
```

它应该工作。

看到这个[小提琴](http://jsfiddle.net/manishmishra256/YMH28/)

因此，您不是在遍历所有 dom 元素，而是在选择需要处理的元素。单击后，您将所有这些隐藏起来，并显示目标，即`data-target-div`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T13:32:15.477

基于jQuery的解决方案：

向您的 div 添加一个允许隐藏/显示的类，然后执行

```
function ShowHideDiv(DivName)
{
    $(".ShowHide").not("#" + DivName).hide();
    $("#" + DivName).show();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T13:38:40.137

将 class='switchable' （或其他）添加到每个这样的 DIV 然后使用prototype.js 你可以做这样的事情

```
function showMe( elem ) {
  $$( '.switchable' ).each( function( switchable ) {
    if ( switchable.id == $(elem).id )
      switchable.show();
    else
      switchable.hide();
  } );
} 
```

# ios - 构建包含 AFNetworking 的项目时发生大量错误

> ID：15616119
> 
> 赞同：-2
> 
> 时间：2013-03-25T13:26:43.940
> 
> 标签：ios, objective-c, xcode, ios6, afnetworking

谁能告诉我发生了什么事？发生了一堆错误，我不知道为什么：

```
/JSONKit.m:680:12: Direct access to objective-c's isa is deprecated in favor of object_setClass() and object_getClass()
/JSONKit.m:931:17: Direct access to objective-c's isa is deprecated in favor of object_setClass() and object_getClass()
  "_SCNetworkReachabilityCreateWithName", referenced from:

  "_SCNetworkReachabilityGetFlags", referenced from:

  "_SCNetworkReachabilityScheduleWithRunLoop", referenced from:

  "_SCNetworkReachabilitySetCallback", referenced from:

  "_SCNetworkReachabilityUnscheduleFromRunLoop", referenced from:

  "_UTTypeCopyPreferredTagWithClass", referenced from:

  "_UTTypeCreatePreferredIdentifierForTag", referenced from:

  "_kUTTagClassFilenameExtension", referenced from:

  "_kUTTagClassMIMEType", referenced from:

clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:34:30.367

您缺少所需的框架。分别为 iOS 或 OS X 导入 SystemConfiguration 和 MobileCoreservices/CoreServices。

之后，您可能希望在[此处](https://stackoverflow.com/questions/13477109/im-getting-compiler-warnings-with-afnetworking-but-shouldnt-be-how-do-i-fix/13479569#13479569)查看我的答案以修复编译器警告。

# javascript - Knockout js 从其他视图模型收集数据

> ID：15616121
> 
> 赞同：1
> 
> 时间：2013-03-25T13:26:47.880
> 
> 标签：javascript, jquery, knockout.js

我有一个使用几种不同视图模型的应用程序（这是我第一次使用淘汰赛 js 构建应用程序）。

基本上我正在做的是一个向导，每个页面都是一个淘汰视图模型，最后我想从所有视图模型中获取所有 json 并使用最终按钮提交它。

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:33:43.240

我建议使用单页应用程序。

本质上，您将拥有一个视图模型，其中包含向导中每个步骤的部分，并且在提交时，您拥有所需的所有数据。

可见性/美学可以通过 css 和智能绑定来控制。

[RP Niemeyer 有一个很好的演示，并且在这个答案](https://stackoverflow.com/a/7431027/326543)中也谈到了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T14:43:25.183

```
window.firstViewModel = new function()
{  
   var self = this;
   self.firstProperty = ko.observable();
   //  
}  

window.secondViewModel = new function()
{  
   var self = this;
   self.secondProperty = ko.observable();
   //  
}  

var submit = function()  
{
   var firstProperty = firstViewModel.firstProperty(); // access to firstViewModel 
   var secondProperty = secondViewModel.secondProperty(); // access to secondViewModel
   //...  
} 
```

# c - Unix（FreeBSD） - 如何每秒获得真实时钟

> ID：15616122
> 
> 赞同：0
> 
> 时间：2013-03-25T13:26:52.447
> 
> 标签：c, unix, posix, freebsd

任何人都知道，如何获得每秒时钟的实际值？`clock()`from`time.h`从我的进程开始返回时钟，所以它需要除以`CLOCKS_PER_SEC`，但这个常数总是有 value `1000000`。

有一些 POSIX 标准吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:31:00.557

这就是它在 C 规范中指定的方式。

如果您想测量经过的时间，还有其他（和更好的）功能，[`gettimeofday`](http://pubs.opengroup.org/onlinepubs/009695399/functions/gettimeofday.html)例如。

# ios - UITabBar 去除黑色背景

> ID：15616125
> 
> 赞同：1
> 
> 时间：2013-03-25T13:26:55.457
> 
> 标签：ios, objective-c, xcode

正如标题所述，我没有成功删除 UITabBar 中的黑色背景。

我知道可以在它上面添加一个子视图。但我希望它是透明的，所以如果我在它上面添加一个透明的子视图，它只会有底层的黑色。

设置 tintColor 使我能够更改 UITabBar 的颜色，但是当我将其更改为 clearColor 时，它将再次变为黑色。

有人知道如何删除底层图像或颜色，使其透明吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:33:13.123

当他们`tintColor`在 iOS 5 中添加该属性时，他们还为`UITabBar`. 参见`backgroundImage`和`selectionIndicatorImage`以及 的`finishedSelectedImage`和`finishedUnselectedImage`属性`UITabBarItem`。

# c# - ServiceStack JsonServiceClient 使用路由属性发送抛出未找到异常

> ID：15616129
> 
> 赞同：1
> 
> 时间：2013-03-25T13:27:02.777
> 
> 标签：c#, servicestack

我正在尝试使用 servicestack 进行简单的 api post 调用，并且它不断抛出“未找到”异常。当使用 web 浏览器 rest api（例如邮递员）直接对 api 进行相同的 post 调用时，api 调用有效。

我用路由属性装饰了我的请求对象

```
[Route("/register", "POST")]
public class Register : IReturn<RegistrationResponse>
{
    public DateTime? BirthDate { get; set; }

    public string Continue { get; set; }

    public string Email { get; set; }

    public string FirstName { get; set; }

    public string LastName { get; set; }

    public string Gender { get; set; }

    public string Password { get; set; }
} 
```

JsonServiceClient 使用基本 uri 初始化，但以下调用失败

```
_client = new JsonServiceClient(_apiUri);
_client.HttpMethod = HttpMethods.Post;
var response = _client.Send(body); 
```

我发现的例外是：

> $exception {"Not Found"} System.Exception {ServiceStack.ServiceClient.Web.ServiceClientBase.ThrowWebServiceException[TResponse](Exception ex, String requestUri) at ServiceStack.ServiceClient.Web.ServiceClientBase.ThrowResponseTypeException {ServiceStack.ServiceClient.Web.WebServiceException} ServiceStack.ServiceClient.Web.ServiceClientBase.HandleResponseException [TResponse]（对象请求，异常前，字符串 requestUri）[TResponse]（异常前，对象请求，字符串 requestUri，Func `1 createWebRequest, Func`2 getResponse，TResponse& 响应）在 ServiceStack.ServiceClient.Web。 ServiceClientBase.Send[TResponse](Object request) at ApiService`2.Post(String path, TParams body) in ApiService.cs:line 81

servicestack 上关于新 API 的文档提到了装饰请求 DTO 的 Route 属性的使用以及 IReturn 的使用，但是通过查看 Send 方法背后的代码，它正在从请求的名称中计算出其余的 api url ，这意味着您的请求 dto 不能命名为任何不同的名称。

```
public virtual TResponse Send<TResponse>(object request)
{
    var requestUri = this.SyncReplyBaseUri.WithTrailingSlash() + request.GetType().Name;
    var client = SendRequest(requestUri, request);

    try
    {
        var webResponse = client.GetResponse();
        return HandleResponse<TResponse>(webResponse);
    }
    catch (Exception ex)
    {
        TResponse response;

        if (!HandleResponseException(ex,
            request,
            requestUri,
            () => SendRequest(HttpMethods.Post, requestUri, request),
            c => c.GetResponse(),
            out response))
        {
            throw;
        }

        return response;
    }
} 
```

是什么导致 Not Found 异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:03:52.067

您的 Register 类中的所有内容看起来都是正确的。

对于您的客户电话，我会将其更改为

```
_client = new JsonServiceClient(_apiUri);
_client.Post(new Register()); //assuming you can map your 'body' variable to a Register class 
```

只是为了丢失额外的代码行。

**它正在从请求的名称中计算出其余的 api url，这意味着您的请求 dto 不能被命名为任何不同的名称。**

它正在计算其余 api 将命中的端点。一旦到达端点，ServiceStack 的内部应该根据 Operation（在本例中为 Register）和 Http 方法处理路由。基本上，它会尝试找到一个以请求对象（Register）为参数的服务类（任何继承服务标记接口的类），并将使用 Http 方法作为调用的“函数”。

**是什么导致 Not Found 异常？**

不完全确定这一点。如果您可以提供您的“服务”课程，它可能会有所帮助。

如果您有类似的服务类

```
public class RegisterService : Service
{
    public RegistrationResponse Post(Register request) 
    {
        //service code 
        return new RegistrationResponse();
    }
} 
```

路由应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:31:47.987

对此的修复是确保在 api 上启用了预定义路由的 servicestack 功能。完成此操作后，您无需担心请求对象上的 Route 属性。

端点主机配置现在如下所示：

```
new EndpointHostConfig
{
    DefaultContentType = ContentType.Json,
    EnableFeatures = Feature.None
                            .Add(Feature.Json)
                            .Add(Feature.PredefinedRoutes),
    GlobalResponseHeaders = new Dictionary<string, string>(),
    DefaultRedirectPath = "/documentation"
} 
```

# perl - 我如何使用 Linux 支持中的 perl 模块从 Ms Word 文档中读取数据

> ID：15616132
> 
> 赞同：-1
> 
> 时间：2013-03-25T13:27:05.183
> 
> 标签：perl, module, ms-word

如何使用 Linux 支持中的 Perl 模块从 MS Word 文档中读取数据

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T13:43:06.577

Text::Extract::Word[看起来可能是一个不错的起点。](https://metacpan.org/module/Text%3a%3aExtract%3a%3aWord)来自简介：

```
# object-based interface
use Text::Extract::Word;
my $file = Text::Extract::Word->new("test1.doc");
my $text = $file->get_text();
my $body = $file->get_body();
my $footnotes = $file->get_footnotes();
my $headers = $file->get_headers();
my $annotations = $file->get_annotations();
my $bookmarks = $file->get_bookmarks();

# specify :raw if you don't want the text cleaned
my $raw = $file->get_text(':raw');

# legacy interface
use Text::Extract::Word qw(get_all_text);
my $text = get_all_text("test1.doc"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:48:34.010

我将 OLE 用于 Word、Excel 和 Outlook：

```
require Win32::OLE;
$docfile = "C:\\something.doc";
$Word = Win32::OLE->GetActiveObject('Word.Application');
unless ($Word) { $Word = Win32::OLE->new('Word.Application', sub {$_[0]->Quit;}) or die "oops\n"; }
$Word->{visible} = 1;
my $File = $Word->Documents->Open($docfile);
$File->PrintOut();
$File->Close(); 
$Word->Quit();
undef $File;
undef $Word; 
```

# git - 将提交从一个存储库推送到另一个存储库

> ID：15616133
> 
> 赞同：5
> 
> 时间：2013-03-25T13:27:06.223
> 
> 标签：git

我可以将提交从一个 Git 存储库推送到*另一个*Git 存储库的分支吗？

例如，我`aaaa`在存储库 A 中有一个提交。提交`aaaa`位于一个名为“测试”的分支中。我想将提交推`aaaa`送到名为“Stable”的分支中，该分支位于另一个名为 Repository B 的存储库中。当从 A 推送到 Repository B 时，对 Repository B 的新提交应该是 commit 的精确图像`aaaa`，即替换所有文件在存储库 B 的“稳定”分支中，与来自 A 的分支一起。

如果这是可能的，我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T13:32:04.680

尝试这个：

```
git push repositoryb aaaa:Stable 
```

我假设`repositoryb`是一个远程指向另一个仓库。而且，如果您还没有掌握 git，那么以上内容会将提交推`aaaa`送到`aaaa`.

# c# - 数据表 VS 数据视图

> ID：15616137
> 
> 赞同：6
> 
> 时间：2013-03-25T13:27:16.213
> 
> 标签：c#, asp.net, vb.net

嗨，我真的不明白数据表和数据视图之间的区别，因为我们可以这样做：

```
 Dim dtb As New DataTable()
   Dim dtv As DataView = dtb.DefaultView 
```

提前致谢 。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-25T13:29:02.327

这`Datatable`是根据您从数据库中的查询提取的未排序和未过滤的 DataRows 集合。
DataView（你可以有多个）是相同数据的过滤和/或有序视图。

例如：

```
 using(SqlConnection cn = GetConnection())
 {
     cn.Open();
     SqlDataAdapter da = new SqlDataAdapter("SELECT * FROM Customers", cn);
     DataTable dt = new DataTable();
     da.Fill(dt);

     // At this point dt is filled with datarows extracted from the database in no particular order 
     // And the DefaultView presents the same record organization (or lack of), but...

     // Order on the default view by CustomerName
     dt.DefaultView.Sort = "CustomerName";
     foreach(DataRowView rv in dt.DefaultView)
          Console.WriteLine(rv["CustomerName"].ToString();

     // A new dataview with only a certain kind of customers ordered by name
     DataView dvSelectedCust = new DataView(dt, "CreditLevel = 1", "CustomerName", DataViewRowState.Unchanged);
     foreach(DataRowView rv in dvSelectedCust)
          Console.WriteLine(rv["CustomerName"],ToString();

 } 
```

当然，创建和维护 DataView 会影响性能，因此您可以选择仅在真正需要时才使用它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T13:29:48.763

有很多与此相关的互联网链接，但仅供参考

> DataView 是 DataTable 的自定义视图，用于排序、筛选、搜索、编辑和导航。DataView 不存储数据，而是表示其对应 DataTable 的连接视图。

您可以查看 VB 中的简单 DataView[示例](http://msdn.microsoft.com/en-IN/library/system.data.dataview.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T13:30:07.657

DataView 是用于过滤或应用表达式排序等的附加层。

DataView 包含诸如`RowFilter`

链接：http: [//msdn.microsoft.com/fr-fr/library/system.data.dataview.aspx](http://msdn.microsoft.com/fr-fr/library/system.data.dataview.aspx)

# python - 从 csv 文件创建元组列表

> ID：15616139
> 
> 赞同：3
> 
> 时间：2013-03-25T13:27:24.520
> 
> 标签：python, list, csv, tuples

我是 python 初学者，努力在 python 中创建和保存包含来自 csv 文件的元组的列表。

我现在得到的代码是：

```
def load_file(filename):
    fp = open(filename, 'Ur')
    data_list = []
    for line in fp:
        data_list.append(line.strip().split(','))
    fp.close()
    return data_list 
```

然后我想保存文件

```
def save_file(filename, data_list):
    fp = open(filename, 'w')
    for line in data_list:
        fp.write(','.join(line) + '\n')
    fp.close() 
```

不幸的是，我的代码返回一个列表列表，而不是一个元组列表......有没有办法在不使用 csv 模块的情况下创建一个包含多个元组的列表？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T13:30:34.360

`split`返回一个列表，如果你想要一个元组，将它转换为一个元组：

```
 data_list.append(tuple(line.strip().split(','))) 
```

请使用该`csv`模块。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-25T13:33:26.103

第一个问题：为什么列表列表不好？在“鸭式打字”的意义上，这应该没问题，所以也许你再考虑一下。

如果您真的需要一个元组列表 - 只需要进行小的更改。

换行

```
 data_list.append(line.strip().split(',')) 
```

至

```
 data_list.append(tuple(line.strip().split(','))) 
```

而已。

如果您想摆脱自定义代码（代码越少越好），您可以坚持使用[csv](http://docs.python.org/2/library/csv.html)模块。我强烈建议使用尽可能多的库方法。

炫耀一些高级 Python 功能：您的`load_file`-method 也可能如下所示：

```
def load_file(filename):
    with open(filename, 'Ur') as fp:
        data_list = [tuple(line.strip().split(",") for line in fp] 
```

我在这里使用列表推导，它非常简洁易懂。

此外，我使用`with`-statement，即使您的代码中发生异常，它也会关闭您的文件指针。`with`在处理外部资源（如文件）时，请始终使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T13:37:18.433

只需将“tuple()”包裹起来`line.strip().split(',')`，你就会得到一个元组列表。[您可以在这个可运行的 gist](https://www.pythonanywhere.com/gists/5237115/load_tuples.py/ipython2/?affiliate_id=000003ec)中看到它的实际效果。

# xml - 如何提取xml属性的值？

> ID：15616141
> 
> 赞同：1
> 
> 时间：2013-03-25T13:27:35.203
> 
> 标签：xml, xpath

如何使用 xpath 从此 xml 中提取值 autolex？目前我正在尝试使用这个 xpath 表达式`/Context[@path]`，但它返回完整的元素。

我只需要值 autolex

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- neue Version des context.xml zum Deployment ausserhalb des Tomcat webapps-verzeichnis -->
<Context path="/autolex" 
         docBase="../../../applications/srs-autolex-1.1.1-0.war" 
         clearReferencesStatic="true" 
         unpackWAR="false" 
         reloadable="false">
  <Valve className="org.apache.catalina.valves.AccessLogValve"
    fileDateFormat="yyyy-MM-dd"
    pattern="%h %l %u %t &quot;%r&quot; %s %b &quot;%{Referer}i&quot; &quot;%{User-Agent}i&quot;"
    prefix="autolex."
    suffix=".log"/>
  <ResourceLink global="pendb"
      name="jdbc/DataSource"
      type="javax.sql.DataSource"/>
  <WatchedResource>WEB-INF/web.xml</WatchedResource>
</Context> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:33:39.820

您需要选择属性：

```
/Context/@path 
```

您的原始查询`/Context[@path]`选择`Context`具有`path`属性的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T13:34:24.547

这应该有效：`/Context/@path`

# javascript - 为什么不是圆？

> ID：15616142
> 
> 赞同：0
> 
> 时间：2013-03-25T13:27:38.937
> 
> 标签：javascript, graphics, 2d, geometry, curve

我正在学习 2D 图形，我正在尝试画圆，但我得到了一些奇怪的曲线。

```
function rotatePoint (point, centerPoint, theta) {
    point[0] = point[0] - centerPoint[0];
    point[1] = point[1] - centerPoint[1];
    point[0] = point[0]*Math.cos(theta)-point[1]*Math.sin(theta);
    point[1] = point[0]*Math.sin(theta)+point[1]*Math.cos(theta);
    point[0] = point[0] + centerPoint[0];
    point[1] = point[1] + centerPoint[1];
} 
```

公式看起来不错，但是...我不知道，我想不通：/ ...感谢您的帮助。 [http://jsfiddle.net/nQvGT/173/](http://jsfiddle.net/nQvGT/173/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:33:43.383

您正在更改一个值，然后在计算另一个值时使用该值。您必须首先使用原始值计算这两个值，然后设置它们：

```
var p0 = point[0]*Math.cos(theta)-point[1]*Math.sin(theta);
var p1 = point[0]*Math.sin(theta)+point[1]*Math.cos(theta);
point[0] = p0;
point[1] = p1; 
```

演示：http: [//jsfiddle.net/Guffa/nQvGT/174/](http://jsfiddle.net/Guffa/nQvGT/174/)

# .net - 使用 MS Chart 以编程方式绘制点图时出错

> ID：15616143
> 
> 赞同：0
> 
> 时间：2013-03-25T13:27:39.557
> 
> 标签：.net, mschart

我必须使用 MS-Chart 功能绘制 XY 图表。要求是绘制五个不同的点（每个点都有不同的 X 和 Y 坐标和不同的标记样式）。因此，在这种情况下，X 和 Y 点都需要绘制。

请帮我做这件事。我尝试为此使用“点”图表，但不知何故它对我不起作用。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:14:54.907

像这样的东西...

```
 //// initialize an array of doubles for Y values
        double[] yval = { 5, 6, 4, 6, 3 };
        // initialize an array of strings for X values
        double[] xval = { 1, 4, 6, 8, 9 };
        // bind the arrays to the X and Y values of data points in the "ByArray" series
        chart1.Series["Series1"].Points.DataBindXY(xval, yval);
        chart1.Series["Series1"].ChartType = SeriesChartType.Point;
        chart1.Series["Series1"].Points[0].MarkerStyle = MarkerStyle.Square;
        chart1.Series["Series1"].Points[1].MarkerStyle = MarkerStyle.Cross; 
        chart1.Series["Series1"].Points[2].MarkerStyle = MarkerStyle.Triangle; 
        chart1.Series["Series1"].Points[3].MarkerStyle = MarkerStyle.Circle;
        chart1.Series["Series1"].Points[4].MarkerStyle = MarkerStyle.Star4; 
```

# android - 正则表达式从域名中查找 TLD

> ID：15616152
> 
> 赞同：2
> 
> 时间：2013-03-25T13:28:14.630
> 
> 标签：android, regex

我正在获得一个完整的域名。我想要的只是从该名称中获得域**TLD**。
我已经寻找了很多模式，但找不到任何从域名获取 TLD 的模式。
例如：www.foo.co.uk & www.foo.org 等
我只希望**.co.uk** & **.org**退出它。
我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T13:32:43.483

Android[`Patterns.TOP_LEVEL_DOMAIN`](http://developer.android.com/reference/android/util/Patterns.html#TOP_LEVEL_DOMAIN)为这种情况提供了 Pattern。您可以像使用任何其他[`Pattern`](http://developer.android.com/reference/java/util/regex/Pattern.html).

从[`Pattern`](http://developer.android.com/reference/java/util/regex/Pattern.html)文档中：

```
// Direct use of Pattern:
Pattern p = Pattern.compile("Hello, (\\S+)");
Matcher m = p.matcher(inputString);
while (m.find()) { // Find each match in turn
    String name = m.group(1); // Access a submatch groupthis.
} 
```

您（显然）需要设置`p`以`Patterns.TOP_LEVEL_DOMAIN`检查 TLD 的位置：

```
Pattern p = Patterns.TOP_LEVEL_DOMAIN;
Matcher m = p.matcher(inputURLString); 
```

# php - Doctrine 2 和带有额外字段的多对多链接表

> ID：15616157
> 
> 赞同：91
> 
> 时间：2013-03-25T13:28:43.460
> 
> 标签：php, mysql, doctrine-orm

（抱歉我的问题不连贯：我在写这篇文章时试图回答一些问题，但在这里：）

我正在尝试在链接表中创建一个具有多对多关系的数据库模型，但每个链接也有一个值，在本例中是一个库存表。（这是我遇到的更多问题的基本示例，但我想在继续之前先用这个测试一下）。

![基本多商店、多产品仓储系统的数据库模型](../Images/8f6e8e4ce4b37e7826011f4d3a1bae4b.png)

对于这个简单的示例，我使用[exportmwb](https://github.com/johmue/mysql-workbench-schema-exporter)生成了两个实体商店和产品，两者都显示在下面。

但是，现在的问题是我无法弄清楚如何使用 Doctrine 访问 stock.amount 值（带符号的 int，因为它可能是负数）。此外，当我尝试使用学说的 orm:schema-tool:create 函数创建表时

![从 HeidiSQL 看到的数据库布局](../Images/7d965997aad6f687105f8a7b7c6a66f1.png)

这只产生了两个实体和三个表，一个作为没有值的链接表和两个数据表，因为多对多关系本身不是实体，所以我只能将 Product 和 Store 作为一个实体。

因此，从逻辑上讲，我尝试更改我的数据库模型以将库存作为一个单独的表，其中包含与商店和产品的关系。我还重写了字段名，以便能够将其排除为问题的根源：

![更改了数据库布局](../Images/294adfe0f5f31b26fb867a20814d057d.png)

然后我发现我仍然没有得到 Stock 实体......并且数据库本身没有“金额”字段。

我真的需要能够将这些商店和产品绑定在一个库存表中（除其他外）......所以仅仅在产品本身上添加库存不是一种选择。

```
root@hdev:/var/www/test/library# php doctrine.php orm:info
Found 2 mapped entities:
[OK]   Entity\Product
[OK]   Entity\Store 
```

当我创建数据库时，它仍然没有在 stock 表中给我正确的字段：

![从 HeidiSQL 看到的数据库布局](../Images/c4ee8a355da77467e7a07096a5cbbd21.png)

所以，在这里查找一些东西，我发现多对多连接不是实体，因此不能有值。因此，我尝试将其更改为与其他表有关系的单独表，但它仍然不起作用。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2013-03-26T06:24:24.657

与附加值的多对多关联不是多对多，而是确实是一个新实体，因为它现在有一个标识符（与连接实体的两个关系）和值。

这也是多对多关联如此罕见的原因：您倾向于在其中存储其他属性，例如`sorting`,`amount`等。

您可能需要的是以下内容（我将两种关系都设为双向，考虑将其中至少一种设为单向）：

产品：

```
namespace Entity;

use Doctrine\ORM\Mapping as ORM;

/** @ORM\Table(name="product") @ORM\Entity() */
class Product
{
    /** @ORM\Id() @ORM\Column(type="integer") */
    protected $id;

    /** ORM\Column(name="product_name", type="string", length=50, nullable=false) */
    protected $name;

    /** @ORM\OneToMany(targetEntity="Entity\Stock", mappedBy="product") */
    protected $stockProducts;
} 
```

店铺：

```
namespace Entity;

use Doctrine\ORM\Mapping as ORM;

/** @ORM\Table(name="store") @ORM\Entity() */
class Store
{
    /** @ORM\Id() @ORM\Column(type="integer") */
    protected $id;

    /** ORM\Column(name="store_name", type="string", length=50, nullable=false) */
    protected $name;

    /** @ORM\OneToMany(targetEntity="Entity\Stock", mappedBy="store") */
    protected $stockProducts;
} 
```

库存：

```
namespace Entity;

use Doctrine\ORM\Mapping as ORM;

/** @ORM\Table(name="stock") @ORM\Entity() */
class Stock
{
    /** ORM\Column(type="integer") */
    protected $amount;

    /** 
     * @ORM\Id()
     * @ORM\ManyToOne(targetEntity="Entity\Store", inversedBy="stockProducts") 
     * @ORM\JoinColumn(name="store_id", referencedColumnName="id", nullable=false) 
     */
    protected $store;

    /** 
     * @ORM\Id()
     * @ORM\ManyToOne(targetEntity="Entity\Product", inversedBy="stockProducts") 
     * @ORM\JoinColumn(name="product_id", referencedColumnName="id", nullable=false) 
     */
    protected $product;
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-26T01:15:13.770

Doctrine 可以很好地处理多对多关系。

您遇到的问题是您不需要简单的多对多关联，因为关联不能有“额外”数据。

您的中间（库存）表，因为它包含的不仅仅是 product_id 和 store_id，因此需要它自己的实体来为这些额外的数据建模。

所以你真的想要三类实体：

*   产品
*   库存水平
*   店铺

和两个协会：

*   产品 oneToMany 库存级别
*   存储 oneToMany StockLevel

# c# - 如何使用C#删除文件夹中的所有内容

> ID：15616162
> 
> 赞同：0
> 
> 时间：2013-03-25T13:29:05.533
> 
> 标签：c#, asp.net, file, io, directory

我需要一个函数来清除文件夹的全部内容。`ASP.Net`如果文件夹不为空，则无法删除文件夹。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T13:33:18.243

您可以使用[Directory.Delete](http://msdn.microsoft.com/it-it/library/fxeahc5f.aspx)，其中*第二个*参数指定：

```
public static void Delete(
    string path,
    bool recursive
) 
```

> recursive 类型：System.Boolean true 删除路径中的目录、子目录和文件；否则为假。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T13:31:44.123

您可以使用 DirectoryInfo、[Delete](http://msdn.microsoft.com/en-us/library/c66e2tts.aspx)方法和参数指定是否删除子目录和文件：

```
DirectoryInfo di = new DirectoryInfo("c:\\path");
if (di.Exists)
  di.Delete(true); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-25T13:32:15.027

我今天做了类似的事情。

尝试这个：

```
foreach (string folder in Directory.GetDirectories("C:\path"))
{
   Directory.Delete(folder, true);
} 
```

'true' 用于递归。这样所有子项（文件和文件夹）都将被删除。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T13:29:05.533

这是我想出的首先删除文件夹中文件的代码，然后是文件夹本身：

```
string[] folders = Directory.GetDirectories("C:\path");
    foreach (string folder in folders){
        string[] files = Directory.GetFiles(folder);
        foreach (string file in files){
            File.Delete(file);
        }
        Directory.Delete(folder);
    } 
```

# javascript - 如何使用 URL 从 CouchDB 请求信息？

> ID：15616173
> 
> 赞同：1
> 
> 时间：2013-03-25T13:29:41.430
> 
> 标签：javascript, html, url, couchdb

我们都见过 php+mysql 的事情——你写[http://example.com/thenewarticle](http://example.com/thenewarticle)并获得一个带有新文章、所有评论和天气信息的 html 页面。

javascript+CouchDB也可以做同样的事情吗？像[http://example.com/doc5会返回一个 html 页面，其中包含来自](http://example.com/doc5)[http://example.com/couch/](http://example.com/couch/)数据库中 doc5 文档的一些数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:39:14.567

Couch Db 使用可用于提供 html 页面的[couch 应用程序](http://couchapp.org/page/index)。但它不能替代使用 php 或任何其他语言构建的传统应用程序服务器。Couch 应用程序适用于简单的 html 页面，但对于复杂的操作，您会发现它缺乏。

# jquery - jquery ui 将函数名称从滑块更改为滑块1

> ID：15616174
> 
> 赞同：1
> 
> 时间：2013-03-25T13:29:43.393
> 
> 标签：jquery, jquery-ui, slider, uislider

我正在使用 jquery ui 范围滑块 [http://jqueryui.com/slider/#range](http://jqueryui.com/slider/#range)

```
 $(function() {
    $( "#slider-range" ).slider({
      range: true,
      min: 0,
      max: 1000,
      values: [ 75, 300 ],
      slide: function( event, ui ) {
        $( "#amount" ).val( "" + ui.values[ 0 ] + " - " + ui.values[ 1 ] );
      }
    });
    $( "#amount" ).val( "" + $( "#slider-range" ).slider( "values", 0 ) +
      " - " + $( "#slider-range" ).slider( "values", 1 ) );
  }); 
```

如果我在我的测试页面上使用这个代码，那么它工作正常

但是当我要在magento中使用它时出现错误，因为我也在使用另一个滑块现在我想更改名称，`jquery-ui.js`以便`slider1`我可以使用这个滑块

```
 $(function() {
    $( "#slider-range" ).slider1({
               // ui code
    });

  }); 
```

所以我必须做出改变

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-18T05:17:39.167

如果其他人有同样的问题，我必须在 jquery ui 之后和 jquery mobile 之前添加下一行

```
$.fn.uislider = $.fn.slider; 
```

代码示例将是：

```
<script type="text/javascript"  src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
<script>  
    // rename to avoid conflict with jquery mobile
    $.fn.uislider = $.fn.slider;
  </script>
<script src="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.js"></script> 
<script>
  $(function() {
    $( "#slider" ).uislider();
  });
  </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:55:38.203

您可以在包含 jQuery UI*之后*和包含引入冲突方法的模块*之前*在 jQuery 对象的原型中创建一个新属性：`slider()`

```
$.fn.slider1 = $.fn.slider; 
```

但是请注意，这只会重命名附加到原型的桥接方法。该小部件仍将在`$.ui.slider`后台命名。

# c++ - 在 C 和 C++ 中为 NULL/false 超过 0x0 / 0b0 / '\0' / 0

> ID：15616177
> 
> 赞同：4
> 
> 时间：2013-03-25T13:29:54.577
> 
> 标签：c++, c, null

如问题中所述，我一直在使用 NULL 和 false（在 C++ 中）与 0 或 0x0 等互换。我很想知道它们是否具有除 0 的同义词之外的任何特殊含义。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T13:32:19.120

对于某些平台`NULL`不是`0x0`

* * *

从[C 中的 NULL 是否需要/定义为零？](https://stackoverflow.com/questions/8288482/is-null-in-c-required-defined-to-be-zero)：

`NULL`保证为零，也许被强制转换为`(void *)`¹。

C99，§6.3.2.3，¶3

> 具有 value 的整数常量表达式`0`，或转换为 type 的表达式 `void *`称为空指针常量。(55) 如果将空指针常量转换为指针类型，则生成的指针（称为空指针）保证比较不等于指向任何对象或函数的指针。

注释 55 说：

> 55) 宏 NULL 在`<stddef.h>`（和其他头文件）中定义为空指针常量。

请注意，由于空指针规则的制定方式，您用于分配/比较空指针的值保证为零，但实际存储在指针内的位模式可以是任何其他东西（但 AFAIK 只有少数非常深奥的平台利用了这个事实，无论如何这应该不是问题，因为要“看到”底层位模式，无论如何你都应该进入[UB](http://en.wikipedia.org/wiki/Undefined_behavior) -land ）。

* * *

因此，就标准而言，这两种形式是等价的（`!ptr`由于`ptr==0`§6.5.3.3 ¶5 等价于，并且`ptr==0`等价于`ptr==NULL`）；`if(!ptr)`也很地道。

话虽如此，我通常明确地写`if(ptr==NULL)`而不是`if(!ptr)`更清楚地表明我正在检查指针是否为空，而不是一些布尔值。

* * *

1.  请注意，在 C++ 中`void *`，由于更严格的隐式转换规则会使这种类型的使用`NULL`变得繁琐（您每次都必须将其显式转换为比较指针的类型），因此不能存在转换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T13:32:30.833

好吧，NULL 可能不是零，它通常是。它取决于您的平台——这里有一些非零 NULL 机器的讨厌的[例子。](http://c-faq.com/null/machexamp.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T13:32:43.253

一般来说，`C++`你不应该使用`NULL`. In `C`,`NULL`是 的宏`(void*)0`，而 in`C++`你应该使用`0`而不是`NULL`. 但是你不能使用`false`代替`0`指针！除此之外，它们实际上是相同的，有时会引起混淆。
这就是为什么 in `C++11`a`nullptr`被定义为用于指针。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T13:34:22.147

NULL 在指针中具有广泛的意义。最有可能声明为 NULL 的指针是不能被引用但可以被分配的东西。而 0 或 0x0 可以是可以引用和分配的指针的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T13:35:34.013

来自 linux 内核[stddef.h](http://lxr.free-electrons.com/source/include/linux/stddef.h#L7)

```
#define NULL ((void *)0)

enum {
        false   = 0,
        true    = 1
}; 
```

所以不完全是`false`

即使[这篇](http://www.eskimo.com/~scs/cclass/notes/sx10d.html)文章声称它是`NULL`，`0x0`并且`false`几乎相同。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T13:39:59.493

在 C 和历史 C++ 中，`NULL`必须是一个零值整数常量，通常是`0`. 我认为 C 可以包含显式转换为`void*`，但 C++ 不能，因为该语言不允许从`void*`其他指针类型进行隐式转换。

在现代 C++ 中，它可以是任何一个`nullptr`。

在任何一种情况下，任何零值整数常量（包括 和 等奇数`'\0'`）`false`都可以转换为空指针值。

# dynamics-crm-2011 - 文本字段属性/方法动态 crm 2011

> ID：15616185
> 
> 赞同：2
> 
> 时间：2013-03-25T13:30:20.067
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm, microsoft-dynamics, dynamics-crm-online

我正在寻找一种方法或方式来检查 crm 表单中的文本字段是否为“null”

我有一个标签，里面有部分和文本字段；

此外，我正在使用该功能来隐藏/显示选项卡。

```
function setVisibleTabSection(tabname, TextFieldName, show) {
  var tab = Xrm.Page.ui.tabs.get(tabname);
  if (tab != null) {
    if (TextFieldName == null)
       tab.setVisible(show);
    else {
      var section =  Xrm.Page.data.entity.attributes.get(TextFieldName).getValue();
      if (section != null) {
        show == true; 
        tab.setVisible(show);
      }
    }
  }
} 
```

但是，它不起作用。文本框内没有任何内容，并且选项卡仍然展开。

顺便说一句，我给函数的参数：“tab_8”，“new_conf_report”，false 其中第二个是文本字段的名称

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T23:49:17.840

尝试

```
if (section != null && section !="")... 
```

您可能会发现最初为空白的字段为空，而您已从中删除内容但尚未保存表单的字段只是一个空字符串。当然值得一试。

```
show==true 
```

正如其他人所指出的那样是不正确的（需要显示=真），但在同一个 IF 语句中写的只是多余的，只需将下一行替换为：

```
tab.setVisible(true); 
```

如果文本字段不为空，您可能希望“显示”成为默认选项卡状态，在这种情况下，只需将此行移到 IF 之外而不是更改它（如下所示）

看起来使用第三个“显示”参数的构造是允许您使用该功能将选项卡状态设置为显示或不显示的特定状态，而根本不需要查找文本字段值。您需要将参数传递为例如 tabname,,true - 您可能会考虑交换 TextFieldName 和 Show 参数，这样更容易删除第三个而不是记住双逗号。

在我们修复内容时​​，让我们用更有意义的名称替换变量“section”：

```
function setVisibleTabSection(tabname, show, TextFieldName) //usage: show is state Tab will have if no TextFieldName is specified, or if text field is empty
  {
      var tab = Xrm.Page.ui.tabs.get(tabname);
      if (tab != null) 
       {
        if (show==null){show=true;}
        if (TextFieldName == null)
          {
          tab.setVisible(show);
          }
        else
          {
          var strFieldValue = Xrm.Page.data.entity.attributes.get(TextFieldName).getValue();
          if (strFieldValue != null && strFieldValue !="") 
              {show=true;}
          tab.setVisible(show);
          }
       }
   } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T14:09:27.133

我看不出你的 Javascript 有什么问题（除了 Guido 指出的，它基本上只会在你传入 true 进行显示时将选项卡设置为可见）。通过按 F12 使用 IE 中的调试工具，并在函数顶部设置断点以查看逻辑失败的位置。

如果您以前从未调试过 javascript，请参阅[http://social.technet.microsoft.com/wiki/contents/articles/3256.how-to-debug-jscript-in-microsoft-dynamics-crm-2011.aspx](http://social.technet.microsoft.com/wiki/contents/articles/3256.how-to-debug-jscript-in-microsoft-dynamics-crm-2011.aspx)

或者

[如何为 Dynamics CRM 调试 jScript？](https://stackoverflow.com/questions/7329764/how-to-debug-jscript-for-dynamics-crm)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T14:22:24.447

我认为代码中有一个错字：

> 显示 == 真；

*实际上，如果TextFieldName*不为空，代码（假设“=”而不是“==”）将始终显示选项卡，删除该行将根据*显示*参数值显示/隐藏选项卡

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T19:29:44.403

当我运行它时它似乎可以工作，但我不确定你期望它做什么，所以它可能无法按照你想要的方式工作。:)

```
function setVisibleTabSection(tabName, textFieldName, show) {
  var tab = Xrm.Page.ui.tabs.get(tabName);
  if(!tab) return;

  if (!TextFieldName)
    tab.setVisible(show);
  else {
    var section = Xrm.Page.data.entity.attributes.get(textFieldName).getValue();
    if (section)
      tab.setVisible(true);
  }
} 
```

# c# - 将一些数据添加到列表视图或数据网格并将这些数据保存在数据库中？

> ID：15616188
> 
> 赞同：1
> 
> 时间：2013-03-25T13:30:28.397
> 
> 标签：c#, wpf, entity-framework-4

当我单击添加按钮时，我想将`combobox`项目和测试框文本添加到下面`datagrid`或`ListView`，然后最后我单击`save button`我想要`save them in my database`表格？

如何添加值并保存它们？示例界面图像如下所示： ![在此处输入图像描述](../Images/80541d4359d195a977a37e4f992ba719.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:36:34.003

这是一个复杂的问题，我想没有一个正确的答案。我建议你[从这个实验室开始](http://msdn.microsoft.com/en-us/evalcenter/VS2010TrainingCourse_WPF4DataDrivenMasterDetailBusinessForm)。您还可以在[那里](http://msdn.microsoft.com/en-us/data/ee712907)找到关于数据访问的不错的快速入门说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T14:49:50.347

*当我单击添加按钮时，我想将组合框项和测试框文本添加到下面的数据网格或列表视图中，*

您可以为此使用此示例代码：

C＃

```
public ObservableCollection<Model> ModelListe { get; set; }

    public MainWindow()
    {
        InitializeComponent();

        comboBox1.Items.Add("Test1");
        comboBox1.Items.Add("Test2");
        comboBox1.Items.Add("Test3");
        comboBox1.Items.Add("Test4");
        comboBox1.Items.Add("Test5");

        ModelListe = new ObservableCollection<Model>();
        DataContext = this;
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        if (textBox1.Text != "")
        {
            if (comboBox1.SelectedItem != null)
            {
                Model model = new Model();
                model.Component = comboBox1.SelectedItem.ToString();
                model.Question = textBox1.Text;

                ModelListe.Add(model);
            }
        }
    }

public class Model
{
    public string Component { get; set; }
    public string Question { get; set; }
} 
```

XAML

```
 <ComboBox Height="29" HorizontalAlignment="Left" Margin="12,14,0,0" Name="comboBox1" VerticalAlignment="Top" Width="199" />
    <TextBox Height="29" HorizontalAlignment="Left" Margin="12,53,0,0" Name="textBox1" VerticalAlignment="Top" Width="199" />
    <DataGrid ItemsSource="{Binding ModelListe}" AutoGenerateColumns="False" Height="97" HorizontalAlignment="Left" Margin="12,92,0,0" Name="dataGrid1" VerticalAlignment="Top" Width="199" >
        <DataGrid.Columns>
            <DataGridTextColumn Binding="{Binding Component}" CanUserReorder="False" Header="Component" Width="100" />
            <DataGridTextColumn Binding="{Binding Question}" CanUserReorder="False" Header="Question" Width="100" />
        </DataGrid.Columns>
    </DataGrid>
    <Button Content="Add" Height="29" HorizontalAlignment="Left" Margin="214,53,0,0" Name="button1" VerticalAlignment="Top" Width="41" Click="button1_Click" /> 
```

我希望，我可以帮助你。

# python - 为什么 `setup.py install` 不更新脚本文件？

> ID：15616189
> 
> 赞同：7
> 
> 时间：2013-03-25T13:30:31.170
> 
> 标签：python, python-3.x, pip, setuptools, setup.py

在`setup.py`文件中，我这样写：

```
from distutils.core import setup
setup(
    # skip a lot of information here..
    scripts = ["chilin2/ChiLin2.py"],
) 
```

我第一次成功设置了我的包。过了一会儿，我`line 209`将脚本更新为：

```
$ sed -n 209p chilin2/ChiLin2.py
        macs2_on_merged.param["control_opt"] = "-c " + macs2_on_merged.input["control"] 
```

然后`setup.py`再次运行

```
$ sudo python3 setup.py install
running install
running build
running build_py
running build_scripts
running install_lib
running install_scripts
changing mode of /usr/local/bin/ChiLin2.py to 755
running install_egg_info
Removing /usr/local/lib/python3.2/site-packages/chilin2-0.1-py3.2.egg-info
Writing /usr/local/lib/python3.2/site-packages/chilin2-0.1-py3.2.egg-info 
```

但是，我发现脚本文件没有更改..

```
$ sed -n 209p /usr/local/bin/ChiLin2.py
        macs2_on_merged["control_opt"] = "-c " + macs2_on_merged.input["control"] 
```

我试了`setup.py clean`又试`setup.py install`，但这并没有解决问题。有人对此有想法吗？

（我发现`Chilin2.py`包里的时间戳比系统目录的时间戳要老，`setup.py install`是不是不更新的原因？有什么办法解决吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:01:58.380

尝试卸载此软件包，然后重新安装。

pip 可以卸载一个包：

```
pip uninstall *packagename* 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-05T07:20:31.350

> 我发现包中的 Chilin2.py 的时间戳比系统目录中的时间戳要早。

这很奇怪。您可以通过以下步骤重现该错误：

1.  创建脚本。
2.  setup.py install（使用 --install 或 --user 选项来避免 sudo）
3.  编辑脚本。
4.  setup.py 安装
5.  ?

如果你这样做了（即你在第一次安装后编辑了脚本），我不明白最新脚本的修改时间怎么会比安装的脚本更早。

> 这是 setup.py install 不更新的原因吗？

绝对：distutils 比较文件修改时间以查看是否需要重新构建（对于脚本，构建阶段包括将文件复制到临时构建目录并调整 shebangs）。

> 有没有办法解决这个问题？

```
$ touch chilin2/ChiLin2.py 
```

# html - 如何使用 CSS 更改图标字体的颜色

> ID：15616193
> 
> 赞同：0
> 
> 时间：2013-03-25T13:30:39.647
> 
> 标签：html, css, wordpress

我正在使用来自 ThemeForest 的主题，该主题正在使用图标字体。在 css 文件中，我看到一个 @font-face 来导入字体和所有图标的列表，如下所示：

```
.socials li.social-lastfm a:before,
.socials li.social-soundcloud a:before {
   font-family: 'icomoon-essential';
   speak: none;
   font-style: normal;
   font-weight: normal;
   line-height: 1;
   color: green;
   -webkit-font-smoothing: antialiased;
} 
```

在此示例中，还有几个图标，但是在我在主题上拥有的所有图标中，只有一个变成了绿色。我在这个 css 中添加了新规则，包括 .socials li.social-twitter a:before 等。

即使添加了规则，图标的颜色也不会改变。当我使用 WordPress 时，我进入后端以确定是否可以通过某种插件更改图标。对于我的死亡，我找不到解决方案。

如果您知道我可以解决问题的方法，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:25:02.523

如果您也可以在这里发布您的 html 代码会更好，这样我们就可以找出问题所在。假设html代码如下：

```
<ul class='socials'>
    <li class='social-lastfm'><a href='#'>Icon A</a></li>
    <li class='social-soundcloud'><a href='#'>Icon B</a></li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-17T13:00:52.917

尝试使用 !important 重写以前的 css。

# c++ - 如何跳过将头文件包含到特定的 C/CPP 文件中

> ID：15616198
> 
> 赞同：1
> 
> 时间：2013-03-25T13:30:49.657
> 
> 标签：c++, c, visual-studio-2010

我想跳过在我新开发的代码中包含头文件。我正在 Visual Studio 中从事两个项目（或解决方案）。两者都相互依赖。认为，

`Project_1.sln`包含一个头文件作为`MyHeader.h`. `MyHeader.h`包含一个`enum`，

`MyHeader.h file`

```
 typedef enum{
    hello, hi, bye
    }MyEnum; 
```

In`Project_2.sln`包含一个不同名称的头文件，如`Header2.h`. `Header2.h`还包含`same enum`as `MyHeader.h`from `Project_1.sln`。

`Header2.h file`

```
 typedef enum{
    hello, hi, bye
    }MyEnum; 
```

因此，我尝试使用 /FORCE:MULTIPLE，但它不起作用。我也无法更改枚举名称，因为它们在两个项目的许多地方都被使用。

当我在我的`MyTest.c`文件中使用时，我需要同时使用`header files`.

`MyTest.c File`

```
#include "Header2.h"
#include "Another.h" 
```

这里`Another.h`文件内部包含`MyHeader.h`文件。除了将文件移动`enum`到其他文件之外，还有其他解决方案吗？请帮助我，我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T13:36:18.897

您可以将该`enum`部分的条件编译用作：

```
#ifndef MY_ENUM
#define MY_ENUM
   typedef enum{
   hello, hi, bye
   }MyEnum;
#endif 
```

在这两个文件中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T13:33:52.520

在 Header2.h 中：

```
#ifndef HEADER2_H
#define HEADER2_H
...current contents of Header2.h
#endif // HEADER2_H 
```

在另一个.h 中：

```
#ifndef ANOTHER_H
#define ANOTHER_H
...current contents of Another.h
#endif // ANOTHER_H 
```

但是有这种 2-way 依赖通常是设计混乱的标志，你应该尝试解决它，可能通过添加第三个模块。

* * *

重新阅读问题后的补充：如果这些实际上是单独的枚举，恰好具有相同的名称和内容，那么您应该将两者放入[不同的命名空间](http://www.cplusplus.com/doc/tutorial/namespaces/)。如果它们是相同的枚举，则将其定义在一个头文件中，您将其包含在两个`Header2.h`和`Another.h`中，并且还受["include guard" 保护](http://en.wikipedia.org/wiki/Include_guard)，如上所示。

# google-app-engine - 为什么基于地理搜索/位置的搜索返回零结果？

> ID：15616200
> 
> 赞同：2
> 
> 时间：2013-03-25T13:31:00.977
> 
> 标签：google-app-engine, geolocation, full-text-search, location, geospatial

我正在尝试使用应用引擎的搜索 API 来搜索位置： [https ://developers.google.com/appengine/docs/python/search/overview#Performing_Location-Based_Searches](https://developers.google.com/appengine/docs/python/search/overview#Performing_Location-Based_Searches)

问题是无论我做什么，我都会得到零结果。我将搜索 lat/lng 设置为文档 GeoPoint 属性上的确切点，但它仍然返回零。

我知道常规搜索有效，因为如果我将查询更改为常规全文搜索，它就可以工作。

这是我的数据示例（这实际上来自此处的示例应用程序：[http](http://www.youtube.com/watch?v=cE6gb5pqr1k) ://www.youtube.com/watch?v=cE6gb5pqr1k ）

```
Full Text Search > stores1
Document Id: sanjose
Field Name  Field Value
store_address   123 Main St.
store_location  search.GeoPoint(latitude=37.37, longitude=-121.92)
store_name  San Jose 
```

然后我的查询：

```
index = search.Index('stores1')
loc = (37.37, -121.92)
query = "distance(store_location, geopoint(37.37, -121.92)) < 4500"
loc_expr = "distance(store_location, geopoint(37.37, -121.92))"
sortexpr = search.SortExpression(
   expression=loc_expr,
   direction=search.SortExpression.ASCENDING, default_value=4501)
search_query = search.Query(
   query_string=query,
   options=search.QueryOptions(
     sort_options=search.SortOptions(expressions=[sortexpr])))

results = index.search(search_query)
print results 
```

和回报：

```
search.SearchResults(number_found=0L) 
```

我错过了什么或做错了什么？这应该至少返回一个结果，对吧？

** 更新 **

在做了一些窥探/搜索/测试之后，我认为这可能是关于谷歌应用引擎开发服务器的错误。

如果我在生产环境中对相同的数据运行位置搜索，我会得到预期的结果。当我比较并在开发环境中对数据运行完全相同的查询时，我得到了意外的 0 结果。

如果有人对此有任何见解，请提供建议。否则，对于那些遇到同样问题的人，我在应用引擎的问题跟踪器上创建了一个 [问题](https://code.google.com/p/googleappengine/issues/detail?id=9055)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-26T03:03:06.487

您可能已经知道这一点，但万一有人看到这篇文章，AppEngine 的搜索 API 的地理搜索功能在开发服务器上返回零结果。来自[https://developers.google.com/appengine/training/fts_intro/lesson2](https://developers.google.com/appengine/training/fts_intro/lesson2)：

*“...开发 Web 服务器（本地运行）不完全支持某些搜索查询，因此您需要使用已部署的应用程序运行它们。”*

这是另一个有用的链接： [https ://developers.google.com/appengine/docs/python/search/devserver](https://developers.google.com/appengine/docs/python/search/devserver)

# assembly - 从 x64 环境中的 64 位寄存器保存 32 位

> ID：15616209
> 
> 赞同：1
> 
> 时间：2013-03-25T13:31:23.777
> 
> 标签：assembly, x86, 64-bit, nasm

我又回到了我之前的话题，但只是有一些想法。

我想在 x64 的汇编程序中的矩阵中存储一个 32 位整数。假设我有：

```
int** matrix = ...;
matrix[x][y] = 0; 
```

通常我会简单地计算一个我想保存的位置：

```
mov rax, [rdi + rsi * 8]
mov [rax + rdx * 4], rcx 
```

我的问题是：如何对齐 rcx 以仅保存 4 个字节？或者，也许我只保存了 4 个字节，并且没有机会覆盖要覆盖的整数旁边的其他整数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T13:40:44.640

使用`ecx`而不是`rcx`.

就这样。

# iphone - 捏手势不适用于 imageVIew

> ID：15616210
> 
> 赞同：0
> 
> 时间：2013-03-25T13:31:26.127
> 
> 标签：iphone, objective-c, xcode, cocoa-touch

我正在尝试放大和缩小 imageView

这是代码

```
- (void)pinch:(UIPinchGestureRecognizer *)gesture
{
   if (handSelected == YES)
   {
    if (gesture.state == UIGestureRecognizerStateEnded || gesture.state == UIGestureRecognizerStateChanged)
    {
        NSLog(@"gesture.scale = %f", gesture.scale);

        CGFloat currentScale = self.imgHand.frame.size.width / self.imgHand.bounds.size.width;
        CGFloat newScale = currentScale * gesture.scale;

        if (newScale < 1.0) {
            newScale = 1.0;
        }
        if (newScale > 4.0) {
            newScale = 4.0;
        }

        CGAffineTransform transform = CGAffineTransformMakeScale(newScale, newScale);
        self.imgHand.transform = transform;
        gesture.scale = 1;
    }
   }
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self adjustRingPressed:self];
    self.view.multipleTouchEnabled = YES;
    self.imgHand.multipleTouchEnabled = YES;
    UIPinchGestureRecognizer *gst = [[UIPinchGestureRecognizer alloc] initWithTarget:self.imgHand action:@selector(pinch:)];
    [gst setDelegate:self];
    [self.imgHand addGestureRecognizer:gst];

} 
```

看来我的捏代码永远不会运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T14:00:08.807

尝试添加：

```
self.imgHand.userInteractionEnabled = TRUE; 
```

默认情况下 UIImageView 有 userInteractionEnabled = FALSE

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:34:59.040

使其成为`gesture`以下模板代码的功能：

```
- (IBAction)handlePinch:(UIPinchGestureRecognizer *)recognizer
{
    recognizer.view.transform = CGAffineTransformScale(recognizer.view.transform, recognizer.scale, recognizer.scale);
    recognizer.scale = 1;
} 
```

# c - 内核级内存处理编码

> ID：15616211
> 
> 赞同：1
> 
> 时间：2013-03-25T13:31:34.420
> 
> 标签：c, linux-kernel

我的要求是将数据存储在内核中..数据是来自网络的传入数据包..它的大小可能不同，并且必须存储例如 250 毫秒的持续时间..并且应该有 5 个这样的候选者需要内核级内存管理。 .因为数据包来得非常快..我的方法是为每个这样的候选者分配一个大内存，比如 2mb 内存..bez kmalloc 和 kfree 有时间开销..对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:55:42.143

[`sk_buff`s](https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/include/linux/skbuff.h)是与网络相关的通用答案，或者正如[Mike](https://stackoverflow.com/users/1348709/mike)指出的那样，[内核内存缓存](https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/include/linux/slab.h)是对您问题的更通用的答案。但是，我相信您可能已经[在问题之前提出了解决方案](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)。

LTE/HSDPA/GSM 的瓶颈是驱动程序以及如何将数据从设备获取到 CPU。这取决于硬件的连接方式。您在使用 SPI、UART、SDHC、USB、PCI 吗？

此外，至少对于 HSDPA，您需要一个`ppp`连接。LTE不一样吗？在这种情况下，以太网不是要使用的模型。通常，您需要模拟高速 tty。此外，[n_gsm](https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/drivers/tty/n_gsm.c)提供了一个网络接口；我对这个界面并不完全熟悉，但我怀疑这是为了支持`LTE`. 这没有很好的[记录](https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/Documentation/serial/n_gsm.txt)。此外，如果这是您使用的硬件，还有[Option USB 串行驱动程序。](http://lxr.free-electrons.com/source/drivers/usb/serial/option.c)用于处理 LTE[的示例补丁；](http://lists.ofono.org/pipermail/ofono/2011-February/008837.html)`n_gsm`我相信这个补丁被重新设计成当前的`n_gsm`网络支持。

您需要告诉我们更多关于您的硬件的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:11:56.647

正如评论中已经指出的那样：

`struct sk_buff`, 它是为那个确切的特定目的而创建的

参见例如[http://www.linuxfoundation.org/collaborate/workgroups/networking/skbuff](http://www.linuxfoundation.org/collaborate/workgroups/networking/skbuff)

# virtualization - 无法在控制面板中启用 Hyper-V 平台

> ID：15616217
> 
> 赞同：2
> 
> 时间：2013-03-25T13:31:50.203
> 
> 标签：virtualization, hyper-v

我安装了 Windows 8 pro，我想使用 Visual Studio 进行 Windows Phone 开发。但我不能这样做。

[您可以在http://products.amd.com/en-us/DesktopCPUDetail.aspx?id=407](http://products.amd.com/en-us/DesktopCPUDetail.aspx?id=407)找到我的处理器详细信息

我已经在主板上启用了虚拟化技术。但是我做不到。请帮助我。

笔记：

我可以启用“Hyper - V”但不能启用“Hyper V 平台”，

我的问题是，我是否需要为 Windows 8 手机模拟器启用“Hyper V 平台”选项。

请给我建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:42:57.423

我猜你的 CPU 不支持 SLAT。

看看：http: [//blogs.msdn.com/b/olivnie/archive/2013/01/18/hyper-v-on-client-windows-8-pro.aspx](http://blogs.msdn.com/b/olivnie/archive/2013/01/18/hyper-v-on-client-windows-8-pro.aspx)

# ruby - 意外的哈希行为

> ID：15616218
> 
> 赞同：3
> 
> 时间：2013-03-25T13:31:51.533
> 
> 标签：ruby

我是新手。请帮帮我。我写了Puppet函数一段代码：

```
 n_if={}
     over_if = arguments[1]

    over_if.each do |kk,vv|
      weth={}
        puts kk,vv,weth
        weth = arguments[0]
        weth['in_vlan'] = vv['in_vlan']
        weth['options']['MTU'] = vv['mtu']
    n_if['eth'+ kk.to_s]=weth
end 
```

从 2 个文件中读取数据，并分别传入 arguments[0] 和 arguments[1]：

```
# template of ethernet interfaces
eth_: 
  method: "static"
  family: "inet"
  ip: ""
  netmask: "255.255.0.0"
  onboot:  true
  options: 
    MTU: ""
  in_vlan: ""

# values for include into ethernet interfaces
eth_values:
 0:
  mtu: 1500
  in_vlan: 15
 1:
  mtu: 9000
  in_vlan: 125 
```

我希望得到带有键 'eth0' 和 'eth1' 的哈希，如下所示：

```
eth1methodstaticfamilyinetin_vlan125ipnetmask255.255.0.0onboottrueoptionsMTU9000eth0methodstaticfamilyinetin_vlan15ipnetmask255.255.0.0onboottrueoptionsMTU1500 
```

但我得到：

```
eth1methodstaticfamilyinetin_vlan125ipnetmask255.255.0.0onboottrueoptionsMTU9000eth0methodstaticfamilyinetin_vlan125ipnetmask255.255.0.0onboottrueoptionsMTU9000 
```

我的错误是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:52:36.280

首先，一些评论：

1.  您的代码没有像大多数其他人那样缩进，这使得其他人很难帮助您。它应该看起来像这样：

    ```
    n_if={}
    over_if = arguments[1]

    over_if.each do |kk,vv|
      weth={}
      puts kk,vv,weth
      weth = arguments[0]
      weth['in_vlan'] = vv['in_vlan']
      weth['options']['MTU'] = vv['mtu']
      n_if['eth'+ kk.to_s]=weth
    end 
    ```

2.  也许你的变量名对你有意义，但对我来说没有意义。什么是`n_if`, `weth`,`over_if`和`kk`?`vv`

3.  您将其分配`weth`为 内部的哈希`each`，然后将其分配为其他内容。你真正想做什么？

4.  你这么说`arguments[0]`并且`arguments[1]`是从文件中读取的数据。这些是如何读入的？这些是 YAML 文件吗？如果您包含代码以实际重现您的问题，那将很有帮助。把它减少到必需品。

5.  在 Ruby 中，不连接字符串，而是使用字符串插值通常更惯用且性能更高：

    ```
    n_if["eth#{kk}"] = weth 
    ```

现在，一些答案：

我的猜测是您的设置包含这样的数据：

```
arguments = {
  "eth_"=>{
    "method"=>"static",
    "family"=>"inet",
    "ip"=>"",
    "netmask"=>"255.255.0.0",
    "onboot"=>true,
    "options"=>{"MTU"=>""},
    "in_vlan"=>""
  },
  "eth_values"=>{
    0=>{"mtu"=>1500, "in_vlan"=>15},
    1=>{"mtu"=>9000, "in_vlan"=>125}
  }
}

arguments[0] = arguments['eth_']
arguments[1] = arguments['eth_values'] 
```

我相信（基于对你拥有什么和你可能想要什么的许多猜测）你的问题是这种组合：

```
weth={}
weth=arguments[0] 
```

我认为您的意图是说*"是一种哈希类型的对象；现在用"`weth`的值填充它`arguments[0]`*。这些行实际上说的是：

*   设置`weth`为空哈希。
*   没关系，扔掉那个空哈希并设置`weth`为*与*`arguments[0]`.

因此，每次通过循环时，您都*使用*`weth`. 相反，我认为您想[复制](http://www.ruby-doc.org/core-2.0/Object.html#method-i-dup). `weth`以下修改后的代码是否为您提供了所需的内容？

```
n_if={}
over_if = arguments[1]

over_if.each do |kk,vv|
  weth = arguments[0].dup
  weth['in_vlan'] = vv['in_vlan']
  weth['options']['MTU'] = vv['mtu']
  n_if["eth#{kk}"]=weth
end

require 'pp' # for nice wrapping inspection
pp n_if
#=> {"eth0"=>
#=>   {"method"=>"static",
#=>    "family"=>"inet",
#=>    "ip"=>"",
#=>    "netmask"=>"255.255.0.0",
#=>    "onboot"=>true,
#=>    "options"=>{"MTU"=>9000},
#=>    "in_vlan"=>15},
#=>  "eth1"=>
#=>   {"method"=>"static",
#=>    "family"=>"inet",
#=>    "ip"=>"",
#=>    "netmask"=>"255.255.0.0",
#=>    "onboot"=>true,
#=>    "options"=>{"MTU"=>9000},
#=>    "in_vlan"=>125}} 
```

如果没有，请编辑您的问题，详细说明您实际拥有的内容（提示：`p arguments`并向我们展示结果）以及您真正想要的结果。

* * *

**编辑**：为了好玩，这里是一个功能转换。它留给读者作为练习，以了解它的工作原理并提高他们的函数式编程技能。请注意，我已经修改`eth_values`以匹配模板的层次结构，以便可以应用简单的合并。我保留了`"MTU"=>""`and`"in_vlan"=>""`条目，但请注意它们不是代码工作所必需的，您可以删除两者（以及结果`"options"=>{}`）并获得相同的结果。

```
args = {
  "eth_"=>{
    "method"=>"static",
    "family"=>"inet",
    "ip"=>"",
    "netmask"=>"255.255.0.0",
    "onboot"=>true,
    "options"=>{"MTU"=>""},
    "in_vlan"=>""
  },
  "eth_values"=>{
    0=>{"options"=>{"MTU"=>1500}, "in_vlan"=>15},
    1=>{"options"=>{"MTU"=>9000}, "in_vlan"=>125}
  }
}

n_if = Hash[
  args['eth_values'].map do |num,values|
    [ "eth#{num}",
      args['eth_'].merge(values) do |k,v1,v2|
      if v1.is_a?(Hash) and v2.is_a?(Hash) then
        v1.merge(v2)
      else
        v2
      end
    end ]
  end
]

pp n_if #=> Same result as in the previous code. 
```

# c# - 安全 LDAP 身份验证问题

> ID：15616221
> 
> 赞同：3
> 
> 时间：2013-03-25T13:32:06.443
> 
> 标签：c#, authentication, iis-7, ldap, iis-6

我在 Server1 和 Server2 上的 ASP.NET 4 (4.0.30319) 应用程序池中部署的 webform 的代码中使用以下 C# 代码。

```
PrincipalContext pc = new PrincipalContext(ContextType.Domain, "testnet.testad.org:636", "dc=testnet,dc=testad,dc=org");
bool validated = pc.ValidateCredentials(username, password, ContextOptions.Negotiate); 
```

Server1 正在运行：windows server 2003 SP2
IIS 6.0
ASP.NET 版本 4.0.30319

根据选项，验证需要 30-60 秒。
（注意：使用常规 ldap 它立即进行身份验证，没有延迟）

服务器 2 正在运行：windows server 2008 SP2
IIS 7.0
ASP.NET 版本 4.0.30319

运行与 Server1 完全相同的代码，Server2 几乎可以立即进行身份验证。
（我还尝试了针对另一台 IIS 7.0 服务器的代码，结果相同）

有没有人遇到过这个问题？
是否有在 IIS 6.0 服务器与 IIS 7.0 服务器上进行身份验证的替代方法？
有什么我需要配置、添加、删除等的吗？

感谢您对此的任何帮助。

..................................................... ..................................................... ………………………………………………………………………………………………………………………………………………

[更新]

我在发出 ldaps 身份验证请求时打开了wireshark。
我创建了一个包含所有超过 636 的请求的文件
。可以在这里查看：[Server1 636 traffic](http://www.fullstackbusinessdesign.com/forums/ldaps/Server1-636-log.txt)

最大的差距出现在：

1949 号在 1.115583 秒 - 06788 号在 14.501754 秒
和
6803 号在 14.64297 秒 - 11742 号在 27.921379 秒

该端口上的所有其他流量都在同一秒内发生。

注意：Server2 上的流量大致相同，但都发生在 2-3 秒之间。
可以看这里：[Server2 636 流量](http://www.fullstackbusinessdesign.com/forums/ldaps/Server2-636-log.txt)

我运行 netstat -ano” 命令并在登录时发现以下 ldaps 连接：

原始本地地址 外部地址状态 PID
TCP 10.1.72.74:1761 10.1.72.54:636 ESTABLISHED 3688
TCP 10.1.72.74:1800 10.1.72.54:636 ESTABLISHED 3688
TCP 10.1.72.74:1825 10.1.72.54:636 ESTABLISHED 3668

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:19:47.903

看看我在[ServerFault](https://serverfault.com/a/495650/116047)上的回答...

该服务可能无法访问：

> C:\Documents and Settings\All Users\Application Data\Microsoft\Crypto\RSA\MachineKeys

您的提及：

> 日期：2013 年 3 月 25 日时间：上午 10:11:06 来源：Schannel “尝试访问 SSL 客户端凭据私钥时发生致命错误。

使它成为可能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T19:17:02.070

[`PrincipalContext`](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.principalcontext.aspx)的[`ValidateCredentials`](http://msdn.microsoft.com/en-us/library/bb300969.aspx)方法基本上是 LDAP 绑定操作的包装器。为此要阅读的两篇关键文章是[IADsOpenDSObject::OpenDSObject](http://msdn.microsoft.com/en-us/library/windows/desktop/aa706065(v=vs.85).aspx)和[LDAP ADsPath](http://msdn.microsoft.com/en-us/library/windows/desktop/aa746384(v=vs.85).aspx)。

您正在使用 SSL，因此您需要指定是否希望它尽可能高效。`ContextOptions`关于该方法参数的文档`ValidateCredentials`实际上听起来不支持这一点：

> 一个或多个 ContextOptions 枚举值的组合用于绑定到服务器的选项。此参数只能指定带或不带 SSL 的简单绑定，或协商绑定。

假设我误解了文档并且该`ValidateCredentials`方法确实支持指定`Negotiate | SecureSocketLayer`，您需要查看如何发送用户名。在 OpenDSObject 文章中，它给出了关于用户名格式的建议：

> 您可以将 lpszUserName 作为以下字符串之一传入：
> 
> 1.  用户帐户的名称，例如“jeffsmith”。要单独使用用户名，您必须仅在 lnReserved 参数中设置 ADS_SECURE_AUTHENTICATION 标志。
>     
>     
> 2.  来自以前版本的 Windows NT 的用户路径，例如“Fabrikam\jeffsmith”。
>     
>     
> 3.  专有名称，例如“CN=Jeff Smith,OU=Sales,DC=Fabrikam,DC=Com”。要使用 DN，lnReserved 参数必须为零，或者必须包含 ADS_USE_SSL 标志
>     
>     
> 4.  用户主体名称 (UPN)，例如“jeffsmith@Fabrikam.com”。要使用 UPN，您必须为目标用户对象的 userPrincipalName 属性分配适当的 UPN 值。

您正在设置 SSL 标志，因此您必须使用 2、3 或 4。

PS 在您的示例代码中，您在构造函数中指定域的 DNS 名称。如果您在真实代码中指定服务器，则需要添加`ServerBind`标志。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T11:48:56.760

检查注册表项以查看支持的 SSL/TLS 版本；可能导致握手问题的问题...（请参阅下面给出的链接中的场景 5）

HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\SecurityProviders\SCHANNEL\Protocols

对于某些相关场景及其解决方案，请阅读[疑难解答 ssl 相关问题服务器证书](http://www.iis.net/learn/troubleshoot/security-issues/troubleshooting-ssl-related-issues-server-certificate)

# d - 是否有为 D 编程语言实现 UML 语义的状态机框架？

> ID：15616227
> 
> 赞同：2
> 
> 时间：2013-03-25T13:32:23.637
> 
> 标签：d, state-machine, fsm

D 编程语言中是否有一个状态机框架，它实现类似于 boost.MSM、boost.statecharts、QP 或 Machine Objects 的 UML 语义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T07:48:26.760

[Ragel](http://www.complang.org/ragel/)说它有一个 D 后端。

# java - Netty 4 - 编码器未写入以下编码器

> ID：15616228
> 
> 赞同：2
> 
> 时间：2013-03-25T13:32:27.270
> 
> 标签：java, networking, netty

我目前已经建立了一个网络客户端，它使用两个编码器、一个解码器和一个`ChannelInboundMessageHandlerAdapter<ByteBuf>`. 编码器是 a`MessageToByteEncoder<Packet>`和 a `ByteToByteEncoder`。我试过使用 a`ChannelOutboundMessageHandlerAdapter`和 a`ChannelOutboundByteHandlerAdapter`但他们都没有解决这个问题。它进入第一个编码器（`PacketEncoder`或`MessageToByteEncoder<Packet>`）就好了，但无法输入`ByteToByteEncoder`后缀并且没有数据发送到服务器。

我的管道设置如下：

```
ChannelPipeline pipeline = ch.pipeline();
// Decoders
pipeline.addLast("buffer_length_decoder", new BufferLengthDecoder());
pipeline.addLast("packet_decoder", new PacketDecoder());

// Encoder
pipeline.addLast("buffer_length_encoder", new BufferLengthEncoder());
pipeline.addLast("packet_encoder", new PacketEncoder()); 
```

PacketEncoder 看起来像这样：

```
public class PacketEncoder extends MessageToByteEncoder<Packet> {
    private static final Logger logger = LoggerFactory.getLogger(PacketEncoder.class);

    @Override
    protected void encode(ChannelHandlerContext ctx, Packet msg, ByteBuf out) throws Exception {
        ByteBuf buf = msg.buf();
        buf = buf.capacity(buf.readableBytes());
        logger.info(Utils.toHexString(buf.array()));
        out.writeBytes(buf);
    }
} 
```

BufferLengthEncoder 看起来像这样：

```
public class BufferLengthEncoder extends ByteToByteEncoder {
    private static final Logger logger = LoggerFactory.getLogger(BufferLengthEncoder.class);

    @Override
    protected void encode(ChannelHandlerContext ctx, ByteBuf in, ByteBuf out) throws Exception {
        logger.info(Utils.toHexString(in.array()));
        out = out.writeInt(in.readableBytes()).writeBytes(in);
    }
} 
```

我曾尝试更改他们在管道中的顺序但无济于事。我假设我只是在某处遗漏了一些荒谬的东西，但我不确定在哪里或什么。非常感谢任何和所有帮助。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:13:29.107

对我来说听起来很奇怪...您能否编写一个显示问题的单元测试并在确定它是一个错误后打开一个问题？

[https://github.com/netty/netty/issues](https://github.com/netty/netty/issues)

# oracle - Symfony 2 Doctrine Oracle 模式同步

> ID：15616229
> 
> 赞同：1
> 
> 时间：2013-03-25T13:32:29.147
> 
> 标签：oracle, symfony, doctrine, synchronization

我是 symfony 和学说的新手，希望能得到一些帮助......

我正在将教义连接到 oracle 11g 数据库。

我创建了一个包含可为空日期字段的表/实体。

因此，这些字段在 YAML 中描述

```
 metar_time:
        type: date
        nullable: true
        column: METAR_TIME
    taf_time:
        type: date
        nullable: true
        column: TAF_TIME
    ltaf_time:
        type: date
        nullable: true
        column: LTAF_TIME
    storage_date:
        type: date
        nullable: true
        column: STORAGE_DATE 
```

数据库架构将字段的状态反映为可空日期，默认值为空。

我遇到的问题是我无法让原则认识到数据库和元描述是同步的。

```
php app/console doctrine:schema:update --dump-sql
ALTER TABLE MET MODIFY (LTAF_TIME  DATE DEFAULT NULL, METAR_TIME  DATE DEFAULT NULL, STORAGE_DATE  DATE DEFAULT NULL, TAF_TIME  DATE DEFAULT NULL);

php app/console doctrine:schema:update --force
Updating database schema...
Database schema updated successfully! "1" queries were executed 
```

但是，如果我再次运行 sql 转储，更新仍然未完成。

我已经清除了所有缓存以排除这是一个问题。

欢迎任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:53:45.880

这是已知问题。检查[Oracle 平台上不正确的类型映射](http://www.doctrine-project.org/jira/browse/DBAL-434)

*一些参考：*

> 问题是 Oracle 有一个“DATE”类型，它实际上是一个 DATETIME。这就是我们将它映射到 Doctrine 的 Datetime 类型的原因。
> 
> 作为一种解决方法，您可以使用以下方法自己设置此信息： $conn->getDatabasePlatform()->registerDoctrineTypeMapping('date', 'date'); 请注意，这是所有列的全局更改。如果您将 DateTimes 映射到 TIMESTAMP 字段，那么您很高兴。

# javascript - event.currentTarget.activeElement 在 Chrome 浏览器中不起作用

> ID：15616238
> 
> 赞同：0
> 
> 时间：2013-03-25T13:32:50.643
> 
> 标签：javascript, jquery

我有带有多个提交按钮的表单，在提交表单时我正在检查哪个按钮被点击

```
$('.edit_form').submit(function() {
 var btn = event.currentTarget.activeElement 
```

它在 Chrome 浏览器中不起作用。如何解决这个，我不想用

```
$('.btn').live("click",function(){
  $('.edit_form').submit();
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:34:37.747

只有 IE 将事件设置为全局属性（不完全是，请参阅评论）。您需要的是使用作为第一个参数传递给回调的事件。

利用

```
$('.edit_form').submit(function(event) { // <== pass the event
   var btn = event.currentTarget.activeElement 
```

但是当你想要按钮时绑定在表单上似乎很奇怪。你可能不应该那样做。考虑表单可以`submit`直接接收事件，而不涉及任何按钮。

# ruby-on-rails-3 - 从 gem 扩展类

> ID：15616239
> 
> 赞同：1
> 
> 时间：2013-03-25T13:32:51.320
> 
> 标签：ruby-on-rails-3, gem

我有一个宝石，它声明了这个类`FulltextRow`

如果我从不同的 gem 打开类，我创建了一个名为 hacks.rb 的初始化程序。

我添加了以下代码：

```
FulltextRow.class_eval do
    ....
end 
```

但是，如果我不需要课程，我会得到例外：

```
uninitialized constant FulltextRow (NameError) 
```

但它运作良好如果我这样做：

```
require 'fulltext_row'
FulltextRow.class_eval do
    ....
end 
```

我的问题是：

为什么我需要一个在 gem 中定义的类？它们不是自动需要的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T04:42:56.183

我很乐意为您提供帮助，但由于缺乏信息，很难解决此问题。不过，我确实有两个建议。

1）您应该验证 gem 是否在 gem 中正确加载。我的意思是进行支持测试，以确认 gem 正在按预期工作。我遇到过我的 gem 的类没有加载的实例，因为我没有正确设置文件结构或者在某个地方有一个愚蠢的错字。

2）您的gemfile也可能设置为不自动加载gem。

```
gem full_text_row, require: false 
```

祝你好运！

# asp.net-mvc - mvc区域路由？

> ID：15616240
> 
> 赞同：18
> 
> 时间：2013-03-25T13:32:54.007
> 
> 标签：asp.net-mvc, url-routing, area

区域文件夹如下所示：

```
Areas 
    Admin
        Controllers
            UserController
            BranchController
            AdminHomeController 
```

项目目录如下所示：

```
Controller
    UserController
        GetAllUsers 
```

区域路线登记

```
public override void RegisterArea(AreaRegistrationContext context)
{
    context.MapRoute(
        "Admin_default",
        "Admin/{controller}/{action}/{id}",
        new { action = "Index", id = UrlParameter.Optional },
        new { controller = "Branch|AdminHome|User" }
    );
} 
```

项目路线登记

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}/{id}",
        defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional },
        namespaces: new string[] { "MyApp.Areas.Admin.Controllers" });
} 
```

当我这样路由时：`http://mydomain.com/User/GetAllUsers`我得到资源未找到错误（404）。将 UserController 添加到 Area 后出现此错误。

我该如何解决这个错误？

谢谢...

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-25T13:43:38.020

你搞砸了你的控制器命名空间。

您的主要路线定义应该是：

```
routes.MapRoute(
    name: "Default",
    url: "{controller}/{action}/{id}",
    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional },
    namespaces: new string[] { "MyApp.Controllers" }
); 
```

您的管理区域路由注册应该是：

```
public override void RegisterArea(AreaRegistrationContext context)
{
    context.MapRoute(
        "Admin_default",
        "Admin/{controller}/{action}/{id}",
        new { action = "Index", id = UrlParameter.Optional },
        new { controller = "Branch|AdminHome|User" },
        new[] { "MyApp.Areas.Admin.Controllers" }
    );
} 
```

注意应该如何使用正确的命名空间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-03-11T22:44:34.947

最新的 ASP.NET Core MVC 解决方案。

```
[Area("Products")]
public class HomeController : Controller 
```

来源：[https ://docs.microsoft.com/en-us/aspnet/core/mvc/controllers/areas](https://docs.microsoft.com/en-us/aspnet/core/mvc/controllers/areas)

# android - 应该是什么设计方法 - ListView Vs LinearLayout

> ID：15616242
> 
> 赞同：0
> 
> 时间：2013-03-25T13:33:08.443
> 
> 标签：android

我有一个按顺序显示这三件事的活动。

1.  ViewFlipper（用户可以向左/向右抛）
2.  编辑文本
3.  ListView（列表视图可以有 n 行。我们将其限制为 100。每行都有异步下载的图像）

我希望该用户可以垂直滚动，所以我将三个项目放在单个相对布局中，并将其放入 scrollView

```
<RelativeLayout>
    <ScrollView>
        <RelativeLayout>

        </RelativeLayout>  
    </ScrollView>
</RelativeLayout> 
```

这种方法的问题

ListView 和滚动视图一起使用是不好的用户体验。当列表将覆盖所有屏幕时，用户在滚动完整视图本身时会遇到问题。

我能想到的解决方案

1.  禁用 ListView 上的滚动并让它显示所有项目（这是否足够好）
2.  用户 addHeaderView（不知道怎么用）

第二种方法（我这样做并遇到了问题）。

而不是使用 ListView 动态添加 LinearLayout （替换列表行）。

这种方法的问题

很多丑陋的编码，因为没有适用于此类场景的复杂适配器。需要填充每个 LinearLayout，这会产生更多问题，因为我为每个 LinearLayout 加载了异步图像。

有什么更好的方法。有替补吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:46:14.413

不要将 a`ScrollView`和 a*一起*使用，`ListView`正如. 你的方法的问题是性能：你需要创建*n* new ，而只是重用现有的。*`ListView``LinearLayout`*`Views``ListView`**

 **我能想到的解决方案（如果无法使布局组件在不滚动的情况下适应屏幕），您可以禁用 ListView 中的滚动并添加“向上滚动”和“向下滚动”按钮，设置`onClickListener`和`OnLongClickListener`让用户控制滚动速度。虽然这可能不是最好的方法。考虑重新设计布局，使组件适合单个屏幕。由于布局组件不适合单个屏幕，这通常不是启用滚动的良好用户体验。例如，您可以向您添加更多页面并将您的`ViewFlipper`位置放在`ListView`那里**

# button - 网站 Likebutton 管理页面无法访问

> ID：15616247
> 
> 赞同：0
> 
> 时间：2013-03-25T13:33:13.147
> 
> 标签：button, facebook-like, admin

首先，我已经阅读了所有其他相关主题，但没有找到解决我的问题的方法。

我有许多集成了“喜欢”按钮的普通网站，但我无法访问管理页面以将消息发布到喜欢该页面的用户的新闻源（我在任何地方都看不到“管理页面”链接）。

我已经完成了[这个](https://developers.facebook.com/docs/reference/plugins/like/migration/)说明，但我不适合我。

只有几页我可以在下面找到管理[链接](https://www.facebook.com/bookmarks/pages)，在那里我可以看到迁移我的页面的请求（*红色框），一切正常。*

所以我的问题是如何为我的页面获取管理链接以将这些迁移到正常的 FB 页面？

# css - 除 Chrome 外，高度并未显示在所有内容上

> ID：15616248
> 
> 赞同：0
> 
> 时间：2013-03-25T13:33:14.667
> 
> 标签：css, object

所以，我有一个页面，我让对象的宽度和高度达到 100%，并填充容器。这对我来说很好，所以我就去了。我在 Firefox 中查看了该页面，*几乎*喘不过气来。物体有全宽，但高度被压扁了。我对如何在除 chrome 之外的浏览器中解决此问题感到困惑。这是一些代码：

HTML

```
<body>
<div id="content">
<div class="bottombar">
<a href="/" class="menu">1</a>
<a href="#" class="menu">2</a>
<a href="#" class="menu">3</a>
<a href="#" class="menu">4</a>
<a href="#" class="menu">5</a>
<a href="#" class="menu">Support</a>
<a href="#about" id="opener" class="menu">About</a>
</div>
<iframe height="100%" width="100%" src="http://www.google.com/" seamless></iframe>
</div>
</body> 
```

CSS

```
p {
    font-size: 30px;
}
h4 {
    font-size: 50px;
}
body {
    margin: 0px;
    background-image: url('http://ptd.burngames.net/images/pattern-aosk.png');
    background-repeat: repeat;
    height:100%;
    width:100%;
}
.bottombar {
    width: 100%;
    height: 50px;
    background-image: url('http://ptd.burngames.net/images/menuback.png');
    background-repeat:repeat-x;
    font-size: 40px;
    bottom: 0px;
    left: 0px;
    color: white;
}
.menu {
    text-align: center;
    padding-left: 25px;
    font-family: 'Iceland', Arial;
    color:white;
}
a:link {
    text-decoration: none;
    color:white;
}
a:visited {
    text-decoration: none;
    color:white;
}
a:active {
    color:lightgray;
}
iframe {
    height:100%;
    width:100%;
}
embed {
    height:100%;
    width:100%; 
    background-image: url('images/trans.png')
    background-repeat:repeat;
}
#news {
    font-family: 'Iceland', Arial;
}
#news.h1 {
    background-color:lightred;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:01:49.830

尝试将您的 html 和内容标签高度设置为 100%：

```
html, #content {height:100%;} 
```

小提琴 - [http://jsfiddle.net/LUeZr/1/](http://jsfiddle.net/LUeZr/1/)

请注意，由于底部栏占据 50 像素的高度，您的 iframe 会在页面中添加滚动条

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:16:58.157

```
html{height: 100%;}
body{
    height: auto;
    min-height: 100%;
    position: relative;
}
#content {
    height: 100%;
    left: 0;
    position: absolute;
    top: 0;
    width: 100%;
} 
```

# ios - 解雇 presentModalViewController 不在 UIScrollView 上工作

> ID：15616251
> 
> 赞同：0
> 
> 时间：2013-03-25T13:33:19.837
> 
> 标签：ios, objective-c, scrollview

在我的应用程序中，我使用了 presentModalViewController，在下一个控制器中，我使用了 UIScrollView，也使用了关闭 presentModalViewController UITapGestureRecognizer

我的代码就像，

`UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tappedOnView:)]; tapGesture.numberOfTapsRequired = 1; tapGesture.numberOfTouchesRequired = 1; tapGesture.delegate = self; [self.fullScreenImageView addGestureRecognizer:tapGesture];`

```
-(void)tappedOnView:(UIGestureRecognizer*)gestureRecognizer {
    [self dismissModalViewControllerAnimated:YES];} 
```

但这给了我一个错误

`attempt to dismiss modal view controller whose view does not currently appear. self = <UITabBarController: 0xabb0610> modalViewController = <FullScreenViewController: 0xab5c440>`

所以我替换了调用方式

```
if ([self respondsToSelector:@selector(presentingViewController)]) {
    [self.presentingViewController.presentingViewController dismissModalViewControllerAnimated:YES]; // for IOS 5+
} else {
    [self.parentViewController.parentViewController dismissModalViewControllerAnimated:YES]; // for pre IOS 5
} 
```

但是代码不起作用。我不能解雇我的 presentModalViewController。没有滚动视图它的工作。上面的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:47:35.867

> tapGesture.delegate = 自我；

那里不需要。

> [self.fullScreenImageView addGestureRecognizer:tapGesture];

如果 fullScreenImageView 是一个滚动视图，那么 tapGesture 已经在那里实现了。这可能是问题所在。

# android - 在 Android 上启用 C++11 支持

> ID：15616254
> 
> 赞同：75
> 
> 时间：2013-03-25T13:33:32.353
> 
> 标签：android, c++, c++11

如何将 C++11 集成到 Android 中？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2014-01-27T16:59:40.203

看来这里的主要答案包括对 C++11 的实验性支持，而 C++11 不再是实验性的。

如果您正在使用命令行 NDK 支持（我使用 IDEA 社区版 13 来处理 Java 内容），那么这就是我必须在我`jni/Application.mk`的 API 19（在 OSX ML 上）获得 C++11 支持的内容：

```
NDK_TOOLCHAIN_VERSION := 4.8
# APP_STL := stlport_shared  --> does not seem to contain C++11 features
APP_STL := gnustl_shared

# Enable c++11 extentions in source code
APP_CPPFLAGS += -std=c++11 
```

源自[这里](https://stackoverflow.com/a/19874831/562139)和[这里](https://vilimpoc.org/blog/2013/10/05/c11-support-on-android-with-g-4-8/)。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-03-25T13:33:32.353

首先，您需要确保您的工具链是“跨 GCC”。虽然它是我的 Linux 上的默认设置，但它不在我的 MacOSX Lion 上。

为此，请转到**Project Properties > C/C++ Build > Tool Chain Editor**。“*当前工具链*”应设置为“*跨 GCC* ”。您可能需要取消选中“*仅显示兼容的工具链*”框。

*然后，在Android.mk*中为 LOCAL_CFLAGS 添加一个选项：

```
LOCAL_CFLAGS := -std=gnu++11 
```

我们现在需要通知 Eclipse 在哪里可以找到相应的新符号（例如“std::unordered_map”）。转到**右键单击“jni”> Properties > C/C++ General -> Paths and Symbols -> Symbols -> GNU C++**，然后添加以下符号（通过单击“Add...”）：

```
Name: __GXX_EXPERIMENTAL_CXX0X__
Value: 
```

*（即让“Value”为空）*

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-03-30T21:24:34.733

如果您使用的是[gradle-experimental-plugin](http://tools.android.com/tech-docs/new-build-system/gradle-experimental)，您也可以在**build.gradle**文件中进行设置：

```
android.ndk {
    moduleName = "hello-android-jni"
    stl = "stlport_shared"
    cppFlags.add("-std=c++11")
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-03T14:25:50.710

使用最新的[gradle-experimental-plugin](http://tools.android.com/tech-docs/new-build-system/gradle-experimental) 0.8.0-alpha4 添加到您的**app/build.gradle**：

```
model {
    android {
        ndk {
            moduleName "native"
            CFlags.add("-std=c11") // Enable C11 support
            ldLibs.add("log")
        }
    }
} 
```

# .htaccess - CSS/JS 自动版本控制 .htaccess

> ID：15616256
> 
> 赞同：0
> 
> 时间：2013-03-25T13:33:37.010
> 
> 标签：.htaccess, mod-rewrite

我在使用用于 CSS 和 JS 的自动版本控制的重写规则时遇到问题。

我有以下 HTML 代码来包含我的样式表：

```
<link rel="stylesheet" type="text/css" href="includes/css/index_home.1364215354.css" /> 
```

我在我的 .htaccess 中使用它来去除点和 10 位数字：

```
RewriteEngine On
RewriteRule ^(.*)\.[\d]{10}\.(css|js)$ $1.$2 [L] 
```

当我加载站点时，即使我将浏览器指向[http://www.example.com/includes/css/index_home.css](http://www.example.com/includes/css/index_home.css)也可以看到样式表，但无法加载样式表。

我尝试使用的方法，我在这里找到了[如何强制浏览器重新加载缓存的 CSS/JS 文件？](https://stackoverflow.com/questions/118884/what-is-an-elegant-way-to-force-browsers-to-reload-cached-css-js-files)

我猜 RewriteRule 是问题所在，但我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:36:52.340

RewriteRule 到目前为止还不错。也许问题在于相对 URL 并且请求有一些前缀。

如果是这种情况，您必须更具体（以 开头`includes`）并且不要锚定在请求字符串的开头。也将其重写为绝对 URL 路径

```
RewriteRule (includes/.*)\.[\d]{10}\.(css|js)$ /$1.$2 [L] 
```

如果您有多个 .htaccess 文件，则更具体的 ( `css`)[会覆盖](http://httpd.apache.org/docs/2.4/howto/htaccess.html#how)更接近根目录的 .htaccess。要合并这些 .htaccess 文件，您必须在.htaccess 文件中使用[`RewriteOptions Inherit`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriteoptions)或。[`RewriteOptions InheritBefore`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriteoptions)`css`

# java - Jersey 自定义异常未在 Servlet 类中捕获？

> ID：15616264
> 
> 赞同：1
> 
> 时间：2013-03-25T13:34:02.683
> 
> 标签：java, exception, servlets, jersey

我在我的项目中使用自定义异常类

```
public class BadRequestException extends WebApplicationException {
    private static final long serialVersionUID = 1L;
    private String message;
    public BadRequestException(String message) {
        super();
        this.message = message;
    }
    public String getMessage() {
        return message;
    }
    public void setMessage(String message) {
        this.message = message;
    }
} 
```

我也创建了一个 Mapper 类..

```
public class BadRequestExceptionMapper implements ExceptionMapper<BadRequestException> {
    public Response toResponse(BadRequestException brexec) {
        return Response.status(Response.Status.INTERNAL_SERVER_ERROR).entity(brexec.getResponse().getEntity()).type(MediaType.APPLICATION_JSON).build();
    }
} 
```

我通过**Servlet**调用我的服务，异常是由它的一种方法引发的，但我无法在 Servlet 类中捕获它。我使用下面的代码来捕获异常。

```
 try{
    //Some Business logic then
    service.path("restful").path("jwbservice/" + methodName + "/" + id).header("lid", lid).delete(String.class);
    }
    catch (BadRequestException ex) {
    out.println(ex);
    } 
   catch(Exception exe){
    out.println(exe);
    } 
```

我在我的服务类中使用了这个代码的服务方法会抛出异常。

```
@DELETE
    @Path("/deleteLink/{id}")
    @Produces(MediaType.APPLICATION_JSON)
    public String deleteLink(@PathParam("id") int id, @HeaderParam("lid") String lid) throws BadRequestException {
    if (id<= 0) {
        throw new BadRequestException("Required Parameter: id");
        }
//Some Business Logic
} 
```

我的服务**抛出**了**BadRequestException**但在 Servlet 中它会在**BadRequestException** Catch 块中捕获**异常。**任何人都可以知道我做错了什么。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:44:10.490

您永远不会在您的 servlet 中遇到该异常。这是因为 servlet 实际上是一个 REST 客户端，并且您正在调用远程资源方法来获取一些数据。资源调用要么成功（并且一些数据将被映射回来），要么失败并且您将没有数据（或客户端错误）。

附带说明一下，您的服务器端异常映射器存在问题。在调用之前，您没有验证异常是否确实具有响应实体：

```
brexec.getResponse().getEntity() 
```

在异常没有响应的情况下，上述代码将导致空指针异常。

* * *

一些快速说明：

*   异常类已经有一个`message`属性。您不需要再定义一个
*   您的异常映射器需要检查一个不存在的`response`属性，然后再尝试对其进行处理
*   servlet 中的资源路径似乎与服务器端路径不匹配。我认为这是一个复制/粘贴错误。**

# asp.net - 如何处理服务器场上的上传文件

> ID：15616267
> 
> 赞同：0
> 
> 时间：2013-03-25T13:34:06.990
> 
> 标签：asp.net, database, filesystems

我们有一个允许用户上传文件的 asp.net 网站。目前我们通过文件流来做到这一点。用户单击一个按钮，我们在站点根目录> 下载 > 文件夹-idofuser > 文件名下创建文件夹。有没有比这更好的方法。即在特定位置的外部应用程序中的所有文件???。路径不存储在数据库中以供访问，我们只是在文件流上列出相关文件夹中的文件。也许我们应该做不同的任何建议？

他们可以上传任意数量的文件。目前我们每个月能拿到大约 30,000 个。由于我们的文件夹结构，我们现在遇到文件夹速度缓慢的问题，因此我们将 6 个月以上的文件夹存档到 HD 上的新位置。很多文件，一开始还可以，但现在有超过 600 个演出值得，有点噩梦。仍然在 1 个文件夹下留下数十万个文件夹。

我已经阅读了很多文章和问题，但我仍然不确定看到 2 个示例最好做什么：查看[https://stackoverflow.com/questions/810215/best-practice-checks-when-allowing-users-将文件上传到网络应用程序](https://stackoverflow.com/questions/810215/best-practice-checks-when-allowing-users-to-upload-files-to-a-web-application)

[使用 ASP.NET 网站和 Visual Studio 管理用户上传的](https://stackoverflow.com/questions/9323490/managing-user-uploaded-files-with-an-asp-net-website-and-visual-studio)文件

现在我们正计划从当前的内部托管转移到服务器场。当我们拥有这么多文件时，这似乎非常昂贵。我们是否应该有 2 台服务器 1 台用于应用程序/网站，一台用于文件和数据库。或者一个就足够了。显然，金钱是方程式的重要组成部分，但是，试图了解什么最适合英镑等。任何好的请告知。以及我们应该如何存储文件和访问它们。我们应该使用子域等以及如何使用。

希望问题不要无聊，提前谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:52:26.513

使用唯一名称（Guid）将文件保存在服务器上并保存到数据库的路径不是更好吗？这样，您只需要查询非常快的数据库，而不需要遍历系统上的所有文件。当有人请求文件时，只需将其提供给用户。我认为这可能真的很快。这样，您还可以拥有一个脚本，该脚本将每月或每天运行和归档您的文件。并在记录中设置一个标志，表明它正在与文件的新路径一起归档。这可以每晚自动完成。

# android - 翻译动画和视图布局

> ID：15616268
> 
> 赞同：1
> 
> 时间：2013-03-25T13:34:07.510
> 
> 标签：android

我想用下面的代码在我的 Android 应用中制作一个 translateAnimation ：

```
 TranslateAnimation anim = new TranslateAnimation(0,0,-400,0);
        anim.setDuration(400);
        anim.setAnimationListener(new AnimationListener() {

            @Override
            public void onAnimationStart(Animation animation) {                     
            }

            @Override
            public void onAnimationRepeat(Animation animation) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onAnimationEnd(Animation animation) {

                mlLinearLayout.clearAnimation();
                mlLinearLayout.requestLayout();
                mlLinearLayout.layout(mlLinearLayout.getLeft(), mlLinearLayout.getTop()+400, mlLinearLayout.getRight(), mlLinearLayout.getBottom());
            }
        });
        anim.setInterpolator(new AccelerateInterpolator());
        anim.setFillEnabled(true);
        anim.setFillAfter(true);
        anim.setFillBefore(false);
        mlLinearLayout.startAnimation(anim);
        active=false; 
```

但是当这个动画完成时，即使我用新位置重建我的视图，LinearLayout 也会回到他的起始位置。请问我该如何更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T09:40:39.917

我终于找到了解决方案：

```
 TranslateAnimation anim = new TranslateAnimation(0,0,0,400);
            anim.setDuration(400);
            anim.setAnimationListener(new AnimationListener() {

                @Override
                public void onAnimationStart(Animation animation) {                     
                }

                @Override
                public void onAnimationRepeat(Animation animation) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onAnimationEnd(Animation animation) {
                    mlLinearLayout.layout(mlLinearLayout.getLeft(), mlLinearLayout.getTop()+400, mlLinearLayout.getRight(), mlLinearLayout.getBottom());
                }
            });
            anim.setFillEnabled(true);
            anim.setFillAfter(false);
            anim.setFillBefore(false);
            mlLinearLayout.startAnimation(anim);
            active=false; 
```

当我在翻译后重建我的视图时，fillafter 没有用，现在它工作完美，没有滞后和跳跃！

# c# - 从另一个数组列表添加到数组列表

> ID：15616270
> 
> 赞同：0
> 
> 时间：2013-03-25T13:34:09.020
> 
> 标签：c#, winforms, arraylist, listbox

我有一个程序，我试图通过列表框将项目从一个数组列表移动到另一个，但是当我尝试将它添加到第二个数组列表时，它没有添加到那里。

```
ArrayList list1 = new ArrayList();
ArrayList list2 = new ArrayList();
list1.Add(new Class(var1, var2, var3, var4, var5, var6, var7));
foreach (object o in list1)
        {
            class m = (class)o;
            selectionBox.Items.Add(m);
        } 
```

我初始化了上面的所有内容并将所有内容添加到类中，然后添加到列表框中。请注意我从 XML 文件中获得的变量。

```
 bool req = true;

        if (selectionBox.SelectedItem != null)
        {
            Count++;
            errorLabel.Text = "";

            for (int i = 0; i < selectionBox.Items.Count; i++)
            {
                if (selectionBox.GetSelected(i) == true)
                {

                    class m = selectionBox.SelectedItem as class;
                    if (m.var2 == ((Modules)selectionBox.Items[i]).var2)
                    {
                        list2.Add(list1.IndexOf(i));
                    }
                }
            }

        }
        else
        {
            errorLabel.Text = "Error";
        } 
```

在这里，我尝试将其添加到第二个数组列表中，但 if 语句不起作用，但它是正确的，我已经尝试使用 print 语句。那么有人可以告诉我为什么以下行没有添加到列表中吗？

```
 list2.Add(list1.IndexOf(i)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:43:31.050

`list2.Add(list1.IndexOf(i));`将为您提供每个元素的索引（位置）。不是元素本身。

要添加元素，您需要执行以下操作：

`list2.Add(list1[i]);`

另外，顺便说一句，这只会复制对每个元素的引用，不会创建每个元素的新副本。

# selenium - 如何使用 selenium 测试多个应用程序的协作

> ID：15616271
> 
> 赞同：0
> 
> 时间：2013-03-25T13:34:09.743
> 
> 标签：selenium, selenium-webdriver, selenium-ide, gui-testing, ui-testing

我想使用 selenium 来测试两个或多个应用程序（主要、监控、管理）如何协同工作。但是，我所能找到的只是如何测试单个应用程序。

示例场景可能如下所示：

```
App 1 - user x tries to log in, but has no account and the login fails
App 2 - a user for App 1 is created
App 1 - user is now able to log in

App 1 - user x performs a task
App 2 - displays the performed task
App 1 - user x finishes a task
App 2 - displays the finished task 
```

应用程序可以部署在不同的服务器上。通信是通过一个公共数据库执行的。这些应用程序不一定使用相同的技术堆栈来实现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T15:32:31.630

Selenium 旨在复制真实的用户行为。因此，如果会话确实在离开 APP 1 时终止，而真正的用户会这样做，那么在通过 selenium webdriver 运行这些步骤时会看到完全相同的行为。

如果你还想做i，可以这样做——

```
@driver1 = Selenium::WebDriver.for(:remote, :url => @sel_grid_url, :desired_capabilities => @browser) #create a browser session controlled by driver1
@driver2 = Selenium::WebDriver.for(:remote, :url => @sel_grid_url, :desired_capabilities => @browser) #create another browser session controlled by driver2
@driver1.get "http://#{app1}/"
## user x tries to log in, but has no account and the login fails
@driver2.get "http://#{app2}"
## a user for App 1 is created
.
.
. 
```

上面的代码是用 Ruby 编写的，中间是用 Selenium Grid 2 实现的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T14:38:12.767

Selenium IDE 不允许您在同一测试期间更改网站。但是您可以使用 Selenium Webdriver 轻松做到这一点。例如

```
driver.get("yourFirstApp.com");
//Test your stuff
driver.get("yourSecondApp.com");
//Test your stuff
etc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T14:50:01.260

如果您像下面的代码一样留在同一个测试用例中，您将不会遇到对话 ID、会话等问题。

```
@Test
public void blablalb() {  
driver.get(a1);  
//code.... 
driver.get(a2);  
//code...
} 
```

# php - Google Analytics 数据上传 Mime 类型错误

> ID：15616273
> 
> 赞同：2
> 
> 时间：2013-03-25T13:34:10.933
> 
> 标签：php, google-analytics

下面是我在数据上传程序中使用的代码。

```
if(isset($_POST['upload'])){
try {
$dailyUploadsFile = $analytics->management_dailyUploads->upload(
$_REQUEST['accountId'],             // your accountID
$_REQUEST['webPropertyId'],         // your web property ID
$_REQUEST['customDataSourceId'],    // your custom data source UID
$_REQUEST['datepicker'],            // date
$_REQUEST['appendNumber'],          // append number
'cost',                             // type of data
array(
  "reset" => $_REQUEST['reset'],
  "data" => file_get_contents_curl($_REQUEST['csvFile']),
  "mimeType" => 'application/octet-stream',
  "uploadType" => 'media'));
} catch (Exception $e) {
die('An error occured: ' . $e->getMessage()."\n");
}
} 
```

这是我点击提交时遇到的错误：

发生错误：调用 POST 时出错[https://www.googleapis.com/upload/analytics/v3/management/accounts/34620205/webproperties/UA-34620205-1/customDataSources/P4Zlk69kSCOtVVIu7iFjqw/dailyUploads/2013-03-09/uploads ?appendNumber=1&type=cost&reset=true&uploadType=media&key=AIzaSyDzvHpTNC_CKAnpyfnc1Vjwl_joE5hgBhc](https://www.googleapis.com/upload/analytics/v3/management/accounts/34620205/webproperties/UA-34620205-1/customDataSources/P4Zlk69kSCOtVVIu7iFjqw/dailyUploads/2013-03-09/uploads?appendNumber=1&type=cost&reset=true&uploadType=media&key=AIzaSyDzvHpTNC_CKAnpyfnc1Vjwl_joE5hgBhc) : (400) 不支持媒体类型“application/x-www-form-urlencoded”。有效的媒体类型：[application/octet-stream]

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-15T00:41:34.023

Analytics API的`dailyUploads` [资源](https://developers.google.com/analytics/devguides/config/mgmt/v3/mgmtReference/management/dailyUploads)已被弃用。建议您使用该`uploads` [资源](https://developers.google.com/analytics/devguides/config/mgmt/v3/mgmtReference/management/uploads/uploadData)。

如果您拥有授权的分析服务对象，则以下示例应该适用于 php。

```
$analytics->management_uploads->uploadData(
    '123456',
    'UA-123456-1',
    '122333444455555',
    array('data' => file_get_contents('example.csv'),
          'mimeType' => 'application/octet-stream',
          'uploadType' => 'media')); 
```

# asp.net - 当我在内容页面中使用它时，Jquery 选项卡控件不起作用

> ID：15616274
> 
> 赞同：1
> 
> 时间：2013-03-25T13:34:12.997
> 
> 标签：asp.net, css, jquery-ui

我在 asp.net Web 应用程序中有一个母版页，而 default.aspx 是母版页的内容页。

我在 default.aspx 中使用 jQuery 选项卡，当我运行应用程序时它不起作用：ui-tabs 的样式已经出现，但我无法单击选项卡。

当我在母版页本身尝试相同的事情时，选项卡控件工作正常我的意思是我可以单击显示选项卡容器的适当内容的选项卡

我正在使用 jQuery UI

```
 <link href="css/jquery-ui-1.10.2.custom.css" rel="stylesheet" type="text/css" />
<script src="js/tab/jquery-ui-1.10.2.custom.js" type="text/javascript"></script> 
```

```
 <div id="quicksearch">
    <div id="tabs">
        <ul>
            <li><a href="#tabs-1">Quick Search</a></li>
            <li><a href="#tabs-2">Quick Register</a></li>
        </ul>
        <div id="tabs-1">
            <h1>
                Quick search</h1>
        </div>
        <div id="tabs-2">
            <h1>
                Quick Register</h1>
        </div>
    </div>
</div> 
```

我用来选择标签的功能：

```
$( "#tabs" ).tabs(); 
```

这里会有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:44:47.397

您的 id 将被 asp.net 破坏。使用类选择器像这样引用您的选项卡，当您的页面呈现时，该选择器将保持不变。

**头部分的**母版页****

 **你的 jquery 在这里导入

```
 <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.js"></script>

<script type="text/javascript" src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>

 <script type="text/javascript">
   $(document).ready(function ()
    {
    //initialization code
     $(".tabs" ).tabs();
     }
</script> 
```

然后在你的内容页面

```
<div class="tabs">
    <ul>
        <li><a href="#tabs-1">Quick Search</a></li>
        <li><a href="#tabs-2">Quick Register</a></li>
    </ul>
    <div id="tabs-1">
        <h1>
            Quick search</h1>
    </div>
    <div id="tabs-2">
        <h1>
            Quick Register</h1>
    </div>
</div> 
```

在撰写本文时，上述链接对我有用[。此处为压缩演示](http://dl.dropbox.com/u/81286708/WebSite7.zip)

![在此处输入图像描述](../Images/94166c42c5ccbce7f168b39e061bc763.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:06:57.403

@AbideMasaraure 解决了我的问题.... 成千上万的人感谢他.... 问题是样式表中内容类中的负 z-index**

# python - 如何使用 Factory_Boy 创建管理员用户？

> ID：15616277
> 
> 赞同：30
> 
> 时间：2013-03-25T13:34:18.817
> 
> 标签：python, django, selenium, factory-boy

我是一个相对的 Django 初学者，刚刚开始为我的项目做一些测试。我想要做的是使用登录到 Django Admin 站点的 selenium 构建一个功能测试。

我首先遵循本教程[http://www.tdd-django-tutorial.com/tutorial/1/](http://www.tdd-django-tutorial.com/tutorial/1/)并使用固定装置和转储数据使管理员帐户信息可用于测试应用程序（它创建一个新数据库）。这工作正常。

然后我想看看我是否可以使用[factory-boy](https://github.com/rbarrois/factory_boy)来更换固定装置。工厂男孩通过在 tests.py 文件中实例化必要的对象来工作，这对我来说似乎更干净。不知何故，我无法让它工作，而且 Factory_boy 文档也没有太大帮助......

这是我的tests.py

```
from django.test import LiveServerTestCase
from django.contrib.auth.models import User
from selenium import webdriver
from selenium.webdriver.common.keys import Keys
import factory

class UserFactory(factory.Factory):
    FACTORY_FOR = User

    username = 'jeff'
    password = 'pass'
    is_superuser = True

class AdminTest(LiveServerTestCase):

    def setUp(self):
        self.browser = webdriver.Firefox()

    def tearDown(self):
        self.browser.quit()

    def test_if_admin_login_is_possible(self):
        jeff = UserFactory.create()

        # Jeff opens the browser and goes to the admin page
        self.browser = webdriver.Firefox()
        self.browser.get(self.live_server_url + '/admin/')

        # Jeff sees the familiar 'Django Administration' heading
        body = self.browser.find_element_by_tag_name('body')
        self.assertIn('Django administration', body.text)

        # Jeff types in his username and password and hits return
        username_field = self.browser.find_element_by_name('username')
        username_field.send_keys(jeff.username)
        password_field = self.browser.find_element_by_name('password')
        password_field.send_keys(jeff.password)
        password_field.send_keys(Keys.RETURN)

        # Jeff finds himself on the 'Site Administration' page
        body = self.browser.find_element_by_tag_name('body')
        self.assertIn('Site administration', body.text)

        self.fail('Fail...') 
```

这无法登录，因为它没有创建有效的管理员帐户。我怎么能用 factory-boy 做到这一点？有可能还是我需要为此使用固定装置？

（在这篇文章中，有些人建议固定装置是必要的，但工厂男孩没有出现：[如何在 django tests.py 中创建管理员用户](https://stackoverflow.com/questions/3495114/how-to-create-admin-user-in-django-tests-py)。我还尝试了相同答案底部建议的解决方案：[https://stackoverflow。 com/a/3495219/1539688](https://stackoverflow.com/a/3495219/1539688)。它对我不起作用......）

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-07-31T20:32:50.730

如果你继承 factory.DjangoModelFactory 它应该为你保存用户对象。[请参阅PostGenerationMethodCall](https://factoryboy.readthedocs.org/en/latest/reference.html#factory.PostGenerationMethodCall)下的注释部分。那么您只需要执行以下操作：

```
class UserFactory(factory.DjangoModelFactory):
    FACTORY_FOR = User

    email = 'admin@admin.com'
    username = 'admin'
    password = factory.PostGenerationMethodCall('set_password', 'adm1n')

    is_superuser = True
    is_staff = True
    is_active = True 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2019-04-05T04:44:06.620

我正在使用 Django 1.11（我敢打赌它将在 Django 2+ 中工作）和 factory_boy 2.11.1。这很简单：

```
import factory
from django.contrib.auth.hashers import make_password
from django.contrib.auth.models import User

class SuperUserFactory(factory.django.DjangoModelFactory):
    class Meta:
        model = User

    first_name = factory.Faker('first_name')
    last_name = factory.Faker('last_name')
    username = factory.Faker('email')
    password = factory.LazyFunction(lambda: make_password('pi3.1415'))
    is_staff = True
    is_superuser = True 
```

在这个例子中，如果你想要一些不同的东西，所有用户都将`'pi3.1415'`相应地更改密码，或者你甚至可以使用它`password = factory.Faker('password')`来生成一个随机密码（但是，它应该是你能够弄清楚的。否则，将很难登录）。

### 创建超级用户的示例

```
>>> user = SuperUserFactory.create()
>>> user.username # the following output will be different in your case
amber60@hotmail.com 
```

使用您收到的电子邮件`user.username`和密码`'pi3.1415'`登录管理员。

### 如果用户关联了反向外键怎么办？

很简单，假设您有一个模型，该模型`Profile`具有模型的外键`User`。然后你必须添加以下类：

```
class Profile(models.Model):
    user = models.OneToOneField(User)
    visited = models.BooleanField(default=False)

# You need to set the foreign key dependency using factory.SubFactory
class ProfileFactory(factory.django.DjangoModelFactory):
    class Meta:
        model = Profile

    user = factory.SubFactory(UserFactory)

# use a RelatedFactory to refer to a reverse ForeignKey 
class SuperUserFactory(factory.django.DjangoModelFactory):
    class Meta:
        model = User

    first_name = factory.Faker('first_name')
    last_name = factory.Faker('last_name')
    username = factory.Faker('email')
    password = factory.LazyFunction(lambda: make_password('pi3.1415'))
    is_staff = True
    is_superuser = True
    profile = factory.RelatedFactory(ProfileFactory, 'user', visited=True) 
```

就是这样，使用示例中的相同逻辑来创建您的超级用户。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-05-31T16:56:07.600

我假设您正在研究[http://www.tdd-django-tutorial.com](http://www.tdd-django-tutorial.com)教程，因为这也是我被卡住的地方。您现在可能已经想通了，但是对于下一个人来说，这是对我有用的代码，诀窍是添加 _prepare 方法以确保密码被加密，并将所有标志设置为 true（这是使用 Django 1.5 完成的。 1、如果您使用的是早期版本，请更改 User 模型导入）

```
from django.test import LiveServerTestCase
from selenium import webdriver
from selenium.webdriver.common.keys import Keys

import factory
from django.contrib.auth import get_user_model
User = get_user_model()

class UserFactory(factory.DjangoModelFactory):
    FACTORY_FOR = User

    email = 'admin@admin.com'
    username = 'admin'
    password = 'adm1n'

    is_superuser = True
    is_staff = True
    is_active = True

    @classmethod
    def _prepare(cls, create, **kwargs):
        password = kwargs.pop('password', None)
        user = super(UserFactory, cls)._prepare(create, **kwargs)
        if password:
            user.set_password(password)
            if create:
                user.save()
        return user

class PollsTest(LiveServerTestCase):

    def setUp(self):
        self.browser = webdriver.Firefox()
        self.browser.implicitly_wait(3)
        self.user = UserFactory.create()

    def tearDown(self):
        self.browser.quit()

    def test_can_create_new_poll_via_admin_site(self):
        self.browser.get(self.live_server_url+'/admin/')

        body = self.browser.find_element_by_tag_name('body')
        self.assertIn('Django administration', body.text)

        username_field = self.browser.find_element_by_name('username')
        username_field.send_keys(self.user.username)

        password_field = self.browser.find_element_by_name('password')
        password_field.send_keys('adm1n')
        password_field.send_keys(Keys.ENTER)

        body = self.browser.find_element_by_tag_name('body')
        self.assertIn('Site administration', body.text)

        polls_links = self.browser.find_element_by_link_text('Polls')
        self.assertEqual(len(polls_links), 2)

        self.fail('Finish the test!') 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-02-07T23:45:58.253

**创建管理员用户：**

您可以添加一个参数声明，该声明提供了快速创建管理员用户或普通用户的灵活性。

[https://factoryboy.readthedocs.io/en/latest/introduction.html?highlight=class%20Params#altering-a-factory-s-behaviour-parameters-and-traits](https://factoryboy.readthedocs.io/en/latest/introduction.html?highlight=class%20Params#altering-a-factory-s-behaviour-parameters-and-traits)

**设置原始密码：**

为了确保将密码参数设置为原始未加密值，您可以在 _create 类方法覆盖的初始保存后使用 Django 的 set_password 设置原始密码。

[https://docs.djangoproject.com/en/2.1/ref/contrib/auth/#django.contrib.auth.models.User.set_password](https://docs.djangoproject.com/en/2.1/ref/contrib/auth/#django.contrib.auth.models.User.set_password)

```
class UserFactory(factory.django.DjangoModelFactory):
    first_name = factory.Faker('first_name')
    last_name = factory.Faker('last_name')
    username = factory.Sequence(lambda n: 'demo-user-%d' % n)
    is_staff = False
    is_superuser = False
    password = 'secret'

    @factory.lazy_attribute
    def email(self):
        return '%s@test.com' % self.username

    class Meta:
        model = User

    class Params: 
        # declare a trait that adds relevant parameters for admin users
        flag_is_superuser = factory.Trait(
            is_superuser=True,
            is_staff=True,
            username = factory.Sequence(lambda n: 'admin-%d' % n),
        )

    @classmethod
    def _create(cls, model_class, *args, **kwargs):
        password = kwargs.pop("password", None)
        obj = super(UserFactory, cls)._create(model_class, *args, **kwargs)
        # ensure the raw password gets set after the initial save
        obj.set_password(password)
        obj.save()
        return obj 
```

**用法：**

```
# This admin user can log in as "admin-1", password "secret"
admin = UserFactory.create(flag_is_superuser=True)

# This regular user can log in as "userABC", password "secretABC"
user = UserFactory.create(username="userABC", password="secretABC") 
```

使用 factory-boy v2.11.1 和 Django v1.11.6

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-01-17T10:35:05.187

创建用户时我遇到了类似的问题。创建用户时的 Django 哈希密码，并且您使用没有哈希的 DjangoFactory 保存密码。登录时，Django 会检查您使用存储的哈希值发送的密码。在这一步验证失败，因为您使用未哈希密码检查未哈希密码。这是我如何在代码中解决此问题的示例：

```
from django.contrib.auth.hashers import make_password
from factory import DjangoModelFactory, Sequence

class UserFactory(DjangoModelFactory):
    class Meta:
        model = User
        django_get_or_create = ('username', 'password')

    username = Sequence(lambda n: 'somename%s' % n)
    password = Sequence(lambda p: 'mysuperpass%s' % p)

    @classmethod
    def _create(cls, model_class, *args, **kwargs):
        """Override the default ``_create`` with our custom call."""
        kwargs['password'] = make_password(kwargs['password'])
        return super(UserFactory, cls)._create(model_class, *args, **kwargs) 
```

我获取使用序列生成的密码并使用 Django`make_password`方法对其进行哈希处理。在测试中，您可以创建一个没有散列值的 var，并使用这个 var 创建一个用户。例子：

```
password = 'test123'
user = UserFactory(password=my_password) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-09-11T03:48:15.903

这样我认为您可以保留您在代码中期望的行为，这样您就有了密码的默认值，并且您可以在调用 UserFactory 时使用您想要的任何值覆盖它。

```
class UserFactory(factory.Factory):
    FACTORY_FOR = User

    username = 'jeff'
    password = 'pass'
    is_superuser = True

    @classmethod
    def _create(cls, model_class, *args, **kwargs):
        """Create an instance of the model, and save it to the database."""
        if cls._meta.django_get_or_create:
            return cls._get_or_create(model_class, *args, **kwargs)

        manager = cls._get_manager(model_class)
        return manager.create_user(*args, **kwargs) # Just user the create_user method recommended by Django 
```

# sql - SQL将秒转换为分钟到小时

> ID：15616278
> 
> 赞同：0
> 
> 时间：2013-03-25T13:34:18.730
> 
> 标签：sql, date, sql-server-2012

我有一个 SQL 查询，它计算与 IP 语音的对话总数。

```
SELECT COUNT(*) AS 'Aantal gesprekken'
,FromUri AS 'Medewerker'
,SUM(DATEDIFF(hour,InviteTime,EndTime)) AS 'Uren'
,SUM(DATEDIFF(minute,InviteTime,EndTime)) AS 'Minuten'
,SUM(DATEDIFF(second,InviteTime,EndTime)) AS 'Secondes'
   FROM [LcsCDR].[dbo].[SessionDetailsView]
WHERE FromUri LIKE '%robert%'
AND (CAST([InviteTime] AS date)) BETWEEN '2012-12-27' AND '2013-01-28'
AND MediaTypes = '16'
GROUP BY FromUri 
```

SQL Server 2012 给出了这个结果：数字、员工、小时、分钟和秒。

```
302 robert  11  518 31316 
```

但我需要得到这个结果：28 小时 19 分 56 秒。我计算了调节器 / 60 的方式，但是我怎样才能在 SQL 中做到这一点才能得到准确的结果？！

转发，非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:50:38.793

试试下面的查询

```
SELECT COUNT(*) AS 'Aantal gesprekken',FromUri AS 'Medewerker',                
concat(
  floor(SUM(DATEDIFF(second,InviteTime,EndTime))/3600),":",   //Hrs
  floor(SUM(DATEDIFF(second,InviteTime,EndTime))/60)%60,":",  //Mins
  SUM(DATEDIFF(second,InviteTime,EndTime))%60                 //Secs
  ) as Total_Hrs
   FROM [LcsCDR].[dbo].[SessionDetailsView]
WHERE FromUri LIKE '%robert%'
AND (CAST([InviteTime] AS date)) BETWEEN '2012-12-27' AND '2013-01-28'
AND MediaTypes = '16'
GROUP BY FromUri 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:36:58.703

在 Steoleary 的帮助下，我管理了一个解决方案

```
DECLARE @SecondsToConvert int
SET @SecondsToConvert = (SELECT (SUM(DATEDIFF(hour,InviteTime,EndTime) * 3600) + SUM(DATEDIFF(minute,InviteTime,EndTime) * 60) + SUM(DATEDIFF(second,InviteTime,EndTime) * 1)) AS [Seconds] 
 FROM [LcsCDR].[dbo].[SessionDetailsView]
WHERE FromUri LIKE '%robert%'
AND (CAST([InviteTime] AS date)) BETWEEN '2012-12-27' AND '2013-01-28'
AND MediaTypes = '16'
GROUP BY FromUri)

-- Declare variables
 DECLARE @Hours int
 DECLARE @Minutes int
 DECLARE @Seconds int

-- Set the calculations for hour, minute and second
SET @Hours = @SecondsToConvert/3600
SET @Minutes = (@SecondsToConvert % 3600) / 60
SET @Seconds = @SecondsToConvert % 60

SELECT COUNT(*) AS 'Aantal gesprekken'
,FromUri AS 'Medewerker'
,@Hours AS 'Uren' ,@Minutes AS 'Minuten' , @Seconds AS 'Seconden'
 FROM [LcsCDR].[dbo].[SessionDetailsView]
WHERE FromUri LIKE '%robert%'
AND (CAST([InviteTime] AS date)) BETWEEN '2012-12-27' AND '2013-01-28'
AND MediaTypes = '16'
GROUP BY FromUri 
```

结果，我现在得到了准确的时间。

```
302 robert  28  19  56 
```

28 小时 19 分 56 秒，就像它应该的那样:)

# jakarta-ee - org.hibernate.QueryException：无法解析属性（从 2 个表导入数据）

> ID：15616281
> 
> 赞同：1
> 
> 时间：2013-03-25T13:34:22.183
> 
> 标签：jakarta-ee

我想用这种方法从 2 个 sql 表中选择一个结果：

```
@Override
    public List<Object> getAll() {

        Query query = entityManager
                .createQuery("select a.idAccount, c.firstName, c.lastName, a.dateOfCreation, a.bonusPoint from account a ,customer c where c.identity=a.id_Customer and a.bonusPoint>=5000 and TO_DAYS(NOW()) - TO_DAYS(a.dateOfCreation) >=60");
        return query.getResultList();
    } 
```

我想在数据表中显示这个查询，所以我在 ManagedBean 中使用数据模型：

```
public DataModel getDataModel() {
        dataModel.setWrappedData(gIftManagementRemote.getAll());
        return dataModel;
    } 
```

在 jsf 页面中，我使用了一个数据表，但我不知道应该在“var”中输入什么：

```
<rich:dataTable rows="15" id="table" value="#{assignGiftManagement.dataModel}"
            **var**="?????"> 
```

所以当我运行这个页面时，我有这个例外：

```
javax.servlet.ServletException: java.lang.IllegalArgumentException: org.hibernate.QueryException: could not resolve property: id_Customer of: tn.esprit.bankSprint2.persistence.Account [select a.idAccount, c.firstName, c.lastName, a.dateOfCreation, a.bonusPoint from tn.esprit.bankSprint2.persistence.Account a ,tn.esprit.bankSprint2.persistence.Customer c where c.identity=a.id_Customer and a.bonusPoint>=5000 and TO_DAYS(NOW()) - TO_DAYS(a.dateOfCreation) >=60]
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:606) 
```

我应该做什么？！

# ios - 发送 POST 到 HTML 网站

> ID：15616283
> 
> 赞同：2
> 
> 时间：2013-03-25T13:34:27.210
> 
> 标签：ios, objective-c

我正在寻找将一些数据发送到我的应用程序中的 html 网站的最佳解决方案。我的程序中有一些变量采用以下格式：

```
1       var1
2       var2
3       var3
4       var4
5       var5 
```

等等。仅此而已。将其发送到网站的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:36:31.040

以下代码是用`POST`方法描述的简单示例。（*如何通过`POST`方法*传递数据）

您可以使用以下代码片段，如[本文所述](http://panditpakhurde.wordpress.com/2009/04/16/posting-data-to-url-in-objective-c/)：

在这里，我简单描述一下如何使用 POST 方法。

> **1.**使用实际用户名和密码设置帖子字符串。
> 
> ```
> NSString *post = [NSString stringWithFormat:@"&Username=%@&Password=%@",@"username",@"password"]; 
> ```
> 
> **2.**`NSASCIIStringEncoding`使用以及您需要以 NSData 格式发送的帖子字符串对帖子字符串进行编码。
> 
> ```
> NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES]; 
> ```
> 
> 您需要发送数据的实际长度。计算帖子字符串的长度。
> 
> ```
> NSString *postLength = [NSString stringWithFormat:@"%d",[postData length]]; 
> ```
> 
> **3.**创建一个包含所有属性的 Urlrequest，如`HTTP`方法、http 标头字段以及 post 字符串的长度。创建`URLRequest` 对象并初始化它。
> 
> ```
> NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease]; 
> ```
> 
> 设置要向该请求发送数据的 URL。
> 
> ```
> [request setURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://www.abcde.com/xyz/login.aspx"]]]; 
> ```
> 
> 现在，设置**HTTP**方法（*POST 或 GET*）。像在您的代码中一样编写此行。
> 
> ```
> [request setHTTPMethod:@"POST"]; 
> ```
> 
> `HTTP`使用发布数据的长度设置标题字段。
> 
> ```
> [request setValue:postLength forHTTPHeaderField:@"Content-Length"]; 
> ```
> 
> 还要设置 HTTP 标头字段的编码值。
> 
> ```
> [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Current-Type"]; 
> ```
> 
> 使用 postData设置`HTTPBody`urlrequest 的。
> 
> ```
> [request setHTTPBody:postData]; 
> ```
> 
> **4.**现在，创建 URLConnection 对象。使用 URLRequest 对其进行初始化。
> 
> ```
> NSURLConnection *conn = [[NSURLConnection alloc]initWithRequest:request delegate:self]; 
> ```
> 
> 它返回初始化的 url 连接并开始为 url 请求加载数据。**您可以使用下面的if/else**语句检查您`URL`的连接是否正确完成。
> 
>  **```
> if(conn)
> {
> NSLog(@”Connection Successful”)
> }
> else
> {
> NSLog(@”Connection could not be made”);
> } 
> ```
> 
> **5.**要接收来自 HTTP 请求的数据，您可以使用 URLConnection 类参考提供的委托方法。委托方法如下。
> 
> ```
> - (void)connection:(NSURLConnection *)connection didReceiveData:(NSData*)data 
> ```
> 
> 上述方法用于接收我们使用 post 方法获取的数据。
> 
> ```
> - (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error 
> ```
> 
> 此方法，您可以在未与服务器建立连接的情况下接收错误报告。
> 
> ```
> - (void)connectionDidFinishLoading:(NSURLConnection *)connection 
> ```
> 
> 上述方法用于连接成功后的数据处理。**

 ****另请参阅** [此](http://deusty.blogspot.in/2006/11/sending-http-get-and-post-from-cocoa.html) **和** [此](http://yuvarajmanickam.wordpress.com/2012/10/17/nsurlconnection-basics-for-ios-beginners/) **文档**以了解`POST`方法。

这是[HTTPPost 方法源代码的最佳示例。](http://kemal.co/index.php/2012/02/fetching-data-with-getpost-methods-by-using-nsurlconnection/)**

# c - 带字符串和长的 fscanf

> ID：15616284
> 
> 赞同：3
> 
> 时间：2013-03-25T13:34:27.477
> 
> 标签：c, csv, ansi, scanf

我正在尝试解析另一个函数用这个 fprintf 编写的文件：

```
fprintf(file, "DS;%s;%ld;%ld;%u\n", ds->name, ds->start, ds->period, ds->size) 
```

我正在使用这个 fscanf：

```
fscanf(file, "DS;%[^;$]s;%ld;%ld;%u", file_name, &file_start, &file_period, &file_size) 
```

读取文件名没有问题。但 file_start、file_period 和 file_size 始终为 0，即使不是预期的。

例如，字符串：

```
DS;failures;1363978800;600;144 
```

解析如下：

*   **文件名**：失败（好的）
*   **file_start** : 0 (ko)
*   **file_period** : 0 (ko)
*   **文件大小：0（ko **）****

 **我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T13:39:26.017

`"%[^;$]s"`用this替换字符串格式`%[^;$]`==>删除`s`因为`[]`替换`s`所以不再需要`s`**

# android - Android - 将pdf提供给无线打印机

> ID：15616287
> 
> 赞同：1
> 
> 时间：2013-03-25T13:34:33.667
> 
> 标签：android, printing, printers

我有一份pdf表格。现在我想

1）将此pdf文件提供给无线打印机---建议我如何执行此操作，并在可能的情况下为此提供一些示例。

无论如何支持我的 andorid 应用程序中的所有供应商打印机（意味着通用），否则我是否需要支持每台打印机（意味着从指定供应商获取 jar 文件并使用它）。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T11:10:46.360

我有类似的要求。我使用谷歌云打印做到了。代码请参考链接[https://developers.google.com/cloud-print/docs/android](https://developers.google.com/cloud-print/docs/android)

使用这种方法，首先您必须使用您的 gmail id 在云上注册您的打印机。完成后，您可以将任何 pdf 文件发送到已注册的打印机。

# hadoop - Hive：如何显示表的所有分区？

> ID：15616290
> 
> 赞同：71
> 
> 时间：2013-03-25T13:34:40.280
> 
> 标签：hadoop, hive

我有一张有 1000 多个分区的表。

" `Show partitions`" 命令只列出少数分区。

如何显示所有分区？

更新：

1.  我发现“ `show partitions`”命令只列出了 500 个分区。

2.  " `select ... where ...`" 只处理 500 个分区！

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-03-25T13:42:27.230

显示输出时 CLI 有一些限制。我建议将输出导出到本地文件：

```
$hive -e 'show partitions table;' > partitions 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2018-06-27T10:25:03.587

hive> 显示分区表名；

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-09-12T11:49:23.380

好的，我通过在上面扩展 wmky 的答案来写这个答案，假设您已经为 Metastore 而不是 derby 配置了 mysql。

```
select PART_NAME FROM PARTITIONS WHERE TBL_ID=(SELECT TBL_ID FROM TBLS WHERE TBL_NAME='<table_name>'); 
```

上面的查询为您提供了分区列的所有可能值。

***例子：***

```
hive> desc clicks_fact;
OK
time                    timestamp                                   
..                              
day                     date                                        
file_date               varchar(8)                                  

# Partition Information      
# col_name              data_type               comment             

day                     date                                        
file_date               varchar(8)                                  
Time taken: 1.075 seconds, Fetched: 28 row(s) 
```

我将获取分区列的值。

```
mysql> select PART_NAME FROM PARTITIONS WHERE TBL_ID=(SELECT TBL_ID FROM TBLS WHERE TBL_NAME='clicks_fact');
+-----------------------------------+
| PART_NAME                         |
+-----------------------------------+
| day=2016-08-16/file_date=20160816 |
| day=2016-08-17/file_date=20160816 |
....
....
| day=2017-09-09/file_date=20170909 |
| day=2017-09-08/file_date=20170909 |
| day=2017-09-09/file_date=20170910 |
| day=2017-09-10/file_date=20170910 |
+-----------------------------------+

1216 rows in set (0.00 sec) 
```

返回所有分区列。

***注意：当涉及数据库时（即，当多个数据库具有相同的 table_name 时）`JOIN`表`DBS`ON`DB_ID`***

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-08-09T05:25:33.810

您可以在“PARTITIONS”表中看到 Hive MetaStore 表、分区信息。您可以使用“TBLS”连接“分区”来查询特殊的表分区。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-17T13:37:58.110

另一种选择是通过 Thrift 协议与 Hive Metastore 通信。
如果您使用 python 编写代码，您可能会从[hmsclient](https://pypi.org/project/hmsclient/)库中受益：

蜂巢cli：

```
hive> create table test_table_with_partitions(f1 string, f2 int) partitioned by (dt string);
OK
Time taken: 0.127 seconds

hive> alter table test_table_with_partitions add partition(dt=20210504) partition(dt=20210505);
OK
Time taken: 0.152 seconds 
```

Python 命令行：

```
>>> from hmsclient import hmsclient
>>> client = hmsclient.HMSClient(host='hive.metastore.location', port=9083)
>>> with client as c:
...    all_partitions = c.get_partitions(db_name='default',
...                                      tbl_name='test_table_with_partitions', 
...                                      max_parts=24 * 365 * 3)
...
>>> print([{'dt': part.values[0]} for part in all_partitions])
[{'dt': '20210504'}, {'dt': '20210505'}] 
```

注意：`max_parts`是一个参数，不能大于 32767（java 短最大值）。

如果您同时安装了 Airflow 和`apache.hive`额外的，您可以`hmsclient`轻松创建：

```
hive_hook = HiveMetastoreHook()
with hive_hook.metastore as hive_client:
    ... your code goes here ... 
```

这似乎是一种与 Hive Metastore 进行通信的更有效的方式，而不是直接访问 DB（以及与数据库引擎无关的 BTW）。

# php - 使用 PHP 调用 netsh 命令

> ID：15616291
> 
> 赞同：0
> 
> 时间：2013-03-25T13:34:47.123
> 
> 标签：php

我正在尝试使用 shell_exec 从我的 php 应用程序执行 netsh 命令。我收到以下错误：

未找到以下命令：“interface ip set address name="Local Area Connection" static 192.168.44.133 255.255.255.0 192.168.44.1”。

我的代码如下：

```
 // Set the IP settings using netsh.
    echo shell_exec('netsh "interface ip set address name=\"Local Area Connection\" static ' . 
                    $strIPAddress . ' ' . 
                    $strSubnetMask . ' ' .
                    $strDefaultGateway . '"'); 
```

值得一提的是，我可以使用 shell_exec 执行其他应用程序，因此它似乎与我的 php.ini 设置无关。

我认为这可能是一个权限问题，因为在 netsh 中执行它时完全相同的命令会起作用，即它会更改 IP 地址并且不会出错。

我也尝试过指定 netsh.exe 的位置并像这样运行它。

请任何建议将不胜感激。

谢谢

# javascript - Highcharts 圆环图在 IE 8 中呈现为饼图

> ID：15616292
> 
> 赞同：4
> 
> 时间：2013-03-25T13:34:47.970
> 
> 标签：javascript, internet-explorer, charts, highcharts

我正在使用最新版本的 Highcharts 库。整个库看起来很酷，但是我遇到了一个非常烦人的问题：当只有一个选项可以呈现时，在 IE 8 中无法正确呈现圆环图。

```
 var chart;
        var data = [['There could be only one', 1444]];
        var containerId = 'container';
        var chartTitle = 'Equity';

        $(document).ready(function () {
Highcharts.theme = {
   colors: ["#1987c9", "#7fba00", "#f4911e", "#006D75", "#542344", "#f7403a"]
}

var highchartsOptions = Highcharts.setOptions(Highcharts.theme);

chart = new Highcharts.Chart({
    chart: {
        renderTo: containerId,
        plotBackgroundColor: null,
        plotBorderWidth: null,
        plotShadow: false,
        backgroundColor:'rgba(255, 255, 255, 0.1)'
    },
    credits:{
        enabled:false
    },
    legend:{
        align: 'right',
        verticalAlign: 'middle',
        layout: 'vertical',
        width: 170,
        itemStyle: {
            fontSize: '13px'
        }
    },
    title: {
        text: chartTitle,
        style: {
            fontSize: '17px'
        }
    },
    tooltip: {
        pointFormat: '{series.name} <b>{point.y}</b>',
        percentageDecimals: 1
    },
    plotOptions: {
        pie: {
            allowPointSelect: true,
            cursor: 'pointer',
            dataLabels: {
                enabled: true,
                formatter: function() {
                    return this.point.name +': '+ this.point.y.toLocaleString();
                },
                style: {
                    fontSize: '13px'
                }
            },
            innerSize: '40%',
            showInLegend: true
        }
    },
    series: [{
        type: 'pie',
        name: chartTitle,
        data: data
    }],
    exporting: {
        enabled:false
    }
}); 
```

});

JSFiddle：http: [//jsfiddle.net/olanet/whZnP/2/](http://jsfiddle.net/olanet/whZnP/2/)

JSFiddle 结果（启用 IE 8 兼容性或使用 IE 8）： http: [//fiddle.jshell.net/olanet/whZnP/2/show/](http://fiddle.jshell.net/olanet/whZnP/2/show/)

![IE 8 中的图表](../Images/1714a43b1afbcd7362d3f4acc65e204c.png)

![IE 9 中的图表](../Images/d6a93967ef2f6342cd57ea6376a5c288.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:58:28.883

看起来问题只有在完全渲染 arc 时才存在。如果我们删除该弧的一小部分，问题就会消失。要解决此问题： 1\. 在源代码中找到以下行： `end = mathRound((startAngleRad + (cumulative * circ)) * precision) / precision;` 2\. 在其后添加以下代码：

```
if (len == 1) {
    end -= 0.001;
} 
```

3\. 这会在一个圆圈中添加一个小间隙，但最终结果将如下所示： ![在此处输入图像描述](../Images/ac156a06344c940e1554787ce4831437.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:19:16.817

它看起来像一个错误，所以我已经报告了它[https://github.com/highslide-software/highcharts.com/issues/1642](https://github.com/highslide-software/highcharts.com/issues/1642)

# javascript - 用于时间表的 Acrobat javascript

> ID：15616293
> 
> 赞同：1
> 
> 时间：2013-03-25T13:34:49.373
> 
> 标签：javascript, acrobat

我在这里已经脱离了我的元素，我在黑暗中绊倒了每个脚趾至少两次。

我有一个从周日到周六运行的时间表表格，看起来有点像：

```
 "Button to fill in dates for the week"
    Sun "Date field" In LunchOut LunchIn Out Total
    Mon "Date field" In LunchOut LunchIn Out Total
    .
    .
    .
    Sat 
```

当我按下按钮时，我希望它填写该周的正确日期，无论我在一周中的什么时候按下它。我拼凑了一些我在网上找到的 javascript 代码片段，但我没有足够的框架来理解我在做什么......但是，奇怪的是，我觉得我在正确的轨道上，去图.

这是我到目前为止所得到的

```
 function fillDates(){
        var startDay = 0; //0=sunday, 1=monday etc.
    //    var d = now.getDay(); //get the current day
        var d = ("m/d/yy",new Date());
        var weekStart = new Date(now.valueOf() - (d<=0 ? 7-startDay:d-startDay*86400000); //rewind to start day
        var weekd1 = new Date(weekStart.valueOf() + 1*86400000); //add 1 days to get last day
        var weekd2 = new Date(weekStart.valueOf() + 2*86400000); //add 2 days to get last day
        var weekd3 = new Date(weekStart.valueOf() + 3*86400000); //add 3 days to get last day
        var weekd4 = new Date(weekStart.valueOf() + 4*86400000); //add 4 days to get last day
        var weekd5 = new Date(weekStart.valueOf() + 5*86400000); //add 5 days to get last day
        var weekEnd = new Date(weekStart.valueOf() + 6*86400000); //add 6 days to get last day
        this.getField("Sunday").value = weekStart

    //    var sun = this.getField("Sunday");
    //    sun.value = util.printd("m/d/yy",weekStart());
    //    var fld = this.getField("Monday");
    //    fld.value = util.printd("m/d/yy",new Date());
    }
    fillDates(); 
```

Acrobat 首先在“var d” now.getDay() 声明中抱怨“now”，所以我将其更改为下一行（不知道这是否可行），然后它抱怨 weekStart now.valueOf() 和我不知道那指的是什么，没有例子，早上没有时间。我的印象是 acrobat 的 javascript 可能只有一部分可用的 javascript 内容，并且“现在”不包括在内……但这是一个完全的猜测。

指导？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:41:35.623

我想到了...

```
var d = util.printd("dddd",new Date());
switch (d){
case "Sunday":
     d = 0;
     break;
case "Monday":
     d = 1;
     break;
case "Tuesday":
     d = 2;
     break;
case "Wednesday":
     d = 3;
     break;
case "Thursday":
     d = 4;
     break;
case "Friday":
     d = 5;
     break;
case "Saturday":
     d = 6;
     break;
}

var rightNow = new Date();
var msRightNow = rightNow.getTime();
var startDay = 0;
var rightNow = new Date();
var dMS = rightNow.getTime();
var weekStart = new Date(dMS - (d<=0 ? 7-startDay:d-startDay)*86400000);
var msWeekStart = weekStart.getTime();
var weekd2 = new Date(msWeekStart + 1*86400000); //add 1 days to get last day
var weekd3 = new Date(msWeekStart + 2*86400000); //add 2 days to get last day
var weekd4 = new Date(msWeekStart + 3*86400000); //add 3 days to get last day
var weekd5 = new Date(msWeekStart + 4*86400000); //add 4 days to get last day
var weekd6 = new Date(msWeekStart + 5*86400000); //add 5 days to get last day
var weekd7 = new Date(msWeekStart + 6*86400000); //add 6 days to get last day
var sunday = this.getField("Sunday");
sunday.value = util.printd("m/d/yy",weekStart);
var monday = this.getField("Monday");
monday.value = util.printd("m/d/yy",weekd2);
var tuesday = this.getField("Tuesday");
tuesday.value = util.printd("m/d/yy",weekd3);
var wednesday = this.getField("Wednesday");
wednesday.value = util.printd("m/d/yy",weekd4);
var thursday = this.getField("Thursday");
thursday.value = util.printd("m/d/yy",weekd5);
var friday = this.getField("Friday");
friday.value = util.printd("m/d/yy",weekd6);
var saturday = this.getField("Saturday");
saturday.value = util.printd("m/d/yy",weekd7); 
```

# python - 转义特定的特殊字符

> ID：15616295
> 
> 赞同：0
> 
> 时间：2013-03-25T13:34:57.720
> 
> 标签：python, django, special-characters

我有一个类似的字符串：`'SEBASTIÁN'`，当我将它保存在数据库中时，它保存为编码。在尝试通过 python 代码在前端显示它时，它会引发错误。

```
In [1]: p = "SEBASTIÁN"

In [2]: p
Out[2]: 'SEBASTI\xc3\x81N' 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T13:36:48.223

在 django 中使用 unicode 字符串。

```
u"SEBASTIÁN"
↑ 
```

请阅读：[https ://docs.djangoproject.com/en/dev/ref/unicode/](https://docs.djangoproject.com/en/dev/ref/unicode/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:25:52.573

您应该将其保存为 unicode 字符串

```
>>>p = u"SEBASTIÁN"
>>> print p
SEBASTIÁN 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T13:41:36.587

我不知道 django，但这适用于 python 3：

`>>> b'SEBASTI\xc3\x81N'.decode("utf-8", "strict")
'SEBASTIÁN'`

# c# - 在没有 UI 的情况下获取远程 URL 字符串冻结？

> ID：15616300
> 
> 赞同：0
> 
> 时间：2013-03-25T13:35:07.247
> 
> 标签：c#

我有如下方法来获取远程 URL 字符串。

```
public string FnGetURLContent(string _QsURL)
        { 
            string _Return = "";

            try
            {    
                HttpWebRequest _HttpWebRequest = (HttpWebRequest)WebRequest.Create(_QsURL);
                _HttpWebRequest.UserAgent = "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; SV1; .NET CLR 1.1.4322)";

                _HttpWebRequest.MaximumAutomaticRedirections = 4;
                _HttpWebRequest.MaximumResponseHeadersLength = 4;

                _HttpWebRequest.Credentials = CredentialCache.DefaultCredentials;
                HttpWebResponse _HttpWebResponse = (HttpWebResponse)_HttpWebRequest.GetResponse();

                Stream receiveStream = _HttpWebResponse.GetResponseStream();

                encoding format. 
                StreamReader _StreamReader = new StreamReader(receiveStream, Encoding.UTF8);

                _Return = _StreamReader.ReadToEnd();
                _HttpWebResponse.Close();
                _StreamReader.Close();

            }
            catch (WebException _WebException)
            {
                _Return = "";
            }

            return _Return;

        } 
```

当方法运行时，表单 UI 会冻结，直到方法完成处理。我该如何改进代码？

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:36:49.987

您可以使用异步[后台工作](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)程序“改进代码” 。在这里查看[课程](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T13:39:21.187

您可以使用 _HttpWebRequest.GetResponseAsync() 并在收到响应数据后在单独的线程上处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T13:39:39.360

有很多方法可以做到这一点。你可以这样做：

1.  [您可以使用 .net 4.5 ( Link](http://msdn.microsoft.com/de-de/library/vstudio/hh156513.aspx) )附带的关键字：async 和 await
2.  您可以使用 Background-Worker ( [Link](http://msdn.microsoft.com/de-de/library/system.componentmodel.backgroundworker.aspx) )
3.  您可以开始一个新线程（[链接](http://msdn.microsoft.com/en-us/library/aa645740%28v=vs.71%29.aspx)）

还有更多方法可以实现您的目标

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T13:41:01.327

这就是 node.js 的人生目的。关键是使这个异步。[对于您的情况，请参阅此处](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)的 msdn 文档。

# command-line - 用于 XML Schema (XSD) 比较的 FOSS（命令行）工具？

> ID：15616301
> 
> 赞同：4
> 
> 时间：2013-03-25T13:35:11.893
> 
> 标签：command-line, xsd, comparison

除了[这个问题](https://stackoverflow.com/questions/28433/comparing-two-xml-schemas)之外，是否有任何免费/开源 (*nix) 命令行工具可以比较和报告两个 XML 模式文档 (XSD) 之间的差异？

我正在特别寻找可以引入编程工作流的东西，以报告我无法控制的 XSD 更新，但我必须遵守/验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:13:16.357

这个问题简化为“一个免费的 XML diff 程序”，因为 XSD 文件只是一种特定类型的 XML 文件。

一种便宜的解决方案是漂亮地打印 XSD 文件，然后在漂亮的 XSD 文件上使用标准文本差异程序。这两项任务都有免费程序。

# php - Cakephp - 向导组件 - 在下一步中回显来自上一步的会话数据

> ID：15616304
> 
> 赞同：0
> 
> 时间：2013-03-25T13:35:17.453
> 
> 标签：php, cakephp

我对 Cakephp 很陌生，过去两个月我一直在开发一个项目，该项目使用帮助创建多页表单的[向导组件。](https://github.com/ProLoser/CakePHP-Wizard)

我的问题是如何将会话数据设置为上一步流程中下一步的视图。

到目前为止，我的控制器中有这个

控制器/上传样式控制器.php

```
CakePlugin::load('Wizard');

class UploadstyleController extends AppController {
    var $uses = array('Post');
        public $components = array('Wizard.Wizard');
        var $username = array();
    public function beforeFilter(){

        $this->layout = 'loggedinnorightbar';
        $this->Auth->allow('wizard','uploadstyle','styledetails','uploadcomplete');
        $this->Wizard->steps = array( 'uploadstyle','editpicture');
        $this->Wizard->wizardAction = '/uploadstyle/wizard/uploadstyle';
        $this->Wizard->completeUrl = '/uploadstyle/uploadcomplete';

        }

        public function uploadcomplete(){
        }

        public function wizard($step = null) {
        $this->Wizard->process($step);

    }
/**
 * [Wizard Process Callbacks]
 */
    public function processUploadstyle() {

        $this->Post->set($this->data);

        if($this->Post->validates()) {
            return true;

        }
        return false;
    }

    public function processEditpicture() {
        $uploadstyle = $this->Wizard->read();
        $this->set( 'uploadstyle',$uploadstyle );
        if($this->Post->validates()) {

            return true;

        }
        return false;
    } 
```

我不会为保存数据而烦恼，因为它工作正常。

在我看来uploadstyle/editpicture.ctp

```
<div class="signupwrapper" style="position:relative; width:470px; margin-top:30px;">

<?php echo $this->Form->create('Uploadstyle', array('id' => 'UploadstyleForm', 'url' => '/uploadstyle/wizard/editpicture'));

    echo $this->Form->hidden('Post.shines', array('value' =>  0));

    echo $uploadstyle['Post']['image_name'];

    ?>
    <div class="submit">
        <?php echo $this->Form->submit('Continue', array('div' => false)); ?>
        <?php echo $this->Form->submit('Cancel', array('name' => 'Cancel', 'div' => false)); ?>
    </div>

<?php echo $this->Form->end(); ?>

</div> 
```

关于 'echo $upload['Post']['image_name']' 组件中是否有我需要激活的东西，或者我在视图中错误地引用了数组？

任何帮助将不胜感激！

如果这是一个很长的问题，我很抱歉，这是我第一次在这里提问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:28:34.107

这是我的解决方案，如果这可能有助于将来使用此 cakephp 组件的任何人。

我将以下代码移至应用该向导的控制器中的函数 beforeFilter() 中。

```
 $wizardData= $this->Wizard->read();
    $this->set( 'uploadstyle',$wizardData); 
```

然后在 view.ctp 我所要做的就是回显以下内容以获得我的价值

```
echo $uploadstyle['uploadstyle']['Post']['image_name']; 
```

还有沃拉！我可以在表单的任何步骤上访问我的向导会话。

我真的希望这对有类似问题的人有所帮助。

# java - 如何表示一个垂直的 showOptionDialog 按钮

> ID：15616307
> 
> 赞同：4
> 
> 时间：2013-03-25T13:35:23.030
> 
> 标签：java, swing, layout, joptionpane

我想以垂直方式表示我的按钮，这是我的代码：

这些是我的按钮标签代码：

```
String[] choices = {"31", "63", "127", "255", "511", "1023", "2047", " ... or Quit"}; 
```

这是对话框选项：

```
while (true) {
        int response = JOptionPane.showOptionDialog(
                           null                      
                         , "Please select the sequence-length you want ...\n"   
                         , "Gold Code generator"      
                         , JOptionPane.YES_NO_OPTION  
                         , JOptionPane.PLAIN_MESSAGE  
                         , null                      
                         , choices                  
                         , "None of your business"    
                       ); 
```

所以......它可以以垂直方式而不是常见的水平方式表示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:43:36.017

JOptionPane 没有垂直按钮方向选项；您必须通过继承 JDialog 来创建自己的对话框来执行此操作。

# javascript - ng-repeat 中的 ng-click

> ID：15616308
> 
> 赞同：1
> 
> 时间：2013-03-25T13:35:23.377
> 
> 标签：javascript, angularjs

在 AngularJS 中，我有一组具有 a`title`和 a的颜色`type`。我将所有颜色显示为列表。

现在我想添加一个菜单，允许用户选择只显示特定的颜色`type`。为此，我有另一个包含颜色类型的数组。这也显示为列表。

现在我想单击一个颜色类型以将颜色列表减少到只有那些具有选定的颜色`color.type`。为此，我使用了一个过滤器：

```
<ul>
    <li ng-repeat="color in colors | filter:search">
        {{ color.title }}
    </li>
</ul> 
```

使用手动的颜色类型列表，一切正常：

```
<ul>
    <li>
        <a href="" ng-click="search.type = 'primary';">
            Primary
        </a>
    </li>               
</ul> 
```

但是，当我使用如上所述的颜色类型数组时，单击什么也不做：

```
<ul>
    <li ng-repeat="colortype in colortypes">
        <a href="" ng-click="search.type = '{{ colortype.title }}';">
            {{ colortype.title }}
        </a>
    </li>               
</ul> 
```

我想这与放置在 ng-repeat 中的 ng-click （或者可能是`=`分配的范围）有关？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T13:50:29.643

In `ngClick` directive you specify not JS code, but expression.

So you can just use `<a href="" ng-click="search.type = colortype.title">` and it will work (note: no interpolation by `{{}}`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-25T16:32:12.590

由于`ng-repeat`创建了子范围，`ng-click`因此引用了子范围而不是控制器的范围。这里有两个选项来处理这个问题。

**1）**一种快速而肮脏的方法是使用`$parent`.

改变你`ng-click`的东西是这样的：

```
<a href="#" ng-click="$parent.search.type = colortype.title;">
    {{ colortype.title }}
</a> 
```

[在 JSFiddle 中查看 $parent 解决方案](http://jsfiddle.net/zxn2hzne/2/)

如果上述模板嵌套或变为嵌套，则此方法可能会失败。然后您需要使用`$parent.$parent...`etc访问控制器范围。

**2)**更好的方法是在控制器的作用域上创建一个函数，该函数返回对该作用域的引用。由于[原型继承](https://github.com/angular/angular.js/wiki/Understanding-Scopes#javascript-prototypal-inheritance)，您可以从子范围访问控制器范围功能。

```
function ColorCtrl($scope) {      
    $scope.getColorCtrlScope = function() {
         return $scope;   
    }
    .....
 <a href="#" ng-click="getColorCtrlScope().search.type = colortype.title;">
     {{ colortype.title }}
 </a> 
```

[在 JSFiddle 中查看更好的解决方案](http://jsfiddle.net/zxn2hzne/3/)

# php - 忽略 php 标记错误

> ID：15616312
> 
> 赞同：-4
> 
> 时间：2013-03-25T13:35:36.317
> 
> 标签：php, error-handling

我不知道为什么在我的服务器上一切正常，但是当我下载代码并尝试使用 WAMP 在我的本地主机中运行它时，我收到了数千条警告和通知。

为什么我在我的服务器中没有收到这些错误，为什么我在这里收到这些错误？

有时我想知道是否留下了标记，因为`<?`它在我的托管服务器中工作正常，但在我的本地主机服务器中却没有。

无论如何要忽略 PHP 标记错误，以便它在我的服务器中运行时运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:38:35.603

在开发中，您打开所有警告和错误，例如通过`error_reporting` [http://www.php.net/manual/en/function.error-reporting.php](http://www.php.net/manual/en/function.error-reporting.php)

在实时系统中你不想要这个，所以通常它完全关闭`error_reporting(0);`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-25T13:40:08.087

你可以尝试把：

```
error_reporting(0); 
```

看看这是否有什么不同。可能是当您下载文件时，某些路径错误，或者配置文件未设置为使用您的路径在本地运行。

可能是您的站点设置为指向`http://blah.com`，现在它在本地，`http://localhost/blah`找不到任何文件。

# actionscript-3 - as3优化位图数据方法

> ID：15616317
> 
> 赞同：0
> 
> 时间：2013-03-25T13:35:39.067
> 
> 标签：actionscript-3, bitmapdata

我正在尝试优化以下方法

```
public function update() : void   {
    if (_player.playing && !_player.paused) {
        bitmapData.lock();
        bitmapData.fillRect(_clippingRect, 0);
        bitmapData.draw(_player.container, null, null, null, _clippingRect);
        bitmapData.unlock();
        invalidateContent();
    }
} 
```

谁能告诉我是否使用 copypixels 或其他方法可以优化更新功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:17:24.973

使用 copyPixels() 方法而不是 draw()。这些链接应该可以帮助您

[组合 BitmapData 场景](http://jacksondunstan.com/articles/1417)

[显示列表与 blitting - 结果！](http://blog.iainlobb.com/2010/11/display-list-vs-blitting-results.html)

# java - Java：验证jar是否签名

> ID：15616323
> 
> 赞同：3
> 
> 时间：2013-03-25T13:35:49.677
> 
> 标签：java, code-signing, jarsigner

我正在与 Jarsigner 合作。我想检查给定的 jar 是否已签名。如果用户上传 jar 文件，我想查看 jarfile 是否已签名。我尝试使用以下代码（[http://docs.oracle.com/javase/6/docs/technotes/guides/security/crypto/HowToImplAProvider.html#integritycheck](http://docs.oracle.com/javase/6/docs/technotes/guides/security/crypto/HowToImplAProvider.html#integritycheck)）

```
 // Ensure the jar file is signed.
    Manifest man = jarFile.getManifest();
    if (man == null) {
        throw new SecurityException("The provider is not signed");
    } 
```

但即使我提供了一个未签名的 jar，`man`对象也不为空，并且不会引发此异常。如何检查给定的 jar 是否刚刚签名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-05T09:41:01.303

您在引用的页面中途停了下来。您错过[了验证签名的部分](http://docs.oracle.com/javase/6/docs/technotes/guides/security/crypto/HowToImplAProvider.html#VerifySigs)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-05T09:26:15.020

假设您只想知道 jar 是否已签名（不验证签名本身），此代码段应该可以工作：

```
 boolean isJarSigned(JarFile jarFile) {
    try {
      final Manifest man = jarFile.getManifest();
      if (man == null)
        return false;

      // getEntries will contain all signed files
      return !man.getEntries().isEmpty();
    } catch (Throwable t) {
      t.printStackTrace();

      return false;
    } finally {
      // Make sure the jarFile gets always closed
      try {
        if (jarFile != null)
          jarFile.close();
      } catch (IOException e) {
        e.printStackTrace();
      }
    }
  } 
```

顺便说一句，我知道我的答案迟到了 3 年，但我自己也在拼命地寻找它，所以我想我不妨发布我的解决方案。

# hibernate - 为什么不推荐使用 hibernate org.hibernate.classic.Validatable 接口？

> ID：15616326
> 
> 赞同：2
> 
> 时间：2013-03-25T13:36:04.577
> 
> 标签：hibernate

我正在寻找在保存之前验证我的实体的巧妙方法。我在 Hibernate 的早期版本中遇到了 Validatable 接口。知道为什么不推荐使用吗？有什么好的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T18:30:14.160

从[迁移指南](https://community.jboss.org/wiki/HibernateCoreMigrationGuide30)，

> Lifecycle 和 Validatable 接口 - Lifecycle 和 Validatable 接口在 Hibernate3 中已弃用，并移至 org.hibernate.classic 包。Hibernate 团队不认为让域模型类依赖于特定于持久性的 API 是一种好的做法。Hibernate3 应用程序应该使用 Interceptor 或新的 Hibernate3 事件框架。现有应用程序可能会继续使用 Lifecycle 和 Validatable。

[它在Hibernate 4](https://community.jboss.org/wiki/HibernateCoreMigrationGuide40)中被删除。见第 4 点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T13:40:35.427

它可能已被弃用，因为现在有一个 bean 验证标准：[Hibernate Validator](http://www.hibernate.org/subprojects/validator.html)，[JSR-303](http://jcp.org/en/jsr/detail?id=303)的实现。它是 Java EE 6 标准的一部分。

# regex - 崇高文本片段替换正则表达式

> ID：15616329
> 
> 赞同：1
> 
> 时间：2013-03-25T13:36:19.453
> 
> 标签：regex, sublimetext2, code-snippets

在 Sublime Text 2 中，我试图创建一个片段，它将选择的每一行包装在标签中，并将完整的选择包装在包含标签中。

```
<container>
    ${SELECTION/^.*/<li>$MATCH<\/li>/g}
</container> 
```

它不工作，但我不知道为什么！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T14:03:06.320

这应该可以解决问题：

```
<snippet>
    <content><![CDATA[${SELECTION/^.*/<li>$0<\/li>/g}]]></content>
    <scope>text.html</scope>
    <description>wrap with li</description>
</snippet> 
```

1.  您没有将代码段包装在 CDATA 中（至少在上面的示例中）。不幸的是，崇高的文字对此非常讲究:(
2.  替换语法可能有点时髦。`$MATCH`不在这里工作。最好对组使用 perl 样式 $0 $1 $2 等。

我发现（到目前为止）处理 Sublime Snippets 和正则表达式的最佳指南在[非官方文档中](http://docs.sublimetext.info/en/latest/extensibility/snippets.html)

此外，请确保按照格式将代码段放入`packages/User`目录中。`mysweetsnippet.sublime-snippet`

# opengl - 关于 OpenGL 的数据组织

> ID：15616334
> 
> 赞同：0
> 
> 时间：2013-03-25T13:36:30.350
> 
> 标签：opengl, graphics, shader, render

场景中的每个模型都有 1 个顶点数组对象是否合适？您允许拥有多少个 VAO？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:40:33.623

> 场景中的每个模型都有 1 个顶点数组对象是否合适？

是的，但通常将共享属性的低顶点数对象的集合收集到单个 VAO 中。

> 您允许拥有多少个 VAO？

GLuint 可以代表任意数量。

# redirect - 批处理文件创建

> ID：15616336
> 
> 赞同：1
> 
> 时间：2013-03-25T13:36:31.757
> 
> 标签：redirect, batch-file, file-io

我有两个exe。每个exe都有两个参数，一个是输入，另一个是输出。我需要使用这两个 exe 创建一个批处理文件，这样第一个 exe 的输出就是第二个 exe 的输入。作为用户，我应该给出第一个 exe 的输入文件名和第二个 exe 的输出文件名

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-05T06:40:03.817

假设您有以下文件：Input.dat、1st.exe、Transitional.dat、2nd.exe、Output.dat。它们应该以以下方式启动：

```
1st.exe Input.dat Transitional.dat  
2nd.exe Transitional.dat Output.dat 
```

正确的？
如果是这样，您所要做的就是在系统 tmporary 文件夹中创建 ouptut 文件并在结束前将其删除：

```
1st.exe %1 %TEMP%\Transitional.dat  
2nd.exe %TEMP%\Transitional.dat %2  
del /y  %TEMP%\Transitional.dat 
```

但是，如果您的 1st.exe 是将结果转储到屏幕而不是文件的命令行应用程序，则必须将其重定向到文件中：

```
1st.exe %1 > %TEMP%\Transitional.dat  
2nd.exe %TEMP%\Transitional.dat %2  
del /y  %TEMP%\Transitional.dat 
```

用户必须按以下方式调用此批次：

```
BatFile.bat Input.dat Output.dat 
```

这与您的答案接近吗？

# c# - 从具有数值的字符串中检测文化信息

> ID：15616341
> 
> 赞同：0
> 
> 时间：2013-03-25T13:36:41.330
> 
> 标签：c#, globalization, cultureinfo

这是一个**List< 字符串 > lstA**；

**lstA**可能包含值（数据类型**字符串**），例如： **第一个示例**

> 1
> 
> 1.00
> 
> 1000.01
> 
> 1,002.98
> 
> …………

或者**listA**可能包含如下值：**第二个示例**

> 1
> 
> 1,00
> 
> 1000,01
> 
> 1.002,98
> 
> …………

我正在尝试将此列表传递给一个方法，它会返回一个字符串“german”或“us”

我正在尝试这个：

```
private static string ReturnCulture(List<string> lst)
    {
        string cull = "";
        foreach (string s in lst)
        {
            if (s.Contains(".") && s.Contains(","))
            {
                cull = "german";
                break;
            }
            else if (!s.Contains(".") && s.Contains(","))
            {
                cull = "german";
            }
            else if (s.Contains(".") && !s.Contains(","))
            {
                cull = "us";
                break;
            }
            else if (!s.Contains(".") && !s.Contains(","))
            {
                continue;
            }
        }

        return cull;
    } 
```

对于前 3 个值，这可以正常工作。但是当我得到（**1,002.98**）或（“1.002,98”）时，这两个都符合德国条件。

如何解决这个问题？全球化阶级能轻易地发现它是哪种文化吗？**lstA**的给定示例确实是随机的。但它将作为**第一个示例**或**第二个**示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:49:39.230

如果您尝试仅解析几种文化的数量，您可能会发现使用带有文化格式参数的 double.parse 会很有用。请参阅[具有文化格式的双重解析](https://stackoverflow.com/questions/5109816/double-parse-with-culture-format)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:53:35.083

您不能明确地创建一个方法，给定一组字符串将能够告诉您字符串的格式是英语还是德语。您可以编写一个方法来告诉您是否可以将所有字符串解析为英语或德语。由于您预计解析失败，因此您应该使用[Double.TryParse](http://msdn.microsoft.com/en-us/library/system.double.tryparse.aspx)，如下所示：

```
private static bool AreAllStringsValidNumberRepresenationsForCulture(CultureInfo ci, List<string> lst)
{
    foreach (string s in lst)
    {
        double number;
        if (!Double.TryParse(s, NumberStyles.Any, ci, out number)
        {
            return false;
        }
    }
    return true;
} 
```

采用显式输入而不是依赖启发式总是更好，所以如果有任何方法可以强制标准数字表示，你会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-21T05:08:30.713

您可以尝试使用两种文化来解析它们，

例如，

```
public static string GetCulture(this string value)
{
    var doubleValue = default(double);
    var germanCultureInfo = new CultureInfo("de-DE");
    var englishCultureInfo = new CultureInfo("en-US");
    if (double.TryParse(value, NumberStyles.AllowDecimalPoint, germanCultureInfo, out doubleValue))
    {
        return "german";
    }
    else if (double.TryParse(value, NumberStyles.AllowDecimalPoint, englishCultureInfo, out doubleValue))
    {
       return "us";
    }
    return string.Empty; ;
} 
```

# validation - 唯一实体 - Symfony2

> ID：15616342
> 
> 赞同：0
> 
> 时间：2013-03-25T13:36:43.180
> 
> 标签：validation, symfony

唯一实体对我很有用，但有一个问题。我有用户和类别。每个类别都有 user_id，以便更清楚哪个用户创建了它以及它属于哪个用户。我想要的是每个用户的类别都是唯一的 - 所以一个用户不能有两个同名的类别，但两个不同的用户可以有完全相同的类别。

有没有办法通过唯一实体之类的更好的方式实现这一点，或者最好编写一个函数来按名称和用户计算类别数量并将其用于验证 - 如果已经有一个具有给定名称的类别对于这个用户 - 打印一条消息，否则创建新类别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T13:43:23.957

您可以为类别表中的 name 和 user_id 列创建唯一索引。

就像是：

```
* @ORM\Table(name="categories",
*            uniqueConstraints={@ORM\UniqueConstraint(name="name_user_id__idx", 
*                                                     columns={"name", "user_id"})}) 
```

并将这些字段名称传递给`UniqueEntity`

# jqgrid - 如何仅为编辑网格窗口列设置只读属性？

> ID：15616343
> 
> 赞同：0
> 
> 时间：2013-03-25T13:36:46.093
> 
> 标签：jqgrid, struts2

我正在使用**struts2**和**hibernate**做我的项目，我正在使用**jqgrid**进行数据显示。现在我想在 editGrid 窗口上为 id 字段设置**只读属性。**但不适用于添加窗口。我的示例代码

```
<sjg:grid id="gridtable"
    caption="Customer List"
    dataType="json"
    href="%{remoteurl}"
    pager="true"
    gridModel="customerList"
    rowNum="10"
    autowidth="true"
    editurl="%{editurl}"
    editinline="false"
    navigator="true"
    navigatorAdd="true"
    navigatorAddOptions="
        {
            viewPagerButtons:false,
            recreateForm:true,
            checkOnUpdate:true,
            closeAfterAdd:true
        }"
    navigatorDelete="true"
    navigatorEdit="true"
    navigatorRefresh="true"
    navigatorSearch="true"
    navigatorEditOptions="
        {
            viewPagerButtons:false,
            recreateForm:true,
            checkOnUpdate:true,
            closeAfterEdit:true
        }"
    navigatorDeleteOptions="{ checkOnUpdate:true}"
    navigatorViewOptions="
        {
            viewPagerButtons:false,
            recreateForm: true,
            checkOnUpdate: true
        }"
    navigatorSearchOptions="{sopt:['eq','ne','lt','gt','in','ni','cn','nc']}"
    navigatorView="true"
    rownumbers="true"
    rowList="10,20,30"
    viewrecords="true"
>
<sjg:gridColumn
    name="id"
    align="left"
    key="true"
    index="id"
    title="Customer id"
    sortable="false"
    editable="true"
    editrules="{
        number: true,
        required: true
    }"
    edittype="text" />
<sjg:gridColumn
    name="custName"
    align="left"
    index="custName"
    title="Customer Name"
    sortable="false"
    editable="true"
    edittype="text" />
    ......
</sjg:grid> 
```

我可以在**navigatorEditOption**中调用`beforeShowForm`和函数吗？`afterShowForm`

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:55:26.930

我不是 struts2 defeloper，所以我的建议可能不正确。不过，您可以尝试直接在**navigatorEditOption**中包含内联 JavaScript 代码：

```
navigatorViewOptions="
                {
                    viewPagerButtons:false,
                    recreateForm: true,
                    checkOnUpdate: true,
                    beforeShowForm: function ($form) {
                        alert("inside of beforeShowForm function");
                    }
                }" 
```

它看起来接近文档[页面中的代码。](https://code.google.com/p/struts2-jquery/wiki/NavigatorButtons)我希望它会奏效。

或者，您可以定义一些**全局**函数，例如

```
<script type="text/javascript">
    var myBeforeShowForm = function ($form) {
            alert("inside of beforeShowForm function");
        };
</script> 
```

`myBeforeShowForm`并在**navigatorEditOption**中使用 global ：

```
navigatorViewOptions="
                {
                    viewPagerButtons:false,
                    recreateForm: true,
                    checkOnUpdate: true,
                    beforeShowForm: myBeforeShowForm
                }" 
```

（与[页面](https://code.google.com/p/struts2-jquery/wiki/SearchGrid)`datePick`上的函数代码对比）**

# php - connectionDidFinishLoading 使用某些 php 脚本调用了两次

> ID：15616344
> 
> 赞同：-1
> 
> 时间：2013-03-25T13:36:46.630
> 
> 标签：php, objective-c

我有一个很好的http请求工作类，它以一个很好用的库的形式出现。但是现在最近我在做一个项目，服务器端的人合作得不是很好或者懒得检查。

我认为问题更多的是 php，是否有可能以任何方式返回 2 次？

`connectionDidFinishLoading`发生的情况是，对于我在空中收到的某些请求`array[]`，然后我收到带有正确输出的第二个响应。出于这个原因，我的应用程序崩溃了，我不知道确切的位置，因为它结合了一些`cpp`将事件发送到其他地方。我通过忽略`[]`响应来解决这个问题，但现在它变得很难看，因为有时 a`[]`是一个很好的响应。我也可以解决此问题，但随后将成为自定义库而不是库。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-26T10:54:31.577

看来这毕竟是我的错误，但不是我发布的脚本。

# sql-server - sql数据库部署

> ID：15616345
> 
> 赞同：-3
> 
> 时间：2013-03-25T13:36:47.630
> 
> 标签：sql-server

我从未部署过任何 Windows 应用程序，，，这是我的第一个...

我的问题是如何在客户端部署一个带有 sql 数据库的 Windows 应用程序。如果 sql server 2005 安装在客户端 pc 上，那么 ..客户端不必做任何事情，只运行 exe 文件。我想我可以通过附加来做到这一点它通过代码...但我也希望客户端不应该能够看到我的数据库...是否有可能实现...

我的意思是说 vb.net 代码可以在不附加到 sql server managemt studio 的情况下从数据库中写入和读取

对不起，如果我的英语不好...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:47:22.113

您可以随应用程序重新分发 SQL Server Express。阅读[在应用程序中嵌入 SQL Server 2008 Express](http://msdn.microsoft.com/en-us/library/dd981032%28v=sql.100%29.aspx)。所有其他版本都必须由您的客户和您的应用程序提供，在安装期间，仅请求托管 SQL Server 实例的位置（连接字符串）。使用您使用的任何选项，数据库都将属于客户，他将完全控制内容。

> 但我也希望客户端不能看到我的数据库

如果您选择在客户端位置使用数据库，则这是**不可能的。**您唯一的选择是托管数据库并让客户端远程连接到托管数据库。选项是[SQL Azure Database 、](http://www.windowsazure.com/en-us/home/features/data-management/)[在 Azure VM 中](http://www.windowsazure.com/en-us/home/features/virtual-machines/)托管SQL 、[Amazon RDS](http://aws.amazon.com/rds/)或类似的。

# android - TextWatcher 不工作，怎么回事

> ID：15616349
> 
> 赞同：3
> 
> 时间：2013-03-25T13:36:51.070
> 
> 标签：android, listener, textwatcher

onCreate 方法中 TextWatcher 的实现不起作用，我尝试使用虚拟键盘和硬件键盘进行文本输入，还尝试了模拟器和真实设备上的代码。似乎没有任何效果。

我什至在布局中重命名了 EditTexts 并清理了项目，重新构建它，没有希望

任何想法？

这是代码

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.remarks);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
    Intent i = getIntent();
    Current_Language = i.getStringExtra("Lang");
    Q1Rate = i.getFloatExtra("Q1Rate", 0f);
    Q2Rate = i.getFloatExtra("Q2Rate", 0f);
    Q3Rate = i.getFloatExtra("Q3Rate", 0f);
    Q4Rate = i.getFloatExtra("Q4Rate", 0f);
    Q5Rate = i.getFloatExtra("Q5Rate", 0f);
    LoadSettings();
    NextBtnState();
    final EditText edt_PhoneNo     = (EditText) findViewById(R.id.edt_Remarks_PhoneNo);
    final EditText edt_Suggestions = (EditText) findViewById(R.id.edt_Remarks_Suggestion);
    edt_Suggestions.addTextChangedListener(new TextWatcher() {
        public void onTextChanged(CharSequence s, int start, int before, int count) {
        }
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        }
        public void afterTextChanged(Editable s) {
            ShowToast("I Am Here Firas");
            resetTimeout();
        }
    });
    edt_PhoneNo.addTextChangedListener(new TextWatcher() {
        public void onTextChanged(CharSequence s, int start, int before, int count) {
        }
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        }
        public void afterTextChanged(Editable s) {
            ShowToast("I Am Here Firas");
            resetTimeout();
        }
    });
} 
```

这是我的 ShowToast

```
public void ShowToast (String Msg) {
    Context context = getApplicationContext();
    CharSequence text = Msg;
    int duration = Toast.LENGTH_LONG;
    Toast toast = Toast.makeText(context, text, duration);
    toast.setGravity(Gravity.CENTER|Gravity.CENTER, 0, 0);
    toast.show();
} 
```

这是布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/LinearLayout1"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:background="@color/Azure1"
android:focusable="true"
android:focusableInTouchMode="true"
android:gravity="center_vertical"
android:orientation="vertical" >

<GridLayout
    android:id="@+id/Grid1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="top"
    android:columnCount="4"
    android:rowCount="4" >

    <Space
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <ImageView
        android:id="@+id/img_ClientLogo"
        android:layout_width="275dp"
        android:layout_height="145dp"
        android:layout_gravity="left"
        android:src="@drawable/general_client_logo" />

    <TextView
        android:id="@+id/tv_CustomerSatisfactionSurvey"
        android:layout_width="948dp"
        android:layout_height="103dp"
        android:layout_column="3"
        android:layout_gravity="center"
        android:layout_margin="10dp"
        android:layout_row="0"
        android:gravity="center"
        android:text="@string/Customer_Satisfaction_Survey"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="@color/OrangeRed2"
        android:textSize="50sp" />
</GridLayout>

<RelativeLayout
    android:id="@+id/ly_Stars"
    android:layout_width="match_parent"
    android:layout_height="379dp">

    <EditText
        android:id="@+id/edt_Remarks_PhoneNo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/tv_Remarks_PhoneNo"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="15dp"
        android:ems="10"
        android:hint="@string/Mobile_No"
        android:inputType="phone" >

        <requestFocus />
    </EditText>

    <TextView
        android:id="@+id/tv_Remarks_Suggestions"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/edt_Remarks_PhoneNo"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="25dp"
        android:text="@string/Any_Comment"
        android:textSize="25sp"
        android:textStyle="bold" />

    <EditText
        android:id="@+id/edt_Remarks_Suggestion"
        android:layout_width="590dp"
        android:layout_height="wrap_content"
        android:layout_below="@+id/tv_Remarks_Suggestions"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="15dp"
        android:ems="10"
        android:hint="@string/suggestion"
        android:inputType="textCapSentences|textMultiLine"
        android:singleLine="false" />

    <TextView
        android:id="@+id/tv_Remarks_PhoneNo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="50dp"
        android:gravity="center"
        android:text="@string/Phone_Account_No"
        android:textSize="25sp"
        android:textStyle="bold" />

</RelativeLayout>

<RelativeLayout
    android:id="@+id/ly_NextPrevios"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="bottom" >

    <Button
        android:id="@+id/btn_Next"
        style="@style/ButtonText"
        android:layout_width="250dp"
        android:layout_height="100dp"
        android:layout_above="@+id/tv_PoweredBy"
        android:layout_alignParentRight="true"
        android:layout_marginBottom="10dp"
        android:layout_marginRight="45dp"
        android:background="@drawable/btn_blue"
        android:drawableRight="@drawable/arrow_right"
        android:onClick="Next_Page"
        android:text="@string/btn_Next" />

    <TextView
        android:id="@+id/tv_PoweredBy"
        android:layout_width="772dp"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:gravity="center"
        android:text="@string/powerd_by_prime"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textSize="16sp" />

    <Button
        android:id="@+id/btn_Previous"
        style="@style/ButtonText"
        android:layout_width="250dp"
        android:layout_height="100dp"
        android:layout_above="@+id/tv_PoweredBy"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="10dp"
        android:layout_marginLeft="45dp"
        android:background="@drawable/btn_blue"
        android:drawableLeft="@drawable/arrow_left"
        android:onClick="Previous_Page"
        android:text="@string/btn_Previous" />

    <ImageView
        android:id="@+id/img_help"
        android:layout_width="48dp"
        android:layout_height="48dp"
        android:layout_alignBottom="@+id/btn_Previous"
        android:layout_centerHorizontal="true"
        android:onClick="ShowHelpDialog"
        android:src="@drawable/help_64" />

    <TextView
        android:id="@+id/tv_Steps"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/progressBar1"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="10dp"
        android:text="@string/Step6of6"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <ProgressBar
        android:id="@+id/progressBar1"
        style="?android:attr/progressBarStyleHorizontal"
        android:layout_width="650dp"
        android:layout_height="20dp"
        android:layout_above="@+id/img_help"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="10dp"
        android:max="6"
        android:progress="6"
        android:progressDrawable="@drawable/my_progress" />

</RelativeLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T23:49:55.793

EditText 的命名与另一个布局冲突，所以我在两个布局中重命名了 EditTexts，然后清理了项目，现在一切正常。Google 必须对不同布局上 View 的命名冲突做点什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:17:02.893

尝试将上下文从 getApplicationContext() 更改为 ActivityName.this

# objective-c - 指向 URL 的超链接文本在 iPad 上不起作用

> ID：15616352
> 
> 赞同：0
> 
> 时间：2013-03-25T13:37:03.960
> 
> 标签：objective-c

我正在尝试将我的应用程序上的用户链接到某个网站，但我似乎无法让它工作，一直在寻找几个小时但仍然没有解决方案。

```
-(IBAction)hypertext:(id)sender
{
    NSLog(@"This should load hypertext");
    [[UIApplication sharedApplication]openURL:[NSURL URLWithString:@"www.youtube.com"]];
} 
```

这是我的代码，它链接到一个按钮，由于 nslog，我知道它正在运行。但它不会去 url，也不会去 safari 来加载它。我究竟做错了什么？感谢所有的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:39:34.563

我认为，您应该添加协议：`[NSURL URLWithString:@"**http://**www.youtube.com"]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:44:31.527

NSLog(@"这应该加载超文本");

`[[UIApplication sharedApplication]openURL:[NSURL URLWithString:@"http://www.youtube.com"]]`;

它工作正常..我检查了。

# .htaccess - htaccess - 未指定文件时出现异常

> ID：15616359
> 
> 赞同：1
> 
> 时间：2013-03-25T13:37:34.930
> 
> 标签：.htaccess, mod-rewrite

我正在尝试创建一个 .htaccess，其中 www.domain.com/?get=1234 被重写为 www.domain.com/1234 ，但 style.css、logo.png 等文件除外。

这适用于所有文件，但我不知道如何为 www.domain.com/ 目录 index.php 文件设置例外，并且简单地将 index.php 作为例外强制用户将 index.php 包含在我当然不喜欢的网址。

提前致谢。我的 .htaccess 到目前为止：

```
RewriteEngine On

# Exceptions

RewriteCond %{REQUEST_URI} !/favicon.ico
RewriteCond %{REQUEST_URI} !/index.php
RewriteCond %{REQUEST_URI} !/style.css
RewriteCond %{REQUEST_URI} !/logo.png

# get Rewriting

RewriteRule ^([^/]*)$ /?get=$1 [L]

# www Rewriting

RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:53:59.737

如果你想重写所有东西，不包括真正的文件和目录，你可以使用这两个[`RewriteCond`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)作为异常保护

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:46:24.077

所以，如果我想对了......你只是想将“www.domain.com”重定向到“www.domain.com/index.php”对吗？

如果插入怎么办

```
RewriteRule ^$ index.php [L] 
```

作为**#get 重写**区域的第一行？

# javascript - 根据用户输入的输入字段数

> ID：15616361
> 
> 赞同：-1
> 
> 时间：2013-03-25T13:37:42.273
> 
> 标签：javascript

我有一个表单，它会询问用户输入字段的数量，然后将输入附加到表单中。我已经使用 JavaScript 开发了该功能。

问题是它第一次可以正常工作。如果我再次从选择标签中选择另一个数字，它会将输入字段的数量附加到先前的输入中。

例子：

*   如果我首先选择 4 个输入字段，它将显示 4 个输入字段。
*   如果我再次从选择标签中选择 2，它将添加另外两个输入字段。

所以总共有6个输入字段。我不想要那个。如果我选择 4，它应该是 4。如果我再次选择 2，它应该是 2，而不是 6。这是我的代码：

```
function obj(){

    var a=document.getElementById('no_of_obj').value; //select tag value(1 to 6)
    var b=document.getElementById('objBlock') //this is the container
    var i=0;

    while(i<a){
        var txt=document.createElement('input');
        txt.type="text";
        txt.id="obj"+i;
        txt.style.height="30px";

        b.appendChild(txt);
        i++;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T13:41:53.403

`objBlock`您可以在添加新`input`元素之前清除容器，使用：

```
b.innerHTML = ''; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T13:47:41.740

尝试这个

```
function obj(){

    var a=document.getElementById('no_of_obj').value;//select tag value(1 to 6)
    var b=document.getElementById('objBlock')//this is the container
    var i=0;

    while(b.children.length < a){
        var ct = document.createElement('div');
        var txt=document.createElement('input');
        txt.type="text";
        txt.id="obj"+i;
        txt.style.height="30px";
        ct.appendChild(txt);
        b.appendChild(ct)
    }

    while(b.children.length > a){
        b.removeChild(b.children[b.children.length - 1]);
    }
} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/UxQAs/2/)

使用 jQuery

```
$(function(){
    var $ct = $('#objBlock');
    $('#no_of_obj').change(function(){
        var count = $(this).val(), counter = count - $ct.children().length;

        while(counter-- > 0){
            $('<div><input class="input-xlarge"/></div>').appendTo($ct);
        }

        $ct.children(':gt(' + (count - 1) + ')').remove();
    });
}) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/UxQAs/4/)

# opencv - libgcc_s_dw2-1.dll 丢失使 OpenCV 和 Qt 5 程序无法启动

> ID：15616363
> 
> 赞同：0
> 
> 时间：2013-03-25T13:38:04.557
> 
> 标签：opencv, qt5, dll

我的项目需要 opencv 库 2.3，我使用的是 Qt 5.0.1。但是，构建后，程序将无法启动。我尝试了 Dependency Walker 并从 C:\Qt\Qt5.0.1\5.0.1\mingw47_32\bin 添加了所有 Qt 的 dll，但在我的计算机中找不到**libgcc_s_dw2-2.dll 除外。**Dependency Walker 说 libgcc_s_dw2-1.dll 是一些 opencv dll 所需要的，例如 libopencv_core230.dll。我尝试了[这里](https://stackoverflow.com/a/9334351/957121)提供的dll ，但得到一个关于程序在libopencv_imgproc230.dll上找不到输入入口__gxx_personality_v0的错误。有什么建议吗？:)

我已经添加了声明

```
QMAKE_LFLAGS += -static -static-libgcc -static-libstdc++ -lpthread 
```

进入 .pro 文件，不起作用:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T09:45:22.273

最后，让它工作。

上面的陈述是错误的，因为 -lpthread 是“没有用的”。我把它改成了这个：

```
QMAKE_LFLAGS += -static-libgcc -static-libstdc++ 
```

似乎 -lpthread 应该与它旁边的 -static 一起使用，即。-静态-lpthread。但是，这会导致编译器找不到opencv库的另一个问题。所以我只是删除它们并将 libpthread-1.dll 添加到 .exe 文件夹中。

非常感谢[这篇文章。](https://stackoverflow.com/a/4703059/957121)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T19:42:26.970

如果它不起作用，请尝试使用“vc9”目录中的.lib。

# oracle - 表格和报告 10g 到 11g

> ID：15616369
> 
> 赞同：1
> 
> 时间：2013-03-25T13:38:30.873
> 
> 标签：oracle, oracle10g, oracle11g, oracleforms, oraclereports

我需要将 Forms an Reports 从 10g 迁移到 11g。我需要知道是否有人做过类似的事情以及在此过程中我可能会发现什么问题？也许你们中的一些人有有用的链接或信息要分享？大多数关于将 6i 迁移到 11g 的文档。所以我很难发现我需要什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:12:52.883

有一些区别，这取决于你使用什么。如果您使用 10g 中的一些已弃用的东西，现在可以将其删除。但是我已经迁移了4000多个表格，并没有发现太多奇怪的东西。但是，如果您也从 oracle DB 10 转到 oracle DB 11，您可能会遇到一些奇怪的行为。我想说此时只需迁移运行所有表单并更改一些不起作用的东西，这不会太多必须改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T14:45:13.750

我在将 Oracle 10g 迁移到 11g 时遇到了这些问题，主要问题来自 Oracle 6i，因为它仍然用于迁移并且所有形式都必须在 6i、10g 和 11g 中工作：

1.  RUN_PRODUCT 已从 Oracle 11g 中删除。此过程在 Oracle 10g 中处于后台。
2.  在 Oracle 11g 中取消了 CHART 类型。此字段类型在 Oracle 10g 中处于后台。
3.  一些 10g PLL 冻结了 Forms Builder 11g。我读到 11.1.0.7 是针对此问题的错误修复，但我使用 11.1.2 仍然遇到同样的问题，所以我为这个问题创建了解决方法。

# iphone - iOS 基于位置的提醒

> ID：15616371
> 
> 赞同：0
> 
> 时间：2013-03-25T13:38:37.683
> 
> 标签：iphone, ios, core-location, reminders, ekeventkit

我正在制作一个应用程序，该应用程序具有允许用户创建基于位置的通知以在他们到达/离开某个位置时打开/关闭应用程序的功能。

创建提醒（如第一张图片所示），但不会在到达/离开时触发。 ![在此处输入图像描述](../Images/58b166360a5cc18a52ba04834bdfdabe.png)

另一方面，如果用户单击提醒，它会添加地址（如图 2 所示）并从那里触发 ![在此处输入图像描述](../Images/e26b0496ef972d20886dedb521c7b762.png)

我想知道是否有办法让提醒应用程序识别地址或任何其他建议，这可能有助于我解决这个特殊问题。

先感谢您，

BR，韩国

我使用的代码是：

```
EKReminder *reminder = [EKReminder reminderWithEventStore:_eventStore];
reminder.calendar = [_eventStore defaultCalendarForNewReminders];

EKStructuredLocation *location;
NSError *error = nil;
EKAlarm *alarm = [[EKAlarm alloc]init];
reminder.title = @"Turn off Test App";
location = [EKStructuredLocation locationWithTitle:self.addressTextField.text];
[self.addressTextField resignFirstResponder];
alarm.proximity = EKAlarmProximityEnter;
alarm.structuredLocation = location;
[reminder addAlarm:alarm];

[_eventStore saveReminder:reminder commit:YES error:&error]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:51:04.150

问题是您没有设置 EKStructuredLocation`geolocation`和`radius`. 它只有一个标题。这还不足以告诉警报它到底应该在哪里！

例子：

```
location.geoLocation =
    [[CLLocation alloc] initWithLatitude:latit longitude:longit];
location.radius = 10*1000; // metres 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T19:33:39.270

请参阅`CLLocationManager -startMonitoringForRegion:`和`CLRegion`类参考。

# android - Google Ads 刚刚停止加载？获取 JS: Uncaught ReferenceError: AFMA_getSdkConstants is not defined

> ID：15616376
> 
> 赞同：3
> 
> 时间：2013-03-25T13:38:50.060
> 
> 标签：android, admob

我正在开发一个必须在其中展示广告的应用程序。当我放置广告时，它们工作得很好。大约一周后，他们才停止加载。检查日志猫发现我遇到了以下异常：

```
JS: Uncaught ReferenceError: AFMA_getSdkConstants is not defined (http://media.admob.com/:1) 
```

我不知道突然发生了什么。它在 4.x Android 操作系统上运行良好。但现在不是。任何帮助如何解决这个问题表示赞赏。

以下是我在 xml 中使用的代码：

```
<com.google.ads.AdView
    android:id="@+id/adView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    ads:adSize="BANNER"
    android:layout_centerHorizontal="true"
    ads:adUnitId="My ID"
    ads:loadAdOnCreate="true"
    android:layout_alignParentBottom="true" /> 
```

在清单中我有：

```
<activity android:name="com.google.ads.AdActivity" 
    android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" /> 
```

谢谢！

# google-maps - 用省份绘制世界地图

> ID：15616377
> 
> 赞同：1
> 
> 时间：2013-03-25T13:38:52.463
> 
> 标签：google-maps, google-visualization

我想与美国各州和加拿大各省一起绘制世界地图。默认情况下，美国和加拿大在地图上显示为一个没有国界的国家，如下所示：http: [//upload.wikimedia.org/wikipedia/commons/1/11/World_map_ICC_member_states.png](http://upload.wikimedia.org/wikipedia/commons/1/11/World_map_ICC_member_states.png) 我想制作这样的地图：http: [//upload.wikimedia.org/wikipedia/commons/b/b6/MAP_OF_WORLD_with_states_Booksworm_travels.png](http://upload.wikimedia.org/wikipedia/commons/b/b6/MAP_OF_WORLD_with_states_Booksworm_travels.png)

我正在尝试将分辨率更改为“省”。不幸的是，它没有用。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T00:27:06.250

目前在 Google Geocharts 中没有执行此操作的方法，因为没有多个国家/地区的省分辨率地图（SVG 不存在）。你可以去加拿大，也可以去美国，但不能两者兼而有之。

关于这些坏消息我很遗憾。

# python - Python网络带宽监视器

> ID：15616378
> 
> 赞同：9
> 
> 时间：2013-03-25T13:38:59.620
> 
> 标签：python

我正在用python开发一个程序，一个元素告诉用户自程序打开以来他们使用了多少带宽（不仅在程序内，而且在程序打开时定期浏览网页）。输出应显示在 GTK 中

是否存在任何东西，如果没有，您能否指出我正确的方向。似乎我必须编辑一个现有的代理脚本，如 pythonproxy，但我看不出我将如何使用它。

谢谢，

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2016-04-04T08:12:50.343

对于我的任务，我使用[psutil](https://pypi.python.org/pypi/psutil)编写了非常简单的解决方案：

```
import time
import psutil

def main():
    old_value = 0    

    while True:
        new_value = psutil.net_io_counters().bytes_sent + psutil.net_io_counters().bytes_recv

        if old_value:
            send_stat(new_value - old_value)

        old_value = new_value

        time.sleep(1)

def convert_to_gbit(value):
    return value/1024./1024./1024.*8

def send_stat(value):
    print ("%0.3f" % convert_to_gbit(value))

main() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-09-14T17:58:43.047

```
import time

def get_bytes(t, iface='wlan0'):
    with open('/sys/class/net/' + iface + '/statistics/' + t + '_bytes', 'r') as f:
        data = f.read();
        return int(data)

while(True):
    tx1 = get_bytes('tx')
    rx1 = get_bytes('rx')

    time.sleep(1)

    tx2 = get_bytes('tx')
    rx2 = get_bytes('rx')

    tx_speed = round((tx2 - tx1)/1000000.0, 4)
    rx_speed = round((rx2 - rx1)/1000000.0, 4)

    print("TX: %fMbps  RX: %fMbps") % (tx_speed, rx_speed) 
```

应该是工作

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-25T14:02:31.113

好吧，不确定是否存在某些东西（用 python 编写），但您可能想看看以下内容。

1.  [带宽监控](https://github.com/steakunderscore/Bandwidth-Monitoring)（不是一个真正活跃的项目，但可能会给你一个想法）。

2.  [Munin Monitoring](https://github.com/munin-monitoring/munin/tree/2.0.11)（基于珍珠的网络监控项目）

3.  [ntop](http://www.ntop.org/products/ntop/)（用 C/C++ 编写，基于 libpcap）

如果您想自己做某事，也只是为了给您指点，一种方法可能是使用计数和存储数据包`sudo cat /proc/net/dev`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T13:55:07.633

代理仅涵盖配置为使用它的网络应用程序。您可以设置，例如使用代理的网络浏览器，但是当您的代理退出时会发生什么？

我认为最好的办法是在堆栈的下方挂钩。已经有一个程序可以做到这一点，`iftop`. [http://en.wikipedia.org/wiki/Iftop](http://en.wikipedia.org/wiki/Iftop)

您可以从阅读 的源代码开始`iftop`，也许将其包装到 Python C 扩展中。或者重写`iftop`以将数据记录到磁盘并从 Python 中读取。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-14T13:20:27.687

像 WireShark ( [https://wiki.wireshark.org/FrontPage](https://wiki.wireshark.org/FrontPage) ) 这样的东西可以解决问题吗？我现在正在处理一个类似的问题，并且倾向于使用`pyshark`WireShark/TShark 包装器来完成这项任务。这样您就可以轻松获取捕获文件信息。

# android - 从多个 AsyncTask 中获取结果

> ID：15616380
> 
> 赞同：7
> 
> 时间：2013-03-25T13:39:03.873
> 
> 标签：android, service, android-asynctask

您好，感谢您的帮助。

我有一个`method`调用 an`AsyncTask`从网上检索一些数据的方法。

`method` **依次调用多次，因此启动了几个**AsyncTasks 。

从每次启动时，`method`我都需要从相关的 AsyncTask （而不是从之前或之后调用的其他 AsyncTask ）中获取正确的结果。

非常感谢任何帮助。

* * *

编辑 编辑 编辑 编辑 添加了其余代码。

**请注意**：整个过程在*Service*中运行。

```
public static class UpdateService extends Service {
    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {

        int[] appWidgetIds = intent.getIntArrayExtra("widgetsids");
        final int N = appWidgetIds.length;
        AppWidgetManager manager = AppWidgetManager.getInstance(this);
        for (int i = 0; i < N; i++) {
            int appWidgetId = appWidgetIds[i];
            Log.e("","i="+Integer.toString(i)+ " di "+Integer.toString(N));
            RemoteViews view = buildUpdate(getApplicationContext(),
                    appWidgetIds);
            manager.updateAppWidget(appWidgetId, view);
        }
        return (START_NOT_STICKY);
    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }
}

private static  RemoteViews buildUpdate(Context ctxt, int[] appWidgetIds) {
    RemoteViews updateViews = new RemoteViews(ctxt.getPackageName(),
            R.layout.widget);
        updateViews.setTextViewText(R.id.price1, getPrice(list.get(0)
            .getSymbol()));

 }        
    //THIS METHOD IS CALLED SEVERAL TIMES IN SEQUENCE    <----
    private static String getPrice(String symbol) {
    String result="";
    UpdateTaskPrice up = new UpdateTaskPrice();
    up.execute(symbol, null, null);
    //HERE I WANT THE RESULT FROM onPostExecute()    <----
    return result;
}

//THIS IS THE ASYNCTASK WHICH IS LAUNCHED SEVERAL TIMES
public class UpdateTaskPrice extends AsyncTask<String, Void, String> {

    @Override
    protected void onProgressUpdate(Void... progress) {
    }

    @Override
    protected void onPostExecute(String result) {
    //HERE I RECEIVE THE RESULT FROM doInBackground    <----
    //I NEED TO PASS IT BACK TO getPrice()    <----
    }

    @Override
    protected String doInBackground(String... symbol) {
        String result = "";
        DefaultHttpClient client = new DefaultHttpClient();
        String srt = "";

        String url = context.getString(R.string.urlaternativo).concat(
                symbol[0]);

        HttpGet getMethod = new HttpGet(url);
        try {
            ResponseHandler<String> responseHandler = new BasicResponseHandler();
            srt = client.execute(getMethod, responseHandler);
            int inizio = srt.indexOf("<last data=\"");
            int fine = srt.indexOf("\"/>", inizio + 12);
            result = srt.substring(inizio + 12, fine);

        } catch (Throwable t) {
            // Log.e("ERROR", "ERROR", t);
        }
        //HERE I GET THE RESULT I WANT, AND PASS IT TO onPostExecute()    <----
        return result;
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-25T13:51:05.660

AsyncTask is asynchronous and run in a separate thread. So it is not possible to get the result of AsyncTask in very next statement after you execute it.

To get the relative results from AsyncTask, add a member variable "mRequestId" in your UpdateTaskPrice class and before calling UpdateTaskPrice.execute, set unique request ID.

in "onPostExecute" method of your UpdateTaskPrice class, you can return and process result using this Request Id.

```
public class UpdateTaskPrice extends AsyncTask<String, Void, String> {

    protected int mRequestId;

    public void setRequestId (int requestId)
    {
        this.mRequestId = requestId;
    }

    @Override
    protected void onProgressUpdate(Void... progress) {
    }

    @Override
    protected void onPostExecute(String result) {
        // do whatever with result using mRequestId
    }

    @Override
    protected String doInBackground(String... symbol) {
        String result = "";
        DefaultHttpClient client = new DefaultHttpClient();
        String srt = "";

        String url = context.getString(R.string.urlaternativo).concat(
                symbol[0]);

        HttpGet getMethod = new HttpGet(url);
        try {
            ResponseHandler<String> responseHandler = new BasicResponseHandler();
            srt = client.execute(getMethod, responseHandler);
            int inizio = srt.indexOf("<last data=\"");
            int fine = srt.indexOf("\"/>", inizio + 12);
            result = srt.substring(inizio + 12, fine);

        } catch (Throwable t) {
            // Log.e("ERROR", "ERROR", t);
        }
        //HERE I GET THE RESULT I WANT, AND PASS IT TO onPostExecute()    <----
        return result;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:38:39.230

你可以从多个 asynctask 中获取数据，但是你想要结果的地方用 asyctask 是不可能的，你需要使用更多的封装来构造这个问题。

你的结构的问题是......

```
 private static String getPrice(String symbol) {
    String result="";
    UpdateTaskPrice up = new UpdateTaskPrice();
    up.execute(symbol, null, null);
    //HERE I WANT THE RESULT FROM onPostExecute()    <----
    return result;
} 
```

**当您启动新线程时，它将首先执行在 task.execute(symbol); 之后返回的语句 在您的情况下，它是 return 语句，然后它将执行 pre.. doin.. 并发布...**

Hear 是可用于从多个 AsycTask 检索数据的模式

```
//Calling to the method callAsyncTask;
callAsyncTask(new AsyncResultCallback(){
    public void onResult(String result, String symbol){
        //TODO dosomthing with the result
    }
});

public void callAsyncTask(AsyncResultCallback callback){
    new UpdateTaskPrice(callback).execurte(symbol);
}

public interface AsyncResultCallback{
    public void onResult(String result, String symbol);
}

public class UpdateTaskPrice extends AsyncTask<String, Void, String> {

    AsyncResultCallback callback;
    String symbol;

    UpdateTaskPrice(AsyncResultCallback callback){
        this.callback = callback;
    }

    @Override
    protected void onProgressUpdate(Void... progress) {
    }

    @Override
    protected void onPostExecute(String result) {
        callback.onResult(result, symbol);
    }

    @Override
    protected String doInBackground(String... symbol) {
        this.symbol = symbol;
        String result = "";
        DefaultHttpClient client = new DefaultHttpClient();
        String srt = "";

        String url = context.getString(R.string.urlaternativo).concat(symbol[0]);

        HttpGet getMethod = new HttpGet(url);
        try {
            ResponseHandler<String> responseHandler = new BasicResponseHandler();
            srt = client.execute(getMethod, responseHandler);
            int inizio = srt.indexOf("<last data=\"");
            int fine = srt.indexOf("\"/>", inizio + 12);
            result = srt.substring(inizio + 12, fine);

        } catch (Throwable t) {
            // Log.e("ERROR", "ERROR", t);
        }
            //HERE I GET THE RESULT I WANT, AND PASS IT TO onPostExecute()    <----
        return result;
    }
} 
```

希望有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T19:23:53.573

好吧，我认为您可以在`AsyncTask`. 然后在`postExecute()`方法中，使用结果和唯一的请求 ID 更新 UI -

```
public class UpdateTaskPrice extends AsyncTask<String, Void, String> {

    private int mIdentifier;
    private Service mService;

    public UpdateTaskPrice(Service service, int identifier) {
        this.mIdentifier = identifier;
    }

    @Override
    protected void onProgressUpdate(Void... progress) {
    }

    @Override
    protected void onPostExecute(String result) {
        ((UpdateService) mService).informPrice(mIdentifier, result);
    }

    @Override
    protected String doInBackground(String... symbol) {
        String result = "";
        DefaultHttpClient client = new DefaultHttpClient();
        String srt = "";

        String url = context.getString(R.string.urlaternativo).concat(
                symbol[0]);

        HttpGet getMethod = new HttpGet(url);
        try {
            ResponseHandler<String> responseHandler = new BasicResponseHandler();
            srt = client.execute(getMethod, responseHandler);
            int inizio = srt.indexOf("<last data=\"");
            int fine = srt.indexOf("\"/>", inizio + 12);
            result = srt.substring(inizio + 12, fine);

        } catch (Throwable t) {
            // Log.e("ERROR", "ERROR", t);
        }
        //HERE I GET THE RESULT I WANT, AND PASS IT TO onPostExecute()    <----
        return result;
    }
} 
```

# android - 相对布局内的两个linearLayout，以便在新行中显示每个内容

> ID：15616383
> 
> 赞同：0
> 
> 时间：2013-03-25T13:39:15.257
> 
> 标签：android, android-linearlayout, android-relativelayout

我正在尝试在新行中显示每个内容（图像视图和文本视图），但我无法成功。我正在以编程方式执行此操作，这是我的代码。

```
RelativeLayout grp=new RelativeLayout(this);
            grp.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT));

            grp.setPadding(10, 10, 10, 10);

            TextView test=new TextView(this);
            test.setPadding(15, 15, 15, 15);
            test.setText(Html.fromHtml("<p>text here</p>"));
            LinearLayout ln=new LinearLayout(this);
            ImageView img=new ImageView(this);
            img.setImageResource(R.drawable.imageA);
            img.setFadingEdgeLength(10);
            ln.addView(img);

            ln.addView(test);
            ln.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.FILL_PARENT));

            LinearLayout ln0=new LinearLayout(this);
            grp.addView(ln);

            TextView test1=new TextView(this);
            test1.setPadding(15, 15, 15, 15);
            test1.setText(Html.fromHtml("<p>text here</p>"));
            LinearLayout ln1=new LinearLayout(this);
            ImageView img1=new ImageView(this);
            img1.setImageResource(R.drawable.imageB);
            img1.setFadingEdgeLength(10);
            ln1.addView(img1);
            //ln1.setPadding(10, 10, 10, 10);
            ln1.addView(test1);
            ln1.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.FILL_PARENT));

            grp.addView(ln1);

            setContentView(grp); 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:42:07.670

使用 LinearLayout 而不是 RelativeLayout 并使用 setOrientation(LinearLayout.VERTICAL) 将线性布局的方向设置为垂直；

# opencv - OpenCV中如何实现knn算法

> ID：15616394
> 
> 赞同：1
> 
> 时间：2013-03-25T13:39:52.820
> 
> 标签：opencv, implementation, knn

我想知道 Knn 算法是如何在 OpenCV 中实现的。我在哪里可以看到这段代码？容易理解吗？有人可以用伪代码向我解释一下吗？

因为我已经实现了以下算法：

[http://www.codeproject.com/Articles/32970/K-Nearest-Neighbor-Algorithm-Implementation-and-Ov](http://www.codeproject.com/Articles/32970/K-Nearest-Neighbor-Algorithm-Implementation-and-Ov)

但它给了我使用相同训练数据的 OpenCV 函数的不同结果。特别是，OpenCV 函数给了我最好的结果。

谢谢

# iphone - BarButtonItem 崩溃 ios 应用程序

> ID：15616395
> 
> 赞同：0
> 
> 时间：2013-03-25T13:39:54.613
> 
> 标签：iphone, ios, objective-c

我的视图中的条形按钮项目确实加载方法有问题。我有一个被添加到超级视图的子视图，当我单击 barbuttonitem 时，它会使应用程序崩溃并且我收到此错误

```
*** -[DetailViewController performSelector:withObject:withObject:]: message sent to deallocated instance 0x27677fa0

- (void)viewDidLoad
{
    [super viewDidLoad];
    navBar.tintColor = [UIColor blackColor];
    UIColor *topGreen = [UIColor colorWithRed:246/255.f green:241/255.f blue:206/255.f alpha:1];
    UIColor *bottomGreen = [UIColor colorWithRed:242/255.f green:237/255.f blue:204/255.f alpha:1];
    CAGradientLayer *gradient = [CAGradientLayer layer];
    gradient.frame = self.view.bounds;
    gradient.colors = [NSArray arrayWithObjects:(id)topGreen.CGColor, (id)bottomGreen.CGColor, nil];
    [self.view.layer insertSublayer:gradient atIndex:0];
    backButton = [[UIBarButtonItem alloc] initWithTitle:@"Map" style:UIBarButtonSystemItemAction target:self action:@selector(returnToMap:)];
    UINavigationItem *navButton = [[UINavigationItem alloc]init];
    navButton.leftBarButtonItem = backButton;
    [navBar pushNavigationItem:navButton animated:YES];
    navBar.topItem.title = title;
    NSLog(@"Reached");
    //[self returnToMap];
    //Do any additional setup after loading the view from its nib.
} 
```

我不知道如何解决这个问题。我已经尝试将 barbutton 添加为属性并对其进行同步，但似乎没有任何效果。任何帮助都会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:45:51.933

问题不在于`UIBarButtonItem`，而在于`DetailViewController`实例 - 您太早地发布它，或者没有保留参考。

# windows - 需要帮助使用 CertFindCertificateInStore() 按主题名称（X500 格式，CERT_X500_NAME_STR）查找证书？

> ID：15616396
> 
> 赞同：6
> 
> 时间：2013-03-25T13:39:57.203
> 
> 标签：windows, certificate, cryptoapi

客户端应用程序必须从 Windows 证书存储访问证书。搜索输入是 X500 字符串格式的主题名称，如下所示。

```
"C=CH, S=Aargau, L=Baden, O=Test, OU=FF, CN= Test Root" 
```

需要完全匹配（不是使用 CERT_FIND_SUBJECT_STR 的子字符串匹配）。为此，我执行以下操作

```
CERT_NAME_BLOB subjectname = {0};

/*convert the input X500 string to encoded subject name*/
bRet = CertStrToNameA(X509_ASN_ENCODING, "C=CH, S=Aargau, L=Baden, O=Test, OU=S1, CN= Test Root", CERT_X500_NAME_STR, NULL, NULL, &size, NULL);
  if(TRUE == bRet)
  {
     subjectname.pbData  = (BYTE*)malloc(size);
     subjectname.cbData = size;

     bRet = CertStrToNameA(X509_ASN_ENCODING , "C=CH, S=Aargau, L=Baden, O=Test, OU=S1, CN=Test Root", CERT_X500_NAME_STR, NULL, subjectname.pbData, &subjectname.cbData, NULL);
     if(TRUE == bRet)
     {
          capiCertificate = CertFindCertificateInStore(hStore, X509_ASN_ENCODING, 0, CERT_FIND_SUBJECT_NAME, &subjectname, NULL);
         if (NULL == capiCertificate)
         {
            errorcode = GetLastError();
            ret = CA_CERT_NOT_FOUND;
         }
     }
  } 
```

问题是 CertFindCertificateInStore 总是返回 NULL 指针。我一直在调试，但找不到这里出了什么问题。

任何建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-21T08:52:08.733

如果有人正在寻找这个问题的答案，我会发布我该怎么做，以防它有用

```
static PCCERT_CONTEXT
FindCertificate(
    const HCERTSTORE hStore,
    const char* CertSearchString)
{
    PCCERT_CONTEXT capiCertificate = NULL;
    DWORD dType = CERT_X500_NAME_STR | CERT_NAME_STR_REVERSE_FLAG;
    char certname [MAX_SIZE_CERT_NAME] = {0};

    for(;;)
    {
        capiCertificate = CertEnumCertificatesInStore(hStore, capiCertificate);
        if (NULL == capiCertificate)
        {
            break;
        }

        if (FALSE == 
            CertGetNameStringA(capiCertificate, CERT_NAME_RDN_TYPE,
                0, &dType, certname, MAX_SIZE_CERT_NAME))
        {
            CertFreeCertificateContext(capiCertificate);
            capiCertificate = NULL;
            break;
        }

        if ((0 == strncmp(certname, CertSearchString, MAX_SIZE_CERT_NAME)) &&
            (capiCertificate->dwCertEncodingType == X509_ASN_ENCODING))
        {
            break;
        }
    }
    return capiCertificate;
} 
```

# java - 如何检查Point是否在对角线上？

> ID：15616405
> 
> 赞同：2
> 
> 时间：2013-03-25T13:40:27.943
> 
> 标签：java, gwt, java-canvas

我有一个`canvas`. `lines`在`click`我想检查点击是否在我的线上以突出显示它。

我也有一些`rectangles`通过使用`start`和`end point`广场很容易的地方。但是对于我来说，`diagonal line`我不能使用与一条线不填充矩形相同的技术。

但是我怎么能做到这一点呢？此外，我还想有一些“偏移”，这样如果点击足够接近线，它也会被标记，否则细线可能很难点击。

可能我错过了正确的关键字，因为我肯定不是第一个想要这样做的人。希望你能帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T13:47:34.643

写出直线的方程：

```
a*x + b*y + c = 0 
```

然后将您单击的坐标放入此等式：

```
distance = a*x1 + b*y1 + c 
```

`(x1, y1)`您单击的点在哪里。如果`distance < threshold`你点击就行了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T13:55:55.937

Gabor 是对的，计算两点之间的距离并使用它非常容易。根据 Roger 建议的链接，这里是从 AWT 源代码中提取的一些代码，用于测量两点之间的距离。 [http://developer.classpath.org/doc/java/awt/geom/Line2D-source.html](http://developer.classpath.org/doc/java/awt/geom/Line2D-source.html)

所以，你的代码就像

```
if (ptLineDist(lineX1,lineY1,lineX2,lineY2,clickX,clickY) < someLimit) 
   clicked=true; 
else clicked=false; 
```

这是 AWT 代码（查看上面的链接以获取许可证）

```
 521:   /**
 522:    * Measures the square of the shortest distance from the reference point
 523:    * to a point on the infinite line extended from the segment. If the point
 524:    * is on the segment, the result will be 0\. If the segment is length 0,
 525:    * the distance is to the common endpoint.
 526:    *
 527:    * @param x1 the first x coordinate of the segment
 528:    * @param y1 the first y coordinate of the segment
 529:    * @param x2 the second x coordinate of the segment
 530:    * @param y2 the second y coordinate of the segment
 531:    * @param px the x coordinate of the point
 532:    * @param py the y coordinate of the point
 533:    * @return the square of the distance from the point to the extended line
 534:    * @see #ptLineDist(double, double, double, double, double, double)
 535:    * @see #ptSegDistSq(double, double, double, double, double, double)
 536:    */
 537:   public static double ptLineDistSq(double x1, double y1, double x2, double y2,
 538:                                     double px, double py)
 539:   {
 540:     double pd2 = (x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2);
 541: 
 542:     double x, y;
 543:     if (pd2 == 0)
 544:       {
 545:         // Points are coincident.
 546:         x = x1;
 547:         y = y2;
 548:       }
 549:     else
 550:       {
 551:         double u = ((px - x1) * (x2 - x1) + (py - y1) * (y2 - y1)) / pd2;
 552:         x = x1 + u * (x2 - x1);
 553:         y = y1 + u * (y2 - y1);
 554:       }
 555: 
 556:     return (x - px) * (x - px) + (y - py) * (y - py);
 557:   }
 558: 
 559:   /**
 560:    * Measures the shortest distance from the reference point to a point on
 561:    * the infinite line extended from the segment. If the point is on the
 562:    * segment, the result will be 0\. If the segment is length 0, the distance
 563:    * is to the common endpoint.
 564:    *
 565:    * @param x1 the first x coordinate of the segment
 566:    * @param y1 the first y coordinate of the segment
 567:    * @param x2 the second x coordinate of the segment
 568:    * @param y2 the second y coordinate of the segment
 569:    * @param px the x coordinate of the point
 570:    * @param py the y coordinate of the point
 571:    * @return the distance from the point to the extended line
 572:    * @see #ptLineDistSq(double, double, double, double, double, double)
 573:    * @see #ptSegDist(double, double, double, double, double, double)
 574:    */
 575:   public static double ptLineDist(double x1, double y1,
 576:                                    double x2, double y2,
 577:                                    double px, double py)
 578:   {
 579:     return Math.sqrt(ptLineDistSq(x1, y1, x2, y2, px, py));
 580:   }
 581: 
```

# internet-explorer - Richfaces dataTable里面隐藏的popupPanel坏渲染

> ID：15616414
> 
> 赞同：3
> 
> 时间：2013-03-25T13:40:46.083
> 
> 标签：internet-explorer, jsf, richfaces

我有rich：popupPanel，其中包含rich：dataTable。弹出面板在按下按钮之前被隐藏，但数据表的骨架显示在页面上（popupPanel 仍然隐藏）。Skeleton(grid) 只有在 popupPanel 首次显示后才会消失。这仅发生在 IE7 中，这是其他方的非功能性要求。

如果有人有类似的问题，我会非常感激？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T10:07:01.770

找到了解决方法。（*注意目标浏览器*）

仅当 table 具有 style 属性时才隐藏 popupPanel 时不显示 table 的网格(grid/skeleton)：

```
style="border-collapse:separate" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-10T13:52:21.033

感谢您的解决方法！

但是，之后的表格在表格单元格之间存在一些间隙。

为了恢复表格的相同外观，您可能还想使用一个简单的 jQuery 函数来删除第一次显示弹出窗口时的样式：

```
<a4j:commandButton id="showPopupButton" value="Show Details" render="detailsPopup"
limitRender="true" 
oncomplete="#{rich:jQuery('detailsPopupDataTable')}.css('border-collapse','');
#{rich:component('detailsPopup')}.show(); return true;"/> 
```

# ruby-on-rails - 乘客未能将整个请求发送给 RoR

> ID：15616415
> 
> 赞同：1
> 
> 时间：2013-03-25T13:40:49.317
> 
> 标签：ruby-on-rails, passenger

最近，我们遇到了一个奇怪的问题，即从Passenger 发送到我们的应用程序服务器的一些XHR 请求无法正常执行。

请查看以下事件链：

1.  LB 乘客向应用服务器发送请求。
2.  在尝试确定该请求应该由哪个控制器操作处理时，Rails 返回 NoMethodError 异常。

    ```
    Rails error log:

    Started POST "/user/" for 194.29.65.21 at 2013-03-25 13:14:38 +0100
      NoMethodError (undefined method `[]' for nil:NilClass): 
    ```

    当 Rails 能够确定一个请求应该被路由到哪个控制器/动作时，这是一个日志：

    ```
    Started POST "/User/" for 194.29.65.21 at 2013-03-25 13:14:38 +0100
         Processing by Web::UserController#index as 
         Parameters: {"c"=>"1", "fref"=>""} 
    ```

3.  此错误会传播到引发以下错误的应用程序服务器乘客：

    ```
    [ pid=20071 thr=3074915216 file=ext/nginx/HelperAgent.cpp:577
    time=2013-03-24 22:25:58.257 ]: Uncaught exception in PassengerServer
    client thread:    exception: Cannot read response from backend
    process: Connection reset by peer (104)    backtrace:
         in 'void Client::forwardResponse(Passenger::SessionPtr&, Passenger::FileDescriptor&)' (HelperAgent.cpp:361)
         in 'void Client::handleRequest(Passenger::FileDescriptor&)' (HelperAgent.cpp:503)
         in 'void Client::threadMain()' (HelperAgent.cpp:596) 
    ```

4.  最后 LB Nginx 给出了这个错误： `up stream status = 500 error`.

对于给定的路线，此错误是随机出现的。甚至这个错误的发生频率也是随机变化的。

系统详情：

*   红宝石：1.9.2p180
*   导轨：3.0.5
*   Phusion 乘客版本 3.0.5
*   nginx版本：n

我们认为这是因为乘客未能将整个请求数据发送到 Rails，导致 Rails 无法确定有效的控制器操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:38:24.267

查看 Nginx 的乘客配置，我在 Nginx 的乘客方面遇到了很多问题。

[http://www.modrails.com/documentation/Users%20guide%20Nginx.html#PassengerSpawnMethod](http://www.modrails.com/documentation/Users%20guide%20Nginx.html#PassengerSpawnMethod)专门验证此配置并将其添加到父节点的 nginx.conf 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T17:27:30.807

我们刚刚调试，发现问题不在于 XHR，而在于 POST 请求。

另外现在我们正在使用乘客 3.0.5，是否知道升级到乘客 3.0.19 是否有帮助？

# xml - 在visual basic中将数据添加到xml文件的节点

> ID：15616421
> 
> 赞同：4
> 
> 时间：2013-03-25T13:41:05.587
> 
> 标签：xml, vb.net

我对 Visual Basic 还是很陌生，所以我想从一开始就原谅自己。

下面的代码应该得到一个节点列表，其中的所有节点`InnerText`等于`Name`名为的字符串`membername`。这部分似乎工作得很好，但之后我还想检查这个列表中是否`Logout`已经存在一个节点。这样我想防止重复xml数据库中的数据。不幸的是，它不像我尝试的那样工作。它不断复制所有数据。那我的错是什么？？

**文件**

```
<?xml version="1.0" encoding="utf-16"?>
<Times>
  <Shift>
    <Name>Philipp</Name>
    <Login>14:11</Login>
    <Date>25.03.2013</Date>
    <Logout>14:11</Logout> ' Don't generate again ....
  </Shift>
  <Shift>
    <Name>Philipp</Name>
    <Login>14:11</Login>
    <Date>25.03.2013</Date>
    <Logout>14:11</Logout> ' Generate Logout node
  </Shift>
</Times> 
```

**视觉基本代码**

```
 If File.Exists(Filename) Then

        DOMDocument.Load(Filename)

        Dim RootElement As XmlElement = DOMDocument.DocumentElement
        Dim ListOfTitles As XmlNodeList = DOMDocument.GetElementsByTagName("Name")

        For Each Node As XmlNode In ListOfTitles

            If Node.InnerText = memberName Then

                Dim logout = Node.SelectNodes("Logout")

                If Not logout Is Nothing Then

                    Dim NewElement As XmlElement = DOMDocument.CreateElement("Logout")
                    NewElement.InnerText = DateTime.Now.ToShortTimeString()

                    Dim Parent As XmlNode = Node.ParentNode
                    Parent.AppendChild(NewElement)

                    DOMDocument.Save(Filename)

                End If

            End If

        Next
    End If 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T17:07:39.113

`logout`被设置为一个空对象，所以`If Not logout is Nothing Then`相当于`If True Then`. 请参阅：http: [//msdn.microsoft.com/en-us/library/hcebdtae.aspx](http://msdn.microsoft.com/en-us/library/hcebdtae.aspx)。该方法`IXMLElement.selectNodes(expression)`总是返回一个对象。要修复，请改为检查 logout 的长度值。

`If logout.Count > 0 Then`或者如果没有找到节点，则使用`selectSingleNode`which 返回。`NULL`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T23:17:50.017

让我们尝试解释什么是错误的以及如何解决它。

显然，对于每个`<Name>`节点，您希望检索`<Logout>`与其关联的节点（如果存在），并且您尝试`Node.SelectNodes("Logout")`这样做，但是：

该代码`Node.SelectNodes("Logout")`实际上尝试选择由您的变量表示的节点的**子**节点- 在您的 XML 标记中，`<Name>``Node`

1.  `<Name>`节点没有子节点并且

2.  `<Logout>`节点总是他们的兄弟姐妹，而不是孩子。

所以它总是返回一个空集合，而不是你想要的节点。

您可以通过迭代`<Shift>`节点来解决此问题，因为它们包含名称和注销信息作为子节点。

顺便说一句，`InnerText`不是 IXMLDOMNode 属性，请尝试使用[Text](http://msdn.microsoft.com/en-us/library/windows/desktop/ms762687%28v=vs.85%29.aspx%20Text)代替

```
If File.Exists(Filename) Then

    DOMDocument.Load(Filename)

    Dim RootElement As XmlElement = DOMDocument.DocumentElement
    Dim ListOfShifts As XmlNodeList = DOMDocument.GetElementsByTagName("Shift")

    For Each ShiftNode As XmlNode In ListOfShifts

        Dim NameNode = ShiftNode.SelectSingleNode("Name")
        If NameNode IsNot Nothing And NameNode.Text = memberName Then

            Dim logoutNode = ShiftNode.SelectSingleNode("Logout")

            If Not logoutNode Is Nothing Then

                Dim NewElement As XmlElement = DOMDocument.CreateElement("Logout")
                NewElement.Text = DateTime.Now.ToShortTimeString()

                Dim Parent As XmlNode = Node.ParentNode
                Parent.AppendChild(NewElement)

                DOMDocument.Save(Filename)

            End If

        End If

    Next
End If 
```

此外，您在每次更改时都保存文档 - 为什么不在循环完成后只保存一次

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T22:36:20.953

这并不完全是您要问的，但我发现处理原始 XML 会导致很多头痛。相反，您可能会考虑处理一个 Shift 类，该类允许您在登录/注销时执行逻辑，并让 .NET 为您执行序列化/反序列化。

这样，如果您的业务对象和关系发生变化，您就不会被绑定到特定的 XML 路径。

再说一次，不是你问的，而是我将如何解决你正在处理的业务案例。

首先，创建一个可以放入业务逻辑的班次类。这里的简单示例：

```
Public Class Shift

    Public Property Name As String
    Public Property DateString As String
    Public Property Login As String
    Public Property Logout As String

End Class 
```

接下来，创建一个班次集合。我称这个类为 TimeCollection，但你可以随意调用它。将其标记为 Serializable，以便 .NET 可以完成将其从对象转换为 XML 的工作，反之亦然。

```
Imports System
Imports System.Collections.Generic
Imports System.Linq
Imports System.Text
Imports System.IO
Imports System.Xml.Serialization

<Serializable()> Public Class TimeCollection

Public Property Path As String

<XmlArray("Shifts")>
<XmlArrayItem(GetType(Shift))>
Public Property Shift As Shift()

Public Function Serialize(FileInfo As System.IO.FileInfo)
    Try

        If File.Exists(FileInfo.FullName) Then
            File.Delete(FileInfo.FullName)
        End If

        If Not Directory.Exists(FileInfo.DirectoryName) Then
            Directory.CreateDirectory(FileInfo.DirectoryName)
        End If

        Me.Path = FileInfo.FullName

        Dim serializer As XmlSerializer = New XmlSerializer(GetType(TimeCollection))
        Dim writer As StreamWriter = New StreamWriter(FileInfo.FullName)

        serializer.Serialize(writer, Me)
        writer.Close()

    Catch ex As Exception

        Throw
    End Try

End Function

Public Shared Function Deserialize(FileInfo As FileInfo) As TimeCollection

    Dim serializedType As TimeCollection = Nothing

    Dim path As String = FileInfo.FullName

    If (Not File.Exists(path)) Then
        Deserialize = serializedType
    Else
        Try
            Dim serializer As XmlSerializer = New XmlSerializer(GetType(TimeCollection))
            Dim reader As StreamReader = New StreamReader(path)
            serializedType = serializer.Deserialize(reader)
            reader.Close()
            Deserialize = serializedType
        Catch ex As Exception
            Console.WriteLine(ex.Message)
        End Try
    End If

End Function

End Class 
```

现在。如果您有一些代码会生成一系列班次，如下所示：

```
 Dim tc As TimeCollection = New TimeCollection() 

    Dim first As Shift = New Shift()
    first.Name = "Philipp"
    first.Login = "14:11"
    first.Logout = "14:45"
    first.DateString = "3/31/2013"

    Dim second As Shift = New Shift()
    second.Name = "Phillip"
    second.Login = "14:09"
    ' second.Logout = "15:01" (note 2nd shift has no logout)
    second.DateString = "4/1/2013"

    tc.Shift = New Shift(1) {first, second} 
```

您可以像这样轻松地序列化 TimeCollection 对象：

```
tc.Serialize(New FileInfo("C:\SomePath\TimeCollectionA.xml")) 
```

它创建了以下内容：

```
 <?xml version="1.0" encoding="utf-8"?>
<TimeCollection xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Path>C:\Temp\Tc.xml</Path>
  <Shifts>
    <Shift>
      <Name>Philipp</Name>
      <DateString>3/31/2013</DateString>
      <Login>14:11</Login>
      <Logout>14:45</Logout>
    </Shift>
    <Shift>
      <Name>Phillip</Name>
      <DateString>4/1/2013</DateString>
      <Login>14:09</Login>
    </Shift>
  </Shifts>
</TimeCollection> 
```

然后，要反序列化内容并将文件转换回对象集合，您可以执行以下操作：

```
 Dim tc As TimeCollection
    tc = TimeCollection.Deserialize(New FileInfo("C:\SomePath\TimeCollectionA.xml")) 
```

现在您可以遍历 tc.Shift 数组等。

# matlab - 在 Matlab 中并排绘制直方图

> ID：15616422
> 
> 赞同：3
> 
> 时间：2013-03-25T13:41:08.477
> 
> 标签：matlab, histogram

我有两个向量 c 和 d，我需要在 matlab 的同一个图中并排绘制其直方图。当我做 hist(c) 时；坚持，稍等; hist(d) 比例发生变化，我看不到 c 向量的直方图。我哪里错了？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T13:50:36.100

If you want the two to be in the same figure, you could try adjusting the `X` and `Y` limits to suit your needs (try `help xlim` and `help ylim`). However plotting them in the same figure might not always suit your needs, as a particular plot has to of course maintain a certain limit for `X` and `Y`.

If displaying them side by side in different figures would suffice however, you could consider using `subplot()`:

```
>> A=[1 1 1 2 2];
>> B=[1 2 2 2 2];
>> figure(1);
>> hold on;
>> subplot(1,2,1);
>> hist(A);
>> subplot(1,2,2);
>> hist(B); 
```

Resultant figure:

Notice how the different axis limits are maintained.

![](../Images/e7b76df87aabcb2c92731cb616c68645.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T13:50:09.747

您可以使用`axis([xmin xmax ymin ymax])`来控制 x 和 y 轴并选择将显示两个直方图的范围。根据您希望绘图的外观，您可能还想尝试使用`nelements = hist(___)`来获取每个 bin 中的元素数量，然后绘制它们`bar(x,nelements)`以控制每个条的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-22T20:35:19.173

我经常使用 MATLAB 直方图，并编写了这个小的 matlab 脚本来在一个图中绘制两个直方图（第一个是红色的，第二个是蓝色的）。该脚本非常简单，但重要的是直方图应该具有可比性（即等间距的频率区间）。

```
function myhist(varargin)
% myhist function to plot the histograms of x1 and x2 in a single figure. 
% This function uses the same xvalue range and same bins to plot the
% histograms, which makes comparison possible. 
if nargin<2
    x1 = cell2mat(varargin(1));
    x2 = x1;
    res = 100;
elseif nargin==2
    x1 = cell2mat(varargin(1));
    if length(cell2mat(varargin(2)))==1
        res = cell2mat(varargin(2));
        x2 = x1;
    else
        x2 = cell2mat(varargin(2));
        res = 100;
    end
elseif nargin>2
    x1 = cell2mat(varargin(1));
    x2 = cell2mat(varargin(2));
    res = cell2mat(varargin(3));
end

if numel(x1)~=length(x1) || numel(x2)~=length(x2)
    error('Inputs must be vectors.')
    return
end

xrangel = max(min(x1),min(x2));
xrangeh = min(max(x1),max(x2));

x1_tmp = x1(x1>=xrangel & x1<=xrangeh);
x2_tmp = x2(x2>=xrangel & x2<=xrangeh);

xbins = xrangel:(xrangeh - xrangel)/res:xrangeh;

hist(x1_tmp,xbins)
hold on 
h = findobj(gca,'Type','patch');
set(h,'FaceColor','r','EdgeColor','w');
hist(x2_tmp,xbins) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T14:47:19.683

`hist`假设您希望默认将范围划分为 10 个大小相等的 bin。如果您想对两个直方图使用相同的 bin，首先找到您的值的范围并制作一组 bin 中心（例如`binCenters = linspace(min(x), max(x), 15)'), then call`hist(x, binCenters)`。

# jsf-2 - java.lang.IllegalAccessException：类 javax/faces/component/UIComponentBase 非法访问“”类控制器/testManagedBean

> ID：15616427
> 
> 赞同：0
> 
> 时间：2013-03-25T13:41:19.360
> 
> 标签：jsf-2, primefaces

我正在尝试在选项列表中进行验证，以便最多可以将 1 个项目添加到选项列表中。但是当我在pickList中使用验证器方法时出现以下错误。有人可以建议我做错了什么吗？

```
 java.lang.IllegalAccessException: Class javax/faces/component/UIComponentBase illegally accessing " " class controller/testManagedBean$1 
        at java.lang.J9VMInternals.newInstanceImpl(Native Method)
        at java.lang.Class.newInstance(Class.java:1355)
        at javax.faces.component.UIComponentBase.restoreAttachedState(UIComponentBase.java:1598)

public void onTransfer(TransferEvent event) {
        PickList picklist = (PickList) event.getComponent();
        picklist.addValidator(new Validator() {

            @Override
            public void validate(FacesContext arg0, UIComponent arg1, Object arg2)
                    throws ValidatorException {
                System.out.println("test");                     
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:08:56.317

异常看起来很简单：您试图在组件的生命周期中添加验证器为时已晚。此外，虽然我不能就此发表权威性发言，但我认为验证器实例不可能是匿名的。JSF 中每次出现的验证器都需要某种 id，即它可能要求它可以作为 bean 或顶级方法独立寻址。将验证指定为或者更`validator`安全

1.  选择列表上的方法定义

    ```
    <p:pickList id="pickList" validator="#{pickListBean.validateSelection}" value="#{pickListBean.cities}" var="city" itemLabel="#{city}" itemValue="#{city}" /> 
    ```

    在您的支持 bean 上，作为顶级方法：

    ```
    public void validateSelection(FacesContext arg0, UIComponent arg1, Object arg2)
                throws ValidatorException {
            System.out.println("test");                     
        }
    } 
    ```

2.  验证器的完整独立实现

    ```
    @FacesValidator("myValidator")
    MyValidator implements Validator{

    public void validate(FacesContext arg0, UIComponent arg1, Object arg2)
                throws ValidatorException {
            System.out.println("test");                     
        }
      }
    } 
    ```

# c++ - 如何在 boost::serialization 中迭代归档

> ID：15616428
> 
> 赞同：0
> 
> 时间：2013-03-25T13:41:21.427
> 
> 标签：c++, iterator, boost-serialization

我将多个数据加载到`boost::archive::text_oarchive`中，现在我需要提取数据。但是因为档案包含多条记录，我需要一个迭代器。

就像是

```
//input archive
boost::archive::text_iarchive iarch(ifs);

//read until the end of file
while (!iarch.eof()){

//read current value
iarch >> temp;
...//do something with temp

} 
```

是否有任何标准方法来迭代存档的元素？我发现 only `iarchive.iterator_type`，但它是我需要的吗？我该如何使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:53:37.960

您正在查看的迭代器类型实际上来自

```
class shared_ptr_helper {
    ...
    typedef std::set<
        boost::shared_ptr<const void>,
        collection_type_compare
    > collection_type;
    typedef collection_type::const_iterator iterator_type; 
```

我认为它是在加载存档期间使用的，而不是作为外部使用的迭代器。

如果您查看 tutorial -> STL Collection 下的链接[http://www.boost.org/doc/libs/1_53_0/libs/serialization/doc/index.html](http://www.boost.org/doc/libs/1_53_0/libs/serialization/doc/index.html)，您将看到以下示例：

```
#include <boost/serialization/list.hpp>

class bus_route
{
    friend class boost::serialization::access;
    std::list<bus_stop *> stops;
    template<class Archive>
    void serialize(Archive & ar, const unsigned int version)
    {
        ar & stops;
    }
public:
    bus_route(){}
}; 
```

如果这不是您所需要的，那么您可能需要查看覆盖加载并按照[http://www.boost.org/doc/libs/1_53_0/libs/serialization/doc/tutorial.html#splitting](http://www.boost.org/doc/libs/1_53_0/libs/serialization/doc/tutorial.html#splitting) 并根据需要添加处理。

# c# - 无效的强制转换异常？

> ID：15616437
> 
> 赞同：2
> 
> 时间：2013-03-25T13:41:43.613
> 
> 标签：c#, sql-server

我有以下存储过程：

```
Create PROCEDURE [dbo].[GETVendorsStatsAgainstSearTerm]
    @Date DateTime , 
    @SearchId  bigint
AS

declare @cmd as varchar(2000)
set @cmd = ' select *, ' + cast(SearchId as varchar) + ' as SearhId   from tbl'
exec (@cmd) 
```

我想将其`SearchId`视为运行选择查询的列。我想知道该`SearchId`列的正确类型。

我无法`SearchId`在 C# 中将此列转换为长数据类型。有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:46:03.237

你可以试试`Convert function`

```
Convert(varchar(50),SearchId ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:00:47.887

我想问题是有一些未分配的 SearchId 导致将 null 转换为 varchar。

尝试这样的事情：

```
//...
set @cmd = CASE
   WHEN (SearchId IS NOT NULL) THEN (' select *, ' + cast(SearchId as varchar) + ' as SearhId from tbl')
   ELSE ' select *, 0 as SearhId from tbl'
END
///... 
```

# php - 如何计算我的存储中每天的平均增长？

> ID：15616438
> 
> 赞同：0
> 
> 时间：2013-03-25T13:41:52.403
> 
> 标签：php, space-complexity

我需要计算我的公司在存储方面的平均每日增长，但我有疑问，正确的方法是什么？很抱歉使用谷歌翻译。=)

**存储空间：**

```
f_date      f_used
12/03/2013  2708100
13/03/2013  2708663
14/03/2013  2712155
15/03/2013  2715932
16/03/2013  2717823
17/03/2013  2719575
18/03/2013  2723095
19/03/2013  2726682
20/03/2013  2730365
21/03/2013  2733563
22/03/2013  2737411
23/03/2013  2644001
24/03/2013  2645764 
```

**我在 PHP 中的代码：**

```
for ($i = 1; $i < sizeof($array); $i++) {
 $resultado[] = $array[$i] - $array[$i-1];
}
echo array_sum($resultado)/count($resultado); 
```

**我的结果是：** -5194.6666666667，是不是错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:54:56.490

该算法是正确的，并为您提供每日差异的**平均值**。

例子：

```
f_date f_used 差异
2013 年 12 月 3 日 2708100
2013 年 3 月 13 日 2708663 563
2013 年 3 月 14 日 2712155 3492
                     ----
                     4055
```

```
4055 / 2 (difference count) = 2027.5 
```

[查看演示](http://codepad.org/RPmZUWjA)

# jquery - 在悬停img上显示div

> ID：15616440
> 
> 赞同：1
> 
> 时间：2013-03-25T13:41:52.673
> 
> 标签：jquery, hover, each

我已经使用`inserAfter()`这样的图像插入了一个 div：

```
$('<div class="q"></div>').insertAfter('img'); 
```

我已将 div 设置为`display:none`并想用 jquery 显示它，所以我做了：

```
$('img').on('hover', function(e){
      $(this).each(function (i) {
    $(this).closest('.q').show();
  });
        }); 
```

它不起作用。当我悬停img时，div仍然隐藏。我看不出我的代码有什么问题。我可以尝试什么？

[提琴手](http://jsfiddle.net/WpGsx/22/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:52:47.603

我觉得应该注意的是，你可以只使用 CSS 来做同样的事情，而且所涉及的选择[器无论如何都具有很好的浏览器兼容性](http://caniuse.com/#feat=css-sel2)。

```
div.q {
    display:none;
}

img:hover + div.q {
    display:block;
} 
```

实际上，这应该可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T14:01:17.660

`**[LIVE DEMO](http://jsfiddle.net/WpGsx/13/)**`

HTML：

```
<div class="addQ">
   <img  src="http://upload.wikimedia.org/wikipedia/commons/a/af/Bonsai_IMG_6426.jpg" />
</div>

<div class="addQ">
   <img src="http://upload.wikimedia.org/wikipedia/commons/a/af/Bonsai_IMG_6426.jpg" />
</div> 
```

CSS：

```
.addQ{
    position:relative;
    float:left;
    margin:10px;
}

.addQ img {
   position:relative;
    vertical-align:middle;
    width:300px;
}

.q {
    position:absolute;
    top:0;
    box-shadow:inset 0px 0px 85px red;
    -webkit-box-shadow:inset 0px 0px 85px red;
    -moz-box-shadow:inset 0px 0px 85px red;
    z-index: 3;
    display:none;
} 
```

问：

```
$(function(){

    var addQimg = $('.addQ img');
    var wi = addQimg.width();
    var he = addQimg.height();

    $('.addQ').each(function(){
        $(this).append("<div class='q' />");
        $(this).find('.q').width(wi).height(he);
    }).on('mouseenter mouseleave', function( e ){
        var opacity = e.type=='mouseenter' ? 1 : 0 ;
        $(this).stop().find('.q').fadeTo(700, opacity); 
    });

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T13:46:34.890

`closest`选择所选元素的最近父级，您应该改用`next`方法。[也不推荐](http://api.jquery.com/on/)使用`hover`带有`on`方法的事件。

> **在 jQuery 1.8 中弃用，在 1.9 中删除：**名称“hover”用作字符串“mouseenter mouseleave”的简写。它为这两个事件附加了一个事件处理程序，并且处理程序必须检查`event.type`以确定事件是`mouseenter`还是`mouseleave`。不要将“悬停”伪事件名称与`.hover()`接受一两个函数的方法混淆。

```
$('img').on({
    mouseenter: function() {
        $(this).next('.q').show();
    },
    mouseleave: function() {
        $(this).next('.q').hide();
    }
}); 
```

[http://jsfiddle.net/yyAma/](http://jsfiddle.net/yyAma/)

# javascript - Monkey 使用 AMD 修补 Dijit 小部件（特别是 dijit/DialogUnderlay）。可能的？

> ID：15616442
> 
> 赞同：1
> 
> 时间：2013-03-25T13:42:00.077
> 
> 标签：javascript, requirejs, dojo, amd

我正在尝试对 dijit/Dialog 的默认行为进行简单的更改。我希望在单击底层（背景）时关闭对话框。

我在 Dojo 的前一个版本中这样做过一次，但我正在努力使用新的 AMD/requireJs 风格来做到这一点。

如果我在应用程序启动时加载 dijit/DialogUnderlay 模块，我可以对其进行修补，但我的更改似乎只影响我需要的实例，而不是所有实例。大概 require() 只提供一个副本。

我需要扩展 dijitDialog 并使用我的子类吗？有没有更简单的方法来做我想做的事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:26:31.033

我认为它的一般形式是这样的：

```
require.config({
    paths: {
        'mylib': 'libs/mylib-x.y.x/mylib'
    }
});

define('mypatchedlib', ['mylib'], function (mylib) {

    // do your monkey patching here

    // and then return the patched version
    return mylib;
}); 
```

然后在任何你想使用 lib 的地方，你都可以这样做：

```
require(['mypatchedlib'], function(mylib) {
    // use the patched lib
}); 
```

RequireJS 中还有一个[映射配置](http://requirejs.org/docs/api.html#config-map)，可让您将特定需求的所有使用重定向到新版本，这样当 someotherlib 请求 mylib 时，您会自动将它们重定向到使用修补版本。

```
map: {
    'someotherlib': { 'mylib': 'mypatchedlib' }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T14:39:08.447

您可以使用事件委托并保持对话不变。这是一个实现您所描述的示例。只需将 a 在您的 html 中并运行以下命令：

```
require(["dojo/_base/window", "dijit/Dialog", "dojo/on", "dijit/form/Button"],
function(win, Dialog, on, Button){
    var dialogInstance = new Dialog({
        innerHTML : "Hello world !"
    });

    on(win.body(), "._underlay:click", function(evt){
       dialogInstance.hide();
    });

    var btn = new Button({ 
        label : "Show Dialog",
        onClick : function(evt) {
             dialogInstance.show();   
        }
    },"btn1");
}); 
```

但是，如果您仍想扩展 dijit/Dialog，您可以执行以下操作（例如在 MyDialog.js 等文件中）：

```
define(["dojo/_base/declare", "dijit/DialogUnderlay"], 
function(declare, DialogUnderlay) {

    return declare(DialogUnderlay, {
        myCustomDialogProperty : foo
        // other customizations [...]
    });

}); 
```

有关其他选项，请参阅[dojo/_base/declare](http://dojotoolkit.org/reference-guide/1.8/dojo/_base/declare.html#dojo-base-declare)的文档...

# asp.net-mvc - orchard contenttype 从 2 个不同的数据库中获取数据

> ID：15616449
> 
> 赞同：0
> 
> 时间：2013-03-25T13:42:24.297
> 
> 标签：asp.net-mvc, asp.net-mvc-3, orchardcms, orchardcms-1.6

我的情况是我有一个外部数据库，我应该在果园 hp 中提供信息。客户还希望设置新信息，两者都应通过投影显示。

简短的示例类型书：

`Books`位于外部数据库中。

`Books`应该在 orchard 中设置，在 orchard-db 中而不是在 external-db 中。

查询 - 投影应该同时获得`books`-entities 并显示。

有没有一种简单的果园方式来解决我的问题？

不幸的是，我没有找到任何样品......有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T20:38:21.277

根据您的描述，我了解到简而言之，您希望将来自外部数据源的一些数据作为 Orchard 内容项进行管理。这很有可能，它需要发生以下情况：

*   为您的数据创建内容类型。
*   定期从外部数据源中提取更改。
*   从提取的数据中以编程方式创建新类型的内容项。

由于这不是日常场景，尽管至少有一个示例，但我不知道有任何教程：[外部页面](https://orchardexternalpages.codeplex.com/)模块通过从 Mercurial 存储库中拉入 Markdown 页面来完成这一工作。

# css-selectors - 换行符的 CSS 选择器

> ID：15616451
> 
> 赞同：13
> 
> 时间：2013-03-25T13:42:27.410
> 
> 标签：css-selectors, css

假设我有几个相邻的元素：

```
<div class="container">
  <div>1</div>
  <div>2</div>
  <div>3</div>
  <div>4</div>
  <div>5</div>
  <div>6</div>
</div> 
```

样式如下：

```
.container > div {
  display:inline-block;
  white-space:nowrap;
} 
```

由于我们使用`display:inline-block`的是 s ，因此`div`s 将作为内联元素流动。我想要做的是能够指定一个 CSS 规则，**当兄弟`div`s 布置在同一行上**时应该应用该规则（即中间没有插入换行符）。

例如，假设`div`上面的 s 如下图所示：

```
[ 1 ][ 2 ][ 3 ][ 4 ]
[ 5 ][ 6 ] 
```

我想编写一个 CSS 规则来匹配元素 2、3、4 和 6（即`div`s 与在同一行上布置的兄弟姐妹）或逆集（元素 1 和 5，即`div`没有先前兄弟姐妹的 s布置在同一行）。

这对于样式非常有用，例如（假设`++`是我正在寻找的选择器）

```
.container > div ++ .container > div {
  /* separator between elements on the same line */
  border-right:1px solid #000; 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T13:56:58.933

CSS 中没有这样的选项，尽管它会很有用。您可以通过检索定位数据在 javascript 中检测到它，例如它与文档的 Y 偏移量。当它不同时，您可以为替代样式添加类名。只是一个快速的[jQuery](http://jquery.com/)示例：

```
var topOffset;
$(document).ready(function(){
    $('.container div').each(function(index){
        if (index === 0) {
          // first item, set offset
          topOffset = $(this).offset().top;
          $(this).addClass('new-row');
        } else if (topOffset < $(this).offset().top){
          // new item, new row

          $(this).addClass('new-row');
          topOffset = $(this).offset().top;
        }
    });
}); 
```

这应该导致：

```
<div class="container">
  <div class="new-row">1</div>
  <div>2</div>
  <div>3</div>
  <div>4</div>
  <div class="new-row">5</div>
  <div>6</div>
</div> 
```

这可以使用类选择器适当地设置样式。

**编辑** [jsFiddle 上的工作示例](http://jsfiddle.net/dVAJa/)

注意：不适用于调整大小，但是当您将其移动到在窗口调整大小时调用的函数时可以修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T13:56:33.847

您可以尝试的一件事是 nth-child() 选择器。但是您可能必须改变处理这种情况的方式。

例如，假设你想要这样，所以你可以在所有元素之间有一个间隙，除了每一行的开头和结尾，即使在流到新行时，你也可以这样做：

**HTML**：

```
<div class="container">
    <div class="item">1</div>
    <div class="item">2</div>
    <div class="item">3</div>
    <div class="item">4</div>
    <div class="item">5</div>
    <div class="item">6</div>
</div> 
```

**CSS**：

```
.container {
    border: 1px solid red;
    width: 810px;
}

.container > .item {
    border: 1px solid blue;
    display: inline-block;
    margin-right: 10px;
    width: 190px;
}

.container > .item:nth-child(4n) {
    margin-right: 0;
} 
```

有了这个，你可以有类似的东西：

```
----------------------------------
|  1  |  |  2  |  |  3  |  |  4  |
----------------------------------
|  5  |  |  6  |
---------------------------------- 
```

注意子元素之间的间隙。当然，您也可以使用此方法应用其他样式，即仅在 2 个 div 之间设置边框。

我希望这有帮助 ：）

**小提琴**：

[http://jsfiddle.net/p6rn9/](http://jsfiddle.net/p6rn9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-03T07:49:54.217

也许有点晚了，但我想你想在行的左边或右边显示没有无聊边距的项目。

如果您使用 the`margin-left: 10px`或`margin-right: 10px`to 元素，您将拥有：

```
+----------+------+----------+------+
| l_margin | col1 | l_margin | col2 |        (with l-margins)
+----------+------+----------+------+

+------+----------+------+----------+
| col1 | r_margin | col2 | r_margin |        (with r-margins)
+------+----------+------+----------+ 
```

正如你所看到的，你总是有太多的边距，如果你想要居中，你会遇到一些麻烦。

为了解决它，只需添加到父元素 a`margin-left: -10px`或`margin-right: -10px`负值等于元素之间的边距。

```
+------+----------+------+----------+------+
|                   page                   | -r_margin 
+------+----------+------+----------+------+
| col1 | r_margin | col2 | r_margin | col3 | r_margin  
+------+----------+------+----------+------+ 
```

页边距仍然在页面之外，因此您可以将行居中而不会出现问题！

[**jsFiddle 演示**](http://jsfiddle.net/khwLuq17/1/)

# c# - RSACryptoServiceProvider.Encrypt(byte[] rgb, bool fOAEP) 中的 rgb 是什么

> ID：15616453
> 
> 赞同：3
> 
> 时间：2013-03-25T13:42:29.580
> 
> 标签：c#, encryption, cryptography, naming-conventions

什么是rgb `RSACryptoServiceProvider.Encrypt( byte[] rgb, bool fOAEP )`？

我的意思是，r、g 和 b 代表什么？

（我对密码学的了解几乎为零。如果您认为答案很简单，请原谅我的问题）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T14:02:28.727

`rgb`在[匈牙利符号](http://en.wikipedia.org/wiki/Talk%3aHungarian_notation#Origin.2C_Systems_vs._Apps)中是“字节范围”。

这是一个有趣的问题，但它与密码学无关，正如 Encrypt 和 Decrypt 分别将 rgb 作为明文和密文的参数这一事实所证明的那样。

我还想指出，该`fOAEP`参数不仅使用[匈牙利符号](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378932%28v=vs.85%29.aspx)，您不应该在 C# 中这样做，而且由于它不是标志，所以使用不正确。

# c# - Facebook Graph API 403 禁止错误

> ID：15616454
> 
> 赞同：1
> 
> 时间：2013-03-25T13:42:42.047
> 
> 标签：c#, facebook-graph-api, http-status-code-403

这类似于这里的一些问题，但似乎没有一个问题能产生对我有帮助的答案。我从 ac#/.Net 应用程序调用图形 api 来获取特定相册的照片，我收到 403 错误...有时。

我从来没有在我的开发环境中收到过错误，只有在生产中。我还将响应缓存一个小时，因此应用程序在给定小时内访问 API 的次数最多约为 20 次，而不是一次全部。当它出错并且根本不显示图像时，我目前正在吞下异常，但这不是一个长期的解决方案。

```
var request = WebRequest.Create("https://graph.facebook.com/ALBUM_ID/photos");
var stream = request.GetResponse().GetResponseStream(); 
```

大约一个月前才开始发生这种情况，但我在重大更改列表中没有看到任何暗示这种行为的内容。任何见解将不胜感激。

**更新**

这隐藏在响应流中。

> {"error":{"message":"(#4) 达到应用程序请求限制","type":"OAuthException","code":4}}

考虑到我只打了几次 api，我这辈子都看不到如何达到极限。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-11T08:15:02.203

如果您向不需要 access_token 的 FB 图 API 端点之一发出 GET 请求，这并不意味着您不应将其包含在请求参数中。如果您按照 FB 文档中所说的不包含 access_token 进行操作，那么在 FB 服务器端它会注册到您的服务器机器中。因此，可以很容易地达到限制（无论数量是多少）。但是，如果您将用户访问令牌放入请求中（&access_token=XXXXXX），然后请求将注册到特定用户，因此几乎不会达到限制。您可以使用一个简单的脚本来测试它，该脚本在有和没有用户 access_token 的情况下发出 1000 个请求。

注意，FB 应用程序访问令牌是不够的，因为您将面临同样的问题：请求将被注册到应用程序 access_token 中，这种情况类似于在没有 access_token 的情况下发出请求。

# angularjs - 分组后端 API

> ID：15616455
> 
> 赞同：4
> 
> 时间：2013-03-25T13:42:46.103
> 
> 标签：angularjs, angularjs-service

在使用 AngularJS 的 $http 服务时，我发现很难管理所有到后端的 url - 它们分布在控制器的代码中。有时它们甚至是重复的。大多数情况下，它们都是`$http.get('/api/something').then(...)`.

将它们全部放到不同的服务中听起来很不合理：它只是一行代码，可能只是很小的修改（比如添加标题等）。

其他解决方案可能是将它们放入常量中，但在这种情况下，我仍然会使用`$http.get(APIURLs.SomeURL)`看起来有点冗长的...

所以问题是：管理后端 URL 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:42:46.103

目前我想出了将它们分组为服务并将它们公开为对 $http 的调用的想法。这是我的解决方案： [http ://plnkr.co/edit/VjqXHBV54bmjKCuGJ4qX?p=preview](http://plnkr.co/edit/VjqXHBV54bmjKCuGJ4qX?p=preview)

服务：

```
.factory('AdminAPI', function($http) {
   var apiMap = {
     'DeleteAuth': {url:'/api/oauth/delete',method:'PUT'},
     'GetInvalidUser': {url:'/api/users/invalid',method:'GET'},
     'CreateItem': {url:'/api/items/create',method:'POST'}     
   };
   var api = {};  
   var prepareCall = function(config) {
     return function(params) {  
       var requestConfig = angular.copy(config);
       if (config.method=='GET')
          requestConfig.params = params;
       else 
          requestConfig.data = params;       
       return $http(requestConfig);
     };
   };
   for(var name in apiMap) 
     api[name] = prepareCall(apiMap[name]);   
   return api;
}); 
```

在控制器中，我执行以下操作：

```
AdminAPI.DeleteAuth({data:123}).then(function(result) {
  //
}); 
```

在这种情况下，我有一些抽象（不必注入`$http`控制器），因此单元测试变得更容易一些（我不必使用 $httpBackend 服务，只需模拟我的服务调用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:55:23.327

利用角度[Module.constant](http://docs.angularjs.org/api/angular.Module)：

*   将可重复使用的设置移动到单个对象；
*   定义包装此对象的角度模块：

    ```
    angular.module('myApp.constants', []).constant('config', {
        ROUTES: {
           home: '/home.html',
           about: '/about.html'
        }
    }); 
    ```

*   `myApp.constants`将模块与所有其他模块一起加载到应用程序中：

    ```
    angular.module('myApp', [
        'myApp.constants',
        'myApp.services',
        'myApp.controllers',
        'myApp.filters',
        'myApp.directives'
    ]); 
    ```

之后，您可以注入`config`依赖项并访问定义的哈希。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T22:35:45.250

好问题。我建议的方法是将常量放在这样的`constant`声明中：

```
angular.module('fooApp').constant('config', {
                                      api: {
                                        baseUrl: 'http://api.example.com/api',
                                        key: 'SECRET_API_KEY',
                                      }
}); 
```

你可以实现一个`httpResourceFactory`负责创建 $http 或 $resource 引用，这些引用使用 config.xml 中定义的常量指向不同的端点。这可以在服务中实现。

然后可以将所有 API 端点定义放入单个服务中。

```
angular.module('fooApp').factory('dataService', ['httpResourceFactory',  function(httpResourceFactory) {

    var PUBLIC_API = {};

    PUBLIC_API.Orders = httpResourceFactory('/orders/:id');
    PUBLIC_API.Users = httpResourceFactory('/some-url/users/:id');

    return PUBLIC_API;

  }]); 
```

然后在您的控制器中，您可以注入`dataService`并执行以下操作：

```
$scope.users = dataService.Users.query(); 
```

希望这能澄清它。我很着急，所以问得更具体一些，稍后我会提供更多示例。

# wiktionary - 维基词典：获取给定单词的页面列表

> ID：15616461
> 
> 赞同：0
> 
> 时间：2013-03-25T13:43:03.097
> 
> 标签：wiktionary, georgian

我想要一个给定单词在维基词典中存在的页面列表。案例：我在格鲁吉亚语中搜索单词მამა（意思是爸爸）的定义。格鲁吉亚语维基词典中没有这个词的页面，所以我想要一份所有同义词的列表。

我已经搜索并使用此页面进行了测试：

[`https://en.wikipedia.org/wiki/Special:ApiSandbox#action=query&prop=revisions&format=json&rvprop=ids&rvlimit=10&titles=Foo&titles=Foo`](https://en.wikipedia.org/wiki/Special%3aApiSandbox#action=query&prop=revisions&format=json&rvprop=ids&rvlimit=10&titles=Foo&titles=Foo)

任何想法？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-02T04:14:30.100

在字典级别没有维基词典的 API，只有在 wiki 级别，这可能没有太大帮助。有关更多详细信息，请参阅此问题：[如何检索维基词典的单词内容？](https://stackoverflow.com/questions/2770547/is-there-an-api-available-to-retrieve-raw-wiktionary-data?rq=1)

因此，没有 API 可以让您查询同义词，甚至查询格鲁吉亚语条目或数据。

您可以获取原始 wikitext 或 HTML 格式的维基词典页面，您可以下载 XML 格式的整个数据库转储，您可以尝试从头开始解析。

对格鲁吉亚语有帮助的一件事是它有一个独特的字母表，因此格鲁吉亚语脚本中的绝大多数维基词典条目将用于格鲁吉亚语。（但在 Laz、Mingrelian、Old Georgian 和 Svan 中也有少量词条，它们也将使用格鲁吉亚文字。）

# ios - 在弹出框 iOS 中使用集合视图

> ID：15616465
> 
> 赞同：0
> 
> 时间：2013-03-25T13:43:10.473
> 
> 标签：ios, objective-c, ipad, popover, collectionview

我想在弹出窗口中有一个集合视图。所以首先我设置了我的 Collection 视图控制器和我的自定义单元格。当我从这里启动程序时，它工作正常。

在另一个视图控制器中，我创建了一个以集合视图作为其内容的弹出框控制器。当我点击工具栏按钮时，弹出框需要变为活动状态。

当我运行模拟器时，出现此错误：

> '无法使同类视图出列：带有标识符 CameraSystemCell 的 UICollectionElementKindCell - 必须为标识符注册一个 nib 或一个类，或者连接情节提要中的原型单元格

这是我的**viewcontroller.m**代码：

```
#import "ViewController.h"
#import "CameraSystemMenuViewController.h"

@interface ViewController () <UIPopoverControllerDelegate>
{
    CameraSystemMenuViewController *cameraSystemMenu;
    UIPopoverController *popoverController;
}
@end

@implementation ViewController
@synthesize cameraSystemButton = _cameraSystemButton;

- (void)viewDidLoad
{
    [super viewDidLoad];

    UICollectionViewFlowLayout *aFlowLayout = [[UICollectionViewFlowLayout alloc] init];
    cameraSystemMenu = [[CameraSystemMenuViewController alloc] initWithCollectionViewLayout:aFlowLayout];

    popoverController = [[UIPopoverController alloc] initWithContentViewController:cameraSystemMenu];
    [popoverController setDelegate:self];

}

- (IBAction)cameraSystemSelectButton:(id)sender
{
    [popoverController presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
    [popoverController setPopoverContentSize:CGSizeMake(320, 400)];

}
@end 
```

这是我在 CameraSystemMenuViewController.m 中的**cellForItemAtIndexPath**：

```
-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    CameraSystemCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"CameraSystemCell" forIndexPath:indexPath];
    [[cell collectionImageView] setImage:cameraImage];
    cell.cameraSystemName.text = [cameraNumbers objectAtIndex:indexPath.item];

    return cell;
} 
```

单元标识符是正确的，并且情节提要单元具有正确的自定义类。我不必注册，因为我使用的是故事板中的自定义单元格。该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:16:27.240

`UICollectionViewController`根据您的问题，我可以理解您正在尝试在情节提要中进行设置。它将为您提供带有原型单元 ( `I don't have to register because I am using a custom cell that is in the storyboard`) 的集合视图。如果我理解错误，请忽略它。但是在`viewController`您再次实例化 collectionViewController 时，不使用情节提要。 **所以而不是**

```
UICollectionViewFlowLayout *aFlowLayout = [[UICollectionViewFlowLayout alloc] init];
cameraSystemMenu = [[CameraSystemMenuViewController alloc] initWithCollectionViewLayout:aFlowLayout]; 
```

**利用**

```
UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    cameraSystemMenu =   [mainStoryboard instantiateViewControllerWithIdentifier:@"CameraSystemMenuViewController"]; 
```

试一下..：）

# php - FPDF 表格内容与单元格重叠

> ID：15616468
> 
> 赞同：4
> 
> 时间：2013-03-25T13:43:18.393
> 
> 标签：php, fpdf

我想创建一个可以像动态表一样工作的东西。可能是因为我知道它将有多少个单元格，但有点因为我放入单元格的内容可能是不同的长度。我使用了`fpdf`网站发布的代码：

```
require('fpdf/fpdf.php');
class PDF extends FPDF{
function BasicTable($header, $data)
{
    // Header
    foreach($header as $col)
        $this->Cell(40,7,$col,1);
    $this->Ln();
    // Data
    foreach($data as $row)
    {
        foreach($row as $col)
            $this->Cell(40,6,$col,1);
        $this->Ln();
    }
}
} 
```

现在，如果我将这些值放入表中：

```
$header = array('Country', 'Capital', 'Area (sq km)', 'Pop. (thousands)');
$data =  array(array('a','a','a','a'), array('a','a','a','a'), array('a','a','a','a'), array('a','a','a','a'));
$pdf->SetY(45);
$pdf->BasicTable($header,$data); 
```

一切都好。但是，当我想将我的内容更改`'a'`为更复杂的内容时，例如由几个单词组成的句子，我的文本正在“离开”单元格并开始与下一个单元格重叠。

fpdf中有没有办法自动调整单元格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:15:59.673

您必须使用 FPDF::MultiCell() 方法，该方法用于显示多行内容。

在 MultiCell 中，文本会自动换行，您不会遇到这个问题。

您还可以查看 FPDF 上的抽象代码，例如[PDML](http://www.pdml-pdf.net/)或[HTML2FPDF](http://sourceforge.net/projects/html2fpdf/)，或者如前所述的 TCPDF，但我不知道这个。

祝你的项目好运。

# python - Python循环与etree

> ID：15616471
> 
> 赞同：1
> 
> 时间：2013-03-25T13:43:24.413
> 
> 标签：python, xml, loops

我敢肯定，你们中的许多人都看到了我最近提出的大量小问题。这个周末，我终于放弃并搬到了 etree，并且有一个简单的问题：我应该如何循环它以提供以下格式的输出：

名称 Class_Name 成员 颜色 #field y #field z

XML 示例（有许多不同类型的 Class_Name）：

```
<network_objects>
<network_object>
<Name>Test_Group_A</Name>
<Class_Name>network_object_group</Class_Name>
<members>
  <reference>
    <Name>Host1</Name>
    <Table>network_objects</Table>
  </reference>
  <reference>
    <Name>Host2</Name>
    <Table>network_objects</Table>
  </reference>
  <reference>
    <Name>Host3</Name>
    <Table>network_objects</Table>
  </reference>
  <reference>
    <Name>Host4</Name>
    <Table>network_objects</Table>
  </reference>
  <reference>
    <Name>Host5</Name>
    <Table>network_objects</Table>
  </reference>
  <reference>
    <Name>Host6</Name>
    <Table>network_objects</Table>
  </reference>
  <reference>
    <Name>Host7</Name>
    <Table>network_objects</Table>
  </reference>
</members>
<color><![CDATA[deep pink]]></color>
<comments><![CDATA[no comment]]></comments>
<group_convention_query><![CDATA[]]></group_convention_query>
<group_sort_type>3</group_sort_type>
<is_convention_on>false</is_convention_on>
<member_class><![CDATA[network_object]]></member_class>
<members_query><![CDATA[]]></members_query>
<type><![CDATA[group]]></type>
  </network_object>
 </network_objects> 
```

以下代码为我提供了每个名称的一次迭代（我想要的）：

```
for Name in tree.iterfind('network_object/Name'):
    print (Name.text) 
```

但是，如果我在 for 循环中执行 for 循环，我会得到所有名称的输出，以及 Class_Name 的所有变体（与实际情况相比）。例如：

```
for Name in tree.iterfind('network_object/Name'):
    for Class_name in tree.iterfind('network_object/Class_Name'):
          print (Name.text,Class_name.text)

DB_Servers host_plain
DB_Servers network_object_group
DB_Servers dynamic_object 
```

等等等等，我相信你明白了。

我将如何收集我需要的所有数据，然后将每个对象及其相关详细信息放在它自己的行上？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:51:03.307

Both the `<Name>` and the `<Class_Name>` are children of the `<network_object>`. So you could use `iterfind` to find all the `<network_objects>`, and then use `find` to find the single `<Name>` and `<Class_Name>` child elements:

* * *

For example, with this setup:

```
import xml.etree.ElementTree as ET

content='''<network_objects>
<network_object>
<Name>Test_Group_A</Name>
<Class_Name>network_object_group</Class_Name>
<members>
  <reference>
    <Name>Host1</Name>
    <Table>network_objects</Table>
  </reference>
  <reference>
    <Name>Host2</Name>
    <Table>network_objects</Table>
  </reference>
  <reference>
    <Name>Host3</Name>
    <Table>network_objects</Table>
  </reference>
  <reference>
    <Name>Host4</Name>
    <Table>network_objects</Table>
  </reference>
  <reference>
    <Name>Host5</Name>
    <Table>network_objects</Table>
  </reference>
  <reference>
    <Name>Host6</Name>
    <Table>network_objects</Table>
  </reference>
</members>
</network_object>
</network_objects>  
''' 
```

The code

```
root = ET.fromstring(content)
for network in root.iterfind('network_object'):
    name = network.find('Name')
    class_name = network.find('Class_Name')
    print (name.text,class_name.text)
    for subname in network.iterfind('members/reference/Name'):
        print(subname.text) 
```

yields

```
('Test_Group_A', 'network_object_group')
Host1
Host2
Host3
Host4
Host5
Host6 
```

# java - 如何使用 Maven 签署多个 JNLP 应用程序

> ID：15616472
> 
> 赞同：2
> 
> 时间：2013-03-25T13:43:26.270
> 
> 标签：java, maven, jnlp

我们将 JNLP 应用程序用于我的业务。实际使用需要为每个版本手动签名 jar。这肯定会导致拥有不同的证书、过期的证书等等..

我们 POC'ed maven 使用 Maven Jarsigner 插件自动签署应用程序。

现在，将这种工艺工业化的最佳方法是什么？我希望在所有应用程序之间共享证书，而不是每次都重新创建一个。

尤其是：

*   为一堆公司申请提供证书是否正确，或者我应该考虑为每个申请提供一个证书？

*   我们可以想象将证书存储为依赖项（在业务仓库下）并在构建时同时获取开发和发布证书吗？说本地构建的开发证书和发布的发布证书。

*   这种使用有什么缺陷？

*   有没有其他/更好的解决方案？

感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T07:06:31.357

有很多方法可以解决这个问题，所以我只能分享我对这个问题的想法。

a) 我会假设不同的版本会在不同的分支上，所以本质上我们一次只处理一个版本

b）然后我假设每个版本，每个环境都有不同的证书。每个环境部分可以使用 maven 配置文件（[http://maven.apache.org/guides/introduction/introduction-to-profiles.html](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)）处理，所以......

是否拥有多个或单个证书是一个偏好问题。由于它提供了任何给定用户和给定应用程序之间的信任级别，因此它本质上是对风险与可维护性的判断。风险，因为具有相同证书的多个应用程序会提供更高的曝光率，也会导致恶意曝光，任何违反一个都是违反所有。因此，证书保护的内容可能很重要。可维护性在于所有应用程序都遵循相同的更新周期，并且对一个应用程序的更改意味着对所有应用程序的更改。

因此，耦合度更高一些，风险更大，维护更简单。如果您是全球企业 Acme Inc 的风险可能比您是本地企业 Icme Inc. 的风险更高，并且可能是其他人的数据或金钱邀请最安全的选择。

我认为没有理由不能存储证书。无论是在存储库中还是在其他一些安全的存储库中，或者只是躺在那里。更有趣的可能是私钥，您可以将其指定为属性，并让开发者将其绑定到开发者配置文件，而发布者则省略，因此您必须在命令行上提供它们。

假设您使用 maven jarsigner 插件，您可能有 ${my.keypass} 和 ${my.keystore}，然后是设置了两个属性的开发配置文件，以及只设置了密钥库的发布配置文件。

上次我以类似的方式使用证书时，我有： - 一组单独的组件 - 在单个存储库中 - 可以构建为一个完整的实体。

因此，共享证书很容易。除最终产品外的所有证书都在源代码存储库中 发布证书位于安全服务器上，我们有一个只有少数人可以访问的批处理过程。

至于安全妥协..我认为我们从未遇到过，但我们已经准备好了:)

# css - 当内容包装器为 100% 时，Gridster 中心对齐？

> ID：15616473
> 
> 赞同：0
> 
> 时间：2013-03-25T13:43:27.580
> 
> 标签：css, html, gridster

如果包装器设置为 100%，是否有人想出如何在 Gridster 中将内容包装器居中对齐？

我似乎无法让它工作。

当浏览器窗口调整大小时，有一些我似乎无法更改的右填充。

任何人都可以帮忙吗？

看到这个：[http ://www.danieldoktor.dk/test5/test5.html](http://www.danieldoktor.dk/test5/test5.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:29:20.317

所以这里的问题是 jquery 给 LI 元素一个绝对位置。我已经覆盖了使用重要的内容，然后您可以使用 text-align 和 display inline-block 对齐所有内容。

```
.contentWrapper {
    margin: 10px auto;
    padding: auto;
    overflow: hidden;
    position: static !important;
    display: inline-block;
    text-align: left;
}

.gridster {
    margin: 0 auto;
    opacity: .8;
    -webkit-transition: opacity .6s;
    -moz-transition: opacity .6s;
    -o-transition: opacity .6s;
    -ms-transition: opacity .6s;
    transition: opacity .6s;
    text-align: center;
} 
```

希望这有意义并有所帮助。

# salesforce - 无效的 API 密钥或访问令牌（无法识别的登录名或密码错误）

> ID：15616482
> 
> 赞同：0
> 
> 时间：2013-03-25T13:43:37.443
> 
> 标签：salesforce, httprequest, httpresponse, apex-code, shopify

我必须在 Salesforce 中向 Shopify 发出 http 请求。我使用以下 url 格式作为 setEndpoint 方法的端点 url。

```
HttpRequest req= new HttpRequest(); 
req.setEndpoint('https://apikey:password@hostname/admin/resource.xml'); 
req.setMethod('GET'); 
```

我得到以下日志：

```
CALLOUT_RESPONSE|[18]|System.HttpResponse[Status=Unauthorized, StatusCode=401] 
```

我从 HttpResponse 的正文中获取返回值：

```
<?xml version="1.0" encoding="UTF-8"?> <hash> <errors>[API] Invalid API key or access token (unrecognized login or wrong password)</errors> </hash> 
```

我也尝试过遵循结构，但我没有成功。

```
Blob headerValue = Blob.valueOf(apikey+ ':' + password);
String authorizationHeader = 'BASIC ' +
EncodingUtil.base64Encode(headerValue);
req.setHeader('Authorization', authorizationHeader); 
```

HttpResponse 状态码为 200 我该怎么办。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:51:08.510

“基本”字区分大小写。我用它改变了“BASIC”。问题已解决。

```
Blob headerValue = Blob.valueOf('apikey:password');
    String authorizationHeader = 'Basic ' + EncodingUtil.base64Encode(headerValue);
    req.setHeader('Authorization', authorizationHeader); 
```

# javascript - 如何从 azure 数据库中获取行数？

> ID：15616486
> 
> 赞同：5
> 
> 时间：2013-03-25T13:43:43.653
> 
> 标签：javascript, azure, windows-8, windows-store-apps, azure-mobile-services

我正在开发一个 Windows 商店 javascript 应用程序。该应用程序使用来自 azure 移动服务的数据。考虑下面的代码：

```
var itemTable = mobileService.getTable('item');
//item is the table name stored in the azure database 
```

该代码获取整个表`item`并将其保存到一个变量`itemTable`中。

什么代码将返回存在的行数`itemTable`？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-02T00:47:37.710

如果有人来到这里并对如何仅在 C# 上获取 totalCount 感兴趣（比如我），那么您就是这样做的：

```
var table =  MobileService.GetTable<T> ();
var query = table.Take(0).IncludeTotalCount();
IList<T> results = await query.ToListAsync ();
long count = ((ITotalCountProvider)results).TotalCount; 
```

归功于[这里的这篇博文](http://blogs.msdn.com/b/kevinash/archive/2013/02/13/retrieving_2d00_more_2d00_data_2d00_from_2d00_azure_2d00_mobile_2d00_services_2d00_using_2d00_paging.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T15:05:28.630

您正在寻找的是`includeTotalCount`表/查询对象上的方法（不幸的是，文档中缺少它，我将向产品团队提交一个错误以修复它）。

当您调用`read`查询对象时，默认情况下它将返回 50 个（IIRC，数字可能不同）元素，以防止天真的调用返回非常大的表中的所有元素（因此会产生出站带宽成本保留服务，或达到免费服务的配额）。所以获取表中的所有元素，获取结果的长度可能并不准确。

如果您想要的只是表中元素的数量，您可以使用下面的代码：返回*零*个元素和总数。

```
 var table = client.getTable('tableName');
    table.take(0).includeTotalCount().read().then(function (results) {
        var count = results.totalCount;
        new Windows.UI.Popups.MessageDialog('Total count: ' + count).showAsync();
    }); 
```

如果您想查询一些元素，并且还包括总计数（即，用于分页），只需添加适当的`take()`和`skip()`调用，`includeTotalCount`以及。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T14:20:32.127

您需要对表查询执行[`read()`](http://msdn.microsoft.com/en-us/library/windowsazure/jj554224.aspx)，[然后](http://msdn.microsoft.com/en-us/library/windowsazure/jj613353.aspx)获取`length`结果。

```
var items, numItems;
itemTable.read().then(function(results) { items = results; numItems = items.length; }); 
```

如果您只显示记录计数而不是整个结果 - 您应该只选择 ID 列以减少传输的数据量。[我在JS Query API](http://msdn.microsoft.com/en-us/library/windowsazure/jj613353.aspx)中还没有看到`count()`可用的方法来满足这个需求。

```
var itemTable = mobileService.getTable('item').select('itemID'); 
```

# magento - 任何页面加载时的 Magento 事件

> ID：15616489
> 
> 赞同：19
> 
> 时间：2013-03-25T13:43:51.073
> 
> 标签：magento

我想知道在magento中渲染到html之前是否每次加载页面时都会触发一次事件？

如果您想为不依赖于用户会话的半静态属性执行一些业务逻辑，这可能会很有用。

例如，我将使用它来将规范标签传递到 magento 的标头。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-25T14:20:46.600

对于大多数页面/内容生成请求，有*几个*与请求相关的事件。以下是一些有用的处理顺序的部分列表，我希望其他人可以与其他人一起评论这篇文章。其中许多不适合您的需要（我在下面用粗体标出了您应该开始考虑的地方）。还有一些与块实例化相关的事件，尽管*可以*出于您的目的观察它们，但它们对每个块都是通用的，并且确实不合适。

*   第一个实际的单发事件是[`controller_front_init_before`](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Core/Controller/Varien/Front.php#L128). 此事件在前端控制器初始化中调度，以响应所有调度的请求。因为它是在调用动作控制器之前调度的，所以只有全局区域的观察者才能观察到这个事件。

*   假设请求通过路由器从前端控制器路由到动作控制器，[在渲染之前可以观察到一些事件`preDispatch()`](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Core/Controller/Varien/Action.php#L528)`controller_action_predispatch`- 请注意可以用于所有事件的通用事件句柄与两个动态事件句柄：

    ```
    Mage::dispatchEvent('controller_action_predispatch', array('controller_action' => $this));
    Mage::dispatchEvent('controller_action_predispatch_' . $this->getRequest()->getRouteName(),
        array('controller_action' => $this));
    Mage::dispatchEvent('controller_action_predispatch_' . $this->getFullActionName(),
        array('controller_action' => $this)); 
    ```

*   响应的呈现方式可能会影响可用的事件；主要变化来自是否使用布局更新来呈现响应（以及如何）。例如，[`core_layout_update_updates_get_after`](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Core/Model/Layout/Update.php#L419)可用于将布局更新文件注入配置的模块布局更新文件列表（一种罕见但可能有用的情况）。控制器动作与布局建模密切相关，因此有一些事件可以工作：

    *   [`controller_action_layout_load_before`](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Core/Controller/Varien/Action.php#L300)
    *   [`controller_action_layout_generate_xml_before`](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Core/Controller/Varien/Action.php#L318)
    *   [`controller_action_layout_generate_blocks_before`](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Core/Controller/Varien/Action.php#L337)和[`controller_action_layout_generate_blocks_after`](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Core/Controller/Varien/Action.php#L349)-**后者将首先适用于您的需求**

假设`renderLayout()`在您关心的所有操作中都使用了它[，它会调度](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Core/Controller/Varien/Action.php#L384)两个事件（一个通用事件和一个特定于路由的事件） ：

```
 Mage::dispatchEvent('controller_action_layout_render_before');
    Mage::dispatchEvent('controller_action_layout_render_before_'.$this->getFullActionName()); 
```

在完成所有路由、调度、视图配置、块实例化和渲染之后，前端控制器在发送响应之前调度了一个最后的事件：. 此活动不适合您的需要，但它是开始此答案的活动的一个很好的书挡。 [`controller_front_send_response_before`](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Core/Controller/Varien/Front.php#L186)`controller_front_init_before`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T14:08:22.790

[http://www.nicksays.co.uk/magento-events-cheat-sheet-1-7/](http://www.nicksays.co.uk/magento-events-cheat-sheet-1-7/) 这会有所帮助。

`app/code/core/Mage/Core/Controller/Varien/Action.php` 这个事件

`controller_action_layout_load_before`

被解雇

`app/code/core/Mage/Core/Block/Abstract.php`事件

```
core_block_abstract_to_html_before 
```

以上两个事件可能会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T14:09:50.003

我想你正在寻找这个活动`controller_action_layout_render_before_RouteName_ControllerName_ActionName`

您还可以记录`Mage`在以下函数中从类中的任何页面加载时触发的所有事件

```
public static function dispatchEvent($name, array $data = array())
    {
        Mage::log($name);
        Varien_Profiler::start('DISPATCH EVENT:'.$name);
        $result = self::app()->dispatchEvent($name, $data);
        Varien_Profiler::stop('DISPATCH EVENT:'.$name);
        return $result;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-05T10:48:36.567

我们可以使用观察者来使用 controller_front_init_routers 事件。在该观察者方法中，您可以按如下方式获取请求对象。

`$request = $observer->getEvent()->getData('front')->getRequest();`

# sql - SQL 不同的分组方式

> ID：15616501
> 
> 赞同：2
> 
> 时间：2013-03-25T13:44:32.657
> 
> 标签：sql, select, group-by

SQL：按国家和计数分组，非常简单，但我迷路了，我的 Table1 上有

```
Country    | Optin    | 
--------------------------
USA        | 1        |
USA        | 1        |      
GERMANY    | 0        |      
USA        | 1        |          
GERMANY    | 1        |         
JAPON      | 1        | 
```

我想返回这张表，我只想在 optin part=1 时按国家/地区计数

```
Country    | Optin    | 
--------------------------
USA        | 3        |
GERMANY    | 1        |
JAPON      | 1        |  

SELECT *
FROM Table1
WHERE Optin = 1
GROUP BY Country 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:45:43.107

> 当 optin part=1 时，我只想按国家/地区计数

使用`COUNT`（或`SUM`因为所有`optin`的返回 = 1）与`GROUP BY country`：

```
SELECT Country, COUNT(optin) 
FROM table1
WHERE optin = 1
GROUP BY country; 
```

[**SQL 小提琴演示**](http://www.sqlfiddle.com/#!2/9658d/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T13:45:53.617

```
SELECT  Country, SUM(CASE WHEN Optin = 1 THEN 1 ELSE 0 END) totalOptin
FROM    TableName
GROUP   BY Country 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/ecbc1/1)

# junit - 如何在fitnesse中模拟第三方课程

> ID：15616502
> 
> 赞同：0
> 
> 时间：2013-03-25T13:44:37.707
> 
> 标签：junit, mocking, fitnesse, fitnesse-slim

我写了一个夹具：

```
!define TEST_SYSTEM {slim}
!path E:\eclipse\eclipse_workspace\FitnesseDemo\bin 
```

**计算器示例**

```
|com.example.qc.fixture.CalcFixture|
|pad1|pad2|margin1|margin2|get Padding?|get Margin?|
|7|8|8|8|25|26| 
```

在实际代码中，我需要模拟一个第三方类。（Delta）我已经为此编写了代码，但是我如何将该代码包含在 Fitnesse 中。

我创建了一个设置页面，其中包含以下内容：

```
!define TEST_SYSTEM {slim}
!path E:\eclipse\eclipse_workspace\FitnesseDemo\bin
!path E:\Docs\fitnesse\powermock-mockito-1.3.6-full.jar
!path E:\Docs\fitnesse\mockito-all.jar
!path E:\Docs\Junit\powermock-module-javaagent-1.4.10.jar

|Import|
|com.example.DeltaMock| 
```

模拟对象没有被调用。相反，真正的对象被调用。我的设置页面代码错误吗？

* * *

首先，我尝试在 CalcFixture 中进行模拟，但它始终采用真实对象。在 calc 夹具中，我有以下代码

```
public int getPadding() throws Exception {

    Calc calc = new Calc();

    Delta ref = PowerMockito.mock(Delta.class);

    PowerMockito.whenNew(Delta.class).withNoArguments().thenReturn(ref);

    System.out.println("DeltaMocking.padding(rerf===  )" + ref);

    Mockito.stub(ref.padding()).toReturn(10);

    Padding = calc.addpadding(pad1, pad2);

    return Padding;

} 
```

Addpadding 方法有以下代码：

```
public int addpadding(int x, int y) {

    int k=0;

    Delta ref = new Delta();

    System.out.println("Calc.addpadding() refff="+ref);

    int z = ref.padding();

    k = x + y + z;

    return k;
} 
```

Delta 的模拟对象永远不会被调用。

请帮助我完成它..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T05:19:49.263

您的 Fitnesse 测试不应该关心您是使用模拟对象还是真实对象进行测试。所有工作都发生在`CalcFixture`- 这是你应该使用 Mockito 来模拟你需要的对象的地方。

# javascript - Flask 中的动态哈希链接

> ID：15616504
> 
> 赞同：2
> 
> 时间：2013-03-25T13:45:00.090
> 
> 标签：javascript, python, flask, jinja2

好的，所以我在服务器端有这段代码：

```
@app.route('/physical_graph') 
@login_required 
def physical_graph():
    # Some code
    return generate_graph_view() 
```

如果我们点击圆形图标，我们将获得链接**/physical_graph#physical.circular：**

```
<a class="icon" href="/physical_graph#physical.circular">
    <img src="{{url_for('static',filename='images/circular64x64.png')}}" 
         id="circular_icon" width="32" height="32" title="Circular layout"/>
</a> 
```

我的问题是：我怎样才能告诉 Flask 哈希后的字符串是什么？我需要这个，因为注释中的代码取决于这个字符串。我尝试将 app.route 声明为：

```
@app.route('/physical_graph#<some_string>') 
```

但没有成功 - 它给了我错误 404。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:52:14.990

当您将其 ajaxify 时，您需要将 physical.circle 传递给服务器。首先只是对使用的评论`icon:`

```
<!-- notice i change from icon -> graphIcon icon is too general  -->
<!--a stylist would be angry at you for using icon -->
<a class="graphIcon" href="/physical_graph#physical.circular"> .. </a> 
```

* * *

您首先有一些选择是将其传递到 data 属性中，这将放置在 javascript 中的某个位置（仅执行一次）。

```
jQuery("#circular_icon").click(function() {
   $.ajax({
         url:'/physical_graph', 
         data:{
               'graph_type': 'physical_graph.circular'
         },
         'success':function(data){
             //your function goes here. 
         }
   })
} ); 
```

* * *

```
@app.route('/physical_graph') 
@login_required 
def physical_graph():
  _type = request.args.get('graph_type') 
```

# perl - Perl 中的动态哈希数组

> ID：15616507
> 
> 赞同：0
> 
> 时间：2013-03-25T13:45:07.637
> 
> 标签：perl, perl-module

我有一个这样的 CSV 文件：

```
name,email,salary
a,b@b.com,1000
d,e@e.com,2000 
```

现在，我需要将其转换为 Perl 中的哈希映射数组，所以当我执行以下操作时：

```
table[1]{"email"} 
```

它返回 e@e.com。

我写的代码是：

```
open(DATA, "<$file") or die "Cannot open the file\n";
    my @table;

    #fetch header line
    $line = <DATA>;
    my @header = split(',',$line);

    #fetch data tuples
    while($line = <DATA>)
    {
        my %map;
        my @row = split(',',$line);
        for($index = 0; $index <= $#header; $index++)
        {
            $map{"$header[$index]"} = $row[$index];
        }
        push(@table, %map);
    }
    close(DATA); 
```

但我没有得到想要的结果..你能帮忙吗？提前致谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T13:51:26.730

This line

```
push(@table, %map) 
```

should be

```
push(@table, \%map) 
```

You want `table` to be a list of hash references; your code adds each key and value in `%map` to the list as a separate element.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T13:57:40.993

没有必要在这里重新发明轮子。您可以使用[`Text::CSV`模块](https://metacpan.org/module/Text%3a%3aCSV)执行此操作。

```
#!/usr/bin/perl

use strict;
use warnings;
use v5.16;
use Text::CSV;

my $csv = Text::CSV->new;
open my $fh, "<:encoding(utf8)", "data.csv" or die "data.csv: $!";
$csv->column_names( $csv->getline ($fh)  );
while (my $row = $csv->getline_hr ($fh)) {
    say $row->{email};
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T13:58:18.827

可能是这样的：

```
#!/usr/bin/perl

use strict;
use warnings;
use 5.010;

my @table;

chomp(my $header = <DATA>);
my @cols = split /,/, $header; # Should really use a real CSV parser here

while (<DATA>) {
  chomp;
  my %rec;
  @rec{@cols} = split /,/;
  push @table, \%rec;
}

say $table[1]{email};

__END__
name,email,salary
a,b@b.com,1000
d,e@e.com,2000 
```

# mongodb - 想从 mongodb 中批量检索记录

> ID：15616510
> 
> 赞同：0
> 
> 时间：2013-03-25T13:45:10.747
> 
> 标签：mongodb, morphia

我正在尝试从 Mongodb 中检索记录，其计数约为 50,000，但是当我执行查询时，Java 耗尽了堆空间并且服务器崩溃了。

以下是我的代码；

```
 List<FormData> forms = ds.find(FormData.class).field("formId").equal(formId).asList(); 
```

任何人都可以帮助我在语法上从 mongodb 批量获取记录。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T00:41:00.157

我不确定 Java 实现是否有这个，但在 c# 版本中有一个 setBatchSize 方法。

使用我可以做的

foreach(coll.find(...).setBatchSize(1000) 中的变量项) {

}

这将获取 find 匹配的所有项目，但它不会一次获取所有项目，而是每批 1000 个。您的代码不会看到这个“批处理”，因为它都是在枚举中处理的。一旦循环尝试获取 1001 项，将从 mongodb 服务器获取另一批。

这应该可以减少堆空间问题。

[http://docs.mongodb.org/manual/reference/method/cursor.batchSize/](http://docs.mongodb.org/manual/reference/method/cursor.batchSize/)

根据您在循环中执行的操作，您仍然可能遇到其他问题，但这将在您的控制之下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:47:30.987

对于任何数据库，获取 50k 条目听起来都不是一个好主意。根据您的用例，您可能想要更改查询或使用[limit 和 offset](https://code.google.com/p/morphia/wiki/Query#Limit)：

```
ds.find(FormData.class)
   .field("formId").equal(formId)
   .limit(20).offset(0)
   .asList(); 
```

请注意，基于范围的查询比使用限制和偏移更有效。

# mysql - mysql - 选择不同的互斥（基于另一列的值）行

> ID：15616511
> 
> 赞同：2
> 
> 时间：2013-03-25T13:45:13.943
> 
> 标签：mysql, sql

首先，我想说的是，如果在阅读了这个问题后，有人对这个问题的信息更丰富的标题有任何建议，请告诉我，因为我认为我的有点缺乏，现在，开始做生意......

鉴于此表结构：

```
+---------+-------------------------------------+------+-----+---------+----------------+
| Field   | Type                                | Null | Key | Default | Extra          |
+---------+-------------------------------------+------+-----+---------+----------------+
| id      | int(11)                             | NO   | PRI | NULL    | auto_increment |
| account | varchar(20)                         | YES  | UNI | NULL    |                |
| domain  | varchar(100)                        | YES  |     | NULL    |                |
| status  | enum('FAILED','PENDING','COMPLETE') | YES  |     | NULL    |                |
+---------+-------------------------------------+------+-----+---------+----------------+ 
```

而这个数据：

```
+----+---------+------------------+----------+
| id | account | domain           | status   |
+----+---------+------------------+----------+
|  1 | jim     | somedomain.com   | COMPLETE |
|  2 | bob     | somedomain.com   | COMPLETE |
|  3 | joe     | somedomain.com   | COMPLETE |
|  4 | frank   | otherdomain.com  | COMPLETE |
|  5 | betty   | otherdomain.com  | PENDING  |
|  6 | shirley | otherdomain.com  | FAILED   |
|  7 | tom     | thirddomain.com  | FAILED   |
|  8 | lou     | fourthdomain.com | COMPLETE |
+----+---------+------------------+----------+ 
```

我想为所有帐户（行）选择具有“完成”状态的所有域。

不得返回具有包含除“完成”之外的任何值的行的任何域。

所以在上面的例子中，我的预期结果是：

```
+------------------+
| domain           |
+------------------+
| somedomain.com   |
| fourthdomain.com |
+------------------+ 
```

显然，我可以通过使用子查询来实现这一点，例如：

```
mysql> select distinct domain from test_table where status = 'complete' and domain not in (select distinct domain from test_table where status != 'complete'); 
+------------------+
| domain           |
+------------------+
| somedomain.com   |
| fourthdomain.com |
+------------------+
2 rows in set (0.00 sec) 
```

这在我们的小模型测试表上可以正常工作，但在实际情况下，有问题的表将有数十（甚至数十）万行，我很好奇是否有*更有效*的方法来做这是因为子查询缓慢而密集。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:57:10.547

这个怎么样：

```
select domain
from   test_table
group by domain
having sum(case when status = 'COMPLETE'
                then 0 else 1 end) = 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:00:26.530

我认为这会奏效。实际上只是将两个基本查询连接在一起，然后比较它们的计数。

```
select
    main.domain
from 
    your_table main

    inner join 
    (
        select 
            domain, count(id) as cnt
        from 
            your_table
        where 
            status = 'complete'
        group by 
            domain
    ) complete
    on complete.domain = main.domain

group by
    main.domain

having
    count(main.id) = complete.cnt 
```

您还应该确保您有一个索引，`domain`因为这依赖于该列上的连接。

# ruby-on-rails - Wickedpdf Heroku 一些图片没有显示

> ID：15616515
> 
> 赞同：0
> 
> 时间：2013-03-25T13:45:20.327
> 
> 标签：ruby-on-rails, heroku, wicked-pdf

Everthing 在我的本地工作完美，但在生产（Heroku）上生成的 pdf 中的一些图像没有显示：

```
<img alt="Bg_pdf" id="background" src="file:////app/app/assets/images/bg_pdf.jpg">
<img alt="Bg_pdf2" id="background2" src="file:////app/app/assets/images/bg_pdf2.jpg">
<img alt="Bg_pdf2" id="background3" src="file:////app/app/assets/images/bg_pdf2.jpg">
<img alt="Bg_pdf2" id="background4" src="file:////app/app/assets/images/bg_pdf2.jpg">

<img alt="Step_4" id="pic3" src="file:////app/app/assets/images/steps/raka/right/step_4.jpg" style="margin-top: 20px;"> 
```

#pic3 没有出现，但上面的所有其他图像都出现了。

为什么生成的pdf中没有出现pic3？是否因为允许某种最大数量的图像？

在我的宝石文件中：

```
gem 'wicked_pdf', github: 'mileszs/wicked_pdf'
gem 'wkhtmltopdf-heroku' 
```

我正在使用辅助方法：

```
<%= wicked_pdf_image_tag("steps/#{session[:product]}/#{session[:sving]}/step_4.jpg", :id => 'pic3', :style => 'margin-top: 20px;') %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:21:52.300

.jpg、jpeg 图像有些问题，改用 .PNG 图像，效果很好。

# delphi - TeeChart 系列 OnMouseEnter 事件

> ID：15616516
> 
> 赞同：1
> 
> 时间：2013-03-25T13:45:22.353
> 
> 标签：delphi, teechart

我正在使用 Rad Studio XE3 附带的 TeeChart 版本。

TeeChart 提供了一个 TChartSeries 事件，当鼠标指针移过系列线时会触发该事件。我使用此事件在指针下显示系列的名称。

问题是，给一个 1 像素宽的系列线，很难让指针准确地越过该线。是否有某种方法可以向事件添加“填充”，以便在行的每一侧触发 X 个像素？

还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T14:44:48.773

我正在向 Line (TLineSeries) 和 FastLine (TFastLineSeries) 类添加一个新属性来完成此操作。

```
Series1.ClickTolerance := 4;   // <-- number of pixels around mouse XY 
```

默认值为零（鼠标 XY 应该正好在该线上），就像当前的行为一样。

作为一种解决方法，如果您使用 TLineSeries，指针可以显示在线点位置，并且内部“单击”函数将考虑指针大小：

```
Series1.Pointer.Visible:=True; 
```

而对于更多的自定义控件，下面的代码与用于检测鼠标点击的内部代码非常相似。Tolerance 常数指定要考虑“在线”的额外像素数。

```
procedure TForm1.Chart1MouseMove(Sender: TObject; Shift: TShiftState; X,
  Y: Integer);

const
  Tolerance=4;

var Clicked,
    t : Integer;
    Position,
    P,Old : TPoint;
begin
  Clicked:= -1;

  Position.X:=X;
  Position.Y:=Y;

  for t:=Series1.FirstValueIndex to Series1.LastValueIndex do
  begin
    P.X:=Series1.CalcXPos(t);
    P.Y:=Series1.CalcYPos(t);

    if t>Series1.FirstValueIndex then
       if PointInLine(Position,P.X,P.Y,Old.X,Old.Y,Tolerance) then
       begin
         Clicked:=t;
         break;
       end;

    Old:=P;
  end;

  if Clicked = -1 then
     Caption:=''
  else
     Caption:=IntToStr(Clicked);
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T14:42:41.620

您可以使用该`PointInLineTolerance`功能在`OnMouseMove`事件中检查它。但是，您必须手动循环系列点以将系列值转换为像素并将它们传递给此函数。

```
uses Series;

procedure TForm1.FormCreate(Sender: TObject);
var i: Integer;
begin
  Chart1.View3D:=false;

  for i:=0 to 5 do
    Chart1.AddSeries(TLineSeries).FillSampleValues;
end;

procedure TForm1.Chart1MouseMove(Sender: TObject; Shift: TShiftState; X,
  Y: Integer);
var series, valueIndex: Integer;
    P0, P1: TPoint;
begin
  Chart1.Draw;
  for series:=0 to Chart1.SeriesCount-1 do
    with Chart1[series] do
    for valueIndex:=FirstValueIndex to LastValueIndex-1 do
    begin
      P0.X:=CalcXPos(valueIndex);
      P0.Y:=CalcYPos(valueIndex);
      P1.X:=CalcXPos(valueIndex+1);
      P1.Y:=CalcYPos(valueIndex+1);
      if PointInLineTolerance(Point(X, Y), P0.X, P0.Y, P1.X, P1.Y, 5) then
      begin
        Chart1.Canvas.TextOut(X+5,Y-10,'Series ' + IntToStr(series));
        exit;
      end;
    end;
end; 
```

# windows - 在 Windows 中使用 bitbucket，但无法获取 tortoisehg

> ID：15616518
> 
> 赞同：0
> 
> 时间：2013-03-25T13:45:24.667
> 
> 标签：windows, tortoisehg, bitbucket

试图在 Windows 中使用 bitbucket。但是 mercurial 无法安装在 windows 中，并且 tortoisehg 无法下载，因为 cdn.bitbucket.com 没有连接（在中国，但我打破了 GFW 和 facebook 等可用）

那么，是windows版的mercurial tortoisehg吗？如果是这样，为什么我得到一个 mercurial-2.5.2.win-amd64-py2.7.exe？从 bitbucket 克隆的任何其他解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:05:33.807

TortoiseHG 只是 Mercurial 的图形外壳。您可以仅使用命令行客户端来获取。

在 中安装软件包后`mercurial-2.5.2.win-amd64-py2.7.exe`，尝试`hg --help`在命令提示符下键入。

# php - 地理数据库和 OpenLayers 之间的传输格式

> ID：15616519
> 
> 赞同：0
> 
> 时间：2013-03-25T13:45:29.270
> 
> 标签：php, openlayers, geojson, spatialite, wkt

我很好奇您的意见，什么是 SpatiaLite 和 OpenLayers 之间最有效的传输格式。目前我正在开发一个基于 SpatiaLite（SQLite 的扩展）和 OpenLayers 的应用程序，并且我使用 GeoJSON 作为传输格式。

我的程序： 1）通过php脚本查询数据库，使用SpatiaLite的函数AsGeoJSON，从而得到geojson格式的数据

2) 使用 php 的 print() 将检索到的数据从 php 变量传输到 JS 变量：

```
$result = $db->query($query);

$r = '{"type": "FeatureCollection","features": [';
while($row = $result->fetchArray(SQLITE3_ASSOC))
{
  $r .= '{"type":"Feature","properties":{}, "geometry":' . $row['geometry'] . '},';
}
$r .= ']}';
print'<script> CadastreBorder = ' . $r . '; </script>'; 
```

3) 通过阅读在 OpenLayers 中为矢量图层创建特征

```
var vectorLayer = new OpenLayers.Layer.Vector(name, {style: style, rendererOptions:
{zIndexing: true}});
var formatGeoJSON = new OpenLayers.Format.GeoJSON({});
vectorLayer.addFeatures(formatGeoJSON.read(CadastreBorder));
map.addLayer(vectorLayer); 
```

有什么方法可以更有效、更好地实现相同的目标？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:09:35.283

不确定速度，但如果您使用的是最新版本的 PHP（5.2 >=），您可能会考虑在 php 的数组上使用[json_encode 。](http://www.php.net/manual/en/function.json-encode.php)您可以创建一个看起来像这样的数组，而不是创建字符串：

```
$geoJSON_array = Array(
    "type" => "FeatureCollection",
    "features" => Array()
    ); 
```

并且对于每一行几何，将新表添加到“特征”：

```
Array(
    "type" => "Feature",
    "properties" => Array(),
    "geometry" => Array(... your geometry),
) 
```

创建这样的数组后，运行`json_encode`它，你就到家了。为了安全起见，我会检查它是否有效（例如，使用[http://geojsonlint.com/](http://geojsonlint.com/)）。这可能会在以后为您提供帮助，例如，当需要支持新信息或向地图添加新类型的元素时。

问题：为什么不使用固定策略加载点？如果您将此 geoJSON 创建为文件/作为脚本，您还可以告诉 openlayers 自动下载它，如下所示：

```
var vectorLayer = new OpenLayers.Layer.Vector(name, {
    strategies: [new OpenLayers.Strategy.Fixed()],
    protocol: new OpenLayers.Protocol.HTTP({
        url: "json/my_geojson.json",
        format: new OpenLayers.Format.GeoJSON()
    }),
    style: style,
    rendererOptions: {zIndexing: true}
}); 
```

# java - C++ vs Java - 选择排序性能

> ID：15616521
> 
> 赞同：-4
> 
> 时间：2013-03-25T13:45:34.490
> 
> 标签：java, c++, sorting, selection

我使用选择排序算法测试 Java 和 C++ 性能。

**这是Java代码：**

```
public static void main(String[] args) {

    int[] mArray = new int[100000];
    fillArrayRandomly(mArray, 10);

    long timeStart = System.currentTimeMillis();
    selectionSort(mArray);
    long timeEnd = System.currentTimeMillis();

    System.out.println((timeEnd - timeStart) + "ms");
}

public static void selectionSort(int[] array) {
    for(int i=0; i<array.length-1; i++)
        for(int j=i+1; j<array.length; j++)
            if(array[j]<array[i])
                swap(array, i, j);
}

public static void swap(int[] array, int i, int j) {
    int tmp = array[i];
    array[i] = array[j];
    array[j] = tmp; 
}

public static void fillArrayRandomly(int array[], int maxNum) {
    Random generator = new Random(); 

    for(int i=0; i<array.length; i++)
        array[i] = generator.nextInt(maxNum);
}

public static void printArray(int array[]) {
    for(int i=0; i<array.length; i++)
        System.out.println(array[i]);
} 
```

**这是 C++ 代码：**

```
void fillArrayRandomly(int *array, int dim, int max)
{
    srand(time(NULL));

    for(int i=0; i<dim; i++)
        array[i] = rand() % max;
}

void selectionSort(int *array, int dim)
{
    for(int i=0; i<dim-1; i++)
        for(int j=i+1; j<dim; j++)
            if(array[i] > array[j])
                swap(array[i], array[j]);
}

int main()
{
    int DIM = 100000;
    int *array = new int[DIM];

    fillArrayRandomly(array, DIM, 100);

    long tStart = GetTickCount();
    selectionSort(array, DIM);
    long tEnd = GetTickCount(); 

    cout << tEnd-tStart << " ms" << endl;
    system("PAUSE");
} 
```

这是包含 100000 个元素的数组的结果：

**C++：** 6584 毫秒

**Java：** 3942 毫秒

在我看来，这听起来很奇怪。C++ 代码不应该比 Java 代码更快吗？

你能帮我解决这个问题吗？感谢和抱歉我的英语不好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T13:47:34.647

对于初学者，您的 java 代码只生成 10 之前的随机数，而 c++ 直到 100，显然会有更多的交换..通常对于这种测试，您想要测试完全相同的数组..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:51:03.850

你的 C++ 交换在哪里？>您是否使用`template std::swap(T&x,T&y)?`此模板最适合带有移动构造函数和赋值的“大”类型。使用索引在您的 java 测试中尝试使用一个 als。

# soap - 使用 Apache CXF 通过 SecurityTokenReference 和 Thumprint 标识符对 SOAPMessage 进行签名

> ID：15616522
> 
> 赞同：2
> 
> 时间：2013-03-25T13:45:36.117
> 
> 标签：soap, cxf, ws-security

是否有人可以给出使用 Apache CFX 库（如 WSSecSignature 和 Crypto 类以及相关数据结构）来实现 SOAPMessage 的实现想法，以便最终实现类似：

```
<oas:Security> 
    <oas:Signature> 
         <xd:SignedInfo> 
              <xd:CanonicalizationMethod Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315"/> 
              <xd:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/> 
              <xd:Reference URI="#[BodyID]"> 
                  <xd:Transforms> 
                       <xd:Transform Algorithm="[TransformAlgorithm]"/> 
                  </xd:Transforms>
                  <xd:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>                                               
                  <xd:DigestValue>[DigestValue]</xd:DigestValue> 
             </xd:Reference> 
             <xd:Reference URI="#[ControlID]"> 
                  <xd:Transforms>
                       <xd:Transform Algorithm="[TransformAlgorithm]"/> 
                  </xd:Transforms> 
                  <xd:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/> 
                  <xd:DigestValue>[DigestValue]</xd:DigestValue> 
             </xd:Reference> 
         </xd:SignedInfo> 
         <xd:SignatureValue>[SignatureValue]</xd:SignatureValue>
         <xd:KeyInfo> 
             <oas:SecurityTokenReference> 
                  <oas:KeyIdentifier ValueType = "http://docs.oasis-open.org/wss/oasis-wss-soap-message-security-1.1#ThumbPrintSHA1">[Thumbprint] 
                  </oas:KeyIdentifier> 
              </oas:SecurityTokenReference> 
         </xd:KeyInfo> 
     </oas:Signature> 
  </oas:Security> 
```

我有一个很好的资源，从哪里可以找到实现 SOAPMessage 叹息的方法？

在此先感谢各位，西蒙

# c# - 从不同的 url 下载多个 Mp3 文件作为 asp.Net 中的 zip 存档

> ID：15616523
> 
> 赞同：0
> 
> 时间：2013-03-25T13:45:39.763
> 
> 标签：c#, asp.net, sharpziplib

我正在开发一个 .Net 应用程序，在该应用程序中，我需要将多个 mp3 文件添加到 zip 存档并在本地下载 zip 存档。mp3 文件位于不同的网址上，广告未托管或存储在我的服务器上。哪个图书馆适合这种事情。我尝试使用 SharpLipZip 但失败了。这是我目前正在尝试与sharpziplib一起使用的代码。所有代码都已执行，但浏览器没有下载。

```
string[] fileURLs = new string[] { "http://www.musicimpressions.com/demos_mp3g/d_RE41843.mp3", "http://media.archambault.ca/sample/6/2/B/0/62B0CC2D91D4357D6477845E967AF9BA/00000000000000027923-256K_44S_2C_cbr1x_clipped.mp3" };

Response.AddHeader("Content-Disposition", "attachment; filename=CallRecordings.zip");
Response.ContentType = "application/x-zip-compressed";

ZipOutputStream zipStream = new ZipOutputStream(Response.OutputStream);
zipStream.SetLevel(3);
byte[] buffer = new byte[10485760];
foreach (string url in fileURLs)
{
    Stream fileStream = null;

    HttpWebRequest fileReq = (HttpWebRequest)HttpWebRequest.Create(url);

    HttpWebResponse fileResp = (HttpWebResponse)fileReq.GetResponse();

    if (fileReq.ContentLength > 0)
        fileResp.ContentLength = fileReq.ContentLength;

    //Get the Stream returned from the response
    fileStream = fileResp.GetResponseStream();
    byte[] fileBytes = ReadStream(fileStream);

    ZipEntry fileEntry = new ZipEntry(ZipEntry.CleanName(url));
    fileEntry.Size = fileBytes.Length;          

    zipStream.PutNextEntry(fileEntry);

    zipStream.Write(fileBytes, 0, fileBytes.Length);
    Response.Flush();
    fileStream.Close();
}

zipStream.Finish();
zipStream.Flush();
zipStream.Close();
Response.Flush();
Response.End(); 
```

ReadStream 的定义如下。

```
public static byte[] ReadStream(Stream input)
{
    byte[] buffer = new byte[16 * 1024];
    using (MemoryStream ms = new MemoryStream())
    {
        int read;
        while ((read = input.Read(buffer, 0, buffer.Length)) > 0)
        {
            ms.Write(buffer, 0, read);
        }
        return ms.ToArray();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T05:53:48.793

好吧，这与我也在为我的网站构建的东西相同，无论如何我试图首先查找 zip 文件结构以手动创建 zip 文件，而不是使用任何其他库。到目前为止，我只能获得 zip 文件的结构：

[https://users.cs.jmu.edu/buchhofp/forensics/formats/pkzip.html](https://users.cs.jmu.edu/buchhofp/forensics/formats/pkzip.html)

在这里，它提到您需要首先将文件的 CRC32 附加到 zip 文件中，所以这就是我这边的棘手部分。一旦您获得任何更新，请告诉我。

**祝你好运**:)

# facebook - facebook js sdk 贴到墙上

> ID：15616525
> 
> 赞同：0
> 
> 时间：2013-03-25T13:45:50.507
> 
> 标签：facebook, sdk

我正在努力将帖子到墙上的功能添加到现有的代码中？它可以很好地登录并获取用于表单提交的电子邮件，我希望它也可以在登录时发布到墙上！以最简单的方式可能。？观看它的 URL 是[http://lproctor.co.uk/](http://lproctor.co.uk/)。

```
 // The facebook JavaScript SDK to log in to FB
      window.fbAsyncInit = function() {
        FB.init({
          appId: '<?php echo $facebook->getAppID() ?>',
          cookie: true,
          xfbml: true,
          oauth: true
        });
        FB.Event.subscribe('auth.login', function(response) {
          window.location.reload();
        });
        FB.Event.subscribe('auth.logout', function(response) {
          window.location.reload();
        });
      };
      (function() {
        var e = document.createElement('script'); e.async = true;
        e.src = document.location.protocol +
          '//connect.facebook.net/en_US/all.js';
        document.getElementById('fb-root').appendChild(e);
      }());
    FB.ui(
  {
   method: 'feed',
   name: 'The Facebook SDK for Javascript',
   caption: 'Bringing Facebook to the desktop and mobile web',
   description: (
      'A small JavaScript library that allows you to harness ' +
      'the power of Facebook, bringing the user\'s identity, ' +
      'social graph and distribution power to your site.'
   ),
   link: 'https://developers.facebook.com/docs/reference/javascript/',
   picture: 'http://www.fbrell.com/public/f8.jpg'
  },
  function(response) {
    if (response && response.post_id) {
      alert('Post was published.');
    } else {
      alert('Post was not published.');
    }
  }
); 
```

现在使用

```
 <script type="text/javascript">
    // The facebook JavaScript SDK to log in to FB
      window.fbAsyncInit = function() {
        FB.init({
          appId: '<?php echo $facebook->getAppID() ?>',
          cookie: true,
          xfbml: true,
          oauth: true
        });
    FB.ui(
  {
    method: 'feed',
         name: 'Facebook name',
     link: 'http://lproctor.co.uk/',
     picture: 'http://lproctor.co.uk/logo.jpg',
     caption: 'facebook caption',
     description: ' facebook description facebook description facebook description facebook description',
     message: 'Facebook message!'
   },
  function(response) {
    if (response && response.post_id) {
      alert('Post was published.');
    } else {
      alert('Post was not published.');
    }
  }
);
        FB.Event.subscribe('auth.login', function(response) {
          window.location.reload();
        });
        FB.Event.subscribe('auth.logout', function(response) {
          window.location.reload();
        });
      };

      (function() {
        var e = document.createElement('script'); e.async = true;
        e.src = document.location.protocol +
          '//connect.facebook.net/en_US/all.js';
        document.getElementById('fb-root').appendChild(e);
      }());

    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:53:57.380

尝试类似的东西

```
FB.getLoginStatus(function(response) {
    if (response.status === 'connected') {
        // connected
    } else if (response.status === 'not_authorized') {
        // not_authorized
        login();
    } else {
        // not_logged_in
        login();
    }
});
}; 
```

# loops - 如何循环单元格范围并在相邻列中设置值

> ID：15616530
> 
> 赞同：12
> 
> 时间：2013-03-25T13:45:55.157
> 
> 标签：loops, google-apps-script, google-sheets

我正在学习与 Google 电子表格一起使用的 Google Apps 脚本。

我在一列中有一个 URL 列表，我想编写一个脚本来从每个 URL 获取标题元素并将其写入相邻的单元格。我已经按照以下脚本为一个特定的单元格完成了此操作：

```
function getTitles() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = ss.getSheetByName("url_list");
  var range = sheet.getRange("G3");
  var url = range.getValue();

  var response = UrlFetchApp.fetch(url);
  var doc = Xml.parse(response.getContentText(),true);
  var title = doc.html.head.title.getText();
  var output = sheet.getRange("H3").setValue(title);

  Logger.log(title);
  return title;
} 
```

这会在 G3 中获取 URL，对其进行解析，提取元素并将输出写入 H3。

现在我有了这个基本的构建块，我想循环整个 G 列并将输出写入相邻的单元格，但我被卡住了。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-25T14:38:06.523

可能看起来像这样：

```
function getTitles() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = ss.getSheetByName("url_list");
  var urls = sheet.getRange("G3:G").getValues();
  var titleList = [], newValues = [],
      response, doc, title;

  for (var row = 0, var len = urls.length; row < len; row++) {
    if (urls[row] != '') {
      response = UrlFetchApp.fetch(urls[row]);
      doc = Xml.parse(response.getContentText(),true);
      title = doc.html.head.title.getText();
      newValues.push([title]);  
      titleList.push(title);  
      Logger.log(title);
    } else newValues.push([]);
  }

  Logger.log('newValues ' + newValues);
  Logger.log('titleList ' + titleList);

  // SET NEW COLUMN VALUES ALL AT ONCE!
  sheet.getRange("H3").offset(0, 0, newValues.length).setValues(newValues);
  return titleList; 
} 
```

# jakarta-ee - Servlet 过滤器：如何捕获 HTTP 错误

> ID：15616531
> 
> 赞同：1
> 
> 时间：2013-03-25T13:45:57.657
> 
> 标签：jakarta-ee, jboss, httpresponse, servlet-filters, http-status-code-401

有没有办法用 servlet 过滤器捕获 HTTP 错误？HTTP 错误是否存储在过滤器 SevletResponse 中？我的目标是捕获一些身份验证错误（401）以将用户重定向到备用身份验证机制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:56:50.147

来看看[`getStatus()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html#getStatus%28%29)方法`HttpServletResponse`。包含服务器响应，例如。401/ `SC_UNAUTHORIZED`。

# scala - 向 akka 路由器添加路由/特殊消息

> ID：15616544
> 
> 赞同：0
> 
> 时间：2013-03-25T13:46:32.147
> 
> 标签：scala, akka, actor

在我的应用程序中，我必须向可能是也可能不是路由器的参与者发送订阅消息。如果它们是路由器，则必须将消息发送到所有路由。`Broadcast`在这里不适用，因为演员可能不是路由器，我不想`Broadcast`在演员接收块内处理消息。我也不想创建自定义路由器，因为路由器可以是任何类型。所以我想做的是这样的：

```
system.actorOf(Props[MyActor].withRouter(FromConfig().withRoute { routeeProvider => {
  case (sender, Subscribe) => routeeProvider.routees.map(Destination(sender, _))
}})) 
```

有没有办法做到这一点，或者任何其他方式来添加这样的特殊路由行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T14:41:43.193

您可以为所有参与者定义一个父抽象类，您可以在其中处理所有需要的特殊消息并从中继承所有非路由器参与者。像这样的东西：

```
abstract class MyActor extends Actor {

  protected def receiveMsg: Receive // will substitute "receive" in your actors

  def receive = receiveMsg orElse {

    case Broadcast(msg) => self ! msg

    ...

  }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:51:57.257

只需创建一个普通演员，让路由/演员拨入和/或创建为孩子，并根据需要转发入站消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T10:01:43.310

您可以将[BroadcastRouter](http://doc.akka.io/docs/akka/snapshot/scala/routing.html#BroadcastRouter)用于您的路由器。与仅在消息是广播消息时才广播的其他路由器不同，此路由器会将每条消息广播给其子级。

# sql-server - 基于多列的 SQL Pivot

> ID：15616547
> 
> 赞同：-3
> 
> 时间：2013-03-25T13:46:47.563
> 
> 标签：sql-server, tsql, pivot, unpivot

嗨，我是 SQL 透视的新手

我有不同的要求，我需要根据程序类别基于多列（Q1、Q2、Q3、Q4）透视数据。请建议我怎样才能做到这一点？

所有示例均基于单个列（例如 SUM(Q1) FOR CategoryID IN ([People], [IT], [Travel])

我如何根据 Q1、Q2、Q3、Q4 调整它？

输入

![输入](../Images/ef491bef56946e7d24cc9986247cb7e9.png)

输出

![结果](../Images/f93d2ffcdd58db2fa5ca1156cf9b27c1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T14:09:52.027

为了得到你想要的结果，你必须同时应用`UNPIVOT`和`PIVOT`函数。

unpivot函数会将您的*、*`Q1`、`Q2`和`Q3`列`Q4`转换为行。完成后，您将应用*数据透视*函数。

unpivot 代码将与此类似：

```
select programid,
  col + '_'+ category cat_col,
  value
from yourtable 
unpivot
(
  value
  for col in (Q1, Q2, Q3, Q4)
) unpiv 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/7e5a1/2)。这给出了一个结果：

```
| PROGRAMID |   CAT_COL |  VALUE |
----------------------------------
|       366 | Q1_People | 109034 |
|       366 | Q2_People |  25418 |
|       366 | Q3_People | 101130 |
|       366 | Q4_People |  54787 | 
```

您可以看到此查询创建了一个新的列名称来进行透视，其中包含类别值和季度名称。

获得此结果后，您可以应用数据透视函数：

```
select *
from
(
  select programid,
    col + '_'+ category cat_col,
    value
  from yourtable 
  unpivot
  (
    value
    for col in (Q1, Q2, Q3, Q4)
  ) unpiv
) d
pivot
(
  sum(value)
  for cat_col in (Q1_People, Q2_People, Q3_People, Q4_People,
                  Q1_IT, Q2_IT, Q3_IT, Q4_IT,
                  Q1_Travel, Q2_Travel, Q3_Travel, Q4_Travel)
) piv 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/751bc/3)。这给出了结果：

```
| PROGRAMID | Q1_PEOPLE | Q2_PEOPLE | Q3_PEOPLE | Q4_PEOPLE | Q1_IT | Q2_IT | Q3_IT | Q4_IT | Q1_TRAVEL | Q2_TRAVEL | Q3_TRAVEL | Q4_TRAVEL |
---------------------------------------------------------------------------------------------------------------------------------------------
|       366 |    109034 |     25418 |    101130 |     54787 |     0 |     0 |     0 |     0 |      1195 |       613 |      1113 |      1195 | 
```

# node.js - 快速表单自定义验证

> ID：15616548
> 
> 赞同：0
> 
> 时间：2013-03-25T13:46:48.250
> 
> 标签：node.js, express, validation

使用[Express-form](https://github.com/freewil/express-form)模块来验证输入。具体查看[自定义方法](https://github.com/freewil/express-form#custom-methods)是否可以编写一个验证函数，其结果将取决于另一个字段。

或者更确切地说，我想要实现的是，如果在下拉列表中选择了某个值，则需要一个字段，而其他值则不需要。

至于“你试过什么”的评论。我没有，阅读文档我不知道如何开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-30T09:59:30.793

## 使用 express-form 的 Node-Express 表单验证

> 首先安装 express-form 模块
> 
> 命令：- ***npm install express-form --save***
> 
> 二、安装快闪
> 
> 命令：- ***npm install express-flash***

## 然后

> index.js

```
var express = require("express");
var app = express();
var path = require('path');
var form = require('express-form');          
var field = form.field;                      
var flash = require('express-flash');        

var port = process.env.PORT || 5000 ;  

app.use(flash()); 

app.get('/registration', function (req, res) {
    res.render('pages/registration', {
        messages : req.flash('error')
    });
}); 

app.post('/submit', 

form(
            field("firstname").trim().required(),
            field("lastname").trim().required(),
            field("email").trim().required().isEmail()
    ),

function (req, res) {

    if(!req.form.isValid) 
    {
        req.flash('error', req.form.errors);
        res.redirect('/registration');
    }
    else
    {
        console.log("Form submitted successfully...")
    }

});

app.listen(port); 
```

> 笔记 ：-

在上面的代码中，我使用的是*“ejs”模板引擎*

如需更多帮助，[请单击此处](https://www.npmjs.com/package/express-form)

# phpunit - PHPunit：在断言语句中测试内存使用或运行时间

> ID：15616551
> 
> 赞同：4
> 
> 时间：2013-03-25T13:46:52.173
> 
> 标签：phpunit

我知道 phpunit 在测试期间提供内存使用和执行时间，但是有没有办法在断言语句中使用这些数据？

例如，假设我想断言消耗的使用量是否大于或等于指定的内存或运行时间。我搜索网络以及 phpunit 手册，并不能得到准确的信息。

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-08-02T15:09:37.220

要在执行时间和已用内存上运行断言，您可以使用[phpunit_stopwatch_annotations](https://github.com/usernam3/phpunit_stopwatch_annotations)包。它提供了自己的 TestCase 类，为您的测试方法添加了对特殊注释（ **@executionTime**和**@memoryUsage ）的支持。**

如何使用[phpunit_stopwatch_annotations](https://github.com/usernam3/phpunit_stopwatch_annotations)：

1.  从 StopwatchAnnotations\TestCase 扩展您的 TestCase 类

    `class ExampleTest extends \StopwatchAnnotations\TestCase`

2.  通过编写开始使用注释

    @executionTime **time_in_milliseconds**

    或者

    @memoryUsage **memory_in_bytes**

    在您的方法之前的 docblock 中。每次测试后将自动断言执行时间和内存使用情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T06:35:49.667

也许我在想一个错误的方向，但为什么不尝试这样的事情呢？

```
class memTest extends PHPUnit_Framework_TestCase {
    public function testMemory() {
        $this->assertGreaterThanOrEqual(4194304, memory_get_usage());
    }
} 
```

只需使用您想要的假设说明符（此处：）[`assertGreaterThanOrEqual`](http://www.phpunit.de/manual/3.7/en/writing-tests-for-phpunit.html#writing-tests-for-phpunit.assertions.assertGreaterThanOrEqual)并对照 . 检查您想要的值[`memory_get_usage()`](http://php.net/manual/en/function.memory-get-usage.php)。

在我的情况下，输出如下所示：

```
>phpunit unittests\memtest.php
PHPUnit 3.7.15 
F

Time: 0 seconds, Memory: 1.75Mb

There was 1 failure:

1) memTest::testMemory
Failed asserting that 1503768 is equal to 4194304 or is greater than 4194304.

mypath\memtest.php:5

FAILURES!
Tests: 1, Assertions: 2, Failures: 1. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-13T11:32:33.223

如果有人对此感兴趣，我将 StopwatchAnotaions 重写为侦听器，以允许在此处集成有关内存使用和执行时间的断言：

[https://github.com/jclaveau/phpunit-profile-asserts](https://github.com/jclaveau/phpunit-profile-asserts)

```
public function test_usages()
{
    ...

    $this->assertExecutionTimeBelow(100); // seconds
    $this->assertMemoryUsageBelow('1M');
} 
```

干杯

# php - PHP - 获取复选框值 Twitter Bootstrap

> ID：15616556
> 
> 赞同：0
> 
> 时间：2013-03-25T13:47:11.473
> 
> 标签：php, twitter-bootstrap, laravel, uniform

我正在使用 Laravel 和 Twitter Bootstrap 构建一个应用程序。现在我已经到了想要使用复选框的地步。Bootstrap 自动设置复选框的样式，这很好。

但是在 PHP 中，我无法获得复选框的值来确定它是否被选中。Bootstrap 似乎使用“统一”来设置复选框的样式。当我排除该文件时，我可以获得复选框的值。

我这样做是为了获得价值：

$checkbox = Input::get('checkbox', function() {return 0;});

如果输入有值，则使用该值，否则返回 0。

它工作正常，除非 Bootstrap 为复选框设置样式。使用 jQuery 可以检查复选框的跨度是否具有“已​​检查”类，但我想检查服务器端。但是 Bootstrap/Uniform 不会将“选中”应用于复选框本身。

有同样问题的人多吗？或者更好的是，有人有解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-26T07:19:46.727

在提交表单时，您始终可以检查复选框的验证：

PHP代码：

```
<?php  if(isset($_POST['$yourName'])){};  ?> 
```

HTML 代码：

```
<div class="form-group input-group-sm">
    <label class="col-md-4 control-label" for="$yourName">Your Title</label>
    <div class="col-md-1 input-group-sm">
        <input id="$yourName" name="$yourName" type="checkbox" class="form-control">
    </div>
</div> 
```

# opengl - 关于 OpenGL 布局 std140 统一块中的数组

> ID：15616558
> 
> 赞同：4
> 
> 时间：2013-03-25T13:47:19.037
> 
> 标签：opengl, graphics, shader, render

根据[规格](http://lists.freedesktop.org/archives/mesa-commit/2012-July/038042.html)：

> 如果成员是标量或向量数组，则根据规则 (1)、(2) 和 (3)，将基本对齐方式 + * 和数组步幅设置为匹配单个 + * 数组元素的基本对齐方式，并将 + * 向上舍入到 vec4 的基本对齐。数组可能在 + * 端有填充；数组后面的成员的基本偏移量向上舍入 + * 到基本对齐的下一个倍数。

这是否意味着如果我有一个大小为 3 的 (float)vec3 数组，它会是

vec3,vec3,vec3,（12个空字节达到vec4倍数），（16个空字节因为最后一句）

或者

vec3, (4 empty bytes),vec3,(4 empty bytes)vec3,(4 empty bytes), (16 empty bytes 因为最后一句话)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T14:21:41.920

来自*实际的* [OpenGL 规范，版本 4.3 (PDF)](http://www.opengl.org/registry/doc/glspec43.core.20130214.pdf)：

> 3：如果成员是一个三分量向量，其分量消耗 N 个基本机器单元，则基本对齐为 4N。
> 
> 4：如果成员是标量或向量数组，则根据规则（1）、（2）和（3）设置基对齐和数组跨度以匹配单个数组元素的基对齐，并向上取整到 vec4 的基本对齐。数组末尾可能有填充；数组后面的成员的基本偏移量向上舍入到基本对齐的下一个倍数。

所以 a`vec3`的基本对齐为 4*4。因此 's数组的基本对齐方式和数组步长为`vec3`4*4。步幅是从一个元素到下一个元素的字节数。所以每个元素的大小为 16 个字节，前 12 个是实际`vec3`数据。

最后，最后有等于基本对齐的填充，因此有空白空间。

或者，以图表的形式，a`vec3[3]`看起来像这样：

```
|#|#|#|0|#|#|#|0|#|#|#|0| 
```

其中每个单元格为 4 个字节，`#`是实际数据，`0`是未使用的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T13:50:47.437

Neither.

The [appendix L](http://www.opengl-redbook.com/appendices/AppL.pdf) from the redbook states this:

*   An array of scalars or vectors -> Each element in the array is the size of the underlying type (*sizeof(vec4) for vec3*), and the offset of any element is its index (using zero-based indexing) times the elements size (*again sizeof(vec4)*). The entire array is padded to be a multiple of the size of a vec4.

So the correct answer is vec3, (4 empty), vec3, (4 empty),vec3, (4 empty) -> 48 bytes

# apache - 与 Mod rewrite RewriteRule 混淆

> ID：15616561
> 
> 赞同：0
> 
> 时间：2013-03-25T13:47:23.093
> 
> 标签：apache, mod-rewrite

我网站上的所有内容都由文档根目录的主 index.php 提供

所以通常所有的功能看起来像`./index.php?storage=seven`

我想让它看起来更好，所以尝试使用 Mod_Rewrite 如下所示

```
RewriteEngine On
RewriteRule ^/storage /index.php?storage=seven [L] 
```

现在我可以使用`./storage`

但是当有人键入 ./storage/ （末尾有一个额外的“/”）或 ./storage/some/junk 时，链接仍然有效，但我的页面中的图像/css/脚本的路径停止了（这些路径已损坏） ，这意味着，我只需要它为 ./storage 工作，其他所有内容都应该给出 404 错误（./storage/ 和 ./storage/ */* ... 给出 40）

请帮帮我，我对 Mod_reWrite 很陌生

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T17:26:06.183

规则的微小变化......它开始起作用了

```
 RewriteRule ^storage$ index.php?storage=seven [L] 
```

顺便说一句，这里的七是从规则本身硬编码的，请不要对此感到困惑

谢谢

# php - 使用 Group By 时查询以选择最新记录 - MySQL

> ID：15616564
> 
> 赞同：0
> 
> 时间：2013-03-25T13:47:28.287
> 
> 标签：php, mysql, database

有一个表结构：

```
ID1 (int), ID2 (int), AddedAt (datetime) 
```

其中**ID1**和**ID2**是主键。现在该表已包含多达**300,000**条记录，我需要重组该表以具有**1-1**关系。这意味着我需要将**ID1**从主键中删除，并仅将 ID2 设为主键，但有些记录已经包含每个**ID1的多个****ID2**。

 **现在，在我这样做之前，我需要进行查询以选择存在多个**ID2**的所有记录并删除它们，只需要留下一条记录 ID2 并且该记录必须是由**AdditionalAt 日期时间**列确定的最新记录。

这是我到目前为止所拥有的：

```
 SELECT *, COUNT(*) AS Total
 FROM TestTable
 GROUP BY ID2
 HAVING Total > 1 
```

这成功返回了所有记录，但**AdditionalBy**并不是最新的。我需要在此查询中添加什么以获取 Grouped By ID2 的最新记录只有 1，以便我可以使 ID2 成为主键。

如果这不能在 MySQL 中完成，可以在 PHP 中完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:31:02.420

> 这成功返回了所有记录，但 AdditionalBy 并不是最新的。

大多数 SQL 方言**禁止**选择不属于 GROUPing 的列值——MySQL 允许这样做（取决于服务器设置），但从*随机*行中为这些列提供一个值。

你想要的是[持有某列的分组最大值的行](http://dev.mysql.com/doc/refman/5.1/en/example-maximum-column-group-row.html)。**

# python - 将复合名词与基本名词分开

> ID：15616565
> 
> 赞同：1
> 
> 时间：2013-03-25T13:47:28.923
> 
> 标签：python

我有一个这样的列表：

```
name = ['road', 'roadwork', 'roadblock', 'ball', 'football', 'basketball', 'volleyball'] 
```

是否有将复合名词与基本名词分开的代码？这样我就可以得到：

```
name = ['road', 'ball'] 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T13:54:41.387

所有不包含任何其他单词作为子字符串的单词：

```
>>> [x for x in name if not any(word in x for word in name if word != x)]
    ['road', 'ball'] 
```

使用循环打印名称的一种方法：

```
for candidate in name:
    for word in name:
        # candidate is a compound if it contains any other word (not equal to it)
        if word != candidate and word in candidate:
            break      # a compound. break inner loop, continue outer
    else:              # no breaks occured, must be a basic noun
        print candidate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:01:19.143

```
names = ['road', 'roadwork', 'roadblock', 'ball', 'football', 'basketball', 'volleyball']

basic_names = [name for name in names if not any([part for part in names if part in name and part != name])] 
```

# sql - sql server 2008中基于where子句的多个条件

> ID：15616567
> 
> 赞同：0
> 
> 时间：2013-03-25T13:47:31.523
> 
> 标签：sql, sql-server-2008, where-clause

我有一张`Product`包含这些列的表格

```
ProductName,
Description,
Manufacturer,
Product Code,
Technology,
Address,
Country,
City,
Length 
```

我想用这些条件搜索所有这些字段

*   SearchType='包含'
*   SearchType='结束'
*   SearchType='等于'
*   SearchType='更大'
*   SearchType='少'
*   SearchType='不等于'
*   SearchType='喜欢'

另一个参数我会传递是否使用AND/OR操作

一次我们可以使用任何搜索条件和 AND\OR 操作搜索 6 列

where 子句中的条件将是这样的

```
WHERE (ProductName = @ProductName) AND (Country Like @Country +%) OR
      (ManufacturerLikre(Ends) '%' + @Manufacturer ) AND (Length < (Greater) @Length) 
```

所以用户可以根据上述条件输入6个条件。

你能帮忙得到where子句的逻辑吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:15:59.570

如果我的问题是正确的，我想你想结合条件然后使用**`OR`**

```
 WHERE ((ProductName = @ProductName) AND (Country Like @Country +%)) OR
       ^(Extra Brackets to combine) 
      ((ManufacturerLikre(Ends) '%' + @Manufacturer ) AND (Length < (Greater) @Length))
      ^(Extra Brackets to combine) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:30:50.360

也许最简单的解决方案是使用以下格式在前端代码中动态构建它：

WHERE whereClause1 AND/OR whereClause2 AND/OR whereClause3...等

用相关的 sql 语法和每个 AND/OR 替换 whereClause1 等。为了处理所有可能的 AND/OR 组合，您需要提供一种用括号对 where 子句进行分组的方法，否则它会限制可能的组合范围，并且还假设用户用户理解 AND 和 OR 运算符的优先级。

此外，在从用户输入构建查询时，您需要注意可能的 SQL 注入攻击。

# wpf - wpf：从视图模型更改依赖属性的值

> ID：15616568
> 
> 赞同：0
> 
> 时间：2013-03-25T13:47:32.787
> 
> 标签：wpf, dependency-properties

我有一个自定义用户控件，它具有字符串类型的自定义依赖属性。它应该双向绑定到文本框，该文本框位于周围的应用程序中，如下所示：

```
<Textbox Name="TextBoxInHostApp"/>
<ctrl:MyControl 
     ....
         MyString = "{Binding ElementName=TextBoxInHostApp, Path=Text, Mode=TwoWay}"
</ctrl:MyControl> 
```

问题：

控件还应该具有显示依赖属性值的功能！

在 MyControl 中，我有一个简单的字符串属性“名称”，它应该更新 MyString 依赖属性值。

因此，通常，如果 MyString 未绑定到外部世界，您将在使用控件的 xaml 中进行编码：

```
<Textbox Name="TextBoxInHostApp"/>
<ctrl:MyControl 
     ....
         MyString = "{Binding Name}"
</ctrl:MyControl> 
```

但这在我的情况下不可用。

尝试 1：我在用户控件 xaml 中使用了触发器：

```
<UserControl.Style>
    <Style>
        <Style.Setters>
            <Setter Property="local:MyControl.MyString" Value="{Binding Name, UpdateSourceTrigger=PropertyChanged}"/>
        </Style.Setters>
    </Style> 
```

现在这个触发器不起作用，因为这里已经设置了 dp 的“本地值”：

```
MyString = "{Binding ... 
```

如果我注释掉：

```
<!--<MyString = "{Binding ... 
```

...触发器工作正常，因为未设置“本地值”。

下一次尝试：我在 MyControls 视图模型中尝试了艰难的方法和代码：

```
public string Name
{
    get
    {
        return _name;
    }
    set
    {
        _name = value;
         RaisePropertyChanged("Name");

         MyOwningUICtrl.SetValue(MyControl.MyStringProperty, value); // ??
    }
} 
```

我必须通过一个 DependencyObject 来调用一个 SetValue，这对 MVVM 来说是不愉快的。这种情况必须有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T14:40:42.643

这是设计使然

根据 WPF 的[Dependency Property Precedence List](http://msdn.microsoft.com/en-us/library/ms743230.aspx#listing)，在 a 中本地指定的值`<Tag>`将始终优先于在 a`Style`或 a中指定的值`Trigger`

一个常见的问题是在 a 中设置一个值`<Tag>`，然后尝试在 a 中更改它`Style.Trigger`。解决方案是将默认值设置为 a `<Setter>`in`<Style>`而不是 in `<Tag>`，这将允许触发值优先于样式值

```
<Style>
    <!-- Default Value
    <Setter Property="local:MyControl.MyString" 
            Value="{Binding ElementName=TextBoxInHostApp, Path=Text, Mode=TwoWay}"/>

    <Style.Triggers>
        <Trigger ...>
            <!-- Triggered Value -->
            <Setter Property="local:MyControl.MyString" 
                    Value="{Binding Name, UpdateSourceTrigger=PropertyChanged}"/>
        </Trigger>
    </Style.Setters>
</Style> 
```

但我实际上并没有在任何地方看到您的帖子中定义的触发器，所以我不确定这是否是您的问题。

我对代码的确切结构有点不清楚，但请记住，依赖属性有点像指向另一个值的指针。您可以将其设置为指向`TextBox.Text`或指向`DataContext.Name`，但不能同时设置两者。

如果你想同时设置`TextBox.Text`和`MyUserControl.MyString`指向`DataContext.Name`，那么你应该`"{Binding Name}"`像[Natxo 建议](https://stackoverflow.com/a/15617291/302677)的那样绑定这两个属性。

或者，如果您尝试绑定`MyString`到标签中未指定的情况，那么您可以尝试使用[PriorityBinding](http://msdn.microsoft.com/en-us/library/system.windows.data.prioritybinding.aspx)（[此处](https://stackoverflow.com/a/1916488/302677)为示例），或者只是将属性暴露给外界，让外部元素使用控件，如`UserControl.Name``MyString``<ctrl:MyControl ...>``Name``<ctrl:MyControl Name="{Binding ...}" />`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T14:21:54.210

如果您在 Textbox 和 Mycontrol 中都显示相同的值...为什么不将它们绑定到该属性？：

```
<Textbox Name="TextBoxInHostApp" Text="{Binding Name}"/>
<ctrl:MyControl 
     ....
         MyString="{Binding Name}"
</ctrl:MyControl> 
```

# javascript - 如何检测 Flash 电影何时在 Javascript 代码中获得焦点？

> ID：15616573
> 
> 赞同：4
> 
> 时间：2013-03-25T13:47:43.333
> 
> 标签：javascript, html, flash

是否可以创建这样的事件？如果是，如何？

Flash 电影的标记类似于下一个。无需更改 Flash 电影的 ActionScript 代码。

```
<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,29,0" width="32" height="32">
    <param name="movie" value="file://test.swf">
    <param name="quality" value="high">
    <embed src="file://test.swf" quality="high" pluginspage="http://www.macromedia.com/go/getflashplayer" type="application/x-shockwave-flash" width="32" height="32">
    </embed>
</object> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T19:58:38.573

是的，你可以在 JavaScript 中这样做。

首先，使用[swfobject](https://code.google.com/p/swfobject/)处理跨浏览器 Flash 问题是一个好主意。这是一个用于控制 SWF 对象的 JavaScript 库。你可以在这里下载：[https ://code.google.com/p/swfobject/downloads/list](https://code.google.com/p/swfobject/downloads/list)

基本示例：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
    <title>SWFObject - low level dynamic publishing example</title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <script type="text/javascript" src="swfobject.js"></script>
    <script type="text/javascript">
    if (swfobject.hasFlashPlayerVersion("6.0.0")) {
      var fn = function() {
        var att = { data:"test.swf", width:"780", height:"400" };
        var par = { flashvars:"foo=bar" };
        var id = "replaceMe";
        var myObject = swfobject.createSWF(att, par, id);
      };
      swfobject.addDomLoadEvent(fn);
    }
    </script>
  </head>
  <body>
    <div id="replaceMe">Alternative content</div>
  </body>
</html> 
```

接下来，只需在 att 变量中使用 id 扩展示例，如下所示：

```
var att = { data:"test.swf", width:"780", height:"400", id:"myId" }; 
```

您可以使用`getElementById()`jQuery 选择器访问对象`$("#myId")`

然后将事件附加到焦点上，如下所示：

jQuery：（推荐）

```
$('#myId').focus(function() {
  alert('SWF is in focus');
}); 
```

或者

标准：

```
object.onfocus=function(){ alert('SWF is in focus'); } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-08T19:32:38.653

您可以将播放器放在一个 div 中，并使用 javascipt 选择该 div。这里还有更多信息： [https ://github.com/englandrp/Cross-browser-Flash-tabbing-and-focus-solution](https://github.com/englandrp/Cross-browser-Flash-tabbing-and-focus-solution)

# php - PHP 布尔错误

> ID：15616577
> 
> 赞同：0
> 
> 时间：2013-03-25T13:47:52.677
> 
> 标签：php, mysql

我是 php 的新手，试图理解为什么我在特定情况下使用适用于其他人的代码得到布尔错误。我有一个返回 $user_id 的函数，该函数稍后将在会话中使用。这是他的功能：

```
 function login($username, $password) {
       $user_id = user_id_from_username($username);
       $username = sanitize($username);
       $password = sha1($password);
       return (mysql_result(mysql_query("SELECT COUNT (user_id) FROM users WHERE username = '$username' AND password = '$password'"), 0) == 1) ? $user_id : false ;
   } 
```

使用 this 总是会导致失败`error: Warning: mysql_result() expects parameter 1 to be resource, boolean given in`。带有指向该行的行号。

```
 return (mysql_result(mysql_query("SELECT COUNT (`user_id`) FROM users WHERE username      = '$username' AND password = '$password'"), 0) == 1) ? $user_id : false ; 
```

为什么会失败？这还不足以检查天气查询是否成功并测试结果。数据库连接和 sql 查询似乎是正确的，不管我使用 ' 还是省略。经过几个小时的研究，我设法用 if 语句消除了错误。像这样：

```
 function login($username, $password) {
       $user_id = user_id_from_username( $username );
       $username = sanitize( $username );
       $password = sha1( $password );
       $result = mysql_query("SELECT COUNT (user_id) FROM users WHERE username = '$username'AND password = '$password'");
       if ( $result == 1 ) {
           return $user_id;
       } else if ( $result == 0 ) {
           return false;
       }
   } 
```

我想知道为什么第二个功能起作用而不是第一个。您是否必须使用 if 语句来检查查询？如果有更好的方法来编写这个函数，请提出建议。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:59:35.027

可能你在查询中有错误所以`mysql_query`返回`false`

代替：

```
return (mysql_result(mysql_query("SELECT COUNT (user_id) FROM users WHERE username = '$username' AND password = '$password'"), 0) == 1) ? $user_id : false ; 
```

和：

```
$result = mysql_query("SELECT COUNT(user_id) as count FROM users WHERE username = '$username' AND password = '$password'") or die(mysql_error());

return (mysql_result($result, 0, 'count') == 1) ? $user_id : false ; 
```

你会看到mysql错误。

# mysql - 不需要级联时的外键

> ID：15616578
> 
> 赞同：0
> 
> 时间：2013-03-25T13:47:54.970
> 
> 标签：mysql, sql, foreign-keys

如果我不需要在逻辑上是 a 的字段中使用`cascade`/和类似的约束，除了美学之外，我是否有任何理由将其明确声明为 a ？`restrict``foreign key``foreign key`

它实际上不会*降低*性能，因为它必须测试完整性吗？

编辑：澄清一下，我不需要它，因为：

*   无论如何我都不会编辑或删除这些值，所以我不需要做`cascade`类似的检查
*   在调用之前`INSERT`，我会检查目标键是否存在，所以我也不需要`restrict`检查

我知道，如果数据库以某种方式损坏，这种约束将确保该关系仍然有效，这是一件好事。但是，我想知道在我的情况下是否还有其他理由使用此功能。我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T14:19:12.200

[这个问题](https://stackoverflow.com/questions/2317391/is-there-a-severe-performance-hit-for-using-foreign-keys-in-sql-server)的答案实际上可能也适用于您的问题。

如果表中的列引用其他表中的行，则应始终使用外键，因为即使您认为“不需要”这些检查提供的功能，它仍然有助于保证数据完整性，以防万一忘记检查您自己的代码。

在大多数情况下，外键检查的性能影响可以忽略不计（参见上面的链接），因为关系数据库使用非常优化的算法来执行它们（毕竟，它们是一个关键特性，因为它们实际上定义了实体之间的关系）。

FK 的另一个主要优点是它们还将帮助其他人了解您的数据库的布局。

**编辑：** 由于上面链接的问题是指 SQL-Server，这里有一个与 MySQL 非常相似的回复：[Does Introduction Foreign Keys to MySQL reduce performance](https://stackoverflow.com/questions/2618385/does-introducing-foreign-keys-to-mysql-reduce-performance)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T14:27:23.127

你必须这样做。如果它会触及写入性能 - 这是一个“像素”问题。

主要的性能问题在读取中——FK 可以帮助查询优化器选择最佳计划等。即使你的 DBMS(-s)（如果你提供跨 DBMS 解决方案）现在会从中受益——它可能会在以后发生。

所以答案是——是的，不仅仅是美学。

# cygwin - cygwin杀死后台进程

> ID：15616582
> 
> 赞同：0
> 
> 时间：2013-03-25T13:48:12.760
> 
> 标签：cygwin, kill

我可以看到一个带有 ps 的进程，但它没有出现在“任务列表”（或 Windows 任务管理器）中。

```
 PID    PPID    PGID     WINPID   TTY     UID    STIME COMMAND
15356       1   16284      10496  pty2    1001 12:59:42 /cygdrive/c/Users/Application1 
```

我以管理员身份打开终端。我尝试在以下位置使用 PID、WINPID 和 PGID 作为 xxxx：

```
kill -9 xxxx
/bin/kill -f xxxx
taskkill /pid xxxx 
```

它们都不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T07:42:31.157

我只需重新启动 Cygwin 就解决了这个问题。该过程在重新启动后消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T04:45:29.190

`ppid 1`，似乎是某事的子进程。在最坏的情况下杀死“父亲”进程。

您的任务管理器是否以管理员身份启动？查看所有激活的用户进程？您是否尝试使用“任务浏览器”等替代任务管理器来杀死它？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-11T18:43:19.860

您可以使用 WINPID。进入 Windows 任务管理器 (Win 8.1)，进入“详细信息”选项卡（旧版本的 Windows 在进程选项卡上显示 PID，或者可能需要您启用在选项中显示它）。您将看到每个进程的 PID。找到与 WINPID 匹配的那个并杀死它。

仅供参考，PPID 是父进程。1 表示父级已消失（您关闭的 Cygwin 实例）。根据调用命令的方式，有时即使在父级离开后它也会在后台停留。仅仅因为 Cygwin 窗口已关闭，并不意味着它启动的进程已停止。我发现当管道输出和管道链中的一个命令被锁定时就是这种情况。

# php - htaccess 的这一部分有什么问题

> ID：15616583
> 
> 赞同：1
> 
> 时间：2013-03-25T13:48:13.687
> 
> 标签：php, .htaccess, rewrite, laravel

对于我的一个客户，我正在建立一个网站。为此，我使用 Laravel 框架。现在我知道最好的做法是将公共目录设置为 DocumentRoot，但问题是，我不能。所以我做了一些研究，发现你可以使用 .htaccess 来处理这个小问题。laravel 论坛上的代码片段如下：

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteCond %{REQUEST_URI} !^public
    RewriteRule ^(.*)$ public/$1 [L]
</IfModule> 
```

但是当我尝试这个时，我得到一个 500 Internal Server 错误。我发现问题`(.*)`出在第四行的部分......但我就是看不出它有什么问题。

那么有人知道这个片段有什么问题吗，为什么我会收到 500 错误...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T14:20:37.943

您快到了。[`REQUEST_URI`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)包括前导斜杠`/`。所以你必须说

```
RewriteCond %{REQUEST_URI} !^/public 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:53:22.610

不要更改*公用文件夹*路径，只需复制通常的 laravel 树并在 **/public/.htaccess中使用以下内容**

```
<IfModule mod_rewrite.c>
 RewriteEngine on
 RewriteBase /
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule> 
```

这在 L3 上对我有用。

# google-maps - 是否可以使 PNG 空心？

> ID：15616584
> 
> 赞同：0
> 
> 时间：2013-03-25T13:48:13.897
> 
> 标签：google-maps, google-maps-api-3, png, transparency

我在谷歌地图顶部有一个手抠图覆盖的 PNG 图像，如此处所示。

![https://dl.dropbox.com/u/11002845/handmap.png](../Images/9f93d7d73c0a1afaa4d0d14bc75ad317.png)

我如何做到这一点，以便当我的鼠标悬停在手部切口上时我可以单击并拖动地图。起初我以为手剪是空心的，但事实并非如此。有什么想法或解决方案可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:02:28.863

尝试应用于`pointer-events: none;`PNG图像。[这是来自 Tutsplus 的很棒的教程](http://webdesign.tutsplus.com/tutorials/site-elements/add-a-touch-of-realism-to-your-google-maps/) - 带有 png 掩码的谷歌地图。注意：请参阅[支持的浏览器列表以了解`pointer-events`属性。](http://caniuse.com/#feat=pointer-events)

# android - 同时触摸多个按钮 Android 开发

> ID：15616585
> 
> 赞同：0
> 
> 时间：2013-03-25T13:48:18.273
> 
> 标签：android

我有一个正在开发的应用程序，它是点击速度的竞争。但是，我不能同时按下 2 个按钮。这意味着如果一个人按住他的按钮，另一个人不能按下他/她的按钮。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-27T16:03:26.683

其实我的手机不支持多点触控！:(

# c - `*` 在 C `typedef struct` 声明中是什么意思？

> ID：15616592
> 
> 赞同：8
> 
> 时间：2013-03-25T13:48:40.397
> 
> 标签：c, struct

我正在查看一个`C`结构，其中包含一些我以前从未见过的语法。结构如下所示：

```
typedef struct structExample {
   int member1;
   int member2
} * structNAME; 
```

我知道通常具有以下结构：

```
typedef struct structExample {
   int member1;
   int member2
} structNAME; 
```

我可以通过说来引用第二个结构定义的成员：

```
structNAME* tempStruct = malloc(sizeof(structNAME));
// (intitialize members)
tempstruct->member1; 
```

第一个结构定义中的额外内容有什么作用，`*`我将如何引用第一个结构定义的成员？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T13:53:35.853

这意味着定义的类型是指针类型。这是声明类型的等效方法：

```
struct structExample {
    int member1;
    int member2;
};
typedef struct structExample * structNAME; 
```

你会像这样使用它：

```
structNAME mystruct = malloc (sizeof (struct structExample));
mystruct->member1 = 42; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T13:52:51.530

typedef 使这两个语句相同

```
struct structExample *myStruct;
structName myStruct; 
```

它`structName`代表指向`struct structExample`

作为一种观点，我不喜欢这种编码风格，因为它使知道变量是否是指针变得更加困难。如果你有它会有所帮助

```
typedef struct structExample * structExampleRef; 
```

提示它是指向的指针`struct structExample`；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T13:50:38.950

`structNAME` is defined as a pointer on `struct structExample`. SO you can do

```
structNAME tempStructPtr = malloc(sizeOf(struct structExample));
tempStructPtr->member1 = 2; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T14:15:22.680

理解这些的秘诀是你可以把`typedef`任何声明放在前面，`TYPENAME VARIABLENAME`变成`typedef TYPENAME ALIASEDNAME`.

`VARIABLENAME`如果这是一个简单的声明，则星号不能是该部分的一部分，因此它必须是该类型的一部分。类型名称后面的星号表示“指向”前一个类型的“指针”。

比较一下：

```
typedef int * my_int_pointer; 
```

它完全一样，除了你的情况而不是`int`你声明一个`struct`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T14:06:23.617

在这种情况下 (* structNAME) 是该结构的指针变量..

# iphone - Game Center Matchmaking GKTurnBasedMatch 有明显的延迟（~1 分钟）

> ID：15616593
> 
> 赞同：6
> 
> 时间：2013-03-25T13:48:40.593
> 
> 标签：iphone, ios, objective-c, ipad, game-center

我正在通过游戏中心实现具有多人模式的回合制游戏。我有 2 台设备（1 台 ipad，1 台 iphone）在沙盒模式下进行测试，它们运行良好，但最近它开始在自动匹配过程中遇到困难。在我从一个用户发送第一回合后，另一台设备不会立即识别该游戏，而是打开自己的新游戏。在它能够立即发现游戏在另一台设备上开始之前，匹配相当简单。而且我不记得更改任何与匹配相关的部分（`NSCoding`、、`GKTurnBasedEventHandler`委托`GKTurnBasedMatchmakerViewControllerDelegate`方法等）。

现在我从一个设备发送第一个回合，需要等待大约 1 分钟，以便其他设备可以成功连接到该游戏。连接发生后 endTurnWithMatchData 调用没有任何问题，它可以在 1-2 秒内发送和接收数据。但是，如果用户开始一个新游戏并且必须等待 1 分钟以便另一个用户可以连接到他的游戏，这将不是一个好的用户体验。有没有人在自动匹配过程中遇到过明显的滞后？我还没有实施邀请，所以我无法检查它。我用 NSKeyedArchiver 存档的比赛数据看起来很大，3396 字节，即使对于几乎没有数据的新游戏也是如此。这是我的代码的相关部分：

`GameOptionsViewController`：

```
- (void)turnBasedMatchmakerViewControllerWasCancelled:(GKTurnBasedMatchmakerViewController *)viewController
{
    [self dismissViewControllerAnimated:YES completion:nil];
}

- (void)turnBasedMatchmakerViewController:(GKTurnBasedMatchmakerViewController *)viewController didFailWithError:(NSError *)error
{
    [self dismissViewControllerAnimated:YES completion:nil];
}

- (void)turnBasedMatchmakerViewController:(GKTurnBasedMatchmakerViewController *)viewController didFindMatch:(GKTurnBasedMatch *)match
{
    [self dismissViewControllerAnimated:NO completion:nil];
    self.gcMatch = match;
    [self performSegueWithIdentifier:@"GameMultiplayer" sender:self];
}

- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([segue.identifier isEqualToString:@"GameMultiplayer"])
    {
        GameViewController *GameVC = (GameViewController *)segue.destinationViewController;

        [GameVC setGameMode:GAMEMODE_MULTIPLAYER_SAMEDEVICE];

        //Multiplayer game it is
        if(self.gcMatch != nil)
        {
            [GameVC setGameMode:GAMEMODE_MULTIPLAYER_GAMECENTER];
            GameVC.gcMatchDelegate = self;
            GameVC.gcMatch = self.gcMatch;
            NSLog(@"Game OVC Segue: Match ID | %@", self.gcMatch.matchID);

        }
    }
    else
    {
       ...
    }
} 
```

`GameViewController`：

```
//This method is called according to user actions
//It's the only method I use to send data to other participant
-(void) sendCurrentGameDataWithNewTurn:(BOOL) newTurn
{
    NSLog(@"Sending game data current participant : %@", gcMatch.currentParticipant.playerID);

    //Update match data if it is corrupted anyhow
    if (gcMatch.currentParticipant == nil)
    {
    [GKTurnBasedMatch loadMatchWithID:gcMatch.matchID withCompletionHandler:^(GKTurnBasedMatch *match, NSError *error)
     {
         if (error != nil)
         {
             NSLog(@"Error :%@", error);
             return ;
         }
         [self sendCurrentGameDataWithNewTurn:newTurn];
     }];
}
else
{
    NSData *matchData = [NSKeyedArchiver archivedDataWithRootObject:game];

    //Game advances to new player, buttons are disabled
    if(newTurn)
    {
        NSLog(@"SENDING NEW TURN");

        NSUInteger currentIndex = [gcMatch.participants
                                   indexOfObject:gcMatch.currentParticipant];

        GKTurnBasedParticipant *nextParticipant;
        nextParticipant = [gcMatch.participants objectAtIndex:
                           ((currentIndex + 1) % [gcMatch.participants count])];

        [gcMatch endTurnWithNextParticipants:[NSArray arrayWithObject:nextParticipant] turnTimeout:GC_TURN_TIMEOUT matchData:matchData completionHandler:^(NSError *error) {
            NSLog(@"Sent");
            if (error) {
                NSLog(@"SNT - %@", error);
            }
        }];
    }
    else
    {
        NSLog(@"ONLY UPDATING DATA");
        [gcMatch saveCurrentTurnWithMatchData:matchData completionHandler:^(NSError *error) {
            NSLog(@"Sent");
            if (error) {
                NSLog(@"OUD - %@", error);
            }
        }];
    }
} 
```

}

```
-(void) updateGameDataWithGCMatch
{
    //Update whole game data
    self.game = [NSKeyedUnarchiver unarchiveObjectWithData:self.gcMatch.matchData];

    //Update game ui
    ...
}

-(void) handleTurnEventForMatch:(GKTurnBasedMatch *)match didBecomeActive:(BOOL)didBecomeActive
{
    //Check if I got data for the currently active match that options vc forwarded me here, if not do some debug print and return
    if(![self.gcMatch.matchID isEqual:match.matchID])
    {
        //For debugging reasons I skip if i get info for any previous match (other player quit etc)
        NSLog(@"GCMatch matchID: %@ match matchID:  %@",self.gcMatch.matchID,match.matchID);
        return;
    }

    NSLog(@"Turn event handle");

    self.gcMatch = match;

    if([match.currentParticipant.playerID isEqualToString: [GKLocalPlayer localPlayer].playerID ])
    {
        //Disable field buttons
        [self setFieldButtonsEnabled:TRUE];
        [self turnChangeAnimationFromLeftToRight:FALSE];
    }

    [self updateGameDataWithGCMatch];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T09:59:13.473

**至于你的问题：**

我自己在 Game Center 上进行了很多匹配，并且经常遇到延迟，这已被证明不是由我的网站引起的，而是由苹果游戏中心服务器引起的。

**至于额外的指导：**

据我所知，您目前在设备上进行配对的方法是：

看看是否有比赛我可以连接 --> 如果是，请求游戏数据并连接到比赛 ELSE 开始你自己的比赛并广播比赛数据

根据我的经验，最好从 matchrequestbroadcasts 开始，等到找到第二个玩家，定义服务器设备（例如，通过较低的游戏中心名称校验和），然后在该设备上开始游戏。

# c# - 如何从winForm c#中的datagridview获取用户输入的数据？

> ID：15616595
> 
> 赞同：4
> 
> 时间：2013-03-25T13:48:43.897
> 
> 标签：c#, winforms, datagridview

我有一个空的 datagridview 用于从用户那里收集数据。当用户移动到下一个选项卡时，我想保存输入的数据。但根据 datagridview 没有行。然而，当我回到那个选项卡时，数据仍然存在。

这个我试过了。。

```
int i_rows = dataGridView1.RowCount;
for (int i = 0; i < i_rows; i++)
{
  var colValue = dataGridView1.Rows[i].Cells[0].Value;
} 
```

和这个..

```
foreach (DataRow row in dataGridView1.Rows)
{
  var colValue = dataGridView1.Rows[i].Cells[0].Value;
} 
```

我在触发 UserAddRow 时添加了一个事件，但 dataGridView 中仍然没有行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:38:58.007

您是否尝试过“CellValueChanged”事件而不是“UserAddRow”事件。

当最后一行进入编辑模式时触发 UserAddRow 事件。此时最后一行的单元格还没有注册任何值，当单元格值改变事件被触发时，被编辑的单元格注册了值。如果您使用“CellValuechanged”事件，您很可能会获得单元格的值。

# android - Android 模拟器无法安装任何 apk 文件并显示 android.app.ServiceConnectionLeaked

> ID：15616598
> 
> 赞同：0
> 
> 时间：2013-03-25T13:48:47.153
> 
> 标签：android, android-emulator, android-service, connection-leaks

尝试在**Eclipse ADT中使用****Android API 4.2(17)**在模拟器中运行任何 android 应用程序时出现以下错误。之前我的应用程序运行良好，但在重新启动我的机器后开始出现此问题。

 **```
[2013-03-25 18:25:42 - MyHapiSample] Failed to install MyHapiSample.apk on device 'emulator-5554!
[2013-03-25 18:25:42 - MyHapiSample] (null)
[2013-03-25 18:25:53 - MyHapiSample] Launch canceled! 
```

logcat 显示以下错误

```
 03-25 11:42:39.838: E/ActivityThread(632): Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d293d8 that was originally bound here
 03-25 11:42:39.838: E/ActivityThread(632): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d293d8 that was originally bound here
 03-25 11:42:39.838: E/ActivityThread(632):     at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
 03-25 11:42:39.838: E/ActivityThread(632):     at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
 03-25 11:42:39.838: E/ActivityThread(632):     at android.app.ContextImpl.bindService(ContextImpl.java:1418)
 03-25 11:42:39.838: E/ActivityThread(632):     at android.app.ContextImpl.bindService(ContextImpl.java:1407)
 03-25 11:42:39.838: E/ActivityThread(632):     at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
 03-25 11:42:39.838: E/ActivityThread(632):     at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
 03-25 11:42:39.838: E/ActivityThread(632):     at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
 03-25 11:42:39.838: E/ActivityThread(632):     at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
 03-25 11:42:39.838: E/ActivityThread(632):     at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
 03-25 11:42:39.838: E/ActivityThread(632):     at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
 03-25 11:42:39.838: E/ActivityThread(632):     at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
 03-25 11:42:39.838: E/ActivityThread(632):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
 03-25 11:42:39.838: E/ActivityThread(632):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
 03-25 11:42:39.838: E/ActivityThread(632):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
 03-25 11:42:39.838: E/ActivityThread(632):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
 03-25 11:42:39.838: E/ActivityThread(632):     at java.lang.Thread.run(Thread.java:856)
 03-25 11:42:39.856: E/StrictMode(632): null
 03-25 11:42:39.856: E/StrictMode(632): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d293d8 that was originally bound here
 03-25 11:42:39.856: E/StrictMode(632):     at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
 03-25 11:42:39.856: E/StrictMode(632):     at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
 03-25 11:42:39.856: E/StrictMode(632):     at android.app.ContextImpl.bindService(ContextImpl.java:1418)
 03-25 11:42:39.856: E/StrictMode(632):     at android.app.ContextImpl.bindService(ContextImpl.java:1407)
 03-25 11:42:39.856: E/StrictMode(632):     at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
 03-25 11:42:39.856: E/StrictMode(632):     at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
 03-25 11:42:39.856: E/StrictMode(632):     at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
 03-25 11:42:39.856: E/StrictMode(632):     at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
 03-25 11:42:39.856: E/StrictMode(632):     at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
 03-25 11:42:39.856: E/StrictMode(632):     at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
 03-25 11:42:39.856: E/StrictMode(632):     at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
 03-25 11:42:39.856: E/StrictMode(632):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
 03-25 11:42:39.856: E/StrictMode(632):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
 03-25 11:42:39.856: E/StrictMode(632):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
 03-25 11:42:39.856: E/StrictMode(632):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
 03-25 11:42:39.856: E/StrictMode(632):     at java.lang.Thread.run(Thread.java:856)
 03-25 11:42:39.875: W/ActivityManager(287): Unbind failed: could not find connection for android.os.BinderProxy@40e7cc50
 03-25 11:42:39.885: D/dalvikvm(632): GC_CONCURRENT freed 484K, 20% free 2472K/3084K, paused 74ms+7ms, total 175ms
 03-25 11:43:00.025: W/Trace(287): Unexpected value from nativeGetEnabledTags: 0
 03-25 11:43:00.025: W/Trace(287): Unexpected value from nativeGetEnabledTags: 0
 03-25 11:43:00.038: W/Trace(287): Unexpected value from nativeGetEnabledTags: 0
 03-25 11:43:00.044: W/Trace(556): Unexpected value from nativeGetEnabledTags: 0
 03-25 11:43:00.065: W/Trace(287): Unexpected value from nativeGetEnabledTags: 0
 03-25 11:43:00.099: W/Trace(816): Unexpected value from nativeGetEnabledTags: 0
 03-25 11:43:00.124: W/Trace(816): Unexpected value from nativeGetEnabledTags: 0
 03-25 11:43:00.138: W/Trace(556): Unexpected value from nativeGetEnabledTags: 0
 03-25 11:43:00.138: W/Trace(556): Unexpected value from nativeGetEnabledTags: 0
 03-25 11:43:00.138: W/Trace(556): Unexpected value from nativeGetEnabledTags: 0
 03-25 11:43:00.146: W/Trace(816): Unexpected value from nativeGetEnabledTags: 0
 03-25 11:43:00.146: W/Trace(816): Unexpected value from nativeGetEnabledTags: 0
 03-25 11:43:00.164: W/Trace(816): Unexpected value from nativeGetEnabledTags: 0
 03-25 11:43:00.174: W/Trace(816): Unexpected value from nativeGetEnabledTags: 0
 03-25 11:43:00.174: W/Trace(816): Unexpected value from nativeGetEnabledTags: 0
 03-25 11:43:00.174: W/Trace(816): Unexpected value from nativeGetEnabledTags: 0
 03-25 11:43:00.204: W/Trace(816): Unexpected value from nativeGetEnabledTags: 0
 03-25 11:43:00.204: W/Trace(816): Unexpected value from nativeGetEnabledTags: 0
 03-25 11:43:00.225: W/Trace(816): Unexpected value from nativeGetEnabledTags: 0
 03-25 11:43:00.283: W/Trace(816): Unexpected value from nativeGetEnabledTags: 0
 03-25 11:43:00.285: W/Trace(816): Unexpected value from nativeGetEnabledTags: 0
 03-25 11:43:00.285: W/Trace(816): Unexpected value from nativeGetEnabledTags: 0
 03-25 11:43:00.344: W/Trace(816): Unexpected value from nativeGetEnabledTags: 0
 03-25 11:43:00.374: W/Trace(816): Unexpected value from nativeGetEnabledTags: 0
 03-25 11:43:00.374: W/Trace(816): Unexpected value from nativeGetEnabledTags: 0
 03-25 11:43:00.374: W/Trace(816): Unexpected value from nativeGetEnabledTags: 0
 : E/(): Device disconnected 
```

是否为 android 更改了某些设置，我是否必须重新安装 eclipse？

我不知道 android.app.ServiceConnectionLeaked 的含义或导致此错误的原因并拼命寻求帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T06:00:34.180

我可以按照 Sergey Benner 建议的链接中的建议修复错误。我在模拟器和第三方 jar 文件方面遇到了一些问题。当我重新创建设备模拟器时，我可以修复错误并且我的应用程序运行正常。**

# jquery - 在占位符中动态添加 html 标记和 gridview

> ID：15616599
> 
> 赞同：0
> 
> 时间：2013-03-25T13:48:52.833
> 
> 标签：jquery, asp.net, gridview

我的页面上有 jquery 选项卡。我想从后面的代码动态地在每个选项卡中添加选项卡和网格视图。我该如何添加。我很困惑在占位符中为 jquery 选项卡添加标记，如下所示。

```
<div id="ui-tabs">
<ul>
 <li><a href="#tabs-1">title1</a></li>
<li><a href="#tabs-2">title2</a></li>
<li><a href="#tabs-3">title3</a></li>
</ul>
 <div id="tabs-1">
 Content with gridview1
 </div>
 <div id="tabs-2">Content with gridview2</div>
<div id="tabs-3">Content with gridview3</div>
 </div> 
```

我想动态添加这些网格视图，因为选项卡的数量可能会有所不同。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:52:10.283

在热身谷歌并实施这个想法之后，我得到了这个想法。只需在后面的代码中添加 html 控件并将它们放在占位符中即可解决我的问题。请参阅 Page_Load 方法中的代码

**.ASPX**

```
<div>
        <asp:placeholder runat="server" id="placeholderDynamic">

        </asp:placeholder>
</div> 
```

**.ASPX.CS**

```
 if (!IsPostBack)
        {              
           // Get the list from database
            List<CategoryQuesAns> quesAns = GetQuestions();

           //For Jquery tabs we require <li> in  <ul> and <div> within one outer <div>

            //Create outer div
            HtmlGenericControl divCotnainer = new HtmlGenericControl("div");
            divCotnainer.ID = "ui-tabs";
            divCotnainer.ClientIDMode = ClientIDMode.Static;

            //Create ul
            HtmlGenericControl unorderdList = new HtmlGenericControl("ul");

            //Create li's as per the number of questions
            int i = 1;
            foreach (CategoryQuesAns ques in quesAns)
            {
                HtmlGenericControl listcontrol = new HtmlGenericControl("li");
                HtmlAnchor anchor = new HtmlAnchor();
                anchor.HRef = "#tabs-"+i.ToString();
                anchor.InnerText = "Q-" + i.ToString();
                listcontrol.Controls.Add(anchor);
                //adding li in ul
                unorderdList.Controls.Add(listcontrol);
                i++;
            }

            //adding ul in the outer div
            divCotnainer.Controls.Add(unorderdList);

            //adding div in the outer div
            int j = 1;
            foreach (CategoryQuesAns ques in quesAns)
            {
                //create inner div as per the number of questions
                HtmlGenericControl divtabs = new HtmlGenericControl("div");
                divtabs.ID = "tabs-" + j.ToString();
                divtabs.ClientIDMode = ClientIDMode.Static;

                //create gridview table for each tab(li)
                Label lblQuestionText = new Label();
                lblQuestionText.Text = ques.QuestonName;

                GridView dyamicGrid=new GridView();
                dyamicGrid.ID = "Gridview-" + j.ToString();
                dyamicGrid.ClientIDMode = ClientIDMode.Static;
                dyamicGrid.CssClass = "mGrid";

                dyamicGrid.DataSource = quesAns;
                dyamicGrid.DataBind();

                divtabs.Controls.Add(lblQuestionText);
                divtabs.Controls.Add(dyamicGrid);
                divCotnainer.Controls.Add(divtabs);
                placeholderDynamic.Controls.Add(divCotnainer);
                j++;
            }         

        } 
```

# java - 从循环 null 到数组

> ID：15616602
> 
> 赞同：1
> 
> 时间：2013-03-25T13:49:00.003
> 
> 标签：java, android, arrays, for-loop, null

这个答案来自这里：[2Darray to 1darray with for loop](https://stackoverflow.com/questions/15600702/2darray-to-1darray-with-for-loop)

我不知道是否可以在回答后重新打开它。如果是这种情况，我深表歉意。

我对该函数进行了一些修改，以像这样结束：

```
public  String[] initarray() {

xFINAL = new String [data_array.length];
int i = 0;
int j=0;
int UMB1 = 100;
int l = data_array.length;

for (i=0 ; i < l ; i++) {
        LATIT = Double.parseDouble(data_array [i][2]);
        LONGIT = Double.parseDouble(data_array [i][3]); 

        dist = calculateDistanceByHaversineFormula(Localizacion.LONGITUD_D, Localizacion.data_arrayUD_D,LONGIT,  LATIT);

        if (dist < UMB1){

            xFINAL[j++] = data_array [i][0];
                    System.out.println(Arrays.toString(xFINAL));
                    System.out.println("j++" + data_array[i][0]);

                }

            }

return xFINAL; 
```

}

dist = 2 个位置之间的米差，返回一个 int。

data_array 之前已经定义过。

这是“一种工作”。我从该代码中得到的是这样的数组（data1 和 data3 在条件内，data2 为假）

```
[data1 , data3 , null] 
```

我认为应该是这样的：

```
[data1, data3] 
```

当我尝试将 xFINAL 数组与微调器一起使用时出现错误：

```
public final void rel() {

String[] array_spinner = MYSQL.xFINAL;

    ArrayAdapter<String> spinnerArrayAdapter = new ArrayAdapter<String>(getActivity(), android.R.layout.simple_spinner_dropdown_item, array_spinner);
    spinnerArrayAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    sp_1.setAdapter(spinnerArrayAdapter);
} 
```

当我尝试加载微调器时，它给了我以下信息：

```
03-25 13:25:26.367: E/AndroidRuntime(30843): FATAL EXCEPTION: main
03-25 13:25:26.367: E/AndroidRuntime(30843): java.lang.NullPointerException
03-25 13:25:26.367: E/AndroidRuntime(30843):    at     android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:394)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at  android.widget.ArrayAdapter.getView(ArrayAdapter.java:362)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at  android.widget.Spinner.measureContentWidth(Spinner.java:681)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at android.widget.Spinner.onMeasure(Spinner.java:442)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at android.view.View.measure(View.java:15518)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:681)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:461)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at android.view.View.measure(View.java:15518)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:681)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:461)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at android.view.View.measure(View.java:15518)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4825)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at android.view.View.measure(View.java:15518)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:847)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at android.view.View.measure(View.java:15518)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4825)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2176)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at android.view.View.measure(View.java:15518)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1874)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1089)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1265)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at android.view.Choreographer.doCallbacks(Choreographer.java:562)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at android.view.Choreographer.doFrame(Choreographer.java:532)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at android.os.Handler.handleCallback(Handler.java:725)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at android.os.Looper.loop(Looper.java:137)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at android.app.ActivityThread.main(ActivityThread.java:5041)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at java.lang.reflect.Method.invokeNative(Native Method)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at java.lang.reflect.Method.invoke(Method.java:511)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-25 13:25:26.367: E/AndroidRuntime(30843):    at dalvik.system.NativeStart.main(Native Method) 
```

如果我只是将 3 个数据输入到微调器中，它就可以工作......所以我迷路了。

请问有什么帮助吗？:)

提前致谢。

[编辑]

```
03-25 19:39:23.081: I/System.out(3501): [00000001]
03-25 19:39:23.081: I/System.out(3501): 00000001
03-25 19:39:23.091: I/System.out(3501): [00000001, 00000003]
03-25 19:39:23.091: D/AndroidRuntime(3501): Shutting down VM
03-25 19:39:23.091: W/dalvikvm(3501): threadid=1: thread exiting with uncaught    exception (group=0x40bac930)
03-25 19:39:23.091: E/AndroidRuntime(3501): FATAL EXCEPTION: main
03-25 19:39:23.091: E/AndroidRuntime(3501): java.lang.IndexOutOfBoundsException:   Invalid index 2, size is 2
03-25 19:39:23.091: E/AndroidRuntime(3501):     at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
03-25 19:39:23.091: E/AndroidRuntime(3501):     at java.util.ArrayList.get(ArrayList.java:304)
03-25 19:39:23.091: E/AndroidRuntime(3501):     at com.example.mvlpres.c_sql.recorre_array2(c_sql.java:635)
03-25 19:39:23.091: E/AndroidRuntime(3501):     at com.example.mvlpres.SincronizacionFragment$1.onClick(SincronizacionFragment.java:179)
03-25 19:39:23.091: E/AndroidRuntime(3501):     at android.view.View.performClick(View.java:4204)
03-25 19:39:23.091: E/AndroidRuntime(3501):     at android.view.View$PerformClick.run(View.java:17355)
03-25 19:39:23.091: E/AndroidRuntime(3501):     at android.os.Handler.handleCallback(Handler.java:725)
03-25 19:39:23.091: E/AndroidRuntime(3501):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-25 19:39:23.091: E/AndroidRuntime(3501):     at android.os.Looper.loop(Looper.java:137)
03-25 19:39:23.091: E/AndroidRuntime(3501):     at android.app.ActivityThread.main(ActivityThread.java:5041)
03-25 19:39:23.091: E/AndroidRuntime(3501):     at java.lang.reflect.Method.invokeNative(Native Method)
03-25 19:39:23.091: E/AndroidRuntime(3501):     at java.lang.reflect.Method.invoke(Method.java:511)
03-25 19:39:23.091: E/AndroidRuntime(3501):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-25 19:39:23.091: E/AndroidRuntime(3501):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-25 19:39:23.091: E/AndroidRuntime(3501):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:51:00.273

```
 System.out.println(Arrays.toString(xFINAL)); 
```

This line should be after for loop completes.

For references (anything that holds an object) that is null.

For int/short/byte that is a 0.

For float/double that is a 0.0

For booleans that is a false.

When you create an array of String, all entries are null initially. Your array size is 3 I think so initially it is initialized with [null,null, null]. Two null get replaced with the values and one remains as it is.

**EDIT: Use ArrayList instead Array**

```
List<String> list = new ArrayList<String>();
for (i=0 ; i < l ; i++) {
    LATIT = Double.parseDouble(data_array [i][2]);
    LONGIT = Double.parseDouble(data_array [i][3]); 

    dist = calculateDistanceByHaversineFormula(Localizacion.LONGITUD_D, Localizacion.data_arrayUD_D,LONGIT,  LATIT);

    if (dist < UMB1){

        list.add(data_array [i][0]);
                System.out.println(list);
                System.out.println(list.get(i));

     }

} 
```

# ios - Unity：resources.bundle 未添加到 xcode

> ID：15616603
> 
> 赞同：0
> 
> 时间：2013-03-25T13:49:05.803
> 
> 标签：ios, xcode, plugins, unity3d, bundle

我曾经在我的 Unity 项目的 Plugins/IOS 文件夹中复制/粘贴我的 IOS 插件文件，但它不适用于捆绑包（因为它具有目录结构）。我不能相信没有办法从内部的.bundle统一生成xcode项目？

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T14:22:27.277

Unity3D 将不包含 Plugins/iOS to Xcode 项目中的文件夹。事实上，Unity3D 只会为您自动合并源文件和 .a 库，如[Unity3D 的文档](http://docs.unity3d.com/Documentation/Manual/PluginsForIOS.html)所述：

> 自动插件集成 Unity iOS 以有限的方式支持自动插件集成。位于 Assets/Plugins/iOS 文件夹中的所有扩展名为 .a,.m,.mm,.c,.cpp 的文件将自动合并到生成的 Xcode 项目中。但是，合并是通过将文件从 Assets/Plugins/iOS 符号链接到最终目的地来完成的，这可能会影响某些工作流程。.h 文件不包含在 Xcode 项目树中，但它们出现在目标文件系统上，因此允许编译 .m/.mm/.c/.cpp 文件。
> 
> 注意：当前不支持子文件夹。

但是您可以使用[PostprocessBuildPlayer](http://docs.unity3d.com/Documentation/ScriptReference/PostProcessAttribute.html)属性自行实现。为此，我制作了一个名为 的工具`XUPorter`，它可以使从 Unity3D 到 Xcode 的导出和库设置更容易。你可能想[在 GitHub 上](https://github.com/onevcat/XUPorter)看到它。包中有一个演示，您可以将您的包设置在“文件夹”标签下。

# android - Android：ImageView 在 ScrollView 内缩放到屏幕宽度

> ID：15616605
> 
> 赞同：0
> 
> 时间：2013-03-25T13:49:12.537
> 
> 标签：android, imageview, scrollview, image-scaling

我对 android 编程很陌生，我偶然发现了我的`layout`.

起初，我有`Linearlayout`a `textview`， 2`buttons`和 a`imageview` **缩放**以适应屏幕。

现在我想把它放在 a 下`scrollview`，这样`imageview`可以放大**（**到屏幕的宽度）。

没有`scrollview`一切都很好，但是有了`scrollview`，我`imageview`的不再缩放了。

我在做什么**错**？**我在StackOverflow**上尝试了许多解决方案，但我无法让它与`ScrollView`. 提前致谢！

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">
<LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:text="@string/pageno" />

    <Button
        android:id="@+id/button1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:text="@string/texta" />

    <Button
        android:id="@+id/button2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:text="@string/textb" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:adjustViewBounds="true"
        android:scaleType="fitCenter"
        android:src="@drawable/page1" />

</LinearLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:11:14.213

将 LinearLayout/RelativeLayout 作为父视图。在那做一个滚动视图并设置alignparentTop = true。此滚动视图将包含一个布局，其中将放置所有其他视图。

# asp.net-mvc-4 - 无法将图像添加到 Telerik 树视图

> ID：15616613
> 
> 赞同：0
> 
> 时间：2013-03-25T13:49:39.307
> 
> 标签：asp.net-mvc-4, telerik, telerik-mvc

在这里，我将使用 MVC 4 添加 Telerik 树视图。树正在填充。但是当我尝试添加图像时，它失败了..

我的代码在这里

```
 @(Html.Telerik().TreeView()
    .Name("TreeView")
    .BindTo(Model, mappings =>
    {
        mappings.For<myMVCapp.Models.ProjectTree>(binding => binding
                .ItemDataBound((item, node) =>
                {
                    if (item.Text == "News Project")
                    {
                        item.ImageUrl = "~/Content/Images/myimg.png";

                    }
                    item.Text = node.RootNodeText;

                })
               .Children(node => node.ChildNodes)
                );
        mappings.For<MyEntityModel.Project>(binding => binding
                .ItemDataBound((item, subNodes) =>
                {
                    item.Text = subNodes.ProjectName;
                }));
    })
    ) 
```

任何人都知道如何添加图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:28:59.520

`item.Text`在给它一个值之前，你会尝试与它进行比较。因此，在您的`if`表达式中，`item.Text`将始终`null`如此，因此您的`item.ImageUrl = ...`行将不会被执行。

所以在 if 之前进行赋值：

```
item.Text = node.RootNodeText;
if (item.Text == "News Project")
{
    item.ImageUrl = "~/Content/Images/myimg.png";
} 
```

或者`node.RootNodeText`在你的 if 中使用：

```
if (node.RootNodeText == "News Project")
{
    item.ImageUrl = "~/Content/Images/myimg.png";
}
item.Text = node.RootNodeText; 
```

# jquery - 我希望 div 从我的 td 中取出，如图所示

> ID：15616615
> 
> 赞同：1
> 
> 时间：2013-03-25T13:49:43.093
> 
> 标签：jquery, html, css

我有这个 HTML 代码：

```
<table>
    <tr>
        <td>
            <p id="price">10000</p>
            <div class="no" hidden="hidden">Description</div>
        </td>
    </tr>
</table> 
```

我的jQuery代码是：

```
<script type="text/javascript">
    $(document).ready(function(){
        $("#price").live("mouseenter", function () {
            $(this).next("div.no").show();
        });
        $("#price").live("mouseleave", function () {
            $(this).next("div.no").hide();
        });
    });
</script> 
```

现在我想要特定高度的标签。让我用图片描述你：

在进入鼠标之前，表格是这样的： ![在此处输入图像描述](../Images/5ec04258e863d8cdffaa93af91e723ce.png)

输入鼠标后，上面的代码会这样： ![在此处输入图像描述](../Images/5f424bd0c81e8f28ac397603f01f8eda.png)

但我想要的东西如下： ![在此处输入图像描述](../Images/24a14bb34287831c9fe922d55d96a3db.png) 我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T14:13:34.883

也许这可以帮助你：

我使用悬停而不是实时，因为您正在重新创建“onElementEventMouse”，请在此处查看：http: [//jsfiddle.net/9bbz5/](http://jsfiddle.net/9bbz5/)

**HTML：**

```
<table>
    <tr>
        <td>
            <p id="price">10000</p>
            <div class="no" hidden="hidden">Description</div>
        </td>
         <td>
            <p id="price">10000</p>
        </td>
         <td>
            <p id="price">10000</p>
        </td>
    </tr>
</table> 
```

**CSS：**

```
#price {
    background-color: yellow;
    height:40px;
    width: 200px;
}
td {
    text-align: center;
}
.no {    
    background-color: red;
    padding: 15px;
    margin-top: -30px;
    width: 150px;
    position: absolute;
} 
```

**JS：**

```
$(document).ready(function(){
  $("p#price").hover(
      function () {
        $(this).next("div.no").show();
      },
      function () {
        $(this).next("div.no").hide();
      });
  }); 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:56:25.373

隐藏原始 DIV，对其进行克隆，并将其相对于您悬停的 TD 绝对定位在文档中。

就像是：

```
 $(document).ready(function(){
        var cloned_div;
        $("#price").live("mouseenter", function () {
            cloned_div = $(this).next("div.no").clone();
            // determine position of the hovered TD
            // position cloned DIV based on that
            // show cloned div
        });
        $("#price").live("mouseleave", function () {
            // destroy / remove cloned div
        });
    }); 
```

关于克隆的 jQuery 文档：http: [//api.jquery.com/clone/](http://api.jquery.com/clone/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T13:51:45.233

使用 css 给它一个绝对位置，如果由于某种原因 div 落后于 td，则添加一个 z-index。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T14:14:10.587

让我们考虑css（仅用于临时目的）

```
.no{
    display:none;
    height:10px;
    width:10px;
    background-color:YELLOW;
}
#price{
    background-color: RED;
} 
```

javascript代码如下：

```
$(document).on("mouseenter","#price", function (e) {
    $(this).next("div.no").show().css({
        position: "absolute",
        marginLeft:e.clientX + "px",
        marginTop: e.clientY + "px"
    });
});
$(document).on("mouseleave", "#price",function () {
    $(this).next("div.no").hide();
}); 
```

试试这个代码，我相信它有助于你得到什么。我还为您的测试添加了 jsfiddle 链接，如下所示：http: [//jsfiddle.net/CeYkx/1/](http://jsfiddle.net/CeYkx/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T14:07:55.430

这应该可以通过 CSS 解决。您可以将 div.no 设置为负上边距，使其与 p#price 重叠

# sql - 重复键值违反唯一约束，CakePHP

> ID：15616617
> 
> 赞同：0
> 
> 时间：2013-03-25T13:49:44.890
> 
> 标签：sql, postgresql, cakephp, constraints, primary-key

我已将我的 postgres 数据库设置为已填充并应用了所有约束。我在所有桌子上都烤蛋糕并开始测试。我收到了这个错误：

> 错误：SQLSTATE[23505]：唯一违规：7 错误：重复键值违反唯一约束“fasciculos_pkey1”详细信息：键 (id)=(7) 已存在。

SQL查询：

> 插入“xconv2”。“fasciculos”（“created”、“user_id”、“revista_id”、“volume”、“issue”、“svol”、“snum”、“issuedate”、“scheme”、“reftype”、 "cliente_id", "output_packtype", "modified") 值 ('now()', 4, 144, '4', '4', '4', '4', '4', '4', '4 ', 1, '/var/www', '2013-03-25')

pk (curr_val = 545) 默认情况下确实具有非空和唯一约束，但是当我尝试使用 add.ctp 添加新记录时，cake 不会考虑为 PK 创建的序列的下一个值。似乎它只是重新开始......我认为这是缓存问题，但不确定。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T00:03:18.207

有几件事：

*   我在 SQL 语句中没有看到键 7 或 545；那么这些值是从哪里来的呢？
*   该列以**字符串**`created`形式填充“now()” ，而不是 NOW() 函数中的值。在您的 PHP 代码中填写正确的日期时间（通常可以解决问题）。**`date('Y-m-d H:i:s')`**

 **无论如何，如果您在循环中插入记录，或者只是多个具有相同模型的记录，请不要忘记调用`create()`模型，否则 ID 将是相同的。**

# language-agnostic - 如何比较不同的编程语言？

> ID：15616618
> 
> 赞同：-3
> 
> 时间：2013-03-25T13:49:58.500
> 
> 标签：language-agnostic

抱歉，我在 Stack Overflow 上找不到任何相关问题。但是，我发现了这个信息图。 [https://www.udemy.com/blog/wp-content/uploads/2012/01/PROGRAMMING-LANGUAGE-3.png](https://www.udemy.com/blog/wp-content/uploads/2012/01/PROGRAMMING-LANGUAGE-3.png) 所以。我经常听到有人说某些语言具有更高的性能或更高效。例如，在 The Pragmatic Programmer's Guide Yukihiro Matsumoto 的介绍中称他的语言“比 Perl 更强大，比 Python 更面向对象”。虽然很明显不同范式的代表各有优缺点（C 通常具有更高的性能，而 Python 使开发过程更简单），但仍不清楚同一范式内的比较标准是什么以及联系如何破碎的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:56:30.533

看看计算机语言基准游戏（又名编程语言大战）：

[https://benchmarksgame-team.pages.debian.net/benchmarksgame/performance/mandelbrot.html](https://benchmarksgame-team.pages.debian.net/benchmarksgame/performance/mandelbrot.html)

# mysql - DBI/DBD::mysql/mysql_type_name: 如何区分 Blob 和 Text？

> ID：15616619
> 
> 赞同：1
> 
> 时间：2013-03-25T13:49:59.633
> 
> 标签：mysql, perl, text, dbi, sqldatatypes

此示例输出两次“blob”。如果一列的数据类型是，我怎么知道`TEXT`？

```
#!/usr/bin/env perl
use warnings;
use strict;
use DBI;
use Data::Dumper;

my$dbh = DBI->connect( "DBI:mysql:dbname=test", 'user', 'passwd', {
    RaiseError => 1,
    AutoCommit => 1,
} ) or die DBI->errstr;

my $table = 'my_test_table';
$dbh->do( "DROP TABLE IF EXISTS $table" );
$dbh->do( "CREATE TABLE $table ( Foo TEXT, Bar BLOB )" );

my $sth = $dbh->prepare( "INSERT INTO $table ( Foo, Bar ) VALUES( ?, ? )" );
$sth->execute( 'a', 'a' );

$sth = $dbh->prepare( "SELECT * FROM $table" );
$sth->execute();

my $col_types = $sth->{mysql_type_name};
print Dumper $col_types; 
```

输出：

```
$VAR1 = [
        'blob',
        'blob'
        ]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:32:45.733

通常，当您使用数据库时，您知道数据字段是什么，并且您使用 fetch_hashref 或 fetch_arrayref 函数并获取所需的数据（在您的情况下字段 Foo(Text) 和 Bar(Blob)），我没有得到您在尝试什么在这里实现？, 如果您需要从 Foo/Bar 获取数据，您应该使用 fetch_arrayref 或 hashref 函数，我还看到使用“use strict”您仍然设法将裸字“mysql_type_name”传递给语句句柄 $sth。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:53:39.313

这是因为 BLOB 和 TEXT 在 mysql 中（几乎）是相同的：[BLOB 和 TEXT 类型](http://dev.mysql.com/doc/refman/5.0/en/blob.html)。

我不确定为什么 DBD::mysql 不能区分这两者。您可能想要使用 VARCHAR 而不是 TEXT。

# jquery - 如何使 Jquery Mobile 1.3 ListView（仅）从右到左（R2L）？

> ID：15616624
> 
> 赞同：3
> 
> 时间：2013-03-25T13:50:15.007
> 
> 标签：jquery, html, css, jquery-mobile, jquery-mobile-listview

我有以下html，

[http://jsfiddle.net/yWkGR/2/](http://jsfiddle.net/yWkGR/2/)

```
<div data-role="page">

    <div data-role="header">
        <h1>My Title</h1>
    </div><!-- /header -->

    <div data-role="content" id="content">    
        <ul data-role="listview">
                    <li>

        <a href="#">
            <img width="80" height"80" src="http://www.gravatar.com/avatar/7efa2e4098f60c15d230436ca99d7250?s=32&d=identicon&r=PG" />
            <div class="left">
                <h3>New Latest One</h3>
                <p>$12,000</p>
            </div>
            <div class="right">
                <input type="text" style="width:75px"/>
            </div>
            </a>
            </li>
              <li>

        <a href="#">
            <img width="80" height"80" src="http://www.gravatar.com/avatar/7efa2e4098f60c15d230436ca99d7250?s=32&d=identicon&r=PG" />
            <div class="left">
                <h3>New Latest One</h3>
                <p>$12,000</p>
            </div>
            <div class="right">
                <input type="text" style="width:75px"/>
            </div>
            </a>
            </li>
              <li>

        <a href="#">
            <img width="80" height"80" src="http://www.gravatar.com/avatar/7efa2e4098f60c15d230436ca99d7250?s=32&d=identicon&r=PG" />
            <div class="left">
                <h3>New Latest One</h3>
                <p>$12,000</p>
            </div>
            <div class="right">
                <input type="text" style="width:75px"/>
            </div>
            </a>
            </li>
        </ul>

    </div><!-- /content -->

</div><!-- /page --> 
```

问题是我需要这个 html 对我的用户来说是从右到左的。这可以在不使用任何第三方库的情况下实现吗？

![在此处输入图像描述](../Images/af7cf54de5c77d4f84495e244249c257.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T14:11:58.840

# 解决方案

仅使用 css，工作 jsFiddle 示例：http: [//jsfiddle.net/Gajotres/Ajdc4/](http://jsfiddle.net/Gajotres/Ajdc4/)

您只需要更改图标。我不能从这里做。

```
.ui-input-text {
    width: 75px;
}

#custom-li .ui-li .ui-btn-text .ui-link-inherit .ui-li-thumb {
    position:absolute;
    top:0;
    bottom:0;
    margin:auto;
    right: 0;
    margin-right: 0 !important;
} 

#custom-li .ui-li .ui-icon {
    left: 10px !important;    
}

#custom-li .ui-li .ui-btn-text .ui-link-inherit .left {
    float: right;
    margin-right: 50px;
    display:block; 
    -moz-transform: matrix(-1, 0, 0, 1, 0, 0);
    -webkit-transform: matrix(-1, 0, 0, 1, 0, 0);
    -o-transform:matrix(-1, 0, 0, 1, 0, 0);    
}

#custom-li .ui-li .ui-btn-text .ui-link-inherit .right {
    float: right;
    margin-right: 20px;
    display:block; 
    -moz-transform: matrix(-1, 0, 0, 1, 0, 0);
    -webkit-transform: matrix(-1, 0, 0, 1, 0, 0);
    -o-transform:matrix(-1, 0, 0, 1, 0, 0);        
}

#left-split-icon {
    left: 0 !important;   
    border-width: 0 1px 0 0 !important;
}

.ui-li-link-alt { right: auto !important; } // Fix for jQM 1.3 
```

# 更多信息

如果您想自己学习如何进行这种更改，您应该查看这篇**[文章](http://www.gajotres.net/learn-how-to-customize-jquery-mobile-application/)**，它将教您如何自己进行。

# c# - 拒绝访问 C# 中的文件

> ID：15616625
> 
> 赞同：2
> 
> 时间：2013-03-25T13:50:26.457
> 
> 标签：c#, io, system, unauthorizedaccessexcepti

我使用简单的文件 IO 在 C# XNA 中创建了一个游戏来处理保存游戏数据，但是当我打包我的游戏并让其他人运行它时，这会产生问题。经过几次测试，我发现游戏可以在管理员中运行，但是如果不这样做会抛出 UnauhorizedAccessExceptions（并且在没有被捕获时只是挂起无响应）。这对我来说确实很有意义，因为我记得在我尝试使用文件 IO 时看到了这个异常。

我可以简单地捕获异常并且什么都不做，让游戏本身响应......但保存功能不起作用，除非以管理员权限运行。

所以我的问题是，有没有一个我可以保存到的地方不是用户侵入，但没有管理员访问权限就可以访问？这甚至是可访问位置的问题还是更多？有什么体面的方法可以解决这个问题吗？如果我需要提供代码或任何更多细节，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T13:52:58.217

用户配置文件中的某处，例如 AppData 或 My Documents。

获取 AppData 的路径如下：

```
Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) 
```

Environment.GetFolderPath 的文档在这里：

[http://msdn.microsoft.com/en-gb/library/system.environment.getfolderpath.aspx](http://msdn.microsoft.com/en-gb/library/system.environment.getfolderpath.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T13:55:11.787

您要在哪里保存文件？

根据您要保存的内容，我会说保存到[ApplicationData](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)是一个不错的选择。

# excel - Lookup/Find within a set area

> ID：15616629
> 
> 赞同：0
> 
> 时间：2013-03-25T13:50:36.360
> 
> 标签：excel, vba

When I replace "Activesheet.cells" in the "lFundcolumn" below with "rnMonths" I'm getting a "Run time error 13". I would be grateful if someone could explain what I'm doing wrong here please.

In short - I want to find a value within a row and copy that column and the column to the right of it. Below is the code for locating the first column which is erroring.

```
Sub Roll_period()

Dim sMonth As String
Dim rnMonths As Range
Dim lFundcolumn As Long
Dim rnRngtocopy As Range
    sMonth = ActiveSheet.Cells(3, 1).Value
    Set rnMonths = ActiveSheet.Rows(4)

lFundcolumn = rnMonths.Find(What:=sMonth, after:=ActiveCell, LookIn:=xlValues, LookAt:=xlWhole, searchorder:=xlByColumns).Column 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T14:21:23.023

...您所做的一切都是正确的，您的问题`after:=ActiveCell`在您的`Find`陈述中，这可能会或可能不会指向正确的地方查看...

将其更改为：

```
after:=rnMonths.Cells(1, 1) 
```

看起来像：

```
lFundcolumn = rnMonths.Find(What:=sMonth, after:=rnMonths.Cells(1, 1), LookIn:=xlValues, LookAt:=xlWhole, searchorder:=xlByColumns).Column 
```

希望能解决问题！！

# php - How to search MYSQL database with a few WHEREs

> ID：15616635
> 
> 赞同：-3
> 
> 时间：2013-03-25T13:50:46.287
> 
> 标签：php, mysql

EDIT:

Here is my table:

[user_friend] table:

*   id, -user_id
*   friend_id
*   time

[late] table:

*   id
*   user_id
*   reason
*   check_in_time

Now, let's just say the current user's id is '1', I want to search the table user_friend for all the rows with the user_id of '1' then put all the friend_id all the rows with user_id of '1' in a var or something(Let's just say there 3 rows with the friend_id of 2,3 $ 4 respectively).

Now I want to get the id of the rows in the late table with the user_id of any of the current user's friend's id(For this case it's 2,3 & 4). Hope it helps

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:45:51.560

**更新**

如果我正确理解了您的新信息，这将从当前= 1`friend_id`的表中选择一个 's列表。然后它将使用这个's 列表来选择所有这些's 出现的条目。`user_friend``user_id``friend_id``late``friend_id`

```
SELECT * FROM late WHERE user_id IN (SELECT friend_id FROM user_friend where user_id=1); 
```

您也可以使用表连接来实现相同的目的。但这并不容易解释。

**原始回复** 建议这样做的一种方法可能是使用 a`WHERE IN (SUB SELECT)`但这可能不是最有效的......这将取决于您的数据结构和数据量 - 但您没有提供足够的信息......

就像是：

```
SELECT * FROM late WHERE user_id IN (SELECT * FROM user_friends WHERE id IN (1,2,3)); 
```

正如我所说，有最确定的更好方法 - 但更多信息会有所帮助。

# visual-studio-2010 - T4 Visual Studio 2010 include linked T4

> ID：15616636
> 
> 赞同：0
> 
> 时间：2013-03-25T13:50:46.677
> 
> 标签：visual-studio-2010, linked-list, include, t4

Here's one. I have a bunch of T4s in one project / solution. This is a framework with support code and T4 templates.

In a different solution, I want to use this framework, but have the support classes / T4s remain in the original solution.

In the new solution I link to the support code and T4s (add existing / link). Now in the new solution I have a T4 which needs to include the linked T4\. It has something like this:

<#@ template language="C#" debug="false" hostspecific="true"#> <#@ include file="..\Models\DALContextGenerator.tt"#> <#@ output extension=".cs"#><# Generate("..\Models\Model1.edmx");

# >

In this case, DALContextGenerator.tt is in this solution, but is linked to the real DALContextGenerator.tt in a different solution. WHen I run the T4 I get an error ("Failed to resolve include text"). If I reference the physical location it is fine.

Any ideas?

Thanks

Ray

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:53:35.460

据我所知，T4 引擎使用模板文件作为根，不知道 Visual Studio 解决方案和解决方案项。如果您使用 Visual Studio 链接到其他地方的文件，则此信息仅存储在项目文件中。T4 引擎查找相对于 T4 文件的包含路径。这就是引用 Visual Studio Link 相对失败的原因。但是使用绝对路径或指向物理文件的相对路径引用包含文件会成功。

以下是一些如何解决您的问题的想法，但没有我能想到的“顺利”解决方案：

*   在原始包含文件和模板文件旁边的文件之间使用硬链接（命令行`mklink /H source target`：）
*   如果您使用的是源代码控制系统（如 svn），您可以使用外部目录而无需复制您的原件
*   拥有一个（元）T4 模板，该模板根据您从 Env.DTE Visual Studio 模型中获得的信息生成具有正确路径的实际 T4 模板

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-14T12:26:16.783

旧但相关的问题，我认为与其他线程相同，我在其中发布了回复，使用扩展 $(ProjectDir) 和 $(SolutionDir)：[https ://stackoverflow.com/a/42785952/1948625](https://stackoverflow.com/a/42785952/1948625)

# mysql - How to remove duplicate rows from a join query in mysql

> ID：15616638
> 
> 赞同：1
> 
> 时间：2013-03-25T13:50:48.207
> 
> 标签：mysql, sql, join

I have a table having columns id and name

in my table 3 records present

```
id       name 
1        Chinmoy
2        Amit
3        Bhagi 
```

I want result

```
name1     name2 
Amit      Bhagi
Amit      Chinmoy
Bhagi     chinmoy 
```

I tried and succeeded up to this

```
name1    name2
Amit     Bhagi
Amit     Chinmoy
Bhagi    Amit
Bhagi    Chinmoy
Chinmoy  Amit
Chinmoy  Bhagi 
```

by using this query

```
select tbl1.name,tbl2.name from test tbl1 
join test tbl1 on tbl1.name != tbl2.name
order by tbl1.name,tbl2.name; 
```

Now i didn't get how to do.

I have to eliminate the record which are already present in opposite order.

Please Help

Thanks in advance

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T13:58:03.567

基本上，您可以通过以下方式从两个表的乘积中过滤结果`a.Name < b.Name`

```
SELECT  a.Name Name1, b.Name Name2
FROM    TableName a, TableName b
WHERE   a.Name < b.Name
ORDER   BY Name1, Name2 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/f7977/7)

输出

```
╔═══════╦═════════╗
║ NAME1 ║  NAME2  ║
╠═══════╬═════════╣
║ Amit  ║ Bhagi   ║
║ Amit  ║ Chinmoy ║
║ Bhagi ║ Chinmoy ║
╚═══════╩═════════╝ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T13:54:23.147

尝试这个：

```
select tbl1.name as n1, tbl2.name as n2 from test tbl1 
join test tbl2
on tbl1.name < tbl2.name
order by tbl1.name, tbl2.name; 
```

**说明**：

您可以添加一个条件`tbl1.name < tbl2.name`来消除重复值。这样你就不需要你已经拥有的连接条件（`tbl1.name != tbl2.name`）。因为当 a < b 时，a 绝对不等于 b，并且它还会对您的名字进行排序，因此如果 Amit < Bhagi 为真，则相反的情况不正确，您也不会得到 Bhagi - Amit。

# php - Issues with date_diff php, comparing nowtime/nowdate, to SQL saved datetime

> ID：15616642
> 
> 赞同：0
> 
> 时间：2013-03-25T13:51:01.693
> 
> 标签：php, mysql

```
 $today = date('Y-m-d H:i:s'); // get date SQL format
    $today = date('Y-m-d H:i:s', strtotime($today)); // get date SQL format¨

    $today = new DateTime($today);
    $compare = new DateTime($row['date']);

    $interval = date_diff($today, $compare);

    echo $interval->format("%H") .'<br>';
    echo $interval->format("%i") .'<br>';
    echo $interval->format("%s") .'<br>';
    die(); 
```

Something is very wrong, i want the time difference between a post in my SQL database and NowTime

```
 $row['date'] 
```

is 2013-03-25 14:22:53 inserted as datetime in my table, for some reason i get a odd downcounting output?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:26:56.267

使用数据库查询来做到这一点。

`SELECT DATEDIFF(date,NOW()) as DateDifference FROM table`

不确定为什么人们一直坚持在 php 而不是 DB 中进行 db 日期比较。它的查询速度更快，资源更少，代码更整洁，然后只需比较结果，因为它会吐出日期的日差。（日期可能是受保护的列名，因此您可能需要将其括在 ` 中或将其更改为不同的列名。

# c# - Windows Phone 8 SDK in VS2012, icons?

> ID：15616645
> 
> 赞同：1
> 
> 时间：2013-03-25T13:51:04.630
> 
> 标签：c#, visual-studio-2012, windows-phone-8

Where can I change Icons for my App in VS2012 for Windows Phone 8?

How can I open WMAppManifest.xml in Visual Editor? Is it availble in Express edition?

![](../Images/26824d80472d3b7f2e98b94bab648d2a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:56:49.487

在属性项目文件夹下，双击 WMAppManifest.xml。它应该在它自己的编辑器中打开。

编辑：右键单击 WMAppManifest.xml 并选择 View Designer。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T18:17:35.160

可视化设计器在 VS2012Express 中可用。

如果“查看设计器”没有使用设计器打开它，请尝试右键单击它，选择“打开方式”，然后选择“Windows Phone Manifest Designer”。
如果该选项不起作用或丢失，则表明安装存在问题。尝试解决此问题的第一步是修复 SDK 的安装。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T15:09:56.897

如果您`WMAppManifest.xml`在 xml 编辑器中打开文件，您可以找到这一行：

```
<IconPath IsRelative="true" IsResource="false">ApplicationIcon.png</IconPath> 
```

这是应用程序图标的路径。改变它。

# javascript - Javascript - giving an li an active state

> ID：15616646
> 
> 赞同：0
> 
> 时间：2013-03-25T13:51:05.780
> 
> 标签：javascript, jquery

I'm trying to use Javascript to make a sort of slideshow. I want each li a in the slideshow navigation to be given an active state upon click and also when the slideshow cycles through to the next li a item.

I'm relatively new to Javascript but have some very basic understanding of it. I managed to achieve part of what i wanted i.e. for the divs to cycle through and for the li navigation to be given an active state when it's clicked, but cannot work out how to give it an active CSS class when the next item in the list is active by the cycle javascript.

I have attached the HTML and Javascript below.

HTML

```
<div id="tabs">
  <div id="tab-1">
   <h2>Fantastic service, they really care.</h2>
   <div class="reviews">
    <div class="read"><a href="/reviews">Read all reviews</a></div><!-- .read -->
    </div><!-- .reviews -->
</div><!-- #tab-1 -->

<div id="tab-2">
  Lorem blah blah
</div><!-- #tab-2 -->

<div id="tab-3">
  Lorem ipsum
</div><!-- #tab-3 -->

<div id="tab-4">
  Lorem blah blah
</div><!-- #tab-4 -->

 <ul class="nav">
  <li class="tab"><a href="#tab-1">Ratings & Reviews</a></li>
  <li class="tab"><a href="#tab-2">How it Works</a></li>
  <li class="tab"><a href="#tab-3">What We Do</a></li>
  <li class="tab"><a href="#tab-4">Fourth Tab</a></li>
 </ul><!-- .nav -->
</div><!-- #tabs --> 
```

**Javascript**

```
//<![CDATA[ 
$(window).load(function(){
   $(document).ready(function(){
     $('#tabs div').hide();
     $('#tabs div:first').show();
     $('#tabs ul li:first').addClass('active');

     $('#tabs ul li a').click(function(){
     $('#tabs ul li').removeClass('active');
     $(this).parent().addClass('active');
     var currentTab = $(this).attr('href');
     $('#tabs div').hide();
     $(currentTab).fadeIn(400).show();
     return false;
   });
});

var divs = $('div[id^="tab-"]').hide(),
   i = 0;

  (function cycle() { 

  divs.eq(i).show(0)
    .delay(5000)
    .hide(0, cycle);

  i = ++i % divs.length;

  })();
});//]]> 
```

Thanks in advance.

# mercurial - hg clone fails after adding subrepos

> ID：15616650
> 
> 赞同：0
> 
> 时间：2013-03-25T13:51:24.657
> 
> 标签：mercurial, mercurial-subrepos

I have a problem with my mercurial main repo. My colleague created a bunch of subrepositories for dependancies, and since then, I can't update my local repo. I decided to try a checkout in an empty directory but I have the same error :

```
hg clone https://user@bitbucket.org/company/repo
http authorization required
realm: Bitbucket.org HTTP
user: user
password:
destination directory: repo
requesting all changes
adding changesets
adding manifests
adding file changes
added 1116 changesets with 12636 changes to 2410 files
updating to branch default
cloning subrepo deps/gtest from https://bitbucket.org/company/gtest.git
abort: Le fichier spÚcifiÚ est introuvable 
```

"Le fichier spÚcifiÚ est introuvable" means "The specified file cannot be found", but the message is in french so it must come from Windows, because if it came from hg it would be in english

Here is what I have when using the --debug option

```
updating: .hgignore 1/1274 files (0.08%)
getting .hgignore
updating: .hgsub 2/1274 files (0.16%)
getting .hgsub
updating: .hgsubstate 3/1274 files (0.24%)
getting .hgsubstate
subrepo merge 000000000000+ 4d1310a16bfd 000000000000+
  subrepo deps/gtest: remote added, get https://bitbucket.org/springbeats/gtest.git:a6772271f71672e889776bfe49ec4efd9da036df:git
cloning subrepo deps/gtest from https://bitbucket.org/company/gtest.git
deps/gtest: git clone https://bitbucket.org/company/gtest.git C:\Users\Bob\Documents\Newdir\repo\deps/gtest
abort: Le fichier spÚcifiÚ est introuvable 
```

Does anyone has an idea of what going on ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:09:29.363

事实上，问题在于 hg 找不到 git。我刚刚意识到 git 不在我的 PATH 上，所以我修复了它并且一切正常。

解决方案很简单，但错误消息不清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T00:16:45.110

这里的主要问题是 Bitbucket，它（在 Mercurial 托管世界中真的没有人）不能支持和处理嵌套存储库（以及出于相同原因的子存储库），而不是子存储库的 Git 特性。对于 BB subrepos 只能是superrepo 的**兄弟姐妹**

为了避免此类问题，您必须使用额外的`[subpaths]`hack，如Mercurial 2.* 的 Subrepository Wiki-page 和此[消息](http://mercurial.selenic.com/wiki/Subrepository#Use_.27trivial.27_subrepo_paths_where_possible)[中所述](http://mercurial.markmail.org/thread/sjqfwk2orrjditc4)

# sql - 查询中的多个聚合函数

> ID：15616658
> 
> 赞同：1
> 
> 时间：2013-03-25T13:51:56.207
> 
> 标签：sql, where, aggregates

我的查询中需要有两个聚合函数，但不知道如何过滤。

我需要样本数和大于1的样本数。

就像是：

```
SELECT COUNT(Samples), COUNT(Samples >1)
FROM SampleData 
```

我可以做一个子查询，但是有没有更好的过滤方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:52:48.297

那么你基本上可以`Sample`使用 using的值`CASE`和它的结果是聚合的 via `SUM()`。

```
SELECT COUNT(Samples), 
       SUM(CASE WHEN Samples > 1 THEN 1 ELSE 0 END) 
FROM   SampleData 
```

*不过，这将适用于大多数 RDBMS。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:59:19.197

要获取*记录数*，请参阅 JW 的答案。类似地，要获取样本的总值，以及*样本*>1 的样本总值，请使用*：*

```
SELECT SUM(Samples) TotalSamples, 
       SUM(CASE WHEN Samples > 1 THEN Samples ELSE 0 END) SamplesGT1
FROM   SampleData 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-07T18:49:35.237

如果您使用的是 PostgreSQL，则可以使用标准 SQL`FILTER`子句：

```
SELECT COUNT(*), COUNT(*) FILTER (WHERE Samples > 1)
FROM SampleData 
```

# java - 单击按钮后 GUI 冻结

> ID：15616660
> 
> 赞同：2
> 
> 时间：2013-03-25T13:52:02.627
> 
> 标签：java, multithreading, swing, jbutton, event-dispatch-thread

我正在尝试创建一个客户端/服务器应用程序。问题是客户端的确认按钮在第一次输入时有效，但如果我为另一个输入点击相同的按钮，客户端 GUI 将冻结。

为什么 GUI 冻结？

客户：

```
public class ClientGui 
{

private JFrame frmBookPointOf;
private JTextField txtRm;
private JTextArea txtrBookDetails;
private JTextField textField;
private JTextField textField_1;
private JTextField textField_2;
private JTextField textField_3;
private JTextField textField_4;
private JTextField textField_5;
private JComboBox comboBox_1;
private JComboBox comboBox;
private dbController dbCtrl;
private Connection conn;
private static Socket client; 
private static BufferedReader fromServer = null;
private static DataOutputStream toServer = null;

/**
 * Launch the application.
 */
public static void main(String[] args) {

    try {

        client = new Socket("127.0.0.1", 9090);

        toServer = 
                new DataOutputStream(client.getOutputStream());
        fromServer = new BufferedReader(
                    new InputStreamReader(client.getInputStream()));

        String answer = fromServer.readLine();
        JOptionPane.showMessageDialog(null, "Connected!\n" + answer, "Status", JOptionPane.INFORMATION_MESSAGE);             

    } catch (UnknownHostException e) {
        // TODO Auto-generated catch block
        JOptionPane.showMessageDialog(null, e, "Error!", JOptionPane.ERROR_MESSAGE);
        System.exit(0);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        JOptionPane.showMessageDialog(null, e, "Error!", JOptionPane.ERROR_MESSAGE);
        System.exit(0);
    }

    EventQueue.invokeLater(new Runnable() 
    {   
        public void run() {
            try {
                ClientGui window = new ClientGui();
                window.frmBookPointOf.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

/**
 * Create the application.
 */
/**
 * 
 */
public ClientGui()
{

    frmBookPointOf = new JFrame();
    frmBookPointOf.setTitle("Book Point of Sales");
    frmBookPointOf.setBounds(100, 100, 850, 500);
    frmBookPointOf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    JLabel lblIsbn = new JLabel("ISBN:");

    String[] index = {"--Select ISBN--"};
    comboBox = new JComboBox(index);
    comboBox.setToolTipText("");

    dbCtrl = new dbController();
    try {
        conn = dbCtrl.getConnection();
        String sql = "select isbn from book";
        PreparedStatement ps = conn.prepareStatement(sql);
        ResultSet result = ps.executeQuery();

        while (result.next()) 
        {
            comboBox.addItem(result.getString("isbn"));

        }
        conn.close();
    } catch (Exception e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    JLabel lblNewLabel = new JLabel("Price:");

    JLabel lblNewLabel_1 = new JLabel("Quantity:");

    JLabel lblNewLabel_2 = new JLabel("Discount:");

    txtRm = new JTextField();
    txtRm.setEditable(false);
    txtRm.setColumns(10);

    comboBox.addActionListener(new ActionListener() 
    {
        public void actionPerformed(ActionEvent e) {
            try {
                conn = dbCtrl.getConnection();
                String x = comboBox.getSelectedItem().toString();
                String sql = "select price from book where isbn= '"+x+"'";
                PreparedStatement ps = conn.prepareStatement(sql);
                ResultSet result = ps.executeQuery();

                StringBuilder strBuilder = new StringBuilder();
                while (result.next()) 
                {
                    strBuilder.append(result.getString(1));
                }
                txtRm.setText(strBuilder.toString());
                conn.close();
            } catch (Exception e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
        }
    });

    textField = new JTextField();
    textField.setColumns(10);

    comboBox_1 = new JComboBox();
    comboBox_1.addItem("0");
    comboBox_1.addItem("5");
    comboBox_1.addItem("10");
    comboBox_1.addItem("20");
    comboBox_1.addItem("30");

    JButton btnNewButton = new JButton("Clear");

    btnNewButton.addActionListener(new ActionListener() 
    {
        public void actionPerformed(ActionEvent e) {

            txtRm.setText(null);
            txtrBookDetails.setText(null);
            textField.setText(null);
            comboBox.setSelectedIndex(0);
            comboBox_1.setSelectedIndex(0);
        }

    });

    JButton btnNewButton_1 = new JButton("Confirm");

    btnNewButton_1.addActionListener(new ActionListener() 
    {
        public void actionPerformed(ActionEvent e)
        {
            Confirm();
        }
    });

    JLabel lblNewLabel_3 = new JLabel("Sub Total:");

    JLabel lblTotalItem = new JLabel("Total Item:");

    JLabel lblTotalPrice = new JLabel("Total Price:");

    JLabel lblP = new JLabel("Cash:");

    JLabel lblNewLabel_4 = new JLabel("Remainder:");

    textField_1 = new JTextField();
    textField_1.setEditable(false);
    textField_1.setColumns(10);

    textField_2 = new JTextField();
    textField_2.setEditable(false);
    textField_2.setColumns(10);

    textField_3 = new JTextField();
    textField_3.setEditable(false);
    textField_3.setColumns(10);

    textField_4 = new JTextField();
    textField_4.setColumns(10);

    textField_5 = new JTextField();
    textField_5.setEditable(false);
    textField_5.setColumns(10);

    JButton btnNewButton_2 = new JButton("Cash");

    btnNewButton_2.addActionListener(new ActionListener() 
    {
        public void actionPerformed(ActionEvent e) 
        {
            Clear();
        }
    });

    JButton btnPrintReceipt = new JButton("Print Receipt");

    JLabel lblBookDetails = new JLabel("Book Details");

    txtrBookDetails = new JTextArea();
    txtrBookDetails.setLineWrap(true);
    txtrBookDetails.setWrapStyleWord(true);
    txtrBookDetails.setEditable(false);

    comboBox.addActionListener(new ActionListener() 
    {
        public void actionPerformed(ActionEvent e) {
            try {
                conn = dbCtrl.getConnection();
                String y = comboBox.getSelectedItem().toString();
                String sql = "select book_title,author,numPages from book where isbn= '"+y+"'";
                PreparedStatement ps = conn.prepareStatement(sql);
                ResultSet result = ps.executeQuery();

                StringBuilder strBuilder = new StringBuilder();
                while (result.next()) 
                {
                    strBuilder.append("Title: ");
                    strBuilder.append(result.getString(1));
                    strBuilder.append("\nAuthor: ");
                    strBuilder.append(result.getString(2));
                    strBuilder.append("\nNumber of Pages: ");
                    strBuilder.append(result.getString(3));
                }
                txtrBookDetails.setText(strBuilder.toString());
                conn.close();
            } catch (Exception e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
        }
    });

    JLabel lblSalesDetails = new JLabel("Sales Details");

    JTextArea txtrSalesDetails = new JTextArea();
    txtrSalesDetails.setLineWrap(true);
    txtrSalesDetails.setEditable(false);
    txtrSalesDetails.setWrapStyleWord(true);

    GroupLayout groupLayout = new GroupLayout(frmBookPointOf.getContentPane());
    groupLayout.setHorizontalGroup(
        groupLayout.createParallelGroup(Alignment.LEADING)
            .addGroup(groupLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)
                    .addGroup(groupLayout.createSequentialGroup()
                        .addGap(121)
                        .addComponent(btnNewButton, GroupLayout.PREFERRED_SIZE, 77, GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(ComponentPlacement.UNRELATED)
                        .addComponent(btnNewButton_1, GroupLayout.PREFERRED_SIZE, 80, GroupLayout.PREFERRED_SIZE))
                    .addGroup(groupLayout.createSequentialGroup()
                        .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)
                            .addComponent(lblNewLabel_1)
                            .addComponent(lblNewLabel)
                            .addComponent(lblIsbn)
                            .addComponent(lblNewLabel_2))
                        .addGap(69)
                        .addGroup(groupLayout.createParallelGroup(Alignment.LEADING, false)
                            .addComponent(txtRm)
                            .addComponent(comboBox, GroupLayout.PREFERRED_SIZE, 201, GroupLayout.PREFERRED_SIZE)
                            .addComponent(comboBox_1, 0, 200, Short.MAX_VALUE)
                            .addComponent(textField)
                            .addComponent(textField_1, GroupLayout.DEFAULT_SIZE, 201, Short.MAX_VALUE)
                            .addComponent(textField_2, GroupLayout.DEFAULT_SIZE, 201, Short.MAX_VALUE)
                            .addComponent(textField_3, GroupLayout.DEFAULT_SIZE, 201, Short.MAX_VALUE)
                            .addComponent(textField_4, GroupLayout.DEFAULT_SIZE, 201, Short.MAX_VALUE)
                            .addComponent(textField_5, GroupLayout.DEFAULT_SIZE, 201, Short.MAX_VALUE)
                            .addGroup(groupLayout.createSequentialGroup()
                                .addComponent(btnNewButton_2)
                                .addPreferredGap(ComponentPlacement.UNRELATED)
                                .addComponent(btnPrintReceipt))))
                    .addComponent(lblNewLabel_3)
                    .addComponent(lblTotalItem)
                    .addComponent(lblTotalPrice)
                    .addComponent(lblP)
                    .addComponent(lblNewLabel_4))
                .addGap(43)
                .addGroup(groupLayout.createParallelGroup(Alignment.LEADING, false)
                    .addGroup(groupLayout.createSequentialGroup()
                        .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)
                            .addComponent(lblSalesDetails)
                            .addComponent(lblBookDetails))
                        .addGap(251))
                    .addComponent(txtrSalesDetails, GroupLayout.DEFAULT_SIZE, 412, Short.MAX_VALUE)
                    .addComponent(txtrBookDetails))
                .addContainerGap(33, Short.MAX_VALUE))
    );
    groupLayout.setVerticalGroup(
        groupLayout.createParallelGroup(Alignment.LEADING)
            .addGroup(groupLayout.createSequentialGroup()
                .addGap(23)
                .addGroup(groupLayout.createParallelGroup(Alignment.BASELINE)
                    .addComponent(comboBox, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblIsbn)
                    .addComponent(lblBookDetails))
                .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)
                    .addGroup(groupLayout.createSequentialGroup()
                        .addGap(18)
                        .addGroup(groupLayout.createParallelGroup(Alignment.BASELINE)
                            .addComponent(txtRm, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                            .addComponent(lblNewLabel))
                        .addGap(18)
                        .addGroup(groupLayout.createParallelGroup(Alignment.BASELINE)
                            .addComponent(textField, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                            .addComponent(lblNewLabel_1))
                        .addGap(18)
                        .addGroup(groupLayout.createParallelGroup(Alignment.BASELINE)
                            .addComponent(comboBox_1, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                            .addComponent(lblNewLabel_2))
                        .addPreferredGap(ComponentPlacement.UNRELATED)
                        .addGroup(groupLayout.createParallelGroup(Alignment.BASELINE)
                            .addComponent(btnNewButton_1)
                            .addComponent(btnNewButton)))
                    .addGroup(groupLayout.createSequentialGroup()
                        .addPreferredGap(ComponentPlacement.RELATED)
                        .addComponent(txtrBookDetails, GroupLayout.PREFERRED_SIZE, 142, GroupLayout.PREFERRED_SIZE)))
                .addGap(18)
                .addGroup(groupLayout.createParallelGroup(Alignment.BASELINE)
                    .addComponent(lblNewLabel_3)
                    .addComponent(textField_1, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                    .addComponent(lblSalesDetails))
                .addPreferredGap(ComponentPlacement.UNRELATED)
                .addGroup(groupLayout.createParallelGroup(Alignment.TRAILING, false)
                    .addComponent(txtrSalesDetails, Alignment.LEADING)
                    .addGroup(Alignment.LEADING, groupLayout.createSequentialGroup()
                        .addGap(7)
                        .addGroup(groupLayout.createParallelGroup(Alignment.BASELINE)
                            .addComponent(lblTotalItem)
                            .addComponent(textField_2, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE))
                        .addGap(18)
                        .addGroup(groupLayout.createParallelGroup(Alignment.BASELINE)
                            .addComponent(lblTotalPrice)
                            .addComponent(textField_3, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE))
                        .addGap(18)
                        .addGroup(groupLayout.createParallelGroup(Alignment.BASELINE)
                            .addComponent(lblP)
                            .addComponent(textField_4, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE))
                        .addGap(18)
                        .addGroup(groupLayout.createParallelGroup(Alignment.BASELINE)
                            .addComponent(lblNewLabel_4)
                            .addComponent(textField_5, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(ComponentPlacement.UNRELATED)
                        .addGroup(groupLayout.createParallelGroup(Alignment.BASELINE)
                            .addComponent(btnNewButton_2)
                            .addComponent(btnPrintReceipt))))
                .addContainerGap(89, Short.MAX_VALUE))
    );
    frmBookPointOf.getContentPane().setLayout(groupLayout);
}

public void Confirm()
{

float numb = 0f;
int numb1 = 0;
int numb2 = 0;
int numb3 = 0;
float numb4 = 0f;
String numbSub = null;
String numbIte = null;
String numbTot = null;

try 
{
    numb = Float.parseFloat(txtRm.getText());
    numb1 = Integer.parseInt(textField.getText());
    numb2 = Integer.parseInt(comboBox_1.getSelectedItem().toString());
    numb3 = Integer.parseInt(textField_2.getText());
    numb4 = Float.parseFloat(textField_3.getText());
} 
catch (NumberFormatException ex) 
{}

try
{
    toServer.writeFloat(numb);
    toServer.writeInt(numb1);
    toServer.writeInt(numb2);
    toServer.writeInt(numb3);
    toServer.writeFloat(numb4);

}catch (IOException e1) 
{
// TODO Auto-generated catch block
e1.printStackTrace();
}

try 
{
    numbSub = fromServer.readLine();
    numbIte = fromServer.readLine();
    numbTot = fromServer.readLine();

} catch (IOException e1)
{
    e1.printStackTrace();
}

    textField_1.setText(numbSub);
    textField_2.setText(numbIte);
    textField_3.setText(numbTot);

    txtRm.setText(null);
    txtrBookDetails.setText(null);
    textField.setText(null);
    comboBox.setSelectedIndex(0);
    comboBox_1.setSelectedIndex(0);

}

public void Clear()
{ 

float numb5 = 0f;
float numb6 = 0f;
String numbRem = null;

try 
{

    numb5 = Float.parseFloat(textField_3.getText());
    numb6 = Float.parseFloat(textField_4.getText());

}catch (NumberFormatException ex) 
{
    System.out.println(ex);
}

try
{
    toServer.writeFloat(numb5);
    toServer.writeFloat(numb6);

} catch (IOException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
}  

try 
{
    numbRem = fromServer.readLine();

}catch (IOException ex) 
{
    ex.printStackTrace();
}

textField_5.setText(numbRem);   
}

} 
```

服务器：

```
public class ServerGui{

private JFrame frmBookServer;
private static ServerSocket listener;
private static Socket socket; 
private dbController dbCtrl;
private Connection conn;

/**
 * Launch the application.
 */
public static void main(String[] args) throws IOException 
{
    listener = new ServerSocket(9090);                 

    EventQueue.invokeLater(new Runnable() 
     {  
        public void run() 
        {
            try {
                ServerGui window = new ServerGui();
                window.frmBookServer.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}
/**
 * Create the application.
 *
 */
public ServerGui() 
{

    frmBookServer = new JFrame();
    frmBookServer.setTitle("Book Server");
    frmBookServer.setBounds(100, 100, 800, 600);
    frmBookServer.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    JButton btnNewButton = new JButton("Start Server");

    JButton btnNewButton_1 = new JButton("Stop Server");

    JButton btnNewButton_2 = new JButton("Display Sales");

    final JTextArea txtrDetailsOfRequest = new JTextArea();
    txtrDetailsOfRequest.setEditable(false);
    txtrDetailsOfRequest.setWrapStyleWord(true);
    GroupLayout groupLayout = new GroupLayout(frmBookServer.getContentPane());
    groupLayout.setHorizontalGroup(
        groupLayout.createParallelGroup(Alignment.LEADING)
            .addGroup(groupLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)
                    .addGroup(groupLayout.createSequentialGroup()
                        .addGap(10)
                        .addComponent(txtrDetailsOfRequest, GroupLayout.PREFERRED_SIZE, 742, GroupLayout.PREFERRED_SIZE))
                    .addGroup(groupLayout.createSequentialGroup()
                        .addComponent(btnNewButton)
                        .addGap(18)
                        .addComponent(btnNewButton_1)
                        .addGap(18)
                        .addComponent(btnNewButton_2)))
                .addGap(22))
    );
    groupLayout.setVerticalGroup(
        groupLayout.createParallelGroup(Alignment.LEADING)
            .addGroup(groupLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(groupLayout.createParallelGroup(Alignment.BASELINE)
                    .addComponent(btnNewButton)
                    .addComponent(btnNewButton_1)
                    .addComponent(btnNewButton_2))
                .addPreferredGap(ComponentPlacement.UNRELATED)
                .addComponent(txtrDetailsOfRequest, GroupLayout.PREFERRED_SIZE, 497, GroupLayout.PREFERRED_SIZE)
                .addContainerGap(20, Short.MAX_VALUE))
    );
    frmBookServer.getContentPane().setLayout(groupLayout);

    btnNewButton.addActionListener(new ActionListener() 
    {
        @Override
        public void actionPerformed(ActionEvent e) 
        {

            txtrDetailsOfRequest.setText("Starting Server....");
            Thread t = new Thread() {
                @Override
                public void run() 
                {
                    try
                    {          
                        while(true)
                        {

                                socket = listener.accept();
                                PrintWriter toClient = new PrintWriter(socket.getOutputStream(), true);
                                toClient.println(new Date().toString());            

                                ServerCalc();

                        }

                    }catch (IOException e1)
                    {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                    }
                    try 
                    {
                        sleep(10);  // milliseconds
                    }catch (InterruptedException ex) {}
                }
            };
          t.start();
        }
    });

    btnNewButton_1.addActionListener(new ActionListener() 
    {
        @Override
        public void actionPerformed(ActionEvent e) 
        {
            txtrDetailsOfRequest.setText("Closing Server....");
                 try 
                 {
                    listener.close();
                 } catch (IOException e1) 
                 {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                 }             

        }
    });

    btnNewButton_2.addActionListener(new ActionListener() 
    {
        @Override
        public void actionPerformed(ActionEvent e) 
        {
            dbCtrl = new dbController();
            try {
                conn = dbCtrl.getConnection();
                String sql = "select book_title,quantity from sales";
                PreparedStatement ps = conn.prepareStatement(sql);
                ResultSet result = ps.executeQuery();

                StringBuilder strBuilder = new StringBuilder();
                while (result.next()) 
                {
                    strBuilder.append(result.getString(1)).append(" = ").append(result.getString(2));
                    strBuilder.append("\n");

                }
                txtrDetailsOfRequest.setText(strBuilder.toString());
                conn.close();

            } catch (Exception e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }

        }
    });
}
public void ServerCalc()
{
    try{
            PrintWriter toClient = new PrintWriter(socket.getOutputStream(), true);

            DataInputStream fromClient = new  DataInputStream(socket.getInputStream());

            //calculate sub total, total item, total price
            float numb =  fromClient.readFloat();
            int numb1 =  fromClient.readInt();
            int numb2 =  fromClient.readInt();
            int numb3 =  fromClient.readInt();
            float numb4 = fromClient.readFloat();

            float dis = (float) (numb2 * 0.01);
            float numbSub =numb - ((dis) * numb);
            float numbTot =(numbSub * numb1) + numb4;
            int numbIte = numb1 + numb3;

            toClient.println(numbSub);
            toClient.println(numbIte);
            toClient.println(numbTot); 

            //calculate cash remainder
            float numb5 = fromClient.readFloat();
            float numb6 = fromClient.readFloat();

            float numbRem = numb6 - numb5;

            toClient.println(numbRem);
  }catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

}
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T14:04:35.903

当您单击一个按钮时，`actionPerformed`您的方法`ActionListener`会在事件调度线程上触发。该线程是负责 UI 的唯一线程。

UI 将保持冻结状态，直到您离开该`actionPerformed`方法（因为线程已被占用）。因此，如果您的`ActionListener`阻塞（例如您的`fromServer.readLine()`呼叫），UI 将保持冻结状态，直到阻塞呼叫结束。

这就是为什么一般准则是将长任务卸载到工作线程的原因。[Swing 并发教程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)包含更多信息。

# mysql - 为每个键值对选择前 n 行

> ID：15616663
> 
> 赞同：1
> 
> 时间：2013-03-25T13:52:09.963
> 
> 标签：mysql, sql, postgresql

我有一个键值对表，第三列代表一些权重。我想要的只是根据权重值递减为每对拾取前 n 行。

是否有任何主流 sql 技术支持任何自然的方式来做到这一点？还是我必须总是包括一些黑客...

示例数据：

```
key value   weight   
15391   22877   8    
15391   24311   7    
15391   460     7    
22634   22877   6 
```

我想为每对选择前 2 行，即结果应该是：

```
15391   22877   8    
15391   24311   7        
22634   22877   6 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T14:07:55.110

我认为您的描述具有误导性，您真正想要的是：

```
select key, value, weight
from (
    select *,
        row_number() over(partition by key order by weight desc) rn
    from aggregated_table
) s
where rn <= 2
order by weight desc, key 
```

以上将适用于 Postgresql 和 SQL Server。这将在 MySQL 中有效，但在 SQL Server 中无效：

```
select key, value, (
    select weight
    from aggregated_table
    where key = s.key
    order by weight desc
    limit 1
    ) weight
from aggregated_table
union
select key, value, (
    select weight
    from aggregated_table
    where key = s.key
    order by weight desc
    limit 1 offset 2
    ) weight
from aggregated_table
order by weight desc, key 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T13:56:04.783

这在 Postgres 中很容易做到：

```
select key, value, weight
from (select key, value, weight, row_number() over (partition by key, value order by weight desc) as seqnum
      from t
     ) t
where seqnum <= 2 
```

如果您想要一个同时适用于 MySQL 和 Postgres 的版本，请使用相关子查询：

```
select key, value, weight
from (select key, value, weight,
             (select count(*) from t t2 where t2.key = t.key and t2.value = t.value and t2.weight >= t.weight
             ) as seqnum
      from t
     ) t
where seqnum <= 2 
```

# django - 如果用户未在 ListView 类的 post 方法中进行身份验证，则 django 重定向

> ID：15616664
> 
> 赞同：1
> 
> 时间：2013-03-25T13:52:13.013
> 
> 标签：django, django-views

我对 django 和 CBV 比较陌生，我正在尝试弄清楚如果用户未在类的`post`方法中进行身份验证，如何重定向用户`ListView`。因此，代码如下所示：

```
#views.py

from django.shortcuts import render

class MyListView(ListView):

    def post( self, request, *args, **kwargs ):
        if not request.user.is_authenticated():
             print "user NOT authenticated"
             return render(request, '/site_templates/home.html')
                         # does not redirect #
        else:
             print "user IS authenticated"
                         # do some stuff: this part works just fine # 
```

当我尝试这个并且用户未通过身份验证时，代码似乎没有将我重定向到我需要的模板。不知道我错过了什么。

是否可以将这里的用户重定向到 TemplateView？任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-21T21:57:45.583

也许尝试：

```
from django.http import HttpResponseRedirect

if not request.user.is_authenticated():
  return HttpResponseRedirect('desired URL') 
```

在 HttpResponseRedirect 对象之前强调**返回很重要。**

# ruby-on-rails - 如何使用行数将文本文件拆分为 2 个文件？

> ID：15616671
> 
> 赞同：0
> 
> 时间：2013-03-25T13:52:32.137
> 
> 标签：ruby-on-rails, ruby, file

我一直面临文件概念的一些问题。我有一个文本文件，其中有 1000 行。我想将该文件分成 2 个，每个应该包含 500 行。为此，我编写了以下代码，但它通过提供一定的内存空间来拆分它。

```
class Hello
  def chunker f_in, out_pref, chunksize = 500
  File.open(f_in,"r") do |fh_in|
    until fh_in.eof?
      ch_path = "/my_applications//#{out_pref}_#{"%05d"%(fh_in.pos/chunksize)}.txt"
      puts "choose path: "
      puts ch_path
      File.open(ch_path,"w") do |fh_out|
        fh_out << fh_in.read(chunksize)
        puts "FH out : "
        puts fh_out  
      end
    end
   end
  end
end

f=Hello.new
f.chunker "/my_applications/hello.txt", "output_prefix" 
```

我可以根据内存大小（500kb）拆分父文件。但我希望它按行数分开。我怎样才能做到这一点。
请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T14:14:55.313

计算中间线`pivot`，并据此输出。

```
out1 = File.open('output_prefix1', 'w')
out2 = File.open('output_prefix2', 'w')
File.open('/my_applications/hello.txt') do |file|
  pivot = file.lines.count / 2
  file.rewind
  file.lines.each_with_index do |line, index|
    if index < pivot
      out1.write(line)
    else
      out2.write(line)
    end
  end
end
out1.close
out2.close 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T14:06:33.213

`file = File.readlines('hello.txt')`

`File.open('first_half.txt', 'w') {|new_file| new_file.puts file[0...500]}` `File.open('second_half.txt', 'w') {|new_file| new_file.puts file[500...1000]}`

# symfony1 - symfony：使用 generator.yml，是否有任何解决方案可以仅对用户隐藏字段并将其显示给管理员

> ID：15616673
> 
> 赞同：0
> 
> 时间：2013-03-25T13:52:36.420
> 
> 标签：symfony1, symfony-1.4

我使用 symfony 1.4 的“管理员生成器”为我的项目构建了一个 beckend，因此我可以访问诸如管理员和其他成员（如用户（角色））......

我希望在后端的成员列表中隐藏密码，然后当我像管理员一样登录时（数据库中的 is_super_admin =1：sf_guard_user）所以我可以看到密码但是当有人像用户一样登录时他看不到相同的字段（is_super_admin =数据库中的 0:sf_guard_user)。

我在问他们是否有任何使用角色和 generator.yml 或任何其他解决方案隐藏字段的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T20:27:13.110

是的，你可以这样做：

```
# generator.yml
generator:
  class: fdDoctrineGenerator
  param:
    model_class:           sfGuardUser
    theme:                 admin
    non_verbose_templates: true
    with_show:             false
    singular:              ~
    plural:                ~
    route_prefix:          user
    with_doctrine_route:   true
    actions_base_class:    sfActions

    config:
      actions: ~
      fields:
        password:
          credentials: [super_admin]
      list:
        display: [=username, password]
      filter   ~
      form:    ~
      edit:    ~
      new:     ~ 
```

如果您有管理员，`is_super_admin == true`则可以使用未分配给任何用户的任何凭据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T17:09:39.950

在 generator.yml 中包含该字段。

在 module/templates/_form_field.php 中为该字段创建一个部分。

在部分表单字段中传递一个条件：

```
 <?php if ($sf_user->hasCredential('admin')): ?> 

      <?php echo $MyObject->getMyFormField(); ?>  

  <?php endif; ?> 
```

那应该这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:55:38.970

我不认为仅使用选项可以`generator.yml`选择。

我要做的是创建两个不同的操作列出用户，一个有密码，一个没有。然后，`security.yml`您可以使用密码限制对列表的访问，因此只有超级管理员才能访问它。

如果您希望能够仅使用一个 URL 访问此列表。我将创建第三个操作，它将检查用户的权限并将他转发到其中一个列表（此操作必须写为“正常”操作，未在 中定义`generator.yml`）。

# jquery - 响应式网页设计 (RWD) 通过媒体查询应用 javascript

> ID：15616675
> 
> 赞同：1
> 
> 时间：2013-03-25T13:52:45.240
> 
> 标签：jquery, jquery-mobile, navigation, responsive-design, media-queries

我正在尝试使用 jquery 来隐藏/显示基于垂直滚动的超时移动导航栏。

我无法将该功能应用于整个文档，因为我不希望桌面视图/媒体查询（仅限移动设备和平板电脑）使用此效果。

是否可以在特定的媒体查询中直接使用 jquery 函数？可能如果声明窗口宽度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T14:05:06.520

如果我了解您的需求，您可以执行以下操作：您的 CSS 文件包含媒体查询。该文件会自动格式化您的 html。但你想要更多的东西。因此，您可以编写一个基于窗口宽度的 jquery 函数。

```
$(function(){
 $(window).resize(function(){
     if($(this).width() >= "desired_width"){
                 //your function
         });
     }
  })
}); 
```

# windows - 通过 API (Windows) 列出 DropBox 文件夹用户？

> ID：15616681
> 
> 赞同：0
> 
> 时间：2013-03-25T13:52:54.610
> 
> 标签：windows, dropbox, dropbox-api

我可以通过 API (Windows) 列出 DropBox 文件夹中的文件。但是有没有办法列出文件夹用户（即我与谁共享它）？似乎没有，但我希望有人偶然发现了什么。

我们使用的是 C#.Net 平台，但任何支持 Windows 7/8 的平台都可以。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T00:29:03.967

无法通过 API 获取此信息，对此感到抱歉

# android - 适用于简体中文和葡萄牙语-巴西的 Android 的正确语言环境代码是什么？

> ID：15616683
> 
> 赞同：5
> 
> 时间：2013-03-25T13:53:00.997
> 
> 标签：android, locale

在我的应用程序中，用户可以将他们的应用程序区域设置切换到其他应用程序支持的语言之一。我在让葡萄牙语-巴西和简体中文工作时遇到问题。当用户更改区域设置时，所有其他翻译都能正常工作。

如果设备语言环境是 pt-rBR 或 zh-rCN，这些翻译可以正常工作，所以唯一可能出错的是我使用的语言环境代码。但是，我尝试过的任何事情都失败了。有人知道这些的正确 Android 语言环境代码，以便用户可以根据需要正确切换吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-04T20:36:00.287

利用

```
new Locale("pt","BR"); 
```

代替

```
new Locale("pt_BR"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-25T10:47:47.050

使用以下代码对我来说适用于繁体和简体中文。

```
if(selectedLanguage.equals("zh_CN"))
    locale = Locale.SIMPLIFIED_CHINESE;
else if(selectedLanguage.equals("zh_TW"))
    locale = Locale.TRADITIONAL_CHINESE;
else
    locale = new Locale(selectedLanguage);

Locale.setDefault(locale);
Configuration config = new Configuration();
config.locale = locale;
baseContext.getResources().updateConfiguration(config, baseContext.getResources().getDisplayMetrics()); 
```

# ios - 使用 PushWoosh 编辑按钮等

> ID：15616686
> 
> 赞同：0
> 
> 时间：2013-03-25T13:53:08.750
> 
> 标签：ios, push-notification, apple-push-notifications, pushwoosh

我目前正在为我的 iOS 和 Android 应用程序从 Urban airship 更改为 Pushwoosh！一切似乎都很好，但有一些小问题。

1.  是否可以更改应用程序中按钮的内容？当我在应用程序中收到推送时，会显示“取消”和“确定！”。

2.  是否可以将推送设置为仅在应用程序外部显示而不是在应用程序内显示？

希望提前帮助和感谢:-)

编辑：

以下是我使用 PHP 从服务器发送推送的方式：

```
include("includes/pushwoosh.php");
pwCall( 'createMessage', array(
'application' => PW_APPLICATION,
'auth' => PW_AUTH,
'notifications' => array(
            array(
                'send_date' => 'now',
                'devices' => array($row['devicetoken']),
                'content' => $userName.' '.$languagestring[59], 
                'data' => array( 'custom' => 'json data' )
            )
        )
    )
); 
```

我可以在其中设置某种参数以使我的问题有效吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:43:35.417

SDK 默认显示警报，您可以在 PushNotificationManager.m 类中将其关闭（[https://github.com/shaders/push-notifications-sdk/blob/master/SDK/iPhone/Classes/PushNotificationManager.m](https://github.com/shaders/push-notifications-sdk/blob/master/SDK/iPhone/Classes/PushNotificationManager.m)）。您应该编辑第 158 行

showPushnotificationAlert = TRUE；// 如果您不想显示通知，则设置为 FALSE。

关于更改按钮文本，您可以在相同的代码中编辑它们，第 #497-494 行：

```
if(!isPushOnStart && showPushnotificationAlert && msgIsString) {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:self.appName message:alertMsg delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"OK", nil];
    alert.tag = ++internalIndex;
    [pushNotifications setObject:userInfo forKey:[NSNumber numberWithInt:internalIndex]];
    [alert show];
    [alert release];
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:57:31.850

您可以从您的服务器更改它。

> 动作锁定键
> 
> 字符串或空
> 
> 如果指定了字符串，则显示带有两个按钮的警报，其行为在表 3-1 中描述。但是，iOS 使用字符串作为键来获取当前本地化中的本地化字符串，以用于右键的标题而不是“查看”。如果该值为空，则系统会显示一个带有单个 OK 按钮的警报，该按钮在点击时会简单地关闭警报。有关详细信息，请参阅“本地化格式化字符串”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-13T11:53:25.530

Pushwoosh API 中还没有标准方法来更改操作按钮标题。但我找到了解决方法。

您可以通过“ios_root_params”参数将您想要的任何数据注入最终有效负载。

如果有效载荷中存在密钥 aps.alert.action-loc-key，则可以更改操作按钮标题。您可以发送以下请求来执行此操作：

```
{"request":{
"auth":"AUTH TOKEN",
"application":"APP CODE",
"notifications":[{
     "send_date":"now",
     "ios_root_params":{
        "aps":{
           "alert":{
              "body":"message body",
              "action-loc-key":"custom caption"
           }
        }
     }
   }]
}} 
```

您在“ios_root_params”中定义的任何 json 都将与推送负载合并，并且 ios_root_params 在合并时具有优先权。

您可以省略字段“content”，因为“aps”字典将被我们的数据覆盖。

# php - 我可以将 PHP 变量放在 PHP 包含中吗？

> ID：15616687
> 
> 赞同：-1
> 
> 时间：2013-03-25T13:53:13.813
> 
> 标签：php, include, include-path

我对PHP不熟悉；我怀疑这是一个简单的问题。我们的网页设计师不在城里，我需要在我们的一个网站上修复一些东西。

基本上，我希望能够将变量用作被调用到文档中的 URL 的一部分。

编码：

```
<?php
$URL = p2 ; /* p1, p2, p3 or no can be used here */
?>

<?php include('includes/WL_cart_*URL*.php'); // calls the page I need?> 
```

我只想能够输入正确的页面`$URL`并将该文本添加到包含中的 url。我尝试将变量直接放入包含但没有奏效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T13:56:09.637

您可以通过使用双引号来实现这一点，如下所示：

```
<?php include("includes/WL_cart_{$URL}.php"); ?> 
```

或者如果您坚持使用单引号，退出它们并添加`$URL`变量，如下所示：

```
<?php include('includes/WL_cart_'.$URL.'.php'); ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T13:56:01.297

要在您使用的字符串中添加变量`.`

`include('includes/WL_cart_' . $URL . '.php');`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T13:57:47.487

使用双引号 " 和 $ 符号来拉入您的变量。

另请记住，您的第一个变量也应该被“引用”：

```
<?php
    $URL = "p2" ; /* p1, p2, p3 or no can be used here */
?>

<?php include("includes/WL_cart_$URL.php"); // calls the page i need?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T13:58:52.513

```
<?php include("includes/WL_cart_{$URL}.php"); ?> 
```

但是你需要小心，例如，如果 $url = '../config/database.php.inc'，将打开配置文件。

# asp.net-mvc - Base-64 字符数组或字符串的长度无效。当我试图通过 byte[]

> ID：15616688
> 
> 赞同：1
> 
> 时间：2013-03-25T13:53:19.053
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我正在尝试`Byte[]`通过将 View 中的字符串转换为控制器来发送`@Html.ActionLink`。当我点击`ActionLink`它时，每次都会抛出异常。我在这里附上代码。

## 例外

![在此处输入图像描述](../Images/e8049a7b485fc7f015edcdf44d158777.png)

## 操作点击后的 URL

```
 http://localhost:55253/Member/Create?customerContactNumber=0439349
&committeeId=AAAAAAAADLc%3D 
```

## 查看代码

```
 @using VolunteerPoints.BootstrapSupport
    @model Tuple<VolunteerPoints.Models.Contact, IEnumerable<VolunteerPoints.Data.Committee>>

    @{
        ViewBag.Title = "SearchResults";
        Layout = "~/Views/Shared/_Layout.cshtml";
    }

    <h2>Activity Search Results</h2>
    <table id="Activitieslist" class="table table-striped table-bordered table-hover .table-condensed">
        <thead>
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.Item2.GetEnumerator().Current.Committee_Name)
                </th>

                <th>
                    @Html.DisplayNameFor(model => model.Item2.GetEnumerator().Current.Committee_Type)
                </th>

                <th></th>
            </tr>
        </thead>
        @foreach (var model in Model.Item2)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => model.Committee_Name)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => model.Committee_Type)
                </td>

                <td>
                    <div>
                        <div>
                            @Html.ActionLink("Select", "Create","Member", new 

{customerContactNumber = Model.Item1.Number, committeeId = 
Convert.ToBase64String(model.Committee_Id) }, new { @class = "btn btn-primary" })
                        </div>
                    </div>
                </td>
            </tr>
        }

    </table>

    @section Scripts {
              @Styles.Render("~/Content/DataTables/css")
            @Scripts.Render("~/bundles/DataTables") 

        <script type="text/JavaScript">
            $(document).ready(function () {

                $('#Activitieslist').dataTable({
                    "bSort": true,
                    "bPaginate": false,
                    "bAutoWidth": false,
                });

            });
        </script>
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:58:42.913

那么这部分网址：

```
AAAAAAAADLc%3D 
```

应解码为

```
AAAAAAAADLc= 
```

...此时长度是 4 的倍数，最后有完全合理的填充。

所以我怀疑问题是如何/是否执行解码。

（附带说明：`byte[]`ID 是一种非常不寻常的表示。你真的需要这样做吗？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-30T18:35:54.097

尝试更改代码部分：

```
committeeId = Convert.ToBase64String(model.Committee_Id) 
```

至

```
committeeId = HttpServerUtility.UrlTokenEncode(model.Committee_Id) 
```

这将提供对 URL 更友好的加密字符串，从而避免 URL 中可能导致错误的字符。

希望这对你有帮助 James123；

# android - 在 Whatsapp 中发送图片

> ID：15616694
> 
> 赞同：2
> 
> 时间：2013-03-25T13:53:42.127
> 
> 标签：android, image, android-intent, android-gallery, whatsapp

我想在 Whatsapp 中发送图片。当我在 Whatsapp 中选择图像选择器时，我的应用程序就会启动。如何将 Intent 的结果发送回 whatsapp？

我使用以下代码：

```
 // on button press
            String path = SaveCache(R.drawable.pic_1);

            Intent share = new Intent(android.content.Intent.ACTION_SEND);
            share.setType("image/*");
            share.putExtra(Intent.EXTRA_STREAM, Uri.parse("file://" + path));  

        }

}

private String SaveCache(int resID) {
    String path = "";  
    try {
        InputStream is = getResources().openRawResource(resID);
        File cacheDir = context.getExternalCacheDir();
        File downloadingMediaFile = new File(cacheDir, "abc.jpg");
        byte[] buf = new byte[256];
        FileOutputStream out = new FileOutputStream(downloadingMediaFile);   
        while (true) {
            int rd = is.read(buf, 0, 256);
            if (rd == -1 || rd == 0)
                break;
            out.write(buf, 0, rd);              
        }
        is.close();
        out.close();
        return downloadingMediaFile.getPath();
    } catch (Exception ex) {

        ex.printStackTrace();
    }
    return path;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-12T19:29:48.623

我能够使用此代码发送图像

```
Uri uri = Uri.parse("android.resource://com.example.test/drawable/image_1");
                sharingIntent.setType("image/jpg"); 
                sharingIntent.putExtra(Intent.EXTRA_STREAM, uri); 
                startActivity(Intent.createChooser(sharingIntent, "Share image using")); 
```

# android - 通过在android中以编程方式更改布局的背景颜色

> ID：15616708
> 
> 赞同：0
> 
> 时间：2013-03-25T13:54:07.537
> 
> 标签：android, android-layout, android-linearlayout

我必须开发一个 android 应用程序。

对于正常状态，我必须显示背景颜色为#424340。但我必须单击这些布局（选择和按下状态）意味着必须更改背景颜色为#FF0000。我该如何以编程方式进行...请给我解决方案对于这些...

我使用以下代码以编程方式创建布局：

```
LinearLayout ar = new LinearLayout(this);
            ar.setOrientation(LinearLayout.VERTICAL);
            ar.setPadding(3, 3, 3, 3);

            ar.setLayoutParams(artiLayoutParams);
            ar.setGravity(Gravity.CENTER); 
            ar.setBackgroundDrawable(getResources().getDrawable(R.drawable.list_selector)); 
```

在这里我点击这些布局意味着更改背景颜色。所以我使用下面的代码。请检查它。

**list_selector.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
 <selector xmlns:android="http://schemas.android.com/apk/res/android">
 <!-- Selector style for listrow -->
 <item 

 android:state_selected="false"
 android:state_pressed="false" 
android:state_focused="false"
android:drawable="@drawable/gradient_bg" />
<item android:state_pressed="true"
android:state_selected="true" 
android:state_focused="true"
android:drawable="@drawable/gradient_bg_hover" />
 </selector> 
```

**渐变bg.xml：**

```
 <?xml version="1.0" encoding="utf-8"?>

  <shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
        <stroke android:width="3dp" android:color="#424340" />

        <padding android:left="3dp" android:top="3dp" android:right="3dp"
            android:bottom="3dp" />
        <corners android:radius="4dp" />
    </shape> 
```

**gradient_bg_hover.xml：**

```
 <?xml version="1.0" encoding="utf-8"?>

  <shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">

        <stroke android:width="3dp" android:color="#FF0000" />
         <padding android:left="3dp" android:top="3dp" android:right="3dp"
            android:bottom="3dp" />

        <corners android:radius="4dp" />
        </shape> 
```

但是我的背景颜色没有改变。我的代码有什么问题。请帮助我......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:17:07.910

你的状态似乎是错误的。你能试试这个来确认它是否有效吗？

```
<?xml version="1.0" encoding="utf-8"?>
 <selector xmlns:android="http://schemas.android.com/apk/res/android">
 <!-- Selector style for listrow -->
 <item 
 android:state_pressed="false"
android:drawable="@drawable/gradient_bg" />
<item android:state_pressed="true"
android:drawable="@drawable/gradient_bg_hover" />
 </selector> 
```

# java - Spring / @Transactional 与 AspectJ 完全被忽略

> ID：15616710
> 
> 赞同：3
> 
> 时间：2013-03-25T13:54:13.577
> 
> 标签：java, spring, aspectj, spring-data, spring-data-neo4j

我使用 Spring-Data Neo4j 2.2.0-RELEASE。（我的以下问题适用于任何其他类型的实体映射，为什么不适用 JPA）

在我的项目中，我有一个使用`@Transactional`Spring 注释注释的公共方法，因为我想更新/保存其中的实体：

```
public class MeetingServices {

    private UserRepository userRepository;

    private MeetingRepository meetingRepository;

    public void setUserRepository(UserRepository userRepository) {
        this.userRepository = userRepository;
    }

    public void setMeetingRepository(MeetingRepository meetingRepository) {
        this.meetingRepository = meetingRepository;
    }

    @Transactional("neo4jTransactionManager")
    public void save(Meeting meeting) {
        User creator = userRepository.getUserByEmail("test@test.com");
        creator.participateIn(meeting); // this line leads to a NotInTransactionException since it signals that no transaction context is associated.
        meeting.setCreator(creator);
    } 
```

我的 application-context.xml 如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:neo4j="http://www.springframework.org/schema/data/neo4j"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/data/neo4j
       http://www.springframework.org/schema/data/neo4j/spring-neo4j.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd">

    <bean id="graphDatabaseService" class="org.neo4j.kernel.EmbeddedGraphDatabase">
        <constructor-arg value="target/neo4jgraph" />
    </bean>

    <neo4j:config graphDatabaseService="graphDatabaseService" />

    <bean id="meetingServices" class="services.MeetingServices">
        <property name="userRepository"><ref bean="userRepository"/></property>
        <property name="meetingRepository"><ref bean="meetingRepository"/></property>
    </bean>

    <bean id="userServices" class="services.UserServices">
        <property name="userRepository"><ref bean="userRepository"/></property>
    </bean>

    <bean id="neo4jTransactionManager"
        class="org.springframework.transaction.jta.JtaTransactionManager">
        <property name="transactionManager">
            <bean class="org.neo4j.kernel.impl.transaction.SpringTransactionManager">
                <constructor-arg ref="graphDatabaseService" />
            </bean>
        </property>
        <property name="userTransaction">
            <bean class="org.neo4j.kernel.impl.transaction.UserTransactionImpl">
                <constructor-arg ref="graphDatabaseService" />
            </bean>
        </property>
    </bean>

    <tx:annotation-driven mode="aspectj"
        transaction-manager="neo4jTransactionManager" />

    <!-- auto-generated repositories for Neo4j storage -->
    <neo4j:repositories base-package="repositories"/> 

    <context:spring-configured/>

    <context:annotation-config/>

</beans> 
```

正如我们在此配置中看到的，aspectJ 用于事务。

因此，我尝试通过更改我的 application-context.xml 以使用该`proxy`功能而不是`aspectJ`功能来测试另一种方法：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:neo4j="http://www.springframework.org/schema/data/neo4j"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/data/neo4j
       http://www.springframework.org/schema/data/neo4j/spring-neo4j.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd">

    <bean id="graphDatabaseService" class="org.neo4j.kernel.EmbeddedGraphDatabase">
        <constructor-arg value="target/neo4jgraph" />
    </bean>

    <neo4j:config graphDatabaseService="graphDatabaseService" />

    <bean id="meetingServices" class="services.MeetingServices">
        <property name="userRepository"><ref bean="userRepository"/></property>
        <property name="meetingRepository"><ref bean="meetingRepository"/></property>
    </bean>

    <bean id="userServices" class="services.UserServices">
        <property name="userRepository"><ref bean="userRepository"/></property>
    </bean>

    <tx:annotation-driven mode="proxy" />

    <neo4j:repositories base-package="repositories"/>

    <context:spring-configured/>

    <context:annotation-config/>

</beans> 
```

此配置工作得很好，因为`@Transactional`（其`neo4jTransactionManager`参数当然已被删除）注释现在已考虑到我的服务方法。

我的问题是，（无论我的项目是否可以使用简单的`proxy`方法）：

在我的第一个 Spring 配置中，我遗漏了什么或配置错误导致 aspectJ 事务功能失败？

我目前正在使用 Spring 提高我的技术技能，并阅读了几篇关于 aspectJ 的“加载时编织”的文章。这可能与我的问题有关吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T14:22:20.770

尝试添加 `<context:load-time-weaver/>`以启用加载时间编织并将 spring-aspects.jar 添加到类路径中。

有关更多信息，请参阅[http://static.springsource.org/spring/docs/current/spring-framework-reference/html/aop.html#aop-aj-ltw-spring](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/aop.html#aop-aj-ltw-spring)

**编辑**

对于通用 Java 应用程序，即不在 Web 或应用程序容器中运行，您需要通过 javaagent 选项启用 Java 工具：

```
java -javaagent:path/to/spring-instrument.jar your.Main 
```

如果你想编织你自己的切面，你需要提供一个带有切面声明的 META-INF/aop.xml 文件。（仅弹簧方面不需要，它已经在 spring-aspect.jar 上提供）。

最后，您可以使用编译时编织，[使用 maven aspectj 插件，](http://mojo.codehaus.org/aspectj-maven-plugin/)例如：

```
<plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>aspectj-maven-plugin</artifactId>
            <configuration>
                <complianceLevel>1.6</complianceLevel>
                <aspectLibraries>
                    <aspectLibrary>
                        <groupId>org.springframework</groupId>
                        <artifactId>spring-aspects</artifactId>
                    </aspectLibrary>
                </aspectLibraries>
            </configuration>
            <executions>
                <execution>
                    <goals>
                        <goal>compile</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

# php - 在解析 PHP 源代码时，Doxygen 将“$”视为一种类型而不是变量标记

> ID：15616712
> 
> 赞同：0
> 
> 时间：2013-03-25T13:54:19.317
> 
> 标签：php, doxygen

例如：

```
/** \file test.php
 * this is test.php file
 */

/** 
 * This is foo
 * @param $myPar
 */
function foo($myPar) {

} 
```

Doxygen 生成如下内容：

```
<td class="paramtype">
 $
</td>

<td class="paramname">
<em> myPar </em>
</td> 
```

为什么？似乎 Doxygen 正在使用另一个解析器而不是 PHP 解析器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:23:56.547

看起来，就像您在 Doxygen PHP 解析器中发现了错误一样。我对 XML 和 HTML 输出都进行了同样的尝试——在这两种情况下，参数类型都被确定为错误的。

```
<?php
/** 
 * This is foo
 * @param $myPar
 */
function foo($myPar) {

}

function bar($myPar) {

}

function hi(ArrayIterator $myPar) {

} 
```

我的版本：

```
ustimenko@home:/tmp/doxy$ doxygen --version
1.7.6.1 
```

还有 ETRACT_ALL = YES，因为在相反的情况下它不会提取这些函数。

# r - 设置随机种子不影响分类方法 C5.0 和 ctree

> ID：15616718
> 
> 赞同：2
> 
> 时间：2013-03-25T13:54:28.647
> 
> 标签：r, random, classification

我想比较两种不同的分类方法，分别是库party和c50中的ctree和C5.0，比较是为了测试它们对初始起点的敏感性。每次计算错误分类项目的数量并存储在一个向量中，然后使用 t-test 进行测试，我希望看看它们是否真的不同。

```
library("foreign"); # for read.arff
library("party") # for ctree 
library("C50") # for C5.0 

trainTestSplit <- function(data, trainPercentage){
    newData <- list();
    all <- nrow(data);
    splitPoint <- floor(all * trainPercentage);
    newData$train <- data[1:splitPoint, ];
    newData$test <- data[splitPoint:all, ];
    return (newData);

}

ctreeErrorCount <- function(st,ss){
    set.seed(ss);
    model <- ctree(Class ~ ., data=st$train);
    class <- st$test$Class;
    st$test$Class <- NULL;
    pre = predict(model, newdata=st$test, type="response");
    errors <- length(which(class != pre)); # counting number of miss classified items
    return(errors);
}
C50ErrorCount <- function(st,ss){
    model <- C5.0(Class ~ ., data=st$train, seed=ss);
    class <- st$test$Class;
    pre = predict(model, newdata=st$test, type="class");
    errors <- length(which(class != pre)); # counting number of miss classified items
    return(errors);
}

compare <- function(n = 30){
    data <- read.arff(file.choose());

    set.seed(100);
    errors = list(ctree = c(), c50 = c());
    seeds <- floor(abs(rnorm(n) * 10000));
    for(i in 1:n){
        splitData <- trainTestSplit(data, 0.66);
        errors$ctree[i] <- ctreeErrorCount(splitData, seeds[i]);
        errors$c50[i] <- C50ErrorCount(splitData, seeds[i]);
    }

    cat("\n\n");
    cat("============= ctree Vs C5.0 =================\n");
    cat(paste(errors$ctree, "            ", errors$c50, "\n"))
    tt <- t.test(errors$ctree, errors$c50);
    print(tt);

} 
```

显示的程序据说是在做比较的工作，但是由于向量中的错误数量没有改变，所以 t.test 函数会产生错误。我在 R 中使用了 iris（但将类更改为类）和[温彻斯特乳腺癌](http://archive.ics.uci.edu/ml/datasets/Breast+Cancer+Wisconsin+%28Original%29)数据，可以在[此处](http://www.cs.nott.ac.uk/~pqf/data/wisconsin.arff)下载来测试它，但任何数据都可以使用，只要它具有类属性

但是我遇到的问题是，当我更改随机种子时，这两种方法的结果保持不变并且不会改变，理论上，如他们的文档中所述，这两个函数都使用随机种子，ctree 使用`set.seed(x)`而 C5.0 使用参数叫seed来设置种子，可惜我找不到效果。

你能告诉我如何控制这些功能的首字母吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-14T10:24:49.463

在您将 ctrees 配置为使用随机选择的输入变量（即 ctree_control 中的 mtry > 0）的情况下，ctrees 仅依赖于随机种子。请参阅[http://cran.r-project.org/web/packages/party/party.pdf](http://cran.r-project.org/web/packages/party/party.pdf)（第 11 页）

对于 C5.0-trees，种子是这样使用的：

```
 ctrl = C5.0Control(sample=0.5, seed=ss);
  model <- C5.0(Class ~ ., data=st$train, control = ctrl); 
```

请注意，种子用于选择数据样本，而不是在算法本身内。请参阅[http://cran.r-project.org/web/packages/C50/C50.pdf](http://cran.r-project.org/web/packages/C50/C50.pdf)（第 5 页）

# structuremap - 具有 StructureMap 和 Unobtrusive 的项目不注册订阅

> ID：15616719
> 
> 赞同：0
> 
> 时间：2013-03-25T13:54:32.530
> 
> 标签：structuremap, nservicebus, nservicebus3

当前的生产 NUGET 构建。视窗 8 x64 VS2012

我遵循了有关如何创建 pub/sub 的示例。默认构建器被替换为结构图，一切正常。我删除了 raven 的队列和数据库，控制台抱怨 client@machine 名称不存在。

我再次删除队列和数据库并注释掉结构图的内容并恢复默认构建器，一切都恢复正常。

不使用默认构建器首先设置队列的新项目也存在同样的问题。

最初的

```
 Configure.With()
            .DefaultBuilder()
            .DefiningEventsAs(t => t.Namespace != null && t.Namespace.EndsWith("Events")); 
```

使用结构图

```
 public void Init()
    {
        Configure.With()
            //.DefaultBuilder()
            .StructureMapBuilder(new Container(new DependencyRegistry()))
            .JsonSerializer()
            .DefiningEventsAs(t => t.Namespace != null && t.Namespace.EndsWith("Events"));
    }

    public class DependencyRegistry : Registry
    {
        public DependencyRegistry()
        {
            Scan(x =>
            {
                x.AssembliesFromApplicationBaseDirectory();
                x.WithDefaultConventions();
            });
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:11:48.047

DefiningEventsAs 需要在调用 With() 之后立即执行。这是一个已知问题，我们将确保在未来的版本中修复它。

# android - 在 Surfaceview 的画布上显示位图

> ID：15616724
> 
> 赞同：2
> 
> 时间：2013-03-25T13:54:41.100
> 
> 标签：android, canvas, bitmap, surfaceview

我正在尝试开发一个 android 应用程序来显示可缩放、可平移的地图（这只是一个位图图像），它还允许用户单击地图上的某些点。

我正在努力寻找实现此类应用程序的最有效方法。在尝试了许多其他方法（包括 Webviews、OpenLayers）之后，最好的方法（至少根据这个站点）似乎是使用带有 Canvas 的 SurfaceView。到目前为止，我的代码是从我在互联网上找到的片段拼凑而成的，所以它只是崩溃了。无论如何，我已经将它包含在这里，希望它可以让我对我想要实现的目标有所了解：

```
public class Main extends Activity {

private Bitmap bmp; 
    private SurfaceView surfaceView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        surfaceView = (SurfaceView)findViewById(R.id.surface);
        bmp = BitmapFactory.decodeResource(getResources(),
             R.drawable.testmapbmp);
        //decode the bitmap file

        Canvas canvas = new Canvas(bmp);
        //create a canvas from the bitmap, then display it in surfaceview
        surfaceView.draw(canvas);
    }
} 
```

这是实现我的应用程序所需功能的最佳方式吗？或者有没有更好的方法，特别是如果我以后会遇到问题，例如实现地图的可点击部分。

我真的需要以前创建过类似东西的人的帮助，所以我可以对这个问题进行思考，但我非常感谢任何帮助/指针/提示！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T14:04:14.680

您的一段代码并不正确。

通常，如果您想做这种事情，您需要创建自己的自定义视图（通过继承 View 或 SurfaceView）。在您的 View 子类中，您需要覆盖方法 onDraw(Canvas) 并使用其中一种画布方法在画布上绘制位图。

要使其可平移和可缩放，您需要使用[Scroller](http://developer.android.com/reference/android/widget/Scroller.html)和[ScaleGestureDetector](http://developer.android.com/reference/android/view/ScaleGestureDetector.html)类。通常平移或缩放是通过使用其方法（旋转、缩放、平移）将仿射变换应用于画布来完成的。

SurfaceView 和 View 之间的区别在于，在 SurfaceView 中，您可以直接从单独的线程中进行绘制，这意味着您可以在那里组织某种渲染循环并从中进行绘制。它适用于简单的游戏和动画效果。我相信，为了绘制位图，这是矫枉过正的，而且对 View 的子类化要简单得多。

如果我是你，我会从[这个](http://developer.android.com/guide/topics/ui/custom-components.html)和[这个开始。](http://developer.android.com/training/custom-views/create-view.html)

# java - 在 NetBeans 设计器中将 JPanel 添加到 JFrame

> ID：15616727
> 
> 赞同：1
> 
> 时间：2013-03-25T13:54:52.847
> 
> 标签：java, swing, netbeans, jframe, jpanel

我有一个 JFrame，其中包含一些在 NetBeans gui 设计器中制作的组件。其中一个组件是 JPanel。如何将该 JPanel 设置为扩展 JPanel 的另一个类（然后从该类绘制到面板）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T14:02:27.113

由于您的组件（也是）一个 JPanel，您可以将它安装在 NetBeans 的组件面板中。这使您可以将其拖放到设计器中。

以编程方式（假设您不使用 NetBeans 构建 GUI）您要查找的调用类似于：

```
frameInstance.setContentPane(yourJPanelDescendant); 
```

# c++ - 无法使用 SFINAE 将继承的类作为基类

> ID：15616730
> 
> 赞同：3
> 
> 时间：2013-03-25T13:55:01.057
> 
> 标签：c++, inheritance, c++11, traits, sfinae

我创建了一个`container_traits`类来检查容器是否`std::array`存在。但它无法捕获从`std::array`. 有什么解决办法吗？

```
#include <vector>
#include <array>
#include <iostream>

using namespace std;

template<typename C>
struct container_traits { constexpr static bool is_array = false; };
template<typename T, size_t S>
struct container_traits<std::array<T,S>> { constexpr static bool is_array = true; };

template<typename T, size_t S>
struct A : public std::array<T,S> {};

int main()
{
    cout << container_traits<A<int, 5>>::is_array << endl;              // must return 1
    cout << container_traits<std::array<int, 10>>::is_array << endl;    // must return 1
    cout << container_traits<std::vector<int>>::is_array << endl;       // must return 0
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T14:05:48.467

你可以使用`std::is_base_of`：

```
template <typename C>
struct container_traits {
  constexpr static bool is_array = false;
};

template <template <typename, std::size_t> class C,
          typename T, std::size_t N>
struct container_traits<C<T,N>> {
  constexpr static bool is_array = std::is_base_of<std::array<T,N>, C<T,N>>::value;
}; 
```

[看到它在行动](http://ideone.com/HBssdK)。

它基本上专门用于任何带有两个参数的模板类型。在该专业化中， 的值由`is_array`决定`std::is_base_of`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-25T14:11:10.877

**作者注：请不要为这个解决方案投票。投票给 sftrabbit，因为它比我的好。**不过我不会删除，因为虽然有缺陷，但有些人觉得这个想法很有趣。

这给出了您想要的结果：

```
template<typename C>
struct container_traits {

private:

   template <typename T, size_t N>
   static char (&is_array_helper(const std::array<T, N>&))[1];

   static char (&is_array_helper(...))[2];

public:

    constexpr static bool is_array =
        sizeof(is_array_helper(std::declval<C>())) == sizeof(char[1]);

}; 
```

**注意**：

值得一提的是，对于从`std::array<T, N>`（例如`A`）派生的类，继承必须是`public`，否则代码无法编译。要解决此问题，您可以使用`std::is_base_of`或应用一些 SFINAE 技术。然而，关于可访问性的 SFINAE 规则已从 C++03 更改为 C++11，当我前段时间测试时，一些主要编译器没有实现新规则。可能是他们现在做的。

我建议问题的作者等着看是否有更好的解决方案出现（我希望这会发生）。

# java - 将下拉值传递给java的问题

> ID：15616732
> 
> 赞同：-1
> 
> 时间：2013-03-25T13:55:05.287
> 
> 标签：java, html, jsp, select, struts

我的页面中有一堆选择标签，其中一些允许用户使用下拉菜单，其中一些将在给定时间被禁用。所以我的jsp中有一个选择标签，例如：

```
<html:select name="myobject" property="myfield" disabled="$(isDisabled ? 'disabled' : '')"/> 
```

我想在我的jsp上将一个select标签设置为只读，但显然不可能，所以我不得不禁用。由于当用户提交操作时禁用的值不会传递回应用程序，所以我创建了一个隐藏的对象来传递它，因为它建议在任何地方解决这个问题......

```
<html:hidden name="myobject" property="myfield" indexed="true"/> 
```

问题是.. 提交表单时，我没有得到用户选择的新下拉值，我调试到我的 java 代码中，我收到的是最初发送到页面的值，而不是用户选择的值. 如果我删除了隐藏字段，它会起作用，但是如果我这样做了，那么刷新时将不会显示禁用的选择，因为禁用的字段不会传回值，最后我会收到 null ......我该如何解决这个问题问题？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:18:51.020

There may be a duplicate of name or property of the html hidden component.

# memory-leaks - MySQL客户端中的内存泄漏

> ID：15616735
> 
> 赞同：1
> 
> 时间：2013-03-25T13:55:11.757
> 
> 标签：memory-leaks, mysql

我有一段简单的代码可以创建 MySQL 连接：

```
MYSQL *conn = mysql_init(NULL);
if(conn == NULL){
    fprintf(stderr, "Error: can't create MySQL-descriptor\n");
    exit(1);
}

if(!mysql_real_connect(conn,"my_host.com","my_server","psw",NULL,NULL,NULL,0)){
    fprintf(stderr, "Error: can't connect to database %s\n", mysql_error(conn));
} else {
    fprintf(stdout, "MySQL connect Success!\n");
} 
mysql_close(conn); 
```

valgrind 说：

```
==3283== LEAK SUMMARY:
==3283==    definitely lost: 0 bytes in 0 blocks
==3283==    indirectly lost: 0 bytes in 0 blocks
==3283==    possibly lost: 0 bytes in 0 blocks
==3283==    still reachable: 61,512 bytes in 17 blocks
==3283==    suppressed: 0 bytes in 0 blocks 
```

这是一个实际的内存泄漏？

# arrays - 我如何改变算法以获得更好的渐近复杂度？

> ID：15616737
> 
> 赞同：0
> 
> 时间：2013-03-25T13:55:12.327
> 
> 标签：arrays, algorithm, python-3.x

伙计们。

我有一个时机很好的算法，我应该改变它以获得更好的时间，但我不知道。

你能帮我吗？

这是时间：

*   实际0m0.164s
*   用户 0m0.021s
*   系统 0m0.010s

这是算法：

```
def algo2(A, B):
    x=0
    y=0
    for a in A:
          m=0
          for b in B:
                if a == b:
                      m += 1
          if m>y:
                x = a
                y = m
    return x; 
```

这是算法的数组：
A = [1,2,3,4,5,6,7,8,9,0] B = [1,2,3,4,5,6,4,7,8, 9,0]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:04:27.827

你的算法是 O(n*m)。如果数组总是排序的，你可以直接合并（O（n+m）），如下所示。（注意代码不是python……我想你可以理解并翻译它）

```
ixA = 0
ixB = 0
maxVal = 0
maxCount = 0
workingVal = A[ixA]
workingCount = 0
while (ixA < A.length and ixB < B.length)
{
    if (workingVal == B[ixB])
    {
        workingCount += 1
    }
    else if (workingCount > maxCount)
    {
        maxCount = workingCount
        maxVal = workingVal
        workingCount = 0
        ixA += 1
        workingVal = A[ixA]
    }
    ixB += 1
}
// have to check the last one
if (workingCount > maxCount)
{
    maxCount = workingCount
    maxVal = workingVal
} 
```

如果数组没有排序，你可以先排序，然后合并。这将是 O(m log m) + O(n log n) + O(m+n)。这仍然比你的 O(m*n) 好。

# java - 删除xml文件中字符串前后不需要的字符串

> ID：15616739
> 
> 赞同：0
> 
> 时间：2013-03-25T13:55:16.900
> 
> 标签：java, xml, xml-parsing

xml文件内容

```
<distributionChannels><distributionChannel type="Wap" id="1"><contentChannelRefs>
<contentChannelRef id="2"><categories><category 
link="http://images/11.gif" id="1"><names><name lang="de">Top Downloads</name><name
lang="ww">Tops</name></names></category></categories></contentChannelRef>
</contentChannelRefs></distributionChannel>  
</distributionChannels> 
```

如何删除我从 xml 文件中读取的不需要的内容，输出应如下所示：

```
<category link="http://images/11.gif" id="1"><names><name lang="de">Top Downloads</name><name lang="ww">Tops</name></names></category> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T14:01:39.850

可靠的解决方案 - 使用 XML 解析器。简单的解决方案是

```
s = s.substring(s.indexOf("<categories>"), s.indexOf("</categories>") + 13); 
```

如果您想一一阅读类别，请使用正则表达式

```
 Matcher m = Pattern.compile("<category.*?>.*?</category>").matcher(xml);
    for(int i = 0; m.find(); i++) {
        System.out.println(m.group());
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T15:02:59.590

不建议使用 XML 进行模式匹配。使用解析器获取您的节点并相应地管理它们。如果您有兴趣打印它们，我已经包含了打印节点的代码。

```
public static void main(String[] args)
        throws ParserConfigurationException, SAXException,
        IOException, XPathExpressionException {
    DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();
    domFactory.setNamespaceAware(true);
    DocumentBuilder builder = domFactory.newDocumentBuilder();
    Document doc = builder.parse(new InputSource(new StringReader(s)));

    XPathFactory factory = XPathFactory.newInstance();
    XPath xpath = factory.newXPath();
    XPathExpression expr
            = xpath.compile("//categories//category");

    Object result = expr.evaluate(doc, XPathConstants.NODESET);
    NodeList nodes = (NodeList) result;
    //This is where you are printing things. You can handle differently if
    //you would like.
    for (int i = 0; i < nodes.getLength(); i++) {
        System.out.println(nodeToString(nodes.item(i)));
    }
}

private static String nodeToString(Node node) {
    StringWriter sw = new StringWriter();
    try {
        Transformer t = TransformerFactory.newInstance().newTransformer();
        t.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "yes");
        t.setOutputProperty(OutputKeys.INDENT, "yes");
        t.transform(new DOMSource(node), new StreamResult(sw));
    } catch (TransformerException te) {
        te.printStackTrace();
    }
    return sw.toString();
} 
```

# numpy - 用 Scipy 计算逐行点积两个矩阵的向量化方法

> ID：15616742
> 
> 赞同：60
> 
> 时间：2013-03-25T13:55:23.777
> 
> 标签：numpy, scipy, vectorization, matrix-multiplication, dot-product

我想尽可能快地计算两个相同维度的矩阵的逐行点积。这就是我这样做的方式：

```
import numpy as np
a = np.array([[1,2,3], [3,4,5]])
b = np.array([[1,2,3], [1,2,3]])
result = np.array([])
for row1, row2 in a, b:
    result = np.append(result, np.dot(row1, row2))
print result 
```

当然输出是：

```
[ 26\.  14.] 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2015-06-24T08:44:18.837

直接的方法是：

```
import numpy as np
a=np.array([[1,2,3],[3,4,5]])
b=np.array([[1,2,3],[1,2,3]])
np.sum(a*b, axis=1) 
```

这避免了 python 循环，并且在以下情况下更快：

```
def npsumdot(x, y):
    return np.sum(x*y, axis=1)

def loopdot(x, y):
    result = np.empty((x.shape[0]))
    for i in range(x.shape[0]):
        result[i] = np.dot(x[i], y[i])
    return result

timeit npsumdot(np.random.rand(500000,50),np.random.rand(500000,50))
# 1 loops, best of 3: 861 ms per loop
timeit loopdot(np.random.rand(500000,50),np.random.rand(500000,50))
# 1 loops, best of 3: 1.58 s per loop 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-03-25T19:17:02.147

查看[numpy.einsum](http://docs.scipy.org/doc/numpy/reference/generated/numpy.einsum.html#numpy.einsum)以了解另一种方法：

```
In [52]: a
Out[52]: 
array([[1, 2, 3],
       [3, 4, 5]])

In [53]: b
Out[53]: 
array([[1, 2, 3],
       [1, 2, 3]])

In [54]: einsum('ij,ij->i', a, b)
Out[54]: array([14, 26]) 
```

看起来`einsum`比`inner1d`：

```
In [94]: %timeit inner1d(a,b)
1000000 loops, best of 3: 1.8 us per loop

In [95]: %timeit einsum('ij,ij->i', a, b)
1000000 loops, best of 3: 1.6 us per loop

In [96]: a = random.randn(10, 100)

In [97]: b = random.randn(10, 100)

In [98]: %timeit inner1d(a,b)
100000 loops, best of 3: 2.89 us per loop

In [99]: %timeit einsum('ij,ij->i', a, b)
100000 loops, best of 3: 2.03 us per loop 
```

* * *

注意：NumPy 在不断发展和改进；多年来，上述功能的相对性能可能发生了变化。如果性能对您很重要，请使用您将使用的 NumPy 版本运行您自己的测试。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2016-09-23T09:49:47.960

玩弄这个并找到`inner1d`最快的。然而，该功能是内部的，因此更强大的方法是使用

```
numpy.einsum("ij,ij->i", a, b) 
```

更好的是对齐你的记忆，使总和发生在第一维，例如，

```
a = numpy.random.rand(3, n)
b = numpy.random.rand(3, n)

numpy.einsum("ij,ij->j", a, b) 
```

对于`10 ** 3 <= n <= 10 ** 6`，这是最快的方法，速度是未转置等效方法的两倍。最大值出现在二级缓存被最大化时，大约为`2 * 10 ** 4`.

还要注意，转置后的转换`sum`比其未转置的等价物快得多。

[![在此处输入图像描述](../Images/e3e0c9adbab9d73fdd7e7e7aa81f715a.png)](https://i.stack.imgur.com/cduVS.png)

[![在此处输入图像描述](../Images/4121491cc9832efea0b78e9be1600b67.png)](https://i.stack.imgur.com/reVIP.png)

该情节是用[perfplot](https://github.com/nschloe/perfplot)创建的（我的一个小项目）

```
import numpy
from numpy.core.umath_tests import inner1d
import perfplot

def setup(n):
    a = numpy.random.rand(n, 3)
    b = numpy.random.rand(n, 3)
    aT = numpy.ascontiguousarray(a.T)
    bT = numpy.ascontiguousarray(b.T)
    return (a, b), (aT, bT)

b = perfplot.bench(
    setup=setup,
    n_range=[2 ** k for k in range(1, 25)],
    kernels=[
        lambda data: numpy.sum(data[0][0] * data[0][1], axis=1),
        lambda data: numpy.einsum("ij, ij->i", data[0][0], data[0][1]),
        lambda data: numpy.sum(data[1][0] * data[1][1], axis=0),
        lambda data: numpy.einsum("ij, ij->j", data[1][0], data[1][1]),
        lambda data: inner1d(data[0][0], data[0][1]),
    ],
    labels=["sum", "einsum", "sum.T", "einsum.T", "inner1d"],
    xlabel="len(a), len(b)",
)

b.save("out1.png")
b.save("out2.png", relative_to=3) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-25T14:26:39.663

你会更好地避免`append`，但我想不出一种方法来避免 python 循环。也许是一个自定义的 Ufunc？我不认为 numpy.vectorize 会在这里帮助你。

```
import numpy as np
a=np.array([[1,2,3],[3,4,5]])
b=np.array([[1,2,3],[1,2,3]])
result=np.empty((2,))
for i in range(2):
    result[i] = np.dot(a[i],b[i]))
print result 
```

**编辑**

根据[这个答案](https://stackoverflow.com/questions/6229519/numpy-column-wise-dot-product)`inner1d`，如果您的实际问题中的向量是一维的，它看起来可能会起作用。

```
from numpy.core.umath_tests import inner1d
inner1d(a,b)  # array([14, 26]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-24T20:38:16.117

我遇到了这个答案，并使用在 Python 3.5 中运行的 Numpy 1.14.3 重新验证了结果。在大多数情况下，上面的答案在我的系统上是正确的，尽管我发现对于非常大的矩阵（参见下面的示例），除了一种方法之外，所有方法都非常接近，以至于性能差异毫无意义。

对于较小的矩阵，我发现这`einsum`是最快的，在相当大的范围内，在某些情况下高达两倍。

我的大矩阵示例：

```
import numpy as np
from numpy.core.umath_tests import inner1d
a = np.random.randn(100, 1000000)  # 800 MB each
b = np.random.randn(100, 1000000)  # pretty big.

def loop_dot(a, b):
    result = np.empty((a.shape[1],))
    for i, (row1, row2) in enumerate(zip(a, b)):
        result[i] = np.dot(row1, row2)
%timeit inner1d(a, b)
# 128 ms ± 523 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
%timeit np.einsum('ij,ij->i', a, b)
# 121 ms ± 402 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)
%timeit np.sum(a*b, axis=1)
# 411 ms ± 1.99 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)
%timeit loop_dot(a, b)  # note the function call took negligible time
# 123 ms ± 342 µs per loop (mean ± std. dev. of 7 runs, 10 loops each) 
```

所以`einsum`在非常大的矩阵上仍然是最快的，但数量很少。不过，这似乎是一个具有统计学意义的（微小）数量！

# regex - grep 正则表达式之间没有特殊符号的单词对

> ID：15616749
> 
> 赞同：0
> 
> 时间：2013-03-25T13:55:51.263
> 
> 标签：regex, grep

被这个任务卡住了：

我有一行，其中包含来自组的单词、一些单词/摘要/减去文本、空格以及再次来自组和文本的单词

例如单词第一或第二：

```
"first-12qwe32 second-4324"

"first-123ewq first-asf-ds"

"second-123 first-45-6" 
```

但不是：

```
"second-123" 

"second-123 \" first-45-6" 

"second-123 \t first-45-6" 

"first-45-6-second-ffuu" 
```

我试试这个：

```
grep -e "first-\w*\|second-\w* first-\w*\|second-\w*"

grep -e "(first-\|second-)\w* (first-\|second-)\w* 
```

和相同的变体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:02:56.270

尝试这个：

```
grep -e "\w*[-a-z0-9]* \w*[-a-z0-9]*" 
```

这将匹配您所有的待匹配示例，而不匹配您所有的非匹配示例。您可能希望根据自己的需要进行调整。

# asp.net-mvc - 无法将 JSON 数据绑定到 KendoUI Grid

> ID：15616757
> 
> 赞同：3
> 
> 时间：2013-03-25T13:56:16.137
> 
> 标签：asp.net-mvc, json, kendo-ui

在尝试将 KendoUi Grid 与来自控制器的 Json 数据绑定时，我遇到了某个问题。事情似乎很好，我的 Json 对象包含数据，但网格仍然没有显示任何东西：

我在 chrome JavaScript 控制台中收到此错误：

```
GET http://localhost:8084/Records?take=5&skip=0&page=1&pageSize=5 500 (Internal Server Error) 
```

在`View`：

```
<div id="grid">
</div>
<div>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#grid").kendoGrid({
                dataSource: {
                    type: "json",
                    serverPaging: true,
                    pageSize: 5,
                    groupable: true,
                    selectable: "row",
                    transport: { read: { url: "Records", dataType: "json"} }
                },
                height: 400,
                scrollable: true,
                sortable: true,
                filterable: true,
                pageable: true,
                columns: [
                        { field: "No", title: "No" },
                        { field: "Desc", title: "Description" },
                        { field: "priority", title: "Priority" },
                        { field: "decision", title: "Decision" }
                    ],
                dataBound: function () {
                    this.expandRow(this.tbody.find("tr.k-master-row").first());
                }
            });
        });
    </script> 
```

在`Controller`：

```
 public ActionResult GetRecords()
    {
       var obj = new User();
        var jsnRslt = obj.GetResult(Session["id"].ToString());
//return Json(jsnRslt);

        return Json(jsnRslt, JsonRequestBehavior.AllowGet); //Changed as suggested by Dismissile
    } 
```

在`Model`：

```
public object GetResult(string usrId)
    {
…
….
…..            try
        {
            int i = 0;
            if (rcrds != null || rcrds.HasRows)
            {
                jsonWriter.WriteStartObject();
                while (rcrds.Read())
                {
                    for (int j = 0; j < rcrds.FieldCount; j++)
                    {
jsonWriter.WritePropertyName(rcrds.GetName(j));
jsonWriter.WriteValue(rcrds.GetValue(j));
                    }
                    i++;
                }
                jsonWriter.WriteEndObject();
            }

        }

        catch (Exception ex) { }
        return jsonWriter;
    }
} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-14T09:00:30.213

尝试使用 dataSource 中的传输属性，如下所示：

```
 <script type="text/javascript">

    var dataSource = new kendo.data.DataSource({
        batch: true,
        schema: {
            model: {
                id: "EmployeeID",
                fields: {
                    EmployeeID: { editable: true, validation: { required: true } },
                    EmployeeName: { validation: { required: true } }

                }
            }
        },
        transport: {
            read: {
                url: "/Home/GetData",
                type: "GET"

            },
            update: {
                url: "/Home/Update",
                type: "POST",
                contentType: 'application/json'

            },
            destroy: {
                url: "/Home/Destroy",
                type: "POST",
                contentType: 'application/json'

            },

            create: {
                url: "/Home/Create",
                type: "POST",
                contentType: 'application/json'

            },

            pageSize: 1,

            parameterMap: function (options, operation) {
                if (operation !== "read" && options.models) {
                    return kendo.stringify(options.models) ;
                }
            }

        }

    });

    $(document).ready(function () {

        $("#grid").kendoGrid({
            dataSource: dataSource,
            navigatable: true,
            pageable: true,
            height: 430,
            sortable: true,
            toolbar: ["create", "save", "cancel"],
            columns: [

                { field: "EmployeeID", title: "Employee ID", width: 110 },
                { field: "EmployeeName", title: "Employee Name", width: 110 },

                { command: "destroy", title: "Delete", width: 90 }],
            editable: true,
            selectable: "multiple row",
            groupable: true,
            navigatable: true,
            filterable: true
        });
    });

</script> 
```

控制器：

```
public class HomeController : Controller
{
    //
    // GET: /Home/

    public ActionResult Index()
    {
        var employee = new Employee().GetEmployeeList();

        return View(employee);
    }

    [AcceptVerbs(HttpVerbs.Get)]
    public JsonResult GetData()
    {
        var obj = new Employee();

        return Json(obj.GetEmployeeList(), JsonRequestBehavior.AllowGet);
    }

    [HttpPost]
    public JsonResult Update(List<Employee> model)
    {
        var obj = new Employee();

        //return View();
        return Json(obj);
    }

    [HttpPost]
    public JsonResult Create(List<Employee> model)
    {
        var obj = new Employee();

        return Json(obj);
    }

    public ActionResult Destroy(Employee model)
    {
        return View();
    }

} 
```

从 index 方法返回一个 html 视图来保存网格 &

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T14:52:08.233

You probably need this in your JSON call:

```
return Json(jsnRslt, JsonRequestBehavor.AllowGet); 
```

It looks like you are doing a GET call, and by default GET is not allowed on a JSON call.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T15:41:43.793

我认为您还需要在 ActionMethod Parm 中添加数据源请求

```
 public ActionResult GetResult([DatasourceRequest]request, string usrId)
 return Json(jsnRslt.ToDatasourceResult(request), JsonRequestBehavior.AllowGet); 
```

每个 kendogrid 都需要这个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-26T15:15:33.413

您正在返回一个`ActionResult`，它应该是 a `JsonResult`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-14T09:53:06.453

尝试这个

```
 transport: { read: { url: "Records", dataType: "jsonp"} } 
```

尝试使用`jsonp`而不是`json`.

# sql-server-2008 - 删除具有 2 个条件的多行

> ID：15616758
> 
> 赞同：0
> 
> 时间：2013-03-25T13:56:21.187
> 
> 标签：sql-server-2008

我有一个如下表

* * *

类别组

*   int product_group_id (PK)
*   nvarchar(300) product_group_en_name
*   int parent_group_id

* * *

现在我有这样的桌子

```
product_group_id -- product_group_en_name -- parent_group_id
    1                    Phones                Null   <----  category name
    2                    LapTops               Null   <----  category name
    3                    Nokia x3               1  <---- product under Phones Category
    4                    HP probook             2  <---- product under LapTops Category 
```

这是我想要的（当我删除类别时，我也希望删除该类别下的所有产品）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T14:00:41.160

使用[级联参照完整性约束](http://msdn.microsoft.com/en-us/library/aa933119%28v=sql.80%29.aspx)：

```
ON DELETE CASCADE 
```

哪个：

> 指定如果尝试删除具有由其他表中现有行中的外键引用的键的行，则包含这些外键的所有行也将被删除。

定义此外键时`parent_group_id`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:00:23.717

您可以使用选项 DELETE CASCADE 将外键 sdd 到第二个表。请参阅[http://www.mssqltips.com/sqlservertip/2743/using-delete-cascade-option-for-foreign-keys/](http://www.mssqltips.com/sqlservertip/2743/using-delete-cascade-option-for-foreign-keys/)

# jsf - 是否可以拦截来自@ManagedBean 的方法？如果没有，有替代方案吗？

> ID：15616763
> 
> 赞同：3
> 
> 时间：2013-03-25T13:56:33.300
> 
> 标签：jsf, jsf-2, cdi, interceptor, managed-bean

我是 JSF-2 和 CDI 的新手（我来自 Spring 世界）。

我想从 @ManagedBean 拦截一个方法，但我的 Interceptor 类从未被调用。有可能吗？

**日志拦截器.java**

```
@Interceptor
public class LogInterceptor {

    @AroundInvoke
    public Object log(InvocationContext ctx) throws Exception {
        System.out.println("begin method interceptor");
        Object methodReturn = ctx.proceed();
        System.out.println("end method interceptor");

        return methodReturn;
    }   
} 
```

**角色MB**

```
@ManagedBean
@ViewScoped
public class RoleMB extends BaseMB {

    @Interceptors(LogInterceptor.class)
    public void preEditRole(Role role) {
        ...
    }
} 
```

**豆类.xml**

```
<beans xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee  http://java.sun.com/xml/ns/javaee/beans_1_0.xsd">

    <interceptors>
        <class>br.com.preventsenior.services.log.LogInterceptor</class>
    </interceptors>

</beans> 
```

`log(InvocationContext ctx)`永远不会被调用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T14:03:18.633

Java EE 拦截器仅适用于 CDI 托管 bean 和 EJB，而不适用于 JSF 托管 bean。

所以，你基本上有两个选择：

1.  通过 CDI bean 管理注释（`@Named`等）更改 JSF bean 管理注释

2.  拦截 EJB 方法，而该方法又由 JSF 托管 bean 调用。在一个健全的 Java EE 应用程序中，真正的业务逻辑无论如何都属于 EJB。

# php - php / mysqli：我应该在返回之前释放结果吗？

> ID：15616765
> 
> 赞同：5
> 
> 时间：2013-03-25T13:56:33.830
> 
> 标签：php, mysqli

> 如果从函数内部调用，return 语句会立即结束当前函数的执行，并将其参数作为函数调用的值返回。

引用自 php 手册： http: [//php.net/manual/en/function.return.php](http://php.net/manual/en/function.return.php)

所以如果我要写这个函数：

```
public function check_db_for_desired_value()
{
  //...connect to db, prepare stmt, etc.
  while (mysqli_stmt_fetch($stmt))
  {
    if($column == 'desired_value')
    {
      return TRUE;  
    }
    else
    {
      return FALSE;
    }
  }
  // these commands would never get executed
  mysqli_stmt_free_result($stmt); 
  mysqli_stmt_close($stmt);
  mysqli_close($link);
} 
```

所以（如果 php 手册中所说的内容是正确的）我的结果永远不会被释放，我的 stmt 永远不会被关闭并且我的数据库连接保持打开状态，因为我返回了一些东西并结束了函数的执行......

那么我是否应该返回一些设置变量的值，然后在关闭所有内容后返回该值？

我问，因为我的代码正在运行并且我没有收到任何错误，即使我以前写过这样的函数......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T14:00:11.887

你是对的，在`return`.

但是您可以使用`__destruct`来关闭连接并清除结果：

```
function __destruct() {
    mysqli_stmt_free_result($this->stmt); // making $stmt a variable inside class
    mysqli_stmt_close($this->stmt);
    mysqli_close($this->link);
} 
```

> 只要没有对特定对象的其他引用，或者在关闭序列期间以任何顺序调用，就会调用析构函数方法。- [PHP.NET](http://php.net/manual/en/language.oop5.decon.php)

`return`否则，您应该在调用之前移动释放和关闭。

# python - matplotlib中的距离相关着色

> ID：15616768
> 
> 赞同：1
> 
> 时间：2013-03-25T13:56:44.547
> 
> 标签：python, matplotlib

我想创建一些电磁散射过程的远场图。

为此，我计算了值 θ、φ 和 r。坐标 θ 和 φ 在单位球面上创建了一个规则网格，因此我可以使用`plot_Surface`（[在此处找到](http://matplotlib.org/mpl_toolkits/mplot3d/tutorial.html#surface-plots)）转换为笛卡尔坐标。

我现在的问题是，我需要一种相对于半径 r 而不是高度 z 为表面着色的方法，这似乎是默认值。

有没有办法改变这种依赖关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:48:18.483

我不知道你过得怎么样，所以也许你已经解决了。但是，根据 Paul 评论中的链接，你可以做这样的事情。我们使用 plot_surface 的 facecolor 参数传递我们想要的颜色值。

（我已经修改了 matplotlib 文档中的 surface3d 演示）

**编辑：**正如 Stefan 在他的评论中指出的那样，我的回答可以简化为：

```
from mpl_toolkits.mplot3d import Axes3D
import matplotlib.pyplot as plt
import matplotlib.cm as cm
import numpy as np

fig = plt.figure()
ax = fig.gca(projection='3d')
X = np.arange(-5, 5, 0.25)
xlen = len(X)
Y = np.arange(-5, 5, 0.25)
ylen = len(Y)
X, Y = np.meshgrid(X, Y)
R = np.sqrt(X**2 + Y**2)
maxR = np.amax(R)
Z = np.sin(R)

# Note that the R values must still be normalized.
surf = ax.plot_surface(X, Y, Z, rstride=1, cstride=1, facecolors=cm.jet(R/maxR),
        linewidth=0)

plt.show() 
```

并且（结束）我不必要的复杂原始版本，使用与上面相同的代码，但省略了 matplotlib.cm 导入，

```
# We will store (R, G, B, alpha)
colorshape = R.shape + (4,)
colors = np.empty( colorshape )
for y in range(ylen):
    for x in range(xlen):
        # Normalize the radial value.
        # 'jet' could be any of the built-in colormaps (or your own).
        colors[x, y] = plt.cm.jet(R[x, y] / maxR )

surf = ax.plot_surface(X, Y, Z, rstride=1, cstride=1, facecolors=colors,
        linewidth=0)

plt.show() 
```

# c++ - 无法更改 MFC 按钮标题

> ID：15616776
> 
> 赞同：3
> 
> 时间：2013-03-25T13:57:06.763
> 
> 标签：c++, mfc

```
int firstButton = IDC_BUTTON1;  

for(int i = firstButton; i < firstButton + 16; ++i)
{
    CWnd *pB = GetDlgItem(i);

    for(int j = 0; j < 16; ++j)
    {

        pB->SetWindowTextW((LPCTSTR)(szTest[j]));
    }
} 
```

我想动态更改按钮标题。

当在 SetWindowTextW 中使用像“static txt”这样的静态文本时，它运行良好，

但使用 char 数组（在本例中为 szTest），标题不会更改

我编码了错误的类型转换吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T16:29:05.643

您代码中的内部 for 循环对我来说没有意义。你可能想要这个：

```
char szTest[] = "0123456789ABCDEF" ;

int firstButton = IDC_BUTTON1;  

for (int i = firstButton; i < firstButton + 16; ++i)
{
    CWnd *pB = GetDlgItem(i);
    CString str(szTest[i]) ;
    pB->SetWindowText(str);
} 
```

使用那段代码，第一个按钮将包含“0”，第二个将包含“1”等。

# c++ - 为了在 if 语句中使用我的类，要重载哪个运算符？

> ID：15616779
> 
> 赞同：2
> 
> 时间：2013-03-25T13:57:17.787
> 
> 标签：c++, operator-keyword, overwrite

例如，我定义了一个类

```
class MyClass
{
   ....
}; 
```

为了与对象进行 if 比较，我必须重载哪个运算符`MyClass`？

例如：

```
MyClass cc;
if ( cc ) // compile error
{
   //do some stuff
} 
```

我试过了

```
 bool operator == ( int value ) ; //guess the if () will call this 
```

或者

```
 bool operator != ( int value ) ; 
```

但两者都给我一个编译错误！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T14:00:15.707

您应该提供一个`bool`转换运算符：

```
struct MyClass
{
  explicit operator bool() const { return true; }   
}; 
```

在这里，`explicit`运算符用于防止不必要的隐式转换为其他类型，特别是数字类型。请注意，这只能从 C++11 开始。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T13:59:20.367

`operator bool()`是你想要的那个。它负责从您的 class 到 type 的类型转换`bool`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-25T14:02:47.473

您必须为`bool`可转换为`bool`. 如果你有 C++11，最好的方法是：

```
class MyClass
{
public:
  explicit operator bool () const {
    ...
  }
}; 
```

如果您没有 C++11（或者至少它不支持显式转换运算符），事情会变得更加棘手（因为当您最不期望的时候，隐式转换会让您非常痛苦）。有关这方面的更多信息，请参阅[安全布尔成语](http://www.artima.com/cppsource/safebool.html)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-25T14:01:46.737

您可以覆盖`operator bool()`，但根据您的示例，您还可以考虑创建将返回的简单方法`bool`。然后它的用法可能如下所示：

```
MyClass cc;
if (cc.isValid())
{
   // do some stuff
} 
```

在这种情况下，这会更直接，也更容易阅读。自定义操作符对很多事情都很有用，但不要强迫它。有时最好***[保持简单](http://en.wikipedia.org/wiki/KISS_principle)***:)

# ios - 为从服务器加载的数据分配二维数组到一维数组

> ID：15616781
> 
> 赞同：0
> 
> 时间：2013-03-25T13:57:19.893
> 
> 标签：ios, objective-c, xcode

我正在尝试将多维数组分配给我的 UITable 视图构造的单维数组。我决定使用循环来节省时间，因为手动添加数组的数据加载非常繁重。

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    NSString *responseString1 = [[NSString alloc] initWithData:responseData1 encoding:NSUTF8StringEncoding];

    NSLog(@"%@",responseString1);

    SBJsonParser *parser = [[SBJsonParser alloc] init];
    id sample = [parser objectWithString:responseString1];

    for (int i = 0; i < [sample count]; i++) {
        [tableData addObject:[[sample objectAtIndex:i]objectAtIndex:1]];
        NSLog(@"%@",[sample objectAtIndex:i]);
        NSLog(@"%@",[tableData objectAtIndex:i]);
    }

    [alert dismissWithClickedButtonIndex:0 animated:YES];
} 
```

现在，'sample' 的 NSLog 反映了数据，但 'tableData' 的 NSLog 反映了 NULL。

提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:05:58.140

假设`tableData`是一个空的`NSMutableArray`，只需使用

```
[tableData addObject:[[sample objectAtIndex:i]objectAtIndex:0]]; 
```

如果您确实想更改`tableData`而不是*构建它*，请使用

```
[tableData replaceObjectAtIndex:i withObject:[[sample objectAtIndex:i]objectAtIndex:0]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:05:38.010

NSMutableArray 不是像 c 那样的静态 c 数组`id myArray[5];`，它就像 c++ `veсtor<NSObject *>`，所以你不能将元素放入其中`[tableData objectAtIndex:i] = ...`，你应该使用它的方法`[tableData addObject:...]`（将元素放在数组的末尾）或`[tableData insertObject:... atIndex:i];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T14:06:06.707

您尝试做的事情最好翻译成：

```
[tableData replaceObjectAtIndex:i withObject:[[sample objectAtIndex:i]objectAtIndex:0]]; 
```

# templates - go html/template 中的可选模板？

> ID：15616785
> 
> 赞同：2
> 
> 时间：2013-03-25T13:57:31.097
> 
> 标签：templates, go

给定一组模板，例如：

### 布局.tpl

```
<html>
<head>
<title>Some title</title>
{{template extracss}}
</head>
<body>
<h1>Page title</h1>
{{template content .}}
</body>
</html> 
```

### 主页.tpl

```
{{define "content"}}
<p>page content goes here</p>
{{end}} 
```

### 编辑.tpl

```
{{define "content"}}
<form>form content goes here</form>
{{end}}

{{define "extracss"}}<style>body{background:pink}</style>{{end}} 
```

使用它来呈现模板：

```
func Render(w http.ResponseWriter, tmpname string, data interface{}) {

    t, err := template.ParseFiles("views/layout.tpl", "views/"+tmpname+".tpl")
    // parse error
    if err != nil {
        http.Error(w, err.Error(), http.StatusInternalServerError)
    }

    if err := t.Execute(w, data); err != nil {
        http.Error(w, err.Error(), http.StatusInternalServerError)
    }
} 
```

edit.tpl 将正确呈现，因为它定义了“extracss”，home.tpl 不会因为模板解析器正确地说“没有这样的模板“extracss””。

那么我将使用什么机制来允许使用“可选”模板？

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T14:28:08.267

一个空的定义有效：`{{define "extracss"}}{{end}}`. 它可能不是超级优雅，但很容易理解。

请注意，您不需要重复空定义。您可以将它们放入主模板并仅在需要时在包含的模板中重新定义它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-08T19:54:53.490

@thomas 的答案很棒，但我发现他写的内容模棱两可，浪费了很多时间试图将其翻译成代码。

这是有效的代码（我相信这是他的建议）：

### 布局.tpl

```
<html>
  <head>
    <title>Some title</title>
    {{template extracss}}
    {{define "extracss"}}{{end}}
  </head>
  <body>
    <h1>Page title</h1>
    {{template content .}}
  </body>
</html> 
```

### 主页.tpl

```
{{define "content"}}
  <p>page content goes here</p>
{{end}} 
```

### 编辑.tpl

```
{{define "content"}}
  <form>form content goes here</form>
{{end}}

{{define "extracss"}}<style>body{background:pink}</style>{{end}} 
```

使用它来呈现模板：

```
func Render(w http.ResponseWriter, tmpname string, data interface{}) {

    t, err := template.ParseFiles("views/layout.tpl", "views/"+tmpname+".tpl")
    // parse error
    if err != nil {
        http.Error(w, err.Error(), http.StatusInternalServerError)
    }

    if err := t.Execute(w, data); err != nil {
        http.Error(w, err.Error(), http.StatusInternalServerError)
    }
} 
```

# linux - 无法取消关联

> ID：15616789
> 
> 赞同：0
> 
> 时间：2013-03-25T13:57:45.707
> 
> 标签：linux, perl, unlink

我对`unlink()`这里完全感到困惑：

```
my $file = "\"/home/user/Documents/Programming/Perl/extracted/Prueba con formateo HTML/msg-2575-4.html\"";
unlink($file) or warn "Could not unlink $file: $!"; 
```

会抛出

```
Could not unlink "/home/user/Documents/Programming/Perl/extracted/Prueba con formateo HTML/msg-2575-4.html": No such file or directory 
```

虽然文件实际存在：

```
$ ls -l "/home/user/Documents/Programming/Perl/extracted/Prueba con formateo HTML/msg-2575-4.html"
-rw-rw-r-- 1 user user 413 Mar 25 13:41 /home/user/Documents/Programming/Perl/extracted/Prueba con formateo HTML/msg-2575-4.html 
```

*编辑*：我也试过：

```
my $file = "/home/user/Documents/Programming/Perl/extracted/Prueba con formateo HTML/msg-2575-4.html";
my $file = '/home/user/Documents/Programming/Perl/extracted/Prueba con formateo HTML/msg-2575-4.html';
my $file = "\'/home/user/Documents/Programming/Perl/extracted/Prueba con formateo HTML/msg-2575-4.html\'"; 
```

同样的错误。

*EDIT2*：choroba 要求的更多测试

`-f`使用返回 false测试文件是否存在。

这是真实文件名的十六进制转储：

```
$ ls "/home/yasin/Documents/Programming/Perl/extracted/Prueba con formateo HTML/msg-2575-4.html" | hexdump -c
0000000   /   h   o   m   e   /   y   a   s   i   n   /   D   o   c   u
0000010   m   e   n   t   s   /   P   r   o   g   r   a   m   m   i   n
0000020   g   /   P   e   r   l   /   e   x   t   r   a   c   t   e   d
0000030   /   P   r   u   e   b   a       c   o   n       f   o   r   m
0000040   a   t   e   o       H   T   M   L   /   m   s   g   -   2   5
0000050   7   5   -   4   .   h   t   m   l  \n                        
000005a 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T14:00:12.103

文件名不包含双引号。不要将它们包含在变量的值中。

```
my $file = '/home/user/Documents/Programming/Perl/extracted/Prueba con formateo HTML/msg-2575-4.html';
unlink $file or warn "Could not unlink $file: $!"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:16:45.903

```
my $file = "\"/home/.../msg-2575-4.html\"";
unlink($file) 
```

相当于做

```
rm "\"/home/.../msg-2575-4.html\"" 
```

显然，正确的shell命令是

```
rm "/home/.../msg-2575-4.html" 
```

所以你要

```
my $file = "/home/.../msg-2575-4.html";
unlink($file) 
```

或者

```
my $file = '/home/.../msg-2575-4.html';
unlink($file) 
```

如果第二个`rm`命令有效，那么 Perl 命令也有效。

# c# - 订阅后触发事件

> ID：15616791
> 
> 赞同：3
> 
> 时间：2013-03-25T13:57:53.837
> 
> 标签：c#, events, timer, event-handling

我有一个包含队列的类和一个包含列表框的表单。

当用户打开表单时，它会从队列中获取所有累积的对象并将它们显示在列表框中。当队列获得新项目时，表单会立即打开，它会通过自定义事件通知新项目的表单。

关闭表单后，数据将再次累积。

*我的问题如下：*只要表单订阅了通知事件，它就应该将所有队列转储到表单中，并且只要有人订阅了该事件，它就会继续转储它。**它不应该等到另一个项目被添加到队列中。**

一种解决方案是使用计时器来检查是否有对该事件的任何订阅，然后转储它。这并不多，但我会浪费计时器的资源。

如果表单对事件的订阅本身可以触发事件似乎会更好。该应用程序非常模块化，模块通过事件与 eventNexus 进行通信，然后联系通知需要了解的每个人。

由于事件也是一个对象，所以应该可以完成这样的事情，但我没有找到任何链接。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T14:12:26.660

`add`您可以使用and`remove`语句在事件本身的代码中自定义添加和删除事件处理程序：

```
private EventHandler onMyEvent;
public event MyEventHandler MyEvent
{
    add
    {
        // run when event handler is added ( += )
        onMyEvent = (MyEventHandler)Delegate.Combine(onMyEvent, value);

        // Add additional, custom logic here...
    }

    remove
    {
        // run when event handler is removed ( -= )
        onMyEvent = (MyEventHandler)Delegate.Remove(onMyEvent, value);
    }
} 
```

在这里，您可以添加自己的代码以在添加或删除事件处理程序时触发操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:03:12.403

对于计时器，您可以尝试使用此代码

```
 private static System.Timers.Timer aTimer;

    aTimer = new System.Timers.Timer(10000);

    // Hook up the Elapsed event for the timer.
    aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);

    // Set the Interval to 2 seconds (2000 milliseconds).
    aTimer.Interval = 2000;
    aTimer.Enabled = true; 
```

你的功能

```
 private static void OnTimedEvent(object source, ElapsedEventArgs e)
    {
        //Your treatment
    } 
```

# django - Django URL 正则表达式捕获 Int

> ID：15616792
> 
> 赞同：0
> 
> 时间：2013-03-25T13:57:55.097
> 
> 标签：django

我的目标是将 2 个参数从我的命名空间传递到我的其他视图中。

```
 <li><a href ="{% url world:p p.id 1 %}">{{p.description}} 
```

如果这没有意义，我很抱歉。我正在尽力找到合适的词来描述我的问题。

我试图传递给views.py中的delpic函数的参数是一个图片ID和一个整数，但为了让它工作，它必须传递正则表达式，然后它将被发送到我的views.py。

```
def delpic(request,picture_id,digit):

     digit = digit
     If digit == "1":
               #Something
     If digit == "2":
               # Something
     return render(request,'boardeditor.html',{'board':BoardNameForm(request.user),}) 
```

但是当我试图将两者都传递给我的观点时。我收到这个错误

```
 TypeError at /delpic/3/1/

  delpic() takes exactly 3 non-keyword arguments (2 given) 
```

我认为是我的正则表达式导致了问题

```
 url(
        r'^delpic/(?P<picture_id>\d+)/(\d{1})/$',
        'pet.views.delpic',
        name= 'delpic',
    ), 
```

我的主 URL 配置文件

```
url(
    r'^',
    include('pet.urls',
        namespace = 'world')
), 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T14:18:47.140

您错误地使用了正则表达式。

该视图需要一个命名的正则表达式，而您没有命名它。视图不明白发生了什么。

您的视图的正确正则表达式是这样的：

```
r'^delpic/(?P<picture_id>\d+)/(?P<digit>\d+)/$' 
```

# c - 在C中自下而上读取文本文件

> ID：15616795
> 
> 赞同：2
> 
> 时间：2013-03-25T13:58:12.277
> 
> 标签：c

我想问一下 C 中有从下往上读取文本文件的功能吗？

Exp: text content is `abcdef`--> 我们会得到`fedcba`.

如果没有这样的功能，我正在考虑将文本内容传递到数组中，然后反转数组，可以吗？你对这个问题有更好的解决方案吗:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:28:08.113

以下代码可能符合您的目的，

```
char a[MAX];
int flag=1,i=0;

fseek(fp, 0, SEEK_END); 
while(flag>0)
{
    a[i]=fgetc(fp);
    i++;
    if(fseek(fp,-2,SEEK_CUR)==-1)
    {
       flag=0;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T14:02:15.970

标准库中没有执行此操作的函数。您可以将数据传递到可变 char 数组并执行就地反转。

这显然不是从底部到顶部读取文件，而是从头到尾读取并使用 O(N) 时间和 O(1) 空间复杂度。您可以使用搜索位置并尝试向后阅读；看到表演会很有趣。

**仅供参考**

有关复杂性分析，请参见[http://www.geeksforgeeks.org/an-in-place-algorithm-for-string-transformation/](http://www.geeksforgeeks.org/an-in-place-algorithm-for-string-transformation/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T14:48:35.917

您可以开发自己的函数，使用`fseek()`标准函数从底部读取：

```
char *my_read(FILE *fp)
{
    int i, size;
    char *buffer;

    fseek(fp, 0, SEEK_END);
    size = ftell(fp);

    buffer = malloc((size+1) * sizeof(char));

    for (i=0; i<size; i++)
    {
        fseek(fp, size-1-i, SEEK_SET);
        buffer[i] = fgetc(fp);
    }
    buffer[size] = 0;
    return buffer;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T15:24:56.073

您可以开发自己的函数，从头开始读取，但从底部开始保存在数组中。

该功能将：

1.  获取文件的大小
2.  用 (size + 1) 分配 char 缓冲区
3.  从头开始读取文件，同时从末尾开始填充 char 数组

比`fseek`每次阅读都使用更简单

```
char *my_read(FILE *fp)
{
    int i, size;
    char *buffer;

    fseek(fp, 0, SEEK_END);
    size = ftell(fp);
    fseek(fp, 0, SEEK_SET);
    buffer = malloc((size+1) * sizeof(char));

    for (i=(size-1); i>=0; i--)
    {
        buffer[i] = fgetc(fp);
    }
    buffer[size] = 0;
    return buffer;
} 
```

# javascript - 使用 Node.js 和 MongoDB 检测站点平台变化的建议

> ID：15616797
> 
> 赞同：0
> 
> 时间：2013-03-25T13:58:18.347
> 
> 标签：javascript, regex, node.js, mongodb, document

我需要一些关于我正在从事的项目的建议。

我目前正在处理一个请求标题的项目；下面是一个被抓取的标题的示例，采用 Mongo 文档样式：

```
{
    "url": "google.com",
    "statusCode": 301,
    "headers": {
        "location": "http://www.google.com/",
        "content-type": "text/html; charset=UTF-8",
        "date": "Mon, 25 Mar 2013 13:50:31 GMT",
        "expires": "Wed, 24 Apr 2013 13:50:31 GMT",
        "cache-control": "public, max-age=2592000",
        "server": "gws",
        "content-length": "219",
        "x-xss-protection": "1; mode=block",
        "x-frame-options": "SAMEORIGIN"
    }
} 
```

该项目使用 Node.JS、Javascript 和 MongoDB。目前我有几千个这样的响应存储在 MongoDB 中，我有兴趣使用其中的一些`items`来`headers`检测平台变化。像`server`, `x-powered-by`,`x-aspnet-version`这样的标头在我看来都是未来可以用来交叉引用的标头。例如 - 如果一个网站“今天”从我在两个月内再次运行这个爬虫时升级`Microsoft-IIS/7.0`到，那么有理由相信这个网站有一个升级。`Microsoft-IIS/7.5`

我的问题是 - 最好的方法是什么？

我应该制作两个系列 -`collectionToday`和`collectionInTwoMonths`？

然后对每个 、 和 ? 的整数变化/增量进行正`server`则`x-powered-by`表达式`x-aspnet-version`搜索

这项工作的实施如何？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:14:02.697

有几种方法可以做到这一点。正如您所建议的那样，一种方法是为每个时间段创建不同的集合，并为每个时间段存储整个标题组。`find`然后，您可以通过为每个时间段运行 url、比较结果应用程序端并报告结果来查询差异。

另一种方法是存储一个“差异”集合，该集合针对每个时间点保存当时的标头与您上次查询的标头之间的差异。每次查询标头时，这将需要更多的应用程序逻辑，但在实际查询差异时工作量会减少。这就是我会做的。

**编辑**

如果这些是您需要的三个标题，那么我认为这听起来不错。请记住，当您查询以查找差异时，您需要找到每个标题更改以进行比较的最后时间，这意味着集合中的最后一个条目（时间）既对应于正确的 url 并且在问题。

用于差异的伪代码：

```
for every url you want:
    query collection by url, sorting by date 
    for each header:
        find the last document with that field
        if the header value in that document and the current header are different:
            add the field to the new document
    add the new document, holding the url, date, and all different fields, to the collection 
```

# c++ - 如何打印MAC地址

> ID：15616804
> 
> 赞同：0
> 
> 时间：2013-03-25T13:58:28.990
> 
> 标签：c++, udp, client-server, ip-address, mac-address

我创建了一个显示客户端的 MAC 和 IP 地址的客户端服务器程序，并且我有一个获取计算机 MAC 地址的功能，但我无法在列表框中打印 MAC 地址。我创建了一个打印功能，该功能之前确实有效，但我更改了查找mac地址的代码，现在它不起作用（我也不知道我是否在正确的地方调用printMACaddress）。我有两个列表框 - 一个显示 IP 地址，另一个显示 MAC 地址。当我单击 IP 地址时，我希望显示该计算机的 MAC 地址，但现在它不显示。当我点击 IP 地址时没有任何反应

```
 void CmfcServerDlg::OnLbnSelchangeListClientaddr()
    {
        bool GetMACFromIP(BYTE Address[MAX_ADAPTER_ADDRESS_LENGTH], const std::string &selected_ip_adr);
    }

    void CmfcServerDlg::PrintMACaddress(unsigned char MACData[])
        {
            CString

 strText;
        strText.Format("%02X-%02X-%02X-%02X-%02X-%02X\n",MACData[0], MACData[1], MACData[2], MACData[3], MACData[4], MACData[5]);
        m_ClientIdList.AddString(strText); 
    }

    bool CmfcServerDlg::GetMACFromIP(BYTE Address[MAX_ADAPTER_ADDRESS_LENGTH], const std::string &selected_ip_adr)
    {
        IP_ADAPTER_INFO AdapterInfo[16];            
        DWORD dwBufLen = sizeof(AdapterInfo);       

        DWORD dwStatus = GetAdaptersInfo(           
            AdapterInfo,                            
            &dwBufLen);                             
        assert(dwStatus == ERROR_SUCCESS);          

        PIP_ADAPTER_INFO pAdapterInfo = AdapterInfo;
        bool found = false;
        do {
            const IP_ADDR_STRING *addr_str = &pAdapterInfo->IpAddressList; 
            while(addr_str != NULL)
            {
              if(selected_ip_adr == addr_str->IpAddress.String) 
              {
                found = true;
                break;
              }
            }
            if(found)
            {
              memcpy(Address, pAdapterInfo->Address, MAX_ADAPTER_ADDRESS_LENGTH); 
              PrintMACaddress(pAdapterInfo->Address); //problem here
              break;
            }
            else
            {
                PrintMACaddress(pAdapterInfo->Address);
                pAdapterInfo = pAdapterInfo->Next;      
            }
        }
        while(pAdapterInfo);                        
        return found; 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:54:28.933

您确实意识到您在评论中声明的目标（“我正在尝试查找连接到服务器的任何计算机的 MAC 地址”）是不可能的？MAC 地址比 IP 地址低级，它们标识“媒体端口”，即电缆所在的位置。

您甚至无法获取交换机另一端的客户端的 MAC 地址，更不用说通过 Internet 获取了。

# java - 使用 JAX-WS 的 SOAP 消息中的嵌套标记中没有命名空间

> ID：15616805
> 
> 赞同：4
> 
> 时间：2013-03-25T13:58:34.863
> 
> 标签：java, web-services, soap, jax-ws

我正在尝试使用 JAX-WS 和 wsimport 编写一个使用给定 Web 服务的 Java 应用程序。它发送给服务的 SOAP 消息大部分是正确的。但是，传递给服务函数的参数中有一个是字符串数组。尽管在 SOAP XML 中为数组本身提供了适当的名称空间，但元素（下面消息中的“parm”）没有名称空间。这会导致服务失败。

```
<?xml version="1.0" ?>
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
    <S:Body>
        <ns2:Submit xmlns:ns2="http://www.acme.com/service/wsdl">
            <ns2:service>SomeJob</ns2:service>
            <ns2:parms>
                <parm>someparam</parm>
                <parm>anotherparam</parm>
            </ns2:parms>
        </ns2:Submit>
    </S:Body>
</S:Envelope> 
```

`<parm>`元素应该是 read `<ns2:parm>`，或者`<Submit>`标签可以定义一个默认名称空间`<Submit xmlns="http://www.acme.com/service/wsdl">`（这是服务在示例 SOAP 消息中建议的内容）。

这个问题确实类似于[JAX-WS 中的问题：为什么嵌套元素在 "" 命名空间中？](https://stackoverflow.com/questions/5793352/jax-ws-why-nested-elements-are-in-namespace). 然而，将样式从 RPC/Literal 更改为 Document/Wrapped 解决了这个问题，而在我的情况下，服务从 Document/Wrapped 开始。

如何说服 JAX-WS 库在数组中的嵌套元素上生成名称空间？

TIA，杰伦

**更新**：编辑生成的代码似乎有效。有人建议在生成的数组类型中的“parm”定义之前的@XmlElement 行中添加一个命名空间属性：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "ArrayOfString", propOrder = {
    "parm"
})
public class ArrayOfString {

@XmlElement(nillable = true, namespace="http://www.acme.com/service/wsdl")
protected List<String> parm;
...
} 
```

这会导致 JAX-WS 添加名称空间并且可能会解决问题。由于在这种情况下代码生成只完成一次，因此可以接受编辑生成的代码。我仍然想知道是否没有更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:54:21.643

您还可以通过添加来影响命名空间的创建

```
elementFormDefault="qualified" 
```

到您的 Java`@XmlSchema`注释 - 或者在您的情况下 - 到定义服务的 XSD。

# mysql - 来自不同表的两个查询结果的平衡

> ID：15616807
> 
> 赞同：-1
> 
> 时间：2013-03-25T13:58:43.677
> 
> 标签：mysql, balance

嗨，我的数据库中有两个表 1\. 收入 2\. 结果 收入表有 ID、日期、价格也结果表完全相同，我显示今天的价格总和

```
mysql_select_db($database_conn, $conn);
$query_gelen_gun = sprintf ("SELECT SUM(tutar) FROM cepbank WHERE tarih >= DATE(NOW())");
$gelen_gun = mysql_query($query_gelen_gun, $conn) or die(mysql_error());
$row_gelen_gun = mysql_fetch_assoc($gelen_gun);
$totalRows_gelen_gun = mysql_num_rows($gelen_gun);

mysql_select_db($database_conn, $conn);
$query_giden_gun = sprintf ("SELECT SUM(tutar) FROM cepbank_out WHERE tarih >= DATE(NOW())");
$giden_gun = mysql_query($query_giden_gun, $conn) or die(mysql_error());
$row_giden_gun = mysql_fetch_assoc($giden_gun);
$totalRows_giden_gun = mysql_num_rows($giden_gun); 
```

. . .

```
<p>Total Income for Today:<?php echo $row_gelen_gun['SUM(tutar)']; ?></p>
<p>Total Outcome for Today:<?php echo $row_giden_gun['SUM(tutar)']; ?></p> 
```

现在我如何显示这两个结果的平衡，例如`$row_gelen_gun['SUM(tutar)']`= 100 和`$row_giden_gun['SUM(tutar)']`= 50

余额应该是 100-50 =50 ？

注意：查询中的价格=tutar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:25:37.653

您可以使用 Gordon 的查询来完成，如果您希望 MySQL 计算余额，只需将第一行更改为：

```
select sumcep, sumcepout, sumcep-sumcepout as balance 
```

* * *

如果您想保持当前的方法（两个单独的查询），这里有一些建议：

首先，我会为这些列加上别名，因为将它们都命名`SUM(tutar)`可能会造成混淆。另外，当涉及到一个函数时，我一直对信任生成的列名感到不安。所以代替这些：

```
SELECT SUM(tutar) FROM cepbank WHERE tarih >= DATE(NOW())
SELECT SUM(tutar) FROM cepbank_out WHERE tarih >= DATE(NOW()) 
```

...试试这些：

```
SELECT SUM(tutar) AS Income FROM cepbank WHERE tarih >= DATE(NOW())
SELECT SUM(tutar) AS Outcome FROM cepbank_out WHERE tarih >= DATE(NOW()) 
```

然后为了平衡，你可以这样做：

```
$balance = $row_gelen_gun['Income'] - $row_giden_gun['Outcome']; 
```

PHP 将为您转换/转换为数字。

顺便说一句，您可以使用`CURRENT_DATE`代替`DATE(NOW())`，但那是次要的。如果您认为它使查询更具可读性，请更改 - 您的电话:)

但最重要的是，如果这不仅仅是学校作业或学习练习，请使用`PDO`或`MySQLi`。即使这是一个学习练习，尝试让它按原样工作，然后转换为 PDO 或 MySQLi——你需要在“现实世界”中使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:15:14.060

您要么想使用`union all`要么`cross join`。用于`union all`在两行中获取结果。用于`cross join`在同一行的两列中获取结果。

这是一个示例`cross join`：

```
select sumcep, sumcepout
from (SELECT SUM(tutar) as sumcep
      FROM cepbank
      WHERE tarih >= DATE(NOW())
     ) t cross join
     (SELECT SUM(tutar) as sumcepout
      FROM cepbank_out
      WHERE tarih >= DATE(NOW())
     ) t2 
```

# javascript - 单击另一个图像时显示图像

> ID：15616808
> 
> 赞同：-5
> 
> 时间：2013-03-25T13:58:48.287
> 
> 标签：javascript, image, hyperlink

我正在运行一个脚本，每次刷新页面时都会显示一个随机图像。我想知道，如何设置它，以便在单击每个随机图像时，在刚刚单击的图像下方会出现一个单独的图像。对于每个原始图像，第二个图像将不同。

当前运行的刷新//随机图像脚本如下图所示

请帮忙。

```
<a href="javascript:document.location.reload();"
ONMOUSEOVER="window.status='Refresh'; return true">
<img src="Graphic-design-can-[TEST].png" width="auto" height="auto"//>
</a>

</div>

<div id="outcome">

<script language="JavaScript">

function random_imglink(){
var myimages=new Array()

myimages[1]="expose.png"
myimages[2]="inform.png"
myimages[3]="explain.png"
myimages[4]="formulate.png"
myimages[5]="record.png"
myimages[6]="mediate.png"
myimages[7]="design.png"
myimages[8]="persuade.png"
myimages[9]="summarise.png"
myimages[10]="generate.png" 

var ry=Math.floor(Math.random()*myimages.length)
if (ry==0)
ry=1
document.write('<img src="'+myimages[ry]+'" border=0>')
}
random_imglink()

</script> 
```

我已经设法弄清楚如何将随机图像链接到网页，但是我也想知道如何显示另一个图像，如上所述。

```
<a href="javascript:document.location.reload();"
ONMOUSEOVER="window.status='Refresh'; return true">
<img src="Graphic-design-can-[TEST].png" width="auto" height="auto"//>
</a>

</div>

<div id="outcome">

<script language="JavaScript">

function random_imglink(){
var myimages=new Array()
var myurls=new Array()

myimages[1]="expose.png"
myimages[2]="inform.png"
myimages[3]="explain.png"
myimages[4]="formulate.png"
myimages[5]="record.png"
myimages[6]="mediate.png"
myimages[7]="design.png"
myimages[8]="persuade.png"
myimages[9]="summarise.png"
myimages[10]="generate.png" 

myurls[1]="http://google.com"
myurls[2]="http://stackoverflow.com"

var ry=Math.floor(Math.random()*myimages.length)
if (ry==0)
ry=1
document.write('<a href="'+myurls[ry]+'"><img src="'+myimages[ry]+'" border=0 id="someidentification" onClick="'+dosomething()+'") /></a>')
}

random_imglink() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:27:02.543

尝试

```
<a href="javascript:document.location.reload();" ONMOUSEOVER="window.status='Refresh'; return true"><img id="randImage" src="" title="" width="auto" height="auto"/> 
```

```
<script>

   var myimages=new Array()

   myimages[0]="expose1.png"
   myimages[1]="expose.png"
   myimages[2]="inform.png"
   myimages[3]="explain.png"
   myimages[4]="formulate.png"
   myimages[5]="record.png"
   myimages[6]="mediate.png"
   myimages[7]="design.png"
   myimages[8]="persuade.png"
   myimages[9]="summarise.png"
   myimages[10]="generate.png" 

   var rand = myimages[Math.floor(Math.random()*myimages.length)];
   document.getElementById("randImage").src = rand;

   </script> 
```

# java - 声纳 findbugs，是否可以在未编译的文件上运行 findbugs？

> ID：15616813
> 
> 赞同：1
> 
> 时间：2013-03-25T13:59:02.757
> 
> 标签：java, sonarqube, qa, findbugs

我是以下情况。

我正在使用声纳（通过和），当我使用“声纳方式”配置文件时它运行得很好。

我想用 Findbugz 运行“Sonar way with Findbugz”-profile 但我得到一个异常并且它不起作用。

是什么让这变得更加困难 - 不要问为什么不这样做 - 我只有 .java 文件可以使用和很多项目，编译不是一种选择。

有没有办法在未编译的文件上运行 FingBugs？还有其他建议吗？我全是耳朵...

输出：

构建文件：build.xml

```
sonar:
[sonar:sonar] Apache Ant version 1.7.1 compiled on August 24 2010
[sonar:sonar] Sonar Ant Task version: 1.0
[sonar:sonar] Loaded from: file:/usr/share/ant/lib/sonar-ant-task.jar
[sonar:sonar] Sonar work directory: /folder
[sonar:sonar] Sonar server: http://localhost:9000
[sonar:sonar] Sonar version: 3.5
[sonar:sonar] 13:54:34.062 INFO  .s.b.b.BatchSettings - Load batch settings
[sonar:sonar] 13:54:34.114 INFO     o.s.h.c.FileCache - User cache: /home/proj/.sonar/cache
[sonar:sonar] 13:54:34.131 INFO  atchPluginRepository - Install plugins
[sonar:sonar] 13:54:34.696 INFO  .s.b.b.TaskContainer - -------------  Executing Project Scan
[sonar:sonar] 13:54:35.199 INFO  b.b.JdbcDriverHolder - Install JDBC driver
[sonar:sonar] 13:54:35.201 INFO  .b.ProjectExclusions - Apply project exclusions
[sonar:sonar] 13:54:35.205 INFO      o.s.c.p.Database - Create JDBC datasource for jdbc:postgresql://localhost/sonar
[sonar:sonar] 13:54:35.292 INFO  actDatabaseConnector - Initializing Hibernate
[sonar:sonar] 13:54:38.035 INFO  .s.b.s.ScanContainer - -------------  Inspecting proj
[sonar:sonar] 13:54:38.039 INFO  .b.b.ProjectSettings - Load module settings
[sonar:sonar] 13:54:39.021 INFO  .s.b.ProfileProvider - Quality profile : [name=Sonar way with Findbugs,language=java]
[sonar:sonar] 13:54:39.037 INFO  s.f.ExclusionFilters - Excluded tests:
[sonar:sonar] 13:54:39.037 INFO  s.f.ExclusionFilters -   **/package-info.java
[sonar:sonar] 13:54:39.066 INFO  nPluginsConfigurator - Configure Maven plugins
[sonar:sonar] 13:54:39.256 INFO        org.sonar.INFO - Compare to previous analysis (2013-03-25)
[sonar:sonar] 13:54:39.321 INFO        org.sonar.INFO - Compare over 5 days (2013-03-20, analysis of 2013-03-25 09:55:51.594)
[sonar:sonar] 13:54:39.375 INFO        org.sonar.INFO - Compare over 30 days (2013-02-23, analysis of 2013-03-25 09:55:51.594)
[sonar:sonar] 13:54:39.542 INFO  .b.p.SensorsExecutor - Initializer JacocoAntInitializer...
[sonar:sonar] 13:54:39.602 INFO  o.s.p.j.JaCoCoPlugin - JaCoCo agent (version 0.6.2.201302030002) extracted: /tmp/jacocoagent973279373506480907.jar
[sonar:sonar] 13:54:39.602 INFO  .b.p.SensorsExecutor - Initializer JacocoAntInitializer done: 60 ms
[sonar:sonar] 13:54:39.602 INFO  s.f.FileSystemLogger - Base dir: /../..
[sonar:sonar] 13:54:39.602 INFO  s.f.FileSystemLogger - Working dir: /../../usr/local/repository/org/src
[sonar:sonar] 13:54:39.603 INFO  s.f.FileSystemLogger - Source dirs: /usr/local/repository/proj/org/src
[sonar:sonar] 13:54:39.603 INFO  s.f.FileSystemLogger - Binary dirs: /usr/local/repository/proj/org/bin
[sonar:sonar] 13:54:39.603 WARN  s.f.FileSystemLogger - Source encoding is platform dependent (UTF-8), default locale: en_US
[sonar:sonar] 13:54:39.668 INFO  p.PhasesTimeProfiler - Sensor JavaSourceImporter...
[sonar:sonar] 13:54:39.950 INFO  p.PhasesTimeProfiler - Sensor JavaSourceImporter done: 282 ms
[sonar:sonar] 13:54:39.951 INFO  p.PhasesTimeProfiler - Sensor JavaSquidSensor...
[sonar:sonar] 13:54:40.237 INFO    o.s.java.JavaSquid - Java AST scan...
[sonar:sonar] 13:54:42.784 INFO    o.s.java.JavaSquid - Java AST scan done: 2547 ms
[sonar:sonar] 13:54:42.964 INFO  p.PhasesTimeProfiler - Sensor JavaSquidSensor done: 3013 ms
[sonar:sonar] 13:54:42.965 INFO  p.PhasesTimeProfiler - Sensor FindbugsSensor...
[sonar:sonar] 13:54:42.965 INFO        org.sonar.INFO - Execute Findbugs 2.0.1...

BUILD FAILED
org.sonar.api.utils.SonarException: Can not execute Findbugs
        at org.sonar.plugins.findbugs.FindbugsExecutor.execute(FindbugsExecutor.java:149)
        at org.sonar.plugins.findbugs.FindbugsSensor.analyse(FindbugsSensor.java:62)
        at org.sonar.batch.phases.SensorsExecutor.execute(SensorsExecutor.java:70)
        at org.sonar.batch.phases.Phases.execute(Phases.java:101)
        at org.sonar.batch.scan.ScanContainer.doStart(ScanContainer.java:147)
        at org.sonar.batch.bootstrap.Container.start(Container.java:72)
        at org.sonar.batch.scan.ScanTask.scan(ScanTask.java:65)
        at org.sonar.batch.scan.ScanTask.scanRecursively(ScanTask.java:56)
        at org.sonar.batch.scan.ScanTask.execute(ScanTask.java:49)
        at org.sonar.batch.bootstrap.TaskContainer.doStart(TaskContainer.java:188)
        at org.sonar.batch.bootstrap.Container.start(Container.java:72)
        at org.sonar.batch.bootstrap.TaskBootstrapContainer.executeTask(TaskBootstrapContainer.java:73)
        at org.sonar.batch.bootstrap.TaskBootstrapContainer.doStart(TaskBootstrapContainer.java:62)
        at org.sonar.batch.bootstrap.Container.start(Container.java:72)
        at org.sonar.batch.bootstrap.BootstrapContainer.doStart(BootstrapContainer.java:104)
        at org.sonar.batch.bootstrap.Container.start(Container.java:72)
        at org.sonar.batch.Batch.execute(Batch.java:106)
        at org.sonar.ant.Launcher.executeBatch(Launcher.java:121)
        at org.sonar.ant.Launcher.execute(Launcher.java:60)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.sonar.ant.SonarTask.delegateExecution(SonarTask.java:167)
        at org.sonar.ant.SonarTask.execute(SonarTask.java:151)
        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:288)
        at sun.reflect.GeneratedMethodAccessor1.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
        at org.apache.tools.ant.Task.perform(Task.java:348)
        at org.apache.tools.ant.Target.execute(Target.java:357)
        at org.apache.tools.ant.Target.performTasks(Target.java:385)
        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1337)
        at org.apache.tools.ant.Project.executeTarget(Project.java:1306)
        at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
        at org.apache.tools.ant.Project.executeTargets(Project.java:1189)
        at org.apache.tools.ant.Main.runBuild(Main.java:758)
        at org.apache.tools.ant.Main.startAnt(Main.java:217)
        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:257)
        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:104)
Caused by: org.sonar.api.utils.SonarException: Findbugs needs sources to be compiled. Please build project before executing sonar and check the location of compiled classes.
        at org.sonar.plugins.findbugs.FindbugsConfiguration.getFindbugsProject(FindbugsConfiguration.java:84)
        at org.sonar.plugins.findbugs.FindbugsExecutor.execute(FindbugsExecutor.java:107)
        ... 40 more

Total time: 14 seconds 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:09:08.897

不，这是不可能的：Findbugs 依赖字节码来执行其代码分析。所以如果你还没有编译你的代码，你将无法在它上面运行 Findbugs。

# ruby - 用机械化（红宝石）刮图像

> ID：15616815
> 
> 赞同：1
> 
> 时间：2013-03-25T13:59:08.397
> 
> 标签：ruby, image, web-scraping, mechanize, mechanize-ruby

我正在尝试使用机械化从 web_page 保存图像。我使用这段代码：

```
 @current_agent.get( image_url ).save ( save_path ) 
```

错误（我认为我的超时设置有问题）：

```
 I, [2013-03-25T14:42:13.924694 #31865]  INFO -- : Net::HTTP::Get: /i?path=b0312211141_img_id282431557272802821.jpg
    D, [2013-03-25T14:42:13.924757 #31865] DEBUG -- : request-header: accept => */*
    D, [2013-03-25T14:42:13.924828 #31865] DEBUG -- : request-header: user-agent => Mozilla/5.0 (iPad; CPU OS 5_1_1 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/5.1 Mobile/9B206 Safari/7534.48.3
    D, [2013-03-25T14:42:13.924858 #31865] DEBUG -- : request-header: accept-encoding => gzip,deflate,identity
    D, [2013-03-25T14:42:13.924884 #31865] DEBUG -- : request-header: accept-charset => ISO-8859-1,utf-8;q=0.7,*;q=0.7
    D, [2013-03-25T14:42:13.924915 #31865] DEBUG -- : request-header: accept-language => en-us,en;q=0.5
    D, [2013-03-25T14:42:13.924942 #31865] DEBUG -- : request-header: host => mdata.yandex.net
    I, [2013-03-25T14:42:14.151810 #31865]  INFO -- : status: Net::HTTPOK 1.0 200 OK
    D, [2013-03-25T14:42:14.151890 #31865] DEBUG -- : response-header: server => nginx/1.2.1
    D, [2013-03-25T14:42:14.151919 #31865] DEBUG -- : response-header: date => Mon, 25 Mar 2013 13:43:54 GMT
    D, [2013-03-25T14:42:14.151943 #31865] DEBUG -- : response-header: content-type => image/jpeg
    D, [2013-03-25T14:42:14.151967 #31865] DEBUG -- : response-header: content-length => 212187
    D, [2013-03-25T14:42:14.151991 #31865] DEBUG -- : response-header: last-modified => Tue, 12 Mar 2013 18:11:41 GMT
    D, [2013-03-25T14:42:14.152015 #31865] DEBUG -- : response-header: expires => Wed, 24 Apr 2013 13:43:54 GMT
    D, [2013-03-25T14:42:14.152039 #31865] DEBUG -- : response-header: cache-control => max-age=2592000
    D, [2013-03-25T14:42:14.152062 #31865] DEBUG -- : response-header: x-original-host => mdata.somesite.ru
    D, [2013-03-25T14:42:14.152086 #31865] DEBUG -- : response-header: accept-ranges => bytes
    D, [2013-03-25T14:42:14.152109 #31865] DEBUG -- : response-header: x-cache => MISS from parser.myapp.com.ua
    D, [2013-03-25T14:42:14.152133 #31865] DEBUG -- : response-header: x-cache-lookup => MISS from parser.notus.com.ua:1221
    D, [2013-03-25T14:42:14.152157 #31865] DEBUG -- : response-header: via => 1.0 parser.myapp.com.ua (squid/3.1.10)
    D, [2013-03-25T14:42:14.152180 #31865] DEBUG -- : response-header: connection => keep-alive
    D, [2013-03-25T14:42:14.152464 #31865] DEBUG -- : Read 2521 bytes (2521 total)
    D, [2013-03-25T14:42:14.152509 #31865] DEBUG -- : Read 598 bytes (3119 total)
    D, [2013-03-25T14:42:14.199787 #31865] DEBUG -- : Read 1448 bytes (6613 total)
    D, [2013-03-25T14:42:14.199887 #31865] DEBUG -- : Read 2648 bytes (9261 total)
    D, [2013-03-25T14:42:14.200125 #31865] DEBUG -- : Read 2896 bytes (12157 total)
    D, [2013-03-25T14:42:14.200286 #31865] DEBUG -- : Read 1200 bytes (13357 total)
    D, [2013-03-25T14:42:14.248204 #31865] DEBUG -- : Read 2896 bytes (16253 total)
    D, [2013-03-25T14:42:14.248436 #31865] DEBUG -- : Read 1200 bytes (17453 total)
    D, [2013-03-25T14:42:14.248510 #31865] DEBUG -- : Read 1448 bytes (18901 total)
    D, [2013-03-25T14:42:14.248609 #31865] DEBUG -- : Read 2648 bytes (21549 total)
    D, [2013-03-25T14:42:14.248864 #31865] DEBUG -- : Read 2896 bytes (24445 total)
    D, [2013-03-25T14:42:14.248985 #31865] DEBUG -- : Read 1200 bytes (25645 total)
    D, [2013-03-25T14:42:14.249174 #31865] DEBUG -- : Read 1448 bytes (27093 total)
    D, [2013-03-25T14:42:14.249354 #31865] DEBUG -- : Read 2648 bytes (29741 total)
    D, [2013-03-25T14:42:14.296443 #31865] DEBUG -- : Read 1448 bytes (31189 total)
    D, [2013-03-25T14:42:14.296583 #31865] DEBUG -- : Read 2648 bytes (33837 total)
    D, [2013-03-25T14:42:14.296756 #31865] DEBUG -- : Read 1448 bytes (35285 total) 
```

我看到它开始抓取图像，“读取 2896 个字节（总共 12157 个）”并在之后冻结！！！解析图像不完整，图像未保存:(

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:31:33.203

您可以通过以下方式设置代理的超时（读取和连接）：

```
@current_agent.open_timeout = 10 # in seconds
@current_agent.read_timeout = 10 # in seconds 
```

# iphone - 我可以通过给某人发短信向我的应用程序发送 URL Scheme 吗？

> ID：15616824
> 
> 赞同：1
> 
> 时间：2013-03-25T13:59:27.180
> 
> 标签：iphone, ios, objective-c, sms

基本上问题是我的应用程序有一些非常具体的服务器设置，这些设置会从商店位置更改为商店位置。

而不是我通过电话告诉客户将他们的电话设置为什么。

服务器 IP： 用户名： 密码： 服务 IP：

等等

我希望能够使用 URL 方案向他们的 iDevice 发送短信，他们将点击该方案并自动激活我的应用程序。

我可以发送这样的消息吗？

“显然我需要 30 个字符 :P 才能发帖……”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:14:44.590

这很简单。我认为您要实现的是Apple所谓的“自定义URL方案”

您可以在第 122 页的 Apple 文档中找到[它](http://developer.apple.com/library/ios/documentation/iphone/conceptual/iphoneosprogrammingguide/iPhoneAppProgrammingGuide.pdf)。

首先，您的应用程序在安装时向系统注册，告诉它您将处理此 URL 方案，例如“myapp://”

然后，您只需将其发送给您的客户。

# sql - 等效于 Microsoft SQL 服务器的 MySQL 查询日志

> ID：15616825
> 
> 赞同：0
> 
> 时间：2013-03-25T13:59:31.447
> 
> 标签：sql, sql-server, hibernate, jpa

MySQL 可以选择记录对数据库执行的查询。通过使用 SQL Server Profiler，Microsoft SQL Server 具有相同的选项。但是，我使用 JPA (Hibernate) 作为 ORM 工具，我可以看到查询已转换为存储过程。

我可以看到很多以下行：

```
exec sp_execute 6, 8
exec sp_execute 7, 8
exec sp_execute 4, 8 
```

...这使得调试 SQL 语句变得困难（因为我必须寻找相应的存储过程）

知道如何快速查看真正的 SQL 查询吗？

谢谢！约臣

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:32:02.597

您可以使用 DMV 查看最近运行的查询，这将为您提供最近一天执行的查询，我认为这也应该为您提供有关查询文本的更多详细信息：

```
SELECT        SQLTEXT.text, STATS.last_execution_time
FROM          sys.dm_exec_query_stats STATS
CROSS APPLY   sys.dm_exec_sql_text(STATS.sql_handle) AS SQLTEXT
WHERE         STATS.last_execution_time > GETDATE()-1
ORDER BY      STATS.last_execution_time DESC 
```

您显然可以更改 where 子句以获取您感兴趣的日期范围。

# php - VIES VAT api SOAP 错误 ipv6

> ID：15616833
> 
> 赞同：1
> 
> 时间：2013-03-25T13:59:56.170
> 
> 标签：php, soap, ipv6

这是我遇到的服务器设置/问题：

*   SOAP 已安装并在服务器上运行
*   使用 PHP SOAP 扩展 ( `new SoapClient(self::VAT_VALIDATION_WSDL_URL)`) 进行调用
*   我使用的 WSDL URL 是：http: [//ec.europa.eu/taxation_customs/vies/services/checkVatService ?wsdl](http://ec.europa.eu/taxation_customs/vies/services/checkVatService?wsdl)
*   相同的代码可以在大多数其他机器上运行，但不能在当前机器上运行
*   SOAP响应是`request_success => bool(false)`，所以请求没有成功
*   例如，尝试使用 telnet 连接到 url 会导致 503 内部服务器错误，而从其他计算机会导致 502 Permission Denied。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T13:59:56.170

这里的问题很难追踪，但很容易解决。

**ec.europa.eu**接受**IPv6**请求，并使用 IPv6 响应它们。问题是并非所有服务都可以在 IPv6 上正常工作。因此，如果您的服务器同时使用 IPv4 和 IPv6，它会更喜欢使用 IPv6，因此 SOAP 请求将失败。

例如：

```
WKT-03:~$ ping6 ec.europa.eu #not working
connect: Network is unreachable

WKT-03:~$ ping ec.europa.eu #working
PING ec.europa.eu (147.67.136.103) 56(84) bytes of data. 
```

**解决方案：**

有两种解决方案，要么[在服务器上禁用 ipv6](http://www.cyberciti.biz/tips/linux-how-to-disable-the-ipv6-protocol.html) ，要么在其中添加新规则`/etc/hosts`：

```
147.67.136.103 ec.europa.eu # when/if IP changes, this stops working 
```

从而迫使它使用 IPv4。两者都不是很优雅，但这应该可以在 API 与 IPv6 完全兼容之前工作。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-06-12T13:10:55.973

SoapClient 有一个`stream_context`选项。

1.  以您的 IPV4 接口为目标`stream_context`进行创建`bindto`
2.  在 SoapClient 中使用此上下文。

例子：

```
$opts = array(
    'socket' => array(
        'bindto' => 'IP4_ADDRESS_OF_YOUR_SERVER:0'
    )
);
$context = stream_context_create($opts);
$client = new SoapClient(self::VAT_VALIDATION_WSDL_URL,
    array(
        'stream_context' => $context
    )
); 
```

# php - phpmailer - 附加大文件

> ID：15616835
> 
> 赞同：1
> 
> 时间：2013-03-25T13:59:56.810
> 
> 标签：php, phpmailer

我使用 phpmailer 发送一个大约 5M 的大附件，但它失败了。这是消息。

致命错误：第 580 行的 F:\wamp\www\mail\class.smtp.php 中超过了 30 秒的最大执行时间

时间记忆功能位置

1 0.0010 146208 { 主要 }( ) ..\mail.php:0

2 0.0121 533592 smtp_mail() ..\mail.php:65

3 0.0126 539672 PHPMailer->Send() ..\mail.php:53

4 0.0928 7303432 PHPMailer->PostSend( ) ..\class.phpmailer.php:763

5 0.0929 7303600 PHPMailer->SmtpSend() ..\class.phpmailer.php:845

6 0.3744 14189928 SMTP->数据（）..\class.phpmailer.php:1023

我该如何解决这个问题？我想发送一个大附件？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T14:06:01.620

您需要指定更长的 set_time_limit 值。默认值为 30 秒。如果您的脚本的执行时间比这更长才能完成，您将收到该错误。更多信息在这里：

[http://php.net/manual/en/function.set-time-limit.php](http://php.net/manual/en/function.set-time-limit.php)

# javascript - 如何在 Chrome 中以编程方式切换 Zurb Foundation 开关控制？

> ID：15616836
> 
> 赞同：7
> 
> 时间：2013-03-25T13:59:57.543
> 
> 标签：javascript, css, zurb-foundation

我想使用 javascript 动态切换 Zurb Foundation Switch 控件的状态。

这是默认的 Zurb Fondation Switch：

```
<!-- Default switch --> 
<div class="switch">   
  <input id="d" name="switch-d" type="radio" checked>   
  <label for="d" onclick="">Off</label>

  <input id="d1" name="switch-d" type="radio">
  <label for="d1" onclick="">On</label>

  <span></span>
</div> 
```

演示[在这里](http://foundation.zurb.com/docs/components/switch.html)。我相信他们是基于[这个项目的。](http://ghinda.net/css-toggle-switches/)

当我尝试使用 jquery 更改开关的状态时：

```
$('#d1').attr('checked','checked'); $('#d').removeAttr('checked'); // Switch ON
$('#d').attr('checked','checked'); $('#d1').removeAttr('checked'); // Switch OFF 
```

它在 Firefox 中有效，但在 Chrome 中无效。在 Chrome [OSX10.8.3 上的 v25] 中，第一个命令 - Switch ON - 是成功的，但是当我尝试使用时`$('#d').attr('checked','checked'); $('#d1').removeAttr('checked');`，看起来 CSS 没有正确地拾取正在检查的元素并且显示停止 - 看看最后一个下图中的开关未正确显示**关闭状态**。

![在此处输入图像描述](../Images/cc08451762c63141492e4ecb38ec4b6e.png)

您可以在 Zurb Foundation 文档的[Switch 页面](http://foundation.zurb.com/docs/components/switch.html)上测试这些命令；`d`指您在页面顶部列表中看到的第四个也是最大的开关。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T14:28:34.873

可以直接在元素上调用click函数。

```
$("#d1").click(); // Switch ON 
```

您将遇到的问题是元素的 ID 发生了变化，因此它会稍微复杂一些，您可以使用更智能的选择器来获取元素。元素状态更改后，您会注意到 ID 已更改为：

```
$("#d").click(); // Switch OFF 
```

现在，这会将您切换回关闭状态。

干杯奥利弗。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-08T16:16:04.233

或者，如果您对模拟点击感到不舒服，您可以使用 jQuery 的[#prop](http://api.jquery.com/prop/)代替。

```
$('input:not([checked])').prop('checked', true);
$('input[checked]').prop('checked', false); 
```

可能的用例：在单击时触发的 AJAX 调用的错误处理程序中。

# windows - WMI ping 失败（0x80041001 - 一般错误）

> ID：15616839
> 
> 赞同：1
> 
> 时间：2013-03-25T14:00:02.793
> 
> 标签：windows, wmi, ping

我有一个使用 WMI 执行多项任务的应用程序，其中之一是 ping 远程计算机。对于 ping，我使用以下查询：

```
SELECT * FROM Win32_PingStatus WHERE Address='192.168.0.1' AND Timeout=3000 AND StatusCode=0 
```

在几个系统上，这完全正确。但在某些机器上，此查询返回 0x80041001 -“通用 WMI 错误”。当我使用 wbemtest.exe 手动执行此查询时，我收到相同的错误和以下“描述”：

> 发送回显失败，IcmpSendEcho2 失败。

此错误的原因可能是什么，如何解决？

# c# - 如何通过 .GetType() 获取类常量

> ID：15616845
> 
> 赞同：0
> 
> 时间：2013-03-25T14:00:18.170
> 
> 标签：c#, oop

我会尽力解释。我有 3 个课程：EnemyTeleport、EnemyZigZag、EnemyNormal。它们都继承基类 Enemy。这 3 个类中的每一个都有自己的 const -> KillPoints。

所以在其他班级。例如Form Class，我需要获取这些常量。这些 EnemyTeleport、EnemyZigZag、EnemyNormal 位于`public Enemy EnemyInstance;` 例如

```
EnemyInstance = new EnemyTeleport(); 
```

那么如何从 EnemInstance 中获得击杀点数呢？我不想检查每个可能的变体？

有更聪明的方法吗？

喜欢`EnemInstance.GetType().KillPoints`（不起作用）

再次。EnemyInstance 是持有 EnemyTeleport 的 Enemy 类型。常量保持在 EnemyTeleport

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T14:03:49.883

为什么不使用 KillPoints 的属性扩展您的基类 Enemy。在继承类的构造函数中，您可以将 KillPoints 设置为某个敌人的特定值

但是，如果您不想将其放入基类中：

将 KillPoints 作为某个 Enemy 中的属性，例如：

```
public class TeleportEnemy : Enemy
{
   public int KillPoints{get;private set;}
   public TeleportEnemy()
   {
      this.KillPoints = 666;
   }
} 
```

通过 Enemy 实例访问 Killpoint 的代码如下所示：

```
Enemy enemy = new TeleportEnemy();
        PropertyInfo propertyInfo = enemy.GetType().GetProperty("KillPoints");
        int value = (int)propertyInfo.GetValue(enemy, null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T14:09:37.953

我建议你使用

```
public abstract class Enemy
{
   public abstract List<int> KillPoints;
} 
```

为每个特定的类定义值`KillPoints`（您可以使用 TemplateMethod 模式来计算您的 KillPoints）

链接： http: [//www.dofactory.com/Patterns/PatternTemplate.aspx](http://www.dofactory.com/Patterns/PatternTemplate.aspx)

但是在您的 Main 您使用基类 Enemy 为您的服务

所以 ：

```
Enemy enemy = new EnemyTeleport();
var result = enemy.KillPoints; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T14:05:02.597

您的层次结构可以定义如下。注意`Enemy`类是抽象的，而具体的敌人实现属性`KillPoints`。你的主要实现只需要知道抽象类`Enemy`，而具体的实现应该在其他地方创建，这取决于你游戏中的一些标志。

```
public abstract class Enemy
{
    public abstract int KillPoints {get;}
}

public class EnemyTeleport : Enemy
{
    public override int KillPoints
    {
        get{return 6;}
    }
}

public class EnemyZigZag : Enemy
{
    public override int KillPoints
    {
        get{return 10;}
    }
} 
```

现在您可以利用多态调用 `KillPoints`

```
private Enemy EnemyInstance;

void Main()
{
    EnemyInstance = new EnemyTeleport();

    Console.WriteLine(EnemyInstance.KillPoints);
} 
```

# java - 关闭对话框后 GWT 按钮保持禁用状态

> ID：15616846
> 
> 赞同：1
> 
> 时间：2013-03-25T14:00:21.987
> 
> 标签：java, gwt

我有一个用我的按钮来装饰用户 ClickHandler 的按钮，它控制按钮状态 -> 在单击时禁用它以防止多次单击。当用户单击它时 - 打开相应的 DialogBox 并禁用按钮。这是我的按钮：

```
public class MyButton extends Button {
    private boolean isButtonClicked = false;
    private ClickHandler clickHandler;

    public MyButton(String html) {
        this(html, null);
    }

    public MyButton(String html, final ClickHandler handler) {
        super(html);
        addClickHandler(handler);
    }

    public HandlerRegistration addClickHandler(final ClickHandler handler) {
        clickHandler = handler;

        ClickHandler ch = new ClickHandler() {
            @Override
            public void onClick(ClickEvent event) {
                if(!isButtonClicked) {
                    isButtonClicked = true;
                    setEnabled(false);
                    clickHandler.onClick(event); //Here is a click handler initiated on fly
                }
            }
        };
        return super.addClickHandler(ch);
    }
} 
```

这就是它的使用方式：

```
public TestClass {
    protected OneClickButton button = new OneClickButton("Test Button);

    //...

    button.addClickHandler(new ClickHandler() {
            @Override
            public void onClick(ClickEvent event) {
                SomeDialogWindow dialog = new SomeDialogWindow(/*args*/);
                dialog.center();
            }
        });
} 
```

当我单击一个按钮时，它会被禁用并出现对话框。但是当我关闭对话框时，我的按钮仍然处于禁用状态。如何在对话框关闭时重新启用按钮？为了实现这一目标，我应该在哪里处理什么事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:10:58.593

如果您的 SomeDialogWindow 扩展 DIAlogBox..您可以这样做

```
dialog.addCloseHandler(new CloseHandler<PopupPanel>() {
public void onClose(com.google.gwt.event.logical.shared.CloseEvent<PopupPanel> event) {
             yourbutton.setEnabled(true);           

                            };
                        }); 
```

# asp.net-mvc-4 - 如何从mvc中的数据库生成菜单

> ID：15616854
> 
> 赞同：1
> 
> 时间：2013-03-25T14:00:38.967
> 
> 标签：asp.net-mvc-4, html-helper

我正在尝试从我的 SQL 数据库中生成一个嵌套的无序列表。我使用递归方法来嵌套数据。我应该将我的逻辑放在单独的 htmlhelper 中，还是应该使用调用子操作方法的 Html.RenderAction？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:34:48.573

评估我将使用的两个选项`Html.RenderAction`，如果您使用 an`htmlhelper`您必须找到一种方法将该菜单模型传递给您的所有视图以便`htmlhelper`可以呈现 html，您将需要使用`ActionFilter`and `ViewData`/`ViewBag`来传递模型。

有了`Html.RenderAction`控制器可以使用自己的模型来处理工作，因此您不必处理复杂的模型或`ViewData`/`ViewBag`对象和铸件，您还可以获得缓存`[OutputCache]`和控制的好处`[ChildActionOnly]`。

# javascript - 使用jquery时下拉选择索引不触发

> ID：15616855
> 
> 赞同：0
> 
> 时间：2013-03-25T14:00:38.990
> 
> 标签：javascript, jquery, asp.net, css, drop-down-menu

我已经使用 jquery 来使我的下拉列表生效，但是在插入 jquery 后，我无法使 selectedindexed 更改的函数正常工作。但是当我删除 jquery 时，一切似乎都工作正常。

另一件事，在下拉列表中应用 jquery 后，下拉列表中的所有项目都显示为列表项“li”而不是选项。

我也尝试过使用 javascript 函数，但是每当我在下拉列表中使用 jquery 时都会发生同样的情况。

代码如下：

```
<asp:DropDownList ID="DropDownProducts" Width="150px" CssClass="RegistryDrop" 
     runat="server" AutoPostBack="True" OnDataBinding="dropprodsbinding"
     OnSelectedIndexChanged="DropDownProducts_SelectedIndexChanged" 
     DataTextField="Name" AppendDataBoundItems="True"
     DataValueField="id">
</asp:DropDownList> 
```

代码背后的代码在这里：

```
function getSelectOptions(parentid) {
   var select_options = new Array();
    var ul = document.createElement('ul');
    $select.children('option').each(function () {
        var li = document.createElement('li');
        li.setAttribute('id', parentid + '_' + $(this).val());
        li.innerHTML = $(this).html();
        if ($(this).is(':selected')) {
            $input.val($(this).html());
            $(li).addClass(opt.currentClass);
        }
        ul.appendChild(li);
        $(li)
        .mouseover(function (event) {
            hasfocus = 1;
            if (opt.debug) console.log('over on : ' + this.id);
            jQuery(event.target, $container).addClass(opt.hoverClass);
        })
        .mouseout(function (event) {
            hasfocus = -1;
            if (opt.debug) console.log('out on : ' + this.id);
            jQuery(event.target, $container).removeClass(opt.hoverClass);
        })
        .click(function (event) {
            var fl = $('li.' + opt.hoverClass, $container).get(0);
            if (opt.debug) console.log('click on :' + this.id);
            $('li.' + opt.currentClass).removeClass(opt.currentClass);
            $(this).addClass(opt.currentClass);
            setCurrent();
            hideMe();
        });
    });
    return ul;
} 
```

希望得到一些解决方案。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:32:56.153

您的 javascript/jquery 代码正在将下拉列表转换为客户端浏览器中的无序列表。发生该转换后，ASP.net 控件在下拉列表中的任何挂钩都不再存在，因为下拉列表已替换为`ul`结构。

最终，所有回发操作都是由 ASP.Net 嵌入到`<select`html 元素中的 javascript 代码发生的。因此，当您替换该元素时，不会调用任何这些操作。

理论上，您应该能够使用客户端分析（Chrome 开发人员工具或 Firebug）来识别这些附件是什么，以查看`<select`在您的页面的非 jquery 版本中附加了哪些函数/事件。一旦您确定了这些事件，您可以将它们作为函数存储在 javascript 中，并将它们附加到`<ul`jquery 替换的结构上的事件`<select`。

您必须自己进行一些分析才能确定发生了什么，但它可能很简单（与您的实际和元素相关联的标识符的位置和位置）`mySelect`：`myUL``select``ul`

```
var functionToExec = $('#mySelect').click;
$('#myUL').children.each.click = functionToExec; 
```

# asp.net - 找不到合适的文件

> ID：15616856
> 
> 赞同：0
> 
> 时间：2013-03-25T14:00:39.433
> 
> 标签：asp.net, image

我尝试使用 Image，但我得到了这个折叠，我不知道为什么。
图片位于项目的根目录中。
我也试过这个：
.FromFile("~/aPicture.jpg");
.FromFile("../aPicture.jpg");

![在此处输入图像描述](../Images/c95909781ef91e3063084ba5acbf3757.png)

任何人的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:04:53.827

```
Server.MapPath ( "~/aPicture.Jpg"); should give you correct path for file. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T14:05:21.993

iis 的当前目录是运行 iis 的目录。您应该使用 Server.MapPath 将您的 ~/aPicture.jpg 映射到您的站点目录：

```
.FromFile(Server.MapPath("~/aPicture.jpg")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T14:03:13.547

`/`将带您回到项目的基本文件夹

# algorithm - 任何更快的算法来计算除数的数量

> ID：15616862
> 
> 赞同：0
> 
> 时间：2013-03-25T14:00:59.740
> 
> 标签：algorithm, math, optimization

F系列定义为

```
F(0) = 1

F(1) = 1

F(i) = i * F(i - 1) * F(i - 2)  for i > 1 
```

任务是找到 F(i) 的不同除数的数量

这个问题来自[Timus](http://acm.timus.ru/problem.aspx?space=1&num=1860)。我尝试了以下 Python，但它肯定会超出时间限制。这种蛮力方法不适用于大输入，因为它也会导致整数溢出。

```
#!/usr/bin/env python

from math import sqrt
n = int(raw_input())

def f(n):
    global arr
    if n == 0:
        return 1
    if n == 1:
        return 1
    a = 1
    b = 1
    for i in xrange(2, n + 1):
        k = i * a * b
        a = b
        b = k
    return b

x = f(n)
cnt = 0
for i in xrange(1, int(sqrt(x)) + 1):
    if x % i == 0:
        if x / i == i:
            cnt += 1
        else:
            cnt += 2
print cnt 
```

有什么优化吗？

**编辑** 我已经尝试过这个建议，并重写了解决方案：（不直接存储 F(n) 值，而是一个因素列表）

```
#!/usr/bin/env python

#from math import sqrt

T = 10000
primes = range(T)

primes[0] = False
primes[1] = False
primes[2] = True
primes[3] = True

for i in xrange(T):
    if primes[i]:
        j = i + i
        while j < T:
            primes[j] = False
            j += i

p = []
for i in xrange(T):
    if primes[i]:
        p.append(i)

n = int(raw_input())

def f(n):
    global p
    if n == 1:
        return 1
    a = dict()
    b = dict()
    for i in xrange(2, n + 1):
        c = a.copy()
        for y in b.iterkeys():
            if c.has_key(y):
                c[y] += b[y]
            else:
                c[y] = b[y]
        k = i
        for y in p:
            d = 0
            if k % y == 0:
                while k % y == 0:
                    k /= y
                    d += 1
                if c.has_key(y):
                    c[y] += d
                else:
                    c[y] = d
                if k < y: break
        a = b
        b = c
    k = 1
    for i in b.iterkeys():
        k = k * (b[i] + 1) % (1000000007)
    return k

print f(n) 
```

而且它仍然给出了 TL5，速度不够快，但这解决了值 F(n) 的溢出问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T14:16:29.763

首先看[这篇关于除数函数的维基百科文章](http://en.wikipedia.org/wiki/Divisor_function)。简而言之，如果你有一个数字并且你知道它的质因数，你可以很容易地计算出除数的数量（让 SO 做 TeX 数学）：

```
$n = \prod_{i=1}^r p_i^{a_i}$

$\sigma_x(n) = \prod_{i=1}^{r} \frac{p_{i}^{(a_{i}+1)x}-1}{p_{i}^x-1}$ 
```

无论如何，这是一个简单的功能。

现在，要解决您的问题，不要将其保留`F(n)`为数字本身，而是将其保留为一组素因子和指数大小。然后，计算函数`F(n)`只需将 和 的两个集合取`F(n-1)`和`F(n-2)`，将两个集合中相同素因子的指数相加（假设不存在的因子为零），并另外添加素因子集合和数字 的指数大小`i`。这意味着您需要另一个简单的¹函数来找到 的主要因素`i`。

以这种方式计算`F(n)`，您只需将上述公式（取自维基百科）应用于集合，这就是您的价值。另请注意，它`F(n)`可以很快变得非常大。该解决方案还避免了使用大数库（因为没有素因数或其指数可能超过 40 亿²）。

* * *

¹当然，对于任意大`i`，这不是那么简单，否则我们现在不会有任何形式的安全性，但是对于您的应用程序来说它应该足够简单。

²可能吧。如果你碰巧找到了一个简单的公式来回答你的问题 any `n`，那么`n`在测试用例中也可以使用大的 s ，对于这种情况，该算法可能会超出时间限制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T02:54:02.617

这是一个有趣的问题。

`F(n)`生长极快。毕竟`F(n) <= F(n+1)`，`n`我们有

```
F(n+2) > F(n)² 
```

对所有人`n`，因此

```
F(n) > 2^(2^(n/2-1)) 
```

为`n > 2`. 这个粗略的估计已经表明，除了最小的数字之外，不能存储这些数字`n`。这样就`F(100)`需要多于`(2^49)`位的存储空间，而 128 GB 只是`2^40`位。实际上，质因数分解`F(100)`是

```
*Fiborial> fiborials !! 100
[(2,464855623252387472061),(3,184754360086075580988),(5,56806012190322167100)
,(7,20444417903078359662),(11,2894612619136622614),(13,1102203323977318975)
,(17,160545601976374531),(19,61312348893415199),(23,8944533909832252),(29,498454445374078)
,(31,190392553955142),(37,10610210054141),(41,1548008760101),(43,591286730489)
,(47,86267571285),(53,4807526976),(59,267914296),(61,102334155),(67,5702887),(71,832040)
,(73,317811),(79,17711),(83,2584),(89,144),(97,3)] 
```

这将需要大约`9.6 * 10^20`（大约`2^70`）位 - 其中不到一半是尾随零，但即使将数字存储为带有有效数字和指数的浮点数也不足以降低所需的存储空间。

因此，与其存储数字本身，不如考虑素数分解。这也允许更容易计算除数的数量，因为

```
 k                    k
divisors(n) = ∏ (e_i + 1)  if  n = ∏ p_i^e_i
             i=1                  i=1 
```

现在，让我们研究`F(n)`一点的素因数分解。我们从

**引理：**素数`p`除`F(n)`当且仅当`p <= n`。

这很容易通过归纳证明：`F(0) = F(1) = 1`不能被任何素数整除，也没有素数`<= 1`。

现在假设`n > 1`和

```
A(k) = The prime factors of F(k) are exactly the primes <= k 
```

为`k < n`. 那么，由于

```
F(n) = n * F(n-1) * F(n-2) 
```

的集合素因数`F(n)`是 和 的素因数集合的`n`并`F(n-1)`集`F(n-2)`。

根据归纳假设，质因数的集合`F(k)`是

```
P(k) = { p | 1 < p <= k, p prime } 
```

为`k < n`. 现在，如果`n`是复合的，则 的所有素因数`n`都小于`n`，因此 的素因数集`F(n)`是`P(n-1)`，但由于`n`不是素数，`P(n) = P(n-1)`。另一方面，如果`n`是素数，则素因数的集合`F(n)`是

```
P(n-1) ∪ {n} = P(n) 
```

有了这个，让我们看看一次跟踪素数分解需要多少工作`F(n)`，并更新每个的列表/字典`n`（我忽略了找到分解的问题`n`，这对于所涉及的小问题来说并不需要很长时间`n`） .

素数的条目`p`首先出现 为`n = p`，然后为每个进一步更新`n`，总共创建/更新`N - p + 1`时间 为`F(N)`。因此有

```
 ∑   (N + 1 - p) = π(N)*(N+1) -  ∑ p ≈ N²/(2*log N)
p <= N                          p <= N 
```

总共更新。对于`N = 10^6`，关于`3.6 * 10^10`更新，这远远超出了允许的时间（0.5 秒）内可以完成的工作。

所以我们需要一种不同的方法。让我们单独看一个素数`p`，并遵循 中的`p`指数`F(n)`。

设是的素因数分解中`v_p(k)`的指数。然后我们有`p``k`

```
v_p(F(n)) = v_p(n) + v_p(F(n-1)) + v_p(F(n-2)) 
```

我们知道`v_p(F(k)) = 0`。`k < p`所以（假设`p`不是太小而无法理解发生了什么）：

```
v_p(F(n))     = v_p(n) +   v_p(F(n-1))  +   v_p(F(n-2))
v_p(F(p))     =   1    +       0        +       0        =  1
v_p(F(p+1))   =   0    +       1        +       0        =  1
v_p(F(p+2))   =   0    +       1        +       1        =  2
v_p(F(p+3))   =   0    +       2        +       1        =  3
v_p(F(p+4))   =   0    +       3        +       2        =  5
v_p(F(p+5))   =   0    +       5        +       3        =  8 
```

所以我们得到了指数的斐波那契数，`v_p(F(p+k)) = Fib(k+1)`- 有一段时间，因为后来的倍数`p`注入了 的进一步幂`p`，

```
v_p(F(2*p-1)) =   0    +     Fib(p-1)   +     Fib(p-2)   =     Fib(p)
v_p(F(2*p))   =   1    +     Fib(p)     +     Fib(p-1)   = 1 + Fib(p+1)
v_p(F(2*p+1)) =   0    + (1 + Fib(p+1)) +     Fib(p)     = 1 + Fib(p+2)
v_p(F(2*p+2)) =   0    + (1 + Fib(p+2)) + (1 + Fib(p+1)) = 2 + Fib(p+3)
v_p(F(2*p+3)) =   0    + (2 + Fib(p+3)) + (1 + Fib(p+2)) = 3 + Fib(p+4) 
```

但额外的权力`2*p`也遵循一个很好的斐波那契模式，我们`v_p(F(2*p+k)) = Fib(p+k+1) + Fib(k+1)`有`0 <= k < p`.

对于 的进一步倍数`p`，我们在指数中得到另一个斐波那契和，所以

```
 n/p
v_p(F(n)) =  ∑ Fib(n + 1 - k*p)
            k=1 
```

-- 直到`n >= p²`，因为指数的倍数`p²`贡献了 2，并且相应的被加数必须乘以 2；的倍数`p³`，乘以 3 等。

还可以拆分 的高次幂的倍数的贡献`p`，因此由于它是 的倍数，因此会得到一个斐波那契和数`p`，一个是 的倍数`p²`，一个是 的倍数，`p³`等等，产生

```
 n/p                    n/p²                    n/p³
v_p(F(n)) =    ∑ Fib(n + 1 - k*p)  +  ∑ Fib(n + 1 - k*p²)  +  ∑ Fib(n + 1 - k*p³)  + ...
              k=1                    k=1                     k=1 
```

现在，特别是对于较小的素数，这些和有很多项，以这种方式计算它们会很慢。幸运的是，斐波那契数的总和有一个封闭公式，其指数是算术级数，对于`0 < a <= s`

```
 m
 ∑ Fib(a + k*s) = (Fib(a + (m+1)*s) - (-1)^s * Fib(a + m*s) - (-1)^a * Fib(s - a) - Fib(a)) / D(s)
k=0 
```

在哪里

```
D(s) = Luc(s) - 1 - (-1)^s 
```

并且`Luc(k)`是第`k`-个卢卡斯数，`Luc(k) = Fib(k+1) + Fib(k-1)`。

出于我们的目的，我们只需要 Fibonacci 数模`10^9 + 7`，然后除法必须用与 的模逆的乘法来代替`D(s)`。

使用这些事实，可以在允许的时间内（在我的旧 32 位机器上大约 0.06 秒）计算`F(n)`模数的除数，尽管在测试机器上使用 Python，可能需要进一步优化。`10^9+7``n <= 10^6`

# android - 致命错误 - 空指针异常

> ID：15616864
> 
> 赞同：1
> 
> 时间：2013-03-25T14:01:07.950
> 
> 标签：android, exception, pointers, null

我得到一个空指针错误，我找不到它有什么问题。这是活动代码

```
 package ie.gmit.gmitapp;

 import android.os.Bundle;

 import android.app.ListActivity;
 import android.content.Context;

 import android.view.View;
 import android.view.ViewGroup;
 import android.widget.BaseAdapter;
 import android.widget.LinearLayout;
 import android.widget.ListView;
 import android.widget.TextView;

 public class BusinessActivity extends ListActivity {

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.activity_bussiness);

    //use our own list adapter
     setListAdapter(new BusinessListAdapter(this));
}

protected void onListItemClick(ListView l, View v, int position, long id) 
{    
   ((BusinessListAdapter)getListAdapter()).toggle(position);
}

  /**
 * A sample ListAdapter that presents content
 * from arrays of text and titles.
 *
 */
private class BusinessListAdapter extends BaseAdapter {
    public  BusinessListAdapter(Context context)
    {
        mContext = context;
    }
    /**
     * The number of items in the list is determined by the number of speeches
     * in our array.
     * 
     * @see android.widget.ListAdapter#getCount()
     */
    public int getCount() {
        return mTitles.length;
    }

    /**
     * Since the data comes from an array, just returning
     * the index is sufficent to get at the data. If we
     * were using a more complex data structure, we
     * would return whatever object represents one 
     * row in the list.
     * 
     * @see android.widget.ListAdapter#getItem(int)
     */
    public Object getItem(int position) {
        return position;
    }

    /**
     * Use the array index as a unique id.
     * @see android.widget.ListAdapter#getItemId(int)
     */
    public long getItemId(int position) {
        return position;
    }

    /**
     * Make a DescriptionView to hold each row.
     * @see android.widget.ListAdapter#getView(int, android.view.View, android.view.ViewGroup)
     */
    public View getView(int position, View convertView, ViewGroup parent) {
        DescriptionView dv;
        if (convertView == null) {
            dv = new DescriptionView(mContext, mTitles[position], mDescription[position], mExpanded[position]);
        } else {
            dv = (DescriptionView)convertView;
            dv.setTitle(mTitles[position]);
            dv.setDescription(mDescription[position]);
            dv.setExpanded(mExpanded[position]);
        }

        return dv;
    }

    public void toggle(int position) {
        mExpanded[position] = !mExpanded[position];
        notifyDataSetChanged();
    }

    /**
     * Remember our context so we can use it when constructing views.
     */
    private Context mContext;

    /**
     * Our data, part 1.
     */
    private String[] mTitles = 
    {
                "Bachelor of Business",   
                "Bachelor of Business (Honours)"

    };

    private String[] mDescription =
    {
        "This programme provides you with a broadly-based business education" +
        " to assist you to work successfully in business. You will study a variety " +
        "of business subjects and develop a general understandng of the administrative, " +
        "economics, legal, and social environment within which business operates.  You will " +
        "study the basics of business and get an insight into many business disciplines" +
        " in years one and two. In year three you can specialise in Marketing, Human" +
        " Resource Management, or Information Systems Management. There is a strong " +
        "emphasis during the programme on practical business projects to develop the" +
        "skills required by graduates in the workplace. (Students may apply to the" +
        " Registrar for a Higher Certificate in Business after successfully completing " +
        "two years of the programme.)",

        "The School of Business offers a four-year honours degree (Level 8) in Business. " +
        "This programme provides students with a broad-based business education to work" +
        " successfully in business and offers students the opportunity to specialise in one " +
        "of five streams. You will study a variety of business subjects and develop a general" +
        " understanding of the administrative, economic, legal and social environment within" +
        " which business operates. You will study the basics of business and get an insight" +
        " into many business disciplines in years one and two. In year three you can specialise " +
        "in marketing, human resource management or information systems management. In year four " +
        "you can specialise in economics and finance, human resource management, management," +
        " marketing or rural enterprise and agri-business. There is a strong emphasis on the" +
        " current business environment and acquiring the skills and knowledge required for " +
        "employment in business. Case studies and practical business projects are used to develop" +
        " students' analysis, communication and professional business skills."
    };
    /**
     * Our data, part 3.
     */
    private boolean[] mExpanded = 
    {
            false,
            false,

    };
}

/**
 * We will use a DescriptionView to display each speech. It's just a LinearLayout
 * with two text fields.
 *
 */
private class DescriptionView extends LinearLayout {
    private TextView mTitle;
    private TextView mDescription;

    public DescriptionView(Context context, String title, String desc, boolean expanded) {
        super(context);

        this.setOrientation(VERTICAL);

        // Here we build the child views in code. They could also have
        // been specified in an XML file.

        mTitle = new TextView(context);
        mTitle.setText(title);
        addView(mTitle, new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));

        mDescription.setText(desc);
        addView(mDescription, new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));

        mDescription.setVisibility(expanded ? VISIBLE : GONE);
    }

    /**
     * Convenience method to set the title of a DescriptionView
     */
    public void setTitle(String title) {
        mTitle.setText(title);
    }

    /**
     * Convenience method to set the description of a DescriptionView
     */
    public void setDescription(String words) {
        mDescription.setText(words);
    }

    /**
     * Convenience method to expand or hide the description
     */
    public void setExpanded(boolean expanded) {
        mDescription.setVisibility(expanded ? VISIBLE : GONE);
    }

    }
 } 
```

这是日志猫：

```
03-25 13:34:07.753: E/AndroidRuntime(912): FATAL EXCEPTION: main
03-25 13:34:07.753: E/AndroidRuntime(912): java.lang.NullPointerException
03-25 13:34:07.753: E/AndroidRuntime(912):  at         ie.gmit.gmitapp.BusinessActivity$DescriptionView.<init>(BusinessActivity.java:174)
03-25 13:34:07.753: E/AndroidRuntime(912):  at   ie.gmit.gmitapp.BusinessActivity$BusinessListAdapter.getView(BusinessActivity.java:82)
03-25 13:34:07.753: E/AndroidRuntime(912):  at    android.widget.AbsListView.obtainView(AbsListView.java:2159)
03-25 13:34:07.753: E/AndroidRuntime(912):  at   android.widget.ListView.makeAndAddView(ListView.java:1831) 
```

第 174 行是

```
mDescription.setText(desc) 
```

第 82 行是

```
dv = new DescriptionView(mContext, mTitles[position], mDescription[position], mExpanded[position]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T14:08:45.990

您不创建`mDescription` `TextView`对象。

所以，`mDescription`是空的，你得到你的 NPE。

`DescriptionView`在构造函数中的第 174 行之前添加此行：

```
mDescription = new TextView(context); 
```

* * *

**下次你得到一个 NPE：**
当你使用一个未初始化的对象时你得到一个 NPE。因此，检查发生 NPE 的行号并查看您正在使用哪些对象。在这种情况下，它只是`mDescription`，因此无需查看任何其他代码，很明显它`mDescription`没有被初始化/创建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T14:09:46.093

看来您需要初始化 mDescription TextField：

```
mTitle = new TextView(context);
mDescription = new TextView(context); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T14:07:55.430

mDescription 为空，因为您没有在 DescriptionView 构造函数中初始化它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T14:07:43.827

取消注释您的 setContentView(R.layout.activity_bussiness) 并尝试。

# xslt - 如何在 XSLT 中转义 @ 字符

> ID：15616868
> 
> 赞同：1
> 
> 时间：2013-03-25T14:01:22.803
> 
> 标签：xslt, data-binding, xslt-1.0

$binding-path 包含类似的东西`Contact!ShowsInterest`应该转换为`Contact/@ShowsInterest`

这是我到目前为止所尝试的：

```
<xsl:variable name="bindpath" select="translate($binding-path, '!','/&#x40;')" />
                <xsl:value-of select="concat('{Binding XPath=',$bindpath,'}')"/> 
```

或者

```
<xsl:variable name="bindpath" select="translate($binding-path, '!','/@')" />
                <xsl:value-of select="concat('{Binding XPath=',$bindpath,'}')"/> 
```

但无论我尝试什么，结果总是`Contact/ShowsInterest`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T14:32:32.727

**该[`translate()`](http://www.w3.org/TR/xpath/#function-translate)函数只能用单个字符替换每个出现的单个字符**（或什么都不替换，从而将其删除）。

**使用**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:variable name="binding-path" select="'Contact!ShowsInterest'"/>

 <xsl:template match="/">
  <xsl:variable name="bindingpath">
   <xsl:value-of select="substring-before($binding-path, '!')"/>
   <xsl:text>/@</xsl:text>
   <xsl:value-of select="substring-after($binding-path, '!')"/>
  </xsl:variable>

  <xsl:value-of select="$bindingpath"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当将此转换应用于任何 XML 文档（未使用）时，将产生所需的正确结果**：

```
Contact/@ShowsInterest 
```

* * *

**二、XSLT 2.0**

**使用 XPath 2.0[`replace()`](http://www.w3.org/TR/xpath-functions/#func-replace)功能**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:variable name="binding-path" select="'Contact!ShowsInterest'"/>

 <xsl:template match="/">
  <xsl:variable name="bindingpath" select="replace($binding-path, '!', '/@')"/>

  <xsl:value-of select="$bindingpath"/>
 </xsl:template>
</xsl:stylesheet> 
```

**此转换产生相同的正确结果：**

```
Contact/@ShowsInterest 
```

# charts - 如何更改 RRDTool 图表？

> ID：15616873
> 
> 赞同：2
> 
> 时间：2013-03-25T14:01:41.140
> 
> 标签：charts, highcharts, rrdtool, rrd, ganglia

我开始使用 Ganglia，它使用`rrdtool`了很棒的工具！我想改变图表的方式，生成图表，因为我想用[HighCharts](http://www.highcharts.com/)生成图表。RRDTool 生成一个`img`，我可以更改它的生成方式。

这是可能的吗？我怎么能那样做？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T05:53:19.213

看看[这个](http://thule.mine.nu/html/about.html)页面。它给出了很好的描述，以及一些示例代码。

祝你好运！

# mysql - 在 mysql 查询中使用 Join 我哪里出错了 - 也发布了解释结果

> ID：15616876
> 
> 赞同：7
> 
> 时间：2013-03-25T14:01:49.267
> 
> 标签：mysql, join, explain

我有这个查询大约需要 3.5 秒才能获取 2 条记录。然而，推荐中有超过 100k 行，用户中有 13k 行，课程中有 850 行，考试中有 2 行。

```
SELECT t.*, u.name, f.feedback
FROM testmonials t
INNER JOIN user u ON u.id = t.userid
INNER JOIN courses co ON co.id = t.courseid
LEFT JOIN exam ex ON ex.id = t.exam_id
WHERE t.status = 4
AND t.verfication_required = 'Y'
AND t.verfication_completed = 'N'
ORDER BY t.submissiondate DESC 
```

.解释结果：。

```
id  select_type     table   type    possible_keys   key     key_len     ref     rows    Extra
1   SIMPLE  co  ALL     PRIMARY     NULL    NULL    NULL    850     Using temporary; Using filesort
1   SIMPLE  t   ref     CID,nuk_tran_user   CID     4   kms.co.id   8   Using where
1   SIMPLE  u   eq_ref  PRIMARY     PRIMARY     4   kms.t.userid    1   Using where
1   SIMPLE  ex  eq_ref  PRIMARY     PRIMARY     3   kms.t.eval_id   1 
```

如果我删除`courses`表连接，那么查询会很快返回结果。我不明白为什么这个查询必须选择所有课程行，即 850？

任何想法我做错了什么？

编辑：我在推荐表中有一个关于 courseid 和 userid 的索引，这些是它们各自表的主键。

编辑 2

我刚刚从推荐表中删除了 courseid 索引（只是为了测试），有趣的是查询在 0.22 秒内返回了结果！！！？？与上述相同的其他所有内容仅删除了此索引。

```
id  select_type     table   type    possible_keys   key     key_len     ref     rows    Extra
1   SIMPLE  t   ALL     nuk_tran_user   NULL    NULL    NULL    130696  Using where; Using filesort
1   SIMPLE  u   eq_ref  PRIMARY     PRIMARY     4   kms.t.userid    1   Using where
1   SIMPLE  co  eq_ref  PRIMARY     PRIMARY     4   kms.t.courseid  1   
1   SIMPLE  ex  eq_ref  PRIMARY     PRIMARY     3   kms.t.exam_id   1 
```

编辑 3

编辑 3

```
CREATE TABLE IF NOT EXISTS `courses` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL,
  `description` text NOT NULL,
  `duration` varchar(100) NOT NULL DEFAULT '',
  `objectives` text NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `updated_by` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=851 ;

Testimonials

CREATE TABLE IF NOT EXISTS `testimonials` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `feedback` text NOT NULL,  
  `userid` int(10) unsigned NOT NULL DEFAULT '0',
  `courseid` int(10) unsigned NOT NULL DEFAULT '0',
  `eventid` int(10) unsigned NOT NULL DEFAULT '0',
  `emr_date` datetime DEFAULT NULL,
  `exam_required` enum('Y','N') NOT NULL DEFAULT 'N',
  `exam_id` smallint(5) unsigned NOT NULL DEFAULT '0',
  `emr_completed` enum('Y','N') NOT NULL DEFAULT 'N',
  PRIMARY KEY (`id`),
  KEY `event` (`eventid`),
  KEY `nuk_tran_user` (`userid`),
  KEY `emr_date` (`emr_date`),
  KEY `courseid` (`courseid`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=134691 ; 
```

..这是现在最新的解释查询结果...

```
id  select_type     table   type    possible_keys   key     key_len     ref     rows    Extra
1   SIMPLE  t   ALL     nuk_tran_user,courseid  NULL    NULL    NULL    130696  Using where; Using filesort
1   SIMPLE  u   eq_ref  PRIMARY     PRIMARY     4   kms.t.userid    1   Using where
1   SIMPLE  co  eq_ref  PRIMARY     PRIMARY     4   kms.t.courseid  1   
1   SIMPLE  ex  eq_ref  PRIMARY     PRIMARY     3   kms.t.exam_id   1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:15:41.393

已知执行没有可以使用的相应索引的 ORDER BY 会导致延迟问题。即使这并没有具体回答您的课程表问题。

您的原始查询看起来非常好，但是您引用了“f.feedback”并且查询中没有“f”别名。您还参考了“verification_required”和“verification_completed”，但在表结构中看不到它们，但确实找到了“exam_required”和“emr_completed”。

然而，我会改变一件事。在推荐表中，而不是单个列索​​引，我将添加一个多列索引，以利用您的多条件查询和 order by

```
create table ...
KEY StatVerifySubmit ( status, verification_required, verification_completed, submissionDate ) 
```

但您的查询似乎是指您的表结构列表中未列出的列，但可能是

```
KEY StatVerifySubmit ( status, exam_required, emr_completed, emr_Date) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T10:16:09.473

您能否尝试以下查询而不是原始查询：

```
SELECT t.*, u.name, f.feedback
FROM testmonials t
INNER JOIN user u ON u.id = t.userid
LEFT JOIN exam ex ON ex.id = t.exam_id
WHERE t.status = 4
AND t.verfication_required = 'Y'
AND t.verfication_completed = 'N'
AND t.courseid in ( SELECT co.id FROM courses co)
ORDER BY t.submissiondate DESC 
```

您需要从课程表中选择列吗？

# android - 如何强制 Activity 使用我传递的 Intent Extras？

> ID：15616878
> 
> 赞同：3
> 
> 时间：2013-03-25T14:01:49.843
> 
> 标签：android

我有一堆活动，并使用以下代码将主要活动带入“活动”状态：

```
Intent i = getBaseContext().getPackageManager()
.getLaunchIntentForPackage(getBaseContext().getPackageName());
i.putExtra("clearCache", true);
i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(i); 
```

问题是，当我尝试检索`clearCache`额外内容时，调用`getIntent().getExtras()`返回 null。

我的理解是，因为我正在启动的活动已经在堆栈上，并且因为我设置了`Intent.FLAG_ACTIVITY_CLEAR_TOP`标志，所以返回的 Intent 将是原始意图。

如何在我正在启动的活动中访问调用意图？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T14:15:48.387

在 FLAG_ACTIVITY_CLEAR_TOP 的谷歌文档中，您每次都应该获得新的意图：

“如果设置了，并且正在启动的活动已经在当前任务中运行，那么不会启动该活动的新实例，而是关闭它上面的所有其他活动，并且此 Intent 将被传递到（现在顶部）旧活动作为新意图。”

...

“上面示例中当前正在运行的活动 B 实例将在其 onNewIntent() 方法中接收您在此处启动的新意图，或者自行完成并以新意图重新启动。如果它已将其启动模式声明为”多个”（默认）并且您没有在同一意图中设置 FLAG_ACTIVITY_SINGLE_TOP，那么它将完成并重新创建；对于所有其他启动模式或如果设置了 FLAG_ACTIVITY_SINGLE_TOP，则此 Intent 将被传递到当前实例的 onNewIntent() 。”

有关更多详细信息，请查看此处：

[http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:25:22.140

您只需通过传递特定的 Activity 名称来更改代码并保持其余代码不变，

```
Intent i = new Intent(MapActivity.this, MainActivity.class);
                        i.putExtra("clearCache", true);
                        i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                        startActivity(i); 
```

# c# - 带线程的多个 MS ACCESS 连接 (oledb)

> ID：15616881
> 
> 赞同：0
> 
> 时间：2013-03-25T14:01:56.110
> 
> 标签：c#, ms-access

请帮助我，因为我在网上找不到任何解决方案，我试图做一些 THREAD 函数来从一毫秒访问数据库（.mdb）中选择查询。另一个词..针对相同的 ms 访问数据库 (.mdb) 的线程函数...它总是失败。这是代码：

```
 private void Form1_Load(object sender, EventArgs e)
            {
                Thread th1 = new Thread(new ThreadStart(method1));
                Thread th2 = new Thread(new ThreadStart(method2));
                th1.Start();
                th2.start();
            }

            private void method1()
            {
                using (OleDbConnection odbConn = new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + dbfileName + ";Mode=Read"))
                {
                    //db manipulation1
                }
            }

            private void method2()
            {
                using (OleDbConnection odbConn = new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + dbfileName + ";Mode=Read"))
                {
                    //db manipulation2
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:15:14.563

您可能想使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)而不是`Thread`. 此类旨在在后台线程中执行工作。如果要在工作完成后更新 UI，可以订阅 RunWorkerCompleted 事件。此事件的处理程序将在 UI 线程上运行，您可以在其中安全地更新 UI 元素。

```
private void Form1_Load(object sender, EventArgs e)
{
   BackgroundWorker bg1 = new BackgroundWorker();
   bg1.DoWork += new DoWorkEventHandler(method1);
   bg1.RunWorkerCompleted += new RunWorkerCompletedEventHandler(method1_Completed);
   bg1.RunWorkerAsync();

   BackgroundWorker bg2 = new BackgroundWorker();
   bg2.DoWork += new DoWorkEventHandler(method2);
   bg2.RunWorkerCompleted += new RunWorkerCompletedEventHandler(method2_Completed);
   bg2.RunWorkerAsync();
}

public void method1(object Sender, DoWorkEventArgs e)
{
    using (OleDbConnection odbConn = new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + dbfileName + ";Mode=Read"))
    {
        //db manipulation1
    }
}

void method1_Completed(object sender, RunWorkerCompletedEventArgs e)
{
    // Update UI.
}

public void method2(object Sender, DoWorkEventArgs e)
{
    using (OleDbConnection odbConn = new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + dbfileName + ";Mode=Read"))
    {
        //db manipulation1
    }
}

void method2_Completed(object sender, RunWorkerCompletedEventArgs e)
{
    // Update UI.
} 
```

请注意，您可以使用 DoWorkEventArgs Results 属性将对象从 DoWork 处理程序传递到 RunWorkerCompleted 处理程序。

# guice - xtext 将 RootModel 注入或访问到 ScopeProvider

> ID：15616885
> 
> 赞同：1
> 
> 时间：2013-03-25T14:02:15.520
> 
> 标签：guice, xtext

我正在使用 Xtext 2.3.1

在我的内部`ScopeProvider`我想使用当前解析的`rootModel`. 怎么做？我可以注入 RootModel 还是可以使用上下文？

```
public class MyLanguageScopeProvider extends AbstractDeclarativeScopeProvider {

    public IScope scope_MyLangElement_ref(EObject context, EReference reference) {
        HashMap<QualifiedName, EObject> elements = new HashMap<QualifiedName, EObject>();

        // access model here, sth like:
        RootModel rootModel = // ....

        return new MapBasedScope(elements);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:14:37.260

`EcoreUtil.getRootContainer(context)`应该做的伎俩。

# c# - 使用实体框架查找数据库中不在复杂对象列表中的所有 ID

> ID：15616895
> 
> 赞同：1
> 
> 时间：2013-03-25T14:02:37.887
> 
> 标签：c#, entity-framework

所以我想做的是在 CSV 和数据库（不使用 SSIS）之间创建一个基本的同步系统，它还为计算等做一些其他神奇的事情。

同步的第一步是删除数据库中不再存在于 CSV 文件中的所有用户。

我有一个在`List<StaffInfo>`哪里`StaffInfo`

```
public class StaffInfo
{
    public int ID {get;set;}
    public string Firstname {get;set;
    // etc etc etc ... ... ...
} 
```

我最初的想法是从列表中获取用户ID列表然后选择不在数据库中的用户然后循环并删除，但这似乎非常浪费

```
// oUsers contains List<StaffInfo>
// Context is the reference to the EF Context 
var myList = (from c in oUsers select c.ID).ToList();
var usersNotInDb = context.Users.Where(x => !myList.Contains(x.UserId));

foreach (var user in usersNotInDb)
{
    context.DeleteObject(user);
}
context.SaveChanges(); 
```

有没有更好的方法来实现这一点，而无需直接进行数据传输或数据操作（即将复杂对象转换为用户 ID 列表）

# android - 在 ViewImage 中查看从图库中选择的图像

> ID：15616899
> 
> 赞同：0
> 
> 时间：2013-03-25T14:02:44.290
> 
> 标签：android

我正在使用 google-android-example “Camera API”。现在我已经放入了一个新的`Button`名为“btnGallery”来打开`Gallery`. 如果用户选择一个图像，则应显示此图像`main.xml -> imageView1`（也用于预览相机镜头）有没有简单的方法可以做到这一点？提前致谢！

```
 package com.lo.android;

import java.io.File;
import java.io.IOException;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.List;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.content.pm.ResolveInfo;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.net.Uri;
import android.os.Build;
import android.os.Bundle;
import android.os.Environment;
import android.provider.MediaStore;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;
import android.database.Cursor;

public class PhotoIntentActivity extends Activity {

    private static int RESULT_LOAD_IMAGE = 1;

    private static final int ACTION_TAKE_PHOTO_B = 1;

    private static final String BITMAP_STORAGE_KEY = "viewbitmap";
    private static final String IMAGEVIEW_VISIBILITY_STORAGE_KEY = "imageviewvisibility";
    private ImageView mImageView;
    private Bitmap mImageBitmap;

    private String mCurrentPhotoPath;

    private static final String JPEG_FILE_PREFIX = "IMG_";
    private static final String JPEG_FILE_SUFFIX = ".jpg";

    private AlbumStorageDirFactory mAlbumStorageDirFactory = null;

    /* Photo album for this application */
    private String getAlbumName() {
        return getString(R.string.album_name);
    }

    private File getAlbumDir() {
        File storageDir = null;

        if (Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState())) {

            storageDir = mAlbumStorageDirFactory.getAlbumStorageDir(getAlbumName());

            if (storageDir != null) {
                if (! storageDir.mkdirs()) {
                    if (! storageDir.exists()){
                        Log.d("lo", "failed to create directory");
                        return null;
                    }
                }
            }

        } else {
            Log.v(getString(R.string.app_name), "External storage is not mounted READ/WRITE.");
        }

        return storageDir;
    }

    private File createImageFile() throws IOException {
        // Create an image file name
        String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
        String imageFileName = JPEG_FILE_PREFIX + timeStamp + "_";
        File albumF = getAlbumDir();
        File imageF = File.createTempFile(imageFileName, JPEG_FILE_SUFFIX, albumF);
        return imageF;
    }

    private File setUpPhotoFile() throws IOException {

        File f = createImageFile();
        mCurrentPhotoPath = f.getAbsolutePath();

        return f;
    }

    private void setPic() {

        /* There isn't enough memory to open up more than a couple camera photos */
        /* So pre-scale the target bitmap into which the file is decoded */

        /* Get the size of the ImageView */
        int targetW = mImageView.getWidth();
        int targetH = mImageView.getHeight();

        /* Get the size of the image */
        BitmapFactory.Options bmOptions = new BitmapFactory.Options();
        bmOptions.inJustDecodeBounds = true;
        BitmapFactory.decodeFile(mCurrentPhotoPath, bmOptions);
        int photoW = bmOptions.outWidth;
        int photoH = bmOptions.outHeight;

        /* Figure out which way needs to be reduced less */
        int scaleFactor = 1;
        if ((targetW > 0) || (targetH > 0)) {
            scaleFactor = Math.min(photoW/targetW, photoH/targetH); 
        }

        /* Set bitmap options to scale the image decode target */
        bmOptions.inJustDecodeBounds = false;
        bmOptions.inSampleSize = scaleFactor;
        bmOptions.inPurgeable = true;

        /* Decode the JPEG file into a Bitmap */
        Bitmap bitmap = BitmapFactory.decodeFile(mCurrentPhotoPath, bmOptions);

        /* Associate the Bitmap to the ImageView */
        mImageView.setImageBitmap(bitmap);

        mImageView.setVisibility(View.VISIBLE);

    }

    private void galleryAddPic() {
            Intent mediaScanIntent = new Intent("android.intent.action.MEDIA_SCANNER_SCAN_FILE");
            File f = new File(mCurrentPhotoPath);
            Uri contentUri = Uri.fromFile(f);
            mediaScanIntent.setData(contentUri);
            this.sendBroadcast(mediaScanIntent);
    }

    private void dispatchTakePictureIntent(int actionCode) {

        Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

        switch(actionCode) {
        case ACTION_TAKE_PHOTO_B:
            File f = null;

            try {
                f = setUpPhotoFile();
                mCurrentPhotoPath = f.getAbsolutePath();
                takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(f));
            } catch (IOException e) {
                e.printStackTrace();
                f = null;
                mCurrentPhotoPath = null;
            }
            break;

        default:
            break;          
        } // switch

        startActivityForResult(takePictureIntent, actionCode);
    }

    private void handleBigCameraPhoto() {

        if (mCurrentPhotoPath != null) {
            setPic();
            galleryAddPic();
            mCurrentPhotoPath = null;
        }

    }

    Button.OnClickListener mTakePicOnClickListener = 
        new Button.OnClickListener() {
        @Override
        public void onClick(View v) {
            dispatchTakePictureIntent(ACTION_TAKE_PHOTO_B);
        }
    };

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mImageView = (ImageView) findViewById(R.id.imageView1);
        mImageBitmap = null;

        /// gallery picture path ///

        Button picBtn = (Button) findViewById(R.id.btnShoot);
        setBtnListenerOrDisable( 
                picBtn, 
                mTakePicOnClickListener,
                MediaStore.ACTION_IMAGE_CAPTURE
        );

        Button btnGallery = (Button) findViewById(R.id.btnGallery);
        btnGallery.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View arg0) {

                Intent i = new Intent(
                        Intent.ACTION_PICK,
                        android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);

                startActivityForResult(i, RESULT_LOAD_IMAGE);
            }
        });

        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.FROYO) {
            mAlbumStorageDirFactory = new FroyoAlbumDirFactory();
        } else {
            mAlbumStorageDirFactory = new BaseAlbumDirFactory();
        }
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        switch (requestCode) {
        case ACTION_TAKE_PHOTO_B: {
            if (resultCode == RESULT_OK) {
                handleBigCameraPhoto();
            }
            break;
        } // ACTION_TAKE_PHOTO_B
        }
            if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK
                    && null != data) {
                Uri selectedImage = data.getData();
                String[] filePathColumn = { MediaStore.Images.Media.DATA };

                Cursor cursor = getContentResolver().query(selectedImage,
                        filePathColumn, null, null, null);
                cursor.moveToFirst();

                int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
                String picturePath = cursor.getString(columnIndex);
                ImageView imageView = (ImageView) findViewById(R.id.imageView1);
                imageView.setImageBitmap(BitmapFactory.decodeFile(picturePath));
                cursor.close();
            }

        }// switch

    // Some lifecycle callbacks so that the image can survive orientation change
    @Override
    protected void onSaveInstanceState(Bundle outState) {
        outState.putParcelable(BITMAP_STORAGE_KEY, mImageBitmap);
        outState.putBoolean(IMAGEVIEW_VISIBILITY_STORAGE_KEY, (mImageBitmap != null) );
        super.onSaveInstanceState(outState);
    }

    @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState) {
        super.onRestoreInstanceState(savedInstanceState);
        mImageBitmap = savedInstanceState.getParcelable(BITMAP_STORAGE_KEY);
        mImageView.setImageBitmap(mImageBitmap);
        mImageView.setVisibility(
                savedInstanceState.getBoolean(IMAGEVIEW_VISIBILITY_STORAGE_KEY) ? 
                        ImageView.VISIBLE : ImageView.INVISIBLE
        );
    }

    /**
     * Indicates whether the specified action can be used as an intent. This
     * method queries the package manager for installed packages that can
     * respond to an intent with the specified action. If no suitable package is
     * found, this method returns false.
     * http://android-developers.blogspot.com/2009/01/can-i-use-this-intent.html
     *
     * @param context The application's environment.
     * @param action The Intent action to check for availability.
     *
     * @return True if an Intent with the specified action can be sent and
     *         responded to, false otherwise.
     */
    public static boolean isIntentAvailable(Context context, String action) {
        final PackageManager packageManager = context.getPackageManager();
        final Intent intent = new Intent(action);
        List<ResolveInfo> list =
            packageManager.queryIntentActivities(intent,
                    PackageManager.MATCH_DEFAULT_ONLY);
        return list.size() > 0;
    }

    private void setBtnListenerOrDisable( 
            Button btn, 
            Button.OnClickListener onClickListener,
            String intentName
    ) {
        if (isIntentAvailable(this, intentName)) {
            btn.setOnClickListener(onClickListener);            
        } else {
            btn.setText( 
                getText(R.string.cannot).toString() + " " + btn.getText());
            btn.setClickable(false);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T09:24:02.547

我找到了解决方案。请在我的代码（已编辑）中在上面的 btnGallery 下方看到它。感谢你的帮助

# java - 面板上的 Vaadin ActionHandler 不起作用

> ID：15616901
> 
> 赞同：1
> 
> 时间：2013-03-25T14:02:49.370
> 
> 标签：java, contextmenu, vaadin

我使用 Vaadin 6.8.8。我正在尝试将操作处理程序添加到面板（以获取上下文菜单）。该面板占据了窗口的所有位置，但是当我单击鼠标右键时，我导致了浏览器上下文菜单。

```
public class MyPanel extends Panel {
    public MyPanel() {
    ...
            addActionHandler(new Action.Handler(){
                ...
            });
            setSizeFull();
     }
 } 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:56:14.723

Panel 中的那些与动作相关的方法用于键盘快捷键。只有 Tree、Table 和 TreeTable 是支持上下文菜单的核心组件。要将上下文菜单添加到面板，请查看[ContextMenu](http://vaadin.com/addon/contextmenu)插件。

# java - 如何在criteriaQuery api（jpa 2.0）中使用子字符串

> ID：15616903
> 
> 赞同：1
> 
> 时间：2013-03-25T14:02:56.043
> 
> 标签：java, jpa-2.0, criteria-api

我正在尝试使用 jpa 2.0 进行子字符串查询，但我不知道该怎么做。直到现在我有这个代码：

```
time = builder.between(
                matchesRoot.<Integer>get("startDateTime").toString().substring(8, 13),
                Integer.getInteger(DateTimeUtil.dateTimeWithoutFormat(searchCommercialsDTO.getFinalDate())),
                Integer.getInteger(DateTimeUtil.dateTimeWithoutFormat(searchCommercialsDTO.getIniDate()))
                ); 
```

但它不起作用，因为由于这个错误我无法编译它：

> 没有为 between(String,Integer,Integer) 方法找到合适的方法 CriteriaBuilder.between(Expression,Y#1,Y#1) 不适用（不存在类型变量 Y#1 的实例，因此该参数type String 符合形参类型 Expression) 方法 CriteriaBuilder.between(Expression,Expression,Expression) 不适用（不存在类型变量 Y#2 的实例，因此参数类型 String 符合形参类型 Expression ) 其中 Y#1,Y#2 是类型变量： Y#1 扩展了在方法 between(Expression,Y#1,Y#1) 中声明的 Comparable Y#2 扩展了在方法之间声明的 Comparable(Expression,Expression,Expression

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-18T17:58:20.713

子字符串可以通过[CriteriaBuilder.substring](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/CriteriaBuilder.html#substring%28javax.persistence.criteria.Expression,%20javax.persistence.criteria.Expression%29)使用。那当然不是对整数起作用，而是对字符串起作用。

在当前方法中，您正在调用[Path](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/Path.html)的 toString 方法。结果 SQL 中的 substring 函数与用于构建查询的类的 toString 方法之间没有联系。

# sql - SQL Server 2008 数据类型的批量更改语句

> ID：15616913
> 
> 赞同：2
> 
> 时间：2013-03-25T14:03:17.253
> 
> 标签：sql, sql-server-2008, text, varchar

我正在尝试一次将所有表中的数据类型从更改`text`为`varchar`。

这个查询

```
 select *
  from information_schema.columns
  where data_type = 'text' 
```

向我展示了我所有的`text`数据类型，但是我如何使用它来将类型更改为`varchar`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:22:26.880

我会将您的所有`text`,`ntext`和`image`数据类型更改为较新的`varchar(max)`,`nvarchar(max)`和`varbinary(max)`数据类型：

```
select 'alter table ' + quotename(c.TABLE_SCHEMA) + '.' + quotename(c.TABLE_NAME)
    + ' alter column ' + quotename(c.COLUMN_NAME) + ' '
    + case c.DATA_TYPE when 'image' then 'varbinary(max)' when 'ntext' then 'nvarchar(max)' when 'text' then 'varchar(max)' end + ' '
    + case c.IS_NULLABLE when 'YES' then 'not' else '' end + ' null;' as SqlCommand
    , *
from INFORMATION_SCHEMA.COLUMNS c
    join INFORMATION_SCHEMA.TABLES t on c.TABLE_CATALOG = t.TABLE_CATALOG
        and c.TABLE_SCHEMA = t.TABLE_SCHEMA
        and c.TABLE_NAME = t.TABLE_NAME
where c.DATA_TYPE in ('image', 'ntext', 'text')
    and t.TABLE_TYPE = 'BASE TABLE' 
```

只需将 SqlCommand 列作为批处理复制并运行。

这将处理可空性和过滤视图。

我不相信您可以在 text/ntext/image 列上放置任何类型的唯一约束，因此您可能不必检查 PK/FK/UK。但是，您必须考虑其他类型的约束和默认值。如果你有很多这些，在 SSMS 图表模式下进行这些更改可能会更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:18:27.730

从查询结果中复制这些命令并执行它们：

```
 select 
        cmd = 'alter table [' + c.table_schema + '].[' + c.table_name + '] alter column [' + c.column_name + '] varchar(<yoursize>)'
        ,*
    from information_schema.columns c
    where c.data_type='text' 
```

但：

*   您需要连接表信息以仅选择表（上面的查询也会返回视图）
*   它不会让您更改某些列，例如使用 PK/FK 约束
*   此选择还可能列出您不想/不能修改的表。例如系统图
*   如果您不将其限制在您完全了解其结构的几个表中，那么这样做通常不是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T14:19:23.247

起初它可能看起来很简单：

1.  对来自 information_schema 的选择使用游标循环。
2.  为将使用 ALTER TABLE 语句更改其数据类型的每个感兴趣的列编写动态 SQL。
3.  执行动态 SQL。

但是，您需要先删除这些列上的任何索引、外键约束等。然后，当您完成后，您可以重新创建约束和索引。

看到这个问题：

[单个 SQL 查询一次更新表中所有列的数据类型](https://stackoverflow.com/questions/11150705/single-sql-query-to-update-datatypes-of-all-columns-in-a-table-at-one-shot)

# javascript - 如何使用 PhantomJS 渲染完整图表？

> ID：15616916
> 
> 赞同：2
> 
> 时间：2013-03-25T14:03:31.990
> 
> 标签：javascript, highcharts, phantomjs

我正在尝试从网页获取 highcharts 图表的图像。使用 PhantomJS 我可以将图表导出到文件，但它并不完整。我不知道为什么，但 PhantomJS 只渲染图表的一小部分。

![图表捕获](../Images/f5a2567419ce401697aec7ef45d5828a.png)

对于渲染，我正在使用以下代码：

```
page.clipRect = page.evaluate(function() {  
     return document.querySelector('#container').getBoundingClientRect();
    }); 

page.render(output); 
```

我做错了什么，我怎样才能得到整个图表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T23:14:23.680

好像动画还没有被禁用。尝试设置`animation: false`图表。

*编辑：似乎[@eric](https://stackoverflow.com/users/1102962/eric)已经回答了这个作为评论。*

# java - Java - 可用的垃圾收集算法

> ID：15616919
> 
> 赞同：15
> 
> 时间：2013-03-25T14:03:34.993
> 
> 标签：java, garbage-collection

有谁知道适当的资源来阅读java中可用的垃圾收集机制？到目前为止，我找到了几个网站，但它们没有包含关于何时使用哪个以及实现是什么的全面描述。（我指的是Oracle的jdk）

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-25T17:34:44.977

截至今天，Java Hotspot VM 中有 4 种 GC 算法可用：

*   **串行 GC** - 推荐用于没有低暂停时间要求的客户端样式应用程序。
*   **并行 GC** -在吞吐量很重要时使用。
*   **Mostly-Concurrent GC**（也称为 Concurrent Mark-Sweep GC(CMS)） - 在延迟很重要时使用。
*   **Garbage First GC** (G1) - 新的GC 算法，用于 CMS 替换。

您可以在下面的参考资料中找到有关这些 GC 算法的更多信息。

图书：

*   [Java Performance](https://rads.stackoverflow.com/amzn/click/com/0137142528) - 实用指南，包含有关 GC 的章节，全面解释何时以及如何使用各种 Hotspot GC 算法，
*   [垃圾收集手册](https://rads.stackoverflow.com/amzn/click/com/1420082795)- 垃圾收集理论解释，提到了所有可用的 GC 技术。

讲座/文章：

*   Java One 2012[高级 JVM 调优](https://oracleus.activeevents.com/connect/sessionDetail.ww?SESSION_ID=7236)
*   Java One 2012 [G1 垃圾收集器性能调优](https://oracleus.activeevents.com/connect/sessionDetail.ww?SESSION_ID=6583&tclass=popup)
*   [垃圾收集调整指南](https://confluence.atlassian.com/display/ATLAS/Garbage+Collection+%28GC%29+Tuning+Guide)
*   [Java 热点垃圾收集](http://www.oracle.com/technetwork/java/javase/tech/gc-142724.html)

邮件列表：

*   [OpenJDK 热点 GC 使用](http://mail.openjdk.java.net/mailman/listinfo/hotspot-gc-use)

# ruby-on-rails - 带有参数化的错误 url

> ID：15616921
> 
> 赞同：0
> 
> 时间：2013-03-25T14:03:39.187
> 
> 标签：ruby-on-rails, url-rewriting, parameterized

我正在尝试使用参数化重写 URL，如下所述：[如何根据标题重写 URL？](https://stackoverflow.com/questions/4413789/how-do-i-rewrite-urls-based-on-title)

这是我的模型：

```
class Article < ActiveRecord::Base
  belongs_to :category

  self.per_page = 5

  def to_param
    "#{title.parameterize}"
  end
end 
```

还有我的链接：

```
<%= link_to(article.title, blog_article_path(article), {:class => "blog_title"}) %> 
```

问题是我没有像`/blog/article/"my-article-title"`but I have这样的链接`/blog/article."my-article-title"`，这是错误的，没有被解释。

你知道原因吗？

我的 route.rb ：

```
get "blog/index"
get "blog/category"
get "blog/article" (I don't use the show action of my article controller, is it the reason ?)

resources :categories

resources :articles 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:27:06.703

使用`link_to`传递资源的方式仅在您实际使用路由文件中的资源时才真正起作用。

这是使用非资源路由和由资源生成的路由的区别（rake 路由输出）：

```
blog_article GET    /blog/article(.:format)

article GET    /articles/:id(.:format) 
```

使用`article_path(@article)`时会填写`:id`资源的id。

我建议您使用文章控制器的显示操作，这样您就可以拥有`/blog/articles/:id`或者如果您真的想要该路由，您可以执行以下操作：

```
get "blog/article/:id" => "articles#show", :as => 'blog_article' 
```

变成：

```
blog_article GET    /blog/article/:id(.:format) 
```

[官方指南](http://guides.rubyonrails.org/routing.html#non-resourceful-routes)对此有一些很好的信息。

# iphone - UITableViewController 和选项卡式导航的奇怪行为

> ID：15616922
> 
> 赞同：0
> 
> 时间：2013-03-25T14:03:46.680
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

我有一个应用程序，其中要求以选项卡格式排列部分。在其中一个选项卡下，将有一个表视图，该表视图与详细视图相接。当我在选项卡式导航之外设置此转换时，它可以工作。但是，当我尝试在选项卡式导航中执行此操作时，会出现运行时错误并崩溃。是否存在尝试使用选项卡加载 segues 的 tableview 的已知问题？

谢谢！薇薇

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:20:00.393

以下是如何使用的简单示例`UITabBarController`

首先创建文件中的所有对象`UIViewController`并使用以下方法`UINavigationController``AppDelegate.h``AppDelegate.m`

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window=[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds ]];

    self.viewCon=[[ViewController alloc] init];
    self.navCon=[[UINavigationController alloc] initWithRootViewController:self.viewCon];
    self.navCon.navigationBar.tintColor=[UIColor blackColor];
    self.viewCon.title=@"First View";

    self.fView=[[FirstViewController alloc] init];
    self.FnavCon=[[UINavigationController alloc] initWithRootViewController:self.fView];
    self.FnavCon.navigationBar.tintColor=[UIColor blackColor];

    self.fView.title=@"Secound View";

    self.sView=[[SecoundViewController alloc] init];
    self.SnavCon=[[UINavigationController alloc] initWithRootViewController:self.sView];
    self.SnavCon.navigationBar.tintColor=[UIColor blackColor];
    self.sView.title=@"Third View";
    .
    .
    // create UIViewController and UINavigationController As you need 
    .
    .
    .
    UIImage *img1=[UIImage imageNamed:@"Australia.gif"];
    self.tbItem1=[[UITabBarItem alloc] initWithTitle:@"First Page" image:img1 tag:1];
    self.viewCon.tabBarItem=self.tbItem1;

    UIImage *img2=[UIImage imageNamed:@"Cameroon.gif"];
    self.tbItem2=[[UITabBarItem alloc] initWithTitle:@"Secound Page" image:img2 tag:2];
    self.fView.tabBarItem=self.tbItem2;

    UIImage *img3=[UIImage imageNamed:@"Canada.png"];
    self.tbItem3=[[UITabBarItem alloc] initWithTitle:@"Third Page" image:img3 tag:3];
    self.sView.tabBarItem=self.tbItem3;

    NSMutableArray *viewArr=[[NSMutableArray alloc] init];
    [viewArr addObject:self.navCon];
    [viewArr addObject:self.FnavCon];
    [viewArr addObject:self.SnavCon];

    self.tbCon=[[UITabBarController alloc] init];
    self.tbCon.viewControllers=viewArr;

    [self.window addSubview:tbCon.view];

    [self.window makeKeyAndVisible];

    return YES;
} 
```

# javascript - 将流动图另存为图像

> ID：15616925
> 
> 赞同：8
> 
> 时间：2013-03-25T14:03:55.423
> 
> 标签：javascript, html

您好我正在尝试将浮点图保存为图像（png/jpeg ..）。我研究了他们建议使用 canvas.toDataURL("image/png"); 的其他问题。或画布2图像。但是，我将 div 用于 flot，如下所示。

```
<div id="graph"> <div id="graphc" style="width: 600px;height:153px; top: 560px; left:120px; auto;"> </div> </div>

plot= $.plot($("#graph #graphc"),
           [ {data: data5 ],
           xaxis: { mode: "time",minTickSize: [10, "second"],
            timeformat: "%0H:%0M" } } ); 
```

我怎样才能保存这个图表？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T14:08:03.643

您需要获取 flot 在您的 div 中创建的画布。如果您查看[文档](https://github.com/flot/flot/blob/master/API.md)，您会看到有一个`.getCanvas()`功能。或者你可以使用 jQuery 在你的 div 中选择一个画布。

一旦你有了画布，你就可以使用`.toDataURL`或任何其他技术。

所以你有这个：

```
plot= $.plot($("#graph #graphc"),
       [ {data: data5 ],
       xaxis: { mode: "time",minTickSize: [10, "second"],
        timeformat: "%0H:%0M" } } ); 
```

然后你应该能够做到这一点：

```
var myCanvas = plot.getCanvas(); 
```

要实际下载文件，您需要使用`.toDataURL()`，然后将`image/png`mime 类型替换为`image/octet-stream`，然后将您的设置`document.location.href`为您的字符串：

```
var image = myCanvas.toDataURL();
image = image.replace("image/png","image/octet-stream");
document.location.href=image; 
```

或者您可以使用 canvas2image 为您完成所有这些工作。

编辑：唯一的问题是，至少在 FireFox 中，图像将以随机名称和`.part`扩展名保存。将其更改为`.png`将显示它是实际图像。不确定是否有一种好方法可以说服浏览器使用友好名称保存它，或者至少使用正确的扩展名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-09T20:09:25.290

由于以下问题，我对这些解决方案中的任何一个都不满意：

1.  我的刻度标签不在画布上
2.  我的轴标签不在画布上
3.  Firefox 使用 canvas2image 保存对于普通用户来说是令人困惑的

我对这个问题的解决方案是更改图表的选项以重新绘制为仅画布图表，然后使用 canvas-to-blob 将此图表转换为 blob，然后 FileSaver 为用户保存 blob，最后我重新绘制图表保存图像后。

需要以下 JS 插件：

*   [jquery.flot.canvas](https://github.com/flot/flot/blob/master/jquery.flot.canvas.js)
*   [jquery.flot.axislabels](https://github.com/markrcote/flot-axislabels)
*   [文件保护程序](https://github.com/eligrey/FileSaver.js/)
*   [画布到斑点](https://github.com/blueimp/JavaScript-Canvas-to-Blob)

代码：

```
 //set data array, and options 
$('a.download_as_img').click(function(e){
  e.preventDefault();
  saveAsImage(graph_selector, data, options, xaxis,yaxis)
})

function saveAsImage(graph_selector, data_arr, options, xaxis, yaxis){
  var canvas = replotChartAsCanvas(graph_selector, data_arr, options, xaxis, yaxis);
  var title = 'chart';// or some jquery way to get your title or w/e
  canvas.toBlob(function(blob) {
    saveAs(blob, title + ".png");
  });

  //convert back to normal
  var plot = $.plot(graph_selector, data_arr, options);
}

//helper for saveAsImage
// returns canvas
function replotChartAsCanvas(graph_selector, data_arr, options, xaxis, yaxis){
  //change canvas options to true and replot
  var canvas_options = {
    canvas: true,
    axisLabels: {
        show: true
    },
    xaxes: [
    {
        axisLabelUseCanvas: true,
        axisLabel: xaxis
    }
    ],
    yaxes: [
    {
        axisLabelUseCanvas: true,
        position: 'left',
        axisLabel: yaxis
    }
    ]
    }
    var merged_opts = {}
    $.extend(merged_opts, options, canvas_options);  //done this way to ensure canvas_options take priority
    var plot = $.plot(graph_selector, data_arr, merged_opts);
    return plot.getCanvas();
} 
```

也许如果您对上述解决方案有类似的担忧，您可以试试这个。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T14:26:53.883

我在代码上做了一些更正。为了在本地保存图表，您可以使用下面的代码。

```
var plot= $.plot($("#graph #graphc"),
[ {data: data5 ],
xaxis: { mode: "time",minTickSize: [10, "second"],
timeformat: "%0H:%0M" } } );

var myCanvas = plot.getCanvas();
var image = myCanvas.toDataURL("image/png").replace("image/png", "image/octet-stream");  /// here is the most important part because if you dont replace you will get a DOM 18 exception.
document.location.href=image; 
```

# asp.net - 如何计算计算列值，然后在运行时将其插入数据库？

> ID：15616926
> 
> 赞同：1
> 
> 时间：2013-03-25T14:04:00.910
> 
> 标签：asp.net, sql, tsql, listview, calculated-columns

如何在我的 aspx 页面中编写插入查询，如下所示？？？

```
insert into tablname(field1 ,field2, field3)values(@field1,@field2,@field1-@field2) 
```

在这里，我也将**field3**设为数据库中的计算列，即**field1 -field2**在数据库中。插入字段中的值在文本框中，所以我想在运行时计算两个文本框的差异，然后将该值插入数据库中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:12:22.900

无需在插入中包含字段 3。

[来自 MSDN：除非另有说明，否则计算列是未物理存储在表中的虚拟列](http://msdn.microsoft.com/en-us/library/ms191250%28v=sql.105%29.aspx)

因此，您可以在表单上显示计算值，但是当您实际插入数据库时​​，只需插入 2 个值。查询表时将计算 field3 的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:38:04.730

有很多方法，但我建议您创建一个带有两个参数的存储过程`@field1`并`@field2`从那里执行插入语句，就像您可以在存储过程中创建一个局部变量，它将计算值`@field3 = @field1 - @field2`并提交值`(@field1, @field2, @field3)`

```
create table test22(field1 int, field2 int, field3 int)

create proc inserttest22
    @field1 int,
    @field2 int
as
    declare @field3 int

    set @field3 = @field1 - @field2

    insert into test22 values (@field1, @field2, @field3)
go 
```

# c# - 使用 linq 将字符串数组转换为自定义对象列表

> ID：15616932
> 
> 赞同：7
> 
> 时间：2013-03-25T14:04:17.480
> 
> 标签：c#, .net, linq

我有一门公共财产的班级。

```
public class CustomEntity 
{
    string _FileName;
    public string FileName
    {
        get { return _FileName; }
        set
        {                    
           _FileName = value;

        }
    }

} 
```

我有一个字符串数组，我想使用 linq 在“CustomEntity”列表中进行转换。请建议我如何做到这一点。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-25T14:12:00.470

我会使用 Linq 的 Select 扩展名和 ToList 将 IEnumerable（来自 Select 扩展名）转换为列表

一个例子：

```
string[] randomArray = new string[3] {"1", "2", "3"};
List<CustomEntity> listOfEntities = randomArray.Select(item => new CustomEntity() { FileName = item } ).ToList(); 
```

# java - 摆动双击

> ID：15616934
> 
> 赞同：0
> 
> 时间：2013-03-25T14:04:31.133
> 
> 标签：java, swing, mouseevent, listselectionlistener

当尝试通过双击从列表中选择项目时，它为两个列表选择一次，但在单击选择后！！！

```
 listScrollPanel.setViewportView(categoryList);
    subCategoryList.setModel(new javax.swing.AbstractListModel() {
        String[] strings = {"Sub-category 1", "Sub-category 2", "Sub-category 3", "Sub-category 4", "Sub-category 5", "Sub-category 6"};
    });
subCategoryList.addMouseListener(new java.awt.event.MouseAdapter() {
    @Override
    public void mouseClicked(java.awt.event.MouseEvent evt) {
        infoBox(Integer.toString(evt.getClickCount()), subCategory);
        if (evt.getClickCount() == 2) {
            subCategoryList.addListSelectionListener(new javax.swing.event.ListSelectionListener() {
                @Override
                public void valueChanged(javax.swing.event.ListSelectionEvent evt) {
                    subCategoryListValueChanged(evt);
                }
            });
        }
    }
});
private void subCategoryListValueChanged(javax.swing.event.ListSelectionEvent evt) {

    subCategory = (String) subCategoryList.getSelectedValue();
    labelSC.setText(CAT_HEADER);
    listScrollPanel.setViewportView(categoryList);
}
private static void infoBox(String Message, String location) {
    JOptionPane.showMessageDialog(null, Message, location, JOptionPane.INFORMATION_MESSAGE);
} 
```

怎么让他只听双击？我有 categoryList ，双击后 ListSelection 将 viewportView 更改为 subCategory ，它的工作原理相同！但他们在前两次双击后单击反应！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T14:18:19.540

`ListSelectionListener`每次发生双击事件时，您都会添加一个新的。每一个都将响应单击鼠标。您可以单独使用 a `MouseListener`：

```
subCategoryList.addMouseListener(new MouseAdapter() {
    @Override
    public void mouseClicked(MouseEvent evt) {
        if (evt.getClickCount() == 2) {
           String selectedValue = subCategoryList.getSelectedValue();
           // do stuff with selectedValue...
        }
    }
}); 
```

# opengl - OpenGL 8 位 alpha 纹理格式

> ID：15616935
> 
> 赞同：0
> 
> 时间：2013-03-25T14:04:35.710
> 
> 标签：opengl, format, textures

我有一个灰度 8 位位图，我将用它作为字体字形渲染的掩码。位图像素只是一个 alpha 值。我想知道将其转换为 RGBA 是否更好，或者我是否可以使用像 GL_ALPHA8_EXT 这样的格式，我似乎无法在任何地方找到任何文档，尽管我可以在 glext.h 中看到它。

GL_ALPHA8_EXT 是否被广泛支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:10:03.260

是的，`GL_ALPHA8`受支持，我在桌面和 iOS 上使用它。实际上我从未听说过`GL_ALPHA8_EXT`，一项快速研究表明它是[EXT_texture](http://oss.sgi.com/projects/ogl-sample/registry/EXT/texture.txt)扩展的一部分，实际上我知道的所有显卡都支持它，并且应该是一样的`GL_ALPHA8`。

# php - 反序列化返回 false

> ID：15616939
> 
> 赞同：0
> 
> 时间：2013-03-25T14:04:42.213
> 
> 标签：php, serialization

我正在序列化存储在数据库中的数据：

> a:10:{s:4:"name";a:2:{s:4:"type";s:8:"excluded";s:5:"value";s:0:"";} s:8:"keywords";a:2:{s:4:"type";s:8:"excluded";s:5:"value";s:0:"";}s:11:"描述";a:2:{s:4:"类型";s:8:"排除";s:5:"值";s:0:"";}s:3:"sku";a: 2:{s:4:"类型";s:8:"排除";s:5:"值";s:0:"";}s:12:"制造商";a:2:{s: 4:"type";s:8:"excluded";s:5:"value";s:0:"";}s:11:"programname";a:2:{s:4:"type" ;s:8:"排除";s:5:"值";s:0:"";}s:12:"dataprovider";a:2:{s:4:"type";s:8: "排除";s:5:"值";s:0:"";}s:11:"lastupdated";a:1:{s:5:"价值";N;}s:8:"货币";a:1:{s:5:"价值";s:0:"";}s:5:"价格";a :1:{s:5:"值";s:3:"100";}}

当我反序列化时，它返回空数据，但是当我回显数据并从浏览器复制 o/p 并将其静态放置以进行反序列化时，它工作正常。

谁能告诉我可能是什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T14:13:30.053

您在上面提供的内容确实有效并且应该有效。

在数据库中保存序列化数据时，将列的长度设置为非常高的量。

如果您认为序列化数据不会超过 1000 个字符，那么在其上添加一半就可以了。

您可能希望`VARCHAR(1500)`用于您认为大约 1000 个字符长的可序列化数据。

我几乎可以保证您的问题是因为数据库正在存储您的序列化数据并对其进行剪辑，以便它适合您的列。

# jquery - 禁用 KendoUI 元素的手动输入

> ID：15616942
> 
> 赞同：4
> 
> 时间：2013-03-25T14:04:54.137
> 
> 标签：jquery, kendo-ui

我使用了一些 KendoUI 元素，如 ComboBox、DatePicker 等。一切正常，但有一个主要问题是这些元素实际上允许手动输入。

例如，在组合框中，我可以通过单击它来激活文本框，这非常危险并且破坏了使用`<select>`类型列表元素的目的，日期选择器也是如此。

那么您能否指导我如何禁用这些手动输入，并仅限制用户从可用选项中进行选择。

```
<input id="date" value="@DateTime.Now.Date"/>
<select name="need" id="need">
                            <option value="1">High</option>
                            <option value="2">Normal</option>
                            <option value="3">Low</option>
                        </select>
<script type="text/javascript">

     $("#date").kendoDatePicker();
     $("#need").kendoComboBox();
</script> 
```

请帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T20:42:46.673

如果日期选择器被禁用，它将不会提交到服务器。最好使用**[readonly](http://www.w3schools.com/tags/att_input_readonly.asp)**属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-09T19:37:00.240

要拒绝手动输入，您需要访问 Telerik 模板中的输入文本框：

```
var input = $(#"combobox").data("kendoComboBox").input;
input.attr("readonly", "readonly"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T14:43:46.920

如果您不希望用户输入文本，请使用[DropDownList](http://demos.kendoui.com/web/dropdownlist/index.html)而不是组合框。对于日期选择器，您可以使用 jQuery 轻松禁用要转换为日期选择器的输入元素。

[看到这个小提琴](http://jsfiddle.net/whizkid747/7D7B7/)：

```
 $(document).ready(function() {
        // create DatePicker from input HTML element
          var datepicker =      $("#datepicker").kendoDatePicker();
          $("#datepicker").prop('disabled', true);
            }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-18T15:28:43.763

如果 case 不是可编辑的组合框，则 dropdownbox() 以这种方式工作，而不是 combobox()。

# ruby-on-rails - Ruby On Rails 从表格中获取

> ID：15616945
> 
> 赞同：0
> 
> 时间：2013-03-25T14:05:07.400
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我对 ruby​​ 完全陌生，但我知道如何创建数据库。我做了这个

```
rails generate scaffold MYTABLENAME 
```

在 db/migrate 我编辑了文件，所以它有我的列等。

```
class CreateUsers < ActiveRecord::Migration
  def change
    create_table :users do |t|
      t.string :username
      t.string :password
      t.string :email
      t.timestamps
    end
  end
end 
```

这是正确的吧？

现在我得到了这个输出：

```
 invoke  active_record
  create    db/migrate/20130325134909_create_posts.rb
  create    app/models/post.rb
  invoke    test_unit
  create      test/unit/post_test.rb
  create      test/fixtures/posts.yml
  invoke  resource_route
   route    resources :posts
  invoke  scaffold_controller
  create    app/controllers/posts_controller.rb
  invoke    erb
  create      app/views/posts
  create      app/views/posts/index.html.erb
  create      app/views/posts/edit.html.erb
  create      app/views/posts/show.html.erb
  create      app/views/posts/new.html.erb
  create      app/views/posts/_form.html.erb
  invoke    test_unit
  create      test/functional/posts_controller_test.rb
  invoke    helper
  create      app/helpers/posts_helper.rb
  invoke      test_unit
  create        test/unit/helpers/posts_helper_test.rb
  invoke  assets
  invoke    coffee
  create      app/assets/javascripts/posts.js.coffee
  invoke    scss
  create      app/assets/stylesheets/posts.css.scss
  invoke  scss
  create    app/assets/stylesheets/scaffolds.css.scss
   invoke  active_record
  create    db/migrate/20130325134909_create_posts.rb
  create    app/models/post.rb
  invoke    test_unit
  create      test/unit/post_test.rb
  create      test/fixtures/posts.yml
  invoke  resource_route
   route    resources :posts
  invoke  scaffold_controller
  create    app/controllers/posts_controller.rb
  invoke    erb
  create      app/views/posts
  create      app/views/posts/index.html.erb
  create      app/views/posts/edit.html.erb
  create      app/views/posts/show.html.erb
  create      app/views/posts/new.html.erb
  create      app/views/posts/_form.html.erb
  invoke    test_unit
  create      test/functional/posts_controller_test.rb
  invoke    helper
  create      app/helpers/posts_helper.rb
  invoke      test_unit
  create        test/unit/helpers/posts_helper_test.rb
  invoke  assets
  invoke    coffee
  create      app/assets/javascripts/posts.js.coffee
  invoke    scss
  create      app/assets/stylesheets/posts.css.scss
  invoke  scss
  create    app/assets/stylesheets/scaffolds.css.scss 
```

* * *

听起来也不错。但是为什么会自动插入

```
 app/views/posts/index.html.erb
  app/views/posts/edit.html.erb
  app/views/posts/show.html.erb
  app/views/posts/new.html.erb
  app/views/posts/_form.html.erb 
```

等等？它是标准的，如果是的话 - 为什么？请解释。

另一个问题是：在我的家庭控制器（作为标准../home/index）中，我试图在我的新数据库中创建一个用户，但它告诉我未初始化的常量 HomeController::Users - 为什么？

这是我的代码：

```
 class HomeController < ApplicationController
     def index
      #@users = User.all
        o = Users.new
        o.username = "Jesper"
        o.save
     end
 end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:21:10.100

如果您只想生成一个模型，您应该这样做：

```
rails generate model MYTABLENAME username:string password:string email:string 
```

脚手架生成从模型到视图的所有内容（使用默认的 CRUD 操作）。您应该阅读[http://guides.rubyonrails.org/getting_started.html](http://guides.rubyonrails.org/getting_started.html)。本指南将涵盖所有基础知识。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-25T14:25:29.887

型号名称必须是单数

```
class HomeController < ApplicationController

     def index
      #@users = User.all
        o = User.new
        o.username = "Jesper"
        o.save
     end
 end 
```

**用户而不是用户**

# java - 大多数情况下真的需要 Java 的 final 关键字吗？

> ID：15616948
> 
> 赞同：0
> 
> 时间：2013-03-25T14:05:16.130
> 
> 标签：java, jvm

我发现一些 Java IDE 有这样一条规则，即在不询问用户的情况下将事情定为最终版本。例如，只需打开一个缺少任何“final”关键字的文件，IDE 就会在各处插入一堆关键字，尤其是在变量上。

我的论点一直是：“如果 IDE 可以在算法上做到这一点，那么 JVM 也可以”

这个论点站得住脚吗？Java 开发人员什么时候应该使用“final”关键字？每个可能是 final 的变量都应该这样声明吗？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-25T14:08:36.353

> 我的论点一直是：“如果 IDE 可以在算法上做到这一点，那么 JVM 也可以”
> 
> 这个论点站得住脚吗？

没有。因为当 IDE 执行此操作时（我没有看到任何*默认情况下*不询问就执行此操作，即使您可以显式配置它以这样做）开发人员可以检查这是否真的是他们想要的决定。这*可以防止*其他代码违背开发者的意愿做事。

如果*只*在执行时完成，那将破坏整个目的。如果我创建一个字段`final`以防止其他代码修改它，如果其他代码尝试修改它，我想要一个编译时错误。如果它只是留给 JVM，我不能依赖*不*修改它的代码。

> Java 开发人员什么时候应该使用“final”关键字？

对于字段，当字段打算在构造函数中初始化并且此后不再更改时。

对于类，当您尚未将类设计为子类 (IMO) 时。

对于方法，当您没有为子类设计代码来覆盖该方法时。

对于局部变量，您希望在其中访问匿名内部类中的变量。（当然，您也可以将它们用于其他局部变量 - 我不倾向于，但我知道有些人这样做。当然，在方法之外的代码中看不到这种差异。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T14:11:14.783

你太模糊了，final 意味着很多东西： [http://en.wikipedia.org/wiki/Final_(Java)](http://en.wikipedia.org/wiki/Final_(Java))

另外，请参阅此相关讨论：[https://softwareengineering.stackexchange.com/questions/115690/why-declare-final-variables-inside-methods](https://softwareengineering.stackexchange.com/questions/115690/why-declare-final-variables-inside-methods)链接到以下文章：

[http://www.javapractices.com/topic/TopicAction.do?Id=23](http://www.javapractices.com/topic/TopicAction.do?Id=23)

> 自由地使用 final 关键字来传达您的意图。final 关键字具有多个含义：
> 
> *   最终类不能扩展
> *   最终方法不能被覆盖
> *   final 字段、参数和局部变量一旦设置就不能改变它们的值
> 
> 在最后一种情况下，原语的“值”是通常意义上的理解，而对象的“值”是指对象的身份，而不是它的状态。一旦设置了最终对象引用的标识，它仍然可以更改其状态，但不能更改其标识。将原始字段声明为 final 会自动确保该字段的线程安全。
> 
> 有些人习惯性地将参数声明为 final，因为这几乎总是所需的行为。其他人认为这很冗长，而且没有什么真正的好处。
> 
> 始终将 final 与局部变量一起使用（适当时）也很有用。它引起了对非最终局部变量的注意，这些局部变量通常具有更多与之相关的逻辑（例如，结果变量、累加器、循环变量）。许多人觉得这很冗长。一种合理的方法是仅当方法中至少有一个非最终局部变量时才对局部变量使用 final ；这有助于快速将非最终局部变量与其他局部变量区分开来。
> 
> 使用最终：
> 
> *   清楚地传达您的意图
> *   允许编译器和虚拟机执行较小的优化
> *   清楚地标记行为更简单的项目 - final 说，“如果你正在寻找复杂性，你不会在这里找到它。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T14:23:58.663

只有当局部变量是 . 时，它才能在内部类中使用`final`。

`final`修饰符可用于保护自己免受 setter 方法中的失误。

```
public void setLimit(int limit) {
    /*this.*/limit = limit;
} 
```

显然是错误的；放入`this.`是需要的。使用`final`如

```
public void setLimit(final int limit) {
    limit = limit;
} 
```

把它变成一个编译错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T14:29:43.353

> 每个可能是 final 的变量都应该这样声明吗？

是的。

很多人没有意识到编译器可以做多少来帮助您避免常见问题：

```
// Final parameters cannot be reassigned.  This sometimes happens accidentally
// and sometimes because people see them as convenient local variables.
publc void myFunction(final int myIntParam) {

    // Let's declare a local variable
    final String myLocalString;

    // ... there's some code here ...

    // Here, the compiler knows whether this variable has been assigned
    // The programmer knows that it has been assigned only once
    return myLocalString.toUpperCase(Locale.ENGLISH);
} 
```

# java - 使用 Hibernate 自动创建列表表

> ID：15616951
> 
> 赞同：0
> 
> 时间：2013-03-25T14:05:27.000
> 
> 标签：java, hibernate, hibernate-mapping

有没有办法使用休眠创建单个故事。我有使用`hibernate.hbm2ddl.auto`，但它会影响我不想要的完整应用程序。我要创建的表基本上用于处理两个对象之间的列表映射，因此该表没有任何 POJO。

```
@OneToMany
@JoinTable(name="LIST_TABLE", joinColumns={@JoinColumn(name="EMP_ID")}, inverseJoinColumns={@JoinColumn(name="PHONE_ID")}) 
```

员工有多个电话号码的地方。我可以创建`LIST_TABLE`表格吗？表格已经在那里了`Employee`。`Phone_number`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:18:09.257

如果您已经创建了部分数据库模式，则不需要`hibernate.hbm2ddl.auto`，因为正如您所发现的那样，它将尝试创建所有内容。还有另一个值，`hibernate.hbm2ddl.update`，但[不建议用于生产用途](https://stackoverflow.com/questions/221379/hibernate-hbm2ddl-auto-update-in-production)。

相反，我建议使用[SchemaExport](http://docs.jboss.org/hibernate/orm/3.3/api/org/hibernate/tool/hbm2ddl/SchemaExport.html)工具来输出所需的 SQL，为您的新表提取相关语句`CREATE`和`ALTER`语句，然后手动运行它们。[这里](https://stackoverflow.com/questions/15341922/any-good-documentation-for-schemaexportexecute/15342114#15342114)有一个关于如何使用 SchemaExport 的相关问题。

# javascript - 关于javascript split的一个简单情况

> ID：15616952
> 
> 赞同：0
> 
> 时间：2013-03-25T14:05:28.250
> 
> 标签：javascript

我需要的很简单，但我只是想不出这样做的逻辑，我有以下字符串：

```
"data1":"content1",
"data2":"content2.1,"0",
"data3":"contente3", 
```

我正在使用`.split(",")`将它们转换成一个数组，然后我删除了 " 所以我可以得到类似的东西：

```
array[0] = data1; array[1] = content1; 
```

问题是当我到达data2时，有什么办法可以做到以下几点？

```
array[0] = data2; array[1] = content2.1,"0" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:11:12.090

尝试以下操作：

```
 var string = '"data1":"content1", "data2":"content2.1,"0", "data3":"contente3"';
    string.replace(':', ',');
    var strings = string.trim(','); 
```

# java - 如何使用 Eclipse 调试 Web 服务

> ID：15616956
> 
> 赞同：1
> 
> 时间：2013-03-25T14:05:43.107
> 
> 标签：java, eclipse

我有一个非常基本的 Web 服务，我认为它可以从 Eclipse 正确运行。现在我想添加到数据库的连接——所以我想通过代码来尝试 JDBC 连接（我是一个在 java 中解决这个问题的 .NET 开发人员）。

这是（非常）基本的代码：

```
public class PositionSkillManagementService {
    private String t;
    public void addSkill(String s){
        t="s";    //I want to add a breakpoint here. 
    }
} 
```

我认为 Web 服务正在运行，因为当我转到此 URL 时” `http://localhost:8080/TrainingSystem/services/PositionSkillManagementService`“我看到一个屏幕显示“您好，这是一个 AXIS 服务！也许这里会有一个用于调用服务的表单......”

我想在addskill 方法中添加一个断点，这样我就可以调试到数据库的连接。我在 eclipse 中添加了断点，我看到显示断点的小点已设置。但我不知道如何“到达”断点？我不知道如何告诉 eclipse 执行该方法，以便我可以到达断点。我确定这是一个基本问题，但我是环境新手。

我该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T14:10:20.050

完成这几个步骤

*   以调试模式启动您的 Web 应用程序服务器（Tomcat、JBoss、GlassFish 等）。
*   部署包含您的 Web 服务的组件（通常是 Web 应用程序）。
*   以某种方式调用您的 Web 服务，例如，使用[Web 服务资源管理器](http://www.eclipse.org/webtools/jst/components/ws/1.0/tutorials/WebServiceExplorer/WebServiceExplorer.html)，应用程序将在您的断点处停止。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-02T14:58:27.707

这可能有点晚，但以防万一。

我按照 Luiggi Mendoza 的步骤进行操作，效果很好。唯一的事情是，我收到错误“找不到源”并将项目添加到查找路径中。以下是我遵循的步骤：

调试 Web 服务和部署的 EJB

完成以下几个步骤：

*   以调试模式启动您的 Web 应用程序服务器 (JBoss)。
*   部署包含您的 Web 服务 (MyTest.ear) 的组件。
*   在代码中您希望的行插入断点。
*   以某种方式调用您的 Web 服务，例如，SoapUI、通过浏览器调用 REST 端点或使用服务测试器。
*   当断点命中时，您很可能会在 Eclipse 中收到一条错误消息，提示找不到 Source。
*   单击按钮编辑源查找路径
*   在下一个对话框中单击添加按钮
*   选择项目类型，然后在下一个对话框中单击确定。
*   选择正在调查代码的项目。如果需要，请确保选中复选框以添加所需项目
*   单击“确定”，然后再次单击“确定”。你调试断点会命中。单步执行代码将从您选择的项目中加载代码文件以进行代码查找。
*   遵循常规的 Eclipse/Java 调试程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T14:09:12.713

`/PositionSkillManagementService/addSkill`如果您使用的是 Axis ，则需要转到。如果您确实使用 SOAP 路由，我建议您使用 SOAPUI 来解析端点。

一旦该行代码被触发并提供您的服务器正在从调试运行（单击此图标![调试](../Images/0ff7d176cc0b29d7a283f377f4a37de6.png)），它将在遇到断点时触发断点并进入调试模式，以便您可以单步执行/单步执行该方法。

# youtube - PHP 从 YouTube 视频中获取屏幕截图

> ID：15616969
> 
> 赞同：0
> 
> 时间：2013-03-25T14:06:27.510
> 
> 标签：youtube, ffmpeg, youtube-api, screenshot, ffmpeg-php

我有一个包含各种嵌入式 YouTube 视频的网站。当用户暂停给定视频时，我希望截取正在播放的视频的屏幕截图。现在，我已经采取了许多方法来解决这个问题，例如将视频帧复制到画布（这不起作用，因为视频在我的站点外部），以及通过使用 FFMpeg 和 FFMpeg-PHP。后两者 - 虽然非常强大 - 也不起作用，因为给定的媒体必须托管在我的服务器上。

我已经不知所措了，因为我花了无数个小时试图做到这一点，我已经准备好接受失败。

有任何想法吗？

问候，

安德烈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:20:17.390

YouTube 播放器或数据 API 中不支持截取视频任意帧的屏幕截图。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-08-26T00:09:14.930

我使用 img.youtube.com/vi 路径来获取图像。函数 getScreen 基本上解析 youtube url 并获取 &v= 参数以获取视频 ID。

由于我使用 youtube.com/embed/ url 格式，因此我不得不稍微修改该函数以获取视频 ID。

[http://mistonline.in/wp/get-youtube-video-screenshot-using-simple-php-and-javascript/#](http://mistonline.in/wp/get-youtube-video-screenshot-using-simple-php-and-javascript/#)

# vb.net - 在后面的代码中创建的用户控件中的访问事件？

> ID：15616970
> 
> 赞同：0
> 
> 时间：2013-03-25T14:06:27.507
> 
> 标签：vb.net, windows-phone-7, xaml, user-controls

我试图在后面的代码中创建一个用户控件，然后响应该控件中的事件。大概是因为在编译时控件不存在，Visual Studio 无法编译我创建的用于捕获控件事件的处理程序子例程。重要的是，我想在运行时决定控件的类型（这就是为什么我不只是对其进行硬编码）。

[在继续之前，控件正常工作，包括以“正常”方式在 XAML 中创建控件时使用的事件和事件处理程序。我想在后面的代码中创建控件实例，这样我就可以避免复制 99% 相同的页面]

这“有效”（但没有给我所需的灵活性）：

```
 Public WithEvents AnswerPanel As MyControls.ScrollerControl 
```

...（以及 New() 子中的初始化）：

```
 AnswerPanel = New MyControls.ScrollerControl
        ItemStack3.Children.Add(AnswerPanel)

        AddHandler AnswerPanel.GuessMade, AddressOf CheckAnswer 
```

...（这是响应 ScrollerControl 中的自定义事件的处理程序子）

```
 Public Sub CheckAnswer(answer As String) Handles AnswerPanel.GuessMade 
```

使用上面的代码，一切都按我的预期工作：控件是在运行时创建的，并且它的事件得到了正确处理。

我想要实现的是能够在初始化控件时选择不同的用户控件（例如 ScrollerControl2、ScrollerControl3 等）。我可以*通过*将第一行更改为：

```
 Public WithEvents AnswerPanel As UserControl 
```

但是一旦进行了更改，我就不能再在我的处理程序中引用自定义事件，因为（可能）编译器将其视为通用 UserControl，它不包括我的自定义 GuessMade 事件。事件名称上的编译器错误并告诉我它不存在。

我确定我在这里做错了什么。我认为这是一个理论/概念问题，而不是我的代码。

我是在正确的轨道上还是以错误的方式去做这件事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:46:16.847

如果我没看错，您有一个触发事件的用户控件，并且您希望父页面也能捕捉到它？如果是这样，您需要引发事件，这将导致事件冒泡到父级。IE：

```
Partial Class user_controls_myControl
    Inherits System.Web.UI.UserControl
    Public Event DataChange As EventHandler
End Class 
```

这将创建一个带有名为 DataChange 的公共事件的控件。现在，如果您查看父页面中实例化用户控件的代码，您将看到它有一个名为“OnDataChange”的事件。就像 onCLick 事件一样，您可以在父页面中为其分配一个方法。现在，您只需要在用户控件中引发事件。这可以在控件中的某些事件中添加，例如按钮单击或单选按钮更改事件：

```
RaiseEvent DataChange(Me, New EventArgs) 
```

这需要两个对象，即发送者和事件参数。通常我会通过 ME，这是用户控件。这很棒，因为您可以使用反射来获取所有控件的公共属性。您还可以使用它来将对象转换为您的控件类型。我很少传递事件参数，但你当然可以。

我在这里回答了一个类似的问题：[Handling events of usercontrols within listview](https://stackoverflow.com/questions/15086283/handling-events-of-usercontrols-within-listview/15136554#15136554)

如果这不是您的想法，请告诉我

编辑：动态添加用户控件并附加事件：

首先，在将使用该控件的页面中，您需要添加一个占位符：

```
<asp:PlaceHolder ID="placeholder1" runat="server"></asp:PlaceHolder> 
```

以及对页面顶部的用户控件的引用（取决于页面的设置方式，您可能不需要它。如果遇到页面指令错误，请将其删除）：

```
<%@ Reference="" Control="~/user_controls/myControl.ascx"%> 
```

在父页面中，您可以创建一个用户控件并将其添加到占位符中。您必须使用如下事件声明用户控件：

```
Private WithEvents myNewControl As New user_controls_myControl 
```

然后，您可以通过某种方法将其添加到页面中，如下所示：

```
Dim getPh As New PlaceHolder   

'create an instance of the user control
newMyControl = CType(LoadControl("~/user_controls/myControl.ascx"), user_controls_myControl)

'get a handle on the place holder
getPh = me.placeHolder1

'add the user control to the place holder
getPh.Controls.Add(newMyControl) 
```

然后，确保你有事件方法：

```
Protected Sub myEvent(ByVal sender As Object, ByVal e As EventArgs) Handles myNewControl.DataChange

End Sub 
```

因此，如果您像我之前建议的那样将 RaiseEvent 添加到用户控件，这应该适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T00:30:52.117

我现在有一个答案。我怀疑我是从错误的角度思考这个问题。

简而言之，我试图从我的用户控件中引发一个事件，但我需要在基类中引发事件并从我的用户控件中调用它。

所以我的基类（我的用户控件继承自）现在包含以下内容：

```
 Public Event GuessMade(answer As String)

    Protected Sub RaiseGuessEvent(answer As String)

         RaiseEvent GuessMade(answer)

    End Sub 
```

然后，在我的用户控件中，当我需要引发事件时，我只需像这样调用 RaiseGuessEvent 子：

```
 Me.RaiseGuessEvent(CurrentValue) 
```

此外，当然，我必须从我的子类/用户控件中删除该事件。

# android - 使用处理程序将消息发布到正在运行的线程

> ID：15616971
> 
> 赞同：0
> 
> 时间：2013-03-25T14:06:28.877
> 
> 标签：android, multithreading, sockets

我有调用连接到 IRC 服务器的新线程的代码。线程有循环来监听来自 IRC 服务器的响应，并调用方法“ProcessData”来操作响应。

在我的 UI 上，我希望能够在 onStop 和 onPause 中“退出”IRC 服务器。我遇到的问题是，当我使用处理程序向我的 IRC 线程发布消息时，该线程向 IRC 服务器发送 QUIT 命令，它告诉我我正在 UI 线程上执行网络操作。

处理程序是在我的 IRCManager 类中设置的（这个类扩展了 Thread 并且是我在单独的线程上运行的类。

```
public Handler networkHandler = new Handler() {

    @Override
    public void handleMessage(Message msg) {

        try {
            processData((String) msg.obj);
        } catch (IOException e) {
            Log.e(TAG, "network handler given an object NOT of type String");
        }
        super.handleMessage(msg);
    }

}; 
```

我使用主活动中的处理程序并在启动网络线程后将其实例化

```
irc.start();
networkHandler = irc.networkHandler; 
```

在 onPause 事件中，我向处理程序发送一条消息

```
Message msg = new Message();
msg.obj = IRCManager.QUIT;
networkHandler.sendMessage(msg); 
```

编辑：这是 processData 方法

```
void processData(String data) throws IOException {

    if (data.contains("PING")) {
        String pingId = data.substring(6, data.length());
        sendMessage(pong + pingId + "\n");
        isConnected = true;

        Message msg = new Message();
        msg.what = 1;
        msg.obj = "test";
        handler.sendMessage(msg);

    } else if (data.contains("Welcome")) {
        sendMessage("PRIVMSG " + BOT_NAME + " JOIN " + siteId + "\n");

    } else if (data.contains(IRCManager.QUIT)) {
        disconnect();

    } else if (isClientConnected()) {
        Message msg = new Message();
        msg.what = 2;
        msg.obj = "test";
        handler.sendMessage(msg);
    }
} 
```

似乎处理程序没有正确链接到线程。谁能阐明我如何做到这一点？

我的线程实际上花费了 99% 的时间在 while 循环中检查来自 IRC 服务器的输入流。这可能也与它有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T14:22:50.297

您正在这里创建 , 的`Handler`实例`networkHandler`：

```
public Handler networkHandler = new Handler() { 
```

因此它将与 UI 线程相关联。

而且，当你说：

> 我使用主活动中的处理程序并在启动网络线程后将其实例化
> 
> ```
> irc.start();
> networkHandler = irc.networkHandler; 
> ```

您没有创建`Handler`那里的实例；您只是在获取对它的引用。

您实际上需要在non-UI`Handler`的方法中创建实例。`run()``Thread`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T14:14:10.527

尝试在`new Handler(new Handler.Callback() )`内部使用另一个构造函数

# sql - 使用 JOIN 从另一个表中获取信息

> ID：15616975
> 
> 赞同：0
> 
> 时间：2013-03-25T14:06:49.183
> 
> 标签：sql, database, join

目前，我有这个 SQL 查询来尝试从以下位置获取信息`collection_actors`：

```
SELECT ca.id_imdb AS IMDb_ID,
       caat.id_collection AS collection_ID,
       ca.data_name AS actors_name

FROM collection_actors AS ca
JOIN collection_actors_assignedto AS caat
ON ca.id_imdb = caat.id_collection
WHERE caat.id_collection = 'tt1104001' 
```

这是两个表的数据库：

```
collection_actors
    id
    id_user
    id_imdb
    data_name
    date_birth
    date_added
    date_edited
    information_ipaddress

collection_actors_assignedto
    id
    id_user
    id_actor
    id_collection
    date_added
    information_ipaddress 
```

问题是我根本无法从中获取任何信息`collection_actors`，即使有与 IMDb ID 匹配的数据！我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:09:15.403

试试这个：

```
SELECT ca.id_imdb AS IMDb_ID,
       caat.id_collection AS collection_ID,
       ca.data_name AS actors_name

FROM collection_actors AS ca, collection_actors_assignedto AS caat
WHERE (ca.id_imdb = caat.id_collection) AND (caat.id_collection = 'tt1104001') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:13:05.257

试试这个 sql 片段，这是基于您的代码，但您需要确保 id_collection 中的值与 id_imdb 字段中的数据匹配，否则您将永远不会得到任何结果。

```
SELECT ca.id_imdb AS IMDb_ID
, caat.id_collection AS collection_ID
, ca.data_name AS actors_name
FROM collection_actors AS ca
INNER JOIN collection_actors_assignedto AS caat ON ca.id_imdb = caat.id_collection
WHERE caat.id_collection = 'tt1104001' 
```

# ruby - Ruby 的 XMLRPC::Client 是否有调用大小限制？

> ID：15616976
> 
> 赞同：1
> 
> 时间：2013-03-25T14:06:52.190
> 
> 标签：ruby, xml-rpc

我`XMLRPC::Client`在 Ruby 中使用（对于 ruby​​ 1.8 到 2.0 的行为相同）向服务器发送调用，如下所示：

```
server = XMLRPC::Client.new2( url )
server.timeout = 300
response = server.call( "service.methodname", bigarray ) 
```

一切正常，只要`bigarray`传递的不是太大。从它包含大约 10K 浮点数的那一刻起，我得到以下错误跟踪：

```
$ ruby client_largeinputset.rb 
/Users/aliekens/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/protocol.rb:153:in `read_nonblock': Connection reset by peer (Errno::ECONNRESET)
from /Users/aliekens/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/protocol.rb:153:in `rbuf_fill'
from /Users/aliekens/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/protocol.rb:122:in `read_all'
from /Users/aliekens/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/http/response.rb:292:in `block in read_body_0'
from /Users/aliekens/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/http/response.rb:269:in `inflater'
from /Users/aliekens/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/http/response.rb:274:in `read_body_0'
from /Users/aliekens/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/http/response.rb:201:in `read_body'
from /Users/aliekens/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/http/response.rb:226:in `body'
from /Users/aliekens/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/http/response.rb:163:in `reading_body'
from /Users/aliekens/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/http.rb:1411:in `block in transport_request'
from /Users/aliekens/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/http.rb:1402:in `catch'
from /Users/aliekens/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/http.rb:1402:in `transport_request'
from /Users/aliekens/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/http.rb:1375:in `request'
from /Users/aliekens/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/net/http.rb:1321:in `request_post'
from /Users/aliekens/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/xmlrpc/client.rb:477:in `do_rpc'
from /Users/aliekens/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/xmlrpc/client.rb:281:in `call2'
from /Users/aliekens/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/xmlrpc/client.rb:262:in `call'
from client_largeinputset.rb:28:in `<main>' 
```

我不知道 XMLRPC 规范中的调用大小限制，但在我的工作流程中似乎存在限制。

首先：这是我的 ruby​​ 客户端的问题，还是我的服务器（使用 xmlrpc-c，通过深渊 HTTP 服务器编写）可能不接受大请求的问题？

如果它在客户端，那么有没有办法绕过这个问题？我可以在客户端更改呼叫请求的大小（如果有限制）？是否有任何替代路由（除了 ruby​​ 的本机 XMLRPC::Client 实现）可以规避这个问题？最好我正在寻找一种在客户端解决此问题而无需调整服务器端的解决方案，除非它确实是服务器大小的问题。

# json - JSON 字符串更改了 Google MAPS API v3 的密钥

> ID：15616981
> 
> 赞同：1
> 
> 时间：2013-03-25T14:07:06.213
> 
> 标签：json, google-maps-api-3, polygon, latitude-longitude

我已经在这里看到过几次这个问题，但这些回答并不完全适用于我的情况。

我正在使用 google.maps.Polygon 对象来保存在地图上绘制的边界。

后来我使用“getPath”方法并将其添加到 Json 字符串中。

JSON 字符串总是不同的。有时我可以通过以下方式抓住多边形角：

thisShape.data.b[i].kb thisShape.data.b[i].lb

其他时间由

thisShape.data.b[i].Qa thisShape.data.b[i].Ra

等等

似乎随着时间的推移，Json 字符串的键发生了变化。但是，就 Polygon 对象而言，我不负责 Google Api 返回的内容。

有没有办法在不知道密钥的情况下获取经度和纬度？任何想法如何循环我的多边形而不用担心它会在几周内打破？

非常感谢

* * *

假设您有一个名为“SavePolygonData”的方法，除其他外，它会创建一个像这样的 Json 字符串：

```
var allData = {};
    $("div.shapes").each(function(){
      var id = $(this).attr("id");
      var type  = id.split('_')[0];
      var feature = MapToolbar.features[type+'Tab'][id];
      var vertices = feature.getPath();
      allData[id] = { color: feature.fillColor, data: vertices};
    });
    var allDataJson = JSON.stringify(allData); 
```

然后另一种方法在其他地方读取 json 字符串，如下所示：

```
for (var polyId in allData) {
    if (allData.hasOwnProperty(polyId)) {
      var thisShape = allData[polyId];
      var color = thisShape.color;
      var vertices=new Array();

      for ( var i=0; i<thisShape.data.b.length; ++i )
      {
        var coordX = thisShape.data.b[i].kb; //Problem here
        var coordY = thisShape.data.b[i].lb; //Problem here
        var point = new google.maps.LatLng(coordX, coordY);
        vertices[i] = point;
      }
      var poly = new google.maps.Polygon({
        strokeWeight: 2,
        fillColor: color,
        paths: vertices
      });
      poly.setMap(map);  
    } 
```

我不能在 json 字符串上使用 getLat() 方法，因为显然它只包含字符串。相反，我必须为包含已处理数据而不是 feature.getPath() 的“数据”变量创建一个新的数据结构。

这就是我需要帮助的地方。那个新数据结构的结构是什么？

我注意到有 google.maps.geometry.encoding.encodePath() 方法。但我需要能够在服务器端对其进行解码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T09:06:39.287

The problem in your `SavePolygonData` example code is that you are trying to use the vertices data directly in your JSON object. Instead, you need to use the documented methods to get the latitude and longitude values from the vertex array and serialize those.

To fix it, you can change this code:

```
var vertices = feature.getPath();
allData[id] = { color: feature.fillColor, data: vertices}; 
```

to:

```
var vertices = getLatLngVertices( feature.getPath() );
allData[id] = { color: feature.fillColor, data: vertices }; 
```

and elsewhere define this function:

```
function getLatLngVertices( path ) {
    var pathArray = path.getArray();
    var vertices = [];
    for( var i = 0, n = pathArray.length;  i < n;  i++ ) {
        var latLng = pathArray[i];
        vertices.push({ lat: latLng.lat(), lng: latLng.lng() });
    }
    return vertices;
} 
```

Now in your code that parses this JSON you can use:

```
var data = thisShape.data;
for( var i = 0, n = data.length; i < n; ++i ) {
    var point = data[i];
    vertices[i] = new google.maps.LatLng( point.lat, point.lng );
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:19:05.137

它看起来像`getPath()`返回一个`MVCArray`of ，您应该通过调用and方法`LatLng`从中提取纬度和经度，而不是通过直接访问属性。如果在 JavaScript 中是可能的，这些属性就会被声明。但同样适用于，您可以选择使用 进行循环，或者，如果还不能使用 lambda 函数，使用，使用as guard 的结果：`lat()``lng()``private``MVCArray``forEach()``getAt()``getLength()`

```
polygon.getPath().forEach(function(latLng, idx) {
   var lat = latLng.lat();
   var lng = latLng.lng();
   // do something
}); 
```

或者

```
var path = polygon.getPath();
var len = path.getLength();
for (var idx = 0; idx < len; idx++) {
   var latLng = path.getAt(idx);
   var lat = latLng.lat();
   var lng = latLng.lng();
   // do something
} 
```

如果多边形仅包含一条路径，这些示例是可以的。如果没有，您也必须遍历路径。

# javascript - 在 Jquery 中独立工作的 div

> ID：15616983
> 
> 赞同：0
> 
> 时间：2013-03-25T14:07:18.483
> 
> 标签：javascript, jquery, iframe

我正在尝试制作一个独立工作的 div，其中包含一个表单。

我使用 jquery 根据用户在表单中的选择来计算产品的价格。但是，用户可以在他的“购物车”中添加多个项目，以便将表单复制到另一个 div。问题是计算模式不能将这两个div分开，计算会不正确。该表单也是交互式的，因此它将由用户的输入生成。这是一个非常复杂的设置，并且通过“产品编号”重命名每个变量对我来说听起来并不是很有效。

我有点卡在这里，我真的不知道如何解决这个问题。我有一个想法，如果我在 div 中放置一个 iframe 并在其中加载我的表单及其计算脚本，然后使用 post 命令将产品的价格传输到“主页”以计算总价怎么办用户想要的所有产品。

然而，jQuery 脚本似乎不能在这些 iframe 中独立工作，它们仍然有连接，所以它们互相破坏了。

我将不胜感激任何形式的建议和帮助来解决这个问题，谢谢！

这是到目前为止的代码

这是身体

```
var productNumber = 1; 
```

```
<div id="div_structure">

</div>
<button id="newProduct" >Add new product</button><br \> 
```

添加新项目

```
<!-- language: lang-javascript -->

    $('#newProduct').click(function () 
    { 
        $('<div id="productNo'+productNumber+'">')
         .appendTo('#div_structure')
         .html('<label onclick="$(\'#div_productNo'+productNumber+'\').slideToggle()">Product '+productNumber +' </label>'+
               '<button onclick="$(\'#product'+productNumber+'\').remove()">Remove</button>');
        $('<div id="div_product'+productNumber+'" style="display: none;">').appendTo('#product'+productNumber+'');
$('<iframe src="productform.html" seamless frameborder="0" crolling="no" height="600" width="1000">').appendTo('#div_product'+productNumber+'');
        productNumber++;
    }); 
```

它还具有允许用户删除插入的 div 的功能。

这里只是 productform 中的几行

```
$(document).ready(function()
{
    $('#productCalculation').change(function () 
    {
        shape = $('input[name=productShape]:checked', '#productCalculation').val();
        alert(shape);
    });
}); 
```

```
<form id="productCalculation">
<div id="div_productShape" class="product1">
<h1>Select the shape of the product</h1>
    <input type="radio" name="productShape" value="r1">R1</input><br \>
    <input type="radio" name="productShape" value="r2">R2</input><br \>
    <input type="radio" name="productShape" value="r3">R3</input><br \>
</div>
.
.
.
</form> 
```

我翻译了所有变量，因此它们可能无法正常运行，因为我没有测试翻译版本。所以问题是，如果我尝试在第二个生成的 div 中进行选择，它甚至不会`alert()`选择变量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-31T11:27:35.040

这段代码有两个问题：您在某处说*“我翻译了所有变量，因此它们可能无法正常运行，因为我没有测试翻译版本。所以问题是，如果我尝试在第二个生成的 div 中进行选择它甚至不会 alert() 选定的变量”*。这是因为事件处理程序附加到特定时刻 DOM 中的元素。要使其适用于所有元素，请使用事件委托：

```
$(document).ready(function()
{
    $(document).on( 'change', '#productCalculation', function () 
    {
        shape = $('input[name=productShape]:checked', '#productCalculation').val();
        alert(shape);
    });
}); 
```

您的另一个问题是*“简而言之我的问题：有没有办法限制 jquery 仅在某些 div 中起作用，即使我在第二个 div 中使用相同的变量名”*。您可以使用该`this`变量来访问调用单击的元素。如果需要，您可以从此元素遍历 DOM，例如使用`.parent()`.

```
$('div').on( 'change', function( e ) {
    console.log( $(this).val() );
} ); 
```

# java - java异常处理中的return语句

> ID：15616984
> 
> 赞同：8
> 
> 时间：2013-03-25T14:07:19.957
> 
> 标签：java, exception-handling

如果执行没有导致异常，则控制转到 finally 块。**那么JVM是否忽略了try块中的return语句？**. 或者，如果发生异常，则控制转到 catch 块，它也忽略返回语句和控制转到 finally 块并从 finally 返回

```
 public class Helper {
     public int showException(int a, int b){

           try{
           int c=a/b;
           return c;
           } catch(Exception e){
                return 0;
           } finally{
               return 3;
             }
     }
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T14:09:57.210

因为无论您输入还是`finally`输入，每次都会执行块，我认为这就是为什么它**最终**被调用:)`try``catch`

 **[来自**JAVA 文档**](http://docs.oracle.com/javase/tutorial/essential/exceptions/finally.html)

> finally 块总是在 try 块退出时执行。这样可以确保即使发生意外异常也会执行 finally 块。

## 注意：只有在

> 如果在执行 try 或 catch 代码时 JVM 退出，则 finally 块可能不会执行。同样，如果执行 try 或 catch 代码的线程被中断或杀死，即使应用程序作为一个整体继续运行，finally 块也可能不会执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T14:09:59.387

按照设计，`finally`块中的返回总是优先的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T14:11:40.160

finally 块总是执行无论 try catch 块是否执行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T14:12:46.543

> finally 块总是在 try 块退出时执行。这样可以确保即使发生意外异常也会执行 finally 块。但 finally 不仅仅对异常处理有用——它允许程序员避免清理代码意外地被 return、continue 或 break 绕过。将清理代码放在 finally 块中始终是一个好习惯，即使没有预料到异常也是如此。

[在这里](http://docs.oracle.com/javase/tutorial/essential/exceptions/finally.html)阅读更多

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-25T14:09:58.493

不管 catch 块是否被调用，finally 都会被最后调用。也许您想阅读更多文档。 [MSDN 最后尝试 Catch](http://msdn.microsoft.com/en-us/library/ie/4yahc5d8%28v=vs.94%29.aspx)**

# javascript - AS3 - 获取流连接 ip

> ID：15616987
> 
> 赞同：2
> 
> 时间：2013-03-25T14:07:20.490
> 
> 标签：javascript, actionscript-3, flash, ip

我需要有 Flash 视频播放器的调试/记录信息。

我需要显示客户端 ip 以及流的服务器 ip ......可以这样做吗？

示例流：（实际上它是一个清单，在加载时检索流） [http://multiplatform-f.akamaihd.net/z/multi/april11/hdworld/hdworld_,512x288_450_b,640x360_700_b,768x432_1000_b,1024x576_1400_m,12080x720_1200x720_1200x720x_1920_m_28 ,1280x720_3500_m,.mp4.csmil/manifest.f4m](http://multiplatform-f.akamaihd.net/z/multi/april11/hdworld/hdworld_,512x288_450_b,640x360_700_b,768x432_1000_b,1024x576_1400_m,1280x720_1900_m,1280x720_2500_m,1280x720_3500_m,.mp4.csmil/manifest.f4m)

我可以使用的技术：Javascript、AS3 FLASH。基本上是“whatsmyip”和通过 flash/javascript 进行反向 ip 查找....可能没有服务器端脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:57:16.473

用JS获取客户端IP：

```
<script type="text/javascript">
    function getip(data){
      alert(data.ip);
    }
</script>
<script type="text/javascript" src="http://jsonip.appspot.com/?callback=getip">
</script> 
```

或使用 php：

```
<?php
    echo $_SERVER['REMOTE_ADDR'];
?> 
```

仅使用服务器端脚本获取服务器 IP，例如 php：

```
<?php
$ip = gethostbyname('www.example.com');

echo $ip;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:15:53.403

我在网上找到[的](http://forums.adobe.com/message/3422604)，不知道对你有没有帮助。希望确实如此。

# c# - WP7 - 在导航 GoBack() 上刷新 ListBox

> ID：15616988
> 
> 赞同：0
> 
> 时间：2013-03-25T14:07:23.050
> 
> 标签：c#, windows-phone-7, xaml, windows-phone-7.1

我有一个 MainPage.xaml，其中是 ListBox 和 Button。当我单击该按钮时，MainPage 被导航到 AddPage.xaml。此页面用于添加新项目，有两个文本框和提交按钮。当我单击该提交按钮时，TextBoxes 中的数据将保存到 XML 文件中，然后调用 GoBack()。

当我从 AddPage.xaml 返回时，我需要刷新 MainPage.xaml 中的 ListBox，但它不会自动工作。我怎样才能做到这一点？

我的 MainViewModel.cs

```
public class MainViewModel : INotifyPropertyChanged
{
    public ObservableCollection<Context> Contexts { get; private set; }

    public MainViewModel()
    {
        this.Contexts = new ObservableCollection<Context>();
    }

    public bool IsDataLoaded
    {
        get;
        private set;
    }

    public void LoadData()
    {
        try
        {
            var file = IsolatedStorageFile.GetUserStoreForApplication();
            XElement xElem;

            using (IsolatedStorageFileStream read = file.OpenFile("contexts.xml", FileMode.Open))
            {
                xElem = XElement.Load(read);
            }

            var contexts = from context in xElem.Elements("Context")
                           orderby (string)context.Element("Name")
                           select context;

            foreach (XElement xElemItem in contexts)
            {
                Contexts.Add(new Context
                {
                    Name = xElemItem.Element("Name").Value.ToString(),
                    Note = xElemItem.Element("Note").Value.ToString(),
                    Created = xElemItem.Element("Created").Value.ToString()
                });
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }

        this.IsDataLoaded = true;
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(String propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (null != handler)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

和 Context.cs

```
public class Context : INotifyPropertyChanged
{
    private string _name;
    public string Name
    {
        get
        {
            return _name;
        }
        set
        {
            if (value != _name)
            {
                _name = value;
                NotifyPropertyChanged("Name");
            }
        }
    }

    private string _note;
    public string Note
    {
        get
        {
            return _note;
        }
        set
        {
            if (value != _note)
            {
                _note = value;
                NotifyPropertyChanged("Note");
            }
        }
    }

    private string _created;
    public string Created
    {
        get
        {
            return _created;
        }
        set
        {
            if (value != _created)
            {
                _created = value;
                NotifyPropertyChanged("Created");
            }
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(String propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (null != handler)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:13:30.967

您需要告诉主页有要重新加载的新数据。
最简单的情况是这样的：

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    if (e.NavigationMode == NavigationMode.Back)
    {
        (this.DataContext as MainViewModel).LoadData();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:13:57.277

提示：您不会为视图模型的属性引发属性更改通知。

在 MainPage 的加载事件上，调用 LoadData。在添加任何内容之前，您还应该在调用 LoadData 方法时清除可观察集合，因为简单地加载数据会导致集合中出现重复条目​​。

# android - 使用自定义适配器的 Gridview 不显示所有结果

> ID：15616989
> 
> 赞同：0
> 
> 时间：2013-03-25T14:07:31.053
> 
> 标签：android, android-gridview, layout-inflater, android-cursor

首先非常感谢所有回答问题并提供对挑战的洞察力的专家。您的工作受到赞赏。
现在，我是一个新手，刚开始使用 java 和 Android ......但我很喜欢它。其次，
请原谅我的代码。它是我的第一个 Android 应用程序...从 13 年的 vb 和 vba 发展而来 :) 并且其中大部分是根据 stackoverflow 上的用户问题修改的。

背景：
我有一个网格视图，我想从通话记录中显示联系人数据（姓名和号码）。
为了消除重复号码，我当然会遍历光标并比较电话号码，然后按 CallLog.Calls.NUMBER + "ASC" 对传入的光标数据进行排序；

我还创建了自己的类（ContactObj），其中包含联系人的姓名、号码和 ID，并且我将此类传递给 ArrayList。最终我将这个 ArrayList 传递给一个自定义适配器，该适配器使用布局充气器来填充网格。

问题：
由于某种原因，程序运行良好，但前十个联系人一遍又一遍地重复。IE。我的电话日志上的联系人总数是 113 个唯一的。但是，网格仅反复显示前 10 个，总共 113 个。

问题：
也许这方面的“老手”可以指出我哪里出错了？我猜这与我实现为 gridview 提供数据的自定义适配器有关。

在我调试时，注意到 mChildrenCount 的值固定为 11，这是设计模式下 gridview 中单元格的计数。出于某种原因，每当达到这个数字时，gridview 就会再次从 0 开始并重复数据。似乎我缺少一些设置以允许网格超出设计期间显示的单元格。...有什么想法吗？谢谢。

这是主要活动的代码

```
 public class CallLogActivity extends Activity {
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.gridview);
    final Context myContext = CallLogActivity.this;
    final CustomAdapter mAdapter;

    ArrayList<ContactObj> arrToPassToGrid = new ArrayList<ContactObj>();

    String strNameHolder = "";
    String strCurrentName;
    String strNumber;
    String strCallDate;
    String ID;
    int i = 0;
    int ComparisonResult;

    // first find the grid
    GridView callLogGrid = (GridView) findViewById(R.id.callLogGrid);
    // next get the contents to display
    Long yourDateMillis = System.currentTimeMillis()- (30 * 24 * 60 * 60 *                 '               `1000);
    Time yourDate = new Time();
    yourDate.set(yourDate);
    String[] YourDateMillistring = {String.valueOf(yourDateMillis)};
    String formattedDate = yourDate.format("%Y-%m-%d %H:%M:%S");
    Time tempDate;
    Cursor Tempcursor;
    Cursor cursor;

    cursor = getContentResolver().query(CallLog.Calls.CONTENT_URI,
    new String[]{CallLog.Calls._ID, 
    CallLog.Calls.CACHED_NAME,
    CallLog.Calls.NUMBER, 
    CallLog.Calls.DATE}, 
    null, 
    null,
    CallLog.Calls.NUMBER + " ASC");

    startManagingCursor(cursor);
    // intialize nameholder ----will be used to remove duplicate names in

    strNameHolder = "";
    if (cursor.moveToFirst()) {

              while (cursor.moveToNext()) {
    // place contents in variables for easier reading later on;
    strCurrentName =   
    cursor.getString(cursor.getColumnIndex(CallLog.Calls.CACHED_NAME));
         strNumber =   cursor.getString(
    cursor.getColumnIndex(CallLog.Calls.NUMBER)).trim();
    strCallDate = cursor.getString(cursor.getColumnIndex(CallLog.Calls.DATE));
    ID = cursor.getString(cursor.getColumnIndex(CallLog.Calls._ID));

            if (strCurrentName == null && strNumber == null) {
                ComparisonResult = 0;
            } else {

                ComparisonResult = strNameHolder
                        .compareToIgnoreCase(strNumber);
            }

            if (ComparisonResult != 0) {
                ContactObj contList = new ContactObj();
                contList.setIndex(i);
                contList.setContactName(strCurrentName);
                contList.setContactDialledNumber(strNumber);
                contList.setContact_ID(ID);
                contList.setCallDate(strCallDate);
                arrToPassToGrid.add(i, contList);

                i++;

            }
            strNameHolder =   cursor.getString(
                            cursor.getColumnIndex(CallLog.Calls.NUMBER)).trim();
        };

    };

    try {
        // Collections.sort(arrToPassToGrid)
        mAdapter = new CustomAdapter(this, arrToPassToGrid);
        callLogGrid.setAdapter(mAdapter);
    } catch (Exception e) 
        {
            Log.d("Kush", e.getMessage());
            e.printStackTrace();
        }
} 
```

此代码是我的自定义适配器

```
 public class CustomAdapter extends BaseAdapter {
    private Context mContext;
    private ArrayList<ContactObj> mItems;
    public CustomAdapter(Context c, ArrayList<ContactObj> items) 
    {
        mContext = c;
        mItems = items;
    }

    public int getCount() 
    {
        return mItems.size();
    }

    public Object getItem(int position) 
    {
        return mItems.get(position);
    }

    public long getItemId(int position) 
    {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
    View v = convertView;
    if (v == null) {

 LayoutInflater li = (LayoutInflater)
     mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    v = li.inflate(R.layout.calllog_layout, null);

    Log.d("Kush",String.valueOf(getCount()));

    TextView txtContactName = (TextView)v.findViewById(R.id.txtContactName);
    txtContactName.setText(mItems.get(position).getContactName() );

    TextView txtNumber = (TextView)v.findViewById(R.id.txtContactNumber);
    txtNumber.setText(mItems.get(position).getContactDialledNumber());

    TextView txtDate = (TextView)v.findViewById(R.id.txtCallDate);
    txtNumber.setText(String.valueOf(position) );

    }

    return v;

    }
    public static String getDate(long milliSeconds, String dateFormat)
    {
    SimpleDateFormat formatter = new SimpleDateFormat(dateFormat);

         Calendar calendar = Calendar.getInstance();
         calendar.setTimeInMillis(milliSeconds);
         return formatter.format(calendar.getTime());
    }
    } 
```

这是保存联系方式的对象

```
 public class   ContactObj {
    private String ContactName;
    private String ContactDialledNumber;
    private String Contact_ID;
    private String CallDate;

    public final String getCallDate() 
    {
        return CallDate;
    }

    public final void setCallDate(String callDate) 
    {
        CallDate = callDate;
    }

    private int index;
    // @return the contactName
     public final String getContactName() 
    {
        return ContactName;
    }

     // @param contactName the contactName to set
    public final void setContactName(String contactName) 
    {
        ContactName = contactName;
    }

     //@return the contactDialledNumber

    public final String getContactDialledNumber() 
    {
        return ContactDialledNumber;
    }

    //@param contactDialledNumber the contactDialledNumber to set

    public final void setContactDialledNumber(String contactDialledNumber) 
    {
        ContactDialledNumber = contactDialledNumber;
    }

    //@return the contact_ID
    public final String getContact_ID() 
    {
        return Contact_ID;
    }

    // @param contact_ID the contact_ID to set
    public final void setContact_ID(String contact_ID) 
    {
        Contact_ID = contact_ID;
    }

    //@return the index
    public final int getIndex() 
    {
        return index;
    }

    //@param index the index to set
    public final void setIndex(int index) 
    {
        this.index = index;
    }

    } 
```

最后是gridview和布局

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:gravity="center_horizontal"
        android:id="@+id/GridItem"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/grid_item_image"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:scaleType="centerCrop" />

        <TextView
            android:gravity="center_horizontal"
            android:id="@+id/txtContactName"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:text="@string/contactName"
            android:textColor="#000000" />
        <TextView
            android:gravity="center_horizontal"
            android:id="@+id/txtContactNumber"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:text="@string/contactNumber"
            android:textColor="#000000" />
        <TextView
            android:gravity="center_horizontal"
            android:id="@+id/txtCallDate"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:text="@string/CallDate"
            android:textColor="#000000" />
                     </LinearLayout> 
```

和网格视图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:40:47.460

txtContactName.setText(mItems.get(position).getContactName());

这些语句应该在 if 条件之外。还要检查一次查看器的[使用情况](http://vsvydenko.blogspot.in/2011/06/android-use-viewholder.html)。

可能你会得到解决方案。

# javascript - Mootools - 如何制作带有箭头的新闻滑块（股票行情）

> ID：15616991
> 
> 赞同：0
> 
> 时间：2013-03-25T14:07:36.063
> 
> 标签：javascript, slider, mootools, news-ticker

我正在开发一个使用 Mootools 作为 Javascript 框架的网站。

我需要在页面顶部的水平新闻自动收报器中发布一些最近的新闻。我希望有 4 或 5 条不同的新闻（总共 20 条）同时可见并旋转。

我找到了以下干净的脚本：

```
/* ImageSlider
* version 0.1 *
* Copyright (c) 2008-2010 ecce media Ltd (www.eccemedia.com) *
     * http://www.eccemedia.com/blog/blog.html&blogid=5 *
     */

    var ImageSlider = new Class({
        Implements: [Options],
        options: {
            sliders: 'slider-list',
            transitionduration:5000,
            autorotate:true,
            transition:Fx.Transitions.linear
        },
        initialize: function(options) {
            this.setOptions(options);
            var c = this;
            var op = this.options;
            if(op.autorotate) this.animate();
            $(op.sliders).addEvent('mouseover',function(){op.SlideFX.pause();});
            $(op.sliders).addEvent('mouseleave',function(){op.SlideFX.resume();});

        },
        animate:function(){
            var c = this;
            var op = this.options;
            var sliders = $$('#'+op.sliders+' li');
            if(sliders.length>0){
                op.SlideFX = new Fx.Tween(sliders[0],{'transition':op.transition,'duration':op.transitionduration,'onComplete':function(){
                    sliders[0].inject($(op.sliders));
                    sliders[0].setStyle('margin-left',0);
                    c.animate();
                }});
                op.SlideFX.start('margin-left', -sliders[0].getSize().x);
            }
        }
    });

var sliderID = new ImageSlider({'sliders':'TickerHorizontal','transitionduration':6000}); 
```

看起来像

```
<div id="TickerHorizontal">
<ul>
<li>.....</li>
<li>.....</li>
<li>.....</li>
</ul>
</div> 
```

该脚本在鼠标悬停时滑动和停止都很好，但是我在添加按钮以手动向前和向后移动时遇到了困难

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:53:17.023

好的，找到了一个很棒的 Mootools 画廊，它正是我需要的，甚至更多： [https ://github.com/ginger/slideGallery](https://github.com/ginger/slideGallery)