# StackOverflow 问答 13009000-13009999

# tortoisesvn - 修改最近提交消息列表

> ID：13009001
> 
> 赞同：1
> 
> 时间：2012-10-22T10:00:59.200
> 
> 标签：tortoisesvn

提交时，tortoisesvn 允许您从“最近的消息”队列中选择一个消息（参见[http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-commit.html](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-commit.html)）

当使用 tortoisesvn 执行合并时，它会自动生成一条提交消息并将其放入最近的提交消息历史队列中。这样，可以打开提交菜单并轻松选择它。

使用脚本创建了我自己的 svn 工作流程后，我也想做同样的事情。有可能吗？

我在 .svn 或 Subversion 配置目录中搜索了已知字符串，但找不到要编辑的列表。

我正在使用 TortoiseSVN 1.7.7。

# jsf - 如何在方法中传递 EL 参数？

> ID：13009004
> 
> 赞同：1
> 
> 时间：2012-10-22T10:01:01.323
> 
> 标签：jsf, el

在支持 bean 方法上传递参数时，我只是有一个问题。

我想在方法参数之间传递一个 EL 值，例如：

```
<p:selectOneMenu id="somsgroup" value="#{store_itemController.filter_sgroup}">
   <f:selectItems value="#{commonDataFunctions.getItemByName('store_sgroup', 'id', 'title', '[tb:store_sgroup][fd:title]=${store_itemController.filter_group}', '[tb:store_sgroup][fd:title]', true)}"/>
</p:selectOneMenu> 
```

似乎`${store_itemController.filter_group}`它没有被翻译，因为该方法`${store_itemController.filter_group}`就像一个字符串一样接收。

有解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:03:57.787

您确实不能以这种方式嵌套 EL 表达式。EL 表达式只能内联。

您可以使用`<c:set>`创建一个新变量，其中所需的表达式内联在所需的值中，然后将此变量重用为另一个 EL 表达式的参数。

```
xmlns:c="http://java.sun.com/jsp/jstl/core"
...
<c:set var="filterGroup" value="[tb:store_sgroup][fd:title]=#{store_itemController.filter_group}" scope="request" />
...
<f:selectItems value="#{commonDataFunctions.getItemByName('store_sgroup', 'id', 'title', filterGroup, '[tb:store_sgroup][fd:title]', true)}"/> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-22T12:00:11.277

我想建议使用`JBoss EL`. 如果是这样，您需要在`web.xml`. [在此处](http://ebr.springsource.com/repository/app/bundle/version/detail?name=com.springsource.org.jboss.el&version=2.0.0.GA&searchType=bundlesByName&searchQuery=expression)下载 jar 文件并参考[上一篇文章](https://stackoverflow.com/questions/12929488/trying-to-nest-jsf-expression-strings/12929672#12929672)。

```
<context-param>     
    <param-name>com.sun.faces.expressionFactory</param-name>
    <param-value>org.jboss.el.ExpressionFactoryImpl</param-value>   
</context-param> 
```

# c++ - 指针增量 - 奇怪

> ID：13009005
> 
> 赞同：2
> 
> 时间：2012-10-22T10:01:04.530
> 
> 标签：c++, pointers

```
struct BLA
{
    int size_;

    int size()const{ return size_; }
}

int x;
BLA b[ 2 ];
BLA * p = &b[ 0 ];

b[ 0 ].size_ = 4;
b[ 1 ].size_ = 6; 
```

当我编译这一行时：

```
x = p->size_ + (p++)->size_; 
```

我收到了预期的结果。但是，当我编译这一行时（没有前一行）：

```
x = p->size() + (p++)->size(); 
```

然后我得到不同的结果。'p' 与前一行不同。有人可以解释一下吗？在 VS 2008 和 VS 2010 上试过。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T10:06:29.683

在没有中间序列点的情况下单独读取和修改变量是未定义的行为。你已经看到了一个很好的例子来说明它的后果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:06:39.583

在我编译您的代码后，在我的两种情况下 x 都是 8。既单独使用，又组合使用。我想指出，使用 p++ 被认为是未定义的行为，它警告我的那一行就是那一行。

但是，编译器警告我`warning: operation on 'p' may be undefined`.

编辑：我想指出正确的指针算术是：`x = p->size_ + (p+1)->size_;`在这种情况下。

# delphi - FASM - 将字符串传递给 Delphi DLL

> ID：13009012
> 
> 赞同：2
> 
> 时间：2012-10-22T10:01:42.307
> 
> 标签：delphi, dll, dllimport, messagebox, fasm

我有一个用 Delphi XE2 编码的 dll，代码如下：

```
procedure xMain(MSG:String);export;
begin
  MessageBox(0,PWideChar(MSG),'Title',0);
end;

exports xMain; 
```

现在，我在 FASM 应用程序中导入这个函数，如下所示：

```
library  dllfile, "testdll.dll"

import   dllfile,\
         xMain,   "xMain" 
```

使用方式如下：

```
section ".data" data readable writeable

szMSG     db "Message from FASM application!",0

section ".code" code readable executable

invoke    xMain,szMSG 
```

但是生成的消息框出现扭曲的字符，如下所示：

![在此处输入图像描述](../Images/fff8b645c48788c8502d05218c46af34.png)

这是函数调用的确切结果。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T13:41:18.650

您的输出是当您将 ANSI 文本发送到需要 UTF-16 编码文本的函数时发生的情况。我从中得出结论，您的 FASM 代码正在向 DLL 发送 ANSI 有效负载。并且 DLL 是在一个 Unicode 感知的 Delphi 中编译的，这`string`意味着`UnicodeString`，`Char`手段`WideChar`等等。

您需要使两侧匹配。例如，通过更改 Delphi 代码：

```
procedure xMain(Msg: PAnsiChar); stdcall;
begin
  MessageBoxA(0, Msg, 'Title', 0);
end; 
```

其他一些需要注意的点：

1.  您不需要`export`在函数声明的末尾。现代 Delphi 编译器忽略了它。
2.  不要跨模块边界使用 Delphi 的托管字符串。在任何情况下，在 FASM 方面，您都将参数声明为指向 ANSI 编码字符数组的空终止指针。那就是`PAnsiChar`。
3.  您的代码使用 Delphi`register`调用约定。很难相信 FASM 会使用它。我希望`stdcall`和 Sertac 的回答支持这一点

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-29T20:54:41.753

以下是两个工作示例（使用 FASM 1.70.03 for Windows）：

Ansi版本，
dll：

```
library testdll;

uses
  windows;

procedure xMain(MSG: PAnsiChar); export; stdcall;
begin
  MessageBoxA(0, PAnsiChar(MSG), 'Title', 0);
end;

exports xMain;

begin
end. 
```

可执行程序：

```
format PE CONSOLE 4.0
entry start

include 'win32a.inc'

section '.code' code readable executable
  start:
    invoke xMain, szMSG
    invoke ExitProcess, 0

section '.data' data readable writeable
    szMSG db 'Message from FASM application!', 0

section '.idata' import data readable writeable
  library kernel32, 'kernel32.dll',\
          dllfile, 'testdll.dll'

  include 'api\kernel32.inc'

  import dllfile,\
         xMain, 'xMain' 
```

Unicode 版本，
dll：

```
library testdll;

uses
  windows;

procedure xMain(MSG: PChar); export; stdcall;
begin
  MessageBox(0, PChar(MSG), 'Title', 0);
end;

exports xMain;

begin
end. 
```

可执行程序：

```
format PE CONSOLE 4.0
entry start

include 'win32w.inc'

section '.code' code readable executable
  start:
    invoke xMain, szMSG
    invoke ExitProcess, 0

section '.data' data readable writeable
    szMSG du 'Message from FASM application!', 0

section '.idata' import data readable writeable
  library kernel32, 'kernel32.dll',\
          dllfile, 'testdll.dll'

  include 'api\kernel32.inc'

  import dllfile,\
         xMain, 'xMain' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T18:00:53.317

您确定您的 MSG 参数应该是 a`String`而不是 a`PChar`吗？

# php - 在php中使用纬度和经度获取时间

> ID：13009017
> 
> 赞同：0
> 
> 时间：2012-10-22T10:01:53.897
> 
> 标签：php, time, latitude-longitude

> **可能重复：**
> [从纬度经度](https://stackoverflow.com/questions/41504/timezone-lookup-from-latitude-longitude)
> [PHP IF声明基于地理位置的时区查找？](https://stackoverflow.com/questions/10004294/php-if-statment-based-on-geo-location)

我应该如何使用它的纬度和经度来获得一个位置的确切时间？

# javascript - 在 jquery 对话框函数中动态调用 javascript 函数

> ID：13009024
> 
> 赞同：2
> 
> 时间：2012-10-22T10:02:04.707
> 
> 标签：javascript, jquery, jquery-ui

当按下是按钮时，我想在 jQuery 对话框中调用一个函数作为参数。我正在使用以下代码，但这不起作用。

```
function showYesNoAlertMsg(divId,optFunction){
 //window[optFunction].apply(null, Array.prototype.slice.call(arguments, 2));
$('#'+divId).dialog('open');
$('#'+divId).dialog({
            autoOpen: true,
            width: 400,
            height: 175,
            modal: true,
            resizable: false,
            buttons: {
                "Yes": function() {
                 window[optFunction].apply(null, 
                                     Array.prototype.slice.call(arguments, 2));
                       $(this).dialog("close");
                },
                "No": function() {
                       $(this).dialog("close");
                }
            }
              });   
             }

       function newfunc(a,b){
            alert(a+'--'+b);
          }

       <input type="button" name="alert" id="alert" 
            onclick="showYesNoAlertMsg('boxDivId','newfunc','aaaaa','bbbbb');"/>

     <div id="boxDivId">
         hello
      </div> 
```

当我单击名为“alert”的按钮时，该函数`showYesNoAlertMsg`被调用，它完美地显示了 id 为“boxDivId”的对话框，但我想在“是”按钮上调用名为“newFunc”的函数。我将此函数作为参数传递，但它在对话框属性中不起作用。如果我取消注释中的第一个注释行`showYesNoAlertMsg`，则此行可以正常工作并完美地调用函数“newFunc”。但同一行在“是”按钮中不起作用。请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:09:25.197

在类似的情况下，我使用了这种方法：

```
 function showYesNoAlertMsg(divId, optFunction, optFunctionParams) {
      if (!$.isArray(optFunctionParams)) {
           optFunctionParams = Array.prototype.slice.call(arguments, 2);
      }

      $('#' + divId).dialog({
           autoOpen: true,
           width: 400,
           height: 175,
           modal: true,
           resizable: false,
           buttons: {
                "Yes": function () {
                     if (optFunction && typeof optFunction == "function") {
                          optFunction.apply(window, optFunctionParams || []);
                     }
                     $(this).dialog("close");
                },
                "No": function () {
                     $(this).dialog("close");
                }
           }
      });
 }

 function newfunc(a, b) {
      alert(a + '--' + b);
 }

 <input type="button" name="alert" id="alert" value="Click Me"
      onclick="showYesNoAlertMsg('boxDivId', newfunc, ['aaaaa','bbbbb']);" /> 
```

如果要使用`arguments`，则需要将其值在`showYesNoAlertMsg`上下文中缓存到某个变量中，就像在`Yes`按钮的单击事件处理程序中一样，它已经是此处理程序函数的参数

# actionscript-3 - 来自 Flash 的用户注释的 Facebook 共享参数

> ID：13009030
> 
> 赞同：1
> 
> 时间：2012-10-22T10:02:16.827
> 
> 标签：actionscript-3

目前我正在使用下面的链接和参数在 facebook 上分享。这个链接运作良好。

`http://www.facebook.com/sharer/sharer.php?s=100&p[url]=testURL&p[images][0]=testImagePath&p[title]=testTilte&p[summary]=userMessage`

我还需要动态添加用户注释。可以通过参数实现吗？

# linq-to-sql - LINQ - 组中的第一次出现

> ID：13009033
> 
> 赞同：1
> 
> 时间：2012-10-22T10:02:27.040
> 
> 标签：linq-to-sql

我有用户记录集，我想获取重复 usrEmployeeID 字段值的每一行第一次出现的列表。

```
var uniqueuser = 
    from ur in Users 
    group ur by ur.UsrEmployeeID into g 
    select new User { 
        g.Select(x => x).First()
    }; 
```

这个不行？？

无法使用集合初始化程序初始化“用户”类型的对象

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:08:36.033

结果`First()`是一个`User`。您不必使用`new`.

```
var uniqueuser = from ur in Users 
                 group ur by ur.UsrEmployeeID into g
                 select g.First(); 
```

# tomcat - Tomcat conf文件夹位置更改？

> ID：13009039
> 
> 赞同：0
> 
> 时间：2012-10-22T10:02:47.780
> 
> 标签：tomcat, path, config

有没有办法将tomcat的conf文件夹位置更改为bin旁边的位置？

现在是这样的：

```
Tomcat-
       斌
       会议
       网络应用
       日志
       工作
       温度

```

我希望它是这样的：

```
Tomcat-
       斌
       网络应用
       日志
       工作
       温度

/var/tomcat_conf

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-16T07:55:46.327

我认为你只有一种可能在不修补 tomcat 的情况下做这样的事情：

使用符号链接将 conf 目录重定向到您选择的目录：

```
mv conf /var/tomcat_conf
ln -s /var/tomcat_conf conf 
```

这是`/usr/share/tomcat6`我的 Fedora 核心系统的清单：

```
drwxr-xr-x. 2 root root   4096 May 16 09:51 bin
lrwxrwxrwx. 1 root tomcat   12 May 16 09:51 conf -> /etc/tomcat6
lrwxrwxrwx. 1 root tomcat   23 May 16 09:51 lib -> /usr/share/java/tomcat6
lrwxrwxrwx. 1 root tomcat   16 May 16 09:51 logs -> /var/log/tomcat6
lrwxrwxrwx. 1 root tomcat   23 May 16 09:51 temp -> /var/cache/tomcat6/temp
lrwxrwxrwx. 1 root tomcat   24 May 16 09:51 webapps -> /var/lib/tomcat6/webapps
lrwxrwxrwx. 1 root tomcat   23 May 16 09:51 work -> /var/cache/tomcat6/work 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-23T09:38:30.090

尽管您的问题是很久以前发布的，但它现在在容器世界（Docker、rkt 等）中具有更多的相关性。

容器应该被视为“一次性的”，因此如果您在容器中运行 tomcat，那么如果容器被销毁，您的所有配置更改和日志都将丢失。

避免这种情况的一种方法是为容器提供一些挂载点，指向主机文件系统上的目录或容器外部的特定容器提供者管理的“卷”——这些在容器销毁和容器升级周期中持续存在，因此您不会丢失其中的数据。

在幕后，我认为它们是作为符号链接实现的，但您不必担心底层细节。

例如，这个来自“dordoka”的 tomcat 镜像是用 docker 像这样启动的：

```
sudo docker run -d -p 8080:8080 -p 8009:8009 -v /opt/tomcat/webapps:/opt/tomcat/webapps dordoka/tomcat 
```

/opt/tomcat/webapps 是容器主机文件系统上的一个目录，当它读取 /opt/tomcat/webapps 时，tomcat 将访问它

# wifi - 为什么 IEEE802.11w 不保护公共动作帧？

> ID：13009041
> 
> 赞同：2
> 
> 时间：2012-10-22T10:02:55.203
> 
> 标签：wifi

目前我正在研究 802.11 协议。我发现在 802.11w Public Action Frame 中并不健壮。令人惊讶的是，在[TGw 的报告](http://www.ieee802.org/11/Reports/tgw_update.htm)中，我看到了关于这个主题的讨论。因此，为什么他们决定不保护公共行动框架？

# sorting - 排序照片：时间聚类插件或软件

> ID：13009044
> 
> 赞同：1
> 
> 时间：2012-10-22T10:03:09.540
> 
> 标签：sorting, cluster-analysis, photo, temporal

简而言之：我想对一个包含大量照片的目录进行聚类，以获得每组大约三张照片。（每个集群都出现在即将存在的相册的一页上。）

我环顾四周，发现了一些链接/方法：

*   维基百科将此功能列为[“图像组织的未来”](http://en.wikipedia.org/wiki/Image_organizer#Future_of_image_organization)。
*   关于这个主题有一些旧的（2003 年）论文，例如[这里](http://dl.acm.org/citation.cfm?id=957093)。
*   我知道配备基本版本的相册软件。所以，已经有解决方案了。（当然，不清楚他们是否只是使用某种阈值方法来处理照片间的时间差。）
*   您可以轻松地按日期对照片进行排序（和移动）：使用 shell 或 exiftool。（对不起，不能在这里发布链接，因为我仅限于两个链接。但是一个简单的搜索就可以了。）

然而，他们还不够满意。所以我的问题是：

是否有实现时间或事件聚类算法的软件包或插件或脚本（最好是开源的）？

**编辑：**

好的，我们举个例子。假设您正在前往...威尼斯。我们减少到一天（天排序很容易）。我们在这里和那里拍了一些照片，然后参观了圣马可广场（通常用英语称为圣马可广场）。圣马可大教堂是我们的第一个目标，然后是钟楼的一张照片。我们花时间喝杯咖啡，再次起床“射”鸽子，然后再次“射杀”大教堂。

所以我们有一些类似的照片（大教堂的），但不是按时间顺序排列的。我们还有一些按时间顺序排列的其他照片。现在如果在相册的左边有大教堂，右边有鸽子和钟楼，那就太好了。

是的，这肯定可以手动完成，但这不是问题的一部分：明确需要一种自动化的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:32:58.987

您可能不想对数据进行*聚类*，而是进行某种*间隔拆分*。

即，您保留原始的时间顺序，并在一张图像与前一张图像不够匹配时尝试分割图像。这让事情变得容易多了，因为您可能只需将每个图像与前面的图像进行比较，而不是将任何 2 个图像相互比较即可。

尝试任何上述方法来计算图像相似度。颜色直方图可能是一个好的开始。按时间对所有图像进行排序，计算与前面的相似度并绘制它们。然后检查您是否可以*直观地*看到数据中的良好分割点。如果您看不到它们，也不要指望程序能够找到它们。

# c - Visual Studio 2010 中的 SOIL 设置

> ID：13009049
> 
> 赞同：7
> 
> 时间：2012-10-22T10:03:15.843
> 
> 标签：c, visual-studio, opengl, soil

我无法让 [SOIL](http://www.lonesock.net/soil.html)在 Visual Studio 2010 中正常工作——我远非 VS 专家，但据我所知，让环境正常工作只需要以下步骤：

属性>>C/C++>General>>Additional include目录 添加到SOIL.h的路径

属性>>链接器>>常规>>附加库目录添加到libSOIL.a的路径

我也在使用免费的 GLUT，并且 glut 文件的路径也在此处设置——我还将 Dubugging>>Environment Path 设置为 GLUT bin 文件。

当我使用 SOIL_load_OGL_texture 时，出现以下错误：

错误 LNK2019：函数“void __cdecl init(void)”(?init@@YAXXZ) 中引用的未解析外部符号 _SOIL_load_OGL_texture

尝试将 libSOIL.a 重命名为 libSOIL.lib 和 SOIL.lib，但没有成功。然后，我构建了 VC8 项目并按照此处的建议使用了该 .lib [土壤未正确链接，](https://stackoverflow.com/questions/9629349/soil-not-linking-correctly)但这也不起作用。

我正在使用他们主页上的示例代码

```
GLuint tex_2d;
tex_2d = SOIL_load_OGL_texture
    (
        " C:\\Sunset.png",
        SOIL_LOAD_AUTO,
        SOIL_CREATE_NEW_ID,
        SOIL_FLAG_MIPMAPS | SOIL_FLAG_INVERT_Y | SOIL_FLAG_NTSC_SAFE_RGB | SOIL_FLAG_COMPRESS_TO_DXT
    );

/* check for an error during the load process */
if( 0 == tex_2d )
{
    printf( "SOIL loading error: '%s'\n", SOIL_last_result() );
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-04-19T23:07:55.580

可能是旧线程，我仍然会分享一些东西。

1.  [从http://www.lonesock.net/soil.html](http://www.lonesock.net/soil.html)下载 zip并解压缩。

2.  在您的 Visual Studio 项目包含路径（项目 -> 属性 -> vc++ 目录 -> 包含目录）中，将路径添加到 Soil 的“src”文件夹。-> 库目录的相同位置添加“lib”文件夹。项目 -> 属性 -> 链接器 -> 输入 -> 附加依赖项 -> 编辑以添加“SOIL.lib”

3.  这一步很重要，因为人们倾向于将该 .a 文件重命名为 .lib。不要那样做。而是进入“项目”文件夹，选择一个 VC*（例如 VS2012 的 VC8）-> 打开 Visual Studio 文件-> 它将使用您的 Visual Studio 打开-> 单击确定-> 单击确定。您的解决方案将准备就绪。

现在按 F5/Run 构建并运行。执行此操作时要小心，以防您的项目使用 x64 调试版本，然后在此处选择相同的版本，然后再构建解决方案。

4.  将在 VC* 文件夹中创建文件夹/文件。进入 Debug/x64（取决于您的项目），将 SOIL.lib 文件复制到原始“lib”文件夹（您在步骤 2 中的 Visual Studio 属性中指向）。

至此，您就完成了。它应该工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T14:07:59.693

听起来你实际上并没有`SOIL.lib`列入你的`Properties -> Linker -> Input -> Additional Dependencies`名单。

FreeGLUT 标头有一些[特定于 Win32 的`#pragma`s](http://msdn.microsoft.com/en-us/library/7f0aews7%28v=vs.100%29.aspx)来提取正确的`.lib`文件，这就是为什么只设置`Additional Library Directories`工作的原因。SOIL 没有这些，因此您必须专门告诉链接器`.lib`使用哪个。

# ruby-on-rails-3 - Heroku运行rake db：迁移角色错误？

> ID：13009060
> 
> 赞同：0
> 
> 时间：2012-10-22T10:04:07.163
> 
> 标签：ruby-on-rails-3, postgresql, heroku

我刚刚成功地将我的应用程序推送到 Heroku。但是，在尝试运行时`heroku run rake db:migrate`，我收到了这个奇怪的错误：

```
heroku run rake db:migrate --remote staging --trace                                                                                                                                        [ruby-1.9.3-p125@ramen]
Running `rake db:migrate --trace` attached to terminal... up, run.1
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/Rakefile:7)
** Invoke db:migrate (first_time)
** Invoke environment (first_time)
** Execute environment
rake aborted!
FATAL:  role "ngbmsmmcogkdfv" is not permitted to log in
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:1213:in `initialize'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:1213:in `new'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:1213:in `connect'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:329:in `initialize'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in `new'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:28:in `postgresql_connection'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:309:in `new_connection'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:319:in `checkout_new_connection'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:241:in `block (2 levels) in checkout'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:236:in `loop'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:236:in `block in checkout'
/usr/local/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:233:in `checkout'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:96:in `block in connection'
/usr/local/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:95:in `connection'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_pool.rb:404:in `retrieve_connection'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:170:in `retrieve_connection'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:144:in `connection'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/model_schema.rb:308:in `clear_cache!'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/railtie.rb:97:in `block (2 levels) in <class:Railtie>'
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:418:in `_run__988607377061129518__prepare__148721129126176046__callbacks'
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_prepare_callbacks'
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
/app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/reloader.rb:74:in `prepare!'
/app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/reloader.rb:48:in `prepare!'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/application/finisher.rb:47:in `block in <module:Finisher>'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `instance_exec'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `run'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:55:in `block in run_initializers'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `run_initializers'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:136:in `initialize!'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
/app/config/environment.rb:29:in `<top (required)>'
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `block in require'
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:103:in `require_environment!'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:295:in `block (2 levels) in initialize_tasks'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/usr/local/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:176:in `block in invoke_prerequisites'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `invoke_prerequisites'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:157:in `block in invoke_with_call_chain'
/usr/local/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/app/vendor/bundle/ruby/1.9.1/bin/rake:19:in `load'
/app/vendor/bundle/ruby/1.9.1/bin/rake:19:in `<main>'
Tasks: TOP => db:migrate => environment 
```

有人知道我为什么会得到这个吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T11:14:41.043

在 Heroku 文档中回答：[https ://devcenter.heroku.com/articles/postgres-logs-errors#fatal-role-role-name](https://devcenter.heroku.com/articles/postgres-logs-errors#fatal-role-role-name)

当您取消配置爱好层数据库但仍在尝试连接到它时，会发生这种情况。解决：

*   如果需要，通过 heroku 插件配置一个新数据库：添加 heroku-postgresql
*   使用 heroku pg:promote HEROKU_POSTGRESQL_ 来提升它，使其成为您应用程序的主数据库。

# c#-4.0 - 将标头添加到 XDocument 和架构

> ID：13009066
> 
> 赞同：2
> 
> 时间：2012-10-22T10:04:31.277
> 
> 标签：c#-4.0, linq-to-xml, stringwriter

我想要像 xml

```
<?xml version="1.0"?>
<root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://schema.test.com/test">

<test1>1</test1>
.
.
.
.
<test9>9</test9>
</root> 
```

所以我使用以下代码

```
 Dictionary<string, object> Data = new Dictionary<string, object>();
for (int i = 0; i < 10; i++)
            {
                Data.Add("Test" + i, i);

            }

            Console.WriteLine(DateTime.Now.ToShortTimeString());

            XNamespace xsi = XNamespace.Get("http://www.w3.org/2001/XMLSchema-instance");
            XNamespace xsd = XNamespace.Get("http://www.w3.org/2001/XMLSchema");
            XNamespace xsd1 = XNamespace.Get("http://schema.test.com/test");

            XDocument doc = new XDocument(

                new XDeclaration("1.0", "utf-16", "yes"),

                new XElement(

                    "root",
                    new XAttribute(XNamespace.Xmlns + "xsi", xsi),
                    new XAttribute(XNamespace.Xmlns + "xsd", xsd),
                    new XAttribute(XNamespace.None + "xmlns", xsd1),

                from p in Data select new XElement(p.Key, p.Value )

                )

                    );

            /*  XmlSchema schema = new XmlSchema();
              schema.Namespaces.Add("xmlns", "http://schema.medstreaming.com/report");

              doc.Add(schema);*/

            var wr = new StringWriter();
            doc.Save(wr);
            Console.Write(wr.GetStringBuilder().ToString()); 
```

但它在保存时崩溃了

```
The prefix '' cannot be redefined from '' to 'http://schema.test.com/test' within the same start element tag. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T11:59:22.037

我使用了以下并且效果很好

```
 XNamespace xsi = XNamespace.Get("http://www.w3.org/2001/XMLSchema-instance");
            XNamespace xsd = XNamespace.Get("http://www.w3.org/2001/XMLSchema");
            XNamespace ns = XNamespace.Get("http://schema.test.com/test");

            XDocument doc = new XDocument(

                new XDeclaration("1.0", "utf-8", "yes"),

                new XElement(

                    ns + "root",
                    new XAttribute("xmlns", ns.NamespaceName),
                    new XAttribute(XNamespace.Xmlns + "xsd", xsd.NamespaceName),
                    new XAttribute(XNamespace.Xmlns + "xsi", xsi.NamespaceName),
                    from p in Data select new XElement(ns + p.Key, p.Value)

                )

                    ); 
```

而且效果很好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:39:35.433

由于您正在重新定义全局 xml 命名空间，因此您需要在标准 xmlns 属性前面加上您定义的新前缀。

改变：

```
new XAttribute(XNamespace.None + "xmlns", xsd1), 
```

到：

```
new XAttribute(xsd + "xmlns", xsd1), 
```

它应该被排序。

# .net - 使用 Prism 动态创建区域

> ID：13009078
> 
> 赞同：5
> 
> 时间：2012-10-22T10:05:31.160
> 
> 标签：.net, wpf, prism

我正在使用 Prism 创建一个应用程序，但遇到了一些障碍。

我有一个选项卡控件，它是一个棱镜区域，并且有一个 ItemsSource 集合，我们将模型绑定到该集合。该模型包含设置选项卡标题、视图名称和随机 id（在本例中为 Guid）所需的数据，我们用于生成动态 prism 区域，作为选项卡内容中的容器，具有自己的 prism 区域，并且可以被导航到。

```
+Prism region(tab control)
|+ Prism region (dynamically created with Guid name)
 |+ Inserted view
  |+ Prism region
  |+ Prism region
  |+ Prism region
|+ Prism region (dynamically created with Guid name)    |
 |+ Inserted view
  |+ Prism region
  |+ Prism region
  |+ Prism region 
```

我遇到的问题是我们尝试生成的区域似乎没有在区域管理器中注册，即使我们似乎正确地注册了它们。

不幸的是，围绕团队进行的一系列搜索和问题并未带来任何可行的解决方案。

我想知道是否有人以前尝试过这个，或者是否有任何好的资源可以在代码中动态生成棱镜区域并注册它们。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T20:48:51.160

我已经在我的应用程序中做到了这一点。这是我想出的代码：

```
string regionName = "MyRegionName";
ContentPresenter RegionContentControl = new ContentPresenter { Focusable = false };

// This creates the region
Microsoft.Practices.Prism.Regions.RegionManager.SetRegionName(RegionContentControl, regionName);

// This adds the region to your region manager.
Microsoft.Practices.Prism.Regions.RegionManager.SetRegionManager(RegionContentControl, RegionManager);

// Get the region back
IRegion newRegion = RegionManager.Regions.FirstOrDefault(x => x.Name == regionName); 
```

我从 Unity 获得 RegionManger。

**更新：**

Mark 指出，ContentPresenter 是不允许开箱即用的。这是在以下位置添加该功能的适配器：

```
public class ContentPresenterRegionAdapter : RegionAdapterBase<ContentPresenter>
{
    public ContentPresenterRegionAdapter(IRegionBehaviorFactory behaviorFactory)
        : base(behaviorFactory)
    {
    }

    protected override void Adapt(IRegion region, ContentPresenter regionTarget)
    {
        region.Views.CollectionChanged += (s, e) =>
            {
                if (e.Action == NotifyCollectionChangedAction.Add)
                {
                    foreach (FrameworkElement element in e.NewItems)
                    {
                        regionTarget.Content = element;
                    }
                }
                else if (e.Action == NotifyCollectionChangedAction.Remove)
                {
                     foreach (FrameworkElement currentElement in e.OldItems)
                         regionTarget.Content = null;
                }
            };
    }

    protected override IRegion CreateRegion()
    {
        return new AllActiveRegion();
    }
} 
```

要注册此映射，您需要将其添加到引导程序中：

```
protected override RegionAdapterMappings ConfigureRegionAdapterMappings()
{
   RegionAdapterMappings mappings = base.ConfigureRegionAdapterMappings();
   mappings.RegisterMapping(typeof(ContentPresenter), 
                            Container.Resolve<ContentPresenterRegionAdapter>());
   return mappings;
} 
```

# jsf - a4j:commandLink 第一次没有设置值

> ID：13009088
> 
> 赞同：1
> 
> 时间：2012-10-22T10:05:51.010
> 
> 标签：jsf, richfaces

我在我的页面中放置了三个命令链接。我第一次按下其中一个命令链接时，它的值不会在 bean 中更新。但是，从第二次开始，它就起作用了。谁能帮帮我吗？在我的 JSF 中有两个表单有什么关系吗？

这是我一直在使用的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:f="http://java.sun.com/jsf/core">
<h:head>
    <title>My Registration Page</title>
    <link href="stylesheet/reset.css" rel="stylesheet" type="text/css" />
    <link href="stylesheet/style.css" rel="stylesheet" type="text/css" />
    <link rel="icon" type="image/png" href="images/icons/favicon.png" />
    <script src="script/script.js" />
</h:head>

<h:body>

    <h:form id="secondForm">

        <a4j:commandLink id="pendingTransactions"
            action="#{tellerBean.filterTransactions}"
            value="Show Pending" styleClass="button category-btn">

        </a4j:commandLink>
        <a4j:commandLink id="processedTransactions"
            action="#{tellerBean.filterTransactions}" 
            value="Show Processed" styleClass="button category-btn">

        </a4j:commandLink>
        <a4j:commandLink id="allTransactions" 
            action="#{tellerBean.filterTransactions}" value="Show All"
            styleClass="button category-btn">

        </a4j:commandLink>

    </h:form>

</h:body>
</html> 
```

# asp.net-mvc - MvcSiteMapProvider - 开始深度 > 1 时动态站点地图未出现在导航中

> ID：13009089
> 
> 赞同：2
> 
> 时间：2012-10-22T10:05:54.313
> 
> 标签：asp.net-mvc, mvcsitemapprovider

我正在使用[MvcSiteMapProvider](https://github.com/maartenba/MvcSiteMapProvider)库在 ASP.NET MVC 4.0 应用程序中创建站点地图和导航。我创建了一个动态站点地图提供程序，但是当我将起始深度级别设置为 > 1 时，似乎没有任何节点出现。当我将其设置为级别 1 时，动态创建的节点看起来就好了。

这是我的站点地图文件：

```
<mvcSiteMapNode title="Help" controller="Help" action="Index" key="Help">
    <mvcSiteMapNode title="Help Section" controller="Help" action="Section"
        dynamicNodeProvider="MyLibrary.HelpNodeProvider, MyLibrary" />
</mvcSiteMapNode>

<mvcSiteMapNode title="About" clickable="false">
    <mvcSiteMapNode title="Accessibility" controller="Info" action="Accessibility" />
    <mvcSiteMapNode title="Terms &amp; Conditions" controller="Info" action="Terms" />
    <mvcSiteMapNode title="Privacy" controller="Info" action="Privacy" />
</mvcSiteMapNode> 
```

...和我的 HelpNodeProvider 类：

```
namespace MyLibrary.Sitemap
{
    public class HelpNodeProvider : DynamicNodeProviderBase
    {
        public override IEnumerable<DynamicNode> GetDynamicNodeCollection()
        {
            DynamicNode test = new DynamicNode();
            test.Title = "Help Item 1";
            test.Controller = "Help";
            test.Action = "Section";
            test.RouteValues.Add("sectionName", "item1");
            test.ParentKey = "Help";

            return new List<DynamicNode>()
            {
                test
            };
        }
    }
} 
```

现在在“帮助”页面的根目录中，如果我添加以下 MvcSiteMap 帮助器代码：

```
@Html.MvcSiteMap().Menu(2, 2) 
```

...它不输出任何东西，但是如果我将起始级别更改为“1”：

```
@Html.MvcSiteMap().Menu(1, 2) 
```

...它输出以下内容：

*   关于
    *   可访问性
    *   条款和条件
    *   隐私
*   帮助
    *   帮助项目 1

...如您所见，存在“帮助项目 1”动态节点。但是我在根“关于”页面上将起始节点设置为“2”，我得到以下信息：

*   可访问性
*   条款和条件
*   隐私

因此，带有静态子导航的“关于”页面似乎可以正确输出，但带有动态子导航的“帮助”页面却没有。想我做错了吗？

# git - 提交（无推送）到本地分支，现在我更喜欢在不同的分支中提交

> ID：13009093
> 
> 赞同：0
> 
> 时间：2012-10-22T10:06:13.240
> 
> 标签：git

我已经在本地向某个分支（称为主分支）提交了严重的时间。现在我发现最好转到不同的分支（功能分支）。我没有推送提交。我可以打开功能分支以便他包含我的提交吗？并且提交不去主分支？

马蒂亚斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:23:30.630

首先，确保您没有未提交的更改（即 的输出`git status`应该为空） - 这样您可以`git reset --hard`在以后安全地使用。一旦确定了这一点，您就可以执行以下操作：

确保您在`master-branch`：

```
git checkout master-branch 
```

根据您当前的提交创建一个新分支，名为`feature-branch`：

```
git branch feature-branch 
```

将您的背部重置`master-branch`为较早的提交：

```
git reset --hard <EARLIER-COMMIT> 
```

如果您想回到上次未推送的更改`master-branch`，那么`<EARLIER-COMMIT>`可能是`origin/master-branch`。

# iphone - UISearchBar 的范围按钮不会显示 iOS6

> ID：13009095
> 
> 赞同：0
> 
> 时间：2012-10-22T10:06:14.000
> 
> 标签：iphone, objective-c, ios, ios6

我知道这个问题之前被问过几次，并且已经解决了（在我使用 iOS4 和 5 的解决方案之前）。我最近的项目涉及`UISearchBar`与其他一些视图一起使用，我想在它变为活动状态时显示它的范围按钮。之前，`UISearchBardelegate`我`- (BOOL)searchBarShouldBeginEditing:(UISearchBar *)searchBar`在做

```
[searchBar setShowsScopeBar:YES];
[searchBar sizeToFit]; 
```

它显示范围按钮。但是现在，在 iOS6 上，这段代码什么都不做。`UISearchBar`在 IB 中添加，它的委托设置为我的视图控制器。有人有这个问题的解决方案吗？提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T22:23:25.260

看起来正在发生的事情是`UISearchBar`当它显示和隐藏范围栏时未能使其内在内容大小无效。

`UISearchBar`直到它在 UIKit 中被修复之前，通过简单的子类化和覆盖单个方法来解决它是非常容易的：

```
- (void)setShowsScopeBar:(BOOL)showsScopeBar {
  if ([self showsScopeBar] != showsScopeBar) {
    [self invalidateIntrinsicContentSize];
  }
  [super setShowsScopeBar:showsScopeBar];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T19:15:24.213

我将此作为错误报告给 Apple 并得到了解决方法的答案：

只需继承 UISearchBar 并覆盖 -setShowsScopeBar：

```
- (void)setShowsScopeBar:(BOOL)showsScopeBar
{
    if (self.showsScopeBar != !!showsScopeBar) [self invalidateIntrinsicContentSize];
    [super setShowsScopeBar:showsScopeBar];
} 
```

**更新**：这在 iOS 7 中已修复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T12:30:29.280

好的，问题出在 iOS 6 自动布局的东西上，一旦我删除它，问题就消失了。谢谢大家 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-16T20:10:48.847

在 iOS 6.0 中无需子类化 UISearchBar 的另一种方法是调整 Search Bar Delegate 中的帧大小：

```
- (void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar
{
    NSMutableArray *ma = [NSMutableArray arrayWithCapacity:2];

    [ma addObject:@"One"];
    [ma addObject:@"Two"];

    CGRect f = searchBar.frame;
    f.size.height += 44.0f;
    searchBar.frame = f;

    searchBar.scopeButtonTitles = [ma copy];
    searchBar.showsScopeBar = YES;
}

- (void)searchBarTextDidEndEditing:(UISearchBar *)searchBar
{
    CGRect f = searchBar.frame;
    f.size.height -= 44.0f;
    _searchBar.frame = f;

    searchBar.scopeButtonTitles = nil;
    searchBar.showsScopeBar = NO;
} 
```

# javascript - 使用ajax在firefox扩展中发送请求并从服务器接收响应

> ID：13009096
> 
> 赞同：2
> 
> 时间：2012-10-22T10:06:13.750
> 
> 标签：javascript, ajax, firefox, firefox-addon, xmlhttprequest

我正在构建一个 Firefox 插件。我正在尝试向服务器发送请求，然后使用 AJAX 获得相应的响应。我正在使用的代码是：

```
$.ajax({
   type: "POST",
   url: myurl
}).done(function( data ) {
   alert( data )                    
}); 
```

但我无法得到回应。我的请求正在到达服务器，但我没有得到响应。我在服务器上将我的数据呈现为 JSON。

我尝试了不同的方法，例如简单的 ajax 调用`XMLHttpRequest`等，但没有运气。此代码已在我的 Chrome 扩展程序中运行。有什么我想念的吗？Firefox 是否存在任何安全问题？或者 Firefox 中进行服务器调用并获取响应的最佳方式是什么？

# arduino - 带有 SD.h 文件类型的`fprintf`

> ID：13009103
> 
> 赞同：1
> 
> 时间：2012-10-22T10:06:36.620
> 
> 标签：arduino, sd-card, printf

我正在使用库通过[Arduino Uno](http://arduino.cc/en/Main/ArduinoBoardUno)`SD.h`写入 SD 卡。我需要在文件中写出一个模板字符串，其中一些占位符被某些值替换，以行为的方式。我会使用这个功能，但是当我尝试这个时：`printf``fprintf`

```
File dataFile = SD.open("myfile.txt", FILE_WRITE);
fprintf(dataFile, "mynumber: %d\n", 100); 
```

我收到了这个错误：

> 无法将参数 '1' 的 'File*' 转换为 '__file*' 到 'int fprintf(__file*, const char*, ...)'

我该如何管理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T12:14:47.097

**printf() 使您的可执行对象变大约 1000 字节，因此如果大小有问题，您可能不想使用它。**

`fprintf`不打算与 SD.h 一起使用，所以我认为

我想到的简单解决方案是使用 sprintf 格式化文本，然后使用 println 函数将其写入文件

```
File dataFile = SD.open("myfile.txt", FILE_WRITE);
char text[100];
sprintf(text,"My number: %d",yournumber);
dataFile.println(text); 
```

# java - 保留注释的顺序

> ID：13009107
> 
> 赞同：2
> 
> 时间：2012-10-22T10:06:43.813
> 
> 标签：java, android, annotations

使用`getFields()`and获取字段列表时， a 中字段`getDeclaredFields()`的顺序`Java class`是不确定的。

我的验证库中需要这个订单。由于没有保留顺序（尽管有些人声称在 JDK 6 及更高版本中保留了顺序，但不能保证跨 VM）。我无法推测这一点，因为跨字段的注释顺序对于库来说是绝对必要的。

解决这个问题的一种方法是`order`在`index`我的`Annotation`.

让我担心的是，在以下情况下维护代码可能会变得有点麻烦。

1.  如果用户想要插入一个新的注释字段，他可能必须重新编号类中的所有其他注释。
2.  我可以将`order`or`index`作为浮点数 -`float`或者`double`但是，如果有 1、1.5、2 等顺序，看起来不太好，

这个问题的优雅解决方案是什么？

这是一个示例代码，以便您了解该问题：

```
@Required
@TextRule (minLength = 6, message = "You need at least 6 characters.")
private EditText usernameEditText;

@Password
private EditText passwordEditText;

@ConfirmPassword
private EditText confirmPasswordEditText;

@Email
private EditText emailEditText; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:58:02.813

我会说排序不是类本身固有的，而是取决于使用它的类。所以我会考虑忘记修改原始类并添加一个`properties`文件（可能与类的名称相同）来定义顺序。

如果您稍后需要添加项目，请不要按 1 到 1 而是（例如）10 到 10 进行排序。第一种方法的索引为 1，第二种方法的索引为 11，依此类推。您不太可能需要重新索引它，并且如果您这样做，重新索引属性文件很容易通过手动/程序完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T07:22:42.153

目前没有办法实现这一点。因为在 Java 5 之前，声明字段的顺序是未定义的。在 Java 6 及更高版本中，订单被保留。另一方面，Dalvik VM 根据字段名称按升序对字段名称进行排序。最后，我通过将订单添加`attribute`到我的注释中解决了这个问题。

# visual-studio-2010 - 无法在构建后执行批处理文件

> ID：13009111
> 
> 赞同：1
> 
> 时间：2012-10-22T10:06:54.793
> 
> 标签：visual-studio-2010

我已经阅读[了这个讨论](https://stackoverflow.com/questions/1491394/can-we-execute-a-bat-file-in-post-build-event-command-line-in-visual-studio)，但是尽管尝试了不同的尝试，但我得到了一个错误（它取决于我的方法）。

编译本身工作正常。双击“publish.bat”文件也可以很好地执行它。这是 VS10 中的组合中断。

这是我测试过的。

```
$(OutDir)\publish.bat
"$(OutDir)\publish.bat"
$(OutDir)publish.bat
"$(OutDir)publish.bat"

call $(OutDir)\publish.bat
call "$(OutDir)\publish.bat"
call $(OutDir)publish.bat
call "$(OutDir)publish.bat" 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T00:36:39.127

我有一个类似的问题，我只是能够解决。对我来说，简单的`call "$(SolutionDir)\Setup\CreateInstaller.bat"`工作，但我一直得到一个`The command "call {solution directory}\Setup\CreateInstaller.bat" exited with code {code}`. 原来我的批处理文件期望从它所在的目录运行。因此，请检查批处理文件中的所有命令是否未使用相对目录或命令，因为它们可能会中断。

另外，您确定`$(OutDir)`宏是您想要的吗？至少在 VS2010 中，这等于`bin\Debug`或`bin\Release`取决于您正在构建的版本。您似乎不太可能真的想要那个目录。我希望你想要的是`$(SolutionDir)`或者甚至`$(TargetDir)`。

# java - Apache poi 单元格格式

> ID：13009115
> 
> 赞同：0
> 
> 时间：2012-10-22T10:07:08.820
> 
> 标签：java, apache-poi, spreadsheet

我正在尝试使用 Apache poi 数据格式化程序将数字 2852196 格式化为 2,852,196 美元。

```
NumberFormat numberFormat = NumberFormat.getCurrencyInstance();
dataFormatter.addFormat("($#,##0_);($#,##0)", numberFormat);
//after adding the above format, i see this format @ index 0, so i have taken 0 in the next line  

String formatCellValue = dataFormatter.formatRawCellContents((Long) cols.get(jj).getValue(), 0, "($#,##0_);($#,##0)"); 
```

但得到的产出是 2,852,196 美元。我遗漏了一些东西或使用了不正确的方法。

- 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-02-05T23:55:29.903

此方法更改列数组中的所有元素

你会打电话给：

```
protected final static int TYPE_PORCENTAJE = 3;

setTypeColumn(sheet, Arrays.asList(19, 20, 21), TYPE_PORCENTAJE, null);

protected void setTypeColumn(Sheet sheet, List<Integer> columns, int type, Integer format) {
    CellType cellType = CellType.STRING;
    CellStyle style = sheet.getWorkbook().createCellStyle();
    CreationHelper createHelper = sheet.getWorkbook().getCreationHelper();

    switch (type) {
    case TYPE_NUMBER:
        style.setDataFormat(sheet.getWorkbook().createDataFormat().getFormat(BuiltinFormats.getBuiltinFormat(1)));
        break;
    case TYPE_MONEY:
        style.setDataFormat(
                sheet.getWorkbook().createDataFormat().getFormat(BuiltinFormats.getBuiltinFormat(format)));
        break;
    case TYPE_DATE:
        style.setDataFormat(createHelper.createDataFormat().getFormat("yyyy-mm-dd"));
        break;
    case TYPE_PORCENTAJE:
        style.setDataFormat(sheet.getWorkbook().createDataFormat().getFormat(BuiltinFormats.getBuiltinFormat(0xa)));
        break;
    case TYPE_CUSTOM:
        style.setDataFormat(
                sheet.getWorkbook().createDataFormat().getFormat(BuiltinFormats.getBuiltinFormat(format)));
        break;
    case TYPE_TEXT:
        style.setDataFormat((short) BuiltinFormats.getBuiltinFormat("text"));
        break;
    default:
        break;
    }
    cellType = CellType.NUMERIC;
    final int lastRow = sheet.getLastRowNum();
    for (int i = 1; i <= lastRow; i++) {
        for (int j = 0; j < columns.size(); j++) {
            Cell cell = sheet.getRow(i).getCell(columns.get(j));
            String value = null;
            if (type == TYPE_TEXT) {
                value = cell.getStringCellValue();
            }
            cell.setCellType(cellType);
            cell.setCellStyle(style);
            if (type == TYPE_PORCENTAJE) {
                cell.setCellValue(cell.getNumericCellValue() / 100);
            }
            if (type == TYPE_TEXT) {
                style.setWrapText(true);
                cell.setCellStyle(style);
                cell.setCellValue(value);
            }
        }
    }
} 
```

对于参数格式检查这个链接 [https://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/BuiltinFormats.html](https://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/BuiltinFormats.html)

# grails - 如何国际化 Grails Geb 测试

> ID：13009118
> 
> 赞同：1
> 
> 时间：2012-10-22T10:07:23.143
> 
> 标签：grails, functional-testing, geb

我的网络应用程序利用 Geb 进行功能测试。

它是一个非英语应用程序，所有页面消息都是从 i18n 消息包接收的。

如何让 Geb 处理国际化消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T14:27:46.830

[Grails RemoteControl 插件](http://grails.org/plugin/remote-control)允许远程访问正在运行的 Grails 应用程序。在功能测试设置中，它可用于读取和更改配置设置，访问应用程序上下文，包括消息源，……。

下面的代码被添加到我们所有的 Geb 规范/测试的通用基类中，可以在单个测试中使用以检索国际化消息：

```
class BaseTest/Spec {

    RemoteControl remoteControl = new RemoteControl()

    String msg(String msgKey, args = null, locale = defaultLocale) {
        if (args != null) {
            args = args as Object[]
        }
        return remoteControl.exec {
            ctx.messageSource.getMessage(msgKey, args, locale)
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:10:57.150

我所有的页面类都从基类扩展：ScaffoldPage

```
import java.util.ResourceBundle;        

import geb.Page        

class ScaffoldPage extends Page {        
    static content = {          
        resourceBundle {
            ResourceBundle bundle = new PropertyResourceBundle(new InputStreamReader(new FileInputStream('./grails-app/i18n/messages_ru.properties'), "UTF-8"))         
            bundle        
        }        
    }        
} 
```

然后，在某个页面，我使用这样的结构：

```
class CreatePayeePage extends ScaffoldPage {
    static at = { 
        title == resourceBundle.getString('payee.title.create.label')
    }
} 
```

# php - 作为“服务帐户”连接到 Google 协作平台 API

> ID：13009120
> 
> 赞同：2
> 
> 时间：2012-10-22T10:07:37.400
> 
> 标签：php, google-api, oauth-2.0, google-sites, google-oauth

我正在尝试从 Google 协作平台帐户（Google 应用程序）读取提要。我不需要我的应用程序要求每个用户登录，所以我在“Google API 控制台”中将我的 ClientID 创建为“服务帐户”。我已将此客户端 ID 和范围 (https://sites.google.com/feeds/) 添加到我的谷歌应用程序控制面板中的“管理 API 客户端访问”页面。

我使用下面的代码进行连接，所有常量都在我的代码中用正确的值定义。

```
// api dependencies
require_once(GOOGLE_API_PATH);

// create client object and set app name
$client = new Google_Client();
$client->setApplicationName(GOOGLE_API_NAME);

// set assertion credentials
$client->setAssertionCredentials(

new Google_AssertionCredentials(

GOOGLE_API_EMAIL,
array(GOOGLE_API_SCOPE),
file_get_contents(GOOGLE_API_PK) 
));

$client->setClientId(GOOGLE_API_CLIENTID);

// create service

$req = new Google_HttpRequest("https://sites.google.com/feeds/content/<herismydomainname.com>/intranet");
$val = $client->getIo()->authenticatedRequest($req);

// The contacts api only returns XML responses.
$response = json_encode($val->getResponseBody());
print "<pre>" . print_r(json_decode($response, true), true) . "</pre>"; 
```

我得到的响应是“未授权访问此提要”当我尝试在 OAuth2.0 操场上使用我的 google 应用程序帐户登录时获取此提要时，我得到了预期的响应。我在这里俯瞰什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T22:31:11.480

目前不能同时使用服务帐号和 Google 协作平台。Google Apps 提供了一个消费者机密，可用于在 OAuth 1.0a 中以两条腿式 OAuth 的形式访问您的域中的数据。

查看[http://support.google.com/a/bin/answer.py?hl=en&answer=162105](http://support.google.com/a/bin/answer.py?hl=en&answer=162105)了解如何配置您的 Apps 帐户，以及[https://developers.google.com/gdata/上的示例代码docs/auth/oauth#2LeggedOAuth](https://developers.google.com/gdata/docs/auth/oauth#2LeggedOAuth)。

# c - 我想在文件中重定向 ls 的 execv，然后在管道中，为什么不工作？

> ID：13009121
> 
> 赞同：1
> 
> 时间：2012-10-22T10:07:41.870
> 
> 标签：c, pipe, ls, execv

首先，我想将 ls (exec) 的输出重定向到一个文件中，然后从一个文件重定向到管道，为什么不工作？当我在文件中重定向时没关系，但仅此而已。

我该怎么做才能找到输出的长度`ls`？（这就是我重定向到文件的原因）。

```
#include<stdlib.h>
#include<stdio.h>
#include<unistd.h>
#include<errno.h>
#include<sys/wait.h>
#include<sys/types.h>
#include<stdlib.h>
#include<string.h>
#include<fcntl.h>

int main()
{
    char input[]="ls",ch, delim[]=" ",*result,aux[2000],*user=NULL,*password=NULL,aux1[2000],aux2[2000],aux3[2000],aux4[2000],*arg[1000];
    int p1[2],p2[2],i,j,len,nrRead,ok,log,f;
    pid_t pid,pidd;
    pid=fork(); f=open("alice.txt",O_RDWR|O_TRUNC|O_CREAT,0700);

    if(pid == 0){
        i=0; 
        printf("f: %d",f);
        if(strlen(input) == 2) {arg[0]="ls";arg[1]=NULL; i=2;}
        else 
        {       
            result=strtok(input,delim);
            arg[i++]=result;
            result=strtok(NULL,delim);
            while(result!= NULL)
            {
                printf("LS --- 5\n");
                arg[i++]=result;
                result=strtok(NULL,delim);
            }
            arg[i]=NULL;
        }

        close (1);

        if (dup2(f,1) == -1)    
        {
            fprintf (stderr, "dup - 1\n");
            exit (9);
        }

        if( 0 == (pidd=fork())) { 
            execvp("ls",arg);
        }

        close(f);
        i=0;
        while(0 != read(1,&ch,sizeof(char)))
        { 
            aux4[i]=ch;
            i++;
        }
        aux4[i]='\0';

        close(1);
        if (dup2(p2[1],1) == -1)    
        {
            fprintf (stderr, "dup - 1\n");
            exit (9);
        }
        //close(p2[1]);
        len=strlen(aux4);
        //printf("LUNG: %d",len);
        write(1,&len, sizeof(4));       
        return 0;
    } else {
        wait(NULL);
        close(p2[1]);
        read(p2[0],&len,sizeof(int));
        printf("pp: %d",len);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:19:04.163

代替`fork`ing 和`dup`ing 自己，您可以方便地`popen`用来做您想做的事。如果你真的需要事先知道输出的大小，你不需要重定向到一个文件，你可以简单地在你点击之前计算你可以从管道中读取的字节数`EOF`。示例（无错误检查）：

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    FILE *fd;
    char *buf;
    size_t size; /* counter for output size */

    fd = popen("ls", "r"); /* open a pipe running ls for reading ("r") */

    size = 0;
    while (fgetc(fd) != EOF) {
        size++;
    }

    pclose(fd);

    printf("Output is %d bytes\n", size);

    fd = popen("ls", "r");

    buf = malloc(size+1);

    while (fgets(buf, size, fd)) {
        fputs(buf, stdout); /* do what you want here */
    }

    pclose(fd);

    return 0;
} 
```

请注意，如果您打算`ls`稍后解析输出以查找文件或目录，则最好在 Unix 上使用`opendir`,`readdir`和函数。`closedir`

# package - 如何在 Ada 中用一个语句包含多个包？

> ID：13009124
> 
> 赞同：3
> 
> 时间：2012-10-22T10:08:01.430
> 
> 标签：package, ada

我在 Ada 中编写了一个库，我希望客户只需要在他们的代码中包含一个包。就像是：

```
with all_packages; 
```

这将包括对客户有用的所有软件包。我为每个标记类型编写了一个包，以使内容简单易读。

我如何让图书馆用户可以只用一个语句包含所有包？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T11:48:13.273

你不能。

通过将每个标记类型封装在自己的包中，您做得很好，这是 Ada 中推荐用于面向对象编程的方法。

然后，客户端代码只需“使用”它需要的那些包。

# java - java.util.Date() != 系统机器日期时间

> ID：13009126
> 
> 赞同：-1
> 
> 时间：2012-10-22T10:08:03.857
> 
> 标签：java, datetime

我`java.util.Date()`用来获取插入数据库的时间戳。当我查看结果时，数据库中的时间戳与系统机器时间不同。

*   `java.util.Date()`时间：**22/10/2012 10:00:07 AM**
*   系统机器时间：**22/10/2012 5:50:34 PM**

我使用 MongoDB，这里是我的代码

```
Mongo mongo = new Mongo(DBConstants.DATABASE_HOST,  Integer.parseInt(DBConstants.DATABASE_PORT));
DB db = mongo.getDB("library");
DBCollection books = db.getCollection("books");
BasicDBObject book = new BasicDBObject();
book.put("name", "Understanding JAVA");
book.put("pages", 100);
book.put("amount",10);
book.put("timestamp", new java.util.Date());
books.insert(book); 
```

谁能给我解释一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:19:36.813

从[java.util.Date 使用 TimeZone？](https://stackoverflow.com/questions/1516213/java-util-date-is-using-timezone)

[java.util.Date](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html)与时区无关。在javadoc中这么说。
您想要与特定时区相关的东西吗？那是[java.util.Calendar](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:12:14.467

请确保您的系统机器和数据库使用相同的时区。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T10:10:35.317

它可能会发生，因为`java.util.Date`它与时区无关。

# c++ - 从 C++ 程序打开两个 wxt 终端

> ID：13009128
> 
> 赞同：1
> 
> 时间：2012-10-22T10:08:09.560
> 
> 标签：c++, xcode, macos, gnuplot

我有一个 C++ 程序，其中包含一个使用的类`plot()`方法`gnuplot`：

```
FILE* pipe = popen("/sw/bin/gnuplot -persist","w");
if (pipe != NULL){
    gnuPlotCommand = "load " + scriptFileName + "\n";
    fprintf(pipe, gnuPlotCommand.c_str());
 }
else { ... }
fclose(pipe); 
```

脚本文件本身将终端设置为`wxt`并加载数据文件。当我第一次运行程序调用`obj1.plot()`时，会出现一个带有绘图的窗口。如果我然后运行程序调用`obj2.plot()`（不关闭第一个窗口），则会出现另一个窗口，但两个窗口都“被阻塞”（我无法旋转绘图并且无法关闭窗口）。如果我成功了

```
obj1.plot();
obj2.plot(); 
```

只出现一个绘图窗口。

当我`gnuplot`在单独的 's 中启动相同的脚本时`Terminal.app`，它可以正常工作（有两个窗口并且它们没有被阻止）。如何使用我的程序实现它？我有 64 位 Mac OS X 10.8 和 XCode 以防万一。

**更新：**

我发现删除会在调用`fclose(pipe);`时出现两个窗口`obj1.plot(); obj2.plot();`，但其中一个仍然被“阻止”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:04:41.757

这是 gnuplot 中的一个限制。它一次只能打开 1 个交互式绘图（据我所知，与`x11`, `aquaterm`, ... 存在相同的行为）。如果您想同时拥有 2 个交互式绘图，则需要为`popen`您想要的每个交互式绘图生成一个 gnuplot 进程（通过）。

# javascript - 为什么通过 html() 附加 HTML 在 IE8 中不起作用？

> ID：13009130
> 
> 赞同：0
> 
> 时间：2012-10-22T10:08:13.630
> 
> 标签：javascript, jquery, internet-explorer, append, dynamic-data

我正在调试一个站点`ie8`，但无法通过 AJAX 添加动态内容以显示在页面上。

ajax 调用正确完成，我可以 console.log/alert 返回的 HTML 并且没有弹出脚本错误。只有一个带有空文本节点的空白页面。

我的脚本附加内容如下所示：

```
// ajax content returned (HTML string)
var makeUp = data,
    target = $('.registryWrapper');

target.last()
    // css3 transition
    .addClass('fade out')
    // clear
    .html('')
    // add
    .html( makeUp )
    .append( someotherstuff )
    // Jquery Mobile enhancement
    .trigger('create')
    .removeClass('out')
    .addClass('in') 
```

知道为什么这不起作用

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:21:46.720

在 IE8 中，.html()/.innerHTML 如果传入的 HTML 格式不*完美*（相对于正在使用的 DTD），则不会执行任何操作 - 与正常解析时不同，它不会容忍任何错误。

如果您用非常简单的东西替换数据，`<p>Hello World!</p>`那么您应该会发现它有效（如果无效，则说明其他问题） - 在这种情况下，您需要找出传入的 HTML 有什么问题。

# php - 如何定义通过 https 或 http 请求的页面？

> ID：13009131
> 
> 赞同：3
> 
> 时间：2012-10-22T10:08:14.783
> 
> 标签：php, http, https, phpinfo

> **可能重复：**
> [PHP：HTTP 还是 HTTPS？怎么能说出来？](https://stackoverflow.com/questions/4042962/php-http-or-https-how-can-one-tell)

有没有办法定义这个？

$_SERVER superglogal 不提供此类信息。即使只是 ['SERVER_PROTOCOL'] ...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T10:10:09.777

如果您的请求是通过 HTTPS 发送的，您将有一个名为“HTTPS”的额外服务器变量

```
if( isset($_SERVER['HTTPS'] )  && $_SERVER['HTTPS'] != 'off' ) 
{
   echo 'HTTPS';
}
else
{
  echo 'HTTP';
} 
```

# ios - 在 iOS 上调试 EXEC_BAD_ACCESS

> ID：13009132
> 
> 赞同：0
> 
> 时间：2012-10-22T10:08:15.660
> 
> 标签：ios, xcode, debugging, memory-leaks

我有一个非常奇怪的 EXEC_BAD_ACCESS 错误，该错误发生在应用程序启动时。当 UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])) 被调用时，没有断点或 NSLog 被取消。

它只会在模拟器上崩溃，而不是在设备上或仪器上。僵尸没有给我任何信息，当我在模拟器上启用 GUARDMALLOC 时它不会崩溃。EXEC_BAD_ACCESS 总是发生在同一个内存地址上。

我可以得到以下回溯

```
#0  0xcd58a2f6 in ?? ()
#1  0x0102b524 in -[UIWindow _commonInit] ()
#2  0x0102b66f in -[UIWindow initWithFrame:] ()
#3  0x0137be58 in -[UIStatusBarWindow initWithFrame:] ()
#4  0x0103c28f in -[UIView init] ()
#5  0x01000a5e in -[UIApplication _createStatusBarWithRequestedStyle:orientation:hidden:] ()
#6  0x00ffbe6b in -[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] ()
#7  0x0100d315 in -[UIApplication handleEvent:withNewEvent:] ()
#8  0x0100e24b in -[UIApplication sendEvent:] ()
#9  0x00fffcf8 in _UIApplicationHandleEvent ()
#10 0x02fe7df9 in _PurpleEventCallback ()
#11 0x02fe7ad0 in PurpleEventCallback ()
#12 0x022cabf5 in __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ ()
#13 0x022ca962 in __CFRunLoopDoSource1 ()
#14 0x022fbbb6 in __CFRunLoopRun ()
#15 0x022faf44 in CFRunLoopRunSpecific ()
#16 0x022fae1b in CFRunLoopRunInMode ()
#17 0x00ffb7da in -[UIApplication _run] ()
#18 0x00ffd65c in UIApplicationMain ()
#19 0x00002ea2 in main (argc=1, argv=0xbffff2a0) at /Users/user/Projects/App/App/main.m:16 
```

当我尝试获取有关我得到的内存的信息时

```
Cannot access memory at address 0xcd58a2f6 
```

有时我可以在更改一些代码时解决它，但是当我只在其他一些函数中创建局部变量时它会再次发生，所以我认为问题更深一些。

我有点困惑，因为当错误发生时，didFinishLaunchingWithOptions 永远不会到达，那么什么样的影响会对我的视图控制器中的代码产生影响？

作为第 3 方组件，我使用 Phonegap 2.1 作为组件和 Apple 的 Reachability。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:22:12.940

您可以添加异常断点来获取错误的位置。这是一个很好的教程链接。希望对你有效。

[链接在这里。](http://www.raywenderlich.com/10505/my-app-crashed-now-what-part-2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T20:50:15.653

假设这不是 xib 问题，您可以使用 atos（地址到符号）调试来帮助您找到问题的位置。

可在[http://saveme-dot-txt.blogspot.com/2011/04/using-atos-for-reading-crash-logs.html获得有关此方法的一个很好的教程](http://saveme-dot-txt.blogspot.com/2011/04/using-atos-for-reading-crash-logs.html)

# c# - 如何通过 Jquery 保存文件（文档、图像等）

> ID：13009133
> 
> 赞同：0
> 
> 时间：2012-10-22T10:08:17.827
> 
> 标签：c#, jquery, asp.net

我正在将 Html 页面加载到面板中，在那个 html 页面中 html 文件（上传文件）就在那里。每当我上传一些文件（文档、图像等）并保存 html 按钮时.. 我想将该文件保存到 SAVED_DOCUMENTS 文件夹中的项目中，以及该路径到数据库..

```
$('input[type="file"]').each(function () {
                  completeids.push($(this).attr('id'));
                  completevalues.push($(this).attr('value'));
                  completetype.push('FILE');
                  completeselected.push('no');

              }); 
```

找到文件的值后，我想将其转储到 SAVED_DOCUMNETS 文件夹...你能给出一些建议来处理这个..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:44:39.550

如果您的意思是在客户端保存文件，那么如果没有用户操作，这是不可能的。

如果您正在谈论在服务器上保存文件，那么您应该使用`<input type="file"`HTML 元素。然后，您将可以访问 FileContent 属性，该属性是一个字节数组，您可以将其保存为任何您想要的文件。

在 MVC 控制器中，你可以有这样的东西：

```
 public ActionResult Add(HttpPostedFileBase file)
{
   string extension = Path.GetExtension(file.FileName);
   using (Stream stream = file.InputStream)
   {
        // Save your stream to Disk or database as you need
   }

} 
```

# r - 如何在图例和 plotarea 之外注释 ggplot2 qplot？（类似于 mtext()）

> ID：13009135
> 
> 赞同：11
> 
> 时间：2012-10-22T10:08:26.353
> 
> 标签：r, ggplot2, annotate, r-grid

我想用文件名注释我的图。我`plot()`用过`mtext`：

```
plot(1:10)
mtext("File xy-12-34-56.csv", 4) 
```

如何使用 ggplot2 和 qplot 或 ggplot 做到这一点？它不应该与图例发生冲突。我找到了命令`annotate`和`grid`，但我无法获得`mtext`与这些类似的注释。

作为一种解决方法，我可以尝试[watermarks](http://blog.ggplot2.org/post/23537012922/adding-watermarks-to-plots)，但也许你对我有一个很好的提示。亲切的问候，乔纳斯

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-22T12:25:04.257

**更新**

看起来现在我们应该使用以下实现结果：

```
library(ggplot2)
library(grid)
library(gridExtra)
p <- qplot(data = mtcars, wt, mpg)
grid.arrange(p, right = textGrob("File xy-12-34-56.csv", rot = -90, vjust = 1)) 
```

**旧答案**

试试这个：

```
library(gridExtra)
p <- qplot(data = mtcars, wt, mpg)
print(arrangeGrob(p, legend = textGrob("File xy-12-34-56.csv", rot = -90, vjust = 1))) 
```

![在此处输入图像描述](../Images/360a5830636ef8018dd5d35763e73b24.png)

# .htaccess - htaccess dash in rewrite 导致问题

> ID：13009138
> 
> 赞同：1
> 
> 时间：2012-10-22T10:08:33.740
> 
> 标签：.htaccess, rewrite

我似乎无法让我的 htaccess 代码正确地重定向如下所示的页面以转到 410 页面，例如：

```
www.domain.com/-c-23.html
www.domain.com/-c-12.html
www.domain.com/-c-755.html 
```

基本上，我想要一个规则，即在域的斜线之后直接出现“-c-”的任何内容都被发送到 410。我一直在尝试这样做，但我的代码不起作用，到目前为止我有这样的东西：

```
RewriteRule ^/\-c-[0-9]+\.html$ - [G] 
```

但这根本没有区别，知道为什么这不起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:17:49.777

您需要去掉正则表达式中的前导斜杠。通过 htacccess 文件中的规则发送的 URI 去除了前导斜杠：

```
RewriteRule ^\-c-[0-9]+\.html$ - [G,L] 
```

您还需要`L`标志来立即停止重写。你也可以更笼统：

```
RewriteRule ^-c- - [G,L] 
```

# tfs - 如何在本地模式下丢弃变更集？

> ID：13009144
> 
> 赞同：1
> 
> 时间：2012-10-22T10:08:43.203
> 
> 标签：tfs

在 TFS 2012 中有一个新的“本地工作区”模式。这很好，有几个原因：

*   没有签入或签出文件。
*   文件不是只读的，因此与 VS 以外的工具互操作并不那么痛苦。
*   提交基于实际的文件更改。不是 Visual Studios 对您触摸的内容的想法。

但是，在这种模式下，我无法丢弃变更集！进行正常的`tf merge /discard`舞蹈不会导致文件更改。由于提交现在基于文件更改，因此 Visual Studio 不会检测到任何更改并且不会让我提交丢弃合并。

如何在本地工作区模式下丢弃变更集？

*编辑*：为了清楚起见，我说的是从一个分支中丢弃一个变更集作为另一个分支的合并候选者。当您修复旧版本产品中的错误时，错误修复不适用于新版本（分支）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:34:49.600

这似乎是 VS2012 中的一个错误。在这种情况下，“登记”（或者更确切地说“登记”）按钮被禁用。从命令行进行签入工作。

# vb.net - 我无法删除 %Temp% 中的文件夹

> ID：13009145
> 
> 赞同：0
> 
> 时间：2012-10-22T10:08:45.573
> 
> 标签：vb.net

我在`%Temp%`. 它们是空的，无处使用。我使用这些 vb.net 代码删除临时文件。

```
For Each filepath In Directory.GetFiles(TempFolderPath)
            Try
                File.Delete(filepath)
                Directory.Delete(filepath)
            Catch ex As Exception
                MessageBox.Show(ex.ToString)

            End Try
Next 
```

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:58:44.710

您做错的是您试图使用文件路径删除文件夹。这行不通。

这对我有用。这将删除您指定的文件夹内的所有文件和所有文件夹。它将递归运行，这意味着所有文件和文件夹都将消失。如果要删除您提供的文件夹（在本例中为 %Temp%），请取消注释注释行并删除“directory.Delete(subfolder)”行。

```
Private Sub RemoveFilesAndFoldersRecursively(ByVal Folder As String)
        For Each Subfolder As String In IO.Directory.GetDirectories(Folder)
            RemoveFilesAndFoldersRecursively(Subfolder)
            IO.Directory.Delete(Subfolder)
        Next
        For Each file As String In IO.Directory.GetFiles(Folder)
            IO.File.Delete(file)
        Next
        'IO.Directory.Delete(Folder)
    End Sub 
```

# ios - 我什么时候应该在 MonoTouch 构建设置中启用“引用计数扩展”？

> ID：13009148
> 
> 赞同：5
> 
> 时间：2012-10-22T10:08:49.467
> 
> 标签：ios, xamarin.ios, garbage-collection, automatic-ref-counting

我应该在什么情况下使用此功能？
它到底有多成熟？

优缺点都有什么？
它解决了什么问题？

它是否特定于 MonoTouch、Mono GC 或 ObjC 中的引用计数？

![在此处输入图像描述](../Images/7b5a81a01e632fa8c3a72eff5c6d4e87.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T19:40:14.743

以下是对您的问题的一些快速、高层次（以及出局或订单）的答案……

> 它是否特定于 MonoTouch、Mono GC 或 ObjC 中的引用计数？

它允许`sgen`单声道垃圾收集器更紧密地与 Objective-C 引用计数一起工作。Mono（或 Android 的 Mono）不需要这种意识，因此它是 MonoTouch 特有的。

> 它到底有多成熟？

正如 UI 所说：**Experimental preview**。因此，虽然我们知道它可以工作，但它*尚未*在应用程序中广泛使用（与默认 GC 相比）。它更像是一个方向而不是一个目的地（即它可能会发展）。

非常欢迎您对其进行测试、使用（如果证明对您的情况有用）并报告您的发现/经验。但是它并不完全受支持，例如您可能遇到了我们无法立即修复或解决方法的错误（除了要求您返回默认设置之外）。

> 它解决了什么问题？

垃圾收集器和 Objective-C 的引用计数的共存是一个非常复杂的主题。MonoTouch 尽力向开发人员隐藏（大部分）复杂性。

其中大部分是在运行时内完成的（例如，通过使用支持字段）。此扩展`sgen`旨在让 GC 本身（不仅是运行时）了解引用计数的需求。

> 优缺点都有什么？

PRO：它可以节省内存，因为[链接器](http://spouliot.wordpress.com/2012/03/05/linker-vs-bindings-and-newrefcount/)可以删除许多支持字段，否则这些字段是确保我们保留对托管对象的引用所必需的。如果没有这些（引用）支持字段，GC 通常会收集实例（而非托管代码仍然需要它们）。

CON：我们需要更多反馈，更多比较数据（例如性能）。

# sql-server - 搜索包含特殊字符的字符串(!,@,#./,逗号(,))

> ID：13009152
> 
> 赞同：1
> 
> 时间：2012-10-22T10:09:00.910
> 
> 标签：sql-server

我在 DB 中有一个列，其中可能包含带有特殊字符的数据。例如：a column,Name 可能有数据如下 santosh 的 santosh/s santosh%s

如何使用 like 运算符在 DB 中搜索这些值。

```
Select * from table where name like '%santosh%'; 
```

如何更改上述查询以搜索撇号（santosh's）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:42:24.813

1\. 撇号 s 你可以使用

```
Select * from table where column like '%santosh''s%' 
```

2./s 你可以直接给

```
Select * from table where column like '%santosh/s%' 
```

3\. %s 你可以使用

```
Select * from table where column like '%santosh[%]s%' 
```

希望这可以帮助.....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:11:19.477

只需使用 2 撇号来转义字符

```
Select * from table where name like '%santosh''s%'; 
```

# .net - 子表单集合处理

> ID：13009153
> 
> 赞同：1
> 
> 时间：2012-10-22T10:09:04.097
> 
> 标签：.net, asp.net-mvc

如果我的 ViewModel 有一些子属性：

```
public class MyViewModel
{
   public MyFormViewModel Form {get;set;}
} 
```

我为这个属性渲染了一个表单，然后我可以得到以下 ActionResult：

```
[HttpPost]
public ActionResult SomeAction(MyFormViewModel form)
{
   ...
} 
```

并且 DefaultModelBinder 填充表单属性（如果 ViewModel 的属性名称等于操作参数名称）。

`IList<MyFormViewModel>`但是，如果 MyViewModel 包含由 index: 呈现的操作参数，我应该如何命名`@Html.EditorFor(x => x.Forms[index])`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T19:24:34.293

尝试这个：

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var myViewModel = new MyViewModel()
            {
                Form = new MyFormViewModel {Name = "Header"},
                FormViewModels = new List<MyFormViewModel>()
                                     {
                                         new MyFormViewModel() {Name = "First"},
                                         new MyFormViewModel() {Name = "Secound"}
                                     }
            };

        return View(model: myViewModel);
    }
    [HttpPost]
    public ActionResult Index(FormCollection collection, List<MyFormViewModel> FormViewModels, MyViewModel myView)
    {
        return View();
    }

} 
```

楷模：

```
public class MyViewModel
{
    public MyFormViewModel Form { get; set; }
    public IList<MyFormViewModel> FormViewModels { get; set; } 
}

public class MyFormViewModel
{
    public string Name { get; set; }
} 
```

看法：

```
@model MvcChat.Models.MyViewModel
@{
    ViewBag.Title = "Home Page";
}

@using(Html.BeginForm())
{
    @Html.EditorFor(model=>model.Form.Name)

    for (int i = 0; i < Model.FormViewModels.Count; i++)
    {
        @Html.EditorFor(x => x.FormViewModels[i])
    }
    <input type="submit" value="go"/>
} 
```

结果应该是这样的（[http://i.stack.imgur.com/t0Je0.png](https://i.stack.imgur.com/t0Je0.png)）：

![结果](../Images/06f492c0d36515c4dae6405e85693805.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T17:33:28.870

我从来没有做过类似的事情，但如果有可能（我不知道是不是），在这里你可以找到一个古老但很好的[起点](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)。希望有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T08:58:15.590

如果你

> 实际上不需要发布列表，我希望能够发布列表的一种形式

那么就不要使用`@Html.EditorFor(x => x.Forms[index])`. 利用

```
var element = x.Forms[index]
@Html.EditorFor(x => element) 
```

在这种情况下，您的操作参数的名称无关紧要。

# ruby-on-rails - Rails where 语句中的时间计算

> ID：13009163
> 
> 赞同：0
> 
> 时间：2012-10-22T10:09:27.920
> 
> 标签：ruby-on-rails, ruby-on-rails-3, datetime, squeel

我正在尝试在 where 语句中进行一些时间计算。我想选择生命周期已经过去的报价。

```
select_offers = Offer.where { (published_time + life_time) < DateTime.now } 
```

它不会抛出任何错误，但也不会返回对象。我正在使用squeel gem。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:48:41.327

假设`life_time`是报价有效的天数。

```
select_offers = Offer.where(["DATE_ADD(published_time, INTERVAL life_time DAY) <  ? " , DateTime.now ] 
```

参考：- [`DATE_ADD`](http://www.w3schools.com/sql/func_date_add.asp)mysql的功能

# ruby - 在 ruby on rails 3.2 中安排重复任务

> ID：13009165
> 
> 赞同：2
> 
> 时间：2012-10-22T10:09:35.903
> 
> 标签：ruby, ruby-on-rails-3, task, whenever

我在 Rails 网站上有 ruby​​，我想在其中以固定的时间间隔执行一些任务，例如“每周日通过电子邮件发送报告”。
我已经使用`whenever`gem 进行了检查，但由于它是 *nix 实用程序 cron 的包装器，因此它可能无法在 Windows 上运行。

我在问要使用哪个 gem 或方法来安排不依赖于底层平台的上述任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:17:40.363

Clockwork和[rufus](https://github.com/tomykaira/clockwork) [-scheduler](https://github.com/jmettraux/rufus-scheduler)（可选地与[延迟作业](https://github.com/collectiveidea/delayed_job)结合使用）都是调度任务的好方法。

如果您使用的是 torquebox，它已经提供了一个[基于石英的作业调度程序。](http://torquebox.org/2x/builds/html-docs/scheduled-jobs.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T11:46:40.223

使用`WebMin set up`. 为您要执行的应用程序脚本设置 Cron 作业并在 web min 服务器上运行它`i.e your_ip_address:10000`。这是作业调度的最佳方式。我在我的大部分项目中都使用了它。

# c# - 如何更改 Visual Studio 10 中的编译器选项？

> ID：13009168
> 
> 赞同：0
> 
> 时间：2012-10-22T10:09:40.620
> 
> 标签：c#, visual-studio-2010, compiler-options

我试图运行我的应用程序并遇到了这个问题：

> 无法加载文件或程序集“Interop.ComUtilitiesLib”

在谷歌搜索之后，我找到了一种通过更改编译器选项来解决该问题的方法。

但是，我真的不知道如何更改编译器选项的设置（在项目属性中）以显式生成“x86”（即 32 位）应用程序。

我看到然后查看项目的属性只是：“应用程序，构建，构建事件，调试，......等等”。只是编译选项消失了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:15:33.717

选择构建菜单 -> 配置管理器。在活动解决方案平台上 -> 选择新建或编辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:12:01.213

编译器选项是[构建页面](http://msdn.microsoft.com/en-us/library/kb4wyys2%28v=vs.80%29.aspx)的一部分。听起来您想修改 Platform 值。

# android - Android：冬季应用程序的 GPS 高度跟踪

> ID：13009171
> 
> 赞同：2
> 
> 时间：2012-10-22T10:10:00.920
> 
> 标签：android, gps, altitude

我正在为 Android 开发一个应用程序，其目的之一是测量海拔（高度）的变化。我知道今天我们无法获得高精度的高度数据（我猜即使是中等的）。我盯着寻找替代品，我知道有全球高程数据我可能会用于我的计算（顺便说一下 - 你能推荐一些好的数据提供者，因为我需要在设备上的离线模式下使用它，这样会很好如果我可以将其下载到文件中并在应用程序中使用）。

如果您尝试在建筑物内检查 GPS 高度不能正常工作，我想确保如果您在**干燥**的滑雪坡上 - 它也会不正确吗？

# html - 是否可以使用 JSF ajax 更新非 JSF 组件（纯 HTML）？

> ID：13009174
> 
> 赞同：15
> 
> 时间：2012-10-22T10:10:07.557
> 
> 标签：html, ajax, jsf, jsf-2

是否可以更新我的页面中不是 JSF 组件的部分？

例如，我可以更新纯 HTML`<div>`还是需要将其包装在 JSF 组件中？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-22T12:55:48.467

> *Is it possible to update parts of my page that are not JSF components?*

No. The to-be-updated component has to be available by [`UIViewRoot#findComponent()`](http://docs.oracle.com/javaee/7/api/javax/faces/component/UIComponentBase.html#findComponent-java.lang.String-), so that JSF can find them, invoke `encodeAll()` on it, capture the generated HTML output and pass back it in the ajax response so that JavaScript can update the HTML DOM tree with it. Plain HTML elements are not represented as real `UIComponent` instances in the JSF component tree, so JSF already cannot locate them in first place.

* * *

> *For example, can I update a plain HTML `<div>` or do I need to wrap that in a JSF component?*

You need to wrap it in a JSF component like `<h:panelGroup>`. You can however just use `<h:panelGroup layout="block">` to represent a real `<div>` in JSF. This way you don't need to wrap the `<div>` in another JSF component.

```
<h:panelGroup layout="block" id="foo">
    ...
</h:panelGroup> 
```

Since JSF 2.2 you can use new [passthrough elements](https://docs.oracle.com/javaee/7/tutorial/jsf-facelets009.htm) feature with `jsf:id` attribute to declare HTML(5) elements as JSF components.

```
<... xmlns:jsf="http://xmlns.jcp.org/jsf">

<div jsf:id="foo">
    ...
</div> 
```

```
<main jsf:id="bar">
    ...
</main> 
```

```
<section jsf:id="baz">
    ...
</section> 
```

They will render their output as-is, but under the covers be a concrete `UIPanel` instance.

There's however one corner case in case of [composite components](https://stackoverflow.com/tags/composite-component/info). You can use the following approach to have a HTML element which *is* updateable by ajax.

```
<cc:implementation>
    <span id="#{cc.clientId}">
        ...
    </span>
</cc:implementation> 
```

The explanation that this approach works is because even though the composite component does *not* render itself to the HTML output, it **is** by itself available by `UIViewRoot#findComponent()`.

### See also:

*   [How to find out client ID of component for ajax update/render? Cannot find component with expression "foo" referenced from "bar"](https://stackoverflow.com/questions/8634156/how-to-find-out-client-id-of-component-for-ajax-update-render-cannot-find-compo)
*   [Why do I need to nest a component with rendered="#{some}" in another component when I want to ajax-update it?](https://stackoverflow.com/questions/9010734/why-do-i-need-to-nest-a-component-with-rendered-some-in-another-component-w)
*   [Rerendering composite component by ajax](https://stackoverflow.com/questions/18379689/rerendering-composite-component-by-ajax/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T11:48:42.307

看来你不能。

要更新某些东西，请将其包装在“可更新”组件中（在 primeaces p:outputpanel 中）并更新该组件。

*另外：在您的特殊情况下，您可以通过这种方式刷新 p:tree 的子级：[JSF update primefaces tree children](https://stackoverflow.com/questions/13000870/jsf-update-primefaces-tree-children)*

（哈哈一直想用第三人称跟我说话）

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-22T10:14:09.707

AFAIK 你通过它们的 ID 更新组件，因为常规元素可以有一个 ID，只要你得到正确的 ID 就应该是可能的；-)

# performance - 用于存储允许有效比较操作的值范围的数据结构

> ID：13009179
> 
> 赞同：2
> 
> 时间：2012-10-22T10:10:25.970
> 
> 标签：performance, algorithm, data-structures

我正在寻找一种数据结构，它允许存储整数的非重叠范围并比较某个范围是否存在[被覆盖]在[被]数据结构中。

例如，在我存储 (0,9),(10,19),(30,29) 之后，稍后我想检查范围 (1,11) 是否被覆盖，在这种情况下，算法会给出一个“是”，而对于范围 (15,25)，算法给出“否”，因为未覆盖给定范围。

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:31:47.143

由于您正在处理整数的非重叠范围，我认为一个简单的 BST 可以完成这项工作（像 AVL 或 RB-tree 一样平衡，以防您想要严格的 O(logN) 性能）

对于间隔 [ab] 构建以“a​​”为键的树。节点结构类似于：

```
struct node{
int left;
int right;
struct node*left;
struct node*right;
}; 
```

为了搜索：

```
bool SearchOverlap(node* root, interval I){
if(!root)
    return false;
if(I.right < root->left)
    SearchOverlap(root->left, I);
else if(I.left > root->right)
    SearchOverlap(root->right, I);
else if(I.left > root->left && I.right < root->right)
    return true;
else if(I.left < root->left && I.right < root->right)
    return SearchOverlap(root->left, new Interval(I.left, root->left));
else if(I.left > root->left && I.right > root->right)
    return SearchOverlap(root->right, new Interval(root->right, I.right));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:13:07.140

您可能正在寻找[间隔树](http://en.wikipedia.org/wiki/Interval_tree)数据结构，它旨在快速存储和搜索间隔。

# c# - 如何使用 EmguCV 模糊图像的一部分？

> ID：13009180
> 
> 赞同：1
> 
> 时间：2012-10-22T10:10:29.163
> 
> 标签：c#, image-processing, emgucv

我们有大量从汽车拍摄的图像用于一个项目。为了满足隐私规范，我们需要检测面部和车牌，然后模糊这些区域。我开始了解 Emgucv 项目，并且[http://www.emgu.com/wiki/index.php/License_Plate_Recognition_in_CSharp](http://www.emgu.com/wiki/index.php/License_Plate_Recognition_in_CSharp)提供的教程对于检测许可证非常有用。

有没有办法使用 Emgu 本身来模糊这个区域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:09:00.827

我不相信有像你正在寻找的那样内置的东西。

与使用 openCV 一样，您需要做的是模糊源图像的整个副本，然后将车牌部分复制回原始图像。

您可以先使用[SmoothBlur 方法](http://www.emgu.com/wiki/files/1.5.0.0/Help/html/4d3d4a90-feb3-ff76-0471-7ae2d3917e7c.htm)，然后使用接受掩码作为其第二个参数的[Copy 方法来执行此操作。](http://www.emgu.com/wiki/files/1.5.0.0/Help/html/a9b5bb96-c65e-93d5-330a-13ad618563e6.htm)

# matlab - Matlab中的图像矩阵运算

> ID：13009185
> 
> 赞同：0
> 
> 时间：2012-10-22T10:10:44.037
> 
> 标签：matlab, matrix

我已经将图像保存在这样的矩阵中：

```
image1=imread('abcn.tif');
nfilas= tamanio(1);
ncols= tamanio(2);
nbandas= tamanio(3);

imagenn = zeros(nfilas, ncols, nbandas); 
```

我的结果是：

```
 Name         Size             Bytes  Class     Attributes

  imagenn      4x4x3               96  uint16 
```

现在，我想绘制三个波段上相同像素的值。例如，我想获取第一个位置 (1,1) 的值并绘制它。如何用矩阵表示位置？

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:15:16.157

矩阵 imagenn 是正方形 (4x4) 并具有 3 个“层”（R、G 和 B？）。因此，要在每个“层”上获得一个像素 P，您必须编写 P(1,1,1)、P(1,1,2) 和 P(1,1,3)。请注意，Matlab 的索引从 1 开始。

您将不得不绘制向量 P(1,1,:)

# api - 多种类型的游离碱过滤器

> ID：13009191
> 
> 赞同：4
> 
> 时间：2012-10-22T10:11:24.670
> 
> 标签：api, freebase

是否可以在 freebase API 中按多种类型过滤查询？

我需要在两个或三个 freebase 类型中搜索关键字，但似乎 freebase API 不允许此选项。在那种情况下，唯一的解决方案可能是为过滤类型发送两个或三个单独的请求？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T00:39:03.293

是的，您可以使用搜索 API 或 MQL 读取 API 按多种类型进行过滤。

对于看起来[像这样](https://www.googleapis.com/freebase/v1/search?query=london&filter=%28any%20type:/music/musical_group%20type:/people/person%20type:/location/citytown%29)的搜索 API ：

```
filter=(any type:/music/musical_group type:/people/person type:/location/citytown) 
```

此过滤器告诉它限制结果以匹配 3 种类型之一。

在 MQL 读取 API 中，您可以按多种类型进行过滤，[如下所示](http://www.freebase.com/api/service/mqlread?query=%7B%20%22query%22%3a%20%5B%7B%20%22id%22%3a%20null,%20%22name%22%3a%20null,%20%22type%22%3a%20%5B%5D,%20%22name~=%22%3a%20%22London%22,%20%22type%7C=%22%3a%20%5B%20%22/people/person%22,%20%22/location/citytown%22,%20%22/music/musical_group%22%20%5D%20%7D%5D%20%7D)：

```
[{
  "id":            null,
  "name":          null,
  "type": [],
  "name~=": "London",
  "type|=": [
    "/people/person",
    "/location/citytown",
    "/music/musical_group"
  ]
}​]​ 
```

# google-analytics - 在 Google Analytics 中手动添加电子商务交易

> ID：13009192
> 
> 赞同：2
> 
> 时间：2012-10-22T10:11:41.137
> 
> 标签：google-analytics

我们在电子商务网站中跟踪 Google Analytics 中的交易时遇到了一些问题，现在由于配置错误，我们丢失了几个月的数据。

是否可以以某种方式批量导入这些交易及其附加参数（事件日期、交易代码、金额）？

我们知道这些事件中的每一个发生的时间，但我们希望将其重新导入 Google Analytics（分析）以获得完整的统计数据。

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:34:18.693

例如，如果数据在 MySQL 中。

1.  运行一个 MySQL 命令，该命令从 中提取所有订单`date_you_want_start_from`，然后限制它直到`date_you_want_to_end_from`
2.  有了这些数据，然后创建一个 MySQL 视图调用它`"import_table"`
3.  创建一个 PHP 和 XML 脚本，从 加载所有数据`import_table`，然后编写并填充 XML 提要
4.  现在只需在您的分析循环 JavaScript 中运行该 XML 提要，它就会循环并基本上为您将数据添加到过去。

注意：PHP、XML 和 MySQL 只是一个场景，让您可以先行一步。

# vb.net - 在 Visual Basic 中从内存中添加 .txt 电子邮件附件

> ID：13009195
> 
> 赞同：0
> 
> 时间：2012-10-22T10:11:53.017
> 
> 标签：vb.net, email

我想向用户发送一封电子邮件，其中包含有关数据库中所做更改的 .txt 格式的报告。

该文件将如下所示：

```
User     |   Acces   | Way_of_assignment | Project
---------------------------------------------------
uid3434     direct         group            x1
uid4453     indirect       direct           x2 
```

但我想专门在内存中创建这个附件。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:13:27.617

在内存中创建一个代表您的文件的字符串。

然后，将其读入 a [`MemoryStream`](http://msdn.microsoft.com/en-us/library/system.io.memorystream.aspx)，使用[`Encoding`](http://msdn.microsoft.com/en-us/library/system.text.encoding.aspx)类将字符串转换为字节 - 这可以传递给[`Attachment`](http://msdn.microsoft.com/en-us/library/system.net.mail.attachment.aspx)构造函数。

# php - PHPExcel mergeCells() 导致不可读的内容

> ID：13009199
> 
> 赞同：0
> 
> 时间：2012-10-22T10:12:12.650
> 
> 标签：php, phpexcel

在过去的几天里，我一直在使用 PHPExcel，到目前为止，它非常适合我的需要。但是，今天我一直在尝试将 mergeCells 用于“colspan”功能，但是当我这样做时会导致无法读取的内容错误，并且 MS Excel 会提示我修复文件。

我正在使用的代码是：

```
$first = PHPExcel_Cell::stringFromColumnIndex($xCount).$yCount;    
$second = PHPExcel_Cell::stringFromColumnIndex( $xCount + 2).$yCount;
$cell_merge = $first.":".$second;   
$this->excelDoc->getActiveSheet()->mergeCells( $cell_merge ); 
```

我已经输出了结果，`$first, $second`并`$cell_merge`确保我以正确的方式进行操作并且内容是正确的。此外，当我尝试对单元格进行静态合并时（通过输入`mergeCells('A1:C1');`它可以完美地工作。

尝试写入合并的单元格是否可能会导致问题？

编辑：请注意：我还尝试将变量转换为字符串，以防万一：

```
$this->excelDoc->getActiveSheet()->mergeCells( (string)$cell_merge ); 
```

......但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:53:33.520

仅供日后参考。这里的问题存在于键盘和椅子之间。

我试图在一个循环中更改 colspan，在这个循环中，我调用了带有“A0:C0”的 mergeCells。

当传递“0”行时，我没有收到任何错误，只是一张糟糕的 Excel 表。有什么要记住的。

# r - 针对 R 中的数值向量绘制字符向量

> ID：13009203
> 
> 赞同：7
> 
> 时间：2012-10-22T10:12:20.853
> 
> 标签：r, vector, plot, character, dataframe

我在 R 中有以下数据框：

```
>AcceptData
  Mean.Rank Sentence.Type
1       2.5       An+Sp+a
2       2.6      An+Nsp+a
3       2.1       An+Sp-a
4       3.1      An+Nsp-a
5       2.4       In+Sp+a
6       1.7      In+Nsp+a
7       3.1       In+Sp-a
8       3.0      In+Nsp-a 
```

我想用 x 轴上的 Sentence.Type 列绘制，每个单元格的实际名称作为 x 轴上的一个点。我希望 y 轴以 0.5 的步长从 1 变为 4

到目前为止，我还不能用 plot() 和 hist() 来绘制这个。我不断收到不同类型的错误，主要是因为 data.frame 中字符列的性质。

我知道这对大多数人来说应该很容易，但我仍然是 R 的菜鸟，几个小时后我无法得到正确的情节。任何帮助深表感谢。

编辑：

我得到的一些错误：

```
> hist(AcceptData$Sentence.Type,AcceptData$Mean.Rank)
Error in hist.default(AcceptData$Sentence.Type, AcceptData$Mean.Rank) : 
  'x' must be numeric 
```

或者：（这不会给出错误，但绝对不是我想要的图表。它的所有 x 值都被限制在 x 轴的左侧）

```
 plot(AcceptData$Sentence.Type,AcceptData$Mean.Rank,lty=5,lwd=2,xlim=c(1,16),ylim=c(1,4),xla b="Sentence Type",ylab="Mean Ranking",main="Mean Acceptability Ranking per Sentence") 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-22T10:25:57.050

默认`plot`函数有一个方法允许您在 x 轴上绘制因子，但要使用它，您必须将文本数据转换为`factor`：

这是一个例子：

```
x <- letters[1:5]
y <- runif(5, 0, 5)

plot(factor(x), y) 
```

![在此处输入图像描述](../Images/a099b28d2ba25b955b54ef3c16f1b7a7.png)

并使用您的示例数据：

```
AcceptData <- read.table(text="
Mean.Rank Sentence.Type
1       2.5       An+Sp+a
2       2.6      An+Nsp+a
3       2.1       An+Sp-a
4       3.1      An+Nsp-a
5       2.4       In+Sp+a
6       1.7      In+Nsp+a
7       3.1       In+Sp-a
8       3.0      In+Nsp-a", stringsAsFactors=FALSE)

plot(Mean.Rank~factor(Sentence.Type), AcceptData, las=2, 
     xlab="", main="Mean Acceptability Ranking per Sentence") 
```

![在此处输入图像描述](../Images/69c17fc79996b9e512d9979cb75f3008.png)

# iphone - 将大数据从本地数据库加载到 UITableview 而无需 ui 冻结

> ID：13009204
> 
> 赞同：1
> 
> 时间：2012-10-22T10:12:27.233
> 
> 标签：iphone, objective-c, ios, ipad, ios5

我正在从 Ultralite 数据库中检索 10,000 条记录到一个数组中。

我的查询需要 3 秒将值加载到数组中。每当我单击打开视图控制器时，这会使 UI 冻结 3 秒。

我想在后台执行查询时立即打开视图控制器并显示 Activity 指示器 3 秒。

如果可能的话，我想动态显示行动画并显示行数，例如“检索到的产品数为 5045”。

请问，有人可以帮我解决这个问题吗？

提前致谢。

编辑：

```
NSMutableArray *customerArray = [[DB sharedInstance] LoadCustomerOverview]; 
```

“LoadCustomerOverview”是一个函数，它具有从 Ultrlite 数据库中检索 10,000 条记录的 select 语句。

上面的行需要 3 秒。`NSLog`我在上述声明之前和之后检查了这一点。使用这个“customerArray”我将填写`UITableview`我的视图控制器，它只需要几毫秒来准备单元格。

问题在于上面的行。

我怎么解决这个问题？或任何其他提高性能的方法？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:25:35.423

解决方案是 performSelectorInBackground，它不会冻结你的 UI

```
[self performSelectorInBackground:@selector(getRecordsFromDatabase) withObject:yourObjectHereAsArgument] 
```

现在方法：

```
-(void)getRecordsFromDatabase
{
  //retrieve records here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:26:09.243

更新：你使用核心数据吗？如果你批处理怎么办？[fetchRequest setFetchBatchSize:20];

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSFetchRequest_Class/NSFetchRequest.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSFetchRequest_Class/NSFetchRequest.html)

问候，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T12:41:07.230

接受所有其他好的答案，这可能略有不同，iPhone 设备有（大部分）10-11 和 iPad 设备的两倍（我不知道确切的想法），用户可见的行数在`UITableView`. 如果您真的不需要一次处理或显示所有 10k 条记录，我认为您真的不需要查询所有记录，因为您提出的问题需要良好的内存和处理时间。相反，您可以一次获取（查询）1k（甚至少量）记录，一旦获得 1k（或您想要的数量），您就可以查询下一条记录，这应该在`[self performSelectorInBackground:@selector(getRecordsFromDatabase) withObject:];`因此您的应用程序将永远不会冻结并且用户不会感到任何中断，这种情况只有在您的数据是持久的并且具有唯一的行标识符键（主键）时才能实现，而且如果您以升序或降序查询这些数据订单，对于其他情况，例如，如果您想要任何随机数据，则此答案无效。

另请注意，将代码放入`viewDidAppear`&`UIActivityIndicator`可能是您的解决方案，但如果您要获取更多的行数，那么它将被用户中断。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T10:18:46.973

我无法想象你为什么需要 10000 条记录在一个数组中，因为这可能是可以优化的。

但是，要回答您的问题，您可以将加载方法移至 viewDidAppear:（我假设您在 viewDidLoad:) 中进行获取，并在开始加载之前显示某种进度条。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T10:19:13.467

```
[NSThread detachNewThreadSelector:@selector(startBackgroundProcess:) toTarget:self withObject:YOUR_OBJECT];

-(void)startBackgroundProcess:(id)obj{
//interact with DB..
//After firing the query and get the Data 
[self performSelectorOnMainThread:@selector(finishedBackgroundProcess:) withObject:YOUR_RESULT waitUntilDone:NO];  
} 
```

# vim - Vim 文件类型检测不会触发语法高亮

> ID：13009205
> 
> 赞同：6
> 
> 时间：2012-10-22T10:12:32.707
> 
> 标签：vim

我正在尝试在 vim 中检测 Go 文件。我已经在其他计算机上正常设置了这个，但是这个卡住了。

```
:set filetype?
filetype=go 
```

所以它知道这是一个 go 文件，但没有触发语法高亮。

然而，

```
:set filetype=go 
```

正确触发它。

```
:filetype detect 
```

不起作用，并重新打开文件：e！关闭语法突出显示，即使文件类型仍然设置为“go”。

我有

```
set rtp+=/usr/local/go/misc/vim
filetype plugin indent on
syntax on 
```

在我的 .vimrc 中（如说明所述）。

这是怎么回事？我怀疑还有其他一些配置正在撤消语法突出显示，但不知道在哪里可以找到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T18:49:19.630

我不确定到底是什么问题……但是，您可以尝试`:scriptnames`查看 Vim 加载了哪些文件。

更进一步，您可以`set verbose=9`在您的`.vimrc`Vim 中重新启动。小心，这*真的很*冗长，试着把这个数字调低。

# multithreading - 在 perl 中修改文件时使用信号量

> ID：13009209
> 
> 赞同：0
> 
> 时间：2012-10-22T10:12:49.890
> 
> 标签：multithreading, perl, file, semaphore

我是 perl 线程的新手。

我有一个包含项目列表的文件（每个项目都在一个单独的行中），我想并行构建这些项目。目前，每个线程：

1.  以“读取”模式打开文件
2.  保存一些项目的列表（= 一些文件行）
3.  关闭文件
4.  再次打开文件 - 作为“写入”模式
5.  在没有选择的行的情况下重写它

为了确保每个线程是唯一访问文件的线程，我尝试使用信号量。

由于某种原因，发生了线程冲突，我无法弄清楚我做错了什么。

我可以看到（在我的“报告”中，它还获取每个构建的当前时间）不同的线程从“共享”文件中选择相同的项目（它只偶尔发生一次，但仍然......）

我什至不确定我的 $semaphore decleration 作为“我的”变量是否合法。

任何帮助将不胜感激！

谢谢。

* * *

这是我的代码的一部分：

```
 my $semaphore = Thread::semaphore->new() ;

sub build_from_targets_list{

    #...
    open(REPORT, "+>$REPORT_tmp");  # Open for output
    #....
    @threads =();

    for ($i = 0; $i < $number_of_cores; $i++){
        my $thr = threads->new(\&compile_process, $i,*REPORT);
        push @threads, $thr;
    }

    $_->join for @threads;
    close (REPORT);
}
### Some stuff..

sub compile_process{

    *REPORT = shift(@_);
    #...

    while (1){
        $semaphore->down();
        open (DATA_FILE, $shared_file);
        flock(DATA_FILE, 2);
        while ($record = <DATA_FILE>) {
            chomp($record);
            push(@temp_target_list,$record);    
        }

        # ... choose some lines (=projects)...
        # remove the projects that should be built by this thread:
        for ($k = 0; $k < $num_of_targets_in_project; $k++){            
            shift(@temp_target_list);

        }

        close(DATA_FILE);       
        open (REWRITE,">$shared_file");

        flock(REWRITE, 2);

        seek(REWRITE, 0, 0); 
        foreach $temp_target (@temp_target_list){

            print REWRITE "$temp_target\n";

        }

        close (REWRITE);

        ## ... BUILD selected projects...

        $semaphore->up();
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:09:52.200

首先，对您处理文件的方式进行一些基本清理。如果它是一个简单的文件问题，那么尝试调试线程问题是没有意义的。

必须检查任何文件命令（打开、关闭、flock、seek 等）是否成功。要么在上面贴一些`or die`s 要么`use autodie`。

其次是使用一个硬编码常量来表示群。这些是系统相关的，很难记住模式 2 是哪种。 [Fcntl](https://metacpan.org/module/Fcntl)提供常量。

您正在使用排他锁打开数据文件以进行读取（2 通常是排他锁）。那应该是共享锁。这不太可能导致问题，但会导致您的线程不必要地阻塞。

最后，使用词法文件句柄而不是全局范围的 glob。这减少了机会

```
use Fcntl qw(:flock);
use autodie;

open (my $data_fh, $shared_file);
flock($data_fh, LOCK_SH); 
```

作为旁注，`seek $fh, 0, 0`打开文件后进行写入是不必要的。寻找常量和羊群一样，使用 Fcntl 来获取常量。

另一个错误是您正在传递`$i, *REPORT`但`compile_process`认为`*REPORT`是第一个参数。再次使用全局文件句柄意味着将其传入是多余的，请使用词法文件句柄。

现在已经不碍事了，你的基本算法似乎有缺陷。 `compile_process`让每个线程将整个数据文件读取到线程本地数组`@temp_target_list`中，从该本地数组中移出一些并将其余的写出。因为`@temp_target_list`是每个线程，所以没有协调。除非`$num_of_targets_in_project`是共享的并进行某种屏幕外协调，但未显示。

基于文件的锁定总是会成为地狱的一小部分。线程有更好的协调机制。有一种更简单的方法可以做到这一点。

假设文件不是太大，将每一行读入一个共享数组。然后让每个线程从该数组中获取要处理的项目。该数组是共享的，因此当删除每个元素时，该数组将为所有线程更新。就像是...

```
use strict;
use warnings;
use autodie;

use threads;
use threads::shared;

my $Max_Threads = 5;
my @Todo : shared;

open my $fh, "<", $work_file;
@Todo = <$fh>;
close $fh;

my @threads;
for (1..$Max_Threads) {
    push @threads, threads->new(\&compile_process);
}

$_->join for @threads;

sub compile_process {
    while( my $work = shift @Todo ) {
        ...do whatever with $work...
    }
} 
```

如果文件太大而无法保存在内存中，您可以使用[Thread::Queue](https://metacpan.org/module/Thread%3a%3aQueue)构建工作项队列并动态添加到其中。

# ios - UINavigation 弹出（或推送）动画的错误？

> ID：13009211
> 
> 赞同：0
> 
> 时间：2012-10-22T10:12:57.360
> 
> 标签：ios, pushviewcontroller, popviewcontroller, uinavigationcontroller

我今天遇到了一个问题。我将 viewController（名为 bookShelf）推入导航（名为 rootViewController），并带有动画：YES。然后我快速弹出它，问题就会出现。viewController（名为 bookShelf）被弹出，但 rootViewController 的视图没有改变，它仍然是 bookShelf.view。

代码是这样的。

```
- (void)test
{
    [self.navigationController pushViewController:bookShelf animated:YES];
    [self.navigationController popViewControllerAnimated:YES];
} 
```

bookShelf 被弹出，但视图没有改变。1）当我设置动画时：NO，它会是正确的 2）当我在Dealy 1s 之后弹出 bookShelf 时，它也会正确。

我认为问题是动画引起的，当 push 的动画没有停止时，我 popViewController 会出错。

有没有人有更好的方法来解决它？谢谢你。

# javascript - ckeditor 停止工具栏随页面滚动

> ID：13009213
> 
> 赞同：0
> 
> 时间：2012-10-22T10:13:07.123
> 
> 标签：javascript, ckeditor

我想阻止工具栏随着页面上下滚动。我正在使用 ckeditor 4“beta”，因为我想使用它的内联编辑功能。

我查看了配置类属性，没有任何运气：

“http://nightly-v4.ckeditor.com/ckeditor_api/#!/api/CKEDITOR.config”。

我查看了 API 的其余部分以了解工具栏事件的任何挂钩，但也没有运气。我还试图找到工具栏在哪里监听滚动事件并将其删除。没运气！

有没有办法做到这一点？即使我需要深入研究代码并自己更改它！我只需要有人指出我正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:40:05.733

确实，现在没有这样的选择。我们会添加一些，但首先我们必须发布最终的 v4 版本:)。

无论如何 - 停止工具栏浮动更新`plugins/floatingspace/plugin.js:57`：

```
function changeMode( newMode ) {
    var editorPos = editable.getDocumentPosition();
    updatePos( 'absolute', 'top', editorPos.y - spaceHeight - dockedOffsetY );

    mode = newMode;
} 
```

它适用于我 - 工具栏显示在内容上方并且它不会移动。

# javascript - 使用 javascript 或 Express.js 或 node.js 处理 Cookie？

> ID：13009215
> 
> 赞同：3
> 
> 时间：2012-10-22T10:13:11.317
> 
> 标签：javascript, jquery, node.js, express

我只想知道哪一种是处理 cookie 的最佳方法？使用 Express.js？Node.js 还是客户端 javascript jquery？

我对安全观点有点困惑。

感谢您提供的所有帮助/信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T10:21:18.170

Cookie 是与语言/平台无关的 HTTP 概念。因此，Node.js 是服务器端平台，而 Express.js 是 Node.js 的服务器端 Web 应用程序框架，而 jQuery 是客户端库。

从安全角度来看，您不应以纯文本形式存储 cookie 信息。此外，“[您不应允许客户端脚本设置或读取 cookie 值](https://www.owasp.org/index.php/HttpOnly)”。如果您已经在使用 Express.js，那么我建议您使用 Express.js 设置和读取 cookie 以供您的应用程序注意，并确保您加密 cookie 值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:48:00.643

您应该在 cookie 中保留一些会话 ID，而不是实际数据（在大多数情况下都是如此，尤其是对于任何与用户相关的敏感数据）。

使用 cookie 的正确方法是：

1.  让用户输入他的登录名/密码并选中“保持登录”复选框。
2.  在服务器端，根据输入的登录名和密码，确定用户凭据是否有效。
3.  假设凭据有效，创建一些随机 id 并在服务器端存储信息，这个给定的随机 id 与一些数据（一些用户 id、设置等）相关。
4.  在服务器端，根据“让我登录”复选框的值，您将执行以下操作：如果选中了复选框，则创建应该在很远的将来（比如 100 年）的某个时间到期的 cookie。如果未选中复选框，则将 cookie 设置为在浏览器会话结束或例如 1 小时后过期。请记住，一旦您发送 cookie，用户就可以篡改 cookie 的到期日期，但那是完全不同的故事。
5.  用户（客户端）正在接收您的 cookie，其中包含生成的 id。该 cookie 会在每次请求时由浏览器发送给您。
6.  在服务器端，一旦您从客户端获取 cookie，请检查您是否知道该 id 以及它是否有效。如果是这样 - 从您的数据库或其他任何地方检索用户数据并对其进行操作。

# testing - 如何避免maven在正常编译中编译testClass

> ID：13009217
> 
> 赞同：1
> 
> 时间：2012-10-22T10:13:16.127
> 
> 标签：testing, maven, dependency-management

我有一个默认的 Maven 项目：

*   /src/main/java
*   /src/test/java（包括 *Test.java）。

当我执行“mvn compile”时，maven 也会尝试编译 /src/test/java 下的 testClasses。这失败了，因为某些依赖项（例如 JUnit）在“测试”范围内。将例如 JUnit 的范围更改为“提供”一切正常。

编译时如何避免maven编译testClasses？据我了解，我希望 Maven 仅在执行“testcompile”时编译这些文件。

我正在使用 Maven 2.2.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:22:46.890

我相信这与 JUnit 的范围无关。通常我们将 JUnit 的范围设置为`test`（而不是`provided`），一切都很好。

`src/test/java`由 Maven Compiler Plugin 的 testCompile 目标编译。但是，您不需要显式运行该目标。请查看有关 Maven 生命周期的主题。例如，如果您运行 maven install，它会隐含地经历许多阶段（例如编译、编译测试、生成资源等），其中许多都与默认插件目标有关。

如果你想避免构建测试源，从 Maven[编译器插件的使用页面](http://maven.apache.org/plugins/maven-compiler-plugin/testCompile-mojo.html#skip)，`compiler:testCompile`如果你通过设置关闭测试将被跳过`maven.test.skip=true`

所以，如果你的单元测试还没有准备好，只需使用 Maven 构建，带`-Dmaven.test.skip=true`参数。

补充一点，在开发过程中假设“单元测试失败”是正常的，这绝对不是一个好习惯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:21:32.193

只需对[maven-surefire-plugin使用](http://maven.apache.org/plugins/maven-surefire-plugin/test-mojo.html)[skip](http://maven.apache.org/plugins/maven-surefire-plugin/test-mojo.html#skip)参数即可跳过测试以及编译测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T13:26:09.880

pom.xml 错误地定义了“sourceDirectory”。删除它解决了问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T13:49:39.710

代替命令“maven clean compile”，使用“mvn -B -Dmaven.test.skip=true clean compile”。此参数跳过测试。

# sql - 如何在查询中使用“case when”

> ID：13009226
> 
> 赞同：4
> 
> 时间：2012-10-22T10:13:33.367
> 
> 标签：sql, symfony, doctrine

我有这个查询：

```
 $em = $this->getDoctrine()->getEntityManager();
$query = $em->createQuery("SELECT u,COUNT(u) AS nb_renouvellement,
    SUM(CASE WHEN f.`Criticity` = 'M' THEN 1 ELSE 0 END)  nb_majeur,
    SUM(CASE WHEN f.`Criticity` = 'C' THEN 1 ELSE 0 END)  nb_critique
    FROM AdminBlogBundle:AlertesBss2  f
GROUP BY f.BSC");
$listes = $query->getResult(); 
```

但我有这个错误

> [语法错误] 第 0 行，第 45 列：错误：预期文字，得到 'CASE'

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-10T19:01:02.160

批评不应该用引号引起来，应该用fu分组

# php - 包含 header.php 后如何更改页面标题？

> ID：13009227
> 
> 赞同：16
> 
> 时间：2012-10-22T10:13:42.820
> 
> 标签：php, title

页面.php：

```
<?php
include("header.php");
$title = "TITLE";
?> 
```

header.php：

```
<title><?php echo $title; ?></title> 
```

我希望在包含头文件*后设置我的标题。*是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-22T10:35:14.563

扩展 Dainis Abols 的答案，以及您关于输出处理的问题，

考虑以下：

您的 header.php 将标题标签设置为`<title>%TITLE%</title>`；"%" 很重要，因为几乎没有人输入 %TITLE%，所以您可以稍后将其用于 str_replace()。

然后，您可以像这样使用[输出缓冲区](http://php.net/manual/en/function.ob-start.php "ob_start")

```
<?php
    ob_start();
    include("header.php");
    $buffer=ob_get_contents();
    ob_end_clean();

    $buffer=str_replace("%TITLE%","NEW TITLE",$buffer);
    echo $buffer;
?> 
```

那应该这样做。

**编辑**

我相信[盖伊的想法](https://stackoverflow.com/questions/13009227/php-how-to-change-title-of-the-page-after-including-header-php/13009592#32508962)效果更好，因为如果你需要它，它会给你一个默认值，即：

*   标题是现在`<title>Backup Title</title>`
*   代码现在是：

```
<?php
    ob_start();
    include("header.php");
    $buffer=ob_get_contents();
    ob_end_clean();

    $title = "page title";
    $buffer = preg_replace('/(<title>)(.*?)(<\/title>)/i', '$1' . $title . '$3', $buffer);

    echo $buffer;
?> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-06-01T15:49:32.563

**1\. 只需在 require 函数前添加 $title 变量**

```
<?php

$title = "Your title goes here";
require("header.php");

?> 
```

**2.在header.php中加入如下代码**

```
<title><?php echo $title; ?></title> 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-22T10:18:09.543

您可以做的是，将输出存储在一个变量中，例如：

**头文件.php**

```
<?php
   $output = '<html><title>%TITLE%</title><body>';
?> 
```

PS：您需要删除**所有**回声/打印等，以便所有可能的输出都存储在`$output`变量中。

这可以通过`$output = '';`在文件开头定义然后*查找/替换* `echo`为`$output .=`.

然后将其替换`%TITLE%`为您需要的内容：

```
<?php
    include("header.php");
    $title = "TITLE";

    $output = str_replace('%TITLE%', $title, $output);
    echo $output;
?> 
```

另一种方法是`javascript`在您的代码中使用，而不是：

```
<title><?php echo $title; ?></title> 
```

把这个放在那里：

```
<script type="text/javascript">
    document.title = "<?=$title;?>"
</script> 
```

或者 jQuery，如果你喜欢：

```
<script type="text/javascript">
    $(document).ready(function() {
        $(this).attr("title", "<?=$title;?>");
    });
</script> 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-09-10T18:13:47.957

稍微扩展一下 we.mamat 的答案，您可以使用**preg_replace**而不是简单的替换，并完全消除对**%title%**的需求。像这样的东西：

```
<?php
ob_start();
include("header.php");
$buffer=ob_get_contents();
ob_end_clean();

$title = "page title";
$buffer = preg_replace('/(<title>)(.*?)(<\/title>)/i', '$1' . $title . '$3', $buffer);

echo $buffer;
?> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-22T10:18:06.670

您可以使用 JavaScript 进行设置

```
<script language="javascript">
    document.title = "The new title goes here.";
</script> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-11-11T08:38:46.657

**在页面顶部添加此代码**

```
<?php
    $title="This is the new page title";
?> 
```

**在您的模板头文件中添加此代码（包括）**

```
<title><?php echo $title; ?></title> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-06-24T00:06:22.303

这很容易。将此代码放入 header.php

```
 <? 
$sitename = 'Your Site Name'
$pagetitle;

if(isset($pagetitle)){
 echo "<title>$pagetitle." | ". $sitename</title>";
} 
  else {
echo "<title>$sitename</title>";
}
?> 
```

然后在页面中放置：

```
 <?
    $pagetitle = 'Sign up'
    include "header.php";
    ?> 
```

因此，如果您在 Index.php 上，标题就是您的站点名称。例如，如果您在注册页面上，标题为 Sign up | 您的站点名称

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-05-27T22:07:40.687

每个 Simple 只使用一个函数，我就创建了它。

```
 <?
function change_meta_tags($title,$description,$keywords){
        // This function made by Jamil Hammash
    $output = ob_get_contents();
    if ( ob_get_length() > 0) { ob_end_clean(); }
    $patterns = array("/<title>(.*?)<\/title>/","<meta name='description' content='(.*)'>","<meta name='keywords' content='(.*)'>");
    $replacements = array("<title>$title</title>","meta name='description' content='$description'","meta name='keywords' content='$keywords'");

    $output = preg_replace($patterns, $replacements,$output);  
    echo $output;
}
?> 
```

首先你必须创建function.php文件并将这个函数放在里面，然后在Header.php中的MetaTags下进行require。使用这个函数 change_meta_tags("NEW TITLE","NEW DESCRIPTION",NEW KEYWORDS); . 不要在 Header.php 中使用这个函数！！只是与另一个页面。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-10-18T06:26:33.267

使用这样的**jQuery**函数：

`$("title").html('your title');`

# iphone - 数组中的谓词

> ID：13009230
> 
> 赞同：0
> 
> 时间：2012-10-22T10:13:50.970
> 
> 标签：iphone

我有一个数组，其中包含很多信息，如纬度、经度、城市名称等。但所有这些信息都由类对象存储。

```
("<GetCityList: 0x1fd334d0>",
"<GetCityList: 0x1fd33560>",
"<GetCityList: 0x1fd33310>",) 
```

我的数组看起来像这样。如果我想要城市名称，那么首先我创建 GetCityList 对象，然后创建 object.cityName。现在我必须通过比较 cityName 来搜索 lat 和 lon。所以我该怎么做，因为它消耗太多时间？我可以使用谓词吗？如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T10:22:51.467

假设您有一个 cityList 数组，并且想要按城市名称过滤它，您可以这样做

```
NSPredicate *cityNamePredicate = [NSPredicate predicateWithFormat:@"cityName contains[c] %@", @"cityName"]
NSArray *filteredCityList = [cityList filteredArrayUsingPredicate:cityNamePredicate]; 
```

无论您传入什么参数，filteredCityList 上方都将是您所需的过滤数组。这里 [cd] 表示大小写不敏感

您可以参考[本教程](http://blog.mugunthkumar.com/coding/iphone-tutorial-uisearchdisplaycontroller-with-nspredicate/)进一步探索 NSPredicate。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:22:39.493

例子：

```
self.data = [NSArray arrayWithObjects:
                         [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:@"To Airport",@"TO/AIR", nil] forKeys:[NSArray arrayWithObjects:kName,kCode, nil]],
                         [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:@"Point-to-Point",@"PTP", nil] forKeys:[NSArray arrayWithObjects:kName,kCode, nil]],[NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:@"From Airport",@"FR/AIR", nil] forKeys:[NSArray arrayWithObjects:kName,kCode, nil]], nil];

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(name CONTAINS[cd]  %@)",searchText];
self.searchableData = [self.data filteredArrayUsingPredicate:predicate]; 
```

基于此，您可以将 name 替换为 cityName。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T10:39:48.307

也以这种方式使用它：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"cityName contains %@", @"cityNamehere"]

NSMutableArray *filtered = [cityListArray filterUsingPredicate:predicate]; 
```

# android - 相对布局中的边距

> ID：13009233
> 
> 赞同：3
> 
> 时间：2012-10-22T10:14:11.907
> 
> 标签：android, margin, android-relativelayout

如何使用代码（不是 XML）在相对布局中设置边距？

我使用这段代码，但什么也没发生：

```
RelativeLayout rlDetail = new RelativeLayout(context);
rlDetail.setBackgroundResource(R.drawable.bg_round);
RelativeLayout.LayoutParams rlDetailParams = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
rlDetailParams.setMargins(35, 10, 35, 0);
rlDetail.setLayoutParams(rlDetailParams); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:30:34.377

试试这个答案[在Android中设置视图的绝对位置](https://stackoverflow.com/a/3295056/886001)

如上面链接中所述，您应该使用

```
TextView tv1 = new TextView(context);

RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(30, 40);
params.leftMargin = needed_margin;
params.topMargin = needed_margin;

// add your textview like this
rl.addView(tv1, params); 
```

# android - Android 启动过程和主要活动 - 设计模式

> ID：13009235
> 
> 赞同：0
> 
> 时间：2012-10-22T10:14:15.653
> 
> 标签：android, android-activity, android-lifecycle

我有以下问题，我想设计实现以确保不会遇到任何问题。

在应用程序启动时，我需要执行一个（并且只有一个）服务器请求以使手机保持最新状态。然后我进入主要活动。

我最大的问题是 Android 的后退按钮，它可能会将我的堆栈带回第一个活动，即进行服务器同步的活动。

我想到了以下实现：

1.  我立即启动了主要活动
2.  在`onCreate()`Main`Activity`中，我启动了同步过程...带有一些背景徽标、进度条等...
3.  同步完成后，我`finish()`在我的`Activity`.

然后我会返回`onCreate()`，还是直接返回`onResume()`main `Activity`？这个实现有意义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:38:35.750

您可以继续执行相同的操作，但对于执行同步操作的第一个活动，将其设为 noHistory 任务。[http://developer.android.com/guide/topics/manifest/activity-element.html#nohist](http://developer.android.com/guide/topics/manifest/activity-element.html#nohist)

或者在您的第一个活动中，在您调用后，`startActivity(MainActivity)`您可以调用 finish() 并通过这样做，您的 FirstActivity 将从后台堆栈中删除，然后 MainActivity 将保留在堆栈顶部。

希望有帮助。

更新

我的意思是，让`FirstActivity`成为你的第一个活动，你`MainActivity`从`FirstActivity`. 在你调用`startActivity()`你的之后`FirstActivity`，调用`finish()`下一个语句。这是完全可以接受的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:34:13.237

**更新**

为了防止您的第一个`Activity`被再次查看，您只需将以下行添加到您的`Activity`声明中

```
<activity 
        android:name=".FirstActivity"
        android:noHistory="true" /> 
```

使用`noHistory`标签将删除您的`Activity`，而无需您自己以编程方式进行

# android - 如何在android中创建安全登录页面？

> ID：13009236
> 
> 赞同：0
> 
> 时间：2012-10-22T10:14:19.510
> 
> 标签：android, android-emulator

我正在开发一个安卓应用程序。我已经创建了登录页面，但它不安全。我想让这个应用程序安全。

# 我的代码：

```
 Button login;
  EditText username, password;
  DBAdapter db = new DBAdapter(this);
  static String code,loginSession;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);
    username = (EditText) findViewById(R.id.usernametxt);
    password = (EditText) findViewById(R.id.passwordtxt);
    db.open();
    db.insertTest("password1");
    db.insertTest("password2");

    db.close();
    // login = (ImageView) findViewById(R.id.btnLogin);
    login = (Button) findViewById(R.id.login);
    login.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            String uname = username.getText().toString();
            String pass = password.getText().toString();

            // ---get a title---
            db.open();

            Cursor c = db.getAllTest();
            if (c.moveToFirst()) {
                do {

                    if (uname.equals(c.getString(1))) {
                        code=c.getString(1);

                    } else {
                    // Toast.makeText(getApplicationContext(),
                    // "Not Authenticated User..",
                    // Toast.LENGTH_SHORT).show();
                    }

                } while (c.moveToNext());

            }
            String pwd=code+"123";

             if (uname.equals("")) {
                Toast.makeText(getApplicationContext(),
                         "Please Enter User Name.",
                         Toast.LENGTH_SHORT).show();
            }
            else if(pass.equals(""))
            {
                Toast.makeText(getApplicationContext(),
                         "Please Enter password.",
                         Toast.LENGTH_SHORT).show();
            }

            else if(uname.equals(code) && pass.equals(pwd))
                {
                   Intent I=new Intent(loginPage.this, Test.class);
                   startActivity(I);

                }
            else if(uname!=(code)|| pass!=(pwd))
            {
                Toast.makeText(getApplicationContext(),
                         "Not Authenticated User..",
                         Toast.LENGTH_SHORT).show();
                Intent I = new Intent(loginPage.this,loginPage.class);
                startActivity(I);
            }
            db.close(); 
```

任何人都可以帮助我获得安全登录页面并让我知道需要遵循哪些安全登录凭据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:24:07.653

如果我理解正确，您想在用户键入密码时隐藏密码字符。在您的布局中放入`android:inputType="textPassword"`EditText 控件。

# jquery - 淡入 jquery 图像与我的固定标题重叠

> ID：13009239
> 
> 赞同：3
> 
> 时间：2012-10-22T10:14:26.750
> 
> 标签：jquery, css, fixed, sticky, overlapping

这是jquery

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#showhidetarget').hide();

        $('a#showhidetrigger').click(function () {
            $('#showhidetarget').toggle(150);
        });
    });
</script> 
```

这是我的粘性标题导航 CSS

```
#nav {
    background-color: #001f22;
    height: 30px;
    width: 100%;
    position: fixed;
    list-style-type: none;
    margin-top: 0px;
    margin-bottom: 0;
    float: left;
    margin-right: auto;
    margin-left: auto; 
```

导航HTML

```
 <div id="nav"><ul>
         <li><a href="#home">HOME</a></li>
         <li><a href="#about">ABOUT</a></li>
         <li><a href="#portfolio">PORTFOLIO</a></li>
         <li><a href="#contact">CONTACT</a></li>
  </ul>
  </div> 
```

淡入 CSS

```
.fade {
   opacity: 0.5;
   transition: opacity .50s ease-in;
   -moz-transition: opacity .50s ease-in;
   -webkit-transition: opacity .50s ease-in;
   }

   .fade:hover {
    opacity: 1;
      }

   .fade:visited {
    opacity: 1;

      } 
```

所以基本上，我的淡入/淡出 jquery 图像重叠/在前面，固定导航栏。我该如何解决这个问题，使其不重叠？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:21:18.513

给 NAV 条一个 z-index 并给 fad​​eIn 对象。

确保 NAV 栏具有更高的 z-index，例如。

```
.fade {
   opacity: 0.5;
   transition: opacity .50s ease-in;
   -moz-transition: opacity .50s ease-in;
   -webkit-transition: opacity .50s ease-in;
   z-index: 10;
   }

#nav {
    background-color: #001f22;
    height: 30px;
    width: 100%;
    position: fixed;
    list-style-type: none;
    margin-top: 0px;
    margin-bottom: 0;
    float: left;
    margin-right: auto;
    margin-left: auto;
    z-index: 20;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:19:06.090

您现在了解 css 属性“z-index”吗？z-index 控制元素将显示在顶部。z-index 较大的元素将与 z-index 较低的元素重叠。

因此，将标头的 z-index 设置为 999：

```
#nav {
    z-index: 999;
} 
```

以及图像的 z-index 到下面的内容。

希望有帮助。

# java - 什么是本机类型安全枚举模式？

> ID：13009243
> 
> 赞同：-1
> 
> 时间：2012-10-22T10:14:42.920
> 
> 标签：java

我是 java 新手，我想了解原生类型安全枚举模式？有谁能够帮助我？

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:15:36.017

使用`enum`s; [JLS 中的](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.9)详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:35:43.490

> 我想知道类型安全枚举模式和本机类型安全枚举模式之间的区别。

类型安全的枚举模式是一种设计/实现模式，它提供类似于原生枚举的东西。由于 Java 5.0 及更高版本支持本地`enum`类型（[教程链接](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)），因此无需知道如何执行此操作。只需使用本机`enum`类型。

*如果您对它过去是*如何完成的感到好奇，请阅读以下内容：[Java 1.4 中枚举的替代方案](https://stackoverflow.com/questions/1038321/alternative-to-enum-in-java-1-4)

（本*机*类型安全枚举模式在术语上是矛盾的。Java 的本机枚举构造是一流的编程语言构造......不是设计模式。）

# testng - 如何使用 ANT 运行 TestNG 多个 TestClass？

> ID：13009244
> 
> 赞同：0
> 
> 时间：2012-10-22T10:14:44.067
> 
> 标签：testng

我正在使用 TestNG 测试我的 Web 项目。在我的项目中，我有 3 个带有一组 @Test 方法的测试类，比如说

*   A类
*   B类
*   C类

我想按顺序执行所有这些测试类（它们是我的测试用例）。我应该如何编写我的 testng.xml 和 build.xml 来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:41:23.157

如果你想让这个 A、B、C 类按顺序运行..

我建议你创建一个 ClassD()，然后你在 ClassD() 中控制 ClassA.method()、ClassB.method()、ClassC.method() 的调用顺序。

@Test 应驻留在您的 ClassD 中

您的 Build.XML 应配置为

```
<suite name="xxx" parallel="none">
  <test name="xxx" preserve-order="true">
    <classes>
       <class name="package.ClassD"/>
    </classes>
  </test>   
</suite> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T19:00:57.793

> //TestNG 可以使用优先级作为处理方法的顺序。
> 
> 进口废话；导入 testng_Annotations；
> 
> @BeforeTest
> 
> 之前测试方法（）
> 
> @Test（优先级=1）
> 
> ClassA.method()
> 
> @Test（优先级=2）
> 
> ClassB.method()
> 
> @Test(优先级=3)
> 
> ClassC.method()
> 
> @AfterTest
> 
> 结束测试方法（）

确保您的 testng.xml 调用这个新的 java 文件。

# jqgrid - 添加对话框变量重置的 JqGrid BeforeShow 事件

> ID：13009247
> 
> 赞同：0
> 
> 时间：2012-10-22T10:15:03.060
> 
> 标签：jqgrid, dialog, add

在显示添加对话框之前，我调用了以下函数；单击 JqGrid 上的 [+] 后。

MVC 控制器网格配置

```
ordersGrid.ClientSideEvents.BeforeAddDialogShown = "initAddDialog"; 
```

该函数进行 Ajax 调用以创建一个新的订单记录，无论是否带有链接 ID，这取决于单击 [+] 按钮时是否选择了现有订单。

目的是提供进行另一个 Ajax 调用以从另一个服务检索附加链接信息所需的 id，并使用日期/时间信息和（如果适用）现有记录中的公共信息预先填充新记录。

```
function initAddDialog() {
var newOrderId = 0;
var newOrderLinkId = 0;
var selRow = jQuery('#clientOrderGrid').jqGrid('getGridParam', 'selrow');
var selRowData = jQuery('#clientOrderGrid').jqGrid('getRowData', selRow); 
```

从选定行获取链接 ID（如果有）

```
var curOrderLinkId = (selRowData.OrderLinkId == null) ? 0 : selRowData.OrderLinkId; 
```

Ajax 调用创建新的“持有”订单

```
$.ajax({
url: '/Order/ajaxNewOrder?OrderLinkId=' + curOrderLinkId,
success: function (newOrderResponse) {
arr = newOrderResponse.split("|");
newOrderId = arr[0];
newOrderLinkId = arr[1];
},
error: function () { alert("There was an error creating an Order record"); }
}); 
```

如果我在 Firefox 中使用 Firebug 中断代码，我可以看到变量 newOrderId 和 newOrderLinkId 已使用新创建记录中的 id 正确设置，如果我按 F8，（已显示）对话框将填充这些 //价值观。

如果我不破坏代码，则会显示对话框，但会显示初始化变量的值，即 newOrderId = 0，newOrderLinkId = 0。

```
$('#' + 'OrderId').val(newOrderId);
$('#' + 'OrderLinkId').val(newOrderLinkId);
$('#' + 'Stock').val(stock);
$('#' + 'SettlesTs').val(settlesTs);
$('#' + 'ReceivedTs').val(dtThis);
$('#' + 'ReceivedHHmm').val(dtTime); 
```

在显示添加对话框后，我尝试调用相同的函数，但得到相同的结果。

关于为什么会这样的任何想法，或者有没有更好的方法来实现相同的结果？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T10:10:22.470

我已将本机添加/编辑对话框排除在外，并使用我自己的“添加”表单以及 JqGrid 的本机内联编辑。我敢肯定，通过更多的研究，有可能找到解决方案，但随着最后期限的临近，我不得不找到一种解决方法。

# keyboard - 键盘问题 VMWare Workstation

> ID：13009249
> 
> 赞同：1
> 
> 时间：2012-10-22T10:15:09.980
> 
> 标签：keyboard, centos, vmware, vmware-workstation, vmware-tools

我有 VMWare-Workstation 8.0.0 build-471780。
我的主机操作系统是 Windows 7 Ultimate，SP1。我的客户操作系统是 CentOS 6.0。
我有以下键盘问题：
1\. 当我在客户操作系统上按下一个键（例如 Enter）时，它会重复 2-10 次。它发生在所有的键上。当我快速按下一个键时 - 不会发生多次输入。
2\. 在随机时间，客户操作系统停止接收来自键盘的事件。我正在打字，下一刻键盘就停止工作了。鼠标很好，我能做的就是重启客户操作系统。它一直在发生，键盘在随机时刻停止工作。

我试图找到第一个问题的解决方案。我已经安装了键盘驱动程序 - 没有帮助。我还安装了 VMWare Tools 8.8.0，内部版本 471268 - 没有帮助。我还阅读了 WMVare 社区的一篇文章，该文章建议检查来宾操作系统时间是否领先于主机操作系统 - 但事实并非如此。
我该如何解决这些解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:14:04.357

这是问题 1 的解决方案：http: [//kb.vmware.com/selfservice/microsites/search.do ?language=en_US&cmd=displayKC&externalId=196](http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&cmd=displayKC&externalId=196)

# asp.net - 我应该使用 WCF 还是 ASP.NET 来编写 web 服务？

> ID：13009250
> 
> 赞同：1
> 
> 时间：2012-10-22T10:15:13.187
> 
> 标签：asp.net, .net, wcf, web-services

我想在 .NET 上编写网络服务（我的客户端可以是 Android、iOS、Mac OS、网站...）。我的问题是我应该使用 WCF 还是 ASP.NET 来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T10:34:35.920

当您提到 ASP.net 时，我假设您是指 ASP.net Web APIs。还有 ASP.net 肥皂服务，但这些服务不适合在 android 或 iOS 等平台上使用。

如果您不确定不同的 Web 服务是什么，您很可能希望使用 ASP.net Web API，因为它们易于设置并提供多种内容类型、XML、JSON，可能还有更多...

WCF 更多地是为 Web 服务而构建的，但是它有一个陡峭的学习曲线，这就是为什么我说如果你不确定你想要什么，你很可能没有做出需要 WCF 的东西。

有关更多信息，我建议阅读：http: [//idesign.net/articles/asp_net_web_api_vs_wcf.htm](http://idesign.net/articles/asp_net_web_api_vs_wcf.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:36:57.950

我假设您要求 WCF 或网络服务。我认为 WCF 是更好的选择。供您参考：

[http://www.thedevheaven.com/2012/10/difference-between-wcf-and-web-service.html](http://www.thedevheaven.com/2012/10/difference-between-wcf-and-web-service.html)

# objective-c - 正则表达式中的 \b 与 \\b

> ID：13009253
> 
> 赞同：2
> 
> 时间：2012-10-22T10:15:23.747
> 
> 标签：objective-c, regex, word-boundary

正如我在正则表达式文档中看到的那样 \b 匹配单词边界。准备带子

> “db bd 如何”

和正则表达式

> \b(a|b)(c|d)\b

我认为在运行正则表达式时，它应该匹配字符串中的“bd”，但事实并非如此。

但如果正则表达式是

> \\b(a|b)(c|d)\\b

它匹配。

你能解释一下区别吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T10:22:58.693

这里有几层逃逸在起作用

```
正则表达式 -----------------> | 正则表达式文字 -> | 字符串字面量
----------------------+------------------+------ ----------
词界 | \b | \\b
交替（“a”或“b”）| (a|b) | (a|b)
交替（“c”或“d”）| (c|d) | (c|d)
词界 | \b | \\b

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:16:45.453

如果这是在 C 或 C++ 程序中，编译器本身可能会解释 '\b' 并在编译期间替换它，因此您需要先将其从编译器中转义。

所以如果你有

```
char *regex = "\\bword"; 
```

在您的源文件中，并将其传递给正则表达式函数，它将收到'\ bword'。

* * *

**编辑**

我不知道它是否适用于 Objective-C，我没有使用它的经验。

# java - MVC的实现

> ID：13009255
> 
> 赞同：2
> 
> 时间：2012-10-22T10:15:34.113
> 
> 标签：java, design-patterns

我在理解和实现 MVC 模式时遇到了一些麻烦。

我有一个单例“模型”类，它包含应用程序的所有数据并扩展了 Observable。当这些数据被修改时，我想更新视图，当其中一个视图收到用户的一些输入时，我想更新模型。中间是一个控制器（实现观察者），它具有视图和模型的实例。

我认为要做到这一点，视图必须有一个控制器实例。每当它从按钮或任何组件接收到事件时，它都会调用正确的控制器方法，将信息传输到模型。模型被更新并通知观察者，观察者将更新**所有视图的每个组件**，即使它们没有链接到已修改的特定数据，因为控制器无法知道模型中已修改的内容。我不确定这是一个好的设计。

我看了一下 PropertyChangeListener 类，它似乎纠正了这个问题，但我不太确定我是否理解所有内容。有没有首选的方法来做到这一点？

提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:35:38.143

您的建议存在一些问题。

首先，您描述的是[MVVM](http://en.wikipedia.org/wiki/Model_View_ViewModel)，而不是[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)。

第二个问题是这些术语`model`并不`controller`用来描述单例。它们只是通过将逻辑组织成具有明确职责的类来帮助您分离关注点的术语。

MVC结构如下：

## 该模型

这是您的应用程序逻辑/业务规则。这基本上意味着，如果您的应用程序是关于电话簿的，那么与提供电话簿 API 有关的所有逻辑和数据结构都在这里实现。

## 风景

该层与模型完全分离，因为它不关心数据结构或逻辑，而只关心呈现简单的值。字符串、整数、集合，应有尽有。但它不关心模型的 API，它只依赖于控制器的。

## 控制器

这是事情走到一起的地方。控制器是中介。它使用模型的语言和视图的语言，它可以让它们一起工作。用户请求被路由到控制器。例如，一个请求可能想要列出电话簿中的所有号码。会发生什么：

1.  控制器接收请求
2.  通过模型的 API 向模型询问电话簿中存在的所有号码
3.  [可选] 将数据转换为视图要显示的数据结构
4.  将数据传递给视图

### 结束前的最后一句话：

如果控制器没有将模型中的数据转换为简单的东西，那么据称视图现在与模型紧密耦合。但是，情况并非总是如此。即使模型的 API 发生变化，控制器可能仍然能够将新 API 适配到视图已经理解的旧 API。

# algorithm - 算法复杂度性能和空间

> ID：13009258
> 
> 赞同：0
> 
> 时间：2012-10-22T10:15:47.260
> 
> 标签：algorithm, data-structures, complexity-theory

我正在课堂上研究算法复杂性，我需要知道是否还有其他算法复杂性，我所知道和研究的是 2 种类型 1-是 BIG O 复杂性，即时间和性能以及其他 2 - 空间复杂度是内存复杂度吗，算法还有其他类型的复杂度吗？算法是用我想念的其他东西来衡量的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T10:27:01.383

就算法的渐近复杂度而言 - 是的，算法（和问题）是根据空间和时间来衡量的。

但是，我可以说的还有很多。我将尝试解决一些问题：

**空间/时间消耗源于一种分析**
方法 算法有 4 种常用的分析方法，用于空间和时间。请记住，big-O 是一组函数，但是如何导出函数呢？复杂度的函数是根据分析方法导出的，分析方法（通常）是以下之一：

*   最佳案例
*   平均情况
*   最坏的情况下
*   [摊销分析](http://en.wikipedia.org/wiki/Amortized_analysis)

这些方法中的每一种都可以用于任何算法 - 并且不能保证结果是相同的。例如，快速排序具有`O(n^2)`最坏情况时间复杂度和`O(nlogn)`平均情况时间复杂度。

**更多集：**
除了大 O 符号，我们还使用其他符号来表示复杂度。其他常见的符号是（根据使用的共同性）：

*   大西塔 (Θ)
*   大欧米茄 (Ω)
*   小o
*   小欧米茄 (ω)

不要与分析方法混淆：每个 Big Theta/Big O/ 符号...都可以与任何分析方法配对（最坏情况/平均情况/...）
有关 Big Theta、Big O 和他们之间的区别可以在[这个线程中找到](https://stackoverflow.com/q/10376740/572670)

**理论复杂性：**
在理论[“复杂性理论”](http://en.wikipedia.org/wiki/Computational_complexity_theory)领域——我们分析*问题*，而不是*算法*。在这个领域，我们关心一个问题是否可以多项式解决（也就是说，如果输入的大小为**n**，那么问题可以在**n**的某个幂中解决），验证多项式（给定一个可能的解决方案，检查它是否是正确的）。但是，还有其他类。
常见的复杂度类别有：

*   [NP](http://en.wikipedia.org/wiki/NP_%28complexity%29)
*   [磷](http://en.wikipedia.org/wiki/P_%28complexity%29)
*   [NP-硬](http://en.wikipedia.org/wiki/NP-hard)
*   [P空间](http://en.wikipedia.org/wiki/PSPACE)

此外 - 我们对问题是否可以解决/可决定感兴趣。*用于描述问题可解决性*的常见类别是：

*   [R](http://en.wikipedia.org/wiki/Recursive_language)
*   [回覆](http://en.wikipedia.org/wiki/RE_%28complexity%29)
*   核

**现实世界：**
在现实世界的应用程序中——我们不仅关心理论空间/时间复杂度，还关心常数（一种算法花费一半时间的算法要好得多，即使它们可以属于同一复杂度等级。这是因为复杂性类忽略了常量。）。
我们还考虑了程序/算法的实施时间和可维护性。

# android - 如何在android中测试处理SQLite数据库的方法？

> ID：13009259
> 
> 赞同：2
> 
> 时间：2012-10-22T10:16:07.380
> 
> 标签：android, junit, easymock, android-sqlite

我制作了一个应用程序，通过打开、从中检索数据和向其中插入数据来处理 SQLite 数据库。现在我想测试我的方法。

所以，我有两个类，一个“ `SQLiteHelper`”扩展`SQLiteOpenHelper`为打开、创建和升级数据库，另一个是一个`DataSource`类，它创建一个`SQLiteDatabase`对象，并包含我处理数据库的所有方法。

因此，为了调用任何方法，我需要调用`SQLiteHelper`类中的 open 方法，将结果捕获到一个`SQLiteDatabse`对象中，然后创建`DataSource`该类的一个对象，最后调用该方法（其中包含一个作为原始查询结果的游标） .

我知道它不适用于简单的 JUnit 测试，并且我已经阅读了 Mock Objects，但我仍然不明白如何在我的情况下使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T10:55:12.230

> 我知道它不适用于简单的 JUnit 测试

它会。只需像往常一样调用您的方法并检查结果是否正确。

唯一重要的是您应该更喜欢使用它[`IsolatedContext`](http://developer.android.com/reference/android/test/IsolatedContext.html)来创建数据库。在这种情况下，您来自应用程序的原始数据库文件将保持不变。所有测试都将使用单独的测试数据库文件，可以根据需要多次修改甚至删除。

您可以`IsolatedContext`从[`ProviderTestCase2`](http://developer.android.com/reference/android/test/ProviderTestCase2.html). （您还可以查看`ProviderTestCase2`资源以了解其工作原理。）

# c++ - C++ 中的类型转换和异常处理

> ID：13009260
> 
> 赞同：0
> 
> 时间：2012-10-22T10:16:09.713
> 
> 标签：c++

我有一个我开发的作品，在下面我遇到了类型转换和异常引发的问题：

```
#include <iostream>
#include <string>
#include <exception>
using namespace std;

class WithdrawlCheck
{
int Balance;
int amount;
string s;
public:
void  CheckBalance()
{
    cout<< "Sorry,You don't have Balance to Perform this transaction";
}
void WithdrawlCash(int Balance)
{
    if(Balance<500)
    {
    //cout<< "Sorry,You don't have Balance to Perform this transaction";
    CheckBalance();
    }
    else
    {
        cout<<"enter the amount to withdrawl only in digits"<<endl;
        try
        {
           cin>>amount;
        }
        catch(exception c)
        {
            cout<<"please enter proper values"<<endl;
            WithdrawlCash(Balance);
        }
        if(Balance>amount)
        {
        Balance=Balance-amount;
        cout<<"Your current Balance is:"<<Balance<<endl;
        }
        else{
        cout<<"Insufficient Balance";
        }
    }
    cout<<"do you want to Perform More Transaction,Say Y/N"<<endl;
    cin>>s;
    int num=s.compare("exit");
    int n1=s.compare("Y");
    int n2=s.compare("y");
    if(num==0||n1==0||n2==0)
    {
    WithdrawlCash(Balance);
    }
    else
    {
    cout<<"Bye";
    exit(0);
    }
}

};
int main()
{
  int Bal;
  cout<<"**********"<<"Welcome User"<<"*********"<<endl;
  cout<<"Enter the Balance"<<endl;
 cin>>Bal;
 WithdrawlCash c;
 c.WithdrawlCash(Bal);
 } 
```

所以，这里的问题是当用户输入一个字母值时，它应该被 catch 捕获并且应该显示消息，但是它会进入无限循环并执行 cout 语句而不会中断，所以任何人都可以给我建议如何捕获这个异常以及如何我们可以限制用户只能在 C++ 中输入数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:22:57.470

`cin >> s`通常不会导致异常。它只会设置 的`failbit()`并且`cin`任何后续操作都将失败，直到您清除故障位。正确的治疗应该是这样的

```
while (!(cin >> s)) {   // the '!' operation checks whether the 'cin' object has failed
    // handle failure and retry
    cin.clear();   // clear failbit
    cin.ignore(INT_MAX, '\n');   // ignore invalid input.
    cout<<"please enter proper values"<<endl;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:20:59.380

默认情况下，无效的 iostream 命令不会抛出，而是在流上留下失败状态。

但是，您可以让他们投掷。

[http://www.cplusplus.com/reference/iostream/ios/exceptions/](http://www.cplusplus.com/reference/iostream/ios/exceptions/)

我不确定，如果设置了这个标志，您是否仍然需要清除 iostream 缓冲区上的失败位状态。无论如何，这可能是值得的。(`cin.clear()`和`cin.ignore()`)

# c++ - 如何设置 CMAKE 静态链接（未定义对 `dlopen' 的引用）？

> ID：13009261
> 
> 赞同：0
> 
> 时间：2012-10-22T10:16:11.087
> 
> 标签：c++, linux, gcc, cmake, static-linking

我需要为我的项目设置静态链接。

当前状态是：

```
target_link_libraries(armd
  ${SQLITE3_LIBRARY}
  ${CMAKE_THREAD_LIBS_INIT}
  rt)

if(CMAKE_COMPILER_IS_GNUCXX)
    set(CMAKE_CXX_FLAGS "-O0 -Wall -fmessage-length=0") 
```

在设备上不起作用，我需要静态链接（为设备添加 -static）但是当我这样做时

```
set(CMAKE_CXX_FLAGS "-O0 -Wall -fmessage-length=0 -static") 
```

我越来越：

```
/arm-buildroot-linux-uclibcgnueabi/sysroot/usr/lib/libsqlite3.a(sqlite3.o): In function `unixDlOpen':
sqlite3.c:(.text+0x3e5d4): undefined reference to `dlopen' 
```

如何为 sqlite 设置静态链接而不会出现此错误？或者也许我的根系统丢失了一些东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:32:37.860

当静态链接一些档案时，您需要自己指定其依赖项（在本例中为 libdl）。请注意，在链接器命令行上指定归档文件的顺序比链接共享对象更重要。

# javascript - 使用 JQuery 的项目的 Javascript 混淆器/缩小器

> ID：13009262
> 
> 赞同：0
> 
> 时间：2012-10-22T10:16:12.250
> 
> 标签：javascript, jquery, obfuscation, minify

对于使用 JQuery 的项目，最好的 JS 压缩器/混淆器是什么？我目前正在使用闭包编译器，我也尝试过 YUI，但它们似乎从未缩小和优化我的函数名或变量名，实际上他们所做的只是删除空格和注释，而我正试图让我的代码尽可能小尽可能地隐藏。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:20:00.580

再看一下[闭包编译器](http://closure-compiler.appspot.com/home)。它有 3 个执行级别

1.  **仅限空格** 您使用了此设置。只是删除了多余的空格。
2.  **简单**除了删除空格之外，这还会重命名您的变量和函数名称以缩短整个脚本，但保持您的代码完整。
3.  **高级**这 通过可能的重构代码进一步改进了*简单设置。*因此，例如，某些函数可能会被内联等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:20:11.360

闭包是一个很好的缩小器。还有其他值得检查的缩小器，

打包机：[http ://dean.edwards.name/packer/](http://dean.edwards.name/packer/)

JSMin：[http ://crockford.com/javascript/jsmin](http://crockford.com/javascript/jsmin)

# javascript - 是否可以在 Chrome 调试器中只调试我自己的代码？

> ID：13009264
> 
> 赞同：1
> 
> 时间：2012-10-22T10:16:26.827
> 
> 标签：javascript, google-chrome-devtools

愚蠢的问题，但我只在网上寻找其他浏览器的答案。我正在调试代码，但它一直在 jquery 代码和其他第三方包含的断点处停止。

无论如何只能调试我自己的代码吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:54:27.100

jQuery 代码本身没有断点，但可能会发生异常，并且您的开发人员工具可以在异常处停止。为了避免“异常中断”，您可以将暂停设置为“不要停止异常”。

只需单击此图标并将其切换为灰色。

![在此处输入图像描述](../Images/91efbc466c96401d1577031ef989e509.png)

那时它不会因异常而停止。

[在此处](https://developers.google.com/chrome-developer-tools/docs/scripts-exceptions#pause_on_exceptions)了解更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-24T20:07:09.413

Internet Explorer 现在具有此功能。我认为 Chrome 还没有引入这个功能真是太遗憾了。这对我来说似乎很容易，没有脑子。如果我错误地在某处有一个空对象，我想立即查看它所在的代码行，但是 Chrome 会在库代码中每个捕获或未捕获的异常中停止，这真的很烦人。

[http://blogs.msdn.com/b/ie/archive/2014/04/14/what-s-new-in-f12-with-windows-8-1-update.aspx](http://blogs.msdn.com/b/ie/archive/2014/04/14/what-s-new-in-f12-with-windows-8-1-update.aspx)

它被称为“只是我的代码”，例如，您可以将 jquery 标记为库，而不是您希望在其中看到错误的东西。

> 如果您正在开发网站和应用程序，那么您可能会使用 jQuery 或 Angular 等 3rd 方库，并且通常这些库通常会被缩小。我们经常看到正在调试他们的代码的开发人员进入库代码，并被埋在该库的深处，然后才能回到他们的代码来调试他们的问题。
> 
> Visual Studio 支持名为“仅我的代码”(JMC) 托管语言的功能已经有一段时间了，并且在 Visual Studio 2012 中，它还支持 JavaScript。JMC 背后的想法是，我们将调试器保存在您的代码中，保存在您想要调试的代码中，而不是保存在您无法真正更改的代码中。
> 
> 现在在 F12 中使用此功能，您将在调试时看到两个关键内容
> 
> *   您永远不会“进入”标记为库代码的文件（库）。您可以通过调试器中的文件选择器标记库（见下文），即使您已单步执行该文件。标记后，任何步骤操作都会将您带到您的代码。
>     
>     
> *   如果您启用“所有异常中断”，您将永远不会因库代码中抛出和处理的异常而中断。

![在此处输入图像描述](../Images/7d3cbac63d5c6cec0bdd9d49f64e4d0f.png)

# scala - 加载扩展 App 的对象时，scala 会发生什么？

> ID：13009265
> 
> 赞同：5
> 
> 时间：2012-10-22T10:16:32.327
> 
> 标签：scala, lazy-evaluation

我在扩展的对象中遇到了一些奇怪的行为`App`。查看以下 REPL 命令：

```
scala> object A extends App {val x = "I am null"}
defined module A

scala> object B {val x = "I am a string"}
defined module B

scala> A.x
res0: java.lang.String = null

scala> B.x
res1: java.lang.String = I am a string 
```

嗯，这有点奇怪……但它变得更奇怪了。然后我认为 vals 在进行`object`一些懒惰的评估......所以我尝试了一个真实的`lazy val`：

```
scala> object C extends App {lazy val x = "What am I?"}
defined module C

scala> C.x
res2: java.lang.String = What am I? 
```

那么这里发生了什么？为什么常规 val 得到一个空值？
为什么我使用时这种行为会发生变化`lazy val`？
该特征有什么特别之处`App`，使常规 vals 不被评估？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T10:27:01.273

App 扩展[了 DelayedInit](http://www.scala-lang.org/api/current/scala/DelayedInit.html)特征。因此，*所有语句和所有值定义*都移至`delayedInit`方法。Lazy val 之所以有效，是因为它编译为方法。

例如，如果你反编译这个类：

```
class TestApp extends App{
  val test = "I am null"
  lazy val testLazy ="I am a string"
} 
```

您将使用“惰性方法”上课：

```
public String testLazy()
{
    if((bitmap$0 & 1) == 0)
        synchronized(this)
        {
            if((bitmap$0 & 1) == 0)
            {
                testLazy = "I am a string";
                bitmap$0 = bitmap$0 | 1;
            }
            BoxedUnit _tmp = BoxedUnit.UNIT;
        }
    return testLazy;
} 
```

和内部类中的delayedInit方法`delayedInit.body`：

```
 public final class delayedInit.body extends AbstractFunction0
        implements ScalaObject
    {

        public final Object apply()
        {
            $outer.test_$eq("I am null");
            return BoxedUnit.UNIT;
        }

        private final TestApp $outer;
.... 
```

`test`因此，只有在调用延迟初始化时，才会将值“我为空”分配给字段。

# c# - 如果选中，编辑列表框中的属性值？

> ID：13009268
> 
> 赞同：0
> 
> 时间：2012-10-22T10:16:44.177
> 
> 标签：c#, list, listbox, edit

我想允许用户通过双击并像在列表框中的重命名模式一样输入或通过消息框来编辑列表框字符串的一部分，这确实如此。该值是双精度值，我希望结果同时反映在 listBox 和实际列表中。

这是我的清单，我需要编辑成本：

```
 public BindingList<Edge> edgeList = new BindingList<Edge>(); 
```

这是我的 ToString 函数：

```
 public override string ToString()
        {
            return string.Format("Cost: {0}, Start: {1}, End: {2}", (int)_cost, _start, _end);
        } 
```

这将添加到我的列表中：

```
pfi.ni.edgeList.Add(e1); 
```

这就是我在列表框中出现新属性时添加新属性的方式：

```
listBox2.Items.Add(e1); 
```

我已经为我的 listBox 设置了 selectedIndexChanged 事件并且可以获取它，因此如果单击它会显示属性的成本，我猜它现在只是在编辑它。

```
 private void listBox2_SelectedIndexChanged(object sender, EventArgs e)
    {
        Edge selectedItem = listBox1.SelectedItem as Edge;

        result = MessageBox.Show(string.Format("Cost: {0}", e1._cost));
        //selectedItem._cost doesn't work for some reason, so I use e1._cost 
        //until I can figure it out
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:02:08.287

```
Edge selectedItem = listBox1.SelectedItem as Edge;
selectedItem._cost = inputTextBox.Text;
listBox1.Refresh(); 
```

# java - 使用 GSon 形成 JSON 字符串

> ID：13009274
> 
> 赞同：2
> 
> 时间：2012-10-22T10:17:08.233
> 
> 标签：java, android, gson

```
import java.util.HashMap;

public class JSON {

    public String name;

    public HashMap<String, String> Credentials = new HashMap<String, String>();

    public JSON(String name){
        Credentials.put(name, name);
    }

}

JSON json = new JSON("Key1");
new Gson().toJson(json); 
```

我得到以下值作为输出。

> {“凭据”：{“Key1”：“Key1”}}

现在我将如何使用 Gson 创建一个类似下面这样的 JSONObject。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:23:46.177

您创建一个与您的 JSON 数据结构匹配的 POJO：

```
public class MyObject {

    public HashMap<String,HashMap<String,String>> Credentials;
    public HashMap<String, String> Header;

} 
```

**编辑以下评论：**

这有点像“数据结构 101”，但是......你有一个 JSON 对象，它归结为一个包含两个哈希表的哈希表，其中第一个包含两个哈希表。

您可以像上面显示的那样简单地表示这一点，或者您可以创建所有 POJO 并使用它们：

```
public class Credentials {
    private PrimeSuiteCredential primeSuiteCredential;
    private VendorCredential vendorCredential;

   // getters and setters

}

public class PrimeSuiteCedential {
    private String primeSuiteSiteId;
    private String primeSuiteUserName;
    ...

    // Getters and setters
}

public class VendorCredential {
    private String vendorLogin;
    ...

    // getters and setters
}

public class Header {
    private String destinationSiteId;
    ...

    // getters and setters

}

public class MyObject {
    public Credentials credentials;
    public Header header;

    // getters and setters
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T11:58:40.370

基于@Brian 所做的事情，您只需要自动序列化部分。

您所做的是以下内容，我必须声明，目前这是针对单个对象的。如果您要处理顶层的对象集合，则必须查看 GSON 文档以获取更多详细信息。

```
Gson gson= new Gson();
Writer output= ... /// wherever you're putting information out to
JsonWriter jsonWriter= new JsonWriter(output);
// jsonWriter.setIndent("\t"); // uncomment this if you want pretty output
// jsonWriter.setSerializeNulls(false); // uncomment this if you want null properties to be emitted
gson.toJson(myObjectInstance, MyObject.class, jsonWriter);
jsonWriter.flush();
jsonWriter.close(); 
```

希望这将为您提供足够的背景信息。Gson 应该足够聪明，能够找出您的属性并在输出中给它们起合理的名称。

# wpf - 调用与指定绑定约束匹配的构造函数引发异常

> ID：13009276
> 
> 赞同：1
> 
> 时间：2012-10-22T10:17:20.080
> 
> 标签：wpf, c#-4.0

当我尝试在我的 WPF 应用程序中创建一个新目录时，我收到以下错误。

> " '对与指定绑定约束匹配的'NetworkApplication.Login' 类型的构造函数的调用引发了异常。' 行号'3'和行位置'9'。”

这是我的代码行

```
DirectoryInfo di = Directory.CreateDirectory(@"C:\\Windows\\Newfolder1"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T19:17:54.113

除了安全问题之外，您还试图转义前面有 @ 的字符串。删除 @ 或取消转义斜杠。

# ruby-on-rails-3 - Rails 3 控制台和 db:console 不同

> ID：13009277
> 
> 赞同：0
> 
> 时间：2012-10-22T10:17:23.480
> 
> 标签：ruby-on-rails-3, sqlite, activerecord

我有一个 rails 应用程序，当我同时打开控制台和 db:console 时，它​​们对于应该是相同的字段具有不同的值。我正在使用发送函数来更改值。这是模型中的方法：

```
 def toggle_approve(field)
    self.send(field)
    if(self.send(field).blank?)
        self.send(field + '=', "new_value")
        puts self.send(field)
    else
        self.send(req + '=', "")
    end
    rank.save
  end 
```

在我的 db:console (sqllite) 中，一切总是正确的，但在我的常规 erb 控制台中是错误的。然后，我的视图将显示 erb 控制台中的内容，而不是 sqllite。我不明白背景中发生了什么会导致这个问题。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:24:56.207

从您提供的详细信息中很难确定，但我认为您的视图使用过时版本的数据。尝试`.reload`在更新之后和演示之前调用更新的记录。看看能不能解决你的问题。

# jsf - JSF 复合：带有 f:attribute 转换错误的属性

> ID：13009280
> 
> 赞同：4
> 
> 时间：2012-10-22T10:17:31.683
> 
> 标签：jsf, jsf-2, primefaces, el, composite-component

我正在实现一个 JSF 组件，需要有条件地添加一些属性。这个问题与之前的[JSF 类似： p:dataTable with f:attribute results in "argument type mismatch" error](https://stackoverflow.com/questions/13006322)，但错误信息完全不同，所以我提出了一个新问题。

```
<composite:interface>
    <composite:attribute name="filter" required="false" default="false"
                         type="java.lang.Boolean"/>
    <composite:attribute name="rows" required="false" default="15"
                         type="java.lang.Integer"/>
    ...
</composite:interface>

<composite:implementation>
  <p:dataTable ivar="p" value="#{cc.attrs.dm}">
    <c:if test="#{cc.attrs.filter}">
      <f:attribute name="paginator" value="#{true}"/>
      <f:attribute name="rows" value="#{cc.attrs.rows}"/>
    </c:if>
    ...
  <p:dataTable>
</composite:implementation> 
```

这会导致错误`java.lang.ClassCastException: java.lang.String cannot be cast to java.lang.Integer`。即使我手动设置它，我也会收到错误：

```
<f:attribute name="rows" value="15"/>    ... argument type mismatch
<f:attribute name="rows" value="#{15}"/> ... java.lang.Long cannot be cast
                                             to java.lang.Integer 
```

如果我直接添加属性，也不例外，并且显示正确的行数：

```
<p:dataTable var="p" value="#{cc.attrs.dm}" rows="#{cc.attrs.rows}"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T12:47:43.367

这确实是一个不幸的极端情况，EL 和复合组件属性中有数字。对此没有解决方案。`#{cc.attrs}`类型信息在使用时不可用`<f:attribute>`，因此被视为`String`. 也不能在`#{15}`EL 中表示为整数，所有数字总是被隐含地视为`Long`类型信息不存在时。`ClassCastException`可以通过使用标记文件而不是复合组件来防止这种情况。

您最好的选择是检查实际`rows`属性本身。

```
<p:dataTable ... rows="#{cc.attrs.filter ? cc.attrs.rows : null}"> 
```

# jquery - 循环通过一组按钮

> ID：13009284
> 
> 赞同：0
> 
> 时间：2012-10-22T10:17:39.443
> 
> 标签：jquery, html, loops

我编写了一个小脚本，循环遍历一组按钮，每个按钮都分配了一个功能。脚本如下：

```
$('#play').bind('click', function() {
    setTimeout( function(){ $('#b12').click(); }, 0 );
    setTimeout( function(){ $('#b13').click(); }, 2500 );
    setTimeout( function(){ $('#b14').click(); }, 5000 );
}); 
```

现在这工作正常，但我试图使它更自动化一点，而不是仅仅使用“setTimeout”调用每个函数。我有下面的代码，但我认为我做错了什么：

```
$('#play').click(function(){ 
    $('.buttons').each(function(){
        var time = 0;
        setTimeout( function(){ $(this).click(); }, time );
        time+= 2500;
    });
}); 
```

这是有问题的HTML：

```
<button id="b12" class="buttons" onclick="oct12()">12th</button>
<button id="b13" class="buttons" onclick="oct13()">13th</button>
<button id="b14" class="buttons" onclick="oct14()">14th</button>

<button id="play">play</button> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:28:57.920

您可以为此使用 .each 的索引，在您自己的代码中，您每次迭代都会重置时间

```
 $('#play').click(function(){
       $('.buttons').each(function(i){
        setTimeout( function(){ $(this).click(); }, i * 2500);                
       });

  }); 
```

[演示](http://jsfiddle.net/me2nR/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:22:23.490

将`time`变量放在 .each() 之外，如下面的代码：

```
$('#play').click(function(){ 
    var time = 0;
    $('.buttons').each(
        setTimeout( function(){ $(this).click(); }, time );
        time+= 2500;
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T11:49:52.740

您可以使用[插件 jquery-timing](http://creativecouple.github.com/jquery-timing/)之类的东西。这使得计时问题变得非常容易：

```
$('#play').bind('click').$('#b12,#b13,#b14').each($).click().wait(2500); 
```

而已。

此示例使用插件的[内联版本 bind()](http://creativecouple.github.com/jquery-timing/api/handler/.bind_timed.html)、[顺序循环版本 each()](http://creativecouple.github.com/jquery-timing/api/each/.each_sequential.html)和延迟方法[wait(timeout)](http://creativecouple.github.com/jquery-timing/api/wait/.wait_timeout.html)。

PS：我喜欢写 .on('click') 而不是 .bind('click') 因为它读起来像句子一样流利。

# javascript - 格式化 JSON 日期

> ID：13009298
> 
> 赞同：0
> 
> 时间：2012-10-22T10:18:25.870
> 
> 标签：javascript, date

我正在从以下内容转换 json 日期：

```
/Date(1224043200000)/ 
```

到

> 2012 年 10 月 22 日星期一 16:37:04 UTC+0800

使用

```
var date = new Date(parseInt(dateData.substr(6), 10)); 
```

有什么方法可以更改格式以仅显示月份、日期和年份（2012 年 10 月 22 日），而不是使用与我已经使用的代码相似的代码（如果不是相同的代码）包括时区和当前日期？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:20:42.547

签出具有强大格式化功能的[datejs 。](http://www.datejs.com/)使用[toString FormatSpecifiers](http://code.google.com/p/datejs/wiki/FormatSpecifiers)，您可以提供如下自定义模式：

```
new Date().toString("MMM dd yyyy"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:22:54.503

你可以试试这个：

```
var formattedDate = date.toString().split(" ").slice(1, 4).join(" "); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T10:25:52.720

您可能想使用[momentjs](http://momentjs.com/) 与这样的东西：

```
moment(1224043200000).format("MMM Do, YYYY"); 
```

# android - 在 listView 中显示隐藏按钮

> ID：13009299
> 
> 赞同：0
> 
> 时间：2012-10-22T10:18:26.063
> 
> 标签：android, listview, button, adapter

对不起我的英语我是法国人^^

所以，我有一个小问题要问你！

我想在 listView 中显示一个隐藏按钮，但是当代码显示所有按钮（不仅仅是一个）时。

看看我的代码：

```
public class ListViewShoplistAdapter extends BaseAdapter {

private ArrayList<Product> listCategory;
private Activity activity;
private ShopList shoplist;

public ListViewShoplistAdapter(Activity activity,ArrayList<Product> listCategory, ShopList shoplist) {
    super();
    this.activity = activity;
    this.listCategory = listCategory;
    this.shoplist = shoplist;
}

public int getCount() {
    return listCategory.size();
}

public Product getItem(int position) {
    return listCategory.get(position);
}

public long getItemId(int position) {
    return position;
}

private class ViewHolder {
    public TextView productName;
    public TextView productPrice;
    public TextView productBrand;
    public ImageView product;
    public Button changeQuantity; 
    public RelativeLayout background;
}

public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder view;
    LayoutInflater inflator = activity.getLayoutInflater();

    if(convertView == null) {
        view = new ViewHolder();
        convertView = inflator.inflate(R.layout.listviewshoplist, parent, false);

        view.productName = (TextView) convertView.findViewById(R.id.name);
        view.productPrice = (TextView) convertView.findViewById(R.id.price);
        view.productBrand = (TextView) convertView.findViewById(R.id.brand);
        view.changeQuantity = (Button) convertView.findViewById(R.id.changequantity);
        view.background = (RelativeLayout) convertView.findViewById(R.id.relativeLayout1);
        view.product = (ImageView) convertView.findViewById(R.id.imgproduct);
        convertView.setTag(view);
    }else {
        view = (ViewHolder) convertView.getTag();
    }

    String productName = listCategory.get(position).getName();
    view.productName.setText(productName);

    if (position==0){ // JUST for the first position, display the changeQuantity button ! => Button is displayed for all rows...
        view.changeQuantity.setVisibility(View.VISIBLE);
    }

    String price = String.valueOf(listCategory.get(position).getPrice())+"€";
    view.productPrice.setText(price);

    return convertView;

} 
```

}

感谢您的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:24:03.973

根据我的经验，你总是需要放在`else`后面`if`。

所以你需要类似的东西

```
if (position==0){ // JUST for the first position, display the changeQuantity button ! => Button is displayed for all rows...
        view.changeQuantity.setVisibility(View.VISIBLE);
    } else {
view.changeQuantity.setVisibility(View.INVISIBLE); // or View.GONE
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:24:54.907

您也应该将按钮设置`GONE`为

```
 if (position==0){ 
    view.changeQuantity.setVisibility(View.VISIBLE);
 } else 
    view.changeQuantity.setVisibility(View.GONE); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T10:24:21.770

在你的代码中试试这个..

```
if (position==0){ // JUST for the first position, display the changeQuantity button ! => Button is displayed for all rows...
    view.changeQuantity.setVisibility(View.VISIBLE);
}
else   // visibility gone
{
    view.changeQuantity.setVisibility(View.Gone);

} 
```

# c# - 如何从数组中选择一个随机元素

> ID：13009303
> 
> 赞同：-2
> 
> 时间：2012-10-22T10:18:47.810
> 
> 标签：c#, arrays, random

我正在尝试从字符串数组中选择一个随机元素并将其保存在我的数据库中。

```
OleDbConnection myConnection = new OleDbConnection(connectionString);
myConnection.Open();
string Update = string.Format("UPDATE Ships SET InPort=True");
OleDbCommand myCommandUpdt = new OleDbCommand(Update);
myCommandUpdt.Connection = myConnection;
myCommandUpdt.ExecuteNonQuery();
OleDbDataReader drdrShipsRead = myCommandUpdt.ExecuteReader();

string[] Randominporta = { "True", "False", "False" };
// Testlabel.Text = Convert.ToString(Randominport[randomNumber]);

int iNumber = 1;
while (drdrShipsRead.Read())
{
    int randomNumber = random.Next(0, 3);
    string myAddingQuery = string.Format(" UPDATE Ships SET InPort= " + Convert.ToString(Randominport[randomNumber]) + " WHERE ID= " + iNumber + "");
    OleDbCommand myCommand = new OleDbCommand(myAddingQuery);

   string myCommand.Connectionresult = myConnection;
    myCommand.ExecuteNonQuery();
    iNumber++;
} 
```

这没用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:50:36.273

简单的方法是：

```
var a = new List<string> { "True", "False", "False" };

int index = random.Next(strings.Count);
var name = a[index];
a.RemoveAt(index);
return name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:21:21.673

感谢@CodesInChaos，我认为问题中的代码通常是正确的，但您没有正确声明您的数组，

尝试，

```
var randomImport = new [] { "True", "False", "False" }; 
```

* * *

这样做会不那么脆弱

```
var randomImport = new [] { "True", "False", "False" };
var randomNumber = random.Next(0, randomImport.Length); 
```

或者，

```
var randomNumber = random.Next(
    randomImport.GetLowerBound(0),
    randomImport.GetUpperBound(0) + 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T10:24:54.130

随着 Jodrell 的回答，您应该修改下面的行以包含 SET InPort 值的引号。

```
 string myAddingQuery = string.Format(" UPDATE Ships SET InPort= '" + Convert.ToString(Randominport[randomNumber]) + "' WHERE ID= " + iNumber + ""); 
```

# php - 替换字符串的指定部分

> ID：13009307
> 
> 赞同：0
> 
> 时间：2012-10-22T10:19:03.450
> 
> 标签：php, string, str-replace

如何使用 str_replace 方法替换指定部分（两个子字符串之间）。例如，

```
string1="www.example.com?test=abc&var=55";
string2="www.example.com?test=xyz&var=55"; 
```

我想`'?------&'`用`?res=pqrs&`. 有没有其他可用的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:23:11.367

你可以[`preg_replace`](http://php.net/manual/en/function.preg-replace.php)这样做，但这真的是你在这里想要做的吗？

```
$str = preg_replace('/\?.*?&/', '?', $input); 
```

如果问题真的是“我想`test`从查询字符串中删除参数”，那么更强大的替代方法是使用一些字符串操作，或者[`parse_url`](http://php.net/manual/en/function.parse-url.php)改为：[`parse_str`](http://php.net/manual/en/function.parse-str.php)[`http_build_query`](http://php.net/manual/en/function.http-build-query.php)

```
list($path, $query) = explode('?', $input, 2);
parse_str($query, $parameters);
unset($parameters['test']);
$str = $path.'?'.http_build_query($parameters); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:26:13.723

由于您使用的是 URL，因此您可以先分解 URL，删除您需要的内容并将其重新组合在一起，如下所示：

```
$string1="www.example.com?test=abc&var=55";

// fetch the part after ?
$qs = parse_url($string1, PHP_URL_QUERY);

// turn it into an associative array    
parse_str($qs, $a);
unset($a['test']); // remove test=abc
$a['res'] = 'pqrs'; // add res=pqrs

// put it back together
echo substr($string1, 0, -strlen($qs)) . http_build_query($a); 
```

这里和那里可能有一些陷阱。您可能想要满足边缘情况等，但这适用于给定的输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T10:23:58.370

想想[正则表达式](http://php.net/manual/en/function.preg-replace.php)

```
<?php
$string = 'www.example.com?test=abc&var=55';
$pattern = '/(.*)\?.*&(.*)/i';
$replacement = '$1$2';
$replaced = preg_replace($pattern, $replacement, $string);
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T10:27:33.553

脏版：

```
$start = strpos($string1, '?');
$end = strpos($string1, '&');

echo substr($string1, 0, $start+1) . '--replace--' . substr($string1, $end); 
```

更好的：

```
preg_replace('/\?[^&]+&/', '?--replace--&', $string1); 
```

根据您是否要保留`?`and `&`，可以修改正则表达式，但在替换的字符串中重复它们会更快。

# wpf - 如何将wpf dll附加到不同的项目

> ID：13009309
> 
> 赞同：0
> 
> 时间：2012-10-22T10:19:03.477
> 
> 标签：wpf, xaml, dll, class-library

我创建了一个 wpf mvvm 项目，当主页是 app.xaml，它是空白的，它只运行实际的 mainwindow.xaml（通过使用 viewmodellocator）。这个项目运行良好，我已经将它作为 exe 运行多次。我创建了一个类库，并构建了它。

现在我有另一个项目，为此我引用了创建的 dll。我想只运行 wpf 页面。我一直在寻找正确的解决方案几天，并查看了 ResourceDirectory，以及论坛中介绍的内容，例如 -

```
 Assembly a = Assembly.Load(System.IO.File.ReadAllBytes("ExportCheck.dll"));           
        UserControl UserContrl = (UserControl)a.CreateInstance("ExportCheckInstance");
        UserContrl.Show(); 
```

我也尝试了其他东西，但是，我似乎不能只运行我的 wpf。我非常感谢你能提供的任何帮助，因为我现在很困。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:33:16.057

我猜您`ExportCheck.dll`在您推荐的项目中没有被推荐（Copy Local True）？

对，如果是这样，您将不得不从 Uri 路径加载 DLL。

```
 var asemblyPath = @"C:\MyDevCodeBase\AssetMVVMSample\Asset1MVVMPool\bin\Debug";
 var assemblyName = "Asset1MVVMPool"
 var myViewModel = "Asset1MVVMPool.List.ViewModels.Asset1ListViewModel, Asset1MVVMPool, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"

 var newAsmbly = Assembly.LoadFrom(assemblyPath + @"\" + assemblyName + ".dll");
 if (!string.IsNullOrEmpty(myViewModel))
        {
            var type = newAsmbly.GetTypes().FirstOrDefault(
                t => t.AssemblyQualifiedName == viewModelFullName);
            var currentViewModel 
                = Activator.CreateInstance(type) as IBaseViewModel;
            return currentViewModel;
        } 
```

**编辑**

对于使用 Copy Local True 的已引用程序集，请使用以下代码...

```
 var myasmbly = Assembly.GetExecutingAssembly().GetReferencedAssemblies().Where(
           asmbly => asmbly.Name  == "Export.dll").FirstOrDefault();
      if (!string.IsNullOrEmpty(myViewModel))
        {
            var type = myasmbly.GetTypes().FirstOrDefault(
                t => t.AssemblyQualifiedName == viewModelFullName);
            var currentViewModel 
                = Activator.CreateInstance(type) as IBaseViewModel;
            return currentViewModel;
        } 
```

# javascript - 动态生成名称时按名称读取的javascript数据属性

> ID：13009313
> 
> 赞同：0
> 
> 时间：2012-10-22T10:19:22.913
> 
> 标签：javascript

> **可能重复：**
> [如何使用变量作为名称将属性添加到 Javascript 对象？](https://stackoverflow.com/questions/695050/how-do-i-add-a-property-to-a-javascript-object-using-a-variable-as-the-name)
> [对象Javascript循环的动态属性名称](https://stackoverflow.com/questions/10566465/dynamic-property-names-for-loop-of-object-javascript)

在成功的 javascript 函数中，我收到了数据，它看起来像这样：

```
data.lvl1
data.lvl2
data.lvl3
... 
```

假设我只有 3 个数据元素，我想为每个元素循环并为每个级别提高警报：

```
for(a = 1; a<= 3; a++)
{
   alert(data.lvl + a);
   //I would like to read lvl1, lvl2, lvl3
} 
```

这种做法显然是错误的。请说明当 lvl 数量基于增加时如何在循环中达到 lvl1、lvl2 `a`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:20:32.450

如果要使用字符串访问属性名称，请使用方括号表示法。

```
foo.bar === foo['bar'] 
```

这样的：

```
alert(data['lvl' + a]); 
```

但最好重组你的数据，这样你就有了类似的东西：

```
data = { lvl: [1,2,3] } 
```

代替

```
data = { lvl1: 1, lvl2: 2, lvl3: 3 } 
```

# android - Android：将视图拖动到屏幕外

> ID：13009318
> 
> 赞同：4
> 
> 时间：2012-10-22T10:19:36.667
> 
> 标签：android, android-layout, android-relativelayout

我有一个活动，用户可以在其中拖放一些按钮。
我所有的可拖动视图都在 a 内`RelativeLayout`，为了拖动它们，我改变了它们的上边距和左边距。
一切都很完美，除了当我将视图拖动到靠近屏幕右侧和底部边缘时，它们会缩小而不是被绘制到屏幕外。有什么方法可以在屏幕的所有边缘上具有相同的行为（目前只能在顶部和左侧边缘正常工作）。

我想我可以有一个左侧和顶部的负边距。但是当我有`left margin > screen width`或`top margin > screen height`图像缩小时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-17T20:24:45.247

要在内部实现视图的自定义定位，`ViewGroup`最好的方法是实现您的自定义`ViewGroup`覆盖`onLayout()`。

这并不难，我[在这里](https://stackoverflow.com/a/31484079/913286)解释了如何做到这一点。（问题较新，可见度更高）

**编辑：您可能还想**[在此处查看](http://developer.android.com/guide/topics/ui/drag-drop.html)拖放 Api 。感谢 Zainodis 的评论。

# visual-studio-2010 - 无法识别 MSAA 控件

> ID：13009323
> 
> 赞同：2
> 
> 时间：2012-10-22T10:19:52.173
> 
> 标签：visual-studio-2010, coded-ui-tests

我最近开始使用编码的 UI 测试来自动化我的 Windows 应用程序，并且在访问一些 MSAA 控件时遇到了问题。我正在手动编码我的自动化，不想将控件添加到 UI Map 然后使用它。

我卡住的控件是左窗格上的一个treeItem，它选择机器，详细信息显示在中心的左侧客户区域。

我曾尝试使用 UI 控件上的十字准线所示的属性来搜索控件，但徒劳无功。

以下是我尝试过的代码 -

```
UITestControl machine = new UITestControl(App);
        machine.TechnologyName = "MSAA";
        machine.SearchProperties.Add(WinTreeItem.PropertyNames.ControlType,     "TreeItem");
        machine.SearchProperties.Add(WinTreeItem.PropertyNames.Name, "Machine1");
        machine.SearchProperties.Add(WinTreeItem.PropertyNames.ControlName, "m_tvPlantStructureView");
Mouse.Click(machine); // This code gives an error 
```

错误-

> Microsoft.VisualStudio.TestTools.UITest.Extension.UITestControlNotFoundException：播放未能找到具有给定搜索属性的控件。其他详细信息： TechnologyName：'MSAA' ControlType：'TreeItem' 名称：'Machine1' ControlName：'m_tvPlantStructureView' ---> System.Runtime.InteropServices.COMException：错误 HRESULT E_FAIL 已从对 COM 组件的调用中返回。

参考附件。让我知道，有什么问题以及要遵循什么过程才能完全摆脱这种未来无法识别的控制错误。

目前，我遵循的方法是做一个十字准线并获取属性，然后对该控件的属性进行编码以自动化用户操作和断言。但这种方式并不总是奏效。

让我知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-27T10:49:45.507

在单击鼠标之前，我使用

```
machine.Find(); 
```

之后，我检查机器是否具有与 null 不同的值，如果它不为 null，则执行单击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-26T15:13:37.990

您需要进行层次结构搜索。创建 2 个控件：首先将 Treeview 作为 Window。使用控件名称 m_tvPlantStructureView，然后创建一个名为 Machine1 的新 TreeItem。

```
var treeView = new WinWindow(App);
treeView.SearchProperties.Add(WinWindow.PropertyNames.ControlName, "m_tvPlantStructureView");

var machine= new WinTreeItem(treeView);
machine.SearchProperties.Add(WinTreeItem.PropertyNames.Name, "Machine1");

Mouse.Click(machine); // This code gives an error 
```

如果失败，另一件事是从树视图中删除 App 并添加窗口标题。

如果您有任何问题，请告诉我。

```
var treeView = new WinWindow();
treeView.WindowTitles.Add("mywindowname");
treeView.SearchProperties.Add(WinWindow.PropertyNames.ControlName, "m_tvPlantStructureView");

var machine= new WinTreeItem(treeView);
machine.SearchProperties.Add(WinTreeItem.PropertyNames.Name, "Machine1");

Mouse.Click(machine); // This code gives an error 
```

# webgl - 在 WebGL 中绘制许多形状

> ID：13009328
> 
> 赞同：5
> 
> 时间：2012-10-22T10:20:10.733
> 
> 标签：webgl

我正在从[这里](http://games.greggman.com/game/webgl-2d-translation/)阅读教程。

```
<script class = "WebGL">
var gl;
function initGL() {
  // Get A WebGL context
  var canvas = document.getElementById("canvas");
  gl = getWebGLContext(canvas);
  if (!gl) {
    return;
  }
}
var positionLocation;
var resolutionLocation;
var colorLocation;
var translationLocation;
var rotationLocation;
var translation = [50,50];
var rotation = [0, 1];
var angle = 0;
function initShaders() {
  // setup GLSL program
  vertexShader = createShaderFromScriptElement(gl, "2d-vertex-shader");
  fragmentShader = createShaderFromScriptElement(gl, "2d-fragment-shader");
  program = createProgram(gl, [vertexShader, fragmentShader]);
  gl.useProgram(program);

  // look up where the vertex data needs to go.
  positionLocation = gl.getAttribLocation(program, "a_position");

  // lookup uniforms
  resolutionLocation = gl.getUniformLocation(program, "u_resolution");
  colorLocation = gl.getUniformLocation(program, "u_color");
  translationLocation = gl.getUniformLocation(program, "u_translation");
    rotationLocation = gl.getUniformLocation(program, "u_rotation");

  // set the resolution
  gl.uniform2f(resolutionLocation, canvas.width, canvas.height);
}
function initBuffers() {
  // Create a buffer.
  var buffer = gl.createBuffer();
  gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
  gl.enableVertexAttribArray(positionLocation);
  gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);

  // Set Geometry.
  setGeometry(gl);
}

function setColor(red, green, blue) {
    gl.uniform4f(colorLocation, red, green, blue, 1);
}
// Draw the scene.
function drawScene() {
    // Clear the canvas.
    gl.clear(gl.COLOR_BUFFER_BIT);

    // Set the translation.
    gl.uniform2fv(translationLocation, translation);
    // Set the rotation.
    gl.uniform2fv(rotationLocation, rotation);

    // Draw the geometry.
    gl.drawArrays(gl.TRIANGLES, 0, 6);
}

// Fill the buffer with the values that define a letter 'F'.
function setGeometry(gl) {
/*Assume size1 is declared*/
    var vertices = [
         -size1/2, -size1/2,
         -size1/2, size1/2,
         size1/2, size1/2,
         size1/2, size1/2,
         size1/2, -size1/2,
         -size1/2, -size1/2 ];
      gl.bufferData(
         gl.ARRAY_BUFFER,
         new Float32Array(vertices),
         gl.STATIC_DRAW);
}
function animate() {
    translation[0] += 0.01;
    translation[1] += 0.01;
    angle += 0.01;
    rotation[0] = Math.cos(angle);
    rotation[1] = Math.sin(angle);
}
function tick() {
    requestAnimFrame(tick);
    drawScene();
    animate();
}
function start() {

    initGL();
    initShaders();
    initBuffers();
    setColor(0.2, 0.5, 0.5);
    tick();
}

</script>

<!-- vertex shader -->
<script id="2d-vertex-shader" type="x-shader/x-vertex">
    attribute vec2 a_position;

    uniform vec2 u_resolution;
    uniform vec2 u_translation;
    uniform vec2 u_rotation;
    void main() {
        vec2 rotatedPosition = vec2(
        a_position.x * u_rotation.y + a_position.y * u_rotation.x,
        a_position.y * u_rotation.y - a_position.x * u_rotation.x);

       // Add in the translation.
       vec2 position = rotatedPosition + u_translation;

       // convert the position from pixels to 0.0 to 1.0
       vec2 zeroToOne = position / u_resolution;

       // convert from 0->1 to 0->2
       vec2 zeroToTwo = zeroToOne * 2.0;

       // convert from 0->2 to -1->+1 (clipspace)
       vec2 clipSpace = zeroToTwo - 1.0;

       gl_Position = vec4(clipSpace, 0, 1);
    }
</script>
<!-- fragment shader -->
<script id="2d-fragment-shader" type="x-shader/x-fragment">
    precision mediump float;

    uniform vec4 u_color;

    void main() {
       gl_FragColor = u_color;
    }
</script> 
```

我的 1 个形状的 WebGL 程序的工作原理是这样的：

1.  从画布元素中获取上下文 (gl)。
2.  用我的对象的形状初始化缓冲区
3.  `drawScene()`: 调用`gl.drawArrays()`
4.  如果有动画，一个更新函数，它会更新我的形状的角度、位置，然后`drawScene()`都在 中`tick()`，以便它被重复调用。

现在，当我需要超过 1 个形状时，我是否应该一次用许多对象填充单个缓冲区，然后使用它稍后调用`drawScene()`一次绘制所有对象 **[OR]** 如果我重复调用`initBuffer`and `drawScene()`from `requestAnimFrame()`.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-12-31T02:23:47.710

在伪代码中

在初始化时

*   从画布元素中获取上下文 (gl)。
*   对于每个着色器
    *   创建着色器
    *   查找属性和统一位置
*   对于每个形状
    *   用形状初始化缓冲区
*   对于每个纹理
    *   创建纹理和/或用数据填充它们。

抽奖时

*   对于每个形状
    *   如果最后使用的着色器与此形状调用所需的着色器不同`gl.useProgram`
    *   对于着色器所需的每个属性
        *   调用`gl.enableVertexAttribArray`，`gl.bindBuffer`并`gl.vertexAttribPointer`为形状所需的每个属性以及当前着色器的属性位置。
    *   对于着色器所需的每个制服
        *   使用当前着色器的位置调用`gl.uniformXXX`所需的值
    *   调用`gl.drawArrays`或者如果数据被索引调用`gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, bufferOfIndicesForCurrentShape)`后跟`gl.drawElements`

常见优化

1) 通常你不需要设置每一个制服。例如，如果您使用**相同**的着色器绘制 10 个形状，并且该着色器采用 viewMatrix 或 cameraMatrix，则 viewMatrix uniform 或 cameraMatrix uniform 对于每个形状都可能相同，因此只需设置一次。

2）您通常可以将调用移至`gl.enableVertexAttribArray`初始化时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T20:04:39.557

在一个缓冲区中拥有多个网格（并按照您的建议使用单个渲染它们`gl.drawArrays()`）在复杂场景中产生更好的性能，但显然此时您无法更改每个网格的着色器制服（例如变换）。

如果您想让网格独立运行，则必须分别渲染每个网格。您仍然可以将所有网格保存在一个缓冲区中以避免`gl.bindBuffer()`调用产生的一些开销，但恕我直言，这不会有太大帮助，至少在简单的场景中没有。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T02:55:08.303

为场景中所需的每个对象分别创建缓冲区，否则它们将无法独立移动和使用着色器效果。

但那是在你的对象不同的情况下。从我在这里得到的信息来看，我认为您只想在不同的位置多次绘制**相同的形状，对吗？**

`translationLocation`这样做的方法是在第一次绘制形状后，使用不同的平移矩阵设置该制服。这样，当您再次绘制形状时，它将位于其他地方，而不是在另一个之上，因此您可以看到它。您可以不同地设置所有这些转换矩阵，然后`gl.drawElements`再次调用，因为您将绘制已在使用的相同缓冲区。

# java - 将整个 JSP 转换为 PDF

> ID：13009332
> 
> 赞同：1
> 
> 时间：2012-10-22T10:20:20.493
> 
> 标签：java, image, jsp, pdf, itext

> **可能重复：**
> [从 JSP 输出创建 PDF](https://stackoverflow.com/questions/3185151/create-a-pdf-from-a-jsp-output)

我想将我的整个 JSP 转换为 PDF 格式。我正在使用 itext jar 来执行此操作。我已经看过这方面的教程，但我没有找到任何合适的信息如何将整个页面转换为 PDF。我所看到的只是如何转换图像或文本，而不是整个输出页面

谁能建议我该怎么做？

# c# - 如何使用 SOAP 工具包从网络资源回复中获取缺失的字段？

> ID：13009333
> 
> 赞同：2
> 
> 时间：2012-10-22T10:20:19.937
> 
> 标签：c#, asp.net-mvc, payment-processing

我正在使用 Cyber​​source SOAP 工具包 API。我的交易请求收到“缺少必填字段”的响应。如何从 Cyber​​source 回复中获取缺失字段的名称？我知道有一个名为“missingFiled”的字符串数组。但是 missingFields[0] 给了我价值'c:item[0]'。

# mysql - 根据输入参数获取资产详细信息的存储过程

> ID：13009342
> 
> 赞同：0
> 
> 时间：2012-10-22T10:20:55.940
> 
> 标签：mysql

我正在编写一个存储过程来获取基于`CATEGORY ID`传递给它的详细信息，如果`CATEGORY ID`传递给它不为空，我正在获取基于`CATEGORY ID`，如果`CATEGORY ID`为空，我正在获取`CATEGORY ID`除之外的所有详细信息`3`，任何人都可以帮助我解决这个问题。

我的程序是这样的：

```
CREATE procedure [dbo].[SearchAssetdetails]
(
@assetCategory as int = null,
@assetType as int = null,
@assetDescription as nvarchar(200) = null,
@purchaseDate as datetime = null,
@validUpto as datetime = null)
as
begin
select ad.CategoryID,ad.AssetTypeId,ad.AssetDetailId,ad.AssetDescription,ad.Cost,ad.IsOwn,ad.LastModifiedby,ad.LastModifiedDatetime,ad.Location,ad.NoofLicences,ad.PurchaseDate,ad.SerialNumber,ad.ValidUpto,ad.VendorId,ad.Version,ad.WarrantyExpirationDate
 from AssetDetails ad where      
(ad.AssetDescription like (case when @assetDescription is not null then  '%'+@assetDescription+'%' else ad.AssetDescription end)        
and ad.CategoryID=(case when @assetCategory is not null then @assetCategory else ad.CategoryID   end)        
and ad.AssetTypeId=(case when @AssetType is not null then @AssetType else ad.AssetTypeId end)        
and ad.PurchaseDate=(case when @purchaseDate is not null then @purchaseDate else ad.PurchaseDate end)        
and ad.ValidUpto=(case when @validUpto is not null then @validUpto else ad.ValidUpto end)
 )  end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:09:06.357

由于`AND`where 子句中的条件，您对其他参数的输入可能与输入不匹配，`category id`但`null`替换为`3`.

首先，选择带有其他参数的记录，看看是否有任何一个获取类别 id 为 3 的记录。我建议您向我们展示类别 id 为 3 的记录，以便我们更好地了解数据。

否则我相信没有错误。

# image - 替换CKeditor中的图片插件

> ID：13009344
> 
> 赞同：1
> 
> 时间：2012-10-22T10:21:03.083
> 
> 标签：image, plugins, ckeditor

我想覆盖 CKeditor 中的图像插件。当我右键单击图像时，我想打开自己的对话框。谁能指出我正确的方向。我已经完成了一个从 CKeditor 站点复制的基本插件 - 如何交换它以替换图像编辑器。

```
CKEDITOR.plugins.add('myplugin',
{
    init: function (editor) {
        editor.addCommand('mydialog', new CKEDITOR.dialogCommand('mydialog'));

        if (editor.contextMenu) {
            editor.addMenuGroup('mygroup', 10);
            editor.addMenuItem('My Dialog',
            {
                label: 'Open dialog',
                command: 'mydialog',
                group: 'mygroup'
            });
            editor.contextMenu.addListener(function (element) {
                return { 'My Dialog': CKEDITOR.TRISTATE_OFF };
            });
        }

        CKEDITOR.dialog.add('mydialog', function (api) {
            // CKEDITOR.dialog.definition
            var dialogDefinition =
            {
                title: 'Sample dialog',
                minWidth: 390,
                minHeight: 130,
                contents: [
                    {
                        id: 'tab1',
                        label: 'Label',
                        title: 'Title',
                        expand: true,
                        padding: 0,
                        elements:
                        [
                            {
                                type: 'html',
                                html: '<p>This is some sample HTML content.</p>'
                            },
                            {
                                type: 'textarea',
                                id: 'textareaId',
                                rows: 4,
                                cols: 40
                            }
                        ]
                    }
                ],
                buttons: [CKEDITOR.dialog.okButton, CKEDITOR.dialog.cancelButton],
                onOk: function () {
                    // "this" is now a CKEDITOR.dialog object.
                    // Accessing dialog elements:
                    var textareaObj = this.getContentElement('tab1', 'textareaId');
                    alert("You have entered: " + textareaObj.getValue());
                }
            };

            return dialogDefinition;
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T09:40:55.147

嗨，我想这样做的原因是我们有我们的图像编辑器控件，出于“可用性”的原因，我们需要继续使用它。它被用于网站的不同部分，两个对话会使人们感到困惑。总之，我所做的是

1.  删除图片插件 CKEDITOR.config.removePlugins = 'image, forms, div,flash,iframe,table';
2.  添加额外的插件 extraPlugins: 'tinsertimage,teditimage,teditlink,tinsertlink,teditimagelink' 在创建 CKEditor

在插件中运行一些拦截右键单击图像的JS

```
CKEDITOR.plugins.add('teditimage',
{
init: function (editor) {
    editor.addCommand('tEditImage',
        {
            exec: function (editor) {
                                  //This opens the custom editor
                ZWSInlineEditor.openImageProperties(editor, false);
            }
        });

    if (editor.addMenuItem) {
        // A group menu is required
        // order, as second parameter, is not required
        editor.addMenuGroup('gImage');

        // Create a manu item
        editor.addMenuItem('gEditImageItem', {
            label: 'Edit Image Properties',
            command: 'tEditImage',
            group: 'gImage'
        });
    }

    if (editor.contextMenu) {
        editor.contextMenu.addListener(function (element, selection) {
            // Get elements parent, strong parent first
            var parents = element.getParents("img");
            // Check if it's strong
            if (parents[0].getName() != "img")
                return null; // No item

            return { gEditImageItem: CKEDITOR.TRISTATE_ON };
        });
    }
}
}); 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-10-22T21:20:35.867

我不明白你在做什么有什么意义（或者请解释一下）。也许您应该[自定义对话框](http://nightly.ckeditor.com/7655/_samples/api_dialog.html)而不是从头开始？

# php - 通用解析来自不同产品的 XML 文件

> ID：13009345
> 
> 赞同：0
> 
> 时间：2012-10-22T10:21:11.153
> 
> 标签：php, xml-parsing

我正在创建一个 Web 应用程序。此应用程序用于电子商务网站的订单履行。现在电子商务是 IBM Websphere。我首先从 Websphere 导入订单，方法是使用其公开的 Web 服务并对其进行解析并将其存储到 DB 中。现在他们要求对这个解析的东西进行概括，以便明天如果他们也使用其他一些电子商务产品，比如 prestashop ，它应该可以应付。我需要一些想法如何去做，以及我可以将所有东西保留为可配置选项，以便将来不会产生问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:06:07.543

调查`Design Patterns`：一种解决方案可能是使用[适配器模式](http://en.wikipedia.org/wiki/Adapter_pattern)：

您创建了一个全局的“通用”接口。然后，您为需要支持的每个电子商务创建一个适配器。例如，现在您将拥有一个适配器：

```
public class IBMImportAdapter : IECommerce
{
     private IBMECommerce _ibmInstance;

     public IBMImportAdapter(IBMECommerce instance) {
         _ibmInstance = instance;
     }

     public IEnumerable<Product> GetInput() {
         IEnumerable<IBMProduct> ibmProducts = _ibmInstance.TheirGetInput();
         List<Product> products = new List<Product>();
         foreach (IBMProduct p in ibmProducts) {
             products.Add(new Product(p.ID, p.Name);
         }
         return products;
     }
} 
```

然后，这些适配器将它们自己的接口映射到您的全局/通用接口。（在您的情况下，这可能几乎是 IBM 电子商务界面，但剥离了所有 IBM 依赖项）

另一种选择是将“导入算法”封装到[Strategy](http://en.wikipedia.org/wiki/Strategy_pattern)中。

# jfreechart - 如何更改 JFreeChart 的饼图颜色？

> ID：13009349
> 
> 赞同：7
> 
> 时间：2012-10-22T10:21:17.753
> 
> 标签：jfreechart

如何自定义 JFreeChart 图形的颜色。让我们看看我的java代码：

```
private StreamedContent chartImage ;

public void init(){
    JFreeChart jfreechart = ChartFactory.createPieChart("title", createDataset(), true, true, false);
    File chartFile = new File("dynamichart");
    ChartUtilities.saveChartAsPNG(chartFile, jfreechart, 375, 300);
    chartImage = new DefaultStreamedContent(new FileInputStream( chartFile), "image/png");
}

public PieDataset createDataset() {
    DefaultPieDataset dataset = new DefaultPieDataset();
          dataset.setValue("J-2", 10);
          dataset.setValue("J-1", 15);
          dataset.setValue("J", 50);
          dataset.setValue("J+1", 20);
          dataset.setValue("J+2", 15);
    return dataset;
} 
```

html页面：

```
<p:graphicImage id="MyImage" value="#{beanCreateImage.chartImage}" /> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-22T10:50:33.667

您可以像这样更改单件的颜色：

```
JFreeChart chart = ChartFactory.createPieChart("title", createDataset(), true, true, false);
PiePlot plot = (PiePlot) chart.getPlot();
plot.setSectionPaint("J+1", Color.black);
plot.setSectionPaint("J-1", new Color(120, 0, 120));
// or do this, if you are using an older version of JFreeChart:
//plot.setSectionPaint(1, Color.black);
//plot.setSectionPaint(3, new Color(120, 0, 120)); 
```

因此，使用您的代码，所有饼图都会自动着色，在我的代码更改后，`J-1`并且`J+1`具有固定颜色，其余部分会自动着色。

![比较](../Images/e33ee860d2e32cd67449920d36d3846c.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-22T11:22:16.337

要为图表设置颜色，您可以`DrawingSupplier`在我使用的这种情况下实现接口`DefaultDrawingSupplier`：

```
public class ChartDrawingSupplier extends DefaultDrawingSupplier  {

    public Paint[] paintSequence;
    public int paintIndex;
    public int fillPaintIndex;

    {
        paintSequence =  new Paint[] {
                new Color(227, 26, 28),
                new Color(000,102, 204),
                new Color(102,051,153),
                new Color(102,51,0),
                new Color(156,136,48),
                new Color(153,204,102),
                new Color(153,51,51),
                new Color(102,51,0),
                new Color(204,153,51),
                new Color(0,51,0),
        };
    }

    @Override
    public Paint getNextPaint() {
        Paint result
        = paintSequence[paintIndex % paintSequence.length];
        paintIndex++;
        return result;
    }

    @Override
    public Paint getNextFillPaint() {
        Paint result
        = paintSequence[fillPaintIndex % paintSequence.length];
        fillPaintIndex++;
        return result;
    }   
} 
```

然后将此代码包含在您的 `init()' 方法中

```
JFreeChart jfreechart = ChartFactory.createPieChart("title", createDataset(), true, true, false);
Plot plot = jfreechart.getPlot();
plot.setDrawingSupplier(new ChartDrawingSupplier());
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-22T15:20:17.187

您可以在从数据集中获取数据时根据标签自定义颜色：

```
// Add custom colors
        PiePlot plot = (PiePlot) chart.getPlot();

        for (int i = 0; i < dataset.getItemCount(); i++) {
            if(dataset.getKey(i).equals("J+1")){ 
                plot.setSectionPaint(i, Color.black);
            }
        } 
```

您还可以使用 switch-case 语句或您喜欢的语句。

# java - Dom 命名空间问题

> ID：13009350
> 
> 赞同：0
> 
> 时间：2012-10-22T10:21:20.317
> 
> 标签：java, html, xml, dom, html-parsing

我正在使用以下代码来更新根命名空间

```
rootTreeNode.setAttributeNS("http://www.w3.org/2000/xmlns/" ,"xmlns:m", "http://schemas.microsoft.com/ado/2007/08/dataservices/metadata");

dataServices.setAttribute("m:DataServiceVersion", "2.0"); 
```

我正在尝试使用 java 创建新的 XML 文件，并且在我尝试使用 dom 代码创建的 XML 中，它的外观如下：

```
xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata" 
```

当我在 Visual Studio 中打开文件时，我在

```
m:DataServiceVersion
edmx:DataServices m:DataServiceVersion="2.0" 
```

**错误是：**

> 未声明“http://schemas.microsoft.com/ado/2007/08/dataservices/metadata:DataServiceVersion”属性。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:25:41.900

看起来 Visual Studio 正在尝试针对不允许该`m:DataServiceVersion`特定元素上的属性的架构来验证 XML 文件。您无法在不更改架构的情况下*解决*此问题，但您可以通过告诉 VS 不要尝试验证来抑制它，但我不确定您将如何去做。

# asp.net-mvc - 我如何处理返回的 Json 来构造另一个 Ajax.actionlink

> ID：13009352
> 
> 赞同：0
> 
> 时间：2012-10-22T10:21:24.643
> 
> 标签：asp.net-mvc, asp.net-ajax

我有以下 Ajax.actionlink，它将执行操作方法并返回 JSON：-

```
@Ajax.ActionLink("Start Process", "StartProcess", "Home",
new { name = "BuisnessProcess" },
new AjaxOptions 
    {   HttpMethod = "POST",
        LoadingElementId = "tobehide2",
        UpdateTargetId = "startprocess",
        OnSuccess = "Animate" }) 
</div> <img id="tobehide2" src="~/Content/ajax-loading2.gif" /> 
```

目前，当用户单击链接时，它将在浏览器中显示 JSON 信息：-

```
{"activityId":"2119_666_BuisnessProcess_process1_setverialbe","processId":"666_BuisnessProcess_process1"} 
```

但我想做的是基于返回的 Json 构建另一个 Ajax.actionlink，并将其`activityId`作为新参数传递给 Ajax.actionlink。

此致

**：：：更新：：：**

```
[HttpPost]
public ActionResult StartProcess(string name)
{
    using (var client = new WebClient())
    {

        try
        {
            var query = HttpUtility.ParseQueryString(string.Empty);
            query["j_username"] = "kermit";
            query["hash"] = "9449B5ABCFA9AFDA36B801351ED3DF66";
            query["loginAs"] = User.Identity.Name;
            query["imagurl"] = "123";

            var url = new UriBuilder("http://localhost:8080/jw/web/json/workflow/process/start/" + name.ToString() + ":28:process1");

            url.Query = query.ToString();
            string json = client.DownloadString(url.ToString());

            Thread.Sleep(500);

            return Content("Process started succsfully. Returned values are :-" + json);
        }
        catch (System.Net.WebException ex)
        {

            return Content("", "application/json");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:34:59.620

当您在操作中返回数据时，要组合 html 字符串。

```
<a href="xxx">test</a> 
```

到 UpdataTargetId ：启动进程。

* * *

当您返回 json 以查看时，然后执行“动画”功能。因此，您可以在 Animate 中构建链接。

```
function Animate(result)
{
    $(result).each(function(index, item){
        // todo construct the link
    });
} 
```

# intellij-idea - IntelliJ 始终为 Java 1.7 构建

> ID：13009355
> 
> 赞同：1
> 
> 时间：2012-10-22T10:21:34.637
> 
> 标签：intellij-idea

我将 ANT 配置为使用 1.6 JDK，我的 ENV 变量 JRE_HOME 和 JDK home 都指向 JDK6。如果我在文件资源管理器中修改 JDK 6 文件夹名称，那么我的 ANT 构建失败，找不到 JDK，所以我确定它使用的是正确的 JDK。然而，生成的类总是针对 java 1.7 编译的。为什么我这个？（我生成的类只能在 1.7 jre 上运行，如果我在 1.6 JRE 上运行会出现版本错误）我所有的项目/模块设置都指向 1.6 jdk。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:12:36.203

看起来并非所有模块/项目设置都指向 JDK 1.7，或者您在|中使用**进程内**javac 选项。在 JDK 1.7 下运行 IDEA 时。`Settings``Compiler`

还要检查其他 javac 命令行选项，它不应该包含像`-source 1.7 -target 1.7`.

# c - 目录遍历 c

> ID：13009358
> 
> 赞同：3
> 
> 时间：2012-10-22T10:21:47.850
> 
> 标签：c, unix, directory-traversal

我正在尝试遍历目录并检查重复文件。

```
void findDuplicates(){
    char *dot[] = {".", 0};
    FTS *ftsp, *temp_ftsp;
    FTSENT *entry, *temp_entry;
    int fts_options = FTS_LOGICAL;
    ftsp = fts_open(dot, fts_options, NULL);
    while((entry = fts_read(ftsp)) != NULL){
        temp_ftsp = ftsp;
        while((temp_entry = fts_read(temp_ftsp)) != NULL){
            compareEntries(temp_ftsp, ftsp);
        }
    }
} 
```

但它并没有按照我想要的方式遍历目录。在第二个 while 循环之后，

```
entry = fts_read(ftsp) 
```

返回 NULL。是否有一个简单的解决方法或者我应该使用其他东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:25:20.447

你需要重新构建你的方法。内部`while`正在耗尽文件列表，因此外部成功后当然会失败一次。

更好的方法可能是存储文件，这样您就可以将每个新传入的文件与存储的文件进行比较，或者使用递归方法。两者都需要内存。

# c# - 返回列表作为数组的Web方法

> ID：13009359
> 
> 赞同：1
> 
> 时间：2012-10-22T10:21:50.063
> 
> 标签：c#, asp.net, web-services

我的 Web 方法将一些值作为列表返回，但是在调用这些 Web 方法时将其作为数组对象获取。我怎样才能将它与列表相同。我的 Web 方法类似于这样

```
 [WebMethod]
        public List<ReturnList> GetReturnList()
        {
           List<ReturnList> ReturnList=new List<ReturnList>();
        //Calcuations
            return ReturnList;
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T11:03:10.630

您的 Web 方法定义不缺任何东西。由于 SOAP 以及它的定义和结构方式，列表将被转换为数组。如果您在使用该方法时确实需要一个列表，请将数组转换回您正在使用它的列表。您还可以制作一个 Web 服务包装器，您可以在其中包装该 Web 方法并返回 List<> 而不是数组。方法体只会调用 Web 服务并将数组转换为 List<> 并返回它。

[在这里](http://social.msdn.microsoft.com/Forums/en-PH/asmxandxml/thread/e45222f3-d0a5-465b-8718-39fc3f9406e2)检查

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T11:47:50.597

List 更像是一种特定于语言的数据结构。所有语言特定的数据类型都将映射到语言中立的数据类型，即 XML 数据类型。

当请求/响应发生时，将发生 XML 映射，从而实现了平台和语言的互操作性。

```
The reason that the List kind of data types are not getting as the same data type,
  because there is no equivalent XML data type available. 
```

因此，您可以使用实用程序将列表转换为数组，反之亦然，以满足您的要求

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-20T12:36:08.750

```
 [WebMethod]
    public static Details[] GetData()
    {
        DataSet dsDetails = new DataSet();
        List<Details> details = new List<Details>();
        try
        {
            Database db = DatabaseFactory.CreateDatabase("String");
            DbCommand dbCommand = db.GetStoredProcCommand("GetDetails");

            dsDetails = (DataSet)db.ExecuteDataSet(dbCommand);
            foreach (DataRow dtrow in dsDetails.Tables[0].Rows)
            {
                Details report = new Details();
                report.ID = Convert.ToInt32(dtrow["ID"].ToString());
                report.ReferenceID = Convert.ToInt32(dtrow["ReferenceID"].ToString());
                report.ProductID = dtrow["Name"].ToString();

                details.Add(report);
            }
        }
        catch (Exception)
        {
        }
        finally
        {

        }

        return details.ToArray();
    }
```

# c# - 动态存储过程在 Web 服务中不起作用

> ID：13009362
> 
> 赞同：0
> 
> 时间：2012-10-22T10:21:53.267
> 
> 标签：c#, asp.net, sql-server, web-services, stored-procedures

我有一个动态选择存储过程。我在我的网络应用程序中完美地使用了它。但是我需要一个 Web 服务，当我对其进行编码和调试时，它给了我一个错误。

我正在发送完全相同的参数，但是当 Web 应用程序运行良好时，Web 服务给出了一个语法错误，例如`incorrect syntax near and.`.

为什么会这样？

```
try
{
    SqlParameter[] sp = new SqlParameter[8];
    sp[0] = new SqlParameter("@tarih", DateTime.Now);
    sp[1] = new SqlParameter("@aractipkamyon", true);
    sp[2] = new SqlParameter("@aractipkamyonet", true);
    sp[3] = new SqlParameter("@aractiptir", true);
    sp[4] = new SqlParameter("@nereden", 0);
    sp[5] = new SqlParameter("@nereye", 0);
    sp[6] = new SqlParameter("@yuktipadi", null);
    sp[7] = new SqlParameter("@odemetipadi", "Pesin-Teslimde");
    DataTable dtProc = dbHelper.runQueryWithParams("prIlanHizliArama2", sp);
    if (dtProc.Rows.Count > 0)
    { }
}
catch (Exception)
{
    throw;
} 
```

这是我的分贝课程。

```
public static DataTable runQueryWithParams(string storedProcedureName, params SqlParameter[] arrParam)
{
    DataTable dt = new DataTable();
    //SqlConnection conn = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["localhost"].ConnectionString);
    SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["ApplicationServices"].ConnectionString);
    SqlCommand cmd = new SqlCommand(storedProcedureName, conn);
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.Parameters.Clear();
    if (conn.State == ConnectionState.Closed || conn.State == ConnectionState.Broken)
        conn.Open();

    try
    {
        if (arrParam != null)
        {
            foreach (SqlParameter param in arrParam)
                cmd.Parameters.Add(param);
        }

        SqlDataAdapter da = new SqlDataAdapter(cmd);
        SqlDataReader dr = cmd.ExecuteReader();
        dt.Load(dr);
        return dt;
    }
    catch (Exception ex)
    {
        throw new Exception("Error: " + ex.Message);
    }
    finally
    {
        cmd.Dispose();
        conn.Close();
    }
} 
```

SQL：

```
ALTER proc [dbo].[prIlanHizliArama2]
@tarih nvarchar(MAX) = NULL,
@aractipkamyon bit= NULL,
@aractipkamyonet bit= NULL,
@aractiptir bit= NULL,
@nereden int = NULL,
@nereye int = NULL,
@yuktipadi nvarchar(10) = NULL,
@odemetipadi nvarchar(25) = NULL
as
begin
declare @sqlQuery as nvarchar(4000);

select @sqlQuery = 'select tbAracTip.tipadi as tip1, tip2.tipadi as tip2,
tbIlan.ilanId, tbYukTipi.tipadi as yuktipi, tbIlan.plaka, tbIlan.nereden, tbIlan.nereye,
tbIlan.fiyat, tbIlan.tarih, tbOdemeTipi.tipadi as odemetipi, tbIlce.lats, tbIlce.lngs
from tbIlan left join tbYukTipi on tbIlan.yuktipiId = tbYukTipi.yuktipiId
left join tbOdemeTipi on tbIlan.odemetipiId = tbOdemeTipi.odemeId
left join tbArac on tbArac.plaka = tbIlan.plaka
left join tbAracTip on tbArac.aractipId = tbAracTip.aractipId
left join tbAracTip as tip2 on tip2.aractipId = tbArac.usttipId
left join tbIlce on tbIlan.nereden = tbIlce.ilceId WHERE 1=1';

if (@nereden is not null and @nereden <> 0)
select @sqlQuery = @sqlQuery + ' and (tbIlan.nereden = ' + CONVERT(nvarchar(5),@nereden+') ');
if (@nereye is not null and @nereye <> 0)
select @sqlQuery = @sqlQuery + ' and (tbIlan.nereye = ' + convert(nvarchar(5), @nereye) + ') ';
if (@yuktipadi is not null)
select @sqlQuery = @sqlQuery + ' and (tbYuktipi.tipadi = ' + convert(nvarchar(500),@yuktipadi)+ ') ';
if (@odemetipadi is not null)
select @sqlQuery = @sqlQuery + ' and (tbOdemetipi.tipadi like ' +'''%'+ convert(nvarchar(500),@odemetipadi)+ '%''' + ')';
if (@tarih is not null)
select @sqlQuery = @sqlQuery + ' and (DATEDIFF(DD,tbIlan.tarih,convert(date, '''+@tarih+''' ,103)) = 0) ';
if (@aractipkamyon = 0 and @aractipkamyonet = 0 and @aractiptir = 1)
select @sqlQuery = @sqlQuery + ' and (tbArac.aracId in (select arac1Id from tbTir)) ';

if (@aractipkamyon = 0 and @aractipkamyonet = 1 and @aractiptir = 0)
select @sqlQuery = @sqlQuery + ' and (tip2.tipadi = ' + '''Kamyonet'') ';

if (@aractipkamyon =0 and @aractipkamyonet =1 and @aractiptir = 1)
select @sqlQuery = @sqlQuery + ' and ((tip2.tipadi = ' + '''Kamyonet'')' + ' or (tbArac.aracId in (select arac1Id from tbTir))) ';

if (@aractipkamyon =1 and @aractipkamyonet =0 and @aractiptir = 0)
select @sqlQuery = @sqlQuery + ' and (tip2.tipadi = ' + '''Kamyon'') ' ;

if (@aractipkamyon =1 and @aractipkamyonet = 0 and @aractiptir = 1)
select @sqlQuery = @sqlQuery + ' and ((tip2.tipadi = ' + '''Kamyon'')' + ' or (tbArac.aracId in (select arac1Id from tbTir))) ';

if (@aractipkamyon =1 and @aractipkamyonet =1 and @aractiptir = 0)
select @sqlQuery = @sqlQuery + ' and ((tip2.tipadi = ' + '''Kamyon'')' + ' or (tip2.tipadi = ' + '''Kamyonet'')) ' ;

if (@aractipkamyon =1 and @aractipkamyonet =1 and @aractiptir = 1)
select @sqlQuery = @sqlQuery + ' and ((tip2.tipadi = ' + '''Kamyon'')' + ' or (tip2.tipadi = ' + '''Kamyonet'')' + ' or (tbArac.aracId in (select arac1Id from tbTir))) ';

print (@sqlQuery)
exec (@sqlQuery)
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:54:28.363

找到了。如果我发送空字符串，它会给我一个错误，因为这一行：

```
if (@yuktipadi is not null)
select @sqlQuery = @sqlQuery + ' and (tbYuktipi.tipadi = ' + convert(nvarchar(500), @yuktipadi)+ ') '; 
```

我这样替换它：

```
if (@yuktipadi is not null)
    select @sqlQuery = @sqlQuery + ' and (tbYuktipi.tipadi = ''' + convert(nvarchar(500), @yuktipadi)+ ''') '; 
```

# php - 根据请求分页（根据用户要求对记录进行分页）

> ID：13009364
> 
> 赞同：0
> 
> 时间：2012-10-22T10:21:59.953
> 
> 标签：php, javascript, jquery, mysql

我正在基于一些过滤器显示记录数的网格。当用户单击网格底部的**显示更多**链接时，我想对它们进行分页。我尝试搜索，但是找到了页码东西或某种自动滚动。但是，我怎样才能在我的场景中工作？到目前为止，我的研究是，我必须在点击链接时编写一个函数，使用**ajax**获取**下一批**记录（例如每个请求 20 条）。但是编程部分将如何工作。我在服务器上使用**PHP**结束和**Mysql**作为我的数据库有人可以指导我吗。谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:25:46.250

您可以尝试`LIMIT`在 sql 查询中。

在 URL 中传递`LIMIT` `offset`and`limit`并相应地处理/显示数据并将当前`offset`和发送回`limit`网页（以便您可以为显示更多链接创建 url）

我认为这就是它在大多数地方和框架中的实现方式

桑迪普

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:27:41.220

在查询使用

```
 SELECT list_of_column FROM table 
 ORDER BY column_id DESC
 LIMIT 20 OFFSET 0 
```

只需更改每次点击的偏移值，您将获得所需的结果

php中的分页，[参考](http://www.strangerstudios.com/sandbox/pagination/diggstyle.php)，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T10:27:47.867

在 MysqlQuery 中，您可以使用 LIMIT begin, max 函数：SELECT * FROM db LIMIT 100, 10 将选择从偏移量 10 开始的 10 个数据集。

您必须通过 javascript 将 $_GET 或 $_POST 变量传递给 php 脚本：

```
$.ajax({
    [...],
    url: "script.php",
    data: {
        page: <page to load>
    },
    [...]
}) 
```

在 php 脚本中，您现在修改查询：

```
$query = "SELECT * FROM database LIMIT " . $_GET['page'] . ", " . $entrys_per_page; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T12:36:20.260

```
if(isset($_GET['page']))
{
    $page=$_GET['page'];
}
else
{
    $page=1;
}

if(isset($_GET['dark']))
{
    $max_result=$_GET['dark'];

}
else
{
    $max_result=5;
}

$from=(($page*$max_result)-$max_result);

mysql_select_db("db",$con);
$sql = "SELECT COUNT(*) FROM `db`.`table` ";
$result=mysql_query($sql);

$total_result=mysql_result($result,0);
$total_pages=ceil($total_result/$max_result);

if($total_result>$max_result)
{
    if($page>1)
    {
        $prev=$page-1;
        echo "<a href=\"".$_SERVER['PHP_SELF']."?dark=".$max_result."&page=$prev\">previous</a>";
    }
    for($i=1;$i<=$total_pages;$i++)
    {
        if($page==$i)
        {
        echo "<strong>".$i."</strong>";
        }
        else
        {
        echo "<a href=\"".$_SERVER['PHP_SELF']."?dark=".$max_result."&page=$i\">$i</a> ";
        }
        if($page<$total_pages)
        {
        $next=$page+1;

        //echo "<a href=\"".$_SERVER['PHP_SELF']."?page=$next\"></a>";
        }
    }

        if($page<$total_pages)
        {
                $next=$page+1;
                echo "<a href=\"".$_SERVER['PHP_SELF']."?dark=".$max_result."&page=$next\">next</a>";
        }
}

         echo "<table><tr>";

            echo "<td><form action='helloworld.php' name='get'>
                <select name='dark'>
                <option value='2'>2</option>
                <option value='5'>5</option>
                <option value='10'>10</option>
                </select>
                <input type='hidden' name='searching' value='yes' /><input type='submit' value='No.of entries'>
                </form></td></tr>";         
            echo "<tr><td><strong>PAGE NUMBER $page of $total_pages.</strong>.</td></tr>";
            echo"</table>"; 
```

# java - Java：更新信息的最佳实践

> ID：13009369
> 
> 赞同：0
> 
> 时间：2012-10-22T10:22:23.063
> 
> 标签：java, hibernate, sql-update, hibernate-4.x

我有一个使用 Hibernate 连接到 SQL 数据库的应用程序。从应用程序的特定部分删除一个人时，我想重置在特定部分中设置的所有信息。下面是我正在谈论的一个例子

```
Stage: Bank

Fields to be set in stage:
BankName
AccNo
IBANNo
... 
```

从这个阶段删除一个人时，重置所有信息的最佳方法是什么

```
public void resetInfo(Person person){
    person.setBankName(null);
    person.setAccNo(null);
    person.setIBANNo(null;)
} 
```

或者

```
public void resetInfo(Person person){
    if(person.getBankName != null)  {  
        person.setBankName(null);
    }
    if(person.getAccNo != null)  {  
        person.setAccNo(null);
    }
    if(person.getIBANNo != null)  {  
        person.setIBANNo(null;)
    }
} 
```

还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T10:26:55.017

您以前的代码片段看起来更好，更具可读性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T10:31:56.517

```
public void resetInfo(Person person) {     
    person.setBankName(null);     
    person.setAccNo(null);     
    person.setIBANNo(null;) 
} 
```

这很好，因为 Hiberante 在内部跟踪所有字段值的更改以在更新查询中指定。

您也可以通过设置`show_sql = true`来检查这一点，以检查 Hibernate 生成的更新查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T10:28:38.480

你在使用 JPA/Hibernate/其他 ORM 吗？如果是这样 - 只需将您的字段设置为 null 并让框架创建它需要的查询（意思是 - 如果字段为空，则不会运行任何内容）。

如果您使用 JDBC - 收集所有更改并运行单个更新。

至于对象本身，是否在将其设置为 null 之前检查该值并不重要。您可以只使用您的第一个示例（调用`setNull()`所有字段）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T10:32:13.473

在 Person 类中拥有三个银行字段并不好闻。将这些字段移动到特定的银行类怎么样？然后你可以做 setBank(null)，清除银行信息。

如果您仍然希望您的银行信息与个人信息在同一行，您可以在 JPA 中使用 @Embedded。

# windows - Windows 批处理中的 LastIndexOf

> ID：13009373
> 
> 赞同：5
> 
> 时间：2012-10-22T10:22:39.737
> 
> 标签：windows, batch-file, cmd

我需要在 Windows 批处理脚本中实现一个函数，以将 LastIndexOf 字符转换为给定的字符串。

例如：给定以下字符串，我需要获取字符的最后一个索引`'/'`：

```
/name1/name2/name3
            ^ 
```

所以我需要获得价值：

```
12 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T14:37:41.557

Joey 的解决方案有效，但要查找的字符是硬编码的，而且速度相对较慢。

这是一个快速的参数化函数，可以在字符串中找到任何字符（nul 除外）。我传递包含字符串和字符的变量名而不是字符串文字，以便函数轻松支持所有字符。

```
@echo off
setlocal

set "test=/name1/name2/name3"
set "char=/"

::1st test simply prints the result
call :lastIndexOf test char

::2nd test stores the result in a variable
call :lastIndexOf test char rtn
echo rtn=%rtn%

exit /b

:lastIndexOf  strVar  charVar  [rtnVar]
  setlocal enableDelayedExpansion

  :: Get the string values
  set "lastIndexOf.char=!%~2!"
  set "str=!%~1!"
  set "chr=!lastIndexOf.char:~0,1!"

  :: Determine the length of str - adapted from function found at:
  :: http://www.dostips.com/DtCodeCmdLib.php#Function.strLen
  set "str2=.!str!"
  set "len=0"
  for /L %%A in (12,-1,0) do (
    set /a "len|=1<<%%A"
    for %%B in (!len!) do if "!str2:~%%B,1!"=="" set /a "len&=~1<<%%A"
  )

  :: Find the last occurrance of chr in str
  for /l %%N in (%len% -1 0) do if "!str:~%%N,1!" equ "!chr!" (
    set rtn=%%N
    goto :break
  )
  set rtn=-1

  :break - Return the result if 3rd arg specified, else print the result
  ( endlocal
    if "%~3" neq "" (set %~3=%rtn%) else echo %rtn%
  )
exit /b 
```

创建一个更通用的`:indexOf`函数不需要太多修改，该函数需要一个额外的参数来指定要查找的事件。负数可以指定反向搜索。所以 1 可能是第一个，2 是第二个，-1 最后一个，-2 倒数第二个，等等。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-22T10:29:05.353

*（注意：我假设是 Windows 批处理文件，因为坦率地说，到目前为止，我只看到一个问题询问*实际的*DOS 批处理文件。大多数人只是将“DOS”错误地归因于任何具有灰色窗口的东西——黑色等宽文本，不知道他们实际上在说什么。）*

只需遍历它，随时更新索引：

```
@echo off
setlocal enabledelayedexpansion
set S=/name1/name2/name3
set I=0
set L=-1
:l
if "!S:~%I%,1!"=="" goto ld
if "!S:~%I%,1!"=="/" set L=%I%
set /a I+=1
goto l
:ld
echo %L% 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-08T05:29:00.953

我知道这个问题现在有点老了，但我需要一个函数来找到字符串中子字符串（任意长度）的位置，并根据我的目的调整 dbenham 的解决方案。此功能还适用于字符串中的单个字符，如原始问题中所要求的那样，并且可以搜索特定实例（如 dbenham 所建议的那样）。

要使用此函数，必须传递实际的字符串。Dbenham 确实注意到，与传递实际变量相比，它支持的字符更少，但我发现这种变体更可重用（尤其是使用管道）。

第三个参数采用应该找到的实例，负数指定从末尾开始搜索。返回的索引是从字符串开头到子字符串中第一个字符的偏移量。

```
@ECHO off
SET search_string=sub
CALL :strIndex "The testing subjects subjects to testing." "%search_string%" -2
ECHO %ERRORLEVEL%
PAUSE
EXIT

:strIndex string substring [instance]
    REM Using adaptation of strLen function found at http://www.dostips.com/DtCodeCmdLib.php#Function.strLen

    SETLOCAL ENABLEDELAYEDEXPANSION
    SETLOCAL ENABLEEXTENSIONS
    IF "%~2" EQU "" SET Index=-1 & GOTO strIndex_end
    IF "%~3" EQU "" (SET Instance=1) ELSE (SET Instance=%~3)
    SET Index=-1
    SET String=%~1

    SET "str=A%~1"
    SET "String_Length=0"
    FOR /L %%A IN (12,-1,0) DO (
        SET /a "String_Length|=1<<%%A"
        FOR %%B IN (!String_Length!) DO IF "!str:~%%B,1!"=="" SET /a "String_Length&=~1<<%%A"
    )
    SET "sub=A%~2"
    SET "Substring_Length=0"
    FOR /L %%A IN (12,-1,0) DO (
        SET /a "Substring_Length|=1<<%%A"
        FOR %%B IN (!Substring_Length!) DO IF "!sub:~%%B,1!"=="" SET /a "Substring_Length&=~1<<%%A"
    )

    IF %Substring_Length% GTR %String_Length% GOTO strIndex_end

    SET /A Searches=%String_Length%-%Substring_Length%
    IF %Instance% GTR 0 (
        FOR /L %%n IN (0,1,%Searches%) DO (
            CALL SET StringSegment=%%String:~%%n,!Substring_Length!%%

            IF "%~2" EQU "!StringSegment!" SET /A Instance-=1
            IF !Instance! EQU 0 SET Index=%%n & GOTO strIndex_end
    )) ELSE (
        FOR /L %%n IN (%Searches%,-1,0) DO (
            CALL SET StringSegment=%%String:~%%n,!Substring_Length!%%

            IF "%~2" EQU "!StringSegment!" SET /A Instance+=1
            IF !Instance! EQU 0 SET Index=%%n & GOTO strIndex_end
    ))

:strIndex_end
    EXIT /B %Index% 
```

# .htaccess - htaccess 问题无法正常工作

> ID：13009374
> 
> 赞同：0
> 
> 时间：2012-10-22T10:22:45.433
> 
> 标签：.htaccess

我在 .htaccess 文件中使用 URL 重写我的问题是在根文件夹中我有 index.php 文件并且我重定向到`en/home/`文件夹但是当我使用这个 .htaccess 代码时重定向不起作用。

```
RewriteRule ^([^/]*+)$ en/peoples/globalCardDetail.php?p=$1 
```

像这样重写工作正常`http://www.domain.com/atiq ur rehman`。但是当我访问我的域时，`http://www.domain.com`它会重定向到这个页面`en/peoples/globalCardDetail.php`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:25:32.803

您需要将正则表达式从 更改`^([^/]*+)$`为`^([^/]+)$`。

此外，您可能需要添加一些条件：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)$ en/peoples/globalCardDetail.php?p=$1 [L] 
```

# html - CSS：相等的并排容器超过一定宽度并且在低于该宽度时彼此顶部

> ID：13009392
> 
> 赞同：0
> 
> 时间：2012-10-22T10:23:35.143
> 
> 标签：html, css

我有两个容器。

当屏幕为 500 像素或更少时，这些容器需要彼此叠放，并且都占据了 100% 的屏幕。

当屏幕超过 500px 时，它们需要并排并排占用屏幕水平空间的相等宽度。

这需要在ie8中工作。我不能使用媒体查询。

这可能只使用CSS吗？（没有 JavaScript）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:25:46.730

这仅在支持媒体查询的浏览器中才有可能，但遗憾的是 IE8 不支持，尽管您可以获得一个 JS 插件（Respond.js 或类似的），这将使它们在 IE8 上工作。

[这](http://jsfiddle.net/JzDav/1/)是支持媒体查询的浏览器中的工作版本

关键的代码是

```
@media 
  screen and (max-device-width: 500px), 
  screen and (max-width: 500px) { 
```

可以在[这里看到对媒体查询的支持](http://caniuse.com/css-mediaqueries)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:33:57.047

使用媒体查询

**HTML**

```
<div class="container">
<div class="dv">First block</div>
<div class="dv2">Second block</div>
</div>​ 
```

**CSS**

```
.container{width:500px; background:grey}
.dv{ background:green;  width:500px; height:250px}
.dv2{ background:red;  width:500px; height:250px }

@media screen and (min-width : 500px)
{
    .container{width:100%; background:grey; overflow:auto}
    .dv{width:50%; float:left}    
    .dv2{width:50%; float:left}
}​ 
```

[**演示**](http://jsfiddle.net/wM5zY/2/)

# c# - 在添加/删除程序中更改 Windows 窗体应用程序图标

> ID：13009399
> 
> 赞同：1
> 
> 时间：2012-10-22T10:24:03.363
> 
> 标签：c#, winforms, icons

我有一个 Windows 窗体应用程序，我使用[ClickOnce](http://en.wikipedia.org/wiki/ClickOnce)部署了它。我更改了项目图标。发布和安装后，该图标出现在桌面上。这么多还可以。

但是，当我在控制面板的“添加/删除程序”中搜索该应用程序时，它会显示一个默认图标，而不是我的。我怎样才能改变那个图标，还是不可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:52:11.687

根据 MSDN 论坛中的主题，*[ClickOnce Application 的 Add/Remove Programs 中的 Missing Icon](http://social.msdn.microsoft.com/Forums/en/winformssetup/thread/db1d57ee-7743-4409-8072-f0e84ab5330a)*似乎是可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T19:23:45.910

我很确定 ClickOnce 不会让您更改图标。我在部署中使用 Visual Studio 安装项目，如果您转到属性，第一个是“AddRemoveProgramsIcon”，您可以在其中指定要在其中使用的图标。

# c# - 如何创建安装项目来安装 scr 文件

> ID：13009401
> 
> 赞同：0
> 
> 时间：2012-10-22T10:24:04.867
> 
> 标签：c#, visual-studio, windows-screensaver

我想实现**（exe 或 msi）**在任何机器上安装屏幕保护程序**（scr）文件。**请指导如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:27:05.707

使用 Visual Studio 创建一个安装程序包，将输出路径设置为`X:\Windows\`（其中 X 是系统驱动器）并可能运行一些命令行来向 Windows 注册屏幕保护程序。

也退房；[http://support.microsoft.com/kb/307353](http://support.microsoft.com/kb/307353)（创建安装包）

可能这个会帮助你更多；[如何以编程方式安装屏幕保护程序？](https://stackoverflow.com/questions/5282456/how-to-install-screensaver-programmatically)

# powershell - 替换powershell中的app.config项节点值

> ID：13009402
> 
> 赞同：5
> 
> 时间：2012-10-22T10:24:06.500
> 
> 标签：powershell, app-config

具有以下 app.config：

```
<configuration>
<appSettings>
 <add key="filepath" value="D:\Data" />
 <add key="node2" value="..." />
 ...
</appSettings>
</configuration> 
```

我想用新值替换具有 'filepath' 键的设置（在这种情况下通过替换 'D:\Data..'）。新值应作为参数传递给 powershell 脚本。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T10:29:51.097

根据评论更新：

```
$xml = [xml]'<configuration>
<appSettings>
 <add key="filepath" value="D:\Data" />
 <add key="filename" value="test.log" />
</appSettings>
</configuration>'

$xml.configuration.appSettings.add | foreach { if ($_.key -eq 'filepath') { $_.value = "C:\Data" } }
$xml.Save("C:\dell\NewApp.config") 
```

==================================================== ==========================================

# 旧答案

```
$xml = [xml]'<configuration>
<appSettings>
 <add key="filepath" value="D:\Data" />
</appSettings>
</configuration>'

$xml.configuration.appSettings.add.value = "C:\Data"
$xml.Save("NewApp.config") 
```

或者

```
$xml = [xml](Get-Content App.config)
$xml.configuration.appSettings.add.value = "C:\Data"
$xml.Save("NewApp.Config") 
```

# tabs - 日期选择器无法进入新标签

> ID：13009404
> 
> 赞同：1
> 
> 时间：2012-10-22T10:24:07.877
> 
> 标签：tabs, datepicker

当我点击。日期选择器无法进入新标签
这是代码

```
<script>
var tabCounter = 2,
    tabTemplate = "<li><a href='#{href}'>#{label}</a> <span class='ui-icon ui-icon-close'>Remove Tab</span></li>";
var tabs = $( "#tabs" ).tabs();
var tabContentHtml = $("#tabs-1").html(); 
```

创建日期选择器。进入tab1。不适用于tab2

```
$( ".rush" ).datepicker(); 
```

单击按钮时添加新选项卡

```
$("#add_tab").click(function(){
        addTab();
});
function addTab() {
        var label = "Tab " + tabCounter,
            id = "tabs-" + tabCounter,
            li = $( tabTemplate.replace( /#\{href\}/g, "#" + id ).replace( /#\{label\}/g, label ) );

        tabs.find( ".ui-tabs-nav" ).append( li );
        tabs.append( "<div id='" + id + "'><p>" + tabContentHtml + "</p></div>" );
        tabs.tabs( "refresh" );
        tabCounter++;
    }
</script> 
```

代码html

```
<div id="tabs">
<ul>
    <li><a href="#tabs-1">Nunc tincidunt</a> <span class="ui-icon ui-icon-close">Remove Tab</span></li>
</ul>
<div id="tabs-1">
    <input type="text" class="rush" />
</div>
</div>
<button id="add_tab">Add Tab</button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:29:07.093

它不工作的原因是因为日期选择器的东西是在页面加载时完成的。添加新选项卡时，不会创建日期选择器，请查看上一篇文章：

[使日期选择器生效 - JQuery](https://stackoverflow.com/questions/6601301/making-datepicker-live-jquery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:31:12.517

创建新选项卡后，您必须调用 datepicker：

```
$("#add_tab").click(function(){
    addTab();
    $( ".rush" ).datepicker(); //or your new datepicker id
}); 
```

# ruby-on-rails - 在ruby中使用class_eval时，如何访问原类中的常量？

> ID：13009410
> 
> 赞同：4
> 
> 时间：2012-10-22T10:24:31.243
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我想使用 class_eval 扩展一个类，并且在尝试从原始类访问常量时，我​​收到一条错误消息：

NameError: 未初始化的常量 HIS_CONSTANT 来自 ./my_module.rb:35:in `show_his_constant' from (irb):4

我使用示例程序进行了测试，但无法使其正常工作。有人可以检查一下为什么这不起作用吗？谢谢！

```
module MyModule
  puts "start my module"
  def mytest
    puts "mytest"
  end

  module YourModule
    def yourtest
      puts "yourtest"
    end
  end
end

module MyModule
  module YourModule
    module HisModule
      HIS_CONSTANT = 'THIS_IS_A_CONSTANT'
    end
  end
end

module MyModule
  module YourModule
    class HisClass
      include HisModule
      def show_constant
        puts HIS_CONSTANT
      end
    end
  end
end

MyModule::YourModule::HisClass.class_eval do
  def show_his_constant
    puts HIS_CONSTANT
  end
end 
```

顺便说一句，我知道这种方式可以工作：

```
MyModule::YourModule::HisClass.class_eval do
  def show_his_constant
    puts MyModule::YourModule::HisModule::HIS_CONSTANT
  end
end 
```

但我不想使用命名空间来访问，因为它应该已经包含在内。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T13:40:40.747

您必须使用 ruby​​ 1.8，因为您的代码似乎按照 1.9 编写的方式工作。

在 1.8 中，问题似乎是常量绑定在定义块的上下文中（无论`self`您何时开始编写`MyModule::YourModule::HisClass.class_eval`）。您可以延迟常量绑定，直到`self`成为 的`MyModule::YourModule::HisClass`实例[`Module.const_get`](http://www.ruby-doc.org/core-1.8.7/Module.html#method-i-const_get)。

```
MyModule::YourModule::HisClass.class_eval do
  def show_his_constant
    puts self.class.const_get(:HIS_CONSTANT)
  end
end

irb 1.8.7> MyModule::YourModule::HisClass.new.show_his_constant
THIS_IS_A_CONSTANT 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:40:39.530

这个怎么样

```
MyModule::YourModule::HisClass.class_eval do
  def show_his_constant
    puts self::class::HIS_CONSTANT
  end
end 
```

# synchronization - 线程同步：如何保证写入的可见性

> ID：13009411
> 
> 赞同：2
> 
> 时间：2012-10-22T10:24:32.397
> 
> 标签：synchronization, thread-safety, cpu-architecture, memory-barriers, memory-model

已经有很多关于软件和硬件内存模型、内存栅栏、存储/加载重新排序等的信息。然而，这一切似乎都集中在保证读写共享内存的相对顺序上。

这样的系统将线程的写入完全延迟很长时间是否是合法行为？

例如，考虑一个线程对内存中的数据结构进行一些更新，然后引发一个应该通知其他线程更新的标志：

```
(dataWritten is initially false)
store value1
store value2
store value3
mfence
store dataWritten (true) 
```

根据我读过的大多数内存模型，内存屏障保证任何其他线程都无法将 dataWritten 视为 true，同时仍读取过时的值 1、2 或 3，即它使这些写入原子。

但是我能确定这些写的东西会被看到*吗*？只要标志的写入时间不早于值，在内存模型下无限期延迟写入是否合法？

用数据库术语来说，内存模型可以用来推理持久性（除了原子性和一致性，这可以通过使用上面示例中的内存围栏和标志来保证）？

**更新：** [关于可见性及时性的 volatile 详细语义](https://stackoverflow.com/questions/11761552/guarantees-given-by-the-java-memory-model)解决了 Java 内存模型上下文中的同一主题，以及[内存模型排序和可见性？](https://stackoverflow.com/questions/7461484/memory-model-ordering-and-visibility)对于 C++11。该讨论是否也适用于硬件内存模型，即 CPU ISA 是否只为正确的可见性序列提供硬保证，但为延迟可见性提供“软”保证？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T05:45:28.220

很难证明是否定的——那里有很多指令集架构。但是，我怀疑您是对的，没有硬件内存模型可以保证写入的最终可见性。

我强烈推荐阅读[英特尔® 安腾® 处理器家族内存订购的正式规范](http://www.intel.com/design/itanium/downloads/251429.htm)，因为尽管您可能并不关心安腾，但它是对硬件内存模型通常关心的保证内容的出色且易读的描述。

实际上，只要 CPU 仍在执行指令，它最终将不得不刷新其写入。此外，只要写入命中 L2 缓存或附近，由于缓存一致性协议，它通常应该对其他 CPU 可见。所以我认为这不是特别需要担心的事情。

# jquery - jsTree two_state 复选框 - 已检查父级中的单个节点也会在 get_checked 上返回

> ID：13009413
> 
> 赞同：2
> 
> 时间：2012-10-22T10:24:36.717
> 
> 标签：jquery, jstree

我正在使用 jsTree 来显示文件夹和文件层次结构。我打开了两态复选框以允许独立选择文件和目录，以避免即使检查了所有包含的文件也会自动选择目录。这完美无缺，但是在检索检查的元素时我遇到了麻烦。

我的代码如下所示：

```
var checkedInTree = $("#docTree").jstree("get_checked", null, false); 
```

如果检查了文件夹 A 中的单个文件（包含多个文件），并且还检查了文件夹 A 本身，那么我预计我只会在使用 get_all 参数 = false 调用 get_checked 时获取文件夹 A。我从 JSTree 文档中收集到，如果 get_all 标志为 FALSE，则不会返回已检查父节点中的单个已检查节点，因为选择父节点会自动包括所有子节点。现在，无论 get_all 的值如何，我都获得了文件夹和文件。

知道我可能做错了什么吗？这是 jsTree 中的错误吗？

# tsql - 从多个 CTE 动态检索信息

> ID：13009414
> 
> 赞同：0
> 
> 时间：2012-10-22T10:24:38.927
> 
> 标签：tsql, sql-server-2012, common-table-expression

我有多个 CTE，我想从其中几个中检索一些信息到下一个 CTE。

因此，我从其中一个 CTE 获得了以下信息：

```
PeriodID  StarDate
1         2006-01-01
2         2007-04-25
3         2008-08-16
4         2009-12-08
5         2011-04-017 
```

这来自其他：

```
RecordID  Date
100       2007-04-15
101       2008-05-21
102       2008-06-06
103       2008-07-01
104       2009-11-12 
```

我需要在下一个展示：

```
RecordID  Date        PeriodID
100       2007-04-15  1
101       2008-05-21  2
102       2008-06-06  2
103       2008-07-01  2
104       2009-11-12  3 
```

我可以使用一些 case/when 语句来定义记录日期是否在周期 1、2、3、4 或 5 中，但在某些情况下，我可以从第一个 CTE 返回不同数量的周期。

有没有办法在上述情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:34:14.347

您可以定义多个 CTE，如下所示，然后像处理任何其他表一样从它们中选择并连接它们。

```
with cte1 as (select * ...),
cte2 as (select * ...)
    select 
        cte2.*, 
        periodid 
    from cte2
cross apply 
        (select top 1 * from cte1 where cte2.recorddate> cte1.startdate order by startdate desc) v 
```

# wpf - ASP.Net MVC 和 WPF 可能是 Windows 8 Phone

> ID：13009415
> 
> 赞同：0
> 
> 时间：2012-10-22T10:24:39.623
> 
> 标签：wpf, asp.net-mvc, model-view-controller, mvvm, windows-phone

我目前正在开发一个应用程序，它使用 Telerik ORM 工具来管理对后端数据库的访问。在这一层之上，我正在实现一个业务层（域），其中包含代表我的应用程序模型的真实世界对象。到目前为止，一切都很好。

我现在遇到的问题是严重的困惑之一。我将开发一个 ASP.Net MVC 网站，它构成了我的应用程序的主要中心。除此之外，我还需要创建一个 WPF 应用程序来实现与桌面的一些集成，最后我想实现一个包含 ASP.Net 网站功能子集的 Windows 8 手机应用程序，但这也将实现一些WPF 功能。

问题是我想让应用程序尽可能简单并保持高水平的代码重用。理想情况下，我不想实现多个业务层，但我不确定哪种架构模式最适合使用？我认为添加某种服务——无论是 REST、Web 服务、WEB API 还是业务层之上的东西，然后独立处理每种 UI 技术将是可行的方法，但我想我会征求意见和建议在我沿着一条路线前进并最终回溯之前？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:38:08.780

您可以使用 WCF 或 Web API 作为位于业务层之上的层。如果您希望使用 RESTful api，那么新的 Web API 是一个不错的起点。

如果您查看这些教程，它们应该会有所帮助：[http ://www.asp.net/web-api/samples](http://www.asp.net/web-api/samples)

然后，您的客户端应用程序将调用这些 API 以与您的业务/数据层进行通信。

# javascript - 在 loopj-jquery-tokeninput 中编辑 facebook 标记（带有自动字段的 Facebook 标记下拉列表）

> ID：13009417
> 
> 赞同：0
> 
> 时间：2012-10-22T10:24:53.280
> 
> 标签：javascript, jquery, facebook

在这个插件中，每件事都只能正常工作，这里的 json 是这种格式。我对 json 很陌生，所以无法理解代码。

```
[
            {id: 7, name: "Ruby"},
            {id: 11, name: "Python"},
            {id: 13, name: "JavaScript"},
            {id: 17, name: "ActionScript"},
            {id: 19, name: "Scheme"},
            {id: 23, name: "Lisp"},
            {id: 29, name: "C#"},
            {id: 31, name: "Fortran"},
            {id: 37, name: "Visual Basic"},
            {id: 41, name: "C"},
            {id: 43, name: "C++"},
            {id: 47, name: "Java"}
        ] 
```

但是我的json是这样的。

```
 {
   "data": [
                {id: 7, name: "Ruby"},
                {id: 11, name: "Python"},
                {id: 13, name: "JavaScript"},
                {id: 17, name: "ActionScript"},
                {id: 19, name: "Scheme"},
                {id: 23, name: "Lisp"},
                {id: 29, name: "C#"},
                {id: 31, name: "Fortran"},
                {id: 37, name: "Visual Basic"},
                {id: 41, name: "C"},
                {id: 43, name: "C++"},
                {id: 47, name: "Java"}
                ],
             "paging": {
      "next": "https://graph.facebook.com/100000454970389/friends?access_token=AAAAAAITEghMBAPkZAGQhUiXWSeaewhYZBsZBXIs37swq4Th90HHIwYfKgm12M9u20UR9iqpeTtXv477ZAvx5nD0NsbSMJWlpTCNSrvxZCTVHg6upTAZBmV&limit=5000&offset=5000&__after_id=100004141210773"
   }
} 
```

这是我们解析 json 的 javascript。

[https://github.com/loopj/jquery-tokeninput/blob/master/src/jquery.tokeninput.js](https://github.com/loopj/jquery-tokeninput/blob/master/src/jquery.tokeninput.js)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:01:46.173

我得到了解决方案

```
 <script type="text/javascript">
        $(document).ready(function() {

            var url = 'https://graph.facebook.com/me/friends?access_token=<?php echo $access_token ?>';
$.getJSON(url,function(json){
    beer = json.data;   
    console.log(beer);
    var myJSONText = JSON.stringify(beer);
            $("#demo-input-facebook-theme").tokenInput(beer, {
                theme: "facebook",
                propertyToSearch: "name",
                preventDuplicates: true,
                resultsLimit:'5',
                resultsFormatter: function(item){ return "<li>" + "<img src='http://graph.facebook.com/" + item.id + "/picture' title='" + item.id + "'  />" + "<div style='display: inline-block; padding-left: 10px;'><div class='full_name'>" + item.name + " </div></div></li>" },
              tokenFormatter: function(item) {  return "<li><p>" + item.id + "</p></li>" },
            });               
});   

        });
        </script> 
```

# php - php邮件通知

> ID：13009421
> 
> 赞同：3
> 
> 时间：2012-10-22T10:24:54.477
> 
> 标签：php, forms, email

好的，我是 php 编码的新手，并且正在处理表单邮件 php（将内容邮寄到电子邮件地址的表单）代码工作正常。现在我想知道是否有办法通知访问者邮件的成功或失败。（动态添加一行到表单页面，其中提到“成功”或“失败重试”。希望我已经足够清楚了。

这是代码

```
 <?php

    $name = $_POST["name"]; 

    $company = $_POST["company"]; 

    $email = $_POST["email"]; 

    $contact =$_POST["contact"]; 

    $require = $_POST["requirement"]; 

    $message = "Name :".$name."\n"."Company  :".$company."\n"."Email id".$email."\n"."Contact no :".$contact."\n"."Requirement : ".$require;

    $subject ="Subject Matter Here";

    $to = "abc@xyz.com";

    if(mail($to, $subject,$message)){
echo "We Received Your enquiry, We'll get back to you soon";
     } 
      else{ 
echo "there were some errors sending enquiry, please try again";
     }

      ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T10:27:37.483

```
$send = mail($to, $subject, $message);

if(!$send){
    echo 'Failed to send!';
} 
```

[邮件](http://php.net/manual/en/function.mail.php)功能：

> 如果邮件被成功接受传递，则返回 TRUE，否则返回 FALSE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:30:04.427

mail 函数返回一个表示成功的布尔值：

```
$result = mail(...)
if ($result) {
    echo 'Success';
} else {
    echo 'Failure try again';
} 
```

如果 mail() 返回 false，您肯定知道不会发送电子邮件。如果 mail() 返回 true，则您的邮件服务器已接受电子邮件，但仍可能未送达。您的邮件服务器尝试将其发送到另一个邮件服务器，这可能会拒绝该邮件。您将收到一条退回消息，但由于这不会立即发生，您无法在表单上显示结果。

如果您想（更多）确保电子邮件已送达，您必须自己连接到目标主机。获取域的 MX 记录，连接到 STMP 服务器并将其直接发送到目标服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T10:32:13.630

你可以试试看[这里](https://stackoverflow.com/questions/2323463/how-can-i-catch-an-error-caused-by-mail)和 [这里](http://php.net/manual/en/function.mail.php)

并像这样使用它：

```
if (!mail(...)) {// Reschedule for later try or panic appropriately!} 
```

`mail() returns TRUE if the mail was successfully accepted for delivery, FALSE otherwise.`

重要的是要注意，仅仅因为邮件被接受交付，并不意味着邮件实际上会到达预定目的地。

# asp.net - 解决方案中的 TFS 2010 Build 2 项目未转换 web.configs

> ID：13009423
> 
> 赞同：0
> 
> 时间：2012-10-22T10:25:11.153
> 
> 标签：asp.net, transform, tfsbuild

我在使用 TFS 构建的解决方案中有两个 Web 应用程序。主 Web 应用程序的 web.configs 会根据构建的配置设置正确转换。

在第二个 Web 应用程序中，项目已构建和部署，但 web.config 未转换，所有转换 web.config 都被复制到发布位置。即：web.config、web.dev.config、web.testing.config

在构建设置 > 流程 > 要构建的项目中，我添加了解决方案文件。该版本显示“1 个平台和配置有 1 个项目”我不确定这是否正确。它不应该看到我的两个 Web 应用程序吗？

如何设置 TFS 构建以转换两个项目 web.configs？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:48:14.947

您使用的是哪个版本的 TFS？无论如何，看看这里，因为它可能会回答你： http: [//nirajrules.wordpress.com/2011/07/04/integrating-web-config-transformations-with-tfs-build/](http://nirajrules.wordpress.com/2011/07/04/integrating-web-config-transformations-with-tfs-build/)

# php - Jquery编辑文本然后使用ajax保存到数据库

> ID：13009427
> 
> 赞同：0
> 
> 时间：2012-10-22T10:25:27.737
> 
> 标签：php, javascript, jquery

我有一个页面，其中的文本显示在 div 和 span 中。在每一个旁边，我都有一个用户可以点击的图像。

当他们单击此图像时，我需要将文本更改为文本区域，以便用户可以编辑文本，然后当他们单击它时，将需要调用 php 脚本以通过 ajax 保存到 DB。

所有 div 和图像都有唯一的 ID，所以这应该使 jquery 选择器更容易。

任何人都可以帮忙吗？到目前为止，我尝试过的一切都没有真正奏效。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:44:04.563

假设您有：

```
<div id='mydivparent'>
Some text here
     <div>
           <img src='images/mypic.jpg' id='mydiv' onclick='editr(this)' />
     </div>
</div> 
```

按照您的要求进行操作，下面的 JS 代码就足够了。

```
<script>

   function editr(obj)
            {
               var id = $(obj).attr('id');
               var text = $('#mydiv'+parent).text();
               $('#mydiv'+parent).empty();
               $('#mydiv'+parent).append('<form action='form_processor.php'  onsubmit="send_ajax($('textarea#'+id+').value)"><textarea id='+id+'>'+text+'</textarea><input type='submit' value='Save Text'></form>');

            } 
     function send_ajax(txtValue){

                 $.ajax({
                       url: 'form_processor',
                       cache: false;
                       type: 'POST',
                       data: {'text': txtValue},
                       success: function(){
                           //Code to add the text to the div and delete the textarea returning it to a normal div
                         }

                 });
                 return false;                      

             }   

</script> 
```

您应该记住如何命名 div 和图像 id，以便从图像 id 访问 div 的 id 很容易。您应该使用自己的协议，这样如果您有图像 ID，就可以获得关联的 div id，或者您可以将图像放在 div 中，这样就像选择 PARENT 一样容易。

编辑后，您可以在用户之后为 ajax 设置它。

该代码并未完全涵盖所有情况，例如，如果您在保存第一个打开的文本区域之前单击另一个图像，但我相信它会让您走上正确的道路，您应该采取的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T08:03:41.827

最后，我使用 jeditable 插件为找到这篇文章的任何人解决了这个问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T11:17:19.703

您可以使 div 可编辑：

```
$(".ajax-div .on-img").on("click",function(ev) {
    $(this).parent().find(".editable-text").attr("contenteditable", "true").after("<button onclick='saveEdits()'>Save</button>");
}) 
```

您的 html 结构必须看起来像这样

```
<div class="ajax-div" id="somediv">
<div class="editable-text">Editable text</div>
<img class="on-img" src="" alt="">
</div> 
```

saveEdits() 函数：

```
function saveEdits() {
    $(".ajax-div").each(function() {
       if(this.hasAttr("contenteditable") && this.attr("contenteditable")==true) {
            id = $(this).attr("id");
            //handle change
        }
    }) 
```

}

# jsf - 鼠标悬停时，primefaces CommandLink 下划线不起作用

> ID：13009428
> 
> 赞同：-1
> 
> 时间：2012-10-22T10:25:29.210
> 
> 标签：jsf, primefaces

```
<p:commandLink id="ajax" style="margin-right:20px;">  
            <h:outputText value="Ajax Submit" />  
        </p:commandLink> 
```

我想在鼠标悬停时加下划线。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-22T11:54:28.990

使用 CSS 样式。

例子 ：

```
<p:commandLink id="mycommandLinkID" .../> 
```

CSS 样式

```
a.mycommandLinkID:hover {
    text-decoration:underline;
} 
```

# java - 使用纯 Java 播放 MP3 文件

> ID：13009431
> 
> 赞同：0
> 
> 时间：2012-10-22T10:25:38.013
> 
> 标签：java, audio, mp3, javasound

是否可以仅使用 JDK 提供的内置库播放 MP3 文件。我听说过我认为找到的**javax.media**库是 1.7。顺便说一句，我知道**jlayer**，但我不想使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:53:18.057

是的，您可以播放 MP3 文件，但您需要下载 MP3 插件，因为 java 框架仅支持 WAV 和 AIFF 文件。

检查[http://www.morgenstille.at/blog/how-to-play-a-mp3-file-in-java-simple-and-beautiful/](http://www.morgenstille.at/blog/how-to-play-a-mp3-file-in-java-simple-and-beautiful/)

# android - Android：将电子名片文本保存在联系人中

> ID：13009434
> 
> 赞同：1
> 
> 时间：2012-10-22T10:25:43.657
> 
> 标签：android, contacts, qr-code, vcf-vcard

我有一个 qrcode 应用程序也可以扫描 vcard：结果（我将其保存为字符串）是：

```
BEGIN:VCARD
FN:name
N:surname
TE:039390399
and everything else 
```

我的问题是：如何将此字符串保存在电话联系人中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:22:32.433

[vCard 规范](http://en.wikipedia.org/wiki/VCard)说您应该使用`NOTE`which 指定与 vCard 关联的补充信息或注释

所以，你的例子应该是

```
BEGIN:VCARD
FN:name
N:surname
TE:039390399
NOTE:and everything else 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-22T10:29:50.477

为此，您应该制作 vcard io 服务，您可以查看以下链接

[http://code.google.com/p/vcardio/](http://code.google.com/p/vcardio/)

# batch-file - .BAT 复制文件 - 同一目录不同驱动器

> ID：13009439
> 
> 赞同：1
> 
> 时间：2012-10-22T10:25:54.390
> 
> 标签：batch-file

我将如何编写一个 .bat 文件，以便我可以在 Windows 7 中将文件拖放到该文件上，这会将文件复制到同一目录，但在不同的驱动器上？

所以如果我的文件是：

```
D:\Files\Newfiles\File01.jpg 
```

它会将其复制到预先指定的网络位置（COMPUTER_01）：

```
\\COMPUTER_01\Files\Newfiles\File01.jpg 
```

我已经研究过使用命令行参数 %~p1 和 %~nx1，但我不确定这些将如何实现。

我敢肯定这很容易做到，但我不知道！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:32:12.797

非常容易：

```
copy %1 "\\COMPUTER_01%~p1" 
```

# html - 将时间设置为 html 中的缩写标记

> ID：13009444
> 
> 赞同：0
> 
> 时间：2012-10-22T10:26:01.227
> 
> 标签：html

我在html中写了一个类似这样的缩写，

```
 <abbr title="How are you">HAY</abbr> 
```

这段代码仅显示 4 或 5 秒的缩写。这次可以定制吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T10:27:36.827

不，这完全由浏览器处理，用户或 Web 开发人员无法更改、读取或编辑可见时间。

您可以使用 JavaScript 创建一个包含属性文本的元素，该`title`属性的可见性将在您的控制之下。

* * *

**编辑**是因为我想到我应该尝试提供一个替代示例（而不是仅仅说'它们存在'），所以，一个 CSS 示例（我在这个实现中使用 CSS 生成的内容，不幸的是不允许对于 CSS 过渡，它只会出现，并一直保持在原位，直到您从`abbr`元素上移出鼠标）：

HTML：

```
<abbr data-title="Cascading Style Sheets">CSS</abbr>​ 
```

CSS：

```
abbr[data-title] {
    position: relative;
    border-bottom: 2px dashed #aaa;
    cursor: help;
}
abbr[data-title]::after{
    display: none;
    position: absolute;
    content: attr(data-title);
    top: 90%;
    left: 90%;
    color: #f90;
    background-color: rgba(0,0,0,0.7);
    padding: 0.4em;
    border-radius: 0.7em;
}
abbr[data-title]:hover::after {
    display: block;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/JpYG7/)。

这确实需要用户拥有一个支持 CSS 生成内容的浏览器，因为如果有一个`title`属性，您将同时显示[CSS 弹出窗口*和*默认标题，](http://jsfiddle.net/davidThomas/JpYG7/1/)这既不是非常有用也不是特别漂亮。

另一种方法是使用嵌套元素和 CSS 过渡，在那些不支持过渡的浏览器中优雅地降级（内容只是“出现”，但至少它是可用的）：

HTML：

```
<abbr>CSS<span>Cascading Style Sheets</span></abbr>​ 
```

CSS：

```
abbr {
    position: relative;
    border-bottom: 2px dashed #aaa;
    cursor: help;
}

abbr span {
    position: absolute;
    top: 90%;
    left: 90%;
    padding: 0.4em;
    color: #f90;
    background-color: rgba(0,0,0,0.7);
    border-radius: 0.7em;
    opacity: 0;
    width: 0;
    height: 0;
    overflow: hidden;
    -moz-transition: all 1s linear;
    -ms-transition: all 1s linear;
    -o-transition: all 1s linear;
    -webkit-transition: all 1s linear;
    transition: all 1s linear;
}

abbr:hover span {
    opacity: 1;
    width: 8em;
    height: 4em;
    -moz-transition: all 1s linear;
    -ms-transition: all 1s linear;
    -o-transition: all 1s linear;
    -webkit-transition: all 1s linear;
    transition: all 1s linear;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/JpYG7/2/)。

还有一种 JavaScript 方法（坦率地说，这有点难看）：

```
if (document.querySelectorAll) {
    var elems = document.querySelectorAll('[title]');
}
else {
    var firstPass = document.getElementsByTagName('*'),
        elems = [];
    for (var i = 0, len = firstPass.length; i < len; i++) {
        if (firstPass[i].title) {
            elems.push(firstPass[i]);
        }
    }
}

for (var i = 0, len = elems.length; i < len; i++) {
    elems[i].onmouseover = function(e) {
        // cache variables for subsequent use:
        var that = this,
            helpText = this.getAttribute('data-title') || this.title;
        // create a useable attribute and stop the original title from showing up,
        // if the attribute to use doesn't already exist:
        if (!that.getAttribute('data-title')) {
            that.setAttribute('data-title', helpText);
            that.removeAttribute('title');
        }
        // create an element to contain the popup-text or find the
        // already-created element if it already exists:
        var id = helpText.replace(/(\W)/g, ''),
            popup = document.getElementById(id) || document.createElement('div');
        // setting the id to its own id (if it already existed)
        // or, if it's newly-created, to the white-space-removed help-text
        popup.id = popup.id || id;
        // creating a text-node for the help-text:
        var text = document.createTextNode(helpText);
        // appending that text-node to the popup if that text node doesn't already exist:
        if (!popup.firstChild) {
            popup.appendChild(text);
        }
        // setting the styles (adjust to taste):
        popup.style.display = 'block';
        popup.style.color = '#f90';
        popup.style.backgroundColor = '#000';
        popup.style.position = 'absolute';
        popup.style.top = that.offsetHeight * 0.9 + 'px';
        popup.style.left = that.offsetWidth * 0.9 + 'px';
        popup.style.padding = '0.3em';
        document.getElementsByTagName('body')[0].appendChild(popup);
    };
    elems[i].onmouseout = function() {
        // finding the id of the popup (since it's predictably created)
        var id = this.getAttribute('data-title').replace(/(\W)/g, '');
        // finding the element with that id, and hiding it
        document.getElementById(id).style.display = 'none';
    }
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/JpYG7/4/)。

# javascript - 在 dijit 选择框上设置值不起作用

> ID：13009450
> 
> 赞同：0
> 
> 时间：2012-10-22T10:26:27.477
> 
> 标签：javascript, dojo, drop-down-menu

我已经开始在公式中使用 dojo。它工作正常，但我有选择框的问题。该选择框的存储是在就绪函数的函数中创建的。之后我做了一个 set('value', data); 与数据，我从 Ajax 调用到服务器。此选择框的值不会改变。如果我在控制台中测试了相同的代码，它也不起作用。我做了另一个选择框，同样的功能改变了另一个选择框的值。

这里的代码从选择框创建代码：

```
var shop_id = dijit.byId('shopSelect').get('value'); 
var person_count = document.getElementById("person_count").value;
var produkt_count = document.getElementById("person"+person_count+"_produkt_count").value;
xhr.get({
        url: "./ajax_getAlterskategorie.php?shop_id="+shop_id,
        handleAs: "json"
}).then(function(data){
 var tmp = new Memory({ data: data.selectbox });
 var os = new ObjectStore({ objectStore: tmp });
 var s = new Select({
   store: os,
   name: "person"+person_count+"_alter",
   style: {width: "200px"} ,
   onChange: function ( alterskategorie)
   {
      if( dijit.byId('shopSelect'))
      {
        var shop_id = dijit.byId('shopSelect').get('value');
      }
      else
      {
        var shop_id = 0;
      }
      xhr.get({
       url: "./ajax_getProdukt.php?alterskat="+alterskategorie+"&getpkat=1&shop_id="+shop_id,
       handleAs: "json"
      }).then(function(data){
        var produkt_count = document.getElementById("person"+person_count+"_produkt_count").value;
        var tmp = new Memory({ data: data });
        var os = new ObjectStore({ objectStore: tmp });

        for( var i = 1; i <= produkt_count; i++)
        {
          dijit.byId( 'person'+person_count+'_pkat'+i).setStore(os);
        }
      });
    }
  }, "person"+person_count+"_alter");
  s.startup();
}); 
```

这是更改值的代码：

```
xhr.get({
  url: "./ajax_getOrder.php?order_id="+document.getElementById("id").value,
  handleAs: "json"
}).then(function(data){
  for( i = 1; i <= data.person_count; i++)
  {
    dijit.byId('person'+i+'_alter').set('value', '"+data["person"][i]["alter"]+"');
  }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:14:37.883

```
dijit.byId('person'+i+'_alter').set('value', '"+data["person"][i]["alter"]+"'); 
```

为什么使用 '"+ 和 +"'，而不仅仅是：

```
dijit.byId('person'+i+'_alter').set('value', data["person"][i]["alter"]); 
```

确保您尝试使用 data["person"][i]["alter"] 设置的数据（键）在选择小部件中已经可用。

**注意**：请注意您是否使用整数（如 1,2,3.. :) ）作为选择选项的键，前段时间有点错误。

# gwt - 如何在 Errai IOC 中使用提供者？

> ID：13009451
> 
> 赞同：2
> 
> 时间：2012-10-22T10:26:27.663
> 
> 标签：gwt, guice, errai

@IocProvider() 有问题，注解不起作用。[代码与https://docs.jboss.org/author/display/ERRAI/Container+Wiring](https://docs.jboss.org/author/display/ERRAI/Container+Wiring)非常相似

```
public interface Test {
    String getGreeting();
}

@ApplicationScoped
public class TestImpl implements Test {
    public String getGreeting() {
        return "Hello:)";
    }
}

@IOCProvider
@Singleton
public class TestProvider implements Provider<Test> {
    @Override
    public Test get() {
        return new TestImpl();
    }
} 
```

然后我想在我的广播服务（errai-bus）中使用 DI。

```
@Service
public class BroadcastService implements MessageCallback {
    @Inject
    Test test;

    @Inject
    MessageBus bus;

    @Inject
    public BroadcastService(MessageBus bus) {
        this.bus = bus;
    }

    public void callback(Message message) {

        MessageBuilder.createMessage()
                .toSubject("BroadcastReceiver")
                .with("BroadcastText", test.getGreeting()).errorsHandledBy(new ErrorCallback() {
            @Override
            public boolean error(Message message, Throwable throwable) {
                return true;
            }
        }).sendNowWith(bus);
    }
} 
```

我收到一个错误：

```
1) No implementation for com.gwtplatform.samples.basic.server.Test was bound.
  while locating com.gwtplatform.samples.basic.server.Test
    for field at com.gwtplatform.samples.basic.server.BroadcastService.test(BroadcastService.java:32)
  at org.jboss.errai.bus.server.service.ServiceProcessor$1.configure(ServiceProcessor.java:118) 
```

如果我将代码更改为

```
@Inject
TestImpl test; 
```

它有效，但我需要提供者。你有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:26:21.780

因为您试图在服务器端代码中使用 @IOCProvider 。Errai IOC 完全是客户端。

# jquery - 在检查 if 语句之前等待..？

> ID：13009455
> 
> 赞同：-1
> 
> 时间：2012-10-22T10:26:57.087
> 
> 标签：jquery, if-statement, settimeout, wait

我有一个滑块的东西。单击下一个按钮时，它将检查变量是否等于数字。如果数字相等，将执行一个函数。

```
 var month = 0; //variable

 $("#nextbutton").live('click',function(event){
     month+=1;

     if(month == 1) {
         foto1();   
     }

     if(month == 2) {
         foto2();      
     }

     if(month == 3) {
         foto3();
     }

 )}; 
```

但我希望代码在进入 if 语句之前“等待”。因为它同时执行所有这些功能。因为月 == 1 是函数 1。月 == 2 是函数 2，依此类推。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:31:27.773

```
var month = 0; //variable

$("#nextbutton").live('click',function(event){
var month = month+1;
setTimeout(function() {
     if(month == 1) {
         foto1();   
     }
    }, <time_in_ms_to_wait>)
}); 
```

希望有帮助。

# javascript - Jquery将额外的变量传递给排序函数

> ID：13009462
> 
> 赞同：5
> 
> 时间：2012-10-22T10:27:10.883
> 
> 标签：javascript, jquery

我需要编写一个通用的排序函数。我正在使用 jQuery 进行排序。jQuery 排序函数只接受两个参数作为输入。但我想将另一个参数传递给该函数。我怎样才能做到这一点？

像这样的东西：

```
 obj.sort(StringSort);
 obj2.sort(StringSort);

 function StringSort(a, b, desc)
 {
    var aText = $(a).attr(desc).toLowerCase();
    var bText = $(b).attr(desc).toLowerCase();

    if(aText == bText)
      return 0;

    return aText > bText ? 1 : -1;
 } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-22T10:30:07.203

您可以创建一个返回函数的函数。外部函数接受附加参数，并将返回的函数用作排序回调：

```
function getStringSort(desc) {
    return function(a, b) {
        // this is a closure, you can access desc here
        // this function should contain your comparison logic or you just 
        // call StringSort here passing a, b  and desc.
    }
}

obj.sort(getStringSort(someValue)); 
```

内部函数可以访问外部函数的所有参数，因为它是一个[闭包*^([MDN])*](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T10:29:28.963

我不相信 jQuery 有一个`sort`功能。*JavaScript*确实如此，[在数组上](http://ecma-international.org/ecma-262/5.1/#sec-15.4.4.11)。jQuery 和 JavaScript 是不同的东西（一个是库，另一个是语言）。***更新****：啊，jQuery 有一个未记录的`sort`（它借用的几个函数之一`Array.prototype`），但该事实没有记录，因此可能会从 dot release 更改为 dot release。谢谢，[菲利克斯](https://stackoverflow.com/users/218196/felix-kling)。*

您不能将第三个参数直接传递给函数。你可以让你传入的函数`sort`调用另一个函数：

```
// ...assuming `desc` is in scope here here...
obj.sort(function(a, b) {
    return StringSort(a, b, desc);
}); 
```

对于被比较的每对条目，相同的`desc`内容将被传递给。当然，每次通话都会有所不同。`StringSort``a``b`

这是有效的，因为我们传入的函数`sort`是对定义的上下文的闭包`desc`。这意味着函数可以访问`desc`（就像函数可以访问全局变量一样，出于同样的原因）。

更多关于闭包：

*   [*闭包并不复杂*](http://blog.niftysnippets.org/2008/02/closures-are-not-complicated.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-12T03:06:53.607

试试这个：

```
function sortBy(field){
    return function(a, b){
        if (a.field > b.field)
            return -1;
        if (a.field < b.field)
            return 1;
        return 0;
    };
} 
```

# scala - 通过解压缩 List[( (A,B),(C,D) )] 或 List[(A,B,C,D)] 进行变量多重赋值

> ID：13009463
> 
> 赞同：3
> 
> 时间：2012-10-22T10:27:20.533
> 
> 标签：scala, list, tuples, transform

关于[这个问题](https://stackoverflow.com/q/13006973/185840)，我可以通过`unzip`一个`List[(A,B)]`

但是，现在我发现需要在 a`List[( (A,B),(C,D) )]`或 a上进行多重分配`List[(A,B,C,D)]`

我看到有一个 unzip 用于成对，一个 unzip3 用于三胞胎，但是如何解构一对`Tuple2`OR 一个`Tuple4`以便进行多重分配？我将相应地调整下面的集合类型，但无论哪一个适用于 1 步多分配都可以。

```
// foo can be a List[(A,B,C,D)] OR List[( (A,B),(C,D) )]
val(a,b,c,d) = foo.unzip 
```

这有效，但被黑了

```
val(a,b,c_d) foo.unzip3 // foo is a List[(A,B,(C,D))] 
```

因为我最终不得不`c_d._1`和`c_d._2`，我试图通过多重分配变量来避免的符号

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T12:50:37.150

也许这是不言而喻的，但如果你不介意多个步骤，有一种简单的方法可以做到这一点：

```
val foo = List((1 -> "w", 'x -> 2.0), (101 -> "Y", 'Z -> 3.0))
val (p, q) = foo.unzip
val (a, b) = p.unzip
val (c, d) = p.unzip 
```

如果你真的想要一个单行，你将不得不求助于 Scalaz 之类的东西，它`Bifunctor`为元组提供了一个实例，可以让你编写这个，例如：

```
 import scalaz._, Scalaz._

 val ((a, b), (c, d)) = foo.unzip.bimap(_.unzip, _.unzip) 
```

这与上面的版本基本相同，但是`bimap`让我们可以在一行中完成所有操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T16:27:39.430

You don't actually need any implicit conversions here. The trick is to take advantage of custom extractor objects, like so:

```
object Unzipped4 {

  def unapply[A, B, C, D](ts: List[(A, B, C, D)]): Some[(List[A], List[B], List[C], List[D])] =
    Some((ts map _._1, ts map _._2, ts map _._3, ts map _._4))

} 
```

You then use it like this:

```
val Unzipped4(as, bs, cs, ds) = foo 
```

You could actually expand this to an arbitrary `Product` by using the dynamic access methods on that class, but you'd lose some type safety in the process.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T18:41:32.570

除了我玩过的其他很棒的答案之外，我还考虑过嵌套和通用解压缩。我的方法使用类型类并且像元组一样失去了数量和类型安全性`productIterator`。也许有人可以使用`HList`from [shapeless](https://github.com/milessabin/shapeless)来调整它以进行救援。还必须实现我的库以`unzip`在集合上使用的 pimp 以返回正确的（相同的）集合类型`unzip`被调用并摆脱`Iterable`，但我在这里省略了这一点，仅显示嵌套的 arity-generic 解压缩的想法。如果给定类型没有具体的隐式转换为 Unzippable ，也许可以使用某种*LowerPriorityImplicits*来隐式转换`A`为`Unzippable[A,A]`。

```
trait Unzippable[T, +Super] {
  def unzip(t: T): Iterable[Super]
}

implicit object IntUnzippable extends Unzippable[Int, Int] { def unzip(i: Int) = Seq(i) }
implicit object BooleanUnzippable extends Unzippable[Boolean, Boolean] { def unzip(b: Boolean) = Seq(b) }
implicit object StringUnzippable extends Unzippable[String, String] { def unzip(s: String) = Seq(s) }

implicit def Tuple2Unzippable[Super, A <: Super, B <: Super, S, S1 <: S, S2 <: S](implicit ev1: Unzippable[A, S1], ev2: Unzippable[B, S2]) = new Unzippable[(A, B), S] {
  def unzip(t: (A, B)): Iterable[S] = ev1.unzip(t._1) ++ ev2.unzip(t._2)
}

def unzip[A, Super](i: Iterable[A])(implicit ev: Unzippable[A, Super]): Iterable[Iterable[Super]] = i.map(ev.unzip).transpose

object MyTuple3 {
  def unapply[X](i: Iterable[X]): Option[(X, X, X)] = if (i.size != 3) return None else Some((i.head, i.drop(1).head, i.last))
}

val list = (1, ("A", true)) :: (2, ("B", false)) :: (3, ("C", true)) :: Nil
val MyTuple3(nums, letters, bools) = unzip(list)
println((nums, letters, bools)) // (List(1, 2, 3),List(A, B, C),List(true, false, true)) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-22T11:06:41.257

因为只有`unzip`and `unzip3`，你为什么不为此写一个扩展？像这样的东西应该可以工作（2.10代码）：

```
implicit class Unzip4[A,B,C,D](val xs: List[(A,B,C,D)]) extends AnyVal {
  def unzip4: (List[A], List[B], List[C], List[D]) = xs.foldRight[(List[A], List[B], List[C], List[D])]((Nil,Nil,Nil,Nil)) { (x, res) =>
    val (a,b,c,d) = x
    (a :: res._1, b :: res._2, c :: res._3, d :: res._4)
  }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-22T11:17:51.423

您可以添加自己的`unzip4`方法。

```
import scala.collection._
import generic._

class Unzipper[A, CC[X] <: GenTraversable[X]](s: GenericTraversableTemplate[A, CC]) {
  def unzip4[A1, A2, A3, A4](implicit asQuad: A => (A1, A2, A3, A4)): (CC[A1], CC[A2], CC[A3], CC[A4]) = {
    val b1 = s.genericBuilder[A1]
    val b2 = s.genericBuilder[A2]
    val b3 = s.genericBuilder[A3]
    val b4 = s.genericBuilder[A4]
    for (e <- s) {
      val (a, b, c, d) = asQuad(e)
      b1 += a
      b2 += b
      b3 += c
      b4 += d
    }
    (b1.result, b2.result, b3.result, b4.result)
  }
}

implicit def toUnzipper[A, CC[X] <: GenTraversable[X]](s: GenericTraversableTemplate[A, CC]) = new Unzipper(s)
implicit def t2t2Tot4[A1, A2, A3, A4](tt: ((A1, A2), (A3, A4))) = tt match { case ((a, b), (c, d)) => (a, b, c, d) }
implicit def t1t3Tot4[A1, A2, A3, A4](tt: (A1, (A2, A3, A4))) = tt match { case (a, (b, c, d)) => (a, b, c, d) }
implicit def t3t1Tot4[A1, A2, A3, A4](tt: ((A1, A2, A3), A4)) = tt match { case ((a, b, c), d) => (a, b, c, d) } 
```

用法：

```
scala> List((1, 2, 3, 4)).unzip4
res0: (List[Int], List[Int], List[Int], List[Int]) = (List(1),List(2),List(3),List(4))

scala> List((1, 2) -> (3, 4)).unzip4
res1: (List[Int], List[Int], List[Int], List[Int]) = (List(1),List(2),List(3),List(4))

scala> List(1 -> (2, 3, 4)).unzip4
res2: (List[Int], List[Int], List[Int], List[Int]) = (List(1),List(2),List(3),List(4))

scala> List((1, 2, 3) -> 4).unzip4
res3: (List[Int], List[Int], List[Int], List[Int]) = (List(1),List(2),List(3),List(4)) 
```

# perl - Perl 将上次运行时间写入文件

> ID：13009464
> 
> 赞同：1
> 
> 时间：2012-10-22T10:27:32.087
> 
> 标签：perl, date, timestamp

（perl 新手）

我正在尝试更新现有的 perl 脚本以在上次运行时存储在文件中，以便在下次运行时“自”该日期以来执行某些操作。

有没有一种安全的方法可以将它存储在一个文件中，然后我可以再次读入时间戳？

我发现了如何写文件

```
# Open for writing
open(MYFILE,">$filepath/$filename") || "> ERROR: Couldn't open file for writing\n";
print MYFILE $result;
close MYFILE; 
```

以及如何将时间作为字符串

```
my ($sec, $min, $hour, $day, $mon, $year) = localtime();
$LAST_RUN_DATETIME=strftime( "%Y/%m/%d %T", $sec, $min, $hour, $day, $mon, $year); 
```

谢谢你的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:37:49.707

我可能会写这样的东西：

```
open(my $handle, ">", "$filepath/$filename") or die "Couldn't open $file";
print $handle scalar(localtime());
close($handle); 
```

并且阅读它只是：

```
open(my $handle, "$filepath/$filename") or die "Couldn't open $file";
my $timestamp = <$handle>; 
```

该时间戳将采用以下形式：`(day of the week) mmm (day of the month) hh:mm:ss yyyy`

# javascript - 使用插座重新渲染 ApplicationView

> ID：13009470
> 
> 赞同：4
> 
> 时间：2012-10-22T10:27:50.667
> 
> 标签：javascript, ember.js

这个问题的简短版本：我正在尝试在发生特定事件（语言更改）时重新呈现我的 ApplicationView。ApplicationView 仅包含一个简单的插座，但是在重新渲染时，此插座仍然是空的。那么，重新渲染整个页面的正确方法是什么？

简化的应用程序代码（http://jsfiddle.net/6ZQh7/2/）：

```
Ember.Handlebars.registerHelper('t', function() {
    return App.get('language') == 'en' ? 'Hi there!' : 'Hallo!';
});
App = Ember.Application.create({
    language: 'en',
    ApplicationView: Em.View.extend({
        templateName: 'application'
    }),
    TestView: Em.View.extend({
        templateName: 'test'
    }),
    ApplicationController: Em.Controller.extend(),

    Router: Em.Router.extend({
        root: Em.Route.extend({
            toggleLanguage: function(router) {
                App.set('language', App.get('language') == 'en' ? 'nl' : 'en');

                // view.parentView resolves to the ApplicationView
                router.get('applicationController.view.parentView').rerender();
            },
            index: Em.Route.extend({
                route: '/',
                connectOutlets: function(router) {
                    router.get('applicationController').connectOutlet('test')
                }
            })
        })
    })
}); 
```

对应的HTML：

```
<script type="text/x-handlebars" data-template-name="application">
    <h1>{{t whatever}}</h1>
    {{outlet}}
</script>
<script type="text/x-handlebars" data-template-name="test">
    <h2>My Test Page</h2>
    <a href="#" {{action toggleLanguage}}>Toggle language.</a>
</script> 
```

做一些调试（嗯，一些；几个小时），~~似乎当重新渲染发生时，渲染插座的 ContainerView 没有上下文，这意味着没有 currentView（绑定到这个上下文） ，这意味着插座中根本没有渲染任何内容。~~从头开始，有一个工作环境；如果我`this.get('templateData.keywords.view.context')`使用调试器调用 ContainerView#init，我会得到应用程序控制器。有趣的是，`this.get('templateData.keywords.view.context.view')`（应该返回出口的视图）返回未定义，而 `this.get('templateData.keywords.view.context').get('view')*确实*返回视图。

上下文：我正在尝试编写一个国际化的 Ember.js 应用程序，其中包含一个简单的翻译助手，以当前设置的语言输出字符串（与 Ember-I18n 结合使用）。目前更改语言需要重新加载页面，因为这些语言字符串是未绑定的（我会说得对，因为语言更改很少见，并且为页面上的每个字符串创建绑定听起来是个坏主意）。但是，我只想重新渲染而不是重新加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:03:33.620

我通过向应用程序视图添加一个观察者方法解决了完全相同的问题，该方法监听语言设置的变化，如果检测到变化，则使用 rerender() 方法重新呈现视图。

我有一个语言控制器：

```
FLOW.languageControl = Ember.Object.create({
    dashboardLanguage:null,

    content:[
     Ember.Object.create({label: "English", value: "en"}),
     Ember.Object.create({label: "Dutch", value: "nl"}),
     Ember.Object.create({label: "Spanish", value: "sp"}),
     Ember.Object.create({label: "French", value: "fr"})],

    changeLanguage:function(){
      locale=this.get("dashboardLanguage.value");
      console.log('changing language to ',locale);

      if (locale == "nl") {Ember.STRINGS=Ember.STRINGS_NL;}
      else if (locale == "fr") {Ember.STRINGS=Ember.STRINGS_FR;}
      else if (locale == "sp") {Ember.STRINGS=Ember.STRINGS_SP;}
      else {Ember.STRINGS=Ember.STRINGS_EN;}
    }.observes('dashboardLanguage')
}); 
```

在车把文件中有一个下拉菜单：

```
<label>Dashboard language: {{view Ember.Select 
  contentBinding="FLOW.languageControl.content" 
  optionLabelPath="content.label" 
  optionValuePath="content.value" 
  selectionBinding="FLOW.languageControl.dashboardLanguage" }}
</label> 
```

还有一个（简化的）导航视图，它呈现顶部导航：

```
FLOW.NavigationView = Em.View.extend({
  templateName: 'navigation',
  selectedBinding: 'controller.selected',

  onLanguageChange:function(){
    this.rerender();
  }.observes('FLOW.languageControl.dashboardLanguage'),
}); 
```

当 navigationView 检测到语言更改（这是由用户从下拉框中选择语言引起的）时，navigationView 会重新呈现。

你可以在 Application 视图上做同样的事情，只是我只需要重新渲染导航视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:27:06.020

我有点给出基本方法，创建语言对象，如...

```
App.Languages = {};
App.availableLanguages = Em.A([App.Languages.En, App.Languages.Pirate]);

App.Languages.En = Em.Object.extend({
  languageName: "English",
  appName: "My application Name"
})

App.Languages.Pirate = Em.Object.extend({
  languageName: "Pirate",
  appName: "!!!Zzzz"
})

App.set('language', App.Languages.En); 
```

车把助手

```
Em.Handlebars.registerHelper('loc', function(key){
  currentLanguage = Ember.get('language');
  value = currentLanguage.get('key');
  return Ember.String.htmlSafe(value);
}) 
```

用法：

```
{{loc appName}} 
```

更改语言：页面顶部的下拉菜单，如

```
{{Ember.Select contentBinding=App.availableLanguages optionValuePath="content" optionLabelPath="content.languageName" selectionBinding="App.language"}} 
```

因此，当更改语言时，由于 ember 绑定，值会更新:)

# c# - 用 C# 编写服务器存储过程

> ID：13009474
> 
> 赞同：1
> 
> 时间：2012-10-22T10:27:58.443
> 
> 标签：c#, sql

我是 c# 新手，很难弄清楚这一点，

```
public UserNotificationFeed GetNotificationFeed(TenantInfo tenant, List<int> notificationId)
{
    UserNotificationFeed userNotificationFeed = new UserNotificationFeed();

    string sql = "select " + NotificationFieldList + " from UserNotificationFeed where MsgId = @MsgId";

    Database databaseObj = SocialDB.GetDataBase(tenant.ConnectionString, tenant.ProviderName);
    DbCommand commandObj = databaseObj.GetSqlStringCommand(sql);

    databaseObj.AddInParameter(commandObj, "MsgId", DbType.Int64, notificationId );

    using (IDataReader reader = databaseObj.ExecuteReader(commandObj))
    {
       while (reader.Read())
       {
          userNotificationFeed = new UserNotificationFeed();
          this.PopulateObject(userNotificationFeed, reader);
       }
    }

    return userNotificationFeed;
} 
```

我想要的是

```
string sql = "select " + NotificationFieldList + " from UserNotificationFeed where MsgId = @MsgId"; 
```

获取`MsgId`由 a 传递的 s列表`List<int> notificationId`。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:35:39.197

一个简单的方法，因为数据是`int`（因此注入安全）将只使用：

```
string sql = "select " + NotificationFieldList +
    " from UserNotificationFeed where MsgId in (" +
    string.Join(",", notificationId) + ")"; 
```

（并且不要添加参数）

如果您希望它完全参数化，这也是可能的，但更难（它需要灵活数量的参数）。不过，有些工具可以提供帮助。例如，使用[dapper](http://nuget.org/packages/Dapper)将是：

```
var rows = connection.Query("select " + NotificationFieldList +
    " from UserNotificationFeed where MsgId in @MsgId",
    new {MsgId = notificationId}).ToList(); 
```

在这里，dapper 将自动调整 SQL 并添加正确数量的参数。但是：dapper 不能直接使用`IDataReader`基于- 的`PopulateObject`方法（因为它*已经*填充了一些对象）。

# windows-8 - 在 MetroStyle 应用程序中删除 BackStack 条目

> ID：13009475
> 
> 赞同：1
> 
> 时间：2012-10-22T10:27:58.777
> 
> 标签：windows-8, windows-runtime, microsoft-metro

如何实现删除 Metro 风格应用程序中的 backStack 条目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:45:58.157

我发现这个答案很有用：

[如何清除框架的Backstack并重新开始](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/e73af16b-a90b-4ab0-885d-33d9252eb7e8)

编写自己的 NavigationService 并将导航状态存储在构造函数中。

```
string state;

public NavigationService(Frame mainFrame)
{
    state = mainFrame.GetNavigationState();

_mainFrame = mainFrame;
_mainFrame.Navigating += _mainFrame_Navigating;
} 
```

然后在服务上实现这个方法，在需要的时候调用它：

```
 public void ClearBackstack()
    {
        _mainFrame.SetNavigationState(state);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T16:29:57.467

```
frame.SetNavigationState("1,0"); 
```

将为您清除导航历史记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T10:50:39.647

这似乎是不可能的。如果您想完全清除后台堆栈（例如，如果您有一个“主页”按钮），您可以使用网格示例应用程序中的 LayoutAwarePage.cs 文件中提供的代码。

```
if (this.Frame != null)
{
    while (this.Frame.CanGoBack) this.Frame.GoBack();
} 
```

虽然这实际上并没有清除堆栈，但它确实将您带回程序的开始位置，并且列表中不会有更多的反向条目。如果您想通过按下按钮退出死胡同页面，您可以修改此行为以后退一些页面并有效地删除返回条目。

# c# - 在前一个方法的返回值上使用方法，C#

> ID：13009477
> 
> 赞同：0
> 
> 时间：2012-10-22T10:28:08.217
> 
> 标签：c#, .net

例如，我知道我能够做到这一点：

```
string x = Int32.Parse("123").ToString(); 
```

代替：

```
int y = Int32.Parse("123");
string x = y.ToString(); 
```

因为`Parse()`方法返回和整数，然后我可以`ToString()`在整数上使用方法。但是这种技术叫什么？我无法用语言来谷歌以获取更多信息。是 .NET/高级编程的 yummies，还是你也可以用低级编程语言来做到这一点，比如 C？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T10:29:19.793

它被称为方法链。有关更多信息，请参见此处：[方法链](http://en.wikipedia.org/wiki/Method_chaining)

我认为从上述 wiki 中得到的重要一点是：

不需要方法链接。它只会潜在地提高可读性并减少源代码的数量。它是构建[Fluent Interface](http://en.wikipedia.org/wiki/Fluent_interface)背后的核心概念。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T10:29:44.783

这就是所谓的**方法链**。这是详细信息：

[通用方法链](http://interactiveasp.net/blogs/spgilmore/archive/2009/04/07/universal-method-chaining-in-c-3-5.aspx) 

您可能希望看到这篇关于 LINQ 的文章

[了解LINQ to Objects（二）方法链](http://weblogs.asp.net/dixin/archive/2010/03/08/understanding-linq-to-objects-2-method-chaining.aspx)

*文章中的示例：*

```
int[] source = new int[] { 0, 1, -2, 3, 24, 6, 3 };
var results = source.Where(item => item > 0 && item < 10)
                    .OrderBy(item => item)
                    .Select(item => item.ToString(CultureInfo.InvariantCulture)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T10:30:04.253

将其称为“方法链”，将其输入 Google，您应该会得到一些有用的结果！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T10:34:32.507

它是方法链，更极端地可以用来创建流畅的接口。这是（方法链所述）LINQ 的基础。

由于这提供了可能发生异常的更大表面积，因此如果您需要在此过程中检查您的假设（检查空值等），则不建议这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T10:47:25.157

是的.. 正如每个人所说，这是一种方法链接。如果你注意到的话，这甚至存在于 jQuery 中。

$('#id').show(300).html('XYZ').hide(500);

# flash - 在 Flash 中更改背景颜色

> ID：13009478
> 
> 赞同：2
> 
> 时间：2012-10-22T10:28:12.267
> 
> 标签：flash, actionscript

我想在时间大于 100 时更改 Flash 文档中的背景颜色。我已经创建了一个计数器并将其分配为影片剪辑。我目前的代码是：

```
time--;

//this is for motion tween

if (time>0) {
    gotoAndPlay(2);
}   

if (time == 0) {
    fscommand("quit");
    stop();
} 
```

我试图添加

```
if (time>100) {setStyle("backgroundColor", #FFFFFF);} 
```

但它没有用。

你能提供任何线索来解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T17:52:34.533

100 秒？你有第二帧的电影剪辑，我假设它具有所需的颜色。因此，第一帧中的代码将是：

```
setTimeout(function () : void {
    myMovieClipName.gotoAndStop(2);
}, 100000); // 100 * 1000 ms 
```

其中 myMovieClipName 是您的电影剪辑的名称，请在舞台上为其命名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:53:17.150

我不知道 setStyle 是什么，如果它是您自己的功能，您可以为我们发布方法主体吗？无论如何都是错误的，因为 AS3 无法识别以哈希符号开头的数字，您需要以 0x 开头的十六进制数字（见下文）

无论如何，假设它是一个实际不存在的假定本机函数，要更改阶段（即 Flash），请使用：

```
stage.color = 0xFFFFFF; 
```

要更改嵌入的 HTML 页面的背景，请调用：

```
ExternalInterface.call("ELEMENT.style.backgroundColor = '#ffffff'; "); 
```

...其中 ELEMENT 是对您希望更改的元素的引用，即 body、div 等

无论如何，您的条件逻辑令人困惑，如果以上内容没有帮助，您可以发布更多代码以便我们了解实际发生的情况吗？谢谢。

**编辑**

这不是我编写这样一个应用程序的方式，但为了适应您现有的代码，这个条件将起作用（假设您在根时间轴上编码）：

```
if(time < 10)
{
     stage.color = 0xFF0000;
} 
```

# web-services - 春季安全

> ID：13009479
> 
> 赞同：0
> 
> 时间：2012-10-22T10:28:16.523
> 
> 标签：web-services, spring, spring-security

我试图在我的应用程序中使用spring security来开发restful web服务，而不是直接向j_spring_security_check发送请求，以便我可以提供与web服务相同的url来授权用户名和密码。

目前我正在使用以下请求模式：

URL：“http://localhost:8080/CabFMS/j_spring_security_check” 内容类型：application/x-www-form-urlencoded 正文：{'j_username':'user','j_password':'123'}

响应：是错误的凭据

我不确定 Content-type 和 body 参数。请提供建议。要发送请求，我正在使用 REST 客户端

塔伦古普塔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:33:53.793

正如您正确注意到的`j_spring_security_checks`预期[`application/x-www-form-urlencoded`内容](http://en.wikipedia.org/wiki/POST_%28HTTP%29)一样，因此您需要将其编码为：

```
j_username=user&j_password=123 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-09T12:36:06.437

您的请求模式应该是：

/j_spring_security_check?j_username=user&j_password=123

使用方法“POST”类型。

除此之外，您可以通过在属性中配置替代文本来更改请求操作和参数文本“j_spring_security_check”和“j_username”，“j_password”：

登录处理 url、用户名参数、密码参数

安全配置 xml 文件中的 spring“form-login”标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-16T02:54:01.710

为此创建一个**AuthenticationSuccessHadler**，在 authenticationSuccess 方法中，返回 base64 编码的授权标头，格式为**username:password**

然后，在每个请求上，将标头设置为**Basic yourtokenhere**

# android - android邮件发送，html格式化

> ID：13009481
> 
> 赞同：1
> 
> 时间：2012-10-22T10:28:37.880
> 
> 标签：android, html, email

我用这个[http://www.jondev.net/articles/Sending_Emails_without_User_Intervention_%28no_Intents%29_in_Android](http://www.jondev.net/articles/Sending_Emails_without_User_Intervention_%28no_Intents%29_in_Android)在后台发送电子邮件。发送邮件一切正常，但我还有另一个问题。我有想要在电子邮件表格中设置的字符串。我试图使电子邮件文本像这样“名称....等等。但是当我收到邮件时，我只有文本，我没有格式化表格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:44:13.480

好的，我找到了。我必须使用 setContent(mailText, "text/html; charset=utf-8"); 而不是设置文本

# css - 如何正确地将“？i#efix”添加到rails中的字体路径？

> ID：13009484
> 
> 赞同：0
> 
> 时间：2012-10-22T10:28:40.703
> 
> 标签：css, ruby-on-rails, asset-pipeline, font-face

[建议](http://www.fontspring.com/blog/fixing-ie9-font-face-problems)添加到.eot`?#iefix`字体路径的末尾以修复另一个 IE 不稳定行为：

```
@font-face {
    font-family: 'MyWebFont';
    src: url('webfont.eot'); /* IE9 Compat Modes */
    src: url('webfont.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
         url('webfont.woff') format('woff'), /* Modern Browsers */
         url('webfont.ttf')  format('truetype'), /* Safari, Android, iOS */
         url('webfont.svg#svgFontName') format('svg'); /* Legacy iOS */
    } 
```

**`asset_path`是否可以使用，但没有丑陋的** **黑客****来做到这一点？**`+ "?#iefix"`

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T20:07:35.547

这就是我在项目中使用它的方式。适用于所有浏览器。将它分成两个`@font-face`声明很重要。

我的`fonts.scss`：

```
@font-face {
  font-family: 'Webfont';
  src: font_url('webfont.eot?') format('embedded-opentype');
  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: 'Webfont';
  src: font_url('webfont.woff') format('woff'),
       font_url('webfont.ttf') format('truetype'),
       font_url('webfont.svg#Webfont') format('svg');
  font-weight: normal;
  font-style: normal;
} 
```

请注意，如果你想使用 SASS 助手`font_url`，你必须把你的字体放在`assets/fonts`目录下。

根据我的经验，只添加`?`>=IE8 的字体路径，而不是任何开始的`?#`工作。但是，如开头所述，将`@font-face`IE 的声明分开。对于 SASS 助手中的使用，只需将其放在资产名称的末尾即可。它不会破坏辅助处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T13:04:34.393

请试试这个：

**重要提示：** 请验证您的字体名称是否已正确添加到所有位置。请验证是否所有字体文件都可用。

**添加Production.rb：**

```
config.host_path = "http://---site url--" 
```

**在 CSS 中添加以下内容：**

```
@font-face {
    font-family: 'Webfont';
    src: url('<%= Rails.application.config.host_path %>/assets/fonts/Webfont.eot');
    src: url('<%= Rails.application.config.host_path %>/assets/fonts/Webfont.eot?#iefix') format('embedded-opentype'),
         url('<%= Rails.application.config.host_path %>/assets/fonts/Webfont.woff') format('woff'),
         url('<%= Rails.application.config.host_path %>/assets/fonts/Webfont.ttf') format('truetype'),
         url('<%= Rails.application.config.host_path %>/assets/fonts/Webfont.svg#Webfont') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

* * *

如果您不想要硬编码的字体文件路径，那么只需在**css**中使用以下内容。

```
@font-face {
    font-family: 'Webfont';
    src: url('Webfont.eot');
    src: url('Webfont.eot?#iefix') format('embedded-opentype'),
         url('Webfont.woff') format('woff'),
         url('Webfont.ttf') format('truetype'),
         url('Webfont.svg#Webfont') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

我们需要指定访问字体文件的完整 URL 路径。我希望它会有所帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T08:14:29.860

看来`asset_path` **已经考虑到了这一点**。所以：

```
asset_path 'webfont.eot?#iefix' 
```

开箱即用！我的错...**

# java - 如果在 AChartEngine Android 中将条形间距设置为负值，SeriesSelection 将获得空值

> ID：13009485
> 
> 赞同：1
> 
> 时间：2012-10-22T10:28:42.203
> 
> 标签：java, android, achartengine

我正在开发一个 android 应用程序并使用 AChartEngine 进行图表绘制。条形图是根据来自服务器的动态数据绘制的。如果只绘制一个条，它的宽度非常小，为了使其更宽，我应用了在单个条的情况下，条间距设置为负值以使其看起来更宽的条件。单击该栏时，我正在显示一个 toast，它使用这样的 AChartEngine 内置函数获取系列值和点。

```
SeriesSelection seriesSelection = mChartView.getCurrentSeriesAndPoint(); 
```

条间距设置为

`renderer.setBarSpacing(0.6f);`在多个酒吧的情况下

`renderer.setBarSpacing(-1.5f);`在单条的情况下。

现在点击栏 seriesSelection 总是得到空值，因此不显示吐司。如果条间距为正值，那么即使对于单个条，吐司也可以正常工作，但条本身会很薄。在单条和吐司精细加工的情况下如何使条更宽？

# android - 0000000000000001.db 文件是什么？

> ID：13009486
> 
> 赞同：2
> 
> 时间：2012-10-22T10:28:42.613
> 
> 标签：android, database, cordova

我正在尝试使用 phonegap 在我的 android 应用程序中使用预先填充的 sqlite 数据库。在[这个博客](http://gauravstomar.blogspot.co.uk/2011/08/prepopulate-sqlite-in-phonegap.html?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3a%20GauravSTomarBootstrappingIntelligence%20%28Gaurav%20S%20Tomar%20%3a%20Bootstrapping%20Intelligence%29)之后，我明白了如何开始。现在我可以打开数据库，我的表在那里但没有填充，我所有的选择都是空的，我认为问题出在这个文件 0000000000000001.db 上。有人可以解释为什么需要它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T15:27:15.207

文件 0000000000000001.db 是我的数据库。文件 databases.db 将数据库文件 (0000000000000001.db) 与数据库名称相关联。如果您在该应用程序中有更多数据库，它们将被订购：0000000000000002.db,0000000000000003.db,0000000000000004.db 等。

# django - 多语言的 url 问题

> ID：13009491
> 
> 赞同：2
> 
> 时间：2012-10-22T10:29:06.390
> 
> 标签：django, multilingual, django-urls, django-multilingual

我在我的项目中使用了多种语言的概念，一切正常。

但我对我的网址有一些疑问。

当我使用这个*网址* **www.asd.com/reg/?lang=es**时，它会以西班牙语形式显示数据。

但是如果我使用这个*网址* **www.asd.com/reg/lang=es**，那么它不会以西班牙语显示数据。

两个url的区别是**“？”** **，所以任何人都可以建议我在没有这个“？”**的情况下完成我的任务。

 **谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:31:20.607

`?`如果您的 URL 中没有 ，则无法发布变量。（[更多信息在这里](https://stackoverflow.com/questions/3477333/what-is-the-difference-between-post-and-get)）

如果您想在没有 GET-Parameter ( `?lang`) 的情况下对其进行管理，则需要重写[我发布](https://stackoverflow.com/questions/12907870/issues-with-translating-the-strings/12908001#12908001)给您的中间件。您还需要修改您的`urls.py`.

然后，您可以实现的只是`www.asd.com/reg/lang/es`或者`http://es.asd.com/reg`如果您熟悉子域。**

# reporting-services - 如何避免 SSRS PDF 文件中的空白页？

> ID：13009494
> 
> 赞同：1
> 
> 时间：2012-10-22T10:29:26.880
> 
> 标签：reporting-services

正在创建一个报告项目。其中有一份名为 (Report1.rdl) 的普通报告和一份名为 (Report2.rdl) 的子报告。

通过参数传递值，我在子报告中调用主报告五次。所以我也有五个参数。当参数值为 0 时，相应的报告将不会显示在子报告中。但事情是，当我这样做时，最后和页面之间也会出现空白页。

所以你能帮我解决这个问题吗？我已经检查了主报告的大小和清晰的设计。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T05:10:46.500

您以错误的顺序“调用”报告。

主要报告“调用”子报告，而不是您目前的方式。因此，您需要将子报告嵌入到主报告中。正如MSDN 上的详细[说明：](http://msdn.microsoft.com/en-us/library/ms159837%28v=sql.100%29.aspx)

> “子报表是在主报表正文中显示另一个报表的报表项。从概念上讲，子报表类似于网页中的框架。它用于在报表中嵌入报表。”

# c++ - CMake 生成的 DLL 和奇怪重复的模板 (C++) 的行为不正确

> ID：13009497
> 
> 赞同：4
> 
> 时间：2012-10-22T10:29:30.157
> 
> 标签：c++, templates, cmake

我在 Windows 上遇到了 CMake 生成的 DLL 文件的一个令人困惑的问题。在我的库中，我使用 Curiously Recurring Template Pattern 给某些类一个唯一的 ID 号：

```
// da/Attribute.h:

#ifndef DA_ATTRIBUTE_H
#define DA_ATTRIBUTE_H

namespace da {

typedef unsigned int AttributeId;

class AttributeBase {
public:
    virtual AttributeId getTypeId() const=0;

protected:
    /** Static ID counter.  Every class that derives da::AttributeBase is
        assigned an increment of this counter as its type ID number */
    static AttributeId sNextId;

};

template <class Derived>
class Attribute : public AttributeBase {
private:
    static AttributeId msTypeId;

public:
    Attribute() {
        if (msTypeId == 0) {
            msTypeId = ++sNextId;
        }
    }

    virtual ~Attribute() {

    }

    /** For static contexts */
    static AttributeId typeId() {
        if (msTypeId == 0) {
            msTypeId = ++sNextId;
        }

        return msTypeId;
    }

    AttributeId getTypeId() const {
        return typeId();
    }

};

template <class Derived> AttributeId Attribute<Derived>::msTypeId = 0;

}

#endif 
```

问题是，当我将 DLL 链接到可执行项目时，不同的 ID 方法似乎存在一些不一致。例如：

```
// Foo.h
struct Foo : public da::Attribute<Foo> {
    Foo() { }
}; 
```

...

```
// main.cpp
Foo *foo = new Foo;    

Foo->getTypeId() == 1 // True
Foo::typeId() == 1 // Should be true, but isn't.  Foo::typeId() == 2 
```

通过 GDB 运行，在 Foo::getTypeID() 中中断，**我发现“msTypeId”和“Foo::msTypeId”具有不同的内存地址。** 我勒个去。

不过，这只发生在 Foo 在 DLL 中定义时。（显然，仅在 Windows 7 中——我的 Debian 构建中没有这个问题）如果我在 main.cpp 中创建派生类，或者我只是将库中的所有代码编译到可执行文件中，跳过DLL 步骤完全，它可以正常工作。

一切都是使用 MSYS 和 MinGW 编译的，在 Windows 7 Home Premium 上使用 GCC 4.7。

这是图书馆的 CMakeLists.txt，以防我在那里搞砸了：

```
cmake_minimum_required(VERSION 2.6)
project(foo)

add_definitions(-std=c++0x)
set(CMAKE_BUILD_TYPE Debug)

set(sources
    Foo.cpp
)

add_library(foo SHARED ${sources}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:56:10.950

您必须从共享库中导出类型。这是使用[`__declspec(dllexport)`和`__declspec(dllimport)`](http://msdn.microsoft.com/en-us/library/3y1sfaz2.aspx)装饰器完成的。通读 MSDN 文档；它相当复杂。

`__declspec(dllexport)`由于在构建库和编译使用它的代码时需要具有标头`__declspec(dllimport)`，因此通常定义一个符号，通常称为`LIBRARYNAME_EXPORT`#ifdef，具体取决于是否`LIBRARYNAME_EXPORTS`定义。

CMake`target_EXPORTS`在构建（共享）库时自动定义。可以通过设置`DEFINE_SYMBOL`目标属性来覆盖它。

Unix 选择不同的路径，默认情况下导出和导入共享库中的所有符号（静态和显式隐藏的除外）。由于需要解析更多符号，这会导致一些性能损失，但它更易于使用（无需更改即可从静态切换到共享库）并且更灵活（即您可以覆盖共享库中的符号，这你不能在 Windows 中做）。

# javascript - 如何调用javascript变量

> ID：13009498
> 
> 赞同：0
> 
> 时间：2012-10-22T10:29:29.447
> 
> 标签：javascript, ruby

```
var img = '<textarea cols="60" id=' + div_id + ' name=handle[' + required_name + '] rows="7">';
img = img + '<div id="fullscreen-button-'+id+'" style="position:relative;left:220px;width:24px;height:24px;cursor:pointer;background-image:url(../assets/resize_full.png);" onclick="fullscreen('+'"'+path+'"'+')"></div>';
img = img + '<embed src=' + path + ' width="" height="" />';
img = img + '</textarea>'; 
```

============================================

**输出是**

```
<div id="fullscreen-button-0" style="position:relative;left:220px;width:24px;height:24px;cursor:pointer;background-image:url(../assets/resize_full.png);" onclick="fullscreen(" upload microsite micro_1 calcsmall.swf')'></div>

onclick="fullscreen(" upload microsite micro_1 calcsmall.swf')' 
```

**我想**

**`onclick="fullscreen('upload/microsite/micro_1/calcsmall.swf')"`**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:32:27.023

```
img = img + '<div id="fullscreen-button-'+id+'" style="position:relative;left:220px;width:24px;height:24px;cursor:pointer;background-image:url(../assets/resize_full.png);" onclick="fullscreen(\''+path+'\')"></div>'; 
```

# android - Android中的WIN DEATH错误？

> ID：13009499
> 
> 赞同：19
> 
> 时间：2012-10-22T10:29:30.053
> 
> 标签：android, android-activity

有时，我的应用程序被冻结，然后它就崩溃了。

我阅读了系统日志，并在系统日志的最后几行看到我的活动出现“WIN DEATH”错误。

有人可以告诉我原因并告诉我解决方案吗？

非常感谢！

这是系统日志：

```
08-17 08:34:00.091 E/WifiService(  149): ***WAPI : readNetworkVariables testing for WAPI
08-17 08:34:00.101 E/WifiService(  149): ***WAPI : readNetworkVariables testing for WAPI
08-17 08:34:00.101 E/WifiService(  149): ***WAPI : readNetworkVariables testing for WAPI
08-17 08:34:00.111 E/WifiService(  149): ***WAPI : readNetworkVariables testing for WAPI
08-17 08:34:00.121 E/WifiService(  149): ***WAPI : readNetworkVariables testing for WAPI
08-17 08:34:00.131 E/WifiService(  149): ***WAPI : readNetworkVariables testing for WAPI
08-17 08:34:00.131 E/WifiService(  149): ***WAPI : readNetworkVariables testing for WAPI
08-17 08:34:00.141 E/WifiService(  149): ***WAPI : readNetworkVariables testing for WAPI
08-17 08:34:00.151 E/WifiService(  149): ***WAPI : readNetworkVariables testing for WAPI
08-17 08:34:00.151 E/WifiService(  149): ***WAPI : readNetworkVariables testing for WAPI
08-17 08:34:00.161 E/WifiService(  149): ***WAPI : readNetworkVariables testing for WAPI
08-17 08:34:00.171 E/WifiService(  149): ***WAPI : readNetworkVariables testing for WAPI
08-17 08:34:00.171 E/WifiService(  149): ***WAPI : readNetworkVariables testing for WAPI
08-17 08:34:00.181 E/WifiService(  149): ***WAPI : readNetworkVariables testing for WAPI
08-17 08:34:00.191 E/WifiService(  149): ***WAPI : readNetworkVariables testing for WAPI
08-17 08:34:00.191 E/WifiService(  149): ***WAPI : readNetworkVariables testing for WAPI
08-17 08:34:00.211 E/WifiService(  149): ***WAPI : readNetworkVariables testing for WAPI
08-17 08:34:01.692 I/ActivityManager(  149): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.HOME] flg=0x10200000 cmp=com.dell.launcher/.Launcher }
08-17 08:34:01.711 D/StatusBar(  149): nAnimY < mStatusBarView.getHeight()
08-17 08:34:01.731 W/InputManagerService(  149): Ignoring hideSoftInput of: com.android.internal.view.IInputMethodClient$Stub$Proxy@46f51200
08-17 08:34:01.751 I/ActivityManager(  149): No longer want com.android.vending (pid 724): hidden #16
08-17 08:34:03.141 I/ActivityManager(  149): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.android.browser/.BrowserActivity bnds=[289,313][375,390] }
08-17 08:34:03.521 W/InputManagerService(  149): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@46ee34f8 (uid=10006 pid=893)
08-17 08:34:03.521 W/InputManagerService(  149): Client not active, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@46f02ef0
08-17 08:34:08.301 I/ActivityManager(  149): Starting activity: Intent { act=android.intent.action.VIEW dat=http://vnexpress.net/ flg=0x10000000 cmp=com.android.browser/.BrowserActivity (has extras) }
08-17 08:34:43.361 I/ActivityManager(  149): Starting activity: Intent { act=android.intent.action.VIEW cat=[android.intent.category.BROWSABLE] dat=http://vnexpress.net/gl/the-gioi/phan-tich/2012/08/trung-quoc-se-bi-co-lap-neu-bat-hop-tac-ve-bien-dong-1/ cmp=com.android.browser/.BrowserActivity }
08-17 08:34:43.911 I/ActivityManager(  149): Starting activity: Intent { act=android.intent.action.VIEW cat=[android.intent.category.BROWSABLE] dat=http://vnexpress.net/gl/the-gioi/phan-tich/2012/08/trung-quoc-se-bi-co-lap-neu-bat-hop-tac-ve-bien-dong-1/ cmp=com.android.browser/.BrowserActivity }
08-17 08:35:06.701 I/ActivityManager(  149): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.HOME] flg=0x10200000 cmp=com.dell.launcher/.Launcher }
08-17 08:35:06.711 D/StatusBar(  149): nAnimY < mStatusBarView.getHeight()
08-17 08:35:06.751 W/InputManagerService(  149): Ignoring hideSoftInput of: com.android.internal.view.IInputMethodClient$Stub$Proxy@47017a48
08-17 08:35:10.341 I/ActivityManager(  149): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=i3.mobile1/i3.mobile.dvrremote.screen.WelcomeScreen }
08-17 08:35:10.361 D/StatusBar(  149): nAnimY < mStatusBarView.getHeight()
08-17 08:35:16.144 W/WindowManager(  149): Key dispatching timed out sending to i3.mobile1/i3.mobile.dvrremote.screen.ConnectScreen
08-17 08:35:16.144 W/WindowManager(  149): Previous dispatch state: null
08-17 08:35:16.144 W/WindowManager(  149): Current dispatch state: {{null to Window{47004958 i3.mobile1/i3.mobile.dvrremote.screen.ConnectScreen paused=false} @ 1345167316145 lw=Window{47004958 i3.mobile1/i3.mobile.dvrremote.screen.ConnectScreen paused=false} lb=android.os.BinderProxy@46e87e58 fin=false gfw=true ed=true tts=0 wf=false fp=false mcf=Window{47004958 i3.mobile1/i3.mobile.dvrremote.screen.ConnectScreen paused=false}}}
08-17 08:35:16.421 E/ActivityManager(  149): ANR in i3.mobile1i3.mobile1(pid: 941) (i3.mobile1/i3.mobile.dvrremote.screen.ConnectScreen)
08-17 08:35:16.421 E/ActivityManager(  149): Reason: keyDispatchingTimedOut
08-17 08:35:16.421 E/ActivityManager(  149): Load: 5.13 / 5.05 / 3.69
08-17 08:35:16.421 E/ActivityManager(  149): CPU usage from 5531ms to 13ms ago:
08-17 08:35:16.421 E/ActivityManager(  149):   system_server: 2% = 1% user + 1% kernel / faults: 35 minor 19 major
08-17 08:35:16.421 E/ActivityManager(  149):   android.browser: 1% = 0% user + 0% kernel / faults: 21 minor 2 major
08-17 08:35:16.421 E/ActivityManager(  149):   m.android.phone: 0% = 0% user + 0% kernel / faults: 48 minor 2 major
08-17 08:35:16.421 E/ActivityManager(  149):   e.process.gapps: 0% = 0% user + 0% kernel / faults: 21 minor 1 major
08-17 08:35:16.421 E/ActivityManager(  149):   m.dell.launcher: 0% = 0% user + 0% kernel / faults: 20 minor
08-17 08:35:16.421 E/ActivityManager(  149):   events/0: 0% = 0% user + 0% kernel
08-17 08:35:16.421 E/ActivityManager(  149):   auo_touchscreen: 0% = 0% user + 0% kernel
08-17 08:35:16.421 E/ActivityManager(  149):   d.process.acore: 0% = 0% user + 0% kernel / faults: 23 minor
08-17 08:35:16.421 E/ActivityManager(  149):   m.android.music: 0% = 0% user + 0% kernel / faults: 219 minor 1 major
08-17 08:35:16.421 E/ActivityManager(  149):   com.oem.lota: 0% = 0% user + 0% kernel / faults: 53 minor 1 major
08-17 08:35:16.421 E/ActivityManager(  149):   ndroid.dellsync: 0% = 0% user + 0% kernel / faults: 43 minor
08-17 08:35:16.421 E/ActivityManager(  149):   cpanda.aquapets: 0% = 0% user + 0% kernel / faults: 61 minor
08-17 08:35:16.421 E/ActivityManager(  149):   ndroid.settings: 0% = 0% user + 0% kernel / faults: 14 minor
08-17 08:35:16.421 E/ActivityManager(  149):   lite.dellstreak: 0% = 0% user + 0% kernel / faults: 25 minor
08-17 08:35:16.421 E/ActivityManager(  149):   d.photos:Remote: 0% = 0% user + 0% kernel / faults: 17 minor
08-17 08:35:16.421 E/ActivityManager(  149):   equicksearchbox: 0% = 0% user + 0% kernel / faults: 22 minor
08-17 08:35:16.421 E/ActivityManager(  149): TOTAL: 7% = 3% user + 3% kernel + 0% iowait
08-17 08:35:16.551 W/WindowManager(  149): No window to dispatch pointer action 1
08-17 08:35:16.591 W/WindowManager(  149): No window to dispatch pointer action 1
08-17 08:35:16.591 W/WindowManager(  149): No window to dispatch pointer action 0
08-17 08:35:16.591 W/WindowManager(  149): No window to dispatch pointer action 1
08-17 08:35:16.591 W/WindowManager(  149): No window to dispatch pointer action 0
08-17 08:35:16.591 W/WindowManager(  149): No window to dispatch pointer action 1
08-17 08:35:16.591 W/WindowManager(  149): No window to dispatch pointer action 0
08-17 08:35:16.591 W/WindowManager(  149): No window to dispatch pointer action 1
08-17 08:35:16.591 W/WindowManager(  149): No window to dispatch pointer action 0
08-17 08:35:16.881 W/WindowManager(  149): No window to dispatch pointer action 1
08-17 08:35:20.351 W/ActivityManager(  149): Launch timeout has expired, giving up wake lock!
08-17 08:35:20.361 W/ActivityManager(  149): Activity idle timeout for HistoryRecord{46e20d08 i3.mobile1/i3.mobile.dvrremote.screen.ConnectScreen}
08-17 08:35:48.398 W/WindowManager(  149): Key dispatching timed out sending to i3.mobile1/i3.mobile.dvrremote.screen.ConnectScreen
08-17 08:35:48.398 W/WindowManager(  149): Previous dispatch state: null
08-17 08:35:48.398 W/WindowManager(  149): Current dispatch state: {{null to Window{47004958 i3.mobile1/i3.mobile.dvrremote.screen.ConnectScreen paused=false} @ 1345167348400 lw=Window{47004958 i3.mobile1/i3.mobile.dvrremote.screen.ConnectScreen paused=false} lb=android.os.BinderProxy@46e87e58 fin=false gfw=true ed=true tts=0 wf=false fp=false mcf=Window{47004958 i3.mobile1/i3.mobile.dvrremote.screen.ConnectScreen paused=false}}}
08-17 08:35:48.841 E/ActivityManager(  149): ANR in i3.mobile1i3.mobile1(pid: 941) (i3.mobile1/i3.mobile.dvrremote.screen.ConnectScreen)
08-17 08:35:48.841 E/ActivityManager(  149): Reason: keyDispatchingTimedOut
08-17 08:35:48.841 E/ActivityManager(  149): Load: 5.28 / 5.11 / 3.76
08-17 08:35:48.841 E/ActivityManager(  149): CPU usage from 32415ms to 58ms ago:
08-17 08:35:48.841 E/ActivityManager(  149):   system_server: 6% = 4% user + 1% kernel / faults: 840 minor 1 major
08-17 08:35:48.841 E/ActivityManager(  149):   android.browser: 1% = 1% user + 0% kernel / faults: 109 minor
08-17 08:35:48.841 E/ActivityManager(  149):   .oem.logservice: 1% = 1% user + 0% kernel / faults: 1378 minor
08-17 08:35:48.841 E/ActivityManager(  149):   m.dell.launcher: 0% = 0% user + 0% kernel / faults: 74 minor
08-17 08:35:48.841 E/ActivityManager(  149):   ndroid.settings: 0% = 0% user + 0% kernel / faults: 72 minor
08-17 08:35:48.841 E/ActivityManager(  149):   mmcqd: 0% = 0% user + 0% kernel
08-17 08:35:48.841 E/ActivityManager(  149):   sensors_daemon: 0% = 0% user + 0% kernel
08-17 08:35:48.841 E/ActivityManager(  149):   e.process.gapps: 0% = 0% user + 0% kernel / faults: 34 minor
08-17 08:35:48.841 E/ActivityManager(  149):   mmcqd: 0% = 0% user + 0% kernel
08-17 08:35:48.841 E/ActivityManager(  149):   cpanda.aquapets: 0% = 0% user + 0% kernel / faults: 7 minor
08-17 08:35:48.841 E/ActivityManager(  149):   kswapd0: 0% = 0% user + 0% kernel
08-17 08:35:48.841 E/ActivityManager(  149):   d.process.acore: 0% = 0% user + 0% kernel / faults: 42 minor
08-17 08:35:48.841 E/ActivityManager(  149):   events/0: 0% = 0% user + 0% kernel
08-17 08:35:48.841 E/ActivityManager(  149):   kjournald: 0% = 0% user + 0% kernel
08-17 08:35:48.841 E/ActivityManager(  149):   ksdioirqd/mmc1: 0% = 0% user + 0% kernel
08-17 08:35:48.841 E/ActivityManager(  149):   oid.inputmethod: 0% = 0% user + 0% kernel / faults: 25 minor 1 major
08-17 08:35:48.841 E/ActivityManager(  149):   m.android.phone: 0% = 0% user + 0% kernel / faults: 1 minor
08-17 08:35:48.841 E/ActivityManager(  149):   equicksearchbox: 0% = 0% user + 0% kernel / faults: 1 minor
08-17 08:35:48.841 E/ActivityManager(  149):   auo_touchscreen: 0% = 0% user + 0% kernel
08-17 08:35:48.841 E/ActivityManager(  149):   wpa_supplicant: 0% = 0% user + 0% kernel
08-17 08:35:48.841 E/ActivityManager(  149):   viders.calendar: 0% = 0% user + 0% kernel / faults: 35 minor
08-17 08:35:48.841 E/ActivityManager(  149):   d.process.media: 0% = 0% user + 0% kernel / faults: 18 minor
08-17 08:35:48.841 E/ActivityManager(  149):   m.android.music: 0% = 0% user + 0% kernel / faults: 1 minor
08-17 08:35:48.841 E/ActivityManager(  149):   ndroid.dellsync: 0% = 0% user + 0% kernel / faults: 1 minor
08-17 08:35:48.841 E/ActivityManager(  149):   .packagechecker: 0% = 0% user + 0% kernel / faults: 20 minor
08-17 08:35:48.841 E/ActivityManager(  149):   com.netgate: 0% = 0% user + 0% kernel / faults: 273 minor
08-17 08:35:48.841 E/ActivityManager(  149):   .cooliris.media: 0% = 0% user + 0% kernel / faults: 25 minor
08-17 08:35:48.841 E/ActivityManager(  149):   lite.dellstreak: 0% = 0% user + 0% kernel / faults: 1 minor
08-17 08:35:48.841 E/ActivityManager(  149):   ogle.android.gm: 0% = 0% user + 0% kernel / faults: 30 minor 1 major
08-17 08:35:48.841 E/ActivityManager(  149):   d.apps.uploader: 0% = 0% user + 0% kernel / faults: 17 minor
08-17 08:35:48.841 E/ActivityManager(  149):   d.photos:Remote: 0% = 0% user + 0% kernel / faults: 1 minor
08-17 08:35:48.841 E/ActivityManager(  149):   o.android.oemec: 0% = 0% user + 0% kernel / faults: 15 minor
08-17 08:35:48.841 E/ActivityManager(  149):   i3.mobile1: 0% = 0% user + 0% kernel / faults: 16 minor 1 major
08-17 08:35:48.841 E/ActivityManager(  149): TOTAL: 32% = 11% user + 8% kernel + 12% iowait + 0% irq + 0% softirq
08-17 08:35:48.871 W/WindowManager(  149): No window to dispatch pointer action 1
08-17 08:35:48.901 W/WindowManager(  149): No window to dispatch pointer action 1
08-17 08:35:48.901 W/WindowManager(  149): No window to dispatch pointer action 0
08-17 08:35:48.901 W/WindowManager(  149): No window to dispatch pointer action 1
08-17 08:35:48.901 W/WindowManager(  149): No window to dispatch pointer action 0
08-17 08:35:48.901 W/WindowManager(  149): No window to dispatch pointer action 1
08-17 08:35:48.901 W/WindowManager(  149): No window to dispatch pointer action 0
08-17 08:35:49.392 W/WindowManager(  149): No window to dispatch pointer action 1
08-17 08:35:51.681 W/ActivityManager(  149):   Force finishing activity i3.mobile1/i3.mobile.dvrremote.screen.ConnectScreen
08-17 08:35:51.681 I/ActivityManager(  149): Killing i3.mobile1 (pid=941): user's request
08-17 08:35:51.701 I/WindowManager(  149): WIN DEATH: Window{46e6fdb0 i3.mobile1/i3.mobile.dvrremote.screen.WelcomeScreen paused=false}
08-17 08:35:51.711 I/ActivityManager(  149): Process i3.mobile1 (pid 941) has died.
08-17 08:35:51.721 I/WindowManager(  149): WIN DEATH: Window{47004958 i3.mobile1/i3.mobile.dvrremote.screen.ConnectScreen paused=true}
08-17 08:35:51.721 I/ActivityManager(  149): Start proc i3.mobile1 for activity i3.mobile1/i3.mobile.dvrremote.screen.WelcomeScreen: pid=1119 uid=10106 gids={1015, 3003} 
```

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-22T10:38:29.680

您的应用程序可能由于 ANR（应用程序无响应）而被终止。当您在 UI 线程中进行一些硬处理时，可能会发生这种情况。你可以在这里阅读更多：http: [//developer.android.com/guide/practices/responsiveness.html](http://developer.android.com/guide/practices/responsiveness.html)

只有一个解决方案：将所有繁重的工作转移到后台线程中，以便 UI 线程保持响应。

# java - 每 3 秒运行一次的线程

> ID：13009500
> 
> 赞同：2
> 
> 时间：2012-10-22T10:29:31.213
> 
> 标签：java, multithreading

我正在研究java中的多线程并创建了1个线程，代码如下：

```
class SampleThread extends Thread
    {
        int time;
        String name;
        boolean autocall;
        public SampleThread(int time, String name)
        {
            this.time = time;
            this.name = name;
        }

          public void run()
          { 
              try{
                  time = time +1;
                  updateView(time, name);
                  //sleep(3000);
              }catch(Exception e)
              {
                  e.printStackTrace();
              }
            //this.stop();
          }     
    } 
```

现在我想每 3 秒运行一次这个线程如何实现这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T10:30:50.567

我建议不要这样做。看看包中的*新*类（好吧，不是那么新）`java.util.concurrent`，尤其是[ScheduledThreadPoolExecutor](http://docs.oracle.com/javase/6/docs/api/index.html?java/util/concurrent/ScheduledThreadPoolExecutor.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T11:09:33.877

将 Java.util.Concurrent 用于新实现。如果您使用的是 JDK 1.4 或更低版本，请使用以下方法。

```
boolean isRunning = true;
public void run() {
        do {
           try {
                System.out.println("do what you want to do it here");
                Thread.sleep(3000l);
            } catch ( InterruptedException ie) {
               ie.printStackTrace();
           } catch (RunTimeException rte) {
               isRunning  = false; // terminate here if you dont expect a run time exception... 
           }
        } while ( isRunning );
    } 
```

# jquery - ASP.NET - 滚动时模型弹出问题

> ID：13009501
> 
> 赞同：3
> 
> 时间：2012-10-22T10:29:31.337
> 
> 标签：jquery, asp.net, css, jquery-ui

我有一个模型弹出窗口，它工作正常。我的页面中有滚动条，而不是（弹出）背景页面。当弹出窗口可见时，背景被禁用（默认功能）。在我的情况下，在滚动背景页面时，它会被禁用直到某个区域。我可以说它可以正常工作，我不滚动。如果我滚动它，我可以看到背景没有被禁用。我无法分享我的应用程序屏幕截图，但我发现了类似的东西。请参考下面的图片。 ![在此处输入图像描述](../Images/717e9a35a68a3e418115f119a58f66c9.png)

[http://www.stackprinter.com/topvoted](http://www.stackprinter.com/topvoted) 这是第一个链接的输出。所以弹出窗口变大了，乍一看，我们可以看到背景被禁用，向下滚动时，背景消失了，感觉就像一个正常的。我怎样才能防止这种情况？

我只能使用 jQuery。我正在使用 VS2012、ASP.NET 3.5 和 C#

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T05:41:14.503

做这样的事情即使在滚动时也能专注于你的模态：

```
 $('#dialogDiv').dialog({
        height: 600,
        width: 800,
        modal: true,
        resizable: false,
        draggable: false,
        hide: 'Fade',
        closeOnEscape: false,
        buttons:
        {
            'Ok': function () {
                $(this).dialog('close');
            }
        }
    });
    $(window).scroll(function () {
        $('#dialogDiv').dialog("option", "position", "center");
    }); 
```

# ruby-on-rails - 在 Rails 3.2 中使用通过 PUT 方法发送的文件

> ID：13009504
> 
> 赞同：0
> 
> 时间：2012-10-22T10:29:43.497
> 
> 标签：ruby-on-rails, ruby, put

我正在与第 3 方 API（echosign）集成，我需要指定的一件事是 callbackURL。

“一个可公开访问的 url，EchoSign 将使用最终签名的 PDF 执行 HTTP PUT 操作。使用标准嵌入式语法支持 HTTP 身份验证 - 即[http://username:password@your.server.com/path/to/file](http://username:password@your.server.com/path/to/file)。每次有新的协议事件时，EchoSign 还可以使用 HTTP GET ping 您的系统。如果您希望使用此选项，请联系 support@echosign.com。

这将如何在 Rails 中工作？

我打算公开一个控制器方法。这需要 PUT 方法吗？我将如何访问文件的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:38:00.917

是的，您需要为将使用上传的操作提供放置路径。

检查[http://guides.rubyonrails.org/form_helpers.html#what-gets-uploaded](http://guides.rubyonrails.org/form_helpers.html#what-gets-uploaded)以了解上传操作

输入 s.th. 像下面这样到你的 config/routes.rb 添加一个 PUT 路由到 eccording 控制器..

```
match '/mycallbackurl' => 'MyEchoController#upload', :via => :put 
```

# regex - Checkstyle 方法名规则 regexp 修改

> ID：13009509
> 
> 赞同：0
> 
> 时间：2012-10-22T10:29:52.840
> 
> 标签：regex, sonarqube, checkstyle

我正在运行声纳，而 checkstyle 有一个像这样的正则表达式规则：

```
^[a-z][a-zA-Z0-9]*$ 
```

我想修改它，以便允许一个或多个下划线。我将如何改变这个？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:32:04.583

这些是[字符类](http://www.regular-expressions.info/charclass.html)。

如果你想在任何地方允许下划线：

```
^[a-z_][a-zA-Z0-9_]*$ 
```

如果你想在除第一个字符之外的任何地方允许下划线：

```
^[a-z][a-zA-Z0-9_]*$ 
```

# django - 如何在 Django 中使用 Tornado 工作？这是一个很好的解决方案吗？

> ID：13009512
> 
> 赞同：3
> 
> 时间：2012-10-22T10:29:58.830
> 
> 标签：django, tornado, instagram

我有一个巨大的 django 项目，必须使用 Instagram API 及其订阅模型才能工作。对于订阅，我的服务器必须非常灵敏并准备好异步工作以设置挂钩，以便在用户发布后接收通知。或者这就是文档的建议。现在在那里使用 Tornado 会是一件好事吗？只是为了那一小部分，还是我可以使用 Django 有效地做到这一点？如果是这样，如何？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T05:34:19.097

您可以使用 Tornado 之上的 WSGI 容器来托管任何 WSGI 应用程序，包括 Django，但是，当您这样做时，WSGI 应用程序仍然作为阻塞应用程序运行，并且不会神奇地作为异步应用程序运行。因此，当 Django 处理一个请求时，在 Django 中无法同时处理另一个请求。此时的解决方案与运行单线程 WSGI 服务器没有太大区别，您需要有多个 Tornado 实例来处理并发请求。

所以一切都取决于你所说的异步是什么意思。你当然不能在 Django 中使用 Tornado 的直接异步编程 API。因此，通过 WSGI 接口将 Tornado 与 Django 一起使用并没有真正的好处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T11:59:05.367

[据我了解，您在Instagram 文档](http://instagram.com/developer/realtime/)中谈论这一段

> 您应该构建您的系统以接受每个有效负载的多个更新对象 - 尽管通常只会包含一个。此外，您应该在 2 秒超时内确认 POST - 如果您需要对接收到的信息进行更多处理，您可以在异步任务中执行此操作。

这是 Tornado 提供的另一种“异步”类型。我认为 Django + [Celery](http://celery.readthedocs.org/en/latest/)会更适合这个。

您的应用程序将以这种方式工作：

1.  您从 Instagram 接收 JSON 数据
2.  创建一个芹菜任务，例如`instagram_process.delay(request.raw_post_data)`或`instagram_process.delay(request.body)`根据您的 Django 版本
3.  使用 200 状态码响应 Instagram
4.  在`instagram_process`任务中，您完成所有流程 - 解析 JSON，将其存储为数据库以及您需要的任何其他内容。

如果要检查`X-Hub-Signature`，可以在步骤 1 和 2 之间进行，或者将此标头传递给任务并在步骤 4 验证签名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T21:11:43.203

您可以使用 tornado.wsgi 将 Tornado 与其他 WSGI 兼容框架集成。查看此演示项目以了解详细信息：

[https://github.com/bdarnell/django-tornado-demo](https://github.com/bdarnell/django-tornado-demo)

# maps - Scheme 中的可变参数函数（使用嵌套映射）

> ID：13009518
> 
> 赞同：1
> 
> 时间：2012-10-22T10:30:14.097
> 
> 标签：maps, scheme

我必须在 Scheme 中定义一个采用以下形式的可变参数函数：`(define (n-loop procedure [a list of pairs (x,y)])`其中对的列表可以是任意长度。

每对指定一个下限（包括）和上限（不包括）。也就是说，以下函数调用：`(n-loop (lambda (x y) (inspect (list x y))) (0 2) (0 3))`产生：

```
(list x y) is (0 0)
(list x y) is (0 1)
(list x y) is (0 2)
(list x y) is (1 0)
(list x y) is (1 1)
(list x y) is (1 2) 
```

现在，我之前曾发布过这个主题，并得到了很好的帮助。但是，我得到了新的指导方针来遵守。只能使用嵌套地图找到解决方案。

我一直在做的方法如下：找到由第一组边界指定的所有值（在示例中，`(0 1 2)`）。这可以通过一个名为`(enumerate lowBound highBound)`. 然后，我需要获取这些数字中的每一个，并在下一组 bounds 中对每个数字进行 cons `(0 1 2 3)`，从而得到`((0 0) (0 1) (0 2) (0 3) (1 0)...)`.

我写到这里的内容如下：

```
(define (n-loop op . pairs)
     (apply op (generate pairs))
)

(define (generate pairs)
    (map (lambda (x) (cons x (generate (cdr pairs)))) 
         (map (lambda (x) (enumerate (car x) (cadr x))) pairs))
) 
```

但是对于给定的数字，这`(0 1 0 1 2 0 1 2 0 1 2)`会在我需要时输出`((0 0) (0 1) (0 2) (0 3) (1 0)...)`。这是一个讨厌的问题。有没有人有任何见解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:07:28.713

这个问题比你想象的要复杂。特别是，生成任意范围列表的笛卡尔积需要更多的工作 - 您是否尝试过使用两个以上范围的过程？这引起了我的兴趣，这次我将给出一个完整的解决方案，只使用为解决方案定义的程序，对列表（`cons`、`car`、`cdr`、`append`）、`lambda`和`apply`的简单操作`map`。

首先，帮助程序从最简单到最难。我们需要一种方法来生成一系列数字。如果可用，请使用`build-list`or `for-list`，但如果您需要从头开始实现它：

```
(define (enumerate low high)
  (if (>= low high)
      '()
      (cons low
            (enumerate (add1 low) high)))) 
```

现在我们需要一种机制来折叠（减少、累积）列表中的值。如果可以使用`foldr`，否则像这样实现它：

```
(define (reduce proc lst init)
  (if (null? lst)
      init
      (proc (car lst)
            (reduce proc (cdr lst) init)))) 
```

为避免列表中不必要的嵌套，请使用`flatmap`- 一个映射和展平值列表的过程：

```
(define (flatmap proc lst)
  (reduce (lambda (e acc)
            (append (proc e) acc))
          lst '())) 
```

这是解决方案的核心 - 一个生成表示范围的任意长值列表的笛卡尔积的过程：

```
(define (product . args)
  (reduce (lambda (pool result)
            (flatmap (lambda (x)
                       (map (lambda (y)
                              (cons x y))
                            result))
                     pool))
          args
          '(()))) 
```

最后，问题中的程序。它使用上面定义的帮助程序，注意到`op`接收到的参数可以有任意数量（取决于指定的范围数量），所以我们需要`apply`在每个生成的值元组上使用：

```
(define (n-loop op . pairs)
  (map (lambda (tuple) (apply op tuple))
       (apply product
              (map (lambda (pair)
                     (enumerate (car pair) (cadr pair)))
                   pairs)))) 
```

像这样测试它：

```
(n-loop (lambda (x y z) (list x y z))
        '(0 2) '(0 3) '(4 6))

> '((0 0 4) (0 0 5) (0 1 4) (0 1 5) (0 2 4) (0 2 5)
    (1 0 4) (1 0 5) (1 1 4) (1 1 5) (1 2 4) (1 2 5)) 
```

# ssrs-2008 - 嵌套表高度自动增加？

> ID：13009520
> 
> 赞同：1
> 
> 时间：2012-10-22T10:30:30.020
> 
> 标签：ssrs-2008, reporting-services, reportbuilder3.0

我正在尝试使用 Report Builder 3.0 在 SSRS 中创建一个报告，其中有一个未分组的数据部分（在屏幕截图中称为“风险”），然后是一个分组的数据部分“控件”。如“参考”3a 行中所示，一个风险行可以有许多控制。在分组控制集之后，它返回到未分组的风险信息（见下文）。

### 截屏

![链接到报告的屏幕截图](../Images/eabc52b9665ccaab5d37788ad2929313.png)

我通过在其中一个单元格内使用嵌套表来完成这项工作，这一切看起来都很好，直到我在单元格“后果”中添加了大量数据。正如您所看到的，由于内表没有增长，目前这看起来并不好。

我的问题，有没有办法让内表增长，所以第二行文本会在该行的中间，背景颜色会占据整行，所以它不会留下空白？

我非常感谢您提供的任何帮助。

谢谢，格伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T11:13:16.507

我不相信这是可能的，因为嵌套的 tablix**本身**就针对空间和视觉外观进行了优化。

我知道你想做什么，我只能建议你调整你的报告以查询这些数据并生成**一个**tablix。我知道这不理想，因为这会弄乱安排。

# windows - MinGW上的OpenGL链接器错误

> ID：13009526
> 
> 赞同：1
> 
> 时间：2012-10-22T10:30:53.843
> 
> 标签：windows, opengl, g++, mingw, linker-errors

我尝试在没有 GLFW 的情况下在 Windows 上初始化 OpenGL ...她的一些相关代码：

```
#include <windows.h>
//...
  if(!(g_hDC = GetDC(hWnd)))
    return false;

  if(!(iPixelFormat = ChoosePixelFormat(g_hDC, &pfdPixelFormat)))
    return false;

  if(!SetPixelFormat(g_hDC, iPixelFormat, &pfdPixelFormat))
    return false;

  if(!(g_hRC = wglCreateContext(g_hDC)))
    return false;

  if(!wglMakeCurrent(g_hDC, g_hRC))
    return false;
//... 
```

当我使用 mingw32-g++ -Wall -O2 -Wl,--subsystem,windows -lopengl32 -mwindows Init.c 编译时，出现以下错误：

```
Temp\cclcIFFB.o:init.c:(.text+0x281): undefined reference to `_wglCreateContext@4'
Temp\cclcIFFB.o:init.c:(.text+0x2a0): undefined reference to `_wglMakeCurrent@8'
collect2.exe: error: ld returned 1 exit status 
```

为什么会出现此链接器错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:14:07.400

尝试把你的`Init.c` *之前*`-lopengl32`：

```
mingw32-g++ -Wall -O2 Init.c -Wl,--subsystem,windows -lopengl32 -mwindows 
```

`gcc`对论点定位可能很挑剔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:49:28.333

您必须将 OpenGL 链接器定义库添加`opengl32.lib`到要链接的库列表中。

# visual-studio-2010 - VS2010 for Office 开发

> ID：13009529
> 
> 赞同：1
> 
> 时间：2012-10-22T10:31:04.870
> 
> 标签：visual-studio-2010, installation, officedev

我有 Visual Studio 2010 Professional，但似乎我无法打开/创建 Office 项目。

我认为我的安装一定有问题并且没有添加功能。但是，每当我进入 VS2010 的维护模式时，Office 都不会出现。它确实说Professional，我相信它带有办公工具。

我确实也安装了 Office 2010。

我环顾四周，到处都说我可以添加该功能，但我在安装中只获得了一些功能；VB、C++。C#（加上 X64 编译器和工具）、Visual Web Developer 和图形库，所有这些都是门票。

有小费吗？

ps我也有SP1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:39:03.317

对于可能遇到此问题的其他任何人，您可能需要重新安装 SP1 以及 Visual Studio。这就是为我做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:13:45.793

[**VSTO**](http://msdn.microsoft.com/en-us/office/hh133430.aspx)是您正在寻找的。

尝试其中一篇[演练文章](http://msdn.microsoft.com/en-us/library/ff937654)开始。

# jquery-validate - 在 keyup 事件上附加一个 jquery 验证引擎

> ID：13009530
> 
> 赞同：0
> 
> 时间：2012-10-22T10:31:04.830
> 
> 标签：jquery-validate, javascriptmvc

我在我的项目中的输入字段上使用 jquery 验证引擎。

代码结构是这样的

```
<form>
  <input/>
  <input/>
</form> 
```

我验证了 keyUp 中的字段。

现在我如何仅在具有焦点的输入上显示提示。

或者以其他方式，当验证引擎附加到表单时，我如何验证在特定表单内具有焦点的单个输入元素..

我使用 JavaScript-MVC 框架

请帮帮我。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T21:46:38.890

要验证在 keyup 上的特定表单内具有焦点的单个输入元素，请尝试此操作

```
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.10.0/jquery.validate.min.js"
        type="text/javascript"></script>
    <script type="text/javascript">
        $(function () {
            $('form').validate({ onkeyup: false });

            $('form').bind('keyup', function () {
                $(':focus', this).valid();
            });

        });
    </script>
</head>
<body>
    <form>
    <input name="one" class="required number"/><br />
    <input name="two" class="required" /><br />
    <input type="submit" />
    </form>
</body>
</html> 
```

# javascript - Rails：显示在我的表单中动态计算的值

> ID：13009532
> 
> 赞同：2
> 
> 时间：2012-10-22T10:31:10.100
> 
> 标签：javascript, ruby-on-rails

在我的 new.html.erb 中，我有以下内容：

```
<%= hidden_field :shipping_charges %>
<%= label_tag :rush_shipment, "Rush My Shipment" %>>
<%= check_box_tag :rush_shipment, :checked => false, :onclick => "add_rush_shipment_charges()" %>

    <p>My Shipping charges: <span id="shipping_charges"></span> 
```

在我的 javascript 文件中，我有以下内容：

```
function add_rush_shipment_charges()
{
    document.getElementById('shipping_charges').value = 25;
} 
```

当我点击复选框时，我应该会在运费后看到 25，但没有任何反应。有任何想法吗。

# 编辑：

请注意，我编辑了问题以反映我从答案 #1 中获得的信息，但我仍然没有看到任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:40:11.803

```
Where you want to show the shipping charges? Lets assume your view is like:
<%= hidden_field :shipping_charges %>
<%= label_tag :rush_shipment, "Rush My Shipment" %>>
<%= check_box_tag :rush_shipment, :checked => false, :onclick => "add_rush_shipment_charges()" %>
<h3> You shipping charges are: <span id="total_shipping"></span</h1> 
```

现在，在计算总运费后，您只需更新跨度

```
function calculate_total_costs(){
  //cost calculation logics
  document.getElementById('total_shipping').value = TOTAL_COSTS
} 
```

现在，在需要时调用该函数`calculate_total_costs()`！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T23:43:51.390

您的复选框标签不正确：

```
<%= check_box_tag :rush_shipment, :checked => false, :onclick => "add_rush_shipment_charges()" %> 
```

应该：

```
<%= check_box_tag :rush_shipment, "yes", false, :onclick => "add_rush_shipment_charges()" %> 
```

在您修复此问题之前，JavaScript 方法不会在点击时被调用。

JavaScript 方法也不正确，因为不能设置标准 DOM，比如 span，使用`.value`，必须使用 innerHTML（或者更好，使用 jQuery 的`.html()`方法以获得更好的跨浏览器支持）：

```
function add_rush_shipment_charges()
{
    document.getElementById('shipping_charges').innerHTML = '25';
} 
```

# android - 清除 WebView 缓存的 101 种方法 - 所有这些都不起作用

> ID：13009534
> 
> 赞同：9
> 
> 时间：2012-10-22T10:31:12.787
> 
> 标签：android, caching, webview

我的应用程序中有一个非常简单的 WebView，它显示“欢迎”对话框。

我通过语言发送服务器以进行响应，如下所示：

```
Map<String, String> noCacheHeaders = new HashMap<String, String>(2);
noCacheHeaders.put("Pragma", "no-cache");
noCacheHeaders.put("Cache-Control", "no-cache");
noCacheHeaders.put("Accept-Language", Locale.getDefault().toString());
mWebView.loadUrl("www.fake.com", noCacheHeaders); 
```

这工作正常 - 但是，当我更改设备语言时，我希望`WebView`语言也发生更改，我可以看到调试时的值`"Accept-Language"`正在正确更改，但 WebView 中的内容没有更改。我一直在寻找停止缓存的方法，如下所述。它们都没有在语言更改后使网站加载不同的效果。

为了确保服务器不是缓存问题，我确保在清除“应用程序数据”并重新启动后 WebView 内容发生变化。相当确凿的证据表明应用程序正在存储 WebView 数据。

所以，我遵循了我在下面列出的许多不同的建议。其中没有一个实际上改变了 my 的内容`WebView`：

从[这里](https://stackoverflow.com/a/6544153/726954)导致崩溃：

```
mWebView.clearCache(true);
mContext.deleteDatabase("webview.db");
mContext.deleteDatabase("webviewCache.db"); 
```

仅此而已（在 loadURL 之前、之后和 onProgress=100 之前）：

```
mWebView.clearCache(true); 
```

从[这里](https://stackoverflow.com/a/10701961/726954)：

```
mWebView.getSettings().setAppCacheMaxSize(0); 
```

我也试过这个：

```
mWebView.getSettings().setAppCacheEnabled(false); 
```

所有导致相同的行为。我的 WebView 在将设备语言从德语切换到英语时，仍然保留了德语网站内容。

以下是所有代码：

```
 Map<String, String> noCacheHeaders = new HashMap<String, String>(2);
    noCacheHeaders.put("Pragma", "no-cache");
    noCacheHeaders.put("Cache-Control", "no-cache");
    noCacheHeaders.put("Accept-Language", Locale.getDefault().toString());

    mWebView.getSettings().setAppCacheEnabled(false); 
    mWebView.clearCache(true);
    mWebView.getSettings().setAppCacheMaxSize(0);

    mWebView.setWebChromeClient(new WebChromeClient() {
           public void onProgressChanged(WebView view, int progress) {                 
               mProgress.setProgress(progress);
               try {
                   getActivity().setProgress(progress);
                   if(progress == 100) {
                       mProgress.setVisibility(View.GONE);
                       mWebView.clearCache(true);
                   }
               } catch(Exception e) {
                   e.printStackTrace();
               }
           }
    });
    mWebView.loadUrl("www.fake.com", noCacheHeaders);
    mWebView.clearCache(true); 
```

可重复的步骤：

1.  安装软件
2.  打开 Webview **- 英文内容。**
3.  强制停止应用程序
4.  将设备语言更改为德语
5.  打开 App & WebView **- 英文内容。**
6.  强制停止应用程序
7.  清除应用数据
8.  打开 App & WebView **- 德语内容。**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-22T10:35:06.353

```
 CookieSyncManager.createInstance(this);         
 CookieManager cookieManager = CookieManager.getInstance();        
 cookieManager.removeAllCookie(); 
```

# regex - 混合大小写的 Apache 重写规则

> ID：13009535
> 
> 赞同：1
> 
> 时间：2012-10-22T10:31:17.180
> 
> 标签：regex, apache, mod-rewrite, apache2

我在这些路径上有一些资源：

```
/application/myFoo
/application/myBar 
```

总是 'my' 后跟一个大写的名字

我想重定向

```
/myfoo, /myFOO, /myFoo, (even /foo, /Foo if possible) 
```

到第一个，同样适用于第二个 url

```
RewriteRule ^/my(.*) /application/my$1 [L,NC] 
```

是我目前的解决方案，它适用于 /myFoo、/mYFoo，但不适用于 /myfoo、/foo

参考：[mod_rewrite - 更改 URL 大小写](https://stackoverflow.com/questions/1353807/mod-rewrite-change-url-case)（这有点不同，因为我不想将所有 %{REQUEST_URI} 都大写

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:45:23.273

这是一种可能的解决方案

```
RewriteEngine   On
RewriteMap uppercase int:toupper
RewriteMap lowercase int:tolower
RewriteCond %{REQUEST_URI} !^/(lib|system|application)/
RewriteRule ^/?(?:my)?([a-z])(.*) /application/my${uppercase:$1}${lowercase:$2} [L,NC] 
```

# watir-webdriver - 检查 watir-webdriver 中的链接是否可用

> ID：13009539
> 
> 赞同：1
> 
> 时间：2012-10-22T10:31:43.503
> 
> 标签：watir-webdriver

我想检查一个链接是否可以点击，我试过了

```
my_link.exist?
my_link.present 
```

但即使链接不可点击（灰色），它们都返回“true”

知道如何检查吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:04:53.000

[`Element#present?`](http://rdoc.info/gems/watir-webdriver/Watir/Element#present?-instance_method)应该做的工作。它检查元素是否存在并且在页面上可见。你也可以试试[`Element#visible?`](http://rdoc.info/gems/watir-webdriver/Watir/Element#visible?-instance_method)

顺便说一下，下次还请包括相关的HTML。

# powerbuilder - Microhelp 在应用程序失去焦点时停止工作

> ID：13009540
> 
> 赞同：1
> 
> 时间：2012-10-22T10:31:46.150
> 
> 标签：powerbuilder

使用 Windows Vista 上的 Powerbuilder 10.5，我循环遍历数据窗口行并将一些文本放入微帮助中以进行每次迭代。

如果我单击另一个应用程序，例如 Outlook，即使 Outlook 已关闭，Microhelp 也会停止更新 PB 应用程序。发生在所有应用程序上，而不仅仅是 Outlook。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:00:52.107

调用堆栈中某处的 LoseFocus 事件是否有相关内容？
检查整个祖先链——从数据窗口到其祖先类，再到窗口及其祖先类，以及应用程序。

PBLPeeper 是一款非常适合此类研究的应用程序。www.techno-kitten.com

# c++ - 设计模式，将数据添加到类（第 3 方）而不修改它

> ID：13009542
> 
> 赞同：4
> 
> 时间：2012-10-22T10:31:55.190
> 
> 标签：c++, design-patterns

当我必须扩展一个类的行为而不修改它时，我经常使用设计模式[visitor](http://en.wikipedia.org/wiki/Visitor_pattern)。它添加了类似成员的函数，而不修改它所使用的类的核心。

或多或少以同样的方式，我需要扩展一个第三方类，但主要是数据，而不是行为。

在这种情况下，我经常使用 std::map 匹配 a key`MyClass*`和 value `MyClassExtender`。MyClassExtender 包含所有附加信息。

在这样做的同时，我碰巧想知道是否还有其他方法可以做到这一点，可能更常见或更“最佳实践”。我应该将这个附加类称为 Extender 吗？这种模式是否有名称......

Nota Bene：我可以简单地将 MyClass* 和 MyClassExtender 聚合到一个新类中，但是我需要经常访问给定 MyClass* 的 MyClassExtender，所以 st::map 非常方便。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:42:53.793

你为什么不直接子类化这个类？继承是扩展类的方式，无论是行为还是状态。除非您只想将类的实例与其他数据相关联，在这种情况下它根本不会扩展，而 std::map 是正确的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:42:11.623

所以 - 在你的扩展对象的结构中创建你的 MyClass 对象：

```
struct MyClassEx {
  MyClassExtension extension;
  MyClass object;
}; 
```

为了使其对不同类型更加健壮 - 使用示例中的模板：http: [//ideone.com/mmfK83](http://ideone.com/mmfK83)

以下解决方案的灵感来自`std::shared_ptr/std::make_shared`：

```
template <typename Type>
struct LinkExtension;

template <typename Type>
struct TypeEx {
    using Extension = typename LinkExtension<Type>::Type;

    alignas(Type) uint8_t objectData[sizeof(Type)];
    alignas(Extension) uint8_t extensionData[sizeof(Extension)];

    Type* getObject() { return reinterpret_cast<Type*>(objectData); }
    const Type* getObject() const { return reinterpret_cast<const Type*>(objectData); }
    Extension* getExtension() { return reinterpret_cast<Extension*>(extensionData); }
    const Extension* getExtension() const { return reinterpret_cast<const Extension*>(extensionData); }

    template <class... Args>
    TypeEx(Args&&... args) 
    {
        new (objectData) Type(std::forward<Args>(args)...);
        new (extensionData) Extension();
    }
    ~TypeEx() 
    {
        getObject()->~Type();
        getExtension()->~Extension();
    }
    TypeEx(const TypeEx&) = delete;
    TypeEx& operator = (const TypeEx&) = delete;
}; 
```

还有一些辅助功能：

```
template <typename Type, class... Args>
Type* createObjectEx(Args&&... args)
{
   TypeEx<Type>* retVal = new TypeEx<Type>(std::forward<Args>(args)...);
   return retVal->getObject();
}

template <typename Type>
typename LinkExtension<Type>::Type& getObjectEx(Type* obj)
{
   static_assert(std::is_standard_layout<TypeEx<Type>>::value, "Oops");
   static_assert(offsetof(TypeEx<Type>, objectData) == 0, "Oops");
   TypeEx<Type>* retVal = static_cast<TypeEx<Type>*>((void*)obj);
    return *(retVal->getExtension());
}

template <typename Type>
const typename LinkExtension<Type>::Type& getObjectEx(const Type* obj)
{
    static_assert(std::is_standard_layout<TypeEx<Type>>::value, "Oops");
    static_assert(offsetof(TypeEx<Type>, objectData) == 0, "Oops");
    const TypeEx<Type>* retVal = static_cast<const TypeEx<Type>*>((const void*)obj);
    return *(retVal->getExtension());
}

template <typename Type>
void deleteObjectEx(const Type* obj)
{
    const TypeEx<Type>* objectEx = static_cast<const TypeEx<Type>*>((const void*)obj);
    delete objectEx;
} 
```

以及如何将扩展链接到类：

```
class MyClass {
public:
   virtual ~MyClass() = default; 
};
struct MyClassExtension {
    int a;
    int b;
};
template <>
struct LinkExtension<MyClass> {
    using Type = MyClassExtension;  
}; 
```

并证明它有效：

```
void printExtension(MyClass* object);
int main() {
    MyClass* object = createObjectEx<MyClass>();
    MyClassExtension& extension = getObjectEx(object);
    extension.a = 1;
    extension.b = 2;
    printExtension(object);
    deleteObjectEx(object);

    TypeEx<MyClass> objectEx;
    objectEx.getExtension()->a = 3;
    objectEx.getExtension()->b = 4;
    printExtension(objectEx.getObject());
}

void printExtension(MyClass* object)
{
    MyClassExtension& extension = getObjectEx(object);
    std::cout << extension.a << ' ' << extension.b << std::endl;
} 
```

如果您的编译器不支持可变参数模板，则该解决方案仍然可行，但需要更多的手工工作才能完成。

# django - Django：将模型添加到管理站点

> ID：13009545
> 
> 赞同：3
> 
> 时间：2012-10-22T10:32:00.323
> 
> 标签：django, django-models, django-admin

我不知道我做错了什么，但我无法将模型添加到我的管理员。

设置.py

```
INSTALLED_APPS = (
'django.contrib.auth',
'django.contrib.contenttypes',
'django.contrib.sessions',
'django.contrib.sites',
'django.contrib.messages',
'django.contrib.admin',
'django.contrib.admindocs',
'RM.cal',
'release',
'south', 
```

)

```
MIDDLEWARE_CLASSES = (
'django.middleware.common.CommonMiddleware',
'django.contrib.sessions.middleware.SessionMiddleware',
'django.middleware.csrf.CsrfViewMiddleware',
'django.contrib.auth.middleware.AuthenticationMiddleware',
'django.contrib.messages.middleware.MessageMiddleware',
'django.middleware.gzip.GZipMiddleware',
'django_notify.middleware.NotificationsMiddleware',
'django.contrib.messages.middleware.MessageMiddleware', 
```

)

```
TEMPLATE_CONTEXT_PROCESSORS = (
        global_settings.TEMPLATE_CONTEXT_PROCESSORS +
        ('django.core.context_processors.request','django.contrib.messages.context_processors.messages',)

 ) 
```

管理员.py

```
from cal.models import *
from django.contrib import admin
admin.site.register(Cos) 
```

网址.py

```
 from django.conf.urls.defaults import *

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
# Example:
# (r'^RM/', include('RM.foo.urls')),
(r'^cal/', include('RM.cal.urls')),

# Uncomment the admin/doc line below to enable admin documentation:
# (r'^admin/doc/', include('django.contrib.admindocs.urls')),

# Uncomment the next line to enable the admin:
(r'^admin/', include(admin.site.urls)),
(r'^site_media/(?P<path>.*)$', 'django.views.static.serve',
    {'document_root': 'C:/Users/sg0217297/Desktop/test/tkt_crmt/RM/media'}), 
```

models.py 其新字段仅用于测试，但我可以将其添加到管理员；/

```
from django.db import models
from django.contrib import admin
class Cos(models.Model):
    name = models.CharField(max_length=400, blank= False , null = True)

    def __unicode__(self):
    return self.name 
```

知道为什么吗？

感谢帮助

E：更新 urls.py

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:49:44.383

你需要在你的类中定义一个 app_label，django 只为 models.py 看起来 1 级深度，所以：

```
class YourModel(models.Model):
    # whatever

    class Meta:
        app_label = 'cal' 
```

您还可以在上面模块的**init中导入第二级模型**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:44:42.973

尝试导入独立模型而不是 '*' ：

```
from your_app.models import model1,model2 
```

# java - 是否有使用 Encog 3.1 进行时间序列预测的 Java 示例？

> ID：13009550
> 
> 赞同：1
> 
> 时间：2012-10-22T10:32:17.057
> 
> 标签：java, neural-network, encog

我试图弄清楚使用神经网络进行时间序列预测是多么容易。Encog 似乎是首选框架，但我在 Google 上搜索了一下，并没有在任何地方看到使用最新版本（或任何 3.x）的 Java 时间序列示例。

有人有我能看到的好例子吗？

如果它是一个显示预测多个相互关联值的示例，则加分。即我需要根据 W,X,Y,Z 的先前值来预测 W,X,Y,Z。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T11:01:46.630

你看过[https://github.com/encog/encog-java-core/downloads](https://github.com/encog/encog-java-core/downloads)吗？我相信该示例使用的是 3.1 版。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T20:07:16.223

来自 Encog wiki，Encog Workbench 时间序列示例

[http://www.heatonresearch.com/wiki/Workbench_Time-Series_Example](http://www.heatonresearch.com/wiki/Workbench_Time-Series_Example)

预测神经网络，包含三个视频。

[http://www.heatonresearch.com/wiki/NN_Session_10:_Predictive_Neural_Networks](http://www.heatonresearch.com/wiki/NN_Session_10:_Predictive_Neural_Networks)

# flv - 如何在 gstreamer 中播放没有 playbin2 的 .flv(h.264 aac) 文件？

> ID：13009557
> 
> 赞同：4
> 
> 时间：2012-10-22T10:32:40.273
> 
> 标签：flv, h.264, gstreamer, gst-launch

我有一个 FLV 文件，gstreamer playbin2 可以正常工作，但如果我尝试手动构建管道，结果是否定的。

谁能告诉我我的管道有什么问题？或者，如何在不使用 playbin2 的情况下构建正确播放 FLV 文件的管道？

**目标 FLV 文件也上传到 dropbox，url 为：**

[https://dl.dropbox.com/u/5391695/1.flv](https://dl.dropbox.com/u/5391695/1.flv)

我尝试查看 playbin2 方法生成的点文件，请查看

[https://dl.dropbox.com/u/5391695/playbin2.png](https://dl.dropbox.com/u/5391695/playbin2.png)

以下命令 1,2 都可以工作，但命令 3,4 根本不工作。

**1.来自gst-discover的媒体信息**

```
gst-discoverer-0.10 1.flv 
Analyzing file:///home/gst/debug/1.flv
Done discovering file:///home/gst/debug/1.flv

Topology:
  container: Flash
    audio: MPEG-4 AAC
    video: H.264

Properties:
  Duration: 0:11:31.762000000
  Seekable: yes
  Tags: 
      duration: 691762000000
      encoder: PFree FLV Lib
      video codec: H.264
      audio codec: MPEG-4 AAC 
```

**2.playbin2**

```
gst-launch-0.10 -v playbin2 uri=file:///home/gst/debug/1.flv
Setting pipeline to PAUSED ...
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0: ring-buffer-max-size = 0
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0: buffer-size = -1
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0: buffer-duration = -1
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0: use-buffering = FALSE
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0: download = FALSE
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0: uri = "file:///home/gst/debug/1.flv"
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0: connection-speed = 0
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0: source = (GstFileSrc) source
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0/GstDecodeBin2:decodebin20/GstTypeFindElement:typefind.GstPad:src: caps = video/x-flv
Pipeline is PREROLLING ...
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0/GstDecodeBin2:decodebin20/GstFlvDemux:flvdemux0.GstPad:sink: caps = video/x-flv
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0/GstDecodeBin2:decodebin20/GstFlvDemux:flvdemux0.GstPad:video: caps = video/x-h264, stream-format=(string)avc, pixel-aspect-ratio=(fraction)1/1, width=(int)33, height=(int)10, framerate=(fraction)15/1, codec_data=(buffer)014d401fffe10019674d401f9661404012d80880000003008000000f478c18c54001000468eebc80
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0/GstDecodeBin2:decodebin20/GstMultiQueue:multiqueue0: max-size-buffers = 5
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0/GstDecodeBin2:decodebin20/GstMultiQueue:multiqueue0: max-size-time = 0
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0/GstDecodeBin2:decodebin20/GstMultiQueue:multiqueue0: max-size-bytes = 2097152
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0/GstDecodeBin2:decodebin20/GstFlvDemux:flvdemux0.GstPad:audio: caps = audio/mpeg, mpegversion=(int)4, framed=(boolean)true, stream-format=(string)raw, rate=(int)22050, channels=(int)2, codec_data=(buffer)139056e5a54800
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0/GstDecodeBin2:decodebin20/GstMultiQueue:multiqueue0.GstPad:sink0: caps = video/x-h264, stream-format=(string)avc, pixel-aspect-ratio=(fraction)1/1, width=(int)33, height=(int)10, framerate=(fraction)15/1, codec_data=(buffer)014d401fffe10019674d401f9661404012d80880000003008000000f478c18c54001000468eebc80
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0/GstDecodeBin2:decodebin20/GstMultiQueue:multiqueue0.GstPad:sink1: caps = audio/mpeg, mpegversion=(int)4, framed=(boolean)true, stream-format=(string)raw, rate=(int)22050, channels=(int)2, codec_data=(buffer)139056e5a54800
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0/GstDecodeBin2:decodebin20/GstMultiQueue:multiqueue0.GstPad:sink1: caps = audio/mpeg, mpegversion=(int)4, framed=(boolean)true, stream-format=(string)raw, rate=(int)22050, channels=(int)2, codec_data=(buffer)139056e5a54800
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0/GstDecodeBin2:decodebin20/GstMultiQueue:multiqueue0.GstPad:src1: caps = audio/mpeg, mpegversion=(int)4, framed=(boolean)true, stream-format=(string)raw, rate=(int)22050, channels=(int)2, codec_data=(buffer)139056e5a54800
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0/GstDecodeBin2:decodebin20/GstH264Parse:h264parse0.GstPad:src: caps = video/x-h264, stream-format=(string)avc, pixel-aspect-ratio=(fraction)1/1, width=(int)512, height=(int)288, framerate=(fraction)15/1, codec_data=(buffer)014d401fffe10019674d401f9661404012d80880000003008000000f478c18c54001000468eebc80, parsed=(boolean)true, alignment=(string)au
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0/GstDecodeBin2:decodebin20/GstH264Parse:h264parse0.GstPad:sink: caps = video/x-h264, stream-format=(string)avc, pixel-aspect-ratio=(fraction)1/1, width=(int)33, height=(int)10, framerate=(fraction)15/1, codec_data=(buffer)014d401fffe10019674d401f9661404012d80880000003008000000f478c18c54001000468eebc80
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0/GstDecodeBin2:decodebin20/GstAacParse:aacparse0.GstPad:src: caps = audio/mpeg, mpegversion=(int)4, framed=(boolean)true, stream-format=(string)raw, rate=(int)22050, channels=(int)2, codec_data=(buffer)139056e5a54800
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0/GstDecodeBin2:decodebin20/GstAacParse:aacparse0.GstPad:sink: caps = audio/mpeg, mpegversion=(int)4, framed=(boolean)true, stream-format=(string)raw, rate=(int)22050, channels=(int)2, codec_data=(buffer)139056e5a54800
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0/GstDecodeBin2:decodebin20/GstFaad:faad0.GstPad:sink: caps = audio/mpeg, mpegversion=(int)4, framed=(boolean)true, stream-format=(string)raw, rate=(int)22050, channels=(int)2, codec_data=(buffer)139056e5a54800
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0/GstDecodeBin2:decodebin20/GstFaad:faad0.GstPad:src: caps = audio/x-raw-int, endianness=(int)1234, signed=(boolean)true, width=(int)16, depth=(int)16, rate=(int)44100, channels=(int)2
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0/GstDecodeBin2:decodebin20/GstCapsFilter:capsfilter0.GstPad:src: caps = video/x-h264, stream-format=(string)avc, pixel-aspect-ratio=(fraction)1/1, width=(int)512, height=(int)288, framerate=(fraction)15/1, codec_data=(buffer)014d401fffe10019674d401f9661404012d80880000003008000000f478c18c54001000468eebc80, parsed=(boolean)true, alignment=(string)au
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0/GstDecodeBin2:decodebin20/GstCapsFilter:capsfilter0.GstPad:sink: caps = video/x-h264, stream-format=(string)avc, pixel-aspect-ratio=(fraction)1/1, width=(int)512, height=(int)288, framerate=(fraction)15/1, codec_data=(buffer)014d401fffe10019674d401f9661404012d80880000003008000000f478c18c54001000468eebc80, parsed=(boolean)true, alignment=(string)au
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0/GstDecodeBin2:decodebin20/GstMultiQueue:multiqueue0: max-size-buffers = 5
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0/GstDecodeBin2:decodebin20/GstMultiQueue:multiqueue0: max-size-time = 0
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0/GstDecodeBin2:decodebin20/GstMultiQueue:multiqueue0: max-size-bytes = 2097152
/GstPlayBin2:playbin20/GstInputSelector:inputselector0.GstSelectorPad:sink0: always-ok = FALSE
/GstPlayBin2:playbin20/GstInputSelector:inputselector1.GstSelectorPad:sink0: always-ok = FALSE
/GstPlayBin2:playbin20/GstInputSelector:inputselector1: active-pad = (GstSelectorPad) sink0
/GstPlayBin2:playbin20/GstInputSelector:inputselector0: active-pad = (GstSelectorPad) sink0
/GstPlayBin2:playbin20/GstInputSelector:inputselector0.GstSelectorPad:sink0: tags = ((GstTagList*) 0xb5828cb0)
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:abin/GstAutoAudioSink:audiosink/GstPulseSink:audiosink-actual-sink-pulse: ts-offset = 0
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:vbin/GstAutoVideoSink:videosink/GstXImageSink:videosink-actual-sink-ximage: ts-offset = 0
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0/GstDecodeBin2:decodebin20/ffdec_h264:ffdec_h2640.GstPad:sink: caps = video/x-h264, stream-format=(string)avc, pixel-aspect-ratio=(fraction)1/1, width=(int)512, height=(int)288, framerate=(fraction)15/1, codec_data=(buffer)014d401fffe10019674d401f9661404012d80880000003008000000f478c18c54001000468eebc80, parsed=(boolean)true, alignment=(string)au
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstTee:audiotee: alloc-pad = (GstPad) src0
/GstPlayBin2:playbin20/GstInputSelector:inputselector1.GstSelectorPad:sink0: tags = ((GstTagList*) 0xb4e30e90)
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0/GstDecodeBin2:decodebin20.GstDecodePad:src1: caps = audio/x-raw-int, endianness=(int)1234, signed=(boolean)true, width=(int)16, depth=(int)16, rate=(int)44100, channels=(int)2
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0/GstDecodeBin2:decodebin20.GstDecodePad:src1.GstProxyPad:proxypad8: caps = audio/x-raw-int, endianness=(int)1234, signed=(boolean)true, width=(int)16, depth=(int)16, rate=(int)44100, channels=(int)2
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0.GstGhostPad:src1: caps = audio/x-raw-int, endianness=(int)1234, signed=(boolean)true, width=(int)16, depth=(int)16, rate=(int)44100, channels=(int)2
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0.GstGhostPad:src1.GstProxyPad:proxypad11: caps = audio/x-raw-int, endianness=(int)1234, signed=(boolean)true, width=(int)16, depth=(int)16, rate=(int)44100, channels=(int)2
/GstPlayBin2:playbin20/GstInputSelector:inputselector1.GstSelectorPad:sink0: caps = audio/x-raw-int, endianness=(int)1234, signed=(boolean)true, width=(int)16, depth=(int)16, rate=(int)44100, channels=(int)2
/GstPlayBin2:playbin20/GstInputSelector:inputselector1.GstPad:src: caps = audio/x-raw-int, endianness=(int)1234, signed=(boolean)true, width=(int)16, depth=(int)16, rate=(int)44100, channels=(int)2
/GstPlayBin2:playbin20/GstPlaySink:playsink.GstGhostPad:audio_sink: caps = audio/x-raw-int, endianness=(int)1234, signed=(boolean)true, width=(int)16, depth=(int)16, rate=(int)44100, channels=(int)2
/GstPlayBin2:playbin20/GstPlaySink:playsink.GstGhostPad:audio_sink.GstProxyPad:proxypad12: caps = audio/x-raw-int, endianness=(int)1234, signed=(boolean)true, width=(int)16, depth=(int)16, rate=(int)44100, channels=(int)2
/GstPlayBin2:playbin20/GstPlaySink:playsink.GstGhostPad:audio_sink: caps = audio/x-raw-int, endianness=(int)1234, signed=(boolean)true, width=(int)16, depth=(int)16, rate=(int)44100, channels=(int)2
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstTee:audiotee.GstPad:sink: caps = audio/x-raw-int, endianness=(int)1234, signed=(boolean)true, width=(int)16, depth=(int)16, rate=(int)44100, channels=(int)2
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstTee:audiotee.GstPad:src0: caps = audio/x-raw-int, endianness=(int)1234, signed=(boolean)true, width=(int)16, depth=(int)16, rate=(int)44100, channels=(int)2
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstTee:audiotee.GstPad:sink: caps = audio/x-raw-int, endianness=(int)1234, signed=(boolean)true, width=(int)16, depth=(int)16, rate=(int)44100, channels=(int)2
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstStreamSynchronizer:streamsynchronizer0.GstPad:sink_1: caps = audio/x-raw-int, endianness=(int)1234, signed=(boolean)true, width=(int)16, depth=(int)16, rate=(int)44100, channels=(int)2
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstStreamSynchronizer:streamsynchronizer0.GstPad:src_1: caps = audio/x-raw-int, endianness=(int)1234, signed=(boolean)true, width=(int)16, depth=(int)16, rate=(int)44100, channels=(int)2
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:abin.GstGhostPad:sink: caps = audio/x-raw-int, endianness=(int)1234, signed=(boolean)true, width=(int)16, depth=(int)16, rate=(int)44100, channels=(int)2
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:abin.GstGhostPad:sink.GstProxyPad:proxypad21: caps = audio/x-raw-int, endianness=(int)1234, signed=(boolean)true, width=(int)16, depth=(int)16, rate=(int)44100, channels=(int)2
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:abin.GstGhostPad:sink: caps = audio/x-raw-int, endianness=(int)1234, signed=(boolean)true, width=(int)16, depth=(int)16, rate=(int)44100, channels=(int)2
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:abin/GstQueue:aqueue.GstPad:sink: caps = audio/x-raw-int, endianness=(int)1234, signed=(boolean)true, width=(int)16, depth=(int)16, rate=(int)44100, channels=(int)2
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:abin/GstQueue:aqueue.GstPad:src: caps = audio/x-raw-int, endianness=(int)1234, signed=(boolean)true, width=(int)16, depth=(int)16, rate=(int)44100, channels=(int)2
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:abin/GstPlaySinkAudioConvert:aconv.GstGhostPad:sink: caps = audio/x-raw-int, endianness=(int)1234, signed=(boolean)true, width=(int)16, depth=(int)16, rate=(int)44100, channels=(int)2
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:abin/GstPlaySinkAudioConvert:aconv.GstGhostPad:sink.GstProxyPad:proxypad19: caps = audio/x-raw-int, endianness=(int)1234, signed=(boolean)true, width=(int)16, depth=(int)16, rate=(int)44100, channels=(int)2
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:abin/GstPlaySinkAudioConvert:aconv.GstGhostPad:sink: caps = audio/x-raw-int, endianness=(int)1234, signed=(boolean)true, width=(int)16, depth=(int)16, rate=(int)44100, channels=(int)2
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:abin/GstPlaySinkAudioConvert:aconv/GstAudioConvert:conv.GstPad:src: caps = audio/x-raw-int, endianness=(int)1234, signed=(boolean)true, width=(int)16, depth=(int)16, rate=(int)44100, channels=(int)2
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:abin/GstPlaySinkAudioConvert:aconv/GstAudioConvert:conv.GstPad:sink: caps = audio/x-raw-int, endianness=(int)1234, signed=(boolean)true, width=(int)16, depth=(int)16, rate=(int)44100, channels=(int)2
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:abin/GstPlaySinkAudioConvert:aconv/GstAudioResample:resample.GstPad:src: caps = audio/x-raw-int, endianness=(int)1234, signed=(boolean)true, width=(int)16, depth=(int)16, rate=(int)44100, channels=(int)2
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:abin/GstPlaySinkAudioConvert:aconv/GstAudioResample:resample.GstPad:sink: caps = audio/x-raw-int, endianness=(int)1234, signed=(boolean)true, width=(int)16, depth=(int)16, rate=(int)44100, channels=(int)2
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:abin/GstPlaySinkAudioConvert:aconv.GstGhostPad:src: caps = audio/x-raw-int, endianness=(int)1234, signed=(boolean)true, width=(int)16, depth=(int)16, rate=(int)44100, channels=(int)2
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:abin/GstPlaySinkAudioConvert:aconv.GstGhostPad:src.GstProxyPad:proxypad20: caps = audio/x-raw-int, endianness=(int)1234, signed=(boolean)true, width=(int)16, depth=(int)16, rate=(int)44100, channels=(int)2
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:abin/GstAutoAudioSink:audiosink.GstGhostPad:sink: caps = audio/x-raw-int, endianness=(int)1234, signed=(boolean)true, width=(int)16, depth=(int)16, rate=(int)44100, channels=(int)2
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:abin/GstAutoAudioSink:audiosink.GstGhostPad:sink.GstProxyPad:proxypad18: caps = audio/x-raw-int, endianness=(int)1234, signed=(boolean)true, width=(int)16, depth=(int)16, rate=(int)44100, channels=(int)2
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:abin/GstAutoAudioSink:audiosink.GstGhostPad:sink: caps = audio/x-raw-int, endianness=(int)1234, signed=(boolean)true, width=(int)16, depth=(int)16, rate=(int)44100, channels=(int)2
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:abin/GstAutoAudioSink:audiosink/GstPulseSink:audiosink-actual-sink-pulse.GstPad:sink: caps = audio/x-raw-int, endianness=(int)1234, signed=(boolean)true, width=(int)16, depth=(int)16, rate=(int)44100, channels=(int)2
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0/GstDecodeBin2:decodebin20/ffdec_h264:ffdec_h2640.GstPad:src: caps = video/x-raw-yuv, width=(int)512, height=(int)288, framerate=(fraction)15/1, format=(fourcc)I420, interlaced=(boolean)false, pixel-aspect-ratio=(fraction)1/1
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0/GstDecodeBin2:decodebin20.GstDecodePad:src0: caps = video/x-raw-yuv, width=(int)512, height=(int)288, framerate=(fraction)15/1, format=(fourcc)I420, interlaced=(boolean)false, pixel-aspect-ratio=(fraction)1/1
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0/GstDecodeBin2:decodebin20.GstDecodePad:src0.GstProxyPad:proxypad9: caps = video/x-raw-yuv, width=(int)512, height=(int)288, framerate=(fraction)15/1, format=(fourcc)I420, interlaced=(boolean)false, pixel-aspect-ratio=(fraction)1/1
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0.GstGhostPad:src0: caps = video/x-raw-yuv, width=(int)512, height=(int)288, framerate=(fraction)15/1, format=(fourcc)I420, interlaced=(boolean)false, pixel-aspect-ratio=(fraction)1/1
/GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0.GstGhostPad:src0.GstProxyPad:proxypad10: caps = video/x-raw-yuv, width=(int)512, height=(int)288, framerate=(fraction)15/1, format=(fourcc)I420, interlaced=(boolean)false, pixel-aspect-ratio=(fraction)1/1
/GstPlayBin2:playbin20/GstInputSelector:inputselector0.GstSelectorPad:sink0: caps = video/x-raw-yuv, width=(int)512, height=(int)288, framerate=(fraction)15/1, format=(fourcc)I420, interlaced=(boolean)false, pixel-aspect-ratio=(fraction)1/1
/GstPlayBin2:playbin20/GstInputSelector:inputselector0.GstPad:src: caps = video/x-raw-yuv, width=(int)512, height=(int)288, framerate=(fraction)15/1, format=(fourcc)I420, interlaced=(boolean)false, pixel-aspect-ratio=(fraction)1/1
/GstPlayBin2:playbin20/GstPlaySink:playsink.GstGhostPad:video_sink: caps = video/x-raw-yuv, width=(int)512, height=(int)288, framerate=(fraction)15/1, format=(fourcc)I420, interlaced=(boolean)false, pixel-aspect-ratio=(fraction)1/1
/GstPlayBin2:playbin20/GstPlaySink:playsink.GstGhostPad:video_sink.GstProxyPad:proxypad13: caps = video/x-raw-yuv, width=(int)512, height=(int)288, framerate=(fraction)15/1, format=(fourcc)I420, interlaced=(boolean)false, pixel-aspect-ratio=(fraction)1/1
/GstPlayBin2:playbin20/GstPlaySink:playsink.GstGhostPad:video_sink: caps = video/x-raw-yuv, width=(int)512, height=(int)288, framerate=(fraction)15/1, format=(fourcc)I420, interlaced=(boolean)false, pixel-aspect-ratio=(fraction)1/1
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstStreamSynchronizer:streamsynchronizer0.GstPad:sink_0: caps = video/x-raw-yuv, width=(int)512, height=(int)288, framerate=(fraction)15/1, format=(fourcc)I420, interlaced=(boolean)false, pixel-aspect-ratio=(fraction)1/1
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstStreamSynchronizer:streamsynchronizer0.GstPad:src_0: caps = video/x-raw-yuv, width=(int)512, height=(int)288, framerate=(fraction)15/1, format=(fourcc)I420, interlaced=(boolean)false, pixel-aspect-ratio=(fraction)1/1
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:vbin.GstGhostPad:sink: caps = video/x-raw-yuv, width=(int)512, height=(int)288, framerate=(fraction)15/1, format=(fourcc)I420, interlaced=(boolean)false, pixel-aspect-ratio=(fraction)1/1
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:vbin.GstGhostPad:sink.GstProxyPad:proxypad17: caps = video/x-raw-yuv, width=(int)512, height=(int)288, framerate=(fraction)15/1, format=(fourcc)I420, interlaced=(boolean)false, pixel-aspect-ratio=(fraction)1/1
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:vbin.GstGhostPad:sink: caps = video/x-raw-yuv, width=(int)512, height=(int)288, framerate=(fraction)15/1, format=(fourcc)I420, interlaced=(boolean)false, pixel-aspect-ratio=(fraction)1/1
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:vbin/GstQueue:vqueue.GstPad:sink: caps = video/x-raw-yuv, width=(int)512, height=(int)288, framerate=(fraction)15/1, format=(fourcc)I420, interlaced=(boolean)false, pixel-aspect-ratio=(fraction)1/1
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:vbin/GstQueue:vqueue.GstPad:src: caps = video/x-raw-yuv, width=(int)512, height=(int)288, framerate=(fraction)15/1, format=(fourcc)I420, interlaced=(boolean)false, pixel-aspect-ratio=(fraction)1/1
Redistribute latency...
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:vbin/GstPlaySinkVideoConvert:vconv.GstGhostPad:sink: caps = video/x-raw-yuv, width=(int)512, height=(int)288, framerate=(fraction)15/1, format=(fourcc)I420, interlaced=(boolean)false, pixel-aspect-ratio=(fraction)1/1
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:vbin/GstPlaySinkVideoConvert:vconv.GstGhostPad:sink.GstProxyPad:proxypad15: caps = video/x-raw-yuv, width=(int)512, height=(int)288, framerate=(fraction)15/1, format=(fourcc)I420, interlaced=(boolean)false, pixel-aspect-ratio=(fraction)1/1
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:vbin/GstPlaySinkVideoConvert:vconv.GstGhostPad:sink: caps = video/x-raw-yuv, width=(int)512, height=(int)288, framerate=(fraction)15/1, format=(fourcc)I420, interlaced=(boolean)false, pixel-aspect-ratio=(fraction)1/1
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:vbin/GstPlaySinkVideoConvert:vconv/GstFFMpegCsp:conv.GstPad:src: caps = video/x-raw-yuv, width=(int)512, height=(int)288, framerate=(fraction)15/1, format=(fourcc)I420, interlaced=(boolean)false, pixel-aspect-ratio=(fraction)1/1
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:vbin/GstPlaySinkVideoConvert:vconv/GstFFMpegCsp:conv.GstPad:sink: caps = video/x-raw-yuv, width=(int)512, height=(int)288, framerate=(fraction)15/1, format=(fourcc)I420, interlaced=(boolean)false, pixel-aspect-ratio=(fraction)1/1
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:vbin/GstPlaySinkVideoConvert:vconv/GstVideoScale:scale.GstPad:src: caps = video/x-raw-yuv, width=(int)512, height=(int)288, framerate=(fraction)15/1, format=(fourcc)I420, interlaced=(boolean)false, pixel-aspect-ratio=(fraction)1/1
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:vbin/GstPlaySinkVideoConvert:vconv/GstVideoScale:scale.GstPad:sink: caps = video/x-raw-yuv, width=(int)512, height=(int)288, framerate=(fraction)15/1, format=(fourcc)I420, interlaced=(boolean)false, pixel-aspect-ratio=(fraction)1/1
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:vbin/GstPlaySinkVideoConvert:vconv/GstVideoBalance:videobalance.GstPad:src: caps = video/x-raw-yuv, width=(int)512, height=(int)288, framerate=(fraction)15/1, format=(fourcc)I420, interlaced=(boolean)false, pixel-aspect-ratio=(fraction)1/1
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:vbin/GstPlaySinkVideoConvert:vconv/GstVideoBalance:videobalance.GstPad:sink: caps = video/x-raw-yuv, width=(int)512, height=(int)288, framerate=(fraction)15/1, format=(fourcc)I420, interlaced=(boolean)false, pixel-aspect-ratio=(fraction)1/1
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:vbin/GstPlaySinkVideoConvert:vconv/GstFFMpegCsp:conv2.GstPad:src: caps = video/x-raw-rgb, bpp=(int)32, depth=(int)24, endianness=(int)4321, red_mask=(int)65280, green_mask=(int)16711680, blue_mask=(int)-16777216, width=(int)512, height=(int)288, framerate=(fraction)15/1, pixel-aspect-ratio=(fraction)1/1, interlaced=(boolean)false
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:vbin/GstPlaySinkVideoConvert:vconv/GstFFMpegCsp:conv2.GstPad:sink: caps = video/x-raw-yuv, width=(int)512, height=(int)288, framerate=(fraction)15/1, format=(fourcc)I420, interlaced=(boolean)false, pixel-aspect-ratio=(fraction)1/1
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:vbin/GstPlaySinkVideoConvert:vconv.GstGhostPad:src: caps = video/x-raw-rgb, bpp=(int)32, depth=(int)24, endianness=(int)4321, red_mask=(int)65280, green_mask=(int)16711680, blue_mask=(int)-16777216, width=(int)512, height=(int)288, framerate=(fraction)15/1, pixel-aspect-ratio=(fraction)1/1, interlaced=(boolean)false
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:vbin/GstPlaySinkVideoConvert:vconv.GstGhostPad:src.GstProxyPad:proxypad16: caps = video/x-raw-rgb, bpp=(int)32, depth=(int)24, endianness=(int)4321, red_mask=(int)65280, green_mask=(int)16711680, blue_mask=(int)-16777216, width=(int)512, height=(int)288, framerate=(fraction)15/1, pixel-aspect-ratio=(fraction)1/1, interlaced=(boolean)false
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:vbin/GstAutoVideoSink:videosink.GstGhostPad:sink: caps = video/x-raw-rgb, bpp=(int)32, depth=(int)24, endianness=(int)4321, red_mask=(int)65280, green_mask=(int)16711680, blue_mask=(int)-16777216, width=(int)512, height=(int)288, framerate=(fraction)15/1, pixel-aspect-ratio=(fraction)1/1, interlaced=(boolean)false
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:vbin/GstAutoVideoSink:videosink.GstGhostPad:sink.GstProxyPad:proxypad14: caps = video/x-raw-rgb, bpp=(int)32, depth=(int)24, endianness=(int)4321, red_mask=(int)65280, green_mask=(int)16711680, blue_mask=(int)-16777216, width=(int)512, height=(int)288, framerate=(fraction)15/1, pixel-aspect-ratio=(fraction)1/1, interlaced=(boolean)false
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:vbin/GstAutoVideoSink:videosink.GstGhostPad:sink: caps = video/x-raw-rgb, bpp=(int)32, depth=(int)24, endianness=(int)4321, red_mask=(int)65280, green_mask=(int)16711680, blue_mask=(int)-16777216, width=(int)512, height=(int)288, framerate=(fraction)15/1, pixel-aspect-ratio=(fraction)1/1, interlaced=(boolean)false
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:vbin/GstAutoVideoSink:videosink/GstXImageSink:videosink-actual-sink-ximage.GstPad:sink: caps = video/x-raw-rgb, bpp=(int)32, depth=(int)24, endianness=(int)4321, red_mask=(int)65280, green_mask=(int)16711680, blue_mask=(int)-16777216, width=(int)512, height=(int)288, framerate=(fraction)15/1, pixel-aspect-ratio=(fraction)1/1, interlaced=(boolean)false
Pipeline is PREROLLED ...
Setting pipeline to PLAYING ...
/GstPlayBin2:playbin20/GstPlaySink:playsink: volume = 1.000000
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:abin/GstAutoAudioSink:audiosink/GstPulseSink:audiosink-actual-sink-pulse: volume = 1.000000
/GstPlayBin2:playbin20/GstPlaySink:playsink: mute = FALSE
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:abin/GstAutoAudioSink:audiosink/GstPulseSink:audiosink-actual-sink-pulse: mute = FALSE
/GstPlayBin2:playbin20/GstPlaySink:playsink: volume = 1.000000
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:abin/GstAutoAudioSink:audiosink/GstPulseSink:audiosink-actual-sink-pulse: volume = 1.000000
/GstPlayBin2:playbin20/GstPlaySink:playsink: mute = FALSE
/GstPlayBin2:playbin20/GstPlaySink:playsink/GstBin:abin/GstAutoAudioSink:audiosink/GstPulseSink:audiosink-actual-sink-pulse: mute = FALSE
New clock: GstPulseSinkClock 
```

**3\. 文件rc->flvdemux->ffdec_h264**

```
gst-launch-0.10 -v filesrc location=1.flv ! flvdemux ! ffdec_h264 ! ffmpegcolorspace ! autovideosink
Setting pipeline to PAUSED ...
Pipeline is PREROLLING ...
/GstPipeline:pipeline0/GstFlvDemux:flvdemux0.GstPad:video: caps = video/x-h264, stream-format=(string)avc, pixel-aspect-ratio=(fraction)1/1, width=(int)33, height=(int)10, framerate=(fraction)15/1, codec_data=(buffer)014d401fffe10019674d401f9661404012d80880000003008000000f478c18c54001000468eebc80
/GstPipeline:pipeline0/GstFlvDemux:flvdemux0.GstPad:audio: caps = audio/mpeg, mpegversion=(int)4, framed=(boolean)true, stream-format=(string)raw, rate=(int)22050, channels=(int)2, codec_data=(buffer)139056e5a54800
ERROR: from element /GstPipeline:pipeline0/GstFlvDemux:flvdemux0: Internal data stream error.
Additional debug info:
gstflvdemux.c(2442): gst_flv_demux_loop (): /GstPipeline:pipeline0/GstFlvDemux:flvdemux0:
stream stopped, reason not-linked
ERROR: pipeline doesn't want to preroll.
Setting pipeline to NULL ...
/GstPipeline:pipeline0/GstFlvDemux:flvdemux0.GstPad:audio: caps = NULL
/GstPipeline:pipeline0/GstFlvDemux:flvdemux0.GstPad:video: caps = NULL
Freeing pipeline ... 
```

**4\. 文件rc->flvdemux->h264parse->ffdec_h264**

```
gst-launch-0.10 -v filesrc location=1.flv ! flvdemux ! queue ! h264parse ! ffdec_h264 ! ffmpegcolorspace ! autovideosink
Setting pipeline to PAUSED ...
Pipeline is PREROLLING ...
/GstPipeline:pipeline0/GstFlvDemux:flvdemux0.GstPad:video: caps = video/x-h264, stream-format=(string)avc, pixel-aspect-ratio=(fraction)1/1, width=(int)33, height=(int)10, framerate=(fraction)15/1, codec_data=(buffer)014d401fffe10019674d401f9661404012d80880000003008000000f478c18c54001000468eebc80
/GstPipeline:pipeline0/GstFlvDemux:flvdemux0.GstPad:audio: caps = audio/mpeg, mpegversion=(int)4, framed=(boolean)true, stream-format=(string)raw, rate=(int)22050, channels=(int)2, codec_data=(buffer)139056e5a54800
ERROR: from element /GstPipeline:pipeline0/GstFlvDemux:flvdemux0: Internal data stream error.
Additional debug info:
gstflvdemux.c(2442): gst_flv_demux_loop (): /GstPipeline:pipeline0/GstFlvDemux:flvdemux0:
stream stopped, reason not-linked
ERROR: pipeline doesn't want to preroll.
Setting pipeline to NULL ...
/GstPipeline:pipeline0/GstFlvDemux:flvdemux0.GstPad:audio: caps = NULL
/GstPipeline:pipeline0/GstFlvDemux:flvdemux0.GstPad:video: caps = NULL
Freeing pipeline ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-19T18:51:07.383

现在你应该使用 gstreamer-1，这样你就可以使用这个管道：

```
gst-launch-1.0 filesrc location=1.flv ! \
flvdemux ! \
h264parse ! avdec_h264 ! videoconvert ! autovideosink 
```

仍然没有这样的声音。要获得视频和声音，您需要这样的管道：

```
gst-launch-1.0 filesrc location=1.flv ! \
decodebin name=decode ! videoconvert ! autovideosink \
decode. ! audioconvert ! autoaudiosink 
```

好吧，那很懒：我用过`decodebin`. 如果您知道使用的编解码器，您可以手动构建完整的管道，当然：

```
gst-launch-1.0 filesrc location=1.flv ! \
flvdemux name=demux ! queue ! h264parse ! avdec_h264 ! videoconvert ! autovideosink \
demux. ! queue ! aacparse ! avdec_aac ! autoaudiosink 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:23:53.243

尝试`video/x-h264`在分路器之后添加大写字母。

# php - 带有自定义 productCollection 的 Magento 产品列表

> ID：13009558
> 
> 赞同：3
> 
> 时间：2012-10-22T10:32:41.240
> 
> 标签：php, magento

对于我的模块，我需要创建一个使用各种 addAttributeToFilter 修饰符构建的自定义 productCollection。但是，我不知道如何将这样的集合放入默认的 magento 产品列表中。所以基本上我想创建一个预先过滤的产品列表，有人能给我一些关于如何开始这样的事情的建议吗？

编辑：澄清一下，我可以收集，只是不像默认产品列表那样显示它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T14:05:20.393

经过数小时的努力，我找到了解决方案：我覆盖了 Mage_Catalog_Block_Product_List 并制作了自己的 _getProductCollection：

```
$collection = parent::_getProductCollection();
$collection->addAttributeToFilter('attribute', array('operator' => 'value'));
/* more filters go here */
$this->_productCollection = $collection;
return $this->_productCollection; 
```

这似乎是使原始产品列表正常工作且没有任何错误或类别问题的唯一方法。

感谢格拉！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T06:46:55.353

在 list.phtml 中使用它：

```
$_productCollection->clear()
        ->addAttributeToFilter('attribute_set_id', array('eq' => 63))
        ->load(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T10:35:22.797

你可以试试 ：

```
Mage::getModel('catalog/product')->getCollection()->addAttributeToFilter(); 
```

[http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/using_collections_in_magento](http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/using_collections_in_magento)

# vba - VB 脚本在出错时复制文件和电子邮件

> ID：13009559
> 
> 赞同：0
> 
> 时间：2012-10-22T10:32:45.017
> 
> 标签：vba, vbscript

我有两个 VB 脚本，我试图将它们与中间的错误处理合并。
我有一个效果很好的复制脚本：

```
 Dim objFSO, colFiles, objFile, strDestFolder, objNewestFile
Set objFSO = CreateObject("Scripting.FileSystemObject")
Set colFiles = objFSO.GetFolder("C:\RD\Source")
strDestFolder = "C:\RD\To\"

For Each objFile In colFiles.Files
    'If Left(objFile.Name, 4) = "apdt" Then
      If objNewestFile = "" Then   
        Set objNewestFile = objFile  
      Else   
          If objNewestFile.DateLastModified < objFile.DateLastModified Then    
            Set objNewestFile = objFile   
          End If  
      End If
    'End If
Next

If Not objNewestFile Is Nothing Then 
    objFSO.CopyFile objNewestFile.Path,strDestFolder,True
End If 
```

还有一个同样有效的电子邮件脚本：

```
strSMTPFrom = "no-reply@yourcompany.com"
strSMTPTo = "helpdesk@yourcompany.com"
strSMTPRelay = "smtp relay server name or IP address"
strTextBody = "Body of your email"
strSubject = "Subject line"
strAttachment = "full UNC path of file"

Set oMessage = CreateObject("CDO.Message")
oMessage.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/sendusing") = 2 
oMessage.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpserver") = strSMTPRelay
oMessage.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = 25 
oMessage.Configuration.Fields.Update

oMessage.Subject = strSubject
oMessage.From = strSMTPFrom
oMessage.To = strSMTPTo
oMessage.TextBody = strTextBody
oMessage.AddAttachment strAttachment

oMessage.Send 
```

但我想要一个脚本来复制较新的文件，但如果遇到错误，会通过电子邮件通知我并让我知道。所以我猜我需要添加 If Err <> 0 Then 并使发送电子邮件成为一个功能，但我很挣扎！任何帮助都会很棒？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:55:50.117

'这是修改后的代码，一旦复制遇到错误，将发送电子邮件：

```
Dim objFSO, colFiles, objFile, strDestFolder, objNewestFile
Set objFSO = CreateObject("Scripting.FileSystemObject")
Set colFiles = objFSO.GetFolder("C:\RD\Source")
strDestFolder = "C:\RD\To\"

For Each objFile In colFiles.Files
    'If Left(objFile.Name, 4) = "apdt" Then
    If objNewestFile = "" Then   
        Set objNewestFile = objFile  
    Else   
        If objNewestFile.DateLastModified < objFile.DateLastModified Then    
            Set objNewestFile = objFile   
        End If  
    End If
    'End If
Next

If Not objNewestFile Is Nothing Then 
    On Error Resume Next
        objFSO.CopyFile objNewestFile.Path,strDestFolder,True
    If Err<>0 Then

        strSMTPFrom = "no-reply@yourcompany.com"
        strSMTPTo = "helpdesk@yourcompany.com"
        strSMTPRelay = "smtp relay server name or IP address"
        strTextBody = "Error Encountered while trying to copy newest file."
        strTextBody = strTextBody & "Error Message: " & Err.Message
        strSubject = "Subject line"
        strAttachment = "full UNC path of file"

        Set oMessage = CreateObject("CDO.Message")
        oMessage.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/sendusing") = 2 
        oMessage.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpserver") = strSMTPRelay
        oMessage.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = 25 
        oMessage.Configuration.Fields.Update

        oMessage.Subject = strSubject
        oMessage.From = strSMTPFrom
        oMessage.To = strSMTPTo
        oMessage.TextBody = strTextBody
        oMessage.AddAttachment strAttachment

        oMessage.Send

    End If
End If 
```

# java - 为什么同名静态方法的静态导入是合法的？

> ID：13009560
> 
> 赞同：30
> 
> 时间：2012-10-22T10:32:52.010
> 
> 标签：java, import, static-import

假设我们有这些包和类：

```
package p1;

public class A1 {
    public static void a() {}
}

package p2;

public class A1 {
    public static void a() {}
}

package p3;

import static p1.A1.a;
import static p2.A1.a;

public class A1 {
    public static void test() {

    }
} 
```

我想知道，为什么方法的静态导入在包中是合法的（不会导致编译时错误）`p3`？我们将无法在`test()`方法中进一步使用它们，因为这样的使用会导致编译时错误。

为什么它与正常的类导入不同。假设我们想将类`A1`从包导入`p1`到：`p2``p3`

```
package p3;
import p1.A1;
import p2.A1; 
```

这样的导入是非法的，会导致编译时错误。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-22T10:37:15.890

方法的静态导入的歧义可以在方法调用时解决。

例如，如果您有两个方法的静态导入，如下所示：

```
void frobnicate(int i);
// and
void frobnicate(boolean b); 
```

然后你可以导入和使用两者，因为编译器可以根据你传入的参数来判断使用哪个（`frobnicate(1)`调用第一个，`frobnicate(true)`调用第二个）。

对于课程，这是不可能的：`Foobar a;`仅凭这两个课程不足以告诉您`Foobar`您想要两个课程中的哪一个。

另请注意，*单个*静态导入可以导入*多个*名称。根据[JLS 的相关部分](http://docs.oracle.com/javase/specs/jls/se7/html/jls-7.html#jls-7.5.3)（强调我的）：

> *单静态导入声明*从类型中导入具有给定简单名称的**所有可访问静态成员。**

例如，如果`frobnicate`上面的两个方法位于同一个类中，则单个`static`导入可以将它们都导入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T10:36:59.633

这是因为您将所有这些类命名为相同的东西。每次调用此静态方法时，它都会查找最本地的类，在本例中是 p3 中的 A1，它不包含静态方法 a()。永远记住一个类名应该是唯一的，并且永远不能与另一个相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T15:26:19.090

我猜，不受语言规范支持，方法可以重载，但字段/类型不能；因此 java 允许从不同的类中导入同名的方法。

但是，同一类中不能存在两个相同签名的方法；进口也不应该允许它们。

即使这两种方法有不同的签名，这仍然是一个坏主意。一个名字的含义很重要，它应该是清晰的。我们可以处理来自 1 个类的重载方法，但是跨类的“重载”是一种延伸。

# excel - 在excel VBA中的宏搜索/替换中为现有单元格内容添加额外的双引号

> ID：13009561
> 
> 赞同：0
> 
> 时间：2012-10-22T10:32:57.290
> 
> 标签：excel, vba

我正在以编程方式尝试模拟 excel“查找和替换”功能，对此我有一定的疑问/担忧。下面是我正在使用的代码，它是使用 excel 中的“记录宏”功能记录的。

```
 Selection.Replace What:=":Y", Replacement:="helloWorld", LookAt:=xlPart, _
    SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
    ReplaceFormat:=False 
```

在上面的代码中，如果我将 helloWorld 替换为类似于 This is a "Chicken" 的代码，那么代码会因为“This is a "Chicken"”的情况而惨遭失败。为了纠正它，我们应该有类似“这是一只”“鸡”“”

但是，要替换的文本来自同一个 Excel 工作表中的单元格。如何在已经有引号的文本中添加额外的引号以避免任何错误。

像 $%^&*!@# 这样的特殊字符也是如此

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:02:20.330

如果替换文本来自另一个单元格的值，我根本不用担心进行字符串转换。我倾向于做的是将包含替换文本的单元格的 .Value 属性传递给 Replace 方法的 Replacement:= 参数。这样 Excel 将在内部处理所有引号和其他字符；你不必担心它。

像这样的东西：

```
Sub ReplaceText()

On Error Resume Next
    Err.Clear

    'Let's say that the replacement text is in A1
    Selection.Replace What:=":Y", Replacement:=ActiveSheet.Cells(1, 1).Value, LookAt:=xlPart, _
    SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
    ReplaceFormat:=False

    'In case it's something like an error in the replacement text cell.
    'Using quotes or special characters WON'T cause an error.
    If Err.Number <> 0 Then
        MsgBox "Replacement failed; error " & Err.Number & vbCrLf & Err.Description
    End If

On Error GoTo 0

End Sub 
```

# php - 计算每个页面请求的查询数？

> ID：13009564
> 
> 赞同：0
> 
> 时间：2012-10-22T10:33:12.567
> 
> 标签：php, mysql, optimization, mysqli

我需要知道每个页面请求正在执行多少个 sql 查询。由于该站点已经完成并且我正在运行优化分析，如果提供的任何解决方案不需要我更改整个网站结构，我会更喜欢。

我使用单个连接将所有查询发送到 MySQL 数据库：

```
define('DATABASE_SERVER', '127.0.0.1');
define('DATABASE_NAME', 'foco');
define('DATABASE_USERNAME', 'root');
define('DATABASE_PASSWORD', '');

$DB_CONNECTION = new mysqli(
    DATABASE_SERVER,
    DATABASE_USERNAME,
    DATABASE_PASSWORD,
    DATABASE_NAME,
    3306
); 
```

然后执行我使用的查询：

```
$query = "SELECT * FROM `sometable`";
$queryRun = $DB_CONNECTION->query($query); 
```

有没有办法在 php 关闭连接之前计算已发送多少查询并将答案记录在文本文件中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T10:35:53.813

您可以扩展 mysqli 对象并覆盖查询方法：

```
class logging_mysqli extends mysqli {
    public $count = 0;
    public function query($sql) {
        $this->count++;
        return parent::query($sql);
    }
}

$DB_CONNECTION = new logging_mysqli(...); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:34:42.093

最好的方法之一是在你的`$DB_CONNECTION->query()`.

这样，您可以将每个单独的查询记录到数据库表中，或者对查询速度执行基本测试然后存储它，或者只是增加计数（对于查询数）并存储它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T10:36:05.407

创建类扩展`mysqli`，创建该类的 $DB_CONNECTION 对象并在方法的实现中进行统计`query()`。最终它会要求`parent::query()`做真正的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T10:38:38.323

创建一个您使用的代理，而不是直接使用 mysqli...

```
class DatabaseCounter {
    private $querycount = 0;
    private $mysqli = null;

    // create mysqli in here in constructor

    public function query(...) {
        $this->queryCount++;
        $this->mysqli->query(...);
    }
}

$DB_CONNECTION = new DatabaseCounter(); 
```

# sql - postgreSQL重复行计数加入

> ID：13009566
> 
> 赞同：4
> 
> 时间：2012-10-22T10:33:24.347
> 
> 标签：sql, postgresql

我有一个复杂的问题。我将尝试用示例来解释它：

有一个表有主键，我想加入另一个表，第一个表的主键是外键，我想如果在第二个表中有重复的外键来选择重复性的数量。例如：

第一张表：

```
 id    name 
  ---  -----
  1     Greg
  2     Alan 
  3    George 
  4     John 
  5     Peter 
```

第二张桌子

```
 id       aid        data   
 ---     -----      -------
 1        2          CCCV   
 2        2          VVVV 
 3        3          DDDDD 
 4        3          SSSS 
 5        4          PPPPP 
```

我希望加入的结果是：

```
 id(1st table)  aid   name    Data   Number
 -----------    ----  -----   -----  -----
 1               null  Greg    null   1
 2                1    Alan    CCCV   1
 2                2    Alan    VVVV   2
 3                3    George  DDDDD  1
 3                4    George  SSSS   2
 4                5    John    PPPPP  1
 5               null  Peter   null   1 
```

我搜索了很多，我找不到任何东西。也许我不知道如何搜索，或者没有我想做的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:54:09.563

根据我的评论，您已经标记了 MySQL 和 PostgreSQL。

这个答案适用于 PostgreSQL。

```
SELECT
  table1.id,
  table2.aid,
  table1.name,
  table2.data,
  ROW_NUMBER() OVER (PARTITION BY table1.id ORDER BY table2.aid) AS number
FROM
  table1
LEFT JOIN
  table2
    ON table1.id = table2.aid 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T12:10:28.637

```
SELECT Table1.id, Table2.id as aid, Table1.name, Table2.data,
GREATEST(1, (SELECT COUNT(*)
             FROM Table2 t2
             WHERE t2.aid = Table1.id
             AND t2.id <= Table2.id))
AS number
FROM Table1
LEFT JOIN Table2
ON Table2.aid = Table1.id
ORDER BY id, aid; 
```

适用于 MySQL 和 PostgreSQL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T19:29:51.917

^(查询没有窗口函数的 PostgreSQL 8.3。)
对于*更大的表*`JOIN`，使用 a而不是[相关的子查询](http://en.wikipedia.org/wiki/Correlated_subquery)通常要快得多。
第一个查询在加入 to`Table2` *之前*`Table1`聚合值，这也应该更快：

```
SELECT t1.id, t2.aid, t1.name, t2.data, COALESCE(t2.ct, 1) AS number
FROM   Table1 t1
LEFT   JOIN  (
    SELECT x.aid, x.data, count(y.aid) + 1 AS ct
    FROM   Table2 x
    LEFT   JOIN Table2 y ON x.aid = y.aid AND x.id > y.id
    GROUP  BY x.aid, x.data
    ) t2 ON t2.aid = t1.id
ORDER  BY t1.id, t2.ct; 
```

并且`ORDER BY`应该修复。

没有子查询的替代方案。可能会更快，但是：

```
SELECT t1.id, t2.aid, t1.name, t2.data, count(*) + count(t3.id) AS number
FROM   Table1 t1
LEFT   JOIN Table2 t2 ON t2.aid = t1.id
LEFT   JOIN Table2 t3 ON t3.aid = t2.aid AND t3.id < t2.id
GROUP  BY t1.id, t2.aid, t1.name, t2.data
ORDER  BY t1.id, count(t3.id); 
```

不确定，没有用更大的集合进行测试。用 测试性能`EXPLAIN ANALYZE`。你能报告你的结果吗？

# php - 使用 PHP 保存以前的偏好/选择

> ID：13009569
> 
> 赞同：2
> 
> 时间：2012-10-22T10:33:31.297
> 
> 标签：php

这是我在这里的第一个问题，可能是一个非常简单的问题，但我真的找不到如何去做。

当我尝试用谷歌搜索时，我只遇到了 cookie 和会话，但我不知道如何使用它们，希望有更简单的方法。我今天才开始使用 PHP。

在接下来的页面中，我希望用户能够切换背景、文本颜色、文本装饰等。我也能做到这一点，但我很想找到一种方法来保存之前的选择，并将其添加到下一个。

因此，如果有人选择了红色背景颜色，那么当他们选择另一种样式（例如黑色文本颜色）时，它不应该切换回白色。

有没有简单的方法（对于像我这样的初学者）来解决这个问题？

这是迄今为止的网站： http://mark.wigf7.sde.dk/PHP/opgave_g.php?baggrundfarve= [FF8000](http://mark.wigf7.sde.dk/PHP/opgave_g.php?baggrundfarve=FF8000)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T10:37:09.930

要使用`$_SESSION` [superglobal](http://php.net/manual/en/language.variables.superglobals.php)，首先将其添加到 PHP 脚本的顶部：

```
session_start(); 
```

然后您可以存储数据并在`$_SESSION`以后访问它。

```
//Store user's selection
$_SESSION['bg_color'] = $bg_color_choice; 
```

在下一页：

```
//Use default of #FFFFFF unless user made selection.
$bg_color = isset($_SESSION['bg_color']) ? $_SESSION['bg_color'] : '#FFFFFF'; 
```

**编辑**：由于您链接到您将使用的页面：

```
$allowedColors = array(
    'FFFFFF',
    'D8D8D8',
    '000000'
);

if(isset($_GET['baggrundfarve']) && in_array($_GET['baggrundfarve'], $allowedColors)){
    $_SESSION['bg_color'] = $_GET['baggrundfarve'];
} 
```

# perl - 如何在perl中附加文件

> ID：13009575
> 
> 赞同：0
> 
> 时间：2012-10-22T10:33:58.413
> 
> 标签：perl

我有一个文件 a.txt，我有一个文件 b.txt。我正在阅读这两个文件。

让我们假设 a.txt 有：

```
Apple is a fruit.
I like java.
I am an human being.
I am saying hello world. 
```

可以说 b.txt 有

```
I am the planet earth 
```

现在我正在尝试在 a.txt 中搜索特定字符串，例如：我是人类。如果我找到这一行。我想将 b.txt 中的内容附加到 a.txt。我的输出文件应该看起来像这样

```
Apple is a fruit.
I like java.
I am the planet earth---->appended
I am an human being.
I am saying hello world. 
```

我在下面尝试，但没有帮助

```
open (FILE1 , "a.txt")
my (@fpointer1) = <FILE>; 
close FILE1

open (FILE2 , "b.txt")
my (@fpointer1) = <FILE>; 
close FILE2

#Open the a.txt again, but this time in write mode
open (FILE3 , ">a.txt")
my (@fpointer1) = <FILE>; 
close FILE3

foreach $line (@fpointer1) {

if (line to be searched is found)
--> Paste(Insert) the contents of file "b.txt" read through fpointer2

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:03:39.577

这是一个相当快速和肮脏的工作示例：

```
use warnings;
use 5.010;

open FILE, "a.txt" or die "Couldn't open file: $!"; 
while (<FILE>){
$string_A .= $_;
}

open FILE, "b.txt" or die "Couldn't open file: $!"; 
while (<FILE>){
$string_B .= $_;
}
close FILE;

$searchString = "I am an human being.";

$resultPosition = index($string_A, $searchString);

if($resultPosition!= -1){

$endPosition = length($string_A)+length($string_B)-length($searchString);

$temp_String  =  substr($string_A, 0, $resultPosition).$string_B." ";

$final_String =$temp_String.substr($string_A, $resultPosition, $endPosition) ;
}
else {print "String not found!";}

print $final_String; 
```

可能有更有效的方法来做到这一点。但你可以有一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:15:05.267

这是一个例子

```
use strict;

open(A, ">>a.txt") or die "a.txt not open";
open(B, "b.txt") or die "b.txt not open";

my @text = <B>;
foreach my $l (@text){
        if ($l =~ /I am the planet earth/sg){
                print A $&;
        }
} 
```

我想，像这样……

# hibernate - 休眠连接12

> ID：13009576
> 
> 赞同：1
> 
> 时间：2012-10-22T10:34:01.173
> 
> 标签：hibernate

我在休眠连接中遇到问题。在我的 hibernate.hbm.xml 文件中如下所示

```
<session-factory>

    <!-- Database connection settings -->
    <!-- <property name="connection.driver_class">org.hsqldb.jdbcDriver</property> 
        <property name="connection.url">jdbc:hsqldb:hsql://localhost/Test</property> -->

    <property name="connection.driver_class">com.microsoft.sqlserver.jdbc.SQLServerDriver</property>
    <property name="connection.url">jdbc:jtds:sqlserver://localhost/Test</property>
    <property name="connection.username">test</property>
    <property name="connection.password">sa</property>
    <!-- JDBC connection pool (use the built-in) -->
    <property name="connection.pool_size">1</property>

    <!-- SQL dialect -->
    <property name="dialect">
        org.hibernate.dialect.SQLServerDialect
    </property>
    <mapping resource="UserdetailsHbmFile.hbm.xml" />
    <mapping class="com.sam.UserDetails" />
</session-factory> 
```

我得到这个错误

```
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
Exception in thread "main" org.hibernate.exception.JDBCConnectionException: Cannot open connection
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:99)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:52)
    at org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:449)
    at org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:167)
    at org.hibernate.jdbc.JDBCContext.connection(JDBCContext.java:160)
    at org.hibernate.transaction.JDBCTransaction.begin(JDBCTransaction.java:81)
    at org.hibernate.impl.SessionImpl.beginTransaction(SessionImpl.java:1473)
    at RunUserDetails.main(RunUserDetails.java:18)
Caused by: java.sql.SQLException: No suitable driver found for jdbc:jtds:sqlserver://localhost/Test
    at java.sql.DriverManager.getConnection(DriverManager.java:604)
    at java.sql.DriverManager.getConnection(DriverManager.java:190)
    at org.hibernate.connection.DriverManagerConnectionProvider.getConnection(DriverManagerConnectionProvider.java:133)
    at org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:446)
    ... 5 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:50:52.273

驱动程序类名称不正确。它应该是： `com.microsoft.jdbc.sqlserver.SQLServerDriver`

# wpf - 在选择 treeveiw 根节点时启用按钮

> ID：13009577
> 
> 赞同：0
> 
> 时间：2012-10-22T10:34:02.600
> 
> 标签：wpf, xaml, treeview

我有一个树视图

```
<TreeView HorizontalAlignment="Stretch" Name="tvLocations" VerticalAlignment="Stretch" /> 
```

还有一个按钮

```
 <Button Name="cmdUpdateLocation" Grid.Row="1" Content="Update" Width="80" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,88,0">
        <Button.Style>
            <Style TargetType="{x:Type Button}">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding ElementName=tvLocations, Path=SelectedItem}" Value="{x:Null}">
                        <Setter Property="IsEnabled" Value="False"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </Button.Style>
    </Button> 
```

无论他们单击树的哪个级别，这都会启用该按钮。我想在选择树视图中的项目时启用按钮，但前提是它是根节点，或者如果它不是根节点则禁用按钮。如果他们选择的节点是根节点，我可以在 XAML 中检测到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:37:59.410

恐怕不是直接的。如果您`TreeView.Items`属于这种类型，则`TreeViewItem`可以使用此处描述的解决方案：[WPF Treeview root node](http://marlongrech.wordpress.com/2008/03/15/wpf-treeview-root-node/)。

```
<Style TargetType="{x:Type Button}">
    <Setter Property="IsEnabled" Value="False" />
    <Style.Triggers>
        <DataTrigger Binding="{Binding ElementName=tvLocations, Path=SelectedItem.(local:MyTreeView.IsRootNode)}" Value="True">
            <Setter Property="IsEnabled" Value="True" />
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

如果您`TreeView.Items`属于任何其他类型，我认为您必须为您的项目实现一个额外的 IsRootNode 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T14:54:27.397

我找到了一个不需要代码的替代解决方案。使用带有绑定的触发器，该绑定查找 TreeViewItem 类型的祖先并在它等于 {x:Null} 时触发。这将为根节点触发，因为它没有 TreeViewItem 祖先。以下示例触发器可防止根节点折叠：

```
<DataTrigger Binding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type TreeViewItem}}}" Value="{x:Null}">
    <Setter Property="Visibility" Value="Visible" TargetName="ItemsHost" />
</DataTrigger> 
```

# javascript - 检索特定博客的帖子标题和链接

> ID：13009578
> 
> 赞同：0
> 
> 时间：2012-10-22T10:34:09.650
> 
> 标签：javascript, html, blogger

我想制作一个个性化的博客存档以显示在小部件中。那么有没有办法获取特定博客的所有帖子标题和链接？最好使用升序日期。

更好的是可以以某种方式对帖子进行分组。假设我有一个分为 3 个帖子的主题。查看者在侧栏中看到该主题，当他单击它时，其他部分可见。这使得浏览更容易。现在我有这个博客标准的分层列表。这是一团糟，如果我能像描述的那样对我的博客进行分组会更好。

我不想发明轮子，但我的搜索没有在现有小部件或如何开发类似的东西上产生任何结果。

示例：我写有关小工具的博客，因此我将手机博客标记或归类为“手机”。应该显示这样的列表。

```
-Phones(4) <-click to expand
  -Iphone 2
  -Iphone 3
  -Samsung galaxy S (part 1)
  -Samsung galaxy S (Part 2) 
```

现在，如果我使用标签，标签的所有内容都会显示出来。我只想显示个人博客。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T09:40:49.663

我想我必须解决我自己的 javascript 插件并在每次发布新内容时对其进行编辑。

# solr - Apache Solr 多词关键字

> ID：13009581
> 
> 赞同：0
> 
> 时间：2012-10-22T10:34:13.723
> 
> 标签：solr, keyword

我想问一下有没有关于如何用 Solr 实现多词关键字列表的下降教程。

我的输入数据集包括关于某个主题的多个标题和描述（例如：“Mark Aurel”）。作为标题和描述，我有多个来源，例如（wikipedia & co.），标题为 h1 和 h2，描述为文本。现在我想显示来自这些来源的关键词，最好的来源优先级，而不是加权标题>描述。

关键字应如下所示：

“罗马皇帝”、“哲学家”……等等

没有 Aaswer，所以这里有更多关于这个话题的信息。输入数据将来自 php 作为数组：

```
$input[0] = array ('id' => some_md5, 'title' => 'Title Nr. 1', 'desc' => 'Desc Nr.1', 'author' => 'Mark Aurel')
$input[1] = array ('id' => some_md5, 'title' => 'Title Nr. 2', 'desc' => 'Desc Nr.2', 'author' => 'Mark Aurel') 
```

让我们把问题分解成几个部分：

1.  如何进行多字段分面搜索。让我们说一下标题和描述？
2.  为我的关键字列表获取有意义的单词的最佳分析器是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T00:18:40.397

要一次针对多个字段搜索关键字，请使用 dismax/edismax 参见：[http ://wiki.apache.org/solr/ExtendedDisMax](http://wiki.apache.org/solr/ExtendedDisMax)

将 qf 参数设置为类似于`qf=title^3 author^2 desc`此示例的内容，使标题和作者字段的权重/重要性高于 desc。

# ocean - Windows CDO 可以启用 RPT 吗？

> ID：13009587
> 
> 赞同：2
> 
> 时间：2012-10-22T10:34:42.130
> 
> 标签：ocean

有谁知道是否可以 RPT 启用 Windows 自定义域对象（例如 2D 窗口的子对象）。当以与其他自定义域对象相同的方式实现时，它似乎不起作用......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:53:54.430

是的，这应该可以通过让您的 CDO 实现`Slb.Ocean.Petrel.Basics.ISyncable`接口来实现。

# android - Android Gmail 客户端不支持 Html 行（水平规则）

> ID：13009589
> 
> 赞同：4
> 
> 时间：2012-10-22T10:34:57.920
> 
> 标签：android, html, gmail

![在此处输入图像描述](../Images/6e8babc777383b9511214eb66f2b05db.png)

**这是 Android Gmail 客户端撰写消息框的示例图像，这里我必须使用自定义 html 消息**在位置（这两个语句之间的红色标记）插入一行（借助 Hr 标签或表格的 Html 行），我尝试了很多不同的方式，但我没有得到任何线路。

请分享您对这个问题的想法。任何关于 Android Gmail 客户端中 Html 支持的建议都将受到高度赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T02:17:03.710

可以考虑使用边框吗？如果您正在寻找的效果可以通过边框来实现，我发现`hr`通常需要付出太多努力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:36:54.170

尝试这个：

```
hr {
height: 1px;
border: 0;
background: #line_color;
display: block;
} 
```

希望有帮助。

# java - Hashmap内部流程同时获取Value

> ID：13009605
> 
> 赞同：1
> 
> 时间：2012-10-22T10:35:55.353
> 
> 标签：java, string, map

当我写

```
String str1 = new String("hello");
String str2 = new String("hello"); 
```

afaik，即使字符串内容相同，`str1`并且`str2`将指向单独的内存位置，因为它将在堆中而不是在池中引用。

在这种情况下，当我执行下面的程序时，为什么当字符串的两个实例（键）不同时它会给我一个值？那么为什么用户定义的对象没有发生同样的情况呢？

```
String str1 = new String("hello");
String str2 = new String("hello");
AB obj1 = new AB();
BC obj2 = new BC();

HashMap h = new HashMap();
h.put(str1, "data");
h.put(obj1, "data1");

System.out.println(h.get(str2));
System.out.println(h.get(obj2));

class AB {
  int code = 10;
}

class BC {
  int code = 10;
} 
```

输出：

```
data
null 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:38:57.590

因为 HashMap 用于`equals`比较键。尽管您的 2 个字符串是不同的实例，但它们是[相等](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#equals%28java.lang.Object%29)的。

您的自定义对象不能相等，因为它们甚至不是同一类型。即使它们属于同一类型，除非您重写从[`equals`继承的方法`Object`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)，否则2 个不同的实例（使用 创建`new`）将不相等。

请注意，如果您覆盖`equals`，您还需要覆盖`hashCode`以避免意外行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:48:24.880

HashMap.get() 函数调用 Object.hashCode() 方法来创建键值。但是，String 类会覆盖此方法，并根据值进行计算。如果我们覆盖这些（AB 和 BC）类的 hashCode 函数，我们会找到相同的解决方案。

字符串哈希码（）：

```
public int hashCode() {
int h = hash;
    int len = count;
if (h == 0 && len > 0) {
    int off = offset;
    char val[] = value; // get value of string.

        for (int i = 0; i < len; i++) {
            h = 31*h + val[off++];
        }
        hash = h;
    }
    return h;
} 
```

这是 HashMap.get() 方法

```
public V get(Object key) {
    if (key == null)
        return getForNullKey();
    int hash = hash(key.hashCode());// it calculate at here.
    for (Entry<K,V> e = table[indexFor(hash, table.length)];
         e != null;
         e = e.next) {
        Object k;
        if (e.hash == hash && ((k = e.key) == key || key.equals(k)))
            return e.value;
    }
    return null;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T10:40:16.827

在使用某些对象作为哈希映射中的键时达成了一项协议，
您现在必须覆盖哈希码和等于方法，因为 String 类会这样做 ，如果您以所需的方式覆盖 AB 和 BC 的哈希码和等于方法，您
将从第一个 sysout 获取“数据”，您将
从第二个 sysout 获取 data1

并且 str1 和 str2**不会**指向单独的内存位置

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T10:40:59.010

因为HashMap会首先根据字符串对象的hashcode找到正确的bucket。一旦找到bucket，之后会调用Equals方法来比较key。

Ps 请注意，Equals 比较被 String 类覆盖，因此它不仅根据引用进行比较，而且根据内容进行比较。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T10:41:06.200

比较`String`s 的内容。不是实际的对象或参考。

由于`str1`和`str2`都具有相同的内容，因此它为您提供了`HashMap`.

HashMap 使用`equals`方法来搜索其中的确切键。由于`str1.equals(str2)`results in `true`，因此找到了键，因此`get`方法返回了值。

尝试如下编辑您的课程，您会感到惊讶：

```
class AB 
{   
    int code = 10; 
    public boolean equals(Object argument)
    {
        if(argument instanceof AB || argument instanceof BC)
            return true;
        return false;
    }
}  

class BC 
{   
    int code = 10; 
    public boolean equals(Object argument)
    {
        if(argument instanceof AB || argument instanceof BC)
            return true;
        return false;
    }
} 
```

现在，您的第二条`System.out.println(h.get(obj2));`语句也将返回它的映射数据。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T10:47:23.420

map 的实现方式是利用类的 hashCode 和 equals 方法。

首先，当您将类的实例添加到地图时，地图的实现会将该实例放入存储桶中。这就是为什么正确实现 hashCode 以确保映射中的存储桶有效分布的重要原因。

使用equals方法是为了判断bucket中的哪个实例是你要的实例，所以正确实现equals很重要。

在您的情况下， String 实现了 hashCode 和 equals 正确，而您的用户定义的对象不是同一类型，因此不能相等（无论如何您都不会覆盖 equals 或 hashCode）。

# internet-explorer - 指向其他文件类型的 Web 链接标记不起作用

> ID：13009606
> 
> 赞同：0
> 
> 时间：2012-10-22T10:35:58.460
> 
> 标签：internet-explorer, hyperlink, local

如果我的 html 中有 web 标签的标记，我将无法打开 pdf、xls、txt ......除了 html 之外，不会打开其他文件类型。我需要这个标签，因为我需要 html 在 ie 下工作。

请为此提出一些解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:29:44.147

对此没有什么好的破解方法，解决方案就是去掉网络评论的标记，让用户在允许被阻止的内容弹出窗口上点击接受。

# mysql - 如何计算类别中的产品

> ID：13009607
> 
> 赞同：1
> 
> 时间：2012-10-22T10:35:58.620
> 
> 标签：mysql, doctrine, nested

我有一个嵌套集合模型中的类别表，我想用他们有多少产品来分类。像这样的东西

```
Categories-(6)
    Cars-(4)
      BMW-(2)
      Opel-(1)
      Mercedes-(1)
    Trucks-(2)
      Man-(1)
      Mercedes-(1) 
```

我有两张桌子，`categories`并且`types`

分类：`id,name,level,lft,rgt`

类型：`id,category_id,name`

现在我可以只列出这些类别：

```
$categories = Doctrine_Core::getTable('Category')
  ->createQuery('c1')
  ->select('c1.id, c1.level, c1.name')
  ->innerJoin('c1.Category c2 ON ( c1.lft BETWEEN c2.lft AND c2.rgt )')
  ->andWhere(' c2.id = ?', $id)
  ->andWhere('c1.level > 0')
  ->andWhere('c1.level < c2.level+3')
  ->groupBy('c1.id')
  ->orderBy('c1.lft')
  ->execute(); 
```

反正有没有像上面那样返回计数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:05:50.663

```
select table1.name,table2.countcars
from categories as table1 right join 
     (select category_id,count(*) as countcars 
        from cars group by category_id) as table2 
  on table1.id=table2.category_id; 
```

你会得到

```
 BMW-(2)
    Opel-(1)
    Mercedes-(1) 
```

从上面的查询

对于 Cars-(4) 你只需要这样做

```
select count(*) as numberOfCars from cars; 
```

# c# - 将 WPF 数据网格源设置为一组字符串数组

> ID：13009612
> 
> 赞同：0
> 
> 时间：2012-10-22T10:36:20.163
> 
> 标签：c#, wpf, datagrid

我有许多字符串数组。例如一个包含 13 个用户名的数组，然后是一个包含 13 个密码的单独数组。有人可以告诉我将这些数据放入 WFP 数据网格的最有效方法是什么？

我能想到的简单选项是遍历数组，挑选出值并将它们作为一行添加到数据网格中，但我想知道是否可以将数组作为列传递或其他什么？

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:42:52.627

DataGrid 适用于属性（列）和项目（行）概念。因此，对象集合、数据表或 XML 等数据结构最适合`DataGrid`直观地加载数据。

对于普通值类型的数组，您必须将它们转换为数据结构。使用 linq 为您带来优势...

```
 var consolidatedList = 
     arrayUserName.Select(
           usrNm => 
             new {
                   UserName = usrName, 
                   Password = arrayPasswords[arrayUserName.IndexOf(usrName)]
                 }).ToList();

 dataGrid.ItemsSource = consolidatedList; 
```

当然，对于数组中的大量项目，列表生成会很慢。在这种情况下，运行一个循环或使用 PLINQ（在 .Net 4.0 的情况下）。

# php - PHP 子类没有调用它的父类构造

> ID：13009613
> 
> 赞同：2
> 
> 时间：2012-10-22T10:36:26.133
> 
> 标签：php, oop

我有一些这样设置的类，其中 -> 表示“扩展”：

```
DBObject -> Article -> Activity 
```

`DBObject`包含一个泛型`__construct`，可以轻松地从数据库中加载我的对象（因此`DataBaseObject`）。

`Article`覆盖 this `__construct`，用于一些特殊的构造函数行为。

`Activity`不实现 any `__construct`，因为它可以由它的超类' `__construct`( `Article::__construct`) 处理。

但是，由于某种原因，如果我打电话

```
$activity = new Activity($args); 
```

它以 结尾`DBObject::__construct`，并一起通过了 Article 的。我一直认为对子类的调用应该一次一个类地沿着子类线路上行。我这样想错了吗？

**编辑**：这是一个代码片段： http: [//pastebin.com/SXpSNVMm](http://pastebin.com/SXpSNVMm)。我删除了所有不必要的代码。我这样称呼它：

```
$userId = 60;
$title = "TestTitle";
$contents = "Lorem ipsum dolor sit amet";
$date = 1356173771;

echo "creating new activity\n";
$a = new Activity($userId, $title, $contents, $date); 
```

将 echo 放置在构造函数中显示`Article::__construct()`未使用它，它直接到`DBObject::__construct()`.

**编辑 2**：这是一个应该可以正常工作的版本：http: [//ideone.com/VJzdI3](http://ideone.com/VJzdI3)。我正在使用 PHPUnit 进行测试。如果我使用 PHPUnit 运行，这是输出：

```
creating new activity 
DBObject constructed called 
QUERY: 60 ERROR: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '60' at line 1 
```

后者意味着它正在尝试使用 meekrodb 对其进行初始化；只有当我使用数组`new`以外的东西调用 DBObject 的子类时，才会发生这种情况。`null`但是，由于 Article 应该覆盖 __construct，所以应该首先调用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:40:22.100

您的理解是正确的：使用您描述的设置创建一个新的`Activity`肯定会“推迟”到`Article::__construct`. 如果没有，那么您的描述和实际代码必须有所不同。PHP 有相当多的错误，但这是一个非常简单的场景，可以将令人惊讶的行为归因于错误代码。

如果您仍然认为代码没有问题，请在显示问题的在线键盘（如 htpp://ideone.com）上发布工作示例。

# svn - svn 创建一个分支

> ID：13009615
> 
> 赞同：0
> 
> 时间：2012-10-22T10:36:29.977
> 
> 标签：svn

我创建了一个名为 Project 的存储库，但它是一个目录，现在我需要创建一个分支。

所以我的想法是使用目录结构创建一个名为 Project_prod 的新仓库：

*   树干
*   分支机构
*   标签

并将 repo 从 Project 移动到 Project_prod/trunk 是否可能？

我是否必须在主干/分支中创建（svnadmin create）存储库而不是移动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:56:14.180

无需创建新的存储库来完成此操作。

您可以在当前存储库的根目录中创建目录“trunk”、“branches”和“tags”。（“svn mkdir” [http://svnbook.red-bean.com/en/1.0/re17.html](http://svnbook.red-bean.com/en/1.0/re17.html)）

然后将当前内容移动到主干目录中。（“svn 移动” [http://svnbook.red-bean.com/en/1.0/re18.html](http://svnbook.red-bean.com/en/1.0/re18.html)）

您还可以使用任何类型的 svn explorer 来处理目录创建和移动操作。

# sql - Azure 多租户安全 - Azure 联合 SQL、证书等

> ID：13009617
> 
> 赞同：3
> 
> 时间：2012-10-22T10:36:34.593
> 
> 标签：sql, encryption, azure, certificate, federated

我正在尝试就如何在 Azure 上处理安全架构获得一些建议。

*背景：*

我们正在考虑在 Azure 上构建一个需要非常安全（个人敏感数据）的多租户应用程序。该应用程序将由标准浏览器和移动设备访问。

*安全访问类型：*

我们有三种类型的用户/访问类型...

1 - 通过 https 的普通旧用户/密码很好，访问通用、非私有 SQL 和托管文件

2 - 用户/通过 https，但需要通过将安装在用户机器/设备上的证书对用户进行身份验证。此级别的用户将需要访问敏感数据，这些数据应在数据库和任何上传的文件中进行静态加密。

3 - 与 (2) 相同，但增加了一些两因素身份验证（我们已将 YubiKey 用于其他事情 - 也可能会考虑提供电话 OTP 产品）

大多数用户只能访问他们自己的租户数据库，但是我们有“客户经理”类型的用户需要访问选定的租户数据，因此我们希望他们需要为他们服务的每个租户提供一份证书的副本，或者我们将必须使用某种主证书。

*数据库类型：*

从多租户的角度来看，Azure Federated SQL 似乎是一个不错的选择，因为 (a) 我们只需在每个表中编写一个带有“TenentID”键的应用程序，然后在登录后设置一个全局过滤器来处理隔离我们 (b) 我们了解 Azure 联合 SQL 实际上在后台为每个租户维护单独的 SQL 数据库实例。（参考： http: [//msmvps.com/blogs/nunogodinho/archive/2012/08/11/tips-amp-tricks -to-build-multi-tenant-databases-with-sql-databases.aspx](http://msmvps.com/blogs/nunogodinho/archive/2012/08/11/tips-amp-tricks-to-build-multi-tenant-databases-with-sql-databases.aspx) )

任何人都可以指向任何链接或就设置和管理文件共享所需的方法、SQL 和静态文件数据的加密、用户身份验证等（新用户注册首选项的自动管理）提供建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T12:54:00.087

我对证书无能为力，但您确实需要一些“主证书”。如果您计划使用 Azure 网站，目前您不能使用自己的证书。

关于数据库设置。SAAS 应用程序建立在信任之上，因此您永远（永远）不希望向其他用户显示或编辑使用的数据。因此，我强烈建议您不要为每个表使用 TenantID。这仍然有可能受到恶意用户的攻击或某些开发人员的错误。

规避这些风险的唯一方法是

1.  广泛的测试
2.  物理不同的表来存储每个租户的数据。

我个人认为，即使进行了非常广泛的+自动化测试，您也无法对恶意用户进行 100% 的代码覆盖。我想我并不孤单。

恕我直言，唯一的出路是物理不同的表。让我们看看选项：

1.  不同的服务器：有效，但在 azure 中相当昂贵
2.  不同的数据库：有效，管理开销更少，但与前一个选项相同的反对意见 - 如果您有很多租户，则成本很高
3.  不同的架构：解决方案。想一想...
    *   您只需要管理用户和默认架构
    *   您可以使用 powershell 备份架构
    *   您可以通过一些工作将架构移动到其他数据库
    *   如果需要，您仍然可以深入研究 SQL 联合。
    *   主要缺点是您需要支持每个租户的数据库升级。

您是否在 azure.com 上阅读过任何有关多租户的文章？ [http://msdn.microsoft.com/en-us/library/windowsazure/hh689716.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh689716.aspx)

# php - 通过计算从设定日期到现在时间的秒数来创建唯一的文件名。

> ID：13009618
> 
> 赞同：0
> 
> 时间：2012-10-22T10:36:40.987
> 
> 标签：php

在阅读了一些主题和文章后，我想出了以下代码：

```
$timeFirst  = strtotime('1971-01-01 00:00:00');
$timeSecond = date("s");
$filename = $timeFirst - $timeSecond; 
```

我基本上想要一个唯一的数字用作文件名，并且从设定日期到现在的秒数永远不会相同，这似乎是一个不错的选择。然而这个数字正在下降，除非我随着时间倒退（不太可能）是不正确的。谁能告诉我为什么我的语法是错误的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:42:18.183

要给出唯一的文件名，只需在实际文件名后面加上 time()。

例如，如果文件名是 dummy.png，则在 time() 后面附加“dummy”；

$file_name=“虚拟”.time();

$file_name 会给你一个唯一的文件名。

# magento - Magento - 返回空白/空成功页面

> ID：13009620
> 
> 赞同：1
> 
> 时间：2012-10-22T10:36:54.320
> 
> 标签：magento

我对 Magento 的成功页面有疑问。希望有人可以帮助我。问题是什么; 整个网站完全运行，完全没有错误。但是当客户填写完整的单页结账时，客户会前往支付服务提供商 (PSP) 进行付款。PSP 将客户发送回 {domein}/checkout/onepage/success，这应该是正确的。但是……这个页面完全是空的。我已经更改了 memory_limit，启用了开发人员日志，启用了 index.php 中的 display_errors 并查看了 Apache 中的日志文件。但是页面上没有任何错误显示，现在错误显示在日志文件中。

订单处理成功，所以只有显示错误。

请帮助解决此问题或解决方法。我需要这个页面来跟踪附属公司，这些需要 transactionID 和 transactionamount。

PS：我们使用 Magento 1.7.0.2，主题 ma_housestore 和 PSP Buckaroo

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:14:52.857

在这种情况下，您应该在 successAction 方法的开头和之后的每隔几行记录 Mage 日志，以确保它被正确调用以及卡在哪里。

在你的情况下，`successAction`没有被正确调用。签入`Mage/Checkout/controllers/OnepageController.php`文件，您将在那里找到成功操作。

# apache - 如何为 Apache 使用自动主机？

> ID：13009622
> 
> 赞同：0
> 
> 时间：2012-10-22T10:36:54.547
> 
> 标签：apache, ubuntu, configuration, apache2

我在 Apache 网络服务器上阅读了[一篇关于自动主机的文章。](http://everzet.com/post/33810120695/autohosts-for-symfony-projects-on-mac)我认为这是一个很棒的解决方案，但它适用于 Ubuntu 吗？找不到任何信息如何使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:51:59.353

它独立于操作系统工作：

[http://httpd.apache.org/docs/2.4/vhosts/mass.html](http://httpd.apache.org/docs/2.4/vhosts/mass.html)

# php - Libmemcached 出错

> ID：13009625
> 
> 赞同：0
> 
> 时间：2012-10-22T10:36:59.427
> 
> 标签：php, debian, hiphop, libmemcached

我对 libmemcached 的 make 命令有问题，它在命令末尾附近抛出所有这些错误

```
CXX    example/memcached_light.o
example/memcached_light.cc:40:19: error: event.h: No such file or directory
  CXX    example/storage.o
  CXX    util/daemon.o
example/memcached_light.cc:62: error: field 'event' has incomplete type
example/memcached_light.cc: In function 'void drive_client(memcached_socket_t, short int, void*)':
example/memcached_light.cc:130: error: 'EV_WRITE' was not declared in this scope
example/memcached_light.cc:135: error: 'EV_READ' was not declared in this scope
example/memcached_light.cc:138: error: 'struct connection' has no member named 'event'
example/memcached_light.cc:138: error: 'event_set' was not declared in this scope
example/memcached_light.cc:139: error: 'struct connection' has no member named 'event'
example/memcached_light.cc:139: error: 'event_base_set' was not declared in this scope
example/memcached_light.cc:141: error: 'struct connection' has no member named 'event'
example/memcached_light.cc:141: error: 'event_add' was not declared in this scope
example/memcached_light.cc: In function 'void accept_handler(memcached_socket_t, short int, void*)':
example/memcached_light.cc:187: error: 'struct connection' has no member named 'event'
example/memcached_light.cc:187: error: 'EV_READ' was not declared in this scope
example/memcached_light.cc:187: error: 'event_set' was not declared in this scope
example/memcached_light.cc:188: error: 'struct connection' has no member named 'event'
example/memcached_light.cc:188: error: 'event_base_set' was not declared in this scope
example/memcached_light.cc:189: error: 'struct connection' has no member named 'event'
example/memcached_light.cc:189: error: 'event_add' was not declared in this scope
example/memcached_light.cc: In function 'int main(int, char**)':
example/memcached_light.cc:596: error: 'event_init' was not declared in this scope
example/memcached_light.cc:608: error: 'struct connection' has no member named 'event'
example/memcached_light.cc:608: error: 'EV_READ' was not declared in this scope
example/memcached_light.cc:608: error: 'EV_PERSIST' was not declared in this scope
example/memcached_light.cc:608: error: 'event_set' was not declared in this scope
example/memcached_light.cc:610: error: 'struct connection' has no member named 'event'
example/memcached_light.cc:610: error: 'event_base_set' was not declared in this scope
example/memcached_light.cc:611: error: 'struct connection' has no member named 'event'
example/memcached_light.cc:611: error: 'event_add' was not declared in this scope
example/memcached_light.cc:629: error: 'event_base_loop' was not declared in this scope
make[1]: *** [example/memcached_light.o] Error 1
make[1]: *** Waiting for unfinished jobs....
make[1]: Leaving directory `/opt/hiphop/libmemcached-1.0.13'
make: *** [all] Error 2 
```

我正在尝试按照我找到的[这些说明在 64 位 debian 挤压上安装 phphiphop。](http://web-site-creation.org/agence/article28/installer-php-hiphop-debian-squeeze)我使用的是比说明更新的版本，但旧版本也会发生同样的情况，并且 phphiphop 说它支持 0.39+。任何帮助都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:44:13.797

看起来像 libevent 并且它`event.h`在机器上不可用。尝试

```
apt-get install libevent-dev 
```

# android - Android制作照片然后在三星手机上发送附件

> ID：13009626
> 
> 赞同：2
> 
> 时间：2012-10-22T10:37:03.793
> 
> 标签：android, android-camera, android-image, android-camera-intent

您好，我已经构建了一个 Android 应用程序，它使用相机拍照，然后将其作为电子邮件附件发送。

它在 htc 手机上运行良好，但在三星 Galaxy 上无法运行，它只向我的邮件发送一个空附件。

有人建议如何解决这个问题吗？

我的代码：

```
 private final static int TAKE_PHOTO_CODE = 1;
File downloadedPic = null;
Intent in;
boolean taken = false;

//NEW
private static int TAKE_PICTURE = 1;
private Uri outputFileUri;

    private void TakePhoto() {
    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    File file = new File(  
            Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES), "fotowedstrijd.jpeg");
    outputFileUri = Uri.fromFile(file);
    intent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);
    startActivityForResult(intent, TAKE_PICTURE);
}

private void sendPhoto(){
Intent picMessageIntent = new Intent(Intent.ACTION_SEND);
picMessageIntent.putExtra(Intent.EXTRA_EMAIL  , new String[]{"info@wemait.nl"}); //fotowedstrijd@openbedrijvendagemmen.nl
picMessageIntent.putExtra(Intent.EXTRA_SUBJECT, "Fotowedstrijd inzending Openbedrijvendag Emmen");
picMessageIntent.putExtra(Intent.EXTRA_TEXT   , "Mijn inzending voor de fotowedstrijd");
picMessageIntent.setType("image/jpeg");  
File downloadedPic =  new File(  
    Environment.getExternalStoragePublicDirectory(  
    Environment.DIRECTORY_PICTURES),  
    "fotowedstrijd.jpeg");  
picMessageIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(downloadedPic));  
startActivity(picMessageIntent); 
//startActivity(Intent.createChooser(picMessageIntent, "Send your picture using:"));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:26:00.937

我发现了什么： [Android ACTION_IMAGE_CAPTURE Intent](https://stackoverflow.com/questions/1910608/android-action-image-capture-intent)

它说的是 MediaStore.ACTION_IMAGE_CAPTURE 可能存在错误。

我想到了别的东西：也许您的三星手机上不存在该目录，因此您必须先创建它。

只是一些初步的猜测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-04T08:36:58.787

请看一下我的提取代码，我曾经在我的三星 Galaxy S2 上遇到过同样的问题，例如：

1.  我使用的是三星 Galaxy S2，我无法将附件照片放在电子邮件客户端上，所以我从另一个专门为三星制作教程的人那里复制了代码，它可以工作。

2.  当我选择通过三星拥有的默认电子邮件客户端发送电子邮件时，该应用程序崩溃，但当我从 gmail 电子邮件客户端发送它时它可以工作。

我的代码在这里：[Android 拍照并将其作为电子邮件的附件发送，图像视图在旋转时重置](https://stackoverflow.com/questions/21546069/android-take-photo-and-send-it-as-an-attachment-to-an-email-imageview-reset-on)

在 onActivityResult 方法中，我检查相机的请求代码，然后在 imageview 上加载我拍摄的照片，之后很容易将其作为附件放入（我在方法 email() 上执行此操作）。

# macos - 从终端和 iTerm “-bash：fork：资源暂时不可用”得到奇怪的行为

> ID：13009632
> 
> 赞同：16
> 
> 时间：2012-10-22T10:37:19.463
> 
> 标签：macos, bash

当我打开 iTerm 时，我收到以下消息：

> 上次登录：10 月 22 日星期一 12:20:25 在 ttys002
> -bash: fork: 资源暂时不可用
> -bash-3.2$

当我打开终端时，我得到：

> 上次登录时间：10 月 22 日星期一 12:25:47 on ttys002
> -bash: fork: 资源暂时不可用
> Williams-MacBook-Pro:~ william$

每当我尝试输入命令时，例如 ls 或 cd 我都会收到以下错误消息：

> -bash: fork: 资源暂时不可用

所以我基本上什么都做不了。我试过谷歌搜索错误消息，但没有得到任何地方。如果有帮助，我正在使用 Mountain Lion 的 Mac。谢谢。

编辑：

我跑了“ps”

获取进程状态，我得到了来自终端的响应：

> Williams-MacBook-Pro:~ william$ ps
> PID TTY TIME CMD
> 203 ttys000 0:00.08 -bash
> 254 ttys001 0:00.03 bash /Users/william/.rvm/scripts/wrapper ruby​​-1.9.3-p2
> 553 ttys001 0:00.03 bash /Users/william/.rvm/scripts/wrapper ruby​​-1.9.3-p2
> 785 ttys001 0:00.03 bash /Users/william/.rvm/scripts/wrapper ruby​​-1.9.3-p2
> 814 ttys001 0:00.48 -bash
> 1019 ttys001 0:00.03 bash /Users/william/.rvm/scripts/wrapper ruby​​-1.9.3-p2

和消息

> bash /Users/william/.rvm/scripts/wrapper ruby​​-1.9.3-p2

一直在终端中列出几百次（无法全部发布，因为它可能不适合这个框，它只是保持不变），所以我猜那个文件有些粗略。有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T11:49:54.860

`bash`- 以及所有其他 shell -`fork`在 Unix 系统上使用系统调用来实际创建要从 shell 启动的进程。在这种情况下，`bash`告诉您系统调用以 结束`Resource temporarily unavailable`，它转换为`errno`11 的值，等于`EAGAIN`。

手册页`fork`说它可以设置`errno`为`EAGAIN`when ：

*   它无法分配足够的内存来复制父级的页表并为子级分配任务结构。
*   `RLIMIT_NPROC`由于遇到调用者的资源限制，无法创建新进程。要超过此限制，该过程必须具有`CAP_SYS_ADMIN`或`CAP_SYS_RESOURCE`能力。

在这种情况下，我认为第一个原因听起来并不现实，除非您实际上内存不足，所以我想您一定已经达到了用户运行进程数的限制。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-07T20:57:47.893

请参阅设置更高的进程数限制。

[http://blog.ghostinthemachines.com/2010/01/19/mac-os-x-fork-resource-temporarily-unavailable/](http://blog.ghostinthemachines.com/2010/01/19/mac-os-x-fork-resource-temporarily-unavailable/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-01T14:05:25.527

对于 iTerm，打开一个新标签对我有用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-09T16:29:04.207

要在 Yosemite 和更新版本的 Mac OS 上解决问题，请使用[https://superuser.com/a/838630](https://superuser.com/a/838630)。我能够通过更新`plist`文件并重新启动来解决 - 这些`ulimit`命令是不必要的。

# c# - 我如何在代码隐藏中处理 Jquery 选项卡关闭

> ID：13009634
> 
> 赞同：1
> 
> 时间：2012-10-22T10:37:26.913
> 
> 标签：c#, jquery, asp.net

我使用 jquery 选项卡。

```
 <%@ register src="~/UserControls/Order/Control/OrderProductLicense.ascx" tagname="OrderProductLicense"      tagprefix="uc1" %>
    <script type="text/javascript">
        $(function() {
            $("#tabs").tabs({
                closable: true,
                cache: true,
                show: function() {
                    var selectedTab = $('#tabs').tabs('option', 'selected');
                    $("#<%= hdnSelectedTab.ClientID %>").val(selectedTab);
                },
                selected: <%= hdnSelectedTab.Value %>
            });
        });
    </script>
    <table width="100%">
        <tr>
            <td>
                <div id="tabs">
                    <ul>
                        <asp:Repeater ID="rptTabs" runat="server">
                            <ItemTemplate>
                                <li><a href="#tabs-<%#DataBinder.Eval(Container,"ItemIndex","") %>">
                                    <%#Eval("Id") %></a></li>
                            </ItemTemplate>
                        </asp:Repeater>
                    </ul>
                    <asp:Repeater ID="rptTabsSub" runat="server">
                        <ItemTemplate>
                            <div id="tabs-<%#                DataBinder.Eval(Container, "ItemIndex", "") %>">
                                <uc1:OrderProductLicense ID="OrderProductLicense1" runat="server" />
                            </div>
                        </ItemTemplate>
                    </asp:Repeater>
                </div>
                <asp:HiddenField ID="hdnSelectedTab" runat="server" Value="0" />
            </td>
        </tr>
    </table> 
```

我的标签有关闭按钮。但是我想当一个人在我想用我选择的标签文本删除会话列表中的一些数据之后关闭我的标签。例如。

```
 public void TabClosing(object sender, string tabText)
    {
        MySession.OrderProductIdList.RemoveAll(p => p.ItemText == tabText);
    } 
```

怎么能写出这样的代码？

最好的祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:19:48.253

在脚本管理器中设置 EnablePageMethods = true

```
 <input type="button" id="btnClose" value="Close" onclick="DeleteEntryFromSession();"/>

//javascript
function DeleteEntryFromSession()
{
        PageMethods.DeleteSessionEntry(para1,function(result)
        {
            //Success
            //your closing code comes here

        } ,function(error){  //error});
}

//c#
[WebMetod]
public static string DeleteSessionEntry(string para1)
{
  try
  {
       // HttpContext.Current.Session["sessionName"]; //To Get session 
       //Delete Entry from Session
       return "true"
  }
  catch(Exception)
  {
       throw;
  }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:33:30.187

标记：

```
 <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />
 <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
 <script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
 <script type="text/javascript">
      $(function () {
           $("#tabs").tabs({
           });

           $("#tabs span.ui-icon-close").on("click", function () {
                var itemId = $(this).data().id;
                $(this).closest("li").remove();
                $("#tabs-" + itemId).remove();
                $("#tabs").tabs("refresh");

                $.ajax({
                     url: '<%= ResolveClientUrl("~/WebForm1.aspx/DeleteRecord") %>',
                     type: "POST",
                     dataType: "json",
                     contentType: "application/json; charset=utf-8",
                     data: JSON.stringify({ id: itemId })
                });
           });
      });
 </script>

 <div id="tabs">
      <ul>
           <asp:Repeater runat="server" ID="rptTabs">
                <ItemTemplate>
                     <li><a href='<%# Eval("ID", "#tabs-{0}") %>'>
                          <%# Eval("Title") %></a> <span class="ui-icon ui-icon-close" data-id='<%# Eval("ID") %>'>Remove Tab</span>
                     </li>
                </ItemTemplate>
           </asp:Repeater>
      </ul>
      <asp:Repeater runat="server" ID="rptTabsSub">
           <ItemTemplate>
                <div id='<%# Eval("ID", "tabs-{0}") %>'>
                     <%# Eval("Content") %>
                </div>
           </ItemTemplate>
      </asp:Repeater>
 </div> 
```

代码隐藏：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        var dataSource = (from id in Enumerable.Range(0, 10)
                            select new { ID = id, Title = id.ToString() + " Title", Content = Guid.NewGuid().ToString() }).ToList();

        rptTabs.DataSource = dataSource;
        rptTabs.DataBind();

        rptTabsSub.DataSource = dataSource;
        rptTabsSub.DataBind();
    }
}

[WebMethod]
public static void DeleteRecord(int id)
{
    //delete record by id
} 
```

# java - RFID用户存在检测

> ID：13009636
> 
> 赞同：1
> 
> 时间：2012-10-22T10:37:33.830
> 
> 标签：java, rfid

我正在制作一个 Java 应用程序，我想添加的功能之一是跟踪用户并向应用程序报告他们的签到时间（供管理层查看）。这是我打算向各种客户推销的 B2B 解决方案。我想弄清楚

1.  RFID 中使用的事实上的硬件/标准是什么，例如我应该购买和测试/开发哪种硬件，以便我可以让它在客户的设置上工作。
2.  我可以为此使用哪些 API。有人向我推荐了 Java-RFID API，但我不确定这是否是最好的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:43:19.270

对于测试和开发，我会看看周围的 Arduino 品种之一。我自己没有使用 Arduino*和*RFID 的第一手经验，但是平台本身很容易上手，尤其是如果您了解一些 C/C++ 的话。

只需谷歌 Arduino 和 RFID，您就会获得很多成功。

干杯，

# php - 根据php中的数组元素填充

> ID：13009641
> 
> 赞同：1
> 
> 时间：2012-10-22T10:37:47.160
> 
> 标签：php, arrays, codeigniter

这是我的代码。

```
 if(in_array("1", $mod)){ 
        $res=array('First Name','Insertion','Last Name','Lead Country');}

       if(in_array("2", $mod)){ 
        $res=array('Landline No:','Mobile No:','Lead Country');}

        if(in_array("3", $mod)){ 
        $res=array('City','State','Country','Lead Country');}

        if(in_array("4", $mod)){ 
        $res=array('Email','Lead Country');}

        return $res; 
```

到目前为止，它工作正常。但是如果数组包含多个值，比如 (1,3)，我需要返回 1 和 3 的结果。

eg：如果数组是这样的

```
 array([0]=>1 [1]=>3) 
```

然后

```
 $res=array('First Name','Insertion','Last Name','City','State','Country','Lead Country') 
```

但如果有 2 个主要国家/地区只应显示一个，该怎么做？请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:41:12.910

使用`array_merge`：

```
$res = array();
if(in_array("1", $mod)){
    $res=array_merge($res, array('First Name','Insertion','Last Name','Lead Country'));
}

// and so on ...

return $res; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:42:36.390

使用 array_merge 构建结果...

```
 $res = array();

    if(in_array("1", $mod)) { 
        $res = array_merge($res, array('First Name','Insertion','Last Name','Lead Country'));
    }

    // etc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T10:52:16.423

这是一个使用函数添加元素的示例，前提是它们尚不存在：

```
 function addItems($items, $arr)
    {
        foreach($items as $value)
        {
            if(!in_array($value, $arr))
            {
                $arr[] = $value;
            }
        }

        return $arr;
    }

    $res = array();

    if(in_array("1", $mod)){ 
    $res = addItems(array('First Name','Insertion','Last Name','Lead Country'), $res);}

    if(in_array("2", $mod)){ 
    $res = addItems(array('Landline No:','Mobile No:','Lead Country'), $res);}

    if(in_array("3", $mod)){ 
    $res = addItems(array('City','State','Country','Lead Country'), $res);}

    if(in_array("4", $mod)){ 
    $res = addItems(array('Email','Lead Country'), $res);}

    return $res; 
```

这是另一种方法，它更 OOP 并且可能更合乎逻辑，因为它不会一直将整个数组来回传递，而是使用一个保存数组的对象，并有一个添加方法，并得到最终结果：

```
 class ItemsManager
    {
        protected $items = array();

        public function addItems($items)
        {
            foreach($items as $value)
            {
                if(!in_array($value, $this->items))
                {
                    $this->items[] = $value;
                }
            }
        }

        public function getItems()
        {
            return $this->items;
        }
    }

    $im = new ItemsManager();

    if(in_array("1", $mod)){ 
    $im->addItems(array('First Name','Insertion','Last Name','Lead Country'));}

    if(in_array("2", $mod)){ 
    $im->addItems(array('Landline No:','Mobile No:','Lead Country'));}

    if(in_array("3", $mod)){ 
    $im->addItems(array('City','State','Country','Lead Country'));}

    if(in_array("4", $mod)){ 
    $im->addItems(array('Email','Lead Country'));}

    return $im->getItems(); 
```

# phpunit - PHPUnit 的几个问题

> ID：13009646
> 
> 赞同：0
> 
> 时间：2012-10-22T10:37:58.263
> 
> 标签：phpunit, kohana

我有两个控制器。它们的第一个路径是controller/news.php，第二个是controller/admin/news.php。我有每个控制器的路线。

对于控制器/管理员/news.php 我有

```
Route::set('news-admin', 'admin/news(/)', array('start' => '\d+'))
    ->defaults(array(
        'directory' => 'admin',
        'controller' => 'news',
        'action' => 'index',
        'start' => 0,
    )); 
```

对于控制器/news.php：

```
Route::set('news', 'news(/)', array('start' => '\d+'))
    ->defaults(array(
        'controller' => 'news',
        'action' => 'index',
        'start' => 0,
    )); 
```

当我使用浏览器时，一切正常。当我打电话给

> $response = Request::factory('/news')->execute()

在 unittest 中路由，测试运行。但是当我打电话给

> $response = Request::factory('admin/news')->execute()

我只收到下一条消息

```
PHPUnit 3.7.8 by Sebastian Bergmann. 
Configuration read from /home/mydir/Projects/www/kohsite/application/tests/phpunit.xml 
```

经过几次实验，我了解到我无法测试路由包含放置在子文件夹中的控制器的“目录”。

下面我展示了我的 phpunit.xml

```
<phpunit bootstrap="bootstrap.php" colors="true">
    <testsuite name="ApplicationTestSuite">
      <directory>./classes</directory>
    </testsuite>
    <filter>
        <whitelist>
            <directory suffix=".php">../tests</directory>
            <exclude>
                <directory suffix="*">../cache</directory>
                <directory suffix="*">../config</directory>
                <directory suffix="*">../logs</directory>
                <directory suffix=".php">../views</directory>
                <file>../bootstrap.php</file>
            </exclude>
        </whitelist>
    </filter>
</phpunit> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T05:55:34.320

我假设您使用的是 Kohana 3.x？我不确定您是如何设置应用程序的，但是当我设计一个具有管理控制器的站点时，我通常会创建一个不在子文件夹中的管理控制器。[默认路由可以处理对http://domain.com/](http://domain.com/<controller>/<action>/<id) <controller>/<action>/<id>的任何请求，例如[http://domain.com/admin/index](http://domain.com/admin/index)。

如果我想有一个专门用于管理新闻的控制器，我会创建一个名为“admin”的文件夹，并像这样设置控制器定义：

```
class Controller_Admin_News extends Controller_Admin { 
```

然后我会在我的 bootstrap.php 中编写一个如下所示的路由：

```
Route::set('admin_news', 'admin/news(/<action>(/<id>))')
    ->defaults(array(
        'controller' => 'admin_news',
        'action'     => 'index'
    )); 
```

尝试像这样设置您的应用程序，看看它是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:23:39.870

当然，我使用的是 Kohana 3.2。我有控制器

```
class Controller_Admin_News extends Controller_Admin_Common 
```

# licensing - 通过 Action Pack 获得 TFS 2012 许可

> ID：13009647
> 
> 赞同：0
> 
> 时间：2012-10-22T10:37:58.867
> 
> 标签：licensing, actionpack

我目前有一个 Microsoft Action Pack，但我没有看到其中包含 TFS 的许可证。为 6 个开发人员和 2 个 Web 访问用户安装和访问 TFS 2012 服务器的最佳方式是什么。

我已阅读 Microsoft 许可白皮书，它们几乎没用。有没有人有任何具体的例子来说明完成这项工作的最佳方法？我是否只购买了服务器许可证和 6/8 CALS，看来我应该能够重复使用 Action Pack 的某些部分来降低成本，不是吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:47:41.547

尝试联系 Microsoft 合作伙伴支持（他们有实时聊天）：

[https://mspartner.microsoft.com/en/uk/Pages/Support/partner-network-support.aspx?Page=CustomerServiceControlJsonP](https://mspartner.microsoft.com/en/uk/Pages/Support/partner-network-support.aspx?Page=CustomerServiceControlJsonP)

# qt - Qt 几乎相同的主菜单项

> ID：13009649
> 
> 赞同：0
> 
> 时间：2012-10-22T10:38:06.293
> 
> 标签：qt, menu, qmenu

我正在使用 c++ Qt 库，我想做一些可以做到的事情：

```
connect(actionB11, SIGNAL(triggered()), this, SLOT(SetSomething(1, 1)));
connect(actionB12, SIGNAL(triggered()), this, SLOT(SetSomething(1, 2)));
connect(actionB21, SIGNAL(triggered()), this, SLOT(SetSomething(2, 1)));
connect(actionB22, SIGNAL(triggered()), this, SLOT(SetSomething(2, 2))); 
```

上面的代码不起作用，因为 SIGNAL 函数必须具有与 SLOT 函数相同的数字和参数类型。

是否存在一种方法来做到这一点？我不想有大约 20 个函数作为 SetSomething11、SetSomething12 调用 SetSomething(1, 1) 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:56:36.147

您可以修改 QAction 类。

```
class QMyAction : public QAction
{
    Q_OBJECT
    QMyAction ( QObject * parent ) : 
    QAction(parent), _x(0), _y(0)
    {
         connect(this, SIGNAL(triggered(bool)), this, SLOT(re_trigger(bool)));
    } 
    QMyAction ( const QString & text, QObject * parent ) : 
    QAction (text, parent), _x(0), _y(0)
    {
         connect(this, SIGNAL(triggered(bool)), this, SLOT(re_trigger(bool)));
    }
    QMyAction ( const QIcon & icon, const QString & text, QObject * parent ) : 
    QAction(icon, text, parent), _x(0), _y(0)
    {
         connect(this, SIGNAL(triggered(bool)), this, SLOT(re_trigger(bool)));
    }
    void setX(int x)
    {
        _x = x;
    }
    int getX()
    {
        return _x;
    }
    void setY(int y)
    {
        _y = y;
    }
    int getY()
    {
        return _y;
    }

public slots:
    void re_trigger(bool)
    {
        emit triggered(_x, _y);
    }

signals:
    void triggered(int,int);

private:
    int _x;
    int _y;
}; 
```

现在，您可以将trigger(int,int) 连接到SetSomething(int,int)。但是，您必须设置 x 和 y。除非，它们将始终为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:57:23.267

在这种情况下，您有三个简单的选择：

1.  将每个 QAction 连接到自己的插槽（不好）
2.  使用[QSignalMapper](http://doc.qt.digia.com/qt/qsignalmapper.html)
3.  将每个 QAction 添加到[QActionGroup](http://qt-project.org/doc/qt-4.8/qactiongroup.html)并使用`QActionGroup::triggered(QAction*)`信号，同时设置每个 QAction 的数据（参见`QAction::setData()`和`QAction::data()`）

当您为一个QAction 设置数据时，您只能存储一个QVariant（即一个值）。因此，如果您想要两个值，我建议您只创建一个简单的映射，如下所示：

```
void Window::onActionGroupTriggered(QAction *action);
{
    int i = action->data().toInt();
    int a, b;
    a = i / 10;
    b = i - 10;
    setSomething(a, b); // for example if i = 15, then a = 1 and b = 5
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T11:01:44.173

你不能在 SLOT 签名中使用常量，你必须在那里使用类型。将信号连接到槽时，槽必须具有与信号相同的参数子集，否则它们无法连接并且 QObject::connect() 将返回 false。

```
connect(actionB11, SIGNAL(triggered()),
        this, SLOT(SetSomething())); 
```

此插槽不带参数，但您可以使用 QObject::sender() 获取指向发出信号的对象的指针。那么这个指针可以用来区分信号的来源：

```
void SetSomething() {
    switch(sender()) {
    case actionB11;
        // do something
        break;
    case actionB12;
        // do something
        break;
    case actionB21;
        // do something
        break;
    case actionB22;
        // do something
        break;
    default:
        // Exceptional situation
    }
} 
```

或者，您可以使用[QSignalMapper](http://qt-project.org/doc/qt-4.8/qsignalmapper.html)将其他区分参数附加到插槽。

# wordpress - wordpress 联系人 7 URL 重定向与 target=_blank

> ID：13009651
> 
> 赞同：3
> 
> 时间：2012-10-22T10:38:09.120
> 
> 标签：wordpress, redirect, plugins, contact-form-7

我想在提交表单后重定向我的表单，我找到了执行该操作的代码 on_sent_ok: "location.replace('http://www.YOURSITE.com');" 但这是我想要重定向 url 与目标空白的扭曲。这意味着当访问者提交表单时，它将打开一个新页面，其中包含 target="_blank" 联系方式中的链接 7 形式的 wordpress 请帮助我

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:06:25.617

您必须使用客户端代码，例如 javascript。

希望这段代码有帮助

```
<?php
if(condition==true) {
?>
    <script>
       window.open("http://www.example.com");
    </script>
<?php } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-26T10:49:51.653

我无法添加评论。但只是为了清除这一点：如果您使用 Contact Form 7 插件，您只需在表单的其他设置选项卡中粘贴以下内容：

```
on_sent_ok: "window.open('http://example.com/');" 
```

[http://example.com/](http://example.com/)是您的 URL。

> 但请注意，您可能会遇到浏览器弹出设置问题，因为新选项卡在没有用户操作/许可的情况下打开。

# objective-c - UIButton 的 titleLabel 对其中一种字体有 5 个点的偏移量

> ID：13009652
> 
> 赞同：1
> 
> 时间：2012-10-22T10:38:10.493
> 
> 标签：objective-c, ios, fonts, uibutton

我正在开发一个应用程序，它支持在设计时自定义字体、颜色等。你只需交换一个 plist，应用程序就有不同的样式、颜色等。这很有效，我需要这样。到目前为止，一切都很好。有些按钮有标题。我为两个不同的版本使用两种不同的自定义字体。

问题是，使用其他字体会导致所有按钮中的 titleLabels 向 TOP 偏移 5 点。我不能使用一些“hacky”方式将偏移量向上移动 5 px。因为它会导致第一个字体向上偏移 5 px。

我不确定问题是在我的代码中还是在源字体文件中。

标签水平和垂直居中。有没有其他方法可以概括代码以便处理偏移差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:00:40.130

像这样比较：

```
CGSize firstStringSize = [myString sizeWithFont:firstFont]; //get size for first string with its font
CGSize secondStringSize = [myString sizeWithFont:secondFont]; //get size for second string with its font
if(!CGSizeEqualToSize(firstStringSize, secondStringSize)) //checking for both are not equal
{
   if(firstStringSize.height > secondStringSize.height)
      //secondStringSize offset 5 px
   if(secondStringSize.height > firstStringSize.height)
      //firstStringSize offset 5 px
} 
```

# jquery - colorbox - ajax 获取一个 div 或部分

> ID：13009653
> 
> 赞同：0
> 
> 时间：2012-10-22T10:38:17.023
> 
> 标签：jquery, ajax, selector, colorbox

我正在使用 ajax colorbox 调用在我的页面上加载一个页面。目前我只是在使用

```
$('.ajax').colorbox(); 
```

我以为我可以做类似的事情

```
$('.ajax#content').colorbox(); 
```

如何通过传递选择器来拉出我的页面的一部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:54:37.643

您的意思是将变量传递给您的选择器吗？在这种情况下，这将是这样的：

```
var myVariable = 'test'; //Your variable goes here

$('.ajax#' + myVariable).colorbox(); 
```

# ios6 - UIActivityViewController iOS6 的问题

> ID：13009656
> 
> 赞同：0
> 
> 时间：2012-10-22T10:38:23.003
> 
> 标签：ios6, uiactivityviewcontroller

我正在使用 UIActivityViewController 显示 iOS6 设备的共享表，但问题是在我登录到 facebook 之前，设置中的 twitter、Facebook 和 twitter 选项在共享时不会显示？

即使用户没有在“设置”中提供他/她的帐户凭据，是否也有可能显示这些图标？请帮帮我。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:39:48.770

正如@amau96 所说，这是不可能的`UIActivityViewController`.

但是您可以通过`SLComposeViewController`.

我创建了一个分支项目**OWActivityViewController** [，](https://github.com/brantyoung/OWActivityViewController)它通过.**`SLComposeViewController`**

 **[OWActivityViewController](https://github.com/brantyoung/OWActivityViewController)与 iOS 5 兼容，希望对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:40:12.027

不，这不可能...如果 Facebook 未在 Settings > Facebook 中设置，则 UIActivityViewController 不会将 Facebook 显示为共享选项。**

# weka - 将字符串属性转换为 WEKA 中的数值

> ID：13009657
> 
> 赞同：1
> 
> 时间：2012-10-22T10:38:24.233
> 
> 标签：weka

我是 weka 的新手。我的数据包含一列学生姓名。我想在整个列中将这些名称转换为数值。例如：假设有 10 个名称 abcd ,cdef,xyz 等。我想对数据进行预处理，以便对应于每个名称有不同的数值，例如 abcd 更改为 1 ，cdef 更改为 2 等。

两行或多行也可以具有相同的名称。所以在这种情况下，相同的名称应该具有相同的值。

请帮我...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T20:17:30.670

Weka 支持 4 种非关系属性类型：名义、数字、字符串和日期。您可以在 Weka 手册中找到有关它们的更多信息（它可以在您下载 Weka 的同一文件夹中找到），“ARFF 标题部分”一章。

您应该找出“学生姓名”属性的类型（可能是字符串，但也可以是名义上的），并确定具有转换值（数字、名义或字符串）的属性的类型。

可能有两种情况：

(1) 如果现有属性和所需属性的类型相同（string-string 或nominal-nominal，即您只想更改值，而不是属性类型），您可以这样做
(a) 手动 - 在Weka Explorer，然后单击 Edit... 按钮，或者
(b) 使用 Weka 的 Attribute 类函数`value`和`setValue`.

(2) 类型不同 - Weka 属性类型无法转换，因此您必须使用转换后的值创建并插入新属性，并删除旧属性。可以在 [http://weka.wikispaces.com/Programmatic+Use#Step](http://weka.wikispaces.com/Programmatic+Use#Step)找到如何创建新属性的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-05T08:09:01.323

据我了解，在 WEKA 的上下文中，将名称严格转换为“数字”类型似乎不是最好的方法 - WEKA 对待数字属性的方式与处理“字符串”或“名义”属性的方式不同（例如，为了运行某些“属性选择”算法，您不能使用“数字”类型 - 它们需要“离散化”或转换为名义形式）。

因此，对于您的情况，我认为您可以使用[StringToNominal](http://weka.sourceforge.net/doc.stable/weka/filters/unsupervised/attribute/StringToNominal.html "StringToNominal")类将“字符串”名称转换为“名义”类型（该类充当 WEKA“过滤器”，以帮助将给定的“字符串”属性转换为类型的属性“名义”）。这也将注意重复名称 - 名称的“名义”值列表（将在您应用此过滤器后生成）将仅包含一次任何给定名称（出现任意次数）。

“名义”属性还具有隐含的优点，它们确实具有数字表示（值集中的值的索引；类似于 Java 中的“枚举”如何具有数字索引）。因此，您可以将其用作与名称对应的“数字”信息（尽管正如我之前所说，最好将其用作“名义”属性；实际上取决于您的特定用例）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-04T11:17:02.840

我遇到了与问题中提到的问题相同的问题，我可以通过以下方式“解决”它。

我首先应用了前面提到的 StringToNominal 过滤器（不要忘记更改属性范围（从“last”到“first-last”））。完成后，我将数据集保存为 LibSVM 格式，这会将标称值更改为数值。

然后，如果您关闭 Weka 并再次打开它，您将拥有具有相同数量特征的相同数据集，但它们将是数字的。现在应该进行一些更改，首先，使用 Normalize 过滤器对数据集中的所有数值进行规范化。之后，将 NumericToNominal 过滤器应用于最后一个属性。

然后，您将拥有一个带有数值的类似数据集。

希望这可以帮助。

# php - 无法使用 Facebook 图形 API 删除相册

> ID：13009658
> 
> 赞同：0
> 
> 时间：2012-10-22T10:38:26.983
> 
> 标签：php, wordpress, facebook-graph-api

> **可能重复：**
> [通过 API 调用删除 FB 相册](https://stackoverflow.com/questions/9002920/deleting-fb-album-via-api-call)

尽管我可以从我的相册中删除照片（我对其进行了测试并且它工作正常），但我在使用 Facebook 图表删除相册时遇到了问题。

为什么我可以删除照片而不能删除相册？这是 Facebook 图形 API 的限制还是需要特定权限？

我在删除对象时使用此代码，它适用于照片

```
$graph_url = 'https://graph.facebook.com/'.$object_id.'?method=DELETE&'
. 'access_token='. $access_token;

$opts = array('http' =>
  array(
    'method'        => 'DELETE',
    'header'        => 'Content-type: application/x-www-form-urlencoded',
    'ignore_errors' => true
  )
);

$context  = stream_context_create( $opts );
$result = json_decode( file_get_contents( $graph_url, false, $context) ); 
```

# asp.net-mvc-3 - OpenId 和 OpenAuth 与 mvc 应用程序

> ID：13009660
> 
> 赞同：-1
> 
> 时间：2012-10-22T10:38:31.973
> 
> 标签：asp.net-mvc-3, oauth, openid

我需要在 MVC3 中使用 facebookx、twitter、gmail、openid、yahoo 和其他站点登录。我已经搜索了 Openauth 和 openID，但找不到正确的解决方案。来解决方案运行并访问该站点，但永远不会以身份返回。

那么我可以在 MVC3 的运行模式下获得正确的解决方案吗？另请提供 dll 以及 nuget 模板或包的详细信息。

我可以用 localhost 测试 openauth/openid 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:22:12.820

**简而言之**，是的，您可以在本地主机上进行测试和托管。

您需要关注的是在您选择的 OAuth 库提供程序中管理的令牌。只要按照维基和一些教程，你会没事的。

作为起点，请查看将**OpenID、OAuth 和 ICard 功能**引入 Microsoft .NET Framework的[**dotnetopenaut.net 源库。**](http://www.dotnetopenauth.net/)

 **参考：查看这篇文章了解更多详情：[OpenID and OAuth using DotNetOpenAuth in ASP.NET MVC](http://blog.bobcravens.com/2010/08/openid-and-oauth-using-dotnetopenauth-in-asp-net-mvc/)**

# c# - 在接口中：指定实现的方法必须采用接口的子类型？

> ID：13009661
> 
> 赞同：0
> 
> 时间：2012-10-22T10:38:32.467
> 
> 标签：c#, inheritance, interface

我希望有一个接口指定该接口的任何实现必须在其方法声明中使用特定接口的子类型：

```
interface IModel {} // The original type

interface IMapper {
    void Create(IModel model); // The interface method
} 
```

所以现在我希望我的这个接口的实现不是期望`IModel`它本身，而是一个*子*`IModel`类型：

```
public class Customer : IModel {} // My subtype

public class CustomerMapper : IMapper {
    public void Create(Customer customer) {} // Implementation using the subtype
} 
```

目前我收到以下错误：

> “CustomerMapper”未实现接口成员“IMapper.Create(IModel)”

有没有办法可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T10:40:11.727

您需要使您的接口在它应该期望的值类型中具有通用性：

```
interface IMapper<T> where T : IModel
{
    void Create(T model);
}

...

public class CustomerMapper : IMapper<Customer>
{
    public void Create(Customer model) {}
} 
```

如果你不让它通用，任何只知道接口的东西都不知道什么样的模型是有效的。

# export - 不要提示保存 - CRM 解决方案导出

> ID：13009668
> 
> 赞同：0
> 
> 时间：2012-10-22T10:38:45.903
> 
> 标签：export, crm, prompt

从 CRM 导出解决方案时，我没有收到保存导出解决方案的提示。我清除了 Cookies 并尝试了，升级到 IE 9 也尝试了，我确保 Popup 没有被阻止，但是这些东西没有帮助。我的其他几个同事也是这种情况。\

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:07:01.707

我通常会在窗口底部弹出一个窗口。然而，它不是即时的，Crm 必须生成解决方案文件，所以如果它特别大，可能需要一两分钟。我建议单击导出，完成对话框，然后等待 5 分钟以查看是否发生任何事情（它确实需要一个加载图标）。

如果这不起作用，请使用小型解决方案（一个实体）再次尝试相同的操作。

![在此处输入图像描述](../Images/7e667c2288118d608db6b8c9cbc34a46.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-05T12:59:38.660

我知道为时已晚，但如果有人再次遇到问题，我会在此处添加解决方案。

问题是由 URLScan 引起的。它是通过从 CRM 网站的 ISAPI 过滤器中删除 URLScan 来解决的。

# prolog - Prolog：递归列表构造

> ID：13009670
> 
> 赞同：1
> 
> 时间：2012-10-22T10:39:07.367
> 
> 标签：prolog

我在我的序言程序中构建列表列表时遇到问题。我有一个谓词，它可以让我返回一行的单个案例。我必须对这一行的所有案例进行分组并将它们转换为列表列表。我可以很好地访问它们，但是当我退出时，我得到的只是第一个元素。

这是代码：

```
sudoku3to2 :- s3to2(1).
s3to2(Line) :- 
   Line < 9, 
   Line1 is Line+1,
   s3getLine(Line,0,[L]),   
   assert(sudoku2(Y,L])),
   s3to2(Line1).
s3to2(9).

s3getLine(Line,X,  , ) :- 
   X < 9, 
   X1 is X + 1, 
   sudoku3(Line,X, ),
   s3getLine(Line,X1, , ).
s3getLine(Line,9,L,L). 
```

sudoku3/3 将返回 X,Y 坐标处的元素。当我到达 s3getLine(Line,9,L,L) 时，我将开始返回。我想保留我收集的所有元素，而不仅仅是第一个。而且我真的很难构建正确的谓词调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:40:46.320

[findall](http://www.swi-prolog.org/pldoc/doc_for?object=findall/3) /3 是更容易理解的“列表构造函数”。

它是一个列出所有找到的解决方案的内置函数，用指定的模式塑造元素。这里的模式实际上只是我们感兴趣的变量。

我使用[between](http://www.swi-prolog.org/pldoc/doc_for?object=between/3) /3 来获得一个正确排序的矩阵，而不考虑 sudoku3 规则顺序。

```
sudoku3(1, 1, a).
sudoku3(1, 2, b).

sudoku3(2, 1, c).
sudoku3(2, 2, d).

mat(M) :-
  W = 2,
  findall(Row,
    (between(1, W, R),
     findall(V, (between(1, W, C), sudoku3(R, C, V)), Row)
    ), M). 
```

结果：

```
?- mat(M).
M = [[a, b], [c, d]]. 
```

您应该更改 W=9。

高温高压

# ios - 为什么弹出到根视图控制器有时会导致调用 viewDidLoad？

> ID：13009671
> 
> 赞同：0
> 
> 时间：2012-10-22T10:39:10.193
> 
> 标签：ios

我有一个基于导航的应用程序，在子视图中我有一个按钮，点击它会调用 popToRootViewController 方法。

```
-(IBAction)popToRootViewController
{
    [self.navigationController popToRootViewControllerAnimated:YES];
} 
```

这应该会导致调用 rootViewController 的 viewWillAppear 方法，并且在大多数情况下都会发生这种情况。但是，偶尔会调用 rootViewController 的 viewDidLoad。我无法找到其背后的原因。有人知道为什么有时会调用 viewDidLoad 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:46:29.557

在 iOS 5 及更早版本中，系统可能会在内存不足时卸载视图：

[http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:46:34.330

**viewDidLoad**在第一次加载视图控制器的视图时调用一次。

**viewWillAppear**将在第一次加载视图控制器的视图时在 viewDidLoad 方法之后调用。

现在，当您**在 navigationController 中推送或弹出控制器时**，肯定会调用**可见控制器的 viewWillApper方法。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T10:46:38.630

`viewDidLoad`，顾名思义，在视图控制器加载其视图之后调用。如果视图控制器不再是最前面的控制器，它可能会释放其视图以节省内存（它曾经调用过`viewWillUnload`，`viewDidUnload`现在在 iOS 6 中已弃用）。如果发生这种情况，当它再次回到前面时（或每当调用`thecontroller.view`），它将重新创建视图（如果不是基于 Nib 的，它将调用`loadView`），然后调用`viewDidLoad`.

# objective-c - 如何从目标C中特定矩形区域内的pdf文档中提取文本？

> ID：13009672
> 
> 赞同：1
> 
> 时间：2012-10-22T10:39:15.137
> 
> 标签：objective-c, ios, pdf, pspdfkit

我想使用 PSPDFKit 提取在突出显示注释内指定的边界框内的文本。任何人都可以说如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:32:25.703

要获取 PDF 高亮注释下方的文本，您需要遍历所有矩形并联系受影响的字形。（您可以为此忽略boundingBox）高亮注释只有矩形数据，而不是文本，所以要正确处理有点棘手。

[PSPDFHighlightAnnotation](http://pspdfkit.com/documentation/Classes/PSPDFHighlightAnnotation.html#//api/name/highlightedString)上还有一个名为 highlightString 的便捷方法，它将为您完成所有这些工作。

# php - PHP Soap“无法连接到主机”

> ID：13009673
> 
> 赞同：1
> 
> 时间：2012-10-22T10:39:20.097
> 
> 标签：php, soap

我的 PHP Soap 请求在连接到 Reuters TRKD 时失败。不幸的是，它只在我的本地笔记本电脑上失败，而相同的请求在服务器上有效。

我的第一个猜测是通过 Wireshark 进行检查，但似乎在缓存 WSDL 文件后，请求没有发送到服务端点。

并且只有一个请求失败，即身份验证，其余的在授权后工作正常。可能是什么问题？

php --版本

```
PHP 5.3.10-1ubuntu3 with Suhosin-Patch (cli) (built: Apr 11 2012 17:25:33) 
Copyright (c) 1997-2012 The PHP Group
Zend Engine v2.3.0, Copyright (c) 1998-2012 Zend Technologies
    with Xdebug v2.1.0, Copyright (c) 2002-2010, by Derick Rethans 
```

Ubuntu 12.04

更新：我重载了 SoapClient::__doRequest 方法来转储 URL 和请求。

```
__DO REQUEST
$request : <?xml version="1.0" encoding="UTF-8"?>
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:ns1="http://www.reuters.com/ns/2006/05/01/webservices/rkd/Common_1" xmlns:ns2="http://www.reuters.com/ns/2006/05/01/webservices/rkd/TokenManagement_1" xmlns:ns3="http://www.w3.org/2005/08/addressing"><env:Header><ns3:To>https://api.rkd.reuters.com/api/2006/05/01/TokenManagement_1.svc/Anonymous</ns3:To><ns3:Action>http://www.reuters.com/ns/2006/05/01/webservices/rkd/TokenManagement_1/CreateServiceToken_1</ns3:Action></env:Header><env:Body><ns2:CreateServiceToken_Request_1><ns1:ApplicationID>BLAH</ns1:ApplicationID><ns2:Username>BLAH</ns2:Username><ns2:Password>BLAH</ns2:Password></ns2:CreateServiceToken_Request_1></env:Body></env:Envelope>

$location : https://api.rkd.reuters.com/api/TokenManagement/TokenManagement.svc/Anonymous
$action : http://www.reuters.com/ns/2006/05/01/webservices/rkd/TokenManagement_1/CreateServiceToken_1
$version : 2
$one_way : 0
SoapFault exception: [HTTP] Could not connect to host in .. 
```

查看其他 stockoverflow 帖子，我可以看到我安装了 ssl。

```
php -i | grep ssl                                                                                                                             1 ↵
Registered Stream Socket Transports => tcp, udp, unix, udg, ssl, sslv3, tls
openssl 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-12T15:43:58.493

6 小时的尝试.. 这对我有用：'stream_context' => stream_context_create(array('ssl' => array('ciphers'=>'RC4-SHA'))) ！

```
`$soap = new SoapClient($wsdl, array(
    '登录' => $登录，
    '密码' => $密码，
    '例外' => 真的，
    'stream_context' => stream_context_create(array('ssl' => array('ciphers'=>'RC4-SHA'))),
    '跟踪' => 真
    ));`

```

信息：php.net CURLOPT_SSLVERSION 要使用的 SSL 版本（2 或 3）。默认情况下，PHP 将尝试自行确定，尽管在某些情况下必须手动设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:01:31.513

尝试：

```
ini_set("soap.wsdl_cache_enabled", 0); 
```

# python - 查找字符串中出现的所有字符

> ID：13009675
> 
> 赞同：36
> 
> 时间：2012-10-22T10:39:21.100
> 
> 标签：python, string

我试图找到所有出现的“|” 在一个字符串中。

```
def findSectionOffsets(text):
    startingPos = 0
    endPos = len(text)

    for position in text.find("|",startingPos, endPos):
        print position
        endPos = position 
```

但我收到一个错误：

```
 for position in text.find("|",startingPos, endPos):
TypeError: 'int' object is not iterable 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-10-22T10:50:28.743

功能：

```
def findOccurrences(s, ch):
    return [i for i, letter in enumerate(s) if letter == ch]

findOccurrences(yourString, '|') 
```

`yourString`将返回发生的索引列表`|`。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-22T10:45:00.953

如果你想要`|`一个字符串中所有出现的字符的索引，你可以这样做

```
import re
str = "aaaaaa|bbbbbb|ccccc|dddd"
indexes = [x.start() for x in re.finditer('\|', str)]
print(indexes) # <-- [6, 13, 19] 
```

你也可以

```
indexes = [x for x, v in enumerate(str) if v == '|']
print(indexes) # <-- [6, 13, 19] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T10:56:39.523

这里使用正则表达式更容易；

```
import re

def findSectionOffsets(text):
    for m in re.finditer('\|', text):
        print m.start(0) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-22T10:57:41.657

```
import re
def findSectionOffsets(text)
    for i,m in enumerate(re.finditer('\|',text)) :
        print i, m.start(), m.end() 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-22T10:48:03.373

`text.find`返回一个整数（找到所需字符串的索引），因此您可以对其运行 for 循环。

我建议：

```
def findSectionOffsets(text):
    indexes = []
    startposition = 0

    while True:
        i = text.find("|", startposition)
        if i == -1: break
        indexes.append(i)
        startposition = i + 1

    return indexes 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-22T10:48:24.487

text.find() 仅返回第一个结果，然后您需要根据该结果设置新的起始位置。所以像这样：

```
def findSectionOffsets(text):
    startingPos = 0

    position = text.find("|", startingPos):
    while position > -1:
        print position
        startingPos = position + 1
        position = text.find("|", startingPos) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-08-30T07:26:25.417

如果`text`是您想要计算它包含多少的字符串`"|"`，则以下代码行将返回计数：

```
len(text.split("|"))-1 
```

注意：这也适用于搜索子字符串。

# android - Android 片段状态在 onCreateView 方法和 onActivityCreated 方法中始终为空

> ID：13009676
> 
> 赞同：4
> 
> 时间：2012-10-22T10:39:21.977
> 
> 标签：android, android-fragments

我在片段类中使用了多个选项卡。我未能保存片段的状态。我使用了**onSaveInstanceState()**方法并在其中保存了一个参数。但是当我回到这个片段时，保存状态总是显示“null”。我尝试了有关此的所有问题和答案。我仍然面临同样的问题。请任何人都可以帮我解决这个问题。

我的代码

```
 @Override
 public void onCreate(Bundle savedInstanceState) {
   // TODO Auto-generated method stub
   super.onCreate(savedInstanceState);
   setRetainInstance(true);
   super.onCreate(savedInstanceState);
   Log.d("savedInstanceStateInfo1", "" + savedInstanceState);
   if (null != savedInstanceState) {
    nAndroids = savedInstanceState.getInt("nAndroids");
    Log.d("NANDROIDS", "" + nAndroids);
   }
  }
  // Log.d("State in oncreate : ",""+savedInstanceState);

 @Override
 public void onActivityCreated(Bundle savedInstanceState) {
  super.onActivityCreated(savedInstanceState);
  setRetainInstance(true);
  Log.d("SavedinstanestateInfo", "" + savedInstanceState);
 }

 @Override
 public View onCreateView(LayoutInflater inflater, ViewGroup container,
  Bundle savedInstanceState) {
  // TODO Auto-generated method stub
  if (container == null) {
   return null;
  }
  // final ActionBar ab=getActivity().getSupportActionBar();

  View v = (LinearLayout) inflater.inflate(R.layout.infotab, container, false);
  Log.d("SavedinstanestateInfo", "" + savedInstanceState);
  return v;
 }
 @Override
 public void onSaveInstanceState(Bundle outState) {
  outState.putInt("nAndroids", nAndroids);

  super.onSaveInstanceState(outState);
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-28T20:00:48.977

1) 显然，当使用 setRetainInstance(true) 时，onRestoreInstanceState 的 Bundle 为空。

[https://stackoverflow.com/a/8488107/1011746](https://stackoverflow.com/a/8488107/1011746)

2) 没有必要，但更习惯于在对 outState 进行任何修改之前调用 super.onSaveInstanceState(outState)。与 onRestoreInstanceState(Bundle outState) 中的 super.onRestoreInstanceState(outState) 相同。

# video - OpenCV 2.4.2 分辨率 1280x1024 抓取问题？

> ID：13009679
> 
> 赞同：0
> 
> 时间：2012-10-22T10:39:36.667
> 
> 标签：video, opencv, camera, frame, video-capture

我不知道带有 Visual Stuio 2010 的 OpenCV 2.4.2 有什么问题。我正在尝试抓取分辨率为 1280x1024 的相机框架。但是 OpenCV 2.4.2 总是只能抓取 640x480 的分辨率。为什么 ？另一方面，OpenCV 1.1pre 工作正常。遇到这种问题该怎么办？我不想要 1.1pre，请给我解决方案。谢谢。

我正在使用这些子程序。

```
CvCapture* WebCAMinit = cvCaptureFromCAM(arg);
IplImage* imageRGB = cvQueryFrame(WebCAMinit); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T04:35:02.557

用 cvSetCaptureProperty 解决。通过 cvSetCaptureProperty 设置相机的原始分辨率。

# email - 服务器端 pdf 生成和电子邮件

> ID：13009682
> 
> 赞同：0
> 
> 时间：2012-10-22T10:39:48.010
> 
> 标签：email, pdf

这个问题有两个部分，一个是关于发送带有附件的电子邮件，另一个是关于服务器端 pdf 生成。

我正在制作一个用户将数据输入表单的网络应用程序。最后，我希望用户输入他/她的电子邮件，然后将生成一个 pdf 并通过电子邮件发送给用户。

关于如何生成 pdf 服务器端的任何建议？

关于如何在电子邮件中自动发送生成的 pdf 附件的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:56:14.893

看看这个网站。它需要 PHP。

[http://www.fpdf.org](http://www.fpdf.org)

通过电子邮件发送：

[http://www.fpdf.org/en/FAQ.php#q15](http://www.fpdf.org/en/FAQ.php#q15)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T01:37:05.470

如果您指出您正在使用的工具/语言，它将帮助您获得更好的答案，因为对于特定平台有特定的答案。 [无论您使用什么平台（尤其是云服务）， Docmosis 都](http://www.docmosis.com)可能对您有用，因为它可以从大多数环境中调用。您将向其上传模板，然后您的应用程序可以调用该服务以生成 PDF 并将其通过电子邮件发送到您的目的地。您将在请求中发送您的数据、电子邮件目的地、输出格式，Docmosis 将执行合并并生成和交付文档。请注意，我为创建 Docmosis 的公司工作。

我希望这会有所帮助。

# c - 将参数作为参考

> ID：13009684
> 
> 赞同：0
> 
> 时间：2012-10-22T10:40:00.570
> 
> 标签：c

我想将参数作为参考，这样我就可以在我的主函数中使用“nextfreeplace”。问题是我并不真正理解将参数作为参考的术语。任何人都可以帮忙吗？我也收到了编译警告。

```
#include <stdio.h>
#include <stdlib.h>

/* these arrays are just used to give the parameters to 'insert',
   to create the 'people' array */
char *names[7]= {"Simon", "Suzie", "Alfred", "Chip", "John", "Tim",
          "Harriet"};
int ages[7]= {22, 24, 106, 6, 18, 32, 24};

/* declare your struct for a person here */
typedef struct{
  char *names;
  int ages; 
}  person;

static void insert (person **p, char *s, int n, int *nextfreeplace) {

 *p = malloc(sizeof(person));

/*static int nextfreeplace = 0;*/

/* put name and age into the next free place in the array parameter here */
(*p)->names=s;
(*p)->ages=n;

  /*  make the parameter as reference*/  
   sscanf(nextfreeplace,"%d", *p);

  /* modify nextfreeplace here */
  (*nextfreeplace)++;

  }

int main(int argc, char **argv) {

  /* declare nextinsert */
   int *nextfreeplace = 0;

  /* declare the people array here */
   person *p[7];

   //insert the members and age into the unusage array. 
  for (int i=0; i < 7; i++) {
    insert (&p[i], names[i], ages[i], nextfreeplace);
    /* do not dereference the pointer */
  }

  /* print the people array here*/
  for (int i=0; i < 7; i++) {
    printf("The name is: %s, the age is:%i\n", p[i]->names, p[i]->ages);
  }

  /* This is the third loop for call free to release the memory allocated by malloc */
  /* the free()function deallocate the space pointed by ptr. */
  for(int i=0; i<7;i++){
    free(p[i]);
  }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:46:54.797

这应该更改为下面的代码，因为`(*nextfreeplace)++;`将尝试访问`0x000000000`可能导致`segmentation fault`.

```
 int nextfreeplace = 0;

  /* declare the people array here */
   person *p[7];

   //insert the members and age into the unusage array. 
  for (int i=0; i < 7; i++) {
    insert (&p[i], names[i], ages[i], &nextfreeplace);
    /* do not dereference the pointer */
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:43:58.973

sscanf 解析一个字符串（它的第一个参数），但 nextfreeplace 是一个指向 int 的指针。它也被作为 NULL 指针传递给 insert。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T10:48:47.443

当您传递的不是某物的副本作为参数，而是该物的位置时，这是一个常见术语，因此您可以在函数内部对其进行修改。

示例 1：

```
int add(int x, int y)
{
  int s = x + y;
  x = 0; // this does not affect x in main()
  return s;
}

int main(void)
{
  int x = 1, y = 2, sum;
  sum = add(x, y);
  return 0;
} 
```

示例 2：

```
int add(int* x, int y)
{
  int s = *x + y;
  *x = 0; // this affects x in main()
  return s;
}

int main(void)
{
  int x = 1, y = 2, sum;
  sum = add(&x, y);
  return 0;
} 
```

您的代码接近您想要的。请注意两个示例之间的差异。在编译器中启用所有警告并遵循它们。

# google-chrome-extension - 什么是清单2

> ID：13009692
> 
> 赞同：1
> 
> 时间：2012-10-22T10:40:27.927
> 
> 标签：google-chrome-extension

我创建了一个谷歌浏览器扩展。它适用于清单版本 1 manifest.json

```
 {
   "browser_action": {
      "default_icon": "icon.png",
      "default_title": "cc.cr URL shortner",
      "popup": "popup.html"
   },
   "description": "Simple URL shortener with really short URLs.",
   "icons": {
      "128": "logo.png"
   },
     "name": "CC.Cr Url shortener extansion",
   "permissions": [ "tabs", "contextMenus", "http://cc.cr/" ],
   "update_url": "http://clients2.google.com/service/update2/crx",
   "version": "0.1"
} 
```

但是当我在我的浏览器中使用清单版本 2 manifest.json

```
{
  "name": "cc.cr",
  "version": "1.0",
  "manifest_version": 2,
  "description": "URL shortner",
  "icons": { "128": "logo.png", "16": "icon.png" },
  "browser_action": {
      "default_icon": "icon.png",
      "default_title": "cc.cr URL shortner",
      "default_popup": "popup.html"
   },
  "permissions": [ "tabs", "contextMenus", "http://cc.cr/" ],
  "homepage_url": "http://cc.cr"
} 
```

请有人告诉我清单 2 中的错误在哪里？我在这个小文件上花了超过 15 个小时。:(这里是popup.html

```
<html>
<script>
/*   XML request to get shortened URL    */
function shoretenUrl(url, responseFunction) {
        // verify URL
        if (url.length < 5 || !url.match(/^https?:\/\//)) {
           (responseFunction)({"error": true, "message": "Invalid URL."});
        return;
}
        var xhr = new XMLHttpRequest();
        xhr.open("POST", "http://cc.cr/crx.php", true);
        xhr.onreadystatechange = function() {
        if (xhr.readyState == 4) {
            try {
                var response = JSON.parse(xhr.responseText);
                if (response.surl == undefined) {
                    throw response.message;
                }
            } catch (e) {
                (responseFunction)({"error": true, "message": e});
                return;
            }

            (responseFunction)({"error": false, "url": response.surl});
        }
    };
    xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhr.send("url="+ encodeURIComponent(url));
}

/*   * Shorten tab URL   */
function shortenTabUrl(tab) {
    var loader = document.getElementById("loader");
    var error = document.getElementById("error");
    var input = document.getElementById("shortUrl");
    var copied = document.getElementById("copied");
    loader.style.display = "";
    copied.style.display = "none";
    shoretenUrl(tab.url, function(response) {
        loader.style.display = "none"; // hide loader

        // error message
        if (response.error) {
            error.style.display = "block";
            error.innerText = response.message;
            input.value = "";
            return;
        }   error.style.display = "none";

        // get response URL and copy
        input.style.display = "";
        input.focus();
        input.value = response.url;
        input.select();
        try {
            document.execCommand("Copy");
            copied.style.display = "";
        } catch(e) {}       });     }

/*   * Initiate shortening process   */
function init() {
    chrome.tabs.getSelected(null, shortenTabUrl);
}

</script> 

</head>
  <body onload="init();">
<h1>CC.Cr</h1>
<p>Short URL:</p>
<p id="error"></p>
<p>
    <input type="text" id="shortUrl"/>
    <img src="loader.gif" id="loader" alt="" />
</p>
<p id="copied">
    Copied to clipboard.
</p>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T19:17:15.603

一个潜在的问题是使用清单 2，您[不能使用](http://developer.chrome.com/extensions/contentSecurityPolicy.html#relaxing-inline-script)内联脚本。让它工作的一种方法是创建一个`popup.js`包含脚本内容的单独文件，然后将您的文件更改`popup.html`为如下所示：

```
<html>
<head>
    <script type="text/javascript" src="popup.js"></script>
</head>
  <body>
    <h1>CC.Cr</h1>
    <p>Short URL:</p>
    <p id="error"></p>
    <p>
      <input type="text" id="shortUrl"/>
      <img src="loader.gif" id="loader" alt="" />
    </p>
    <p id="copied">
      Copied to clipboard.
    </p>
  </body>
</html> 
```

然后在你的文件中调用你的`init`函数，使用类似：`popup.js`

```
window.onload = function() {
    init();
} 
```

# eclipse - 导入 Eclipse 键绑定时的错误

> ID：13009693
> 
> 赞同：1
> 
> 时间：2012-10-22T10:40:30.323
> 
> 标签：eclipse

我在 Eclipse 中自定义我的键绑定。然后我对 .epf 文件进行了导出密钥首选项。之后，我将它导入到 Eclipse。

然后每次我使用自定义的键绑定，而不是执行预期的操作，Eclipse 只是在右下角显示一个小弹出窗口，我需要使用箭头键选择操作，然后按 enter。

这已经很烦人了。有谁知道如何修复这个错误？

例如，下面是我自定义的`Ctrl`+`L`删除一行。

![自定义 Eclipse](../Images/12cbac1661643bd7b394144badef7940.png)

在被定制并导出为 .epf 后，我再次将其导入到 Eclipse 中。当我按`Ctrl`+`L`时，右下角会显示一个小弹出窗口，而不是删除一行。

![显示问题](../Images/1aaf9c625138da210e79367a2362aee3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:45:27.130

我只是尝试这样做，对我来说效果很好。

屏幕转储中的“转到行”表明默认键映射仍然存在。也许您的 Eclipse 工作区已损坏。在新的工作空间中尝试。

密钥配置存储在

```
[workspace]\.metadata\.plugins\org.eclipse.core.runtime\.settings\org.eclipse.ui.workbench.prefs 
```

检查那里是否一切正常。

# c++ - 通过不同的线程使用多个 ORB（多线程多 ORB 客户端应用程序） - 如何？

> ID：13009694
> 
> 赞同：0
> 
> 时间：2012-10-22T10:40:31.163
> 
> 标签：c++, c, multithreading, corba, orbacus

[这个问题与：[**同一进程中是否可以有多个 ORB 对象？**](https://stackoverflow.com/questions/12933790/is-it-possible-to-have-several-orb-objects-in-the-same-process)]

因此，感谢@BrianKelly，我找到了有关`ORB`标识符的信息（即使`ORBACUS`我拥有的所有文档中都没有此类信息）并且我成功创建了一个简单的应用程序，它连接到不同的`CORBA`服务器并成功执行了多个`CORBA`请求。

到目前为止，一切都很好。

现在，我想做的是让这个应用程序成为多线程的，并启动一个单独的线程来连接到不同的服务器。但是`ORB_init`崩溃。

这是一个非常短的代码，我用于测试：

```
#include <OB/CORBA.h>

pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;
void* run( void * );

struct config { const char* nameservice; const char* id; const char* exe; };

const bool mt = true;

int main()
{
    config cfg1 = { "NameService=corbaloc::10.102.8.15:13069/NameService", "1", "test" };
    config cfg2 = { "NameService=corbaloc::192.168.1.99:13069/NameService", "2", "test" };

    if( mt )
    {   
        pthread_t t1, t2;

        pthread_create( &t1, NULL, run, (void*)&cfg1 ); 
        pthread_create( &t2, NULL, run, (void*)&cfg2 ); 

        pthread_join( t1, NULL ); pthread_join( t2, NULL );
    }
    else
    {
        run( (void*)&cfg1 );
        run( (void*)&cfg2 );
    }

    printf( "SUCCESS!\n" );
    return 0;
}

void* run( void* arg )
{
    pthread_mutex_lock( &mutex );

    int argc = 2; char* argv[3];

    config* cfg = (config*)arg;
    argv[0] = (char*)cfg->exe;
    argv[1] = (char*)cfg->nameservice;
    argv[2] = NULL;

    CORBA::ORB_var m_varOrb = CORBA::ORB_init( argc, argv, cfg->id );

    pthread_mutex_unlock( &mutex );
    return NULL;
} 
```

所以，什么时候，一切`mt`都`false`很好，我可以扩展代码来创建一些特定于服务器的对象，执行不同的请求等。但是`mt`，`true`第二个线程调用失败`ORB_init`。请参阅下面的堆栈跟踪。

我很确定我错过了一些非常简单和愚蠢的东西，但是什么？

```
$ g++ -g3 -ggdb -Wall -Wshadow -march=i486 
      -DUNIX -DLINUX -DPTHREADS -DMULTITHREAD -D_REENTRANT
      -I. -I/usr/local/include/OB/ -I/usr/local/include/JTC/ 
      -I/usr/include/OB/ -I/usr/include/JTC/ -L/usr/local/lib 
      -lpthread -lm -lz -lrt -ldl -lOB -lJTC -lCosNaming 
      test.cpp 
```

堆栈跟踪：

```
#0  0x00566402 in __kernel_vsyscall ()
#1  0x0080dfd0 in raise () from /lib/i686/nosegneg/libc.so.6
#2  0x0080f9b1 in abort () from /lib/i686/nosegneg/libc.so.6
#3  0x03dc490b in ~RefCount 
    (this=Could not find the frame base for "~RefCount".) 
    at ../../include/OB/RefCount_Ts_Linux-x86-32.h:43
#4  0x03ef8965 in ORBInstance 
    (this=Could not find the frame base for "ORBInstance".) 
    at ORBInstance.cpp:276
#5  0x03f134fe in ORB_impl 
    (this=Could not find the frame base for "ORB_impl".) 
    at ORB_impl.cpp:281
#6  0x03f24740 in OBCORBA::ORB_init 
    (ac=Could not find the frame base for 
        "OBCORBA::ORB_init(int&, char**, OB::Properties*, 
                           OB::Logger*, OB::Reactor*, 
                           char const*, char const*)". ) 
    at ORB_init.cpp:994
#7  0x03f249d9 in CORBA::ORB_init 
    (ac=Could not find the frame base for 
         "CORBA::ORB_init(int&, char**, char const*, char const*)".) 
    at ORB_init.cpp:1014
#8  0x0804895d in run (arg=0xbfe8b544) at test_server.cpp:45
#9  0x007334d2 in start_thread () from /lib/i686/nosegneg/libpthread.so.0
#10 0x008b848e in clone () from /lib/i686/nosegneg/libc.so.6 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T14:42:04.990

我找到了类似的解决方法。使我的代码非常难看，而且不容易获得支持，但它仍然是一些东西。

这是我所做的：

*   添加一个机制（在我的应用程序中），在启动它们之前计算必要的线程
*   提前阅读配置 - 我需要知道命名服务的必要参数（用于`ORB_init`）
*   在启动任何线程之前，“管理器”将**只执行一次** `ORB_init`，但它会传递**多次**参数，具有不同的`-ORBInitRef`值 - 每个线程/连接一个
*   完成后，线程被启动，但不是正在执行`ORB_init`，而是直接执行`resolve_initial_references`并继续服务器特定的事情

注意：我的示例不`resolve_initial_references`包含 ，因为崩溃在`ORB_init`.

* * *

因此，将此“算法”应用于此“解决方法”将如下所示：

```
#include <OB/CORBA.h>

void* run( void * );
CORBA::ORB_var varORB;

int main()
{
    /** The necessary configurations */
    //-------------------------------------v
    const char* nameservice1 = "NameService1=corbaloc::10.102.8.15:13069/NameService";
    const char* nameservice2 = "NameService2=corbaloc::192.168.1.99:13069/NameService";
    //-------------------------------------^

    /** INIT the ORB **/
    int argc = 5; char* argv[ 6 ];
    const char* initref = "-ORBInitRef";
    const char* exe = "test";

    argv[0] = (char*)exe;
    argv[1] = (char*)initref; argv[2] = (char*)nameservice1;
    argv[3] = (char*)initref; argv[4] = (char*)nameservice2;
    argv[5] = NULL;

    varORB = CORBA::ORB_init( argc, argv );

    pthread_t t1, t2; 

    char ns_id1 = '1', ns_id2 = '2';
    pthread_create( &t1, NULL, run, (void*)&ns_id1 );  
    pthread_create( &t2, NULL, run, (void*)&ns_id2 );  

    pthread_join( t1, NULL ); pthread_join( t2, NULL );

    varORB->destroy();

    return 0;
}
void* run( void* arg )
{
    char nameservice[] = "NameServiceN";

    // set the right number of the nameservice
    nameservice[ 11 ] = *((char*)arg);  

    varORB->resolve_initial_references( nameservice );

    // do some CORBA-specific stuff

    printf( "SUCCESS %c\n", *(char*)arg );
    return NULL;
} 
```

* * *

## 笔记

我仍然无法相信这是唯一的选择。如果您仔细查看我的代码（在问题中），您会看到：

*   有可能有多个**ORB**（参见 的情况`mt == false`）
*   对`ORB_init` **IS**的调用已同步
*   ORB 标识符已**实现**并且工作正常（再次使用`mt == false`）

所以，这不是我问题的实际答案，它是一种解决方法。

可以在单个线程中创建多个 ORB 而不是在多个线程中创建多个 ORB 是没有意义的（至少对我而言）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:07:06.953

ORB 每次都会使用不同的连接（和线程）到不同的服务器——总是如此。接收答案和来电也在不同的线程中处理（如果有用和/或需要）。

我认为您尝试尝试解决 ORB 已经为您解决的问题。这是一个中间件，不要害怕线程和东西。CORBA 专家已经完成了这项工作。

# javascript - 当应用程序进入后台时触发 javascript 函数

> ID：13009696
> 
> 赞同：0
> 
> 时间：2012-10-22T10:40:38.557
> 
> 标签：javascript, objective-c, xcode4.5

我的应用程序有一个计时器，它应该在应用程序处于后台时触发，但是，由于 ios 的怪癖，我的 onPause 函数在应用程序恢复之前不会触发。我一直在研究从 obj-C 触发 javascript 函数的方法，但似乎无法让它工作。

我有以下代码

```
// CUSTOM CODE TO DETECT APP STATE
- (void)applicationDidEnterBackground:(UIApplication *)application {

NSString* jsString = [NSString stringWithFormat:@"onPause;"];
[self.viewController.webView stringByEvaluatingJavaScriptFromString:jsString];

NSLog(@"OBJ-C paused"); 
```

}

我的 js 代码看起来像这样；

```
function onPause() {
            console.log("JS paused");
        } 
```

当应用程序进入后台时，我可以看到我的 OBJ-C 日志，但无法获取 js 日志，并且当我重新启动应用程序时，计时器没有暂停。

任何人都可以帮助或建议我做错了什么，我没有使用 OBJ-C 的经验并且正在使用 Phonegap 2.1.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:24:46.747

尝试使用`applicationWillResignActive:`.

如果应用程序已经发送到后台，该应用程序可能不再做出反应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:06:06.127

解决了！！！在下面的链接[中](http://shazronatadobe.wordpress.com/)。有 2 个未记录的事件；辞职和活跃，这使它按我的目的工作。

```
document.addEventListener("resign", resign, false);
document.addEventListener("active", active, false);

        function resign() {
            // pause code fired
        }

        function active() {
            //resume code fired
        } 
```

希望能帮助到你！

# javascript - 从 5 个选择菜单中选择 1 个并禁用其余菜单

> ID：13009697
> 
> 赞同：0
> 
> 时间：2012-10-22T10:40:47.257
> 
> 标签：javascript, jquery, forms

我有 5 个选择菜单，如果选择了任何选择菜单中的一个选项，在所有其他选择菜单上我想：

*   .prop 要求为 false
*   .prop 禁用为真
*   .css("背景色","#e8e8e8");

我已经为第一个选择菜单编写了代码，这很好用，我的问题是如何为所有 5 个选择菜单整齐地编写代码以消除任何不必要的代码行。

任何帮助/建议将不胜感激。提前致谢。

这是我的代码：

```
 <li id="li_13" >
        <label class="description" for="element_13">A</label>
        <div>
        <select id="element_13" name="element_13" required="required"> 
<option value="" selected="selected"></option>
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>

        </select>
        </li>       

        <li id="li_14" >
        <label class="description" for="element_14">B</label>
        <div>
        <select id="element_14" name="element_14" required="required"> 
<option value="" selected="selected"></option>
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>

        </select>
        </li>       

        <li id="li_15" >
        <label class="description" for="element_15">C</label>
        <div>
        <select id="element_15" name="element_15" required="required"> 
<option value="" selected="selected"></option>
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>

        </select>
        </li>       

        <li id="li_16" >
        <label class="description" for="element_16">D</label>
        <div>
        <select class="element select medium" id="element_16" name="element_16" required="required"> 
<option value="" selected="selected"></option>
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
        </select>
        </li>       

        <li id="li_17" >
        <label class="description" for="element_17">E</label>
        <div>
        <select id="element_17" name="element_17" required="required"> 
<option value="" selected="selected"></option>
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>

        </select>
        </li>       

        <li id="li_18" >
        <label class="description" for="element_18">F</label>
        <div>
        <select id="element_18" name="element_18" required="required"> 
<option value="" selected="selected"></option>
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>

        </select>
        </div> 
        </li> 
```

**查询：**

```
 $('#element_13').change(function(){

        if ($(this).val().length != 0){

                    $('#element_14').prop('required', false);
                    $('#element_15').prop('required', false);
                    $('#element_16').prop('required', false);
                    $('#element_17').prop('required', false);
                    $('#element_18').prop('required', false);

                    $('#element_14').prop('disabled', true);
                    $('#element_15').prop('disabled', true);
                    $('#element_16').prop('disabled', true);
                    $('#element_17').prop('disabled', true);
                    $('#element_18').prop('disabled', true);

                    $('#li_14').css("background-color","#993333");
                    $('#li_15').css("background-color","#993333");
                    $('#li_16').css("background-color","#993333");
                    $('#li_17').css("background-color","#993333");
                    $('#li_18').css("background-color","#993333");
            }
            else{               
                    $('#element_14').prop('required', true);
                    $('#element_15').prop('required', true);
                    $('#element_16').prop('required', true);
                    $('#element_17').prop('required', true);
                    $('#element_18').prop('required', true);

                    $('#element_14').prop('disabled', false);
                    $('#element_15').prop('disabled', false);
                    $('#element_16').prop('disabled', false);
                    $('#element_17').prop('disabled', false);
                    $('#element_18').prop('disabled', false);

                    $('#li_14').css("background-color","#e8e8e8");
                    $('#li_15').css("background-color","#e8e8e8");
                    $('#li_16').css("background-color","#e8e8e8");
                    $('#li_17').css("background-color","#e8e8e8");
                    $('#li_18').css("background-color","#e8e8e8");
            }
        }); 
```

**从使用类作为选择器的答案更新（显示/隐藏也更好）：**

```
 $(".complaint").on("change", function() {
            if ($(this).val().length != 0){
            $(".complaint").not(this)
              .prop("required", false)
              .prop("disabled", true)
              .closest("li").hide();
             }
        else{
            $(".complaint").not(this)
              .prop("required", true)
              .prop("disabled", false)
              .closest("li").show();
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:43:33.410

```
$("select").on("change", function() {
    $("select").not(this)
      .prop({ required : false, disabled : true })
      .closest("li").css("background-color", "#e8e8e8");
}); 
```

为了将您的`<select>`元素与页面上的其他`<select>`元素区分开来，您可以为它们设置通用类名称并使用[类选择器](http://api.jquery.com/class-selector/)而不是标签选择器，如示例所示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:44:46.743

```
$('select').change(function(){
    $('select')
        .not(this)
        .prop({ disabled: true, required: false })
        .css({ background: '#e8e8e8' });
}); 
```

# javascript - JavaScript Eclipse 编辑器出现问题。它没有看到应该看到的

> ID：13009699
> 
> 赞同：1
> 
> 时间：2012-10-22T10:40:49.947
> 
> 标签：javascript, eclipse

我正在使用标准的 js 插件来 Eclipse。我有这样的事情：

图片.js：

```
Images = function() {};

Images.prototype = {
    load: function(){
        // code...
    }
}; 
```

游戏.js：

```
Game = function() {
    this.images = {};
};

Game.prototype = {
    init : function() {
        var self = this;
        self.images = new Images();
        self.images. // press ctrl+space
    }
}; 
```

当我在“self.images”之后按 ctrl+space。我希望它建议我“加载”方法，但它没有看到它。有可能修复它吗？

# regex - perl 中正则表达式匹配的当前位置

> ID：13009704
> 
> 赞同：1
> 
> 时间：2012-10-22T10:41:26.180
> 
> 标签：regex, perl, matching

我想随后提取长字符串中两个路径之间的文本片段。

因此，我使用这样的东西：

```
while($data=~ m/\"(.:\\.*?)\".:\\/sg){...} 
```

``\".:\\(.*?)`是一条带`"`前的路径。而且，由于两条路径之间的部分可以是任何字符，因此我以下一条路径的开头结束正则表达式：`\".:\\`

不幸的是，代码总是跳过一个匹配项。我相信，这是因为后续搜索将在最后一个之后开始`\".:\\`，因此它只会找到下一个。

我如何确保搜索的位置指针设置回正则表达式的最后一部分之前（之前`\".:\\`：）

编辑：

```
"y:\car\main.cs@@jung" "Added format of version number to all sub-parts.

"Hallo Peter"

@@@ "tool kit" @@@"

"y:\car\main.cs@@kkla" (lkaskdn awdiwj)

"The filter "function of the new version works with Excel 2007"only,
but is the correct filter structure.

@@@ "Huihu boy" @@@" 
```

这个文件应该在 $1 中给我两个结果：

1.

```
y:\car\main.cs@@jung" "Added format of version number to all sub-parts.

"Hallo Peter"

@@@ "tool kit" @@@" 
```

2.

```
y:\car\main.cs@@kkla" (lkaskdn awdiwj)

"The filter "function of the new version works with Excel 2007"only,
but is the correct filter structure.

@@@ "Huihu boy" @@@" 
```

但它只会给我第一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:59:51.140

你想要的是一个[前瞻断言](http://perldoc.perl.org/perlre.html#Extended-Patterns)。这匹配了你的模式之后的一些东西，而不包括你的匹配中的“东西”。语法是：

```
(?=...) 
```

我没有您的正则表达式的示例数据，所以这里是一个简单的示例：

```
use strict;
use warnings;

my $string = "foobarbarbarnbar";

print "Regular matches: ";
#regular matching
while ($string =~ /(\w+?)bar/g)
{
   print " $1"; 
}
#lookahead
print "\nLookahead matches: ";
while ($string =~ /(\w+?)(?=bar)/g)
{
   print " $1"; 
} 
```

输出：

```
Regular matches:  foo bar n 
Lookahead matches:  foo bar bar barn 
```

# c++ - 将 NSTimer 添加到 C++ 类

> ID：13009705
> 
> 赞同：1
> 
> 时间：2012-10-22T10:41:26.717
> 
> 标签：c++, objective-c, nstimer

我的 Objective-c 应用程序（TC.h 和 TC.mm）中有一个 c++ 类，它有如下两种方法。

```
//TC.h
class TC 
{
public:
  void SetupPollTimer();
  void Timeout();
}

//TC.mm
void TC::Timeout() 
{
    //Inside timer handler

}
void TC::SetupPollTimer() 
{
    //Setup Timer
    //Want to use NSTimer here..

} 
```

基本上，当我调用 SetupPollTimer() 时，我想使用 NSInvocation 启动一个 NSTimer，以便它反复调用 Timeout 方法。首先，这是否可能。如果是这样，我将非常感谢您对此的任何想法或指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T13:58:37.020

在这种情况下，您只需使用 CoreFoundation 等价物；CFRunLoopTimer。

使用 NSTimer 通常意味着您需要绑定 objc 对象类型来用作计时器回调的参数。

这样做，您会将 TC 设置`this`为计时器回调的上下文信息。然后您将能够在回调中访问您的 TC 实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:21:16.997

看看这个帖子：

[将 C++ 与 Cocoa 一起使用而不是 Objective-C？](https://stackoverflow.com/questions/525609/use-c-with-cocoa-instead-of-objective-c)

显然，您不能完全用 C++ 编写 Cocoa-Applications，但有一些方法可以在 C++ 和 Objective C 之间共享代码。

**编辑**

好的，另一种选择是将计时器添加到处理该 CPP 文件的类中，并在 NSTimer 在处理程序文件中触发时触发 CPP 方法。

我发现了一些在 Objective C 中使用 C++ 实例的技术，但反之则不然。

# java - 用于使其更具可测试性的接口

> ID：13009706
> 
> 赞同：1
> 
> 时间：2012-10-22T10:41:33.610
> 
> 标签：java, unit-testing

我正在查看android源代码，我发现了这段代码。

```
/**
 * Interface used in {@link #createUniqueFile} instead of {@link File#createNewFile()} to make
 * it testable.
 */
/* package */ interface NewFileCreator {
    public static final NewFileCreator DEFAULT = new NewFileCreator() {
                @Override public boolean createNewFile(File f) throws IOException {
                    return f.createNewFile();
                }
    };
    public boolean createNewFile(File f) throws IOException ;
} 
```

它如何更可测试？任何人都可以将我重定向到我可以看到更多示例的地方吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T10:47:55.103

原因是在您的测试中，您可以用不同的实现替换 NewFileCreator，无论它在哪里使用——例如，它只是将数据保存在内存中。

这意味着您可以测试使用它的任何东西的逻辑，而不必担心确保真实的文件系统存在并且它处于合适的状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:48:42.627

我认为“使其可测试”这句话是指`createUniqueFile`似乎使用`NewFileCreator`. 该方法应该更好地单独测试，因为模拟 a`NewFileCreator`比`File`从标准 Java API 模拟 a 更容易。还可以提供`NewFileCreator`不弄乱文件系统的测试的不同实现。

# mysql - 在 MYSQL 查询中使用 If

> ID：13009709
> 
> 赞同：1
> 
> 时间：2012-10-22T10:41:43.550
> 
> 标签：mysql, subquery, conditional

嗨，我目前正在编写一些代码，在从数据库中检索结果之前需要一个 if。

情况是，如果interacterID 不为NULL，则按它过滤，见下文

```
SELECT *
FROM status
WHERE type != "3"
AND userID = "'.$userID.'"
AND 
(
    interacterID IN ( #IF interacterID is null I want to skip this AND
        SELECT userID
        FROM userFriends
        WHERE (
            userFriends.userID = "'.$currentUserID.'"
            OR userFriends.interacterID = "'.$currentUserID.'"
        )
        AND status = "1"
    )
)
ORDER BY addedDate DESC
LIMIT 1 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:47:28.660

如果我没看错，我不确定你是否需要一个 IF （[可以这样做](http://dev.mysql.com/doc/refman/5.5/en/if.html)）。简单的 IS NULL 和 OR 可用于两种情况：

```
SELECT *
FROM status
WHERE type != "3"
AND userID = "'.$userID.'"
AND 
(
    interacterID IS NULL OR interacterID IN (
        SELECT userID
        FROM userFriends
        WHERE (
            userFriends.userID = "'.$currentUserID.'"
            OR userFriends.interacterID = "'.$currentUserID.'"
        )
        AND status = "1"
    )
)
ORDER BY addedDate DESC
LIMIT 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:50:49.330

```
SELECT *
FROM status
WHERE type != "3"
AND userID = "'.$userID.'"
AND 
(
interacterID IS NOT NULL  (
    SELECT userID
    FROM userFriends
    WHERE (
        userFriends.userID = "'.$currentUserID.'"
        OR userFriends.interacterID = "'.$currentUserID.'"
    )
    AND status = "1"
)
  )
  ORDER BY addedDate DESC
  LIMIT 1 
```

如果interacterID 为null，则代码不会执行

# ios5 - 在 ios 中使用 twitter 登录

> ID：13009710
> 
> 赞同：0
> 
> 时间：2012-10-22T10:41:44.000
> 
> 标签：ios5, twitter

> **可能重复：**
> [从 iOS 中的 Twitter 框架获取 Twitter 句柄](https://stackoverflow.com/questions/10407551/getting-twitter-handle-from-twitter-framework-in-ios)

我对 iOS 开发相当陌生，一开始我需要将 twitter 集成到我的应用程序中。我为此阅读了至少一百个教程，但其中大多数都展示了如何从我的应用程序中发布推文。我特别想要的是能够访问用户信息，如用户名、电子邮件 ID、密码和个人资料图像。如果有人有相关教程的链接，请尽早提供！谢谢。

# wordpress - WordPress 的 Mediaplayer 无法在 Safari 中播放视频

> ID：13009711
> 
> 赞同：1
> 
> 时间：2012-10-22T10:41:47.413
> 
> 标签：wordpress, safari

我进行了搜索，但找不到对我的问题有帮助的答案。如果有一个我忽略了，请原谅。

我确实有以下问题：我为 WordPress 安装了 js.mediaplayer，视频在 iPad 上的 Firefox 和 Safari 上播放良好。

但是，如果我尝试在 Safari 中播放视频，它会加载并加载并加载，但视频没有播放。

我使用的主题是“Karma”，以防万一这有帮助，并且视频包含在视频帧中。

这是使用的简码：

```
[video src="http://mydomain.de/img/myvideo.mp4" type="video/mp4" mp4="http://mydomain.de/img/myvideo.mp4" preload="true" autoplay="false" + width="572" + height="311" controlbar="bottom"] 
```

在源代码中，它看起来像这样：

```
<div class="video-wrap video_right"><div class="video-main">
    <div class="video-frame">
    <video id="wp_mep_1" controls="controls" type="video/mp4" src="http://mydomain.de
 /img/myvideo.mp4" width="572" height="311" preload="true" autoplay="false" class="mejs-player"   

data-mejsoptions='{"features":
 ["playpause","current","progress","duration","volume","tracks","fullscreen"]}'>

        <source src="http://mydomain.de/img/myvideo.mp4" type="video/mp4" />
        <object width="572" height="311" type="application/x-shockwave-flash" 
 data="http://mydomain.de/wp-content/plugins/media-element-html5-video-and-audio-player  
/mediaelement
 /flashmediaelement.swf">
            <param name="movie" value="http://wp.vorsorgeconcept.de/wp-content/plugins
 /media-element-html5-video-and-audio-player/mediaelement/flashmediaelement.swf" />
            <param name="flashvars" value="controls=true&amp;file=http://mydomain.de
 /img/myvideo.mp4" />           
        </object>       
    </video> 
 </div><!-- end video-frame -->
 </div><!-- end video-main --> 
```

我认为这可能与 Jetpack 有冲突，但禁用 Jetpack 插件后没有任何变化。

还有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:50:30.730

如果视频没有在 Windows Safari 上播放，那么我认为 Quicktime 是问题所在。看来 Safari 需要安装 Quicktime 才能支持 HTML5 媒体。

安装[Quicktime](http://www.apple.com/quicktime/download/)将修复 Safari 视频/音频问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-13T16:56:29.373

在做了一些研究后，我遇到了同样的问题，我能找到的最简单的方法是`poster`在代码中添加这样的参数

```
[video width="427" height="240" poster="http://example.com/example.png" mp4="http://example.com/example.mp4"][/video] 
```

在这里你可以看到`poster="http://example.com/example.png"`example.png 是我想在视频中显示为静止图像的图像

# php - 在 PHP 中使用文字符号/对象初始值设定项解释 Javascript 对象

> ID：13009715
> 
> 赞同：2
> 
> 时间：2012-10-22T10:41:59.160
> 
> 标签：php, javascript

我制作了一个 PHP 脚本来使用 curl 从远程网站获取对象初始化程序，对象看起来像这样

```
{'403' : {'3' : { qin : 144, qout : 52}, '4' : { qin : 143, qout : 86}, '5' : { qin : 144, qout : 79}, '6' : { qin : 143, qout : 93}, '7' : { qin : 144, qout : 78} } 
```

¿ PHP 中有一个函数可以解释这个还是我需要使用正则表达式？

JSON 无效，但它是有效的 Javascipt 文字表示法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:09:50.877

***不要在生产中使用，而是尝试获取有效的 json 输出***

```
$json = "{'403' : {'3' : { qin : 144, qout : 52}, '4' : { qin : 143, qout : 86}, '5' : { qin : 144, qout : 79}, '6' : { qin : 143, qout : 93}, '7' : { qin : 144, qout : 78} }" ;

$json = preg_replace("/'(\w+)'/", '$1', $json); //remove all single quote
$json = preg_replace("/\s*([a-zA-Z0-9_]+)/", ' "$1"', $json);
$json .= "}"; // Missing End

var_dump($json,json_decode($json)); 
```

输出

```
object(stdClass)[1]
  public '403' => 
    object(stdClass)[2]
      public '3' => 
        object(stdClass)[3]
          public 'qin' => string '144' (length=3)
          public 'qout' => string '52' (length=2)
      public '4' => 
        object(stdClass)[4]
          public 'qin' => string '143' (length=3)
          public 'qout' => string '86' (length=2)
      public '5' => 
        object(stdClass)[5]
          public 'qin' => string '144' (length=3)
          public 'qout' => string '79' (length=2)
      public '6' => 
        object(stdClass)[6]
          public 'qin' => string '143' (length=3)
          public 'qout' => string '93' (length=2)
      public '7' => 
        object(stdClass)[7]
          public 'qin' => string '144' (length=3)
          public 'qout' => string '78' (length=2 
```

# json - ClassCastException com.sun.org.apache.xerces.internal.dom.ElementNSImpl

> ID：13009716
> 
> 赞同：0
> 
> 时间：2012-10-22T10:42:01.110
> 
> 标签：json, jakarta-ee, jersey, classcastexception

我得到一个 ClassCastException。我想知道我在这里做错了什么。做一个`(RegistrationRequest)(element.getValue())`应该有效的。我知道`(RegistrationRequest)element.getValue()`可能没有。

```
SEVERE: Servlet.service() for servlet [Jersey REST Service] in context with path [/mCruiseOnCarPool4All] threw exception
java.lang.ClassCastException: com.sun.org.apache.xerces.internal.dom.ElementNSImpl cannot be cast to com.mcruiseon.common.message.request.RegistrationRequest 
```

服务器 Post 方法，注意方法签名中的 JAXBElement。我正在对它进行类型转换`clientSession.waitAndGetResponse((RegistrationRequest)(element.getValue())) ;`。这是我得到异常的行号。

```
@POST
@Path ("Request")
@Consumes({ MediaType.APPLICATION_JSON })
public Response post(JAXBElement<Object> element) {
    AMessageStrategy response ;
    try {
        clientSession = new ClientSession(God.mCruiseOnServer) ;
    } catch (InvalidServerDNSorIPException e) {
        e.printStackTrace();
        return Response.serverError().build() ;
    }
    sessionKey = sessionManager.setClientSession(clientSession) ;
    clientSession.setSessionKey(sessionKey) ;

    clientSession.getSendQueue().sendRequest((RegistrationRequest)(element.getValue()));                
    try {
        response = clientSession.waitAndGetResponse((RegistrationRequest)(element.getValue())) ;
    } catch (WaitedLongEnoughException e) {
        return Response.serverError().build() ;
    } catch (UnableToResolveResponseException e) {
        return Response.serverError().build() ;
    }   
    return Response.ok(response).build();
} 
```

客户端是一个junit测试用例，相关部分代码是

```
ClientIdentityConcrete clientIdentity = new ClientIdentityConcrete("username", "password", "secretkey") ;
RegistrationRequest register = new RegistrationRequest(clientIdentity);
String jsonStr = mapper.writeValueAsString(clientIdentity);
HttpPost request = new HttpPost("http://localhost:8081/mCruiseOnCarPool4All/carpool4all/Registration/Request");
StringEntity se = new StringEntity(jsonStr);
se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
request.setEntity(se);
HttpResponse response = client.execute(request); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:07:07.843

问题出在客户端，junit 测试用例。我没有为 with register 创建 Json 对象，而是使用 clientIdentity 创建对象。注意`writeValueAsString`. 我还修改了我的整个客户端以实际使用 JSON 客户端 API，而不是传统的 http。还没有工作，我得到另一个例外。但这是一个不同的问题。

```
ClientConfig config = new DefaultClientConfig();
        Client client = Client.create(config);
        WebResource service = client.resource(UriBuilder.fromUri(
                "http://localhost:8081/mCruiseOnCarPool4All").build());

        ClientIdentityConcrete clientIdentity = new ClientIdentityConcrete("username", "password", "secretkey");
        RegistrationRequest register = new RegistrationRequest(clientIdentity);
        AMessageStrategy response = service.path("carpool4all").path("Registration").path("Request")
                .type(MediaType.APPLICATION_JSON).post(RegistrationRequest.class, register);
        assertNotNull(response) ;
        assertNotNull(((RegistrationResponse)response).getIdentityHash()) ; 
```

# java - 如何用两位数写整数？

> ID：13009719
> 
> 赞同：7
> 
> 时间：2012-10-22T10:42:10.523
> 
> 标签：java, integer

> **可能重复：**
> [如何格式化数字 0..9 以显示 2 位数字（它不是日期）](https://stackoverflow.com/questions/12421444/how-to-format-a-number-0-9-to-display-with-2-digits-its-not-a-date)

如何在Java中写一个两位数的整数？例如，如果整数小于 10，则程序应`01`返回`09`. 我需要`0`在一位数字前面。类似于`%.2f` 双类型的东西。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-22T10:44:55.993

假设，既然你知道`%.2f`for 格式化`double`，那么你至少知道`formatting`.

因此，要适当地格式化您的整数，您可以在开头添加一个`0`before`%2d`来填充您的数字：-`0`

```
int i = 9;
System.out.format("%02d\n", i);  // Will print 09 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-22T10:50:15.883

使用**String.format**方法...

例子

```
 System.out.println(String.format("%02d", 5));
  System.out.println(String.format("%02d", 55));
  System.out.println(String.format("%02d", 15)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T10:44:53.567

“写”如何？假设您的意思是 a `PrintStream`，您可以使用[`printf`](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#printf%28java.util.Locale,%20java.lang.String,%20java.lang.Object...%29)它。格式化细节[在这里](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html#syntax)。我相信格式字符串会是`%02d`.

# android - 从侦听器显示 listView 中的隐藏按钮

> ID：13009721
> 
> 赞同：0
> 
> 时间：2012-10-22T10:42:15.183
> 
> 标签：android, listview, button, listener

我还有一个很好的问题要问你...^^

我在这个列表上有一个带有 Button 项的 listView 和一个 ItemClickListener。

当我单击一个项目时，我想显示当前单击的项目的 Button，而无需重新加载所有 listView。

你知道我该怎么做吗？

这是我的代码：

```
public ListView.OnItemClickListener listviewProductsOnItemClickListener =
        new ListView.OnItemClickListener(){

    public void onItemClick(AdapterView<?> currentAdapter, View currentView, int position, long id) {           
        Button changeQuantity = (Button) findViewById(R.id.changequantity);

        changeQuantity.setVisibility(View.VISIBLE);

    }
}; 
```

问题是按钮总是显示在第一个项目上：/

感谢您的帮助，再次为我的法语英语感到抱歉！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:46:22.310

onItemClick 将从您的适配器为您提供 currentView，您将获得如下所示的按钮。

```
public void onItemClick(AdapterView<?> currentAdapter, View currentView, int position, long id) {           
    Button changeQuantity = (Button) currentView.findViewById(R.id.changequantity);

    changeQuantity.setVisibility(View.VISIBLE);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:47:07.323

我认为更好的方法是在适配器的`getView()`. 这样你就可以避免任何混淆..

您也可以尝试使用

```
 public void onItemClick(AdapterView<?> currentAdapter, View currentView, int position, long id) {           
    Button changeQuantity = (Button) currentView.findViewById(R.id.changequantity);

    changeQuantity.setVisibility(View.VISIBLE);

} 
```

# php - WordPress 自定义下拉菜单

> ID：13009722
> 
> 赞同：0
> 
> 时间：2012-10-22T10:42:17.270
> 
> 标签：php, css, wordpress, drop-down-menu

我在我的主题中使用 WordPress 菜单，但我正在尝试正确设置 CSS 样式。它没有以正确的方式显示下拉菜单。我想没有人可以检查一下，看看发生了什么？我将在下面为您提供 HTML 和 CSS，以及指向实时测试页面的链接。

[实时测试页面](http://test.snowflakesoftware.com/)

```
<div id="nav-primary" class="nav"><nav>
    <?php if ( is_user_logged_in() ) {
        wp_nav_menu( array( 'theme_location' => 'logged-in-menu' ) ); /* if the visitor is logged in, this primary navigation will be displayed */
    } else {
        wp_nav_menu( array( 'theme_location' => 'header-menu' ) ); /* if the visitor is NOT logged in, this primary navigation will be displayed. if a single menu should be displayed for both conditions, set the same menues to be displayed under both conditions through the Wordpress backend */
    } ?>
</nav></div><!--#nav-primary--> 
```

下面的 CSS 中有很多垃圾，但是一旦我的功能正常工作，我就可以把它去掉，这里是 CSS ...

```
#nav-primary {width: 600px;}
#nav-primary {list-style: none; padding: 0px; margin: 0px; height: 68px; position: relative; z-index: 500; font-family: arial, verdana, sans-serif;}
#nav-primary ul, #nav-primary li {list-style: none;}
#nav-primary li {float: left;}
#nav-primary li a {float: left; display: block; height: 68px; line-height: 68px; background: none; color: #FFFFFF; text-decoration: none; font-size: 11px; font-weight: bold; padding: 0 10px;}
/*#nav-primary table {border-collapse: collapse; width: 0px; height: 0px; position: absolute; top: 0px; left: 0px;}*/

#nav-primary li:hover {position: relative; z-index: 200;}
#nav-primary li:hover > a {color: #00e5c3; background: #000000; border-bottom: 3px solid #00e5c3;}
#nav-primary li:hover > a.sub {color: #00e5c3; background-color: #000000; border-bottom: 3px solid #00e5c3;}
#nav-primary li.current a {color: #00e5c3; background: #000000; border-bottom: 3px solid #00e5c3;}
#nav-primary li a.sub {background: none;}
#nav-primary li.current a.sub {color: #00e5c3; background: #000000; border-bottom: 3px solid #00e5c3;}

#nav-primary :hover ul {left: 0px; top: 71px; width: 120px; background: none;}

/* keep the 'next' level invisible by placing it off screen. */
#nav-primary ul, #nav-primary :hover ul ul {position: absolute; left: -9999px; top: -9999px; width: 0px; height: 0px; margin: 0px; padding: 0px; list-style: none;}
#nav-primary :hover ul :hover ul {left: 120px; top: -1px; background: #000; white-space: nowrap; width: 185px; z-index: 200; height: auto;}
#nav-primary :hover ul li {margin: 0px; border-bottom: none;}
#nav-primary :hover ul li a {width: 185px; padding: 0px; text-indent: 10px; background: #000; color: #FFF; height: 30px; line-height: 30px; border-bottom: none;}
#nav-primary :hover ul li a.fly {background: #000;}
#nav-primary :hover ul :hover {background-color: #00e5c3; color: #000; border-bottom: none;}
#nav-primary :hover ul :hover a.fly {background-color: #00e5c3; color: #000; border-bottom: none;}
#nav-primary :hover ul li.currentsub a {background: #FFF; color: #000;}
#nav-primary :hover ul li.currentsub a.fly {background: #FFF; color: #000;} 
```

希望有人可以提供帮助！一直在为此绞尽脑汁，只需要一双新的眼睛来看待它。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:51:32.060

你要做的第一件事是：

```
#nav-primary :hover ul {left: 0px; top: 71px; background: none;} 
```

而不是以下内容：

```
#nav-primary :hover ul {left: 0px; top: 71px; width: 120px; background: none;} 
```

当您将鼠标悬停在菜单上时，这将阻止您的菜单垂直跳跃。

其次，您的下拉菜单没有样式。你自己试过了吗？因为我似乎无法在页面上找到它。

PS。为了测试它的外观，我用一个简单的方法隐藏了子菜单：

```
.sub-menu{
    display:none;
} 
```

# php - TSQL 执行结果在 PHP 和 SSManagement Studio 中不同

> ID：13009724
> 
> 赞同：2
> 
> 时间：2012-10-22T10:42:20.537
> 
> 标签：php, sql-server, sql-server-2012

我从 PHP 和 SSManagement Studio 查询 MSSQL 过程，结果不同？？

此查询从表中获取以 tKey 开头的字段。存在两列 tKey1 和 tKey2

程序`sp_myProc`

```
DECLARE @tKeys VARCHAR(100);

SELECT @tKeys = ISNULL(@tKeys + ',', '') + column_name
FROM   testweberp.INFORMATION_SCHEMA.columns
WHERE  table_name = myTable
       AND LEFT(column_name, 4) = 'tKey'
ORDER  BY ordinal_position;

SELECT @tKeys 
```

当我从 SSMS 执行查询时，exec sp_myProc，我得到了结果：`tKey1,tKey2`

当我从 php, 执行查询时`mssql_query("exec sp_myProc",$link)`，我得到结果：`,tKey1,tKey2`

是的，发送到 php 的结果中有一个额外的逗号它不是由 php 产生的，因为如果不是`@tKeys`，我返回`len(@tKeys)`，它`11`在 SSMS 和`12`php 中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T11:19:46.510

It seems [SET CONCAT_NULL_YIELDS_NULL](http://msdn.microsoft.com/en-us/library/ms176056.aspx) may be the culprit.

Using a similar query on one of my databases returns no leading comma for `SET CONCAT_NULL_YIELDS_NULL ON`, and a leading comma for `SET CONCAT_NULL_YIELDS_NULL OFF`.

Note that (from MSDN)

> The setting of SET CONCAT_NULL_YIELDS_NULL is set at execute or run time and not at parse time.

# javascript - google earth 客户端/插件，同时玩3台电脑

> ID：13009725
> 
> 赞同：0
> 
> 时间：2012-10-22T10:42:21.337
> 
> 标签：javascript, google-earth, google-earth-plugin

您好，我正在将 3 台计算机的视图与 Google 地球客户端和插件同步，有没有办法在所有 3 台机器上同步播放之旅？使用客户端、插件还是两者兼而有之？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:00:19.143

我认为您可以使用诸如 websockets 之类的技术。我们正在使用 Atmostsphere (https://github.com/Atmosphere/atmosphere) 来同步插件的内容。我认为您可以在服务器中使用[http://socket.io/](http://socket.io/)我认为它比 Atmosphere 更容易使用

# c - 如何可靠地比较 Haskell 和 C 的运行时？

> ID：13009728
> 
> 赞同：15
> 
> 时间：2012-10-22T10:42:26.443
> 
> 标签：c, haskell, benchmarking, criterion

我使用 Criterion 库为我的 Haskell 函数编写基准测试。现在我在 C 中实现相同的算法来比较 Haskell 的性能。问题是我怎样才能可靠地做到这一点？Criterion 做了很多花哨的事情，比如计算时钟调用开销和对结果进行统计分析。我想如果我只是测量我的 C 函数所需的时间，它将无法与 Criterion 返回的结果相提并论。在他[关于 Criterion 的原始帖子中，](http://www.serpentine.com/blog/2009/09/29/criterion-a-new-benchmarking-library-for-haskell/) Bryan O'Sullivan 写道：“甚至应该很容易使用标准来对 C 代码和命令行程序进行基准测试。” 问题是如何？Takayuki Muranushi[比较 DFT 的 C 实现](http://en.pk.paraiso-lang.org/Hackage/what-is-the-fastest-dft-in-haskell/main)使用 Haskell 通过生成线程并调用可执行文件，但我担心这会增加很多额外的开销（创建新线程，运行应用程序，输出到 stdio，然后从中读取），这使得结果无法比较。我也考虑过使用 FFI，但我再次担心额外的开销会使这种比较不公平。

如果无法使用 Criterion 可靠地对 C 进行基准测试，那么您会推荐哪些 C 基准测试方法？我在这里阅读了一些关于 SO 的问题，似乎有许多不同的函数可以测量系统时间，但它们要么以毫秒为单位提供时间，要么具有很大的调用开销。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-22T14:02:03.477

FFI 可以以不会增加太多开销的方式使用。考虑以下程序（[此处](https://gist.github.com/3931496)提供完整代码）：

```
foreign import ccall unsafe "mean" c_mean :: Ptr CInt -> CUInt -> IO CFloat

main :: IO ()
main = do
  buf <- mallocBytes (bufSize * sizeOfCInt)
  fillBuffer buf 0
  m <- c_mean buf (fromIntegral bufSize)
  print $ realToFrac m 
```

C 调用编译为以下 Cmm：

```
s2ni_ret() { ... }
    c2qy:
        Hp = Hp + 12;
        if (Hp > I32[BaseReg + 92]) goto c2qC;
        _c2qD::I32 = I32[Sp + 4];
        (_s2m3::F32,) = foreign "ccall"
          mean((_c2qD::I32, PtrHint), (100,)); 
```

这是组装：

```
s2ni_info:
.Lc2qy:
        addl $12,%edi
        cmpl 92(%ebx),%edi
        ja .Lc2qC
        movl 4(%ebp),%eax
        subl $4,%esp
        pushl $100
        pushl %eax
        ffree %st(0) ;ffree %st(1) ;ffree %st(2) ;ffree %st(3)
        ffree %st(4) ;ffree %st(5)
        call mean 
```

因此，如果您将 C 导入标记为`unsafe`并在测量之前进行所有编组，那么您的 C 调用基本上只是一个内联`call`指令 - 就像您在 C 中进行所有基准测试一样。这是我对 C 函数进行基准测试时 Criterion 报告的内容什么也没做：

```
benchmarking c_nothing
mean: 13.99036 ns, lb 13.65144 ns, ub 14.62640 ns, ci 0.950
std dev: 2.306218 ns, lb 1.406215 ns, ub 3.541156 ns, ci 0.950
found 10 outliers among 100 samples (10.0%)
  9 (9.0%) high severe
variance introduced by outliers: 91.513%
variance is severely inflated by outliers 
```

这大约比我机器上估计的时钟分辨率小 400 倍（约 5.5 微秒）。为了比较，这里是计算 100 个整数的算术平均值的函数的基准数据：

```
benchmarking c_mean
mean: 184.1270 ns, lb 183.5749 ns, ub 185.0947 ns, ci 0.950
std dev: 3.651747 ns, lb 2.430552 ns, ub 5.885120 ns, ci 0.950
found 6 outliers among 100 samples (6.0%)
  5 (5.0%) high severe
variance introduced by outliers: 12.329%
variance is moderately inflated by outliers 
```

# html - 如何检索同一行 html 表的不同列的文本？

> ID：13009729
> 
> 赞同：0
> 
> 时间：2012-10-22T10:42:27.917
> 
> 标签：html, hyperlink, html-table

我有一个表，其中有一列带有超链接。现在多一列具有一些价值。我的疑问是：如何检测单击了哪一行的超链接，以及如何检索该行另一列的值？

例如结构将是这样的：

```
<table>
<tr>
<td>some_value</td>
<td>hyperlink</td>
</tr>

<tr>
<td>some_value</td>
<td>hyperlink</td>
</tr>

<tr>
<td>some_value</td>
<td>hyperlink</td>
</tr>
</table> 
```

因此，现在如果用户单击超链接，我只需要检索该行的“some_value”。

此超链接是指向另一个 html 页面的链接。当我单击该链接时，我需要将其他列的文本存储在本地存储中，以便在下一个 html 页面中进一步使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:55:53.627

参数中带有变量的标准链接有什么问题？

```
<tr>
<td>some value</td>
<td><a href="/page.php?id=some+value">hyperlink</a></td>
</tr> 
```

这可以使用 javascript 和/或 jQuery 以自动化方式完成——但我没有看到您要求这样做。这是一个使用 jQuery 的示例。

```
<tr>
<td class="val">some value</td>
<td class="link">hyperlink</td>
</tr>

<script type="text/javascript">
    $('.link').click(function(){
       var val = $(this).prev('.val').text();
       var url = 'page.php?value=' + val;
       alert(url);
    });
</script> 
```

# asp.net-mvc - 为什么我的动态视图数据没有在我的局部视图中列出？

> ID：13009730
> 
> 赞同：0
> 
> 时间：2012-10-22T10:42:35.297
> 
> 标签：asp.net-mvc, asp.net-mvc-partialview

我已经从控制器传递了值

```
public ActionResult Index(int? Page, string sortcol="ID", string sortorder="ASC", string firstname = "", string lastname = "", string emailaddress = "")
{
     int TotalPages = 0;

        var userlist = ur.GetUsersList(firstname, lastname, emailaddress, Page ?? 1, PageSize,out TotalPages, sortcol, sortorder);

        ViewBag.PageIndex = 1;

        ViewData["TotalPages"] = TotalPages.ToString();

        if (Request.IsAjaxRequest())
        {
            return PartialView("ListUsers", userlist);
        }
        return View(userlist);
    } 
```

在我的父母看来：

```
@Html.Partial("ListUsers", Model, ViewData) 
```

在我的子视图（列表用户）中：

```
@ViewData["TotalPages"] 
```

我无法获得 Viewdata totalpages 的值。为什么会这样？它总是返回零。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T11:33:38.017

在这种情况下不要使用 View Data，你应该创建 viewModel：

```
var model = new UsersViewModel
{
    Users = userList;
    TotalPages =TotalPages.ToString();
} 
```

最后：

```
return View(model); 
```

型号类：

```
public class UsersViewModel
{
    public IEnumerable<User> Users{ get; set; }
    public int TotalPages{ get; set; }
} 
```

这是更优雅的解决方案。

# android - Android：在一般框架布局中获取 imageView 的位置

> ID：13009732
> 
> 赞同：0
> 
> 时间：2012-10-22T10:42:40.320
> 
> 标签：android, android-linearlayout, android-framelayout

在我的应用程序中，布局中有这种情况：

我有一个通用的 FrameLayout，里面有四个 LinearLayout；在每个LinearLayout里面我有两个小的LinearLayout；现在我的问题是，我可以检测到这些最后一个线性的确切位置，但考虑到一般的 FrameLayout ......所以这样我可以将一个新框架完全定位在这些线性的相同位置......你能帮我吗?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:01:18.853

尝试这样的事情：

```
View view = findViewById(R.id.myLinearLayout);
View generalFrameLayout = findViewById(R.id.generalFrameLayout)
int x = 0;
int y = 0;
while (view.getParent() != generalFrameLayout) {
    x += view.getX();
    y += view.getY();
    view = view.getParent();
}
x += view.getX();
y += view.getY(); 
```

# html - 搜索结果列表的 HTML5 标记

> ID：13009735
> 
> 赞同：0
> 
> 时间：2012-10-22T10:42:52.857
> 
> 标签：html, semantic-markup

> **可能重复：**
> [使用 HTML5 语义标记搜索结果列表](https://stackoverflow.com/questions/3255109/marking-up-a-search-result-list-with-html5-semantics)

我有一个从查询到数据库的项目列表。现在我想通过 HTML 将它们显示给用户。

我最初的方式是这样的：

```
<ol>
  <li>
    search element 1
  </li>
  ...
</ol> 
```

我想知道 HTML5 是否有更好的语义方式，例如：

```
<article>
  <section>
    search element 1
  </section>
  ...
</article 
```

有没有人有更好的语义方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:54:45.277

如果您的搜索结果是排名的（可能按相关性），您应该使用一个`ol`元素。每个结果都是它自己的`li`。如果每个结果包含的不仅仅是一个链接（例如，带有文本片段、作者姓名、发布日期等），`article`也可以使用它。

`ol`描述结果是排名的，`article`描述每个结果代表一个独立的实体（*可以*在提要中联合）。

我给出了一个[标记示例](https://stackoverflow.com/a/11970336/1591669)作为另一个问题的答案：

```
<ol start="1">

  <li id="1">
    <article>
     <h1><a href="url-to-the-page.html" rel="external">The Title of the Page</a></h1>
     <p>A short summary of the page</p>
     <footer>
       <dl>
         <dt>Categories</dt>
         <dd><a href="first-category.html">First category</a></dd>
         <dd><a href="second-category.html">Second category</a></dd>
         <dt>File size</dt>
         <dd>2 <abbr title="kilobyte">kB</code></dd>
         <dt>Published</dt>
         <dd><time datetime="2010-07-15T13:15:05-02:00">Today</time></dd>
        </dl>
      </footer>
    </article>
  </li>

  <li id="2">
    <article>
     …
    </article>
  </li>

</ol> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:47:04.527

不，Article 和 Section 不是为了进一步滥用标准而引入的，而是为了在标签和内容之间建立明确的联系。仅当您确实在描述部分和文章实例时才应该使用它们。

搜索结果必然是一个列表，并且应该在`<li>`标签中使用。不过，您是否使用订购的产品并不重要。

# iphone - iphone方向问题..

> ID：13009740
> 
> 赞同：1
> 
> 时间：2012-10-22T10:43:17.607
> 
> 标签：iphone, ios, uiinterfaceorientation

我遇到了有关 iphone 屏幕方向的问题。我的应用程序的基础 sdk 是 ios 6.0，部署目标是 4.3，并在 ios 5.0 和 5.1 上运行

在应用程序的 plist 文件中，我设置了`Portrait (bottom home button)`,`Landscape (left home button)`和`Landscape (right home button)`. 我正在开发一个通用应用程序。因此，在每个视图的`- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation`方法中，我都会有条件地返回`portrait`iphone 和`landscape`ipad。

我的导航流程是：

`UINavigatinController`推送的`UITableViewControler`第一个选项卡`UINavigationController`在`rootViewController`.

在我最后一个 viewController 的`- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation`方法中，我返回了`YES`. 但是这个视图的应用程序根本没有旋转。甚至没有调用`- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration`方法。:(

我的要求是只支持一个视图控制器而不是整个应用程序的横向和纵向方向。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:16:08.097

您可以通过视图控制器类中的此代码解决此方向问题。

```
#ifdef IOS_OLDER_THAN_6
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {

       return (toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft) || 
(toInterfaceOrientation == UIInterfaceOrientationLandscapeRight);

}
#endif

#ifdef IOS_NEWER_OR_EQUAL_TO_6
-(BOOL)shouldAutorotate {

       return YES;
}
- (NSUInteger)supportedInterfaceOrientations {
       return (UIInterfaceOrientationLandscapeLeft | UIInterfaceOrientationLandscapeRight); //IOS_5
}
#endif 
```

您必须在 .pch 文件中定义此代码。

代码 ：

```
 #define IOS_OLDER_THAN_6  ([[[UIDevice currentDevice] systemVersion] floatValue] < 6.0)
 #define IOS_NEWER_OR_EQUAL_TO_6 ([[[UIDevice currentDevice] systemVersion] floatValue] >= 6.0) 
```

希望它有效。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:00:55.117

你有多少个 UIViewController？也许是 2、3 或更多。

尝试在每个视图控制器添加代码

```
- (BOOL)shouldAutorotateToInterfaceOrientation:    (UIInterfaceOrientation)interfaceOrientation
{
NSLog(@"viewcontroller: %@", self);
return YES;
} 
```

你会知道，哪个视图控制器接收旋转通知。模态视图控制器似乎有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T10:48:00.287

对于 iOS 6，使用`supportedInterfaceOrientations`&`shouldAutorotate`代替`shouldAutorotateToInterfaceOrientation:`

```
- (NSUInteger) supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskLandscape; (Check for device type here and return appropriate orientations)
}

- (BOOL) shouldAutorotate {
   return YES;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T11:05:44.390

```
 -(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    if(toInterfaceOrientation == UIInterfaceOrientationPortrait || toInterfaceOrientation == UIInterfaceOrientationPortraitUpsideDown)

  // setFrames=CGRectMake(x, y, w, h);

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T11:16:38.460

您应该实现所有这些方法以使其适用于所有具有 ios >= 4.3 版本的设备。

```
// Autorotation (iOS <= 5.x)

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
        return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft||interfaceOrientation==UIInterfaceOrientationLandscapeRight||interfaceOrientation == UIInterfaceOrientationPortrait) ;
}

// Autorotation (iOS >= 6.0)

- (BOOL) shouldAutorotate
{
    return YES;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskLandscapeLeft | UIInterfaceOrientationMaskLandscapeRight;
} 
```

# objective-c - Objective-c 使用必要的委托方法添加动态元素

> ID：13009741
> 
> 赞同：0
> 
> 时间：2012-10-22T10:43:17.517
> 
> 标签：objective-c, ios, cocoa-touch

我有一个应用程序，其中每个屏幕都将动态添加，以及屏幕上的所有元素，即表格、文本字段等。每个 viewController 将使用相同的 NIB，基本上我循环遍历 JSON 并且对于每个新屏幕，我创建一个新的 ViewController 对象并将其添加到数组中，我对要添加到屏幕的对象执行相同的操作。

问题是，一个屏幕可能需要一个 tableView 委托方法，另一个可能需要文本字段委托方法。如果我没有在接口文件中实现委托，那么我不能这样做

```
 textField.delegate = self; 
```

或者

```
tableView.delegate = self;
tableView.dataSource = self; 
```

因为它会标记一个错误。

只是添加我可能拥有的所有委托方法会是不好的做法，即

```
@interface Testing : UIViewController<UITableViewDataSource, UITableViewDelegate, UITextFieldDelegate, UIPickerViewDataSource, UIPickerViewDelegate, UITextViewDelegate, UIWebViewDelegate> 
```

然后实现所有方法，这样它只会在需要时调用它们。或者这是个坏主意？

或者有没有更好的方法来设置它？

任何信息将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:46:35.307

一种霰弹枪方法是从委托中剥离类型：

```
textField.delegate = (id) self; 
```

如果委托以某种方式保证按照协议的要求响应消息，那么一切都会正常工作。这是一个丑陋的黑客还是一个优雅的解决方案取决于你的问题的细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:56:56.837

是的，您可以实现所需的委托方法，并在需要时调用它们。它始终是首选方法。

# android - 拍照后图像的旋转

> ID：13009742
> 
> 赞同：1
> 
> 时间：2012-10-22T10:43:23.960
> 
> 标签：android

我使用相机 API 来拍照。预览（surfaceview）的方向是好的。但是当我查看我拍摄的照片时，它的方向是错误的。那么我该如何解决呢？我使用HTC的感觉。

ps 像这样：当我拍摄肖像照片时，它会以 90 度的角度逆时针显示。

当我以逆时针 90 度的角度拍照时，它会以纵向显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:05:35.107

检查我对这个问题的回答[以旋转图像](https://stackoverflow.com/a/12044717/886001)

您使用 a`Matrix`应用所需的旋转。如果你没有正确的方向你只是`ExifInterface.TAG_ORIENTATION`用来得到它然后你旋转你的图像

# perl - Perl：从字符串创建目录

> ID：13009744
> 
> 赞同：2
> 
> 时间：2012-10-22T10:43:31.087
> 
> 标签：perl

假设我有一个基本目录`/home/user/test/`。现在，我有两个字符串`a`，`b`它们将是基本目录中的文件夹，例如`/home/user/test/a/b`.

目前我正在做的是：

```
use File::Path qw(make_path);

my $path = "$basedir"."/"."a"."/"."b"
make_path("$path"); 
```

现在，我正在寻找的是：

```
my $dir = "/home/user/test";
my $x = "a";
my $y = "b";

make_path($dir, $x, $y); 
```

但是当我运行上面的代码而不是创建它时，它会在当前工作目录中创建`/home/user/test/a/b`两个单独的目录。`a``b`

那么，实现这一目标的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T10:47:57.133

这是一个简单的方法：

```
use strict;
use warnings;
use File::Path qw(make_path);    

my $dir = "/home/user/test";
my $x = "a";
my $y = "b";

make_path(join '/',$dir,$x,$y); 
```

查找[`join`](http://perldoc.perl.org/functions/join.html)更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T11:23:59.753

更好地使用**Path::Class::Dir**

```
use Path::Class qw(dir);  # Export a short constructor

my $dir = dir('foo', 'bar');       # Path::Class::Dir object
my $dir = Path::Class::Dir->new('foo', 'bar');  # Same thing

# Stringifies to 'foo/bar' on Unix, 'foo\bar' on Windows, etc.
print "dir: $dir\n"; 
```

另请参阅 perldoc Path::Class::Dir 或 [https://metacpan.org/module/Path::Class::Dir](https://metacpan.org/module/Path::Class::Dir)

# iphone - 子视图中的触摸检测

> ID：13009746
> 
> 赞同：1
> 
> 时间：2012-10-22T10:43:33.983
> 
> 标签：iphone, objective-c, ios, ios5, ios4

我有一个视图，其中有一个滚动视图。我想检测触摸开始、移动等方法。我使用了这些方法。这些方法在滚动视图之外工作正常，但在滚动视图内部不起作用。告诉我为什么不起作用，解决方案是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:57:42.503

您必须继承**UIView**（作为 MyUIView）并实现触摸委托。

然后将 MyUIView 添加到 UIScrollView

例如：

```
 @interface MyUIView : UIViewController {

   }
   @end

  @implementation MyUIView

      //implement touch delegate here
   } 
```

***在主视图中添加这一行***

```
MyUIView *myUIView = [[MyUIView alloc] init];
myUIView.userIntarctionEnabled = YES;
[yourScrollView addSubView:myUIView.view]; 
```

**注意**：您可以使用[UIGustures](http://mobiledevelopertips.com/event-handling/gestures-recognizers-tap-pinchzoom-rotate-swipe-pan-long-press.html) 而不是子类化。UIGestureRecognizer 类可用于帮助检测和响应 iOS 设备上常见的各种 UI 手势

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:05:18.497

使用 `convertPoint: toView:`方法。

```
CGPoint *point = [yourView convertPoint:touchPoint toView:yourScrollView]; 
```

# ruby-on-rails - Rails 在生产中缺少 JBuilder 处理程序/模板

> ID：13009748
> 
> 赞同：1
> 
> 时间：2012-10-22T10:43:48.227
> 
> 标签：ruby-on-rails, nginx, unicorn, rabl, jbuilder

我刚刚开始使用 JBuilder 并让它在本地开发模式下成功运行。

我刚刚将它推送到我的 Nginx/Unicorn 服务器，每当我尝试查看使用 JBuilder json 的 url 时，我都会收到 Template is Missing 错误，并且在 :handlers 列表中没有 JBuilder？

**模板丢失**

缺少模板 client_events/all_client_events_for_client、application/all_client_events_for_client 与 {:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :png, :jpeg, : gif, :bmp, :tiff, :mpeg, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip], :handlers=>[:erb, :builder, ：苗条，：哈姆]}。在以下位置搜索：*“/home/deployer/apps/bigfor-blue/releases/20121022093934/app/views”

它完全在本地工作，但由于某种原因，当我尝试在生产中运行它时它不会同意。

任何想法都会很棒。

干杯

**更新：**

发展.rb

```
 BigforBlue::Application.configure do
    # Settings specified here will take precedence over those in config/application.rb

    # In the development environment your application's code is reloaded on
    # every request. This slows down response time but is perfect for development
    # since you don't have to restart the web server when you make code changes.
    config.cache_classes = false

    # Log error messages when you accidentally call methods on nil.
    config.whiny_nils = true

    # Show full error reports and disable caching
    config.consider_all_requests_local       = true
    config.action_controller.perform_caching = false

    # Print deprecation notices to the Rails logger
    config.active_support.deprecation = :log

    # Only use best-standards-support built into browsers
    config.action_dispatch.best_standards_support = :builtin

    # Raise exception on mass assignment protection for Active Record models
    config.active_record.mass_assignment_sanitizer = :strict

    # Log the query plan for queries taking more than this (works
    # with SQLite, MySQL, and PostgreSQL)
    config.active_record.auto_explain_threshold_in_seconds = 0.5

    # Do not compress assets
    config.assets.compress = false

    # Expands the lines which load the assets
    config.assets.debug = true

    # MAILER

    # Don't care if the mailer can't send
    config.action_mailer.raise_delivery_errors = true

    config.action_mailer.delivery_method = :smtp

    config.action_mailer.default_url_options = { :host => "localhost:3000" }
    ActionMailer::Base.smtp_settings = {
      :address => "smtp.gmail.com",
      :port => 587,
      :authentication => :plain,
      :user_name => "**** TAKEN OUT ****",
      :password => "**** TAKEN OUT ****",
      :openssl_verify_mode => "none"
    }

  end 
```

生产.rb

```
 BigforBlue::Application.configure do
    # Settings specified here will take precedence over those in config/application.rb

    # Code is not reloaded between requests
    config.cache_classes = true

    # Full error reports are disabled and caching is turned on
    config.consider_all_requests_local       = true
    config.action_controller.perform_caching = true

    # Disable Rails's static asset server (Apache or nginx will already do this)
    config.serve_static_assets = false

    # Compress JavaScripts and CSS
    config.assets.compress = true

    # Don't fallback to assets pipeline if a precompiled asset is missed
    config.assets.compile = false

    # Generate digests for assets URLs
    config.assets.digest = true

    # Defaults to nil and saved in location specified by config.assets.prefix
    # config.assets.manifest = YOUR_PATH

    # Specifies the header that your server uses for sending files
    # config.action_dispatch.x_sendfile_header = "X-Sendfile" # for apache
    # config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect' # for nginx

    # Force all access to the app over SSL, use Strict-Transport-Security, and use secure cookies.
    # config.force_ssl = true

    # See everything in the log (default is :info)
    # config.log_level = :debug

    # Prepend all log lines with the following tags
    # config.log_tags = [ :subdomain, :uuid ]

    # Use a different logger for distributed setups
    # config.logger = ActiveSupport::TaggedLogging.new(SyslogLogger.new)

    # Use a different cache store in production
    # config.cache_store = :mem_cache_store

    # Enable serving of images, stylesheets, and JavaScripts from an asset server
    # config.action_controller.asset_host = "http://assets.example.com"

    # Precompile additional assets (application.js, application.css, and all non-JS/CSS are already added)
    # config.assets.precompile += %w( search.js )

    # Disable delivery errors, bad email addresses will be ignored
    # config.action_mailer.raise_delivery_errors = false

    # Enable threaded mode
    # config.threadsafe!

    # Enable locale fallbacks for I18n (makes lookups for any locale fall back to
    # the I18n.default_locale when a translation can not be found)
    config.i18n.fallbacks = true

    # Send deprecation notices to registered listeners
    config.active_support.deprecation = :notify

    # Log the query plan for queries taking more than this (works
    # with SQLite, MySQL, and PostgreSQL)
    # config.active_record.auto_explain_threshold_in_seconds = 0.5

    # MAILER
    # config.action_mailer.default_url_options = { :host => "http://*** TAKEN OUT ***" }

  end 
```

**更新 2**

我从我的设置中删除了 JBuilder 并用 RABL 替换它，但我仍然遇到缺少模板和缺少处理程序的相同问题。

所以它看起来不是 Jbuilder/RABL 错误，而更像是 Unicorn/Nginx 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T03:37:44.547

最后，这个问题看起来像是在配置中或在初始 Capistrano 'cap deploy:setup' 或 'cap deploy:cold' 期间引起的

我最终从我的服务器中删除了该应用程序并执行了一个新的“cap deploy：setup”和“cap deploy：cold”，这解决了这个问题，JBuilder 按预期工作。

不知道是什么导致了这个问题，因为 Capistrano 配方在第一次错误部署和第二次工作部署之间没有改变。

因此，如果您遇到此类问题，我的建议是完全重新部署您的应用程序可能是一种选择。

JB

# node.js - nodejs：需要在处理请求之前完成操作

> ID：13009750
> 
> 赞同：0
> 
> 时间：2012-10-22T10:43:50.483
> 
> 标签：node.js

我的应用程序需要首先（并且一次）执行一些操作，然后才开始处理请求并运行其他操作。我正在寻找一些能够获得第一个动作和一堆处理程序的中间件。它应该首先调用该动作，并且只有在它完成后才会调用所有处理程序，而不会再次调用第一个动作。

编辑：假设我的第一个动作需要一段时间。我可以在我的第一个操作的回调中注册 app.get 处理程序，但是在我的第一个操作完成之前到达的任何请求都将丢失。相反，我想将请求存储在队列中，直到第一个操作完成，然后才调用待处理请求的处理程序。之后，我希望我的中间件自行删除，这样只有请求处理程序才能处理新请求。

你知道这样的中间件吗？

谢谢，李

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:32:30.690

您可以像这样创建自己的中间件：

```
app.use(function(req, res, next) {
  console.log('first');
  if (firstIsReady) {
    next();
  } else {
    res.redirect('/error')
  }
}) 
```

确保将其放在`app.router`. 那是你要找的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:13:18.420

嗯...不确定我是否理解正确，但是...

```
var done = false;
function myFunc () {
   if (done==true)break;
   //your code
   console.log('First');
   //your code
   done=true;
}

app.get('/desk/settings', myFunc, function(req, res) { 
   console.log('Second');
}); 
```

Reuest -> 中间件 myFunc -> 请求代码。

不是你要找的东西？

# android - 4.1.2 上的 Android 类别主页

> ID：13009752
> 
> 赞同：4
> 
> 时间：2012-10-22T10:43:54.850
> 
> 标签：android, android-manifest

我正在开发清单中带有 CATEGORY HOME 的应用程序。

```
<action android:name="android.intent.action.MAIN" />
<category android:name="android.intent.category.HOME"/> 
```

它在 Android 4.1.1 上运行得很好，但几天前，我已经升级到 4.1.2，现在 CATEGORY HOME 不起作用。

您知道 4.1.2 是否已弃用此功能，还是问题出在我的设置上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T06:34:29.750

您还需要添加以下代码行才能使其工作

```
<category android:name="android.intent.category.DEFAULT"/> 
```

# ruby-on-rails-3 - 如何设计允许我在不传递当前密码的情况下更新密码？

> ID：13009753
> 
> 赞同：0
> 
> 时间：2012-10-22T10:43:55.170
> 
> 标签：ruby-on-rails-3, devise, ruby-on-rails-3.2

我正在使用带有设计的 rails 3.2.x 来验证用户密码。在我更新的一页上，允许用户更新他的密码。但即使提供了错误的当前密码，用户也可以更新他/她的密码。

rails 控制台也发生了同样的事情。

```
@user = user.update_attributes :password => "some_password" 
```

更新@user 的密码。

如何摆脱这个麻烦？

**更新**：我可以使用错误的 current_password 参数将用户密码更新为 update_attributes 方法，例如，

```
@user = user.update_attributes :password => "some_password", :current_password => "wrong_password" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T05:44:58.450

弄清楚了，

而不是使用

```
 user.update_attributes(params[:user]) 
```

一个可以使用

```
user.update_with_password(params[:user]) 
```

这将确保当前密码有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:00:39.793

也许你需要使用

`before_filter :authenticate_user!`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T11:17:49.007

可能是您需要添加`:password => "some_password"`，`:confirm_password => "some_password"` 或者您必须添加控制器`:before_filter => authenticate_user!.`

# jquery - getJSON 同步

> ID：13009755
> 
> 赞同：42
> 
> 时间：2012-10-22T10:44:03.200
> 
> 标签：jquery, ajax, sync, getjson, synchronous

目标：我所追求的是每次在数据库中添加某些内容时（在 $.ajax 到 submit_to_db.php 之后）从数据库中获取数据并刷新 main.php（通过 draw_polygon 更明显）。

所以基本上我有一个main.php，它将ajax调用另一个php来接收一个将保存到数据库的数组，而一个json调用另一个php来返回一个数组将被main.php使用。

```
$(document).ready(function() {
    get_from_db();
    $('#button_cancel').click(function(){
       $.ajax({
          url: 'submit_to_db.php',
          type: 'POST',
          data: {list_item: selected_from_list},

          success: function(result){
             ...
             get_from_db();
          }
       });
    });
    function get_from_db(){
         $.getJSON('get_from_db.php', function(data) {
             ...
             draw_polygon(data);
         });
    }
 }); 
```

就我而言，我所做的是`get_from_db`调用函数`getJSON`来实际从数据库中获取数据，并将数据用于`draw_polygon`. 但这是应该怎么做的吗？我是一个完整的新手，`getJSON`老实说，这也是我第一次尝试使用 ajax。所以我的问题是：异步实际上是如何工作的？是否有另一种解决方法，而不是必须调用函数`get_from_db`（`getJSON`它不是同步的，是吗？这就是为什么当页面不在函数中时它不更新页面？）一直 -就像`$.ajax`（`async: false`顺便说一句，我无法让它工作）。我的方法很有效，但我想也许还有其他更好的方法可以做到这一点。我很想学习如何。提前致谢。我希望我有任何意义。

为了更清楚，这就是我想要实现的目标：

1.  `@start`页，从数据库中获取数据（当前通过`getJSON`）
2.  `canvas`使用_`data`
3.  当我单击完成按钮时，它将更新数据库
4.  我想再次自动获取数据以重新绘制画布中的更改。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2014-04-14T09:56:39.010

由于 $.getJSON() 使用 ajax 配置，只需设置全局 ajax 配置：

```
// Set the global configs to synchronous 
$.ajaxSetup({
    async: false
});

// Your $.getJSON() request is now synchronous...

// Set the global configs back to asynchronous 
$.ajaxSetup({
    async: true
}); 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-10-22T10:48:51.140

异步确实意味着请求在后台运行，并在收到响应时回调您的函数。如果您想获得结果但允许在请求中使用您的应用程序，则此方法是最好的。如果您想直接响应，请查看同步请求。此请求将暂停脚本执行，直到它得到响应，并且用户在收到响应之前不能做任何事情。您可以通过以下方式切换它：

```
async: false, 
```

例如：

```
$.ajax({
    url: "myurl",
    async: false,
    ...
}) 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-05-13T16:37:37.997

$.getJSON()，不接受配置，因为它在文档中说它是以下的简写版本：

```
$.ajax({
  dataType: "json",
  url: url,
  data: data,
  success: success
}); 
```

因此，只需根据它重写您的请求，**async:false**就会按您的预期工作。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-02-23T15:19:11.487

`$.getJSON()`是一个简写符号`$.ajax()`，可以将其配置为同步（参见[jQuery.getJSON](http://api.jquery.com/jQuery.getJSON/)和[JQuery.ajax](http://api.jquery.com/jQuery.ajax/)）：

```
$.ajax({
  dataType: "json",
  url: url,
  data: data,
  async: false, 
  success: function(data) {
      ...
      draw_polygon(data);
  }
}); 
```

尽量**避免同步调用**。来自 jQuery doc 的引用[（参见 async prop）](http://api.jquery.com/jQuery.ajax/)：

> 跨域请求和 dataType: "jsonp" 请求不支持同步操作。请注意，同步请求可能会暂时锁定浏览器，从而在请求处于活动状态时禁用任何操作。

您可能想像这样尝试 jQuery [Deferreds](http://api.jquery.com/category/deferred-object/)：

```
var jqxhr = $.getJSON(url);
jqxhr.done(function(data) {
    ...
    draw_polygon(data);
}); 
```

# xslt - 如何通过使用xslt提取数字的整数部分来保持其他数字的格式？

> ID：13009756
> 
> 赞同：1
> 
> 时间：2012-10-22T10:44:07.600
> 
> 标签：xslt, xslt-1.0

应用以下xsl代码时是否有任何可能

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml"/>
<xsl:strip-space elements="*"/>

<xsl:template match="fils1"><xsl:text>&#10;</xsl:text>
    <xsl:choose>
        <xsl:when test=".='C_RE'">
            <fils><xsl:value-of select="." /></fils>
        </xsl:when>
        <xsl:otherwise>
            <fils><xsl:value-of select="floor(.)*(. >= 0) + ceiling(.) * not(. >= 0)"/>      </fils><xsl:text>&#10;</xsl:text>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template> 
```

在这个 xml 文件上：

```
<Racine>
<el1>
    <fils1 >2.13</fils1>
    <fils1>012</fils1>
    <fils1>-31.45</fils1>
    <fils1>C_RE</fils1>
</el1>

</Racine> 
```

得到这个输出？

```
<?xml version="1.0" encoding="utf-8"?>
<fils>2</fils>

<fils>012</fils>

<fils>-31</fils>

<fils>C_RE</fils> 
```

目前我可以在我的结果的第二行得到这个：`<fils>12</fils>`我想在我的结果中得到数字**0**，如下所示：`<fils>012</fils>`。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:24:31.757

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="fils1[number() = number()]">
        <fils>
          <xsl:value-of select="substring-before(concat(.,'.'), '.')"/>
        </fils>
    </xsl:template>
    <xsl:template match="fils1">
      <fils><xsl:copy-of select="node()"/></fils>
    </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<Racine>
    <el1>
        <fils1>2.13</fils1>
        <fils1>012</fils1>
        <fils1>-31.45</fils1>
        <fils1>C_RE</fils1>
    </el1>
</Racine> 
```

**产生了想要的正确结果：**

```
<fils>2</fils>
<fils>012</fils>
<fils>-31</fils>
<fils>C_RE</fils> 
```

**说明**：

1.  使用表达式来测试当前节点的字符串值是否是数字的正确表示是：`number() = number()`。

2.  正确使用哨兵编程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:27:50.420

您可以计算前导零的数量（可能是 = string-length(x) - string-length(number(x))）并将它们添加到最后，当然 XSLT 1.0 中的这种字符串操作非常繁琐。

# macos - 计算包含确定单词的窗口

> ID：13009758
> 
> 赞同：0
> 
> 时间：2012-10-22T10:44:16.010
> 
> 标签：macos, window, applescript, counting, contain

我一直使用这个命令计算窗口：

```
set windowsnumber to count windows 
```

现在我需要计算包含特定字符串的窗口。

例如，如果一个进程打开了 5 个窗口（窗口“A”、“B”、“A”、“C”、“D”），我需要类似“计算标题中包含“A”的窗口”之类的东西，应该返回2 在这个例子中。

这对applescript可行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T04:37:48.147

使用`whose`过滤器：

```
set windowsnumber to count (windows whose title contains "A") 
```

# testing - 哪个黑莓操作系统应该是测试设备的最低要求？

> ID：13009760
> 
> 赞同：2
> 
> 时间：2012-10-22T10:44:34.827
> 
> 标签：testing, blackberry

我需要购买一个黑莓设备来测试黑莓应用程序。我想这个故事与 iOS 和 Android 测试设备一样，不建议购买顶级新手机，而是购买速度较慢且较旧的设备。如果它适用于它们，它将适用于其他（无需详细介绍 iOS 和 Android 平台的多样性）。

您推荐哪种设备？我们通常构建针对 BB 5 以上的应用程序。

另外，目前的 BB 移动设备能否升级到 BB 10？我想不是，但我可能错了。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T12:11:28.750

我会选择低端设备，这些设备不能轻易地被强大的 CPU 或大量内存掩盖。还要寻找最差的相机（没有自动对焦）、没有 3G、320x240 屏幕分辨率等。对于 OS 5.0，这将是 8520，但它没有 GPS，这是一个有趣的测试功能。支持 GPS 的变体 8530 在市场上很难找到。运行 4.6 的 8900 曾经被操作系统错误所困扰，因此这些非常适合测试。（如果是老板/客户设备，故障率飙升）。如果您需要提高 CPU 寄存器被宇宙射线击中的机会，那么这就是设备。它有 GPS，你可以将它升级到 OS 5.0，但它会失去大部分的“魔力”。此外，大多数卖家可能都缺货。

但是，单个设备不允许您推断您的应用程序在其他操作系统或设备模型中的行为。为了涵盖这部分，您可以在模拟器中进行测试，或者如果您需要更多，可以租用在线测试平台（如 Perfecto Mobile 等）。

关于BB10，它是一个完全不同的操作系统，与以前的版本不兼容。RIM 没有透露任何 BB Java 设备可升级到 BB10 的信息（我猜当前的设备都不会）。您仍然可以通过在 WebWorks (HTML5 + JavaScript) 中开发来同时针对 BB10 和 BB Java。

* * *

更新：
如果您在市场上找不到任何上述型号，请查看 9220，它是今年经过改进的 8520，运行 7.1（也没有 GPS）。9320 类似，但具有 3G 和 GPS。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T11:33:08.547

请注意，黑莓应用程序是向前兼容的，也就是说，基于 OS 5.0 构建的应用程序可以与 OS 6.0 和 OS 7.0 一起使用。但是，相同的应用程序将无法在 OS 5.0 以下的手机上运行。测试应用程序的最佳方法是在模拟器上。有多种官方 BlackBerry 模拟器可用于模拟实际 BlackBerry 产品的功能并测试 BlackBerry 设备软件、屏幕、键盘和拨轮如何与应用程序配合使用。要在您的手机上测试该应用程序，您最好购买带有 OS 5.0 的 BlackBerry，例如 8900、8520、9630 等。BlackBerry 7 和 BlackBerry 10 不兼容。换句话说，运行 BlackBerry 7 OS 的设备将不会获得 BlackBerry 10 OS 的更新。两个操作系统不兼容

# regex - 在 R 中正确使用 gsub / 正则表达式？

> ID：13009761
> 
> 赞同：6
> 
> 时间：2012-10-22T10:44:38.010
> 
> 标签：regex, r, list, gsub

我有一长串字符串，例如这个机器可读的例子：

```
A <- list(c("Biology","Cell Biology","Art","Humanities, Multidisciplinary; Psychology, Experimental","Astronomy & Astrophysics; Physics, Particles & Fields","Economics; Mathematics, Interdisciplinary Applications; Social Sciences, Mathematical Methods","Geriatrics & Gerontology","Gerontology","Management","Operations Research & Management Science","Computer Science, Artificial Intelligence; Computer Science, Information Systems; Engineering, Electrical & Electronic","Economics; Mathematics, Interdisciplinary Applications; Social Sciences, Mathematical Methods; Statistics & Probability")) 
```

所以它看起来像这样：

```
> A  
[[1]]  
 [1] "Biology"  
 [2] "Cell Biology"  
 [3] "Art"  
 [4] "Humanities, Multidisciplinary; Psychology, Experimental"  
 [5] "Astronomy & Astrophysics; Physics, Particles & Fields"  
 [6] "Economics; Mathematics, Interdisciplinary Applications; Social Sciences, Mathematical Methods"  
 [7] "Geriatrics & Gerontology"  
 [8] "Gerontology"  
 [9] "Management"  
[10] "Operations Research & Management Science"  
[11] "Computer Science, Artificial Intelligence; Computer Science, Information Systems; Engineering, Electrical & Electronic"  
[12] "Economics; Mathematics, Interdisciplinary Applications; Social Sciences, Mathematical Methods; Statistics & Probability" 
```

我想编辑这些术语并消除重复项以获得此结果：

```
 [1] "Science"  
 [2] "Science"  
 [3] "Arts & Humanities"  
 [4] "Arts & Humanities; Social Sciences"  
 [5] "Science"  
 [6] "Social Sciences; Science"  
 [7] "Science"  
 [8] "Social Sciences"  
 [9] "Social Sciences"  
[10] "Science"  
[11] "Science"  
[12] "Social Sciences; Science" 
```

到目前为止，我只得到了这个：

```
stringedit <- function(A)  
{  
  A <-gsub("Biology", "Science", A)  
  A <-gsub("Cell Biology", "Science", A)  
  A <-gsub("Art", "Arts & Humanities", A)  
  A <-gsub("Humanities, Multidisciplinary", "Arts & Humanities", A)  
  A <-gsub("Psychology, Experimental", "Social Sciences", A)  
  A <-gsub("Astronomy & Astrophysics", "Science", A)  
  A <-gsub("Physics, Particles & Fields", "Science", A)  
  A <-gsub("Economics", "Social Sciences", A)  
  A <-gsub("Mathematics", "Science", A)  
  A <-gsub("Mathematics, Applied", "Science", A)  
  A <-gsub("Mathematics, Interdisciplinary Applications", "Science", A)  
  A <-gsub("Social Sciences, Mathematical Methods", "Social Sciences", A)  
  A <-gsub("Geriatrics & Gerontology", "Science", A)  
  A <-gsub("Gerontology", "Social Sciences", A)  
  A <-gsub("Management", "Social Sciences", A)  
  A <-gsub("Operations Research & Management Science", "Science", A)  
  A <-gsub("Computer Science, Artificial Intelligence", "Science", A)  
  A <-gsub("Computer Science, Information Systems", "Science", A)  
  A <-gsub("Engineering, Electrical & Electronic", "Science", A)  
  A <-gsub("Statistics & Probability", "Science", A)  
}  
B <- lapply(A, stringedit) 
```

但它不能正常工作：

```
> B  
[[1]]  
 [1] "Science"  
 [2] "Cell Science"  
 [3] "Arts & Humanities"  
 [4] "Arts & Humanities; Social Sciences"  
 [5] "Science; Science"  
 [6] "Social Sciences; Science, Interdisciplinary Applications; Social Sciences"  
 [7] "Science"  
 [8] "Social Sciences"  
 [9] "Social Sciences"  
[10] "Operations Research & Social Sciences Science"  
[11] "Computer Science, Arts & Humanitiesificial Intelligence; Science; Science"  
[12] "Social Sciences; Science, Interdisciplinary Applications; Social Sciences; Science" 
```

我怎样才能获得上述正确的输出？
非常感谢您的考虑！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T12:18:24.377

我发现使用两列`data.frame`作为查找最容易，一列用于课程名称，一列用于类别。这是一个例子：

```
course.categories <- data.frame(
  Course = 
  c("Art", "Humanities, Multidisciplinary", "Biology", "Cell Biology", 
    "Astronomy & Astrophysics", "Physics, Particles & Fields", "Mathematics", 
    "Mathematics, Applied", "Mathematics, Interdisciplinary Applications", 
    "Geriatrics & Gerontology", "Operations Research & Management Science", 
    "Computer Science, Artificial Intelligence", 
    "Computer Science, Information Systems", 
    "Engineering, Electrical & Electronic", "Statistics & Probability", 
    "Psychology, Experimental", "Economics", 
    "Social Sciences, Mathematical Methods", 
    "Gerontology", "Management"),
  Category =
  c("Arts & Humanities", "Arts & Humanities", "Science", "Science", 
    "Science", "Science", "Science", "Science", "Science", "Science", 
    "Science", "Science", "Science", "Science", "Science", "Social Sciences", 
    "Social Sciences", "Social Sciences", "Social Sciences", "Social Sciences")) 
```

然后，假设`A`作为您的问题中的列表：

```
sapply(strsplit(unlist(A), "; "), 
       function(x) 
         paste(unique(course.categories[match(x, course.categories[["Course"]]),
                                        "Category"]), 
               collapse = "; "))
#  [1] "Science"                            "Science"                           
#  [3] "Arts & Humanities"                  "Arts & Humanities; Social Sciences"
#  [5] "Science"                            "Social Sciences; Science"          
#  [7] "Science"                            "Social Sciences"                   
#  [9] "Social Sciences"                    "Science"                           
# [11] "Science"                            "Social Sciences; Science" 
```

`match`将值`A`与数据集中的课程名称相匹配，`course.categories`并说明匹配发生在哪些行上；这用于提取课程所属的类别。然后，`unique`确保我们只有每个类别中的一个。`paste`把事情重新组合在一起。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T11:03:48.263

让我从一个例子开始。你有一个字符串“细胞生物学”。第一个替换，`A <-gsub("Biology", "Science", A)`将它变成“细胞科学”。然后不会被替换。

由于您不使用正则表达式，我宁愿使用一种哈希来进行替换：

```
myhash <- c( "Science", "Science", "Arts & Humanities", "Arts & Humanities", "Social Sciences", 
  "Science", "Science", "Social Sciences", "Science", "Science", "Science", "Social Sciences", 
  "Science", "Social Sciences", "Social Sciences", "Science", "Science", "Science", "Science", 
  "Science" )

names( myhash ) <- c( "Biology", "Cell Biology", "Art", "Humanities, Multidisciplinary", 
  "Psychology, Experimental", "Astronomy & Astrophysics", "Physics, Particles & Fields", "Economics", 
  "Mathematics", "Mathematics, Applied", "Mathematics, Interdisciplinary Applications", 
  "Social Sciences, Mathematical Methods", "Geriatrics & Gerontology", "Gerontology", "Management",
   "Operations Research & Management Science", "Computer Science, Artificial Intelligence", 
  "Computer Science, Information Systems", "Engineering, Electrical & Electronic", 
  "Statistics & Probability" ) 
```

现在，给定一个字符串，例如“Biology”，您可以快速查找您的类别：

```
myhash[ "Biology" ] 
```

我不确定您为什么要使用列表而不是字符串向量，因此我将简化一下您的情况：

```
A <- c("Biology","Cell Biology","Art",
  "Humanities, Multidisciplinary; Psychology, Experimental",
  "Astronomy & Astrophysics; Physics, Particles & Fields",
  "Economics; Mathematics, Interdisciplinary Applications; Social Sciences, Mathematical Methods",
  "Geriatrics & Gerontology","Gerontology","Management","Operations Research & Management Science",
  "Computer Science, Artificial Intelligence; Computer Science, Information Systems; Engineering, Electrical & Electronic",
  "Economics; Mathematics, Interdisciplinary Applications; Social Sciences, Mathematical Methods; Statistics & Probability") 
```

has 查找不适用于复合字符串（包含“;”）。您可以拆分它们，但是使用`strsplit`. 然后，您可以使用`unique`来避免术语重复，并使用该`paste`功能将其重新组合在一起。

```
stringedit <- function( x ) { 
  # first, split into subterms
  a.all <- unlist( strsplit( x, "; *" ) ) ; 
  paste( unique( myhash[ a.all ] ), collapse= "; " ) 
}

unlist( lapply( A, stringedit  ) ) 
```

这是所需的结果：

```
[1] "Science"                            "Science"                            "Arts & Humanities"                  "Arts & Humanities; Social Sciences"
[5] "Science"                            "Social Sciences; Science"           "Science"                            "Social Sciences"                   
[9] "Social Sciences"                    "Science"                            "Science"                            "Social Sciences; Science" 
```

当然，你可以`*apply`这样调用几次：

```
a.spl <- sapply( A, strsplit, "; *" )
a.spl <- sapply( a.spl, function( x ) myhash[ x ] )
unlist( sapply( a.spl, collapse, "; " ) 
```

这并不比前面的代码效率更高或更低。

是的，你可以用正则表达式实现同样的效果，但首先，它无论如何都会涉及拆分字符串，然后使用正则表达式`^Biology$`来确保它们匹配“生物学”而不是“细胞生物学”等。除非你想去像“.* Biology”这样的结构。最后，无论如何，您都必须摆脱重复项，而这一切都将是，在我看来（i）不那么冗长（= 更容易出错）和（ii）不值得付出努力。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T11:48:08.473

以及如何使用`switch`？

```
science.category <- function(science){
    switch(science,
           "Biology" =,
           "Cell Biology" =,
           "Astronomy & Astrophysics" =,
           "Physics, Particles & Fields" =,
           "Mathematics" =,
           "Mathematics, Applied" =,
           "Mathematics, Interdisciplinary Applications" =,
           "Geriatrics & Gerontology" =,
           "Operations Research & Management Science" =,
           "Computer Science, Artificial Intelligence" =,
           "Computer Science, Information Systems" =,
           "Engineering, Electrical & Electronic" =,
           "Statistics & Probability" = "Science",
           "Art" =,
           "Humanities, Multidisciplinary" = "Arts & Humanities",
           "Psychology, Experimental" =,
           "Economics" =,
           "Social Sciences, Mathematical Methods" =,
           "Gerontology" =,
           "Management" = "Social Sciences",
           NA
           )
}

a <- unlist(lapply(A, strsplit, split = " *; *"), recursive = FALSE)
a1 <- lapply(a, function(x) unique(sapply(x, science.category)))
sapply(a1, paste, collapse = "; ") 
```

当然，只要您有适当的字符串作为`switch`参数，这将起作用。一个不匹配，你会以`NA`. 对于一些高级用法，您应该编写自己的包装器以使用`grep`-family 函数，甚至`agrep`（小心处理）。

# android - 光标在android的中心位置

> ID：13009766
> 
> 赞同：4
> 
> 时间：2012-10-22T10:44:57.417
> 
> 标签：android, android-edittext

嗨，我正在使用包含登录屏幕的 android 应用程序。在我的登录屏幕中，我有用户名和密码编辑文本字段。在edittext中，我需要居中对齐的提示为“输入您的用户名”，因此我将edittext字段的重力设置为“中心”，但现在问题是光标在中心位置也可见，我需要光标在左侧。我还尝试了下面的编码。

```
edtUserName.setSelection(1);

This is my xml code:
 <EditText
                android:id="@+id/edt_login_username"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/bg_txt_field"
                android:ellipsize="start"
                android:focusableInTouchMode="true"
                android:hint="Enter Username"
                android:maxLines="1"
                android:singleLine="true"
                android:textStyle="italic"
                android:typeface="serif" android:gravity="center">
            </EditText>

Please help me to solve this problem. Thanks in advance. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-02-08T01:48:10.533

你可以试试这个

```
<EditText
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:id="@+id/editText"
android:textAlignment="center"
android:ellipsize="end"
android:gravity="center"/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-03T06:55:08.277

您可以通过编程方式实现它！！！

```
yourEditText.addTextChangedListener(new TextWatcher() {

    public void afterTextChanged(Editable s) {}
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {}

    public void onTextChanged(CharSequence s, int start, int before, int count) {

        if (s.length() > 0) {
             // puts the caret after the text when unempty
             yourEditText.setGravity(Gravity.CENTER);
        } else {
             // puts the caret at the beginning of the `EditText` when empty
             yourEditText.setGravity(Gravity.START | Gravity.CENTER_VERTICAL); 
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T10:49:31.800

我想这会对你有所帮助。

android:gravity 设置其使用的 View 内容的重力。android:layout_gravity 设置视图或布局在其父级中的重力。还有一个例子：[例子](http://thinkandroid.wordpress.com/2010/01/14/how-to-position-views-properly-in-layouts/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T10:56:01.503

改变重力：

```
 android:gravity="center_vertical" 
```

# ios - 编辑 plist 中的现有数据

> ID：13009768
> 
> 赞同：3
> 
> 时间：2012-10-22T10:44:57.847
> 
> 标签：ios, xcode, plist

通过编码检查数据是否已经存在后，如何覆盖 plist 中的现有数据

详细地：

我将用户名和密码保存在位于文档目录中的 plist 文件中。现在，如果用户选择更改密码选项，plist 应该检查他的用户名是否存在。如果存在，那么他输入的新密码应覆盖 plist 中的现有密码。

谁能帮我一些示例代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T11:11:26.887

您不能更改存储在应用程序包中的 plist。如果您需要编辑存储在 plist 中的用户数据，那么您需要在文档目录上创建 plist。

另一个选项是[NSUserDefaults](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)。如果有大量数据，那么我会建议`sqlite3`数据库，否则您可以使用`plist`or `NSUserDefaults`。

您可以更改 plist 的值，例如：

```
NSString *path = //your plist path in document directory;
NSMutableDictionary *tempDict = [[NSMutableDictionary alloc] initWithContentsOfFile:path];
NSString *userExist = [plistDict objectForKey:@"UserName"]; //test the user exist
if([userExist isEqualToString:@"Midhun"])                   //checking user exist or not
{
  NSString *userPwd = @"Midhun";
  [tempDict setObject:userPwd forKey:@"PassWord"]; //Password is your key
  [tempDict writeToFile:path atomically:YES];
} 
```

请参阅此[链接](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/PropertyLists/QuickStartPlist/QuickStartPlist.html)了解更多信息。这是为您准备的 plist[教程](http://www.theappcodeblog.com/2011/05/30/property-list-tutorial-using-plist-to-store-user-data/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:51:32.997

如果 plist 中的数据位于 bundle 目录中，则无法编辑它。捆绑包中存在的文件具有“只读”权限。如果您的 plist 位于文档目录中，则可以使用以下步骤对其进行编辑。(1)从plist中获取数据。(2) 更新它。(3)将更新后的数据写回plist。

```
NSString *path= [[NSBundle mainBundle] pathForResource:@"fileName" ofType:@"plist"];

if(path)

 NSDictionary *dict = [[NSDictionary alloc] initWithContentsOfFile:path];

//Update the respective dictionary dict here.

//write back to plist.

[dict writeTofile:path atomically:YES]; 
```

# html - CSS 样式化 WordPress 小部件

> ID：13009771
> 
> 赞同：0
> 
> 时间：2012-10-22T10:45:00.617
> 
> 标签：html, wordpress, css

我在我的 Wordpress 网站上显示语言翻译标志：

下面是代码

```
<ul>
<li id="qtranslate-8" class="widget-container widget_qtranslate">
<ul class="qtrans_language_chooser" id="qtranslate-8-chooser">
<li class="lang-en active">    
<a href="http://www.fadomi.org/" hreflang="en" title="English" class="qtrans_flag qtrans_flag_en"><span style="display:none">English</span></a>
</li>
<li class="lang-fr">
<a href="http://www.fadomi.org/fr/" hreflang="fr" title="Français" class="qtrans_flag qtrans_flag_fr"><span style="display:none">Français</span></a></li>
<li class="lang-zh">
<a href="http://www.fadomi.org/zh/" hreflang="zh" title="中文" class="qtrans_flag qtrans_flag_zh"><span style="display:none">中文</span></a>
</li>
</ul>
<div class="qtrans_widget_end"></div>
</li>
</ul> 
```

这向我显示了一个带有项目符号的列表..正如您在 fadomi.org 上看到的那样，我想删除这些项目符号并水平显示所有这些标志，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:46:54.747

添加`ul {list-style:none}`你的CSS。

你有

```
ul {
list-style: square;
margin: 0px 0px 18px 1.5em;
} 
```

删除`square`并添加`none`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:46:50.360

要从无序列表中删除项目符号：

```
ul { list-style-type: none; } 
```

您可能还想重置左边距：

```
ul { margin-left: 0; } 
```

然后您可以浮动列表元素以水平显示它们：

```
ul li { float: left; } 
```

最后，清除浮动：

```
ul { clear: left; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T10:47:58.520

用 CSS 写这个 -

```
ul{
  list-style-type: none;
}
ul li{
  float: left; 
} 
```

[**工作演示**](http://jsfiddle.net/juUaP/)

# c# - 能够将航班保存为 *. avi

> ID：13009773
> 
> 赞同：0
> 
> 时间：2012-10-22T10:45:16.337
> 
> 标签：c#, directx

我们正在使用 Microsoft DirectX 库实现 3D 光栅查看器。想知道是否可以将 Directx 设备中图像的旋转/旋转或飞行保存为 avi 文件？

DirectX 库是否具有此功能？

问候，基肖尔

# iphone - 如何在 UITableViewCell 中绘制两个平行条

> ID：13009775
> 
> 赞同：1
> 
> 时间：2012-10-22T10:45:21.150
> 
> 标签：iphone, ios, uitableview, cgcontext

我需要自定义表格的单元格，创建两个透明条，一个对应 UITableViewCell 的上边缘，另一个对应下边缘。这些条带应该是透明的，才能看到下面视图的颜色（浅黄色）。我创建了 UITableViewCell 的子类并构建了方法 LayoutSubviews() 来绘制条带，这是错误的吗？我得到这个错误：

```
 <Error>: CGContextBeginPath: invalid context 0x0
   <Error>: CGContextMoveToPoint: invalid context 0x0
   <Error>: CGContextAddLineToPoint: invalid context 0x0
   <Error>: CGContextSetLineWidth: invalid context 0x0
   <Error>: CGContextSetFillColorWithColor: invalid context 0x0
   <Error>: CGContextMoveToPoint: invalid context 0x0
   <Error>: CGContextAddLineToPoint: invalid context 0x0
   <Error>: CGContextSetLineWidth: invalid context 0x0
   <Error>: CGContextSetFillColorWithColor: invalid context 0x0 
```

这是 CustomCell.m 中的代码：

```
 -(void) layoutSubviews{
   [super layoutSubviews];

   CGContextRef ctxt = UIGraphicsGetCurrentContext();
   CGContextBeginPath(ctxt);
   CGContextMoveToPoint(ctxt, self.bounds.origin.x, self.bounds.origin.y);
   CGContextAddLineToPoint(ctxt, self.bounds.size.width, self.bounds.origin.y);
   CGContextSetLineWidth(ctxt, 5);
   CGContextSetFillColorWithColor(ctxt, [UIColor clearColor].CGColor); 

   CGContextMoveToPoint(ctxt, self.bounds.origin.x, self.bounds.size.height);
   CGContextAddLineToPoint(ctxt, self.bounds.size.width, self.bounds.size.height);
   CGContextSetLineWidth(ctxt, 5);
   CGContextSetFillColorWithColor(ctxt, [UIColor clearColor].CGColor);
   CGContextStrokePath(ctxt);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T10:48:54.200

`layoutSubviews`是画东西的错误方法。您在那里没有绘图上下文。将您的代码移动到`drawRect:`：

```
- (void)drawRect:(CGRect)rect {
    [super drawRect: rect];

   CGContextRef ctxt = UIGraphicsGetCurrentContext();
   CGContextBeginPath(ctxt);
   CGContextMoveToPoint(ctxt, self.bounds.origin.x, self.bounds.origin.y);
   CGContextAddLineToPoint(ctxt, self.bounds.size.width, self.bounds.origin.y);
   CGContextSetLineWidth(ctxt, 5);
   CGContextSetFillColorWithColor(ctxt, [UIColor clearColor].CGColor); 

   CGContextMoveToPoint(ctxt, self.bounds.origin.x, self.bounds.size.height);
   CGContextAddLineToPoint(ctxt, self.bounds.size.width, self.bounds.size.height);
   CGContextSetLineWidth(ctxt, 5);
   CGContextSetFillColorWithColor(ctxt, [UIColor clearColor].CGColor);
   CGContextStrokePath(ctxt);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T05:35:33.630

```
(void) drawRect:(CGRect)rect
{
  CGContextRef context = UIGraphicsGetCurrentContext();
  UIColor *color = [UIColor colorWithRed:0 green:1 blue:0 alpha:0];
  CGContextSetFillColorWithColor(context, color.CGColor);

  CGContextSetLineWidth(context, 3.0);
  CGContextSetFillColorWithColor(context, [UIColor whiteColor].CGColor);     //CGContextSetRGBFillColor doesn't work either
  CGContextBeginPath(context);
  CGContextMoveToPoint(context, 100.0, 60.0);
  CGRect rectangle = {100.0, 60.0, 120.0, 120.0};
  CGContextAddRect(context, rectangle);

  CGContextStrokePath(context);
  CGContextFillPath(context);
} 
```

# xmpp - 如何避免来自谷歌的可疑登录警报？

> ID：13009776
> 
> 赞同：2
> 
> 时间：2012-10-22T10:45:25.713
> 
> 标签：xmpp, google-talk

我正在开发一个 gtalk 客户端。我的服务器托管在亚马逊上。我的用户访问我服务器上的服务。我的服务器向谷歌发送请求（XMPP）。

现在，我的大多数用户都面临与可疑登录警报相关的问题。

我该如何避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T21:55:24.977

不要使用用户的用户名/密码进行身份验证。相反，使用 OAuth 2.0：

[https://developers.google.com/talk/jep_extensions/oauth](https://developers.google.com/talk/jep_extensions/oauth)

这应该让 Google 了解正在访问该帐户的是合法应用程序，而不是交互式用户（或诈骗者）。

周杰伦

# c# - 如何防止 XSLT 处理器类型不匹配错误

> ID：13009777
> 
> 赞同：0
> 
> 时间：2012-10-22T10:45:38.853
> 
> 标签：c#, xslt

我在此代码上遇到类型不匹配错误：

```
function xsltTransform(xmlPath, xslPath, parameter) {
    if (lastXMLloaded != xmlPath) {
        xml = loadXMLDoc(xmlPath);
        lastXMLloaded = xmlPath;
    }
    if (lastXSLloaded != xslPath) {
        xsl = loadXSLDoc(xslPath);
        lastXSLloaded = xslPath;
    }
    var param = parameter.split(";");
    var count = param.length;
    if (window.ActiveXObject) {
        var template = new ActiveXObject("MSXML2.XSLTemplate");
        template.stylesheet = xsl.documentElement;
        var xsltProcessor = template.createProcessor();
        xsltProcessor.input = xml;
        for (i = 0; i <= count - 1; i++) {
            var paramKeyValue = param[i].split(",");
            xsltProcessor.addParameter(paramKeyValue[0], paramKeyValue[1]);
        }
        xsltProcessor.transform();
        var result = xsltProcessor.output;
        return result;
    } else if (document.implementation && document.implementation.createDocument) {
        xsltProcessor = new XSLTProcessor();
        try {
            xsltProcessor.importStylesheet(xsl);
        } catch (e) {}
        for (i = 0; i <= count - 1; i++) {
            var paramKeyValue = param[i].split(",");
            xsltProcessor.setParameter(null, paramKeyValue[0], paramKeyValue[1]);
        }
        var resultDocument = xsltProcessor.transformToFragment(xml, document);
        return resultDocument
    }
} 
```

这部分代码：`template.stylesheet = xsl.documentElement;`表示值为`null`.

# c++ - 如何解决“sprintf”的冲突类型？

> ID：13009778
> 
> 赞同：0
> 
> 时间：2012-10-22T10:45:38.760
> 
> 标签：c++, objective-c, osx-lion, xcode4.5, stdio

我在我的项目中使用**stdio.h**文件。

当我使用 Xcode 编译时

```
 Comipler for C/C++/Objective-C: LLVM GCC 4.2 
```

在编译时出现**“sprintf”错误的冲突类型。这**在 Mac OS 10.6.8 和 Xcode 3.2.3 中运行良好，但在 Mac OS 10.7.4 和 Xcode 4.5 中出现错误？请帮我？

这是 Mac OS X 10.7.4 中的代码

```
 __BEGIN_DECLS
 int     fseeko(FILE *, off_t, int);
 off_t   ftello(FILE *);
 __END_DECLS
#endif /* __DARWIN_C_LEVEL >= 200112L */

#if __DARWIN_C_LEVEL >= 200112L || defined(_C99_SOURCE) || defined(__cplusplus)
__BEGIN_DECLS
 int     snprintf(char * __restrict, size_t, const char * __restrict, ...) __printflike(3,   4);
 int     vfscanf(FILE * __restrict, const char * __restrict, va_list) __scanflike(2, 0);
int  vscanf(const char * __restrict, va_list) __scanflike(1, 0);
int  vsnprintf(char * __restrict, size_t, const char * __restrict, va_list) __printflike(3, 0);
int  vsscanf(const char * __restrict, const char * __restrict, va_list) __scanflike(2, 0);
__END_DECLS
#endif /* __DARWIN_C_LEVEL >= 200112L || defined(_C99_SOURCE) || defined(__cplusplus) */ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:57:53.150

XCode 4.4 的编译器最近添加了检查格式模式和参数是否`sprintf`匹配以及类似函数的功能（如果我没记错的话）。这是一项有价值的检查，可以突出代码中早期版本未注意到的问题。

就我而言，编译器总是正确的。所以你最好修复格式模式或转换相应的参数。

*如果您发布具体代码，我们可以给您更具体的建议。*

# jms - 处理 JMS 操作中的异常

> ID：13009782
> 
> 赞同：0
> 
> 时间：2012-10-22T10:45:55.377
> 
> 标签：jms, activemq

我在我的项目中使用 activeMQ 5.4 来实现 JMS。我想在每次应用程序无法发送消息时通知用户，但在发生异常时我没有得到任何处理。例如，如果 JMS 代理关闭并且我在 try 块中执行创建连接、会话等或消息发送操作，则控制永远不会返回到 catch 块或为连接设置的 ExceptionListener。我的代码如下所示：

```
connection = (TopicConnection) (new ActiveMQConnectionFactory(localBrokerURL)).createConnection();
connection.setExceptionListener(new ExceptionListener() {               
    @Override
    public void onException(JMSException arg0) {
        System.out.println("Exception Occurred");
    }
});
connection.start();
final TopicSession session =conn.createTopicSession(false, Session.AUTO_ACKNOWLEDGE);
final Topic sendTopic = session.createTopic("someTopicName"); 
```

localBrokerURL 的值在哪里

```
failover://(ssl://localhost:61618?trace=true&wireFormat.maxInactivityDuration=0) 
```

请帮忙。任何提示都非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T11:52:37.417

这就是故障转移的目的：传输。它将隐藏传输失败并自动尝试重新连接，并在建立新连接时重播任何 jms 状态。有一个 transportListener 可用于获取传输暂停和恢复事件。如果您从代理 url 中删除故障转移：组件，您将获得传播到您的客户端的所有异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:47:41.873

只需`timeout`在连接 URI 上设置属性，它就会抛出错误而不是阻塞线程......

```
failover://(ssl://localhost:61618?trace=true&wireFormat.maxInactivityDuration=0)?timeout=10000 
```

见[http://activemq.apache.org/failover-transport-reference.html](http://activemq.apache.org/failover-transport-reference.html)

# oracle - 程序和功能。返回一个大字符串

> ID：13009783
> 
> 赞同：0
> 
> 时间：2012-10-22T10:45:56.993
> 
> 标签：oracle, plsql, oracle9i, procedure

我写了这个程序，我有疑问如何在新值上覆盖旧值，并用新的大字符串和新邮件返回新行。程序拆分一封大电子邮件，其中包含几封邮件并更改域。

**感知：我得到了一张带有属性示例值的表格，其中有一个带有电子邮件的大字符串。当它与 aaa.pl 和 bbb.pl 不同时，我必须将这封电子邮件更改为域 NewDomain.pl，当它相同时，我留下这封电子邮件。例子：**

**旧值：'zamowienia@kicius.pl mickey.mouse@aaa.pl kimus.walus@domek.pl'**

**和我想要更新的结果：**新值：'zamowienia@NewDomain.pl mickey.mouse@aaa.pl kimus.walus@NewDomain.pl'**

第一道工序：

```
CREATE OR REPLACE PROCEDURE changeMailAll
AS             
BEGIN
       DECLARE  delim char(3); 
                cur_position INTEGER(11) DEFAULT 1;
                r_remainder VARCHAR(250);
                cur_string VARCHAR(1000);
                delim_length INTEGER;
                length_remainder INTEGER;
                mail VARCHAR(255);
                MAILs VARCHAR(20000);
                v_value VARCHAR2(255);
                v_valueNew VARCHAR2(255);
                v_customerId VARCHAR(20);
                c INTEGER;
                d INTEGER;
                positionMonkey INTEGER;
                v_identity VARCHAR(50);
                domena VARCHAR2(50);
                v_loop VARCHAR(100);
                adres VARCHAR(255);
                **str PKT_StringFnc.t_array;**

        CURSOR cursorMails IS
             SELECT Customer_Id, Value FROM PKT_userTrue where method_id = 'E_MAIL';  

     BEGIN

               OPEN cursorMails;

                   LOOP

                        FETCH cursorMails INTO v_customerId, v_value;

                              **str :=  PKT_StringFnc.SPLIT(v_value,' ');

                         FOR i IN 1..str.COUNT LOOP
                                 dbms_output.put_line('XXX1' || str(i));
                              END LOOP;**          
                   EXIT WHEN cursorMails%NOTFOUND;
                   END LOOP;
               CLOSE cursorMails;
END;
END; 
```

结束我从第一个程序中拆分邮件的第二个程序

```
 CREATE OR REPLACE PACKAGE BODY PKT_StringFnc
IS

   FUNCTION SPLIT (p_in_string VARCHAR2, p_delim VARCHAR2) RETURN t_array 
   IS

      i       number :=0;
      pos     number :=0;
      lv_str  varchar2(255) := p_in_string;
      positionMonkey INTEGER;
      domena VARCHAR2(50);
      adres VARCHAR(255);
      lv_str_new VARCHAR2(255);
      aaa VARCHAR(20) := '@aaa.pl ';
      bbb VARCHAR(30) := '@bbb.pl ';
      result VARCHAR(1000);

   strings t_array;

   BEGIN

      pos := instr(lv_str,p_delim,1,1);

      WHILE ( pos != 0) LOOP

         i := i + 1;
         strings(i) := substr(lv_str,1,pos);
         positionMonkey := INSTR(strings(i),'@');

         domena := SUBSTR(strings(i), positionMonkey);

         adres := RTRIM(strings(i),domena);

         lv_str := substr(lv_str,pos+1,length(lv_str));

         pos := instr(lv_str,p_delim,1,1);

         IF pos = 0 THEN
            strings(i+1) := lv_str;
                ELSE
                    strings(i+1) := lv_str_new;

         END IF;

          IF domena = aaa OR domena = bbb THEN

             lv_str_new := REPLACE(strings(i),domena,'@NewDomain.com');

           END IF; 
         DBMS_OUTPUT.PUT_LINE('lv_str_newREPLACE:'|| lv_str_new); 

      END LOOP;

      RETURN strings;
   END SPLIT;

END;
/ 
```

当我返回一个大字符串时，我想在表格中更新，我可以在哪里做？

感谢帮助

也许有人可以将最简单的程序从二到一重写

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:18:53.850

I wonder if something like

```
UPDATE pktTrue
SET Value = REGEXP_REPLACE(Value, '(@aaa.pl)|(@bbb.pl)|(@[a-zA-Z0-9._%-]+\.[a-zA-Z]{2,4})', '\1\2@NewDomain.pl', 1, 0, 'c')
WHERE method_id = 'E_MAIL'; 
```

will work for you?

# opencv - 如何使用 OpenCV 获取数字网络摄像头

> ID：13009785
> 
> 赞同：2
> 
> 时间：2012-10-22T10:46:01.487
> 
> 标签：opencv

我使用以下代码获得了数字网络摄像头：

```
CountCamers := 0;
j := 0;
capture := cvCreateCameraCapture(700);
while Assigned(capture) do
begin
  inc(CountCamers);
  cvReleaseCapture(@capture);
  capture := nil;

  inc(j);
  capture := cvCreateCameraCapture(700 + j);
end; 
```

但是，有时此代码给出的结果数网络摄像头等于 100（域的最大摄像头数），但实际上只连接了一个网络摄像头。如何获得数字网络摄像头？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:33:49.607

当只有 1 个摄像头时，索引未使用（可以传递 -1）。尝试检查返回的不透明结构指针的身份。我认为（抱歉，未测试，因为我只连接了 1 个摄像头）对于每个设备来说应该是唯一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:19:24.890

您可以获取网络摄像头的数量，检查是否可以获取框架。python中的示例：

```
def get_num_cameras():
    n = 0 
    num_cameras = 0 
    while n < 100:
        camera = CaptureFromCAM(n)
        if QueryFrame(camera):
            num_cameras += 1
        n += 1
        return num_cameras 
```

# java - java字节码编辑器

> ID：13009786
> 
> 赞同：1
> 
> 时间：2012-10-22T10:46:09.490
> 
> 标签：java, bytecode-manipulation

> **可能重复：**
> [java字节码编辑器？](https://stackoverflow.com/questions/2395574/java-bytecode-editor)

我正在寻找至少具有以下功能的 java 字节码编辑器。

1.  GUI - 简单的加载类文件和查看字节码
2.  编辑java字节码并保存

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:50:46.200

谷歌`jasper`和`jasmin`. 另请查看[Java 的反汇编调试器](https://stackoverflow.com/questions/2539614/is-there-a-disassembler-debugger-for-java-ala-ollydbg-softice-for-assembler)。我认为没有任何基于“GUI”的实现，尽管我可能是错的。

# c# - 是否可以在 C# 中创建一个包含重叠字节 [] 的显式联合？

> ID：13009787
> 
> 赞同：1
> 
> 时间：2012-10-22T10:46:12.310
> 
> 标签：c#, union

我正在尝试完成这项工作，但我收到此错误..

*因为它包含偏移量 0 处的对象字段，该对象字段未正确对齐或被非对象字段重叠。*

```
[StructLayout(LayoutKind.Explicit)]
    public struct ListEntry {
        [System.Runtime.InteropServices.FieldOffset(0)]
        [MarshalAs(UnmanagedType.ByValArray, SizeConst=17)]
        public byte[] raw;
        [System.Runtime.InteropServices.FieldOffset(0)]
        public byte version;
        [System.Runtime.InteropServices.FieldOffset(1)]
        public UInt16 magic;
        [System.Runtime.InteropServices.FieldOffset(3)]
        public UInt32 start_time;
        [System.Runtime.InteropServices.FieldOffset(7)]
        public UInt16 run_id;
        [System.Runtime.InteropServices.FieldOffset(9)]
        public UInt16 channels;
        [System.Runtime.InteropServices.FieldOffset(11)]
        public UInt16 sampling_rate;
        [System.Runtime.InteropServices.FieldOffset(13)]
        public UInt32 start_sector;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:50:49.117

也许作为一个固定大小的缓冲区？

```
[System.Runtime.InteropServices.FieldOffset(0)]
public fixed byte raw[17]; 
```

请注意，您需要将其视为`byte*`代码，例如：

```
byte* ptr = x.raw;
// now copy / inspect / whatever from ptr 
```

# ruby-on-rails-3.2 - 动画页面：使用 turbolinks 更改

> ID：13009788
> 
> 赞同：13
> 
> 时间：2012-10-22T10:46:14.530
> 
> 标签：ruby-on-rails-3.2, turbolinks

如何为页面设置动画：使用 turbolinks 更改？

那可能吗？

我在 body 上尝试了一个 css 过渡，但它没有按预期工作。不知道如何只更新窗口的一部分并在完成时进行回调，或者是否有可能。

提前致谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-24T05:11:31.917

这样的事情可能会起作用（在使用 jQuery 的 CoffeeScript 中）：

```
$(document).on 'page:fetch', ->
  $('#content').fadeOut 'slow'

$(document).on 'page:restore', ->
  $('#content').fadeIn 'slow' 
```

您还可以使用 CSS 动画或更复杂的 JavaScript。[这是一篇很棒的文章](https://stackoverflow.com/a/11681331/1298944)，其中包含一些示例和演示。

另外，我遇​​到了一个[turbolink transitions ruby​​ gem](https://github.com/caarlos0/turbolinks_transitions)（我还没有测试过）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T13:56:12.147

您不能真正使用 turbolinks 只更新窗口的一部分，您可能想要使用 pjax 代替。但是你可以做一些棘手的事情，让它看起来像是在使用 turbolinks 转换和更新页面的一部分。

我有一个列出一些项目的索引页面，如果您单击一个项目，它会转到显示页面。但是从展示页面我仍然希望能够直接导航到其他项目的展示页面。在索引页面上，项目列表有六列宽，我在显示页面上将其设置为更窄，以便为细节腾出空间。

```
// items.css.sass
.width-trans
  +transition(width 400ms ease-in) 
```

定义一个简单的 CSS 类来将更改过渡到元素的宽度。

```
<!-- index.html.erb ->
<div id="target_div" class="width-trans six columns">
  <%= link_to "Item",
              item_path(@item.id),
              :'data-no-turbolink' => true,
              :class => 'trans' %>
</div> 
```

我们在要转换的链接上将 data-no-turbolink 设置为 true，以便我们可以进行更多控制。

```
# items.js.coffee
$(document).on 'page:restore', (e) ->
  if window.location.href.match(/\/items\/\d$/) || window.location.href.match(/\/items$/)
    $("#target_div").removeClass("three").addClass("six")
  else
    $("#target_div").removeClass("six").addClass("three")

target_page = undefined  # Sorry, this 'target_page' stuff is a little janky.

if Modernizr.csstransitions
  eventEndNames =
    'WebkitTransition': 'webkitTransitionEnd'
    'MozTransition':    'transitionend'
    'OTransition':      'oTransitionEnd'
    'msTransition':     'MSTransitionEnd'
    'transition':       'transitionend'

  eventName = eventEndNames[Modernizr.prefixed('transition')]

  $(document).on eventName, '#target_div', () ->
    Turbolinks.visit(target_name) if target_page
    target_page = undefined

$(document).on 'click', '.trans', (e) ->
  e.preventDefault()

  target_name = e.target.href
  $(e.target).closest("#target_div").toggleClass("three six")
  false 
```

好的，这有点疯狂，也许我们可以找出一个更通用的方法来做到这一点。但这里是发生了什么的破败：

我们在 .trans 链接上禁用了 Turbolinks，因此 Turbolinks 不会立即获取新页面（我们将明确告诉 Turbolinks 何时获取它）。当我们单击 .trans 链接时，它会查找 #target_div 并切换 .six 和 .three 类。我使用 Foundation，所以 3 和 6 是我的网格系统的一部分，并定义了我的 div 的宽度。所以当我从 6 更改为 3 时，这会改变宽度。

这会触发我的 CSS 过渡，#target_div 会减小宽度，然后触发过渡结束事件。当转换结束时，我们在目标 URL 上调用 Turbolinks.visit()。

#target_div 应该由 index 和 show 操作呈现。我们有监听 page:restore 的部分，它将 #target_div 的列设置为六或三，具体取决于呈现它的操作。

最终结果是，#target_div 在我们更改页面时看起来像是动画，但实际上它在我们更改页面*之前*发生了转换，并且两个页面都在不同的状态下呈现相同的 div。

# c++ - C++ 多线程 TCP 服务器问题

> ID：13009791
> 
> 赞同：4
> 
> 时间：2012-10-22T10:46:30.303
> 
> 标签：c++, multithreading, sockets, networking, tcp

我正在编写一个简单的 TCP 服务器。我想到的模型是服务器在主线程中接受客户端连接并将它们交给另一个线程，以便服务器可以再次监听连接。我使用的代码的相关部分发布在下面：

接受连接：

```
void startServer () {

    int serverSideSocket = 0;
    int clientSideSocket = 0;

    serverSideSocket = socket(AF_INET, SOCK_STREAM, 0);
    if (serverSideSocket < 0) {
        error("ERROR opening socket");
        exit(1);
    }

    clientAddressLength = sizeof(clientAddress);
    memset((char *) &serverAddress, 0, sizeof(serverAddress));
    memset((char *) &clientAddress, 0, clientAddressLength);

    serverAddress.sin_family = AF_INET;
    serverAddress.sin_addr.s_addr = INADDR_ANY;
    serverAddress.sin_port = htons(32000);

    if (bind(serverSideSocket, (struct sockaddr *) &serverAddress, sizeof(serverAddress)) < 0) {
        error("ERROR on binding");
        exit(1);
    }      

    listen(serverSideSocket, SOMAXCONN);

    while(true) {
        clientSideSocket = accept(serverSideSocket, (struct sockaddr *) &clientAddress, &clientAddressLength);

    if (clientSideSocket < 0)
            error("ERROR on accept");

        processingThreadGroup->create_thread(boost::bind(process, clientSideSocket, this));
    }

} 
```

在这里， processingThreadGroup 是一个 boost::thread_group 实例。在工艺方法中：

```
void process (int clientSideSocket, DataCollector* collector) {

int numberOfCharactersRead = 0;
string buffer;

do {
      char msgBuffer[1000];
      numberOfCharactersRead = recv(clientSideSocket, msgBuffer, (1000 - 1), 0);
      if (numberOfCharactersRead < 0) {
          //display error
          close(clientSideSocket);
      }
      else if (numberOfCharactersRead == 0)
          close(clientSideSocket);
      else {
          printf("%s", msgBuffer);
          memset(msgBuffer, 0, 1000);
      }
   } while (numberOfCharactersRead > 0); 
} 
```

但是，当我调试代码时，我看到当调用处理线程时，主线程不再接受连接。数据仅在 process() 方法内读取。主线程似乎不再运行。我采取的方法有什么问题以及纠正它的任何建议？

编辑：我想我在这里找到了问题，并将其更新为答案。不会接受，因为我回答了我自己的问题。谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:14:15.537

认为我发现了问题。我用它作为服务器来接受系统日志消息。我用于 syslog 消息生成器的代码如下：

```
openlog ("MyProgram", LOG_CONS | LOG_PID | LOG_NDELAY, LOG_LOCAL0);
cout << "opened the log" << endl;
for (int i = 0 ; i < 10 ; i++) 
{
    syslog (LOG_INFO, "Program started by User %d \n", getuid ());
    syslog (LOG_WARNING, "Beware of the WARNING! \n");
    syslog (LOG_ERR, "fatal ERROR! \n");
}   
closelog ();
cout << "closed the log" << endl; 
```

我使用 rsyslog.conf 文件中的条目将所有 syslog LOG_LOCAL0 应用程序流量发送到服务器正在侦听的相关 TCP 端口。不知何故，syslog 只允许建立一个连接，而不是多个连接。因此，它只在一个线程中使用了一个连接。如果该连接已关闭，则会创建一个新连接。

我检查了一个普通的 tcp 客户端。这很好用，每个接受的连接都会产生多个线程。

# php - Yii 控制器强制 HTTPS

> ID：13009810
> 
> 赞同：8
> 
> 时间：2012-10-22T10:47:28.073
> 
> 标签：php, yii

我想知道如何在 Yii Controller Action 中强制使用 HTTPS (SSL)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T10:59:54.947

看看这篇文章[http://www.yiiframework.com/forum/index.php/topic/25407-forcing-https-in-yii/](http://www.yiiframework.com/forum/index.php/topic/25407-forcing-https-in-yii/)

```
class HttpsFilter extends CFilter {
    protected function preFilter( $filterChain ) {
        if ( !Yii::app()->getRequest()->isSecureConnection ) {
            # Redirect to the secure version of the page.
            $url = 'https://' .
                Yii::app()->getRequest()->serverName .
                Yii::app()->getRequest()->requestUri;
                Yii::app()->request->redirect($url);
            return false;
        }
        return true;
    }
} 
```

甚至[这个](http://www.jaburo.net/?p=40)以获取更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-22T21:22:19.577

如果您只想将 https 强制应用于您的整个应用程序，这正是我所需要的，您可以将它放在您的 protected/components/Controller.php 中：

```
 public function beforeAction($action) {
    if( ! Yii::app()->getRequest()->isSecureConnection ) {
      $url = 'https://' . 
        Yii::app()->getRequest()->serverName . 
        Yii::app()->getRequest()->requestUri;
      Yii::app()->request->redirect($url);
      return false;
    }
  } 
```

如果您需要站点范围的 https，这是一个比过滤器更清洁的解决方案，因为使用过滤器，您必须在您创建的所有子控制器中应用带有父控制器的 array_merge。如果您错过了一个，则该控制器没有 https 强制。这样做的一个小缺点是它是在调用过滤器之后调用的，这意味着在重定向之前已经完成了比我们通常想要的更多的处理。

如果您需要一个控制器一个控制器或一个动作一个动作，过滤器就是您要寻找的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-28T06:38:58.967

代码：

```
private static $secureRoutes = array('site/login'=>'',);

public function filterAccessControl($filterChain)   {

    if(!Yii::app()->getRequest()->isSecureConnection && array_key_exists($filterChain->controller->route, self::$secureRoutes)){
            $this->redirect($this->createAbsoluteUrl($filterChain->controller->route, array(), 'https'));
        return false;
    }
    else if(Yii::app()->getRequest()->isSecureConnection && !array_key_exists($filterChain->controller->route, self::$secureRoutes)){
            $this->redirect($this->createAbsoluteUrl($filterChain->controller->route, array(), 'http'));
        return false;
    }
} 
```

# sql - 合并复制数据库中的插入非常慢

> ID：13009812
> 
> 赞同：10
> 
> 时间：2012-10-22T10:47:37.287
> 
> 标签：sql, sql-server-2008, merge-replication

我有一个 SQL 服务器，它设置了与运行 SQL CE 的 800 个移动客户端的合并复制。

服务器有足够的资源，进出公司的线路绰绰有余，客户端和服务器之间的复制通常很好，但我们遇到了一个我无法追踪的间歇性错误。

昨天我们需要在我们的一个主表中插入 550 条记录，唯一存在的触发器是标准的合并复制触发器。

由于它不断与尝试同步的移动设备陷入僵局，因此该插入花费了 14 个小时。

有没有人对我们如何避免插入锁定以及如何加快整个过程有任何建议？

- - - 更新 - - -

根据一些评论，我在单个插入上运行了一个分析器，我看到了很多这样的事情

```
insert into dbo.MSmerge_current_partition_mappings with (rowlock) (publication_number, tablenick, rowguid, partition_id)
            select distinct 1, mc.tablenick, mc.rowguid, v.partition_id
            from dbo.MSmerge_contents mc with (rowlock) 
            JOIN dbo.[MSmerge_JEMProjectME_PromotionResource_PARTITION_VIEW] v with (rowlock) 
            ON mc.tablenick = 286358001
            and mc.rowguid = v.[rowguid]
            and mc.marker = @child_marker 
            and v.partition_id in (select partition_id from dbo.MSmerge_current_partition_mappings cpm with (rowlock) JOIN
                dbo.MSmerge_contents mc2 with (rowlock)
                ON cpm.rowguid = mc2.rowguid
                and mc2.marker = @marker)
            where not exists (select * from MSmerge_current_partition_mappings with (readcommitted, rowlock, readpast) where 
                publication_number = 1 and 
                tablenick = 286358001 and
                rowguid = v.[rowguid] and
                partition_id = v.partition_id) 
```

对于我不打算插入的许多表......这可能是一个线索吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T13:47:44.937

我们最近在我们的系统中遇到了与您的系统非常相似的相同行为。原因是 msmerge_contents 和 msmsmerge_current_partition_mappings 中有大量数据，通过查看 SQL Profiler 中读取的行数，我们注意到它可能是缺失的索引。（49 000 000 次读取用于表中的简单插入似乎有点多）

30 分钟前通过添加两个索引解决：

```
CREATE NONCLUSTERED INDEX [IX_MSmerge_current_partition_mappings_PERF1] ON [dbo].[MSmerge_current_partition_mappings] 
(
    [partition_id] ASC
)
INCLUDE ( [rowguid]) 

CREATE NONCLUSTERED INDEX [IX_msmerge_contents_PERF1] ON [dbo].[MSmerge_contents] 
(
    [marker] ASC
)
INCLUDE ( [rowguid]) 
```

我希望这可以帮助你，它帮助我们将查询时间从 5 分钟减少到 10 秒。

——几个小时后……

我的同事发现了另一个将性能进一步提高 75% 的指数：

```
CREATE NONCLUSTERED INDEX [IX_MSmerge_current_partition_mappings_PERF2] ON [dbo].[MSmerge_current_partition_mappings] 
(
    [rowguid] ASC,
    [partition_id] ASC
) 
```

**识别缺失的索引** 您可以使用以下脚本识别缺失的索引，将最有望提高性能的一个排序在顶部（有很多这样的脚本在流传，这个是从[http://www.sherbaz.com/category借来的/sqlserver/](http://www.sherbaz.com/category/sqlserver/) )

```
SELECT  sys.objects.name
, (avg_total_user_cost * avg_user_impact) * (user_seeks + user_scans) AS Impact
,  'CREATE NONCLUSTERED INDEX ix_IndexName ON ' + sys.objects.name COLLATE DATABASE_DEFAULT + ' ( ' + IsNull(mid.equality_columns, '') + CASE WHEN mid.inequality_columns IS NULL 
                THEN ''  
    ELSE CASE WHEN mid.equality_columns IS NULL 
                    THEN ''  
        ELSE ',' END + mid.inequality_columns END + ' ) ' + CASE WHEN mid.included_columns IS NULL 
                THEN ''  
    ELSE 'INCLUDE (' + mid.included_columns + ')' END + ';' AS CreateIndexStatement
, mid.equality_columns
, mid.inequality_columns
, mid.included_columns 
    FROM sys.dm_db_missing_index_group_stats AS migs 
            INNER JOIN sys.dm_db_missing_index_groups AS mig ON migs.group_handle = mig.index_group_handle 
            INNER JOIN sys.dm_db_missing_index_details AS mid ON mig.index_handle = mid.index_handle AND mid.database_id = DB_ID() 
            INNER JOIN sys.objects WITH (nolock) ON mid.OBJECT_ID = sys.objects.OBJECT_ID 
    WHERE     (migs.group_handle IN 
        ( 
        SELECT     TOP (500) group_handle 
            FROM          sys.dm_db_missing_index_group_stats WITH (nolock) 
            ORDER BY (avg_total_user_cost * avg_user_impact) * (user_seeks + user_scans) DESC))  
        AND OBJECTPROPERTY(sys.objects.OBJECT_ID, 'isusertable')=1 
    ORDER BY 2 DESC , 3 DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T10:55:08.853

最后索引到目前为止只起到了帮助，看起来合并复制在这个系统上设置得不是很好。

但是，在不触发触发器的情况下使用批量插入然后使用 sp_addtabletocontents 解决了我们的问题。

作为旁注，我们必须进行基本更新

更新表集 Column1 = Column1

在我们进行批量插入之后，合并复制会通知其他链接表它已更改，否则并非所有数据都正确传播。

# mysql - Mysql，两次使用同一张表的双重连接，但间接

> ID：13009813
> 
> 赞同：1
> 
> 时间：2012-10-22T10:47:40.230
> 
> 标签：mysql, join, self-join

*有很多关于在同一张桌子上加入的问题，但我找不到与我的问题相关的东西*

我有两张桌子：

```
user (id, name)
friends (from, to) 
```

我有以下查询。它应该检索所有用户及其朋友：

```
SELECT user.id, user.name, f.to, friend.id, friend.name
FROM user

LEFT JOIN friends f ON user.id = f.from
LEFT JOIN user friend ON  user.id = f.to
LIMIT 0, 200 
```

它返回如下内容：

```
id name from to id   name
1  bob  1    3  NULL NULL
1  bob  1    4  NULL NULL
2  toto 2    7  NULL NULL 
```

from 和 two 是正确的，但是第二个 join 似乎不起作用。你知道第二次加入有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T10:49:42.263

试试这个：

```
SELECT user.id, user.name, f.to, friend.id, friend.name
FROM user
LEFT JOIN friends f ON user.id = f.from
LEFT JOIN user friend ON friend.id = f.to
LIMIT 0, 200 
```

请注意，我在连接条件中替换`user`为。`friend`

# c++ - Visual Studio C++ 能够通过编译错误进行编译（红色下划线）

> ID：13009815
> 
> 赞同：4
> 
> 时间：2012-10-22T10:47:41.680
> 
> 标签：c++, visual-studio-2010, visual-c++

我遇到编译错误（红色下划线）的问题，例如：

```
Error: cannot open source file "stdafx.h" 
```

这是经过编辑的环境截图：

![能够编译错误](../Images/763f5dbd943efbd0cdd176d71a2f97dd.png)

左侧是我的 Visual Studio 解决方案目录列表，其中“显示所有文件”已关闭。

我正在做一个学校项目，每个文件夹都是项目不同部分的源文件，由不同的人负责。

例如，学生 A 和 B 负责 AST 和 PARSER 文件夹（我们将它们称为子项目）。我们为每个子项目都有一个 API，因此其他子项目知道要调用什么。

在 TOP-CENTER，我们有一个类的源文件`QueryProcessor`。（只是前几行）在它下面，是`Build Success`.

红线遍布所有类，主要`#include "stdafx.h"`是环境无法打开。

在右边，这是`stdafx.h`我们包含所有不同子项目的地方，因此我们省去了每个项目都有不同 stdafx.h 的麻烦

但是，我能够构建该项目。我很确定我做错了这个目录/链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:13:31.153

这应该工作

1.  右键单击解决方案文件
2.  单击在 Windows 资源管理器中打开
3.  在资源管理器中找到文件 stdfx.h 并复制文件夹的路径
4.  在 Visual Studio 解决方案资源管理器中，右键单击项目文件
5.  单击属性-> C/C++ -> 常规
6.  在 Additional Include Directories 中粘贴路径

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T11:15:47.830

1.  在VC中结合文件夹和虚拟文件夹在我看来很混乱，因为虚拟文件夹表明所有文件都在一个目录中，而在硬盘上创建的文件夹显然表明所有文件都在不同的目录中。如果你知道发生了什么，你可以结合它，但在你的情况下，我不推荐它。

2.  我假设你误解了 stdafx.h 的用途 这个头文件的目的不是将所有的头文件都放入其中，然后将其包含到所有其他文件中。这是一个关于[stdafx.h 目的的问题](https://stackoverflow.com/questions/2976035/purpose-of-stdafx-h)

3.  清理您的 stdafx.h 文件后，将尽可能多的头文件包含到您的 .cpp 文件中，并且只有在头文件中需要它们时才将这些包含在您的头文件中

4.  打开显示所有文件，现在您将使用实际文件夹，并且您可以确定，如果您对“PKB”之类的文件夹进行寻址，则该文件夹确实存在，因为您可以在左侧的解决方案资源管理器中看到它。

5.  如果你使用 using namespace std; 例如，确保您还包含所需的头文件。您可能会想“嘿，我已经在另一个头文件中包含了例如 iostream，我现在将它包含在这个头文件中，所以我不需要它”当您处理更大的项目时，这真的会毁了您。

哦，关于 stdafx.h 包含问题，一旦您切换到显示所有文件，我假设您会意识到 stdafx 与您使用包含的文件位于不同的文件中。也许`#include "..\stdafx.h"`需要类似的东西（取决于你的结构）。

我认为这是显而易见的，但如果你包含一个头文件，那么包含总是相对于包含另一个头文件的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T11:29:06.550

`stdafx.h`通常用于创建预编译头文件，这本质上是一种编译时优化，因此编译器不会为每个编译单元持续编译这些头文件。

如果这些标头中的任何一个发生更改，您将需要进行完整的系统重建。

实际上，最好只使用它来包含您永远不会更改的标准头文件和第三方头文件（如 boost 库和类似的）。

您可能会决定您自己的一些库是“一成不变的”并且也可以包含在内。

每个项目，即构建到单独单元（DLL 或 .exe）中的项目的每个部分都应该有自己的预编译头文件和自己的 stdafx.h 版本

项目应该只包含他们自己的 .stdafx 而不是其他项目的，因此这个头文件也可以用来定义你的 dllexport 宏。

在安排项目标头时，您应该注意： 1\. 哪些标头包含在外部 2\. 哪些标头仅包含在内部，甚至没有间接包含在外部。

后一种排序应该包括您的 stdafx.h 文件，并且理想情况下不应与从项目外部包含的那些头文件位于同一目录中。

# objective-c - 重新初始化视图控制器，或者为图像捕获过程创建单独的视图控制器？

> ID：13009818
> 
> 赞同：1
> 
> 时间：2012-10-22T10:47:55.857
> 
> 标签：objective-c

我已经创建了一个自定义相机叠加层来捕获一个项目，但是我的应用程序要求我经历两次捕获过程，所以基本上，一旦用户拍摄了项目正面的照片，他们需要拍摄项目的照片同一项目的背面，背靠背。目前，在拍摄第一张照片后，我正在重新初始化同一个视图控制器，但我已经读过，为每个“步骤”创建一个单独的视图控制器会更好。

哪个是更好的选择，单独的视图控制器，还是一个可以在需要时重复使用的视图控制器？

我对 Objective-C 很陌生，所以我不确定我是否正确地表达了所有内容，我希望我能够充分传达我的问题。

# java - Java EE 应用服务器如何找到类路径？

> ID：13009823
> 
> 赞同：1
> 
> 时间：2012-10-22T10:48:01.600
> 
> 标签：java, eclipse, classpath

`.classpath`和文件是否`.project`由 Eclipse 创建，仅由 Eclipse 内部使用？JDK是否正在使用这些文件？Java EE 应用服务器如何查找类和路径？

在这两者之间，当我创建 ear，war using`ant`时，我将使用`ant`选项来查找用于项目编译的库。

那么应用服务器`.classpath`是否用于编译？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:50:26.030

是的，这些文件仅由 eclipse 内部使用。 [Eclipse .classpath/.project 文件中有什么？](https://stackoverflow.com/questions/7186676/whats-in-an-eclipse-classpath-project-file) 

> 基本上，.project 文件存储项目设置，例如构建器和项目性质设置

和

> .classpath 文件定义了运行期间使用的类路径。

项目 .classpath 用于使用 Eclipse Java 编译器 (ejc) 编译您的代码，因此文件信息被传递给 EJC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:55:42.830

Java EE 应用程序服务器不需要我们在 Eclipse 中设置的类路径来运行 war（web 项目），因为在打包 war 时，我们将所有需要的 jar 填充到 war 文件的 lib 文件夹中。当应用服务器启动时，它会从 lib 文件夹中加载所有的 jar，而不需要任何类路径声明。

此外，如果需要任何外部依赖项，大多数 Java EE 服务器都提供了定义外部 jar 依赖项的工具。

是的`.project`，`.settings`Eclipse 都需要文件夹等来处理工作区的类路径和其他设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T11:06:38.460

如果我们简单地说

`.classpath`并且`.project`是 eclipse 元数据文件，仅供 eclipse 使用。它们对其他应用程序的意义较小。

# c# - 正则表达式模式来解析 C#/winrt 中的 Mime 部分

> ID：13009826
> 
> 赞同：0
> 
> 时间：2012-10-22T10:48:05.623
> 
> 标签：c#, regex, windows-runtime, mime

今天早上试图让这项工作变得疯狂。

我正在使用电子邮件的边界字符串尝试将其拆分为 text/plain 和 text/html 部分。我知道有一些库可以做到这一点，但它们都不能在 WinRT 中工作。

这就是我所拥有的。我很讨厌正则表达式，所以它可能是各种错误的：

样本数据

```
From: Rory <me@gmail.ftw>
Date: Mon, 8 Oct 2012 17:05:48 +0100
Message-ID: <a1b2c3d4e5f6g7h8i9j10a1b2c3d4e5f6g7h8i9j10@mail.gmail.ftw>
Subject: Subject of my email
To: me@gmail.ftw

Content-Type: multipart/alternative; boundary=bcaec54fbd3a824f3504cb8e677d

--bcaec54fbd3a824f3504cb8e677d

Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

text part of email

--bcaec54fbd3a824f3504cb8e677d
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

<html>
    <strong>HTML part of email</strong>
</html>

--bcaec54fbd3a824f3504cb8e677d-- 
```

我正在尝试提取

1.  --bcaec54fbd3a824f3504cb8e677d 边界标记之间的两个部分
2.  每个部分的 Content-Type、charset 和 Content-Transfer-Encoding
3.  内容本身（在 Content-Transfer-Encoding 之下，直到下一个边界

正则表达式代码

```
string b = "bcaec54fbd3a824f3504cb8e677d";
Regex r = new Regex(
"(--" + b + "\r?\nContent-Type: (text/plain|text/html); charset=(.+?)\r?\nContent-Transfer-Encoding: (.+?)\r?\n(.*?--" + b + "))", 
RegexOptions.Singleline); 
```

仅当我在末尾省略边界字符串时，这才匹配这两个部分。如果我包含它，它只匹配第一部分。在我开始砸东西之前，有人可以帮我吗

**更新：** 添加样本数据，减少

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:45:07.963

使用正则表达式模式

```
"(--" + b + "(?:\r?\n)+Content-Type:\s+([^;]+);\s+charset=([^\s\n\r]+)(?:\r?\n)+Content-Transfer-Encoding:\s([^\s\n\r]+)(?:\r?\n){2,}.*?)(?=\r?\n--" + b + "(?:--)?\r?\n)" 
```

带有`RegexOptions.Singleline`选项/标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:09:36.287

用 SingleLine 选项试试这个正则表达式：

```
--bcaec54fbd3a824f3504cb8e677d\r?\n\s*(Content-Type:\s*([^;]+);\s*charset=(\S+)\r?\n+Content-Transfer-Encoding:\s*(\S+)\r?\n\s*(.*?))\s*(?=--bcaec54fbd3a824f3504cb8e677d) 
```

在[RegexHero进行测试](http://regexhero.net/tester/?id=9f4da2be-918f-4f6b-8890-0dc8b364f581)

# php - 在 IIS7.5 php 5.4.7 上安装 PEAR 时出现问题

> ID：13009831
> 
> 赞同：2
> 
> 时间：2012-10-22T10:48:24.353
> 
> 标签：php, iis, installation, iis-7.5, pear

我已经在 IIS 7.5 上手动安装了 php 5.4.7（据我所知没有 msi 安装程序），现在正在尝试安装 PEAR。在此处安装它的说明[http://pear.php.net/manual/en/installation.getting.php](http://pear.php.net/manual/en/installation.getting.php)非常没用，因为 go-pear.bat 在我的 php 安装中不存在。因此，相反，我遵循了[此处](http://code.rawlinson.us/2012/02/install-php-pear-on-windows-7.html)的说明，但几乎落在了从命令提示符运行 php go-pear.phar 的部分。首先，我收到一个系统错误对话框，上面写着“程序无法启动，因为 fbclient.dll 丢失”，我将其关闭，然后是“程序无法启动，因为 OCI.dll 丢失”，我也将其关闭，然后 php 返回我到命令提示符。

我是安装 php 和 PEAR 的新手，过去我只使用过通常运行良好的安装程序。对此的任何指导将不胜感激。

谢谢

富有的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T09:18:55.497

编辑您的 PHP.ini 文件，并注释掉以下扩展名：

```
;extension=php_oci8.dll
;extension=php_oci8_11g.dll
;extension=php_pdo_oci.dll
;extension=php_pspell.dll
;extension=php_interbase.dll 
```

事实证明，这些实际上都没有包含在标准的 Windows PHP 安装包中，尽管在用于 Windows 服务器的 PHP.ini 文件中启用了这些文件......开源笨蛋。

# python - 如何在pyopencl中明确设置工作维度？

> ID：13009832
> 
> 赞同：2
> 
> 时间：2012-10-22T10:48:25.290
> 
> 标签：python, opencl, pyopencl

在用 C++ 编写 OpenCL 主机程序时，我们使用以下 API 来调用 OpenCL 内核：

```
cl_int clEnqueueNDRangeKernel (     cl_command_queue command_queue,
    cl_kernel kernel,
    cl_uint work_dim,
    const size_t *global_work_offset,
    const size_t *global_work_size,
    const size_t *local_work_size,
    cl_uint num_events_in_wait_list,
    const cl_event *event_wait_list,
    cl_event *event) 
```

这里第三个参数设置工作维度。在 python 中使用 pyopencl 时，我们将内核作为程序的一部分称为：

```
<program_name>.<kernel_name>( <command_queue>, <Global_work_size>,
                              <Local_work_size>, <Parameters_to_kernel.....> ) 
```

例如：

```
event = program.square( queue, A.shape, None, 
                        A_buf, B_buf, cl.LocalMemory( A.size), np.int32(COUNT) ) 
```

那么如何使用pyopencl在python中显式设置“work_dim”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T11:38:27.270

你没有。 `work_dim`在 C/C++ OpenCL API 中传递，以便库可以知道一维数组的大小`global_work_offset`等；`global_size`在 PyOpenCL 中，这些大小是从传递为、`local_size`和的对象中推断出来的`global_offset`。

# ssl - SSL 信任链验证

> ID：13009833
> 
> 赞同：3
> 
> 时间：2012-10-22T10:48:27.963
> 
> 标签：ssl, certificate

我有一个普遍的问题。理论上，如果您有以下信任链：RootCA -> IntermediateCA -> MyDomainCertificate，则应验证 2 个证书以验证您的证书。当我将 MyDomainCertificate.crt (X509v3) 发送给某人进行验证时，我是否必须将整个链发送给他？验证者是否能够自动下载所有中间证书？

我希望它是这样工作的：

1.  我将 MyDomainCertificate.crt 发送给某人，他想验证它。
2.  验证者需要 IntermediateCA.crt（我的颁发者的证书）来验证 MyDomainCertificate.crt，所以他会自动下载它。
3.  验证者需要 RootCA.crt 才能验证 IntermediateCA.crt。验证者在本地拥有这个根证书并完成验证过程。

例子：

1.  Firefox 必须能够检查所有服务器证书。Firefox 是否能够自动下载所有中间证书，还是所有服务器都发送完整的信任链？

2.  如果我有客户端身份验证，Tomcat 会自动下载所有中间证书，还是所有客户端都为他们的证书发送完整的信任链？

我希望有人可以帮助我的理论/实践混乱。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-15T16:40:46.243

配置 SSL 应始终包括安装中间证书（信任链） 因为某些浏览器只有根证书而没有中间证书，并且您的 Web 服务器应该向客户端发送中间证书的副本。

您可以使用 openssl 来验证您的 ssl 配置。阅读这篇文章： [https ://major.io/2012/02/07/using-openssls-s_client-command-with-web-servers-using-server-name-indication-sni/](https://major.io/2012/02/07/using-openssls-s_client-command-with-web-servers-using-server-name-indication-sni/)

# php - 使用对象属性作为数组键

> ID：13009834
> 
> 赞同：1
> 
> 时间：2012-10-22T10:48:30.877
> 
> 标签：php, arrays, object

我有一个 PHP 对象数组，比如有两个属性`a`和`b`. 所以例如我可以做

```
$arr['a1']->a = $z;
$x = $arr['a1']->b; 
```

数组当前使用每个对象的`a`属性值作为数组键，例如

```
$arr['a1']->a == 'a1' 
```

这样我就可以通过该属性快速查找对象。我现在需要通过 快速查找`b`，因此希望将键从设置为属性`a`切换为设置为`b`（两者都是唯一的）。

是否有捷径可寻？就地或进入另一个阵列都很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:52:56.263

```
foreach($arr as $key => $object)
{
    $arr2[$object->b] = $object;
} 
```

这将创建一个指向相同对象的新数组。

如果您希望它们在一个数组中，您可以按照 Joost 在评论中的建议进行操作（`$arr[$object->b] = $object;`而不是在循环中）。但是，这仅在两组之间没有重复键的情况下才有效。

# php - php中的preg匹配抓取整个字符串？

> ID：13009835
> 
> 赞同：1
> 
> 时间：2012-10-22T10:48:35.490
> 
> 标签：php, preg-match

我正在尝试从一个大字符串中匹配一个字符串。

例子

“快棕色狐狸在这里，但快棕色狐狸也总是在那里”

```
 preg_match('(quick brown fox(.+?)too)',$txt,$match) 
```

问题是它抓住了整个句子而不是“quick brown fox always over there too”

我如何只抓住第二部分？..当相似的字符串在一行左右时会发生这种情况......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:01:23.797

非贪婪仅应用于模式的*末尾*（实际上，这意味着如果 prce 找到匹配项，则不寻找更大的匹配项，只是返回），所以：

“狐狸精也在这里，而且总是在那里”

```
preg_match('(quick brown fox(.+?)too)', $txt, $match) 
```

只会匹配“quick brown fox is here too” - 但没有，你在找什么。

也许你可以用`strrev()`& 写一个反转的模式来反转你的 $txt，而不是反转你的匹配，但它只会解决这个特定的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:51:09.497

您在这里有 2 个捕获组。您的`$match`数组将包含..

```
[0] => quick brown fox is here but quick brown fox always over there too
[1] => quick brown fox is here but quick brown fox always over there too
[2] => is here but quick brown fox always over there 
```

此外，您的正则表达式中缺少两个正斜杠。

# service - osgi绑定方法后类成员返回null

> ID：13009841
> 
> 赞同：1
> 
> 时间：2012-10-22T10:48:50.600
> 
> 标签：service, reference, osgi, declarative

我的问题是，在主类中，我有一些 osgi 引用在调用类时工作得很好。但在那之后，所有的引用都变成了空值。当我关闭主窗口并调用关闭方法时， hubService 引用返回 null。我在这里做错了什么？

```
private void shutdown() {
if(hubService == null) {
    throw new NullPointerException();
}
hubService.shutdownHub(); // why is hubService null?
}

// bind hub service
public synchronized void setHubService(IHubService service) {
hubService = service;
try {
    hubService.startHub(PORT, authenticationHandler);
} catch (Exception e) {
    JOptionPane.showMessageDialog(mainFrame, e.toString(), "Server", JOptionPane.ERROR_MESSAGE);
    System.exit(0);
}
} 

// remove hub service
public synchronized void unsetHubService(IHubService service) {
hubService.shutdownHub();
hubService = null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:43:51.090

我假设您的关闭方法是 DS 停用方法？如果是这样，您为什么要在 unset 方法中以及在 shutdown 方法中关闭？

总体而言，该设计似乎不是很健全。IHubService 用作工厂，应该返回一些对象，然后在 deactivate 方法中关闭该对象。您使 IHubService 有效地成为单例。因为它必须来自另一个包，它应该自己处理它的生命周期。

由于您也不使用注释，因此不清楚您的设置/取消设置方法是静态/动态和/或单个/多个。以下代码不应该有您的问题（带有 bnd 注释的示例代码）：

```
@Component public class MyImpl {
    IHubService hub;

    @Activate
    void activate() {
      hubService.startHub(PORT, authenticationHandler);
    }

    @DeActivate
    void deactivate() {
      hubService.shutdown();
    }

    @Reference
    void setHub(IHubService hub) { this.hub = hub; }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:50:08.267

如果一个字段可以被多个线程读取和写入，则必须保护对读取和写入的访问。您的第一个方法 shutdown 不会保护 hubService 的读取，因此 hubService 的值可以在第一次读取和第二次读取之间更改。您没有显示 hubService 字段的声明。您可以使其易失或仅在同步时读取（在写入字段时用于同步的同一对象上）。然后您的关闭实现可能如下所示：

```
private volatile IHubService hubService;
private void shutdown() {
    IHubService service = hubService; // make a copy of the field in a local variable
    if (service != null) // use local var from now on since the field could have changed
        service.shutdownHub();
} 
```

# c# - c#.net 中什么更快（obj as Struct ！= null）或（obj is Struct）

> ID：13009842
> 
> 赞同：-2
> 
> 时间：2012-10-22T10:48:50.973
> 
> 标签：c#, .net

什么更快

```
AnswerClass ansClass = obj as AnswerClass;
if(ansClass != null){
    //use ansClass directly
} 
```

或者

```
if(obj is AnswerClass ){
   AnswerClass ansClass = (AnswerClass) obj;
   //use ansClass now
} 
```

在 C#.net 中。

我环顾四周，但找不到任何答案，这里有人知道吗？

我已经编辑以更好地解释我的问题，它是比较'as'然后是空检查，然后使用'is'然后是直接投射？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T10:53:02.147

该`as`运算符不适用于值类型（`struct`s），因此如果您有

```
struct SomeStruct { }

object obj = new SomeStruct(); 
```

那么找出类型并取消装箱值的唯一选择是

```
if (obj is SomeStruct)
{
    SomeStruct val = (SomeStruct)obj; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T10:56:43.380

**它们都是一样的，没有区别** *（我希望它是一个类而不是结构，在你的问题中，否则它不会编译）*

假设你有：

```
class Test
{
    public int MyProperty { get; set; }
    public int SomeOther { get; set; }
}
class Program
{
    static void Main(string[] args)
    {
        object obj = new Test();

        if (obj as Test != null)
        {
            Console.WriteLine("test1");
        }

        if (obj is Test)
        {
            Console.WriteLine("test2");
        }

    } 
```

如果您查看[ILSpy](http://ilspy.net/)中的代码。

```
private static void Main(string[] args)
{
    object obj = new Test();
    if (obj is Test)
    {
        Console.WriteLine("test1");
    }
    if (obj is Test)
    {
        Console.WriteLine("test2");
    }
} 
```

这是来自 ildasm 的 IL

.method private hidebysig static void Main(string[] args) cil 托管

```
{
  .entrypoint
  // Code size       43 (0x2b)
  .maxstack  1
  .locals init ([0] object obj)
  IL_0000:  newobj     instance void ILTest.Test::.ctor()
  IL_0005:  stloc.0
  IL_0006:  ldloc.0
  IL_0007:  isinst     ILTest.Test
  IL_000c:  brfalse.s  IL_0018
  IL_000e:  ldstr      "test1"
  IL_0013:  call       void [mscorlib]System.Console::WriteLine(string)
  IL_0018:  ldloc.0
  IL_0019:  isinst     ILTest.Test
  IL_001e:  brfalse.s  IL_002a
  IL_0020:  ldstr      "test2"
  IL_0025:  call       void [mscorlib]System.Console::WriteLine(string)
  IL_002a:  ret
} // end of method Program::Main 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T11:10:31.100

当您想检查是否`obj`是时`AnswerStruct`，您到底怎么能比：

```
if(obj is AnswerStruct) 
```

如果您非常关心微优化，那么您应该做的第一件事就是使用非托管语言。除了实际上没有什么比这段代码更快的事实之外，正如[dtb 在他的回答中所写的那样](https://stackoverflow.com/questions/13009842/what-is-faster-obj-as-struct-null-or-obj-is-struct-in-c-net/13009916#13009916)，有时这是唯一可行的变体。不要为了获得毫无价值的速度而牺牲清晰度，尤其是在根本没有收益的情况下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T10:55:09.943

**假设您打算谈论课程**

它们是等价的，因为它们编译成相同的字节码。

`as`运算符只是调用`isinst`运算符，而运算`is`符调用`isinst`，然后检查 null，就像您所做的那样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T11:13:01.193

这是两种方式，但相同的调用过程都需要相同的时间（因为操作员调用`isinst`操作员并且与 is 操作员调用相同，`isinst`并且两者都将检查是否为空）。

# java - 访问 /gcm-demo/sendAll。原因：HTTP 状态码：401

> ID：13009851
> 
> 赞同：0
> 
> 时间：2012-10-22T10:49:37.910
> 
> 标签：java, android

当我尝试发送消息时出现以下错误：

```
HTTP ERROR 500

Problem accessing /gcm-demo/sendAll. Reason:

HTTP Status Code: 401
Caused by:

com.google.android.gcm.server.InvalidRequestException: HTTP Status Code: 401
at com.google.android.gcm.server.Sender.sendNoRetry(Sender.java:177)
at com.google.android.gcm.server.Sender.send(Sender.java:121)
at com.google.android.gcm.demo.server.SendAllMessagesServlet.doPost(SendAllMessagesServlet.java:82)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:390)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)
at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:926)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:549)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Powered by Jetty:// 
```

我正在使用此处所述的 Android 示例项目：http: [//developer.android.com/guide/google/gcm/demo.html](http://developer.android.com/guide/google/gcm/demo.html)

有人可以帮帮我吗？这个错误来自哪里？

我在 Linux 机器上使用 Jetty，并在使用 Apache Ant 的 Windows 机器上将其编译为 .war ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T06:06:55.627

您可以在发送消息之前将以下代码放入 doPost() 方法中：

```
import com.google.android.gcm.server.*;

Sender sender = new Sender(myApiKey);
Message message = new Message.Builder().build();
MulticastResult result = sender.send(message, devices, 5); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:20:57.493

The sender is probably not authorized with google correctly.

`Sender sender = new Sender(MY_KEY);`

Is MY_KEY the same key that you registered with google ? Replace the API key as shown on the [documentation page](http://developer.android.com/guide/google/gcm/demo.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T22:28:09.887

在文本编辑器中，编辑 samples/gcm-demo-server/WebContent/WEB-INF/classes/api.key 并将现有文本替换为上面获得的 API 密钥。

[http://developer.android.com/google/gcm/demo.html](http://developer.android.com/google/gcm/demo.html)

# c# - ASP.NET 路由阻止 asp.net 菜单控件显示水平子菜单

> ID：13009856
> 
> 赞同：0
> 
> 时间：2012-10-22T10:49:46.293
> 
> 标签：c#, asp.net, url-routing, asp.net-routing, aspmenu-control

我正在开发一个完整的项目，在测试时发现 ASP.NET Routing 阻止菜单显示在具有友好 URL 的页面上（ASP.Net 4.0，C#）

路由代码

```
routes.MapPageRoute("ActivityRoute", "en/activity/{Language}/{EventID}/{PageID}/{EventTitle}", "~/en/Activity-Details.aspx", false,
            new RouteValueDictionary {
                { "Language", "en-US"},
                { "EventID", "0" },
                { "PageID", "0"},
                { "EventTitle", "event-not-found" }},
            new RouteValueDictionary {   
                {"Language", "[a-z]{2}-[a-z]{2}"},
                { "EventID", "[0-9]{1,8}" },
                { "PageID", "[0-9]{1,8}" }
            }); 
```

一切正常并设法使 Fancybox 与友好 URL 一起工作，但我无法弄清楚是什么阻止了子菜单显示在具有友好 URL 的页面上。

我设法解决了这个问题，因为它是由于路径

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T09:50:17.670

解决了，问题是由于路径问题已解决

# iphone - iPhone应用程序UI中的水平线和垂直线

> ID：13009859
> 
> 赞同：0
> 
> 时间：2012-10-22T10:50:03.887
> 
> 标签：iphone, line

如何在 iphone 应用程序的 UI 中放置水平线和垂直线？在xib中可以吗？任何人都可以给我一个想法吗？有没有可用的源代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T11:20:25.090

您有 3 种基本方法：

1.  在自定义 UIView 子类中使用 QuartzCore 并覆盖 drawRect:
2.  设置包含每张图片的UIView层属性的borderWidth和borderColor
3.  为水平线创建高度为 1 的 UIViews，为垂直线创建宽度为 1 的 UIView，设置视图的 backgroundColor 并将它们添加为子视图

3 可能是最容易实现的，但不是最优雅的，1 在内存方面是最健壮的，因为您还可以使用 drawInRect 将图像绘制到相同的图形上下文中。这会将视图层次结构折叠为单个视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:52:11.177

您可以放置​​单个线条宽度或高度的视图，并将其背景颜色设置为您想要的线条颜色。

# java - 如何将用户在编辑文本框中输入的文本添加到列表视图中？

> ID：13009864
> 
> 赞同：3
> 
> 时间：2012-10-22T10:50:18.963
> 
> 标签：java, android

我创建了一个包含列表视图的布局。我已经添加了一个按钮，点击它会给出一个带有编辑文本框和两个选项确定和取消的警报对话框。我想将用户在编辑文本框中输入的项目添加到列表视图中。任何人都可以帮助我如何添加它？

这是向我显示警报对话框的代码，该**值**必须显示为列表视图的项目。

```
 if(v.getId() == addbtn.getId())
    {
    AlertDialog.Builder alert = new AlertDialog.Builder(this);

    alert.setTitle("Add new location");

    // Set an EditText view to get user input 
    final EditText input = new EditText(this);
    alert.setView(input);

    alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {
    Editable value = input.getText();
    // Do something with value!
    }
    });

    alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {
    // Canceled.
    }
    });

    alert.show();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:52:59.377

您应该使用 ArrayAdapter 并将其绑定到您的 ListView。当用户输入新值时，将其添加到 ArrayAdapter 并调用 mListView.notifyDataSetChanged()。

There is a good example of setting up a ListView and ArrayAdapter here [http://anujarosha.wordpress.com/2011/11/17/how-to-create-a-listview-using-arrayadapter-in-android/](http://anujarosha.wordpress.com/2011/11/17/how-to-create-a-listview-using-arrayadapter-in-android/)

# sql - 在 Oracle 10g 中将行值查询为不同的列

> ID：13009871
> 
> 赞同：0
> 
> 时间：2012-10-22T10:50:33.543
> 
> 标签：sql, oracle10g

嗨，伙计们，我有一张表，用于存储该领域不同科目的学生分数`stu_score`。主题在 Field`ex_subjects`中，我需要查询表格，以便将分数排列为每个主题的单独列。我已经设法查询数学，例如：

```
select stu_number, stu_name,  ex_name, stu_score as MATHEMATICS 
from EXAMS_MASTER_REGISTER 
where stu_level = '1' and stu_stream = 'EAST' 
and ex_semester = 'FIRST' 
and ex_name = 'MIDYEARS' 
and ex_subject = 'MATHEMATICS' 
and academic_year = '2012' 
order by stu_score desc 
```

输出是

![数据库截图](../Images/502a9d338046a8e57fab57f6e346e354.png)

对于表中的其他主题，我需要相同的内容，例如`ENGLISH`, `PHYSICS`, `CHEMISTRY`..... 解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T11:09:57.510

如果我很好地理解了您的查询，那么可以在不更改数据库结构的情况下这样做：

```
select MAIN.stu_number, MAIN.stu_name,  MAIN.ex_name, 
    MATHS.stu_score as MATHEMATICS, 
    ENGLISH.stu_score as ENGLISH, 
    PHYSICS.stu_score as PHYSICS, 
    CHEMISTRY.stu_score as CHEMISTRY
from EXAMS_MASTER_REGISTER MAIN
left join EXAMS_MASTER_REGISTER MATHS on MAIN.stu_number = MATHS.stu_number AND MATHS.ex_subject = 'MATHEMATICS'
left join EXAMS_MASTER_REGISTER ENGLISH on MAIN.stu_number = ENGLISH.stu_number AND ENGLISH.ex_subject = 'ENGLISH'
left join EXAMS_MASTER_REGISTER PHYSICS on MAIN.stu_number = PHYSICS.stu_number AND PHYSICS.ex_subject = 'PHYSICS'
left join EXAMS_MASTER_REGISTER CHEMISTRY on MAIN.stu_number = CHEMISTRY.stu_number AND CHEMISTRY.ex_subject = 'CHEMISTRY'
where MAIN.stu_level = '1' 
and MAIN.stu_stream = 'EAST' 
and MAIN.ex_semester = 'FIRST' 
and MAIN.ex_name = 'MIDYEARS' 
and MAIN.academic_year = '2012' 
order by (NVL(MATHS.stu_score,0) + NVL(ENGLISH.stu_score,0) + NVL(PHYSICS.stu_score,0) + NVL(CHEMISTRY.stu_score,0) ) desc 
```

注意：我更改了顺序，因为在那种形式下它不再可用了，现在这对分数求和，然后按那个排序。

但是，这种确切的数据库结构是不好的。这不是[第一范式（1NF）](http://en.wikipedia.org/wiki/First_normal_form)，这使事情变得不必要地困难并且容易出错。还可以考虑阅读[2NF](http://en.wikipedia.org/wiki/Second_normal_form)、[3NF](http://en.wikipedia.org/wiki/Third_normal_form)和[BCNF](http://en.wikipedia.org/wiki/Boyce%E2%80%93Codd_normal_form)（其他的也是，但 AFAIK，这些是更广为人知和使用的范式）。我假设您正在学习，这将使您走上正确的轨道。

您应该将一张表分成（至少）两张：一张用于学生的个人数据（现在与 MAIN 别名一起使用的列），一张用于分数（其他列）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T11:20:23.447

对于只需要一次访问表的查询，请尝试：

```
select stu_number, 
       max(stu_name) stu_name, 
       ex_name, 
       max(case when ex_subject = 'MATHEMATICS' then stu_score end) as MATHEMATICS,
       max(case when ex_subject = 'ENGLISH' then stu_score end) as ENGLISH,
       max(case when ex_subject = 'PHYSICS' then stu_score end) as PHYSICS,
       max(case when ex_subject = 'CHEMISTRY' then stu_score end) as CHEMISTRY
from EXAMS_MASTER_REGISTER 
where stu_level = '1' and 
      stu_stream = 'EAST' and 
      ex_semester = 'FIRST' and 
      ex_name = 'MIDYEARS' and 
      academic_year = '2012' 
group by stu_number, ex_name
order by sum(stu_score) desc 
```

# html - CSS Floating / Center 结合响应式设计问题

> ID：13009872
> 
> 赞同：0
> 
> 时间：2012-10-22T10:50:34.843
> 
> 标签：html, css

我有一个包含 3 个元素的页脚，如下所示：

```
 <div class="footer">
   <div class ="jumperMenu">
     <ul>
        <li>1</li>
        <li>2</li>
        <li>3</li>
     </ul>
   </div>
   <div class ="logo">
        <a href="#"><img src="#"/></a>
   </div>
   <div class ="navJumpMenu">
     <ul>
        <li>Page1</li>
        <li>Page2</li>
        <li>Page3</li>
     </ul>
   </div> 
```

页脚 div 的最大宽度需要为 1600 像素，我需要 JumperMenu 贴在页脚的左侧，徽标在中心，navJumpMenu 贴在右侧，右侧和左侧元素需要 10 像素填充。所有都是浮点数很好 - 我遇到的问题是我需要所有元素也在较小的屏幕上在它们的位置内移动 - 所以说屏幕只有 1200px 我需要 3 个元素坚持它们各自的布局位置，但调整以适应屏幕尺寸。有没有人知道如何使用纯 CSS 来实现这一点 - 所以我不必求助于 jquery 定位？干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:55:59.327

[http://jsfiddle.net/calder12/KjG8v/1/](http://jsfiddle.net/calder12/KjG8v/1/)

```
.footer{max-width:1600px; margin:0 auto;text-align:center;}
.jumperMenu{float:left;}
.navJumpMenu{float:right;}
.logo{margin:0 auto;}​ 
```

您可能还想在页脚容器上设置最小宽度，以确保 3 个元素实际上不会相互重叠，但我认为这就是您想要的，不是吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:53:45.367

这是你想要的？

```
#footer {
display: inline-block;
max-width: 1600px;
min-width: <your min width>;
text-align: center;
}
#footer>* {display: inline-block;text-align: left;}
#footer #navJumpMenu{float:right;}
#footer #jumperMenu{float:left;} 
```

希望有帮助。

# iphone - 如何在不使用按钮的情况下移动到另一个视图

> ID：13009874
> 
> 赞同：0
> 
> 时间：2012-10-22T10:50:37.727
> 
> 标签：iphone, objective-c, ios, xcode, ios6

我的第一个视图显示图像和操作指示器，而 Web 服务器和数据库功能在该背景下运行。我希望应用程序在功能完成后转到我的选项卡视图。我该怎么做呢？

这是视图的样子。 ![第一和第二视图](../Images/5114aa52c2dee6006580e9845dc77597.png)

我试过的：

```
TabBarViewController *tab = [[TabBarViewController alloc]init];
[self presentViewController:tab animated:NO completion:nil]; 
```

和

```
[self performSegueWithIdentifier:@"first" sender:self]; 
```

请你能帮助我理解如何做到这一点。我花了很多时间在谷歌上搜索这个问题，但不知道该怎么做。

谢谢

编辑：添加[代码](http://pastebin.com/ZRtPWujq)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T11:06:44.763

由于您正在下载数据，您可以在下载请求完成时接到电话，如下面的方法

```
- (void)requestFinished:(ASIHTTPRequest *)request 
```

在这种方法中，您可以很好地展示您的`TabBarViewController`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:58:12.907

您可以为此声明一个单独的方法。

当你的函数完成时调用下面的方法。

```
[self performSelector:@selector(gotonext:) withObject:nil afterDelay:4.0];

-(void)gotonext;
{
TabBarViewController *tab = [[TabBarViewController alloc]init];
[self presentViewController:tab animated:NO completion:nil];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T11:03:59.367

嗯...如果你把

```
 TabBarViewController *tab = [[TabBarViewController alloc]init];
 [self presentViewController:tab animated:NO completion:nil]; 
```

在

```
dispatch_async(dispatch_get_main_queue(), ^{
        //stop the loader once the database stuff has finished and get rid of the text
        [[self firstLoader]stopAnimating];
        self.downloadingLabel.text = @"";

        }); 
```

更新：如果你想做这个同步

dispatch_sync(a_queue, ^{ wait_for_me(); }); 然后展示你的 VC。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T11:04:00.990

您可以使用 GCD 来实现这一点。

例如，`firstViewController`在您触发下载的地方，您可以执行以下操作：

`dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{ [model downloadData]; dispatch_sync(dispatch_get_main_queue(), ^{ [self performSegueWithIdentifier:@"YourSegueIdentifier" sender:self]; }); });`

我假设您的`downloadData`方法是同步的，如果不是，您可以在模型中使用通知。检索到数据后，您可以`postNamedNotification`从中注册通知，并在收到通知后`NSNotificationCenter`致电`firstViewController``performSegueWithIdentifier`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-22T11:09:31.670

在开始时拍摄一张 splashView 图像，如下所示...

```
 @interface AppDelegate : UIResponder <UIApplicationDelegate>{
        UIImageView *splashView;
    }
    @property (nonatomic, retain) UIImageView *splashView;
    @end 
```

在 AppDelegate.m 文件中...

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) 
    {
        splashView = [[UIImageView alloc] initWithFrame:iphoneFrame];
        splashView.image = [UIImage imageNamed:@"Default"];
        [self.window addSubview:splashView];
        [self.window makeKeyAndVisible];

        UIViewController *viewController1 = [[[RootViewController alloc] initWithNibName:@"RootViewController" bundle:nil] autorelease];
                UINavigationController *navviewController1=[[UINavigationController alloc]initWithRootViewController:viewController1];
                navviewController1.title = @"FirstTitle";
        //        navviewController1.navigationBarHidden=YES;

        UIViewController *viewController2 = [[[yourviewController2 alloc] initWithNibName:@"yourviewController2" bundle:nil] autorelease];
                UINavigationController *navviewController2=[[UINavigationController alloc]initWithRootViewController:viewController2];
        //        navviewController2.navigationBarHidden=YES;
                navviewController2.title = @"SecondTitle";

        UIViewController *viewController3 = [[[yourviewController3 alloc] initWithNibName:@"yourviewController2" bundle:nil] autorelease];
                UINavigationController *navviewController3=[[UINavigationController alloc]initWithRootViewController:viewController3];
        //        navviewController3.navigationBarHidden=YES;
                navviewController3.title = @"ThirdTitle";

               //..... and so on depend on your requirement 

        self.tabBarController = [[[UITabBarController alloc] init] autorelease];
        self.tabBarController.viewControllers = [NSArray arrayWithObjects:navviewController1, navviewController2 , navviewController3 ,nil];
        [self performSelector:@selector(loadViewIphone) withObject:nil afterDelay:2.0];//**add this line at your all data are loading completed**
    } 
    else 
    {
        splashView = [[UIImageView alloc] initWithFrame:ipadFrame];
        splashView.image = [UIImage imageNamed:@"Default_iPad"];
        [self.window addSubview:splashView];
        [self.window makeKeyAndVisible];
        [self performSelector:@selector(loadViewIpad) withObject:nil afterDelay:2.0];
    }

    [self.window makeKeyAndVisible];
    return YES;
}

-(void)loadViewIphone 
{
    [splashView removeFromSuperview];

    [self.window addSubview:tabBarController.view];
    [self.window makeKeyAndVisible];   

    CATransition *animation = [CATransition animation];
    [animation setDelegate:self];   
    [animation setType:kCATransitionFromBottom];
    [animation setDuration:1.0];
    [animation setTimingFunction:[CAMediaTimingFunction functionWithName:
                                  kCAMediaTimingFunctionEaseInEaseOut]];
    [[self.window layer] addAnimation:animation forKey:@"transitionViewAnimation"];

    [self.window makeKeyAndVisible];
} 
```

我希望这可以帮助你...

# c++ - 使用 void 指针实现动态数组

> ID：13009883
> 
> 赞同：1
> 
> 时间：2012-10-22T10:51:06.820
> 
> 标签：c++, arrays, dynamic, void-pointers

我想实现如下所示：

```
struct MyArray {
    void* Elements;
    int Capacity;
    int ElementsCount;
    size_t ElementSize;

    //methods
    void AddElement(void* item);
    //...
}; 
```

`void* Elements`应该是指向任何类型的项目的指针。每个元素都应具有特定的大小（`ElementSize`变量），并且`AddElement(void*)`方法应将项目添加到现有数组中。问题是我不能用我的数组做指针算法，我知道每次我想使用它时都需要使用强制转换，但我完全不知道该怎么做。而且我知道模板会是更好的解决方案，但在这种情况下，我想用指针练习:)

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:54:00.783

要移动指针，您可以执行以下操作：

```
int* nextInt = reinterpret_cast<int*>(Elements) + 1; 
```

这将指向下一个`int`。您可以使用此技术来移动其他类型。

请注意，由于元素的大小不同，这可能会导致各种麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:56:28.240

是的，您不能在 void* 上进行指针运算，您必须强制转换为 char* 才能进行运算，例如：

```
void MyArray::AddElement( void * item )
{
    // verify that ElementsCount is not already Capacity and if so, reallocate or throw
    void * insertionPoint = static_cast<char *>(Elements) + (ElementSize * ElementsCount );
    memcpy( insertionPoint, item, ElementSize );
    ++ElementsCount;
} 
```

请注意，您需要`static_cast`从 void* 转换为 char*，并且根本不需要显式地转换回 void*，这就是我可以将其分配给插入点的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T11:00:00.023

我会这样追求：

1.  创建特定于数组的迭代器，例如 STL 迭代器。
2.  迭代器的重载运算符

迭代器将使您的数组受益，因为您可能拥有遍历数组的通用算法，而无需了解所需的存储类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T11:17:54.960

我看不出模板和指针是如何相互排斥的，我认为这就是人们首先使用它们的那种情况。使用模板，您可以为指针指定类型，并对问题进行排序。

另一方面，如果您完全避免使用模板，您将需要类型的大小。说一下 CashCow 处理问题的方式：

```
void MyArray::AddElement( void * item )
{
    auto insertionPoint = static_cast<char *>(Elements) + (ElementSize * ElementsCount );
    memcpy( insertionPoint, item, ElementSize );
    ++ElementsCount;
} 
```

然而，你还没有完成它。您需要确保永远不会超过预先分配的缓冲区。我会这样修改它：

```
void MyArray::AddElement( void * item )
{
  if ((Capacity + 1) < ElementSize * ElementsCount)
  {
    Capacity <<= 1; // Double the size of the buffer.
    auto newBlock = new char[Capacity];
    memcpy(Elements, newBlock, Capacity >> 1); // Copy the old data
    delete Elements;
    Elements = static_cast<void*>(newBlock);
  }

  auto insertionPoint = static_cast<char *>(Elements) + (ElementSize * ElementsCount );
  memcpy( insertionPoint, item, Elementize );
  ++ElementsCount;
} 
```

像这样的东西。当然，这仍然不完整，但也许会给你一个线索。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T11:53:30.083

我不得不质疑你为什么要这样做。除非你这样做是为了学术/实验目的并且你打算把它扔掉，否则你是在为自己工作，并且几乎肯定会得到比使用语言和 STL 的设施更容易出现问题的代码已经提供。在 C 中，您可能必须这样做，但在 C++ 中，您不必这样做，因为那里有语言支持。

您正在做的事情有两个方面：拥有可以以某种定义的方式通用使用的任何类型的元素，并将这些元素收集在一起。那么第一个方面可以很容易地通过多态性来实现。创建一个定义通用接口的抽象基类：

```
struct BaseElement { virtual void doSomething( ); }; 
```

然后，您可以从中派生结构，这些结构涵盖了您的元素正在做什么：

```
struct DerivedElement1 : public BaseElement { void doSomething( ); };

struct DerivedElement2 : public BaseElement { void doSomething( ); }; 
```

要将类型收集在一起，您可以简单地使用 STL 向量。据我所知，它提供了您需要的所有东西。作为一个非常简单的示例，您可以执行以下操作：

```
// Convenient shorthand.
typedef std::vector< std::shared_ptr<BaseElement> > MyElements;
MyElements m;

// Create two different but commonly derived objects.
std::shared_ptr<DerivedElement1> e1(new DerivedElement1);
std::shared_ptr<DerivedElement2> e2(new DerivedElement2);

// Push them onto the collection.
m.push_back( e1.static_pointer_cast<BaseElement>( e1 ) );
m.push_back( e2.static_pointer_cast<BaseElement>( e2 ) ); 
```

在这一点上，你已经得到了你需要的一切。Vector 提供了标准功能，例如`begin()`，如果您愿意，它可以帮助您遍历集合并在其上运行 STL 算法`end()`。`size()`集合是多态的这一事实意味着您可以`doSomething()`在每个元素上运行，知道它只会执行为该结构定义的内容。

（我没有 C++11 编译器的访问权限，所以我相信有人会在这里接我。但是，如果你使用原始指针，即使使用原始指针也可以使用 C++11 之前的代码轻松实现相同的目标'小心正确地清理你的物品。）

我知道这不是你直接想要的答案，但我只是想强调，除非你只是想通过丢弃的例子来学习，否则使用已有的东西几乎总是更快、更短、更安全、更可靠。

# facebook-fql - facebook 即将到来的生日仅在今年

> ID：13009884
> 
> 赞同：-1
> 
> 时间：2012-10-22T10:51:08.753
> 
> 标签：facebook-fql, facebook-php-sdk, multi-query

我想获取从当前日期到明年当前日期的 Facebook 朋友生日。todate 是 364 天后到现在的日期，以 m/d 为单位。为此，第一个 fql 用于检索从 1 月到当前日期的数据，第二个用于获取从当前日期到 12 月 31 日的数据。我想在接下来的 11 个月和 29 天为即将到来的生日应用分页。以下查询正在工作并获取数据。谁能告诉我最好的方法。任何建议将不胜感激。

```
$fromDate = date('m/d');
$past_birthdays = $facebook->api(array(
                'method' => 'fql.query',
                'query' => "SELECT uid, name, birthday, birthday_date,substr(birthday_date,0,3) FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) AND birthday_date<'$toDate' AND birthday_date>='01/01' order by birthday_date",
                'access_token' => $accessToken
                    ));
if ($toDate > $fromDate) {
            $condition = " AND birthday_date<'$toDate'";
        } else {
            $condition = "";
        }

$upcoming_birthdays = $facebook->api(array(
                'method' => 'fql.query',
                'query' => "SELECT uid, name, birthday, birthday_date,substr(birthday_date,0,3) FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) AND birthday_date>='$fromDate' $condition order by birthday_date",
                'access_token' => $accessToken
                    )); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T14:19:01.563

就像你的情况一样，如果你在查询中提供限制，那么我在 facebook api explorer 上检查过，然后它的输出不一致，解决你的问题的最佳方法是将整个生日列表加载到数组中并将其显示在插槽中。

```
$fromDate = date('m/d');
        $past_birthdays = "";
        $upcoming_birthdays = $facebook->api(array(
            'method' => 'fql.query',
            'query' => "SELECT uid, name, birthday, birthday_date, substr(birthday_date, 0,3) from user where uid in (select uid2 from friend where uid1=me()) and birthday_date >='$fromDate' order by birthday_date Limit 0,500",
            'access_token' => $accessToken
                ));
        $no = count($upcoming_birthdays); //exit;
        if ($no < 500) {
            $Limit2 = 500 - $no;
            $past_birthdays = $facebook->api(array(
                'method' => 'fql.query',
                'query' => "SELECT uid, name, birthday, birthday_date, substr(birthday_date, 0,3) from user where uid in (select uid2 from friend where uid1=me()) and birthday_date >='01/01' and birthday_date <= '$fromDate' order by birthday_date Limit 0,$Limit2",
                'access_token' => $accessToken
                    ));
            //echo count($past_birthdays);exit;
            $upcoming_birthdays = array_merge($upcoming_birthdays, $past_birthdays); 
```

无需获取 todate，因为您要获取全年。此 ccode 仅获取 500，但全年运行查询。

# ms-access - ms访问中的绑定和未绑定控件

> ID：13009890
> 
> 赞同：6
> 
> 时间：2012-10-22T10:51:31.540
> 
> 标签：ms-access, data-binding, ms-access-2010

MS Access 中的绑定控件和未绑定控件有什么区别？它们有何不同？当在设计视图中的 MS Access 表单上时，我们如何判断表单是否已绑定？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-22T11:04:40.027

**绑定**元素直接链接回相关表格，当您修改表单中的任何数据时，您的更改会立即写入表格。这通常会导致人们质疑为什么“当我关闭表单时它会保存更改吗？” 好吧，这对您来说是必然的行为，为了防止任何更新，您必须使用诸如**BeforeUpdate**之类的过程在必要时取消。绑定控件很容易识别，因为它们将包含设计视图中表格中的字段名称。

**未绑定**的表单则完全相反，它们不直接绑定到数据库字段并且涉及更多的编码工作，以便最初在正常视图中填充它们。**但是，如果没有您编写的自定义过程（例如保存**按钮），这些将不会自动更改您的表格。这允许更多的控制，但也涉及更多的工作和对 VBA 编码的良好理解。未绑定控件也很容易识别，因为它们将在设计视图中包含未绑定一词。

注意：还有很多可以说的，但这是一个基本的大纲。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-22T10:59:42.480

绑定控件是绑定到表中的字段或函数的控件。未绑定的控件没有 Control Source 属性，同样，绑定的表单也没有 Record Source。您可以查看属性表。

![记录源属性表](../Images/78a789463bdaf72d7e25ab20d7721b23.png)

# sql - GROUP BY 由间隔分隔的连续日期

> ID：13009893
> 
> 赞同：11
> 
> 时间：2012-10-22T10:51:43.400
> 
> 标签：sql, postgresql, aggregate, window-functions

假设您（在 Postgres 9.1 中）有一个像这样的表：

```
date | value 
```

其中有一些差距（我的意思是：并非 min(date) 和 max(date) 之间的每个可能的日期都有它的行）。

我的问题是如何聚合这些数据，以便分别处理每个一致的组（没有间隙），如下所示：

```
min_date | max_date | [some aggregate of "value" column] 
```

任何想法如何做到这一点？我相信窗口功能是可能的，但经过一段时间的尝试，`lag()`我`lead()`有点卡住了。

例如，如果数据是这样的：

```
 date          | value  
---------------+-------  
 2011-10-31    | 2  
 2011-11-01    | 8  
 2011-11-02    | 10  
 2012-09-13    | 1  
 2012-09-14    | 4  
 2012-09-15    | 5  
 2012-09-16    | 20  
 2012-10-30    | 10 
```

输出（`sum`作为汇总）将是：

```
 min     |    max     |  sum  
-----------+------------+-------  
2011-10-31 | 2011-11-02 |  20  
2012-09-13 | 2012-09-16 |  30  
2012-10-30 | 2012-10-30 |  10 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-22T13:46:07.550

```
create table t ("date" date, "value" int);
insert into t ("date", "value") values
    ('2011-10-31', 2),
    ('2011-11-01', 8),
    ('2011-11-02', 10),
    ('2012-09-13', 1),
    ('2012-09-14', 4),
    ('2012-09-15', 5),
    ('2012-09-16', 20),
    ('2012-10-30', 10); 
```

更简单、更便宜的版本：

```
select min("date"), max("date"), sum(value)
from (
    select
        "date", value,
        "date" - (dense_rank() over(order by "date"))::int g
    from t
) s
group by s.g
order by 1 
```

我的第一次尝试更加复杂和昂贵：

```
create temporary sequence s;
select min("date"), max("date"), sum(value)
from (
    select 
        "date", value, d,
        case 
            when lag("date", 1, null) over(order by s.d) is null and "date" is not null 
                then nextval('s')
            when lag("date", 1, null) over(order by s.d) is not null and "date" is not null 
                then lastval()
            else 0 
        end g
    from 
        t
        right join
        generate_series(
            (select min("date") from t)::date, 
            (select max("date") from t)::date + 1, 
            '1 day'
        ) s(d) on s.d::date = t."date"
) q
where g != 0
group by g
order by 1
;
drop sequence s; 
```

输出：

```
 min     |    max     | sum 
------------+------------+-----
 2011-10-31 | 2011-11-02 |  20
 2012-09-13 | 2012-09-16 |  30
 2012-10-30 | 2012-10-30 |  10
(3 rows) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:01:40.493

这是解决它*的一种*方法。

首先，要获得连续系列的开始，此查询将为您提供第一个日期：

```
SELECT first.date
FROM raw_data first
     LEFT OUTER JOIN raw_data prior_first ON first.date = prior_first + 1
WHERE prior_first IS NULL 
```

同样对于连续系列的结尾，

```
SELECT last.date
FROM raw_data last
     LEFT OUTER JOIN raw_data after_last ON last.date = after_last - 1
WHERE after_last IS NULL 
```

您可能会考虑制作这些视图，以简化使用它们的查询。

我们只需要第一个形成组范围

```
CREATE VIEW beginings AS
SELECT first.date
FROM raw_data first
     LEFT OUTER JOIN raw_data prior_first ON first.date = prior_first + 1
WHERE prior_first IS NULL

CREATE VIEW endings AS
SELECT last.date
FROM raw_data last
     LEFT OUTER JOIN raw_data after_last ON last.date = after_last - 1
WHERE after_last IS NULL

SELECT MIN(raw.date), MAX(raw.date), SUM(raw.value)
FROM raw_data raw
  INNER JOIN (SELECT lo.date AS lo_date, MIN(hi.date) as hi_date
              FROM beginnings lo, endings hi
              WHERE lo.date < hi.date
              GROUP BY lo.date) range
     ON raw.date >= range.lo_date AND raw.date <= range.hi_date
GROUP BY range.lo_date 
```

# c# - 是否有任何其他对两个文档使用布尔 AND 查询的方式可以视为 lucene 中的单个文档？

> ID：13009894
> 
> 赞同：-1
> 
> 时间：2012-10-22T10:51:45.477
> 
> 标签：c#, lucene.net

我有两个要搜索的文档，我想使用 Lucene 以不同的方法进行布尔 AND 查询。这意味着我想对两个文档执行布尔 AND，可以将其视为单个文档并对结果单个文档执行搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T20:39:31.237

我认为您在谈论的是 MultiFieldQueryParser..它允许您从单个文档中搜索多个字段。

# opengl - OpenGL着色器编译器优化？

> ID：13009895
> 
> 赞同：2
> 
> 时间：2012-10-22T10:51:48.473
> 
> 标签：opengl, glsl

我正在研究 OpenGL 2.1，并且在 gl_FragColor 上的 alpha 值存在一些问题。

整个代码：

```
uniform sampler2D texture_0;
uniform vec3 uColor;
varying vec2 varTexCoords;

void main(void)
{
    //vec4 col = texture2D(texture_0, varTexCoords);
    vec4 col = vec4(0.0, 0.0, 0.0, 0.5);
    gl_FragColor = col;
} 
```

有人可以向我解释为什么：

作品：

```
vec4 col = texture2D(texture_0, varTexCoords);
//vec4 col = vec4(0.0, 0.0, 0.0, 0.5);
gl_FragColor = col; 
```

不起作用：

```
//vec4 col = texture2D(texture_0, varTexCoords);
vec4 col = vec4(0.0, 0.0, 0.0, 0.5);
gl_FragColor = col; 
```

作品：

```
vec4 col = texture2D(texture_0, varTexCoords);
col.rgb = uColor;
//col.a = 0.5;
gl_FragColor = col; 
```

也有效：

```
vec4 col = texture2D(texture_0, varTexCoords);
col.rgb = uColor;
col.a *= 0.5;
gl_FragColor = col; 
```

不起作用：

```
vec4 col = texture2D(texture_0, varTexCoords);
col.rgb = uColor;
col.a = 0.5;
gl_FragColor = col; 
```

即使许多示例似乎都使用它，这个也不起作用：

```
gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0); 
```

代码中的错误发生在这里：

```
glEnableVertexAttribArray(textureCoords);
        CHECK_GL_ERROR("glEnableVertexAttribArrayCheck"); 
```

与着色器相关的所有代码：

```
inline void Renderer::renderText(float x, float y, string msg) {
    mat4 proj;
    Matrix::projection2D(proj,
        (float) nScreenWidth_, (float) nScreenHeight_, 0.0f);
    mat4 res, restmp;
    mat4 pos;
    mat4 rot;
    mat4 scale;
    //Vector3D p(72.0f, 88.0f, 1.0f);
    //Vector3D p(20.0f, 20, 1.0f);
    Vector3D r(0.0f, 0.0f, 0.0f);
    Vector3D s(1.0f, nScreenWidth_ / nScreenHeight_, 1.0f);
    //Matrix::translate(pos, p.getX(), p.getY(), p.getZ());
    //Matrix::rotateZ(rot, r.getZ());

    float widthMod = nScreenWidth_ / 100.0f;
    float heightMod = nScreenHeight_ / 100.0f;

    Matrix::translate(pos, x * widthMod, y * heightMod, 1.0f);
    Matrix::rotateZ(rot, r.getZ());
    //Matrix::scale(scale, s.getX() * widthMod, s.getY() * heightMod, 1.0f);
    Matrix::scale(scale, 16.0f, 16.0f, 1.0f);

    Matrix::multiply(proj, pos, res);
    Matrix::multiply(res, rot, restmp);
    Matrix::multiply(restmp, scale, res);

    // Select shader program to use.
    int shaderId = features_->getText()->getShaderId();
    glUseProgram(shaderId);
    CHECK_GL_ERROR("glUseProgram");

    int matrix = glGetUniformLocation(shaderId, "uWVP");
    int color = glGetUniformLocation(shaderId, "uColor");
    int texture = glGetUniformLocation(shaderId, "texture_0");
    CHECK_GL_ERROR("glGetUniformLocation");
    int textureCoords = glGetAttribLocation(shaderId, "attrTexCoords");
    int vertices = glGetAttribLocation(shaderId, "attrPos");
    CHECK_GL_ERROR("glGetAttribLocation");

    // Specify WVP matrix.
    glUniformMatrix4fv(matrix, 1, false, res);
    CHECK_GL_ERROR("glUniformMatrix4fv");

    // Bind the texture.
    glActiveTexture(GL_TEXTURE0);
    CHECK_GL_ERROR("glActiveTexture");
    glBindTexture(GL_TEXTURE_2D, features_->getText()->getFontMapId());
    CHECK_GL_ERROR("glBindTexture");
    glUniform1i(texture, 0);
    CHECK_GL_ERROR("glUniform1i");

    glEnableVertexAttribArray(vertices);
    CHECK_GL_ERROR("glEnableVertexAttribArray");

    glBindBuffer(GL_ARRAY_BUFFER, 0);
    CHECK_GL_ERROR("glBindBuffer");

    glEnable(GL_BLEND);
    CHECK_GL_ERROR("glEnable");
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    CHECK_GL_ERROR("glBlendFunc");

    //string text = output_;
    for (unsigned int i = 0; i < msg.length(); i++) {
        unsigned short l = static_cast<unsigned short>(msg[i]) - 32;
        mat4 delta, resmove;
        Matrix::translate(delta, 1.6f, 0.0f, 0.0f);
        Matrix::multiply(res, delta, resmove);
        Matrix::copy(resmove, res);
        glUniformMatrix4fv(matrix, 1, false, res);
        CHECK_GL_ERROR("glUniformMatrix4fv");
        float col[] = {0.0f, 1.0f, 0.0f};
        glUniform3fv(color, 1, col);
        CHECK_GL_ERROR("glUniform3fv");
        glVertexAttribPointer(vertices, 3, GL_FLOAT, GL_FALSE, 0,
            features_->getText()->vertices_);
        CHECK_GL_ERROR("glVertexAttribPointer");
        glEnableVertexAttribArray(textureCoords);
        CHECK_GL_ERROR("glEnableVertexAttribArrayCheck");
        glVertexAttribPointer(textureCoords, 2, GL_FLOAT, GL_FALSE, 0,
            features_->getText()->getSymbol(l));
        CHECK_GL_ERROR("glVertexAttribPointer");
        glDrawArrays(GL_TRIANGLES, 0, 18 / 3);
        CHECK_GL_ERROR("glDrawArrays");
    }

    glDisable(GL_BLEND);
    CHECK_GL_ERROR("glDisable");
} 
```

错误是 GL_INVALID_VALUE 并且仅在执行代码后发生，而不是在编译和链接着色器后发生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T14:03:36.050

这可能是正在发生的事情：（我在这里说“编译器”，但它可能是执行实际清除的链接器）

着色器编译器删除了这个：

```
varying vec2 varTexCoords; 
```

如果编译器确定一个变量没有被使用，它将被丢弃。

最后一个例子很好：

```
vec4 col = texture2D(texture_0, varTexCoords);
col.rgb = uColor;
col.a = 0.5;
gl_FragColor = col; 
```

编译器理解 col 中的原始值被 uColor 统一和 0.5 常量覆盖。纹理读取被丢弃，因此变化也被丢弃。

然后你的 attrTexCoords 也很可能被删除，所以你的 textureCoords 包含属性位置的变量是-1。

另一方面，编译器无法删除读取的纹理，因为 col.bg 将包含来自纹理的值。

```
vec4 col = texture2D(texture_0, varTexCoords);
col.r = uColor.r;
col.a = 0.5;
gl_FragColor = col; 
```

# android - 放大和缩小安卓屏幕

> ID：13009897
> 
> 赞同：0
> 
> 时间：2012-10-22T10:51:56.080
> 
> 标签：android, zooming

我想放大任何屏幕，包括主屏幕或任何其他应用程序屏幕。我试图通过生根设备更改 build.prop 文件中的 lcd_density 来更改屏幕分辨率，但它需要重新启动设备。不能这样做吗像 iphone 一样，文本/屏幕缩放可以在运行时完成而无需重新启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:59:49.307

这是一个可访问性的东西，大多数 Android 在设置>可访问性下对此进行了设置

如果你在网上搜索它应该在那里。

我见过一些植根设备，它们可以让你更改默认文本大小，但很抱歉，我不记得应用程序的名称。

# search - 外壳搜索历史

> ID：13009908
> 
> 赞同：7
> 
> 时间：2012-10-22T10:52:17.833
> 
> 标签：search, emacs, history, eshell

我正在使用 emacs eshell 并想通过我的命令历史进行搜索。在 bash 中，你会做 Cr 然后输入一些东西，然后反复按 Cr 直到你找到你想要的命令。在 eshell 上，似乎我必须输入 Mr 然后输入部分命令并按 Enter 然后输入 Mr 并再次输入以获取下一个匹配项，依此类推。这意味着我必须一次又一次地继续做 Mr {enter} Mr {enter} Mr {enter}，而不是一次又一次地按下Cr而不移动我的手，有没有更好的方法？在 eshell 上没有太多信息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T20:46:01.957

如果您要搜索的字符串位于命令的开头，则`eshell-previous-matching-input-from-input` `UP`,`M-p`或比 .`C-c M-r`友好得多`eshell-previous-matching-input` `M-r`。

您可以键入命令的前几个字符并按`UP`或`M-p`键，它将仅循环通过历史记录中的匹配命令。

# reporting-services - MS Report Builder 3.0 甘特图 - 不同值的系列填充颜色

> ID：13009909
> 
> 赞同：0
> 
> 时间：2012-10-22T10:52:21.173
> 
> 标签：reporting-services, charts, reporting, gantt-chart, reportbuilder3.0

我在 MS 报告生成器 3 中构建了一个甘特图，它报告了当前分配的项目的团队和预期的完成时间。我试图用相同的颜色填充系列颜色，其中一个项目名称存在不止一次，即可以为 2 个团队分配同一个项目，因此图表栏应该在每次出现相同的项目名称时显示相同的颜色。

我尝试创建一个返回不同项目名称的数据集，然后在系列填充上创建一个在每个值之间切换的函数，但我没有成功，如下所示：

=Switch(Fields!ProjectName.Value IS First(Fields!ProjectName.Value, "ActiveProjects"), "#00000000")

还值得注意的是，这些项目名称将随着时间的推移被替换和更新，因此颜色不能是静态的，需要在生成报告时自动生成。

任何人都可以为这种情况提供解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:03:27.310

万一其他人遇到类似的问题，我通过将我自己的列添加到我的原始数据集中来解决我的问题。

此值使用以下语法：

HEX = '#' + RIGHT(左(master.dbo.fn_varbintohexstr(CAST(p.ProjectName AS VARBINARY(10))), 9), 6)

每次存在不同的项目名称时，我基本上都使用内置的 varbinary 到十六进制字符串函数来评估十六进制值。

回到报告生成器，我只是将系列填充颜色选项更改为该列的值。

希望这可以帮助某人。

# java - 要列出的结果集

> ID：13009911
> 
> 赞同：2
> 
> 时间：2012-10-22T10:52:53.167
> 
> 标签：java, database, list

我想用我的数据库字段值创建一个列表。有 2 列，名称和姓氏。我想创建一个列表，将所有名称存储在字段的名称列中，然后添加到我的 DTO。

这可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T10:58:53.180

**您可以遵循的步骤**： -

*   首先，您需要有一个`List<String>`可以存储您所有姓名的设备。像这样声明它： -

    ```
    List<String> nameList = new ArrayList<String>(); 
    ```

*   现在，您已获取所有记录并将其存储在`ResultSet`. 所以我假设你可以迭代`ResultSet`并从中获取每一个`values`。您需要使用`ResultSet#getString`来获取`name`.

*   现在，每次您获取一条记录时，获取该`name`字段并将其添加到您的列表中。

    ```
    while(resultSet.next()) {
        nameList.add(resultSet.getString("name"));
    } 
    ```

*   现在，由于您没有提供有关`DTO`您`ArrayList`的`DTO`.

*   以上`list`仅包含`name`而不是`surname`您想要的`name`。但是，如果您想要两者，则需要创建一个自定义 DTO `(FullName)`，其中包含`name`和`surname`作为字段。并从每个实例化它`ResultSet`并将其添加到`List<FullName>`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-23T13:14:56.053

不幸的是，JDBC 没有提供任何方法来方便地在单行中执行此操作。但是还有其他 API，例如[jOOQ](http://www.jooq.org)（免责声明：我为 jOOQ 背后的公司工作）：

```
List<DTO> list =
DSL.using(connection)
   .fetch("SELECT first_name, last_name FROM table")
   .into(DTO.class); 
```

或[Spring JDBC](http://projects.spring.io/spring-data/)

```
List<DTO> list =
new JdbcTemplate(new SingleConnectionDataSource(connection, true))
   .query("SELECT first_name, last_name FROM table", (rs, rowNum) ->
       new DTO(rs.getString(1), rs.getString(2)); 
```

或[Apache DbUtils](http://commons.apache.org/proper/commons-dbutils/)：

```
List<DTO> list =
new QueryRunner()
   .query(connection, 
          "SELECT first_name, last_name FROM table", 
          new ArrayListHandler())
   .stream()
   .map(array -> new DTO((String) array[0], (String) array[1]))
   .collect(Collectors.toList()); 
```

我在 Spring JDBC / Apache DbUtils 示例中使用了 Java 8，但也可以使用旧版本的 Java 来完成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T10:55:15.070

这是。你试过什么？

要访问数据库，您需要[使用 JDBC](http://docs.oracle.com/javase/tutorial/jdbc/basics/index.html)并执行查询，给您一个`ResultSet`.

我会创建一个`FullName`用 2 个字符串字段`name`和`surname`. 只需使用循环填充这些

```
rs.getString("NAME");  // column name
rs.getString("SURNAME"); 
```

例如

```
List<FullName> fullnames = new ArrayList<FullName>();
while (rs.next()) {
    fullnames.add(new FullName(rs));
} 
```

请注意，我`ResultSet`直接通过对象填充对象。您可以选择实现一个采用 2 个名称字段的构造函数。

另请注意，我正在创建一个`Fullname`对象。所以名字/姓氏是分开的，你以后可以自由添加首字母等。您可能更喜欢重命名它`Person`，这将使您可以自由地添加其他属性。

# vim - vim 的语法高亮不喜欢 "set -e #comment"

> ID：13009917
> 
> 赞同：0
> 
> 时间：2012-10-22T10:53:02.547
> 
> 标签：vim, syntax-highlighting, vi

我的 vi / vim 语法突出显示无法识别“set -e”行之后的注释。如果注释包含不成对的撇号，这会打乱文件的其余部分突出显示。

![例子](../Images/ae61bf6351b54f1bbf3a3ad96d36d898.png)

我能做些什么来解决这个问题？如图所示，在新行中添加注释可以避免这个问题，但我想要一个真正的修复。我是 vim 新手，但渴望学习。是否应该将其报告为错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T13:26:11.137

这是您的 7.2 版`syntax/sh.vim`脚本中的一个错误。您可以从维护者的网站[http://www.drchip.org/astronaut/vim/index.html](http://www.drchip.org/astronaut/vim/index.html)（[直接下载链接](http://www.drchip.org/astronaut/vim/syntax/sh.vim.gz)）下载最新版本，或者从当前的 Vim 运行时获取它：[https://code。 google.com/p/vim/source/browse/runtime/syntax/sh.vim](https://code.google.com/p/vim/source/browse/runtime/syntax/sh.vim)

当您无法修改原始 Vim 安装时，将文件放入`~/.vim/syntax/sh.vim`（`...\vimfiles\syntax\sh.vim`在 Windows 上）。用户配置会覆盖系统文件。有关`:help 'runtimepath'`更多详细信息，请参阅。

现在您负责更新此文件。因此，当系统升级到 Vim 7.3 或更高版本时，不要忘记删除您的用户副本以获取最新功能！

# c - 为什么 bool 不使用浮点数表示？

> ID：13009921
> 
> 赞同：3
> 
> 时间：2012-10-22T10:53:11.763
> 
> 标签：c, types, boolean

在 C（C99 之前）中，布尔值通常表示为

```
typedef int bool;
#define true 1
#define false 0 
```

为什么它表示为“int”而不是“float”？

这是一个面试问题，我什至想知道为什么会问这样的问题！有什么令人信服的答案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T10:58:36.003

`bool`值主要用于比较，并且使用`int`类型使用[整数 ALU](http://en.wikipedia.org/wiki/Arithmetic_logic_unit)进行这些比较。它非常快，因为它在 CPU 的正常管道中。如果要使用该`float`类型，则必须使用浮点单元，这将花费更多周期。

此外，如果您想支持`bool`在数学表达式中使用您的类型，即：

```
x = (4 * !!bool1) + (2 * !bool1); 
```

为了避免不必要的分支，您使用整数 ALU 也会比使用浮点单元更快。

上面的代码等价于下面的分支代码：

```
if (bool1) {
   x = 4;
} else {
   x = 2;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T10:56:26.840

有很多原因表明这将是一个坏主意。但是没有这样做的原因，即没有这样做的**历史**原因是，早期的计算机没有浮点单元（并且在更长的时间内有些有，有些没有）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T11:17:39.800

C's `_Bool`/ `bool`（和 C++'s `bool`）应该是一种非常简单的数值类型，并且表现得像一个，你不能得到比`char`or更简单的东西`int`。

`int`是出于性能或历史原因的典型选择。

替代`float`会限制它。您将无法`float`使用`<<`and移动 a `>>`。

有时您希望能够转换运算符的结果，例如`&&`, `||`, `==`, `!=`, `>`, `<`, `>=`, `<=`, ，这些运算符在 C++`!`中属于类型，在 C 中变相/ （隐式转换为）。`bool``_Bool``bool``int`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T11:24:33.293

由于其他答案（缓慢、历史等）提到了许多原因，我想补充一点，通常浮点数存在“***准确性***”问题（[参考：维基百科](http://en.wikipedia.org/wiki/Floating_point#Accuracy_problems)）。谁希望所有这些问题让计算机说出“真相”或“虚假”？我希望你也不要。选择“不准确”的东西用作“布尔”值是没有意义的。

# c# - 尝试将数据从 WPF 应用程序发送到任何 Web 浏览器上的网页

> ID：13009925
> 
> 赞同：2
> 
> 时间：2012-10-22T10:53:36.850
> 
> 标签：c#, asp.net, wpf, vb6, pinvoke

可能的重复：[通过挂钩直接将击键发送到另一个进程](https://stackoverflow.com/questions/10407769/directly-sending-keystrokes-to-another-process-via-hooking)

如果我的问题的语气有点糟糕，我想道歉。我被卡住了。好的，我正在编写一个程序，将数据从 WPF 应用程序传输到 VB 6 应用程序和网页。根据配置，它将调用一个过程来发布数据。我已经完成了 VB 6 方面的工作，但是网页出现了一个大问题，因为：

*   该过程必须适用于所有已知的浏览器。
*   我不允许将数据作为 Web 请求发送。
*   我无法控制要使用的网站。
*   我也不允许使用任何第三方软件

我已经尝试了以下方法：

*   用 keyup 和 keydown 发送消息，用于制表符和字符键
*   Sendmessage 与要发送的字符串的 postmessage
*   上面的postmessage版本
*   用于将数据作为 HTML 文档发送的 MSHTML
*   SendKeys（虽然还没有深入探索它）

这是发送消息的代码（最接近我所有的尝试）

```
 IntPtr window = User32_Methods.FindWindow(null, "Test Site");
        if(window!=IntPtr.Zero)
        {
            MessageBox.Show("asdasd");
            User32_Methods.SendMessage(window, Send_Message_Constants.WM_LBUTTONDOWN, IntPtr.Zero, IntPtr.Zero);
            User32_Methods.SendMessage(window, Send_Message_Constants.WM_LBUTTONUP, IntPtr.Zero, IntPtr.Zero);
            for (int count = 0; count < 15;count++)
            {
                User32_Methods.PostMessage(window, Send_Message_Constants.WM_KEYDOWN, (IntPtr) Send_Message_Constants.VK_TAB, IntPtr.Zero);
                User32_Methods.PostMessage(window, Send_Message_Constants.WM_KEYUP, (IntPtr)Send_Message_Constants.VK_TAB, IntPtr.Zero);
                foreach(char a in "adasdasdasd")
                {
                    User32_Methods.PostMessage(window, Send_Message_Constants.WM_KEYDOWN, (IntPtr)Send_Message_Constants.VK_A, IntPtr.Zero);
                    User32_Methods.PostMessage(window, Send_Message_Constants.WM_KEYUP, (IntPtr)Send_Message_Constants.VK_A, IntPtr.Zero);
                }
            }
        } 
```

我想问你们这些人，因为你们解决了我在这里遇到的大部分问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:29:40.653

我知道这可能不是要走的路，但是我看到您将尝试使用发送密钥，所以也许您可以使用您的逻辑添加一些您拥有的 .js 并执行它。由于发送键就像一种将数据输入表单/单击按钮/或其他方式的方式，因此 js 例程可能会帮助您....

# solr - 从 Solr 3 迁移数据

> ID：13009928
> 
> 赞同：1
> 
> 时间：2012-10-22T10:53:51.687
> 
> 标签：solr, lucene, elasticsearch, solrcloud

我正在考虑从 Solr 3 迁移到 Solrcloud 或 Elasticsearch，并且想知道是否可以将使用 Solr 3.x 索引的数据导入到 Solrcloud (solr 4) 和/或 Elasticsearch？

它们都是基于 lucene 的，但由于它们具有不同的行为，我不确定它是否会起作用。

有没有人这样做过？怎么样了？相关问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T14:38:24.527

关于将数据从 solr 导入到 elasticsearch，您可以查看[elasticsearch mock solr plugin](https://github.com/mattweber/elasticsearch-mocksolrplugin)。它向 elasticsearch 添加了一个类似 solr 的新端点，以便您可以使用为 solr 编写的索引器（如果有的话）来索引 elasticsearch 中的文档。

另外，我一直在研究 elasticsearch solr [river](http://www.elasticsearch.org/guide/reference/river/)，它允许通过 solrj 库将数据从 solr 导入到 elasticsearch。唯一的限制是它只能导入您配置为存储在 solr 中的字段。我应该很快就能把它公之于众，就在几天之内。我会尽快更新我的答案。

关于 Solr 从 3.x 升级到 4.0，没什么大不了的。索引格式已更改，但 Solr 将负责升级索引。一旦您使用旧索引启动 Solr，这将自动发生。但在那之后，以前的 Solr/lucene 版本就不能再读取索引了。如果您有主/从设置，则应首先升级从属，否则主上的索引将被复制到尚无法读取的从属。

**更新**
关于我提到的河流：我已将其公开，您可以从我的 github 个人资料下载：[https](https://github.com/javanna/elasticsearch-river-solr) ://github.com/javanna/elasticsearch-river-solr 。

# php - Google 日历网址供稿不正确，无法用于定期活动

> ID：13009929
> 
> 赞同：2
> 
> 时间：2012-10-22T10:53:58.377
> 
> 标签：php, xml

我正在使用以下代码来解析来自 Google 日历提要的 XML 数据：

```
 require_once('coreylib/coreylib.php');

    $calendar = variable_get('calendar_id_setting');

    $now = date('Y/m/d', strtotime('now'));
    $next_week = date('Y/m/d', strtotime('+7 days'));
    $api = new clApi('http://www.google.com/calendar/feeds/' . $calendar .'/public/full?singleevents=true&amp;min-start=' . $now . '&amp;max-start=' .$next_week);

    if ($feed = $api->parse()) {

        foreach($feed->get('entry') as $entry) {

                  error_log($title . ' ' . strtotime($entry->get('when@startTime'))); 
```

问题出在错误日志中，我的第一个结果是具有正确标题和时间的唯一事件，但以下 25 个结果都具有相同的标题并且开始时间为 2026 年（？！）。

除了其中一个事件之外，所有事件都是重复事件。我认为在 URL 上设置 'singleevents=true' 可以解决这个问题，但显然不是！这里的正确解决方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T06:01:28.897

将您的 URL 与[Calendar API v2 文档](https://developers.google.com/google-apps/calendar/v2/developers_guide_protocol#RetrievingDateRange)中的 URL 进行比较。您提供参数`min-start`和`max-start`，格式为`'Y/m/d'`. 该文档显示了一个带有参数的示例

```
start-min=2006-03-16T00:00:00&start-max=2006-03-24T23:59:59 
```

注意 和 的使用，`start-min`以及`start-max`的格式`yyyy-MM-dd'T'HH:mm:ss`。鉴于[参数参考](https://developers.google.com/google-apps/calendar/v2/reference#Parameters)，我怀疑您可以使用 just `yyyy-MM-dd`，但您应该遵循该格式，而不是使用斜杠和个位数版本。

当然，这并不能完全解释您在 2026 年获得的结果，但使用正确的参数将是一个很好的起点。

此外，您可能希望考虑使用[v3 API](https://developers.google.com/google-apps/calendar/)和可能的[PHP（测试版）客户端库](http://code.google.com/p/google-api-php-client/)。

（注意：虽然我为 Google 工作并且自己曾经使用过客户端 API，但此答案纯粹以个人身份提供。）

# javascript - 是否可以使用 JavaScript 触发键盘按钮？

> ID：13009932
> 
> 赞同：2
> 
> 时间：2012-10-22T10:54:01.543
> 
> 标签：javascript, keyboard, dom-events, case-sensitive, capslock

是否可以使用 JavaScript 触发键盘按钮，并根据 Caps Lock 按钮获得输入框？

所以，如果我的 Caps Lock 开启，“它应该大写”或“如果它关闭，它应该小写”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:58:08.237

触发按键事件：

```
var ev = jQuery.Event("keypress");
ev.ctrlKey = false;
ev.which = 37;
$("container").trigger(ev); 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T11:10:44.617

javascript 事件对象会根据您是否按下大写锁定来为您提供不同的键代码。

```
$('#yourTxtBox').keypress(function(e){

//eg:for small case letter 'a' it give you '65' and for capital 'A' it gives you '97'

    console.log(e.which);

}); 
```

这样您就可以轻松识别您的大写锁定是否被按下。

# oracle - 为什么 Oracle 在提交期间会丢失数据？

> ID：13009933
> 
> 赞同：7
> 
> 时间：2012-10-22T10:54:01.710
> 
> 标签：oracle, oracle10g

我有一个相当标准的 SQL 查询，如下所示：

```
TRUNCATE TABLE TABLE_NAME;
INSERT INTO TABLE_NAME 
(
UPRN,
SAO_START_NUMBER,
SAO_START_SUFFIX,
SAO_END_NUMBER,
SAO_END_SUFFIX,
SAO_TEXT,
PAO_START_NUMBER,
PAO_START_SUFFIX,
PAO_END_NUMBER,
PAO_END_SUFFIX,
PAO_TEXT,
STREET_DESCRIPTOR,
TOWN_NAME,
POSTCODE,
XY_COORD,
EASTING,
NORTHING,
ADDRESS
)
SELECT  
BASIC_LAND_AND_PROPERTY_UNIT.UPRN, 
LAND_AND_PROPERTY_IDENTIFIER.SAO_START_NUMBER AS SAO_START_NUMBER, 
LAND_AND_PROPERTY_IDENTIFIER.SAO_START_SUFFIX AS SAO_START_SUFFIX, 
LAND_AND_PROPERTY_IDENTIFIER.SAO_END_NUMBER AS SAO_END_NUMBER, 
LAND_AND_PROPERTY_IDENTIFIER.SAO_END_SUFFIX AS SAO_END_SUFFIX, 
LAND_AND_PROPERTY_IDENTIFIER.SAO_TEXT AS SAO_TEXT, 
LAND_AND_PROPERTY_IDENTIFIER.PAO_START_NUMBER AS PAO_START_NUMBER, 
LAND_AND_PROPERTY_IDENTIFIER.PAO_START_SUFFIX AS PAO_START_SUFFIX, 
LAND_AND_PROPERTY_IDENTIFIER.PAO_END_NUMBER AS PAO_END_NUMBER, 
LAND_AND_PROPERTY_IDENTIFIER.PAO_END_SUFFIX AS PAO_END_SUFFIX, 
LAND_AND_PROPERTY_IDENTIFIER.PAO_TEXT AS PAO_TEXT, 
STREET_DESCRIPTOR.STREET_DESCRIPTOR AS STREET_DESCRIPTOR, 
STREET_DESCRIPTOR.TOWN_NAME AS TOWN_NAME, 
LAND_AND_PROPERTY_IDENTIFIER.POSTCODE AS POSTCODE, 
BASIC_LAND_AND_PROPERTY_UNIT.GEOMETRY AS XY_COORD, 
BASIC_LAND_AND_PROPERTY_UNIT.X_COORDINATE AS EASTING, 
BASIC_LAND_AND_PROPERTY_UNIT.Y_COORDINATE AS NORTHING,
decode(SAO_START_NUMBER,null,null,SAO_START_NUMBER||SAO_START_SUFFIX||' ')
||decode(SAO_END_NUMBER,null,null,SAO_END_NUMBER||SAO_END_SUFFIX||' ')
||decode(SAO_TEXT,null,null,SAO_TEXT||' ')
||decode(PAO_START_NUMBER,null,null,PAO_START_NUMBER||PAO_START_SUFFIX||' ')
||decode(PAO_END_NUMBER,null,null,PAO_END_NUMBER||PAO_END_SUFFIX||' ')
||decode(PAO_TEXT,null,null,'STREET RECORD',null,PAO_TEXT||' ')
||decode(STREET_DESCRIPTOR,null,null,STREET_DESCRIPTOR||' ')
||decode(POST_TOWN,null,null,POST_TOWN||' ')
||Decode(Postcode,Null,Null,Postcode)  As Address 
From (Land_And_Property_Identifier
      Inner Join Basic_Land_And_Property_Unit
        On Land_And_Property_Identifier.Uprn = Basic_Land_And_Property_Unit.Uprn)  
Inner Join Street_Descriptor
  On Land_And_Property_Identifier.Usrn = Street_Descriptor.Usrn
Where Land_And_Property_Identifier.Postally_Addressable='Y'; 
```

如果我在 SQL Developer 中运行这个查询，它运行良好，插入了 180 万个特性（`select count(*) from TABLE_NAME`在会话中证实了这一点）。

但是当我运行提交时，数据消失了！`select count(*) from TABLE_NAME`现在返回 0 个结果。

我们已经做了很多事情来尝试看看发生了什么：

*   期间`Truncate`，表空间被释放，而在插入期间，表空间再次被填充。提交期间没有任何变化。这意味着数据在数据库中。

*   如果我执行完全相同的查询但`and rownum < 100`附加到末尾，则提交有效。与 相同`1000`。

*   我发现了这个问题：[oracle commit kills](https://stackoverflow.com/questions/1867167/oracle-commit-kills)并让我们的 DBA 尝试“SQL Trace”。这产生了一个 >4GB 的文件，当用 TKPROF 解析时产生了一个 120 页的报告，但我们不知道如何阅读它，而且那里没有明显的错误。

*   我们的错误日志中没有任何内容。显然在提交过程中没有错误。

*   有一个触发器/序列在此过程中确实增加了 180 万。

我现在已经重复了大约 4 次，但结果总是一样的。

所以我的问题很简单——提交期间数据发生了什么？我们怎样才能知道？谢谢。

注意：这在过去运行良好，所以我不相信 SQL 本身有任何问题。

* * *

编辑：通过从头开始重新创建表**解决了问题。**现在，当我插入时，与之前的 2000 年相比，它只需要 500 秒。而且提交是即时的；当它被破坏时，提交花了 4000 秒！我仍然不知道为什么会这样。

* * *

对于那些询问，创建表语法：

```
CREATE TABLE TABLE_NAME
(
ADDRESS                                            VARCHAR2(4000),
UPRN                                               NUMBER(12),
SAO_START_NUMBER                                   NUMBER(4),
SAO_START_SUFFIX                                   VARCHAR2(1),
SAO_END_NUMBER                                     NUMBER(4),
SAO_END_SUFFIX                                     VARCHAR2(1),
SAO_TEXT                                           VARCHAR2(90),
PAO_START_NUMBER                                   NUMBER(4),
PAO_START_SUFFIX                                   VARCHAR2(1),
PAO_END_NUMBER                                     NUMBER(4),
PAO_END_SUFFIX                                     VARCHAR2(1),
PAO_TEXT                                           VARCHAR2(90),
STREET_DESCRIPTOR                                  VARCHAR2(100),
TOWN_NAME                                          VARCHAR2(30),
POSTCODE                                           VARCHAR2(8),
XY_COORD                                           MDSYS.SDO_GEOMETRY,
EASTING                                            NUMBER(7),
NORTHING                                           NUMBER(7)
)

CREATE INDEX TABLE_NAME_ADD_IDX ON TABLE_NAME (ADDRESS); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-10T13:08:25.850

如果您将交易包装在匿名块中，您仍然会丢失数据吗？

我的猜测是您在 SQL Developer 中打开了两个 SQL 窗口，这意味着两个单独的会话。即在窗口 1 中运行 SQL 代码并提交；在窗口 2 中不会提交在窗口 1 中所做的更改。

截断表执行隐式提交。因此，在插入 + 提交完成之前，该表将为空。

```
begin
  execute immediate 'truncate table table_name reuse storage'; --use "reuse" if you know the data will be of similar size
  -- implicit commit has occured and the table is empty for all sessions
  insert into table_name (lots)
     select lots from table2;
  commit;
end; 
```

您应该将 truncate 与重用存储一起使用，这样数据库就不会为了在插入中获取相同数量的块而释放所有块。

如果您希望/需要始终提供数据，则更好（但更长）的方法是

```
begin
   savepoint letsgo;
   delete from table_name;
   insert into table_name (lots)
   select lots from table2;
   commit;
exception
   when others then
      rollback to letsgo;
end; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-05T15:43:32.817

可能你有一个你没有注意到的触发器。你能检查一下 oracle 的 recyclebin 表，它可能存储你删除的表和触发器的历史吗？

```
Select * from recyclebin; 
```

参考资料：[http ://www.oraclebin.com/2012/12/recyclebinflashback.html](http://www.oraclebin.com/2012/12/recyclebinflashback.html)

# popup - 如何将“我的帐户”portlet 显示为弹出窗口？

> ID：13009934
> 
> 赞同：0
> 
> 时间：2012-10-22T10:54:05.000
> 
> 标签：popup, portlet, liferay-6

我希望“**我的帐户”** portlet 在单击链接时作为弹出窗口打开。

此弹出窗口应仅针对管理员显示左侧面板（即我的提交、工作流程等）。这样就排除了在**portal-ext.properties**文件中进行更改的可能性。

普通用户应该只能查看中心部分（即带有用户信息的字段）。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:34:39.100

它已经在liferay中实现了，当你登录然后点击文档栏中的用户名，它会在弹出窗口中打开用户帐户页面，检查它的实现

# spring - spring data jpa查询限制

> ID：13009937
> 
> 赞同：1
> 
> 时间：2012-10-22T10:54:24.587
> 
> 标签：spring, jpa-2.0, spring-data-jpa

我有这样的查询：

```
@Query("select a from Ability a where a.eventLogic = ?1 AND a.abilitySetId = ?2 ORDER BY    RAND() LIMIT ?3") 
```

但是我得到一个错误：

```
Caused by: java.lang.IllegalArgumentException: org.hibernate.hql.ast.QuerySyntaxException: unexpected token: LIMIT near line 1, column 117 
```

我如何以编程方式输入限制数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:29:25.803

spring data jpa，有文档，说明如何使用一些分页来解决这个问题。这就是我用的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T13:35:51.157

我有一个类似的问题，添加一个明确的 ASC 子句解决了它。

# c++ - 在 Sun Studio (NetBeans) 中组织一个大型 c++ 系统

> ID：13009938
> 
> 赞同：1
> 
> 时间：2012-10-22T10:54:26.147
> 
> 标签：c++, netbeans, sun, sunstudio

我的团队正在维护一个包含多个可执行文件和许多静态库的 c++ 系统。它是在没有现代 ide 的情况下开发的，即使用 emacs。我们想开始使用 Sun Studio (NetBeans)。是否有描述如何在 Sun Studio 中组织大量项目的资源？在以前使用 VisualStudio 的程序中，我们所有的“项目”都是单个“解决方案”的一部分。我想知道Sun Studio中是否有类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T15:49:50.167

您可以选择多个 Projects 一个组（**`File -> Project Group -> New Group ...`**）。
这是你需要的吗？

这里有两个例子：

[http://envyandroid.com/archives/142/project-groups-in-netbeans](http://envyandroid.com/archives/142/project-groups-in-netbeans)
[http://developmentality.wordpress.com/2010/04/26/netbeans-ide-tip-1-project-groups/](http://developmentality.wordpress.com/2010/04/26/netbeans-ide-tip-1-project-groups/)

# clojure - Clojure 中的外部联接

> ID：13009939
> 
> 赞同：10
> 
> 时间：2012-10-22T10:54:27.177
> 
> 标签：clojure, outer-join

类似于这个问题：[Inner-join in clojure](https://stackoverflow.com/questions/6695189/inner-join-in-clojure)

是否有对任何 Clojure 库中的地图集合执行外连接（左、右和完整）的功能？

我想这可以通过修改代码来完成，`clojure.set/join`但这似乎是一个足够普遍的要求，所以值得检查它是否已经存在。

像这样的东西：

```
(def s1 #{{:a 1, :b 2, :c 3}
          {:a 2, :b 2}})

(def s2 #{{:a 2, :b 3, :c 5}
          {:a 3, :b 8}})

;=> (full-join s1 s2 {:a :a})
;
;   #{{:a 1, :b 2, :c 3}
;     {:a 2, :b 3, :c 5}
;     {:a 3, :b 8}} 
```

`nil`以及左右外连接的相应功能，即包括左、右或两侧的连接键没有值（或值）的条目。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T13:51:56.173

Sean Devlin（以[Full Disclojure](http://vimeo.com/channels/fulldisclojure)闻名）[的 table-utils](https://github.com/francoisdevlin/devlinsf-clojure-utils/blob/master/src/lib/sfd/table_utils.clj)具有以下连接类型：

*   内部联接
*   左外连接
*   右外连接
*   全外连接
*   自然连接
*   交叉连接

它已经有一段时间没有更新了，但可以在 1.3、1.4 和 1.5 中使用。要使其在没有任何外部依赖项的情况下工作：

*   替换`fn-tuple`为`juxt`
*   `(:use )`将ns 声明中的整个子句替换为`(require [clojure.set :refer [intersection union]])`
*   从下面添加函数 map-vals：

任何一个

```
(defn map-vals
  [f coll]
  (into {} (map (fn [[k v]] {k (f v)}) coll))) 
```

或 Clojure 1.5 及更高版本

```
(defn map-vals
  [f coll]
  (reduce-kv (fn [acc k v] (assoc acc k (f v))) {} coll)) 
```

该库的用法是连接类型、两个集合（如上例的两组映射，或两个 sql 结果集）和至少一个连接 fn。由于关键字是地图上的函数，通常只有连接键就足够了：

```
=> (full-outer-join s1 s2 :a :a)
   ({:a 1, :c 3, :b 2}
    {:a 2, :c 5, :b 3}
    {:b 8, :a 3}) 
```

如果我没记错的话，Sean 前段时间曾尝试将 table-utils 加入 contrib，但从未成功。太糟糕了，它从来没有拥有自己的项目（在 github/clojars 上）。Stackoverflow 或 Clojure Google 小组时不时会出现类似这样的库的问题。

另一种选择可能是使用来自 datomic 的数据日志库来查询 clojure 数据结构。Stuart Halloway 在他的要点中有[一些](https://gist.github.com/2645453) [例子](https://gist.github.com/3068749)。

# javascript - jQuery重置所有选择框，不包括调用框

> ID：13009941
> 
> 赞同：0
> 
> 时间：2012-10-22T10:54:30.210
> 
> 标签：javascript, jquery

我有一个表格，用户可以在其中选择时间间隔。但我只希望他们只能选择一个选项。在从下拉列表中选择一个值时，jQuery 应该重置其他下拉列表。HTML（和 php 但不相关）：

```
<select class="span1" name="repeatminute" id="repeatIntervalTiming" onChange="disableOther(this)">
            <?php for($i=0; $i<61;$i++){ echo "<option>$i</option>"; } ?>
            </select>
            minute(s)</label>
              <label>
            <select class="span1" name="repeathour" id="repeatIntervalTiming" onChange="disableOther(this)">
            <?php for($i=0; $i<25;$i++){ echo "<option>$i</option>"; } ?>
            </select>
             hour(s)</label>
            <label>
            <label>
                 <select class="span1" name="repeatday" id="repeatIntervalTiming" onChange="disableOther(this)">
            <?php for($i=0; $i<32;$i++){ echo "<option>$i</option>"; } ?>
            </select>
            day(s)</label>
            <label>
            <select class="span1" name="repeatmonth" id="repeatIntervalTiming" onChange="disableOther(this)">
            <?php for($i=0; $i<13;$i++){ echo "<option>$i</option>"; } ?>
             </select>
             month(s)</label> 
```

这是我的 jQuery 尝试：

```
function disableOther(caller){
    $('#repeatIntervalTiming').each(function(index) {
        if ($(this).text() != caller.textContent){
            $(this).val(0);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:56:23.497

jQuery 中有一种`.not()`方法可以从匹配的元素集中删除元素。

```
$('select.span1').change(function() {
    $('select.span1').not($(this)).val('');
}); 
```

文档[在这里](http://api.jquery.com/not/)。

PS1：使用唯一的 ID！我已将您的 ID 选择器更改为类选择器。

PS2：尽可能避免使用内联 javascript。我的例子是[不引人注目](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T11:03:26.473

我删除了您的 onchange-function 并在 jQuery 中添加了一个事件：

```
$('select').change(function () {
  $('select').not($(this)).val('');
});​​ 
```

在这里查看一个工作示例：http: [//jsfiddle.net/4pqdx/](http://jsfiddle.net/4pqdx/)

*编辑*注意到我有错误的 jsfiddle-link。新的作品！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T11:01:40.497

首先，您永远不应该在同一个 html 文档中有两个具有相同 id 的元素在所有选择框中添加相同的类并给它们所有不同的 id 一旦您的选择框上的所有 id 都不同，您可以定位除您所在的那个之外的所有有类似的东西：

```
function disableOther(callerId){
    $('.selectBoxesClass:not('+caqllerId+')').val(0);
}); 
```

# c# - 反汇编 C#

> ID：13009944
> 
> 赞同：7
> 
> 时间：2012-10-22T10:54:46.053
> 
> 标签：c#, security

我有一个关于 C# 的问题。

我目前正在开发一个医疗软件产品，其中一件重要的事情是确保患者的数据是加密的。我对此有两个问题：

1.) System.Security.Cryptography 的 AES (Rijndael) 的 Microsoft .NET 实现有多安全？它是否有任何已知的安全漏洞，或者我是否可以仅使用 MS 实现？（注意，我知道这些算法如何工作的基本背景，但我并没有深入了解它是如何工作的）。

2.) 由于数据与应用程序存储在同一台 PC 上，从 C# 应用程序获取信息有多难？假设我在代码中的某个地方

```
string encrypPassword = "ThisIsMyPassword";
string encryptedString = EncryptString(ClearString, encrypPassword);
// save encryptedString to harddrive 
```

我知道攻击者可以直接查看汇编代码，此时我对此无能为力（系统必须能够加密/解密数据），但是有没有类似的捷径C# 获取 encrypPassword，因为它是托管的，还是这样的事情仍然需要你去汇编代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T11:13:11.847

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T11:51:26.210

回答您原始问题的第一部分 - AES 的本机 Windows 实现已通过 NIST 认证，符合 FIPS 140-2。对认证实施的访问仅限于：

1.  使用 Windows 加密 API

2.  将 CAPICOM com 包装器用于 Windows Crypto API

3.  在 System.Security.Cryptography 命名空间中使用 .Net AesCryptoServiceProvider 类（该类在 .Net Framework 3.5 之前才可用）

话虽如此，RijndaelManaged 类中的实现是相同的，只是没有通过 NIST 认证过程（这个过程非常漫长且非常昂贵）。

Aes 算法非常安全（军用级加密——尤其是 256 位密钥变体）。

最大的担忧（同意上面的海报）是将您的加密密码以纯文本形式嵌入应用程序中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T11:49:24.613

大多数体面的混淆器会在将您的代码中的字符串存储到程序集的字符串部分之前对其进行加密，并在使用前注入一种解密它们的方法。这些技术也早已被反汇编程序逆向工程。

实际上，几乎没有办法在任何编程语言中真正安全地存储字符串。几乎总有人可以找到字符串，或者对用于构建它的逻辑进行逆向工程。您能做的最好的事情就是让攻击者足够长的时间，以使其不值得他们花费时间和精力。

在您的情况下，我可能会将加密的密码存储在应用程序中（例如，在您的应用程序外部手动加密，然后复制/粘贴）。可能将其拆分为多个部分，以便不将其存储为单个字符串。然后将其重新组合在一起并在运行时对其进行解密，然后在运行时将其存储在 SecureString 中。还要投资一个好的混淆器，因为它有助于掩盖你的解密逻辑（这将成为安全性的薄弱环节）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T11:27:27.023

要存储您的密码数据，您可以使用 System.Security 命名空间中的 SecureString 类。

# android - GCM 演示服务器向设备发送消息引发 401 错误

> ID：13009945
> 
> 赞同：3
> 
> 时间：2012-10-22T10:54:50.260
> 
> 标签：android, windows, eclipse, tomcat

正如许多其他 java 和 android 新手一样，我正在尝试在 windows 上运行 gcm 演示服务器和 gcm 演示客户端，使用 eclipse 运行 vertual 设备和 tomcat 作为 webserer。

我在注册和取消注册设备方面没有问题，但在尝试发送消息时出现错误 401。阅读了很多关于类似问题的答案，但仍然不知道我做错了什么。我将 apy 密钥、服务器 url 和发件人 ID 放在教程中提到的位置。还稍微更改了 SendAllMessagesServlet.java 中的代码：

```
// Processes the request to add a new message.  
@Override protected void doPost(HttpServletRequest req, HttpServletResponse resp)
  throws IOException, ServletException {
    List<String> devices = Datastore.getDevices();
    String status;
    if (devices.isEmpty()) {
        status = "Message ignored as there is no device registered!";
    } else {
        // NOTE: check below is for demonstration purposes; a real application
        // could always send a multicast, even for just one recipient
        // MY CODE
        String collapseKey = "mycollapsekey";
        String userMessage = "testmessage";
        // END OF MY CODE
        if (devices.size() == 1) {
            // send a single message using plain post
            String registrationId = devices.get(0);
            //  Message message = new Message.Builder().build();
            //  BELOW I HAVE CHANGED MESSAGE BUILDING A BIT:
            Message message = new Message.Builder()
                .collapseKey(collapseKey)
                .timeToLive(30)
                .delayWhileIdle(true)
                .addData("message", userMessage)
                .build();
            Result result = sender.send(message, registrationId, 5);
            status = "Sent message to one device: " + result;
        } else {
            // send a multicast message using JSON
            // must split in chunks of 1000 devices (GCM limit)
            int total = devices.size();
            List<String> partialDevices = new ArrayList<String>(total);
            int counter = 0;
            int tasks = 0;
            for (String device : devices) {
                counter++;
                partialDevices.add(device);
                int partialSize = partialDevices.size();
                if (partialSize == MULTICAST_SIZE || counter == total) {
                    asyncSend(partialDevices);
                    partialDevices.clear();
                    tasks++;
                }
            }
            status = "Asynchronously sending " + tasks + " multicast messages to " + total + " devices";
        }
    }
    req.setAttribute(HomeServlet.ATTRIBUTE_STATUS, status.toString());
    getServletContext().getRequestDispatcher("/home").forward(req, resp);
} 
```

但是发送消息时我仍然收到下一个错误，这是我的 tomcat localhost 日志文件：

```
окт 22, 2012 1:06:39 PM org.apache.catalina.core.ApplicationContext log
INFO: org.apache.webapp.balancer.BalancerFilter: init(): ruleChain: [org.apache.webapp.balancer.RuleChain: [org.apache.webapp.balancer.rules.URLStringMatchRule: Target string: News / Redirect URL: http://www.cnn.com], [org.apache.webapp.balancer.rules.RequestParameterRule: Target param name: paramName / Target param value: paramValue / Redirect URL: http://www.yahoo.com], [org.apache.webapp.balancer.rules.AcceptEverythingRule: Redirect URL: http://jakarta.apache.org]]
окт 22, 2012 1:06:39 PM org.apache.catalina.core.ApplicationContext log
INFO: ContextListener: contextInitialized()
окт 22, 2012 1:06:39 PM org.apache.catalina.core.ApplicationContext log
INFO: SessionListener: contextInitialized()
окт 22, 2012 1:06:39 PM org.apache.catalina.core.ApplicationContext log
INFO: ContextListener: contextInitialized()
окт 22, 2012 1:06:39 PM org.apache.catalina.core.ApplicationContext log
INFO: SessionListener: contextInitialized()
окт 22, 2012 1:07:05 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet SendAllMessagesServlet threw exception
com.google.android.gcm.server.InvalidRequestException: HTTP Status Code: 401
    at com.google.android.gcm.server.Sender.sendNoRetry(Sender.java:177)
    at com.google.android.gcm.server.Sender.send(Sender.java:121)
    at com.google.android.gcm.demo.server.SendAllMessagesServlet.doPost(SendAllMessagesServlet.java:93)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:881)
    at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:674)
    at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:541)
    at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)
    at java.lang.Thread.run(Unknown Source) 
```

标准错误日志：

```
2012-10-22 13:06:37 Commons Daemon procrun stderr initialized
окт 22, 2012 1:06:38 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Apache Software Foundation\Tomcat 5.5\bin;C:\WINDOWS\Sun\Java\bin;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\Program Files\Android\android-sdk\tools;C:\Program Files\Android\android-sdk\platform-tools;c:\ant\bin;C:\Program Files\Java\jdk1.7.0_07\lib;;.
окт 22, 2012 1:06:38 PM org.apache.coyote.http11.Http11BaseProtocol init
INFO: Initializing Coyote HTTP/1.1 on http-8080
окт 22, 2012 1:06:38 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 531 ms
окт 22, 2012 1:06:38 PM org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
окт 22, 2012 1:06:38 PM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/5.5.36
окт 22, 2012 1:06:38 PM org.apache.catalina.core.StandardHost start
INFO: XML validation disabled
окт 22, 2012 1:06:39 PM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive gcm-demo.war
окт 22, 2012 1:06:39 PM com.google.android.gcm.demo.server.ApiKeyInitializer contextInitialized
INFO: Reading /api.key from resources (probably from WEB-INF/classes
окт 22, 2012 1:06:39 PM org.apache.coyote.http11.Http11BaseProtocol start
INFO: Starting Coyote HTTP/1.1 on http-8080
окт 22, 2012 1:06:39 PM org.apache.jk.common.ChannelSocket init
INFO: JK: ajp13 listening on /0.0.0.0:8009
окт 22, 2012 1:06:39 PM org.apache.jk.server.JkMain start
INFO: Jk running ID=0 time=0/32  config=null
окт 22, 2012 1:06:39 PM org.apache.catalina.storeconfig.StoreLoader load
INFO: Find registry server-registry.xml at classpath resource
окт 22, 2012 1:06:39 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 1219 ms
окт 22, 2012 1:06:58 PM com.google.android.gcm.demo.server.Datastore register
INFO: Registering APA91bF0kArKvvJsHu4qS92FQl-CLKt0CJL8_SrtyL9OkGSqQQUMywMvPhulG4xmdiX_uVhdXs6xERY5pwQzHES-aI-tBCOgMZ_JOBT8S_RIK9XhyQDf49Yfr9g4nSnfgN2GIJHlnqTA4mAJBolnjfuQKLmULl0g5g 
```

我错过了什么或在哪里可以阅读更多关于解决此类问题的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T11:22:06.573

我刚刚回答了一个类似的问题——[访问/gcm-demo/sendAll。原因：HTTP 状态码：401](https://stackoverflow.com/questions/13009851/accessing-gcm-demo-sendall-reason-http-status-code-401/13010363#13010363)

检查您正在使用的发件人 API 密钥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-27T15:46:22.230

我也遇到了这个错误

![在此处输入图像描述](../Images/1ef0be305fa2ec4e32046d55c35d0f6d.png)

原来我没有启用`Google Cloud Messaging for Android`。（在我的一台机器上，这是按照相同的步骤自动启用的，不知道为什么在另一台机器上没有这样做）长话短说，转到开发人员控制台并启用它。

`APIs and Auths | APIs | Google Cloud Messaging for Android`

刷新您的浏览器，然后重试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-28T08:30:44.717

这个问题在任何论坛上都没有得到很好的解决，可能是因为它有多种原因。我的情况是：我正在做一个 GCM 推送通知的演示，它第一次就起作用了。但是当我第二天继续使用相同的代码时，我发现答案中提到了异常。经过观察，我注意到我的公共 IP 已更改，因为它不是静态的。在谷歌开发者控制台上创建项目时必须提供此 IP。您可以通过在谷歌中搜索“我的公共 IP 地址”来找到您的公共 IP。或者出于演示目的，我现在强烈建议您使用 IP 作为推荐的 0.0.0.0/0，并且当您部署项目时，您的服务器 IP 将是静态的。然后，您可以将 0.0.0.0/0 IP 替换为您的服务器 IP。此外，请检查所有密钥，例如“项目编号”和“服务器 API 密钥”。希望能帮助到你。干杯:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T12:35:24.727

> Commons Daemon procrun stderr 已初始化

如果有人遇到上述错误，请尝试检查您的 jvm.dll 路径默认路径位于 *C:\Program Files\Java\jdk1.6.0_37\jre\bin\client\jvm.dll* 将其更改为正确的路径。

# opencv - 如何使用 IPP7.1 和 OpenCV 2.4.1

> ID：13009951
> 
> 赞同：1
> 
> 时间：2012-10-22T10:55:32.887
> 
> 标签：opencv

请告诉我在 Windows 上安装 ipp7.1 并在 OpenCV2.4.2 中使用它应该遵循哪些步骤。我下载了 Ipp7.1 评估版并使用了 CMake 2.8，然后我在 CMake 中配置了静态 OpenCV，并在 vs2008 中构建了所有项目，没有任何问题。

对于静态项目，我为 OpenCV 和 3rdparty 添加了以下列表：

> opencv_calib3d241.lib opencv_contrib241.lib opencv_core241.lib opencv_features2d241.lib opencv_flann241.lib opencv_gpu241.lib opencv_highgui241.lib opencv_imgproc241.lib opencv_legacy241.lib opencv_ml241.lib opencv_nonfree241.lib opencv_objdetect241.lib opencv_photo241.lib opencv_stitching241.lib opencv_ts241.lib opencv_video241.lib opencv_videostab241.库
> 
> libjasper.lib libjasperd.lib libjpeg.lib libjpegd.lib libpng.lib libpngd.lib libtiff.lib libtiffd.lib zlib.lib zlibd.lib user32.lib

然后为 IPP 静态库附加以下列表：

> ippac_l.lib ippcc_l.lib ippch_l.lib ippcore_l.lib ippcv_l.lib ippdc_l.lib ippdi_l.lib
> ippi_l.lib ippj_l.lib ippm_l.lib ippr_l.lib ippsc_l.lib
> ipps_l.lib ippvc_l.lib ippvm_l.lib

我的项目编译没有任何问题。

我使用以下代码来确保 IPP 已安装并正常工作。该函数有 2 个输入参数。第一个是“opencv_lib”，它将由 OpenCV 的版本填充。但我的问题在于第二个参数。“add_modules”始终为空。

```
const char* opencv_lib = 0;
const char* add_modules = 0;
cvGetModuleInfo(0, &opencv_lib,&add_modules);
printf("\t opencv_lib = %s,\n\t add_modules = %s\n\n", opencv_lib,add_modules); 
```

还有另一个问题，我相信它指的是前面的问题。`cvUseOptimized(1)`在以下代码中，我使用`cvUseOptimized(0)`了相同的循环代码。但奇怪的是，两者的处理时间实际上是相等的！

```
double  t1, t2,timeCalc;  

    IplImage *template_image = cvLoadImage ("c:\\box.png",0);
    IplImage* converted_image= cvLoadImage ("c:\\box_in_scene.png",0);
    CvSize cvsrcSize    = cvGetSize(converted_image);

    cout << " image match template using OpenCV cvMatchTemplate() " << endl;
    IplImage *image_ncc, *result_ncc;
    image_ncc = cvCreateImage(cvsrcSize,8,1); 
    memcpy(image_ncc->imageData,converted_image->imageData,converted_image->imageSize);
    result_ncc = cvCreateImage(cvSize(converted_image->width -template_image->width+1,
                                            converted_image->height-template_image->height+1),IPL_DEPTH_32F,1);

    int NumUploadedFunction = cvUseOptimized(1);
    t1 = (double)cvGetTickCount();
    for (int j=0;j<LOOP;j++)
        cvMatchTemplate(image_ncc, template_image, result_ncc, CV_TM_CCORR_NORMED);
    t2 = (double)cvGetTickCount();
    timeCalc=(t2-t1)/((double)cvGetTickFrequency()*1000\. * 1000.0);
    cout << " OpenCV matchtemplate using cross-correlation Valid: " << timeCalc << endl;

NumUploadedFunction = cvUseOptimized(0);
    t1 = (double)cvGetTickCount();
    for (int j=0;j<LOOP;j++)
        cvMatchTemplate(image_ncc, template_image, result_ncc, CV_TM_CCORR_NORMED);
    t2 = (double)cvGetTickCount();
    timeCalc=(t2-t1)/((double)cvGetTickFrequency()*1000\. * 1000.0);
    cout << " OpenCV matchtemplate using cross-correlation Valid: " << timeCalc << endl; 
```

# java - 正则表达式用一个替换 2 个字符

> ID：13009954
> 
> 赞同：0
> 
> 时间：2012-10-22T10:55:49.623
> 
> 标签：java, regex, string

我想对以下问题使用正则表达式：

```
SOME_RANDOM_TEXT 
```

应转换为：

```
someRandomText 
```

因此，_(any char) 应该只替换为大写字母。我发现了类似的东西，使用该[工具](http://gskinner.com/RegExr/)：

```
_\w and $& 
```

如何仅从替换中获取第二个字母？有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T10:59:29.590

`String.split("_")`简单地然后重新加入可能更容易，将集合中每个字符串的第一个字母大写。

请注意，Apache Commons 有很多有用的与字符串相关的东西，包括[join(](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html#join%28java.util.Collection,%20java.lang.String%29) ) 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T11:34:19.257

问题是[Java.util.regex.Pattern](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html "模式类")不支持从小写到大写的大小写转换 这意味着您需要按照 Brian 的建议以编程方式进行转换。另请参阅[此线程](https://stackoverflow.com/questions/1143951/what-is-the-simplest-way-to-convert-a-java-string-from-all-caps-words-separated)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-22T11:08:53.783

您也可以编写一个简单的方法来执行此操作。它更复杂但更优化：

```
public static String toCamelCase(String value) {
    value = value.toLowerCase();
    byte[] source = value.getBytes();
    int maxLen = source.length;
    byte[] target = new byte[maxLen];
    int targetIndex = 0;

    for (int sourceIndex = 0; sourceIndex < maxLen; sourceIndex++) {
        byte c = source[sourceIndex];
        if (c == '_') {
            if (sourceIndex < maxLen - 1)
                source[sourceIndex + 1] = (byte) Character.toUpperCase(source[sourceIndex + 1]);
            continue;
        }

        target[targetIndex++] = source[sourceIndex];
    }

    return new String(target, 0, targetIndex);
} 
```

我喜欢 Apache 公共库，但有时了解它的工作原理并能够为这样的工作编写一些特定的代码是件好事。

# windows - FTP：上传文件到FTP并验证

> ID：13009967
> 
> 赞同：1
> 
> 时间：2012-10-22T10:56:24.100
> 
> 标签：windows, batch-file, vbscript, ftp

我正在使用 VBS

1.  上传文件到 FTP
2.  验证上传过程

我正在使用创建文本文件的方法，用适当的命令填充它，然后在 Windows 中使用 ftp.exe 执行它。

```
 FTPCommand = "%systemroot%\System32\ftp.exe -s:session.txt"
            FTPCommand = objshell.ExpandEnvironmentStrings(FTPCommand)
            objshell.Run FTPCommand,, vbTrue
            fso.DeleteFile "session.txt", vbTrue 
```

第 1 部分使用以下代码完成：

```
 Set SessionFile = fso.OpenTextFile("session.txt", 2, vbTrue)
            With SessionFile
                .WriteLine "open  abcd.com"
                .WriteLine "username"
                .WriteLine "pwd"
                .WriteLine "cd /Test/Test1"
                .WriteLine "put """ & File.Path & """"
                .WriteLine "quit"
                .Close
            End With

            FTPCommand = "%systemroot%\System32\ftp.exe -s:session.txt"
            FTPCommand = objshell.ExpandEnvironmentStrings(FTPCommand)
            objshell.Run FTPCommand,, vbTrue
            fso.DeleteFile "session.txt", vbTrue 
```

第 2 部分是使用以下代码完成的：

```
 Set SessionFile = fso.OpenTextFile("session.txt", 2, vbTrue)
            With SessionFile
                .WriteLine "open  abcd.com"
                .WriteLine "username"
                .WriteLine "pwd"
                .WriteLine "cd /Test/Test1"
                .WriteLine "ls"
                .WriteLine "close"
                .WriteLine "bye"
                .Close
            End With
            FTPCommand = "%systemroot%\System32\ftp.exe -s:session.txt"
            FTPCommand = objshell.ExpandEnvironmentStrings(FTPCommand)

            set ObjExec=objshell.exec(FTPCommand)
            DO WHILE ObjExec.status=0 : wscript.sleep 50 : LOOP
            StrTemp=ObjExec.stdout.readall

            IF instr(1,StrTemp,File.Name,1)<>0 THEN
                AlertMessage = AlertMessage & vbTab & "STATUS: UPLOAD SUCCESSFUL" & vbCrLf & vbCrLf
            ELSE
                AlertMessage = AlertMessage & vbTab & "STATUS: UPLOAD FAILED" & vbCrLf & vbCrLf
            END IF
            fso.DeleteFile "session.txt", vbTrue 
```

问题是（在第 2 部分代码中）之后的代码

```
 DO WHILE ObjExec.status=0 : wscript.sleep 50 : LOOP 
```

永远不会返回。因此文件被上传，但检查状态的代码永远不会返回。
session.txt 文件没有被删除，当我执行命令时

```
%systemroot%\System32\ftp.exe -s:session.txt 
```

手动它确实向我显示了文件列表（因为 ls 命令）。

我有3个问题：

1.  为什么它不返回。从哪里开始调试？
2.  无论如何我可以上传文件并检查它的状态（可能是通过“put”命令之后的 ftp 命令返回的错误代码）。
3.  代码中是否指定了不正确的目录来上传文件，cd 命令失败并且它错误地将文件“放入”根文件夹中。检查文件上传的代码也是如此。所以即使指定的目录错误，程序也会返回成功

**编辑1：** 我尝试使用

```
.WriteLine "cd /Test" 
```

它奏效了。是目录切换（两个文件夹深）导致问题吗？

**编辑 2：** 我手动运行 ls 命令，它运行良好。输出是：

```
226 Transfer complete.
ftp: 586493 bytes received in 4.28Seconds 137.00Kbytes/sec. 
```

586493 字节是否太多了？

我相信问题可能是：
1）LS命令返回的文件数量很大。
2）我正在访问的目录结构。

**编辑：3** 从这个[微软](http://support.microsoft.com/kb/960246)网站看来，上面的第 1 点是罪魁祸首：

> 控制台应用程序的 StdOut 和 StdErr 流共享相同的内部 4KB 缓冲区。此外，WshScriptExec 对象仅提供对这些流的同步读取操作。同步读取操作在从这些流读取的调用脚本和写入这些流的子进程之间引入了依赖关系，这可能导致死锁情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T07:18:48.203

我相信问题在于您从流程中读取标准输出的方式。我成功地使用了这种技术如下，对不起，我没有时间调整你的脚本并尝试一下，所以这取决于你。

以下执行 ping 以检查服务器是否在线。

```
Function IsOnline(Address) 
  Dim strText 
  IsOnline = False 
  Set oExecObj = oShell.Exec("%comspec% /c ping -a -n 1 -w 20 " & Address) 
  Do While Not oExecObj.StdOut.AtEndOfStream 
    strText = oExecObj.StdOut.ReadAll() 
    If Instr(strText, "Reply from") > 0 Then 
      IsOnline = True 
      Exit Function 
    End If 
  Loop 
End Function 
```

# android - 将文档上传到谷歌驱动器时丢失换行符

> ID：13009970
> 
> 赞同：0
> 
> 时间：2012-10-22T10:56:31.990
> 
> 标签：android, google-drive-api

将我的文档上传到谷歌驱动器时，我失去了换行符。将文档作为文本文件上传时，它可以工作：

```
 ByteArrayContent content = ByteArrayContent.fromString("text/plain", body);

    File uploadedFile =  drive.files().update(
            file.getId(), file, content).setSetModifiedDate(true).execute(); 
```

但是，当我添加 setConvert(true) 以将文件作为 Google 文档上传时，我会松开换行符。

```
 ByteArrayContent content = ByteArrayContent.fromString("text/plain", body);
    File uploadedFile =  drive.files().update(
            file.getId(), file, content).setConvert(true).setSetModifiedDate(true).execute(); 
```

我试图在我的字符串中添加不同类型的换行符（例如'\r'、'\n'，甚至尝试同时使用两者）。有人知道我做错了什么吗？

**编辑**

所以我发现我插入的新文件有效。正是当我更新文件内容时，我才松开了换行符。这是我的插入，它有效。

```
 ByteArrayContent content = ByteArrayContent.fromString("text/plain", body);
  drive.files().insert(file, content).setConvert(true).execute(); 
```

这是我的更新。现在我松开了换行符。

```
 ByteArrayContent content = ByteArrayContent.fromString("text/plain", body);
  File updatedFile =  drive.files().update(
            driveFile.getId(), driveFile, content).setConvert(true).execute(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:39:15.120

发现了问题。在更新文档之前，我下载了它的元数据：

```
File driveFile = drive.files().get(resourceID).execute(); 
```

此文件的 MIME 类型为 Google 文档。在更新之前，我必须将 mimetype 重置为“text/plain”

# c# - FluentNHibernate - 将外键映射为主键

> ID：13009973
> 
> 赞同：0
> 
> 时间：2012-10-22T10:56:37.310
> 
> 标签：c#, fluent-nhibernate, fluent-nhibernate-mapping

您好我正在尝试将数据库迁移到 ORM，但发现了一个问题。数据库是用继承的概念创建的，其中有一个父表和几个继承其属性的子表。为了方便使用 INNER JOIN 进行查询，所有子表只包含对父表标识的引用（同时是主键的外键）。遵循模型：

```
BaseDocument
{
    Id : Long
    ...
}

AdministrativeDocument
{
    Id : Long (PK), (FK : BaseDocument(Id))
    ...
}

PropositionDocument
{
    Id : Long (PK), (FK : BaseDocument(Id))
    ...
}

ProjectDocument
{
    Id : Long (PK), (FK : BaseDocument(Id))
    ...
} 
```

我的问题是：有没有办法创建一个映射，其中外键也是带有 C# 的 FluentNHibernate 中的主键，还是我必须为每个表创建单独的主键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T05:47:45.640

每个类继承层次结构都有一个标准表。就这样映射它

```
// inherit
class AdministrativeDocument : Document { }

// base class mapping
class DocumentMap : ClassMap<Document>
{
    public DocumentMap()
    {
        Id(x => x.Id, "Id")...;
    }
}

// subclass mapping, same for all three subtables
class AdministrativeDocumentMap : SubclassMap<AdministrativeDocument>
{
    public AdministrativeDocumentMap()
    {
        KeyColumn("Id");
    }
} 
```

# jquery - 当 jQuery ajax 超时时，我想运行一个函数

> ID：13009977
> 
> 赞同：1
> 
> 时间：2012-10-22T10:56:41.227
> 
> 标签：jquery

> **可能重复：**
> [jquery $.ajax 超时设置](https://stackoverflow.com/questions/3543683/jquery-ajax-timeout-setting)

超时有效，但是当超时发生时，我想执行一个函数。你有什么想法吗？

```
$.ajax({
    type: "GET", 
    url: "xajax.php", 
    timeout: 100, 
    data: "name=John&location=Boston", 
    success: function(msg) {
        alert( "Data Saved: " + msg );
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T10:59:18.843

超时将作为错误的一部分抛出，您可以检查错误原因是否超时并在那里调用您的函数！

错误处理程序的三个参数是 xmlhttprequest、textstatus 和 message。发生超时时，状态 arg 将为“超时”。

```
$.ajax({
    type: "GET", 
    url: "xajax.php", 
    timeout: 100, 
    data: "name=John&location=Boston", 
    success: function(msg){ alert( "Data Saved: " + msg ); }
    error: function(xmlhttprequest, textstatus, message) {
        if(textstatus==="timeout") {
            alert("Timeout happened"); //run function here!
        } else {
            alert(textstatus);
        }
    }
});​ 
```

可能的值为`textstatus`（忽略空值）“超时”、“错误”、“未修改”和“解析错误”。

相关文档位于[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:59:33.887

使用完整：

> 请求完成时要调用的函数（在执行成功和错误回调之后）。该函数传递了两个参数：jqXHR（在 jQuery 1.4.x 中，XMLHTTPRequest）对象和一个对请求状态进行分类的字符串（“success”、“notmodified”、“error”、**“timeout”**、“abort”或“解析器错误”）。从 jQuery 1.5 开始，完整的设置可以接受一个函数数组。每个函数都会被依次调用。这是一个 Ajax 事件。

或错误：

> 请求失败时调用的函数。该函数接收三个参数：jqXHR（在 jQuery 1.4.x 中，XMLHttpRequest）对象，一个描述发生的错误类型的字符串和一个可选的异常对象（如果发生）。第二个参数的可能值（除了 null）是**“timeout”**、“error”、“abort”和“parsererror”。发生 HTTP 错误时，errorThrown 会接收 HTTP 状态的文本部分，例如“未找到”或“内部服务器错误”。从 jQuery 1.5 开始，错误设置可以接受一个函数数组。每个函数都会被依次调用。注意：跨域脚本和 JSONP 请求不调用此处理程序。这是一个 Ajax 事件。

这是一个使用完整的示例：

```
 $.ajax({ 
    type: "GET", 
    url: "xajax.php", 
    timeout: 100, 
    data: "name=John&location=Boston", 
    success: function(msg){ alert( "Data Saved: " + msg ); },
    complete: function(jqXHR, textStatus) { 
        if (textStatus == "timeout") {
           alert('timeout');
        }
    }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T11:00:02.540

看看[完整](http://api.jquery.com/jQuery.ajax/)的功能

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

> complete(jqXHR, textStatus) 请求完成时调用的函数（在执行成功和错误回调之后）。该函数获得两个参数：jqXHR（在 jQuery 1.4.x 中，XMLHTTPRequest）对象和一个对请求状态进行分类的字符串（“成功”、“未修改”、“错误”、“超时”、“中止”或“解析器错误”）。从 jQuery 1.5 开始，完整的设置可以接受一个函数数组。每个函数都会被依次调用。这是一个 Ajax 事件。

```
$.ajax({ 
   type: "GET", 
   url: "xajax.php", 
   timeout: 100, 
   data: "name=John&location=Boston",
   success: function(msg){ alert( "Data Saved: " + msg ); }, 
   complete: function(jqXHR, textStatus) {
        if (textStatus === "timeout") {
            alert("timeout");
        }
   } 
```

# jetty - sbt-web-plugin：使用 configurationXml 指定码头的类路径

> ID：13009979
> 
> 赞同：1
> 
> 时间：2012-10-22T10:56:47.300
> 
> 标签：jetty, sbt, xsbt-web-plugin

我尝试在使用 sbt-web-plugin （用于运行`container:start`）时为码头创建自定义配置。有[两个容器设置](https://github.com/siasia/xsbt-web-plugin/wiki/Settings)允许指定自定义码头 xml 配置：`configurationFiles`和`configurationXml`（何时`customConfiguration`为真）。

但是，这完全覆盖了由 sbt-web-plugin 完成的码头内部配置，因此自定义配置应该完全配置码头。如果不指定从项目和依赖项编译的 .class 文件的类路径，它将无法工作。

我试图做这样的事情：

```
configurationXml in container.Configuration <<= fullClasspath (
  <Configure id="Server" class="org.eclipse.jetty.server.Server">
    ...
    <Set name="handler">
      <New class="org.eclipse.jetty.webapp.WebAppContext">
        <Set name="resourceBase"><SystemProperty name="jetty.home" default="."/>/src/main/webapp</Set>
        <Set name="descriptor"><SystemProperty name="jetty.home" default="."/>/src/main/webapp/WEB-INF/web.xml</Set>
        <Set name="contextPath">/</Set>
        <Set name="extraClasspath">{/* classpath should be here */}</Set>
      </New>
    </Set>
    ...
  </Configure>
) 
```

似乎不可能直接依赖`configurationXml`on ，因为[is](https://github.com/siasia/xsbt-web-plugin/blob/fe9ea5388c73ad4e8d28fd244e074322e023c9b5/src/main/scala/com/github/siasia/PluginKeys.scala#L26)和[is](https://github.com/harrah/xsbt/blob/v0.12.0/main/Keys.scala#L237)：`fullClasspath`[`configurationXml``SettingKey`](https://github.com/siasia/xsbt-web-plugin/blob/fe9ea5388c73ad4e8d28fd244e074322e023c9b5/src/main/scala/com/github/siasia/PluginKeys.scala#L26)[`fullClasspath``TaskKey`](https://github.com/harrah/xsbt/blob/v0.12.0/main/Keys.scala#L237)

> [具有依赖关系的任务](http://www.scala-sbt.org/release/docs/Getting-Started/More-About-Settings.html#tasks-with-dependencies)
> 
> 这样做的实际重要性是，您不能将任务作为非任务设置的依赖项。

是否可以在参数中包含`fullClasspath`设置`configurationXml`？

如果没有，是否仍然可以将自定义配置设置添加到调用的码头开发服务器`container:start`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-23T23:31:48.427

您可以`WebAppContext`使用以下`env`设置自定义：

```
env in Compile := Some(file(".") / "jetty-env.xml" asFile) 
```

例如，考虑*myproject/jetty-env.xml*中的以下内容：

```
<Configure class="org.eclipse.jetty.webapp.WebAppContext">
  <Set name="contextPath">/custom</Set>
</Configure> 
```

这将在上下文路径*/custom*下部署您的 webapp ，但不会更改底层的任何配置`Server`。

# mysql - MySQL 变量错误

> ID：13009982
> 
> 赞同：0
> 
> 时间：2012-10-22T10:57:02.707
> 
> 标签：mysql, sql, variables

这是不起作用的代码：

```
DECLARE @myTable TABLE (colName nvarchar(500), tableName nvarchar(500))

insert into @myTable

SELECT c.COLUMN_NAME AS colName, c.TABLE_NAME AS tableName, TABLE_SCHEMA tableSchema 
FROM information_schema.COLUMNS as c 
WHERE c.COLUMN_NAME like '%password%'

select * from @myTable 
```

我的错误是：

> [错误] 脚本行：1-7 -------------- 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 'DECLARE @myTable TABLE (colName nvarchar(500), tableName nvarchar(500)) 附近使用正确的语法

```
insert ' at line 1 
```

有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:12:14.640

Mysql有点不同：

```
create table myTable (colName nvarchar(500), tableName nvarchar(500));

insert into myTable (colName, tableName)
    SELECT COLUMN_NAME, TABLE_NAME
    FROM information_schema.COLUMNS
    WHERE COLUMN_NAME like '%password%';

select * from myTable; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:10:06.973

你可以试试这个

```
 insert into myTable  

 SELECT c.COLUMN_NAME AS colName, c.TABLE_NAME AS tableName 
 FROM information_schema.COLUMNS as c 
 WHERE c.COLUMN_NAME like '%password%' 
```

# macos - 使用向下命令击键“1” - 发出哔哔声而不是工作

> ID：13009986
> 
> 赞同：0
> 
> 时间：2012-10-22T10:57:20.297
> 
> 标签：macos, focus, applescript

我正在编写一个简单的applescript，它应该关注一个应用程序并单击“cmd+1”。

这是我写的：

```
tell application "System Events"
    tell application process "appname"
        --Lobby focus
        activate
        keystroke "1" using command down
    end tell
end tell 
```

但不是正常工作，而是发出一声哔哔声，应用程序甚至没有集中注意力。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:39:50.397

你不能告诉进程激活。将其更改为`set frontmost to true`：

```
tell application "System Events"
    set frontmost of process "Finder" to true
    keystroke "1" using command down
end tell 
```

或者告诉应用程序激活：

```
activate application "Finder"
tell application "System Events"
    keystroke "1" using command down
end tell 
```

如果应用程序没有打开的窗口，则`reopen`打开一个新的默认窗口：

```
tell application "Finder"
    reopen
    activate
end tell
tell application "System Events"
    keystroke "1" using command down
end tell 
```

# php - 防止 LAMP 环境中的进程泄漏

> ID：13009990
> 
> 赞同：0
> 
> 时间：2012-10-22T10:57:32.087
> 
> 标签：php, javascript, apache, magento

我使用 Magento 应用程序，我处于以下情况：

当用户加载一些具有 mutch 信息/jquery 的商店需要大量服务器进程时，如果用户按 F5 刷新商店 mutch 次，则服务器变得太慢且难以使用商店。

我需要防止这个 F5 'hack' 减慢我的服务器，我能做什么？我认为某种 javascript/php 解决方案。

但我想要你的意见。

一切都提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:58:54.637

你想处理这个服务器端。根据您的 PHP/webserver 安装，您可以限制并发请求的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T16:08:26.807

我发现了一些东西。

[http://sourceforge.net/projects/iosec/](http://sourceforge.net/projects/iosec/)

做好工作

# javascript - 修复按钮

> ID：13009995
> 
> 赞同：0
> 
> 时间：2012-10-22T10:57:45.630
> 
> 标签：javascript, jquery, application-restart

```
if($('.click').one('click')){
        $('.click').click(function(){
            $('.mainContent').animate(
                {"height":"+=620px"},
                800,
                'easeInBack');
            $('.eneButton').animate(
                { "top":"+=310px"},
                1500,
                'easeInOutExpo');
            $('.eneButton').animate(
                {"left":"-=310px"},
                1500,
                'easeInOutExpo')
            $('.giardButton').animate(
                {"top":"+=620px"},
                2000,
                'easeInOutExpo')
            $('.giardButton').animate(
                {"left":"-=620px"},
                2000,
                'easeInOutExpo');
            $('.click').off('click');
        })
    }  
    if ($('.close').one('click')){
        $('.close').click(function(){
        $('.content, .sec').fadeOut(250);

            $('.eneButton').animate(
                {"left":"+=310px"},
                1500,
                'easeInOutExpo')
            $('.eneButton').animate(
                { "top":"-=310px"},
                1500,
                'easeInOutExpo');

            $('.giardButton').animate(
                {"left":"+=620px"},
                2000,
                'easeInOutExpo');
            $('.giardButton').animate(
                {"top":"-=620px"},
                2000,
                'easeInOutExpo');

            $('.mainContent').animate(
                {"height":"-=620px"},
                3500,
                'easeInBack');
            $('.click').on('click');
    })

    } 
```

动画在两种方式上都可以正常工作，但我需要用户可以在动画关闭时再次重新启动动画。正如您从代码中看到的那样，您单击一次并开始动画，然后您选择一个类别列表，您可以像在 Windows 中一样单击“X”来关闭这些类别，当您这样做时，动画再次开始，直到所有外观就像一开始一样。现在，如果我再次单击它，动画将不再开始。

任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:39:10.397

好的，我找到的解决方案是：

```
$(document).ready(function(){
    $('.click').live('click', function(){
        $('.mainContent').animate(
            {"height":"+=620px"},
            800,
            'easeInBack');
        $('.eneButton').animate(
            { "top":"+=310px"},
            1500,
            'easeInOutExpo');
        $('.eneButton').animate(
            {"left":"-=310px"},
            1500,
            'easeInOutExpo');
        $('.giardButton').animate(
            {"top":"+=620px"},
            1500,
            'easeInOutExpo');
        $('.giardButton').animate(
            {"left":"-=620px"},
            1500,
            'easeInOutExpo');
        //remove the class .click when the animation is done
        //so that the animation, even if you click wont start again
        $('.click').removeClass('click');
    });

$('.close').live('click', function(){
    $('.content, .sec').fadeOut(250)

        $('.giardButton').animate(
            {"left":"+=620px"},
            1500,
            'easeInOutExpo');
        $('.giardButton').animate(
            {"top":"-=620px"},
            1500,
            'easeInOutExpo');

        $('.eneButton').animate(
            {"left":"+=310px"},
            1500,
            'easeInOutExpo');
        $('.eneButton').animate(
            { "top":"-=310px"},
            1500,
            'easeInOutExpo');

        $('.mainContent').animate(
            {"height":"-=620px"},
            2750,
            'easeInBack');
        //Add class .click to #nav ul li so that when the closing animation
        //is done you can restart all from the begin
        $('#nav ul li').addClass('click');
    });
}); 
```

如您所见，我删除了 .one() 函数并使用了 .live()，在第一个动画结束时，我使用 .removeClass('click') 删除了所有动画类，并在结束时最后一个动画，关闭动画，当一切都关闭时，我再次添加带有 $('#nav ul li').addClass('click') 的类，以便在单击按钮时，动画可以从头重新开始.