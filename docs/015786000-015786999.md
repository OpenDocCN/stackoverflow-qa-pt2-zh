# StackOverflow 问答 15786000-15786999

# android - 多个 SeekBar's - 全部显示最后一个 SeekBars 值

> ID：15786006
> 
> 赞同：1
> 
> 时间：2013-04-03T11:24:07.443
> 
> 标签：android, progress-bar, seekbar

我在一个布局中有多个 SeekBar（手机上有 3 个，平板电脑上有 8 个）。我有一个自定义的拇指和背景，所以它们显示为一个比例。有一个侦听器可以检测值何时更改（每个 SeekBars 一个），以及是否有 Thumb Drawable 更改为不同的颜色。这一切都在工作。

什么不起作用，将每个 SeekBar 设置为保存的值。如果我设置了第一个 SeekBar，那就没问题了。如果我设置第二个和第一个，它们都显示第二个 SeekBar 的值。如果我添加第三个、第四个等，这也是一样的。下面是我用来设置 SeekBar 值的代码

```
mSeekBarOne.setProgress(mSavedValues.value1);
mSeekBarTwo.setProgress(mSavedValues.value2);
mSeekBarThree.setProgress(mSavedValues.value3); 
```

我不知道这里发生了什么，或者如何解决这个问题。我尝试在每个 SeekBar 设置后请求布局传递，但不起作用。

最后，当我打印出每个 SeekBar 的值时，它实际上是正确的！这纯粹是一个视觉问题。也许我错过了文档中的一些内容，即多个 SeekBar（或 ProgressBar）不能在一个布局中，但我已经搜索并没有发现任何内容。

任何帮助将不胜感激。

编辑：只有在我在每个 SeekBar 上设置进度值后更改 Thumb Drawable 时才会出现此问题。我通过检查进度来更改 Thumb Drawable，如果它与原始值不同，则将 Thumb Drawable 设置为另一个（不同的颜色）。

亚当

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:44:46.500

看来问题是我使用的 Drawable 被缓存在类中。正因为如此，SeekBar 显示的是 Drawable 最后一次更新的位置，也就是最后一个 SeekBar 位置。

我认为这是我在本地缓存 Drawable 时误解的错误，而不是每个 SeekBar 使用不同的 drawable。关于为什么会这样的更好解释会帮助我很多，但至少它是固定的。

# nancy - 是否可以将简单的请求数据绑定到 NancyFX 中的方法调用？

> ID：15786009
> 
> 赞同：3
> 
> 时间：2013-04-03T11:24:16.337
> 
> 标签：nancy

我正在向 Nancy 模块发送一些简单的用户详细信息。我正在利用 Nancy 的模型绑定功能从请求中获取用户详细信息并将它们传递给我的`UserService.Add(...)`方法，如下所示：

**南希模块**

```
Post["/add"] = parameters =>
{
    var user = this.Bind<UserDetails>();
    UserService.Add(user);
    return HttpStatusCode.OK;
}; 
```

**用户详细信息类**

```
public class UserDetails
{
    public string UserName { get; set; }
    public string Password { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Email { get; set; }
} 
```

**用户服务**

```
public static void Add(UserDetails user)
{
    //Add the user     
} 
```

这在 Nancy 模块中有效并使得语法更简洁。然而，这意味着我不得不创建一个数据传输 (DTO) 类，只是为了收集请求有效负载。

*是否有可能完全避免这个中间类？除了将类绑定到有效负载之外，是否可以绑定方法参数？*

这将给出可能看起来像这样的代码：

**南希模块**

```
Post["/add"] = parameters =>
{
    this.BindAndCall<UserService>("Add");
    return HttpStatusCode.OK;
}; 
```

**用户服务**

```
public static void Add(string  firstName, string  lastName, string email, string userName, string password)
{
    //Add the user     
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T12:19:39.387

您始终可以创建一些扩展方法或自定义绑定器，但随后您将服务的内部实现与有效负载参数的确切命名耦合，这不好，因为稍后当您的服务更改时，您需要更改有效载荷或跳槽箍。DTO 没有任何问题，创建它不需要任何成本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T14:13:34.047

**ParameterBag - DTO 扩散的部分解决方案**

在我看来，DTO 很痛苦，因为它们往往会扩散到影子域中。当您决定重新组织服务层时，这会让人头疼。

那么，为什么不直接使用`dynamic`类型而忘记 DTO 和强类型路由参数呢？动态值非常方便，但它们有自己的问题，主要是你不能将它们传递给扩展方法。所以更容易正确地呈现路线参数，因此模型绑定，因此 DTO 和因此意大利面条和愚蠢的帽子。

所以这里有一个部分解决方案依赖于 Nancy 的*Model Binding*。它显着减少了路由级别的仪式，并有助于遏制恼人的 DTO 扩散。

**南希基本模块**

```
public class _BaseModule : NancyModule
{
    public class ParameterBag
    {
        // All the params used across all routes, GET and POST
        public string UserName { get { return this.Value; } }
        public string UserIds { get; set; }
        public string UserId { get; set; }
        public string Value { get; set; }
        public int Skip { get; set; }
        public int Take { get; set; }
    }

    public ParameterBag Params;

    public _BaseModule(): this(""){}
    public _BaseModule(string modulePath): base(modulePath)
    {
        Before += ctx =>
        {
            this.Params = this.Bind<ParameterBag>();
            return null;
        };
    }
} 
```

该类`ParameterBag`包含我有兴趣跨*所有路由绑定的所有**参数*。由于 Nancy 只有在有效负载中找到匹配字段时才会填充属性，因此您可以根据需要向此类添加任意数量的属性，而无需关心它们是否会被给定路由使用。

 *注意绑定是如何在`Before`钩子中发生的。这意味着每个路由（从 派生的`_BaseModule`）都会自动将任何匹配的参数值绑定到通用`ParameterBag`类属性。不需要特定的路由级干预。

这样做的效果是为路由处理程序提供了一个可以使用的强类型参数值。

**南希模块**

```
public class UserModule : _BaseModule
{
    public UserModule()
    {
        // handlers go here
    }
} 
```

**路由处理程序示例**

```
Get["/user/{userid}/username/available"] = _ =>
{
    return Response.AsJson(new 
        { 
            // the username is a hidden value
            // the userid comes from the url
            value = Params.UserName,
            valid = UserService.UserNameAvailable(Params.UserName, Params.UserId)
        }
    );
}; 
```

**示例用法**

下面的示例依赖于[jqBootstrapValidation](http://reactiveraven.github.io/jqBootstrapValidation/)。它展示了 Binding 技巧如何适用于 URL 上提供的参数数据，*并*作为 ajax 有效负载的一部分提供（请参阅 value 属性）。

```
<input 
    type="text" 
    id="username" 
    name="username" 
    placeholder="User Name" 
    data-validation-ajax-ajax="/user/@user.id/username/available" 
    data-validation-ajax-message="This name has already been taken" 
    value="@user.UserName" 
    required> 
```*

# opencv - 如何使用 PIL 使图像中的文本更清晰？

> ID：15786012
> 
> 赞同：2
> 
> 时间：2013-04-03T11:24:29.360
> 
> 标签：opencv, image-processing, python-imaging-library, ocr

我正在使用 PIL、OpenCV 和 OCR 阅读器从图像中读取文本。我面临的最大问题是在图像处理方面使文本足够清晰，以便 OCR 阅读器更容易/准确地提取。

为此，我想增加对比度/亮度并使用 PIL 进行直方图均衡化，但这也无济于事。

那么，您建议如何使文本看起来更清晰以便更好地提取文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:37:16.647

PIL 具有[锐化和边缘增强过滤器](http://www.pythonware.com/library/pil/handbook/imagefilter.htm)。这是你想要的吗？显示您正在处理的内容的示例图像会很有帮助。

您的图像背景颜色不均匀，这可能会导致问题。尝试查看[此解决方案](https://stackoverflow.com/questions/4632174/what-processing-steps-should-i-use-to-clean-photos-of-line-drawings/4632685#4632685)以创建漂亮的水平黑白图像。

但是黑领也会引起问题，你应该看看如何剪掉它。

也就是说，我通过一个简单的 PIL SHARPEN 过滤器得到了合理的改进：

SHARPEN 过滤器后的 tesseract 结果：

> 从我所学到的观察人的内心，^我已经确定人类在某些方面是“介于飓风和冰块之间}的地方，永远神秘，但在其他方面——只要有足够的科学和仔细的探索，就更容易理解了。认为我们已经达到了人类知识的极限，就像认为我们可以知道一切一样愚蠢。仍然有足够的空间来变得更好，甚至可以向死者提出问题，从知道我们简单的确定性何时错误中学习。

没有过滤器的结果：

> 从我学到的 lnnkmg wade maple} Fve deculed lunnuan wlng;. 埃尔'。.ywr-a' 是`between a luurrlctuvr null llva la`全部。一个。`I ll respects, permanently unyst:-rwnt`毫升 ln 毫秒。re 有足够的场景）和 turutul pmlulng l~m.rely 易懂。他会非常感谢我们已经达到了人类知识的极限，因为他认为我们可以知道一切。还有足够的空间来变得更好，甚至可以问死者的问题，当我们简单的确定性错误时，可以从知识中学习。

# python - 在执行和清除内存时解析子进程的输出（Python 2.7）

> ID：15786016
> 
> 赞同：0
> 
> 时间：2013-04-03T11:24:31.913
> 
> 标签：python, subprocess, popen

我需要解析由产生大量数据的外部程序（第三方，我无法控制）产生的输出。由于输出的大小大大超过了可用内存，我想在进程运行时解析输出，并从内存中删除已经处理过的数据。

到目前为止，我做了这样的事情：

```
import subprocess

p_pre = subprocess.Popen("preprocessor",stdout = subprocess.PIPE) 
# preprocessor is an external bash script that produces the input for the third-party software
p_3party = subprocess.Popen("thirdparty",stdin = p_pre.stdout, stdout = subprocess.PIPE)

(data_to_parse,can_be_thrown) = p_3party.communicate()

parsed_data = myparser(data_to_parse) 
```

当“第三方”输出足够小时，这种方法有效。但正如 Python 文档中所述：

> 读取的数据是缓存在内存中的，所以如果数据量很大或者没有限制，不要使用这种方法。

我认为更好的方法（实际上可以让我节省一些时间）`data_to_parse`是在生成时开始处理，并且在正确完成解析时“清除”`data_to_parse`删除已经解析的数据。

我还尝试使用 for 循环，例如：

```
parsed_data=[]
for i in p_3party.stdout:
    parsed_data.append(myparser(i)) 
```

但它卡住了，无法理解为什么。

所以我想知道实现这一目标的最佳方法是什么？有哪些需要注意的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:38:17.730

您可以使用 subprocess.Popen() 创建一个从中读取行的蒸汽。

```
import subprocess

stream = subprocess.Popen(stdout=subprocess.PIPE).stdout

for line in stream:
    #parse lines as you recieve them.
    print line 
```

您可以将这些行传递给您的`myparser()`方法，或者将它们附加到一个列表中，直到您准备好使用它们......无论如何。

* * *

在您的情况下，使用两个子流程，它会像这样工作：

```
import subprocess

def method(stream, retries=3):
    while retries > 0:
        line = stream.readline()
        if line:
            yield line
        else:
            retries -= 1

pre_stream = subprocess.Popen(cmd, stdout=subprocess.PIPE).stdout
stream = subprocess.Popen(cmd, stdin=pre_stream, stdout=subprocess.PIPE).stdout

for parsed in method(stream):
    # do what you want with the parsed data.
    parsed_data.append(parsed) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T11:51:46.623

像 in 一样迭代文件`for i in p_3party.stdout:`使用预读缓冲区。该`readline()`方法使用管道可能更可靠——AFAIK它逐个字符地读取。

```
while True:
    line = p_3party.stdout.readline()
    if not line:
        break
    parsed_data.append(myparser(line)) 
```

# php - Tcpdf - 启用滚动

> ID：15786018
> 
> 赞同：2
> 
> 时间：2013-04-03T11:24:41.293
> 
> 标签：php, pdf, adobe, tcpdf, adobe-reader

tcpdf 中是否有任何类可以使页面显示-> 启用滚动默认选项（当我在 adobe 阅读器中打开它时），请帮忙，我在这上面浪费了半天时间。我找到了这门课，但不是我需要的。

```
// set pdf viewer preferences
$pdf->setViewerPreferences($preferences); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-11T09:08:07.357

我一直在寻找相同的答案，而您的问题实际上使我走上了正轨。

通过检查 TCPDF 类，最终在 TCPDF_STATIC 类中的静态方法 TCPDF_STATIC::getPageLayoutMode() 中找到了答案。

正确使用的函数是 TCPDF::SetDisplayMode($zoom, $layout, $mode)。为了您的目的，我建议：

```
$pdf->SetDisplayMode('default','OneColumn');
或者
$pdf->SetDisplayMode('default','continuous'); // 连续没有记录，虽然应该可以工作。

```

这些参数的可能值如下（来自方法的 PHPdoc）：

*   $zoom
    要使用的缩放。它可以是以下字符串值之一，也可以是指示要使用的缩放因子的数字。
    *   fullpage：在屏幕上显示整个页面
    *   fullwidth：使用窗口的最大宽度
    *   real：使用真实尺寸（相当于 100% 缩放）
    *   默认：使用查看器默认模式
*   $layout
    页面布局。可能的值为：
    *   SinglePage 一次显示一页
    *   OneColumn 在一列中显示页面
    *   TwoColumnLeft 分两列显示页面，奇数页在左边
    *   TwoColumnRight 分两列显示页面，奇数页在右边
    *   TwoPageLeft (PDF 1.5) 一次显示两页，奇数页在左边
    *   TwoPageRight (PDF 1.5) 一次显示两页，奇数页在右边
*   $mode
    一个名称对象，指定文档在打开时应如何显示：
    *   UseNone 文档大纲和缩略图图像均不可见
    *   UseOutlines 文档大纲可见
    *   UseThumbs 缩略图可见
    *   FullScreen 全屏模式，没有菜单栏、窗口控件或任何其他可见窗口
    *   UseOC (PDF 1.5) 可选内容组面板可见
    *   UseAttachments (PDF 1.6) 附件面板可见

```
    公共函数 SetDisplayMode($zoom, $layout='SinglePage', $mode='UseNone') {
        if (($zoom == 'fullpage') OR ($zoom == 'fullwidth') OR ($zoom == 'real') OR ($zoom == 'default') OR (!is_string($zoom)) ) {
            $this->ZoomMode = $zoom;
        } 别的 {
            $this->Error('缩放显示模式不正确：'.$zoom);
        }
        $this->LayoutMode = TCPDF_STATIC::getPageLayoutMode($layout);
        $this->PageMode = TCPDF_STATIC::getPageMode($mode);
    }

```

# java - JodaTime version1.2 计算天数

> ID：15786022
> 
> 赞同：0
> 
> 时间：2013-04-03T11:24:51.483
> 
> 标签：java, jodatime

我需要弄清楚如何使用 joda time 1.2 计算两个日期之间的天数（不，我不能使用更新的版本）。所以 Days 类还不存在。

我可以在几周和几天内做到这一点

```
(period.getWeeks()*7 + period.getDays()); 
```

但是当涉及到月份时，它们都有不同的天数，所以我不能做 period.getMonths()*30。

编辑：我也可以

```
(today.getDayOfYear() - oldDate.getDayOfYear()); 
```

但是当日期在不同年份时就会出现问题

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:45:48.307

查看 Joda Time[源代码](http://joda-time.sourceforge.net/xref/index.html)。[Days](http://joda-time.sourceforge.net/xref/org/joda/time/Days.html)的`daysBetween`方法定义为：

```
public static Days daysBetween(ReadableInstant start, ReadableInstant end) {
    int amount = BaseSingleFieldPeriod.between(start, end, DurationFieldType.days());
    return Days.days(amount);
} 
```

`BaseSingleFieldPeriod`，像 Days 一样，在 Joda Time 1.2 中不可用，但是，查看它在 1.2 中可用的[源](http://joda-time.sourceforge.net/xref/org/joda/time/base/BaseSingleFieldPeriod.html)类开始出现：

```
protected static int between(ReadableInstant start, ReadableInstant end, DurationFieldType field) {
    if (start == null || end == null) {
        throw new IllegalArgumentException("ReadableInstant objects must not be null");
    }
    Chronology chrono = DateTimeUtils.getInstantChronology(start);
    int amount = field.getField(chrono).getDifference(end.getMillis(), start.getMillis());
    return amount;
} 
```

所有这些类和方法都在 Joda Time 1.2 中可用，因此计算两个实例之间的天数类似于：

```
public static int daysBetween(ReadableInstant oldDate, ReadableInstant today) {
    Chronology chrono = DateTimeUtils.getInstantChronology(oldDate);
    int amount = DurationFieldType.days().getField(chrono).getDifference(today.getMillis(), oldDate.getMillis());
    return amount;
} 
```

# asp.net - 注销按钮在 ASP.NET 中无法正常工作

> ID：15786025
> 
> 赞同：0
> 
> 时间：2013-04-03T11:24:57.570
> 
> 标签：asp.net, events, button, logout

我的注销按钮的代码如下所示：

```
protected void ButtonLogout_Click(object sender, EventArgs e)
{
    Session["login"] = null;        
} 
```

我的页面的 onLoad 事件如下所示：

```
protected void Page_Load(object sender, EventArgs e)
{
    if ((string)Session["login"] != null)
    {
       ButtonLogout.Visible = true;
       // (...)
    }
    else
    {
        ButtonLogout.Visible = false;
        // (...)
    }
} 
```

我对这件事正常工作有疑问。我不知道发生了什么，所以我在 ButtonClick 和 PageLoad 事件中都设置了断点。我发现 PageLoad 事件首先执行（原文如此！），这就是为什么 ButtonLogout 在单击它后没有隐藏的原因。我可以简单地在 ButtonClick 事件中刷新页面，但我不确定单击 1 次按钮后两次加载页面是否正常。难道没有其他方法可以解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T11:29:55.567

问题在于页面生命周期以特定方式执行。基本来说，它是：

*   Page_Load
*   事件火
*   预渲染

可以找到更多详细信息 - [http://msdn.microsoft.com/en-us/library/ms178472.ASPx](http://msdn.microsoft.com/en-us/library/ms178472.ASPx)

如果您正在设置控件的可见性，您可以在 Pre_Render 页面事件中进行设置，此时按钮事件将触发并设置您需要的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T11:42:30.277

我建议您使用 asp.net LoginStatus 来处理它。并且不要忘记在用户注销时清除会话。检查[使用 LoginName 和 LoginStatus 控件](http://www.developer.com/net/asp/article.php/3655706/ASPNET-Tip-Using-the-LoginName-and-LoginStatus-Controls.htm)将对您有所帮助。

```
protected void HeadLoginStatus_LoggingOut(object sender, LoginCancelEventArgs e)
    {
        Session.Clear();//It clears the session when the user logged out.
        Session.Abandon();
        FormsAuthentication.SignOut();
    } 
```

# iphone - 无法通过在 ipad 中使用 OpenGL 获得精确的部分裁剪图像

> ID：15786026
> 
> 赞同：3
> 
> 时间：2013-04-03T11:24:59.387
> 
> 标签：iphone, ios, objective-c, ipad, opengl-es

在我的 Ipad 应用程序中，我使用 OpenGL 框架来裁剪图像。我对 OpenGL 不太熟悉。在我的应用程序中，我需要裁剪图像的一部分并将其显示在图像视图上。对于裁剪效果，我使用 OpenGL 框架。裁剪效果工作正常，但是当我将该图像分配给 imageview 时，会显示全黑图像而不是裁剪图像。我没有找到我出错的地方。如果有人在它上面工作，请指导我请发布/建议与我的要求相关的链接。

我正在使用此代码：_sourceImage 是捕获的图像。

```
-(void)showResult
{

   UIImage *imageCrop;
   float scaleCrop;
   if (_sourceImage.size.width >= IMAGEWIDTH)
   {
       scaleCrop = IMAGEWIDTH / _sourceImage.size.width;
       imageCrop = [ImageCropViewController scaleImage:_sourceImage with:CGSizeMake(_sourceImage.size.width*scaleCrop, _sourceImage.size.height*scaleCrop)];
   }
   else
   {
       scaleCrop = 1;
       imageCrop = _sourceImage;

   }

   float scale = _sourceImage.size.width / resizeImage.size.width * 2;
   IplImage *iplImage = [ImageCropViewController CreateIplImageFromUIImage:imageCrop] ;
   Quadrilateral rectan;

   rectan.point[0].x = _touchLayer.rectan.pointA.x*scale*scaleCrop;
   rectan.point[0].y = _touchLayer.rectan.pointA.y*scale*scaleCrop;

   rectan.point[1].x = _touchLayer.rectan.pointB.x*scale*scaleCrop;
   rectan.point[1].y = _touchLayer.rectan.pointB.y*scale*scaleCrop;

   rectan.point[2].x = _touchLayer.rectan.pointC.x*scale*scaleCrop;
   rectan.point[2].y = _touchLayer.rectan.pointC.y*scale*scaleCrop;

   rectan.point[3].x = _touchLayer.rectan.pointD.x*scale*scaleCrop;
   rectan.point[3].y = _touchLayer.rectan.pointD.y*scale*scaleCrop;

   IplImage* dest = cropDoc2(iplImage,rectan);

   IplImage *image = cvCreateImage(cvGetSize(dest), IPL_DEPTH_8U, dest->nChannels);
   cvCvtColor(dest, image, CV_BGR2RGB);
   cvReleaseImage(&dest);

   UIImage *tempImage = [ImageCropViewController UIImageFromIplImage:image withImageOrientation:_sourceImage.imageOrientation];
  [self crop:tempImage];
  cvReleaseImage(&image);

}
-(void)crop:(UIImage*)image
{    
   //Adjust the image size, to scale the image to 1013 of width
   float targetWidth = 1000.0f;
   float scale = targetWidth / image.size.width;
   float scaleheight = image.size.height * scale;
   UIImage *imageToSent = [ImageCropViewController scaleImage:image with:CGSizeMake(targetWidth, scaleheight)];
   // Image data with compression
   imageData = UIImageJPEGRepresentation(imageToSent,0.75);
   NSDate *now = [NSDate dateWithTimeIntervalSinceNow:0];
   NSString *caldate = [now description];
   appDelegate.imagefilePath= [NSString stringWithFormat:@"%@/%@.jpg", DOCUMENTS_FOLDER,caldate];
   [imageData writeToFile:appDelegate.imagefilePath atomically:YES];

   appDelegate.cropimage=imageToSent;

} 
```

![在此处输入图像描述](https://i.stack.imgur.com/yp0tM.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:32:57.420

黑色通常意味着您未能从 OpenGL 中提取数据，并且您最终得到一个空白图像。

您如何从 OpenGL 中获取图像？OpenGL 不适用于普通图像 - 您必须发出自定义 OpenGL 调用才能拉入图像。

# amazon-ec2 - Amazon EC2 IP 未在新实例上解析

> ID：15786033
> 
> 赞同：0
> 
> 时间：2013-04-03T11:25:19.527
> 
> 标签：amazon-ec2, ip, hosting, resolve

我正在创建一个备份机器，以便在我的活动机器旁边同时运行。我创建了实例和卷的镜像副本，但由于某种未知原因，当我转到 IP 地址时，我收到“无法显示页面”消息。

以下是我采取的确切步骤：

**创建快照**

**从快照创建新卷**

**创建新实例（Ubuntu Server 12.10）**

**将新卷附加到实例 (sda1)**

**启动实例**

**等待状态检查完成**

**将 IP 地址与实例关联**

我错过了什么吗？我认为IP地址应该立即解析？

任何意见，将不胜感激

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:08:49.073

您可以从该实例创建 AMI 并启动该实例，而不是执行这些步骤，这将是早期实例的相同副本。

# php - 如何通过jquery获取动态创建的javascript div id并存储在php中？

> ID：15786039
> 
> 赞同：1
> 
> 时间：2013-04-03T11:25:31.623
> 
> 标签：php, javascript, ajax, jquery

```
var count=0;
    function createOne() {
        var divTag = document.createElement("div"); 
```

> **动态创建的 div**

```
 var br= document.createElement("br");
        count++;
        divTag.id = "div1"+count; 
```

> **ID 增量 +1**

```
 divTag.setAttribute("align", "center");

        divTag.style.margin = "0px auto";
        divTag.style.width="430px";
        divTag.style.height="35px";
        divTag.style.background="olive";
        divTag.className = "dynamicDiv";

        divTag.innerHTML = "This HTML Div tag created "
                            + "using Javascript DOM dynamically.";

        document.body.appendChild(divTag);
           document.body.appendChild(br);
    } 
```

**> 需要使用 Jquery 保存在 php 中。**

```
<body>
    <h1 align="center">
    Click it
    <input type="button" id="dev" onClick="createOne()" value="GET">
    </h1>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:28:06.933

** 使用 jQuery **

```
 // Within your createone() function 

 // Location of your PHP file
 var url = 'savemyvar.php';

 $.post(url, { div : divTag.id }).success(function(data, status, xhr)
 {
     // Do something on success
 }).error(function(data)
 {
     // Do something on error
 }); 
```

[$.post 的信息 $.ajax 的辅助函数](http://api.jquery.com/jQuery.post/)

[$.ajax 文档](http://api.jquery.com/jQuery.ajax/) 这会将您的 divTag 对象发送到您可以使用的 PHP 脚本

```
$_REQUEST['div'] 
```

访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T11:28:31.167

在您的`createOne()`函数中，您可以通过您刚刚创建的元素的 ID 将 AJAX 回传到 PHP 脚本。

您可以在此处找到有关[JQuery 的 AJAX 的更多信息](http://api.jquery.com/jQuery.ajax/)

你还没有指定你想用这些信息做什么，或者什么时候这应该有助于开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T11:33:10.773

我建议您通过 Ajax 发布数据

```
createOne = function() {
     var $div = $('#div1'+count);
     $.ajax({
        type: "POST",
        url: "some.php",
        data: { id: "div1"+count, html: $div.html() }
     }).done(function( msg ) {
        alert( "Data Saved: " + msg );
     });

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T11:36:14.960

在 ajax 调用中，数据将如下所示：

```
var mydata = new Array ();
$("div[id^='div']").each (function (){
       mydata.push ({$(this).attr ("id") : $(this).text ()});
}); 
```

我使用 div 的文本作为值，但您可以根据需要更改它...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-03T13:06:01.523

如果您使用的是 jQuery，请使用它。将您的函数转换为 jQuery 并使用 jQuery 的 ajax 函数。

JavaScript

```
jQuery(function($){

    $('#dev').click(function(){ createOne(); });

    window.count = 0;
    function createOne() {

        var new_id = 'div1' + (++count);

        $('body').append('<div class="dynamicDiv" id="' + new_id + '" style="margin: 0px auto; width: 430px; height: 35px; background-color: olive;">This HTML Div tag created using Javascript DOM dynamically.</div><br/>');    

        $.get('/div-id-saver.php', { 'id': new_id }, function(response){  
            console.log('post response:' + response);
        });

    }

}); 
```

HTML

```
<body>
    <h1>
    Click it
    <input type="button" id="dev" value="GET">
    </h1>
</body> 
```

更多信息：[http ://api.jquery.com/category/ajax/shorthand-methods/](http://api.jquery.com/category/ajax/shorthand-methods/)

# c# - 即使在我注册后，属性更改事件仍为空

> ID：15786041
> 
> 赞同：0
> 
> 时间：2013-04-03T11:25:40.343
> 
> 标签：c#, wpf, inotifypropertychanged

`INotifyPropertyChanged`当其中的特定对象的变量发生任何变化时，我会通知类。

下面是课程：

```
 public class MyClass
 {
        public SecClass MyObj { get; set; }

     //A few more variables
 } 
```

SecClass：

```
 public class SecClass:INotifyPropertyChanged
 {
    private bool _noti= false;

    public bool Noti
    {
        get { return _noti; }
        set
        {
            _noti= value;
            NotifyPropertyChanged("Noti");
        }
    }

     //A few more variables
    public event PropertyChangedEventHandler PropertyChanged;

    private void NotifyPropertyChanged(string name)
    {
      if (PropertyChanged != null)
      {
       PropertyChanged(this, new PropertyChangedEventArgs(name));
       }
    }
 } 
```

这是我进行事件注册的函数：

```
 public void Register()
    {
      MyObj.PropertyChanged += MyObj_PropertyChanged;         
    } 
```

功能起作用并且注册完成，但是当涉及到更改时，它显示`Property Change`为空（我猜某处注册已删除，在发生更改之前，我该如何检查？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T11:33:31.613

我把它和：

```
static class Program
{
    static void Main()
    {
        var c = new MyClass();
        c.MyObj = new SecClass();
        c.Register();
        c.MyObj.Noti = !c.MyObj.Noti;
    }
} 
```

添加（用于说明）：

```
private void MyObj_PropertyChanged(object sender, PropertyChangedEventArgs e)
{
    Console.WriteLine(e.PropertyName);
} 
```

到`MyClass`, 和:

```
public event PropertyChangedEventHandler PropertyChanged; 
```

到`SecClass`（让它们编译），它工作正常 -`"Noti"`在运行时打印。*理论上*存在线程竞赛，但在任何理智的用法中都*不太*可能，但推荐的用法是：

```
var handler = PropertyChanged;
if (handler != null)
{
    handler(this, new PropertyChangedEventArgs(name));
} 
```

此外，对于信息：如果您添加`[CallerMemberName]`到其中，则无需明确指定属性：

```
private void NotifyPropertyChanged([CallerMemberName] string name = null) {...} 
```

和：

```
NotifyPropertyChanged(); // the compiler adds the "Noti" itself 
```

但从根本上说：“无法复制” - 它工作正常。我想知道它是否与您的`PropertyChanged`实施有关，因为您实际上并没有表现出来。特别是，我想知道您是否真的有***两个***事件：一个是显式实现的。这意味着你的演员会以不同的方式对待它。

# google-apps-script - Google Apps 脚本发布时间过长

> ID：15786042
> 
> 赞同：0
> 
> 时间：2013-04-03T11:25:40.497
> 
> 标签：google-apps-script

Google Apps 脚本在库中发布需要花费太多时间。可以做些什么来让它更快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:46:54.370

我们正在手动查看图库中的这些项目。我们希望在几天内接触到这个脚本。

我们正在改进我们的流程，并且在我们的新系统到位后将更加敏感。

# jsf - 避免会话在 WebSphere 7 上的两个不同应用程序服务器的两个选项卡之间共享

> ID：15786044
> 
> 赞同：0
> 
> 时间：2013-04-03T11:25:49.907
> 
> 标签：jsf, cookies, url-rewriting, tabs, jsessionid

我面临着类似的问题，如[JSF force URL rewriting](https://stackoverflow.com/q/14728766/2239740) 希望避免跨应用程序的会话共享

*   旧系统 - 环境：JSF 1.2、jsf-api-2.1.0-b03、jsf-facelets-1.1.14、jsf-impl-1.2

我在 websphere 7 上部署了两个独立的应用程序服务器，使用标准 LDAP 注册表使用基于表单的身份验证。

1.  Server1 webapp (ear):- 使用 JSP 创建 - 基于表单的身份验证。
2.  Server2 webapp (ear):- 使用 JSF 创建

面孔-config.xml

```
<managed-bean>
    <managed-bean-name>Login</managed-bean-name>
    <managed-bean-class>
        com.abc.ui.mbean.session.LoginMBean
    </managed-bean-class>
    <managed-bean-scope>session</managed-bean-scope>
</managed-bean>

<managed-bean>
    <managed-bean-name>DeviceType</managed-bean-name>
    <managed-bean-class>com.abc.nsam.jsfmanager.jsf.mbean.stateful.DeviceTypeMBean</managed-bean-class>
    <managed-bean-scope>request</managed-bean-scope>
    <managed-property>
        <property-name>contextMBean</property-name> "This is of session scope"
        <value>#{Context}</value>
    </managed-property>
</managed-bean> 
```

当我登录到 server1 并执行一些操作，然后在 IE 上打开新选项卡并键入 server2 的 URL 时，它会自动登录（因为它们共享相同的本地用户名）并执行一些操作，然后返回到 server1 选项卡..它抛出 ViewExpiredException并让我退出并再次返回登录页面。登录后，当我返回 server2 选项卡并单击任何链接时，它会将我注销。

*所以看起来 jsessionId 被 2 个不同的选项卡（两个不同的应用程序服务器实例）覆盖。*

根据这个问题的答案：你会推荐我同样的 - 正确管理范围吗？但在我的情况下似乎是请求范围并登录其会话范围.....我应该去重写 URL 吗？（使用漂亮的 URL 重写？） ....请帮助...谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:01:17.343

我找到了解决方案。

在 websphere 本身下，我可以更改每个应用程序服务器的 cookie 名称。

[http://www-01.ibm.com/support/docview.wss?uid=swg21225834](http://www-01.ibm.com/support/docview.wss?uid=swg21225834)

默认情况下，它使用 JSESSIONID，您可以根据您的应用程序使用重命名它，这样它就不会在浏览器选项卡访问之间覆盖。

# javascript - extjs 分页工具栏刷新

> ID：15786045
> 
> 赞同：4
> 
> 时间：2013-04-03T11:25:52.157
> 
> 标签：javascript, extjs, extjs4, store, paging

我有一个带有本地**内存**存储的网格。我可以使用**pagingtoolbar列出****页面中的记录**。但是，**在过滤**数据之后，我将过滤后的记录加载到一个新的存储中，并将这个存储绑定到同一个分页工具栏。然后**pagingtoolbar**变为**disabled**。在这种状态下，当我检查**pagingtoolbar**的数据时，它会**显示正确的值**（总记录和页面等）。但是工具栏被禁用。

 ******如何更新分页工具栏的视图？

这里有一些代码：

```
var newStore = Ext.create('APP.myLocalStore', {
                data: filteredStore.data,
                totalCount: filteredStore.count()
            });
pagingToolbar.bindStore();
pagingToolbar.bindStore(newStore);
pagingToolbar.moveFirst(); 
```

我正在使用 extjs 4.x

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-30T11:27:16.467

You can use pagination bar refresh also. Try

Ext.getCmp('pagination bar').doRefresh()******

# udp - Centos 6.3 服务器忽略 IGMP 查询

> ID：15786048
> 
> 赞同：2
> 
> 时间：2013-04-03T11:25:55.767
> 
> 标签：udp, centos, multicast, igmp

我正在使用 centos 6.3 服务器订阅 UDP 多播数据，我注意到我的服务器没有响应它所连接的交换机发送的 IGMP 查询。

结果，当我打开多播套接字时，我开始接收多播数据，直到我的 IGMP 订阅超时，因为服务器没有更新其订阅。（为了确保问题不是来自我的任何代码，我只是使用 smcroute 打开多播订阅）

我在网上搜索了一段时间，但我发现的任何提示都没有帮助我解决这个问题。

这是我服务器任何接口上 IGMP 通信的屏幕截图：

[http://img521.imageshack.us/img521/9953/capture10y.png](http://img521.imageshack.us/img521/9953/capture10y.png)

如我们所见，我的服务器首先发送 2 个 IGMP 连接，但几分钟后，当交换机发送 IGMP 查询时，没有人回答。

相关接口的 IGMP 协议集版本为 V2：

```
[root@localhost ~]# cat /proc/net/igmp
Idx Device    : Count Querier   Group    Users Timer    Reporter
1   lo        :     0      V2
                010000E0     1 0:00000000       0
2   eth0      :     5      V2
                FB0000E0     1 0:00000000       1
                010000E0     1 0:00000000       0
5   tap0      :     5      V3
                FB0000E0     1 0:00000000       0
                010000E0     1 0:00000000       0
7   eth1.371:    13      V2
            414000E0     1 0:00000000       1
            404000E0     1 0:00000000       1
            3F4000E0     1 0:00000000       1
            504000E0     1 0:00000000       1
            524000E0     1 0:00000000       1
            494000E0     1 0:00000000       1
            4A4000E0     1 0:00000000       1
            4B4000E0     1 0:00000000       1
            FB0000E0     1 0:00000000       0
            010000E0     1 0:00000000       0 
```

rp_filter 在此接口上被禁用：

```
[root@localhost ~]# cat /proc/sys/net/ipv4/conf/eth1.371/rp_filter 
0 
```

非常感谢你能给我的任何帮助。

最好的，

洛朗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T18:50:00.530

尝试暂时禁用 iptables：

```
# service iptables stop 
```

看看它是否会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:15:41.843

它可能来自不对称的路由规则。你有从你的服务器到达 170.19.52.5 的规则吗？（你可以使用`route -n`）

# python - 如何在 python 2.7 32bit 中获取 64bit 进程的内存工作集？

> ID：15786049
> 
> 赞同：1
> 
> 时间：2013-04-03T11:25:59.250
> 
> 标签：python, memory, python-2.7, 64-bit, wmi

对于自动化测试框架，我需要监控我启动的 64 位进程的工作集。不知何故，我找不到允许监控超过 4GB 数据的解决方案。我尝试了 WMI 和 psutil，但都卡在 32 位边界。我做这样的事情：

```
import wmi
import psutil
import subprocess 

def measure_memory( process ):
    mem = psutil.Process( process.pid ).get_memory_info().rss
    return "%.2f M" % (float(mem)/1024./1024.)

def measure_memory_wmi( process ):
    w = wmi.WMI('.')
    result = w.query("SELECT WorkingSet FROM Win32_PerfRawData_PerfProc_Process WHERE IDProcess="+str(process.pid))
    subset = result[0]
    return "%.2f M" % (float(subset.WorkingSet)/1024./1024.)

process = subprocess.Popen( [path_to_program, '-option'] )
print measure_memory( process )
print measure_memory_wmi( process ) 
```

这提供：

```
-0.00 M
4096.00 M 
```

而流程资源管理器提供

```
6.806.976 K 
```

还有其他方法可以获取真实数据吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:36:18.400

好的，在一些 WMI 工具/谷歌事故之后，我找到了另一种方法来表达提供正确数字的查询。这是新代码：

```
def measure_memory( process ):
    w = wmi.WMI('.')
    result = w.query("SELECT WorkingSetSize FROM Win32_Process WHERE ProcessID="+str(process.pid))
    print result
    subset = result[0]
    return "%.2f" % (float(subset.WorkingSetSize)/1024./1024.) 
```

这似乎现在有效。任何人都可以确认这应该比我现在的情况更有效吗？

# c# - 执行 IEnumerable 方法

> ID：15786065
> 
> 赞同：3
> 
> 时间：2013-04-03T11:26:41.127
> 
> 标签：c#, .net, linq, lambda

简单地将问题陈述到 int 列表，假设我有这个

```
 List<int> range = new List<int>(10) { 10, 20, 30, 40, 50, 60, 70, 80, 90, 100 }; 
```

用户输入 24，我需要一个 Early feed 值作为 20，late feed 值作为 30
用户输入 99，我需要一个 Early feed 值作为 90，late feed 值作为 100
**用户输入 20，我需要一个 Early feed 值20 和后期进给值为 20**

是否有 Lamba 表达式或 linq 语句来获得这种结果。

我的真正输入不是 int 列表，我只是对其进行了简化，更热衷于使用 lamba 或 linq 表达式来获得结果

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T11:29:44.733

怎么样

```
range.Where(i => i <= UserInput).Max(); 
```

和

```
range.Where(i => i >= UserInput).Min(); 
```

或者

```
range.Max(i => i <= UserInput);
range.Min(i => i >= UserInput); 
```

# c++ - C ++ TCHAR数组到wstring在VS2010中不起作用

> ID：15786068
> 
> 赞同：0
> 
> 时间：2013-04-03T11:26:45.957
> 
> 标签：c++, arrays, wstring, tchar

我想将 TCHAR 数组转换为 wstring。

```
 TCHAR szFileName[MAX_PATH+1];
#ifdef _DEBUG
    std::string str="m:\\compiled\\data.dat";
    TCHAR *param=new TCHAR[str.size()+1];
    szFileName[str.size()]=0;
    std::copy(str.begin(),str.end(),szFileName);
#else
    //Retrieve the path to the data.dat in the same dir as our data.dll is located
    GetModuleFileName(_Module.m_hInst, szFileName, MAX_PATH+1);
    StrCpy(PathFindFileName(szFileName), _T("data.dat"));
#endif  

wstring sPath(T2W(szFileName)); 
```

我需要传递`szFileName`给期望的函数

```
const WCHAR * 
```

为了完整起见，我正在说明我需要传递`szFileName`给的空白：

```
HRESULT CEngObj::MapFile( const WCHAR * pszTokenVal,  // Value that contains file path
                        HANDLE * phMapping,          // Pointer to file mapping handle
                        void ** ppvData )            // Pointer to the data 
```

但是，T2W 对我不起作用。编译器说`that "_lpa" is not defined`，我不知道从哪里开始。我已经尝试了我在网上找到的其他转换方法，但它们也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T11:32:37.627

有类似的功能

```
mbstowcs_s() 
```

从 转换`char*`为`wchar_t*`。

```
#include <iostream>
#include <stdlib.h>
#include <string>

using namespace std;

char *orig = "Hello, World!";
cout << orig << " (char *)" << endl;

// Convert to a wchar_t*
size_t origsize = strlen(orig) + 1;
const size_t newsize = 100;
size_t convertedChars = 0;
wchar_t wcstring[newsize];
mbstowcs_s(&convertedChars, wcstring, origsize, orig, _TRUNCATE);
wcscat_s(wcstring, L" (wchar_t *)");
wcout << wcstring << endl; 
```

[在此处](http://www.codeproject.com/Articles/76252/What-are-TCHAR-WCHAR-LPSTR-LPWSTR-LPCTSTR-etc)查找文章，[在此处](http://msdn.microsoft.com/en-us/library/ms235631%28VS.80%29.aspx)查找 MSDN。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T11:50:24.873

的定义`TCHAR`取决于是否定义了某些预处理器宏。有关可能的组合，请参见例如[这篇文章](http://msdn.microsoft.com/en-us/library/c426s321%28v=vs.100%29.aspx)。

这意味着`TCHAR`可能已经是一个`wchar_t`.

您可以使用`_UNICODE`宏来检查是否需要转换字符串。如果你这样做，那么你可以使用[`mbstowcs`](http://msdn.microsoft.com/en-us/library/k1f9b8cy%28v=vs.100%29.aspx)来进行转换：

```
std::wstring str;

#ifdef _UNICODE
    // No need to convert the string
    str = your_tchar_string;
#else
    // Need to convert the string
    // First get the length needed
    int length = mbstowcs(nullptr, your_tchar_string, 0);

    // Allocate a temporary string
    wchar_t* tmpstr = new wchar_t[length + 1];

    // Do the actual conversion
    mbstowcs(tmpstr, your_tchar_str, length + 1);

    str = tmpstr;

    // Free the temporary string
    delete[] tmpstr;
#endif 
```

# python - 为什么我不能调用同一个项目中的 python 脚本？

> ID：15786069
> 
> 赞同：0
> 
> 时间：2013-04-03T11:26:47.457
> 
> 标签：python, python-import

项目结构如下：

```
src
   package1
       a.py
   c.py 
```

我可以从 a.py 导入 c，但是当我尝试运行 a.py 时，为什么会出现 ImportError：没有名为 c 的模块？

顺便说一句，我正在使用 pydev

**编辑 1**

问题不一样，我从 Pydev 运行这个脚本，失败:(那我该怎么办？ **src 源文件夹已经在 PYTHONPATH 中**，但是 ImportError 仍然存在，为什么？

# c - C：动态字符数组崩溃堆

> ID：15786076
> 
> 赞同：1
> 
> 时间：2013-04-03T11:27:06.353
> 
> 标签：c, char, malloc, heap-memory, realloc

我又有一个关于 C 的工作原理的问题。（由 VS2012 编译的 ANSI-C）

我正在将独立程序 (.exe) 重构为 .dll。到目前为止，这工作得很好，但是在记录日志时我偶然发现了一些问题。让我解释：

原始程序 - 在运行时 - 写入日志文件并将信息打印到屏幕上。由于我的 dll 将在网络服务器上运行，许多人同时访问

*   没有真正的机会正确处理日志文件（并在它们之后清理）
*   没有任何人会看到的控制台窗口

因此，我的目标是将要放入日志文件或屏幕上的所有内容写入类似字符串的变量（我知道 C 中没有字符串），然后我可以稍后将 requet 传递给调用者（也是dll，但用 C# 编写）。

因为在 C 中这样的事情是不可能的：

```
char z88rlog;
z88rlog="First log-entry\n";
z88rlog+="Second log-entry\n"; 
```

我有两种可能：

1.  `char z88rlog[REALLY_HUGE];`
2.  动态分配内存

在我看来，第一种方法是被忽略的，因为：

*   内存的潜在浪费是相当巨大的
*   我仍然可能需要比 更多的内存`REALLY_HUGE`，从而造成缓冲区溢出

这让我有了第二种方式。我已经为此做了一些工作，并提出了两个解决方案，其中任何一个都不能正常工作。

```
/* Solution 1 */    
void logpr(char* tmpstr)
{
    extern char *z88rlog;
    if (z88rlog==NULL)
    {
        z88rlog=malloc(strlen(tmpstr)+1);
        strcpy(z88rlog,tmpstr);
    }
    else
    {
        z88rlog=realloc(z88rlog,strlen(z88rlog)+strlen(tmpstr));
        z88rlog=strcat(z88rlog,tmpstr);
    }
} 
```

在解决方案 1 中（等于解决方案 2，您会发现）我通过`char tmpstr[255];`. 我的“日志文件”`z88rlog`是全局声明的，所以我需要`extern`访问它。然后我检查是否已为`z88rlog`. 如果不是，我分配内存的大小为我的日志条目（+1 为 my `\0`）并将内容复制`tmpstr`到`z88rlog`. 如果是的话，我会重新分配内存的大小+ （+1）`z88rlog`的长度。`tmpstr`然后使用 . 将两个“字符串”连接起来`strcat`。使用断点和直接窗口我获得了以下输出：

```
z88rlog
0x00000000 <Schlechtes Ptr>
z88rlog
0x0059ef80 "start Z88R version 14OS"
z88rlog
0x0059ef80 "start Z88R version 14OS
opening file Z88.DYNÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍÍýýýý««««««««þîþîþîþ" 
```

它显示了三个连续的 logpr 调用（`strcpy`/之前的断点`strcat`）。最后无法区分的乱码是由于内存分配造成的。之后 VS 发出一条错误消息，指出某些原因导致调试器在`realloc.c`. 因为这显然行不通，所以我炮制了我的绝妙解决方案 2：

```
/* Solution 2 */
void logpr(char* tmpstr)
{
    extern char *z88rlog;
    char *z88rlogtmp;
    if (z88rlog==NULL)
    {
        z88rlog=malloc(strlen(tmpstr)+1);
        strcpy(z88rlog,tmpstr);
    }
    else
    {
        z88rlogtmp=malloc(strlen(z88rlog)+strlen(tmpstr+1));
        z88rlogtmp=strcat(z88rlog,tmpstr);
        free(z88rlog);
        z88rlog=malloc(strlen(z88rlogtmp)+1);
        memcpy(z88rlog,z88rlogtmp,strlen(z88rlogtmp)+1);
        free(z88rlogtmp);
    }
} 
```

在这里，我的目标是创建我的日志文件的副本，释放原件的内存为新大小的原件创建新内存并将内容复制回来。并且不要忘记释放临时副本，因为它是通过 malloc 分配的。当它到达时立即崩溃`free`，再次告诉我堆可能已损坏。

因此，让我们暂时免费评论。这确实工作得更好 - 让我松了一口气 - 但是在构建日志字符串时突然并非所有字符都`z88rlogtmp`被复制。但一切仍然正常工作。直到突然我再次被告知堆可能被破坏并且调试器在`_heap_alloc (size_t size)` `in malloc.c` `size`has的末尾放置了一个断点 - 根据调试器 - 1041的值。

因此，我有 2 种（或 3 种）方法想要实现这种“字符串增长”，但没有一种有效。给我大小的错误可能会让我得出数组已经变大的结论吗？我希望我能很好地解释我想做什么，有人可以帮助我:-)提前谢谢！

*对Maybee具有讽刺意味的是，*我应该去为计算机购买一些新堆。它适合 RAM 插槽吗？谁能推荐一个好品牌？*讽刺*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T11:30:40.113

这是*解决方案 1*中的一个错误：

```
z88rlog=realloc(z88rlog,strlen(z88rlog)+strlen(tmpstr)); 
```

因为没有为终止空字符分配空间。请注意，您必须将结果存储`realloc()`到临时变量中，以避免在失败时发生内存泄漏。纠正：

```
char* tmp = realloc(z88rlog, strlen(z88rlog) + strlen(tmpstr) + 1);
if (tmp)
{
    z88rlog = tmp;
    /* ... */
} 
```

* * *

*解决方案2*中的错误：

```
z88rlogtmp=malloc(strlen(z88rlog)+strlen(tmpstr+1));
                                      /*^^^^^^^^^*/ 
```

它正在计算比 的长度小一`tmpstr`。纠正：

```
z88rlogtmp=malloc(strlen(z88rlog) + strlen(tmpstr) + 1); 
```

指针重新分配导致未定义的行为：

```
 z88rlogtmp=strcat(z88rlog,tmpstr);
    /* Now, 'z88rlogtmp' and 'z88rlog' point to the same memory. */

    free(z88rlog);
    /* 'z88rlogtmp' now points to deallocated memory. */

    z88rlog=malloc(strlen(z88rlogtmp)+1);
    /* This call   ^^^^^^^^^^^^^^^^^^ is undefined behaviour,
       and from this point on anything can happen. */

    memcpy(z88rlog,z88rlogtmp,strlen(z88rlogtmp)+1);
    free(z88rlogtmp); 
```

* * *

此外，如果代码在 Web 服务器中执行，它几乎可以肯定是在多线程环境中运行。由于您有一个全局变量，因此需要同步访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T11:30:13.373

你似乎有很多问题。首先，在您的`realloc`通话中，您不会为终止`'\0'`字符分配空间。在您的第二个解决方案中，您的解决方案`strlen(tmpstr+1)`不正确。在您的第二个解决方案中，您还使用`strcat`附加到现有缓冲区`z88rlog`，如果它不够大，您将覆盖未分配的内存，或者覆盖分配给其他东西的数据。的第一个参数`strcat`是目标，这也是函数返回的内容，因此您也释放了新分配的内存。

`realloc`如果您只记得分配那个额外的字符，第一个解决方案应该可以正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T11:42:43.633

在解决方案 1 中，您需要为终止`NULL`字符分配空间。因此， realloc 应该包括一个更多的空间，即

```
z88rlog=realloc(z88rlog,strlen(z88rlog)+strlen(tmpstr) + 1); 
```

在第二种解决方案中，我不确定这一点`z88rlogtmp=strcat(z88rlog,tmpstr);`，因为`z88rlog`它是目标字符串。如果您`malloc`只想表演，那么

```
 z88rlogtmp=malloc(strlen(z88rlog)+1 // Allocate a temporary string
 strcpy(z88rlogtmp,z88rlog); // Make a copy
 free(z88rlog); // Free current string
 z88rlog=malloc(strlen(z88rlogtmp)+ strlen(tmpstr) + 1)); //Re-allocate memory
 strcpy(z88rlog, z88rlogtmp); // Copy first string
 strcat(z88rlog, tmpStr);  // Concatenate the next string
 free(z88rlogtmp); // Free the Temporary string 
```

# for-loop - 在 Windows 批处理中使用 for 循环创建文件夹

> ID：15786082
> 
> 赞同：-2
> 
> 时间：2013-04-03T11:27:19.257
> 
> 标签：for-loop, batch-file

我想使用 Windows 批处理文件创建一组文件夹，例如命名为 folder1、folder2、folder3、...、folder40。我可以使用命令`call md folderN`40 次 for N in (1,40) 来执行此操作，但我想知道是否可以使用 for 循环来执行此操作？

我曾尝试过`FOR /L %%I IN (1,1,40) DO call md folder%%I`这样做，但它似乎不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:31:33.623

`MD`是一个内部 Windows 命令。这意味着应该直接调用它，而不是调用它。

所以，你只需要

```
 for /L %%a in (1,1,40) do md folder%%a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T13:05:26.107

这在 XP 中也适用：

```
FOR /L %%I IN (1,1,40) DO call md folder%%I 
```

..或在命令行上：

```
FOR /L %I IN (1,1,40) DO call md folder%I 
```

...但这不起作用：

```
FOR /L %I IN (1,1,40) DO call :md folder%I 
```

# ios - UICollectionView 错误访问 -> UICollectionViewData _setLayoutAttributes:atGlobalIndex:

> ID：15786084
> 
> 赞同：4
> 
> 时间：2013-04-03T11:27:29.227
> 
> 标签：ios, exc-bad-access, uicollectionview, pstcollectionview

我使用 UICollectionView 来显示大量图像，其中包含 32 个批次。每次我到达集合视图的末尾时，我都会加载另一批 32 个图像并调整 collectionView contentsize.width 的大小以接受新项目。加载是通过使用 AFNetworking 调用 web 服务来完成的。

当我从头到尾快速滚动到尾到头时，我收到一个 EXC_BAD_ACCESS。当到达 CollectionView 的末尾时也会发生这种情况。这就像它试图加载一些尚不可用的属性。我从 1 天开始就试图弄清楚，但没有成功。我尝试使用仪器/启用 NSZombie/guardmalloc ...

**编辑**

还有一个很奇怪的想法：只有当我用真正的 UICollectionView 替换 PSTCollectionView 时才会出现这种错误访问。所以为了确保我只是做了反向移动并将 UICollectionView 替换为 PSTCollectionView 并且 badaccess 消失了。我完全迷路了:)

**结束编辑**

我在项目中同时使用 arc 和非 arc 文件。我能发现的唯一想法是这个堆栈跟踪：![在此处输入图像描述](https://i.stack.imgur.com/VlSuh.png)

您的帮助将不仅仅是欢迎。

> 块引用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T20:55:02.510

问题可能是图像太大了。您可能想要做的是在每个 UIImageView 上设置图像属性之前从下载的图像中调整图像的大小。

Bill Dudney 就该主题发表了一本非常有用的 iBook，其中详细介绍了图像对内存的影响以及如何对其进行优化。它是 4.99 美元，非常有用。

[https://itunes.apple.com/us/book/all-image-io-you-need-to-know/id601759073?mt=11](https://itunes.apple.com/us/book/all-image-io-you-need-to-know/id601759073?mt=11)

以下方法会将图像调整为给定的大小，这将减少内存占用并有望防止您的问题。

```
- (UIImage *)resizeImage:(UIImage *)image size:(CGSize)size {
    UIGraphicsBeginImageContext(size);
    [image drawInRect: CGRectMake(0, 0, width, height)];
    UIImage *resizedImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return resizedImage;
} 
```

现在，如果您使用 AFNetworking 直接从使用 AFNetworking 类别的 URL 设置图像，您可能希望使用替代方法，以便您可以干预和调整图像大小。下面的代码将做到这一点。

```
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:imageURL];
[request addValue:@"image/*" forHTTPHeaderField:@"Accept"];

[imageView setImageWithURLRequest:request placeholderImage:nil success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image) {
    // resize image
    // set image on imageView
} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error) {
    // handle error
}]; 
```

# c# - 无法使用 jQuery Ajax 调用 Page WebMethod？

> ID：15786088
> 
> 赞同：1
> 
> 时间：2013-04-03T11:27:40.963
> 
> 标签：c#, jquery, asp.net-2.0, webmethod

我目前正在尝试在 asp.net2.0 中开发一个聊天应用程序，并要求我拨打电话。我的**`aspx Page Webmethod`**问题是我无法拨打页面 webmethod。

在ff的错误控制台中没有显示任何消息，所以无法找出我哪里出错了。拨打网络服务时没有问题。

这是我写的代码

```
 $(document).ready(function(){
   $("#btnSend").click(function(){
     $.ajax({
      type:"POST",
      data:"{}",
      url:"Chat.aspx/GetTime",
      contentType:"application/json; charset=utf-8",
      dataType:"json",
      success:function(msg){
        alert(msg.d);
      },
      error:function(msg){
        alert(msg.d);
      }
   });

  });

}); 
```

这是我的**chat.aspx**页面**。GetTime**函数没有被调用？是 url 的问题吗？

```
[WebMethod] 
public static string GetTime()
{
   return DateTime.Now.ToString();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:28:16.320

我要看的三件事是：

1.) 我不确定 ASP.NET 2.0 是否可以使用 JSON AJAX 的东西。我认为这是在 3.5 中出现的，但可能是在考虑 ASP.NET AJAX 实现而不是 jQuery。请参阅：[Jquery's Ajax Property For Asp.Net 2.0](https://stackoverflow.com/questions/292308/jquerys-ajax-property-for-asp-net-2-0)，特别是：

> 您需要将此属性添加到您的网络服务器类

```
[System.Web.Script.Services.ScriptService]
public class Service : System.Web.Services.WebService 
```

> 并将此属性赋予您的功能

```
[ScriptMethod(ResponseFormat = ResponseFormat.Json)] 
```

2.) 您可能需要检查您使用的 jQuery AJAX 版本是否与 ASP.NET 2.0 兼容。我记得那里有一个问题，需要使用旧版本的 jQuery（如 1.3）请参阅：http: [//forum.jquery.com/topic/jquery-ajax-not-working-for-asp-net-2-0 -7-5-2011](http://forum.jquery.com/topic/jquery-ajax-not-working-for-asp-net-2-0-7-5-2011)

3.) 这可能是一个长镜头，但您的页面是名为 Chat.aspx 还是 chat.aspx？Javascript 大小写很重要 (O;

远射，所有人，祝你好运（：

[编辑] 刚刚重读了这个问题，突然出现了另一个想法：按钮来自您的 .ASPX 页面吗？我问的原因是，当它在页面上呈现时，您的按钮可能不再是 'ID="btnSend"' 而是 'ID="ctl_btnSend_0897234h15807"' 左右。如果您已附加您的 jQuery 以查找“#btnSend”，则它可能不再是 DOM 中的相同 ID。

希望有帮助！[/编辑]

# c# - 如何将 IEnumerable 模型对象转换为视图中的简单模型对象，MVC3

> ID：15786091
> 
> 赞同：1
> 
> 时间：2013-04-03T11:27:47.540
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, ienumerable

我必须将模型对象传递给我的创建视图，以便在提交时单击此模型对象得到更新。但与此同时，我在其主布局中使用数据列表来呈现动态菜单。

两者都使用相同的模型类。但对于一个我给

`@model IEnumerable<DynaPortalMVC.Models.Page>`

在创建视图中我给出

`@model DynaPortalMVC.Models.Page`

在控制器中：-

```
public ActionResult Create()
    {           
        return View();
    } 
```

但这在 _Layout.cshtml 中给了我一个错误，因此上面的 actionresult 甚至没有被执行。

```
Exception Details: System.ArgumentNullException: Value cannot be null.Parameter name: source 
```

所以我认为我应该传递 Ienumerable 对象来创建视图，然后将其转换为简单的模型对象，以便可以更新它。请就此提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T11:53:07.987

您是否应该在布局中包含 @model 指令是值得怀疑的。在我看来，您应该通过调用 HtmlHelper.Action 方法在您的控制器中使用局部视图和一个动作来呈现您的动态菜单，如下所示：

菜单的部分视图（名为 _Menu.cshtml 的文件）：

```
@model IEnumerable<DynaPortalMVC.Models.Page>

<ul>
@foreach (var page in Model)
{
    <li>@page.Name</li>    
}
</ul> 
```

您的 Home 控制器（或任何其他）中名为 _Menu 的操作：

```
public ActionResult _Menu()
    {
        IEnumerable<DynaPortalMVC.Models.Page> model = new List<DynaPortalMVC.Models.Page>
        {
            new DynaPortalMVC.Models.Page { Name = "Page1" },
            new DynaPortalMVC.Models.Page { Name = "Page2" },
            new DynaPortalMVC.Models.Page { Name = "Page3" },
            new DynaPortalMVC.Models.Page { Name = "Page4" },
        };

        return PartialView("_Menu", model);
    } 
```

这行代码在你的布局中呈现一个菜单：

```
@Html.Action("_Menu", "Home") 
```

# html - CKeditor 在加载时替换 HTML

> ID：15786096
> 
> 赞同：1
> 
> 时间：2013-04-03T11:28:04.760
> 
> 标签：html, css, ckeditor

我有一个运行 CKEditor 的实例来编辑网站的一小部分。原始 HTML 是：

```
 <div class="slide slideleft">
      <a href="#" class="slidelefta">
          <img src="img/left.png" alt="previous" />
      </a>
  </div>
  <div class="slide slidemid noauto" style="height: auto; text-align: center;">
    <a href="#" class="sliderighta">
        <img src="img/main_item.png" alt="item" />
    </a>
  </div>
  <div class="slide slideright">
      <a href="#" class="sliderighta">
          <img src="img/right.png" alt="next" />
      </a>
  </div> 
```

现在，当我将它加载到 CKEdit 中（在 a`<textarea>`中，全部使用 PHP 的 htmlspecialchars() 方法正确编码）时，它会用以下内容替换我所有精心制作的 DIV 和样式：

```
<p><a href="#"><img alt="previous" src="img/left.png" /></a></p>
<p><a href="#"><img alt="burg.ring1" src="img/main_item.png" /></a></p>
<p><a href="#"><img alt="next" src="img/right.png" /></a></p> 
```

这当然完全破坏了页面的布局。CKEditor 可以以某种方式设置为**不**这样做吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:22:30.790

从 CKEditor 4.1 开始，高级内容过滤器功能被启用。您需要对其进行配置以使您的 HTML 通过验证。在这里查看我之前的答案：[CKEditor strips inline attributes](https://stackoverflow.com/questions/15753956/ckeditor-strips-inline-attributes/15758342#15758342)。

# vba - 表单/查询：表格的一行，以及来自 1:n 相关表格的两个不同行的两个可编辑字段

> ID：15786099
> 
> 赞同：0
> 
> 时间：2013-04-03T11:28:10.400
> 
> 标签：vba, ms-access

我有三张表，一张持有材料数据（材料），一张持有供应商（供应商），一张持有每个供应商和材料的价格（supplierPrices）。一种材料可以有多个价格，每个供应商一个价格。

我有一个表格，每行显示各种材料数据。此表单还显示特定供应商 (supplierID 100)的**可编辑价格。**查询中的表关系是“包括连接字段相等的所有材料行”并且在条件供应商ID = 100 中。因此每种材料只有一行，包括该供应商的可编辑价格。

但是现在我想显示每行的第二个可编辑价格，即供应商 ID 200 的价格。如果我将标准扩展到“供应商 ID = 100 或供应商 ID = 200”，我会得到每个材料两行，这不是我想要的。我想要的是在一行中显示两个价格，以及一大堆材料数据。首先，我使用 VBA 函数进行操作，在查询中调用它，但随后 controlsource 是一个表达式，无法分别存储数据进行编辑。

有没有办法通过查询中的一些特殊选择来做到这一点？还是我宁愿必须（再次）使用 VBA 将其存储在正确的表中？

感谢您的提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:21:54.187

```
TRANSFORM Max(supplierPrices.[price]) AS price
SELECT supplierPrices.[materialID]
FROM supplierPrices
GROUP BY supplierPrices.[materialID]
PIVOT supplierPrices.[supplierID]; 
```

但这是只读的。

# c# - 在 finally 子句中尝试 catch

> ID：15786102
> 
> 赞同：1
> 
> 时间：2013-04-03T11:28:18.700
> 
> 标签：c#, exception-handling, try-catch

我有一段看起来像这样的代码：

```
try
{
  // Do stuff
  operationInfo.success = true;
}
catch
{
  operationInfo.success = false;
  throw;
}
finally
{
  try
  {
     UploadToServer(operationInfo);
  }
  catch
  {
     // Suppress, it's ok if we can't upload to the server
  }
} 
```

我的问题是，在这种情况下，如果在主 try 块中抛出异常，然后 finally 块实际上在 UploadToServer 方法中抛出（并处理）另一个异常，堆栈跟踪会发生什么情况？*您是否获得了引发的最后一个*异常的堆栈跟踪，或者它是否会正确冒泡？

我正在寻找更多关于 IL 如何管理幕后发生的事情的解释，而不是简单的“是或否”答案。

谢谢。

# workflow-foundation-4 - EndResumeBookmark 什么时候返回 BookmarkResumptionResult.NotReady？

> ID：15786103
> 
> 赞同：0
> 
> 时间：2013-04-03T11:28:19.607
> 
> 标签：workflow-foundation-4

该方法`WorkflowInstanceProxy.EndResumeBookmark`返回一个枚举`BookmarkResumptionResult`。这什么时候回来`NotReady`？我真正想知道的是如何创建一个场景来实现这一点，这样我就可以编写测试来验证我的扩展实现是否正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:28:58.397

MSDN 说（[http://msdn.microsoft.com/en-us/library/system.activities.bookmarkresumptionresult.aspx](http://msdn.microsoft.com/en-us/library/system.activities.bookmarkresumptionresult.aspx)）：

NotReady：未计划书签恢复，因为运行时尚未创建书签。主机应等到另一个空闲点再次尝试恢复。

当您想要恢复书签并且工作流尚未卸载时，我看到了它。

我希望这有帮助。

# java - 通过命令提示符将 java 程序安装为 Windows 服务

> ID：15786104
> 
> 赞同：1
> 
> 时间：2013-04-03T11:28:22.010
> 
> 标签：java, windows, service

> 嗨，我能够创建一个服务，但现在当我尝试运行它时出现错误代码：4 系统无法打开指定的文件

```
Error code:4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:35:01.810

如果您不想使用任何开源 apis/工具，那么您始终可以创建一个批处理文件（在 windows 中），它将运行程序，然后创建一个将调用批处理文件的 windows 服务。这样做时请确保所有路径都是正确的，并且如果任何 clsspath 具有相对引用，您必须对其进行格式化，以便批处理作业可以从计算机中的任何位置运行（最好不要使用任何相对路径和将基本路径放在环境变量中并使用该变量）。希望这会有所帮助。

# c# - VB 序列化到 C# 序列化

> ID：15786105
> 
> 赞同：0
> 
> 时间：2013-04-03T11:28:23.187
> 
> 标签：c#, vb.net, serialization

我开始在一家公司编程，那里的程序是用 VB 编写的。我将其转换为 C#，因为它的代码更简洁。

在 VB 中，他们做了类似的事情：

```
 Class Program
        Friend Shared Sub Main(args As String())
        Dim obj As New Class1()
        Dim fs As New System.IO.FileStream("test.txt", System.IO.FileMode.OpenOrCreate)
        Dim bf As New System.Runtime.Serialization.Formatters.Binary.BinaryFormatter()
            bf.Serialize(fs, obj)
            fs.Close()

            fs = New System.IO.FileStream("test.txt", System.IO.FileMode.OpenOrCreate)
            bf = New System.Runtime.Serialization.Formatters.Binary.BinaryFormatter()
            obj = bf.Deserialize(fs)
            For Each item As String In obj.myList
                Console.WriteLine(item)
            Next
            Console.Read()
        End Sub
    End Class

    <Serializable> _
    Class Class1
        Public myList As List(Of String)
        Public Sub New()
            myList = New List(Of String)()
            myList.Add(True)
            myList.Add(False)
            myList.Add(True)
            myList.Add(False)
            myList.Add(True)
            myList.Add(False)
            myList.Add(True)
        End Sub
    End Class 
```

但是在 C# 中，当然禁止将 bool 分配给 String-Var。我在 C# 中编写了一个名为 Class1Old 的类，其中包括在 VB 中声明的所有成员，但是当我在 C# 中反序列化时，我捕获了异常“字符串无法在布尔值中转换”。

我看了写的 *.txt 文件，结果很混乱：

```
 ÿÿÿÿ          JConsoleApplication1, Version=1.0.0.0, Culture=neutral,  
    PublicKeyToken=null   
    ConsoleApplication1.Class1   
    myListSystem.Collections.Generic.List`1[[System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]]
    System.Collections.Generic.List`1[[System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]]
    _items_size_version                       True   False 
```

我无法想象这 7 个值是如何转换和重新转换的。

**如何反序列化从 VB 编写的 C# 文件？**

希望有人可以帮助我...

编辑：

现在我在我的 ptoject 中包含一个 VB dll 项目，包括“旧”代码。我的 C# 代码调用了 VB 代码中的一个方法，该方法开始反序列化。但我仍然收到 ArgumentException：

```
The object of type "System.Collections.Generic.List`1[System.String]" can not be converted to type "System.Collections.Generic.List`1[System.Boolean]". 
```

但是序列化类中的所有参数在我的实际项目中与我的纯 VB 项目中的类型相同。

那么导致该异常的原因是什么？

问候亨利克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T11:41:40.563

在 VB.net 中也禁止将布尔值分配给字符串变量 - 除非您的前任没有使用 Option Strict On。在那种情况下，您的 C# 咆哮是有意义的 - 编码实践有问题，而不是 VB.Net。

没有简单的方法来反序列化类 - 我认为最好的方法是 Bool Properties，它在设置时也会创建字符串变量。这将适用于 xml 序列化，我不确定它是否适用于二进制格式化程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T11:46:17.497

如果您坚持“修复”没有损坏的东西，我想您需要反序列化为一个中间“翻译”类，该类将列表定义为对象或布尔值。然后这个类将输出一个 Class1 对象。

# iphone - 在 Objective C 中解析纯 JSON 数组

> ID：15786109
> 
> 赞同：-3
> 
> 时间：2013-04-03T11:28:28.887
> 
> 标签：iphone, ios, objective-c, xcode, json

我想解析一个普通的 JSON 数组，如：

```
{
    "ns": [
        [
            "1364987475027",
            "Alert1",
            "001"
        ],
        [
            "1364987475042",
            "Alert2",
            "001"
        ],
        [
            "1364987475058",
            "Alert4",
            "001"
        ]
    ]
} 
```

以简单的字符串数组获取数组。我发现了许多带有 JSON 字典数组的帖子。但在这种情况下，JSON 没有值的键。请帮忙。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-03T11:32:39.997

**答案：** [`NSJSONSerialization`](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)。

`NSJSONSerialization`类可用于将 JSON 转换为 Foundation 对象和 Foundation 对象转换为 JSON。在您的情况下，您应该使用`-JSONObjectWithData:options:error:`类`NSJSONSerialization`从给定的 JSON 数据中检索 Foundation 对象。

* * *

**示例代码：**

```
NSError *error;
NSDictionary *json = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&error];
NSArray *fetchedArr = [json objectForKey:@"ns"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T11:32:37.137

该`NSJSONSerialization`方法`JSONObjectWithData:options:error`可以。您将获得一个字典，其中键“ns”有一个值，该值将是一个数组数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T11:35:02.967

描述显示了您正在寻找的内容

```
 NSError *error;
    NSDictionary *json = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&error];

    NSArray *fetchedArr = [json objectForKey:@"ns"];

    for (NSArray *arr in fetchedArr) {
        [arr description];
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-03T11:35:25.010

```
 NSError *error = NULL;
NSData* data = [yourJsonString dataUsingEncoding:NSUTF8StringEncoding];
            NSDictionary* json = [NSJSONSerialization
                                  JSONObjectWithData:data
                                  options:kNilOptions
                                  error:&error];
NSArray *resultArray = [json objectForKey:@"ns"];//resultArray contains array type objects... 
```

我想这会对你有所帮助。

# c# - 更改类的私有成员的值

> ID：15786112
> 
> 赞同：0
> 
> 时间：2013-04-03T11:28:35.653
> 
> 标签：c#

假设我有一个学生类，它包含一个私有成员 StudentID。现在我在另一个类中创建了一个 Student 类的对象，我的要求是更改 StudentID 的值。是否可以访问 StudentID 并更改其值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T11:34:43.573

简而言之：没有。

在长：取决于。

您可以通过属性公开私有字段

```
private int _studentID;
public int StudentID
{
   get { return _studentID; }
   set { _studentID = value; }
} 
```

但不知何故，我认为这不是你所追求的。

私有字段是私有**的，**如果您不希望它是私有的，那么就不要让它私有，或者通过如上所示的属性公开它。

如果您确实需要访问私有字段并设置其值，那么您可以采用反射路线：

```
var a = new abc();
a.GetType().GetField("x", 
   System.Reflection.BindingFlags.Instance | System.Reflection.BindingFlags.NonPublic).SetValue(a, 12); 
```

您获取类型，然后使用 Instance 和 NonPublic 字段提取字段，然后设置值。

所以：

```
public sealed class SomeClass
{
    private int _studentID = 0;

    public int StudentID
    {
        get
        {
            return _studentID;
        }

        set
        {
            _studentID = value;
        }
    }
} 
```

将是“正确”的方式，但使用反射你可以做到

```
var someclass = new SomeClass();
        someclass.GetType()
            .GetField("_studentID",
                System.Reflection.BindingFlags.NonPublic |
                 System.Reflection.BindingFlags.Instance)
            .SetValue(someclass, 12); 
```

如果你想使用反射，那么你可以使用扩展方法助手：

```
public static class FieldExtensions
{
    public static void SetPrivateField<T>(this T instance, string field, object value)
    {
        typeof(T).GetField(field, System.Reflection.BindingFlags.Instance | System.Reflection.BindingFlags.NonPublic)
            .SetValue(instance, value);
    }
} 
```

然后使用该扩展方法，您可以在任何对象上设置任何私有字段！

```
var someclass = new SomeClass();
someclass.SetPrivateField("_studentID", 12); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T11:30:22.937

您可以制作访问私有成员值的类的`Public`属性`Student``_StudentId`

```
public class Student
{
    private int _StudentId;

    public int StudentId
    {
        get
        {
            return _StudentId;
        }
        set
        {
            _StudentId = value;
        }
    }
} 
```

现在你可以像这样使用它

```
 Student objStudent = new Student();
    objStudent.StudentId = 5;  // your Id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T11:39:12.987

您可以使用反射来更改私有成员，但这可能不是您想要的。

如果您不想让成员公开，您可以创建一个更改它的公共方法：

```
public class Student {

  private int StudentID;

  public void SetStudentId(int id) {
    StudentID = id;
  }

} 
```

如果不希望公共方法易于访问，可以为它制作一个接口，并专门实现该接口。这样，该方法仅在您具有接口类型的引用时可用，而不是在您具有类类型的引用时可用：

```
public interface IChangeId {
  public void SetStudentId(int id);
}

public class Student : IChangeId {

  private int StudentID;

  void IChangeId.SetStudentId(int id) {
    StudentID = id;
  }

} 
```

例子：

```
Student john = new Student();

john.SetStudentId(42); // not allowed

IChangeId johnSetId = john;

johnSetId.SetStudentId(42); // allowed 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T11:32:00.297

不，你不能。您需要有一个访问学生 ID 私有成员的公共属性，或者您可以使用一些公共方法访问它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T11:32:08.390

也许在构造函数中传递 ID 值是有意义的，所以我会添加另一个接受一些值的构造函数`StudentID`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T11:32:24.187

您可以将其公开：

```
public int StudentId {get;set;} 
```

或者，您可以使用单独的方法来更改它：

```
private int StudentId;

public void ChangeStudentId(int NewStudentId)
{
    StudentId = NewStudentId;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-03T11:32:35.633

干净的方法是将其设为公共属性，或者至少提供一个公共方法来更改 id。

```
public StudentID {get; set;}

// or
public StudentID {get; private set;}
public ChangeStudentID(int newID); 
```

肮脏的方式是反射：

```
var instance = new Student();
var type = instance.GetType();
var propInfo = type.GetProperty("StudentID", BindingFlags.Instance | BindingFlags.NonPublic);
propInfo.SetValue(instance, 14, null); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-03T11:34:43.293

您需要将其封装在公共方法中。最简单的方法（如果您使用的是 Visual Studio Pro 或更高版本）是右键单击声明它的属性，移动到“重构”并单击“封装字段”。VS 自动生成 get 和 set 修饰符。您可以删除eiter 以使该属性为只读或只写。

如果该属性声明为“int studentId”，则生成的封装将位于“Student.StudentId”（注意大写字母）。如果该属性被声明为“int StudentId”，那么据我所知，封装将默认为“Student.StudentId_1”。您可以在创建过程中选择自己的名称。

如果您使用的是 Visual Studio Express 或其他编辑器，只需执行以下操作：

```
public int StudentId() { return this.studentId; } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-03T11:35:04.750

在这种情况下，您可以使用反射：

```
FieldInfo StudentIDField= typeof(Student).GetField("StudentId",BindingFlags.NonPublic | BindingFlags.Public | BindingFlags.Instance);
StudentIDField.SetValue(1); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-04-03T11:35:13.073

您可以通过多种方式更改它......您可以将其`Public`设为属性，或者您可以使用反射来更改它。

实际上，如果您的代码要更改 StudentID 并且现在它与另一个 Student 冲突怎么办？例如，如果您要创建一个控制学生的`StudentCollection`类，则该类可能具有`ChangeId`以下内容：

```
public class StudentCollection : List<Student>
{
   public void ChangeId(Student student, int newId) 
   {
      if(students.Where(s => s.Id == newId).Count() > 0)
         throw new ArgumentException("A student already has that Id");

      student.Id = newId;
   }
} 
```

那时您可以将 Id 设为内部，或使用方法来尝试减少有人直接修改它的机会。

# java - 天线预处理器 - 在哪里指定我的定义？

> ID：15786113
> 
> 赞同：1
> 
> 时间：2013-04-03T11:28:44.047
> 
> 标签：java, preprocessor

我正在尝试在 Eclipse 中使用天线预处理器。要定义一个变量，我要么去天线的 GUI，要么在我有 ifdef 的类中定义。我希望有一个单独的文件来列出我所有的定义。我怎么做？我试图创建另一个类 Defines.java 只是为了保留定义。我在我的java类中导入了这个类，它有//#ifdef。但它不起作用。请帮忙！

# jquery - 链接（这是来自其他页面的 ajax 响应）不适用于 ajax

> ID：15786115
> 
> 赞同：0
> 
> 时间：2013-04-03T11:28:50.890
> 
> 标签：jquery, ajax

这是我的页面上来自 action.php 的输出。来自萤火虫：

```
 <html>
     <body>
       <table>
         <tr>
           <th>Trainer Available</th>
         </tr>
         <tr>
           <td style='width: 200px;'>
  <a href='http://appsmarketing.net/free/action.php?me=1' id='member' class='member' >trainer1</a>
           </td> 
        </tr>
        <tr>
          <td style='width: 200px;'>
             <a href='http://appsmarketing.net/free/action.php?me=2' id='member' class='member' >trainer2</a>
          </td>
        </tr>
     </table>
  </body>
</html> 
```

所以这呈现为：

```
Trainer1
Trainer2 
```

当我点击它时，它会转到 url post，没有使用 ajax。

当用户单击此链接时，我正在使用脚本运行。它正在使用普通的锚选项卡，但它会转到特定的 url，并且不会返回到 ajax 调用页面。实际上，当我单击链接时，从 firebug 中可以看到不使用 ajax .. 这是什么问题？我感谢任何帮助我的人，因为我珍惜你的时间...

这是我正在使用的脚本

```
<script>
$(document).ready(function(){
   $('a.member').click(function(e){ 
     $.ajax({
            type: "GET",
            url: this.href,
            cache:false,
            success: function(data){
                      $("#result2").append(data);
            }
     });
     return false;
}); 
});
</script> 
```

使用普通的html`a`标签，它可以工作..在此先感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:59:31.563

您有两个带有 ID 的元素`member`。ID 应该始终是唯一的。无论如何，您应该删除这两个 ID，因为您已经使用了类。

它不起作用，因为`a.member`当您尝试将点击事件绑定到它时不存在。您可以通过将事件绑定到页面加载时存在的容器来防止此问题，例如`#tabs-2`：

```
$('#tabs-2').on('click', 'a.member', function(e) { 
    e.preventDefault();

    (rest of the code)
} 
```

# vba - 如果您使用 .BeginTrans 而不使用 .CommitTrans 或 .Rollback 会发生什么

> ID：15786117
> 
> 赞同：3
> 
> 时间：2013-04-03T11:28:57.987
> 
> 标签：vba, ms-access

如果您使用 .BeginTrans 和 .Execute 然后在 Access VBA 中退出 .CommitTrans 或 .Rollback 之前的代码，会发生什么情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:50:33.137

丹尼尔的评论几乎总结了这一点。当我运行以下代码时...

```
Sub noCommit()
Dim cdb As DAO.Database, rst As DAO.Recordset
Set cdb = CurrentDb
Set rst = cdb.OpenRecordset("tblSampleData", dbOpenTable)
DBEngine.Workspaces(0).BeginTrans
rst.Edit
rst!Item = "Item1amended"
rst.Update
'' no Commit and no Rollback
End Sub 
```

...然后在数据表视图中打开表，任何编辑两条记录中的任何一条的尝试都会导致记录选择器上出现“哔”声和“无条目”图标。

![禁止驶入](https://i.stack.imgur.com/mYOGW.png)

尝试添加新记录时遇到“无法更新”错误：

![不能更新](https://i.stack.imgur.com/fvt7X.png)

因此，事务中所做的更改不会被写入，并且表处于锁定状态，直到连接关闭（或事务被清除）。由于我的事务基于默认的 Access 连接 ( `DBEngine.Workspaces(0)`)，这意味着要么关闭并重新打开 Access，要么运行以下命令：

```
Sub transRollback()
DBEngine.Workspaces(0).Rollback
End Sub 
```

# .net - 为什么 WCF 休息服务（不是使用 WCF 休息服务模板创建的）不起作用？

> ID：15786120
> 
> 赞同：0
> 
> 时间：2013-04-03T11:29:06.500
> 
> 标签：.net, wcf, iis-7, .net-4.0, wcf-rest

我创建了 WCF Rest 服务，但没有使用 WCF Rest 服务模板。我只是使用了一个简单的类库项目，然后进行了列出的所有设置以创建 WCF Rest 服务。

它编译得很好，我将它部署在 IIS 7 上。当我运行该服务时，它给了我以下错误：

```
The server encountered an error processing the request. Please see the service help page for constructing valid requests to the service. 
```

然后我下载了 WCF Rest 模板并创建了一个示例服务。再次将它部署在 IIS7 上，这工作正常。我还比较了项目、解决方案、参考资料、web.config 和其他文件，没有发现任何区别。**然而 WCF Rest Template 服务正在工作，而另一个曾经不工作......**

有什么想法吗？

问候， 席德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T06:48:02.053

I was able to solve it. The problem was that in the service there was an activator, trying to create an object. This object creation was failing at runtime. So, even though code was compiling the service was not able to get started.

# java - 使用 Jackson 将 Java 对象转换为 JSON

> ID：15786129
> 
> 赞同：209
> 
> 时间：2013-04-03T11:29:39.957
> 
> 标签：java, json, object, jackson

我希望我的 JSON 看起来像这样：

```
{
    "information": [{
        "timestamp": "xxxx",
        "feature": "xxxx",
        "ean": 1234,
        "data": "xxxx"
    }, {
        "timestamp": "yyy",
        "feature": "yyy",
        "ean": 12345,
        "data": "yyy"
    }]
} 
```

到目前为止的代码：

```
import java.util.List;

public class ValueData {

    private List<ValueItems> information;

    public ValueData(){

    }

    public List<ValueItems> getInformation() {
        return information;
    }

    public void setInformation(List<ValueItems> information) {
        this.information = information;
    }

    @Override
    public String toString() {
        return String.format("{information:%s}", information);
    }

} 
```

和

```
public class ValueItems {

    private String timestamp;
    private String feature;
    private int ean;
    private String data;

    public ValueItems(){

    }

    public ValueItems(String timestamp, String feature, int ean, String data){
        this.timestamp = timestamp;
        this.feature = feature;
        this.ean = ean;
        this.data = data;
    }

    public String getTimestamp() {
        return timestamp;
    }

    public void setTimestamp(String timestamp) {
        this.timestamp = timestamp;
    }

    public String getFeature() {
        return feature;
    }

    public void setFeature(String feature) {
        this.feature = feature;
    }

    public int getEan() {
        return ean;
    }

    public void setEan(int ean) {
        this.ean = ean;
    }

    public String getData() {
        return data;
    }

    public void setData(String data) {
        this.data = data;
    }

    @Override
    public String toString() {
        return String.format("{timestamp:%s,feature:%s,ean:%s,data:%s}", timestamp, feature, ean, data);
    }
} 
```

我只是错过了如何使用 Jackson 将 Java 对象转换为 JSON 的部分：

```
public static void main(String[] args) {
   // CONVERT THE JAVA OBJECT TO JSON HERE
    System.out.println(json);
} 
```

我的问题是：我的课程是否正确？我必须调用哪个实例以及如何实现此 JSON 输出？

* * *

## 回答 #1

> 赞同：517
> 
> 时间：2013-04-03T11:31:37.997

要使用 Jackson 转换您`object`的 JSON：

```
import com.fasterxml.jackson.databind.ObjectMapper; 
import com.fasterxml.jackson.databind.ObjectWriter; 

ObjectWriter ow = new ObjectMapper().writer().withDefaultPrettyPrinter();
String json = ow.writeValueAsString(object); 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2015-08-17T19:07:37.553

我知道这是旧的（而且我是 java 新手），但我遇到了同样的问题。而且答案对我来说不像新手那么清楚......所以我想我会添加我学到的东西。

我使用了第三方库来帮助完成这项工作：`org.codehaus.jackson` 所有的下载都可以在[这里](http://mvnrepository.com/artifact/org.codehaus.jackson)找到。

对于基本 JSON 功能，您需要将以下 jar 添加到项目的库中： [jackson-mapper-asl](http://mvnrepository.com/artifact/org.codehaus.jackson/jackson-mapper-asl) 和 [jackson-core-asl](http://mvnrepository.com/artifact/org.codehaus.jackson/jackson-core-asl)

选择您的项目需要的版本。（通常您可以使用最新的稳定版本）。

将它们导入项目的库后，将以下行添加`import`到您的代码中：

```
 import org.codehaus.jackson.JsonGenerationException;
 import org.codehaus.jackson.map.JsonMappingException;
 import com.fasterxml.jackson.databind.ObjectMapper; 
```

使用您希望转换为 JSON 并作为 RESTful Web 服务的一部分返回的 java 对象定义和分配的值

```
User u = new User();
u.firstName = "Sample";
u.lastName = "User";
u.email = "sampleU@example.com";

ObjectMapper mapper = new ObjectMapper();

try {
    // convert user object to json string and return it 
    return mapper.writeValueAsString(u);
}
catch (JsonGenerationException | JsonMappingException  e) {
    // catch various errors
    e.printStackTrace();
} 
```

结果应如下所示： `{"firstName":"Sample","lastName":"User","email":"sampleU@example.com"}`

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-05-17T06:38:14.863

这可能有用：

```
objectMapper.writeValue(new File("c:\\employee.json"), employee);

// display to console
Object json = objectMapper.readValue(
     objectMapper.writeValueAsString(employee), Object.class);

System.out.println(objectMapper.writerWithDefaultPrettyPrinter()
     .writeValueAsString(json)); 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2015-05-21T15:09:36.593

只需遵循以下任何一项：

*   对于**杰克逊**，它应该工作：

    ```
     ObjectMapper mapper = new ObjectMapper();  
          return mapper.writeValueAsString(object);
          //will return json in string 
    ```

*   对于**gson**，它应该可以工作：

    ```
     Gson gson = new Gson();
        return Response.ok(gson.toJson(yourClass)).build(); 
    ```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2019-02-11T21:19:04.307

你可以这样做：

```
String json = new ObjectMapper().writeValueAsString(yourObjectHere); 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2019-05-18T02:21:21.813

您可以像这样使用 Google Gson

```
UserEntity user = new UserEntity();
user.setUserName("UserName");
user.setUserAge(18);

Gson gson = new Gson();
String jsonStr = gson.toJson(user); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-01-21T03:32:07.643

好吧，即使是接受的答案也不能*完全*输出 op 的要求。它输出 JSON 字符串，但`"`字符已转义。所以，虽然可能有点晚，但我正在回答，希望它会对人们有所帮助！这是我的做法：

```
StringWriter writer = new StringWriter();
JsonGenerator jgen = new JsonFactory().createGenerator(writer);
jgen.setCodec(new ObjectMapper());
jgen.writeObject(object);
jgen.close();
System.out.println(writer.toString()); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-10-24T07:20:21.310

注意：要使投票最多的解决方案起作用，POJO 中的属性必须是`public`或具有公共`getter`/ `setter`：

> 默认情况下，Jackson 2 仅适用于公共字段或具有公共 getter 方法的字段——序列化具有所有字段私有或包私有的实体将失败。

尚未测试，但我相信此规则也适用于其他 JSON 库，如 google Gson。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-09-20T15:23:44.093

```
public class JSONConvector {

    public static String toJSON(Object object) throws JSONException, IllegalAccessException {
        String str = "";
        Class c = object.getClass();
        JSONObject jsonObject = new JSONObject();
        for (Field field : c.getDeclaredFields()) {
            field.setAccessible(true);
            String name = field.getName();
            String value = String.valueOf(field.get(object));
            jsonObject.put(name, value);
        }
        System.out.println(jsonObject.toString());
        return jsonObject.toString();
    }

    public static String toJSON(List list ) throws JSONException, IllegalAccessException {
        JSONArray jsonArray = new JSONArray();
        for (Object i : list) {
            String jstr = toJSON(i);
            JSONObject jsonObject = new JSONObject(jstr);
            jsonArray.put(jsonArray);
        }
        return jsonArray.toString();
    }
} 
```

# svn - 禁止访问“/svn/ctm/!svn/me”何时提交到 svn 服务器？

> ID：15786130
> 
> 赞同：11
> 
> 时间：2013-04-03T11:29:42.603
> 
> 标签：svn

我可以从 svn 服务器签出，但我不能提交更改。错误信息如下所示：

> 禁止访问“/svn/repo/!svn/me”

[错误截图](http://ww4.sinaimg.cn/mw690/afba20ebgw1e3cng9gz8oj.jpg)

为了解决这个问题，我搜索了互联网，但没有找到有用的解决方案。

这是关于我在 apache 上部署的 svn 服务器的一些信息：

*   操作系统：windows 7 32bits；
*   服务器：Apache/2.2.22 (Win32) SVN/1.7.8 PHP/5.4.3 mod_wsgi/3.5-BRANCH Python/2.7.3 DAV/2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T11:35:16.073

我最近遇到了这个问题，发现了两件事：

1.  存储库所在的驱动器上的空间已用完。SVN 失败并显示访问禁止消息。
2.  存在阻止访问的权限问题，您需要通过它进行 chmod。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T12:56:14.853

我只是遇到了同样的问题，解决方案在路径名和大小写中。我检查了一些项目，并在结帐时输入了一个带有错误大小写的路径字母：

像这样的东西： - [http://svn.enterprise.org/svn/Repo/trunk/](http://svn.enterprise.org/svn/Repo/trunk/) ...（虽然我应该输入“repo”，而不是“Repo”）。

然后我可以制作一个没有问题的“svn up”或“svn co”。但是当提交（回到“回购”）apache模块时，它检查我是否有写权限只知道路径“回购”，因此错误消息。

我的解决方案是删除所有内容并在 SVN-URL 中使用正确的大小写再次签出。（svn 开关也可以，错字在最右边）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-23T11:39:39.847

请检查您是否在用户访问文件中设置了读/写权限，例如

```
user1 = rw
user2 = rw 
```

等对于 authz 文件中的每个用户，例如

```
/etc/apache2/dav_svn.authz 
```

使用时

```
AuthzSVNAccessFile /etc/apache2/dav_svn.authz 
```

在

```
/etc/apache2/mods-available/dav_svn.conf 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-22T09:12:03.677

由于用户访问权限，我解决了这个问题。

我与另外 2 位软件开发人员合作，并且由于访问具有 AD 用户配置的存储库而长期存在此问题。每 3 个月更改一次密码时，过去的密码会缓存在 Visual SVN 管理器中。然后得到 !svn/me 这个错误

我们将 SVN Manager 更改为不使用 AD 系统，然后我们就没有更多问题了。

# asp.net - 在 asp.net 中将购物车总变量传递给 Paypal

> ID：15786138
> 
> 赞同：0
> 
> 时间：2013-04-03T11:29:58.207
> 
> 标签：asp.net, paypal

在实施 Paypal 时，我设法将其设置为发送设定值，例如 25 英镑，但不是篮子中的变量，例如“GrandTotal”，这取决于客户在购物车中输入的内容（我创建了自己的购物车。 )

```
<form action="paypal.com/cgi-bin/webscr"; method="post">
<input type="hidden" name="cmd" value="_xclick">
<input type="hidden" name="business" value="you@youremail.com">
<input type="hidden" name="item_name" value="Item Name">
<input type="hidden" name="currency_code" value="GBP">
<input type="hidden" name="amount" value="25.00"> 
<input type="image" src="paypal.com/en_US/i/btn/x-click-but01.gif"; name="submit" alt="Make payments with PayPal - it's fast, free and secure!"> </form> 
```

您知道如何发送变量而不是设定数量吗？下面的代码是否接近解决方案？

```
<input type="hidden" name="amount" value="GrandTotal"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:14:57.447

您不能`form tag`在 ASP.Net 页面中插入您的页面（除非 iframe），因为 ASP.Net 只允许在页面中使用一个表单标签。

你想在后面的代码中类似这样。它基本上收集用户输入的金额和数量，然后将其发送回 PayPal。

```
protected void PayButton_Click(object sender, EventArgs e) {

 string paypalUrl = IsTestMode ? 
   "https://www.sandbox.paypal.com/us/cgi-bin/webscr" : 
   "https://www.paypal.com/us/cgi-bin/webscr";

 var builder = new StringBuilder();

 builder.Append(paypalUrl);

 builder.AppendFormat("?cmd=_xclick&business={0}", 
    HttpUtility.UrlEncode(you@youremail.com));

 builder.Append("&lc=US&no_note=0&currency_code=GBP");

 builder.AppendFormat("&item_name={0}", 
    HttpUtility.UrlEncode(YourItemName));

 builder.AppendFormat("&amount={0}", AmountTextBox.Text);

 builder.AppendFormat("&return={0}", 
    HttpUtility.UrlEncode("http://mysite.cm/ReturnUrl"));

 builder.AppendFormat("&cancel_return={0}", 
    HttpUtility.UrlEncode("http://mysite.cm/CancelUrl"));

 builder.AppendFormat("&undefined_quantity={0}", QuantityTextBox.Text);

 HttpContext.Current.Response.Redirect(builder.ToString());

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:37:29.767

您可以通过在输入字段标签中添加 runat="server" 来制作输入字段服务器端，并可以从 .cs 文件中设置它的值

field.value=总计；

您的 aspx 页面代码

```
<form name="_xclick" target="paypal" action="https://www.paypal.com/cgi-bin/webscr"
method="post" runat="server">
<input type="hidden" name="cmd" value="_xclick" />
<input type="hidden" name="business" value="you@youremail.com" />
<input type="hidden" name="item_name" value="Item Name" />
<input type="hidden" name="currency_code" value="GBP" />
<input type="hidden" name="amount" id="amount" runat="server" />
<input type="image" src="https://www.paypal.com/en_US/i/btn/view_cart.gif" border="0"
    name="submit" alt="Make payments with PayPal - it's fast, free and secure!">
<input type="hidden" name="display" value="1">
</form> 
```

您的页面代码受保护的代码后面的代码 void Page_Load(object sender, EventArgs e) {

```
 if(!IsPostBack)
    {

        amount.Value = "25.25";
    }

} 
```

# sql - 根据下一个创建记录创建日期更新一个为空的 end_dt 列

> ID：15786141
> 
> 赞同：1
> 
> 时间：2013-04-03T11:30:09.160
> 
> 标签：sql

例子：

根据下一个创建记录创建日期更新一个为空的 end_dt 列

当前情况：

```
CUST_ID         CREATED_DT          END_DT
1       3/25/2013 6:51:33 PM        
1       3/25/2013 6:23:58 PM    
1       3/25/2013 5:02:07 PM    
1       3/12/2013 9:18:21 AM    
1       3/8/2013 12:47:13 PM    
1       1/25/2013 7:24:02 AM    
1       1/23/2013 11:26:31 AM   
1       11/13/2012 8:55:31 AM 
```

需要：

```
CUST_ID         CREATED_DT          END_DT
1       3/25/2013 6:51:33 PM        
1       3/25/2013 6:23:58 PM        3/25/2013 6:51:33 PM    
1       3/25/2013 5:02:07 PM        3/25/2013 6:23:58 PM
1       3/12/2013 9:18:21 AM        3/25/2013 5:02:07 PM
1       3/8/2013 12:47:13 PM        3/12/2013 9:18:21 AM
1       1/25/2013 7:24:02 AM        3/8/2013 12:47:13 PM    
1       1/23/2013 11:26:31 AM       1/25/2013 7:24:02 AM
1       11/13/2012 8:55:31 AM       1/23/2013 11:26:31 AM 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:53:14.360

假设 SQL Server：

```
UPDATE c
SET END_DT=(SELECT TOP 1 CREATED_DT FROM CustDates WHERE CUST_ID=c.CUST_ID AND 
CREATED_DT>c.CREATED_DT ORDER BY CREATED_DT)
FROM CustDates c 
```

# asp.net - 编辑器控件 - Asp.Net

> ID：15786142
> 
> 赞同：0
> 
> 时间：2013-04-03T11:30:12.053
> 
> 标签：asp.net, rad

我对 asp.net 很陌生，有人可以建议我在 asp.net 中实现以下解释的功能的选项吗

1）我需要创建一个模板（系统/用户首选项），如下所示

![在此处输入图像描述](https://i.stack.imgur.com/B85fc.png)

我想我可以为此使用 TinyMCE/Rad 编辑器之类的控件，请。建议

2）如上所述创建的模板应该被持久化，稍后用于创建实际（html）内容并将其显示在（文字）控件中，如下所示

![在此处输入图像描述](https://i.stack.imgur.com/tcSFH.png)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:40:26.773

试试： http: [//freetextbox.com/](http://freetextbox.com/)

FreeTextBox HTML 编辑器：[演示](http://freetextbox.com/demos/everything.aspx)

和

[http://www.tinymce.com/](http://www.tinymce.com/)

TinyMCE - Javascript 所见即所得编辑器：[演示](http://www.tinymce.com/tryit/full.php)

# markdown - 如何在 Octopress 的 markdown 中转义 {{？

> ID：15786144
> 
> 赞同：6
> 
> 时间：2013-04-03T11:30:13.780
> 
> 标签：markdown, octopress

我正在使用 Octopress 发布博客，我想发布以下代码片段（它是 Mustache JS 语法）：

```
```
<ul id="beers-list">
    {{#beers}}
        <li>{{name}} - {{color}} - {{alcohol}}%</li>
    {{/beers}}
</ul>
``` 
```

不幸的是，当渲染时，一切都`{{...}}`消失了，我在我的网站上看到以下内容：

```
<ul id="beers-list">

        <li> -  - %</li>

</ul> 
```

我无法逃脱`{{`(即使有`\{{`,`{\{`或类似的东西。有没有办法逃脱这些字符？

谢谢。

*我不确定 SO 是否是解决这个问题的更好网站*

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-03T12:01:47.353

感谢另一个非常相似的问题（和答案）[here](https://stackoverflow.com/a/13582517/26457)，我找到了解决方案。我必须用`{% raw %}`and包装我的代码块`{% endraw %}`：

```
{% raw %}
```
<ul id="beers-list">
    {{#beers}}
        <li>{{name}} - {{color}} - {{alcohol}}%</li>
    {{/beers}}
</ul>
```
{% endraw %} 
```

# php - 使用表格时的 PHP 和 HTML 格式问题

> ID：15786154
> 
> 赞同：-1
> 
> 时间：2013-04-03T11:30:30.110
> 
> 标签：php, html, foreach, html-table

我一直在通过这样做来学习这一点，因此我遇到了一个我似乎无法解决的恼人问题。

当内容被回显到表格而不是创建一个包含内容的表格时，它会创建多个表格。

我越来越 ：

表格1 ：

*   标头1 --------标头2
*   成就1 - 成就时间

表2：

*   标头1 --------标头2
*   成就2 - 成就时间

我期待着 ：

表格1

*   标头1 --------标头2
*   成就1 - 成就时间
*   成就2 - 成就时间

我试过array_merge，我试过将成就ID设置为键，我什至尝试了多个foreach语句，但这似乎会拉出重复项以及创建额外的表。如果有人不介意告诉我我做错了什么，我会非常感激。

```
<?php
// Define cache file
$cache_file = "cache.txt";

// Cache file is less than thirty minutes old.
if (file_exists($cache_file) && (filemtime($cache_file) > (time() - 60 * 30  ))) {

// Don't bother refreshing, just use the file as-is.
$file = file_get_contents($cache_file);

// Our cache is out-of-date, so load the data from our remote server,
// and also save it over our cache for next time.
} else {
$file = file_get_contents('http://eu.battle.net/api/wow/guild/chamber-of-aspects/requiem%20paradisum?fields=achievements');
file_put_contents($cache_file, $file, LOCK_EX);
}

// Decode cache file
$achie = json_decode($file);

// Seperate achievements and timestamps as variables
$achiachi = ($achie->achievements->achievementsCompleted);
$achitime = ($achie->achievements->achievementsCompletedTimestamp);
foreach(array_combine($achiachi, $achitime) as $f => $n){

// Combine achievement number into Link for wowhead script
$achilink = ("http://www.wowhead.com/achievement=". $f);

// Sort out time formatting
$unix = ($n);
$not_unix = $unix / 1000;
$date = date("F d Y @ h:i A", $not_unix);

//Print into table
echo "
<table align=center class=mytable cellpadding=8 style=font-family:verdana;font-size:8pt;color:white;>
<tr>
        <th>Achievement</th><th>Timestamp</th>
<tr>
      <td><a href=\"$achilink\" rel=\"item=$achiachi\"></a></td>
      <td>$date</td>
</tr>
</table>
";
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:34:36.897

为什么不将 table 和 th 标签放在循环之外？：

```
echo "<table align=center class=mytable cellpadding=8 style=font-family:verdana;font-size:8pt;color:white;>";
echo "<tr><th>Achievement</th><th>Timestamp</th></tr>";
foreach(array_combine($achiachi, $achitime) as $f => $n){

// Combine achievement number into Link for wowhead script
$achilink = ("http://www.wowhead.com/achievement=". $f);

// Sort out time formatting
$unix = ($n);
$not_unix = $unix / 1000;
$date = date("F d Y @ h:i A", $not_unix);

//Print into table
echo "<tr>
      <td><a href=\"$achilink\" rel=\"item=$achiachi\"></a></td>
      <td>$date</td>
</tr>";
}
echo "</table>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T11:37:20.250

我认为您必须在 for 循环之外回显 and first for 标头

# eclipse - spring data hadoop map reduce job thrwoing no class found exception

> ID：15786155
> 
> 赞同：0
> 
> 时间：2013-04-03T11:30:31.307
> 
> 标签：eclipse, hadoop, spring-data

我正在尝试使用带有 hadoop 版本 0.20.0 和 spring - hadoop 版本 1.0 的 spring data appache hadoop 运行 map-reduce 作业。

我在运行地图任务时没有发现异常。请帮忙。

```
 Apr 3, 2013 4:30:13 PM org.springframework.context.support.AbstractApplicationContext prepareRefresh
INFO: Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@19b8e059: startup date [Wed Apr 03 16:30:13 GMT+05:30 2013]; root of context hierarchy
Apr 3, 2013 4:30:13 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from class path resource [applicationContext.xml]
Apr 3, 2013 4:30:14 PM org.springframework.core.io.support.PropertiesLoaderSupport loadProperties
INFO: Loading properties file from class path resource [application.properties]
Apr 3, 2013 4:30:14 PM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@f9da4fc: defining beans [org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0,hadoopConfiguration,wordCountJob,wordCountJobRunner]; root of factory hierarchy
Apr 3, 2013 4:30:15 PM org.springframework.data.hadoop.mapreduce.JobExecutor$2 run
INFO: Starting job [wordCountJob]
Apr 3, 2013 4:30:15 PM org.apache.hadoop.mapred.JobClient configureCommandLineOptions
WARNING: No job jar file set.  User classes may not be found. See JobConf(Class) or JobConf#setJar(String).
Apr 3, 2013 4:30:15 PM org.apache.hadoop.mapreduce.lib.input.FileInputFormat listStatus
INFO: Total input paths to process : 1
Apr 3, 2013 4:30:15 PM org.apache.hadoop.mapred.JobClient monitorAndPrintJob
INFO: Running job: job_201304011410_0007
Apr 3, 2013 4:30:16 PM org.apache.hadoop.mapred.JobClient monitorAndPrintJob
INFO:  map 0% reduce 0%
Apr 3, 2013 4:30:27 PM org.apache.hadoop.mapred.JobClient monitorAndPrintJob
INFO: Task Id : attempt_201304011410_0007_m_000000_0, Status : FAILED
java.lang.RuntimeException: java.lang.ClassNotFoundException: com.apple.icloud.WordMapper
    at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:809)
    at org.apache.hadoop.mapreduce.JobContext.getMapperClass(JobContext.java:157)
    at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:569)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:305)
    at org.apache.hadoop.mapred.Child.main(Child.java:170)
Caused by: java.lang.ClassNotFoundException: com.apple.icloud.WordMapper
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:247)
    at org.apache.hadoop.conf.Configuration.getClassByName(Configuration.java:762)
    at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:807)
    ... 4 more 
```

# cloud - 是否可以使用 Glance 创建一个导入 *.ovf 文件的 OpenStack 映像？

> ID：15786156
> 
> 赞同：2
> 
> 时间：2013-04-03T11:30:31.977
> 
> 标签：cloud, openstack, iaas

是否可以使用 Glance 创建导入 ovf 文件的 OpenStack 映像？

EDIT_1：我对创建图像感兴趣，只需提供其 ovf 文件

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-07T20:18:51.063

您可以将 .ovf 导入 Glance，但它目前无法从中提取任何数据。未来的版本可能具有此功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T23:16:48.783

ovf 似乎得到支持。

在此处查看所有图像/容器类型：

[http://docs.openstack.org/developer/glance/formats.html](http://docs.openstack.org/developer/glance/formats.html)

# entity-framework - 实体框架 - 持久化 POCO 实体图

> ID：15786160
> 
> 赞同：0
> 
> 时间：2013-04-03T11:30:40.267
> 
> 标签：entity-framework

在我的应用程序中，我需要检索一个大型实体图，*在分离*时进行各种更改（添加实体、进行更改、删除实体），然后将图保存回数据库。我已经尝试过 STE，但它开始使我的客户端层的某些方面过于复杂，所以我希望通过使用 POCO 来保持简单（至少在客户端）。

在持久化更改时，我想我可以再次从数据库中检索图形，然后从客户端层遍历该图形和图形，寻找差异：-

*   如果实体存在于数据库图中但不存在于客户端图中，则会执行删除操作。大概我可以`.Remove()`从数据库图中获取这些。
*   新实体是客户端图中 ID 为 0 的实体。大概我可以将`.Add()`这些实体添加到数据库图中。
*   我不确定处理更新的最佳方式。我不想在我的实体上实现“IsDirty”标志，并且更喜欢更自动化的解决方案。所以a）有没有办法将客户端图中的实体与其数据库对应物进行比较，以查看它是否已更改，以及b）将客户端实体应用/合并到其数据库对应物的最佳方法是什么？

完成所有这些后，我大概只需在数据库图上调用 SaveChanges() 即可。我还必须将此图传递回客户端，以确保它具有最新版本（数据库生成的值，例如 ID、时间戳）。

我的解决方案是否过于简单？如果可行，我该如何处理上述更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:51:28.530

您的解决方案可以工作，但实现起来并不简单 - 特别是如果您尝试以某种通用的方式执行它（检查[这个问题](https://stackoverflow.com/questions/3635071/update-relationships-when-saving-changes-of-ef4-poco-objects)的答案- 有人提供了一个应该已经实现的代码库）。它还会给数据库带来大量额外的流量，因此当您期望负载很重时，这绝对不是一个好方法。最简单的解决方案是@Gert Arnold 提到的。

# php - 为什么在我调用 $.mobile.changePage 后页面不显示

> ID：15786163
> 
> 赞同：1
> 
> 时间：2013-04-03T11:30:46.830
> 
> 标签：php, jquery-mobile

我在这里搜索了问题，我可能只是不明白，这是我的代码

当我调用 check-event.html 页面加载正常。当我使用我的 php 脚本 check-event.php 中的 $.mobile.changePage 调用 check-event-details.html 时，除了标题之外没有任何加载。这一切都适用于 window.location = 但我想使用 ajax 运动。

索引.html

```
 <!DOCTYPE HTML>
<html>
<head>
      <meta charset="utf-8" />
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black" />
        <title>
        </title>
        <link rel="stylesheet" href="css/logout-button.min.css" />
        <link rel="stylesheet" href="css/jquery.mobile-1.3.0.min.css" />
        <link rel="stylesheet" href="css/my.css" />
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        </script>
        <script src="js/jquery.mobile-1.3.0.min.js"></script>
        <script src="js/jquery.cookies.2.2.0.min.js"></script>

<script type="text/javascript">
var uid = $.cookies.get( 'uid' );
 if(uid == null)
                 {
                window.location ='account-login.html'; }
                 else
                 { }
</script>
</head>

<body>
   <div data-role="page" id="index">
            <div data-theme="a" data-role="header">
                <h3>
                   Options
                </h3>
            </div>

             <div data-role="content">
        <ul data-role="listview" data-divider-theme="b" data-inset="true">
            <li data-role="list-divider" role="heading">
                Menu
            </li>
            <li data-theme="c">
                <a href="event-details.html" data-transition="slide">
                    Create Event
                </a>
            </li>
            <li data-theme="c">
                <a href="check-events.html" data-transition="slide">
                    Check Events
                </a>
            </li>
        </ul>
    </div>     
    <div data-role="content">
        <a data-role="button" id="logout" data-icon="info" data-theme="f" data-iconpos="left">Log-Out</a>
    </div>  
</body>

<script>
$("#logout").click( function()
           {
             $.cookies.del( 'uid' );
             $.cookies.del( 'pass' );
             window.location ='account-login.html';
           }
        );
    </script>

</html> 
```

检查事件.html

```
<!DOCTYPE HTML>
<html>
<head>
      <meta charset="utf-8" />
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black" />
        <title>
        </title>
        <link rel="stylesheet" href="css/logout-button.min.css" />
         <link rel="stylesheet" href="css/jquery.mobile-1.3.0.min.css" />
        <link rel="stylesheet" href="css/my.css" />
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        </script>
        <script src="js/jquery.mobile-1.3.0.min.js"></script>
        <script src="js/jquery.cookies.2.2.0.min.js"></script>

<script type="text/javascript">
var uid = $.cookies.get( 'uid' );
 if(uid == null)
                 {
                window.location ='account-login.html'; }
                 else
                 { }
</script>
</head>

<body>

   <div data-role="page" id="index1">

           <div data-theme="a" data-role="header">
        <a data-role="button" data-direction="reverse" data-rel="back" data-transition="slide"
         data-icon="arrow-l" data-iconpos="left" class="ui-btn-left">
            Back
        </a>
        <h3>
           Check Events
        </h3>
    </div>

 <div data-role="content">

 <div id="content"></div>

        <script>
            $(function(){
            $("#content").load(("check-events.php"), function(){
            $('#content').trigger("create");
        });
        return false;

});
</script>

    </div>  
</body>
</html> 
```

检查事件.php

```
<?
require_once("../backend/functions.php");
dbconn();
?>
<script>
 $('form').submit( function(){
       return submitForm.call( this );
 });
</script>
<script>
function submitForm() {
       // alert the id of the form that was clicked

    var eventid = this.id;
    $.cookies.set( 'eventidcookie', eventid );
    $.mobile.changePage( "check-events-details.html", { transition: "slide"} );

    return false;
}
</script>

<?
 //window.location ='check-events-details.html';   
 $id = $CURUSER["id"]; 
 $e= date("Y/m/d");              
    $a = SQL_Query_exec("SELECT * FROM cal_events WHERE userid = '$id' AND enddate > '$e' ORDER BY enddate ASC");

if (mysql_num_rows($a) == 0) {
?>
<script>
alert("You have no active events to deal with");
window.location ='index.html'; 
</script>
<?
}else{
while($rowa = mysql_fetch_array($a))
{ 
?>
<form id="<? echo $rowa[eventid]; ?>">
 <ul data-role="listview" data-divider-theme="b" data-inset="true">
            <li data-role="list-divider" role="heading">
                Finishing Time: <? echo date("jS F Y",strtotime($rowa[enddate])); ?>
            </li>
            <li data-theme="c">
               <input type="submit" value="<? echo $rowa[eventname]; ?>" id="submitEventButton">
            </li>
        </ul>
</form>
<?
}
}
?> 
```

检查事件详细信息.html

```
<!DOCTYPE HTML>
<html>
<head>
      <meta charset="utf-8" />
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black" />
        <title>
        </title>
        <link rel="stylesheet" href="css/logout-button.min.css" />
         <link rel="stylesheet" href="css/jquery.mobile-1.3.0.min.css" />
        <link rel="stylesheet" href="css/my.css" />
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        </script>
        <script src="js/jquery.mobile-1.3.0.min.js"></script>
        <script src="js/jquery.cookies.2.2.0.min.js"></script>

<script type="text/javascript">
var uid = $.cookies.get( 'uid' );
 if(uid == null)
                 {
                window.location ='account-login.html'; }
                 else
                 { }
</script>
</head>

<body>

   <div data-role="page" id="index2">

           <div data-theme="a" data-role="header">

        <h3>
           Check Event Details
        </h3>
    </div>

 <div data-role="content">

 <div id="content"></div>

        <script>
            $(function(){
            $("#content").load(("check-events-details.php"), function(){
            $('#content').trigger("create");
        }).trigger("create");
        return false;

});
</script> 
```

从 Jquery Website 这就是 jQuery Mobile 当前仅支持通过 AJAX 加载单页文档的原因。要导航到多页文档，您必须通过添加 data-ajax="false" 属性来禁用链接上的 ajax。还有一个小部件允许通过以下方式支持子页面

# javascript - 如果找到值，则从同一对象中获取另一个值

> ID：15786166
> 
> 赞同：-3
> 
> 时间：2013-04-03T11:31:05.130
> 
> 标签：javascript, json

谁能告诉我是否可能？

基本上，我想搜索一组 json 对象，如果我在其中一个对象中找到特定值，我想从同一个对象中获取其他值。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:35:01.813

```
var myArrayObject = $.parseJSON(<string>);

for(var i = 0;i <myArrayObject.length; i++){
   if (myArrayObject[i] == "<your specified value>")   {
        // your code here
   }
} 
```

# c++ - 全局运算符和多态性

> ID：15786169
> 
> 赞同：6
> 
> 时间：2013-04-03T11:31:11.990
> 
> 标签：c++, polymorphism, operators

我有两个班级，有两个 global `friend oparator<<`。

```
class A {
    friend std::ostream& operator<<(std::ostream& o, const A &a);
};

class B: public A {
    friend std::ostream& operator<<(std::ostream& o, const B &b);
}; 
```

如果我这样使用它，一切正常，`B`运算符的版本被调用：

```
B b;
std::cout << b; 
```

但是，如果我使用多态性，则会`A`调用该版本，尽管动态类型是`B`：

```
A* b = new B();
std::cout << *b; 
```

一种解决方案是铸造：

```
std::cout << static_cast<B&>(*b); 
```

但是有没有更简单或更优雅的解决方案呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T11:35:58.877

是的。类中的一个输出运算符和`virtual print`函数。

```
class A
{
public:
   virtual ~A() {}
private:
   virtual void print(std::ostream&) {}
   friend std::ostream& operator << (std::ostream& os, const A& obj)
   {
      obj.print(os);
      return os;
   }
};

class B
{
private:
   virtual void print(std::ostream&) {}
}; 
```

[活生生的例子](http://liveworkspace.org/code/6UxBr%243)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T11:38:12.100

派生类中的函数版本只有在您通过指向基类的指针访问它们时才会被调用，如果您将它们定义为，`virtual`因为编译器不知道指针指向的对象的类实际上是什么。

这里的问题是您正在定义友元函数，因此它们本身不能是虚拟的，解决方案很简单：让 A`operator<<`调用一个虚拟函数的实现`A`，然后您可以重载 in `B`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T11:42:07.330

只是不要使用朋友。它们是比继承更紧密的耦合。特别是如果您为类模板编写这些友元运算符，则可以对其进行专门化并合法地访问您的类的内部结构。由于这些原因，我仅将这些运算符用作语法糖，并让它们委托给执行实际工作的成员函数。这样，您的问题的解决方案就很容易了：

```
class A {
public:
  virtual std::ostream& printToStream(std::ostream& os) const;
};

std::ostream& operator<<(std::ostream& os, A const& a)
{ return a.printToStream(os); } 
```

* * *

```
class B: public A {
  virtual std::ostream& printToStream(std::ostream& os) const;
}; 
```

有另一个从 A 派生的 C 类吗？没问题，不需要再次定义语法糖（即`operator<<`），只需定义实际工作的完成方式，即覆盖`printToStream`- 这就是我将其设为虚拟的原因。

# jquery - 双击选择列表到选定列表

> ID：15786170
> 
> 赞同：3
> 
> 时间：2013-04-03T11:31:13.720
> 
> 标签：jquery

我是 jQuery 世界的新手。我有两个 ul 列表。我希望能够双击 Select 侧并将项目克隆/复制到 Selected 列表中。这就是我想出的。

```
<form>
    <ul id="selection">
    <li><input type="hidden" id="tid" value="1" />Apple</li>
    <li><input type="hidden" id="tid" value="2" />Orange</li>
    <li><input type="hidden" id="tid" value="3" />Pear</li>
    </ul>
    <ul id="selected">
    <li><input type="hidden" id="tid" value="4" />Mango</li>
    </ul>
</form> 
```

和 jQuery 移动项目...

```
$(function () {
    $("form li").dblclick(function(){
        $('#selected').append($('input[type="hidden"]').clone());
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T11:37:56.450

试试这个 ：

```
$(function () {
    $("form li").dblclick(function(){
        $('#selected').append($(this).clone())
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T11:36:08.600

你快到了，但你需要追加整个`li`：

```
$("form li").dblclick(function(){
    $('#selected').append($(this).clone());
}); 
```

看到这个[jsFiddle 演示](http://jsfiddle.net/6NEwH/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T11:37:39.327

你应该写

```
$(function () {
    $("form li").dblclick(function(){
        $('#selected').append($(this).clone()));
    });
}); 
```

# java - 获取从 Singleton 范围 bean 到 SessionScope bean 的属性（春季 3.0.5。）

> ID：15786178
> 
> 赞同：1
> 
> 时间：2013-04-03T11:31:50.900
> 
> 标签：java, spring, session-scope

我有用于管理语言的单例范围 bean

```
@Service(AppService.LANGUAGE)
@Scope(Lifetime.SINGLETON)
public class LanguageServiceImpl extends BaseService implements LanguageService {
    public static final Long RU_LOCALE_ID = 1L;
    public static final Long EN_LOCALE_ID = 2L;

    private List<LanguageBean> languageBeans;

    @ManagedProperty(value = ManagedInit.SESSION_REP)
    private SessionRepository sessionRep;

    public LanguageServiceImpl() {
    }

    @PostConstruct
    private void ensureLanguages() throws Exception {
        loadLanguages();
        Map<String, Long> locales = createLangIdMap();
        sessionRep.setLangIdMap(locales);
    }
} 
```

和 Session 范围 bean 用于保存不同的信息。据我了解，如果类中存在 PostConstruct 方法，则会调用它

```
@Component(AppComponent.SESSION_REP)
@Scope(Lifetime.SESSION)
public class SessionRepository implements Serializable {
private Map<String, Long> langIdMap;

    @PostConstruct
    private void setDefaults() throws Exception{
        FacesContext context = FacesContext.getCurrentInstance();
        /*Locale defaultLocale = context.getApplication().getDefaultLocale();*/
        Locale defaultLocale = new Locale("ru");
        locale = defaultLocale.getLanguage();
        adminLocaleId = LanguageServiceImpl.RU_LOCALE_ID;
        backOutcomePage = new Stack<String>();

        appContext = context.getExternalContext().getRequestContextPath();
        completedWord = ResourceManager.getResource(PropertyEnum.CONTENT_MESSAGE).getProperty(COMPLETED_WORD, locale);
        saveWord = ResourceManager.getResource(PropertyEnum.CONTENT_MESSAGE).getProperty(SAVE_WORD, locale);    

    } 
```

但是在调试中，我得到 n 这一行`sessionRep.setLangIdMap(locales);`NullPointerException 因为 sessionRep 为空。

我该如何解决这个问题？

# java - 由于Oracle太快或多线程而重复？

> ID：15786180
> 
> 赞同：0
> 
> 时间：2013-04-03T11:31:53.607
> 
> 标签：java, performance, web-services, oracle11g, duplicates

我遇到了通过 Java Web 服务到达我们数据库的重复记录的问题，我认为这与 Oracle 处理线程有关。

使用我们构建的 iPhone 应用程序，用户可以将鸟类观察结果添加到他们在假期访问的新站点。他们在“新站点 A”（例如）创建了三个记录。iPhone 将这三个记录中的每一个都打包成单独的 JSON 字符串，其中包含相同的日期和位置详细信息。

在上传时，Web 服务会遍历每个 JSON 字符串。
迭代/观察 1\. 它检查数据库以查看站点是否存在，如果不存在，则创建一个新站点并将观察结果添加到挂表中。
迭代/Obs 2\. 该站点现在应该存在于数据库中，但在迭代 1 中的数据库站点检查未找到该站点，并且创建了第二个新站点。
迭代/Obs 3\. 对现有站点的检查现在可以工作，第三个观察结果附加到现有站点之一。所以 Web 服务和数据库代码确实有效。

Web 服务在每次迭代结束时提交。

第二次迭代的原因是由于Java调用后Oracle提交延迟导致第二次迭代没有在数据库中找到新站点，因此在迭代1真正完成时它已经开始处理迭代2，或者是否有可能Oracle 在单独的线程上运行每个迭代？

我们考虑的一种解决方案是在 Web 服务中使用 Thread.sleep(1000)，但我宁愿不惩罚 iPhone 用户。

感谢您的任何帮助，您可以提供。伊恩

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T11:49:50.350

对我来说，这听起来像是一种比赛条件。可能您的观察 1 和 2 到达彼此非常接近，因此当 2 到达时 1 仍在处理中。Oracle 符合 ACID，这意味着您的观察 2 事务无法看到事务 1 中所做的更改，除非该更改在事务 2 开始*之前完成。*

如果你需要一个检查然后创建的功能，你最好在后端的一个点上同步它。

此外，在您的数据库中添加一个约束，以不惜一切代价避免重复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T11:46:00.880

这不是 Oracle 问题。Thread.sleep 将是一个糟糕的解决方案，尤其是因为您不知道根本原因。

你的描述令人困惑。三个 JSON 字符串是否在一个 HTTP 请求中发送？订单是否重要，或者处理其中任何一个是否首先为随后的订单设置新位置？

什么是“吊桌”？

这是位置和观察之间的亲子关系吗？所以工作单元是在父表中插入一个新位置，然后在子表中引用父表中的三个观察？

我认为这是您的查询及其编写方式的问题。我可以向你保证，Oracle 对于这个小问题已经足够快了。如果它可以处理纳斯达克交易率，它就可以处理您的网站。

我会这样写你的 DAO 进行观察：

```
public interface ObservationDao {
    void saveOrUpdate(Observation observation);
} 
```

将所有逻辑保留在 DAO 中。在 servlet 之外对其进行测试并将其放在一边。一旦你让它工作，你就可以专注于网络应用程序。

# python - 如何解析这个字符串

> ID：15786184
> 
> 赞同：-1
> 
> 时间：2013-04-03T11:32:02.217
> 
> 标签：python, regex, python-3.x

如何用python（也许用re模块）解析这个字符串并用这个数据创建数组？

```
map: mp_rust
num score ping guid                             name            lastmsg address               qport rate
--- ----- ---- -------------------------------- --------------- ------- --------------------- ----- ----- 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T11:33:43.850

使用固定宽度格式，[字符串切片](http://docs.python.org/2.7/tutorial/introduction.html#strings)可能是解析的最佳方式：

```
num = s[0:3]
score = s[4:9]
ping = s[10:14]
guid = s[15:47]
name = s[48:63]
 ... 
```

确保[*去除*](http://docs.python.org/2.7/library/stdtypes.html#str.strip)多余的空格并在必要时转换为[*int 。*](http://docs.python.org/2.7/library/functions.html#int)

[您可以通过将结果存储在列表](http://docs.python.org/2.7/tutorial/introduction.html#lists)中来创建结果的“数组” ：

```
arr = [num, score, ping, guid, name, lastmsg, address, qport, rate] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:55:01.373

除非您知道数据的确切长度（名称可能是“jack”或“theodore”，只是说），否则在空格处拆分可能是一种更聪明的方法。它是字符串切片，但静态较少。

```
>>> s = 'num score ping guid                 name            lastmsg address'
>>> num, score, ping, guid, name, lastmsg, address = s.split() 
```

如果这些值可能包含空格，那么您必须使用正则表达式。

# jquery - 将浮点值赋予 html 标记 Internet Explorer 的 css“左侧”

> ID：15786185
> 
> 赞同：0
> 
> 时间：2013-04-03T11:32:05.993
> 
> 标签：jquery, html, css, internet-explorer

如果我`$("#myid").css("left",15.67);`在 Chrome 或 Firefox 上这样做，结果左值变为 15.67px，但对于 IE 8，它只保持 15px。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:56:31.130

尝试使用`em`而不是`px`IE。所以`15.67px`会在附近`1.2em`

```
$("#myid").css("left","1.2em"); 
```

***更新***

实际上似乎问题可能是亚像素渲染。IE 9 或更低版本不支持它，你不能使用半个像素（像素是最小的东西）。

另一方面，IE 10、Chrome 和 Firefox 确实支持它。

# mysql - 检索与标签匹配的项目，并同时检索与每个项目一起出现的所有标签

> ID：15786190
> 
> 赞同：0
> 
> 时间：2013-04-03T11:32:14.060
> 
> 标签：mysql, join, tags, where-in

我有以下与此问题相关的表格：

```
project
- projectId (PK)
- projectTitle
- projectDescription
- etc..

tag
- tagId
- tagName
- tagDescription
- etc...

project_tag
- projectId (PK / FK -> project.projectId)
- tagId (PK / FK -> tag.tagId) 
```

我正在实现类似于 StackOverflow 的标签功能，因为它能够查看由一个或多个标签标记的项目列表（在我的情况下是项目）。我要做的是选择所有项目，这些项目至少带有我提供给查询的所有标签，但同时检索每个单独项目的所有标签。

我现在的工作，但我觉得`WHERE IN`子句中的子查询效率很低，因为这可能会为每一行执行，对吗？

```
SELECT
    `project`.*,
    GROUP_CONCAT( DISTINCT `tagName` ORDER BY `tagName` SEPARATOR ' ' ) as `tags`
FROM
    `project`
JOIN
    `project_tag`
    USING ( `projectId` )
JOIN
    `tag`
    USING ( `tagId` )
WHERE
    `projectId` IN (
        SELECT
            `projectId`
        FROM
            `project_tag`
        JOIN
            `tag`
            USING ( `tagId` )
        WHERE
            `tagName` IN ( 'the', 'tags' )
        GROUP BY
            `projectId`
        HAVING
            COUNT( DISTINCT `tagName` ) = 2 # the amount of tags in the IN clause
    )
GROUP BY
    `projectId` 
```

有什么方法可以加入，`tag`以便我能够同时检索ed 项目的*所有*标签，同时只ing 项目（至少）匹配我提供给查询的所有标签，而不必使用该子句？`JOIN``JOIN``WHERE IN`

为了说明示例结果，请考虑以下示例项目：

```
projectId: 1, tags: php, cms, webdevelopment
projectId: 2, tags: php, cms, ajax
projectId: 3, tags: c#, cms, webdevelopment 
```

搜索标签`php`会`cms`产生（这些没有格式化为实际的mysql查询结果，只是为了说明相关数据）：

```
projectId: 1, tags: php, cms, webdevelopment
projectId: 2, tags: php, cms, ajax 
```

不只是：

```
projectId: 1, tags: php, cms
projectId: 2, tags: php, cms 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:42:55.900

子查询是不相关的（可以取出并自行执行而不会出错），因此应该执行一次。

有一个子查询首先排除不匹配的项目，然后再加入其他表可能会更有效。像这样的东西： -

```
SELECT project.*, GROUP_CONCAT( DISTINCT tagName ORDER BY tagName SEPARATOR ' ' ) as tags
FROM (SELECT projectId, COUNT( DISTINCT tagName ) AS TagCount
        FROM tag
        INNER JOIN project_tag USING (tagId)
        WHERE tagName IN ( 'the', 'tags' )
        GROUP BY projectId
        HAVING TagCount = 2) Sub1
INNER JOIN project ON Sub1.projectId = project.projectId
INNER JOIN project_tag USING (projectId)
INNER JOIN tag USING (tagId)
GROUP BY projectId 
```

我假设您在 tagName 上有一个索引。

# matlab - 如何在不显示图形的情况下获取图形名称？

> ID：15786194
> 
> 赞同：1
> 
> 时间：2013-04-03T11:32:22.477
> 
> 标签：matlab, matlab-figure

在 Matlab 中，我可以使用以下方法获取图形名称：

```
get(figure(1), 'Name') 
```

我现在得到第一个数字名称的地方。然而，使用这种方法，即使我设置了`set(0,'DefaultFigureVisible','off')`.

如何在屏幕上不显示图形的情况下获取图形名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T11:41:51.940

尝试使用图形句柄本身而不是调用`figure`：

```
get(1, 'Name') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:08:26.073

如果您不知道处理程序：

```
get(get(0,'Children'),'Name') 
```

# iphone - 使 UITextField 占位符文本加粗

> ID：15786198
> 
> 赞同：1
> 
> 时间：2013-04-03T11:32:25.653
> 
> 标签：iphone, objective-c

我在 Interface Builder 中为 UITextField 设置了占位符。现在，我如何使占位符文本变粗。？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T11:57:33.000

请使用以下代码解决您的问题。

```
 UIColor *color = [UIColor blackColor];
    UIFont* boldFont = [UIFont boldSystemFontOfSize:[UIFont systemFontSize]];
    [self.textField setFont:boldFont];
    self.textField.attributedPlaceholder = [[NSAttributedString alloc] initWithString:@"Test" attributes:@{NSForegroundColorAttributeName: color}]; 
```

愿这有助于很多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T11:34:32.047

最简单的方法是，如果您更改属性（字体、大小等），`UITextField`它也将应用于您的占位符。只需更改您的属性`UITextField`并查看效果。

编辑 ：

然后在您的`UITextField`委托方法中再次将此属性设置为正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T12:18:20.543

```
- (void) drawPlaceholderInRect:(CGRect)rect {
    [[UIColor blackColor] setFill];
    [[self placeholder] drawInRect:rect withFont:[UIFont systemFontOfSize:14]];
} 
```

# jquery - jquery幻灯片导航问题

> ID：15786200
> 
> 赞同：0
> 
> 时间：2013-04-03T11:32:30.757
> 
> 标签：jquery, slideshow

我正在制作带有两个导航元素（顶部和底部）的幻灯片。我曾多次使用过代码，但从未以这种方式使用过。

```
$('#list-links li a, #list-tab li a').hover(function(){
    $('#list-links li, #list-tab li').removeClass('hover');
    var i = $(this).index('#list-links li a, #list-tab li a');
    $(this).parent().addClass('hover');
    $('#slide-wrap').stop().animate({'marginLeft' : width*(-i)});
}); 
```

基本上这会在列表中添加和删除一个类（悬停），以便我可以相应地设置样式。问题是它不会以这种方式工作。导航变得独立，这意味着虽然导航 a) 可能在第二张幻灯片上，但导航 b) 不会更新，并且如果它在第一张幻灯片上，悬停类仍然具有。有人可以帮忙吗？

哦，原来的完整代码是这样的：

```
$(document).ready(function() {

// Declare variables
var width = 718; // width of slide - required for animation calculation
var slides = $('#list-images li');
var numSlides = slides.length;

// Wrap the slides & set the wrap width - this will be used to animate the slider left/right
slides.wrapAll('<div id="slide-wrap"></div>').css({'float' : 'left','width' : width});
$('#slide-wrap').css({width: width * numSlides});

// Hover function - animate the slides based on index of active link
$('#list-links li a').hover(function(){
    $('#list-links li').removeClass('hover');
    var i = $(this).index('#list-links li a');
    $(this).parent().addClass('hover');
    $('#slide-wrap').stop().animate({'marginLeft' : width*(-i)});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:37:47.777

你也可以张贴你的标记吗？

我怀疑您可以通过替换此行来修复它：

```
$(this).parent().addClass('hover'); 
```

有了这个：

```
$('ul li:nth-of-type(' + (i+1) + ')').addClass('hover'); 
```

这会将悬停类应用于`li`两个导航栏上正确索引处。

**[工作的jsFiddle](http://jsfiddle.net/Y6QFK/)**

* * *

此外，在删除这样的类时，我发现以非常笼统的方式选择它是一个好习惯，这样如果在分配类时出现任何问题，都会得到修复。另一个好的做法是将该类包含在您的选择器中，这样 jQuery 就不必不必要地查看没有该类的元素。

```
$('ul li.hover').removeClass('hover'); 
```

* * *

**来源**

[http://api.jquery.com/index/](http://api.jquery.com/index/)

[https://developer.mozilla.org/en-US/docs/CSS/:nth-of-type](https://developer.mozilla.org/en-US/docs/CSS/:nth-of-type)

# python - 在一个列表中查找字符串并根据它所说的内容，用另一个列表中的字符串替换它

> ID：15786201
> 
> 赞同：2
> 
> 时间：2013-04-03T11:32:32.513
> 
> 标签：python, string, list, replace

基本上我有一个用户输入一个句子

例如。“你好吗？”

从一个大列表中，它将“are”替换为“am”，将“you”替换为“I”。返回：

“你好，我怎么样？”

问题是我不知道该怎么做。

所以我的清单看起来有点像`reflections = [["I, you"],["are","am]] ---> etc.`

到目前为止，我有一些代码可以收集用户的原始输入，然后调用这个函数来回复它。

```
def reflects_users_string(reply):
    reply_list = reply.split()
    for _ in reply_list
       if ???? 
           ????
            ???? 
   else 
       print "i don't understand" 
```

据我了解（这里是菜鸟），它将用户输入转换为一个列表，然后将该列表中的每个项目与“反射”列表中的项目进行比较，然后将一个列表中的相同字符串替换为它旁边的字符串，例如。“是”与“我”

我一直在玩各种方法来做到这一点，但似乎无法弄清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:36:59.507

到目前为止，这是一个好的开始。至于下一步，对所有单词的映射做一个大字典，查找该字典中的每个单词，如果有替换就替换它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:55:58.607

尝试学习使用列表推导式，这是在 make 迭代中过滤列表的有效方法。

让我们尝试用列表推导解决您的问题：

```
#first we need to create mappings in a dict for your reflections
reflect = {
    'you': 'I',
    'are': 'am'
}

# After we read user input
user_input = 'hello, how are you ?'

#Now look how we can replace all words in user_input from reflect with one line
reflected = [word for word in [reflect.get(key, key) for key in user_input.split()]]

print ' '.join(reflected) 
```

让我们分析一下列表推导：

1.  首先，我们将用户输入拆分为一个列表`user_input.split()`

2.  然后我们遍历用户输入的词`for key in user_input.split()`

3.  对于用户输入单词中的每个单词，我们查询反射字典。Using `reflect.get(key, key)`是一种查询`reflect`字典中键的方法，如果我们找不到键，`key`则返回默认值。

4.  最后，我们用`[word for word in [getting reflected words from user input and a default value of the same word if we can't find it's reflection]]`

瞧！

# extjs4 - Ext 4.2 hasOne关联foreignKey

> ID：15786202
> 
> 赞同：2
> 
> 时间：2013-04-03T11:32:32.783
> 
> 标签：extjs4

我有两个具有 hasOne 关联的模型。

但是，当我尝试使用 getter 方法（extdirect）获取关联模型时，foreignKey 不会自动填充。

我应该期待吗？

hasMany 关联似乎运行良好（我有框架自动设置的 foreignKey）。

# javascript - 为什么我的文件数据在传输过程中丢失了？

> ID：15786206
> 
> 赞同：0
> 
> 时间：2013-04-03T11:32:38.077
> 
> 标签：javascript, upload, xmlhttprequest

好的，所以我从一个不同的问题中找到了这种上传大文件的方法：

```
function sliceit(file)
{
    fr = new FileReader;
    chunkSize = 1000000;            

    chunks = Math.ceil(file.size / chunkSize);
    chunk = 0;
    var isstart = true;

    function loadNext() {
        start, end,
        start = chunk * chunkSize;
        if (start &gt; file.size)
            start = end+1;
        end = start + (chunkSize -1) &gt;= file.size ? file.size : start + (chunkSize -1);
        fr.onloadend = function(e)
        {
            while(!fr.result || fr.result == &quot;&quot; || fr.result == undefined)
            {
            }
            fdata = fr.result;
            xmlhttp, form, data;
            data = {};
            data.filename = document.getElementById(&quot;filename0&quot;).value;
            data.username = document.getElementById(&quot;username&quot;).value;
            data.password = document.getElementById(&quot;password&quot;).value;
            data.public = document.getElementById(&quot;public&quot;).value;
            if(isstart)
            {
                var form = new FormData();
                form.append(&quot;filename&quot;, data.filename);
                form.append(&quot;username&quot;, data.username);
                form.append(&quot;password&quot;, data.password);
                form.append(&quot;public&quot;, data.public);
                form.append(&quot;filebytes&quot;, fdata);
                xmlhttp = jQuery.ajaxSettings.xhr();
                xmlhttp.open(&quot;POST&quot;, &quot;../MakeEmptyFile.php&quot;, false);
                isstart = false;
            }
            else
            {
                form = new FormData();
                form.append(&quot;filename&quot;, data.filename);
                form.append(&quot;username&quot;, data.username);
                form.append(&quot;password&quot;, data.password);
                form.append(&quot;filebytes&quot;, fdata);
                xmlhttp = jQuery.ajaxSettings.xhr();
                xmlhttp.open(&quot;POST&quot;, &quot;../AddTo.php&quot;, false);
            }
            xmlhttp.send(form);
            console.log(xmlhttp.responseText);
            if (++chunk &lt;= chunks)
            {
                loadNext();
            }
            else
            {
                stdlog(&quot;Completed.&quot;);
            }
        };
        fr.readAsText(file.slice(start, end));

    }
    loadNext();
} 
```

出于某种原因，每次我加载 XMLHttpRequest 时，它都显示文件数据从未真正发送过。这是因为它太大了，还是什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:09:38.177

听起来您缺少一些与 File API 相关的基本概念。我在这里的回答来自您问题的评论。

首先，分块上传文件的正确方法是使用or对象上[的`slice`方法。](https://developer.mozilla.org/en-US/docs/DOM/Blob)该方法将始终返回另一个. 这代表你已经雕刻出来的部分。然后，您可以将其应用于您的对象。您的对象将在多部分编码的 POST 请求中发送。将在请求中的一个多部分边界内表示为表单字段，就像您附加到对象的任何其他参数一样。 `Blob``File``slice``Blob``Blob``Blob``File``append``Blob``FormData``FormData``Blob``FormData`

在服务器端，您将`Blob`像在解析 MPE 请求时读取任何其他文件一样读取此文件。这将需要与构成完整文件的`Blob`任何其他 s 一起临时存储在服务器端。`Blob`收到所有零件后，您需要在服务器端以正确的顺序组装它们。

您当前的方法包括将文件切成 blob，读取 blob 的全部内容，然后将内容附加到您的`FormData`对象。这对我来说似乎是多余的和低效的。

# button - 如何使 MSIE 和 Chrome 中的 CSS 按钮宽度相同？

> ID：15786210
> 
> 赞同：-1
> 
> 时间：2013-04-03T11:33:07.370
> 
> 标签：button, width, css

我在使最新版本的 Internet Explorer (9) 看起来与 Google Chrome (26.0.1) 相同时遇到了问题。

总结 我有两个按钮，一个正在使用一个名为：.linkBtn 的类，另一个按钮正在使用一个名为：.buynowBtn 的类，我尝试使用“min-width:85px;”将它们都设置为 85px 宽。然而，在 MSIE 中，两个按钮都是 104 像素宽……而在 Google Chrome 中，虽然 LinkBtn 是 104 像素，buynowBtn 是 106 像素！

代码 以下是相关的 CSS 代码行：

```
 .lot .lotDesc .linkBtn, .lot .lotDesc .linkBtnFinal{ /* (TJ-NEW) new style ".lot .lotDesc .linkBtnFinal" added for finalise button */
    position:absolute;
    left:8px;
    bottom:0;
    }
    .linkBtn,.linkBtnFinal{ /* (TJ-NEW) new style ".linkBtnFinal" added for finalise button */
    position:relative;
    display:inline-block; /* (TJ-NEW) required to standardise button widths */
    float:left;/* (TJ-NEW) required to standardise button widths */
    }
    .linkBtn a{
    min-width:85px;
    margin-bottom:3px;
    }
    .buynowBtn{
    position:relative;
    display:inline-block; /* (TJ-NEW) required to standardise button widths */
    float:left; /* (TJ-NEW-180313) */
    }
    .buynowBtn a{
    /* CSS3 Corner Radius */
    -webkit-border-radius: 1em;
    -moz-border-radius: 1em;
    border-radius: 1em;
    /* (TJ-NEW) the following has been added to standardise button widths */
    min-width:85px;
    display:block;
    text-align:center;
    }
    .linkBtn a{
    color:#fff!important;
    font-size:12px!important;
    padding:0.1em 1em; /* (TJ-NEW) ? padding adjustment previously entered had been rolled back! */
    font-weight:normal;
    text-decoration:none!important;
    background:#BF2A48 ; /* Old browsers */
    /* CSS3 Gradient Background */
    background:-moz-linear-gradient(top, #BF2A48 0%, #BF2A48 49%, #9B0624 51%, #9B0624 100%); /* FF3.6+ */
    background:-webkit-gradient(linear, left top, left bottom, color-stop(0%,#BF2A48 ), color-stop(49%,#BF2A48 ), color-stop(51%,#9B0624), color-stop(100%,#9B0624)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #BF2A48 0%,#BF2A48 49%,#9B0624 51%,#9B0624 100%); /* Chrome10+,Safari5.1+ */
    background:-o-linear-gradient(top, #BF2A48 0%,#BF2A48 49%,#9B0624 51%,#9B0624 100%); /* Opera 11.10+ */
    background:-ms-linear-gradient(top, #BF2A48 0%,#BF2A48 49%,#9B0624 51%,#9B0624 100%); /* IE10+ */
    background:linear-gradient(to bottom, #BF2A48 0%,#BF2A48 49%,#9B0624 51%,#9B0624 100%); /* W3C */
    /*filterrogidXImageTransform.Microsoft.gradient( startColorstr='#BF2A48 ', endColorstr='#9B0624',GradientType=0 ); *//*IE6-8 */ /* (TJ-NEW) commented out IE style, as not working anyway and causes issue with fixed width */
    /* CSS3 Corner Radius */
    -webkit-border-radius: 1em;
    -moz-border-radius: 1em;
    border-radius: 1em;
    /* (TJ-NEW) the following has been added to standardise button widths */
    display:block;
    text-align:center;
    }
    .linkBtn a:hover{
    color:#fff;
    text-decoration:none;
    background: #9B0624;
    }

    .buynowBtn a{
    color:#fff!important;
    font-size:12px!important;
    padding:0.1em 1em; /* ******* Updated to match place bid (TJ) ******* */
    font-weight:normal;
    text-decoration:none!important;
    background:#888; /* Old browsers */
    /* CSS3 Gradient Background */
    background:-moz-linear-gradient(top, #888 0%, #888 49%, #666 51%, #666 100%); /* FF3.6+ */
    background:-webkit-gradient(linear, left top, left bottom, color-stop(0%,#888), color-stop(49%,#888), color-stop(51%,#666), color-stop(100%,#666)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #888 0%,#888 49%,#666 51%,#666 100%); /* Chrome10+,Safari5.1+ */
    background:-o-linear-gradient(top, #888 0%,#888 49%,#666 51%,#666 100%); /* Opera 11.10+ */
    background:-ms-linear-gradient(top, #888 0%,#888 49%,#666 51%,#666 100%); /* IE10+ */
    background:linear-gradient(to bottom, #888 0%,#888 49%,#666 51%,#666 100%); /* W3C */
    /* filterrogidXImageTransform.Microsoft.gradient( startColorstr='#888', endColorstr='#666',GradientType=0 ); *//* IE6-8 */ /* (TJ-NEW) commented out IE style, as not working anyway and causes issue with fixed width */
    }
    .buynowBtn a:hover{
    color:#fff;
    text-decoration:none;
    background: #444;
    }
    .buynowBtn{
    position:relative;
    display:inline-block; /* (TJ-NEW) required to standardise button widths */
    float:left; /* (TJ-NEW-180313) */
    }
    .buynowBtn a{
    /* CSS3 Corner Radius */
    -webkit-border-radius: 1em;
    -moz-border-radius: 1em;
    border-radius: 1em;
    /* (TJ-NEW) the following has been added to standardise button widths */
    min-width:85px;
    display:block;
    text-align:center;
    } 
```

有什么想法吗？- 我尝试使用“宽度：”而不是“最小宽度”，但文本似乎换成了两行，这是一场灾难。

感谢

Ĵ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:43:19.147

发生这种情况的原因有很多，从盒子模型的差异到正在使用的字体的差异。

你仍然可以像这样做 IE-only CSS：

```
<!--[if IE 9]--><link to your CSS /><!--[endif]--> 
```

那里有几个选项可让您定位特定版本的 IE（例如）

```
<!--[if IE]-->targets all versions of IE<!--[endif]-->
<!--[if IE 9]-->targets IE 9 only<!--[endif]-->
<!--[if lt IE 8]-->targets versions 7 and below of IE (lt: <)<!--[endif]-->
<!--[if gte IE 8]-->targets versions 8 and up of IE (gte: >=)<!--[endif]--> 
```

但是，如果按钮绝对必须是像素完美的，请尝试使用图像。

# android - 如何获得发送或取消电子邮件的通知

> ID：15786215
> 
> 赞同：0
> 
> 时间：2013-04-03T11:33:20.683
> 
> 标签：android, email-client

我正在使用我的活动中的意图（本机电子邮件或 gmail）启动电子邮件客户端。我只想在用户按下发送按钮或丢弃电子邮件时收到通知。我只想在用户按下发送按钮时开始另一个活动，并希望在用户丢弃电子邮件时显示一个对话框。

这是我的代码

```
Intent emailIntent = new Intent(Intent.ACTION_SEND_MULTIPLE);
    emailIntent.setType("message/rfc822");
    emailIntent.putExtra(Intent.EXTRA_EMAIL, new String[] {"email@something.com"});
    emailIntent.putExtra(Intent.EXTRA_SUBJECT, "Test Mail");
    emailIntent.putExtra(Intent.EXTRA_TEXT, "Test Mail Subject");
    startActivityForResult(emailIntent, REQ_CODE);

public void onActivityResult(int requestCode, int resultCode,
        Intent data) {

    if(requestCode == REQ_CODE){
        Toast.makeText(getApplicationContext(), "resultCode  "+resultCode, Toast.LENGTH_LONG).show();
        //if(resultCode == RESULT_OK){

        //}
    }
} 
```

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:13:29.423

这是不可能的。`ACTION_SEND`不是为与 一起使用而设计的`startActivityForResult()`，没有人，更不用说用户碰巧选择的任何电子邮件客户端，有义务打电话`setResult()`让你知道用户做了什么。

# java - 'org.apache.commons.logging.impl.Log4JLogger' 找不到

> ID：15786217
> 
> 赞同：4
> 
> 时间：2013-04-03T11:33:30.957
> 
> 标签：java, eclipse, tomcat, log4j

在我的 Java Web 服务中，我正在尝试使用 log4j 将日志写入 Windows 事件查看器。我使用 Eclipse 作为 IDE 来使用 Tomcat 部署它。

**这是我的 log4j.properties：**

```
log4j.rootLogger=DEBUG, CA, NTEventLog 

log4j.rootLogger=DEBUG, CA, NTEventLog 

#Console Appender 
log4j.appender.CA=org.apache.log4j.ConsoleAppender 
log4j.appender.CA.layout=org.apache.log4j.PatternLayout 
log4j.appender.CA.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n 

#File Appender 
log4j.appender.FA=org.apache.log4j.FileAppender 
log4j.appender.FA.File=sample.log 
log4j.appender.FA.layout=org.apache.log4j.PatternLayout 
log4j.appender.FA.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n

#Event Log Appender
log4j.appender.NTEventLog=org.apache.log4j.nt.NTEventLogAppender
log4j.appender.NTEventLog.source=ESB Web Services

# Set the logger level of File Appender to WARN 
log4j.appender.FA.Threshold = WARN 
```

**这是我的类路径：**

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
    <classpathentry kind="src" path="src"/>
    <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/jre6">
        <attributes>
            <attribute name="owner.project.facets" value="java"/>
        </attributes>
    </classpathentry>
    <classpathentry kind="con" path="org.eclipse.jst.server.core.container/org.eclipse.jst.server.tomcat.runtimeTarget/Apache Tomcat v6.0">
        <attributes>
            <attribute name="owner.project.facets" value="jst.web"/>
        </attributes>
    </classpathentry>
    <classpathentry kind="con" path="org.eclipse.jst.j2ee.internal.web.container"/>
    <classpathentry kind="con" path="org.eclipse.jst.j2ee.internal.module.container"/>
    <classpathentry kind="lib" path="dom4j-1.6.1.jar">
        <attributes>
            <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
        </attributes>
    </classpathentry>
    <classpathentry kind="lib" path="jide-oss-2.1.1.jar">
        <attributes>
            <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
        </attributes>
    </classpathentry>
    <classpathentry kind="lib" path="jtds-1.2.6.jar">
        <attributes>
            <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
        </attributes>
    </classpathentry>
    <classpathentry kind="lib" path="poi-3.9-20121203.jar">
        <attributes>
            <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
        </attributes>
    </classpathentry>
    <classpathentry kind="lib" path="poi-ooxml-3.9-20121203.jar">
        <attributes>
            <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
        </attributes>
    </classpathentry>
    <classpathentry kind="lib" path="poi-ooxml-schemas-3.9-20121203.jar">
        <attributes>
            <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
        </attributes>
    </classpathentry>
    <classpathentry kind="lib" path="stax-api-1.0.1.jar">
        <attributes>
            <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
        </attributes>
    </classpathentry>
    <classpathentry kind="lib" path="xmlbeans-2.3.0.jar">
        <attributes>
            <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
        </attributes>
    </classpathentry>
    <classpathentry kind="lib" path="NTEventLogAppender.amd64.dll">
        <attributes>
            <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
        </attributes>
    </classpathentry>
    <classpathentry kind="lib" path="NTEventLogAppender.dll">
        <attributes>
            <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
        </attributes>
    </classpathentry>
    <classpathentry kind="lib" path="log4j-1.2.17.jar">
        <attributes>
            <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
        </attributes>
    </classpathentry>
    <classpathentry kind="lib" path="commons-logging-1.1.2.jar">
        <attributes>
            <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
        </attributes>
    </classpathentry>
    <classpathentry kind="lib" path="commons-logging-1.1.2-javadoc.jar">
        <attributes>
            <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
        </attributes>
    </classpathentry>
    <classpathentry kind="lib" path="commons-logging-1.1.2-sources.jar">
        <attributes>
            <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
        </attributes>
    </classpathentry>
    <classpathentry kind="lib" path="commons-logging-1.1.2-test-sources.jar">
        <attributes>
            <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
        </attributes>
    </classpathentry>
    <classpathentry kind="lib" path="commons-logging-1.1.2-tests.jar">
        <attributes>
            <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
        </attributes>
    </classpathentry>
    <classpathentry kind="lib" path="commons-logging-adapters-1.1.2.jar">
        <attributes>
            <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
        </attributes>
    </classpathentry>
    <classpathentry kind="lib" path="commons-logging-api-1.1.2.jar">
        <attributes>
            <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
        </attributes>
    </classpathentry>
    <classpathentry kind="lib" path="commons-logging-tests.jar">
        <attributes>
            <attribute name="org.eclipse.jst.component.dependency" value="/WEB-INF/lib"/>
        </attributes>
    </classpathentry>
    <classpathentry kind="output" path="build/classes"/>
</classpath> 
```

一旦我在tomcat上部署代码，如下

**出现异常：**

```
org.apache.commons.logging.LogConfigurationException: User-specified log class 'org.apache.commons.logging.impl.Log4JLogger' cannot be found or is not useable.
    at org.apache.commons.logging.impl.LogFactoryImpl.discoverLogImplementation(LogFactoryImpl.java:874)
    at org.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:604)
    at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:336)
    at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:310)
    at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:685)
    at org.apache.axis2.deployment.DeploymentEngine.<clinit>(DeploymentEngine.java:76)
    at org.apache.axis2.transport.http.AxisServlet.initConfigContext(AxisServlet.java:584)
    at org.apache.axis2.transport.http.AxisServlet.init(AxisServlet.java:454)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1173)
    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:809)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:129)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:852)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:43:50.553

我认为在 TOMCAT_HOME/lib 中有一个 commons-logging 的副本，因此您可能会遇到类路径冲突，但我会检查 apache commons logging 文档以确保您已正确设置它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T11:53:56.190

删除所有引用，`NTEventLog`它将起作用。如果您取消注释此附加程序，如果源是有效名称，它可能会起作用。

```
#log4j.rootLogger=DEBUG,CA,NTEventLog 
log4j.rootLogger=DEBUG,CA        

#Console Appender 
log4j.appender.CA=org.apache.log4j.ConsoleAppender 
log4j.appender.CA.layout=org.apache.log4j.PatternLayout 
log4j.appender.CA.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n 

#File Appender 
log4j.appender.FA=org.apache.log4j.FileAppender 
log4j.appender.FA.File=sample.log 
log4j.appender.FA.layout=org.apache.log4j.PatternLayout 
log4j.appender.FA.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n

#Event Log Appender
#log4j.appender.NTEventLog=org.apache.log4j.nt.NTEventLogAppender
#log4j.appender.NTEventLog.layout=org.apache.log4j.PatternLayout
#log4j.appender.NTEventLog.layout.ConversionPattern=%m%n
#log4j.appender.NTEventLog.source=ESBWebServices

# Set the logger level of File Appender to WARN 
log4j.appender.FA.Threshold = WARN 
```

> 不要忘记将 NTEventLogAppender.dll、NTEventLogAppender.amd64.dll、NTEventLogAppender.ia64.dll 或 NTEventLogAppender.x86.dll 适当地放置在 Windows 系统 PATH 上的目录中。否则，您将收到 java.lang.UnsatisfiedLinkError。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T11:50:07.047

这可能是一个问题：类文件存在于类路径的两个 jar 中。

类文件：`org.apache.commons.logging.impl.Log4JLogger`

第一个罐子：`commons-logging-1.1.2.jar`

第二罐：`commons-logging-adapters-1.1.2.jar`

尝试删除第二个罐子，然后重试。

# python - 在 Python 中为 add_new_field 创建一个函数

> ID：15786220
> 
> 赞同：0
> 
> 时间：2013-04-03T11:33:35.643
> 
> 标签：python, python-2.7

我正在尝试为我之前提到的一项任务创建一个函数，用于向存储在一个文件夹中的某些文件添加一个新字段。我阅读了 Python 中的函数方法并遵循但它不起作用。如果有人可以指导我，我会很高兴。

```
def newfield(infile,outfile):
    infile.readlines()
    outfile = ["%s\t%s" %(item.strip(),2) for item in infile]
    outfile.write("\n".join(output))
    outfile.close()
    return outfile 
```

然后我尝试调用它：

```
a = open("E:/SAGA/data/2006last/test/325145404.all","r")
b = open("E:/SAGA/data/2006last/test/325145404_edit.all","w")
newfield(a,b) 
```

此外，当我们创建一个函数时，我们应该在同一个 python shell 中调用它还是可以将它作为一个文件然后调用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:39:11.517

看起来问题是您将构建的列表分配给与`output`文件相同的名称。您还从文件中读取了所有行，并且没有在任何地方分配结果，因此当您的列表理解迭代它时，它已经在文件的末尾。所以你可以放弃这`readlines`条线。

```
def newfield(infile,outfile):
    output = ["%s\t%s" %(item.strip(),2) for item in infile]
    outfile.write("\n".join(output))
    outfile.close()
    return outfile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T11:38:00.973

该行`infile.readlines()`消耗整个输入文件。所有行都被读取和遗忘，因为它们没有分配给变量。

该构造`["%s\t%s" %(item.strip(),2) for item in infile]`是一个列表推导。此表达式返回一个列表。通过将其分配给变量 outfile，outfile 的旧值（可能是文件对象）被遗忘并由列表推导返回的列表替换。此列表对象没有写入方法。通过将列表分配给另一个变量，可以保留 outfile 中的文件对象。

尝试这个：

```
def newfield(infile,outfile):
    items = ["%s\t%s" %(item.strip(),2) for item in infile]
    outfile.write("\n".join(items))
    outfile.close()
    return outfile 
```

# c# - 将字符串转换为 .net 中的类型

> ID：15786228
> 
> 赞同：0
> 
> 时间：2013-04-03T11:33:59.380
> 
> 标签：c#, .net

我有一个字符串`"System.Linq.IQueryable`1[System.String]"`，我想将它转换为底层的 .net 类型`Type.GetType("System.Linq.IQueryable`1[System.String]")`返回 null。任何人都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T11:46:14.740

您需要明确包含程序集、版本和公钥令牌（如果有的话）。

如果你正在跑步`.NET 4`，试试这个

```
Type t = Type.GetType("System.Linq.IQueryable`1[System.String], System.Core, "
     + "Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"); 
```

您不必总是完全限定字符串的原因是，如果类型在当前程序集中或在 Mscorlib 程序集中，则可以省略额外信息。来自[MSDN](http://msdn.microsoft.com/en-GB/library/w3f99sx1.aspx)：

> 要获取的类型的程序集限定名称。请参阅 AssemblyQualifiedName。如果该类型在当前执行的程序集中或在 Mscorlib.dll 中，则提供由其命名空间限定的类型名称就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T11:43:08.903

你能拿一个真正的非抽象类型签名吗？例如`Type.GetType("System.Linq.EnumerableQuery`1[System.String]")`应该为你工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T11:44:08.407

我认为问题在于您使用`Type.Name`的是`Type.AssemblyQualifiedName`.

# ruby-on-rails - 在 Mini_Test 和未初始化的常量错误中调用任何 Ruby 类

> ID：15786233
> 
> 赞同：1
> 
> 时间：2013-04-03T11:34:09.267
> 
> 标签：ruby-on-rails, ruby, minitest

我想通过使用 Mini_Test 和 Ruby 来实现 DCI，但我无法在 Mini_Test 中调用 AcademicYear 类。我在单独的文件中有一个简单的类和 Mini_Test 类，如下所示；

**/app/Models/academicyear.rb**

```
class AcademicYear
  attr_accessor :year
end 
```

**/app/Test/Contexts/headteacher_define_academicyear_context_test.rb**

```
require "minitest_helper"
class HeadTeacherDefineAcademicYearContextTest < MiniTest::Unit::TestCase
  def test_should_add_academic_year
    academicyear = AcademicYear.new
    academicyear.year= "2012-2013"
  end
end 
```

当我创建一个新的 AcademicYear 对象时，出现此错误；

```
HeadTeacherDefineAcademicYearContextTest#test_should_add_academic_year:
NameError: uninitialized constant HeadTeacherDefineAcademicYearContextTest::AcademicYear
    /home/developer/Desktop/dciexample/test/contexts/headteacher_define_academicyear_context_test.rb:6:in `test_should_add_academic_year' 
```

我错过了什么，有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T11:36:29.693

你需要要求你的课

```
require_relative '../../Models/academicyear.rb' 
```

结果你有

`/app/Test/Contexts/headteacher_define_academicyear_context_test.rb`

```
require "minitest_helper"
require_relative '../../Models/academicyear.rb'

class HeadTeacherDefineAcademicYearContextTest < MiniTest::Unit::TestCase
  def test_should_add_academic_year
    academicyear = AcademicYear.new
    academicyear.year= "2012-2013"
  end
end 
```

# orchestration - 在 System center orchestrator 中复制订阅数据列表

> ID：15786235
> 
> 赞同：0
> 
> 时间：2013-04-03T11:34:13.883
> 
> 标签：orchestration, scorch

我正在使用 System Center Orchestrator 2012，并且我有一个通用错误处理程序，它连接到我的运行手册中的所有活动。

我已经订阅了一个已发布数据列表作为此错误处理程序中的参数，如下所示：

活动名称：{“监控文件”中的活动名称}{“移动文件”中的活动名称}.......

我需要做的是复制此订阅数据列表并进行搜索和替换以将活动名称参数更改为其他内容，例如错误消息。每当我复制这个变量列表时，我都会在粘贴它时出现乱码

```
\`d.T.~Ed/{598EBDFA-BF5B-4B77-8156-E6FA6ECD0CE1}.Object.Name\`d.T.~Ed/\`d.T.~Ed/{6838D741-DF8E-4C25-8C28-D06A52F67D36}.Object.Name\`d.T.~Ed/\`d.T.~Ed/{D1D9BBE6-5AAF-4D8F-A98A-1A8BDD977E7E}.Object.Name\`d.T.~Ed/\`d.T.~Ed/{9EC92323-1B9B-4D06-88E9-A97BA525CF5A}.Object.Name\`d.T.~Ed/\`d.T.~Ed/{FAD32B4C-92CC-40BD-837A-4C5F22C2E018}.Object.Name\`d.T.~Ed/\`d.T.~Ed/{DFF7A110-ACFD-4377-AFEC-16B5BEC8BFF4}.Object.Name\`d.T.~Ed/\`d.T.~Ed/{139ACC4E-CF6D-4EEE-BD88-9DC1E0FC2038}.Object.Name\`d.T.~Ed/\`d.T.~Ed/{1484789C-BB37-4507-AD21-E367665E0BE6}.Object.Name\`d.T.~Ed/\`d.T.~Ed/{01EA8BD0-69C5-4959-86DB-29FAD34D144A}.Object.Name\`d.T.~Ed/\`d.T.~Ed/{A60C582B-5DD0-41F7-BB0A-B5D71C3B9ECB}.Object.Name\`d.T.~Ed/\`d.T.~Ed/{1FA1E2D6-813D-4A4A-A5CD-07EB2AD4AC9B}.Object.Name\`d.T.~Ed/ 
```

有没有办法简单地复制文本？如果没有，我将不得不一遍又一遍地点击所有活动来订阅不同类型的数据。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:35:51.727

您看到的乱码是 Orchestrator 如何将发布的数据和变量转换为数据库 guid。将其复制出来将始终转换为 DB guid，因此无法使用“错误摘要”的“活动名称”进行复制/替换。您需要订阅每个活动的数据或查找所有可能不会更容易的指南。

不幸的是，在 SCOrch 中设置错误处理过程变得乏味有效。

我使用链接到每个活动的单独电子邮件来根据错误消息提供更多信息。我不喜欢使用来自多个活动的已发布数据的通用错误电子邮件，因为它不一定提供您需要的所有有用信息（或者最终用户将能够理解）。

# .net - ＃使用 在 VS2012 中链接到 4.0 版本，但我需要 2.0。如何？

> ID：15786236
> 
> 赞同：3
> 
> 时间：2013-04-03T11:34:14.153
> 
> 标签：.net, c++-cli

我正在尝试将我的 .NET 2.0 C++/CLI 项目从 VS2008 迁移到 VS2012。转换后项目依赖4.0。当我做

```
<TargetFrameworkVersion>v2.0</TargetFrameworkVersion> 
```

该项目依赖于 2.0*和*4.0。我通过查看解决方案资源管理器中的 External Dependencies 魔术文件夹来验证这一点。当我在 2.0 C# 项目中引用该项目时，它也会给我编译器警告。

注释掉 #includes 表明 4.0 依赖项是通过 Microsoft 头文件（如 vcclr.h 和 atlbase.h）中的 #using 指令引入的。

我需要这些标头用于它们提供的类和函数。如何使其中的#using 指令指向 mscorlib.dll 的 2.0 版本而不是 4.0？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-29T20:48:35.047

更改`<TargetFrameworkVersion>`还不够，构建工具仍然使用安装在您机器上的 .NET 4 版本。通过在生成的程序集上运行 ildasm.exe 可以看到一些内容。双击清单以查看：

```
// Metadata version: v4.0.30319
...
.assembly extern mscorlib
{
  .publickeytoken = (B7 7A 5C 56 19 34 E0 89 )                         // .z\V.4..
  .hash = (DD 9E C9 8D BF 2A 2D C2 AA 2D C3 8B 51 CD 4C A6   // .....*-..-..Q.L.
           15 F0 22 F6 )                                     // ..".
  .ver 2:0:0:0
}
...
.assembly extern mscorlib as mscorlib_4
{
  .publickeytoken = (B7 7A 5C 56 19 34 E0 89 )                         // .z\V.4..
  .hash = (47 6E C0 E3 BA CD CE B1 9A 4D 68 BE 29 75 61 6F   // Gn.......Mh.)uao
           BE 04 C6 BA ) 
  .ver 4:0:0:0
} 
```

请注意这*两个*版本的 mscorlib.dll 如何最终成为依赖项。你遇到的问题。

我链接的[反馈文章](http://connect.microsoft.com/VisualStudio/feedback/details/741680/upgrade-from-vs2008-c-cli-changes-target-framework)建议将工具集更改为“v90”。然而，这在我的机器上不起作用，即使我安装了 VS2008。该选项未显示在组合框下拉列表中，当我强制它时，我收到此构建错误：

> C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V110\Microsoft.Cpp.Platform.targets(43,5)：错误 MSB8020：Visual Studio 2008 的构建工具（Platform Toolset = 'v90 ') 找不到。要使用 v90 构建工具进行构建，请单击“项目”菜单或右键单击解决方案，然后选择“更新 VC++ 项目...”。安装 Visual Studio 2008 以使用 Visual Studio 2008 构建工具进行构建。

按照错误消息中给出的建议，我得到了这个：

```
------ Update VC++ projects started -------
Updating project 'ConsoleApplication74'...
    Configuration 'Debug|Win32': changing Platform Toolset to 'v110' (was 'v90').
    Configuration 'Release|Win32': no update required. Platform Toolset is 'v110'.
    TargetFrameworkVersion = v4.5 (was v2.0) 
```

回到原点。我想说，在 C++/CLI 项目中使用 VS2012 来定位 .NET 2.0 是一个失败的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T16:19:40.050

一种方法是打开项目文件 (.vcxproj) 并更改

`<TargetFrameworkVersion>v4.5</TargetFrameworkVersion>`

到

`<TargetFrameworkVersion>v2.0</TargetFrameworkVersion>`

请参阅[使用 vs2010 将 C++/CLI 项目更改为 4.0 以外的其他框架](https://stackoverflow.com/questions/2921702/change-c-cli-project-to-another-framework-than-4-0-with-vs2010)

# java - 为什么此 java 邮件以纯文本而不是 html 形式到达收件人？

> ID：15786239
> 
> 赞同：3
> 
> 时间：2013-04-03T11:34:23.753
> 
> 标签：java, email, smtp, mime-types, apache-commons

我有这个代码来发送电子邮件：

```
public static void sendHtmlTextWithPlainTextAlternative(final String to,
    final String from, final String subject, final String plainText,
    final String htmlText) throws MessagingException {

    final HtmlEmail email = new HtmlEmail();
    email.setHostName(SMTP);
    try {
        email.addTo(getStringAddresses(to));
        email.setFrom(from);
        email.setSubject(subject);
        email.setHtmlMsg("<html><head></head><body><p>Hello World!</p></body></html>");
        email.setTextMsg("Hello World!");
        email.send();
    } catch (final EmailException e) {
        e.printStackTrace();
    }
}

private static String[] getStringAddresses(final String to) {
    return to.split(" |,|;|\\r?\\n|\\r");
} 
```

但是我在电子邮件客户端（Outlook 2010）中得到的只是纯文本消息，我可以在其中看到 html 标记和替代纯文本或空白的富文本消息（Outlook 2002）。

这是摘录

```
------=_Part_0_756354128.1364993577885
Content-Type: multipart/alternative; boundary="----=_Part_1_48519531.1364993577890"

------=_Part_1_48519531.1364993577890
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Hello World!
------=_Part_1_48519531.1364993577890
Content-Type: text/html; charset=us-ascii
Content-Transfer-Encoding: 7bit

<html><head></head><body><p>Hello World!</p></body></html>
------=_Part_1_48519531.1364993577890--

------=_Part_0_756354128.1364993577885-- 
```

根据一位 Exchange Server 管理员的说法，消息的开头应该包含类似这样的内容

```
0 2.1.5 Recipient OK
DATA
354 Start mail input; end with <CRLF>.<CRLF>

Content-Type: multipart/mixed; boundary="----=_Part_1_933059347.1364987366297" 
```

但它是这样来的（摘录）：

```
250 2.1.5 Recipient OK
DATA
354 Start mail input; end with <CRLF>.<CRLF>

This is the content preamble.
------=_Part_1_933059347.1364987366297
Content-Type: multipart/alternative; boundary="----=_Part_0_1905186593.1364987366295" 
```

电子邮件带有一个空的主题和一个空的收件人列表。什么可能导致这种奇怪的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T07:07:08.787

在找出要寻找的解决方案之后非常简单，我必须感谢 Cedric Champeau。这是通过另一个 maven 依赖项引入的与 geronimo-javamail 的冲突。我所要做的就是排除这种依赖：[Apache CXF + Maven + Javamail + Log4J（更新）](http://www.jroller.com/melix/entry/apache_cxf_maven_javamail_awful)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:29:52.207

我看到你在使用 apache commons？

尝试删除头部和身体标签

所以你会有

```
 email.setHtmlMsg("<html><p>Hello World!</p></html>"); 
```

另一件不应该有所作为但您可以尝试的事情是为 email.setHostName("mail.myserver.com"); 设置正确的值。

参考[commons eml 用户指南](http://commons.apache.org/proper/commons-email/userguide.html)

并将邮件发送到 gmail 帐户，也许服务器设置为仅允许文本及其删除 html？您可以从 gmail（富格式）发送相同的邮件 id html 吗？

# mysql - MySQL 创建带分隔符的存储过程语法

> ID：15786240
> 
> 赞同：40
> 
> 时间：2013-04-03T11:34:29.653
> 
> 标签：mysql, sql, stored-procedures

我正在尝试使用这样的分隔符在 MySQL 中创建一个存储过程：

```
use am;

DELIMITER $$

CREATE PROCEDURE addfields()
BEGIN
  DECLARE done INT DEFAULT FALSE;
  DECLARE acc INT(16);
  DECLARE validId INT DEFAULT 0;

END $$

DELIMITER ; 
```

它给了我一个错误：

```
#1304 - PROCEDURE addfields already exists 
```

使用分隔符创建存储过程并在它首先存在时删除它的正确语法是什么？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-12-06T21:00:53.150

## MySQL 中的存储过程语法入门（使用终端）：

**1.打开一个终端并像这样登录到mysql：**

```
el@apollo:~$ mysql -u root -p
Enter password: 
Welcome to the MySQL monitor.  Commands end with ; or \g.
mysql> 
```

**2\. 看看有没有什么手续：**

```
mysql> show procedure status;
+-----------+---------------+-----------+---------+---------------------+---------------------+---------------+---------+----------------------+----------------------+--------------------+
| Db        | Name          | Type      | Definer | Modified            | Created             | Security_type | Comment | character_set_client | collation_connection | Database Collation |
+-----------+---------------+-----------+---------+---------------------+---------------------+---------------+---------+----------------------+----------------------+--------------------+
|   yourdb  | sp_user_login | PROCEDURE | root@%  | 2013-12-06 14:10:25 | 2013-12-06 14:10:25 | DEFINER       |         | utf8                 | utf8_general_ci      | latin1_swedish_ci  |
+-----------+---------------+-----------+---------+---------------------+---------------------+---------------+---------+----------------------+----------------------+--------------------+
1 row in set (0.01 sec) 
```

我有一个定义，你可能没有一个开始。

**3\. 更改数据库，删除。**

```
mysql> use yourdb;
Database changed

mysql> drop procedure if exists sp_user_login;
Query OK, 0 rows affected (0.01 sec)

mysql> show procedure status;
Empty set (0.00 sec) 
```

**4\. 好的，现在我没有定义存储过程。做一个最简单的：**

```
mysql> delimiter //
mysql> create procedure foobar()
    -> begin select 'hello'; end//
Query OK, 0 rows affected (0.00 sec) 
```

当您为存储过程输入命令后， // 将与终端通信。存储过程名称是 foobar。它不带任何参数，应该返回“hello”。

**5\. 看看有没有，记得把你的分隔符放回去！：**

```
 mysql> show procedure status;
 -> 
 -> 
```

明白了！为什么这不起作用？你设置的分隔符要`//`记住吗？将其设置回`;`

**6、把定界符放回去，看看过程：**

```
mysql> delimiter ;
mysql> show procedure status;
+-----------+--------+-----------+----------------+---------------------+---------------------+---------------+---------+----------------------+----------------------+--------------------+
| Db        | Name   | Type      | Definer        | Modified            | Created             | Security_type | Comment | character_set_client | collation_connection | Database Collation |
+-----------+--------+-----------+----------------+---------------------+---------------------+---------------+---------+----------------------+----------------------+--------------------+
| yourdb    | foobar | PROCEDURE | root@localhost | 2013-12-06 14:27:23 | 2013-12-06 14:27:23 | DEFINER       |         | utf8                 | utf8_general_ci      | latin1_swedish_ci  |
+-----------+--------+-----------+----------------+---------------------+---------------------+---------------+---------+----------------------+----------------------+--------------------+
1 row in set (0.00 sec) 
```

**7\. 运行它：**

```
mysql> call foobar();
+-------+
| hello |
+-------+
| hello |
+-------+
1 row in set (0.00 sec)
Query OK, 0 rows affected (0.00 sec) 
```

你好世界完成了，让我们用更好的东西覆盖它。

**8\. 删除 foobar，重新定义它以接受参数，然后重新运行它：**

```
mysql> drop procedure foobar;
Query OK, 0 rows affected (0.00 sec)

mysql> show procedure status;
Empty set (0.00 sec)

mysql> delimiter //
mysql> create procedure foobar (in var1 int)
    -> begin select var1 + 2 as result;
    -> end//
Query OK, 0 rows affected (0.00 sec)

mysql> delimiter ;
mysql> call foobar(5);
+--------+
| result |
+--------+
|      7 |
+--------+
1 row in set (0.00 sec)
Query OK, 0 rows affected (0.00 sec) 
```

好的！我们制作了一个接受输入、修改并输出的过程。现在让我们做一个输出变量。

**9\. 删除 foobar，创建一个 out 变量，运行它：**

```
mysql> delimiter ;
mysql> drop procedure foobar;
Query OK, 0 rows affected (0.00 sec)

mysql> delimiter //
mysql> create procedure foobar(out var1 varchar(100))
    -> begin set var1="kowalski, what's the status of the nuclear reactor?";
    -> end//
Query OK, 0 rows affected (0.00 sec)

mysql> delimiter ;
mysql> call foobar(@kowalski_status);
Query OK, 0 rows affected (0.00 sec)

mysql> select @kowalski_status;
+-----------------------------------------------------+
| @kowalski_status                                    |
+-----------------------------------------------------+
| kowalski, what's the status of the nuclear reactor? |
+-----------------------------------------------------+
1 row in set (0.00 sec) 
```

**10\. MySQL中INOUT使用示例：**

```
mysql> select 'ricksays' into @msg;
Query OK, 1 row affected (0.00 sec)

mysql> delimiter //
mysql> create procedure foobar (inout msg varchar(100))
-> begin
-> set msg = concat(@msg, " never gonna let you down");
-> end//

mysql> delimiter ;

mysql> call foobar(@msg);
Query OK, 0 rows affected (0.00 sec)

mysql> select @msg;
+-----------------------------------+
| @msg                              |
+-----------------------------------+
| ricksays never gonna let you down |
+-----------------------------------+
1 row in set (0.00 sec) 
```

好的，它起作用了，它将字符串连接在一起。因此，您定义了一个变量 msg，将该变量传递到名为 foobar 的存储过程中，而 @msg 由 foobar 写入。

现在您知道如何使用分隔符创建存储过程。在此处继续本教程，从存储过程中的变量开始：http: [//net.tutsplus.com/tutorials/an-introduction-to-stored-procedures/](http://net.tutsplus.com/tutorials/an-introduction-to-stored-procedures/)

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2013-04-03T11:53:02.163

这是带有分隔符的示例**MYSQL 存储过程**以及如何调用..

```
DELIMITER $$

DROP PROCEDURE IF EXISTS `sp_user_login` $$
CREATE DEFINER=`root`@`%` PROCEDURE `sp_user_login`(
  IN loc_username VARCHAR(255),
  IN loc_password VARCHAR(255)
)
BEGIN

  SELECT user_id,
         user_name,
         user_emailid,
         user_profileimage,
         last_update
    FROM tbl_user
   WHERE user_name = loc_username
     AND password = loc_password
     AND status = 1;

END $$

DELIMITER ; 
```

并通过 mysql_connection 规范和调用

```
$loginCheck="call sp_user_login('".$username."','".$password."');"; 
```

它将返回过程的结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-27T06:16:08.440

这是我在 MySQL 中创建过程的代码：

```
DELIMITER $$
CREATE DEFINER=`root`@`localhost` PROCEDURE `procedureName`(IN comId int)
BEGIN
select * from tableName 
         (add joins OR sub query as per your requirement)
         Where (where condition here)
END $$
DELIMITER ; 
```

要调用此过程，请使用此查询：

```
call procedureName(); // without parameter
call procedureName(id,pid); // with parameter 
```

细节 ：

1）DEFINER：root是用户名并根据您的mysql用户名进行更改 localhost是主机，如果您在托管服务器上执行此查询，则可以使用服务器的IP地址进行更改。

[阅读此处](http://dev.mysql.com/doc/connector-net/en/connector-net-tutorials-stored-procedures.html)了解更多详情

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-19T11:58:41.647

我创建了一个简单的 MySQL 程序，如下所示：

```
DELIMITER //
CREATE PROCEDURE GetAllListings()
 BEGIN
 SELECT nid, type, title  FROM node where type = 'lms_listing' order by nid desc;
END //
DELIMITER; 
```

请遵循此。创建过程后，您可以看到相同的内容并执行它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-29T12:43:17.780

## 我的 SQL 存储过程创建

```
DELIMiTER $$
create procedure GetUserRolesEnabled(in UserId int)
Begin

select * from users
where id=UserId ;
END $$
DELIMITER ; 
```

# java - Java枚举开关

> ID：15786259
> 
> 赞同：0
> 
> 时间：2013-04-03T11:35:07.940
> 
> 标签：java, enums, switch-statement

我有一个简单的枚举

```
public enum Columns {VENDOR, ITEM}; 
```

我正在尝试提取和驱动开关代码块。
我得到`classNotFound`的似乎是枚举的内部类，b/c 它显示`[class]_A$0`。我认为 enum 是一个静态的 final 和创建的对象，我可以直接在 switch 中使用。有人可以澄清吗？

```
 colObject="VENDOR";
      for (Columns c : Columns.values()) {
        if (colObject.toUpperCase().equals(c.name())) {
          System.out.println("Got it in iteration. i= " + i + " c= " +
                             c);
          switch (c.valueOf(colObject.toUpperCase())) {
            case VENDOR: {
              System.out.println("Got it in switch case= " + c.name());
            }
            break;
            default:
              System.out.println("Fell thru.");
              break;
          }//end switch
        }//end if
      }//end for 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T11:37:07.273

尝试：

```
switch (Columns.valueOf(colObject.toUpperCase())) { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T11:50:34.177

你可以使用 `java.lang.Enum`类。`Enum`课程将有助于将您转换`String "VENDOR"`为`enum-VENDOR`

需要添加以下代码行

> Enum.valueOf(Columns.class, colObject))

`java.lang.Enum`可以多态使用，而**列**( `enum`) 不能多态使用。

**完整代码**

```
enum Columns {
    VENDOR, ITEM
}

class Test {
    public static void main(String[] args) {
        String colObject = "VENDOR";

        switch (Enum.valueOf(Columns.class, colObject)) 
        {
            case VENDOR: {
                System.out.println("Got it in switch case= VENDOR");
                break;
            }
            default:
                System.out.println("Fell thru.");
                break;
            }
    }
} 
```

# android - AndEngine - 文本实体上的 setText 在第一秒内导致打嗝

> ID：15786269
> 
> 赞同：0
> 
> 时间：2013-04-03T11:35:37.230
> 
> 标签：android, opengl-es-2.0, andengine

想象一下使用 Text() 实体制作的分数计数器。简单的。

在我开始游戏后，调用`setText()`会导致启动`GC_EXPLICIT`会减慢游戏速度导致冻结，并且在几次调用后 - 问题消失了。首先，我认为这是 Java 中字符串和连接的问题，所以我使用了 StringBuilder。问题依然存在。如果我更改`setText("$" + score + "M")`为简单，`setText("0")`则不会注意到打嗝！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T11:35:37.230

问题出在`Font`. 的创建`Texture`实际上并没有将字符加载到这个`Texture`！您需要做的就是在创建`Font`简单的调用之后：

`pFont.prepareLetters("0123456789".toCharArray());` 包含您需要的所有字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-21T09:18:18.370

由于`GC_EXPLICIT`Font in`update()`明确调用`System.gc()`. 删除这条线，我们回到了绿线下方的轨道上，是的！60 帧/秒。

然而，AndEngine 的作者可能有这个明确调用的原因。由于阶段很短，我们允许我们的应用`gc()`在暂停、退出或阶段完成时调用它`GameScene`，任何没有过多动画的地方。

预先准备字符并不能缓解打嗝，因为文本是动态的，我们无法准备所有可能的字符来保留`System.gc()`这种方法，但以后会尊重它。

实际上，预先准备信件不会触发`GC_EXPLICIT`，正如 OP 提供的答案中所描述的那样。

**编辑**：

经过一番研究，导致 < 60fps 的另一件事是`SoundPool`，我们应该用音量`0f,0f`和循环播放声音，以防止`SoundPool`重置为空闲状态并再次重新启动。

# mysql - 带有 count(*) 的子查询

> ID：15786272
> 
> 赞同：1
> 
> 时间：2013-04-03T11:35:54.877
> 
> 标签：mysql, sql

`left(number,7)`如何从子查询数据中获取关联失败的`count(*)`数据？

例如我这样做：

```
SELECT * FROM table1 WHERE outcome = 'Fail' AND left(number,7) = 
   (SELECT count(*) as total, left(number,7) as prefix  
   FROM table1 where outcome like '%Passed%' 
   group by prefix order by total desc limit 250) 
```

这不会起作用，因为子查询中有两个字段..那么如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T11:38:07.573

您可以使用`JOIN`而不是子查询：

```
SELECT t1.*, t2.total, ... 
FROM table1 AS t1
INNER JOIN
(
    SELECT count(*) as total, left(number,7) as prefix  
    FROM table1 
    where outcome like '%Passed%' AND outcome = 'Fail'
    group by prefix 
    order by total desc limit 250
) AS t2 ON t2.prefix = left(t1.number,7) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T11:39:40.413

试试这个查询

```
 SELECT * 
 FROM 
   table1 a 
 INNER JOIN 
   (SELECT 
      count(*) as total, 
      left(number,7) as prefix  
   FROM 
      table1 
   where 
      outcome like '%Passed%' 
   group by 
      prefix 
   order by 
      total desc limit 250)b
 ON 
   a.outcome = 'Fail' AND 
   left(number,7) = b.prefix 
```

# c# - 是否可以向方法或属性添加引用或链接？

> ID：15786279
> 
> 赞同：1
> 
> 时间：2013-04-03T11:36:23.657
> 
> 标签：c#, visual-studio, visual-studio-addins, comments

我倾向于在一种方法中写很多评论。有时我指的是另一个类中的另一个方法或属性。它类似于：

> // 如果你取消注释下一行，那么请确保你检查 'MyClass.SomeMethod'。

[更新]
试图希望给出更少的代码臭名昭著的评论。也许它可能会像（谢谢@Weston）：

```
/// <summary>
/// Adds two numbers  
/// See method Subtract for the opposite of add.
/// See also Multiply
/// </summary> 
```

也许可以在方法中编写类似的东西？@weston 的回答进一步帮助了我。[/更新]

我正在寻找可以使其可点击的东西。是否有任何现有的扩展/插件/添加可以做这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T11:57:01.107

如果您有 resharper，那么[文档注释解决方案](http://msdn.microsoft.com/en-us/library/acd0tfbe.aspx)+ F12 导航到定义确实有效。

```
 /// <summary>Adds two numbers
    /// <para>See <see cref="Subtract"/> for the opposite of add.</para>
    /// See also <seealso cref="Multiply"/>
    /// </summary>
    public int Add(int x, int y){ 
```

光标打开`Subtract`或`Multiply`然后 F12 将带您到那里。请注意，我已尝试关闭 resharper，但它不起作用。

更重要的是，resharper 将在这些注释中应用重命名重构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T11:48:23.493

无论如何，这几乎是一个坏主意，如果您必须包含有关代码的其他区域的注释，如果您在一个地方做某事可能会破坏/更改功能，那么您的代码可能需要重新考虑。

除此之外，我建议您查看 Visual Studio 扩展库，可能会有适合您需求的扩展。

如果没有查找扩展视觉工作室的指南，那么这样做的扩展可能不会太难自己组装。

# linq - 不支持 RavenDB SelectMany

> ID：15786283
> 
> 赞同：0
> 
> 时间：2013-04-03T11:36:42.237
> 
> 标签：linq, ravendb

我正在尝试根据子集合的值在 RavenDB 中查找一个或多个文档。

我有以下课程

```
public class GoldenDocument
{
    public GoldenDocument()
    {
        LinkedDocuments = new List<LinkedDocument>();
        MergeMatchFields = new List<MergeMatchField>();
    }

    public string Id { get; set; }
    public Guid SourceRowId { get; set; }
    public List<MergeMatchField> MergeMatchFields { get; set; }
    public List<LinkedDocument> LinkedDocuments { get; set; }
} 
```

以及集合中的类`MergeMatchFields`

```
public class MergeMatchField
{
    public string Id { get; set; }
    public Guid OriginId { get; set; }
    public string Name { get; set; }
    public MatchType MatchType { get; set; }
    public double MatchPerc { get; set; }
    public string Value { get; set; }
} 
```

在一个`List<MergeFields> mergeFields`集合中，我的值尚未存储在 RavenDB 中。通过执行以下查询，将值与 RavenDB 文档中的值进行比较以查找是否可能匹配：

```
using (var session = documentStore.OpenSession())
{
    var docs = from gd in session.Query<GoldenDocument>()
                from mf in gd.MergeMatchFields
                from tf in mergeFields
                where mf.Name == tf.Name 
                && JaroWinklerCalculator.jaroWinkler(mf.Value, tf.Value) > .90d 
                && !string.IsNullOrEmpty(mf.Value)
                select gd;
} 
```

我知道 ravenDB 不支持`SelectMany()`，所以我将如何从文档存储中获取结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:36:03.937

为此创建一个索引，该索引将输出您要查询的值。请注意，您不能像在此处那样执行任意代码：`JaroWinklerCalculator.jaroWinkler(mf.Value, tf.Value) > .90d`

但是您可以使用模糊查询，它们也会这样做。

# matlab - 无线信号分配

> ID：15786284
> 
> 赞同：0
> 
> 时间：2013-04-03T11:36:42.857
> 
> 标签：matlab, signal-processing, wireless

我正在努力使用一些 PDF 分发来模拟无线信号。问题是我正在研究不具备这些功能的旧版本的 matlab，例如；`normpdf`,`chi1pdf`和`raylpdf`.

任何形式的帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:45:55.870

### 从解析表达式生成任何 pdf

如果您有一个遵循正态分布的随机数生成器，则可以使用[逆变换采样](http://en.wikipedia.org/wiki/Inverse_transform_sampling)来生成任何分布的随机数。

### 从经验数据生成任何 pdf

```
inputData = ...

% Statistics
pdf = hist(inputData,ceil(sqrt(numel(inputData))));
pdf_norm = pdf/sum(pdf);
cdf_norm = cumsum(pdf_norm);

% Plot
figure
subplot(1,2,1)
title('pdf (normalized)')
bar(pdf_norm); 
subplot(1,2,2)
title('cdf (normalized)')
plot(cdf_norm,'r')
hold off 
```

# matlab - 在 MATLAB 中存在（x，'file'）需要永远

> ID：15786286
> 
> 赞同：13
> 
> 时间：2013-04-03T11:36:43.413
> 
> 标签：matlab, file-io, path, file-exists

我 [`exist(x, 'file')`](http://www.mathworks.se/help/matlab/ref/exist.html)用来检查我的机器上是否存在文件。此命令的执行需要 FOREVER（每次调用超过 10 秒！）。

我`matlabpath`的不是太长（大约 200 个条目），路径上的所有文件夹都在我的本地驱动器上（没有网络）。

1.  为什么`exist`需要永远？
2.  有没有办法让它运行得更快？

PS，
这个调用`exist`是 Matlab 执行的一部分`loadlibrary`。所以，如果你打电话给`loadlibrary`你，但你不知道为什么要花很**长时间**——这个问题也适合你。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-07T03:30:35.197

这是一个想法。您可以将包含这些头文件的目录放在[MATLAB](http://en.wikipedia.org/wiki/MATLAB)路径的前面，这样当`exist()`查看路径时，它会快速找到它们，而不必搜索其余条目。如果它花时间走过你的道路，那可能会有所帮助。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-05-07T07:12:13.043

哇！那是一个艰难的过程。底线：**删除 %TEMP% 文件！**

[我在%TEMP%](http://en.wikipedia.org/wiki/Temporary_folder#Traditional_locations)中有几千个文件。看来[MATLAB](http://en.wikipedia.org/wiki/MATLAB)真的很喜欢遍历 TEMP 目录。

清除 TEMP 文件夹后，立即`exist`运行！

[（感谢 Andrew 的[Process Monitor](http://en.wikipedia.org/wiki/Process_Monitor)建议！）]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-05T14:53:38.250

1.  `exist`是一个内置的 Matlab 函数。它旨在检查是否存在其他类型的对象（例如 Matlab 中的变量）以及文件。作为一个内置函数，要查看它是如何编码的并不容易。至少在 Windows 上，当您调用`exist('filename','file')`它时，它似乎只对操作系统进行一次 API 调用以检查文件是否存在。因此，要么操作系统需要很长时间，要么`exist`函数中存在一些膨胀使其运行缓慢。有关如何使操作系统更快返回结果的想法，请参阅其他海报中的解决方案

2.  人们有时会抱怨`exist('filename','file')`在循环中运行会使循环非常慢，这是因为调用可能需要几毫秒并且循环了几千次。这里的解决方案是更换

```
    如果存在（'文件名'，'文件'）   
      % 你的代码

```

用线

```
    如果 java.io.File('filename').exists
      % 你的代码

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-15T15:34:18.107

对于 372 个文件 Matlab：经过的时间是 40.207266 秒。（喝一杯） Java：经过的时间是 0.122165 秒。（眨眼）

# ios - 如何使用滑块到其他视图

> ID：15786292
> 
> 赞同：0
> 
> 时间：2013-04-03T11:36:52.843
> 
> 标签：ios, objective-c

我有 2 个视图，View_A 和 View_B。我在 View_A 上有一个滑块，在 View_B 上有一个 touchesMoved 方法。滑块有一个方法_A，如下所示。

```
- (void)method_A: (float)value{

value = [slider value];

} 
```

我希望调整滑块以更改 View_B 上 touchesMoved 中的浮动。浮动被发送到 ViewB 但 touchesMoved 没有收到。谁能告诉我如何将浮动传递给 touchesMoved？非常感谢。

# javascript - 调整画布大小

> ID：15786293
> 
> 赞同：1
> 
> 时间：2013-04-03T11:36:52.970
> 
> 标签：javascript, css, canvas

我正在尝试使用 flex-boxes 设计一个网页，以使其适合任何类型的屏幕尺寸。我的主屏幕有一个画布，所以......在初始化期间调整画布大小的最佳方法是什么？

这两种方法我都试过了。我的第一种方法是使用 CSS 并为其大小设置百分比。例如，宽度=100%，高度=100%。尽管设计有效，但我发现在使用画布坐标时存在很多问题。例如，当拖动一个项目时，我的鼠标坐标放大了十倍左右。尽管我可以做到这一点，但我认为这不是最好的方法。

第二种方法是在 onload 和 onresize 事件被触发时设置固定大小。我正在做这样的事情：

```
window.initHeight = window.screen.height;
window.initWidth = window.screen.width;
/*The height of the navbar.*/
navbar.height = document.getElementById('navbar').offsetHeight;

canvas = document.getElementById('canvasStage');
canvas.width = window.initWidth;
canvas.height = window.initHeight - navbar.height;

canvas.setAttribute("width", canvas.width);
canvas.setAttribute("height", canvas.height); 
```

问题是高度似乎太大了：http: [//i.imgur.com/WI0jGH2.png](http://i.imgur.com/WI0jGH2.png) 我怎样才能通过这种方式完全适合屏幕？

第三种方法，但我会尽量避免它，是设置一个固定的大小，让小屏幕在页面上滚动。

谢谢！

更新：这是我的 JSFiddle： http: [//i.imgur.com/NRTykLv.png](http://i.imgur.com/NRTykLv.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:49:22.067

`window.screen.width`并`window.screen.height`返回屏幕的宽度和高度，其中包括所有条形（您在屏幕上看到的所有内容）。因此您必须使用`window.innerHeight`and`window.innerWidth`才能获取视口高度和宽度

代替

```
window.initHeight = window.screen.height;
window.initWidth = window.screen.width; 
```

和

```
window.initHeight = window.innerHeight;
window.initWidth = window.innerWidth; 
```

# c# - 使用 WUAPILib 从远程计算机检索 Windows 更新历史记录

> ID：15786294
> 
> 赞同：3
> 
> 时间：2013-04-03T11:36:55.420
> 
> 标签：c#, windows-update

是否可以使用 WUAPI 2.0 类型库在远程计算机上查看 Windows 更新历史记录？它必须与 Windows XP 和 Windows 7 机器兼容。

根据Microsoft 的文章[Using WUA From a Remote Computer](http://msdn.microsoft.com/en-us/library/windows/desktop/aa387288%28v=vs.85%29.aspx)**是**可能的：

> “Windows 更新代理 (WUA) API 可由远程计算机上的用户或远程计算机上运行的应用程序使用。”

...但我找不到任何解释如何实际查询远程机器或在哪里指定机器主机名或 IP 地址的地方。

我正在使用以下示例代码从本地机器获取我需要的信息：

```
UpdateSession updateSession = new UpdateSession();
IUpdateSearcher updateSearcher = updateSession.CreateUpdateSearcher();
int count = updateSearcher.GetTotalHistoryCount();
IUpdateHistoryEntryCollection history = updateSearcher.QueryHistory(0, count);
for (int i = 0; i < count; ++i)
{
     Console.WriteLine(string.Format("Title: {0}\tSupportURL: {1}\tDate: {2}\tResult Code: {3}\tDescription: {4}\r\n", history[i].Title, history[i].SupportUrl, history[i].Date, history[i].ResultCode, history[i].Description));
} 
```

是否可以使用 WUAPILib（或类似的）从远程机器上提取与上述代码相同的信息？WMI 类[Win32_QuickFixEngineering](http://msdn.microsoft.com/en-au/library/windows/desktop/aa394391%28v=vs.85%29.aspx)不提供与 WUAPILib 相同的信息，因此它不是一个选项，我宁愿不必手动挖掘注册表来提取信息。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T13:05:17.103

一个[相关问题](https://stackoverflow.com/questions/7639439/using-wua-remotely-using-c-sharp)的答案基本上回答了我的问题。

下面修改后的代码示例现在可以查询远程机器：

```
Type t = Type.GetTypeFromProgID("Microsoft.Update.Session", "remotehostname");
UpdateSession session = (UpdateSession)Activator.CreateInstance(t);
IUpdateSearcher updateSearcher = session.CreateUpdateSearcher();
int count = updateSearcher.GetTotalHistoryCount();
IUpdateHistoryEntryCollection history = updateSearcher.QueryHistory(0, count);
for (int i = 0; i < count; ++i)
{
    Console.WriteLine(string.Format("Title: {0}\tSupportURL: {1}\tDate: {2}\tResult Code: {3}\tDescription: {4}\r\n", history[i].Title, history[i].SupportUrl, history[i].Date, history[i].ResultCode, history[i].Description));
} 
```

# php - 我应该使用 mysqli_real_escape_string 还是应该使用准备好的语句？

> ID：15786295
> 
> 赞同：5
> 
> 时间：2013-04-03T11:36:57.397
> 
> 标签：php, mysqli, prepared-statement, mysql-real-escape-string

我应该使用`mysqli_real_escape_string`还是应该使用准备好的语句？

我已经看到一个教程现在解释准备好的语句，但我已经看到它们做同样的事情，`mysqli_real_escape_string`但它使用更多的行

准备好的陈述有什么好处吗？你认为最好的使用方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T11:39:04.640

使用`prepared statements`，因为使用后您不必使用 `mysqli_real_escape_string`. `prepared statements`默认情况下这样做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T11:45:16.237

**仅准备好的陈述**。因为无处可逃是一回事。事实上，逃逸与任何注射都没有任何关系，不应该用于保护。

虽然准备好的语句在适用时提供 100% 的安全性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T11:39:12.260

很容易忘记（可能不是您，而是与您一起工作的其他开发人员）逃避，而错误地使用准备好的语句来导致漏洞非常困难。所以准备好的陈述。

# php - GM_setValue 和 $_POST 值

> ID：15786298
> 
> 赞同：0
> 
> 时间：2013-04-03T11:36:59.570
> 
> 标签：php, post, greasemonkey

在 Greasemonkey 中，我想使用 GM_setValue 设置 $_POST 值，但它不起作用。

我试过了
`GM_setValue ("username", <? $_POST['email']; ?>);`

但如果我尝试一下，什么也不会发生。任何人都可以帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:52:10.967

您无法从常规 HTML 页面访问 GM_setValue，也无法从 PHP 发出该语句并使其正常工作。

你可以做类似的事情

```
<span id="username_span" data-value="<?php echo $_POST['email']; ?>"></span> 
```

并让您的油脂猴子脚本查找跨度并提取数据值。

```
// Typed from memory, untested.
var username_span = document.getElementById("username_span");
var username = username_span.getAttribute("data-value"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T11:39:27.693

试试看：

```
GM_setValue ("username", <?php echo $_POST['email']; ?>); 
```

# javascript - 在 HTML 页面中放置内部 JS 和外部 JS 的位置

> ID：15786299
> 
> 赞同：-1
> 
> 时间：2013-04-03T11:37:00.587
> 
> 标签：javascript, external, internal

我在我的页面中使用了内部 JS（在页面上），这是为了我的编码目的而编写的。除此之外，我也使用外部 JS。我在我的内部 JS（在页面上）中使用了外部 JS。当我将外部 JS 放在内部 JS 下方时，它工作正常。但是当我将外部 JS 放在内部 JS 之上时它不起作用。我问这个是为了我的知识。我只是想知道原因。我知道.. JS 应该放在 body 标签的末尾。但是当我使用 Internal 和 External JS 时呢？

---> 如果我在内部 js 中定义外部 js。工作正常。

```
<script type="text/javascript">
    script code .. which uses external.js function. 
</script>
<script type="text/javascript" src="external.js"></script> 
```

---> 如果我在内部 js 之上定义外部 js。不工作。

```
<script type="text/javascript" src="external.js"></script>
<script type="text/javascript">
     script code .. which uses external.js function.
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:57:42.620

通常，您需要将脚本（内部或外部）放在`<head>`.

谷歌分析[喜欢出现在页面底部，](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingOverview#trackingCodePlacement)因为如果你把它放在现有产品上是有道理的。如果您从一开始就为网站设计脚本，那么您就有机会做对了。

脚本是内部的还是外部的通常由更有意义的方法决定。如果您有一个在多个页面上使用的脚本，您可能会将其放在外部脚本中，以便您可以重复使用它。性能考虑是相当复杂的，这当然不是一件小事。

我猜你遇到的是外部脚本对一些内部脚本的依赖。

```
<script type="text/javascript">
    var my_var = "foo";
</script>
<script type="text/javascript" src="external.js"></script>

-- external.js
console.log(my_var); 
```

如果您在上面的示例中更改脚本的顺序，它将打印`undefined`而不是`"foo"`. 确保以有意义的顺序定义脚本。确保您的外部脚本没有奇怪或未记录的依赖项。

# java - 如何根据表格第二列中的值设置第一列中的复选框？

> ID：15786300
> 
> 赞同：0
> 
> 时间：2013-04-03T11:37:04.447
> 
> 标签：java, selenium, browser-automation

我正在使用 Java 和 Selenium 自动执行一项任务。

我想根据第二列中的值是否与我的输入值匹配来设置一个复选框（位于表的第一列中）。例如，在以下代码片段中，值“Magnus”与我的输入值匹配，因此我想设置与之关联的复选框。

```
<table class="cuesTableBg" width="100%" cellspacing="0" border="0" summary="Find List Table Result">
    <tbody>
        <tr class="cuesTableBg">
        <tr class="cuesTableRowEven">
        <tr class="cuesTableRowOdd">
            <td align="center">
                <input class="content-nogroove" type="checkbox" name="result[1].chked" value="true">
                <input type="hidden" value="1c62dd7a-097a-d318-df13-75de31f54cb9" name="result[1].col[0].stringVal">
                <input type="hidden" value="Magnus" name="result[1].col[1].stringVal">
            </td>
            <td align="left">
                <a class="cuesTextLink" href="userEdit.do?key=1c62dd7a-097a-d318-df13-75de31f54cb9">Magnus</a>
            </td>
            <td align="left"></td>
            <td align="left">Carlsen</td>
            <td align="left"></td>
        </tr>
        <tr class="cuesTableRowEven">
    </tbody>
</table> 
```

但我无法做到。在上述情况下，以下两行用于目的（因为我的输入值与第二行中的值匹配）：

```
WebElement checkbox = driver.findElement(By.xpath("//input[@type = 'checkbox' and @name = 'result[1].chked']"));
checkbox.click(); 
```

但它不能被使用，因为所需的值可能并不总是在第二行。

我尝试了以下代码块但无济于事：

```
List<WebElement> rows = driver.findElements(By.xpath("//table[@summary = 'Find List Table Result']//tr"));
for (WebElement row : rows) {
    WebElement userID = row.findElement(By.xpath(".//td[1]"));
    if(userID.getText() == "Magnus") {
        WebElement checkbox = row.findElement(By.xpath(".//input[@type = 'checkbox']"));
        checkbox.click();
        break;
    }
} 
```

对于它的价值，第二列中文本的 XPath：

```
/html/body[@id='mainbody']/table/tbody/tr/td/div[@id='contentautoscroll']/form/table[2]/tbody/tr[3]/td[2]/a 
```

我不知道[CSS 选择器](https://stackoverflow.com/questions/10323884/parsing-html-table-data-with-xpath-and-selenium-in-java)。在这里会有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:47:56.767

如果您已经知道输入值，您只需在 xpath 下方使用来选择受尊重的复选框

```
"//a[text(),'Magnus']/parent::td/preceding-sibling::td/input[@type='checkbox']" 
```

更新：

```
"//a[text()='Magnus']/parent::td/preceding-sibling::td/input[@type='checkbox']" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:19:06.607

在比较两个字符串`equals`时应该使用而不是`==`

代替

```
 if(userID.getText() == "Magnus") 
```

和

```
String check1 = userID.getText();
if(check1.equals("Magnus") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T09:53:14.053

似乎这是我的一个愚蠢的错误。下面的代码片段，一个相当简单的，工作。

```
List<WebElement> rows = driver.findElements(By.xpath("//table[@class='cuesTableBg']//tr"));

for (WebElement row : rows) {
    WebElement secondColumn = row.findElement(By.xpath(".//td[2]"));
    if(secondColumn.getText().equals("Magnus")) {
        WebElement checkbox = row.findElement(By.xpath(".//td[1]/input"));
        checkbox.click();
        break;      
    }   
} 
```

# maven - maven multimodule project-Update POM parent section in selected projects

> ID：15786302
> 
> 赞同：0
> 
> 时间：2013-04-03T11:37:06.757
> 
> 标签：maven, m2eclipse

我在eclipse中使用maven创建多模块项目。在该配置选项卡中配置父项后，添加模块我选择了添加并选择了要添加的模块，我已经检查了“更新选定项目中的POM父部分”。但它没有在所选模块中包含父信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:04:02.513

我不知道存在这样的功能，但你可以自己做，更可靠地将这些行添加到你的父 pom ：

### 父 pom.xml

这里放你的模块配置

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
                         http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>org.company.bla.bla</groupId>
    <artifactId>you-parent-artifact</artifactId>
    <version>1.0</version>

    <modules>
         <module>module-child-1</module>
          <module>module-child-2</module>
    </modules> 
```

### 孩子的 pom.xml

这里放你父母参考和省略版本

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
                         http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>org.company.bla.bla</groupId>
        <artifactId>you-parent-artifact</artifactId>
        <version>1.0</version>
    </parent>
    <artifactId>child-1</artifactId> 
```

更多信息在这里： http: [//www.sonatype.com/books/mvnex-book/reference/multimodule.html](http://www.sonatype.com/books/mvnex-book/reference/multimodule.html)

# c++ - C ++：从该类的公共部分调用该类中的私有函数

> ID：15786304
> 
> 赞同：1
> 
> 时间：2013-04-03T11:37:11.163
> 
> 标签：c++, class, function

如果我要创建一个类并将多个函数放入私有部分，我将如何从同一个类的公共部分调用这些函数？例子：

```
class calculator{
public: //What would go here

private:
    float calculate(float x, char y, float z){
        float answer;

        switch (y){

          case '+':
            answer = x + z;
            break;

          case '-':
            answer = x - z;
            break;

          case '/':
            answer = x / z;
            break;

          case '*':
            answer = x * z;
            break;

          default:
            return(0);
        }
        cout <<"= "; return answer;
    }

    void main(){
        float num1;
        float num2;
        char aOp;
        system("CLS");
        cout << ">> "; cin >> num1 >> aOp >> num2;
        cout << calculate(num1, aOp, num2) << endl << endl;
    }
}; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T11:39:30.003

您只需从公共成员函数中调用私有成员函数：

```
class Foo
{
 public:
  void foo() { privateFoo(); }
 private:
  void privateFoo();

}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T11:39:31.923

通常就像你现在做的那样。你在同一个班级，所以你可以访问私有方法。只是主要公开。另请注意，main 不是成员函数的好名称。main 通常是为程序的入口点保留的，不能在一个类中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T11:39:48.417

如果你想调用私有声明的函数，并且如果你想从任何地方调用它，你必须在公共部分调用一个函数（或为继承的类受保护），然后你必须调用这个私有函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-06T05:36:17.377

行。记住一件事。私有函数只能在属于同一类成员的另一个函数的帮助下调用。即使是对象也不能使用点运算符调用私有函数。参见这个例子：

```
#include<iostream>
using namespace std;
class student
{
private:
int m;
void read void //Private function of the class.
public:
void update(void);
void write(void);
}; 
```

如果 s1 是班级学生的对象，那么我们将无法这样写——

```
s1.read(); //it won't work: object can not access private members. 
```

但是我们知道我们可以在同一个类的另一个函数的帮助下调用 read() 函数，所以我们可以在**update()**函数或**write()**函数的帮助下调用它。所以这里我们在update()函数的帮助下调用read()函数来更新m的值。

```
void student :: update(void)
{
read(); ///simple call ; no object used
} 
```

因此，这是调用私有成员函数的方法。**最后是完整的程序，它在 update() 和 read() 函数的帮助下更新 m 的值。--**

```
#include<iostream>
using namespace std;
class student
{
int m;
void read()
{
m=5;
cout<<m;
}
public:
void update();
void write();

};
void student :: update()
{
    read();
}
int main()
{
student s1;
s1.update();
return 0;
} 
```

# android - 获取从 google play 安装的应用程序的安装日期/时间

> ID：15786310
> 
> 赞同：1
> 
> 时间：2013-04-03T11:37:26.650
> 
> 标签：android, datetime, google-play, installation-package

我需要获取特定用户在当前设备上从 google play 安装的应用程序的原始安装日期/时间。

我可以从包管理器获得最后安装日期，但不能从 google play ervices 获得原始安装日期。

请帮我。

先谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T00:05:12.307

从 API 9+：

```
long installed = context.getPackageManager().getPackageInfo("package.name", 0).firstInstallTime; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:04:56.417

抱歉，没有可用于检索此信息的方法或 API。

如果它是付费应用程序，您可以运行自己的服务器，每当在您的商家帐户中购买此应用程序时，该服务器就会进入数据库，然后从您的服务器检索日期和时间。

# iphone - 具有格式长度的 UITableviewcell

> ID：15786314
> 
> 赞同：0
> 
> 时间：2013-04-03T11:37:39.043
> 
> 标签：iphone, objective-c, xcode, uitableview

我正在做作业，我必须从 NSInputstream 接收传入的消息，并且必须在 UItableview 中查看它，我可以接收消息并正确发送消息，但有时我的字符串写在同一行，即使我给客栈。

有人知道吗？？？？

例如：
@abc:123:123:123:123@
@abc:123:123:123:123@
@abc:1:2:3@

第一行打印在第一行，但在第二行也打印第三行，谁能告诉我如何制作一个格式，如果字符串以“@”开头和结尾将写在每一行中，而不是在同一行中。

我做了很多过滤消息，但它失败了

我的代码：

```
 case NSStreamEventHasBytesAvailable:

        if (theStream == inputStream) {

            uint8_t buffer[1024];
            int len;

            while ([inputStream hasBytesAvailable]) {
                len = [inputStream read:buffer maxLength:sizeof(buffer)];
                if (len > 0) {

                    NSString *output = [[NSString alloc] initWithBytes:buffer length:len encoding:NSASCIIStringEncoding];

                    if (nil != output) {
                        NSLog(@"server said: %@", output);
                    }
                }
            }
        }
        break;
NSIndexPath *topIndexPath = [NSIndexPath indexPathForRow:messages.count-1 inSection:0];
[self.tView scrollToRowAtIndexPath:topIndexPath 
                  atScrollPosition:UITableViewScrollPositionMiddle 
                          animated:YES]; 
```

* * *

输出：
@abc:123:123:123:123@
@abc:123:123:123:123@ @abc:1:2:3@

但我期待：

@abc:123:123:123:123@
@abc:123:123:123:123@
@abc:1:2:3@

....如果字符串以“@”开头和结尾必须写在下一行...问题是因为某个时间字符串很小所以它占用同一行，但我希望它在下一行如果以“@”开头和结尾

# php - 延迟加载和依赖注入模式中的冗余 getter 和 setter

> ID：15786317
> 
> 赞同：3
> 
> 时间：2013-04-03T11:37:42.040
> 
> 标签：php, dependency-injection, coding-style, lazy-loading, traits

我目前正在我的 PHP 应用程序中实现延迟初始化和依赖注入模式，并面临以下问题：

每个类都有一堆提供外部类对象的 getter 和 setter 方法。有没有一种优雅的方法可以将这种“冗余”删除到父类或某种工厂？

编辑：不失去可测试性的优势;-)

EDIT2：这是一个 getter 和 setter 方法的示例，就像我使用它们一样：

```
function getSql() {
    if (is_object($this->sql) === FALSE) {
        $registry = \Registry::getInstance();
        $factories = $registry->get('factories');
        $database = $factories['databaseSql'];
        $this->sql = $database->getSql();
    }

    return $this->sql;
}

function setSql($sqlObject) {
    // ... some checks
    $this->sql = $sqlObject;
} 
```

EDIT3 我遵循了使用特征的想法，所以这里是一个使用“注册”类特征的示例解决方案：

```
trait Registration {

    private $registration = null;

    public function getRegistration() {
        $registry = \Registry::getInstance();
        $factories = $registry->get('factories');

        if (is_object($this->registration) === TRUE) {
            // get obect if instance already exists
            $registration = $this->registration;
        } else if (isset($factories['registration']) === TRUE) {
            // get object using the matching factory
            $registrationFactory = $factories['registration'];
            $registration = $registrationFactory->getRegistration();
        } else if (class_exists('\engine\classes\Registration') === TRUE) {
            // get object using the default object class when no specific factory is defined
            $registration = new \engine\classes\Registration();
        } else {
            throw new \Exception('error getting an instance of Registration');
        }

        $this->registration = $registration;

        return $registration;
    }

    public function setRegistration($object) {
        if (is_object($object) === FALSE)
            throw new \Exception('invalid registration object');

        $this->registration = $object;
    }
} 
```

用法

```
class Foo {
    use Registration;

    public function bar() {
        $reg = $this->getRegistration();
        // ... use instance of Registration
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:51:12.513

你知道PHP语言的OOP优势吗？

[遗产](http://www.php.net/manual/en/language.oop5.inheritance.php)

[性状](http://www.php.net/manual/en/language.oop5.traits.php)

[魔术吸气剂和二传手](http://www.php.net/manual/en/language.oop5.overloading.php#object.set)

可能是一些面向方面的编程。例如[使用 AOP 在 PHP 中实现可重用的流畅接口模式](http://go.aopphp.com/blog/2013/03/19/implementing-fluent-interface-pattern-in-php/)。

链接如此之多，因为您没有提供任何代码。

# xml - 使用可选元素创建 .xsd 和 .xml (if - then)

> ID：15786321
> 
> 赞同：1
> 
> 时间：2013-04-03T11:37:51.893
> 
> 标签：xml, xsd, xsd-validation

我需要创建具有特殊特性的 xsd 和 xml 文件。例如`'Plane'`与`'Model' ... 'Ammo'`. 如果我设置`'Ammo'`为`true`我需要设置`Missiles`（0-10）的数量。如果`'Ammo'`设置为`false`我应该无法选择数量`Missiles`。我怎样才能制作这个切换器？

部分 sxd 文件：

```
<xsd:complexType name="Plane">
    <xsd:sequence>
        <xsd:element name="Model" type="tns:Model" />   
        <xsd:element name="Ammunition" type="xsd:boolean" />
        <!-- If ammo is true add Missiles -->
    </xsd:sequence>
</xsd:complexType>

<xsd:complexType name="Model">
    <xsd:sequence>
        <xsd:element name="ModelType" type="xsd:string" />
    </xsd:sequence>
</xsd:complexType>

<xsd:simpleType name="Missile">
    <xsd:restriction base="xsd:byte">
        <xsd:minExclusive value="0" />
        <xsd:maxInclusive value="10" />
    </xsd:restriction>
</xsd:simpleType> 
```

和文件的一部分`xml`：

```
 <Plane>
    <Model>
        <ModelType>MiG-29</ModelType>
    </Model>

    <Ammunition>true</Ammunition>

    <!-- Set amount of missiles -->

 </Plane> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:59:50.453

单独的 XSD 1.0 无法表达跨字段验证。您需要使用 Schematron 扩展它或切换到 XSD 1.1，后者仍然不流行。

为了保持`Ammunition`标签的使用，我会将其转换为复杂类型并使其成为可选；它的内容将包含您支持的弹药，这实际上将实现相同的语义。理想情况下，我会一起删除弹药标签，它不是添加信息，只是开销。

# css - 如何使用 CSS 在图像周围根据需要绘制边框？

> ID：15786324
> 
> 赞同：0
> 
> 时间：2013-04-03T11:37:58.543
> 
> 标签：css

我有一个图像，它周围已经有一个边框。它是图像的一部分。我想使用 CSS 属性在我的图像周围绘制类似的边框。

我尝试了以下CSS代码...

`border-style:dashed;`

...但它并没有像我想要的那样绘制边界。下面是在图像本身具有边框的原始图像...

![带边框的图像](https://i.stack.imgur.com/QGuUb.jpg)

...这是我想使用 CSS 添加边框的图像

![图片无边框](https://i.stack.imgur.com/7RJOi.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T11:43:27.037

您似乎还需要填充和边框颜色：

```
img {
  padding: 3px;
  border: grey dashed 2px;
} 
```

结果 ：

![在此处输入图像描述](https://i.stack.imgur.com/gCUzu.png)

[示范](http://jsbin.com/irafan/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T11:41:54.510

试试边框图片

```
border-image:url(border.png) 30 30 round; 
```

# arrays - 如何在 VB 中使用字符串类：subStrings

> ID：15786327
> 
> 赞同：0
> 
> 时间：2013-04-03T11:38:01.793
> 
> 标签：arrays, vb.net, string, split, substring

不确定这个问题的最佳表达方式..

这个问题是在我实施数据集成服务之前提出的，但为了了解知识 - 我有来自 Excel 电子表格的数据，需要输入到数据库中。示例列是；ID、姓名和街道。

在网络表单上有 3 个文本框。用户将从 Excel 电子表格中复制 ID 单元格，然后将其粘贴到网络表单的 ID 文本框中。然后从 Excel 电子表格中复制名称单元格并将其粘贴到网络表单的名称文本框中...等

我正在想办法从 Excel 电子表格中复制一整行并将其粘贴到网络表单上的一个文本框中。

我的第一次尝试是拆分（）文本并创建字典。由于街道地址之间存在空格，这不起作用。有什么方法可以将 1 个文本框分成 3 个子字符串并保持街道字段中的完整性和空间？Name 和 Street 的数据类型是 varchar(30)。

```
'Example input of Textbox1.Text "1 myName Cheesecake Factory Lane"
    Dim words As String = TextBox1.Text
    Dim split As String() = words.Split(New [Char]() {" "c, ","c, "."c, ":"c, CChar(vbTab)})
    Dim rowData As New Dictionary(Of Integer, String)
    Dim i As Integer = 0

    For Each s As String In split

        If s.Trim() <> "" Then
          rowData.Add(i, s)
            i += 1
            ' output text for ID would be rowData.Item(0)
            'out text for Name would be rowData.Item(1)
            'out text for Street would be row.Data.Item(2)
        End If
    Next s 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T21:15:37.050

Excel places several data formats on the clipboard.

The "Text" format delimits the cells with Tab and the rows with Cr. You would have to depend on the users to highlight the proper cells but you can easily split columns using Tab (or rows with vbcrLf.)

Here is some code to explore formats:

```
 Dim o As IDataObject = Clipboard.GetDataObject()
    Dim a() As String = o.GetFormats ' see what formats are available
    Dim x As Object = o.GetData("text") ' returns MemoryStreams so this isn't useful as written

    Dim s As String = Clipboard.GetText ' just get delimited text from Excel 
```

# scala - 如何避免在模式匹配保护中显式调用 .isDefinedAt()

> ID：15786328
> 
> 赞同：2
> 
> 时间：2013-04-03T11:38:02.010
> 
> 标签：scala, pattern-matching, partialfunction

我有一些基于 Akka 的演员系统，其中多种演员基于相同的模板，因为这些演员仅在响应值类型上有所不同。例如：

```
final case class Request(data: Any)
final case class Response(data: Any)

abstract class ActorTemplate[T] extends Actor {
  def dataFunction: PartialFunction[Any, T]

  def respond(data: T): Response

  def receive: Receive = {
    case Request(data) if dataFunction.isDefinedAt(data) =>
      sender ! respond(dataFunction(data))
  }      
} 
```

部分函数有一种方法可以避免类型擦除，这使我无法简单

```
 def receive: Receive = {
    case Request(data: T) =>
      sender ! respond(data) 
```

同时强迫我`if dataFunction.isDefinedAt(data)`对模式产生警惕，我根本不喜欢它。

有什么方法可以避免显式保护？

我现在发现的唯一方法是引入一些愚蠢的提取器：

```
object DataExtractor {
  def unapply(data: Any): Option[T] =
    if (dataFunction.isDefinedAt(data)) Some(dataFunction(data)) else None
}

def receive: Receive = {
  case Request(DataExtractor(data) =>
    sender ! respond(data) 
```

但也许它已经在标准库的某个地方完成了？或者也许还有其他类似于集合`collect`方法的方法，但用于匹配？

# 结论

经过一番思考，我回到了提取器对象，并在@pagoda_5b 建议的帮助下将其移动到了一个特征中：

```
trait PFExtract[T] {
 object PF {
   def unapply(any: Any)(implicit pf: PartialFunction[Any, T]): Option[T] =
     pf.lift(any)
 }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T13:50:44.600

我实际上要做的是使用`applyOrElse`on 方法`dataFunction`，当未为给定输入定义部分函数时定义默认响应

```
def defaultAnswer: T

def receive: Receive = {
  case Request(data) =>
    sender ! respond(dataFunction.applyOrElse(data, defaultAnswer))
} 
```

如果您更喜欢将答案包装在 a 中`Option`，那么已经有一个名为的方法`lift`可以为您执行此操作，正如您正确猜到的那样

```
def receive: Receive = {
  case Request(data) =>
    sender ! respond(dataFunction.lift(data))
} 
```

如果没有为数据定义函数，您甚至可以决定不回答

```
def receive: Receive = {
  case Request(data) =>
    dataFunction.lift(data).foreach {
      sender ! respond(_)
    }
} 
```

`foreach`仅`Option`当有一些内容可用时（即，如果你`Some(...)`有

# sql-server - 从动态 SQL 中获取输出参数值

> ID：15786335
> 
> 赞同：3
> 
> 时间：2013-04-03T11:38:20.683
> 
> 标签：sql-server, tsql

```
declare @var varchar(max),@course varchar(max)
set @var='ABC'
set @Query=''
set @Query='  
select @course=PARAM from TABLE where PARAM='''+@var+''''
print @Query
exec (@Query) 
```

由于上述查询返回错误为

> 必须声明标量变量“@course”

这里的查询是我现在正在遵循的使查询成功的替代方法。

```
declare @var varchar(max),@course varchar(max),@Query varchar(max)
Create table #temp(param1 varchar(max))
set @var='ABC'
set @Query=''
set @Query='insert #temp(param1)
select PARAM from TABLE where PARAM='''+@var+''''
print @Query
exec (@Query)
select @course=param1 from #temp
drop table #temp 
```

除了我上面提到的解决方案之外，还有其他更好的选择吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-03T11:45:46.437

好吧，我不确定您是否真的需要在这里使用动态 SQL，但我怀疑您为我们简化了一个更复杂的示例。（提示：您不需要这样做。）

如果这就是你正在做的一切，那么为什么不只是：

```
SELECT @course = PARAM FROM dbo.Table WHERE PARAM = @var; 
```

（这甚至没有意义——根据定义`@course`，`@var`要么相等，要么行不存在。）

如果您的 SQL 实际上更复杂，那么您需要停止使用`EXEC()`并拥抱`sp_executesql`. 这允许的一件事是使用强类型参数（包括 ）具有更大的灵活性`OUTPUT`。这是一个简单的例子：

```
DECLARE @table_name SYSNAME;

DECLARE @var VARCHAR(MAX), @course VARCHAR(MAX), @sql NVARCHAR(MAX);

SELECT @var = 'ABC', @table_name = N'TABLE_2012';

SET @sql = N'SELECT @course = PARAM FROM ' + @table_name 
  + ' WHERE PARAM = @var;'

EXEC sp_executesql @sql,
  N'@var VARCHAR(MAX),@course VARCHAR(MAX) OUTPUT',
  @var, @course OUTPUT;

PRINT @course; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T11:54:38.850

你可以试试这个

```
declare @var varchar(max),@course varchar(max),@paramdef varchar(100)

set @var='ABC'
set @Query=''
set @Query=N'  
select @result=PARAM from TABLE where PARAM='''+@var+''''
set @paramdef=N'@result varhcar(20) OUTPUT'

execute sp_executesql @Query,@paramdef,@result=@course Output

SELECT @course 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-03T11:45:31.940

您可以在动态查询本身上声明变量

```
declare @var varchar(max)
set @var='ABC'
set @Query=''
set @Query='  
DECLARE @course varchar(max)
select @course=PARAM from TABLE where PARAM='''+@var+'''

SELECT @course
'
print @Query
exec (@Query)

--Reusing variable
    CREATE TABLE #temp
    (
        VALUE VARCHAR(MAX)
    )
    INSERT INTO #temp
    EXEC (@Query)
    SELECT * FROM #temp 
```

# svg - 如何在 SVG 中实现像谷歌地图一样的平移

> ID：15786336
> 
> 赞同：2
> 
> 时间：2013-04-03T11:38:22.480
> 
> 标签：svg, zooming, jquery-svg, panning

我已经放大了 SVG 图表。请参考下面的截图。

![在此处输入图像描述](https://i.stack.imgur.com/Jt0XI.png)

上面的截图系列是缩放状态。我使用剪切概念在缩放后隐藏图表区域的外部线条。

我需要在这里平移吗？我怎样才能像谷歌地图一样实施。当我开始平移以移动系列并查看另一个区域的缩放图表时。如何对 SVG 中的路径元素执行“翻译”操作。屏幕截图中的元素称为系列（即数据点/线）。

我需要根据鼠标 movec 移动元素缩放区域（即像滚动隐藏的内容）。

“翻译”属性是否用于查看其他缩放区域？我如何在进行平移的路径元素中执行“翻译”。

正常图表截图。

![在此处输入图像描述](https://i.stack.imgur.com/kF9Fv.png)

放大的屏幕截图。

![在此处输入图像描述](https://i.stack.imgur.com/HMqPu.png)

请参考以下链接。

[http://www.cyberz.org/projects/SVGPan/tiger.svg](http://www.cyberz.org/projects/SVGPan/tiger.svg)

谢谢，

湿婆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:23:12.077

首先确定：

在您的项目位置下载 svgpan.js 文件

必须是您代码中的正确位置

你必须添加这个：xmlns:xlink="http://www.w3.org/1999/xlink"

# javascript - highcharts 在主细节图上重置缩放

> ID：15786337
> 
> 赞同：0
> 
> 时间：2013-04-03T11:38:25.873
> 
> 标签：javascript, highcharts

[我已经设置了一个主详细信息图表，它与 highcharts api 演示站点 ( http://www.highcharts.com/demo/dynamic-master-detail](http://www.highcharts.com/demo/dynamic-master-detail) )上的示例相差不远。

添加时：

```
resetZoomButton: {
                    position: {
                        x: 0,
                        y: -15
                    }
                 } 
```

到详细图表，它无法调出重置缩放按钮。有没有办法重置主从图上的缩放？

我的 JSFiddle 在这里：http: [//jsfiddle.net/sBEMS/2/](http://jsfiddle.net/sBEMS/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:42:41.007

您可以使用绝对位置和适当的坐标来准备自己的按钮。然后触发点击事件并通过 setExtremes() 函数设置适当的范围。

[http://api.highcharts.com/highcharts#Axis.setExtremes()](http://api.highcharts.com/highcharts#Axis.setExtremes())

# curl - Instagram订阅：挑战验证失败

> ID：15786349
> 
> 赞同：0
> 
> 时间：2013-04-03T11:39:27.737
> 
> 标签：curl, instagram

`Instagram`允许`Subdoamin`使用吗`Callback Url`？

有人可以让我指导一下可能的原因吗

```
: {
meta: {
error_type: "APISubscriptionError",
code: 400,
error_message: "Challenge verification failed. Sent "549830bffdaf4617a20639318a618e27", received " 549830bffdaf4617a20639318a618e27"."
}
} 
```

虽然我已经准确地指定了所有信息（除了这个`Subdomain`用法`Callback` `URI`。我正在使用`curl`......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T09:15:22.987

您需要将 $_GET["hub_challenge"] 返回到 instagram 以进行身份​​验证。

许多人面临的一个主要问题是额外的标题（例如谷歌分析）。

这是我的有效代码，供您参考：

```
<?php print $_GET["hub_challenge"]; exit(1);?> 
```

# python - 10个矩形列表，意思是每一个都画，只画一个

> ID：15786353
> 
> 赞同：1
> 
> 时间：2013-04-03T11:39:38.877
> 
> 标签：python, pygame

所以我有一个程序应该附加一个名为 Rectangle 的类的 10 个实例，它为矩形创建随机属性。如果我从列表中打印多个对象，它们会显示为不同的值，但如果我为多个对象调用绘制函数，屏幕上只会出现一个。

这是整个代码： http: [//pastebin.com/hb6LBjss](http://pastebin.com/hb6LBjss)

这里重要的代码是这些，第一个是矩形类，第二个将一个矩形附加到一个空列表 10 次，第三个在主程序循环中，应该绘制所有 10 个。

谢谢。

1.

```
class Rectangle():
    x = random.randrange(0, 701)
    y = random.randrange(0, 501)
    width = random.randrange(20,71)
    height = random.randrange(20,71)
    change_x = random.randrange(-3,4)
    change_y = random.randrange(-3,4)
    def move(self):
        self.x += self.change_x
        self.y += self.change_y
    def draw(self):
        pygame.draw.rect(screen, green, [self.x,self.y, self.width, self.height], 0) 
```

2.

```
myList = []

for i in range(10):
    myList.append(Rectangle()) 
```

3.

```
for i in myList:
    i.draw() 
```

我已经尝试了一大堆不同的东西，但是每次屏幕上只有一个矩形。

```
for i in range(10):
    x = myList[i]
    x.draw() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T11:48:03.467

您实际上正在绘制 10 个矩形，但它们都是相同的。

您没有传递要绘制的矩形类的实例，而是传递了该类本身。

这是一个简单的修复。

```
class Rectangle():
    x = random.randrange(0, 701)
    y = random.randrange(0, 501)
    width = random.randrange(20,71)
    height = random.randrange(20,71)
    change_x = random.randrange(-3,4)
    change_y = random.randrange(-3,4)
    def move(self):
        self.x += self.change_x
        self.y += self.change_y
    def draw(self):
        pygame.draw.rect(screen, green, [self.x,self.y, self.width, self.height], 0) 
```

变成：

```
class Rectangle():
    def __init__(self):
        self.x = random.randrange(0, 701)
        self.y = random.randrange(0, 501)
        self.width = random.randrange(20,71)
        self.height = random.randrange(20,71)
        self.change_x = random.randrange(-3,4)
        self.change_y = random.randrange(-3,4)

    def move(self):
        self.x += self.change_x
        self.y += self.change_y

    def draw(self):
        pygame.draw.rect(screen, green, [self.x, self.y, self.width, self.height], 0) 
```

* * *

`init`当你构造一个对象的实例时调用该方法，默认情况下，它什么都不做。由于您将所有这些变量/成员写入基类，而不是初始化程序，因此类的每个实例对于所有变量/成员都具有相同的值，因为它们成为类成员，而不是实例成员......

# google-sheets - 计算范围内的字符串匹配

> ID：15786359
> 
> 赞同：7
> 
> 时间：2013-04-03T11:39:55.850
> 
> 标签：google-sheets

目前我正在使用这个公式来计算一个范围内的字符串匹配数：

> =计数（过滤器（D3：D723，查找（A1，D3：D723）））

如果`A1="am"`和范围有`"ham"`, `"scammy"`, `"pan"`; 然后单元格将显示`2`。

它似乎可以正常工作，除了一件事 - 如果没有匹配项，它会显示匹配项 1。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T13:14:49.707

您可以使用：

```
=COUNTIF(D3:D723,"*"&A1&"*") 
```

它计算 D3:D7243 中具有单元格 A1 中的子字符串的单元格数量。* 在子字符串的前后作为通配符存在。

我也做了一个[工作示例](https://docs.google.com/spreadsheet/ccc?key=0ApNTZI1iT9tCdGdHNHlfdG5CMkd2c0o2d0ZOX2Z2dGc&usp=sharing)供您查看。

更新：固定声明

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T21:20:31.843

这是您正在寻找的公式。

## 公式

```
=COUNTA(IFERROR(FILTER(B:B,FIND(IF(A1="",(1/0),A1), B:B))),"") 
```

## 结果

搜索`A`：
![在此处输入图像描述](https://i.stack.imgur.com/Gn3Rr.png)

搜索空字符串：
![在此处输入图像描述](https://i.stack.imgur.com/fX5LV.png)

搜索`am`：
![在此处输入图像描述](https://i.stack.imgur.com/5yAcX.png)

## 例子

我已经为你创建了一个示例文件：**[Counting String Matches in a Range](https://docs.google.com/a/jacobjantuinstra.nl/spreadsheet/ccc?key=0AluAYY6ZHeWYdFhvYzBfLW05QUZRYlZyZUYxSW1Oa3c&usp=sharing)**

# java - arrayOutOfBounds 异常 java

> ID：15786361
> 
> 赞同：0
> 
> 时间：2013-04-03T11:40:04.910
> 
> 标签：java, arrays

我想根据我在 addToTree 方法中指定的规则解析一个文本文件并从中构建一棵树。但是，我收到此错误：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 0
at ie.gmit.TreeTest.addToTree(TreeTest.java:27)
at ie.gmit.TreeTest.parse(TreeTest.java:20)
at ie.gmit.TreeTest.main(TreeTest.java:77) 
```

addChar1 和 addChar2 是我通过在 parse 方法中传入的单词创建的节点

这是代码：

```
public class TreeTest {

public void parse(File f) throws Exception {
    Node root = new  Node('+'); //create a root node
    BufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream(f)));

    String line;
    while((line = br.readLine())!=null){
        String[] words = line.toLowerCase().split(" ");

        for(int i = 0; i < words.length; i++){
            addToTree(words[i], root);
        }
    }
}

public void addToTree(String s, Node root){
    char[] characters = s.toCharArray();
    Node addChar1 = new Node(characters[0]);
    Node addChar2 = new Node(characters[1]);
    Node fullWord = new Node(s);

    //get the child nodes of the root
    Node[] rootChildren = root.children();
    //get the child nodes of the first node (addChar1)
    Node[] addChar1Children = addChar1.children();

    //get each child of the root
    for(int i=0; i<rootChildren.length; i++){
        Node rootChild = rootChildren[i];
        //see if the addChar1 already exists in the tree
        //if it doesn't
        if(!rootChild.equals(addChar1)){
            //add the addChar1 as a child of the root
            root.addChild(addChar1);
            //add the addChar2 as a child of the addChar1 also
            addChar1.addChild(addChar2);
            //insert the whole word as the child of the addChar2
            addChar2.addChild(fullWord);
        }
        //if the addChar1 exists in the tree already
        else{
            // get each child of the addChar1
            for(int j=0; j<addChar1Children.length; j++){
                Node addChar1Child = addChar1Children[i];
                //see if the addChar2 already exists in the tree
                //if it doesn't
                if(!addChar1Child.equals(addChar2)){
                    //add the addChar2 as the child if the addChar1
                    addChar1.addChild(addChar2);
                    //add the actual word
                    addChar2.addChild(fullWord);
                }
                //if the addChar2 exists the the tree already
                else{
                    //insert the whole word as the child of the FOUND NODE
                    addChar1Child.addChild(fullWord);
                }
            }//end of second for loop
        }
    }//end of the first for loop

}//end of addToTree

 public static void main(String[] args) throws Exception {
     TreeTest test = new TreeTest();

     File f = new File("textFile.txt");
     test.parse(f);
 } 
```

}

有人会帮忙吗？该文件包含的所有内容：

“通常允许其用户通过网络浏览器添加修改或删除其内容的网站”

节点类：

```
 public class Node<E> {

    private Node parent;
    private String fullWord;
    private char character; // value inside a node
    private boolean word; // put a true flag if the node is a word eg 'a'
    private List<Node> children = new ArrayList<Node>();  //creates a list of array list objects

    //** constructors **/
    public Node(){

    }

    public Node(String fullWord){
        this.fullWord = fullWord;
    }

    public Node(Node parent){
        this.parent = parent;
    }

    public Node(char character){
        this.character = character;
    }

    public Node(boolean word){
        this.word = word;
    }

    public Node(Node parent, char character){
        this(parent);
        this.character = character;
    }

    public Node(Node parent, char character, boolean word){
        this(parent);
        this.character = character;
        this.word = word;
    }

    //** methods **/
    public boolean isRoot(){
        return this.parent ==  null;
    }

    public boolean hasChildren(){
        return this.children.size() > 0;
    }

    public void addChild(Node child){
        child.setParent(this);
        children.add(child);
    }

    public Node getParent(){
        return this.parent;
    }

    public void setParent(Node parent){
        this.parent = parent;
    }

    public Node[] children(){
        return (Node[]) children.toArray(new Node [children.size()]);
    }

    public char getItem() {
        return character;
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:45:45.780

检查这一行 (27)：

```
Node addChar1 = new Node(characters[0]); 
```

传入的是否`String`包含任何字符？检查您的输入文件中是否没有空行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T11:46:26.930

您可能应该在访问它们之前检查索引 0 和 1：

```
if (!s.isEmpty()) {
       char[] characters = s.toCharArray();
       Node addChar1 = new Node(characters[0]);
       Node addChar2 = new Node(characters[1]);
... 
```

你显然有一些空字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T11:48:04.917

当您使用此代码时

```
Node addChar1 = new Node(characters[0]);
Node addChar2 = new Node(characters[1]); 
```

您应该在访问索引元素之前检查字符数组的大小。当字符数组大小小于 2 时，您将得到 ArrayIndexOutOfBoundsException

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T11:53:15.363

char[] 字符 = s.toCharArray(); // 检查字符数组长度然后写入字符[1]

# asp.net - asp .net Gridview 高度溢出到下一个 div

> ID：15786362
> 
> 赞同：0
> 
> 时间：2013-04-03T11:40:14.613
> 
> 标签：asp.net, html, css, gridview

我有一个标签 ，`Gridview`在这个标签下面有一个包含其他内容的标签。 如果我不设置高度，则 GV 的内容会溢出到 GV 下方的部分中。 否则如果我设置，当记录较少时，GV后面会有一个空块。我该如何解决这个问题。请看代码...`div`
`div``div`
`Gridview div`

```
<div style="height: 100%; width: 785px; margin-top: 0px; overflow: hidden; display: table;">
    <tr>
        <td>
            <asp:GridView ID="dgAccessGrp" runat="server" Style="z-index: 101; left: 13px; position: absolute;
                margin-top: 0px; width: 686px;" AutoGenerateColumns="False" DataKeyNames="access_group_id"
                AllowPaging="True" RowStyle-Height="20px" CellPadding="3" CellSpacing="1" OnRowCancelingEdit="accessGrp_RowCancelingEdit"
                OnRowDeleting="accessGrp_RowDeleting" OnRowEditing="accessGrp_RowEditing" OnRowUpdating="accessGrp_RowUpdating"
                OnPageIndexChanging="dgAccessGrp_PageIndexChanging" OnRowCommand="dgAccessGrp_RowCommand"
                OnRowDataBound="dgAccessGrp_RowDataBound" Font-Bold="False">
                <Columns>
                    <asp:TemplateField HeaderText="SI No">
                        <ItemTemplate>
                            <asp:Label ID="lblAccessGrpID" runat="server" Width="70px" Text="<%# Bind('access_group_id') %>"
                                Visible="false"></asp:Label>
                            <asp:Label ID="lblSIno" runat="server" Width="15px" Text="<%#Container.DataItemIndex+1 %>"></asp:Label>
                        </ItemTemplate>
                        <ItemStyle HorizontalAlign="Center" />
                        <HeaderStyle HorizontalAlign="Left" BackColor="#006699" Font-Names="arial,helvetica,sans-serif"
                            Font-Size="8pt" ForeColor="White" />
                        <ControlStyle Font-Names="Arial" Font-Size="8pt" />
                    </asp:TemplateField>
                    <asp:BoundField DataField="access_group_id" Visible="False" />
                    <asp:TemplateField HeaderText="Access group">
                        <ItemTemplate>
                            <asp:LinkButton ID="btnSelect" CommandArgument='<%# Bind("access_group_id") %>' CommandName='SelectAccessGroup'
                                Text='<%# Bind("access_group_name") %>' runat="server" Width="90px"></asp:LinkButton>
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:TextBox ID="txtAccessGrp" MaxLength="50" runat="server" Width="90px" Text='<%# Bind("access_group_name") %>'> </asp:TextBox>
                        </EditItemTemplate>
                        <HeaderStyle HorizontalAlign="Left" BackColor="#006699" Font-Names="arial,helvetica,sans-serif"
                            Font-Size="8pt" ForeColor="White" />
                        <ControlStyle Font-Names="Arial" Font-Size="8pt" />
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Business Unit">
                        <ItemTemplate>
                            <asp:Label ID="lblBU" runat="server" Width="70px" Text="<%# Bind('bu_name') %>"></asp:Label>
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:Label ID="lblBU" runat="server" Width="70px" Text="<%# Bind('bu_id') %>" Visible="false"></asp:Label>
                            <asp:Label ID="lblIsActiveBU" runat="server" Width="70px" Text="<%# Bind('bu_active') %>"
                                Visible="false"></asp:Label>
                            <asp:DropDownList ID="dgDrpBU" runat="server" DataValueField="bu_id" DataTextField="bu_name">
                            </asp:DropDownList>
                        </EditItemTemplate>
                        <HeaderStyle HorizontalAlign="Left" BackColor="#006699" Font-Names="arial,helvetica,sans-serif"
                            Font-Size="8pt" ForeColor="White" />
                        <ControlStyle Font-Names="Arial" Font-Size="8pt" />
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="BU Line">
                        <ItemTemplate>
                            <asp:Label ID="lblBULine" runat="server" Width="70px" Text="<%# Bind('business_line_name') %>"></asp:Label>
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:Label ID="lblBULine" runat="server" Width="70px" Text="<%# Bind('business_line_id') %>"
                                Visible="false"></asp:Label>
                            <asp:Label ID="lblIsActiveBULine" runat="server" Width="70px" Text="<%# Bind('business_line_active') %>"
                                Visible="false"></asp:Label>
                            <asp:DropDownList ID="dgDrpBULine" runat="server" DataValueField="business_line_id"
                                DataTextField="business_line_name">
                            </asp:DropDownList>
                        </EditItemTemplate>
                        <HeaderStyle HorizontalAlign="Left" BackColor="#006699" Font-Names="arial,helvetica,sans-serif"
                            Font-Size="8pt" ForeColor="White" />
                        <ControlStyle Font-Names="Arial" Font-Size="8pt" />
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Location">
                        <ItemTemplate>
                            <asp:Label ID="lblLocation" runat="server" Width="70px" Text="<%# Bind('location') %>"></asp:Label>
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:Label ID="lblLocation" runat="server" Width="70px" Text="<%# Bind('location_id') %>"
                                Visible="false"></asp:Label>
                            <asp:Label ID="lblIsActiveStatus" runat="server" Width="70px" Text="<%# Bind('status') %>"
                                Visible="false"></asp:Label>
                            <asp:DropDownList ID="dgDrpBULocation" runat="server" DataValueField="location_id"
                                DataTextField="location">
                            </asp:DropDownList>
                        </EditItemTemplate>
                        <HeaderStyle HorizontalAlign="Left" BackColor="#006699" Font-Names="arial,helvetica,sans-serif"
                            Font-Size="8pt" ForeColor="White" />
                        <ControlStyle Font-Names="Arial" Font-Size="8pt" />
                    </asp:TemplateField>
                    <asp:CommandField ButtonType="Image" CancelImageUrl="~/IMAGEs/cross.gif" EditImageUrl="~/IMAGEs/edit.gif"
                        EditText="" HeaderText="" ShowEditButton="True" UpdateImageUrl="~/IMAGEs/check.gif"
                        UpdateText="">
                        <ControlStyle Font-Names="Arial" Font-Size="8pt" />
                        <HeaderStyle BackColor="#006699" Font-Names="Arial" Font-Size="8pt" ForeColor="White" />
                        <ItemStyle Width="30px" />
                    </asp:CommandField>
                    <asp:TemplateField HeaderText="">
                        <ItemTemplate>
                            <asp:LinkButton ID="btnDelete" CommandArgument='<%# Bind("access_group_id") %>' OnClientClick="return confirm('Are you sure you want to delete this record?');"
                                runat="server" Width="60px" CommandName="Delete">Delete</asp:LinkButton>
                        </ItemTemplate>
                        <ItemStyle HorizontalAlign="Center" Width="50px" />
                        <HeaderStyle HorizontalAlign="Left" BackColor="#006699" Font-Names="arial,helvetica,sans-serif"
                            Font-Size="8pt" ForeColor="White" />
                        <ControlStyle Font-Names="Arial" Font-Size="8pt" />
                    </asp:TemplateField>
                </Columns>
                <EditRowStyle BackColor="Yellow" />
                <PagerSettings Position="TopAndBottom" />
                <PagerStyle Wrap="True" BackColor="#CCCCCC" HorizontalAlign="Center" />
            </asp:GridView>
            <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:pt7dataConnectionString %>"
                SelectCommand="SELECT access_group_name, is_active, access_group_id, last_modified_by, date_stamp, bu_id, business_line_id, location_id FROM tbl_car_access_groups ORDER BY access_group_id DESC">
            </asp:SqlDataSource>
            <asp:SqlDataSource ID="SqlDataSource2" runat="server" ConnectionString="<%$ ConnectionStrings:pt7dataConnectionString %>"
                SelectCommand="Select bu_id,bu_name from  tbl_car_bu ORDER BY bu_name ASC"></asp:SqlDataSource>
        </td>
    </tr>
</div>
<div id="detailArea">
    <br />
    <asp:Label ID="lblError" runat="server" Font-Bold="True" Font-Names="Arial" Font-Size="9pt"
        ForeColor="White" Visible="False" BackColor="#E2001A"></asp:Label>
    <table style="height: 347px; width: 915px;">
        <tr>
            <td valign="top" bgcolor="#E1FFE1" style="border: 2px solid #808285">
                <table>
                    <tr>
                        <td class="style26" style="font-family: Arial; color: #003b6a; font-size: 12px; font-weight: bold"
                            valign="bottom">
                            Select User(s) Below :
                        </td>
                    </tr>
                    <tr>
                        <td class="style17" valign="top">
                            <asp:ListBox ID="lbAllUsers" runat="server" Font-Names="Arial" Font-Size="9pt" Height="227px"
                                Width="432px" SelectionMode="Multiple"></asp:ListBox>
                        </td>
                    </tr>
                    <tr>
                        <td class="style27">
                            <asp:Button ID="btnAddToMemberList" runat="server" Text="Add Selected User(s) To 'Group Members' List"
                                BackColor="#215F8B" BorderColor="#A2BAD2" BorderStyle="Solid" Font-Bold="True"
                                Font-Names="Arial" Font-Size="9pt" ForeColor="White" Width="346px" Height="23px"
                                OnClick="btnAddToMemberList_Click" OnClientClick="return AddUserToList()" />
                        </td>
                    </tr>
                    <tr>
                        <td class="style27">
                            <asp:Button ID="btnAddToGAList" runat="server" Text="Add Selected User(s) To 'Group Administrators' List"
                                BackColor="#215F8B" BorderColor="#A2BAD2" BorderStyle="Solid" Font-Bold="True"
                                Font-Names="Arial" Font-Size="9pt" ForeColor="White" Width="346px" Height="23px"
                                OnClick="btnAddToGAList_Click" OnClientClick="return AddUserToList()" />
                        </td>
                    </tr>
                    <tr>
                        <td class="style27">
                            <asp:Button ID="btnAddToGDList" runat="server" Text="Add Selected User(s) To 'Delgated Responsibility' List"
                                BackColor="#215F8B" BorderColor="#A2BAD2" BorderStyle="Solid" Font-Bold="True"
                                Font-Names="Arial" Font-Size="9pt" ForeColor="White" Width="346px" Height="23px"
                                OnClick="btnAddToGDList_Click" OnClientClick="return AddUserToList()" />
                        </td>
                    </tr>
                </table>
            </td>
            <td valign="top" bgcolor="#FFEFB0" style="border: 2px solid #808285" class="style31">
                <table>
                    <tr>
                        <td class="style28" style="font-family: Arial; color: #003b6a; font-size: 12px; font-weight: bold"
                            valign="bottom">
                            Group Members :
                        </td>
                    </tr>
                    <tr>
                        <td class="style29" valign="top">
                            <asp:ListBox ID="lbMembers" runat="server" Font-Names="Arial" Font-Size="9pt" Height="227px"
                                Width="432px" SelectionMode="Multiple"></asp:ListBox>
                        </td>
                    </tr>
                    <tr>
                        <td class="style30">
                            <asp:Button ID="btnDelMember" runat="server" Text="Remove Selected Member(s)" BackColor="#215F8B"
                                BorderColor="#A2BAD2" BorderStyle="Solid" Font-Bold="True" Font-Names="Arial"
                                Font-Size="9pt" ForeColor="White" Width="212px" Height="23px" OnClick="btnDelMember_Click"
                                OnClientClick="return DelMembers()" />
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
    <table style="border: 2px solid #808285; width: 913px; background-color: #FFEFB0;">
        <tr>
            <td>
                <table>
                    <tr>
                        <td style="font-family: Arial; color: #003b6a; font-size: 12px; font-weight: bold"
                            valign="bottom">
                            Group Administrators :
                        </td>
                        <td style="font-family: Arial; color: #003b6a; font-size: 12px; font-weight: bold"
                            valign="bottom">
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Delegated Responsibility To :
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <asp:ListBox ID="lbGAs" runat="server" Font-Names="Arial" Font-Size="9pt" Height="227px"
                                Width="432px" SelectionMode="Multiple"></asp:ListBox>
                        </td>
                        <td>
                            &nbsp;&nbsp;&nbsp;&nbsp;
                            <asp:ListBox ID="lbGDs" runat="server" Font-Names="Arial" Font-Size="9pt" Height="227px"
                                Width="432px" SelectionMode="Multiple"></asp:ListBox>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <asp:Button ID="btnDelGA" runat="server" Text="Remove Selected User(s)" BackColor="#215F8B"
                                BorderColor="#A2BAD2" BorderStyle="Solid" Font-Bold="True" Font-Names="Arial"
                                Font-Size="9pt" ForeColor="White" Width="212px" Height="23px" OnClick="btnDelGA_Click"
                                OnClientClick="return DelGAs()" />
                        </td>
                        <td>
                            &nbsp;&nbsp;&nbsp;&nbsp;
                            <asp:Button ID="btnDelGD" runat="server" Text="Remove Selected User(s)" BackColor="#215F8B"
                                BorderColor="#A2BAD2" BorderStyle="Solid" Font-Bold="True" Font-Names="Arial"
                                Font-Size="9pt" ForeColor="White" Width="212px" Height="23px" OnClick="btnDelGD_Click"
                                OnClientClick="return DelGDs()" />
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td>
                <table>
                    <tr>
                        <td style="font-family: Arial; color: #003b6a; font-size: 12px; font-weight: bold">
                            &nbsp;Name/Email Pairs - Can be pasted into Outlook : (Press Ctrl+A within box to
                            select all) &nbsp;<asp:TextBox ID="tbUserNames" runat="server" Height="140px" TextMode="MultiLine"
                                Width="881px" ReadOnly="True"></asp:TextBox>
                            <br />
                            <br />
                            <br />
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
    <br />
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:00:53.827

设置包含网格视图的 div 的最小高度。
还将gridview div的溢出属性设置为auto

您可以参考这些链接
[神秘的最小高度行为](https://stackoverflow.com/questions/9464604/mysterious-min-height-behavior)
[CSS 最大高度属性](https://stackoverflow.com/questions/297686/css-max-height-property)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:12:27.307

您添加到 gridview 的样式问题请从您的样式中删除“位置：绝对”属性。

# javascript - 创建仪表板时重载构造函数

> ID：15786364
> 
> 赞同：1
> 
> 时间：2013-04-03T11:40:22.820
> 
> 标签：javascript, api, google-apps-script

当我想创建仪表板时，我收到一条错误消息：

> 不能调用带参数setDataTable(object)的重载构造函数，因为有几个签名对应厂商： DashboardPanelBuilder setDataTable接口(DataTableBuilder) 接口DashboardPanelBuilder setDataTable(DataTableSource)。

法语：

> Impossible d'appeler le constructeur surchargé setDataTable avec des paramètres (object) car il existe plusieurs signatures de constructeur 对应：interface DashboardPanelBuilder setDataTable(DataTableBuilder) interface DashboardPanelBuilder setDataTable(DataTableSource)。

我只需将官方[测试脚本](https://developers.google.com/chart/interactive/docs/gallery/controls#skeleton)以下代码复制粘贴到电子表格脚本中的 html 文件中，然后像“网络应用程序”一样发布。当我直接使用电子表格数据创建 JS 脚本时，我会收到相同的错误消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-01T18:14:44.047

我遇到了同样的问题，不幸的是，谷歌用于演示的测试脚本文件对其他样式不太适应。

问题是指令“.setDataTable”可以期望两个不同的参数，Table 或 TableBuilder。当您定义数据表时，您需要确保其中一个或另一个的格式是一致的。我让我的工作使用以下格式：

var dataTable = Charts.newDataTable() .addColumn(Charts.ColumnType.DATE,"DATE") ... dataTable.build();

var lineChart = Charts.newLineChart() .setDataTable(dataTable);

无论错误告诉您什么，构造数据表都是错误，而不是设置数据表。

# android - 为对话框创建阴影

> ID：15786369
> 
> 赞同：5
> 
> 时间：2013-04-03T11:40:39.233
> 
> 标签：android, android-layout, android-ui

我想为我的自定义对话框创建一个阴影，这可能吗？

```
GhazalActivity.public void viewShareMenu() {
        Dialog share=new Dialog(this,R.style.shareDialogStyle);
        share.setContentView(R.layout.share_popup_layout);
        LayoutParams params = share.getWindow().getAttributes();
        params.y = this.getResources().getDimensionPixelSize(R.dimen.topbar_height);
        params.gravity=(Gravity.RIGHT|Gravity.TOP);
        share.getWindow().setAttributes(params);
        share.show();
} 
```

样式.xml：

```
<style name="shareDialogStyle" parent="android:style/Theme.Dialog">
    <item name="android:windowBackground">@color/transparent</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:fadeEnabled">true</item>
    <item name="android:fadeDuration">1500</item>
    <item name="android:shadowColor">@color/temp</item>
    <item name="android:shadowDx">0</item>
    <item name="android:shadowDy">5</item>
    <item name="android:shadowRadius">10</item>
    <item name="android:backgroundDimEnabled">false</item>
</style> 
```

share_popup_layout.xml ：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="150dip"
    android:background="@color/bg_Ghazal_share_menu"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <Button
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="right"
        style="@style/shareDialogButtons"/>
</LinearLayout> 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-18T06:07:15.133

我已经创建了自己的带有阴影的自定义对话框，您可以根据需要使用它，在第一步中，您应该为阴影和对话框框架创建一个 Android 形状。这是我提供的（**dialog_frame_shadow.xml**）：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <shape android:shape="rectangle"> <!-- this shape is used as shadow -->
            <padding android:bottom="5dp"
                android:left="5dp"
                android:right="5dp"
                android:top="5dp"/>
            <solid android:color="#44000000"/>
            <corners android:radius="5dp"/>
        </shape>
    </item>
    <item>
        <shape android:shape="rectangle"> <!-- this is for dialog frame -->
            <corners android:radius="5dp"/>
            <stroke android:color="#ff272727" android:width="2dp" />
            <gradient android:angle="90"
                android:startColor="#ffa7a7a7"
                android:centerColor="#ff6a6a6a"
                android:endColor="#ffa7a7a7"
                android:type="linear"/>
        </shape>
    </item>
</layer-list> 
```

在下一步中，您应该将对话主题更改为以下内容：

```
 <style name="my_dialog_theme">
     ...
     <item name="android:windowBackground">@drawable/dialog_frame_shadow</item>
     ...
 </style> 
```

现在你已经完成了，只需创建一个`Dialog`类的新实例并将这个主题应用于它（在 Dialog 构造函数中）：

```
Dialog dialog = new Dialog(this, R.style.my_dialog_theme);
dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
dialog.setContentView(R.layout.mdialog);
dialog.show(); 
```

这是它的截图：
![在此处输入图像描述](https://i.stack.imgur.com/0CncY.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T11:43:43.897

试试这个，创建一个xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">
  <gradient
    android:startColor="#ffffff"
    android:centerColor="#d3d7cf"
    android:endColor="#2e3436"
    android:angle="90" />
</shape> 
```

制作一个视图并将上面的 xml 设置为其背景，如：

```
 <View android:id="@+id/divider" android:background="@drawable/black_white_gradient"

    android:layout_width="match_parent" android:layout_height="5sp"
     <!--greater the height, more wider the shadow-->
   /> 
```

现在，如果您想在视图的左侧放置阴影，请将此视图与您的视图左对齐，如果您希望在底部有阴影，请将此视图对齐在您的视图下方...希望您现在得到它

# python - Python webbrowser：如何在 Windows 下用 Firefox 打开 svg 文件？

> ID：15786370
> 
> 赞同：1
> 
> 时间：2013-04-03T11:40:42.567
> 
> 标签：python, file, browser, python-webbrowser

我尝试使用 Python 的`webbrowser`模块在 Windows 7（firefox 版本：19.0.2）下使用 firefox 浏览器打开一个 svg 文件：

```
import webbrowser

chart_path = "C:\\my_file\\mysvg.svg"
browser = webbrowser.get('mozilla')
browser.open(chart_path) 
```

但我得到这个错误：

```
 browser = webbrowser.get('mozilla')
  File "C:\Python27\lib\webbrowser.py", line 52, in get
    raise Error("could not locate runnable browser")
webbrowser.Error: could not locate runnable browser 
```

这里有什么问题？我也试过用`"firefox"`名字。但我遇到了类似的错误。

当我做：

```
print webbrowser._browsers 
```

我得到：

```
{'windows-default': [<class 'webbrowser.WindowsDefault'>, None], 'c:\\program files\\internet explorer\\iexplore.exe': [None, <webbrowser.BackgroundBrowser object at 0x02F81B90>]} 
```

# c++ - MFC C++ 托盘应用程序问题

> ID：15786372
> 
> 赞同：0
> 
> 时间：2013-04-03T11:40:54.760
> 
> 标签：c++, visual-studio, mfc

我正在创建 mfc 应用程序的任务栏图标，并在我编写的 MyView.cpp 文件中

```
 static const UINT WMU_NOTIFY_TASKBAR_ICON = ::RegisterWindowMessage(_T("NOTIFY_TASKBAR_ICON"));

    IMPLEMENT_DYNCREATE(CMyView, CView)

    BEGIN_MESSAGE_MAP(CMyView, CView)
         // Standard printing commands
         ON_COMMAND(ID_FILE_PRINT, &CView::OnFilePrint)
         ON_COMMAND(ID_FILE_PRINT_DIRECT, &CView::OnFilePrint)
         ON_COMMAND(ID_FILE_PRINT_PREVIEW, &CView::OnFilePrintPreview)
         // added messages by the developer
         ON_REGISTERED_MESSAGE(WMU_NOTIFY_TASKBAR_ICON, OnNotifyTaskbarIcon)
    END_MESSAGE_MAP()
    //...

    void CMyView::AddTaskbarIcon()
    {
         DWORD dwMessage = NIM_ADD;
         NOTIFYICONDATA nid;

         nid.cbSize = sizeof(NOTIFYICONDATA);
         nid.hWnd = HWND(AfxGetApp()->m_pMainWnd);
         nid.uID = 0;
         nid.uFlags = NIF_MESSAGE | NIF_ICON | NIF_TIP;
         nid.uCallbackMessage = WMU_NOTIFY_TASKBAR_ICON;
         nid.hIcon = LoadIcon(GetModuleHandle(0), MAKEINTRESOURCE(IDI_SS_ICON));
         nid.dwInfoFlags = NIIF_INFO;
         ::Shell_NotifyIconW(dwMessage, &nid);
    }

    LRESULT CMyView::OnNotifyTaskbarIcon( WPARAM wParam, LPARAM lParam )
    {
        UINT uID = (UINT)wParam;
        UINT uMouseMsg = (UINT)lParam;

        switch(uMouseMsg)
        {
        case WM_LBUTTONDOWN:
            break;

        case WM_LBUTTONDBLCLK:
            //if(IsIconic())
            {
                break;
            }

        case WM_RBUTTONDOWN:
            {
                // must be implemented:
                // app popup menu will be showed
                CMenu* pMenu = GetMenu();
                if( pMenu )
                {
                    CMenu *pSubMenu = NULL;
                    pSubMenu = pMenu->GetSubMenu( 0 );
                    {
                        SetForegroundWindow(); // *** little patch here ***             
                        POINT pointCursor;             
                        ::GetCursorPos( &pointCursor );            
                        pSubMenu->TrackPopupMenu( TPM_RIGHTALIGN, 
                            pointCursor.x, pointCursor.y, 
                            this );
                    }
                }
            }
            break;

        case WM_RBUTTONDBLCLK:
            break;

        case WM_MOUSEMOVE:
            break;
        }

        return 0L;
    } 
```

在 My.cpp 中

```
 BOOL CMyApp::InitInstance()
    {
            //...
            myViewPtr->AddTaskbarIcon();
            //...
    } 
```

应用程序启动，图标出现在任务栏上，但鼠标悬停时消失。我做错了什么吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T20:18:32.657

`AfxGetApp()->m_pMainWnd`指向主框架窗口，而不是视图。我怀疑框架窗口正在接收`WMU_NOTIFY_TASKBAR_ICON`消息并且没有处理它，因此 Windows 删除了该图标。

您可以在框架窗口类中处理消息，也可以将句柄传递给视图，如下所示：

```
void CMyView::AddTaskbarIcon()
{
     ...
     nid.hWnd = GetSafeHwnd();
     ...
} 
```

# jmeter - 在 JMeter 中处理回调 URL

> ID：15786374
> 
> 赞同：3
> 
> 时间：2013-04-03T11:41:02.007
> 
> 标签：jmeter

我的 REST 服务接受 JMeter HTTP 请求，请求中的参数之一是回调 url。

REST 服务使用此回调 url 回发响应。

是否有任何 JMeter 侦听器可以用来接收回调，即 REST 服务可以将响应发送回 JMeter 侦听器。

如果可能的话，监听器可以根据响应发送另一个 HTTP 请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T11:10:40.950

我不确定你的问题。但我认为您希望收到您的 REST 响应并在响应中向 URL 发出另一个请求......

通过这种方式，您需要使用[正则表达式提取器](http://jmeter.apache.org/usermanual/component_reference.html#Regular_Expression_Extractor)“捕获”响应，将 URL 存储在对 JMeter 变量的响应中。然后，您创建 HTTP 请求，并将该 JMeter 变量中的 URL 放入请求中。

# command - Db2 大型机命令

> ID：15786375
> 
> 赞同：1
> 
> 时间：2013-04-03T11:41:08.293
> 
> 标签：command, db2, mainframe

我对大型机很天真，我的问题听起来很傻。但是，我想知道我们在哪里编写或发出 db2 命令，比如显示数据库命令。我们在哪个选项下发出这些命令。另外，我们如何找到哪个数据库处于活动状态？这个问题听起来很奇怪，但是，同样的问题被问到了我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:09:01.263

IBM 有一篇[信息中心文章](http://pic.dhe.ibm.com/infocenter/dzichelp/v2r2/topic/com.ibm.db2z9.doc.admin/src/tpc/db2z_whereentercommands.htm)，介绍了您可以在哪里可以在 Mainframe 上发出 DB2 命令。但是，如果您一般不熟悉大型机，它可能对您没有那么有用。

正如@cschneid 建议的那样，你可能想问问你的雇主是否有这方面的专业知识。否则，您需要从某个地方接受一些培训。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-12T06:19:43.703

大型机上有一个有用的 DB2 工具，称为 SPUFI，它可以执行 SQL 语句。

[https://www.ibm.com/support/knowledgecenter/en/SSEPEK_11.0.0/apsg/src/tpc/db2z_executesqlspufi.html](https://www.ibm.com/support/knowledgecenter/en/SSEPEK_11.0.0/apsg/src/tpc/db2z_executesqlspufi.html)

还有一个 DB2 管理工具。

# symfony - 验证复合实体的属性唯一性

> ID：15786378
> 
> 赞同：1
> 
> 时间：2013-04-03T11:41:13.400
> 
> 标签：symfony, doctrine-orm, symfony-forms

有谁知道如何在不创建自定义验证器的情况下验证两个实体属性的复合唯一性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:47:45.107

您可以将几个字段传递给注释：

```
@UniqueEntity(fields={"firstField", "secondField"}) 
```

# java - 如何知道一个点是否在复杂的 3D 形状内（.ply 文件）

> ID：15786382
> 
> 赞同：4
> 
> 时间：2013-04-03T11:41:19.587
> 
> 标签：java, 3d, intersection, java-3d, jbullet

我正在开发一个**Java**项目，女巫真的要了我的命。经过几天在不同论坛上的研究，寻找我真正需要的东西，我来寻求您的帮助。

我的数据：

*   .ply 文件（包含由许多三角形组成的 3D 形状）
*   一个点（3D 坐标）

我想知道这个点是否包含在复杂的 3D 形状中。

我把这个问题分成了两个小问题：

*   **如何在内存中表示复杂的 3D 形状？** *（我找到了几个库，但对于我想做的任务来说似乎真的很复杂：Java3D、JBullet、JME3...）我现在不希望我的 java 应用程序显示该对象。*

*   **我怎么知道这个点是否在 3D 形状内？** *（我想从点开始制作一个 3D 矢量并计算与形状的交叉点的数量，但我不知道该怎么做，我可以使用女巫库吗？）*

也许有更简单的方法可以做到这一点，这也是我来找你的原因。我现在真的被困住了，我想如果不编写海关库就可以做到这一点......

（对不起我的写作，我不是英语^^）

谢谢你帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:43:44.043

这是一种方法。不是最好的或最快的，但一旦你有一些工作，它会更容易改进。

> 如何在内存中表示复杂的 3D 形状？

实现一个快速而肮脏的 PLY 文件格式解析器。这是[PLY 格式规范](http://paulbourke.net/dataformats/ply/)。加载数据并将其存储在内部：每个 X、Y 和 Z 的数组。这都是纯 Java。

> 我怎么知道这个点是否在 3D 形状内？

根据您的点和其他任意点定义一条线。对于每个多边形，确定它与平面相交的位置（[一些帮助](http://www.netcomuk.co.uk/~jenolive/vect18c.html)）以及交点是在多边形内部还是外部（[一些帮助](http://bbs.dartmouth.edu/~fangq/MATH/download/source/Determining%20if%20a%20point%20lies%20on%20the%20interior%20of%20a%20polygon.htm)）。正如您所建议的，然后计算交叉点的数量以确定该点是在您的 3d 形状内部还是外部。

# java - 休眠映射子类忽略父级

> ID：15786388
> 
> 赞同：0
> 
> 时间：2013-04-03T11:41:43.153
> 
> 标签：java, hibernate

我想用一个共同的父类映射很多子类：B扩展A，C扩展A，......但数据库不关心A。B和C没有共同点（没有Id，没有参考。 ..)。

```
public class A {
    @Id
    @Column(name="id")
    private Long id;

    @Column(name="reference", nullable=false)
    private String reference;

} 
```

是否可以在不添加 @Entity 的情况下执行此操作？

**解决方案**

```
@MappedSuperclass
public class A {
    @Id
    @Column(name="id")
    private Long id;

    @Column(name="reference", nullable=false)
    private String reference;

}

@Entity
@Table(name="B")
public class B extends A {
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:44:06.230

[`@MappedSuperclass`](http://www.objectdb.com/api/java/jpa/MappedSuperclass)在课堂上使用`A`：

> 指定一个类，其映射信息应用于从它继承的实体。映射的超类没有为其定义单独的表。

# mongodb - 如何在多个字符串上查询 mongo 集合

> ID：15786389
> 
> 赞同：0
> 
> 时间：2013-04-03T11:41:43.613
> 
> 标签：mongodb, mongodb-.net-driver

我是 Mongo Db 的新手，并试图写一些查询。

我需要获取品牌价值不等于“任何”或“无”或包含“不”的产品列表。

我已经尝试了一些东西，但它不起作用。

```
var query = { "BarCode": { "$exists": 1,"$not":"any" }}; 
```

但它给出的错误很少。有人可以帮助我。

谢谢，

纳雷什

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T11:54:10.400

将 $ne 运算符用于“不等于”（[http://docs.mongodb.org/manual/reference/operator/ne/#op._S_ne](http://docs.mongodb.org/manual/reference/operator/ne/#op._S_ne)）：

```
var query = { "BarCode": { "$exists": 1, "$ne": "any" }}; 
```

所以完整的查询可能如下所示：

```
var query = { "Barcode": { "$exists": 1, "$nin": [ "any", "none"], "$not": /not/ }} 
```

$nin 运算符（“不在”）选择字段值不是指定值之一的文档（请参阅[http://docs.mongodb.org/manual/reference/operator/nin/#op._S_nin](http://docs.mongodb.org/manual/reference/operator/nin/#op._S_nin)）。$not 运算符对正则表达式运算符执行逻辑 NOT（请参阅[http://docs.mongodb.org/manual/reference/operator/regex/#op._S_regex](http://docs.mongodb.org/manual/reference/operator/regex/#op._S_regex)）。如果该字段不应包含“不”一词，请使用更复​​杂的正则表达式。请记住，此查询不会使用任何索引，因为正则表达式不以`^`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T11:52:58.163

请使用此 URL，它将具有从 SQL 到 mongoDB 查询的映射：http://docs.mongodb.org/manual/reference/sql-comparison/[对于](http://docs.mongodb.org/manual/reference/sql-comparison/) 您的解决方案，这将起作用。对于包含多个数组的 NOT IN，请使用 $nin

```
SELECT * FROM users WHERE status != "A"  =>  db.users.find({ status: { $ne: "A" } } ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-30T15:06:38.463

如果你想用正则表达式匹配多个字符串，那么使用下面的代码。

```
$matchStr = array( new MongoRegex('/school/i'), new MongoRegex('/college/i') );

$whereCondition = array(
    'name' => array('$nin' => $matchStr),
    'name' => array('$exists' => 1)
   );

$response = $this->Collection->find($whereCondition); 
```

此代码将提供所有没有**学校**或**大学**单词的输出响应。它对我来说很完美。

# vba - 根据另一个单元格值将公式写入单元格

> ID：15786390
> 
> 赞同：6
> 
> 时间：2013-04-03T11:41:45.840
> 
> 标签：vba, excel, excel-2007

我希望编写一个宏来为我完成一项非常重复的任务，但进入 VBA 比预期的要难。当我有时间的时候，我会学习如何为 excel 编写宏，因为它看起来非常有用，但是我这周不能花 5 到 12 个小时。

也许这里有人可以提供帮助！

我有一些遵循这种模式的 excel 文件：

```
Column C - Column D
--------------------
text     | (empty)
number   | (empty)
number   | (empty)
text     | (empty)
number   | (empty)
text     | (empty)
text     | (empty)
number   | (empty)
text     | (empty)
number   | (empty) 
```

文本和数字在几千个单元格中**随机交替。**我需要 D 列保存，当 C 列是数字时，与前一个数字的差值，否则它必须保持空白：

```
Column C - Column D
--------------------
text     | (empty)
3        | (empty)
14       | (=C3-C2) : 11
text     | (empty)
16       | (=C5-C3) : 2
text     | (empty)
text     | (empty)
21       | (=C8-C5) : 5
22       | (=C9-C8) : 1 
```

所以算法是：

```
var previousNumberCell
var i = 1

for all (selected) cells/rows 
 if (Row(i).column(C) holds number) {
   Row(i).column(D).value = "=C"+i+"-"C"+previousNumberCell
   previousNumberCell = i;
 }
 i++

End 
```

我不在乎第一个或最后一个单元格是否不起作用。

非常感谢您的帮助，或者如果您能指出我在哪里可以找到答案。

编辑：这是问题的简化版本，有两件事我不知道如何使用 excel 宏做得好：选择一个单元格，并判断单元格是否为数字...作为记录，数字单元格已被转换从文本到数字格式。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-03T11:49:21.137

试一试：

```
Sub MyMacro()
Dim rng as Range
Dim cl as Range
Dim lastNum as Range
Set rng = Range(Selection.Address) 'Make sure that your active SELECTION is correct before running the macro'

If Not rng.Columns.Count = 1 Then
    MsgBox "Please select only 1 column of data at a time.",vbCritical
    Exit SUb
Else:
    For each cl in rng
        If IsNumeric(cl.Value) Then
            If lastNum Is Nothing Then
                cl.Offset(0,1).Formula = "=" & cl.Address
            Else:
                cl.Offset(0,1).Formula = "=" & cl.Address & "-" & lastNum.Address

            End If
            set lastNum = cl
        End If
    Next
End If

End Sub 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-03T12:34:15.550

你需要VBA吗？

在 C 列之前插入一个新列 C
列与您的值成为 D 列
您可能需要列标题..
在单元格 C2 中放置：`=IF(E2=0;0;SUM(E$2:$E2))`这标识带有数字的行
在单元格 E2 中放置：`=IF(ISNUMBER(D2);1;0)`这将为每一行设置一个数字，以便在 vlookup 中使用下一个
在单元格 F2 中输入：`=IF(ISNUMBER(D2);ABS(D2-VLOOKUP(MAX($C$1:C1);$C$1:D1;2;0));"")`
自动填充列 C、E 和 F。
在列 F 中，您会得到结果，除了第一个，即“#VALUE”

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-02-13T14:03:23.730

嗨，您可以使用 if 公式和命名公式来执行此操作。if (isnumber ,命名公式,0)

命名公式（=查找公式）

# php - simplexml_load_file 在本地机器上工作，不能在线工作

> ID：15786391
> 
> 赞同：0
> 
> 时间：2013-04-03T11:41:46.503
> 
> 标签：php, xml, dreamhost, deezer

我正在使用 Deezer API

```
$xml = simplexml_load_file('http://api.deezer.com/2.0//search/artist/?q=eminem&index=0&nb_items=1&output=xml');

var_dump($xml);

$xml = simplexml_load_file('http://api.deezer.com/2.0/artist/393/top/&output=xml');

var_dump($xml); 
```

第一个调用在我的本地机器（Mac PHP 5.3.15）和在线梦想主机服务器（PHP 5.3.13）上的工作方式相同，第二个调用在我的本地机器上工作，报告所有 5 个轨道对象，但不是在线，我刚刚得到

```
object(SimpleXMLElement)#4 (2) { 
 ["data"]=> object(SimpleXMLElement)#1 (0) { } 
 ["total"]=> object(SimpleXMLElement)#3 (0) { } 
} 
```

在我看来很奇怪，你有什么线索吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-11T07:09:23.493

Deezer 为艺术家请求使用地理定位。

因此，例如，如果您的服务器位于美国，则第一个请求在本地和在线之间具有相同的结果，但第二个请求（[http://api.deezer.com/2.0/artist/393/top/&output=xml](http://api.deezer.com/2.0/artist/393/top/&output=xml)）本地/在线没有相同的结果。

向 FR Ip 请求：

```
<?xml version="1.0" encoding="utf-8"?><root><data><track><id><![CDATA[2114267]]></id><readable><![CDATA[1]]></readable><title><![CDATA[My Life]]></title><link><![CDATA[http://www.deezer.com/track/2114267]]></link><duration><![CDATA[321]]></duration><rank><![CDATA[674751]]></rank><preview><![CDATA[http://cdn-preview-2.deezer.com/stream/2ecb4b24f51cdbfdaea89630f1978529-0.mp3]]></preview><artist><id><![CDATA[393]]></id><name><![CDATA[The Game]]></name></artist><type><![CDATA[track]]></type></track><track><id><![CDATA[2307182]]></id><readable><![CDATA[1]]></readable><title><![CDATA[Hate It Or Love It]]></title><link><![CDATA[http://www.deezer.com/track/2307182]]></link><duration><![CDATA[207]]></duration><rank><![CDATA[654207]]></rank><preview><![CDATA[http://cdn-preview-3.deezer.com/stream/393350005d03712abc9adfbe2bcfe2d3-0.mp3]]></preview><artist><id><![CDATA[393]]></id><name><![CDATA[The Game]]></name></artist><type><![CDATA[track]]></type></track><track><id><![CDATA[2294433]]></id><readable><![CDATA[1]]></readable><title><![CDATA[How We Do]]></title><link><![CDATA[http://www.deezer.com/track/2294433]]></link><duration><![CDATA[235]]></duration><rank><![CDATA[610398]]></rank><preview><![CDATA[http://cdn-preview-c.deezer.com/stream/c3683a1fc1899c9d1b128b222d0e080f-1.mp3]]></preview><artist><id><![CDATA[393]]></id><name><![CDATA[The Game]]></name></artist><type><![CDATA[track]]></type></track><track><id><![CDATA[62751648]]></id><readable><![CDATA[1]]></readable><title><![CDATA[Ali Bomaye]]></title><link><![CDATA[http://www.deezer.com/track/62751648]]></link><duration><![CDATA[373]]></duration><rank><![CDATA[571988]]></rank><preview><![CDATA[http://cdn-preview-1.deezer.com/stream/1bb2606c722235eeecb2b1caa039f5c1-0.mp3]]></preview><artist><id><![CDATA[393]]></id><name><![CDATA[The Game]]></name></artist><type><![CDATA[track]]></type></track><track><id><![CDATA[61571949]]></id><readable><![CDATA[1]]></readable><title><![CDATA[Celebration]]></title><link><![CDATA[http://www.deezer.com/track/61571949]]></link><duration><![CDATA[290]]></duration><rank><![CDATA[559639]]></rank><preview><![CDATA[http://cdn-preview-f.deezer.com/stream/f1f535359bd60ce3ec77d59fcfda4ebd-1.mp3]]></preview><artist><id><![CDATA[393]]></id><name><![CDATA[The Game]]></name></artist><type><![CDATA[track]]></type></track></data><total><![CDATA[5]]></total></root> 
```

与美国位置相同的请求：

```
<?xml version="1.0" encoding="utf-8"?><root><data></data><total><![CDATA[0]]></total></root> 
```

完成答案。您可以使用位于非受限国家/地区的用户的 access_token 更改请求的地理位置（并从美国服务器获得结果），因为当您使用 access_token 请求 deezer api 时，api 将使用用户国家而不是服务器国家。

从用户获取访问令牌：http: [//developers.deezer.com/api/oauth](http://developers.deezer.com/api/oauth)

当您想使用用户地理位置添加此内容时，请不要忘记每个请求：

```
?access_token=XXXXX 
```

编辑：我是 deezer 团队的一员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T11:47:01.567

如果你想通过 http 协议访问 xml，你需要在 php.ini 中设置 allow_url_fopen ON 或者

```
ini_set('allow_url_fopen ','ON'); 
```

在你的代码中。或者，如果您使用的是 php 版本 <5，您也可以这样做

```
$temp = file_get_contents($url);
 $XmlObj = simplexml_load_string($temp); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T11:47:26.900

尝试：

```
$xml = simplexml_load_file('http://api.deezer.com/2.0/artist/393/top/?output=xml'); 
```

（即把'&'改成'?'）

这可能是也可能不是问题。

# appfabric - Appfabric 本地缓存通知

> ID：15786394
> 
> 赞同：1
> 
> 时间：2013-04-03T11:42:04.217
> 
> 标签：appfabric, appfabric-cache

我想看看我对Appfabric本地缓存失效的理解是否正确

假设我在本地缓存上设置了基于通知的失效默认轮询间隔为 5 分钟

轮询以哪种方式进行？我相信本地缓存会轮询分布式缓存以检查通知，这是正确的吗？

这是否意味着如果分布式缓存发生更改，根据上次同步发生的时间，本地缓存中的该项目可能在 5 分钟后失效？

有没有办法通过powershell或其他机制查看上次同步时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:57:03.117

1.  是的，本地轮询服务器每个 pollInterval。间隔可以[自定义](http://msdn.microsoft.com/en-us/library/ee790880.aspx)。
2.  对，那是正确的
3.  怀疑powershell。[如果您使用Set-CacheLogging](http://msdn.microsoft.com/en-us/library/ff718177%28v=azure.10%29.aspx#cachehost)可能会有一些跟踪事件，但我没有尝试。肯定会起作用的是在代码中订阅[缓存通知](http://msdn.microsoft.com/en-us/library/ee808091.aspx)并在其中设置断点。

# metadata - 如何将 meta_data 添加到 Pandas 数据框？

> ID：15786397
> 
> 赞同：4
> 
> 时间：2013-04-03T11:42:10.347
> 
> 标签：metadata, pandas

我大量使用 Pandas 数据框。并且需要在dataframe中附加一些数据，比如记录dataframe的诞生时间，dataframe的附加描述等。

我只是找不到数据框类的保留字段来保留数据。

所以我更改`core\frame.py`文件以添加一行`_reserved_slot = {}`来解决我的问题。我在这里发布问题只是想知道这样做可以吗？或者有没有更好的方法将元数据附加到数据框/列/行等？

```
#----------------------------------------------------------------------
# DataFrame class

class DataFrame(NDFrame):
    _auto_consolidate = True
    _verbose_info = True
    _het_axis = 1
    _col_klass = Series

    _AXIS_NUMBERS = {
        'index': 0,
        'columns': 1
    }

    _reserved_slot = {}  # Add by bigbug to keep extra data for dataframe

    _AXIS_NAMES = dict((v, k) for k, v in _AXIS_NUMBERS.iteritems()) 
```

**编辑：（为witingkuo的方式添加演示消息）**

```
>>> df = pd.DataFrame(np.random.randn(10,5), columns=list('ABCDEFGHIJKLMN')[0:5])
>>> df
        A       B       C       D       E
0  0.5890 -0.7683 -1.9752  0.7745  0.8019
1  1.1835  0.0873  0.3492  0.7749  1.1318
2  0.7476  0.4116  0.3427 -0.1355  1.8557
3  1.2738  0.7225 -0.8639 -0.7190 -0.2598
4 -0.3644 -0.4676  0.0837  0.1685  0.8199
5  0.4621 -0.2965  0.7061 -1.3920  0.6838
6 -0.4135 -0.4991  0.7277 -0.6099  1.8606
7 -1.0804 -0.3456  0.8979  0.3319 -1.1907
8 -0.3892  1.2319 -0.4735  0.8516  1.2431
9 -1.0527  0.9307  0.2740 -0.6909  0.4924
>>> df._test = 'hello'
>>> df2 = df.shift(1)
>>> print df2._test
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "D:\Python\lib\site-packages\pandas\core\frame.py", line 2051, in __getattr__
    (type(self).__name__, name))
AttributeError: 'DataFrame' object has no attribute '_test'
>>> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T12:49:52.893

目前不支持此功能。请参阅[https://github.com/pydata/pandas/issues/2485](https://github.com/pydata/pandas/issues/2485)。原因是这些属性的传播是不平凡的。您当然可以分配数据，但几乎所有 pandas 操作都会返回一个新对象，分配的数据将丢失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T11:51:12.000

你`_reserved_slot`将成为一个类变量。如果您想将不同的值分配给不同的`DataFrame`. 可能您可以直接将您想要的内容分配给实例。

```
In [6]: import pandas as pd

In [7]: df = pd.DataFrame()

In [8]: df._test = 'hello'

In [9]: df._test
Out[9]: 'hello' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-29T21:07:52.957

我认为一个不错的解决方法是将您的数据名放入字典中，并将您的元数据作为其他键。因此，如果您有一个带有现金流的数据框，例如：

```
df = pd.DataFrame({'Amount': [-20, 15, 25, 30, 100]},index=pd.date_range(start='1/1/2018', periods=5)) 
```

您可以使用其他元数据创建字典并将数据框放在那里

```
out = {'metadata': {'Name': 'Whatever', 'Account': 'Something else'}, 'df': df} 
```

然后将其用作`out[df]`

# ajax - 简单的 Perl 和 CGI ::Ajax 表单验证

> ID：15786398
> 
> 赞同：0
> 
> 时间：2013-04-03T11:42:15.653
> 
> 标签：ajax, perl, validation, cgi

我正在尝试做一个真正简单的设置。

1.使用 CGI::Ajax 对每个字段进行检查。2.验证所有字段都已用简单的perl CGI填写

问题是，当单独测试时，两者都可以工作，但是当结合起来时，如下面的代码所示，我有两个问题：

1.在用户名和密码字段中，我看到 CGI=HASH(0x228ed48) 等 2.当我按下提交按钮并出现错误（字段为空）时，它会打印内部服务器错误，我相信这是由于$ajx->build_html($cgi, \&form($error, $username, $password)); 并以这种方式调用表单函数。

有任何想法吗？提前致谢。

```
#!/usr/bin/perl -w

use CGI;
use CGI::Session qw/ -ip-match/;
use CGI::Ajax;

$cgi = new CGI;
#$session = new CGI::Session(undef, $cgi, {Directory=> '/tmp'});
my $ajx = new CGI::Ajax( 'checkuser' => \&checkuser );

#print $ajx->build_html( $cgi, \&form);

if($cgi->param("submit")) {

process(); } else { print $ajx->build_html( $cgi, \&form); }

sub checkuser 
{
my $input = shift;
my $out = $input . " is not taken";

return $out;
}

sub form {

my $error = shift;
my $username = shift;
my $password = shift;

my $html = <<HTML;
<html>
<BODY>
<form id='log' action='session.cgi' method='post' accept-charset='UTF-8'>
<input type="hidden" name="submit" value="Submit">
<fieldset>
<legend>Login</legend>
<font color="red">$error</font>
<label for='username' >UserName*:</label>
<input type='text' name='user' id='user' value="$username" 
maxlength="50" onchange="checkuser( ['user'], ['resultdiv'] );">
<br><br>
<div id="resultdiv"></div>
<label for='password' >Password*:</label>
<input type='password' name='pd' id='pd' value="$password" maxlength="50" />
<input type='submit' name='Submit' value='Submit' />
</fieldset>
</form>
</body></html>
HTML

return $html;

}

sub process 
{

   if(validate_form()) {
print $cgi->header;
   print <<HTML;
<body>Validated<br></body>

HTML
                        }

}

sub validate_form 
{

my $username = $cgi->param("user");
my $password = $cgi->param("pd");

my $error = "";

 $error .= "Please enter your username<br/>" if ( !$username );
    $error .= "Please specify your password<br/>" if ( !$password );

    if ( $error )
    {
 $ajx->build_html( $cgi, \&form($error, $username, $password));
        return 0;
    }
    else
    {

        return 1;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T13:09:02.683

为了发展，`use CGI::Carp qw/fatalsToBrowser/;`. 这将允许您查看代码产生的实际错误，而不是“内部服务器错误”。

**更新：**此外，您的代码失败是因为您误解了回调函数的工作原理。回调函数不是你调用的；它由您传递给它的代码调用——在本例中为模块。所以你不能提供参数，模块可以。这不起作用：

```
$ajx->build_html( $cgi, \&form($error, $username, $password)); 
```

`build_html`想要在内部调用你传入的函数，并使用它自己的参数。

在这里你不允许发生。相反，您在调用`form()`之前调用`build_html()`，然后传入对结果的标量引用。这稍后会失败，因为`build_html`尝试将该标量引用用作子例程引用。

解决方案：您只需要使用`\&form`. 您将需要另一种方式来填写这些字段。

还：

*   表单验证是一项非常常见的任务。成熟的 Perl 模块可用并广泛用于此目的（例如[`HTML::FormFu`](http://search.cpan.org/~cfranks/HTML-FormFu-0.09010/lib/HTML/FormFu.pm)和[`Data::Formvalidator`](http://search.cpan.org/~markstos/Data-FormValidator-4.80/)）。还有一些相关模块似乎添加了 Javascript 验证 ( [`HTML::FormFu::ExtJS`](https://metacpan.org/module/HTML%3a%3aFormFu%3a%3aExtJS), [`JavaScript::DataFormValidator`](http://search.cpan.org/~markstos/JavaScript-DataFormValidator-0.50/lib/JavaScript/DataFormValidator.pm))。在创建自己的之前，可能值得检查一下。
*   大多数现代 Perl Web 开发都是使用某种 Web 框架完成的。可用的框架非常强大，值得用于除了最简单的项目之外的所有项目。如果你的目标是学习，我建议尽早从框架开始，因为使用框架进行开发与传统的 CGI 开发有很大不同，并且存在学习曲线。我对[Catalyst](http://www.catalystframework.org/)非常满意，还有其他选择，例如[Mojolicious](http://mojolicio.us/)和[Dancer](http://www.perldancer.org/)。

# c# - 我想将 C# 表单应用程序中的图像保存到 SQL Server 数据库

> ID：15786399
> 
> 赞同：0
> 
> 时间：2013-04-03T11:42:19.130
> 
> 标签：c#, sql-server

我想将 C# 表单应用程序中的图像保存到 SQL Server 数据库，目前我正在这样做： 在名为 PhotoCL 的类库类中：

```
public void AddPhoto(int id, Image  photo)
    {
        db.ExecuteNonQuery("spAddPhoto", new object[] { id, photo});
    } 
```

“spAddPhoto”是存储过程，它有两个参数，`int`@id，@img`image` 在数据库中，照片表也有两列，它们的数据类型与上面 SP 中提到的相同。

这是我的 AddPhoto 按钮背后的代码：

```
private void button1_Click(object sender, EventArgs e)
    {
        mp.AddPhoto(Convert.ToInt32(comboBox1.SelectedValue),pictureBox1.Image);
    } 
```

我在运行时收到此错误（调试）：

> *“无法将参数值从位图转换为字节 []。”*

请帮帮我..提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:45:31.460

您不要将这样的图像插入数据库，您应该插入与图像对应的字节流。

[这篇文章](http://www.eggheadcafe.com/articles/20020929.asp)会有帮助吗？

# ios - 无控件播放视频

> ID：15786400
> 
> 赞同：1
> 
> 时间：2013-04-03T11:42:24.373
> 
> 标签：ios, objective-c, video, media-player

如何全屏播放视频，防止在触摸视频时出现控件（暂停、播放等）？相反，当触摸视频时，我想关闭它。这可以做到吗？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T13:03:53.723

```
MPMoviePlayerViewController *playerViewController=[[MPMoviePlayerViewController alloc]initWithContentURL:[NSURL fileURLWithPath:[[NSBundle mainBundle]pathForResource:@"xyz" ofType:@"mp4"]]];
    [self presentModalViewController:playerViewController animated:YES];
    MpMoviePlayerController *player = [playerViewController moviePlayer];
    player.controlStyle=MPMovieControlStyleNone;   //hide the controls 
    [player play]; 
```

# delphi - FLD 指令 x64 位

> ID：15786404
> 
> 赞同：5
> 
> 时间：2013-04-03T11:42:34.427
> 
> 标签：delphi, assembly, x86-64, fpu, basm

我对 x64 位的 FLD 指令有一点问题……想将 Double 值加载到 st0 寄存器中的堆栈指针 FPU，但这似乎是不可能的。在 Delphi x32 中，我可以使用以下代码：

```
function DoSomething(X:Double):Double;
asm

  FLD    X
   // Do Something ..
  FST Result

end; 
```

不幸的是，在 x64 中，相同的代码不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T14:04:20.683

Delphi 继承了[Microsoft x64 Calling Convention](https://docs.microsoft.com/en-gb/cpp/build/overview-of-x64-calling-conventions?view=vs-2017)。因此，如果函数/过程的参数是浮点/双精度，它们将在 XMM0L、XMM1L、XMM2L 和 XMM3L 寄存器中传递。

但是您可以使用`var`before 参数作为解决方法，例如：

```
function DoSomething(var X:Double):Double;
asm
  FLD  qword ptr [X]
  // Do Something ..
  FST Result
end; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T12:20:00.880

在 x64 模式下，浮点参数在 xmm 寄存器中传递。所以当 Delphi 试图编译 FLD X 时，它变成了 FLD xmm0 但没有这样的指令。您首先需要将其移动到内存中。

结果也是如此，应该在 xmm0 中传回。

试试这个（未测试）：

```
function DoSomething(X:Double):Double;
var
  Temp : double;
asm
  MOVQ qword ptr Temp,X
  FLD Temp
  //do something
  FST Temp
  MOVQ xmm0,qword ptr Temp
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-04T04:20:22.640

**您不需要在 x86-64 代码中使用旧版 x87 堆栈寄存器**，因为 SSE2 是基线，是 x86-64 ISA 的必需部分。 **您可以并且应该在 XMM 寄存器上使用[`addsd`](http://felixcloutier.com/x86/ADDSD.html)、`mulsd`等`sqrtsd`**进行标量 FP 数学运算。（或`addss`浮动）

Windows x64 调用约定在 XMM0..3 中传递浮点/双 FP 参数，如果它们是函数的前四个参数之一。（即，如果它是 FP，则第 3 个总 arg 进入 xmm2，而不是 xmm2 中的第 3 个*FP* arg。）它在 XMM0 中返回 FP 值。

只有在函数内部确实需要 80 位精度时才使用 x87。（类似`fsin`和`fyl2x`的指令并不快，通常可以通过使用 SSE/SSE2 指令的普通数学库来完成。

```
function times2(X:Double):Double;
asm
    addsd  xmm0, xmm0       // upper 8 bytes of XMM0 are ignored
    ret
end 
```

存储到内存并重新加载到 x87 寄存器会花费您大约 10 个延迟周期而没有任何好处。SSE/SSE2 标量指令与它们的 x87 等效指令一样快或更快，并且更易于编程和优化，因为您永远不需要`fxch`；它是一种平面寄存器设计，而不是基于堆栈的。（[https://agner.org/optimize/](https://agner.org/optimize/)）。此外，您有 15 个 XMM 寄存器。

* * *

当然，您通常根本不需要内联汇编。如果编译器不为您执行此操作，它可能对手动向量化很有用。

# webforms - Listview的LayoutTemplate中的Page.GetRouteUrl？

> ID：15786406
> 
> 赞同：0
> 
> 时间：2013-04-03T11:42:40.073
> 
> 标签：webforms, asp.net-4.0, asp.net-routing

我试图在列表视图中创建带有页眉、正文、页脚的表结构，效果很好。

但是在布局模板中的页脚中，我尝试添加下面给出错误的代码。

```
<LayoutTemplate>
                    <table class="sampletable" cellpadding="0" cellspacing="0">
                        <thead class="tableheader">
                            <tr>
                                <th>
                                    <a>Samples </a>
                                </th>
                            </tr>
                        </thead>
                        <tbody class="tablebody">
                            <tr id="itemplaceHolder" runat="server">
                            </tr>
                        </tbody>
                        <tfoot class="tablefooter">
                            <tr>
                                <td>
                                    <a href='<%:Page.GetRouteUrl("samplelist",null) %>'>more sample</a>
                                </td>
                            </tr>
                        </tfoot>
                    </table>
                   </LayoutTemplate> 
```

是不是不能放在layouttemplate中？

错误是

**“无法修改 Controls 集合，因为该控件包含代码块（即 <% ... %>）。”**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T23:32:49.427

使用“RouteUrlExpressionBuilder”。

```
<a href='<%$ RouteUrl:routename=namedroute %>' runat="server">Link</a> 
```

[在MSDN](http://msdn.microsoft.com/en-us/library/system.web.compilation.routeurlexpressionbuilder.aspx)中正确记录。

# java - 是否有任何理由将@NotNull 注释放在Java 实体类中的@Id 字段上

> ID：15786412
> 
> 赞同：6
> 
> 时间：2013-04-03T11:43:09.453
> 
> 标签：java, jpa, bean-validation

我在实体类中找到了代码：

```
@Id
@NotNull
@Column(name = "ID")
private Long id; 
```

**当@Id**已经设置时，@ NotNull注释是否有价值**？**

 *** * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T17:38:36.647

`@NotNull`用于验证目的，例如`@Size`. 它为验证引擎定义了检查用户输入是否正常的规则。围绕这些注解进行验证并不一定表明该对象也是 JPA 对象，但两者经常一起使用。

如果您使用 javax.validation 而不是依赖数据库级别的失败（违反约束）来指示空值，那么您应该使用这两个注释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T11:51:12.750

`@Id`习惯于

```
 * Specifies the primary key of an entity.
 * The field or property to which the <code>Id</code> annotation is applied
 * should be one of the following types: any Java primitive type;
 * any primitive wrapper type;
 * <code>String</code>;
 * <code>java.util.Date</code>;
 * <code>java.sql.Date</code>;
 * <code>java.math.BigDecimal</code>;
 * <code>java.math.BigInteger</code>. 
```

所以它不处理空值。为了防止空值`@NotNull`与`@Id`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T11:49:52.363

由于`id / primary key`是表中最重要的[字段](http://www.roseindia.net/hibernate/hibernate4/hibernate_id_annotation.shtml)，它`uniquely`标识表中的一行。

所以不应该`null`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T11:52:23.890

是的，这将使您的 id 字段不可为空，您必须强制执行。

但是，如果您希望 id 自动递增，则将其删除并添加

@GeneratedValue（策略=GenerationType.AUTO）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T11:49:08.793

我的理解是这是为了静态分析，与hibernate/orm无关。它是intellij特定的注释吗？

因此，在编译时，当您将 NULL 分配给已注释为 @NotNull 的字段时，您可能会收到警告。

并且任何依赖的代码都知道返回的值永远不会为空。**

# angularjs - 使用空元素参数调用 Angular 指令的链接函数

> ID：15786414
> 
> 赞同：2
> 
> 时间：2013-04-03T11:43:17.260
> 
> 标签：angularjs, angularjs-directive, ng-switch

我有一个场景，其中使用导致错误`link`的空参数调用指令的函数。`element`

一个代码示例最好地描述了该场景：

索引.html：

```
<html ng-app="app">
<body>
    <div outer></div>
</body>
</html> 
```

脚本：

```
var app = angular.module('app', []);

app.directive('outer', function() {
    return {
        replace: true,
        controller: function($scope) {
            $scope.show = true;
        },
        templateUrl: 'partial.html'
    };
});

app.directive('inner', function($window) {
    return {
        link: function(scope, element, attrs) {
            console.log('element: ' + element);
            var top = element[0].offsetTop;
        }
    };
}); 
```

`templateUrl`partial.html（上面的on引用`outer`）：

```
<div ng-switch on="show">
    <div ng-switch-when="true">
       <div inner>showing it</div>
    </div>
</div> 
```

在Chrome中加载index.html，控制台报错：“TypeError: Cannot read property 'offsetTop' of undefined”——因为`element`是空数组！

一些注意事项：

*   `replace`必须在指令上设置为 true `outer`。
*   `templateUrl`指令必须使用`outer`它来加载它的部分。

我不确定我是否忽略了一些配置要求，或者这是一个 Angular 问题。这是一个有效的场景吗？如果是，那么是 ng-switch 的问题还是 Angular 内部存在更深层次的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:43:07.380

尝试

```
app.directive('inner', function($window) {
    return {
        link: function(scope, element, attrs) {
            console.log('element: ',  element);
            if(!element.length){
              console.log('Returning since there is no element');
              return;
            }
           var top = element[0].offsetTop;
           console.log('top', top)
        }
    };
}); 
```

# android - 无法在现有代码中声明动态按钮

> ID：15786416
> 
> 赞同：-1
> 
> 时间：2013-04-03T11:43:19.477
> 
> 标签：android

当我在下面的类中声明一个 gridview 时，我得到了一系列错误。

```
class LoadAllProducts extends Activity //get call on dynamic btn action 
{
    public void onCreate() {
        System.out.println("I have enterd in external class");
        // ***GridView gridView3 = (GridView) findViewById(R.id.gridview3);***//cant declare getting error  
        ArrayList mButtons3 = new ArrayList(); //to print button dynamically on gridview 
        Button cb3; //=new Button(this); if do so getting error 
        JSONObject json2 = null;
        json2 = jParser.makeHttpRequest(url_all_products, "GET", params);

        //  System.out.println("success to get json object for all products/t"+json2);// getting data from php an mysql database   

        JSONArray products2 = null;
        String[] Itemname = null;
        String[] rcatacode = null;
        try {
            int success2 = json2.getInt(TAG_ALLPRODUCT_SUCCESS);
            products2 = json2.getJSONArray(TAG_ALLPRODUCT_PRODUCTS);

            Itemname = new String[products2.length()];
            rcatacode = new String[products2.length()];
            if (success2 == 1) {
                cb3 = new Button(this);
                for (int i = 0; i < products2.length(); i++) {
                    JSONObject c = products2.getJSONObject(i);
                    // Storing each json item in variable 
                    String itemcode = c.getString(TAG_ALLPRODUCT_MCODE); //to store data from database 
                    String itemname = c.getString(TAG_ALLPRODUCT_ITEM_NAME);
                    String item_rate = c.getString(TAG_ALLPRODUCT_RATE);
                    String r_cata = c.getString(TAG_ALLPRODUCT_RCATA);
                    Itemname[i] = itemname;
                    rcatacode[i] = r_cata;

                }
            }
        } // try closed 
        catch (JSONException e) {
            e.printStackTrace();
        }

        for (int i = 0; i < 20; i++) {
            // Button b=new Button(this); //getting error on here also 

            System.out.println(Itemname[i]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:47:57.423

我什至不知道从哪里开始...

1.  您扩展`Activity`但您`onCreate()`缺少`Bundle`参数
2.  你不打电话`super.onCreate()`
3.  `ArrayList mButtons3 = new ArrayList();`不管用。`ArrayList`需要一个类型，比如`ArrayList<Button> mButtons3 = new ArrayList<Button>();`
4.  你从不打电话`setContentView()`意味着你的活动永远不会显示什么

这只是第一行代码……您确定您了解 Android 开发的基础知识吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:50:46.987

除非您调用定义此 Activity 将创建的布局的 setContentView，否则您不能调用 findViewById。想一想，你从哪里拿起gridview？哪种布局？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-29T04:36:05.653

问题已通过在块外声明动态按钮来解决`try-catch`... Button, `TextView`, `EditText`.. etc 的声明不能在 中完成`try-catch`，`instance.setOnclickLisner(new Onclick..){}`而是可以通过调用任务函数来完成

# iphone - 绘制油漆后添加橡皮擦工具

> ID：15786417
> 
> 赞同：-1
> 
> 时间：2013-04-03T11:43:23.173
> 
> 标签：iphone, canvas, uiview, core-graphics, paint

我有油漆应用程序。当我单击按钮时，它会启动绘画视图，而不是用户可以绘画。在我回来然后单击按钮后，paintview 将不会重置。绘制疼痛后如何在按钮单击中重置视图。

代码：

```
- (BOOL) initContext:(CGSize)size {

    int bitmapByteCount;
    int bitmapBytesPerRow;

    // Declare the number of bytes per row. Each pixel in the bitmap in this
    // example is represented by 4 bytes; 8 bits each of red, green, blue, and
    // alpha.
    bitmapBytesPerRow = (size.width * 4);
    bitmapByteCount = (bitmapBytesPerRow * size.height);

    // Allocate memory for image data. This is the destination in memory
    // where any drawing to the bitmap context will be rendered.
    cacheBitmap = malloc( bitmapByteCount );
    if (cacheBitmap == NULL){
        return NO;
    }
    cacheContext = CGBitmapContextCreate (cacheBitmap, size.width, size.height, 8, bitmapBytesPerRow, CGColorSpaceCreateDeviceRGB(), kCGImageAlphaNoneSkipFirst);
    return YES;
}

- (void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    [self drawToCache:touch];
    [self setNeedsDisplay];
}

- (void) drawToCache:(UITouch*)touch {
    hue += 0.005;
    if(hue > 1.0) hue = 0.0;
    UIColor *color = [UIColor colorWithHue:hue saturation:0.7 brightness:1.0 alpha:1.0];

    CGContextSetStrokeColorWithColor(cacheContext, [color CGColor]);
    CGContextSetLineCap(cacheContext, kCGLineCapRound);
    CGContextSetLineWidth(cacheContext, 15);

    CGPoint lastPoint = [touch previousLocationInView:self];
    CGPoint newPoint = [touch locationInView:self];

    CGContextMoveToPoint(cacheContext, lastPoint.x, lastPoint.y);
    CGContextAddLineToPoint(cacheContext, newPoint.x, newPoint.y);
    CGContextStrokePath(cacheContext);

    CGRect dirtyPoint1 = CGRectMake(lastPoint.x-10, lastPoint.y-10, 20, 20);
    CGRect dirtyPoint2 = CGRectMake(newPoint.x-10, newPoint.y-10, 20, 20);
    [self setNeedsDisplayInRect:CGRectUnion(dirtyPoint1, dirtyPoint2)];
}

// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    // Drawing code

    CGContextRef context = UIGraphicsGetCurrentContext();
    CGImageRef cacheImage = CGBitmapContextCreateImage(cacheContext);
    CGContextDrawImage(context, self.bounds, cacheImage);
    CGImageRelease(cacheImage);

} 
```

在视图控制器代码中：

```
 PaintView *paint = [[PaintView alloc] initWithFrame:self.view.bounds];
    [self.view addSubview:paint];
    [paint release]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:55:40.277

在触摸移动时，为橡皮擦做一个切换，并按如下方式更改代码。

```
if(togleEraser == NO)
{
    CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 2.0);

    CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 0.0, 0.0, 0.0, 1.0);

    CGContextBeginPath(UIGraphicsGetCurrentContext());

    CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);

    CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x,         currentPoint.y);
}
else
{
    CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 20);

    CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 1, 0, 0, 10);

    CGContextBeginPath(UIGraphicsGetCurrentContext());

    CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);

    CGContextClearRect (UIGraphicsGetCurrentContext(), CGRectMake(lastPoint.x, lastPoint.y, 50, 50));
} 
```

# python - HTTP 错误 504：尝试阅读 reddit 评论帖子时网关超时

> ID：15786421
> 
> 赞同：5
> 
> 时间：2013-04-03T11:43:37.820
> 
> 标签：python, web-scraping, urllib2, reddit, http-status-code-504

尝试从 reddit 获取评论的 http 时遇到错误。这发生在各种 URL 上（并非所有 URL 都带有特殊字符），这就是其中之一。在一小时的时间范围内，可能有 1000 个或更多对 reddit.com 域的请求。

```
hdr = {"User-Agent": "My Agent"}
try:
     req = urllib2.Request("http://www.reddit.com/r/gaming/"
           "comments/1bjuee/when_pokΓ©mon_was_good", headers=hdr)
     htmlSource = urllib2.urlopen(req).read()
except Exception as inst:
     print inst

Output>>HTTP Error 504: Gateway Time-out 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T19:13:37.450

[HTTP 错误 504 网关超时](http://www.checkupdown.com/status/E504.html)- 服务器（不一定是 Web 服务器）充当网关或代理来满足客户端（例如您的 Web 浏览器或我们的 CheckUpDown 机器人）访问请求的 URL 的请求。此服务器没有从它访问以处理您的 HTTP 请求的上游服务器收到及时响应。

这通常意味着上游服务器已关闭（对网关/代理没有响应），而不是上游服务器和网关/代理不同意交换数据的协议。

问题可能出现在网络上的不同地方，并且没有“唯一”的解决方案。您将不得不自己调查问题。

您的代码工作正常。您问题的可能解决方案是：

```
import urllib2
hdr = {"User-Agent": "My Agent"}

while True:
    try:
        req = urllib2.Request("http://www.reddit.com/", headers=hdr)
        response = urllib2.urlopen(req)
        htmlSource = response.read()
        if response.getcode() == 200:
            break
    except Exception as inst:
        print inst 
```

此代码将尝试请求网页，直到获得 200 响应（成功 HTTP 请求的标准响应）。当 200 响应将发生而循环将中断时，您可以执行下一个请求（或您程序中的任何内容）

# jquery - 如何在列表项中搜索匹配项？

> ID：15786424
> 
> 赞同：0
> 
> 时间：2013-04-03T11:43:46.960
> 
> 标签：jquery, html

我有以下问题：

我有**添加**按钮，它正在添加类似标签的东西，我想检查标签是否已经添加。这是我的尝试......但没有成功

```
 if ($(".selected_tags li span").find($("#tagname").val())) {
    alert("Tag already exists!");
    } 
```

我想我没有正确使用 find 功能......

提前致谢，

Z。

编辑：当我查看答案时，我发现您误解了我。那是我的错！所以这里有更多细节：我有一个输入字段和添加按钮。用户在字段内键入标签名称，当他按下添加按钮时，我需要检查他是否已经在带有标签名称的列表中添加了具有该名称的标签。

这是HTML结构：

```
<div class="new_article_add_tags_wrap">
            <input type="search" class="search_new_article_tags" id="tagname"/>
            <button class="add_new_article_tag_btn" id="add_tagname"><span>Add</span></button>
        </div>
        <div class="new_article_selected_tags_container">
            <ul class="selected_tags">
                <li>
                    <span>Algorithm</span>
                </li>
                <li>
                    <span>Graph Theory</span>
                </li>
            </ul>
        </div> 
```

所以每次当用户按下添加按钮时，我需要通过所有跨度执行简单的搜索，以检查标签是否已经存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:45:24.797

鉴于您不能拥有多个具有特定 id 的元素，如果您正在寻找具有 id 的元素`tagname`，您应该简单地测试

```
if ($("#tagname").length) {
    alert("Tag already exists!");
} 
```

如果您要搜索的是标签，而不是 id，请使用

```
if ($(".selected_tags li span tagname").length) {
    alert("Tag already exists!");
} 
```

如果要查找由 id 为 的输入的值给出的标记`tagname`，作为`".selected_tags li span"`元素的后代，请像这样使用 lenght

```
if ($($('#tagname').val(), ".selected_tags li span").length) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T11:45:28.173

试`length()`...

```
if ($(".selected_tags li span").find($("#tagname").val()).length > 0) {
  alert("Tag already exists!");
} 
```

不使用 find()

```
if ($(".selected_tags li span tagname").length > 0) {
  alert("Tag already exists!");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T11:46:57.817

你有一些错误，应该是：

```
if ($(".selected_tags li span").find("#tagname").length) {
    alert("Tag already exists!");
} 
```

# netbeans - 将 glassfish 2.x 服务器添加到 netbeans ide

> ID：15786425
> 
> 赞同：1
> 
> 时间：2013-04-03T11:43:47.193
> 
> 标签：netbeans, glassfish

我正在尝试将 glassfish v2.1.1 服务器添加到我的 netbeans 服务器，安装 glassfish 2.x 插件后，选择我的 glassfish 2.1 位置，显示下一个错误：

```
Run setup.xml or setup-cluster.xml before attempting to register 
```

有任何想法吗？提前致谢。

![在此处输入图像描述](https://i.stack.imgur.com/9tGbe.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:56:31.563

您必须按照此处描述的步骤操作：http: [//glassfish.java.net/downloads/v2ur2-b04.html](http://glassfish.java.net/downloads/v2ur2-b04.html)。特别是这一步： `% lib\ant\bin\ant -f setup.xml`

希望能帮助到你，

# jquery - 获取选定选项的值

> ID：15786437
> 
> 赞同：0
> 
> 时间：2013-04-03T11:44:16.090
> 
> 标签：jquery, forms, yui

我搜索了我的 *ss ，但无法在线找到答案或自己编写正确的代码。我确实设法让它在 jQuery 中工作，但我需要让它与 YUI 2.7 一起滚动。

我想做什么？获取下拉菜单的选定值并将其写入另一个表单字段。

这适用于 jQuery：

```
function displayVals() {
 var subjectValue = $("select").val();
 var subjectName = $("select option[value='"+subjectValue+"']").text()
// set the value of another form field  
$("#TextInput_subject").val("Technische ondersteuning > " + subjectName);
}

$("#SelectionInput_reason").change(displayVals);
displayVals();

// the select menu we are trying to get the selection from..
<select id="SelectionInput_reason">
<option value="">--</option>
<option value="27" name="Televisie" >Televisie</option>
<option value="28" name="Internet" >Internet</option>
<option value="29" name="Mobiel Internet" >Mobiel Internet</option>
<option value="30" name="Telefonie" >Telefonie</option>
<option value="47" name="Horizon" >Horizon</option>
<option value="48" name="Online TV" >Online TV</option>
</select> 
```

这就是我在 YUI 中得到的结果，我只得到了所选选项的 ID：

```
getValue = function(e) {
var selectedValue = this.value;
alert(selectedValue); 
} 

YAHOO.util.Event.addListener("SelectionInput_reason", "change", getValue); 
```

我真的无法再进一步了，这真的很令人沮丧！希望有人能指出我正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:17:41.957

查看元素`.options`的`.selectedIndex`属性。`<select>`

```
getValue = function() {
    var selectedValue = this.value;
    var selectedText = this.options[this.selectedIndex].getAttribute('value');
    alert(selectedValue); 
    alert(selectedText); 
} 
```

测试：http: [//jsfiddle.net/smHRg/](http://jsfiddle.net/smHRg/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:01:35.317

你能试试看看这是否有帮助......

```
var selectedValue = this.get('value'); 
```

# javascript - 进度条在 html 文件中不起作用

> ID：15786446
> 
> 赞同：0
> 
> 时间：2013-04-03T11:44:57.393
> 
> 标签：javascript, html, progress-bar

我正在创建一个进度条它在 jsfiddle 演示中工作正常但是当我在 html 文件中使用时它在这里不起作用是我的代码我正在编写与 jsfiddle 中给出的相同代码但它不起作用

```
 <html>
 <head>
 <style>
  .ui-progressbar.beginning .ui-progressbar-value { background: red; }
  .ui-progressbar.middle .ui-progressbar-value { background: yellow; }
  .ui-progressbar.end .ui-progressbar-value { background: green; }
 </style>
 <script src="http://code.jquery.com/jquery-1.9.1.js"></script>

 </head>

 <script>
  var $progressbar = $("div").progressbar();

  function updateProgressbar(current, target) {

   var value = parseInt(current / target * 100);

   $progressbar

   .progressbar("value", value)

   .removeClass("beginning middle end")

    .addClass(value < 40 ? "beginning" : value < 80 ? "middle" : "end");
  }

  var total = 255;

   var working = 0;

 function update() {

   working++;
 updateProgressbar(working, total);
if (working < total) setTimeout(update, 10);

   }
var $progressbar = $("div").progressbar();

function updateProgressbar(current, target) {

var value = parseInt(current / target * 100);

$progressbar

    .progressbar("value", value)

    .removeClass("beginning middle end")

    .addClass(value < 40 ? "beginning" : value < 80 ? "middle" : "end");

   }

   var total = 255;

  var working = 0;

  function update() {

   working++;

updateProgressbar(working, total);

if (working < total) setTimeout(update, 10);

  }

  </script>
  </head>

<body onload="update()">

<div>

</div></body></html> 
```

这是js小提琴链接工作

[http://jsfiddle.net/ZQrnC/305/](http://jsfiddle.net/ZQrnC/305/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:51:01.353

查看“外部资源”下方的 jsfiddle 左侧边栏。您正在为您嵌入 jQuery UI css 和 js `progressbar()`，但是您的 html 文件 jQuery UI 丢失了。

`jquery-1.9.1.js`在您的-script-tag之后添加以下内容：

```
<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css"/>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:09:00.417

它不起作用的原因有以下三个：

*   正如 robbi5 所说，您不导入 jquery ui JS 和 CSS 文件
*   当页面尚未加载时，您的 var $progressbar 在标题中初始化，因此找不到 div。换句话说，$progressbar 什么都没有
*   您的进度条的高度为零，使其不可见，您应该将他包装为具有固定高度的容器 div

您的代码也包含重复的部分，但可能是由于复制/粘贴错误。

这是您的页面的更新工作版本，其中包含更正点。我只在 chrome 和 firefox 上快速检查过，它可以工作。

```
<html>
 <head>
 <style>
  .ui-progressbar.beginning .ui-progressbar-value { background: red; }
  .ui-progressbar.middle .ui-progressbar-value { background: yellow; }
  .ui-progressbar.end .ui-progressbar-value { background: green; }
 </style>

 <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet">

     <script src="http://code.jquery.com/jquery-1.9.1.js" type="text/javascript"></script>
     <script src=" http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js" type="text/javascript"></script>

 </head>

 <script>

  var $progressbar;

  function updateProgressbar(current, target) {
       var value = parseInt(current / target * 100);

        $progressbar.progressbar("value", value).removeClass("beginning middle end")
        .addClass(value < 40 ? "beginning" : value < 80 ? "middle" : "end");
  }

  var total = 255;
  var working = 0;

 function update() {
   $progressbar = $("#pbholder").progressbar();
   working++;
   updateProgressbar(working, total);
   if (working < total) setTimeout(update, 10);
  }

  </script>
  </head>

<body onload="update()">

<div id="container" style="height:50px">
    <div id="pbholder"> 
    </div>
</div>

</body></html> 
```

# wcf - WCF REST 服务：方法参数（对象）为空

> ID：15786448
> 
> 赞同：3
> 
> 时间：2013-04-03T11:44:59.960
> 
> 标签：wcf, rest, webclient

为什么我的 WCF Rest 服务方法的参数始终为空？....我确实访问了服务的方法，并且确实获得了 wcf 方法返回的字符串，但参数仍然为空。

运营合同：

```
 [OperationContract]
    [WebInvoke(UriTemplate = "AddNewLocation",
        Method="POST",
        BodyStyle = WebMessageBodyStyle.WrappedRequest,
        ResponseFormat = WebMessageFormat.Json,
        RequestFormat = WebMessageFormat.Json)]
    string AddNewLocation(NearByAttractions newLocation); 
```

AddNewLocation 方法的实现

```
 public string AddNewLocation(NearByAttractions newLocation)
    {
        if (newLocation == null)
        {
            //I'm always getting this text in my logfile
            Log.Write("In add new location:- Is Null");
        }
        else
        {
            Log.Write("In add new location:- " );
        }

        //String is returned even though parameter is null
        return "59";
    } 
```

客户端代码：

```
 WebClient clientNewLocation = new WebClient();
        clientNewLocation.Headers[HttpRequestHeader.ContentType] = "application/json";

        JavaScriptSerializer js = new JavaScriptSerializer();
        js.MaxJsonLength = Int32.MaxValue;

        //Serialising location object to JSON
        string serialLocation = js.Serialize(newLocation);

        //uploading JSOn string and retrieve location's ID
        string jsonLocationID = clientNewLocation.UploadString(GetURL() + "AddNewLocation", serialLocation); 
```

我也在我的客户端尝试了这段代码，但仍然得到一个空参数

```
 DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(NearByAttractions));

        MemoryStream ms = new MemoryStream();
        ser.WriteObject(ms, newLocation);

        String json = Encoding.UTF8.GetString(ms.ToArray());

        WebClient clientNewLocation = new WebClient();
        clientNewLocation.Headers[HttpRequestHeader.ContentType] = "application/json";

        string r = clientNewLocation.UploadString(GetURL() + "AddNewLocation", json);

        Console.Write(r); 
```

然后我还将**BodyStyle**选项更改为“ **Bare** ”，但随后出现以下错误（使用两个客户端代码）：

> 远程服务器返回错误：(400) 错误请求。

请问有什么帮助吗？谢谢

**编辑 1：** 我的 GetUrl() 方法从 Web 配置文件加载 Web 服务 IP 地址并返回 Uri 类型的对象

```
private static Uri GetURL()
    {
        Configuration config = WebConfigurationManager.OpenWebConfiguration("~/web.config");

        string sURL = config.AppSettings.Settings["serviceURL"].Value;
        Uri url = null;

        try
        {
            url = new Uri(sURL);
        }
        catch (UriFormatException ufe)
        {
            Log.Write(ufe.Message);
        }
        catch (ArgumentNullException ane)
        {
            Log.Write(ane.Message);
        }
        catch (Exception ex)
        {
            Log.Write(ex.Message);
        }

        return url;
    } 
```

web config中存储的服务地址如下：

```
<appSettings>
    <add key="serviceURL" value="http://192.168.2.123:55666/TTWebService.svc/"/>
  </appSettings> 
```

这就是我的 NearByAttraction 类的定义

```
 [DataContractAttribute]
public class NearByAttractions
{

    [DataMemberAttribute(Name = "ID")]
    private int _ID;
    public int ID
    {
        get { return _ID; }
        set { _ID = value; }
    }

    [DataMemberAttribute(Name = "Latitude")]
    private string _Latitude;
    public string Latitude
    {
        get { return _Latitude; }
        set { _Latitude = value; }
    }

     [DataMemberAttribute(Name = "Longitude")]
    private string _Longitude;
    public string Longitude
    {
        get { return _Longitude; }
        set { _Longitude = value; }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T16:17:35.130

你似乎在正确的轨道上。您需要`Bare`正文样式，否则您需要将输入的序列化版本包装在另一个 JSON 对象中。第二个代码应该可以工作——但没有更多关于如何设置服务和`GetURL()`返回什么的信息，我们只能猜测。

找出要发送到 WCF REST 服务的内容的一种方法是为此使用 WCF 客户端本身 - 使用`WebChannelFactory<T>`该类，然后使用诸如 Fiddler 之类的工具来查看它正在发送什么。下面的示例是一个[SSCCE](http://www.sscce.org/)，它显示了您的场景正在运行。

```
public class StackOverflow_15786448
{
    [ServiceContract]
    public interface ITest
    {
        [OperationContract]
        [WebInvoke(UriTemplate = "AddNewLocation",
            Method = "POST",
            BodyStyle = WebMessageBodyStyle.Bare,
            ResponseFormat = WebMessageFormat.Json,
            RequestFormat = WebMessageFormat.Json)]
        string AddNewLocation(NearByAttractions newLocation);
    }
    public class NearByAttractions
    {
        public double Lat { get; set; }
        public double Lng { get; set; }
        public string Name { get; set; }
    }
    public class Service : ITest
    {
        public string AddNewLocation(NearByAttractions newLocation)
        {
            if (newLocation == null)
            {
                //I'm always getting this text in my logfile
                Console.WriteLine("In add new location:- Is Null");
            }
            else
            {
                Console.WriteLine("In add new location:- ");
            }

            //String is returned even though parameter is null
            return "59";
        }
    }
    public static void Test()
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        WebServiceHost host = new WebServiceHost(typeof(Service), new Uri(baseAddress));
        host.Open();
        Console.WriteLine("Host opened");

        Console.WriteLine("Using WCF-based client (WebChannelFactory)");
        var factory = new WebChannelFactory<ITest>(new Uri(baseAddress));
        var proxy = factory.CreateChannel();
        var newLocation = new NearByAttractions { Lat = 12, Lng = -34, Name = "56" };
        Console.WriteLine(proxy.AddNewLocation(newLocation));

        Console.WriteLine();
        Console.WriteLine("Now with WebClient");

        DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(NearByAttractions));
        MemoryStream ms = new MemoryStream();
        ser.WriteObject(ms, newLocation);

        String json = Encoding.UTF8.GetString(ms.ToArray());

        WebClient clientNewLocation = new WebClient();
        clientNewLocation.Headers[HttpRequestHeader.ContentType] = "application/json";

        string r = clientNewLocation.UploadString(baseAddress + "/AddNewLocation", json);

        Console.WriteLine(r);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T12:26:41.980

解决了，谢谢

我将 BodyStyle 更改为**“Bare”**所以我的服务界面如下：

```
 [OperationContract]
    [WebInvoke(UriTemplate = "AddNewLocation",
        Method="POST",
        BodyStyle = WebMessageBodyStyle.Bare,
        ResponseFormat = WebMessageFormat.Json,
        RequestFormat = WebMessageFormat.Json)]
    string AddNewLocation(NearByAttractions newLocation); 
```

然后实现我的客户端如下：

```
MemoryStream ms = new MemoryStream();

        DataContractJsonSerializer serialToUpload = new DataContractJsonSerializer(typeof(NearByAttractions));
        serialToUpload.WriteObject(ms, newLocation);

        WebClient client = new WebClient();
        client.Headers.Add(HttpRequestHeader.ContentType, "application/json");

        client.UploadData(GetURL() + "AddNewLocation", "POST", ms.ToArray()); 
```

我使用 WebClient.UploadData 而不是 UploadString。

# javascript - Mootools 颜色即时变形

> ID：15786453
> 
> 赞同：2
> 
> 时间：2013-04-03T11:45:20.813
> 
> 标签：javascript, mootools

我正在寻找的是一种快速改变颜色的方法——（不是按事件/时间）。如果有像 morphColors(color1,color2,percent) 这样的函数会很好 - percent 应该给出一个小数值，表示变形应该进行多少。

也许还有一种Javascript方式？

提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:03:16.593

您可以使用 Fx 类来做事，但它不是基于 % 的。

mootools 还有一个官方插件：[http](http://mootools.net/docs/more/Utilities/Color) : //mootools.net/docs/more/Utilities/Color - 见 .mix()

在这里阅读 lessc 的源代码 - [https://github.com/cloudhead/less.js/blob/master/lib/less/functions.js#L159-L177](https://github.com/cloudhead/less.js/blob/master/lib/less/functions.js#L159-L177) - 将 2 种颜色与重量混合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:27:50.977

我自己找到了解决方案

我在这里分享结果：

```
if(percent<0) percent=0.0;
else if(percent>1) percent=1.0;
var r = Math.round(color1[0]*(1.0-percent) + color2[0]*percent);
var g = Math.round(color1[1]*(1.0-percent) + color2[1]*percent);
var b = Math.round(color1[2]*(1.0-percent) + color2[2]*percent);
return [r, g, b]; 
```

# mongodb - Mongo 哈希表命名空间索引最大链错误

> ID：15786462
> 
> 赞同：0
> 
> 时间：2013-04-03T11:45:37.537
> 
> 标签：mongodb, runtime-error

当我在单个实例 mongodb 中插入太多文档时出现此错误：

```
11:53:00.379 [conn1378573] error: hashtable namespace index max chain reached:1335",
"Wed Apr  3 11:53:00.379 [conn1378573] error: hashtable namespace index max chain reached:1335",
"Wed Apr  3 11:53:00.379 [conn1378573] error: hashtable namespace index max chain reached:1335",
"Wed Apr  3 11:53:00.379 [conn1378573] error: hashtable namespace index max chain reached:1335",
"Wed Apr  3 11:53:00.379 [conn1378573] end connection 127.0.0.1:40748 (1 connection now open)", 
```

这个错误是什么意思，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:39:03.003

您正在使用多少个集合？我建议看看[这个](http://docs.mongodb.org/manual/core/data-modeling/#data-model-large-number-of-collections)

# c - 输出作为参数或使用返回值

> ID：15786466
> 
> 赞同：0
> 
> 时间：2013-04-03T11:45:44.700
> 
> 标签：c

在函数中，最好使用返回值还是输出参数？一种方式优于另一种方式吗？在 C.

vec_t 是一个结构（typedef）：

```
typedef struct {
    float   x, y, z;
} vec_t; 
```

.

```
void multiply_vectors(vec_t* v1, vec_t* v2, vec_t* out) {
    ...
}

vec_t result;
multiply_vectors(&first, &second, &result); 
```

或者

```
vec_t multiply_vectors(vec_t* v1, vec_t* v2) {
    vec_t v;
    ...
    return v;
}

vec_t result = multiply_vectors(&first, &second); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T11:47:42.643

*这主要取决于*个人喜好。我通常使用实际的返回值，如果有需要乘以返回值的情况，我可以使用 out 参数，或者如果有意义，创建一个包含所有返回值的结构，我可以正常返回。

我发现 args 令人困惑，尤其是因为您涉及指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:03:08.987

没有一个正确的答案。您首先考虑的应该是对该特定操作*有意义的内容。*在您的示例中，将新向量作为返回值而不是输出参数返回*是有意义*的，因为它是一种数学运算。但是，当您查看类似的库函数时`scanf`，它们使用输出参数作为值并返回“状态”值。同样，对于`scanf`通常的使用方式，这*是有道理的*。

但是，可能还有其他考虑因素。请注意，您在函数体中创建了一个“临时”向量，它占用了堆栈空间，当函数返回时，该向量的内容必须复制到您的目标。在这种情况下，不必担心，但如果您正在处理*非常大*的项目，则*可能*会对性能产生负面影响。在这种情况下，您最好使用输出参数并将指针传递给目标。

当您处理构造函数和析构函数时，C++ 中的问题会更糟一些，并且一个简单的返回最终会在后台执行大量代码。再次，从*有意义*的开始，但如果您发现自己遇到性能问题，您可能不得不使用另一种方法。

# macos - Qt 在 MacOS 上创建 dylib 而不是 bundle 忽略标志

> ID：15786473
> 
> 赞同：0
> 
> 时间：2013-04-03T11:45:52.583
> 
> 标签：macos, qt, bundle

我一直坚持使用 Qt，它是强制捆绑编译而不是 Mac 上的 dylib 的标志。我找到并阅读了下一篇文章：http: [//qt-project.org/forums/viewthread/1119，MacOSX](http://qt-project.org/forums/viewthread/1119)上的[Qt Creator 或 qmake 构建库为“.so”而不是 dylib](https://stackoverflow.com/questions/12977739/qt-creator-or-qmake-on-macosx-build-library-as-so-not-dylib)，但是，我仍然无法让事情正常工作.

我有以下.pro：

```
macx {
    TEMPLATE = lib
    CONFIG += plugin
    QMAKE_LFLAGS_PLUGIN -= -dynamiclib
    QMAKE_LFLAGS_PLUGIN += -bundle
    QMAKE_EXTENSION_SHLIB = bundle

    # Sources, headers etc.
} 
```

它根本不起作用。无论我推动什么选项 - 它仍然是 dylib。`CONFIG += lib_bundle`产生框架，这对我再次不起作用......

我想我错过了一些简单的东西，但到目前为止，我已经花了几个小时试图找出问题所在，但没有成功。

我很感激这方面的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-17T12:34:30.053

以后的 Qt 版本可能不需要太多的调整，但这适用于 Qt 4.8.1：

```
TEMPLATE = lib

macx {
    CONFIG += lib_bundle
    QMAKE_LFLAGS += -bundle
    QMAKE_LFLAGS_SHLIB -= -dynamiclib
    QMAKE_LFLAGS_VERSION = ""
    QMAKE_LFLAGS_COMPAT_VERSION = ""
    QMAKE_LFLAGS_SONAME = ""
} 
```

# java - RegEx - 匹配父标签中的多个标签对

> ID：15786476
> 
> 赞同：-1
> 
> 时间：2013-04-03T11:46:03.703
> 
> 标签：java, regex, tags

我正在尝试在 Java 中使用正则表达式来匹配`<b><number></b>`包含在一`<a><\a>`对中的所有表单字符串。

eg应该与and`<a> kljsdlk <b>123</b> df <b>345</b> sdfklj</a>`匹配两次，而应该不会产生任何结果（因为没有 wrapping ）。`<b>123</b>``<b>345</b>``<v> kljsdlk <b>123</b> df <b>345</b> sdfklj</v>``<a></a>`

以下代码是我目前最好的结果：

```
 Pattern MY_PATTERN = Pattern.compile("(<a>.*(<b>[0-9]*<\\\\b>)?.*<\\\\a>)");

    Matcher m = MY_PATTERN.matcher("<a> skdjlkasjflkj <b>200<\\b> sldfhjhfj d lkj b <b>300<\\b> fhih 9 09 <\\a>");
    while (m.find()) {
        for (int i=0; i< m.groupCount() ;i++){
            String s = m.group(i);
            System.out.println(s);
        }
    } 
```

此代码结果为：

```
<a> skdjlkasjflkj <b>200<\b> sldfhjhfj d lkj b <b>300<\b> fhih 9 09 <\a>
<a> skdjlkasjflkj <b>200<\b> sldfhjhfj d lkj b <b>300<\b> fhih 9 09 <\a> 
```

我希望它导致：

```
<b>200<\b>
<b>300<\b> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:05:28.063

为什么不先匹配`<a>.*</a>`，然后寻找`<b>[0-9]*</b>?`

```
 Pattern p1 = Pattern.compile("(<a>.*</a>)");
    Pattern p2 = Pattern.compile("<b>\\d*</b>");
    Matcher m1 = m1 = p1.matcher("<a> kljsdlk <b>123</b> df <b>345</b> sdfklj</a>");
    if (m1.find()) {
      Matcher m2 = p2.matcher(m1.group());
      while (m2.find()) {
        System.out.println(m2.group());
      }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T11:49:34.963

问题是您已经匹配了模式中的整个字符串。您应该只为内部标签创建一个模式。这将提供正确的匹配字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T12:04:32.443

如果 Java 支持任意长度的lookbehinds，那么您*也许*可以做到这一点。没有它，这仅在正则表达式中是不可能的。此外，由于它是 HTML/XML，因此专用于此类的库使用起来会更直观。

# c# - 从 C#-Application 访问 Citrix 用户信息

> ID：15786479
> 
> 赞同：1
> 
> 时间：2013-04-03T11:46:12.837
> 
> 标签：c#, active-directory, citrix

客户希望在登录时在 winform 中显示用户信息（例如密码过期的时间）。这些是 Active Directory 用户

因为我对 Citrix 完全陌生：

1.  我可以像这里一样访问活动目录吗：http: [//www.codeproject.com/Articles/18102/Howto-Almost-Everything-In-Active-Directory-via-C](http://www.codeproject.com/Articles/18102/Howto-Almost-Everything-In-Active-Directory-via-C) 还是仅适用于 Windows 用户但不适用于 Citrix
2.  我必须在每个客户端上发布该应用程序还是只在服务器上部署？
3.  在该环境中保存设置的最佳方法是什么？我可以使用注册表吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T00:18:40.370

是的，标准的 AD 东西在 Citrix 环境中运行良好。出于所有意图和目的，您可以认为 Citrix 对服务器的使用与正常的“Windows”使用相同。尽管 Citrix 提供了自己的自定义管理和代理层，但一旦用户连接到 Windows 会话，它基本上是相同的。

对于部署，您的应用程序需要安装在每台 Citrix 服务器上。但是，应用程序的访问方式取决于您的客户想要什么。它是否意味着用户明确选择启动的一些自助服务应用程序？或者当用户启动其他应用程序时它会运行并弹出？

如果它是用户明确启动的应用程序，则 Citrix 管理员将需要使用 Citrix 管理控制台发布该应用程序。如果它应该为其他应用程序启动，那么当用户在 Citrix 服务器上启动会话时，客户需要配置某种形式的登录脚本来启动应用程序。

对于设置，您通常希望将内容存储在用户的漫游配置文件中。这可以是文件或注册表。对于注册表，您应该使用当前用户配置单元 (HKCU)。只要正确设置了漫游配置文件，写入 HKCU 的任何内容都应该跨服务器跟随用户。对于文件，请查找适当的环境变量以获取漫游配置文件路径。您最终会将内容写入以下位置：

c:\users\\appdata\roaming\\file.whatever

请注意“appdata”之后的“漫游”路径——这是配置文件的漫游部分。appdata\local 中的任何内容都不会离开该特定机器。

对于全局设置，您将使用本地计算机配置单元 (HKLM)。如果您在计算机上具有本地管理员权限，则只能写入此配置单元。通常设置此类设置的主要方法有两种：

1.  在您的应用程序的安装程序中。您将在安装程序中有一个 UI 页面，管理员可以在其中更改设置的值。该设置将被写入如下位置：HKLM\Software\CompanyName\ProductName\SomeKey。通常，管理员会自动将 MSI 部署到他的服务器，并在 MSI 部署脚本中包含适当的值（而不是必须在所有服务器上手动执行 MSI）。
2.  使用与上述相同的密钥，但使用组策略来配置设置。虽然管理员可以让 GPO 编辑任何 reg 键，但如果推荐使用 GPO 来更改应用程序的设置，通常您会提供一个 ADM 模板，以便管理员更轻松地执行此操作。请参阅此链接：http: [//blogs.technet.com/b/askds/archive/2007/08/14/deploying-custom-registry-changes-through-group-policy.aspx](http://blogs.technet.com/b/askds/archive/2007/08/14/deploying-custom-registry-changes-through-group-policy.aspx)

# python - 平滑离散二维坐标

> ID：15786481
> 
> 赞同：2
> 
> 时间：2013-04-03T11:46:14.987
> 
> 标签：python, math

我正在寻找一种平滑坐标的方法。例如，给定坐标

```
co = [(1,10), (2,10), (3,9), (3,8), (3,7), (2,6), ...] 
```

我想像这样平滑它们：

![在此处输入图像描述](https://i.stack.imgur.com/o1gZ1.png)

我应该使用什么算法或库？

这可能[与 splrep 平滑轨迹有关](https://stackoverflow.com/questions/13513244/smooth-a-trajectory-with-splrep)吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:49:19.243

[Douglas-Peucker 算法](http://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm)旨在简化折线。我认为有一些 Python 实现。[一个例子](https://stackoverflow.com/questions/2573997/reduce-number-of-points-in-line#)

# python - Python 错误 - “bool”类型的对象在 Python 测验中没有 len()

> ID：15786483
> 
> 赞同：2
> 
> 时间：2013-04-03T11:46:18.687
> 
> 标签：python, python-2.7, typeerror

我在 python 2.7.3 代码中遇到了一些麻烦，我正在做一个测验，导入一个包含关键字和定义列表的 csv 文件。我正在将关键字导入列表。我有这个问题，但问题的答案不是，无论我做什么，我都会得到这个 -

```
`Traceback (most recent call last):
  File "G:\new work (computerscience)\computerscience\coresworkn (programs)\main program\new code modle (b).py", line 94, in <module>
    answer()
  File "G:\new work (computerscience)\computerscience\coresworkn (programs)\main program\new code modle (b).py", line 67, in answer
    cans = random.choice(answ)==question
  File "C:\Python27\lib\random.py", line 274, in choice
    return seq[int(self.random() * len(seq))]  # raises IndexError if seq is empty
TypeError: object of type 'bool' has no len()
` 
```

我尝试了很多方法来解决它，但我不明白在哪里

```
return seq[int(self.random() * len(seq))] 
```

来自，因为它不在我的程序中。请有人告诉我我做错了什么以及如何解决它。如果您想查看我的程序，我可以在必要时提供原始代码。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T11:48:39.937

您正在给出`random.choice`一个布尔参数

```
>>> import random
>>> random.choice(False)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/random.py", line 274, in choice
    return seq[int(self.random() * len(seq))]  # raises IndexError if seq is empty
TypeError: object of type 'bool' has no len() 
```

# javascript - 在导入的 javascript 文件中使用 grails 变量

> ID：15786490
> 
> 赞同：2
> 
> 时间：2013-04-03T11:46:42.160
> 
> 标签：javascript, grails

我可以在我的 gsp 文件中像这样在 javascript 中使用 grails 变量：

```
<g:javascript>
var id= ${personInstance?.id} ; 
alert(id) ;
</g:javascript> 
```

但是当我使用这样的导入 js 文件时，这不起作用：

```
<g:javascript src="test.js"></g:javascript> 
```

测试.js：

```
 var id= ${personInstance?.id} ; 
 alert(id) ; 
```

如何在导入的 javascript 文件中使用 grails 变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T11:54:22.773

GSP 是服务器端组件：如果您在其中放入一些 js，那么 groovy 变量将被解析。浏览器在客户端检索外部 js。出于这个原因，AFAIK，你不能做你想做的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T13:31:02.167

您可以`test.js`在您的 grails 应用程序中生成，或者（可能更好）使用您需要的所有变量生成一个对象或 JSON，并将其传递给外部 JavaScript 文件中的函数。

# datetime - 日期时间 MYSQL 和 ASP 经典

> ID：15786492
> 
> 赞同：0
> 
> 时间：2013-04-03T11:46:44.787
> 
> 标签：datetime, asp-classic

我正在尝试使用 asp classic 将参数日期传递给函数：我的数据库中有日期时间格式：2012-02-22 00:00:00，但我的参数将只包含“2012-02-22”所以它不起作用我收到一个空的 rs。

```
 <!--#include file="JSON.asp" -->
<!--#include file="JSON_UTIL_0.1.1.asp" -->

<%
function concours(datedp)
Dim sConnection, objConn , objRS 
Const adCmdText = &H0001
Const adOpenForwardOnly = 0
Const adLockReadOnly = 1
    BD_serveur = "localhost"
    BD_utilisateur = "root"
    BD_password = ""
    BD_nom = "emploipublic"
    'datedp= "2012-02-22"

    sConnection ="DRIVER={MySQL ODBC 5.1 Driver}; SERVER=" & BD_serveur & ";UID=" & BD_utilisateur & ";pwd=" & BD_password & ";database=" & BD_nom & ";option=3;"

Set conn = Server.CreateObject("ADODB.Connection")
conn.Open(sConnection)

Set cmd = Server.CreateObject("ADODB.Command")
cmd.CommandType = adCmdText 
Set cmd.ActiveConnection = conn

cmd.CommandText = "SELECT * FROM concours WHERE DATE(dateDepot)='"& datedp & "'"

Set rs = Server.CreateObject("ADODB.Recordset")

rs.Open cmd, ,adOpenForwardOnly,adLockReadOnly 

Dim jsonObject

Set jsonObject = New JSON   'JSON class is in the include file json.asp'
jsonResult =  jsonObject.toJSON(Empty, rs, False) 

Response.ContentType = "application/json" 

Response.Write jsonResult

end function 

concours("2012-02-22") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:50:21.397

```
SQL = "SELECT * FROM concours WHERE dateDepot='"& datedp & "'" 
```

# php - 从一个提交按钮提交两个表单的值

> ID：15786495
> 
> 赞同：0
> 
> 时间：2013-04-03T11:46:57.053
> 
> 标签：php, javascript, html

我在 html 中创建了三个表单，第一个是简单表单，另一个是在单击按钮时动态添加表格行，但是当我按下第一个表单上的保存按钮时，我想保存这两个表单。是否可以使用PHP来做到这一点？我搜索了谷歌并找到了类似 jQuery 的东西，但即使这样似乎也不起作用，任何人都可以帮忙吗？这是我的脚本：

```
<script>
$(document).ready(function() {
    $("#submit").click(function() {
        $.post($("#form1").attr("action"), $("#form1").serialize(),
          function() {
        $.post($("#form2").attr("action"), $("#form1").serialize(),
          function() {
            $.post($("#form3").attr("action"), $("#form2").serialize(),
              function() {
                alert('Both forms submitted');
              });
          });
      });
  });
});
</script>

  <table border="1" align="right">
        <tr>
            <td>   
                <input class="cmdsave" type="submit" id="submit" name="save" value="Save" />
            </td>
            <td>
            </td>
            <td>   
                <input class="cmdexit" type="button" onClick="window.history.back()" value="Exit" />
            </td>
        </tr>

    </table>
   </nav>
<body onLoad="document.machine.code.focus()">
 <div id="content">
    <section class="tab" id="home">

    <!--<center><font size="5px" color="#6B6A68"><strong>Customer - Add</strong></font></center>  -->
    <form action="quotation.php" class="general2" align="left" name="quot" id="form1" method="POST">
                    <input type="hidden" name="vouchno" value="<?php echo ($addflag == 0) ? $get['vouchno'] : ""; ?>">
                <table border="0px" width="100%">  
                    <tr>
                        <td><br/></td>
                    </tr>
                <tr>
                    <td width="200px" align="right"><label for=""><font color="0099FF" size="3px">Quotation No.</font><span></span></label></td>
                    <td align="left"><input type="text" size="6" maxlength="6" id="code" maxlength="6" name="code" value="<?php echo ($addflag == 0) ? $get['code'] : ""; ?>" class="form-input-code"  />
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<label for=""><font color="0099FF" size="3px"> Date </font><span></span></label><input type="date" size="80" name="oildate" value="<?php echo ($addflag == 0) ? $get['vouchdt'] : $today; ?>"/>
                    </td>
                </tr>
                <tr>
                    <td width="200px" align="right"><label for=""><font color="0099FF" size="3px">Party Name </font><span></span></label></td>
                    <td align="left"><select data-placeholder="Party" style="width:332px;" name="cmbparty" class="chzn-select-deselect" onChange="showyear('party.php?code='+this.value);">
                              <option value="<?php echo ($addflag == 0) ? $get['party'] : ""; ?>"><?php echo ($addflag == 0) ? $get['party'] : ""; ?></option>
                           <?php
                             $mown = mysql_query("SELECT accode, `name` FROM accmast WHERE grpcode='010'") or die(mysql_error());
                              while($trow = mysql_fetch_array($mown)){
                                     echo "<option value=$trow[accode]>$trow[name]</option>";
                                    }
                            ?>
                        </select></td>
                </tr>

                <tr>
                    <td colspan="9">
                      <div id="parthint" style=""></div>
                    </td>  
                </tr>
                <tr>
                    <td width="200px" align="right"><label for=""><font color="" size="3px">Ref. No. </font><span></span></label></td>
                    <td align="left"><input type="text" id="refno" size="20" maxlength="20"  name="refno" value="<?php echo ($addflag == 0) ? $get['refno'] : ""; ?>" class="form-input-c20"/></td>
                </tr>
                <tr>
                    <td width="200px" align="right"><label for=""><font color="" size="3px">Kindly Attn. </font><span></span></label></td>
                    <td align="left"><input type="text" id="refno" size="20" maxlength="80"  name="attn" value="<?php echo ($addflag == 0) ? $get['attn'] : ""; ?>" class="form-input-add"/></td>
                </tr>
                <tr>
                    <td width="200px" align="right"><label for=""><font color="" size="3px">Subject. </font><span></span></label></td>
                    <td align="left"><textarea name="subject" rows="3" cols="70" class="form-input-textarea"><?php echo ($addflag == 0) ? $get['subject'] : ""; ?></textarea></td>
                </tr>

                <tr>
                    <td colspan="9">
                        <hr />
                    </td>
                </tr>
                <tr>
                  <td width="200px" align="right"><label for=""><font color="0099FF" size="3px">Dear Sir / Madam, </font><span></span></label></td>
                  <td></td>
                </tr>
                <tr>
                    <td></td>
                    <td align="left"><textarea name="msg" cols="70" class="form-input-textareaxl"><?php echo ($addflag == 0) ? $get['message'] : ""; ?></textarea></td>

                </tr>
                <tr>
                    <td width="200px" align="right"><label for=""><font color="0099FF" size="3px">Status</font><span></span></label></td>
                    <td align="left"><select data-placeholder="Status" style="width:332px;" name="cmbstatus" class="chzn-select-deselect">
                              <option value="<?php echo ($addflag == 0) ? $get['status'] : ""; ?>"><?php echo ($addflag == 0) ? $get['status'] : ""; ?></option>
                              <option value="<?php echo ($addflag == 0) ? $get['status'] : "Pending"; ?>"><?php echo ($addflag == 0) ? $get['status'] : "Pending"; ?></option>
                              <option value="<?php echo ($addflag == 0) ? $get['status'] : "Approved"; ?>"><?php echo ($addflag == 0) ? $get['status'] : "Approved"; ?></option>
                              <option value="<?php echo ($addflag == 0) ? $get['status'] : "Rejected"; ?>"><?php echo ($addflag == 0) ? $get['status'] : "Rejected"; ?></option>

                        </select></td>
                </tr>
                <tr>
                    <td width="200px" align="right"><label for=""><font color="" size="3px">Remarks. </font><span></span></label></td>
                    <td align="left"><textarea name="rem" rows="3" cols="70" class="form-input-textarea"><?php echo ($addflag == 0) ? $get['subject'] : ""; ?></textarea></td>
                </tr>

                <tr>
                    <td><br/></td>
                </tr>

                <tr>
                    <td></td><td>
                       </td>

                    <td>
                </tr>
            </table>

    </form>
        </section>
     <section class="tab" id="company"></section>

    <section class="tab" id="portfolio">

        <form action="quotation.php" class="general2" align="left" name="quot2" id="form2" method="POST">

                <table border="1px" width="90%" id="data">
                  <tr>
                      <td><br /></td>
                  </tr>
                                    <tr>
                      <td><br /></td>
                  </tr>
                  <tr>
                     <td width="130px" align="center"><label for=""><font color="#0099FF" size="3px">Order</font><span></span></label></td>
                     <td width="130px" align="center"><label for=""><font color="#0099FF" size="3px">Sr No.</font><span></span></label></td>
                     <td width="580px" align="center"><label for=""><font color="#0099FF" size="3px">Description</font><span></span></label></td>
                     <td width="130px" align="center"><label for=""><font color="#0099FF" size="3px">Unit</font><span></span></label></td>
                     <td width="130px" align="center"><label for=""><font color="#0099FF" size="3px">Rate</font><span></span></label></td>
                  </tr>
                  <?php if($addflag==0){
                          $qry = mysql_query("SELECT * FROM  `quotdtl` WHERE vouchno='$getvouch'") or die(mysql_error());

                          $ctr = 0;    
                          while ($row = mysql_fetch_array($qry)) {
                                 echo "<td align=\"center\"><input type=\"text\" size=\"6\" maxlength=\"6\" id=\"code\" maxlength=\"6\" name=\"ord_$ctr\" value=\"$row[orderby]\" class=\"form-input-oth\"  /></td>";     
                                 echo "<td align=\"center\"><input type=\"text\" size=\"6\" maxlength=\"6\" id=\"code\" maxlength=\"6\" name=\"srno_$ctr\" value=\"$row[srno]\" class=\"form-input-oth\"  /></td>";
                                 echo "<td align=\"center\"><textarea name=\"descrip_1\" cols=\"70\" class=\"form-input-textarea\">$row[descrip]</textarea></td>";
                                 echo "<td align=\"center\"><input type=\"text\" size=\"6\" maxlength=\"9\" id=\"code\" maxlength=\"6\" name=\"unit_$ctr\" value=\"$row[unit]\" class=\"form-input-rate\"/></td> ";
                                 echo "<td align=\"center\"><input type=\"text\" size=\"6\" maxlength=\"9\" id=\"code\" maxlength=\"6\" name=\"rate_$ctr\" value=\"$row[rate]\" class=\"form-input-rate\"  /></td>";

                                $ctr++; 
                          }
                        }else{                     
                     ?> 
                  <tr>
                    <td align="center"><input type="text" size="6" maxlength="6" id="code" maxlength="6" name="ord_1" value="" class="form-input-oth"  /></td> 
                    <td align="center"><input type="text" size="6" maxlength="6" id="code" maxlength="6" name="srno_1" value="" class="form-input-oth"  /></td> 
                    <td align="center"><textarea name="descrip_1" cols="20" class="form-input-textarea"></textarea></td>
                    <td align="center"><input type="text" size="6" maxlength="9" id="code" maxlength="6" name="unit_1" value="" class="form-input-rate"  /></td> 
                    <td align="center"><input type="text" size="6" maxlength="9" id="code" maxlength="6" name="rate_1" value="" class="form-input-rate"  /></td> 
                  </tr>
                  <tr>
                    <td align="center"><input type="text" size="6" maxlength="6" id="code" maxlength="6" name="ord_2" value="" class="form-input-oth"  /></td> 
                    <td align="center"><input type="text" size="6" maxlength="6" id="code" maxlength="6" name="srno_2" value="" class="form-input-oth"  /></td> 
                    <td align="center"><textarea name="descrip_2" cols="20" class="form-input-textarea"></textarea></td>
                    <td align="center"><input type="text" size="6" maxlength="9" id="code" maxlength="6" name="unit_2" value="" class="form-input-rate"  /></td> 
                    <td align="center"><input type="text" size="6" maxlength="9" id="code" maxlength="6" name="rate_2" value="" class="form-input-rate"  /></td> 
                  </tr>
                   <tr>
                    <td align="center"><input type="text" size="6" maxlength="6" id="code" maxlength="6" name="ord_3" value="" class="form-input-oth"  /></td> 
                    <td align="center"><input type="text" size="6" maxlength="6" id="code" maxlength="6" name="srno_3" value="" class="form-input-oth"  /></td> 
                    <td align="center"><textarea name="descrip_3" cols="20" class="form-input-textarea"></textarea></td>
                    <td align="center"><input type="text" size="6" maxlength="9" id="code" maxlength="6" name="unit_3" value="" class="form-input-rate"  /></td> 
                    <td align="center"><input type="text" size="6" maxlength="9" id="code" maxlength="6" name="rate_3" value="" class="form-input-rate"  /></td> 
                  </tr>
                  <tr>
                    <td align="center"><input type="text" size="6" maxlength="6" id="code" maxlength="6" name="ord_4" value="" class="form-input-oth"  /></td> 
                    <td align="center"><input type="text" size="6" maxlength="6" id="code" maxlength="6" name="srno_4" value="" class="form-input-oth"  /></td> 
                    <td align="center"><textarea name="descrip_4" cols="20" class="form-input-textarea"></textarea></td>
                    <td align="center"><input type="text" size="6" maxlength="9" id="code" maxlength="6" name="unit_4" value="" class="form-input-rate"  /></td> 
                    <td align="center"><input type="text" size="6" maxlength="9" id="code" maxlength="6" name="rate_4" value="" class="form-input-rate"  /></td> 
                  </tr>
                  <tr>
                    <td align="center"><input type="text" size="6" maxlength="6" id="code" maxlength="6" name="ord_5" value="" class="form-input-oth"  /></td> 
                    <td align="center"><input type="text" size="6" maxlength="6" id="code" maxlength="6" name="srno_5" value="" class="form-input-oth"  /></td> 
                    <td align="center"><textarea name="descrip_5" cols="20" class="form-input-textarea"></textarea></td>
                    <td align="center"><input type="text" size="6" maxlength="9" id="code" maxlength="6" name="unit_5" value="" class="form-input-rate"  /></td> 
                    <td align="center"><input type="text" size="6" maxlength="9" id="code" maxlength="6" name="rate_5" value="" class="form-input-rate"  /></td> 
                  </tr>
                  <tr>
                    <td align="center"><input type="text" size="6" maxlength="6" id="code" maxlength="6" name="ord_6" value="" class="form-input-oth"  /></td> 
                    <td align="center"><input type="text" size="6" maxlength="6" id="code" maxlength="6" name="srno_6" value="" class="form-input-oth"  /></td> 
                    <td align="center"><textarea name="descrip_6" cols="20" class="form-input-textarea"></textarea></td>
                    <td align="center"><input type="text" size="6" maxlength="9" id="code" maxlength="6" name="unit_6" value="" class="form-input-rate"  /></td> 
                    <td align="center"><input type="text" size="6" maxlength="9" id="code" maxlength="6" name="rate_6" value="" class="form-input-rate"  /></td> 
                  </tr>
                  <tr>
                    <td align="center"><input type="text" size="6" maxlength="6" id="code" maxlength="6" name="ord_7" value="" class="form-input-oth"  /></td> 
                    <td align="center"><input type="text" size="6" maxlength="6" id="code" maxlength="6" name="srno_7" value="" class="form-input-oth"  /></td> 
                    <td align="center"><textarea name="descrip_7" cols="20" class="form-input-textarea"></textarea></td>
                    <td align="center"><input type="text" size="6" maxlength="9" id="code" maxlength="6" name="unit_7" value="" class="form-input-rate"  /></td> 
                    <td align="center"><input type="text" size="6" maxlength="9" id="code" maxlength="6" name="rate_7" value="" class="form-input-rate"  /></td> 
                  </tr>
                  <?php }?>
            </table>

                         &nbsp;<input type="button" id="addnew" class="classname" name="addnew" value="+" /> 
                          <input type="hidden" id="items" name="items" value="<?php echo ($addflag == 0) ? $ctr : 7; ?>" />                 
    </form>
      </section> 
      <section class="tab" id="contact">

        <form action="quotation.php" class="general2" align="left" name="quot2" id="form3" method="POST">

                <table border="1px" width="90%" id="data2">
                  <tr>
                     <td><br /></td>
                  </tr>
                  <tr>
                     <td width="" align="left"><label for=""><font color="#0099FF" size="3px">Notes,</font><span></span></label></td>
                     <td></td><td></td>
                  </tr>
                                    <?php if($addflag==0){
                          $qry = mysql_query("SELECT * FROM  `quotnotes` WHERE vouchno='$getvouch'") or die(mysql_error());

                          $mctr = 0;    
                          while ($rownote = mysql_fetch_array($qry)) {
                                 echo "<td align=\"left\"><textarea name=\"note_1\" cols=\"80\" class=\"form-input-textareaxxl\">$rownote[notes]</textarea></td>";

                                $mctr++; 
                          }
                        }else{                     
                     ?>
                  <tr></tr>
                  <tr>
                     <td align="left"><textarea name="note_1" cols="80" class="form-input-textareaxxl"></textarea></td>
                  </tr>
                  <tr>
                     <td align="left"><textarea name="note_2" cols="80" class="form-input-textareaxxl"></textarea></td>
                  </tr>
                  <tr>
                     <td align="left"><textarea name="note_3" cols="80" class="form-input-textareaxxl"></textarea></td>
                  </tr>
                  <tr>
                     <td align="left"><textarea name="note_4" cols="80" class="form-input-textareaxxl"></textarea></td>
                  </tr>
                  <tr>
                     <td align="left"><textarea name="note_5" cols="80" class="form-input-textareaxxl"></textarea></td>
                  </tr>
                 <?php }?>
            </table>

                         &nbsp;<input type="button" id="addnew2" class="classname" name="addnew" value="+" /> 
                          <input type="hidden" id="h" name="h" value="<?php echo ($addflag == 0) ? $mctr : 5; ?>" />                 
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:56:28.120

如果我明白你想要什么，第二个帖子调用中有一个错误：**form1**应该是**form2**，第三个**form2**应该是**form3** 尝试在每个帖子之前发出警报以更有效地调试。这将按照 1-2-3 的顺序发送每个表单。

```
 <script>
    $(document).ready(function() {
        $("#submit").click(function(event) {
              alert('send 1st form');
            $.post($("#form1").attr("action"), $("#form1").serialize(),
              function() {
              alert('send 2nd form');
            $.post($("#form2").attr("action"), $("#form2").serialize(),
              function() {
              alert('send 3th form');
                $.post($("#form3").attr("action"), $("#form3").serialize(),
                  function() {
                    alert('Both forms submitted');
                  });
              });
          });
          event.preventDefault();
      });

    });
    </script> 
```

编辑：添加 event.preventDefault （感谢 Akam）

# jquery - 定位下拉菜单

> ID：15786500
> 
> 赞同：0
> 
> 时间：2013-04-03T11:47:11.770
> 
> 标签：jquery, html, css

我的下拉菜单的功能运行良好。但是，我无法定位掉落的物品。我已经定位了下拉的项目，但是当我在更大的屏幕上查看它时，这些项目的定位就好像仍然在更小的屏幕上一样。

[http://jsfiddle.net/sArTd/1/](http://jsfiddle.net/sArTd/1/)

下拉菜单在 jsFiddle 中工作正常，但是如果您取消注释 HTML 部分中的“测试”并重试，您将看到我的问题是什么。如果下拉项的父项向左或向右移动，则下拉项不跟随！

如您所见，我曾经使用过：`left:..`定位下拉项目，所以我认为这可能是问题所在，我不确定如何正确定位它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:53:36.613

用 ul list 包裹你的菜单链接和菜单列表。（如果我理解你的问题没有错）

**HTML**

```
<ul class="main">
    <li><a href ='#' >Test </a></li>
    <li><a href ='#' >Test </a></li>
    <li><a href ='#' >Test </a></li>
    <li><a href ='#' >Test </a></li>
    <li><a href ='#' id="Notification">Notifcations</a>
        <ul id="popOut1">
            <li><a href='#'>Dropped</a>
            </li>
        </ul> 
    </li>
    <li><a href='#' id="Settings">\/</a>
        <ul id="popOut2">
            <li><a href="#">Settings</a>
            </li>
            <li><a href="#">Logout</a>
            </li>
        </ul>
       </li>
</ul> 
```

**CSS**

```
ul.main, li{
        list-style: none;
    margin: 0;
    padding: 0; display:inline-block;
    background:red;
    position:relative
} 
```

**[演示](http://jsfiddle.net/sArTd/8/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T11:54:21.557

你应该重写你的结构，

```
<ul>
<li><a />
 <ul>
   <li><a /></li>
 </ul>
</li>
</ul> 
```

这样你就可以添加`position:relative`li 和 left:0 将它放在正确的位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T11:55:19.930

定位菜单的最佳方式是使用 jQuery，因为您可以动态响应 UI 更改，例如窗口大小调整等。

我推荐如下内容：

```
$opener.on("click", function() {
    $menu.show();
    $menu.css({
        top: $opener.position().top + $opener.outerHeight() + 'px',
        left: $opener.position().left + 'px'
    });
}); 
```

然后菜单必须是`position: absolute`两者的容器`position: relative`。

# iphone - 如何在不重新启动我的应用程序的情况下以编程方式更改应用程序语言？

> ID：15786501
> 
> 赞同：0
> 
> 时间：2013-04-03T11:47:18.427
> 
> 标签：iphone, ios, objective-c, xcode

如果我只需要更改文本字符串，它会很简单，但是 **如何更改图像或 xib 文件（用于每个本地化）？**

设置本地化的代码：

```
[[NSUserDefaults standardUserDefaults] setObject:[NSArray arrayWithObjects:@"Ukrainian", @"English", nil] forKey:@"AppleLanguages"]; 
```

或者

```
[[NSUserDefaults standardUserDefaults] setObject:[NSArray arrayWithObjects: @"English", @"Ukrainian", nil] forKey:@"AppleLanguages"]; 
```

（如果我已经完成了这段代码，并且应用程序已关闭，那么下次应用程序启动时它会使用为所选语言设置的所有资源）

我怎样才能做同样的事情但不重新启动应用程序？

我找到了很多示例，但这些示例显示了如何处理文本，以及如何处理其他资源，以及如何更新它们（针对当前选择的语言）？

示例： [即时更改 iOS 应用程序的语言](https://stackoverflow.com/questions/6150576/change-ios-apps-language-on-the-fly)

[仅在 iPhone 上重新启动后更改语言](https://stackoverflow.com/questions/5912018/language-change-only-after-restart-on-iphone)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:52:48.407

你不能这样做（没有越狱）。您应该以某种方式对您的应用程序进行编码，当一些重要信息发生变化时您可以重新开始，而无需重新启动应用程序。例如，您可以弹出所有视图控制器并取消分配它们，然后让用户使用正确的语言重新加载它们。

但是请注意，通常你不应该做这样的事情。本地化在 iOS 上以一种非常优雅的方式解决。您只需本地化 .strings（以及可选的 .nib 和图像文件），系统会为您处理其余部分。当用户在设置应用中更改语言时，您的应用将被系统终止。下次用户启动应用程序时，它将加载正确的语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T11:49:19.610

为什么要重新启动应用程序？我认为这是不可能的。但是您可以在`applicationDidBecomeActive`or`applicationWillEnterForeground`方法中做任何更改

```
- (void)applicationWillEnterForeground:(UIApplication *)application
{
    // Called as part of the transition from the background to the active state; here you can undo many of the changes made on entering the background.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T11:55:13.463

这是不可能的，

虽然有一招

1> 从您的应用程序打开带有自定义 URL 的 safari 浏览器（例如 com.yourcompany.yourApp）

2> 在您的应用程序中注册该自定义 URL（从 plist 文件中您可以这样做），当该自定义 URL 在 safari 中打开时，它将从 safari 打开您的应用程序。

3> 从您的 .plist 文件中关闭“应用程序应在后台运行”。（您可以通过将 UIApplicationExitsOnSuspend 键添加到应用程序的 Info.plist 文件并将其值设置为 YES 来实现。）

# jsp - 从 java servlet 转发到选项卡

> ID：15786507
> 
> 赞同：1
> 
> 时间：2013-04-03T11:47:31.533
> 
> 标签：jsp, servlets

在我的 JSP 页面中，我有一些选项卡。每个选项卡都包含一些表单域。当我单击提交按钮时，它会调用一个 servlet。处理 servlet 后，有什么方法可以从 servlet 转到下一个选项卡。

这是我`index.jsp`的标签和第一个标签的代码

```
<div class="span12">
        <div class="navbar btn-navbar">
            <div id="tabs" class="tabbable">
                <ul id="myTab" class="nav nav-tabs">
                    <li class="active"><a href="#datacollector" target="main"
                        data-toggle="tab">Data Collector</a></li>
                    <li id="fromDB" class="selectDataloadType" style="display: none;"><a
                        href="#fromDatabase" target="main" data-toggle="tab">Data Load
                            Database</a></li>
                    <li id="fromFile" class="selectDataloadType" style="display: none;"><a
                        href="#fromFiles" target="main" data-toggle="tab">Data Load
                            File</a></li>
                    <li id="email" class="selectDataloadType" style="display: none;"><a
                        href="#fromEmail" target="main" data-toggle="tab">Data Load
                            Email</a></li>
                    <li id="webServices" class="selectDataloadType"
                        style="display: none;"><a href="#fromWebServices"
                        target="main" data-toggle="tab">Data Load Web</a></li>
                    <li><a href="#datamap" target="main" data-toggle="tab">Data
                            Map</a></li>
                    <li><a href="#schedule" target="main" data-toggle="tab">Schedule</a></li>
                </ul>
                <br> <br> <br> <br> <br>
                <div id="myTabContent" class="tab-content">
                    <div class="tab-pane fade in active" id="datacollector">
                        <div class="container">
                            <div class="row">
                                <div class="span8">
                                    <form name="selectType" action="selectType" method="get">
                                        <fieldset>
                                            <label class="control-label" for="dataloadType">Data
                                                load Type:</label> <select id="dataloadType" name="dataloadType">
                                                <option>Choose Data load Type</option>
                                                <option value="fromDB">From Database</option>
                                                <option value="fromFile">From File</option>
                                                <option value="email">E-mail</option>
                                                <option value="webServices">Web Services</option>
                                            </select>
                                            <p>
                                                <button type="submit" class="btn btn-success">Submit</button>
                                            </p>
                                        </fieldset>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div> 
```

因此，当我单击提交按钮时，它将调用 servlet。在我的 servlet 中，我正在处理一些东西。之后，我希望 servlet 重定向到同`index.jsp`一个选项卡并重定向到下一个选项卡在我的 servlet 中，我尝试了这个

```
RequestDispatcher rd = request.getRequestDispatcher("index.jsp#fromDatabase");
rd.forward(request, response); 
```

但它不起作用。有什么办法吗？

**尝试@JB Nizet 给出的解决方案后更新 1**

这是我的*LI*代码

```
<li id="fromDB" class="selectDataloadType <c:if test="${activeTab == 'fromDatabase'}">active</c:if>" style="display: none;"><a
                        href="#fromDatabase" target="main" data-toggle="tab">Data Load
                            Database</a></li> 
```

然后它在我的 index.jsp 中显示以下内容

![在此处输入图像描述](https://i.stack.imgur.com/xabc5.jpg)

我知道这是因为双引号。我无法纠正它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:22:45.027

servlet 应该简单地决定哪个选项卡必须处于活动状态，并在转发到 JSP 之前将此信息存储在请求属性中。例如：

```
request.setAttribute("activeTab", "fromDatabase"); 
```

JSP 应该使用这些信息来激活相应的选项卡。例如：

```
<li id="fromDB" class="selectDataloadType <c:if test="${activeTab == 'fromDatabase'}">active</c:if>" ... 
```

（对于标签内容也是如此）

# performance - 使用 hitcollector 提高 Lucene 搜索速度

> ID：15786516
> 
> 赞同：0
> 
> 时间：2013-04-03T11:47:54.667
> 
> 标签：performance, lucene, lucene.net

使用 Lucene 的 Hitcollector 是否可以减少搜索时间？如果可以，在以下情况下如何正确实施？

```
// search login here ie. 
// this is the search method
// random query
if (!string.IsNullOrEmpty(vendor))
{
   bQuery.Add(qbVendor.Parse(vendor.ToLower()), BooleanClause.Occur.MUST);
}

bQuery.Add(qbWebsite.Parse(website.ToLower()), BooleanClause.Occur.MUST);
TopDocs hits = this.ProductIndexSearcher.Search(bQuery, null, 1000)
return hits.scoreDocs; 
```

这部分将是函数调用：

```
ScoreDoc[] docs = null;
docs = s.KeywordSearch(keyword, category, Webshop.Context.InSiteWebshopId, null, null).ToList(), 1000

foreach (ScoreDoc d in docs.Take(maxResult))
{                                
   Document doc = this.ProductIndexSearcher.Doc(d.doc);
} 
```

据我了解，不建议使用 Searcher.Doc 从搜索结果中获取文档，而是使用 hitcollector。我试图让一个hitcollector加入，但结果很混乱。任何帮助将非常感激！

编辑：澄清我担心的是：

> 为了获得良好的搜索性能，此方法的实现不应在遇到的每个文档编号上调用 Searcher.doc(int) 或 org.apache.lucene.index.IndexReader.document(int)。这样做会使搜索速度减慢一个数量级或更多。

参考： [http: //grepcode.com/file/repo1.maven.org/maven2/org.apache.lucene/lucene-core/2.9.1/org/apache/lucene/search/HitCollector.java](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.lucene/lucene-core/2.9.1/org/apache/lucene/search/HitCollector.java)

所以我只是想知道添加一个 hitcollector 是否会给我们带来一些额外的性能。如果在第一个答案中指定调用 Searcher.Search(params) 时不需要使用 HitCollector，我可以。你能确认一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:11:44.030

`HitCollector`在 2.9 中已弃用，并从 3.0 中完全删除。不要使用它。

如果你需要它，你应该实现你自己的`Collector`. 如果您想获得搜索的原始结果，这通常很有用，这是自定义评分、过滤等内容所必需的。

它不是很清楚你在这里要求什么，但是你发布的代码并没有做任何花哨的事情，你似乎想要“前 n 个结果”。

[因此，您应该使用Searcher.Search(Query,int)](https://lucene.apache.org/core/old_versioned_docs//versions/3_0_1/api/core/org/apache/lucene/search/Searcher.html#search%28org.apache.lucene.search.Query,%20int%29)方法自动使用的 TopDocsCollector 。

我还建议您阅读[Searchable.Search(Weight weight, Filter filter, Collector collector)](https://lucene.apache.org/core/old_versioned_docs//versions/3_0_1/api/core/org/apache/lucene/search/Searchable.html#search%28org.apache.lucene.search.Weight,%20org.apache.lucene.search.Filter,%20org.apache.lucene.search.Collector%29)方法中的文档：

> 较低级别的搜索 API。
> 
> 每个文档都会调用 Collector.collect(int)。不鼓励基于收集器访问远程索引。
> 
> 应用程序仅在需要所有匹配文档时才应使用它。高级搜索 API (Searcher.search(Query,int)) 通常更高效，因为它会跳过非高分命中。

# c# - 原始 XML 文件未完成引发异常

> ID：15786520
> 
> 赞同：0
> 
> 时间：2013-04-03T11:48:04.157
> 
> 标签：c#, xml, root

我的原始 xml 文件不完整，它抛出异常： Unexpected end of file has occurred 。以下元素未关闭 rrrr, nnnn

XML 文件，例如：

```
<rrrr>
<nnnn>
<aaaa>
</aaaa>
<bbbb>
</bbbb> 
```

如何使用 C# 编辑此文件以包含 `</nnnn></rrrr>`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T11:50:41.803

最简单的使用`File.AppendText`方法：

```
using (StreamWriter w = File.AppendText(filePath))
{
    w.WriteLine("</nnnn>");
    w.WriteLinw("</rrrr>");
} 
```

# javascript - 动态命名变量javascript

> ID：15786523
> 
> 赞同：2
> 
> 时间：2013-04-03T11:48:13.200
> 
> 标签：javascript, jquery, variables, dynamic

我需要在循环中动态创建变量，但我不知道如何。我已经阅读了有关使用的信息`eval();`，但我发现它只是动态更改变量内的值。

我需要这样的东西：

```
$(e).find('unidadeid').each(function () {
    countUnidades++;
    var Unidade[value inside countUnidades here] = $(this).text();
}); 
```

请清楚你的步骤。我要求的不是解决方案，而是寻求帮助，作为一种学习。谢谢 ;）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T11:52:42.220

你有两个选择：

1.  使用数组：

    ```
    var unidades = [];
    $(e).find('unidadeid').each(function () {
        unidades.push($(this).text());
    }); 
    ```

    或者

    ```
    var unidades = $(e).find('unidadeid').map(function () {
        return $(this).text();
    }).get(); 
    ```

2.  如果您真的非常想拥有不仅仅是数字的名称，请使用对象和括号表示法：

    ```
    var unidades = {}, countUnidades = 0;
    $(e).find('unidadeid').each(function () {
        countUnidades++
        unidades['Unidade' + countUnidades] = $(this).text();
    }); 
    ```

    这将创建一个对象 ,`unidades`具有诸如`Unidade0`,`Unidade1`等属性。注意`each`接收索引，因此您不需要`countUnidades`它，除非您想要它用于其他用途：

    ```
    var unidades = {};
    $(e).find('unidadeid').each(function (index) {
        unidades['Unidade' + index] = $(this).text();
    }); 
    ```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T11:49:50.597

你总是可以使用数组：

```
var Unidade = [],
    countUnidades = 0;

$(e).find("unidadeid").each(function(i) {
    Unidade[countUnidades++] = $(this).text();

    // ... or Unidade.push($(this).text());
    // ... or Unidade[i] = $(this).text();
}); 
```

不要忘记 DOM 元素应该总是有*唯一的*ID，所以`each`这里不需要迭代，如果`unidadeid`指的是某个元素的 ID。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T11:59:52.853

您的示例只是添加到我假设的具有增量值的数组中。Unidade 在 JSON 中看起来像这样：

```
[
    0: "text0",
    1: "text1",
    2: "text2"
] 
```

但是，如果您想将其添加到对象中，您只需遍历一个字符串数组，其中该数组的长度与您的项目列表的长度相同。事实上，您可能希望将此值附加到数据属性，其中值是变量名称，文本是元素的内容。所以 HTML 应该是这样的：

```
<div data-var="a">Text1</div>
<div data-var="b">Text2</div>
<div data-var="c">Text3</div> 
```

需要这个JS：

```
var unidade = {};

$("div").find('unidadeid').each(function() {
    unidade[$(this).data('var')] = $(this).text();
});

console.log(unidade); 
```

对象看起来像这样：

```
{
    "a": "Text1",
    "b": "Text2",
    "c": "Text3"
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T11:52:31.053

我怀疑你需要动态创建变量。这很少有帮助。

您可能想了解数据结构；特别是我认为你只想要一个数组：

```
var unidades = []; // declare the array outside the loop
$(e).find('unidadeid').each(function () {
    countUnidades++;
    unidades[countUnidades] = $(this).text();
}); 
```

现在你有了一个数组，`unidades`它的值是`text()`你元素的内容。

我不确定是否`find('unidadeid')`是您想要的 - 查找所有`<unidadeid>`元素，这不是 HTML 元素，但也许您正在处理自定义 XML，或者这只是一个示例。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-03T11:59:01.650

好吧，为了完整起见，这正是您所要求的，尽管这是一个糟糕的主意：

```
$(e).find('unidadeid').each(function () {
  countUnidades++;
  var t = $(this).text();
  eval('Unidade' + countUnidades + ' = t;');
}); 
```

笔记：

*   `eval`在不打开安全漏洞的情况下很难使用。
*   `eval`是缓慢的。
*   动态创建变量毫无意义，因为您还需要动态访问它们。
*   这些变量是全局的（否则它们将是回调函数的本地变量，并在创建后立即消失）。

通常你会使用一个数组来代替：

```
var Unidade = [];
$(e).find('unidadeid').each(function () {
  Unidade.push($(this).text());
}); 
```

# python - Python C API 如何将结构数组从 C 传递到 Python

> ID：15786525
> 
> 赞同：10
> 
> 时间：2013-04-03T11:48:16.110
> 
> 标签：python, c, python-c-api

对于我正在创建的 python 模块，我想向 python 用户传递一个结构数组，如下所示：

```
struct tcpstat
{
    inet_prefix local;
    inet_prefix remote;
    int     lport;
    int     rport;
    int     state;
    int     rq, wq;
    int     timer;
    int     timeout;
    int     retrs;
    unsigned    ino;
    int     probes;
    unsigned    uid;
    int     refcnt;
    unsigned long long sk;
    int     rto, ato, qack, cwnd, ssthresh;
}; 
```

我认为这`Py_BuildValues`就是我正在寻找的功能。但好像不是。查看 Python 文档，我找到了[*Buffer Protocol*](http://docs.python.org/3.2/c-api/buffer.html)。但这是我第一次开发 python 模块，官方文档对我帮助不大。

缓冲协议是解决我问题的最佳方案吗？如果是这样，我怎样才能将我的数组从 C 返回到 python？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T11:49:36.373

最后我所做的是创建一个列表对象，`PyListObject`并在该列表中附加一个字典，其中包含我想向 python 用户显示的结构的值。

希望这会帮助有同样疑问的人，这里是代码：

```
PyObject *dict = NULL;
PyListObject *list;

list = (PyListObject *) Py_BuildValue("[]");

int i = 0;
for (i; i < stats_length; i++) {
    dict = Py_BuildValue("{s:i}", "LPort", stats[i].lport);
    PyList_Append(list, dict);
}

return (PyObject *) list; 
```

# symfony - Symfony 2（Sonata 管理员）嵌套实体

> ID：15786526
> 
> 赞同：1
> 
> 时间：2013-04-03T11:48:16.950
> 
> 标签：symfony, symfony-sonata, sonata-admin

我正在使用 Sonata Admin 捆绑包，但出现了问题。我正在使用此代码

```
$formMapper
    ->add('shares', 'sonata_type_collection',
        array('by_reference' => false, 'label' => 'Share percent'),
        array(
            'edit' => 'inline',
            'inline' => 'table'
        )
    ) 
```

在这里，我引用了一个实体，因此我可以在另一个实体中对其进行编辑。问题是，我不需要`inline`编辑。有没有办法只显示一个“编辑共享”按钮而不显示整个编辑表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T14:06:43.357

不，这是不可能的。

您可以这样做的唯一方法是将自定义按钮添加到编辑视图并创建到所需页面的路由。

# ios - 如何将html字符串保存到数据库中

> ID：15786528
> 
> 赞同：1
> 
> 时间：2013-04-03T11:48:24.763
> 
> 标签：ios, objective-c, database, nsstring

我有这个`html string`

```
<p><span style="color: #4f4f4f; font-family: Arial; font-size: 12px; font-style: normal; 
font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 
15.600000381469727px; orphans: 2; text-align: -webkit-left; text-indent: 0px; text-transform:
 none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-size-adjust: auto; -
webkit-text-stroke-width: 0px; background-color: #ffffff; display: inline !important; float: 
none;">Numerical estimation is key in many craft and technical jobs where the ability to 
quickly and accurately estimate material quantities is essential. The speed at which you can 
answer these questions is the critical measure, as most people could achieve a very high sco
re given unlimited time in which to answer. You can therefore expect 25-35 questions in 10 
minutes or so.</span></p> 
```

我想将其存储在我的 中`database`，但在执行查询时应用程序崩溃了。知道我是否应该删除任何特定`symbol`或任何东西，还是因为它的长度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T11:49:49.120

通常，您应该执行**SQL Escape**操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T11:55:22.100

只要你将它作为一个字符串插入它应该可以工作..试试这个：

```
 $htmlString = '<p><span style="color: #4f4f4f; font-family: Arial; font-size: 12px; font-style: normal; 
    font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: 
    15.600000381469727px; orphans: 2; text-align: -webkit-left; text-indent: 0px; text-transform:
     none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-size-adjust: auto; -
    webkit-text-stroke-width: 0px; background-color: #ffffff; display: inline !important; float: 
    none;">Numerical estimation is key in many craft and technical jobs where the ability to 
    quickly and accurately estimate material quantities is essential. The speed at which you can 
    answer these questions is the critical measure, as most people could achieve a very high sco
    re given unlimited time in which to answer. You can therefore expect 25-35 questions in 10 
    minutes or so.</span></p>'; 
```

我基本上用替换了`""`，`''`因为你的字符串已经包含双引号并且会中断。

[`SQL Escapes`](https://www.google.co.uk/search?q=SQL+Escapes&aq=f&oq=SQL+Escapes&aqs=chrome.0.57&sourceid=chrome&ie=UTF-8#hl=en&sclient=psy-ab&q=SQL+Escapes&oq=SQL+Escapes&gs_l=serp.3..35i39j0i22i10i30l2j0i22i30.63302.63302.0.63537.1.1.0.0.0.0.55.55.1.1.0...0.0...1c.1.8.psy-ab.QPoZFSunGxo&pbx=1&bav=on.2,or.r_cp.r_qf.&fp=3e547c9918f195e6&biw=1920&bih=979)正如 Ismet Alkan 所说，在插入数据时执行始终是一种好习惯。

还要确保您的`database`列与字符串兼容，因此将类型设置为`TEXT`应该可以解决问题。

# android - 带有 Https URL 的 Android WebView 错误

> ID：15786533
> 
> 赞同：0
> 
> 时间：2013-04-03T11:48:48.393
> 
> 标签：android, eclipse, https, webview

我只是想在应用程序中的 web 视图中加载[https://latestsightings.startraqdome.com/mobile/](https://latestsightings.startraqdome.com/mobile/)。

这是我的代码：

仪表板.Java：

```
@SuppressWarnings({ "deprecation", "unused" })
public class Dashboard extends Activity {

public String BASE_URL = "https://latestsightings.startraqdome.com/mobile/";
public String DASHBOARD_URL = BASE_URL + "dashboard/";
public String CONTACT_URL = BASE_URL + "contact/";

private JavascriptInterface jsInterface;

  WebViewClient yourWebClient = new WebViewClient()
  {
      // Override page so it's load on my view only
      @Override
      public boolean shouldOverrideUrlLoading(WebView  view, String  url)
      {
       // This line we let me load only pages inside Firstdroid Webpage
       if ( url.contains("firstdroid") == true )
          // Load new URL Don't override URL Link
          return false;

       // Return true to override url loading (In this case do nothing).
       return true;
      }
  };

@SuppressLint("SetJavaScriptEnabled")
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_dashboard);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);

    WebView engine = (WebView) findViewById(R.id.web_engine);

    // Progress bar.
    // With full screen app, window progress bar (FEATURE_PROGRESS) doesn't     seem to show,
    // so we use an explicitly created one.
    final ProgressBar progressBar = (ProgressBar)     findViewById(R.id.progressbar);

    engine.setWebChromeClient(new WebChromeClient() {
        public void onProgressChanged(WebView view, int progress)
        {
            progressBar.setProgress(progress);
        }
    });

    engine.setWebViewClient(new FixedWebViewClient() {
        public void onPageStarted(WebView view, String url, Bitmap favicon)
        {
            jsInterface.enablePreferencesMenu  = false;
            jsInterface.modalIsVisible = false;
            jsInterface.urlForSharing = null;
            progressBar.setVisibility(View.VISIBLE);
        }

        public void onPageFinished(WebView view, String url)
        {
            progressBar.setVisibility(View.GONE);
        }
    });
    engine.getSettings().setJavaScriptEnabled(true);
    jsInterface = new JavascriptInterface();
    try {
        ComponentName comp = new ComponentName(this, Dashboard.class);
        PackageInfo pinfo =     getPackageManager().getPackageInfo(comp.getPackageName(), 0);
        jsInterface.versionCode = pinfo.versionCode;
    } catch(android.content.pm.PackageManager.NameNotFoundException e) {
    }

    engine.addJavascriptInterface(jsInterface, "androidlearnscripture");
    engine.loadUrl(BASE_URL);
}

private WebView getEngine() {
    return (WebView) findViewById(R.id.web_engine);
}

public void onBackPressed() {
    WebView engine = getEngine();
    String url = engine.getUrl(); 
    if (jsInterface.modalIsVisible) {
        engine.loadUrl("javascript: learnscripture.hideModal();");
    } else if (url != null && (
            url.equals(BASE_URL) ||
            url.equals(DASHBOARD_URL) ||
            !engine.canGoBack())) {
        // exit
        super.onBackPressed();
    } else {
        // go back a page, like normal browser
        engine.goBack();
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.main_menu, menu);
    return true;
}

@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    MenuItem prefs = menu.findItem(R.id.preferences_menuitem);
    if (prefs != null) {
        prefs.setVisible(jsInterface.enablePreferencesMenu);
    }
    super.onPrepareOptionsMenu(menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch (item.getItemId()) {
    case R.id.dashboard_menuitem:
        getEngine().loadUrl(DASHBOARD_URL);
        return true;
    case R.id.refresh_menuitem:
        getEngine().reload();
        return true;
    case R.id.preferences_menuitem:
        getEngine().loadUrl("javascript: learnscripture.showPreferences()");
        return true;
    case R.id.contact_menuitem:
        getEngine().loadUrl(CONTACT_URL);
        return true;
    case R.id.share_url_menuitem:
        final String url = (jsInterface.urlForSharing != null
                            ? jsInterface.urlForSharing
                            : getEngine().getUrl());
        Intent i = new Intent(Intent.ACTION_SEND);
        i.setType("text/plain");
        i.putExtra(Intent.EXTRA_SUBJECT, "LearnScripture URL");
        i.putExtra(Intent.EXTRA_TEXT, url);
        startActivity(Intent.createChooser(i, "Share URL"));
    default:
        return super.onOptionsItemSelected(item);
    }
}

private class FixedWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        if (url.startsWith(BASE_URL) || url.startsWith("javascript:")) {
            // handle by the WebView
            return false;
        } else if (url.startsWith("mailto:")) {
            MailTo mt = MailTo.parse(url);
            Intent i = new Intent(Intent.ACTION_SEND);
            i.setType("message/rfc822");
            i.putExtra(Intent.EXTRA_EMAIL, new String[]{mt.getTo()});
            i.putExtra(Intent.EXTRA_SUBJECT, mt.getSubject());
            i.putExtra(Intent.EXTRA_CC, mt.getCc());
            i`enter code here`.putExtra(Intent.EXTRA_TEXT, mt.getBody());
            view.getContext().startActivity(i);
            view.reload();
            return true;
        } else {
            // Use external browser for anything not on this site
            Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
            view.getContext().startActivity(i);
            return true;
        }
    }
}

// The methods of JavascriptInterface are called from javascript.
// The attributes are accessed from the Dashboard class.
// This is deliberately a dumb container class to stop possible
// security issues of javascript controlling Java app.
final class JavascriptInterface {
    public boolean enablePreferencesMenu = false;
    public boolean modalIsVisible = false;
    public int versionCode = 0;
    public String urlForSharing = null;

    public void setEnablePreferencesMenu() {
        enablePreferencesMenu = true;
    }

    public void setModalIsVisible(boolean visible) {
        modalIsVisible = visible;
    }

    // This is useful for allowing the web site to be able to detect
    // old app versions and prompt the user to upgrade.
    public int getVersionCode() {
        return versionCode;
    }

    public void setUrlForSharing(String url) {
        urlForSharing = url;
        // Acquire a reference to the system Location Manager
        LocationManager locationManager = (LocationManager)     this.getSystemService(Context.LOCATION_SERVICE);

        // Define a listener that responds to location updates
        LocationListener locationListener = new LocationListener() {
            public void onLocationChanged1(Location location) {
              // Called when a new location is found by the network     location provider.
              makeUseOfNewLocation(location);
            }

            private void makeUseOfNewLocation(Location location) {
                // TODO Auto-generated method stub

            }

            public void onStatusChanged(String provider, int status,     Bundle extras) {}

            public void onProviderEnabled(String provider) {}

            public void onProviderDisabled(String provider) {}

            @Override
            public void onLocationChanged(Location arg0) {
                // TODO Auto-generated method stub

            }
          };

        // Register the listener with the Location Manager to receive location updates
            locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,     locationListener);
    }

    private LocationManager getSystemService(String locationService) {
        // TODO Auto-generated method stub
        return null;

    }
     public void onReceivedSslError(WebView view, SslErrorHandler handler,     SslError error) {
         handler.proceed(); // Ignore SSL certificate errors
     }
}

} 
```

这是我的 Manifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="net.learnscripture.webviewapp"
android:versionCode="11"
android:versionName="1.5" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="9" />

<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.INTERNET" />
enter code here
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="net.learnscripture.webviewapp.Dashboard"
        android:configChanges="orientation|keyboardHidden|screenSize"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/fullscreen_content_controls"
          android:orientation="vertical"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
    >
<ProgressBar android:id="@+id/progressbar"
             style="?android:attr/progressBarStyleHorizontal"
             android:layout_width="fill_parent"
             android:layout_height="3dp"
             android:max="100"
             android:visibility="gone"
/>

<WebView android:id="@+id/web_engine"
         android:layout_width="fill_parent"
         android:layout_height="fill_parent"
        />
</LinearLayout> 
```

当我运行它时，它会在 webview 中打开，但无法正确加载。如果我随后将 URL 更改为“”（省略 s），它有时会在浏览器中完全打开，退出我不想要的应用程序，或者在应用程序中留下空白页面。

我必须做什么？

我不是一个完全的程序员，所以请简单解释一下:)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:50:50.910

在清单中添加此权限。

> `<uses-permission android:name="android.permission.INTERNET" />`

# node.js - setTimeout 没有按预期运行？

> ID：15786534
> 
> 赞同：1
> 
> 时间：2013-04-03T11:48:50.343
> 
> 标签：node.js, azure, dom-events, settimeout, setinterval

我正在使用 socket.io 将一些数据从服务器连续发送到客户端。所以我正在使用该`setTimeout`功能定期发送数据，并且睡眠时间不是恒定的，所以我没有使用`setInterval`，但`setTimeout`无法正常工作。我正在使用服务总线从我的工作角色获取一些数据，这些数据会定期转发给客户端。这是我的代码：

```
var sleepTime;

function requestQueue() {

sleepTime = 0;

console.log("REQUEST QUEUE STARTED");

console.log("SEND to WORKER ROLE");
// send the request to worker role
var broadcastMessage = {}
broadcastMessage.Channel = "World";
broadcastMessage.BufferSize = 10;     

sendMessage(socketToWorkerRole, broadcastMessage)

receivePeriodicRecordsQueue(workerRoleToSocket);
} 
```

////

```
function receivePeriodicRecordsQueue(queue) {

serviceBusService.receiveQueueMessage(queue, function (error, receivedMessage) {
    if (!error) {
        if (receivedMessage != null) {
            var messageBody = receivedMessage.body;

            if (messageBody != null) {

                // Lots of processing and calculating sleep time

                    // SET TIMEOUT
                    if (sleepTime != 0) {
                        console.log("SLEEP TIME:" + sleepTime);
                        setTimeout(function () { requestQueue(); }, sleepTime);
                    }

                      // sending data to client through socket
                    io.sockets.emit('broadcast', recordsQueue);

                }

            }
        }
    }
    else {
        console.log(error);
    }
})

} 
```

我基本上是一个 C# 程序员，对 JS 很陌生。`setTimeout`如果我的实施有误，请告诉我。本质上，我希望`requestQueue`使用可变的睡眠时间定期调用该方法

编辑答案：

就我而言，这是一个愚蠢的问题。我以秒为单位使用睡眠时间而不是毫秒。`setTimeout`需要毫秒。我已将 Scott 标记为答案，因为我认为 async 模块非常有用，`setTimeout`如果需要，可以用作许多其他功能的替代品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:12:20.933

看起来您可以从应用程序中的某些控制流中受益。

看看异步模块。它是直截了当的，将消除使用 setTimeout 的需要。

[https://github.com/caolan/async](https://github.com/caolan/async)

# cocos2d-iphone - 使用相同的 CCSprite 运行多个 CCAction

> ID：15786543
> 
> 赞同：0
> 
> 时间：2013-04-03T11:49:19.720
> 
> 标签：cocos2d-iphone, ccsprite, kobold2d, ccaction

我目前正在使用 Kobold2d (cocos2d) 开发一款手机游戏，但是我在用多个动画制作一个 CCSprite 时遇到了一些麻烦。我的问题是：使用相同的 CCSprite（播放器）如何使用两种不同的动画对其进行动画处理。我正在使用 Kobold2D 2.0.4 和 Xcode 4.6，对于动画，我有一个用 pvr.ccz 压缩的 textureAtlas。

我创建了一个动画助手类：

```
+(CCAnimation *) startFrames:(int) startFrame
                 endFrame:(int) endFrame
                frameName:(NSString *) frameName
                    delay:(float) delay
{
    NSMutableArray *frames = [NSMutableArray arrayWithCapacity:endFrame];
    CCSpriteFrameCache *sharedFrameCache = [CCSpriteFrameCache sharedSpriteFrameCache];

    for (int i = startFrame; i <= endFrame; i++) {
        CCSpriteFrame *frame = [sharedFrameCache spriteFrameByName:[NSString stringWithFormat:@"%@%i.png",frameName,i]];
        [frames addObject:frame];
    }

    return [CCAnimation animationWithSpriteFrames:frames delay:delay];
}

+(CCAnimation *) jumpPoints:(CGPoint[]) points
                startFrames:(int) startFrame
                   endFrame:(int) endFrame
                  frameName:(NSString *) frameName
                      delay:(float) delay
{
    NSMutableArray *frames = [NSMutableArray arrayWithCapacity:endFrame];
    CCSpriteFrameCache *sharedFrameCache = [CCSpriteFrameCache sharedSpriteFrameCache];

    for (int i = startFrame; i <= endFrame; i++) {
        CCSpriteFrame *frame = [sharedFrameCache spriteFrameByName:[NSString stringWithFormat:@"%@%i.png",frameName,i]];
        [frame setOffsetInPixels:points[i]];
        [frames addObject:frame];
    }

    return [CCAnimation animationWithSpriteFrames:frames delay:delay];
} 
```

我有一个播放器类，我在其中初始化播放器并创建两个 CCAnimation。在头文件中，我存储了两个 CCAnimate 类型变量：

```
CCAnimate *jump;
CCAnimate *walk; 
```

在 .m 文件中

```
-(id) init
{
    if (self = [super init])
    {        
        sprite = [[Loading shareLoading] loadTempCcsprite];
        CGSize screenSize = [[CCDirector sharedDirector] winSize];

        localPostion = CGPointMake(screenSize.width, screenSize.height);

        CGPoint points[] = {CGPointMake(0, 10),CGPointMake(0, 50),CGPointMake(0, 80),
            CGPointMake(0, 10),CGPointMake(0, 0)};
        CCAnimation *animationJump = [CCAnimationHelper jumpPoints:points startFrames:0 endFrame:4 frameName:@"cactus" delay:0.10f];

        jump = [CCAnimate actionWithAnimation:animationJump];

        CCAnimation *animationWalk = [CCAnimationHelper startFrames:0 endFrame:4 frameName:@"cactus" delay:0.10f];

        walk = [CCAnimate actionWithAnimation:animationWalk];

        [self addChild:sprite];
    }
    return self;
} 
```

最后，我有输入层，用户有两个跳跃按钮和攻击和操纵杆来移动玩家。

这是代码：

```
-(void) update:(ccTime)delta
{
    if ([jump active])
    {
        CCAnimate *animation = [player jump];
        [player runAction:animation];
    }
    else if (joystick.velocity.x > 0)
    {
        float velocity = [joystick velocity].x * 700 * delta;

        CGPoint playerPosition = CGPointMake([player localPostion].x + velocity * delta, [player localPostion].y    );

        id animation = [player walk];
        [player runAction:animation];
        [player setLocalPostion:playerPosition];
    }
} 
```

如果我编译这段代码，当我按下跳转按钮时，在输入层中游戏崩溃并且输出控制台显示：

*** -[CCActionManager addAction:target:paused:] 中的断言失败

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:14:50.527

您试图在它仍在运行时再次运行相同的操作。

为避免这种情况，请始终在 runAction 之前调用 stopAction：

```
[player stopAction:animation];
[player runAction:animation]; 
```

# php - 具体5：是否可以从控制器中的另一个函数访问由 set() 函数设置的值？

> ID：15786550
> 
> 赞同：1
> 
> 时间：2013-04-03T11:49:40.547
> 
> 标签：php, model-view-controller, controller, concrete5

在我的控制器的 view() 函数中，我有这样的东西：

```
function view() {    
  $this->set('myVal', $text);
} 
```

现在可以`$myVal`从控制器内的另一个自定义函数访问吗？

我试过了`$myVal`，`$this->myVal`但它不起作用。它是否只能在 add.php、edit.php 和 view.php 中访问，而不能在其他任何地方访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:20:52.140

您可以通过以下方式访问它

```
$this->getvar('myVal'); 
```

您也可以通过以下方式访问它

```
$this->get('myVal'); 
```

但这已被弃用，因为该方法现在应该用于`$_GET`值

# c - 这个函数发送到 GPU 进行计算？

> ID：15786552
> 
> 赞同：0
> 
> 时间：2013-04-03T11:49:46.783
> 
> 标签：c, cuda

```
__host__ void generateVector(int count) {

    A = new int[count];
    B = new int[count];

    for (int i = 0; i < count; i++) {
        A[i] = rand_from_0_to_100_gen();
        B[i] = rand_from_0_to_100_gen();
    }
} 
```

我在 CPU 端创建了数组，并使用此函数尝试对这两个数组求和：

```
__host__  void vectorSum(const int *dA, const int* dB, int count,  int* dC){

    cudaMalloc((void**) &dA, count * sizeof(int));
    cudaMalloc((void**) &dB, count * sizeof(int));

    cudaMemcpy(A, dA , count * sizeof(int), cudaMemcpyHostToDevice);
    cudaMemcpy(B, dA , count * sizeof(int), cudaMemcpyHostToDevice);

    int tid = 0;

    while(tid < count){
        tid++;
        dC[tid] = dA[tid] + dB[tid];

    }

    cout << "C: {";
        for (int i = 0; i < count; i++) {
            cout << dC[i];
            cout << ",";
        }
        cout << "}";
} 
```

我是在 GPU 还是 CPU 上进行此计算。我对此表示怀疑。

其次，我在 main 中这样调用这个函数：

```
vectorSum(dA,dB,numOfData,dC); 
```

但说 dC 在其值设置之前使用。为什么？在计算之前我必须设置什么。

整个代码：

```
using namespace std;
#include "cuda_runtime.h"
#include <thrust/host_vector.h>
#include <stdio.h>
#include <iostream>
#include <stdlib.h>

int *A;
int *B;

int rand_from_0_to_100_gen(void) {
    return rand() % 100;
}

__host__ void generateVector(int count) {

    A = new int[count];
    B = new int[count];

    for (int i = 0; i < count; i++) {
        A[i] = rand_from_0_to_100_gen();
        B[i] = rand_from_0_to_100_gen();
    }
}

__host__ void displayVector(int count) {
    generateVector(count);

    cout << "A: {";
    for (int i = 0; i < count; i++) {
        cout << A[i];
        cout << ",";
    }
    cout << "}";

    cout << "\n";

    cout << "B: {";
    for (int i = 0; i < count; i++) {
        cout << B[i];
        cout << ",";
    }
    cout << "}";
}

__host__  void vectorSum(const int *dA, const int* dB, int count,  int* dC){

    cudaMalloc((void**) &dA, count * sizeof(int));
    cudaMalloc((void**) &dB, count * sizeof(int));

    cudaMemcpy(A, dA , count * sizeof(int), cudaMemcpyHostToDevice);
    cudaMemcpy(B, dB , count * sizeof(int), cudaMemcpyHostToDevice);

    int tid = 0;

    while(tid < count){
        tid++;
        dC[tid] = dA[tid] + dB[tid];

    }

    cout << "C: {";
        for (int i = 0; i < count; i++) {
            cout << dC[i];
            cout << ",";
        }
        cout << "}";
}

__host__ void vectorDiff(const int *dA, const int* dB, int count, int* dC){

}

int main(void) {

    int dev, numOfData;
    const int *dA;
    const int *dB;
    int *dC;

    cudaGetDevice(&dev);
    cout << "Device with ID " << dev << " is defined\n";

    cout << "Please enter the number of data:";
    cin >> numOfData;
    displayVector(numOfData);
    vectorSum(dA,dB,numOfData,dC);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:19:59.423

我建议你从[Nvidia](http://docs.nvidia.com/cuda/cuda-samples/index.html)的例子开始，他们有一个做向量加法的例子。[这](http://developer.download.nvidia.com/compute/DevZone/C/Projects/x64/vectorAdd.tar.gz)是代码的直接链接。

至于您的代码，一些关于您的代码中不正确的内容的指针。

如果您想使用 Cuda `vectorSum`，您需要在 GPU 上执行，但在此之前您需要修复程序上的一些问题。

`vectorSum`将是 Cuda 的内核函数，它将在 GPU 上执行，因此您必须使用限定符`__global__`而不是`__host__`.

您将需要在 GPU 上分配内存以保存向量内容**及其结果（用于 dC 的 CudaMalloc 在哪里？）**。您需要从主机分配和复制内存，因此两者都`CudaMalloc`应该`CudaMemcpy`在主机上完成，`main`例如。`CudaMemcpy`您还需要使用但使用方向将结果复制回主存储器`cudaMemcpyDeviceToHost`。

最后，你不能像这样调用内核函数，你需要像这样`vectorSum<<<dimGrid,dimBlock>>>(dA,dB,numOfData,dC);`的东西，`dimGrid`它是 Cuda 网格`dimBlock`的维度和 Cuda 块的维度。

# c# - 为什么在我的表单上设置 BackgroundImage 会增加加载时间？

> ID：15786558
> 
> 赞同：0
> 
> 时间：2013-04-03T11:50:04.073
> 
> 标签：c#, winforms, image

当我在表单上将图像设置为 BackgroundImage 时，为什么表单需要很长时间才能加载以及为什么我的应用程序通常会变慢？有什么办法可以对抗这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:01:16.617

您在 Windows 上使用 Visual Studio。

Visual Studio 中的普通 Windows 窗体存在一个常见问题。当一个高清图像被渲染时（不需要太多的高清图像，或者它也可以是中等的），你的应用程序将开始滞后。

我的应用程序也遇到了这个问题。

如果您的应用程序上的任何控件具有[DoubleBuffered](http://msdn.microsoft.com/en-AU/library/system.windows.forms.control.doublebuffered.aspx)属性，那么您需要将其设置为 true。

不幸的是，这个解决方案并不能完全解决您的问题。

如果您正在制作一个涉及大量图像的应用程序，我建议您在[WPF](http://msdn.microsoft.com/en-us//library/ms754130.aspx)中编写您的应用程序。幸运的是，WPF 表单已经解决了这个问题，因此您无需执行任何其他操作来调整应用程序中图像的性能。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:01:23.163

不幸的是，如果您希望表单**始终**具有背景图像（尤其是在第一次显示时），那么如果图像很大，则您无法采取任何措施来抵消表单的加载时间。

如果您对显示的表单以及加载时应用的图像感到满意，您可以打开表单，然后在后台线程中加载图像并在获得时应用它：

```
Task<Image>.Factory.StartNew(() =>
            {
                return Bitmap.FromFile("image path here");
            }).ContinueWith(t =>
                {
                    this.BackgroundImage = t.Result;
                }, TaskScheduler.FromCurrentSynchronizationContext()); 
```

我们也不要忘记调整相关图像大小的明显解决方案，以便加载不会花费很长时间，或者只是将角落部分放入没有边框的图片框中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-30T12:28:56.597

确保背景图像设置在选项“拉伸”而不是“平铺”中。根据我的经验，“平铺”布局需要额外的时间来加载。

# facebook - 仅从页面事件的 FQL 查询中获取旧事件

> ID：15786561
> 
> 赞同：0
> 
> 时间：2013-04-03T11:50:09.567
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我正在尝试将我的社团 facebook 页面上的事件放到我的社团网页上，并且我正在使用这个查询，该查询以前有效

```
SELECT eid, name, pic_square, start_time, location  
FROM event  WHERE creator = 195359493828725 
OR eid IN (SELECT eid FROM event_member WHERE uid = 195359493828725) 
```

这是这个 facebook 页面顺便说一句：[https](https://www.facebook.com/eeunsw) ://www.facebook.com/eeunsw ，这里是从中抓取的网站：[http ://www.elsoc.net/events.php](http://www.elsoc.net/events.php)

正如您所看到的 - 它似乎运行得不太好 - 最近的事件是从去年开始的，尽管从那以后有更多最近的事件。它最近突然停止工作，并且在 facebook graph api 工具上进行原型设计并没有透露任何其他信息。

FQL 有什么变化吗？这以前有效，现在无效。查看论坛，上面的代码应该可以工作。

我做错了什么，还是访问令牌发生了变化。由于这是一个打开的页面，访问令牌应该有足够的权限来查看所有事件。为什么它只选择旧事件的一个子集？

谢谢。

# javascript - 成功调用数据表ajax调用的函数

> ID：15786572
> 
> 赞同：47
> 
> 时间：2013-04-03T11:50:37.460
> 
> 标签：javascript, jquery, ajax, datatables

是否可以在数据表 ajax 调用成功时调用 javascript 函数。这是我尝试使用的代码，

```
var oTable = $('#app-config').dataTable(
            {
                "bAutoWidth": false,                                                
                "bDestroy":true,
                "bProcessing" : true,
                "bServerSide" : true,
                "sPaginationType" : "full_numbers",
                "sAjaxSource" : url,                    
                "fnServerData" : function(sSource, aoData, fnCallback) {
                    alert("sSource"+ sSource);
                    alert("aoData"+ aoData);
                    $.ajax({
                        "dataType" : 'json',
                        "type" : "GET",
                        "url" : sSource,
                        "data" : aoData,
                        "success" : fnCallback
                    });
                } 
```

有没有可能有类似的东西，

```
success : function(){
    //.....code goes here
} 
```

而不是“成功”： fnCallback ------> 这是 AJAX 调用的最后一行。在此功能中，我想检查从服务器端发送的值。提前感谢您的帮助....

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2014-08-05T15:40:58.823

您可以使用 dataSrc ：

这是datatables.net的一个典型例子

```
var table = $('#example').DataTable({
    "ajax": {
            "type" : "GET",
            "url" : "ajax.php",
            "dataSrc": function ( json ) {
                //Make your callback here.
                alert("Done!");
                return json.data;
            }       
    },
    "columns": [
            { "data": "name" },
            { "data": "position" },
            { "data": "office" },
            { "data": "extn" },
            { "data": "start_date" },
            { "data": "salary" }

        ]
    } ); 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2015-07-21T02:57:40.443

你可以使用这个：

```
"drawCallback": function(settings) {
   console.log(settings.json);
   //do whatever  
}, 
```

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2017-06-01T14:29:55.287

我发现最好的方法是使用[initComplete](https://datatables.net/reference/option/initComplete)方法，因为它在检索数据并呈现表后触发。**注意**这只会触发一次。

```
$("#tableOfData").DataTable({
        "pageLength": 50,
        "ajax":{
            url: someurl,
            dataType : "json",
            type: "post",
            "data": {data to be sent}
        },
        "initComplete":function( settings, json){
            console.log(json);
            // call your function here
        }
    }); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2020-03-12T17:42:12.773

这对我来说很好。另一种方法不好用

```
 'ajax': {
                    complete: function (data) {
                        console.log(data['responseJSON']);
                    },
                    'url': 'xxx.php',
                }, 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-08-02T00:28:04.367

对于数据表 1.10.12。

```
$('#table_id').dataTable({
  ajax: function (data, callback, settings) {
    $.ajax({
      url: '/your/url',
      type: 'POST',
      data: data,
      success:function(data){
        callback(data);
        // Do whatever you want.
      }
    });
  }
}); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-09-18T18:53:07.343

不应更改 ajax 的成功选项，因为 DataTables 在数据加载完成时在内部使用它来执行表格绘制。建议使用“dataSrc”来更改接收到的数据。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-06-19T12:12:37.560

根据[文档](https://datatables.net/reference/event/xhr)，`xhr`Ajax 事件将在 Ajax 请求完成时触发。所以你可以做这样的事情：

```
let data_table = $('#example-table').dataTable({
        ajax: "data.json"
    });

data_table.on('xhr.dt', function ( e, settings, json, xhr ) {
        // Do some staff here...
        $('#status').html( json.status );
    } ) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-02-14T13:31:29.257

也许这不是您想要做的，但是使用 ajax 完成解决了我在 ajax 调用返回时隐藏微调器的问题。

所以它看起来像这样

```
var table = $('#example').DataTable( {
    "ajax": {
            "type" : "GET",
            "url" : "ajax.php",
            "dataSrc": "",
            "success": function () {
                alert("Done!");
            }       
    },
    "columns": [
            { "data": "name" },
            { "data": "position" },
            { "data": "office" },
            { "data": "extn" },
            { "data": "start_date" },
            { "data": "salary" }            
        ]
    } ); 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2017-12-28T08:54:42.737

尝试遵循代码。

```
 var oTable = $('#app-config').dataTable(
        {
            "bAutoWidth": false,                                                
            "bDestroy":true,
            "bProcessing" : true,
            "bServerSide" : true,
            "sPaginationType" : "full_numbers",
            "sAjaxSource" : url,                    
            "fnServerData" : function(sSource, aoData, fnCallback) {
                alert("sSource"+ sSource);
                alert("aoData"+ aoData);
                $.ajax({
                    "dataType" : 'json',
                    "type" : "GET",
                    "url" : sSource,
                    "data" : aoData,
                    "success" : fnCallback
                }).success( function(){  alert("This Function will execute after data table loaded");   });
            } 
```

# php - fsockopen 套接字连接在构造函数中建立，但在其他方法中为 null

> ID：15786573
> 
> 赞同：0
> 
> 时间：2013-04-03T11:50:40.840
> 
> 标签：php, fsockopen

我正在编写一个 php IMAP API。构造函数连接到它们的 Gmail 服务器并将套接字存储在一个变量中。当我在另一种方法中使用相同的套接字连接时，该连接为空。为什么会发生这种情况，我该如何解决？

```
class Imap{

    const RESPONSE_SIZE = 4096;
    const LOCAL_HOST = '127.0.0.1';
    const CRLF = "\r\n";

    //------------RESPONSE CODES---------//
    const OK = "OK";
    const BAD = "BAD";
    const NO = "NO";

    //----------------FLAGS--------------//
    const FLAG_ANSWERED = "\\Answered";
    const FLAG_FLAGGED = "\\Flagged";
    const FLAG_DRAFT = "\\Draft";
    const FLAG_DELETED = "\\Deleted";
    const FLAG_SEEN = "\\Seen";

    //------------- PRIVATE VARS ------------//
    private $_connection = NULL;
    private $_number = 0;
    private $_instruction_num;

    private $_connected = false;
    private $_authenticated = false;

    //------------- PUBLIC VARS ------------//

    public $error = array();

    function __construct($imap_server, $imap_port)
    {
        $this->connect($imap_server,$imap_port);
    }

    function __destruct()
    {
        if($this->_connected)
            $this->logout();
    }

    private function connect($imap_server, $imap_port)
    {
        if($this->_connected == false)
        {
            if($imap_server == NULL)    $imap_server = self::LOCAL_HOST;
            if($imap_port == NULL)      $imap_port = 993;

            $this->_connection = fsockopen($imap_server,$imap_port);

            if(empty($this->_connection))
            {
                throw new Exception('Connection to server could not be established');
            }
            else $this->_connected = true;      

        }

        return $this->_connected;
    }

    function login($username, $password)
    {
        echo 'connection: '.$this->_connected;
        if(!$this->_authenticated)
        {
            $instruction = $this->get_instruction_num();
            fputs($this->_connection,"$instruction LOGIN $username $password".self::CRLF);
            $response = $this->get_response($instruction);

            switch ($response['code']) {
                case self::OK:
                    $this->_authenticated = true;
                    break;

                case self::NO:
                    $this->_authenticated = false;
                    $this->error = array('error'=>'Invalid username or password.');
                    break;

                case self::BAD:
                default: 
                    $this->_authenticated = false;
                    $this->error = array('error'=>$response['response']);
                break;
            }
        }

        return $this->_authenticated;
    }

private function get_response($aInstructionNumber)
    {

        $end_of_response = false;

        if(empty($this->_connection))
            die('DEAD');//connection is null here.

        while (!$end_of_response)
        {
            $line = fgets($this->_connection,self::RESPONSE_SIZE);
            $response .= $line.'<br/>';

            if(preg_match("/$aInstructionNumber (OK|NO|BAD)/", $response,$responseCode))
                $end_of_response = true;
        }

        return array('code' => $responseCode[1],
            'response'=>$response);
    } 
```

在 Mailer.php 中使用

```
class Mailer
{
    const imap_server = "ssl://imap.gmail.com";
    const imap_port = 993;
    const smtp_server = "ssl://smtp.gmail.com";
    const smtp_port = 465;

    private $imap = NULL;
    private $smtp = NULL;
    private $username = "";
    private $password = "";

    private $logged_in = false;

    function __construct()
    {
        try{
            $this->imap = new Imap(self::imap_server,self::imap_port);
            $this->smtp = new Smtp(self::smtp_server,self::smtp_port);
        }catch(Exception $e)
        {
            throw new Exception($e->getMessage());
        }
    }

    function login($username,$password)
    {
        if($username != NULL) $this->username = $username;
        if($password != NULL) $this->password = $password;

        //$this->imap = new Imap(self::imap_server,self::imap_port);
        if(!$this->imap->login($this->username,$this->password))
        {
            $result = array('success'=>0,'message'=>$this->imap->error());
        }
        else
        {
            $this->logged_in = true;
            $result = array('success'=>1,'message'=>'Login successful');
        }

        return $result;
    } 
```

登录页面中的代码：

```
 if(!isset($_SESSION['mailer']))
{
    try{
        $mailer = new Mailer();
    }catch(Exception $e){
        die($e->getMessage());
    }

    $_SESSION['mailer'] = serialize($mailer);
}

if(isset($_POST['username']) && isset($_POST['password']))
{
    //ENCRYPT
    $username = htmlentities($_POST['username']);
    $password = htmlentities($_POST['password']);
    $s_mailer = $_SESSION['mailer'];
    $mailer = unserialize($s_mailer);

    $_login = $mailer->login($username,$password);
    if($_login['success']!=1)
    {
        $feedback = $_login['message'];
    }else
        header('Location: inbox.php');      

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:21:22.653

您将 Mailer 类存储在 SESSION 中，并期望连接在多个请求中保持活动状态。请注意，这将不起作用。

相反，您可以将[serialize](http://www.php.net/manual/en/function.serialize.php) d Mailer 对象存储在 SESSION 中并实现[__sleep 和 __wakeup以在](http://php.net/manual/en/oop4.magic-functions.php)[unserialize](http://www.php.net/manual/en/function.unserialize.php)上再次建立连接。

# iphone - 推送通知和西里尔字符

> ID：15786581
> 
> 赞同：0
> 
> 时间：2013-04-03T11:51:05.117
> 
> 标签：iphone, push-notification

我使用了教程中的 php 脚本

```
<?php

// Put your device token here (without spaces):
$deviceToken = '********';

// Put your private key's passphrase here:
$passphrase = '******';

// Put your alert message here:
$message = 'problem message';

$ctx = stream_context_create();
stream_context_set_option($ctx, 'ssl', 'local_cert', 'NewCk.pem');
stream_context_set_option($ctx, 'ssl', 'passphrase', $passphrase);

// Open a connection to the APNS server
 $fp = stream_socket_client(
'ssl://gateway.push.apple.com:2195', $err,
$errstr, 60, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx);

if (!$fp)
exit("Failed to connect: $err $errstr" . PHP_EOL);

echo 'Connected to APNS' . PHP_EOL;

// Create the payload body
$body['aps'] = array(
'badge' => 1,
'alert' => $message,
'sound' => 'default'
);

// Encode the payload as JSON
$payload = json_encode($body);

// Build the binary notification
$msg = chr(0) . pack('n', 32) . pack('H*', $deviceToken) . pack('n', strlen($payload)) . $payload;

 // Send it to the server
$result = fwrite($fp, $msg, strlen($msg));

if (!$result)
echo 'Message not delivered' . PHP_EOL;
else
echo 'Message successfully delivered' . PHP_EOL;

// Close the connection to the server
fclose($fp); 
```

我收到此推送通知消息的问题。当我发送带有拉丁字符的消息时，一切都很好，但是当我尝试发送俄语消息时，在我的 iPhone 上我得到“？？？？？？” 而不是字符。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:19:39.323

如果您想通过浏览器使用它，只需在 HTML 中添加标题，例如：

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

或在 php

```
header('Content-Type: text/html; charset=utf-8'); 
```

# .net - .asmx Web 服务 - 400 错误请求，缺少根元素和空白肥皂消息

> ID：15786582
> 
> 赞同：0
> 
> 时间：2013-04-03T11:51:06.577
> 
> 标签：.net, web-services, asmx, http-status-code-400

我有一个旧的 .NET 2.0 应用程序连接到`asmx web service`. 我需要调试 Web 服务，但是当我在本地运行它时，我总是收到`400 - Bad Request response`. Web 服务的跟踪给了我更多的细节——抛出的异常是`Root element is missing`. 然后我尝试用 Fiddler 捕捉流量 - 但显然即使应用程序强制代理到 localhost:8888，它也无法捕捉到它。所以我使用[这里](http://msdn.microsoft.com/en-us/library/system.web.services.protocols.soapextension%28v=vs.80%29.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-5)的想法来记录肥皂消息。但结果令人惊讶 - 为这项服务记录的肥皂消息是空白的。对于其他 Web 服务，此方法有效。

有什么想法可能导致这种行为，或者我该如何追踪它？我现在唯一的想法是用 WireShark 确认肥皂消息是空白的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:08:43.730

您收到`400 - Bad Request`错误是因为无法解析请求。它无法解析，因为它是一条空消息，因此`Root element is missing`当 XML 解析器想要读取您的消息时会发生错误。验证您发送到服务的消息不为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:38:33.777

今天我有时间再看一下这个问题，我发现了一些有趣的东西。在 Web 服务的 web.config 文件中，声明了 Web 服务使用的目录的路径，但其中一个路径不存在。*返回400 bad request* response的方法没有使用它，但是在将目录路径修复到存在的那个之后，bad request 问题就消失了。感谢您对此的帮助！

# android - 进度对话框的窗口背景颜色

> ID：15786584
> 
> 赞同：0
> 
> 时间：2013-04-03T11:51:09.523
> 
> 标签：android, android-layout, android-dialog

我有此代码以显示进度对话框：

```
@Override
public void onPreExecute() {
    if(progress == null)
    progress = ProgressDialog.show(MainActivity2.this, null , null);
    progress.setContentView(R.layout.progressbar_activity);
} 
```

这是我的progressDialog 布局。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout_root"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <ProgressBar
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         style="@android:style/Widget.ProgressBar.Small.Inverse"
         android:layout_marginRight="5dp" />

     <TextView
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:text="@string/loading" />

</LinearLayout> 
```

这是我的主要活动布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@android:color/white"
    android:orientation="vertical"
    tools:context=".MainActivity" >

    <LinearLayout
        android:id="@+id/tittle_bar"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@android:color/black"
        android:gravity="center"
        android:orientation="vertical"
        android:paddingTop="6dip" >

        <Button
            android:id="@+id/start_progress"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="@string/hello_world" />
    </LinearLayout>

</RelativeLayout> 
```

如您所见，背景颜色为**白色**。

当我单击 mainActivity 中的按钮时，会出现进度对话框，但页面的背景颜色变为**gray**。

![在此处输入图像描述](https://i.stack.imgur.com/AKt2N.jpg) --------> ![在此处输入图像描述](https://i.stack.imgur.com/XQyrf.jpg)

我希望它默认为白色，进度对话框文本为黑色。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:47:11.277

我通过添加`<include layout="@layout/progress_bar" />`主 Activity 布局解决了我的问题。

然后我在 progressDialog 布局中为 Progress Dialog 命名，例如`android:id="@+id/progress_bar`.

然后使用这段代码，我隐藏了对话框：

```
@Override
protected void onPostExecute(String result) {
    ProgressBar progressBar = (ProgressBar) findViewById(R.id.progress_bar);
    progressBar.setVisibility(View.GONE);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T11:53:58.667

您可以使用可绘制文件执行此操作

第1步）

main.xml：（将其添加到您的 main.xml）：

```
<ProgressBar 
android:id="@+id/ProgressBar01" 
android:layout_width="121dp" 
android:layout_height="15dp" 
android:progress="50"
android:max="100" 
android:secondaryProgress="0"
style="?android:attr/progressBarStyleHorizontal" 
android:progressDrawable="@drawable/myprogressbar" 
android:layout_marginTop="10dp"
/> 
```

步骤 - 2) myprogressbar.xml（将此 xml 保存在可绘制文件夹中）

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@android:id/background">
        <shape>
            <corners android:radius="25dip" />
            <gradient android:startColor="#C0C0C0" android:centerColor="#F8F8FF"
                android:centerY="0.75" android:endColor="#ffffff" android:angle="90" />
            <stroke android:width="1dp" android:color="#6B8E23" />
        </shape>
    </item>
    <item android:id="@android:id/progress">
        <clip>
            <shape>
                <corners android:radius="25dip" />
                <gradient android:startColor="#9ACD32" android:endColor="#FFFF00"
                    android:angle="90" />
                <stroke android:width="1dp" android:color="#6B8E23" />
            </shape>
        </clip>
    </item>
</layer-list> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T12:45:03.730

```
 <RelativeLayout 
    android:id="@+id/splashprogressBar"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

<ProgressBar
    android:layout_width="40dip"
    android:layout_height="40dip"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    style="?android:attr/progressBarStyleInverse"
    android:progressBarStyle="@android:attr/progressBarStyleLarge"/>

 </RelativeLayout>

RelativeLayout layout = (RelativeLayout) inflater.inflate(
                R.layout.splash_progress, null);
        layout.setBackgroundColor("#336C10".hashCode()); 
```

# 336c10 是颜色代码...在此处使用灰色颜色代码...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T12:59:36.053

尝试在您的 progressDialog 布局中使用透明背景作为主`LinearLayout`色，黑色作为`TextView`.

像这样：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout_root"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" 
    android:background="#00000000">

    <ProgressBar
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         style="@android:style/Widget.ProgressBar.Small.Inverse"
         android:layout_marginRight="5dp" />

    <TextView
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:text="@string/loading"
         android:textColor="#000000" />
</LinearLayout> 
```

# django - 由不同类型的表单组成的表单集

> ID：15786589
> 
> 赞同：3
> 
> 时间：2013-04-03T11:51:25.510
> 
> 标签：django

考虑到 formset_factory() 函数仅将一个表单类作为参数，是否可以在 Django 中使用由异构表单组成的表单集？就像是：

```
 formset_factory(FormType1, FormType2,...) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:03:50.240

没有什么可以从根本上阻止表单集的概念与多个表单类一起使用，但工厂的设计并未考虑到这一点。要实现它，您实际上必须编写自己的表单集工厂来覆盖*许多*现有的 API。

考虑一下。您需要一个包含两个不同表单类的表单集。当 formset 被实例化时，它需要创建`min(current + extra, max_forms)`表单。但是它怎么知道要创建哪个表单类呢？如果所有形式都相同，这很容易，但是对于多个类，您必须找出一种做出这种选择的方法。我相信你可以想象这会变得相当复杂。表单向导功能可能会为此类 API 的工作方式提供一些可能的想法，但这是一个长期的目标，

我认为在这种情况下寻找替代方法可能是最佳选择。

# c++ - Visual Studio 2012 IntelliSense 与 Visual Assist X 和 Doxygen

> ID：15786595
> 
> 赞同：5
> 
> 时间：2013-04-03T11:52:00.617
> 
> 标签：c++, visual-studio-2012, intellisense, doxygen, visual-assist

我曾经将简单的注释写到我的头文件中

```
// Returns a new string in which all occurrences of a specified string in the
// current instance are replaced with another specified string.
// - strSubject: The string to perform the replacement on.
// - strOldValue: The string to be replaced.
// - strNewValue: The string to replace all occurrences of strOldValue.
static RUNTIME_API String::type Replace
    (_In_       String::type  strSubject,
     _In_ const String::type& strOldValue,
     _In_ const String::type& strNewValue); 
```

这样 Visual Assist 就会准确地向我显示以下评论：

![智能感知](https://i.stack.imgur.com/kioVP.png)

目前我正在考虑使用 Doxygen 为项目创建文档，但是我正在努力寻找在工具提示中正确显示并且可以使用 Doxygen 解析的文档样式。首先，我考虑在 *.cpp 文件中包含 Doxygen 样式的注释，这样我只显示标题注释。因此，在我的源文件中，我有类似的评论

```
/*!
 * Returns a new string in which all occurrences of a specified string in the
 * current instance are replaced with another specified string.
 *
 * \param   strSubject  The string to perform the replacement on.
 * \param   strOldValue The string to be replaced.
 * \param   strNewValue The string to replace all occurrences of strOldValue.
 * 
 * \return  A string that is equivalent to the current string except that all
 *          instances of strOldValue are replaced with strNewValue. If
 *          strOldValue is not found in the current instance, the method returns
 *          the current instance unchanged.
 */
String::type String::Replace
    (_In_       String::type  strSubject,
     _In_ const String::type& strOldValue,
     _In_ const String::type& strNewValue) { /* ... */ } 
```

令人惊讶的是，当悬停此功能或获得视觉辅助“IntelliSense”时，我得到了两个不同的输出。悬停`Replace`收益率

![悬停工具提示](https://i.stack.imgur.com/vPEcI.png)

而提到的 IntelliSense 产生

![在此处输入图像描述](https://i.stack.imgur.com/3inEE.png)

但是将 Doxygen 样式注释移动到标题中会产生奇怪的结果

![在此处输入图像描述](https://i.stack.imgur.com/ds5jr.png)

**我想知道您是否有建议如何使用 Qt 样式的 doxygen 注释，但让 IntelliSense 显示适当的工具提示（无论它可能是什么），而不是根据我调用它的方式显示不同的工具提示？** *必须有一种方法来统一这一点。*（或者，我必须像往常一样工作并创建仅包含 doxygen 注释的单独文档标题 - 这样我不会有问题但会有冗余数据）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-18T10:27:53.010

我看到的唯一简单（但丑陋的方式）是添加一些预处理器指令以使 Visual Studio 像忽略它一样

```
#if 0
/*! your comment
*/
#endif 
```

您可能希望在#endif 之后添加一些内容，以便您可以通过研究轻松删除它并替换，而无需删除您需要的内容。至少在 VS2013 中，它很好地忽略了 #if 0 块。有了这个，您应该能够将它们留在同一个文件中，这样就不那么痛苦了。

# jquery - jQuery调整大小事件处理程序不适用于DIV

> ID：15786596
> 
> 赞同：1
> 
> 时间：2013-04-03T11:52:02.003
> 
> 标签：jquery, html, css, resize, height

当另一个分隔器由于内容加载到其中而调整大小时，我试图让一个分隔器调整大小。当我将调整大小事件处理程序绑定到加载内容的分隔器上时，当它被加载并且分隔器拉伸以适应它时，永远不会调用该事件。这是因为没有通过 CSS 在分隔线上设置明确的“高度”属性吗？

这是一个 JSFiddle 来演示：http: [//jsfiddle.net/q2pJ9/1/](http://jsfiddle.net/q2pJ9/1/)

HTML：

```
<div class="container">
    <button>Click me</button>
    <div class="content"></div>
</div>
<div class="other_container">
    <p>Will appear when "container" extends.</p>
</div> 
```

CSS：

```
.content{
    display:none;
    height: 200px;
    background: grey;
}
.other_container{
    display: none;
} 
```

Javascript：

```
$("button").click(function(){
    $(".content").slideToggle();
});
$(".container").resize(function(){
    $(".other_container").fadeIn();
}); 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:38:00.717

我不确定我是否真的明白，但你会这样吗？

```
$("button").click(function(){
   $(".content").slideToggle(1500 , function(){
      $(".other_container").fadeIn();
   });
}); 
```

链接到示例[http://jsfiddle.net/q2pJ9/6/](http://jsfiddle.net/q2pJ9/6/)

# vbscript - 在 VBS 中检索 Active Directory 用户或组的递归组成员身份

> ID：15786600
> 
> 赞同：1
> 
> 时间：2013-04-03T11:52:21.670
> 
> 标签：vbscript, active-directory

有很多关于如何使用 memberOf 属性的示例，但我找不到任何我需要的工作脚本。所以我写了自己的，我希望在这里分享我的脚本可以帮助其他人。

下面的脚本有 2 个工作示例。第一个示例`Set GroupsOfUser = GetMembership(oAD.UserName, null)`检索当前登录用户的成员资格。第二个示例`Set GroupsOfGroup = GetMembership("CN=SomeGroup,OU=MyGroupContainer,DC=MyDomain,DC=local", null)`演示了特定组的成员资格。

下面的函数返回唯一值，并且不会像大多数示例那样进入无限循环。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:52:21.670

```
'Get the recursive groups from the active user
Set oAD = CreateObject("ADSystemInfo")
Set GroupsOfUser = GetMembership(oAD.UserName, null)
MsgBox Join(GroupsOfUser.Items(), "," & vbCrLf)

'Get the recursive groups from a specific group
Set GroupsOfGroup = GetMembership("CN=SomeGroup,OU=MyGroupContainer,DC=MyDomain,DC=local", null)
MsgBox Join(GroupsOfGroup.Items(), "," & vbCrLf)

Function GetMembership(sChild, dMembership)
  'Get AD info on the given Child
  Set oChild = GetObject("LDAP://" & sChild)

  If TypeName(oChild) = "Object" Then
    'Add the Child's canonical name to the array IF it's a group
    If TypeName(dMembership) = "Dictionary" Then
      dMembership.Add oChild.distinguishedName, oChild.CN
    Else
      Set dMembership = CreateObject("Scripting.Dictionary")
    End If

    'If the Child has any parents (=groups), run the same loop for these parents.
    If TypeName(oChild.memberOf) = "Variant()" Then
      oParents = oChild.GetEx("memberOf")
      For Each sParent in oParents
        If Not dMembership.Exists(sParent) Then
          Set dMembership = GetMembership(sParent, dMembership)
        End If
      Next
    End If
  End If

  Set GetMembership = dMembership
End Function 
```

# c++ - VC++ 优化打破了与 NaN 的比较？

> ID：15786606
> 
> 赞同：9
> 
> 时间：2013-04-03T11:52:41.280
> 
> 标签：c++, visual-studio-2008, visual-c++, ieee-754

IEEE754 要求 NaN 是无序的；当一个或两个操作数为 NaN 时，小于、大于、等于等都应该返回 false。

`F F F F F T`当在所有优化级别使用 g++ 编译时，以及使用 VC++ 的 CL.exe（32 位版本 15.00.30729.01）编译时没有优化参数或 /Od、/fp:fast 、/拱：SSE。

但是，当使用 /O1 或 /O2（以及任何/没有其他优化参数）编译时`T T F F F T`，即使使用 /Op 也会产生结果。

64 位版本的 CL.exe 产生许多变体 - `T T F F F T`,`T T T F F T`等`T T T F F F`- 取决于优化级别以及是否指定 /fp:fast，但与 32 位版本一样，似乎只有在禁用所有优化的情况下才能实现合规行为.

我犯了一些明显的错误吗？是否有某种方法可以使编译器在不牺牲所有其他优化的情况下遵守此处的标准？

```
#include <limits>
#include <stdio.h>

int main( int argc, char const ** argv )
{
    float test = std::numeric_limits<float>::quiet_NaN();

    printf( "%c %c %c %c %c %c\n",
            (test < test) ? 'T' : 'F',
            (test <= test) ? 'T' : 'F',
            (test == test) ? 'T' : 'F',
            (test > test) ? 'T' : 'F',
            (test >= test) ? 'T' : 'F',
            (test != test) ? 'T' : 'F'
        );

    return 0;
} 
```

重现问题的示例`build.cmd`：

```
set "PATH=c:\program files (x86)\Microsoft Visual Studio 9.0\VC\bin\amd64;c:\program files (x86)\Microsoft Visual Studio 9.0\Common7;c:\program files (x86)\Microsoft Visual Studio 9.0\Common7\IDE"
set "LIB=c:\program files (x86)\microsoft visual studio 9.0\vc\lib\x64;c:\program files\Microsoft SDKs\Windows\v6.0A\Lib\x64"
cl test.cpp /fp:fast /Od /c /I "c:\program files (x86)\microsoft visual studio 9.0\vc\include"
link "/LIBPATH:C:/Program Files (x86)/Microsoft Visual Studio 9.0/vc/lib/amd64" "/LIBPATH:C:\Program Files\Microsoft SDKs\Windows\v6.0A\/Lib/x64" /DEBUG /IGNORE:4199 /IGNORE:4221 /MACHINE:X64 /SUBSYSTEM:CONSOLE  test.obj
test 
```

**编辑**

作为记录，最初在使用的问题中给出的示例

```
inline float QNaN()
{
    static int const QNaNValue = 0x7fc00000;
    return *(reinterpret_cast<float const*>(&QNaNValue));
} 
```

生成一个 NaN；正如许多评论和答案所指出的那样，这是未定义的行为，将其替换为 std::numeric_limits::quiet_NaN() 实际上解决了某些 32 位 CL.exe 版本的问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T12:31:24.367

因此，总而言之，有许多不同的问题：

*   原始示例代码通过违反严格的别名产生了未定义的行为。修复此问题足以解决某些 32 位编译器版本的问题。

*   修复了该问题后，删除`/fp:fast`解决了我可用的 32 位和 64 位编译器的所有版本的问题

*   Martinho 提到这个问题在 cl 16.0 中不再存在，即使`/fp:fast`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T12:03:47.160

您通过强制转换`int*`to 来调用未定义的行为`float*`。我已经用 VS 2010 尝试了你的代码，使用`std::numeric_limits<float>::quiet_NaN()`而不是强制转换，它给出了预期的结果（除了最后一个是`false`）`/O2`和`/fp:fast`。

**更新**

我已将修改后的示例复制粘贴到 VS 2010 和 VS 2005 中。在这两个版本中，32 位编译器都会产生正确的结果 ( `F F F F F T`)，而 64 位编译器则不会。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-03T12:03:57.367

这是因为 QNaN 函数通过违反严格的别名来调用 UB。VS 编译器完全有权产生任何行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T12:17:47.793

我相信您正在寻找`/fp:strict`选择。

*   [http://msdn.microsoft.com/en-us/library/vstudio/e7s85ffb.aspx](http://msdn.microsoft.com/en-us/library/vstudio/e7s85ffb.aspx)

您可能还需要`float_control`编译指示。

*   [http://msdn.microsoft.com/en-us/library/vstudio/45ec64h6.aspx](http://msdn.microsoft.com/en-us/library/vstudio/45ec64h6.aspx)

所有这些都在“按类别编译器选项”下的文档中

*   [http://msdn.microsoft.com/en-us/library/vstudio/19z1t1wy.aspx](http://msdn.microsoft.com/en-us/library/vstudio/19z1t1wy.aspx)

# css - 当窗口超过一定大小时导航链接移动

> ID：15786609
> 
> 赞同：0
> 
> 时间：2013-04-03T11:52:46.647
> 
> 标签：css, resize, window, nav

我有一个水平 css 菜单，它可以在较小的屏幕上正常显示。虽然当您在更大的屏幕上看到该站点时，导航链接会从最左边对齐（这是正确的）到被踩到。

当屏幕尺寸增加超过一定尺寸时，为什么导航链接会移动？

该网站是[http://twitterflicker.com](http://twitterflicker.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:24:17.963

将 CSS 添加到 #cssmenu：

```
#cssmenu {
  display: inline-block;
  width: 100%;
} 
```

它将响应所有分辨率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:20:12.907

你的问题是`.logo`阶级。擦除`float: left`那里并切换`margin`到`padding`

# sql - INNER Join 案例陈述

> ID：15786611
> 
> 赞同：15
> 
> 时间：2013-04-03T11:52:50.910
> 
> 标签：sql, sql-server, syntax, case

尝试在内部连接上使用 CASE 语句，我得到的只是语法错误，有人对此有任何建议吗？

这是代码

```
 SELECT  
    Call_type_ID,
    SUM (staging.dbo.outgoing_measure.ring_time) AS Ring_Time,
    SUM (staging.dbo.outgoing_measure.hold_time) As Hold_Time,
    SUM (staging.dbo.outgoing_measure.talk_time) AS Talk_Time,
    SUM (staging.dbo.outgoing_measure.acw_time) AS ACW_Time,
    COUNT(*) CallCount
FROM outgoing_measure

INNER JOIN datamartend.dbo.Call_Type_Dim ON 
CASE 
WHEN 
CTICallType_ID = 1
AND CTIAgentCallType_ID = 0
AND Abandoned  IS NULL
AND AnsTime > 0
AND CallState IS NULL
THEN Call_Type_ID = 10
WHEN
CTICallType_ID = 1
AND CTIAgentCallType_ID = 0
AND Abandoned  IS NULL
AND AnsTime > 0  
AND CallState = 1
THEN call_Type_id = 11
WHEN 
CTICallType_ID = 1
AND CTIAgentCallType_ID = 0
AND Abandoned = 1
AND AnsTime IS NULL
AND CallState IS NULL
THEN call_type_ID = 12
ELSE call_type_id = 1
END

Group by call_Type_id 
```

这是我第一次使用 case 语句，更不用说将它们与内部连接结合起来了，所以如果我完全搞砸了，我很抱歉。

我得到的语法错误是：

= 和 WHEN 的语法不正确

```
THEN Call_Type_ID = 10
WHEN 
```

并且在 GROUP BY 上期望 CONVERSION 的语法不正确

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-03T12:00:43.163

似乎您正在尝试在案例中创建 Where 子句，但您应该将案例的结果与 Call_Type_ID（或您想要的任何其他字段）进行比较，如我在下面写的示例中希望它有所帮助！

有时我也会在我的外壳上使用支架，以便更容易看到它们的开始和停止位置。

```
INNER JOIN datamartend.dbo.Call_Type_Dim ON 
(CASE 
 WHEN  CTICallType_ID = 1
     AND CTIAgentCallType_ID = 0
     AND Abandoned  IS NULL
     AND AnsTime > 0
     AND CallState IS NULL
     THEN 10
WHEN CTICallType_ID = 1
     AND CTIAgentCallType_ID = 0
     AND Abandoned  IS NULL
     AND AnsTime > 0  
     AND CallState = 1
     THEN 11
WHEN 
     CTICallType_ID = 1
     AND CTIAgentCallType_ID = 0
     AND Abandoned = 1
     AND AnsTime IS NULL
     AND CallState IS NULL
     THEN 12
ELSE 1
END) = Call_Type_ID  -- Insert something here to join on. 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2017-02-19T19:01:28.670

```
select * from emp;
select * from dept; 
```

..................................................... …………………………………………………………………………………………………………

```
select Ename,Job,dname,
Case job
when 'Clerk' then 'C'
when 'Salesman' then 'S'
when 'Manager' then 'M'
when 'Analyst' then 'A'
else 'Other'
end  as Demo 
```

从 emp 内部连接部门开始`emp.deptno=dept.deptno ;`

..................................................... .........................................

我正在考虑将这里的表默认为 oracle 表。

# c# - 在特定行读取文本文件

> ID：15786612
> 
> 赞同：8
> 
> 时间：2013-04-03T11:52:52.510
> 
> 标签：c#

我有一个超过 3000 行的文本文件。我正在使用

```
string[] lines = File.ReadAllLines(myPath);
var lineCount = lines.Length; 
```

然后我生成一个随机数

```
Random rand = new Random();
var lineToRead = rand.Next(1, lineCount); 
```

现在我需要读取由随机数生成的特定行。我可以使用

```
string requiredLine = lines[lineToRead]; 
```

因为我的文件很大，所以我不认为创建这么大的数组是有效的。有没有更有效或更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T11:57:20.180

这是一个迭代文件两次的解决方案（第一次计算行数，下一次选择行）。好处是您不需要在内存中创建一个包含 3000 个字符串的数组。但是，如上所述，它*可能*会更慢。为什么可能？- 因为`File.ReadAllLines`在里面创建了一个字符串列表，并且该列表将在填充 3000 个项目时多次调整大小。（初始容量为`4`。当内部数组完全填满时，将创建两倍大小的新数组，并将所有字符串复制到那里）。

因此，该解决方案使用`File.ReadLines`返回`IEnumerable<string>`行并跳过您不需要的行的方法：

```
IEnumerable<string> lines = File.ReadLines(myPath);
var lineToRead = rand.Next(1, lines.Count());
var line = lines.Skip(lineToRead - 1).First(); 
```

顺便说一句，内部`File.ReadLines`使用`SteamReader`它逐行读取文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:40:52.860

您可以做的是解析文件以查找每一行的索引，然后您可以稍后通过使用 Stream.Position 获取内容返回到某一行。使用这种方法，您不需要在内存中保留任何内容，而且速度相当快。**我在一个 20K 行和 1MB 大小的文件上对此进行了测试**。索引文件需要 7 毫秒，获取行需要 0.3 毫秒。

```
 // Parse the file
    var indexes = new List<long>();
    using (var fs = File.OpenRead("text.txt"))
    {
        indexes.Add(fs.Position);
        int chr;
        while ((chr = fs.ReadByte()) != -1)
        {
            if (chr == '\n')
            {                        
                indexes.Add(fs.Position);
            }
        }
    }

    int lineCount = indexes.Count;
    int randLineNum = new Random().Next(0, lineCount - 1);
    string lineContent = "";

    // Read the random line
    using (var fs = File.OpenRead("text.txt"))
    {
        fs.Position = indexes[randLineNum];
        using (var sr = new StreamReader(fs))
        {
            lineContent = sr.ReadLine();
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T11:56:02.510

您可以将流包装到 StreamReader 中，并根据需要多次调用 ReadLine 以转到目标行。这样您就不需要将整个文件内容保存在内存中。

但是，这只有在您很少这样做并且文件很大时才可行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T13:02:16.587

**使用*Reservoir Sampling*一次性解决此问题**

如果您想从事先不知道该列表长度的项目列表中随机选择一个或多个项目，您可以使用[Reservoir Sampling](http://en.wikipedia.org/wiki/Reservoir_sampling)。

我们可以利用这一点，连同[`File.ReadLines()`](http://msdn.microsoft.com/en-gb/library/dd383503.aspx)方法（避免缓冲内存中的所有行）编写一个单遍算法，该算法将只读取每行一次，而不进行缓冲。

下面的示例代码显示了一个通用解决方案，可让您随机选择任意数量的行。对于您的情况，N = 1。

示例代码还包括一个测试程序，以证明这些行是随机选择的，分布均匀。

（要了解此代码的工作原理，请参阅我上面链接的 Wiki 文章。）

```
using System;
using System.IO;
using System.Collections.Generic;

namespace Demo
{
    internal class Program
    {
        public static List<string> RandomlyChooseLinesFromFile(string filename, int n, Random rng)
        {
            var result = new List<string>(n);
            int index = 0;

            foreach (var line in File.ReadLines(filename))
            {
                if (index < n)
                {
                    result.Add(line);
                }
                else
                {
                    int r = rng.Next(0, index + 1);

                    if (r < n)
                        result[r] = line;
                }

                ++index;
            }

            return result;
        }

        // Test RandomlyChooseLinesFromFile()

        private static void Main(string[] args)
        {
            Directory.CreateDirectory("C:\\TEST");
            string testfile = "C:\\TEST\\TESTFILE.TXT";
            File.WriteAllText(testfile, "0\n1\n2\n3\n4\n5\n6\n7\n8\n9");
            var rng = new Random();
            int trials = 100000;
            var counts = new int[10];

            for (int i = 0; i < trials; ++i)
            {
                string line = RandomlyChooseLinesFromFile(testfile, 1, rng)[0];
                int index = int.Parse(line);
                ++counts[index];
            }

            // If this algorithm is correct, each line should be chosen
            // approximately 10% of the times.

            Console.WriteLine("% times each line was chosen:\n");

            for (int i = 0; i < 10; ++i)
            {
                Console.WriteLine("{0} = {1}%", i, 100*counts[i]/(double)trials);
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-03T11:58:46.497

下面将帮助您阅读文件中的特定行。

[http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/4dbd68f6-61f5-4d36-bfa0-5c909101874b](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/4dbd68f6-61f5-4d36-bfa0-5c909101874b)

一段代码

```
using System;
using System.Collections.Generic;
using System.Text;
using System.IO;

namespace ReadLine
{
class Program
{
    static void Main(string[] args)
    {
        //Load our text file
        TextReader tr = new StreamReader("\\test.txt");

        //How many lines should be loaded?
        int NumberOfLines = 15;

        //Make our array for each line
        string[] ListLines = new string[NumberOfLines];

        //Read the number of lines and put them in the array
        for (int i = 1; i < NumberOfLines; i++)
        {
            ListLines[i] = tr.ReadLine();
        }

        //This will write the 5th line into the console
        Console.WriteLine(ListLines[5]);
        //This will write the 1st line into the console
        Console.WriteLine(ListLines[1]);

        Console.ReadLine();

        // close the stream
        tr.Close();
    }
}
} 
```

这些也可以有帮助..

[http://www.tek-tips.com/viewthread.cfm?qid=1460456](http://www.tek-tips.com/viewthread.cfm?qid=1460456)

[如何读取文本文件中的指定行？](https://stackoverflow.com/questions/1262965/c-how-do-i-read-a-specified-line-in-a-text-file)

下面是编辑

[在 C# 中编辑文本文件的特定行](https://stackoverflow.com/questions/1971008/edit-a-specific-line-of-a-text-file-in-c-sharp)

希望能帮助到你...

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-03T12:26:24.543

你可以像下面这样尝试......它不能创建任何大数组，但会得到一个特定的行......

```
string path = "D:\\Software.txt";
int lines = File.ReadAllLines(path).Length;
Random rand = new Random();
var lineToRead = rand.Next(1, lines);
var requiredLine = System.IO.File.ReadLines(path).Skip(lineToRead - 1).First();
Console.WriteLine(requiredLine.ToString()); 
```

# performance - Mac OS X 中的每个进程磁盘读/写统计信息

> ID：15786618
> 
> 赞同：27
> 
> 时间：2013-04-03T11:53:10.430
> 
> 标签：performance, macos, statistics, disk

如何在 Mac OS X 中以编程方式获取每个进程的磁盘 i/o 统计信息。在“Activity Monitor”应用程序或“top”命令中，我们只能获取整个系统磁盘 i/o 统计信息。
供参考[对 PC 提出了类似的问题。](https://stackoverflow.com/questions/1639903/programmatically-getting-per-process-disk-io-statistics-on-windows)

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-05-08T22:36:27.160

使用`iotop`（作为根），例如：

```
iotop -C 3 10 
```

但最好的方法（对我来说）是：

```
sudo fs_usage -f filesys 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-26T14:21:37.937

由于这里没有关于如何以编程方式执行此操作的答案，因此这里有更多信息。如果您可以使用 C/C++/ObjectiveC++，则可以从 libproc 中获取一些信息。该函数`proc_pid_rusage`为您提供给定进程的大量资源信息，但与您的问题相关的是：

```
struct rusage_info_v3 {
    ...
    uint64_t ri_diskio_bytesread;
    uint64_t ri_diskio_byteswritten;
    ...
}; 
```

示例代码：

```
pid_t pid = 10000;
rusage_info_current rusage;
if (proc_pid_rusage(pid, RUSAGE_INFO_CURRENT, (void **)&rusage) == 0)
{
    cout << rusage.ri_diskio_bytesread << endl;
    cout << rusage.ri_diskio_byteswritten << endl;
} 
```

请参阅`<libproc.h>`和`<sys/resource.h>`了解更多信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-07-10T08:50:17.627

由于 OP 专门要求提供磁盘 I/O 统计信息，因此我建议

```
sudo fs_usage -f diskio 
```

它只关注读/写事件，与`-f filesys`接受的答案中提到的相反。（不知道`diskio`当时是否没有该选项。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-10-26T18:02:43.283

活动监视器在“磁盘”选项卡中显示每个进程的 I/O 统计信息（可能是自提出此问题以来的新内容）。[![在此处输入图像描述](https://i.stack.imgur.com/l6Rvn.png)](https://i.stack.imgur.com/l6Rvn.png)请参阅“写入字节数”和“读取字节数”列。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-19T10:49:08.737

我找到[了 iStat Menus](https://bjango.com/mac/istatmenus/)，它位于菜单栏中。只显示前 5 个磁盘读/写用户（我不确定它是否是总和，但它没有排序）。

# java - Java volatile on primitivs

> ID：15786619
> 
> 赞同：0
> 
> 时间：2013-04-03T11:53:13.457
> 
> 标签：java, volatile, primitive

为什么我们需要在原语上使用 volatile？我发现的最常见的例子[是](https://www.ibm.com/developerworks/java/library/j-jtp06197/)：

```
volatile boolean shutdownRequested;

...

public void shutdown() { shutdownRequested = true; }

public void doWork() { 
    while (!shutdownRequested) { 
        // do stuff
    }
} 
```

但是当我试图自己运行它时。**易失性声明没有任何改变**。它以易失性和非易失性停止`shutdownRequested`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T11:55:39.937

本质上， volatile 用于指示变量的值将被不同的线程修改。

一个 volatile Java 变量意味着：

这个变量的值永远不会被缓存到线程本地：所有的读写都将直接进入“主内存”；并且对变量的访问就像它被包含在一个同步块中一样，在其自身上同步。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T11:58:30.777

未标记的变量`volatile`可以根据 JVM 的意愿缓存。例如，可以将变量的副本加载到寄存器中，然后可能**永远不会**引用原始实例变量，尤其是在紧密循环中。

将其标记为`volatile`告诉 JVM 它必须**始终**引用原始实例变量。

您所看到的可能只是 JVM 没有缓存变量，即使它是允许的。

这也是多线程代码难以证明正确的原因之一。不仅并非所有 JVM 都以相同的方式工作，而且与运行代码时相比，调试代码时甚至可能会得到不同的结果，如果它在多核单元上运行，它可能再次以不同的方式运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T11:57:15.167

`volatile`对于多线程代码很有用。

看到这个问题：[你曾经在 Java 中使用过 volatile 关键字吗？](https://stackoverflow.com/questions/106591/do-you-ever-use-the-volatile-keyword-in-java)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T11:58:01.883

对 volatile 变量的更改始终对其他线程可见。[在此处输入链接描述](http://docs.oracle.com/javase/tutorial/essential/concurrency/atomic.html)

在您的示例中，一个线程正在执行 doWork() 并且另一个线程出现并调用关闭。在某些平台上的某些 JVM 上，编译器可能会以这样一种方式优化事物，即工作线程看不到对 shutdownRequested 变量的更改，例如，该变量可能被缓存在寄存器中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T11:59:32.143

`volatile`当您想确保正在读取的值是当前值，没有任何缓存时，您应该使用变量。

*   另请参阅：[什么是保留字 volatile 用于](http://rodrigosasaki.com/2012/10/19/volatile-english/)

# javascript - 在 JS/jQuery 中“调整”HTTP 请求的首选技术？

> ID：15786621
> 
> 赞同：0
> 
> 时间：2013-04-03T11:53:15.173
> 
> 标签：javascript, ajax, csrf, web-crawler

***我正在尝试使用 TamperMonkey/Javascript/jQuery 从单个站点“蜘蛛”一小组数据并将其整理到单个页面上。***

我编写了一个 TM 脚本（当我打开目标页面时触发）来执行以下操作：

*   在页面上搜索某种类型的链接（通常大约 8 个链接）
*   “关注”找到的每个链接到一个新页面，从那里找到并关注一个链接
*   提取我感兴趣的数据并将其“合并”到我打开的原始页面中。

遍历这些操作通常会导致站点触发 16 个（8 * 2 链接）HTTP 请求。如果我手动调用它（通过控制台）以单步方式对所有 16 条数据执行操作，我编写的代码可以正常工作。

但是，如果我尝试设置一个循环并让代码只是“做它的事情”，我会得到***您请求的页面在大约 4 次迭代后没有响应***类型 HTML（状态 = OK）。我猜该网站是在保护自己免受某种 XSRF 攻击，还是真的很慢？

***我的问题是降低我从站点请求数据的速率的首选技术是什么？我考虑过构建一组 HTTP 函数调用或 URL 来处理，但这似乎很笨重，我还有什么更惯用的方法吗？***

我猜这一定是一个如此普遍的问题，并且存在可靠的解决方案，但我只是没有足够好的术语来正确搜索它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:26:01.760

我在另一个问题上发布了类似的答案：[Browser stop working for a while after synchronous ajax call in a for loop](https://stackoverflow.com/questions/15786780/browser-stops-working-for-a-while-after-synchronous-ajax-call-in-a-for-loop/15787313#15787313)

您可以使用“递归”函数来帮助您控制异步调用的流程。您可以异步运行它们，而不是同步运行，然后在下一个时间运行该函数。

就像是：

```
function doCall() {
    setTimeout(function() {
        $.ajax({
            //...
            succcess: function(data) {
                //...
                //time to start the next one
                doCall();
            },
            error: function() {
                //call the next one on error?
                doCallI();
            }
        });
    }, 1000); //1 second wait before each run
} 
```

这样他们就可以异步运行，在他们调用的时候不要阻塞一切；但仍然串联运行。您甚至可以在 doCall 函数中放置一个小延迟，以便有一些空间。

# c# - 使用图像+文本样式化 WPF 按钮

> ID：15786624
> 
> 赞同：10
> 
> 时间：2013-04-03T11:53:17.080
> 
> 标签：c#, wpf, xaml, styles, .net-4.5

在我的 C#/WPF/.NET 4.5 应用程序中，我有按以下方式实现的带有图像的按钮：

```
<Button Style="{StaticResource BigButton}">
  <StackPanel>
    <Image Source="Images/Buttons/bt_big_save.png" />
    <TextBlock>save</TextBlock>
  </StackPanel>
</Button> 
```

我有一个资源字典**UIStyles.xaml**，我在其中声明了以下内容：

```
<Style TargetType="Button" x:Key="BigButton">
  <Setter Property="Cursor" Value="Hand" />
  <Setter Property="Height" Value="80" />
  <Setter Property="Width" Value="80" />
  <Setter Property="Foreground" Value="White" />
  <Setter Property="FontWeight" Value="Bold" />
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="Button">
        <Border x:Name="border" 
            CornerRadius="5" 
            Background="#FF415360">
          <ContentPresenter x:Name="ButtonContentPresenter"
              VerticalAlignment="Center"  
              HorizontalAlignment="Center">
            <ContentPresenter.Resources>
              <Style TargetType="TextBlock">
                <Setter Property="TextAlignment" Value="Center" />
              </Style>
              <Style TargetType="Image">
                <Setter Property="Width" Value="10" />
                <Setter Property="Margin" Value="10" />
              </Style>
            </ContentPresenter.Resources>
          </ContentPresenter>
        </Border>
      </ControlTemplate>
    </Setter.Value>
  </Setter>
</Style> 
```

光标、高度、边框等属性工作正常，但我无法设置`TextBlock`和`Image`.

具体来说，需要如下所示：

![正确的样子](https://i.stack.imgur.com/09SkO.png)

最终看起来像这样（忽略色差）：

![不正确的样子](https://i.stack.imgur.com/rOPwJ.png)

我之前看到过[类似的问题](https://stackoverflow.com/questions/1933127/creating-an-imagetext-button-with-a-control-template)，但解决方案使用了不同的方法（我不想创建自定义用户控件，除了这个之外，我的所有需求都包含在当前代码中，并且重写会很麻烦）。我只需要修复我`Style`的，以便`TextBlock`居中，`Image`居中并变小。

如何重新编写`Style`以更正按钮的外观？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T13:00:47.690

尝试这样的事情：

`Button`: _

```
<Button Style="{StaticResource BigButton}" Content="save">
    <Button.Tag>
        <ImageSource>../GreenLamp.png</ImageSource>
    </Button.Tag>
</Button> 
```

`Style`: _

```
<Style TargetType="Button" x:Key="BigButton">
    <Setter Property="Cursor" Value="Hand" />
    <Setter Property="Height" Value="80" />
    <Setter Property="Width" Value="80" />
    <Setter Property="Foreground" Value="White" />
    <Setter Property="FontWeight" Value="Bold" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Border x:Name="border"
                        CornerRadius="5"
                        Background="#FF415360">
                    <StackPanel>
                        <Image Source="{TemplateBinding Tag}" 
                                VerticalAlignment="Top"
                                HorizontalAlignment="Center"
                                Height="50"
                                Margin="5" />
                        <ContentPresenter x:Name="ButtonContentPresenter"
                                        VerticalAlignment="Center"
                                        HorizontalAlignment="Center">
                    </ContentPresenter>
                    </StackPanel>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

您可能必须更改`Height`/`Margin`以适应您的需要`Image`。`Style`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-03T13:00:49.577

您的问题的解决方案可能是将您的 Image 和 TextBlock 样式移动到 ControlTemplate 的 Resource 部分。我不知道*为什么*，但我相信如果样式是内容演示者资源的一部分，它们就不在范围内。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T14:39:45.283

我认为，如果您设置 Button 的 ContentTemplate 而不是 Content，它将起作用。

```
<Button Style="{StaticResource BigButton}">
    <Button.ContentTemplate>
        <DataTemplate>
          <StackPanel>
            <Image Source="Resources/icon_cancel.png" />
            <TextBlock>save</TextBlock>
          </StackPanel>
        </DataTemplate>
    </Button.ContentTemplate>
</Button> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T12:07:43.303

使用 height 属性来修复图像高度让说 30（取决于您的要求）并使用 HorzontalAllignment 以文本块为中心它会正常工作

# c++ - 获取 HDF5 数据集的维度

> ID：15786626
> 
> 赞同：10
> 
> 时间：2013-04-03T11:53:21.560
> 
> 标签：c++, c, hdf5

我在我的 C++ 程序中使用了一些 HDF5 文件，我对该函数有疑问`H5Dopen`。是否可以在给定文件中获取 hdf5 数据集的尺寸？

```
hid_t file, dset;
herr_t status;
file = H5Fopen (filenameField, H5F_ACC_RDONLY, H5P_DEFAULT);
dset = H5Dopen (file, "/xField", H5P_DEFAULT); 
```

在我做下一行之前，我想获得`dset`.

```
status = H5Dread (dset, H5T_NATIVE_DOUBLE, H5S_ALL, H5S_ALL, H5P_DEFAULT,  &readBuf[0]); 
```

我只找到了`H5Dget_storage_size`，但这不适合我的情况。

有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-03T15:15:52.703

为此，您需要使用以 H5 **S为前缀的数据****空间**函数。

 **[HDF5 参考手册](http://www.hdfgroup.org/HDF5/doc/RM/RM_H5Front.html)是使用这些前缀组织的，因此有助于理解这一点。

### 如何获取数据集的维度

首先，您需要使用以下方法从数据集中获取数据空间[`H5Dget_space`](http://www.hdfgroup.org/HDF5/doc/RM/RM_H5D.html#Dataset-GetSpace)：

```
hid_t dspace = H5Dget_space(dset); 
```

如果您的数据空间很*简单*（即不是*null*或*scalar*），那么您可以使用以下方法获取维数[`H5Sget_simple_extent_ndims`](http://www.hdfgroup.org/HDF5/doc/RM/RM_H5S.html#Dataspace-ExtentNdims)：

```
const int ndims = H5Sget_simple_extent_ndims(dspace); 
```

以及每个维度的大小使用[`H5Sget_simple_extent_dims`](http://www.hdfgroup.org/HDF5/doc/RM/RM_H5S.html#Dataspace-ExtentDims)：

```
hsize_t dims[ndims];
H5Sget_simple_extent_dims(dspace, dims, NULL); 
```

尺寸现在存储在`dims`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-19T08:19:12.057

或者，这可以这样做（如果是简单的数据空间，请参阅 Simons 的回答，如有必要，请检查`bool H5::DataSpace::isSimple() const`）：

```
 #include "H5Cpp.h"
  using namespace H5;
  //[...]
  DataSpace dataspace(RANK, dims);
  //[...]
  /*
   * Get the number of dimensions in the dataspace.
   */
  const int rank = dataspace.getSimpleExtentNdims(); 
```

在大多数情况下，这一行可能是多余的，因为整个任务可以分两行完成：

```
 /*
   * Get the dimension size of each dimension in the dataspace and
   * store the dimentionality in ndims.
   */
  hsize_t dims_out[rank];
  const int ndims = dataspace.getSimpleExtentDims( dims_out, NULL); 
```

该函数`getSimpleExtentNdims()`可以作为`H5::DataSpace`实例的成员调用。

这些代码片段取自最新的[HDF5 C++ 参考手册的](https://portal.hdfgroup.org/pages/viewpage.action?pageId=50073884)[示例页面](https://bitbucket.hdfgroup.org/pages/HDFFV/hdf5doc/master/browse/html/cpplus_RM/examples.html)(readdata.cpp) 。

编译一切，`h5c++`它应该工作。**

# c# - C# Rally RestAPI 添加或更新标签

> ID：15786631
> 
> 赞同：1
> 
> 时间：2013-04-03T11:53:29.410
> 
> 标签：c#, json, tags, rally

我找不到通过 C# 向用户故事添加标签值的语法。

使用最新的 Rally API 二进制文件 2.0 Beta。

我能找到的最接近的示例是通过 Java（[如何使用 Rally 的 JAVA API 在 Rally 中添加标签到 TestCase？](https://stackoverflow.com/questions/12655357/how-to-add-tags-to-a-testcase-in-rally-using-rallys-java-api)），这看起来很有帮助，但是从示例中我需要访问 JSONArray 和 JSONElement，但我的 C# 部署`DynamicJSONObject`通过 RestAPI使用根据 Rally 示例，但既不`JSONArray`也不`DynamicJSONArray`（也不`JSONElement`）通过 RestAPI 参考公开。

我可以`DynamicJSONArray`通过添加 Microsoft 的`System.Web.Helpers`参考来启用访问，但 Microsoft`DynamicJSonArray`参考与 RestAPI 变体竞争......

我可以使用全名来限定 restapi 变体来解决这个问题，但我真的不想在没有明确观点的情况下开始这条道路，如果它会导致某些功能。如果我将 Microsoft 传递给`DyamicJSONArray`Rally `DyamicJSONObject`，我我怀疑它会产生任何功能。

有没有人有任何 C# 代码做一些简单的事情，比如创建标签并将其分配给用户故事或测试用例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:43:06.057

这是一个简单的示例，它使用现有标签和新创建的标签更新故事上的标签集合：

```
namespace RestExample_UpdateStoryTags
{
    class Program
    {
        static void Main(string[] args)
        {

            //Initialize the REST API
            RallyRestApi restApi;
            String rallyUserName = "user@company.com";
            String rallyPassword = "topsecret";
            String rallyURL = "https://rally1.rallydev.com";
            String wsapiVersion = "1.41";
            String myWorkspaceName = "My Workspace";

            restApi = new RallyRestApi(
                rallyUserName,
                rallyPassword,
                rallyURL,
                wsapiVersion
            );

            // Get a Reference to Target Workspace
            Request workspaceRequest = new Request("workspace");
            workspaceRequest.Fetch = new List<string>()
                {
                    "Name",
                    "ObjectID"
                };

            workspaceRequest.Query = new Query("Name", Query.Operator.Equals, myWorkspaceName);
            QueryResult workspaceQueryResults = restApi.Query(workspaceRequest);

            var targetWorkspace = workspaceQueryResults.Results.First();
            Console.WriteLine("Found Target Workspace: " + targetWorkspace["Name"]);

            String workspaceRef = targetWorkspace["_ref"];

            //Query for Target Tag
            Request tagRequest = new Request("tag");
            tagRequest.Fetch = new List<string>()
                {
                    "Name",
                    "ObjectID"
                };

            // Query all Tags for a tag named "Montane"
            tagRequest.Query = new Query("Name", Query.Operator.Equals, "Tundra");
            QueryResult queryTagResults = restApi.Query(tagRequest);

            var targetTagResult = queryTagResults.Results.First();
            long tagOID = targetTagResult["ObjectID"];

            DynamicJsonObject targetTag = restApi.GetByReference("tag", tagOID, "Name", "ObjectID");

            // Query for User Story
            // FormattedID of target story
            String targetStoryFormattedID = "US5";

            Request storyRequest = new Request("hierarchicalrequirement");
            storyRequest.Fetch = new List<string>()
                {
                    "Name",
                    "ObjectID",
                    "Iteration",
                    "FormattedID",
                    "Tags"
            };

            storyRequest.Query = new Query("FormattedID", Query.Operator.Equals, targetStoryFormattedID);
            QueryResult queryStoryResults = restApi.Query(storyRequest);

            var targetUserStory = queryStoryResults.Results.First();
            Console.WriteLine("Found Target User Story: " + targetUserStory["Name"]);

            // Grab collection of existing Tags
            var existingTags = targetUserStory["Tags"];

            // Summarize Existing Tags
            Console.WriteLine("Existing Tags for Story" + targetStoryFormattedID + ": ");
            foreach (var tag in existingTags)
            {
                Console.WriteLine(tag["Name"]);
            }

            long targetOID = targetUserStory["ObjectID"];

            // Now do update of the User Story

            // Tags collection on object is expected to be a System.Collections.ArrayList
            var targetTagArray = existingTags;
            targetTagArray.Add(targetTag);

            DynamicJsonObject toUpdate = new DynamicJsonObject();
            toUpdate["Tags"] = targetTagArray;

            OperationResult updateResult = restApi.Update("HierarchicalRequirement", targetOID, toUpdate);
            foreach (var error in updateResult.Errors)
            {
                Console.WriteLine(error.ToString());
            }

            // Re-read target Story
            DynamicJsonObject updatedStory = restApi.GetByReference(targetUserStory["_ref"], "Tags,Name");
            var updatedTags = updatedStory["Tags"];

            // Summarize Updated Tags
            Console.WriteLine("Updated Tags for Story" + targetStoryFormattedID + ": ");
            foreach (var tag in updatedTags)
            {
                Console.WriteLine(tag["Name"]);
            }

            // Create a New Tag, and add New Tag to Story
            DynamicJsonObject newTag = new DynamicJsonObject();
            newTag["Name"] = "Boreal";

            CreateResult createResult = restApi.Create(workspaceRef, "Tag", newTag);

            // Get the ref of the created Tag
            String newTagRef = createResult.Reference;

            // Read the Target Tag
            DynamicJsonObject newTagRead = restApi.GetByReference(newTagRef, "Name");

            // Add the newly-created Tag to the Story
            targetTagArray.Add(newTagRead);
            toUpdate["Tags"] = targetTagArray;

            updateResult = restApi.Update("HierarchicalRequirement", targetOID, toUpdate);

            // Re-read target Story
            updatedStory = restApi.GetByReference(targetUserStory["_ref"], "Tags,Name");
            updatedTags = updatedStory["Tags"];

            // Summarize Updated Tags
            Console.WriteLine("Updated Tags (with newly-created Tag for Story" + targetStoryFormattedID + ": ");
            foreach (var tag in updatedTags)
            {
                Console.WriteLine(tag["Name"]);
            }
            Console.ReadKey();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:47:35.820

```
//Based on Mark's code, below comes close... but updates still failing
//Maybe I need to try an earlier version?

String strTeam = "xxx";

String workspaceRef = "/workspace/4914063320";
String projectRef = "/project/7412041414";

//get user story
Request reqUserStory = new Request("hierarchicalrequirement");
reqUserStory.Fetch = new List<string>() { "ObjectID", "Release", "Iteration", "PlanEstimate", "Description", "Tags" };

reqUserStory.Query = new Query("Project", Query.Operator.Equals, projectRef)
    .And(new Query("Name", Query.Operator.Equals, "mystoryname"));

QueryResult queryResultUS = restApi.Query(reqUserStory);
DynamicJsonObject myUserStory = new DynamicJsonObject();
myUserStory = queryResultUS.Results.FirstOrDefault();
if (null != myUserStory)
{
//get tags for user story
    var existingTags = myUserStory["Tags"];
    if (null != existingTags)
    {
        bool bFound = false;

        var tagList = existingTags["_tagsNameArray"];
        //look for tag
        foreach (var tag in tagList)
        {
            String strValue = tag["Name"];
            if (strValue == strTeam)
                bFound = true;
        }

        if (!bFound)
        {
            //replace tags array

            var targetTagArray = existingTags;
            var tagList2 = targetTagArray["_tagsNameArray"];
            tagList2.Add(targetTag);//even if i comment this out, update below fails...
            targetTagArray["_tagsNameArray"] = tagList2;

            DynamicJsonObject toUpdate = new DynamicJsonObject();
            toUpdate["Tags"] = targetTagArray;
            long oid = Convert.ToInt64(myUserStory["ObjectID"]);
            opResultRelease = restApi.Update("hierarchicalrequirement", oid, toUpdate);
            // Fails with Error: ["Could not read: Could not read referenced object 2"]
        }

    }
} 
```

# mysql - 更新或插入值

> ID：15786633
> 
> 赞同：0
> 
> 时间：2013-04-03T11:53:37.273
> 
> 标签：mysql

我创建了一个表：

```
$this->db->query('CREATE TABLE IF NOT EXISTS `'.DB_PREFIX.'ct_forum_settings` (
`admin_online` int(1) NOT NULL default \'0\'
) ENGINE=MyISAM DEFAULT CHARSET=utf8;
'); 
```

我正在尝试当用户登录时插入或更新，如果该行不存在，则如果用户已注销，则值为 1 或 0。

登录

```
@mysql_query ("REPLACE INTO " . DB_PREFIX . "ct_forum_settings (admin_online) VALUES(1) ON DUPLICATE KEY UPDATE admin_online='1'"); 
```

登出

```
@mysql_query ("REPLACE INTO " . DB_PREFIX . "ct_forum_settings (admin_online) VALUES(0) ON DUPLICATE KEY UPDATE admin_online='0'"); 
```

我唯一的问题是我尝试过插入并替换成，但他们只是不断创建 1 和 0 的行，如果它不存在，我只需要更新该行。

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:57:05.567

For`REPLACE`或 for`ON DUPLICATE UPDATE`你需要给你的表一个唯一的键（通常主键是你需要的）。
一旦你有了它，你将为用户使用相同的值（比如，调用该字段`id`并创建它`auto increment`）它将起作用

```
$this->db->query('CREATE TABLE IF NOT EXISTS `'.DB_PREFIX.'ct_forum_settings` (
`id` INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
`admin_online` int(1) NOT NULL default \'0\'
) ENGINE=MyISAM DEFAULT CHARSET=utf8;
'); 
```

如果你只有一个条目，不需要自动增量，但是你必须手动设置 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T11:58:35.347

你可以尝试改变 REPLACE INTO

用于插入：

```
mysql_query("INSERT INTO `table` (`id`, `file_name`, `directory`) VALUES (NULL, '$filename', '$directory')"); 
```

更新：

```
mysql_query("UPDATE `table` SET `file_name` = '$filename', `directory` = '$directory' WHERE `id` = id") 
```

# python - 使用 ctypes 编写回调，将指针传入指针参数以用作输出参数

> ID：15786635
> 
> 赞同：1
> 
> 时间：2013-04-03T11:53:39.493
> 
> 标签：python, callback, ctypes

我正在使用 ctypes 将 python 代码与旧版 C DLL 接口。DLL 希望我给它一个函数指针以用作回调，然后从 DLL 中调用它。

该回调的 C 声明看起来像

```
char foo(char **buf) 
```

从语义上讲，DLL 期望我让 buf 指向由回调管理的字符串缓冲区，如果一切正常，则返回 0。在 C 中，这将是一个静态 char[] 变量 mybuf，我将使用类似的代码将该静态 buf 的地址传回

```
*buf = &mybuf[0] ;
return (char)0 ; 
```

mybuf 中的字符串需要像往常一样在 C 中以空值终止。我能够将函数指针传递给 DLL，现在是 python（成员）函数

```
def pyfoo(self, char_ptr_ptr) 
```

被调用。

定义 pyfoo 的类也初始化（在**init**中）一个字段

```
self.response=create_string_buffer("The Response String") 
```

如何将地址（该字符串实际存储在内存中的位置）传递给 DLL？由于 ctypes 有时会创建副本而不是按地址返回真实引用，因此我尝试了类似

```
cpointer = c_int.from_address(char_ptr_ptr[0])
cpointer.value = addressof(self.response)
return c_char(0) 
```

这没用。我尝试了其他方法来取消引用传递的指针并在那里存储内存地址（例如，直接将（我认为是字符串的地址）存储到 char-ptr_ptr[0] 中），但回调的调用者从来没有这样做我期待它做什么。

如果有人曾经解决过在python中创建一个以空结尾的字符串并通过**指针传递该字符串的地址到用C实现的DLL的问题，我将非常感谢他/她如何解决这个问题. 谢谢！

（编辑）还是我的问题更简单？是

```
c_char(0) 
```

实际上将单个字节作为返回值推入堆栈？如果不是，那么实现返回单个字节的回调的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:00:10.917

我会使用以下函数原型：

```
CFUNCTYPE(c_byte, POINTER(POINTER(c_char))) 
```

并这样写`pyfoo`：

```
 def pyfoo(self, char_ptr_ptr):
        char_ptr_ptr[0] = self.response
        return 0 
```

例如：

```
>>> import os
>>> from ctypes import *

>>> open('tmp.c', 'w').write(r'''
... #include <stdio.h>
... typedef char (*callback_t)(char **buf);
... int test(callback_t foo)
... {
...     char res, *buf;
...     res = foo(&buf);
...     printf("res: %d\n", res);
...     printf("buf: %s\n", buf);
...     return 0;
... }
... ''')
>>> _ = os.system('gcc -shared -fPIC -o tmp.so tmp.c')
>>> lib = CDLL('./tmp.so')

>>> class Test(object):
...   def __init__(self):
...     self.response = create_string_buffer("The Response String")
...     self.callback = CFUNCTYPE(c_byte, POINTER(POINTER(c_char)))(self.pyfoo)
...   def pyfoo(self, char_ptr_ptr):
...     char_ptr_ptr[0] = self.response
...     return 0
... 

>>> t = Test()
>>> _ = lib.test(t.callback)
res: 0
buf: The Response String 
```

# wso2 - 从终端端运行 Curl 命令时，我如何在 wso2Dataserviceside 上创建服务以及它将如何在 Wso2ESB 代理端产生影响

> ID：15786636
> 
> 赞同：0
> 
> 时间：2013-04-03T11:53:42.050
> 
> 标签：wso2, wso2esb, wso2dss

我正在研究 Wso2 ESB 和 DataService 服务器。

当我在终端端运行 CURL 命令时，对于 ESB，JSON 如下所示。

```
{"Body":{"Id":0,"Body":       [{"UserGroupId":-1,"UserGroupCode":"NONE","UserGroupName":"NONE","UserGroupCreatedById":-1,"UserGroupCreatedOn":"/Date(1340024633000)/","UserGroupModifiedById":-1,"UserGroupModifiedOn":"/Date(1340024633000)/","UserGroupSortOrder":9999,"UserGroupStatus":1,"UserGroupVersion":1,"UserGroupSourceType":1,"UserGroupDetailArray":[{"UserGroupDetailId":-1,"UserGroupId":-1,"UserGroupCode":"NONE","UserGroupName":"NONE","UserGroupDetailSlNo":1,"UserId":-1,"UserCode":"GBADMIN","UserName":"Administrator"},{"UserGroupDetailId":-149999779,"UserGroupId":-1799999942,"UserGroupCode":"SHSBCPLUM","UserGroupName":"HSBCMALAD_Plumber","UserGroupDetailSlNo":9,"UserId":-2147483640,"UserCode":"r2416","UserName":"AlexRupan"}]}]},"Current":"","ETag":"","First":"","From":"","Id":"","Last":"","Next":"","Previous":"","ReplyTo":"","Status":200,"To":"","Total":5} 
```

为此，我在 DSS 中尝试使用嵌套查询，但它不起作用。我的Dss如上。`enter code here`.

```
 <data name="musergroup_DataService" serviceNamespace="http://ws.wso2.org/dataservice">
   <config id="default">
      <property name="carbon_datasource_name">USCProduction</property>
   </config>

  <query id="selectallusergroups" useConfig="default">
      <sql>select usergroupdetailid as UserGroupDetailId ,musergroup.usergroupid as UserGroupId,usergroupcode as UserGroupCode,usergroupname as UserGroupName,slno as UserGroupDetailSlNo,muser.userid as UserId,usercode as UserCode,username as UserName from muser join musergroupdetail on muser.userid= musergroupdetail.userid join musergroup on musergroupdetail.usergroupid=musergroup.usergroupid</sql>
      <result element="UserGroupDetailArray" rowName="UserGroupDetailArray">
         <element column="UserGroupDetailId" name="UserGroupDetailId" xsdType="integer"/>
         <element column="UserGroupId" name="UserGroupId" xsdType="integer"/>
         <element column="UserGroupCode" name="UserGroupCode" xsdType="string"/>
         <element column="UserGroupName" name="UserGroupName" xsdType="string"/>
         <element column="UserGroupDetailSlNo" name="UserGroupDetailSlNo" xsdType="integer"/>
         <element column="UserId" name="UserId" xsdType="integer"/>
         <element column="UserCode" name="UserCode" xsdType="string"/>
         <element column="UserName" name="UserName" xsdType="string"/>
      </result>
   </query>
   <query id="select_id_columns" useConfig="default">
      <sql>select musergroup.usergroupid as UserGroupId,usergroupcode as UserGroupCode,usergroupname as UserGroupName from musergroup join musergroupdetail on musergroup.usergroupid=musergroupdetail.usergroupid</sql>
      <result element="Body" rowName="Datalist">
         <element column="UserGroupId" name="UserGroupId" xsdType="integer"/>
         <element column="UserGroupCode" name="UserGroupCode" xsdType="string"/>
         <element column="UserGroupName" name="UserGroupName" xsdType="string"/>
         <call-query href="selectallusergroups" requiredRoles=""/>
      </result>
   </query>

   <operation name="selectallusergroups">
      <call-query href="selectallusergroups"/>
   </operation>
   <operation name="select_id_columns">
      <call-query href="select_id_columns"/>
   </operation>
</data> 
```

@我的问题：-如何使用 Dss 在 Esb 代理服务中创建具有端点。

当我在终端端运行 curl 命令时，因为输出高于 JSON。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:37:31.387

有关如何在 WSO2 DSS 上执行嵌套查询的说明，请参阅 [1] 上的博客文章。

要将 DSS 端的 SOAP 服务公开为 ESB 输出上的 JSON，您可以使用 [2] 上 Wso2 esb 上的示例 440。

[1]。[http://dinushasblog.blogspot.com/2012/07/how-to-use-result-of-one-operation-as.html](http://dinushasblog.blogspot.com/2012/07/how-to-use-result-of-one-operation-as.html) [2]。[http://wso2.org/project/esb/java/4.0.3/docs/samples/advanced_mediation_samples.html#Sample440](http://wso2.org/project/esb/java/4.0.3/docs/samples/advanced_mediation_samples.html#Sample440)

谢谢你，达沙那。

# python - python子进程将每一行输出存储在一个列表中

> ID：15786637
> 
> 赞同：3
> 
> 时间：2013-04-03T11:53:43.950
> 
> 标签：python, subprocess, line-by-line

我正在尝试将文件夹中视频文件的尺寸存储到列表中。

```
#!/usr/bin/env python

# src_dimensions.py

# requires mediainfo package

import subprocess

proc = subprocess.Popen('mediainfo --Inform="Video;%Width%x%Height%\n" /home/saad/Videos/*.*', shell=True, stdout=subprocess.PIPE)

for line in iter(proc.stdout.readline,''):
   print line 
```

该程序的结果输出是：

```
384x288640x480480x350352x162480x360640x360480x360384x288240x180320x240480x360384x288346x26 
```

当我`mediainfo`在终端中运行命令时，每个视频维度都在换行符上：

```
384x288
640x480
480x350
352x162
480x360 
```

我希望每个维度都作为单独的项目存储在列表中。我正在尝试迭代，`stdout`但它不起作用。

**更新#1**

```
import subprocess
dim = []
proc = subprocess.Popen('mediainfo --Inform="Video;%Width%x%Height%\\n" /home/saad/Videos/*.*', shell=True, stdout=subprocess.PIPE)
for line in iter(proc.stdout.readline, ''):
   dim.append(line.rstrip('\n'))
print dim 
```

感谢@Chakib 的建议，这似乎给了我列表。

```
['440x360', '320x240', '480x360', '320x240', '480x360', '320x240', '320x240', '400x224', ''] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T13:38:32.660

\这是你想要的吗？

```
#!/usr/bin/env python
# src_dimensions.py
# requires mediainfo package
import subprocess, glob
globpattern = 'path/to/*.*'
cmd = ['mediainfo', '--Inform=Video;%Width%x%Height%\\n']
cmd.extend(glob.glob(globpattern))
proc = subprocess.Popen(cmd,stdout=subprocess.PIPE)
outputlines = filter(lambda x:len(x)>0,(line.strip() for line in proc.stdout))
print outputlines 
```

# java - AndEngine Line.onAreaTouched 未调用

> ID：15786644
> 
> 赞同：1
> 
> 时间：2013-04-03T11:53:59.263
> 
> 标签：java, android, andengine

我有一个扩展 Line 的类，我想检测它是否被按下。

在我的课堂上，我有这个：

```
public boolean onAreaTouched(TouchEvent pSceneTouchEvent,float pTouchAreaLocalX,
 float pTouchAreaLocalY) {

            Log.e("LINE: ", "touch");

        return true;
    } 
```

我在场景中注册了该区域，这应该可以工作，因为我还有 Sprites 的其他区域正在工作。

我想这是因为它只考虑中心线的区域，而不是绘制的区域。

有任何想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T01:36:44.827

我没有机会测试代码，但我正在查看`Line`该类的 AndEngine 文档并设法找到它。

> onAreaTouched(TouchEvent pSceneTouchEvent, 浮动 pTouchAreaLocalX, 浮动 pTouchAreaLocalY)
> 
> *此方法仅在此 Scene.ITouchArea 通过**registerTouchArea(ITouchArea)**注册到场景时触发。*

使用加粗的方法注册。

# python - 多个列表的字典

> ID：15786648
> 
> 赞同：2
> 
> 时间：2013-04-03T11:54:16.820
> 
> 标签：python, python-2.7

我有一个这样的列表：

```
list=[[21768L, u'2'], [1746L, u'2'], [2239L, u'2'],[2239L, u'2'], [1965L, u'2'],[1965L, u'2'], [2425L, u'1'], [2425L, u'1'],[2056L, u'1']] 
```

如何以这样的字典形式获取上述列表：

```
d={u'1':[2425L,2],[2056L,1] , u'2': [21768L, 1],[1746L,1],[2239L,2],[1965L,2]} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T12:02:43.160

使用模块中的 a和`defaultdict`a ：`Counter``collections`

```
from collections import defaultdict, Counter

d = defaultdict(Counter)

for value, key in yourlist:
    d[key].update([value]) 
```

这为您提供了稍微不同的结构：

```
defaultdict(<class 'collections.Counter'>, {u'1': Counter({2425L: 2, 2056L: 1}), u'2': Counter({1965L: 2, 2239L: 2, 21768L: 1, 1746L: 1})}) 
```

但可以按摩到更接近您正在寻找的东西：

```
d = {key: value.most_common() for key, value in d.iteritems()} 
```

这使：

```
{u'1': [(2425L, 2), (2056L, 1)], u'2': [(1965L, 2), (2239L, 2), (21768L, 1), (1746L, 1)]} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:32:20.337

```
>>> from collections import defaultdict, OrderedDict
>>> L = [[21768L, u'2'], [1746L, u'2'], [2239L, u'2'], [2239L, u'2'], [1965L, u'2'],[1965L, u'2'], [2425L, u'1'], [2425L, u'1'], [2056L, u'1']]
>>> d = defaultdict(OrderedDict)
>>> for value, key in L:
        d[key][value] = d[key].get(value, 0) + 1

>>> d
defaultdict(<class 'collections.OrderedDict'>, 
            {u'1': OrderedDict([(2425L, 2), (2056L, 1)]), 
             u'2': OrderedDict([(21768L, 1), (1746L, 1), (2239L, 2), (1965L, 2)])}) 
```

# ios - ASIFormDataRequest 未将带有图像的 JSON 数据发送到 PHP 服务器

> ID：15786650
> 
> 赞同：0
> 
> 时间：2013-04-03T11:54:21.023
> 
> 标签：ios, objective-c, json, asihttprequest, asiformdatarequest

我想使用 JSON 和图像数据向服务器发送 POST 请求。我正在使用下面的代码，但每次运行时都会出现以下错误 -

> { 代码 = 400; Detail = "无法解析 form.request 中的 JSON"; 响应 = 错误；}

这是 ASIFormDataRequest 请求 -

```
ASIFormDataRequest *asiRequest = [ASIFormDataRequest requestWithURL:[NSURL URLWithString:urlForAPI]];
[asiRequest setTimeOutSeconds:60];

NSDictionary *dict1 = [[[NSDictionary alloc]initWithObjectsAndKeys:api_username,@"api_username",api_password,@"api_password",@"updateUser",@"method", nil] autorelease];
NSDictionary *dict2 = [[[NSDictionary alloc]initWithObjectsAndKeys:@"13",@"id",nil] autorelease];
NSDictionary *data = [[[NSDictionary alloc]initWithObjectsAndKeys:dict1,@"request",dict2,@"methodparam", nil] autorelease];

NSMutableDictionary *requestheaders =[[[NSMutableDictionary alloc]init] autorelease];
[requestheaders setValue:@"multipart/form-data; charset=utf-8; boundary=0xKhTmLbOuNdArY-8522EA03-7EA6-446F-9CAB-6EC10511FD22" forKey:@"Content-Type"];
[asiRequest setRequestHeaders:requestheaders];

NSData *jsonData = [data JSONData];
NSString *string = [[[NSString alloc]initWithData:jsonData encoding:NSUTF8StringEncoding] autorelease];
[asiRequest setRequestHeaders:requestheaders];

NSString *jsonString = [NSString stringWithFormat:@"REQUEST=%@",string];
NSData *requestData = [NSData dataWithBytes:[jsonString UTF8String] length:[jsonString length]];

[asiRequest setPostBody:[NSMutableData dataWithData:requestData]];
[asiRequest addData:imageData forKey:@"logo"];

[asiRequest setShouldContinueWhenAppEntersBackground:YES];
[asiRequest setDelegate:self];
[asiRequest setRequestMethod:@"POST"];
[asiRequest setDidFailSelector:@selector(uploadFailed:)];
[asiRequest setDidFinishSelector:@selector(uploadFinished:)];
[asiRequest startAsynchronous]; 
```

如果你知道我哪里错了，请告诉我。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:14:57.307

尝试如下，除此之外不需要做任何事情。

```
NSURL *url = [NSURL URLWithString:@"YOUR_URL_TO_POST"];
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
[request setUseKeychainPersistence:YES];
[request setData:imageData withFileName:@"img.png" andContentType:@"image/png" forKey:@"logo"];
[request setDelegate:self];
[request setDidFinishSelector:@selector(uploadRequestFinished:)];
[request setDidFailSelector:@selector(uploadRequestFailed:)];
[request startAsynchronous]; 
```

并编写委托方法，例如，

```
- (void)uploadRequestFinished:(ASIHTTPRequest *)request{    

     NSString *responseString = [request responseString];
     NSLog( @"response--%@",responseString );

 }
- (void)uploadRequestFailed:(ASIHTTPRequest *)request{

  NSLog(@" Error - Statistics file upload failed: \"%@\"",[[request error]   localizedDescription]);

  } 
```

# javascript - 405 使用 XMLHttpRequest 调用 Web API 方法时找不到方法

> ID：15786653
> 
> 赞同：2
> 
> 时间：2013-04-03T11:54:36.697
> 
> 标签：javascript, jquery, json, asp.net-web-api, cors

我在我的 Web API 方法中启用了 CORS

```
 [EnableCors]
    public HttpResponseMessage PostDeviceControl(DeviceAccessRequest deviceAccessRequest)
    {
        var deviceId = deviceAccessRequest.DeviceId;
        var returnStatus = HttpStatusCode.OK;

        var deviceAccessResponse = new DeviceAccessResponse(deviceAccessRequest.RequestId)
            {
                Message = ""
            };
        var response = Request.CreateResponse<DeviceAccessResponse>(returnStatus, deviceAccessResponse);
        return response;
    } 
```

使用 jQuery 调用 web 方法

```
 var url = "http://localhost:55208/api/accesspanel";

    var request = {
        RequestId: "123",
        DeviceId: "ACU-B2-01-R1",
        AccessType: "Unlock",
        LoginId: "tester",
        Password: "tester"
    };

    $.post(
        url,
        request,
        function (x, y, z) {
            alert(x + ' ' + y + ' ' + z);
        },
        "json"
    ); 
```

以上工作正常。

但是，当我尝试使用纯 javascript 时：

```
 try {
            var xmlreq = null;
            if (window.XMLHttpRequest)
                xmlreq = new XMLHttpRequest();
            else if (window.ActiveXObject)
                xmlreq = new ActiveXObject("Microsoft.XMLHTTP");

            var data2 = {
                RequestId: "123",
                DeviceId: "ACU-B2-01-R1",
                AccessType: "Unlock",
                LoginId: "tester",
                Password: "tester"
            };

            xmlreq.open("POST", "http://localhost:55208/api/accesspanel", false);
            xmlreq.setRequestHeader("Accept", "application/json");
            xmlreq.setRequestHeader("Content-type", "application/json; charset=utf-8");

            xmlreq.onreadystatechange = function() {
                if (xmlreq.readyState == 4 && xmlreq.status == 200) {
                    if (typeof(xmlreq.responseText) == "unknown") {
                        alert("No Data");
                    } else {
                        alert('ok');
                        var objResult = xmlreq.responseText;
                        //document.getElementById('lblGrantAccessResult').innerHTML = objResult;  
                    }

                }
            };
            alert('1');
            xmlreq.send(data2);
        }
        catch (e) {
            alert(e);
        } 
```

这是我在 Chrome 的调试控制台中遇到的错误

```
OPTIONS http://localhost:55208/api/accesspanel 405 (Method Not Allowed) localhost:132
(anonymous function) localhost:132
XMLHttpRequest cannot load http://localhost:55208/api/accesspanel. Origin http://localhost:54873 is not allowed by Access-Control-Allow-Origin. localhost:132 
```

我正在使用此处描述的方法启用 CORS：http: [//blogs.msdn.com/b/carlosfigueira/archive/2012/07/02/cors-support-in-asp-net-web-api-rc-version .aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2012/07/02/cors-support-in-asp-net-web-api-rc-version.aspx)

# c# - 在 C# 中处理 HttpPostedFile

> ID：15786656
> 
> 赞同：1
> 
> 时间：2013-04-03T11:54:45.833
> 
> 标签：c#, post, web-applications, webexception

我有一个 C#.net Web 应用程序，可以（通过 POST 方法）将文件发送到另一个应用程序。在第二个应用程序中，我有以下代码来检索发布的文件。

```
HttpPostedFile hpf = Request.Files[0]; 
```

现在我可以通过代码保存文件

```
hpf.SaveAs("The path to be saved"); 
```

但是*我需要再次将其发送到另一个应用程序而不将其保存在此处*（不保存在第二个应用程序中，我需要将其发送到第三个应用程序）。

（现在我可以做的是将文件保存在第二个应用程序中，然后通过提供与我在第一个应用程序中所做的路径完全相同的路径将其发布到第三个应用程序。但我需要另一个解决方案。）

我试过 hpf.fileName 但它只给出文件名（例如：test.txt）。当我尝试如下

```
string file = hpf.FileName;
string url = "the url to send file";
    using (var client = new WebClient())
    {
        byte[] result = client.UploadFile(url, file);
        string responseAsString = Encoding.Default.GetString(result);
    } 
```

发生 WebException，如“WebClient 请求期间发生异常”。

在 C# .net 中有什么方法可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:39:03.733

问题是，如果您不想按照上一个答案中的建议使用 Web 服务，则需要使用 HttpPostedFile 的 InputStream 属性。您应该使用 HttpWebRequest 对象来创建包含文件内容的请求。周围有很多帖子和教程，包括[this](http://www.codeproject.com/Articles/8600/UploadFileEx-C-s-WebClient-UploadFile-with-more-fu)和[this](https://stackoverflow.com/questions/11048258/uploadfile-with-post-values-by-webclient)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T12:07:32.597

用于创建字节数组 [如何从 HttpPostedFile 创建字节数组](https://stackoverflow.com/questions/359894/how-to-create-byte-array-from-httppostedfile?rq=1)

这是一种在webservice中保存字节的方法

```
[WebMethod]
public string UploadFile(byte[] f, string fileName, string bcode)
{
    if (bcode.Length > 0)
    {
        try
        {
            string[] fullname = fileName.Split('.');
            string ext = fullname[1];
            if (ext.ToLower() == "jpg")
            {
                MemoryStream ms = new MemoryStream(f);
                FileStream fs = new FileStream(System.Web.Hosting.HostingEnvironment.MapPath("~/bookimages/zip/") + bcode+"."+ext, FileMode.Create);
                ms.WriteTo(fs);
                ms.Close();
                fs.Close();
                fs.Dispose();

            }
            else
            {
                return "Invalid File Extention.";
            }
        }
        catch (Exception ex)
        {
            return ex.Message.ToString();
        }
    }
    else
    {
        return "Invalid Bookcode";
    }

    return "Success";
} 
```

# r - 将线拟合到 R 中对数刻度上的数据

> ID：15786658
> 
> 赞同：12
> 
> 时间：2013-04-03T11:55:05.983
> 
> 标签：r, plot, lm

基本上，一旦它是对数刻度，我不知道如何在我的数据上绘制一条最佳拟合线。我使用 lm() 和 abline() 在我的绘图上放置了一条线性回归趋势线，但是现在添加了 log="xy" 这只会产生一条水平线。

![在此处输入图像描述](https://i.stack.imgur.com/n8zia.png)

这是我正在尝试做的一个非常简化的示例（但是，这里完全缺少该行）：

```
lengths = c(10000,3000,3005,3005,3010,20000)
counts = c(3,1,1,2,1,3)
line=lm(counts~lengths)
plot(lengths, counts, col="green", log="xy")
abline(line, col="blue") 
```

我已经尝试了很多我在类似问题上发现的东西（例如使用`log10()`and `lines()`），但它们没有处理我的数据。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-03T12:20:41.167

```
abline(line, col="blue",untf=TRUE) 
```

哎呀，对不起，我没有注意到上面的评论。

# android - Android Manifest 中的错误 - 根元素之后的文档中的标记必须格式正确

> ID：15786661
> 
> 赞同：0
> 
> 时间：2013-04-03T11:55:21.250
> 
> 标签：android

我是Android开发的初学者。我试图在 Eclipse Indigo 中开发一个 android 应用程序。当用户单击按钮时，我想打开一个新屏幕。所以我添加了一个新的活动，添加新的活动后突然出现了这个错误。我在这里看到了类似的问题，我的理解是，XML 文件不应包含多个清单标记和应用程序标记。我的文件不包含任何内容，我不明白发生了什么。请帮我..

这是我的 Android 清单 XML

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.e.dropdown"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="11"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.e.dropdown.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
     android:name="com.e.dropdown.ClickActivity"
     class=".ClickActivity" 
     android:label="@string/screen2">
  </activity>
</application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T11:56:35.537

删除`class=".ClickActivity"`你不需要它来开始新的活动

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T11:57:19.303

**类=".ClickActivity"**

从下面的代码中删除上面的行

```
<activity
 android:name="com.e.dropdown.ClickActivity"
 class=".ClickActivity" 
 android:label="@string/screen2"> 
```

# php - 在 HTML 中使用 PHP 变量

> ID：15786666
> 
> 赞同：-1
> 
> 时间：2013-04-03T11:55:26.710
> 
> 标签：php, html

晚上所有，

我有一个重新编程问题，希望得到一些帮助

```
<div style="width:800px;height:100px;border:2px solid black;">
<html>
<body>
<br>
<?php

mysql_connect("localhost", "user", "password!") or die (mysql_error());
#echo "Connected to MYSQL ";
mysql_select_db("starforg_search") or die (mysql_error());
#echo "Connected to Data Base";
$query = "SELECT * FROM addserver";
$result = mysql_query ($query) or die (mysql_error());
while ($row = mysql_fetch_array($result)) {
        $value = $row['servername'];
        $value2 = $row['serveraddress'];
        $value3 = $row['portnumber'];
        $value4 = $row['description'];

}

?>

&nbsp;Server Name :<?php echo $_POST[$value1]; ?> 

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Server Address : <?php echo $_POST[$value2]; ?>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Port Number : <?php echo $_POST[$value3]; ?>
<br>
<br>
&nbsp;Server Description : <?php echo $_POST[$value4]; ?>
<br>
<br>

// Script by Akensai

<?php
$ip = $_POST[$value];
$port = $_POST[$value2];

if (!$socket = @fsockopen($ip, $port, $errno, $errstr, 30))
{
 echo "&nbsp;<font color='red'><CENTRE><strong>Server Is Offline!</strong></CENTRE></font>";
}
else 
{
 echo "&nbsp;<font color='green'><CENTRE><strong> Server Is Online!</strong></CENTRE></font>";  

  fclose($socket);
}
?>
<p>&nbsp;Server status is updated every hour</p>
<br>
</body>
</html> 
</div> 
```

**这是输出**

![在此处输入图像描述](https://i.stack.imgur.com/0D6Wt.jpg) 不用说，我希望将 PHP 脚本中的值添加到 HTML 字段中

如果我只是回显并从 Mysql 调用 PHP 值，它工作正常，所以我必须有一些 HTML 语法错误，请尽可能纠正。

谢谢你的时间

本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T11:57:35.007

你只需要`echo $value1;`代替`echo $_POST[$value1];`

此外，没有`$value1`. 如果您想检索您的服务器名称，它应该只是`$value`

应该将相同的概念应用于您要检索的其他值。

$_POST 用于收集带有 method="post" 的表单中的值，而不是从 SQL 查询中检索值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:01:10.910

您是否从 URL 获取值？如果没有，你为什么要使用 $_POST[...] ？？？

`Server Name :<?php echo $_POST[$value1]; ?>`

我想你需要像这样使用它：

`Server Name :<?php echo $value1; ?>`

这应该适合你。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T12:06:55.427

POST 和 GET 是从表单或通过 URL 传递变量的方法。您在此代码中声明变量，因此只需使用`$value`not `$_POST[$value]`。您正在寻找一个 POSTed 变量，其名称包含在`$value`.

此外，您不应该在`<div>`标签之外有`<html>`标签。

这段代码应该可以工作。

```
<html>
<div style="width:800px;height:100px;border:2px solid black;">
<body>
<br>
<?php

mysql_connect("localhost", "starforg_forg13", "Tigger161!") or die (mysql_error());
#echo "Connected to MYSQL ";
mysql_select_db("starforg_search") or die (mysql_error());
#echo "Connected to Data Base";
$query = "SELECT * FROM addserver";
$result = mysql_query ($query) or die (mysql_error());
while ($row = mysql_fetch_array($result)) {
        $value1 = $row['servername'];
        $value2 = $row['serveraddress'];
        $value3 = $row['portnumber'];
        $value4 = $row['description'];

}

?>

&nbsp;Server Name :<?php echo $value1; ?> 

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Server Address : <?php echo $value2; ?>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Port Number : <?php echo $value3; ?>
<br>
<br>
&nbsp;Server Description : <?php echo $value4; ?>
<br>
<br>

// Script by Akensai

<?php
$ip = $value;
$port = $value2;

if (!$socket = @fsockopen($ip, $port, $errno, $errstr, 30))
{
 echo "&nbsp;<font color='red'><CENTRE><strong>Server Is Offline!</strong></CENTRE></font>";
}
else 
{
 echo "&nbsp;<font color='green'><CENTRE><strong> Server Is Online!</strong></CENTRE></font>";  

  fclose($socket);
}
?>
<p>&nbsp;Server status is updated every hour</p>
<br>
</body>
</div>
</html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T12:14:08.027

我已经更正了代码，我希望这对你有用..

```
<html>
    <head>
    <title>
    Server-Info
    </title>
    </head>

    <body>
    <div style="width:800px;height:100px;border:2px solid black;">
    <br>
    <?php

    mysql_connect("localhost", "starforg_forg13", "Tigger161!") or die (mysql_error());
    #echo "Connected to MYSQL ";
    mysql_select_db("starforg_search") or die (mysql_error());
    #echo "Connected to Data Base";
    $query = "SELECT * FROM addserver";
    $result = mysql_query ($query) or die (mysql_error());
    while ($row = mysql_fetch_array($result)) {
            $value = $row['servername'];
            $value2 = $row['serveraddress'];
            $value3 = $row['portnumber'];
            $value4 = $row['description'];

    }

    ?>

    &nbsp;Server Name :<?php echo $value; ?> 

    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Server Address : <?php echo $value2; ?>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Port Number : <?php echo $value3; ?>
    <br>
    <br>
    &nbsp;Server Description : <?php echo $value4; ?>
    <br>
    <br>

    // Script by Akensai

    <?php
    $ip = $value;
    $port = $value2;

    if (!$socket = @fsockopen($ip, $port, $errno, $errstr, 30))
    {
     echo "&nbsp;<font color='red'><CENTRE><strong>Server Is Offline!</strong></CENTRE></font>";
    }
    else 
    {
     echo "&nbsp;<font color='green'><CENTRE><strong> Server Is Online!</strong></CENTRE></font>";  

      fclose($socket);
    }
    ?>
    <p>&nbsp;Server status is updated every hour</p>
    <br>
</div>
</body>
</html> 
```

# javascript - 循环中多个 http 请求的低带宽使用/低吞吐量

> ID：15786668
> 
> 赞同：0
> 
> 时间：2013-04-03T11:55:29.393
> 
> 标签：javascript, performance, node.js, networking, tcp

我正在使用**Node.Js v0.10.2**并在一个循环中处理大约 500 个链接。http请求卡住了，我一直可以看到带宽下降。

在我的 100mbit 专用服务器上，我只有[~4500KB/s 的吞吐量](http://i.imgur.com/kVPuNY0.png)。在我的 64 mbit 连接的家用计算机上只有 1500KB/s 的吞吐量。我`slurm`用于吞吐量测量。

我在*16gb ram*上运行带有*i7 2600的**debian 6*。

 **我还尝试了不同的代理配置并尝试了 Connection: Close / Keep-Alive，但仍然没有任何改进。

我真的不知道它缺少什么......

> 节点服务器[.js](http://pastie.org/private/bgx7xc7qsxv0mohrczsm7q)

**/etc/sysctl.conf：**

```
net.core.rmem_max = 33554432
net.core.wmem_max = 33554432
net.ipv4.tcp_rmem = 4096 16384 33554432
net.ipv4.tcp_wmem = 4096 16384 33554432
net.ipv4.tcp_mem = 786432 1048576 26777216
net.ipv4.tcp_max_tw_buckets = 360000
net.core.netdev_max_backlog = 2500
vm.min_free_kbytes = 65536
vm.swappiness = 0
net.ipv4.ip_local_port_range = 1024 65535
net.ipv4.tcp_fin_timeout = 1
net.ipv4.tcp_tw_recycle = 1
net.ipv4.tcp_tw_reuse = 1
net.core.somaxconn = 35000
net.core.netdev_max_backlog = 32000
net.ipv4.tcp_max_syn_backlog = 64000
fs.file-max = 1000000 
```

**ulimit -a**

```
core file size          (blocks, -c) 0
data seg size           (kbytes, -d) unlimited
scheduling priority             (-e) 0
file size               (blocks, -f) unlimited
pending signals                 (-i) 127906
max locked memory       (kbytes, -l) 64
max memory size         (kbytes, -m) unlimited
open files                      (-n) 99999
pipe size            (512 bytes, -p) 8
POSIX message queues     (bytes, -q) 819200
real-time priority              (-r) 0
stack size              (kbytes, -s) 8192
cpu time               (seconds, -t) unlimited
max user processes              (-u) 127906
virtual memory          (kbytes, -v) unlimited
file locks                      (-x) unlimited 
```**

# jsp - 有没有像 Primefaces 这样的 JSP 框架？

> ID：15786670
> 
> 赞同：1
> 
> 时间：2013-04-03T11:55:38.327
> 
> 标签：jsp

Primefaces 是非常有用且易于学习的 JSF 用户界面。我更喜欢使用 JSP 进行 Web 开发，并且我需要一个美观且易于学习的框架。我喜欢 ExtJS，但它不是免费的，我买不起。我的应用程序基于数据表。你有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T19:35:46.567

不幸的是，在使用 JSP 编写丰富的 UI 时，您找不到像 Primefaces 那样集成良好的替代品。

依赖 JSF 的 Primefaces 是面向事件的，并且与 UI 强耦合，有助于提供丰富的小部件，如数据表。

JSP 是面向请求的，我不知道丰富的标记库。

我可以建议你的最好的事情是使用 jQuery 或其他 javascript 框架。

有关您的信息，jQuery 有一个数据表插件，请查看[http://www.datatables.net/](http://www.datatables.net/)

**更新**

我差点忘了，你也可以看看[DWR](http://directwebremoting.org/) ，它有助于在 Java 中构建高度*ajaxified的应用程序。*

# android - 在 Android 的 Sherlocks 库中更改 ActionBar 中选项卡的背景颜色？

> ID：15786673
> 
> 赞同：0
> 
> 时间：2013-04-03T11:55:40.253
> 
> 标签：android, tabs, actionbarsherlock

我正在使用 Sherlock 库在 Actionbar 上工作。我想以不同的方式更改操作栏和选项卡的背景图像。目前我已经在运行时通过代码成功更改了操作栏的背景：

```
Drawable myIcon = getResources().getDrawable(R.drawable.blue_menu_background);
mActionBar.setBackgroundDrawable(myIcon); 
```

但是我遇到了标签背景的问题。如何更改选项卡的背景。请给我建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T13:01:00.913

您可以使用以下代码：

```
actionBar.setStackedBackgroundDrawable(new ColorDrawable(yourColor)); // for example new ColorDrawable(Color.BLUE) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T12:18:00.840

除了这样做，您可以使用 Style for Tabs：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <!-- the theme applied to the application or activity -->
    <style name="CustomActivityTheme" parent="@android:style/Theme.Holo">
        <item name="android:actionBarTabTextStyle">@style/CustomTabTextStyle</item>
        <item name="android:actionBarDivider">@drawable/ab_divider</item>
        <item name="android:actionBarItemBackground">@drawable/ab_item_background</item>
    </style>

    <!-- style for the action bar tab text -->
    <style name="CustomTabTextStyle" parent="@android:style/TextAppearance.Holo">
        <item name="android:textColor">#2456c2</item>
    </style>
</resources> 
```

查看这篇[文章](http://developer.android.com/guide/topics/ui/actionbar.html)了解更多详情。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-12-17T07:51:07.807

要更改操作栏选项卡的颜色，请使用以下代码：

//例如如果你想要白色作为标签背景，那么

```
getActionBar().setStackedBackgroundDrawable(new ColorDrawable(Color.parseColor("#FFFFFF"))); 
```

# php - php SSL客户端证书认证

> ID：15786674
> 
> 赞同：1
> 
> 时间：2013-04-03T11:55:42.577
> 
> 标签：php, ssl

我已经听说过变量的`SSL_CLIENT_S_DN_CN`属性`$_SERVER`（但我无法配置 apache 来获取这个变量，但这是另一个话题）。

我想知道我是否能够获得`*.crt`这些值的文件。有人做过吗？这样的操作可以吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-21T10:05:29.833

我认为你可以使用`$_SERVER['SSL_CLIENT_CERT']`

要填充此属性，您需要添加`SSLOptions +ExportCertData`到您的 apache 配置中

虽然从未尝试过，但我使用“SSL_CLIENT_I_DN_*”属性，因此完整的证书不会随从 apache 到 php 的每个请求一起发送：[在此处解释](http://cweiske.de/tagebuch/ssl-client-certificates.htm)

# asp.net-mvc - 带有类别的 mvc 4 下拉列表

> ID：15786675
> 
> 赞同：1
> 
> 时间：2013-04-03T11:55:51.617
> 
> 标签：asp.net-mvc, asp.net-mvc-4, razor

如何`dropdownlist`在我的视图中插入一个类别？

我有模特

```
public class IdeaModel
{
    [Required]
    [Display(Name = "Idea tilte")]
    [StringLength(250, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
    public string IdeaTilte { get; set; }

    [Required]
    [Display(Name = "CategoryName")]
    public string CategoryName { get; set; }

    [Required]
    [Display(Name = "CategoryID")]
    public int CategoryID { get; set; }

    [Display(Name = "Main content")]
    [DataType(DataType.MultilineText)]
    [StringLength(1000, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 30)]
    public string Content { get; set; }
} 
```

我的观点（我想要一个下拉列表，而不是 TextBoxFor CategoryName 和 CategoryID）

```
@model TakesCare.Models.IdeaModel

<section id="">
@using (Html.BeginForm()) {
    @Html.AntiForgeryToken()
    @Html.ValidationSummary()
    @ViewBag.Status

    <fieldset>
        <legend>Add an idea</legend>
        <ol>
            <li>
                @Html.LabelFor(m => m.IdeaTilte)
                @Html.TextBoxFor(m => m.IdeaTilte)
            </li>
            //one dropdownlist, instead of TextBoxFor CategoryName and CategoryID
            <li>
                @Html.LabelFor(m => m.CategoryName)
                @Html.TextBoxFor(m => m.CategoryName)
            </li>
            <li>
                @Html.LabelFor(m => m.CategoryID)
                @Html.TextBoxFor(m => m.CategoryID)
            </li>*@
            <li>
                @Html.LabelFor(m => m.Content)
                @Html.EditorFor(m => m.Content)
            </li>
        </ol>
        <input type="submit" value="AddIdea" />
    </fieldset>
}
</section> 
```

我有类别：

> “猫 1”，id=1
> 
> “Cat2”，id=2
> 
> “Cat3”，id=3

我的第一个问题是——我应该在哪里存储这些数据？（类别名称和 ID）
在我的`IdeaModel`?

第二个问题是-如何在`dropdownlist`我的所有类别中显示-然后，如何从中获取 HttpPost 中的 ID 值`dropdownlist`？什么是最简单的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T12:12:18.743

您还可以在数据库中有一个表来存储您的下拉列表访问表（或）

将模型属性定义为模型中的类别，如下所示：

```
public IEnumerable<SelectListItem> Categories
        {
            get
            {
                return new[]
                {
                    new SelectListItem { Value = "1", Text = "Cat1"},
                    new SelectListItem { Value = "2", Text = "Cat2" },
                    new SelectListItem { Value = "3", Text = "Cat3" }
                };
            }
        } 
```

现在在您看来，您应该使用`Html.DropdownlistFor`

```
@Html.DropDownListFor(m=>m.CategoryID ,Model.Categories) 
```

当您发布数据时，您将在模型的 CategoryId 属性中收到您的 id

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-30T00:24:09.050

我建议您在 ViewBag 中创建一个 SelectList，您可以调用它来填充您的下拉列表……它会显示您的类别名称并返回您的类别 ID。

在控制器中：

```
var categories = db.IdeaModel.OrderBy(CategoryName);
SelectList categoryList = new SelectList(categories, "CategoryId", "CategoryName");
viewBag.categoryList = categoryList; 
```

在视图中：

```
@Html.DropDownListFor(m=>m.CategoryId, @ViewBag.categoryList) 
```

# c# - 从 Tcl 调用 C# 函数

> ID：15786678
> 
> 赞同：1
> 
> 时间：2013-04-03T11:56:02.373
> 
> 标签：c#, .net, tcl, wrapper

我想将 Tcl shell 集成到我的 .NET 应用程序中。一旦我使用 SWIG 对 C++ 应用程序执行相同操作，但 SWIG 不会为 C# 代码生成包装器。有什么工具吗？如果没有，是否有人有如何使用 Tcl API 手动执行此操作的示例？从 C++ 翻译它非常困难。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T12:19:41.877

你最好的选择是看[鹰](http://eagle.to/)。更重要的是，Eagle 的开发者是混合 Tcl 和 .NET CLR*的*专家。

# bash - shopt -s extglob 不工作

> ID：15786680
> 
> 赞同：1
> 
> 时间：2013-04-03T11:56:03.243
> 
> 标签：bash, wildcard

我在远程服务器上运行我的脚本。这是我的 .sh 脚本的标题：

```
#!/bin/bash

shopt -s extglob; 
#turns on extended globbing features ('!' can then be used to exclude file names)

echo `ls -la /storage/brno2/home/nicki/snp/`;
cp -r /storage/brno2/home/nicki/snp/(!input) . 
```

感谢 echo，我可以看到名为“input”的文件夹位于我期望的文件夹中。但是，似乎 extglob 不适合我:(

```
/var/spool/torque/mom_priv/jobs/2308017.arien.ics.muni.cz.SC: line 11: syntax error near unexpected token `('
/var/spool/torque/mom_priv/jobs/2308017.arien.ics.muni.cz.SC: line 11: `cp -r /storage/brno2/home/nicki/snp/(!input) .' 
```

我当然可以列出我想要复制的所有文件。不过，我想避免这种讨厌的做法..

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T11:59:44.583

扩展 glob 的正确语法是

```
!(pattern-list) 
```

感叹号应放在括号外。

# php - 如何使用 php api 访问 Quickbooks 发票行项目

> ID：15786681
> 
> 赞同：2
> 
> 时间：2013-04-03T11:56:03.697
> 
> 标签：php, quickbooks, quickbooks-online

我正在尝试使用 php api 在快速手册中访问发票的行项目，

这样我就可以对其进行一些操作.....

当我这样做时，我能够获取发票数据......

```
<?php
$Invoice = $InvoiceService->findById($Context, $realmID, $InvoiceID);
pr($Invoice);
?> 
```

结果如下

```
QuickBooks_IPP_Object_Invoice Object
(
    [_data:protected] => Array
        (
            [Id] => Array
                (
                    [0] => {QBO-52}
                )

            [SyncToken] => Array
                (
                    [0] => 13
                )

            [MetaData] => Array
                (
                    [0] => QuickBooks_IPP_Object_MetaData Object
                        (
                            [_data:protected] => Array
                                (
                                    [CreateTime] => Array
                                        (
                                            [0] => 2013-04-02T02:55:30-07:00
                                        )

                                    [LastUpdatedTime] => Array
                                        (
                                            [0] => 2013-04-03T04:15:53-07:00
                                        )

                                )

                        )

                )

            [Header] => Array
                (
                    [0] => QuickBooks_IPP_Object_Header Object
                        (
                            [_data:protected] => Array
                                (
                                    [TxnDate] => Array
                                        (
                                            [0] => 2013-03-31-07:00
                                        )

                                    [Msg] => Array
                                        (
                                            [0] => Customer Message update via QB++
                                        )

                                    [CustomerId] => Array
                                        (
                                            [0] => {QBO-35}
                                        )

                                    [SubTotalAmt] => Array
                                        (
                                            [0] => 15.00
                                        )

                                    [TotalAmt] => Array
                                        (
                                            [0] => 15.00
                                        )

                                    [ToBePrinted] => Array
                                        (
                                            [0] => false
                                        )

                                    [ToBeEmailed] => Array
                                        (
                                            [0] => false
                                        )

                                    [DueDate] => Array
                                        (
                                            [0] => 2013-04-29-07:00
                                        )

                                    [BillAddr] => Array
                                        (
                                            [0] => QuickBooks_IPP_Object_BillAddr Object
                                                (
                                                    [_data:protected] => Array
                                                        (
                                                            [Line1] => Array
                                                                (
                                                                    [0] => Jeffery
                                                                )

                                                            [Line2] => Array
                                                                (
                                                                    [0] => Ads India
                                                                )

                                                            [Line3] => Array
                                                                (
                                                                    [0] => Jeffery trading Co Ltd
                                                                )

                                                            [Line4] => Array
                                                                (
                                                                    [0] => Cochin
                                                                )

                                                            [Line5] => Array
                                                                (
                                                                    [0] => Kerala
India
                                                                )

                                                            [GeoCode] => Array
                                                                (
                                                                    [0] => INVALID
                                                                )

                                                        )

                                                )

                                        )

                                    [ShipAddr] => Array
                                        (
                                            [0] => QuickBooks_IPP_Object_ShipAddr Object
                                                (
                                                    [_data:protected] => Array
                                                        (
                                                            [Line1] => Array
                                                                (
                                                                    [0] => Jeffery
                                                                )

                                                            [Line2] => Array
                                                                (
                                                                    [0] => Jeffery trading Co Ltd\\nJeffery traders\\nCochin\\nIndia
                                                                )

                                                            [Line3] => Array
                                                                (
                                                                    [0] => Jeffery
                                                                )

                                                            [Line4] => Array
                                                                (
                                                                    [0] => 0484232425
                                                                )

                                                            [PostalCode] => Array
                                                                (
                                                                    [0] => 0
                                                                )

                                                            [GeoCode] => Array
                                                                (
                                                                    [0] => INVALID
                                                                )

                                                            [Tag] => Array
                                                                (
                                                                    [0] => CUSTOMER
                                                                )

                                                        )

                                                )

                                        )

                                    [ShipMethodId] => Array
                                        (
                                            [0] => {QBO-}
                                        )

                                    [Balance] => Array
                                        (
                                            [0] => 15.00
                                        )

                                    [DiscountTaxable] => Array
                                        (
                                            [0] => true
                                        )

                                )

                        )

                )

            [Line] => Array
                (
                    [0] => QuickBooks_IPP_Object_Line Object
                        (
                            [_data:protected] => Array
                                (
                                    [Desc] => Array
                                        (
                                            [0] => TES15++
                                        )

                                    [Amount] => Array
                                        (
                                            [0] => 15.00
                                        )

                                    [Taxable] => Array
                                        (
                                            [0] => false
                                        )

                                    [ItemId] => Array
                                        (
                                            [0] => {QBO-30}
                                        )

                                )

                        )

                    [1] => QuickBooks_IPP_Object_Line Object
                        (
                            [_data:protected] => Array
                                (
                                    [Amount] => Array
                                        (
                                            [0] => 0.00
                                        )

                                    [Taxable] => Array
                                        (
                                            [0] => false
                                        )

                                    [ItemId] => Array
                                        (
                                            [0] => {QBO-21}
                                        )

                                )

                        )

                )

        )

) 
```

我可以分别获取发票 ID，客户 ID，如下所示

```
<?php

pr($Invoice->getId());

pr($Invoice->getHeader()->getCustomerId());

?> 
```

**我的问题是如何获取行项目的数量并将其提取到普通数组中**

我厌倦了`pr($Invoice->getLine());`它并没有给我整个数组，而只是该数组中的第一项...

我发现很难做到这一点......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T15:11:21.653

```
$Invoice->getLine(0);
$Invoice->getLine(1);
$Invoice->getLine(2);
$Invoice->getLine(3);
etc. 
```

或者

```
$count = $Invoice->countLine();
for ($i = 0; $i < $count; $i++)
{
  $Line = $Invoice->getLine($i);
} 
```

# python - python中更多面向对象的sql

> ID：15786685
> 
> 赞同：0
> 
> 时间：2013-04-03T11:56:13.950
> 
> 标签：python, sql, object-oriented-database

我正在考虑将 sql 代码引入 python 对象，并使用数据模型提供的更多特殊方法。这是我的想法。你有什么意见？你会怎么做？

让我们定义一些表

```
table users
    id: int
    username: string
    group_id: int

table groups
    id: int
    name: string

table values:
    id: int
    value_type_id: int
    value: string
    user_id: int

table value_types:
    id: int
    name: int 
```

假设我们在 python 中有适当的类，名为 User、Group、Value、ValueType。

要获取特定用户的所有值，我会写：

```
values = Value.db
values.user.id == request["user_id"] 
```

或者如果没有指定外键

```
values.user_id == request["user_id"] 
```

要从数据库中获取值，我会像其他人一样进行迭代：

```
for value in values:
-> select * from values where user_id = ? 
```

如果我不想要所有列，我会在迭代之前指定列，可能是这样的：

```
for value in values >> (values.value_type_id):
-> select value_type_id from values where user_id = ?" 
```

但也许上面的阵型太过分了，太复杂了。也许我应该使用更简单的东西，例如：

```
for value in values.fields(values.value_type_id):
-> select value_type_id from values where user_id = ?" 
```

如果我们想获得 ValueType 对象以及所有返回的值，我会做这样的事情：

```
values_types = Values.db
for (value_type, value) in (value_types + values):
-> select * from value_types join values ... 
```

要添加没有外键的连接，我需要单独指定连接条件，像这样

```
 groups = Group.db
 values.user.group_id == groups.id
 for (value, group) in (values + groups):
 -> select users.*,groups.* from values join users join groups 
```

比较部分很简单。我们可以轻松地模拟 <、<=、>、>=、==、in。所有这些比较函数都会改变 db manager sql 条件。

对于分组，我正在考虑使用这样的除法。你会用什么？

```
for value in values.fields(values.value_type_id) / values.value_type_id:
-> select value_type_id from values groupd by value_type_id 
```

对于左连接，我会使用 +=。

```
for (value, group) in (values += groups):
 -> select users.*,groups.* from values join users left join groups 
```

我现在在想的是如何实现排序、拥有和区分。还不知道。也许你能帮忙？

嗯，这些是我最初的原始想法。欢迎您的想法。你会怎么做？你将做点什么不同的？

# python - groupby 包含多个元素

> ID：15786686
> 
> 赞同：0
> 
> 时间：2013-04-03T11:56:15.873
> 
> 标签：python, pandas

我正在尝试在 DataFrame 中恢复包含多个元素的组的行（按类型）。

```
TYPE VALEUR
M1   A
M1   B
M2   A 
```

结果应该是：

```
TYPE VALEUR
M1   A
M1   B 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T12:34:24.607

不知道优雅的解决方案。这是我的愚蠢：

```
In [149]: m = df.groupby('TYPE').size() > 1

In [151]: df[df['TYPE'].map(m)]
Out[151]: 
  TYPE VALEUR
0   M1      A
1   M1      B 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T13:36:42.863

`ix`如果您首先设置`TYPE`为索引，您也可以使用：

```
df.set_index("TYPE", inplace=True)
df.ix[df.groupby(level=0).size() > 1] 
```

# jpeg - Apache-FOP - 减少嵌入到 PDF 中的图像大小

> ID：15786688
> 
> 赞同：4
> 
> 时间：2013-04-03T11:56:16.183
> 
> 标签：jpeg, image-resizing, xsl-fo, apache-fop

我有很多应该嵌入到生成的 PDF 中的 JPG 图像。它们具有相当大的分辨率，每个大约 5-10MB。我想将它们作为预览嵌入到 PDF 中，并且我正在使用适合缩放的 XSL-FO 属性。图像在 PDF 中出现正确调整大小，但生成的 PDF 的大小相当大，基本上是所有图像大小的总和。我很好奇在生成 PDF 之前无需在单独的步骤中预处理图像的情况下减小 PDF 大小的最佳方法（可能的方法）是什么？（因此，如果 PDF 大小与 PDF 中显示的图像一样小，则 PDF 大小约为所有图像大小的总和）

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-19T16:42:26.757

你有两个选择：

1.  对 PDF 进行后处理。您可以在 Acrobat 中打开它并使用“减小文件大小”选项进行保存。

2.  使用另一个 FO 格式化程序。例如，Antennahouse 格式化程序可以对图像进行下采样。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-10-07T12:01:35.357

我正在使用 Apache FOP 1.1。据我了解，您的要求是，您想要减小图像大小。

```
<fo:external-graphic 
     src="url('image path')" 
     content-height="2cm" 
     height="2cm"  
     content-width="2cm" 
     scaling="non-uniform" >
</fo:external-graphic> 
```

这里重要的部分是**缩放**属性。它可以有三个值 1.uniform - 默认情况下，如果您没有指定 2.non-uniform - 它将根据 content-width 和 content-height 获得。3.继承

根据您的要求，您应该将缩放定义为非均匀。这意味着它不会保持图像的纵横比。谢谢

你可以参考 [http://www.schemacentral.com/sc/fo11/e-fo_external-graphic.html](http://www.schemacentral.com/sc/fo11/e-fo_external-graphic.html)

# django - 当 DEBUG = False 时 Django 转义 javascript

> ID：15786690
> 
> 赞同：2
> 
> 时间：2013-04-03T11:56:19.953
> 
> 标签：django, django-templates, escaping, django-cms

我在一个 Django 网站上遇到了这个奇怪的错误，该网站可以正常工作，`DEBUG = True`但在`DEBUG = False`.

一件可能通用的事情是，当 DEBUG 为 True 时，管理应用程序中的内联 javascript 会被转义。例如：

```
if(message && message!="error") 
```

变成

```
if(message &amp;&amp; message!="error") 
```

这显然是无益的......

有谁知道为什么会发生这种情况的任何一般原因？

更具体地说，这个站点使用的是 Django CMS 2.3.5，我看到的管理页面是 CMS 页面管理的一部分。我们在管理系统中有一个小的模板更改，但我已经删除了该模板更改并且错误仍然存​​在。无论如何，在下载页面之前，Django 模板引擎中似乎正在发生转义。

任何指示、帮助或可以更仔细地查看的好地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:14:05.513

原来是[django-htmlmin](https://pypi.python.org/pypi/django-htmlmin)中间件 - 默认情况下，它只在`DEBUG`设置为`False`. 我已经[提交了一个错误](https://github.com/cobrateam/django-htmlmin/issues/46)。

转义实际上是由[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)完成的——我问[了另一个关于如何避免转义的问题](https://stackoverflow.com/questions/15946059/how-to-stop-beautifulsoup-escaping-inline-javascript)。

由于只有管理页面受到影响，我通过添加以下内容解决了这个问题：

```
EXCLUDE_FROM_MINIFYING = ('^admin/', '^en/admin/') 
```

到`settings.py`

# c# - 在代码中使用 System.Windows.Interactivity.EventTrigger

> ID：15786691
> 
> 赞同：1
> 
> 时间：2013-04-03T11:56:20.647
> 
> 标签：c#, .net, wpf, expression-blend

我正在尝试使用`System.Windows.Interactivity.EventTrigger`in 代码（而不是在 XAML 中）。我有这个代码。

主要代码：

```
var textBox = new TextBox();
var triggerAction = new TextBoxTrigger();
var eventTrigger = new EventTrigger("TextChanged");
eventTrigger.Actions.Add(triggerAction);
Interaction.GetTriggers(textBox).Add(eventTrigger);

// This triggers the event
textBox.Text = "Changed"; 
```

文本框触发器.cs：

```
public class TextBoxTrigger : TriggerAction<TextBox>
{
    protected override void Invoke(object parameter)
    {                        
    }
} 
```

我在 Invoke 方法上的断点`TextBoxTrigger`永远不会被击中。一个有趣的事情是，我已经用我的自定义对象（而不是 TextBox）尝试了这个，从`DependencyObject`and派生`UIElement`，这两个都有效。每当我将基类更改为`FrameworkElement`（或任何其他派生类）时，都会停止调用该操作，此外，事件是`null`.

我错过了什么？头疼了一整天，求大神帮忙。

# sencha-touch - 如何使用 show by 在按钮上方的弹出框中显示列表？

> ID：15786693
> 
> 赞同：0
> 
> 时间：2013-04-03T11:56:26.143
> 
> 标签：sencha-touch, sencha-touch-2

**我的列表视图：**

```
Ext.define("SenchaMaint2.view.MenuList", {
    extend: 'Ext.Container',
    alias: 'widget.menulist',

    requires: [

    ],

    config: {
        layout: 'fit',        
        items: [
            {                
                xtype: 'list',                                           
                itemTpl: [
                    '<div>{MenuItem}</div>'
                ],               
                store: 'menuListStore'
            }            
        ]
    }
}); 
```

如何让它显示在停靠到底部工具栏按钮上方的面板弹出窗口中？我在我的控制器中获得了对列表的引用。我正在对按钮使用 showBy() 方法，但我得到的只是一个没有填充面板的小箭头。我知道列表正在填充，因为我在视图中显示了整个列表以进行测试。在弹出窗口中使用列表时，“适合”布局似乎有问题？

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:57:01.197

尝试像这样指定列表的宽度和高度：

```
Ext.define("SenchaMaint2.view.MenuList", {
extend: 'Ext.Container',
alias: 'widget.menulist',

requires: [

],

config: {
    layout: 'fit',  
    height: 200,
    width: 200,      
    items: [
        {                
            xtype: 'list',                                           
            itemTpl: [
                '<div>{MenuItem}</div>'
            ],               
            store: 'menuListStore'
        }            
    ]
}
}); 
```

然后按如下按钮显示：

```
menulist.showBy(button, "tl-bl?"); 
```

# sql-server - 每行删除重复的 SQL 数据

> ID：15786699
> 
> 赞同：2
> 
> 时间：2013-04-03T11:56:39.403
> 
> 标签：sql-server, sql-server-2008

继[较早的问题](https://stackoverflow.com/questions/15784525/rearranging-and-deduplicating-sql-columns-based-on-column-data)之后，我正在尝试整理一个包含电话号码的 SQL 表。我需要删除*每行*重复的数字- 而不是整个表格。例如，我的表如下所示：

```
 | CustomerID | Tel1     | Tel2      | Tel3     | Tel4      | Tel5      | Tel6     |
 | Cust001    | 01222222 | 012333333 | 07111111 | 07222222  | 01222222  | NULL     |
 | Cust002    | 07444444 | 07555555  | 015333333| 07555555  | NULL      | NULL     |
 | Cust003    | 01222222 | 017777777 | 07888888 | 017777777 | 016666666 | 01222222 | 
```

我想删除在同一行中出现两次或多次的任何数字......所以表格最终看起来像：

```
 | CustomerID | Tel1     | Tel2      | Tel3     | Tel4     | Tel5      | Tel6   |
 | Cust001    | 01222222 | 012333333 | 07111111 | 07222222 | NULL      | NULL   |
 | Cust002    | 07444444 | 015333333 | 07555555 | NULL     | NULL      | NULL   |
 | Cust003    | 01222222 | 017777777 | 07888888 | 016666666| 013333    | NULL   | 
```

电话号码的顺序并不重要，只要数字在第一列并且任何 NULL 都在“右边”。

[SQLFiddle](http://sqlfiddle.com/#!3/9c4d1/21)在这里 - 任何人都可以建议如何有效地删除每行的重复值吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T12:14:59.037

您可以尝试直截了当的方法，特别是如果这是一次性的事情或者您偶尔会进行清理。

```
UPDATE phonenumbers SET tel6 = NULL
 WHERE tel6 IN(tel5,tel4, tel3, tel2, tel1);
UPDATE phonenumbers SET tel5 = NULL
 WHERE tel5 IN(tel4, tel3, tel2, tel1);
UPDATE phonenumbers SET tel4 = NULL
 WHERE tel4 IN(tel3, tel2, tel1);
UPDATE phonenumbers SET tel3 = NULL
 WHERE tel3 IN(tel2, tel1);
UPDATE phonenumbers SET tel2 = NULL
 WHERE tel2 = tel1; 
```

**[SQLFiddle](http://sqlfiddle.com/#!3/81bce/1)**

*不过，我完全同意@Mahmoud Gamal 和@steoleary 的观点，即如果您可以更改表格的 DDL，您应该这样做。*

# java - 如何在android中执行没有按钮的功能？

> ID：15786700
> 
> 赞同：1
> 
> 时间：2013-04-03T11:56:42.900
> 
> 标签：java, android, networking, android-activity, client

现在这段代码不起作用

```
public class MainActivity extends Activity {

String X = "Music"; 
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.activity_main);

 new AsyncTask<Void, Void, Void>() {
        @Override
        protected Void doInBackground(Void... voids) {
            Socket socket = null;
             DataOutputStream dataOutputStream = null;
             DataInputStream dataInputStream = null;

             try {
              socket = new Socket("172.16.82.131", 8888);
              dataOutputStream = new DataOutputStream(socket.getOutputStream());
              dataInputStream = new DataInputStream(socket.getInputStream());
              dataOutputStream.writeUTF(X);
              //textIn.setText(dataInputStream.readUTF());
             } catch (UnknownHostException e) {
              // TODO Auto-generated catch block
              e.printStackTrace();
             } catch (IOException e) {
              // TODO Auto-generated catch block
              e.printStackTrace();
             }
             finally{
              if (socket != null){
               try {
                socket.close();
               } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
               }
              }

              if (dataOutputStream != null){
               try {
                dataOutputStream.close();
               } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
               }
              }

              if (dataInputStream != null){
               try {
                dataInputStream.close();
               } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
               }
              }
             }

            return null;
        }
    }.execute();

   }

    } 
```

在我较早的帖子中，我发布了一个代码，其中在单击按钮时正在执行一项功能，但现在我已将我的代码更改为这个。我在启动应用程序时尝试了这种在后台运行我的代码的方法。但没有任何反应。我无法找到我出错的地方..请帮助:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:01:01.543

尝试这个

```
public class AndroidClient extends Activity {  

        String x = "Music";
             /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.activity_main);

         textIn = (TextView)findViewById(R.id.textin);
      doThis();

    }                
       public void doThis() {
     // TODO Auto-generated method stub
     Socket socket = null;
     DataOutputStream dataOutputStream = null;
     DataInputStream dataInputStream = null;

     try {
     socket = new Socket("112.13.835.187", 8183);
     dataOutputStream = new DataOutputStream(socket.getOutputStream());
     dataInputStream = new DataInputStream(socket.getInputStream());
     dataOutputStream.writeUTF(x);
     textIn.setText(dataInputStream.readUTF());
     } catch (UnknownHostException e) {
     // TODO Auto-generated catch block
     e.printStackTrace();
     } catch (IOException e) {
     // TODO Auto-generated catch block
     e.printStackTrace();
     }
     finally{
     if (socket != null){
     try {
     socket.close();
     } catch (IOException e) {
     // TODO Auto-generated catch block
     e.printStackTrace();
      }
     }

     if (dataOutputStream != null){
     try {
     dataOutputStream.close();
     } catch (IOException e) {
      // TODO Auto-generated catch block
     e.printStackTrace();
     }
     }

     if (dataInputStream != null){
      try {
       dataInputStream.close();
      } catch (IOException e) {
       // TODO Auto-generated catch block
       e.printStackTrace();
       }
       }
       } 
       }};
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:01:55.167

在 onCreate 中编写代码，或者您也可以将[Asynctask](http://developer.android.com/reference/android/os/AsyncTask.html)用于后台进程

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T12:31:04.763

**您必须在应用程序的onCreate()**函数中编写**onClick()**函数的代码。并且不需要实现按钮的**onClickListener**函数。

 ***** * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T12:04:16.087

使用 AsyncTask 处理**DataOutputStream 和 Socket**

请参见下面的示例代码

从 onCreate() 方法调用以下行

```
 new SignInService().execute(); 
```

然后像下面这样创建类并在**onPostExecute 方法中写入这一行** `textIn.setText(dataInputStream.readUTF());`

```
private class SignInService extends AsyncTask<Void, Void, Void> {
      Socket socket = null;
      DataOutputStream dataOutputStream = null;
      DataInputStream dataInputStream = null;

     @Override
    protected void onPreExecute() {
        super.onPreExecute();
        try {
            progressDilaog = ProgressDialog.show(MainActivity.this, "",
                    "Loading", true, false);

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    @Override
    protected Void doInBackground(Void... params) {

     try {
        socket = new Socket("112.13.835.187", 8183);
        dataOutputStream = new DataOutputStream(socket.getOutputStream());
          dataInputStream = new DataInputStream(socket.getInputStream());
          dataOutputStream.writeUTF(x);

      } catch (UnknownHostException e) {

        e.printStackTrace();
      } catch (IOException e) {
           // TODO Auto-generated catch block
         e.printStackTrace();
      }
      finally{
         if (socket != null){
         try {
            socket.close();
          } catch (IOException e) {
            // TODO Auto-generated catch block
             e.printStackTrace();
           }
          }

        if (dataOutputStream != null){
          try {
            dataOutputStream.close();
          } catch (IOException e) {
           // TODO Auto-generated catch block
                 e.printStackTrace();
          }
        }

        if (dataInputStream != null){
           try {
               dataInputStream.close();
            } catch (IOException e) {
              e.printStackTrace();
             }
        }
      }
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);
        progressDilaog.dismiss();

        textIn.setText(dataInputStream.readUTF());
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-03T11:59:41.407

将 onClick() 重命名为其他名称，删除按钮和单击侦听器。然后它将失败，因为您正在 UI 线程上进行网络调用。您将需要使用 AsyncTask() （或类似的。）

如果你只是想让它运行而不关心答案......

```
public void onCreate(Bundle savedInstanceState) {
    // ...
    new AsyncTask<Void, Void, Void>() {
        @Override
        protected Void doInBackground(Void... voids) {
            try {
                // your code here
            } catch (Exception e) {
                // catch any errors
            }
            return null;
        }
    }.execute();
    // ...
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-03T12:49:13.307

试试这段代码...这里不需要实现按钮的onclick监听

```
public class AndroidClient extends Activity {

String x = "Music";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.activity_main);

 Button buttonSend = (Button)findViewById(R.id.send);
 textIn = (TextView)findViewById(R.id.textin);
 startonCreate(); 
 }
 public void startonCreate(){
 Socket socket = null;
 DataOutputStream dataOutputStream = null;
 DataInputStream dataInputStream = null;

 try {
  socket = new Socket("112.13.835.187", 8183);
  dataOutputStream = new DataOutputStream(socket.getOutputStream());
  dataInputStream = new DataInputStream(socket.getInputStream());
 dataOutputStream.writeUTF(x);
 textIn.setText(dataInputStream.readUTF());
 } catch (UnknownHostException e) {
 // TODO Auto-generated catch block
 e.printStackTrace();
 } catch (IOException e) {
 // TODO Auto-generated catch block
  e.printStackTrace();
  }
  finally{
  if (socket != null){
 try {
 socket.close();
 } catch (IOException e) {
 // TODO Auto-generated catch block
 e.printStackTrace();
 } 
```

}

```
if (dataOutputStream != null){
 try {
 dataOutputStream.close();
 } catch (IOException e) {
  // TODO Auto-generated catch block
 e.printStackTrace();
 }
 }

 if (dataInputStream != null){
 try {
    dataInputStream.close();
   } catch (IOException e) {
   // TODO Auto-generated catch block
   e.printStackTrace();
   }
 }
 } 

 }
} 
```****

# blackberry - 如何保持黑莓哈希表中元素的顺序

> ID：15786704
> 
> 赞同：1
> 
> 时间：2013-04-03T11:56:51.543
> 
> 标签：blackberry, java-me, hashtable

我在哈希表中插入一些值。但它没有保持我插入的顺序。

```
 for (int i = 0; i < SignatureKey.size(); i++) {

               m.put(SignatureKey.elementAt(i), SignatureValue.elementAt(i));
    } 
```

请提出一些建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T12:11:56.567

就其本质而言，哈希表应该是一个无序的集合。如果要保留元素的顺序，请使用不同的数据结构。

# cloud - 来自 OpenStack 中现有虚拟机的 ovf

> ID：15786705
> 
> 赞同：1
> 
> 时间：2013-04-03T11:56:52.287
> 
> 标签：cloud, openstack, openstack-nova, iaas

是否可以从 OpenStack 获取虚拟机容器*？如何？我对获取 ovf 格式的容器特别感兴趣。

*容器格式是指虚拟机镜像是否为包含实际虚拟机元数据的文件格式。( [http://docs.openstack.org/developer/glance/formats.html?highlight=ovf](http://docs.openstack.org/developer/glance/formats.html?highlight=ovf) )

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T11:57:41.033

ovf 似乎不受支持，但 vdi 支持，它是 Virtualbox 磁盘映像格式。因此，如果您的目标是将 openstack 虚拟机导入 Virtualbox，您也可以执行以下操作（Virtualbox 是否支持开箱即用的 qcow2 磁盘映像？）：

我做了以下假设：您没有使用 cinder 作为您尝试导入 VirtualBox 的虚拟机的存储。

首先我们需要获取要导入的虚拟机的实例名称：

```
nova list
nova show <uuid of instance you want to export>
# Note down the name of the instance which should be something like instance-00000xx 
```

现在我们需要去存储实例的实际位置

```
cd /var/lib/nova/instances/instance-00000xx # change this to actual instance name
qemu-img convert -O vdi disk virtual-box-disk.vdi 
```

现在您可以转到创建新虚拟机并选择使用现有磁盘：virtual-box-disk.vdi。

尚未验证这是否可行。如果您在 devstack 或不同的操作系统上，路径也可能不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-13T04:40:37.023

在 Icehouse 中，步骤略有不同：

```
$ nova list --all-tenants | grep somevm
| 1aa2252f-cc62-4581-94a6-73a836e5491c | somvm   | 63ce0c9526474e34b59fbcf6bb8b9cc2 | ACTIVE  | -          | Running     | qalt-net=192.168.122.30, 10.128.13.171   | 
```

然后，您可以获取第一个字段，即 VM 的 ID，它存在于此目录中：`/var/lib/nova/instances`.

# ios - UIWebView 中的 UIScrollView 的委托方法未调用水平滚动

> ID：15786706
> 
> 赞同：0
> 
> 时间：2013-04-03T11:56:57.463
> 
> 标签：ios, objective-c, uiwebview, uiscrollview, uiscrollviewdelegate

我有一个`UIWebView`在可见屏幕之外的水平和垂直内容。

我将我的控制器设置为`UIWebView`'s的代表`UIScrollView`，并注意到当我水平滚动时`scrollViewDidScroll`，`scrollViewDidScroll`和`scrollViewDidEndDecelerating`不会被调用。当我垂直滚动时调用它们。

更新：我还注意到当我水平滚动时没有滚动条，但当我垂直滚动时有一个。此外，水平滚动不会反弹，即使使用`alwaysBounceHorizontal = YES`.

我`white-space: nowrap`在 UIWebView 中使用 CSS 样式。这可能有关系吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:13:34.120

修复了这个。

除了`white-space: nowrap`样式，我还有`overflow: auto`. 删除它，实现了我想要的相同效果，现在水平滚动可以按我的意愿工作。

# vb.net - 如何在一个 SSRS 中使用不同的数据库

> ID：15786710
> 
> 赞同：0
> 
> 时间：2013-04-03T11:57:07.407
> 
> 标签：vb.net, sql-server-2008

我有两个数据库，首先数据库有 master table1，它有 Id 和 name 以及另一个细节。并且在第二个数据库中有一个 table2。在该表中，我保存了 id 和另一个详细信息。我需要显示 SSRS 报告。这些报告将显示 Table1's- Name 和 Table2 的另一个与 Tabale1's Name 相关的详细信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:42:23.773

假设两个数据库在同一台服务器上，您可以使用：

选择fdt1.Name，fdt1.Detail作为Detail1，fdt2.Detail作为Detail2

从 firstdatabase..table1 fdt1 加入

第二个数据库..table2 fdt2

在 fdt1.id=fdt2.id

如果数据库位于不同的服务器上，您可以创建链接服务器并使用四部分命名约定来引用数据库所在的服务器（作为一种选择）。

# timezone - Poco 使用错误的时区

> ID：15786713
> 
> 赞同：2
> 
> 时间：2013-04-03T11:57:16.603
> 
> 标签：timezone, poco-libraries

我目前在一些 c++ 代码中使用 Poco Logger 库。它在美国的服务器上运行，但即使系统时间有正确的时区，日志文件也会将时间戳打印为 GMT。

这是可配置的 Poco 设置，还是我需要查找的系统设置？我似乎无法在任何地方找到答案！

下面可能有用的输出。

日志文件示例：`2013-04-03 11:49:32.862 GMT[31015]:Debug:...`
日志文件格式字符串：`pattern = "%Y-%m-%d %H:%M:%S.%i %Z[%P]:%p:%t"`

输出`/etc/sysconfig/clock`：

```
ZONE="America/Los_Angeles"
UTC=true
ARC=false 
```

输出自`date`：`Wed Apr 3 04:57:44 PDT 2013`
输出自`echo $TZ`：`America/Los_Angeles`

任何想法都非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T14:42:50.203

Poco::PatternFormatter 类有一个属性“times”，可以设置为“UTC”（默认）或“local”（您要查找的内容）。您可以在配置文件中进行设置，但您必须明确定义格式化程序：

```
logging.channels.c1.class = FileChannel
logging.channels.c1.path = ${system.tempDir}/sample.log
logging.channels.c1.formatter.class = PatternFormatter
logging.channels.c1.formatter.pattern = %Y-%m-%d %H:%M:%S.%i %Z[%P]:%p:%t
logging.channels.c1.formatter.times = local 
```

如果您以编程方式创建格式化程序，请使用 setProperty() 方法：

```
pPatternFormatter->setProperty("times", "local"); 
```

另见： http: [//pocoproject.org/slides/185-LoggingConfiguration.pdf](http://pocoproject.org/slides/185-LoggingConfiguration.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-25T09:28:51.613

如果有人使用 xml 配置：

```
<?xml version="1.0" ?>
<Application>
  <logging>
    <channels>
      <logFileChannel>
        <class>FileChannel</class>
        <path>logs/application.log</path>
        <rotation>1 M</rotation>
        <archive>timestamp</archive>
        <compress>true</compress>
        <purgeCount>60</purgeCount>
        <formatter>
          <class>PatternFormatter</class>
          <pattern>%Y-%m-%d %H:%M:%S %p %s [%T] - %t</pattern>
          <times>local</times>
        </formatter>
      </logFileChannel>
    </channels>

    <loggers>
      <root>
        <name></name>
        <channel>logFileChannel</channel>
        <level>debug</level>
      </root>
    </loggers>
  </logging>
</Application> 
```

# google-apps-script - 从随机列表中挑选并减少下一次挑选的结果

> ID：15786719
> 
> 赞同：0
> 
> 时间：2013-04-03T11:57:33.960
> 
> 标签：google-apps-script, google-spreadsheet-api

我想要完成的是从 A 列中的人员列表中随机选择，但是一旦他们被选中，他们应该从列表中删除。这个想法是创建一个每周随机挑选某人的名册 - 但一旦他们被选中就删除该人（并在其为 0 时重新创建数组）

```
Example

Paul
David
John
Matt 
```

通过运行 random(A1:A4) ，我可能会选择 David 作为我的选择，但是下次我运行该函数时，Array 会再次从 A1:A4 构建 - 因此 David 没有被删除。

我尝试添加第二列来跟踪选择，然后从数组中删除它们，但是我只能从数组中删除 1 个值而不保留所做的事情

```
Example

List of Users      Tracking        Result (print all values)
Paul                               John   David,Paul,Matt
David              John            David  Paul,Matt
John               David           Matt   Paul,John
Matt               Matt            David  Paul,John 
```

尽管结果不是所有值，但我包含了所有值以显示我遇到的逻辑问题。在跟踪列中，我将第一个空白留空，以便跟踪字段中的值是我从结果中得到的值（结果通常只得到 1 个值）..所以 B2 = C1

我能得到一些关于如何做到这一点的指示吗？（谷歌应用脚​​本）

对于那些在这里要求代码的人来说

```
function random(a,b) {
  var listPeople = new Array();
  for (var i = 0; i < a.length; i++) {
    var row = a[i];
    for (var j = 0; j < row.length; j++) {
      var value = row[j];
      if (value) {
        listPeople.push(value); 
      }
    }
  }
//deleting someone
  var trackPeople = listPeople.slice(0);
  for (var i = 0; i < trackPeople.length; i++) {
    if (trackPeople[i] == b) {
      trackPeople.splice(i,1);
    }
  } 
// Returning a persons name
  if (trackPeople.length > 0) {
    var pick = Math.floor(Math.random() * trackPeople.length);
    return trackPeople[pick];
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T18:07:52.203

我在下面拼凑了这个，使用你的一些代码。它需要一个带有空白列 A 的电子表格；将随机选择的名称放入单元格 B1 中，并将耗尽的列表重写回 Col A。

```
function pickAPerson(){
  var ss = SpreadsheetApp.openById("your_spreadsheet_id_here").getSheets()[0];
  var completeList = [["Paul"],["David"],["John"],["Matt"]]; //this list can be as long as necessary // you could also get this list from another spreadsheet range, for example
  var currentList = [];
  var columnWithNames = "A"; // expects: start in row 1; no empty cells 
  try{var populatedRange = getPopulatedRange(ss,columnWithNames); currentList = populatedRange.getValues(); populatedRange.clear()}
  catch (e) {currentList = completeList; Logger.log(e)} //if the ss list is exhausted, currentList will be filled from the completList array
  var randomIndex = Math.floor(Math.random() * currentList.length);
  var theChosenOne = currentList.splice(randomIndex,1)
  if(currentList.length>0)
  ss.getRange(1,1,currentList.length,1).setValues(currentList);
  ss.getRange("B1").setValue(theChosenOne)
}

function getPopulatedRange(ss,column) { //Returns the range in a single column from row 1 to the last populated cell in that column
  var lastRow = ss.getMaxRows();
  var values = ss.getRange(column + "1:" + column + lastRow).getValues();
  for (; values[lastRow - 1] == "" && lastRow > 0; lastRow--) {}
  return ss.getRange(column  + "1:" + column + lastRow);
} 
```

# regex - TRegEx 替换模式？

> ID：15786722
> 
> 赞同：0
> 
> 时间：2013-04-03T11:57:39.837
> 
> 标签：regex, delphi, replace, delphi-xe2

我有一个json数据

```
 "myObject": {
      "field1": 1,
      "field2": true,
      "fileURL": [ "" ]
   } 
```

如何替换成 "fileURL":["here url"] ？

```
var
 pattern:string;
begin
 pattern:='"fileURL":[ "?" ]';
 Memo1.Text:=TRegEx.Replace(Trim(Memo1.Text),pattern,'C:\file1.doc');
end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:08:36.680

用 [a-zA-Z0-9.-_]+ 替换您的问号，并且不要忘记反斜杠 \ 用于您想要精确重复的所有字符，并且您应该使用括号 () 进行组创建，并且在替换部分中您可以使用它。

```
var
 pattern:string;
begin
 pattern:='(\"fileURL\"\:\[\s\")([a-zA-Z0-9\.\-\_]+)(\"\s\])';
 Memo1.Text:=TRegEx.Replace(Trim(Memo1.Text),pattern,'$1C:\file1.doc$3');
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:44:59.727

我会更换整条线。

```
pattern := '"fileURL"\s*:\s*\[\s*"[^"]*"\s*\]';
fileName := 'C:\file1.doc';
Memo1.Text := TRegEx.Replace(Memo1.Text, pattern, '"fileURL" : ["' + fileName + '"]'); 
```

# jquery - 按钮计数器更改样式

> ID：15786727
> 
> 赞同：0
> 
> 时间：2013-04-03T11:57:54.133
> 
> 标签：jquery

实时视图：[https](https://tornhq.com/WorkingOn/InteractiveMap/implementing.html)
*://tornhq.com/WorkingOn/InteractiveMap/implementing.html - 单击#Current 选项卡或底部的国家之一*

当前的计数器，在点击链接时起作用的是：

```
$(this).text(Number($(this).text()) + 1); 
```

我已经尝试了很多事情，我认为这就是答案：

```
$(this).attr('p').text(Number($(this).attr('p').text()) + 1);
// OR
$(this).html(p).text(Number($(this).html(p).text()) + 1); 
```

我怎样才能保持按钮计数器不上升但保持我的样式分配给`<p>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:02:56.093

如果你想看到红色计数器上升：

试试这个

如果`this`你是`P`这样： `$(this).text(function (i,n){return parseInt(n)+1;})`

如果`this`你是`a`这样：

```
$('p',$(this)).text(function (i,n){return parseInt(n)+1;}) //I think you need this 
```

仅用于在控制台中测试*MATH*部分：

`$("#Like-Earth p").text(function (i,n){return parseInt(n)+1;})`

where`$("#Like-Earth p")`应该更改为我上面的第一个选项之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:07:37.737

我认为您尝试做的是将标签中的当前数字替换为加一。

```
var p = jQuery(this).find('p');
var newValue = ParseInt(p.html()) + 1;
jQuery(p).html(newValue); 
```

我将它分解为 int 变量，但如果你愿意，你也可以将它组合成一长行代码。

# android - 我们可以在移动浏览器 [Android 或 iPhone] 中安装附加组件 (FireFox) 或扩展 (Chrome)

> ID：15786728
> 
> 赞同：6
> 
> 时间：2013-04-03T11:58:01.463
> 
> 标签：android, iphone, google-chrome-extension, firefox-addon, mobile-browser

我们可以在移动浏览器中使用附加组件（FireFox）或扩展（Chrome）吗？就像我们在 Web 浏览器中使用它们一样。

我们能不能做到以下几点：

1.  在移动浏览器中安装扩展或插件或附加组件。（移动设备可以是任何 android 或 iPhone）。

2.  我们是否可以利用触摸和文本区域的点击事件，例如我们如何使用它们来获取它们并自己编写代码以供我们的插件使用。

3.  我们可以使用 javascript 或 ajax 调用并在不使用 webview 的情况下访问浏览器事件吗？

4.  我需要知道，

如果用户在文本字段中键入或单击，我必须了解这一点并访问浏览器文本字段并通过代码做一些有用的事情。

但我不想使用单独的网络视图应用程序。我确实想留在浏览器当前视图本身并做上述事情。

对于Android来说是敢需要的。请帮我解决这个问题，我进行了很多研究，但我无法找到解决方案。

我想知道我们是否可以这样做。

我对各位极客抱有希望，请给我一个建议。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T12:12:46.980

[根据这个](https://stackoverflow.com/questions/10604417/extension-in-google-chrome-mobile)，它不可能在 chrome for android 上添加扩展。

可以在 android 的 firefox 上安装一些插件。只需从您的设备访问 Firefox 插件网站。它可能只显示可以安装在设备上的那些。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T22:58:56.893

[您可以使用插件SDK](https://github.com/mozilla/addon-sdk)为 Firefox Mobile 编写插件。查看文档，特别是指南“<a href="https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/tutorials/mobile.html" rel ="nofollow">为 Firefox Mobile 开发“。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-01T10:54:24.447

[Kitt](http://www.kitt.com)使用 Chrome 使用的扩展框架的子集支持 iPhone 上的扩展。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-24T03:56:48.163

现在有适用于 Android 的 Chrome Beta。它说您可以安装插件。恕我直言，它非常好，并且每次修订都变得更好。 [https://play.google.com/store/apps/details?id=com.chrome.beta&hl=en](https://play.google.com/store/apps/details?id=com.chrome.beta&hl=en)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-07T07:47:25.970

Chrome for android 仍然不支持扩展。仍然是相当不错的浏览器。如果你真的需要插件，你应该试试 Firefox for android： [https ://play.google.com/store/apps/details?id=org.mozilla.firefox](https://play.google.com/store/apps/details?id=org.mozilla.firefox)

此外，您可以尝试两种浏览器测试版。:) 希望我对您有所帮助

# ruby-on-rails - rails 使用可选段路由多个 globbing

> ID：15786729
> 
> 赞同：0
> 
> 时间：2013-04-03T11:58:01.647
> 
> 标签：ruby-on-rails, ruby, routes, rails-routing, glob

我有以下模式：

```
get "/sort/*sort_params/filter/*filter_params" => "order#show" 
```

哪个工作正常！链接被正确解析，我收到类似的东西（只是一个例子）：

```
Parameters: {"sort_params" => "price/asc", "filter_params" => "quantity/10"} 
```

但我并不总是需要这两个参数，所以我将这两个部分（排序和过滤器）都设为可选：

```
get "(/sort/*sort_params)/(filter/*filter_params)" => "order#show" 
```

但在这里我收到以下信息：

```
Parameters: {"sort_parameters" => "price/asc/filter/quantity/10"} 
```

因此，它没有正确解析最后一部分，并且由于某些原因它排成一行。

如果我删除第二部分周围的括号，如下所示：

```
get "(/sort/*sort_params)/filter/*filter_params" => "order#show" 
```

然后它完全可以正常工作（当然，除了最后一部分应该存在的事实之外）！

我试过把括号放在不同的地方，但没有运气。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-19T10:11:36.490

幕后发生了一些有趣的事情。这是我在一个新应用程序（Rails 4.1）上获得的 Rails 路线的表示：

`(/sort/*sort_params)(/filter/*filter_params)(.:format)`

您已将这两个参数设为可选，并且唯一的分隔符`/`位于它们之间。它会被丢弃：在解析路线时，它会被分成类似的组`/thing`，而你的孤独感`/`不适合。

所以动作是：它看到`/sort`并将其余的扔进 args，完成。Globbing 是危险的，好吧。但如果没有，它会检查`/filter`，并将其余的扔到它的 args 中。因此，它**仅用** `filter` **or** `sort`解释路径。不是他们两个。

我可以肯定地说，在这里使用范围就是其他人所说*的 Rails 方式*。这很好，鼓励使用它。但是，如果您对修复单行解决方案感兴趣，我建议您放置一个更好的分隔符，以适应该`/thing`形状。比如说，`/list`。

`(/sort/*sort_params)/list(/filter/*filter_params)`

当然，这意味着您总是需要将其放入您的 URL 中。以下是一些正确解析的示例：

`/sort/asc/list`

`/sort/asc/list/filter/quantity/10`

`/list/filter/alright`

`/list`

这是我能想象到的最简单的解决方法。我可以想象的其他人也会使这条路线**非常**长，并且涉及直接声明您将在这里和那里拥有多少个参数。

但这很紧凑，对我来说看起来不错。然而，这一切都是研究。**我建议使用范围**。当添加其他组件时，像这样的复杂匹配更难保持一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:34:11.467

使用范围修复它。但还是。有点好奇是否可以在一行中完成！

# iphone - iOS - 从原始来源多次为图像着色

> ID：15786731
> 
> 赞同：0
> 
> 时间：2013-04-03T11:58:05.820
> 
> 标签：iphone, ios, ipad, cgcontext

我有一个滑块，我想根据滑块值使图像更亮或更暗。目前我有一个灰度图像，我在 viewDidLoad 上把它涂成红色。当我的滑块值改变时，我运行下面的代码。

我对代码的理解是我从文件中加载原始图像并将其存储在 myImage 中。然后我设置填充颜色，然后使用 CGContextDrawImage 将 myImage 绘制到图形上下文中。然后我根据设置的混合模式填充图像，然后将新图像设置为 self.bodyView.image （这是在超级视图中可见的图像）。

似乎正在发生的是，不是从文件中重新加载 body.png ，而是看起来只是将效果重新应用于已经更改的图像。为什么是这样？

提前致谢。

```
- (IBAction)bodyBrightnessChanged:(UISlider *)sender {

...
code to set 3 floats called red, green and blue to be values between 0 and 1
...

UIImage *myImage = [UIImage imageWithContentsOfFile:@"body.png"];

// Begin a new image context to draw the coloured image onto
UIGraphicsBeginImageContext(self.bodyView.image.size);

// Get a reference to the context we created
CGContextRef context = UIGraphicsGetCurrentContext();

// Set the fill colour
[[UIColor colorWithRed:red green:green blue:blue alpha:1.0] setFill];

// translate/flip the graphics context (for transforming from CG* coords to UI* coords
CGContextTranslateCTM(context, 0, self.bodyView.image.size.height);
CGContextScaleCTM(context, 1.0, -1.0);

// set the blend mode and the original image
CGContextSetBlendMode(context, kCGBlendModeColor);
CGRect rect = CGRectMake(0, 0, self.bodyView.image.size.width, self.bodyView.image.size.height);
//CGContextDrawImage(context, rect, self.bodyView.image.CGImage); // This is where we need to set the original image - I think...
CGContextDrawImage(context, rect, myImage.CGImage);

// Set a mask that matches the shape of the image, then draw (colour burn) a coloured rectangle
CGContextClipToMask(context, rect, self.bodyView.image.CGImage);
CGContextAddRect(context, rect);
CGContextDrawPath(context, kCGPathFill);

// Generate a new UIImage from the graphics context we drew onto
UIImage *colouredImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

self.bodyView.image = colouredImage;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:08:47.743

我的错 - 问题在于我从哪里加载图像。

我需要使用：

```
UIImage *myImage = [UIImage imageNamed:@"body.png"]; 
```

不是

```
UIImage *myImage = [UIImage imageWithContentsOfFile:@"body.png"]; 
```

# objective-c - 背景图片中UIView和UITableView不一致

> ID：15786733
> 
> 赞同：0
> 
> 时间：2013-04-03T11:58:13.277
> 
> 标签：objective-c, xcode, uitableview, uiview, background-image

我有一个包含两个选项卡的选项卡栏控制器： UIView 和 UITableView 控制器。

我试图在其中使用相同的背景图像，但问题是图像在 UITableView 中调整了大小。

[在这里](http://i45.tinypic.com/1o64bb.jpg)你可以看到不同之处。

为了添加背景图片，我在 UIView 中使用了这段代码：

```
UIGraphicsBeginImageContext(self.view.frame.size);
[[UIImage imageNamed:@"background.jpg"] drawInRect:self.view.bounds];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
self.view.backgroundColor = [UIColor colorWithPatternImage:image]; 
```

这对于 UITableView：

```
UIImageView *tempImageView = [[UIImageView alloc] initWithImage:
[UIImage imageNamed:@"background.jpg"]];
[tempImageView setFrame:self.tableView.frame];
self.tableView.backgroundView = tempImageView; 
```

检查我使用的视图框架大小

```
NSLog(@"%@", NSStringFromCGSize(self.view.frame.size)); 
```

并将这个用于表格视图

```
NSLog(@"%@", NSStringFromCGRect(self.tableView.frame)); 
```

结果是一样的 ({320, 460})

我什至尝试在 XCode IB 中添加 UIView 背景图像，但没有运气。

图像是 jpg，大小为 640 X 1136。我还尝试了 png 文件，但没有运气。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T03:08:02.890

我使用 Pranav 的回答是，在我使用的 UITableView 中：

```
UIView* backgroundView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, self.tableView.bounds.size.width, self.tableView.bounds.size.height)];
[backgroundView setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"background.jpg"]]]; 
[self.tableView setBackgroundView:backgroundView]; 
```

在我刚刚使用的 UIView 中：

```
self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"background.jpg"]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:16:13.613

您可以`colorWithPatternImage:`在这两种情况下使用。

`self.tableView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:YOUR IMAGE"]];`

# grails - Grails：自动化 Grails 插件安装

> ID：15786739
> 
> 赞同：1
> 
> 时间：2013-04-03T11:58:34.317
> 
> 标签：grails, plugins, gant

想象一下，我们有一个 grails 插件（我们正在开发）和一个用于测试 grails 插件的测试应用程序。我正在尝试测试插件的 _Install.groovy 脚本，但每次都是一个相当大的过程。

任何人都可以推荐使用 gant 或 bash 来自动化以下过程的方法：

1.  增加插件的版本
2.  打包插件
3.  检查插件是否已安装在测试应用程序中，如果是，请将其删除。
4.  重新安装插件。

非常感激，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:50:43.383

我的答案是创建一个 groovy/GANT 脚本并通过命令行执行它。

在我的插件中，我有一个`scripts`目录，并在其中创建了一个名为`Deploy.groovy`.

运行命令

```
grails deploy 
```

自动执行此脚本。该脚本使用内置的 grails 目标打包插件，然后通过命令行执行 grails 命令。

**插件主页/脚本/Deploy.groovy**

```
includeTargets << grailsScript("PackagePlugin_")
includeTool << gant.tools.Execute

target(main: "This is the script that tries to test what's going on...") {

    println ("1\. Package the plugin")
    packagePlugin()

    println ("2\. Confirm the directory")
    execute.shell("cd ~/quirk-projects/admin-cms-plugin-test && pwd")

    println ("3\. Remove the plugin ")
    execute.shell("cd ~/quirk-projects/admin-cms-plugin-test && grails uninstall-plugin grails-admin-cms-plugin")

    println ("4\. Install the plugin ")
    execute.shell("cd ~/quirk-projects/admin-cms-plugin-test && grails install-plugin ../admin-cms-plugin/grails-admin-cms-plugin-0.1.zip")

    println ("5\. Run Application")
    execute.shell("cd ~/quirk-projects/admin-cms-plugin-test && grails run-app")

    println ("6\. Your plugin is ready for testing...")

}

setDefaultTarget(main) 
```

为了增加，我编写了一个简单地编辑源文件并增加版本号的脚本：

**插件主页/脚本/_Events.groovy**

```
eventCompileStart = { kind ->

    println("Incrementing Version Number for next time")

    def version = metadata.'version'

    if (!version) {
        version = '1'
    } else {
        version = version.toInteger() + 1
    }
    metadata.'version' = version.toString()
    metadata.persist()

    def file = new File("${basedir}/AdminCmsPluginGrailsPlugin.groovy")
    def script = file.text
    def array = script.split("\n")
    for (int i = 0 ; i < array.length; i++) {
        if (array[i].indexOf("def version") > -1) {
            array[i] = "    def version = 0." + version
        }
    }

    def newScript = array.join(System.getProperty("line.separator"))

    file.text = newScript

} 
```

# c# - Win8 Javascript Metro 应用程序，带有 C# WinRT 组件和 SQLite

> ID：15786743
> 
> 赞同：4
> 
> 时间：2013-04-03T11:58:40.700
> 
> 标签：c#, sqlite, windows-8, windows-runtime, windows-store-apps

我正在创建一个 Windows 8 应用商店应用程序。这个应用程序的前端（主项目）是 HTML5/Javascript。我正在按照[Tim Heuer](http://timheuer.com/blog/archive/2012/08/07/updated-how-to-using-sqlite-from-windows-store-apps.aspx)的本指南创建一个 C# WinRT 组件，该组件包装 SQLite 调用并充当**控制器**。前端通过Javascript调用该组件，更新数据，获取演示内容。

所以我的解决方案中有 2 个项目，javascript 中的“main”和 C# 中的“db”。我已经设法让 SQLite 根据指南工作。我有这种结构的原因是我试图将应用程序从 iOS 移植到 Win8。“控制器”部分从一开始就是一个独立的组件，它已经移植到 C#。

但是，有一个警告。由于[这个已知问题](http://support.microsoft.com/kb/2738078)，我必须从“db”项目中删除对 C++ Runtime v11 的引用以使其可编译。虽然它在开发机器上运行良好。

然后我得到了这台测试机（准确地说是三星 xe700t1a，Intel i5），我发现在这台测试机上“调试远程”时，Visual Studio 不会部署 SQLite3。结果，我的 SQLite 调用失败并出现错误：`"Unable to load DLL 'sqlite3': The specified module could not be found. (Exception from HRESULT: 0x8007007E)"`。

根据我之前提到的指南，SQLite 是通过 WinRT 扩展提供的，目的是使部署自动化。

我想知道为什么会发生这种情况以及如何使其正确？我还想知道这种结构中的应用程序的 Windows 应用商店是否存在任何认证问题？

我还看到了[这篇文章](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/e165e663-f06f-4c02-9a2d-aefa86f613a9/)，[这篇文章](http://connect.microsoft.com/VisualStudio/feedback/details/766435/cannot-use-sqllite-in-a-background-task)暗示目前无法在 WinRT 组件中使用 SQLite。但现在改变对我来说已经太晚了，如果没有混合结构，这个项目是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:57:25.360

我找到了解决方案。我使用了[这篇文章](http://connect.microsoft.com/VisualStudio/feedback/details/766435/cannot-use-sqllite-in-a-background-task)的提示，它非常简单。

我要做的是在解决方案中创建另一个项目，将输出类型设置为 C# 类库。将对 WinRT 的 SQLite 和 sqlite-net (nuget) 包装器的引用移动到这个新项目。之后，我必须手动浏览 sqlite-net 中的类，并将所有“内部”类更改为“公共”。

对于原始**控制器**项目，我添加`using myclasslib;`以便找到类定义。

显然，这种解决方法将完美无缺。SQLite3 已部署，并且没有关于缺少参考的警告。

# mysql - 在 MySQL 的所有数据库中运行 SQL 的等效 Windows 脚本？

> ID：15786751
> 
> 赞同：0
> 
> 时间：2013-04-03T11:58:53.870
> 
> 标签：mysql, linux, windows

我们可以在 unix/linux 中使用以下脚本在所有数据库中运行 sql

```
#!/bin/sh

all_dbs="$( mysql  -hlocalhost  -uroot  -pmysql -Bse 'show databases')"        
for db in $all_dbs
do
    if test $db != "information_schema" -a $db != "mysql"   -a $db != "my_db" 
    then 
        echo $db
        mysql  -hlocalhost  -uroot  -pmysql $db  < temp.sql
    fi  
done 
```

temp.sql 包含选择语句

当我使用 Windows 时，有人可以帮助我使用 Windows 等效脚本吗？

提前致谢， 凯瑟尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:02:18.300

您可以编写批处理文件，也可以尝试[cygwin](http://www.cygwin.com/)。使用 cygwin，您将在 Windows 上拥有一个 bash 和一个简化的 GNU 用户空间。理想情况下，脚本将按*原样工作*

# codeigniter - 没有从视图codeigniter获取数组值

> ID：15786753
> 
> 赞同：1
> 
> 时间：2013-04-03T11:58:55.203
> 
> 标签：codeigniter

我的模型函数是

```
 public function getUser()
{
    $this->db->select(array('customer_name','customer_address','phone_no','fax','email_id','contact_person_name','mobile_no'));     
    $this->db->from('add_customer');
    $this->db->where(array('status'=>1));
    $res = $this->db->get();
    if($res->num_rows() > 0)
    { 
        $rows = $res->result_array();
        return $rows;
    }else{
        return false;
    }
} 
```

控制器中的功能

```
public function search_customer()
{

    //$this->load->helper('url');
    $data['baseurl'] = base_url();
    $this->load->view('templates/header');
    $data['details'] = $this->Customer_model->getUser();
    $this->load->view('master/customer',$data);
} 
```

从我的视图中提取的数据是这样的

```
 <?php for($i=0;$i<count($details);$i++){ ?>
  <tr>
    <td><?php echo ($i+1); ?></td>
    <td><?php echo $details[$i]['customer_name']; ?></td>
    <td><?php echo $details[$i]['customer_address']; ?></td>
    <td><?php echo $details[$i]['phone_no']; ?></td>
    <td><?php echo $details[$i]['email_id']; ?></td>
    <td><?php echo $details[$i]['contact_person_name']; ?></td>
    <?php }?> 
```

这会导致这样的错误

```
A PHP Error was encountered

Severity: Notice

Message: Undefined variable: details

Filename: master/Customer.php

Line Number: 69 
```

有人请告诉我为什么会出现这个错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:34:07.277

尝试将模型加载到控制器中，例如

```
$this->load->model('Customer_model'); 
```

如果不加载模型，您将无法从 get_user 函数获取详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:21:43.283

模型：

```
public function getUser()
{
    $this->db->select('customer_name','customer_address','phone_no',
            'fax','email_id','contact_person_name','mobile_no');     
    $this->db->from('add_customer');
    $this->db->where('status',1);
    return $this->db->get()->result();
} 
```

控制器：

```
public function search_customer()
{
    $data['baseurl'] = base_url();
    //Load the view in variable as data, but do not render 
    //($header is accessible in 'master/customer' view)
    $data['header'] = $this->load->view('templates/header','',true);
    //Be sure to load Customer_model
    $data['details'] = $this->Customer_model->getUser();
    $this->load->view('master/customer',$data);
} 
```

看法：

```
<?php if(count($details)): ?>
   <?php foreach($details as $detail): ?>
   <tr>
       <td><?php echo $detail->customer_name; ?></td>
       <td><?php echo $detail->customer_address; ?></td>
       <td><?php echo $detail->phone_no; ?></td>
       <td><?php echo $detail->email_id; ?></td>
       <td><?php echo $detail->contact_person_name; ?></td>
   </tr>
   <?php endforeach; ?>
<?php endif; ?> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-03T12:04:15.150

尝试在您的主/客户中使用`$data`而不是。`$details`

# sql-server - 如何查找同义词的所有列名

> ID：15786756
> 
> 赞同：0
> 
> 时间：2013-04-03T11:59:14.267
> 
> 标签：sql-server, sql-server-2008

我通常使用以下 sql 在 sql server 中查找表的所有列名

```
SELECT Upper(column_name) FROM information_schema.columns 
WHERE table_name ='mutable' 
```

但是，现在我想查找同义词的所有列名。有什么方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T12:07:05.880

恕我直言[，您不应该将`INFORMATION_SCHEMA`其用于任何此类](https://sqlblog.org/2011/11/03/the-case-against-information_schema-views)。以下将适用于表或视图：

```
SELECT UPPER(name)
  FROM sys.columns
  WHERE OBJECT_NAME([object_id]) = N'mutable'; 
```

以下内容适用于同义词（您稍后更改的要求）：

```
SELECT UPPER(name) 
  FROM sys.columns AS c
  CROSS APPLY
  (
    SELECT name
    FROM sys.synonyms 
    WHERE name = N'mutable'
    AND OBJECT_ID([base_object_name]) = c.[object_id]
  ) AS x; 
```

你也可以说：

```
DECLARE @obj INT;

SELECT @obj = OBJECT_ID([base_object_name]) 
  FROM sys.synonyms WHERE name = N'mutable';

SELECT UPPER(name) FROM sys.columns WHERE [object_id] = @obj; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T12:26:41.703

您可以使用[`sys.synonyms`](http://msdn.microsoft.com/en-us/library/ms189458.aspx)来发现`base_object_name`，并从那里使用[`sys.columns`](http://msdn.microsoft.com/en-us/library/ms176106.aspx)@Aaron 显示：

```
select * from sys.columns where
    object_id = OBJECT_ID((select base_object_name from sys.synonyms
                   where name='mutable')) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-23T10:22:55.650

尝试从同义词中选择前零行到临时表中。这将创建一个与基础对象具有相同列名的表。然后在 tempdb 中查询 sys.columns：

```
SELECT TOP(0) * INTO #tmpColumns FROM mutable;
SELECT name FROM tempdb.sys.columns WHERE object_id = OBJECT_ID('tempdb.dbo.#tmpColumns'); 
```

# coffeescript - 无法在 Trigger.io 中使用预构建挂钩

> ID：15786761
> 
> 赞同：4
> 
> 时间：2013-04-03T11:59:26.063
> 
> 标签：coffeescript, trigger.io

我热衷于在 Trigger.io 中使用咖啡脚本，为此我遵循[http://docs.trigger.io/en/latest/tools/hooks.html中描述的详细信息](http://docs.trigger.io/en/latest/tools/hooks.html)

我已根据需要将我的 coffeescript.js 文件放在 hooks/prebuild 目录中，但现在构建失败了。我已经注释掉了 coffeescript.js 文件中的所有内容，以确保它不是文件的内容。

它检测到 prebuild 目录中的 coffeescript.js 文件，如日志输出所示，但随后找不到某些文件。其他人有这个问题吗？我正在使用 Trigger Toolkit 的 1.4 版。

```
[INFO] Running (node) hook: coffeescript.js
[DEBUG] Running: 'node' '/Users/Will/forge-workspace/alpha-timing/hooks/prebuild/coffeescript.js' 'ios'
[ERROR] [Errno 2] No such file or directory 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T17:24:56.500

有点切线......但你可能想看看Brunch.io

我最近开始使用它为我的 trigger.io 应用程序构建 JS 并且效果很好。它可以自动编译你的coffeescript、js、css等等。带有观察器和自动重新加载，因此当您在浏览器中开发和测试时，它非常快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:27:55.673

我们在预构建阶段使用 Node.js 将咖啡脚本转换为 JS - 看起来你没有安装它：去[http://nodejs.org/](http://nodejs.org/)获取它。

请注意，您还需要[coffee-script](https://npmjs.org/package/coffee-script)来运行该钩子！

# javascript - 将每页的记录移动到数据表中的分页旁边

> ID：15786764
> 
> 赞同：2
> 
> 时间：2013-04-03T11:59:39.680
> 
> 标签：javascript, html, css, datatable

我正在使用[datatables](http://www.datatables.net)，通过他们的示例，我能够很好地构建表格。但问题是我似乎不明白如何移动“ `records per page`”元素，这是一个“ `span6`”类的引导程序。我确实明白它实际上是 javascript 正在这样做，需要一些帮助。这是我正在使用的示例的[链接。](http://www.datatables.net/media/blog/bootstrap_2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:04:30.870

这是您在该页面中使用的 div

```
<div class="span6">
    <div id="example_length" class="dataTables_length">
        <label>
            <select size="1" name="example_length" aria-controls="example">
                <option value="10" selected="selected">10</option>
                <option value="25">25</option>
                <option value="50">50</option>
                <option value="100">100</option>
            </select>records per page</label>
    </div>
</div> 
```

只需将其复制到其他位置并相应地修改 css。

使用 Javascript 修改 DOM。 [http://woork.blogspot.in/2007/10/how-to-change-text-using-javascript.html](http://woork.blogspot.in/2007/10/how-to-change-text-using-javascript.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-09T06:02:33.460

在他们的文档中查看此页面... [DataTables 动态语言](http://datatables.net/examples/basic_init/language.html)。它没有给出如何移动东西的最佳解释，但它是一个开始试验的好地方。我能够隐藏或更改“每页记录”文本，并且我想还有一种方法可以移动它。

该页面上的序言说“更改 DataTables 显示的语言信息就像将语言对象传递给 dataTable 构造函数一样简单。上面的示例显示了要使用的一组不同的英语语言定义，而不是默认值。”

```
"oLanguage": {
    "sLengthMenu": "Display _MENU_ records per page"
} 
```

应该给你一个开始的地方。

# android - 如何在android的应用程序中存储一个值？

> ID：15786766
> 
> 赞同：-3
> 
> 时间：2013-04-03T11:59:43.267
> 
> 标签：android

我正在制作一个应用程序，其中一个整数值作为分数。

当我重新启动应用程序并按下主页上的分数按钮时，我想显示最后一个结果值。

**评分.java**

```
Intent intent = getIntent();
String Timer = intent.getStringExtra("Timer_Value");
String totalQue = intent.getStringExtra("totalQue");
String right = intent.getStringExtra("right");      

String result = "Taken time for this Task :"+Timer+" \n"+ "Your score is "+right+"/"+totalQue;

TextView results = (TextView)findViewById(R.id.txt_result);
results.setText(result);

Button main_menu = (Button) findViewById(R.id.btn_Mainmenu);
main_menu.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            //Score.this.finish();
            Intent i = new Intent(Score.this,MainActivity.class);
            startActivity(i);

        }
    }); 
```

我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:03:44.553

您必须将您的分数保存在 sharedprefrences 中。

```
private void SavePreferences(String key, String value) {
        SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
        SharedPreferences.Editor editor = sharedPreferences.edit();
        editor.putString(key, value);
        editor.commit();
    }

    private void LoadPreferences() {
        SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
        String score = sharedPreferences.getString("SCORE", "");

} 
```

要保存您的分数，只需调用 SavePreferences("SCORE", "YOUR_SCORE"); 并调用 LoadPreferences() 来检索它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:00:51.807

利用[共享偏好](http://developer.android.com/reference/android/content/SharedPreferences.html)。您可以在其中存储小数据。

```
// To save data
SharedPreferences.Editor gameScore = getPreferences(MODE_PRIVATE).edit();
gameScore.putInt("score", 30).commit();;

// To read saved data
SharedPreferences gamePrefs = getPreferences(MODE_PRIVATE); 
int gameScore = gamePrefs.getString("score", 0); // here zero will be returned when there is nothign to return 
```

.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T12:01:10.977

使用共享首选项来存储值。共享偏好会存储您的值，直到用户卸载应用程序或您清除共享偏好变量。

```
SharedPreferences.Editor editor = getPreferences(MODE_PRIVATE).edit();
editor.putInt("score", 3);
editor.commit(); 
```

从共享首选项中检索数据

```
SharedPreferences prefs = getPreferences(MODE_PRIVATE); 
int score = prefs.getString("score", 0);   // Here zero is default value return when there is no value in shared preference. 
```

# ruby - Ruby递归错误

> ID：15786771
> 
> 赞同：0
> 
> 时间：2013-04-03T11:59:56.080
> 
> 标签：ruby

有谁知道为什么这个代码：

```
sum=0
def get_sum n
    return sum if n<1
    sum=sum+n
    get_sum(n-1)
end 

get_sum 10 
```

给我这个？

```
rb:3:in `get_sum': undefined local variable or method `sum' for main:Object (NameError)
from 1.rb:8:in `<main>' 
```

该代码非常有意义，您可以理解它在做什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T12:02:43.283

在函数外部声明的普通变量在函数内部是*不可*访问的。

`sum`您可以使用前缀`$`使其成为全局变量（通常不是一个好主意。）

```
$sum=0
def get_sum n
    return $sum if n<1
    $sum=$sum+n
    get_sum(n-1)
end 

get_sum 10
#= 55 
```

如果您有一个真正的测试用例想要执行此操作，如果您愿意，我可以建议一种合适的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T12:05:37.387

不是使用全局变量，而是使用递归的另一种方法是这样的（我猜受堆栈深度的限制）：

```
def get_sum(n)
  return n if n < 1
  n + get_sum(n - 1)
end

sum = get_sum(10) 
```

如果您曾经使用过提供尾调用优化的 Ruby 实现（我不知道有任何实现），[ProGNOMmers 的方法](https://stackoverflow.com/questions/15786771/ruby-recursion-error/15786882#15786882)在堆栈上会更好一些，但作为快速测试，两者都超过了最大堆栈级别`n = 9000`或者。并不是说您应该递归 9000 次或其他任何东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T12:05:28.103

正如@Dogbert 所写，*在函数外部声明的普通变量在函数内部是不可访问的*。

这是一种不使用全局变量（不适合递归）的方法：

```
def get_sum(n, sum = 0)
    return sum if n<1
    get_sum(n-1, sum+n)
end 

get_sum(10) #=> 55 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T12:05:07.930

您从未`sum`在使用它之前初始化变量。

您可以完全避免使用该变量，因为它什么都不做：

```
def get_sum n
    return 0 if n<1
    get_sum(n-1) + n
end 

get_sum 10 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-03T12:08:24.320

你可能想试试这个：

```
def get_sum n
    return n if n == 0
    return n + get_sum(n-1)
end 
```

在这个版本中，您不需要实例化任何全局变量（这不是一个好主意），并且您实际上执行了一个回归求和 :)

# sql-server - SQL Server 2012/Visual Studio

> ID：15786774
> 
> 赞同：-1
> 
> 时间：2013-04-03T12:00:04.277
> 
> 标签：sql-server, visual-studio

SQL Server 2012 是否包含 Visual Studio？

PS我不是想成为一个白痴，但我找不到这个问题的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:05:26.323

不，它不包括 Visual Studio。如果您使用所有客户端工具进行完整安装，您将获得一些最基本的 shell 内容，但这只是支持 Management Studio 之类的东西的脚手架。Visual Studio 本身是一个单独的产品，必须单独获得许可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:06:18.127

不，它不随 Visual Studio 提供。

SQL Server 是一个数据库服务器。安装媒体附带一些工具，例如[SQL Server Management Studio](http://en.wikipedia.org/wiki/SQL_Server_Management_Studio)。

Visual Studio 是一个 IDE，一个集成开发环境。它*可以*连接到 SQL Server 并在开发数据库驱动的应用程序时使用。

但两者是正交的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T12:10:16.137

它将附带商业智能设计工作室，通常称为 BIDS，它是围绕 Visual Studio 框架构建的。

如果您需要开发环境，可以查看[Visual Studio Express](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-products)

# c++ - 在沙箱中运行插件

> ID：15786775
> 
> 赞同：8
> 
> 时间：2013-04-03T12:00:04.670
> 
> 标签：c++, c, plugins, sandbox

我正在用 C/C++ 设计一个系统，它可以通过各种插件进行扩展。有一个定义明确的 C 公共 API，它主要与`(const) char*`其他指针类型一起使用。插件被编译成 .so 或 .dll 文件，主应用程序在启动时加载它们，然后根据请求卸载或重新加载它们。

插件可能来自各种来源，可信与否:)

现在，我想确保，如果一个插件做了一些愚蠢的事情（例如试图释放他不应该释放的内存），这个动作不会关闭整个系统，而只是通知主系统行为不端的插件，以便将其从队列中删除。

代码调用以下列方式完成：

```
const char* data = get_my_data();
for(int i = 0; i<plugins; i++)
{
   plugins[i]->execute(data);
} 
```

但是如果`plugin[0]` “意外”释放数据字符串或覆盖它，或者错误地跳转到地址 0x0，这会导致整个系统崩溃，我不希望这样。我怎样才能避免这种灾难。（我知道，我可以复制`data`字符串......这并不能解决我的问题:)）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-03T12:07:32.270

为插件创建一个包装器进程并通过 IPC 与该包装器通信。如果插件失败，您的主进程将保持不变

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:10:38.077

简单地说，你不能在同一个过程中做到这一点。如果您的插件是用 C 或 C++ 编写的，它们可能包含许多未定义行为的来源，这意味着无法检测到的不可避免的崩溃的来源。所以你应该像kassak建议的那样在他们自己的进程中启动插件，如果他们愿意的话让他们崩溃，或者为你的插件使用另一种语言，例如一些像lua这样的解释脚本语言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-06T16:08:41.680

看看[http://msdn.microsoft.com/en-us/library/1deeycx5(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/1deeycx5(v=vs.90).aspx)

我在我的一个项目中使用 /EHa 来帮助我从那些做*愚蠢*事情的库中捕获异常。如果您使用此设置编译代码，则正常的 try catch 块将捕获除零等异常。

不确定在 Linux 上是否有类似的东西——如果有，请告诉我..

# .net - 数组中封装值的 Linq 语法

> ID：15786776
> 
> 赞同：0
> 
> 时间：2013-04-03T12:00:17.707
> 
> 标签：.net, sql, vb.net, linq

我正在寻找任何 LINQ 语法来获得我的数据库频率范围的结果。

SimpleSet 包含一个频率集数组。在每个频率集中，它可以是多个频率。如果一个频率与最小值和最大值 (1000 < 2000) 匹配，则它可以保留在结果列表中。

当前代码：

```
 Dim ret As New ObservableCollection(Of fSimpleItemSet)'the result

    Dim FreqMin As Double = 1000
    Dim FreqMax As Double = 2000
    Dim retTmp As New ObservableCollection(Of fSimpleItemSet)' fSimpleSet is the data collection
    retTmp = (From fSimple As fSimpleItemSet In Data Select fSimple) 'Get ALL items

    For Each fSimple As fSimpleItemSet In retTmp
        If fSimple.fFrequencySet IsNot Nothing Then
            For Each fFrequency As fFrequencySet In fSimple.fFrequencySet
                If fFrequency.Frequency > FreqMin And fFrequency.Frequency < FreqMax Then
                    ret.Add(fSimple)
                    Exit For
                End If
            Next
        End If
    Next 
```

![数据库结构](https://i.stack.imgur.com/kJZlx.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:10:52.760

您可以使用`Any`方法查找元素，其中至少有一个孩子通过指定条件：

```
Dim query = retTmp.Where(Function(fSimple) Not fSimple.fFrequencySet Is Nothing)
                  .Where(Function(fSimple) fSimple.fFrequencySet.Any(Function(fFrequency) fFrequency.Frequency > FreqMin And fFrequency.Frequency < FreqMax))

Dim retTmp As New ObservableCollection(Of fSimpleItemSet)(query) 
```

或一`Where`通电话：

```
Dim query = retTmp.Where(Function(fSimple) Not fSimple.fFrequencySet Is Nothing AndAlso fSimple.fFrequencySet.Any(Function(fFrequency) fFrequency.Frequency > FreqMin And fFrequency.Frequency < FreqMax)) 
```

# awk - 我们可以在 awk 中使用 shell 变量吗？

> ID：15786777
> 
> 赞同：68
> 
> 时间：2013-04-03T12:00:20.293
> 
> 标签：awk

我们可以在 AWK 中使用 shell 变量`$VAR`代替`$1`,`$2`吗？例如：

```
UL=(AKHIL:AKHIL_NEW,SWATHI:SWATHI_NEW)

NUSR=`echo ${UL[*]}|awk -F, '{print NF}'`
echo $NUSR
echo ${UL[*]}|awk -F, '{print $NUSR}' 
```

实际上，作为 Oracle DBA，我们收到了很多导入请求。我正在尝试使用脚本使其自动化。该脚本将找出转储中的用户并提示需要加载转储的用户。

假设转储有两个用户`AKHIL`，`SWATHI`（转储中可能有可能的用户，我想导入更多的用户）。我想将转储导入新用户`AKHIL_NEW`和`SWATHI_NEW`. 所以要读取的输入有些想像`AKHIL:AKHIL_NEW,SWATHI:SWATHI_NEW`。

首先，我需要找到要创建的用户数，然后我需要`AKHIL_NEW,SWATHI_NEW`从我们提供的输入中获取新用户。这样我就可以连接到数据库并创建新用户然后导入。我没有复制整个代码：我只是从它接受输入用户的地方复制了代码。

```
UL=(AKHIL:AKHIL_NEW,SWATHI:SWATHI_NEW) ## it can be many users like     USER1:USER1_NEW,USER2_USER2_NEW,USER3:USER_NEW..

NUSR=`echo ${UL[*]}|awk -F, '{print NF}'` #finding  number of fields or users
y=1
while [ $y -le $NUSR ] ; do
    USER=`echo ${UL[*]}|awk -F, -v NUSR=$y  '{print $NUSR}' |awk -F: '{print $2}'` #getting     Users to created AKHIL_NEW and SWATHI_NEW and passing to SQLPLUS
    if [[ $USER = SCPO* ]]; then
        TBS=SCPODATA
    else
        if [[ $USER = WWF* ]]; then
            TBS=WWFDATA
        else
            if [[ $USER = STSC* ]]; then
                TBS=SCPODATA
            else
                if [[ $USER = CSM* ]]; then
                    TBS=CSMDATA
                else
                    if [[ $USER = TMM* ]]; then
                        TBS=TMDATA
                    else
                        if [[ $USER = IGP* ]]; then
                        TBS=IGPDATA
                        fi
                    fi
                fi
             fi
        fi
    fi

    sqlplus -s '/ as sysdba'  <<EOF   # CREATING the USERS in the database 
    CREATE USER $USER IDENTIFIED BY $USER  DEFAULT TABLESPACE $TBS TEMPORARY TABLESPACE TEMP QUOTA 0K on SYSTEM QUOTA UNLIMITED ON $TBS;

    GRANT
    CONNECT,
       CREATE TABLE,
       CREATE VIEW,
       CREATE SYNONYM,
       CREATE SEQUENCE,
       CREATE DATABASE LINK,
       RESOURCE,
       SELECT_CATALOG_ROLE
    to $USER;
    EOF 
    y=`expr $y + 1`
done

impdp sysem/manager DIRECTORY=DATA_PUMP DUMPFILE=imp.dp logfile=impdp.log SCHEMAS=AKHIL,SWATHI REMPA_SCHEMA=${UL[*]} 
```

在最后一个 impdp 命令中，我需要使用变量获取转储中的原始用户，即 AKHIL、SWATHI。

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2013-04-03T12:13:40.707

是的，您可以在 awk中使用*shell 变量。*有很多方法可以做到这一点，但我最喜欢的是用`-v`标志定义一个变量：

```
$ echo | awk -v my_var=4 '{print "My var is " my_var}'
My var is 4 
```

只需将环境变量作为参数传递给`-v`标志。例如，如果你有这个变量：

```
$ VAR=3
$ echo $VAR
3 
```

以这种方式使用它：

```
$ echo | awk -v env_var="$VAR" '{print "The value of VAR is " env_var}'
The value of VAR is 3 
```

当然，您可以给出相同的名称，但`$`不是必须的：

```
$ echo | awk -v VAR="$VAR" '{print "The value of VAR is " VAR}'
The value of VAR is 3 
```

*关于`$`in awk*的注释：与 bash、Perl、PHP 等不同，它不是变量名称的一部分，而是[一个 operator](https://stackoverflow.com/questions/11880654/does-awk-support-dynamic-user-defined-variables/11882535#11882535)。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-02-26T10:44:43.580

Awk 和 Gawk 提供了`ENVIRON`关联数组来保存所有导出的环境变量。因此，在您的 awk 脚本中，您可以使用`ENVIRON["VarName"]`来获取 VarName 的值，前提是在运行 awk 之前已经导出了 VarName。

注意`ENVIRON`是预定义的 awk 变量而不是 shell 环境变量。

由于我没有足够的声誉来评论其他答案，因此我必须将它们包括在这里！

较早的答案显示`$ENVIRON`不正确 - 语法将由 shell 扩展，并可能导致扩展为空。

更早前关于 C 无法访问环境变量的评论是错误的。与上面所说的相反，C（和 C++）可以使用该`getenv("VarName")`函数访问环境变量。许多其他语言提供类似的访问（例如，Java：`System.getenv()`、Python：`os.environ`、Haskell System.Environment，...）。请注意，在所有情况下，对环境变量的访问都是只读的，您不能在程序中更改环境变量并将该值返回给调用脚本。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-04-03T12:18:47.607

将变量传递给 有两种方法`awk`：一种方法是在命令行参数中定义变量：

```
$ echo ${UL[*]}|awk -F, -v NUSR=$NUSR '{print $NUSR}'
SWATHI:SWATHI_NEW 
```

另一种方法是使用 将 shell 变量转换为环境变量`export`，并从`ENVIRON`数组中读取环境变量：

```
$ export NUSR
$ echo ${UL[*]}|awk -F, '{print $ENVIRON["NUSR"]}'
SWATHI:SWATHI_NEW 
```

**2016 年更新：** OP 具有逗号分隔的数据，并希望根据其索引提取项目。索引在 shell 变量`NUSR`中。的值`NUSR`被传递给`awk`,`awk`的美元运算符提取项目。

请注意，将 UL 声明为包含多个元素的数组会更简单，然后在 中进行提取`bash`，并`awk`完全从等式中取出。但是，这使用基于 0 的索引。

```
UL=(AKHIL:AKHIL_NEW SWATHI:SWATHI_NEW)
NUSR=1
echo ${UL[NUSR]} # prints SWATHI:SWATHI_NEW 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-08-04T11:07:13.750

还有另一种方法，但它可能会引起巨大的混乱：

```
$ VarName="howdy" ; echo | awk '{print "Just saying '$VarName'"}'
Just saying howdy
$ 
```

所以你暂时退出单引号环境（这通常会阻止shell解释'$'）来解释变量，然后再回到它。它具有相对简短的优点。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-07-22T12:32:10.020

不知道我是否理解你的问题。

但是假设我们有一个变量`number=3`并且我们想使用它而不是`$3`，在 awk 我们可以使用以下代码来做到这一点

```
results="100 Mbits/sec 110 Mbits/sec 90 Mbits/sec"
number=3    
speed=$(echo $results | awk '{print '"\$${number}"'}') 
```

所以速度变量将得到值 110。

希望这可以帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T13:51:13.973

不可以。你可以将 shell 变量的值传递给 awk 脚本，就像你可以将 shell 变量的值传递给 C 程序一样，但是你不能访问 awk 脚本中的 shell 变量，就像你不能访问 shell 变量一样在 C 程序中。和 C 一样，awk 也不是 shell。请参阅 cfajohnson.com/shell/cus-faq-2.html#Q24 上的 comp.unix.shell 常见问题解答中的问题 24。

编写代码的一种方法是：

```
UL="AKHIL:AKHIL_NEW,SWATHI:SWATHI_NEW"
NUSR=$(awk -F, -v ul="$UL" 'BEGIN{print gsub(FS,""); exit}')
echo "$NUSR"
echo "$UL" | awk -F, -v nusr="$NUSR" '{print $nusr}' # could have just done print $NF 
```

但自从你原来的出发点：

```
UL=(AKHIL:AKHIL_NEW,SWATHI:SWATHI_NEW) 
```

将 UL 声明为只有一个条目的数组，您可能需要重新考虑您尝试执行的操作，因为您可能采用了完全错误的方法。

# jquery - 在 for 循环中同步 ajax 调用后浏览器停止工作一段时间

> ID：15786780
> 
> 赞同：0
> 
> 时间：2013-04-03T12:00:34.333
> 
> 标签：jquery, ajax, browser

这是我的代码：

```
for (var i = 0; i < 2; i++) {
    $.ajax({
        type: "GET",
        async: false,
        url: "/MyController/MyMethod",
        success: function (data) {
            if (i == 0) {
                $('#result_progress').hide();
                $('#result_msg').hide();
                $('#details').show();
            } else if (i == 1) {
                $.ajax({
                type: "GET",
                async: true,
                url: "/Import/Finish",
                success: function (data) {
                        ....                        
                });                                            
            }
            if (i < 2) {
                $('#details').html($('#details').html() + 'someText'));
            }                                        
        }
    });
} 
```

在这个例子中，迭代很小，但我在这里使方法更简单。我知道我可以使用 switch，但这不是重点。实际上，它的循环数量要多得多。没关系，此代码也会发生错误。

这就是发生的事情：如果我在第一个 ajax 调用的成功部分设置断点，并且当我在 Chrome 中调试时，一切都可以正常工作。这就是我所说的工作正常的意思：在方法第一次成功后，我希望隐藏一些 div，并显示我从 ajax 调用得到的消息。第二次输入第一个成功，另一个字符串将添加到前一个。最后，当输入第二个成功部分时，该消息被隐藏，我正在显示一些数据。

这就是发生的事情：在调用 MyMethod 之前一切都很好。当它被调用时，浏览器停止工作。如果我按下鼠标左键，什么也不会发生。当最后一次调用 MyMethod 时，浏览器工作正常，我快速浏览了该消息，然后它显示了来自第二个 ajax 调用的数据。我很快看到的消息是整个消息，来自对 MyMethod 的所有调用，这不应该发生。

我希望在整个 for 循环和 Finish 方法之前显示它。它不应该是相同的信息。每次对 MyMethod 的 ajax 调用它应该会变得更大。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:24:32.037

您可以使用“递归”函数来帮助您控制异步调用的流程。您可以异步运行它们，而不是同步运行它们，然后在需要下一个时再次调用该函数。

就像是：

```
function doCall(i) {
    if(i > howManyToRun) return;

    $.ajax({
        //...
        succcess: function(data) {
            //...
            //time to start the next one
            doCall(++i);
        },
        error: function() {
            //call the next one on error?
            doCallI(++i);
        }
    })
} 
```

这样他们就可以异步运行，在他们调用的时候不要阻塞一切；但仍然串联运行。

# php - 可编辑和保存在网页中的文本

> ID：15786781
> 
> 赞同：0
> 
> 时间：2013-04-03T12:00:40.503
> 
> 标签：php, text

我不确定从哪里开始：

我希望在网站上有一个只有几句话的页面，我想要它，以便您能够在浏览器中编辑和添加它，然后保存它，例如 >

网页中间只写了“你好”，用户可以点击它并用“再见”覆盖它。然后将其保存，以便您访问该页面的下一个用户将看到“再见”。

我知道这可能会因匿名和其他东西而失控，但它将被私下使用..

我猜PHP是最好的途径？如果可能的话，在没有数据库的情况下这样做会是超级棒的。如果有人能指出我正确的方向，那就太好了！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:05:45.963

理想情况下`PHP`，`MYSQL`这将是最好的选择，**或者**将文本保存到`txt`带有`PHP`.

看看这个`Mysqli`插入数据的教程[链接>>](http://www.w3schools.com/php/php_mysql_insert.asp)

`PHP` `fwrite()`如果您更喜欢写入 txt 文件，这也是该函数的一个很好的教程：[链接 >>](http://www.tizag.com/phpT/filewrite.php)

我也想看看这个`jQuery`插件，听起来像你想要的。`HTML`它允许您通过单击、键入然后单击后退来编辑元素（无页面刷新）：

[http://www.appelsiini.net/projects/jeditable](http://www.appelsiini.net/projects/jeditable)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:05:57.813

1.  首先，您必须决定**要保存数据/页面的位置**。
    您必须在此处使用服务器端技术（例如 PHP、Perl、C、Ruby ......）：

    *   在数据库中
    *   作为文件
2.  现在，您应该为客户端实现**保存并打开 API**

3.  写**客户端**。
    如果您真的想直接编辑文本，可以使用`content-editable`属性（在 HTML 5 中标准化），例如：http: [//html5demos.com/contenteditable](http://html5demos.com/contenteditable)。

    您是否希望您的用户能够插入新元素（即 HTML 标签）或只编辑一些文本部分？如果您选择前一个选项，那么我建议您使用[CKEditor之类的东西或](http://ckeditor.com/)[Markdown](http://en.wikipedia.org/wiki/Markdown)之类的简单标记语言（也用于 StackOverflow）。

# backbone.js - 使用 require.js 加载脚本

> ID：15786786
> 
> 赞同：0
> 
> 时间：2013-04-03T12:01:01.827
> 
> 标签：backbone.js, requirejs

这是我的 require.js 加载文件：

```
require.config({
    urlArgs: "noCache=" + (new Date).getTime(),
    paths: {
        jquery: "vendor/jquery-1.8.2.min",
        bootstrap: "vendor/bootstrap.min",      
        underscore: "vendor/underscore-min",
        backbone: "vendor/backbone-min",    
        template: "libs/template"    
    }
});

require(["jquery", "bootstrap", "underscore", "backbone", "template", "main"], 
function ($, bootstrap, underscore, backbone, template, main) { 
```

})

在 main.js 文件中，我有以下代码：

```
define(["jquery", "underscore", "backbone"], function ($, _, Backbone) {
  //Backbone and _ are undefined here, why?
}) 
```

那么为什么 ,,_" 和 ,,Backbone" 在这里未定义，我做错了什么？
如何在其他文件中正确使用它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:08:46.010

如果您是主干新手并需要 js 集成，请查看以下教程：

[http://backbonetutorials.com/organizing-backbone-using-modules/](http://backbonetutorials.com/organizing-backbone-using-modules/)

您可能正在使用非 AMD 版本的 Backbone 和下划线。使用 shim 配置，您可以加载任何库，甚至是非 AMD 模块，这是来自我的一个源文件的 shim 配置片段：

```
requirejs.config({
    baseUrl: 'assets/js/',
    paths : {
        'jquery': 'lib/jquery/jquery.min',
        'underscore': 'lib/underscore/underscore-amd-min',
        'backbone': 'lib/backbone/backbone-amd-min',
        'bootstrap': 'lib/bootstrap/bootstrap.min',
    },
    shim: {
        'backbone': {
            deps: ['jquery', 'underscore'],
            exports: 'Backbone'
        },
        'underscore': {
            exports: '_'
        },
        'bootstrap': {
            deps: ['jquery']
        }
    }
}); 
```

* * *

另一种解决方案是使用这些库的 AMD 版本，您可以在此处找到它们： [https ://github.com/amdjs](https://github.com/amdjs)

`path`下载并在您的部分中指向它们。

# javascript - 使用 2 个 jquery 函数

> ID：15786790
> 
> 赞同：0
> 
> 时间：2013-04-03T12:01:14.420
> 
> 标签：javascript, jquery

我想问一下页面加载后如何使用这两个功能

```
jQuery(document).ready(function($)
{
    $('#list').tableScroll({height:500});

}); 
```

和

```
jQuery(document).ready(function($)
{
    $('#list').tableSorter();

}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T12:02:26.610

```
jQuery(document).ready(function($) {
    $('#list').tableSorter().tableScroll({height:500});
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T12:02:34.733

jQuery 支持方法链。

```
jQuery(document).ready(function($) {
    $('#list')
        .tableScroll({height:500})
        .tableSorter();    
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T12:02:23.610

```
jQuery(document).ready(function($)
{
    $('#list').tableScroll({height:500});
    $('#list').tableSorter();
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T12:02:23.907

只需将两者放在一个 DOM 就绪处理程序下并使用链接：

```
$(document).ready(function() {
    $("#list").tableScroll({ height: 500 }).tableSorter();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T12:03:00.830

```
$(document).ready(function() {
    $("#list").tableScroll({ height: 500 }).tableSorter();
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T12:04:12.053

简单，使用

```
jQuery(document).ready(function() {
    $('#list').tableScroll({height:500}).tableSorter();
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-03T12:05:06.053

我想拥有多个就可以了

`jQuery(document).ready(function($) { .... }`

两者都将在加载正文的页面上调用:)。无论是否进行了调用，都将仅在页面加载时调用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-03T12:07:22.703

您可以使用一个较短的版本，`jQuery(document).ready(function())`它会产生相同的结果：

```
 $(function() {
   // code to execute when the DOM is ready
 }); 
```

对于这种情况，使用优雅的链接：

```
$(function() {
    $('#list').tableSorter().tableScroll({height:500});
 }); 
```

有关这两种方法之间差异的讨论，[请参阅这个非常有用的问题。](https://stackoverflow.com/questions/3259496/jquery-document-ready-vs-self-calling-anonymous-function)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-03T12:14:32.683

这是我的做法：

```
// Create an immediately-invoked function expression
(function ($) {

    // Enable strict mode
    "use strict";

    // Cache the selector so the script
    // only searches the DOM once
    var myList = $('#list'); 

    // Chain the methods together
    myList.tableScroll({height:500}).tableSorter();

}(jQuery)); 
```

像这样在 IIFE 中编写 jQuery 意味着您可以将代码与也使用 . 的其他库一起运行`$`，并且不会发生冲突。

确保在文档末尾包含此 JavaScript，就在结束`</body>`标记之前。

# c# - 星级控制也应该接受小数部分

> ID：15786794
> 
> 赞同：1
> 
> 时间：2013-04-03T12:01:28.027
> 
> 标签：c#, asp.net, ajax, ajaxcontroltoolkit, rating

我正在使用 Visual Studio 2010 和 C# 编码。现在我想做一个星级控制，即我有一些在 5 以内的值，不超过这个值，我想根据评级显示 start 评级的值。下面是清晰的场景。

1.  如果我得到一个值 5，那么我必须显示所有 5 颗星都填充了一些颜色。
2.  如果我得到一个值 3，那么我必须显示 3 颗星，其中填充了一些颜色，其余星为空。
3.  如果我得到 3.5 的值，我必须显示 3 开始，它充满了颜色，下一个 4 星用半填充，另一个半星和一个星为空，即没有颜色。
4.  如果我得到一些 4.2 的值意味着我必须显示 4 个完全填充颜色的开始，最后只有 0.2% 应该填充颜色，其余部分为空。

我怎样才能做到这一点？我正在使用 ajax 控件，我不想使用 jquery 请注意。

任何人都可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:03:49.940

我想这正是你想要的

[http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Rating/Rating.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Rating/Rating.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:06:02.653

我想你需要的是这个...... [CLICK ME](http://www.aspsnippets.com/Articles/ASPNet-AJAX-Rating-Extender-Control-Database-Example-How-to-save-and-display-Average-Rating-value-from-database.aspx) 只使用 AJAX 并且没有 Jquery 随心所欲地使用。

# java - FTPClient：没有超时异常

> ID：15786796
> 
> 赞同：0
> 
> 时间：2013-04-03T12:01:33.427
> 
> 标签：java, ftp-client

我正在使用以下代码上传文件。它工作正常，但问题是在上传任意文件的过程中它被挂起（不知道是什么原因）。

- 可能是文件太长。

- 可能是连接无法正常工作。

但它仍然挂起，最后我必须手动终止它。因此，如果有任何问题，那么我如何才能识别超时并不重要，无论什么原因只是跳过该文件并出现一些错误。

```
FTPClient client = new FTPClient();
FileInputStream fis = null;

try {
    client.connect("32.178.10.121");
    client.login("XXX", "XXX");

    //
    // Create an InputStream of the file to be uploaded
    //

    File f = new File("D:\\FileFolder");
    if (f.isDirectory())
    {
        File[] listFiles = f.listFiles();
        for (int i = 0; i < listFiles.length; i++)
        {
            String filename = listFiles[i].getName();
            fis = new FileInputStream(filename);
            client.storeFile(filename, fis);

        }
    }

    //
    // Store file to server
    //
    client.logout();
} catch (IOException e) {
    e.printStackTrace();
} finally {
    try {
        if (fis != null) {
            fis.close();
        }
        client.disconnect();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:16:50.723

如果您使用的是 JDK 1.7，我建议您尝试降级到 1.6。似乎 FTP 在 java 7 中存在缺陷，尤其是在您使用 JDK 的库时。我正在做一个程序，它只是完全冻结了我的计算机，并且会不断上传，但降级对我有用。如果它是一个更大的应用程序，请使用 JDK 1.6 设置另一个项目并尝试仅 FTP 部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:06:18.817

一种选择是您可以在线程中上传文件。如果需要很长时间，您可以使该线程超时。

为此，您可以使用**ExecutorService服务。**

检查此链接以了解如何实现 ExecutorService： [如何使线程超时](https://stackoverflow.com/questions/2275443/how-to-timeout-a-thread)

你在使用 apache commons FtpClient 吗？如果是这样，您可以尝试使用**getStatus()**来不断轮询状态并在出现错误时关闭。或者您可以使用**setDataTimeout(int timeout)**方法设置超时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T12:24:28.887

你可能想试试`client.setControlKeepAliveTimeout(300);`

请参阅（可能重复）：[Commons FTPClient 在上传大文件后挂起](https://stackoverflow.com/questions/10530240/commons-ftpclient-hangs-after-uploading-large-a-file)

# php - 从文档数组中检索部分

> ID：15786798
> 
> 赞同：0
> 
> 时间：2013-04-03T12:01:37.903
> 
> 标签：php, mongodb

我正在使用 mongodb 和 php 构建一个项目，所以我的数据库包含以下记录。

```
{
    "_id": {
        "$id": "515bb7e2a00b2add0b000001"
    },
    "user_id": "user_8888",
    "events": {
        "common test I": {
            "subject": "common test I",
            "start_date": "04/14/2013",
            "start_time": "8.00 AM",
            "end_date": "04/14/2013",
            "end_time": "10.30 AM",
            "all_day_event": "false",
            "discription": "no discription",
            "location": "STC",
            "private": "false",
            "time_zone": "IST",
            "alarm": "true",
            "alarm_threshold": "5",
            "status": "true"
        }
    }
} 
```

所以只使用查询，我如何从记录中检索“common test I”事件。结果应该是：

```
{
    "subject": "common test I",
    "start_date": "04/14/2013",
    "start_time": "8.00 AM",
    "end_date": "04/14/2013",
    "end_time": "10.30 AM",
    "all_day_event": "false",
    "discription": "no discription",
    "location": "STC",
    "private": "false",
    "time_zone": "IST",
    "alarm": "true",
    "alarm_threshold": "5",
    "status": "true"
} 
```

是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:08:14.257

`db.collection.find({},{"events.common test I":1,_id:0})`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:09:43.373

您可以在 find 方法中指定要检索文档的哪些字段。

参见[PHP.net 参考手册 MongoCollection::find](http://php.net/manual/de/mongocollection.find.php)。

就像是

```
$collection->find(array(), array('events.common test I'=>true)); 
```

请注意“总是返回 _id 字段”。

虽然我建议不要在对象键/字段名称中使用空格。

# java - spring security 记住我的身份验证

> ID：15786801
> 
> 赞同：1
> 
> 时间：2013-04-03T12:01:47.993
> 
> 标签：java, authentication, spring-security, remember-me

我有在客户端保存 cookie 的机制。但是当我尝试使用 spring security 实现 remember-me 时，我遇到了这个教程：

[http://static.springsource.org/spring-security/site/docs/3.0.x/reference/remember-me.html#remember-me-persistent-token](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/remember-me.html#remember-me-persistent-token)

但是这里一切都是抽象的，没有给出示例。有人可以告诉我如何在我需要实现持久性 cookie 的应用程序中使用本教程中提到的接口……请告诉我我需要在其中定义什么我的security.xml 文件？

我正在针对 RESTful 服务对我的用户进行身份验证..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:45:42.680

官方文档不是抽象的。使用 Spring Security 开启 remember-me 非常简单（我假设 Spring Security 已经配置并且用户存储在 DB 中）：

1 在 conf 中打开 remeber-me ：

```
<http>
    ...
    <remember-me data-source-ref="yourDataSource"/>
</http> 
```

2 在数据库中创建对应的表：

```
create table persistent_logins (username varchar(64) not null, series varchar(64) primary key, token varchar(64) not null, last_used timestamp not null) 
```

3 在您的登录表单中添加相应的复选框：

```
<input id="rememeberMe" type="checkbox" name="_spring_security_remember_me"> 
```

在 REST 的情况下，您需要根据您的身份验证场景调整第三步。

# c# - 在表单 onload 中为网格加载数据

> ID：15786802
> 
> 赞同：1
> 
> 时间：2013-04-03T12:01:51.420
> 
> 标签：c#, forms, load

我在 windows 窗体上有一个网格，需要在窗体加载时填充。数据来自数据库。目前我在表单 onload 中调用 LoadData()。因此，由于有数据库调用，加载屏幕需要相当长的时间。

这是一个好方法吗？我不能使用后台工作程序并异步调用 LoadData() 以便加载窗口不会有任何延迟吗？

有人可以解释一下最好的方法是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T06:39:37.183

您可以简单地使用 Dispatcher 在表单呈现后异步加载数据

```
 /// <summary>
        /// Handles the Loaded event of the Window control.
        /// </summary>
        /// <param name="sender">The source of the event.</param>
        /// <param name="e">The <see cref="System.Windows.RoutedEventArgs"/> instance containing the event data.</param>
        private void Window_Loaded(object sender, RoutedEventArgs e)
        {
            this.Dispatcher.BeginInvoke(DispatcherPriority.Background, new LoadDataDelegate(LoadData));
        }

        private delegate void LoadDataDelegate();

        /// <summary>
        /// Loads the data.
        /// </summary>
        private void LoadData()
        {
            List<string> numberDescriptions = new List<string>();
            for (int i = 1; i <= 10000000; i++)
            {

                numberDescriptions.Add("Number " + i.ToString());
            }
            listBox1.ItemsSource = numberDescriptions;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T10:15:26.163

在表单加载时从数据库同步加载数据不是一个好方法，您应该在单独的线程上异步加载它。

您可以使用以下任一方式：

1.  线程类
2.  后台工作者

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T10:19:44.843

备注：

1.  查询优化和索引搜索跟踪表
2.  数据网格是复杂的对象，并且有时间更新和填充它的普通对象（特别是当有更多列时）
3.  您必须考虑的系统硬件（Ram、CPU、VGA、...）
4.  我认为最好的方法是对您的查询结果进行排序并按访问的最后代码分页您的结果并使用它：

    void NextPage()
    {
    Qr="select Top N from tbl where Code>LastCode order by Code asc";
    //读取数据
    FirstCode=Drr["Code"];//对于第一条记录结果
    LastCode=Drr["Code"];//对于最后一条记录结果
    }
    void PreviousPage()
    {
    Qr="select Top N from tbl where Code < FirstCode order by Code asc";

    //读取数据

    FirstCode=Drr["Code"];//为第一次记录结果
    LastCode=Drr["Code"];//为最后一次记录结果
    }

希望这个帮助

# iphone - 如何在iphone的手机上显示倒数计时器？

> ID：15786803
> 
> 赞同：2
> 
> 时间：2013-04-03T12:01:53.153
> 
> 标签：iphone, ios, objective-c, ipad

** 当我长按单元格时，我会在单元格上显示倒计时计时器。但问题是，当我单击行计时器启动但突然当我单击第二个单元格计时器停止前一个单元格并启动计时器新单元格时，我单击，但我需要的主要功能是我必须显示运行前一个计时器和当前计时器。请任何人给我正确的方法。**

```
 -(void)handleLongPress:(UILongPressGestureRecognizer *)gestureRecognizer
 { AppDelegate *app=(AppDelegate *)[UIApplication sharedApplication].delegate;
   CGPoint p = [gestureRecognizer locationInView:ChatTable];
    NSIndexPath *indexPath = [ChatTable indexPathForRowAtPoint:p];

if ([[[userArray valueForKey:@"sender_id"] objectAtIndex:indexPath.row]isEqualToString: app.userId]) {

}

else{

    if (gestureRecognizer.state == UIGestureRecognizerStateBegan)
    {

        if ([imageCache objectForKey:[NSString stringWithFormat:@"%d",indexPath.row]]==NULL) {

        }
        else
        {
            self.picId=[[userArray valueForKey:@"pic_id"] objectAtIndex:indexPath.row];
            self.imageName=[[userArray valueForKey:@"imagename"] objectAtIndex:indexPath.row];
            ChatTable.userInteractionEnabled=NO;
            // self.navigationController.navigationBarHidden=YES;
            image=[[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 320, 480)];
            self.pickerValue=[[userArray valueForKey:@"seconds"] objectAtIndex:indexPath.row];
            image.image=[imageCache objectForKey:[NSString stringWithFormat:@"%d",indexPath.row]];
            [self.view addSubview:image];
            [self showTableTime:indexPath];
        }
    }
    else if (gestureRecognizer.state == UIGestureRecognizerStateEnded) {
        UITableViewCell * myCell = [ChatTable cellForRowAtIndexPath:indexpathForTimer];
        UILabel * myLabel = (UILabel *)[myCell viewWithTag:101];
        myLabel.text=@"";
        //  self.navigationController.navigationBarHidden=NO;
        [image removeFromSuperview];
    }

}

}

-(void)showTableTime:(NSIndexPath *)indexPath
 {
  secondsLeft=[self.pickerValue integerValue];
   indexpathForTimer=indexPath;
   [self countDownTimer];

 }

- (void)countDownTimer {

  timer =[NSTimer scheduledTimerWithTimeInterval:1.0 target:self           selector:@selector(updateCounter:) userInfo:nil repeats:YES];

   }
   - (void)updateCounter:(NSTimer *)theTimer {

UITableViewCell * myCell = [ChatTable cellForRowAtIndexPath:indexpathForTimer];
UILabel * myLabel = (UILabel *)[myCell viewWithTag:101];
if (secondsLeft >0) {
    secondsLeft --;
    UILabel * myLabel = (UILabel *)[myCell viewWithTag:101];
    myLabel.text=[NSString stringWithFormat:@"0%d",secondsLeft];

}
else if(secondsLeft==0)
{
    [self.image removeFromSuperview];
    [timer invalidate];
    ChatTable.userInteractionEnabled=YES;
    myLabel.text=@"";
    [self SendRequsetToServerOfSeenImage];

}
else
{
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:09:20.477

试试这个

```
- (void)countDownTimer 
{

timer =[NSTimer scheduledTimerWithTimeInterval:1.0 target:self           selector:@selector(updateCounter:) userInfo:nil repeats:YES];
[[NSRunLoop mainRunLoop]addTimer:timer forMode:NSRunLoopCommonModes];

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:29:35.283

问题是您只存储一个计时器/索引路径对（您只使用变量“timer”和“indexPathForTimer”）。一旦激活第二个单元格，变量 indexPathForTimer 将被第二个单元格的 indexPath 覆盖，因此您只更新第二个单元格。

我建议您将变量 timer 转换为 NSMutableArray 并将 indexPathForTimer 转换为 NSMapTable 然后执行

```
// code to init the map table, perform this where you initialize your variables
// (you may want to use weakToStrong or weakToWeak depending on your memory
// management)
indexPathForTimer = [NSMapTable strongToStrongObjectsMapTable];

// use this code to create your timer instance with reference to the index path
// for which it was instantiated
NSTimer* newTimer = [NSTimer timerWithTimerInterval:1.0 target:self selector:@selector(updateCounter:) userInfo:nil repeats:YES];
[timer addObject:newTimer];
[indexPathForTimer addObject:indexPath forKey:newTimer];
[NSRunLoop mainRunLoop] addTimer:newTimer forModes:NSRunLoopCommonModes]; 
```

在您的 updateCounter: 方法中，您可以像这样获取真正的索引路径

```
currentIndexPath = [indexPathForTimer objectForKey:theTimer]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T12:26:44.257

我认为您想在视图或每个单元格上运行多个计时器。但是处理在不同单元上运行的多个计时器变得复杂。

# asp.net - Site.Master 中的 Visual Studio Express 2012 错误“未声明脚本”

> ID：15786805
> 
> 赞同：2
> 
> 时间：2013-04-03T12:02:05.387
> 
> 标签：asp.net

嗨，我刚刚进入 asp.net 和 SqlServer，虽然在遥远的过去使用过 asp/oracle。Site.Master 文件中的以下代码

```
<!DOCTYPE html>
<html lang="en">
<head runat="server">
  <meta charset="utf-8" />
  <title><%: Page.Title %> - My ASP.NET Application</title>
    <asp:PlaceHolder runat="server">        
      <%: Scripts.Render("~/bundles/modernizr") %>
    </asp:PlaceHolder> 
```

引发错误
1 ​​'Scripts' 未声明。由于其保护级别，它可能无法访问。

我正在慢慢掌握 asp.net 做事的方式，任何可以帮助我克服这个小障碍的帮助将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T12:55:59.323

该实用程序由`System.Web.Optimization`库提供。确保提供了命名空间，否则它将无法找到 Scripts 对象。

# unix - 根据unix中的文件名时间戳查找目录中最旧的文件

> ID：15786811
> 
> 赞同：2
> 
> 时间：2013-04-03T12:02:14.123
> 
> 标签：unix, sed, awk

我希望首先列出基于文件名日期和时间戳的目录中最旧的文件。

例子：

输入文件 ：

```
AAAG11020709581.txt
AAAG13020709581.txt
AACL11020709581.txt
AACL13020709581.txt
AAFU11020709581.txt
AAFU13020709581.txt
AAHO11020709581.txt
AAHO13020709581.txt
AAPC11020709581.txt
AAPC13020709581.txt
AAPO11020709581.txt
AAPO13020709581.txt
AATR11020709581.txt
AATR13020709581.txt
AARC11020709581.txt
AARC13020709581.txt 
```

预期输出：

```
AAAG11020709581.txt
AACL11020709581.txt
AAFU11020709581.txt
AAHO11020709581.txt
AAPC11020709581.txt
AAPO11020709581.txt
AARC11020709581.txt
AATR11020709581.txt
AAAG13020709581.txt
AACL13020709581.txt
AAFU13020709581.txt
AAHO13020709581.txt
AAPC13020709581.txt
AAPO13020709581.txt
AARC13020709581.txt
AATR13020709581.txt 
```

有人可以建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T12:25:23.243

默认情况下，排序将以行的开头作为键进行排序。你可以用符号告诉它从不同的地方`-k FIELD.OFFSET`开始，例如，如果所有文件名都以 4 个字母开头，你可以像这样跳过这些：

```
sort -k1.5 
```

输出：

```
AAAG11020709581.txt
AACL11020709581.txt
AAFU11020709581.txt
AAHO11020709581.txt
AAPC11020709581.txt
AAPO11020709581.txt
AARC11020709581.txt
AATR11020709581.txt
AAAG13020709581.txt
AACL13020709581.txt
AAFU13020709581.txt
AAHO13020709581.txt
AAPC13020709581.txt
AAPO13020709581.txt
AARC13020709581.txt
AATR13020709581.txt 
```

# json - R 网络/文本挖掘 - 网络查询 JSON 读取

> ID：15786830
> 
> 赞同：0
> 
> 时间：2013-04-03T12:03:12.173
> 
> 标签：json, r, web, mining

在 Blekko 搜索引擎中，您可以获得 JSON 格式的搜索结果，例如使用搜索词“lifehacker”：

[http://blekko.com/ws/?q=lifehacker+%2Fjson](http://blekko.com/ws/?q=lifehacker+%2Fjson)

您如何从 R 执行此查询并解析内容？[有一个 URL、一个 RSS URL 和一个带有正文的片段。]

我已经尝试过软件包 tm.plugin.webmining 和boilerpipeR，但无法弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:12:46.297

使用`Rcurl`和包检索结果`RJSONIO`非常方便：`rjson`

```
library(RCurl)
library(RJSONIO)
doc <-  getURL('http://blekko.com/ws/?q=lifehacker+%2Fjson')
doc.ll <- fromJSON(doc) 
```

然后你可以像这样检查结果：

```
doc.ll$RESULT 
```

# mysql - 如何在 mysql 查询中连接行

> ID：15786833
> 
> 赞同：0
> 
> 时间：2013-04-03T12:03:18.940
> 
> 标签：mysql, sql, select, group-concat

```
table 1
--------
pid | name
1    someone
2    another

table2
--------
bid | valu
1     drum
2     guitar
3     flower
4     cake

table3
------
id | pid | bid | pref
1    1     3     yes
2    1     1     maybe
3    1     2     no
4    2     4     definately
5    2     2   
6    2     3     no 
```

如您所见，我有 3 个简单的表，其中第三个用于创建表 1 和 2 之间的映射以及一些附加数据。现在我需要编写一个查询来在基于 , 的连接字符串中显示`valu`and`pref``pid`

所以反对`pid = 1`，预期的输出是这样的 `flower yes, drum maybe, guitar no`......所以我该如何编写这个查询？

我试过（几乎是盲目的猜测）：

```
SELECT opa.name, GROUP_CONCAT(CONCAT(opb.valu,' ',opc.pref) SEPARATOR ',') AS myChoice
 From
     table_1 opa
 INNER JOIN table_3 opc ON opc.pid = opa.pid
 INNER JOIN table_2 opb ON opb.bid = opc.bid 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:11:35.493

您的查询是正确的您只是忘记了`GROUP BY`

```
 SELECT opa.name, GROUP_CONCAT(CONCAT(opb.valu,' ',opc.pref) SEPARATOR ',') AS myChoice
 From
 table1 opa
 INNER JOIN table3 opc ON opc.pid = opa.pid
 INNER JOIN table2 opb ON opb.bid = opc.bid
 group by opc.pid 
```

[**在这里演示**](http://sqlfiddle.com/#!2/1d10d/2)

# iphone - 以编程方式突出显示控件

> ID：15786835
> 
> 赞同：0
> 
> 时间：2013-04-03T12:03:22.597
> 
> 标签：iphone, ios, objective-c, ipad

我有许多控件，例如图像视图、标签 (UIControls)，我希望将它们显示为双模式控件。即根据我的数据，我必须将它们设置为图像 1 或图像 2（对于图像视图），与标签类似。我尝试使用图像视图和标签的突出显示状态属性来完成此操作。对于图像视图，我为突出显示提供了一个图像参考，为正常提供了另一个参考。

但是，当我以编程方式将突出显示的属性设置为是时，它们不会在它们之间切换。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:11:41.410

改为使用`selected`状态。我认为`highlighted`状态是一种瞬态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:12:38.340

从[文档中](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIControl_Class/Reference/Reference.html)：

> 控件的突出显示状态。当在跟踪过程中触摸进入和退出以及发生触摸事件时，控件将进入此状态。您可以通过突出显示的属性检索和设置此值。

所以，你不设置`highlighted`属性。试试 setSelected。

您是否看过这个相关主题：[突出显示 UIControl 子类](https://stackoverflow.com/questions/4428437/highlighting-a-uicontrol-subclass)？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T13:30:26.367

试试这个：

if([imgeview isselected]){

[imageview setselected:NO];

}别的{

[imageview setselected:YES];

}

# search - Yii 从函数中搜索

> ID：15786836
> 
> 赞同：1
> 
> 时间：2013-04-03T12:03:22.720
> 
> 标签：search, yii, cgridview

我有一个 CGridView，我想在其中搜索。问题是我有一个由模型中的函数修改的列。一切都从 search.php 视图开始，其中包含一个如下所示的 cgridview：

```
$this->widget('zii.widgets.grid.CGridView', array(
'id'=>'grid-demande',
'summaryText'=>'',
'dataProvider'=>$model->search(),
//'filter'=>$model,
'cssFile'=>Yii::app()->request->baseUrl."/css/my_gridview.css",
'columns'=>array
(
array(            
        'name'=>'id_post',
        'htmlOptions'=>array('width'=>'16%'),
    ),
array(            
        'name'=>'fk_authorid',
        'htmlOptions'=>array('width'=>'16%'),
        'value'=>array($this,'renderNameDmd'),
    ),
) 
```

如您所见，调用函数 renderNameDmd 来呈现作者的姓名。此函数在我的模型中，但从控制器调用：

```
protected function renderNameDmd($data,$row)
{
$model=$this->loadModelDmd($data->id_post);
return $model->getChAuthor();   
} 
```

在我调用的模型类中：

```
public function getChAuthor(){ 
    $modelUsr=TUsers::model()->findByPk($this->fk_authorid);
return $this->fk_authorid.', '.$modelUsr->ch_completeName;
} 
```

一切都可以正常显示。我的主要问题是我想通过这个 cgridview 进行搜索，但我无法使用显示的值进行搜索。这是我的模型中包含的搜索功能：

```
public function search()
{
    // Warning: Please modify the following code to remove attributes that
    // should not be searched.

    $criteria=new CDbCriteria;

            //more criterias

    $criteria->compare('fk_cip',$this->fk_cip,true);

    return new CActiveDataProvider($this, array(
        'criteria'=>$criteria,
    ));
} 
```

目前，我尝试了几件事，但没有任何效果，所以我将代码重置为初始状态。现在，如果我通过我的 cgridview 进行搜索，我只能使用*authorid*而不是我编写的完整列格式进行过滤。示例：

对于如下所示的一行：

> 3231，约翰·多伊

我只能搜索：

> 3231

* * *

我想搜索从函数创建的行。感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:21:59.083

嗯，Yii 对这种特性非常方便，但你应该首先重写你的模型以使用关系。

在您的模型中：

```
// this attribute will be used in search function
private $_authorName;

public function rules()
{
    return array (
        .....
        array('authorName', 'safe', 'on'=>'search'),
        .....
    );
}

public function relations()
{
    return array(
        .....
        'author' => array(self::BELONGS_TO, 'TUsers', 'fk_authorid'),
        .....
    );
}

// authorName getter
public function getAuthorName()
{
    if ($this->scenario=='search')
        return $this->_authorName;

    return $this->fk_authorid.', '.$this->author->ch_completeName;
}

// authorName setter
public function setAuthorName($authorName) { 
    $this->_authorName = $authorName;
}

public function search()
{
    $criteria=new CDbCriteria;

    .....

    // search author name ?
    if ($this->authorName!==null)
    {
        $criteria->with = array('author');
        $criteria->compare('author.ch_completeName', $this->authorName, true);
    }

    .....

    return new CActiveDataProvider($this, array(
        'criteria'=>$criteria,
    ));
} 
```

在您的 CGridView 中，您应该像这样简单地定义您的列：

```
array(            
    'name'=>'authorName',
    'htmlOptions'=>array('width'=>'16%'),
), 
```

你应该阅读这个： [http ://www.yiiframework.com/wiki/281/searching-and-sorting-by-related-model-in-cgridview/](http://www.yiiframework.com/wiki/281/searching-and-sorting-by-related-model-in-cgridview/)

# php - 为 CRM 动态 2011 中的查找字段添加值

> ID：15786840
> 
> 赞同：1
> 
> 时间：2013-04-03T12:03:42.863
> 
> 标签：php, xml, dynamics-crm-2011

我设法使用 PHP 与 CRM 动态 2011 建立了成功的在线连接。我什至设法创建了一个新的潜在客户并添加了以下呈现的值：

```
<s:Body>
                <Create xmlns="http://schemas.microsoft.com/xrm/2011/Contracts/Services">
                <entity xmlns:b="http://schemas.microsoft.com/xrm/2011/Contracts" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
                    <b:Attributes xmlns:c="http://schemas.datacontract.org/2004/07/System.Collections.Generic">
                        <b:KeyValuePairOfstringanyType>
                            <c:key>name</c:key>
                            <c:value i:type="d:string" xmlns:d="http://www.w3.org/2001/XMLSchema">Test Here</c:value>
                        </b:KeyValuePairOfstringanyType>
                        <b:KeyValuePairOfstringanyType>
                            <c:key>emailaddress1</c:key>
                            <c:value i:type="d:string" xmlns:d="http://www.w3.org/2001/XMLSchema">test@test.com</c:value>
                        </b:KeyValuePairOfstringanyType>
                        <b:KeyValuePairOfstringanyType>
                            <c:key>address1_city</c:key>
                            <c:value i:type="d:string" xmlns:d="http://www.w3.org/2001/XMLSchema">Location Here</c:value>
                        </b:KeyValuePairOfstringanyType>
                        <b:KeyValuePairOfstringanyType>
                            <c:key>telephone1</c:key>
                            <c:value i:type="d:string" xmlns:d="http://www.w3.org/2001/XMLSchema">123456</c:value>
                        </b:KeyValuePairOfstringanyType>
                    </b:Attributes>
                    <b:EntityState i:nil="true"/>
                    <b:FormattedValues xmlns:c="http://schemas.datacontract.org/2004/07/System.Collections.Generic"/>
                    <b:Id>00000000-0000-0000-0000-000000000000</b:Id>
                    <b:LogicalName>account</b:LogicalName>
                    <b:RelatedEntities xmlns:c="http://schemas.datacontract.org/2004/07/System.Collections.Generic"/>
                </entity>
                </Create>
            </s:Body> 
```

我现在坚持的事情是如何为查找字段“primarycontactid”添加一个值

比如说我想添加“Mahmoud Jabado”的值

我有一个 javascript 函数，我只是有点迷失在哪里以及如何实现它。没有办法以类似于上述 XML 的方式设置值吗？

PS：我是用PHP编程的，我的编程水平没有那么高。提前感谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:37:39.853

有一种方法可以直接在 xml 中设置，但您需要尝试添加的联系人的 Guid。在我前段时间工作的一个旧的 Java 应用程序中，类似于以下内容的东西对我有用，所以也应该对你有用：

```
<b:KeyValuePairOfstringanyType>
    <c:key>primarycontactid</c:key>
    <c:value i:type="b:EntityReference">
        <b:Id>[CONTACT GUID GOES HERE]</b:Id>
        <b:LogicalName>contact</b:LogicalName>
        <b:Name i:nil="true" />
    </c:value>
</b:KeyValuePairOfstringanyType> 
```

因为`<b:Name>`您可以将联系人姓名放在那里，但如果您正在创建/更新记录，则不需要它。

（注意：我猜到了命名空间，所以可能需要一些调整）

# python - 变量名给出语法错误（Python）

> ID：15786845
> 
> 赞同：0
> 
> 时间：2013-04-03T12:03:54.313
> 
> 标签：python, variables, syntax-error

我制作的一个简单程序有问题。

```
num2 = 0
num1 = 1
print ("Enter a number one after another to sum them up, and when you're done type 0")
while num1 != 0:
    num1 = float(raw_input ("Please enter a number:")
    num2 += num1
if num1 == 0:
    print ("The sum of the numbers is:" + str(num2)) 
```

由于某种原因，该行`num2 += num1`给了我一个语法错误`num2`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T12:05:50.543

你错过了一个 `)`，右括号，在这里：

```
 num1 = float(raw_input ("Please enter a number:") 
```

应该

```
 num1 = float(raw_input ("Please enter a number:")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-14T14:21:34.783

```
num = (int(input('pick a number to find if it is prime')
div = 2
while num !% div or div != num-1 
    f=num/div
    if num % div :
        print('no as ' ,num, 'is divisible by ',div)
        div = 2
    else:
        div=div+1 
```

# php - 我应该在提交的文本区域中期待换行符的格式

> ID：15786848
> 
> 赞同：1
> 
> 时间：2013-04-03T12:03:56.397
> 
> 标签：php, forms, http, newline

我的 PHP Web 应用程序收到一个带有文本区域的表单，用户*需要*在其中添加换行符。我不想将文本分成几行。

提交的 $_POST 中的换行符应该采用哪种格式？我知道在不同的环境中它可以是 \n, \r, \n\r, \r\n 中的任何一个，但是什么适用于网络？浏览器、网络服务器（在我的例子中是 Apache）或 PHP 是否会以某种方式对其进行规范化？

我不想对用户浏览器做任何假设，而且我知道文本实际上是从 Excel 剪切和粘贴的电子表格。

（这个 UI 的设计不在我的控制范围内）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:36:32.133

# c# - 在内存中使用没有负载基础的 LinqToSql

> ID：15786850
> 
> 赞同：3
> 
> 时间：2013-04-03T12:04:00.923
> 
> 标签：c#, .net, linq, linq-to-sql

我有一个问题。如果我使用的是 LinqToSql，我的程序会将我的数据库加载到内存中。小例子：

```
//pageNumber = 1; pageSize = 100;                
                var result =
                    (
                    from a in db.Stats.AsEnumerable()
                    where (DictionaryFilter(a, sourceDictionary) && DateFilter(a, beginTime, endTime) && ErrorFilter(a, WarnLevel))
                    select a
                    );
                var size = result.Count(); // size = 1007
                var resultList = result.Skip((pageNumber-1)*pageSize).Take(pageSize).ToList();
                return resultList; 
```

DictionaryFilter、DateFilter 和 ErrorFilter 是过滤我的数据库的函数。在此之后，我的程序使用 ~250Mb 的 Ram。如果我不使用：

```
var size = result.Count(); 
```

我的程序使用 ~120MB 内存。在使用此代码之前，我的程序使用 ~35MB Ram。

如何使用 count 和 take 函数而不将所有数据库加载到内存中？

```
static bool DateFilter(Stat table, DateTime begin, DateTime end)
{

    if ((table.RecordTime >= begin.ToFileTime()) && (table.RecordTime <= end.ToFileTime()))
    {
        return true;
    }
    return false;
}
static bool ErrorFilter(Stat table, bool[] WarnLevel)
{
    if (WarnLevel[table.WarnLevel]) return true;
    else return false;
}
static bool DictionaryFilter(Stat table, Dictionary<GetSourcesNameResult, bool> sourceDictionary)
{
    foreach (var word in sourceDictionary)
    {
        if (table.SourceName == word.Key.SourceName)
        {
            return word.Value;
        }
    }
    //
    return false;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T12:08:22.960

很简单：**不要使用`.AsEnumerable()`**. 这意味着“切换到 LINQ-to-Objects”。在此之前，`db.Stats`是`IQueryable<T>`，它是一个*可组合*的API，会做你所期望的。

但是，这意味着您不能使用像`DictionaryFilter`and这样的 C# 方法`DateFilter`，而必须根据`Expression`API 组合事物。如果你能说明他们*做*了什么，我可能会提供进一步的建议。

通过您的编辑，可以调整过滤，例如：

```
static IQueryable<Stat> ErrorFilter(IQueryable<Stat> source, bool[] WarnLevel) {
    // extract the enabled indices (match to values)
    int[] levels = WarnLevel.Select((val, index) => new { val, index })
                            .Where(pair => pair.val)
                            .Select(pair => pair.index).ToArray();

    switch(levels.Length)
    {
        case 0:
            return source.Where(x => false);
        case 1:
            int level = levels[0];
            return source.Where(x => x.WarnLevel == level);
        case 2:
            int level0 = levels[0], level1 = levels[1];
            return source.Where(
                  x => x.WarnLevel == level0 || x.WarnLevel == level1);
        default:
            return source.Where(x => levels.Contains(x.WarnLevel));
    }
} 
```

日期过滤器更简单：

```
static IQueryable<Stat> DateFilter(IQueryable<Stat> source,
      DateTime begin, DateTime end)
{
    var from = begin.ToFileTime(), to = end.ToFileTime();
    return source.Where(table => table.RecordTime >= from
        && table.RecordTime <= to);
} 
```

字典有点像关卡：

```
static IQueryable<Stat> DictionaryFilter(IQueryable<Stat> source,
    Dictionary<GetSourcesNameResult, bool> sourceDictionary)
{
    var words = (from word in sourceDictionary
                 where word.Value
                 select word.Key.SourceName).ToArray();

    switch (words.Length)
    {
        case 0:
            return source.Where(x => false);
        case 1:
            string word = words[0];
            return source.Where(x => x.SourceName == word);
        case 2:
            string word0 = words[0], word1 = words[1];
            return source.Where(
                  x => x.SourceName == word0 || x.SourceName == word1);
        default:
            return source.Where(x => words.Contains(x.SourceName));
    }
} 
```

和：

```
IQueryable<Stat> result = db.Stats;
result = ErrorFilter(result, WarnLevel);
result = DateFiter(result, beginTime, endTime);
result = DictionaryFilter(result, sourceDictionary);
// etc - note we're *composing* a filter here

var size = result.Count(); // size = 1007
var resultList = result.Skip((pageNumber-1)*pageSize).Take(pageSize).ToList();
return resultList; 
```

关键是我们现在正在使用`IQueryable<T>`并且`Expression`专门。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:10:11.063

以下 SO 问题可能会解释一些事情：[Understanding .AsEnumerable in Linq To Sql](https://stackoverflow.com/questions/3311244/understanding-asenumerable-in-linq-to-sql)

.AsEnumerable() 加载整个表。

# c++ - 让QWidget在点击后消失

> ID：15786852
> 
> 赞同：1
> 
> 时间：2013-04-03T12:04:09.270
> 
> 标签：c++, qt, qwidget

我正在显示 QTableWidget，并希望它在选择此表中的某些项目后消失，并且如果用户在 QTableWidget 区域之外单击。

```
connect(tableWidget, SIGNAL(itemClicked(QTableWidgetItem *)), tableWidget, SLOT(close())); 
```

选择项目后，这条线做我想要的。这是一种让小部件在没有子类化的情况下单击而不是消失的方法（例如，我可以子类化并编写自己的 lossfocus 事件处理程序，但没有子类化会更好）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:12:46.317

假设您有 MainWidget，其中包含所有内容。它有`clicked()`信号。将其连接到某个插槽并在该插槽中隐藏 tableWidget ( `tableWidget()->hide()`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:26:23.873

这可能不是一个非常优雅的解决方案，但它可能会起作用：

1.  子类`QTableWidget`
2.  确保表格小部件在显示时具有键盘焦点。
3.  重新实现[`void QWidget::focusOutEvent ( QFocusEvent * event )`](http://qt-project.org/doc/qt-4.8/qwidget.html#focusOutEvent)（当你失去焦点时关闭表格小部件）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T11:13:29.907

我的解决方案是将 QTableWidget 放入 QWidget 并制作后者 Qt::Popup - 它完全符合我的需要

# javascript - 图像轮播脚本在最后一张图像后停止。需要重复

> ID：15786854
> 
> 赞同：0
> 
> 时间：2013-04-03T12:04:13.237
> 
> 标签：javascript, jquery, carousel

我需要在显示最后一张图像后重复我的脚本。我如何才能重置脚本所做的事情然后让它再次播放？该脚本更改当前图像的 z-index。在最后一张图片之后，如何让脚本“重置”所有图片的 z-index 并从顶部重新运行？谢谢！

```
<script>
function cycleImages(){
  var $active = $('#carousel .active');
  var $next = ($('#carousel .active').next().length > 0) ? $('#carousel .active').next() : $('#carousel img:first');
  $next.css('z-index',2);//move the next image up the pile
  $active.fadeOut(1500,function(){//fade out the top image
  $active.css('z-index',1).show().removeClass('active');//reset the z-index and unhide the image
  $next.css('z-index',3).addClass('active');//make the next image the top one
  if ($('#carousel .active').next().length > 0) setTimeout('cycleImages()',1000);//check for a next image, and if one exists, call the function recursively
  });
}

$(document).ready(function(){
  // run every 7s
  setTimeout('cycleImages()', 1000);
})

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:07:06.797

设置新的 Timeout 时无需再次检查是否有下一个 .active 元素

只用

```
setTimeout('cycleImages()',1000); 
```

代替

```
if ($('#carousel .active').next().length > 0) setTimeout('cycleImages()',1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:13:46.050

简单的逻辑是通过将**.length**与图像总数（全长）进行比较来检查图像是否已到达末尾。如果是，则转到第一张图片，即

`('#carousel .active').first()`

并打电话

`setTimeout('cycleImages()',1000);`

快乐编码:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T12:18:15.480

您可以通过维护 z-index 的计数器来将活动元素发送回来，而不是将下一个元素放在前面，例如

```
<script>
var zCount = 0;
function cycleImages(){
  var $active = $('#carousel .active');
  var $next = ($('#carousel .active').next().length > 0) ? $('#carousel .active').next() : $('#carousel img:first');

  $active.fadeOut(1500, function(){//fade out the top image
    $active.css('z-index', --zCount).show().removeClass('active'); //send the active image at the bottom of all images and unhide the image
    $next.addClass('active'); //make the next image as active
    setTimeout('cycleImages()',1000);
  });
}

$(document).ready(function(){
  setTimeout('cycleImages()', 1000);
})

</script> 
```

# php - 如何保护通过 PHP 动态生成的 XML 文件

> ID：15786855
> 
> 赞同：-1
> 
> 时间：2013-04-03T12:04:14.520
> 
> 标签：php, xml, security

我有 XML 文件，它是通过 PHP 动态生成的。此 XML 文件处理 Javascript 并在谷歌地图中显示数据。

当有人插入 PHP 文件的 URL 名称时，如何保护 XML 文件？

任何例子或链接？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:35:57.343

不是 100% 确定你在问什么。您是说您的 PHP 脚本会生成一个 XML 文件，然后将其存储以供以后使用？而且您不希望该 XML 可公开访问？

如果是这样，只需将 XML 文件放在 www/ 目录之外。这样，只有服务器和您的 PHP 脚本才能访问它。

# ajax - 带有 fb 注释、ajax 加载 (pushState) 和定义 href 属性的 HREF 属性

> ID：15786861
> 
> 赞同：1
> 
> 时间：2013-04-03T12:04:32.710
> 
> 标签：ajax, facebook, comments

我真的对这个感到头疼，所以我希望任何人都可以看看并提供帮助。

我用 pushState 和 fb 评论构建了 ajax-ed 网页。问题是，每当我加载新内容和 fb 评论时，我都会收到有关设置 href 属性的错误。这是代码：

首先，我异步调用 fb init：

```
<script>
window.fbAsyncInit = function() {
FB.init({
appId      : 'MY_APP_ID', 
channelUrl : 'http://promplac.si/channel.php', 
status     : true, 
cookie     : true, 
xfbml      : true  
});
};
(function() {
var e = document.createElement('script'); e.async = true;
e.src = document.location.protocol +'//connect.facebook.net/en_US/all.js';document.getElementById('fb-root').appendChild(e);
}());
</script> 
```

关于内容更改，我调用：

```
<script>      
function showComment($currentUrl) {
document.getElementById('theplace').innerHTML='<fb:comments id="fbcomment" href="'+document.URL+'" width="510" num_posts="3"></fb:comments>';
console.log(document.getElementById('theplace').innerHTML);
FB.XFBML.parse();
console.log(document.getElementById('theplace').innerHTML);
    }
</script> 
```

HTML：

```
<div id="theplace" class="fb-comments"><fb:comments href="" numposts='3' height='150' id="fbcomment"  width="510" num_posts="3"></fb:comments></div> 
```

我做了一个例子，我在 FB.XFBML.parse() 调用之前和之后在 console.log 中放入了 html 以供评论。正如您在此示例中看到的那样：http: [//promlac.si/nagradne-igre/nagradna-igra/izberi-oblacila-v-vrednosti-200EUR/](http://promplac.si/nagradne-igre/nagradna-igra/izberi-oblacila-v-vrednosti-200EUR/)

通常会显示评论，但是当您单击任何其他条目时，我会收到有关设置 href 属性的警告。但是，如果您检查控制台， href 属性是否完全可以？当至少有一条评论时，效果不会发生......

知道有什么问题吗？

# javascript - Twitter-Bootstrap 在 navbar-fixed-top 滚动时捕获

> ID：15786864
> 
> 赞同：-1
> 
> 时间：2013-04-03T12:04:45.700
> 
> 标签：javascript, css, twitter-bootstrap

有谁知道当 twitter-bootstrap navbar-fixed-top 滚动时是否可以通过 css 或 js 捕捉？

我想我应该检查用户何时滚动页面，但如果可能的话，我想更容易地得到它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:46:20.807

```
$(window).scroll(function() {
if($(window).scrollTop() + $(window).height() == $(document).height()) {
   alert("bottom!");
}
}); 
```

Tis 实际上在这里找到：[如何使用 JQuery 检测用户是否滚动到页面底部？](https://stackoverflow.com/questions/9697748/how-do-i-use-jquery-to-detect-if-a-user-scrolls-to-the-bottom-of-the-page)

您可以更改它检测到的位置，以便您选择位置。

# iphone - Objective-c：来自 UIView 的 presentViewController

> ID：15786875
> 
> 赞同：0
> 
> 时间：2013-04-03T12:05:15.357
> 
> 标签：iphone, ios, objective-c, uiviewcontroller

我试图在 UIView 中使用 presentViewController。

[http://img145.imageshack.us/img145/6334/appt.png](http://img145.imageshack.us/img145/6334/appt.png)

当我单击顶部/右侧的“+”按钮时，我想用 UIViewController 替换右侧的表格视图（在图像的灰色部分）。

```
- (void)add:(id)sender
{
UIViewController *controller = [self.storyboard instantiateViewControllerWithIdentifier:@"testview"];
[self presentViewController:controller animated:YES completion:NULL];
} 
```

当然，通过这样做，整个屏幕都被替换了。我想要这样的东西：

```
[contentView addSubview:controller]; 
```

或者

```
[contentView presentViewController:controller animated:YES completion:NULL]; 
```

其中 contentView 是包含 tableview 的 UIView

我找到了这个[addChildViewController 和 presentViewController](https://stackoverflow.com/questions/9136391/addchildviewcontroller-and-presentviewcontroller)但我认为这不能帮助我

谢谢

**编辑：**

在情节提要中使用 ContainerView 解决了我的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:17:12.987

您可以将控制器添加`view`为`contentView`. 但是，请务必在执行此操作时保持对控制器的强烈引用。

另一种方法是使新视图由呈现控制器而不是第二个控制器拥有，并根据需要简单地隐藏/显示视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:24:41.120

编辑您的声明：

```
[self.navigationController presentViewController:controller animated:YES completion:NULL]; 
```

试试这个，然后让我知道它是否有效！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T12:22:08.323

我不确定我是否理解正确。从您的照片中，我相信您正在为 iPad 编程，并且您想用另一个视图部分覆盖整个视图。如果是这样，您可以使用 a `UIPopoverController`，它正是这样做的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T12:31:53.027

PopoverController 似乎是您所需要的。这是一些样板代码：

```
UIPopoverController* aPopover = [[UIPopoverController alloc]
                                     initWithContentViewController:navigation];

self.aPopoverController = aPopover;

[self.aPopoverController presentPopoverFromRect:nil inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES]; 
```

aPopoverController 是该类的一个属性。

```
@property UIPopoverController* aPopoverController; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T13:36:23.487

如果我理解清楚。这会帮助你

```
SomeViewController *viewController=[[SomeViewController alloc]init];

[viewController setFrame:CGRectMake(x,y,width,height)];

[self.view addsubview:viewController.view]; 
```

对不起，如果我错了...

# javascript - 未捕获的类型错误：对象# 没有方法“加载”

> ID：15786877
> 
> 赞同：0
> 
> 时间：2013-04-03T12:05:19.963
> 
> 标签：javascript

伙计们，我在使用 javascript 读取 xml 文件时遇到问题，请帮助我
这是我的代码：

```
<html>
<body>
<script type="text/javascript">
var xmlDoc=document.implementation.createDocument("","",null);
xmlDoc.load("myfile.xml");
</script>
</body>
</html> 
```

我用的是win7，我用过opera 12，最新的chorme，firefox 14，IE9，safari 5（windows verison），但它们都不起作用，google chorme给了我这个

```
Uncaught TypeError: Object #<Document> has no method 'load' 
```

我不知道这里有什么问题，提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:24:39.037

> 伙计们，我在使用 javascript 读取 xml 文件时遇到问题

大量使用 javascript 动态加载 xml 文件的谷歌结果（参见 AJAX）。但是为了帮助您朝着正确的方向开始，请考虑

```
// Caveat: IE 5 and IE 6 must do:
// var xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
var xmlhttp = new XMLHttpRequest();
xmlhttp.open("GET","myfile.xml",false);  // the third param sets async=false
xmlhttp.send();
var xmldata = xmlhttp.responseXML; 
```

编辑：以上来自我的 AJAX 笔记，请参阅[w3 教程的演练](http://www.w3schools.com/ajax/ajax_xmlhttprequest_send.asp)版主题。

# php - php Mysql中的登录页面

> ID：15786884
> 
> 赞同：-1
> 
> 时间：2013-04-03T12:05:30.823
> 
> 标签：php, mysql, login-script

我想创建一个登录页面，但它不起作用。任何人都可以看到错误。谢谢你

我有一个数据库，其中有 3 行电子邮件-密码-客户 ID。

```
<?
$email = $_POST['email'];
$password= $_POST['password'];
$login = $_POST['login'];
$user_custermers_id = $_GET['id'];

if($login = 'yes')
{
    global $wpdb;

    $get = mysql_query("SELECT * FROM das_custermer_users WHERE email = '$email' AND password = '$password'") or die(mysql_error());

    $result = mysql_result($get, 0);
    if($result != 1)
    {
        $msg = "WRONG MESSEGE";
    }
    else
    {
        session_start();
        $_SESSION['email'] = $email;
        header("location: http://tgdashboard.com");
    }
}
?> 
```

我的 HTML

```
<form action="<? echo $_SERVER['PHP_SELF']; ?>" method="post">
    <div class="header">
        Loginoplysninger
    </div>
    <div class="row">
        <label for="user">E-mail:</label>
        <input type="text" name="user" id="user" value="">
    </div>
    <div class="row">
        <label for="pass">Password:</label>
        <input type="password" name="pass" id="pass" value="">
    </div>
    <div class="row">
        <input type="submit" name="login" value="Login"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:09:33.813

问题是您已经在此处`value`为`Login`您的提交按钮提供了一个

`<input type="submit" name="login" value="Login">`你正在检查登录是否`yes`在这里

```
$login = $_POST['login'];
$user_custermers_id = $_GET['id'];

    if($login = 'yes'){ 
```

因此，您正在检查值是否是`yes`您已经将值设置为`Login`

你应该做类似的事情

```
 $login = $_POST['login'];
    $user_custermers_id = $_GET['id'];

        if($login = 'Login'){ 
```

**同样**，正如下面的用户所指出的，`if($login = 'yes'){`意味着您正在分配一个`yes`to variable的值`$login`，这意味着，如果您想检查是否必须使用`==`运算符。喜欢`if($login == 'yes'){`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:20:59.303

使用此代码可能对您有用。因为我已将其更改为 wordpress.pls 检查此。

```
<?php
    session_start();
    $email = $_POST['user']; //$_POST['email'];
    $password= $_POST['pass']; //$_POST['password'];
    $login = $_POST['login'];
    $user_custermers_id = $_GET['id'];

    if($login == 'Login' || isset($login)) 
    {
        global $wpdb;

        /*$get = mysql_query("SELECT * FROM das_custermer_users WHERE email = '$email' AND password = '$password'") or die(mysql_error());
        $result = mysql_result($get, 0);*/
        $get = $wpdb->get_row("SELECT * FROM das_custermer_users WHERE email = '$email' AND password = '$password'", ARRAY_A);
        if ($get != null) 
        {
            // do something with the link 
            $_SESSION['custermer_id'] = $get->das_custermers_id;
            $das_custermer_id = $get->das_custermers_id;
            $_SESSION['email'] = $email;
            //echo 'custermer-id'.$get->das_custermers_id.'custermer-idbysession'.$_SESSION['custermer_id'].'email'.$email.'emailby session'.$_SESSION['email'];
            header("location: http://tgdashboard.com?das_custermers_id=".$das_custermer_id);
        } 
        else 
        {
            // no link found
            $msg = "WRONG MESSEGE";
        }
    }
?> 
```

试试这个它会为你工作..

```
<?php
session_start();
$email = $_POST['user']; //$_POST['email'];
$password= $_POST['pass']; //$_POST['password'];
$login = $_POST['login'];
$user_custermers_id = $_GET['id'];

if($login == 'Login' || isset($login)) 
{
    global $wpdb;

    $get = mysql_query("SELECT * FROM das_custermer_users WHERE email = '$email' AND password = '$password'") or die(mysql_error());

    //$result = mysql_result($get, 0);
    $result = mysql_num_rows($get);  // try this..
    if($result == 0)
    {
        $msg = "WRONG MESSEGE";
    }
    else
    {
        //session_start();
        $_SESSION['email'] = $email;
        header("location: http://tgdashboard.com");
    }
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T12:23:35.767

好的，这里有几件事，正如我在评论中所指出的那样。

**首先，**您正在使用`mysql_query`，但显然使用的是 wordpress ( `global $wpdb`) （WordPress 不使用这些功能，并且它们已过时且不推荐使用，[**请阅读此内容**](http://www.stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php)并改用该[`$wpdb->get_results()`](http://codex.wordpress.org/Class_Reference/wpdb#SELECT_a_Row)功能）。

**其次，**您不会逃避您的输入，这意味着我可以输入电子邮件`' OR email = 'admin@site.com'; --`并以我想要的任何用户身份登录。在 wordpress 中，您正在寻找`$wpdb->escape()`或查看[wordpress 中的准备好的语句](http://codex.wordpress.org/wpdb_Class#Protect_Queries_Against_SQL_Injection_Attacks)。

**第三，**请不要使用短标签 ( `<?`)，因为您无法确定在部署此代码的所有 PHP 配置中都启用了它们。最好坚持`<?php`。

**第四，**正如其他人提到的那样，您正在“比较”（见第五）`$login`，`yes`但绝不是，因为您提交按钮的值是`Login`.

**第五，**你不是在比较`$login`，而是在`yes`设置。改为用于比较。`$login``yes``==`

所以最终建议的代码应该是这样的：

```
<?php
    $email = $_POST['email'];
    $password= $_POST['password'];
    $login = $_POST['login'];
    $user_custermers_id = $_GET['id'];

    if($login == 'Login') //Changed to == and 'Login'
    {
        global $wpdb;

        //Changed to actually use $wpdb instead and get_results and escaping variables
        $get = $wpdb->get_results("SELECT * FROM das_custermer_users WHERE email = '" . $wpdb->escape($email) . "' AND password = '" . $wpdb->escape($password) . "'");

        //As $wpdb works different, use this
        if (!empty($get)) {
            session_start();
            $_SESSION['email'] = $email;
            header("location: http://tgdashboard.com");
        } else {
            $msg = "WRONG MESSAGE";
        }
    }
?> 
```

# javascript - 设置未附加 iframe 的 innerHTML

> ID：15786889
> 
> 赞同：1
> 
> 时间：2013-04-03T12:05:38.377
> 
> 标签：javascript, iframe

有没有办法设置未附加到 DOM 的 iframe 的 innerHTML？

目前在执行此操作时：

```
var iframe = document.createElement('iframe');
var doc =  iframe.contentDocument || iframe.contentWindow.document;
doc.body.innerHTML = 'hi'; 
```

我收到以下错误：

> 未捕获的类型错误：无法读取 null 的属性“文档”

我明白这一点。但是有没有办法生成文档元素，或者设置 iframe 的数据而无需将其附加到 DOM？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:28:58.887

对于任何未来的读者，我在这里找到了我想要的东西：[https ://developer.mozilla.org/en-US/docs/DOM/DOMImplementation.createHTMLDocument](https://developer.mozilla.org/en-US/docs/DOM/DOMImplementation.createHTMLDocument)

`<iframe>`它允许您创建一个文档对象，对其进行更改并在准备好时将其插入。

# jquery - 浏览器有时会在 CSS3 转换期间忽略 jQuery 单击事件

> ID：15786891
> 
> 赞同：7
> 
> 时间：2013-04-03T12:05:50.357
> 
> 标签：jquery, css, css-transitions, jquery-on

当一个元素包含另一个通过 CSS 动画的元素时，`transition`有时不会触发点击事件。

测试用例：[http ://codepen.io/anon/pen/gbosy](http://codepen.io/anon/pen/gbosy)

我有一个布局，其中一系列图像具有在悬停时显示的标题。单击时，它们会触发`.slideDown`相邻元素的 a。它们本身很可能被用户快速点击。这个问题在实时站点上比在 codepen 中更明显。

在 codepen 中，大约 90% 的点击都被遵守，而当 CSS 转换被禁用时，100% 被遵守。

欢迎任何建议。

我应该注意到，这个问题在 Chrome 中最容易复制，它在 Safari 中不太常见，在 Firefox 中明显不常见。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-03T12:20:33.833

我认为关键是禁用 p 元素中的鼠标事件：

```
p {
  pointer-events: none;
} 
```

出现问题是因为单击是从 mousedown + mouseup 生成的，如果您在过渡的边缘执行此操作，则 mousedown 位于一个元素中，而 mouseup 位于另一个元素中（并且不会生成单击）。

另一种方式（不是完全一样，但很可能用户不会注意到它）是在 mousedown 而不是 click

# c++ - 在头文件中定义并在 cpp 中实现的 C++ 结构

> ID：15786902
> 
> 赞同：4
> 
> 时间：2013-04-03T12:06:35.067
> 
> 标签：c++, struct, implementation

当你在另一个类中使用它时，我如何确保我实现的 somecolor 保持他的价值？

**结构体.h**

```
struct Color{
   unsigned char r;
   unsigned char g;
   unsigned char b;
};
Color someColor;
//if i define the color here it says...:
Color someColor = {255,255,255}; //error: data member inializer not allowed 
```

**结构体.cpp**

```
struct::Color someColor = {255,255,255}; 
```

**其他类.cpp**

```
struct *str = new struct();
str->someColor.r //is not the correct value /not set 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T12:09:21.077

您需要在标题中*声明它：*

```
extern Color someColor; 
```

并在 .cpp 文件中*定义它：*

```
Color someColor = {255, 255, 255}; 
```

旁注，您的语法`struct::Color`具有高度误导性。它被解析为`struct ::Color`，并且在 C++ 术语中，它等同于`::Color`或只是`Color`（除非您在命名空间内）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T12:11:45.203

为了使它成为有效的 C++，我将把你重命名`struct`为。`mystruct`似乎您想提供一个默认构造函数`mystruct`，将其`someColor`成员初始化为`{255,255,255}`. 在 C++11 之前，您必须这样做：

```
mystruct::mystruct()
{
  someColor.r = 255;
  someColor.g = 255;
  someColor.b = 255;
} 
```

或者，如果您提供`Color`一个接受 3 个值的构造函数，您可以这样做：

```
mystruct::mystruct()
  : someColor(255, 255, 255)
{ } 
```

但是，在 C++11 中，您可以在成员初始化列表中进行聚合初始化，因此您无需提供`mystruct`构造函数：

```
mystruct::mystruct()
  : someColor{255, 255, 255}
{ } 
```

事实上，在 C++11 中，您可以像尝试做的那样在类定义中初始化非静态非常量成员：

```
Color someColor = {255, 255, 255}; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-03T12:25:38.383

你应该这样写：

**struct.h**

```
struct Color{
   unsigned char r;
   unsigned char g;
   unsigned char b;
};
extern Color someColor; 
```

**结构体.cpp**

```
#include "struct.h"    
Color someColor = {255,255,255}; 
```

**其他类.cpp**

```
#include "struct.h"
Color newColor;
newColor.r = someColor.r; 
```

# python - python 列表推导式的嵌套多少合适？

> ID：15786904
> 
> 赞同：-1
> 
> 时间：2013-04-03T12:06:38.407
> 
> 标签：python, list, nested, list-comprehension, readable

我是一个相对的 python 初学者，现在对这种语言相当熟悉，但仍在努力解决什么是“pythonic”而不是什么的问题。我想知道人们对这个问题的想法是什么。

例如，使用这行代码来计算从 peewee 数据库中提取的出租物业每周的平均成本：

```
    Rental_avg_costperweek = sum([calcCostPerWeek(rental.price,rental.rental_freq) 用于出租
                                 [LLSRental.select(LLSRental.id == this_id) for this_id in nearest_rental_ids]]) \
                             / len(closest_rental_ids)

```

它使用嵌套列表推导，这可能会造成混淆。

或者，我可以将内部理解粘贴到一个临时变量中：

```
    most_rental_records = [LLSRental.select(LLSRental.id == this_id) for this_id in nearest_rental_ids]
    Rental_avg_costperweek = sum([calcCostPerWeek(rental.price,rental.rental_freq) 用于在最近租借记录中的租借]) \
                             / len(closest_rental_ids)

```

这可能（有点）更容易阅读，但作为一名前 C++ 程序员，我不喜欢纯粹为了可读性而创建临时变量，因为它会使命名空间变得混乱，并可能为垃圾收集器带来更多工作。

另外我认为，如果读者不理解该变量纯粹是暂时的，如果有很多这样的变量，可能会使代码更加混乱。

因此，尽管有“平面比嵌套更好”的指导，我还是倾向于选择第一个选项而不是第二个选项……但是你们蟒蛇老手怎么看？

谢谢！
通用电气

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:34:58.207

我认为两者都是错误的。看起来您正在做内部理解，因为您想避免重新计算 LLSRental.select()。如果您适当地使用推导，您应该很少需要内部推导，因为您可以嵌套它们，例如

```
all_the_inputs = [ process_value(x) for y in all_the_stuff for x in y ] 
```

或者其他的东西。[这是一篇很好但很短的文章](http://rhodesmill.org/brandon/2009/nested-comprehensions/)，很好地解释了这一点。

反正。就像是

```
rental_avg_costperweek = 0
for this_id in closest_rental_ids:
    rental = LLSRental.select(LLSRental.id == this_id)
    rental_avg_costperweek += calcCostPerWeek(rental.price, rental.rental_freq)
rental_avg_costperweek /= len(closest_rental_ids) 
```

似乎是一种更合适的计算方式。实际上，我创建的对象比您的代码*少*，因为我没有无缘无故制作的两个列表，而您的代码为中间计算创建了两个列表，然后将它们丢弃。

# symfony - Symfony 2：扩展表单类：更改继承孩子的标签

> ID：15786906
> 
> 赞同：0
> 
> 时间：2013-04-03T12:06:48.223
> 
> 标签：symfony, symfony-2.1, symfony-forms

我正在扩展这样的表单类：

```
 class RepportDateType extends AbstractType
    {

        public function buildForm(FormBuilderInterface $builder, array $options)
        {
            $builder

            ->add('test_date', 'date',array('constraints' => array(
               new NotBlank()),'label'=>'Date','widget'=>'single_text','format' => 'dd-MM-yyyy','input'=>'datetime'))

            ;

        }
}
        class IncidentReportType extends RepportDateType
        {

            public function buildForm(FormBuilderInterface $builder, array $options)
            {
                parent::buildForm($builder, $options);

                $builder

                ->add('end_date', 'date',array('constraints' => array(
                   new NotBlank()),'label'=>'Date de fin','widget'=>'single_text','format' => 'dd-MM-yyyy','input'=>'datetime'))

                ;
            }

            public function getName()
            {
                return 'incident_repport_date';
            }
        } 
```

我的问题是我希望父母的表格孩子' **test_date** '标签更改为**'开始日期'** 总结：如何更改继承孩子的选项

# php - ZF1：如何处理数据库中存储的百分比和用户输入的数据？

> ID：15786910
> 
> 赞同：1
> 
> 时间：2013-04-03T12:07:05.050
> 
> 标签：php, zend-framework, filter

我正在尝试处理我的应用程序中的百分比。用户输入一个值，例如 12（表示 12%）。我必须将它作为比率存储在我的数据库中：0.12。

然后我必须将其显示为 12（对于 12%）。

我显示它的部分很简单，我使用了一个自定义的 View Helper，它将元素值乘以 100。

困难的部分是用户输入值时。我首先想到了一个过滤器，它除以每 100 个值。它可以将值存储在数据库中，但是当我检索值时，方法“getValue()”会应用过滤器，因此我得到的值是 0.0012。

再想一想，我尝试重写 setValue() 方法，也将值除以 100。但是当我填充表单时，也会调用 setValue，这也给了我 0.0012。

我想知道我该如何处理这个问题？你有什么主意吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:32:28.820

感谢 Dmonix 的评论，我解决了这个问题。我在我的模型中创建了两种方法来处理数据库插入/更新之前的划分：

```
public function preInsert($event)
{
    $this->_updatePercentageValue();
}

public function preUpdate($event)
{
    $this->_updatePercentageValue();
}

private function _updatePercentageValue()
{
    $value = $this->getValue();
    if ($value != null) {
        $this->setValue($value / 100);
    }
} 
```

我意识到在表单级别处理它不是一个好主意，因为在这种情况下 ZF1 没有提供任何挂钩来更改数据。

# ruby-on-rails - 使用 Devise 注册后尝试登录时关闭数据库连接

> ID：15786915
> 
> 赞同：0
> 
> 时间：2013-04-03T12:07:17.053
> 
> 标签：ruby-on-rails, devise

我正在使用 Devise 作为我的身份验证系统开发 Rails 3.2.12 应用程序。一切正常，除非我在新用户在应用程序中注册后尝试自动登录。

这就是我在控制器中实现这一目标的方法：

```
...
resource.save!

if resource.active_for_authentication?
  set_flash_message :notice, :signed_up if is_navigational_format?
  sign_in(resource_name, resource)
  respond_with resource, :location => redirect_location(resource_name, resource)
else
  ...
end 
```

当它尝试执行登录时，我收到以下错误：

```
ActiveRecord::StatementInvalid in RegistrationsController#create
Mysql2::Error: closed MySQL connection: DELETE FROM `sessions` WHERE `sessions`.`id` = 684 
```

似乎它正在尝试删除当前会话，这就是该错误的原因...

知道我做错了什么吗？

非常感谢你提前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:23:45.597

用户注册后，他们将自动使用库存设备登录。事实上，您不需要为默认的设计设置编写任何控制器代码。

也就是说，如果由于某种原因你真的需要一个自定义控制器，你可以尝试先强制注销：

```
sign_out(resource_name) 
```

# scala - 无法使用 Scala 反射获得继承的 val

> ID：15786917
> 
> 赞同：0
> 
> 时间：2013-04-03T12:07:26.647
> 
> 标签：scala, reflection, scala-2.10

我正在使用 Scala 2.10.1，我正在尝试定义一个方法，该方法将从对象中检索所有 val（包括继承的）。

我有以下内容：

```
import scala.reflect.runtime.{universe => ru}

object Reflection {

  val mirror = ru.runtimeMirror(this.getClass.getClassLoader)

  def findVals(x: Any): Iterable[String] = {
    val theType = mirror.classSymbol(x.getClass).toType
    theType.members.collect({case x if x.isTerm => x.asTerm}).filter(_.isVal).map(_.name.toString)
  }

} 
```

我正在测试这两个类：

```
class Base {
  val x = 10
}

class Child extends Base {
  val y = 20
} 
```

调用以下代码时：

```
val x = new Child
val vs = Reflection.findVals(x)
println(vs) 
```

结果是`List(y)`

出于某种原因，该`isVal`方法返回与类中的字段`false`对应的术语。`x``Base`

有人可以告诉我这里有什么问题吗？难道我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T14:14:32.757

Per[为什么 Scala 案例类字段不反映为公共的？](https://stackoverflow.com/questions/15730155/why-dont-scala-case-class-fields-reflect-as-public/15731398#15731398)你应该使用`isAccessor`而不是`isVal`.

我实际上正在使用`isGetter`并根据您的评论`setter`正确过滤s：`var`

```
 def findVals(x: Any): Iterable[String] = {
    val theType = mirror.classSymbol(x.getClass).toType
    val xtm = theType.members.collect({case x if x.isTerm => x.asTerm})
    xtm.filter(m => m.isGetter && !xtm.exists(m.setter == _)).map(_.name.toString)
  } 
```

结果：

```
scala> class Base {
     | var x = 10
     | val xx = 2
     | }
defined class Base

scala> class Child extends Base {
     | val y = 3
     | }
defined class Child

scala> val x = new Child
x: Child = Child@1c0026e

scala> val vs = Reflection.findVals(x)
vs: Iterable[String] = List(y, xx)

scala> println(vs)
List(y, xx) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T19:04:14.870

使用[SMirror](http://github.com/fwbrasil/smirror)：

```
scala> implicit val mirror = scala.reflect.runtime.currentMirror
mirror: reflect.runtime.universe.Mirror = JavaMirror with scala.tool…

scala> import net.fwbrasil.smirror._
import net.fwbrasil.smirror._

scala> class Base {
  val x = 10
}   
defined class Base

scala> class Child extends Base {
  val y = 20
}   
defined class Child

scala> val x = new Child
x: Child = Child@448593d0

scala> x.reflect.vals
res5: List[net.fwbrasil.smirror.SInstanceVal[Child]] = List(val x: scala.Int (bound to Child@448593d0), val y: scala.Int (bound to Child@448593d0))

scala> x.reflect.vals.head.get
res7: Any = 10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T15:55:20.053

所以，这是非常不雅的，但它似乎工作：

```
import scala.reflect.runtime.{universe => ru}

object Reflection {

  val mirror = ru.runtimeMirror(this.getClass.getClassLoader)

  val ObjectClass = classOf[java.lang.Object];

  def findVals(x: Any) : Iterable[String] = findVals( x.getClass, List.empty );

  def findVals(clz: Class[_], accum : Iterable[String]): Iterable[String] = {

    clz match {
      case  ObjectClass => accum;
      case _ => {
        val theType = mirror.classSymbol(clz).toType
        val newVals = theType.members.collect({case x if x.isTerm => x.asTerm}).filter(_.isVal).map(_.name.toString)
        findVals( clz.getSuperclass, accum ++ newVals )
      }
    }
  } 
```

}

然后...

```
scala> class Base {
     |   val x = 10
     |   var z = 20
     | }
defined class Base

scala> class Child extends Base {
     | val y = 20
     | var a = 9
     | }
defined class Child

scala> val x = new Child
x: Child = Child@3093266d

scala> val vs = Reflection.findVals(x)
vs: Iterable[String] = List("y ", "x ")

scala> println(vs)
List(y , x ) 
```

看来，至少现在，[Scala 反射查看 Java 字段](https://stackoverflow.com/questions/15730155/why-dont-scala-case-class-fields-reflect-as-public)以确定 val 的存在，所以我猜你只需要爬上类层次结构......我猜它会寻找 setter 的存在区分 val 和 var。再次，不是那么可爱，但功能齐全。

# c++ - 构建/运行 Google 测试

> ID：15786923
> 
> 赞同：0
> 
> 时间：2013-04-03T12:07:38.473
> 
> 标签：c++, cmake, googletest

我正在尝试构建和运行 Google 测试，但遇到了一些问题。非常感谢任何帮助。我使用 CMake 2.8（带 UI）在 D:/MyBuild 目录中创建 .sln 和 .vcproj 文件（如 google 测试的 README 文件中所述）。但是，当我尝试运行 MyBuild 目录中的 .sln 文件时，我得到的结果如下（图片）：![在此处输入图像描述](https://i.stack.imgur.com/aOhPW.jpg)

另外，这是我用来在 D:/MyBuild 目录中创建 .sln 文件和 .vcproj 文件的 CMake 的屏幕截图。

![在此处输入图像描述](https://i.stack.imgur.com/iNR2R.jpg)

附言。我注意到的一件事是 README 给出了如何使用非图形版本的 CMake（例如 2.6）安装 google 测试的说明，但是我使用了一个带有用户界面的 - 也许我在那里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T20:23:20.983

您似乎已经在调试模式下成功构建了 gtest 的库。但是，默认情况下 .sln 不包含任何可执行文件，因此您实际上无法*运行*任何东西。

如果您在 CMake GUI 中为`gtest_build_samples`和/或选中复选框`gtest_build_tests`并点击“生成”，则 Visual Studio 解决方案应该包含一些可执行文件。

从记忆中，这些构建不干净，但我手头没有 MSVC 2010，所以我不能确定。

# visual-studio-2010 - 如何使用 Visual Studio 2010 从 Visual SourceSafe 获取内部版本号和日期

> ID：15786925
> 
> 赞同：0
> 
> 时间：2013-04-03T12:07:49.380
> 
> 标签：visual-studio-2010, c#-4.0, msbuild, visual-sourcesafe

我已经用 C# 在 Visual Studio 2010 中开发了 Windows 应用程序。我使用visual source safe 2005 作为版本控制器。在我的应用程序中有关于我们的表格，其中包含构建版本号和构建日期。我的客户在每次构建时都问我版本号和日期会自动更新。目前我正在手动更新。在这个问题上帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:04:43.337

这与 SourceSafe 本身无关，因为它仅用于存储代码，它不构建也不对其采取行动。

您可以通过使用属性和指定通配符为您的程序集[创建一个自动递增的版本号。](https://stackoverflow.com/a/356694/736079)`[AssemblyFileVersion("1.2.*")]`

如果要包含构建日期，则需要在 .csproj 文件中使用预构建任务，该任务将在构建代码之前更新 .cs 文件中的日期。

或者，您可以使用构建后任务来创建包含构建日期（甚至版本，如果您愿意）的 xml 或文本文件，然后当您需要显示信息时，您可以从所述文件中提取它。

[RegexReplace](http://blogs.clariusconsulting.net/kzu/how-to-perform-regular-expression-based-replacements-on-files-with-msbuild/)任务可能会帮助您……或者UpdateFile任务。在构建之前使用任务修补 .cs 文件时，[请注意托管环境。](https://stackoverflow.com/a/646153/736079)[MsBuild Community Task](https://github.com/loresoft/msbuildtasks/downloads)在这里可以成为你的朋友。

# android - 获取应用程序共享意图的包名称

> ID：15786926
> 
> 赞同：4
> 
> 时间：2013-04-03T12:07:52.427
> 
> 标签：android

我想获取创建共享意图的应用程序名称或其包名称。我正在制作通过意图接收共享数据的应用程序，如何获取创建者应用程序的包名称？类似 [intent.getSourceBackageName()]

**编辑：** 我不确定我的问题是否清楚。但是我需要找出调用我的应用程序的名称，例如，如果我从浏览器共享，我需要找到一种方法来知道浏览器应用程序是与我共享数据的应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-25T01:02:34.397

> 如何获取创建者应用程序的包名？

你不能。例如，可能没有*“*创建者应用程序”，因为`ACTION_SEND` `Intent`可以从命令行 ( **`adb shell am`**) 发送。而且，由于`ACTION_SEND`不与 一起使用`startActivityForResult()`，因此 njzk2 的解决方案将不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-30T21:43:52.310

获取启动 Activity 的应用程序的包名称：

```
/**
 * 
 * @param activity
 * @return The calling application's package name or {@code null} if the activity was not
 *         started with {@link #startActivityForResult}
 */
public static String getCallingPackageName(Activity activity) {
    return activity.getCallingPackage();
} 
```

获取启动 Activity 的应用名称：

```
/**
 * Get the name of the app that started this Activity.
 * 
 * @param activity
 * @return The calling application's app name or {@code null} if the activity was not started
 *         with {@link #startActivityForResult}
 */
public static String getCallingAppName(Activity activity) {
    final String packageName = activity.getCallingPackage();
    if (packageName == null) {
        return null;
    }
    final PackageManager pm = activity.getPackageManager();
    try {
        return pm.getApplicationInfo(packageName, 0).loadLabel(pm).toString();
    } catch (NameNotFoundException ignored) {
    }
    return null;
} 
```

* * *

**笔记：**

通过使用以下意图过滤器创建活动进行测试：

```
<intent-filter>
    <action android:name="android.intent.action.GET_CONTENT" />

    <data android:mimeType="*/*" />

    <category android:name="android.intent.category.OPENABLE" />
    <category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

打开 Gmail -> 撰写新邮件并选择“附加文件” -> 选择测试应用程序。

`getCallingAppName(this)`退回*的文件*

`getCallingPackageName(this)`返回*com.android.documentsui*

* * *

就我而言，它返回的是 Documents 而不是 Gmail，因为 Gmail 默认会打开 Documents。因此，您应该考虑到可能无法真正了解原始应用程序，结果将永远是`null`，除非您`Activity`被调用`startActivityForResult`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T13:23:49.260

鉴于可以在`Intent`不包含您要查找的信息的情况下创建一个，因此无法保证能够提取它。但是，如果您检查所有以意图（探索）到达的字段，`intent.getCategories`您可能会发现一些可用于解决某些情况的模式......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-28T05:36:02.463

您可以使用 Activity 获取调用包，尝试：

```
getActivity().getCallingPackage() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T12:11:29.433

使用**PackageManager**类

```
final PackageManager packagemanager = getApplicationContext().getPackageManager();
ApplicationInfo app;
try {
    app = packagemanager.getApplicationInfo( this.getPackageName(), 0);

} catch (final NameNotFoundException e) {
    app= null;
}

 String applicationName = (String) (app!= null ? packagemanager.getApplicationLabel(app) : "(unknown)"); 
```

`<application>`它给出了在其清单标签中定义的应用程序名称。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-14T22:20:29.110

从 API 22 开始，此[方法](https://developer.android.com/reference/android/app/Activity.html#getReferrer())可用。它可能是空的，并且记录在案的也可以被欺骗，但它似乎是最好的选择 API 22+

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2013-04-03T12:11:25.620

这很简单

**getPackageManager().getPackageInfo(getPackageName(), 0).packageName *(或)* MyContext.getPackageName()**

# .htaccess - htaccess 不替换完整 url 中的下划线

> ID：15786930
> 
> 赞同：0
> 
> 时间：2013-04-03T12:08:12.757
> 
> 标签：.htaccess

我试图用我的网站中的破折号替换所有下划线。我面临一些问题。

**问题 1**

以下是我网站中的网址

```
http://localhost/uk_london when clicked redirects to http://localhost/uk-london 
```

但下面的 url 在 url 末尾添加了一个额外的破折号并返回 404 错误

```
http://localhost/united_states http://localhost/united-states- (gives 404) 
```

当我在最后删除破折号时，它可以正常工作。

**问题 2**

只有当 url 中只有一个段时，才会替换破折号。在下面的 url 中，没有一个下划线被替换为破折号。

```
http://localhost/london_uk/city/products_availability_london 
```

下面是我在 htaccess 中的代码

```
RewriteEngine On
RewriteBase /

RewriteRule ^assets - [L,NC]

RewriteRule !\.(html|php)$ - [S=4]
RewriteRule ^([^_]*)_([^_]*)_([^_]*)_([^_]*)_(.*)$ $1-$2-$3-$4-$5 [E=uscor:Yes]
RewriteRule ^([^_]*)_([^_]*)_([^_]*)_(.*)$ $1-$2-$3-$4 [E=uscor:Yes]
RewriteRule ^([^_]*)_([^_]*)_(.*)$ $1-$2-$3 [E=uscor:Yes]
RewriteRule ^([^_]*)_(.*)$ $1-$2 [E=uscor:Yes]

RewriteCond %{ENV:uscor} ^Yes$ 
```

我是 htaccess 新手，想知道是什么导致了这些问题。任何解决问题的帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:13:26.170

尝试更换：

```
RewriteRule ^([^_]*)_([^_]*)_([^_]*)_([^_]*)_(.*)$ $1-$2-$3-$4-$5 [E=uscor:Yes]
RewriteRule ^([^_]*)_([^_]*)_([^_]*)_(.*)$ $1-$2-$3-$4 [E=uscor:Yes]
RewriteRule ^([^_]*)_([^_]*)_(.*)$ $1-$2-$3 [E=uscor:Yes]
RewriteRule ^([^_]*)_(.*)$ $1-$2 [E=uscor:Yes] 
```

只需：

```
RewriteRule ^(.*)_(.*)$ /$1-$2 [L,E=uscor:Yes] 
```

重写引擎将循环并删除所有下划线，只要您的下划线不超过内部重定向限制（将导致 500 错误）。

# php - 站点日志和 PHP 保护

> ID：15786933
> 
> 赞同：1
> 
> 时间：2013-04-03T12:08:22.103
> 
> 标签：php, .htaccess, logging

我正在检查我的日志并注意到以下内容

```
[Tue Apr 02 16:12:02 2013] [error] [client 31.181.33.208] File does not exist:/xxx/join.php+++++++++++++++++++++++++++++++++++++++++++++++++++Result:+\xed\xe5+\xed\xe0\xf8\xeb\xee\xf1\xfc+\xf4\xee\xf0\xec\xfb+\xe4\xeb\xff+\xee\xf2\xef\xf0\xe0\xe2\xea\xe8;, referer: http://www.edrobe.com/join.php+++++++++++++++++++++++++++++++++++++++++++++++++++Result:+%ed%e5+%ed%e0%f8%eb%ee%f1%fc+%f4%ee%f0%ec%fb+%e4%eb%ff+%ee%f2%ef%f0%e0%e2%ea%e8%3b 
```

我从来没有见过这样的事情。我应该担心吗？我能做些什么来防止此类代码在我的网站上运行吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:30:27.213

该错误表明有人试图点击 /xxx/join.php 并向其传递一些不寻常的数据。

### **好消息**是：

该文件不存在，因此此操作并没有真正为他们带来任何有用的结果。

### **坏消息**是：

他们可能会尝试其他事情（其他人也会）。

# 需要考虑的事项

*   清理用户输入是个好主意
*   保护您允许上传的文件夹是一个好主意（无论是通过权限还是通过您的 Web 服务器配置）。
*   您还可以使用防火墙来阻止来自该 IP 和/或一系列 IP 的流量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:35:15.800

“污垢”的评论是*非常*糟糕的建议。

在输入到达您的应用程序逻辑之前验证输入是非常困难的 - 到那时您的示例目标的漏洞已经被利用。你永远不应该清理输入（出于多种原因）——要么接受它，要么拒绝它——但你必须始终清理输出。

您在日志中看到的大部分内容是尝试破坏系统的失败尝试（成功的攻击不会留下证据）。但是检测失败的攻击是防止成功攻击的一种非常有用的方法——如果你在 Unix/Linux 上运行，[fail2ban](http://www.fail2ban.org/wiki/index.php/Main_Page)可以监控你的日志中的异常情况并注入防火墙规则来阻止该客户端。

不要把时间浪费在对单一事件的下意识反应上。如果您认真对待您网站的安全性，那么最好的建议是计划如何保护您的网站，计划如何检测您是否已被入侵，并计划在服务被入侵后如何让服务重新上线妥协。

[在SANS](http://www.sans.org/score/checklists/linuxchecklist.pdf)和[OWASP](https://www.owasp.org/index.php/Main_Page)设置安全服务器有很多有用的东西。对于任何将服务器插入互联网的人来说，[这应该是必不可少的阅读材料。](http://www.dsd.gov.au/infosec/top-mitigations/top35mitigationstrategies-list.htm)特别是对于 PHP，看看[Suhosin](http://www.hardened-php.net/suhosin/)。

如果您在共享主机上并且只能访问 .htaccess，那么您就没有安全性 - 您所能做的就是纠缠您的服务提供商实施适当的安全措施并在网站被破坏时重新上传您的网站。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T12:46:36.530

您所能做的就是尽可能保护您的网站。除非您明确成为目标，否则攻击者只会转移到受保护程度较低的站点。

一些建议：

**使用正则表达式。**这限制了用户可以提交的可能输入。在新的 HTML5 中，您可以向输入标签添加模式参数。例如：

```
<input type="tel" name="phone" max="20" pattern="\d{3}[\-]\d{3}[\-]\d{4}"> 
```

HTML5 也有新的输入类型，但并不是所有的浏览器都支持这些，所以最好包含模式。[HTML5Pattern.com](http://html5pattern.com/)具有各种输入类型的通用模式。您可能已经注意到，您还可以限制输入的长度。如果您知道输入不能超过 X 个字符，请不要让用户输入超过 X 个字符。

如果您的用户输入存储在数据库中，PHP 数据库扩展具有**转义字符串**的功能。因此，任何特殊的 alt 代码字符或函数都不会被执行，而是作为文字字符串输入。

对于 PostgreSQL：`pg_escape_string()`
对于 MySQL：`mysql_real_escape_string()`

存在其他功能，例如`stripslashes()`从输入中删除斜杠，从而禁用特殊字符。

遵循上述操作，您已经防止：
-
提交错误输入 - 提交的错误输入无效
- 保护您的数据库免受 SQL 注入

您还可以将服务器配置为阻止攻击源自的 IP 地址。如果您的服务器在 Linux 上，此[参考指南 (pdf)](http://www.linuxsecurity.com/docs/QuickRefCard.pdf)包含非常有用的信息。

# php - 使用 next() 的二维数组的下一个键

> ID：15786936
> 
> 赞同：2
> 
> 时间：2013-04-03T12:08:25.287
> 
> 标签：php, multidimensional-array

我有一个二维数组：

```
$arrQuestionsAnswers = ([10] => Array ([0] => 'Male'), [4] => Array ([0] => 08-29-1975)) 
```

如果我在第一个元素 [10] 上，如何显示下一个键 [4]？

我试过使用`next()`，但这只是返回`([0] => 08-29-1975)`，但我想返回`([4] => [0] => 08-29-1975)`

```
$arrNextQuestion = next($arrQuestionsAnswers); 
```

返回：

```
Array ( [0] => 08-29-1975 ) 
```

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:11:59.660

您可以将[密钥](http://php.net/key)与下一步一起使用。

```
$array = array(10=>234, 20=>array());

reset($array);
echo key($array);// 10
next($array);
echo $key = key($array);// 20

var_dump(array($key => $array[$key])); 
```

# html - 在标题栏中添加图像

> ID：15786937
> 
> 赞同：50
> 
> 时间：2013-04-03T12:08:27.040
> 
> 标签：html, css, favicon, font-awesome, glyphicons

如何在标题栏中添加图像？

我有标题-“Webnet”

将它与 FontAwesome Glyphicon 的图标图像合并为-

```
<title><i class="icon-user icon-black"></i>Webnet</title> 
```

我尝试用图像源替换它-

```
<title><img src="assests/img/user-Hermosillo.png" ></img>Webnet</title> 
```

但标题显示 innerHTML 而不是在那里显示图像。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-04-03T12:20:28.283

这种方法行不通。`<title>`唯一支持纯文本。您将需要创建一个`.ico`文件名为 的图像`favicon.ico`并将其保存到您网站的根文件夹（您的默认页面所在的位置）。

或者，您可以将图标保存在您希望的任何位置，并随意调用它，但只需将以下代码插入`<head>`HTML 部分并引用您的图标：

```
<link rel="shortcut icon" href="your_image_path_and_name.ico" /> 
```

您可以使用 Photoshop（带有插件）或 GIMP（免费）来创建`.ico`文件，或者您可以只使用[IcoFX](http://icofx.ro/)，这是我个人最喜欢的，因为它非常易于使用并且做得很好（您可以使用旧的从[download.com](http://download.com)免费下载该软件的版本）。

**更新 1：** 您还可以使用许多在线工具来创建我已经成功使用的[ConvertIcon等网站图标。](http://www.converticon.com/)现在还有其他免费的在线工具可用，它们可以做同样的事情（通过简单的谷歌搜索访问），但也会生成其他图标，例如 Windows 8/10 开始菜单图标和 iOS 应用程序图标。

**更新 2：**您也可以使用`.png`图像作为图标[提供 IE11 是您需要支持的唯一 IE 版本](https://en.wikipedia.org/wiki/Favicon#File_format_support)。您只需要使用上面的 HTML 代码引用它们。请注意，IE10 和更早版本仍然需要`.ico`文件。

**更新 3：**您现在可以在标题字段中使用表情符号字符。在 Windows 10 上，它通常应该回退并使用 Segoe UI 表情符号字体并很好地显示，但是您需要测试并查看其他系统如何支持和显示您选择的表情符号，因为并非所有设备都可以使用相同的表情符号。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-04-03T12:13:34.380

将此添加到您的 html 的 head 部分

```
<link rel="icon" type="image/gif/png" href="mouse_select_left.png"> 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-04-03T12:13:35.487

您应该搜索如何添加`favicon.ico`. 您可以尝试`favicon.ico`像这样直接在您的html页面中添加

```
<link rel="shortcut icon" href="/favicon.png" type="image/png">
<link rel="shortcut icon" type="image/png" href="http://www.example.com/favicon.png" /> 
```

或者你可以在你的`webserver`. 建议添加您的`webserver`，因为您不需要在每个`html`页面中添加它（假设没有`includes`）。

要在您的根网站目录中添加您的位置并将其添加到`apache`httpd.conf`favicon.ico`

```
AddType image/x-icon .ico 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-04-03T12:11:43.243

您必须为您的页面使用网站图标。把它放在头标签中： `<link rel="shortcut icon" href="/favicon.png" type="image/png">`

其中 favicon.png 最好是 16x16 png 图像。

来源：[将网站图标添加到静态 HTML 页面](https://stackoverflow.com/questions/9943771/adding-a-favicon-to-a-static-html-page)

# ruby - 运行 heroku run rake db:migrate 3 时出错

> ID：15786942
> 
> 赞同：1
> 
> 时间：2013-04-03T12:08:39.087
> 
> 标签：ruby, ruby-on-rails-3, heroku

每当我运行 heroku run rake db:migrate 3 时，我都会得到

耙中止！无法加载 WDM！

```
WDM is not supported on your system. For a cross-platform alternative,
we recommend using Listen: http://github.com/guard/listen 
```

请任何人帮助我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T16:42:31.797

@user2240307 将您的 windows gems 放入 gemfile 的平台组中。

```
#WINDOWS Gems That don't play well with nix
platforms :mswin do 
  gem "wdm", :group => [:development, :test]
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:06:24.923

```
heroku restart 
```

如果不改变你的应用程序环境，让它再次正常工作，在`LINUX`操作系统上开发它。

使用 RVM 设置 Ruby、Rails，然后设置数据库配置。肯定会跑

# php - 使用ajax在wordPress中请求PHP文件

> ID：15786948
> 
> 赞同：0
> 
> 时间：2013-04-03T12:08:53.667
> 
> 标签：php, ajax, wordpress

我可以通过 ajax 来请求 wordPress 中的 PHP 文件，例如“single.php”或“page.php”，而不是函数。
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:35:06.910

```
$(function() {

    $("#className").whatever({
        source: "/path/to/your/php/file.php",
        ...

    select: function(){
        ...
    }
}); 
```

现在在那个 php file.php

```
<?php
require_once ("path or ../to/wp-load.php);
whatever_your_php_function_name_is();
?> 
```

最后在你的 php 函数中

```
function whatever_your_php_function_name_is(){
    ...
    $data = json_encode($whatYouWant);
    echo $data
} 
```

像这样的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:12:14.197

试试下面的事情..可能有助于更深入地关注为什么或为什么不的原因..

[http://www.w3schools.com/php/php_ajax_php.asp](http://www.w3schools.com/php/php_ajax_php.asp)

[通过ajax调用php文件不起作用](https://stackoverflow.com/questions/5634776/call-to-php-file-via-ajax-not-working)

下面是从 AJAX 调用 php 函数

[http://www.webdeveloper.com/forum/showthread.php?268187-Calling-a-PHP-function-using-AJAX-how](http://www.webdeveloper.com/forum/showthread.php?268187-Calling-a-PHP-function-using-AJAX-how)

[http://www.codingforums.com/showthread.php?t=123862](http://www.codingforums.com/showthread.php?t=123862)

希望能帮助到你..

# java - 从 java 中的 If 语句中删除花括号是否有区别

> ID：15786949
> 
> 赞同：53
> 
> 时间：2013-04-03T12:08:57.980
> 
> 标签：java, if-statement, curly-braces

在观看关于基本 java 的 newbostons 教程时，他教我们做这样的 if 语句。（注意花括号）

```
if("pie"== "pie"){
    System.out.println("Hurrah!");
} 
```

所以我试着去掉花括号

```
if("pie"== "pie")
    System.out.println("Hurrah!"); 
```

它仍然有效！由于我是java新手，我不知道为什么会这样。而且我想知道删除（或添加）花括号是否有任何好处/坏处。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-04-03T12:10:17.347

对于**单个语句**，它将保持不变，但如果您想在 if 块中组合多个语句，则必须使用花括号。

```
if("pie"== "pie"){
    System.out.println("Hurrah!");
    System.out.println("Hurrah!2");
}

if("pie"== "pie")
    System.out.println("Hurrah!"); //without braces only this statement will fall under if
    System.out.println("Hurrah!2"); //not this one 
```

你应该看到：[Java 中的块](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/expressions.html)

> 块是一组位于平衡大括号之间的零个或多个语句，可以在任何允许使用单个语句的地方使用。以下示例 BlockDemo 说明了块的使用：

```
class BlockDemo {
     public static void main(String[] args) {
          boolean condition = true;
          if (condition) { // begin block 1
               System.out.println("Condition is true.");
          } // end block one
          else { // begin block 2
               System.out.println("Condition is false.");
          } // end block 2
     }
} 
```

*（来自上述链接的示例）*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-03T12:10:47.597

不，绝对没有区别：一对花括号将多个语句组合成一个语句；`if`, `while`, `for`, 等等需要一个语句；如果您只需要保护一个语句，则不需要大括号。

然而，许多软件商店坚持使用大括号，即使是单个语句。原因是这样的错误：

```
if (x > 20)
    x -= 7;
    y -= 8; 
```

上面的陈述具有误导性：缩进让你相信两个分配都受到保护，而实际上只有第一个是受保护的。原因是 Java 中的空格无关紧要：缩进语句不会改变它在整个程序流程中的位置。像上面这样的错误很难找到，所以首先采用规则来防止它们是一个好主意。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-03T12:13:10.767

正如@rajesh 所说，当正文是单个语句时，大括号是可选的。

话虽如此，一些编码风格建议即使在单语句情况下也保留大括号，因为您（或跟随您的程序员）在以后更改代码时出错的可能性较小。

```
if("pie"== "pie")
    System.out.println("Hurrah!");
    System.out.println("Tricked you"); 
```

第二个印刷品 ,`Tricked you`实际上并不在 中`if`，只是因为缩进而看起来像它。

然而，这只是一个风格点，并没有被普遍接受，当然一个称职的程序员需要能够阅读这两种形式。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-12-03T08:21:32.863

**它确实有一个缺点**。到目前为止提到的答案是正确的。但是从事物的安全角度来看，它也有一些缺点。在支付团队工作后，安全性是推动此类决策的一个更强大的因素。假设您有以下代码：

```
if( "Prod".equals(stage) )
  callBankFunction ( creditCardInput )
else
  callMockBankFunction ( creditCardInput ) 
```

现在假设由于某些内部问题，您的代码无法正常工作。你想检查输入。因此，您进行以下更改：

```
if( "Prod".equals(stage) )
  callBankFunction ( creditCardInput )
else
  callMockBankFunction ( creditCardInput )
  Logger.log( creditCardInput ) 
```

假设您解决了问题并部署了此代码（也许审阅者并且您认为这不会导致问题，因为它不在“Prod”条件之内）。神奇的是，您的生产日志现在打印客户信用卡信息，所有可以看到日志的人员都可以看到这些信息。上帝禁止他们中的任何人（出于恶意）获取这些数据。

因此，不给予支持和一点粗心的编码通常会导致安全信息的泄露。它也被[CERT - Software Engineering Institure, CMU](https://www.securecoding.cert.org/confluence/display/java/EXP52-J.+Use+braces+for+the+body+of+an+if,+for,+or+while+statement)归类为 JAVA 中的漏洞。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-03T12:10:39.003

花括号通常用于有一个语句块。`if()`没有大括号，语句中只会执行第一行。不是以开头`{`和结尾的整个块`}`

```
if("pie" == "pie") {
   System.out.println("Executes if pie==pie");
   System.out.println("So does this");
} 
```

和

```
if("pie" == "pie")
   System.out.println("Executes if pie==pie");
System.out.println("Executes, regardless of if pie is equal to pie"); 
```

* * *

但是请注意，如果要比较两个`String`对象，请`.equals()`使用`String`. 此示例仍然有效，因为它正在将一个常量字符串与其自身进行比较，这始终是正确的。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-04-03T12:14:01.477

这是一个风格问题，适用于多种语言，包括 Java、C++、C 和 C#。

当一个代码块只包含一行时，大括号可以省略。这适用于任何控制结构：if、while、for、do-while。

例如，下面的两个循环是等价的。

```
for(int i=0; i<100; i++)
  doSomething(i);

for(int i=0; i<100; i++) {
  doSomething(i);
} 
```

**省略 {} 的优点：** 您的代码可以更简洁 - 意味着更少的行。有些人可能会觉得它更具可读性。

**省略 {} 的缺点：** 如果您稍后修改代码并需要在代码块中添加另一行，则最好记住添加那些 {}。如果没有，您编写以下代码：

```
for(int i=0; i<100; i++)
  doSomething(i);
  doSomethingElse(i); 
```

这实际上相当于：

```
for(int i=0; i<100; i++) {
  doSomething(i);
}
doSomethingElse(i); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-04-03T12:10:13.637

如果后面只有一个语句，`if`则大括号不是强制性的。

现在，如果您有一段代码需要符合`if`条件，那么您需要使用大括号。

这也适用`loops`于

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-04-03T12:10:41.087

如果句子数量等于 1，则相同。如果有多个，则需要 { } 语法

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-04-03T12:13:36.540

没有，但真正的危险发生在以后编辑代码时。编辑以下内容相对容易：

```
if (someCondition) 
    // do something 
```

到

```
if (someCondition) 
    // do something
    // do something else important 
```

并认为“做其他重要的事情”只会在 someCondition 为真时运行。缩进误导:-)

有了括号，这种危险就不存在了。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-02-07T20:37:04.280

我的两分钱。在没有花括号的 if 语句之后写两行是我从未见过的错误。也就是说，与您一起工作的人是骨头，他们不会理解您在这里拉的魔术。为你的私人代码保存这样有趣的东西，但在专业和课堂环境中做你被告知的事情。

对此有一个实际的论点，说明了一个可能出现的合理问题。您可能知道，在解析代码时，所有缩进和额外的空格都会从您的代码中删除。当您尝试`else`在多个单行语句之后使用单行语句时，可能会出现问题`if`。例如：

```
if("cherry".equals("cherry"))
    if("pie".equals("pie"))
        System.out.println("Hurrah!");
else
    System.out.println("Rats!"); 
```

变得无法区分

```
if("cherry".equals("cherry"))
    if("pie".equals("pie"))
        System.out.println("Hurrah!");
    else
        System.out.println("Rats!"); 
```

即使在这种情况下，自动标签设置也应该指示指向哪个`if`语句`else`，但是如果您像我经常做的那样选择规避规则，那么您当然应该警惕这一点。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-04-03T12:11:25.917

> 而且我想知道删除（或添加）花括号是否有任何好处/坏处？

总是添加它们的好处是您可以稍后简单地扩展代码块，而无需添加它们。假设你有：

```
if("pie".equals("pie"))
    System.out.println("Hurrah!"); 
```

然后，如果要添加额外的代码行，则需要确保添加大括号：

```
if("pie".equals("pie")) {
    log.debug("I am here!");
    System.out.println("Hurrah!");
} 
```

如果它们已经存在，只需将光标放在行尾，按回车键并开始添加新代码。

对于单行，在技术上没有区别，但许多代码约定建议甚至强制要求它们始终存在。甚至还有一个[CheckStyle 规则](http://checkstyle.sourceforge.net/config_blocks.html#NeedBraces)。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-04-03T12:11:32.743

对于单个语句不是问题

```
if("pie"== "pie")
System.out.println("Hurrah!"); 
```

如果您需要大括号，则用于两个或多个语句之后

```
if("pie"== "pie"){
System.out.println("Hurrah!");
System.out.println("Hi!");
} 
```

也使用 .equals() 进行比较，而不是 ==。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-04-03T12:13:19.563

不，它们与响应`if`. 如果要添加第二条语句以响应`if`，则需要大括号。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-04-03T12:18:23.553

如果 if 条件之后只有一条语句，它将正常工作。

```
if("pie"== "pie")
    System.out.println("Hurrah!");
    System.out.println("second statement");// this will not print 
```

但是这里两个语句都会打印

```
if("pie"== "pie")
{
System.out.println("Hurrah!");
System.out.println("second statement");
} 
```

即使您想打印单个语句，我也建议您使用如下所示。

```
if("pie".equals("pie"))
   {
       System.out.println("Hurrah!");
       System.out.println("second statement");
   } 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-11-27T17:52:34.227

仅当您想在条件下执行一堆代码时才使用花括号。如果你不使用大括号，那么它只会在 if 条件之后执行第一条语句。其余行（在第一条语句下方）将不被视为 if 部分。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-12-11T16:43:29.690

如果在此 if 语句中添加花括号：

```
if(++colorIndex == someColors.length)
            colorIndex = 0;
        setForeground(currentColor());
        repaint(); 
```

然后它不会再工作了。

所以我认为在某些情况下它确实很重要。

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2020-04-12T14:10:02.357

如果 if-then 中只有一条语句，则可以省略 {} 花括号。但是，我倾向于始终将它们作为最佳编码实践包括在内，因为忘记将它们与 if-then 中的多个语句一起使用会触发错误。

# iphone - 使用贝塞尔路径自定义裁剪图像

> ID：15786952
> 
> 赞同：4
> 
> 时间：2013-04-03T12:09:00.603
> 
> 标签：iphone, ios, image, crop

嗨，我正在尝试制作一个自定义裁剪工具，使用户能够使用贝塞尔路径创建自定义封闭区域。

![在此处输入图像描述](https://i.stack.imgur.com/lWoLX.png)

我用来用路径剪辑 imageView 的代码是

```
CAShapeLayer *maskLayer = [[CAShapeLayer alloc] init];
maskLayer.frame = self.bounds;
maskLayer.path = clippingPath.CGPath;
[imgView.layer setMask:maskLayer]; 
```

但结果是

![在此处输入图像描述](https://i.stack.imgur.com/J4FUg.png)

谁能指出我正确的方向，我需要做什么？

```
-(void)longPressAddPoint:(UITapGestureRecognizer*)gesture
{   ctr++;
    CGPoint  touchpoint=[gesture locationInView:self];
    [ptsNew addObject:[NSValue valueWithCGPoint:[gesture locationInView:self] ]];
    if(ctr>1)
    {
      if(CGRectContainsPoint([self viewWithTag:1].frame, [gesture locationInView:self]))
      {
          pathClosed=YES;
          touchpoint=[self viewWithTag:1].center;

      }

    UIView *greenCircle=[[UIView alloc]initWithFrame:CGRectMake(0, 0, 20, 20)];
    greenCircle.center=touchpoint;
    greenCircle.backgroundColor=[UIColor greenColor];
        [greenCircle setTag:ctr];
    [greenCircle.layer setCornerRadius:10];
    [self addSubview:greenCircle];
        [pathMain appendPath:[pathCurrent bezierPathByReversingPath]];
        pathMain.usesEvenOddFillRule=YES;
        [pathCurrent moveToPoint:[[ptsNew objectAtIndex:ptsNew.count-2] CGPointValue]];
        [pathCurrent addCurveToPoint:[[ptsNew objectAtIndex:ptsNew.count-1] CGPointValue] controlPoint1:firstControllPoint.center controlPoint2:[[ptsNew objectAtIndex:ptsNew.count-1] CGPointValue]]; // this is how a Bezier curve is appended to a path
        [self setNeedsDisplay];

    }
    else {

        UIView *greenCircle=[[UIView alloc]initWithFrame:CGRectMake(0, 0, 20, 20)];
        greenCircle.center=touchpoint;
        greenCircle.backgroundColor=[UIColor greenColor];
        [greenCircle setTag:ctr];
        [greenCircle.layer setCornerRadius:10];
        [self addSubview:greenCircle];
    }
}
- (void)drawRect:(CGRect)rect
{   
    [pathCurrent stroke];
    [pathMain stroke];

}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{

    UITouch *touch = [touches anyObject];
    if(CGRectContainsPoint(firstControllPoint.frame,[touch locationInView:self] )&&(ptsNew.count>=2))
    {
       flagForTouch=YES;
    }
    else {
        flagForTouch=NO;
    }

}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{

    UITouch *touch = [touches anyObject];
    CGPoint p = [touch locationInView:self];
       if (flagForTouch) // 4th point
    {
        [pathCurrent removeAllPoints];
        [self setNeedsDisplay];
        [pathCurrent moveToPoint:[[ptsNew objectAtIndex:ptsNew.count-2] CGPointValue]];
        [pathCurrent addCurveToPoint:[[ptsNew objectAtIndex:ptsNew.count-1] CGPointValue] controlPoint1:firstControllPoint.center controlPoint2:[[ptsNew objectAtIndex:ptsNew.count-1] CGPointValue]]; // this is how a Bezier curve is appended to a path
        [self setNeedsDisplay];

    }
    if(flagForTouch)
    firstControllPoint.center=[[touches anyObject] locationInView:self];
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{

}

- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event
{
    [self touchesEnded:touches withEvent:event];
}

#pragma mark:- clipping image based on path
- (void) setClippingPath:(UIBezierPath *)clippingPath imageViewObj: (UIImageView *)imgView;
{
//    if (![[imgView layer] mask])
//        [[imgView layer] setMask:[CAShapeLayer layer]];
//    
//    [(CAShapeLayer*) [[imgView layer] mask] setPath:[clippingPath CGPath]];

    CAShapeLayer *maskLayer = [[CAShapeLayer alloc] init];
    maskLayer.frame = self.bounds;
    clippingPath.usesEvenOddFillRule=YES;
    maskLayer.path = clippingPath.CGPath;
    [imgView.layer setMask:maskLayer];
    UIGraphicsBeginImageContext(self.frame.size);
}

-(void)getCroppedImage:(sendImageBlock)Image
{
    sendImageToBase=Image;
}
-(void)cropIt
{
    if (pathClosed) {
        NSLog(@"path closed crop now");
        [pathMain appendPath:[pathCurrent bezierPathByReversingPath]];
        pathMain.usesEvenOddFillRule=YES;
        [self setClippingPath:[pathMain bezierPathByReversingPath] imageViewObj:self.imageToBeCropped];
        sendImageToBase(self.imageToBeCropped);
    }

} 
```

我有一个路径主路径（作为剪切路径传递）我创建用户可以添加曲线的当前路径。当用户添加新路径时，当前路径将附加到主路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-05-26T03:46:19.163

这是一个很好的库来满足您的要求，如下所示：

对于 Swift 试试这个：*ZImageCropper*

ZImageCropper 使用以下内容作为核心部分：

UIBezierPath、UITouch 事件、CAShapeLayer、CoreGraphics

请检查并回复我。

# oracle - 带有动态 SQL 语句的游标循环

> ID：15786953
> 
> 赞同：4
> 
> 时间：2013-04-03T12:09:08.700
> 
> 标签：oracle, dynamic, plsql, database-cursor

有没有办法使用动态 SQL 语句执行 Cursor For Loop？

如果我不想声明一条记录，我可以这样做（仅当我声明了游标时..）：

```
For I in cuSelect Loop
  dbms_output.put_line(I.NAME);
End Loop; 
```

我可以为动态 SQL 语句打开一个游标：

```
Open cuSelect For 'Select * From TAB_X';
Fetch ceSelect Into recSelect;
Close cuSelect; 
```

但要做到这一点，我必须先声明记录。

现在我的问题是我必须为一个非常大且复杂的动态 SQL 语句打开光标。记录的结构未知。有没有办法打开一个变量游标并用“未声明”的记录遍历它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T14:05:53.533

我认为你可以用 DBMS_SQL 包做你想做的事。

您还可以检查这些：

*   [使用动态 SQL](http://docs.oracle.com/cd/B28359_01/appdev.111/b28370/dynamic.htm)
*   [COLUMN_VALUE 过程](http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_sql.htm#i1025449)

例如：

```
declare
  TYPE curtype IS REF CURSOR;
  src_cur      curtype;
  curid        NUMBER;
  namevar  VARCHAR2(50);
  numvar   NUMBER;
  datevar  DATE;
  desctab  DBMS_SQL.DESC_TAB;
  colcnt   NUMBER;
  dsql varchar2(1000) := 'select card_no from card_table where rownum = 1';
begin
  OPEN src_cur FOR dsql;

  -- Switch from native dynamic SQL to DBMS_SQL package.
  curid := DBMS_SQL.TO_CURSOR_NUMBER(src_cur);
  DBMS_SQL.DESCRIBE_COLUMNS(curid, colcnt, desctab);

  -- Define columns.
  FOR i IN 1 .. colcnt LOOP
    IF desctab(i).col_type = 2 THEN
      DBMS_SQL.DEFINE_COLUMN(curid, i, numvar);
    ELSIF desctab(i).col_type = 12 THEN
      DBMS_SQL.DEFINE_COLUMN(curid, i, datevar);
    ELSE
      DBMS_SQL.DEFINE_COLUMN(curid, i, namevar, 50);
    END IF;
  END LOOP;

  -- Fetch rows with DBMS_SQL package.
  WHILE DBMS_SQL.FETCH_ROWS(curid) > 0 LOOP
    FOR i IN 1 .. colcnt LOOP
      IF (desctab(i).col_type = 1) THEN
        DBMS_SQL.COLUMN_VALUE(curid, i, namevar);
        dbms_output.put_line(namevar);
      ELSIF (desctab(i).col_type = 2) THEN
        DBMS_SQL.COLUMN_VALUE(curid, i, numvar);
        dbms_output.put_line(numvar);
      ELSIF (desctab(i).col_type = 12) THEN
        DBMS_SQL.COLUMN_VALUE(curid, i, datevar);
        dbms_output.put_line(datevar);
      END IF;
    END LOOP;
  END LOOP;

  DBMS_SQL.CLOSE_CURSOR(curid);

end; 
```

# vb.net - 以横向格式打印和预览 DataGridView

> ID：15786955
> 
> 赞同：6
> 
> 时间：2013-04-03T12:09:13.340
> 
> 标签：vb.net, winforms, printing, datagridview, print-preview

```
 Private Sub btnPreview_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnPreview.Click
    preview.PrintPreviewControl.Zoom = 1
    preview.Document = print
    print.PrinterSettings.DefaultPageSettings.Landscape = True
    preview.Show()

    AddHandler print.PrintPage, AddressOf print_PrintPage

End Sub

Protected Sub print_PrintPage(ByVal sender As Object, ByVal e As PrintPageEventArgs)
    Dim ColumnCount As Integer = DataGridView1.ColumnCount
    Dim RowCount As Integer = DataGridView1.RowCount

    Dim CellTopPos As Integer = print.PrinterSettings.DefaultPageSettings.Margins.Top

    For Row = 0 To RowCount - 1

        Dim CellLeftPos As Integer = print.PrinterSettings.DefaultPageSettings.Margins.Left

        For Cell = 0 To ColumnCount - 1

            Dim CellValue As String = DataGridView1.Rows(Row).Cells(Cell).Value.ToString()
            Dim CellWidth = DataGridView1.Rows(Row).Cells(Cell).Size.Width + 50
            Dim CellHeight = DataGridView1.Rows(Row).Cells(Cell).Size.Height

            Dim Brush As New SolidBrush(Color.Black)
            e.Graphics.DrawString(CellValue, New Font("Century Gothic", 10), Brush, CellLeftPos, CellTopPos)
            e.Graphics.DrawRectangle(Pens.Black, CellLeftPos, CellTopPos, CellWidth, CellHeight)

            CellLeftPos += CellWidth
        Next

        CellTopPos += DataGridView1.Rows(Row).Cells(0).Size.Height
    Next

End Sub 
```

这是我用于预览和打印我的 datagridview 内容的代码。我尝试使用 DefaultPageSettings 代码，但它不起作用。我也尝试以居中格式打印

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T13:34:39.140

尝试设置 PrintDocument 的 DefaultPageSettings 属性，而不是 PrinterSettings：

```
'PrintDocument1.PrinterSettings.DefaultPageSettings.Landscape = True
PrintDocument1.DefaultPageSettings.Landscape = True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-13T08:27:45.573

可以像这样使用CODE

```
 Dim preview As PrintPreviewDialog
    Dim PageSetup As PageSetupDialog
    PageSetup = New PageSetupDialog
    preview = New PrintPreviewDialog
    PageSetup.PageSettings = PrintDocument1.DefaultPageSettings
    PageSetup.ShowDialog()
    preview.PrintPreviewControl.Zoom = 1
    preview.Document = PrintDocument1

    preview.ShowDialog() 
```

# c# - 更改字典中的所有键

> ID：15786958
> 
> 赞同：0
> 
> 时间：2013-04-03T12:09:20.667
> 
> 标签：c#, dictionary

我需要知道是否有任何方法可以在不创建循环的情况下更改字典的所有键

例如，如果我有一本字典：

```
Dictionary <DateTime, bool> dates 
```

我在每个键中减少一天。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T12:13:13.650

您可以使用 LINQ 扩展：

```
Dictionary<DateTime, bool> dates = new Dictionary<DateTime, bool>()
{
    {
        DateTime.Now, true
    }
};

var modifiedDic = dates.ToDictionary(z => z.Key.AddDays(-1), z => z.Value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:14:51.383

您可以使用 LINQ 进行修改，然后再转换回 Ditionary

```
var newDates = dates.ToDictionary(dic => dic.Key.AddDays(-1), dic => dic.value); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T12:15:08.283

你可以使用 linq：

```
dates = dates.ToDictionary(i => i.Key.AddDays(-1), i => i.Value); 
```

祝你的任务好运。

# file-upload - 使用 p:fileupload primefaces 上传文件时出现 java.io.FileNotFoundException

> ID：15786959
> 
> 赞同：1
> 
> 时间：2013-04-03T12:09:20.623
> 
> 标签：file-upload, jsf-2, primefaces

当我使用 p:fileupload 组件上传文件时，有时会出现此错误：

```
 3 avr. 2013 12:02:10 com.sun.faces.renderkit.ClientSideStateHelper doGetState
GRAVE: C:\Users\user\AppData\Local\Temp\upload_62661b9d_13dcf1c54c0__8000_00000270.tmp (Le fichier spécifié est introuvable)
java.io.FileNotFoundException: C:\Users\user\AppData\Local\Temp\upload_62661b9d_13dcf1c54c0__8000_00000270.tmp (Le fichier spécifié est introuvable)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(FileInputStream.java:120)
    at org.apache.commons.fileupload.disk.DiskFileItem.readObject(DiskFileItem.java:719)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597) 
```

如果我只上传一个文件，它可以正常工作，但是当我尝试上传更多文件时，我遇到了这个问题

这是我的代码：

```
 <h:form  prependId="false" enctype="multipart/form-data">

                <p:fileUpload   mode="advanced" widgetVar="monupload"   auto="true"
                    style="display:none;" id="ajouterUpload" styleClass="monfileupload"
                     fileUploadListener="#{articlesMB.handleFileUpload}"  />
                <p:commandLink id="mylink" onclick="uploaderAjouter();">
                    <h:graphicImage id="Ajouterimage"
                        value="http://localhost:8080/images/without.png" height="48"
                        width="48"  />
                </p:commandLink>

            </h:form> 
```

我还测试了将其设置为 web.xml 但同样的错误但使用新路径:(

```
 <init-param>
    <param-name>uploadDirectory</param-name>
    <param-value>/Users/primefaces/temp</param-value>
  </init-param> 
```

你有什么主意吗

我认为问题出在操作系统上，不是吗？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:35:04.390

您需要 multiple="true" 来[上传多个文件](http://www.primefaces.org/showcase/ui/fileUploadMultiple.jsf)。

```
<p:fileUpload multiple="true" ...> 
```

# python - 使用 CherryPy 的 REST Web 服务的友好 URL

> ID：15786961
> 
> 赞同：16
> 
> 时间：2013-04-03T12:09:31.280
> 
> 标签：python, web-services, rest, cherrypy

我正在使用 CherryPy 3 制作一个 RESTful WebService，但我遇到了一个问题：我希望能够回答如下请求： **/customers/1/products/386**这意味着我想要 ID 为 1 的客户端的 ID 为 386 的所有产品。

所以我尝试使用 CherryPy 的 MethodDispatcher 来实现，如下所示：

```
class UserController(object):
    exposed = True

    def __init__(self):
        self.product = ProductController()

    @log_io
    def GET(self, *args):
        return "GET Users :" + str(args)

class ProductController(object):
    exposed = True
    @log_io
    def GET(self, *args):
        return "GET Product :" + str(args) 
```

但是当我请求 /customers/1/products/386 时，它没有将我重定向到具有正确参数的 ProductController.GET，而是将我重定向到带有参数 1、“产品”、386 的 UserController.GET。

要重定向到 ProductController.GET 我必须查询 /customers/products/386 这是不正确的，因为我错过了用户 ID 参数。

我在此演示文稿中看到：[带有 CherryPy 的 RESTful Web Applications，](https://docs.google.com/presentation/d/1pVtqh99VfmOycus9OoY19jemSYPsXbdia-v2szT7Vs0/)我想使用的路径样式似乎是一个不错的选择。但是有没有一种简单的方法可以用 Cherry Py 来实现它？

我听说过 CherryPy 3 的 _cp_dispatch 方法，但我不知道它是什么以及如何使用它。它会取代 MethodDispatcher 吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-03T13:57:19.770

CherryPy 使用基于树的映射器，它不能很好地适应没有物理现实的段作为 Python 对象，这里是 /1/ 段。

话虽如此，CherryPy 确实提供了实现目标的功能。

*   切换到更明确的映射器，例如[selector](https://pypi.python.org/pypi/selector4cherrypy/0.2.3)或[routes](https://pypi.python.org/pypi/Routes/1.13)。
*   使用 _cp_dispatch
*   使用cherrypy.popargs

让我们关注最后两个。

_cp_dispatch 是您在任何控制器中声明的一种特殊方法，用于在 CherryPy 处理剩余段之前对其进行处理。这使您能够删除、添加或以其他方式处理您希望的任何部分，甚至完全更改剩余部分。

```
import cherrypy

class Band(object):
    def __init__(self):
        self.albums = Album()

    def _cp_dispatch(self, vpath):
        if len(vpath) == 1:
            cherrypy.request.params['name'] = vpath.pop()
            return self

        if len(vpath) == 3:
            cherrypy.request.params['artist'] = vpath.pop(0)  # /band name/
            vpath.pop(0) # /albums/
            cherrypy.request.params['title'] = vpath.pop(0) # /album title/
            return self.albums

        return vpath

    @cherrypy.expose
    def index(self, name):
        return 'About %s...' % name

class Album(object):
    @cherrypy.expose
    def index(self, artist, title):
        return 'About %s by %s...' % (title, artist)

if __name__ == '__main__':
    cherrypy.quickstart(Band()) 
```

cherrypy.popargs 更直接，因为它为 CherryPy 无法以其他方式解释的任何段命名。这使得段与页面处理程序签名的匹配更容易，并帮助 CherryPy 理解 URL 的结构。

```
import cherrypy

@cherrypy.popargs('name')
class Band(object):
    def __init__(self):
        self.albums = Album()

    @cherrypy.expose
    def index(self, name):
        return 'About %s...' % name

@cherrypy.popargs('title')
class Album(object):
    @cherrypy.expose
    def index(self, name, title):
        return 'About %s by %s...' % (title, name)

if __name__ == '__main__':
    cherrypy.quickstart(Band()) 
```

在这两种情况下，请访问[http://whatevertomakesohappy.com:8080/nirvana/](http://whatevertomakesohappy.com:8080/nirvana/)，然后[访问 http://whatevertomakesohappy.com:8080/nirvana/albums/nevermind/](http://whatevertomakesohappy.com:8080/nirvana/albums/nevermind/)

两者都很强大，但你想使用哪一个取决于你。对于简单的 URL，popargs 在我的书中可能要容易得多。显然两者可以同时使用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-04T09:10:49.953

感谢您的回答西尔万。你让我找到了我正在寻找的答案。我像这样使用 RouteDispatcher ：

```
 self.connect("cust_products", "/customers/{cust_id}/products/",
                 controller=CustomerController(),
                 action='index',
                 conditions=dict(method=['GET']))

    self.connect("cust_products", "/customers/{cust_id}/products/{id}",
                 controller=CustomerController(),
                 action='show',
                 conditions=dict(method=['GET']))

    self.connect("cust_products", "/customers/{cust_id}/products/",
                 controller=CustomerController(),
                 action='create',
                 conditions=dict(method=['POST']))

    self.connect("cust_products", "/customers/{cust_id}/products/{id}",
                 controller=CustomerController(),
                 action='update',
                 conditions=dict(method=['PUT']))

    self.connect("cust_products", "/customers/{cust_id}/products/{id}",
                 controller=CustomerController(),
                 action='delete',
                 conditions=dict(method=['DELETE'])) 
```

# ios - UIButton 选择器的状态和进度

> ID：15786962
> 
> 赞同：0
> 
> 时间：2013-04-03T12:09:32.717
> 
> 标签：ios, objective-c, uibutton, ibaction, uiprogressview

我在显示较长的主线程操作的进度时遇到了一些麻烦（需要在主线程中）。

通过按下按钮调用该操作。

```
-(void)getCSVExport:(id)sender{
    ...
    NSString *filePath = [path stringByAppendingPathComponent:fileName];
    NSData *csvData = [NSData dataWithContentsOfFile:filePath];
    if (nil == csvData) {
       _progressView.hidden = NO;
       [self.view bringSubviewToFront:_progressView];
       _progressView.progress = 0;
       csvData = [self generateCSVExportForMonth:_monthToExportInt];
       [csvData writeToFile:filePath atomically:YES];
       _progressView.hidden = YES;
    }
    ...
} 
```

在功能内，`generateCSVExportForMonth:`我正在更新进度`_progressView.progress = newValue`。

我现在有两个问题：

1）当按下呼叫按钮时，`getCSVExport:`该按钮保持突出显示，直到呼叫完成。2）progressView 永远不会出现，更不用说更新自己了。

信息：通话需要 0.5 到 2 秒，具体取决于设备。

有什么想法我哪里出错了吗？

// 编辑：带有 backgroundThread 的新版本：

```
[self.view bringSubviewToFront:_progressView];
_progressView.progress = 0;
[self performSelector:@selector(assignCSVData:) onThread:[NSThread new] withObject:csvData waitUntilDone:YES];
_progressView.hidden = YES; 
```

和时间昂贵的电话：

```
-(void)assignCSVData:(NSData*)data{
    data = [self generateCSVExportForMonth:_monthToExportInt];
 } 
```

这会导致`performSelector`调用时出现死锁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:13:25.713

问题是你的主线程被阻塞了。这正是将后台线程用于需要更长时间的事情的原因，因为您不希望 GUI 冻结。

我不明白为什么像解析 CSV 文件这样的东西绝对*必须*在主线程上。您必须在后台执行此操作（或忍受冻结 GUI 的糟糕用户体验）。

你有几个选择如何实际实现这样的东西。

*   使用`NSObject`'s`performSelectorInBackground:withObject:`

    将解析代码放在一个单独的方法中，并使用以下方法在后台线程上启动它：

    ```
    [self performSelectorInBackground:@selector(parseMethod) withObject:csvData]; 
    ```

    在该方法结束时，您调用主线程上的某个方法来通知它解析已完成。

    ```
    [self performSelectorOnMainThread:@selector(parsingDone:) withObject:result waitUntilDone:NO]; 
    ```

*   使用[Grand Central Dispatch (GCD)](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)使用块语法在后台运行一些代码。如果您习惯于 Objective-C 和 Cocoa API，也很简单，但语法和语义会稍微复杂一些。

*   使用`NSOperation`和`NSOperationQueue`。对于您的目的，可能会有一点开销。尽管您也可以通过调用`addOperationWithBlock`而不使用子类轻松地将新操作添加到队列中`NSOperation`。

# java - oracle jdbc 语句跟踪器

> ID：15786965
> 
> 赞同：1
> 
> 时间：2013-04-03T12:09:40.293
> 
> 标签：java, oracle, gwt, jdbc, monitoring

我正在寻找一种软件来跟踪我的 oracle 数据库上的所有语句。我有一个 Delphi 应用程序（没有源代码），并且调用了许多存储过程。为了跟踪所有执行的查询，我使用了这个工具： [Statement Tracer for Oracle](http://www.aboves.com/products/statement_tracer_for_oracle/ss1.html)

它工作得很好。现在，我有一个 Web 应用程序（Java + GWT 使用 JDBC 连接到数据库），我需要做同样的事情。我不只想要从我的应用程序到数据库的调用，而是在存储过程中执行的每条语句。有人知道能够做到这一点的工具吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-06T13:40:01.093

有一个 jdbc 跟踪器项目[https://github.com/tokuhirom/jdbc-tracer](https://github.com/tokuhirom/jdbc-tracer) ，您可以在其中通过 maven 导入项目并实现一些侦听器，从 JDBC 语句接收 SQL 语句和其他信息。我敢肯定，如果您通过其 maven 库创建一个可视化项目，您可以创建一个显示所有通过 JDBC 驱动程序完成的 SQL 查询的可视化界面。

# ajax - XDomainRequest 中止 IE 9 上的 POST

> ID：15786966
> 
> 赞同：5
> 
> 时间：2013-04-03T12:09:42.060
> 
> 标签：ajax, internet-explorer-9, cross-domain, xdomainrequest

我正在做一个跨域 Ajax 调用。

我的代码：

```
if (window.XDomainRequest) // Check whether the browser supports XDR.
{
    xdr = new XDomainRequest(); // Create a new XDR object.
    if (xdr) {
        xdr.timeout = 3000;//Set the timeout time to  3 second.
        xdr.onload = function () {
            alert("Success");
        };
        xdr.onerror = function () {
            alert("Error");
        };
        xdr.ontimeout = function () {
            alert("Error");
        };
        xdr.open("post", urlSearch);
        xdr.send();
    }
}
else {
    $.ajax({
        url: urlSearch,
        type: 'POST',
        dataType: 'json',
        timeout: 3000,
        success: function (data) {
            alert("Success");
        },
        error: function () {
            alert("Error");
        }
    });
} 
```

上面的代码在所有浏览器中都可以正常工作，但在 IE 中有时会显示类似 (aborted) 的错误。

为了克服这个错误，我在谷歌搜索并没有找到任何好的解决方案。

您可以看到显示（中止）的错误消息。 [http://postimg.org/image/k01u6t9v5/](http://postimg.org/image/k01u6t9v5/)

当我对特定 URL 进行单独调用时，它没有显示任何（中止）消息（显示成功警报）。但是当我进行多次调用（如图所示）时，它会显示出这种类型的错误。

如何克服这个问题？

请帮忙

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-22T23:30:59.343

我不确定这是同一个问题，但在我的情况下，所有这些都需要设置：onerror; 进行中；超时；和加载。以下是一些讨论该问题的参考资料：

*   [http://social.msdn.microsoft.com/Forums/ie/en-US/30ef3add-767c-4436-b8a9-f1ca19b4812e/ie9-rtm-xdomainrequest-issued-requests-may-abort-if-all-event-未指定的处理程序](http://social.msdn.microsoft.com/Forums/ie/en-US/30ef3add-767c-4436-b8a9-f1ca19b4812e/ie9-rtm-xdomainrequest-issued-requests-may-abort-if-all-event-handlers-not-specified)
*   [http://cypressnorth.com/programming/internet-explorer-aborting-ajax-requests-fixed/](http://cypressnorth.com/programming/internet-explorer-aborting-ajax-requests-fixed/)
*   [http://rudovsky.blogspot.com/2012/09/microsoft-shit-xdomainrequest.html](http://rudovsky.blogspot.com/2012/09/microsoft-shit-xdomainrequest.html)
*   [https://github.com/faye/faye/pull/98](https://github.com/faye/faye/pull/98)

还有很多其他的。它们在建议的解决方案中分散，有时甚至相互矛盾。例如，有人建议将 xdr.send 调用包装在 setTimeout 中。

通过为每个事件处理函数添加非空白主体，我看到的行为消失了。我不确定是否所有都是必要的。setTimeout 包装器绝对*没有*必要。

一条可能不相关的信息：在我的例子中，我决定将每个处理程序绑定到“this”对象。我还添加了函数实现，以防止我的编译器将它们全部分配给同一个空函数。我的代码使用的是 GET，而不是 POST。YMMV。

您的代码未设置一个处理程序：

```
if (window.XDomainRequest) // Check whether the browser supports XDR.
{
    xdr = new XDomainRequest(); // Create a new XDR object.
    if (xdr) {
        xdr.timeout = 3000;//Set the timeout time to  3 second.
        xdr.onload = function () {
            alert("Success");
        };
        xdr.onerror = function () {
            alert("Error");
        };
        xdr.ontimeout = function () {
            alert("Error");
        };
        // this also needs to be set
        xdr.onprogress = function() {
            window.console.log('progress');
        };
        xdr.open("post", urlSearch);
        xdr.send();
    }
}
else {
    $.ajax({
        url: urlSearch,
        type: 'POST',
        dataType: 'json',
        timeout: 3000,
        success: function (data) {
            alert("Success");
        },
        error: function () {
            alert("Error");
        }
    });
} 
```

# sql - 需要帮助完成加入

> ID：15786969
> 
> 赞同：0
> 
> 时间：2013-04-03T12:09:47.327
> 
> 标签：sql, join

当前的 SELECT 查询

```
SELECT a.*, ROUND(((a.avg-b.avg)/b.avg)*100,2) pct_change
FROM
  ( 
     SELECT x.*, COUNT(*) rank
     FROM blavg x 
         JOIN blavg y 
             ON y.bline_id = x.bline_id 
            AND y.id >= x.id 
     GROUP BY x.id
) a
JOIN
( 
     SELECT x.*, COUNT(*) rank
     FROM blavg x 
         JOIN blavg y 
             ON y.bline_id = x.bline_id 
            AND y.id >= x.id 
     GROUP BY x.id
 ) b
     ON b.bline_id = a.bline_id
     AND b.rank = a.rank+1
WHERE a.rank = 1; 
```

我也想

```
SELECT bl_id, bline FROM bl
bl.bl_id = blavg.bline_id 
```

我试过了

```
SELECT bl_id, bline 
FROM bl bl 
    LEFT JOIN ON bl.bl_id = blavg.bline_id 
```

但不确定我是否有正确的语法，我不确定在哪里添加`ON`以及括号 () 去了哪里。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:38:27.007

因此，您正在执行某种查询以两次两次检索行并进行一些数学运算。
幸运的是，您的查询已经返回了`bline_id`您需要链接到您的`bl`表的信息。

因此，您只需要在结果上再增加一个关节即可检索`bl.bline`您需要的字段：

```
SELECT bl.bline, a.*, ROUND(((a.avg-b.avg)/b.avg)*100,2) pct_change
FROM
  ( 
     SELECT x.*, COUNT(*) rank
     FROM blavg x 
         JOIN blavg y 
             ON y.bline_id = x.bline_id 
            AND y.id >= x.id 
     GROUP BY x.id
) a
JOIN
( 
     SELECT x.*, COUNT(*) rank
     FROM blavg x 
         JOIN blavg y 
             ON y.bline_id = x.bline_id 
            AND y.id >= x.id 
     GROUP BY x.id
 ) b
     ON b.bline_id = a.bline_id
     AND b.rank = a.rank+1
     LEFT OUTER JOIN bl
         ON bl.bl_id = a.bline_id
WHERE a.rank = 1; 
```

# mips - MIPS 十进制到二进制转换代码正在工作，但结果必须如何反转？

> ID：15786970
> 
> 赞同：0
> 
> 时间：2013-04-03T12:09:47.593
> 
> 标签：mips

我在 mips 有一个项目，它关于十进制到二进制的转换 我设法编写了代码并且它工作正常，但是你们都知道，当我们在纸上进行十进制到二进制的转换时，我们会反向编写结果，这就是关键点，因为我的程序以正常顺序写入 1 和 0，因为它只是在屏幕上打印，所以我无法给出反转它的命令。

如果我将变量存储在数组中并反转它或使用堆栈，我该如何反转它？

```
.data
ms1_msg:.asciiz "Enter The Number:"
.text
.globl main
main:

la $a0,ms1_msg    
li $v0,4
syscall

li $v0,5          #user enters number and it is stored in t0
syscall
move $t0,$v0

addi $t1,$zero,1  #t1=1
addi $t2,$zero,2  #t2=2
add $t5,$zero,1   #t5=1
add $t8,$zero,$zero 

add $t6,$zero,$t0  #t6=1

loop1:            #trying to find the counter for loop 2

addi $t5,$t5,1    
div $t0,$t2       
mflo $t4          
beq $t4,$t1,loop2 
sub $t0,$t0,$t0   
add $t0,$t4,$t0
j loop1 
```

s

```
loop2:            #twith using the counter (t5) I define how many times loop should circle. 

    addi $t9,$t9,1    
    div $t6,$t2       
    mfhi $t7          
    mflo $t8          
    move $a0, $t7     
    li $v0, 1
    syscall
    beq $t9,$t5,exit
    sub $t6,$t6,$t6   
    add $t6,$t8,$t6 
    j loop2           

    exit:                                      
    li $v0,10       
    syscall 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:30:06.333

你的标题说“二进制到十进制”，但你的描述和代码暗示“十进制到二进制”，所以我假设后者。

缓冲区不需要将数字显示为二进制字符串。这只是移位和掩蔽的问题，您可以按照您想要的任何顺序进行操作。

例如，以下代码将以二进制表示形式打印一个值，省略前导零：

```
uint32_t value = 1234;
bool foundAOne = false;
int bit = 31;

printf("%d in binary is ", value);

do {
    // Check the most significant bit (i.e. the "leftmost" bit)
    if (value & 0x80000000) {  
        foundAOne = true;        
        printf("1");
    } else {
        if (foundAOne || bit == 0) {
            printf("0");
        }
    }
    bit--;
    // Shift out the current msb and move all other bits one step
    // to the left
    value <<= 1;
} while (bit >= 0);

printf("\n"); 
```

将其转换为 MIPS 程序集应该是一项相当简单的任务。

# python - 防止 Django Pipeline 对某些文件进行后处理

> ID：15786975
> 
> 赞同：1
> 
> 时间：2013-04-03T12:10:06.673
> 
> 标签：python, django, django-pipeline

我目前正在实施 Django Pipeline 来缩小我的 CSS/JS，但我想停止它向某些文件附加唯一标识符。

这是因为我正在使用 django-tinymce 并且某些弹出窗口由于 Django Pipeline 而失败。我收到以下错误消息：

```
"The requested URL /static/tiny_mce/plugins/table/table.htm/ was not found on this server. 
```

由于 Django 管道已将 table.htm 更改为：

```
Post-processed 'tiny_mce/plugins/table/table.htm' as 'tiny_mce/plugins/table/table.88fb36057ec1.htm 
```

如果有人知道如何在某些应用程序上关闭此位，我将不胜感激；在文档中找不到任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:02:20.330

刚刚发现问题是Apache在url中添加了一个正斜杠，而不是django-pipeline的问题。

# javascript - 面向对象的Javascript：如何定义具有可变形式相同对象的对象

> ID：15786976
> 
> 赞同：2
> 
> 时间：2013-04-03T12:10:08.860
> 
> 标签：javascript, oop

如何在 javascript 中定义一个对象，其中一个键的值是从另一个键继承的。

```
a = {

  one : "a",

  two : this.one + 'b'

}

alert(a.two); 
```

我知道我可以通过做类似的事情来做到这一点`a.two = a.one + 'b';`

但是有没有一种更清洁的方法可以将它们耦合在一个花括号内

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:12:09.060

*在创建对象之前（包括在*创建期间） ，您无法访问对象的属性。

> 我知道我可以通过做类似的事情来做到这一点`a.two = a.one + 'b';`

是的

> 但是有没有一种更清洁的方法可以将它们耦合在一个花括号内

不。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T12:12:14.883

你不能这样做，至少不能使用普通的对象文字。

只有`functions`一个有效的`this`参考。函数外部`this`将引用全局对象（即`window`）。

# c# - 如何在silverlight 4富文本框中合并标签合并字段？

> ID：15786979
> 
> 赞同：1
> 
> 时间：2013-04-03T12:10:11.167
> 
> 标签：c#, asp.net, silverlight, silverlight-4.0, datasource

我想在silverlight 4 中执行此操作，实际上我正在silverlight 4 Richtextbox 中执行邮件合并模块。我想在邮件合并字段单击邮件合并选项卡时插入标签字段。我怎么能做到这一点。我需要做什么？

我添加了名字、姓氏和职位。现在我想做的只是在从邮件合并选项卡单击名字时在richtextbox 中插入名字。

![在此处输入图像描述](https://i.stack.imgur.com/3lLEk.png)

```
public List<Employee> Employees
    {
        get
        {
            return employees;
        }
    }
private List<Employee> employees = new List<Employee>()
                {
                    new Employee()
                    {
                        FirstName = "Andrew",
                        LastName = "Fuller", 
                        JobTitle = "Director - Finance",
                    }, 
                    new Employee()
                    {
                        FirstName = "Nancy",
                        LastName = "Davolio", 
                        JobTitle = "Director - Human Resources",
                    },
                    new Employee()
                    {
                        FirstName = "Robert",
                        LastName = "King", 
                        JobTitle = "Engineering Design Manager",
                    },
                    new Employee()
                    {
                        FirstName = "Margaret",
                        LastName = "Peacock", 
                        JobTitle = "Finance & Investments Officer",
                    }
                }; 
```

# c# - 将 if else 重写为 switch

> ID：15786992
> 
> 赞同：1
> 
> 时间：2013-04-03T12:11:00.130
> 
> 标签：c#, if-statement, switch-statement

我写了一些**这样的 if-else**语句：

```
 if (workedDays > 0 && workedDays <= 180)
   {
     x= 14;
   }

   if (workedDays > 180 && workedDays <= 540)
   {
     x= 28;
   }

   if (workedDays > 540 && workedDays <= 1068)
   {
     x= 42;
   }
   else
   {
     x= 56;
   } 
```

我试图将其重写为**switch**语句，如下所示：

```
 switch (workedDays)
   {
     case (workedDays > 0 && workedDays <= 180):
       x=14;
       break;
     default:
       break;
   } 
```

但是，我收到错误消息`Cannot implicitly convert type 'bool' to 'int'`。

我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T12:16:13.220

虽然`switch(true)`@Jeroen 的答案可能有效，但为了便于阅读，我建议以下内容：

```
if (workedDays <= 180)
    x = 14;
else if (workedDays <= 540)
    x = 28;
else if (workedDays <= 1068)
    x = 42;
else 
    x = 56; 
```

通过`else if`构造，无需仔细检查最小值和最大值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T12:24:37.127

好吧，我个人不喜欢有这么多的 if-else-if。

我通常遵循“三个或更多，使用一个for！”的想法。

所以，我会这样做： -

```
class Program
{
  struct Data
  {
    public Data (int l, int u, int v)
    {
      lower = l;
      upper = u;
      value = v;
    }
    public int lower;
    public int upper;
    public int value;
  }

  static void Main (string [] args)
  {
    Data []
      // at the moment, this is coded into the source
      // it can be read from a file at run time instead
      data = { new Data (0, 180, 14), new Data (180, 540, 28), new Data (540, 1068, 42) };

    int
      // again, the default case is hard coded, it too can be loaded from a file
      x = 56,
      workedDays = 100;

    foreach (Data item in data)
    {
      if (workedDays > item.lower && workedDays <= item.upper)
      {
        x = item.value;
        break;
      }
    }
  }
} 
```

然后，您可以从文件中填充数据数组，以便搜索成为运行时可配置的，因此您无需重新构建程序来更改范围和结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T12:13:06.090

做：

```
switch (true)
    {
        case (workedDays > 0 && workedDays <= 180):
            x=14;
            break;
        default:
            break;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T12:14:05.270

如果你考虑你要求编译器做什么，你就会明白为什么会出现问题。

您正在打开可能是 int 的工作天数：

```
switch(workedDays:int)
{
   case (workedDays > 0 && workedDays <= 180):

   break;
} 
```

您的案例被评估为真或假结果（布尔值），因此您要求它在整数之间进行选择，但有可能给它一个布尔值！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T12:16:35.843

你不能。Switch 语句只能与编译时常量一起使用。[看到这个问题](https://stackoverflow.com/questions/44905/c-sharp-switch-statement-limitations-why)

# xml - xsl 和 xpath ：在节点内搜索节点，并返回找到的节点中的属性值

> ID：15786998
> 
> 赞同：1
> 
> 时间：2013-04-03T12:11:29.257
> 
> 标签：xml, xslt, xpath, xslt-1.0

我有以下 xml：

```
<w:style w:styleId="John">
  <w:name w:val="Peter" />
</w:style> 
```

所以基本上，拥有“彼得”的价值，我想得到“约翰”的价值（当时我不知道）。我的 xml 中会有很多“w:style”节点。

如何使用 xslt（和 xpath）1.0（最好调用命名模板来返回值）获取返回给我的“John”字符串的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:19:41.213

将提取您需要的基本 XPath 表达式是

```
//w:style[w:name/@w:val = 'Peter']/@w:styleId 
```

但是当你标记你的问题“XSLT”并且你说你有很多这样的节点时，你最好使用密钥

```
<xsl:key name="nameByVal" match="w:name" use="@w:val" /> 
```

然后你可以更有效地使用查询

```
key('nameByVal', 'Peter')/../@w:styleId 
```

或者如果`w:name`可能嵌套在其他元素中而不是`w:style`then的直接子元素

```
key('nameByVal', 'Peter')/ancestor::w:style/@w:styleId 
```