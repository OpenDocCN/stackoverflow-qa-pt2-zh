# StackOverflow 问答 14091000-14091999

# django - Django：create_user 抛出什么样的异常？

> ID：14091003
> 
> 赞同：3
> 
> 时间：2012-12-30T13:13:58.207
> 
> 标签：django, exception

我想抓住它们并向用户返回有用的消息。文档[https://docs.djangoproject.com/en/1.4/topics/auth/](https://docs.djangoproject.com/en/1.4/topics/auth/)说 ValueError 在给出无效用户名时引发。当用户名已经存在时，还有 IntegrityError。这些都是吗？

这是通常的做法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-30T13:22:06.963

如果您不使用 Django Auth Forms，则必须手动进行验证。简单的方法是当用户提交您应该检查的自定义表单时：

*   如果用户名有效，则与正则表达式匹配，例如 \w+
*   检查用户名是否已被使用，例如`User.objects.filter(username=username).exists()`
*   检查电子邮件是否已用于帐户，例如`User.objects.filter(email=email).exists()`
*   然后创建用户

仅供参考：已经有一些 Django Auth 包，例如[django-allauth](https://github.com/pennersr/django-allauth)、[django-userena](http://www.django-userena.org/)等等，它们可以很好地处理所有内容，而不是自己重新发明轮子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T15:09:49.777

自从它们移至[Github](https://github.com/django/django)或在您机器上的 Python`site-packages`目录中找到源代码后，您始终可以轻松查看源代码。

只需去`django/contrib/auth/`分析一些代码。

# ios - OpenGL导致内存泄漏

> ID：14091005
> 
> 赞同：1
> 
> 时间：2012-12-30T13:14:15.683
> 
> 标签：ios, xcode, memory-leaks

我有一个 OpenGL ES 活动，由于某种原因，即使在评论几乎每一行之后，它也会导致内存泄漏。这是剩下的代码

.h 文件

```
#import <UIKit/UIKit.h>
#import <GLKit/GLKit.h>

@interface PlayMain : GLKViewController <UIAccelerometerDelegate>{ }

@end 
```

.m 文件

```
@interface PlayMain ()
{

}

@property (strong, nonatomic) EAGLContext *context;
@property (strong, nonatomic) GLKBaseEffect *effect;

@end

@implementation PlayMain{}

@synthesize context = _context;
@synthesize effect = _effect;

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES1];
    if (!self.context)
    {
        NSLog(@"Failed to create ES context");
    }

    GLKView *view = (GLKView *)self.view;
    view.context = self.context;
    view.drawableDepthFormat = GLKViewDrawableDepthFormat24;
    [EAGLContext setCurrentContext:self.context];
}

- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect
{
} 
```

在 openGL 活动和另一个活动之间进行大约 10-20 次切换后（它包含 3 个标签和一个按钮，用于创建回到 openGL 活动的 segue），应用程序会收到内存警告。如果我继续，那么在再切换几次之后，该过程就会终止。我错过了什么吗？

此外，我正在测试的设备是 ipod4，我在项目设置中使用 ARC。

# android - 每次用户使用我的 android 应用程序时，我是否需要对用户进行身份验证

> ID：14091009
> 
> 赞同：2
> 
> 时间：2012-12-30T13:15:29.677
> 
> 标签：android, facebook, google-app-engine

我正在创建一个 android 应用程序，我需要在用户登录时显示来自服务器的一些数据。我们正在使用 facebook 登录来验证用户身份。**我们正在使用jsessionid**处理会话。我们将数据缓存在 android local db 中，每次用户打开应用程序时，我们都会显示缓存数据并在后台进程中同步数据。我们正在使用 gcm 消息向用户发送通知。

**我唯一关心的是用户身份验证。每次我需要在用户打开我的应用程序时对其进行身份验证，或者我可以依靠我从服务器收到的 jsessionid 令牌对用户进行第一次身份验证。**

我检查了gmail的行为。当我单击应用程序时，它会立即向我显示数据，并且似乎他们没有在服务器上发送调用来验证用户身份。

我使用谷歌应用引擎作为后端。
**我应该与 jsessionid 一起使用哪些其他参数来确保用户，以便我可以在他打开 android 应用程序时立即看到内容**

问候

罗希特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T17:30:24.197

不，您不需要每次都对用户进行身份验证，这让用户每次都输入用户名和密码很尴尬

您可以使用 accesstoken 和 accessexpires 直接检查会话是否有效

代码

```
public boolean isSessionValid(String accessToken, String accessExpires) {
    mFacebook.setAccessToken(accessToken);
    mFacebook.setAccessExpires(accessExpires);
    return mFacebook.isSessionValid();
} 
```

我希望这可能对你有所帮助

# java - 如何在 JavaFX 中为非英语支持添加 UTF-8？

> ID：14091011
> 
> 赞同：12
> 
> 时间：2012-12-30T13:16:01.863
> 
> 标签：java, utf-8, javafx, multilingual

我想在 JavaFX 中添加 UTF-8 波斯语字符，但是当我添加带有波斯语内容的标签时，它会显示一些奇怪的结果。

我是否必须使用特定的插件或配置来处理此问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T17:45:17.623

波斯语是从右到左吗？

在这种情况下，您想使用[支持 RTL](http://javafx-jira.kenai.com/browse/RT-138)的 JavaFX 版本。那将是 JavaFX 8（包含在 JDK8 中）。[这里](http://jdk8.java.net/)有一个预览。

确保您已加载并正在使用包含波斯字符字形的字体。

这是一些[示例 JavaFX 代码](https://docs.oracle.com/javase/8/javafx/user-interface-tutorial/text-settings.htm#CHDEEAFG)（复制自 Oracle JavaFX 教程），用于显示在我看来像波斯脚本的内容。

```
import javafx.application.Application;
import static javafx.application.Application.launch;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.scene.paint.Color;
import javafx.scene.text.Font;
import javafx.scene.text.Text;
import javafx.scene.text.TextFlow;
import javafx.stage.Stage;

public class JavaFXBidiText extends Application {

    @Override
    public void start(Stage stage) throws Exception {
        TextFlow textFlow = new TextFlow();
        Font font = new Font("Tahoma", 48);

        Text text1 = new Text("He said \u0627\u0644\u0633\u0644\u0627\u0645");
        text1.setFill(Color.RED);
        text1.setFont(font);
        Text text2 = new Text(" \u0639\u0644\u064a\u0643\u0645 to me.");
        text2.setFill(Color.BLUE);
        text2.setFont(font);
        textFlow.getChildren().addAll(text1, text2);

        Group group = new Group(textFlow);
        Scene scene = new Scene(group, 650, 150, Color.WHITE);
        stage.setTitle("Hello Bidi Text");
        stage.setScene(scene);
        stage.show();
    }
} 
```

[![图片](../Images/cb25e9e6d3cdd9f60341529fc8e2d4a0.png)](https://i.stack.imgur.com/Dfc6h.png)

关于使用和解释正确字符编码的这个问题和答案的其他评论也是有效的，所以这个答案并不完全权威。

如果源文件是 ascii 编码的，那么您可以使用这些`\u`值来表示非 ascii 字符的 unicode 值，如上例所示。

我认为（虽然我没有尝试过），如果源文件（`.java`类的文件或资源的属性文件）是 UTF-8 编码的（它必须保存为 UTF-8 编码，而不是另一个字符集，例如[在 Intellij IDEA 编辑器中设置文件编码](https://www.jetbrains.com/help/idea/configuring-individual-file-encoding.html#options)）然后您可以直接将 unicode 类型的字符放入字符串中，就像您在不使用`/u`编码的情况下使用普通 ASCII 字符一样。如果这样做，则必须将编译器或构建工具配置为使用 UTF-8 编码文件。例如，使用 Maven：[如何在 Maven 中配置编码？](https://stackoverflow.com/questions/3017695/how-to-configure-encoding-in-maven)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-20T20:54:54.403

如果您使用的是 ResourceBundle，请确保它以正确的编码读取属性文件。

[如何通过 ResourceBundle 在资源属性中使用 UTF-8](https://stackoverflow.com/questions/4659929/how-to-use-utf-8-in-resource-properties-with-resourcebundle)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-30T13:21:33.163

很可能您的问题与 JavaFX 无关，而是与一些编码混乱有关。Java 自古以来就完全支持 UTF-8（不是一组语言，而是一种 Unicode 字符集编码）。帮自己一个忙，花几个小时消化[这个](http://www.joelonsoftware.com/articles/Unicode.html)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-31T10:35:44.917

我遇到了同样的问题，答案是我的源代码文件的文件编码不是 UTF8（我使用的是 intellijidea 14）我将它们转换为 UTF8 并且它有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-04T18:37:49.570

只需`?useUnicode=true&characterEncoding=utf8`在连接网址后添加

会是这样

```
jdbc:mysql://localhost:port/dataBaseName?useUnicode=true&characterEncoding=utf8 
```

# php - 加载用户在网页上选择的图像

> ID：14091012
> 
> 赞同：0
> 
> 时间：2012-12-30T13:16:30.293
> 
> 标签：php, javascript

我有一个表格。为了简单起见，表单中唯一的元素是文件上传：

```
<form name="MyForm" action="upload_file.php" enctype="multipart/form-data" method="post">
    <input type="file" name="file" id="file" size="40"> 
    <button type="button" onclick="draw()">Refresh</button>
    <input type="submit" name="upload" value="Upload"> 
</form> 
```

在 upload_file.php 中，我以通常的方式检索参数。

在我的网页上有一个默认图像

```
<img src="Images/default_icon.png" width="70px" height="70px"/> 
```

我想用用户从“选择文件”对话框中选择的图像替换此图像，并且（我想这是必要的）按下“刷新”按钮。用户可以上传任意数量的文件，当他最终对图像感到满意时（当然只能看到最后上传的），他按下上传按钮，将他带到下一个网页并将图像上传到服务器.

我没有太多的网络编程知识，但我想我知道我必须将图像上传到专用文件夹，因为我无法在客户端机器上检索和使用图像的路径。然后我可以从服务器下载图像并像这样加载它：

```
$url = '/upload/'.$_FILES["file"]["name"]; ///upload/icon.jpg 
```

和

```
<img src="<?php echo $url; ?>" width="70px" height="70px"/> 
```

请帮助我或将我重定向到一个体面的教程。还赞赏有关其在实践中如何工作的解释。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T13:19:17.103

我想你需要这样的东西：

[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T12:28:52.177

我不想回答我的问题，但我设法做到了，而没有实际将图像上传到服务器。我不知道这是可能的，这就是为什么我写了*用户可以上传任意数量的文件，当他最终对图像感到满意时（当然只能看到最后上传的），他按下上传按钮将他带到下一个网页并将图像上传到服务器。*. 为什么用户要上传更多文件，直到他找到最吸引人的文件，而足以从计算机中逐个选择并上传他认为最合适的文件:)

HTML：

```
<input type="file" id="file" />
<input type="text" id="img_size" />
<img src="" id="fake_img" /> 
```

Javascript：

```
// Handle file while select a new file
$('#file').change(function () {
    $('#img_size').val((this.files[0].size) / 1000000);
    handleFiles(this.files);
});

// handle files
function handleFiles(files) {
    for (var i = 0; i < files.length; i++) {
        var file = files[i];
        var imageType = /image.*/;
        if (!file.type.match(imageType)) {
            continue;
        }
        var img = document.getElementById('fake_img');
       /* img.src = file;
        img.onload = function () {
        }; */
        var reader = new FileReader();
        reader.onload = (function (aImg) {
            return function (e) {
                aImg.src = e.target.result;
            };
        })(img);
        reader.readAsDataURL(file);
    }

}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T10:48:12.630

```
I have done this file uploading using iframe and form.
1>You need to have a form which includes input type as file and set the method as post of the form and set the target of the form to the iframe.
2> Set the src of iframe to the server side page where you need to upload the image.

Below is the html :-

<form id="fm1" method="post" enctype="multipart/form-data" target="ifrm">
<input type='file' id='file' name='image'/>
</form>

<iframe name='ifrm' style='display:none;' id='ifrm1' src='./CreateEvents.aspx'></iframe>

Once you sumbit the form to this iframe it automatically get posted to your server side page from where you can get the image convert it into bytes and upload to server or do any thing else. 
```

# opencart - opencart 谷歌站点地图 vqmod 错误

> ID：14091014
> 
> 赞同：1
> 
> 时间：2012-12-30T13:16:35.663
> 
> 标签：opencart, xml-sitemap

我正在尝试在谷歌网站管理员工具中提交谷歌站点地图，但遇到错误。在管理员中，我点击了扩展>>产品提要并启用了谷歌站点地图选项。它为我提供了站点地图的链接，但是当我将链接提交给谷歌网站管理员工具时，它不喜欢它并返回以下错误：

```
Unsupported file format
Your Sitemap does not appear to be in a supported format. Please ensure it meets our Sitemap guidelines and resubmit. 
```

这是我正在使用的 URL： [http ://www.techcertsolutions.com/index.php?route=feed/google_sitemap](http://www.techcertsolutions.com/index.php?route=feed/google_sitemap)

错误：当我从谷歌网站管理员工具点击站点地图链接时，我看到以下消息：

```
Notice: Undefined index: limit in /home7/jardinf1/public_html/techcertsolutions/vqmod/vqcache/vq2-catalog_model_catalog_product.php on line 440 
```

我确实检查了`.htaccess`文件，并在文件中看到了以下条目：

```
RewriteRule ^sitemap.xml$ index.php?route=feed/google_sitemap [L] 
```

所以我不确定这里到底发生了什么。我还删除了所有内容`vqcache`并再次尝试，但没有运气。请给我一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T13:34:11.923

您的 vQmod 之一正在编辑`/catalog/model/catalog/product.php`文件，无论出于何种原因没有`limit`为查询设置，或者谷歌站点地图代码没有设置限制，应该是

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-03-09T17:14:04.700

如果有人仍然有这样的问题，有一个解决方案：

寻找文件

```
/catalog/controller/feed/google_sitemap.php. Open it and edit it, then just replace where it says"$products = $this->model_catalog_product->getProducts(array('filter_category_id' => $result['category_id']));" 
```

为了

```
$total_ = $this->model_catalog_product->getTotalProducts();
                $data = array('start' => 0, 'limit' => $total_);
$products = $this->model_catalog_product->getProducts(array('filter_category_id' => $result['category_id'], 'start' => 0, 'limit' => $total_)); 
```

# html - @Font face 在任何浏览器中都不起作用

> ID：14091016
> 
> 赞同：0
> 
> 时间：2012-12-30T13:16:48.520
> 
> 标签：html, css, fonts

我似乎无法让字体工作。我以前用过这个没有任何问题，但在这种情况下，我无法让它在任何浏览器中工作！

```
 body {
    width:100%;
    font-family: Cusmyr;
    font-size:2em;
    margin:0em;

}

@font-face {
    font-family:'Cusmyr';
    src: url('font/myriadproregot.otf'),
    src: url('font/myriadproregsv.svg'),
    src: url('font/myriadproregtt.ttf');
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T14:00:42.727

src 属性对我来说似乎是关闭的。我认为你需要一个单独的“src”逗号分隔。此外，您还缺少格式类型。不确定这是否重要，但不会受到伤害。试试这个

```
@font-face {
    font-family: 'Cusmyr';
    src: url('font/myriadproregot.otf') format('otf'), 
         url('font/myriadproregsv.svg') format('svg'), 
         url('font/myriadproregtt.ttf') format('truetype');
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-30T13:55:31.903

下面的行表明您的 css 文件位于项目的根目录中，或者您的`Content`or文件夹中有一个字体文件`Css`夹。我的钱是字体文件丢失或路径错误。

```
@font-face {
    font-family:'Cusmyr';
    src: url('font/myriadproregot.otf'),
    src: url('font/myriadproregsv.svg'),
    src: url('font/myriadproregtt.ttf');
} 
```

可能应该是这样的

```
@font-face {
    font-family:'Cusmyr';
    src: url('../font/myriadproregot.otf'),
    src: url('../font/myriadproregsv.svg'),
    src: url('../font/myriadproregtt.ttf');
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-30T13:19:52.287

'Cusmyr' 不应该用引号引起来吗？也看看这个[http://css-tricks.com/snippets/css/using-font-face/](http://css-tricks.com/snippets/css/using-font-face/)的 ie6 修复

# php - 从无 DSN 字符串获取连接详细信息

> ID：14091019
> 
> 赞同：-2
> 
> 时间：2012-12-30T13:17:20.673
> 
> 标签：php, odbc

是否可以从数据源名称中获取数据库名称和位置？

```
$dsn = $_GET['dsn'];
$conn=odbc_connect($dsn,'',''); 
```

**更新代码**

```
$dsn = "JuniorDSN";
$conn=odbc_connect($dsn,'','') or die ("Can't connect to DSN");

$dsnarray = explode(";",$dsn);
$dsn0 = $dsnarray[0];

echo $dsn0; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T15:42:45.007

典型的 DSN 如下所示：

```
Driver={Driver name with space hence curly braces};dbname=testdb 
```

所以它是`parameter=value`用分号分隔的对。`;`您可以通过然后爆炸字符串从中获取信息，然后`=`用空格修剪值`{}`

但是，您没有使用 DSN，而是预定义配置的别名，存储在`odbc.ini`（通常位于类 unix 系统上的 /etc/odbc.ini 中）或 Windows 注册表（`HKEY_CURRENT_USER\Software\ODBC\ODBC.INI`或`HKEY_LOCAL_MACHINE\SOFTWARE\ODBC\ODBC.INI`）中。如果您使用的是 linux 并且可以访问 odbc.ini，则可以使用[parse_ini_file](http://php.net/manual/en/function.parse-ini-file.php)对其进行解析：

```
$connectionInfo = parse_ini_file('/etc/odbc.ini', true);
var_dump($connectionInfo['JuniorDSN']); 
```

如果您在 Windows 上，那么您必须从注册表中获取此信息，使用 COM 对象应该是可能的。

```
$shell = new COM("WScript.Shell");
$odbcServer = $shell->RegRead("HKEY_CURRENT_USER\\Software\\ODBC\\ODBC.INI\\JuniorDSN\\Server"); 
```

# mysql - Cronjob 错误 - 找不到 mysqldump 命令

> ID：14091021
> 
> 赞同：0
> 
> 时间：2012-12-30T13:17:40.757
> 
> 标签：mysql, cron

我正在尝试安排一个将导出我的数据库并将其放入服务器上的文件中的 cronjob...发送到我的电子邮件：找不到 mysqldump 命令...这里是命令：

```
mysqldump -h localhost -u user_me --password="pas" user_t > /home/me/backup.sql 
```

知道问题是什么吗？我尝试将路径添加到 /usr/local/bin/mysqldump 而只是命令名称，但仍然没有运气......

# gcc - 我如何跟上 gcc 的发展？

> ID：14091023
> 
> 赞同：0
> 
> 时间：2012-12-30T13:17:59.023
> 
> 标签：gcc, gnu

我有两个我感兴趣的 GCC 下载站点。一个是 git repo

```
 git clone git://gcc.gnu.org/git/gcc.git gcc-cilk-src 
```

另一个是svn repo：

```
 svn checkout svn://gcc.gnu.org/svn/gcc/branches/cilkplus gcc-cilk-src 
```

据我了解，gcc 不久前切换到 Git。我的问题是，svn 分支是否也同时更新？也会`svn update`反映 git 的变化吗？

奖励问题（值得一票！）：我如何跟上我感兴趣的分支的当前发展？是

```
 http://gcc.gnu.org/git/?p=gcc.git 
```

我现在应该去哪里工作？还有什么其他提示可以让我了解最新信息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T19:36:14.927

您的所有问题都可以通过阅读并单击 GCC 主页上的一些链接来回答。

> 据我了解，gcc 不久前切换到 Git。

不，所有 GCC 开发都是在[SVN中完成的，正如](http://gcc.gnu.org/svnwrite.html)[主页](http://gcc.gnu.org/)上明确指出的那样：*“我们的资源可以通过[SVN](http://gcc.gnu.org/svn.html)和每周[快照](http://gcc.gnu.org/snapshots.html)轻松免费获得。”*

Git 存储库是SVN 存储库的[只读镜像。](http://gcc.gnu.org/wiki/GitMirror)镜像会自动更新所有对 svn 的提交。

当前工作发生在 subversion 主干上（在 Git 中，`trunk`和`master`分支都指 svn 主干。）某些较大的项目发生在一个分支中，然后合并到主干，有一个[活动开发分支](http://gcc.gnu.org/svn.html#devbranches)的列表。你应该遵循哪个分支取决于你想要遵循什么，但 Git 中的主干/主分支最有可能引起人们的兴趣。

> 还有什么其他提示可以让我了解最新信息吗？

显然，GCC[邮件列表。](http://gcc.gnu.org/lists.html)在“gcc”列表中讨论了重大更改，所有补丁都发送到“gcc-patches”列表中并在其中讨论。

# javascript - OnBlur 不适用于 div

> ID：14091024
> 
> 赞同：-3
> 
> 时间：2012-12-30T13:18:21.117
> 
> 标签：javascript

我在 table 中有一个 div `<td>`。当我添加 onBlur 事件时，什么也没有发生。当我将 onBlur 更改为不同的事件时，它会起作用。

有谁知道我如何将 onBlur 添加到 div：

```
<div id="MyForm" onblur='Init()'> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T13:26:02.340

`onblur`对具有焦点的元素进行替换，因此通常是输入。一个 div 不能被聚焦，所以它不能被模糊。

你的意思是`onmouseout`？

# android - 循环 ViewPager 的足迹

> ID：14091025
> 
> 赞同：1
> 
> 时间：2012-12-30T13:18:23.030
> 
> 标签：android, android-viewpager, performance

正在寻找一种方法来实现循环/循环 ViewPager 的人们对 StackOverflow 提出了一些问题。一个 ViewPager，当移动到 last_page+1 时循环到第一页，当移动到 first_page-1 时循环到最后一页。

几乎所有答案都建议为 pagecount 提供一个非常大的数字并将其映射到实际页面。

甚至所有页面都是根据需要从头开始创建的，我想知道这种方法对性能有何影响？它会严重影响我的应用程序的性能吗？内存占用呢？

# c# - Visual Studio 2010 扩展：解析代码，渲染结果

> ID：14091027
> 
> 赞同：0
> 
> 时间：2012-12-30T13:19:02.460
> 
> 标签：c#, visual-studio-2010, sdk, xna, designer

我目前正在开发一个项目，该项目使用基于 XNA 的自定义渲染引擎来绘制 UI 元素，例如：按钮、标签、面板等。

发动机结构相对简单。有一个屏幕管理器，其中包含多个游戏屏幕。游戏屏幕是通过扩展名为 GameView 的引擎基类来实现的。GameView 类负责处理 UI 元素层次结构。

开发人员可以向游戏视图添加一些 UI 控件的方式非常简单，其逻辑受 ASP.NET 控件层次结构的启发。您必须重写一个名为 LoadControls() 的方法，创建所需控件的实例并将它们添加到 GameView 控件集合中。

这里有一个例子：

```
 public override void LoadControls()
    {
        ImageFrame titleImage = new ImageFrame();
        titleImage.ID = "TitleImage";
        titleImage.Move(GameUI.Location(ViewLocation.CenterTop, -332, 4));
    titleImage.Width = 664;
    titleImage.Height = 166;
        titleImage.Image = "image_title";
        this.UI.Controls.Add(titleImage);

        ImageFrame freeImage = new ImageFrame();
        freeImage.ID = "FreeImage";
        freeImage.Move(GameUI.Location(ViewLocation.CenterTop, 160, 95));
        freeImage.Width = 170;
        freeImage.Height = 76;
        freeImage.Image = "image_free";
        freeImage.IsVisible = GameContext.Current.IsTrialMode;
        this.UI.Controls.Add(freeImage);

        Button playButton = new Button();
        playButton.ID = "PlayGameButton";
        playButton.Width = 216;
        playButton.Height = 96;
        playButton.Move(GameUI.Location(ViewLocation.CenterTop, -108, 130));
        playButton.Text = GameContext.Current.Dictionary[StringKeys.PlayGameButtonText];
        playButton.Font = FontNames.Floraless1;
        playButton.FontScale = 1.3f;
        playButton.FontPressedColor = Color.White * .8f;
        playButton.Click += new EventHandler<EventArgs>(PlayGameButton_Click);
        this.UI.Controls.Add(playButton);
    } 
```

使用代码创建 UI 确实很容易，但是当您需要创建复杂的布局时，很难弄清楚结果。我想知道是否可以为 VS2010 开发一个自定义扩展来呈现我的 GameView 控件层次结构的“视图”。我不需要创建 UI 设计师。我只需要在代码编辑器中阅读一些手写代码并在我仍在 Visual Studio 中（未运行应用程序）时实时渲染结果。

简而言之，是否可以扩展 Visual Studio 2010 以创建自定义“设计器”，实时解析 .cs 代码并生成渲染输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T13:29:09.953

这可能会让您入门：[创建自定义 Visual Studio 设计器](http://social.msdn.microsoft.com/Forums/en-US/vsx/thread/0fffc00f-0255-46cc-86e4-549f206cbb2f)

# javascript - 如何检测是否安装了 iewebgl？

> ID：14091028
> 
> 赞同：-1
> 
> 时间：2012-12-30T13:19:07.947
> 
> 标签：javascript, webgl

是否可以检测是否安装了 iewebgl？我在某个地方看到了这个，但这不起作用：

```
var has_iewebgl = WebGLRenderingContext.hasOwnProperty('iewebgl') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T03:27:59.827

在浏览器中检测 webgl 支持的最简单方法是使用[Modernizr](http://modernizr.com)，这是一种流行的功能检测脚本。您可以像这样轻松地做到这一点：

```
if (Modernizr.webgl){
       loadAllWebGLScripts(); // webgl assets can easily be > 300k
    } else {
      var msg = 'With a different browser you’ll get to see the WebGL experience here:    \
                 get.webgl.org.';
      document.getElementById( '#notice' ).innerHTML = msg;
    } 
```

完整的文档在这里[Modernizr Docs](http://modernizr.com/docs/)

我希望这个答案对你有帮助

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-30T19:11:56.623

在您的情况下，如果尚未安装 iewebgl，则 WebGLRenderingContext 可能未定义。

尝试

```
var has_iewebgl = (typeof WebGLRenderingContext != 'undefined') && WebGLRenderingContext.hasOwnProperty('iewebgl'); 
```

# xcode - ios 5 屏幕初始自动旋转

> ID：14091029
> 
> 赞同：2
> 
> 时间：2012-12-30T13:19:13.417
> 
> 标签：xcode, ios5, autorotate

我知道自从 ios 6 发布以来，Apple 已经更改了所有设置屏幕自动旋转的功能。我已经能够应用这些更改，但是自从我开始使用最新的 xcode 版本以来，我的所有应用程序在 ios 5 中启动时都不会自动旋转到某个方向。我的理解是为了支持自动从 ios 5 开始旋转，您只需保留执行自动旋转的功能，我有：

```
- (BOOL)shouldAutorotateToInterfaceOrientation: (UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    BOOL allowed = NO;
    if(interfaceOrientation == UIInterfaceOrientationLandscapeLeft){
    allowed = YES;
    }
    return allowed;
} 
```

我的问题是，当应用程序在模拟器中启动时，它会自动以纵向显示，但是当我将模拟器旋转到横向时，它会自动旋转，然后不会自动旋转回来。为什么模拟器不自动将应用程序的显示旋转为横向？这也会发生在运行 ios 5 或 5.1 的设备上吗？

编辑

我还注意到这个问题出现在 ios 5 和 5.1 模拟器中，但没有出现在 ios 4.3 模拟器中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T23:23:14.893

确保支持的方向仅为横向，因为模拟器将在启动时检查这些值。这可以在**Xcode的****Project->Summary**选项卡中找到，或者您可以直接在**info.plist**文件中对其进行编辑。希望有帮助！

# android - Android 异步消费网络服务

> ID：14091032
> 
> 赞同：1
> 
> 时间：2012-12-30T13:19:38.507
> 
> 标签：android, web-services, android-asynctask

我需要一个小手握住从 C# 到 Java / Android 的转换，让客户端当然可以异步使用 Web 服务，这样它就不会锁定 gui....（进度条会锦上添花。）在 C#我会在客户端创建对象做这样的事情。

创建服务引用。创建与服务接口成员匹配的对象并进行填充。在单独的线程中启动在第二步中创建的服务请求传递对象。等待显示进度条。处理错误或返回数据的响应。

现在也许我太简单了，但我认为在 Java 中它会非常接近这种方法。我看到的是很多人说要扩展 AsyncTask 类。我缺少的是如何从客户那里传递我的价值观？例如，我如何发送用户名和密码？恐怕所有不同的文章和细微差别都让我感到困惑。我只需要一种直接的方式来完成工作。

因此，我将不胜感激任何提示、指针、教程或其他此类阅读。

JB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T13:44:18.100

异步任务带来了很多问题，因为它们托管的活动可能在执行仍在进行时被破坏。

最好的方法是将请求托管在意图服务或服务内部，这将在请求活动中继续存在。

如果您想要一个开箱即用的解决方案，我建议您看一下[robospice](https://github.com/octo-online/robospice)库，这是一个非常成熟的项目。它基于[Google Io 2010 演讲](http://www.youtube.com/watch?v=xHXn3Kg2IQE)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T13:51:47.637

```
public class AsyncHttpRequestManager extends AsyncTask<String, Boolean, String> {
    private final String serviceUrl = "URL HERE";
    String user;  
    String pass;

    public AsyncHttpRequestManager(String user, String Pass){
        this.user = user;  
        this.pass = pass;
    }

    @Override
    protected String doInBackground(String... params) {
        //execute the post
        return "";
    }

    protected void onPostExecute(String result) {
        Log.d("MESSAGE", result);
        //update the UI with the results
    }
} 
```

然后您使用

```
new AsyncHttpRequestManager(user, pass).execute(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T13:29:24.283

6 个月前，我开始使用 C#/.NET 进行 Android 开发

**我们目前使用的**第一个选项是**[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)来执行异步任务......在这种情况下它正在使用 Web 服务......**

 **示例代码是

```
public class AsyncHttpRequestManager extends AsyncTask<String, Boolean, String> {
    private final String serviceUrl = "URL HERE";

    @Override
    protected String doInBackground(String... params) {
        try {
        DefaultHttpClient client = new DefaultHttpClient();
        HttpPut putRequest = new HttpPut(serviceUrl);
        putRequest.setHeader("Content-type", "text/plain");
        putRequest.setHeader("Accept", "text/plain");
            putRequest.setEntity(new StringEntity(params[0]));
            HttpResponse response = client.execute(putRequest);
            InputStream content = response.getEntity().getContent();
        BufferedReader buffer = new BufferedReader(new InputStreamReader(content));
        String result = "";
        String s = "";
        while ((s = buffer.readLine()) != null) {
            result += s;
        }
        return result;

        } 
        catch (UnsupportedEncodingException e) {
            Log.e("AsyncOperationFailed", e.getMessage());
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            Log.e("AsyncOperationFailed", e.getMessage());
            e.printStackTrace();
        } catch (IOException e) {
            Log.e("AsyncOperationFailed", e.getMessage());
            e.printStackTrace();
        }
        return null;
    }

    protected void onPostExecute(String result) {
        Log.d("MESSAGE", result);
    }
} 
```

我为此写了[一篇博](http://www.adilmughal.com/2012/07/android-networkonmainthread-exception.html)文。

此外，为了显示进度/加载对话框，您可能必须覆盖 AsyncTask 中的 onPreExecute 和 onPostExecute 方法。检查文档。

第二种**选择**是使用[loopj 库](http://loopj.com/android-async-http/)，它是一个基于异步回调的 Android Http 客户端，构建在 Apache 的 HttpClient 库之上。

利用 loopj 的示例代码是

```
AsyncHttpClient client = new AsyncHttpClient();
client.setBasicAuth("username","password/token");
client.get("http://www.example.com", new AsyncHttpResponseHandler() {
    @Override
    public void onSuccess(String response) {
        System.out.println(response);
    }
}); 
```

随着时间的推移，我们已经在 HttpClient 上创建了我们的助手，因此我建议您使用诸如 loopj 之类的开源库，它可以真正帮助您快速爬上初始步骤。唯一的挑战是，当您来自另一个平台时，您可能会面临使用其他库而不是简单的 AsyncTask 的初始挑战，但如果您有灵活性，那么值得花时间。**

# c - 打印出负十六进制

> ID：14091033
> 
> 赞同：2
> 
> 时间：2012-12-30T13:19:39.003
> 
> 标签：c, printf, hex

> **可能重复：**
> [如何在 c 中打印带符号的十六进制](https://stackoverflow.com/questions/9602974/how-to-print-signed-hex-in-c)

我正在尝试打印出十六进制数字。

我试图打印出来的变量是 type `int i`，当我：

```
printf("%06X", i); 
```

如果数字是负数，它总是给我 8 位数字，如果是正数，它总是给我 6 位数字。

如果我将`"%06"`, to`"%04"`或其他东西更改为负数，我总是得到 8 位数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T13:33:53.763

“%06X”中的“6”指定要打印的最小位数。如果需要更多以显示完整值，则转换将打印更多。如果值小于请求的最小位数，“0”表示使用前导零，而不是默认的空格。

你得到八位数，因为“X”说明符是一个`unsigned int`参数。没有负值`unsigned int`。您的 C 实现正在重新解释将负数编码为 un​​signed 的`int`位`int`。例如，`int`值 -1 以 32 位二进制补码形式存储为 0xffffffff。因此，格式转换会看到`unsigned int`设置了高位的 an，并且它使用显示它们所需的所有数字。

您可以或应该进行几项更改：

首先，您不应该`int`为期望的说明符传递一个`unsigned int`。您应该使用强制转换将 转换为`int`a `unsigned int`，如`(unsigned int) i`.

其次，您应该传递要打印的值。如果您只想打印低六位十六进制数字，则可以使用带有 AND 运算符的掩码仅传递这些数字：`printf("%06X", (unsigned int) i & 0xffffff)`。

或者，如果要打印带符号的十六进制值，则必须自己处理符号，如下所示：

```
if (0 <= i)
    printf(" %06X", (unsigned int)  i);
else
    printf("-%06X", (unsigned int) -i); 
```

（后者假定`i`永远不会溢出足够大的负值`-i`。如果`-i`可能溢出，则可以进行简单的修改以获得所需的行为。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T13:49:08.147

负数使用[2 的补](http://simple.wikipedia.org/wiki/Negative_binary_numbers#2.27s_Complement)码以二进制形式存储。这意味着，二进制中的负数具有前导 1。玩弄[这个计算器](http://www.binaryconvert.com/convert_signed_int.html)以获得更好的感觉。

如果您要求`printf`使用`%X`该数字格式化数字，则该数字将被视为未签名。如果您处理负数的二进制表示而忽略 I 可能是负数的可能性，即忽略前导 1 作为负数的标志，那么您只能评估该数字实际上更大。

该`06`部分告诉`printf`用前导 0 填充数字，最多六位数。当然，如果号码已经超过 6 位，这无关紧要。

# php - 在 AJAX 和 php 之间发送数据

> ID：14091037
> 
> 赞同：0
> 
> 时间：2012-12-30T13:20:18.573
> 
> 标签：php, ajax, joomla

我有这个 AJAX

```
 function  getValFromDb() {
   var university = document.getElementById('category').value;
   var domain = document.getElementById('subcategory').value;
   var year = document.getElementById('an').value;
   var url = "modules/mod_data/tmpl/script.php";

  var params = 'uni='+university+'&fac='+domain+'&an='+year;
    if (window.XMLHttpRequest) { AJAX=new XMLHttpRequest(); } else { AJAX=new ActiveXObject("Microsoft.XMLHTTP"); }
    if (AJAX)
    {
        AJAX.open("POST", url, false);
        AJAX.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        AJAX.onreadystatechange = function()
        {
            if(AJAX.readyState == 4 && AJAX.status == 200)
            {
             document.getElementById('materie').innerHTML = AJAX.responseText;
            }
        }; 

    } AJAX.send(params);
    } 
```

在这里发送参数

```
<?php
defined('_JEXEC') or die;
$db = JFactory::getDbo();

$an=$_POST('an');
$fac=$_POST('fac');
$uni=$_POST('uni');
  $result1 =mysql_query("SELECT DISTINCT (materie) FROM drv_uni_$uni WHERE an='$an'");
while($row = mysql_fetch_array($result1)){
    $display_string .= "<option value=\"".$row['id']."\">". $row['materie'] ."</option>";
} 

  echo $display_string;
?> 
```

来自萤火虫的 POST

```
 Parametersapplication/x-www-form-urlencoded
      an    an-3
      fac   Finante Banci
      uni   ase
      Source
      uni=ase&fac=Finante Banci&an=an-3 
```

和标题

```
 Response Headers

        Connection  keep-alive
      Content-Encoding  gzip
       Content-Type text/html
       Date Sun, 30 Dec 2012 13:12:47 GMT
      Server    xServers
      Transfer-Encoding chunked
       X-Powered-By PHP/5.3.16 
```

请求标头

```
 Accept   text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
      Accept-Encoding   gzip, deflate
      Accept-Language   en-US,en;q=0.5
        Connection  keep-alive
     Content-Length 33
        Content-Type    application/x-www-form-urlencoded; charset=UTF-8
       Cookie   0dea1a59adf779fae552e16f3d646b24=91481693c6b3c8615aa9ce57461aa590; 33a66e84ea7ae1332853383606d933e1=2039ee6737b4252207431790f5f7a939
              DNT   1
        Host    www.domain.ro
       Referer  http://www.domain.ro/upload
       User-Agent   Mozilla/5.0 (Windows NT 6.1; rv:17.0) Gecko/20100101 Firefox/17.0 
```

响应是空的！

Js 没有从 php 接收任何东西。PHP 已经正确地获取了这些值，但是当它发送时它不会返回给 js。如果您想向我展示如何使用 JSON 或修改此代码，我很感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T13:47:34.730

尝试更改`defined('_JEXEC') or die;`为`define('_JEXEC', 1) or die;`. 注意我使用了**define**而不是**defined**。对于许多将 Ajax 集成到他们的扩展程序中的人来说，这一直是一个问题，因为`defined('_JEXEC') or die;`出于安全原因通常会阻止它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T13:32:16.840

您可以按如下方式调试上述场景。

1.  检查您的 PHP 页面是否被 AJAX 查询命中。为此，回显“某事”并查看萤火虫响应选项卡上显示的内容。`defined('_JEXEC') or die;`可能正在停止脚本等。

2.  确保 AJAX URL 正确且 POST 数据正确传递到 PHP 端。

3.  检查您的 MYSQL 查询是否正确并返回您想要的数据。

4.  确保从 PHP 端检索响应并将其显示在 AJAX 成功函数中。

5.  在此过程中注意 JS 错误。为确保没有错误，您可以使用 firebug。

# jsf - Primefaces数据表多个复选框不起作用

> ID：14091038
> 
> 赞同：0
> 
> 时间：2012-12-30T13:20:29.540
> 
> 标签：jsf, jsf-2, primefaces, mojarra

最近，我一直在做一个使用 Primefaces UI 的项目。要求之一是要有一个数据表，用户可以在其中选择多行。我已经实现了类似于： http: [//www.primefaces.org/showcase-labs/ui/datatableRowSelectionRadioCheckbox.jsf](http://www.primefaces.org/showcase-labs/ui/datatableRowSelectionRadioCheckbox.jsf)的东西，但它没有用。

起初，我认为我的代码有问题，但是当我从 primefaces 复制示例时，它也不起作用。所以我想知道我的技术堆栈是否有问题：JavaEE6、Glassfish 3.1.2.2、mojarra(javax.faces) 2.1.16、primefaces 3.4.2。

至于示例代码，我完全复制了上面给出的链接。

请注意，单选也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T03:24:13.070

我能够通过以下方式解决这个问题：

1.) 从头开始​​创建一个新项目并测试我的堆栈是否真的有效。正如 Arjan Tijms 所说，即使您向最新版本的 mojarra 添加依赖项，它也会被忽略。尝试在 Glassfish 中部署新应用程序，您会注意到以下行：

```
[#|2012-12-31T11:19:15.958+0800|INFO|glassfish3.1.2|javax.enterprise.resource.webcontainer.jsf.config|_ThreadID=39;_ThreadName=Thread-2;|Initializing Mojarra 2.1.6 (SNAPSHOT 20111206) for context '/web-demo-0.0.1-SNAPSHOT'|#] 
```

2.) 我的 bean 是 SessionScoped，所以它是可序列化的，但我忘记将注入的 ResourceBundle 和 FacesContext 标记为瞬态。（我的主要问题）。

3.) 对于带有弹出对话框示例的 primefaces 选择，请确保操作按钮以对话框元素 id 为目标进行更新。

4.) 确保在 Eclipse 项目以及您拥有的项目依赖项上运行 maven clean。例如，我有一个 web-commons，我在其中定义了对 mojarra 的依赖项，尽管我一直在清理主项目，但我没有注意到 commons 依赖项将 mojarra jar 添加到最后一个耳朵。

仅此而已，我的项目现在可以正常运行:-) 谢谢。

# jquery - 在 domready 上计算窗口高度并调整大小（结果参差不齐）

> ID：14091043
> 
> 赞同：1
> 
> 时间：2012-12-30T13:20:55.450
> 
> 标签：jquery, css

我有以下 HTML 结构：

```
<div id="page-wrapper">
    <div id="page-wrapper-inner">

    </div>
</div> 
```

`page-wrapper`就在`<body>`标签的内部，所以 a`min-height:100%`在那里工作得很好，但`page-wrapper-inner`不会跨越整个高度（我知道）。所以，我目前有以下计算和附加页面加载时的窗口高度以及调整窗口大小时：

```
/**
 * Calculate window height based on document height to fill inner-wrapper
 */
function resizeFrame() {
    var h = $(document).height();
    $("#page-wrapper-inner").height(h);
}

jQuery.event.add(window, "load", resizeFrame);
jQuery.event.add(window, "resize", resizeFrame); 
```

这在页面加载时效果很好，但在调整窗口大小时会得到不一致的结果（特别是让它变大）。任何人都对为什么它不一直重新计算高度有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-01T19:25:51.233

我用 jsFiddle 试了一下，实际上效果很好。但我有两个建议。

1.  您是否已经在函数 resizeFrame 中创建了控制台日志，以查看在调整窗口大小时是否调用了它？
2.  如果您选择 $( **window** ).height();可能会有所帮助 而不是 $(document).height();

如果这没有给你一个好的结果，请发布你的css。

# c++ - 在 MFC 中平滑地从左到右移动椭圆对象

> ID：14091044
> 
> 赞同：2
> 
> 时间：2012-12-30T13:21:10.147
> 
> 标签：c++, mfc

我有一个`MyEllipe`扩展类`CStatic`。

我有自己的自定义`OnPaint`方法体，可以覆盖。

我有一种方法可以在对话框中移动这个对象以从左到右移动：

```
for(int i = 0; i <= 600; i++) {
   myEllipseObject->SetWindowPos(NULL, i, 300, 0, 0, SWP_NOSIZE | SWP_NOZORDER);
   Sleep(1);
} 
```

所以，基本上它会以 1 毫秒的延迟一个接一个地移动。它有效吗？是的。这是对的吗？我对此表示怀疑 ：）。那么，这样做的正确和有效方法是什么？我有一个椭圆和一个矩形，当用户单击按钮时，我想从左向右移动。

任何想法都值得赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T21:27:23.573

您通常会使用计时器来执行此操作。例如，您可以设置一个计时器，并在计时器触发时更新位置。您可以响应[`WM_TIMER`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644902.aspx)消息，也可以指定一个函数在计时器触发时调用。

# selenium - Selenium 和代理切换

> ID：14091054
> 
> 赞同：0
> 
> 时间：2012-12-30T13:22:13.797
> 
> 标签：selenium, proxy

是否有一个通用命令可用于更改代理并将代理应用于当前会话？对于firefox，chrome等主要的，我需要这个。

我已经广泛查看，似乎我只能在启动时设置它，有没有办法可以做到这一点？我正在运行 OSX Lion

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T03:40:28.890

使用 OSX 命令将代理应用于整个系统，这是我找到的唯一方法。

# c# - 如何从 VS 2012 创建 XBAP

> ID：14091061
> 
> 赞同：6
> 
> 时间：2012-12-30T13:22:40.177
> 
> 标签：c#, wpf, xbap

我认为使用 WPF 和 XAML 创建我的应用程序会使其更便携，甚至可以在网络上执行，但我无法弄清楚它如何与 VS 2012 一起工作。我正在查看的资源是说我需要创建一个 XBAP，这应该是在 VS 2010 中创建新项目时的一个选项。但我对 VS 2012 中的新 C# 应用程序的选择是：

*   Windows 窗体应用程序
*   WPF 应用程序
*   控制台应用程序
*   类库

我将我的应用程序创建为 WPF 应用程序，并将其切换到目标 .NET 3.5 客户端配置文件，以便更加向后兼容。但无论我的应用程序是嵌入在 ZIP 文件中还是作为直接 EXE 提供，Chrome 和 IE 9 都报告它可能是恶意的。我不记得以前即使在.NET 之前的可执行文件上也收到过如此令人震惊的警告。为什么浏览器突然对一个*应该*能够在沙盒更安全的环境中运行的应用程序做出危言耸听的反应？

我已尝试签署程序集并提供 ClickOnce 安装程序并签署 ClickOnce 清单。这允许它在 IE 中运行得更好，但在 Chrome 中则不行。

我尝试将项目安全设置切换为“这是一个部分信任的应用程序”，但这会产生错误“该程序集不允许部分信任的调用者”。当我添加`[assembly: System.Security.AllowPartiallyTrustedCallers]`到 AssemblyInfo.cs 时，尝试加载 PresentationFramework.dll 时出现错误：“请求类型为 'System.Security.Permissions.UIPermission, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken =b77a5c561934e089' 失败。”

XBAP 发生了什么？VS 2012 Express 不能创建浏览器应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T10:24:13.933

项目名称是 WPF 浏览器应用程序

# linq - 如何在 Linq 中替换任何内容

> ID：14091064
> 
> 赞同：1
> 
> 时间：2012-12-30T13:23:05.587
> 
> 标签：linq, linq-to-sql

我有一个从数据库中获取数据的 Linq 查询。问题是我正在使用“任何”来确定用户是否具有在 api 角色表中的角色。查询如下，它正在处理虚拟数据；但是每当我对数据库运行查询时，我都会收到*Local sequence cannot be used in LINQ to SQL implementations of query operators，但 Contains 运算符除外。*

`_apiRepository.GetQueryable<ApiInstance>() .SelectMany(apiInstance => apiInstance.ApiInstanceRoles) .Where(apiInstanceRole => CurrentUser.UsersInRoles.Any(cr => cr.RoleId == apiInstanceRole.RoleId))`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T13:29:08.730

尝试用 重写查询`Contains`，如下所示：

```
_apiRepository
    .GetQueryable<ApiInstance>()
    .SelectMany(apiInstance => apiInstance.ApiInstanceRoles)
    .Where(apiInstanceRole => CurrentUser
        .UsersInRoles
        .Select(cr =>cr.RoleId)
        .Contains(apiInstanceRole.RoleId)) 
```

# javascript - JQuery grep(...) VS 原生 JavaScript filter(...) 函数性能

> ID：14091065
> 
> 赞同：16
> 
> 时间：2012-12-30T13:23:14.007
> 
> 标签：javascript, jquery, performance, native, execution-time

我测量了这两个函数的执行时间：

*   jQuery [grep](http://api.jquery.com/jQuery.grep/)函数
*   原生 JavaScript[过滤](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)功能

使用 Chrome Profiles 工具测量了以下方法的执行情况：

```
// jQuery GREP function
function alternative1(words, wordToTest) {
  return $.grep(words, function(word) {
    return wordToTest.indexOf(word) != -1;                    
  });
}

// Native javascript FILTER function        
function alternative2(words, wordToTest) {
  return words.filter(function(word) {
    return wordToTest.indexOf(word) != -1;                    
  });
} 
```

数组由`words`100 万个随机生成的字符串构成。每种方法运行 20 次。令我惊讶`jQuery`的是 grep 函数更快。

执行次数（20 次执行）：

*   jQuery [grep](http://api.jquery.com/jQuery.grep/)函数**26,31s**
*   原生 JavaScript[过滤](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)功能**34,66s**

您可以在此[jsFidle](http://jsfiddle.net/hfhRC/17/)上重复测量- 执行需要一些时间，所以请耐心等待。

有什么解释为什么 jQuery [grep](http://api.jquery.com/jQuery.grep/)函数比**原生**JavaScript[过滤](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)函数更快？

PS：这个问题的灵感来自这个[答案](https://stackoverflow.com/a/14012721/617996)。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-30T13:37:44.147

`$.grep`通过比较页面上实际使用的 jQuery 函数

```
function (a, b, c) {
    var d = [],
        e;
    c = !! c;
    for (var f = 0, g = a.length; f < g; f++) e = !! b(a[f], f), c !== e && d.push(a[f]);
    return d
} 
```

（[在此处](http://james.padolsey.com/jquery/#v=1.7.2&fn=jQuery.grep)检查未缩小的，谢谢[Alexander](https://stackoverflow.com/users/417685/alexander)）针对指定[的算法](http://es5.github.com/#x15.4.4.20)

[`Array.prototype.filter`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter).

在我看来，它就像`.filter`强制它`this`到*Object*，检查回调`IsCallable`并`this`在其中设置以及检查每次迭代中是否存在属性，而`.grep`假设并跳过这些步骤，这意味着发生的事情稍微少了一些。

将此与 Chrome 中的 JavaScript 编译器的性能结合起来，您可能会发现速度差异。

添加其中一些`$.grep`会使它看起来像

```
function (elems, callback, inv, thisArg) {
    var ret = [],
        retVal;
    inv = !!inv;
    for (var i = 0, length = elems.length; i < length; i++) {
        if (i in elems) { // check existance
            retVal = !!callback.call(thisArg, elems[i], i); // set callback this
            if (inv !== retVal) {
                ret.push(elems[i]);
            }
        }
    }
    return ret;
} 
```

`.filter` [并花费与(modified Alexander's jsperf)](http://jsperf.com/filterings/2)大约相同的时间。

# html - 动态创建新播放器 iFrame 时 Soundcloud HTML5 Widget API 中的 Nullpointer 异常

> ID：14091070
> 
> 赞同：1
> 
> 时间：2012-12-30T13:24:19.153
> 
> 标签：html, gwt, html5-video, soundcloud

我可以在一个小代码片段上减少我的问题。该代码动态创建一个 SC 播放器 iFrame 并显示就绪状态。如果已经有一个 iFrame，它会删除旧的并创建一个新的（ JSFIDDLE 上的可运​​行[示例](http://jsfiddle.net/7cdbM/72/)）：

```
var player;
var playerId;
var iframe;
var printReady=
function(data)
{
    document.getElementById("status").innerHTML = "Ready";  
};
function createSoundCloudIframe()
{
    document.getElementById("status").innerHTML = "Player not ready";
    var contentDiv = document.getElementById("content");

    // Remove last Iframe
    if(iframe != null){
        player.unbind(SC.Widget.Events.READY);
        contentDiv.removeChild(iframe);
    }
    // Create a new Iframe
    iframe = document.createElement("IFRAME");
    iframe.id = playerId + "ScId";            
    iframe.src = "http://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F41867062&show_artwork=true";

    // Append Iframe
    contentDiv.appendChild(iframe);

    // Show ready status
    player = SC.Widget(playerId + "ScId");
    player.bind(SC.Widget.Events.READY, printReady);

    playerId ++;
}; 
```

代码在第一次执行时运行良好。但是当你第二次尝试时，api.js的这个方法会抛出一个空指针异常（开发者控制台）：

```
// Uncaught TypeError: Cannot read property 'parentWindow' of null
function s(a) {
            return a.contentWindow || a.contentDocument.parentWindow
} 
```

导致异常的方法是`SC.Widget(iFrameId);`

在我的情况下，这个问题无法通过`SC.Widget(iFrameId).load(url, options);`功能和 iFrame 的隐藏来解决：我为 SC 小部件 api 编写了一个 google-web-toolkit 包装器，并在一个更大的项目中将此包装器与其他 gwt 媒体播放器包装器一起使用。在这个项目中，异常会以毫秒的延迟反复抛出，这会减慢一切。上面的代码片段只是对问题的纯 javascript 简化。

我真的需要一种解决方法，当 iFrame 被删除时，它会删除并清理 api.js 中的所有死引用！我正在寻找这样的解决方法一个月。

# mysql - 为 MySQL 存储过程添加默认值为 NULL 的参数

> ID：14091073
> 
> 赞同：2
> 
> 时间：2012-12-30T13:25:02.463
> 
> 标签：mysql, stored-procedures

如何为 MySQL 存储过程添加默认值为 NULL 的参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T13:37:14.000

根据[这个答案](https://stackoverflow.com/a/982824/1319179)MySQL 不支持函数或存储过程中真正的“默认参数”。

[同一页面上的这个答案](https://stackoverflow.com/a/11404731/1319179)提供了一个可能适合您的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T13:38:40.350

任何带有变量和“case”的查询：-

```
BEGIN 
    DECLARE @NullValue:=Null;  
    SELECT 
    CASE WHEN Sum(myField) Is Null 
    THEN @NullValue ELSE Sum(myField)
    END AS Total 
    FROM table_name; 
END
; 
```

# java - Java枚举列表迭代器问题

> ID：14091075
> 
> 赞同：-1
> 
> 时间：2012-12-30T13:26:06.940
> 
> 标签：java, enums, iterator

```
package example;

import java.util.ArrayList;
import java.util.Iterator;

public class anaBolum {
    public static void main(String[] args) {
        ArrayList<IMeyveler> list = new ArrayList<>();
        list.add(new Muz());
        list.add(new Elma());

        Iterator it = list.iterator();
        while(it.hasNext()){
            it.next().fiyat() //compile error
        }
    }
} 
```

我`list.iterator()`用来访问列表元素。但是我不能`fiyat()`在迭代器中访问这个方法，因为我得到了编译错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T14:02:43.890

试试这个：

```
package javaaa;

import java.util.ArrayList;
import java.util.Iterator;

public class anaBolum {
    public static void main(String[] args) {
        IMeyveler muz = new Muz();
        muz.fiyat();// Work

        ArrayList<IMeyveler> list = new ArrayList<>();
        list.add(new Muz());
        list.add(new Elma());

        for(IMeyveler fruit : list)
        {
            if(fruit instanceof Muz)
            {
                System.out.println(fruit.fiyat());
            }
        }  
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T13:32:05.043

我假设您遇到了一些编译时错误。如果是这样，您需要将迭代器声明更改为`Iterator<IMeyveler> it = list.iterator();`

否则迭代器将不知道它处理的对象的类型。

```
public class anaBolum {
    public static void main(String[] args) {
        IMeyveler muz = new Muz();
        muz.fiyat();// Work

        ArrayList<IMeyveler> list = new ArrayList<>();
        list.add(new Muz());
        list.add(new Elma());

        Iterator<IMeyveler> it = list.iterator();
        while(it.hasNext()){
            System.out.println(it.next().fiyat());
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T13:32:17.063

你需要这样做

```
 while(it.hasNext()){
        Object obj = it.next() ;
        if( obj instanceof Muz ) {
          Muz muz = (Muz) obj ;
          muz.fiyat();
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T13:32:39.290

您的 CodeCompletion 没有出现，因为`.next()`返回 an `object`and not `IMeyveler`。您要么必须强制转换，要么以不同的方式迭代。

```
 System.out.println(((IMeyveler)it.next()).fiyat()); 
```

# java - 如何生成随机对而不在android中再次重复相同的对

> ID：14091076
> 
> 赞同：3
> 
> 时间：2012-12-30T13:26:07.647
> 
> 标签：java, random

这可能吗？

谁能告诉我在调用应用程序时如何生成随机对？

例如：我有 0-5 张图片，我有 10 个按钮，当我调用应用程序时，图片是这样配对的

```
 1-9=image0
        2-7=image3
        3-8=image2
        4-6=image4
        5-10=image1 
```

如果有人知道答案，请发布答案。当您创建游戏概念时，它对游戏非常有用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T13:31:17.307

例如，您可能应该使用 (Array)List 和 Collections 类来轻松地打乱/随机化列表。

例子：

```
// Create a List with all your items
String [] names = {"Tim", "Jack", "Jake", "Phill", "Will"};
List<String> namesList = new ArrayList<String>(Arrays.asList(names));

// Create a Random object
Random rand = new Random();

// Shuffle/Randomize the list
Collections.shuffle(namesList, rand); 
```

在 Collection.shuffle(list, random) 方法中，您不必添加 random 参数，但它可以让您控制种子或类似的东西。当然，如果您不使用 Collection.shuffle() 方法中的随机参数，则不必创建 Random 对象。

希望这可以帮助！

# wso2 - BAM 中介消息头/正文定义位置

> ID：14091079
> 
> 赞同：1
> 
> 时间：2012-12-30T13:26:47.190
> 
> 标签：wso2, wso2bam

WSO2 BAM 调解器中提到的流定义中的消息头和正文在哪里？在有效载荷数据中？或者可以改变吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T13:28:45.850

在 BAM 中介体中，消息体或报头必须在有效载荷数据中声明。

# php - 在复选框上放置 3 个值

> ID：14091085
> 
> 赞同：-1
> 
> 时间：2012-12-30T13:27:43.943
> 
> 标签：php

菜鸟在这里。有没有一种方法可以将 2 个数值和 1 个字母值放在一个复选框中，并使用 php.ini 显示它的所有值。

```
 <input name='ts[]' type='checkbox' value='40 | Tosilog' /> Tosilog

       $ts = $_POST['ts'];  
       $value = explode("|",$ts[0] );
       echo $value[0]; echo $value[1]; 
```

我只想添加另一个数值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T13:42:50.893

像这样的东西：？

```
<input name='ts[]' type='checkbox' value='40 | Tosilog | 1337' /> Tosilog
<?php   
$ts = $_POST['ts']; 
$value = explode("|",$ts[0] );  
echo $value[0]; 
echo $value[1];
echo $value[2]; 
```

但是，就像上面人们所说的那样，非常丑陋。可能想解释一下你想在这里帮凶什么。

# html - Spring 表单：输入 HTML5 必需属性

> ID：14091087
> 
> 赞同：1
> 
> 时间：2012-12-30T13:28:21.280
> 
> 标签：html, forms, spring

我正在使用 Spring 表单，并希望使用 Spring 表单似乎不支持的 HTML5 'required' 属性。

```
<form:input path="someinput" cssClass="required"/> 
```

我似乎做不到

```
<form:input path="someinput" cssClass="required" required="required"/> 
```

因为 Spring TLD 目前不支持此功能。

如果我想使用完整的 HTML5 规范，我似乎需要放弃 spring 表单

```
<input name="someinput" id="someinput" class="required" required="required"></input> 
```

有谁知道我如何使用 spring forms 3.1.3.RELEASE 实现所需的字段？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-19T22:02:15.577

只需在页面末尾添加一些 jquery

```
 <html>
    <body>
            <form:input path="someinput" id="someinput"/>
    </body>
    <script>
            $("#someinput").attr('required', ''); 
    </script>
    </html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T13:39:10.083

1.  如果您只是使用 default 提交表单`commandName`，那么您的方法是可以的。
2.  更好的解决方法：用 spring-form 编写表单并忘记所需的东西。然后找出真正为您生成的 html spring-form。编写自己的 html 并添加必填字段。

# jakarta-ee - glassfish 更新工具无法启动

> ID：14091088
> 
> 赞同：0
> 
> 时间：2012-12-30T13:28:26.873
> 
> 标签：jakarta-ee, windows-8, glassfish

我正在尝试遵循 Java EE 6 教程，但我在 updatetool 应用程序中遇到了一些问题。我在 Windows 8 下运行它，但它根本无法启动。

你能帮助我吗？

谢谢。

JB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T19:22:12.103

我有同样的问题。

最初防火墙是关闭的。然后我做了以下步骤：

1.  从我的电脑上卸载了python。
2.  卸载了glassfish。（在我的情况下，我还删除了文件夹：C:\glassfish4）
3.  关闭 AVG 防病毒保护（或者如果您有其他防病毒软件，也将其关闭）

再次开始安装 JEE6 SDK。那时一切正常。希望这可以帮助。

# jquery - 多个元素网格的轮播/滑块

> ID：14091090
> 
> 赞同：1
> 
> 时间：2012-12-30T13:28:29.883
> 
> 标签：jquery

我正在尝试制作一个类似于[此 IMDB 页面底部“喜欢此内容的人也喜欢”部分中的 jquery 轮播](http://www.imdb.com/title/tt0790724/)

我想我会使用[isotope](http://isotope.metafizzy.co/)和[rcarousel](http://ryrych.github.com/rcarousel/)，其中 isotope 会将我的所有项目以类似网格的格式对齐，我会使用 rcarousel 使用 AJAX 添加新网格并滑动它们。抱歉，我没有太多代码，而且我在开始这个项目时遇到了麻烦。请指出一个可以完成此任务的插件，或者让我知道我的方式是否可行。

我现在拥有的是这个，显然根本不起作用：

HTML：

```
<div id="reco" class="span4">
    <div class="reco-group">
        <div class="movie item-parent"><a title="Sin city" class="movie-link"><img src="images/1.jpg" /></a></div>
        <div class="movie item-parent"><a title="Annie Hall" class="movie-link"><img src="images/2.jpg" /></a></div>
        <div class="movie item-parent"><a title="Madagascar 3" class="movie-link"><img src="images/3.jpg" /></a> </div>
        <div class="movie item-parent"><a title="As Good As It Gets" class="movie-link"><img src="images/4.jpg" /></a></div>
    </div>
</div> 
```

jQuery：

```
$('#reco').rcarousel({
});

var $container = $('.reco-group');
$container.imagesLoaded(function() { 
    $container.isotope({
        itemSelector: '.movie',
        animationOptions: {
            duration: 750,
            easing: 'linear',
            queue: false
        },
        containerStyle:{
            position:'relative'
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:05:13.637

即使我发现[了这个](http://www.codeproject.com/Tips/452171/Simple-jQuery-Carousel-Matrix-2D-AJAX)。我使用[TinyCarousel](http://baijs.nl/tinycarousel/)插件来做到这一点。我将所有元素分组在一个特定的矩阵中，如下所示：

```
<div id="reco" class="span4">
    <a class="buttons prev" href="#">left</a>
        <div class="viewport">
            <ul class="overview">
                <li class="movie-group">
                    <span class="movie"><a title="Sin city" class="movie-link"><img src="images/1.jpg" /></a></span>
                    <span class="movie"><a title="Annie Hall" class="movie-link"><img src="images/2.jpg" /></a></span>
                    <span class="movie"><a title="Madagascar 3" class="movie-link"><img src="images/3.jpg" /></a></span>
                    <span class="movie"><a title="As Good As It Gets" class="movie-link"><img src="images/4.jpg" /></a></span>
                </li>
                <li class="movie-group">
                    <span class="movie"><a title="Sin city" class="movie-link"><img src="images/1.jpg" /></a></span>
                    <span class="movie"><a title="Annie Hall" class="movie-link"><img src="images/2.jpg" /></a></span>
                    <span class="movie"><a title="Madagascar 3" class="movie-link"><img src="images/3.jpg" /></a></span>
                    <span class="movie"><a title="As Good As It Gets" class="movie-link"><img src="images/4.jpg" /></a></span>
                </li>
            </ul>
        </div>
    <a class="buttons next" href="#">right</a>
</div> 
```

如插件网站的源代码所述，我包括了必要的 CSS 和 JS。还有一个简单的 jquery 行：

```
$('#reco').tinycarousel(); 
```

就是这样。希望它也对其他人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-29T09:34:54.203

我今天也想做同样的事情，当我搜索时，我来到了这个页面，但这个答案对我不起作用。下面给出了我是如何做到的。

我使用了 responsivecarousel：basilio.github.io/responsiveCarousel/#how-to-use

检查下面给出的示例。

```
<!DOCTYPE html>
<html>
    <head>
        <title>jquery grid carousel</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <script type="text/javascript" src="http://basilio.github.io/responsiveCarousel/js/responsiveCarousel.js"></script>
        <script>
            jQuery(document).ready(function($){
                $('.crsl-items').carousel();
            });
        </script>
        <style>
            img {
                width: 80px;
            }
        </style>
    </head>
    <body>
        <div id="NAV-ID" class="crsl-nav">
            <a href="#" class="previous">Previous</a>
            <a href="#" class="next">Next</a>
        </div>

        <div class="crsl-items" data-navigation="NAV-ID">
            <div class="crsl-wrap">
                <figure class="crsl-item">
                    <img src="http://basilio.github.io/responsiveCarousel/img/temp/sports.jpg">
                    <img src="http://basilio.github.io/responsiveCarousel/img/temp/sports.jpg"><br>
                    <img src="http://basilio.github.io/responsiveCarousel/img/temp/sports.jpg">
                    <img src="http://basilio.github.io/responsiveCarousel/img/temp/sports.jpg">
                </figure>
                <figure class="crsl-item">
                    <img src="http://basilio.github.io/responsiveCarousel/img/temp/nature.jpg">
                    <img src="http://basilio.github.io/responsiveCarousel/img/temp/nature.jpg"><br>
                    <img src="http://basilio.github.io/responsiveCarousel/img/temp/nature.jpg">
                    <img src="http://basilio.github.io/responsiveCarousel/img/temp/nature.jpg">
                </figure>
                <figure class="crsl-item">
                    <img src="http://basilio.github.io/responsiveCarousel/img/temp/food.jpg">
                    <img src="http://basilio.github.io/responsiveCarousel/img/temp/food.jpg"><br>
                    <img src="http://basilio.github.io/responsiveCarousel/img/temp/food.jpg">
                    <img src="http://basilio.github.io/responsiveCarousel/img/temp/food.jpg">
                </figure>
            </div>
        </div>
    </body>
</html> 
```

测试：http: [//jsfiddle.net/d59phwrt/](http://jsfiddle.net/d59phwrt/)

更新：

上一个解决方案的分页存在问题。所以我使用 owl-carousel 来做同样的事情。

[http://owlgraphic.com/owlcarousel/index.html#how-to](http://owlgraphic.com/owlcarousel/index.html#how-to)

此解决方案优于上述解决方案。示例代码如下。

```
<div id="owl-demo" class="owl-carousel">

      <div class="item">
          <img src="http://isc.stuorg.iastate.edu/wp-content/uploads/sample.jpg" />
          <img src="http://isc.stuorg.iastate.edu/wp-content/uploads/sample.jpg" /><br>
          <img src="http://isc.stuorg.iastate.edu/wp-content/uploads/sample.jpg" />
          <img src="http://isc.stuorg.iastate.edu/wp-content/uploads/sample.jpg" />
      </div>
      <div class="item"><h1>2</h1></div>
      <div class="item"><h1>3</h1></div>
      <div class="item"><h1>4</h1></div>

    </div>
    <div class="customNavigation">
      <a class="btn prev">Previous</a>
      <a class="btn next">Next</a>
      <a class="btn play">Autoplay</a>
      <a class="btn stop">Stop</a>
    </div>

    <script src="../assets/js/jquery-1.9.1.min.js"></script> 
    <script src="../owl-carousel/owl.carousel.js"></script>

    <!-- Demo -->

    <style>
    #owl-demo .item{
        background: #3fbf79;
        padding: 30px 0px;
        margin: 10px;
        color: #FFF;
        -webkit-border-radius: 3px;
        -moz-border-radius: 3px;
        border-radius: 3px;
        text-align: center;
    }
    .customNavigation{
      text-align: center;
    }
    .customNavigation a{
      -webkit-user-select: none;
      -khtml-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
    }
    </style>

    <script>
    $(document).ready(function() {

      var owl = $("#owl-demo");

      owl.owlCarousel({

      items : 1, //10 items above 1000px browser width
      itemsDesktop : [1000,5], //5 items between 1000px and 901px
      itemsDesktopSmall : [900,3], // 3 items betweem 900px and 601px
      itemsTablet: [600,2], //2 items between 600 and 0;
      itemsMobile : false, // itemsMobile disabled - inherit from itemsTablet option
      pagination : false

      });

      // Custom Navigation Events
      $(".next").click(function(){
        owl.trigger('owl.next');
      })
      $(".prev").click(function(){
        owl.trigger('owl.prev');
      })
      $(".play").click(function(){
        owl.trigger('owl.play',1000);
      })
      $(".stop").click(function(){
        owl.trigger('owl.stop');
      })

    });
    </script> 
```

# sql-server - Sql Server CE 是否支持 MERGE 语句

> ID：14091092
> 
> 赞同：0
> 
> 时间：2012-12-30T13:28:51.153
> 
> 标签：sql-server, sql-server-ce

我正在尝试`MERGE`对数据库运行查询，`Sql Server CE`但它抛出了错误：

```
There was an error parsing the query. ... 
```

而相同的查询在`Sql Server`. 根本`merge statement`不**支持**`Sql Server CE`？_ 如果是这样，是否有任何等效的声明`CE`？

```
MERGE [Books] as T 
USING(SELECT 1 S) as S 
ON T.Category ='Fiction' AND T.Lang='En'
WHEN MATCHED THEN
UPDATE SET Title=@Title
WHEN NOT MATCHED THEN 
INSERT (Id , Title , Lang , Category) VALUES (@Id , @Title , @Lang , @Category); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T14:04:56.823

不，SQL Server Compact 不支持 MERGE，您必须结合使用 UPDATE 和 INSERT

# mysql - 插入的行消失

> ID：14091093
> 
> 赞同：0
> 
> 时间：2012-12-30T13:28:57.103
> 
> 标签：mysql, auto-increment

我们在 wiki 站点上遇到问题（使用 mysql 5.5.9）。有一张`text`表，还有一张`revision`表，其中`revision.rev_text_id`有一个外键`text.old_id`（没有新的，问维基媒体）。

有一个`INSERT INTO text...`, then它使用从前一个查询中收到`INSERT INTO revision...`的新`old_id`/ 。`rev_text_id`

第二个查询有效，第一个 - 我不确定。事情是在整个事情完成之后（还有几十个查询），`revision`行就在那里，在它的列中有一个新的值`rev_text_id`。

但是，该`text`行不存在。有趣的事情 -`text`表自动增量前进，因为下一个动作跳过它的值`old_id`，缺失值匹配我们在`revision`表中的值。

尽管实际上并未插入行，但第一个查询是否有可能使自动增量索引提前？这是什么原因造成的？

**加法**

当我从日志中复制`INSERT INTO text`查询并在服务器上运行时 - 它执行得很好（行已添加到表中）

**编辑**

完整的查询是：

```
INSERT INTO text (old_id,old_text,old_flags) VALUES (NULL,'{text input by user}','utf8');
INSERT INTO `revision` (rev_id,rev_page,rev_text_id,rev_comment,rev_minor_edit,rev_user,rev_user_text,rev_timestamp,rev_deleted,rev_len,rev_parent_id,rev_sha1) VALUES (NULL,'{pageId}','{textId}','{comment}','{isMinor}','{userId}','{userName}','{TS}','{isDeleted}','{length}','{parentRevision}','{HASH}')" 
```

此外，如果相关，`text`表正在运行 InnoDB 并且`revision`是 MyISAM。

**编辑**

来自日志的更多信息：

错误的请求

```
BEGIN
INSERT  INTO `text`
INSERT  INTO `revision`
UPDATE  `page` SET page_latest
INSERT  INTO `recentchanges`
INSERT  INTO `cu_changes`
SELECT  wl_user  FROM `watchlist` 
SELECT  user_id  FROM `user` 
SELECT  user_id,user_name,user_real_name,user_password,user_newpassword,user_newpass_time,user_email,user_touched,use
SELECT  ug_group  FROM `user_groups` 
SELECT  up_property,up_value  FROM `user_properties` 
SELECT  user_id,user_name,user_real_name,user_password,user_newpassword,user_newpass_time,user_email,user_touched,use
SELECT  ug_group  FROM `user_groups` 
SELECT  up_property,up_value  FROM `user_properties` 
SELECT  lc_value  FROM `l10n_cache` 
SELECT  lc_value  FROM `l10n_cache`
... 
```

还有几个`SELECT`s。活动暂停 2 秒，然后日志中有来自新用户的命令，不再有来自该用户的查询（在同一线程上）。

同一用户对不同页面的编辑，进展顺利：

```
BEGIN
INSERT INTO `text`
INSERT INTO `revision`
UPDATE `page` SET page_latest
INSERT INTO `recentchanges`
INSERT INTO `cu_changes`
SELECT wl_user  FROM `watchlist` 
COMMIT
BEGIN
UPDATE `watchlist` SET wl_notificationtimestamp
COMMIT
BEGIN
SELECT user_id  FROM `user`
SELECT user_id,user_name,user_real_name,user_password,user_newpasswo
SELECT ug_group  FROM `user_groups` 
SELECT up_property,up_value  FROM `user_properties` 
SELECT *  FROM `user` 
SELECT up_property,up_value  FROM `user_properties` 
INSERT INTO `logging`
UPDATE `user` SET user_editcount=user_editcount+1
SELECT 1  FROM `user` 
UPDATE `user` SET user_touched = '20121227211743'
COMMIT 
```

等等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T07:27:44.583

> 尽管实际上并未插入行，但第一个查询是否有可能使自动增量索引提前？这是什么原因造成的？

是的，当您尝试在具有 auto_increment 列的表中插入一行时，插入将失败，但 auto_increment 值将增加 1。

如果您决定将表转换为 InnoDB，我建议您使用事务。这样，如果一个查询失败，它们都不会被插入。

# c# - Android通过tcp压缩和发送图像

> ID：14091094
> 
> 赞同：0
> 
> 时间：2012-12-30T13:28:58.573
> 
> 标签：c#, java, android, tcp, camera

我正在尝试从相机捕获预览图像，然后通过 wifi 将其发送到我的计算机。

过程如下：

在我的手机上：启动相机预览，然后压缩并通过 tcp 连接发送。在我的电脑上：接收压缩数据并保存照片。

我在移动设备上使用此代码：

```
try {           
    ByteArrayOutputStream outstr = new ByteArrayOutputStream();

    Camera.Parameters parameters = camera.getParameters();
    Size size = parameters.getPreviewSize();
    YuvImage image = new YuvImage(data, parameters.getPreviewFormat(), size.width, size.height, null);
    image.compressToJpeg(new Rect(0, 0, image.getWidth(), image.getHeight()), 100, outstr);

    out.writeBytes("DATA|" + outstr.size() + "\n");
    out.flush();
    out.write(outstr.toByteArray());
    out.flush();

    } catch (IOException e) {
        t.append("ER: " + e.getMessage());
    } 
```

`DataOutputStream`在方法中创建out 的位置`onCreate`：

```
tcp = new Socket("192.168.0.12", 6996);         
in = new BufferedReader(new InputStreamReader(tcp.getInputStream()));
out = new DataOutputStream(tcp.getOutputStream()); 
```

然后在我的电脑上使用这个代码：

```
 StreamReader sr = new StreamReader(client.GetStream());
    string line = sr.ReadLine();

    if(line.StartsWith("DATA"))
    {
        piccount++;
        int size = Convert.ToInt32(line.Substring(5));
        Console.WriteLine("PHOTO, SIZE: " + size + ", #: " + piccount);
        byte[] data = new byte[size];

        client.GetStream().Read(data, 0, size);

        FileStream fs = System.IO.File.Create("C:/Users/M/photo"+piccount+".jpeg"); 
        fs.Write(data, 0, data.Length);
        fs.Flush();
        fs.Close();
    } 
```

问题是，一些传输的图片是好的，但其中一些已经损坏。问题可能出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T13:39:59.230

问题出在这一行`client.GetStream().Read(data, 0, size);`。`Stream.Read`不能确保它会准确读取`size`字节。您应该检查它的返回值并继续读取，直到读取所有字节。

[http://msdn.microsoft.com/en-us/library/system.io.stream.read.aspx](http://msdn.microsoft.com/en-us/library/system.io.stream.read.aspx)

> **返回值**
> 
> 读入缓冲区的总字节数。如果当前没有那么多字节可用，则该字节数可能小于请求的字节数，如果已到达流的末尾，则该字节数可能为零 (0)。

如果您的意图是阅读整个流，您可以使用以下代码：

```
using (FileStream fs = System.IO.File.Create("C:/Users/M/photo" + piccount + ".jpeg"))
{
    client.GetStream().CopyTo(fs);
} 
```

# xslt - xsl 用另一个链接替换一个链接

> ID：14091098
> 
> 赞同：0
> 
> 时间：2012-12-30T13:29:25.580
> 
> 标签：xslt

我管理的网站由一个组织（即 www.old.com）拥有，现在已被一个新组织（即 www.new.com）取代。我的问题是，一些链接仍然指向我们在网站上使用的一些图像上的旧组织。我想知道是否有办法使用 xsl将[http://www.old.com](http://www.old.com)替换为[http://www.new.com 。](http://www.new.com)

我的想法是这样做，但不确定它是否会起作用..

```
 <xsl:template match="image">
<xsl:param name ="old" value='http://www.old.com'/>
 <xsl:param name ="new" value='http://www.new.com'/>
  <xsl:choose>
          <xsl:when test="contains(@xlink:href,$old)">
            <xsl:attribute name="xlink:href">
              <xsl:value-of select="replace(@xlink:href, $old, $new)">
            </xsl:attribute>
          </xsl:when>
          <xsl:otherwise>
            <xsl:attribute name="xlink:href">
              <xsl:value-of select="@xlink:href"/>
            </xsl:attribute>
          </xsl:otherwise>
        </xsl:choose>
</xsl:template> 
```

xml看起来像这样..

```
<book title="Harry Potter">
 <description
 xlink:type="simple"
  xlink:href="http://www.old.com/images/HPotter.gif"
  xlink:show="new">
 As his fifth year at Hogwarts School of Witchcraft and
 Wizardry approaches, 15-year-old Harry Potter is.......
  </description>
</book> 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T15:40:45.923

假设`apply-templates`遍历所有节点（参见下面的第一个模板），以下应该有效：

```
<xsl:template match="node()|@*">
  <xsl:copy>
    <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="@xlink:href">
  <xsl:param name ="old">http://www.old.com</xsl:param>
  <xsl:param name ="new">http://www.new.com</xsl:param>
  <xsl:attribute name="xlink:href">
    <xsl:value-of select="replace(., $old, $new)"/>
  </xsl:attribute>
</xsl:template> 
```

# jquery - 在滚动的顶部和底部移动具有不同位置的 div

> ID：14091100
> 
> 赞同：0
> 
> 时间：2012-12-30T13:29:47.217
> 
> 标签：jquery

我有这个网站，我希望火箭在页面底部登陆月球。滚动时它必须跟随网站，但在页面底部它必须向下移动才能登陆月球。有人有想法吗？我尝试了几件事，但无法修复它。

[http://www.websoy.nl/PROMO-WEBSITE/](http://www.websoy.nl/PROMO-WEBSITE/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T14:16:53.247

你可以通过监听 onscroll 事件来改变炸弹的位置

```
<html>
    <head>
        <style>
            #outer {
                height: 100%;
                width: 100%;
                overflow: auto;
            }
            #inner {
                height: 3000px;
                width: 1000px;
                position: relative;
            }
            #bomb {
                background-color: black;
                width: 50px;
                height: 50px;
                position: absolute;
                left: 450px;
                top: 30px;
                z-index: 1000;
            }
            #moon {
                width: 100%;
                height: 100px;
                background-color: yellow;
                position: absolute;
                left: 0px;
                top: 2900px;
            }
        </style>
        <script type="text/javascript">
            var animaTimer;
            function updatePosition () {
                var outer = document.getElementById('outer'),
                    bomb = document.getElementById('bomb'),
                    top = outer.scrollHeight * (outer.scrollTop / (outer.scrollHeight - outer.clientHeight)) + 30 - 50;
                top = top < 30? 30 : top > 2900? 2900 : top;
                // clear old timer
                if (animaTimer)
                    clearInterval(animaTimer);
                // start move
                moveBomb (bomb, top);
            }
            function moveBomb (bomb, pos) {
                animaTimer = setInterval (function () {
                    // bpos: current position of bomb
                    // mov: the target position
                    var bpos = parseInt (bomb.offsetTop),
                        mov = (pos - bpos) / 6;

                    if (mov <= 2 && mov >= -2) { // only 2px left
                        bomb.style.top = pos + 'px';
                        clearInterval(animaTimer);
                    } else {
                        bomb.style.top = bpos + mov + 'px';
                    }
                }, 50);
            }
        </script>
    </head>
    <body>
        <div id="outer" onscroll="updatePosition();">
            <div id="inner">
                <div id="bomb"></div>
                <div id="moon"></div>
            </div>
        </div>
    </body>
</html> 
```

# c - 编译器/语言运行时与中间件

> ID：14091104
> 
> 赞同：3
> 
> 时间：2012-12-30T13:30:22.473
> 
> 标签：c, compiler-construction, operating-system, runtime, middleware

语言运行时做了哪些操作系统不做的具体操作？语言运行时与中间件有何不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T13:42:55.700

这取决于操作系统和运行时。[libc](http://en.wikipedia.org/wiki/Libc)是语言运行时的一个很好的例子，维基百科上的链接文章很好地概述了它的作用。通常，语言运行时的目标是提供标准基本功能的实现，这些功能可能在语言支持的操作系统之间以不同方式实现，或者非常常见但操作系统不提供的功能。

中间件是一个非常笼统的概念，但它只是指作为抽象层放置在两个系统之间的软件。在某些情况下，您可以将语言运行时视为一种中间件。

# c++ - 如何在不按下按钮的情况下调用函数

> ID：14091105
> 
> 赞同：0
> 
> 时间：2012-12-30T13:30:22.550
> 
> 标签：c++, sleep

我有一个家庭作业要创建一个游戏。所以我创建了一个游戏，它生成随机数，显示它们，然后几秒钟后数字消失，用户必须按降序输入它们。游戏运行良好，所有输出都是正确的......但问题是我创建了不同的函数来创建数字、排列它们、接受......并且每次调用函数时我都必须按几次回车键。

有没有一种方法可以在不按任何键的情况下调用这些函数以使程序在不按回车键的情况下运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T14:34:04.400

从标准输入中提取[字符而不等待按下回车键](https://stackoverflow.com/questions/421860/c-c-capture-characters-from-standard-input-without-waiting-for-enter-to-be-pr)

> 这在纯 C++ 中是不可移植的，因为它过多地依赖于可能与标准输入连接的终端（它们通常是行缓冲的）。但是，您可以为此使用库：
> 
> 1.  conio 可用于 Windows 编译器。使用函数 _getch() 给你一个字符，而无需等待回车键。我不是经常使用 Windows 开发人员，但我见过我的同学只包含 conio.h 并使用它。参见维基百科的 conio.h。它列出了在 Visual C++ 中被声明为弃用的 getch。
> 2.  curses 可用于 linux，兼容的 curses 实现也可用于 Windows。它还有一个 getch 功能。（尝试使用 man getch 查看它的联机帮助页）。参见维基百科上的诅咒。
> 
> 如果您的目标是跨平台兼容性，我建议您使用 curses。也就是说，我确信您可以使用某些功能来关闭线路缓冲（我相信这称为“原始模式”，而不是“熟模式”（查看 man stty））。如果我没记错的话，Curses 会以便携的方式为你处理。

# algebra - 获取关节方向向量

> ID：14091109
> 
> 赞同：1
> 
> 时间：2012-12-30T13:31:00.893
> 
> 标签：algebra, kinect-sdk

每个人。

我正在尝试使用 Microsoft Kinect API 逐帧记录一个人的动作。为此，我保存了所有关节的位置，此外我还想获得关节矢量的方向。我已经看到 API 有一些关于四元数矩阵的联合方向，但我不知道如何使用它来获取方向，或者我应该简单地从坐标计算方向？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T21:46:57.270

感谢 Carmine Si 的回答 - MSFTMicrosoft (MSFT)

“要确定关节行进的方向，那么您应该只根据帧之间的点位置计算矢量。通常其他值用于从不同的坐标空间映射您的骨架，以便您可以执行 Avateering 示例之类的操作。 "

# jquery - 将悬停添加到 .live('click', function ()

> ID：14091110
> 
> 赞同：2
> 
> 时间：2012-12-30T13:31:01.223
> 
> 标签：jquery

此功能显示**箭头-img-down**（“显示”图标）。当我点击它打开滑动 div 然后 img 变成**arrow-img-up**（一个“隐藏”图标）

我想添加到这个 img 替换 .src 函数，并悬停在当前 img 上，如下所示：

```
$(".showhide").live('click', function () {
    if ($(this).attr("class") == "showhide") {
        this.src = this.src.replace("img/show_btn.png", "img/hide_btn.png");}
         else {
             this.src = this.src.replace("img/hide_btn.png", "img/show_btn.png");}

    $(this).toggleClass("img/show_btn.png");
}); 
```

我怎样才能添加它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T13:36:50.373

这是您的代码的改进版本：

```
$( document ).on( 'click mouseenter mouseleave', '.showhide', function () {
    if ( $( this ).hasClass( 'showhide' ) ) {
        this.src = this.src.replace( 'img/show_btn.png', 'img/hide_btn.png' );
    } else {
        this.src = this.src.replace( 'img/hide_btn.png', 'img/show_btn.png' );
    }
} ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T13:34:14.917

添加悬停词。

```
$(".showhide").live('click hover', function () {
    if ($(this).attr("class") == "showhide") {
        this.src = this.src.replace("img/show_btn.png", "img/hide_btn.png");}
         else {
             this.src = this.src.replace("img/hide_btn.png", "img/show_btn.png");}

    $(this).toggleClass("img/show_btn.png");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T13:40:48.007

```
$('.showhide').on('click hover', function (e) {
    // Your code here
    // Inside here you can use e.type to find out whether it was a
    // "click", "hover", "mouseup", etc...
}); 
```

代替`.on`, 您可以使用`.bind`或`.live`。最好使用`.on`因为`.live`并且`.bind`正在折旧。

# drupal - 创建自定义 aegir 注册表单

> ID：14091112
> 
> 赞同：0
> 
> 时间：2012-12-30T13:31:15.223
> 
> 标签：drupal, hosting, provisioning

我想在drupal中为aegir供应系统创建一个自定义注册表单，一旦用户填写表格并提交，我希望在表单中指定的域名和aegir执行的所有其他挂钩上创建网站同时创建一个网站。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T17:40:16.403

我认为它应该开箱即用。

如果没有，那么重量级的解决方案是除了安装 Aegir 之外，还安装[Ubercart](http://drupal.org/project/ubercart)和[Aegir-Ubercart 集成模块。](http://drupal.org/project/uc_hosting)然后，您必须设置一个适当的产品购物车，并为每个产品提供托管功能，从而允许自动创建站点。

# math - 这个系统是线性的吗？我可以申请crammer吗？

> ID：14091114
> 
> 赞同：-2
> 
> 时间：2012-12-30T13:31:24.093
> 
> 标签：math, machine-learning, linear-algebra, linear-regression

有这个网站[http://www.diabloprogress.com/items/](http://www.diabloprogress.com/items/)有它自己的标准（我不知道）计算每个项目的评级。如果这些标准或权重是对还是错，我不感兴趣。

但是问题是我是否可以从每个项目中获取数据并制作 3x3 矩阵，找到每个矩阵的 det 并使用 Crammer 计算 3 个权重，如 x = Det(x)/D、y = Det(y)/D 等.

或者换句话说，该系统是否是线性的？

进一步来说

我会对属性感兴趣：“每秒伤害”，“主要属性（力量或敏捷或智力，但不是活力”，“暴击乘数”

或 3x3 系统

```
1456x + 538y + 291z = 2909
1390x + 560y + 300z = 2898
1433x + 527y + 294z = 2871 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T14:01:07.050

您应该提供一个显示具有三个属性的项目列表的实际链接。你不能指望人们会猜测“每秒伤害”对应于网站上的“武器 DPS”。

您始终可以建立一个 3x3 线性系统并根据 3 个属性表示 3 个分数。但是，如果您选择不同的 3 个项目，您计算的权重可能会给您不切实际的分数。

您要做的是将[线性回归](http://en.wikipedia.org/wiki/Linear_regression)应用于一组 N 个项目和 M 个属性（M < N）。这将为您提供 M 个权重的向量，当乘以项目属性向量时，将估计项目的分数。估计不会是完美的，但会是“最小误差”。

这是一种简单的机器学习形式。要了解更多信息，您还可以尝试 Coursera 上的[机器学习](https://class.coursera.org/ml/lecture/preview)讲座。

如果您发现线性回归不能为您提供现实的估计，则需要升级到更复杂的模型。

# android - Android 标签布局教程-弃用的东西-

> ID：14091117
> 
> 赞同：1
> 
> 时间：2012-12-30T13:31:30.007
> 
> 标签：android, layout, activitygroup

我继续做[这个](http://www.androidhive.info/2011/08/android-tab-layout-tutorial/)教程。在本教程中，这个人使用了这段代码；

```
public class AndroidTabLayoutActivity extends TabActivity { 
```

在此代码中`TabActivity`已弃用。然后我用`extends ActivityGroup`了，它也被弃用了。我搜索并找到了`extends Fragment`，但我无法申请`extends Fragment`教程的代码。那么我该如何解决呢？

# php - 从 2 个表中选择（Kohana 框架）

> ID：14091118
> 
> 赞同：0
> 
> 时间：2012-12-30T13:31:32.767
> 
> 标签：php, mysql, kohana

我有 2 个具有相同数据结构的表。

前任：

```
table 1 (id, pay_amount, package, date)
table 2 (id, pay_amount, package, date) 
```

如何从两个表中获取 Kohana 框架数据并按天计算结果？另外，我如何对字符串进行 substr 并对字符串的其余部分求和（这是一个数字？查看示例中的 package_credit_ 行）。

例如，如果我有这些数据：

```
Table1: 
(1, 200, "package_credit_300", "12.12.12 12:02:34"), 
(2, 50, "package_credit_50", "12.12.12 15:17:02"), 
(2, 50, "package_credit_50", "13.12.12 16:12:12")

Table2: 
(1, 50, "package_credit_50", "13.12.12 12:02:34"), 
(2, 50, "package_credit_50", "13.12.12 15:17:02"), 
(2, 200, "package_credit_300", "14.12.12 16:12:12") 
```

我想得到类似的东西：

```
Date: 12.12.12 - Credit: 350 - Paid: 250
Date: 13.12.12 - Credit: 150 - Paid: 150
Date: 14.12.12 - Credit: 300 - Paid: 200 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T14:44:20.050

尝试这个

```
 SELECT Substring(t.`date`,1,8)                        AS dates, 
   Sum(Cast(Substring(t.`package`, 16) AS UNSIGNED)) AS `Credit`, 
   Sum(t.pay_amount)                                 AS `Paid` 
    FROM   (SELECT * 
    FROM   table1 
    UNION 
    SELECT * 
    FROM   table2) AS `t` 
    GROUP  BY dates 
    ORDER  BY dates ASC 
```

[**在这里看演示**](http://sqlfiddle.com/#!2/1807e/15)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T14:11:44.057

这不能在 Kohana 中使用 ORM 或 ActiveRecord 来完成。您需要执行此自定义 sql。

```
SELECT Date(t.`date`)                                    AS `Date`, 
       Sum(Cast(Substring(t.`package`, 16) AS UNSIGNED)) AS `Credit`, 
       Sum(t.pay_amount)                                 AS `Paid` 
FROM   (SELECT * 
        FROM   table1 
        UNION 
        SELECT * 
        FROM   table2) AS `t` 
GROUP  BY `Date` 
ORDER  BY `Date` ASC 
```

# android - 为什么当视图被另一个布局隐藏时，EditText、Button 等的文本会重置？我怎样才能让他们保留文字？

> ID：14091120
> 
> 赞同：0
> 
> 时间：2012-12-30T13:31:59.740
> 
> 标签：android

基本上

*   我有两个布局 activity_main_layout.xml 以及 layout2.xml

*   我使用**getActionbar().newTab()**方法在 ActionBar 上创建了两个选项卡

*   我在**activity_main_layout.xml**（第一个选项卡）中有一个**Button**和一个文本框（**EditText ）**

***   按钮和文本框都有一个**动态**输入的文本：“Test 123”

    *   选择选项卡 2 时，我有一个代码声明：**setContentView(R.layout.layout2)**以便它显示第二个布局，并且选项卡 1 类似：**setContentView(R.layout.activity_main)**

    重新选择选项卡 1 时，动态输入的文本“Test 123”消失了，我只剩下在 XML 中设计时设置的文本。因此，我目前被迫在选择选项卡之前保存 Buttons 和 EditTexts 的内容，并在选择选项卡后恢复它们。** 

 **我认为这不是正确的做法。我已经在使用**onSaveInstanceState()**和**onRestoreInstanceState()**以及**savedInstanceState.putXX 和 getXX**等来在屏幕旋转时保存内容，但它似乎不适用于当前问题。到目前为止，我一直无法找到答案。请问有人有什么线索吗？任何回应将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T14:04:20.410

除了“向大师学习”状态之外，还有更好的方法来构建这个结构（页面适配器/页面查看器/片段......）它应该仍然可以正确使用您的 Bundle saveInstanceState 正常工作。

你可以发布你的代码吗？

看到代码后编辑：

您可能需要在 onCreate() 中检查您的 Bundle savedInstanceState。这看起来有点像

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
         [...]
     if(savedInstanceState != null){
       //restore your stuff from the Bundle
      }else{
       // there is nothing to restore, so (down)load your data.
       }
    } 
```

您可以在[https://stackoverflow.com/a/6722854/1868384附近找到一个很好的详细解释](https://stackoverflow.com/a/6722854/1868384)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T21:49:02.703

这是我的代码：

**活动主.xml：**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<Button
    android:id="@+id/btn_One"
    android:layout_width="100dp"
    android:layout_height="wrap_content"
    android:layout_weight="1.70"
    android:text="Activity_main.xml - Design Time Text"
    android:textSize="12sp"
    android:onClick="btnOne_OnClick"
    android:textStyle="normal" /> 
```

**布局2.xml：**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

            <Button
                android:id="@+id/btn_Two"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="Layout2.xml - Design Time Text"
                android:textSize="12sp"
                android:textStyle="normal" /> 
```

在主代码中，请注意注释：

```
public class MainActivity extends Activity implements ActionBar.TabListener {

ActionBar.Tab Tab_1 = null, Tab_2 = null;
Button btn_One = null, btnTwo = null;

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ///////////////////////////////////////////////////////////////////
    ActionBar actionbar = (ActionBar) getActionBar();
    actionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    Tab_1 = actionbar.newTab().setText("Tab 1");
    Tab_2 = actionbar.newTab().setText("Tab 2");

    Tab_1.setTag(1);
    Tab_2.setTag(2);

    Tab_1.setTabListener(this);
    Tab_2.setTabListener(this);        

    actionbar.addTab(Tab_1);
    actionbar.addTab(Tab_2);
    ///////////////////////////////////////////////////////////////////

    btn_One = (Button)this.findViewById(R.id.btn_One);
}

public void btnOne_OnClick(View v) {
    ((Button)v).setText("Clicked");
    btn_One = ((Button)v);
}

@Override
public void onTabReselected(Tab tab, FragmentTransaction ft) {}

// Here is what the problem is:
// After you click btn_one, the text changes to "Clicked" - good! - however
// after Tab 1 gets reselected, the text off btn_One (btn_One) gets reset back to the one
// set in design time: "Activity_main.xml - Design Time Text", so the "Clicked" text disappears
// The interesting thing is, when you rotate the screen, the text gets re-initialized to "Clicked" and that's
// because of onRestoreInstanceState(). So it looks like when a tab gets reselected, the design time screen
// gets re-drawn and onRestoreInstanceState doesn't get recalled.
// My "workaround" for the above issue would be to create a global 
// "Bundle" poiner and pass the address of the one from onSaveInstanceState(Bundle savedInstanceState)
// to the global Bundle pointer and then call onRestoreInstanceState(*the_global_bundle_pointer*) 
// when a tab gets reselected so that it restores the state.

@Override
public void onTabSelected(Tab tab, FragmentTransaction ft) {

    int selectedTab = (Integer) tab.getTag();

    if (selectedTab == 1) this.setContentView(R.layout.activity_main);
    if (selectedTab == 2) this.setContentView(R.layout.layout2);

}

@Override
public void onTabUnselected(Tab tab, FragmentTransaction ft) {}

@Override
public void onSaveInstanceState(Bundle savedInstanceState) 
{
  if (btn_One != null) savedInstanceState.putString("btn_One", btn_One.getText().toString());

  super.onSaveInstanceState(savedInstanceState);  
}  

// When the instance is restored, reload all data
@Override  
public void onRestoreInstanceState(Bundle savedInstanceState) 
{  
    super.onRestoreInstanceState(savedInstanceState);

    if (btn_One != null) btn_One.setText(savedInstanceState.getString("btn_One").toString());  
} 
```

}

另外，我说两个选项卡的原因是我可以以最简单的方式演示问题，以便人们可以理解我要解决的问题。我的真实项目使用了两个以上的选项卡。

对于上述问题，我的“**解决方法”是创建一个全局“Bundle”指针，并将该指针的地址从****onSaveInstanceState(Bundle savedInstanceState)**传递给全局 Bundle 指针，然后在重新选择选项卡时调用**onRestoreInstanceState** (*the_global_bundle_pointer*)使其恢复状态。

你怎么看？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T07:51:41.833

谢谢你们俩。事实证明，对于 Android，一旦将新的内容布局设置为 Activity，现有的 UI 元素（如文本框、先前布局的按钮等）将不再可用，因此尝试访问它们将导致访问冲突。设置内容布局后，UI 元素似乎是从头开始重建的，因此会丢失所有数据。嗯，这就是我个人注意到的，而且这似乎是一种默认行为。我不知道这种行为是否可以改变。

我制作了自己的“自定义解决方案”。我所做的只是创建一个新类，其中包含一堆数据成员。每次我为 Activity 设置新内容时，例如当我在单击选项卡或旋转设备 (onSaveInstance) 时应用布局时，我会保存/恢复此类中的值。我曾经使用过 Bundle putInt、putString、putParcelable 等，但我决定采用不同的方法。以我的方式，我处于控制之中，并且我**确切地**知道代码发生了什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T13:38:09.413

如果您只有 2 个选项卡，为什么不使用页面适配器？在您更改手机位置或退出应用程序之前，您不会丢失任何信息。

基本上是这样的（我把我的一个代码给你了）。

注意：我使用数据包 ShelockActivity 为 android > 2.0 设置 tabsmenu

**主类**：

```
public class MainClass extends SherlockActivity implements ActionBar.TabListener {
ViewPager myPager;
AdapterClass adapter;
Context con = null;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    con = this.getBaseContext();
    //Restore info in case flip mobile      
    final Myobject data = (Myobject) getLastNonConfigurationInstance();     
    Bundle extras = getIntent().getExtras(); 

   //Tab bar
    getSupportActionBar().setDisplayShowHomeEnabled(false);
    getSupportActionBar().setDisplayShowTitleEnabled(false);
    getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    //loop for add more
    ActionBar.Tab tab = getSupportActionBar().newTab();
    tab.setText("text tab");

            if (data != null) {
            getdatatoyourobject(data);
        }
    myPager = (ViewPager) findViewById(R.id.panelpager);    
    myPager.setAdapter(adapter);    
    myPager.setOnPageChangeListener(new OnPageChangeListener() {
          @Override
          public void onPageSelected(int index) {
              getSupportActionBar().setSelectedNavigationItem(index);            
          }
    adapter = new AdapterClass(Parameters for your adapterclass);

        @Override
        public void onPageScrollStateChanged(int arg0) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onPageScrolled(int arg0, float arg1, int arg2) {
            // TODO Auto-generated method stub

        }

    });
}
}
@Override
public void onTabSelected(Tab tab, FragmentTransaction ft) {
    // TODO Auto-generated method stub
        myPager.setCurrentItem(tab.getPosition(),true);         
}
@Override
public void onTabUnselected(Tab tab, FragmentTransaction ft) {
    // TODO Auto-generated method stub

}
@Override
public void onTabReselected(Tab tab, FragmentTransaction ft) {
    // TODO Auto-generated method stub

}
@Override
public Object onRetainNonConfigurationInstance() {
    final Myobject a = new Myobject();
    return a;       
}

public class Myobject {
    Type variable = adapter.variable; //do for all variables to restore     
}

public void getdatatoyourobject(Myobject a){
    adapter.variable = a.variable;    //do for all variables to restore     
}
} 
```

**适配器类**：

```
 public class Adapterclass extends PagerAdapter {

  public int getCount() {
      return 2; //NUMBER OF PAGES
  }  

  public Adapterclass () {      
  }  

 public View view = null; //create rest of variables to restore as public

 public Object instantiateItem(View collection, int position) {

  LayoutInflater inflater = (LayoutInflater) collection.getContext()
          .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

  switch (position) {
  case 0:
      view = inflater.inflate(R.layout.page1, null);
       //bla bla bla
       break;
//do more cases (pages)
  }
      ((ViewPager) collection).addView(view, 0);

     return view;
 }

 @Override
 public void destroyItem(View arg0, int arg1, Object arg2) {
      ((ViewPager) arg0).removeView((View) arg2);

  }

  @Override
  public boolean isViewFromObject(View arg0, Object arg1) {
      return arg0 == ((View) arg1);

  }

  @Override
  public Parcelable saveState() {
      return null;
  }
} 
```

**主.XML：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

<android.support.v4.view.ViewPager
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/panelpager"/> 
```**

# verilog - 什么是 ”？？” 在 Verilog 案例中？

> ID：14091123
> 
> 赞同：2
> 
> 时间：2012-12-30T13:32:14.390
> 
> 标签：verilog, synthesis

我在下面有一个模块：

```
module bai1c(a, b0, b1, b2, b3, c);
    input [2:0] a;
    input [3:0] b0, b1, b2, b3;
    output reg[3:0] c;

    always @(a or b0 or b1 or b2 or b3) begin
        casez(a)
            3'b000: c = b0;
            3'b001: c = b1;
            3'b010: c = b2;
            3'b011: c = b3;
            3'b1??: c = 4'b0000;
        endcase
    end
endmodule 
```

会合成什么样的电路？什么时候`3'b1??`出现这种情况？（是什么`??`？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T16:42:51.660

? 是一个无关值 - 即它将匹配 0、1 或 z。那么3'b1?? 无论其他两位是什么，只要第一位是 1，就会发生这种情况。

该电路基本上是一个 4:1 多路复用器，选择 b0、b1、b2、b3 之一，加上一个选择位`a`，强制输出为 0，无论其他两个选择位是什么。

# clojure - 反转数字的功能算法

> ID：14091124
> 
> 赞同：4
> 
> 时间：2012-12-30T13:32:16.107
> 
> 标签：clojure, functional-programming

我最近一直在玩 Clojure，但我无法让这个算法工作：

```
(defn reverse-number [number reversed]
   (if (= number 0)
     reversed
     (reverse-number (/ number 10) 
                     (+ (rem number 10) (* reversed 10))))) 
```

我应该这样称呼它`(reverse-number 123 0)`，我期望的结果是：`321`. 当我运行它时，**REPL 只是挂起**。

**有人可以解释一下，发生了什么，我做错了什么以及如何让这个功能工作？**

**注意**：我知道我可以使用字符串函数来反转一个数字。实际上，我已经这样做了，但我对这个解决方案不感兴趣。我想要的只是飞​​跃到函数式语言。这就是我尝试多种方法的原因。

使用**字符串函数**：

```
(defn reverse-number [n]
  (Integer. (clojure.string/reverse (str n))))

(reverse-number 123)  ; --> 321 
```

我**不喜欢这个版本**，因为使用 reverse 的字符串版本**感觉像是在作弊**。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T13:39:56.060

您应该使用[quot](http://clojuredocs.org/clojure_core/clojure.core/quot)而不是`/`.

`/`在clojure中会给你一个分数，所以`number`永远不会是0（除非它从一开始就是0），而`quot`会给你“整数除法”。

例子：

```
user=> (/ 123 10)                  
123/10
user=> (quot 123 10)
12 
```

# c++ - 有没有办法告诉 C++ 中指针实际指向的类型

> ID：14091127
> 
> 赞同：2
> 
> 时间：2012-12-30T13:32:31.363
> 
> 标签：c++, pointers, inheritance, polymorphism, generic-programming

在 C++ 中，您可以将指针声明为一种类型，然后将其指向不同的继承类型。有什么方法可以判断您当前指向的是哪个？

```
#include <typeinfo>
using namespace std;

class Foo
{
};

class Bar : public Foo
{
};

int main()
{
    Bar bar;
    Foo* foo = &bar;
    bool I_WANT_THIS_TO_BE_TRUE = (typeid(*foo) == typeid(Bar));
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-30T13:33:44.807

这失败了，因为您没有在`Foo`. 例如，将其更改为具有虚拟析构函数，您将获得预期的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T13:37:09.517

您正在寻找的是反射或 RTTI（运行时类型信息）的东西。

请参阅此信息以开始主题：[C++ 的属性和反射库？](https://stackoverflow.com/questions/87932/attribute-reflection-libraries-for-c)

不出所料，维基百科也有关于 RTTI 的文章：[http ://en.wikipedia.org/wiki/Run-time_type_information](http://en.wikipedia.org/wiki/Run-time_type_information)

然后有一些框架为从一些公共基类派生的对象提供反射特性（它提供反射方法，继承给所有子类）。一个例子是[Qt 的元对象系统](http://qt-project.org/doc/qt-4.8/metaobjects.html)。这些可以提供比普通 C++ RTTI 更多的信息，并提供完整的反射支持（例如通过在编译时未知的名称调用方法，例如调用 C++ 方法的 javascript 代码）。

# java - 在另一个 java 文件中运行一个 java 文件并将其输出显示到控制台

> ID：14091140
> 
> 赞同：1
> 
> 时间：2012-12-30T13:35:03.890
> 
> 标签：java, console

我有一个**hello world**类 hworld.class 在控制台上显示“Hello World”。我正在尝试使用代码从控制台中的另一个类运行它

```
 public class ftest2  
 {  
    public static void main(String[] arg)  
    {  
     System.out.println("NEW FILE PRINT LINE EXECUTED");
      try {  
            Process pro1 = Runtime.getRuntime().exec("javac hworld.java");  
            pro1.waitFor();  
            Process pro2 = Runtime.getRuntime().exec("java hworld");  
            pro2.waitFor();  
         } catch (Exception e) {    
               System.out.println("Some Error");   
               e.printStackTrace();     
                }  
    }  } 
```

但是当文件被执行时，Hello World 的输出并没有显示在控制台上。
程序刚刚启动并显示

```
 NEW FILE PRINT LINE EXECUTED 
```

安装的

```
 NEW FILE PRINT LINE EXECUTED    
  HELLO WORLD 
```

如何也可以显示 HELLO WORLD 的输出。
（这是示例程序。我想在另一个程序中显示一个程序的输出）

如果有另一种方法可以在另一个类中调用一个类来显示其输出。那么请提一下。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T13:47:41.440

您需要阅读`InputStream`该过程的内容，即

> 流从这个 Process 对象表示的进程的标准输出流中获取数据。

来源：[http](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Process.html#getInputStream) ://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Process.html#getInputStream ()

读取`InputStream`和写入`System.out`：

```
 InputStream inputStream = process.getInputStream();
    int b = -1;
    while ( (b =  inputStream.read()) != -1 ) {
        System.out.write(b);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T13:48:43.630

您需要将进程的输入流重定向到 System.out，例如：

```
public static void main(String[] arg) {
    System.out.println("NEW FILE PRINT LINE EXECUTED");
    try {
        Process pro1 = Runtime.getRuntime().exec("javac hworld.java");
        try (BufferedReader reader = new BufferedReader(new InputStreamReader(pro1.getInputStream(), Charset.forName("UTF-8")))) {
            String line;
            while ((line = reader.readLine()) != null) {
                System.out.println(line);
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

注意：它使用 Java 7 的 try with resources 语法，但如有必要，可以轻松转换为 Java 6。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T13:40:23.620

可能是您遇到异常并且您没有打印它。

```
public class ftest2  
 {  
    public static void main(String[] arg)  
    {  
     System.out.println("NEW FILE PRINT LINE EXECUTED");
      try {  
            Process pro1 = Runtime.getRuntime().exec("javac hworld.java");  
            pro1.waitFor();  
            Process pro2 = Runtime.getRuntime().exec("java hworld");  
            pro2.waitFor();  
         } catch (Exception e) {
            System.out.println("Some Error");
            e.printStackTrace(); 
         }  
    }  
} 
```

和另一种方式

```
public static void main(String[] arg)  
{  
     System.out.println("NEW FILE PRINT LINE EXECUTED");
     hworld.main(arg); // since main is a static method can be called w/o instance
} 
```

# objective-c - 添加/更新数据后如何更新 UITableView

> ID：14091141
> 
> 赞同：-2
> 
> 时间：2012-12-30T13:35:11.543
> 
> 标签：objective-c, ios6, uitableview

我是 iPhone 应用程序的新手。为了存储数据，我正在关注[`this tutorial`](http://www.appcoda.com/introduction-to-core-data/).

我了解如何保存数据和检索数据。

我想要做的是而不是另一个`UITableViewController`（故事板中的第一个屏幕，我们有列表），我将在那里拖动`UITableView`并显示项目列表，而不是在另一个屏幕中显示。

任何想法/建议如何完成这项工作？

任何提示都会很棒。

我的感觉是，我需要添加`UITableView`. 在其上添加委托和数据源方法，并添加一个方法，我将在其中显示所有数据`UITableView`。

* * *

## 编辑 1

我想要的只是**一个屏幕**。在我提供的链接中，它是第二个屏幕。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T13:43:46.373

那应该可以正常工作。但请确保你也做过

```
[tableview reloadData]; 
```

在您更改表视图数据源委托中的数据之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T14:02:05.913

`What I am wanted to do is instead of another UITableViewController (first screen in storyboard, where we have list), I will drag a UITableView and show list of items there instead of showing in another screen.`

你为什么要这样做？

用户体验不会是最好的。

`What I feel is, I would need to add UITableView. Add delegate and dataSource method on it and add a method where I will have all data shown in UITableView.`

即使您想这样做，是的，您也需要设置委托和数据源方法。

# html - CSS 悬停在边距后面

> ID：14091148
> 
> 赞同：0
> 
> 时间：2012-12-30T13:36:20.520
> 
> 标签：html, css, background, hover

我在页面中间有一个内容区域，我以它为中心`margin: 0 auto;` 现在我想在页面上有一个带有几个小立方体的背景效果，当悬停时会改变一些效果。

悬停效果在内容区域下方或上方都可以正常工作，但问题是位于内容中心的边缘似乎会干扰对悬停的识别，因为当悬停在内容区域边缘后面的立方体上时，悬停选择器不起作用。

谢谢你的帮助！

编辑：这里有一个代码示例：[http ://cssdeck.com/labs/dl3ojm0g](http://cssdeck.com/labs/dl3ojm0g)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T14:23:48.183

绝对定位您的内容容器。然后左边：50% 和左边距：-700px/2

```
#content {
position: absolute;
top: 50px;
left: 50%;
margin-left: -350px;
width: 700px;
height: 300px;
padding: 20px;
background-color: white;
border: 2px solid darkgray;
color: darkgray; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T14:29:07.457

CSS中的一些小改动，效果很好。

```
 #content {
        margin: 0 auto;
        position:relative;
        margin-top: 50px;
        width: 700px;
        height: 300px;
        padding: 20px;
        background-color: white;
        border: 2px solid darkgray;
        color: darkgray;
        z-index:2;
    }
    #cubeHolder {
        position: absolute;
        top: 0;
        left: 0;
        z-index:1;
} 
```

只需要定位`#content`到相对位置并给它一个更高的 z-index 相比`#cubeHolder`

示例：http: [//jsfiddle.net/nwrFa/6/](http://jsfiddle.net/nwrFa/6/)

# javascript - 我是否需要使用三个 javascript 库来验证 ASP.NET MVC4？

> ID：14091149
> 
> 赞同：0
> 
> 时间：2012-12-30T13:36:31.480
> 
> 标签：javascript, jquery, asp.net-mvc-4

我想验证我的表单，所以我正在查看 ASP.NET MVC4 示例应用程序。

在这里，我看到它使用以下内容：

```
jquery.unobtrusive-ajax.js
jquery.validate.js
jquery.validate.unobtrusive.js 
```

有人可以解释一下。我需要所有这些 js 库吗？我以为我读到了一些地方，其中一个现在正在做另一个的工作，但我看到样本仍然加载了所有三个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T13:39:37.400

> 有人可以解释一下。我需要所有这些 js 库吗？

不，绝对不是。

对于 jquery 不显眼的验证，您需要按特定顺序添加以下 3 个脚本：

1.  `jquery.js`
2.  `jquery.validate.js`
3.  `jquery.validate.unobtrusive.js`

该`jquery.unobtrusive-ajax.js`脚本与验证完全无关。这被所有`Ajax.*`助手（例如`Ajax.BeginForm`和`Ajax.ActionLink`）使用。

现在，这就是说，ASP.NET MVC 4 使用脚本包。例如，当您在 Visual Studio 中使用 Internet 模板创建新的 ASP.NET MVC 4 应用程序时，它将`~/App_Start/BundleConfig.cs`为您创建包含以下注册的文件：

```
bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include(
            "~/Scripts/jquery.unobtrusive*",
            "~/Scripts/jquery.validate*")); 
```

这意味着如果在您调用的布局或视图中，开箱即用：

```
@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/bundles/jqueryval") 
```

你将进入调试模式：

```
<script src="/Scripts/jquery-1.7.1.js"></script>
<script src="/Scripts/jquery.unobtrusive-ajax.js"></script>
<script src="/Scripts/jquery.validate.js"></script>
<script src="/Scripts/jquery.validate.unobtrusive.js"></script> 
```

在发布模式下（`<compilation debug="false">`在您的 web.config 中），所有这些脚本都将被缩小、压缩并捆绑到通过动态端点提供服务的单个脚本中。

# symfony - Symfony2 应用程序/控制台不为实体关系/关联生成属性或模式更新

> ID：14091153
> 
> 赞同：2
> 
> 时间：2012-12-30T13:37:00.690
> 
> 标签：symfony, doctrine-orm

我正在阅读并遵循 Symfony2 关于使用数据库和 Doctrine 的书 ( [http://symfony.com/doc/2.0/book/doctrine.html](http://symfony.com/doc/2.0/book/doctrine.html) ) 中所写的代码。我已经到达“实体关系/关联”部分，但该框架似乎并没有做它应该做的事情。我已将受保护的 $category 字段添加到 Product 实体，并将 $products 字段添加到 Category 实体。我的产品和类别实体如下：

**产品：**

```
<?php

namespace mydomain\mywebsiteBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Product
 *
 * @ORM\Table()
 * @ORM\Entity
 */
class Product
{
    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string
     *
     * @ORM\Column(name="description", type="string", length=255)
     */
    private $description;

    /*
     * @ORM\ManyToOne(targetEntity="Category", inversedBy="products")
     * @ORM\JoinColumn(name="category_id", referencedColumnName="id")
     */
    protected $category;

    /**
     * Set description
     *
     * @param string $description
     * @return Product
     */
    public function setDescription($description)
    {
        $this->description = $description;

        return $this;
    }

    /**
     * Get description
     *
     * @return string 
     */
    public function getDescription()
    {
        return $this->description;
    }

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }
} 
```

**类别：**

```
<?php

namespace mydomain\mywebsiteBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use \Doctrine\Common\Collections\ArrayCollection;

/**
 * Category
 *
 * @ORM\Table()
 * @ORM\Entity
 */
class Category
{
    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string
     *
     * @ORM\Column(name="description", type="string", length=255)
     */
    private $description;

    /*
     * @ORM\OneToMany(targetEntity="Product", mappedBy="category")
     */
    protected $products;

    public function __construct(){
        $this->products = new ArrayCollection();
    }

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set description
     *
     * @param string $description
     * @return Category
     */
    public function setDescription($description)
    {
        $this->description = $description;

        return $this;
    }

    /**
     * Get description
     *
     * @return string 
     */
    public function getDescription()
    {
        return $this->description;
    }
} 
```

根据文档，如果我现在执行

```
$ php app/console doctrine:generate:entities mydomain 
```

框架应该为 Product 中的新类别字段和类别中的新产品字段生成 getter/setter。

**但是**，当我运行该命令时，它应该会更新实体，但不会添加属性。我与备份（〜）文件进行了比较，没有区别。如果我添加另一个字段（例如 description2）并向其添加用于持久性的学说注释，那么它会生成属性。我一开始忽略了这一点，并手动添加了映射字段的属性，然后执行：

```
$php app/console doctrine:schema:update --force 
```

为其添加新的关联列。

**但是**它再次告诉我元数据和模式是最新的。

我已经删除了 app/cache/dev 文件夹并允许系统重新创建它，但它没有任何区别。

谁能看到为什么框架的行为不像文档中描述的那样？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T09:32:31.320

您在这里忘记了一颗星：

```
/*
 * @ORM\ManyToOne(targetEntity="Category", inversedBy="products")
 * @ORM\JoinColumn(name="category_id", referencedColumnName="id")
 */
protected $category; 
```

肯定是

```
/**
 * @ORM\ManyToOne(targetEntity="Category", inversedBy="products")
 * @ORM\JoinColumn(name="category_id", referencedColumnName="id")
 */
protected $category; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T15:27:21.540

更新：在尝试了不同的事情但绝对没有成功后，我最终删除了整个捆绑包和相关的数据库，并重新从头开始。第二次正确生成事物并且数据库模式正在正确更新。这种不稳定的行为是框架的极差，正如上面评论中提到的那样，作为一名开发人员，我正在远离 Grails。现在我发现 symfony2 也有同样的问题。

当我使用一个框架时，我不应该总是在脑海中记住是否有什么东西不工作，因为框架是错误的。对于这样一个主流框架来说，这是非常不可接受的，而且似乎我并不是唯一遇到此类问题的人。框架开发人员绝对应该通过（最好）解决这些问题或提供一些方法来理解框架在随机情况下失败的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-27T17:30:03.137

我遇到了完全相同的问题，我像这样解决了它：删除包含 yml 文件的“doctrine”-文件夹以及实体的（在您的情况下是多余的！）配置。仅出于教育目的在您的测试系统上执行此操作。

一些背景信息（可能比我更有经验的人 - 可能几乎这里的每个人;o））可以添加到这一点：

*   与实体类中的注释相比，Doctrine 更喜欢 YML-Schema 配置 (/** @ORM ... */)
*   在阅读本书时，您可能在第 8 章之前的几章中使用 YML-Schema 配置创建了一个博客实体 - 也许您玩了一点，这个 YML-Schema 与第 8 章练习在同一个包中
*   因此：Doctrine 认为您想使用 YML，但它只找到“anotherEntity”的配置，但没有找到产品和类别的配置
*   或者：您运行一些 Doctrine 命令进行测试并选择一次（错误？） YML 和瞧：所有进一步的注释机会都将被忽略，因为存在 product.orm.yml

希望有帮助。我刚开始第 10 章 ;-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-21T09:44:04.870

根据我发现的问题，您不能有两种类型的定义..在书中，实体创建类别的命令也创建了一个 yml 配置，因此注释失败。您必须使用注解或 yml 或 xml 或 php。一旦我删除了 yml 配置并重新创建了带有注释的表，它就可以工作了..小心，不要使用 comnad 来创建类别..您仍然会收到一个错误，说明描述是必填字段:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-30T14:17:21.890

在生成 getter 和 setter 时，Symfony 只是使用 ReflectionClass 来查看方法是否已经存在。它不看注释中写了哪些属性。

关于架构更新问题，我没有其他解决方案，然后重置数据库并从头开始创建它。我几次遇到这个问题，但从未真正找到一个好的解决方案，似乎 Symfony 在某些属性之间没有区别，这导致找不到任何更新。

我现在没有手头的框架来查找它。也许您可以尝试找出 schema:update 的确切作用，从而找到错误。

# events - 如何使用 QWidget::showEvent() 防止 QWidget::show()

> ID：14091158
> 
> 赞同：1
> 
> 时间：2012-12-30T13:37:49.880
> 
> 标签：events, qt4, qwidget

我有一个`QMainWindow`实例化一个 QWidget 子类。我想用远程数据填充我的子类，所以我想阻止`QWidget::show()`插槽，忽略它并发出请求，然后真正显示子类小部件。

我已经重新实现`showEvent(QShowEvent *)`并让它忽略了该事件，`qDebug()`向我展示了它的工作原理并且被忽略了，但仍然显示了小部件。

我错过了什么 ？谢谢您的帮助。

子类：

```
void Groups_Materials::showEvent(QShowEvent *event)
{
 event->ignore();
 qDebug() << "Event accepted: " << event->isAccepted(); // Return: false
} 
```

它是如何被调用的：

```
this->m_groupsMaterialsWidget = new Groups_Materials(this->m_parent);
this->m_groupsMaterialsWidget->setWindowModality(Qt::ApplicationModal);
this->m_groupsMaterialsWidget->setAttribute(Qt::WA_DeleteOnClose);
this->m_groupsMaterialsWidget->show(); 
```

调用这些方法时控制台中写入的内容： `Event accepted: false`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T17:00:42.897

添加« event->spontaneous() »，如果它返回« true »，您就不能

> 窗口的自发展示事件随后交付。

只需在您的 QWidget 子类上调用 « hide() »，这样它就不会显示，除非您自己调用 « show() »。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T15:18:04.550

我一个人得到了一个anwser......我正在使用“Qt::Sheet”标志，这似乎使它失败了。我在 Mac 上，也许它可以在 Win/Linux 上运行：[Qt-Forum](http://qt-project.org/forums/viewthread/23193/)

# c++ - C++ 调试器不进入方法

> ID：14091162
> 
> 赞同：1
> 
> 时间：2012-12-30T13:38:11.313
> 
> 标签：c++, visual-studio-2010, debugging

所以我在 Collide(0,1); 行设置了一个断点。我尝试进入该方法，但它不会进入那里。任何想法为什么？

```
Collide(0,1);
if(PosX<(screen->h-40))
{
    if(LevelOne[screenCamera.ScreenOffsetX][screenCamera.ScreenOffsetY+1] == 0) //Collision
    {
        screenCamera.SavePreviousOffests();
        screenCamera.ScreenOffsetY += 1;
        if(screenCamera.ScreenOffsetY > 30 ||
           screenCamera.ScreenOffsetY < 10 ||
           screenCamera.PreviosScreenOffsetY == 9)
        {
            Move(0, 40);
        }
    }
}

bool Hero::Collide(int xMovement, int yMovement)
{
    int nextPositionContents = LevelOne[PosX/40 + xMovement][PosY/40 + yMovement];
    if(nextPositionContents == 11) //blue key
    {
        //LevelOne[PosX/40 + xMovement][PosY/40+ yMovement] == 0;
        HasBlueKey = true;
    }
    if(nextPositionContents == 10 && HasBlueKey)//blue door
    {
        //LevelOne[PosX/40+ xMovement][PosY/40+ yMovement] == 0;
        HasBlueKey = false;
    }
    nextPositionContents = 0;

    return false;
} 
```

# c# - 空 LongListSelector 导致无限的 ScrollViewer

> ID：14091164
> 
> 赞同：3
> 
> 时间：2012-12-30T13:38:22.937
> 
> 标签：c#, .net, xaml, windows-phone-8

这是这种情况：

我有一个数据源，它被某些属性（我们称之为 Checked）过滤到视图模型上的两个列表中。称其为新旧。

新的需要显示在一个列表中，旧的需要显示在其正下方的列表中。

哦，他们需要同时滚动。因此，如果 Old 当前不在屏幕上，它会在列表向上滑动时游入可见性。

我目前已经使用 LongListSelectors 解决了这个问题，如下所示：

```
<ScrollViewer  VerticalAlignment="Top" VerticalScrollBarVisibility="Auto">
    <StackPanel>
        <phone:LongListSelector x:Name="NewList" Margin="0,0,0,0" ItemsSource="{Binding New}"  SelectionChanged="NewList_SelectionChanged">
            <phone:LongListSelector.ItemTemplate>
                <DataTemplate>
                    <StackPanel Margin="0,0,0,17">
                        <TextBlock Text="{Binding Name}" TextWrapping="Wrap" Style="{StaticResource PhoneTextExtraLargeStyle}" Foreground="{Binding Color}" />
                    </StackPanel>
                </DataTemplate>
            </phone:LongListSelector.ItemTemplate>
        </phone:LongListSelector>
        <phone:LongListSelector x:Name="OldList" Margin="0,0,0,0" ItemsSource="{Binding Path=Old}" Padding="0,20,0,0">
            <phone:LongListSelector.ItemTemplate>
                <DataTemplate>
                    <StackPanel Margin="0,0,0,17">
                        <TextBlock Text="{Binding Name}" TextWrapping="Wrap" Style="{StaticResource PhoneTextExtraLargeStyle}" FontStyle="Italic" Foreground="{Binding Color}"/>
                    </StackPanel>
                </DataTemplate>
            </phone:LongListSelector.ItemTemplate>
        </phone:LongListSelector>
    </StackPanel>
</ScrollViewer> 
```

滚动查看器内的堆栈面板内的两个长列表选择器。现在这一切都非常有效，而这两个列表中都有一些东西。

但是，当其中一个没有任何内容时，它会立即扩展以填充其父级的整个高度。在这种情况下......无限滚动查看器。这意味着如果新列表中没有任何内容，那么屏幕上绝对不会有任何可见的内容，如果新列表中没有任何内容......我几乎可以在经过新列表项后无限滚动。

我在这里有什么选择吗？如果没有以编程方式创建大量文本字段，然后尝试将事件附加到它，或者更糟糕的是，编写我自己的列表控件？标准列表框不起作用，因为它们都单独滚动。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T13:37:13.373

将两个列表控件放在一起通常是个坏主意，因为 ScrollViewers 位于 ScrollViewers 中。

我建议您使用一个没有任何 ScrollViewer 的 LongListSelector。然后使用旧的新项目创建一个集合，并使用 ItemTemplateSelector 以不同的方式设置它们的样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T21:47:19.537

您面临的问题是，默认情况下，当测量 emty LLS 时，您看到的高度是“无限”。您正在使用 StacPanel，这意味着第二个 LLS 处于无限 LLS 之下。

最简单的解决方案是设置 LLS 的高度：

```
<phone:LongListSelector x:Name="NewList" Height="300" Margin="0,0,0,0" ItemsSource="{Binding New}"  SelectionChanged="NewList_SelectionChanged"> 
```

如果可以 - 使用具有定义行的网格而不是 StacPanel。如果您仍然想使用 StackPanel，您可以覆盖 LLS 中的 MeasureOverride() 方法并进行扩展。
如果您这样做，它应该可以工作：

```
namespace Extensions
{
   public class LongListSelectorEx : LongListSelector
   {
      protected override System.Windows.Size MeasureOverride(System.Windows.Size availableSize)
      {
         if (this.ItemsSource == null)
            return new System.Windows.Size(this.Width, 0);
         if (this.ItemsSource.Count <= 0)
            return new System.Windows.Size(this.Width, 0);

         return base.MeasureOverride(availableSize);
      }
   }
} 
```

如果您没有定义宽度（返回值不能是 NaN - 在这种情况下用 0 代替 this.Width），也要小心。当然，您还需要检查 LLS 的高度，因为如果您不检查，当 LLS 中有很多项目时，您的控件可能会被推离屏幕。[您也可以在此处](https://stackoverflow.com/questions/19963187/empty-longlistselector-has-infinite-length/19964267#19964267)
阅读相关内容

# php - 为什么这个 php 字符串比较有效？

> ID：14091169
> 
> 赞同：0
> 
> 时间：2012-12-30T13:39:38.310
> 
> 标签：php, string-comparison, boolean-logic

编码：

```
 $fn0 ='Joe';
  $sn = 'Bloggs';
  $fn1 = 'Joseph';
  if (  (!strcasecmp($fn0, $first_name))
        ||(!strcasecmp($fn1, $first_name))
        &&(!strcasecmp($sn, $last_name))
      ){
        echo('<h3>Hello Joe Bloggs!</h3>');
        } 
```

完美运行。

但为什么？

如果不是 (fn0) 或不是 (fn1) 也不是 (sn)，则打印“Hello Joe Bloggs”

*当然，它应该为非*Joe Bloggs的所有内容显示“hello Joe Bloggs” ，但事实并非如此：它将显示上述消息 iff ($first_name == "joe" || "joseph") && $last_name == “博客”。

谁能破译这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T13:42:20.390

看你的括号

```
if ( ( !strcasecmp($fn0, $first_name) || !strcasecmp($fn1, $first_name) )
    && ( !strcasecmp($sn, $last_name) ) ) {
...
} 
```

错误在于`||`and的逻辑`&&`。如果第一个检查为真，其余的将被忽略

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T13:42:14.313

在第一次比较结果为 TRUE 后，不需要“或”条件。当然，我们必须假设某处 $first_name 有一些定义......

# php - 在 Codeigniter 中添加语言的 URI 段

> ID：14091171
> 
> 赞同：2
> 
> 时间：2012-12-30T13:39:55.153
> 
> 标签：php, codeigniter, codeigniter-url

我有一个网站；我需要开发支持多种语言，例如en、tr、ar、sp等。

但问题是，使用 Codeigniter 的最佳方法是什么？

我有一个控制器（ SITE ）。我有很多功能喜欢（酒店，城市，页面，博客）

我想在这个方法之前添加一个段（语言）。这是旧链接

```
http://example.com/hotel/mariot
http://example.com/hotel/hilton
http://example.com/city/london
http://example.com/city/paris
...
.. 
```

我希望链接是这样的

```
http://example.com/en/hotel/mariot
http://example.com/ar/hotel/mariot
http://example.com/sp/hotel/mariot
http://example.com/tr/hotel/mariot
http://example.com/en/city/london
http://example.com/ar/city/paris
....
.. 
```

有时认为每种语言都有一个控制器，但有可能......

更改所有链接以支持语言的最佳方法是什么？

对不起，如果我的问题不清楚，这是我的英语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T13:58:51.880

正确的方法，是使用 routes.php 在里面查找（application/config/routes.php）

您可以针对您的特定问题使用正则表达式。

这是手册：[http ://ellislab.com/codeigniter/user-guide/general/routing.html](http://ellislab.com/codeigniter/user-guide/general/routing.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T13:48:57.980

如果您希望您的链接是这样的 [http://example.com/en/something](http://example.com/en/something)

那么您可能需要在您的项目中拥有名为 en 的子域或文件夹。但这并不是完美的解决方案。

您需要做的是将您的文本输出分配到变量中，这些变量从 xml 文件中获取它们的值。就像如果你有一些名为“你的房间号是：0”的文本，并且这个值是硬编码的 HTML，那么你应该把它放在 en.xml 文件中的某个标签下，并从用户请求的 xml 文件中获取它所需的语言。

您可能可以在所有语言中执行先前的解决方案，但您必须考虑阿拉伯语是 RTL 语言，所以只需在您的 css 中考虑这一点。但通常您可以使用 xml 文件来控制语言。

希望那是你所需要的。

# python-3.x - Python 3.3 下的 Pyramid 安装提供 pkg_resources.DistributionNotFound： 视窗下

> ID：14091176
> 
> 赞同：2
> 
> 时间：2012-12-30T13:40:35.467
> 
> 标签：python-3.x, pyramid

我刚刚安装了 Python 3.3 (x64) 和 PyWin32，然后执行了以下操作（`mindeningyen-env`是 virtualenv 的目录，`mindeningyen`是应用程序的名称）：

```
distribute_setup.py
easy_install virtualenv
virtualenv --no-site-packages mindeningyen-env
cd mindeningyen-env
Scripts\activate
easy_install pyramid
pcreate -s alchemy mindeningyen
cd mindeningyen
setup.py develop
pip install waitress 
```

然后我得到以下跟踪：

```
(mindeningyen-env) D:\prg\mindeningyen-env\mindeningyen>pserve development.ini
Traceback (most recent call last):
  File "d:\prg\mindeningyen-env\Scripts\pserve-script.py", line 9, in <module>
    load_entry_point('pyramid==1.4', 'console_scripts', 'pserve')()
  File "d:\prg\mindeningyen-env\lib\site-packages\pyramid-1.4-py3.3.egg\pyramid\scripts\pserve.py", line 50, in main
    return command.run()
  File "d:\prg\mindeningyen-env\lib\site-packages\pyramid-1.4-py3.3.egg\pyramid\scripts\pserve.py", line 304, in run
    global_conf=vars)
  File "d:\prg\mindeningyen-env\lib\site-packages\pyramid-1.4-py3.3.egg\pyramid\scripts\pserve.py", line 328, in loadapp
    return loadapp(app_spec, name=name, relative_to=relative_to, **kw)
  File "d:\prg\mindeningyen-env\lib\site-packages\pastedeploy-1.5.0-py3.3.egg\paste\deploy\loadwsgi.py", line 247, in loadapp
    return loadobj(APP, uri, name=name, **kw)
  File "d:\prg\mindeningyen-env\lib\site-packages\pastedeploy-1.5.0-py3.3.egg\paste\deploy\loadwsgi.py", line 271, in loadobj
    global_conf=global_conf)
  File "d:\prg\mindeningyen-env\lib\site-packages\pastedeploy-1.5.0-py3.3.egg\paste\deploy\loadwsgi.py", line 296, in loadcontext
    global_conf=global_conf)
  File "d:\prg\mindeningyen-env\lib\site-packages\pastedeploy-1.5.0-py3.3.egg\paste\deploy\loadwsgi.py", line 320, in _loadconfig
    return loader.get_context(object_type, name, global_conf)
  File "d:\prg\mindeningyen-env\lib\site-packages\pastedeploy-1.5.0-py3.3.egg\paste\deploy\loadwsgi.py", line 454, in get_context
    section)
  File "d:\prg\mindeningyen-env\lib\site-packages\pastedeploy-1.5.0-py3.3.egg\paste\deploy\loadwsgi.py", line 476, in _context_from_use
    object_type, name=use, global_conf=global_conf)
  File "d:\prg\mindeningyen-env\lib\site-packages\pastedeploy-1.5.0-py3.3.egg\paste\deploy\loadwsgi.py", line 406, in get_context
    global_conf=global_conf)
  File "d:\prg\mindeningyen-env\lib\site-packages\pastedeploy-1.5.0-py3.3.egg\paste\deploy\loadwsgi.py", line 296, in loadcontext
    global_conf=global_conf)
  File "d:\prg\mindeningyen-env\lib\site-packages\pastedeploy-1.5.0-py3.3.egg\paste\deploy\loadwsgi.py", line 328, in _loadegg
    return loader.get_context(object_type, name, global_conf)
  File "d:\prg\mindeningyen-env\lib\site-packages\pastedeploy-1.5.0-py3.3.egg\paste\deploy\loadwsgi.py", line 620, in get_context
    object_type, name=name)
  File "d:\prg\mindeningyen-env\lib\site-packages\pastedeploy-1.5.0-py3.3.egg\paste\deploy\loadwsgi.py", line 640, in find_egg_entry_point
    pkg_resources.require(self.spec)
  File "d:\prg\mindeningyen-env\lib\site-packages\distribute-0.6.31-py3.3.egg\pkg_resources.py", line 706, in require
    needed = self.resolve(parse_requirements(requirements))
  File "d:\prg\mindeningyen-env\lib\site-packages\distribute-0.6.31-py3.3.egg\pkg_resources.py", line 604, in resolve
    raise DistributionNotFound(req)
pkg_resources.DistributionNotFound: mindeningyen 
```

任何想法为什么它没有找到该项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T13:54:41.703

使用新的[Python 3.3 本机虚拟环境](http://docs.python.org/3/library/venv.html#module-venv)实现，我可以在 Python 3.3 上使用 Pyramid 就好了：

```
python3.3 -m venv mindeningyen-env
cd mindeningyen-env/
source bin/activate 
curl -O http://python-distribute.org/distribute_setup.py
python distribute_setup.py 
bin/easy_install pyramid
bin/pcreate -s alchemy mindeningyen
cd mindeningyen
python setup.py develop
cd ..
bin/pserve mindeningyen/development.ini 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T13:19:08.600

如果使用 virtualenv（安装的或内置的 python），不应该说类似的东西 `setup.py develop`，因为这将使用在注册表中找到的 python 解释器。应该确保 virtualenv 被激活`Scripts\activate`，然后每次运行 python 都应该使用 python，所以，正确的形式是：

```
python setup.py develop 
```

# networking - 在 Fedora 17 上安装 NS2.35 时出错

> ID：14091178
> 
> 赞同：2
> 
> 时间：2012-12-30T13:40:47.973
> 
> 标签：networking, simulation, ns2

我正在尝试使用 allinone 包在 Fedora 17 上安装 NS2.35。我是 linux 环境的新手，已经花了很多时间尝试这个。到目前为止，我发现这是依赖包的问题。但我无法弄清楚以下错误。请帮忙。

```
===========================================================
* Build Tclcl-1.20
============================================================
No .configure file found in current directory
Continuing with default options...
checking build system type... x86_64-unknown-linux-gnu
checking host system type... x86_64-unknown-linux-gnu
checking target system type... x86_64-unknown-linux-gnu
checking for gcc... gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables... 
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking for g++... no
checking for c++... no
checking for gpp... no
checking for aCC... no
checking for CC... no
checking for cxx... no
checking for cc++... no
checking for cl.exe... no
checking for FCC... no
checking for KCC... no
checking for RCC... no
checking for xlC_r... no
checking for xlC... no
checking whether we are using the GNU C++ compiler... no
checking whether g++ accepts -g... no
checking how to run the C preprocessor... gcc -E
checking for grep that handles long lines and -e... /usr/bin/grep
checking for egrep... /usr/bin/grep -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking for string.h... (cached) yes
checking for main in -lXbsd... no
checking for socket in -lsocket... no
checking for gethostbyname in -lnsl... yes
checking for dcgettext in -lintl... no
checking for getnodebyname in -ldnet_stub... no
checking that g++ can handle -O2... no
checking standard STL is available... no
checking for ranlib... ranlib
checking for snprintf... yes
checking for ANSI C header files... (cached) yes
checking for strtoq... yes
checking for strtoll... yes
checking size of long... 8
checking for strtol... yes
checking for __int64_t... no
checking for long long... yes
checking for int64_t... yes
checking which kind of 64-bit int to use... int64_t
checking for tcl.h... -I../include
checking for tclInt.h... -I../include
checking for libtcl8.5... -L../lib -ltcl8.5
checking for init.tcl... ../lib/tcl8.5
checking for http.tcl... ../lib/tcl8.5/http1.0
checking Tcl http.tcl library... yes
checking for tclsh8.5.10... no
checking for tclsh8.5... ../bin/tclsh8.5
checking for tk.h... -I../include
checking for libtk8.5... -L../lib -ltk8.5
checking for tk.tcl... ../lib/tk8.5
checking for otcl.h... -I../otcl-1.14
checking for libotcl1.14... -L../otcl-1.14 -lotcl
checking for X11 header files
checking for X11 library archive
checking for XOpenDisplay in -lX11... yes
checking for XShmAttach in -lXext... yes
checking for zlib.h... -I/usr/include
checking for libz1.1.3... no
No explicit static compilation flag; setting V_STATIC to ""
checking for dlopen in -ldl... yes
checking system version (for system-dependent libraries)... Linux-3.3.4-5.fc17.x86_64
checking for unistd.h... (cached) yes
checking for a BSD-compatible install... /usr/bin/install -c
configure: creating ./config.status
config.status: creating Makefile
config.status: creating config.h
config.status: config.h is unchanged
rm -f tcl2c++
g++   -o tcl2c++ tcl2c++.o
make: g++: Command not found
make: *** [tcl2c++] Error 127
tclcl-1.20 make failed! Exiting ...
See http://www.isi.edu/nsnam/ns/ns-problems.html for problems 
```

非常感谢-Uday

# sql - SQLite 按日期排序1530019888000

> ID：14091183
> 
> 赞同：77
> 
> 时间：2012-12-30T13:41:52.423
> 
> 标签：sql, sqlite, android-sqlite, sql-order-by

我的数据库中的每条记录都`SQLite`包含一个字段，该字段包含`Date`存储为`string`格式的 a `'yyyy-MM-dd HH:mm:ss'`。

请问是否可以查询数据库以获取包含最近日期的记录？

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2012-12-30T14:01:08.237

你可以这样做

```
SELECT * FROM Table ORDER BY date(dateColumn) DESC Limit 1 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-08-18T15:15:10.567

对我来说，我有这样的查询来解决我的问题

```
select *  from Table order  by datetime(datetimeColumn) DESC LIMIT 1 
```

因为我将它存储为日期时间而不是日期列

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-11-02T02:35:18.570

当您确定文本字段的格式为`yyyy-MM-dd HH:mm:ss`（例如：）`2017-01-02 16:02:55`时，它对我来说很简单：

`SELECT * FROM Table ORDER BY dateColumn DESC Limit 1`

没有任何额外的日期功能！

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-30T13:50:08.663

您需要将其转换为 unix 时间戳，然后进行比较：

```
SELECT * FROM data ORDER BY strftime('%s', date_column) DESC 
```

但这可能会很慢，如果有很多行的话。更好的方法是默认存储 unix 时间戳，并为该列创建索引。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-12-17T09:59:42.583

您可以将列转换`sent_date_time`为`yyyy-MM-dd`格式，然后按日期排序：

```
1) substr(sent_date_time,7,4)||"-"||substr(sent_date_time,1,2)||"-"||substr(sent_date_time,4,2) as date
2) order by date desc 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-02-05T11:59:47.487

就我而言，一切正常**，无需将列** **强制转换**为“日期”。只需用这样的**双**引号指定列名：

```
SELECT * FROM 'Repair' ORDER BY "Date" DESC; 
```

我认为 SQLite 自己进行铸造或类似的东西，但是当我尝试自己“铸造”日期列时，它不起作用。并且没有错误消息。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-02-29T21:59:26.543

您还可以使用以下查询

```
"SELECT * FROM Table ORDER BY strftime('%Y-%m-%d %H:%M:%S'," + dateColumn + ") DESC  Limit 1" 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-11-27T23:02:09.167

如果您进行大量日期排序/比较，则可以通过将时间存储为刻度而不是字符串来获得更好的结果，这里展示了如何在刻度中获取“现在”：

```
((strftime('%s', 'now') - strftime('%S', 'now') + strftime('%f', 'now')) * 1000) 
```

（见[https://stackoverflow.com/a/20478329/460084](https://stackoverflow.com/a/20478329/460084)）

然后很容易排序，比较等......

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-03T10:58:58.730

这适用于日期和时间

```
SELECT * 
FROM Table 
ORDER BY 
julianday(dateColumn) 
DESC Limit 1 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-10-11T01:06:03.910

我发现这个丑陋的黑客有效。

select *, substr(date_col_name,7,4)as yy, substr(date_col_name,4,2) as mm, substr(date_col_name,1,2) as dd from my_table order by yy desc,mm desc,dd desc

将文本列转换为日期字段类型会更好，但我发现这对我来说并不可靠。

# java - Java TTS（文本到语音）speech.properties 文件

> ID：14091186
> 
> 赞同：1
> 
> 时间：2012-12-30T13:42:24.153
> 
> 标签：java, speech, text-to-speech

我在做一个电脑助手，这意味着它应该识别我的声音并给出反馈或做事，反馈应该是计算机生成的声音。我知道 Java 本身有一种方法可以实现这一点，例如使用 javax.speech。这个声音质量不是很好，但它不需要各种库，应该很容易使用。我目前有这个原型代码：

```
 public static void speech(String text) {
        if(text.trim() == "")
            return;

        String voiceName = "kevin16";

        try {
            SynthesizerModeDesc desc = new SynthesizerModeDesc(null, "general", Locale.US, null, null);
            Synthesizer synth = Central.createSynthesizer(desc);
            synth.allocate();
            synth.resume();
            desc = (SynthesizerModeDesc) synth.getEngineModeDesc();
            Voice[] voices = desc.getVoices();
            Voice voice = null;
            for(Voice entry : voices) {
                if(entry.getName().equals(voiceName)) {
                    voice = entry;
                    break;
                }
            }
            synth.getSynthesizerProperties().setVoice(voice);
            synth.speakPlainText(text, null);
            synth.waitEngineState(Synthesizer.QUEUE_EMPTY);
            synth.deallocate();

        } catch(Exception ex) {
            String message = " missing speech.properties in " + System.getProperty("user.home") + "\n";
            System.out.println("" + ex);
            System.out.println(message);
            ex.printStackTrace();
        }
    } 
```

*来自：[将文本转换为语音java代码](https://stackoverflow.com/questions/13670934/converting-text-to-speech-java-code)*

当我执行代码时会导致错误，那是因为找不到文件 speech.properties，它应该在我的用户目录中。问题是我不知道从哪里得到这个文件，或者这个文件应该是什么，有人可以帮我吗？

另外，如果有人能给我一个好的演讲教程的链接，那就太好了，我在网上搜索过，但很难找到！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T20:38:25.350

我只需进行一些更改即可修复您的示例。

首先，我在 try-catch 块的开头添加了这些行：

```
 System.setProperty("FreeTTSSynthEngineCentral", "com.sun.speech.freetts.jsapi.FreeTTSEngineCentral");
        System.setProperty("freetts.voices", "com.sun.speech.freetts.en.us.cmu_us_kal.KevinVoiceDirectory");
        Central.registerEngineCentral("com.sun.speech.freetts.jsapi.FreeTTSEngineCentral"); 
```

这些行绕过了对那个讨厌的 speech.properties 文件的需求。

其次，声音名称是“ `kevin16`”，而不是“ `kelvin16`”。

第三，我把 to 移到了`synth.resume()`行后`synth.getSynthesizerProperties().setVoice(voice)`。这是因为如果没有预定义的声音，它就无法开始说话。

第四，你`if(text.trim() == "")`很糟糕，因为比较字符串使用`==`不是一个好主意。

这是生成的代码：

```
public static void speech(String text) {
    if (text == null || text.trim().isEmpty()) return;

    String voiceName = "kevin16";

    try {
        System.setProperty("FreeTTSSynthEngineCentral", "com.sun.speech.freetts.jsapi.FreeTTSEngineCentral");
        System.setProperty("freetts.voices", "com.sun.speech.freetts.en.us.cmu_us_kal.KevinVoiceDirectory");
        Central.registerEngineCentral("com.sun.speech.freetts.jsapi.FreeTTSEngineCentral");

        SynthesizerModeDesc desc = new SynthesizerModeDesc(null, "general", Locale.US, null, null);

        Synthesizer synth = Central.createSynthesizer(desc);
        synth.allocate();
        desc = (SynthesizerModeDesc) synth.getEngineModeDesc();
        Voice[] voices = desc.getVoices();
        Voice voice = null;
        for (Voice entry : voices) {
            if(entry.getName().equals(voiceName)) {
                voice = entry;
                break;
            }
        }
        synth.getSynthesizerProperties().setVoice(voice);
        synth.resume();
        synth.speakPlainText(text, null);
        synth.waitEngineState(Synthesizer.QUEUE_EMPTY);
        synth.deallocate();

    } catch(Exception ex) {
        String message = " missing speech.properties in " + System.getProperty("user.home") + "\n";
        System.out.println("" + ex);
        System.out.println(message);
        ex.printStackTrace();
    }
} 
```

# jquery - 仅 CSS 固定 y 轴

> ID：14091189
> 
> 赞同：0
> 
> 时间：2012-12-30T13:42:42.247
> 
> 标签：jquery, css, positioning, fixed

我正在做一个有导航栏的项目。滚动页面时必须固定导航栏以便于访问。问题是，当我缩小浏览器的屏幕尺寸并向右滚动时，导航栏保持固定，并且无法访问导航栏右侧的按钮。我搜索了互联网，找不到解决方案。我确实找到了一些关于修复 X ​​轴的方法，但 jQuery 是唯一的解决方案，而且我对 jQuery 一无所知，所以我也无法更改代码以适用于 Y 轴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T13:56:00.750

```
#boxToFloat{
    position:fixed;
    left:10%;
    top:10%;
    z-index:100;
    border-radius:4px;
    border:1px solid #FCFCFC;
    background:#333333;
    content:'tudhur!';//forgive my comical sense &amp; spelling :)
} 
```

# ruby - 在主目录中安装 mysql gem（无 root 访问权限） install:wheel: invalid argument 错误代码 67

> ID：14091190
> 
> 赞同：1
> 
> 时间：2012-12-30T13:42:48.090
> 
> 标签：ruby, rubygems

所以我试图在自定义文件夹中安装 gems，因为它正在与其他 gems 一起工作，所以我无法安装 mysql gem。

谷歌搜索没有帮助错误代码（不完整）更好地集中注意力

```
make install
/usr/bin/install -c -o root -g wheel -m 0755 mysql_api.so /home/user/gems/gems/mysql-        2.9.0/lib/mysql
install: wheel: Invalid argument
*** Error code 67 
```

和完全失败的安装过程

```
[user@mydevil]:<~/fblk>$ ruby19 -S gem install mysql
Building native extensions.  This could take a while...
ERROR:  Error installing mysql:
ERROR: Failed to build gem native extension.

/usr/local/bin/rubyruby-19 extconf.rb
checking for mysql_ssl_set()... yes
checking for rb_str_set_len()... yes
checking for rb_thread_start_timer()... no
checking for mysql.h... yes
creating Makefile

make
compiling mysql.c
linking shared-object mysql/mysql_api.so

make install
/usr/bin/install -c -o root -g wheel -m 0755 mysql_api.so /home/user/gems/gems/mysql-        2.9.0/lib/mysql
install: wheel: Invalid argument
*** Error code 67

Stop in /usr/home/user/gems/gems/mysql-2.9.0/ext/mysql_api.

Gem files will remain installed in /home/user/gems/gems/mysql-2.9.0 for inspection.
Results logged to /home/user/gems/gems/mysql-2.9.0/ext/mysql_api/gem_make.out 
```

其他一些信息

红宝石环境

```
 RubyGems Environment:
- RUBYGEMS VERSION: 1.8.11
- RUBY VERSION: 1.9.3 (2011-10-30 patchlevel 0) [amd64-freebsd9]
- INSTALLATION DIRECTORY: /home/ferski/gems
- RUBY EXECUTABLE: /usr/local/bin/rubyruby-19
- EXECUTABLE DIRECTORY: /home/ferski/gems/bin
- RUBYGEMS PLATFORMS:
 - ruby
 - amd64-freebsd-9
- GEM PATHS:
 - /home/ferski/gems
 - /usr/local/lib/ruby/gems/1.9
- GEM CONFIGURATION:
 - :update_sources => true
 - :verbose => true
 - :benchmark => false
 - :backtrace => false
 - :bulk_threshold => 1000
 - "gemhome" => "/home/ferski/gems"
 - "gempath" => ["/home/ferski/gems", "/usr/local/lib/ruby/gems/1.9"]
- REMOTE SOURCES:
 - http://rubygems.org/ 
```

ruby 和 ruby​​gems 的不同版本会成为问题吗？还是没有root访问权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T14:00:51.937

freebsd相关问题
试试

```
setenv RB_USER_INSTALL "install -s -m 555" 
```

或者

```
RB_USER_INSTALL=true gem install mysql 
```

# c# - 使用 jquery 调用 C# 方法

> ID：14091194
> 
> 赞同：6
> 
> 时间：2012-12-30T13:43:12.737
> 
> 标签：c#, asp.net, asp.net-mvc-3, jquery

我正在尝试通过`jQuery`单击按钮来调用方法。到目前为止，这是我所拥有的：

```
$("a.AddToCart").click(function () {
            var link = document.URL;

            $.ajax({
                 type:"POST",
                 url: "/Account/AddToCartHack",
                 data: {url : link},
                 contentType: "application/json; charset=utf-8",
                 dataType: "json"
            });
        });

[WebMethod]
    public void AddToCartHack(string url)
    {
        GeneralHelperClass.URL = url;
    } 
```

我在这里要做的是，当我单击带有类添加到购物车的链接时，我想调用该方法`AddToCartHack`并将当前 URL 作为参数传递给它。我一定做错了什么，因为它似乎`AddToCartHack`没有被调用。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-30T13:52:18.210

你的代码有很多问题，我不知道从哪里开始。因此，让我们与您进行一次交互式重构会话（如果您不关心我的评论而只想查看最终和推荐的解决方案，只需在答案末尾向下滚动即可）。

**首先**：您似乎并没有通过`false`从`.click()`事件处理程序返回来取消锚点的默认操作。如果不这样做，您实际上是在让浏览器执行锚点的默认操作（如您所知，锚点是重定向到它的 href 属性指向的 url。因此，您的 AJAX 调用永远不会有时间来执行，因为浏览器已经离开页面并且没有更多的脚本正在运行）。因此，从处理程序返回 false 以使您的 AJAX 脚本能够执行并保持在同一页面上：

```
$("a.AddToCart").click(function () {
    var link = document.URL;

    $.ajax({
        type:"POST",
        url: "/Account/AddToCartHack",
        data: {url : link},
        contentType: "application/json; charset=utf-8",
        dataType: "json"
    });

    return false;
}); 
```

**第二**：您已经指定了`contentType: 'application/json'`请求标头，但根本没有发送任何 JSON。您正在发送一个`application/x-www-form-urlencoded`请求，这是 jQuery 的默认设置。所以在你的情况下摆脱这个无意义的参数：

```
$("a.AddToCart").click(function () {
    var link = document.URL;

    $.ajax({
        type:"POST",
        url: "/Account/AddToCartHack",
        data: {url : link},
        dataType: "json"
    });

    return false;
}); 
```

**第三**：您已指定您的服务器端代码将返回 JSON ( `dataType: 'json'`)，但您的服务器端代码根本不返回任何内容。这是一种无效的方法。在 ASP.NET MVC 中，您所称的 C# 方法有一个名称。它被称为**控制器动作**。并且在 ASP.NET MVC 控制器操作中返回 ActionResults，而不是 void。所以修复你的控制器动作。也摆脱了`[WebMethod]`属性 - 不再在 ASP.NET MVC 中使用

```
public class AccountController: Controller
{
    public ActionResult AddToCartHack(string url)
    {
        GeneralHelperClass.URL = url;
        return Json(new { success = true });
    }
} 
```

**第四**：您已将 url 硬编码到 javascript 中的控制器操作，而不是使用服务器端帮助程序来生成此 url。这样做的问题是，如果您在 IIS 中的虚拟目录中部署应用程序，您的代码将会中断。不仅如此 - 如果您决定修改 Global.asax 中的路线模式，您将不得不修改所有脚本，因为 url 将不再是`{controller}/{action}`. 我建议您解决此问题的方法是使用不显眼的 AJAX。因此，您只需使用 HTML 帮助程序生成锚点：

```
@Html.ActionLink(
    "Add to cart", 
    "AddToCartHack", 
    "Account", 
    null, 
    new { @class = "AddToCart" }
) 
```

然后不显眼地 AJAXify 这个锚点：

```
$('a.AddToCart').click(function () {
    var link = document.URL;

    $.ajax({
        type: 'POST',
        url: this.href,
        data: { url : link }
    });

    return false;
}); 
```

**第五**：您似乎`document.URL`在处理程序中使用了一些变量`.click()`。它看起来像一些必须在其他地方定义的全局 javascript 变量。不幸的是，您没有显示定义此变量的代码部分，也没有显示为什么要使用它，所以我不能真正提出更好的方法来做到这一点，但我真的觉得它有问题。或者哦，等等，这应该是当前浏览器的 url 吗？？？是这样你应该使用该`window.location.href`属性。就像这样：

```
$('a.AddToCart').click(function () {
    $.ajax({
        type: 'POST',
        url: this.href,
        data: { url : window.location.href }
    });

    return false;
}); 
```

甚至更好，使其成为原始锚的一部分（最终和推荐的解决方案）：

```
@Html.ActionLink(
    "Add to cart", 
    "AddToCartHack", 
    "Account", 
    new { url = Request.RawUrl }, 
    new { @class = "AddToCart" }
) 
```

然后简单地说：

```
$('a.AddToCart').click(function () {
    $.ajax({
        type: 'POST',
        url: this.href
    });

    return false;
}); 
```

现在这比我们最初的要好得多。即使页面上禁用了 javascript，您的应用程序现在也可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T17:35:35.477

以这种方式放置脚本方法，如下所示

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T07:19:26.800

添加成功和错误功能以检查您的 ajax 功能

```
 ...

       $.ajax({
                 type:"POST",
                 url: "/Account/AddToCartHack",
                 data: {url : link},
                 contentType: "application/json; charset=utf-8",
                 dataType: "json",
               success: function(){
                 alert('success');
                },
              error:function(){ 
                  alert('error');
                }
            });
        .... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T08:54:44.740

如果这是 Asp.Net webforms，则需要将 webmethod 设为静态，否则无法通过 JavaScript 访问该方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T18:22:13.227

```
$(document).ready(function () {

    $.ajax({

        url: "Testajax.aspx/GetDate",
        data: "f=GetDate",
        cache: false,
        success: function (content) {
            $('#tableData').append('My Dear Friend');
            alert(content);

        },
        failure: function (response) {
            alert("no data found");
        }

    });
}); 
```

# php - 使用 PHP 魔术 __set 和 __get 方法创建到其他类的访问点

> ID：14091195
> 
> 赞同：0
> 
> 时间：2012-12-30T13:43:22.893
> 
> 标签：php, magic-methods

我正在用 PHP 制作一个框架。我一直在努力寻找一种简单的方法，可以在其他类中使用其他对象。制作全局变量或使用`__construct`'s 参数对我来说不是可行的选择。

我准确地编写了我梦想的代码。通过使用 awesome`__autoload`功能，本系统的工作方式如下：

```
class Index extends Core
{
    public $house = "what a pretty house";
    public function tester()
    {
        $this->view->get(); 
        // Creating the property view with __get and accessing the class with the help of __autoloading. 

    }
} 
```

虽然这很完美，但在创建属性时它不起作用......

```
$this->house = "Not so pretty";  // Still prints the original value 
```

这是核心功能，通过它一切工作

```
class Core 
{
    function __get($property_name)
    {
        $include_directories = array("library", "view", "action", "errors", "template");
        if(!property_exists(__CLASS__, $property_name))
        {   
            foreach($include_directories as $include_directory)
            {
                $path = $this->appRoot() . $include_directory . "/" . $property_name . ".php";
                if(file_exists($path))
                {
                    return new $property_name;
                    break; // exit the loop when the porperty if found
                }

                else 
                {
                    echo "CORE__GET:PROPERTY_NOT_MADE;</BR>";
                }
            }
        }
    }

    function __set($property_name, $property_value)
    {
    // What should I put here?
    }

    public function appRoot()
    {
        return $_SERVER['DOCUMENT_ROOT'] . "/application/";
    }   
} 
```

这是 __autoload 函数...

```
function __autoload($class_name)
{
    $include_directories = array("library", "view", "action", "errors", "template");
    foreach($include_directories as $include_directory)
    {
        $path = $_SERVER['DOCUMENT_ROOT'] . "/application/" . $include_directory . "/" . $class_name . ".php";
        if(file_exists($path))
        {
            include($path);
        }
    }
} 
```

我喜欢我的新系统，因为它完全按照我的需要工作。但是，我很想探索做类似事情的新方法。

我希望我能克服这个问题，它在我的工作中阻碍了我。先感谢您

# c# - 使用 LINQ 查找公共实体

> ID：14091197
> 
> 赞同：0
> 
> 时间：2012-12-30T13:43:28.397
> 
> 标签：c#, entity-framework, linq-to-entities

我有一个汽车模型实体，它也在另一个实体中持有燃料类型。他们有一个多对多的关系。

代码：

```
public class CarModel
{
    public int Id { get; set; }
    public string Model { get; set; }

    public ICollection<CarFuel> Fuel { get; set; }
}

public class CarFuel
{
    public int Id { get; set; }
    public string FuelType { get; set; }

    public ICollection<CarModel> Model { get; set; }
}

int model = 2002; // this is coming from a selectbox

var models = (from m in db.CarModels where m.Id == model select m).ToList();
var fuels = (from e in db.CarFuels select e).ToList();
var result = fuels.Where(p => models.Any(q => q.Fuel == p)).ToList(); // this doesn't work because it is looking for primitive types rather than entitites. 
```

因此，我想查询 CarFuel，它将仅显示与特定模型结果集有关系的类型。所以我不想显示任何与创建的 CarModel 结果集无关的 CarFuel。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T14:00:33.177

```
var fuels  = db.CarFuels.Where(cf => cf.Model.Any(m => m.Id == model)) 
```

# php - 从文件中获取所有内容，包括 PHP 代码

> ID：14091198
> 
> 赞同：0
> 
> 时间：2012-12-30T13:43:33.300
> 
> 标签：php

我正在制作一个小型 CMS 用于练习。我正在使用 CKEDITOR 并试图使其可以在文本中编写类似 %contactform% 的内容，然后我的 PHP 函数将其替换为联系表单。

我已经完成了用表单替换文本。但现在我需要表单的 PHP 代码来发送邮件。我正在使用 file_get_contents(); 但它正在剥离 php 代码。

我用过 include(); 然后从另一个文件中获取 php 代码，现在可以使用。我想用一个文件来做。

那么 - 我可以从包含 php 代码的文件中获取所有内容吗？

**更新**

我会尝试用另一种方式来解释。

我可以在我的 CMS 中创建一个页面，我可以在其中编写标题和一些内容。在内容中我可以写 %contactform%。

当我从数据库中获取内容时，我使用 file_get_contents(); 将 %contactform% 替换为 /inserts/contactform.php 中的内容；我有 HTML 格式的表单和我的 php 代码：

```
if(isset($_POST['submit'])) {
  echo 'Now my form is submitted!';
}

<form method="post">
  <input type="text" name="email">
  <input type="submit" name="submit">
</form> 
```

现在我期待检索表单和激活的 php 代码。但是如果我在表单中按下我的提交按钮，它不会触发 php 代码。

我不想**显示**我希望能够**使用**它的 php 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T13:44:39.847

是的...

```
$content = file_get_contents( 'path to your file' ); 
```

用于打印尝试

```
echo htmlspecialchars( $content ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T14:41:02.960

我仍然必须猜测，但是从您的更新来看，我认为您最终会得到一个变量，其中包含数据库中的内容，`%contactform%`替换为`file_get_contents('/inserts/contactform.php')`.

就像是：

```
$contentToOutput = str_replace(
  '%contactform%',
  file_get_contents('/inserts/contactform.php'),
  $contentFromDatabase
); 
```

如果你`echo`输出那个变量，它只会按原样发送它的内容。不会执行任何 php。

尽管在许多情况下它是有风险的，但如果您知道自己在做什么，您可以使用[eval](http://php.net/manual/function.eval.php)来解析 php 代码。使用这样的混合代码，您可能希望像下面这样。

```
ob_start();
eval('; ?>' . $contentToOutput); 
$parsedContent = ob_get_clean(); 
```

`$parsedContent`现在应该包含执行代码后的结果。您现在可以将其发送给用户或以任何您想要的方式处理它。

当然，您必须确保其中的任何内容`$contentToOutput`都是有效的 php 代码（或 php 与 php-tags 和文本的有效混合）。

[这](https://github.com/symfony/Templating/blob/master/PhpEngine.php)是 symfony *Templating/PhpEngine*类的链接。看一下`evaluate`在实际代码中查看上述示例的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T14:00:16.413

通过阅读修改后的问题，我认为答案是“你不能从这里到达那里”。让我试着解释一下我认为你会遇到什么。

首先，考虑 HTTP 的性质和客户端/服务器模型。客户端发出请求，服务器做出响应。每个请求都是原子的、完整的和无状态的，每个响应都是完整的并且通常是即时的。这就是它的结束。服务器断开连接并返回“睡眠”状态，直到客户端发出新请求。

假设我请求一个网页。PHP 脚本运行并准备响应文档（可能是 HTML），然后服务器将文档发送到我的浏览器。如果文档包含 HTML 表单，我可以将表单提交到*action=*脚本的 URL。但是当我提交表单时，我正在发出一个返回服务器的新请求。

据我了解您的设计，计划是将 HTML 表单和 PHP 操作脚本都放入 CKeditor 的文本区域中 %contactform% 字符串的位置。这将呈现给客户端，客户端会将表单提交回您的服务器，在那里它将运行 PHP 脚本。我只是认为这行不通，如果你找到了让它工作的方法，你基本上是在说，“我将接受外部输入并在 PHP 中运行它。” 这对我来说是不可接受的安全风险。

如果您可以从技术细节中退后一步，只用简单的语言告诉我们您想要实现的目标，我们或许可以提供有关设计模式的建议。

# c++ - 将地址分配给整数变量

> ID：14091203
> 
> 赞同：5
> 
> 时间：2012-12-30T13:44:02.847
> 
> 标签：c++, variables, memory-address

怎么能像这样给整型变量赋值，编译器不会报错。我总是虽然你只能将整数值分配给整数变量

```
int a=0x28ff1c 
```

您可以对 char 变量执行相同的操作，编译器不会给出错误

```
char b=0x28ff1c 
```

它将在控制台屏幕上输出 char b 的垃圾值和 int a 的随机值

```
cout<<b
    <<endl;
cout<<a; 
```

有人可以向我解释为什么 char b 和 int a 的输出存在差异。有人可以向我解释为什么char变量和整数变量可以分配地址吗

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-30T13:44:56.433

`0x28ff1c`不是地址本身 - 它只是一个十六进制数。

以下是等价的：

```
int a =   2686748;  //decimal number
int a =  0x28ff1c;  //hexadecimal number
int a = 012177434;  //octal number 
```

地址由指针表示 - 如果只是地址，您可以使用`void*`：

```
void* p = (void*)0x28ff1c; 
```

在这种情况下

```
int a = p; 
```

不会编译。`p`是地址，数字本身不是。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-30T13:54:46.143

该数字`0x28ff1c`只是十进制（base-10）数字的十六进制（base-16）表示`2686748`。默认情况下打印整数的十进制值，这`cout`可能是您打印的数字。

情况`char b = 0x28ff1c`略有不同，因为

1.  `char`不足以容纳该值。实际结果是它被截断为`0x1c`.
2.  `cout`特殊对待`char`，因为它通常用于保存文本数据，所以`cout`打印带有代码的字符`0x1c`，这是某种控制字符。例如，您可以尝试使用它`0x41`（`'A'`以 ASCII 和 UTF-8 表示）。

请注意，没有任何东西可以标记`0x28ff1c`为地址。地址将由`&a`或组成`(void*)0x28ff1c`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T13:45:52.543

因为在任何以 0x 开头的文字中实际上都是一个整数。所以是允许的。地址~~有时~~可以是整数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T14:15:38.520

您还可以`*(int *)(Address) = value`用作构造来分配 a`value`并`Address`使用@Luchian Grigore 的答案

# javascript - 获取图像的主要色调

> ID：14091205
> 
> 赞同：5
> 
> 时间：2012-12-30T13:44:19.953
> 
> 标签：javascript, image, colors

我正在开发一个空间壁纸共享库。我已经使用 JavaScript 库 color-thief 来检索图像的主**色**，但我遇到了一个问题。大多数壁纸都是深色的。如果用户在搜索壁纸时选择了#07F这样的蓝色，他将不会得到许多具有这种颜色的深色壁纸，因为这些壁纸的主色将接近黑色。

我可以允许使用多种主色进行搜索（例如黑色和蓝色），但这会使搜索更加复杂。

是否有任何 JavaScript 库（必须在客户端完成）能够获得图像的主要**色调**？如果没有，你对我如何实现一个算法来做这件事有任何想法吗？

谢谢阅读 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T14:53:09.863

这比 Javascript 更像是一个设计问题。主色并不总是覆盖最多像素的颜色。这是吸引你眼球的颜色。例如，如果您向某人展示黑色背景上的粉红色星系图片，则主要颜色不是黑色，而是粉红色，因为主要主题是粉红色。所以你需要一个比这更复杂的算法。

此外，黑色和白色在技术上不是颜色。它们分别只是完全没有光或极端高光（或光源）。所以我会排除任何比预定义阈值更暗或更亮的东西（例如，在您的计算中排除顶部和底部的 5%）。

编辑：

我自己实际上可能会尝试在一定的阈值以上（例如，超过 X 像素计数以避免由于噪声引起的误报）以误差幅度获得最饱和像素的颜色。

编辑2：

您也许可以更改[L155](https://github.com/lokesh/color-thief/blob/master/js/color-thief.js#L155)以测试像素的饱和度和暗度。您可能想获得一个为此目的进行 RGB->HSB 转换的库，但我不知道是否有一个好的库。

# r - 如何将列表列表转换为列表数组？

> ID：14091209
> 
> 赞同：3
> 
> 时间：2012-12-30T13:44:56.250
> 
> 标签：r

我在 R 中有一个列表列表。我想将其转换为列表数组，但我只得到一个列表列表数组：

```
r <- list(list(a=1, b=NULL, c=NULL, d=1.23),
          list(a=2, b=NULL, c=NULL, d=3.32),
          list(a=3, b=NULL, c=NULL, d=2.13),
          list(a=4, b=NULL, c=NULL, d=3.25),
          list(a=5, b=NULL, c=NULL, d=0.14),
          list(a=6, b=NULL, c=NULL, d=5.13))
x <- array(r, dim=c(3,2))
x[1,1] # now a list of length 1 containing an element which is a list with components a--d 
```

如您所见，`x[1,1]`（例如）现在是一个列表列表，但“外部”列表是无用的。我宁愿有一个`y`数组`y[i,j]`being `x[i,j][[1]]`。得到这个的最好方法是什么（使用 base-R 中的函数（没有额外的包））？

我尝试使用一些`unlist()`hackery like `array(unlist(r, recursive=FALSE), dim=c(3,2))`，但失败了。`sapply(r, FUN=I)`至少给出一个矩阵......也许这有帮助（？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T15:30:18.717

使用双括号，`x[[1,1]]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T15:17:14.500

按照设计，你不能这样做。

根据定义，向量元素是长度为 1 的向量，而数组/矩阵仍然是具有维度的向量。

列表本身就是通用向量，因此它们可以是其他列表（或数组或矩阵）的元素，但前提是它们本身的长度为 1。

顺便说一句，这就是为什么使用 [ ] 选择列表中包含的对象仅返回包含该对象的大小为 1 的列表，而不是您需要使用 [[ ]] 获取的实际对象的原因。

所以答案是，真的没有办法摆脱“外部”列表。

有关详细信息，请参阅[R 语言定义](http://cran.r-project.org/doc/manuals/R-lang.html#Vector-objects)手册。

# string - stringWithFormat 中的参数数量是否有限制？

> ID：14091214
> 
> 赞同：1
> 
> 时间：2012-12-30T13:45:41.293
> 
> 标签：string, cocoa, nsstring

我正在尝试使用 MFMailComposeViewController 撰写电子邮件，并且我正在使用一个 HTML 字符串来绘制一个表格。它有 265 个参数，所以我必须像这样传递它：

```
[mailViewController setMessageBody:
[NSString stringWithFormat:NSLocalizedString(@"EMAIL_HTML_KEY", nil),

                                                date,

                                                object.foo[0],

                                                [object.bar[0] objectAtIndex:0],

                                                [object.bar[0] objectAtIndex:1], ... ... 
```

当我运行该应用程序时，它总是挂起并出现 EXC_BAD_ACCESS 错误。根据调试器中显示的列表，它只是在 NSDescriptionWithLocaleFunc 之后的 objc_msgSend 处停止，因此很明显我的字符串存在问题。问题是……没有。我仔细检查了这两个部分（字符串本身和参数列表），它们都正常，所以我尝试切断字符串以查看问题出在哪里，我发现只有当字符串足够大时才会出现错误。

字符串="123456" --> 错误

字符串="123" --> 确定

字符串="234" --> 好的

字符串="456" --> 好的

因此，似乎 HTML 字符串格式正确，参数列表也正确。我唯一能想象的是，我可以发送给使用 stringWithFormat 创建的 NSString 的参数数量是有限的。这样对吗？。我会拆分字符串，但作为 HTML 代码，我必须将其作为单个字符串传递给 mailViewController。

有什么建议吗？。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T13:52:30.163

您的崩溃很可能是因为传递给巨大格式字符串（例如“ `[object.bar[0] objectAtIndex:222]`”）的那些随机项目之一将是格式字符串不期望的对象。

为什么不使用“ `NSMutableString`”对象，通过“appendFormat：”或“appendString：”方法编写您的HTML，然后将完全构造的字符串传递给“ `[mailViewController setMessageBody: ]`”

似乎比尝试通过通过 NSLocalizedString 获取的可能容易破坏的格式字符串来实例化不可变的 NSString 要疯狂得多。

另外，如果您通过 NSMutableString 构建字符串，您可能能够追踪您尝试构建的 HTML 代码中是否存在任何实际中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T14:11:58.773

对于您的标题...不。您可以放置​​任意数量的参数。

我可以看到

```
[mailViewController setMessageBody:NSString stringWithFormat:NSLocalizedString 
```

应该是哪个

```
[mailViewController setMessageBody:[NSString stringWithFormat:NSLocalizedString 
```

您应该使用 mutalbeString 和 appendString 并且可以使用循环，因为您的索引被视为从 0 变为 1....

# python - dlopen 出错

> ID：14091218
> 
> 赞同：0
> 
> 时间：2012-12-30T13:45:54.637
> 
> 标签：python, macos, dylib, dlopen

我正在加载动态库（通过 ctypes 在 python 中）并得到这样的错误：

> OSError: dlopen(mlib.dylib, 6): Symbol not found: _NSLocalizedDescriptionKey
> 
> 引用自：/Users/abc/work/as/mlib.dylib
> 
> 预期在：/Users/abc/work/as/mlib.dylib 中的平面命名空间

你知道我该如何解决吗？我想应该链接一些库，但是哪个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T19:26:34.557

链接时，应链接适当的框架，在这种情况下为“-framework Foundation”。

# sorting - elasticsearch中的相关排序

> ID：14091220
> 
> 赞同：0
> 
> 时间：2012-12-30T13:46:06.373
> 
> 标签：sorting, full-text-search, elasticsearch

考虑以下文档架构`{ user_name : string, tweet : string }`。现在，当搜索查询被触发时，结果应该以这样的方式排序，即某些推文`user_name`应该出现在顶部，而其余的推文应该出现在底部。

Soundcloud 的最佳用例。当用户开始搜索时，他/她关注的声音或用户会出现在顶部，而其余内容则在底部。

有没有办法在elasticsearch中做到这一点？

***注意**：如果您能够使用[轮胎宝石](https://github.com/karmi/tire)回答它，那就太好了，否则只有逻辑也是可以接受的。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T15:28:18.440

[您可以使用自定义过滤器分数](http://www.elasticsearch.org/guide/reference/query-dsl/custom-filters-score-query.html)查询将某些结果推送到顶部。只需添加 user_name:certain_name 作为具有足够高提升的过滤器。

# android - 在兼容的基于片段的 ViewPager 中处理 PagerTitleStrip 点击

> ID：14091228
> 
> 赞同：11
> 
> 时间：2012-12-30T13:47:27.540
> 
> 标签：android, android-viewpager, android-fragmentactivity

我有一个带有嵌入式[PagerTitleStrip元素的兼容性](http://developer.android.com/reference/android/support/v4/view/PagerTitleStrip.html)[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)，它工作正常，但点击 PagerTitleStrip 并没有按预期切换到相应的视图。我查看了文档，但小部件没有任何内置方法可将 onClickListeners 附加到 PagerTitleStrip 对象。这似乎有点奇怪，因为这可能是大多数人所期望的。

所以问题是如何使标题栏可点击？

我还试图弄清楚是否有一种方法可以在所选标题条下显示粗下划线而不添加 TabHost 如果可能的话。

这是代码：

主布局view_pager.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <android.support.v4.view.ViewPager
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/my_view_pager"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <android.support.v4.view.PagerTitleStrip
            android:id="@+id/pager_title_strip"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="top"
            android:background="#ccc"
            android:textColor="#fff" />
    </android.support.v4.view.ViewPager>

</LinearLayout> 
```

进入 ViewPager 的两个片段布局：

fragment_connect.xml（第二个是相同的，所以不包括在内）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/text_view_connect"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="connect"
        android:textAppearance="?android:attr/textAppearanceLarge" />
</LinearLayout> 
```

主要活动类StandardViewPagerActivity.java：

```
package com.example.standardviewpager;

import java.util.List;
import java.util.Vector;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.view.PagerTitleStrip;
import android.support.v4.view.ViewPager;
import android.view.Menu;

public class StandardViewPagerActivity extends FragmentActivity {

    private MyPagerAdapter pagerAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.view_pager);
        ViewPager myPager = (ViewPager) findViewById(R.id.my_view_pager);
        PagerTitleStrip pagerStrip = (PagerTitleStrip) findViewById(R.id.pager_title_strip);
        // TODO: add underline for selected title strip
        myPager.setAdapter(pagerAdapter);
        myPager.setCurrentItem(0);
        initialisePaging();
    }

    private void initialisePaging() {

        List<Fragment> fragments = new Vector<Fragment>();
        fragments.add(Fragment.instantiate(this, ConnectFragment.class.getName()));
        fragments.add(Fragment.instantiate(this, ProfilesFragment.class.getName()));
        this.pagerAdapter = new MyPagerAdapter(super.getSupportFragmentManager(), fragments);
        ViewPager pager = (ViewPager) super.findViewById(R.id.my_view_pager);
        pager.setAdapter(this.pagerAdapter);
    }
} 
```

适配器类 MyPagerAdapter.java：

```
package com.example.standardviewpager;

import java.util.List;

import android.os.Parcelable;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.LayoutInflater;
import android.view.View;

public class MyPagerAdapter extends FragmentPagerAdapter {

    private List<Fragment> fragments;

    public MyPagerAdapter(FragmentManager supportFragmentManager, List<Fragment> fragments) {
        super(supportFragmentManager);
        this.fragments = fragments;
    }

    @Override
    public int getCount() {
        return this.fragments.size();
    }

    @Override
    public void destroyItem(View arg0, int arg1, Object arg2) {
        ((ViewPager) arg0).removeView((View) arg2);
    }

    @Override
    public Parcelable saveState() {
        return null;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        return String.format("Title %d", position);
    }

    @Override
    public Fragment getItem(int position) {
            return this.fragments.get(position);
    }
} 
```

最后，两个相同的 Fragment 实现，仅包括第一个 - ConnectFragment.java。

```
package com.example.standardviewpager;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.LinearLayout;
import android.widget.TextView;

public class ConnectFragment extends Fragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        LinearLayout layout = (LinearLayout) inflater.inflate(R.layout.fragment_connect, container, false);
        TextView textView = (TextView) layout.findViewById(R.id.text_view_connect);
        textView.setText("onCreateView() Connect");
        return (View)layout;
        }
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-30T14:22:04.960

> 所以问题是如何使标题栏可点击？

你分叉它并制作你自己的可点击的实现。或者，您切换到`PagerTabStrip`，这是可点击的。或者，您切换到[ViewPagerIndicator](http://viewpagerindicator.com/)指示器之一，该指示器恰好是可点击的并且具有您喜欢的外观。

引用[文档`PagerTitleStrip`](http://developer.android.com/reference/android/support/v4/view/PagerTitleStrip.html)：

> `PagerTitleStrip`是当前页面、下一页和上一页的非交互式指示器`ViewPager`...有关交互式指示器，请参阅`PagerTabStrip`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-25T19:51:19.290

我想这已经太晚了，OP 肯定已经开始了，但是对于那些刚刚来这里寻找一个小部件的人，请[**在这里找到我的叉子**](https://github.com/humblerookie/PagerClickTitleStrip/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-17T03:41:59.997

我还会为其他人（比如我）添加一个注释，他们因为其他原因想要使 PagerTitleStrip 可点击。您确实可以使其可点击。为此，您可以在 xml 中使其可点击，并添加一个指向函数的“onClick”xml 行（就像使用普通按钮一样）。

从那时起，关键是您会想知道基于该点击的页面是什么，因为行为可能会改变。在这种情况下，以下行将为您提供在后续代码中使用的当前项目（在我的情况下显示 Toast 消息）。

```
 int CurrentItem = this.mViewPager.getCurrentItem(); 
```

# linux - .eh_frame 和 .eh_frame_hdr 部分究竟存储了什么？

> ID：14091231
> 
> 赞同：32
> 
> 时间：2012-12-30T13:48:09.707
> 
> 标签：linux, gcc, exception-handling, elf

我知道，在使用支持异常的语言（例如 C++）时，必须向运行时环境提供附加信息，以描述在处理异常期间必须展开的调用帧。此信息包含在目标文件的特殊部分中，例如`.eh_frame`和`.eh_frame_hdr`。

但是，这些部分中存储了什么样的数据结构？我的意思是，可以使用任何 C 结构来读取它们吗？它们与GNU 汇编代码中的`.cfi`语句（例如`.cfi_startproc`、`.cfi_endproc`、`.cfi_offset`、和）有什么关系吗？如果他们这样做，这些条款中的每一个在这些部分中导致什么？该部分与该部分有什么关系？`.cfi_def_cfa_offset``.cfi_personality``.cfi_lsda``.eh_frame_hdr``.eh_frame`

我希望尽可能多地使用 C 结构进行解释。谢谢你。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-30T15:20:00.720

请参阅[cfi 指令](http://web.archive.org/web/20130111101034/http://blog.mozilla.org/respindola/2011/05/12/cfi-directives)

它应该涵盖大部分相关部分的历史和理论。

关于eh_frame，它包含异常展开和源语言信息。本节中的每个条目由单个 CFI（调用帧信息）表示

见，[linuxfoundation 中的 eh_frame](http://refspecs.linuxfoundation.org/LSB_3.0.0/LSB-Core-generic/LSB-Core-generic/ehframechpt.html)

eh_frame_hdr，由 c++ 运行时代码用于访问 eh_frame。这意味着，它包含指针和二进制搜索表，以有效地从 eh_frame 检索信息。

现在，如果你想看看你是如何读/写这部分的，那么我建议你看看下面的链接器代码。

（寻找[EhFrame.cpp、EhFrameHdr.cpp 和 EhFrameReader.cpp](https://github.com/mclinker/mclinker/commit/9b0b86414c9e41812bde00863b61c620f4debf1d)）

祝你好运 ！！

# ffmpeg - 带有嵌入式封面的ffmpeg转码错误

> ID：14091233
> 
> 赞同：2
> 
> 时间：2012-12-30T13:48:25.530
> 
> 标签：ffmpeg, mp3

我试图将 mp3 文件转码为 wav 格式，以便它们可以在另一个脚本中使用。该脚本要求文件为 44.1Khz，因此我将其添加到 ffmpeg 命令中。

当文件具有嵌入的封面图像时，就会出现问题：

```
时长：00:05:53.85，开始：0.000000，比特率：319 kb/s
    流 #0:0：音频：mp3、44100 Hz、立体声、s16p、320 kb/s
    流 #0:1：视频：mjpeg，灰色，938x936 [SAR 300:300 DAR 469:468]，90k tbr，90k tbn，90k tbc
    元数据：
      标题 ：
      评语：封面（正面）
    流 #0:2：视频：mjpeg、yuvj420p、88x31 [SAR 96:96 DAR 88:31]、90k tbr、90k tbn、90k tbc
    元数据：
      标题 ：
      评语：封面（正面）

```

我使用的 ffmpeg 命令是：

```
ffmpeg -loglevel warning -y -i :source -vn -ac 2 -ar 44100 -f wav :dest 
```

因此，在对文件进行转码时会引发警告：

```
[mp3 @ 0xa0bba60] Format mp3 detected only with low score of 24, misdetection possible!
[mp3 @ 0xa0bba60] max_analyze_duration 5000000 reached at 5015510
[mp3 @ 0xa0bba60] Estimating duration from bitrate, this may be inaccurate 
```

生成的 wav 文件存在一些问题（可能是错误的标头信息？），我认为它报告的帧数比文件中的帧数多，因此后续脚本超出了数据的结尾。

我相信问题在于 mp3 文件中的额外流（封面图像），但我似乎无法告诉 ffmpeg 只处理音频。

我用于示例的文件是： [07-Zimmer070-KOSMORAUM-_Junior85-For_reason_forgotten.mp3](http://www.archive.org/download/ZIMMER070/07-Zimmer070-KOSMORAUM-_Junior85-For_reason_forgotten.mp3) (http://archive.org/details/ZIMMER070)

ffmpeg 是他们 git repo 中的最新版本：git://source.ffmpeg.org/ffmpeg.git

非常感谢您提前提供的任何信息！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T14:22:22.477

没关系，ffmpeg 确实有效 - 是我的脚本没有！

# google-app-engine - 为静态 HTML 文件定义 CharSet

> ID：14091236
> 
> 赞同：4
> 
> 时间：2012-12-30T13:48:46.987
> 
> 标签：google-app-engine, http-headers, content-type, static-files, app.yaml

我只是尝试了几次为从 Google App Engine 提供的静态文件定义字符集，但都失败了。

文件确实在文件的标题部分包含正确的 meta-equiv 标记：

```
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" /> 
```

但它没有作为标题传递，浏览器需要从实际文档中获取它。

当然，如果我使用脚本（或 Python Google App Engine 程序），那么我可以将其作为响应标头正确传递。

```
Content-Type: text/html; charset=UTF-8 
```

我试图添加到 app.yaml 文件行：

```
- url: /
  static_files: root/create.html
  upload: root/create.html
  http_headers:
    Content-Type: text/html; charset=UTF-8 
```

但是 appcfg.py 只是告诉我：URLMap 类型的对象的意外属性“http_headers”。在“9oxnet/app.yaml”中，第 41 行，第 5 列

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-30T13:48:46.987

要解决此静态文件的字符集标头问题，您需要在 app.yaml 文件中定义字符集：

```
 - url: /
   static_files: root/create.html
   upload: root/create.html
   mime_type: text/html; charset=UTF-8 
```

现在静态文件的 Content-Type 标头也正确包含字符集信息。

```
 Content-Type: text/html; charset=UTF-8 
```

如果标题中不包含字符集信息，则某些浏览器不会尽快解析页面。

# javascript - Javascript $ 引用错误

> ID：14091239
> 
> 赞同：-3
> 
> 时间：2012-12-30T13:49:04.207
> 
> 标签：javascript

我是 Javascript 和 jQuery 的新手，下面的代码来自 Jquery 和 Javascript。我的问题是，当我运行此代码时，我的错误控制台中出现错误消息：

```
ReferenceError: $ is not defined. 
```

我不知道为什么它不识别 $ 符号。

```
 <link href="../_css/site.css" rel="stylesheet">
  <script src="../_js/jquery-1.7.2.min.js"></script>
      <script>
  $(document).ready(function() {
  $('body').hide().fadeIn(3000);
  });
  </script>
  </head> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T14:18:03.907

我不认为你正在加载 jQuery 库。将此替换为您的本地 jquery 参考：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

同样`../`在 CSS 和 jQuery 引用的开头都引用了父目录。如果文件子目录与引用`html`文件位于同一目录中，请删除`../`

# ruby - 缓存 neo4j HTTP 请求

> ID：14091244
> 
> 赞同：1
> 
> 时间：2012-12-30T13:49:53.257
> 
> 标签：ruby, http, neo4j

我有一个 Neo4j 数据库服务器，它位于一个 ruby​​ HTTP 代理后面，它处理对 Heroku 数据库的用户身份验证。我一直在尝试一种优雅的方式来处理来自 neo4j 服务器的 ReST 响应的缓存，同时在节点和关系发生变化时使这些结果无效。

目前，我的数据库很小，读取的可能性远大于写入的可能性，因此将所有 GET 结果保存在地图中并在 POST、PUT 或 DELETE 请求时清除它们可能是一种选择，尽管我还没有实现它所以没有知道改进是什么。从长远来看，我想要一个更细粒度的缓存/失效解决方案。

有没有人实施过这样的事情或有更好的解决方案的想法？

# c++ - 有和没有操作系统的两个空的 main{} 程序有什么区别？

> ID：14091246
> 
> 赞同：9
> 
> 时间：2012-12-30T13:49:56.157
> 
> 标签：c++, c, compiler-construction, operating-system, runtime

`main {}`使用 ac/c++ 编译器针对有 OS（比如 linux）和没有 OS（比如嵌入式 DSP 目标）的目标编译两个空程序有什么区别？我特别想知道当有操作系统和其他情况时编译器的不同之处。在两种情况下，编译器/语言运行时有何不同？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-30T14:00:41.297

实际上，*链接器*在打包程序以在操作系统上运行与构建仅在裸硬件上运行的程序时所做的工作不同。编译器仅生成包含针对主机体系结构的指令的目标文件，这些块稍后由链接器组合和打包。

旨在在操作系统上运行的程序必须具有一定的二进制结构——这就是可执行格式发挥作用的地方。例如，这种格式可能规定程序应该在开头有几个标题部分，然后代码应该跟随。操作系统加载器的工作是解释这个结构，然后将代码部分包含的指令流提供给 CPU。

相比之下，旨在在裸硬件上运行的程序通常没有特殊结构，可以直接馈送到 CPU。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-30T14:24:19.917

> 实际上，链接器在打包程序以在操作系统上运行与构建仅在裸硬件上运行的程序时所做的工作不同。编译器仅生成包含针对主机体系结构的指令的目标文件，这些块稍后由链接器组合和打包。
> 
> 旨在在操作系统上运行的程序必须具有一定的二进制结构——这就是可执行格式发挥作用的地方。例如，这种格式可能规定程序应该在开头有几个标题部分，然后代码应该跟随。操作系统加载器的工作是解释这个结构，然后向 CPU 提供代码部分包含的指令流。
> 
> 相比之下，旨在在裸硬件上运行的程序通常没有特殊结构，可以直接馈送到 CPU。

我想在 Blagovest 这个写得很好的答案的基础上再接再厉。事实上，正如他所暗示的那样，可执行容器格式和二进制接口以及诸如此类的东西是不同的。然而，最大的区别可能是应用程序代码执行的*实际*主入口点以及启动代码和运行时库的存在；但是，如果您知道自己在做什么，那么您也可以避免在成熟的操作系统上链接后者。

通常存在启动例程、运行时库（例如 crt0）时，应用程序的实际入口点不是`main`其他东西（通常是`_start`. 在这个实际的入口点将控制权交给您`main`之前，它可能会执行一系列非常具体的任务，通常与初始化有关。

总是有 Wikipedia 以[获取有关 crt0 的更多信息](http://en.wikipedia.org/wiki/Crt0)。

但是，在裸机平台上，编译器可能没有这样的例程。因此，控制权可能会直接交给您`main`，而要在平台上执行的第一个代码将是您的。

你去吧，这是两种`main`s 之间最根本的区别。但是，我不得不说你的问题有点模糊，因为如果你自己初始化堆栈等，你可以在没有启动脚本的情况下取消，你也可以使用运行时库来完成所有这些工作（大多数？）裸-金属平台。事实上，这一切都取决于您的编译器套件、您的目标平台等。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-30T16:19:37.150

我很想说没有区别。编译器（或翻译系统）所做的很大程度上取决于实现。翻译系统可能为 Windows 做与 Linux 不同的事情，即使两者都符合操作系统的条件。

主要区别在于实现是否托管。如果它不是托管的，那么它甚至可能不支持 `main`，或者如果它支持，它可能不支持`main`带参数。非托管实现在启动时所做或需要的是实现定义的。虽然也有很多关于在托管环境中启动的“实现定义”，但实现*需要*支持 `main`、返回`int`和至少两个签名，并且应用程序需要提供这样的功能。

请注意，在过去和今天，许多您认为托管的实现实际上并不是出于各种原因。例如，在过去，g++ 将自己记录为非托管（至少 gcc 是这样），因为他们无法控制并且无法保证实现的库部分。而且即使在今天，微软的 C++ 在生成控制台应用程序时也只能被认为是托管的；Windows 应用程序没有`main`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T17:08:38.787

@BlagovestBuyukliev 提供了一个写得很好的答案。

I'd like to expand it a bit - No OS actually means no software-implemented OS. Piece of HW capable of executing a binary code also has a protocol that handles the loading of the program and feeding it into the CPU and all the rest of low-level details. In this case the "OS" is actually present as a HW implemented one. From this point on the differences between it and standard OS are not principal but technical, as far as the binary code execution considered.

# jquery - Jquery - .text() , .html() 在 IE8 上不起作用

> ID：14091252
> 
> 赞同：4
> 
> 时间：2012-12-30T13:50:58.500
> 
> 标签：jquery, html, internet-explorer

这是代码和 jsfiddle 链接。我尝试了 .text 和 .html 这两个功能。但两者都不适用于 IE8。任何人都可以为我提供 IE 的解决方案吗？（我用谷歌搜索，人们似乎有类似的问题，但无法得到解决）谢谢

[http://jsfiddle.net/3eaGL/](http://jsfiddle.net/3eaGL/)

```
 <div class="controls">       
            <div class="btn-group" data-toggle="buttons-radio">
                <input name="MySecurity[my_education]" id="MySecurity_my_education" type="hidden" value="0" />                            
                <button type="button" class="btn" value="2" display="Private">P</button>
                <button type="button" class="btn" value="1" display="Friends">F</button>
                <button type="button" class="btn" value="0" display="All ( Public )">A</button>
            </div>   
            <text class="mySecurityDisplay"></text>  
       </div>  

$("button[display]").bind('click', function(){
                    var buttonValue=this.value;
                    $(this).siblings("input[type=hidden]").val(buttonValue);
                    $(this).parent().next().text($(this).attr( 'display' ));
                 }); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-30T13:59:11.220

问题是这样的：

```
<text class="mySecurityDisplay"></text> 
```

IE8 不会呈现未知标签，因此 jQuery 不会选择您的元素，问题与`html`or`text`方法无关。请改用有效的标签，您的代码将起作用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-30T13:57:39.883

你的问题是`<text>`标签。这不是有效的 HTML 标记。版本 9 以下的 IE 以这种方式解释未知标签：`<text class="mySecurityDisplay"></text>`将变为`<text class="mySecurityDisplay"/><text/>`an，因此您不能在其中插入任何内容。

只需编写`<div class="mySecurityDisplay"></div>`，这将起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T14:13:11.373

好的，我得到了它的工作问题是`<text>`元素

[http://jsfiddle.net/3eaGL/7/](http://jsfiddle.net/3eaGL/7/)

Jquery 在选择元素后创建了一个实例对象，`<text>`但由于它不是有效的 HTML 标记，Jquery 对象不会返回任何方法供您处理。

就像您尝试对元素执行 a 一样`val()`，`<span>`但仅在 html 表单元素中有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T13:57:54.353

1.  检查您是否有有效的 html，可能存在不匹配的标签。

2.  尝试使用 append 而不是 html 方法。

# actionscript-3 - 在通过 AS3 中的 NetStream 发送之前访问麦克风音频样本

> ID：14091253
> 
> 赞同：0
> 
> 时间：2012-12-30T13:51:19.177
> 
> 标签：actionscript-3, flash, apache-flex, netstream

我正在用 Flex 编写 p2p 语音聊天，并处理音频数据。我将音频（麦克风）连接到 NetStream，一切正常。有没有办法在将麦克风样本发送给其他对等方之前访问它？预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T21:26:26.567

是的，要捕获麦克风音频，请侦听 Microphone 实例调度的 sampleData 事件。为此事件调度的 SampleDataEvent 对象包含音频数据。

有关如何执行此操作的完整信息和示例，[请参阅此页面！](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7d1d.html#WS5b3ccc516d4fbf351e63e3d118a9b90204-7d0d)

# android - 如何在android中显示我的应用程序的速率对话框

> ID：14091259
> 
> 赞同：1
> 
> 时间：2012-12-30T13:52:16.930
> 
> 标签：android, android-intent, google-play

我正在开发使用户在 Google Play 商店中对我的应用程序进行评分的应用程序，因此我希望用户在单击我的应用程序中的评分按钮时，重定向到市场中的评分对话框而不是我的应用程序页面。我的代码是：

```
try {
    final String pkgName = getPackageName();
    startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=" + pkgName)));
} catch (Exception e) {
    vShowDialog(getString(R.string.cannot_connect_title), getString(R.string.cannot_connect_title) + getString(R.string.error_TryAgain));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T14:01:16.937

据我所知，您只能在所需页面上打开 Google Play 应用程序。之后发生的任何事情都是你无法企及的。

# visual-studio - 为什么正常关机后VS 2012会重启

> ID：14091263
> 
> 赞同：1
> 
> 时间：2012-12-30T10:37:03.733
> 
> 标签：visual-studio

最近在我使用正常关机（从文件菜单退出）后，VS2012 开始重新启动。至少可以说很烦人，我通常不得不通过任务管理器停止重新启动。

我假设我的设置发生了一些变化。在 StackOverflow 上搜索，通常不会针对此问题找到任何结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T11:10:38.630

首先尝试在[安全模式下](http://msdn.microsoft.com/en-us/library/ms241278%28v=vs.80%29.aspx)运行VS。

如果它退出 OK 尝试禁用一些扩展。首先是最庞大的（一些小型实用程序导致这种情况的可能性很低）。

即使使用 VS 库中一些最流行的扩展（例如 CodeMaid），我也遇到了很多问题。如果你有很多安装，它也可能是一些冲突。

另一种选择是尝试使用 VS 安装程序修复安装 - 或完全重新安装它。

# c# - 使用 StreamReader 读取 XElement 留下开放元素

> ID：14091266
> 
> 赞同：1
> 
> 时间：2012-12-30T13:53:41.367
> 
> 标签：c#, serialization, stream, xelement

我有一个`MemoryStream`包含 XML 的文件，我将其写入文件如下：

```
var xml = XElement.Load(data.Content); // data.Content is of type `Stream`
var contentElement = new XElement("Content", xml);
var information = new XElement("TestInformation",
                      new XAttribute("Name", data.Descriptor.Name),
                      new XAttribute("Description", data.Descriptor.Description),
                      new XAttribute("Owner", data.Descriptor.Owner),
                      contentElement); 
```

（`data`是一个内部类型——`DataObject`它包含一个`Stream`（称为内容）和一个带有元数据的描述符）。

后来我尝试从这个文件中读取如下：

```
var returnValue = new DataObject();
var xElement = XElement.Load(fullPath);//the file path
returnValue.Descriptor = new Descriptor
                        {
                            Name = xElement.Attribute("Name").Value,
                            Description = xElement.Attribute("Description").Value,
                            Owner = xElement.Attribute("Owner").Value
                        };
returnValue.Content = GetContent(xElement.Element("Content")); 
```

**获取内容方法：**

```
private Stream GetContent(XElement element)
{
    var testElement = element.Elements().First();
    var contentStream = new MemoryStream();
    var streamWriter = new StreamWriter(contentStream);
    streamWriter.Write(testElement);
    contentStream.Position = 0;
    return contentStream;
} 
```

当我尝试将流作为我需要的内部类型读取时，我得到一个`SerializationException`说法，即某些元素没有关闭，实际上它们没有关闭 - 如果我使用 a`StreamReader`来读取这个流，它不包含所有数据我在`XElement`. 我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T06:20:37.300

我错过了使用`StreamWriter.Flush()`. 此方法导致将写入器的缓冲区写入流。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-30T13:58:52.390

`[Serializable]` 像这样写 上面的类

```
[Serializable]
public class myClass{
//TODO: Your code here 

} 
```

试试看，然后反馈给我

# eclipse-plugin - JSTestDriver 的 setUp 函数的正确语法

> ID：14091274
> 
> 赞同：2
> 
> 时间：2012-12-30T13:54:58.083
> 
> 标签：eclipse-plugin, js-test-driver

Eclipse Juno 服务版本 1

工作单元测试的示例...

```
InRangeTest = TestCase("InRangeTest");

InRangeTest.prototype.test01 = function()
{
    var ir = new InRange(0.0, "&lt;", Number.MAX_VALUE, "&le;");
    assertTrue(ir.isInRange(0.3));
}; 
```

但是，要进行不止一项测试，我相信我应该使用`setUp`. 除非我弄错了，否则我`setUp`不必`var ir`在每个单元测试中实例化。所以，我尝试了以下...

```
InRangeTest = TestCase("InRangeTest");

InRangeTest.prototype.setUp = function()
{
    var ir = new InRange(0.0, "&lt;", Number.MAX_VALUE, "&le;");
};

InRangeTest.prototype.test01 = function()
{
    assertTrue(ir.isInRange(0.3));
}; 
```

只是，我收到错误消息

> ReferenceError: ir 未定义

替换`var ir`为`this.ir`没有得到它的工作。

怎么了？

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T14:55:38.297

如果你在这两个函数中都使用 this.ir 它应该可以工作：

```
InRangeTest = TestCase("InRangeTest");

InRangeTest.prototype.setUp = function()
{
    this.ir = new InRange(0.0, "&lt;", Number.MAX_VALUE, "&le;");
};

InRangeTest.prototype.test01 = function()
{
    assertTrue(this.ir.isInRange(0.3));
}; 
```

# java - 从数据库值 java.lang.NullPointerException 更改标签名称

> ID：14091278
> 
> 赞同：-1
> 
> 时间：2012-12-30T13:55:44.153
> 
> 标签：java, mysql, database, swing, user-interface

我有一个数据库表如下：

```
CREATE TABLE "AcademicInfo" ("academicid" INTEGER PRIMARY KEY  NOT NULL  UNIQUE , "Title" 
CHAR NOT NULL , "Forename" CHAR NOT NULL , "Surname" CHAR NOT NULL , "Role" CHAR NOT NULL,
"Room" CHAR NOT NULL , "Page" CHAR NOT NULL , "Hours" CHAR NOT NULL , "Phone" CHAR NOT NULL,     
"Mobile" CHAR NOT NULL , "Email" CHAR NOT NULL , "Image" BLOB, "Password" CHAR NOT NULL ) 
```

以下类：

```
public class MainMenu extends JFrame
{
    Academic ac = new Academic();
    Connection conn = JavaConnect.ConnectDB();
    PreparedStatement pst = null;
    String sql; 
    ResultSet rs = null;

    /**
     * Creates new form MainMenu
     */
    public MainMenu() {
        initComponents();
    }

    public void Update_table()
    {
        try {
            String sqlStatement = "SELECT Title, Forename, Surname, Role FROM AcademicInfo ";
            pst = conn.prepareStatement(sqlStatement);
            rs = pst.executeQuery();
            table_academic.setModel(DbUtils.resultSetToTableModel(rs));
        }
        catch (Exception e) {
            JOptionPane.showMessageDialog(null, e);
        }
        finally {
            try {
                if (rs != null) {
                    rs.close();
                }
                if (pst != null) {
                    pst.close();
                }
                if (conn != null) {
                    conn.close();
                }
            } catch (SQLException ex) {
                Logger lgr = Logger.getLogger(MainMenu.class.getName());
                lgr.log(Level.WARNING, ex.getMessage(), ex);
            }
        }
    }

    private void table_academicMouseClicked(MouseEvent evt)
    {
        try {
            int row = table_academic.getSelectedRow();
            String table_click = (table_academic.getModel().getValueAt(row, 2).toString());
            String sqlSt = "SELECT * FROM AcademicInfo WHERE Surname='"+table_click+"'";
            pst = conn.prepareStatement(sqlSt);
            rs = pst.executeQuery();

            if(rs.next()) {
                label_name.setText(""+rs.getString("Surname"));
            }
        }
        catch(Exception e) {
            JOptionPane.showMessageDialog(null, e);
        }
    }
} 
```

我在“table_academicMouseClicked”遇到问题。我的目标是，当在表上单击记录时，它会从数据库中获取确切的姓氏，并适当地设置“label_name”，但在那个阶段我得到了 java.lang.NullPointerException。我只有事件处理程序方法有问题，没有别的问题。我在 AcademicMouseClicked() 做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T14:06:22.323

在initialize方法中检查是否已经初始化`label_name`。

```
label_name = new JLabel(); 
```

# google-maps - 谷歌地图使用算法/方法寻找两个城市之间的路径

> ID：14091279
> 
> 赞同：4
> 
> 时间：2012-12-30T13:56:00.013
> 
> 标签：google-maps

最近我有一个工作面试，他们问我“谷歌地图使用哪种方法来找到两个城市之间的最短路径？”。我没有那个问题的答案，但我猜他们使用“最短路径算法”来寻找路径，但面试官说“不”。在那次采访之后，我用谷歌搜索了很多，但没有找到任何方法。如果您对谷歌地图如何找到两个城市之间的最短路径有任何想法，请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-07T14:33:40.147

碰巧我刚刚参加了一个关于它的演讲。Dijkstras 算法对谷歌来说效率太低了。虽然复杂度 n log n 很好，但它所花费的绝对时间非常大。

Google 使用[Contraction Hierarchies](https://en.wikipedia.org/wiki/Contraction_hierarchies)的变体。它比 Dijkstra 更快，因为网络是经过预处理的。尽管有更快的算法涉及预处理，但 CH 提供了很大的灵活性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-09T09:20:53.020

A*呢？它似乎适合寻路。

# algorithm - 套接字的良好协议实践/模板？

> ID：14091283
> 
> 赞同：0
> 
> 时间：2012-12-30T13:57:13.963
> 
> 标签：algorithm, sockets, tcp, protocols

是的，我正在寻找一些更高级的灵活协议来实现我的套接字。我将通过**同一个 TCP 套接字传输数据、视频、音频和文本。**

我正在使用的当前协议是这样的：**获取数据长度和标头。把它写出来。然后写出实际数据。另一方将读取长度和标头的第一个字节，然后接收那么多。**

您会注意到这并不好，因为我只能在套接字上同时发送一种类型的数据。

那么我该如何改进呢？

非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T14:12:46.980

如果您要发送不同类型的数据作为有效负载，那么您可能需要区分您正在写出的标头中的类型。除此之外，实际上并没有任何关于制定自己的协议的规则，这就是一半的乐趣！这一切都归结为对您的软件有用的东西。

# php - 如何获取proc_open（）执行的进程的内存使用情况

> ID：14091284
> 
> 赞同：0
> 
> 时间：2012-12-30T13:57:18.393
> 
> 标签：php, windows

我必须测量 proc_open() 执行的进程的内存使用情况和执行时间。测量时间并不难，但我找不到任何方法来获取内存使用情况。（程序可以很快终止）

有什么方法可以获取由执行的进程的内存使用情况`proc_open()`吗？

由于某种原因，我的操作系统是 Windows ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T14:26:43.623

@love-paper，利用`descriptorspec`proc_open 的参数将内存使用情况写入文件，然后您可以读取该文件。

**父进程**

```
$child_id = uniqid();
$descriptorspec = array(
   2 => array("file", "/tmp/$child_id", "a") // stderr is a file to write to
);
proc_open($cmd, $descriptorspec);

$memory_used = file_get_contents("/tmp/$child_id"); 
```

**子进程**

```
// at the end of the script
file_put_contents('php://stderr', memory_get_peak_usage(true)); 
```

# jquery - 使用 jQuery 构建的 HTML 元素在 Chrome 中是不同的

> ID：14091286
> 
> 赞同：1
> 
> 时间：2012-12-30T13:57:38.647
> 
> 标签：jquery, ckeditor

我正在使用 CKEditor 插入引用标记（脚注）。我编写了一个 CKEditor 插件，允许用户单击 CKEditor 实例中的按钮并输入新的引用或选择现有的引用。标记是使用 jQuery 构建的：

```
 // see http://www.w3.org/TR/html5/common-idioms.html#footnotes
    var $cite = $("<sup>").append($("<a>").attr("href", "#").attr("data-citationid", citationId).html("[" + citationId + "]"));
    editor.insertHtml($cite.get(0).outerHTML); 
```

where`data-citationid`引用数据库中引文的 id。问题是 Chrome (23.0.1271.97 m) 中插入的标记不同。

Firefox (17.0.1) 和 IE (9.0.8112.16421) 插入所需的

```
<sup><a data-citationid="26" href="#">[26]</a></sup> 
```

但 Chrome 会去除`<sup>`标签并插入

```
<a data-citationid="26" href="#" style="vertical-align: super;">[26]</a> 
```

我的问题是：

*   我可以构建标记以使其始终按需要呈现吗？
*   浏览器或 CKEditor 是否更改了标记？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T16:23:57.930

.outerHTML 是原生 JS 而不是 jquery，它的实现可能会有所不同。尝试包装它并`.html()`像这样调用包装器

```
$cite.clone().wrap('<div>').parent().html(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T22:20:47.847

`insertHTML`由于浏览器不一致，不应用于插入 HTML。插入 HTML的[正确方法](http://ckeditor.com/comment/56377#comment-56377)是创建一个元素并调用`insertElement`.

这对我有用：

```
 var cite = "<sup><a href=\"#\" data-citationid=\"" + citationId + "\">[" + citationId + "]</a></sup>";
    var element = CKEDITOR.dom.element.createFromHtml(cite, editorInstance.document);
    editorInstance.insertElement(element); 
```

# jquery - $(...).text(...).html 不是收到的函数错误，如何解决

> ID：14091293
> 
> 赞同：1
> 
> 时间：2012-12-30T13:58:05.140
> 
> 标签：jquery, html

我有一段代码，通过确定上传是否成功、取消或不成功，它会显示相关消息：

```
function stopImageUpload(success, imagefilename){

      if (success == 1){
         result = '<span class="imagemsg'+imagecounter+'">The file was uploaded successfully</span>';      
         $('.listImage').eq(window.lastUploadImageIndex).append('<div>' + htmlEncode(imagefilename) + '<button type="button" class="deletefileimage" image_file_name="' + imagefilename + '">Remove</button><br/><hr/></div>'); 
      }
      else if (success == 2){
          result = '<span class="imagemsg'+imagecounter+'"> The file upload was cancelled</span>';
      }
      else {
         result = '<span class="imagemsg'+imagecounter+'">There was an error during file upload</span>';
      }

    }); 
```

现在根据上传的结果，我试图确定每条消息应该出现的时间：

iframe 加载的当前代码：

```
$(imageuploadform).find(".imageCancel").on("click", function(event) {
                  $('.upload_target_image').get(0).contentwindow;
                  stopImageUpload(2);

      $("iframe[name='upload_target_image']").on("load",function() {
      stopImageUpload(1);
    }).attr("src", "cancelimage.php"); 
```

iframe 加载的原始代码：

```
$(imageuploadform).find(".imageCancel").on("click", function(event) {
                  $('.upload_target_image').get(0).contentwindow;

      $("iframe[name='upload_target_image']").on("load",function() {
      stopImageUpload(2);
    }).attr("src", "cancelimage.php"); 
```

原始代码发生的情况是，当文件成功上传时，发生的事情是瞬间显示成功 == 1 消息，但随后立即显示取消消息，即成功 - 2。

这显然是不正确的，所以尝试修复它，我尝试了当前的代码解决方案，所以我认为如果取消，显示成功 == 2 消息，如果文件成功，则显示成功 == 1 消息那条信息没有改变。

但问题是当前代码在此行下方提供了错误，而原始代码从未提供此错误：

```
function htmlEncode(value) { return $('<div/>').text(value).html(); } 
```

显示的错误是：

> typeError: $(...).text(...).html 不是函数

我的问题是如何解决这个错误？我假设我需要更改 iframe 加载中的代码以防止这种情况发生。

**更新：**

HTML：

```
<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target_image' onsubmit='return imageClickHandler(this);' class='imageuploadform' > 
    <p class='imagef1_upload_form' align='center'><label>
    Image File: <input name='fileImage' type='file' class='fileImage' /></label><br/>
    <input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' /></label>
    <input type='reset' name='imageCancel' class='imageCancel' value='Cancel' /></label>" +
    </p><p class='listImage' align='left'></p>" +
    <iframe class='upload_target_image' name='upload_target_image' src='#' style='width:0px;height:0px;border:0px;solid;#fff;'></iframe></form> 
```

查询：

```
var sourceImageForm;

function htmlEncode(value) { return $('<div/>').text(value).html(); }

//Function for when file starts uploading

function startImageUpload(imageuploadform){

  $(imageuploadform).find('.imagef1_upload_process').css('visibility','visible');
  $(imageuploadform).find('.imagef1_cancel').css('visibility','visible');
  $(imageuploadform).find('.imagef1_upload_form').css('visibility','hidden');
  $(imageuploadform).find('.imagemsg').css('visibility','hidden');
  sourceImageForm = imageuploadform;

          $(imageuploadform).find(".imageCancel").on("click", function(event) {
                  $('.upload_target_image').get(0).contentwindow;
                  stopImageUpload(2);

      $("iframe[name='upload_target_image']").on("load",function() {
      stopImageUpload(1);
    }).attr("src", "cancelimage.php");

}); 
      return true;
}

      var imagecounter = 0;

//Function for after upload has stopped

function stopImageUpload(success, imagefilename){

      var result = '';
      imagecounter++;

      if (success == 1){
         result = '<span class="imagemsg'+imagecounter+'">The file was uploaded successfully</span>';      
         $('.listImage').eq(window.lastUploadImageIndex).append('<div>' + htmlEncode(imagefilename) + '<button type="button" class="deletefileimage" image_file_name="' + imagefilename + '">Remove</button><br/><hr/></div>'); 
      }
      else if (success == 2){
          result = '<span class="imagemsg'+imagecounter+'"> The file upload was cancelled</span>';
      }
      else {
         result = '<span class="imagemsg'+imagecounter+'">There was an error during file upload</span>';
      }

      $(sourceImageForm).find(".fileImage").replaceWith("<input type='file' class='fileImage' name='fileImage' />");

  var _imagecounter = imagecounter;

$('.listImage').eq(window.lastUploadImageIndex).find(".deletefileimage").on("click", function(event) {
    var image_file_name = $(this).attr('image_file_name');

    jQuery.ajax("deleteimage.php?imagefilename=" + image_file_name)
        .done(function(data) {

        $(".imagemsg" + _imagecounter).html(data);
    });

    $(this).parent().remove();
});

      return true;   
}

//clickHandler function which handle the submit when upload button is click

  function imageClickHandler(imageuploadform){ 
  if(imageValidation(imageuploadform)){ 
      window.lastUploadImageIndex = $('.imageuploadform').index(imageuploadform); 
      return startImageUpload(imageuploadform); 
  } 
  return false;
} 
```

PHP（上传文件服务器端）：

```
<?php

ini_set('display_errors', 1);
error_reporting(E_ALL);

session_start();

if ($_FILES['fileImage']['error'] === UPLOAD_ERR_OK) {
$result = 0;

if (getimagesize($_FILES['fileImage']['tmp_name'])) {
if ((($_FILES["fileImage"]["type"] == "image/gif") || ($_FILES["fileImage"]["type"] == "image/jpeg") || ($_FILES["fileImage"]["type"] == "image/pjpeg") || ($_FILES["fileImage"]["type"] == "image/jpg")) && ($_FILES['fileImage']['size'] > 0)) {
if (is_file("ImageFiles/" . $_FILES['fileImage']['name'])) {
$parts = explode(".", $_FILES['fileImage']['name']);
$ext   = array_pop($parts);
$base  = implode(".", $parts);
$n     = 2;

while (is_file("ImageFiles/" . $base . "_" . $n . "." . $ext))
    $n++;
$_FILES['fileImage']['name'] = $base . "_" . $n . "." . $ext;

move_uploaded_file($_FILES["fileImage"]["tmp_name"], "ImageFiles/" . $_FILES["fileImage"]["name"]);
$result = 1;

}

else {
move_uploaded_file($_FILES["fileImage"]["tmp_name"], "ImageFiles/" . $_FILES["fileImage"]["name"]);
$result = 1;
}

}

}
} else {
echo "Upload was not successful";
}

?> 

<script language="javascript" type="text/javascript">window.top.stopImageUpload(<?php
echo $result;
?>, '<?php
echo $_FILES['fileImage']['name'];
?>');</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T14:34:18.353

问题是你`stopImageUpload`缺少一个论点。它的签名是这样的：

```
function stopImageUpload(success, imagefilename){ 
```

但你这样称呼它：

```
stopImageUpload(1); 
```

这意味着你打电话`htmlEncode(undefined)`会导致`$('<div>').text(undefined).html()`

jQuery 支持函数的两个函数签名`text()`。当传递一个字符串时，它设置内容，然后返回 jquery 对象进行链接，当不传递任何内容（未定义）时，它返回一个字符串。在这种情况下，由于您传递`undefined`它返回一个字符串，然后您尝试调用`html()`一个不存在的字符串。

### 更新

好的，所以根据您发布的代码，您永远不应该`stopImageUpload`打电话`1`。这是由图像上传 PHP 逻辑处理的。正如您现在拥有的那样，您`load`在取消时在 iframe 的回调中调用它，这是不对的。这意味着当您单击时`Cancel`，它将通过将 iframe 源更改为 a 来取消上传`cancelimage.php`，并且当 PHP 运行时，它会说上传成功，但它没有。我实际上认为您可以`load`完全从单击处理程序中删除该回调。

### 更新 2

我认为您的问题与多次按下“取消”有关。试试这个：

```
var iframe = $("iframe[name='upload_target_image']");
iframe.on("load",function onLoad() {
    iframe.off("load", onLoad);
    stopImageUpload(2);
}).attr("src", "cancelimage.php"); 
```

以前，每当您按下取消时，您都会为“加载”添加一个侦听器，但您永远不会删除它，因此即使稍后您尝试上传图像并且成功，旧的侦听器也会将其设置回取消。此新代码将在触发后删除侦听器，从而降低这种可能性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T14:02:23.693

这是因为 $('').text(value) 返回一个字符串而不是 jQuery 对象。所以你不能附加 html() 函数，因为它不存在。

```
return $("<div/>",{text:value}).html() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T14:22:09.903

如果你的意思是我理解的，你想将 msg 作为文本插入到 div 中，对吗？

所以你可以使用这个代码：

```
var div = $('<div/>').text(value);
return div.html(); 
```

# c - C 编程 Char 可能的值

> ID：14091294
> 
> 赞同：5
> 
> 时间：2012-12-30T13:58:18.333
> 
> 标签：c, char

我正在尝试学习 C，现在我正在学习字符。我读过一些可以签名和未签名的字符的地方。这部分我得到了，但是当我使用无符号字符时（我认为它可以保持值 0-255）

```
printf("%c", 400); 
```

甚至

```
printf("%c\n", (unsigned char)400); 
```

它打印出一个`É`

为什么是这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T14:27:33.547

根据[C99 标准](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1124.pdf)，当`c`提供格式说明符`printf`而没有`l`长度修饰符时，

> `int`参数转换为，`unsigned char`并写入结果字符。

这意味着 400 被转换为`unsigned char`, 即`400 % 256`, 或`144`。`144`然后，写出对应的字符。这是一个[*UNICODE 控制序列*](http://www.fileformat.info/info/unicode/char/0090/index.htm)，因此`É`您看到的字符是系统相关的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T14:31:27.177

```
unsigned char c = 400;
printf("%d",c); 
```

你猜怎么着，你会被`144`打印出来的。那是**因为**`c`.

An`unsigned char`恰好占用 8 位内存（几乎在每个平台上），因此它是**00000000** (0) ~ **11111111** (255) 范围内的变量。每当您尝试将超过 8 位的二进制数分配给 unsigned char 时，**剩余的多余位将溢出并丢失**。

在您的情况下，您尝试将 400 分配给无符号字符：

400 = **110010000**有 9 位，所以**最高的 1 会丢失**，然后你得到**10010000**实际分配给 char，即十进制的 144。

当您将其打印为 时`%d`，您将得到`144`；当您将其打印为 时`%c`，您将得到[扩展 ASCII 代码](http://www.asciitable.com/)`É`中的第 144 个字符（在您的情况下）。

# java - winsock和java socket之间的通信

> ID：14091295
> 
> 赞同：2
> 
> 时间：2012-12-30T13:58:32.577
> 
> 标签：java, c++, sockets, winsock

我正在尝试构建一个客户端/服务器应用程序，一侧`java server`是 a `c++ client`，另一侧是 a 。

客户：

```
while(true)
    {
        sock = con.connectToServer(argv[2], port);

        if(sock!=NULL)
        {
            _itoa_s(clientID,sendBuffer,16,10);
            send(sock,sendBuffer,strlen(sendBuffer),0);

            printf("waiting for response\n");

            bytes = recv(sock,recvBuffer,sizeof(recvBuffer)-1,0);
            recvBuffer[bytes] = '\0';

            printf("%s",recvBuffer);

            closesocket(sock);
        }

        Sleep(3000);
    } 
```

服务器线程：

```
public void run()
    {
        try{
            in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
            out = new BufferedWriter (new OutputStreamWriter(clientSocket.getOutputStream()));

            int signID = Integer.parseInt(in.readLine());
            System.out.println("signID: " + signID);

            //Precessing DataRequest for specific TrafficSign here

            clientSocket.close();
        }
        catch(Exception ex){
            System.out.println("Exception in TrafficSignServerThread -> " + ex.toString());
        }
    } 
```

`in.ReadLine()`问题是，连接成功后，虽然函数返回1，但服务器挂了`send()`，表示发送数据成功。

如果我删除`recv()`客户端的一部分，一切正常。所以似乎只有`send()`和`recv()`导致问题的组合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T14:00:49.860

使用 readLine() 时的一个常见错误是忘记发送*一行文本*

我会检查你是否发送了换行符。例如`\n`

# php - mysql select distinct - 显示值和总计

> ID：14091296
> 
> 赞同：-1
> 
> 时间：2012-12-30T13:58:50.150
> 
> 标签：php, mysql

我有一个问题，因为我对 mysql 还是很陌生，所以这就是我想要做的。我有一个包含 user1 user2 和一个数字的表

例子：

```
user1 user2 1
user5 user17 1
user44 user33 12
user1 user5 1
user1 user24 1
user5 user666 1 
```

我要做的是首先列出第一个用户字段，然后列出按该数量排序的 user2 值的数量。

对于上面的示例，我希望结果如下所示：

```
user1 3
user5 2
user44 1 
```

原因是 user1 在 user1 字段中出现了 3 次，用户 5 出现了 2 次，用户 44 出现了 1 次。它基本上是我编写的推荐系统，现在我想显示谁将大多数用户推荐到我的网站。user1 是推荐人，user2 是推荐人。

我还想列出最多 10 行，如 LIMIT 10

有什么建议我将如何执行此查询并使用 php 输出它？我知道如何做与 mysql 的连接部分——我只是不知道如何以我想要的方式来回显它。

感谢您在这件事上的帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T14:02:05.867

听起来你想要这个：

```
select user1, count(*) Total
from yourtable 
group by user1
order by total desc
limit 0, 10 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/1b412/7)

*注意：您的描述中的列名不清楚*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T14:08:19.927

这是您的问题的解决方案。

```
select user1, count(*) as Total
from tablename
group by user1
limit 10; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T14:28:40.507

你可以试试吗？

```
SELECT username,count(username)
FROM yourtablename
Group By username
Order by 2 desc 
```

# oop - 在堆栈上创建对象和在堆上创建对象有什么区别？

> ID：14091299
> 
> 赞同：0
> 
> 时间：2012-12-30T13:58:56.733
> 
> 标签：oop

另外，你能定义一个类，这样你就可以在堆上而不是在堆栈上创建它的对象吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T15:47:08.653

我的理解是堆栈上只存在原始类型，而复杂类型（对象）是在堆上创建的，并由堆栈上的原始指针引用。此外，堆栈值一旦超出范围就会被删除，而在堆上分配的对象会持续超出其原始范围，并最终被垃圾回收。

以我的思维方式，对象永远不会在堆栈上创建。堆上分配的对象的指针是在栈上创建的。因此，除非我遗漏了一些关键的东西（总是有可能！），否则您的第二个问题的答案是，无论您做什么，您的类及其所有内部对象都将在堆上创建。堆栈上存在的只是指向堆上对象位置的引用指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-03T16:57:56.917

■ 实例变量和对象位于堆上。

■ 局部变量存在于堆栈中。

# php - HTML/CSS 可视化 RBAC 图

> ID：14091302
> 
> 赞同：7
> 
> 时间：2012-12-30T13:59:15.830
> 
> 标签：php, html, graphics, data-visualization, directed-acyclic-graphs

我的数据库中存储了一个 RBAC 结构（使用 Yii 构建的项目）。

我很想生成一个图表来可视化项目之间的关系，看看我是否没有犯逻辑错误，并向其他团队成员展示。

我正在考虑创建一个可以生成图形/树的页面。我想我可以处理服务器端部分，但我不知道如何生成 HTML/CSS（或图像）。

图中的节点可以有多个子节点和多个父节点。箭头指向。例子：![例子](../Images/85edeeb00504df0bf7ae55de98a944e9.png)

我不介意使用最新的 CSS3 和 HTML5 技术，因为它只会被选定的人使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T09:29:02.200

不久前我遇到了类似的问题。我最终提出的解决方案是一个完美的小 js 库，即 Dracula。

这是图书馆的链接：[https ://github.com/strathausen/dracula](https://github.com/strathausen/dracula)

考虑到您的需求，您所要做的就是：

```
var g = new Graph();

g.addEdge('author', 'create');
g.addEdge('author', 'reader');
g.addEdge('author', 'admin');

// add here the other edges.

var layouter = new Graph.Layout.Spring();
layouter.layout();

var renderer = new Graph.Renderer.Raphael('#canvas', g, 400, 300);
renderer.draw(); 
```

有关更多信息，我会让您在文档中挣扎。

希望能帮助到你。

[附录]

我要补充一点，一般来说，显示节点和箭头的问题不是什么大问题，使用 svg 使它几乎是微不足道的。但是，当您想要使用诸如“尽量减少交叉边的数量”、“在父级下方显示子级”等规则来组织节点的显示时，事情会变得复杂，这些都需要复杂的数学运算。

我不认为 Dracula 允许自定义那种规则。不过，考虑到您的评论，我认为可能有一种不太复杂的方法可以使布局看起来像垂直树，因为它是一个无环图（至少看起来是）。但是，您将不得不为此创建自己的库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T08:35:01.827

使用**SVG**怎么样？SVG 可以通过 CSS 设置样式，通过 Javascript 访问并嵌入到 HTML 文档中。并且使用矢量格式似乎足以用于图形可视化，因为它具有许多优点。只有一个优势——尤其是在 Web 环境中——是与位图图像相比，大图的文件大小更小。

对于图形可视化本身，我们想到了**[Graphviz 。](http://www.graphviz.org/)**它是一个图形渲染软件/库，自 1988 年以来一直在积极开发。它能够渲染各种类型的图形并将生成的图像导出为包括**SVG**在内的各种图像格式。它使用所谓的“点语言”来描述图形。查看 Graphviz[项目页面](http://www.graphviz.org/)以查找有关 dot 语言的许多示例和文档。

你有没有`dot`在命令行上进行过实验？`dot`是来自 Graphviz 包的二进制文件，它读取以点语言编写的文件并将它们呈现为所需的图像格式。这是一个很好的实验起点。

我曾经用它来动态绘制 PHP 类图。我在 php 中生成了一个 .dot 文件，并使用`exec dot -Tsvg graph.dot`

在 PEAR 存储库中还有一个用于 GraphViz 的 PHP 包装库，名为[Image_Graphviz](http://pear.php.net/package/Image_GraphViz/redirected)，它用于与您的类似项目中。

当然，如果您使用通用图形绘图库与手动绘制它们相比，您将不得不做出一些布局妥协。但是，当您熟悉点语言时，您将获得最佳结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T12:44:45.477

***只需尝试以下内容。***

图是最常用的数据结构之一，还有链表和树。在最近的一个 PHP 项目中，我需要构建一个 Graph 结构来分析一些相互关联的 url。这个问题很简单，所以我没有编写自己的代码，而是选择了 Pear 存储库中可用的代码。

Pear Structures_Graph 包允许创建和操作图形数据结构。它允许构建有向或无向图，数据和元数据存储在节点中。该库提供了用于图遍历以及从图拓扑中提取特征的函数。

另请参阅以下位置： http: [//www.codediesel.com/algorithms/building-a-graph-data-structure-in-php/](http://www.codediesel.com/algorithms/building-a-graph-data-structure-in-php/)

**一些示例代码：**

```
<?php

require_once 'Structures/Graph.php';
require_once 'Structures/Graph/Node.php';

$nonDirectedGraph = new Structures_Graph(false);

$nodes_names = array('a', 'b', 'c' ,'d', 'e');
$nodes = array();

foreach($nodes_names as $node) {
    /* Create a new node / vertex */
    $nodes[$node] = new Structures_Graph_Node();

    /* Add the node to the Graph structure */
    $nonDirectedGraph ->addNode($nodes[$node]);
}

/**
  * Specify connections between different nodes.
  * For example in the following array, 'a-b'
  * specifies that node 'a' is connected to node 'b'.
  * Also refer to the figure above.
  */

$vertices = array('a-b', 'b-c', 'b-d', 'd-c', 'c-e', 'e-d');

foreach($vertices as $vertex) {
    $data = preg_split("/-/",$vertex);
    $nodes[$data[0]]->connectTo($nodes[$data[1]]);
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T07:29:29.813

如果您可以在服务器端使用 Python，您可以使用[Networkx](http://networkx.github.com/)生成高质量的图形并将它们保存为 SVG、PNG 或任何您喜欢的格式。

# jquery - Javascript/jQuery | 未捕获的 SyntaxError：输入意外结束？

> ID：14091304
> 
> 赞同：3
> 
> 时间：2012-12-30T13:59:53.763
> 
> 标签：jquery

jQuery noob 在这里签到。我的语法有什么问题？我在 Chrome 控制台中收到 Unexpected End of Input。

```
 <script>
$('a[href*=#]:not([href=#])').click(function() {
  if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') 
     || location.hostname == this.hostname) {

     var target = $(this.hash);
     target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
        if (target.length) {
          $('html,body').animate({
              scrollTop: target.offset().top
         }, 1000);
         return false;
        }
     }
 });
</script> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-30T14:09:56.350

这意味着您忘记了关闭`}, ), >`，或者它的语法中使用的任何内容。检查你所有的块和语句，看看你是否遗漏了任何结束标记。

如果您将代码复制到[jsbeautifier.org](http://jsbeautifier.org/)中，请单击“美化”并查看所有缩进是否正确。

# java - Java 泛型：为什么我不能将一种方法中的实际有界类型参数传递给另一种方法？

> ID：14091310
> 
> 赞同：1
> 
> 时间：2012-12-30T14:00:37.373
> 
> 标签：java, generics, collections, bounded-types

我有一个代码（我正在测试地图接口）。

这是我的**主要**方法：

```
import blue.*;

public class Test {
    public static void main(String[] args) throws InterruptedException, java.io.IOException {

        MapCollections.<String, Number>frequencyTable(args);
    }
} 
```

这是我`MapCollections`使用的课程：

```
package blue;
import java.util.*;
import static java.lang.System.out;

public class MapCollections {

   /**
   * The Generic Method. K is String and V is Number.
   */ 
   public static <K extends String, V extends Number> void frequencyTable(K[] args) {
        int initialCapacity = 10;

        // Now I pass the same types (K,V) to the getHashMap method
        // but it doesn't work, I get compile error on the hm.put() call, see a little below...
        // If I explicitly change K,V for String and Number it compiles fine, without errors
        Map<K, V> hm = MapCollections.<K,V>getHashMap(initialCapacity);

        // ... the error is
        // error: method put in interface Map<K#2,V#2> cannot be applied to given types
        hm.put("one", 1);
        hm.put("two", 2);
    };

    public static <K, V> Map<K, V> getHashMap(int initialCapacity) {

        return new HashMap<K,V>(initialCapacity);
    };
} 
```

错误是：

```
C:\java>javac Test.java
.\blue\MapCollections.java:13: error: method put in interface Map<K#2,V#2> cannot be applied to given
 types;
                hm.put("one", 1);
                  ^
  required: K#1,V#1
  found: String,int
  reason: actual argument String cannot be converted to K#1 by method invocation conversion
  where K#1,V#1,K#2,V#2 are type-variables:
    K#1 extends String declared in method <K#1,V#1>frequencyTable(K#1[])
    V#1 extends Number declared in method <K#1,V#1>frequencyTable(K#1[])
    K#2 extends Object declared in interface Map
    V#2 extends Object declared in interface Map 
```

我明白我不能传递`K`，`V`从一种方法到另一种方法，它们失去了意义。

1）但是为什么？

2) 是什么`K#1, V#1, K#2, V#2`？为什么会出现额外的数量？

3）有没有一种方法可以按照我的意愿使用`K`？`V`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T14:03:34.900

使用时不能添加到集合中`x extends AnyType`。

**原因：** 考虑这个例子：

```
class Animal {

}
class Dog extends Animal {

}
class Cat extends Animal {

} 
```

现在你有`List<? extends Animal>`

```
public void someMethod(List<? extends Animal> list) {
    list.add(new dog()); //no valid
} 
```

你调用这样的方法：

```
List<Cat> catList = new ArrayList<Cat>(); 
somemethod(catList); 
```

如果在使用带扩展的通配符时允许添加到集合中，您只需将 Dog 添加到仅接受 Cat 或子类型类型的集合中。因此，您不能将任何内容添加到使用带有上限的通配符的集合中。

顺便说一句，**String**是一个**最终类**，`k extends String`虽然可以编译，但无效，因为没有什么可以扩展最终类的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T14:05:24.540

问题是`K extends String`它可能是也可能不是 String 的子类（泛型忽略了该类的事实`final`）这意味着您可能正在更新可能是这些类的另一个子类的键和值。

```
Map<String, Double> map = new HashMap<>();
Map<String, ? extends Number> map2 = map; // ok
Number n = map2.get("Hello"); // ok
map2.put("Hello", 1); // not ok. 
```

我会删除`K extends String`，因为它没有增加任何价值，因为唯一有效的选项是`String`. `V extends Number`如果您只打算查找而不是修改集合，则可以进行。

在这个具体的例子中，我只会将 Number 设为 Integer 并保留它，除非您预计计数会超过 20 亿。如果您担心空间问题，我会使用[TObjectIntHashMap](http://trove4j.sourceforge.net/javadocs/gnu/trove/map/hash/TObjectIntHashMap.html)来更轻松地更新此类集合。例如

```
TObjectIntHashMap<String> counters = new TObjectIntHashMap<>();
counters.adjustOrPut("Hello", 1, 1); // one liner to add or increment for a key. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T15:46:28.447

按照给定的顺序回答您的问题（答案编号与您的问题相对应）

1) GanGnaMStYleOverFlowErroR 已经回答了这个问题。还是让我试试你自己的例子。

您已经使用 Test 类中的类型参数调用了 frequencyTable 方法

```
MapCollections.<String, Number>frequencyTable(args); 
```

所以你希望你的 hm.put("one", 1) 成功。String 是不可扩展的，但为了进一步解释，让我们假设它是可扩展的，并假设有一个名为 SplittableString 的子类。

假设其他人正在使用您的代码并想致电

```
MapCollections.<SplittableString, Number>frequencyTable(args); 
```

他希望他的键是子类型（SplittableString）。但是您正在（在您的方法中）使用父类的对象作为键来加载。另一个开发人员在调用您的方法后尝试检索密钥，假设他将获得一个 SplittableString。但实际上他得到的是不能分配给其子类引用的字符串。

2) 你在这两种方法中声明的 K 和 V 是不同的。

```
public static <K extends String, V extends Number> void frequencyTable(K[] args) {...}

public static <K, V> Map<K, V> getHashMap(int initialCapacity) {...} 
```

为了在错误消息中区分它们，编译器使用 K#1、K#2 和 V#1、V#2。它实际上试图将它们（在错误消息中）表示为

```
public static <K#1 extends String, V#1 extends Number> void frequencyTable(K[] args) {...}

public static <K#2, V#2> Map<K, V> getHashMap(int initialCapacity) {...} 
```

3）而不是将值放入您的 hm.put("one", 1) 使用类似这样的东西

```
public static <K extends String, V extends Number> void frequencyTable(K[] args, V[] values) {
    pm.put(args[0], values[0]);
} 
```

这样，您将放置调用者打算放入的类型的对象，而不是放入不仅用户不想要而且可能破坏类型安全的东西。

# jaxb - 所有子元素都使用命名空间 [Spring Batch & JAXB] 进行标记

> ID：14091312
> 
> 赞同：1
> 
> 时间：2012-12-30T14:00:42.183
> 
> 标签：jaxb, spring-batch

我想使用 Spring Batch (JAXB2Marshaller) 生成 XML 文件，但我在下面的问题上坚持了 1 周，在此先感谢。

预期的 xml

```
<?xml version="1.0" encoding="UTF-8"?>
<p:ContactList xmlns:p="test:ns:2012">
  <p:CompanyInfo>
    <p:CompanyName>Oracle</p:CompanyName>
    <p:DepartmentInfo>
      <p:DepartmentName>Java</p:DepartmentName>
    </p:DepartmentInfo>
  </p:CompanyInfo>
</p:ContactList> 
```

但我得到了

```
<?xml version="1.0" encoding="UTF-8"?>
<ContactList>
  <p:CompanyInfo xmlns:p="test:ns:2012">
    <p:CompanyName xmlns:p="test:ns:2012">Oracle</p:CompanyName>
    <p:DepartmentInfo xmlns:p="test:ns:2012">
      <p:DepartmentName xmlns:p="test:ns:2012">Java</p:DepartmentName>
    </p:DepartmentInfo>
  </p:CompanyInfo>
</ContactList> 
```

下面是源代码

弹簧配置

```
<bean id="itemWriter" class="org.springframework.batch.item.xml.StaxEventItemWriter">
  <property name="resource" ref="outputResource" />
  <property name="marshaller" ref="myMarshaller" />
  <property name="rootTagName" value="ContactList" />
  <property name="overwriteOutput" value="true" />
</bean>

<bean id="myMarshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
    <property name="contextPaths">
        <list>
            <value>org.springframework.batch.contactlist</value>
        </list>
    </property>
    <property name="marshallerProperties">
        <map>
             <entry key="jaxb.formatted.output"><value type="boolean">true</value></entry>
       </map>
    </property>
      <property name="supportJaxbElementClass" value="true"/>
</bean> 
```

XSD

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns="test:ns:2012" targetNamespace="test:ns:2012" xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">
  <xs:element name="ContactList" type="ContactList"/>
    <xs:complexType name="ContactList">
        <xs:sequence>
            <xs:element maxOccurs="unbounded" minOccurs="1" name="CompanyInfo" type="CompanyInfo"/>
        </xs:sequence>
    </xs:complexType>
  <xs:complexType name="CompanyInfo">
    <xs:sequence>
      <xs:element name="CompanyName" type="CompanyName" minOccurs="0"/>
      <xs:element name="DepartmentInfo" type="DepartmentInfo"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="DepartmentInfo">
    <xs:sequence>
      <xs:element name="DepartmentName" type="DepartmentName"/>
    </xs:sequence>
  </xs:complexType>
  <xs:simpleType name="CompanyName">
    <xs:restriction base="xs:string">
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="DepartmentName">
    <xs:restriction base="xs:string">
    </xs:restriction>
  </xs:simpleType>
</xs:schema> 
```

包信息.java

```
@javax.xml.bind.annotation.XmlSchema(namespace = "test:ns:2012", elementFormDefault = javax.xml.bind.annotation.XmlNsForm.QUALIFIED,
xmlns={@XmlNs(prefix="p", namespaceURI="test:ns:2012")})
package org.springframework.batch.contactlist;
import javax.xml.bind.annotation.XmlNs; 
```

对象工厂.java

```
@XmlRegistry
public class ObjectFactory {
    @XmlElementDecl(name = "CompanyInfo")
    public JAXBElement<CompanyInfo> createContactList(CompanyInfo value) {
        return new JAXBElement<CompanyInfo>(null, CompanyInfo.class, null, value);
    }
} 
```

公司信息.java

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlRootElement(name="CompanyInfo")
@XmlType(name = "CompanyInfo", propOrder = {
    "companyName",
    "departmentInfo"
})
public class CompanyInfo {
    @XmlElement(name = "CompanyName")
    protected String companyName;
    @XmlElement(name = "DepartmentInfo", required = true)
    protected DepartmentInfo departmentInfo;
} 
```

部门信息.java

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "DepartmentInfo", propOrder = {
    "departmentName"
})
public class DepartmentInfo {

    @XmlElement(name = "DepartmentName", required = true)
    protected String departmentName;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T14:41:27.157

通过在 NamespacePrefixMapper 中添加 getContextualNamespaceDecls() 解决了问题

```
@Override
public String[] getContextualNamespaceDecls() {
    return new String[] {"p", "test-ns-2012" };
} 
```

# ios - 如果在 Appstore 中重命名，是否可以再次重用应用名称？

> ID：14091315
> 
> 赞同：0
> 
> 时间：2012-12-30T14:00:51.663
> 
> 标签：ios, ios5, app-store-connect

嗨，我想重命名我的应用程序并在一段时间后使用以前的应用程序名称？这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T15:26:38.373

我很确定您可以 - 只要您是之前应用名称的原始所有者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T15:18:36.147

我相信你可以。

如果您不能立即执行此操作，那么它可能会在 Apple 在商店中保留应用程序名称的 120 天限制之后可用。

# actionscript - RED5 服务器中的缓冲时间非常慢

> ID：14091318
> 
> 赞同：0
> 
> 时间：2012-12-30T14:00:53.710
> 
> 标签：actionscript, red5

我有一个视频播放器，我使用 red5 服务器

在动作脚本代码中，我将缓冲时间写为 5

但它太长了，直到他缓冲它。

我该如何解决？

是不是red5服务器太慢了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T06:29:38.670

将缓冲时间设置为 5 秒是很奇怪的。但这取决于使用场景。你在做直播还是视频点播？

如果缓冲区填充时间过长，则意味着您使用的互联网连接可能太慢而无法在适当的时间填充缓冲区。

视频开始播放之前需要多长时间（以毫秒为单位）？您还应该监视和跟踪 ActionScript3 文档中给出的其他变量：http: [//help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html#bufferLength](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html#bufferLength)

然后正如 AS3 文档还建议的那样：您可以计算缓冲区需要填满的时间。您可以测量来自不同网络/位置的不同客户端的时间/比率，以了解这一点。

塞巴斯蒂安

# google-app-engine - 如何在 Python 中动态创建实例的 NAME

> ID：14091323
> 
> 赞同：1
> 
> 时间：2012-12-30T14:01:17.377
> 
> 标签：google-app-engine, python-2.7

我当前的系统要求是我有一个主对象，我有多个行项目，我的数据结构是这样的，我在一个类对象中拥有主信息，每个行项目在不同的类对象中，并将它们存储在数据存储。

因此，为了存储行项目数据，我必须根据用户通过表单数据提交的行项目数从类中创建每个对象。

我正在尝试使用以下代码动态创建对象的名称

```
(litm+str(i)) = t_det() 
```

其中 t_det() 是我在运行时尝试为其创建名称为 (litm+str(i)) 的对象的类，其中“litm”是常量部分，str(i) 将是名称的动态生成部分我希望像**litm1、litm2、litm3、litm4**

但是当我使用上面的代码时，我得到了下面的错误，并且不确定如何为我当前的需求获得正确的 Python。

```
(litm+str(i)) = t_det()
SyntaxError: can't assign to operator 
```

我被困在这里不知道现在如何为我获取正确的python代码，请帮助...

@Tkingovr 要求的类代码

```
t_det(db.Model):              # Tendet Details table   
td_id = db.StringProperty()     # Tender ID, Master table ref
td_ln = db.IntegerProperty()    # Line Number
td_item = db.StringProperty()   # Item
td_itm_qty = db.FloatProperty() # Number Item Quantity  
td_itm_uom = db.StringProperty()# Unit of the Quantity specified
tr_ln_qt_amt= db.FloatProperty()# Line Quote Amount
tr_ln_app = db.StringProperty() # Line Quote Approved 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:52:57.317

您是否尝试动态设置实体名称，元素将存储在数据存储中？

使用当前 API 无法直接实现，但我使用了以下解决方法：

```
classCache = {}
def generateExpandoClass( className ):
    """Creates a new Appengine Expando Class which operates on the collection specified by className.

    @type className: String
    @param className: Name of the collection
    @returns: An Appengine NDB.Expando Class
    """
    global classCache
    if not className in classCache.keys():
            classCache[ className ] = new.classobj( className, ( Expando,), {})
    return( classCache[ className ] ) 
```

（完整代码见[https://bitbucket.org/viur/server/src/98de79b91778bb9b16e520acb28e257b21091790/utils.py?at=master](https://bitbucket.org/viur/server/src/98de79b91778bb9b16e520acb28e257b21091790/utils.py?at=master)） 这个函数使用了 New-Module ( [http://docs.python.org/2/ library/new.html](http://docs.python.org/2/library/new.html) ) 在运行时创建一个新的 ndb.expando 类，它将其数据保存到给定的实体类。

**警告**：此方法适用于 ext.db - 因为一切都是使用类完成的（class.all()、class.get()） - 所以它保证当前实例在获取实体时知道类。然而，在 NDB 中，get() 是使用 Key-Class 执行的。如果您在新创建的实例上执行此操作，并且不为您之前尝试获取的类调用 generateExpandoClass，则 NDB 将严重失败。

# java - 爪哇，摇摆；简单的 gui 在哪里创建对象

> ID：14091325
> 
> 赞同：2
> 
> 时间：2012-12-30T14:01:32.873
> 
> 标签：java, swing

我编写了一个简单的命令行程序来分解汽车牌照。喜欢：

*   V -> 维也纳
*   la -> 洛杉矶

现在我想为该程序制作一个简单的 GUI（它是我的第一个 gui）。这是我的课：

> Dissolver.java // 溶解车牌 ; 并包含整个逻辑
> 
> DissolverGUI.java // Dissolver 的 gui

我的问题是：我应该在 DissolverGui 类中的哪里创建我的 Dissolver 对象？

我希望你能理解我的问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T14:07:46.383

你的问题太笼统了。不看代码很难给出建议。您可以尝试在`DissolverGui`类引用中添加一个字段`Dissolver`并在所有方法中使用它。假设创建它的正确位置是`public static void main(String[])`运行整个程序的方法。

作为初学者，不要为风格而烦恼，只需让程序按您的意愿运行即可。

# apache - Apache 拒绝来自 IP 范围的请求，除了 errordocs

> ID：14091326
> 
> 赞同：1
> 
> 时间：2012-12-30T14:01:45.383
> 
> 标签：apache, .htaccess

我有一个如下的 .htacces 来阻止来自多个 IP 子网的所有请求。

```
<Files ~ "^.*$">
        order allow,deny
        allow from all
        Deny from ipa.ddr.ess.sub/net
        Deny from ipa.ddr.ess.sub/net
        ...
</Files> 
```

问题是我的错误日志显示了每个错误 IP 地址的两个错误：

```
... client denied by server configuration: .../public_html/node
... client denied by server configuration: .../public_html/403.shtml 
```

如何更改文件块，使其拒绝来自这些 IP 地址的所有请求，但错误文档 (403.shtml) 除外？

检查了几个问题，但它们似乎不适用于来自 IP 地址的额外拒绝。例如。[使用apache拒绝除索引以外的所有文件](https://stackoverflow.com/questions/7956385/deny-all-files-except-the-index-using-apache)

# wpf - ComboBox 和实体框架，如何获取 ID？(WPF-MVVM)

> ID：14091333
> 
> 赞同：1
> 
> 时间：2012-12-30T14:02:32.183
> 
> 标签：wpf, mvvm, binding, combobox, entity

如何在 ViewModel.AddNewMovie() 中获取所选语言的 ID？这是我的第一次尝试。这很糟糕，因为它是索引，而不是 ID。

**看法：**

```
...
<ComboBox ItemsSource="{Binding LanguagesCollection}" 
SelectedIndex="{Binding NewMovieLanguage}"
DisplayMemberPath="L_Name" SelectedValuePath="L_Id"/>
... 
```

**视图模型：**

```
...

public ObservableCollection<Languages> LanguagesCollection { get; private set; }
public ObservableCollection<Movies> MoviesCollection{ get; private set; }

...

_Entities = new MyAppEntities();
LanguagesCollection = new ObservableCollection<Languages>(_Entities.Languages);
MoviesCollection = new ObservableCollection<Movies>(_Entities.Movies.Include("Languages"));

...

private void AddNewMovie()
{
        OnPropertyChanged("NewMovieTitle");
        OnPropertyChanged("NewMovieLanguage");
    try
    {
        Movies NewMovie = new Movies 
        {
            M_Title = NewMovieTitle,
            M_Language_Id = Convert.ToInt32(NewMovieLanguage)+1,
        };

        _Entities.AddToMovies(NewMovie);
        MoviesCollection.Add(NewMovie);
        ...
    }
    catch
    {
        ...
    }
} 
```

**实体数据模型：**

**电影**（表）

M_Id *Int32*

M_Title*字符串*

M_Language_Id *Int32 fk*

**语言**（表格）

L_Id *Int32*

L_Name*字符串*

**- 数据 -**

**语言**

1 英语

2 德语

3 法语

4 西班牙语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T14:24:40.603

哦，解决方法是：

```
<ComboBox ItemsSource="{Binding LanguagesCollection}" 
SelectedValue="{Binding NewMovieLanguage}"
DisplayMemberPath="L_Name" SelectedValuePath="L_Id"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T14:28:08.767

请更改为：

```
<ComboBox ItemsSource="{Binding LanguagesCollection}" 
SelectedItem="{Binding NewMovieLanguage}"
DisplayMemberPath="L_Name" SelectedValuePath="L_Id"/> 
```

# php - Zend框架中如何获取上传文件的路径和文件名

> ID：14091334
> 
> 赞同：0
> 
> 时间：2012-12-30T14:02:36.023
> 
> 标签：php, zend-framework, zend-file

我有允许用户上传文件的表单。从我的控制器中，我想获取带有文件名的路径。我正在使用 getFileName() 方法。但它给出了以下错误：

```
Message: Method getFileName does not exist 
```

以下是我的控制器操作：

```
public function addAction()
    {
        $form = new Application_Form_Student();
        $form->setAttrib('enctype', 'multipart/form-data');
        $form->submit->setLabel('Add');
        $this->view->form = $form;

        if ($this->getRequest()->isPost()) {
            $formData = $this->getRequest()->getPost();
            if ($form->isValid($formData)) {
                $name = $form->getValue('name');
                $email = $form->getValue('email');
                $photo = $form->getValue('photo');
                $location = $form->getFileName('photo'); 
                $students = new Application_Model_DbTable_Students();
                $students->addStudent($name, $email);

                $this->_helper->redirector('index');
            } else {
                $form->populate($formData);
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T14:34:03.750

检查这是否有效 -

```
public function addAction()
{
    $form = new Application_Form_Student();
    $form->setAttrib('enctype', 'multipart/form-data');
    $form->submit->setLabel('Add');
    $this->view->form = $form;

    if ($this->getRequest()->isPost()) {
        $formData = $this->getRequest()->getPost();
        if ($form->isValid($formData)) {
            $upload = new Zend_File_Transfer_Adapter_Http();
            $upload->setDestination("/uploads/files/");

            try { 
                 $upload->receive();
                 $location = $upload->getFileName('photo');
            }                
            catch(Zend_File_Transfer_Exception $e){
                 $e->getMessage();
            }
        } else {
            $form->populate($formData);
        }
    }

} 
```

我说的第二种方法。表单文件元素设置 [Zend 框架：使用 Zend 表单元素上传文件](https://stackoverflow.com/questions/6733819/zend-framework-upload-file-by-using-zend-form-element)

# javascript - 获取 style = block 的 div id

> ID：14091336
> 
> 赞同：2
> 
> 时间：2012-12-30T14:03:06.023
> 
> 标签：javascript, jquery

我对如何获得一个特定的孩子的 div id 风格是阻塞的；我一直在谷歌搜索和 stackoverflow 浏览洞天。

我可以通过以下方式获得所有孩子：

```
var active = $('#myDiv').children().get(); 
```

但我不知道如何过滤样式。.get() 之后不允许使用 .attr()。所以，我只想知道 id，因为我需要在之后使用它。

编辑：

这是我要使用的完整功能：

```
 // ON MODAL DISMISS, RESET STEPS
  $('#myDiv').on('hidden', function() {

    var currentStep = $('#myDiv').children().filter(function(){
        return $(this).css('display') === 'block'; 
    });

    //console.log(currentStep);
        replace(currentStep, step1);
  });

function replace( hide, show ) {
  document.getElementById(hide).style.display="none";
  document.getElementById(show).style.display="block";
} 
```

HTML：

```
<div id="myDiv">
 <div id="step1">
  ...
 </div>
 <div id="step2">
  ...
 </div>
 <div id="step3">
  ...
 </div>
</div> 
```

目前，当我启动模态并逐步完成这些步骤时，但决定在第 3 步关闭模态并重新启动模态时，它将在第 3 步继续。因此，因此我认为在解雇之前我需要当前步骤，因此我可以将其发送到我的替换函数并将 currentStep 的样式设置为 none 并阻止第一步。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T14:08:51.110

试试这个来返回块子：

```
$('#mydiv').children().filter(function () {
  return $(this).css('display') === 'block';
}); 
```

这将只返回那些`true`在该函数中返回的孩子。

**更新**

首先，如果您已经在使用 jQuery，为什么还要使用冗长的原始 JS 选择过程呢？代替

```
function replace( hide, show ) {
  document.getElementById(hide).style.display="none";
  document.getElementById(show).style.display="block";
} 
```

改成

```
function replace(hide, show) {
  $('#' + hide).hide();
  $('#' + show).show();
} 
```

此外，看起来一次只`currentStep`显示一个步骤 ( )。既然您试图只找到显示的一个元素，为什么不将您的 css 设置为：

```
#mydiv div {
  display: none;
}
#mydiv div.show {
  display: block;
} 
```

然后你可以删除/添加类来显示/隐藏它们。使用此方法，您的`replace()`函数可能如下所示：

```
function replace(show) {
  $('#mydiv div.show').removeClass('show'); // reset all shown children to be hidden
  $('#mydiv ' + show).addClass('show'); // same way you determine which div should show
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T14:09:53.340

你想要的奇怪的东西......试试这个

```
var active = $( '#myDiv' ).children().filter( function() {
    return 'block' == $(this).css( 'display' );
} ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T14:06:21.873

也许这可以帮助过滤元素：[http ://api.jquery.com/filter/](http://api.jquery.com/filter/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T14:13:24.633

这是一个包含所有块元素[的小演示，包括原生块元素。](http://jsfiddle.net/5eZEV/1/)

```
$(selectedElements).filter(function(){
    return $(this).css('display') === 'block';
}); 
```

# php - PHP：将 html-entity 编码的大写字符转换为小写

> ID：14091341
> 
> 赞同：7
> 
> 时间：2012-12-30T14:03:49.270
> 
> 标签：php, hex, html-entities, lowercase

如何将大写的 html 实体字符转换为小写？

```
$str = "&#xC9;"; //É

$res = strtolower( $str );

echo $res; 
```

[http://codepad.viper-7.com/Zf3RTe](http://codepad.viper-7.com/Zf3RTe)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-30T14:24:35.140

只需使用正确的功能：

```
$strLower = mb_strtolower($str, 'HTML-ENTITIES'); 
```

[PHP 多字节字符串扩展^(*文档*)](http://php.net/book.mbstring)具有 HTML 实体的编码（请参阅所有[支持的编码^(*文档*)](http://php.net/mbstring.supported-encodings)列表）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-30T14:09:58.737

```
$str = "&#xC9;"; //É

$res = mb_strtolower(html_entity_decode($str,ENT_COMPAT|ENT_HTML401,'UTF-8'),'UTF-8' );

echo $res; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T14:10:11.760

将十六进制转换为十进制并加 32，再转换回十六进制。

* * *

或使用`mbstring`：

```
$res = mb_strtolower(mb_convert_encoding($str, 'UTF-8', 'HTML-ENTITIES'), 'UTF-8') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-10T09:52:08.923

在我的服务器上，我没有`mbstring`安装扩展。为了获得更好的跨服务器解决方案，您应该改用它：

```
echo htmlentities(strtoupper(html_entity_decode($str))); 
```

# python - Scrapy：不起作用的蜘蛛

> ID：14091351
> 
> 赞同：0
> 
> 时间：2012-12-30T14:05:25.030
> 
> 标签：python, scrapy

我想废弃这个网站：[Meetic.fr](http://www.meetic.fr/)，meetic.com 的法语版本。

**目标是在authentication**后知道有多少人连接（显示在页面顶部）。

这是蜘蛛：（*[kobeddl，stack123456]*是真正的登录，如果你想尝试一些东西）

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
from scrapy.http import FormRequest, Request

from meetic.items import MeeticItem

class MeeticSpider(BaseSpider):
    name = "meetic"
    allowed_domains = ["meetic.fr"]
    start_urls = ["http://www.meetic.fr/"]

    def parse(self, response):
        print 'TEST1'
        return [FormRequest.from_response(response, formdata={'log': 'kobeddl', 'pwd': 'stack123456'}, callback=self.after_login)]

    def after_login(self, response):
    # check login succeed before going on
        if "authentication failed" in response.body:
            self.log("Login failed", level=log.ERROR)  
            print 'TEST2'           
            return
    # We've successfully authenticated, let's have some fun!
        else:
            print 'TEST3'       
            return Request(url="http://www.meetic.fr/scheduler.php?url=", callback=self.parse_tastypage)

    def parse_tastypage(self, response):
        hxs = HtmlXPathSelector(response)
        item = MeeticItem()
        item['nb'] = hxs.select('/html/body/div/div/div/div/div/div/ul/li[2]/a/div/span').extract()
        print 'TEST4'
        return item 
```

这是命令提示符中的结果：![结果](../Images/9eebc586627c65dc38af522bb35afd85.png) **编辑：**如您所见，只有第一个打印语句`TEST1`有效。我是python和scrapy的新手，所以原因可能很愚蠢。

我认为我的蜘蛛有一个错误，在这里：`if "authentication failed" in response.body:` 我在另一个蜘蛛中发现了这个错误，但我不知道如何将它调整到这个蜘蛛。

我还在设置文件中更改了用户代理 `USER_AGENT = 'Mozilla/5.0 (X11; Linux x86_64; rv:7.0.1) Gecko/20100101 Firefox/7.7'`

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T15:11:34.123

如果您查看[http://www.meetic.fr](http://www.meetic.fr)页面的来源，您会发现登录表单发布到`secure.meetic.com`：

```
<form id="formLogin" name="formLogin" action="https://secure.meetic.com/authent/secure.php" method="post" onsubmit="javascript:submitMeeticForm(this.id);"> 
```

所以没有什么奇怪的，您`POST`登录数据`secure.meetic.com`并在登录后被重定向回您的正常网站。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T22:43:27.540

如果您仔细查看输出，您将看到一行显示“Filtered offsite request to...”。那是因为表单的操作是secure.meetic.com。您需要将该域添加到`allowed_domains`蜘蛛的属性中，这样它就不会被过滤。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T22:27:32.337

您可能应该更新问题以反映关于为什么您的代码不起作用的第二个问题，但是通过检查网站的源 HTML，我认为您可能在表单响应中错误地标记了您的用户名和密码输入：

```
<input id="log" name="log" type="hidden"/>
<input id="pwd" name="pwd" type="hidden"/> 
```

尝试修改`parse`如下：

```
def parse(self, response):
        return [FormRequest.from_response(response, formdata={'log': 'kobeddl', 'pwd': 'stack123456'}, callback=self.after_login)] 
```

如果不是，那么它可能是“txtHandle”和“txtPassword”。

# android - GridView 行高行为不正确

> ID：14091353
> 
> 赞同：6
> 
> 时间：2012-12-30T14:05:29.210
> 
> 标签：android, gridview

我正在使用一个 GridView，它显示一个带有背景图像和文本的线性布局，就像这个例子一样：

[http://www.curious-creature.org/2012/12/11/android-recipe-1-image-with-rounded-corners/](http://www.curious-creature.org/2012/12/11/android-recipe-1-image-with-rounded-corners/)

就像那个例子一样，我正在使用该代码使图像具有圆角。

问题是，如果我不使用圆角的东西，我所有的网格项目都是相同的高度，无论它们里面有什么文本，即使我所有的图像都是相同的大小。

但如果我使用它，项目高度将被包裹到内容中。

我尝试将我的线性布局定义为 wrap_content、fill_parent、match_parent 甚至固定高度，但系统只是忽略了我。

这是我的网格布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/LinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#FFDDDDDD"
    android:orientation="vertical"
    tools:context=".RouteListActivity" >

    <GridView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/gridview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_margin="20dp"
        android:layout_weight="2"
        android:animateLayoutChanges="false"
        android:clipChildren="false"
        android:clipToPadding="false"
        android:drawSelectorOnTop="true"
        android:gravity="center"
        android:horizontalSpacing="10dp"
        android:numColumns="2"
        android:scrollingCache="false"
        android:stretchMode="columnWidth"
        android:verticalSpacing="10dp" />

</LinearLayout> 
```

这是我的网格项目：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linearlayoutGridLabel"
    android:layout_width="wrap_content"
    android:layout_height="150dp"
    android:layout_weight="1"
    android:gravity="bottom|left"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/id_ruta"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView"
        android:visibility="gone" />

    <TextView
        android:id="@+id/routenameGridLabel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="20dp"
        android:background="#77000000"
        android:gravity="bottom"
        android:padding="5dp"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</LinearLayout> 
```

加上我在适配器中的 getView：

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {

        View vi=convertView;
        if(convertView==null)
            vi = inflater.inflate(R.layout.grid_item, null);

        LinearLayout linLayout = (LinearLayout) vi.findViewById(R.id.linearlayoutGridLabel);
        Typeface yanone = Typeface.createFromAsset(mContext.getAssets(), "YanoneKaffeesatz-Regular.ttf");
        TextView id_ruta = (TextView) vi.findViewById(R.id.id_ruta);
        TextView nombre=(TextView)vi.findViewById(R.id.routenameGridLabel);
        nombre.setTypeface(yanone);
        nombre.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 38);
        Ruta current = routeList.get(position);
        try {
//          Drawable d;
//          d = Drawable.createFromStream(mContext.getAssets().open("ruta" + (position+1) + "/title.jpg"), null);
            Bitmap b = BitmapFactory.decodeStream(mContext.getAssets().open("ruta" + (position+1) + "/title.jpg"));
            StreamDrawable d = new StreamDrawable(b, 10, 0);
            linLayout.setBackgroundDrawable(d);
        } catch (IOException e) {
            linLayout.setBackgroundResource(R.drawable.noimage);
        }
        nombre.setText("" + current.getNombre());
        id_ruta.setText(current.getId().toString());

        return vi;
    } 
```

坦率地说，我不理解 gridviews 的行为。以前我将不同大小的图像设置为背景图像，并且所有元素相互重叠。即使在网格项目的布局上固定高度，我也无法制作相同大小的行。

请问这里可以指路吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-05T10:52:47.560

我终于解决了，原来问题在于我正在使用

```
vi = inflater.inflate(R.layout.grid_item, null); 
```

代替

```
vi = inflater.inflate(R.layout.grid_item, parent, false); 
```

所以布局参数被忽略了。

无论如何，让 GridView 均匀分布空间是一件很痛苦的事情。我想我将切换到 TableView。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-09T09:45:04.233

您可以使用 setLayoutParams 设置布局高度：

```
vi.setLayoutParams(new GridView.LayoutParams(<width_in_pixels>, <height_in_pixels>)); 
```

您需要以像素为单位传递宽度和高度。因此，您可能希望将 150dp 转换为像素。

# css - 类似菜单的 Engadget - 字体不匹配

> ID：14091358
> 
> 赞同：0
> 
> 时间：2012-12-30T14:05:44.573
> 
> 标签：css

我正在尝试创建一个类似[Engadget](http://www.engadget.com/)的菜单栏。我似乎正确地实现了它，但我仍然没有得到确切的字体样式。请帮帮我。谢谢。这是我的[小提琴](http://jsfiddle.net/5UMfe/)。

我的 HTML，

```
<div class="nav">
<ul>
<li><a href="#">Reviews</li>
</ul>
</div> 
```

​我的CSS，

```
 .nav{
        background:#303030;
        line-height:1;
        overflow:hidden;
        position:relative; 
        -moz-border-radius: 5px;
        border-radius: 5px;

}

.nav a{
        color:#fff;
        text-decoration:none;        
        font-family: Oswald,Arial Narrow,Arial,Helvetica,sans-serif !important;
        text-transform:uppercase !important;
        font-size:14px !important;
        margin-right:10px;
        padding:10px;
        display: block;
        -moz-border-radius: 5px;
        border-radius: 5px;
        font-weight:lighter;

}
.nav li{
        float:left;
        overflow:hidden
}
.nav ul{
        list-style:none;
        margin:0;
        overflow:hidden;
        padding:0;
        width:100%
}
.nav ul a:hover
{
        color:#FFF;
        background-color:#454545 !important;                     
}
.nav ul,nav ol
{
        list-style:none;
        list-style-image:none
} 
```

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T14:12:09.690

Engadget 使用名为**Oswald**的开放网络字体。您没有将它包含在您的源代码中，但它[可以在 Google Web Fonts 上找到](http://www.google.com/webfonts/specimen/Oswald)。

```
@import url(http://fonts.googleapis.com/css?family=Oswald:400,300); 
```

这是[您更新的小提琴](http://jsfiddle.net/5UMfe/1/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T14:12:41.750

您必须分别导入。链接字体！在 Engadget 的 css 中，您可以在样式 css 中看到它：

```
@font-face {
    font-family: "Oswald";
    src: url("http ... 
```

我将其更新为示例：http: [//jsfiddle.net/5UMfe/2/](http://jsfiddle.net/5UMfe/2/)

# playframework - 用于 Playframework 的 sbt 构建中的 HTML 缩小

> ID：14091363
> 
> 赞同：8
> 
> 时间：2012-12-30T14:07:12.013
> 
> 标签：playframework, sbt, ivy, minify

我正在将一个项目移植到 playframework。以前我使用这个 Maven 插件在构建中集成了 htmlcompressor： [http ://code.google.com/p/htmlcompressor/#Maven_Plugin](http://code.google.com/p/htmlcompressor/#Maven_Plugin)

有没有人知道我可以集成到我的 Playframework 构建中的与 sbt 兼容的类似 html 缩小选项？

**注意：** *我很清楚 html 缩小是最后一步优化，无关紧要，应该在所有其他优化完成后应用，但这是一个已经享受 html 缩小好处的项目，所以我只是在探索可能性。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T16:03:17.560

按可能的帮助程度排名：

1.  [如何使用 PlayFramework 压缩 html](https://stackoverflow.com/questions/11402624/how-to-compress-html-with-playframework)
2.  [play-minifymod](https://github.com/search?q=play-minifymod)通过[这个讨论](https://groups.google.com/forum/#!topic/play-framework/x3SNGni4ZkA)找到：

    > 由于 Play 1.2.x 没有内置对响应优化的支持，例如 minify 和 gzip 响应，这个模块使用 YUI Compressor 和 googles htmlcompressor 添加了这个功能

3.  [播放框架自动 javascript 和 CSS minifier](https://stackoverflow.com/questions/8342743/play-framework-auto-javascript-and-css-minifier)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T21:27:35.493

即将发布的 Play Framework 2.1（我们已经在生产中使用它）内置了对 gzipping html 响应的支持。请参阅此拉取请求 - [https://github.com/playframework/Play20/pull/375](https://github.com/playframework/Play20/pull/375)

# maven - 使用 Jetty 9 和 Maven 插件在 Windows 中锁定文件

> ID：14091365
> 
> 赞同：7
> 
> 时间：2012-12-30T14:07:28.677
> 
> 标签：maven, jetty, maven-jetty-plugin

关于这个主题有很多可用的信息，但我无法让它在 Jetty 9 中工作。我发现的最新方法是：[Jetty Maven Plugin is ignoring custom webdefault.xml](https://stackoverflow.com/questions/4988019/jetty-maven-plugin-is-ignoring-custom-webdefault-xml)

我从我的 Maven 存储库中提取了 webdefault.xml。然后我将其设置`useFileMappedBuffer`为.`false``jetty-maven-plugin-webdefault.xml`

```
<plugin>
    <groupId>org.eclipse.jetty</groupId>
    <artifactId>jetty-maven-plugin</artifactId>
    <version>9.0.0.M4</version>
    <configuration>
        <webAppConfig>
            <defaultsDescriptor>src/main/resources/jetty-maven-plugin-webdefault.xml<</defaultsDescriptor>
        </webAppConfig>
    </configuration>
</plugin> 
```

当我执行时`jetty:run`，我看到我的 webdefault.xml 被引用：

```
[INFO] Web defaults = src/main/resources/jetty-maven-plugin-webdefault.xml 
```

但我在 Windows 中仍然存在文件锁定问题（使用 IntelliJ IDEA 11）。有谁知道解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T21:05:57.023

在深入挖掘之后，我在 Jetty 9.0.0.M4 中发现了一个错误，导致它忽略了 useFileMappedBuffer 参数：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=395885](https://bugs.eclipse.org/bugs/show_bug.cgi?id=395885)

我已经提出了一个补丁，并希望它会在发布前得到修复 :)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-05T19:33:49.593

我降级为

```
<dependency>
    <groupId>org.mortbay.jetty</groupId>
    <artifactId>jetty-maven-plugin</artifactId>
    <version>8.1.8.v20121106</version>
</dependency> 
```

仍然尊重网络默认值。

# php - Codeigniter，有没有办法自动获取用户错误报告？

> ID：14091367
> 
> 赞同：2
> 
> 时间：2012-12-30T14:07:36.757
> 
> 标签：php, codeigniter

通过电子邮件从用户那里获得错误报告令人沮丧。我敢打赌，大多数用户不会向开发人员发送错误报告。因此，我想设置如果用户收到 PHP 错误代码，我想通过电子邮件自动获取错误报告。

有没有办法在 PHP 或 CodeIgniter 中获取用户错误报告？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T14:11:23.930

你可以这样做：

```
<?php  
// Our custom error handler  
function email_error_handler($number, $message, $file, $line, $vars)  
{  
    $email = " 
        <p>An error ($number) occurred on line 
        <strong>$line</strong> and in the <strong>file: $file.</strong> 
        <p> $message </p>";  
    $email .= "<pre>" . print_r($vars, 1) . "</pre>";  
    $headers = 'Content-type: text/html; charset=iso-8859-1' . "\r\n";  
    // Email the error to someone...  
    error_log($email, 1, 'you@youremail.com', $headers);  
    // Make sure that you decide how to respond to errors (on the user's side)  
    // Either echo an error message, or kill the entire project. Up to you...  
    // The code below ensures that we only "die" if the error was more than  
    // just a NOTICE.  
    if ( ($number !== E_NOTICE) && ($number < 2048) ) {  
        die("There was an error. Please try again later.");  
    }  
}  
// We should use our custom function to handle errors.  
set_error_handler('email_error_handler'); 
// Trigger an error... (var doesn't exist)  
echo $somevarthatdoesnotexist; 
```

[**来源**](http://net.tutsplus.com/tutorials/php/quick-tip-email-error-logs-to-yourself-with-php/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T14:12:18.707

PHP 日志通常记录到 apache 错误日志（如果您使用的是 apache），通常位于`/var/log/httpd/error_log.`

CodeIgniter 的错误日志，如果在 config.php 中启用，默认设置为记录到您的`application/log/date.php`（其中日期是今天的日期）。

如果您愿意，您可以设置一个 cron，每隔一小时通过电子邮件向您发送一个（或两个）文件中的新更改。或者您可以使用 PHP 中的函数创建自己的 PHP 错误处理程序`set_error_handler`。

编辑：mbinette 粘贴了一个使用 PHP`set_error_handler`函数的好例子。需要注意的是，这不会让您知道致命的 500 错误，错误日志会。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T14:12:40.610

您可以查看 codeigniter 关于错误报告的文档 [http://ellislab.com/codeigniter/user-guide/general/errors.html](http://ellislab.com/codeigniter/user-guide/general/errors.html)

提到了 error_reporting() 函数，也许你可以破解它并处理你的电子邮件。

# java - 如何将另一个包中的另一个类访问到 GWT Vaadin 项目中？

> ID：14091370
> 
> 赞同：1
> 
> 时间：2012-12-30T14:08:03.857
> 
> 标签：java, gwt, vaadin

我在 GWT 项目中从另一个具有不同包的类访问一个类时遇到了一些问题。我的项目结构如下所示：

```
++ src/main/java
   ++ fr.myProj.common.kit
        ++ myGenClass.java
   ...
   ++ fr.myProj.common.kit.gwt.client.ui.widgets
        ++ myUiClass.java

++ src/main/resources
   ++ de
       ++ myProj
           ++ common
              ++ kit
                  ++ public
                  AppWidgetSet.gwt.xml 
```

我调用了**`myUiClass.java`**一个没有问题的实例，**`myGenClass.java`**但是当我编译**`AppWidgetSet.gwt.xml`**GWT 时给我一个错误：`No source code is available for type fr.myProj.common.kit.myGenClass; did you forget to inherit a required module?`

我该如何解决这个问题？

**编辑：**

使用`<inherit name="fr.myProj.common.kit.myGenClass">`也不行！！

**编辑2：**

并给出 `fr.myProj.common.kit`自己`kit.gwt.xml`喜欢[的](http://www.vogella.com/articles/GWTModules/article.html)节目也不起作用......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T05:38:20.577

由于您更改了 gwt 模块文件的默认位置，因此它将无法按预期工作。

AppWidgetSet.gwt.xml 在 kit 下，同一个空间没有客户端文件夹。您需要明确指定 gwt 的源路径。在这种情况下，将 AppWidgetSet.gwt.xml上移**一级到 common**，然后为 kit 文件夹添加源标签。 `<source path="kit"></source>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T14:20:42.677

您需要在 *.gwt.xml （在您的情况下可能是 AppWidgetSet.gwt.xml）文件中继承所需的模块：

`<inherits name="module_name"/>`

另外，请注意在 GWT 中，Java 代码被翻译成 Javascript。因此，一些适用于 JVM 的类可能不适用于 GWT。

# ckeditor - Opencart订单页面上的CKEditor？

> ID：14091372
> 
> 赞同：0
> 
> 时间：2012-12-30T14:08:23.490
> 
> 标签：ckeditor, opencart

我正在尝试让 ckeditor 显示在管理员 > 订单历史记录页面上，但似乎没有取得太大进展。

我将以下行添加到 admin/view/template/sale/order_info.tpl

```
 <script type="text/javascript" src="admin/view/javascript/ckeditor/ckeditor.js"></script> 
        <script type="text/javascript"><!--
        CKEDITOR.replace('comment_editor']; ?>', {
            filebrowserBrowseUrl: 'index.php?route=common/filemanager&token=<?php echo $token; ?>',
            filebrowserImageBrowseUrl: 'index.php?route=common/filemanager&token=<?php echo $token; ?>',
            filebrowserFlashBrowseUrl: 'index.php?route=common/filemanager&token=<?php echo $token; ?>',
            filebrowserUploadUrl: 'index.php?route=common/filemanager&token=<?php echo $token; ?>',
            filebrowserImageUploadUrl: 'index.php?route=common/filemanager&token=<?php echo $token; ?>',
            filebrowserFlashUploadUrl: 'index.php?route=common/filemanager&token=<?php echo $token; ?>'
        });
        //--></script> 
```

任何人都可以分享一些我如何解决这个问题的指示吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T14:18:01.640

不完全确定为什么你有这段代码

```
]; ?>' 
```

在线`.replace(`，但不应该在那里。删除应该修复它

# core-data - 主线程中的多个上下文：为什么以及何时使用它们？

> ID：14091375
> 
> 赞同：1
> 
> 时间：2012-12-30T14:08:40.643
> 
> 标签：core-data, memory-management, nsmanagedobjectcontext

我正在寻找一个简单的答案，可以突出在同一线程中使用（或避免）多个上下文的规则（在我的例子中是主要的）。

通常，在 Core Data 中，我设置了一个在整个应用程序中使用的主上下文。然后，如果我需要执行一些后台工作，我会为我运行的每个后台操作创建一个上下文。

这种方法在大多数情况下都是有效的。Core Data 以完美的方式管理内存。但我也可以决定明确清除一些对象图（管理内存占用）。在这里，我可以依靠`- (void)refreshObject:(NSManagedObject *)object mergeChanges:(BOOL)flag`将它传递给`NO`param。但是，我需要小心可能丢失的未决更改。

现在，我的问题如下。是否有任何经验法则可以决定我可以在单个线程（主线程）中使用的上下文数量？我的想法如下。创建一个主要上下文（保存更改）和仅用于显示目的并按需创建的附加上下文。当我用完一个时，我可以发送一个`reset`来回收整个内存。

有什么建议吗？如果对新的 iOS 5 API 有任何影响，请分享。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T12:51:50.040

灵活上瘾，

主线程上下文对于暂存器工作和管理工作集最有用。

Scratchpad 的工作是使用 MOC 来处理您不打算处理的数据`-save:`。或者为撤消管理器设置东西。我发现这比你想象的更有价值。

如果您的 UI 将显示一堆未在 UI 的其余部分中使用的对象，那么您可以通过使用新的 MOC 来管理内存，然后在您关闭视图时将其处理掉。这允许处理所有对您的应用程序的其余部分没有用处的项目。虽然这对于管理内存很有用，但它不能替代响应 iOS 中的内存警告来修剪你的树。

安德鲁

# html - CSS 和 html：如何在 css 中设置输入文件的样式（使用选择文件按钮对齐文本）？

> ID：14091383
> 
> 赞同：1
> 
> 时间：2012-12-30T14:10:08.610
> 
> 标签：html, css

![在此处输入图像描述](../Images/9d9384d196626fb64eefbb7a5389daad.png)

请看上图。我有这个问题好几次了。文本从不与按钮对齐。我们怎样才能改变它，使它们对齐？

代码很简单：

```
<td><label>Image/Avatar Upload</label></td>
<td><input type="file" name="avatar"></td> 
```

和CSS：

```
input {width: 350px; font-size: 20px; padding: 2px;} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T14:44:41.473

简短的回答是：不要费心尝试设置文件输入的样式

长答案：完全控制样式文件输入多年来一直困扰着我们。它们的组件属于所谓的*Shadow DOM*。我们可以看到它们，但我们无法真正触摸它们。较新的输入元素（日期、时间、颜色等）具有相同的“问题”。

应该注意的是，并非每个浏览器样式文件的输入方式都相同。如果你真的*很想*控制这个元素，你必须*替换*它（谷歌：“用图像替换文件输入”）。如果您这样做，用户将无法在不与文件输入元素交互时准确查看正在上传的文件（出于安全原因，文件名将可通过 JavaScript 访问，但路径不会是）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T14:13:36.320

您应该提供更多详细信息，因为您提供的代码运行良好。

```
<td><label>Image/Avatar Upload</label></td>
<td><input type="file" name="avatar"></td> 
```

看到这个[小提琴](http://jsfiddle.net/wKd5b/)

# python - 从 CSV 文件创建字典

> ID：14091387
> 
> 赞同：26
> 
> 时间：2012-12-30T14:10:25.603
> 
> 标签：python, csv, dictionary

我正在尝试编写一个 python 脚本，该脚本将从 CSV 文件中获取输入，然后将其推送为字典格式（我使用的是 Python 3.x）。

我使用下面的代码读取 CSV 文件，并且可以正常工作：

```
import csv

reader = csv.reader(open('C:\\Users\\Chris\\Desktop\\test.csv'), delimiter=',', quotechar='|')

for row in reader:
    print(', '.join(row)) 
```

但现在我想将结果放入字典中。我希望 CSV 文件的第一行用作字典的“键”字段，CSV 文件中的后续行填写数据部分。

样本数据：

```
 Date        First Name     Last Name     Score
12/28/2012 15:15        John          Smith        20
12/29/2012 15:15        Alex          Jones        38
12/30/2012 15:15      Michael       Carpenter      25 
```

我还想用这段代码做一些额外的事情，但现在我正在寻找的是让字典正常工作。

谁能帮我这个？

编辑版本 2：

```
import csv
reader = csv.DictReader(open('C:\\Users\\Chris\\Desktop\\test.csv'))

result = {}

for row in reader:
    for column, value in row.items():
        result.setdefault(column, []).append(value)
        print('Column -> ', column, '\nValue -> ', value)
print(result)

fieldnames = result.keys()

csvwriter = csv.DictWriter(open('C:\\Users\\Chris\\Desktop\\test_out.csv', 'w'), delimiter=',', fieldnames=result.keys())

csvwriter.writerow(dict((fn,fn) for fn in fieldnames))

for row in result.items():
    print('Values -> ', row)
    #csvwriter.writerow(row)

'''
Test output

'''
test_array = []
test_array.append({'fruit': 'apple', 'quantity': 5, 'color': 'red'});
test_array.append({'fruit': 'pear', 'quantity': 8, 'color': 'green'});
test_array.append({'fruit': 'banana', 'quantity': 3, 'color': 'yellow'});
test_array.append({'fruit': 'orange', 'quantity': 11, 'color': 'orange'});
fieldnames = ['fruit', 'quantity', 'color']
test_file = open('C:\\Users\\Chris\\Desktop\\test_out.csv','w')
csvwriter = csv.DictWriter(test_file, delimiter=',', fieldnames=fieldnames)
csvwriter.writerow(dict((fn,fn) for fn in fieldnames))
for row in test_array:
    print(row)
    csvwriter.writerow(row)
test_file.close() 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-12-30T14:21:05.520

创建一个字典，然后遍历结果并填充字典中的行。请注意，如果您遇到具有重复日期的行，您将必须决定要做什么（引发异常、替换前一行、丢弃后一行等...）

这是 test.csv：

```
Date,Foo,Bar
123,456,789
abc,def,ghi 
```

和相应的程序：

```
import csv
reader = csv.reader(open('test.csv'))

result = {}
for row in reader:
    key = row[0]
    if key in result:
        # implement your duplicate row handling here
        pass
    result[key] = row[1:]
print(result) 
```

产量：

```
{'Date': ['Foo', 'Bar'], '123': ['456', '789'], 'abc': ['def', 'ghi']} 
```

或者，使用 DictReader：

```
import csv
reader = csv.DictReader(open('test.csv'))

result = {}
for row in reader:
    key = row.pop('Date')
    if key in result:
        # implement your duplicate row handling here
        pass
    result[key] = row
print(result) 
```

结果是：

```
{'123': {'Foo': '456', 'Bar': '789'}, 'abc': {'Foo': 'def', 'Bar': 'ghi'}} 
```

或者您可能希望将列标题映射到该列的值列表：

```
import csv
reader = csv.DictReader(open('test.csv'))

result = {}
for row in reader:
    for column, value in row.items():  # consider .iteritems() for Python 2
        result.setdefault(column, []).append(value)
print(result) 
```

这会产生：

```
{'Date': ['123', 'abc'], 'Foo': ['456', 'def'], 'Bar': ['789', 'ghi']} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-30T14:17:52.357

你需要一个 Python [DictReader](http://docs.python.org/2/library/csv.html#csv.DictReader)类。可以从[这里找到更多帮助](http://www.doughellmann.com/PyMOTW/csv/)

```
import csv

with open('file_name.csv', 'rt') as f:
    reader = csv.DictReader(f)
    for row in reader:
        print row 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-04T11:48:17.023

@phil-frost 的帮助非常有帮助，这正是我想要的。

之后我做了一些调整，所以我想在这里分享一下：

```
def csv_as_dict(file, ref_header, delimiter=None):

    import csv
    if not delimiter:
        delimiter = ';'
    reader = csv.DictReader(open(file), delimiter=delimiter)
    result = {}
    for row in reader:
        print(row)
        key = row.pop(ref_header)
        if key in result:
            # implement your duplicate row handling here
            pass
        result[key] = row
    return result 
```

你可以这样称呼它：

```
myvar = csv_as_dict(csv_file, 'ref_column') 
```

其中 ref_colum 将是每一行的主键。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-13T05:35:15.143

```
import csv
def parser_csv(PATH):
    reader = csv.reader(open("{}.csv".format(PATH), 'r'))
    dict = {}
    list_dict = []
    counter = 0
    for row in reader:
        if counter == 0:
            first_row = row
            ecc = len(first_row)
            counter += 1
        else:
            for col in range(ecc):
                dict.update({first_row[col]:row[col]})
            list_dict.append(dict)
    return list_dict
print(len(parser_csv("path")))
# Have one less csv file (first row is keys of dict) 
```

# connection - 如何关闭此代码中的 ResultSet、Statement 和 Connection？

> ID：14091390
> 
> 赞同：0
> 
> 时间：2012-12-30T14:11:05.067
> 
> 标签：connection, resultset

如何关闭此代码中的 ResultSet、Statement 和 Connection，因为单击几下后，程序给我错误 com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException：数据源拒绝建立连接，来自服务器的消息：“连接太多"

这是代码...

```
private void pautoInc() {
    int i;
    int len;
    String code = "";
    try {
        Statement s = Db.connectDb().createStatement();
        ResultSet rs = s.executeQuery("SELECT COUNT(*) AS x FROM product");
        while (rs.next()) {
            String st = rs.getString("x");
            len = st.length();
            i = Integer.parseInt(st);

            if (len == 1 & i != 9) {
                i += 1;
                code = "P0000" + i;
            } else if (i == 9) {
                i += 1;
                code = "P000" + i;
            } else if (len == 2) {
                i += 1;
                code = "P000" + i;

            } else if (len == 3) {
                i += 1;
                code = "P00" + i;
            }
            prodid.setText(code);
        }
    } catch (Exception e) {
        e.printStackTrace();;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T14:17:05.820

```
private void pautoInc() {
    int i;
    int len;
    String code = "";
    Connection c = null;
    Statement s = null;
    ResultSet rs = null;
    try {
        c = Db.connectDb();
        s = c.createStatement();
        rs = s.executeQuery("SELECT COUNT(*) AS x FROM product");
        while (rs.next()) {
            String st = rs.getString("x");
            len = st.length();
            i = Integer.parseInt(st);

            // ... your business code
        }
    } catch (Exception e) {
        e.printStackTrace();;
    } finally {
        if (null != rs) try { rs.close(); } catch (Exception e) { /* ignore */}
        if (null != s) try { s.close(); } catch (Exception e) { /* ignore */}
        if (null != c) try { c.close(); } catch (Exception e) { /* ignore */}
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T14:17:36.340

```
private void pautoInc() {
int i;
int len;
String code = "";
Statement s = null;
ResultSet rs = null;
try {
    s = Db.connectDb().createStatement();
    rs = s.executeQuery("SELECT COUNT(*) AS x FROM product");
    while (rs.next()) {
        String st = rs.getString("x");
        len = st.length();
        i = Integer.parseInt(st);

        if (len == 1 & i != 9) {
            i += 1;
            code = "P0000" + i;
        } else if (i == 9) {
            i += 1;
            code = "P000" + i;
        } else if (len == 2) {
            i += 1;
            code = "P000" + i;

        } else if (len == 3) {
            i += 1;
            code = "P00" + i;
        }
        prodid.setText(code);
    }
} catch (Exception e) {
    e.printStackTrace();;
} finally {
    try {
        if (rs != null) rs.close();
        if (s != null) s.close();
    } catch(Exception e) { // can not close the rs or statement }
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:30:07.163

你可以加 ：

```
s.getMoreResults(java.sql.Statement.CLOSE_CURRENT_RESULT);
Db.connectDb().commit();
Db.connectDb().close(); 
```

你最好添加：

```
Db.connectDb().setAutoCommit(false); 
```

前

```
ResultSet rs = s.executeQuery("SELECT COUNT(*) AS x FROM product"); 
```

# android - JOpenDocument 与 Android

> ID：14091393
> 
> 赞同：0
> 
> 时间：2012-12-30T14:11:35.133
> 
> 标签：android, opendocument

我想从我的 sdcard 打开一个 ods 文件。文件对象返回“文件存在”。

我的整个测试片段是

```
final String fileName = Environment.getExternalStorageDirectory() + "/file.ods";
final File file = new File(fileName);
final SpreadSheet spreadSheet = SpreadSheet.createFromFile(file); 
```

最后一行在**org.jdocument.dom.ODPackage$1.processEntry处抛出****java.lang.ExceptionInInitializerError**。

 **这是因为 Android 中有一个小型 XML 库吗？

PS：我使用**jOpenDocument-1.2.jar**作为外部库。

PPS：我的 ODS 文件是由 Google Drive 创建的。**

# php - php pthreads 最大执行时间

> ID：14091402
> 
> 赞同：0
> 
> 时间：2012-12-30T14:12:25.887
> 
> 标签：php

我正在阅读关于 pthreads 主题的[http://pthreads.org/](http://pthreads.org/)并且我有这个问题。pthread 是否取决于使用设置的最大执行时间，`void set_time_limit ( int $seconds )`或者线程运行的时间是否超过 set_time_limit 允许的时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T08:03:58.500

运行 pthreads 需要在线程模式下运行 PHP；它受到与任何 PHP 线程构建相同的限制和奇怪之处。

# html - 向 Audio 对象添加功能

> ID：14091413
> 
> 赞同：0
> 
> 时间：2012-12-30T14:13:33.573
> 
> 标签：html, google-chrome, firefox, html5-audio

尝试像这样在javascript中向音频对象添加停止功能

```
//Give the Audio object a stop function
Audio.prototype.stop = function()
{
this.pause();
this.currentTime = 0.0;
} 
```

可以这样使用

```
var aud = new Audio();
aud.src = 'background.ogg';
aud.play();
aud.stop(); 
```

适用于谷歌浏览器，但不适用于 Firefox。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T07:57:00.400

创建一个元素 用`new Audio`创建一个其原型为 的元素`HTMLAudioElement.prototype`。根据规范，这应该是与 相同的对象`Audio.prototype`，但我相信 Firefox 还没有实现 WebIDL 的那部分。

无论如何`HTMLAudioElement.prototype`，我认为，设置你的东西应该在两种浏览器中都可以使用。

# objective-c - UIScrollView 的最大缩放比例

> ID：14091415
> 
> 赞同：1
> 
> 时间：2012-12-30T14:13:49.223
> 
> 标签：objective-c, ios, uiscrollview

基于[Large Image Downsizing iOS sample code](http://developer.apple.com/library/ios/#samplecode/LargeImageDownsizing/Introduction/Intro.html)，我正在尝试为我的 UIScrollView 设置最大缩放比例，以免图像太大。

我知道 UIScrollView 的 maximumZoomScale 本机属性是指 zoomScale 属性，以便授权放大或不放大。但是，在此示例代码中，图像的比例是使用自定义浮动 imageScale 管理的，并且 UIScrollView 的 zoomScale 属性始终为 1。

我在这个示例代码中看到，最大缩放比例是使用这种方法管理的：

```
- (void)scrollViewDidEndZooming:(UIScrollView *)scrollView withView:(UIView *)view atScale:(float)scale {
    imageScale *=scale;
    if( imageScale < maximumScale ) imageScale = minimumScale; // THIS IS THE LINE WHO AVOID TO ZOOM TOO MUCH BUT IT MAKES A REALLY UGLY BEHAVIOUR

    CGRect imageRect = CGRectMake(0.0f,0.0f,CGImageGetWidth(image.CGImage) * imageScale,CGImageGetHeight(image.CGImage) * imageScale);
    // Create a new TiledImageView based on new frame and scaling.
    frontTiledView = [[TiledImageView alloc] initWithFrame:imageRect image:image scale:imageScale]; 
    [self addSubview:frontTiledView];
    [frontTiledView release];
} 
```

所以我希望找到一种与 UIScrollView 本机具有相同行为的解决方案。每次我在代码中更改它时，我都尝试将 zoomScale 设置为 imageScale 的值，但它会对图像产生奇怪的行为，所以我不能使用这种方法。

所以，我的问题是：

*   有没有办法告诉 UIScrollView 它必须像 zoomScale 值一样采用 imageScale ？（可能会覆盖本机方法）
*   是否有另一种方法可以将比例限制为最大值？
*   有没有办法定义最大尺寸而不是最大比例？

非常感谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T15:12:35.703

我想我走的很好！这段代码解决了我的问题！

```
if (imageScale > delegateAppli.params.zoomLevelAuthorized) self.maximumZoomScale = 1.0;
else self.maximumZoomScale = 1 + delegateAppli.params.zoomLevelAuthorized - imageScale; 
```

希望我的回答能帮助到其他人...

# android - 活动组中的 onActivityResult

> ID：14091416
> 
> 赞同：0
> 
> 时间：2012-12-30T14:13:50.070
> 
> 标签：android, activitygroup

on ActivityResult() 方法，写在一个从未调用过的 childActivity

我的 TabGrpActivity 扩展了 ActivityGroup。

```
public class TabGroupActivity extends ActivityGroup 
```

{ 私有 ArrayListmIdList;

```
@Override
protected void onCreate(Bundle savedInstanceState) 
{
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    if(mIdList==null)
        mIdList = new ArrayList<String>();
    obj = new ScheduleView();
    startChildActivity("Activity1", new Intent(this,Activity1.class));
}

public void startChildActivity(String Id,Intent intent)
{
    Window window = getLocalActivityManager().startActivity(Id, 
            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
    if(window!=null)
    {
        mIdList.add(Id);
        setContentView(window.getDecorView());
    }
} 
```

在我的 Activity1（子活动）中，使用 startActivityForresult() 调用另一个活动。代码如下。

```
mybund.putString("event", obj_rowitem.getevent());
Intent schedule = new Intent(getApplicationContext(), Activity2.class);
schedule.putExtras(mybund);
startActivityForResult(schedule, req_code); 
```

我还在Activity1中写了一个onActivityResult方法，代码如下

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data)
{

    year = data.getExtras().getInt("year");
    month=data.getExtras().getInt("month");
    date=data.getExtras().getInt("date");
    String getdate=year+"-"+month+"-"+date;
    readschedules(getdate);
    rowitems=getdata(getdate);
    listview.setAdapter(new CustomView(getApplicationContext(), rowitems));

} 
```

一件事是我将 Activity2 称为一个简单的活动，它不是一个子活动......

这里我的问题是......在控件将去的Activity2中调用setResult（）之后......

我不明白生命周期ActivityGroup..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T15:14:38.827

您应该使用活动上下文而不是应用程序上下文，这样它将结果返回给正确的活动。所以：

```
Intent schedule = new Intent(this, Activity2.class); 
```

或者：

```
Intent schedule = new Intent(Activity1.this, Activity2.class) 
```

有关更多信息，请阅读不同的上下文。

# javascript - 在动态创建的节点中更改图像

> ID：14091419
> 
> 赞同：0
> 
> 时间：2012-12-30T14:14:21.423
> 
> 标签：javascript, html, imagesource

最终，我希望用户能够单击节点，显示选择的图像并用他们的选择填充节点。但是，现在，我只是想测试如何在创建表时使用不同的图像 onclick 更改放置在节点中的图像。我的逻辑是否模糊？

```
for (r = 0; r < howOften; r++) {
        row = table.insertRow(-1);

        for (c = 0; c < numDays; c++) {
            col = row.insertCell(-1);
            img=new Image();
            img.src="../www/images/TEST.png";
            col.appendChild(img);

                img.onclick = function() {
                image1= new Image();
                image1.src="../www/images/TEST2.png";
                img=image1;     
                };
            }
        };
    document.getElementById('holdTable').appendChild(table);
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T14:30:59.640

当您将 img 附加到 col 时，您将附加由变量 img“指向”的图像。如果（何时）您稍后将变量 img 更改为指向另一个值，它不会更改附加到 col 的内容。您可以通过`img = 'hello';`在 appendChild 之后立即添加来测试它 - 您会发现附加了 img 而不是“hello”。

在 onclick 函数中，当您将 img 更改为“指向”image1 时，它不会更改附加到 col 的图像。

如果您想真正更改附加到 dom 的内容，则需要删除 Image 并在其位置插入另一个对象。

但幸运的是，您想要的是带有另一个 src 的图像，因此您不需要从 dom 中删除图像并插入另一个图像 - 您只需要更改已经存在的图像的 src。为此，您应该做的是在 onclick 函数中使用“this”变量（指向 col 中的图像）并更改其“src”。

IE。

```
img.onclick = function() {
    // wrong:
    //var image1= new Image();
    //image1.src="../www/images/TEST2.png";
    //img=image1;  

    // right:    
    this.src = '../www/images/TEST2.png';
}; 
```

# android - 防止重复使用 ListView 中的某些视图（自定义光标适配器）

> ID：14091423
> 
> 赞同：0
> 
> 时间：2012-12-30T14:15:13.137
> 
> 标签：android, listview, android-cursoradapter

是否可以将在 期间创建的**一个**视图添加`newView(..)`为单独的类型，以便在 期间防止仅重用该视图`bindView(...)`？

这是我的自定义 cursorAdapter 的样子：

```
@Override
public void bindView(View vi, Context arg1, Cursor cursor) {
    priority.setText(cursor.getString(cursor.getColumnIndex(TodoTable.COLUMN_PRIORITY)));TextView timeElapsed =  (TextView)vi.findViewById(R.id.todayTime); //time
    long id = cursor.getLong(cursor.getColumnIndex(TodoTable.COLUMN_ID));

    if(ts.getRunning() == id){
        ts.startTimer(vi, ts.getCurrentTaskStart(), id);
    }else{
        long time = cursor.getLong((cursor.getColumnIndex(TodoTable.COLUMN_TIME)));
        timeElapsed.setText(ts.getTimeString(0, 0, time));
    }
}
@Override
public View newView(Context context, Cursor cursor, ViewGroup arg2) {
    LayoutInflater inflater = LayoutInflater.from(context);
    View vi = inflater.inflate(R.layout.list_item, null);
    bindView(vi, context, cursor);
    return vi;
} 
```

我尝试将它添加到不同的类型，使用`getItemViewType`and`getViewTypeCount`但这只能处理位置而不是与列表视图的行关联的 ID。

我想防止在`ts.getRunning() == id`滚动时在其他位置重用创建时的视图。我该怎么做这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T14:47:37.183

覆盖 getView 方法。如果您查看 CursorAdapter ( [link](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.4_r2.1/android/widget/CursorAdapter.java?av=f) ) 的源代码，您会看到他们检查视图是否为空的地方。您只需要复制整个方法，并添加一个额外的 if 检查`ts.getRunning() == id`

这是它现在的样子 -

```
public View getView(int position, View convertView, ViewGroup parent) {
    if (!mDataValid) {
        throw new IllegalStateException("this should only be called when the cursor is valid");
    }
    if (!mCursor.moveToPosition(position)) {
        throw new IllegalStateException("couldn't move cursor to position " + position);
    }
    View v;
    if (convertView == null || ts.getRunning() == id) {
        v = newView(mContext, mCursor, parent);
    } else {
        v = convertView;
    }
    bindView(v, mContext, mCursor);
    return v;
} 
```

值得庆幸的是，该方法中使用的所有字段似乎都受到保护，因此您不应该遇到任何问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T15:02:18.457

如果要防止在某个位置重用视图，请执行以下操作

```
@Override
public int getItemViewType(int position) {
    mCursor.moveToPosition(position);
    if (mCursor.getLong(mCursor.getColumnIndex(TodoTable.COLUMN_ID)) == ts.getRunning()){
        return IGNORE_ITEM_VIEW_TYPE;
    }
    return super.getItemViewType(position);
} 
```

如果您返回`IGNORE_ITEM_VIEW_TYPE`，`getItemViewType(position)`则该位置的视图将不会被回收。更多信息`IGNORE_ITEM_VIEW_TYPE`在[这里](http://developer.android.com/reference/android/widget/Adapter.html#IGNORE_ITEM_VIEW_TYPE)

# android - 在没有 ContentProvider 的情况下使用 CursorLoader 并避免数据库泄漏

> ID：14091425
> 
> 赞同：1
> 
> 时间：2012-12-30T14:15:35.650
> 
> 标签：android, sqlite, android-loadermanager, android-cursorloader, connection-leaks

我已经实现了在这个问题中找到的类：

[没有 ContentProvider 的 CursorLoader 使用](https://stackoverflow.com/questions/7182485/usage-cursorloader-without-contentprovider)

它是一种在没有内容解析器的情况下使用 LoaderManager 和 CursorLoader 的方法。我正在使用它从 SQLite 数据库加载数据并将其显示在 ListFragment 中。

我看到的问题是数据库正在泄漏​​。显然这是因为我完成后没有关闭数据库。

我现在已经开始这样做了，但我担心数据库可以随时被使用 AlarmManager 调度的后台任务访问。我担心当另一个班级需要打开数据库时我可能会关闭数据库。

我的解决方案是计算打开/关闭次数，只有在没有人使用数据库时才关闭数据库。像这样：

```
 public synchronized SQLiteDatabase openDataBase()
{
    try
    {
        mDatabaseUsers++;

        Log.d(TAG, "DatabaseUsers: " + mDatabaseUsers);

        // If already open, return it.
        if (mOpenDatabase != null && mOpenDatabase.isOpen())
            return mOpenDatabase;

        OpenHelper openHelper = new OpenHelper(mContext);
        return openHelper.getWritableDatabase();
    } catch (SQLException e)
    {
        Log.e("MessageDelay", "Error opening database: " + e.toString());

        return null;
    }
}

public synchronized void closeDatabase()
{
    mDatabaseUsers--;

    // If no one is using the database, close it.
    if (mOpenDatabase != null && mDatabaseUsers == 0)
    {
        mOpenDatabase.close();
    }

    Log.d(TAG, "DatabaseUsers: " + mDatabaseUsers);
} 
```

这似乎可行，但这意味着在我的应用程序中添加额外的代码行。此外，我遇到了 LoaderManager 没有按预期运行的问题，并且它调用重置函数的次数超过了加载次数，因此我不得不对此进行修复：

```
 return new SimpleCursorLoader(getActivity())
    {
        private int mDBOpens = 0;

        @Override
        public Cursor loadInBackground()
        {
            mDBOpens++;
            return JSQLite.getSingleton(getActivity()).retrieveTextsSent(mMode == 1 ? true : false);
        }

        @Override
        public void reset()
        {
            if (mDBOpens > 0)
            {
                JSQLite.getSingleton(getContext()).closeDatabase();
            }
            super.reset();

            mDBOpens--;
        }
    }; 
```

感觉这不是正确的做法。是否有另一种更简洁的方法来仅在需要时关闭/打开数据库？

谢谢，杰森。

# c# - 在面板上重绘矩形

> ID：14091431
> 
> 赞同：0
> 
> 时间：2012-12-30T14:16:49.010
> 
> 标签：c#, drawing, rectangles

在我的代码中，我将一个矩形绘制为面板的“框架”。我从 XML 文件中获取所需的颜色作为字符串（如“红色”、“蓝色”等）。在创建面板时，我正在使用以下代码对其进行绘制：

```
 Strip.Paint += (sender, e) =>
                {
                    //MessageBox.Show(clr.ToString());
                    Pen p = new Pen(Color.FromName(color), 2); // color is the string with name of the color
                    Rectangle r = new Rectangle(1, 1, 286, 36);
                    e.Graphics.DrawRectangle(p, r);
                    p.Dispose();
                    e.Dispose();
                }; 
```

在应该刷新矩形的方法中，我添加了这一行

```
Strip.Refresh(); 
```

这工作正常。但是，每 30 秒使用一次 Timer，我会检查颜色是否发生了变化，
如果发生了变化，则使用请求的颜色重新绘制矩形。第一个矩形正确绘制。但是当 Timer 达到 30 时，它只是......好吧我什至不确定如何描述它，这是“刷新”后它的图片： ![应用刷新前后的打印画面，不包括文字](../Images/d951fae640657a7156eefa8de23eeb21.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T14:57:50.980

“红十字”是在`OnPaint`方法内部引发异常时发生的情况。这意味着您的`Paint`lambda 代码中存在错误。

一旦抛出异常，就会设置一个内部标志，并且控件将不再尝试重新绘制自身。仅当应用程序再次运行或执行[此技巧](http://www.sturmnet.org/blog/2005/03/23/red-x)时才会重置。

我~~怀疑~~知道您的问题是您**不应该在事件中使用`Dispose()`该`PaintEventArgs`对象。`Paint`**

通常，您不必处理不是您自己创建的对象。

# opengl - OpenGL 360 度透视

> ID：14091433
> 
> 赞同：5
> 
> 时间：2012-12-30T14:16:55.433
> 
> 标签：opengl, panoramas

我正在寻找拍摄我场景的 360 度全景全景照片。我怎样才能做到最好？如果我做对了，我不能以普通的方式将视角设置为 360。

如果我需要一个顶点着色器，有可用的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-30T14:23:18.660

这实际上是一件不平凡的事情。

在一种简单的方法中，一个顶点着色器不是通过矩阵乘法而是通过三角函数来转换顶点位置的，这似乎可以解决问题。问题是，这不会使直线“弯曲”。您可以使用镶嵌着色器添加足够的几何图形来弥补这一点。

最直接的方法是双重的。首先，您将场景渲染成立方体贴图，即以 90°×90° FOV 渲染到组成立方体的 6 个方向。这允许您使用常规仿射投影来渲染场景。

在第二步中，您使用生成的立方体贴图对屏幕填充网格进行纹理处理，其中每个顶点的纹理坐标是方位角和仰角。

另一种方法是使用具有非常小的 FOV 的平铺渲染并旋转“相机”，有点像在不使用广角镜头的情况下拍摄全景照片。事实上，基于立方体贴图的方法是平铺渲染，但它比尝试直接更改相机方向和视口位置更容易做到这一点。

# asp.net - asp.net + 异常和重定向

> ID：14091437
> 
> 赞同：0
> 
> 时间：2012-12-30T14:17:15.030
> 
> 标签：asp.net, exception-handling

我的意图是在捕获到异常时记录错误（我正在使用 Log4Net）并重定向到带有一些错误消息的漂亮页面。我有一个返回类型 T 对象的类，主要是一个数据集。

在我的 Catch 声明中，我写了这个，它有效，但我不确定是否有更合适的处理方式，有人可以请教。谢谢。请注意，throw 不能省略，因为该类具有返回类型。：

```
 catch (Exception ex)
        {
            log.Error(ex);
            HttpContext.Current.Response.Redirect("~/errorPage.aspx");
            throw ex;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T06:40:55.110

这取决于您希望如何处理页面上的错误，一般来说，未处理的异常应该冒泡到 gloabl.asax 文件中的 application_error 到它的泛型。这是处理此错误的一种简单方法。

```
void Application_Error(object sender, EventArgs e)
{
// Code that runs when an unhandled error occurs
// Get the exception object.
Exception exc = Server.GetLastError();

// Handle HTTP errors
if (exc.GetType() == typeof(HttpException))
{
// The Complete Error Handling Example generates
// some errors using URLs with "NoCatch" in them;
// ignore these here to simulate what would happen
// if a global.asax handler were not implemented.
  if (exc.Message.Contains("NoCatch") || exc.Message.Contains("maxUrlLength"))
  return;

//Redirect HTTP errors to HttpError page
  Server.Transfer("HttpErrorPage.aspx");
}

  // For other kinds of errors give the user some information
 // but stay on the default page
  Response.Write("<h2>Global Page Error</h2>\n");
 Response.Write(
  "<p>" + exc.Message + "</p>\n");
  Response.Write("Return to the <a href='Default.aspx'>" +
  "Default Page</a>\n");

 // Log the exception and notify system operators
 ExceptionUtility.LogException(exc, "DefaultPage");
 ExceptionUtility.NotifySystemOps(exc);

 // Clear the error from the server
 Server.ClearError();
} 
```

# c++ - 整数变量赋值的差异

> ID：14091444
> 
> 赞同：1
> 
> 时间：2012-12-30T14:17:56.013
> 
> 标签：c++, variables, variable-assignment

我刚问了这个[问题](https://stackoverflow.com/questions/14091203/assignment-of-address-to-integer-variable)，这让我想到是否有任何理由

1）为什么你会使用十六进制或八进制而不是十进制分配一个 int 变量和

2）不同的赋值方式有什么区别

```
int a=0x28ff1c;  // hexideciaml
int a=10;        //decimal (the most commonly used way)
int a=012177434; // octal 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T14:23:26.703

1.  用十六进制编写时，您可能有一些更容易理解的常量。

    例如，十六进制的位标志紧凑且易于理解（对于某些易于理解的值），因为直接对应 4 个二进制数字 => 1 个十六进制数字 - 因此，通常十六进制表示在您按位执行时很有用操作（例如掩蔽）。

    以类似的方式，在某些情况下，整数可以在某些字段中进行内部划分，例如，颜色通常表示为 32 位整数，如下所示：（`0xAARRGGBB`或`0xAABBGGRR`）；此外，IP 地址：点分表示法中的每一段 IP 都是“32 位整数”表示法中的两个十六进制数字（通常在这种情况下，`unsigned`整数用于避免与符号位混淆）。

    在我目前正在处理的一些代码中，对于图像中的每个像素，我都有一个字节用于存储“附件信息”；因为我必须存储一些标志和一个小数字，所以我使用最低有效的 4 位来存储标志，使用 4 个最高有效位来存储数字。使用十六进制符号可以立即编写适当的掩码和移位：`byte & 0x0f`给我 4 个 LS 位作为标志，`(byte & 0xf0)>>4`给我 4 个 MS 位（重新移位）。

    [除了IOCCC](http://www.ioccc.org/)和 UNIX 权限掩码之外，我从未见过八进制用于任何其他用途（尽管在最后一种情况下它们实际上很有用，你可能知道你是否曾经使用过`chmod`）；可能它们包含在语言中是因为 C 最初是作为编写 UNIX 的语言而开发的。

2.  ~~默认情况下，整数字面量是 type `int`，而十六进制字面量是 type`unsigned int`或更大，如果`unsigned int`不足以容纳指定的值。因此，当将十六进制文字分配给`int`一个隐式转换时（虽然它不会影响性能，但任何体面的编译器都会在编译时执行转换）。~~对不起，脑残。我现在检查了标准，它是这样的：

    *   没有后缀的十进制文字`u`总是有符号的；它们的类型是可以表示它们之间的最小的`int`, `long int`, `long long int`;
    *   相反，没有后缀的八进制和十六进制文字也可以是`unsigned`类型；它们的实际类型是可以表示`int`, `unsigned int`, `long int`, `unsigned long int`, `long long int`,之间值的最小类型`unsigned long long int`。

    （C++11，§2.14.2，¶2 和表 6）

    差异可能与重载决议¹相关，但当您只是将文字分配给变量时，它并不是特别重要。不过，请记住，您可能有大于 an 的有效整数常量`int`，即分配给 an`int`将导致有符号整数溢出；无论如何，任何体面的编译器都应该能够在这些情况下警告您。

* * *

1.  假设在我们的平台上整数是 2 的补码表示，`int`是 16 位宽，long 是 32 位宽；假设我们有一个像这样的重载函数：

    ```
    void a(unsigned int i)
    {
        std::cout<<"unsigned";
    }

    void a(int i)
    {
        std::cout<<"signed";
    } 
    ```

    然后，调用`a(1)`and`a(0x1)`将产生相同的结果 ( `signed`)，但`a(32768)`将 print`signed`和`a(0x10000)`print `unsigned`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-30T14:21:53.980

**从可读性的角度来看，这很重要——你选择哪一个表达了你的意图。**

如果您将变量视为整数类型，您知道，就像`2+2=4`，您使用十进制表示。它直观且直接。

如果您将其用作位掩码，则可以使用六进制、八进制甚至二进制。例如，你会知道

```
int a = 0xFF; 
```

将最后 8 位设置为`1`. 你会知道的

```
int a = 0xF0; 
```

是`(...)11110000`，但你不能直接说同样的话

```
int a = 240; 
```

虽然它们是等价的。这仅取决于您使用这些数字的目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T14:21:08.067

好吧，事实是，无论您想要十进制，八进制还是十六进制都没有关系，它只是一种表示形式，并且为了您的信息，计算机中的数字以二进制形式存储（因此它们只是 0 和 1），您也可以使用它来代表一个数字。所以它只是表示和可读性的问题。

**注意：** 在一些 C++ 调试器中（根据我的经验），我分配了一个数字作为十进制表示，但在我的调试器中它显示为十六进制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T14:22:13.933

它类似于这种方式和整数的赋值：

```
int a = int(5);
int b(6);
int c = 3; 
```

这完全取决于偏好，当它崩溃时，你只是在做同样的事情。有些人可能会选择八进制或十六进制来配合他们处理该类型数据的程序。

# frameworks - ZF2路由配置

> ID：14091445
> 
> 赞同：3
> 
> 时间：2012-12-30T14:17:59.007
> 
> 标签：frameworks, url-routing, zend-framework2

我刚刚建立了一个 zf2 项目，但我遇到了配置问题。

当我访问 mydomain.com 时，此路由会按照配置文件中的指定路由到应用程序模块、索引控制器、索引操作。

但是如果我输入 mydomain.com/otheraction 这不会路由到应用程序模块、索引控制器、其他操作操作。当然，因为它没有配置为执行此操作。

所以我的问题是如何配置应用程序来做到这一点？我添加了我的 Application/config/module.config.php 文件和主配置文件。谢谢！

**模块.config.php**

```
 <?php
/**
 * Zend Framework (http://framework.zend.com/)
 *
 * @link      http://github.com/zendframework/ZendSkeletonApplication for the canonical source repository
 * @copyright Copyright (c) 2005-2012 Zend Technologies USA Inc. (http://www.zend.com)
 * @license   http://framework.zend.com/license/new-bsd New BSD License
 */

return array(
    'router' => array(
        'routes' => array(
            'home' => array(
                'type' => 'Zend\Mvc\Router\Http\Literal',
                'options' => array(
                    'route'    => '/',
                    'defaults' => array(
                        'controller' => 'Application\Controller\Index',
                        'action'     => 'index',
                    ),
                ),
            ),
            // The following is a route to simplify getting started creating
            // new controllers and actions without needing to create a new
            // module. Simply drop new controllers in, and you can access them
            // using the path /application/:controller/:action
            'application' => array(
                'type'    => 'Literal',
                'options' => array(
                    'route'    => '/application',
                    'defaults' => array(
                        '__NAMESPACE__' => 'Application\Controller',
                        'controller'    => 'Index',
                        'action'        => 'index',
                    ),
                ),
                'may_terminate' => true,
                'child_routes' => array(
                    'default' => array(
                        'type'    => 'Segment',
                        'options' => array(
                            'route'    => '/[:controller[/:action]]',
                            'constraints' => array(
                                'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                                'action'     => '[a-zA-Z][a-zA-Z0-9_-]*',
                            ),
                            'defaults' => array(
                            ),
                        ),
                    ),
                ),
            ),
        ),
    ),
    'service_manager' => array(
        'factories' => array(
            'translator' => 'Zend\I18n\Translator\TranslatorServiceFactory',
        ),
    ),
    'translator' => array(
        'locale' => 'en_US',
        'translation_file_patterns' => array(
            array(
                'type'     => 'gettext',
                'base_dir' => __DIR__ . '/../language',
                'pattern'  => '%s.mo',
            ),
        ),
    ),
    'controllers' => array(
        'invokables' => array(
            'Application\Controller\Index' => 'Application\Controller\IndexController'
        ),
    ),
    'view_manager' => array(
        'display_not_found_reason' => true,
        'display_exceptions'       => true,
        'doctype'                  => 'HTML5',
        'not_found_template'       => 'error/404',
        'exception_template'       => 'error/index',
        'template_map' => array(
            'layout/layout'           => __DIR__ . '/../view/layout/layout.phtml',
            'application/index/index' => __DIR__ . '/../view/application/index/index.phtml',
            'error/404'               => __DIR__ . '/../view/error/404.phtml',
            'error/index'             => __DIR__ . '/../view/error/index.phtml',
        ),
        'template_path_stack' => array(
            __DIR__ . '/../view',
        ),
    ),
); 
```

**应用程序.config.php**

```
<?php
return array(
    'modules' => array(
        'Application',
        'ZfcBase',
        'ZfcUser',
    ),
    'module_listener_options' => array(
        'config_glob_paths'    => array(
            'config/autoload/{,*.}{global,local}.php',
        ),
        'module_paths' => array(
            './module',
            './vendor',
        ),
    ),
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T14:23:46.890

在 routes 子数组中，添加一个类似于 'home' 条目的下一个条目，例如：

```
'user' => array(
    'type' => 'Zend\Mvc\Router\Http\Literal',
    'options' => array(
        'route'    => '/user',
        'defaults' => array(
            'controller' => 'Application\Controller\User',
            'action'     => 'some-action',
        ),
    ),
), 
```

这会将 yourpage.com/user 路由到`someActionAction`您的`UserController`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T14:30:15.227

配置的默认路由是接受这种格式的任何url，这是标准格式

```
mydomain.com/
mydomain.com/applicatiom/controller/action (standard format) 
```

在您的情况下 mydomain.com/otheraction 路由器期望一个模块 otheraction，但它不存在。

如果您需要上面指定的路线，请在路线下有一个条目

```
'otheraction' => array(
    'type' => 'Zend\Mvc\Router\Http\Literal',
    'options' => array(
        'route'    => '/otheraction',
        'defaults' => array(
            'controller' => 'Application\Controller\Index',
            'action'     => 'otheraction',
        ),
    ),
), 
```

# android - 从 AlertDialog 更改按钮文本

> ID：14091449
> 
> 赞同：0
> 
> 时间：2012-12-30T14:18:57.473
> 
> 标签：android, android-layout, dialog, alert, android-alertdialog

我是为 android 开发应用程序的新手，我想创建一个简单的 Conterter 应用程序，只是为了开始。在我看来，我有一个编辑文本和一个按钮。如果我单击该按钮，它将打开一个带有字符串列表的 AlertDialog。我不知道如何管理这个：当我单击 AlertView 中的一项时，我想将按钮的文本设置为选定的字符串并关闭 AlertDialog。有人能帮帮我吗 ？

```
public class VypocetDlzkyActivity extends Activity {

EditText HodnotaDlzka;
Button prevodDlzkaZtlacidlo;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_vypocet_dlzky);

}

public void zmenPrevodZ(View view){

    final String[] jednotkyDlzky = {"milimeter", "centimeter", "decimeter", "meter", "kilometer", "svetelny rok"};
    AlertDialog.Builder builder = new AlertDialog.Builder(VypocetDlzkyActivity.this);
    builder.setTitle("Vyberte jednotku");
    builder.setItems(jednotkyDlzky,null);
    new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int item) {
        String value = jednotkyDlzky[item].toString();
        prevodDlzkaZtlacidlo.setText(value);
                 dialog.cancel();
    }
    };

    final AlertDialog alert = builder.create();
    alert.show();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T14:25:54.323

您需要在`onCreate()`方法中设置这 2 个成员变量的值，如下所示：

```
HodnotaDlzka = (EditText)findViewById(R.id.xxxx);
prevodDlzkaZtlacidlo = (Button)findViewById(R.id.yyyy); 
```

`xxxx`是您`EditText`在 activity_vypocet_dlzky.xml中提供`yyyy`的 ID，并且是您提供给`Button`.

此外，单击 中的按钮后`AlertDialog`，对话框会自动关闭，因此您无需调用`dialog.cancel()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:48:23.653

问题是您没有添加任何 onClick listnerz。单击按钮时，您需要调用所需的方法。

```
public class MainActivity extends Activity implements OnClickListener {

EditText HodnotaDlzka;
Button prevodDlzkaZtlacidlo;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    HodnotaDlzka = (EditText) findViewById(R.id.e1);
    prevodDlzkaZtlacidlo = (Button) findViewById(R.id.b1);
    prevodDlzkaZtlacidlo.setOnClickListener(this);

}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
     final String[] jednotkyDlzky = {"milimeter", "centimeter", "decimeter", "meter", "kilometer", "svetelny rok"};
        AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);
        builder.setTitle("Vyberte jednotku");
        builder.setItems(jednotkyDlzky,new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int item) {
            String value = jednotkyDlzky[item].toString();
            prevodDlzkaZtlacidlo.setText(value);
        }
        });
    enter code here
        final AlertDialog alert = builder.create();
        alert.show();
}
} 
```

# c++ - 矢量如何 处理引用和迭代器？

> ID：14091450
> 
> 赞同：5
> 
> 时间：2012-12-30T14:19:07.797
> 
> 标签：c++, boolean, stdvector, proxy-classes, bitvector

我们可能都知道 C++ 98`vector<bool>`专门化将布尔值存储为位而不是布尔变量。`vector<bool>`的元素不可寻址，因为 C++ 没有指针和对位的引用，是否有解决方法，任何明显的陷阱（*我似乎没有注意到*），甚至尝试这样做是否可行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T14:21:27.647

`vector<bool>`的元素可以像任何其他元素一样寻址，`vector`例如使用`operator []`. 但是，由于内存压缩，操作会变慢。

也许更快的实现将使用您自己的内存实现并使用二进制移位来处理特定的布尔值。

另一种选择是在适当的地方使用简单的数组。请记住，您可以使用`new`运算符动态分配它。

**编辑**替代实现可能会在[这个线程](https://stackoverflow.com/questions/670308/alternative-to-vectorbool)中找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T15:37:52.863

而不是对位的引用/指针，而是`vector<bool>`使用带有重载运算符的包装器对象，这些运算符的行为（在大多数情况下）类似于布尔值的引用/指针。

# java - Apache Velocity - 根据总 Foreach 计数解析 VM 文件

> ID：14091451
> 
> 赞同：0
> 
> 时间：2012-12-30T14:19:15.217
> 
> 标签：java, apache, velocity

我正在尝试创建一个 Apache Velocity 脚本，它分别基于 1 或 2 的 foreach 计数来执行 VM 文件。

这是我正在使用的代码：

```
#set ($i = 0)
#foreach ($report in $reportInfo.reportList)
#set ($i = $i + 1)
#if ($i == 2)
#parse ("/MyReport/Report1.vm")
#end
#end

#set ($j = 0)
#foreach ($Report in $reportInfo.reportlist)
#set ($j = $j + 1)
#if ($j == 1 )
#parse ("/MyReport/Report2.vm")
#end
#end 
```

最终发生的情况是，如果 foreach 总数为 2，它还将运行 Report2.vm，因为计数为“1 2”。无论如何，我可以编写代码来查看变量计数的总和、最大值或总数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T14:51:38.730

听起来你只是想根据列表的大小执行一些逻辑。

```
#if ($reportInfo.reportList.size() == 1)
#parse ("/MyReport/Report2.vm")
#elseif ($reportInfo.reportList.size() == 2)
#parse ("/MyReport/Report1.vm")
#end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T14:29:04.230

嗨，我了解您想计算“for-each”循环执行了多少次，apache 速度模板引擎提供了一种获取循环计数器的简单方法，以便您可以执行以下操作：

```
<table>
#foreach( $customer in $customerList )
<tr><td>$foreach.count</td><td>$customer.Name</td></tr>
#end
</table>

Velocity also has other convenience counters like:
1\. $foreach.index instead of $foreach.count
2\. $foreach.hasNext
3\. $foreach.first and $foreach.last are also provided to compliment $foreach.hasNext 
```

有关更多示例，请参阅 Apache Velocity[用户指南](http://velocity.apache.org/engine/releases/velocity-1.7/user-guide.html#Loops)。

# html - box-shadow 不是渐变，如何在我的按钮上获得渐变阴影？

> ID：14091454
> 
> 赞同：-1
> 
> 时间：2012-12-30T14:19:45.783
> 
> 标签：html, gradient, css

我刚刚发现 CSS`box-shadow`不是渐变。

我想在显示为按钮的链接元素下有一个渐变，它从一种 RGB 颜色变为另一种 RGB 颜色，这看起来像一个投影。顶部的 RGB 颜色是`#333`和按钮的 RGB 颜色`#fff`，它应该有 4 个像素的高度。（例如，我没有从按钮图像中测量这个）。

所以我有一个

```
<a href="#" class="mybutton">Button</a>. 
```

我想要直接在它下面的阴影。

我试图重现的带有渐变阴影的按钮是这个：

![在此处输入图像描述](../Images/47bf220ea55177ebd14700c197628026.png)

是否有任何等效的方法可以用 box-shadow 做到这一点，或者有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T20:27:08.140

也许类似于以下内容（尽管您将不得不使用您喜欢的颜色等）：

```
<a href="#" class="btn">Button</a>​​​​​​​​​​​

.btn {
    border: solid 1px rgb(139,137,125); 
    border-color: rgb(182,179,161) rgb(167,164,146) rgb(139,137,125) rgb(167,164,146); 
    background: #C9C6B4; /* old browsers */ 
    background: -moz-linear-gradient(top, #D8D5C1 3%, #C9C6B4 4%, #A7A492 100%); /* firefox */ 
    background: -webkit-gradient(linear, left top, left bottom, color-stop(3%, #D8D5C1), color-stop(4%, #C9C6B4), color-stop(100%, #A7A492)); /* webkit */ /*    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#D8D5C1', endColorstr='#A7A492',GradientType=0 );*/ 
    -moz-text-shadow: rgba(0,0,0,0.2) 0px -1px 0px; 
    -webkit-text-shadow: rgba(0,0,0,0.2) 0px -1px 0px; 
    text-shadow: rgba(0,0,0,0.2) 0px -1px 0px;
    -moz-box-shadow: rgba(0,0,0,0.3) 0px 2px 3px; 
    -webkit-box-shadow: rgba(0,0,0,0.3) 0px 2px 3px; 
    box-shadow: rgba(0,0,0,0.3) 0px 2px 3px;
    cursor: pointer; 
    font: bold 12px/1em Arial, Helvetica, sans-serif; 
    color: rgb(255,255,255)!important; 
    text-align: center; 
    white-space: nowrap; 
    float: right; 
    margin: 0 0 8px 5px; 
    padding: 0.5em 1em; 
}

.btn:hover {
    border-color: rgb(211,106,13) rgb(185,72,0) rgb(166,53,0) rgb(185,72,0); 
    -moz-box-shadow: rgba(0,0,0,0.5) 0px 1px 2px; 
    -webkit-box-shadow: rgba(0,0,0,0.5) 0px 1px 2px; 
    -moz-text-shadow: rgba(255,255,255,0.9) 0px 0px 10px; 
    -webkit-text-shadow: rgba(255,255,255,0.9) 0px 0px 10px; 
    text-shadow: rgba(255,255,255,0.9) 0px 0px 10px; 
    box-shadow: rgba(0,0,0,0.5) 0px 1px 2px; 
    background: #DD6C00; /* old browsers */ 
    background: -moz-linear-gradient(top, #F69C11 3%, #DD6C00 4%, #BB4A00 100%);  /* firefox */ 
    background: -webkit-gradient(linear, left top, left bottom, color-stop(3%, #F69C11), color-stop(4%, #DD6C00), color-stop(100%, #BB4A00));
} 
```

缺口

# cuda - cublasDgemm 返回 CUBLAS_STATUS_EXECUTION_FAILED

> ID：14091457
> 
> 赞同：2
> 
> 时间：2012-12-30T14:19:57.627
> 
> 标签：cuda, cublas

我正在使用 cublasDgemm 将两个矩阵相乘。

我编写了一个使用 cublasDgemm 并返回指向输出的指针的方法。

它似乎在我的单元测试中运行良好，但在我的应用程序代码中失败（返回代码 CUBLAS_STATUS_EXECUTION_FAILED）。

我现在检查了很多次代码，一切似乎都很好..有没有更好的错误解释？

更新：似乎每个第二个 cublasDgemm 调用都有效。第一个我得到这个错误，第二个我成功了..有什么想法吗？

更新2：这是我的电话

```
 const double alpha = 1.0;

    const double beta = 0;

cublasStatus_t ret = cublasDgemm(RmCudaMatrix::handle_, CUBLAS_OP_N, CUBLAS_OP_N, 
    Rows(), b.Cols(), Cols(), &alpha,
    device_matrix_, Rows(), b.device_matrix_, b.Rows(), &beta,
    output->device_matrix_, output->Rows()); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T19:14:53.153

CUBLAS 函数可以异步运行，因此，当 CUBLAS 调用返回`cublasStatus_t`other that`CUBLAS_STATUS_SUCCESS`时，错误可能在先前的调用中。要确定是否是这种情况，请在每次使用 CUBLAS 调用后检查 CUDA 错误状态`cudaGetLastError()`。

# heroku - 知道如何配置 log4php 以与 heroku 日志集成吗？

> ID：14091458
> 
> 赞同：1
> 
> 时间：2012-12-30T14:19:58.287
> 
> 标签：heroku, log4php

我正在尝试在我的 php 应用程序中使用 log4php。与 log4j 一样，它可以将日志写入控制台或日志文件。有点困惑如何将其与 heroku 日志记录接口。理想情况下，我希望能够通过从工具带运行 heroku -logs 来查看日志语句，但似乎无法弄清楚如何配置 log4php 来完成此操作。

这是我设置为写入控制台的 log_config.xml

```
<?xml version="1.0"?>
<log4php:configuration xmlns:log4php="http://logging.apache.org/log4php/">
 <appender name="default" class="LoggerAppenderConsole">
  <layout class="LoggerLayoutPattern">
   <param name="ConversionPattern" value="%d{Y-m-d H:i:s} [%p] %c: %m (at %F line %L)%n" />
  </layout>
 </appender>    
 <appender name="fileLogger" class="LoggerAppenderFile">
  <param name="file" value="c:/_logs/php_error.log" />
  <layout class="LoggerLayoutPattern">
   <param name="ConversionPattern" value="%d{Y-m-d H:i:s} [%p] %c: %m (at %F line %L)%n" />
  </layout>
 </appender>
 <root>
  <level value="DEBUG" />
  <appender_ref ref="default" />
 </root>
 <logger name="myLogger" additivity="true">
  <level value="ALL" />
 </logger>
</log4php:configuration> 
```

但是当我通过heroku工具带访问日志时，我看到的只是一个看起来像apache访问日志的内容，并且没有我的应用程序正在生成的调试语句

```
←[33m2012-12-30T13:45:57+00:00 heroku[router]:←[0m at=info method=GET path=/givefly/src/actions/get_thumbnails.php?searchTerm=fire&isUrl=false host=still-castle-2245.herokuapp.com fwd=121.7.1.191 dyno=web.1 queue=0 wait=0ms connect=2ms service=10117ms status=200 bytes=29
←[33m2012-12-30T13:46:25+00:00 heroku[router]:←[0m at=info method=GET path=/givefly/src/actions/get_page_title.php?url=www.pepsi.com host=still-castle-2245.herokuapp.com fwd=121.7.1.191 dyno=web.1 queue=0 wait=0ms connect=1ms service=401ms status=200 bytes=48
←[33m2012-12-30T13:46:25+00:00 heroku[router]:←[0m at=info method=GET path=/givefly/src/actions/get_thumbnails.php?searchTerm=www.pepsi.com&isUrl=true host=still-castle-2245.herokuapp.com fwd=121.7.1.191 dyno=web.1 queue=0 wait=0ms connect=1ms service=237ms status=500 bytes=0
←[33m2012-12-30T13:44:54+00:00 heroku[router]:←[0m at=info method=GET path=/givefly/src/static/homepage.css host=still-castle-2245.herokuapp.com fwd=121.7.1.191 dyno=web.1 queue=0 wait=0ms connect=1ms service=3ms status=200 bytes=2457
←[33m2012-12-30T13:44:58+00:00 heroku[router]:←[0m at=info method=GET path=/givefly/lib/jquery/noty/themes/default.js host=still-castle-2245.herokuapp.com fwd=121.7.1.191 dyno=web.1 queue=0 wait=0ms connect=1ms service=13ms status=200 bytes=9391
←[33m2012-12-30T13:44:58+00:00 heroku[router]:←[0m at=info method=GET path=/givefly/lib/jquery/jquery-impromptu.js host=still-castle-2245.herokuapp.com fwd=121.7.1.191 dyno=web.1 queue=0 wait=0ms connect=0ms service=3ms status=200 bytes=14772
←[35m2012-12-30T13:58:02+00:00 heroku[api]:←[0m Starting process with command `bash` by ashnil.dixit@gmail.com
←[31m2012-12-30T13:58:04+00:00 heroku[run.2213]:←[0m Starting process with command `bash`
←[31m2012-12-30T13:58:04+00:00 heroku[run.2213]:←[0m Awaiting client
←[31m2012-12-30T13:58:04+00:00 heroku[run.2213]:←[0m State changed from starting to up
←[31m2012-12-30T14:01:07+00:00 heroku[run.2213]:←[0m Client connection closed. Sending SIGHUP to all processes
←[31m2012-12-30T14:01:08+00:00 heroku[run.2213]:←[0m Process exited with status 129
←[31m2012-12-30T14:01:07+00:00 heroku[run.2213]:←[0m Client connection closed. Sending SIGHUP to all processes
←[31m2012-12-30T14:01:21+00:00 heroku[run.3834]:←[0m Awaiting client
←[31m2012-12-30T14:01:21+00:00 heroku[run.3834]:←[0m Starting process with command `bash`
←[31m2012-12-30T14:01:22+00:00 heroku[run.3834]:←[0m State changed from starting to up
←[35m2012-12-30T14:01:17+00:00 heroku[api]:←[0m Starting process with command `bash` by ashnil.dixit@gmail.com
←[31m2012-12-30T14:01:08+00:00 heroku[run.2213]:←[0m State changed from up to complete 
```

# excel - 将日期和时间加入 Excel / VBA 中的单个单元格

> ID：14091470
> 
> 赞同：3
> 
> 时间：2012-12-30T14:21:54.777
> 
> 标签：excel, vba

我必须向两个不同的客户报告基本相同的检查信息，他们都向我提供了他们自己喜欢的格式的 Excel 电子表格，并受密码保护。我已将这两张表放入我自己的工作簿中，并设法从我自己的数据中获取了两张表上的“几乎”所有数据。我被卡住的地方是时间日志。

客户端“A”在单个列中包含每个时间和日期，格式为“12.29.12 14:30”。客户端“B”有两列，第一列中的日期为“12/29/12”，第二列中的时间为“1430”。

我试图避免必须输入所有相同的日期和时间两次——可能是几十行——既省力又避免错误。我真正需要做的是将客户'B'报告中的日期和时间连接起来并将其放入客户'A'，或者将日期和时间拆分为'A'，以便我可以将其放入'B'。我尝试了几种方法，但最终得到错误代码或无意义的数字。

谁能指出我正确的方向？

谢谢，理查德

没关系...我尝试的下一件事起作用了:-)

对于其他阅读本文的人来说，诀窍不是连接日期和时间值，而是将它们加在一起。

理查德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:21:21.643

正如您后来在您自己的问题中指出的那样，为了在 Excel 中操作日期/时间，您应该添加而不是连接。

原因是 Excel 将所有日期/时间存储为一个数字，表示自 1900 年 1 月 1 日以来的天数*。[此数字存储为 8 字节双精度数。](http://msdn.microsoft.com/en-us/library/office/bb687869%28v=office.14%29.aspx)

使用 Excel 数字格式显示您想要的日期/时间格式。

如果您在工作表中发现某些单元格的日期实际上存储为文本，请使用[DATEVALUE 函数。](http://office.microsoft.com/en-us/excel-help/datevalue-HP005209044.aspx)

*默认情况下，Excel 2010 for Windows 使用自 1900 年以来的天数。为了与其他版本兼容，可以选择使用自 1904 年以来的天数。

# .net - 如果只满足一个条件，MultiDataTrigger 就会触发

> ID：14091473
> 
> 赞同：0
> 
> 时间：2012-12-30T14:22:05.413
> 
> 标签：.net, wpf, mvvm, datatrigger, multidatatrigger

在我的 UserControl 中，我有三个 ComboBoxes，必须在启用保存按钮之前选择它们。我定义了一个 MultiDataTrigger 绑定到我的 ViewModel 属性，这些属性最初设置为 null。因此，当控件加载时，按钮按预期被禁用，但只要选择了其中一个组合框，按钮就会被启用。据我了解，必须满足 MultiDataTrigger 的所有条件才能触发它？

这是我的按钮样式：

```
 <Style x:Key="saveButton" TargetType="{x:Type Button}">
        <Style.Triggers>
            <MultiDataTrigger>
                <MultiDataTrigger.Conditions>
                    <Condition Binding="{Binding Path=CurrentSpeech.Room, Converter={StaticResource nullToBoolConverter}}" Value="true" />
                    <Condition Binding="{Binding Path=CurrentSpeech.Speaker, Converter={StaticResource nullToBoolConverter}}" Value="true" />
                    <Condition Binding="{Binding Path=CurrentSpeech.Track, Converter={StaticResource nullToBoolConverter}}" Value="true" />
                </MultiDataTrigger.Conditions>
                <Setter Property="Button.IsEnabled" Value="False" />
            </MultiDataTrigger>
        </Style.Triggers>
    </Style> 
```

我的组合框：

```
 <ComboBox Margin="3" Grid.Row="4" Grid.Column="1" ItemsSource="{Binding Path=Rooms, Mode=OneWay}"
                      SelectedItem="{Binding Path=CurrentSpeech.Room, Mode=TwoWay}" DisplayMemberPath="Name"/>
            <ComboBox Margin="3" Grid.Row="5" Grid.Column="1" ItemsSource="{Binding Path=Tracks, Mode=OneWay}"
                      SelectedItem="{Binding Path=CurrentSpeech.Track, Mode=TwoWay}" DisplayMemberPath="Title"/>
            <ComboBox Margin="3" Grid.Row="6" Grid.Column="1" ItemsSource="{Binding Path=Speakers, Mode=OneWay}" 
                      SelectedItem="{Binding Path=CurrentSpeech.Speaker, Mode=TwoWay}" DisplayMemberPath="Name"/> 
```

我的按钮：

```
 <Button Style="{StaticResource saveButton}" Margin="3" Grid.Row="9" Grid.Column="1" Command="{Binding Path=CurrentSpeech.SaveCommand}" Width="150" HorizontalAlignment="Right" Content="Speichern"/> 
```

还有我的转换器：

```
 [ValueConversion(typeof(object), typeof(bool))]
public class NullToBoolConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        bool result = value == null ? true : false;
        if (parameter != null)
            return !result;
        return result;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return value;
    }
} 
```

谢谢，帕克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T22:33:31.073

触发器似乎工作正常，只是你的逻辑不正确。

`Room`正如它现在工作的那样，当,`Speaker`和`Track`属性都为空时，触发器将被激活。当程序启动时会发生这种情况，因为在任何一个`ComboBoxes`.

因此满足所有 3 个条件，触发器禁用`Button`.

然后，当您在`Rooms`组合框中选择某些内容时，触发器中的第一个条件不再满足，因为该绑定的`ValueConverter`now 返回`false`，所以触发器被禁用，这导致按钮被启用。

因此，要解决此问题，您应该禁用`Button`最初，并且仅在触发器中将其设置为启用，当转换器为所有绑定返回 false 时（当 3 个属性不为空时）。

```
<Style x:Key="saveButton" TargetType="{x:Type Button}">
    <Setter Property="IsEnabled" Value="False"/>
    <Style.Triggers>
        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                <Condition Binding="{Binding Path=Room, Converter={StaticResource nullToBoolConverter}}" Value="false" />
                <Condition Binding="{Binding Path=Speaker, Converter={StaticResource nullToBoolConverter}}" Value="false" />
                <Condition Binding="{Binding Path=Track, Converter={StaticResource nullToBoolConverter}}" Value="false" />
            </MultiDataTrigger.Conditions>
            <Setter Property="Button.IsEnabled" Value="True" />
        </MultiDataTrigger>
    </Style.Triggers>
</Style> 
```

# c# - C#中<>的意义

> ID：14091474
> 
> 赞同：32
> 
> 时间：2012-12-30T14:22:07.047
> 
> 标签：c#, .net, class

我正在学习 C# 并抓住了一段我看不懂的代码。我希望你能为我澄清它。

```
CreateCustomerTask.<>c__DisplayClass0 cDisplayClass0 =
         new CreateCustomerTask.<>c__DisplayClass0(); 
```

有什么`<>`意义？为什么`.`前面有一个（点）？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-30T14:29:19.967

您正在查看一些反编译的代码 - 特别是由编译器生成的代码。

编译器使用`<>`（这是一个实现细节），因为虽然 CLR 标识符以此类字符开头是有效的，但它在 C# 中无效 - 因此可以保证该名称不会与 C# 代码中的任何名称冲突。

*编译器生成此代码的原因*各不相同 - 它可能是 lambda、迭代器或异步块的实现，也可能是其他一些原因。

* * *

并且，希望您的问题的另一部分也得到解答-`.`出于通常的原因，它前面有一个-分隔命名空间部分，或者在这种情况下更有可能将嵌套类的名称与封闭类的名称分开班级。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-12-30T16:40:51.163

正如其他人所指出的那样，您所看到的是编译器生成的故意*不*合法的 C# 名称，因此没有人会意外（或故意！）导致名称冲突。

生成此名称的原因是：

```
class C
{
  void M()
  {
    int x = 1;
    Func<int, int> f = y=>x+y;
  }  
} 
```

由编译器生成，就像您编写的一样：

```
class C
{
  private class DisplayClass
  {
    public int x;
    public int AnonymousMethod(int y)
    { 
      return this.x + y;
    }
  }
  void M()
  {
    C.DisplayClass d = new C.DisplayClass();
    d.x = 1;
    Func<int, int> f = d.AnonymousMethod;
  }
} 
```

当然，正如您所发现的那样，所有名称都被故意弄乱了。

闭包类被称为“DisplayClass”的原因有点不幸：这是调试器团队用来描述在调试器中显示时具有特殊行为的类的行话。显然，当您调试代码时，我们不想将“x”显示为不可能命名的类的字段；相反，您希望它看起来像任何其他局部变量。调试器中有专门的设备来处理这种显示类。它可能应该被称为“ClosureClass”，以便更容易阅读反汇编。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-12-30T14:30:38.767

使用Eric Lippert 的[这个答案](https://stackoverflow.com/questions/2508828/where-to-learn-about-vs-debugger-magic-names)来解码名称，例如`<>c__DisplayClass0`. 根据答案中提供的表格，您正在查看一个匿名方法闭包类。不要依赖这在未来总是正确的，它是一个随时可能更改的实现细节。

# qt - 如何以编程方式将 UI 添加到基于 Qtvtkwidget 的小部件？

> ID：14091477
> 
> 赞同：0
> 
> 时间：2012-12-30T14:22:14.253
> 
> 标签：qt, user-interface, widget

我正在尝试基于此[示例](http://dev.pointclouds.org/issues/342)编写一个程序，即基于 的小部件`QVTKWidget`，以便我可以使用`PCL Visualizer`小部件内部，没有 UI，对我来说，第一步是添加一个简单的 UI 一个带有一些简单选项的菜单栏：关闭，保存等

不幸的是，我使用 QT 界面的经验是使用 Designer，虽然我已经看到了`ui`文件的外观，但我没有看到有关如何将它们添加到小部件的教程，也没有看到将它们添加到主窗口的教程。

您是否知道一般将 .ui 文件添加到 a`QVTKWidget`或小部件的简单方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T14:34:32.703

最简单的方法是在设计器中创建一个应用程序或小部件，然后通过[文档](http://qt-project.org/doc/qt-4.8/designer-using-custom-widgets.html)中描述的设计器界面`QWidget`向内容中添加一个纯文本，`QWidget`您可以将其提升为 type 。然后您可以将所有其他 ui 元素添加到应用程序并与`QVTKWidget``QVTKWidget`

# c# - 检查浏览器是否手动关闭

> ID：14091478
> 
> 赞同：3
> 
> 时间：2012-12-30T14:22:22.083
> 
> 标签：c#, internet-explorer, browser, instance, watin

在 Visual Studio 2010 中，使用 c#；

我打开浏览器：

```
private IE browser;

private void Set_Browser()
{
    string splashUrl = "google.com";
    browser= new IE(splashUrl);
} 
```

如果用户（人）不小心关闭了浏览器，那么我的应用程序将无法再工作。

问题：

1.  那么如何检查用户是否手动关闭了浏览器？
2.  我能否通过将浏览器作为控件添加到我的应用程序 GUI 来让用户关闭浏览器？*[使用 Windows 窗体]*
3.  -> 我该怎么做？

与这篇文章相关的最后一个问题[如何将 watin 与 WebBrowser 控件一起使用？](https://stackoverflow.com/questions/2755747/how-to-use-watin-with-webbrowser-control)（2岁，但也没有像样的答案）

编辑：给出 URL 中的解决方案似乎有效。问题是，如果我尝试将 WebBrowser.ActivateX.. 作为对象发送给其他类。然后我的 browser = new IE(..) 返回 null。当我在表单类中实例化它时它确实有效。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T14:28:02.950

您可以每隔 x 秒搜索一次 internet explorer 的进程，并使用以下代码查看浏览器是否已在运行：

```
 bool isRunning = false;
    foreach (Process clsProcess in Process.GetProcesses()) {
            if (clsProcess.ProcessName.Contains("iexplore"))
            {
                    isRunning = true;
                    break;
            }
    } 
```

你可以使用[这篇文章](http://www.dreamincode.net/code/snippet1541.htm)

[或者您可以使用本文](http://www.codeproject.com/Articles/60179/Web-Browser-in-C)将浏览器控件添加到您的应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T15:22:34.487

您可以做的一件事是隐藏浏览器以避免用户关闭它。请参阅这个 SO question。

[运行 WatiN 时隐藏 Internet Explorer](https://stackoverflow.com/questions/1555331/hiding-internet-explorer-when-watin-is-run?rq=1)

# gwt - GWT 应用程序如何部署在 tomcat 或 jetty 中

> ID：14091480
> 
> 赞同：1
> 
> 时间：2012-12-30T14:22:34.423
> 
> 标签：gwt

我是 GWT 框架的新手 如何在 tomcat 或 jetty 中部署基于 GWT 的应用程序，或者是否有任何其他方式来托管或分发基于 GWT 的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T15:16:57.783

您需要编译应用程序并将其打包为 WAR（Web 应用程序存档）（与任何其他 Web 应用程序一样），然后将其部署到像 tomcat 这样的应用程序服务器。

`Ant`目标可能如下所示：

```
 <target name="buildwar">
        <war basedir="war" destfile="Project.war" webxml="war/WEB-INF/web.xml">
        <exclude name="WEB-INF/**" />
        <webinf dir="war/WEB-INF/">
            <include name="**/gwt-servlet.jar" />
            <include name="**/classes/**" />
        </webinf>
        </war>
    </target> 
```

对于`maven`，您可以使用[Maven GWT 插件](http://mojo.codehaus.org/gwt-maven-plugin/user-guide/war-folder.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T02:30:10.630

## ***部署到 Java EE Web 服务器***

您可以按照 gwt 团队 code.google.com/p/google-web-toolkit/source/browse/#svn%2Ftrunk%2Fsamples 提供的示例进行操作

这些示例用于设置战争项目 1) ant build example 2) maven build example 。

一旦创建了一个war文件，它就可以部署到jetty、tomcat、resin、websphere等中

## ***部署到云端***

除了部署到 Jetty/Tomcat 之外，您还可以部署到**Google APP Engine Server**。参考 GAE GWT 指南 - [https://developers.google.com/web-toolkit/doc/latest/tutorial/appengine](https://developers.google.com/web-toolkit/doc/latest/tutorial/appengine)。

# android - Android HTTP POST 连接到带有响应的文件

> ID：14091484
> 
> 赞同：0
> 
> 时间：2012-12-30T14:23:12.100
> 
> 标签：android, http-get, apache-httpclient-4.x

如何将数据发送到下面的这个 PHP 文件？我可以建立连接并发送数据，但无法收到响应。我需要发送 3 个参数，“op”、用户名和密码。

```
switch ($_POST["op"]) {

    // User Authentication.
    case 1:
        $UName = $_POST["UName"];
        $UPass = $_POST["UPass"];
        $UPass = md5($UPass);

        //....Some code

    // New user registration process.
    case 2:
        $UName = $_POST["UName"];
        $UPass = $_POST["UPass"];
        $UEmail = $_POST["UEmail"];
        $UNick = $_POST["UNick"];
        $UPass = md5($UPass);

         //....Some code
        } 
```

到目前为止我的代码：

```
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://SomeUrl/login.php");

        try {

            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
            nameValuePairs.add(new BasicNameValuePair("1", "dan"));
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            response = httpclient.execute(httppost);
            String responseBody = EntityUtils.toString(response.getEntity());
            Log.d(TAG, ""+responseBody);

        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
        } catch (IOException e) {
            // TODO Auto-generated catch block
        } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T14:29:12.870

Android HTTP POST 应该如下所示：

```
 HttpParams httpParams=new BasicHttpParams();
     HttpConnectionParams.setConnectionTimeout(httpParams, 10000);
     HttpConnectionParams.setSoTimeout(httpParams, 10000);

     // Data to send
     ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
     nameValuePairs.add(new BasicNameValuePair("UName", "dan"));
     nameValuePairs.add(new BasicNameValuePair("UPass", "password"));
     nameValuePairs.add(new BasicNameValuePair("op", "1"));

     //http post
     try{
     HttpClient httpclient = new DefaultHttpClient();
     HttpPost httppost = new HttpPost("http://SomeUrl/login.php");
     httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs, "UTF-8"));
     HttpResponse response = httpclient.execute(httppost);
     HttpEntity entity = response.getEntity();
     is = entity.getContent();

     }catch(Exception e){

     } 
```

在您的 PHP 代码中，我强烈建议使用 mysql_real_escape_string($_POST['U​​Name']) 否则很容易通过 SQL 注入进行攻击。我还建议使用 SSL 连接 (HTTPS) 或仅发送散列密码 (MD5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T14:38:16.653

查看您的 PHP 代码，您至少需要指定一个`op`参数。然后根据您尝试执行的操作，确保您还指定了其他需要的参数。对于用户身份验证（op = 1）：

```
nameValuePairs.add(new BasicNameValuePair("op", "1"));
nameValuePairs.add(new BasicNameValuePair("UName", "dan"));
nameValuePairs.add(new BasicNameValuePair("Pass", "somepass")); 
```

附带说明，如果您使用 SSL 来处理敏感的用户信息，您应该使用 SSL 保护 PHP 服务。

# android - 如何在我们的应用程序 android+phonegap+JQM 中打开 pdf 文件？

> ID：14091491
> 
> 赞同：3
> 
> 时间：2012-12-30T14:24:19.623
> 
> 标签：android, cordova, jquery-mobile, jquery-plugins

我正在使用 Jquery Mobile+PhoneGap+Android 开发一个网络+跨平台应用程序。在网络应用程序中，我可以使用 iframe 在我的应用程序页面中打开 pdf 文件链接。但是，在 Phonegap 生成的 Android 构建中，iframe 无法呈现 pdf 内容，它显示 iframe 区域为空。如何在 android webview 中显示我在运行时知道其 src 的 pdf 文件/内容。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T23:23:43.037

我刚刚发布了我的插件，它可以打开几乎任何类型的文件，这些文件本地存储在 Android 设备上。

请看一下：[https ://github.com/markeeftb/FileOpener](https://github.com/markeeftb/FileOpener)

插件打开处理文档预览的外部应用程序。

# xml - xslt：如何忽略不匹配的应用模板元素？

> ID：14091495
> 
> 赞同：5
> 
> 时间：2012-12-30T14:24:56.187
> 
> 标签：xml, xslt

这是我的 XSL 样式表：

```
<xsl:stylesheet version="2.0" 
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:pp="passcodeProfile">

    <xsl:template match="/">
               <xsl:apply-templates select="elements"/>
    </xsl:template>

    <xsl:template match="element1">
       output1
    </xsl:template> 

    <xsl:template match="element2">
       output2
    </xsl:template> 

</xsl:stylesheet> 
```

这是输入 XML：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<elements>
    <element1>value1</element1>
    <element2>value2</element2>
    <element3>value3</element3>
    <element4>value4</element4>
</elements> 
```

当前电子表格输出不匹配元素的值（输出 element1 element2 value3 value 4）。如何忽略不是 element1 和 element2 的元素（输出 element1 element2）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T14:38:21.180

您的样式表也会输出原始文本节点。您可以通过匹配它们并且对它们不做任何事情来抑制它们，例如添加`<xsl:template match="text()"/>`

# javascript - 上传图片时控制图片宽度和高度

> ID：14091505
> 
> 赞同：2
> 
> 时间：2012-12-30T14:27:08.767
> 
> 标签：javascript, jquery, html, plupload

直指点点。当用户使用 plupload 上传图像时，我想设置图像的宽度和高度限制。

Letsay：如果宽度：1000px 高度：1000px 否则您必须上传至少宽度：1000px 和高度：1000px 的图像

```
// $(".form").validator();
$(function() {
    if($("#uploader").length > 0) {
        var uploader = new plupload.Uploader({
            runtimes : 'html5,flash,silverlight',
            browse_button : 'pickfile',
            container : 'uploader',
            max_file_size : '10mb',
            url : 'design.php?do=upload&ajax=1',
            multiple_queues: false,
            file_data_name: 'design',
            flash_swf_url : www + '/js/plupload.flash.swf',
            silverlight_xap_url : www + '/js/plupload.silverlight.xap',
            filters : [
                {title : "Image files", extensions : "jpg,gif,png,jpeg,bmp"}
            ]

        });

        $('#uploadfiles').click(function(e) {
            if($("#uploader select[name=category]").val() == "") {
                $("#uploader select[name=category]").next('.error-required').show();
                return false;
            }

            uploader.start();
            e.preventDefault();
        });

        uploader.init(); 
```

那么，这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-09-23T08:22:11.800

您可以轻松地为 plupload 编写过滤器。

这是最小所需宽度的过滤器。将以下代码添加到您的脚本中。（只是复制）

```
plupload.addFileFilter('min_width', function(maxwidth, file, cb) {
    var self = this, img = new o.Image();

    function finalize(result) {
        // cleanup
        img.destroy();
        img = null;

       // if rule has been violated in one way or another, trigger an error
        if (!result) {
            self.trigger('Error', {
                code : plupload.IMAGE_DIMENSIONS_ERROR,
                message : "Image width should be more than " + maxwidth  + " pixels.",
                file : file
            });
     }
        cb(result);
    }
    img.onload = function() {
        // check if resolution cap is not exceeded
        finalize(img.width >= maxwidth);
    };
    img.onerror = function() {
        finalize(false);
    };
    img.load(file.getSource());
}); 
```

并将此过滤器添加到您的上传脚本中。

```
filters : {
            min_width: 700,
        }, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T15:43:59.090

Plupload 本身不支持此功能（[尽管已被请求](https://github.com/moxiecode/plupload/issues/142)）。这可能有几个原因，首先是因为您无法在 IE 中上传之前获取图像尺寸（[您可以在其他一些浏览器中](https://stackoverflow.com/a/13602882/969807)），其次，这适用于使用 HTML4/5 的某些浏览器方法，我不确定 Flash/Silverlight 等方法是否也能够可靠地确定尺寸。

如果您对有限的浏览器感到满意，只有 HTML4/5 方法，您应该挂钩[“FilesAdded”事件](http://www.plupload.com/plupload/docs/api/index.html#class_plupload.Uploader.html-FilesAdded)，例如

```
uploader.bind('FilesAdded', function(up, files) {
  //Get src of each file, create image, remove from file list if too big
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T20:45:50.817

我最近想做同样的事情，并且能够按照 Thom 建议的方式实现它。不过，他的局限性是正确的；如果你想添加它，它只适用于现代浏览器，而不适用于 flash 或 silverlight 运行时。**这不是一个大问题，因为我的非 html5 用户在上传后**只会收到错误，而不是之前。

我初始化了一个总图像计数变量来跟踪放置在页面上的图像。也可以存储我们在阅读完所有照片后要删除的照片。

```
var total_image_count = 0;
var files_to_remove = []; 
```

然后我用 FileReader() 读取待处理的文件，将它们放在页面上，并获取它们的宽度

```
init:{
        FilesAdded: function(up, files) {
           if (uploader.runtime == "html5"){
              files = jQuery("#"+uploader.id+"_html5")[0].files
              console.log(files);
              for (i in files){

                 //create image tag for the file we are uploading
                 jQuery("<img />").attr("id","image-"+total_image_count).appendTo("#upload-container");

                 reader_arr[total_image_count] = new FileReader();

                 //create listener to place the data in the newly created 
                 //image tag when FileReader fully loads image.
                 reader_arr[total_image_count].onload = function(total_image_count) {
                    return function(e){
                       var img = $("#image-"+total_image_count);
                       img.attr('src', e.target.result);
                       if ($(img)[0].naturalWidth < 1000){

                          files_to_remove.push(files[i]); //remove them after we finish reading in all the files
                          //This is where you would append an error to the DOM if you wanted.
                          console.log("Error. File must be at least 1000px");
                       }
                    }
                 }(total_image_count);

                 reader_arr[total_image_count].readAsDataURL(files[i]);

                 total_image_count++;
              }
              for (i in files_to_remove){
                 uploader.removeFile(files_to_remove[i]);
              }
           }
        }
     } 
```

附带说明一下，无论如何我都想显示图像缩略图，所以这种方法对我很有用。我还没有弄清楚如何在不先将其附加到 DOM 的情况下获取图像的宽度。

资料来源：

> 上传前缩略图： [https ://stackoverflow.com/a/4459419/686440](https://stackoverflow.com/a/4459419/686440)
> 
> 访问图像的自然宽度： [https ://stackoverflow.com/a/1093414/686440](https://stackoverflow.com/a/1093414/686440)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-06T09:29:41.117

要在不使用缩略图的情况下访问宽度和高度，您可以执行以下操作：

```
uploader.bind('FilesAdded', function(up, files) {
    files = jQuery("#"+uploader.id+"_html5").get(0).files;
    jQuery.each(files, function(i, file) {
        var reader = new FileReader();
        reader.onload = (function(e) { 
            var image = new Image();
            image.src = e.target.result;

                image.onload = function() {
                    // access image size here using this.width and this.height
                }
            };

        });

        reader.readAsDataURL(file);
    }
} 
```

# c++ - 是否可以将“删除”放在逗号表达式中

> ID：14091506
> 
> 赞同：0
> 
> 时间：2012-12-30T14:27:21.920
> 
> 标签：c++, c, comma

我想在指针引用的结构中返回一些材料，然后删除该结构。

在 Java 中，只需返回该值，垃圾回收系统就会自动删除该结构。

但是在 C++ 中，我能想象的方式不是很干净，使用临时变量来存储要返回的东西，删除指针然后返回存储的值。

我尝试使用逗号表达式作为“ `return ptr->value, delete ptr`”的另一种棘手的方法，但是有一个编译错误说“void value not ignored as it hould be”。

有没有可能更优雅地实现这一目标的方法？

非常感谢。

* * *

更新

非常感谢大家的建议。事实上，我的问题的最初动机是关于我想用于一些较短代码的逗号表达式。而且我发现讨论更多的是关于 C++ 中指针的使用。这也是另一个非常有趣的话题。

我已经使用 C 多年了，所以我对原始指针比较熟悉，而对智能指针的经验很少。在我的第一个想法中，我们需要指针有两个基本条件。一个是引用在堆中分配的一大块内存，另一个是动态分配，例如链接列表节点或树节点（例如，我最初的问题是在编写类似 BST 的结构时出现的）。

那么在 C++ 编程中，智能指针是两种情况的最佳选择吗？如果我们考虑效率，例如在一些低级库上工作，是否可以将原始指针完全封装在类中以减少内存泄漏风险？再次感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T14:31:32.357

当然。不要使用指针，如果必须，请使用智能指针 ( `std::shared_ptr`, `std::unique_ptr`)。

在您的情况下，它可能很简单

```
//...
return obj.value;  //no pointer needed
                   //automatic memory management 
```

或者

```
//...
return smartPtr->value;  //smart pointer automatically cleans up after itself 
```

您可能无法想象在 C++ 中这样做的*干净*方式，因为 C++ 是作为 C 来教授的，存在指针和内存管理问题。正确的 C++ 使用**RAII**并且不会因此受到影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T15:43:33.110

通常的解决方法是，第一，不使用指针，这样就没有什么要删除的了，第二，当有其他资源需要清理时，在析构函数中进行清理，在return语句*之后*会自动调用已将返回值复制到必须复制的位置。

如果可以返回，则可以复制，因此不应该动态分配，最值得注意的例外是涉及多态对象的地方；多态性需要指针或引用才能工作，并且大多数时候（尽管有例外），多态对象将被动态分配。在这种情况下，如果多态对象的实际生命周期对应于本地范围，则可以使用 `std::auto_ptr`（或者`std::unique_ptr`在不太可能的情况下，您可以依靠 C++11）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-30T14:30:40.293

不，在您的情况下，因为该函数应该返回一些值，但是逗号运算符的计算结果是最右边的操作数，在您的情况下是`delete`表达式，即`void`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-30T14:41:47.033

如果在函数内部动态分配指针。你可以做的是：

考虑你想返回一个`int`变量

```
int foo()
{
  MyStruct *obj;

  obj=new MyStruct;

  .....

  int x=obj->value;

  delete obj;

  return x;
} 
```

或者你也可以这样做：

```
int foo()
{
  MyStruct obj;

  obj=new MyStruct;

  .....

  return obj.value;
} 
```

这样你就不用担心内存泄漏了。这是最简单的方法。当然你可以使用智能指针。但在你的水平上，我会说坚持这种方法。

# android - 在列表视图中膨胀行布局时出错

> ID：14091509
> 
> 赞同：0
> 
> 时间：2012-12-30T14:27:45.677
> 
> 标签：android, android-layout, android-listview

我正在尝试将[flowtextview](http://code.google.com/p/android-flowtextview/)实现到[bauerca / drag-sort-listview 中](https://github.com/bauerca/drag-sort-listview)，但我收到了一个错误膨胀一行。你可以帮帮我吗？

错误行在 (ResourceDragSortCursorAdapter.java (Bauerca))：

```
@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    return mInflater.inflate(mLayout, parent, false);
} 
```

日食 说：

Ecipse 说“致命异常：主 android.view.InflateException：二进制 XML 文件第 8 行：膨胀类 com.pagesuite.flowtext.FlowTextView 时出错”

行布局为：

```
<?xml version="1.0" encoding="utf-8"?>
     <LinearLayout
      xmlns:android="http://schemas.android.com/apk/res/android"
      android:layout_width="fill_parent"
      android:layout_height="67dp"
      android:orientation="horizontal">

     <com.pagesuite.flowtext.FlowTextView
      android:id="@+id/nuevo_ingr_row_text"
android:layout_width="fill_parent"
android:layout_height="wrap_content" >

<ImageView
      android:id="@id/drag_handle"
      android:layout_width="wrap_content"
      android:layout_height="67dp"
      android:layout_alignParentLeft="true"
      android:layout_alignParentTop="true"
      android:padding="10dip"
      android:background="@drawable/ic_move" />

<ImageView
      android:id="@id/click_remove"    
      android:layout_width="67dp"
      android:layout_height="67dp"
      android:layout_alignParentRight="true"
      android:layout_marginTop="400dip"
      android:padding="10dip"
      android:background="@drawable/ic_close" />
 </com.pagesuite.flowtext.FlowTextView>
 </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T14:40:12.700

它可能无法找到您的 com.pagesuite.flowtext.FlowTextView 类。

首先检查这个类是否真的在那个包里？您是否使用了库或将此类复制到您自己的项目中？如果您复制了它，您需要将包更改为正确的值，也就是将其指向您自己的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T20:21:09.603

我写了 FlowTextView 类。该项目已经修复了很多错误，并且 JAR 文件尚未更新，因此我建议不要使用 JAR 文件并检查整个源代码并将其用作库项目。

这意味着您获得了最新版本，它可能会同时解决您的导入问题。

如果您不熟悉 eclipse 中的库项目，[请检查此](http://www.vogella.com/articles/AndroidLibraryProjects/article.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T04:07:48.610

您收到该错误只是因为您的 xml 布局文件无法识别该包`com.pagesuite.flowtext.FlowTextView`

如果将其更改为正确的，则不会出现错误。

随意发表评论。

# java - 声明类类型的方法？

> ID：14091510
> 
> 赞同：1
> 
> 时间：2012-12-30T14:27:45.273
> 
> 标签：java, methods

我将自己定义为 Java 初学者，只用了一个学期，在此之前我几乎没有任何编程经验，几乎没有 OOP 经验。

无论如何，我正在浏览一段代码，我发现了一个声明为类类型的方法

```
public Polica stavi (Predmet p, int i)
        throws GPolIndeks, GPolZauzeto, GPolTezina{
        if(i<0 || i>=niz.length) throw new GPolIndeks (i);
        if(niz[i] != null) throw new GPolZauzeto (i);
        if(q + p.Q() > maxQ) throw new GPolTezina (p);
        niz[i] = p;
        q += p.Q();
        return this;
    } 
```

现在代码相当简单，几乎我对它并不陌生，除了声明了一个名为**“stavi”**的方法的部分。我一直认为有两种类型的方法，一种是返回值，另一种是不返回值，而这种方法确实如此，但它没有被声明为任何经常使用的类型（int、double、long ...） ，它是用一个类名声明的，在这种情况下是**"Polica"**。这是我第一次遇到这样的事情并且它在编译器中工作，**所以我的问题是，我在哪里可以更详细地阅读方法，以更好地理解它是如何工作的。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T14:35:15.833

好的，我将为您解释一些要点。这一切都与 OOP 有关

`Polica`是一个类，`Object`一旦你创建了它的实例，它就会变成一个

```
Polica polica = new Polica(); 
```

和**方法**可以返回任何类型的变量和**对象**

这意味着在你的函数中你期望返回一个 Object`Polica`

```
 public Polica stavi(){
   Polica polica = new Polica();
   return polica;
 } 
```

并`this`代表它自己的自我实例，所以它和这个真的一样

```
public Polica stavi(){
       Polica polica = new Polica();
       return this;
} 
```

很好，你有一个很好的好奇心！这是一个很好的教程给你。

[http://docs.oracle.com/javase/tutorial/java/concepts/index.html](http://docs.oracle.com/javase/tutorial/java/concepts/index.html)

[http://docs.oracle.com/javase/tutorial/java/javaOO/objects.html](http://docs.oracle.com/javase/tutorial/java/javaOO/objects.html)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T14:47:51.343

官方的[Java 教程](http://docs.oracle.com/javase/tutorial/)是一个很好的起点——我会推荐像[Head First Java](https://rads.stackoverflow.com/amzn/click/com/0596009208)这样的书籍，它们对 Java 初学者非常有用，可以帮助你掌握 Java 基础知识。

针对您的问题，Java 方法可以返回诸如 int、float 等原语、诸如[Integer](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html)之类的内置 Class 对象实例，或者您在 Java 应用程序中创建的自定义类，例如您上面提到的“Polica”。

另请注意，在实例方法或构造函数中， this 是对当前对象的引用 - 正在调用其方法或构造函数的对象。您可以使用“this”从实例方法或构造函数中引用当前对象的任何成员。因此，在您的情况下，当您的方法返回“this”并且方法签名说它返回“Polica”时，这意味着该方法“ stavi”是“Polica”类的一部分，指的是“Polica”的当前实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T14:30:20.533

看看[这里的文档](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)

返回类型不必是 int、long 或 double 等。它可以是您自己定义的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T14:31:26.233

> 它没有被声明为任何经常使用的类型（int、double、long ...），它是用类名声明的

当您返回它们时，int、double、long 等（称为原语）和类之间没有区别。它们以相同的方式返回，并返回不同的类型。

```
public Potato weirdMethod(Elephant e) {
    System.out.println(e);
    return new Potato();
} 
```

如果您定义了“Potato”和“Elephant”类，那将可以正常工作。

（编辑：正如 Chris McCabe 在评论中澄清的那样，当您返回一个对象时，它是按引用传递的，因此您可以更改它，它会更改您返回的实际对象。基元是按值传递的，所以如果你得到一个方法的原语并改变它，原来的将不受影响。）

在这种情况下，看起来您想要使用构造函数。[http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html](http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-30T14:31:53.650

我将从[Java 方法教程开始](http://docs.oracle.com/javase/tutorial/java/javaOO/arguments.html)

在此示例中，该方法返回对对象的*引用*，在这种情况下，该对象是您刚刚调用方法的对象。这用于链接，并且经常使用的类是 StringBuilder 例如。

```
String text = new StringBuilder().append("Hello, the time is ")
                                 .append(new Date()).append("\n).toString(); 
```

如您所见，这是有效的，因为每个附加方法都返回`this`原始 StringBuilder。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-30T14:32:28.707

在 java 或任何其他 oops 语言中，方法的返回类型可以是任何对象类型，即它不限于原始类型（int、double ...）

您应该阅读[此](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4)（语言规范）以获取更多详细信息。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-30T14:33:34.307

[在这里](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)你可以找到你需要的东西。并回答您的问题，此方法返回 Polica 类型的对象。

# python - zipfile 几个密码匹配

> ID：14091511
> 
> 赞同：0
> 
> 时间：2012-12-30T14:27:50.483
> 
> 标签：python, zipfile

我在课堂上有很奇怪的行为，`zipfile`我希望有人能帮助我解决困扰我的问题。

我写了一个简短的脚本，试图打开用密码加密的 zip 文件（它是由 WinRar 压缩的），但结果证明`zipfile`该类不会对其他几个不正确的密码产生异常。

所以我的 zip 文件密码是“邪恶的”，`zFile.extractall`但当密码是其中之一时没有上升执行

*   '结帐'，
*   'disannuller',
*   'euornithes' 或
*   '亚马尔图'。

`zipfile`使用任何列出的密码提取类后的附加内容不正确。甚至 WinRar 也不允许使用这些密码进行解压缩。

我的Python代码如下：

```
import zipfile

diffrentPass = [
            'wrongpass1',
            'wrongpass2',
            'checkouts',
            'disannuller',
            'euornithes',
            'evil',
            'yamaltu']

def extractFile(zFile, password):
    try:
        answer= zFile.extractall(pwd=password)
        print 'Fount password : ', password
    except:
        pass

def main():
    zFile = zipfile.ZipFile("evil.zip")

    for password in diffrentPass:
        extractFile(zFile, password)

    if __name__ == '__main__':
        main() 
```

更新 ：

我知道我跳过了异常，但请注意程序：

```
wrongpass1 was incorrect
wrongpass2 was incorrect
Fount password :  checkouts
Fount password :  disannuller
Fount password :  euornithes
Fount password :  evil
Fount password :  yamaltu

Process finished with exit code 0 
```

行：

```
Fount password :  checkouts
Fount password :  disannuller
Fount password :  euornithes
Fount password :  yamaltu 
```

根本不应该出现

添加例如：

```
def extractFile(zFile, password):
    try:
        answer= zFile.extractall(pwd=password)
        print 'Fount password : ', password
    except Exception, e:
        print password + " was incorrect" 
```

输出没有任何变化

* * *

更新+发生了什么

@Phil Frost[解释发生了什么](https://stackoverflow.com/a/14091768/1629506)

为了确保这实际上是我的问题的重点，我在脚本中添加了一些调试打印来比较密码和文件中的 check_byte。

示例输出：

```
#!! Wrong pass, check_byte are diffrent
#  raised RuntimeError("Bad password for file", name)
Checking bytes for :  wrongpass1
pass check_byte : 47
file check_byte  112
Pass is correct for zipfile class :  False

#!! wrong password but for zipFile is ok , check_byte are the same 
# but file will be the unpacked incorrectly
# RuntimeError("Bad password for file", name) will be not rise
Checking bytes for :  checkouts
pass check_byte : 112
file check_byte  112
Pass is correct for zipfile class :  True
Fount password :  checkouts

#!! password ok 
Checking bytes for :  evil
pass check_byte : 112
file check_byte  112
Pass is correct for zipfile class :  True
Fount password :  evil 
```

代码 ：

```
import zipfile, zlib, binascii, struct
from zipfile import _ZipDecrypter

diffrentPass = [
    'wrongpass1',
    'wrongpass2',
    'checkouts',
    'disannuller',
    'euornithes',
    'evil',
    'yamaltu',
    'wrongpass1',]

def extractFile(zFile, password, bytes):

    print '\nChecking bytes for : ', password
    zd = _ZipDecrypter(password)
    h = map(zd, bytes[0:12])

    print 'pass check_byte :', ord(h[11])

    for item in zFile.infolist():
        if item.flag_bits & 0x8:
            check_byte = (item._raw_time >> 8) & 0xff
        else:
            check_byte = (item.CRC >> 24) & 0xff
        print 'file check_byte ',check_byte

    print "Pass is correct for zipfile class : " ,  ord(h[11]) == check_byte

    try:
        answer= zFile.extractall(pwd=password)
        print 'Fount password : ', password
    except Exception, e:
        pass

def main():

    # begining of ziped file must be cut off  dummy method works ony on this specific zip file
    # ....20111126036.jpg
    bytes = open('evil.zip', 'rb').read(45+12)[-12:]

    zFile = zipfile.ZipFile("evil.zip")

    for password in diffrentPass:
        extractFile(zFile, password,bytes)

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T14:33:31.883

引发了异常，但是您正在“吞下它”，因为您没有在其上显示任何错误，而只是通过调用“通过”来忽略它。

此外，您的代码还有另一个问题，主要模块部分缩进不正确。在您当前的代码中，永远不会调用 main()，因为对主模块的调用是 main() 定义的一部分

```
import zipfile

diffrentPass = [
            'wrongpass1',
            'wrongpass2',
            'checkouts',
            'disannuller',
            'euornithes',
            'evil',
            'yamaltu']

def extractFile(zFile, password):
    try:
        answer= zFile.extractall(pwd=password)
        print 'Fount password : ', password
    except:
        print password + " was incorrect"

def main():
    zFile = zipfile.ZipFile("evil.zip")

    for password in diffrentPass:
        extractFile(zFile, password)

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T15:03:31.527

我猜这个程序的目标是从 zip 文件中暴力破解密码。我猜你有一个更长的密码列表，你尝试过的密码，只有问题中列出的几个没有引发异常，而你有更多的行为符合预期。

在我看来，随着 zipfile 的实施，您有 255 分之一的机会接受密码，因此不会引发异常。这是因为密码是通过检查 1 字节校验和来验证的：

```
if ord(h[11]) != check_byte:
    raise RuntimeError("Bad password for file", name) 
```

（[完整来源](http://hg.python.org/cpython/file/2.7/Lib/zipfile.py#l962)）

编辑：经过进一步研究，这可能是[一个重复的问题](https://stackoverflow.com/questions/4670831/python-problem-with-zipfile-library)。

据我所知，zip加密很弱，很容易通过蛮力以外的方式破解。但是，我从来没有理由自己做，我不知道你想要完成的细节，所以我不能提出更具体的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T14:33:39.400

您忽略了代码中的异常。如果您希望它引发异常，则：

```
def extractFile(zFile, password):
    try:
        answer= zFile.extractall(pwd=password)
        print 'Fount password : ', password
    except Exception, e:
        # do something here before raising exception
        raise e 
```

或者根本不使用`try` `except`块。

**评论后编辑**

如果你想报告密码错误，那么你必须在`except`块中这样做，因为当`zFile.extractall(pwd=password)`执行时已经为错误的密码抛出异常，所以`print`永远不会执行。

```
def extractFile(zFile, password):
    try:
        answer= zFile.extractall(pwd=password)
        print 'Password "%s" is correct' % password
    except Exception, e:
        print 'Password "%s" is incorrect' % password
        pass 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T14:33:43.613

看起来您正在明确丢弃可能引发的任何异常，这里：

```
try:
    answer= zFile.extractall(pwd=password)
    print 'Fount password : ', password
except:
    pass 
```

如果 zFile.extractall() 引发异常，则`except:`执行该块。您的 except 块包含`pass`，在 python 中表示“什么都不做”或“无操作”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-22T08:56:00.300

```
try:
    zFile.extractall(pwd=password)
    print 'Fount password : ', password
except:
    pass 
```

我删除了“答案=”，它没有任何意义。此外，如果您想摆脱异常处理程序循环，您可以这样做：

```
def zipExit(password):
    print 'Password found: '+password
    exit(0)

def extractFile(zFile, password)
    try:    
        zFile.extractall(pwd=password)
        zipExit(password)
    except:
        pass

def main():
    ....the rest of your code here. 
```

对于密码破解者（如果您使用的是 linux，但我假设不是因为您使用的是 winRar），您不想将失败的尝试打印到屏幕上，这就是异常处理程序通过而不是打印的原因。因为您可以将程序指向输出到文件中。

~/python zipcrack.py > 破解密码

像这样的东西。

# c# - Gridview 绑定意外清除

> ID：14091524
> 
> 赞同：0
> 
> 时间：2012-12-30T14:29:34.413
> 
> 标签：c#, asp.net, data-binding, gridview

我的网格视图有问题。我已经搜索了很多解决方案，但找不到任何答案。我想我已经找到了问题，当我按下更新按钮时，gridview 不再绑定 - 这会导致 null 值。我认为在 RowEditing 上绑定就足够了。我还能在哪里绑定我的gridview？

请参阅下面的标记：

```
 <asp:GridView ID="ProductGridView" runat="server" AllowPaging="True" AllowSorting="True"
    AutoGenerateColumns="False" DataKeyNames="Id" OnRowEditing="ProductGridView_RowEditing"
    OnRowCancelingEdit="ProductGridView_RowCancelingEdit" OnRowUpdating="ProductGridView_RowUpdating"
    OnRowDeleting="ProductGridView_RowDeleting" OnDataBound="ProductGridView_DataBound" OnRowDataBound="ProductGridView_RowDataBound">
    <Columns>
        <asp:CommandField ShowDeleteButton="True" ShowEditButton="True" CausesValidation="false" />
        <asp:TemplateField HeaderText="Name" SortExpression="Name">
            <EditItemTemplate>
                <asp:TextBox ID="txtName" runat="server" Text='<%# Bind("Name") %>'></asp:TextBox>
            </EditItemTemplate>
            <ItemTemplate>
                <asp:Label ID="lblName" runat="server" Text='<%# Eval("Name") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Quantity" SortExpression="Quantity">
            <EditItemTemplate>
                <asp:TextBox ID="txtQuantity" runat="server" Text='<%# Bind("Quantity") %>'></asp:TextBox>
            </EditItemTemplate>
            <ItemTemplate>
                <asp:Label ID="lblQuantity" runat="server" Text='<%# Eval("Quantity") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Family" SortExpression="Family.Name">
            <EditItemTemplate>
                <asp:DropDownList ID="ddlFamily" runat="server" OnInit="ddlFamily_Init">
                </asp:DropDownList>
            </EditItemTemplate>
            <ItemTemplate>
                <asp:Label ID="lblFamily" runat="server" Text='<%# Eval("Family.Name") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

和代码隐藏：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            BindGridView(_productRepo.GetAll());
        }
    }

    private void BindGridView(object source)
    {
        ProductGridView.DataSource = source;
        ProductGridView.DataBind();
    }

    protected void ProductGridView_RowEditing(object sender, GridViewEditEventArgs e)
    {
        ProductGridView.EditIndex = e.NewEditIndex;
        BindGridView(_productRepo.GetAll()); // GetAll returns an IEnumerable.
        rowCount = ProductGridView.Rows.Count; // Count is 6 here, which is correct.
    }

    protected void ProductGridView_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        rowCount = ProductGridView.Rows.Count; // Count is 0 here.
        //BindGridView(_productRepo.GetAll()); // Tried to rebind which works but getting the old values obviously. 
        //rowCount = ProductGridView.Rows.Count; // Count is 6 here.

        // Get the controls - all is null. Works ok when I use BindGridView above.
        TextBox txtName = FindChildControl<TextBox>(this.Page, "txtName");
        TextBox txtQuantity = FindChildControl<TextBox>(this.Page, "txtQuantity");
        DropDownList ddlFamily = FindChildControl<DropDownList>(this.Page, "ddlFamily");

        // More code to populate a new product and bind the gridview again etc.
    } 
```

我也有一个 RowDataBound 方法。这会导致问题吗？

```
protected void ProductGridView_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow && (e.Row.RowState & DataControlRowState.Edit) == DataControlRowState.Edit)
        {
            DropDownList ddl = (DropDownList)e.Row.FindControl("ddlFamily");
            ddl.DataSource = _familyRepo.GetAll().Select(f => f.Name);
            ddl.DataBind();
            Product product = _productRepo.FindSingle(p => p.Id == (int)ProductGridView.DataKeys[e.Row.RowIndex].Value);
            ddl.SelectedIndex = (int)product.FamilyID - 1;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T14:47:57.737

如果我理解正确，您是说数据网格中的表单控件在回发后消失或重置为初始状态。

发生这种情况的原因是您在 Page_Load 方法中绑定了您的网格，这在页面生命周期中来得太晚，无法恢复控件值。直到触发 LoadViewstate 和 LoadPostbackData 事件之后，您的网格才会加载，因此，每次进行回发时，您的网格控件都会以其原始状态加载。

我猜你对 asp.net 生命周期很熟悉，但如果不是，这里有一篇文章：http: [//msdn.microsoft.com/en-us/library/ms972976.aspx](http://msdn.microsoft.com/en-us/library/ms972976.aspx)。我已经多次处理过这个问题，我花了一段时间才完全理解这里发生了什么。

该问题的一种解决方案是在覆盖的 OnInit 方法中加载网格，该方法发生在恢复控制数据之前。像这样的东西应该工作：

```
protected override void OnInit(EventArgs e)
{
    base.OnInit(e);
    BindGridView(_productRepo.GetAll());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T14:58:03.510

我通常以这种方式进行数据绑定....试试这个函数并在你的页面加载和其他你需要的函数中调用它。

```
protected void bind()
{
    con.Open();
    SqlCommand cmd = new SqlCommand("Your Query", con);
    DataSet ds = new DataSet();
    SqlDataAdapter da = new SqlDataAdapter();
    da.SelectCommand = cmd;

    da.Fill(ds);

    gvCourse.DataSource = ds;
    gvCourse.DataBind();

    con.Close();

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T16:38:50.307

或者您可以简单地将 !Page.IsPostBack 替换为 !IsPostBack

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        BindGridView(_productRepo.GetAll());
    }
} 
```

# blackberry-eclipse-plugin - BB10 在 Android 运行时调试和显示日志

> ID：14091525
> 
> 赞同：1
> 
> 时间：2012-12-30T14:29:39.997
> 
> 标签：blackberry-eclipse-plugin, blackberry-10, blackberry-android

我尝试将我的 android 应用程序移植到 BB10 平台。我的开发操作系统是 windows 和 eclipse 的黑莓插件给出了一些运行时错误。似乎还不稳定。我只是想知道是否有在不使用 eclipse 插件的情况下检查日志？

[黑莓图形辅助工具](http://supportforums.blackberry.com/t5/Testing-and-Deployment/BlackBerry-Tablet-OS-Graphical-Aid/ta-p/1207067)可用于兼容性检查和签名应用程序，但它不显示日志。

# objective-c - 静态 UITableView 不是全屏

> ID：14091528
> 
> 赞同：1
> 
> 时间：2012-12-30T14:29:55.583
> 
> 标签：objective-c, ios, uitableview

对于我的注册表单，我目前使用的不是全屏 UITableView，我通过硬编码数据源方法以编程方式添加单元格。到那时，整个班级变得非常复杂和庞大。 [Pastebin 链接](http://pastebin.com/9R2Fa1Uy)

这些单元格是自定义的，具有 UILabel 和 UITextfield。现在其中一个单元格应该有一个按钮而不是文本字段。在我看来，这会使整个事情变得更加复杂。所以我的想法是在情节提要中使用 tableview 的静态功能。但这需要一个 UITableViewController，如果我使用一个，TableView 总是全屏的。有没有办法在没有全屏 TableView 的情况下设置静态功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T14:44:13.040

如果您有固定数量的单元格，则静态表格视图控制器是一个不错的选择。正如您所提到的，您可以将每个输入字段包含为一个 IB 出口，而不是实现数据源方法。

如果您想要一个非全宽的静态表格视图控制器，请将表格视图控制器嵌入容器视图中。

例如，创建一个新的视图控制器，在这个新的视图控制器中添加一个具有所需宽度的容器视图对象，然后将您的静态表视图控制器连接到容器视图。

请注意，静态表视图控制器成为封闭视图控制器的 childViewController。您可以方便地从带有弱属性的封闭视图控制器访问文本字段到带有子视图控制器中的文本字段。

```
- (UITextField *)surnameTextField
{
  UITextField *textField;

  // reference childController that is initiated via containerView
  if ([[self.childViewControllers lastObject] isKindOfClass:[NameViewController class]])
  {
    NameViewController *nameVC = [self.childViewControllers lastObject];
    textField = nameVC.surnameTextField;
  }

  return textField;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T14:46:15.630

你不需要使用 UITableViewController。只需将表格视图从控制面板拖放到情节提要中的 UIViewController 上。根据需要调整大小和位置，并将任何其他控件添加到所需的 UIViewController。

在 UITableView 的属性表中，将内容类型设置为“静态单元格”，然后定义您想要的单元格。

![在此处输入图像描述](../Images/8a7a1cd2375e1da96d3ea07467edb20d.png)

# java - 如何以一种好的方式存储配置/属性数据？

> ID：14091538
> 
> 赞同：0
> 
> 时间：2012-12-30T14:31:12.237
> 
> 标签：java, properties, map

比如说，我们有一个超类`Car`和两个子类`Ford`，并且`Porsche`. 现在图形用户界面应该显示正确的表示（例如汽车的名称）。`getCarName()`我们可以为每个子类添加一个额外的方法。

但是现在，我们有另一个 GUI 想要通过其他属性来表示汽车，例如汽车名称加上生产国。然后我们必须添加另一个方法，依此类推。

一般来说，我想以一种很好的方式存储某种配置/属性。每次需要另一个表示时，不应更改原始数据结构（可能有很多子类）。所以我想创建一个 HashMap 将子类与其属性相关联，并将这个 HashMap 交给 GUI。

但是应该使用什么样的钥匙呢？`HashMap<Car, String>`没有解决方案，因为我不想创建汽车对象只是为了存储表示。String 表示独立于实例。

也欢迎设计模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T15:10:43.900

您可以将任何汽车的所有属性/属性存储在 POJO（例如：CarPropertyPOJO）中，然后使用此 POJO 显示您需要的任何属性。这可以在您的不同页面上统一使用。根据您的问题*CarPropertyPOJO*将包含 2 个成员变量*carName*和*productionCountry*。如果您只想显示单个汽车的属性，那么只需将*CarPropertyPOJO*对象传递给 UI 即可解决问题。假设您想以表格形式显示许多汽车的属性，那么您可以传递一个 Collection 对象（ArrayList< *CarPropertyPOJO* > 或 HashMap）。CarSubClassName 可以只表示汽车的子类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T14:36:49.757

为了有一个干净的设计，我宁愿`getProductionCountries`在`Car`类中有一个方法，并且可以被每个子类覆盖。当您添加一辆新车时，您确实需要编写更多代码，但这是不可避免的。

# c# - StreamInsight 2.1 针对 SQL 数据库和...它是如何工作的？

> ID：14091544
> 
> 赞同：1
> 
> 时间：2012-12-30T14:31:34.177
> 
> 标签：c#, sql-server, streaminsight

我已经安装了 StreamInsight 2.1。我已经能够打开它并使用 Server.Create()，公开一个 WCF 端点，并使用事件流调试器连接到它。我发现了很多创建假事件源的例子。

我想知道如何创建我认为可能的：针对 SQL 2012 数据库的常规查询。我还没有找到任何连接到 RDB 的示例代码 - 只是声明“这只是为了展示，实际上你可能会连接到 RDB”。

它只能使用 LINQ-to-SQL 吗？实体框架 4？更简单的 ADO.NET？一些特定于 MS SQL 的协议？

我想真正让我困惑的部分是这些常设查询应该如何工作。这些天来，微软在 SQL Server 中拥有一个只能由某个独立 SKU (StreamInsight) 访问的公开功能，这对我来说似乎很奇怪。因此，它必须是以下两者之一：

SQL 是否知道查询的持久性，或者 StreamInsight 是否只是修改 LINQ 语句以有效地轮询（例如通过添加`AND @LastExecution <= InsertedOn`和适当的索引）。

如果 SQL 将其视为一种特殊的查询，那么 StreamInsight 使用什么机制来创建这种常设查询？程序员可以在没有 StreamInsight Services 的情况下使用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T16:19:18.960

您提到的常设查询是使用 LINQ 编写的在 StreamInsight 引擎内部运行的查询，而不是 SQL Server 本身。使用 StreamInsight，我们开发人员可以编写适配器/源/接收器代码来获取数据。

> 它只能使用 LINQ-to-SQL 吗？实体框架 4？更简单的 ADO.NET？一些特定于 MS SQL 的协议？

是的。我以前写过这段代码，而且我很幸运只用了普通的 ADO.NET。对于我们的需求，它比 LINQ-to-SQL 和实体框架更灵活。

您是否可以控制要查询的表的架构？如果你这样做，我建议添加某种 LastUpdated 日期时间列，当你的表中的数据发生变化时它会更新。这样，您可以以仅撤回更改而不返回整个表本身的方式编写查询。您的适配器/源将需要某种计时器来定期执行您的 SQL 语句。您还需要维护上次执行的日期时间，以便将其插入 SQL 语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-06T07:14:03.770

您可以为 SSSB 创建一个 StreamInsight 输入适配器，以根据来自服务器代理队列的消息生成事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-25T00:17:16.717

我还没有完成这个解决方案，但在我看来，可以在 SQL Server 中实现 Service Broker 或 SQL 查询通知来向应用程序发送有关数据更改的消息，然后使用 Streaminsight 来处理和响应这个改变的状态.

我认为这会产生“常设查询”的效果，并避免轮询的（可能是浪费的）开销。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-12-30T14:35:34.727

> 我想知道如何创建我认为可能的：针对 SQL 2012 数据库的常设查询

现在我们开始。不可能。时期。为什么你认为这是可能的？需要轮询，最好是永远等待消息队列的轮询，但不，常设查询不可能。太糟糕了。

你从哪里得到这个可能的有趣想法？

# iis - 谷歌索引机器人访问我的网站时出现错误 500 (IIS)

> ID：14091545
> 
> 赞同：0
> 
> 时间：2012-12-30T14:31:46.373
> 
> 标签：iis, indexing, dns, robot

我在 asp.net mvc3 中开发了一个网站，因此我将它托管在 Windows 服务器 (OVH) 上。

该域名已在 GoDaddy 注册，因此我编辑了 A 类型的 DNS 记录以指向我的 OVH 托管服务器。

```
GoDaddy DNS records
-------------------
Host :      @   
Points to : [Server-IP]
TTL :       1 Hour          

Host :      www 
Points to : [Server-IP]
TTL :       1 Hour 
```

因此我可以访问该网站，但是当 Google Robot 尝试访问我的网站时，它会收到错误 500（这意味着服务器端错误），这导致我的网站无法被 google、bing 和其他搜索引擎索引。

当机器人尝试索引我的网站时，我可以每周在 Google 网站管理员工具错误日志中查看错误 500。

我在 GoDaddy 上配置 DNS 记录时是否犯了错误？还是我必须在 IIS 管理器中编辑某些内容？

非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T14:49:36.240

500 通常意味着您的代码中有错误。检查 .NET 异常的 Windows 事件日志或设置[ELMAH](http://nuget.org/packages/elmah)以记录所有未捕获的异常。

# java - 用Java实现的计算斐波那契数列的算法给出了奇怪的结果

> ID：14091548
> 
> 赞同：2
> 
> 时间：2012-12-30T14:32:16.517
> 
> 标签：java, recursion, iteration, fibonacci

当我运行 Countdown.class 时，我得到以下输出：

```
263845041
-1236909152
-973064111
2084994033
1111929922
-1098043341
13886581
-1084156760
-1070270179
2140540357 
```

发射！

“Blast Off！”之前的数字 应该是前 10 个斐波那契数。我的源代码如下。

```
 public class Fibonacci {

  public static long fib(int n) {
    if (n <= 1) return 1;
    return fib(n-1) + fib(n-2);
  }

  public static long fastfib(int n) {
    int a = 0;
    int b = 1;
    int c = 0;

    for (int i = 0; i <= n; n++) {
      c = a + b;
      a = b;
      b = c;    
    }

    return c;
  }

} 
```

实现 fastfib 方法的类是：

```
public class Countdown {

  public static void countdown(int n) {
    if (n == 0) System.out.println("Blast Off!");
    else {
      System.out.println(Fibonacci.fastfib(n));
      countdown(n - 1); 
    }
  }

  public static void main(String[] args) {
    countdown(10);
  }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-30T14:35:08.913

尽管您的`fastfib()`方法返回`long`，但计算是在`int`s 上完成的。

您遇到[整数溢出](http://en.wikipedia.org/wiki/Integer_overflow)。

确保声明`a,b,c`为`long`s 而不是`int`s。如果您想要更大的数字（也超出`long`s 的范围） - 您可能想看看[`BigInteger`](http://docs.oracle.com/javase/6/docs/api/java/math/BigInteger.html)（并使用它）。

* * *

**编辑：**正如**@ExtremeCoders**在评论中提到的那样，循环中的代码中还有另一个问题`for`：
`for (int i = 0; i <= n; n++)`应该是`for (int i = 0; i <= n; i++)`，你想要增加`i`- 不是`n`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-30T14:40:00.137

除了其他答案，

```
for (int i = 0; i <= n; n++) { 
```

应该

```
for (int i = 0; i <= n; i++) {
//                      ^ that's an i 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T14:36:55.777

将 a、b 和 c 的数据类型更改为 long，它将开始正常工作。您的数字超出了 int 的限制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-15T16:46:11.690

你应该使用 BigInteger insted of long

导入 java.math.BigInteger；

公共类斐波那契{

```
public static BigInteger fib(BigInteger n) {
    int result = n.compareTo(BigInteger.valueOf(1)); // returns -1, 0 or 1 as this BigInteger is numerically less than, equal to, or greater than val.
    if (result != 1) return BigInteger.valueOf(1);

    return fib(

            n.subtract(
                    BigInteger.valueOf(1).add
                        (n.subtract
                                (
                                        BigInteger.valueOf(-2)
                                )
                        )
                    )
                );
}

public static BigInteger fastfib(int n) {
    BigInteger a = BigInteger.valueOf(0);
    BigInteger b =  BigInteger.valueOf(1);
    BigInteger c =  BigInteger.valueOf(0);

    for (int i = 1; i < n; i++) {
        c = a.add(b);
        a = b;
        b = c;    
    }

    return c;
} 
```

}

# android - EndLessAdapter + Asynctask + 自定义 Fragmentlist

> ID：14091554
> 
> 赞同：0
> 
> 时间：2012-12-30T14:33:16.453
> 
> 标签：android, android-asynctask, android-listfragment, cwac-endless

我想在我的应用程序中从 commonsware 实现 EndlessAdapter，它是一个带有自定义 ListView 的 Listfragment 和一个扩展 Baseadapter 的lazyadapter。

**问题：**

*   我在 cacheInBackground() 中遇到异常；当我调用 MyAsyncTask 时，有什么帮助可以解决吗？我使用 Endlessadapter v1.2（最新）作为库。

    ```
     @Override
                      protected boolean cacheInBackground() {
                          new MyAsyncTask(this, data.size()).execute();

                        return hasMoreData;
                      } 
    ```

*   Lazyadapter 在没有 EndlessAdapter 的情况下运行良好。

> 12-30 15:29:21.404：E/EndlessAdapter(334)：cacheInBackground() 中的异常 12-30 15:29:21.404：E/EndlessAdapter(334)：java.lang.NullPointerException 12-30 15:29:21.404 : E/EndlessAdapter(334): at br.com.example.nightid.endlessadapter.EndlessCustomView$DemoAdapter.cacheInBackground(EndlessCustomView.java:132) 12-30 15:29:21.404: E/EndlessAdapter(334): at com. commonsware.cwac.endless.EndlessAdapter.getView(EndlessAdapter.java:250) 12-30 15:29:21.404: E/EndlessAdapter(334): 在 android.widget.AbsListView.obtainView(AbsListView.java:1430) 12-30 15:29:21.404: E/EndlessAdapter(334): 在 android.widget.ListView.makeAndAddView(ListView.java:1745) 12-30 15:29:21.404: E/EndlessAdapter(334): 在 android.widget.ListView .fillDown(ListView.java:670) 12-30 15:29:21.404: E/EndlessAdapter(334): 在 android.widget.ListView.fillFromTop(ListView.java:727) 12-30 15:29:21.404: E/EndlessAdapter(334): 在 android.widget.ListView.layoutChildren(ListView.java:1598) 12-30 15:29: 21.404: E/EndlessAdapter(334): 在 android.widget.AbsListView.onLayout(AbsListView.java:1260) 12-30 15:29:21.404: E/EndlessAdapter(334): 在 android.view.View.layout(View .java:7175) 12-30 15:29:21.404: E/EndlessAdapter(334): 在 android.widget.FrameLayout.onLayout(FrameLayout.java:338) 12-30 15:29:21.404: E/EndlessAdapter(334) ): 在 android.view.View.layout(View.java:7175) 12-30 15:29:21.404: E/EndlessAdapter(334): 在 android.widget.FrameLayout.onLayout(FrameLayout.java:338) 12- 30 15:29:21.404: E/EndlessAdapter(334): 在 android.view.View.layout(View.java:7175) 12-30 15:29:21.404: E/EndlessAdapter(334): 在 android.widget。FrameLayout.onLayout(FrameLayout.java:338) 12-30 15:29:21.404: E/EndlessAdapter(334): 在 android.view.View.layout(View.java:7175) 12-30 15:29:21.404: E/EndlessAdapter(334): 在 android.support.v4.view.ViewPager.onLayout(ViewPager.java:1520) 12-30 15:29:21.404: E/EndlessAdapter(334): 在 android.view.View.layout (View.java:7175) 12-30 15:29:21.404: E/EndlessAdapter(334): 在 android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254) 12-30 15:29:21.404: E/EndlessAdapter (334): 在 android.widget.LinearLayout.layoutVertical(LinearLayout.java:1130) 12-30 15:29:21.404: E/EndlessAdapter(334): 在 android.widget.LinearLayout.onLayout(LinearLayout.java:1047) 12-30 15:29:21.404: E/EndlessAdapter(334): 在 android.view.View.layout(View.java:7175) 12-30 15:29:21.404: E/EndlessAdapter(334):在 android.widget.FrameLayout.onLayout(FrameLayout.java:338) 12-30 15:29:21.404: E/EndlessAdapter(334): 在 android.view.View.layout(View.java:7175) 12-30 15 :29:21.404: E/EndlessAdapter(334): 在 android.widget.LinearLayout.setChildFrame(LinearLayout.java:1254) 12-30 15:29:21.404: E/EndlessAdapter(334): 在 android.widget.LinearLayout。 layoutVertical(LinearLayout.java:1130) 12-30 15:29:21.404: E/EndlessAdapter(334): 在 android.widget.LinearLayout.onLayout(LinearLayout.java:1047) 12-30 15:29:21.404: E/ EndlessAdapter(334): 在 android.view.View.layout(View.java:7175) 12-30 15:29:21.404: E/EndlessAdapter(334): 在 android.widget.FrameLayout.onLayout(FrameLayout.java:338 ) 12-30 15:29:21.404: E/EndlessAdapter(334): 在 android.view.View.layout(View.java:7175) 12-30 15:29:21.404:E/EndlessAdapter(334): 在 android.widget.FrameLayout.onLayout(FrameLayout.java:338) 12-30 15:29:21.404: E/EndlessAdapter(334): 在 android.view.View.layout(View.java :7175) 12-30 15:29:21.404: E/EndlessAdapter(334): 在 android.view.ViewRoot.performTraversals(ViewRoot.java:1140) 12-30 15:29:21.404: E/EndlessAdapter(334):在 android.view.ViewRoot.handleMessage(ViewRoot.java:1859) 12-30 15:29:21.404: E/EndlessAdapter(334): 在 android.os.Handler.dispatchMessage(Handler.java:99) 12-30 15 ：29：21.404：E / EndlessAdapter（334）：在android.os.Looper.loop（Looper.java：123）12-30 15：29：21.404：E / EndlessAdapter（334）：在android.app.ActivityThread。 main(ActivityThread.java:3683) 12-30 15:29:21.404: E/EndlessAdapter(334): 在 java.lang.reflect.Method.invokeNative(Native Method) 12-30 15:29:21.404:E/EndlessAdapter(334): at java.lang.reflect.Method.invoke(Method.java:507) 12-30 15:29:21.404: E/EndlessAdapter(334): at com.android.internal.os.ZygoteInit $MethodAndArgsCaller.run(ZygoteInit.java:839) 12-30 15:29:21.404：E/EndlessAdapter(334)：在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 12-30 15 ：29：21.404：E / EndlessAdapter（334）：在dalvik.system.NativeStart.main（本机方法）12-30 15：30：53.096：E / dalvikvm（334）：找不到类'com.actionbarsherlock.widget .SearchView$11'，引用自方法 com.actionbarsherlock.widget.SearchView。E/EndlessAdapter(334): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 12-30 15:29:21.404: E/EndlessAdapter(334): 在 dalvik.system.NativeStart.main （本机方法）12-30 15:30:53.096：E/dalvikvm(334)：找不到类 'com.actionbarsherlock.widget.SearchView$11'，引用自方法 com.actionbarsherlock.widget.SearchView。E/EndlessAdapter(334): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 12-30 15:29:21.404: E/EndlessAdapter(334): 在 dalvik.system.NativeStart.main （本机方法）12-30 15:30:53.096：E/dalvikvm(334)：找不到类 'com.actionbarsherlock.widget.SearchView$11'，引用自方法 com.actionbarsherlock.widget.SearchView。

**无尽的自定义视图：**

```
public class EndlessCustomView extends ListFragment{
    // All static variables
        static final String URL = "http://api.androidhive.info/music/music.xml";
        // XML node keys
        static final String KEY_SONG = "song"; // parent node
        static final String KEY_ID = "id";
        static final String KEY_TITLE = "title";
        static final String KEY_ARTIST = "artist";
        static final String KEY_DURATION = "duration";
        static final String KEY_THUMB_URL = "thumb_url";

        ListView list;
        DemoAdapter adapter=null;
        ArrayList<HashMap<String, String>> songsList = null;

//      @Override
//      public void onActivityCreated(Bundle savedInstanceState) {
//      // TODO Auto-generated method stub
//      super.onActivityCreated(savedInstanceState);
//      
//      setRetainInstance(true);
//      
//      songsList = new ArrayList<HashMap<String, String>>();
//      
//      if (getActivity() != null) {
//          
//      adapter = new DemoAdapter(getActivity(), songsList); 
//      adapter.setRunInBackground(false);
//      setListAdapter(adapter);
//      }
//      
//      }

        @Override
        public void onViewCreated(View view, Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onViewCreated(view, savedInstanceState);
//          

////            new MyAsyncTask().execute();
            setRetainInstance(true);
            songsList = new ArrayList<HashMap<String, String>>();

            if (getActivity() != null) {

            adapter = new DemoAdapter(getActivity(), songsList); 
            adapter.setRunInBackground(false);
            setListAdapter(adapter);
            }

        }

        class DemoAdapter extends EndlessAdapter implements IItemsReadyListener{
              private RotateAnimation rotate=null;
              private View pendingView=null;
              private FragmentActivity activity;
              private ArrayList<HashMap<String, String>> data;
              public ImageLoader imageLoader; 
              private List<HashMap<String, String>> mOriginalNames;
              private boolean hasMoreData=true;

              DemoAdapter(FragmentActivity fragmentActivity, ArrayList<HashMap<String, String>> d) {

                super(new LazyAdapter(fragmentActivity, d));

                rotate=new RotateAnimation(0f, 360f, Animation.RELATIVE_TO_SELF,
                        0.5f, Animation.RELATIVE_TO_SELF,
                        0.5f);

                rotate.setRepeatMode(Animation.RESTART);
                rotate.setRepeatCount(Animation.INFINITE);
              }

              @Override
              protected View getPendingView(ViewGroup parent) {

                  View row = getActivity().getLayoutInflater().inflate(R.layout.row, null);

                      View child=row.findViewById(android.R.id.text1);

                      child.setVisibility(View.GONE);

                      child=row.findViewById(R.id.throbber);
                      child.setVisibility(View.VISIBLE);
                      child.startAnimation(rotate);

                return(row);
              }

              @Override
              protected boolean cacheInBackground() {
                  new MyAsyncTask(this, data.size()).execute();

                return hasMoreData;
              }

              public void onItemsReady(ArrayList<HashMap<String, String>> data) {
                  songsList.addAll(data);
                  adapter.onDataReady();  // Tell the EndlessAdapter to remove it's pending
                                          // view and call notifyDataSetChanged()
                  hasMoreData = songsList.isEmpty();
                }

              @Override
              protected void appendCachedData() {
//              if (getWrappedAdapter().getCount()<75) {
//                @SuppressWarnings("unchecked")
//                LazyAdapter a=(LazyAdapter)getWrappedAdapter();
//                for (int i = 0; i < data.size(); i++) {
//                    a.add(data.get(i));
//                }
//              }
              }

        public class MyAsyncTask extends AsyncTask<Void,Void,ArrayList<HashMap<String, String>>>{
            IItemsReadyListener listener;
            private final ProgressDialog dialog=new ProgressDialog(getActivity());

            int startPoint;

            public MyAsyncTask(IItemsReadyListener listener, int startPoint) {
                // TODO Auto-generated constructor stub
                this.listener = listener;
                this.startPoint = startPoint;
            }

            @Override
            protected ArrayList<HashMap<String, String>> doInBackground(Void... params) {

                XMLParser parser = new XMLParser();
                String xml = parser.getXmlFromUrl(URL); // getting XML from URL
                Document doc = parser.getDomElement(xml); // getting DOM element

                NodeList nl = doc.getElementsByTagName(KEY_SONG);
                // looping through all song nodes <song>
                for (int i = 0; i < nl.getLength(); i++) {
                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();
                    Element e = (Element) nl.item(i);
                    // adding each child node to HashMap key => value
                    map.put(KEY_ID, parser.getValue(e, KEY_ID));
                    map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
                    map.put(KEY_ARTIST, parser.getValue(e, KEY_ARTIST));
                    map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));
                    map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));

                    // adding HashList to ArrayList
                    songsList.add(map);
                }
                return (songsList);
            }

            @Override
            protected void onPreExecute()
            {
                dialog.setMessage("Loading ...");
                dialog.show();
                dialog.setCancelable(false);
            }

            @Override
            protected void onPostExecute(ArrayList<HashMap<String, String>> result)
            {
                listener.onItemsReady(songsList);
                 // Getting adapter by passing xml data ArrayList

                }

            }
    }

} 
```

**懒惰适配器：**

```
public class LazyAdapter extends BaseAdapter {

    private FragmentActivity activity;
    private ArrayList<HashMap<String, String>> data;
    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader; 
    private List<HashMap<String, String>> mOriginalNames;

    public LazyAdapter(FragmentActivity fragmentActivity, ArrayList<HashMap<String, String>> d) {
        super();
        this.activity = fragmentActivity;
        this.data = d;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());
    }

    public int getCount() {
        return data.size();
    }

    public Object getItem(int position) {
        return data.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    @Override
    public void notifyDataSetChanged() {
        super.notifyDataSetChanged();
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)

            vi = inflater.inflate(R.layout.list_row, null);

        TextView title = (TextView)vi.findViewById(R.id.title); // title
        TextView artist = (TextView)vi.findViewById(R.id.artist); // artist name
        TextView duration = (TextView)vi.findViewById(R.id.duration); // duration
        ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); // thumb image

        HashMap<String, String> song = new HashMap<String, String>();
        song = data.get(position);

        // Setting all values in listview
        title.setText(song.get(CustomizedListView.KEY_TITLE));
        artist.setText(song.get(CustomizedListView.KEY_ARTIST));
        duration.setText(song.get(CustomizedListView.KEY_DURATION));
        imageLoader.DisplayImage(song.get(CustomizedListView.KEY_THUMB_URL), thumb_image);
        return vi;
    }

    public void add(HashMap<String, String> map) {
        // TODO Auto-generated method stub
        data.add(map);
        notifyDataSetChanged();

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T15:38:50.290

`data``null`在`cacheInBackground()`. _ 您可以通过阅读堆栈跟踪 ( `NullPointerException`in `cacheInBackground()`) 并看到唯一可能触发该异常的事情来判断这`cacheInBackground()`一点`data.size()`。

由于我看不到您曾在哪里为 赋值`data`，因此这一事实`null`并不令人惊讶。

# php - 基于当前时间的水平 div 移动

> ID：14091562
> 
> 赞同：0
> 
> 时间：2012-12-30T14:33:43.463
> 
> 标签：php, javascript, jquery-ui

我正在生成一个基于时间的时间表，以小时为单位运行。我需要使用此表根据时间在点之间移动。例如，我将有一个从浏览器顶部到底部运行的 setLINE。然后我需要根据当前时间相对于表格上的时间水平平移 div 或表格。我什至不知道从哪里开始，任何人都可以帮助我或指出正确的方向。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T14:45:38.463

我认为你的问题缺少一些信息，所以我会回答一些假设 -

1.  决定你的尺寸和比例：即。屏幕尺寸是像素，时间尺寸是小时，让我们决定比例是每个小时在屏幕上由 30 个像素表示。

2.  决定什么时间是桌子最左边的时间，即。上午 12 点。

3.  因此，如果您想从凌晨 2 点到凌晨 3 点绘制一个事件，它将从左侧 60 像素开始（2 小时 = 2*30 像素），宽度为 30 像素（一小时长）。基本上，您将事件时间减去表格左侧的时间，结果（以小时为单位）乘以 30 像素是您绘制事件的位置。

4.  如果要更改“当前时间”，可以更改表格最左侧的时间。IE。当您希望屏幕中心专注于上午 9 点时，您可以将表格的最左侧设置为上午 5 点。

我希望这有帮助。

# python - 单击具有特定名称的图像

> ID：14091564
> 
> 赞同：1
> 
> 时间：2012-12-30T14:33:59.993
> 
> 标签：python, mechanize

如何使用 Python mechanize 单击如下图？

```
<a href="..."><img name="next" id="next" src="..."></a> 
```

我知道要点击的图像的名称和 ID。我需要以某种方式识别父链接并单击它。我怎样才能？

额外问题：我如何检查是否有这样的图像？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T18:41:02.513

而不是使用机械化，使用bs4（beautifulsoup 4）非常简单。

```
from bs4 import BeautifulSoup
import urllib2
text = urllib2.urlopen("http://yourwebpage.com/").read()
soup = BeautifulSoup(text)
img = soup.find_all('img',{'id':'next'})
if img:
    a_tag = img[0].parent
    href = a_tag.get('href')
    print href 
```

使用 bs4 检索父标签非常容易，因为它发生在使用该函数 `.parent`当然找到标签之后。`find_all`~~由于该`find_all`函数返回一个数组，因此最好`if img:`以后再做，但由于这可能不适用于您的网站，所以这样做是安全的。~~见下文。

编辑：我已更改代码以包含“奖金问题”，这是我在上面描述的替代方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T14:44:04.010

对于您的奖金问题-我想说您可以使用 BeautifulSoup 来检查 img 元素是否有效。您可以使用 urllib 来查看图像是否存在（至少，服务器是否会将其传递给您 - 否则您将收到错误消息）。

您还可以查看比我回答的更聪明的人的[线程](https://stackoverflow.com/questions/1806238/mechanize-python-click-a-button)- 它似乎讨论了一个名为 SpiderMonkey 的库以及无法机械化单击按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T16:07:30.287

好吧，我不知道如何使用 Mechanize，但是我知道如何使用`lxml`：

让我们假设我们的网页有这个代码： `<a href="page2.html"><img name="bla bla" id="next" src="Cat.jpg"></a>`. 使用`lxml`我们将编写以下代码：

```
from lxml import html
page = urlllib2.urlopen('http://example.com')
tree = html.fromstring(page.read())
link = tree.xpath('//img[@id="next"]/ancestor::a/attribute::href') 
```

大多数魔法发生在`tree.xpath`函数中，您首先使用 定义您要查找的图像`//img[@id="next"]`，然后指定您正在查找`a`它之前的标签：`/ancestor::a`并且您正在寻找专门的`href`属性：`/attribute::href`。链接变量现在将包含与该查询匹配的字符串列表 - 在这种情况下，链接 [0] 将是`page2.html`- 您可以`urlopen()`，从而有效地*单击*它。

对于该`//img[@id="next"]`部分，您可以使用其他属性，例如 this:`//img[@name="bla bla"]`并且它将完美地工作。您只需要考虑哪种属性更适合这种情况。

我知道这个答案不使用机械化，但我希望它是一个有用的指针。祝你好运！

# caching - APC 缓存碎片（无尽的困境）

> ID：14091569
> 
> 赞同：1
> 
> 时间：2012-12-30T14:34:40.880
> 
> 标签：caching, apc, php

这是[一个](https://stackoverflow.com/questions/2279448/apc-is-showing-100-fragmentation) [经常](https://stackoverflow.com/questions/3872463/apc-cache-fragmentation-problem) [被问到的](https://stackoverflow.com/questions/13394696/cache-apc-fragmentation) [问题](https://stackoverflow.com/questions/3947475/apc-fragmentation)，我知道。但是我尝试了所有建议的解决方案（apc.stat=0，增加共享内存等），但没有任何好处。

这是带有统计信息的屏幕（您可以看到 nginx 和 php5-fpm）以及 apc.ini 中设置的参数：

![APC 统计页面](../Images/7c31b297c01ea09e10a21b02aff6b97b.png)

APC 用于多个站点（8-9 个 WordPress 站点和一个带有 MediaWiki 和 SMF）的系统和用户缓存条目。

你有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T14:56:51.987

每个 wordpress 站点都将在用户缓存中缓存健康的数量。我自己对此进行了深入研究，并发现最好的“猜测”是，如果您在 APC 中使用用户缓存，请将碎片保持在 10% 以下。这有时可能意味着您需要尝试保留超过 10 倍于您打算实际用于缓存的内存量以避免碎片。从您所在的位置开始并不断增加分配的内存，直到运行一段时间后碎片保持在 10% 以下。

顺便说一句：被缓存的 wordpress 页面很大，因此您可能需要大量内存以避免碎片。

为什么会有 10% 的碎片化？这有点像魔法，但我观察到这是性能开始明显下降的地方。但是，我还没有找到任何好的基准（或运行我自己的受控测试）。

这 10 倍的数量让我看起来很疯狂，但根本原因是 APC 除了重新启动（完全转储缓存）之外没有办法进行碎片整理。当您只打算使用 100-200m 时，拥有一块 1G 的内存可以提供大量空间来填充，而无需寻找“洞”来放置东西。想想旧的 FAT16 或 FAT32 磁盘在 Windows 98 上的性能不佳——当磁盘已满 50% 以上时，经常需要手动进行碎片整理。

如果您买不起多余的内存，您可能需要查看用于用户缓存的 memcached 或普通旧文件缓存。

# delphi - 在 Delphi 中将文件时间转换为儒略日期

> ID：14091571
> 
> 赞同：0
> 
> 时间：2012-12-30T14:34:45.113
> 
> 标签：delphi, delphi-2010

我在将文件修改时间作为朱利安日期时遇到问题。我的**Delphi 2010**看起来像这样：

```
AHandle := FindFirstFile(PChar('C:\*'), FindData);
if (AHandle <> INVALID_HANDLE_VALUE) then
begin
     repeat
           if (FindData.dwFileAttributes And FILE_ATTRIBUTE_DIRECTORY = 0) then
                ModifJulianDate := FileTimeToJulianDate(FindData.ftLastWriteTime);

     until Not FindNextFile(AHandle, FindData);
end; 
```

问题是：`FileTimeToJulianDate()`返回的结果有**一个小时的偏移量**，即。如果文件的修改时间是 10:01，则​​此代码返回 9:01！！

**我怎样才能解决这个问题？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T22:57:38.720

假设您的答案准确，您正在寻找的功能最容易使用 FileTimeToLocalFileTime 实现。

```
function UTCFileTimeToLocalDateTime(const UTCFileTime: TFileTime): TDateTime;
var
  LocalFileTime: TFileTime;
  LocalSystemTime: TSystemTime;
begin
  if not FileTimeToLocalFileTime(UTCFileTime, LocalFileTime) then
    RaiseLastOSError;
  if not FileTimeToSystemTime(LocalFileTime, LocalSystemTime) then
    RaiseLastOSError;
  Result := SystemTimeToDateTime(LocalSystemTime);
end; 
```

或者，如果您更喜欢使用 SystemTimeToTzSpecificLocalTime ，请这样做：

```
function UTCFileTimeToLocalDateTime(const UTCFileTime: TFileTime): TDateTime;
var
  UTCSystemTime, LocalSystemTime: TSystemTime;
begin
  if not FileTimeToSystemTime(UTCFileTime, UTCSystemTime) then
    RaiseLastOSError;
  if not SystemTimeToTzSpecificLocalTime(nil, UTCSystemTime, LocalSystemTime) then
    RaiseLastOSError;
  Result := SystemTimeToDateTime(LocalSystemTime);
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T20:48:55.830

在 LU RD 和[此处发布的代码](https://stackoverflow.com/q/13178785/576719)的帮助下，我设法得到了我想要的东西，以防有人需要这样的东西，这是我的代码：

```
function GetDateFileModified(UTCTime : TFileTime{FindData : TWin32FindData}) : TDateTime;
// Return the file modified date as a string in local time
var
   GMTsystemTime : Windows.TSystemTime;
   LocalSysTime  : Windows.TSystemTime;
   TimeZone      : Windows._TIME_ZONE_INFORMATION;
begin
     Result  := 0;

     // Get Timezone Information
     GetTimeZoneInformation(TimeZone);

     // UTCTime := FindData.ftLastWriteTime;
     if FileTimeToSystemTime(UTCTime, GMTsystemTime) then
     begin
          SystemTimeToTzSpecificLocalTime(@TimeZone, GMTsystemTime, LocalSysTime);
          Result := SystemTimeToDateTime(LocalSysTime);
     end;
end; 
```

# ruby - Ruby 区分数字与字母

> ID：14091574
> 
> 赞同：2
> 
> 时间：2012-12-30T14:35:12.173
> 
> 标签：ruby, regex

我想将以下字符串拆分为字母：

```
1234B 
```

永远只有 4 个数字和一个字母。我只是想把它们分开。

这是我的尝试，我认为我的方法正确并且正则表达式与数字匹配，但我认为我的语法或我的正则表达式与我试图解决的问题无关。

```
"1234A".split(/^\d{4}/) 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-30T15:05:57.333

你想要什么不清楚，但这种情况的一般解决方案是：

```
"1234A".scan(/\d+|\D+/)
# => ["1234", "A"] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-30T14:38:01.503

如果*总是*有4 个数字和 1 个字母，则无需使用正则表达式来拆分字符串。只需这样做：

```
str = "1234A"
digits,letter = str[0..3],str[4] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T19:58:48.473

纯粹从将任何字符串分成 4 个组的角度来看它：

```
"1234A".scan(/.{1,4}/)
# => ["1234", "A"] 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-30T20:24:32.217

另一个无正则表达式版本：

```
str = "1234A"

str.chars.to_a.last # => "A"
str.chop            # => "1234" 
```

# android - 膨胀菜单选择的视图

> ID：14091577
> 
> 赞同：0
> 
> 时间：2012-12-30T14:35:39.287
> 
> 标签：android, android-view

我的主要视图显示得很好。

我的麻烦是当用户选择菜单按钮然后选择用户首选项图标时，我希望我的视图之一被夸大和可见。这个视图当然有我想要显示的选项供用户选择。

我遇到的困难是控制我的视图以设置可见性。我“相信”这是因为视图还没有膨胀，但我不确定让它膨胀的最佳方法。

此外，我应该将其作为 OnCreate 步骤的一部分进行，然后仅在需要时将其隐藏或膨胀。无论哪种方式，我如何放大视图？

TIA JB

很抱歉，我在这个问题上做得不好。这是一些代码：

我有一个名为 userpreferences 的相对布局。当用户选择菜单然后我想显示该视图的首选项按钮时，他们可以修改他们的设置。

```
public boolean onOptionsItemSelected(MenuItem item) 
{ 

    switch (item.getItemId()) 
    { 
        case R.id.menu_save:
    ..... code .....
        case R.id.menu_Preferences: 
            //Inflate view here so user can select options
            return true; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T14:47:32.127

编辑：问题改变了。

处理此问题的最佳方法可能只是开始一项新活动。

```
startActivity(new Intent(this, NewActvity.class)); 
```

会成功的。

* * *

你的问题很模糊......无论如何..

在正常活动中，您的活动将通过设置“setContentView(R.layout.your_layout);”知道您正在谈论的视图。在 OnCreate 中。

从那时起，您可以通过简单地执行每个示例来扩展任何视图：

```
TextView mTextView = (TextView) findViewById(R.id.my_textview); 
```

如果你正在构建一个稍微复杂的设置，你可能仍然需要先膨胀根视图。您可以通过以下示例执行此操作：

```
LayoutInflater inflater = (LayoutInflater) context .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

View root = inflater.inflate(R.layout.some_layout, null); 
```

从那时起，您可以再次使用该示例，但您可以这样做：

```
TextView mTextView = (TextView) root.findViewById(R.id.my_textview); 
```

对于您的其余问题：何时执行此操作取决于您想要做什么，但通常在 onCreate 中膨胀它们会很好。

一旦你“拥有”你的视图，你可以使用 mTextView.setVisibility(); 设置它的可见性。它将采用静态值 View.GONE、View.INVISIBLE 或 View.VISIBLE，因此您无需启动任何对象即可到达它们。

# python - 装饰重用另一个装饰器的实现

> ID：14091578
> 
> 赞同：0
> 
> 时间：2012-12-30T14:35:43.587
> 
> 标签：python, decorator, partial, code-reuse

我已经实现了一个`memoize`装饰器，它允许缓存一个函数。缓存键包括函数参数。类似地，`cached`装饰器缓存了一个函数，但忽略了参数。这是代码：

```
class ApplicationCache (Memcached): 
```

`make_key`方法：*UltraJSON*快速传递一个字符串，该字符串SHA512*散列*成一个清晰的十六进制摘要：

```
 def make_key (self, *args, **kwargs):

        kwargs.update (dict (enumerate (args)))
        string = ujson.encode (sorted (kwargs.items ()))
        hashed = hashlib.sha512 (string)

        return hashed.hexdigest () 
```

装饰器：由于`memoize`Python 2.x 吸收了完全限定的函数名，我只是强制用户提供一个合理的`name`：

```
 def memoize (self, name, timeout=None):
        assert name

        def decorator (fn):
            @functools.wraps (fn)
            def decorated (*args, **kwargs):

                key = self.make_key (name, *args, **kwargs)
                cached = self.get (key)

                if cached is None:
                    cached = fn (*args, **kwargs)
                    self.set (key, cached, timeout=timeout)

                return cached
            return decorated
        return decorator 
```

装饰者：它几乎是一个忽略参数的例外的`cached`逐字副本：`memoize``make_key`

```
 def cached (self, name, timeout=None):
        assert name

        def decorator (fn):
            @functools.wraps (fn)
            def decorated (*args, **kwargs):

                key = self.make_key (name) ## no args!
                cached = self.get (key)

                if cached is None:
                    cached = fn (*args, **kwargs)
                    self.set (key, cached, timeout=timeout)

                return cached
            return decorated
        return decorator 
```

现在，我的问题`cached`是，它要求重构：它应该使用`memoize`并且想法是消除`fn`（使用`functools.partial`可能？）的论点，例如：

```
 def cached (self, name, timeout=None):

        ## Reuse the more general `memoize` to cache a function,
        ## but only based on its name (ignoring the arguments) 
```

我实际上不确定我是否在这里过度使用 DRY 原则，以及是否可以重用，因为当前的实现*仅*`cached`在构建密钥时忽略参数（但显然*不是*在调用修饰函数时）。

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T14:46:18.360

我会摆脱`name`参数并提供 key 函数作为参数：

```
def memoize(self, timeout=None, keyfunc=self.make_key):
    ...
    key = keyfunc(function.__name__, *args, **kwargs)
    ... 
```

`cache`然后将变成：

```
def cache(self, timeout=None):
    return self.memoize(timeout, keyfunc=lambda f, *args, **kwargs: f.__name__) 
```**

# linux - 将目标文件转换为另一个架构

> ID：14091579
> 
> 赞同：4
> 
> 时间：2012-12-30T14:35:58.067
> 
> 标签：linux, x86, arm, cpu-architecture

我正在尝试将 Wifi-Dongle 与 Raspberry Pi 一起使用。加密狗的供应商提供了一个 Linux 驱动程序，我可以在 ARM 架构上成功编译，但是，驱动程序附带的一个目标文件是为 x86 架构预编译的，这导致链接器失败。

我知道再次编译那个（相当大的）文件会容易得多，但我无权访问源代码。

是否可以将该目标文件从 x86 架构转换为 ARM 架构？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-31T04:24:26.240

嗯，不，这在我看来是浪费时间。Wi-Fi 驱动程序很复杂，你说这个麻烦的目标文件是“大”的。翻译有很多痛苦，成功调试的机会微乎其微。此外，在这个目标文件和系统其余部分之间传递的任何参数都不会直接在 x86 和 ARM 之间转换。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-01T21:44:17.463

理论上，是的。在不访问源代码的情况下在真正的内核驱动程序上执行此操作将很困难。

如果您对目标文件进行了高质量的反汇编，并且目标文件中的代码“表现良好”（使用标准调用约定，没有自修改代码），那么您可以自动将 X86 指令转换为 arm 指令。但是，您可能没有高质量的拆卸。特别是，目标文件的某些部分可能无法正确分类为执行正常递归下降反汇编的代码或数据。如果您将数据误解为代码，它将被转换为 ARM 代码，而不是按原样复制，因此会有错误的值。这可能会导致代码无法正常工作。

即使你很幸运，并且可以正确分类目标文件中的所有地址，也有几个问题会让你大吃一惊：

1.  X86 上的调用约定与 ARM 上的调用约定不同。这意味着您必须识别与 X86 调用约定相关的模式并将它们更改为使用 ARM 调用约定。这是一个不平凡的重写。

2.  ARM 上的硬件接口与 X86 上的不同。您必须了解驱动程序的工作原理才能翻译代码。这将需要一个实质性的 X86 硬件可比性层，或者对驱动程序的工作方式进行逆向工程。如果您可以对驱动程序进行逆向工程，那么您不需要翻译它。你可以只写一个arm版本。

3.  ARM 和 X86 的内部内核 APIS 不同。您将必须了解这些差异以及如何在它们之间进行翻译。这可能不是微不足道的。

4.  Linux 内核使用“替代”机制，当代码首次加载到内核中时，它将动态重写机器代码。例如，在单处理器机器上，锁通常被替换为无操作以提高性能。在不支持它的机器上，诸如“popcnt”之类的指令被替换为函数调用等。它在内核中的使用非常普遍。这意味着根据上面给出的定义，文件中的代码很有可能不是“行为良好”。您必须要么验证目标文件不使用该机制，要么找到一种方法来转换它的使用。

5.  X86 使用与 ARM 不同的内存模型。为了“安全地”将 X86 代码转换为 ARM（不引入竞争条件），您必须在每次内存访问后引入内存栅栏。这将导致 ARM 芯片的性能非常糟糕。弄清楚何时需要引入内存围栏（而不是到处都这样做）是一个非常困难的问题。在这种分析中最成功的尝试需要自定义类型系统，而您在目标文件中没有这些系统。

您最好的选择（通往成功的最快途径）是尝试对相关目标文件的功能进行逆向工程，然后替换它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T14:19:18.417

没有合理的方法可以做到这一点。联系厂商，询问他们是否可以提供ARM代码中的相关代码，因为x86对你没有用。如果他们无法做到这一点，您将不得不寻找不同的硬件供应商[具有 ARM 版本或所有组件的完全开源]，或软件供应商 [假设有另一个的来源]。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T01:07:50.663

是的，您绝对可以进行静态二进制翻译。x86 反汇编虽然是痛苦的，但如果这是从高级别编译的，那么它就没有那么糟糕了。

真的值得努力吗？可以尝试使用指令集模拟器。您是否对使用的指令数量进行了分析？需要系统调用等？

到目前为止，您在拆卸方面已经走了多远？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-30T14:46:32.590

您可以通过安装 x86 GNU binutils 手动翻译 x86 程序集，并使用 objdump 反汇编目标文件。可能有些地址会有所不同，但应该是直截了当的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-01T01:20:04.873

也许该文件仅包含 wifi 固件的二进制转储？如果是这样，您不需要指令翻译，并且可以使用 objcopy 完成转换。

您可以使用 objdump -x file.o 并查看 obj 文件中是否有任何真正的可执行代码，或者它是否只是数据。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-02T15:14:40.030

如果您可以使用 Hex-Rays 反编译器访问 IDA，您可以（通过一些工作）将目标文件反编译为 C 代码，然后尝试为 ARM 重新编译它。

# java - 从数据库中搜索

> ID：14091581
> 
> 赞同：-1
> 
> 时间：2012-12-30T14:36:25.307
> 
> 标签：java, sql

```
private void btgetinvActionPerformed(java.awt.event.ActionEvent evt) {
    if(tf_rmid.getText().length()==11){
        JOptionPane.showMessageDialog(null,"REMITTANCE ID IS VALID!");
        try {
                DBUtil util = new DBUtil();
                Connection con = util.getConnection();
                Statement stmt = con.createStatement();
                ResultSet rs = stmt.executeQuery("select bk_det.rm_id from bk_det inner join bk_rep on bk_det.rm_id = bk_rep.rm_id WHERE rm_id = ?");
                String rm = tf_rmid.getText().trim();          
                stmt.setString(1, ""+(rm));
                while(rs.next()){
                   int i = rs.getString("RM ID");
                   String fn = rs.getString("First Name");
                   String ln = rs.getString("Last Name");
                   String title = rs.getString("Title");
                   String city = rs.getString("City");
                   txtFirstName.setText(fn);
                   txtLastName.setText(ln);
                   txtTitle.setText(title);
                   txtCity.setText(city);
                }
            } catch (Exception ex) {
                JOptionPane.showMessageDialog(null, ex.getMessage());
                Logger.getLogger(Demo.class.getName()).log(Level.SEVERE, null, ex);
            }
    }else{
       JOptionPane.showMessageDialog(null,"PLEASE ENTER VALID REMITTANCE ID!");
    } 
```

}

我正在尝试使用 select 语句从我的数据库中搜索值，但是当我试图获取值时？对于 where 选项我收到错误，我认为这是一个语法错误，任何人都可以帮忙吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T14:43:17.797

在执行查询之后将参数设置为 Statement 似乎有点奇怪。

还

int i = rs.getString("RM ID");

这不会编译（如果 rs 是 java.sql.ResultSet 实例）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T14:46:57.503

使用准备好的语句：

```
 String query = "select bk_det.rm_id from bk_det inner join bk_rep on bk_det.rm_id = bk_rep.rm_id WHERE rm_id = ?";
    try {
        PreparedStatement preps = con.prepareStatement(query);
        preps.setString(1, ""+(rm));
        preps.execute();
        ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T14:39:05.090

以此执行，

```
select bk_det.rm_id from bk_det inner join bk_rep 
on bk_det.rm_id = bk_rep.rm_id WHERE bk_det.rm_id = ? 
```

可能您在 where 子句中缺少表名

# c++ - C++ 中的产品激活？

> ID：14091582
> 
> 赞同：3
> 
> 时间：2012-12-30T14:36:36.450
> 
> 标签：c++, security, activation

我正在寻找一个商业实力的系统，它可以为我提供尽可能方便最终用户的产品激活技术。到目前为止，我一直在使用可以想象的最简单的系统，用户可以根据他们的名字获得一个可以无限次使用的密钥。这比其他任何事情都更具象征意义，因为用户可以自由地传递他们的密钥，他们这样做了。所以我想知道是否有针对经过良好测试和广泛使用并在 Win32 上与 C++ 一起使用**但未破解**的系统的建议？我不想提出自制的解决方案，因为我不是安全专家，也没有时间了解它的来龙去脉。

# scala - 使用 Dispatch 执行简单的 HTTP GET

> ID：14091583
> 
> 赞同：4
> 
> 时间：2012-12-30T14:36:38.507
> 
> 标签：scala, http, scala-dispatch

以下是浏览器（例如 Firefox）中的有效查询：

```
http://www.freesound.org/api/sounds/search/?q=barking&api_key=074c0b328aea46adb3ee76f6918f8fae 
```

生成一个 JSON 文档：

```
{
    "num_results": 610, 
    "sounds": [
        {
            "analysis_stats": "http://www.freesound.org/api/sounds/115536/analysis/", 
            "analysis_frames": "http://www.freesound.org/data/analysis/115/115536_1956076_frames.json", 
            "preview-hq-mp3": "http://www.freesound.org/data/previews/115/115536_1956076-hq.mp3", 
            "original_filename": "Two Barks.wav", 
            "tags": [
                "animal", 
                "bark", 
                "barking", 
                "dog", 
                "effects", 
 ... 
```

我正在尝试使用[Dispatch 0.9.4](http://dispatch.databinder.net/Dispatch.html)执行此查询。这是一个`build.sbt`：

```
scalaVersion := "2.10.0"

libraryDependencies += "net.databinder.dispatch" %% "dispatch-core" % "0.9.4" 
```

从 开始`sbt console`，我执行以下操作：

```
import dispatch._
val q = url("http://www.freesound.org/api/sounds/search")
   .addQueryParameter("q", "barking")
   .addQueryParameter("api_key", "074c0b328aea46adb3ee76f6918f8fae")
val res = Http(q OK as.String) 
```

但承诺总是以以下错误完成：

```
res0: dispatch.Promise[String] = Promise(!Unexpected response status: 301!) 
```

那么我做错了什么？[这是 API 文档](http://freesound.org/docs/api/resources.html)，以防万一。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-30T15:07:14.623

`configure`您可以使用执行器上的方法启用重定向`Http`：

```
Http.configure(_ setFollowRedirects true)(q OK as.String) 
```

您也可以手动`Location`退出`301`响应，但这会不太方便。

# javascript - 在我的应用程序中显示 Facebook 的“从照片中选择”对话框？

> ID：14091590
> 
> 赞同：1
> 
> 时间：2012-12-30T14:37:24.950
> 
> 标签：javascript, facebook

我正在为 Facebook 编写一个应用程序，允许用户选择他们想要与他们的帖子相关联的照片。有没有办法在我的应用程序中使用 Facebook 的“从照片中选择”对话框？

我查看了 JavaScript SDK 并没有看到它。TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T15:02:04.990

您需要访问图形 API 并获取用户的照片，然后自己构建 UI。我推荐 jQuery UI 对话框用于这些用途。它易于使用且看起来很棒。

# c - xcode 不编译 c 源代码

> ID：14091592
> 
> 赞同：0
> 
> 时间：2012-12-30T14:37:51.847
> 
> 标签：c, xcode

我想[从 Rosettacode 编译示例 c 代码](http://rosettacode.org/wiki/Matrix_multiplication)。我想从我的 iOS 项目中调整它来做一个简单的矩阵乘法，其中两个矩阵之一只是一行，而不是一行和一列。Rosettacode 如下。

```
#include <stdio.h>
#include <stdlib.h>

/* Make the data structure self-contained.  Element at row i and col j
   is x[i * w + j].  More often than not, though,  you might want
   to represent a matrix some other way */
typedef struct { int h, w; double *x;} matrix_t, *matrix;

inline double dot(double *a, double *b, int len, int step)
{
    double r = 0;
    while (len--) {
        r += *a++ * *b;
        b += step;
    }
    return r;
}

matrix mat_new(int h, int w)
{
    matrix r = malloc(sizeof(matrix) + sizeof(double) * w * h);
    r->h = h, r->w = w;
    r->x = (double*)(r + 1);
    return r;
}

matrix mat_mul(matrix a, matrix b)
{
    matrix r;
    double *p, *pa;
    int i, j;
    if (a->w != b->h) return 0;

    r = mat_new(a->h, b->w);
    p = r->x;
    for (pa = a->x, i = 0; i < a->h; i++, pa += a->w)
        for (j = 0; j < b->w; j++)
            *p++ = dot(pa, b->x + j, a->w, b->w);
    return r;
}

void mat_show(matrix a)
{
    int i, j;
    double *p = a->x;
    for (i = 0; i < a->h; i++, putchar('\n'))
        for (j = 0; j < a->w; j++)
            printf("\t%7.3f", *p++);
    putchar('\n');
}

int main()
{
    double da[] = { 1, 1,  1,   1,
            2, 4,  8,  16,
            3, 9, 27,  81,
            4,16, 64, 256   };
    double db[] = {     4.0,   -3.0,  4.0/3,
            -13.0/3, 19.0/4, -7.0/3,
              3.0/2,   -2.0,  7.0/6,
             -1.0/6,  1.0/4, -1.0/6};

    matrix_t a = { 4, 4, da }, b = { 4, 3, db };
    matrix c = mat_mul(&a, &b);

    /* mat_show(&a), mat_show(&b); */
    mat_show(c);
    /* free(c) */
    return 0;
} 
```

[我在这里找到了一些指示，](https://stackoverflow.com/questions/11696588/code-in-objective-c-2008-does-not-compile)但我遇到了编译错误，需要更多指导。

xcode 4.5.2 项目目前适用于 Mac，但最终将成为 iOS 项目的一部分。

我得到的编译错误如下。

```
Undefined symbols for architecture x86_64:
  "_dot", referenced from:
      _mat_mul in code.o
ld: symbol(s) not found for architecture x86_64 
```

我已将代码放在一个名为的文件中，该文件`code.m`具有自己的功能`main()`，我想知道这是否与文件`main.m's` `main()`功能冲突，例如？

另外，我想知道如何实际查看我认为需要`NSLog`在代码中使用的结果演示。

顺便说一句，在数组 db[] 中，使用的数据符号`/`是什么意思？它是否表示有理分数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T12:56:54.977

在内联函数声明之前添加关键字`static`，编译器应该会更快乐。

# vim - 无法在 vim 中使用带有合成的谷歌闭包

> ID：14091596
> 
> 赞同：3
> 
> 时间：2012-12-30T14:38:27.743
> 
> 标签：vim, syntastic

我在我的 vimrc 文件中包含以下行来运行 syntastic 插件。[关闭]

```
let g:syntastic_mode_map = { 'mode': 'active',
                           \ 'active_filetypes': [],
                           \ 'passive_filetypes': ['html'] }

" To enable this plugin, edit the .vimrc like this:
let g:syntastic_javascript_checker = "closurecompiler" 
" and set the path to the Google Closure Compiler:
   let g:syntastic_javascript_closure_compiler_path = '~/.vim/closure-compier/compiler.jar'

 let g:syntastic_enable_signs=1
 let g:syntastic_auto_loc_list=1 
```

但它似乎不起作用，我尝试调试closurecompiler.vim脚本。在它里面函数SyntaxCheckers_javascript_GetLocList（）有makeprg变量，当我回显它打印以下行的变量时

```
 java -jar ~/.vim/closure/closure.jar --js 'workspace/abc.js' 
```

但没有显示任何错误，但是如果我在控制台中输入同一行，我会收到所有错误我在设置中做错了什么。[你可以在github](https://github.com/devendra98602/myvim)上看到我的设置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T15:59:30.403

我想我发现了你的错误。我刚刚[通过 github 下载了您的设置，](https://github.com/devendra98602/myvim)而这一行在您的 .vimrc 文件中有错字：

```
let g:syntastic_javascript_closure_compiler_path = '~/.vim/closure-compier/compiler.jar' 
```

当我将此行更改为：

```
let g:syntastic_javascript_closure_compiler_path = '~/.vim/closure-compiler/compiler.jar' 
```

并启动 gvim abc.js 我得到了这个：

   ![vim 的 ss w/abc.js 和闭包](../Images/1c8ff32af7126ccd72f935bd92597eca.png)

似乎现在正在工作。

# java - 查询 SVNKit 获取特定文件的日志信息

> ID：14091598
> 
> 赞同：0
> 
> 时间：2012-12-30T14:38:47.200
> 
> 标签：java, svn, svnkit

我想查询我们的 SVN 服务器以返回有关**特定**文件的日志条目。我试图做的事情：

```
SVNRepositoryFactoryImpl.setup();
SVNURL svnURL = SVNURL.parseURIDecoded("svn://our-server:3692/branches/hotfixes/3.5.12345/");
SVNRepository repository = SVNRepositoryFactory.create(svnURL);
ISVNAuthenticationManager authManager = SVNWCUtil.createDefaultAuthenticationManager("anonymous", "anonymous");
repository.setAuthenticationManager(authManager);   
Collection logEntries = repository.log(new String[] { "/src/java/testsProject/depends.list" }, null, 0, -1, true, false); 
```

我得到这个例外：

> org.tmatesoft.svn.core.SVNException: svn: File not found: revision 126600, path '/src' at org.tmatesoft.svn.core.internal.wc.SVNErrorManager.error(SVNErrorManager.java:64‌​) at org .tmatesoft.svn.core.internal.wc.SVNErrorManager.error(SVNErrorManager.java:51‌​)

我究竟做错了什么 ？

# javascript - 如何使提交按钮发布表单的帖子，但将结果返回到元素 HTML 中？

> ID：14091602
> 
> 赞同：1
> 
> 时间：2012-12-30T14:39:10.740
> 
> 标签：javascript, jquery

我正在开发一个单页 Web 应用程序。我添加了以下登录代码：

```
$('#loginLink, #registerLink')
   .click(function () {
      var $link = $(this);
      var href = $link.attr('data-href');
      $('#article').load(href);
   }
   return false;
}); 
```

这有效并使用以下 HTML 填充 #article 部分。请注意，我删除了这个问题的一些代码：

```
<form action="/User/Account/Login" method="post" novalidate="novalidate">
...
note there's client side validation on the page but I just don't show it here
...
<ol>
   <li>
      <input id="UserName" name="UserName" type="text" value="">
   </li>
</ol>
<input type="submit" value="Log in">
</form> 
```

如果我单击提交，当表单出现时，它会向浏览器发送一个请求，并返回一个新页面。有没有办法我仍然可以保留提交操作（用于我页面上的客户端验证）但让提交结果带回一个页面，该页面再次显示在#article 部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T14:45:37.503

您正在寻找`event.preventDefault()`避免发送表单和重新加载整个网页。看到[这个小提琴](http://jsfiddle.net/F3BgK/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T14:46:57.050

> 有没有办法我仍然可以保留提交操作（用于我页面上的客户端验证）但让提交结果带回一个页面，该页面再次显示在#article 部分？

不确定我是否理解正确，但如果您想加载文章内容而不在提交时重新刷新页面，您可以绑定到`submit`事件并执行类似于以下的 ajax 调用：

> *我`on`在下面的示例中使用了仅在 jQuery 1.7 中添加的示例。如果您使用的是 jQuery 1.6.x 或更低版本，则可以`bind`改用。*

```
$("form").on("submit", function() {
    var $form = $(this);

    // if there are validation errors do not continue.
    if(!$form.valid()){
        return false;
    }

    // get the form data
    var myData = $form.serialize();

    // get the url to post to from the form's action attribute.
    var myUrl = $form.attr("action");

    // execute the post
    $.ajax({
        url: myUrl,
        data: myData 
        success: function(data) {
            // on success, write the returned article content into the article element
            $('#article').html(data);
        }
    });

    return false;
});​ 
```

# jquery - 使用 Twitter Bootstrap 的基于网格和堆栈的布局

> ID：14091605
> 
> 赞同：2
> 
> 时间：2012-12-30T14:39:34.983
> 
> 标签：jquery, templates, backbone.js, twitter-bootstrap, underscore.js

有没有人尝试在 twitter bootstrap 中结合 Backbone.js Collection 实现 Grid、Stack 布局？

![网格到列表](../Images/1e65e0ae7f5987d681d914319adf57b0.png)

**演示：（没有引导）**

[http://vandelaydesign.com/demos/list-grid-view/index.html](http://vandelaydesign.com/demos/list-grid-view/index.html)

列表布局是东方实现的，集合中的每个模型都有以下标记。

```
<div class="row">
 <div class="span12">
 </div>
</div> 
```

即使将一行中的模型数量设置为固定，网格布局也似乎更加复杂。假设我在这里每行渲染 4 个模型是所需的标记

```
<div class="row">
  <div class="span3"></div>
  <div class="span3"></div>
  <div class="span3"></div>
  <div class="span3"></div>
</div> 
```

生成上述标记非常困难，因为我必须`4 div's with class span3`将`<div class="row">`.

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T11:50:27.647

您需要使用 CSS 伪类`:nth-child`来实现这一点。这是您的 HTML：

```
<div class="row column3">
    <div class="span3"></div>
    <div class="span3"></div>
    <div class="span3"></div>
    <div class="span3"></div>
</div> 
```

唯一改变的是`column3`类的添加。这是您需要的 CSS：

```
.column3 > div:nth-child(3n+4) {
    clear: left;
} 
```

这应该告诉每个第 3 个元素之后的每个元素都清除到下一行，从而为您提供 3 列布局。

# parsing - 检查语法歧义

> ID：14091609
> 
> 赞同：1
> 
> 时间：2012-12-30T14:40:10.920
> 
> 标签：parsing, compiler-construction, grammar

以下是我试图查看它是否模棱两可的一段语法的摘录。

```
Y->b
Y->Z
Z->bW
W->d
W->ϵ 
```

当我计算第一组语法时，我偶然发现了第一个 Y 的这种不规则性。

```
First(Y) = {b,First(Z)}
First of Z = b so I have the set First(Y)={b,b}. 
```

我想知道的是足以证明给出这个证据的语法是否模棱两可。或者应该设置为`First(Y) = {b}`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T14:51:34.417

要证明语法不明确，您只需要证明至少有两种不同的方法可以达到结果。

考虑到您的示例，**并考虑到您的 edit**，您确实有一个模棱两可的语法，因为您可以通过以下方式得出表达式`b`：

```
Y -> b
Y -> Z
Z -> bW
Y -> d
W -> ϵ 
```

第一种方式：

```
Y -> b 
```

第二种方式：

```
Y -> Z
Y -> Z -> bW
Y -> Z -> bW -> bϵ
Y -> Z -> bW -> bϵ -> b 
```

这是一个模棱两可的语法。

# eclipse - 如何在 Eclipse 中隐藏侧边栏警告“未使用局部变量的值”？

> ID：14091613
> 
> 赞同：7
> 
> 时间：2012-12-30T14:40:32.760
> 
> 标签：eclipse

“未使用局部变量的值”警告真的很烦人，因为它在边栏中隐藏了断点。有问题的变量也会加下划线以突出显示此警告，因此侧边栏图标相当多余。

那么有没有办法在侧边栏中隐藏这个警告呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-30T14:48:45.917

*   **窗口**>**首选项**
*   **Java** >**编译器**>**错误/警告**
*   打开**“不必要的代码”**组
*   将**“未使用局部变量的值”**从**“警告”**更改为**“忽略”**

这将需要一个新的构建，它已经完成。

当然，您必须意识到您忽略了该选项并可能增加内存消耗并在代码中留下混乱。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-03-16T14:07:10.460

@SuppressWarnings("未使用")

在 main() 之前添加上面的代码行它将抑制整个程序中的所有此类警告。例如

```
public class CLineInput 
{
    @SuppressWarnings("unused")
    public static void main(String[] args) 
    { 
```

您也可以将其添加到创建警告的变量声明的正上方，这仅适用于该特定变量的警告，而不适用于整个程序。例如

```
 public class Error4 
{

    public static void main(String[] args) 
    {
        int a[] = {5,10};
        int b = 5;
        try
        {
            @SuppressWarnings("unused")     // It will hide the warning, The value of the local variable x is not used.
            int x = a[2] / b - a[1];
        }
        catch (ArithmeticException e)
        {
            System.out.println ("Division by zero");
        }
        catch(ArrayIndexOutOfBoundsException e)
        {
            System.out.println("Array index error");
        }
        catch(ArrayStoreException e)
        {
            System.out.println("Wrong data type");
        }
        int y = a[1] / a[0];
        System.out.println("y = " + y);

    }

} 
```

# cocos2d-iphone - COCOS2D 粒子效果碰撞

> ID：14091618
> 
> 赞同：3
> 
> 时间：2012-12-30T14:41:34.867
> 
> 标签：cocos2d-iphone, particles

我不知道为什么它不起作用。粒子效果位于屏幕左下角，而不是它碰撞的部分。

在 .H 文件中

```
 CCParticleExplosion *starsExplosion; 
```

在.M文件下碰撞

```
 if(distance < 30) {
        starsCollected += 100;
        [_stars removeObject:stars];

        //Stars Explosion
        //starsExplosion.position = ccp(stars.contentSize.width, stars.contentSize.height);
        starsExplosion = [[CCParticleExplosion alloc] init];
        starsExplosion.position = ccp(stars.position.y, stars.position.x);
        starsExplosion.texture = [[CCTextureCache sharedTextureCache] addImage:@"star-icon.png"];

        [self addChild:starsExplosion];

        [self removeChild:stars cleanup:YES];
    } 
```

我尝试使用`ContentSize.Width`and `height =`，没有运气。尝试使用`Position.x`and `y =`，又是运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T15:16:10.840

您切换了 x 和 y 坐标。我知道，很难在您自己的代码中看到错误，您当时可能只是没有清楚地思考。

改变这个：

```
starsExplosion.position = ccp(stars.position.y, stars.position.x); 
```

对此：

```
starsExplosion.position = ccp(stars.position.x, stars.position.y); 
```

# image - 使用 pHash 搜索类似图像的解决方案

> ID：14091623
> 
> 赞同：1
> 
> 时间：2012-12-30T14:42:22.837
> 
> 标签：image, search, phash

大量图像存储在数据库中。我用 pHash 计算每个图像的散列并将散列值存储到数据库中。

如何搜索已知图像的相似图像？我需要遍历存储在数据库中的每张图像并使用 pHash 计算距离吗？

有没有有效的方法？

任何想法？

# delphi - 如何启用普通和 UAC 提升权限应用程序之间的拖放

> ID：14091626
> 
> 赞同：10
> 
> 时间：2012-12-30T14:42:44.843
> 
> 标签：delphi, windows-7, drag-and-drop, delphi-2010, uac

我已经阅读了有关如何将资源管理器中的拖放文件（通常在没有额外管理员权限的情况下运行）与 UAC 提升的应用程序一起使用的[答案。](https://stackoverflow.com/a/4859680/1165880)

有人会认为将权限提升到 EXE 会给予**更多的**权限，但 MS 设法给予*更少的*权限并同时破坏拖放功能！

无论如何，虽然赞赏，但 Arnaud Bouchez 先生（禁用 UIPI - 用户界面特权隔离）给出的答案似乎有点*骇人听闻*，**我的问题是：是否有推荐的方法以编程方式启用拖放而不弄乱用户的注册表**

我正在考虑在清单或类似的东西中请求“拖放能力”。

**注意：我主要在 Windows 7 上遇到这个问题，但我认为这个问题与从 Vista 开始的所有 Windows 版本有关**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-30T15:34:00.370

您可以通过使用来更改特权应用程序窗口上的 UIPI 过滤器，[`ChangeWindowMessageFilterEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd388202%28v=vs.85%29.aspx)以便接收文件拖放相关消息。`WM_DROPFILES`是最明显的一个，`WM_COPYDATA`是另一个。还涉及一个未记录的消息：`$0049`，您会发现有时它被称为`WM_COPYGLOBALDATA`. 事实上，我相信对最后一个的搜索会发现一些与您的问题相关的代码示例。

# c++ - 二值和灰度值图像的腐蚀/膨胀

> ID：14091629
> 
> 赞同：1
> 
> 时间：2012-12-30T14:43:48.000
> 
> 标签：c++, mathematical-morphology

我们必须首先实现 Erode 算法，该算法必须适用于二进制和灰度图像。

这是我们的代码：不完整

```
#include <iostream>
#include <limits>
#include "ErosionFilter.h"

/* Constructor. */
ErosionFilter::ErosionFilter()
{
 // Set structure element to NULL.
 m_StructureElement = NULL;
}

/* Destructor. */
ErosionFilter::~ErosionFilter()
{
 // Nothing to do here.
}

/* Set the structure element for the filter. */
void ErosionFilter::SetStructureElement(  StructureElement* structureElement )
{
  m_StructureElement = structureElement;
}

/* Execute the Erosion filter. */
bool ErosionFilter::Execute()
{
 // Check if structure element is set.
 if( m_StructureElement == NULL )
 {
  std::cout << "Error: No structure element set!" << std::endl;
  return false;
 }

// First, create a valid output image.
// This fails, if no valid input image is available.
if( !CreateOutputImage() )
{
 return false;
}

// We define few constants required for the filtering. It is more efficient to
// use constants instead of calling the member functions in each iteration.
const int kernelHalfSizeX = m_StructureElement->GetHalfSizeX();
const int kernelHalfSizeY = m_StructureElement->GetHalfSizeY();

// We cast the size to integer to avoid signed/unsigned warnings in the boundary checking.
const int imageSizeX = static_cast<int> ( m_InputImage->GetSizeX() );
const int imageSizeY = static_cast<int> ( m_InputImage->GetSizeY() );

// Iterate over all pixel coordinates.
for( int y = 0; y < imageSizeY; y++ )
{
 for( int x = 0; x < imageSizeX; x++ )
 {
  // Die Koordinaten des aktuellen Pixels sind jetzt gegeben als (x,y).

  // Iterate over all neighborhood pixel coordinates.
  for( int m = -kernelHalfSizeY; m <= kernelHalfSizeY; m++ )
  {
    // Compute the pixel y coordinate for this kernel row.
    int j = y + m;

    // Apply reflected boundary conditions if coordinate is outside the image.
    if( j < 0 )
    {
      j = -j - 1;
    }
    else if( j >= imageSizeY )
    {
      j = 2 * imageSizeY - j - 1;
    }

    for( int k = -kernelHalfSizeX; k <= kernelHalfSizeX; k++ )
    {
      // Compute the pixel x coordinate for this kernel column.
      int i = x + k;

      // Apply reflected boundary conditions if coordinate is outside the image.
      if( i < 0 )
      {
        i = -i - 1;
      }
      else if( i >= imageSizeX )
      {
        i = 2 * imageSizeX - i - 1;
      }

      // Die Koordinaten des Punktes in der Nachbarschaft des aktuellen Pixels (x,y)
      // sind jetzt gegeben als (i,j).
      // Die korrespondierende Position in der Maske ist (k,m).
      // Beachten Sie, dass auf die Koordinaten (i,j) schon die Randbedingungen
      // angewendet wurden.

    }
  }
  // You have to set the grayvalues for the output image.
  //for grayvalue images use min

  //for binary use logic AND for questioning if there are in the set

 }
}

return true;
} 
```

我的问题是我是否可以对这两种类型使用 min max 运算符？或者我应该提出一个案例问题，如果当前图像是二进制然后处理图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T16:13:04.047

所以我实现了其余的，但它没有做任何侵蚀。也许我使用的`min`功能不正确，这里是更新的部分：

```
 min = m_InputImage->GetPixel(i,j);
          //max = m_InputImage->GetPixel(i,j);
          //printf("Min: %d\nMax: %d\nm: %d\nk: %d\n", min, max, m, k);

        }
      }
      // Sie muessen die Grauwerte des Ausgabebildes setzen.
      //für grauwert bilder verwende min

      //für binär verwende logisches UND zur abfrage ob in menge enthalten
      //printf("min: %d\n", min);
      m_OutputImage->SetPixel(x,y,min);
    }
  }

  return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T14:52:47.093

min/max 是最通用的公式（因为对于 {0, 1}，min 等效于 AND，max 等效于 OR）。所以它适用于二进制和灰度。但是，对于二进制图像，有一些专门的算法可以更快地执行。

如果您想编写更少的代码，请使用 min/max。如果您真正关注二进制图像，请使用 if 分支并搜索快速的二进制形态实现（并且可能还会放弃对灰度的支持——您最终真的会使用它吗？）

# xml - XSL：为什么输出缩进不起作用？

> ID：14091633
> 
> 赞同：2
> 
> 时间：2012-12-30T14:44:20.270
> 
> 标签：xml, xslt

这是我的 XSL 电子表格：

```
<xsl:stylesheet version="2.0" 
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output indent="yes" method="xml" encoding="utf-8" omit-xml-declaration="yes"/>

    <xsl:template match="/">
        <xsl:element name="outer">
               <xsl:apply-templates select="elements"/>
        </xsl:element>
    </xsl:template>

    <xsl:template match="element1">
       <xsl:element name="output1">
            <xsl:element name="output1.5" />
       </xsl:element>
    </xsl:template> 

    <xsl:template match="element2">
       <xsl:element name="output2"/>
    </xsl:template> 

</xsl:stylesheet> 
```

输入 XML：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<elements>
    <element1>value1</element1>
    <element2>value2</element2>
</elements> 
```

输出不根据输出 XML 层次结构缩进。这是实际的输出（注意 output1.5 和 output1 没有正确缩进）：

```
<outer>
    <output1>
<output1.5/>
</output1>
    <output2/>
</outer> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T13:12:07.920

您所看到的实际上是根本不缩进的结果；缩进的两行是处理用于缩进源文档的空白的结果。

如果要添加`<xsl:strip-space elements="*" />`到样式表中，则输出中根本没有缩进。

缩进实际上并不由 XSLT 处理器控制，它由将输出序列化为字符串的任何东西控制，尽管这通常由相同的方法调用完成。我不能确定为什么该`xsl:output`指令没有完成这项工作，但您可以将其添加到您的 java 中：

```
transformer.setOutputProperty(OutputKeys.INDENT, "yes"); 
```

并且可选地，如果你想设置多少缩进：

```
transformer.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "2"); 
```

我不能肯定地说，但完全有可能问题是没有设置缩进量，并且使用的是 0。

# python - 通过最大值获取dict键

> ID：14091636
> 
> 赞同：33
> 
> 时间：2012-12-30T14:44:55.733
> 
> 标签：python, dictionary, counter

我正在尝试获取其值是所有 dict 值中最大值的 dict 键。

我找到了两种方法，都不够优雅。

```
d= {'a':2,'b':5,'c':3}
# 1st way
print [k for k in d.keys() if d[k] == max(d.values())][0]
# 2nd way
print Counter(d).most_common(1)[0][0] 
```

有更好的方法吗？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-12-30T14:45:48.440

使用`key`参数`max()`：

```
max(d, key=d.get) 
```

演示：

```
>>> d= {'a':2,'b':5,'c':3}
>>> max(d, key=d.get)
'b' 
```

该`key`参数接受一个函数，对于迭代中的每个条目，它将找到该`key`函数为其返回最大值的条目。

# c++ - 我怎么知道鼠标是否在小部件上？

> ID：14091642
> 
> 赞同：9
> 
> 时间：2012-12-30T14:45:21.607
> 
> 标签：c++, qt, pyqt, pyside, qwidget

*我对 Qt（PyQt - PySide）相当陌生。
我正在尝试构建一个自定义小部件，它是一个菜单。然而，我已经走上了一条艰难的道路，我似乎无法理清自己的问题。我已经阅读了文档，但我认为没有鼠标状态可以验证以确定鼠标光标是否在给定的小部件上。*

我在 a 上调​​用一个`mouseReleaseEvent`函数`QWidget`。

前任。：

```
def mouseReleaseEvent(self, e): 
```

触发此事件时，我必须知道鼠标实际上是在小部件上方还是在它之外（触发此事件的小部件）。

```
 if mouseCursorOverSelf == True:
        # do something .. 
```

我怎样才能做到这一点？我需要做什么？

非常感谢你！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-30T15:51:43.913

如果您想跟踪鼠标何时进入或离开小部件，您可以使用以下内容：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtCore, QtGui

class mainwindow(QtGui.QWidget):
    def __init__(self, parent=None):
        super(mainwindow, self).__init__(parent)

    def enterEvent(self, event):
        print "Mouse Entered"
        return super(mainwindow, self).enterEvent(event)

    def leaveEvent(self, event):
        print "Mouse Left"
        return super(mainwindow, self).enterEvent(event)

if __name__ == "__main__":
    import sys

    app  = QtGui.QApplication(sys.argv)
    main = mainwindow()
    main.show()
    sys.exit(app.exec_()) 
```

如果您只想检查鼠标是否在小部件上，您可以使用该`QWidget::underMouse ()`功能：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtCore, QtGui

class mainwindow(QtGui.QWidget):
    def __init__(self, parent=None):
        super(mainwindow, self).__init__(parent)

        self.button = QtGui.QPushButton("Check Mouse in 3 seconds")
        self.button.clicked.connect(self.on_button_clicked)

        self.layout = QtGui.QHBoxLayout(self)
        self.layout.addWidget(self.button)

    def mouseReleaseEvent(self, event):  
        if self.underMouse():
            print "Do something"

        return super(mainwindow, self).mouseReleaseEvent(event)

    @QtCore.pyqtSlot()
    def on_button_clicked(self):    
        QtCore.QTimer.singleShot(3000, self.checkMouse)

    def checkMouse(self):
        print "Under Mouse: {0}".format(self.underMouse())

if __name__ == "__main__":
    import sys

    app  = QtGui.QApplication(sys.argv)
    main = mainwindow()
    main.show()
    sys.exit(app.exec_()) 
```

另一种方法是检查鼠标的位置是否在小部件的内部几何图形内：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtCore, QtGui

class mainwindow(QtGui.QWidget):
    def __init__(self, parent=None):
        super(mainwindow, self).__init__(parent)

        self.setMouseTracking(True)

    def mouseReleaseEvent(self, event):  
        posMouse =  event.pos()
        if self.rect().contains(posMouse):
            print "Under Mouse"

        return super(mainwindow, self).mouseReleaseEvent(event)

if __name__ == "__main__":
    import sys

    app  = QtGui.QApplication(sys.argv)
    main = mainwindow()
    main.show()
    main.resize(200, 200)
    sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-04-26T04:39:43.260

underMouse() 应该用来确定你的鼠标是否在一个小部件上。
`Usage: widget.underMouse()`
[http://pyqt.sourceforge.net/Docs/PyQt4/qwidget.html#underMouse](http://pyqt.sourceforge.net/Docs/PyQt4/qwidget.html#underMouse)

# php - 调用某些运行 bash 脚本的 php 脚本函数

> ID：14091648
> 
> 赞同：2
> 
> 时间：2012-12-30T14:46:31.123
> 
> 标签：php, bash, shell

我有一个 php 脚本（functions.inc）：

```
<?php  
function exec_mount_secured_bucket(){  
exec("/ilantest/testscript.sh");  
}  
?> 
```

我想从 shell 内部运行该函数，通常使用 php 运行脚本我会这样做：
php function.inc
但我想从该函数文件中调用某个函数。

怎么做 ？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T14:52:07.140

为此，您可以使用[命令行开关：](http://php.net/manual/en/features.commandline.options.php)

```
--process-end code
-E code        Run PHP code after processing all input lines 
```

这应该做的工作：

```
php -E 'exec_mount_secured_bucket();' function.inc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T14:50:51.323

创建一个像这样的文件：

启动器.php

```
<?php
    include 'functions.inc';
    exec_mount_secured_bucket(); 
```

然后在你的 bash 脚本中：

```
php launcher.php 
```

# php - Eclipse中charset为utf-8，部署在服务器上报us-ascii

> ID：14091650
> 
> 赞同：1
> 
> 时间：2012-12-30T14:46:41.060
> 
> 标签：php, eclipse, utf-8, character-encoding, ascii

和---关联[我之前遇到的](https://stackoverflow.com/questions/14007660/jquery-jsonp-call-towards-php-backend-no-http-response)“幽灵般”错误的问题，建议检查我的文件的字符编码是否正确。

有问题的文件是使用 Eclipse PDT 插件创建的 PHP 文件。该文件被创建为 UTF-8，Eclipse 仍将其报告为 UTF-8 编码。但是，当我在我的 Ubuntu / Apache2 生产服务器上部署文件时，它由

```
$ file -bi 
```

命令具有 US-ASCII 编码。但我可以打开并读取服务器上的精细文件（例如使用 Nano）并且所有字符都正确显示（没有？或其他替代符号）。

我使用 scp 或 sftp 以与其他几个相同的方式传输文件。

所以我的问题是：是`$ file -bi`可靠的还是我应该忽略它，因为文件可以打开并正常读取？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T15:02:15.617

该`file`命令工作正常。它会告诉你它所能找到的最好的东西。这意味着，如果您的 PHP 文件没有 BOM 并且仅包含与 US-ASCII 匹配的字节，它将报告它。

但是，这并不意味着您的 Eclipse 配置错误。US-ASCII 是 UTF-8 的子集，UTF-8 被设计为向后兼容它。

因此，只有当 PHP 文件中有一个不能用 US-ASCII 表示的字符时，该`file`命令才能检测到该字符。

请记住，字符编码始终是您在数据*旁边*拥有的东西。如果你失去了这种关系并且你不知道编码，它通常会被破坏，因为你无法猜测编码。

`file`命令示例显示了这一点。该命令必须猜测（尽管有任何其他信息，它只有文件形式的数据），因此会告诉你它的最佳猜测（这很好）。但是，不要指望它会以不同的方式工作。

所以`file`命令很好，只是不要把错误的期望放在它上面。为工作使用正确的工具。Fileinfo 提供信息，不具有约束力。在 Eclipse 中，您可以指定保存文件的编码。那是有约束力的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T14:51:20.040

file 命令“嗅探”您的文件。如果它只包含 ISO-646 字符（ISO-646 是 UTF-8 的子集），文件将报告“ASCII”。

file 命令与 Apache 服务器如何提供文件几乎完全无关。问题是，Apache 提供什么内容类型的标头？您需要使用浏览器中的开发工具或其他工具才能查看。如果该标头错误，则需要修复 Apache 配置。

# mysql - 如何在更新的行上查询插入？

> ID：14091654
> 
> 赞同：0
> 
> 时间：2012-12-30T14:47:02.360
> 
> 标签：mysql, sql, sql-update

嘿，我正在尝试更新一个表并创建一个插入行到另一个表。

我有这个更新查询：

```
UPDATE logs_month SET status ='1'
WHERE DATE_FORMAT(month,"%m/%y") = '11/12' 
```

我希望它是这样的：

```
UPDATE logs_month SET status ='1',
(INSERT INTO some_table (columns) values (values from the updated row))
WHERE DATE_FORMAT(month,"%m/%y") = '11/12' 
```

如何才能做到这一点？

我不想使用 2 个查询，因为此更新每月可以进行几次，并且我只想插入当前更新的行以防止重复而不使用唯一索引。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T14:50:55.943

```
UPDATE logs_month SET status ='1'
WHERE DATE_FORMAT(month,"%m/%y") = '11/12';
COMMIT;
INSERT INTO some_table (columns) values (select columns
from logs_month where DATE_FORMAT(month,"%m/%y") = '11/12'; 
```

您也可以使用**TRIGGER**，

```
DELIMITER $$
CREATE TRIGGER `logs_m` 
AFTER UPDATE ON `logs_month`
FOR EACH ROW 
BEGIN
    IF NEW.status=1 THEN
    INSERT INTO some_table (field) values (NEW.field);
    END IF;
END$$

DELIMITER ; 
```

你可以这样做

# jquery - 无法连接到 Web 服务

> ID：14091656
> 
> 赞同：2
> 
> 时间：2012-12-30T14:47:21.757
> 
> 标签：jquery, asp.net, asmx

我正在尝试学习如何通过 jquery 使用 Web 服务和 ajax，但我遇到了一个我不知道如何解决的问题

我有一个 html 页面包含：

```
<!DOCTYPE html>
 <html xmlns="http://www.w3.org/1999/xhtml">
  <head>
<title></title>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('#btn').click(function () {
            $('div').load('AjaxServices.asmx/HelloWorld');

        });
    });
</script>
</head>
<body>
    <h1>ws</h1>
    <button type="button" id="btn">get info</button>
    <p>the site says...</p>

    <div id="one"></div>
    <div id="two"></div>
    <div id="three"></div>
</body> 
```

asmx.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;
using System.Web.Script.Services;
using System.Web.Script.Serialization;

namespace ajaxTutorial
{
[[WebService(Namespace = "http://appdev.com/jQueryAjax")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
 [System.Web.Script.Services.ScriptService]
public class AjaxServices : WebService
{
    private static int count = 0;

    [WebMethod]
    public string HelloWorld()
    {
        count++;
        return "Hello World" +count.ToString();
    }
}
} 
```

*   运行 asmx.cs 文件时，它会加载..当我调用该方法时，它似乎没问题。

- 这是我在 chrome 上遇到的错误：

![在此处输入图像描述](../Images/5f4544ff1cd1b88354e0fb2968e6608a.png)

- 这是解决方案资源管理器：

![在此处输入图像描述](../Images/ff1f47ceb6a2db1d6a03f514a8c9c286.png)

这是正在打开的端口： ![在此处输入图像描述](../Images/2869df933dd4a6a59903ea255db7f29d.png)

*我真的不知道发生了什么，有人可以指导我吗？

我有什么选择来解决它？

先谢谢了。（是的，我知道它是一项古老的技术，稍后我将学习使用 wcf）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T18:28:51.177

这一行：

```
$('div').load('AjaxServices.asmx/HelloWorld'); 
```

...使用 HTTP GET 调用 Web 服务方法。出于安全原因，在 .NET 1.1 中默认禁用此功能。

这在[http://support.microsoft.com/kb/819267进行了解释](http://support.microsoft.com/kb/819267)

为了启用它，您需要在 <system.web> 下的 web.config 中添加它：

```
<webServices>
  <protocols>
    <add name="HttpGet"/>
  </protocols>
</webServices> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T14:54:42.160

**更新：**

尝试将其用于您的按钮处理程序/AJAX 加载：

```
$(document).ready(function () {
    $('#btn').click(function () {
        var p = $('<p />');
        //$('div').load('AjaxServices.asmx/HelloWorld');
        $.ajax({
            "url": "AjaxServices.asmx/HelloWorld",
            "error": function(jqXHR, textStatus, errorThrown) {
                $('div').empty().append(p.clone().text(textStatus)).append(p.clone().text(errorThrown));
            },
            "success": function(data, textStatus, jqXHR) {
                $('div').empty().append(p.clone().text(textStatus)).append(p.clone().text(data));
            }
        });
    });
}); 
```

这样，完整的错误至少应该出现在您的浏览器中。

**原来的：**

定义`HelloWorld`为`static`：

```
[WebMethod]
public static string HelloWorld()
{
    count++;
    return "Hello World" +count.ToString();
} 
```

# r - 引导分层/多级数据（重采样集群）

> ID：14091662
> 
> 赞同：14
> 
> 时间：2012-12-30T14:47:52.403
> 
> 标签：r, hierarchical-clustering, statistics-bootstrap

我正在生成一个脚本，用于从`cats`数据集（来自`-MASS-`包）创建引导样本。

按照戴维森和欣克利的教科书 [1]，我运行了一个简单的线性回归，并采用了一种基本的非参数程序来从独立同分布观察中引导，即**对重采样**。

原始样本的形式为：

```
Bwt   Hwt

2.0   7.0
2.1   7.2

...

1.9    6.8 
```

通过一个单变量线性模型，我们想通过他们的大脑重量来解释猫的壁炉重量。

代码是：

```
library(MASS)
library(boot)

##################
#   CATS MODEL   #
##################

cats.lm <- glm(Hwt ~ Bwt, data=cats)
cats.diag <- glm.diag.plots(cats.lm, ret=T)

#######################
#   CASE resampling   #
#######################

cats.fit <- function(data) coef(glm(data$Hwt ~ data$Bwt)) 
statistic.coef <- function(data, i) cats.fit(data[i,]) 

bootl <- boot(data=cats, statistic=statistic.coef, R=999) 
```

现在假设存在一个聚类变量`cluster = 1, 2,..., 24`（例如，每只猫都属于给定的垃圾）。为简单起见，假设数据是平衡的：每个集群有 6 个观察值。因此，24 窝中的每一窝都由 6 只猫（即`n_cluster = 6`和`n = 144`）组成。

可以通过以下方式创建假`cluster`变量：

```
q <- rep(1:24, times=6)
cluster <- sample(q)
c.data <- cbind(cats, cluster) 
```

我有两个相关的问题：

如何根据（集群）数据集结构模拟样本？即**如何在集群级别进行重采样？**我想对具有替换的集群进行采样，并将每个选定集群中的观察设置为原始数据集中的观察值（即在替换集群的情况下进行采样，而不是替换每个集群中的观察）。

这是戴维森（第 100 页）提出的策略。假设我们抽取`B = 100`样本。它们中的每一个都应该由 24 个可能经常出现的集群（例如`cluster = 3, 3, 1, 4, 12, 11, 12, 5, 6, 8, 17, 19, 10, 9, 7, 7, 16, 18, 24, 23, 11, 15, 20, 1`）组成，并且每个集群应该包含与原始数据集相同的 6 个观察值。如何做到这一点`R`？（有或没有`-boot-`包裹。）你有其他建议吗？

第二个问题涉及初始回归模型。假设我采用**固定效应模型**，具有集群级截距。**它是否改变了**采用的重采样程序？

[1] 戴维森，AC，欣克利，DV（1997 年）。*引导方法及其应用*。剑桥大学出版社。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T01:26:03.597

如果我对您的理解正确，那么您正在尝试将其`c.data`作为输入：

*   使用替换重新采样集群
*   保持随机样本中的每个聚类与其原始数据集（iecdata）中的点之间的关联
*   使用采样集群创建引导程序

这是一个实现此目的的脚本，您可以将其包装到一个函数中以重复它 R 次，其中 R 是引导程序复制的数量

```
q <- rep(1:24, times=6)
cluster <- sample(q)
c.data <- cbind(cats, cluster)

# get a vector with all clusters
c <- sort(unique(c.data$cluster))

# group the data points per cluster
clust.group <- function(c) {
    c.data[c.data$cluster==c,]
}

clust.list <- lapply(c,clust.group)

# resample clusters with replacement
c.sample <- sample(c, replace=T)

clust.sample <- clust.list[c.sample]

clust.size <- 6

# combine the cluster list back to a single data matrix
clust.bind <- function(c) {
    matrix(unlist(c),nrow=clust.size)
}

c.boot <- do.call(rbind,lapply(clust.sample,clust.bind))

# Just to maintain columns name
colnames(c.boot) <- names(c.data)

# the new data set (single bootstrap replicate)
c.boot 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:34:09.223

我尝试通过以下方式解决问题。虽然它有效，但它可能在速度和“优雅”方面有所改进。此外，如果可能的话，我宁愿找到一种使用该`-boot-`软件包的方法，因为它允许通过`boot.ci`...自动计算许多自举置信区间。

为简单起见，起始数据集包含嵌套在 6 个实验室（聚类变量）中的 18 只猫（“低级”观察）。数据集是平衡的（`n_cluster = 3`对于每个集群）。我们有一个回归量，`x`，用于解释`y`。

假数据集和存储结果的矩阵是：

```
 # fake sample 
  dat <- expand.grid(cat=factor(1:3), lab=factor(1:6))
  dat <- cbind(dat, x=runif(18), y=runif(18, 2, 5))

  # empty matrix for storing coefficients estimates and standard errors of x
  B <- 50 # number of bootstrap samples
  b.sample <- matrix(nrow=B, ncol=3, dimnames=list(c(), c("sim", "b_x", "se_x")))
  b.sample[,1] <- rep(1:B) 
```

在每次`B`迭代中，以下循环对 6 个有放回的簇进行采样，每个簇由 3 只无放回采样的猫组成（即保持簇的内部组成不变）。回归系数及其标准误差的估计值存储在先前创建的矩阵中：

```
 ####################################
  #   loop through "b.sample" rows   #
  ####################################

  for (i in seq(1:B)) {

  ###   sampling with replacement from the clustering variable   

    # sampling with replacement from "cluster" 
    cls <- sample(unique(dat$lab), replace=TRUE)
    cls.col <- data.frame(lab=cls)

    # reconstructing the overall simulated sample
    cls.resample <- merge(cls.col, dat, by="lab")

  ###   fitting linear model to simulated data    

    # model fit
    mod.fit <- function(data) glm(data$y ~ data$x)

    # estimated coefficients and standard errors
    b_x <- summary(mod.fit(data=cls.resample))$coefficients[2,1]
    se_x <- summary(mod.fit(data=cls.resample))$coefficients[2,2]

    b.sample[i,2] <- b_x
    b.sample[i,3] <- se_x

  } 
```

最终的自举标准误差是：

```
 boot_se_x <- sum(b.sample[,3])/(B-1) 
 boot_se_x 
```

有没有办法采用这个`-boot-`包来做到这一点？

此外，关于在集群级别采用固定效应而不是简单的线性回归，我的主要疑问是，在一些模拟样本中，我们可能没有选择一些初始集群，因此相关的集群-无法识别特定的拦截。如果您查看我发布的代码，从“机械”的角度来看，这应该不是问题（在每次迭代中，我们可以仅使用采样集群的截距拟合不同的 FE 模型）。

我想知道这一切是否存在统计问题

# jwplayer - 嵌入来自 4shared 的视频，使用 jwplayer 播放

> ID：14091667
> 
> 赞同：1
> 
> 时间：2012-12-30T14:47:59.283
> 
> 标签：jwplayer

我正在使用 JW-Player 播放托管在 4shared.com 上的视频，但问题是，当我没有登录 4shared.com 时，jw-player 不起作用，因为需要登录 4shared.com 才能播放视频。

我的问题是：是否可以使用 jwplayer 使用嵌入代码播放我博客中的 4shared.com 视频，而无需注册或登录 4shared.com？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-11T08:39:35.240

是的。您需要 4shared 视频 api。

```
http://www.4shared.com/developer/docs/ 
```

或使用卷曲

[> 这可能对您有所帮助](https://stackoverflow.com/questions/7216322/use-php-to-get-embed-src-page-information)

# c - ld 链接器在创建共享库时从静态库中删除目标文件

> ID：14091669
> 
> 赞同：3
> 
> 时间：2012-12-30T14:48:30.767
> 
> 标签：c, linux, linker, ld

我有许多静态库，我将它们链接到一个共享库中。其中一个，比如说 libUsefulFunc.a 包含一个目标文件 usefulFunc.o，它带有一个函数，有用的Func()，它只能从另一个静态库中使用，比如说 usingFunc()，驻留在 libUsingFunc.a 中的 usingFunc.c

问题是链接器丢弃了有用的Func.o，我得到错误“未定义的引用”。我尝试了两种链接顺序。

我使用我能想到的最简单的文件重新创建了这种情况：

啊

```
extern int foo(); 
```

交流

```
#include "a.h"
int foo()
{
    return 13;
} 
```

公元前

```
#include "a.h"

extern int b()
{
  return print("a = %d\n", foo());
} 
```

构建一切：

```
gcc -c a.c -o a.o
gcc -c b.c -o b.o
ar q b.a b.o
ar q a.a a.o
ld -shared -o test.so ./b.a ./a.a
nm ./test.so 
00001034 A __bss_start
00001034 A _edata
00001034 A _end 
```

如果我提供目标文件而不是档案：

```
ld -shared -o test.so ./a.o ./b.o
nm ./test.so 
00001220 a _DYNAMIC
00000000 a _GLOBAL_OFFSET_TABLE_
00001298 A __bss_start
00001298 A _edata
00001298 A _end
000001a0 T b
00000194 T foo
         U print 
```

有没有办法告诉链接器不要丢弃他认为未使用的目标文件而不必列出所有目标文件？我知道有一个 --whole-archive 选项，但是我将库构建为 Android NDK 项目的一部分，并且没有找到一种方法为特定库传递此选项。

**更新**我已经完全理解了我原来的问题并找到了正确的解决方案。首先是我上面的示例：链接器从入口点开始并搜索它们使用的所有符号。这些在当前库中查找。一旦找到，它就会将他们使用的符号添加到其列表中，从而强制执行。这些库仅是一次进程，并且按照它们在命令行中出现的顺序。因此，如果第二个库使用第一个库中的符号 - 该符号将保持未定义，因为链接器不会返回。所以在我的例子中，我应该告诉他 b() 将被外部调用，我可以使用 --undefined=b 来做到这一点：

```
ld -shared -o test.so --undefined=b ./b.a ./a.a 
```

在最初的问题中，我遇到了两个静态库之间的循环引用。就好像我在 b 存档中有一个文件 b1.c，它具有从 foo() 调用的函数 foo_b()。对于这种情况，我发现了 3 种可能的解决方案：

1.  列出 b 两次： ld -shared -o test.so --undefined=b ./ba ./aa ./ba
2.  使用 --whole-archive
3.  使用 --start-group archives --end-group 选项。重复搜索指定的档案，直到没有创建新的未定义引用。

对于 Android NDK 库，似乎只有第一个和第二个选项可用，因为 NDK 的 makefile 不提供指定存档组的方法

希望这对其他人也有用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T15:02:31.970

尝试使用 --whole-archive 选项：

```
ld -shared -o test.so --whole-archive ./a.a ./b.a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-08T01:18:10.490

好吧，如果它对追随者有用，我发现了一个非常有用（和奇怪）的行为。

如果您在命令行上有此链接顺序：

`-lsomething1 -lsomething2`

如果 libsomething1.a 中包含的各种 .o 文件“相互引用”（它们之间有一些共享方法等），并且至少一个 .o 文件具有“有用/使用”的依赖关系程序，然后所有相互链接的 .o 文件将在“链接该库时”加载（基本上，当链接器点击`-lsomething1`命令时）。

然后链接器继续并尝试加载库“something2”。如果“something2”中存在对“something1”中的 .o 文件的依赖关系

a) 如果“something1”中的 .o 文件之间存在相互依赖关系，那么它将加载，即使该特定依赖关系之前未使用。

b）如果 .o 文件之间没有相互依赖关系，`something1`那么 .o 文件可能就像 OP 所说的那样，在加载时“被丢弃”，因此将不可用。

所以基本上它可能“有时”有`something1`满足链接时间依赖关系的对象`something2`，并且链接器很高兴，即使它们以“错误的顺序”指定（something1然后something2，在这种情况下，正确的顺序是相反的也就是说，满足依赖关系的东西在链接链的后面）。好混乱。

显然，如果它在加载时注意到它需要/想要一个 .o 文件，它会加载整个 .o 文件，而不仅仅是它知道它需要/想要的符号。

因此，如果您不小心删除了一个相互依赖关系，您可能会突然遇到`undefined reference`以前不存在的故障（您通常可以通过将“-l”命令放入“正确”顺序来应对）。这也意味着您可以“意外地”满足前向依赖关系，这不是 ld 通常的工作方式。去搞清楚。您可能会*意外地*满足前向依赖关系 [!]

`-Wl,-verbose`通过添加到链接命令行，您可以更准确地查看正在发生的事情（包含或不包含哪些 .o 文件） 。

`nm`您可以通过使用命令（例如：）`nm libmylib.a`或交叉编译类似`i686-mingw-nm libmylib.a`或类似的东西来查看您的 .a 文件中包含哪些 .o 文件（及其符号）（全部一起） 。GL！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T19:31:31.073

避免将静态对象链接到共享库，因为共享库最好包含与[位置无关的代码](http://en.wikipedia.org/wiki/Position-independent_code)（以避免在动态链接时进行过多的重定位）。

在实践中，重新编译每个源文件，如`foo.c`with`gcc -fPIC -O -Wall -c foo.c -o foo.pic.o`并将它们全部链接以创建您的共享库，例如`gcc -shared *.pic.o -o libshared.so`（并且您可以将所需的库链接到您的`.so`.

# performance - 是否可以估计 kmean 何时完成？

> ID：14091672
> 
> 赞同：2
> 
> 时间：2012-12-30T14:49:15.173
> 
> 标签：performance, cluster-analysis, k-means

很抱歉这个奇怪的问题，但问题是我正在运行 kmeans，使用[Yael library](https://gforge.inria.fr/projects/yael/)。

我得到了大约 9,000,000 个 128 维的向量，我将获得 1,000,000 个质心。它在 24 核 CPU 上运行，现在已经运行了好几个小时。这是我第一次用这么大量的数据运行kmeans，我想知道它什么时候完成，而不是等它完成后再知道。

所以问题是，是否有可能估计 kmean 何时结束？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T21:55:08.920

你确定吗

A）该算法适合您的问题吗？k-means 建立在许多假设之上，特别是您的集群具有相同的大小

B）你的参数有意义吗？“聚类”成“1000000”有什么*用*吗？是否有意义？这些集群中有多少最终将只包含 0 或 1 个观测值？

一个朴素的 k-means 实现（99% 是朴素的）将使用`O(n*k*i)`where`n`是观察`k`的数量，是集群的数量，`i`是在收敛之前所需的迭代次数。所以*很明显*它扩展到1000000个集群很糟糕。但更糟糕的是：k-means 将在最坏的情况下测试`O(k^n)`作业。通常要少得多，但显然这个数字高度依赖于集群的数量。因此，集群越多，在收敛之前通常需要的迭代越多！

# android - “无法开始活动”说，LOGCAT

> ID：14091676
> 
> 赞同：1
> 
> 时间：2012-12-30T14:49:58.563
> 
> 标签：android, listview

我试图创建一个应该生成 ListView 的新类，但是我有一个错误。错误说**无法启动活动**我很困惑；谁能告诉我问题出在哪里，我做错了什么或者我能做什么？

# 代码

```
public class ManagerView extends ListActivity{

DBAdapter db;
Cursor cr;
String arr[];

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

            db = new DBAdapter(this);
            cr = db.getAllRecords();
    int i = 0;
    Cursor crr = null;

    try {crr = db.getRecord(4);}
    catch (IOException e) {e.printStackTrace();}

    for (cr.moveToFirst(); !cr.moveToLast(); cr.moveToNext()){

        arr[i] = crr.getString(i);
        i++;
        }

    setListAdapter (new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, arr));
    } 
```

}

# 错误

```
12-30 17:11:47.352: E/AndroidRuntime(1299): FATAL EXCEPTION: main
12-30 17:11:47.352: E/AndroidRuntime(1299): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.tsfc/com.example.tsfc.ManagerView}: java.lang.NullPointerException
12-30 17:11:47.352: E/AndroidRuntime(1299):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
12-30 17:11:47.352: E/AndroidRuntime(1299):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
12-30 17:11:47.352: E/AndroidRuntime(1299):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
12-30 17:11:47.352: E/AndroidRuntime(1299):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
12-30 17:11:47.352: E/AndroidRuntime(1299):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-30 17:11:47.352: E/AndroidRuntime(1299):     at android.os.Looper.loop(Looper.java:137)
12-30 17:11:47.352: E/AndroidRuntime(1299):     at android.app.ActivityThread.main(ActivityThread.java:5039)
12-30 17:11:47.352: E/AndroidRuntime(1299):     at java.lang.reflect.Method.invokeNative(Native Method)
12-30 17:11:47.352: E/AndroidRuntime(1299):     at     java.lang.reflect.Method.invoke(Method.java:511)
12-30 17:11:47.352: E/AndroidRuntime(1299):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-30 17:11:47.352: E/AndroidRuntime(1299):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-30 17:11:47.352: E/AndroidRuntime(1299):     at dalvik.system.NativeStart.main(Native Method)
12-30 17:11:47.352: E/AndroidRuntime(1299): Caused by: java.lang.NullPointerException
12-30 17:11:47.352: E/AndroidRuntime(1299):     at com.example.tsfc.DBAdapter.getAllRecords(DBAdapter.java:100)
12-30 17:11:47.352: E/AndroidRuntime(1299):     at com.example.tsfc.ManagerView.onCreate(ManagerView.java:32)
12-30 17:11:47.352: E/AndroidRuntime(1299):     at android.app.Activity.performCreate(Activity.java:5104)
12-30 17:11:47.352: E/AndroidRuntime(1299):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
12-30 17:11:47.352: E/AndroidRuntime(1299):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
12-30 17:11:47.352: E/AndroidRuntime(1299):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T14:55:11.740

> 找不到显式活动类 {com.example.tsfc/com.example.tsfc.ManagerView}；您是否在 AndroidManifest.xml 中声明了此活动？12-30 16:35:09.451: E/AndroidRuntime(1049): 在

确保您已将您的活动声明`AndroidManifest`为：

```
<activity android:name="com.example.tsfc.ManagerView" /> 
```

并且目前您正在错误的地方初始化 DBAdapter 。将 ListActivity 的 onCreate 中的所有数据库类初始化和 getAllRecords 移动为：

```
public  class ManagerView extends ListActivity{

DBAdapter db ;
Cursor cr ;
String arr[];

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

     db = new DBAdapter(ManagerView.this);
     cr = db.getAllRecords();
}

// your code here,...

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-30T16:14:29.097

你有一个空指针错误。删除错误。

或者

在 onCreate() 函数中注释除 setContentView() 之外的所有代码，并查看活动是否成功打开。

# php - 来自 MySql 的奇怪回显字符串

> ID：14091677
> 
> 赞同：1
> 
> 时间：2012-12-30T14:50:02.450
> 
> 标签：php, mysql

在我的 MySQL 数据库中，我有类似的东西`"Hello <<smt>>"`，我使用 PHP 来回显这个`nl2br($msg['CONTENT']);`输出`index.php`是：

```
"Hello <>" 
```

为什么？

如果我在数据库中有类似`"Hello <smt>"`in `index.php`show me only之类的东西`"Hello"`。该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T14:51:43.473

[`nl2br`](http://php.net/manual/en/function.nl2br.php)只会`\n`变成`<br/>`.

> 字符串 nl2br ( 字符串 $string [, bool $is_xhtml = true ] )
> 
> 返回在所有换行符（\r\n、\n\r、\n 和 \r）之前插入`<br />`或插入的字符串。`<br>`

* * *

与你的问题无关。您的问题与尝试显示 HTML 标记有关。浏览器识别这些标签并尝试解析它们（就像它是 a 一样`<span>`）。

要将这些标签用作显示字符，只需使用[`htmlentities`](http://php.net/manual/en/function.htmlentities.php).

**例子**

```
htmlentities(nl2br($msg['CONTENT'])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T15:55:59.923

通过使用 htmlentities() 你可以得到你的价值观

[在这里看演示](http://codepad.viper-7.com/M4V8rf)

# javascript - 何时注册到backbone.js 中的模型事件？

> ID：14091678
> 
> 赞同：0
> 
> 时间：2012-12-30T14:50:04.757
> 
> 标签：javascript, backbone.js

在我的`backbone.js`应用程序中，我需要在模型更改时更新特定的视图字段。例如：

```
this.model.bind("change:name", function() {
    $("#name", this.el).text(this.model.get("name"))
}) 
```

我应该把这段代码放在哪里？如果我把它放在`initialize()`then 之前可能会调用该事件`render()`。这似乎有点脏。特别是我可能需要该事件来更新仅在渲染中创建的 UI 元素。

如果我把这段代码放进去，`render()`那么这似乎又不合适了。例如，我可能会调用`render()`几次，但这个逻辑应该只注册一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T15:39:34.187

在初始化中绑定事件是最简单的方法，所以我会让你的函数足够聪明，如果渲染还没有发生，就不会出错。

其他一些建议：

*   使函数成为视图原型的一部分。
*   您给定的代码将不起作用，因为`this`回调内部错误，因此您需要传递第三个参数。
*   `bind`已弃用。改为使用`on`。
*   `$(..., this.el)`相当于`this.$(...)`
*   回调会自动传递新值，因此`get`再次调用是额外的工作。

* * *

```
initialize: function(options){
  this.model.on('change:name', this.changeName, this);
},

changeName: function(model, name){
  this.$('#name').text(name);
} 
```

# ios - ios resignFirstResponder 重置动画

> ID：14091683
> 
> 赞同：3
> 
> 时间：2012-12-30T14:51:00.700
> 
> 标签：ios, animation, subview, reset, resignfirstresponder

首先对不起我的英语不好！

在我的应用程序中有一个 UIViewController 并且 UIView 在 subViewLogin 内称为 subViewLogin 有 2 个 UITextField 称为用户名和密码。当我的应用程序运行时 subViewLogin 由 UIViewAnimationCurveLinear 移动到位置。但是当我完成编辑 UITextField （调用 resignFirstResponder）subViewLogin 回到位置。为什么？以及如何防止 subViewLogin 重新定位？

这是我的代码。

```
//LoginViewController.h
#import <UIKit/UIKit.h>

@interface LoginViewController : UIViewController
@property (weak, nonatomic) IBOutlet UITextField *username;
@property (weak, nonatomic) IBOutlet UITextField *password;
@property (weak, nonatomic) IBOutlet UIImageView *background;
@property (weak, nonatomic) IBOutlet UIImageView *logoEnergy;
@property (weak, nonatomic) IBOutlet UIImageView *logoKmutl;
@property (weak, nonatomic) IBOutlet UIImageView *logoProjectname;
@property (weak, nonatomic) IBOutlet UIView *subviewLogin;

- (void)advoidSubviewFromKeyboard;
- (IBAction)usernameAndPasswordBeginEdit;
- (IBAction)dismissKeyboard;
@end 
```

和

```
//LoginViewController.m
#import "LoginViewController.h"
@implementation LoginViewController

const float keyBoardPortraitHeight = 216;
const float keyBoardLandscapeHeight = 162;

@synthesize username, password, background, logoEnergy, logoKmutl, logoProjectname;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization

    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    self.view.backgroundColor=[UIColor colorWithPatternImage:[UIImage imageNamed:@"background.png"]];
    UIView *subview = self.subviewLogin;
    subview.frame = CGRectMake(subview.frame.origin.x, self.view.frame.size.height, subview.frame.size.width, subview.frame.size.height);
}

- (void)viewDidAppear:(BOOL)animated
{
    [UIView
    animateWithDuration:0.3
    delay: 0.0
    options: UIViewAnimationCurveLinear
    animations:^{
        UIView *subview = self.subviewLogin;
        subview.frame = CGRectMake(subview.frame.origin.x, self.view.frame.size.height-subview.frame.size.height-30, subview.frame.size.width, subview.frame.size.height);
    }
    completion:^(BOOL finished){

    }
    ];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)advoidSubviewFromKeyboard
{
    [UIView
     animateWithDuration:0.3
     delay: 0.0
     options: UIViewAnimationCurveLinear
     animations:^{
         self.view.frame = CGRectMake(self.view.frame.origin.x, -keyBoardPortraitHeight+30, self.view.frame.size.width, self.view.frame.size.height);
     }
     completion:^(BOOL finished){

     }
     ];
}

- (IBAction)usernameAndPasswordBeginEdit
{
    [self advoidSubviewFromKeyboard];
}

- (IBAction)dismissKeyboard
{
    NSLog(@"dismiss");
    //[self.username becomeFirstResponder];
    //[self.username resignFirstResponder];
    [self.subviewLogin endEditing:YES];
    //[self.view endEditing:YES];
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-03-02T09:19:22.257

尽管这个问题是很久以前提出的，但这种行为现在仍然存在。我已经使用约束而不是更新元素的框架来解决它。例子：

```
func expand(with view: UIView, constraint: NSLayoutConstraint) {
    constraint.constant = self.isExpanded ? self.minHeight : self.maxHeight //set needed constant here
    UIView.animate(withDuration: expandDuration, animations: {
        self.arrowImageView.transform = self.isExpanded ? .identity : CGAffineTransform(rotationAngle: self.topAngle)
        view.layoutSubviews() //layout constraint's view subviews
    }) { _ in
        self.isExpanded = !self.isExpanded
    }
} 
```

# php - 一次查询更新大型数据库

> ID：14091686
> 
> 赞同：0
> 
> 时间：2012-12-30T14:51:27.797
> 
> 标签：php, mysql

我有一个数据库，其中包含 1,755,213 个 CM23 5YF 格式的邮政编码条目。我想将其更改为 CM235YF，只需从中删除一个空格并在新列（Wardcode）中对其进行评分。
**桌子**

**邮政编码** **Wardcode**，
这是我正在使用的

功能是

```
//*** Select * from uk_data
                function uk_pc_data($id){
                global $host, $dbname, $user, $pass;
                $DBH = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);
                $DBH->setAttribute(PDO::ATTR_ERRMODE,PDO::ERRMODE_EXCEPTION); ///*** for error handling 165000
                $STH = $DBH->query("SELECT * from uk_pc order by Postcode asc LIMIT $id, 50000");
                $STH->setFetchMode(PDO::FETCH_ASSOC);
                return $STH;
            }
            //*** Update Cat10 with Post code
                function uk_pc_update_wardcode(){
                global $host, $dbname, $user, $pass;
                $DBH = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);
                $DBH->setAttribute(PDO::ATTR_ERRMODE,PDO::ERRMODE_EXCEPTION);
                $STH = $DBH->prepare("update uk_pc SET 
                Wardcode   = :cat10
                WHERE Postcode = :Postcode
                ");

                $STH->bindValue(':Postcode' , $Postcode);
                $STH->bindValue(':cat10' , $cat10);

                return $STH;
            } 
```

以这种方式使用它

```
$q = $_GET['id'];

$STH1 = uk_pc_data($q);
        while (($row = $STH1->fetch()) !== false) {
    $pc_o = change_text(' ', '', $row['Postcode']);

    $data_insert   = array(':cat10'=>$pc_o , ':Postcode'=>$row['Postcode']);
    $STH = uk_pc_update_wardcode();
    $STH->execute($data_insert);
    echo $pc_o .'<br>';

    } 
```

有没有一些简单的方法来改变这一点。我的脚本正在运行，但我想知道有没有其他方法可以使用，只有一个脚本可以完成所有工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T15:09:09.337

```
UPDATE postcodes SET new_column = REPLACE(old_column, ' ', '') 
```

但是你必须先创建 new_column。

# java - 从链表中删除一个节点

> ID：14091695
> 
> 赞同：-3
> 
> 时间：2012-12-30T14:52:47.773
> 
> 标签：java, linked-list

我正在尝试从链接列表中删除节点！我的链表中存储了以下数据。

```
aa 1 1 1 1
bb 2 2 2 2
cc 3 3 3 3 
```

我正在使用 Java 代码，我的代码是

```
Node p=first;

for(Node c=first;c!=null;c=c.next){

    if(c.data.startsWith(key)){
       if(c.next==null){

       }
       else{
           p=c;
       }

       if(c==first){
           first=first.next;
       }
       else{
           p.next=c.next;
       }
    }
} 
```

我遇到了一个问题，此代码仅正确删除数据，即 cc 3 3 3 3。我想知道我的代码中有什么问题，以便我能够删除我想要删除的数据！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T14:59:12.373

您需要将此作为循环的最后一行：

```
p = c; 
```

您还需要消除关于是否`c.next == null`. 找到密钥后删除节点无关紧要。

整个循环应该是：

```
for(Node c = first, p = null; c != null; p = c, c = c.next){

    if (c.data.startsWith(key)) {
       if (p == null) {
           first = c.next;
       } else {
           p.next = c.next;
       }
       break;
    }
    p = c;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T14:59:28.457

你不应该需要这段代码：

```
 if(c==first){
       first=first.next;
   }
   else{
       p.next=c.next;
   } 
```

您的循环已经移动到下一个节点。此代码只会让您跳过所有其他节点。也许这就是你找不到钥匙的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T15:29:40.930

试试这样：

```
Node lastNode = null;

// Traverse all nodes in the list
for (Node node = first; node != null; node = node.next) {

    // Check for node to delete
    if (node.data.startsWith(key)) {
       if (lastNode != null) {
           // directly link last node with next node to remove node
           lastNode.next = node.next;
       } else {
           // if the node to delete is the first node, update first node
           first = node.next;
       }
       // remember last node
       lastNode = node;
    }
} 
```

# titanium - 钛添加事件监听器到函数调用

> ID：14091696
> 
> 赞同：2
> 
> 时间：2012-12-30T14:52:48.970
> 
> 标签：titanium, event-listener

在 appcelerator Titan 中，是否可以在函数调用上设置事件监听器？

有点像

```
var coolManDool = function(){...};
coolManDool.addEventListener('what goes here?", function(){ ... } ); 
```

我希望能够以某种方式包装特定的一组函数，以确保它们做某事。未来的代码可能会扩展做某事，并且在我的代码中有一个控制它的中心点会非常好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T07:27:47.483

您不能将 eventListener 添加到任何函数，但可以在函数内触发事件，也可以将函数用作事件的回调。事件侦听器用于处理事件。在您的情况下，如果您想向函数添加事件，您可以简单地在 Titanium 中创建自定义事件。例如，如果您想在调用函数时执行某些特定操作，您可以简单地按照以下方式进行。

```
//Creating the custom event
window.addEventListener('myEvent', function(){
    alert('function called')
});

function foo(){
    //Some actions
    window.fireEvent('myEvent');
} 
```

您还可以将事件添加到应用程序本身（应用程序级事件）。应用级事件对您的应用来说是全局的。它们可以在所有上下文、功能范围、CommonJS 模块等中访问。您可以通过 Ti.App 模块触发它们并监听它们。

```
Ti.App.addEventListener('myAppEvent', function(){
    alert('Application level event get fired');
});
//Fire the event like
Ti.App.fireEvent('myAppEvent'); 
```

有关详细信息，请参阅[Titanium 中的事件处理](https://wiki.appcelerator.org/display/guides/Event+Handling#EventHandling)

# web-services - 从 Web 服务访问数据/信息时，Java Jsoup 获取会话过期

> ID：14091697
> 
> 赞同：1
> 
> 时间：2012-12-30T14:52:59.357
> 
> 标签：web-services, session, jsoup

我需要使用来自 asp webservice 的 java jsoup 获取一些信息。我也读过链接：[jsoup 张贴和 cookie](https://stackoverflow.com/questions/6432970/jsoup-posting-and-cookie)，但我仍然感到困惑。这是我的代码：

```
//1.Create connection to server
Connection.Response res = Jsoup.connect("http://www.server.com/user.aspx?lang=en-us")
                    .timeout(50000).data("{\"userid\":\"subagent01\",\"password\":\"mypassword\"}", "")
                    .method(Method.POST)
                    .execute();
Map<String, String> cookies = res.cookies();
Document doc = res.parse();

//2.Get information form server
String fAddressUrl = "http://www.server.com/WebService/Service.asmx/getSchedule?fromCity=CityA&toCity=CityB";
Document doc2 = Jsoup.connect(fAddressUrl).cookies(cookies).get();
System.out.println(doc2); 
```

我得到了这个回复：

```
<html>
 <head></head>
 <body>
  <string xmlns="http://tempuri.org/">
   Error, session is session_expired
  </string>
 </body>
</html> 
```

如果还尝试在 Web 浏览器中直接调用该 URL（“ [http://www.server.com/WebService/Service.asmx/getSchedule?fromCity=CityA&toCity=CityB](http://www.server.com/WebService/Service.asmx/getSchedule?fromCity=CityA&toCity=CityB) ”），结果如下：
1\. 登录首先在 www.server.com
-> 成功。我在网络浏览器中获得了信息
2.没有在 www.server.com 上登录
-> 失败。显示相同的错误“错误，会话已过期”。

那么，问题是什么？

# android - 如何在 Google Maps v2 上绘制“从”某个位置“到”另一个位置的路线？

> ID：14091699
> 
> 赞同：0
> 
> 时间：2012-12-30T14:53:11.183
> 
> 标签：android, api, google-maps, google-maps-api-2

如何在 Google Maps v2 上绘制“从”某个位置“到”另一个位置的路线？

我用 api v2 做了一个简单的应用，但现在我将绘制到地图中不同位置的路线。

可能吗？提前致谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T15:07:06.553

使用 - 最终 Intent 意图 = new Intent(Intent.ACTION_VIEW,Uri.parse("http://maps.google.com/maps?" + "saddr="+from +"&daddr="+to));

intent.setClassName("com.google.android.apps.maps", "com.google.android.maps.MapsActivity");

开始活动（意图）；

# python - 我是否必须将我的 django 项目复制到另一台机器上才能在其上执行 celery 任务？

> ID：14091700
> 
> 赞同：3
> 
> 时间：2012-12-30T14:53:17.000
> 
> 标签：python, django, rabbitmq, celery

这是问题所在 - 我有一台服务器，上面有我的 django 项目。

我必须执行很多任务，所以我使用 celery+rabbitmq 来处理它们。

最近我发现服务器内存不足，所以我决定将所有任务移至另一台专用服务器。按照本[指南](http://timbull.com/build-a-processing-queue-with-multi-threading)，我创建了 rabbitmq 集群，而没有复制我的 django 项目。

我可以在我的新专用服务器上向 celery 发送任务，但是 celery 说任务未注册，例如

`Received unregistered task of type 'djangoapp.tasks.taskname'. The message has been ignored and discarded.`

那么我该怎么办 - 只是复制我的 django 项目或其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T15:24:04.843

至少，包含任务的代码需要在运行它们的盒子上。也就是说，`djangoapp.tasks`代码需要在那里。

* * *

自然，它的所有依赖项（可能是模型代码）和配置（设置）也需要在那里。
您可以尝试仅通过包含这些部分来节省一些空间，但我真的认为这不值得。

您应该在两台服务器上运行整个代码库（项目 + 应用程序）。

* * *

有关信息，当您启动 Celery 时，会显示已注册的任务。您可以使用它来检查一切是否正确设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T15:23:54.717

每个 celery worker 服务器都应该运行相同代码的副本，是的

# html - 将 HR 宽度扩展到所有屏幕，忽略容器的宽度

> ID：14091701
> 
> 赞同：3
> 
> 时间：2012-12-30T14:53:22.167
> 
> 标签：html, css

我在**50% 宽度的**`HR`容器中有一个元素，我希望它扩展到屏幕的所有宽度，忽略它的父宽度。 **`div``HR`**

 **我知道我可以通过应用`HR`容器外部并使用相对位置使其移动到必须的位置来解决这个问题......但是还有其他解决方案吗？

我尝试将宽度设置为超过`100%`，让我们说`300%`让它溢出，但它只会向右放大（并显示一个丑陋的滚动条）。

浏览器将`HR`其视为一个块，但我无法将其居中`margin: 0 auto`（如上所述调整大小后）。

有没有办法在没有相对定位的情况下做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-30T15:25:37.153

您可以使用负边距，`hr`如下所示：

```
hr {
  width: 200%;
  margin-left: -50%;
}​ 
```

[小提琴](http://jsfiddle.net/AnLrt/1/)

`div`请注意，这些 %s 仅在其父级位于顶层和/或没有其他父级具有`width`、`padding`或`margin`附加的情况下才会延伸到视口的末尾。为了解决这个问题，也许可以尝试 a`width: 9999px; margin-left: -3333px;`和 an`overflow: hidden``body`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-02T22:47:19.343

在搜索了类似的东西后，我偶然发现了这个问题。因为（可悲）我没有找到解决这个问题的纯 CSS 解决方案，所以我最终使用 jQuery 来完成这项工作。

```
function hrExpand() {
   var windowWidth = $(window).width();
   $('hr').width(windowWidth).css('margin-left', function(){
     return '-' + ($(this).offset().left) + 'px';
   });
} 
```

只要确保同时运行 onload 和 onresize 函数。

示例：[http ://codepen.io/anon/pen/qEOoGb](http://codepen.io/anon/pen/qEOoGb)

*（您可以将 $('hr') 替换为 $('.content > hr') 以稍微提高性能并防止它替换页面上的所有 hr）*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T15:06:52.197

如果您使用正确的值，则使用相对定位无需滚动条：

```
div {
    width: 50%;
    min-height: 20em;
    margin: 0 auto;
}

hr {
    width: 200%;
    position: relative;
    left: -50%;
} 
```

如果一个 div 是 50%，并且您希望 hr 是根的 100%（是 50% 的两倍），请使用 200%。对于 25% div，使用 400% hr 等

[演示](http://jsfiddle.net/LwPfK/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-23T09:37:32.957

如果使用顺风：

```
<hr class="my-2 -ml-10 -mr-10"/> 
```

我还没有测试过引导程序**

# jquery - 重新加载数据表而不重新加载页面？

> ID：14091702
> 
> 赞同：1
> 
> 时间：2012-12-30T14:53:28.203
> 
> 标签：jquery, asp.net, .net

如何在不重新加载整个页面的情况下重新加载数据表？我希望它从“AllSales”中获取新值。我还在为我的表使用 jquery 插件“datatable”。

```
 $("#SalesTable").dataTable(); 
```

这是我的桌子：

```
<table id="SalesTable">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Email</th>
                            </tr>
                        </thead>
                        <tbody>
                          <% {
                                foreach (var item in AllSales)
                                {
                                   %>
                                   <tr>
                                     <td><%=item.Date %></td>
                                     <td><%=item.Email%> </td>
                                   </tr>
                                <%}
                            }
                         %>

                        </tbody>
                    </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T22:32:10.497

使用 ajax 获取数据，将其放入对象中，然后根据对象动态更改数据表的内容。自从我使用任何 .net 语言以来已经有好几年了，所以我不能用 asp 给你写一个例子。

```
<html>
<tbody id='datatable'>
</tbody>
</html>

var tbodyData;
var post = $.ajax({
 url: "someurl.asp",
 type: "POST",
 data: {"some data"},
 success: function() {
  var object = post.responseText;
  object.parseJSON();
  for (data in object) {
   tbodyData += "<tr><td>" + object[data] + "</td></tr>\n";
  }
  $("datatable").html(tbodyData);
 }
}); 
```

应该这样做。

# jquery - 为什么 .text() 不返回真实值？

> ID：14091703
> 
> 赞同：1
> 
> 时间：2012-12-30T14:53:31.020
> 
> 标签：jquery

为什么这不显示对象内部的文本？

```
 <ul>
     <li>1</li>
     <li>2</li>
     <li>3</li>
 </ul> 
```

jQuery：

```
 $("ul").append('<li class="hi">4</li>');
   alert( $(".hi").text ); 
```

它没有显示 ，而是`.text()`显示了其他一些 js mumbo jumbo。我在这里做错了什么？

[http://jsfiddle.net/hkGyG/](http://jsfiddle.net/hkGyG/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-30T14:54:08.797

你缺少括号。利用

```
alert( $(".hi").text() ); 
```

您只是在提醒该函数，而不是调用它并提醒结果。

# c - C 中的类型转换和类型安全

> ID：14091707
> 
> 赞同：2
> 
> 时间：2012-12-30T14:53:53.070
> 
> 标签：c, types, casting, type-safety

在 Mitchell 的书（Concepts in Programming Languages）的第 6.2.1 章中，它提到：

> **类型铸件。**类型转换允许将一种类型的值用作另一种类型。特别是在 C 中，可以将整数强制转换为函数，从而允许跳转到不包含正确形式的指令的位置成为 C 函数。

所以我打算使用这种非安全性并做一些不寻常的事情我尝试了这样的事情（伪代码）：

```
int x = 0;
print "loop";
x(); 
```

创建一个无限循环。我尝试通过更改和测试，但我无法应对。我怎么能像这些东西一样做一些事情或其他事情？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T14:57:18.877

这不是它的工作原理。

在 C 中，您*可以*将整数值转换为函数指针值，然后调用这样的函数指针

```
void (*ptr)() = (void (*)())42;
ptr(); 
```

但这可能只会导致崩溃，除非您确切地知道自己在做什么，即您已经以某种方式知道在地址 42 处启动具有该签名的函数；在系统编程中可能会出现像本例中这样的固定地址，而在应用程序编程中则极为罕见。

*实际*发生的比预期更频繁的事情（尤其是在 Windows 编程中）是传递转换为某些整数的函数指针（在 / 任何人中的回调？`LPARAM`）`WPARAM`，然后将它们转换回函数指针以实际使用它们。

此外，执行此类转换/调用时会发生什么超出了 C 标准的范围，这使得实现可以自由地在这方面做他们想做的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T15:11:21.903

@Sorush，这是一个示例，可以帮助您更好地了解幕后发生的事情：

```
#include <stdio.h>

int main(void)
{
    printf("begin\n");
    printf("loop\n");

    // declare a function pointer
    int (*loopPtr)();
    // set the function pointer to the current function
    loopPtr = main;
    // skip over the first printf();
    loopPtr += 22;
    // call the new location
    loopPtr();
} 
```

对我来说，它在编译时可以在 x86_64 上运行`clang -O0`（嗯，它可以一直工作到堆栈耗尽，因为这是无限递归，并且每个函数调用都会遍历堆栈空间）。

我通过编译确定了偏移量 22，然后反汇编并`main()`从 second 的地址中减去 start 的地址`printf()`。

首先，我编译它：

```
clang -O0 test.c 
```

然后拆开看：

```
otool -tv a.out 
```

...产生了这个输出：

```
[...]
_main:
0000000100000ee0    pushq   %rbp
0000000100000ee1    movq    %rsp,%rbp
0000000100000ee4    subq    $0x20,%rsp
0000000100000ee8    leaq    0x00000073(%rip),%rdi
0000000100000eef    movb    $0x00,%al
0000000100000ef1    callq   0x100000f40
0000000100000ef6    leaq    0x0000006c(%rip),%rdi
0000000100000efd    movl    %eax,0xf4(%rbp)
0000000100000f00    movb    $0x00,%al
0000000100000f02    callq   0x100000f40
[...] 
```

`_main:`表示`main()`函数的入口点，其首地址为0x100000ee0。第一`callq`条指令对应于第一个`printf()`调用，我想跳过它，所以我选择了紧随其后的地址：0x100000ef6。0x100000ef6 减去 0x100000ee0 是十进制的 22。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-30T14:57:40.433

好吧，`x()`不会神奇地调用该地址的函数。我认为他的意思是：

```
typedef void (*functionPtr)();

int x;
//...
functionPtr foo = (functionPtr)x;
//or
functionPtr goo = (functionPtr)&x;
foo(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-30T15:08:18.137

你的书有误导性。标准允许的唯一事情是强制转换操作，并且只有在值合适的情况下才会这样做。在大多数情况下，执行这样的函数指针是*未定义的行为。*你必须非常了解你的系统才能做到这一点。所以你引用段落的第二部分：

> 特别是在 C 中，可以将整数强制转换为函数，从而允许跳转到不包含正确形式的指令的位置成为 C 函数。

在那种形式下是不正确的。特别是所有体面的现代系统都不允许您执行数据，您必须为页面设置特殊标志，以便可以认为它包含可执行代码。

# jquery - 使用 javascript 向现有表单添加验证错误？

> ID：14091714
> 
> 赞同：-1
> 
> 时间：2012-12-30T14:55:05.687
> 
> 标签：jquery, ajax, asp.net-mvc, json, validation

我有一个 ASP.NET MVC 4，我在其中使用带有验证属性的客户端和服务器端验证。

表单将在使用 ajax 发送之前进行正确验证，如下所示：

```
function ValidateFormAndAjaxSubmit(formId, callingElement) {

    if (IsNotDblClick(callingElement.id)) {
        var _form = $("#" + formId);

        var validator = _form.validate();
        var anyError = false;

        _form.find("input").each(function () {
            if (!validator.element(this)) { // validate every input element inside this step
                anyError = true;
            }
        });

        if (anyError) {
            window.latestClick = '';
            return false; // exit if any error found    
        }

        $.post(_form.attr("action"), _form.serialize(), function (data) {

            if (data.Success) {

            }
            else {

            }

            alert("Win");
            window.latestClick = '';
            //check the result and do whatever you want
        })
    }
} 
```

表格如下所示：

```
@using (Html.BeginForm("JEdit", "Post", FormMethod.Post, new { id = "frmEditPost" }))
{
    @Html.ValidationSummary(true)
    ...
} 
```

将在服务器端进行额外的验证，并将其存储在这样的返回类中：

```
public class JEditResult
    {
        public Boolean Success = false;
        public string TitleErrMessage;
        public string TextErrMessage;
        public string LinkErrMessage;
        public string TagErrMessage;
        public string OtherErrMessage;
    } 
```

现在我需要将这些验证放入表单中，就像在客户端上验证了一样。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T15:53:30.850

我使用以下扩展方法：

```
public static JsonResult JsonValidation(this ModelStateDictionary state, JsonRequestBehavior behavior = JsonRequestBehavior.DenyGet) {
    var result = new JsonResult {
        Data = new {
            success = false,
            Tag = "ValidationError",
            State = from e in state
                    where e.Value.Errors.Count > 0
                    select new {
                        Name = e.Key,
                        Errors = (e.Value.Errors.Select(x => x.ErrorMessage)
                            .Concat(e.Value.Errors.Where(x => x.Exception != null).Select(x => x.Exception.Message)))
                            .Where(x => !String.IsNullOrEmpty(x)).Select(x => x)
                    }
        }
    };
    result.JsonRequestBehavior = behavior;
    return result;
} 
```

然后在我的代码中使用它，如下所示：

```
if (ModelState.IsValid == false) {
    Response.StatusCode = 400;
    return ModelState.JsonValidation();
} 
```

我也有一些我使用的标准 js 代码：

```
// JSON validation
function validateResponse(form, response) {
    var data = getResponseValidationObject(response);
    if (!data) return true;

    var validator = form.validate();
    var container = form.find("[data-valmsg-summary=true]");
    var list = container.find("ul");
    if (!list) return;

    container.addClass("validation-summary-errors").removeClass("validation-summary-valid");
    list.empty().show();
    $.each(data.State, function (i, item) {
        list.append("<li>" + item.Errors.join("</li><li>") + "</li>");
    });
    return false;
}

// JSON validation
function getResponseValidationObject(response) {
    if (response && response.Tag && response.Tag == "ValidationError")
        return response;
    return null;
} 
```

然后在我的 ajax 帖子中，我检查返回响应的有效性：

```
var json = $.parseJSON(response.responseText);
var isValid = validateResponse($("#form"), json);
// Do something here... 
```

该`validateResponse`功能会自动将错误添加到表单验证摘要（假设有一个）。

# java - SWT：合成内部的图像；获取 IllegalArgumentException

> ID：14091717
> 
> 赞同：2
> 
> 时间：2012-12-30T14:55:28.830
> 
> 标签：java, swt

我目前正在使用 SWT 和 Eclipse 的 WindowBuilder 制作一个独立的应用程序（不是 Eclipse 插件），并且我正在测试将图像放入合成中，以便在我尝试绘制时轻松地将图像放入我的合成中图像，它会引发 IllegalArgumentException。我不知道发生了什么，我正在寻找解释/替代方案。发生了什么，我将如何解决这个问题？

如果我注释掉这一`e.gc.drawImage`行，仅此而已，它不会抛出异常。

这是给我错误的代码：

```
import org.eclipse.swt.SWT;
import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;

public class GUI {
    public static final Display display = Display.getDefault();;
    private final Shell shell;

    public GUI() {
        shell = new Shell(display);
        shell.setLayout(new FillLayout(SWT.HORIZONTAL));
    }

    public static void main(String[] args) {
        GUI window = new GUI();
        window.open();
    }

    public void open() {
        createContents();
        shell.open();
        shell.layout();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch()) {
                display.sleep();
            }
        }
    }

    private void createContents() {
        shell.setSize(450, 300);

        ImageTest img = new ImageTest(shell, SWT.NONE);
    }
}

import org.eclipse.swt.graphics.Image;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.events.PaintListener;
import org.eclipse.swt.events.PaintEvent;
import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.Canvas;

public class ImageTest extends Composite {
    public ImageTest(Composite parent, int style) {
        super(parent, style);
        setLayout(new FillLayout(SWT.HORIZONTAL));

        final Image img = new Image(GUI.display, "img.gif");

            // I tried drawing the image to both a canvas and the composite its self. Same outcome.
        Canvas canvas = new Canvas(this, SWT.NONE);
        canvas.addPaintListener(new PaintListener() {
            public void paintControl(PaintEvent e) {
                e.gc.drawImage(img, 0, 0); // If I comment this out, it runs fine.
            }
        });

        img.dispose();
    }

    @Override
    protected void checkSubclass() {}
} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T15:07:52.843

您收到错误是因为您的图像在paintControl 尝试绘制它时被释放。`ImageTest`在绘制侦听器有机会被调用之前，您可以在构造函数的末尾自行处理它。

您可以通过创建`img`类的成员变量然后覆盖 dispose 方法来进行清理来避免这种情况：

```
@Override
public void dispose() {
    this.img.dispose();
    super.dispose();
} 
```

不要忘记删除线

```
img.dispose(); 
```

从你的构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T15:06:25.227

[GC.drawImage](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/events/PaintEvent.html) API 文档说在以下情况下会抛出 IllegalArgumentException。可能是图像对象为空。

```
IllegalArgumentException -
ERROR_NULL_ARGUMENT - if the image is null
ERROR_INVALID_ARGUMENT - if the image has been disposed
ERROR_INVALID_ARGUMENT - if the given coordinates are outside the bounds of the image 
```

# python - Python：运行for循环时，如何将每个解决方案附加到一个列表中，该列表附加到一个新字典中？

> ID：14091718
> 
> 赞同：0
> 
> 时间：2012-12-30T14:55:36.193
> 
> 标签：python, numpy

因此，如果我有任何琐碎的功能，例如：

```
def summation_ind(a,b):
          summation = 2*a + 3*b
          if summation < 4:
              return True
          else:
              return False 
```

a 和 b 来自一个数字列表，我有一个 for 循环，例如：

```
newdict = {}
newlist = []
for a in R:
          for b in R:
              if summation(a,b):
                  newlist.append((a,b))
newdict['numbs']=set(newlist) 
```

我该如何做到这一点，以便每次循环运行时，a 和 b 都被附加到一个新列表中，并且新列表被附加到一个新字典中？换句话说，如果有 15 种 a、b 值的组合适用于该算法，有没有办法在 15 个新字典中创建 15 个新列表？那可能吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T15:02:52.593

您可以使用[defaultdict](http://docs.python.org/2/library/collections.html#collections.defaultdict)使其更简单。

使用字典中的集合：

```
from collections import defaultdict

dictionary = defaultdict(set)

for a, b in ((a, b) for a in R for b in R):
    if summation(a, b):
        dictionary['numbs'].add((a,b)) 
```

使用字典中的列表：

```
from collections import defaultdict

dictionary = defaultdict(list)

for a, b in ((a, b) for a in R for b in R):
    if summation(a, b):
        dictionary['numbs'].append([a,b]) 
```

甚至使用[列表理解](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)：

```
dictionary['numbs'] = [(a, b) for a in R for b in R if summation(a, b)] 
```

# entity-framework - 如何与实体框架定义嵌套的一对多关系？

> ID：14091719
> 
> 赞同：2
> 
> 时间：2012-12-30T14:55:57.530
> 
> 标签：entity-framework, ef-code-first, one-to-many

使用实体框架，我想定义一个这样的“用户”实体：每个用户有很多朋友，朋友的类型是“用户”。我可以这样定义吗？

```
public class User
{
   public int UserId {get;set;}
   public string UserName {get;set;}

   public virtual List<User> Friends {get;set;}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T14:59:28.100

是的，您可以，问题是您是否要分离实体？如果没有，那么这行得通，如果朋友有属性，那么你最好有一个继承自 User 的实体。

另外，为了清楚起见 TPT [How to implement inherit Table-Per-Type in Entity Framework 4.3 via Code First 方法？](https://stackoverflow.com/questions/9564972/how-to-implement-inheritance-table-per-type-in-entity-framework-4-3-via-code-fir)

在您提供的代码中，它将最终成为数据库中的自引用表。

# php - 如何内部连接位于同一服务器上的 2 个不同 mysql 数据库中的两个表？

> ID：14091724
> 
> 赞同：2
> 
> 时间：2012-12-30T14:56:22.097
> 
> 标签：php, mysql, database, join, inner-join

如何使用 php mysql_query 内部连接位于 2 个不同 mysql 数据库中的两个表

数据库名称为“database”和“image_database”，表为“user”和“user_image”

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-30T15:02:20.570

```
 $query =" select * from database.user d
          inner join image_databse.user_image i
          on d.<column_name>=i.<column_name>";
mysql_query($query); 
```

虽然 mysql_select_db() 选择一个数据库，但如果您需要访问要从中提取数据的数据库的权限，则只需要一个 mysql_select_db() 函数来选择其中一个数据库，因为其他数据库将被自动引用。

还要确保 mysql_connect() 中指定的用户具有连接到两个数据库的权限。

注意： mysql_ 函数已被弃用，请改用 mysqli 扩展以避免以后出现问题，例如 mysqli_select_db()

# .net - 在 ListBox VS 2012 C++ 中添加项目时出现跨线程异常

> ID：14091731
> 
> 赞同：0
> 
> 时间：2012-12-30T14:57:19.110
> 
> 标签：.net, visual-c++, listbox, backgroundworker

我写了一个扫描蓝牙设备的小算法并将其添加到我的列表框中。但我得到一个错误：跨线程异常。

我想要的是不断更新我的列表框而没有任何中断。但是添加后的 sleep() 就可以了。

从昨天开始与 Backroundworker 一起尝试，但它不起作用，并且在添加时出现错误。有人有想法。我读过一些关于委托的东西，有人知道吗？

这是我的代码：

```
private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) {
         this->button1->Enabled=false;
         this->button2->Enabled=true;
         this->toolStripStatusLabel1->Text="Active";
         this->toolStripProgressBar1->Value=100;
         this->backgroundWorker1->RunWorkerAsync();

     }
private: System::Void button2_Click(System::Object^  sender, System::EventArgs^  e) {
         this->button1->Enabled=true;
         this->button2->Enabled=false;
         this->toolStripStatusLabel1->Text="Not Active";
         this->toolStripProgressBar1->Value=0;
         this->backgroundWorker1->CancelAsync();
     }
private: System::Void backgroundWorker1_DoWork(System::Object^  sender, System::ComponentModel::DoWorkEventArgs^  e) {
             BackgroundWorker^ worker = dynamic_cast <BackgroundWorker^> (sender);

             e->Result = Bluetooth(worker,e);
    }

private: System::Void backgroundWorker1_Complete(System::Object^  sender, System::ComponentModel::RunWorkerCompletedEventArgs^  e) {

     }

long Bluetooth (BackgroundWorker^ worker, DoWorkEventArgs ^ e){
    if (worker->CancellationPending){
        e->Cancel=true;
    }
    else{
            vector<wstring> vec;
            int m_device_id=0;
            int m_radio_id = 0;
            m_bt = BluetoothFindFirstRadio(&m_bt_find_radio, &m_radio);
            BluetoothGetRadioInfo(m_radio, &m_bt_info);

            m_search_params.hRadio = m_radio;
            ::ZeroMemory(&m_device_info, sizeof(BLUETOOTH_DEVICE_INFO));
            m_device_info.dwSize = sizeof(BLUETOOTH_DEVICE_INFO);
            m_bt_dev = BluetoothFindFirstDevice(&m_search_params, &m_device_info);

            do{
                wostringstream tmp;
                ++m_device_id;

                //Convert Byte in String
                for (int i = 0; i < 6; i++) {
                  tmp << hex << m_device_info.Address.rgBytes [i];
                  if (i < 5)
                    tmp << L':';
                }                   
                //VectorList
                //vec.push_back(tmp.str());

                listBox1->Items->Add(System::Runtime::InteropServices::Marshal::PtrToStringUni(IntPtr((void*) tmp.str().c_str())));
                Sleep(100);
            }while(BluetoothFindNextDevice(m_bt_dev, &m_device_info));
            BluetoothFindDeviceClose(m_bt_dev);
            BluetoothFindRadioClose(m_bt);

            long n=0;
            return n;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T15:17:52.917

这是 WPF 还是 WinForms？使用 WPF，您只能从 UI 线程访问控件。要从其他线程访问控件，请调用[DispatcherObject.Dispatcher.Invoke](http://msdn.microsoft.com/en-us/library/hh199416.aspx)或控件上的类似方法之一（所有控件都继承自 DispatcherObject）。

我敢肯定 WinForms 也有类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T15:35:02.130

我偶然发现它并想分享我的解决方案。:-)

在构造函数中，我编写了 CheckForIllegalCrossThreadCalls=false; 这解决了我的问题：-DI 认为这不是最好的方法，但首先可以永久更新我的列表框。

# java - libgdx shaperenderer 如何围绕其中心旋转矩形？

> ID：14091734
> 
> 赞同：7
> 
> 时间：2012-12-30T14:57:50.083
> 
> 标签：java, libgdx

如何围绕其中心旋转矩形？我在 ShapeRenderer 中找到了旋转功能：

```
void rotate(float axisX, float axisY, float axisZ, float angle); 
```

但它围绕 0,0 坐标旋转，我想围绕它的中心旋转形状。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-01T00:03:45.877

如果您查看 ShapeRenderer 的[文档](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/glutils/ShapeRenderer.html)，第二个示例将向您展示如何将框的中心设置在位置 {20,12,2} 并使用 translate 围绕 z 轴旋转。你需要做同样的事情，例如

```
this.m_ShapeRenderer.begin(ShapeType.Rectangle);
this.m_ShapeRenderer.setColor(1.f, 1.f, 1.f, 1.f);
this.m_ShapeRenderer.identity();
this.m_ShapeRenderer.translate(20.f, 10.f, 0.f);
this.m_ShapeRenderer.rotate(0.f, 0.f, 1.f, 45.f);
this.m_ShapeRenderer.rect(x, y, 40.f, 20.f);
this.m_ShapeRenderer.end(); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-25T20:02:19.967

使用这种方法（[官方文档](https://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/glutils/ShapeRenderer.html#rect-float-float-float-float-float-float-float-float-float-)）：

```
public void rect(float x, float y,
                 float originX, float originY,
                 float width, float height,
                 float scaleX, float scaleY,
                 float degrees) 
```

*使用 ShapeRenderer.ShapeType.Line 或 ShapeRenderer.ShapeType.Filled 在 x/y 平面中绘制一个矩形。x 和 y 指定左下角。originX 和 originY 指定旋转矩形的点。*

像这样使用它：（x和y是矩形中心的点）

```
renderer.rect(x-width/2, y-height/2, 
              width/2, height/2, 
              width, height, 
              1.0f, 1.0f, 
              myRotation); 
```

# objective-c - 如何在Objective c中转置矩阵？

> ID：14091740
> 
> 赞同：3
> 
> 时间：2012-12-30T14:58:31.827
> 
> 标签：objective-c, matrix

我有一个二维矩阵。我怎样才能在目标c中转置它？

我是否使用嵌套循环来转置它，因为我在数组和 mutablearray 类中找不到任何方法。

我的 matix 是 3x3。

```
NSMutableArray *row1=[NSMutableArray arrayWithObjects:@1,@2,@3, nil];
NSMutableArray *row2=[NSMutableArray arrayWithObjects:@4,@5,@6, nil];
NSMutableArray *row3=[NSMutableArray arrayWithObjects:@7,@8,@9, nil];

NSMutableArray *twoDArray=[NSMutableArray arrayWithObjects:row1,row2,row3, nil];
NSLog(@"%@",twoDArray); 
```

在这之后该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T15:07:14.463

就这么简单：

```
NSMutableArray *result = [NSMutableArray arrayWithCapacity:3];

for (NSUInteger i = 0; i < 3; i++) {
    [result addObject:@[row1[i], row2[i], row3[i]]];
} 
```

为简单起见，我假设它始终是 3x3 矩阵。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T15:05:37.200

试试这种方式：

```
NSMutableArray *row1=[NSMutableArray arrayWithObjects:@1,@2,@3, nil];
NSMutableArray *row2=[NSMutableArray arrayWithObjects:@4,@5,@6, nil];
NSMutableArray *row3=[NSMutableArray arrayWithObjects:@7,@8,@9, nil];

NSMutableArray *twoDArray=[NSMutableArray arrayWithObjects:row1,row2,row3, nil];
NSLog(@"%@",twoDArray);

NSMutableArray *transposedArray=[NSMutableArray new];
for (NSInteger i=0; i<[row1 count]; i++) {
    NSArray *array=[NSArray arrayWithObjects:[row1 objectAtIndex:i],[row2 objectAtIndex:i],[row3 objectAtIndex:i],nil];
    [transposedArray addObject:array];
}
NSLog(@"Your transposed array: %@",transposedArray); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-24T16:54:35.453

假设你有一个一般的矩形 twoDArray。然后，您可以使用此方法对其进行转置。

```
-(NSArray *)transposedArray:(NSArray *)twoDArray {
    NSUInteger rows = (int) twoDArray.count;
    NSArray *a = twoDArray[0];
    NSUInteger cols = a.count;

    NSMutableArray *transposedTwoDArray = [[NSMutableArray alloc] init];

    for(int i=0; i<cols; i++)
    {
        NSMutableArray *rowArr = [[NSMutableArray alloc] init];
        for(int j=0; j<rows; j++)
        {
            [rowArr addObject:twoDArray[j][i]];
        }
        [transposedTwoDArray addObject:rowArr];
    }

    return transposedTwoDArray;
} 
```

# android - 唤醒锁机制

> ID：14091741
> 
> 赞同：0
> 
> 时间：2012-12-30T14:59:03.763
> 
> 标签：android

在我的应用程序中有一个广播接收器，它在特定时间由带有 RTC_WAKEUP 的警报调用。此接收器首先获取部分锁定，因此它不会终止，然后检查条件，如果为真，则启动一个活动，通过获取完整锁定和解锁键盘保护来完全打开手机。

经过一些测试和试验，我发现广播接收器的生命周期在开始活动之前就结束了，并且一旦结束，部分锁定就会被释放。

*   所以我想知道设备是否处于睡眠状态，活动是否会启动以便获得完全锁定？

*   或者一旦广播接收器结束，设备就会重新进入睡眠状态，并且活动的开始被推迟到它再次醒来的时候？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T15:14:45.130

1.  如果要在 BroadcastReceiver 中启动 Activity，请不要忘记添加标志：FLAG_ACTIVITY_NEW_TASK

    ```
     public void onReceive(Context context, Intent i) {
      if (check condition) {
        Intent intent = new Intent();
        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
         intent.setClass(context,THE_ACTIVTY_YOU_WANT_TO_START.class);
        context.startActivity(intent);
            } 

     } 
    ```

2.  使用 FULL_WAKE_LOCK 强制打开屏幕，在 onCreate() 方法中添加以下代码即可。

    ```
    pm = (PowerManager) getSystemService(Context.POWER_SERVICE);

        km = (KeyguardManager) getSystemService(Context.KEYGUARD_SERVICE);
        kl = km.newKeyguardLock("info");
        wl = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK
                | PowerManager.ACQUIRE_CAUSES_WAKEUP
                | PowerManager.ON_AFTER_RELEASE, "info");
        kl.disableKeyguard(); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:07:10.010

在浏览 GCM 手册时，我发现了以下章节：

[http://developer.android.com/google/gcm/gcm.html#handling_intents](http://developer.android.com/google/gcm/gcm.html#handling_intents)

我认为您必须在仍然处于 BroadcastReceiver#onReceive 的同时获得 WakeLock。他们在 IntentService 中使用静态 WakeLock。

# php - 使用 PHP 获取数据库相关信息等

> ID：14091746
> 
> 赞同：0
> 
> 时间：2012-12-30T14:59:35.067
> 
> 标签：php, statistics

我需要一些方法来获取我的网站的一些统计数据。

有没有办法通过 PHP 获取这些信息：

*   数据库大小 - 我的网站存储其信息的数据库的大小
*   数据库服务器 - 我正在使用的数据库类型的名称和版本（例如：MySQL 5.5.24-log）
*   内存使用情况

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T15:02:51.650

请参阅 PHP 文档了解您可以使用的功能

[http://php.net/manual/en/mysqli.stat.php](http://php.net/manual/en/mysqli.stat.php)

[http://php.net/manual/en/function.mysql-stat.php](http://php.net/manual/en/function.mysql-stat.php)

[http://php.net/manual/en/pdo.getattribute.php](http://php.net/manual/en/pdo.getattribute.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T15:03:31.000

*   **数据库大小 - 我的网站存储其信息的数据库的大小**

    试试这个以字节为单位的大小：

    ```
    mysqli_select_db("yourdatabase");  
    $q = mysqli_query("SHOW TABLE STATUS");  
    $size = 0;  
    while($row = mysqli_fetch_array($q)) {  
        $size += $row["Data_length"] + $row["Index_length"];  
    } 
    ```

    然后以兆字节转换：

    ```
    $decimals = 2;  
    $mbytes = number_format($size/(1024*1024),$decimals); 
    ```

*   **数据库服务器 - 我正在使用的数据库类型的名称和版本（例如：MySQL 5.5.24-log）**

    我不认为你可以..你也可以使用多个数据库（参见#1）。您始终可以使用[`mysqli_stats`](http://php.net/manual/en/mysqli.stat.php)or获取当前版本[`PDO::getAttribute`](http://php.net/manual/en/pdo.getattribute.php)，但您必须首先连接到您的数据库（MySQL、Oracle 或我们）。

*   **内存使用情况**

    利用[`memory_get_usage`](http://php.net/manual/en/function.memory-get-usage.php)

# jquery - ui-slider 重叠的滑块无法拖动

> ID：14091747
> 
> 赞同：0
> 
> 时间：2012-12-30T14:59:57.787
> 
> 标签：jquery, jquery-ui

在 1.9.2 中使用默认的 ui-slider 时，两个把手碰撞时会出现一个小问题，无法拖动右侧把手。

见这里：http: [//jqueryui.com/slider/#range](http://jqueryui.com/slider/#range)

将两个车把放在一起，然后尝试增加较高的值，不起作用。

然后我发现了这个帖子：

[https://stackoverflow.com/a/4254932/1905754](https://stackoverflow.com/a/4254932/1905754)

这是一个解决方案，但它适用于 1.8.6，所以我在 1.9.2 中找不到要编辑的那些代码行。有人知道 1.9.2 是否有类似的解决方案？

谢谢。

抱歉英文不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T15:28:12.010

尝试在 jquery.ui.js 中找到以下代码（函数 _mouseCapture，第 12313 行）

```
 // workaround for bug #3736 (if both handles of a range are at 0,
        // the first is always used as the one with least distance,
        // and moving it is obviously prevented by preventing negative ranges)
        if( o.range === true && this.values(1) === o.min ) {
            index += 1;
            closestHandle = $( this.handles[index] );
        }

        // my fix
        if( o.range === true && this.values(1) === this.values(0) ) {
            if(normValue <= this.values(0)){
                index = 0;
            }
            else {
                index = 1;
            }
            closestHandle = $( this.handles[index] );
        }
        // end of my fix 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-18T04:13:50.183

这不是永久修复，但有助于使滑块可拖动。

```
$('#slider-range').slider
  start: (event, ui) ->
    # Only when sliders are overriding
    if ui.values[0] == ui.values[1]
      set_min = ui.values[0] - 0.1
      set_max = ui.values[1]
      # Deducing value of left slider by 0.1(or you can give step value based on your condition)
      $('#slider-range').slider('values', [set_min,set_max])
      return false
   slide: (event, ui) ->
     # Some statements
   stop: (event, ui) ->
     # Some statements 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-03T12:40:55.293

我建议替换此代码 _mouseCapture

```
this.handles.each(function( i ) {
        var thisDistance = Math.abs( normValue - that.values(i) );
        if (( distance > thisDistance ) ||
            ( distance === thisDistance &&
                (i === that._lastChangedValue || that.values(i) === o.min ))) {
            distance = thisDistance;
            closestHandle = $( this );
            index = i;
        }
    }); 
```

和

```
this.handles.each(function( i ) {
        if (event.target == that.handles[i]) {
            index = i;
            closestHandle = $( this );
        }
    }); 
```

# c# - 将文本修剪为特定大小

> ID：14091751
> 
> 赞同：3
> 
> 时间：2012-12-30T15:01:40.257
> 
> 标签：c#, xna

我有一些文本想要显示在游戏底部的某种日志中。

我想要一种方法来确保文本适合特定大小，如果超过那个大小，我会自己修剪它（“bla bla bl ...”）

我知道我可以通过使用 SpriteFont.MeasureString 获得文本将采用的大小 - 所以我知道特定字符串是否会超出限制。

最明显的解决方案涉及这种循环

```
StringBuilder display = new StringBuilder();

foreach (char c in string)
{
 if mySpriteFont.MeasureString((display.Append(c)) > SOMEAMOUNT
{
  display.append("...");
return display.toString();
}

} 
```

但是，我担心这种事情做起来非常昂贵。还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T21:20:49.520

您将不得不在某处使用 MeasureString，这只是您使用的算法的一个例子。天真的解决方案是从末尾裁剪一个字符，直到字符串适合。一个更好的建议是将它切成两半，看看它是否合适，然后以这种方式找到解决方案。另一种方法是测量一次字符串长度，然后根据字符串在边界外的比例进行近似。例如，如果您的限制是 100 像素，并且您有一个 400 像素宽的字符串，则裁剪字符串的最后 3/4（以字符为单位）。然后，通过删除或添加近似字符串的一半，并递归直到您在一个字符内，恢复到“因子 2”方法。对于大多数情况，这应该足够快，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T17:57:56.933

我知道如何测量字符串长度的唯一方法是`SpriteFont.MeasureString("text")`. 如果你每帧都为很多字符串做这可能会很昂贵，但是如果你只做一次并将结果字符串保存到某个字典、数组或列表中，你可以从那里每帧都得到它们，那将会很多更便宜。

例如，您有`"a very long string that doesn't fit into a small text box"`. 你做到了

```
a very long string
that doesn't fit
into a small text
box 
```

并将其放入`Dictionary<string, string>`您正在解析的初始字符串的键中。然后你可以像这样使用它：

```
if (ParsedStringDic.ContainsKey(unparsedString))
    displayedString = ParsedStringDic[unparsedString];
else
    ParseString(unparsedString); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T15:22:22.330

不知道它是否适用，`XNA`但`C#`我会先检查长度 `string.Length` 是否大于我的限制，然后使用子字符串方法修剪它

```
string newString;

your method
{
  if(string.Length > mylimit)
  {
    newString = yourString.Substring(0, 3);
  }
} 
```

# javascript - tv-tab-container js 用于带有闭包库的工作选项卡

> ID：14091752
> 
> 赞同：4
> 
> 时间：2012-12-30T15:01:54.947
> 
> 标签：javascript, navigation, dom-events, google-closure, google-tv

我有一个项目涉及使用 Google TV UI Closure 库进行键盘/d-pad 导航。我正在使用从 Google 的 appspot tvui 演示中复制的代码用于 tv-tab-container

```
<div class="tv-tab-container tv-container-vertical">
  <div class="tv-tab-container-bar tv-container-horizontal">
    // Tab bar components.
  </div>
  <div class="tv-tab-container-content tv-container-horizontal">
    // Content components.
  </div>
</div> 
```

我的印象是闭包库会处理更改选项卡的内容，但事实并非如此。有人知道制作标签功能所需的Javascript吗？我不太了解闭包库的事件处理与 tv-tab-container-bar 选项卡。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T19:15:45.180

tvuidemos.appspot.com/ 上的标签容器演示运行良好。首先，您的 HTML 需要使用内容组件进行如下增强：

选项卡 1 选项卡 2 选项卡 3 选项卡 4 内容 1 内容 2 内容 3 内容 4

其次，您可能需要包含更多的 js 文件，而不仅仅是 tab_container.js。此链接列出了您可能需要的依赖项：

[http://tvuidemos.appspot.com/static/tv-ui/deps.js](http://tvuidemos.appspot.com/static/tv-ui/deps.js)

如果您有一个公共 URL 可以共享您的选项卡容器示例，则可能更容易查明问题所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T03:05:19.550

您的问题中没有足够的细节来允许任何合理的答案。请使用更多详细信息和代码以及您要实现的目标来修改您的问题。

编辑 1：同样，您所问的问题中没有任何信息。您的问题是“为什么我的代码不起作用”，但您没有提供对代码的访问权限。诸如“它看起来正确，但它不起作用”之类的陈述并没有让您深入了解为什么您无法让您的代码工作。我的建议是：将您的代码发布到 github 之类的地方并提供一个链接（所有相关文件以重现您的问题），或者将您的代码托管在某个处于运行状态的地方，以便可以在 Google TV 上查看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T22:38:11.580

此演示中的选项卡容器：[http](http://tvuidemos.appspot.com/#) ://tvuidemos.appspot.com/#如下所示。

<div class="tv-tab-container tv-container-vertical"> <div class="tv-tab-container-bar tv-container-horizo​​ntal demo-tab-bar"> <div class="demo-tab tv -component">标签1</div>< div class="demo-tab tv-component">标签2</div><div class="demo-tab tv-component">标签3</div>< div class="demo-tab tv-component">tab 4</div> </div> < div class="tv-tab-container-content tv-tab-container-focus-attractor tv-container-horizo​​ntal demo-tab -content-container"> <div class="tab-demo-content tv-component">内容1</div> ...
< /div> </div>

</div> </div>

请注意 tv-tab-container 需要在那里，因为它在[http://tvuidemos.appspot.com/static/tv-ui/tab_container.js](http://tvuidemos.appspot.com/static/tv-ui/tab_container.js)文件中使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T19:40:24.370

好吧，在这一切之后，当专注于 tv-tab-container 时，我最终只为键盘左右编写了自己的事件侦听器，并使用 setFocusedComponent() 通过使用动态创建的 div id 来相应地更改选项卡内容。我仍然不完全确定为什么除了 tv-tab-container 之外的所有其他 tv-ui 组件都对我有用，但这模仿了我所追求的相同行为

```
function updateTabContent(content, tab)
{
//sets the correct tab and content to be focused and visible
var allContentDivs = $('.tab-demo-content').hide();
var contentToShow = $('#'+content);
contentToShow.show();

var elementToFocus = goog.dom.getElement(content);
var componentToFocus = tv.ui.getComponentByElement(elementToFocus);
tv.ui.Document.getInstance().setFocusedComponent(componentToFocus);

elementToFocus = goog.dom.getElement('tab' + tab);
componentToFocus = tv.ui.getComponentByElement(elementToFocus);
tv.ui.Document.getInstance().setFocusedComponent(componentToFocus)

} 
```

# android - 如何在其中创建新行或制表符 XML（日食/安卓）？

> ID：14091760
> 
> 赞同：127
> 
> 时间：2012-12-30T15:02:39.677
> 
> 标签：android, xml, eclipse, tabs, line

因此，在我的 strings.xml 中，我有一个很长的文本，我想以某种方式对其进行格式化。如何在文本的第一句之前放置一个制表符？另外，新行的代码是什么？谢谢

* * *

## 回答 #1

> 赞同：214
> 
> 时间：2012-12-30T15:05:19.607

添加`\t`标签和`\n`新行。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-12-30T15:14:24.723

用于`\n`换行符以及`\t`如果要插入制表符。

您还可以将一些 XML 标记用于基本格式设置：`<b>`粗体文本、`<i>`斜体和`<u>`带下划线的文本

更多信息：

[https://developer.android.com/guide/topics/resources/string-resource.html](https://developer.android.com/guide/topics/resources/string-resource.html)

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2021-01-20T06:24:34.770

**\n**对我不起作用。所以我使用`<br/>`了 HTML 标签

```
<string name="message_register_success">
    Sign up is complete. <br/>
    Enjoy a new shopping life at fatherofapps.com!!
</string> 
```

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2015-04-10T07:28:18.563

使用 \t 添加制表符，使用 \n 添加新行，下面是一个简单的示例。

```
<string name="list_with_tab_tag">\tbanana\torange\tblueberry\tmango</string>
<string name="sentence_with_new_line_tag">This is the first sentence\nThis is the second scentence\nThis is the third sentence</string> 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2019-02-20T12:24:30.107

在 string.xml 的顶部添加这一行

```
<?xml version="1.0" encoding="utf-8"?> 
```

并使用

```
'\n' 
```

从你想断线的地方。

前任。`<string> Hello world. \n its awesome. <string>`

输出：

```
Hello world.
its awesome. 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2012-12-30T15:05:09.683

您可以使用`\n`换行符和`\t`制表符。此外，额外的空格/制表符只是按照你写它们的方式复制的，`Strings.xml`所以只要在你想要的地方给几个空格。

达到此目的的更好方法可能是在视图 xml 中使用填充/边距，并将长文本拆分为不同的字符串`string.xml`

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2021-04-08T14:24:15.023

`\n`似乎不起作用`tools:text`

您可以使用`<br/>`来获取包括换行符的预览，但它不会显示在设备上，除非您使用类似的格式设置文本`Html.fromHtml()`

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-12-22T04:29:15.223

为选项卡添加 '\t'

```
<string name="tab">\u0009</string> 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2021-09-15T19:29:33.473

用于空间使用和XML 字符串中`\t`的新行使用，例如`\n`

```
<string name="name">\tFirst Sentence\nSecond Sentence</string> 
```

输出将是

```
 First Sentence
Second Sentence 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-07-07T08:13:25.627

在 Android Studio 4 中，以上所有内容都对我不起作用。起作用的是：

```
<br>first line\n</br>second line 
```

注意：需要 \n 和 br-tags。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-12-26T09:31:21.213

*   在你的布局中包含这一行`xmlns:tools="http://schemas.android.com/tools"`
*   现在，`\n`用于新行和`\t`制表符之类的空格。
*   例子 ：

    对于**\n**： `android:text="Welcome back ! \nPlease login to your account agilanbu"`

    对于**\t**： `android:text="Welcome back ! \tPlease login to your account agilanbu"`

# c# - 如何以编程方式更改 MS Project 2007 单元格中的背景颜色？

> ID：14091769
> 
> 赞同：0
> 
> 时间：2012-12-30T15:03:34.440
> 
> 标签：c#, ms-project, office-automation

我正在尝试使用 C# 自动化一些 MS Project 功能，但找不到如何更改特殊任务单元格的背景和字体颜色的解决方案。

我在该代码示例中枚举了项目中的所有任务，如果 statemet 为真，我想更改当前单元格颜色

```
foreach(Task t in Project.Tasks)
{
    if(t.Name=="TaskName")
    {
        //I want to change back color of current cell here
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T07:25:12.343

最简单的部分是如何选择一个单元格并更改单元格的颜色：`Application.SelectTaskCell`选择一个单元格[链接到 MSDN](http://msdn.microsoft.com/en-us/library/office/office.vbapj.chm2068.aspx)并`Application.ActiveCell.CellColor`设置单元格[链接的颜色到 MSDN](http://msdn.microsoft.com/en-us/library/office/office.vbapj.chm131593.aspx)

但是有一个棘手的部分：`Application.SelectTaskCell`接受`rowId`作为第一个参数，并且无法通过任何任务属性获取行 id。所以我在我的测试样本中做了什么：

1.  通过切换到“所有任务”过滤器（`Project.TaskFilters`集合）禁用过滤器
2.  禁用分组 ( `Application.GroupApply("No Group")`)
3.  禁用自动筛选 ( `Application.AutoFilter = False`)
4.  通过 ID 处理所有内容 ( `Application.Sort(Key1:="ID", Ascending1:=True)`)

之后 Task.ID 应该非常接近任务行的 Id。您可以仔细检查选择了哪些任务，`ActiveCell.Task`但这取决于您。

# php - 使用 PHP 5.2 在浏览器中安全显示上传文件的最佳方法是什么

> ID：14091770
> 
> 赞同：0
> 
> 时间：2012-12-30T15:03:38.857
> 
> 标签：php, file, upload, mime-types, php-5.2

我正在尝试使用 PHP 为用户上传的文件提供服务。

虽然只指向文件很容易，但似乎一致认为您不应该直接指向网站上的目录，因为这会产生安全风险......如果有人可以通过网站障碍获取恶意文件，如果他们知道它在服务器上的位置，那么他们执行它就很容易了。相反，建议将文件放在站点树结构之外的文件夹中，将名称作为原始名称以外的其他名称存储在数据库中，以及隐藏目录的文件路径，并使用读取和显示的 PHP 文件提供它. 我能够做到这一切并使用以下方法显示乱码：

```
// get mime type somehow//

header("Content-type:".$mimetype);
readfile($totalfilepath); 
```

问题是如何获得正确的 mime 类型，以便它显示一个漂亮的文件而不是乱码。

如果你有 5.3，你可以使用 finfo 如下：

```
$finfo = finfo_open(FILEINFO_MIME_TYPE);
header("Content-Type: ".finfo_file($finfo, 'files/'.$file));
finfo_close($finfo);
readfile('files/'.$file); 
```

不幸的是，finfo 在 5.2 中不起作用 还有一个函数叫做

```
mime_content_type 
```

但是，从 4.xx 开始，它已被弃用，并且无论如何都不在我的服务器上。根据我的阅读，在 5.3 之前似乎没有可靠的方法来获取 mime 类型。我不想升级到 5.3，因为它需要升级一个非常大的站点。

注：允许上传的文件包括.jpg、.gif、.png、.pdf文件，主要office文件、doc、docs、xls、xlx等和txt文件。

此外，我愿意强制下载文件而不是在浏览器中显示它们，但是，首选是在浏览器中显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T15:27:42.383

所需信息由`getimagesize()`函数返回。[PHP 手册](http://php.net/manual/en/function.getimagesize.php)中解释了如何获取这些信息。该`image_type_to_mime_type()`功能也很有帮助。在线手册中也提供了[示例。](http://php.net/manual/en/function.image-type-to-mime-type.php)

# java - 与 Arrays.asList() 不兼容的类型

> ID：14091771
> 
> 赞同：37
> 
> 时间：2012-12-30T15:03:46.387
> 
> 标签：java, generics

在下面的示例中，如果列表中有多种类型，它可以编译，但如果我有一个元素，它会选择另一种不再可分配的类型。

```
// compiles fine
List<Class<? extends Reference>> list = Arrays.asList(SoftReference.class, WeakReference.class);
// but take an element away and it no longer compiles.
List<Class<? extends Reference>> list2 = Arrays.asList(WeakReference.class);
// without giving the specific type desired.
List<Class<? extends Reference>> list3 = Arrays.<Class<? extends Reference>>asList(WeakReference.class); 
```

我确信对此有一个合乎逻辑的解释，但它逃脱了我。

```
 Error:Error:line (30)error: incompatible types
required: List<Class<? extends Reference>>
found:    List<Class<WeakReference>> 
```

为什么有两个元素可以编译而一个元素不能编译？

顺便说一句：很难找到一个简单的例子，如果你尝试

```
List<Class<? extends List>> list = Arrays.asList(ArrayList.class, LinkedList.class);

    Error:Error:line (28)error: incompatible types
required: List<Class<? extends List>>
found:    List<Class<? extends INT#1>>
where INT#1 is an intersection type:
INT#1 extends AbstractList,Cloneable,Serializable 
```

这也不能编译（它甚至不会解析）

```
List<Class<? extends AbstractList & Cloneable & Serializable>> list = Arrays.asList(ArrayList.class, LinkedList.class);

Error:Error:line (30)error: > expected
Error:Error:line (30)error: ';' expected 
```

但这编译得很好

```
static abstract class MyList<T> implements List<T> { }
List<Class<? extends List>> list = 
        Arrays.asList(ArrayList.class, LinkedList.class, MyList.class);
List<Class<? extends List>> list = 
        Arrays.<Class<? extends List>>asList(ArrayList.class, LinkedList.class); 
```

* * *

编辑：基于马尔科的例子。在这四个示例中，一个不编译，其余的生成相同类型的相同列表。

```
List<Class<? extends Reference>> list = new ArrayList<>();
list.add(SoftReference.class);
list.add(WeakReference.class);
list.add(PhantomReference.class);

List<Class<? extends Reference>> list = new ArrayList<>(
     Arrays.asList(SoftReference.class));
list.add(WeakReference.class);
list.add(PhantomReference.class);

List<Class<? extends Reference>> list = new ArrayList<>(
     Arrays.asList(SoftReference.class, WeakReference.class));
list.add(PhantomReference.class);

List<Class<? extends Reference>> list = new ArrayList<>(
     Arrays.asList(SoftReference.class, WeakReference.class, PhantomReference.class)); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-30T15:08:31.563

有趣的问题。我认为正在发生的事情是这样的。当您有两个像您展示的元素时，返回类型 from`asList`是所有参数中最具体的类型，在您的第一个示例中是`List<Reference>`. 这与赋值兼容`List<? extends Reference>`。当你有一个参数时，返回类型是参数的特定类型，它不是赋值兼容的，因为泛型不是协变的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-30T17:04:37.637

考虑

```
 // ok
    List<Object> list3 = Arrays.asList(new Object(), new String());
    // fail
    List<Object> list4 = Arrays.asList(new String()); 
```

第二个示例尝试将 a 分配`List<String>`给 a `List<Object>`，但失败了。

第二个例子可以工作，如果 javac 查看周围的上下文，考虑到目标类型，并推断出`T=Object`在这里可以工作。Java 8 可能会这样做（我不确定）

只有在一种情况下，javac（java 5）将使用上下文信息进行类型推断，请参阅[http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12。 2.8](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2.8)

我们可以利用它来解决问题

```
public static <R, T extends R> List<R> toList(T... elements)
{
    return Arrays.asList((R[])elements);
} 
```

现在可以编译它们：

```
 List<Object> list4 = toList(new String());

    List<Class<? extends Reference>> list = toList(SoftReference.class, WeakReference.class);

    List<Class<? extends Reference>> list2 = toList(WeakReference.class); 
```

这是因为`R`无法从参数类型推断，并且方法结果在赋值上下文中，所以 javac 尝试`R`通过目标类型推断。

这适用于赋值或返回语句

```
List<Class<? extends Reference>> foo()
{
    return toList(WeakReference.class);  // "subject to assignment conversion"
} 
```

否则将无法正常工作

```
void bar(List<Class<? extends Reference>> list){...}

bar( toList(WeakReference.class) ); // fail; R not inferred 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-30T16:32:34.937

对这种行为的解释分为两部分：

1.  右手边的类型如何随着参数的变化而变化？
2.  为什么有些 RHS 类型与 LHS 类型不兼容？

### 1\. 右手边

的签名`asList`是

```
<T> List<T> asList(T... a) 
```

这意味着必须将所有参数合并为一个类型`T`，这是*所有参数类型中最常见的特定类型*。在这种特殊情况下，我们有

```
asList(WeakReference.class) -> List<Class<WeakReference>> 
```

和

```
asList(WeakReference.class, SoftReference.class) 
   -> List<Class<? extends Reference>> 
```

这两个都很明显。

### 2\. 左侧

现在，为什么我们不能将 type 的第一个表达式分配给 type`List<Class<WeakReference>>`的变量`List<Class<? extends Reference>>`？理解为什么规则必须如此的最好方法是反证法。考虑以下：

*   `List<Class<? extends Reference>>`有`add(Class<? extends Reference>)`
*   `List<Class<WeakReference>>`有`add(Class<WeakReference>)`。

现在，如果 Java 允许您将一个分配给另一个：

```
List<Class<WeakReference>> lw = new ArrayList<>();
List<Class<? extends Reference>> lq = lw;
lq.add(PhantomReference.class); 
```

这将导致明显违反类型安全。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-30T15:16:36.250

这是有趣的：

```
where INT#1 is an intersection type:
INT#1 extends AbstractList,Cloneable,Serializable 
```

也许这就是（某些）问题的原因？

元素的*交集*类型可能不是唯一确定的。当您声明自己的列表`MyList<T> implements List<T>`时，数组的交集类型被确定为`List<T>`。

当使用`Arrays.<Class<? extends List>>asList(ArrayList.class, LinkedList.class);`'intersection' 类型时，明确说明（as `List`）并且不需要由编译器推断。

除此之外，我相信 Ted Hopp 所说的对另一种情况是正确的。

编辑：

和...之间的不同

```
List<Class<? extends Reference>> list2 = Arrays.asList(WeakReference.class); 
```

和

```
List<Class<? extends Reference>> list3 = Arrays.<Class<? extends Reference>>asList(WeakReference.class); 
```

可能是编译器确定新列表类型的时间点：我认为它需要在考虑分配*之前*确定列表的泛型类型。为此，它需要它必须推断新列表类型的信息，*而不*考虑分配。这可能会导致上述两个语句创建两种不同类型的列表，从而导致观察到的行为。

# javascript - JavaScript 和 SVG：createElement() 上的错误

> ID：14091773
> 
> 赞同：2
> 
> 时间：2012-12-30T15:04:12.687
> 
> 标签：javascript, svg

所以我所拥有的是一个没有 HTML 的 SVG 文档，并且在 - 部分中`<defs>...</defs>`我有我的 JavaScript。其中，有一个创建椭圆弧的函数（尽管我只会将它用于圆弧，在本例中，仅用于圆）和另一个使用前一种方法创建圆的函数。这可能不是目前最优雅的方式，但我稍后会研究......

但是，现在，在尝试通过`createElement()`我在 Chrome 和 Firefox 中创建新元素时，SVG-DOM-Object 不包含该方法的错误。

这是代码：

```
var SVGObj = document.getElementById('canvas');
function Point(x, y) {
  this.x = x;
  this.y = y;
}

var ids =  new Array();
ids.nextID = nextID;
function nextID() {
  this.push(this.length);
  return this.length;
}

function hypot(pointA, pointB) {
  return Math.sqrt((pointA.x - pointB.x) * (pointA.x - pointB.x) + (pointA.y - pointB.y) * (pointA.y - pointB.y))
}

function arc(center, from, to, fill) {
  if (hypot(center, from) == hypot(center, to))
    radius = hypot(center, from);
  else 
    return false;
  var arch = SVGObj.createElement('path');
  arch.setAttribute('d', 'M ' + center.x + ',' + center.y + //Mittelpunkt
                        ' A ' + radius + ' ' + radius + //Radius
                        ' ' +  (Math.atan((from.y - center.y) / (from.x - center.x)) * 180 / Math.PI) + ' 1 0 ' + //from
                        to.x + ',' + to.y); //to
  arch.setAttribute('id', ids.nextID());
  if(fill) arch.setAttribute('style', 'fill: black');
  SVGObj.appendChild(arch);
  return true;
}

function fullCircle(center, radius, fill) {
  return arc(center, new Point(center.x + radius, center.y + radius), new Point(center.x + radius, center.y + radius), fill);
}

if(!fullCircle(new Point(100, 50), 40, true)) alert("Fehler"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-30T16:39:38.690

您需要使用`document.createElementNS('http://www.w3.org/2000/svg', 'path')`在 SVG 命名空间中创建路径元素。

# ios - 具有多种本地化的 InAppSettingsKit

> ID：14091774
> 
> 赞同：0
> 
> 时间：2012-12-30T15:04:17.703
> 
> 标签：ios, cocoa-touch, localization, settings.bundle, inappsettingskit

我在我的 iPad 应用程序中使用 InAppSettingsKit，包括英语、德语和日语的本地化字符串。一切正常，但我希望能够在应用程序内切换语言，这似乎不受 InAppSettingsKit 的支持。这是我的 showSettings 方法：

```
// show the inapp settings view
-(void) showSettings
{
  IASKAppSettingsViewController *settingsViewController = [[IASKAppSettingsViewController alloc] initWithStyle:UITableViewStyleGrouped];
  settingsViewController.delegate = self;
  settingsViewController.showDoneButton = YES;

  UINavigationController* navController = [[UINavigationController alloc] initWithRootViewController:settingsViewController];

  [self presentModalViewController:navController animated:NO];
} 
```

因此每次都会重新创建设置 VC，但似乎会重新使用初始应用程序启动时的语言选择。

用户的语言选择同时写入我的私人“语言”设置`[NSUserDefaults standardUserDefaults]`以及“AppleLanguages”数组中。

旧语言信息在哪里/如何缓存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T13:35:21.100

这是 iOS 的标准行为，通常你不应该改变它。您可能可以使用 NSUserDefaults 中的 AppleLanguages 键（或其他键）更改它，但 AFAIK 当前语言在应用程序启动后始终是静态的。

# facebook - Trigger.io - FQL 支持？

> ID：14091775
> 
> 赞同：1
> 
> 时间：2012-12-30T15:04:26.747
> 
> 标签：facebook, facebook-graph-api, facebook-fql, trigger.io

因此，使用 Trigger.io 的[facebook.api 函数](http://docs.trigger.io/en/v1.4/modules/facebook.html#facebook-api)可以正常工作：

```
forge.facebook.api('me', function (data) {
    console.log(data)
}) 
```

这几乎与您使用 FB.api 的方式相同。

但是这个例子什么也没返回：

```
forge.facebook.api({
    method: 'fql.query',
    query: 'SELECT uid, first_name, last_name FROM user WHERE uid = me()'
},
function(data) {
   console.log(data)
}) 
```

Trigger.io 是否支持 FQL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:50:53.573

知道了：

```
 forge.facebook.api('/fql?q='+encodeURIComponent('FQL QUERY'), function (data) {
     console.log(data) 
 }) 
```

# php - 如何在另一个类中使用一个对象：PHP 框架

> ID：14091776
> 
> 赞同：0
> 
> 时间：2012-12-30T15:04:32.143
> 
> 标签：php

这是我正在制作的框架的当前系统：

`__get`我根据请求创建一个对象以访问不存在的属性，该属性通过核心类中定义的函数具有现有类的名称。Core 类扩展了每个类。

所以它是这样工作的：

```
class Someclass extends Core
{
    public function classmethod()
    {
        $this->otherclass->method();
    }
} 
```

这正是我希望它工作的方式。但是，我不知道（经过很多挫折之后）如何使用这个系统编辑/创建对象的属性。

所以这样的事情是行不通的。

```
$this->view->somevar = "newvalue"; // this doesn't work. 
```

我想它必须与 __set 函数有关，但我没能找到。

我收到了以下如何解决这个问题的建议：

依赖注入、命名空间、单例模式。

我很想看看如何使用其中一种模式来实现我正在尝试做的事情。

我不知道选择哪个来解决我的简单问题：在其他类中使用对象，所以我不需要将任何东西放入 __construct 的参数或使用全局变量。

我在用`__autoload.`

我希望我能在你的帮助下解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T15:36:01.650

首先，您尝试的架构非常糟糕。显然，您正在使用“魔术”来创建作为属性附加到其他对象的对象。这很糟糕，因为如果你使用_get */* _set，你迟早会遇到问题。从一个共同的父级扩展也是一件坏事，因为它会生成巨大的继承树，并且它允许大多数对象具有多个责任。

在开始一个框架之前，您可能需要查看：[SOLID](http://en.wikipedia.org/wiki/Solid_%28object-oriented_design%29)

现在回到你的问题，如果你使用 __get 来获取一个值，你也可以使用 __set 来设置一个值。

__construct 方法的存在是为了允许您使用它需要的所有数据来初始化对象，以实现他的唯一目的。避免 __construct 有点愚蠢，并且违背了目的。您可能需要注意 SOLID 中的 D，以便了解依赖倒置的真正含义并理解它。

使用 __set 完全失去了输入提示接口等的能力。因此，代码可能会变得非常错误并且难以理解，因为流程没有很好地定义，并且分配是通过魔术在后面完成的。此外，我还可以提出 100 万个其他原因来说明您尝试使用的架构是错误的，但我会再等一下。

# xml - 如何断言元素值是某种类型？

> ID：14091778
> 
> 赞同：1
> 
> 时间：2012-12-30T15:04:54.543
> 
> 标签：xml, xslt

有没有一种好方法可以断言当前元素的值必须是某种类型（例如 xs:integer），如果不是则抛出异常？使用 XSL 2.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T16:57:03.217

**可以使用[FXSL](http://fxsl.sf.net)`f:type()`库的功能来动态确定变量/值的类型**。

这是 FXSL 中的测试转换`f:type()`

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema"
 xmlns:f="http://fxsl.sf.net/"
 exclude-result-prefixes="f xs"
 >
  <xsl:import href="../f/func-type.xsl"/>

  <!-- To be applied on ../data/numList.xml -->

  <xsl:output omit-xml-declaration="yes"/>

  <xsl:template match="/">
    f:apply(f:typeConstructor(11),'03'): <xsl:value-of select="f:apply(f:typeConstructor(11),'03')"/>
    f:apply(f:typeConstructor('xxx'),'03'): <xsl:value-of select="f:apply(f:typeConstructor('xxx'),'03')"/>
    f:apply(f:typeConstructor(11),'03') gt 4: <xsl:value-of select="f:apply(f:typeConstructor(11),'03') gt 4"/>
    f:type(f:apply(f:typeConstructor(11),'03')): <xsl:value-of select="f:type(f:apply(f:typeConstructor(11),'03'))"/>
    f:type(f:apply(f:typeConstructor('string'), 3)): <xsl:value-of select="f:type(f:apply(f:typeConstructor('string'),'03'))"/>
<!--  Supported only by a SA Processor -->
    xs:token('abc') : <xsl:value-of  select="f:type(xs:token('abc'))"
       use-when="system-property('xsl:is-schema-aware')='yes'"/>

    -1 : <xsl:value-of select="f:type(-1)"/>
<!--  Supported only by a SA Processor -->
    xs:negativeInteger(-1) : <xsl:value-of select="f:type(xs:negativeInteger(-1))"
       use-when="system-property('xsl:is-schema-aware')='yes'" />
    xs:nonPositiveInteger(0) : <xsl:value-of select="f:type(xs:nonPositiveInteger(0))"
       use-when="system-property('xsl:is-schema-aware')='yes'" />

    0 : <xsl:value-of select="f:type(0)"/>
    3 : <xsl:value-of select="f:type(3)"/>
    3\. : <xsl:value-of select="f:type(3.)"/>
    3.0E1 : <xsl:value-of select="f:type(3.0E1)"/>
    xs:float(3) : <xsl:value-of select="f:type(xs:float(3))"/>
<!--  Supported only by a SA Processor -->
    xs:positiveInteger(3) : <xsl:value-of select="f:type(xs:positiveInteger(3))"
       use-when="system-property('xsl:is-schema-aware')='yes'" />

   '3' : <xsl:value-of select="f:type('3')"/>
   (/*/*/text())[1] : <xsl:value-of select="f:type((/*/*/text())[1])"/>
   data((/*/*/text())[1]) : <xsl:value-of select="f:type(data((/*/*/text())[1]))"/>
  </xsl:template>
</xsl:stylesheet> 
```

**将此转换应用于此 XML 文档时：**

```
<nums>
  <num>01</num>
  <num>02</num>
  <num>03</num>
  <num>04</num>
  <num>05</num>
  <num>06</num>
  <num>07</num>
  <num>08</num>
  <num>09</num>
  <num>10</num>
</nums> 
```

**产生了想要的、正确的结果：**

```
 f:apply(f:typeConstructor(11),'03'): 3
    f:apply(f:typeConstructor('xxx'),'03'): 03
    f:apply(f:typeConstructor(11),'03') gt 4: false
    f:type(f:apply(f:typeConstructor(11),'03')): xs:integer
    f:type(f:apply(f:typeConstructor('string'), 3)): xs:string

    xs:token('abc') : xs:string

    -1 : xs:integer

    xs:negativeInteger(-1) : xs:integer
    xs:nonPositiveInteger(0) : xs:integer

    0 : xs:integer
    3 : xs:integer
    3\. : xs:decimal
    3.0E1 : xs:double
    xs:float(3) : xs:float

    xs:positiveInteger(3) : xs:integer

   '3' : xs:string
   (/*/*/text())[1] : xml:node
   data((/*/*/text())[1]) : xs:string 
```

**说明**：

`f:type()`**[，从它的源代码](http://fxsl.cvs.sourceforge.net/viewvc/fxsl/fxsl-xslt2/f/func-type.xsl?revision=1.12&view=markup)**可以看出，它在内部使用 XPath 2.0 运算符`instance of`并测试从最常见类型到更具体类型的值，直到它确定特定类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T02:57:54.803

使用`cast as`运算符，例如

`'5' cast as xs:integer`返回 5

`'foo' cast as xs:integer``Cannot convert string "d" to an integer`使用撒克逊人投掷。

如果你想抛出你自己的错误，你可以使用`castable as`，例如

```
if (not('foo' castable as xs:integer)) then
   error((), 'bad') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T16:57:51.547

使用像 Saxon 9 的企业版或像 XmlPrime 或 AltovaXML 这样的模式感知 XSLT 2.0 处理器，您可以在使用 XSLT 处理输入文档时使用 W3C XML 模式来验证输入文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T16:01:27.643

在`XPath`中，您可以`instance of`这样使用：

> xs:integer 的 5 个实例

此示例返回 true，因为给定值是给定类型的实例。

有关其他信息，您可以查看[此](http://www.w3.org/TR/xpath20/#doc-xpath-InstanceofExpr)。

# javascript - JQuery Ajax Fileupload 自动提交

> ID：14091787
> 
> 赞同：1
> 
> 时间：2012-12-30T15:06:08.557
> 
> 标签：javascript, jquery, ajax, file, upload

我有这个表格

```
<form id="fileupload" name="fileupload" action="/HelloStruts2/views/audioupload.action" method="post" enctype="multipart/form-data">
    <input type="text" name="title" value="" id="fileupload_title"/>
    <input type="file" name="audioUpload" value="" id="fileupload_audioUpload"/>

    <input type="submit" id="fileupload_0" value="Submit"/>

</form> 
```

期望用户输入和来自用户的文件，一旦用户选择了要上传的文件，一旦他单击确定，他就会自动提交它，我希望在提交时提交表单，而不是在用户选择文件之后提交。这是我的脚本

```
 $('#fileupload').submit(function(e){
        $(this).fileupload({
            dataType: 'html',
            add: function (e, data) {
                data.context = $('<button/>').text('Upload')
                    .appendTo(document.body)
                    .click(function () {
                        $(this).replaceWith($('<p/>').text('Uploading...'));
                        data.submit();
                    });
            },
            done: function (e, data) {
                $('#fileupload').empty().append(data.result);
            }
        });
    }); 
```

我正在使用[这个](https://github.com/blueimp/jQuery-File-Upload)插件。我尝试将事件绑定到它，但它没有提交表单，所以我决定恢复到正常提交

# javascript - 查找并附加嵌套 选择带有连字符的菜单

> ID：14091788
> 
> 赞同：0
> 
> 时间：2012-12-30T15:06:12.880
> 
> 标签：javascript, html-lists

尝试从现有菜单创建导航，这是标记：

```
<nav>
    <ul id="nav">
        <li>
            <a href="?=home">Home</a>
            <ul>
                <li><a href="?=sub-1">Sub 1</a></li>
                <li><a href="?=sub-2">Sub 2</a></li>
                <li><a href="?=sub-3">Sub 3</a></li>
                <li><a href="?=sub-4">Sub 4</a></li>
                <li><a href="?=sub-5">Sub 5</a></li>
            </ul>
        </li>
        <li>
            <a href="?=about">About</a>
        </li>
        <li>
            <a href="?=services">Services</a>
        </li>
        <li>
            <a href="?=portfolio">Portfolio</a>
        </li>
        <li>
            <a href="?=contact">Contact</a>
        </li>
    </ul>
</nav> 
```

这是我拥有的 javascript 循环，它当前查找并附加每个顶级菜单项，但我真的不确定如何定位嵌套子级并为嵌套元素附加连字符。

```
var nav = document.getElementById('nav');
    var list = nav.children.length;

    for (var i = 0; i < list; i++) {
        var option = document.createElement('option');
        option.innerHTML = nav.children[i].children[0].innerHTML;
        option.value = nav.children[i].children[0].href;
        select.appendChild(option);
    } 
```

所以它基本上会这样做：

```
<select>
    <option value="?=home">Home</option>
    <option value="?=sub-1">- Sub 1</option>
    <option value="?=sub-2">- Sub 2</option> 
```

等等等等……

任何帮助将不胜感激！谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T15:35:16.457

你可以递归地遍历你的 ul 。这也将处理多级菜单。跟踪递归级别和更高级别的项目以与破折号连接。

该方法的描述：http: [//blog.swapnilsarwe.com/javascript-traversing-html-dom-recursively.html](http://blog.swapnilsarwe.com/javascript-traversing-html-dom-recursively.html)

* * *

**编辑**：这是一个例子。您还需要在某处放置一个 id='select' 的 HTML 选择元素：

```
buildSelect(document.getElementById('nav'), '', document.getElementById('select'));

function buildSelect(current, optionSoFar, select) {
    var currentLevelOption = optionSoFar;
    for (var i=0; i<current.children.length; i++) {
        var child = current.children[i];
        if ('A' == child.tagName) {
            var currentLevelLabel = child.innerText;
            var separator = ('' == optionSoFar) ? '' : ' - ';
            currentLevelOption = optionSoFar + separator + currentLevelLabel;
            var option = document.createElement('option');
            option.innerText = currentLevelOption;
            option.value = child.href;
            select.appendChild(option);
        }
        else {
            buildSelect(child, currentLevelOption, select);
        }
    }
} 
```

​​这里有一个小提琴：http: [//jsfiddle.net/GM54F/3/](http://jsfiddle.net/GM54F/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T16:35:52.730

只需使用 jQuery。[这是一个基于您的代码演示此示例的 jsFiddle](http://jsfiddle.net/UxNeg/)。这比编写自己的自定义代码来自己遍历 DOM 要简单得多。

```
$("#nav a").each(function(){
 myValue = $(this).attr("href");
 myText = $(this).text();    
 $("#mySelect").append("<option value="+myValue + ">" + myText +"</option>");         
}); 
```

# rest - 如何在没有 REST 服务的自我描述的情况下了解实体结构和名称

> ID：14091796
> 
> 赞同：1
> 
> 时间：2012-12-30T15:07:26.637
> 
> 标签：rest

我读过很多关于 REST 服务不需要自我描述的内容。我提供一个简单的例子。说，我想更新一个“客户”对象。作为 REST 服务的消费者，我如何在不知道确切的“客户”类名称（可能是“客户”或其他名称）及其属性的情况下发送更新信息。我知道有 WADL 可以自我描述 REST 服务。但是根据 REST 规范，不需要这个。我无法理解，消费者如何在没有自我描述的情况下知道实体名称和属性（无需人工干预）。有人可以帮我澄清一下我的概念吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T15:27:30.997

不需要！=没用

这个想法是你可以在没有实体描述的情况下构建宁静的资源请求，这与说肥皂需要你使用 wsdl 不同。

这是否意味着描述符在某些情况下没有用？不。

此外，您的服务不一定必须映射到类和属性。

# javascript - 如何在 html 字符串上使用 jquery API

> ID：14091800
> 
> 赞同：0
> 
> 时间：2012-12-30T15:08:10.617
> 
> 标签：javascript, jquery

上下文：我有一个 ajax 请求，它返回带有 html 键的数据结构。

我想用 jQuery 对象包装这些数据，以便能够使用宽度/高度等 API，并在将数据添加到 DOM 之前对其进行修改。

```
> $('<div width="220" height="200"></div>').width()
0 
```

那么我该怎么做才能获得 220 然后对其进行修改呢？

我正在使用 jquery 1.7.2

编辑：

我不是 90 年代的人，因为我在示例中使用了错误的标签。我需要更改 iframe 的宽度和高度以进行响应：

```
> $('<iframe width="220" height="200"></iframe>').width()
0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T15:10:17.280

元素在添加到 DOM 之前没有宽度。

一个解决方案，如果你真的不需要它在 DOM 中，是添加它然后分离它：

```
var d = $('<div width="220" height="200"></div>');
d.appendTo(document.body);
var w = d.width();
d.detach(); 
```

由于在脚本结束其任务之前不会重绘屏幕，因此用户不会看到此操作。

但请注意，如果没有不同的风格，这不会给你 220。你可能想要这个：

```
$('<div style="width:220px;height:200px;"></div>'); 
```

[示范](http://jsfiddle.net/BNFHY/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T15:11:59.120

1.  你一定是 90 后的，因为谁使用`width`和`height`属性在 a 上`div`？
2.  “在将其添加到 DOM 之前”没有宽度。

3.

```
$('<div width="220" height="200"></div>').attr('width') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T15:11:22.453

使用`css`：

`$('<div></div>').css({ 'width': '220px', 'height': '200px'});`

这将设置宽度和高度。既然你在设置它，那么之后真的不需要获取宽度，对吧？但如果需要，您可以使用`width()`.

**编辑：** 也许我误解了 - 问题不太清楚。如果你想获得一个元素的宽度，那么就`width`可以了，但是如上所述，需要先将元素添加到 DOM 中。

# android - Android 客户端未收到消息

> ID：14091809
> 
> 赞同：0
> 
> 时间：2012-12-30T15:09:15.420
> 
> 标签：android, sockets, client

我对android和java编程很陌生。我正在编写服务器客户端连接。我的电脑是服务器，我的安卓智能手机是客户端。服务器工作得很好。我可以从客户端向服务器发送消息，但不能从服务器向客户端发送消息。当我这样做时，客户端会自行粉碎并关闭。我真的希望任何人都可以帮助我解决我的大问题。

这是我的活动：

```
package com.example.sercerclient2zweidreidrei;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class MyActivity extends Activity {

Button btn;
EditText textOut;
TextView textIn;
TextView problems;
Button send;
private TCPClient myTcpClient;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);  

    final EditText editText = (EditText) findViewById(R.id.editText);
    final TextView textIn = (TextView) findViewById(R.id.textin);
    Button send = (Button)findViewById(R.id.send_button);

    // connect to the server
    new connectTask().execute("");

    send.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {

            String message = editText.getText().toString();

            //sends the message to the server
            if (myTcpClient != null) {
                myTcpClient.sendMessage(message);
            }
        }
    });
}

public class connectTask extends AsyncTask<String,String,TCPClient> {

    @Override
    protected TCPClient doInBackground(String... message) {

        //we create a TCPClient object and
        myTcpClient = new TCPClient(new TCPClient.OnMessageReceived() {

            @Override
            //here the messageReceived method is implemented
            public void messageReceived(String message) {
                //this method calls the onProgressUpdate
                publishProgress(message);
            }
        });
        myTcpClient.run();

        return null;
    }

    @Override
    protected void onProgressUpdate(String... values) {
        super.onProgressUpdate(values);

        //in the arrayList we don't add the message received from server
        //here i try to write the incomming message into a textVie
        textIn.setText(values[0]);
    }
}
} 
```

这是我的 TCPClient 类：

```
package com.example.sercerclient2zweidreidrei;

import android.util.Log;
import java.io.*;
import java.net.InetAddress;
import java.net.Socket;

public class TCPClient {

private String serverMessage;
public static final String SERVERIP = "192.168.2.107"; //your computer IP address
public static final int SERVERPORT = 4444;
private OnMessageReceived mMessageListener = null;
private boolean mRun = false;

PrintWriter out;
BufferedReader in;

/**
 * constructor of the class. OnMessageReceived listens for the messages 
 * received from server
 */
public TCPClient(OnMessageReceived listener) {
    mMessageListener = listener;
}

/**
 * Sends the message entered by client to the server
 * @param message text entered by client
 */
public void sendMessage(String message){
    if (out != null && !out.checkError()) {
        out.println(message);
        out.flush();
    }
}

public void stopClient() {
    mRun = false;
}

public void run() {
    mRun = true;

    try {
        // here you must put your computer's IP address.
        InetAddress serverAddr = InetAddress.getByName(SERVERIP);

        Log.e("TCP Client", "C: Connecting...");

        //create a socket to make the connection with the server
        Socket socket = new Socket(serverAddr, SERVERPORT);

        try {
            //send the message to the server
            out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())), true);

            Log.e("TCP Client", "C: Sent.");
            Log.e("TCP Client", "C:Done.");

            //receive the message which the server sends back
            in = new BufferedReader(new InputStreamReader(socket.getInputStream()));

            //in this while the client listens for the messages send by the server
            while (mRun) {
                serverMessage = in.readLine();

                if (serverMessage != null && mMessageListener != null) {
                    //call the method messageReceived from MyActivity class
                    mMessageListener.messageReceived(serverMessage);
                }
                serverMessage = null;
            }

            Log.e("RESPONSE FROM SERVER", "S: Received Message: '" + serverMessage + "'");

        } catch (Exception e) {

            Log.e("TCP", "S: Error", e);

        } finally {
            //the socket must be closed. It is not possible to reconnect to this socket
            //after it is closed, which means a new socket instance has to be created.
            socket.close();
        }
    } catch (Exception e) {
        Log.e("TCP", "C:Error", e);
    }
}

/*
 * Declare the interface. The method messageReceived(String message must be
 * implemented in the MyActivity class at on asynckTask doInBackground
 */
public interface OnMessageReceived {
    public void messageReceived(String message);
}
} 
```

最后在这里你可以看到我的 main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:tools="http://schemas.android.com/tools"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  tools:context=".MyActivity" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:text="@string/Textausgabe" />

<EditText
    android:id="@+id/editText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/textView1"
    android:layout_marginTop="34dp"
    android:ems="10" >

    <requestFocus />
</EditText>

<Button
    android:id="@+id/send_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignRight="@+id/textView1"
    android:layout_below="@+id/editText"
    android:layout_marginTop="26dp"
    android:text="@string/Senden" />

<TextView
    android:id="@+id/textin"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_centerVertical="true"
    android:text="@string/EinkommenderText"
    android:textAppearance="?android:attr/textAppearanceLarge" />

 </RelativeLayout> 
```

这是我的 LogCat：

> 12-30 16:36:37.340: I/dalvikvm(548): threadid=3: 对信号 3 做出反应
> 
> 12-30 16:36:37.560: I/dalvikvm(548): 将堆栈跟踪写入“/data/anr/traces.txt”
> 
> 12-30 16:36:37.740: I/dalvikvm(548): threadid=3: 对信号 3 做出反应
> 
> 12-30 16:36:37.790: I/dalvikvm(548): 将堆栈跟踪写入“/data/anr/traces.txt”
> 
> 12-30 16:36:38.350：D/gralloc_goldfish(548)：没有检测到 GPU 仿真的仿真器。
> 
> 12-30 16:36:38.630: I/dalvikvm(548): threadid=3: 对信号 3 做出反应
> 
> 12-30 16:36:38.650: I/dalvikvm(548): 将堆栈跟踪写入“/data/anr/traces.txt”
> 
> 12-30 16:36:39.721：E/TCP 客户端（548）：C：正在连接...
> 
> 12-30 16:36:39.981：E/TCP 客户端（548）：C：已发送。
> 
> 12-30 16:36:39.990：E/TCP 客户端（548）：C：完成。
> 
> 12-30 16:38:59.034: D/AndroidRuntime(548): 关闭虚拟机
> 
> 12-30 16:38:59.034: W/dalvikvm(548): threadid=1: 线程以未捕获的异常退出 (group=0x409c01f8)
> 
> 12-30 16:38:59.051：E/AndroidRuntime(548)：致命异常：主要
> 
> 12-30 16:38:59.051: E/AndroidRuntime(548): java.lang.NullPointerException
> 
> 12-30 16:38:59.051: E/AndroidRuntime(548): 在 com.example.sercerclient2zweidreidrei.MyActivity$connectTask.onProgressUpdate(MyActivity.java:72)
> 
> 12-30 16:38:59.051: E/AndroidRuntime(548): at com.example.sercerclient2zweidreidrei.MyActivity$connectTask.onProgressUpdate(MyActivity.java:1)
> 
> 12-30 16:38:59.051: E/AndroidRuntime(548): 在 android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:618)
> 
> 12-30 16:38:59.051: E/AndroidRuntime(548): 在 android.os.Handler.dispatchMessage(Handler.java:99)
> 
> 12-30 16:38:59.051: E/AndroidRuntime(548): 在 android.os.Looper.loop(Looper.java:137)
> 
> 12-30 16:38:59.051: E/AndroidRuntime(548): 在 android.app.ActivityThread.main(ActivityThread.java:4424)
> 
> 12-30 16:38:59.051: E/AndroidRuntime(548): 在 java.lang.reflect.Method.invokeNative(Native Method)
> 
> 12-30 16:38:59.051: E/AndroidRuntime(548): 在 java.lang.reflect.Method.invoke(Method.java:511)
> 
> 12-30 16:38:59.051: E/AndroidRuntime(548): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
> 
> 12-30 16:38:59.051: E/AndroidRuntime(548): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
> 
> 12-30 16:38:59.051: E/AndroidRuntime(548): at dalvik.system.NativeStart.main(Native Method)
> 
> 12-30 16:38:59.752: I/dalvikvm(548): threadid=3: 对信号 3 做出反应
> 
> 12-30 16:38:59.900: I/dalvikvm(548): 将堆栈跟踪写入“/data/anr/traces.txt”

我希望你能找到我的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T15:16:46.833

您在 Activity 中使用 AsyncTask 任务来建立 TCP 连接。因此，一旦建立连接，就会发送消息并且您的 AsyncTask 任务完成并关闭 TCP 连接。

您应该使用独立服务而不是 Activity 来保持连接打开。

# java - 要在 GridLayout 中调整大小的 JLabels

> ID：14091812
> 
> 赞同：2
> 
> 时间：2012-12-30T15:09:43.450
> 
> 标签：java, swing, jlabel, grid-layout

我有一个非常简单的 Java 程序（见下文）。GridLayout 有 20 行和 4 列。如您所知，元素应该通过 (GridLayout) 定义水平添加。但是，我将两个元素（标签）垂直放置在另一个之上。

我给它们上色并意识到标签占据了整行，因此产生了垂直效果。但是后来我也使用 setSize(5,5) 来使它们更小，但是它们仍然占据了整行。关于为什么会发生这种情况以及如何修复/设置更小的尺寸/等的任何建议？

```
public class Sam extends JFrame {

    public JButton btn_arr;
    public Container c;
    public JLabel[] lbl = new JLabel[20];

    public Sam()
    {
        c = getContentPane();
        c.setLayout(new GridLayout(20,4));
        lbl[1] = new JLabel("Column1");
        c.add(lbl[1]);

        lbl[2] = new JLabel("Column2");
        c.add(lbl[2]);

        show();     
    }

    public static void main(String[] args) 
    {
        Sam x = new Sam();
        x.setVisible(true);
        x.setSize(7500,4500);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T15:12:02.707

您只需将两个组件添加到网格中，以便它们将其填满。您需要将更多组件添加到网格中作为占位符，以便它可以将原始 JLabels 放置在适当的位置，可能是空的 JLabels 或 JPanel。

顺便说一句，您应该避免设置任何 Swing 组件的大小。你现在的尺寸是7500，4500的尺寸就有点大了。

顺便说一句，也许您想在此处使用 JTable。

编辑：如果你想要一个 4 列和*可变*行数的 GridLayout，请使用`0`GridLayout 行常量：

```
c.setLayout(new GridLayout(0, 4)); 
```

例如，

```
import java.awt.*;
import javax.swing.*;

public class Sam extends JFrame {
   public static final int COLUMN_COUNT = 4;

   public JButton btn_arr;
   public Container c;
   public JLabel[] lbl = new JLabel[COLUMN_COUNT];

   public Sam() {
      c = getContentPane();
      c.setLayout(new GridLayout(0, COLUMN_COUNT));

      for (int i = 0; i < lbl.length; i++) {
         lbl[i] = new JLabel("Column " + (i + 1));
         c.add(lbl[i]);
      }

   }

   public static void main(String[] args) {
      Sam x = new Sam();
      x.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      x.pack();
      x.setLocationRelativeTo(null);
      x.setVisible(true);
      // x.setSize(7500,4500);
   }

} 
```

但我仍然想知道 JTable 在这里是否不能更好地工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T17:05:28.447

使用 GridLayout 要记住的一件事是，它旨在覆盖整个包含面板，尽可能地调整单元格的大小，并且添加到单元格的元素将被扩展以填充整个单元格。因此，随着单元格大小的变化，标签的大小也会发生变化。有效地网格单元强制所有包含元素在 X 和 Y 方向上的扩展/收缩。

One way to prevent that from happening if you must use the GridLayout is to not add the labels directly to the container that uses the GridLayout, but instead put each label inside a JPanel that uses a FlowLayout (the default) that you can set alignment of either Left, Middle or Right, then add that JPanel to the Grid container. The JPanel will be resized but it will not change the size of the Label.

Or use the GridBagLayout manager. More complex, but once you understand it, it makes life easier. But as Hovercraft mentioned, if what you are trying to do is create a grid with column headers, a JTable might be a better option.

# wcf - WCF 端口问题和代理创建

> ID：14091815
> 
> 赞同：0
> 
> 时间：2012-12-30T15:09:53.980
> 
> 标签：wcf

我开发了一个小型 wcf 服务。它托管在 Windows 窗体应用程序中并启动服务，它在端口 1645 上运行。这是我的服务的 app.config 条目。

我的服务已启动，当我尝试创建像**net.tcp://localhost:1645/ChatServer/mex**这样的 url 代理时，我看到 VS IDE 无法找到该服务，但我的服务正在同一台电脑上运行。经过大量尝试，当我将端口从 1645 更改为 7999 时，我看到代理已创建。所以我很困惑，当端口是 1645 时，服务是不可发现的，而当我更改端口时，它就开始工作了。如果有与端口相关的问题，那么如何在 1645 端口启动服务？我只是无法弄清楚实际问题是什么。所以以前有人遇到过这种问题，然后指导我 1645 的端口相关问题是什么。

谁能告诉我 1645 端口有什么问题，结果我一再无法创建代理。有什么工具可以帮助我诊断端口 1645 的端口相关问题吗？谢谢

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
<system.serviceModel>
<services>
<service name="WCFService.Service" behaviorConfiguration="behaviorConfig">

<host>
  <baseAddresses>
    <add baseAddress="net.tcp://localhost:1645/ChatServer/"/>
    <add baseAddress="http://localhost:1648/ChatServer/"/>
  </baseAddresses>
  </host>
  <endpoint address="tcp"
                  binding="netTcpBinding"
                  bindingConfiguration="tcpBinding"
                  contract="ChatService.IChat"/>

 <endpoint address="net.tcp://localhost:1645/ChatServer/mex"
                  binding="mexTcpBinding"
                  contract="IMetadataExchange"/>

 </service>
 </services>

 <behaviors>
 <serviceBehaviors>
 <behavior name="behaviorConfig">
  <serviceMetadata httpGetEnabled="true" httpGetUrl=""/>
  <serviceDebug includeExceptionDetailInFaults="true"/>
  <serviceThrottling maxConcurrentCalls="100" maxConcurrentSessions="100"/>
 </behavior>
 </serviceBehaviors>
 </behaviors>
 <bindings>
 <netTcpBinding>
 <binding name="tcpBinding"
                 maxBufferSize="67108864"
                 maxReceivedMessageSize="67108864"
                 maxBufferPoolSize="67108864"
                 transferMode="Buffered"
                 closeTimeout="00:00:10"
                 openTimeout="00:00:10"
                 receiveTimeout="00:20:00"
                 sendTimeout="00:01:00"
                 maxConnections="100">
  <security mode="None">
  </security>
  <readerQuotas maxArrayLength="67108864"
                          maxBytesPerRead="67108864"
                          maxStringContentLength="67108864"/>
  <reliableSession enabled="true" inactivityTimeout="00:20:00"/>
  </binding>
  </netTcpBinding>
  </bindings>
  </system.serviceModel>
  </configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T18:14:48.313

我不完全确定你的问题是什么，但我用来调查的第一个工具是 TCPView： [http](http://technet.microsoft.com/en-ca/sysinternals/bb897437.aspx) ://technet.microsoft.com/en-ca/sysinternals/bb897437.aspx 这样你可以看看你是否有任何已经在该端口上侦听的进程。

此外，如果您使用的是 Windows 2008 或 2012，它可能与 radius 服务有关： [http ://technet.microsoft.com/en-us/library/cc731277.aspx](http://technet.microsoft.com/en-us/library/cc731277.aspx)

# c++ - 在 Windows 8 64 位上使用 Visual Studio 2012 的 Directx 11.0

> ID：14091817
> 
> 赞同：0
> 
> 时间：2012-12-30T15:10:26.813
> 
> 标签：c++, windows, visual-studio-2012, directx-11

我想开始学习 DirectX 11.0 。我在 Windows 8 pro 64 位上安装了 Visual Studio 2012 Ultimate。我希望能够开发也可以在 Windows 7 中运行的游戏。如果不下载 2010 年 6 月的 SDK，这可能吗？还是 Windows SDK 会做？有人可以发布正确教程的链接吗？我不喜欢第 3 方解决方案，并且我希望尽可能避免下载 2010 年 6 月的 SDK。

备注：我有一些在 XNA 开发 3D 游戏的经验。我是 DirectX 的新手。

更新：DX SDK 现在包含在 Windows SDK 中。但是我还没有看到任何关于使用这个已经包含的 SDK 开发桌面游戏的教程。他们中的大多数要求下载 DX June 2010 SDK；可能这些教程在VS2012到来后没有更新。而最近的人说要移植一个VS2010 DX游戏到VS2012，第一步一般是下载DX June 2010 SDK。

因此，我开始怀疑是否可以使用这个新的内置 SDK 构建桌面游戏？或者确实必须下载 2010 年 6 月的 DX SDK？还是只有在将VS2010游戏移植到VS2012时才需要下载June SDK？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T18:47:53.293

使用内置 SDK 在 Visual Studio 2012 上编译的程序应该在 Windows 7 上运行良好（当然前提是不使用任何新的 API 调用或任何东西）。我正在使用 d3d11 在 Windows 7 上运行 vs2012，它构建的程序在那里运行得非常好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T15:37:01.787

你必须从 MSDN 下载 DX SDK 我阅读了文档

> [http://msdn.microsoft.com/en-us/library/windows/apps/hh452744.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh452744.aspx)

# javascript - 使用 js2coffee 将整个项目转换为 CoffeeScript

> ID：14091818
> 
> 赞同：7
> 
> 时间：2012-12-30T15:10:31.187
> 
> 标签：javascript, coffeescript

**问题**：

**js2coffe**仅适用于**单个文件**输入/输出重定向。转换整个项目及其目录结构可能会很痛苦。

想要转换**ExpressJS**默认应用程序项目，包括。它的目录结构？

看看下面的脚本

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-30T15:10:31.187

**更新**：如果您赶时间，请查看下面这个脚本的简短版本。

一个简单的 Bash 脚本为你完成了这项工作：

```
#!/bin/bash

for FILE in `find . -name "*.js" -type f -o -path './node_modules' -prune -o -path './components' -prune`
do 
    if [ -e $FILE ] ; then        
        COFFEE=${FILE//.js/.coffee}

        echo "converting ${FILE} to ${COFFEE}"
        js2coffee "$FILE" > "$COFFEE"
    else     
        echo "File: {$1} does not exist!"
    fi
done 
```

制作一个文件，例如 all2coffee，将其放在 /usr/local/bin 中，`chmod + x`在终端中添加一个标志

**要求**

`js2coffee`全局安装，如果尚未安装，请执行以下操作：`npm install -g js2coffee`

**脚本解释**

**for循环：**

`for FILE in `find arguments` ....`方法：

`FILE`每次`find`偶然发现 .js 文件时，都会将查找输出分配给字符串

**查找参数：**

`-name "*.js"` 获取所有以 .js 结尾的文件

`-type f`必须是**文件**类型，因为我们不想要 .js 目录，但只有文件

`-o -path './node_modules' -prune`

排除目录中的文件**`./node_modules`**添加**`-prune`**是至关重要的，否则 find 将进入目录并打印**`*.js`**在目录中找到的文件

**做块：**

`if [ -e ${FILE} ] ; then`

**-e**标志检查来自的字符串**`FILE`**是否是文件系统上的现有文件，否则`else`执行。

**字符串操作：**

`COFFEE=${FILE//.js/.coffee}`

我们`COFFEE`将变量分配给一个字符串，我们 通过 bash 字符串操作将**.js**替换为**.coffee ：**`${STRING//match_this/replace_with}`

**转换：**

`js2coffee "$FILE" > "$COFFEE"`我们将 js2coffee 用`FILE`和`COFFEE`作为**字符串提供**

**额外的：**

您想将所有转换后的 .coffee 文件移动到新目录，但保留结构？

在 Linux 或Os X 上使用**find** with ，因为 cp 不会创建此命令所需的目录。这里有一个在主目录中执行的小脚本，它将完成这项工作**`rsync`****`ditto`**

所有 .coffee 文件都将在 /coffee 目录中复制 .js 文件层次结构

```
for FILE in `find . -name "*.coffee"`
do 
    ditto .${FILE/./} coffee${FILE/./}    
done 
```

*将文件转换为 .coffee**后**执行此操作*

**更新**

您可以在第一次运行后交换`ditto`或`rsync`使用`mv`以移动文件，因为`mv`like`cp`不会创建子目录。

**更新 2**

为那些准时添加了一个班轮，请参阅下面的第二个答案！

**更新 3**

`./node_modules`为那些不想转换其依赖项的人添加了一个从转换中排除目录的选项

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-01-30T23:31:58.123

**对于那些时间短的人 - 使用这个漂亮的单线！** 它从当前目录 ./ 开始，并通过子目录将每个`.js`文件打磨到`.coffee`

`find . -type f -name '*.js' | while read f; do echo "grinding $f to ${f/.js/.coffee} "; js2coffee "$f" > "${f/.js/.coffee}"; done`

想从转换中**排除** `./node_modules`目录？改用下面的一个：

`find . -path ./node_modules -prune -o -type f -name '*.js' | while read f; do echo "grinding $f to ${f/.js/.coffee} "; js2coffee "$f" > "${f/.js/.coffee}"; done`

*小提示：* 您也可以使用此循环来移动或复制文件：将**js2coffee**命令替换为您需要执行的任何操作。 `find`输出（找到的文件列表）可以简单地修改和过滤。

在 bash 中，子字符串提取（或替换）很简单——如上例所示：

**重要（长版）** bash 变量可以通过在变量名称前添加**$**来访问- 但最初它们是在**没有****$**的情况下定义的，因此为了您的心理健康请记住这一点并检查您的代码中的 $var/var= 语法以防万一你出现了一些不太合乎逻辑的错误。在一段时间没有在 Bash 中做任何事情之后，我一遍又一遍地犯了这个错误，所以我认为分享这个简单的事实是明智的（也可能是我，作为一个糟糕的开发人员）

**重要（短版）**变量定义：`var_name=value`变量访问：`$var_name=value`，坏主意：`$var_name=value`，稍后由`$var_name`.

在示例中，变量**f**由**$f**访问，使用**${f}**访问我们将**.js** -> `/.js`（/ 是分隔符）替换为**.coffee** ->`/.coffee`如下所示`${f/.js/.coffee}`：

```
apple="green"; 
echo $apple; 
```

输出：

`green`

# c# - 插入发生异常 SQL Server CE

> ID：14091819
> 
> 赞同：0
> 
> 时间：2012-12-30T15:10:32.257
> 
> 标签：c#, entity-framework, insert, sql-server-ce

我试图在我的表中插入新记录`Cities`。它只有`id (identity=true)`和`name`列。我使用实体框架工作：

```
public partial class Form1 : Form
{
    Database1Entities ent;
    public Form1()
    {
        InitializeComponent();
    }

    private void bSave_Click(object sender, EventArgs e)
    {
        ent.SaveChanges();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        ent = new Database1Entities();
        dataGridView1.DataSource = ent.Cities;
        dataGridView1.AutoGenerateColumns = false;
        dataGridView1.Columns.Clear();
        DataGridViewTextBoxColumn colName = new DataGridViewTextBoxColumn();
        colName.Name = "Name";
        colName.DataPropertyName = "name";
        dataGridView1.Columns.Add(colName);
    } 
```

当我编辑（或删除）一些现有信息并保存更改时一切正常，但是当我尝试添加新记录然后保存时，我收到异常：

```
 An unhandled exception of type 'System.Data.UpdateException' occurred in System.Data.Entity.dll

System.Transactions Critical: 0 : <TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Critical"><TraceIdentifier>http://msdn.microsoft.com/TraceCodes/System/ActivityTracing/2004/07/Reliability/Exception/Unhandled</TraceIdentifier><Description>Unhandled exception</Description><AppDomain>WindowsFormsApplication2.vshost.exe</AppDomain><Exception><ExceptionType>System.Data.UpdateException, System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType><Message> error on Updating record. For details, see the inner exception.</Message><StackTrace>   in System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter)
   in System.Data.EntityClient.EntityAdapter.Update(IEntityStateManager entityCache)
   in System.Data.Objects.ObjectContext.SaveChanges(SaveOptions options)
   in System.Data.Objects.ObjectContext.SaveChanges()
   in WindowsFormsApplication2.Form1.button1_Click(Object sender, EventArgs e) in C:\Users\Misha\Documents\Visual Studio 2010\Projects\Испытательный полигон .NET\WindowsFormsApplication2\Form1.cs:строка 22
   in System.Windows.Forms.Control.OnClick(EventArgs e)
   in System.Windows.Forms.Button.OnClick(EventArgs e)
   in System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
   in System.Windows.Forms.Control.WmMouseUp(Message&amp;amp; m, MouseButtons button, Int32 clicks)
   in System.Windows.Forms.Control.WndProc(Message&amp;amp; m)
   in System.Windows.Forms.ButtonBase.WndProc(Message&amp;amp; m)
   in System.Windows.Forms.Button.WndProc(Message&amp;amp; m)
   in System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message&amp;amp; m)
   in System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message&amp;amp; m)
   in System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
   in System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG&amp;amp; msg)
   in System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)
   in System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
   in System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
   in System.Windows.Forms.Application.Run(Form mainForm)
   in WindowsFormsApplication2.Program.Main() in C:\Users\Misha\Documents\Visual Studio 2010\Projects\Испытательный полигон .NET\WindowsFormsApplication2\Program.cs:строка 18
   in System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   in System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
   in Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   in System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   in System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   in System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   in System.Threading.ThreadHelper.ThreadStart()</StackTrace><ExceptionString>System.Data.UpdateException: Error on Updating record. For details, see the inner exception. ---&amp;gt; System.Data.EntityCommandCompilationException: При подготовке определения команды произошла ошибка. Подробные сведения см. во внутреннем исключении. ---&amp;gt; System.NotSupportedException: Ключи и значения, формируемые сервером, не поддерживаются SQL Server Compact.
   in System.Data.SqlServerCe.SqlGen.DmlSqlGenerator.GenerateReturningSql(StringBuilder commandText, DbModificationCommandTree tree, ExpressionTranslator translator, DbExpression returning)
   in System.Data.SqlServerCe.SqlGen.DmlSqlGenerator.GenerateInsertSql(DbInsertCommandTree tree, List`1&amp;amp; parameters, Boolean isLocalProvider)
   in System.Data.SqlServerCe.SqlGen.SqlGenerator.GenerateSql(DbCommandTree tree, List`1&amp;amp; parameters, CommandType&amp;amp; commandType, Boolean isLocalProvider)
   in System.Data.SqlServerCe.SqlCeProviderServices.CreateCommand(DbProviderManifest providerManifest, DbCommandTree commandTree)
   in System.Data.SqlServerCe.SqlCeProviderServices.CreateDbCommandDefinition(DbProviderManifest providerManifest, DbCommandTree commandTree)
   in System.Data.Common.DbProviderServices.CreateCommandDefinition(DbCommandTree commandTree)
   in System.Data.Common.DbProviderServices.CreateCommand(DbCommandTree commandTree)
   in System.Data.Mapping.Update.Internal.UpdateTranslator.CreateCommand(DbModificationCommandTree commandTree)
   --- End of inner exception stack trace ---
   in System.Data.Mapping.Update.Internal.UpdateTranslator.CreateCommand(DbModificationCommandTree commandTree)
   in System.Data.Mapping.Update.Internal.DynamicUpdateCommand.CreateCommand(UpdateTranslator translator, Dictionary`2 identifierValues)
   in System.Data.Mapping.Update.Internal.DynamicUpdateCommand.Execute(UpdateTranslator translator, EntityConnection connection, Dictionary`2 identifierValues, List`1 generatedValues)
   in System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter)
   --- End of inner exception stack trace ---
   in System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter)
   in System.Data.EntityClient.EntityAdapter.Update(IEntityStateManager entityCache)
   in System.Data.Objects.ObjectContext.SaveChanges(SaveOptions options)
   in System.Data.Objects.ObjectContext.SaveChanges()
   in WindowsFormsApplication2.Form1.button1_Click(Object sender, EventArgs e) in C:\Users\Misha\Documents\Visual Studio 2010\Projects\Испытательный полигон .NET\WindowsFormsApplication2\Form1.cs:строка 22
   in System.Windows.Forms.Control.OnClick(EventArgs e)
   in System.Windows.Forms.Button.OnClick(EventArgs e)
   in System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
   in System.Windows.Forms.Control.WmMouseUp(Message&amp;amp; m, MouseButtons button, Int32 clicks)
   in System.Windows.Forms.Control.WndProc(Message&amp;amp; m)
   in System.Windows.Forms.ButtonBase.WndProc(Message&amp;amp; m)
   in System.Windows.Forms.Button.WndProc(Message&amp;amp; m)
   in System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message&amp;amp; m)
   in System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message&amp;amp; m)
   in System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
   in System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG&amp;amp; msg)
   in System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)
   in System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
   in System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
   in System.Windows.Forms.Application.Run(Form mainForm)
   in WindowsFormsApplication2.Program.Main() in C:\Users\Misha\Documents\Visual Studio 2010\Projects\Испытательный полигон .NET\WindowsFormsApplication2\Program.cs:строка 18
   in System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   in System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
   in Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   in System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   in System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   in System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   in System.Threading.ThreadHelper.ThreadStart()</ExceptionString><InnerException><ExceptionType>System.Data.EntityCommandCompilationException, System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType><Message>При подготовке определения команды произошла ошибка. Подробные сведения см. во внутреннем исключении.</Message><StackTrace>   in System.Data.Mapping.Update.Internal.UpdateTranslator.CreateCommand(DbModificationCommandTree commandTree)
   in System.Data.Mapping.Update.Internal.DynamicUpdateCommand.CreateCommand(UpdateTranslator translator, Dictionary`2 identifierValues)
   in System.Data.Mapping.Update.Internal.DynamicUpdateCommand.Execute(UpdateTranslator translator, EntityConnection connection, Dictionary`2 identifierValues, List`1 generatedValues)
   in System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter)</StackTrace><ExceptionString>System.Data.EntityCommandCompilationException: При подготовке определения команды произошла ошибка. Подробные сведения см. во внутреннем исключении. ---&amp;gt; System.NotSupportedException: Ключи и значения, формируемые сервером, не поддерживаются SQL Server Compact.
   in System.Data.SqlServerCe.SqlGen.DmlSqlGenerator.GenerateReturningSql(StringBuilder commandText, DbModificationCommandTree tree, ExpressionTranslator translator, DbExpression returning)
   in System.Data.SqlServerCe.SqlGen.DmlSqlGenerator.GenerateInsertSql(DbInsertCommandTree tree, List`1&amp;amp; parameters, Boolean isLocalProvider)
   in System.Data.SqlServerCe.SqlGen.SqlGenerator.GenerateSql(DbCommandTree tree, List`1&amp;amp; parameters, CommandType&amp;amp; commandType, Boolean isLocalProvider)
   in System.Data.SqlServerCe.SqlCeProviderServices.CreateCommand(DbProviderManifest providerManifest, DbCommandTree commandTree)
   in System.Data.SqlServerCe.SqlCeProviderServices.CreateDbCommandDefinition(DbProviderManifest providerManifest, DbCommandTree commandTree)
   in System.Data.Common.DbProviderServices.CreateCommandDefinition(DbCommandTree commandTree)
   in System.Data.Common.DbProviderServices.CreateCommand(DbCommandTree commandTree)
   in System.Data.Mapping.Update.Internal.UpdateTranslator.CreateCommand(DbModificationCommandTree commandTree)
   --- End of inner exception stack trace ---
   in System.Data.Mapping.Update.Internal.UpdateTranslator.CreateCommand(DbModificationCommandTree commandTree)
   in System.Data.Mapping.Update.Internal.DynamicUpdateCommand.CreateCommand(UpdateTranslator translator, Dictionary`2 identifierValues)
   in System.Data.Mapping.Update.Internal.DynamicUpdateCommand.Execute(UpdateTranslator translator, EntityConnection connection, Dictionary`2 identifierValues, List`1 generatedValues)
   in System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter)</ExceptionString><InnerException><ExceptionType>System.NotSupportedException, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType><Message>Ключи и значения, формируемые сервером, не поддерживаются SQL Server Compact.</Message><StackTrace>   in System.Data.SqlServerCe.SqlGen.DmlSqlGenerator.GenerateReturningSql(StringBuilder commandText, DbModificationCommandTree tree, ExpressionTranslator translator, DbExpression returning)
   in System.Data.SqlServerCe.SqlGen.DmlSqlGenerator.GenerateInsertSql(DbInsertCommandTree tree, List`1&amp;amp; parameters, Boolean isLocalProvider)
   in System.Data.SqlServerCe.SqlGen.SqlGenerator.GenerateSql(DbCommandTree tree, List`1&amp;amp; parameters, CommandType&amp;amp; commandType, Boolean isLocalProvider)
   in System.Data.SqlServerCe.SqlCeProviderServices.CreateCommand(DbProviderManifest providerManifest, DbCommandTree commandTree)
   in System.Data.SqlServerCe.SqlCeProviderServices.CreateDbCommandDefinition(DbProviderManifest providerManifest, DbCommandTree commandTree)
   in System.Data.Common.DbProviderServices.CreateCommandDefinition(DbCommandTree commandTree)
   in System.Data.Common.DbProviderServices.CreateCommand(DbCommandTree commandTree)
   in System.Data.Mapping.Update.Internal.UpdateTranslator.CreateCommand(DbModificationCommandTree commandTree)</StackTrace><ExceptionString>System.NotSupportedException: Ключи и значения, формируемые сервером, не поддерживаются SQL Server Compact.
   in System.Data.SqlServerCe.SqlGen.DmlSqlGenerator.GenerateReturningSql(StringBuilder commandText, DbModificationCommandTree tree, ExpressionTranslator translator, DbExpression returning)
   in System.Data.SqlServerCe.SqlGen.DmlSqlGenerator.GenerateInsertSql(DbInsertCommandTree tree, List`1&amp;amp; parameters, Boolean isLocalProvider)
   in System.Data.SqlServerCe.SqlGen.SqlGenerator.GenerateSql(DbCommandTree tree, List`1&amp;amp; parameters, CommandType&amp;amp; commandType, Boolean isLocalProvider)
   in System.Data.SqlServerCe.SqlCeProviderServices.CreateCommand(DbProviderManifest providerManifest, DbCommandTree commandTree)
   in System.Data.SqlServerCe.SqlCeProviderServices.CreateDbCommandDefinition(DbProviderManifest providerManifest, DbCommandTree commandTree)
   in System.Data.Common.DbProviderServices.CreateCommandDefinition(DbCommandTree commandTree)
   in System.Data.Common.DbProviderServices.CreateCommand(DbCommandTree commandTree)
   in System.Data.Mapping.Update.Internal.UpdateTranslator.CreateCommand(DbModificationCommandTree commandTree)</ExceptionString></InnerException></InnerException></Exception></TraceRecord>
An unhandled exception of type 'System.Data.UpdateException' occurred in System.Data.Entity.dll 
```

最有趣的是，如果我使用 MySQL 数据库一切正常。相同的表，相同的自动生成模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:46:31.593

您正在使用不支持标识列的 SQL Compact 3.5，EF 也不支持 SQL CE 3.5。使用[NuGet](http://nuget.org/)检索`EntityFramework.SqlServerCompact`将下拉 SQL CE 4.0 SP1 和 EF 4.3.1 并支持 SQL CE 4.0 的包。

# java - 为什么 Java ServerSocket accept() 返回一个与 ServerSocket 相同端口的套 接字？

> ID：14091822
> 
> 赞同：5
> 
> 时间：2012-12-30T15:10:47.630
> 
> 标签：java, sockets, tcp, serversocket

在服务器端，我使用以下代码：

```
ServerSocket server = new ServerSocket(1234);
Socket server_socket = server.accept(); 
```

我发现服务器正在侦听端口 1234。

当连接一个或多个客户端套接字时，它们都使用相同的端口 1234 ！

这真是令人困惑：

![在此处输入图像描述](../Images/5127dd0fc407f43deb93d786c8ea85a3.png)

我记得多插座不能使用同一个端口，不是吗？谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-30T15:30:21.657

TCP 连接由四个数字标识：

*   客户端（或对等体 1）IP
*   服务器（或对等 2）IP
*   客户端端口
*   服务器端口

一个典型的 TCP 连接打开如下：

*   客户端 IP 由客户端的 ISP 或 NAT 提供。
*   服务器 IP 由用户提供或在 DNS 中查找。
*   客户端从未分配的范围中任意选择一个端口（同时避免重复的四倍体）
*   服务器端口由协议或明确给出。

您在 ServerSocket 中指定的端口是客户端连接的端口。它只不过是操作系统知道的属于您的应用程序的端口号以及将事件从操作系统传递到您的应用程序的对象。

该`ServerSocket#accept`方法返回一个`Socket`. Socket 是包装单个 TCP 连接的对象。即客户端IP、服务器IP、客户端TCP端口和服务器TCP端口（以及一些传递相关数据的方法）

客户端发送的第一个 TCP 数据包*必须*包含您的应用程序侦听的服务器端口，否则操作系统将不知道该连接属于哪个应用程序。

此外，没有动机将服务器 TCP 端口切换到另一个数字。它对服务器机器或客户端机器没有帮助，它需要一些开销来执行（您需要一起发送新的和旧的 TCP 端口），并且还有额外的开销，因为服务器操作系统无法再通过以下方式识别应用程序单个端口 - 它需要将应用程序与其使用的所有服务器端口相关联（客户端仍然需要这样做，但典型客户端的连接比典型服务器少）

* * *

你看到的是

*   两个入站连接，属于服务器（本地端口：1234）。`Socket`每个在服务器应用程序中都有自己的。
*   两个出站连接，属于客户端（远程端口：1234）。每个在客户端应用程序中都有自己`Socket`的。
*   一个监听连接，属于服务器。这对应于`ServerSocket`接受连接的单。

由于它们是环回连接，因此您可以在一台机器上看到两个端点混合在一起。您还可以在本地端和远程端看到两个不同的客户端端口（52506 和 52511）。

# php - Apache 和 Nginx 都在 80 端口上

> ID：14091824
> 
> 赞同：12
> 
> 时间：2012-12-30T15:10:58.450
> 
> 标签：php, apache, nginx, centos

我正在尝试在我当前安装并运行 Apache httpd 的云 Cent OS 服务器上安装 Nginx。

我的托管公司告诉我 Nginx 和 Apache 可以同时在 80 端口上运行，所以我的计划是在通过 Yum 安装之后将 Wordpress 站点的 .htaccess 和 Apache conf 转换为 Nginx。

我也对此进行了谷歌搜索，有些人建议使用 Nginx 作为反向代理并仅提供静态文件，但使用 PHP 运行 Apache，因为 Apache 嵌入了 PHP，并且即使它不支持像 Nginx 这样的多个并发请求，也会消耗更少的内存。

我的直觉是，将所有东西都切换到 Nginx 会是有益的，但在这个阶段还不确定。

另外，在进行这种切换时我应该注意什么吗？

如果是你在这种情况下，你会怎么做？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-30T15:25:31.817

我不太确定您的托管公司的评论是什么意思，但是您将无法在端口 80 上同时运行 Apache 和 Nginx。一旦绑定到端口 80，另一个将无法绑定到它。

在您目前的情况下，最好的配置可能是将 Nginx 放在端口 80 上，将 Apache 放在 8000 或类似端口上。

使用 nginx 提供静态文件（请参阅 try_files，因为["if" 是邪恶的），然后使用](http://wiki.nginx.org/IfIsEvil)[HTTP 代理模块](http://wiki.nginx.org/HttpProxyModule)将 PHP 的所有请求代理到端口 8000 。

PHP 与 Nginx 的另一个常见配置是通过 FastCGI 使用 PHP-FPM 和代理，只需谷歌“PHP-FPM Nginx {Your OS} tutorial”获取教程。

关于 PHP-FPM/mod_php 的性能有[很多争论](https://www.google.co.uk/search?q=php-fpm%20vs%20mod_php)，但根据我的个人经验，我发现 PHP-FPM 的性能更高。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-30T15:17:38.150

我将使用 nginx 作为端口 80 上的面向 Web 的服务器，并将代理传递给将在不同端口上运行的 apache。许多站点运行此配置。使用 nginx 提供静态文件比使用 apache 更有效。它实际上比听起来要简单得多。

[本文档](http://blog.ludovf.net/configure-nginx-to-proxy-virtual-hosts-to-apache/)详细说明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T19:14:14.923

您应该将面向外部的网络服务器绑定到公共 IP 地址，将面向内部的网络服务器绑定到 localhost (127.0.0.1:80)。

因此，如果您公开使用 Nginx，则将其绑定到公共 IP 地址并将其代理到 localhost 的 Apache。

最好使用单独的端口以使其更易于调试。

# javascript - Dojo + 单击 LazyTreeGrid 中父节点的复选框应自动使子节点选中 How To

> ID：14091825
> 
> 赞同：0
> 
> 时间：2012-12-30T15:11:01.110
> 
> 标签：javascript, dojo, treegrid

我正在努力，`lazyTreeGrid`到目前为止`dojo`，我已经设法将`checkboxes`.

但是，当我选择父节点或文件夹的复选框时，我需要自动选中所有子节点的复选框。我应该怎么做？

这是我迄今为止所取得的成就。

[http://jsfiddle.net/vay4R/](http://jsfiddle.net/vay4R/)

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T15:17:35.570

您应该触发`onChange`这些项目的方法。实现检查方法中的所有子项。并且`onChange`会递归执行。

# c++ - 同时循环

> ID：14091833
> 
> 赞同：-5
> 
> 时间：2012-12-30T15:12:20.747
> 
> 标签：c++, loops

我正在尝试用 C++ 制作一个基本的简单游戏，用户不断需要输入，并且应该有其他东西的不断输出（移动对象（*））。

即使用户没有输入任何内容，对象也必须保持移动。这需要同时运行两个循环，我不知道该怎么做。

没有图形，只有基本的符号和字母。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T15:45:59.483

您不需要两个同时循环。你应该只有一个循环。在每次循环迭代中，您将更新游戏的输出，然后*检查*用户是否输入了任何输入。如果他有，那么您阅读并处理它；否则，您只需继续下一个循环迭代。使用 _kbhit 和 _getch 函数是一种简单的入门方法，但最终您可能需要使用更高级的东西，如 ncurses 或 Win32 控制台函数。

```
while( !gameOver ) {
    DisplayGameState();

    if( _kbhit() ) {
        int c = _getch();
        ProcessInput( c );
    }
} 
```

# c# - c#抽象类实现一个接口

> ID：14091837
> 
> 赞同：33
> 
> 时间：2012-12-30T15:12:52.183
> 
> 标签：c#, interface, abstract

我看过以下代码布局阅读论坛和其他博客文章，并进行了修改以提出一些问题。

```
public interface IService<T>
{
    int Add(T entity);
    void Update(T entity);
}

public abstract class ServiceBase<T> : IService<T>
{
    public int Add(T entity) { ... }
    public void Update(T entity) { ... }
}

public interface ICarService : IService<Car>
{
}

public class SomeBaseClass : ServiceBase<Car>, ICarService
{
    public int Add(Car entity);
    public void Update(Car entity);
} 
```

我不明白的是让抽象类实现接口的好处。对我来说，它只是感觉有点重复，我无法理解让抽象类实现接口的好处。

1.  为什么抽象类不`ServiceBase<T>`直接定义而不需要继承IService接口？这是加倍代码吗？
2.  为什么`SomeBaseClass`还必须实施`ICarService`？ServiceBase 不应该足够吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-30T15:24:34.583

广告 1：额外的抽象基类允许您在不破坏实现的情况下发展接口。假设没有抽象基类，并且您要扩展接口，比如说添加一个新方法。然后你的实现被破坏了，因为你的类不再实现接口。

使用一个额外的抽象基类，您可以将这一点分开：如果您向接口添加一个新方法，您可以在基类中提供一个虚拟实现，并且您的所有子类可以保持不变，并且可以被采用来匹配新的接口在稍后的时间点。

此外，这种组合允许您定义合约（使用接口）并提供一些默认机制（使用抽象基类）。任何对默认值满意的人都可以从抽象基类继承。任何想要对任何小细节进行超级精细控制的人都可以手动实现该界面。

广告2：从技术角度来看，最终类中不需要*实现*接口。但是，这再次允许您将事物彼此分开发展。A`CarService`肯定是 a `Service<Car>`，但也许更多。也许只`CarService`需要一些不应该进入公共接口或服务基类的额外内容。

我想这就是为什么;-)

# jquery - jQuery 模板，将 jQuery 插件应用到每个模板项

> ID：14091840
> 
> 赞同：0
> 
> 时间：2012-12-30T15:13:05.757
> 
> 标签：jquery, jquery-templates

在我的 web 应用程序中，我需要创建许多具有不同内容（即文本和评级不同，按钮 ID 不同）的相同块（一些文本、评级、一些按钮）。为此，我正在使用 jQuery 模板。

同时，对于评分，我使用“Raty”jQuery 插件。它将评级显示为填充和空星的数量，并且在模板填充数据时应将值传递给它。

但是，在模板处理时，我找不到将插件应用到相应 div 的方法。

这是代码。

1.  模板 ````
    <script id="clientTemplate" type="text/html">
        <span class="firstline" id="firstline_${id}">${firstline}
        <div class="star" id="s_${id}" style="cursor: pointer; width: 100px;"></div>
        {{if unescape( alert($data.importance)  )}}{{/if}}
        </span>
    </script>

    ```` //警报只是为了检查我们是否可以访问必要的数据
2.  这就是我们需要应用于`star`div 的内容： //我需要将值替换为下面 的值 ````
    $(".star").raty({
        half : true,
        score : 2.5,
        readOnly : false,
        click : function(score, evt) {
            if (readonly) {
                return false;
            }
            _id = $(this).attr("id");
            _id = *id.replace("s*", "");
            _id = _id.trim();
                $.ajax({
                    url : "importancereceive.html",
                    type : "POST",
                    data : {
                    id : _id,
                    importance : score
                },
                success : function(data) {
                    if (data != "1") {
                        alert("Failed to mark plan as completed");
                    }
                },
                error : function(jqXHR, textStatus, errorThrown) {
                    alert("error: " + textStatus);
                    alert("error: " + errorThronwn);
                }
            });
        }
    });

    ```` `score``importance`
3.  这是数据 ````
    <script>
        var clientData = [ {
            id : 1,
            firstline : "My first line",
            importance : 2.0
        } ];
    </script>

    ```` 

如何在生成时将此插件应用于每个`star`div？我知道，知道项目的 id 我可以遍历整个 DOM 并将特定`importance`值设置为特定的`star`div，但这意味着多次遍历整个 DOM，这可能会给手机/平板电脑带来问题，尤其是. 如果列表变大。有没有办法在生成时将上述内容应用于 div？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T15:21:53.133

将重要性存储在 的自定义属性中不是一个想法`div`吗？

所以你的模板会变成这样：

```
<script id="clientTemplate" type="text/html">
    <span class="firstline" id="firstline_${id}">${firstline}
    <div class="star" id="s_${id}" style="cursor: pointer; width: 100px;" data-importance="${importance}"></div>
    {{if unescape( alert($data.importance)  )}}{{/if}}
    </span>
</script> 
```

[（我想是这样的，我不知道你的模板语言）]

另请参阅[是否可以将您自己的属性添加到 HTML 元素？](https://stackoverflow.com/questions/1305734/is-it-ok-to-add-your-own-attributes-to-html-elements)有关创建自己的属性的更多信息。

~~然后你可以使用`$(this).attr("data-importance")`.~~

**编辑**：然后你可以使用`$(this).data("importance")`. （见[来源](http://api.jquery.com/data/#data-html5)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T16:34:51.860

与许多依赖于每个实例的特定数据的插件一样，您必须遍历元素才能将正确的数据应用于每个实例。

如前所述，`data-`使用模板将分数存储在属性中

```
$('.star').each(function(){
     var score=$(this).data('score')
     $(this).raty({
           half : true,
           score : score,
          /* other options*/
     });  
}); 
```

您的模板引擎应该允许您访问它在插入之前生成的 html。

您可以在它生成的 html 上调用插件，也可以在插入 DOM 之前遍历该 html。

一些模板引擎在如何处理这个问题上更灵活一些。这取决于使用的模板系统

# xml - XSLT：如何将字符串值转换为布尔变量？

> ID：14091841
> 
> 赞同：0
> 
> 时间：2012-12-30T15:13:14.067
> 
> 标签：xml, xslt

使用 XSL 2.0，将字符串值（'true' 或 'false'）转换为布尔变量的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T15:26:04.923

xs:boolean 构造函数，例如`xs:boolean('true')`

# assembly - MIPS 找到最低值？

> ID：14091842
> 
> 赞同：1
> 
> 时间：2012-12-30T15:13:16.470
> 
> 标签：assembly, mips

我尝试了以下代码，对于前两个整数，它工作正常。但是当我们在第三个提示中取最小数字时，它不会被视为最小数字。这是我的代码。我犯的那个错误在哪里。（对不起我的英语不好）

多谢..

```
 .text
.align 2 
.globl main 

main: 
# this program prints out the lowest value of three numbers input 

li $v0, 4 
la $a0, prompt1 
syscall 

li $v0, 5 # read keyboard into $v0 (number x is number to test) 
syscall 
move $t0,$v0 # first number in $t0 

li $v0, 4 
la $a0, prompt2 
syscall 

li $v0, 5 # read keyboard into $v0 (number x is number to test) 
syscall 
move $t1,$v0 # second number in $t1 

li $v0, 4 
la $a0, prompt3 
syscall 

li $v0, 5 # read keyboard into $v0 (number x is number to test) 
syscall 
move $t2,$v0 # third number in $t2 

blt $t1, $t0, L1 
move $t1, $t0 # smallest number in $t1 

blt $t2, $t1, L1 
move $t2, $t1

L1: 
li $v0, 4 # print answer 
la $a0, answer 
syscall 

li $v0, 1 # print integer function call 1 
move $a0, $t1 # integer to print 
syscall 

end: jr $ra 

.data 
prompt1: .asciiz "Enter the first number " 
prompt2: .asciiz "Enter the second number " 
prompt3: .asciiz "Enter the third number " 
answer: .asciiz "\nThe smallest number is " 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T15:33:24.393

您尝试选择最小数字的位：

```
blt $t1, $t0, L1 
move $t1, $t0 # smallest number in $t1 

blt $t2, $t1, L1 
move $t2, $t1

L1: 
```

您只有一个标签，因此如果遵循第一个分支，则完全跳过与第三个数字的比较。

你需要更多类似的东西：

```
blt $t1, $t0, L1 
move $t1, $t0 # smallest number in $t1 

L1: 

blt $t2, $t1, L2
move $t2, $t1

L2: 
```

# java - 上传 tomcat 7 的图像调试跟踪

> ID：14091843
> 
> 赞同：0
> 
> 时间：2012-12-30T15:13:18.700
> 
> 标签：java, tomcat, amazon-s3

我正在使用 S3 从基于 Java Web 的应用程序上传图像。当我在控制台中上传时，我会看到上传文件的所有二进制代码，如下所示：

`[2012-12-30 17:09:13,347] [http-bio-8081-exec-5] DEBUG org.apache.http.wire - >> "[0xd7][0xfe][0x16][0xaa]g[0xda]y.[0x8e][0xa6]~[0xb0][0xa7]\[0xc4]k[0xa0][0x12][0x8e][0xcb][0xad][0x8b]X6_v[0xb9][0xdb]][0x1][0xb1]`[0x94][0xb9][0x89]*[0xdb]j[0x4][0x9]-[0xad][0xab]r[0xe][0xdb]gV4[0x85]V5I[0x89];[0xaa][0xb4]DZ [0xd0]8B，[0xb6]P[0xf6][0xb3][0x9d][0xea][0x89][0x80][0xcb][0xe5] [2012-12-30 17:09:13,347] [http-bio- 8081-exec-5] 调试 org.apache.http.wire - >> "1[0xd2]W[\n]"`

很多行。如何从调试器中删除它？

Eclipse、Tomcat 7.0、Log4J

**解决方案** `log4j.logger.org.apache.http.wire=WARN` [http://hc.apache.org/httpcomponents-client-ga/logging.html](http://hc.apache.org/httpcomponents-client-ga/logging.html)

# cookies - Varnish 从后端响应中删除特定的 cookie

> ID：14091845
> 
> 赞同：4
> 
> 时间：2012-12-30T15:13:34.487
> 
> 标签：cookies, varnish, varnish-vcl

我需要从清漆的后端响应中删除特定的 cookie。

我的后端服务器设置了一堆我不需要的 cookie，不幸的是我无法控制，所以我想删除它们。

但是我需要一些 cookie，所以我希望能够按其名称删除 cookie。

例如，我想重命名一个名为 bad_cookie 的 cookie，但同时保留一个名为 good_cookie 的 cookie。

我找到了很多关于删除特定请求 cookie 的资源，但没有找到关于删除后端响应 cookie 的资源。

这在 Varnish 中可行吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T19:49:31.627

如果你想**重命名**我认为它会是这样的：

```
sub vcl_fetch {
    #renamed after receiving the backend
    set beresp.http.set-cookie = regsuball(beresp.http.set-cookie, "bad_cookie", "good_cookie"); 
    set beresp.http.cookie = regsuball(beresp.http.cookie, "bad_cookie", "good_cookie"); }
}

sub vcl_deliver {
    #renamed before sending the client
    set resp.http.set-cookie = regsuball(beresp.http.set-cookie, "bad_cookie", "good_cookie"); 
    set resp.http.cookie = regsuball(beresp.http.cookie, "bad_cookie", "good_cookie"); }
} 
```

如果您想**删除所有**cookie：

```
sub vcl_fetch {
    #deleted after receiving the backend
    remove beresp.http.set-cookie;
    remove beresp.http.cookie;
}

sub vcl_deliver {
    #deleted before sending the client
    remove resp.http.set-cookie;
    remove resp.http.cookie;
} 
```

`beresp.http.set-cookie`只读取第**一个 Set-Cookie header**，如果你想**删除一些并保留其他**的可以使用：[github.com/varnish/libvmod-header](http://github.com/varnish/libvmod-header) **

# mysql - 优化查询从 3 个表 mysql 中选择元素

> ID：14091846
> 
> 赞同：0
> 
> 时间：2012-12-30T15:13:40.590
> 
> 标签：mysql, select, join

数据库如下：

```
Classes       Challenges         Class Challenges
id             id                  id
               title               class_id
                                   challenge_id 
```

为了获得特定课程的所有挑战，我使用以下内容

```
SELECT 
    DISTINCT class_challenges.challenge_id, 
    challenges.title
FROM class_challenges 
LEFT JOIN challenges 
    ON class_challenges.challenge_id = challenges.id
WHERE class_challenges.class_id = :class_id
ORDER BY challenge_id 
```

对于不属于特定类别的所有挑战，我该如何做同样的事情？到目前为止，我使用：

```
SELECT 
    DISTINCT challenges.id,
    challenges.title 
FROM 
    challenges,
    class_challenges
WHERE challenges.id NOT IN(
                            SELECT 
                                DISTINCT class_challenges.challenge_id
                            FROM class_challenges
                            LEFT JOIN challenges 
                                ON class_challenges.challenge_id = challenges.id
                            WHERE class_challenges.class_id = :class_id
                            ORDER BY challenge_id
                        ); 
```

我认为可以写得更好。（也许使用双连接？）

那么，如何优化（如果可以的话？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T18:18:11.297

试试这个查询

```
SELECT
    t.id,
    t.title,
    t.CCID
FROM
(
    SELECT      
        challenges.id,
        challenges.title,
        class_challenges.id as CCID                 
    FROM 
        challenges
    LEFT JOIN class_challenges 
        ON class_challenges.challenge_id = challenges.id
) as t  
WHERE t.CCID IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T15:39:41.767

在没有看到您的预期结果的情况下，我的回答有点含糊，但无论如何这里有一个代码可以尝试。叫我*视觉*；）请在您尝试查询后发表评论。

代码列出了**“每个班级的挑战”**。您可以使用 a`variable`过滤掉特定`class id`.

[SQLFIDDLE 演示](http://sqlfiddle.com/#!2/c4b07/1)

```
SELECT DISTINCT a.id, 
group_concat(b.challenge_id) as challengeIs,
group_concat(c.title) as Titles
FROM Classes a
LEFT JOIN 
class_challenges b
ON a.id = b.class_id
LEFT JOIN challenges c
ON b.challenge_id = c.id
group by a.id
ORDER BY a.id; 
```

结果：

```
ID      CHALLENGEIS     TITLES
100     11,15       a,c
200     15          b
300     11,15       a,c
400     (null)      (null)
500     15          b 
```

**不属于特定类别的挑战**

*只是注意到我错过了添加这部分查询。*

询问：

-- 不属于某个类别的挑战

```
SELECT DISTINCT c.id,
c.title, group_concat(a.id) as class
FROM challenges c
LEFT JOIN 
class_challenges b
ON b.challenge_id = c.id
LEFT JOIN Classes a
ON a.id = b.class_id
GROUP BY c.id
HAVING class is null
ORDER BY c.id; 
```

结果：

```
ID  TITLE   CLASS
18  c   (null) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T15:19:41.000

怎么样，使用反连接：

```
SELECT challenges.id, challenges.title
FROM challenges
LEFT JOIN class_challenges ON class_challenges.challenge_id = challenges.id
    AND class_challenges.class_id = :class_id
WHERE class_challenges.id IS NULL 
```

# javascript - Javascript ascii http:// 正则表达式

> ID：14091853
> 
> 赞同：0
> 
> 时间：2012-12-30T15:15:30.803
> 
> 标签：javascript, regex

如何将ascii与正则表达式匹配？...我目前使用这个：

```
/(https?\:\/\/[^ ]*?)( |$)/gim 
```

匹配

*   http://
*   https://

但最近注意到它由于添加了 ascii 字符而无法正常工作

现在我需要一个正则表达式来匹配

*   http://
*   https://

和/或

*   `http&#58;//`

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T15:19:54.483

`/(https?(:|&#58;)\/\/[^ ]*?)( |$)/gim`

# c# - 使用 dapper dot net 的一对多插入

> ID：14091854
> 
> 赞同：0
> 
> 时间：2012-12-30T15:15:50.870
> 
> 标签：c#, linq, dapper

我在这里见过

[如何使用 dapper-dot-net 插入 IEnumerable<T> 集合](https://stackoverflow.com/questions/6387904/how-to-insert-an-ienumerablet-collection-with-dapper-dot-net)

dapper 如何`IEnumerable`作为输入参数处理并为集合的每个成员分派多个命令。

在我的情况下，我有一个`IEnumerable<int> Categories`和一个`int SurveyId`，我想将这种一对多关系插入到一个单独的映射表中，称为`SurveyCategories`

是否有一个 LINQ 扩展，我可以使用它来连接这些具有相同的类别`SurveyId`，类似于`.Concat()`？

或者我应该遍历集合并建立一个具有 SurveyId 和 CategoryId 属性的新对象列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T16:38:48.413

您可以对调查进行一次插入，然后使用以下 linq 查询作为参数一次插入所有调查类别：

```
var allSurveyCategories = surveys.SelectMany(s =>
     s.Categories.Select(c => new{SurveyId = s.SurveyId, CategoryId = c})); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T16:24:45.560

这是我到目前为止所做的，我将类别稍微更改为一个名为 CategoryIds 的 int 数组，只是因为它在我的系统中的使用方式，但我本可以这样做`survey.Categories.Select(c => c.Id).Zip(...`

```
// insert using source data from form post matching a ISurvey interface, where .Id will be 0
var surveyId = conn.Query<int>("INSERT ... " + 
                               "SELECT CAST(SCOPE_IDENTITY() AS INT)")
                               .First();

        if(source.CategoryIds != null && source.CategoryIds.Count() > 0) {
            var surveyCategories = source.CategoryIds
                    .Zip(
                        Enumerable.Repeat<int>(
                            surveyId,
                            source.CategoryIds.Count()
                        ),
                    (c, s) => new { SurveyID = s, CategoryID = c }
            );

            conn.Execute(@"INSERT INTO [SurveyCategories] " + 
                         "VALUES (@SurveyID, @CategoryID)", 
                         surveyCategories);
        } 
```

**更新：** 这是我根据 Eren 的回答使用的新方法`SelectMany`，使用 Enumerable.Repeat(..) 有点小技巧，但这是迄今为止我能够做同样事情的唯一方法。

```
 ...
        var surveyCategories = source.CategoryIds.SelectMany(
            s => Enumerable.Repeat(surveyId, 1),
            (c, s) => new { SurveyID = s, CategoryID = c });
    ... 
```

# c - 有哪些内存地址空间？

> ID：14091855
> 
> 赞同：20
> 
> 时间：2012-12-30T15:15:51.493
> 
> 标签：c, cpu-architecture, memory-address

使用了哪些形式的内存地址空间？

今天，一个大的平面虚拟地址空间很常见。从历史上看，已经使用了更复杂的地址空间，例如基地址和偏移量的对、段号和偏移量的对、字地址加上字节或其他子对象的一些索引等等.

不时地，各种答案和评论断言 C（或 C++）指针本质上是整数。这对于 C（或 C++）来说是一个不正确的模型，因为地址空间的多样性无疑是 C（或 C++）中一些关于指针操作的规则的原因。例如，不在数组之外定义指针算术简化了对基本和偏移模型中指针的支持。指针转换的限制简化了对地址加额外数据模型的支持。

这个反复出现的断言引发了这个问题。我正在寻找有关各种地址空间的信息，以说明 C 指针不一定是简单的整数，并且鉴于要支持的机器种类繁多，C 对指针操作的限制是明智的。

有用的信息可能包括：

*   具有各种地址空间和这些空间描述的计算机体系结构示例。
*   当前制造的机器中仍在使用的各种地址空间的示例。
*   对文档或解释的引用，尤其是 URL。
*   详细说明地址空间如何激发 C 指针规则。

这是一个广泛的问题，因此我愿意接受有关管理它的建议。我很高兴看到对一个普遍包容的答案进行协作编辑。但是，这可能无法获得应得的声誉。我建议对多个有用的贡献进行投票。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-30T15:34:07.643

几乎任何你能想象到的东西都可能被使用过。第一个主要划分是字节寻址（所有现代架构）和字寻址（IBM 360/PDP-11 之前的版本，但我认为现代 Unisys 大型机仍然是字寻址）。在字寻址中，`char*`通常`void*`会大于`int*`; 即使它们不是更大，“字节选择器”也将位于高位，要求为 0，或者对于字节以外的任何内容都将被忽略。（例如，在 PDP-10 上，如果`p`是 a `char*`，`(int)p < (int)(p+1)`通常会是错误的，即使它`int`具有`char*`相同的大小。）

在字节寻址机器中，主要的变体是分段和非分段架构。尽管在英特尔 32 位（具有 48 位地址的分段架构）的情况下，两者今天仍然广泛传播，但一些更广泛使用的操作系统（Windows 和 Linux）人为地将用户进程限制为单个段，模拟平面寻址。

尽管我没有最近的经验，但我希望嵌入式处理器的种类更多。特别是在过去，嵌入式处理器经常使用哈佛架构，其中代码和数据位于独立的地址空间中（以便函数指针和数据指针，转换为足够大的整数类型，可以比较相等）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-31T22:53:44.513

我会说你问错了问题，除了历史好奇心。

即使你的系统碰巧使用了一个平面地址空间——事实上，即使从现在到时间结束的每个系统都使用一个平面地址空间——你仍然不能将指针视为整数。

C 和 C++ 标准使各种指针算术“未定义”。这可能会影响您现在，在任何系统上，因为编译器会假设您避免未定义的行为并相应地进行优化。

举个具体的例子，三个月前 Valgrind 中出现了一个非常有趣的错误：

[https://sourceforge.net/p/valgrind/mailman/message/29730736/](https://sourceforge.net/p/valgrind/mailman/message/29730736/)

（单击“查看整个线程”，然后搜索“未定义行为”。）

基本上，Valgrind 使用小于和大于指针来尝试确定自动变量是否在特定范围内。因为不同聚合中的指针之间的比较是“未定义的”，所以 Clang 只是优化了*所有*比较以返回一个常量 true（或 false；我忘记了）。

这个错误本身产生了[一个有趣的 StackOverflow 问题](https://stackoverflow.com/questions/12165288/)。

因此，虽然最初的指针算术定义可能迎合了真实的机器，而且这本身可能很有趣，但它实际上与今天的编程无关。今天相关的是，无论您碰巧使用的是什么系统，您都不能简单地假设指针的行为类似于整数、句点。“未定义的行为”并不意味着“发生了一些有趣的事情”；这意味着编译器可以假设您不参与其中。当你这样做时，你在编译器的推理中引入了一个矛盾；从矛盾中，任何事情都会发生......这仅取决于您的编译器有多聪明。

他们总是变得更聪明。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-06-25T18:05:47.163

有多种形式的组交换存储器。

我在一个总内存为 128 KB 的嵌入式系统上工作：64 KB 的 RAM 和 64 KB 的 EPROM。指针只有 16 位，因此指向 RAM 的指针可以具有与 EPROM 中的指针相同的值，即使它们指向不同的内存位置。

编译器跟踪指针的类型，以便它可以在取消引用指针之前生成指令以选择正确的组。

您可能会说这就像段 + 偏移量，在硬件级别上，它本质上是。但是段（或更准确地说，银行）是指针类型隐含的，而不是存储为指针的值。如果您在调试器中检查了一个指针，您只会看到一个 16 位的值。要知道它是对 RAM 还是 ROM 的偏移，您必须知道类型。

例如，`Foo *`只能在 RAM 中，`const Bar *`也只能在 ROM 中。如果您必须将 a 复制`Bar`到 RAM 中，则该副本实际上将是不同的类型。（它不像 const/non-const 那样简单：ROM 中的所有内容都是 const，但并非所有 const 都在 ROM 中。）

这一切都在 C 中，我知道我们使用非标准扩展来完成这项工作。我怀疑一个 100% 兼容的 C 编译器可能无法处理这个问题。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2019-06-25T16:06:05.813

从 C 程序员的角度来看，需要担心三种主要的实现方式：

1.  那些以具有线性内存模型的机器为目标，并且被设计和/或配置为可用作“高级汇编程序”*的那些——标准的作者明确表示他们不希望排除*. 当优化被禁用时，大多数实现都会以这种方式运行。

2.  那些可用作具有不寻常内存架构的机器的“高级汇编程序”。

3.  那些其设计和/或配置使其仅适用于不涉及低级编程的任务，包括启用优化时的 clang 和 gcc。

针对第一种实现类型的内存管理代码通常与该类型的所有实现兼容，其目标使用相同的指针和整数表示。第二种实现的内存管理代码通常需要针对特定​​的硬件架构进行专门定制。不使用线性寻址的平台非常少见，而且种类繁多，除非需要为某些特定的不寻常硬件编写或维护代码（例如，因为它驱动昂贵的工业设备，而更现代的控制器却不是这样） t 可用）任何特定架构的知识都不太可能有太大用处。

第三种类型的实现应该只用于不需要执行任何内存管理或系统编程任务的程序。因为该标准不要求所有实现都能够支持此类任务，所以一些编译器编写者——即使是针对线性地址机器——也不会尝试支持其中的任何有用语义。甚至某些原则，例如“两个有效指针之间的相等比较将 - 在最坏的情况下 - 以可能未指定的方式选择产生 0 或 1 不适用于此类实现。

# html - 如何在 Google 站点中使用 CSS 格式化公式？

> ID：14091856
> 
> 赞同：1
> 
> 时间：2012-12-30T06:11:04.833
> 
> 标签：html, google-sites

如何添加 CSS 程式化[公式](http://jsfiddle.net/laut/uH4WY/)：

```
 <style type="text/css"> a.info {
       position:relative;
       z-index:24;
       background-color:#ddd;
       color:#000;
       text-decoration:none
   }
   a.info:hover {
       z-index:25;
       background-color:#ff0
   }
   a.info span {
       display: none
   }
   a.info:hover span {
       display:block;
       position:absolute;
       top:2em;
       left:2em;
       width:10em;
       border:2px solid #0cf;
       background-color:#555;
       color:#fff;
   }
   a:link {
       text-decoration:none;
   }
   </style><font face="times new roman, serif" size="5">
    <a class="info" href="http://www.bylau.com">
        SS<sub>T</sub><span>variable explanation</span>
    </a>&nbsp;=&nbsp;
    ∑ (<i>x</i><sub><i>i&nbsp;</i></sub>− <i>x̄</i><sub>grand</sub>)<sup>2</sup>
</font> 
```

进入 Google 协作平台？

我已经尝试过 HTML 框工具 [https://support.google.com/sites/answer/2500646?hl=en&topic=1046075&ctx=topic](https://support.google.com/sites/answer/2500646?hl=en&topic=1046075&ctx=topic)

并且格式仍然无法在 Google 协作平台中使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-25T14:10:32.180

如果您想在您的 Google 站点中包含 CSS，您需要使用应答器 Just but this in the html Box 并保存它。

我可以给你看一个例子：

```
 <object xmlns="http://www.w3.org/1999/xhtml">

<style type="text/css">

 .roll
{
font-family: arial, helvetica, sans-serif;
margin: 0;
padding: 10;
}

.roll a
{
padding: 10;
display: block;
color: #000000;
font-size: 18px;
width: 150px;
height: 18px;
display: block;
text-decoration: none;
}

a:hover
{
background-color: #ccc;
color: #eee;
}

.roll
{
cursor: pointer;
}

</style>

<div class="roll"><br />
<a href="#">Rollover Texte 01</a><br />
<a href="#">Rollover Texte 02</a>
</div>

</object> 
```

# ruby-on-rails - 自下而上的 Rails 应用程序关联

> ID：14091860
> 
> 赞同：3
> 
> 时间：2012-12-30T15:16:12.177
> 
> 标签：ruby-on-rails, model, associations

我正在自下而上构建一个 Rails 应用程序，需要一些关于模型关联的指导。

我们有客户并让他们参与多个项目。客户的用户（他们的员工）从事项目工作，并通过文件和注释为项目做出贡献。我们还与客户合作开展项目（添加文件、注释）。项目有贡献者（可能是另一个客户的一部分的用户或分包商）做出贡献（文件、注释）。

所以模型明智我想确保我正确地捕捉到一切。这就是我所拥有的，但我不确定它是否可以，并且对其他协会持开放态度。

```
Client
 has_many :projects
 has_many :users

Project
 belongs_to :client
 has_and_belongs_to_many :contributors
 has_and_belongs_to_many :contributions

User
 belongs_to :client
 belongs_to :contributor
 has_many :contributions

Contributor
 has_and_belongs_to_many :projects
 has_one :user
 has_many :contributions

Contribution
 has_and_belongs_to_many :projects
 belongs_to :contributor 
```

我认为贡献将与文件和笔记的模型相关联；项目可能与“下一步”模型相关联......我认为都是嵌套资源。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T16:50:11.997

您是否查看[过协会指南](http://guides.rubyonrails.org/association_basics.html)？您是否做过任何类型的模型域的纸质原型来阐明所有这些关联？这些是过程的重要部分，对于任何中等复杂的问题域来说，对于让事情顺利进行都很重要。

我可能会在`:contributor`关联上`Contribution`建立`has_one`关联，而不是`belongs_to`但这可能只是偏好。我也同意[Phobos98](https://stackoverflow.com/questions/14091860/bottom-up-rails-app-associations#comment19490825_14091860)与. 我认为这是一个将用户操作与项目相关联的非常好的模型。大多数像[Devise](https://github.com/plataformatec/devise)这样的身份验证框架都允许您指定角色，而像[cancan](https://github.com/ryanb/cancan)这样的框架可以让您对权限进行细粒度的控制。`Contributor``User``Contribution`

就嵌套资源而言，这确实与您的应用程序如何使其数据可用有关。就像盖房子一样。你把墙竖起来，里面有人和财物，但窗户（路线）的数量决定了谁可以看到什么。是的，让这些路线可用是有帮助的，但一开始并不需要它们以确保数据模型到位。

您是否真的尝试过这里的模型并查看它是否有效？使用脚手架，您可以快速尝试，Rails 使更改数据模型变得轻而易举，因此您没有理由不能更灵活一点。只需尝试一下，找出哪些有效，哪些无效。然后，您将知道需要更改的内容。

# c# - 如何在 ckeditor for asp.net 2.0 中注入 prevnet 脚本

> ID：14091864
> 
> 赞同：0
> 
> 时间：2012-12-30T15:16:55.040
> 
> 标签：c#, asp.net, code-injection

我在我的页面中使用 ckeditor 控件将数据插入到我的数据库中，该控件允许恶意用户将脚本注入到我的数据库中。

我怎样才能防止这种情况发生？

这是用于插入数据库的代码。

`CKeditor1.text`包含来自编辑器控件的文本。

```
intro = intro + "....";
myStatic.insertFields("ID,Title, Block,isDep,dat,imgpath,intro", " E_News", "" + maxID + ",'" + txtTitle.Text + "','" + CKEditor1.Text.Trim() + "'," + isDep + ",'" + d + "','" + txtimgpath.Text + "','" +intro.Trim()+"'"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T15:46:11.837

一种可能的解决方案是对输入数据库的值进行编码。这当然取决于存储的值如何再次输出。

另一种选择是有一个可能被认为是危险的字符的黑名单，然后一起拒绝输入。

.NET 内置了一些功能来拒绝包含潜在危险输入的请求，但我对您的情况知之甚少。

HttpServerUtility.HtmlEncode 适用于对脚本进行编码以存储在数据库中。但是，如果您在输出时对其进行解码，则会遇到同样的问题！

[http://msdn.microsoft.com/en-us/library/w3te6wfz.aspx](http://msdn.microsoft.com/en-us/library/w3te6wfz.aspx)

因此，您应该使用白名单并拒绝任何包含脚本标签的输入（您应该找到一个库来为您执行此操作）

正如 Maysam 提到的，您还需要使用 SQL 参数来确保用户无法对您的数据库执行 SQL 注入攻击，有很多关于如何执行此操作的指南。

**编辑：**

这会做你想做的事，但我建议你使用图书馆来做这种事情。

```
if (str.IndexOf("<script>", StringComparison.InvariantCultureIgnoreCase) > -1)
            return true; 
```

有关 MS Anti XSS 库的信息：http: [//msdn.microsoft.com/en-us/library/aa973813.aspx](http://msdn.microsoft.com/en-us/library/aa973813.aspx)

# c# - 在 C# 中更改编码？

> ID：14091873
> 
> 赞同：3
> 
> 时间：2012-12-30T15:18:50.317
> 
> 标签：c#, .net, encoding, utf

*理论问题：*

假设有一个来源只知道如何传输`ASCII`字符。(0..127)

假设有一个端点接收这些 chars 。

端点可以将这些字符解码为 utf8 吗？

```
 ascii chars
        ...
        ...
         |
         |
         V

    read as utf ? 
```

像这样的伪代码：

```
 var txt="אבג";
    var _bytes=Encoding.ASCII.GetBytes(txt);   <= it wont recognize [א] here
    ...transmit...
    var myUtfString=Encoding.UTF8.GetString(getBytesFromWire();  <= some magic has to be done here 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T15:20:38.160

这是可能的，但不使用 UTF8。
UTF8 的工作原理是将多字节字符编码为 128 到 255 之间的字节序列。
您的 ASCII 协议将无法传输这些字节。

相反，您需要一些机制来将任意 Unicode 代码点或字节存储在纯 ASCII 文本中：

*   您可以使用任何编码对 Unicode 文本进行编码以获取（非 ASCII）字节流，然后使用 Base64 编码传输这些字节
*   您可以使用[UTF7 编码](http://en.wikipedia.org/wiki/UTF-7)使用纯 ASCII 字符对 Unicode 代码点进行编码。
    如果您的文本主要是 ASCII，这将比 Base64 更节省空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T15:25:25.453

```
var txt = "אבג";
var str = Convert.ToBase64String(Encoding.UTF8.GetBytes(txt)); //<--ASCII
//Transmit
var txt2 = Encoding.UTF8.GetString(Convert.FromBase64String(str)); 
```

# c# - 如何在下拉列表中使用 C# 枚举

> ID：14091874
> 
> 赞同：3
> 
> 时间：2012-12-30T15:18:59.397
> 
> 标签：c#, listview, drop-down-menu, enums, webforms

我使用 Entity Framework 5 创建了一个数据库并使用了枚举功能。我现在想使用我在下拉列表中定义的这些枚举。

我的枚举是由 EF 在这里创建的：

```
namespace Dumpling
{
    using System;

    public enum DebtType : short
    {
        Mortgage = 0,
        Installment = 1,
        Revolving = 2,
        Judgement = 3,
        TaxLien = 4,
        TradelineDispute = 5,
        AddressDiscrepancy = 6, 
        NameVariation = 7
    }
} 
```

我希望做的是在`ListView`. 我不确定如何让下拉列表`datasourceID`使用枚举。我会`<asp:DropDownList>`怎样做才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T15:23:38.583

来自使用 MVC 的 NopCommerce 代码库（稍作修改）：

```
public static SelectList ToSelectList<TEnum>(this TEnum enumObj, bool markCurrentAsSelected = true) where TEnum : struct {
    if (!typeof(TEnum).IsEnum) throw new ArgumentException("An Enumeration type is required.", "enumObj");

    var values = from TEnum enumValue in Enum.GetValues(typeof(TEnum))
                    select new { ID = Convert.ToInt32(enumValue), Name = enumValue.ToString() };
    object selectedValue = null;
    if (markCurrentAsSelected)
        selectedValue = Convert.ToInt32(enumObj);
    return new SelectList(values, "ID", "Name", selectedValue);
} 
```

尚未通过细微修改来删除一些特定于 NC 的代码对此进行测试，但基本概念应该能让你到达那里。当然你不会有 SelectList，但你应该可以很容易地修改它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T18:04:39.420

好吧，如果您在 ListView 中有 DropDownList，那么我将使用以下方法（它可能可以优化，我的 ASP.NET Web 窗体技能正在生锈）。

模型：

```
public enum AnimalType
{
    Dog = 1,
    Cat = 2,
    Sheep = 3,
    Horse = 4
}

public class Animal
{
    public string Name { get; set; }
    public AnimalType Type { get; set; }
} 
```

页：

```
<asp:ListView ID="lstAnimals" runat="server" onitemdatabound="lstAnimals_ItemDataBound">    
<ItemTemplate>
    <div>
        <asp:TextBox runat="server" Text='<%#Eval("Name") %>' />
        <asp:DropDownList ID="lstAnimalType" runat="server" DataValueField="Id" DataTextField="Description"  />
    </div>
</ItemTemplate> 
```

代码背后：

```
protected void Page_Load(object sender, EventArgs e)
{
   var animals = new List<Animal>();
   animals.Add(new Animal() { Name = "Doggie", Type = AnimalType.Dog});
   animals.Add(new Animal() { Name = "Sheepie", Type = AnimalType.Sheep });
   lstAnimals.DataSource = animals;
   lstAnimals.DataBind();
}

protected void lstAnimals_ItemDataBound(object sender, ListViewItemEventArgs e)
{
    var ddlAnimalType = (DropDownList)e.Item.FindControl("lstAnimalType");
    var enumValues = Enum.GetValues(typeof (AnimalType)).Cast<AnimalType>().ToList();
    var bindableList = enumValues.Select(v => new { Id = (int) v, Description = v.ToString() });
    ddlAnimalType.DataSource = bindableList;
    ddlAnimalType.DataBind();
} 
```

# c# - 如何更新 MongoDB 文档中的字典

> ID：14091875
> 
> 赞同：4
> 
> 时间：2012-12-30T15:19:13.340
> 
> 标签：c#, mongodb, mongodb-.net-driver

如何更新 BSON 文档中 <byte,string> 字典属性的表示形式？我不知道如何使用 BSON 类型来做到这一点。该对象是使用自动 BSON 序列化存储的，我想替换整个字典。

假设我们有这个类：

```
public class Message  
{
    public string Text {get;set;}
    public Dictionary<byte, string> Contents {get;set;}
} 
```

在 MongoDB 中，消息集合看起来像这样：

```
{
  _id :  12345,
  Text : "This is a text",
  Contents: [ [1 : "true"], [3 : "youtube"] ]
} 
```

更新应该是这样的

```
var query = Query.EQ("_id", messageId);
var update = Update.Set("Contents", -> how to build me?);
MessageCollection.Update(query, update); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T13:50:55.587

我现在正在序列化完整的消息对象，然后取出字典部分进行更新。

```
var messageDoc = new BsonDocument();
var bsonWriter = BsonWriter.Create(messageDoc);
BsonSerializer.Serialize<Message>(bsonWriter, message);

var query = Query.EQ("_id", messageId);
var update = Update.Set("Contents", messageDoc["Contents"]);
MessageCollection.Update(query, update); 
```

# objective-c - dispatch_async 中的 NSManagedObjectContext performBlock

> ID：14091878
> 
> 赞同：2
> 
> 时间：2012-12-30T15:19:38.037
> 
> 标签：objective-c, cocoa, core-data, grand-central-dispatch, nsmanagedobjectcontext

我正在使用 GCD 进行一些后台处理，并使用 Core Data 保存一些对象。在方法中`[self saveData]`，我创建了一个`NSManagedObjectContext`并发类型`NSPrivateQueueConcurrencyType`来在后台线程上执行核心数据操作。我在`performBlock`.

现在，是否有必要`[self saveData]`从主线程调用或者我可以在我所在的后台线程中继续（以避免额外的调用`dispatch_async(dispatch_get_main_queue(), ^{});`）

像这样：

```
dispatch_async(dispatch_get_global_queue(0, 0), ^{

    BOOL isProcessed = [self processData];
    if (isProcessed) {

        // Save with Core Data
        [self saveData];
    }
}); 
```

还是我需要这样做：

```
dispatch_async(dispatch_get_global_queue(0, 0), ^{

    BOOL isProcessed = [self processData];
    if (isProcessed) {

        dispatch_async(dispatch_get_main_queue(), ^{

            // Save with Core Data
            [self saveData];
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T15:31:27.280

`performBlock:`并`performBlockAndWait:`确保在为上下文指定的队列上执行块操作。`performBlock:`因此，在哪个线程上调用或被调用并不重要`performBlockAndWait:`。

因此，如果用于所有操作，`dispatch_async(dispatch_get_main_queue(), ^{});`则不需要额外的。`[self saveData]``performBlock:`

# javascript - 通过参数设置未定义的参数

> ID：14091890
> 
> 赞同：1
> 
> 时间：2012-12-30T15:21:10.450
> 
> 标签：javascript, parameters, arguments

我正在尝试编写一个基于先前指定的可选参数更正 a 的`arguments`函数`function`。我遇到了一个问题。似乎我不能通过`arguments`数组设置变量，除非它们以前以任何方式定义过。下面的代码显示了我面临的问题的一个示例。

```
function foo(a, b, c) {
    arguments[0] = "lorem";
    arguments[1] = "ipsum";
    arguments[2] = "dolor";

    console.log([a, b, c]);
}

foo(null);              // ["lorem", undefined, undefined]
foo(null, null);        // ["lorem", "ipsum",   undefined]
foo(null, null, null);  // ["lorem", "ipsum",   "dolor"] 
```

记录`arguments`结果时总是`["lorem", "ipsum", "dolor"]`如此。
有没有办法解决这个问题？

我不能直接设置`a`，因为调用的函数`b`无法访问这些名称。 我的目标看起来像这样：`c``foo`

```
function foo(a, b, c) {
    var rules = [];
    // Rule for optional parameter 1 (b)
    // If it equals true the value of b is shifted to the next parameter (c)
    rules[1] = function(val) { return val !== "ipsum"; };
    optionalize(rules);

    console.log([a, b, c]);
}

foo("lorem", "dolor"); // ["lorem", undefined, "dolor"]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T15:22:28.100

数组并不是真正的`arguments`数组，而是[“类数组”对象](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)。你不能改变它的长度。

您尝试做的通常是使用

```
a = a || "lorem"; 
```

或者，如果您不想替换任何“虚假”参数，请使用

```
if (typeof a === "undefined") a = "lorem"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T15:26:08.640

我不确定您要做什么，但是诸如 arguments[0] = a 之类的东西？一个：“lorem”等等？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T16:18:16.247

您可以将参数转换为数组

```
function foo () {
     var arguments = Array.prototype.slice.call(arguments);
     arguments.push(4);
     console.log(arguments);
}
foo(1,2,3); 
```

​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T17:00:39.873

这有点奇怪，但这是你的想法吗？

```
function optionalize(fn, options) {
    var i, key, rule;
    for(i = 0; i < options.length; i += 1) {
        key = fn.placement[i];
        rule = fn.ruleset[key];

        // If the rule exists and returns true, shift value to the right.
        if(rule && rule(options[i])) {
            options[i+1] = options[i];
            options[i] = undefined;
        }

        // Assign the numeric index to an alphabet key.
        // Depending on your use case, you may want to substitute a plain Object here and return that, instead of adding non-numeric properties to an Array.
        options[key] = options[i];
    }
}

// Test function
function foo(a, opts) {
    opts = opts || [];
    optionalize(foo, opts);

    console.log([a, opts.b, opts.c]);
}

// Optional argument names, in the order that they would be received.
foo.placement = ['b', 'c'];

// Optionalize rules
foo.ruleset = {
    b: function (val) { return val !== "ipsum"; }
};

// Demonstration
foo('lorem');
foo('lorem', []);
foo('lorem', ['dolor']);
foo('lorem', ['ipsum', 'dolor']); 
```

正如dystroy的答案已经表明的那样，该`arguments`变量不是真正的数组，更改它可能不是一个好主意。我提供了一个不依赖`arguments`并尽可能使用简单 JavaScript 满足标准的解决方案。

该函数`foo`由一个必需参数指定`a`，后跟一个名为 的可选参数数组`opts`。一个 optionalize 规范被设置到`foo`, 通过`placement`和`ruleset`属性。optionalize 函数获取此信息并将数组的索引转换为可用的名称键，并根据需要应用规则。

# sql - SQL 网络接口，错误：26 - 错误定位服务器

> ID：14091891
> 
> 赞同：2
> 
> 时间：2012-12-30T15:21:22.657
> 
> 标签：sql, sql-server, visual-studio

我希望有人可以帮助我。我在 Visual Studio 2010 中有不同的项目（网站）。今天，当我尝试在服务器资源管理器的数据连接中扩展其中一个数据库时，我得到一个带有此错误的窗口：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例） 描述：在执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Data.SqlClient.SqlException：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）
> 
> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

这种情况发生在我所有的项目中。我想这是因为我昨天安装了卡巴斯基 2012。请我需要帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T18:24:28.990

我认为问题出在您的防火墙上。您可以采取以下措施来消除此错误：http: [//blog.sqlauthority.com/2009/05/21/sql-server-fix-error-provider-named-pipes-provider-error-40-could-not -open-a-connection-to-sql-server-microsoft-sql-server-error/](http://blog.sqlauthority.com/2009/05/21/sql-server-fix-error-provider-named-pipes-provider-error-40-could-not-open-a-connection-to-sql-server-microsoft-sql-server-error/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T15:44:38.223

可能正在安装 Kaspersky 停止的 SQL Server 服务。`services.msc`在运行对话框中键入以打开服务面板。确保 SQL Server 服务的状态为**Started**。如果没有，请右键单击 SQL Server 并选择开始。

当然这是如果您使用的是 Windows 。

# regex - 匹配已知数量的中间字母的第一个和最后一个字符

> ID：14091899
> 
> 赞同：0
> 
> 时间：2012-12-30T15:22:58.443
> 
> 标签：regex, notepad++

有一个带有单词的文本文件。因此，如果一个单词有 5 个字母，第一个字母是 a，最后一个字母是 si，则希望匹配遵循该模式的所有单词。

```
^a.???.s$ 
```

这似乎不起作用

（我在记事本++中测试）

任何想法正确的正则表达式是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T15:35:42.320

如果要匹配所有匹配项，则应执行以下操作：

```
/\ba[a-z]{3}s\b/ 
```

对于非拉丁字符：

```
/\ba\S{3}s\b/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T15:28:01.337

我认为您正在寻找：

```
^a.{3}s$ // .{3} means, match any character exactly 3 times. 
```

这与以下内容基本相同：

```
^a...s$ // . means, match any character 
```

# java - 将窗口对话框或框架附加到另一个的磁效应

> ID：14091901
> 
> 赞同：4
> 
> 时间：2012-12-30T15:23:13.050
> 
> 标签：java, swing, location, frame

我必须到窗口（JFrame 和非模态 JDialog）并且我想将 JDialog 附加到 JFrame，这样当我移动 JFrame 时，JDialog 也会被移动。同步运动本身不是问题。我是通过 ComponentListener.componentMoved(.) 实现的。

但附件不应固定。用户应该可以通过将 JDialog 移离 JFrame 来分离它。只有当 JDialog 被直接放置到 JFrame 边框时，它才应该被附加。

为了帮助用户将 JDialog 恰好放置在 JFrame 旁边（附上它），我想**实现“磁效应”**：如果 JDialog 移动到 JFrames 边框的距离小于 10px，则 JDialog 应该自动放置在 JFrame 旁边。在 ComponentListener.componentMoved(.) 中检测这种情况也不是问题，而是设置新的 JDialog 位置：

当我通过 JDialog.setLocation(.) 首先设置新位置时，JDialog 被正确放置。**但是当我完成对话框拖动（释放鼠标按钮）时，JDialog 被放回先前的位置（距离 JFrame 10px）**。

我认为这是因为在拖动结束时，“系统”也调用了 setLocation(.)。有什么想法可以防止这种行为吗？例如，从事件队列中删除任何以下鼠标移动或鼠标释放事件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T18:12:19.510

我对这个问题很感兴趣，并决定制作我自己的小程序，该程序将创建一个主框架/码头和其他可停靠的容器。这些容器将跟随主框架以保持在它们的位置。

所以虽然回答了我想分享我的例子。

至于为什么 OPs 代码不能完美运行，我认为这是因为`componentMoved`每次移动都会重新触发，因此在可停靠的移动过程中出现了问题。

这是一个小示例，您现在可以将可停靠点添加到主机的北、东、南和/或西。Dockables 保持在其位置的方式由诸如*Sticky*、*Magnetic*和*Follow Layout*之类的布局管理。

*Sticky Layout*随主框架移动，而 Follow*调用*可停靠设备*移动*到主框架位置，*Magnetic*确实会吸引一定距离内的所有可停靠设备到主框架上指定的最终/停靠点（主框架的东顶部）的给定距离。

它使用 a`ComponentAdapter/Listener`和`Swing Timer`with`Component#setLocation(int x,int y)`来实现结果。

下面的屏幕截图是 4 个可停靠的（北、西、东和南），中心屏幕是主框架。该类`Docker`有一个`getDockToolbar`允许我们添加具有预建*停靠*和*取消停靠*按钮的工具栏的能力。

![在此处输入图像描述](../Images/9319aaef8cf28ba8890890f37b6f2d14.png)

这是代码（下面显示磁性布局）：

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.Point;
import java.awt.Window;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.ComponentAdapter;
import java.awt.event.ComponentEvent;
import java.util.HashMap;
import java.util.Map;
import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.Timer;

public class MagneticFrameAndDialog {

    public MagneticFrameAndDialog() {
        createAndShowGUI();

    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new MagneticFrameAndDialog();
            }
        });
    }

    private void createAndShowGUI() {
        JFrame frame = new JFrame("JFrame (The Docks)");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        Docker docker = new Docker();
        docker.registerDock(frame);
        docker.setLayout(Docker.MAGNETIC_LAYOUT);
        //docker.setMagneticFieldSize(250);//default is 150
        docker.setComponentMovedReactTime(50);//default is 100

        JDialog d1 = createAndShowDialog(300, 300);
        d1.setTitle("East Dockable");
        JDialog d2 = createAndShowDialog(300, 100);
        d2.setTitle("South Dockable");
        JDialog d3 = createAndShowDialog(100, 300);
        d3.setTitle("West Dockable");
        JDialog d4 = createAndShowDialog(300, 100);
        d4.setTitle("North Dockable");

        docker.registerDockee(d1, Docker.EAST_DOCKED);
        docker.registerDockee(d2, Docker.SOUTH_DOCKED);
        docker.registerDockee(d3, Docker.WEST_DOCKED);
        docker.registerDockee(d4, Docker.NORTH_DOCKED);

        frame.add(docker.getDockToolbar(), BorderLayout.SOUTH);

        frame.pack();
        frame.setVisible(true);
    }

    private JDialog createAndShowDialog(final int w, final int h) {
        JDialog dialog = new JDialog() {
            @Override
            public Dimension getPreferredSize() {
                return new Dimension(w, h);
            }
        };
        dialog.setTitle("Dockable Dialog");
        dialog.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
        dialog.pack();
        dialog.setVisible(true);
        return dialog;
    }
}

class Docker {

    public static final String NORTH_DOCKED = "dock north", SOUTH_DOCKED = "dock south", WEST_DOCKED = " dock west", EAST_DOCKED = "dock east";
    public static final String FOLLOW_LAYOUT = "layout follow", STICKY_LAYOUT = "layout sticky", MAGNETIC_LAYOUT = "layout magnetic";
    private HashMap<Component, String> dockees = new HashMap<>();
    private Timer dockeeMoveTimer;
    private ComponentAdapter caDock, caDockee;
    private Component dock;
    private String layout = STICKY_LAYOUT;
    private int MAGNETIC_FIELD_SIZE = 150, movedReactTime = 100;

    public Docker() {
        initTimers();
        initComponentAdapters();
    }

    public void setLayout(String layout) {
        this.layout = layout;
    }

    void setComponentMovedReactTime(int milis) {
        movedReactTime = milis;
    }

    private void initComponentAdapters() {
        caDockee = new ComponentAdapter() {
            @Override
            public void componentMoved(ComponentEvent ce) {
                super.componentMoved(ce);
                if (layout.equals(MAGNETIC_LAYOUT)) {
                    createDockeeMovedTimer();
                } else {
                    iterateDockables();
                }
            }

            private void createDockeeMovedTimer() {
                if (dockeeMoveTimer.isRunning()) {
                    dockeeMoveTimer.restart();
                } else {
                    dockeeMoveTimer.start();
                }
            }
        };
        caDock = new ComponentAdapter() {
            @Override
            public void componentMoved(ComponentEvent ce) {
                super.componentMoved(ce);
                iterateDockables();
            }

            @Override
            public void componentResized(ComponentEvent ce) {
                super.componentResized(ce);
                iterateDockables();
            }
        };
    }

    private void initTimers() {
        dockeeMoveTimer = new Timer(movedReactTime, new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                iterateDockables();
            }
        });
        dockeeMoveTimer.setRepeats(false);
    }

    private void iterateDockables() {
        //System.out.println("Dock will call for Dockees to come");
        for (Map.Entry<Component, String> entry : dockees.entrySet()) {
            Component component = entry.getKey();
            String pos = entry.getValue();
            if (!isDocked(component, pos)) {
                dock(component, pos);
            }
        }
    }

    void registerDock(Component dock) {
        this.dock = dock;
        dock.addComponentListener(caDock);
    }

    void registerDockee(Component dockee, String pos) {
        dockee.addComponentListener(caDockee);
        dockees.put(dockee, pos);
        caDock.componentResized(new ComponentEvent(dock, 1));//not sure about the int but w dont use it so its fine for now
    }

    void deregisterDockee(Component dockee) {
        dockee.removeComponentListener(caDockee);
        dockees.remove(dockee);
    }

    void setMagneticFieldSize(int sizeInPixels) {
        MAGNETIC_FIELD_SIZE = sizeInPixels;
    }

    private boolean isDocked(Component comp, String pos) {
        switch (pos) {
            case EAST_DOCKED:
                int eastDockedX = dock.getX() + dock.getWidth();
                int eastDockedY = dock.getY();
                if (layout.equals(MAGNETIC_LAYOUT)) {
                    if (comp.getLocation().distance(new Point(eastDockedX, eastDockedY)) <= MAGNETIC_FIELD_SIZE) {
                        return false;
                    } else {
                        return true;
                    }
                } else {
                    if (comp.getX() == eastDockedX && comp.getY() == eastDockedY) {
                        // System.out.println("is eastly docked");
                        return true;
                    }
                }
                break;
            case SOUTH_DOCKED:
                int southDockedX = dock.getX();
                int southDockedY = dock.getY() + dock.getHeight();
                if (layout.equals(MAGNETIC_LAYOUT)) {
                    if (comp.getLocation().distance(new Point(southDockedX, southDockedY)) <= MAGNETIC_FIELD_SIZE) {
                        return false;
                    } else {
                        return true;
                    }
                } else {
                    if (comp.getX() == southDockedX && comp.getY() == southDockedY) {
                        // System.out.println("is southly docked");
                        return true;
                    }
                }
                break;
            case WEST_DOCKED:
                int westDockedX = dock.getX() - comp.getWidth();
                int westDockedY = dock.getY();
                if (layout.equals(MAGNETIC_LAYOUT)) {
                    if (comp.getLocation().distance(new Point(westDockedX + comp.getWidth(), westDockedY)) <= MAGNETIC_FIELD_SIZE) {
                        return false;
                    } else {
                        return true;
                    }
                } else {
                    if (comp.getX() == westDockedX && comp.getY() == westDockedY) {
                        // System.out.println("is southly docked");
                        return true;
                    }
                }
                break;
            case NORTH_DOCKED:
                int northDockedX = dock.getX() + comp.getHeight();
                int northDockedY = dock.getY() - comp.getHeight();
                if (layout.equals(MAGNETIC_LAYOUT)) {
                    if (comp.getLocation().distance(new Point(northDockedX - comp.getHeight(), northDockedY + comp.getHeight())) <= MAGNETIC_FIELD_SIZE) {
                        return false;
                    } else {
                        return true;
                    }
                } else {
                    if (comp.getX() == northDockedX && comp.getY() == northDockedY) {
                        // System.out.println("is southly docked");
                        return true;
                    }
                }
                break;
        }
        return false;
    }
    private Timer eastTimer = null, southTimer = null, westTimer = null, northTimer = null;

    private void dock(final Component comp, String pos) {
        //System.out.println("Snapping Dockee back to the dock");
        switch (pos) {
            case EAST_DOCKED:
                int eastDockedX = dock.getX() + dock.getWidth();
                int eastDockedY = dock.getY();
                if (eastTimer == null) {
                    eastTimer = getTimer(comp, eastDockedX, eastDockedY);
                    eastTimer.start();
                } else {
                    if (!eastTimer.isRunning()) {
                        eastTimer = getTimer(comp, eastDockedX, eastDockedY);
                        eastTimer.start();
                    }
                }
                break;
            case SOUTH_DOCKED:
                int southDockedX = dock.getX();
                int southDockedY = dock.getY() + dock.getHeight();
                if (southTimer == null) {
                    southTimer = getTimer(comp, southDockedX, southDockedY);
                    southTimer.start();
                } else {
                    if (!southTimer.isRunning()) {
                        southTimer = getTimer(comp, southDockedX, southDockedY);
                        southTimer.start();
                    }
                }
                break;
            case WEST_DOCKED:
                int westDockedX = dock.getX() - comp.getWidth();
                int westDockedY = dock.getY();
                if (westTimer == null) {
                    westTimer = getTimer(comp, westDockedX, westDockedY);
                    westTimer.start();
                } else {
                    if (!westTimer.isRunning()) {
                        westTimer = getTimer(comp, westDockedX, westDockedY);
                        westTimer.start();
                    }
                }
                break;
            case NORTH_DOCKED:
                int northDockedX = dock.getX();
                int northDockedY = dock.getY() - comp.getHeight();
                if (northTimer == null) {
                    northTimer = getTimer(comp, northDockedX, northDockedY);
                    northTimer.start();
                } else {
                    if (!northTimer.isRunning()) {
                        northTimer = getTimer(comp, northDockedX, northDockedY);
                        northTimer.start();
                    }
                }
                break;
        }
    }

    private Timer getTimer(final Component comp, int finalX, int finalY) {
        Timer t = null;
        switch (layout) {
            case STICKY_LAYOUT:
                t = stickyDockableTimer(comp, finalX, finalY);
                break;
            case FOLLOW_LAYOUT:
                t = followDockableTimer(comp, finalX, finalY);
                break;
            case MAGNETIC_LAYOUT:
                t = followDockableTimer(comp, finalX, finalY);
                break;
        }
        return t;
    }

    private Timer followDockableTimer(final Component comp, final int finalX, final int finalY) {
        Timer t = new Timer(1, new AbstractAction() {
            int INCREMENT = 1, DECREMENT = 1;
            int x = comp.getX(), y = comp.getY();

            @Override
            public void actionPerformed(ActionEvent ae) {
                //System.out.println(finalX + "," + finalY);
                if (x < finalX) {
                    x += INCREMENT;
                } else if (x > finalX) {
                    x -= DECREMENT;
                }
                if (y < finalY) {
                    y += INCREMENT;
                } else if (y > finalY) {
                    y -= DECREMENT;
                }
                comp.setLocation(x, y);
                if (x == finalX && y == finalY) {
                    if (comp instanceof Window) {
                        ((Window) comp).toFront();
                    }
                    ((Timer) ae.getSource()).stop();
                }
            }
        });
        return t;
    }

    public JPanel getDockToolbar() {
        JPanel panel = new JPanel();
        for (Map.Entry<Component, String> entry : dockees.entrySet()) {
            final Component component = entry.getKey();
            String pos = entry.getValue();
            Docker.MyButton jtb = new Docker.MyButton("un-dock" + pos.replace("dock", ""), component, pos);
            panel.add(jtb);
            jtb.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent ae) {
                    Docker.MyButton jtb = (Docker.MyButton) ae.getSource();
                    String tmp = jtb.getText();
                    if (tmp.contains("un-dock")) {
                        jtb.setText(tmp.replace("un-dock", "dock"));
                        deregisterDockee(jtb.getComponent());
                    } else {
                        jtb.setText(tmp.replace("dock", "un-dock"));
                        registerDockee(jtb.getComponent(), jtb.getDockablePosition());
                    }
                }
            });
        }
        return panel;
    }

    private Timer stickyDockableTimer(final Component comp, final int finalX, final int finalY) {
        Timer t = new Timer(1, new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                comp.setLocation(finalX, finalY);
            }
        });
        t.setRepeats(false);
        return t;
    }

    private class MyButton extends JButton {

        private final Component c;
        private final String pos;

        public MyButton(String text, Component c, String pos) {
            super(text);
            this.c = c;
            this.pos = pos;
        }

        public Component getComponent() {
            return c;
        }

        public String getDockablePosition() {
            return pos;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-30T23:59:27.563

经过数小时的无效搜索和反复试验后，我发布了上面提到的问题。经过几分钟的搜索后，我找到了解决方案……哦！

诀窍不是在 ComponentListener.componentMoved(.) 期间直接通过 JDialog.setLocation(.) 设置对话框的位置，而是简单地修改鼠标位置（仍然处于拖动模式！）：

```
// Example ONLY for magnetic effect on EAST border of JFrame!!
int dockDistE = ...; // distance on east border of JFrame to west border of JDialog
...
try {
  // determine mouse location
  Point mouseLoc = MouseInfo.getPointerInfo().getLocation();
  Robot robot = new Robot();
  // move mouse to west exactly the remaining distance to JFrame
  robot.mouseMove(mouseLoc.x-dockDistE, mouseLoc.y);
  // release mouse button to automatically finish dragging
  robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);
} catch (AWTException e1) {
  // TODO Auto-generated catch block
  e1.printStackTrace();
} 
```

修改鼠标位置会导致 JDialog 的窗口自动拖动/移动到附加位置。

在这里你可以找到我完整的 DockingListener： [http ://wald.intevation.org/scm/viewvc.php/trunk/schmitzm-core/src/main/java/de/schmitzm/swing/event/DockingListener.java?root= schmitzm&view=markup](http://wald.intevation.org/scm/viewvc.php/trunk/schmitzm-core/src/main/java/de/schmitzm/swing/event/DockingListener.java?root=schmitzm&view=markup) 除了 JDK (1.6) 之外没有其他依赖项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-01T07:08:30.177

我创建了一个名为 DockingManager 的类，它可以让您停靠 Dialogs 和 Frames 伪 Winamp Style

它还可以让您制作不同的集群并设置磁性水平以选择哪个框架拖动其他框架）

```
package com.gsteren.docking;

import java.awt.Component;
import java.awt.Dimension;
import java.awt.Point;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.ComponentEvent;
import java.awt.event.ComponentListener;
import java.awt.event.FocusEvent;
import java.awt.event.FocusListener;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Map;
import java.util.Set;

import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.Timer;
import javax.swing.UIManager;

public class DockingManager {

    public static enum DockingMode {
        EAST, WEST, NORTH, SOUTH, NONE
    }

    int magneticDistance = 20;

    public static Map<Component, DockingApplier> monitoredComponents = new HashMap<Component, DockingApplier>();

    /**
     * Para saber cual es el último Component movido por el usuario.
     */
    private static DockingApplier focusedApplier;

    public void registerComponent(Component component) {
        this.registerComponent(component, 1);
    }

    public void registerComponent(Component component, int magneticLevel) {
        DockingApplier applier = new DockingApplier(component, magneticLevel);
        monitoredComponents.put(component, applier);
    }

    /**
     * Indica el grupo completo de componentes pegados al que pertenece un
     * componente.
     * 
     * @author Guillermo
     * 
     */
    protected class DockingApplierCluster {
        Set<DockingApplier> appliers = new HashSet<DockingApplier>();
        DockingApplier leader = null;

        public DockingApplierCluster(DockingApplier applier) {
            this.addToCluster(applier);
        }

        public DockingApplierCluster(Set<DockingApplier> appliers) {
            for (DockingApplier applier : appliers) {
                this.addToCluster(applier);
            }
        }

        public void addToCluster(DockingApplier applier) {
            appliers.add(applier);
            applier.setCluster(this);
            if (null == leader || applier.getMagneticLevel() < leader.getMagneticLevel()) {
                this.setLeader(applier);
            }
        }

        public int getSize() {
            return getAppliers().size();
        }

        public void mergeCluster(DockingApplierCluster cluster) {
            DockingApplierCluster bigCluster;
            DockingApplierCluster smallCluster;
            if (getSize() > cluster.getSize()) {
                bigCluster = this;
                smallCluster = cluster;
            } else {
                bigCluster = cluster;
                smallCluster = this;
            }
            for (DockingApplier applier : smallCluster.getAppliers()) {
                bigCluster.addToCluster(applier);
            }

        }

        public Set<DockingApplier> getAppliers() {
            return this.appliers;
        }

        /**
         * @return the leader
         */
        public DockingApplier getLeader() {
            return leader;
        }

        /**
         * @param leader
         *            the leader to set
         */
        public void setLeader(DockingApplier leader) {
            this.leader = leader;
        }

        public void remove(DockingApplier applier) {
            if (this.getAppliers().size() == 1) {
                /* No sacamos el único elemento */
                return;
            }

            this.getAppliers().remove(applier);

            if (this.leader == applier) {
                this.leader = findLeader();
            }

            /* Pude haber dividido en varios clusters */
            this.recalculateClustersAfterRemoval();
        }

        public void recalculateClustersAfterRemoval() {
            Set<DockingApplier> myAppliersCopy = new HashSet<DockingManager.DockingApplier>(getAppliers());
            Set<DockingApplier> visitedAppliers = new HashSet<DockingManager.DockingApplier>();
            for (DockingApplier applier : myAppliersCopy) {
                if (visitedAppliers.contains(applier)) {
                    continue;
                }
                Set<DockingApplier> newClusterComponents = findClusteredAppliers(applier);
                if (newClusterComponents.size() == myAppliersCopy.size()) {
                    /* No se dividieron los clusters */
                    return;
                }
                visitedAppliers.addAll(newClusterComponents);
                /* Creo un nuevo cluster, y le agrego los elementos */
                new DockingApplierCluster(newClusterComponents);
            }

        }

        /**
         * Devuelve todos los DockingAppliers anexos entre si.
         * 
         * @param anApplier
         * @return
         */
        public Set<DockingApplier> findClusteredAppliers(DockingApplier anApplier) {
            return findClusteredAppliers(anApplier, new HashSet<DockingManager.DockingApplier>());
        }

        public Set<DockingApplier> findClusteredAppliers(DockingApplier anApplier, Set<DockingApplier> currentSet) {
            currentSet.add(anApplier);
            for (DockingApplier applier : anApplier.getAttachedComponents()) {
                if (currentSet.contains(applier)) {
                    continue;
                }
                currentSet.add(applier);
                currentSet.addAll(findClusteredAppliers(applier, currentSet));
            }
            return currentSet;
        }

        private DockingApplier findLeader() {
            DockingApplier leaderCandidate = null;
            for (DockingApplier applier : getAppliers()) {
                if (leaderCandidate == null || applier.getMagneticLevel() < leaderCandidate.getMagneticLevel()) {
                    leaderCandidate = applier;
                    if (applier.getMagneticLevel() == 1) {
                        /* Encontramos óptimo */
                        break;
                    }
                }
            }
            return leaderCandidate;
        }

    }

    protected class DockingApplier implements ComponentListener, FocusListener {

        private Component component = null;
        private DockingApplierCluster cluster;

        public DockingApplier(Component component, int magneticLevel) {
            this.component = component;
            this.cluster = new DockingApplierCluster(this);
            this.magneticLevel = magneticLevel;
            this.updateLastLocation();

            /*
             * Esto no es necesario ya que registerComponent es quien crea el
             * applier
             */
            if (!monitoredComponents.containsKey(component)) {
                monitoredComponents.put(component, this);
            }

            this.component.addComponentListener(this);
            this.component.addFocusListener(this);
            componentFinishedMovingDetector.setRepeats(false);
        }

        public void setCluster(DockingApplierCluster cluster) {
            this.cluster = cluster;
        }

        /**
         * @return the cluster
         */
        public DockingApplierCluster getCluster() {
            return cluster;
        }

        boolean isClusterLeader() {
            return getCluster().getLeader() == this;
        }

        /**
         * @return the magneticLevel
         */
        public Integer getMagneticLevel() {
            return magneticLevel;
        }

        /**
         * @param magneticLevel
         *            the magneticLevel to set
         */
        public void setMagneticLevel(Integer magneticLevel) {
            this.magneticLevel = magneticLevel;
        }

        /**
         * @return the isDocking
         */
        protected boolean isDocking() {
            return isDocking;
        }

        /**
         * @param isDocking
         *            the isDocking to set
         */
        protected void setDocking(boolean isDocking) {
            this.isDocking = isDocking;
        }

        /**
         * @return the attachedComponents
         */
        public Set<DockingApplier> getAttachedComponents() {
            return attachedComponents;
        }

        int northY;
        int southY;
        int westX;
        int eastX;

        public void recalculateBorderCoordinates() {
            Point compLoc = component.getLocation();
            Dimension compDim = component.getSize();
            northY = compLoc.y;
            southY = northY + compDim.height;
            westX = compLoc.x;
            eastX = westX + compDim.width;
        }

        public DockingMode calculateWhereToDock(DockingApplier other, int magneticDistance) {
            return calculateWhereToDock(this, other, magneticDistance);
        }

        /**
         * Indica si me debería lockearse con other
         * 
         * @param me
         * @param other
         * @return
         */
        public DockingMode calculateWhereToDock(DockingApplier me, DockingApplier other, int magneticDistance) {

            /* Talvez innecesario */
            me.recalculateBorderCoordinates();
            other.recalculateBorderCoordinates();

            if (me.getAttachedComponents().contains(other)) {
                /* Ya estan conectados */
                return DockingMode.NONE;
            }

            int dockDistN = me.northY - other.southY;
            int dockDistS = other.northY - me.southY;
            int dockDistW = me.westX - other.eastX;
            int dockDistE = other.westX - me.eastX;

            if (dockDistN > 0 && magneticDistance > dockDistN && checkOverlappingEastWest(me, other)) {
                return DockingMode.NORTH;
            } else if (dockDistS > 0 && magneticDistance > dockDistS && checkOverlappingEastWest(me, other)) {
                return DockingMode.SOUTH;
            } else if (dockDistW > 0 && magneticDistance > dockDistW && checkOverlappingNorthSouth(me, other)) {
                return DockingMode.WEST;
            } else if (dockDistE > 0 && magneticDistance > dockDistE && checkOverlappingNorthSouth(me, other)) {
                return DockingMode.EAST;
            }
            return DockingMode.NONE;
        }

        /**
         * Checks whether components overlap in north/south direction.
         */
        protected boolean checkOverlappingEastWest(DockingApplier me, DockingApplier other) {
            return checkOverlappingEastWest_aux(me, other) || checkOverlappingEastWest_aux(other, me);
        }

        /**
         * Checks whether components overlap in east/west direction.
         */
        protected boolean checkOverlappingEastWest_aux(DockingApplier me, DockingApplier other) {
            return me.westX >= other.westX && me.westX <= other.eastX || me.eastX >= other.westX
                    && me.eastX <= other.eastX;
        }

        /**
         * Checks whether components overlap in north/south direction.
         */
        protected boolean checkOverlappingNorthSouth(DockingApplier me, DockingApplier other) {
            return checkOverlappingNorthSouth_aux(me, other) || checkOverlappingNorthSouth_aux(other, me);
        }

        /**
         * Checks whether components overlap in north/south direction.
         */
        protected boolean checkOverlappingNorthSouth_aux(DockingApplier me, DockingApplier other) {
            return me.northY >= other.northY && me.northY <= other.southY || me.southY >= other.northY
                    && me.southY <= other.southY;
        }

        public Point calculateDockedLocation(DockingApplier other, DockingMode mode) {
            return calculateDockedLocation(this, other, mode);
        }

        public Point calculateDockedLocation(DockingApplier me, DockingApplier other, DockingMode mode) {
            final Point meLoc = me.getComponent().getLocation();
            final Point otherLoc = other.getComponent().getLocation();
            final Dimension otherDim = other.getComponent().getSize();
            final Dimension meDim = me.getComponent().getSize();

            /* Posiciones relativas a other */
            switch (mode) {
            case NORTH:
                return new Point(meLoc.x, otherLoc.y + otherDim.height);
            case SOUTH:
                return new Point(meLoc.x, otherLoc.y - meDim.height);
            case WEST:
                return new Point(otherLoc.x + otherDim.width, meLoc.y);
            case EAST:
                return new Point(otherLoc.x - meDim.width, meLoc.y);
            default:
                return new Point(meLoc.x - otherLoc.x, meLoc.y);
            }
        }

        /**
         * Retrasa la accion a ejecutar en onComponentFinishedMoving hasta que
         * pasan 10ms sin que se mueva el componente afectado.
         */
        Timer componentFinishedMovingDetector = new Timer(300, new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                onComponentFinishedMoving();
            }
        });

        /**
         * Resetea el componentFinishedMovingDetector, se debe llamar cada vez
         * que se mueve o cambia el tamaño de la ventana.
         */
        protected void startComponentFinishedMovingDetector() {
            if (componentFinishedMovingDetector.isRunning()) {
                componentFinishedMovingDetector.restart();
            } else {
                componentFinishedMovingDetector.start();
            }
        }

        /* Mientras es menor, más probable es ser lider */
        int magneticLevel = 1;

        /* Indica si el componente esta en proceso de hacer dock */
        boolean isDocking = false;

        /* Para desconectarlos en resize */
        Set<DockingApplier> attachedComponents = new HashSet<DockingApplier>();
        /* Indica la posición del componente */
        private Point lastLocation;

        public boolean isDocked() {
            return getCluster().getSize() > 1;
        }

        /**
         * @return the component
         */
        protected Component getComponent() {
            return component;
        }

        public void componentResized(ComponentEvent e) {
            startComponentFinishedMovingDetector();
            this.recalculateBorderCoordinates();
            this.unDock();
        }

        public void componentMoved(ComponentEvent e) {

            this.recalculateBorderCoordinates();

            /*
             * Si el movimiento es consecuencia de hacer dock lo ignoro y marco
             * como que el docking se completó
             */
            if (this.isDocking()) {
                this.setDocking(false);
                return;
            }

            startComponentFinishedMovingDetector();

            if (this != focusedApplier) {
                return;
            }

            if (getCluster().getSize() == 1) {
                return;
            }

            if (!this.isClusterLeader()) {
                this.updateLastLocation();
                this.unDock();
                return;
            }

            positionAttachedComponents();

        }

        public void onComponentFinishedMoving() {
            this.recalculateBorderCoordinates();
            for (DockingApplier otherDockingApplier : getMonitoredComponents().values()) {
                if (otherDockingApplier == this) {
                    continue;
                }
                DockingMode dockMode = calculateWhereToDock(this, otherDockingApplier);
                if (!DockingMode.NONE.equals(dockMode)) {
                    System.out.println("shouldAttach");
                    this.dock(otherDockingApplier, dockMode);                   
                    this.updateLastLocation();
                } else {
                    System.out.println("shouldNotAttach");
                }
            }
        }

        public void setLocation(int x, int y) {
            this.setLocation(new Point(x, y));
        }

        public void setLocation(Point location) {
            this.getComponent().removeComponentListener(this);
            this.getComponent().setLocation(location);
            this.setLastLocation(location);
            this.getComponent().addComponentListener(this);
        }

        private void setLastLocation(Point location) {
            this.lastLocation = location;
        }

        public Point getLocation() {
            return this.getComponent().getLocation();
        }

        /**
         * @return the lastLocation
         */
        public Point getLastLocation() {
            return lastLocation;
        }

        protected void dock(DockingApplier otherDockingApplier, DockingMode dockMode) {
            this.setDocking(true);
            Point dockInfo = this.calculateDockedLocation(otherDockingApplier, dockMode);
            this.setLocation(dockInfo.x, dockInfo.y);
            this.bindAppliers(otherDockingApplier);
            /* Uno los clusters */
            otherDockingApplier.getCluster().mergeCluster(this.getCluster());
        }

        public void bindAppliers(DockingApplier otherDockingApplier) {
            this.getAttachedComponents().add(otherDockingApplier);
            otherDockingApplier.getAttachedComponents().add(this);
        }

        public void unDock() {
            if (this.getCluster().getSize() == 1) {
                return;
            }
            /*
             * Primero lo quito de sus vecinos, luego del cluster, el orden es
             * importante para el calculo de clusters en caso de división.
             */
            Set<DockingApplier> attachedComponentsCopy = new HashSet<DockingManager.DockingApplier>(
                    this.getAttachedComponents());
            for (DockingApplier applier : attachedComponentsCopy) {
                this.unbind(applier);
            }

            this.getCluster().remove(this);
            this.setCluster(new DockingApplierCluster(this));
        }

        public void unbind(DockingApplier dockingApplier) {
            this.getAttachedComponents().remove(dockingApplier);
            dockingApplier.getAttachedComponents().remove(this);
        }

        private DockingMode calculateWhereToDock(DockingApplier component, DockingApplier otherDockingApplier) {
            return this.calculateWhereToDock(otherDockingApplier, magneticDistance);
        }

        public void componentShown(ComponentEvent e) {
            getMonitoredComponents().get(component).recalculateBorderCoordinates();
            // positionAttachedComponents(e);
        }

        public void componentHidden(ComponentEvent e) {
            getMonitoredComponents().get(component).recalculateBorderCoordinates();
            // positionAttachedComponents(e);
        }

        private void positionAttachedComponents() {

            /* El lider del cluster debe arrastrar a los otros componentes */
            Point currentLocation = getComponent().getLocation();
            int xDiff = currentLocation.x - getLastLocation().x;
            int yDiff = currentLocation.y - getLastLocation().y;

            if (xDiff == 0 && yDiff == 0) {
                return;
            }

            this.updateLastLocation();

            for (DockingApplier otherApplier : getCluster().getAppliers()) {
                if (otherApplier == this) {
                    continue;
                }
                Point otherComponentLocation = otherApplier.getComponent().getLocation();
                otherApplier.getComponent().removeComponentListener(otherApplier);
                otherApplier.setDocking(true);
                otherApplier.getComponent().setLocation(otherComponentLocation.x + xDiff,
                        otherComponentLocation.y + yDiff);
                otherApplier.getComponent().addComponentListener(otherApplier);
            }
        }

        public void updateLastLocation() {
            this.setLastLocation(getComponent().getLocation());
        }

        @Override
        public void focusGained(FocusEvent e) {
            DockingManager.setFocusedApplier(this);
        }

        @Override
        public void focusLost(FocusEvent e) {
            // TODO Auto-generated method stub

        }
    }

    public DockingManager() {

    }

    public static void setFocusedApplier(DockingApplier applier) {
        DockingManager.focusedApplier = applier;
    }

    public static void main(String[] args) {
        try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (Exception e) {
        }
        JFrame frame1 = new JFrame("Frame 1");
        JDialog dialog2 = new JDialog((JFrame) null, "Dialog 2");
        frame1.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame1.setSize(200, 50);
        dialog2.setSize(200, 50);
        frame1.setVisible(true);
        dialog2.setVisible(true);

        JDialog dialog1 = new JDialog((JFrame) null, "Dialog 1");
        dialog1.setSize(200, 50);
        dialog1.setVisible(true);

        DockingManager manager = new DockingManager();

        manager.registerComponent(frame1, 1);
        manager.registerComponent(dialog2, 2);
        manager.registerComponent(dialog1, 2);

    }

    /**
     * @return the monitoredComponents
     */
    protected static Map<Component, DockingApplier> getMonitoredComponents() {
        return monitoredComponents;
    }
} 
```

# .htaccess - mod rewrite 排除除 php 之外的所有内容

> ID：14091903
> 
> 赞同：0
> 
> 时间：2012-12-30T15:23:19.307
> 
> 标签：.htaccess, mod-rewrite

是否可以以仅重写以下 url 而其余部分不重写的方式编辑 htacces？

```
http://www.example.com/index.php?x=foobar
 to
http://www.example.com/foobar/ 
```

我希望没有 x=... 作为变量的页面正常运行

我得到了以下内容，但这不起作用

```
Options +FollowSymLinks
RewriteEngine on

RewriteRule (.*)/ index.php?x=$1
RewriteCond $1 !\.(js|ico|gif|jpg|png|css|html|swf|mp3|wav|txt)$ 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T16:47:35.510

首先，`RewriteCond`必须放在`RewriteRule`它所属的之前。

但我认为你需要另一种方法来处理你的情况，如下所示：

```
RewriteRule (.*)\.php - [PT,L]
RewriteRule ^(.*)/$ index.php?x=$1 
```

*   第一条规则通过 (PT) 每个 PHP 页面，因此第二条规则仅适用于所有非 PHP 请求。
*   第二条规则仅适用于“简单路径”，无论该路径中是否包含点（例如`hello.gif/`，也将匹配）。

如果这对您不起作用，那么您可以考虑以下几点来开始进一步的研究：

*   模式`([^\.]*)`匹配所有没有点的东西
*   如果文件或目录存在，请参阅[RewriteCond 以跳过规则](https://stackoverflow.com/questions/10030731/rewritecond-to-skip-rule-if-file-or-directory-exists)`RewriteCond`，其中`RewriteRule`仅在请求不指向现有文件或目录时使用以下内容

希望这可以帮助。

# python - 再次，python中的正则表达式匹配

> ID：14091906
> 
> 赞同：-1
> 
> 时间：2012-12-30T15:23:44.970
> 
> 标签：python, regex

对不起，一般标题。我正在寻找一个 python`re`表达式来匹配以下正则表达式：

`stringOfAlphaNumeric1 ( stringOfAnyCharacter1 , stringOfAnyCharacter2 , stringOfAnyCharacter3 )`

此表达式可以重复多次，以空格分隔。例如：

`stringOfAlphaNumeric1 ( stringOfAnyCharacter1 , stringOfAnyCharacter2 , stringOfAnyCharacter3 ) stringOfAlphaNumeric2 ( stringOfAnyCharacter4 , stringOfAnyCharacter5 , stringOfAnyCharacter6 )`

我怎样才能得到以下对：

```
stringOfAlphaNumeric1 -> stringOfAnyCharacter1
stringOfAlphaNumeric1 -> stringOfAnyCharacter2
stringOfAlphaNumeric1 -> stringOfAnyCharacter3
stringOfAlphaNumeric2 -> stringOfAnyCharacter4
stringOfAlphaNumeric2 -> stringOfAnyCharacter5
stringOfAlphaNumeric2 -> stringOfAnyCharacter6 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T15:35:43.957

```
import re

#if its fixed:  [  Key ( Value1 , Value2 , Value3 )  ]
regex = re.compile(r'([A-Za-z0-9]+) \( (.+?) , (.+?) , (.+?) \)')
s = "stringOfAlphaNumeric1 ( stringOfAnyCharacter1 , stringOfAnyCharacter2 , stringOfAnyCharacter3 ) stringOfAlphaNumeric2 ( stringOfAnyCharacter4 , stringOfAnyCharacter5 , stringOfAnyCharacter6 )"

d = dict((i[0], i[1:]) for i in regex.findall(s)) 
```

d 是：

```
{'stringOfAlphaNumeric2': ('stringOfAnyCharacter4', 'stringOfAnyCharacter5', 'stringOfAnyCharacter6'), 
'stringOfAlphaNumeric1': ('stringOfAnyCharacter1', 'stringOfAnyCharacter2', 'stringOfAnyCharacter3')} 
```

得到对：

```
[(k, i) for k, v in d.items() for i in v] 
```

产量：

```
[('stringOfAlphaNumeric2', 'stringOfAnyCharacter4'), 
('stringOfAlphaNumeric2', 'stringOfAnyCharacter5'), 
('stringOfAlphaNumeric2', 'stringOfAnyCharacter6'), 
('stringOfAlphaNumeric1', 'stringOfAnyCharacter1'), 
('stringOfAlphaNumeric1', 'stringOfAnyCharacter2'), 
('stringOfAlphaNumeric1', 'stringOfAnyCharacter3')] 
```

# r - 在 R 中调用 OpenBUGS 不起作用

> ID：14091910
> 
> 赞同：3
> 
> 时间：2012-12-29T08:22:27.080
> 
> 标签：r, winbugs

我一直在尝试运行 R 代码来使用 OpenBugs。直到昨天它运行良好，我不知道我做了什么，它开始显示一些错误。然后我决定看看一些简单的例子是否有效。所以我尝试了[`R2WinBUGS`vignettes](http://cran.r-project.org/web/packages/R2WinBUGS/vignettes/R2WinBUGS.pdf)中的学校示例。

文件schools.txt中的模型是

```
sink("schools.txt")
cat("
      model {
      for (j in 1:J)
      {
        y[j] ~ dnorm (theta[j], tau.y[j])
        theta[j] ~ dnorm (mu.theta, tau.theta)
        tau.y[j] <- pow(sigma.y[j], -2)
      }
      mu.theta ~ dnorm (0.0, 1.0E-6)
      tau.theta <- pow(sigma.theta, -2)
      sigma.theta ~ dunif (0, 1000)
    }",fill=TRUE)
sink() 
```

运行程序其余部分的代码如下：

```
 data(schools)
 J <- nrow(schools)
 y <- schools$estimate
 sigma.y <- schools$sd
 data <- list ("J", "y", "sigma.y")

inits <- function()
{ 
  list(theta = rnorm(J, 0, 100), mu.theta = rnorm(1, 0, 100),sigma.theta = runif(1, 0, 100))
}

schools.sim <- bugs(data, inits, model.file = "schools.txt",parameters = c("theta", "mu.theta", "sigma.theta"),n.chains = 3, n.iter = 1000) 
```

**不幸的是，我遇到了和以前一样的错误。**

```
 > schools.sim <- bugs(data, inits, model.file = "schools.txt",parameters = c("theta", "mu.theta", "sigma.theta"),n.chains = 3, n.iter = 1000)
    Error in sd(as.vector(ai)) : unused argument(s) (as.vector(ai)) 
```

我也尝试过指定`program=c('OpenBugs')` **但是鉴于 OpenBugs 在路径中，这给了我另一个奇怪的错误**

```
 Error in bugs(data, inits, model.file = "schools.txt", parameters = c("theta",  : 
  unused argument(s) (program = c("OpenBugs")) 
```

**编辑**

```
> sessionInfo()
R version 2.15.2 (2012-10-26)
Platform: i386-w64-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252   
[3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C                          
[5] LC_TIME=English_United States.1252    

attached base packages:
[1] parallel  stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] abind_1.4-0        rjags_3-9          R2WinBUGS_2.1-18   BRugs_0.8-0        R2OpenBUGS_3.2-2.1
[6] LearnBayes_2.12    coda_0.16-1        lattice_0.20-10   

loaded via a namespace (and not attached):
[1] boot_1.3-7    grid_2.15.2   plyr_1.8      stringr_0.6.2 tools_2.15.2 
```

`traceback()`给...

```
> traceback()
No traceback available 
```

**编辑-2**

```
 > getAnywhere("sd")
2 differing objects matching ‘sd’ were found
in the following places
  .GlobalEnv
  package:stats
  namespace:stats
Use [] to view one of them` 
```

我应该如何删除`sd`我定义的那个坐在里面`.GlobalEnv`？

**EDIT-3**

**问题解决了。`sd`我从工作区中删除了对象，一切正常。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:53:39.003

我认为你以某种方式得到了一个奇怪的`sd`定义版本。结果是`getAnywhere("sd")$where`什么？应该是`"package:stats" "namespace:stats"`。如果你这样做了，`attach(schools)`我可以看到这会`sd`在你的工作区中创建另一个名为的对象，但这不会引起问题，因为它不是一个函数。

解决方案：`rm(sd)`或`rm("sd")`（后者可能更好）

# java - 对链表进行排序

> ID：14091915
> 
> 赞同：1
> 
> 时间：2012-12-30T15:24:37.540
> 
> 标签：java, sorting, linked-list

假设我将以下数据集存储在链表中（不包括标题）：

```
ID | Name
1 | John
2 | Albert
3 | Simon 
```

现在，我想按照字母顺序对节点进行排序。

我想知道如何在**不使用数组（以及类似的东西，如列表、向量、数组列表等）和不使用库排序方法（例如 Collections.sort）的情况下**提出自己的排序方法。

换句话说，我想知道排序的概念以及应该如何系统地安排节点。它不一定要高效——它只需要工作。

我将在 Java 中尝试这一点，但我也会欣赏伪代码或提示/提示/其他资源。

谢谢你。

* * *

附录：

链表.java

```
class LinkedList
{

    private Node head;  // first node in the linked list
    private int count;

    public int getCount()
    {
        return count;
    }

    public Node getHead()
    {
        return head;
    }

    public LinkedList()
    {
        head = null;    // creates an empty linked list
        count = 0;
    }

    public void deleteFromFront()
    {
        if (count > 0)
        {
            Node temp = head;
            head = temp.getLink();
            temp = null;
            count--;
        }
    }

    public void AddToFront(Object cd)
    {
        Node newNode = new Node(cd);
        newNode.setLink(head);
        head = newNode;
        count++;
    }

    public void RemoveAtPosition(int n)
    {
        int counter=1;
        Node previous=null;
        if(n==1)
            deleteFromFront();
        else if(n<=getCount())
            for(Node j=head;j!=null;j=j.getLink())
            {
                if(counter==n&&previous!=null)
                {
                    previous.setLink(j.getLink());
                    j.setLink(null);
                }
                previous=j;
                counter++;
            }
        else
            System.out.println("Unable to remove object at position "+n);
    }

    public void AddAtPosition(int n, Object cd)
    {
        int counter=1;
        Node newNode=new Node(cd);
        Node previous=null;
        for(Node j=head;j!=null;j=j.getLink())
        {
            if(counter==n&&previous!=null)
            {
                newNode.setLink(j.getLink());
                j.setLink(newNode);
            }
            previous=j;
            counter++;
        }
    }

    public void Swap(int n1, int n2)
    {
        // how do I swap nodes?
    }

    public void Sort()
    {
       // how do I sort nodes?
    }
} 
```

节点.java

```
public class Node {

    private Object data;
    private Node link;

    public Object getData() {
        return data;
    }

    public void setData(Object data) {
        this.data = data;
    }

    public Node getLink() {
        return link;
    }

    public void setLink(Node link) {
        this.link = link;
    }

    public Node(Object data) {
        this.data = data;
        this.link = null;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T15:31:59.050

如果你想自己做，插入排序在链表上真的很容易。创建一个新的空链表，然后将旧链表中的所有元素插入其中。维基百科有一个 C 代码 [示例](http://en.wikipedia.org/wiki/Insertion_sort#List_insertion_sort_code_in_C)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T15:28:25.660

如果您想知道 JDK 是如何做到的……我将列表复制到一个数组中，对其进行排序并将其复制回来。

您可以对链表使用冒泡排序，但它会更慢，所以没有意义，除非您喜欢痛苦。;)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T15:42:00.053

我知道您说您不想使用 Collections.sort，但只是为了确保：您确实意识到 Collections.sort 允许您自己实现排序顺序，对吗？如果没有，[http://www.digizol.com/2008/07/java-sorting-comparator-vs-comparable.html](http://www.digizol.com/2008/07/java-sorting-comparator-vs-comparable.html)（以及许多其他资源）将提供有关信息。

否则，您可以实现很多排序算法。更容易理解的一种是冒泡排序。[http://en.wikipedia.org/wiki/Bubble_sort](http://en.wikipedia.org/wiki/Bubble_sort)包含一个很好的解释，包括不同排序步骤的很好的可视化。

但是冒泡排序（根本不是）一种有效的排序方式。还有许多其他的排序算法（合并排序、插入排序、快速排序……请参阅维基百科关于“排序算法”的文章以获得概述），它们各有优缺点。这取决于您要排序的数据，哪种算法最适合。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T15:30:04.567

您可以将列表复制到数组中并对其进行排序。否则，可以使用各种排序算法，即归并排序、冒泡排序等。

您可以在合并排序实现中看到[这一点。](http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-30T15:36:29.247

虽然不完全相同，但请查看外部排序（数据未加载到内存中；例如，您想要对大于 RAM 的文件进行排序）。它们通常通过在文件之间移动数据来工作，其方式类似于在链表之间移动节点的方式。

# sql - PostgreSQL，关于 FORCE NOT NULL

> ID：14091921
> 
> 赞同：1
> 
> 时间：2012-12-30T15:25:57.830
> 
> 标签：sql, database, postgresql, csv

我`FORCE NOT NULL`在 PostgreSQL 中使用时遇到问题。

我有一个包含 10 列的表，我需要从 CSV 文件中加载数据。

我正在使用以下查询，效果很好：

```
COPY "myschema"."mytable" 
FROM '/var/www/myapp/myfile.csv' 
DELIMITERS '|' 
CSV 
FORCE NOT NULL 
attr1, attr2, attr3, attr4, attr5, attr6, attr7, attr8, attr9, attr10; 
```

我需要知道如何在不明确将所有列作为参数的情况下执行此操作，`FORCE NOT NULL`因为我有更多包含数百个列的表需要此操作。

我试过了`FORCE NOT NULL *`，`FORCE NOT NULL *`但查询返回错误。我在 Internet 上找不到解决此问题的方法。

提前感谢您为我提供的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T15:42:49.517

`FORCE NOT NULL *`不是有效的 postgresql。对此的补丁几乎通过但被拒绝。阅读此[邮件列表](http://postgresql.1045698.n5.nabble.com/COPY-WITH-CSV-FORCE-QUOTE-td2012428.html)以进行讨论。

# python - 有没有办法在 PyCharm 的 Sphinx“运行配置”中指定相对路径？

> ID：14091925
> 
> 赞同：2
> 
> 时间：2012-12-30T15:26:10.043
> 
> 标签：python, documentation-generation, pycharm

我正在为使用 PyCharm 管理的多个项目设置文档任务，但遇到了障碍。似乎无法在任务的“配置”对话框中指定*相对*路径。例如，我不能这样做：

![在此处输入图像描述](../Images/ea904296b44c243fda1cfd7925ab8b35.png)

这可能是正确的吗？如果是这样，这意味着我需要为每个项目创建不同的“运行配置”，即使它们都做完全相同的事情。有没有办法解决这个问题——将文档文件放在我项目的一些默认子目录中，或者设置一些其他变量选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:53:46.467

由于运行配置特定于项目，因此在 UI 中指定相对路径没有任何好处。在内部，项目根目录下的所有路径都存储为相对路径，即使它们在 UI 中显示为绝对路径。

# .htaccess - .htaccess 防止更改重写 url

> ID：14091926
> 
> 赞同：0
> 
> 时间：2012-12-30T15:26:10.070
> 
> 标签：.htaccess, mod-rewrite

我有以下 .htaccess 重写规则：

```
 RewriteCond %{REQUEST_FILENAME} !-f
      RewriteCond %{REQUEST_FILENAME} !-d
      RewriteCond %{REQUEST_URI}  (/m)?/([^/]+)\.(jpg|jpeg|gif|png)$
      RewriteRule .* http://domain.com/user/upload%1/%2.%3 
```

因此，现在将转换（如重定向）从 链接`http://domain.com/12345.png`到`http://domain.com/user/upload/12345.png`.

如果我想阻止这种转变，我需要解决什么问题（我认为应该是一些标志）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T18:53:37.453

`http://domain.com`从规则的目标中删除：

```
RewriteRule .* /user/upload%1/%2.%3 [L] 
```

# php - 实现大圆算法

> ID：14091929
> 
> 赞同：0
> 
> 时间：2012-12-30T15:26:49.167
> 
> 标签：php, algorithm, formula, pow, great-circle

下面是我想翻译成 PHP 的公式（大圆算法）。如果有人能帮助我，我将不胜感激？

输入是不同的坐标集，例如：

```
Place 1 Lat: 59.389057
Place 1 Long: 17.937422

Place 2 Lat: 59.388914
Place 2 Long: 17.920441 
```

想要的输出是地点 1 和地点 2 之间的距离。

```
distance = ((115.1666667 * (lat2-lat1)) ^ 2 + (115.1666667 * (lng2 - lng1) * cos(lat2 / 57.3)) ^ 2) ^ .5 
```

我的尝试：

```
$distance = pow(((115.1666667 * ($lat2 - $lat1)), 2) + (115.1666667 * pow(($lng2 - $lng1) * cos($lat2 / 57.3)), 2)), 0.5) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T16:04:31.653

正如 DCoder 在评论中所写，临时变量使事情更容易阅读：

```
$latD = (691 / 6) * ($lat2 - $lat1);
$lngD = (691 / 6) * ($lng2 - $lng1) * cos($lat2 / 57.3);

$distance = sqrt( $latD * $latD + $lngD * $lngD ); 
```

（[codepad.org 上的演示](http://codepad.org/gKIEp635)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T15:30:09.797

这是更正后的代码：

```
$distance = pow((pow((115.1666667 * ($lat2 - $lat1)), 2) + pow((115.1666667 * ($lng2 - $lng1) * cos($lat2 / 57.3)), 2)), 0.5); 
```

# c# - 我正在尝试为我的迷宫游戏添加倒数计时器

> ID：14091930
> 
> 赞同：-1
> 
> 时间：2012-12-30T15:26:53.767
> 
> 标签：c#

我正在做一个迷宫游戏

我写了这个：

```
 private int counter = 60;
        private void button1_Click(object sender, EventArgs e)
        {
            int counter = 60;
            timer1 = new System.Windows.Forms.Timer();
            timer1.Tick += new EventHandler(timer1_Tick);
            timer1.Interval = 1000; //one second
            timer1.Start();
            label1.Text = counter.ToString();

        }

        private void label1_Click(object sender, EventArgs e)
        {

        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            counter--;
            if (counter == 0)

                timer1.Stop();                
            label1.Text = counter.ToString();

            }
        }
    } 
```

在此之后，我希望 a`Messagebox`在计时器结束时出现`0`。当我单击“确定”按钮时，我希望表单关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T15:30:26.693

```
if (counter.Equals(0))
{
 if (MessageBox.Show("Time Ran out!") == DialogResult.OK)
 {
  this.Close();
  }
} 
```

如果它只有一个 OK，你实际上甚至不需要 Dialog Result。到底哪个部分有困难？你的代码几乎是complete。

# php - 如何告诉 PHP 在到达行尾时停止而不返回错误？

> ID：14091936
> 
> 赞同：1
> 
> 时间：2012-12-30T15:27:41.170
> 
> 标签：php, while-loop, text-files

我正在尝试读取文本文件的内容，但不知道如何告诉 PHP 在到达末尾时中断。

当前代码是：

```
<?php

$file = "campaign1_20_db.txt";
$content = file_get_contents($file);
$string = explode("\n",$content);

$index = 0;

while ($index <= 100):

$index = $index + 1;
endwhile;

?> 
```

如何将 100 替换为取决于 PHP 到达文本文件末尾的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T15:29:46.790

由于您使用的是explode，因此您将拥有一系列行。但是，您可以简单地拥有：

```
$strings = file($file); 
```

在没有显式爆炸的情况下为您做同样的事情。然后，您可以简单地对该数组执行 foreach 循环：

```
foreach($strings as $line) {
  ...
} 
```

循环遍历这些行中的每一行。但是，您似乎只是想计算有多少行，所以 foreach 甚至没有必要：

```
$total_lines = count($strings); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T15:37:23.950

（我希望你有比逐行计算更复杂的东西，否则忽略这个答案）

您可以使用更轻（就消耗的内存而言）算法来遍历文件的行：

```
$f = fopen('campaign1_20_db.txt');
while ($line = fgets($f)) {
    // your code
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T16:14:27.227

如果要查看是否已到达文件末尾，则必须使用 fopen、fread 和 feof 的老方法。代码将类似于

```
 <?php
$file = fopen("file.txt");
while(!feof($file))  {
$content .= fread( $file, 1024 );
} 
```

**铁氧体**

您正在查看的功能称为文件结束。这基本上告诉您是否已到达文件末尾。

**弗里德**

在 fread 命令中，您传递了文件处理程序（由 fopen 返回）和必须读取的字节数。最大值取决于您的 PHP 设置。

# java - Android LRU 缓存未显示正确的位图？

> ID：14091939
> 
> 赞同：0
> 
> 时间：2012-12-30T15:28:03.877
> 
> 标签：java, android, asynchronous, android-listview, android-lru-cache

我正在制作一个 android 应用程序，其中有带有缩略图的新闻文章。这些缩略图从网络加载并存储在 LruCache 中，其中 URL 作为键，位图作为值。

```
private LruCache<String, Bitmap> tCache; 
```

在适配器的 getView() 方法中，我调用 getThumbnail() 检查缓存（必要时从网络加载）然后显示缩略图。

```
public void populateList(){
    ...
    new Thread(new Runnable() {
        @Override
        public void run() {
            getThumbnail(story, thumbnail);
        }
    }).start();
} 
```

和

```
private Bitmap getThumbnail(Story story, ImageView imageView) {
    String url = story.getThumbnail();

    Bitmap bitmap;
    synchronized (tCache) {
        bitmap = tCache.get(url);

        if (bitmap == null) {

            bitmap = new ImageLoadingUtils(this, imageView).execute(url,
                    Boolean.TRUE).get();
            tCache.put(url, bitmap);

        }
    }
    return bitmap;

} 
```

ImageLoadingUtils 从网络加载，完成后将生成的位图放入 ImageView。

```
@Override
protected void onPostExecute(Bitmap result) {
    if (imageView != null) {
        imageView.setImageBitmap(result);
        adapter.notifyDataSetChanged();
    }
} 
```

问题是当我向下滚动时缩略图会在同一个 ListView 中重复。

```
________
|图像1|
|图像2|
|图像3| 屏幕
|图像4|
--------
|图像1|
|图像2| 屏幕外
________
```

当我向下滚动然后向上滚动时，这些文章不再具有正确的缩略图。它非常混乱。

任何人都可以发现问题吗？十分感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T15:49:47.873

问题是因为视图在列表视图中被重用。这是一个关于如何在列表视图中异步缓存和加载缩略图的好例子。

[延迟加载 ListView Android](https://stackoverflow.com/a/3068012/1119314)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-22T18:11:56.757

如果您的适配器的 getView 方法包含如下行：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {     
   if(convertView == null){
       LayoutInflater inflater = (LayoutInflater) context.getSystemService(...);
       convertView = inflater.inflate(...);
   }
} 
```

删除这个“if”条件，只保留内部代码，例如：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {    
    LayoutInflater inflater = (LayoutInflater) context.getSystemService(...);
    convertView = inflater.inflate(...);
} 
```

# javascript - 在 iframe 中模拟鼠标光标

> ID：14091941
> 
> 赞同：4
> 
> 时间：2012-12-30T15:28:16.287
> 
> 标签：javascript, jquery, iframe

我想（在 iframe 上）显示我可以控制的位置的虚拟光标（带有光标的图像）。

当光标位于 iframe 上的某个位置时，如何模拟悬停和单击事件？

所以它可能类似于`$('iframe').triggerClick(x,y)`or `$('iframe').triggerHover(x,y)`。

小提琴所以你可以试试你的答案：http: [//jsfiddle.net/PVJzb/1/](http://jsfiddle.net/PVJzb/1/)

如果它只在谷歌浏览器中运行就足够了，不需要跨浏览器的解决方案。

请注意，iframe 位于同一个域中，因此我可以访问其内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:34:53.003

这在 JavaScript 中很难做到，即使你完美地编写了代码，在某些情况下和/或浏览器中也可能会失败。您必须记住，JavaScript 不能真正直接触发本机事件，尽管存在一些特定于浏览器的例外情况，请参阅[此问题](https://stackoverflow.com/questions/3278300/javascript-how-to-trigger-native-click-action-replay-event-later)以获取有关该主题的更多信息。

* * *

**更新：** 我建议如果这类似于“如何使用教程”，您可以对其进行屏幕录制，然后在网站上播放视频。如果你真的必须这样做，可能会更容易按照时间顺序从帧中移动光标，并让 jQuery 执行所有必要的事件，避免在 x,y 坐标处检测元素。

* * *

话虽这么说，这就是我解决这个问题的方法：

您可以做的是使用 JavaScript + jQuery 模拟大多数事件。例如，如果你想模拟所有元素的点击事件，你应该首先创建一个点击事件处理程序：

```
// Simulate their standard behavior
// if they already had a click event handler make sure it stops propagation
// or returns false, preventDefault won't stop the browser from following 
// their href now.
// Change the #iframe accordingly
$("#iframe").contents().find("a").bind('click', function(){
      window.location.href = $(this).attr('href');
}); 
```

现在为了确保新绑定的点击事件被触发，我们必须手动触发它。根据你的问题，你知道虚拟鼠标的坐标，所以我假设它们在变量**x**和**y**中。

为了获得虚拟鼠标下方的元素，您可以使用 JavaScript 函数**elementFromPoint()**，但作为大多数真正有用的 JavaScript 函数，它在所有浏览器中的工作方式不同。

[我还没有对此进行测试，但是在http://www.zehnet.de/2010/11/19/document-elementfrompoint-a-jquery-solution/](http://www.zehnet.de/2010/11/19/document-elementfrompoint-a-jquery-solution/)上有一个改进版本的功能，假设它可以作为它应该让我们继续前进。

在 iframe 而不是在当前文档中调用 elementFromPoint 非常重要，否则它将返回 iframe 元素（更多信息[here](https://stackoverflow.com/questions/8811264/document-elementfrompointx-y-to-get-element-inside-iframe)）

```
// x,y should be the coordinates where the virtual mouse is
var elementUnder = $("#iframe").contents().get(0).elementFromPoint(x,y);
if($(elementUnder) !== null){
    // Now you must decide what to do, probably depending on the element type
    // and finally, if it is an anchor, trigger the click event
    if($(elementUnder).is("a")) $(elementUnder).trigger('click');
} 
```

可能有更简单或更优雅的解决方案，尽管我真的想不出。由于 iframe 内的页面位于同一个域中，我想您已经知道它所有可能的内容，这使得这变得更加容易，因为您可以为所有必要的事件准备代码。

对于鼠标悬停事件，您也可以这样做，但请记住，您还必须触发鼠标移出事件。

我已将上面的代码添加到您的 jsFiddle 中，以便您可以看到它在锚标记上工作：http: [//jsfiddle.net/XySmQ/4/](http://jsfiddle.net/XySmQ/4/)

您必须记住，有许多事件是 JavaScript 或 jQuery**无法**重新创建的，例如[dropdown drop down](https://stackoverflow.com/questions/3244583/trigger-select-box-to-drop-down-on-clicking-another-element)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T17:36:20.323

编辑：由于 jsfiddle 包装 iframe 的方式，我无法在 jsfiddle 中测试代码，但我在本地设置了一个快速测试，下面的代码工作正常。

* * *

恐怕您无法从javascript触发css悬停。如果您可以修改css，以便您可以触发的类（即 `element.hover`而不是`element:hover`）触发悬停效果。

所以我建议你尝试的是：

```
var iframeDoc = $('iframe').contents().get(0);
var lastHovered = [false];

$(iframeDoc).mousemove(function(e) {
    var elementHovered = iframeDoc.elementFromPoint(e.clientX, e.clientY);
    elementHovered = $(elementHovered);
    // remove previous added hover and add a new hover class
    if (lastHovered[0] != elementHovered[0]) {
        if (lastHovered[0]) lastHovered.removeClass('hover');
        lastHovered = elementHovered;
        elementHovered.addClass('hover');
    }
}).click(function(e) { 
    var elementClicked = iframeDoc.elementFromPoint(e.clientX, e.clientY);        
    alert("clicked element "+elementHovered); });
}); 
```

# java - javassist 异常

> ID：14091942
> 
> 赞同：1
> 
> 时间：2012-12-30T15:28:22.907
> 
> 标签：java, javassist, dynamic-proxy

```
public class PracticeJavassist2 {
    @Test
    public void test2() throws InstantiationException, IllegalAccessException{
        ProxyFactory factory = new ProxyFactory();
        factory.setSuperclass(JavassistClass.class);
//      factory.setFilter(new MethodFilter() {
//          public boolean isHandled(Method arg0) {
//            if(arg0.getName().equals("getName")){
//                  return true;
//        }
//        return false;
//          }
//      });

        Class<?> c = factory.createClass();
        JavassistClass jc = (JavassistClass)c.newInstance();
        ((Proxy)jc).setHandler(new MethodHandler() {
        public Object invoke(Object arg0, Method arg1, Method arg2, Object[] arg3)throws Throwable {
            JavassistClass o = (JavassistClass)arg0;
          o.setName("vincen");
          System.out.println(o.getClass().getName());
          return arg2.invoke(arg0, arg3);
        }
  });
    System.out.println(jc.getName());

    }

}

class JavassistClass{
    private String name = "default";
    public JavassistClass(){
        name = "me";
    }
      public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
} 
```

如果我打开注释块，上面的代码运行良好。但是如果像上面那样运行，它会抛出异常，即`java.lang.StackOverflowError`. 不知道为什么，谁能给我解释一下？多谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T19:12:41.473

该调用`o.setName("vincen");`导致递归，换句话说，该`setName()`方法正在由其处理程序调用。只需删除该行。

# php - 这个unix命令的php等价物是什么

> ID：14091944
> 
> 赞同：-2
> 
> 时间：2012-12-30T15:28:36.473
> 
> 标签：php, bash, unix

我需要像这样获取两个 csv 文件的区别

```
comm -13 <(sort file1.csv) <(sort file2.csv) > file3.csv 
```

这很好用，但是如何从 PHP 实现相同的过程，一些提示可以为我指明正确的方向。（已编辑）

```
ABC, 12, 1
DEF, 10, 1
GHI, 0, 0

ABC, 8, 1
DEF, 10, 1
GHI, 2, 0 
```

最终的 CSV 应该是这样的：

```
ABC, 8, 1
GHI, 2, 0 
```

没有 exec() 可以使用，那么您将如何使用 PHP 以有效的方式处理这个问题？

我在下面尝试了 Marc 的解决方案：

```
<?php
    $file1 = file('file1.csv');
    $file2 = file('file2.csv');

    sort($file1);
    sort($file2);

    var_dump($file1);
    var_dump($file2);

    $diff =  array_diff($file2, $file1);

    var_dump($diff);

?> 
```

返回这个

```
ABC, 8, 1
DEF, 10, 1
GHI, 2, 0 
```

当我手动对它们进行预排序时，它工作正常。然而，当我在应用排序后转储数组时，它们似乎已排序？

问题似乎是最后一行后面没有换行符。

```
$file1 = file('file1.csv',FILE_IGNORE_NEW_LINES);
$file2 = file('file2.csv',FILE_IGNORE_NEW_LINES); 
```

**FILE_IGNORE_NEW_LINES**似乎可以修复它。

因此，如果您添加 FILE_IGNORE_NEW_LINES，Marc 的解决方案将非常有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T15:32:24.603

```
$file1 = file('file1.csv');
$file2 = file('file2.csv');

$sorted1 = sort($file1);
$sorted2 = sort($file2);

/// mangle arrays to remove columns 1,3 here...

$diff = array_diff($mangled1, $mangled2);
file_put_contents('file3.csv', implode($diff)); 
```

# php - 从 Google 新闻 RSS Feed 获取更大的图片

> ID：14091946
> 
> 赞同：4
> 
> 时间：2012-12-30T15:29:45.387
> 
> 标签：php, rss, google-news

有没有一种简单的方法可以从 RSS 格式的谷歌新闻提要中获得更高分辨率的图像？目前我可以访问 80*80 的图像，即缩略图，但我想有一种方法可以通过更改图像 url 来获得更高的分辨率。有没有人设法做到这一点？

我使用 PHP 脚本调用 RSS 提要，然后通过 javascript/jquery 在我的界面上显示新闻项目。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T21:45:32.787

> Is there an easy way to get higher resolutions for images from the google news feed in its RSS format?

RSS is RSS is RSS. It provides one place to stick an image, and the feed in question is using it for the Google News logo.

The images you're asking about aren't even part of the RSS itself, but of the HTML description of each item. Each URL looks something like:

```
//nt0.ggpht.com/news/tbn/PKgVs2QD1QaYnM/6.jpg 
```

Opaque as all hell right there. You'd think that `PKgV...` is a unique identifier for the story, but it's not repeated anywhere else in the item.

I played around with the rest of the filename. Here's what I found so far:

*   1.jpg: 100x100
*   2.jpg: 100x66
*   3.jpg: 60x60
*   4.jpg: 60x40
*   5.jpg: empty 1x1
*   6.jpg: 80x80
*   7.jpg: empty 1x1
*   8.jpg: empty 1x1
*   9.jpg: 70x46
*   10.jpg: 70x70
*   11.jpg: 150x150
*   12.jpg: 80x45
*   13.jpg and all subsequent numbers: 80x53

So, it looks like if you manually search and replace the image URL, changing it from 6 to 11, you'll get a 150x150 image instead of an 80x80\. Usually. I tested with a few other search terms and found small variations on each size depending on each image.

Be warned that this is most likely not to be true forever, and you're basically playing with an unknown, undefined application here. Google may even be upset at you for using the "wrong" images.

# javascript - 从 DOM 上下文调用 casperjs 捕获（评估）

> ID：14091948
> 
> 赞同：1
> 
> 时间：2012-12-30T15:29:54.217
> 
> 标签：javascript, unit-testing, dom, phantomjs, casperjs

当从评估上下文调用函数时，有什么方法可以调用 casperjs 方法，例如捕获？

说明：我希望能够编写可以在“真实”浏览器或 casper 中运行的 js 脚本（qunit）。

样本 ：

```
function screenshot()(
//i'm runing in a "real" browser ? Then only console.log 
//i'm running in casper ? Then call capser.capture() 
```

我尝试了关闭但失败了：

```
var casper = require('casper').create();
casper.start('http://google.fr/');

casper.evaluate(function(o) {
o.capture('/tmp/google.png', {
    top: 100,
    left: 100,
    width: 500,
    height: 400
});
}, {o: this});

casper.run()

TypeError: JSON.stringify cannot serialize cyclic structures.                   
  :/modules/webpage.js:249
  /Users/macbookpro/js:576 in evaluate
  /Users/macbookpro/js/testClosure.js:11 
```

我知道有一种方法可以使用 console.log 作为消息总线，但我正在寻找更好的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T16:53:29.057

在 PhantomJS（因此也包括 CasperJS）中，`evaluate`在被监禁的环境中运行。只有原始对象，您可以通过序列化`JSON.stringify`并被`JSON.parse`接受。

通常的做法是从主脚本运行屏幕截图。您仍然可以从其他地方**触发**捕获，包括在内部`evaluate`，您只需将其传达回主脚本。查看 PhantomJS 包含[`run-qunit.js`](https://github.com/ariya/phantomjs/blob/master/examples/run-qunit.js)的示例，该示例通过监视特定 DOM 元素的存在来检测测试的完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T23:40:23.293

没有办法在`evaluate()`. 这是您的代码，已修复：

```
var casper = require('casper').create();

casper.start('http://google.fr/', function() {
    this.capture('google.png', {
        top: 100,
        left: 100,
        width: 500,
        height: 400
    });
});

casper.run() 
```

# jquery - 玩！框架 1.2.5 | 在 Action 控制器上接收和处理 jquery ajax 请求

> ID：14091955
> 
> 赞同：1
> 
> 时间：2012-12-30T15:30:28.293
> 
> 标签：jquery, playframework-1.x

我需要一些帮助来编写负责接收 POST 请求并处理它的操作的控制器部分。

**客户端：**

```
jQuery(function($) {    
$("#addPost").submit(function(event) {
    alert('addPost');
     event.preventDefault();

     var $form = $( this );      

     var url = $form.attr('action');                

     $.post(url , $("#addPost").serialize(),
        function (data ) {
                alert("success");
        });      

});       

}); 
```

`#addPost`是一个表单，序列化的表单数据如下所示：

```
post.type=new&post.title=yyy&post.body=newpost&post.weight=12 
```

在窗体单击时，我可以看到调用转到控制器上的 post 方法。我尝试接收为 Map ，但它出现为空。

**服务器端**

```
public class Application extends Controller {

     ....   

public static void addPost(Map<String, String> req) {
     //req is null  
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T01:54:56.110

Yoyr addPost 控制器方法需要一个名为 req 的 HTTP (GET/POST) 参数，但您的参数称为 post.type、post.title、post.body 和 post.weight。

# java - 真正的跨平台应用程序/应用程序的 Java 解决方案（框架/库/API）

> ID：14091956
> 
> 赞同：4
> 
> 时间：2012-12-30T15:31:12.307
> 
> 标签：java, android, ios, cross-platform, packager

我不知道，但似乎有几种针对不同平台的 Java 解决方案（Java SE、ME ...），因此您必须为所有设备（iOS、Android、Windows、Linux ...）编写同一应用程序的不同版本.

（甚至可以在运行 Android 和 iOS 的设备上使用 Java ME 吗？）

Java 是否有一种解决方案可以只创建一个在所有设备上无缝运行的应用程序？还是我们必须为不同的设备重写应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T16:03:53.450

我只知道一种允许在 Android/iOs 上使用 Java 的解决方案 - **[codenameone](http://www.codenameone.com/index.html)**。不幸的是我还没有在实践中尝试过，但是我已经阅读了几篇文章并且对它有很好的印象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T16:08:17.603

我想，跨便携应用程序的未来是 HTM5、CSS3 和 Javascript。Java（或[DART](http://www.dartlang.org/)）可用作生成 Javascript 的高级语言。

我建议你看一下手机的[phonegap](http://phonegap.com)和[mobilegwt](http://www.m-gwt.com/)，以及桌面的[Adob​​e Air](http://www.adobe.com/products/air.html)。

您可以使用 mobilegwt 在 Java 中编写移动/桌面应用程序。然后，您为不同的浏览器（iphone、ipad、android、黑莓、桌面）交叉编译应用程序，并将 javascript+html+css+images 打包到适用于所有平台的本机应用程序中。

您的应用程序可以从 Web 服务器运行（下载 html 和所有内容），或者是完全从设备运行的 javascript 应用程序；或者是两件事的混合体：一个 javascript 应用程序部署到本机应用程序并从设备运行，对服务器进行 AJAX 调用。

这些应用程序通常称为[混合应用程序](http://icenium.com/community/blog/icenium-team-blog/2012/06/14/what-is-a-hybrid-mobile-app-)。

最终，您可以跳过 java 部分并开发一个 html5+css3 应用程序并使用 phonegap 为不同平台打包。但我发现 mobilegwt 能够生成看起来像原生应用程序的混合应用程序（“外观和感觉”和动画实现得非常好）。GWT 有助于将 Java 语言（可重用组件、工具和 OO）的可伸缩性引入 Javascript。

对于桌面，您可以使用[Adob​​e Air](http://www.adobe.com/products/air.html)打包一个 html5 应用程序。

对于视频游戏，我认为[playn](http://code.google.com/p/playn/)值得关注，它能够交叉编译桌面 Java、HTML5 浏览器、Android、iOS、Flash（以及更多）的游戏，并产生令人印象深刻的结果，例如[Chrome 的愤怒的小鸟](http://chrome.angrybirds.com/)（从 Java 交叉编译到 Javascript） .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T15:44:58.767

Java 代码被编译成字节码，保证跨平台，即可以在任何JVM 上执行。

不同的环境可以提供不同的平台相关 API，并且需要额外的要求。例如，Java EE 提供容器服务，需要编写容器管理的组件（EJB、Servlet 等）。但是代码本身仍然是跨平台的。

尽管 J2ME 死了，但它要求编写 MIDlet。它确实很特别：它不提供常规的 JDK，所以我们避免讨论它。

在“大型”Mac 计算机上运行的 iOS 可以运行常规 java。在 Windows 或 linux 上运行的相同 java。因此，代码仍然是跨平台的。

# c++ - 使用 OpenGL 在 NVidia 中打印到 HUD

> ID：14091957
> 
> 赞同：1
> 
> 时间：2012-12-30T15:31:16.517
> 
> 标签：c++, visual-studio-2010, opengl, nvidia

我发现很难弄清楚如何让我的分数出现在屏幕上。我目前让它工作并打印到控制台窗口，但就是这样。

当球击中盒子时，NX_NOTIFY_ON_TOUCH 事件的计数增加一，并在更新功能期间打印在控制台窗口中。

我已将 count 变量放入模拟代码的 .h 文件中，然后将其放在 .cpp 文件中以进行可视化，然后尝试使用以下行提供的 HD 函数将其打印到屏幕上：

```
 hud.AddDisplayString("Hit Count = ",0.0f,0.89f); 
```

看了之后，我很快意识到使用该代码我无法访问变量以进行计数。

有谁知道无论如何可以打印到可视屏幕。

编辑：将文本绘制到屏幕的功能

```
void drawText(float *text, int length, int x, int y)
{
glMatrixMode(GL_PROJECTION);
double *matrix = new double[16];
glGetDoublev(GL_PROJECTION_MATRIX, matrix);
glLoadIdentity();
glOrtho(0, 800, 0, 600, -5, 5);
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
glPushMatrix();
glLoadIdentity();
glRasterPos2i(x, y);
for(int i=0; i<length; i++)
{
    glutBitmapCharacter(GLUT_BITMAP_9_BY_15, (int)text[i]);
}
glPopMatrix();
glMatrixMode(GL_PROJECTION);
glLoadMatrixd(matrix);
glMatrixMode(GL_MODELVIEW);
} 
```

然后在显示功能中我写：

```
glColor3f(5,5,5);
drawText(&HITcount, HITcount, 0 , 535); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T16:58:14.870

这里的第一个问题：

> 我已将 count 变量放入模拟代码的 .h 文件中，然后将其放入 .cpp 文件中以进行可视化，然后尝试使用 line 提供的 HD 函数将其打印到屏幕上

请了解变量范围和编译单元。为了立即缓解，将头`.h`文件 () 中的变量声明更改为 extern，无需赋值，并且在其中一个编译单元源文件 ( `.c*`) 中实际定义变量，理想情况下使用初始化赋值。

> 有谁知道无论如何可以打印到可视屏幕，因为我在网上找不到任何有效的帮助。

切换到符合您的 HUD 需求的投影，并在您的场景上绘制分数。您可以随时随地切换投影和视口。专业提示：如果您在窗口的调整大小处理程序中有任何处理投影矩阵的代码，请将其移动到绘图代码中。

### 因评论而更新

让我评论一下这个`drawText`功能

```
void drawText(float *text, int length, int x, int y)
{ 
    glMatrixMode(GL_PROJECTION);
    double *matrix = new double[16];
    glGetDoublev(GL_PROJECTION_MATRIX, matrix); 
```

这实际上是有道理的，因为投影矩阵 stap 的嵌套深度可能不足以使用 glPushMatrix/glPopMatrix。但在函数结束时，它错过了释放分配的内存。事实上，使用静态分配的数组更好。元素的数量是众所周知的，并且获取堆栈的内存比在堆上更有效。

```
 glLoadIdentity();
    glOrtho(0, 800, 0, 600, -5, 5); 
```

这里的问题：正交投影的范围应该与视口大小相匹配。在这里他们没有。

```
 glMatrixMode(GL_MODELVIEW); 
```

以下 glLoadIdentity 将丢弃模型视图矩阵，因为它不在推送/弹出框架内。也是多余的

```
 glLoadIdentity(); 
```

以下是需要的。

```
 glPushMatrix();
    glLoadIdentity(); 
```

这里的问题是，glRasterPos 的行为就像发射一个顶点，即它被剪裁（我们对此无能为力）并进行深度测试。glutBitmapCharacter（实际上是glBitmap）可能会干扰深度缓冲区。

```
 glRasterPos2i(x, y);
    for(int i=0; i<length; i++)
    {
        glutBitmapCharacter(GLUT_BITMAP_9_BY_15, (int)text[i]);
    }
    glPopMatrix();
    glMatrixMode(GL_PROJECTION);
    glLoadMatrixd(matrix);
    glMatrixMode(GL_MODELVIEW);
} 
```

该功能可以固定如下：

```
void drawText(float *text, int length, int x, int y)
{
    double old_modelview[16];
    int viewport[4];

    glGetIntegerv(GL_VIEWPORT, viewport);

    glMatrixMode(GL_PROJECTION);
    glGetDoublev(GL_PROJECTION_MATRIX, old_modelview);
    glLoadIdentity();
    glOrtho(viewport[0], viewport[0]+viewport[2],
            viewport[1], viewport[1]+viewport[3],
            -1, 1);

    glMatrixMode(GL_MODELVIEW);
    glPushMatrix();
    glLoadIdentity();

    // We're using glBitmap, i.e. legacy functionality anyway
    // so we can use glPush/PopAttrib as well.
    glPushAttrib(GL_DEPTH_BUFFER_BIT);
    glDisable(GL_DEPTH_TEST);
    glDepthMask(GL_FALSE);    

    glRasterPos2i(x, y);
    for(int i=0; i<length; i++) {
        glutBitmapCharacter(GLUT_BITMAP_9_BY_15, (int)text[i]);
    }

    glPopAttrib(GL_DEPTH_BUFFER_BIT);

    glMatrixMode(GL_PROJECTION);
    glLoadMatrixd(old_modelview);

    glMatrixMode(GL_MODELVIEW);
    glPopMatrix();
} 
```

# c++ - LSD基数排序c++代码

> ID：14091958
> 
> 赞同：-4
> 
> 时间：2012-12-30T15:31:24.097
> 
> 标签：c++, arrays, string, radix-sort

我编写了这段代码来实现字符串的 lsd 基数排序算法。

*逻辑：我们从最低有效位开始，首先对这个数字进行排序。然后，我们移动到左边的下一个数字，依此类推。`count[]`包含每个英文字母在特定数字位置的频率。`count[1]`表示`'a'`, `count[2]`of ...的频率`'b'`...等等... 和`count[0]=0`. 然后，我们计算累积计数。现在我们再次遍历字符串数组并计算数组中的适当位置`aux`。例如：如果`count[2] = 4`和`count[1]=1`对于特定的数字位置，这意味着`'b'`在该位置的单词将占据`aux[1]`, `aux[2]`, `aux[3]`。*

```
#include<iostream>
#include<string>
using namespace std;

int main()
{
string arr[]={"dab","cab","fad","bad","dad","ebb","ace","add","fed","bed","fee","bee"};
string aux[12]={"dab","cab","fad","bad","dad","ebb","ace","add","fed","bed","fee","bee"};

int count[27]={0};
for(int i=2;i>=0;i--)
{
for(int j=0;j<12;j++)
count[static_cast<int>(arr[j][i])-64]++;
cout<<"here"<<endl;    //////////////THIS GETS PRINTED

for(int j=0;j<26;j++)
count[j+1]+=count[j]; //calculating cumulative value
cout<<"HERE"<<endl;   ///////////////THIS GETS PRINTED

for(int j=0;j<12;j++)
{
int x=count[static_cast<int>(arr[j][i])-65]; //65 because positions for 'a' will be 
                                             //determined by count[0], for 'b' will be
                                             // determined by count[1] etc.  
aux[x]=arr[j];
cout<<j<<endl;  //even j=0 doesn't get printed
count[static_cast<int>(arr[j][i])-65]++;
}

cout<<"here"<<endl;

for(int j=0;j<12;j++)
cout<<aux[j]<<endl;
} //i governs which digit is being compared

return 0;
} 
```

代码在此处和此处打印后会出现段错误。问题出在第三个“for j”循环中。任何人都可以找出问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T18:28:49.080

有一个小错误......我减去了 65，它是 'A' 而不是 'a' 的 ascii

# regex - Perl 的条件正则表达式

> ID：14091965
> 
> 赞同：2
> 
> 时间：2012-12-30T15:32:25.727
> 
> 标签：regex, perl

Perl 是否支持条件正则表达式：

```
(?(condition)true-pattern|false-pattern) 
```

即如果条件为真，则尝试匹配真模式，否则尝试匹配假模式

如果 Perl 支持条件正则表达式，那为什么这段代码不打印`1`呢？

```
use strict;
use warnings;

$_ = 'AB';

if ( /(?(A)B|C)/ ) {
  print 1;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T15:40:55.853

Perl 支持[`conditional patterns`](http://perldoc.perl.org/perlre.html#%28?%28condition%29yes-pattern|no-pattern%29).

您的正则表达式不仅不匹配，还会引发以下语法错误：

```
Unknown switch condition (?(A) in regex; marked by <-- HERE in m/(?( <-- HERE A)B|C)/ 
```

那是因为`A`不是有效条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-20T20:31:14.687

我知道我迟到了这个问题，但我会尝试解释我对当前正则表达式正在做什么以及如何调整它的理解。

是的，Perl 支持条件表达式。然而，这个正则表达式的问题在于条件必须是后向引用或零宽度断言，如后视或前瞻。换句话说，条件永远不会消耗字符串中的任何字符。

因此，让我们看一下可以重写的几种方法。

一种方法是使用前瞻并将匹配添加到`then`表达式中。所以可以重写为`/(?(?=A)AB|C)/`. 这表示如果字符串匹配`A`，则匹配并使用，`AB`否则匹配并使用`C`。这将成功匹配`AB`或`C`。

另一种方法是在这样的条件之前使用捕获组`/(A)?(?(1)B|C)/`。这表示匹配并消耗`A`零次或一次；如果捕获组`1`有匹配项，则匹配并消费，`B`否则匹配并消费`C`。这也将成功匹配上一个示例`AB`或`C`相同，因为`A`如果匹配项存在于字符串中，则会消耗并向前移动匹配项。

[另一个答案中引用的 perldoc](http://perldoc.perl.org/perlre.html#Extended-Patterns)解释了您可以在条件中使用的其他选项，但我认为上面的两个示例将是最常用的。

# iphone - CoreBluetooth 广告检测时间

> ID：14091968
> 
> 赞同：7
> 
> 时间：2012-12-30T15:33:13.957
> 
> 标签：iphone, ios, bluetooth, core-bluetooth, bluetooth-lowenergy

这个问题已经在 10 月份[在这里](https://stackoverflow.com/questions/12866551/corebluetooth-connection-setup-time-varies-quite-a-bit/14090354#14090354)讨论过。这是一个新问题，因为 CoreBluetooth 相当新，从那时起可能已经发生了一些变化。

我每 2 秒有一个 BLE 设备广告。使用以下方式启动扫描：

```
[self.CM scanForPeripheralsWithServices:nil options:0] 
```

最常返回（通过 centralManager didDiscoverPeripheral 回调）大约 2 秒到 4 秒后。（CM 是我的 CentralManger）

但是，大约 30% 的时间，扫描需要 10 到 18 秒。附近设备中的 WiFi 和 BT 已被禁用，以尽可能清除频谱。扫描时间似乎与 RSSI 无关。在 iPAd3 旁边时为 -40dB，在另一个房间约 5 米外时为 -70dB。

```
[self.CM stopScan]; 
```

在 scanWithPeripherals 之前调用，因为它减少了真正长时间等待的发生。

没有建立连接。未请求任何特征或服务数据。广告数据就足够了。

有一个有用的 TI[演示器应用程序](http://processors.wiki.ti.com/index.php/Category%3aIPhone4SBLEDemo#App_Operation)。这给出了类似的结果（实际上稍微差一点，因为它没有进行任何 stopScan 调用）

CBCentralManagerScanOptionAllowDuplicatesKey 选项，如在此[Stackoverflow 答案](https://stackoverflow.com/questions/11557500/corebluetooth-central-manager-callback-diddiscoverperipheral-twice)中所见，如果有任何东西似乎会延长发现时间。

显然，下一步是使用一些更高级的 BT 嗅探器/广告生成工具来进一步表征这种 CoreBluetooth 响应。

这是另一个有用的[SO question](https://stackoverflow.com/questions/9896562/what-exactly-can-corebluetooth-applications-do-whilst-in-the-background/10096244#10096244)，但没有详细说明响应时间。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-31T08:51:46.350

CoreBluetooth 没有连续收听。它与蓝牙经典和 Wifi 共享硬件资源。

基本上你必须“幸运”才能收到广告包。“幸运”是因为 2 个不同步系统的 2 个滑动窗口必须相互碰撞。如果 CoreBluetooth 以 10% 的时间打开它的 BLE 窗口，并且您在不知道确切时间的情况下设置了广告间隔，那么它将/可能需要 10 倍的广告间隔。

一个建议是在前 30 秒（比如 20 毫秒，您应该在第一个活动的 CoreBluetooth 窗口中发现它）宣传 >fast<，然后放慢到 Apple 指定的间隔。2,00 秒不是一个好数字。

请参阅此处的指南： [https ://developer.apple.com/hardwaredrivers/BluetoothDesignGuidelines.pdf](https://developer.apple.com/hardwaredrivers/BluetoothDesignGuidelines.pdf)

第 18 页

**广告间隔** 蓝牙配件的广告间隔应该仔细考虑，因为它会影响发现时间和连接性能。对于电池供电的配件，还应考虑其电池资源。要被 Apple 产品发现，蓝牙配件应首先使用建议的 20 毫秒的广告间隔至少 30 秒。如果在最初的 30 秒内未发现，配件可能会选择节省电池电量并增加其广告间隔。Apple 建议使用以下较长时间间隔之一来增加 Apple 产品发现的机会：

645 毫秒 768 毫秒 961 毫秒 1065 毫秒 1294 毫秒

因此，如果您必须节省电池，请尝试 1294 毫秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-27T09:18:03.573

虽然这是一个旧线程，但我在 MacBook Pro（15 英寸，2017 年）上的 macOS High Sierra 10.13.3 中看到了同样的问题。问题因外围设备而异，“Apple TV”往往总是很快出现，可能是因为它的广告时间很短。一些外围设备需要很长时间才能显示或似乎根本不显示。此外，如果广告太慢，则连接也可能很慢，因为连接是通过首先找到一个广告并在之后的很短的固定时间响应它（外围设备在此期间正在侦听）而发生的。

我找到了解决此问题的方法，即同时关闭 Wi-Fi 和切换。一个人通过进入 Apple - System Preferences - General 并取消选中“Allow Handoff between this Mac and your iCloud devices”来关闭 Handoff。这不仅使扫描显示广告数据包的速度更快，连接速度更快，而且还显示更高（负值较小）的 RSSI，表示接收到的信号强度更强。

请注意，该问题并未出现在 iOS 中，这可能是由于更好的 BT 和 Wi-Fi 共存支持以及 Handoff (Airdrop) 和常规 BLE 使用之间的关系。该问题似乎只是扫描和连接期间 BLE 侦听时间的比例之一。建立连接后，似乎没有那么多干扰。部分原因是，在一个连接之后，在连接间隔之间会有自动的低级 BLE 重试和跳频。在扫描和建立连接（两者都依赖于查看广告数据包）期间，应该依次监视 3 个 BLE 广告通道，但 macOS 的行为就好像它没有这样做一样。从技术上讲，广告渠道不与 Wi-Fi 渠道重叠（参见[http://www.argenox.com/a-ble-advertising-primer/](http://www.argenox.com/a-ble-advertising-primer/)）。

# wcf - 不同类型的端点必须使用多个 Mex 端点

> ID：14091969
> 
> 赞同：2
> 
> 时间：2012-12-30T15:33:15.367
> 
> 标签：wcf

我的服务没有 svc 文件。查看配置条目，肯定会注意到一个 mex 端点已为一个 tcp 端点声明的一件事。

所以我的问题是当我的服务将有许多端点，如 wshttp、wsDualhttp、tcp、m smq 等，那么我是否需要为每种类型的不同端点声明 mex 端点？

这是托管服务的我的服务配置详细信息。

```
<services>
  <service name="ChatService.ChatHandler" behaviorConfiguration="behaviorConfig">
    <host>
      <baseAddresses>
        <add baseAddress="net.tcp://localhost:1648/ChatService/" />
        <add baseAddress="http://localhost:1647/ChatService/" />
      </baseAddresses>
    </host>
    <endpoint address="tcp"
                      binding="netTcpBinding"
                      bindingConfiguration="tcpBinding"
                      contract="ChatService.IChat"/>

    <endpoint address="net.tcp://localhost:1645/ChatService/mex"
                      binding="mexTcpBinding"
                      contract="IMetadataExchange"/>
  </service>
</services> 
```

## 编辑部分

因此，根据我对 Marc_S 的回答的理解：即使没有任何 MEX 端点，我的服务也将完全正常运行。

如果有人想与您的服务交互，您需要以其他方式提供相关信息，因为这些客户端无法“自动发现”并通过 MEX 检查服务 - 您必须例如提供下载您的 WSDL 和随附的 XSD 文件，因此有人可以构建客户端而无需交互式查询您的服务的 MEX 端点.. 所以如果我不公开 mex 那么我必须创建 wsdl 文件并且我必须手动将该 wsdl 传递给客户端.. ..我对吗？

当 mex 被禁用时，客户还有其他方法可以创建我的服务代理吗？

那么有什么方法可以从服务端确定客户端使用哪个协议来调用我的服务....假设我有多个端点，如 wshttp、wsdualhttp、tcp、msmq 等？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T15:37:42.573

不需要元数据交换端点，您可以声明一个端点或创建没有任何元数据交换端点的服务

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-30T16:48:45.117

MEX 端点——顾名思义，*元数据交换*暗示——用于使您的服务可*发现*，例如，尝试为您的服务编写客户端的人可以将他的浏览器和/或开发工具（如 Visual Studio 或`svcutil`）指向此端点并通过通过定义的数据交换，客户可以从服务方法和数据结构方面了解您的服务提供什么。

这是一个很好的和方便的 - 但它实际上只需要**创建**客户端代理代码 - 通常只需要一次。

没有MEX 端点的**要求**，或者如果您有安全意识，您可能会决定明确**不**公开该信息以供所有人查看和检查。即使没有**任何**MEX 端点，您的服务也将完全运行。如果有人想与您的服务交互，您需要以其他方式提供相关信息，因为这些客户端无法“自动发现”并通过 MEX 检查服务 - 您必须例如提供下载您的 WSDL 和随附的 XSD 文件，以便有人可以构建客户端，而无需交互式查询您的服务的 MEX 端点。

因此 -**不需要**为您计划支持的每个协议 ( `net.tcp`, ) 公开一个 MEX 端点。`http`您可以很容易地拥有五个使用不同协议的不同端点，但只公开最常用的 HTTP MEX 端点（它允许客户端和开发人员在浏览器中浏览到 MEX 端点以获取“帮助页面”并查看WSDL = 描述您的服务的 Web 服务描述语言文件）

# c# - SharpMap 使用 GeoAPI.Geometries 选择几何

> ID：14091977
> 
> 赞同：4
> 
> 时间：2012-12-30T15:34:27.917
> 
> 标签：c#, spatial, sharpmap, geoapi

您好我正在尝试创建一个函数，该函数将选择图层几何形状并更改其颜色或突出显示它。

我找到了这个`FindGeoNearPoint`函数，但它处理的是旧`SharpMap.Geometries`的 whih 不再存在，并已被 GeoAPI.Geometries 取代。

如何更改`FindGeoNearPoint`函数以使用 GeoAPI

这是我的尝试

```
 public SharpMap.Data.FeatureDataRow FindGeoNearPoint(GeoAPI.Geometries.IPoint pos, SharpMap.Layers.VectorLayer layer, double amountGrow)
    {

        GeoAPI.Geometries.Envelope bbox = new GeoAPI.Geometries.Envelope();
        SharpMap.Data.FeatureDataSet ds = new SharpMap.Data.FeatureDataSet();

        layer.DataSource.ExecuteIntersectionQuery(bbox, ds);

        DataTable tbl = ds.Tables[0] as SharpMap.Data.FeatureDataTable;

        NetTopologySuite.IO.WKTReader reader = new NetTopologySuite.IO.WKTReader();

        GeoAPI.Geometries.IGeometry point = reader.Read(pos.ToString());

        if (tbl.Rows.Count == 0)

            return null;

        double distance = point.Distance(reader.Read((tbl.Rows[0] as SharpMap.Data.FeatureDataRow).Geometry.ToString()));

        SharpMap.Data.FeatureDataRow selectedFeature = tbl.Rows[0] as SharpMap.Data.FeatureDataRow;

        if (tbl.Rows.Count > 1)

            for (int i = 1; i < tbl.Rows.Count; i++)
            {

                GeoAPI.Geometries.IGeometry line = reader.Read((tbl.Rows[i] as SharpMap.Data.FeatureDataRow).Geometry.ToString());

                if (point.Distance(line) < distance)
                {

                    distance = point.Distance(line);

                    selectedFeature = tbl.Rows[i] as SharpMap.Data.FeatureDataRow;

                }

            }

        return selectedFeature;

    } 
```

# java - 如何从mysql php获取数据到android

> ID：14091979
> 
> 赞同：0
> 
> 时间：2012-12-30T15:34:49.453
> 
> 标签：java, php, javascript, android, mysql

我是 android 开发新手，我在 android 上开发了一个应用程序，它有 3 个活动，除此之外，我还开发了一个 PHP 网站，该网站在 MySQL 上具有数据库。我想在android和PHP之间建立联系。我阅读了很多教程并根据使用 JSON Parser 进行连接，但我不工作。可以使用“ **Web 服务”将客户端连接到服务器吗？**“？现在我的项目的要求是我有一种客户注册表格，我想从中获取用户输入并保存在android数据库中的所有数据。我该怎么做？有没有可能在我的 android 应用程序中，我在其他活动中输入数据，它将保存在 MySql 数据库中。请提供帮助，因为我尝试了多种连接和获取数据的方法，但没有成功请指导从我的 PHP 应用程序中检索任务详细信息的可能方法.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T15:38:34.970

您可以为您的 Web 应用程序创建一个解析 json、xml、csv 和许多其他类型的[RESTFUL](https://stackoverflow.com/questions/4684075/how-to-build-a-restful-api) API 服务，然后您可以将其称为 android。

从android调用服务的方法之一是[android query](http://code.google.com/p/android-query/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T15:51:19.450

这样做。

它可能对你有帮助。

```
title = spinnerTitle.getSelectedItem().toString();
firstName = editTextFirstName.getText().toString();
lastName = editTextLastName.getText().toString();
address1 = editTextAddress1.getText().toString();
adddress2 = editTextAddress2.getText().toString();
city = editTextCity.getText().toString();
county = editTextCounty.getText().toString();
postCode = editTextPostCode.getText().toString();
country = spinnerCountry.getSelectedItem().toString();
dayPhone = editTextDayPhone.getText().toString();
evePhone = editTextEvePhone.getText().toString();

String xml = "<?xml version=\"1.0\" encoding=\"utf-8\" ?>"
            + "<users><Title>"+title+"</Title>"
            + "<FirstName>"+firstName+"</FirstName>"
            + "<LastName>"+lastName+"</LastName>"
            + "<Address1>"+address1+"</Address1>"
            + "<Address2>"+adddress2+"</Address2>"
            + "<LoginID>"+userId+"</LoginID>"
            + "<Password>"+password+"</Password>"
            + "<County>"+county+"</County>"
            + "<City>"+city+"</City>"
            + "<Country>"+country+"</Country>"
            + "<PostCode>"+postCode+"</PostCode>"
            + "<Email>"+email+"</Email>"
            + "<DayPhone>"+dayPhone+"</DayPhone>"
            + "<EvePhone>"+evePhone+"</EvePhone>" + "</users>";

            serverCall(xml);

private void serverCall(final String xml )
{

 ConnectivityManager conMan = ( ConnectivityManager ) getSystemService( Context.CONNECTIVITY_SERVICE );
 if( conMan.getActiveNetworkInfo() != null && conMan.getActiveNetworkInfo().isConnected() )
  {

     result = new Connection().getResponse("http://localhost/registration.php" , xml);
     if(result.equals("yes") {
       //registration done
     } else {
       //failed
     }
   }
} 
```

连接.java

```
public String getResponse(String connUrl, String xml) {
    DefaultHttpClient httpClient = null;
    try {
        MultipartEntity mp = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
        HttpPost method = new HttpPost(connUrl);
        method.setEntity(mp);
        mp.addPart("xml_request", new StringBody(xml));

        httpClient = new DefaultHttpClient();
        HttpResponse response = httpClient.execute(method);

        if(response.getStatusLine().getStatusCode() == 200){
            ByteArrayOutputStream outstream = new ByteArrayOutputStream();
            response.getEntity().writeTo(outstream);
            return outstream.toString();
        }
    }
    catch(Exception e) {
        Log.v("APP", "Exception while create connection for getResponse from server with: " + e.getMessage());
    }
    finally {
        httpClient.getConnectionManager().shutdown();
    }
    return "";
} 
```

# javascript - Touchend 第二次在 touchstart 上触发

> ID：14091982
> 
> 赞同：5
> 
> 时间：2012-12-30T15:35:12.057
> 
> 标签：javascript, jquery, iphone, touch

有谁知道为什么在 touchstart 事件期间会触发 touchend 事件？这只会发生第二次。

一个快速的代码片段：

```
function touchstart (event) {
    $(event.target).one('touchend', function () {
        alert('fired');
    }
} 
```

所以第一次被解雇它工作正常。第二次它在 touchstart 上触发警报。

[http://jsfiddle.net/8SVFR/](http://jsfiddle.net/8SVFR/)

编辑：

看起来这可能只是一个 iPhone 问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T21:49:00.683

结果...通过在 touchend 事件中触发警报会导致各种问题。当您单击“确定”时，它会触发 touchstart，以便在您下次触摸元素时触发 touchend。幸运的是，我使用警报来检查我的代码 - 所以一旦删除，我的代码就可以完美运行！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-22T12:47:36.193

只需将“touchend”处理程序的代码放在 setTimeout 中，时间为 0ms。像这样：

```
$(someElement).on("touchend",
function(){
    setTimeout(function(){
    /*Your code*/
    }, 0);
}); 
```

# c++ - 生成与点等距的向量

> ID：14091986
> 
> 赞同：0
> 
> 时间：2012-12-30T15:35:43.613
> 
> 标签：c++, algorithm, opengl, openframeworks

我正在尝试生成与屏幕中心点等距的向量。

以前，我遵循以下方法 1\. 为 x、y 和 z 生成随机数 Random(0-400, 0+400)
2\. 标准化向量
3\. 将它们缩放到想要的任何距离

但是，这是我的原点为 0 的时候。现在，我必须从屏幕中心做这样的事情。我尝试采用以下方法，出于某种原因，这只是在正象限中给了我 x 和 y（z 结果很好）

```
//Origin (midpointX of screen, midPointY of screen,  z=0)
//vector<Vec3f> positions;
//positions.push_back(getPoint().scale(300);

getPoint{
Vec3f rVector;
rVector.set( Random(midPointX-100,midPointX+100), Random(midPointY-100,midPointY+100), Random(0-100,0+100)    );
} 
```

假设所有这些点都位于某个半径的球面上。因此，它们与中心 (x,y,z) 等距。很高兴知道生成这些点的更好方法。
我只对算法很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T15:44:05.547

你关心角度的pdf（概率分布）吗？通过在立方体中生成均匀分布的随机点，您将倾向于选择立方体角的方向。这显然不同于在球体表面上随机采样点。

如果您想要球体表面上的均匀分布，请尝试例如[球体点拾取](http://mathworld.wolfram.com/SpherePointPicking.html)（基本上，独立生成角度，而不是 xyz 坐标）

正如其他人所指出的那样，就将球体从原点移动到不同的点而言，这只是将常数添加到最终结果（从极坐标计算的 xyz 坐标）的问题。

# silverlight - 如何访问 XamGrid 列的内容

> ID：14091987
> 
> 赞同：0
> 
> 时间：2012-12-30T15:35:50.033
> 
> 标签：silverlight, xamgrid

我在 WCF 的 silverlight 页面中创建了一个 XamGrid。其中我有一个名为 "status" 的列。它具有三个值：完成、开始、进行中。对于这些值，我想设置在文本旁边添加一个图像。如何从后面的代码访问 XamGrid 列内容。我用过类似的东西：

```
XamGrid1.column.[2].key 
```

但它正在返回我的列名。我想要该列中的值.. 请有人帮我这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T09:25:12.777

嗨，将事件 Cellclicked 添加到您的数据网格

```
 if (this.Yourdatagrid.ActiveCell != null)
             {
                Custom.DuoInventory.Dealer OBJ= new YourObject();
                if (((List<Yourdatasource>)Yourdatagrid.ItemsSource).Count == 0) return;
                OBJ = (YourObject)Yourdatagrid.ActiveCell.Row.Data;
              } 
```

然后您可以访问您的每个成员。

# asp.net-mvc - 搜索方法未按预期工作

> ID：14091990
> 
> 赞同：1
> 
> 时间：2012-12-30T15:36:06.453
> 
> 标签：asp.net-mvc, c#-4.0

我一直在尝试编写一个 RESTful API 方法。但它没有按预期工作。

代码不言自明。完整方法如下：

```
public CustomResult Query(
        int? count,
        string os = null,
        string manufacturer = null,
        string has_camera = null,
        string has_gprs = null,
        string has_wifi = null,
        string has_edge = null,
        string has_bluetooth = null,
        string has_gpu = null,
        string has_gps = null,
        string has_radio = null
        )
    {
        TimeSpan T = DateTime.Now.TimeOfDay;
        Result result = new Result();
        List<Mobile> MbList = getMobileList();

        if (os != null)
        {
            MbList = (from M in MbList
                      where (M.Feature.OS.ToLower().IndexOf(os.ToLower()) >= 0)
                      select M).ToList();
        }
        if (manufacturer != null)
        {
            MbList = (from M in MbList
                      where (M.Manufacturer.ToLower() == manufacturer.ToLower())
                      select M).ToList();
        }

        #region Camera Check

        if (has_camera != null)
        {
            if (has_camera == "true")
            {
                MbList = (from M in MbList
                          where (M.Camera.Primary.ToLower() != "n/a" || M.Camera.Primary.ToLower() != "no")
                          select M).ToList();
            }
            else
            {
                MbList = (from M in MbList
                          where (M.Camera.Primary.ToLower() == "n/a" || M.Camera.Primary.ToLower() == "no")
                          select M).ToList();
            }
        }

        #endregion
        #region GPRS Check
        if (has_gprs != null)
        {
            if (has_gprs == "true")
            {
                MbList = (from M in MbList
                          where (M.Data.GPRS.ToLower() != "n/a" || M.Data.GPRS.ToLower() != "no")
                          select M).ToList();
            }
            else
            {
                MbList = (from M in MbList
                          where (M.Data.GPRS.ToLower() == "n/a" || M.Data.GPRS.ToLower() != "no")
                          select M).ToList();
            }
        }
        #endregion
        #region Wifi Check

        if (has_wifi != null)
        {
            if (has_wifi == "true")
            {
                MbList = (from M in MbList
                          where (M.Data.WAN.ToLower() != "n/a" || M.Data.WAN.ToLower() != "no")
                          select M).ToList();
            }
            else
            {
                MbList = (from M in MbList
                          where (M.Data.WAN.ToLower() == "n/a" || M.Data.WAN.ToLower() == "no")
                          select M).ToList();
            }
        }

        #endregion
        #region GPU Check

        if (has_gpu != null)
        {
            if (has_gpu.ToLower().CompareTo("true") > 0)
            {
                MbList = (from M in MbList
                          where (M.Feature.GPU.ToLower() != "n/a" || M.Feature.GPU.ToLower() != "no")
                          select M).ToList();
            }
            else
            {
                MbList = (from M in MbList
                          where (M.Feature.GPU.ToLower() == "n/a" || M.Feature.GPU.ToLower() == "no")
                          select M).ToList();
            }
        }

        #endregion
        #region EDGE Check
        if (has_edge != null)
        {
            if (has_edge == "true")
            {
                MbList = (from M in MbList
                          where (M.Data.EDGE.ToLower() != "n/a" || M.Data.EDGE.ToLower() != "no")
                          select M).ToList();
            }
            else
            {
                MbList = (from M in MbList
                          where (M.Data.EDGE.ToLower() == "n/a" || M.Data.EDGE.ToLower() == "no")
                          select M).ToList();
            }
        }

        #endregion
        #region Bluetooth Check
        if (has_bluetooth != null)
        {
            if (has_bluetooth == "true")
            {
                MbList = (from M in MbList
                          where (M.Data.Bluetooth.ToLower() != "n/a" || M.Data.Bluetooth.ToLower() != "no")
                          select M).ToList();
            }
            else
            {
                MbList = (from M in MbList
                          where (M.Data.Bluetooth.ToLower() == "n/a" || M.Data.Bluetooth.ToLower() == "no")
                          select M).ToList();
            }
        }
        #endregion
        #region GPS Check
        if (has_gps != null)
        {
            if (has_gps == "true")
            {
                MbList = (from M in MbList
                          where (M.Feature.GPS.ToLower() != "n/a" || M.Feature.GPS.ToLower() != "no")
                          select M).ToList();
            }
            else
            {
                MbList = (from M in MbList
                          where (M.Feature.GPS.ToLower() == "n/a" || M.Feature.GPS.ToLower() == "no")
                          select M).ToList();
            }
        }
        #endregion
        #region Radio Check
        if (has_radio != null)
        {
            if (has_radio == "true")
            {
                MbList = (from M in MbList
                          where (M.Feature.Radio.ToLower() != "n/a" || M.Feature.Radio.ToLower() != "no")
                          select M).ToList();
            }
            else
            {
                MbList = (from M in MbList
                          where (M.Feature.Radio.ToLower() == "n/a" || M.Feature.Radio.ToLower() == "no")
                          select M).ToList();
            }
        }
        #endregion

        if (count.HasValue)
        {
            MbList = MbList.Take(count.Value).ToList<Mobile>();
        }
        result.Count = MbList.Count;
        result.Data = MbList;
        result.TimeElapsed = getElapsedTiming(T);
        return new CustomResult() { R = result };
    } 
```

问题是，当我通过 has_camera 或任何其他“has”参数等于“true”时，它会返回所有记录。如果我在参数中传递“false”，则方法正常工作。

PS如果有人可以建议我更好的方法来做到这一点，我将不胜感激。是的，我知道，我的代码很幼稚。对于那个很抱歉。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T15:39:29.970

对于真实情况，您正在检查`_ != "n/a" || _ !="no'`. 这不排除`"no"`。为此，您需要`&&`而不是`||`.

更改以下`has_camera`标志。

```
 if (has_camera == "true")
        {
            MbList = (from M in MbList
                      where (M.Camera.Primary.ToLower() != "n/a" || M.Camera.Primary.ToLower() != "no")
                      select M).ToList();
        } 
```

到

```
 if (has_camera == "true")
        {
            MbList = (from M in MbList
                      where (M.Camera.Primary.ToLower() == "n/a" && M.Camera.Primary.ToLower() == "no")
                      select M).ToList();
        } 
```

对所有其他标志进行类似的更改。

# java - 提取字符串中的一些单词（java）

> ID：14091992
> 
> 赞同：-2
> 
> 时间：2012-12-30T15:36:28.817
> 
> 标签：java, regex

从下面的字符串中，我`NUM = 12122`只`CheckFrom = 02453226170`需要

```
String s="shopNumber = \"shop 1\", NUM = \"12122\", Reference = \"NUM1\", CheckFrom = \"02453226170\"" 
```

如何使用正则表达式和 String 类的 replaceall 函数来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T15:47:59.523

使用[Matcher.find](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#find%28%29)将使这项任务更容易提取名称/值对。本质上，您正在寻找模式`word = "number"`：

```
Matcher m = Pattern.compile("(\\w+) = \"(\\d+)\"").matcher(s);
StringBuilder builder = new StringBuilder();
while (m.find()) {
   builder.append(m.group(1));
   builder.append("=");
   builder.append(m.group(2));
   builder.append(" ");
} 
```

`m.group(1)`与第一个[捕获的组](http://docs.oracle.com/javase/tutorial/essential/regex/groups.html)有关，（即来自单词的匹配`\w+`）

生成器包含：

```
NUM=12122 CheckFrom=02453226170 
```

**更新：** 根据您在评论中的问题，您可以改用：

```
Pattern.compile("(NUM = \"\\d+\").*( CheckFrom = \"\\d+\")") 
```

并将 2 组附加在一起以获得您的`String`.

# android - NumberPicker 未显示在 AlertDialog 中

> ID：14091994
> 
> 赞同：5
> 
> 时间：2012-12-30T15:36:43.083
> 
> 标签：android, user-interface, components, android-alertdialog, numberpicker

我正在尝试将 NumberPicker 添加到 AlertDialog，但即使似乎没有错误，它也不会出现。我是 Android 编码的新手，所以我认为那里缺少一些非常愚蠢的东西。

```
 AlertDialog.Builder alert = new AlertDialog.Builder(MainActivity.this);

        alert.setTitle("Select the value: ");

        NumberPicker np = new NumberPicker(MainActivity.this);
        String[] nums = new String[100];
        for(int i=0; i<nums.length; i++)
               nums[i] = Integer.toString(i);

        np.setMinValue(1);
        np.setMaxValue(nums.length-1);
        np.setWrapSelectorWheel(false);
        np.setDisplayedValues(nums);
        np.setValue(50);

        alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
          // Do something with value!
          }
        });

        alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
          public void onClick(DialogInterface dialog, int whichButton) {
            // Cancel.
          }
        });

        alert.show(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T15:56:34.683

添加`alert.setView(np);` 您必须告诉警报对话框设置新视图。

# java - 将 Java 应用程序绑定到用户/计算机的安全解决方案

> ID：14091995
> 
> 赞同：1
> 
> 时间：2012-12-30T15:36:56.400
> 
> 标签：java, security, piracy-protection

Java应用程序是否有安全的解决方案将它们绑定到特定的用户或计算机，例如通过使用MAC地址（不安全，因为可以更改？）或任何其他硬件特定数据？

我们不想创建像 USB 棒 / 加密狗这样的硬件解决方案，但需要检查软件的用户是否被允许使用它。

一般来说，哪个是对抗软件盗版的最佳选择？
总是在线？
服务器检查？
使用硬件数据进行识别？
...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T00:48:20.260

过去，结合使用本地系统识别和在线检查对我来说很有效；两者或许并不相互排斥。您可以使用以下一种或多种方法获取各种系统相关属性：

```
System.getProperty("user.name");

System.getProperty("user.home");

System.getProperty("os.arch"); // the operating system architecture

System.getProperty("os.name");

System.getProperty("os.version"); 
```

然后可以使用[java.security.MessageDigest](http://docs.oracle.com/javase/1.4.2/docs/api/java/security/MessageDigest.html)包对这些详细信息进行散列处理，并将其与服务器上的用户帐户相关联。然后，验证用户和机器就像让您的客户端软件将生成的哈希作为其启动例程的一部分发送到服务器一样简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T06:04:18.610

一种流行的趋势是软件在启动时（或定期）使用中央服务器检查许可证的有效性。通过这种方式，您可以撤销被盗用的许可证。可能有许多服务可以为您管理这些许可证，我看到使用了 Esellerate。

同时，您添加到 Java 应用程序的任何保护都可以很容易地被逆向工程或简单地重载，除非您竭尽全力混淆和保护代码。这是一项非常艰巨的任务，结果可能不值得付出努力。

一些公司（例如我工作的公司）除了基本的许可证生成/验证代码外，并没有竭尽全力。信任客户的诚实和仅向有效的许可证持有者提供支持相结合，效果很好。

# c++ - 如何使用 Arduino 通过串行将动态文本写入 LED 显示屏

> ID：14091998
> 
> 赞同：0
> 
> 时间：2012-12-30T15:37:19.403
> 
> 标签：c++, python, arduino

所以我想我已经接近了，但我碰壁了。这就是我想要完成的事情：我有一个计算点击次数的程序，只要值更新，就会将串行数据发送到 Arduino (UNO)。

到目前为止，我有以下工作： - 在 LED 显示屏上滚动选框（来自 Freetronics - [http://www.freetronics.com/products/dot-matrix-display-32x16-red#.UOBeKInjmdM](http://www.freetronics.com/products/dot-matrix-display-32x16-red#.UOBeKInjmdM)） - 编写新的 Python 脚本通过串行（使用 PySerial）向 Arduino 发送数据 - 并且 Arduino 正确接收串行监视器中的数据...

所以我的问题是我无法将它写入 LED 显示屏，请帮助！

这是我的代码：

```
import serial
import argparse

myserial = serial.Serial('/dev/tty.usbmodemfd121', 9600)

parser = argparse.ArgumentParser(description='Example with non-optional arguments')

parser.add_argument('count', action="store", type=str)

results = parser.parse_args()

count = results.count
message = "total clicks: " + count

print message

myserial.write(message) 
```

示例：`$ python app.py 200` 这将向 Arduino 发送“总点击次数：200”

这是我的 Arduino 草图：

```
/*
  Scrolling text demonstration sketch for Freetronics DMD.
 See http://www.freetronics.com/dmd for resources and a getting started guide.
 Note that the DMD library uses the SPI port for the fastest, low overhead writing to the
 display. Keep an eye on conflicts if there are any other devices running from the same
 SPI port, and that the chip select on those devices is correctly set to be inactive
 when the DMD is being written to.  
 */

// you always need the code from here...........
#include <DMD.h> // for DMD
#include <SPI.h> // SPI.h must be included as DMD is written by SPI (the IDE complains otherwise)
#include <TimerOne.h> 
#include "SystemFont5x7.h"
#include "Arial_black_16.h"
#include "Arial_14.h"
#define DISPLAYS_ACROSS 1 // change to 2 for two screens, etc. 
#define DISPLAYS_DOWN 1
DMD dmd(DISPLAYS_ACROSS, DISPLAYS_DOWN); // creates instance of DMD to refer to in sketch

char message[] = "test string to be updated";

char serIn; //var that will hold the bytes in read from the serialBuffer

void ScanDMD() // necessary interrupt handler for refresh scanning of DMD
{ 
  dmd.scanDisplayBySPI();
}

void setup()
{
   //initialize TimerOne's interrupt/CPU usage used to scan and refresh the display
   Timer1.initialize( 5000 );           //period in microseconds to call ScanDMD. Anything longer than 5000 (5ms) and you can see flicker.
   Timer1.attachInterrupt( ScanDMD );   //attach the Timer1 interrupt to ScanDMD which goes to dmd.scanDisplayBySPI()  
   dmd.clearScreen( true );   //true is normal (all pixels off), false is negative (all pixels on)

   Serial.begin(9600);

}

void loop()
{

// only if there are bytes in the serial buffer execute the following code
if(Serial.available()) {    
  //keep reading and printing from serial untill there are bytes in the serial buffer
   while (Serial.available()>0){
      serIn = Serial.read();    //read Serial   
       Serial.write( byte(serIn));
   }
   //the serial buffer is over just go to the line (or pass your favorite stop char)               
   Serial.println();
}

   // Now I want to write the Serial message ti the DMD Disply
  dmd.selectFont(Arial_Black_16);

  // the text in the quotes in the next line will be scrolled across the display(s).
  // message writes the TEST message above, but I want it to write serIn variable (serial data)
  dmd.drawMarquee(message,strlen(message),(32*DISPLAYS_ACROSS)-1,0);

  // THIS IS WHAT I WANT, but I get this error "invalid conversion from 'char' to 'const char*'"
  //dmd.drawMarquee(serIn,strlen(serIn),(32*DISPLAYS_ACROSS)-1,0);

  long start=millis();
  long timer=start;
  boolean ret=false;
  while(!ret){
    if ((timer+30) < millis()) {
      ret=dmd.stepMarquee(-1,0);
      timer=millis();
    }
  }     
  delay(100);
} 
```

我一直遇到的错误是`dmd.drawMarquee()`将第一个参数作为字符串，而且我对 C++ 一无所知，所以我认为我搞砸了数据类型。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T16:15:36.460

因此，虽然我担心串行读数如何与显示驱动混合在一起，但您可以通过以下方式将串行读数更改为以字符串形式读取：

串口读取部分：

```
if(Serial.available()) {    
...
} 
```

只是阅读单个字符。您需要将它们存储在缓冲区中。

改变：

```
char serIn; //var that will hold the bytes in read from the serialBuffer 
```

至：

```
char serIn[40]; //buffer that will hold the bytes in read from the serialBuffer 
```

然后是串行循环：

```
if(Serial.available()) {  
    int chars_in = 0;
    //keep reading and printing from serial untill there are bytes in the serial buffer
    while (Serial.available()>0 && chars_in<39){
        serIn[chars_in] = Serial.read();    //read Serial   
        Serial.write( byte(serIn[chars_in]));
        chars_in++;
    }
    serIn[chars_in] = 0;
    //the serial buffer is over just go to the line (or pass your favorite stop char)               
    Serial.println();
} 
```