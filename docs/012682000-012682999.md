# StackOverflow 问答 12682000-12682999

# jquery - 在 AJAX 加载后为 DOM 元素提供焦点

> ID：12682002
> 
> 赞同：0
> 
> 时间：2012-10-01T22:26:38.380
> 
> 标签：jquery, ajax

我正在通过 AJAX 加载表单......我有我认为是一个成功的 jQuery 语句，但它什么也没做：

```
$("#input_form_container").loadActionTemplate()
                          .find ('.form-focus:first').focus(); 
```

loadActionTemplate 是我创建的用于加载表单的函数。它确实加载了表单，然后返回对“this”的引用，以便链接可以继续。目标元素是一个文本输入字段，如下所示：

```
<input class="span1 form-focus" id="min-duration" name="min-duration" size="16" type="text"> 
```

笔记：

*   如果我在加载后进入调试器，则运行此脚本（因此在加载模板之后）并运行“jQuery（”#input_form_container“）.find（'.form-focus：first'）.focus（）;” 从调试器中，它通过突出显示字段并返回 DOM 引用以供将来链接，就像一个魅力
*   如果我输入：

    jQuery("#input_form_container").loadActionTemplate().find ('.form-focus:first').focus();

    直接进入调试器，它会重新加载模板并返回对正确 DOM 元素的引用，但未获得焦点

*   绝望中，我尝试在 focus() 调用之前插入一个 delay(500) ，但这不是必需的，也没有解决问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:47:55.187

正如@Andreas 指出的那样，AJAX 毕竟是异步的。我自欺欺人地相信我以某种方式构建的 jQuery 链只会在 AJAX 回调的 success() 条件下触发。为什么我认为这只能归咎于睡眠不足、无法获得高质量的咖啡因和/或安非他明。无论如何，为了分享解决方案，这是我的“loadActionTemplate”jQuery 扩展：

```
$.fn.extend({
    // loadActionTemplate plugin
    loadActionTemplate: function(options) {
        //default settings
        var defaults = {
            actionDOM : '#do_something_dropdown',
            cache : true
        }
        // store the "this" state for safe keeping
        var domElements = $(this);
        // merge user options into default
        var options = $.extend(defaults, options);
        // assign the "action" to an easily addressible variable
        var action = $(options.actionDOM).val();
        // get the HTML form template for this action
        LG_ServiceCall ( 'get-action-template' , {'action' : action} , function( r ) {
            var res = JSON.parse ( r );
            var template = res.results.template;
            // iterate through all matched DOM instances
            return domElements.each(function() {
                // get handle on DOM object operating on
                var element = $(this);
                element.html( template );
                element.find('.form-focus:first').focus();
            })
        });
        return domElements; // allows the function to operate in a chain
    }
}); 
```

LG_ServiceCall 方法无需过多详细说明，它采用三个参数：

```
function LG_ServiceCall( $service , $options , $callback ); 
```

传入第三个参数的回调函数在调用 AJAX.success() 方法时被调用：

```
requestObj.success = function (r) {
    console.log ("Successful AJAX Call ( " + JSON.stringify (r) + ")");
    callback (r);
} 
```

# list - dozer - 将列表中的对象属性映射到数组

> ID：12682005
> 
> 赞同：1
> 
> 时间：2012-10-01T22:26:54.543
> 
> 标签：list, dozer

我试图将列表中对象内的属性映射到数组，我想知道是否可以在没有自定义转换器的情况下执行此操作。

```
public class Kid(){
    List<Toy> toys;
}
public class Toy(){
     String name;
     String brand;
}
public class ConvertedKid(){
    String[] toysNames;
} 
```

在 mapper.map(aKid, ConvertedKid.class) 之后，我希望将 convertKid.toysNames 作为一个字符串数组，仅包含其名称。

谁能帮我这个？谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:36:59.343

正如您所说，您可以使用自定义转换器来完成。

我发现的另一个解决方案是**覆盖 Toy 的 toString() 方法**。

**玩具类**

```
public class Toy{
  String name;
  String brand;

  // getters and setters ...

  @Override
  public String toString() {
    return this.name;
  }
} 
```

**映射**

```
 <mapping>
    <class-a>xxx.xxx.Kid</class-a>
    <class-b>xxx.xxx.ConvertedKid</class-b>
      <field>
    <a>toys</a>
    <b>toysNames</b>
      </field>
  </mapping> 
```

我测试了它。有用。

# maven - 为每个 maven 子模块指定 jdk - 如果使用错误，则构建失败

> ID：12682009
> 
> 赞同：2
> 
> 时间：2012-10-01T22:27:14.563
> 
> 标签：maven, java

使用 maven-compiler-plugin 可以为项目指定支持的 jdk：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.5</source>
                <target>1.5</target>
                <showDeprecation>true</showDeprecation>
                <showWarnings>true</showWarnings>

                <fork>true</fork>
                <!-- <executable>path-to-javac</executable> -->
                <compilerVersion>1.5</compilerVersion>
            </configuration>
        </plugin> 
```

但是，如果使用另一个版本的 JDK，是否有可能导致构建失败？

我有一些使用**javax.xml.bind.annotation.adapters**的代码，它不是 1.5 的一部分，但是由于我使用包含此包的 JDK6 构建，因此构建成功。

在 Eclipse 中，我收到警告，但如果不显式修改构建项目时使用的 JDK，使构建失败可能会很好。

我试过这个：

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-enforcer-plugin</artifactId>
    <version>1.1.1</version>
    <executions>
      <execution>
        <id>enforce-versions</id>
        <goals>
          <goal>enforce</goal>
        </goals>
        <configuration>
          <rules>
            <requireJavaVersion>
              <version>1.5</version>
            </requireJavaVersion>
          </rules>
        </configuration>
      </execution>
    </executions>
  </plugin> 
```

但它什么也没做。我也尝试过插件管理：

```
 <plugin>
      <groupId>org.eclipse.m2e</groupId>
      <artifactId>lifecycle-mapping</artifactId>
      <version>1.0.0</version>
      <configuration>
        <lifecycleMappingMetadata>
          <pluginExecutions>
            <pluginExecution>
              <pluginExecutionFilter>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-enforcer-plugin</artifactId>
                <versionRange>[1.0,)</versionRange>
                <goals>
                  <goal>enforce</goal>
                </goals>
              </pluginExecutionFilter>
              <action>
                <ignore></ignore>
              </action>
            </pluginExecution>
          </pluginExecutions>
        </lifecycleMappingMetadata>
      </configuration>
    </plugin> 
```

但也没有效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:47:00.850

`maven-enforcer-plugin`如果您更改`<version/>`标签，将会失败。

[Maven 版本范围规范](http://maven.apache.org/enforcer/enforcer-rules/versionRanges.html)将告诉您如何指定版本范围。

```
<version>1.5</version> 
```

将意味着`version >= 1.5`

你应该声明

```
<version>[1.5]</version> 
```

这意味着`version == 1.5`如果您使用 1.6 版的 JDK，那么执行器将无法构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-29T15:14:39.140

尝试使用

```
<properties>
    <maven.compiler.target>1.7</maven.compiler.target>
    <maven.compiler.source>1.7</maven.compiler.source>
    <maven.test.skip>true</maven.test.skip>
</properties> 
```

# php - 忽略重新定义的属性 xml

> ID：12682024
> 
> 赞同：0
> 
> 时间：2012-10-01T22:28:52.220
> 
> 标签：php, xml, dom

我有一个 xml 文件，有时一个元素包含一个相乘的属性（不是 ID），并且他具有相同的值，如下所示：

```
<names>
   <name attribute="abc"  attribute="abc" />
</names> 
```

我知道这是一个错误的写作，所以当我使用以下代码读取 Php 文件时，我想忽略该错误：

```
 $xmlDoc->load( 'file.xml' ); 
```

这是可能的 ？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T22:39:01.207

加载时传递一些选项：

```
$xmlDoc->load('file.xml', LIBXML_NOERROR | LIBXML_NOWARNING); 
```

和标准[http://www.php.net/manual/de/function.libxml-use-internal-errors.php](http://www.php.net/manual/de/function.libxml-use-internal-errors.php)

# c# - 将字符串解析为可为空的数字类型（1 或 2 行）

> ID：12682025
> 
> 赞同：26
> 
> 时间：2012-10-01T22:29:01.133
> 
> 标签：c#, .net

**设想**

将字符串解析为可为空的数值类型。如果解析不成功，结果应该为空；否则结果应该是解析后的值。

**问题**

为了做到这一点，我一直使用以下简单但冗长烦人的方法：

```
string numericString = "...";

decimal? numericValue;
decimal temp;
if (decimal.TryParse(numericString, out temp))
{
    numericValue = temp;
}
else
{
    numericValue = null;
} 
```

我使用上述方法是因为**以下内容无法编译**：

```
decimal temp;
decimal? numericValue = decimal.TryParse(numericString, out temp) ? temp : null; 
```

有人知道第一个代码的版本和第二个代码一样短、整洁和可读吗？我知道我总是可以编写一个封装第一部分代码的扩展方法，但我想知道是否有任何方法可以在没有扩展方法的情况下做我想做的事情。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-10-01T22:32:50.177

一种简单的显式类型转换使其可编译：

```
decimal temp;
// typecast either 'temp' or 'null'
decimal? numericValue =
  decimal.TryParse(numericString, out temp) ? temp : (decimal?)null; 
```

另一种选择是`default`在所需的可空类型上使用运算符：

```
decimal temp;
// replace null with default
decimal? numericValue =
  decimal.TryParse(numericString, out temp) ? temp : default(decimal?); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-01T22:33:04.210

我会做这样的事情：

```
public delegate bool TryParseDelegate<T>(string str, out T value);

public static T? TryParseOrNull<T>(TryParseDelegate<T> parse, string str) where T : struct
{
    T value;
    return parse(str, out value) ? value : (T?)null;
}

decimal? numericValue = TryParseOrNull<decimal>(decimal.TryParse, numericString); 
```

或者您可以将其设为扩展方法：

```
public static T? TryParseAs<T>(this string str, TryParseDelegate<T> parse) where T : struct
{
    T value;
    return parse(str, out value) ? value : (T?)null;
}

decimal? numericValue = numericString.TryParseAs<decimal>(decimal.TryParse); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-01T22:34:10.600

只需将其分解为扩展方法：

```
public static decimal? ParseDecimal(this string s)
{
    decimal d;
    if (decimal.TryParse(s, out d))
        return d;
    return null;
} 
```

然后你可以像这样使用它：

```
numericValue = numericString.TryParseDecimal(); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-01T22:34:52.567

怎么样：

```
decimal? numericValue = 
    decimal.TryParse(numericString, out temp) ? temp : null as decimal?; 
```

如果强制转换失败，这会生成 numericValue `null`，并且非常干净。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-01T22:40:12.190

问题是 temp 是小数，而 null...为 null。因为它们不是同一类型，所以两者之间的比较失败并出现错误。

尝试：

```
decimal? numericValue = decimal.TryParse(numericString, out temp) ? (decimal?)temp : null; 
```

或者

```
decimal? numericValue = decimal.TryParse(numericString, out temp) ? (decimal?)temp : (decimal?)null; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-01T23:03:58.367

我认为您应该将其包装在一种方法中以提高可读性：

```
private decimal? ParseOrDefault(string decimalAsString, decimal? defaultIfInvalidString=null)
{
    decimal result;
    if (decimal.TryParse(decimalAsString, out result))
        return result;
    return defaultIfInvalidString;
}

[Test]
public void ParseOrDefaultTest()
{
    decimal? actual = ParseOrDefault("12", null);
    Assert.AreEqual(12m,actual);

    actual = ParseOrDefault("Invalid string", null);
    Assert.AreEqual(null, actual);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-20T12:12:13.200

十进制？weight = decimal.TryParse(weightEditText.Text, out var tempWeight) ？tempWeight：默认（十进制？）

# jquery - 如何在 TypeScript 中获得 jQuery 自动完成功能？

> ID：12682028
> 
> 赞同：95
> 
> 时间：2012-10-01T22:29:22.440
> 
> 标签：jquery, typescript

如果我在 TypeScript .ts 文件中工作，当我键入 $ 字符时，我该怎么做才能获得 jQuery 智能感知/自动完成功能？

（我在 VS 2012 的 ASP.NET MVC 3 项目中工作。）

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-10-01T22:46:22.953

您需要在`.ts`文件顶部添加对 jQuery 定义的引用。

```
/// <reference path="jquery.d.ts" /> 
```

[您可以在此示例](http://typescript.codeplex.com/SourceControl/changeset/view/d397c54a55db#samples/jquery/jquery.d.ts)中找到 jQuery 的类型注释。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-11-09T12:56:22.210

查看 TypeScript 的这些类型定义：[https](https://github.com/borisyankov/DefinitelyTyped#readme) ://github.com/borisyankov/DefinitelyTyped#readme 。它们会定期更新，并且比示例中的更完整。在 Nuget 上：[http ://www.nuget.org/profiles/DefinitelyTyped/](http://www.nuget.org/profiles/DefinitelyTyped/)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-10-01T22:46:24.747

为此需要设置的事项清单：

1.  确保安装了 TypeScript 扩展。检查工具 -> 扩展管理器并确保已安装“TypeScript for Microsoft Visual Studio”扩展。如果不是，请运行 TypeScript 文件夹 (Program Files\Microsoft SDKs\TypeScript\<version>) 中的 .vsix 文件来安装扩展。

2.  确保您的文件引用 jquery.d.ts 文件。您应该在文件顶部/附近有一条评论，如下所示：

> /// <reference path="the/path/to/jquery.d.ts" />

[如果您需要下载它，您可以在http://www.typescriptlang.org/Samples/](http://www.typescriptlang.org/Samples/)上找到 jquery.d.ts 文件作为 Warship 示例的一部分

# backbone.js - Underscore.js - Uncaught ReferenceError: x is not defined

> ID：12682031
> 
> 赞同：0
> 
> 时间：2012-10-01T22:29:39.583
> 
> 标签：backbone.js, requirejs, underscore.js

当我的脚本尝试渲染模板时，我不断收到这个 Uncaught ReferenceError: x is not defined 错误。该脚本使用了backbone.js、require.js、underscore.js 和jquery.js 的组合。我花了一天时间尝试在线调试和搜索答案。有人知道发生了什么吗？

代码：

```
define([
    'jQuery',
    'Underscore',
    'Backbone',
    'text!templates/sharingFactory.html'
], function($, _, Backbone, SharingFactoryTemplate) {
    console.log('in SharingFactoryItemView');
    var SharingFactoryItemView = Backbone.View.extend({
        tagName: "span",
        initialize: function() {
            console.log('in initialize');
            this.template = _.template(SharingFactoryTemplate);
            console.log(this);
            this.render();
        },
        render: function () {
            console.log('in render');
            var data = this.model.toJSON();
            console.log(data);
            this.$el.html(this.template(data));
            return this;
        }
    });

    return SharingFactoryItemView; 
}); 
```

控制台日志：

```
in initialize SharingFactoryItemView.js:14
child
 SharingFactoryItemView.js:16
in render SharingFactoryItemView.js:20
Object
 SharingFactoryItemView.js:22
Uncaught ReferenceError: x is not defined 
```

# regex - 在同一行中多次替换模式

> ID：12682035
> 
> 赞同：1
> 
> 时间：2012-10-01T22:30:08.770
> 
> 标签：regex, sed, preg-replace, replace

我正在尝试使用正则表达式搜索/替换来`$foo`用大括号（例如；）封装变量（例如；`${foo}`）。我想出了以下正则表达式，但它没有按预期工作：

```
s/"\([^"]*\)\$\([a-zA-Z0-9:]*\)\([^"]*\)"/"\1\${\2}\3"/g 
```

但是，我对这种模式有一些问题。每个引用的字符串只会执行一种模式。这没关系，因为我可以在文件上多次运行表达式，但它不处理已经封装在大括号中的变量。它只是在他们身上放了第二套牙套。

我现在的想法是`\2`去掉大括号，但我认为这不会起作用，因为模式仍然会匹配，并且每个引用的字符串只会执行 1 次替换。我查看了反向引用表达式文档，但无法确定更好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T23:07:47.263

尝试以下操作：

```
sed -e ':loop' -e 's/"\([^"]*\)\$\([a-zA-Z0-9:]\{1,\}\)\([^"]*\)"/"\1\${\2}\3"/' -e 't loop' 
```

这会将搜索/替换放入一个循环中，以便它将在每一行上重复尝试替换，直到无法进行更多替换。

这是有效的，因为当前正在处理的行仅在没有更多命令要运行时打印，`:loop`创建一个名为 的标签`loop`，并且只有在成功替换时才`t loop`将执行返回到该标签。`loop`

正如 potong 在评论中提到的，这可能会在带有多个引号的行上产生一些奇怪的行为，这是一种在这些情况下应该可以正常工作的替代方案：

```
sed -e ':loop' -e 's/^\([^"]*\("[^"]*"[^"]*\)*\)"\([^"]*\)\$\([a-zA-Z0-9:]\{1,\}\)\([^"]*\)"/\1"\3\${\4}\5"/' -e 't loop' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T08:58:12.270

这可能对您有用（GNU sed）：

```
echo 'a "$a" b $b "b $b b $b" $c c $c "$c c $c"' | 
sed 's/"\([^"]*\)"/"\n\1\n"/g;:a;s/\n\n//;ta;s/\n\$\([a-zA-Z0-9:]\+\)/${\1\}\n/;ta;s/\n\(.\)/\1\n/;ta'
a "${a}" b $b "b ${b} b ${b}" $c c $c "${c} c ${c}" 
```

# maven - 组装插件组装模块依赖项不是完整的项目依赖项

> ID：12682036
> 
> 赞同：0
> 
> 时间：2012-10-01T22:30:17.843
> 
> 标签：maven, maven-assembly-plugin

基本上我有一个具有这种结构和依赖关系的多模块项目

```
pom - With dependencies with scope provided
  + ---- mod1 - with mod1 dependencies
          + -----  depends on libAAA
          + ------ depends on libBBB
  + ---- mod2 - with mod2 dependencies
          + -----  depends on libXXX
          + ------ depends on libYYY 
```

组装（使用 maven-assembly-plugin）预计如下所示：

```
bin/lib      - Contains all provided dependencies
bin/mod1/    - Contains mod1 artifact
bin/mod1/lib - Contains mod1 dependencies (only mod1) 
bin/mod2/    - Contains mod2 artifact
bin/mod2/lib - Contains mod2 dependencies (only mod2) 
```

一切都“几乎”按预期工作，但所有项目依赖项都被复制到 mod1/lib 和 mod2/lib，因此生成的程序集看起来像这样

```
bin/mod1/lib
bin/mod2/lib
   BOTH containing libAAA, libBBB, libXXX, libYYY 
```

我期望得到的是：

```
bin/mod1/lib
    containing libAAA, libBBB
bin/mod2/lib
    containing libXXX, libYYY 
```

有人知道是否可以在不使用过滤器的情况下在每个目录上复制“隔离”（不确定使用什么词）模块依赖项？

在此先感谢，托尼奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:27:44.197

我正在添加程序集描述符。

这个描述符设置在一个称为分发的“pom”模块中，如多模块项目的 maven-assembly-plugin 文档中所述。

我尝试生成 2 个 moduleSet 而不是一个，每个模块一个，结果与上述相同。

下面是 XML 和 pom 配置：

* * *

```
 <?xml version="1.0" encoding="UTF-8"?>
    <assembly
        xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">
        <id>bin</id>

        <formats>
            <format>dir</format>
            <format>jar</format>
        </formats>

        <includeBaseDirectory>true</includeBaseDirectory>
        <baseDirectory>basic-modules</baseDirectory>

        <dependencySets>
            <dependencySet>
                <unpack>false</unpack>
                <scope>provided</scope>
                <outputDirectory>lib</outputDirectory>
                <excludes>
                    <exclude>*:payment-api</exclude>
                </excludes>
            </dependencySet>
        </dependencySets>

        <moduleSets>
            <moduleSet>

                <!-- Enable access to all projects in the current multimodule build! -->
                <useAllReactorProjects>true</useAllReactorProjects>

                <!-- Now, select which projects to include in this module-set. -->
                <includes>
                    <include>*:paypal-payment</include>
                    <include>*:moneris-payment</include>
                </includes>

                <binaries>
                    <outputDirectory>${module.artifactId}</outputDirectory>
                    <outputFileNameMapping>${module.artifactId}.${module.extension}</outputFileNameMapping>
                    <unpack>false</unpack>
                    <dependencySets>
                        <dependencySet>
                            <unpack>false</unpack>
                            <scope>runtime</scope>
                            <outputDirectory>${module.artifactId}/lib</outputDirectory>
                        </dependencySet>
                    </dependencySets>
                </binaries>
            </moduleSet>

        </moduleSets>
    </assembly> 
```

* * *

```
 <build>
        <plugins>
            <plugin>
                <artifactId>maven-assembly-plugin</artifactId>
                <executions>
                    <execution>
                        <id>distro-assembly</id>
                        <phase>package</phase>
                        <goals>
                            <goal>single</goal>
                        </goals>
                        <configuration>
                            <finalName>basic-modules-${pom.version}</finalName>
                            <appendAssemblyId>false</appendAssemblyId>
                            <descriptor>assembly.xml</descriptor>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build> 
```

# php - 如何从 Twitter 实体获得直接的 Instagram 链接？

> ID：12682039
> 
> 赞同：11
> 
> 时间：2012-10-01T22:31:11.473
> 
> 标签：php, javascript, instagram

我有一个推特供稿，我可以在推文中找到 Instagram 网址。

```
{
    indices: [
        90,
        110
    ],
    url: "http://t.co/kF9EXifn",
    expanded_url: "http://instagr.am/p/QC8hWKL_4K/",
    display_url: "instagr.am/p/QC8hWKL_4K/"
} 
```

我需要的是从该对象“http://instagr.am/p/QC8hWKL_4K/”中获取扩展的 url，并获取指向图像本身的链接，而不是 Instagram 网站上的图像*。*有谁知道该怎么做？我什至可以从 url 派生那个链接吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-02T02:21:33.630

您可以通过附加`/media/`到 URL 来获取图像。使用您的示例：http: [//instagr.am/p/QC8hWKL_4K/media/](http://instagr.am/p/QC8hWKL_4K/media/)。

您甚至可以指定尺寸，

> t（缩略图）、m（中）、l（大）之一。默认为 m。

所以对于缩略图： http: [//instagr.am/p/QC8hWKL_4K/media/ ?size=t](http://instagr.am/p/QC8hWKL_4K/media/?size=t)

文档[在这里](http://instagram.com/developer/embedding/)。

# css - 尝试ajax请求时出现Spring HTTP 405

> ID：12682044
> 
> 赞同：1
> 
> 时间：2012-10-01T22:31:25.357
> 
> 标签：css, jquery, spring-mvc

我认为这是一个非常特定于 JSP 和 CSS 的 stange 问题。我正在使用 Spring 和 jquery 将 ajax 请求发布到服务器。在我的 JSP 中，如果我有以下行 -

```
<button class="btn-icon btn-small btn-grey btn-cross" onClick="delete('${ManagerVO.ContactInfoVO.branchId}');"><span>&#160;</span>Delete</button> 
```

我的代码执行了操作，但最后我得到了 HTTP 405 - Request method 'POST' not supported 错误。现在，如果我将上面的行更改为 -

```
<input type="button" class="btn-icon btn-small btn-grey btn-cross" onClick="delete('${ManagerVO.ContactInfoVO.branchId}');"><span>&#160;</span>Delete</input> 
```

代码工作得很好。jQuery代码是

```
function delete(Id) { $.ajax({
                    type: "POST",
                    url: "/XXX/XXX/XXX/delete",
                    data: "Id=" + Id,
                    success: function(errorVO){
                            alert(errorVO.errorText);                                           
                      },
                      error: function(e){
                          alert('Error, Please try later: ' + e);
                    }});} 
```

控制器是 -

```
@RequestMapping(value = "/delete", method = RequestMethod.POST)
    public @ResponseBody
    ResultVO delete(
            @RequestParam(value = "Id", required = true) String Id,
            Model model) {
        ResultVO resultVO = adminService.XXX(Id);
        return resultVO;
    } 
```

有人可以让我知道如何解决这个问题。我想这更像是一个CSS的东西。firebug 告诉我，crome 应用的默认用户代理 css 是 input type="button"。按钮 CSS 如下 -

```
.btn-icon
{
    background-repeat: repeat-x;
    color: #FFF;    
    font-weight: bold;
    display: inline-block;  
    text-decoration: none;
    border-width: 1px;
    border-style: solid;
    padding: 0 15px 4px;
    *padding: 0 7px 4px;
    margin: 0;
    text-shadow: 1px 1px 1px rgba(0,0,0,.2);
    -moz-box-shadow: 1px 1px 1px rgba(0,0,0,.25);
    -webkit-box-shadow: 1px 1px 1px rgba(0,0,0,.25);
    -moz-border-radius: 4px;
    -webkit-border-radius: 4px;
    filter: progid:DXImageTransform.Microsoft.Shadow(color=#999999,direction=135,strength=2);
    cursor: pointer;
    position: relative;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:06:26.460

我想知道该`input`版本是否正在提交表单（所以您看不到 AJAX 错误）。

尝试将`onClick`两个版本（输入和按钮）的属性更改为：

`onClick="delete('${ManagerVO.ContactInfoVO.branchId}'); return false;"`

看看会发生什么。

# git - git status -> 显示将在子目录中添加（暂存）的文件

> ID：12682045
> 
> 赞同：111
> 
> 时间：2012-10-01T22:31:31.493
> 
> 标签：git, version-control

假设我在一个文件夹中启动了一个 git 存储库，并且其中有几个子目录。

我有几个 globbing 模式`.gitignore`来排除子目录中的文件。但是，当我在暂存`git status` **任何内容之前**执行此操作时，git status 仅显示将要添加的子文件夹的名称，而没有具体说明如果我这样做，将添加（暂存）每个子目录中的哪些文件`git add .`。

不过有趣`git status`的是**，**在我使用`git add .`.

无论如何要求`git status`明确有关将要**上演**的文件的文件？

* * *

## 回答 #1

> 赞同：177
> 
> 时间：2012-10-02T00:56:25.900

尝试：

```
git status -u 
```

或长格式：

```
git status --untracked-files 
```

这将显示未跟踪目录中的单个文件。

[以下是git-status 手册页](http://schacon.github.com/git/git-status.html)`-u`中选项的详细说明：

> `-u[<mode>]`
> `--untracked-files[=<mode>]`
> 
> 显示未跟踪的文件。
> 
> mode 参数是可选的（默认为`all`），用于指定对未跟踪文件的处理；`-u`不使用时，默认为`normal`，即显示未跟踪的文件和目录。
> 
> 可能的选项是：
> 
> *   `no`- 不显示未跟踪的文件
> *   `normal`- 显示未跟踪的文件和目录
> *   `all`- 还显示未跟踪目录中的单个文件。
> 
> [可以使用git-config(1)](http://schacon.github.io/git/git-config.html)`status.showUntrackedFiles`中记录的配置变量更改默认值。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2019-02-12T09:10:18.113

你可以简单地使用

```
git add --dry-run . 
```

在存储库的根目录中，它为您提供了在考虑`.gitignore`.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-10-05T14:21:54.700

> [`git ls-files -o --exclude-standard`](https://www.kernel.org/pub/software/scm/git/docs/git-ls-files.html)

工作树中未暂存 ( `-o`) 且不会被`git add`( `--exclude-standard`) 忽略的每条路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T23:03:42.917

如何将`.gitignore`文件放在子目录中而不是沿着

```
# Ignore everything in this directory
*
# Except these file
!.gitignore
!file1
!file2
!file3 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-03T20:39:18.850

很有可能是由于行结束。解决方案：

```
git config --global core.autocrlf true 
```

但不要只运行这个命令，在执行它之前验证。使用`git diff`，如果大多数文件显示没有差异，这是由于行结束。好好利用它。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-02-12T09:20:38.213

使用 git 命令 git ls-files -o 列出未跟踪的文件

相反 -o 使用 -c --cached 在输出中显示缓存文件（默认）

-d --deleted 在输出中显示已删除的文件

-m --modified 在输出中显示修改过的文件

# powershell - 使用 powershell 更新 Active Directory 时找不到位置参数错误

> ID：12682046
> 
> 赞同：1
> 
> 时间：2012-10-01T22:31:31.493
> 
> 标签：powershell, csv, active-directory

我正在尝试使用 CSV 更新 Active Directory 用户条目。当我运行它时，我收到以下错误，我不明白为什么。包含帐户名称的列不为空。

```
 Set-ADUser : A positional parameter cannot be found that accepts argument '$null'.
At line:2 char:11
+ Set-ADUSer <<<<  -Identity $_.sAMAccountName`
    + CategoryInfo          : InvalidArgument: (:) [Set-ADUser], ParameterBindingException
    + FullyQualifiedErrorId : PositionalParameterNotFound,Microsoft.ActiveDirectory.Management.Commands.SetADUser

(repeat for each row in the CSV) 
```

这是我现有的更新脚本：

```
Import-Module ActiveDirectory
$userList = Import-Csv '.\UpdatedUserInfo.csv'

$userList|Foreach{
Set-ADUSer -Identity $_.sAMAccountName`
-givenName = $user.givenName`
-initials = $user.initials`
-sn = $user.sn`
-cn = $user.name`
-displayName = $user.displayName`
-department = $user.department`
-telephoneNumber = $user.telephoneNumber`
-facsimileTelephoneNumber = $user.facsimileTelephoneNumber`
-mobile = $user.mobile`
-homePhone = $user.homePhone`
-company = $user.Company`
-physicalDeliveryOfficeName = $user.physicalDeliveryOfficeName`
-streetAddress = $user.streetAddress`
-l = $user.l`
-postOfficeBox = $user.postOfficeBox`
-state = $user.st`
-postalCode = $user.postalCode
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T01:40:44.797

从查看此 cmdlet 上的文档可以看出，您指定的参数不应`=`在参数名称和值之间使用。尝试摆脱所有`=`字符。

如果您确实有一个使用哈希表的参数，那么应该像这样指定该参数：

```
Set-ADUser -Replace @{name=_value_; name=_value_} 
```

# r - 在 R 中，是否有任何本机函数来获取矩阵的行或列，具体取决于参数？

> ID：12682049
> 
> 赞同：2
> 
> 时间：2012-10-01T22:32:28.353
> 
> 标签：r

我目前正在使用这个实现：

```
getVal = function(i, x, margin) {
    rst = ifelse(margin==1, x[i, ], x[, i])
} 
```

即返回x的第i行或列，取决于margin的值。

=== 更新 ===

刚刚意识到我`ifelse(x,y,z)`在这里使用语句是错误的，因为它返回的值与其第一个参数长度相同。我的实现`getVal`应该有：

```
...
rst = if (margin == 1) x[i, ] else x[, i]
... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T22:53:58.937

`abind::asub()`做一些非常像你想做的事情（并且也很好地推广到高维数组）。它的`idx`和`dims`论点分别对应于你的`i`和 `margin`论点。

```
library(abind)

(m <- matrix(1:6, ncol=2))
#      [,1] [,2]
# [1,]    1    4
# [2,]    2    5
# [3,]    3    6

asub(x = m, idx = 2, dims = 1)   # Extract 2nd row
# [1] 2 5

asub(x = m, idx = 2, dims = 2)   # Extract 2nd column
# [1] 4 5 6 
```

# javascript - `document.body.appendChild(elem);` 追加到 html 正文的末尾。如何放置在身体的特定位置？

> ID：12682053
> 
> 赞同：0
> 
> 时间：2012-10-01T22:32:36.063
> 
> 标签：javascript, html, dom

[以下代码](http://jsfiddle.net/r37yY/1/)`Hey girls!`在按下按钮时在段落之后创建一个文本输入字段`push`：

```
<html>
<head>
<script>
function func()
{
var elem=document.createElement("input");
document.body.appendChild(elem);
elem.setAttribute('type','text');
}
</script>
</head>
<body>
<p>Hey guys!<p>
<input type="button" value="push" onclick="func()"/>
<script>
func();
</script>
<p>Hey girls!<p>
</body>
</html> 
```

如何确保在段落之前和`Hey girls!`段落之后创建文本输入字段`Hey guys!`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:35:09.493

使用[`.insertBefore()`](https://developer.mozilla.org/en-US/docs/DOM/Node.insertBefore). 您只需要获得对“Hey Girls！”的引用即可。段落。在您的情况下，您可以选择正文中的第二段，或者可能是正文中唯一输入之后的元素 - 或者您使用 id。例子：

```
function func() {
    var elem = document.createElement("input");
    elem.setAttribute('type','text');
    var ps = document.getElementsByTagName("p");
    if (ps.length < 2)
        return; // abort! we didn't find our element
    var p = ps[1];      
    document.body.insertBefore(elem, p);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T22:35:41.043

那是一份工作`HTMLElement.prototype.insertBefore`。

概要：*parentElement.insertBefore(newElement, referenceElement);*

例子：

```
document.body.insertBefore( elem, document.getElementsByTagName('p')[1] ); 
```

由于此处的段落节点没有任何*ID*或*类名*，我只是用`.getElementsByTagName`. 如果您有更准确的查询可能性，将会使事情变得更容易。

参考：[https ://developer.mozilla.org/en-US/docs/DOM/Node.insertBefore](https://developer.mozilla.org/en-US/docs/DOM/Node.insertBefore)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T22:34:09.307

在特定的父元素上执行 appendChild，而不是在 body 上。

# visual-studio - 为什么“$(SolutionDir)”在 Visual Studio 2012 中不起作用？

> ID：12682056
> 
> 赞同：6
> 
> 时间：2012-10-01T22:33:05.687
> 
> 标签：visual-studio, asp.net-web-api

我有一个最初在 Visual Studio 2010 中构建的 .net 4 MVC Web Api 应用程序。作为该解决方案的一部分，我有一套单元测试。

我用以下内容装饰了单元测试方法

```
 [AspNetDevelopmentServerHost("$(SolutionDir)\\DataCollectionService", "/")] 
```

我的理解是“$(SolutionDir)”参数保存了解决方案目录的路径，并使测试套件更通用，因为它可以在多种环境中工作。这一切都在视觉工作室 2010 中运行良好。

但是，当我在 Visual Studio 2012 中打开项目并尝试运行测试套件时，出现以下错误

“消息：网站路径 '$(SolutionDir)\DataCollectionService' 不存在....”

如果我将其更改为确切的路径，例如

```
 [AspNetDevelopmentServerHost("D:\\CASLog\\Trunk\\DataCollectionService", "/")] 
```

它工作正常，虽然它不再是通用的。

我不确定它是否重要，但我的 Visual Studio 2010 有更清晰的效果，而我的 Visual Studio 2012 没有。

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T10:16:34.780

因为`$(SolutionDir)`实际上是一个宏。宏在 VS2012 中不再可用。一种解决方法是使用环境变量（自定义或 %PathToWebRoot%）。AspNetDevelopmentServerHost 支持环境变量。您可以使用 Environment.SetEnvironmentVariable 在 ClassInitializeAttribute 方法中设置值。

# javascript - 在 Firefox 15 中更改警告框字体大小

> ID：12682062
> 
> 赞同：1
> 
> 时间：2012-10-01T22:33:56.360
> 
> 标签：javascript, firefox

我有一个演示，我正在为高中生学习编码网站 ( [http://codeavengers.com/javascript](http://codeavengers.com/javascript) )，媒体在场。总理将在警报框中编写他的第一行代码，本质上是 hello world。

我想使用标准的 Firefox 警告框，但想显着增加字体大小，以便每个人都能看到。

有没有一种简单的方法（例如修改浏览器设置或配置文件）来增加标准警报框的字体大小。

如果这在 Firefox 中无法轻松完成，那么在 Chrome、Opera 或 Safari 中是否有简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:45:29.410

如果您使用 Windows 7，请按“win”+“+”调出放大镜。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T22:58:44.070

（抱歉，太长了，无法合理地留下评论。）

如果在第一节课左右，您*不需要*`window.alert`阻止，您可以用您自己的函数替换该函数`window.alert`以在浮动 div 中显示字符串。

我不知道怎么做这个块，所以它的用途有限。

要重写函数，您可以

*   在本地复制网页并引入一些您自己的 Javascript。

或者

*   使用用户脚本/GreaseMonkey 脚本替换该函数。

可能足以让你尖叫。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T23:00:20.137

有一些 Firefox 插件可让您更改系统字体。我使用[了 https://addons.mozilla.org/en-US/firefox/addon/theme-font-size-changer/?src=search](https://addons.mozilla.org/en-US/firefox/addon/theme-font-size-changer/?src=search)

# android - 当用户退出应用程序时，Android AlarmManager BroadcastReceiver 不起作用

> ID：12682064
> 
> 赞同：2
> 
> 时间：2012-10-01T22:34:00.650
> 
> 标签：android, broadcastreceiver, alarmmanager

我对应该对 AlarmManager 通知做出反应的 BroadcastReceiver 有一些问题。我已经阅读了有关此主题的多个主题，但找不到任何有用的东西。我肯定错过了什么。

我通过以下方式设置警报：

```
// Receiver intent
Intent intent = new Intent(mContext, CalendarAlarmReceiver.class);
intent.putExtra(CalendarAlarmReceiver.SHOW, show);
// Sender
PendingIntent sender = PendingIntent.getBroadcast(mContext, hashRequestCode(show), intent, PendingIntent.FLAG_UPDATE_CURRENT);
mPendingAlarmRequests.put(show.getChannel() + show.getName() + show.getStart().toGMTString(), sender);
// Get AlarmManager
AlarmManager am = (AlarmManager) mContext.getSystemService(Context.ALARM_SERVICE);
am.set(AlarmManager.RTC_WAKEUP, show.getStart().getTime(), sender); 
```

我创建了一个扩展 BroadcastReceiver 的 CalendarAlarmReceiver 类。在 onReceive() 方法中，我启动了一个状态栏通知，如果应用程序正在运行，它可以正常工作。但是，如果我通过单击后退按钮退出应用程序直到它关闭，通知将不再出现。

我不确定是否完全调用了接收器，只是通知不起作用，或者接收器没有被调用。

它在清单文件中注册：

```
<receiver android:name=".calendar.CalendarAlarmReceiver" >
</receiver> 
```

我读到这可能不是接收者的错误，而是应用程序停止时可能会取消警报。如果是这种情况，解决方案是否可以简单地在后台一直运行的服务中设置警报？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T03:02:19.590

警报由操作系统管理，通常不会在您的应用程序“退出”时清除。将一些日志记录在您的接收器中并观察 logcat 输出以了解它是否被调用。如果是，请调试您的通知代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T00:13:34.470

接收者应该有他们正在收听的广播的意图过滤器。正如 Nikolay 在下面的评论中提到的，如果您发送明确的意图，则没有必要这样做。所以记住这一点。

```
<receiver android:name=".calendar.CalendarAlarmReceiver">
    <intent-filter>
        <action android:name="REFRESH_THIS"/>
    </intent-filter>
</receiver> 
```

同样，您的意图代码应在发送时设置一个名为“REFRESH_THIS”的操作。

看看[这个](http://www.dotkam.com/2011/01/10/android-prefer-alarms-and-intent-receivers-to-services/)例子。它用很好的解释解释了整个过程。

# antlr - ANTLR中输入的增量解析

> ID：12682073
> 
> 赞同：2
> 
> 时间：2012-10-01T22:34:46.373
> 
> 标签：antlr

看来这可以通过提供 CharStream 的自定义实现来完成。但是，我们遇到了一个问题，因为调用了 substring 方法。它是从生成的解析器调用的 CommonToken.getText 调用的。我想也许我们可以缓冲回最新的标记调用，但它根本没有被调用。

那么，有没有一种直接的方法来确定一个人必须缓冲多远来处理未来的子字符串调用，或者有没有一种方法可以修改我们的词法分析器/解析器语法以某种方式获取字符串数据，而不涉及getText 调用，还是使用采用 String 而不是开始/结束对的构造函数构造 CommonToken？

# javascript - 无法从存在的 json 中获取值

> ID：12682076
> 
> 赞同：0
> 
> 时间：2012-10-01T22:34:58.283
> 
> 标签：javascript, json

我现在很困惑，就像真的很困惑：

得到了这个 javascript 对象：

```
{
    x: 0,
    y: 0,
    w: 28,
    h: 25,
    itemid: "5FE6E709096C4B57999AABC3575AF5D8",
    moveable: true,
    type: "4",
    fontface: "",
    text: "ef00704dd40e4768a1b15c14af9b6c4b.png",
    fontsize: 0,
    color: "",
    opacity: "",
    align: 0
}​ 
```

如果我做 console.log(theaboveobject); 它输出正常。

但是，如果我执行 console.log(object.w) 或 console.log(object.h) 我连续 2 晚得到 0 作为响应，这已经让我头疼了，发生了什么事，我错过了什么？

```
 console.log(artworkLine); // this outputs fine as above
    console.log(artworkLine.w);  // says 0
    console.log(artworkLine.h);  // says 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T22:50:24.650

这只是一个猜测，但我个人已经多次经历过类似的事情。

这是由浏览器如何解析对控制台中对象的引用引起的。它是在运行时通过单击它展开的那一刻完成的。很可能在那一刻，对象已经充满了所需的数据。

更多详情：http: [//felix-kling.de/blog/2011/08/18/inspecting-variables-in-javascript-consoles/](http://felix-kling.de/blog/2011/08/18/inspecting-variables-in-javascript-consoles/)

如果您尝试使用 js 调试器（即内置的 chrome 开发人员工具）并用`console.log(object);`- 换行，您将看到实际的对象值。

这个问题可以很容易地证明：

1.  打开[http://jsfiddle.net/8jzvd/](http://jsfiddle.net/8jzvd/)
2.  打开控制台
3.  按 jsfiddle 运行按钮
4.  等到`unfold`标签出现
5.  点击`Object`（假设您使用 google chrome 浏览器）
6.  您会看到具有`foo`指定属性的对象

现在重复相同的操作，但在第 4 步中，在标签出现**之前** 展开对象。`unfold`你会看到第 6 步的结果是不同的。

# android - Android - 自定义适配器 - 未调用 getView 方法

> ID：12682079
> 
> 赞同：2
> 
> 时间：2012-10-01T22:35:07.997
> 
> 标签：android, android-arrayadapter, listadapter

我有经典的 ListFragment 和 ListView （没有布局膨胀）。我正在通过 JSON 将“用户数据”从服务器下载到 Users.class 中的简单列表。我想用下载的数据填充自定义适配器，但它不起作用......下载很好，我的 Users.class 充满了用户，但是当我从 AsyncTaks 的 onPostExecute() 方法传递它来创建适配器并查看它时，getView() 方法是从来没有打电话。我已经实现了 getCount() 和 getId() 方法。如果我手动调用 getView()，convertView 对象在膨胀的布局和数据方面似乎很好......我在做什么错？谢谢你的帮助。

代码如下：Users.class

```
public class Users {

private List<User> listOfUsers;

public Users() {
    listOfUsers = new ArrayList<User>();
}

public void putUser(User user) {
    this.listOfUsers.add(user);
}

public List<User> getUsers() {
    return this.listOfUsers;
}

public void setUsers(List<User> users) {
    this.listOfUsers = users;
}

public int getUsersCount() {
    return this.listOfUsers.size();
}

public long getUserId(int pos) {
    return this.listOfUsers.get(pos).getId();
} 
```

}

AsyncTask 的代码如下：

```
public class GetUsers extends AsyncTask<Void, Long, Users> {

interface GetUsersIFace {
    void setAdapter(Users users);
}

private static String TAG = "GetUsers.class";

private Context context;
private GetUsersIFace fragment;

public GetUsers(Context context, GetUsersIFace fragment) {
    super();
    this.context = context;
    try {
        this.fragment = fragment;
    } catch (ClassCastException e) {
        Log.d(TAG, e.getMessage());
    }
}

@Override
protected Users doInBackground(Void... unused) {
    try {
        if (isOnline()) {
            InputStream input;
            if ((input = getInputStream()) != null) {
                return getJSON(input);
            }
        }
    } catch (IOException e) {
        Log.d(TAG, "Error while reading from server.");
        Log.d(TAG, e.getMessage());
    } catch (NullPointerException e) {
        Log.d(TAG, "Server not responding.");
        Log.d(TAG, e.getMessage());
    } catch (Exception e) {
        Log.d(TAG, "Uknown issue.");
        Log.d(TAG, e.getMessage());

    }
    return null;
}

@Override
protected void onPostExecute(Users users) {
    fragment.setAdapter(users);

}

public boolean isOnline() throws NullPointerException {
    ConnectivityManager mConnManager = (ConnectivityManager) context
            .getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = mConnManager.getActiveNetworkInfo();
    if (netInfo != null && netInfo.isConnectedOrConnecting()) {
        return true;
    } else {
        return false;
    }
}

private InputStream getInputStream() throws IOException {
    URL url = new URL("http://192.168.0.20/test.json");
    HttpURLConnection con = (HttpURLConnection) url.openConnection();
    InputStream input = new BufferedInputStream(con.getInputStream());
    return input;
}

private Users getJSON(InputStream input) {
    try {
        ObjectMapper mapper = new ObjectMapper();
        InputStreamReader reader = new InputStreamReader(input);
        Users users = mapper.readValue(reader, Users.class);
        return users;
    } catch (JsonParseException e) {
        Log.d(TAG, e.getMessage());
    } catch (JsonMappingException e) {
        Log.d(TAG, e.getMessage());
    } catch (IOException e) {
        Log.d(TAG, e.getMessage());
    }
    return null;
} 
```

}

ListFragment 的代码如下：

```
public class UsersListFragment extends ListFragment implements GetUsersIFace {

ListView mListView;
ArrayAdapter<User> mAdapter;
Activity attachedActivity;

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);
    this.attachedActivity = activity;
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    mListView = getListView();
    GetUsers task = new GetUsers(attachedActivity, this);
    task.execute();
}

static class UserAdapter extends ArrayAdapter<User> {

    private static class ViewHolder {
        TextView name, occupation, age;
        ImageView userimage;
    }

    LayoutInflater inflater;
    Users users;

    public UserAdapter(Context context, Users users) {
        super(context, R.layout.userslist_item);
        this.users = users;
        inflater = LayoutInflater.from(context);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        if (convertView == null) {
            ViewHolder holder = new ViewHolder();
            convertView = inflater.inflate(R.layout.userslist_item, parent,
                    false);
            holder.name = (TextView) convertView
                    .findViewById(R.id.username);
            holder.occupation = (TextView) convertView
                    .findViewById(R.id.useroccupation);
            holder.age = (TextView) convertView.findViewById(R.id.userage);
            holder.userimage = (ImageView) convertView
                    .findViewById(R.id.userfoto);
            convertView.setTag(holder);
        }
        ViewHolder holder = (ViewHolder) convertView.getTag();
        User user = users.getUsers().get(position);

        holder.name.setText(user.getName().toString());
        holder.occupation.setText(user.getOccupation());
        holder.age.setText(String.valueOf(user.getAge()));
        return convertView;
    }

    @Override
    public int getCount() {
        return users.getUsersCount();
    }

    @Override
    public long getItemId(int pos) {
        return users.getUserId(pos);
    }

}

public void setAdapter(Users users) {
    mAdapter = new UserAdapter(attachedActivity, users);
    setListAdapter(mAdapter);
    mAdapter.notifyDataSetChanged();
} 
```

}

User.class 的代码只是 getter 和 setter。

# c# - 在字符串中转义大括号 { 以支持 String.Format

> ID：12682081
> 
> 赞同：5
> 
> 时间：2012-10-01T22:35:11.993
> 
> 标签：c#, .net

我有从数据库中读取的字符串，这些字符串被输入 String.Format 方法，如果一个字符串有 '{' '}' 大括号，但这些大括号没有为 String.Format 正确转义（即添加另一个 '{' 到逃脱它们） String.Format 将引发异常。

字符串具有这些大括号的任意组合，因此本质上该方法需要遍历字符串并确定“{”是否有一个结束符，以及它们是否一起构成了 String.Format 的有效占位符（即 {5}） ，那些不需要正确转义的。

我可以编写一个方法来做到这一点，但想知道 .NET 中是否有任何内置的东西，或者已经有什么东西可以做到这一点？

字符串示例如下：

***您好{0}，请参阅我们的用户手册了解更多信息{或联系我们：XXXX}”***

**如您所知，将其输入 String.Format 将在{或联系我们：XXXX}**上引发异常

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T22:55:01.103

这个怎么样：

```
string input = "Hello {0}, please refer for more information {or contact us at: XXXX}";
   Regex rgx = new Regex("(\\{(?!\\d+})[^}]+})");
string replacement = "{$1}";
string result = rgx.Replace(input, replacement);

Console.WriteLine("String {0}", result);

// Hello {0}, please refer for more information {{or contact us at: XXXX}} 
```

...假设唯一不应该转义的字符串是 format `{\d+}`。

这里有两个警告。首先，我们可能会遇到已经转义的弯曲括号 - `{{`。修复它更容易：添加更多外观...

```
Regex rgx = new Regex("(\\{(?!\\d+})(?!\\{)(?<!\\{\\{)[^}]+})"); 
```

...换句话说，在尝试更换支架时，请确保它是一个单独的支架。)

其次，格式本身可能并不那么简单——随着字符串中实际存在的复杂性的增加，正则表达式的复杂性也会增加。例如，这个小野兽不会尝试修复以数字开头的格式字符串，然后一直到`}`符号之间没有任何空格：

```
Regex rgx = new Regex("(\\{(?!\\d\\S*})(?!\\{)(?<!\\{\\{)[^}]+})"); 
```

作为旁注，即使我是那些真正喜欢遇到两个问题的人之一（嗯，有点），当我看到这个时我确实不寒而栗。

**更新：**如果，正如你所说，你需要逃避每一次出现`{`and `}`，你的任务实际上更容易一些 - 但你需要在这里两次通过，我想：

```
Regex firstPass = new Regex("(\\{(?!\\d+[^} ]*}))");
string firstPassEscape = "{$1";
...
Regex secondPass        = new Regex("((?<!\\{\\d+[^} ]*)})");
string secondPassEscape = "$1}"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T22:46:15.713

是否可以为您的自定义处理工具使用不同的转义字符？因为你选择了一个已经被占用的！

如果不可能，那么另一种选择是在存储时将其转义。当 string.Format 结束时，它将自动取消转义。

```
var s = string.Format("Hello {0} please ... {{or contact}}", customer.Name );
// Now use s as needed 
// now is: "Hello Joe please ... {or contact}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T23:03:52.343

尝试：

```
myString = Regex.Replace(myString, @"\{(\D+)\}", "{{$1}}"); 
```**

# android - MVVMCross 在 MvxBindableListView 中更改 ViewModel

> ID：12682082
> 
> 赞同：8
> 
> 时间：2012-10-01T22:35:19.560
> 
> 标签：android, listview, xamarin.android, viewmodel, mvvmcross

我的 Android 应用程序小问题，我不知道如何使用 MVVM Cross 解决它。

这是我的模型

```
public class Article 
{
    string Label{ get; set; }
    string Remark { get; set; }
} 
```

我的视图模型

```
public class ArticleViewModel: MvxViewModel
{
    public List<Article> Articles;
    ....

} 
```

我的 layout.axml ...

```
 <LinearLayout
        android:layout_width="0dip"
        android:layout_weight="6"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:id="@+id/layoutArticleList">
        <EditText
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:id="@+id/editSearch"
            android:text=""
            android:singleLine="True"
            android:selectAllOnFocus="true"
            android:capitalize="characters"
            android:drawableLeft="@drawable/ic_search_24"
            local:MvxBind="{'Text':{'Path':'Filter','Mode':'TwoWay'}}"
            />
      <Mvx.MvxBindableListView
            android:id="@+id/listviewArticle"
            android:choiceMode="singleChoice"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" 
            local:MvxItemTemplate="@layout/article_rowlayout"
            local:MvxBind="{'ItemsSource':{'Path':'Articles'}}" />                
    </LinearLayout>
... 
```

我的问题来了，“article_rowlayout”

```
...
<TableRow
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@color/blue">
        <TextView
            android:id="@+id/rowArticleLabel"
            android:layout_width="0dip"
            android:layout_weight="14"
            android:layout_height="wrap_content"
            android:textSize="28dip"
            local:MvxBind="{'Text':{'Path':'Label'}}" />
        <ImageButton
            android:src="@drawable/ic_modify"
            android:layout_width="0dip"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:id="@+id/rowArticleButtonModify"
            android:background="@null" 
            android:focusable="false"
            android:clickable="true"    
            local:MvxBind="{'Click':{'Path':'MyTest'}}"
          />
... 
```

名为“MyTest”的“Click”命令链接在 MvxBindableListView 给出的项目上。换句话说，在我的模型“Article”而不是我的 ViewModel 中单击搜索命令“MyTest”。如何更改该行为以链接负责我的 MvxBindableListView 的 ViewModel“ArticleViewModel”？

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T07:00:29.983

您的分析对于单击事件尝试绑定的位置绝对正确。

我一般采取两种方法：

1.  使用项目单击列表
2.  继续使用 Click 但在 ViewModel 端进行一些重定向。

* * *

所以...1

教程中的[主菜单](https://github.com/slodge/MvvmCross/blob/master/Sample%20-%20Tutorial/Tutorial/Tutorial.Core/ViewModels/MainMenuViewModel.cs)有一个 ViewModel，有点像：

```
public class MainMenuViewModel
    : MvxViewModel
{
    public List<T> Items { get; set; }

    public IMvxCommand ShowItemCommand
    {
        get
        {
            return new MvxRelayCommand<T>((item) => /* do action with item */ );
        }
    }
} 
```

这在 axml 中用作：

```
<Mvx.MvxBindableListView
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:local="http://schemas.android.com/apk/res/Tutorial.UI.Droid"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    local:MvxBind="{'ItemsSource':{'Path':'Items'},'ItemClick':{'Path':'ShowItemCommand'}}"
    local:MvxItemTemplate="@layout/listitem_viewmodel"
  /> 
```

这种方法只能在整个列表项上的 ItemClick 上完成 - 而不是在列表项中的单个子视图上。

* * *

或者...2

由于我们在 mvx 中没有任何`RelativeSource`绑定指令，因此这种类型的重定向可以在 ViewModel/Model 代码中完成。

这可以通过提供模型对象的行为启用包装器而不是模型对象本身来完成 - 例如使用`List<ActiveArticle>`：

```
public ActiveArticle
{
   Article _article;
   ArticleViewModel _parent;

   public WrappedArticle(Article article, ArticleViewModel parent)
   {
       /* assignment */
   }

   public IMvxCommand TheCommand { get { return MvxRelayCommand(() -> _parent.DoStuff(_article)); } }

   public Article TheArticle { get { return _article; } } 
} 
```

然后，您的 axml 将不得不使用如下绑定：

```
 <TextView            ...
        local:MvxBind="{'Text':{'Path':'TheArticle.Label'}}" /> 
```

和

```
 <ImageButton
        ...
        local:MvxBind="{'Click':{'Path':'TheCommand.MyTest'}}" /> 
```

这种方法的一个例子是使用[WithCommand的 Conference 示例](https://github.com/slodge/MvvmCross/blob/master/Sample%20-%20CirriousConference/Cirrious.Conference.Core/ViewModels/Helpers/WithCommand.cs)

但是...请注意，在使用时`WithCommand<T>`我们发现了内存泄漏——基本上 GarbageCollection 拒绝收集嵌入的`MvxRelayCommand`内容——这就是`WithCommand<T>`为什么`IDisposable`BaseSessionListViewModel[清除](https://github.com/slodge/MvvmCross/blob/master/Sample%20-%20CirriousConference/Cirrious.Conference.Core/ViewModels/SessionLists/BaseSessionListViewModel.cs)列表并在分离视图时处理 WithCommand 元素的原因。

* * *

**评论后更新：**

如果您的数据列表很大 - 并且您的数据是固定的（您的文章是没有 PropertyChanged 的​​模型）并且您不想产生创建大型的开销，`List<WrappedArticle>`那么解决此问题的一种方法可能是使用一个`WrappingList<T>`类。

这与 Microsoft 代码中采用的方法非常相似 - 例如，在 WP7/Silverlight 中虚拟化列表 - [http://shawnoster.com/blog/post/Improving-ListBox-Performance-in-Silverlight-for-Windows-Phone-7 -数据虚拟化.aspx](http://shawnoster.com/blog/post/Improving-ListBox-Performance-in-Silverlight-for-Windows-Phone-7-Data-Virtualization.aspx)

对于您的文章，这可能是：

```
public class ArticleViewModel: MvxViewModel
{
    public WrappingList<Article> Articles;

    // normal members...
}

public class Article
{
    public string Label { get; set; }
    public string Remark { get; set; }
}

public class WrappingList<T> : IList<WrappingList<T>.Wrapped>
{
    public class Wrapped
    {
        public IMvxCommand Command1 { get; set; }
        public IMvxCommand Command2 { get; set; }
        public IMvxCommand Command3 { get; set; }
        public IMvxCommand Command4 { get; set; }
        public T TheItem { get; set; }
    }

    private readonly List<T> _realList;
    private readonly Action<T>[] _realAction1;
    private readonly Action<T>[] _realAction2;
    private readonly Action<T>[] _realAction3;
    private readonly Action<T>[] _realAction4;

    public WrappingList(List<T> realList, Action<T> realAction)
    {
        _realList = realList;
        _realAction = realAction;
    }

    private Wrapped Wrap(T item)
    {
        return new Wrapped()
            {
                Command1 = new MvxRelayCommand(() => _realAction1(item)),
                Command2 = new MvxRelayCommand(() => _realAction2(item)),
                Command3 = new MvxRelayCommand(() => _realAction3(item)),
                Command4 = new MvxRelayCommand(() => _realAction4(item)),
                TheItem = item
            };
    }

    #region Implementation of Key required methods

    public int Count { get { return _realList.Count; } }

    public Wrapped this[int index]
    {
        get { return Wrap(_realList[index]); }
        set { throw new NotImplementedException(); }
    }

    #endregion

    #region NonImplementation of other methods

    public IEnumerator<Wrapped> GetEnumerator()
    {
        throw new NotImplementedException();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }

    public void Add(Wrapped item)
    {
        throw new NotImplementedException();
    }

    public void Clear()
    {
        throw new NotImplementedException();
    }

    public bool Contains(Wrapped item)
    {
        throw new NotImplementedException();
    }

    public void CopyTo(Wrapped[] array, int arrayIndex)
    {
        throw new NotImplementedException();
    }

    public bool Remove(Wrapped item)
    {
        throw new NotImplementedException();
    }

    public bool IsReadOnly { get; private set; }

    #endregion

    #region Implementation of IList<DateFilter>

    public int IndexOf(Wrapped item)
    {
        throw new NotImplementedException();
    }

    public void Insert(int index, Wrapped item)
    {
        throw new NotImplementedException();
    }

    public void RemoveAt(int index)
    {
        throw new NotImplementedException();
    }

    #endregion
} 
```

# html - Outlook 转发 div 标签更改表

> ID：12682088
> 
> 赞同：1
> 
> 时间：2012-10-01T22:35:55.000
> 
> 标签：html, outlook

现在，我们正在尝试开发一个系统，供非技术销售人员将自动生成的 html 电子邮件转发给客户。不幸的是，在转发时，一个*div*标签被添加到表格中并弄乱了我们的格式。我们无法更改正在生成的电子邮件的 HTML，因此我们希望想出一种方法来配置 Excel 不添加标签。

需要说明的是，我们发现使用 Excel 的“重新发送”功能有效，但难以导航，并且将来需要支持。

# .net - EF4 无法将具体类型转换为接口

> ID：12682089
> 
> 赞同：5
> 
> 时间：2012-10-01T22:36:03.533
> 
> 标签：.net, entity-framework-4, linq-to-entities, polymorphism

使用 Entity Framework LINQ，我想为每个父表返回一个父类，并使用接口的多个具体实现之一在父类上填充一个类型为接口的属性。查询时根据父表中某个字段的值来确定具体的实现方式。

在一个非常简化的示例中，我有 3 个表和 3 个相应的 POCO。

**以简单的表格为例**

![三桌：师父和两个孩子](../Images/2f24d69811261f63b2ad9ba150be04b4.png)

**为了示例的简单类**

```
internal interface IConfiguration
{
}

internal class ConfigurationContainer
{
    public IConfiguration Config { get; set; }
}

internal class ConfigurationSouth : IConfiguration
{
}

internal class ConfigurationNorth : IConfiguration
{
} 
```

不幸的是，我遍历所有父结果并确定在循环内使用哪个子查询。像**这样的**块。

```
foreach (var configMaster in db.ConfigMasters.ToList())
{
    var configContainer = new ConfigurationContainer();
    if (configMaster.IsNorth)
        configContainer.Config = (from x in db.ConfigNorths
                          select new ConfigurationNorth())
                                      .FirstOrDefault();
    else
        configContainer.Config = (from x in db.ConfigSouths
                          select new ConfigurationSouth())
                                      .FirstOrDefault();
} 
```

循环遍历每个父记录以执行子查询并不是最优的。我真的很希望 EF LINQ 在一次访问数据库中执行查询以及对我的 POCO 进行预测。

我想出了这个 LINQ 来一次查询数据库并返回投影对象，这样 Config 属性将在查询时由两个子查询之一填充。虽然它可以编译，但它会在运行时引发异常。

```
using (var db = new Entities())
{
    var qry = from cfgMaster in db.ConfigMasters
                let configNorth = (from x in db.ConfigNorths
                                    select new ConfigurationNorth())
                    .FirstOrDefault()
                let configSouth = (from x in db.ConfigSouths
                                    select new ConfigurationSouth())
                    .FirstOrDefault()
                select new ConfigurationContainer()
                    {
                        Config = cfgMaster.IsNorth ? configNorth : (IConfiguration) configSouth
                    };

    var results = qry.ToList();
} 
```

**例外**

> 未处理的异常：System.NotSupportedException：无法将类型“EFTest.ConfigurationNorth”转换为类型“EFTest.IConfiguration”。LINQ to Entities 仅支持转换实体数据模型基元类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:53:42.977

实体框架不（还？）支持以这种方式使用接口，主要是因为接口没有（也不能）向模型注册。只有当你让两个类都派生自作为模型一部分的基类时，你想要的才有可能。

# c - C - 同时从两个管道（来自两个子进程的父进程）读取？

> ID：12682099
> 
> 赞同：0
> 
> 时间：2012-10-01T22:37:02.940
> 
> 标签：c, pipe, file-descriptor

我有一个父进程，其中有两个子进程从中分叉。我创建了两个管道（每个孩子一个）。对于每个管道，我已经关闭了父级的写入端和子级的读取端。

我遇到的问题是让父级同时从每个子管道中读取。它似乎只是从我尝试读取的第一个管道中读取。

```
//PARENT
while(1)
{
    read(fd[0], buffer, sizeof(buffer));
    //print out buffer
    read(fd2[0], buffer2, sizeof(buffer2));
    //print out buffer2
} 
```

唯一打印的是我第一次阅读电话的信息。我得出的结论是 read 似乎阻止了其他读取。我在网上查看并在 select 中找到了一个可能的解决方案，但无法弄清楚如何用管道实现它（似乎在任何地方都没有任何示例）。

有人可以解释 select 如何与管道一起工作或通知我任何其他可能的问题解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T22:38:42.753

你的阅读被阻塞了。这意味着当您调用 read 时，它会一直等待，直到它具有您请求的字节数或流关闭（命中 EOF）。

您需要使管道非阻塞（使用`fcntl(fd[0], F_SETFL, O_NONBLOCK);`）或使用线程。

**编辑添加乔纳森莱弗勒的观点：**

如果您确实使用非阻塞，则调用[select()](http://linux.die.net/man/2/select)将是最有效的。这将节省您浪费大量 CPU 时间（启用非阻塞时会发生这种情况，因为当没有数据存在时读取会立即返回）。例如：

```
int fds[2];
...
fds[0] = fd[0];
fds[1] = fd2[0];

while...
    select(2, &fds, NULL, NULL, NULL);
    read(...);
    read(...); 
```

# objective-c - MPMediaItemPropertyIsCloudItem 是否需要 iOS 6 运行时？

> ID：12682104
> 
> 赞同：1
> 
> 时间：2012-10-01T22:37:40.207
> 
> 标签：objective-c, ios, ios6

iOS SDK 6 引入了新的属性 constant `MPMediaItemPropertyIsCloudItem`。我知道除非您针对 iOS 6 SDK 构建，否则我们无法访问此常量，但如果用户正在运行 iOS 5，读取此属性的代码是否仍会返回有效结果？

[http://developer.apple.com/library/ios/documentation/mediaplayer/reference/MPMediaItem_ClassReference/Reference/Reference.html#//apple_ref/doc/c_ref/MPMediaItemPropertyIsCloudItem](http://developer.apple.com/library/ios/documentation/mediaplayer/reference/MPMediaItem_ClassReference/Reference/Reference.html#//apple_ref/doc/c_ref/MPMediaItemPropertyIsCloudItem)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T19:42:59.087

事实证明（我猜不出意外），`MPMediaItemPropertyIsCloudItem`常量直到 iOS 6 运行时才存在。您必须通过检查常量的地址是否为 NULL 来防止引用它。

```
if(&MPMediaItemPropertyIsCloudItem == NULL)
{
     //do pre-iOS 6 stuff here
}
else
{
     NSNumber * isCloud = [mediaItem valueForProperty:MPMediaItemPropertyIsCloudItem];
} 
```

# php - 将变量从输入表单传递到upload.class.php

> ID：12682105
> 
> 赞同：0
> 
> 时间：2012-10-01T22:37:43.797
> 
> 标签：php, jquery, file-upload, upload, blueimp

我正在尝试实现 blueimp jquery 文件上传插件。我的最终目标是让插件针对特定的上传文件夹，具体取决于 URL 指定的 ID

例如）../plugin_path/index.php?job=13

然后上传将转到名为“13”的文件夹。因此，只有先前上传的“Job 13”图像才会显示在上传页面上。

我的问题是从 URL 请求值后：

```
$jobid=$_REQUEST['job']; 
```

我无法将 $jobid 变量传递给“upload.class.php”以在“upload_dir”中引用它。

有谁知道如何做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:45:52.920

我已经查看了该插件，您可以通过替换以下**第 39 行**来做到这一点`upload.class.php`：

```
'upload_dir' => dirname($_SERVER['SCRIPT_FILENAME']).'/files/', 
```

对于以下一项：

```
'upload_dir' => isset($_REQUEST['job']) ? $_REQUEST['job'].'/' : dirname($_SERVER['SCRIPT_FILENAME']).'/files/', 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T12:54:59.267

好的，我已经花时间研究并测试它，忘记我的其他答案，只需编辑`server/php/index.php`您的插件文件夹并替换以下行：

```
$upload_handler = new UploadHandler(); 
```

对于此代码：

```
$option = null;
if (isset($_REQUEST['job'])) {
   if (substr($_REQUEST['job'],-1)!= '/') {
      $_REQUEST['job'] .= '/';
   }
   $dir = dirname($_SERVER['SCRIPT_FILENAME']).'/files/'.$_REQUEST['job'];
   if (!file_exists($dir)) {
      mkdir($dir, 0777, true);
   }
   $option = array('upload_dir' => $dir);
}

$upload_handler = new UploadHandler($option); 
```

通过此更改，您的文件将正确上传到您在 index.html 的 input hidden 中指定的文件夹：

```
<input type="hidden" name="job" value="7"> 
```

有一些地方需要改进，因为当您刷新页面时，仅显示根上传文件夹中的文件，如果您希望它还显示通过“作业”参数指定的子文件夹中的文件，则需要进行进一步的修改。

# c++ - 如何在 Visual Studio 中创建 C++ 项目筛选器/文件夹？

> ID：12682107
> 
> 赞同：1
> 
> 时间：2012-10-01T22:37:52.970
> 
> 标签：c++, msbuild, project, visual-studio-2012

使用 Visual Studio 2012，我想创建一个名为“Include Files”的 C++ 项目文件夹，它与众所周知的文件夹“Header Files”具有相同的特征。也就是说，Include Files 中的文件具有 cpi 扩展，将被解析出来用于 InteliSense，也可以进行预编译。

我能够创建文件夹，但其中的文件没有被解析。我尝试将类型设置为 C++ 头文件。似乎没有任何效果。当给定 hpp 扩展名并放入 Header Files 文件夹时，这些文件可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T23:18:28.147

如果它是 VS2010 之类的，则可以通过工具/选项/文本编辑器对话框选项来完成。在树项“文件扩展名”下，您可以添加自定义文件扩展名，并使用您选择的编辑体验对其进行处理。

为了模拟您的情况，我执行了以下操作：

1.  打开工具/选项/文本编辑器选项屏幕。
2.  在右窗格中，在“扩展名：”框中键入“cpi”。
3.  为编辑器选择“Microsoft Visual C++”。
4.  选择添加/应用以将其添加到自定义扩展列表。

照常进行。打开任何 CPI 文件，它现在应该显示与任何 c/cpp/h/hpp 等文件相同的语法突出显示和 IntelliSense 选项。

至少这就是我使用自定义文件扩展名的方式。听起来您已经按照您想要的方式过滤到子文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T21:28:49.057

这是有关我如何实现的一些原始信息`CPI`，自定义文件扩展名类似于.h。我的任务是创建一个动态创建 Visual Studio 2012 C++ 解决方案和项目的程序。这是必需的，因为 VS 模板不适用于 C++，只能用于 .Net。

我创建了一个 Visual Basic 脚本文件来创建解决方案和项目文件。它将以下 XML 插入到自定义 vcxproj 文件中。`None`除了ClCompile 或 Include之外，还有 XML 标记。该`None`标签似乎适用于我的目的；启用解析、智能感知和上下文菜单选项。

```
 <ItemGroup>
        [Do following pattern for each CPI file]
        <None Include="MyCPI.CPI">
            <FileType>CppHeader</FileType>
        </None>
    </ItemGroup> 
```

我创建了以下 XML 并插入到 vcxproj.filters 文件中：

[在文件开头的 ItemGroup 中插入。GUID 与 C++ 头文件相同。我不确定那是什么意思。]

```
<Filter Include="Include Files">
      <UniqueIdentifier>{93995380-89BD-4b04-88EB-625FBE52EBFB}</UniqueIdentifier>
      <Extensions>cpi</Extensions>
</Filter>

<ItemGroup>
    [Do following pattern for each CPI file]
    <None Include="MyCPI.CPI">
        <Filter>++Include Files</Filter>
    </None>
</ItemGroup> 
```

# java - Java多线程银行转账，同步问题

> ID：12682113
> 
> 赞同：1
> 
> 时间：2012-10-01T22:38:11.723
> 
> 标签：java, multithreading, synchronization, bank

我正在尝试多线程银行转账问题。但是，我在正确同步线程方面遇到问题。在线程执行帐户之间的转移后，它会定期进行测试以确保完全没有钱获得或损失。

当一个线程进入测试方法时，它应该设置一个标志，以防止任何其他线程进入传输方法，然后等待当前执行传输的所有线程结束。

```
public void transfer(int from, int to, int amount) {        
    //finish running all threads' current transactions before test

    accounts[from].waitForAvailableFunds(amount);
    if (!open) return;    

    //checks to see if any thread is currently testing
    //if so, wait
    while(flag) {
        try {
            wait();
        } catch (InterruptedException e) { /*ignore*/ }
    }

    //do not execute these two statements when a thread
    //is performing a test
    if (accounts[from].withdraw(amount)) {
        accounts[to].deposit(amount);

    }  

    if (shouldTest() && !flag)   test();

}

//only one thread can perform a test at any given moment
public synchronized void test() {        

    //when test starts set a flag telling threads to
    //not begin any new transfers
    flag = true;

    //wait for all threads currently performing transfers
    //to finish current transfer before continuing

    int sum = 0;
    for (int i = 0; i < accounts.length; i++) {
        System.out.printf("%s %s%n", 
                Thread.currentThread().toString(),accounts[i].toString());
        sum += accounts[i].getBalance();
    }
    System.out.println(Thread.currentThread().toString() + 
            " Sum: " + sum);
    if (sum != numAccounts * initialBalance) {
        System.out.println(Thread.currentThread().toString() + 
                " Money was gained or lost");
        System.exit(1);
    } else {
        System.out.println(Thread.currentThread().toString() + 
                " The bank is in balance");
    }

    //reset flag and notify threads test is complete.
    flag = false;
    notifyAll();
} 
```

首先，我什至不肯定我已经设置了标志并正确等待。其次，如何让进入测试方法的线程等待所有其他已经在执行传输的线程完成当前传输。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T02:41:37.923

我认为您应该使用 volatile 来装饰标志，以确保它在不同线程中更改时受到影响。

# xcode - 核心位置 - 未找到物业“位置”

> ID：12682114
> 
> 赞同：0
> 
> 时间：2012-10-01T22:38:14.280
> 
> 标签：xcode, core-location

在我的应用程序的某个地方，我想使用“用户位置”。我找到了下面的代码。但是，我收到“未找到属性‘位置’和‘委托’”错误。应用程序变得越来越复杂，我似乎找不到解决方案。我是 xcode 和 Objective-c 的新手。那么你能帮我解决这个问题吗？这是代码：

```
-(void)getUserLocation{

self.geoCoder = [[CLGeocoder alloc] init];
self.locationMng = [[CLLocationManager alloc]init];
locationMng.delegate = self;

[self.geoCoder reverseGeocodeLocation: locationMng.location completionHandler: 
 ^(NSArray *placemarks, NSError *error) {

     CLPlacemark *placemark = [placemarks objectAtIndex:0];

     NSString *locatedAt = [[placemark.addressDictionary valueForKey:@"FormattedAddressLines"] componentsJoinedByString:@", "];

     NSLog(@"I am currently at %@",locatedAt);

    [locationLabel setText:locatedAt];

 }];

} 
```

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:48:15.587

从评论中可以看出，您`locationMng`错误地声明了属性。

试试这个：

```
@property (retain, nonatomic) CLLocationManager *locationMng; 
```

# node.js - 当 busterJS 说需要 Node 中的 TestHelpers 是什么意思？

> ID：12682125
> 
> 赞同：0
> 
> 时间：2012-10-01T22:39:39.900
> 
> 标签：node.js, buster.js

来自文档**（Emphasiss Mine）**

> 要在浏览器中的脚本标签中加载的库文件。**此设置通常不应用于节点运行。如果是，文件将是 `require'd`.** 值是文件名和/或全局模式的数组。文件按提供的顺序加载。它可能包含重复项，例如 ["test/lib/core.js", "test/lib/* */* .js"]，文件只会被加载一次。testHelpers 在库和源代码之后，但在测试之前加载。

这到底是什么意思？当他们得到 时`require'd`，他们得到什么？在什么变量名下？我有一些全局方法（`testSetUp`和`testTearDown`），我喜欢在测试之间重用它们。据此，当我在浏览器中测试时，我只能在测试之间使用这些方法，而不是在我在 Node.js 中测试时。

这是我的配置文件：

var config = 模块.exports;

```
config['Browser Tests'] = {
    rootPath: '../',
    environment: 'browser',
    sources: [
        'src/*.js'
    ],
    deps: [
        'submodules/d3/d3.v2.min.js'
    ],
    testHelpers: [
        'test/helpers/*.js'
    ],
    tests: [
        'test/test_*.js'
    ]
};

config["Node tests"] = {
    rootPath: '../',
    environment: "node",
    tests: [
        'test/test_*.js'
    ]
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T06:27:42.820

文档告诉您的是这些文件将是必需的，但它们的导出将丢失。因此，除非您的助手修改全局对象，否则这在节点上没有用。

但是，您可以自由地将共享助手放在单独的文件中并要求自己。

# json - Json.Encode 缺少 mvc 4 程序集参考

> ID：12682128
> 
> 赞同：29
> 
> 时间：2012-10-01T22:40:07.677
> 
> 标签：json, asp.net-mvc-4, assembly-references

我试图`Json.Encode(...)`在 MVC 4 中调用一个方法，但出现错误：`The name 'Json' does not exist in the current context.`

我尝试添加`System.Runtime.Serialization`具有`Json`类的命名空间，但是这个特定的类实例`Json`没有`Encode`方法。

我在这里缺少什么程序集？

这是我的确切代码：

```
{ url: '@Url.Action("DeleteDefinitionRule")', editData: 
    { companyCode: 'LO', definitionID:@Html.Raw(Json.Encode(Model.DefinitionID)) } } 
```

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-11-24T12:36:42.820

1.  解决方案资源管理器中的引用 > 右键单击​​ > 添加引用
2.  在 Assemblies > Framework 下，搜索“System.Web.Helpers”双击
3.  System.Web.Helpers 版本 2.0.0.0 并单击确定。找出
4.  您刚刚添加的 System.Web.Helpers > 右键单击​​它 > 属性。
5.  **将“复制本地”从 false 更改为 true**

现在@Json.Encode 应该可以工作了。

**更新**

![在此处输入图像描述](../Images/fe4ba96036e52b422e76117cbf9cdb4d.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T15:50:04.807

需要明确的是，即使在您为项目添加了正确的引用之后，您仍然必须在 Razor 页面的顶部添加这一行：

```
@using System.Web.Helpers; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T14:25:16.527

显然，如果您创建一个新的空 Web 项目，并尝试将所有内容移动到区域中，它会删除 Helpers 库。但是，如果您将其创建为 Internet 项目，它们仍然存在。我创建了一个新项目作为互联网项目，现在一切正常。

# jquery - 元素的jQuery setTimeout延迟

> ID：12682131
> 
> 赞同：0
> 
> 时间：2012-10-01T19:37:40.033
> 
> 标签：jquery

有没有更简单的方法来等待元素加载（通过独立的脚本/mootools/other）。例如：

我正在等待加载谷歌地图，但我不想使用它的 API 进行检查。所以我做了两个功能：

```
function checkIfexist() {
    if(jQuery('#container').length)
        return 0;
    else
        reload(1);
}

function reload(mode) {
    setTimeout(function(){
        do stuff
            .
            .
            .
        if(mode==1)
            checkIfexist();
    }, 400);
} 
```

我开始用`reload(1);`这种方式使用 setTimeout 有没有更简单的方法？我不想使用延迟，等待或其他任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T01:56:45.513

[`.ajaxStop()`](http://api.jquery.com/ajaxComplete/)当所有并发 ajax 请求完成时触发，因此您可以直接使用它，例如：

```
$(function(){
    $(document).ajaxStop(function() {
        // all ajax is done
    });
}); 
```

# objective-c - UITable 第一节搭建

> ID：12682132
> 
> 赞同：0
> 
> 时间：2012-10-01T22:40:48.300
> 
> 标签：objective-c, uitableview

抱歉这个愚蠢的问题，我是 obj-c 的初学者。

我想在我的表中添加一个“加载更多”功能，我通过创建 2 个部分来执行该功能。现在的问题是，从应用程序构建的第一部分是第二部分，而不是第一部分。

附上cellForRowAtIndexPath第一次调用的日志：

```
2012-10-02 00:07:50.626 ----[6321:c07] item :0
2012-10-02 00:07:50.626 ----[6321:c07] section :1 
```

不应该是这样的：

```
2012-10-02 00:07:50.626 ----[6321:c07] item :0
2012-10-02 00:07:50.626 ----[6321:c07] section :0 
```

因此，我的应用程序在首次启动时仅显示“加载更多”单元格，而不是第一部分的第一行。第一次“按下”“加载更多”按钮后，一切正常。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T23:24:19.240

`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`确保在初始化之前检查变量`indexPath`并`section`返回`UITableViewCell`. 如果它是“加载更多”单元格，那`indexPath.section == 1`将是真的。如果`indexPath.section == 0`，这是您的第一个部分表格单元格。

还要确保`- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView`并`- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section`返回正确的数字。

重新阅读您的问题后，听起来您需要在按下“加载更多”之前使用单元格数据初始化表格。“加载更多”对您的表格视图的支持数据究竟做了什么？

# html - 在 Chrome 中启用提交按钮

> ID：12682137
> 
> 赞同：1
> 
> 时间：2012-10-01T22:41:26.567
> 
> 标签：html, forms

在 HTML 中启用表单提交按钮的正确方法是什么？我的表单目前已被 Chrome 禁用，我需要启用它。

```
<div style="width:250px; float:left">
   <aside id="mailchimpsf_widget-2" class="widget widget_mailchimpsf_widget"><div class="widget-inner"> 

<div id="mc_signup">
<form method="post" action="#mc_signup" id="mc_signup_form">
    <input type="hidden" id="mc_submit_type" name="mc_submit_type" value="html" />
    <input type="hidden" name="mcsf_action" value="mc_submit_signup_form" />
    <input type="hidden" id="_mc_submit_signup_form_nonce" name="_mc_submit_signup_form_nonce" value="d0bc38cc04" />        

<div class="mc_form_inside">
    <div class="updated" id="mc_message"></div><!-- /mc_message -->

<div class="mc_merge_var">
<label for="mc_mv_EMAIL" class="mc_var_label">Email Address</label>
<input type="text" size="18" value="" name="mc_mv_EMAIL" id="mc_mv_EMAIL" class="mc_input"/>
</div><!-- /mc_merge_var -->

    <div class="mc_signup_submit">
        <input type="submit" name="mc_signup_submit" id="mc_signup_submit" value="Keep Me Updated!" class="button" />
    </div><!-- /mc_signup_submit -->

</div><!-- /mc_form_inside -->
</form><!-- /mc_signup_form -->
</div><!-- /mc_signup_container -->
</div></aside>
            </div> <!--Left Floated Div--> 
```

此按钮在 IE9 中也以某种方式被禁用。这里发生了什么？我从来没有遇到过表单的这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T22:43:13.080

默认情况下，它始终处于启用状态。您是否将此提交按钮放在`<form>`标签内？

您很可能在页面上有其他东西干扰了您的提交按钮。

做一个快速测试，似乎它不是任何 css 类或 id。

我会先删除这个脚本：`<script type='text/javascript' src='http://www.endingpovertytogether.org/wp-content/plugins/mailchimp/js/mailch‌​imp.js?ver=1.2.10'></script>`，看看它是否解决了不提交问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T22:49:40.267

In endingpovertytogether.org's code:

```
<form method="post" action="#mc_signup" id="mc_signup_form" onSubmit="document.getElementById('submit').disabled=true;">
..
<input type="submit" name="mc_signup_submit" id="mc_signup_submit" value="Keep Me Updated!" class="button" />
</form> 
```

Remove `onSubmit="document.getElementById('submit').disabled=true;"` in tag from

It's in script file:

```
<script type='text/javascript' src='http://www.endingpovertytogether.org/wp-content/plugins/mailchimp/js/mailch‌​imp.js?ver=1.2.10'></script> 
```

Remove:

```
$('#mc_signup_submit').attr("disabled","disabled"); 
```

In `function mc_beforeForm()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T22:45:33.390

您可以禁用标记中的提交按钮（启用它只需删除属性）：

```
<input type="button" id="my-button" value="Button" disabled="disabled" /> 
```

或者您可以在脚本中执行此操作：

```
// disable
document.getElementById("my-button").setAttribute("disabled", "disabled");

//enable
document.getElementById("my-button").removeAttribute("disabled"); 
```

但是，默认情况下始终启用 html 元素，因此请检查您是否有任何脚本将`input`元素的子元素设置为禁用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T22:45:14.827

它在`<form>`标签内吗？这可能会导致提交按钮被禁用。没有什么可以提交的。

# objective-c - 如何从 UISwitch 中删除目标，以避免因快速点击开关而产生的问题？

> ID：12682141
> 
> 赞同：1
> 
> 时间：2012-10-01T22:42:03.580
> 
> 标签：objective-c, ios

我该怎么办？

我有一个 UISwitch。当用户点击开关时，惊人的事情发生了！

现在，如果用户双击开关，我就有了惊人的崩溃！因为第一个水龙头还在做着惊人的事情！

我想做的是这个，

用户水龙头：

1 -**调用 toggleOvertimeSwitch**

2 -**从开关中移除目标**（为了避免在发生双击时被调用）

3 -**做令人惊奇的事情**

4 -**再次添加目标**

尽管稍后需要注意 Switch 的位置，但乍一看，这应该可行。但事实并非如此。

我正在删除自己作为目标，但它仍然会不断响应所有的点击！toggleOvertimeSwith 总是被调用。我不明白为什么。

任何人都可以帮我解决这个问题吗？

谢谢！

努诺

**代码：**

我的 viewDidLoad 实现了这个，

```
[self.toggleSwitch addTarget:self
                      action:@selector(toggleOvertimeSwitch:)
            forControlEvents:UIControlEventValueChanged]; 
```

我的 toggleOvertimeSwitch 实现了这个，

```
-(void)toggleOvertimeSwitch:(UISwitch *)sender
{

[self.toggleSwitch removeTarget:self
                         action:@selector(toggleOvertimeSwitch:)
               forControlEvents:UIControlEventValueChanged];

// Do something amazing here

[self.toggleSwitch addTarget:self
                      action:@selector(toggleOvertimeSwitch:)
            forControlEvents:UIControlEventValueChanged];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:04:28.887

*   如果您提到“做一些令人惊奇的事情”的部分与您的其余代码在同一个线程/队列中执行，它不会改变任何东西，因为每个事件/使用操作都在主线程中处理，所以从你的开始`toggleOvertimeSwitch:`最后，在方法本身完成之前，不会有任何中断或由任何用户操作触发的此方法的任何其他调用。

*   如果您的“令人惊奇的事情”代码在单独的线程中执行，例如使用 GCD`dispatch_async`函数，那么禁用您的开关操作是有意义的，但是：

    *   在重新激活开关操作之前，您应该等待“惊人的工作”完成，就好像您确实在那里异步执行了某些操作，并且重新添加目标/操作的代码将在不等待异步代码完成的情况下执行，您的根据定义，开关将在操作完成之前重新启用
*   而且，您应该使用`enabled`开关的属性来禁用和重新启用它，而不是删除和重新添加目标/动作，这会容易得多！

我不知道你是否真的使用 GCD 或一些线程代码或其他任何东西来完成你的“惊人的工作”，因为你没有在你的问题中提供太多信息，所以我只是完全猜测，但如果你使用例如 dispatch_async ，它会给出这样的东西：

```
-(IBAction)toggleOvertimeSwitch:(UISwitch*)sender
{
    // disable the switch
    sender.enabled = NO;

    // start your long background work
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_NORMAL, 0), ^{
      // ... some amazing work in the background, executed asynchronously ...

      // Then, when finished, re-enable the switch:
      dispatch_sync(dispatch_get_main_queue(), ^{
        sender.enabled = YES;
      });
    });
} 
```

PS：同样，如果您不使用在后台执行的任何线程或异步代码，而是使用在当前线程中同步执行的代码，那么您的问题根本不存在，因为您的所有`toggleOvertimeSwitch:`方法只会在一步不中断，之后才会处理下一个 UI 事件（触摸等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-21T09:59:07.620

在你的`doSomethingAmazing:`方法开始时，说

```
mySwitch.userInteractionEnabled = NO; 
```

...然后作为最后一件事`doSomethingAmazing`：

```
mySwitch.userInteractionEnabled = YES; 
```

这将防止您的目标/动作选择器再次被触发，直到您准备好为止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T22:49:08.043

我的猜测是，`addTarget`并且`removeTarget`不会立即发生，因为您的假设在这里，而是在稍后发生的线程上排队。一个更好的方法，而不是删除目标并重新添加它，是确保你的“做一些惊人的事情”的方法是线程安全的。您可能需要将属性更改为原子，或使用其他一些同步机制。

如果您要提供更多关于您在“惊人”方法中所做的事情以及崩溃到底是什么的详细信息，我们可能会在那里发现一些东西。

# shell - 使用 awk、sed 修剪前 9 个字母

> ID：12682142
> 
> 赞同：6
> 
> 时间：2012-10-01T22:42:10.333
> 
> 标签：shell, sed, awk

我在文件中有以下数据，我只需要保留文件的前 9 个字符和 | 将它发送到另一个文件

```
03755432101JONPORT,
037554321031979123120800000000000000000000000000000000
0375543210413855
03755432105JEEY
03755432111P63
03755432133100620120000008156GR1 
```

应该看起来像

```
037554321
037554321
037554321
037554321
037554321
037554321 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-01T22:44:07.710

对于这样一个简单的任务，请使用`cut`：

```
cut -b1-9 
```

如果您的数据包含 Unicode，您可能需要`-c`代替`-b`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T02:30:13.397

### 使用`sed`：

```
sed 's/\(.\{9\}\).*/\1/' input_file 
```

### 使用`gawk`：

```
gawk '{temp = gensub(/(.{9}).*/,"\\1", "g"); print temp}' input_file 
```

但是，对于这种简单的需求`cut`，请按照@choroba 的建议使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T22:46:00.520

尝试以下`grep`命令：

```
grep -o "^.\{9\}" FILE 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T22:56:17.627

你可以简单地使用： -

```
cut -c10- 
```

# drupal - Drupal local_menu_task 标题

> ID：12682144
> 
> 赞同：1
> 
> 时间：2012-10-01T22:42:26.480
> 
> 标签：drupal, hook-menu

我有一个页面，其中包含通过 hook_menu 和 MENU_LOCAL_TASK 呈现的多个选项卡。每当我单击选项卡时，内容区域中的页面标题都会更改为“主页”。如何将其设置为留在“我的设置”？

这是我的代码：

```
 $items['settings'] = array(
'title' => 'My Settings',
'page callback' => 'drupal_get_form',
'page arguments' => array('settings_page_form'),
'access arguments' => array('access content'),
'file' => 'settings.inc',
'file path' => drupal_get_path('module','mymodule') . '/includes',
'type' => MENU_CALLBACK,
'access callback' => TRUE, );

 $items['settings/account'] = array(
'title' => 'Account Settings',
'title_callback' => $items['settings']['title'],     
'type' => MENU_DEFAULT_LOCAL_TASK,
 'weight' => -3,   );

 $items['settings/layout'] = array(
'title' => 'Page Layout',
'title_callback' => $items['settings']['title'],
'page callback' => 'drupal_get_form',
'page arguments' => array('settings_layout_form'),
'access arguments' => array('access content'),
'file' => 'settings.inc',
'file path' => drupal_get_path('module','mymodule') . '/includes',
'type' => MENU_LOCAL_TASK,
 'weight' => -2,   ); 

 $items['settings/shopping'] = array(
'title' => 'Shopping Preferences',
'title_callback' => $item['settings']['title'],
'page callback' => 'drupal_get_form',
'page arguments' => array('settings_shopping_form'),
'access arguments' => array('access content'),
'file' => 'settings.inc',
'file path' => drupal_get_path('module','mymodule') . '/includes',
'type' => MENU_LOCAL_TASK,
 'weight' => -1, 
```

);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T23:10:40.653

我只是使用 drupal_set_title 来设置页面的页面标题。似乎这是设计使然，允许标签设置自己的标题。

[http://drupal.org/node/1699560](http://drupal.org/node/1699560)

# php - 在获得选定数量的结果之前，如何循环运行？

> ID：12682145
> 
> 赞同：1
> 
> 时间：2012-10-01T22:42:46.260
> 
> 标签：php

在 PHP 中：我有一个通过数组运行的 for 循环，如果每个键的值与我要查找的值不匹配，我会跳过它。

如何创建一个循环，直到我找到我正在寻找的 20 个值。所以我不能`for($i=0;$i<50;$i++)`因为前 50 个值，可能只有 2 个值匹配。所以它需要运行到 20 场比赛。

更新：我还需要遍历数组，所以我仍然需要像这样检查每个值： $news_posts[$i]['category']; 如果类别是我正在寻找的，那么那就是 1。如果不是，那么我跳过它。我需要20个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T22:47:13.597

您可以使用多个条件：

```
for ($i=0, $found=0; $i<count($news_posts) && $found<20; ++$i)
{
    if ($news_posts[$i]['category'] == 'something')
    {
        ++$found;
        // do the rest of your stuff
    }
} 
```

这将遍历 中的所有内容`$news_posts`，但如果找到 20 则更早停止。

一个 for 循环包含三个部分`(initialization; condition; increment)`。您可以在其中任何一个中包含多个语句（或没有）。例如，`for (;;)`等价于`while (true)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T22:50:36.057

```
$count = 0;
$RESULT_COUNT = 20;
while($count < $RESULT_COUNT) {
    // your code to determine if result is found

    if($resultFound) {
        $count++;
    }

    if($resultsEnd) { // check here to see if you have any more values to search through
        break;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T22:45:19.460

```
$foundValues = 0;

while($foundValues < 20)
{
   //Do your magic here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T22:45:20.003

这将起作用。请注意，如果您的计数从未超过 19，则循环将永远运行。

```
$count = 0;
while ($count < 20) 
{
    if (whatever)
    {
        $count++;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T22:45:47.933

```
$count = 0;
while(true){
if($count>20)
    break;
...
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T19:15:05.973

当某些条件为真时，只需跳出循环。

```
for ($i = 0; $i < $countValue; $i++)
{
   //do something

   if ($i == 10) break;
} 
```

# c# - 如何防止 DGV 隐藏顶行？

> ID：12682146
> 
> 赞同：1
> 
> 时间：2012-10-01T22:42:46.557
> 
> 标签：c#, winforms, datagridview

我的 DGV 填充了用户输入的值（非数据绑定）。行数是动态的。但是，即使使用默认的五行，当我到达最后（第 5 行）/第 4 行时，从一个单元格到另一个单元格和从行到另一行会导致第一行（第 0 行）在 DGV 的“上下”消失。

我希望 5 行（或多行）始终保持在同一个位置，而不是根据光标所在的位置移动。

我不知道为什么这是这种情况下的默认行为，并且对此感到好奇，但主要只需要知道如何防止这种奇怪现象。

当用户添加额外的行时，我会计算每行的高度，如下所示：

```
dataGridViewPlatypi.Rows.Add();
int newRowHeight = dataGridViewPlatypi.Height / dataGridViewPlatypi.RowCount;
for (int i = 0; i < dataGridViewPlatypi.RowCount; i++)
{
    dataGridViewPlatypi.Rows[i].Height = newRowHeight;
} 
```

...当除法有余数/模数时，这种不精确的数学可能会导致网格底部出现一些“额外空间”，例如：当有六行时，每行的高度为 26 并留下 4 个像素在网格的底部——但同样，当默认的 5 行位于 160 像素高的 DGV（每行 32 像素）中时，甚至会发生这种令人不安的行为。

我不知道我是否需要为DGV设置一些属性或编写一些代码，一行，一个单元格，还是......？

## 更新

我发现如果我在设计时将 2 添加到 DGV 的高度（162 而不是 160，因此每行是 32 并且剩下 2 个像素“用于 DGV”，它适用于默认的 5 行。

然而，当用户添加额外的行时试图让它调整是有问题的。以下 kludgy 代码不起作用：

```
// Adding one extra pixel is not enough; 2 is the least that can be added to prevent the last phantom grey row from appearing
const int BASE_GRID_HEIGHT_SHIM = 2;
const int DEFAULT_ROW_COUNT = 5;

dataGridViewPlatypi.Rows.Add();

int shimAdjustment = dataGridViewPlatypi.RowCount - DEFAULT_ROW_COUNT;
int newRowHeight = dataGridViewPlatypi.Height / dataGridViewPlatypi.RowCount;
int newGridHeight = (newRowHeight * dataGridViewPlatypi.RowCount) + BASE_GRID_HEIGHT_SHIM + shimAdjustment;

for (int i = 0; i < dataGridViewPlatypi.RowCount; i++)
{
    dataGridViewPlatypi.Rows[i].Height = newRowHeight;
}

dataGridViewPlatypi.Size = new Size(dataGridViewPlatypi.Width, newGridHeight); 
```

注意：在第 0 列中单击时不会发生向上推行以隐藏第 0 行并显示 DGV 的软灰色下腹部；只有在从一列切换到下一列之后，才会发生这种“向上推动”（FWIW）。

## 更新 2

这就是我应用丰富答案的方式。

```
private void buttonAddRow_Click(object sender, EventArgs e)
{
    AddAPlatypusRow();
    for (int i = 0; i < dataGridViewPlatypi.RowCount; i++)
    {
        FreezeBand(dataGridViewPlatypi.Rows[i]);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T09:00:02.833

下面是使用 DataGridView 的 DataGridViewBand 类冻结任何行或列的完整示例。

简而言之，您只需要：

1.  调用**FreezeBand** (YouDataGridView.Rows[0])
2.  dataGridView.ColumnHeadersVisible = false;

注意：您甚至可以根据需要冻结乐队的**背景颜色**。虽然在示例中是 WhiteSmoke（灰色）。

```
 private static void FreezeBand(DataGridViewBand band)
    {
        band.Frozen = true;
        DataGridViewCellStyle style = new DataGridViewCellStyle();
        style.BackColor = Color.WhiteSmoke;
        band.DefaultCellStyle = style;
    } 
```

要查看完整的演示，请查看 Microsoft 的[DataGridViewBandDemo](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewband%28v=vs.80%29.aspx)

要查看快速演示，请创建一个常规的 Visual Studio、C# Windows 应用程序项目并使用以下代码填充您的 Program.cs 文件。

```
using System.Drawing;
using System.Windows.Forms;
using System;

public class DataGridViewBandDemo : Form
{
    #region "form setup"
    public DataGridViewBandDemo()
    {
        InitializeComponent();
        InitializeDataGridView();
    }

    DataGridView dataGridView;
    FlowLayoutPanel FlowLayoutPanel1 = new FlowLayoutPanel();

    private void InitializeComponent()
    {
        FlowLayoutPanel1.Location = new Point(454, 0);
        FlowLayoutPanel1.AutoSize = true;
        FlowLayoutPanel1.FlowDirection = FlowDirection.TopDown;
        AutoSize = true;
        ClientSize = new System.Drawing.Size(614, 360);
        FlowLayoutPanel1.Name = "flowlayoutpanel";
        Controls.Add(this.FlowLayoutPanel1);
        Text = this.GetType().Name;
    }
    #endregion

    #region "setup DataGridView"

    private void InitializeDataGridView()
    {
        dataGridView = new System.Windows.Forms.DataGridView();
        Controls.Add(dataGridView);
        dataGridView.Size = new Size(300, 200);

        // Create an unbound DataGridView by declaring a
        // column count.
        dataGridView.ColumnCount = 4;

        // Set the column header style.
        DataGridViewCellStyle columnHeaderStyle =
            new DataGridViewCellStyle();
        columnHeaderStyle.BackColor = Color.Aqua;
        columnHeaderStyle.Font =
            new Font("Verdana", 10, FontStyle.Bold);
        dataGridView.ColumnHeadersDefaultCellStyle =
            columnHeaderStyle;

        // Set the column header names.
        dataGridView.Columns[0].Name = "Recipe";
        dataGridView.Columns[1].Name = "Category";
        dataGridView.Columns[2].Name = "Whatever";
        dataGridView.Columns[3].Name = "Rating";

        // Populate the rows.
        string[] row1 = new string[]{"Meatloaf", 
                                        "Main Dish", "boringMeatloaf", "boringMeatloafRanking"};
        string[] row2 = new string[]{"Key Lime Pie", 
                                        "Dessert", "lime juice, evaporated milk", "****"};
        string[] row3 = new string[]{"Orange-Salsa Pork Chops", 
                                        "Main Dish", "pork chops, salsa, orange juice", "****"};
        string[] row4 = new string[]{"Black Bean and Rice Salad", 
                                        "Salad", "black beans, brown rice", "****"};
        string[] row5 = new string[]{"Chocolate Cheesecake", 
                                        "Dessert", "cream cheese", "***"};
        string[] row6 = new string[]{"Black Bean Dip", "Appetizer",
                                        "black beans, sour cream", "***"};
        string[] row7 = new string[]{"Black Bean Dip", "Appetizer",
                                        "black beans, sour cream", "***"};
        string[] row8 = new string[]{"Jelly beans", "Appetizer",
                                        "black beans, sour cream", "***"};
        string[] row9 = new string[]{"Barracuda", "Appetizer",
                                        "black beans, sour cream", "***"};
        object[] rows = new object[] { row1, row2, row3, row4, row5, row6, row7, row8, row9 };

        foreach (string[] rowArray in rows)
        {
            dataGridView.Rows.Add(rowArray);
        }

            dataGridView.ColumnHeadersVisible = false; // This hides regular column header
        FreezeFirstRow();
        // FreezeFirstColumn(); // Uncomment this line to freeze first column

    }

    // Freeze the first row.
    private void FreezeFirstRow()
    {
        FreezeBand(dataGridView.Rows[0]);
    }

    private void FreezeFirstColumn()
    {
        FreezeBand(dataGridView.Columns[1]);
    }

    private static void FreezeBand(DataGridViewBand band)
    {
        band.Frozen = true;
        DataGridViewCellStyle style = new DataGridViewCellStyle();
        style.BackColor = Color.WhiteSmoke;
        band.DefaultCellStyle = style;
    }

    #endregion

    [STAThreadAttribute()]
    public static void Main()
    {
        Application.Run(new DataGridViewBandDemo());
    }
} 
```

好吧，那是我最好的选择：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:57:59.373

我知道您没有使用数据绑定 DGV，但以下链接之一可能会为您提供有关解决方案的一些见解。

*   [冻结datagridview中的顶行和前两列](https://stackoverflow.com/questions/10876951/freeze-top-row-and-first-two-columns-in-datagridview)
*   [使用自定义 SortComparer 时如何冻结 datagridview 中的第一行](https://stackoverflow.com/questions/11777526/how-to-freeze-first-row-in-datagridview-when-using-a-custom-sortcomparer)

# codeigniter - Codeigniter：/foldername/controllername 在服务器上给出 404

> ID：12682152
> 
> 赞同：0
> 
> 时间：2012-10-01T22:43:17.330
> 
> 标签：codeigniter

上传在我的 wamp 服务器上运行良好但在开发服务器上运行良好的应用程序。

我的大部分控制器都在文件夹中。例如，“/profile/login”是一个控制器，当我在 localhost 中调用时，调用 url“/profile/login”会正确调用控制器上的索引函数。

但是当我上传到我的服务器时，它会返回默认的 404 codeigniter 页面。index.php 仍然有效。

我删除了 .htaccess 文件，因为我认为这可能与它有关，但没有改变任何东西。

我也尝试将其更改`$config['uri_protocol']`为不同的类型。

奇怪的是，虽然 profile/login 不起作用 /login/ 起作用。即使登录控制器位于配置文件文件夹中。

我想我可以为所有控制器创建自定义路由，但这似乎很愚蠢。我还可以重新设计控制器，使它们不在文件夹中。

但我有一种感觉，这是我错过的非常愚蠢的事情

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:47:07.373

因此，我刚刚在发布此内容时才弄清楚...正在覆盖该应用程序的旧版本并忘记删除其中一些与新控制器具有相同名称和类名的旧文件。Ex application/controllers/profile/login.php vs application/controllers/login.php

所以......希望这会帮助其他人不要像我刚才那样浪费时间:)

# c# - 避免锁内外重复的 if 语句

> ID：12682156
> 
> 赞同：1
> 
> 时间：2012-10-01T22:43:54.077
> 
> 标签：c#, multithreading, .net-4.0, thread-safety

下面的代码是我想要完成的一个非常简化的示例。

```
 private object _highestLevelLock = new object();
    private int _highestValue;
    private void SetHighestValue()
    {
        var random = new Random();
        var next = random.Next(0, 100);
        if (next > _highestValue)
        {
            lock (_highestLevelLock)
            {
                if(next > _highestValue)
                    _highestValue = next;
            }
        }
    } 
```

即，我有一个变量，它保存了迄今为止我遇到的最高整数。SetHighestValue() 可以被多个线程访问。

如果生成的随机整数大于当前最大的整数，我会更新_highestValue。

我的问题是，如果下一个 > 最高值，我怎样才能避免检查两次？如果我将其从锁内移除，那么在此线程设置值之前，_highestValue 可能会被设置为更高的值，在这种情况下，_highestValue 将不准确。

我知道我可以摆脱锁外的 if 语句，但我不想不必要地锁定。

有没有更好的方法来实现这一点？可能是锁定和/或使用 Interlocked 命名空间的某种组合？

在一些相关的说明中，_highestValue 是否应该是易变的？即使是这样，我认为这对我手头的问题没有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T22:47:09.410

您所描述的是一个[测试、测试和设置](http://en.wikipedia.org/wiki/Test_and_Test-and-set)的案例，是一种非常有效的处理方式。要回答您的问题，如果没有将您的条件封装在一个函数中，就无法摆脱代码重复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T22:50:46.380

我认为您可以使用[`Interlocked`](http://msdn.microsoft.com/en-US/library/801kt583.aspx)该类而不是锁定：具有较高值的​​每个线程都尝试执行更新，但如果失败则重新检查：

```
var next = random.Next(0, 100);
int current = _highestValue;
bool updated = false;
while(next > current && !updated)
{
    updated = Interlocked.Exchange(ref _highestValue, next, current);
    current = _highestValue;
} 
```

# javascript - 用于更改文件名的带有箭头键（下一个和后退）的键盘导航

> ID：12682157
> 
> 赞同：-2
> 
> 时间：2012-10-01T22:43:56.963
> 
> 标签：javascript, jquery, keyboard-navigation

我有一堆具有不同文件名的 html 文件，我需要添加一个选项来使用键盘箭头键导航（上一个和下一个文件）。

文件名不是动态的。例如：filename.html、anotherfile.html、thirdone.html 等。

所以我需要 .js 文件中的导航内容，以及我应该链接 html 文件上的上一个、下一个按钮的内容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T22:57:53.443

`<a>`如果您要在两个标签上定义两个 ID，如下所示：

```
<a id="prev" href="filename.html">prev</a>
<a id="next" href="thirdone.html">next</a> 
```

你可以做这样的事情`navigation.js`并从每个页面中包含它：

```
// when the document is ready, run this function
jQuery(function( $ ) {
    var keymap = {};

    // LEFT
    keymap[ 37 ] = "#prev";
    // RIGHT
    keymap[ 39 ] = "#next";

    $( document ).on( "keyup", function(event) {
        var href,
            selector = keymap[ event.which ];
        // if the key pressed was in our map, check for the href
        if ( selector ) {
            href = $( selector ).attr( "href" );
            if ( href ) {
                // navigate where the link points
                window.location = href;
            }
        }
    });
}); 
```

您甚至可以使用一点 CSS 来制作`#prev, #next { display: none; }`或玩弄绝对定位的[CSS 三角形](http://css-tricks.com/snippets/css/css-triangle/)。

# iphone - iOS，带有自定义页脚文本和自定义页脚视图的 UITableView

> ID：12682162
> 
> 赞同：0
> 
> 时间：2012-10-01T22:44:30.877
> 
> 标签：iphone, ios, uitableview

我有一个分组表。我对这张表有两条规则，在第一个条件下，我需要在页脚中显示一张漂亮的图片（这行得通）。在第二种情况下，我需要在页脚中显示一些文本（失败）。是否可以在同一张桌子上使用`titleForFooterInSection`和？`viewForFooterInSection`如果我同时在同一部分使用它们，应该优先使用哪一个？

```
- (NSString *)tableView:(UITableView *)tableView titleForFooterInSection:(NSInteger)section
{
    if (section < self.practiceLessonSet.lessons.count) {
        if ([[self.practiceLessonSet.lessons objectAtIndex:section] words].count == 1) {
            return @"No replies yet. Try the share button?";
        }
    }
    return nil;
}

- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section
{
    if (self.practiceLessonSet.lessons.count == 0) {
        UIImageView *view = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"introPractice"]];
        view.contentMode = UIViewContentModeCenter;
        return view;
    } else
        return nil;
}

- (CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section
{
    if (self.practiceLessonSet.lessons.count == 0)
        return 278;
    else
        // WHAT SHOULD I PUT HERE?
        return [super tableView:tableView heightForFooterInSection:section]; // <-- FAILS
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:53:30.963

是的，您可以同时使用它们。我的猜测是，当您期望它们满足这些条件时，它们并没有得到满足：

```
if (section < self.practiceLessonSet.lessons.count) {
    if ([[self.practiceLessonSet.lessons objectAtIndex:section] words].count == 1) {
        return @"No replies yet. Try the share button?";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T23:29:39.000

正如 Kale 所说，是的，您应该能够同时使用它们，因此在导致问题的标题或视图部分中检查您的条件时出现问题（尝试放置几个日志语句并通过它查看它们是否是实际上被叫了，他们停在哪里）。根据我的经验，如果您同时拥有页脚或页眉的视图和标题，则如果两者都有值，则视图最终会优先。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-16T20:29:52.420

只需返回`UITableViewAutomaticDimension`值`heightForFooterInSection`

**目标-C**：

```
- (CGFloat)tableView:(UITableView *)tableView heightForFooterInSection: (NSInteger)section
{
    if (self.practiceLessonSet.lessons.count == 0)
        return 278;
    else
        return UITableViewAutomaticDimension;
} 
```

**斯威夫特**：

```
override func tableView(_ tableView: UITableView, heightForFooterInSection section: Int) -> CGFloat
{
    if (self.practiceLessonSet.lessons.count == 0) {
        return 278
    }
    return UITableViewAutomaticDimension
} 
```

# git - 在 fugitive.vim 冲突差异中显示基础

> ID：12682164
> 
> 赞同：7
> 
> 时间：2012-10-01T22:44:45.993
> 
> 标签：git, vim, git-merge, vim-fugitive

默认情况下，如果您在与 git 冲突的文件缓冲区上使用fugitive.vim [，](https://github.com/tpope/vim-fugitive)`:Gdiff`您将获得[三向差异](http://vimcasts.org/episodes/fugitive-vim-resolving-merge-conflicts-with-vimdiff/)显示`HEAD`，工作副本（带有冲突标记）和`merge`.

我喜欢`git config merge.conflictstyle diff3`设置，其中[包括基础](http://blog.wuwon.id.au/2010/09/painless-merge-conflict-resolution-in.html)`HEAD`（冲突标记和`merge`冲突标记的最近共同祖先。

不幸的是，即使`diff3`在`conflictstyle`fugitive.vim 中，你仍然只能得到 3 个窗格（没有基础）。

有谁知道如何在另一个窗格中显示它？理想情况下是关于工作副本。

[Tim Pope 的这条评论](http://vimcasts.org/episodes/fugitive-vim-resolving-merge-conflicts-with-vimdiff/#comment-200528090)似乎提供了一些线索，但我不太明白。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-08T14:20:30.177

您可以通过以下步骤进行操作：

*   `:split`- 做一个水平分割
*   `:Gdiff`- 顶部窗口中的差异
*   `ctrl``w`+ `j`- 将焦点移到底部窗口
*   `Gedit :1`- 在底部窗口中加载祖先

`Gedit :2`加载头部并`Gedit :3`加载合并

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-23T19:36:39.097

我知道的最快的方法是这个命令，在冲突的缓冲区中发出：

```
:Gsdiff :1 | Gvdiff 
```

您必须将这些命令作为一行输入，当您将它们作为两个单独的命令输入时，效果会有所不同。

结果如下所示：

```
+---------------------------------------+
|         common ancestor (:1)          |
+-----------+--------------+------------+
|           |              |            |
| HEAD (:2) | working copy | merge (:3) |
|           |              |            |
+-----------+--------------+------------+ 
```

括号内的东西是 fugitive.vim 在这种情况下理解的“修订”说明符。有关`:h fugitive-revision`更多信息，请参阅。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T03:27:27.833

你可以使用 git mergetool -t gvimdiff。它将在 gvimdiff 中打开 4 个窗口。它没有内置在逃犯中，但是您仍然可以使用 vim 进行 3 路合并。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-15T21:10:38.587

如果您只想打开已在 vim 缓冲区中打开的文件的差异，这些答案都很棒。我更喜欢使用`git mergetool`并打开一个 4-way diff 视图，如下所示：

```
+-----------+----------------------+------------+
|           |                      |            |
| HEAD (:2) | common ancestor (:1) | merge (:3) |
|           |                      |            |
+-----------+----------------------+------------+
|                 working copy                  |
+-----------------------------------------------+ 
```

感谢这里的其他答案，我能够通过创建一个名为`diff.vim`并将其放置在我的`~/.vim`目录中的文件来完成这项工作：

```
Gsdiff :1
exe 1 . "wincmd w"
Gvdiff!
call feedkeys(winnr()."\<C-W>jgg", 'n') 
```

然后，只需让您的 mergetool 命令执行`vim -f "$MERGED" -S "$HOME/.vim/diff.vim"`。我`~/.gitconfig`的有以下几点：

```
[mergetool "fugitive"]
    cmd = vim -f "$MERGED" -S "$HOME/.vim/diff.vim"
[merge]
    tool = fugitive 
```

希望这对其他人有用。

# php - 在后台执行从浏览器启动的 php 脚本

> ID：12682167
> 
> 赞同：0
> 
> 时间：2012-10-01T22:45:04.063
> 
> 标签：php, javascript, ajax

我正在编写一个 php 脚本来向特定邮件列表中的所有电子邮件地址发送邮件。邮件可能会达到数千封，整个脚本甚至可能需要几个小时才能执行。我想要的是，一旦用户输入邮件详细信息、正文、主题等并点击按钮/链接，php 脚本就会在后台运行，用户一旦点击按钮/链接就会被重定向到某个页面。

简而言之，php 脚本应该从浏览器启动，但即使浏览器关闭也应该在服务器上运行。

或者，如果可以使用 AJAX/Javascript 在重定向页面上显示进度条，但即使浏览器关闭，php 脚本也应继续执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T22:50:09.610

PHP is the **wrong tool for the job**. Set up a mailing list on a e-mail server (perhaps the same server), and from the browser hand the data to PHP via ajax, which should then send the e-mail (**only once**) to the mailing list.

The e-mail software will take care of sending a copy to every subscriber of the mailing list.

This is one of the **most efficient** ways of doing it.

Some links which may help you do more research:

*   [http://www.postfix.org/addon.html#lists](http://www.postfix.org/addon.html#lists)
*   [http://www.courier-mta.org/couriermlm.html](http://www.courier-mta.org/couriermlm.html)

Remember though, this has **nothing** to do with programming, and you should ask for help on some other stack exchange site (like [unix](https://unix.stackexchange.com/) or [serverfault](https://serverfault.com/)).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T22:54:00.157

To get both the script to continue and having it giving it status even though the user refresh this is a bit of work.

The super easy approach is to drop the the second part. If you just need a action to be executed server side you could have a XHR (aka ajax) and give the progression with a long polling approach.

If you want the process to be independent from the user connection you need to spawn a new PHP instance each time. and then find a way to get its output to the user. You could store the output into a redis for example.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T09:33:30.577

您想要做的是以下内容：

单击按钮调用您的处理脚本。然后，处理脚本应使用[ignore_user_abort](http://php.net/manual/de/function.ignore-user-abort.php)来处理请求，以防止脚本在浏览器继续移动时停止，然后使用[header('Location: success.html'); 重定向broser；](http://de3.php.net/manual/de/function.header.php)

```
<?php
  ignore_user_abort(true);
  header('Location: success.html');
  echo 'Making sure the header gets flushed';
  flush();

  //Send out the mails
?> 
```

但是，您需要确保脚本没有活动的输出缓冲。如果您正在使用一些压缩模块或任何可能等待整个过程完成后再交付内容并因此冻结整个内容的东西。最好是禁用脚本 url 的任何输出缓冲。

这类似于您在 PHP 中创建守护程序的方式。

# iphone - iphone上的XMLParser重复元素

> ID：12682189
> 
> 赞同：0
> 
> 时间：2012-10-01T22:46:45.017
> 
> 标签：iphone, ios, xml

我有一个`NSXMLParser`使用 Apple 的事件驱动 XML 处理实现来解析 XML 文件的 .

我已经正确设置了它，但是当我进行实际解析时，它会在解析时两次遍历相同的元素。

我的代码如下所示：

```
AppDelegate *myApp = (AppDelegate*)[[UIApplication sharedApplication] delegate];
NSData *tempData = [myApp.stringDetails dataUsingEncoding:NSUTF8StringEncoding];
NSString *textFields = [NSString string];
NSXMLParser *parser = [[NSXMLParser alloc]initWithData:tempData];
[parser setDelegate: self];
if ([parser parse]!= YES) {
    NSLog(@"%@", parser.parserError.description);
} 
```

* * *

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName     namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {
    textFields = elementName;
}
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {
    if ([textFields isEqualToString:@"firstName"]) {
        [firstName setText:string];
        NSLog(@"first name is %@", string);
        return;
    }
    if ([textFields isEqualToString:@"lastName"]) {
        [lastName setText:string];
        NSLog(@"last name is %@", string);
        return;
    }
}
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {
    return;
} 
```

我正在解析的 XML 文档如下所示：

```
<details>
<firstName>tester</firstName>
    <lastName>testingson</lastName>
    <address>
    <street1>123 Main St.</street1>
    <street2></street2>
    <city>Anywhere</city>
    <state>BC</state>
    <country></country>
    <postalCode>A0A0B0</postalCode>
</address>
<company>TEST</company>
<email>testing@test.com</email>
<cabbieNo>TEST</cabbieNo>
<driversLicense>TEST</driversLicense>
<plateNo>TEST</plateNo> 
<services>
    <taxi>1</taxi>
    <ladies>1</ladies>
    <limo>1</limo>
    <handicap>1</handicap>
</services>
</details> 
```

奇怪的是，我的调试日志是这样的：

```
2012-10-01 15:36:35.742 myAPP[9974:c07] first name is tester
2012-10-01 15:36:35.743 myAPP[9974:c07] first name is
2012-10-01 15:36:35.743 myAPP[9974:c07] last name is testingson
2012-10-01 15:36:35.744 myAPP9974:c07] last name is 
```

正如你所看到的，它浏览了每个元素两次，但第二次`string`是空的（这不应该发生......事实上甚至不应该有第二个`foundCharacters`事件）。你们知道为什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T23:01:43.950

您应该在 didEndElement 中获得 Element 结果

这是示例

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/XMLParsing/Articles/HandlingElements.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/XMLParsing/Articles/HandlingElements.html)

在`- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string`

您应该附加字符串（找到的字符），例如：

```
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {
    if (!currentStringValue) {
        // currentStringValue is an NSMutableString instance variable
        currentStringValue = [[NSMutableString alloc] initWithCapacity:50];
    }
    [currentStringValue appendString:string];
} 
```

希望这对您有所帮助。

# c++ - 使用opencv进行年龄估计的方法

> ID：12682198
> 
> 赞同：6
> 
> 时间：2012-10-01T22:47:35.890
> 
> 标签：c++, opencv, machine-learning, computer-vision

过去我使用 LDA 进行过性别识别。在实现方面，它就像干枯的面部识别一样，我只是训练了一组面孔，并按男性或女性而不是姓名或 ID 对它们进行分类。给定足够大的数据集，这种方法是否可行？

如果上述方法不是一个好方法（我真的不这么认为），那么使用 OpenCV 执行年龄估计有哪些不同的方法/方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T13:26:49.917

在我看来，GD Guo 和他的同事的工作可能代表了对自动年龄分类问题的最新和集中研究之一。有关出版物的完整列表，请参见[此处](http://pages.cs.wisc.edu/~gdguo/publications.html)。

要回答您最初的问题：从 2010 年的调查论文“Age Synthesis and Estimation Via Faces: a Survey”中，从大型注释数据库中提出了一系列数据驱动技术确实可行（p. 1968）。至于用于年龄估计的各种算法的实际性能：作为平均年龄误差和累积分数指标报告的相当令人印象深刻的分类水平是可能的（参见第 1970 页上的表 1） - 对选择有通常的警告特征选择、模型表示等。

如何在 OpenCV 中实现当前性能最好的算法可能会很棘手 - 但应该是可能的！

**编辑**：我想到的一件快速的事情 - 在没有当前流行的生物启发特征的情况下，您可以使用 OpenCV 对 HoG 描述符的支持（这实际上是受生物学启发的）。

参见例如：

[使用 OpenCV 提取 HoG 特征](https://stackoverflow.com/questions/11626140/extracting-hog-features-using-opencv)

[HOG 使用 OpenCV、HOGDescriptor 在 C++ 中进行可视化](https://stackoverflow.com/questions/10862542/hog-features-visualisation-with-opencv-hogdescriptor-in-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T02:09:44.837

我只看到通过[Cascade Classifier Training使用](http://docs.opencv.org/doc/user_guide/ug_traincascade.html)[机器学习](http://books.google.com.br/books?id=seAgiOfu2EIC&pg=PA460&lpg=PA460&dq=opencv%20age&source=bl&ots=hSH96jeFQb&sig=xEXlYiS8rvm_qOQ2FefN6BEWhjI&hl=en&sa=X&ei=CkxqUPe9Ae6y0AGvrYGwDQ&redir_esc=y#v=onepage&q=opencv%20age&f=false)来完成这些工作。

# android - Android MediaRecorder 某些设备上的低音量 (HTC ONE S)

> ID：12682202
> 
> 赞同：2
> 
> 时间：2012-10-01T22:48:11.110
> 
> 标签：android, media-player, volume, mediarecorder

我使用以下代码创建了录制一些音频的 android 应用程序（取自官方 android 开发人员指南）

```
MediaRecorder recorder = new MediaRecorder();       
recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
final String fileName = getFileName();
recorder.setOutputFile(fileName);
recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
try {
    recorder.prepare();
} catch (Exception e) {
    throw new RuntimeException("Failed to prepare recorder", e);
}
recorder.start(); 
```

录制后，我播放录制的音频

```
MediaPlayer player = new MediaPlayer();
player.setDataSource(new FileInputStream(getFileName()).getFD());
player.prepare();
player.start(); 
```

我还在录制通话录音时分析音频 recorder.getMaxAmplitude();

我在两台设备上运行此程序：HTC ONE S（搭载 Android 4）和相当低端的三星 Galaxy Young（GT-S5360，搭载 Android 2.3.6）。我尝试记录一些背景噪音（同一个房间里的收音机）。非常令人失望的是，三星设备报告的幅度高于 1000，有时甚至超过 10000，而 HTC 高端设备报告的幅度低于 1000 (200-400)。根据这些幅度，htc 设备上的音频播放音量非常差，而三星录制的音频的音量处于可接受的水平。（两个设备都将媒体音量设置为高）。

但是当我在 htc 设备上使用工厂提供的视频/音频录制应用程序时，当我播放它时，音频似乎非常敏感。

我尝试使用所有可用的 MediaRecorder.AudioSource 值进行录制，并且它们中的大多数值都相同，而对于某些（VOICE_CALL，VOICE_UPLINK）神秘地不起作用 知道这里可能出了什么问题吗？

最好的问候， 米科拉伊

# php - 使用 7BIT 内容传输编码解析电子邮件正文 - PHP

> ID：12682208
> 
> 赞同：7
> 
> 时间：2012-10-01T22:48:26.323
> 
> 标签：php, email, imap, decode

我最近一直在实现一些基于 PHP/IMAP 的电子邮件处理功能，并且除了消息正文解码（在某些情况下）之外，大多数东西都运行良好。

我认为，到目前为止，我已经记住了一半的[RFC 2822](http://www.faqs.org/rfcs/rfc2822.html)（“Internet 消息格式”文档指南），通读了六个开源 CMS 的电子邮件处理代码，并阅读了大量论坛帖子、博客帖子、等处理在 PHP 中处理电子邮件。

我还分叉并完全重写了一个用于 PHP、[Imap](https://github.com/geerlingguy/Imap)的类，并且该类可以很好地处理电子邮件——我有一些有用的方法来检测自动回复器（用于不在办公室、旧地址等），解码 base64 和 8bit消息等

**但是，我根本无法可靠地工作的一件事（或者，有时，根本无法）是当消息以`Content-Transfer-Encoding: 7bit`.**

似乎不同的电子邮件客户端/服务解释`7BIT`为不同的事物。我收到了一些据称`7BIT`实际上*是*Base64 编码的电子邮件。我得到了一些*实际上是*引用可打印编码的。还有一些没有以任何方式编码。还有一些是 HTML，但未指示为 HTML，它们也被列为`7BIT`...

以下是使用 7Bit 编码接收的消息正文的一些示例（片段）：

1：

```
A random message=20

Sent from my iPhone 
```

2：

```
PGh0bWwgeG1sbnM6dj0idXJuOnNjaGVtYXMtbWljcm9zb2Z0LWNvbTp2bWwi
IHhtbG5zOm89InVybjpzY2hlbWFzLW1pY3Jvc29mdC1jb206b2ZmaWNlOm9m 
```

3：

```
tangerine apricot pepper.=0A=C2=A0=0ALet me know if you have any availabili=
ty over the next month or so. =0A=C2=A0=0AThank you,=0ANames Withheld=0A908=
-319-5916=0A=C2=A0=0A=C2=A0=0A=C2=A0=0A=0A=0A______________________________=
__=0AFrom: Names Witheld =0ATo: Names Withheld= 
```

这些都是**用**“7Bit”编码发送的（嗯，至少根据 PHP/ `imap_*`），但在我可以将它们作为纯文本传递之前，它们显然需要更多的解码。有什么方法可以可靠地将所有具有所谓 7Bit 编码的消息转换为纯文本？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-03T00:48:39.227

在花了更多时间之后，我决定写一些启发式检测，正如 Max 在我最初问题的评论中所建议的那样。

我在[Imap.php](https://github.com/geerlingguy/Imap/blob/c4b54e52576bf71a93045d2a4581589eab9a00b6/JJG/Imap.php#L398)`decode7Bit()`中构建了一个更强大的方法，它通过一堆常见的编码字符（如）并将它们替换为它们的 UTF-8 等价物，然后如果它们看起来像是 base64 编码的，也会解码消息：`=A0`

```
/**
 * Decodes 7-Bit text.
 *
 * PHP seems to think that most emails are 7BIT-encoded, therefore this
 * decoding method assumes that text passed through may actually be base64-
 * encoded, quoted-printable encoded, or just plain text. Instead of passing
 * the email directly through a particular decoding function, this method
 * runs through a bunch of common encoding schemes to try to decode everything
 * and simply end up with something *resembling* plain text.
 *
 * Results are not guaranteed, but it's pretty good at what it does.
 *
 * @param $text (string)
 *   7-Bit text to convert.
 *
 * @return (string)
 *   Decoded text.
 */
public function decode7Bit($text) {
  // If there are no spaces on the first line, assume that the body is
  // actually base64-encoded, and decode it.
  $lines = explode("\r\n", $text);
  $first_line_words = explode(' ', $lines[0]);
  if ($first_line_words[0] == $lines[0]) {
    $text = base64_decode($text);
  }

  // Manually convert common encoded characters into their UTF-8 equivalents.
  $characters = array(
    '=20' => ' ', // space.
    '=E2=80=99' => "'", // single quote.
    '=0A' => "\r\n", // line break.
    '=A0' => ' ', // non-breaking space.
    '=C2=A0' => ' ', // non-breaking space.
    "=\r\n" => '', // joined line.
    '=E2=80=A6' => '…', // ellipsis.
    '=E2=80=A2' => '•', // bullet.
  );

  // Loop through the encoded characters and replace any that are found.
  foreach ($characters as $key => $value) {
    $text = str_replace($key, $value, $text);
  }

  return $text;
} 
```

这取自我在 GitHub 上[的 PHP 的 Imap 类的1.0-beta2 版本。](https://github.com/geerlingguy/Imap)

如果您对提高效率有任何想法，请告诉我。我最初尝试通过`quoted_printable_decode()`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-16T15:58:15.517

我知道这是一个老问题......但我现在遇到了这个问题，似乎 PHP 现在有一个解决方案。

这个函数[imap_fetchstructure()](http://php.net/manual/en/function.imap-fetchstructure.php)会给你编码的类型。

```
0   7BIT
1   8BIT
2   BINARY
3   BASE64
4   QUOTED-PRINTABLE
5   OTHER 
```

从那里你应该能够创建一个这样的函数来解码消息

```
function _encodeMessage($msg, $type){

            if($type == 0){
                return mb_convert_encoding($msg, "UTF-8", "auto");
            } elseif($type == 1){
                return imap_8bit($msg); //imap_utf8
            } elseif($type == 2){
                return imap_base64(imap_binary($msg));
            } elseif($type == 3){
                return imap_base64($msg);
            } elseif($type == 4){
                return imap_qprint($msg);
                //return quoted_printable_decode($msg);
            } else {
                return $msg;
            }
        } 
```

你可以像这样调用这个函数

```
$struct = imap_fetchstructure($conn, $messageNumber, 0);
$message = imap_fetchbody($conn, $messageNumber, 1);
$message = _encodeMessage($message, $struct->encoding);
echo $message; 
```

我希望这可以帮助别人 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-14T20:57:20.280

`$structure = imap_fetchstructure;` 不是`$encoding = $structure->encoding` 但`$encoding = $structure->parts[ $p ]->encoding`

我想我遇到了同样的问题，现在已经解决了。（7bit 没有转换为 UTF-8，一直得到 ASCII）我以为我有 7bit，但是将代码更改为“但”我得到了`$encoding=4`，这并不`$encoding=0`意味着我必须得到我想要的东西`imap_qprint($body)`。`mb_convert_encoding($body, 'UTF-8', $charset)`

无论如何检查编码号！（应该是 4 不为零）

# c# - TextBox Word-Wrapping 将字符串拆分为行

> ID：12682209
> 
> 赞同：4
> 
> 时间：2012-10-01T22:48:28.893
> 
> 标签：c#, string, textbox, word-wrap

这是我第一次就这项令人惊叹的服务发布问题，因为今天它通过阅读它对我有很大帮助。

目前，我正在制作需要使用大量文本框的小型 C# 应用程序。在 TextBox 属性中，我检查了**MultiLine**和**Word-Wrap**函数。因此，当用户输入文本时，它会正确显示在多行中。

我的问题是如何获得那些显示在表单上的字符串列表中的行，而不是一个大字符串。

我还没有区分天气**自动换行功能**创建新行或在每行末尾添加“\n\r”。我试图从**TextBox.Lines**获取行，但它只有 TextBox.Lines[0]，它包含整个字符串形式的 TextBox

我已经尝试了很多东西并研究了很多资源，但我仍然没有找到解决这个问题的正确方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T23:23:34.867

这里有很多角落案例。您要使用的核心方法是`TextBox.GetFirstCharIndexFromLine()`，它允许您在 TextBox 应用 WordWrap 属性后迭代行。样板代码：

```
 var lines = new List<string>();
    for (int line = 0; ;line++) {
        var start = textBox1.GetFirstCharIndexFromLine(line);
        if (start < 0) break;
        var end = textBox1.GetFirstCharIndexFromLine(line + 1);
        if (end == -1 || start == end) end = textBox1.Text.Length;
        lines.Add(textBox1.Text.Substring(start, end - start));
    }
    // Do something with lines
    //... 
```

请注意，行尾包含在*lines*中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T01:19:19.697

可以获取行数并直接构建行数组。这包括由于 WordWrap 而生成的行。

```
// Get the line count then loop and populate array
int lineCount = textBox1.GetLineFromCharIndex(textBox1.Text.Length) + 1;

// Build array of lines
string[] lines = new string[lineCount];
for (int i = 0; i < lineCount; i++)
{
    int start = textBox1.GetFirstCharIndexFromLine(i);
    int end = i < lineCount - 1 ? 
        textBox1.GetFirstCharIndexFromLine(i + 1) :
        textBox1.Text.Length;                            
    lines[i] = textBox1.Text.Substring(start, end - start);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T22:59:19.280

你可以拿出单曲`string`，然后用它做任何你想做的事情。

根据分隔符将字符串拆分为字符串列表很简单：

[https://stackoverflow.com/a/1814568/13895](https://stackoverflow.com/a/1814568/13895)

# php - 使用命名参数选择 PDO（不可能？）

> ID：12682210
> 
> 赞同：1
> 
> 时间：2012-10-01T22:48:36.497
> 
> 标签：php, mysql, select, pdo

> **可能重复：**
> [PHP PDO 语句可以接受表名作为参数吗？](https://stackoverflow.com/questions/182287/can-php-pdo-statements-accept-the-table-name-as-parameter)

您可以在查询的 SELECT 部分使用命名参数吗？

例子：

```
$stmt = $conn->prepare('SELECT Available, UserFileName, NameOnServer, :levelid FROM productpage WHERE productID = :prodid');
$stmt->execute(array('levelid'=> $LevelCheck, 'prodid'=> $ProductID)); 
```

在上面的代码中，“levelid”似乎不起作用（在包含的代码上方定义了 $LevelCheck）

如果我用实际的列名替换命名参数，它工作正常。

如果这不可能，我想知道是否有人可以对我提出建议？有不同的列，用户指定要搜索的列。

感谢您花时间看这个！

# c - 达到一定时间后杀死子进程

> ID：12682211
> 
> 赞同：1
> 
> 时间：2012-10-01T22:48:44.797
> 
> 标签：c, linux, process, fork

我这里有这段代码，它是通过并行或顺序在不同的进程中多次执行一个程序。一段时间后，我需要杀死所有孩子才能停止程序。

但是每当我试图杀死孩子时，当前正在执行这一行的孩子 execvp(cmdTokens[0], cmdTokens); 将不会停止，直到它完成。似乎它会杀死循环，但不会杀死当前正在运行的孩子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:15:32.953

如果成功，exec 类函数将永远不会返回。它们本质上将您的流程转变为您正在调用的东西。这就是为什么你在调用 exec 之前 fork 假设你想保持你的原始进程运行。如果他们无法启动进程（例如找不到文件），他们可以返回。

# r - 如何让 spplot（晶格）不在多边形周围绘制边框

> ID：12682212
> 
> 赞同：8
> 
> 时间：2012-10-01T22:48:47.163
> 
> 标签：r, gis, geospatial, lattice

我有一个按邮政编码的计数，其中有很多要绘制的多边形（准确地说是 30,357）。因此，当我看到`pdf`的`spplot`只是边界而不是等值线内部。

因此，我想关闭绘制边界，或者至少能够使它们变得更薄。然而，深入挖掘`?spplot`它的各种分支（面板功能、水平图等）却是空的。

这是一个可以使用的示例（边界在这里并不突出，但它们将被赋予 bajillion 多边形）：

```
library(sp)
Srs1 = Polygons(list(Polygon(cbind(c(2,4,4,1,2),c(2,3,5,4,2)))), "s1")
Srs2 = Polygons(list(Polygon(cbind(c(5,4,2,5),c(2,3,2,2)))), "s2")

SpDF <- SpatialPolygonsDataFrame( SpatialPolygons(list(Srs1,Srs2)), 
            data.frame( z=1:2, row.names=c("s1","s2") ) )
spplot(SpDF, zcol="z") 
```

![散点图](../Images/0782d488f771f88b4efeca862a846f4b.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-01T23:59:20.967

看起来你只需要设置`col="transparent"`，就像这样：

```
spplot(SpDF, zcol="z", col="transparent") 
```

![在此处输入图像描述](../Images/de5f0ca6d41ae86296cffca4d4aa9b5e.png)

# c - c语言中的消息框挂钩问题

> ID：12682213
> 
> 赞同：-1
> 
> 时间：2012-10-01T22:48:49.550
> 
> 标签：c, messagebox, event-hooking

你好，我开始在 c 中使用钩子，我想制作一个执行消息框
钩子的程序，我对钩子很陌生，但经过大量阅读后，我理解到足以制作一个创建窗口并执行钩子的程序，但是我的问题是我看不到窗户

任何帮助将不胜感激
这里是休闲代码：

```
static HHOOK hMsgBoxHook;

LRESULT CALLBACK WndProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)
{

    switch(msg)
    {
        case WM_CLOSE:
            DestroyWindow(hwnd);
        break;
        case WM_DESTROY:
            PostQuitMessage(0);
        break;
        default:
            return DefWindowProc(hwnd, msg, wParam, lParam);
    }
    return 0;
}

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,
    LPSTR lpCmdLine, int nCmdShow)
{
    WNDCLASSEX wc;
    HWND hwnd;
    MSG Msg;

    //Step 1: Registering the Window Class
    wc.cbSize        = sizeof(WNDCLASSEX);
    wc.style         = 0;
    wc.lpfnWndProc   = WndProc;
    wc.cbClsExtra    = 0;
    wc.cbWndExtra    = 0;
    wc.hInstance     = hInstance;
    wc.hIcon         = LoadIcon(NULL, IDI_APPLICATION);
    wc.hCursor       = LoadCursor(NULL, IDC_ARROW);
    wc.hbrBackground = (HBRUSH)(COLOR_WINDOW+1);
    wc.lpszMenuName  = NULL;
    wc.lpszClassName =  L"Csam";
    wc.hIconSm       = LoadIcon(NULL, IDI_APPLICATION);

    if(!RegisterClassEx(&wc))
    {
        MessageBox(NULL, L"Window Registration Failed!", L"Error!",
            MB_ICONEXCLAMATION | MB_OK);
        return 0;
    }

    // Step 2: Creating the Window
    hwnd = CreateWindowEx(
        WS_EX_CLIENTEDGE,
        L"myWindowClass",
        L"The title of my window",
        WS_OVERLAPPEDWINDOW,
        CW_USEDEFAULT, CW_USEDEFAULT, 240, 120,
        NULL, NULL, hInstance, NULL);

    if(hwnd == NULL)
    {
        MessageBox(NULL, L"Window Creation Failed!", L"Error!",
            MB_ICONEXCLAMATION | MB_OK);
        return 0;
    }

    ShowWindow(hwnd, nCmdShow);
    UpdateWindow(hwnd);

    // Step 3: The Message Loop
    while(GetMessage(&Msg, NULL, 0, 0) > 0)
    {
        TranslateMessage(&Msg);
        DispatchMessage(&Msg);
    }
    return Msg.wParam;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:02:14.060

您注册类的类名与用于创建窗口的类不匹配，并且用于创建窗口的类不是现有的系统类。因此，`CreateWindowEx`不知道您的窗口基于什么。

因此，您将收到错误消息框，并在调用时`GetLastError`返回。`ERROR_CANNOT_FIND_WND_CLASS`如果您有问题，请始终使用适当的错误工具。

# activerecord - Sinatra 与 Padrino 或 Rails 的 Web API？

> ID：12682214
> 
> 赞同：1
> 
> 时间：2012-10-01T22:48:55.263
> 
> 标签：activerecord, ruby-on-rails-3.1, sinatra, padrino

我已经在 Rails 中编程大约 7 个月了。主要是一个管理数据库的应用程序，你知道，清理，更新，删除，查找孤立条目等。

我有一个 API 可以与我们用 PHP 编写的桌面程序对话。我们现在发现自己想把一切都转移到 Ruby 上。这个 API 需要快如闪电，并且不会有任何视图或任何类型的 HTML 页面，它只会通过 JSON 与我们的应用程序通信，发送和接收应用程序将显示和使用的数据。

所以，基本的问题是，我应该学习 Sinatra 和 Padrino（使用 ActiveRecord）并用它们构建 API，还是在 Rails 中完成？

如果我使用 Rails，我可以保留很多我拥有的代码，甚至可以使用现有代码，因为所有表都是相同的（数据库相同），并且只需为 API 编写更多方法。

我认为这样做的缺点是双重的：

1.  这意味着代码更难管理和阅读，因为现在我们有了 API 位和所有维护位。
2.  这意味着同一个 Ruby 应用程序正在做双重工作，因此 API 不会像在另一个单独的 Ruby 应用程序中运行一样快。
3.  Rails 应用程序在速度方面已经不是很好，但我怀疑这与我们的托管解决方案有关，而不是与 Rails 本身有关。

学习 Sinatra 和 Padrino 可能需要更多的工作，但会带来更简洁的代码和用于 API 的单独 Ruby 应用程序和另一个用于维护的听起来更好的应用程序。

但是我对Sinatra和Padrino一无所知，足迹和速度*真的*比Rails好吗？

我非常感谢那些实际使用 Rails 和 Sinatra 和 Padrino 的人的意见。

干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T07:29:27.430

Sinatra 和 Padrino 不会自动比 Rails*快。*它们只是*比*Rails 小（并为开发人员提供了一个更小、更集中的工具包）。应用程序速度主要取决于您的代码（和算法）。优雅、可维护性和其他方面通常也是如此。

如果您已经拥有在 Rails 上运行的良好、可维护的代码，那么您很可能应该改进它。使用良好的托管/缓存解决方案使其更快，并通过重构保持优雅和可维护。

如今，Rails 和 Sinatra 都为 RESTful Web 服务的开发提供了非常好的支持，更普遍地，为无 UI API 的开发提供了很好的支持。Rails 更大，需要更多时间来驯服，但幸运的是，您不必学习和使用所有这些庞然大物来完成工作。在 Rails 上运行的应用程序可以与在 Sinatra 上运行的应用程序一样快速和优雅，因为实际用于处理 REST 请求的 Rails 子集与整个 Sinatra 框架一样小而优雅。因此，应用程序速度主要取决于您的代码和您的托管/缓存选择。

On the other side, you ought learn Sinatra and Padrino in any case. These frameworks are two of the most elegant and fascinating pieces of software I have ever seen. They absolutely deserve your attention. Just keep in mind that Sinatra, used alone, is normally not enough for anything more complex than a UI-less RESTful API. Most likely a real, full-blown web application will require Padrino.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:06:56.740

If you have an existing Rails app already, it might be easier to port it over to [rails-api](https://github.com/spastorino/rails-api "rails-api"). It's basically just Rails but stripped of all components used in making UIs.

I haven't personally used it but I was evaluating it for a project a few months ago.

# javascript - 从单独的经典 ASP 页面调用 Javascript 函数

> ID：12682215
> 
> 赞同：0
> 
> 时间：2012-10-01T22:48:56.570
> 
> 标签：javascript, jquery-ui, asp-classic

我正在更新一个经典 ASP 页面 (login.asp)，其中包括另一个经典 ASP 页面 (logincode.asp -- 包含第一页的功能)。

以前，点击登录按钮后，它会在 logincode.asp 上运行几个功能，然后在需要时打开一个条款协议对话框......

```
If Not Application("RequireTermsAcceptance") Then
    Response.Redirect(redirectURL)
Else 
    response.Write("<script>$(function () {displayTerms();});</script>")
End If 
```

...这可以通过在 login.asp 上调用 Javascript 函数来实现

```
<script>
function displayTerms() {
        //open Dialog box here
    }
</script> 
```

对话框有两个按钮……一个根据协议将它们传递到下一页，另一个将它们返回到 login.asp。

但是，新设置不想再正常使用该功能。

这有几个可能的原因......

1.  使用较新版本的 jquery ui ... jqueryui/1.8.8/jquery-ui.min.js - 在旧版本上 ... jquery-ui-1.8.16.custom.min.js 在新版本上。
2.  在调用 displayTerms 函数之前，旧版本不会构建 jquery UI 对话框。新的在 $(document).ready(function () 中构建 jquery UI 对话框，但在调用 displayTerms 函数之前是隐藏的。
3.  displayTerms 函数的位置错误。目前在新版本中它位于 $(document).ready(function () 部分。但我不确定这是正确的位置。

我对javascript语法不够熟悉，不知道对displayTerms函数的调用需要如何改变，但它仍然需要在响应中。我相信写。目前，代码一直执行，但是当它到达应该调用 displayTerms 函数的 response.Write 时，它​​点击它，传递它，然后简单地重新加载 login.asp 页面。

任何关于这应该如何工作的建议将不胜感激。如果您需要更多详细信息，请告诉我，我很乐意提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T23:04:17.967

尝试在$(document).ready(function () { ... });`<!-- '#include file="../includes/logincode.asp"-->` **之后移动**

# c - C Pointers and Arrays Incompatible Types

> ID：12682222
> 
> 赞同：0
> 
> 时间：2012-10-01T22:50:12.263
> 
> 标签：c, arrays, pointers, types

So I was wondering why I can't do this.

```
int main(int argc, char **argv){

    FILE *src;
    char filePath[261];
    filePath = argv[1]; 
```

The last line is where there is a compiler error. What's the difference between char[] and char*? How would I fix this code so I can set filePath equal to argv[1]. Thanks in advance.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T22:52:10.100

Use

```
strcpy(filePath, argv[1]); 
```

and live happy. Don't forget to check argv[1] for being NULL and don't forget to see if argc is > 1.

Your `filePath` variable is a fixed-size array which is allocated on the stack and argv[i] is a pointer to some memory in the heap. Assigning to filePath cannot be done, because filePath is not a pointer, it is the data itself.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T22:52:12.917

Because `filePath` is an array and it's not allowed to modify the address of an array in C. You can use the [string family](http://linux.die.net/man/3/string) to copy the strings.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T22:52:29.450

You need to have:

```
FILE *src;
char *filePath;
filePath = argv[1]; 
```

since `filePath` must *point* to argv, not to an array of 261 bytes. If you want, you can *copy* the argumenti into the array:

```
FILE *src;
char filePath[261];
strcpy(filePath, argv[1]); 
```

or better, to avoid risking copying more bytes than you have available (which would result in disaster):

```
FILE *src;
char filePath[261];
strncpy(filePath, argv[1], sizeof(filePath)); 
```

or again

```
#define MAX_FILESIZE    261

FILE *src;
char filePath[MAX_FILESIZE];
strncpy(filePath, argv[1], MAX_FILESIZE); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T22:58:37.867

问：char[] 和 char* 有什么区别？

A：很多时候，你可以互换使用它们。

但是在这里，您“尝试将数组名称用作左值”:)

这是一个很好的解释：

*   [http://eli.thegreenplace.net/2011/12/15/understanding-lvalues-and-rvalues-in-c-and-c/](http://eli.thegreenplace.net/2011/12/15/understanding-lvalues-and-rvalues-in-c-and-c/)

以下是“什么是合法的，什么不是”的简短摘要：

*   [http://msdn.microsoft.com/en-us/library/bkbs2cds.aspx](http://msdn.microsoft.com/en-us/library/bkbs2cds.aspx)

# java - How do i view or access java docs offline?

> ID：12682224
> 
> 赞同：1
> 
> 时间：2012-10-01T22:50:13.483
> 
> 标签：java, javadoc

I downloaded java docs or what i think was java docs from oracle. But i'm not really sure how to summon all that drama without going online or using eclipse.

By the way, I use jedit. (Yeah, baby. Hurts so good). I'm a student, and i need to limit my distractions and going online is my enemy right now. Any help would help. Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T22:54:28.560

使用您的网络浏览器并打开`index.html`可能位于`docs`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T10:26:59.150

下载 HTML 帮助格式的 Javadoc 以供离线使用。仅适用于 Windows 用户。 [http://www.allimant.org/javadoc/](http://www.allimant.org/javadoc/)

# git - Migrating from one GIT repo to another - how to sync latest commits?

> ID：12682231
> 
> 赞同：2
> 
> 时间：2012-10-01T22:51:16.320
> 
> 标签：git, migration, branch, sync

I am migrating contents of a branch from one repo to two newly created repos. Lets say, I have a "Product-A" branch (containing components X and Y), the contents of which are being migrated to 2 newly created repos (one for each of X, Y). I have pushed the contents of Product-A branch onto master of new repos successfully. On the day of migration, I locked Product-A branch to prevent any check-ins. My problem is - how can I bring the master branch of new repos in sync with latest commits on Product-A? The contents on new repos have been manipulated to an extent where the directory structure on Product-A branch (of old repo) looks different from contents on new repos. A merge is practically not easy because of these changes. I appreciate any suggestions, thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T23:28:33.153

你看过像[git-stitch-repo](https://metacpan.org/module/git-stitch-repo)这样的工具吗？或者这个问题： [组合多个 git 存储库](https://stackoverflow.com/questions/277029/combining-multiple-git-repositories)？

从您的问题来看，在不解决目录结构更改的情况下，“同步”的含义有点难以理解。你的意思是同步在不同目录中的相同文件的某种方式吗？

我，我会在每个 repo 中创建一个特殊的“sync_branch”，合并来自产品 A 的更改，而不是将该分支合并到 master。

# php - 将 MongoId 对象数组转换为字符串数组

> ID：12682232
> 
> 赞同：3
> 
> 时间：2012-10-01T22:51:24.540
> 
> 标签：php, arrays, mongodb

```
    [a] => 数组 (
      [0] => MongoId 对象 (
        [$id] => 506479dc9a5be1596b1bd97d
      ),
      [1] => MongoId 对象 (
        [$id] => 506479dc9a5be1596b1bd97d
      )
    )

```

我有一个像这样的数组。我需要将值更改为字符串，以将其更改为如下内容：

```
array (
  0 => "506479dc9a5be1596b1bd97d",
  1 => "506479dc9a5be1596b1bd97d",
) 
```

这是我的解决方案，但它很昂贵，我将`for`循环使用它。

```
$yut = implode(",", $a);
$arr = explode(",", $yut); 
```

还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T22:55:58.937

您可以使用`array_map`调用[MongoId::__toString()](http://php.net/manual/en/mongoid.tostring.php)将数组中的所有 Mongo 对象转换为字符串

```
$list = array_map(function($var){ return $var->__toString(); }, $yourArray); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-02T17:54:12.110

```
$new_array = array_map('strval', $array); 
```

strval 是 php 内置函数，返回字符串值

像

```
function ($value){
   return (string)$value;
} 
```

# ios - iOS Enterprise app distribution helper that doesn't require UDIDs setting up

> ID：12682233
> 
> 赞同：2
> 
> 时间：2012-10-01T22:51:42.107
> 
> 标签：ios, testflight

I have an Enterprise Program account in the Apple developer program. Currently I'm using TestFlight to distribute an app, which still seems to require that the distribution profile contain each tester's UDID (even for Enterprise apps).

Are there any alternatives to TestFlight (aside from basic DIY placing of the files on a webserver somewhere) that will let me

a) distribute my Enterprise app without the UDID hassle,

b) still allow some control over who installs the app,

c) offer some features similar to TestFlight?

I've googled for this but it's tricky to formulate a search for these criteria.

**Update**

The Enterprise program forbids distribution of the app to anyone outside your own organisation. I'm curious if this would apply to a service such as TestFlight; this might exaplin the lack of such 3rd party services that can distribute your enterprise apps in the true enterprise fashion (as opposed to treating them as Ad Hoc where UDIDs are required still).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T16:37:14.200

TestFlight 现在支持上传企业版本（没有任何关联的 UDID）。也许一直都是！很长一段时间我都确信这是不允许的，但现在我找不到任何证据来证实这一点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-29T17:33:21.607

“麻烦”不是由 TestFlight 引起的，而是由 Apple 引起的——如果没有为它签名，设备将拒绝应用程序，因此没有 UDID 就没有服务工作。

附言。您可以随时越狱您的设备并禁用签名检查，但我不知道有任何服务可以利用这一点。

# asp.net-mvc - MVC Routing to use optional subfolder (like a set of virtual directories)

> ID：12682234
> 
> 赞同：1
> 
> 时间：2012-10-01T22:51:46.460
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, maproute

Here's the problem that I have been tearing hair out over since Friday.

I have a single MVC application that serves several different subgroups for a single client. For branding and for some style elements, the Url's need to be formatted like: www.site.com/Login www.site.com/Client1/Login www.site.com/Client2/Login www.site.com/Client3/Login and so on.

We would also like to maintain this structure, moving onto www.site.com/Client1/News, etc.

Static routing is off the table. Even a tool to generate them. The site will have X pages with a unique route for Y clients, and I shudder to think about the performance. And because of teh dynamic nature, creating virtual dirs on the fly is not a route I want to travel down.

At first the solution seemed trivial. I tried two test solutions.

The first derived from CustomRouteBase and was able to determine the correct route in the overridden GetRouteData method and then generate the correct Url using GetVirtualPath. The second solution used constraints to see if a client was in the pattern and route accordingly. Both would hit the correct controllers and generate correct links.

Then I added areas (this is just a prototype, but the real site uses areas).

Both solutions failed. The areas were registered properly and worked as they typically should. But with the first solution, I could not find a way to override GetVirtualPath for area registration. I know there is an extension methods off the Area class, but this doesn't fit what I need.

I also tried using a constraint, but the "client" part of the Url was not being added to any of the action links to the areas and trying to route to a controller using a constraint gave me the good old view not found error (searching from the root even though I had specified the area in the route).

So my first question is am I going about this the wrong way? If there is a better way to accomplish this, I am all eras. If not, then how do I manage areas?

I could put some code up here, but it all works for what I want it to do. I'm sort of lost at how to approach the area issue. But unfortunately as always I inherited this project 3 months before launch and my team simply doesn't have the resources to restructure the site without them.

@Max... I tried something similar, but thh areas still would not display their links correctly when in www.site.com/Client1... This is from prototype 6, I tried a few different ways.

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        //throws view engine can't find view error. If I use www.website.com/Client1, hvering over area links does not give the correct path
        routes.MapRoute("Area",
           "{folder}/{area}/{controller}/{action}/{id}",
            new { area = "Authentication", controller = "Authentication", action = "Index", id = UrlParameter.Optional },
            new { folder = new IsFolderContsraint(), area = new IsArea() }
        );

        //works fine.. if I use www.website.com/Client1, hovering over regular (non area) links works fine
        routes.MapRoute("Branded",
        "{folder}/{controller}/{action}/{id}",
        new { controller = "Home", action = "Index", id = UrlParameter.Optional },
        new { folder = new IsFolderContsraint() }
        );

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );
    } 
```

Here is another way I tried to tackle it. Please don't crack on the implementation, it's just a POC. The problem here was that Areas are not part of RouteBase, so I can't modify the virtual paths for them. So every action link, etc, get's rendered correctly and all works well as long as the action is not in an area.

```
public class Folders
{
    private static Dictionary<string, string> _folders= new Dictionary<string, string>()
                                                           {   {"test1", "style1"},
                                                               {"test2", "style2"},
                                                               {"test3", "style3"}
                                                            };

    public static Dictionary<string, string> FolderNames { get { return _folders; } }

}

public class AreaDefinitions
{
    private static Dictionary<string, string> _areas = new Dictionary<string, string>() 
    {  {"Authentication", "Authentication"} };

    public static Dictionary<string, string> AreaDefinition { get { return _areas; } }
}

public class MvcApplication : System.Web.HttpApplication
{
    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new HandleErrorAttribute());
    }

    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.Add(new CustomRouteBase());

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );

    }

    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();
        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);
    }
}

public class CustomRouteBase : RouteBase
{
    public override RouteData GetRouteData(HttpContextBase httpContext)
    {
        //Creates routes based on current app execution pass
        //a bit like doing my own routing constraints, but is more dynamic.
        //get route data (and CreateVirtualPath) will be called for any action needing to be rendered in the current view.
        //But not for areas :( Ugly but just a prototype

        string url = httpContext.Request.AppRelativeCurrentExecutionFilePath;
        url = url.StartsWith("~/") ? url.Substring(2, url.Length - 2) : url;
        string[] urlParts = url.Split(new char[] { '/' }, StringSplitOptions.RemoveEmptyEntries);

        RouteData rd = new RouteData(this, new MvcRouteHandler());

        if (urlParts.Length == 0)
        {
            rd.Values.Add("controller", urlParts.Length > 0 ? urlParts[0] : "Home");
            rd.Values.Add("action", urlParts.Length > 1 ? urlParts[1] : "Index");
            return rd;
        }

        if (Folders.FolderNames.ContainsKey(urlParts[0]))
        {
            if (urlParts.Length > 1 && AreaDefinitions.AreaDefinition.ContainsKey(urlParts[1]))
            {
                rd.DataTokens["area"] = urlParts[1];
                rd.Values.Add("controller", urlParts.Length > 2 ? urlParts[2] : "Home");
                rd.Values.Add("action", urlParts.Length > 3 ? urlParts[3] : "Index");
            }
            else
            {
                rd.Values.Add("controller", urlParts.Length > 1 ? urlParts[1] : "Home");
                rd.Values.Add("action", urlParts.Length > 2 ? urlParts[2] : "Index");

            }
            rd.DataTokens.Add("folder", urlParts[0]);
        }
        else
        {
            rd.Values.Add("controller", urlParts.Length > 0 ? urlParts[0] : "Home");
            rd.Values.Add("action", urlParts.Length > 1 ? urlParts[1] : "Index");

        }
        return rd;

    }

    public override VirtualPathData GetVirtualPath(RequestContext requestContext, RouteValueDictionary values)
    {
        //Assembled virtial path here using route and values.
        //Worked (ugly but functioned, but was never called for areas.) 
        string url = "";
        if (requestContext.RouteData.DataTokens.ContainsKey("folder"))
            url += requestContext.RouteData.DataTokens["folder"] + "/";
        if (values.ContainsKey("controller"))
            url += values["controller"] + "/";
        if (values.ContainsKey("action"))
            url += values["action"];

        var vpd = new VirtualPathData(requestContext.RouteData.Route, url);
        return vpd;
    }
} 
```

Thanks Liam... that's similar to how our view engine is customized, to read from a "plugins" folder first for view overrides. But the problem is a little different here. This is one client that already has a site with view overrides, but in turn has multiple clients of their own. The behavior here is just to control style sheets, logos, etc. After a user is logged in, I can identify what the style and branding should be, but for landing pages the client wants to use a(n) url like "www.site.com/Client1" to identify this. I've given up and written a handler that just turns the request into www.site.com/?client=client1 so I can handle landing page styling, but it would be so much nicer to leave the url as www.ste.com/Client1/login, etc. This is a conversion from a classic asp app that used vdirs to host different directories prior to this. Because of the number of potential clients (100's), static routing gets heavy. My solutions all work to a point... it's the areas that are causing all the problems. If I could just find a way to remap their virtual paths dynamically like I can with the routes I create in RouteBase, I would be in business... I think.

# javascript - THREE.js smooth axis rotation via mouse and THREE.Quaternion

> ID：12682239
> 
> 赞同：0
> 
> 时间：2012-10-01T22:52:20.547
> 
> 标签：javascript, animation, vector, rotation, three.js

I tried to build a smooth rotation for THREE.Object3D via mousemove - without any jitter, gaps, interruption or something else... here is an isolated jsfiddle of my problem: [http://jsfiddle.net/vYvmk/](http://jsfiddle.net/vYvmk/)

I am not getting it - tried several different scenarios via nested groups etc. i guess Quaternion will do the trick but something went wrong...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-16T11:31:08.733

我刚刚发布了一篇关于旋转可能与您正在寻找的对象相似的对象的帖子：Three.js 中的平滑鼠标旋转

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T11:08:13.703

我不确定，但我的 slerp 解决方案看起来像 mesh.lookAt(mouse3D)？！网格应该围绕目标轴连续旋转......我不确定，但 mesh.quaternion.multiplySelf 应该是诀窍 - 从这里我又遇到了问题 =|

```
var v = new THREE.Vector3( mouse2D.y, -mouse2D.x, 0 );//.normalize();
var q = new THREE.Quaternion().setFromEuler( v );
var newQuaternion = new THREE.Quaternion();
THREE.Quaternion.slerp( mesh.quaternion, q, newQuaternion, 0.07 );
mesh.quaternion = newQuaternion;
// mesh.quaternion.multiplySelf( newQuaternion );
mesh.quaternion.normalize(); 
```

见jsfiddle：http: [//jsfiddle.net/DLta8/](http://jsfiddle.net/DLta8/)

# php - CodeIgniter, multiple queries in same model method or multiple calls to model in controller?

> ID：12682240
> 
> 赞同：1
> 
> 时间：2012-10-01T22:52:28.793
> 
> 标签：php, model-view-controller, codeigniter, model, codeigniter-2

I'm just starting to convert some basic applications to CodeIgniter and I'm trying to make sure that I start off on the right footing.

Most actions in my controller require at least 1 query and as I see it there are 2 ways to go about this...

1.  Combine the queries into a single method in the model, therefore making only a single call to the model from the controller.

2.  Have each query be its own method in the model, then call each method in turn from the controller.

So far I've adopted my own policy but I'm not sure if it's advised or breaking the MVC pattern.

If the queries are directly related to one another and only ever run together in sequence (the 2nd query is dependent on the 1st running successful), **or** data from the 1st query is passed to a 2nd query and it's the 2nd query that returns the actual display result set, then I go with **#1**

If each of the queries is returning its own individual result set for display, then I go with **#2**

Is there a recommended way to structure and separate the logic in this scenario?
The last thing I want to do is cause myself a nightmare later down the line. My gut instinct is telling me that as much of the logic should be in the controller as possible.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:08:56.967

你的想法是正确的，如果一组查询只会一起运行，它们应该属于模型中的同一个方法。独立查询应该在它们自己的方法中，这样你可以在需要时从控制器调用它们。

要组合多个查询，您可以从控制器进行多次调用，如下所示：

```
$this->your_model->doQuery1();
$this->your_model->doQuery2();
$this->your_model->doQuery3(); 
```

或者（这就是我要做的），在运行这三个查询的模型中创建一个包装器方法。

所以你可以做

```
$this->your_model->runQueries(); 
```

在哪里

```
function runQueries() {
  $this->doQuery1();
  $this->doQuery2();
  $this->doQuery3(); 
} 
```

这使得以后更改更具延展性。

最后，至于您的陈述“尽可能多的逻辑应该在控制器中”，这实际上违背了`skinny controller, fat model`某些人所认同的学派。与任何其他学派一样，它并非一成不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T01:19:18.803

首先：在退出应用程序的框架上拍打 - 总是一个糟糕的选择。框架不会让你的应用程序更好。他们的存在是为了加快开发速度。

此外，您必须了解 CodeIgniter 并没有真正实现正确的 MVC。相反，它是在模仿 Rails 架构和命名约定。它实际上更接近[MVP](http://www.wildcrest.com/Potel/Portfolio/mvp.pdf)模式。

* * *

无论如何，**控制器必须尽可能轻**。

如果实现正确的 MVC 或受 MVC 启发的模式，所有领域业务逻辑都将在模型层中，所有表示逻辑都在视图中。控制器只会将相关数据传递给模型层和当前视图。

为 CodeIgniter 编写代码时，应在“模型”中保留尽可能多的领域逻辑，并在[视图助手](http://codeigniter.com/user_guide/general/helpers.html)中保留大部分表示逻辑。

CodeIgniter 中所谓的“模型”主要是[领域对象](http://c2.com/cgi/wiki?DomainObject)，它们有时会与存储逻辑（违反[SRP](http://en.wikipedia.org/wiki/Single_responsibility_principle)）合并以实现[活动记录](http://martinfowler.com/eaaCatalog/activeRecord.html)模式。

对您来说最好的选择是创建*更高级别*的“模型”，它将充当[服务](https://en.wikipedia.org/wiki/Service_%28systems_architecture%29)并将控制器与 CodeIgniter 的“模型”的直接交互分开。

在您描述的情况下，您必须向不同的“模型”发出两个请求，此操作将在此类服务中完成。服务聚合来自两个“模型”的数据并将其传递给控制器​​。

* * *

例如：如果您正在注册新用户，则必须执行两个操作 - 为存储中的帐户（通常 - 数据库）创建一个条目并将用户通知发送到电子邮件。这两个操作都可以包含在负责用户管理的服务中。

控制器只会要求服务创建新帐户。事实上，服务将执行多个操作（初始化`User`“模型”，为其分配数据，存储它，然后成功，启动`Mailer`并发送电子邮件）与控制器完全无关。控制器只想知道错误列表（如果列表为空，则一切正常）。

..*我的两分钱*。

# javascript - jQuery 干扰 Twitter 引导轮播

> ID：12682244
> 
> 赞同：0
> 
> 时间：2012-10-01T22:52:45.783
> 
> 标签：javascript, jquery, twitter-bootstrap

在使用 Twitter Bootstrap 的轮播创建网站时，似乎有些脚本会在加载网站时干扰它的自动滑动。但是，一旦您单击轮播中的控件之一，它就可以正常工作。然后它每 5 秒滑动一次，这是默认时间。

由于大小，我宁愿不发布 jsfiddle，所以[生产网站](http://pro-intermediair.nl)必须这样做（不确定这是否违反规则 - 否则我会删除它）。

现在我正在使用一些插件（Newsletter 和 Contact Form 7），其中还包括来自 jQuery 的脚本。我不确定如何从 jQuery 实现 noconflict，或者它是否会有所帮助。

谁能发现问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:29:22.773

我通过将您的站点的副本保存到我的本地驱动器来完成这项工作，我将 bootstrap .js 文件移动到上面文件的底部`</body>`并手动调用轮播，所以它最终看起来像这样

```
<script type="text/javascript" src="./PRO-Intermediair   Your Next Step!_files/bootstrap.min.js"></script>
<script type="text/javascript">
    $('.carousel').carousel();
</script>
</body></html> 
```

**编辑**

我发布了一份副本，因此您可以查看 [http://tctel.com/pro/](http://tctel.com/pro/)

# tomcat - Max concurrent connections to Apache Tomcat 6.0 on windows 7

> ID：12682247
> 
> 赞同：1
> 
> 时间：2012-10-01T22:53:24.513
> 
> 标签：tomcat, windows-7, concurrency

I have a Flex/BlazeDS application developed which is using tomcat. This is working fine in Intranet for probably 10 users concurrently. We are taking this application to the market where the no of users could go up to 50 or more.

Just wanted to know if I can use windows 7 as the server or do I need to get a full blown windows server.

Thanks, Shankar.

# php - 简单的html dom和解析表

> ID：12682249
> 
> 赞同：0
> 
> 时间：2012-10-01T22:53:35.473
> 
> 标签：php, html-parsing, simple-html-dom

我必须解析 2 种表一种是这个

[http://leghe.fantagazzetta.com/f12-13/（“Classifica](http://leghe.fantagazzetta.com/f12-13/) Generale”）

另外两张桌子在这里 [http://leghe.fantagazzetta.com/f12-13/formazioni?id=30339&g=4](http://leghe.fantagazzetta.com/f12-13/formazioni?id=30339&g=4)

如何将这些数据提取到数组中？

对于第一张桌子，我写了这段代码，但我真的不知道我在做什么

```
<?php
require('simple_html_dom.php');

$html = new simple_html_dom();
$html->load_file('http://leghe.fantagazzetta.com/f12-13/classifica'); 

$tabClassifica = $html->find('table#classifica tr');

foreach($tabClassifica as $n) {
    $team=$n->find('td',0)->outertext;
    $arrayTeams[] = array('teamname' => $team);
}

?>
<pre>
<? print_r($arrayTeams); ?>
</pre> 
```

我必须得到这个数组结构

```
[1] => Array
    (
        [TeamName] => A.C. Tua
        [Pt.] => 9
        [G] => 4
        [V] => 3
        [N] => 0
        [P] => 1
        [G+] => 8
        [G-] => 5
        [Somma Punti] =>  293,50           
    )

[2] => Array
    (
        [TeamName] =>  Ehi Team   
        [Pt.] => 7
        [G] => 4
        [V] => 2
        [N] => 1
        [P] => 1
        [G+] => 5
        [G-] => 5
        [Somma Punti] =>  279,50     
    )

[3] => Array
    (
        [TeamName] =>  Brontolo 
```

有人可以指导我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T23:28:55.723

您可以使用[PHPQuery](http://code.google.com/p/phpquery/)来实现您想要的。

这是一个示例代码：

```
include('phpQuery-onefile.php');

$content = file_get_contents('http://leghe.fantagazzetta.com/f12-13/');
$html = phpQuery::newDocumentHTML($content);

$table = $html->find('#classifica tbody');
$general_ranking = array();
$i=0;
foreach($table->children('tr') as $tr){
    /**
     * @var DOMElement $tr
     */
    $getTd = $tr->getElementsByTagName('td');
    foreach($getTd as $td){
        /**
         * @var DOMElement $td
         */
        $general_ranking['tr_'.$i][] = trim($td->textContent);
    }
    ++$i;
} 
```

这应该显示类似于：

```
array (size=6)
  'tr_0' => 
    array (size=7)
      0 => string 'A.C. Tua' (length=8)
      1 => string '9' (length=1)
      2 => string '4' (length=1)
      3 => string '3' (length=1)
      4 => string '0' (length=1)
      5 => string '1' (length=1)
      6 => string '293,50' (length=6)
  'tr_1' => 
    array (size=7)
      0 => string 'Ehi Team' (length=8)
      1 => string '7' (length=1)
      2 => string '4' (length=1)
      3 => string '2' (length=1)
      4 => string '1' (length=1)
      5 => string '1' (length=1)
      6 => string '279,50' (length=6)
  'tr_2' => 
    array (size=7)
      0 => string 'Brontolo' (length=8)
      1 => string '7' (length=1)
      2 => string '4' (length=1)
      3 => string '2' (length=1)
      4 => string '1' (length=1)
      5 => string '1' (length=1)
      6 => string '274,50' (length=6)
  'tr_3' => 
    array (size=7)
      0 => string 'milanelcuore' (length=12)
      1 => string '6' (length=1)
      2 => string '4' (length=1)
      3 => string '2' (length=1)
      4 => string '0' (length=1)
      5 => string '2' (length=1)
      6 => string '281,00' (length=6)
  'tr_4' => 
    array (size=7)
      0 => string 'LONGOBARDA' (length=10)
      1 => string '5' (length=1)
      2 => string '4' (length=1)
      3 => string '1' (length=1)
      4 => string '2' (length=1)
      5 => string '1' (length=1)
      6 => string '254,50' (length=6)
  'tr_5' => 
    array (size=7)
      0 => string 'i puffi' (length=7)
      1 => string '0' (length=1)
      2 => string '4' (length=1)
      3 => string '0' (length=1)
      4 => string '0' (length=1)
      5 => string '4' (length=1)
      6 => string '258,00' (length=6) 
```

* * *

编辑：
回答后我感兴趣，`simple_html_dom`所以我决定尝试一下。编码风格比`PHPQuery`我认为的要容易一些，但不是那么稳定。

无论如何，这是使它工作所需的代码：

```
include('simple_html_dom/simple_html_dom.php');

$html = new simple_html_dom();
$html->load_file('http://leghe.fantagazzetta.com/f12-13/classifica');

$tabClassifica = $html->find('table#classifica tr');

foreach($tabClassifica as $n) {
    /**
     * @var simple_html_dom_node $n;
     */
    $tds = $n->find('td');

    // Don't allow empty records.
    $team = trim(strip_tags($tds[0]->innertext));
    if($team == "" || $team == "&nbsp;") continue;

    $arrayTeams[] = array(
        'TeamName' => $team,
        'Pt.' =>  trim(strip_tags($tds[1]->innertext)),
        'G' =>  trim(strip_tags($tds[2]->innertext)),
        'V' =>  trim(strip_tags($tds[3]->innertext)),
        'N' =>  trim(strip_tags($tds[4]->innertext)),
        'P' =>  trim(strip_tags($tds[5]->innertext)),
        'G+' =>  trim(strip_tags($tds[6]->innertext)),
        'G-' =>  trim(strip_tags($tds[7]->innertext)),
        'Somma Punti' =>  trim(strip_tags($tds[8]->innertext)),
    );
} 
```

# python - Django 模型 - 分配 id 而不是对象

> ID：12682254
> 
> 赞同：17
> 
> 时间：2012-10-01T22:54:05.177
> 
> 标签：python, django, django-models

如果我的问题被证明是愚蠢的，我深表歉意，但我对 Django 很陌生，我无法在任何地方找到答案。

我有以下模型：

```
class BlackListEntry(models.Model):
  user_banned = models.ForeignKey(auth.models.User,related_name="user_banned")
  user_banning = models.ForeignKey(auth.models.User,related_name="user_banning") 
```

现在，当我尝试创建这样的对象时：

```
BlackListEntry.objects.create(user_banned=int(user_id),user_banning=int(banning_id)) 
```

我收到以下错误：

```
Cannot assign "1": "BlackListEntry.user_banned" must be a "User" instance. 
```

当然，如果我用这样的东西替换它：

```
user_banned = User.objects.get(pk=user_id)
user_banning = User.objects.get(pk=banning_id)
BlackListEntry.objects.create(user_banned=user_banned,user_banning=user_banning) 
```

一切正常。问题是：

我的解决方案是否命中数据库以检索两个用户，如果是，是否可以避免它，只传递 id？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-01T23:10:39.827

你的问题的答案是：是的。

Django 将（至少）3 次访问数据库，2 次检索两个 User 对象，第三次提交您想要的信息。这将导致绝对不必要的开销。

你试一试：

```
BlackListEntry.objects.create(user_banned_id=int(user_id),user_banning_id=int(banning_id)) 
```

这些是 Django ORM 生成的 FK 字段的默认名称模式。这样您可以直接设置信息并避免查询。

如果要查询已保存的 BlackListEntry 对象，可以使用双下划线导航属性，如下所示：

```
BlackListEntry.objects.filter(user_banned__id=int(user_id),user_banning__id=int(banning_id)) 
```

这是您在 Django 查询集中访问属性的方式。带有双下划线。然后你可以比较属性的值。

虽然非常相似，但它们的工作方式完全不同。第一个直接设置属性，而第二个由django解析，在'__'处拆分它，并以正确的方式查询数据库，第二部分是属性的名称。

您始终可以与实际的用户对象进行比较`user_banned`，`user_banning`而不是他们的 ID。但是，如果您还没有随身携带这些物品，那么这样做是没有用的。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T22:55:49.467

我确实相信，当您获取用户时，它会访问数据库...

为避免这种情况，您必须使用此处描述的方法编写原始 sql 来进行更新：

[https://docs.djangoproject.com/en/dev/topics/db/sql/](https://docs.djangoproject.com/en/dev/topics/db/sql/)

如果您决定走这条路，请记住您有责任保护自己免受 sql 注入攻击。

另一种选择是缓存 user_banned 和 user_banning 对象。

但很可能，简单地抓住用户并创建 BlackListEntry 不会给您带来任何明显的性能问题。缓存或执行原始 sql 只会带来一点好处。在这成为问题之前，您可能会遇到其他问题。

# python - python unittests, do I need to import from the tests/__init__.py?

> ID：12682255
> 
> 赞同：3
> 
> 时间：2012-10-01T22:54:09.297
> 
> 标签：python, unit-testing

I have my code organized like this:

base_project_dir/src /tests /test1.py /test2.py

in test1.py and test2.py I have the classes extending unittest.TestCase

according to python API doc, I should be able to run

python -m unittest tests from base dir and run all tests. but doing so shows that it finds 0 tests. so I added from test1 import * from test2 import *

into `tests/__init__.py`

now the above command works. but when I want to run individual tests, it sources the module **init**, which forcefully run all tests.

what is the correct way to organize this?

thanks Yang

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:57:05.870

在你的主项目目录中试试这个：

```
python -m unittest discover -v 
```

这样您就不会更改相对导入的位置。当您这样做时`python -m unittest tests`，它首先切换到此目录，然后无法再导入项目代码。

# php - Google Calendar API3 - 排序事件

> ID：12682256
> 
> 赞同：0
> 
> 时间：2012-10-01T22:54:14.587
> 
> 标签：php, google-calendar-api

我成功地从 Google 中提取日历和事件。但是，我正在努力订购结果。我只想提取今天的事件。任何帮助都非常感谢......谢谢。

```
$eventsParam = array("orderBy"=>startTime, "timeMin"=>date('d-m-Y') , "timeMax"=>date('d-m-Y')); 
$eventList = $cal->events->listEvents('yoyoyo@gmail.com', $eventsParam);

    foreach($eventList->getItems() as $eventList){

        $eventsData = json_decode($eventList);
        $eventDate = explode('T', $eventList->start->dateTime);

            //Event summary
            print "<br>Summary: ";
            echo $eventList->summary;

            //Event location
            print "<br/> Location: ";
            echo $eventList->location;

            //Event date:
            print "<br/> Date: ";
            echo $eventDate[0];

            //Event time:
            print "<br/> Time: ";
            $eventTime = explode('-', $eventDate[1]);
            echo $eventTime[0];

            echo "<hr>";

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:04:16.797

使用[array_filter](http://php.net/manual/en/function.array-filter.php)获取今天的那些。然后要对对象数组的属性进行排序，请考虑使用[usort](http://php.net/manual/en/function.usort.php)和您自己的比较器。我认为您的问题与[此](https://stackoverflow.com/questions/4282413/php-sort-array-of-objects-by-object-fields)类似。

# ruby-on-rails - 有没有办法在 irb 中获取屏幕会话名称？

> ID：12682257
> 
> 赞同：1
> 
> 时间：2012-10-01T22:54:15.413
> 
> 标签：ruby-on-rails, ruby, gnu-screen, irb

如果我登录到远程机器，建立一个屏幕会话`screen -s name`，切换到另一个用户帐户，然后登录到 Rails 2 控制台，有没有办法在 Ruby 中获取屏幕会话名称，用于日志记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T23:21:13.123

如果您可以从底层操作系统获取屏幕会话名称，那么在 Ruby 中，您始终可以使用反引号或`system`调用来执行命令。有关更多详细信息，请参阅“[在 ruby​​ 中获取 system() 调用的输出](https://stackoverflow.com/questions/690151/getting-output-of-system-calls-in-ruby)”。

编辑：

顺便说一句，一定要看到[这个特定的答案](https://stackoverflow.com/a/5970819/492404)。

# typescript - 是否可以将 TypeScript 编译成缩小代码？

> ID：12682268
> 
> 赞同：108
> 
> 时间：2012-10-01T22:56:09.397
> 
> 标签：typescript, minify

是否可以选择将 TypeScript 代码的输出编译为缩小？还是让我们在一个单独的过程中处理这个问题？混淆会影响答案吗？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-10-01T23:01:48.213

TypeScript 编译器不支持生成缩小或混淆代码。您将需要针对编译器的 JavaScript 输出使用其他工具。

有一个开放的功能请求：[microsoft/TypeScript#8](https://github.com/microsoft/TypeScript/issues/8)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2016-12-29T22:58:19.517

我是[typescript-closure-compiler](https://github.com/sagifogel/typescript-closure-compiler)的作者。
基本上，它是一个发出与 google 闭包编译器兼容的文件的工具，这可能是最好的压缩器/优化器/混淆器。
我还创建了一个可以向您显示生成的输出的[游乐场。](http://sagifogel.github.io/typescript-closure-compiler/)
您可以查看使用此工具的示例[项目。](https://github.com/sagifogel/TSFunq)
缩小过程是使用 gulp 完成的。

# dart - 你如何在 Dart 中运行一个交互式进程？

> ID：12682269
> 
> 赞同：2
> 
> 时间：2012-10-01T22:56:16.347
> 
> 标签：dart, dart-io

下面的测试尝试运行 less pager 命令并在用户退出后返回。问题是它不等待用户输入，它只是列出整个文件并退出。平台：xubuntu 12.04，Dart 编辑器构建：13049。

```
import 'dart:io';

void main() {
  shell('less', ['/etc/mime.types'], (exitCode) => exit(exitCode));
}

void shell(String cmd, List<String> opts, void onExit(int exitCode)) {
  var p = Process.start(cmd, opts);
  p.stdout.pipe(stdout);  // Process output to stdout.
  stdin.pipe(p.stdin);    // stdin to process input.
  p.onExit = (exitCode) {
    p.close();
    onExit(exitCode);
  };
} 
```

以下 CoffeeScript 函数（使用 nodejs I/O）有效：

```
shell = (cmd, opts, callback) ->
  process.stdin.pause()
  child = spawn cmd, opts, customFds: [0, 1, 2]
  child.on 'exit', (code) ->
    process.stdin.resume()
    callback code 
```

我怎样才能在 Dart 中完成这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T16:11:23.260

John 有一个关于如何查看用户输入的好例子。但没有回答你原来的问题。不幸的是，您的问题不符合 Dart 的运作方式。您拥有的两个示例，Dart 版本和 CoffeeScript/Node.js 版本，做了两个完全不同的事情。

在您的 CoffeeScript 版本中， spawn 命令实际上是创建一个新进程，然后将执行传递给该新进程。基本上，您的程序不是与进程进行交互通信，而是您的用户正在与生成的进程进行交互。

在 Dart 中不同的是，您的程序正在与生成的进程进行交互。它不会将执行传递给新进程。基本上你正在做的是将输入/输出从新进程传送到你的程序本身。由于您的程序没有来自终端的“窗口高度”，因此它会一次传递所有信息。你在 dart 中所做的几乎等同于：

```
less /etc/mime.types | cat 
```

您可以使用[Process.start()](http://api.dartlang.org/docs/continuous/dart_io/Process.html#start "进程.start()")与进程进行交互通信。但与进程交互通信的是您的程序，而不是用户。因此，您可以编写一个 dart 程序，该程序将启动并自动播放“zork”或“adventure”，或者通过查看进程输出的提示登录到远程服务器。

但是，目前还没有办法简单地将执行传递给生成的进程。如果您想将流程输出传达给用户，然后还接受用户输入并将其发送回流程，则它涉及一个附加层。即便如此，并非所有程序（例如 less）的行为都与从 shell 环境启动时的行为相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T13:45:42.583

这是从用户读取控制台输入的基本结构。此示例从用户读取文本行，并在“q”处退出：

```
import 'dart:io';
import 'dart:isolate';

final StringInputStream textStream = new StringInputStream(stdin);

void main() {
  textStream.onLine = checkBuffer;
}

void checkBuffer(){
    final line = textStream.readLine();

    if (line == null) return;

    if (line.trim().toLowerCase() == 'q'){
        exit(0);
    }

    print('You wrote "$line".  Now write something else!');
} 
```

# python - 像maven一样自动设置python模块路径？

> ID：12682273
> 
> 赞同：0
> 
> 时间：2012-10-01T22:56:44.130
> 
> 标签：python, path, pythonpath

在 Maven 中，当我运行测试时，会自动获取 src/ 中的源。

现在我以类似的 dir 结构组织我的 python 代码。但是当我运行 unitttests 时， python -m unittests tests 它说找不到正在测试的类。

我怎样才能让它找到源头？

（好吧，我可以编写一个 shell 脚本并设置 PYTHONPATH，但我不知道这是否是在 python 中的惯用方式）

谢谢杨

# ant - 使用 Ant 的 Junit 测试错误，没有消息，没有给出原因

> ID：12682278
> 
> 赞同：3
> 
> 时间：2012-10-01T22:57:15.910
> 
> 标签：ant, junit

我正在尝试将 Junit 测试与 ant 一起使用。

由于我真的不知道如何在没有 Eclipse 的情况下编写 Junit 测试，所以我将从在网上找到的一些完全微不足道的东西开始。这应该总是通过。

测试1.java

```
import junit.framework.*;
public class Test1 extends TestCase {
  @Test
  public void testOne()
  {
    System.out.println("Heyy there I'm a test!");
    assertTrue( "TestExample", true );
  }
} 
```

我将这些添加到我的 build.xml 中...

```
49   <target name="junit" depends="jar">
50     <junit printsummary="withOutAndErr" fork="yes" showoutput="yes">
51       <classpath refid="application"/>
52       <test name="test.Test1"/>
53     </junit>
54   </target> 
```

所以现在当我运行“ant junit”时，我得到了

```
junit:
    [junit] Running test.Test1
    [junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 0 sec 
```

所以......这并没有告诉我任何事情......出了什么问题？如何解决？没有。有谁知道怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T05:47:12.643

我可以重现它。我期待`junit`提供一些更详细的信息，例如`Class test.Test1 not found`. 但不，它只是失败了。这意味着该类不在类路径中。打开您的 jar 文件（使用归档`7zip`器确认）。

毫不奇怪，因为您的类没有编译:) 添加以下内容：

```
package test;
import org.junit.Test; 
```

你的第一个测试应该通过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:36:35.043

@jarekczek helped me huge by letting me know that Junit is not some external thing to be compiled separately to execute but it needs to be compiled into the jar with your other source files.

The problem was that I put my test/ directory outside of my src/ directory, and when ant compiles the java files in src/ it did not compile the file Test1.java into Test1.class

I moved the test/ folder into the src/ folder, and now I got more informative error messages from the javac compiler, and was able to fix it. Thanks so much!

# c# - 将 CultureInfo 对象序列化为另一个类的属性

> ID：12682284
> 
> 赞同：2
> 
> 时间：2012-10-01T22:58:42.850
> 
> 标签：c#, c#-4.0, serialization, cultureinfo

因此，根据 CultureInfo 类规范，它是 [Serializable]。但是，当我有另一个具有对 CultureInfo 实例的引用的 [Serializable] 类（例如 ClassA），并且我尝试使用 ClassA 创建一个 XmlSerializer 实例时，我得到了一个异常。有人知道解决方法吗？我会假设因为 CultureInfo 是 [Serializable] 下面应该工作。

非常感谢！

- 代码 -

```
using System;
using System.Xml.Serialization;
using System.Globalization;

namespace CultureInfoSerializationTest
{
    class Program
    {
        static void Main(string[] args)
        {
            ClassA aClass = new ClassA();
            aClass.UsedCulture = CultureInfo.CurrentCulture;

            try
            {
                XmlSerializer serializer = new XmlSerializer(typeof(ClassA));
            } catch (Exception e) { }
        }
    }

    [Serializable]
    public class ClassA
    {
        public CultureInfo UsedCulture { get; set; }
    }
} 
```

- 例外 -

```
System.InvalidOperationException was caught
  HResult=-2146233079
  Message=There was an error reflecting type 'CultureInfoSerializationTest.ClassA'.
  Source=System.Xml
  StackTrace:
       at System.Xml.Serialization.XmlReflectionImporter.ImportTypeMapping(TypeModel model, String ns, ImportContext context, String dataType, XmlAttributes a, Boolean repeats, Boolean openModel, RecursionLimiter limiter)
       at System.Xml.Serialization.XmlReflectionImporter.ImportElement(TypeModel model, XmlRootAttribute root, String defaultNamespace, RecursionLimiter limiter)
       at System.Xml.Serialization.XmlReflectionImporter.ImportTypeMapping(Type type, XmlRootAttribute root, String defaultNamespace)
       at System.Xml.Serialization.XmlSerializer..ctor(Type type, String defaultNamespace)
       at System.Xml.Serialization.XmlSerializer..ctor(Type type)
       at CultureInfoSerializationTest.Program.Main(String[] args) in c:\users\asbeug\documents\visual studio 2010\Projects\CultureInfoSerializationTest\CultureInfoSerializationTest\Program.cs:line 18
  InnerException: System.InvalidOperationException
       HResult=-2146233079
       Message=Cannot serialize member 'CultureInfoSerializationTest.ClassA.UsedCulture' of type 'System.Globalization.CultureInfo', see inner exception for more details.
       Source=System.Xml
       StackTrace:
            at System.Xml.Serialization.StructModel.CheckSupportedMember(TypeDesc typeDesc, MemberInfo member, Type type)
            at System.Xml.Serialization.StructModel.GetPropertyModel(PropertyInfo propertyInfo)
            at System.Xml.Serialization.StructModel.GetFieldModel(MemberInfo memberInfo)
            at System.Xml.Serialization.XmlReflectionImporter.InitializeStructMembers(StructMapping mapping, StructModel model, Boolean openModel, String typeName, RecursionLimiter limiter)
            at System.Xml.Serialization.XmlReflectionImporter.ImportStructLikeMapping(StructModel model, String ns, Boolean openModel, XmlAttributes a, RecursionLimiter limiter)
            at System.Xml.Serialization.XmlReflectionImporter.ImportTypeMapping(TypeModel model, String ns, ImportContext context, String dataType, XmlAttributes a, Boolean repeats, Boolean openModel, RecursionLimiter limiter)
       InnerException: System.InvalidOperationException
            HResult=-2146233079
            Message=System.Globalization.CultureInfo cannot be serialized because it does not have a parameterless constructor.
            InnerException: 
```

--附加类--（来自下面的答案）

```
[Serializable]
public class ClassA : ISerializable
{
    public ClassA() { }

    public CultureInfo UsedCulture { get; set; }

    public void GetObjectData(SerializationInfo info, StreamingContext context)
    {
        if (info == null)
        {
            throw new ArgumentNullException("info");
        }

            info.AddValue("Culture", UsedCulture);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T02:15:28.310

您是正确的，该类被标记为可序列化，但在 C# 中有一件奇怪的事情，其中​​可序列化并不意味着它可序列化到所有形式。Serializable 属性仅表示可以对对象执行序列化，而不表示可以进行何种类型的序列化。这表示该类有资格进行序列化，而不是可以执行任何序列化。Xml 序列化有一个额外的限制，即对象上必须有一个默认构造函数，请参阅[关于 XML 序列化的 MSDN 文档](http://msdn.microsoft.com/en-us/library/ms172873.aspx)。如果您注意到有关序列化的文档通常没有说明此限制（[序列化文档](http://msdn.microsoft.com/en-us/library/ms233843.aspx)）。

如果您考虑这些不同的序列化是如何在幕后工作的，那么原因应该很清楚。如果您正在执行二进制序列化，则不需要使用构造函数来创建对象，因为类型信息已编码在对象中。对于 Xml 序列化，您只需拥有字段，因此您所能做的就是创建一个新对象并填充它。 [有关此问题的一些讨论，请参见这篇文章](https://stackoverflow.com/questions/267724/why-xml-serializable-class-need-a-parameterless-constructor)。该帖子还引用了 MSDN 关于这如何可能（使用 FormatterServices.GetUninitializedObject()）的缺点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T23:08:43.533

您需要通过执行来实现`ISerializable`接口`public class ClassA : Iserializable`。此外，您必须实现方法`GetObjectData`。一种方法可能是添加：

```
public void GetObjectData(SerializationInfo info, StreamingContext context)
    {
        if (info == null)
            throw new ArgumentNullException("info");

        info.AddValue("Culture", UsedCulture);
    } 
```

里面`ClassA`。另外，请参阅[这篇文章](http://msdn.microsoft.com/en-us/library/ms182342%28v=vs.100%29.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-12T22:52:39.463

我建议您在序列化“UsedCulture”时尝试将“CultureInfo”替换为字符串类型参数。然后在您的主代码中将其更改为“CultureInfo”类型。这是一个技巧，因为它被提到“CultureInfo 不能被序列化”希望这会有所帮助。库罗什

# c# - 如何从 Razor 切换到普通的旧 HTML？

> ID：12682288
> 
> 赞同：3
> 
> 时间：2012-10-01T22:59:20.403
> 
> 标签：c#, javascript, razor

> **可能重复：**
> [混合 Razor 和 Javascript 代码](https://stackoverflow.com/questions/5614941/mix-razor-and-javascript-code)

这是我要运行的代码：

```
 // Razor code!
    @if (User.Identity.IsAuthenticated) {

        // This is Javascript, NOT C#/Razor code. Hence the '@' symbol.
        var currentUser = @User.Identity.Name;

    } else {

        // Also Javascript code!
        var currentUser = null;
    } 
```

基本上，如果用户登录，我想将其输出为 Javascript：

```
var currentUser = @User.Identity.Name; 
```

或者如果用户已注销：

```
var currentUser = null; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T23:03:14.830

首先，您需要将其更改为类似（记住您的引号`@User.Identity.Name`）：

```
<script type="text/javascript">
var currentUser = null;
@if (User.Identity.IsAuthenticated) {
    <text>
        currentUser = '@User.Identity.Name';
    </text>
}
</script> 
```

然后添加一些javascript：

```
<script type="text/javascript">
if (currentUser != null) {
    document.getElementById('loggedInUser').innerHTML = 'Welcome '+ currentUser;
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T23:01:55.717

一旦您在 Razor 中开始标记，它就会切换到标记（包括`<script>`）。如果您不需要任何标签，请`<text>`改用。

如果您需要快速复制/粘贴解决方案，请使用 Tim 或 Adam 的解决方案。但是，由于 Razor 在解析多种语言的混合时使用了相当复杂的算法，因此值得提供[Phil Haack](http://haacked.com)的[Razor 部分的](http://haacked.com/archive/2011/01/06/razor-syntax-quick-reference.aspx)完整快速参考（CC-BY 许可允许）：

> 代码块：
> 
> ```
> @{ 
>   int x = 123; 
>   string y = "because.";
> } 
> ```
> 
> 表达式（Html 编码）：
> 
> ```
> <span>@model.Message</span> 
> ```
> 
> 表达式（未编码）：
> 
> ```
> <span>
> @Html.Raw(model.Message)
> </span> 
> ```
> 
> 结合文本和标记：
> 
> ```
> @foreach(var item in items) {
>   <span>@item.Prop</span> 
> } 
> ```
> 
> 混合代码和纯文本：
> 
> ```
> @if (foo) {
>   <text>Plain Text</text> 
> } 
> ```
> 
> 混合代码和纯文本（备用）：
> 
> ```
> @if (foo) {
>   @:Plain Text is @bar
> } 
> ```
> 
> 电子邮件地址：
> 
> ```
> Hi philha@example.com 
> ```
> 
> 显式表达：
> 
> ```
> <span>ISBN@(isbnNumber)</span> 
> ```
> 
> 转义 @ 符号：
> 
> ```
> <span>In Razor, you use the 
> @@foo to display the value 
> of foo</span> 
> ```
> 
> 服务器端评论：
> 
> ```
> @*
> This is a server side 
> multiline comment 
> *@ 
> ```
> 
> 调用泛型方法：
> 
> ```
> @(MyClass.MyMethod<AType>()) 
> ```
> 
> 混合表达式和文本：
> 
> ```
> Hello @title. @name. 
> ```

因为现在有[Razor 助手](http://weblogs.asp.net/scottgu/archive/2011/05/12/asp-net-mvc-3-and-the-helper-syntax-within-razor.aspx)，所以我省略了 Razor 代表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T23:21:41.373

```
<script>

    @if( User.Identity.IsAuthenticated ) {
        <text>var currentUser = "@User.Identity.Name";</text>
    }
    else {
         <text>var currentUser = null;</text>
    }

    alert(currentUser);

</script> 
```

产生以下输出：

```
var currentUser = "Foo Bar";
alert(currentUser); 
```

@Adam Plocher 的回答显示了一种更简洁的方式来表示它（从服务器脚本中删除 JavaScript 变量声明）。

一种更简洁的方式来用一条更容易理解的行来表示它：

```
<script>
    var currentUser = '@(User.Identity.IsAuthenticated ? User.Identity.Name : "Anonymous" )';
    alert(currentUser);
</script> 
```

# c# - EditItemTemplate 列中用于插入和更新的 RadGrid(Gridview) 递归复选框

> ID：12682289
> 
> 赞同：0
> 
> 时间：2012-10-01T22:59:22.663
> 
> 标签：c#, asp.net, telerik, radgrid

我在 EditItemTemplate 中有一个带有复选框的 RadGrid，用于显示活动或非活动状态。

此复选框仅在项目被更新或添加为新项目时​​显示。我有一个复选框的 ControlParameter，但由于它与列表中的许多复选框是递归的，所以它会抛出旧的“在 ControlParameter 中找不到控件'cbActive'”错误。

除了页面加载时的 Radgrid 绑定之外，我没有任何真正的 CS 代码。

ASPX 代码：

```
<telerik:RadGrid ID="RadGrid1" runat="server" Skin="Vista" Width="500px"
    GridLines="None" AllowFilteringByColumn="False" AllowSorting="True" OnExportCellFormatting="RadGrid1_ExportCellFormatting"
     AllowAutomaticInserts="True"  AllowAutomaticDeletes="true" AllowAutomaticUpdates="True" AutoGenerateEditColumn="True"  AutoGenerateDeleteColumn="true">
    <MasterTableView AutoGenerateColumns="False" DataKeyNames="ID" DataSourceID="SqlDataSource1" ItemStyle-HorizontalAlign="Left" CommandItemDisplay="TopAndBottom">
        <Columns>
            <telerik:GridBoundColumn DataField="ID" HeaderText="ID" SortExpression="ID"
                    UniqueName="ID" Visible="False" ReadOnly="true">
                </telerik:GridBoundColumn>
            <telerik:GridTemplateColumn HeaderText="Active" SortExpression="Active" UniqueName="Active" ItemStyle-Width="100" Visible="false">
                <EditItemTemplate>
                    <asp:CheckBox ID="cbActive" runat="server" Checked='<%# GenerateBindString(Container.DataItem) %>' />
                </EditItemTemplate>
            </telerik:GridTemplateColumn>
         </Columns>
    </MasterTableView>
</telerik:RadGrid>

<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:LBCust %>" 
    SelectCommand="SELECT * FROM [LBX_Portal_AccountNumbers] WHERE ([Site] = @Site) AND (Active=@Active OR @Active = '0') ORDER BY AccountNumber"
    DeleteCommand="DELETE FROM [LBX_Portal_AccountNumbers] WHERE [ID] = @ID" 
    InsertCommand="INSERT INTO [LBX_Portal_AccountNumbers] ([AccountNumber], [Site], [Active]) VALUES (@AccountNumber, @Site, @Active)" 
    UpdateCommand="UPDATE [LBX_Portal_AccountNumbers] SET [AccountNumber] = @AccountNumber,  [Active] = @Active WHERE [ID] = @ID">
    <SelectParameters>
        <asp:ControlParameter ControlID="dd_Status" Name="Active" 
            PropertyName="SelectedValue" Type="String" />
    </SelectParameters>
    <DeleteParameters>
        <asp:Parameter Name="ID" Type="Int32" />
    </DeleteParameters>
    <InsertParameters>
        <asp:Parameter Name="AccountNumber" Type="String" />
        <asp:Parameter Name="Site" Type="String" />
        <asp:ControlParameter ControlID="cbActive" 
            PropertyName="Checked" Type="Boolean" />
    </InsertParameters>
    <UpdateParameters>
        <asp:Parameter Name="AccountNumber" Type="String" />
        <asp:ControlParameter ControlID="cbActive" 
            PropertyName="Checked" Type="Boolean" />
    </UpdateParameters>
</asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:59:32.487

您将无法通过控制参数设置值；但是，您可以做的是使用 an `<asp:Parameter>`，并通过以下方式在参数上设置 DefaultValue 属性：

```
sqlDataSource1.SelectParameters[0].DefaultValue = "X" 
```

或者，对于网格，我知道对于 GridView，它有一组用于执行更新的值；您可以添加一个表示复选框控件的条目，该条目将被推送到数据源中。我知道 RadGrid 是否有相同的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T16:43:19.930

所以花了很多时间环顾四周，但如果不通过 CS 访问命令，我就无法做到这一点。这是我的新代码，它可以工作：

```
<telerik:RadGrid ID="RadGrid1" runat="server" Skin="Vista" Width="500px"
    GridLines="None" AllowFilteringByColumn="False" AllowSorting="True" OnExportCellFormatting="RadGrid1_ExportCellFormatting"
     AllowAutomaticInserts="True"  AllowAutomaticDeletes="true" AllowAutomaticUpdates="True" AutoGenerateEditColumn="True"  AutoGenerateDeleteColumn="true" OnItemCommand="RadGrid1_ItemCommand">
    <MasterTableView AutoGenerateColumns="False" DataKeyNames="ID" DataSourceID="SqlDataSource1" ItemStyle-HorizontalAlign="Left" CommandItemDisplay="TopAndBottom">
        <Columns>
            <telerik:GridTemplateColumn HeaderText="ID" SortExpression="ID" UniqueName="ID" Visible="false" ReadOnly="true"> 
                <ItemTemplate> 
                    <asp:Label ID="lblIDView" runat="server" Text='<%# Bind("ID") %>'></asp:Label> 
                </ItemTemplate> 
            </telerik:GridTemplateColumn>
            <telerik:GridTemplateColumn HeaderText="ID" SortExpression="IDEdit" UniqueName="IDEdit" Visible="false">
                <ItemTemplate />
                <EditItemTemplate>
                    <asp:Label ID="lblID" runat="server" Text='<%# Bind("ID") %>'></asp:Label> 
                </EditItemTemplate>
            </telerik:GridTemplateColumn>
            <telerik:GridBoundColumn DataField="AccountNumber" HeaderText="Sapphire Account Number" 
                SortExpression="AccountNumber" UniqueName="AccountNumberView" ReadOnly="true" ItemStyle-Width="400">
            </telerik:GridBoundColumn>
            <telerik:GridTemplateColumn HeaderText="Account Number" SortExpression="AccountNumber" UniqueName="AccountNumber" Visible="false">
                <ItemTemplate />
                <EditItemTemplate>
                    <asp:Textbox ID="txtAccountNumber" runat="server" Text='<%# Bind("AccountNumber") %>' />
                </EditItemTemplate>
            </telerik:GridTemplateColumn>
            <telerik:GridTemplateColumn HeaderText="Active" SortExpression="Active" UniqueName="Active" ItemStyle-Width="100" Visible="false">
                <ItemTemplate />
                <EditItemTemplate>
                    <asp:CheckBox ID="cbActive" runat="server" Checked='<%# GenerateBindString(Container.DataItem) %>' />
                </EditItemTemplate>
            </telerik:GridTemplateColumn>
            <telerik:GridTemplateColumn HeaderText="Status" SortExpression="Active" UniqueName="Active" ItemStyle-Width="100"> 
                <ItemTemplate> 
                    <asp:Label ID="lblActive" runat="server" Text='<%# Convert.ToBoolean(GenerateBindString(Container.DataItem)) == true ? "Active" : "Inactive" %>'></asp:Label> 
                </ItemTemplate> 
            </telerik:GridTemplateColumn> 
         </Columns>
    </MasterTableView>
</telerik:RadGrid>

<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:LBCust %>" 
    SelectCommand="SELECT * FROM [LBX_Portal_AccountNumbers] WHERE ([Site] = @Site) AND (Active=@Active OR @Active = '0') ORDER BY AccountNumber"
    DeleteCommand="DELETE FROM [LBX_Portal_AccountNumbers] WHERE [ID] = @ID" 
    InsertCommand="INSERT INTO [LBX_Portal_AccountNumbers] ([AccountNumber], [Site], [Active]) VALUES (@AccountNumber, @Site, @Active)" 
    UpdateCommand="UPDATE [LBX_Portal_AccountNumbers] SET [AccountNumber] = @AccountNumber,  [Active] = @Active WHERE [ID] = @ID">
    <SelectParameters>
        <asp:ControlParameter ControlID="dd_Status" Name="Active" 
            PropertyName="SelectedValue" Type="String" />
    </SelectParameters>
    <DeleteParameters>
        <asp:Parameter Name="ID" Type="Int32" />
    </DeleteParameters>
    <InsertParameters>
        <asp:Parameter Name="AccountNumber" Type="String" />
        <asp:Parameter Name="Site" Type="String" />
        <asp:Parameter Name="Active" Type="Boolean" />
    </InsertParameters>
    <UpdateParameters>
        <asp:Parameter Name="AccountNumber" Type="String" />
        <asp:Parameter Name="Active" Type="Boolean" />
    </UpdateParameters>
</asp:SqlDataSource> 
```

CS代码：

```
protected void RadGrid1_ItemCommand(object source, Telerik.Web.UI.GridCommandEventArgs e)
{
    if (e.CommandName == "PerformInsert")
    {

        GridEditFormItem gridEditFormItem = (GridEditFormItem)e.Item;

        Label lblID = (Label)gridEditFormItem.FindControl("lblID");
        TextBox txtAccountNumber = (TextBox)gridEditFormItem.FindControl("txtAccountNumber");
        CheckBox cbActive = (CheckBox)gridEditFormItem.FindControl("cbActive");

        bool isActive = false;

        if (cbActive.Checked)
            isActive = true;
        else
            isActive = false;

        string SqlStr = "INSERT INTO [LBX_Portal_AccountNumbers] ([AccountNumber], [Site], [Active])";
        SqlStr += " VALUES ('" + txtAccountNumber.Text + "'" + ", '" + SiteName + "'" + ", '" + isActive + "')";

        SqlDataSource1.InsertCommand = SqlStr;
        SqlDataSource1.Insert();
    }

    if (e.CommandName == "Update")
    {

        GridEditFormItem gridEditFormItem = (GridEditFormItem)e.Item;

        Label lblID = (Label)gridEditFormItem.FindControl("lblID");
        TextBox txtAccountNumber = (TextBox)gridEditFormItem.FindControl("txtAccountNumber");
        CheckBox cbActive = (CheckBox)gridEditFormItem.FindControl("cbActive");

        bool isActive = false;

        if (cbActive.Checked)
            isActive = true;
        else
            isActive = false;

        string SqlStr = "UPDATE [LBX_Portal_AccountNumbers] SET [AccountNumber] = '" + txtAccountNumber.Text;
        SqlStr += "', [Active] = '" + isActive + "'  WHERE [ID] = " + lblID.Text;

        SqlDataSource1.UpdateCommand = SqlStr;
        SqlDataSource1.Update();
    }
} 
```

# asp.net - 为什么ASP.NET MVC4默认设置了主题目录？

> ID：12682290
> 
> 赞同：0
> 
> 时间：2012-10-01T22:59:24.677
> 
> 标签：asp.net, asp.net-mvc-4

当您创建一个新的 ASP.NET Web 应用程序时，会自动设置一个名为“base”的主题，其中包含 jQuery CSS 和图像。这对于大多数永远不需要真正使用主题的 Web 应用程序来说不是矫枉过正吗？将所有这些东西移到根目录目录中，删除主题目录，如果您不打算为您的网站设置主题，则永远不要使用主题是个好主意吗？

我并不是说默认情况下不应该包含 jQuery，这不是我的意思。我的意思是，它应该在“基础”主题中吗？主题是关于能够重新设置网站的外观，我认为很多网站都不会想要这样做。

然后，`Site.css`关于什么？那是在主题目录之外，但据我所知，它包含一个可能实际上想要在每个主题的基础上更改的样式信息（如表单样式）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T23:18:04.123

您是否尝试过使用`Empty`模板？

![在此处输入图像描述](../Images/d364f61f3a8aedec67dd6cd1eeec6713.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T01:50:45.087

> 一个主题是自动设置的，其中包含 jQuery CSS 和图像。这对于大多数永远不需要真正使用主题的 Web 应用程序来说不是矫枉过正吗？

不，这有助于大多数人更快地开始工作。首先完成逻辑，而不必创建布局只是为了可视化正在发生的事情。更不用说如果你愿意的话，新的现代主题实际上看起来很漂亮，可以在生产中使用。以下是我从快速 Google 中找到的一些似乎使用默认模板部署的站点。

*   [有所作为](http://makedifferences.org/)
*   [VACS 应用程序](http://vacs.med.yale.edu/)
*   [建立一个项目](http://user1323.netfx45lab.discountasp.net/Home/Home)
*   [Les Taxis de Villefranche sur Mer](http://www.taxisvillefranchesurmer.com/)
*   [3indians.com](http://3indians.com/)

大多数用户都需要 jQuery，即使只是为了不显眼的验证。

新模板包括许多必要的功能，例如[手机支持和移动项目](http://msdn.microsoft.com/en-us/vs11trainingcourse_aspnetmvc4_topic2.aspx)。查看[默认项目模板的增强功能](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253808)，了解一些新的默认功能是什么以及为什么包含这些功能的示例。

至于 jQuery ui，除了服务器上的文件之外，没有任何开销。除非您需要，否则不会将其发送给客户。

如果您不需要任何这些，您可以将其删除，或者正如@Gromer 指出的那样，您可以创建一个空项目甚至是一个基本项目。

**附录**

主题只是 jQuery UI 附带的默认主题。您可以轻松地更改它或在 jQuery 站点上创建一个自定义的。但主题是存在的，因为没有它 jQuery UI 将无法工作，而 UI 的存在是为了让开发人员能够快速开始使用 UI。

类似于创建新控制器时，您可以让它自动创建基本`Index`的 、`Details`、`Create`和动作。这只是一种方便，如果您不需要它，您可以创建一个空控制器。就像你不想要 UI 一样，你可以创建一个基本的或空的项目。`Edit``Delete`

它只是 Internet 应用程序的一个功能，大多数人觉得它很有帮助，您可以选择是否使用它。如果反过来，人们会抱怨它不包括在内。有人会创建一个模板来添加它，就像使用 MVC 3 一样，默认情况下它没有 OAuth，而且人们设置它很麻烦，所以有人创建了一个默认 MVC 3 项目，默认情况下它有 OAuth。现在 MVC 4 默认支持 OAuth。

# django - 中间件未在 404 上执行

> ID：12682291
> 
> 赞同：2
> 
> 时间：2012-10-01T22:59:26.230
> 
> 标签：django

我们有记录用户最后访问的 url 的中间件：

```
class LastSiteUrl(object):

    def is_admin_url(self, url):
        if re.search('^(http:\/\/.*){0,1}\/admin\/', url) is None: return(False)
        else: return(True)

    def process_request(self, request):
        if self.is_admin_url(request.path) and \
            not self.is_admin_url(request.META['HTTP_REFERER']):
            request.session['last_site_url'] = request.META['HTTP_REFERER'] 
```

我们使用它来将他们从管理页面返回到他们所在的最后一个应用程序页面，无论他们在管理方面有多深入。这工作正常。

我们有一个自定义的 404 页面，我想从那里提供一个链接，让他们回到他们在应用程序中的位置。但是，当它们转到无效页面时，中间件似乎没有运行。有没有办法让它在这种情况下也能运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-21T18:59:13.160

如果您在基本 urls.py 中使用 handler404 ，您可以从 django 视图而不是直接从服务器提供 404 页面，并以您想要的方式添加该中间件到任何其他 django 视图。

[https://docs.djangoproject.com/en/dev/ref/urls/#django.conf.urls.handler404](https://docs.djangoproject.com/en/dev/ref/urls/#django.conf.urls.handler404)

在 urls.py

```
handler404 = 'app.views.view' 
```

或者

```
handler404 = ClassView.as_view() 
```

# java - 在 Eclipse 中每次运行之前关闭 Java 应用程序

> ID：12682292
> 
> 赞同：9
> 
> 时间：2012-10-01T22:59:27.353
> 
> 标签：java, eclipse, process

我希望 Java 项目（如果你也知道 C++）的运行命令（通常默认为 CTRL+F11 组合）能够在运行新项目之前自动关闭它启动的前一个进程（或所有进程，如果更容易的话）实例。

简而言之，运行一个项目也应该关闭之前的应用程序实例。是否可以？

也许可以将代码添加到应用程序本身，并在我不再需要时禁用它？我想要它，因为每次关闭应用程序都很烦人。我不需要这么多应用程序实例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-07-14T00:34:16.250

在 Eclipse Neon 中转到`Window -> Preferences -> Run/Debug -> Launching`并`Launch Operation`检查部分：

`[X] Terminate and Relaunch while launching`

[![启动时终止并重新启动](../Images/45edad32f2a948eb5aed1047bcb48248.png)](https://i.stack.imgur.com/9kBGK.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T00:40:13.267

说起来容易做起来难。我建议您通过单击控制台中的红色小停止图标或通过在调试器透视图的线程视图中终止主线程来自行终止进程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T05:32:26.820

这对于 Eclipse 的内置特性是不可能的。自动化的最简单方法似乎是

*   [从 CDT](https://stackoverflow.com/a/11369639/44089)安装启动组功能（您只需要提到的功能）或[EclipseRunner](http://code.google.com/p/eclipserunnerplugin/)插件。它们允许创建“批量”启动配置。
*   使用“kill”命令（取决于您的操作系统）创建外部运行配置，该命令可以根据应用程序名称终止您的应用程序进程。
*   使用上面提到的两个插件之一创建一个批处理启动组，其中首先是“kill”配置，然后是您的正常启动配置。

# ruby-on-rails - 从 RoR 查询输出生成哈希数组？

> ID：12682294
> 
> 赞同：0
> 
> 时间：2012-10-01T22:59:46.777
> 
> 标签：ruby-on-rails

Rails 新手在这里。假设我有两个表，Owners (owner_id, name) 和 Cats (cat_id, cname)。它们通过一对多的关系关联起来，一个主人可以拥有许多猫，但一只猫只能拥有一个主人。给定 owner_id 的输入，我想检索该所有者拥有的每只猫的猫名和 id，并将其存储为哈希数组（即 [{:cat_id => 1, cname => "cat1"}, { :cat_id => 2, cname = "cat2"}]。

到目前为止，我有类似 output = [Owner.find(owner_id).join(:Cats)] 的内容，但我不确定如何完成该语句。太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:02:14.373

Owner.find(owner_id).cats 会给你你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T23:02:45.917

尝试这个：

```
Cat.all(:conditions => ['owner_id = ?', owner_id]) 
```

或者：

```
Owner.find(owner_id).cats 
```

那个假设你`has_many :cats`在你的 Owner 模型中。如果您需要哈希列表而不是活动记录对象，您可以使用 .collect 来转换您的集合。

# python - 使用 perl/python 更改 ivy.xml 中的 rev 值

> ID：12682295
> 
> 赞同：0
> 
> 时间：2012-10-01T22:59:55.003
> 
> 标签：python, xml, perl, ivy

需要在构建之前动态更改 ivy.xml 中的 rev="{rev}"。我试图使用 Perl XML:Simple 模块，但输出不可接受。在依赖项部分，我得到：

```
<dependencies name="dependency">
  <poi org="ossjava" rev="3.6.0" />
</dependencies> 
```

代替

```
<dependencies>
       <dependency org="ossjava" name="poi" rev="3.6.0"/>
</dependencies> 
```

请帮忙！一个 Python 代码片段也足够了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:06:25.250

具有讽刺意味的是，XML::Simple 是最复杂的 XML 模块。您需要指定一个空`KeyAttr`参数。

无论如何，我会使用：

```
use XML::LibXML qw( );

my $qfn = 'ivy.xml';

my $parser = XML::LibXML->new();
my $doc    = $parser->parse_file($qfn);
my $root   = $doc->documentElement();

for my $poi ($root->findnodes('//poi')) {
   $poi->setAttribute('rev', process($poi->getAttribute('rev')));
}

$doc->toFile($qfn); 
```

# jquery - IE blockUI & jquery 问题

> ID：12682296
> 
> 赞同：0
> 
> 时间：2012-10-01T22:59:58.937
> 
> 标签：jquery, internet-explorer, nivo-slider, blockui, jquery-blockui

我有一个产品列表，如果您单击链接，它将获取属性，它将启动 BlockUI 插件并显示具有与 ID 相同属性的不同图像。

我还使用了一个 nivo 滑块，它可以旋转具有相同属性的图像，并在点击时触发 blockui。但在 IE 中，滑块上的 blockui 不起作用。

这是在滑块图像上激活 blockui 的函数：

```
$('#slider a, #htmlcaption span').click(function(){      

  getpen = $(this).attr('pen');
  console.log(getpen);
  $.blockUI({message: $("#" + getpen), 
      css: { 
        top: '3%',
        left: ($(window).width() - 654) /2 + 'px',
        backgroundColor: 'transparent',
        border: 'none'
      }  
    }); 
    $("#" + getpen + " span").click($.unblockUI);

}); 
```

在 IE 中，console.log 不起作用，我不知道如何开始修复它。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T23:02:47.540

IE没有 **控制台** 对象..

这就是您的错误的原因。它仅在开发人员工具打开时才可用。

尝试评论该行或使用 alert 代替。

# tfs - Microsoft Visual Studio Team Foundation Server 2012 Power Tools 数据库备份工具错误

> ID：12682299
> 
> 赞同：0
> 
> 时间：2012-10-01T23:00:20.817
> 
> 标签：tfs, backup

我已将我们的 TFS 2010（Win 2008 R2 SP1、SQL Server 2008 R2 SP1、WSS 3.0 SP2）升级到 TFS 2012（Win 2012 RTM、SQL Server 2012、SPF 2010 SP1）。这是一个单一的服务器场（TFS、SP 安装在同一台服务器上）。TFS 构建安装在单独的服务器上。一切正常。

在 TFS 2010 环境中，我能够使用 TFS 2010 Power Tool 创建备份计划。我将 TFS 电动工具安装/升级到[TFS 2012 电动工具。](http://visualstudiogallery.msdn.microsoft.com/b1ef7eb2-e084-4cb8-9bc7-06c3bad9148f). 当我尝试使用备份计划向导创建备份计划时，出现错误。（我的猜测是在升级过程中，对数据库的一些权限被撤销了。）

这是我的备份计划设置：

![在此处输入图像描述](../Images/2be289af7cbaea0f99ceea39dfceaaf2.png)

![在此处输入图像描述](../Images/f27167dbc8118b4347e5da7f4ff0d88a.png)

看起来有三个问题：

**1\. 找不到报表数据库**

```
The following is logged:

[Info   @22:38:23.430] +-+-+-+-+-| Running VerifyReportingDatabases: Verify valid SQL Reporting Services database connection string |+-+-+-+-+-

[Info   @22:38:23.446] 

[Info   @22:38:23.446] +-+-+-+-+-| Verify valid SQL Reporting Services database connection string |+-+-+-+-+-

[Info   @22:38:23.446] Starting Node: DataBaseAccess

[Info   @22:38:23.446] NodePath : Container/Progress/DataBaseAccess

[Info   @22:38:23.524] Node returned: Error

[Error  @22:38:23.524] Cannot find reporting databases

[Info   @22:38:23.524] Completed VerifyReportingDatabases: Error

[Info   @22:38:23.524] ----------------------------------------------------- 
```

**2\. 找不到应用程序的 SharePoint 数据库。**

> [信息@22:38:23.540] +-+-+-+-+-| 运行 VerifySharepointDatabases：验证有效的 SharePoint 数据库连接字符串 |+-+-+-+-+-
> 
> ```
> [Info   @22:38:23.540] 
> 
> [Info   @22:38:23.540] +-+-+-+-+-| Verify valid SharePoint database connection string |+-+-+-+-+-
> 
> [Info   @22:38:23.540] Starting Node: DataBaseAccess
> 
> [Info   @22:38:23.540] NodePath : Container/Progress/Conditional/DataBaseAccess
> 
> [Info   @22:38:26.965] Node returned: Error
> 
> [Error  @22:38:26.965] Cannot find SharePoint databases for applications:  http://xxxxxx-tfs01:17012/. This tool does not support multiple SharePoint farms in TFS configuration. If your TFS server is using multiple farms for SharePoint application, please exclude SharePoint component from the backup plan
> 
> [Info   @22:38:26.965] Completed VerifySharepointDatabases: Error
> 
> [Info   @22:38:26.965] -----------------------------------------------------
> 
> [Info   @22:38:26.965] +-+-+-+-+-| Running VerifyBackupEncryptionKeyOperation: Verify > Reporting Services encryption key can be backed up |+-+-+-+-+-
> 
> [Info   @22:38:26.965] 
> 
> [Info   @22:38:26.965] +-+-+-+-+-| Verify Reporting Services encryption key can be backed up |+-+-+-+-+-
> 
> [Info   @22:38:26.965] Starting Node: VerifyBackupEncryptionKeyOperation
> 
> [Info   @22:38:26.965] NodePath : Container/Progress/Conditional/VerifyBackupEncryptionKeyOperation
> 
> [Info   @22:38:27.059] Node returned: Error [Error  @22:38:27.059] Provider load failure 
> 
> [Info   @22:38:27.059] Completed VerifyBackupEncryptionKeyOperation: Error
> 
> [Info   @22:38:27.059] ----------------------------------------------------- 
> ```

**3.警报设置失败**

> [信息@22:43:57.295] +-+-+-+-+-| 运行 VerifyEmailNotifications：验证电子邮件通知 |+-+-+-+-+-
> 
> ```
> [Info   @22:43:57.295] 
> 
> [Info   @22:43:57.295] +-+-+-+-+-| Verify Email Notifications |+-+-+-+-+-
> 
> [Info   @22:43:57.295] Starting Node: VerifyEmailNotifications
> 
> [Info   @22:43:57.295] NodePath : Container/Conditional/Progress/VerifyEmailNotifications
> 
> [Info   @22:44:05.461] Node returned: Error [Error  @22:44:05.461] The Backup Task account 'xxxxxxx-TFS01\TFSServiceAccount' either does not have permissions on your SMTP host or the password specified is invalid. Select an account with permissions to send emails and confirm the password is correct.
> 
> [Info   @22:44:05.461] Completed VerifyEmailNotifications: Error
> 
> [Info   @22:44:05.461] ----------------------------------------------------- 
> ```

这是在 TFS 2010 环境中工作的。 ![在此处输入图像描述](../Images/dce119440a477568b1d4d8274fce43c3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:05:30.633

不要使用 TFS 2012 Backup Power Tools。

而是将 SQL Server 维护计划用于 TFS 数据库备份，将 PowerShell cmdlet 用于 SP 场备份。

以下 MSDN[文章](http://msdn.microsoft.com/en-us/library/hh561429.aspx)提供了有关如何执行此操作的分步说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T22:19:53.787

我不得不使用你提到的 TFS2010[的文章。](http://msdn.microsoft.com/en-us/library/hh561429.aspx)当我在工具文件夹中看到 TFSBackup.exe/TFSRestore 时，我认为他们已正确获取了备份计划向导。我也无法让向导工作。幸运的是，我可以使用我为 TFS2010 编写的代码。这不是直截了当的。非常失望，这个基本的备份和恢复功能仍然无法正常工作。

# ruby-on-rails - 使用捆绑器安装 Rails 3 gem，仍然得到 NoMethodError

> ID：12682300
> 
> 赞同：0
> 
> 时间：2012-10-01T23:00:31.977
> 
> 标签：ruby-on-rails, gem, bundler

我正在尝试安装 calendar_helper gem。我在我的 Gemfile 中包含了 gem：

```
gem 'calendar_helper' 
```

我运行 bundle install 并加载正常。

```
Using calendar_helper (0.2.4) 
```

0.2.4 是 GitHub 中的最新版本，看起来不错。我在 Pow 上运行，所以我不需要重新启动服务器（尽管我尝试过）。添加对方法 calendar 的调用会引发错误：

```
undefined method `calendar' 
```

我觉得我的 Rails 安装或其他东西可能有问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:28:06.723

看起来 0.2.4 版本与 github 上的内容不一样；它缺少加载帮助程序所需的 Rails::Engine 子类。边缘源的关键行在这里：[https](https://github.com/topfunky/calendar_helper/blob/master/lib/calendar_helper.rb#L231) ://github.com/topfunky/calendar_helper/blob/master/lib/calendar_helper.rb#L231 。

您可以通过从边缘安装 gem 来解决此问题：

```
gem 'calendar_helper', :git => 'git://github.com/topfunky/calendar_helper.git' 
```

编辑：

如果这仍然不起作用，您也可以在 ApplicationHelper 中尝试：

```
require 'calendar_helper'

module ApplicationHelper
  include CalendarHelper
end 
```

# .htaccess - Wordpress 上传路径的 mod_rewrite 规则

> ID：12682302
> 
> 赞同：0
> 
> 时间：2012-10-01T23:01:03.083
> 
> 标签：.htaccess, mod-rewrite

我正在将站点从 Wordpress 转换为自定义 CMS，并且我正在尝试弄清楚如何处理帖子中的所有图像路径。

URL 结构为[http://site.com/wp-content/uploads/2012/09/image-name.jpg](http://site.com/wp-content/uploads/2012/09/image-name.jpg)

我需要以[http://site.com/uploads/image-name.jpg的形式获取它](http://site.com/uploads/image-name.jpg)

这是我到目前为止所得到的：

```
RewriteRule ^wp-content/uploads/([0-9-])/([0-9-])/([A-Za-z0-9-_]+)/?$ uploads/$3 [R=301,L] 
```

它似乎没有工作，但我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T23:04:15.990

几乎。您在分组中仅匹配单个数字或`-`. 你需要一个`+`在他们之后：

```
RewriteRule ^wp-content/uploads/([0-9-]+)/([0-9-]+)/([A-Za-z0-9-_.]+)/?$ /uploads/$3 [R=301,L] 
```

而且您之前需要一个斜杠，`uploads/`并且您需要将 a`.`作为最终分组的一部分（以匹配扩展名）。

# html - 两个 div 并排在一个包装 div 中，它应该仅与其中一个 div 一起拉伸

> ID：12682315
> 
> 赞同：0
> 
> 时间：2012-10-01T23:02:38.720
> 
> 标签：html, css, css-float, browser-scrollbars

标题几乎说明了一切。我有一个包装器 div，其中两个 div 并排浮动。两个 div 中的内容及其长度各不相同。问题是，我需要包装 div 仅使用正确的 div 进行拉伸。如果左侧 div 的长度超过右侧 div 的长度，则左侧 div 应该有滚动条。

IRC 中的一个人已经声称这是不可能的，但我拒绝相信他。CSS3 和/或 HTML5 是完全可以接受的，因为整个网站都是用它们编写的。

提前谢谢，如果有人知道答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:15:32.013

这是我制作的小提琴，应该可以完成您的要求：

[http://jsfiddle.net/zftXu/1/](http://jsfiddle.net/zftXu/1/)

请记住，由于右侧 div 的大小是动态的，如果其内容变得太大（超出屏幕），右侧 div 将移动到其下方的一行。如果您希望防止这种情况，请在包装器上放置溢出和最大宽度，如下所示：

[http://jsfiddle.net/zftXu/3/](http://jsfiddle.net/zftXu/3/)

# iphone - 释放 MkMapView 内存

> ID：12682321
> 
> 赞同：2
> 
> 时间：2012-10-01T23:03:22.843
> 
> 标签：iphone, ios, memory, mkmapview

有什么办法可以释放 iPhone 上的 MKMapView 占用的内存？

我的 MkMapview 似乎占用了大约 2megs 的整体内存（如 Instruments/Memory 中所见）。
当父视图控制器被释放时，这个内存不会被释放（奇怪！）。
移动地图时，MkMapView 会占用更多的内存，而这些内存永远不会被释放。这会导致我的应用程序在旧设备上崩溃。

谢谢 ！

# python - Django/Python 编码 - ''ascii' 编解码器无法解码位置 52 中的字节 0xc5'

> ID：12682322
> 
> 赞同：0
> 
> 时间：2012-10-01T23:03:39.550
> 
> 标签：python, django, encoding

我最近开始从事同一个项目，我注意到一些我无法解决的奇怪问题。运行 Django 开发服务器并在浏览器中输入地址后，我在终端中得到以下输出：

```
[02/Oct/2012 00:38:08] "GET / HTTP/1.1" 200 482
[02/Oct/2012 00:38:09] "GET /static/style.css HTTP/1.1" 200 349
[02/Oct/2012 00:38:09] "GET / HTTP/1.1" 200 482
Traceback (most recent call last):
  File "/usr/lib/python2.7/wsgiref/handlers.py", line 85, in run
    self.result = application(self.environ, self.start_response)
  File "/usr/local/lib/python2.7/dist-packages/django/contrib/staticfiles/handlers.py", line 67, in __call__
    return self.application(environ, start_response)
  File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/wsgi.py", line 241, in __call__
    response = self.get_response(request)
  File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py", line 146, in get_response
    response = debug.technical_404_response(request, e)
  File "/usr/local/lib/python2.7/dist-packages/django/views/debug.py", line 432, in technical_404_response
    'reason': smart_str(exception, errors='replace'),
  File "/usr/local/lib/python2.7/dist-packages/django/utils/encoding.py", line 116, in smart_str
    return str(s)
  File "/usr/local/lib/python2.7/dist-packages/django/core/urlresolvers.py", line 235, in __repr__
    return smart_str(u'<%s %s (%s:%s) %s>' % (self.__class__.__name__, self.urlconf_name, self.app_name, self.namespace, self.regex.pattern))
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc5 in position 52: ordinal not in range(128) 
```

页面显示正确，服务器仍在工作，但我认为这很烦人。我也很好奇这是怎么回事。
因此，过了一会儿我发现，如果我在 urls.py 中注释掉第二个模式，则不再显示错误消息。我的 urls.py：

```
# -*- coding: utf-8 -*-

from django.conf.urls import patterns, include, url

from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    url(r'^$', 'apps.articles.views.index', name='homepage'),
    url(r'', include('articles.urls', namespace='articles')),
    url(r'^admin/', include(admin.site.urls)),
) 
```

和应用程序/用户/urls.py：

```
# -*- encoding: utf-8 -*-

from django.conf.urls import patterns, url

urlpatterns = patterns('articles.views',
    url(r'^articles/$', 'article_list', {'all': True}, name='article_list'),
) 
```

我还注意到，我的 style.css 文件 isd/*position: absolute; 不能正常工作。我已经设置了边界

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:15:33.703

您的应用程序名称是否包含非 ASCII 字符？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-26T12:02:10.653

在 Linux 上，请确保您安装了`language-pack-xx`软件包，例如

```
sudo apt-get install language-pack-en 
```

以便为所有受支持的包（包括 Python）提供英文翻译数据更新。

* * *

然后确保在从终端运行脚本之前设置您的区域设置，例如

```
$ locale -a | grep "^en_.\+UTF-8"
en_GB.UTF-8
en_US.UTF-8
$ export LC_ALL=en_GB.UTF-8
$ export LANG=en_GB.UTF-8 
```

文档：`man locale`，，`man setlocale`。

# java - EJB删除实体不起作用

> ID：12682323
> 
> 赞同：2
> 
> 时间：2012-10-01T23:03:39.863
> 
> 标签：java, jakarta-ee, jpa, ejb-3.0

我正在使用 netbeans 并从数据库生成实体类。我对插入和更新实体的所有合并调用都运行良好，但是当我尝试删除一个实体时，它不会从数据库中删除它，也不会引发异常。谁能帮我解决。我的代码如下：

**AbstractFacade.java**

```
public abstract class AbstractFacade<T> {

    private Class<T>    entityClass;

    public AbstractFacade(Class<T> entityClass) {
        this.entityClass = entityClass;
    }

    protected abstract EntityManager getEntityManager();

    public void create(T entity) {
        getEntityManager().persist(entity);
    }

    public void edit(T entity) {
        getEntityManager().merge(entity);
    }

    public void remove(T entity) {
        getEntityManager().remove(getEntityManager().merge(entity));
    }

    public T find(Object id) {
        return getEntityManager().find(entityClass, id);
    }

    @SuppressWarnings({ "unchecked", "rawtypes" })
    public List<T> findAll() {
        javax.persistence.criteria.CriteriaQuery cq = getEntityManager().getCriteriaBuilder().createQuery();
        cq.select(cq.from(entityClass));
        return getEntityManager().createQuery(cq).getResultList();
    }

    @SuppressWarnings({ "unchecked", "rawtypes" })
    public List<T> findRange(int[] range) {
        javax.persistence.criteria.CriteriaQuery cq = getEntityManager().getCriteriaBuilder().createQuery();
        cq.select(cq.from(entityClass));
        javax.persistence.Query q = getEntityManager().createQuery(cq);
        q.setMaxResults(range[1] - range[0]);
        q.setFirstResult(range[0]);
        return q.getResultList();
    }

    @SuppressWarnings({ "unchecked", "rawtypes" })
    public int count() {
        javax.persistence.criteria.CriteriaQuery cq = getEntityManager().getCriteriaBuilder().createQuery();
        javax.persistence.criteria.Root<T> rt = cq.from(entityClass);
        cq.select(getEntityManager().getCriteriaBuilder().count(rt));
        javax.persistence.Query q = getEntityManager().createQuery(cq);
        return ((Long) q.getSingleResult()).intValue();
    }
} 
```

**AccountEntity.java**

```
@Entity
@Table(name = "Account")
public class AccountEntity implements Serializable {

    private static final long   serialVersionUID    = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "account_id")
    private Long                accountId;
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 100)
    @Column(name = "account_user", nullable = false, length = 100)
    private String              accountUser;
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 100)
    @Column(name = "account_pass", nullable = false, length = 100)
    private String              accountPass;
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 100)
    @Column(name = "account_fullname", nullable = false, length = 100)
    private String              accountFullName;
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 100)
    @Column(name = "account_email", nullable = false, length = 100)
    private String              accountEmail;
    @Basic(optional = false)
    @Size(min = 1, max = 100)
    @Column(name = "account_phone", nullable = true, length = 100)
    private String              accountPhone;
    @Basic(optional = false)
    @Size(min = 1, max = 100)
    @Column(name = "account_address", nullable = true, length = 100)
    private String              accountAddress;
    @JoinColumn(name = "role_id", referencedColumnName = "role_id")
    @ManyToOne(optional = false)
    private RoleEntity          roleId;
    @JoinColumn(name = "dealer_id", referencedColumnName = "dealer_id")
    @ManyToOne(optional = false)
    private DealerEntity        dealerId;
    @Basic(optional = false)
    @NotNull
    @Column(name = "isAvailable", nullable = false)
    private boolean             available;

    public AccountEntity() {
    }

    public AccountEntity(Long accountId) {
        this.accountId = accountId;
    }

    public AccountEntity(Long accountId, String accountUser, String accountPass) {
        this.accountId = accountId;
        this.accountUser = accountUser;
        this.accountPass = accountPass;
    }

    public Long getAccountId() {
        return accountId;
    }

    public void setAccountId(Long accountId) {
        this.accountId = accountId;
    }

    public String getAccountUser() {
        return accountUser;
    }

    public void setAccountUser(String accountUser) {
        this.accountUser = accountUser;
    }

    public String getAccountPass() {
        return accountPass;
    }

    public void setAccountPass(String accountPass) {
        this.accountPass = accountPass;
    }

    public String getAccountFullName() {
        return accountFullName;
    }

    public void setAccountFullName(String accountFullName) {
        this.accountFullName = accountFullName;
    }

    public String getAccountEmail() {
        return accountEmail;
    }

    public void setAccountEmail(String accountEmail) {
        this.accountEmail = accountEmail;
    }

    public String getAccountPhone() {
        return accountPhone;
    }

    public void setAccountPhone(String accountPhone) {
        this.accountPhone = accountPhone;
    }

    public String getAccountAddress() {
        return accountAddress;
    }

    public void setAccountAddress(String accountAddress) {
        this.accountAddress = accountAddress;
    }

    public RoleEntity getRoleId() {
        return roleId;
    }

    public void setRoleId(RoleEntity roleId) {
        this.roleId = roleId;
    }

    public DealerEntity getDealerId() {
        return dealerId;
    }

    public void setDealerId(DealerEntity dealerId) {
        this.dealerId = dealerId;
    }

    public boolean isAvailable() {
        return available;
    }

    public void setAvailable(boolean available) {
        this.available = available;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (accountId != null ? accountId.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        if (!(object instanceof AccountEntity)) {
            return false;
        }
        AccountEntity other = (AccountEntity) object;
        if ((this.accountId == null && other.accountId != null) || (this.accountId != null && !this.accountId.equals(other.accountId))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "entities.AccountEntity[ accountId=" + accountId + " ]";
    }
} 
```

**DealerEntity.java**

```
@Entity
@Table(name = "Dealer")
public class DealerEntity implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "dealer_id")
    private Long dealerId;
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 100)
    @Column(name = "dealer_name", nullable = false, length = 100)
    private String dealerName;
    @Size(max = 100)
    @Column(name = "dealer_phone", length = 100)
    private String dealerPhone;
    @Size(max = 100)
    @Column(name = "dealer_fax", length = 100)
    private String dealerFax;
    @Size(max = 100)
    @Column(name = "dealer_address", length = 100)
    private String dealerAddress;
    @Size(max = 100)
    @Column(name = "dealer_coordinate", length = 100)
    private String dealerCoordinate;
    @Size(max = 100)
    @Column(name = "state_name", length = 100)
    private String stateName;
    @Basic(optional = false)
    @NotNull
    @Column(name = "isRoot", nullable = false)
    private boolean isRoot;
    @Basic(optional = false)
    @NotNull
    @Column(name = "isAvailable", nullable = false)
    private boolean isAvailable;
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "dealerId")
    private List<CustomerEntity> customerEntityList;
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "dealerId")
    private List<ServiceEntity> serviceEntityList;
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "dealerId")
    private List<AccountEntity> accountEntityList;
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "dealerId")
    private List<PurchaseOrderEntity> purchaseOrderEntityList;
    @JoinColumn(name = "country_id", referencedColumnName = "country_id", nullable = false)
    @ManyToOne(optional = false)
    private CountryEntity countryId;

    public DealerEntity() {
    }

    public DealerEntity(Long dealerId) {
        this.dealerId = dealerId;
    }

    public DealerEntity(Long dealerId, String dealerName, boolean isRoot, boolean isAvailable) {
        this.dealerId = dealerId;
        this.dealerName = dealerName;
        this.isRoot = isRoot;
        this.isAvailable = isAvailable;
    }

    public Long getDealerId() {
        return dealerId;
    }

    public void setDealerId(Long dealerId) {
        this.dealerId = dealerId;
    }

    public String getDealerName() {
        return dealerName;
    }

    public void setDealerName(String dealerName) {
        this.dealerName = dealerName;
    }

    public String getDealerPhone() {
        return dealerPhone;
    }

    public void setDealerPhone(String dealerPhone) {
        this.dealerPhone = dealerPhone;
    }

    public String getDealerFax() {
        return dealerFax;
    }

    public void setDealerFax(String dealerFax) {
        this.dealerFax = dealerFax;
    }

    public String getDealerAddress() {
        return dealerAddress;
    }

    public void setDealerAddress(String dealerAddress) {
        this.dealerAddress = dealerAddress;
    }

    public String getDealerCoordinate() {
        return dealerCoordinate;
    }

    public void setDealerCoordinate(String dealerCoordinate) {
        this.dealerCoordinate = dealerCoordinate;
    }

    public String getStateName() {
        return stateName;
    }

    public void setStateName(String stateName) {
        this.stateName = stateName;
    }

    public boolean getIsRoot() {
        return isRoot;
    }

    public void setIsRoot(boolean isRoot) {
        this.isRoot = isRoot;
    }

    public boolean getIsAvailable() {
        return isAvailable;
    }

    public void setIsAvailable(boolean isAvailable) {
        this.isAvailable = isAvailable;
    }

    @XmlTransient
    public List<CustomerEntity> getCustomerEntityList() {
        return customerEntityList;
    }

    public void setCustomerEntityList(List<CustomerEntity> customerEntityList) {
        this.customerEntityList = customerEntityList;
    }

    @XmlTransient
    public List<ServiceEntity> getServiceEntityList() {
        return serviceEntityList;
    }

    public void setServiceEntityList(List<ServiceEntity> serviceEntityList) {
        this.serviceEntityList = serviceEntityList;
    }

    @XmlTransient
    public List<AccountEntity> getAccountEntityList() {
        return accountEntityList;
    }

    public void setAccountEntityList(List<AccountEntity> accountEntityList) {
        this.accountEntityList = accountEntityList;
    }

    @XmlTransient
    public List<PurchaseOrderEntity> getPurchaseOrderEntityList() {
        return purchaseOrderEntityList;
    }

    public void setPurchaseOrderEntityList(List<PurchaseOrderEntity> purchaseOrderEntityList) {
        this.purchaseOrderEntityList = purchaseOrderEntityList;
    }

    public CountryEntity getCountryId() {
        return countryId;
    }

    public void setCountryId(CountryEntity countryId) {
        this.countryId = countryId;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (dealerId != null ? dealerId.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof DealerEntity)) {
            return false;
        }
        DealerEntity other = (DealerEntity) object;
        if ((this.dealerId == null && other.dealerId != null) || (this.dealerId != null && !this.dealerId.equals(other.dealerId))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "entities.DealerEntity[ dealerId=" + dealerId + " ]";
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:05:57.180

您的持久性上下文似乎与底层数据库不同步。

尝试以下操作：

```
public void remove(T entity) {
    getEntityManager().remove(getEntityManager().merge(entity));
    getEntityManager().flush();
} 
```

# visual-studio-2010 - Visual Studio 2010 intellisense 无法识别其他包含目录

> ID：12682325
> 
> 赞同：5
> 
> 时间：2012-10-01T23:03:47.040
> 
> 标签：visual-studio-2010, include, intellisense

我在这里找不到与此类似的问题，因为它非常令人费解，而且我想更多的是烦恼而不是主要问题。抱歉，如果这已经存在。我设置了一个称为 BOOST_ROOT 的系统环境变量，它指向包含所有 boost 标头的目录（在我的例子中是 C:\Program Files (x86)\boost\boost_1_46_1）。我将其分配为我的 Visual Studio 2010 项目属性中的附加包含目录（通过将 $(BOOST_ROOT) 放置在 Configuration Properties->C/C++->General->Additional Include Directories 中）。然后在我的源代码中，我可以编写以下内容：

```
#include <boost\smart_ptr\shared_ptr.hpp> 
```

这编译并运行正常。我的主要问题是当我输入

```
#include <boost 
```

智能感知的一部分实际上并没有找到 boost 目录或其子目录。即使有完整的包含语句，智能感知告诉我它找不到文件。当我输入标题的完整路径时，情况仍然如此。

我想这比其他任何东西都更方便，因为该程序仍然有效，但我想知道是否有人经历过这个并设法解决它？

# c# - 更改特定字母的 TextBlock 前景

> ID：12682336
> 
> 赞同：0
> 
> 时间：2012-10-01T23:05:00.110
> 
> 标签：c#

是否可以更改特定字母的 TextBlock 的前景？说最后三个我选择红色，而不是默认的黑色。

我可以通过 C# 命令吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T23:51:29.767

您可以通过将文本创建为一系列`Run`s 来做到这一点。

```
 <TextBlock>
        <Run>C</Run>
        <Run Foreground="Red">ar</Run>
    </TextBlock> 
```

或者从代码隐藏中做到这一点：

```
 var textblock = new TextBlock();
  textBlock.Inlines.Add(new Run("C"));
  textBlock.Inlines.Add(new Run("ar") {Foreground = new SolidColorBrush(Colors.Red)}); 
```

# ios - 触摸不通过文本视图

> ID：12682339
> 
> 赞同：0
> 
> 时间：2012-10-01T23:05:29.567
> 
> 标签：ios, xcode

很抱歉有一个新手问题，但我的触摸没有通过文本视图。

我有一个从 XIB 创建的单元格，其中包含以下元素：图像视图、标签和文本视图。所以当我点击除了文本视图之外的任何地方时`didSelectCell:`。以其他方式 - 不是。

请建议如何调试或可能是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T23:32:47.233

*从评论中转移。*

如果您在不可`UITextView`编辑模式下使用，则只需将`userInteractionEnabled`属性设置为`NO`.

# .net - 如何将更新部署到集群中的 .NET 网站

> ID：12682341
> 
> 赞同：3
> 
> 时间：2012-10-01T23:05:42.223
> 
> 标签：.net, deployment, installation, updates

我们在负载平衡集群上运行企业 Web 应用程序，该集群由两个相同的 IIS 服务器组成，与单个 MSSQL 数据库通信。

要部署更新，我正在使用这个原始过程：

1) 在每个 IIS 机器上制作整个站点文件夹 (wwwroot\inetpub\whatever) 的副本 2) 从我们的开发区域将更新后的编译文件下载到每个 IIS 机器上 3) 关闭两个 Web 服务器的 IIS 4) 复制新的并将文件更新到 wwwroot 文件夹（覆盖任何相同的文件） 5）然后在两台机器上重新启动 IIS

当涉及数据库更改时，还有一些其他步骤。

整个过程相当快，但丑陋而危险，所以必须全神贯注。我只想按一个按钮让这一切发生。如果出现问题，我想要一键回滚（这就是我在步骤 1 中制作副本的原因）。

我正在寻找工具来管理和改进这个过程。如果它也帮助我们维护一个变更日志，那就太好了。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T21:36:26.380

您可以使用自动部署。例如，[kwatee](http://www.kwatee.net)支持回滚，可以处理多个服务器和/或多个环境（即 dev/test/prod）。它相当轻巧，带有用于配置和手动触发部署的 Web 界面，但您也可以使用 python CLI 脚本完全自动化。

# linux - egrep 剩余的 alpha 行

> ID：12682342
> 
> 赞同：0
> 
> 时间：2012-10-01T23:05:49.223
> 
> 标签：linux, command-line, grep, matching

我正在使用 grep 来验证行首的一些初始条件，但我需要在那之后的行的其余部分是 alpha。我不知道该怎么做。

这是我到目前为止所拥有的：^[0-9][0-9][0-9][[:alpha:]]+

这不起作用，因为如果在它仍然返回它之后有一个数字或空格一个或多个字符。我需要它，所以只返回像 111saasniIUSABIBAFAib 这样的行。

谢谢

-米切尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:07:31.430

使用`$`令牌匹配行尾，如下所示：

```
^[0-9][0-9][0-9][[:alpha:]]+$ 
```

# joomla - 模块在现有模块而不是新页面的同一窗口中打开文章

> ID：12682343
> 
> 赞同：1
> 
> 时间：2012-10-01T23:05:56.503
> 
> 标签：joomla, joomla2.5

我创建了一个带有扩展名的新菜单（v. 2.5）。我将新菜单中的对象视为新文章，并使用菜单管理器链接到它们。因此，单击菜单项会打开一个名为“x”的新页面。

新页面（“x”）从新菜单栏打开，显示模块项目（如图片）。我想添加一个指向另一个页面的链接并让它弹出。页面打开，但显示在现有页面的底部，并显示所有其他模块。不是弹出窗口，也不是没有来自“x”中模块的图片的新文章。因此，它不仅仅是在新窗口中显示文本文章，而是在该页面上所有现有模块的中间打开。

我尝试在模块管理器的链接管理器中使用“在另一个窗口中打开”，但它不起作用。我迷路了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T21:52:33.537

Joomla 系统中的模块被分配给菜单元素。请转到扩展/模块管理器。您将在此处查看已发布的模块。此列表中有一个名为 Pages 的列。如果您看到全部，则表示此模块将出现在每个页面上。

解决方案是一个一个打开模块并向下滚动到菜单分配并设置您想要查看模块的位置。

# android - 集成 ZXing 库：PackageManager$NameNotFoundException

> ID：12682349
> 
> 赞同：-1
> 
> 时间：2012-10-01T23:06:30.057
> 
> 标签：android, zxing

我正在使用 zxing 库，我在其中使用 Eclipse 构建了 ZXing Android 并将 ZXing Android 包含到我的项目中，并且项目清单是

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="phoenix.metro.uis"
    android:versionCode="4"
    android:versionName="1.2" >

    <uses-sdk android:minSdkVersion="8" />

    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <application
        android:icon="@drawable/metro"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar" >
        <activity
            android:name="MainActivity"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name="com.google.zxing.client.android.CaptureActivity"
            android:configChanges="orientation|keyboardHidden"
            android:screenOrientation="landscape"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
            android:windowSoftInputMode="stateAlwaysHidden" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
            <intent-filter>
                <action android:name="com.google.zxing.client.android.SCAN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity android:name=".PhoenixSplashActivity" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="SearchActivity"
            android:multiprocess="false"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name="OffersActivity"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name=".CartsActivity"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name="GANDActivity"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name="MetroActivity"
            android:screenOrientation="portrait" >
        </activity>
        <activity android:name="AddItemActivity" >
        </activity>
        <activity
            android:name=".AboutUsActivity"
            android:screenOrientation="portrait" >
        </activity>
    </application>

</manifest> 
```

但我得到了例外：

```
10-01 23:00:29.227: W/CaptureActivity(539): android.content.pm.PackageManager$NameNotFoundException: com.google.zxing.client.android
10-01 23:00:29.227: W/CaptureActivity(539):     at android.app.ContextImpl$ApplicationPackageManager.getPackageInfo(ContextImpl.java:1682)
10-01 23:00:29.227: W/CaptureActivity(539):     at com.google.zxing.client.android.CaptureActivity.showHelpOnFirstLaunch(CaptureActivity.java:693)
10-01 23:00:29.227: W/CaptureActivity(539):     at com.google.zxing.client.android.CaptureActivity.onCreate(CaptureActivity.java:169)
10-01 23:00:29.227: W/CaptureActivity(539):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-01 23:00:29.227: W/CaptureActivity(539):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
10-01 23:00:29.227: W/CaptureActivity(539):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
10-01 23:00:29.227: W/CaptureActivity(539):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-01 23:00:29.227: W/CaptureActivity(539):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
10-01 23:00:29.227: W/CaptureActivity(539):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-01 23:00:29.227: W/CaptureActivity(539):     at android.os.Looper.loop(Looper.java:123)
10-01 23:00:29.227: W/CaptureActivity(539):     at android.app.ActivityThread.main(ActivityThread.java:3683)
10-01 23:00:29.227: W/CaptureActivity(539):     at java.lang.reflect.Method.invokeNative(Native Method)
10-01 23:00:29.227: W/CaptureActivity(539):     at java.lang.reflect.Method.invoke(Method.java:507)
10-01 23:00:29.227: W/CaptureActivity(539):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-01 23:00:29.227: W/CaptureActivity(539):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-01 23:00:29.227: W/CaptureActivity(539):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:36:54.337

问题的原因[`showHelpOnFirstLaunch()`](http://code.google.com/p/zxing/source/browse/trunk/android/src/com/google/zxing/client/android/CaptureActivity.java#672)在于 CaptureActivity 中的方法。它试图获取`com.google.zxing.client.android`包的版本，没有找到它并抛出异常。它必须被抓住`catch (PackageManager.NameNotFoundException e) { ... }`。我不知道为什么没有捕获异常。

您可以编辑`showHelpOnFirstLaunch()`方法，例如删除包版​​本的检查或添加异常捕获（如果您的版本中没有）。

# wordpress - .htaccess 中的重定向 301 不接受斜杠

> ID：12682355
> 
> 赞同：1
> 
> 时间：2012-10-01T23:06:57.943
> 
> 标签：wordpress, .htaccess

我有一个 WordPress 博客，我正在尝试重定向到一个新域。301 重定向有效，但它重定向到 newdomain.comnew-post 而不是 newdomain.com/new-post。

不知何故，它正在剥离斜线。这是代码：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress

Redirect 301 /old-post/ http://www.newdomain.com/new-post/ 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T23:17:27.710

`www.newdomain.com`除非站点上还发生了重定向，否则不应发生这种情况。您需要确保不会发生这种情况。

另一种可能性是 mod_alias（`Redirect`指令）和 mod_rewrite（wordpress 的所有重写规则）可能会相互干扰。两者都应用于相同的 URI（当它`/old-post/`位于相同的 URL 文件映射过程管道中时。您可以尝试`Redirect`在完全应用 wordpress 规则之前删除并坚持使用 mod_rewrite。尝试类似：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule ^old-post/(.*)$ http://www.newdomain.com/new-post/$1 [L,R=301]
</IfModule>

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-06T11:20:01.607

这可能不是这个确切场景的解决方案，但它确实解决了斜杠字符从它重定向到的 URL 中删除的问题。

我的代码与此类似：

```
Redirect 301 / http://www.newdomain.com
Redirect 301 /old-post/ http://www.newdomain.com/new-post/ 
```

解决方案是在第一行之后添加一个斜杠：

```
Redirect 301 / http://www.newdomain.com/
Redirect 301 /old-post/ http://www.newdomain.com/new-post/ 
```

也可以尝试：

```
Options +FollowSymlinks
RewriteEngine on
RedirectMatch 301 ^/old-post/ http://www.newdomain.com/new-post/ 
```

# java - Android 时间不可由用户调整

> ID：12682357
> 
> 赞同：-1
> 
> 时间：2012-10-01T23:07:25.773
> 
> 标签：java, android, time, system

我正在尝试制作一个激励功能，每 3 小时您将在我的应用程序中免费获得一些东西。但是使用

```
System.currentTimeMillis() 
```

您只需手动将您的机器人时间更改为未来 3 小时即可轻松解决此问题，游戏将为您提供免费功能。有没有办法获得某种不基于系统时间的时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:06:44.013

您可以使用以下方法：

```
SystemClock.elapsedRealtime();
SystemClock.uptimeMillis(); 
```

它们不依赖于设备时钟。如果由于某种原因您不能直接使用它们，至少您可以使用它们对设备时钟的更改进行智能验证。

祝你好运。

# yii - yii cdbdatareader 和 readObject 函数

> ID：12682360
> 
> 赞同：0
> 
> 时间：2012-10-01T23:07:50.923
> 
> 标签：yii

我正在尝试从存储过程将 yii 构造一个对象。

[http://www.yiiframework.com/doc/api/1.1/CDbDataReader](http://www.yiiframework.com/doc/api/1.1/CDbDataReader)

我不确定如何使用函数 $dataReader->readObject('image', $image);

构造一个对象-如果这是正确的方法或者这是构造对象的非常慢的方法，任何人都有任何想法

```
 function __construct($image) {
                print "In BaseClass constructor\n";
             }      

     public static function getImageFromAliasTitle($alias_title)
                {              
                   // $alias_title =Utils::checkEnteredData($alias_title);
                    $connection = Yii::app()->db;     
                    $command = $connection->createCommand("CALL get_associated_image_detail(:in_image_alias_title, :in_image_visible, :in_image_approved, :in_album_visible, :in_album_approved)"); 
                    $command->bindParam(":in_image_alias_title",$alias_title,PDO::PARAM_STR);  
                    $command->bindValue(":in_image_visible",'1',PDO::PARAM_STR);  
                    $command->bindValue(":in_image_approved",'Yes',PDO::PARAM_STR);  
                    $command->bindValue(":in_album_visible",'1',PDO::PARAM_STR);  
                    $command->bindValue(":in_album_approved",'Yes',PDO::PARAM_STR);

                try{
                    $dataReader = $command->query(); 

                    if($dataReader->count() >0)
                    {
                        $image = $dataReader->read();                     
                    }

                    $dataReader->readObject('image', $image);

                  //  $image = $dataReader->read();        
                    $dataReader->nextResult(); 
                    $album = $dataReader->readAll();
                    $dataReader->nextResult(); 
                    $tag = $dataReader->readAll();
                    $dataReader->nextResult(); 
                    $user_image = $dataReader->readAll();
                    $dataReader->close();
                 }

                    catch(Exception $e){                   
                        Yii::log('', CLogger::LEVEL_ERROR, 'Message Here...');
                    }

                return $image;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T00:26:33.470

那这个呢：

```
foreach($row as $dataReader->readAll()){
    echo $row["image"];
} 
```

如果没有帮助，请尝试打印：

```
print_r($dataReader->readAll()); 
```

# java - iReport 0.4.1 中的子报表问题

> ID：12682361
> 
> 赞同：1
> 
> 时间：2012-10-01T23:08:10.813
> 
> 标签：java, jasper-reports, report, ireport, subreport

我正在使用*iReport 0.4.1*和*JasperReports 0.6.3*，并且在尝试生成子报告时遇到了*麻烦*：

*   我在Java代码中设置了*.jasper子报告*路径，是正确的，但是测试路径错误，没有错误发生；
*   在子报表中，放置一个字段进行测试，再次没有错误发生（即，*子报表*没有被访问......）；
*   我尝试通过两种方式访问*​​子报表*列表：作为参数和作为主报表 bean 字段（事实并非如此：实际上我有两个不相关的报表要打印在同一页面上，所以这就是*子报表*的原因）；
*   在几乎所有尝试中，当没有发生错误时，*子报表的*数据必须是空白
*   PS.：我*把子报表*放在*详细*带，主要报表数据。

有人可以帮我吗？- 两个报告代码如下。

PS 2：我无法更改版本，这是现有结构中的新报告，具有此*iReport*和*JasperReports*版本。

Java 报告调用：

```
parameters.put("subreportPath", projetoPath + "<CAMINHO>\\" + "xxxzz.jasper"
.................
parameters.put("ListaComparativoSaldos", listaSubreport);
//ABAIXO: nao funcionou
//parameters.put("ListaComparativoSaldos", new JRBeanCollectionDataSource(listaSubreport));
.................
return JasperFillManager.fillReport(is, parameters, new JRBeanCollectionDataSource(data)); 
```

# php - 我如何拉帖子和页面

> ID：12682362
> 
> 赞同：0
> 
> 时间：2012-10-01T23:08:10.123
> 
> 标签：php, wordpress, posts

我在我的网站上启用了页面类别，我正在尝试同时提取页面和帖子。我怎样才能做到这一点？如果我取出 'post_type' => 'page' 它默认只显示帖子。

```
<ul class="list-item">   

                <?php
                // Set up the arguments for retrieving the pages
                $args = array(
                    'post_type' => 'page',
                    'numberposts' => -1,
                    'post_status' => null,
                // $post->ID gets the ID of the current page
                'category' => 126,
                    'order' => ASC,
                    'orderby' => title
                    );
                 $subpages = get_posts($args);
                 // Just another WordPress Loop
                 foreach($subpages as $post) :
                    setup_postdata($post);
                 ?>

                <li>
                    <a href="<?php the_permalink(); ?>">
                        <img src="<?php echo gangmei_get_the_post_thumbnail_url($post->ID, 'large'); ?>" alt="image" />
                        <span class="holder">
                            <h2><?php the_title(); ?></h2>
                            <span class="postmeta"><?php echo 'The post type is: '.get_post_type( $post->ID ); ?>, <?php the_date(); ?></span>
                            <span class="txt"><?php the_excerpt_rss(); ?></span>
                        </span>
                        <span class="mask-1">mask</span>
                        <span class="mask-2">mask</span>
                    </a>
                </li>

            <?php endforeach; ?> 
            </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T13:25:10.067

```
'post_type' => array ('post', 'page') 
```

# android - 在 Android 中，为我的 style.xml 或 dimens.xml 定义小调整的最佳方式是什么？

> ID：12682365
> 
> 赞同：1
> 
> 时间：2012-10-01T23:08:40.640
> 
> 标签：android

在 Android 中，我们可以通过在文件夹名称后附加限定符来根据屏幕大小指定资源，例如“res/values-xlarge”。我正在开发一个大型企业应用程序，它有一些相当大的styles.xml 和dimens.xml 文件。显然，我不想为需要一些小调整的每个屏幕尺寸复制整个文件。

在不复制通用部分的情况下，指定对样式、尺寸和类似资源进行调整的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:15:26.063

只需在不同文件夹中指定要修改的值，并将常用的保留在最低级别。样式会有点难做，但您实际上可以使用所有常见值创建一个通用样式，然后指定从第一个继承的不同样式中的差异。

例如，您可以在 res/values/ 中有一个样式 A，它具有所有不同样式的共同行为。但是，在大屏幕（hdpi 和 xhdpi）中，您希望在小屏幕中具有您不希望的常见行为：只需创建一个从 A 继承并在 res/values 中具有该行为的 B 样式，然后在 res 中指定差异/values-xhdpi 和 res/values-hdpi。

如果 Android 无法在“正确”文件夹中的 R 中找到值，它将在别处搜索，直到找到所述值。

# datatable - primefaces 数据表的固定列宽

> ID：12682368
> 
> 赞同：1
> 
> 时间：2012-10-01T23:08:49.493
> 
> 标签：datatable, primefaces, width, fixed

我正在尝试为 primefaces 数据表定义固定的列宽。显然，设置宽度不起作用，因此创建了一个 CSS 文件，但这也不起作用。任何提示或解决方案将不胜感激。谢谢！

```
<p:dataTable id="messagesTableId" emptyMessage="#{messageBundle.tableNoResultsFound}"
             value="#{messageSearchBean.lazyModel}" var="message"    
             styleClass="messageOccurenceResult-table">

    <f:facet name="header">
        <h:outputText value="#{messageBundle['global.search.results']}"/>
    </f:facet>

    <p:column headerText="#{messageBundle['message.send.date']}" 
      styleClass="messageOccurenceResult-table" >
         <h:outputText value="#{message.sendDate}"/>   
    </p:column>       

    <p:column headerText="#{messageBundle['message.cc.email']}" style="width:*;
              word-wrap:break-word;">
        <h:outputText value="#{message.ccEmailIds}" />
    </p:column>

    <p:column headerText="#{messageBundle['message.messages.sent']}" 
      style="word-wrap:break-word;">
        <h:outputText value="#{fn:length(message.messageOccurrence)}"/>
    </p:column>

 </p:dataTable> 
```

CSS文件如下

```
 .messageOccurenceResult-table td:nth-child(1) {
  width:75px !important;
  }

 .messageOccurenceResult-table td:nth-child(2) {
  width:125px !important;
  }

 .messageOccurenceResult-table td:nth-child(3){
  width:75px !important;
  } 
```

内部结构如萤火虫所示

```
 <table role="grid">
    <thead>
    <tr>
    <tr>
    <tr role="row">
    <th id="messageDisplayForm:messagesTableId:j_idt86" 
    class="ui-state-default ui-  sortable-column ui-state-active" style="width:10%;"  
     role="columnheader">
    <div class="ui-dt-c">
    <span class="ui-sortable-column-icon ui-icon ui-icon-carat-2-n-s ui-icon-triangle-1-
    s"></span>
    <span>Date Sent</span>
    </div>
    </th>
    <th id="messageDisplayForm:messagesTableId:j_idt88"
     class="ui-state-default ui-sortable-column" style="width:10%;" role="columnheader">
    <div class="ui-dt-c">
    <span class="ui-sortable-column-icon ui-icon ui-icon-carat-2-n-s"></span>
   <span>Subject</span>
   </div>
   </th>
    <th id="messageDisplayForm:messagesTableId:j_idt90" class="ui-state-default" 
    style="width:20%;" role="columnheader">
   <div class="ui-dt-c">
    <span>Message Category</span>
    </div>
   </th>
   <th id="messageDisplayForm:messagesTableId:j_idt92" class="ui-state-default ui-sortable-    column" style="word-wrap:break-word;" role="columnheader">
    <div class="ui-dt-c">
   <span class="ui-sortable-column-icon ui-icon ui-icon-carat-2-n-s"></span>
   <span>Sender Email</span>
   </div>
   </th>
   <th id="messageDisplayForm:messagesTableId:j_idt98" 
    class="ui-state-default"   style="width:50px;" role="columnheader">
    <div class="ui-dt-c">
    <span>Messages Sent</span>
    </div>
    </th>
    </tr>
    </thead>
    <tfoot>
    <tbody id="messageDisplayForm:messagesTableId_data" 
    class="ui-datatable-data ui-widget-content">
    </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:31:37.847

各种 PrimeFaces 功能需要/想知道列宽（可滚动），因此对于 PrimeFaces 3.4，您需要按如下方式指定宽度：

```
<p:column ... width="52">
  ...
</p:column> 
```

单位是像素。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-02T06:10:52.530

做类似下面的事情

**桌子：**

```
<p:datatable tableStyleClass="ui-datatable-tst1"  styleClass="mystyle" ....> 
```

**css 表格样式类：**

```
.ui-datatable .ui-datatable-tst1 {
background-color: black;
background-image: inherit;
background-position: 0 0;
background-attachment: scroll;
background-repeat: repeat;
color: black;
padding-top: 0px;
padding-bottom: 0px;
left:0px;
width:70%!important;
height:350px;
position: absolute;
} 
```

**css styleClass：（**参考： http: [//forum.primefaces.org/viewtopic.php?](http://forum.primefaces.org/viewtopic.php?f=9&t=22443) f=9&t=22443 ）

```
 .mystyle.ui-datatable .ui-datatable-header{
    height: 20px !important;
    width: 100%;
    position: absolute;
    margin-top: -10px;
    padding-top: 0px;
    padding-bottom: 0px;
    }

    .mystyle.ui-datatable .ui-datatable-data{
    height: 70% !important;
    width: 100%;
    position: absolute;
    top:70px;
    margin-top: 0px;
    margin-bottom: 0px;
    margin-left: 0px;
    margin-right: 0px;
    padding-top: 0px;
    padding-bottom: 0px;
    }

    .mystyle.ui-datatable .ui-datatable-odd.ui-state-hover{
    background:  blue;

    }

    .mystyle.ui-datatable .ui-datatable-even.ui-state-hover{
    background: cadetblue ;

    }

    .mystyle.ui-datatable .ui-datatable-even.ui-state-highlight{
    background: cadetblue ;

    }

    .mystyle.ui-datatable .ui-datatable-odd.ui-state-highlight{
    background: blue;

    }

    .mystyle.ui-datatable .ui-datatable-data-empty td {
    color:red;
    font-weight:bold;
    }
    .mystyle.ui-datatable th { 
    font-family: verdana;
    font-size: 1em;
    margin-top: 0px;
    }

    .mystyle.ui-datatable .ui-expanded-row-content{
    background:white;
    }

    .mystyle.ui-datatable .ui-datatable-data tr{
    height : 24px;
    margin-top: 0px;
    margin-bottom: 10px!important;
    margin-left: 0px;
    margin-right: 0px;
    padding-top: 0px;
    padding-bottom: 10px!important;
    left: 0px;
    right: auto;
    top: 0px;
    bottom: auto;
   } 
```

**柱子：**

```
 <p:column headerText="tst" styleClass="ui-column1-size"> 
```

**CSS：**

```
.ui-datatable .ui-column1-size{
width:15%;
height: 8%;
font-size: 90%;
left:0%;
right:15%;
position:absolute;
} 
```

为所有列创建上面的 css（确保左右值正确）

# c++ - c/c++中的系统暂停

> ID：12682373
> 
> 赞同：0
> 
> 时间：2012-10-01T23:09:47.207
> 
> 标签：c++, c

根据该站点的解释，[不要使用 system("pause")](http://www.gidnetwork.com/b-61.html)， system("pause") 将“打开操作系统外壳（在子进程中重新启动操作系统）”。O/S 是什么意思？操作系统？如果 O/S == 操作系统，那将是难以置信的昂贵

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T23:11:15.250

我认为他们的意思是在另一个进程中重新启动 shell。

# php - 在 if 语句 PHP 中传递变量

> ID：12682375
> 
> 赞同：0
> 
> 时间：2012-10-01T23:10:08.183
> 
> 标签：php, if-statement

我有一堆 if 语句，它们根据传递的信息有不同的过滤器。

稍后在代码中，我还需要在 IF 语句中重新使用该过滤器，这是变量

```
$over5hours = "$workextra->id > 767 && $workextra->id <=1301"; 
```

现在这是我的 if 语句

```
if($userid==$workextra->ownerId && $workextra->hoursDone >= 5 && $over5hours) 
```

但是那个 over5hours 变量只显示：>767 && <1301，而不是在 IF 语句中写入整个字符串。

除了将该变量转换为数组之外，还有一种更简单的方法可以做到这一点，我不想编写 2 倍的 IF 语句，因为它会使我已经很糟糕的新手代码膨胀。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T23:13:22.623

假设我了解您的目标，您可以简单地删除 $over5hours 值周围的引号。

```
$over5hours = $workextra->id > 767 && $workextra->id <=1301; 
```

但是，我可能会误解您的目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T23:13:57.883

你不能插入这样的语句。`... && $over5hours`不`$over5hours`作为表达式计算；它只是一个字符串，与`$anyRandomString == true`. 您可以做的最好的事情是首先将表达式评估为布尔值并在`if`语句中使用它：

```
$over5hours = $workextra->id > 767 && $workextra->id <=1301;
if ($userid == $workextra->ownerId && $workextra->hoursDone >= 5 && $over5hours) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T23:14:41.297

如果使用单引号而不是双引号，则不会计算变量。

此外，如果 $workextra->id 的值没有改变，您可以简单地省略引号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T23:16:15.917

您需要使用单引号或转义 $ 才能打印。但除此之外，您将需要使用 eval() 来让此代码以您想要的方式运行。但是使用 eval() 是不好的做法。您可能应该找到另一种方法。

# android - 使用 webservice 阅读 wordpress 帖子

> ID：12682382
> 
> 赞同：1
> 
> 时间：2012-10-01T23:11:01.740
> 
> 标签：android, web-services

我有一个基于 wordpress 的博客，我想按类别使用 web 服务读取我的数据。我将在我的 android 应用程序中使用这个 web 服务。在 PHP 中最好的方法是什么？

# c# - 使用 JavaScriptSerializer 正确序列化

> ID：12682385
> 
> 赞同：0
> 
> 时间：2012-10-01T23:11:33.400
> 
> 标签：c#, jquery, asp.net, .net

我正在使用 JavaScriptSerializer 序列化对象。在序列化异常时我遇到了麻烦。或者更确切地说，在反序列化序列化异常时，因为它包含文件路径的换行符和反斜杠。（让我们将争议留到另一次）。

我已经做了一个“js encoding”扩展方法来克服这个问题，非常类似于以下一个：

[https://stackoverflow.com/a/2680805/385926](https://stackoverflow.com/a/2680805/385926)

但我知道 Asp.Net WebMethods 会自动序列化为 JSON，并且异常会正确序列化，无需额外编程。

那么 asp.net 在序列化为 JSON 时如何处理那些特殊的 char 情况呢？是否有任何类或方法来处理它？我的扩展方法和 JsEncoding 方法对于 .Net 中已经存在的东西不是多余的吗？

提前致谢。

**编辑：**

按要求编码。我有一个 aspx 页面：

```
protected void Page_Load(object sender, EventArgs e)
{
    Response.ContentType = "application/json";
    var serializer = new JavaScriptSerializer();

    try
    {
        // do the file manipulation and registering
        Process();

        Response.Clear();
        Response.Write(serializer.Serialize(new
        {
            d = true
        }));
    }
    catch (Exception ex)
    {   
        Response.Clear();
        Response.Write(serializer.Serialize(new
        {
            Message = ex.Message,
            ExceptionType = ex.GetType().ToString(),
            StackTrace = ex.StackTrace
        }));
    }

} 
```

当出现异常时，我无法使用 JSON.parse 反序列化（实际上我不确定这是在 jQuery 中还是在浏览器中构建）。JSON.parse 抛出异常，因为有换行符（而不是 \n 字符串）和其他特殊字符。例如，它会尝试解析以下异常（但失败）：

```
{"Message":"User not authenticated.","ExceptionType":"System.Exception","StackTrace":" at MyWebTest.MySite.Process() in C:\Solutions\MyWebTest\MySite.aspx.cs:line 100
at MyWebTest.MySite.Page_Load(Object sender, EventArgs e) in C:\Solutions\MyWebTest\MySite\.aspx.cs:line 60"} 
```

相反，它应该返回以下内容（因为它被正确解析）：

```
{"Message":"User not authenticated.","ExceptionType":"System.Exception","StackTrace":" at MyWebTest.MySite.Process() in C:\\\\Solutions\\\\\MyWebTest\\\\MySite.aspx.cs:line 100\\r\\n at MyWebTest.MySite.Page_Load(Object sender, EventArgs e) in C:\\\\Solutions\\\\MyWebTest\\\\MySite.aspx.cs:line 60"} 
```

所以我创建了一个扩展方法来进行替换。并且代码被更改为：

```
new
{
    Message = ex.Message.JsEncode(),
    ExceptionType = ex.GetType().ToString(),
    StackTrace = ex.StackTrace.JsEncode()
})); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-03-25T12:42:54.657

我在包含双引号的 JSON 字符串中遇到了类似的问题。序列化后，我最终正确地转义了它`HttpUtility.JavaScriptStringEncode`：

```
ApplicationDataJson =
    HttpUtility.JavaScriptStringEncode(
        new JavaScriptSerializer().Serialize(
            applicationData)); 
```

所以对于你的原始代码，

```
catch (Exception ex)
{   
    Response.Clear();
    Response.Write(HttpUtility.JavaScriptStringEncode(
        serializer.Serialize(new
        {
            Message = ex.Message,
            ExceptionType = ex.GetType().ToString(),
            StackTrace = ex.StackTrace
        }
    )));
} 
```

# c# - While循环和变量初始化

> ID：12682388
> 
> 赞同：1
> 
> 时间：2012-10-01T23:09:41.683
> 
> 标签：c#

在下面的代码中，我想问：作者在用值初始化之前如何评估**while循环中的变量'line'？**

```
StreamReader myReader = new StremReader("Values.txt");

string line = "";

while (**line != null**)

{

    line = myReader.ReadLine();
    if (line != null)
        console.WriteLine(line);
}

myReader.Close();

console.ReadLine(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T23:13:18.040

它用一个*值*初始化：空字符串：

```
string line = ""; 
```

即使它没有值并且 was `null`，仍然可以通过类似`while`循环中的比较来测试它是否为 null。

现在，这是一个未初始化的变量的样子：

```
string line; // Help! I'm only declared!
while (line != null)
{
    // do stuff
} 
```

试图编译它会给你这个错误：“使用未分配的局部变量'line'”。但是分配任何价值，包括`""`或`null`会使事情再次正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T23:26:37.130

一种快速且易于阅读的方式：

```
string line;
while((line = myReader.ReadLine()) != null)
{
   Console.WriteLine(line);
} 
```

至于您提供的作者的代码片段， line 被初始化为一个空字符串。因此，它总是至少会进入`while`循环一次。然后它从阅读器中获取一行，如果它不为空，则对其进行处理，然后继续前进。我永远不会那样写，因为你那样做的检查太多了。还不如做一个单一的分配和检查一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T01:20:26.103

**简短回答：** `line` 变量已经用空字符串初始化`""`。

关于给定的代码示例，我建议使用`using`构造来确保尽快处理非托管代码。

```
using (StreamReader myReader = new StreamReader("Values.txt"))
            {
                string line = "";
                while (line != null)
                {

                    line = myReader.ReadLine();
                    if (line != null)
                        console.WriteLine(line);
                }

                //myReader.Close();
                console.ReadLine();
            }; 
```

# java - 为 Java GUI 项目添加分数计数器

> ID：12682390
> 
> 赞同：0
> 
> 时间：2012-10-01T23:12:26.273
> 
> 标签：java, swing, user-interface, jlabel

我正在开发一个使用 java GUI 的 Rock Paper Scissors 游戏，我的一切工作都很好，但我想为用户和计算机添加一个分数计数器，它们都位于屏幕的角落，每次都添加 1任何一方赢得一场比赛。我没有做到最好的三分之二或类似的东西，这只是一场无休止的比赛，我希望它随着你的前进而加起来。这是我的代码，.jpg 和 .png 文件只是我用于背景和其他内容的图像。我已经尝试创建一种方法来保持分数（方法分数和其他与 yourScore 和 compScore 相关的东西），但我无法显示它并且欢迎任何新想法，尽管我几乎所有东西都使用了 JLabels。

```
public class main extends JFrame implements ActionListener {
    JButton rock;
    JButton scissors;
    JButton paper;
    JLabel left;
    ImageIcon rock1;
    ImageIcon scissors1;
    ImageIcon scissors2;
    ImageIcon paper2;
    ImageIcon paper1;
    ImageIcon rock2;
    ImageIcon back;
    ImageIcon scissorsb;
    JLabel right;
    String[] RPS = { "Rock", "Paper", "Scissors" };
    Random rand = new Random();
    int num = rand.nextInt(RPS.length);
    int yourChoice = -1;
    JTextField texter;
    JLabel winner;
    Container contentPane = this.getContentPane();
    SpringLayout layout = new SpringLayout();
    String Tie = "Tie";
    String compwins = "Computer wins!";
    String youwin = "You win!";
    int yourNum = 9;
    JLabel yourScore;
    int compNum = 0;
    JLabel compScore;
    Font winnerFont = new Font("Font", Font.PLAIN, 35);

    public main() {
        super("Rock Paper Scissors");
        back = new ImageIcon("image1233450665506.png");
        paper1 = new ImageIcon("paper1.png");
        paper2 = new ImageIcon("paper2.png");
        scissors1 = new ImageIcon("scissors1.png");
        scissors2 = new ImageIcon("scissors2.png");
        rock1 = new ImageIcon("rock1.png");
        rock2 = new ImageIcon("rock2.png");

        JLabel background = new JLabel(back);
        left = new JLabel();
        right = new JLabel();
        winner = new JLabel();
        yourScore = new JLabel();
        compScore = new JLabel();
        right.setVisible(true);
        this.setVisible(true);
        this.setSize(1280, 985);
        winner.setFont(winnerFont);
        winner.setHorizontalAlignment(SwingConstants.CENTER);
        yourScore.setFont(winnerFont);
        compScore.setFont(winnerFont);

        contentPane.setLayout(layout);

        contentPane.add(winner);
        contentPane.add(left);
        contentPane.add(right);
        contentPane.add(yourScore);
        contentPane.add(compScore);
        layout.putConstraint(SpringLayout.NORTH, left, 300, SpringLayout.NORTH,
                contentPane);
        layout.putConstraint(SpringLayout.NORTH, right, 300,
                SpringLayout.NORTH, contentPane);
        layout.putConstraint(SpringLayout.EAST, right, 0, SpringLayout.EAST,
                contentPane);

        rock = new JButton("Rock");
        paper = new JButton("Paper");
        scissors = new JButton("Scissors");

        layout.putConstraint(SpringLayout.WEST, rock, 500, SpringLayout.WEST,
                contentPane);
        this.add(rock, BorderLayout.NORTH);
        layout.putConstraint(SpringLayout.SOUTH, rock, -30, SpringLayout.SOUTH,
                contentPane);
        layout.putConstraint(SpringLayout.WEST, rock, 40, SpringLayout.NORTH,
                contentPane);
        this.add(paper, BorderLayout.NORTH);
        layout.putConstraint(SpringLayout.SOUTH, paper, -30,
                SpringLayout.SOUTH, contentPane);
        layout.putConstraint(SpringLayout.WEST, paper, 200, SpringLayout.NORTH,
                contentPane);
        this.add(scissors, BorderLayout.NORTH);
        layout.putConstraint(SpringLayout.SOUTH, scissors, -30,
                SpringLayout.SOUTH, contentPane);
        layout.putConstraint(SpringLayout.WEST, scissors, 360,
                SpringLayout.NORTH, contentPane);
        rock.setBackground(Color.GRAY);
        rock.setPreferredSize(new Dimension(140, 50));
        paper.setBackground(Color.WHITE);
        paper.setPreferredSize(new Dimension(140, 50));
        scissors.setBackground(Color.LIGHT_GRAY);
        scissors.setPreferredSize(new Dimension(140, 50));
        rock.repaint();
        scissors.repaint();
        paper.repaint();
        contentPane.add(background);
        this.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        rock.doClick();
        paper.doClick();
        scissors.doClick();
        rock.addActionListener(this);
        paper.addActionListener(this);
        scissors.addActionListener(this);

    }

    public static void main(String args[]) {
        main framer = new main();
    }

    @Override
    public void actionPerformed(ActionEvent arg0) {
        // TODO Auto-generated method stub

        if (arg0.getSource() == rock) {
            left.setIcon(rock1);
            yourChoice = 0;
        } else if (arg0.getSource() == paper) {
            left.setIcon(paper1);
            yourChoice = 1;
        } else if (arg0.getSource() == scissors) {
            left.setIcon(scissors1);
            yourChoice = 2;
        }

        computerMove();

        // result.repaint();
        Score();
    }

    public void Score() {
        layout.putConstraint(SpringLayout.NORTH, winner, 50,
                SpringLayout.NORTH, contentPane);
        layout.putConstraint(SpringLayout.WEST, winner, 560, SpringLayout.WEST,
                contentPane);
        layout.putConstraint(SpringLayout.SOUTH, compScore, 100,
                SpringLayout.SOUTH, contentPane);
        layout.putConstraint(SpringLayout.EAST, compScore, 600,
                SpringLayout.EAST, contentPane);
        yourScore = new JLabel(Integer.toString(yourNum));
        compScore = new JLabel(Integer.toString(compNum));

        if (num == 0 && yourChoice == 0) {
            winner.setText(Tie);
            winner.repaint();
        } else if (num == 1 && yourChoice == 0) {
            yourNum++;
            yourScore.repaint();
            winner.setText(compwins);
            winner.repaint();
        } else if (num == 2 && yourChoice == 0) {
            compNum++;
            compScore.repaint();
            winner.setText(youwin);
            winner.repaint();
        } else if (num == 0 && yourChoice == 1) {
            yourNum++;
            yourScore.repaint();
            winner.setText(youwin);
            winner.repaint();
        } else if (num == 1 && yourChoice == 1) {
            winner.setText(Tie);
            winner.repaint();
        } else if (num == 2 && yourChoice == 1) {
            compNum++;
            compScore.repaint();
            winner.setText(compwins);
            winner.repaint();
        } else if (num == 0 && yourChoice == 2) {
            compNum++;
            compScore.repaint();
            winner.setText(compwins);
            winner.repaint();
        } else if (num == 1 && yourChoice == 2) {
            yourNum++;
            yourScore.repaint();
            winner.setText(youwin);
            winner.repaint();
        } else if (num == 2 && yourChoice == 2) {
            winner.setText(Tie);
            winner.repaint();
        }
        winner.repaint();
        yourScore.repaint();
        compScore.repaint();
        yourScore.setForeground(Color.RED);
        compScore.setForeground(Color.RED);
        winner.setForeground(Color.RED);

    }

    public void computerMove() {
        num = rand.nextInt(RPS.length);
        if (num == 0) {
            right.setIcon(rock2);
        } else if (num == 1) {
            right.setIcon(paper2);
        } else if (num == 2) {
            right.setIcon(scissors2);
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T00:04:15.717

[好吧，如果您使用绝对定位](http://www.roseindia.net/java/example/java/swing/AbsCoordinate.shtml)，这将非常容易，它允许您通过坐标设置 JLabels、JButton 等，而不必定位它们并使代码超级混乱。

然后对于分数部分，我将创建一个新的 JLabel，一个用于计算机，一个用于播放器，显示在左/右上方并显示分数。

希望能帮助到你！

# visual-studio-2012 - Visual Studio 2012 解决方案资源管理器按钮视图设计器

> ID：12682391
> 
> 赞同：3
> 
> 时间：2012-10-01T23:12:50.723
> 
> 标签：visual-studio-2012, solution-explorer

我注意到或没有看到解决方案资源管理器的工具条中没有“查看设计器”按钮。VS2010 既有 View Code 也有 View Designer，但在 VS2012 中我只能看到 View Code。

是否有可能让视图设计器回来？如果是这样，怎么做？

# asp.net - Visual Studio 2003 插入空格

> ID：12682394
> 
> 赞同：1
> 
> 时间：2012-10-01T23:13:09.677
> 
> 标签：asp.net, .net, vb.net, compiler-errors, visual-studio-2003

有没有其他人遇到过这个问题：

在 Server'03 上运行 VS2003，并且有一天在我的 VB Web 应用程序上突然出现，空格被插入到我的 .aspx 文件的 HTML 部分。因此，简单地打开一个表会被修改为“<td>”（是的，包括空格！）当然会失败。

那么..我纠正了所有的间距错误，很好..突然间，前一天运行良好的子程序调用出现了编译错误。

VS2003设置是否可能会影响文件并导致它以这种方式自动编辑文件？

是的，我坚持使用此特定服务器上的 VS 版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:13:49.100

Visual Studio 2003 以 HTML 中的自动格式化问题而闻名。做这些事情，看看它是否有帮助：

1）转到工具菜单，选项 - 转到文本编辑器，然后转到 HTML 并确保禁用任何自动格式化 - 转到 Html 设计器并确保默认视图是源视图并确保

2) 不要使用 HTML 设计器

3) 仔细检查您是否安装了最新的 VS 2003 服务包。

4) （可选）获取 Visual Studio 2010。

# java - 如何更改 JTextArea/JTextLabel 的可见性？

> ID：12682396
> 
> 赞同：0
> 
> 时间：2012-10-01T23:13:10.380
> 
> 标签：java, swing, visibility

我尝试使用`.setVisibility(true)`但得到了一个`NullPointerException`. 我怎样才能更有效地做到这一点？我希望标签和字段开始不可见，然后在用户按下按钮时变为可见。我还想更改对象的大小。想法？继承人的错误线之一：

```
public JLabel lblName;

    JLabel lblName = new JLabel("Name:");
    lblName.setFont(new Font("Tahoma", Font.PLAIN, 15));
    lblName.setBounds(10, 91, 79, 19);
    panel.add(lblName);
    lblName.setVisible(false);

    public void actionPerformed(ActionEvent e) {
        lblName.setVisible(true);
    } 
```

以上所有都是单独的代码片段，在我添加第三个片段之前它们可以完美运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:40:53.580

从您问题中的代码来看：

您有一个字段和本地`JLabel lblName` 您没有初始化该字段，只有本地变量。因此你的例外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T00:00:15.150

换句话说，转到这一行：

```
JLabel lblName = new JLabel("Name:"); 
```

并让它说

```
lblName = new JLabel("Name:"); 
```

发生的事情是您正在启动一个新的局部变量，而从未设置公共变量。

# asp.net-mvc-3 - Ninject：选择错误的构造函数

> ID：12682398
> 
> 赞同：7
> 
> 时间：2012-10-01T23:13:21.080
> 
> 标签：asp.net-mvc-3, ninject

我有一个带有 Ninject v2.2.1.4 的 ASP.NET MVC 3 应用程序。一切都很好，然后突然我们开始看到 Ninject 尝试使用带有参数的构造函数而不是无参数构造函数来创建 DbContext。以下是绑定：

```
kernel.Bind<MyContext>().ToSelf().InRequestScope();

kernel.Bind<IUnitOfWork>().ToMethod(ctx => ctx.Kernel.Get<MyContext>());
kernel.Bind<DbContext>().ToMethod(ctx => ctx.Kernel.Get<MyContext>()); 
```

MyContext 是一个 DbContext 对象，它也实现了 IUnitOfWork 接口。我以这种方式进行了设置，因此将相同的上下文注入到单个请求中使用的多个存储库中。MyContext 构造函数如下所示：

```
public MyContext() { }
public MyContext(string connectionString) { }
public MyContext (long accountID) { }
public MyContext (Connection connection) { } 
```

不同的应用程序有不同的构造函数，因为它们都使用相同的 MyContext 类。查看绑定时，您会认为当请求 MyContext 类时会调用无参数构造函数，但无论出于何种原因，它都不是。即使没有指定 accountID，也会调用具有长 accountID 参数的那个。这显然会抛出异常声明，即“没有可用的匹配绑定，并且类型不可自绑定”它实际上在尝试生成 IUnitOfWork 时抛出了异常。

如果我注释掉最后三个构造函数，一切正常，并且使用无参数构造函数。如果我注释掉任何两个参数化构造函数，它会尝试使用另一个而不是无参数的构造函数。

Ninject 提供的建议是：

```
Suggestions:
  1) Ensure that you have defined a binding for long.
  2) If the binding was defined in a module, ensure that the module has been loaded into the kernel.
  3) Ensure you have not accidentally created more than one kernel.
  4) If you are using constructor arguments, ensure that the parameter name matches the constructors parameter name.
  5) If you are using automatic module loading, ensure the search path and filters are correct. 
```

我们没有任何 1 的东西，因为我们不想。我不确定 2 和 5 是什么意思。我不相信我们已经完成了 3 并且我们没有做 4。

关于为什么在这种情况下不使用无参数构造函数的任何想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T00:37:53.037

@Xander 的回答总体上是正确的，但 Ninject 在 V3 中有一些非常具体的解决方案。Ninject 通过一种特定算法对构造函数进行评分，该算法是找到具有[最多参数的构造函数，它知道如何解决，如本 wiki 文章中所述](http://www.planetgeek.ch/2011/05/28/ninject-constructor-selection-preview/)[声称适用于 V2.4，实际上标记为 3.0]。 [见代码](https://github.com/ninject/ninject/blob/master/src/Ninject/Selection/Heuristics/StandardConstructorScorer.cs)。我想这也在wiki上。如果不是，应该有人把它放在那里。

重新查看您所看到的行为变化，可能是隐式自绑定正在更改球门柱（在解析期间添加了新注册），或者您添加了一个使其他构造函数之一更具吸引力的绑定。

该`[Inject]`属性胜过您所追求的所有其他标准（尽管您实际上并不希望在代码中包含特定于容器的属性）。

建议的`WithConstructorArgument`技术实际上是通过使用来实现的`ToConstructor`- 进行 WCA 不会影响选择（而且我认为您不会收到有关冗余规范的抱怨。

真正的底线是，您永远不应该像@Mark Seemann 对[这个相关问题](https://stackoverflow.com/questions/2522224/injection-of-class-with-multiple-constructors)的评论中提到的那样陷入混乱。

* * *

可悲的是，以上都是谎言。如果您离开 v2.2，这个答案将变得正确。如果你不能或不会，你需要查看等效的源代码和测试以找出之前的规则（从内存（以及我研究中搜索结果中出现的一些谷歌代码），它是基于构造函数计数，但不确定如何消除相等的分数。

可以肯定的是，在 2.2 中，添加一个`[Inject]`是快速的出路。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T23:19:25.683

默认情况下，Ninject 以及其他类似的 IoC 框架选择具有最多参数的构造函数。`WithConstructorArgument`通过扩展方法指定在初始化期间要使用的构造函数。

```
kernel.Bind<DbContext>()
      .WithConstructorArgument("connectionString",
             ConfigurationManager.ConnectionStrings["connection"]
                  .ConnectionString)
      .ToMethod(ctx => ctx.Kernel.Get<MyContext>()); 
```

要强制 Ninject 使用*默认构造函数*，请将`[Inject]`属性放在构造函数上：

```
[Inject]
public MyContext() { } 
```

# python - 选择 5 个最新的 DISTINCT 行

> ID：12682399
> 
> 赞同：0
> 
> 时间：2012-10-01T23:13:22.373
> 
> 标签：python, django

我的模型如下所示：

```
class UserRating(models.Model):

    RATING_CATEGORIES = (
        1: 'Bad',
        2: 'Boring',
        3: 'Average',
        4: 'Good',
        5: 'Great'
    )

    for_user = models.ForeignKey(User, related_name='for_user')
    by_user = models.ForeignKey(User, related_name='by_user')
    rating_category = models.IntegerField(choices=RATING_CATEGORIES)
    points = models.IntegerField(_('Points'), default=0)
    created = models.DateTimeField(_('Created')) 
```

现在我想根据评分选择 5 个最新`rating_category`的行。`by_user``for_user`

我做了这样的事情：

```
entries = UserRating.objects.values('rating_category').filter(
        for_user=for_user,
        by_user=by_user).order_by('-created')[:5] 
```

但它会返回基于`rating_category`.

假设我有以下 MySQL 表条目：

```
id for_user by_user rating_category points         created
 1    1        1           1          100     2012-09-28 00:19:00
 2    1        1           2          100     2012-09-28 00:18:00
 3    1        1           4          100     2012-09-28 00:17:00
 4    1        1           4           0      2012-09-28 00:16:00
 5    1        1           3          100     2012-09-28 00:15:00
 6    1        1           5           0      2012-09-27 00:19:00
 7    1        1           2           0      2012-09-26 00:18:00 
```

所需的输出是： `rowid-1, rowid-2, rowid-3, rowid-5, rowid-6`

仅基于`rating_category`但`latest`根据`created`日期的不同行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:58:53.433

`DISTINCT`这里是红鲱鱼。您要做的是将记录分组`rating_category`，然后为每个组选择具有最近创建日期的记录。所以你想要这样的查询：

```
from django.db.models import Max
entries = (UserRating.objects.filter(for_user = for_user, by_user = by_user)
           .values('rating_category')
           .annotate(last_created = Max('created'))
           .order_by('-last_created'))[:5] 
```

`rating_category`这将返回带有键和的字典`last_created`。

# c - 从多个 NUMA 节点中保留内存块

> ID：12682404
> 
> 赞同：3
> 
> 时间：2012-10-01T23:14:07.507
> 
> 标签：c, linux, linux-kernel, linux-device-driver, numa

[这个](https://stackoverflow.com/q/1911473/143897)问题讨论了如何强制 linux 内核排除一些内存被使用（因此对内核可见）。与`memmap=nn[KMG]$ss[KMG]`您一起可以排除 1 块内存。

是否可以多次提供此内核启动参数以从各种 NUMA 节点中排除物理内存的多个部分。

你试过了吗？有什么建议么 ？

# regex - 从 []byte 中去除 C 风格的注释

> ID：12682405
> 
> 赞同：4
> 
> 时间：2012-10-01T23:14:17.350
> 
> 标签：regex, go

全部。我正在尝试为特定类型的配置文件编写一个包装器，该文件是 JSON 编码的。不幸的是，该文件包含 C 风格的注释（`//`和`/* */`,），这些会导致`json.Unmarshal`. 有没有办法强制 Unmarshal 忽略这些评论，或者以其他方式轻松删除它们？

我现在正在研究`regexp`，但我希望有一个优雅的解决方案，作为 Go 的初学者，我可能无法在几分钟内提出。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T00:18:13.417

您必须去掉注释，因为 JSON 规范不允许注释。正则表达式可以完成这项工作。

```
package main

import (
    "fmt"
    "regexp"
)

var bytes = []byte(`// this is a line comment
this is outside the comments
/* this
   is
   a
   multi-line
   comment */`)

func main() {
    re := regexp.MustCompile("(?s)//.*?\n|/\\*.*?\\*/")
    newBytes := re.ReplaceAll(bytes, nil)
    fmt.Println(string(newBytes))
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-01T23:52:29.880

你肯定需要写一些东西，因为 JSON 不允许评论，所以同样，如果 go json pkg 有助于忽略不属于规范的评论，我会感到惊讶。

# jquery - History.js 使用 ie6/ie7 恢复状态

> ID：12682406
> 
> 赞同：3
> 
> 时间：2012-10-01T23:14:22.110
> 
> 标签：jquery, internet-explorer-7, internet-explorer-6, history.js

我一直在我的 HTML5 浏览器和 IE8/9 上成功使用 History.js，但是即使我使用的是 html4+html5 jQuery 版本，它在 ie6/ie7 中也不起作用。

使用以下代码，当我从主页单击普通链接时，我希望 state.data 能够恢复，然后单击后退按钮返回主页。

主页包含以下代码，通过提交表单调用：

```
if (window.History && window.History.enabled) {
  var vars = {};
  var tables = {};
  vars['something'] = 'value';
  History.replaceState({vars: vars, tables: tables}, null, window.location.href.match(/^([^#]*)/)[1]);
} 
```

此页面有一个 onload 函数，如下所示：

```
var state = History.getState();
var data = state.data;

    if (data.vars) {
          alert('success!');
    } 
```

它在 IE6/IE7 下没有显示成功，尽管它在我尝试过的任何其他浏览器上都可以正常工作。

您是否看到任何明显缺失的内容，或者对如何进行有想法？我尝试调试 history.html4.js 和 history.js 的非缩小版本，但我不了解交互的微妙之处。

谢谢你尽你所能的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:21:00.227

我相信您永远不会让 History.js 与不支持该`onHashChange`事件的浏览器一起使用，因为 History.js 使用`pushState`（仅在 html5 中）兼容浏览器，而“#hash”则用于支持该事件的 html4 浏览器。甚至 ie9 也使用 hash 而不是 pushState。但是，同样，ie6 和 ie7 都不支持散列事件。

# c - 解析带有奇数标记的 c 字符串

> ID：12682411
> 
> 赞同：0
> 
> 时间：2012-10-01T23:14:53.470
> 
> 标签：c, parsing

我正在尝试解析一行

```
1            {2}           {2,3}         {4} 
```

分成4个不同的字符数组

其中 1 是 '1','\0'

括号中的其他数字均为“2”

'2','3'

'4'

我已经尝试了带有困境的 strtok “\t}”，并且我还尝试了 sscanf 将 %s 传递给第一列，将“{%S}”传递给其余列。两者都没有给我预期的结果。谁能给我推动正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:29:18.160

您的问题是`%S`解析以空格结尾的单词（因此它将“}”作为字符串的一部分读取。

```
fscanf(stream, "{%[^}]}", buffer); 
```

将 '{}' 之间的字符扫描到缓冲区中。
注意：您可能还需要注意这里的缓冲区溢出。

```
"{%[^}]}"
{             -> Matches {
%[<char>]     -> Matches a sequence of characters that match any of the characters in <char>
                 If the first character is ^ this makes it a negative so any characters that
                 do not follow the ^
%[^}]         -> Matches a sequence of characters that does not match `}`
}             -> Matches } 
```

但我会尝试单独解析这些数字。

```
// If the input does not contain '{' next then we get an error and the
// next section of code is not entered.
if (fscanf(stream, " {") != EOF)
   // Note: The leading space matches one or more white space characters
   //       So it is needed to get passed leading white space.
{
    // We enter this section only if we found '{'
    int  value;
    char next;
    while(fscanf(stream, "%d%c", &value, &next) == 2)
    {
        // You have an integer in value
        if (next == '}')
        {    break;
        }
        if (next == ',')
        {    continue;
        }
        // You have an error state  the next character after the number was not
        // a space or a comma ',' or end of section '}'
    }
} 
```

### 编辑（在使用中显示）

使用此代码：

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    while (scanf(" {") != EOF)
    {   
        printf("Enter BLOCK\n");

        int  value;
        char next;
        while(scanf("%d%c", &value, &next) == 2)
        {   
            if ((next == '}') || (next == ','))
            {   
                printf("\tVALUE %d\n",value);
            }   

            if (next == '}')
            {    break;
            }   
            if (next == ',')
            {    continue;
            }   

            printf("ERROR\n");
            exit(1);
        }   
        printf("EXIT BLOCK\n");
    }   
} 
```

然后像这样使用：

```
> gcc gh.c 
> echo "  {2}           {2,3}         {4}" | ./a.out
Enter BLOCK
    VALUE 2
EXIT BLOCK
Enter BLOCK
    VALUE 2
    VALUE 3
EXIT BLOCK
Enter BLOCK
    VALUE 4
EXIT BLOCK 
```

# libstdc++ - 我搞砸了 libstdc++6

> ID：12682412
> 
> 赞同：0
> 
> 时间：2012-10-01T23:15:03.750
> 
> 标签：libstdc++

我在尝试安装 teampeak 时弄乱了 /usr/lib/libstdc++6。所以我到了，我没有更多的 libstdc++6 文件，我正在尽我所能。我不能再使用 apt-get 或 aptitude（我在 debian 上）。我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T23:20:10.787

[直接从http://packages.debian.org/squeeze/libstdc%2B%2B6](http://packages.debian.org/squeeze/libstdc%2B%2B6)为您的系统下载`deb`软件包（您可能需要使用不同的计算机，或者像or之类的简单工具）。`curl``wget`

如果`dpkg`仍然有效，请使用`dpkg -i <.deb file>`安装它。

否则，`deb`可以使用 提取`ar x <.deb file>`，并且可以使用 提取数据文件`tar xvzf data.tar.gz`。然后，您可以`mv`将文件从`./usr/lib`正确的位置。

# php - 从第二个条目开始的进程数组？

> ID：12682413
> 
> 赞同：1
> 
> 时间：2012-10-01T23:15:04.467
> 
> 标签：php, arrays

我在 PHP 中有一个数组，想`foreach`用来处理跳过 [0] 的条目、处理 [1]、[2] 等。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T23:18:24.040

您可以使用`array_slice`

```
$array = array(1,2,3);
foreach (array_slice($array,1) as $value ) {
    echo $value;
} 
```

如果您不介意丢失第一个元素，您可以使用`array_shift`

```
array_shift($array);
foreach ( $array as $value ) {
    echo $value;
} 
```

输出

```
23 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T23:16:16.790

```
$i = 0;
foreach ($ar as $value) {
    if ($i > 0) {
        // code here
    }
    $i++;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T23:20:53.387

您可以为此保留一个变量：

```
$firstSkipped = false;
foreach ($arr as $value) {
    if (!$firstSkipped) {
        $firstSkipped = true;
        continue;
    }
    // code here
} 
```

或者您可以使用常规`for`循环，将开始计数器设置为 1：

```
for ($i = 1, $count = count($arr); $i < $count; $i++) {
    // code here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T23:22:19.770

[您可以使用array_shift](http://www.php.net/manual/en/function.array-shift.php)从数组中删除第一个条目。

```
$array = array("a","b","c");
array_shift($array);
foreach ($array as $values)
{
    echo $values; //bc
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T23:26:14.180

试试这个：

```
$arr = array(0,1,2,3,4,5);

unset($arr[0]);

foreach($arr as $value) {
    echo $value;
    echo "<br />";  
} 
```

这会从数组中删除第一个条目，所以它不会按照你的要求跳过，但无论如何你可以试试这个......

# xaml - Metro 应用程序中的 ListView 没有获得其垂直滚动条

> ID：12682423
> 
> 赞同：3
> 
> 时间：2012-10-01T23:16:11.017
> 
> 标签：xaml, listview, windows-8, microsoft-metro, scrollbar

我在 Windows 应用商店（又名 Metro）应用程序 XAML 方面没有经验，所以也许我忽略了一些简单的东西，但根据书籍和示例，垂直滚动条是 ListView 控件的自然部分，除非明确禁用，否则会出现是 ListView 中的不可见项。

但就我的应用程序而言。我有一个典型的列表/详细信息页面，左侧窗格中包含项目 - 它们显示良好，带有滚动条，并且在右侧窗格中选择了项目详细信息。选定的项目包含一组子项目，如果它们很多，它们应该用滚动条显示。我有一个简单的 ListView 定义：

```
 <ListView 
            x:Name="itemCollection"
            Grid.ColumnSpan="1" 
            SelectionChanged="ItemListView_SelectionChanged"
            ItemsSource="{Binding Elements}" 
            ItemTemplate="{StaticResource Custom80ItemTemplate}" /> 
```

奇怪的是，我从来没有看到这个列表的滚动条。只有当我明确地将其模式设置为“可见”时，我才能看到一个滚动条，但没有任何东西可以滚动它！

显然程序认为整个列表都是可见的，所以滚动条是不必要的，但是什么能让它做出这样的判断呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T12:16:36.423

我终于解决了这个问题。与大多数此类问题一样，错误很愚蠢：拥有此 ListView 的 Grid 控件有一个额外的（错误的）行定义，该行定义的 Height 属性用星号标记，即占用所有剩余空间。但是 ListView 使用的行将高度标记为“自动”，因此它扩展到其项目的整个大小并且从未激活其垂直滚动条。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T00:56:40.597

尝试将可见性设置为自动。

# c# - 如何触发点击隐藏的按钮并在客户端有代码隐藏事件？

> ID：12682428
> 
> 赞同：0
> 
> 时间：2012-10-01T23:16:23.393
> 
> 标签：c#, jquery, onclick

我知道如何通过 jquery 触发按钮单击。：

```
$('#hiddenSendButton').trigger('click'); 
```

我试图做的是让这个在代码隐藏中触发一个点击事件。

```
<input id="hiddenSendButton" class="hiddenSendButton" type="hidden" runat="server" onclick="btnSend_Click" /> 
```

我不认为我这样做是正确的，我猜我需要使用 asp.net 按钮控件才能将其绑定到代码隐藏或类似的东西。

这是我的代码隐藏。：

```
Protected Sub btnSend_Click(ByVal sender As Object, ByVal e As EventArgs) 
```

我尝试在句柄子句中添加，但由于它是一个输入按钮，它没有那个。

有任何想法吗？我确信这很简单，我似乎无法通过搜索找到任何关于此的内容。

我在想的一件事是使用 asp.net 按钮，但我如何使它隐藏但在客户端仍然可见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T23:19:19.317

是的，您需要使用 asp.net 按钮控件将其绑定到代码隐藏中的单击事件。

```
<asp:button runat="server" id="btnSend" class="hiddenSendButton" onclick="btnSend_Click" /> 
```

此外，在您的示例中，您将其作为隐藏字段，而不是隐藏按钮。这是两个非常不同的东西。隐藏字段没有被“点击”的能力。

# arduino - 使用 Arduino Leonardo 的通用键盘仿真

> ID：12682429
> 
> 赞同：6
> 
> 时间：2012-10-01T23:16:32.513
> 
> 标签：arduino, hid, emulation

我正在尝试使用[Arduino Leonardo](http://arduino.cc/en/Main/arduinoBoardLeonardo)进行键盘仿真，因为这是其宣传的功能之一。我一直在玩 Leonardo，并根据 Blink 示例写了一个非常简单的草图。

```
// Pin 13 has an LED connected on most Arduino boards.
int led = 13;

// The setup routine runs once when you press reset:
void setup()
{
    // Initialize the digital pin as an output.
    pinMode(led, OUTPUT);
}

// The loop routine runs over and over again forever:
void loop()
{
    delay(5000);              // Wait for five seconds
    digitalWrite(led, HIGH);  // Turn the LED on (HIGH is the voltage level)
    delay(100);               // Wait for a secondA
    digitalWrite(led, LOW);   // Turn the LED off by making the voltage LOW
    Keyboard.write('A');      // Write an A using keyboard emulator
} 
```

现在这个例子在我的 Windows XP 机器上运行良好。它被识别为通用[HID](http://en.wikipedia.org/wiki/Human_interface_device)键盘，每五秒会键入一个“A”。

目标环境正在运行 DOS，因此据我所知，我需要让这台机器上的 BIOS 识别出 Arduino Leonardo，但事实并非如此，并且它不会在 DOS 中键入“A”。

我一直在修改 Leonardo 的 USB 设备描述符，试图让它尽可能匹配戴尔 L100。我所做的修改没有帮助，我怀疑这是因为 Leonardo 是一个复合设备，它在同一个 USB 端口上公开了串行通信、键盘仿真和鼠标仿真。USB 描述符/配置的源代码可供编辑，位于：

*   Arduino_Installation\hardware\arduino\cores\arduino\HID.cpp
*   Arduino_Installation\hardware\arduino\cores\arduino\USBDesc.h
*   Arduino_Installation\hardware\arduino\cores\arduino\USBCore.h
*   Arduino_Installation\hardware\arduino\cores\arduino\USBCore.cpp

以下是 Leonardo 的 USB 设备查看器的转储：

```
[Port3]  :  USB Composite Device

          ---===>Device Information<===---
English product name: "Arduino Leonardo"

ConnectionStatus:
Current Config Value:              0x01  -> Device Bus Speed: Full
Device Address:                    0x03
Open Pipes:                           4

          ===>Endpoint Descriptor<===
bLength:                           0x07
bDescriptorType:                   0x05
bEndpointAddress:                  0x81  -> Direction: IN - EndpointID: 1
bmAttributes:                      0x03  -> Interrupt Transfer Type
wMaxPacketSize:                  0x0010 = 0x10 bytes
bInterval:                         0x40

          ===>Endpoint Descriptor<===
bLength:                           0x07
bDescriptorType:                   0x05
bEndpointAddress:                  0x02  -> Direction: OUT - EndpointID: 2
bmAttributes:                      0x02  -> Bulk Transfer Type
wMaxPacketSize:                  0x0040 = 0x40 bytes
bInterval:                         0x00

          ===>Endpoint Descriptor<===
bLength:                           0x07
bDescriptorType:                   0x05
bEndpointAddress:                  0x83  -> Direction: IN - EndpointID: 3
bmAttributes:                      0x02  -> Bulk Transfer Type
wMaxPacketSize:                  0x0040 = 0x40 bytes
bInterval:                         0x00

          ===>Endpoint Descriptor<===
bLength:                           0x07
bDescriptorType:                   0x05
bEndpointAddress:                  0x84  -> Direction: IN - EndpointID: 4
bmAttributes:                      0x03  -> Interrupt Transfer Type
wMaxPacketSize:                  0x0040 = 0x40 bytes
bInterval:                         0x01

          ===>Device Descriptor<===
bLength:                           0x12
bDescriptorType:                   0x01
bcdUSB:                          0x0110
bDeviceClass:                      0x00
*!*ERROR: device class should be Multi-interface Function 0xEF
          When IAD descriptor is used
bDeviceSubClass:                   0x00
*!*ERROR: device SubClass should be USB Common Sub Class 2
          When IAD descriptor is used
bDeviceProtocol:                   0x00
*!*ERROR: device Protocol should be USB IAD Protocol 1
          When IAD descriptor is used
bMaxPacketSize0:                   0x40 = (64) Bytes
idVendor:                        0x2341 = Vendor ID not listed with USB.org as of 03-19-2008
idProduct:                       0x8036
bcdDevice:                       0x0100
iManufacturer:                     0x01
     English (United States)  "Arduino LLC"
iProduct:                          0x02
     English (United States)  "Arduino Leonardo"
iSerialNumber:                     0x00
bNumConfigurations:                0x01

          ===>Configuration Descriptor<===
bLength:                           0x09
bDescriptorType:                   0x02
wTotalLength:                    0x0064  -> Validated
bNumInterfaces:                    0x03
bConfigurationValue:               0x01
iConfiguration:                    0x00
bmAttributes:                      0x80  -> Bus Powered
MaxPower:                          0xFA = 500 mA

          ===>IAD Descriptor<===
bLength:                           0x08
bDescriptorType:                   0x0B
bFirstInterface:                   0x00
bInterfaceCount:                   0x02
bFunctionClass:                    0x02  -> This is Communications (CDC Control) USB Device Interface Class
bFunctionSubClass:                 0x01
bFunctionProtocol:                 0x01
iFunction:                         0x00

          ===>Interface Descriptor<===
bLength:                           0x09
bDescriptorType:                   0x04
bInterfaceNumber:                  0x00
bAlternateSetting:                 0x00
bNumEndpoints:                     0x01
bInterfaceClass:                   0x02  -> This is Communications (CDC Control) USB Device Interface Class
bInterfaceSubClass:                0x01
bInterfaceProtocol:                0x00
CAUTION:  This may be an invalid bInterfaceProtocol
iInterface:                        0x00
  -> This is a Communications (CDC Control) USB Device Interface Class

          ===>Descriptor Hex Dump<===
bLength:                           0x05
bDescriptorType:                   0x24
05 24 00 10 01
  -> This is a Communications (CDC Control) USB Device Interface Class

          ===>Descriptor Hex Dump<===
bLength:                           0x05
bDescriptorType:                   0x24
05 24 01 01 01
  -> This is a Communications (CDC Control) USB Device Interface Class

          ===>Descriptor Hex Dump<===
bLength:                           0x04
bDescriptorType:                   0x24
04 24 02 06
  -> This is a Communications (CDC Control) USB Device Interface Class

          ===>Descriptor Hex Dump<===
bLength:                           0x05
bDescriptorType:                   0x24
05 24 06 00 01

          ===>Endpoint Descriptor<===
bLength:                           0x07
bDescriptorType:                   0x05
bEndpointAddress:                  0x81  -> Direction: IN - EndpointID: 1
bmAttributes:                      0x03  -> Interrupt Transfer Type
wMaxPacketSize:                  0x0010 = 0x10 bytes
bInterval:                         0x40

          ===>Interface Descriptor<===
bLength:                           0x09
bDescriptorType:                   0x04
bInterfaceNumber:                  0x01
bAlternateSetting:                 0x00
bNumEndpoints:                     0x02
bInterfaceClass:                   0x0A  -> This is a CDC Data USB Device Interface Class
bInterfaceSubClass:                0x01
bInterfaceProtocol:                0x00
CAUTION:  This may be an invalid bInterfaceProtocol
iInterface:                        0x00

          ===>Endpoint Descriptor<===
bLength:                           0x07
bDescriptorType:                   0x05
bEndpointAddress:                  0x02  -> Direction: OUT - EndpointID: 2
bmAttributes:                      0x02  -> Bulk Transfer Type
wMaxPacketSize:                  0x0040 = 0x40 bytes
bInterval:                         0x00

          ===>Endpoint Descriptor<===
bLength:                           0x07
bDescriptorType:                   0x05
bEndpointAddress:                  0x83  -> Direction: IN - EndpointID: 3
bmAttributes:                      0x02  -> Bulk Transfer Type
wMaxPacketSize:                  0x0040 = 0x40 bytes
bInterval:                         0x00

          ===>Interface Descriptor<===
bLength:                           0x09
bDescriptorType:                   0x04
bInterfaceNumber:                  0x02
bAlternateSetting:                 0x00
bNumEndpoints:                     0x01
bInterfaceClass:                   0x03  -> HID Interface Class
bInterfaceSubClass:                0x01
bInterfaceProtocol:                0x00
CAUTION:  This may be an invalid bInterfaceProtocol
iInterface:                        0x00

          ===>HID Descriptor<===
bLength:                           0x09
bDescriptorType:                   0x21
bcdHID:                          0x0101
bCountryCode:                      0x00
bNumDescriptors:                   0x01
bDescriptorType:                   0x22
wDescriptorLength:               0x0065

          ===>Endpoint Descriptor<===
bLength:                           0x07
bDescriptorType:                   0x05
bEndpointAddress:                  0x84  -> Direction: IN - EndpointID: 4
bmAttributes:                      0x03  -> Interrupt Transfer Type
wMaxPacketSize:                  0x0040 = 0x40 bytes
bInterval:                         0x01 
```

我怎样才能让这个 Leonardo 被 BIOS 识别为通用键盘？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-01T11:25:15.667

Arduino 不支持启动协议。我已经开始使用[Teensy](https://www.adafruit.com/products/199)（与 Arduino 兼容），而且效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T20:23:17.977

我可能弄错了，但是如果您希望在启动过程中识别您的设备，它`bInterfaceSubClass`应该是 0x01（启动设备子类）。在您指出的源文件中，到处都有子类设置为 0x00。

您可以尝试将所有使用 D_INTERFACE 宏的子类从 USBCore.h 设置为 0x01。

我不是 Arduino 用户，我只有一次使用[V-USB](http://www.obdev.at/products/vusb/hidkeys.html)在 AVR 上玩 HID 键盘仿真。您可以尝试在[USB.org](http://www.usb.org/developers/docs/)的文档中找到有关 USB 描述符的详细信息。但要阅读的页面非常多。

这是我键盘的部分 od HID 描述符转储，请注意接口描述符中的值：

```
Bus 005 Device 002: ID 046d:c30e Logitech, Inc. UltraX Keyboard (Y-BL49)
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               1.10
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0
  bDeviceProtocol         0
  bMaxPacketSize0         8
  idVendor           0x046d Logitech, Inc.
  idProduct          0xc30e UltraX Keyboard (Y-BL49)
  bcdDevice            1.80
  iManufacturer           1 Logitech
  iProduct                2 HID compliant keyboard
  iSerial                 0
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength           59
    bNumInterfaces          2
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0xa0
      (Bus Powered)
      Remote Wakeup
    MaxPower              100mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass         3 Human Interface Device
      bInterfaceSubClass      1 Boot Interface Subclass
      bInterfaceProtocol      1 Keyboard
      iInterface              0
        HID Device Descriptor:
          bLength                 9
          bDescriptorType        33
          bcdHID               1.10
          bCountryCode            0 Not supported
          bNumDescriptors         1
          bDescriptorType        34 Report
          wDescriptorLength      62 
```

转储是在 linux 下使用“lsusb -v”作为 root 进行的。

# .net - 使 .NET 断言在发布版本中引发异常

> ID：12682432
> 
> 赞同：3
> 
> 时间：2012-10-01T23:16:57.007
> 
> 标签：.net, assert

在我们的代码中，我们有一堆 .NET 断言，我们从未见过它们失败。如果由于某种原因断言确实失败了，我们宁愿终止进程并生成故障转储，也不愿破坏用户的数据。

我们已经设置了所有架构来在未处理的异常时创建内存转储，因此我们希望我们的断言在发布版本中以这种方式运行。有没有办法巧妙地做到这一点，或者我们只需要用`Assert`其他一些断言然后抛出的函数替换我们所有的调用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T23:18:17.537

一种选择是使用[Trace.Assert](http://msdn.microsoft.com/en-us/library/tk4kachs.aspx)而不是 Debug.Assert。

从 MSDN 页面的备注部分：

> 如果您想在发布版本中进行断言，请使用 Trace.Assert 方法。Debug.Assert 方法仅适用于调试版本。

**编辑：**回应评论：

存在的原因是提供与生产版本`Trace.Assert`相同的功能。`Debug.Assert`您应该能够使用与 Debug.Assert 上的故障转储相同的基础架构，但您必须引用 Trace 而不是 Debug。来自 MSDN 文章[托管代码中的断言](http://msdn.microsoft.com/en-us/library/ttcc4x86.aspx#BKMK_Customizing_Assert_behavior)：

> 例如，您可以重写 TraceListener.Fail 方法以写入事件日志，而不是显示 Assertion Failed 对话框。

在您的情况下，您可能会重用`TraceListener`您今天使用的相同内容（可能-除非您这么说，否则我不知道）来生成故障转储。唯一的区别是您将其添加到[Trace.Listeners](http://msdn.microsoft.com/en-us/library/system.diagnostics.trace.listeners.aspx)而不是[Debug.Listeners](http://msdn.microsoft.com/en-us/library/system.diagnostics.debug.listeners.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T23:24:08.580

在我看来，你有三个选择：

*   将调试版本而不是发布版本部署到您的客户端。如果您希望获得准确的堆栈跟踪，这也是一个更好的选择。这就是调试构建的目的。

*   另一种选择是[代码合同](http://msdn.microsoft.com/en-us/devlabs/dd491992.aspx)。如果不满足合同，默认情况下会引发 RaiseContractFailedEvent。

*   使用 Guard 实用程序而不是开箱即用的 Assert 函数。

# javascript - 屏幕抓取静态内容

> ID：12682443
> 
> 赞同：-1
> 
> 时间：2012-10-01T23:18:30.617
> 
> 标签：javascript, screen-scraping

我在一个网站上有一个计数器，我想使用 Javascript 访问它的值。

我试图引用的代码如下所示：

```
<span id="counter">
0123 // This is the value I'm trying to access
</span> 
```

轻松访问此值的最佳方法是什么？屏幕抓取似乎过于复杂。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:19:45.527

```
var el = document.getElementById('counter'),
    // innerText for IE, textContent for other browsers.
    value = el.textContent || el.innerText || '';
alert(value); 
```

# java - printf %f 带有 4 位小数，最后是符号“%”

> ID：12682447
> 
> 赞同：2
> 
> 时间：2012-10-01T23:18:41.140
> 
> 标签：java

我有一个向量：

```
p[0]=0.40816269
p[1]=0.37576407
p[2]=0.16324950
p[3]=0.05282373 
```

我需要将向量的值打印为 4 位小数的百分比。我试过：

```
for(int i=0; i<p.length;i++)
{
    System.out.printf("Criterion "+i+" has the weigth=%.4f \n" , p[i]*100);
} 
```

这给了我：

```
Criterion 0 has the weigth=40.8163, ..... 
```

但我想打印：

```
Criterion 0 has the weigth=40.8163 %, ..... 
```

我不能在每行的末尾添加符号“%”。如果我尝试：

```
System.out.printf("Criterion "+i+" has the weigth=%.4f %\n" , p[i]*100); 
```

或者：

```
System.out.printf("Criterion "+i+" has the weigth=%.4f "+"%\n" , p[i]*100); 
```

程序抛出异常。先感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T23:22:33.000

你需要逃避`%`with `%%`：

```
System.out.printf("Criterion "+i+" has the weigth=%.4f %%\n" , p[i]*100); 
```

有关更多信息，请参阅[java.util.Formatter 转换规范](http://docs.oracle.com/javase/6/docs/api/java/util/Formatter.html#syntax)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T23:22:39.597

用于`%%`打印百分号：

```
System.out.printf("Criterion "+i+" has the weight=%.4f%%\n" , p[i]*100); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T23:27:00.530

为什么不这样做：

```
System.out.printf("Criterion %d has the weigth=%.4f%%\n", i, p[i]*100) 
```

如果您要使用 printf，请一直使用它：)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T23:21:57.617

`"Criterion "+i+" has the weigth=%.4f %%\n"`只需添加一个`%%`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-01T23:27:23.563

正如其他人所说，但为什么不

```
System.out.printf("Criterion %d has the weight=%.4f%%\n" , i, p[i]*100); 
```

使用 printf 格式化浮点数有点奇怪，但对于 i..

# ios - 与 KVO 相关的 iOS 委托问题

> ID：12682450
> 
> 赞同：0
> 
> 时间：2012-10-01T23:19:04.900
> 
> 标签：ios, facebook, delegates, key-value-observing

我有一个发送请求并有一个委托响应者的方法。该方法由 KVO 响应程序调用。当我从 viewDidLoad 调用它时，代码工作正常，但是当我从 KVO 方法发出请求时，它不会触发委托方法。

这是我的 KVO 响应者：

```
//observe app delegates userdata to check for when user data is available or data is changed
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object
                        change:(NSDictionary *)change
                       context:(void *)context
{
    if ([keyPath isEqualToString:@"userData"] )
    {
        //goto facebook logic
        [self FBFriendSuggester];
    }
} 
```

及其调用的方法：

```
-(void)FBFriendSuggester
{
    NSDictionary * fb_credentials = nil;
    if([prefs objectForKey:@"facebookCredentials"])
    {
        fb_credentials = [prefs objectForKey:@"facebookCredentials"];
        if ([fb_credentials objectForKey:@"expiry"] && [fb_credentials objectForKey:@"fbtoken"]) {
            NSLog(@"found stored Facebook credentials.");
            ApplicationDelegate.facebook.accessToken = [fb_credentials objectForKey:@"fbtoken"];
            ApplicationDelegate.facebook.expirationDate = [fb_credentials objectForKey:@"expiry"];
        }
    }
    if ([ApplicationDelegate.facebook isSessionValid]) {
        printf("_valid facebook\n");
        [ApplicationDelegate.facebook requestWithGraphPath:@"me/friends" andDelegate:self];
    }else
        printf("_invalid facebook\n");
} 
```

和委托方法：

```
- (void)request:(FBRequest *)request didLoad:(id)result{
    NSLog(@"result2:%@",result);

    NSDictionary * rawObject = result;
    NSArray * dataArray = [rawObject objectForKey:@"data"];

    for (NSDictionary * f in dataArray) {
        [friends addObject:[[KNSelectorItem alloc] initWithDisplayValue:[f objectForKey:@"name"]
                                                            selectValue:[f objectForKey:@"id"]
                                                               imageUrl:[NSString stringWithFormat:@"http://graph.facebook.com/%@/picture?type=square", [f objectForKey:@"id"]]]];
    }
    [friends sortUsingSelector:@selector(compareByDisplayValue:)];
    [self pickerPopup:self];
} 
```

在这种情况下不会调用委托方法，但是当我直接从控制器调用 -(void)FBFriendSuggester 时它确实可以正常工作。我不知道该怎么做，我尝试设置一个通知来响应，希望它会触发委托，但这也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-19T20:05:33.190

我知道这已经很老了，但要说明发生这种情况的原因，KVO 通知会在发生更改的线程上发送。因此，如果后台线程对 AppDelegate 上的属性进行更改，则通知更改也会发生在后台线程上。

因此，在您的代码上下文中，您`-(void)FBFriendSuggester`很可能在后台线程中被调用。您可以通过在代码中设置断点并查看 Debug Navigator 来确认这一点。

我将继续假设这是真的（它在后台线程中运行）。

This call, `[ApplicationDelegate.facebook requestWithGraphPath:@"me/friends" andDelegate:self];` most likely needs to occur on the main thread. Reason for this is probably the underlying calls are using an `NSURLConnection` to make the call. The connections are made on background threads, but all delegate calls MUST be made back on the main thread, NOT a background thread. With the call `andDelegate:self`, its registering the object as a delegate on the background thread, instead of the main thread.

This is why your current solution fixes that issue.

Happy Coding!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T23:44:02.467

我能够通过发出以下命令来解决我的问题：

```
[self performSelectorOnMainThread:@selector(FBFriendSuggester) withObject:nil waitUntilDone:NO]; 
```

很高兴知道为什么会这样。

# javascript - 如何更改谷歌地图中的标记图像？

> ID：12682453
> 
> 赞同：0
> 
> 时间：2012-10-01T23:19:12.393
> 
> 标签：javascript, google-maps

我想通过以下代码更改谷歌地图中的标记图像，但它不起作用

```
remap.gMap(
{ 
  markers: [<?php echo $markers;?>],
  latitude:document.getElementById('searchlatitude').value,
  longitude:document.getElementById('searchlongitude').value,
  zoom:10 ,
  panControl:true,
  icon: "http://www.google.com/intl/en_us/mapfiles/ms/micons/blue-dot.png"
}
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T23:25:21.407

```
function initialize() {
  var myLatlng = new google.maps.LatLng(document.getElementById('searchlatitude').value,document.getElementById('searchlongitude').value);
  var mapOptions = {
    zoom: 10,
    center: myLatlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

  var image = 'http://www.google.com/intl/en_us/mapfiles/ms/micons/blue-dot.png';
  var myLatLng = new google.maps.LatLng(-33.890542, 151.274856);
  var beachMarker = new google.maps.Marker({
      position: myLatLng,
      map: map,
      icon: image
  });
} 
```

[https://developers.google.com/maps/documentation/javascript/overlays?hl=en-US#SimpleIcons](https://developers.google.com/maps/documentation/javascript/overlays?hl=en-US#SimpleIcons)

# jquery - 仅限 Chrome 和 IE 中的 JSON 错误：未捕获的语法错误：意外的令牌

> ID：12682457
> 
> 赞同：0
> 
> 时间：2012-10-01T23:19:27.487
> 
> 标签：jquery, ajax, json, internet-explorer, google-chrome

我正在尝试通过 ajax 获取一些数据，但由于某种原因，它仅在 Chrome 和 IE 的控制台中出现错误。它在 Firefox 中运行良好。

这是我的代码：

**PHP**

```
function get_data() {
     $data = array( 'value' => '50', 'type' => 'box' );
     echo json_encode($data);
     exit;
} 
```

**JS**

```
$(".click").click(function() {
     var data = {
      action: "get_data"
     };

     $.post( "http://domain.com/", data, function(response) {
          var newResponse = $.parseJSON(response);
          console.log(newResponse);
     }); 
}); 
```

因此，此代码在 Firefox 中运行良好，但由于某种原因，它在 Chrome 和 IE 中无法运行……在 Chrome 中，它甚至在出错之前都无法访问 console.log 函数。

感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:46:05.840

我想它应该在没有 .parseJSON 的情况下工作。就像这样，至少它对我有用：

```
$.ajax({
    url: "url...",
    type: "post",
    data: data,
    success: function (data) {
        if (data.Result) {
            data.value1;
            data.value2;
        } else {
            // do something else
        }
    }
}); 
```

数据只是我的类型，例如 { value1:'123', value2: '345', Result: true}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T23:22:08.507

您使用的是哪个版本的 jQuery？旧版本对返回的 JSON 文件中的空格不太宽容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T14:02:54.563

好的，经过数小时试图找出问题所在，我终于发现ajax url上的某种重定向存在问题。不确定该重定向是如何到达那里的，但是一旦我将其删除，一切就开始起作用了。顺便说一句，它没有影响 Firefox 只是因为我登录了该站点。我猜重定向有某种检查是否有人登录，不要重定向 ajax url。

但无论如何，我只想分享一下，以防其他人遇到与我相同的问题，代码正确但仍然无法正常工作。

我想提一下非常感谢 Felix 竭尽全力帮助我。

# css - 我的跨度有什么问题

> ID：12682458
> 
> 赞同：0
> 
> 时间：2012-10-01T23:19:38.893
> 
> 标签：css, twitter-bootstrap, thumbnails, html

嗨我想在我的图片按钮上有一个缩略图，但它超出了我这里的整个范围是我的代码这里是整个代码[http://jsfiddle.net/dP4eL/](http://jsfiddle.net/dP4eL/) 我正在使用 twitter bootstrap

```
<div class="tab-content">
    <div class="tab-pane fade in active" id="home"><div class="container">
        <div class="row">
            <ul class="thumbnails">
                <li class="span4">
                  <div class="thumbnail">
                    <img src="Hydrangeas.jpg" alt="product 1">
                    <div class="caption">
                        <h5>Product detail</h5>
                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore       magna aliqua.</p>
                        <br>
                        <div class="span1">
                            <div class="thumbnail"><img src="Hydrangeas.jpg" alt="image">
                                <a href="#" class="btn btn-warning">fav</a>
                            </div>
                        </br>
                    </div>
                </p>
            </div>
        </div>
    </li> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T23:28:12.700

很难从那里的有限代码中分辨出来，但是如果您希望 div 切断额外的内容，您可以为其设置宽度和高度，并将其溢出设置为隐藏，如下所示：

```
.span1 {
    width: 100px;
    height: 100px;
    overflow:hidden;
} 
```

只需将宽度和高度更改为您的规格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T06:59:01.330

您的问题是该类`span`具有属性`float: left`。Float 从文档的浮动中移除元素。

```
[class*="span"] {
    float: left;
} 
```

您的 .. css 声明中有此 css 的多个实例。在我看来，你有两个选择。

`float: left`从所有实例中删除，或将[clearfix css 类应用于您的元素](https://stackoverflow.com/questions/8554043/what-actually-is-clearfix)。这将确保您的 div 保留在文档流中，并且您的父 div 扩展以包含它。

我会为你创建一个演示，但是你的 js fiddle 中有太多的 css，以至于 js fiddle 无法以合理的速度解析它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T07:17:19.257

删除您的 float:left 跨度设置。如果您对此不满意，请尝试使用表：D

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T11:53:20.060

您的问题有点难以理解-我想您确实希望那个小“图像/收藏按钮”-Box 保留在其父 div 中？！

Bootstrap 应该以正确的方式使用浮动，因此，尝试**添加**到您的 .thumbnail-class：

```
.thumbnail { overflow: hidden; } 
```

如果那是你想要达到的。

# jquery - 使用下拉文档覆盖冲突定位固定标题

> ID：12682459
> 
> 赞同：0
> 
> 时间：2012-10-01T23:19:39.630
> 
> 标签：jquery, css, css-position

我已经建立了一个带有固定在设计顶部的标题的站点，因此它始终存在于整个站点中。问题是我必须使头部和停靠的容器足够高以适应放置状态。这几乎可以正常工作，但是由于标题/停靠栏覆盖，现在某些页面无法点击...这是一个 CSS 问题，也是标题/文档的构建方式。我不确定是否有另一种方法可以做到这一点。如果有人想提出想法或解决方案，那就太好了。

容器上隐藏了溢出，因此当处于放置状态时，所有视频的播放都会被切断。在萤火虫中玩耍，你会看到我的困境。

这是实际的 JS，但无法正常工作，因为在多次尝试后我无法将扩展坞移回..

```
$('#play-the-series').click(function(){
            $('#main-nav #content').animate({
                    top: '0'
                }, 1000, 'jswing');
        }); 
```

这是该网站的链接：[http ://www.districtdesigngroup.com/basho/](http://www.districtdesigngroup.com/basho/)

这是一个艰难的过程，所以我推荐任何想要尝试的人。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:34:43.173

基本上你会想用 CSS 使#main-nav 元素只有 195px 的高度，然后在内部元素的顶部设置 +200px 的动画，你也应该将 #main-nav 的高度扩大到 200px。折叠标题时执行相反的操作。

试试这个代码：

```
$('#play-the-series').click(function(){
  // check for a "open" class on the main-nav
  if (!$("#main-nav").hasClass('open')) {

    // your animation
    $('#main-nav #content').animate({
      top: 0
    }, 1000, 'jswing');

    // container animation
    $('#main-nav').animate({
      height: 395
    }, 1000, 'jswing');

    // add class to main-nav
    $("#main-nav").addClass('open');

  } else {

    //reverse everything:

    $('#main-nav #content').animate({
      top: -200
    }, 1000, 'jswing');
    $(this).addClass('open');

    $('#main-nav').animate({
      height: 195
    }, 1000, 'jswing');

    $("#main-nav").removeClass('open');
  }
}); 
```

或者，您可以在#main-nav 元素中使用绝对定位，但是您必须对标记进行更改并进行大量其他新的 CSS 编辑

# ios - 在现有的txt文件上添加字符串-iOS

> ID：12682468
> 
> 赞同：1
> 
> 时间：2012-10-01T23:21:17.010
> 
> 标签：ios, nsdocument

如下所示的代码，它正在输出几个单独的 .txt 文件。但是，我正在寻找一种将所有内容保存到一个 txt 文件中的方法。如何在保存的 txt 文件末尾附加新字符串？

```
-(void)saveData:(NSString *)data
{

    NSArray *paths=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentDirectory=[paths objectAtIndex:0];
    NSString *fileName=[NSString stringWithFormat:@"%@/%d.txt",documentDirectory,fileInt];
    NSString *content=data;
    [content writeToFile:fileName atomically:NO encoding:NSStringEncodingConversionAllowLossy error:nil];
    NSLog(@"%@",fileName);
    fileInt++;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T23:41:42.977

好的，我想我明白了。

```
-(void)saveData:(NSString*)data
{
    NSArray *paths=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentDirectory=[paths objectAtIndex:0];
        NSString *fileName=[NSString stringWithFormat:@"%@/%d.txt",documentDirectory,1];
        NSString *content=data;
        NSFileHandle *fileHandler= [NSFileHandle fileHandleForWritingAtPath:fileName];
        [fileHandler seekToEndOfFile];
        [fileHandler writeData:[content dataUsingEncoding:NSUTF8StringEncoding]];
        [fileHandler closeFile];
        NSLog(@"%@",fileName);
} 
```

# ruby-on-rails - Application.js.coffee rails

> ID：12682471
> 
> 赞同：0
> 
> 时间：2012-10-01T23:21:25.120
> 
> 标签：ruby-on-rails, ruby, coffeescript

我正在尝试从 jQuery 进行自动完成，但是我拥有的代码在 CoffeeScript 中。我不确定如何在我的本地主机服务器上运行它。

起初我将它放在 application.js 中，但那不起作用，所以我创建了 gens.js.coffee 并将代码放在那里，但仍然没有显示。

这是代码：

```
jQuery ->
  $('#querysearch').autocomplete
    source: ['foo', 'food', 'four'] 
```

这里 application.js 正在调用该文件：

```
//= require gens
//= require jQuery.ui.datepicker
# file his actually gens.js.coffee 
```

这就是我调用 application.js 的方式：

```
<%= javascript_include_tag "application" %> 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T01:37:31.610

首先，我会确保我的 Gemfile 中有 CoffeeScript 和 jQuery UI gem。

```
group :assets do
  gem 'coffee-rails'
  gem 'jquery-ui-rails'
end 
```

然后我会确保我正确地需要这些资产。我认为你在这里犯了错误

1.  `Q`通过在 jquery 中大写。
2.  通过要求 datepicker 然后尝试调用自动完成
3.  通过在您的“gens”文件之后要求您的 jQuery UI 库。

它应该看起来像这样

```
//= require jquery.ui.autocomplete
//= require gens 
```

如果您愿意，您可以将 JS 代码（不是 CoffeeScript）直接放入`application.js`文件中，或者在您的`gens.js.coffee`文件中应该没问题。

您也可以尝试运行您的服务器并访问`http://localhost:3000/assets/application.js`. 你可以看看那里的JS，看看它是否正确。

我还会尝试在 Chrome 浏览器中打开开发工具并查找 JavaScript 错误。

# matrix - WebGL 片段着色器是否支持 outerProduct？

> ID：12682475
> 
> 赞同：1
> 
> 时间：2012-10-01T23:21:58.300
> 
> 标签：matrix, opengl-es-2.0, webgl, fragment-shader

在 Chrome 22 和 Firefox 15 中编译此 WebGL 片段着色器时：

```
precision mediump float;
uniform vec2 u_resolution;
uniform sampler2D u_tex;
void main() {
    vec2 texCoord = gl_FragCoord.xy / u_resolution;
    vec4 floatColor = texture2D(u_tex, texCoord);
    mat3 outerMat = outerProduct(floatColor.rgb,floatColor.rgb);
    gl_FragColor = vec4(outerMat[0], 1);  
} 
```

我收到此错误：

```
ERROR: 0:8: 'outerProduct' : no matching overloaded function found
ERROR: 0:8: '=' :  cannot convert from 'const mediump float' to '3X3 matrix of float' 
```

OpenGL ES 2.0 GLSL 规范表示`mat3 outerProduct(vec3,vec3)`支持，WebGL 规范表示它接受 ES 着色器，所以我不确定出了什么问题。WebGL 片段着色器不支持 outerProduct，还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T02:21:57.950

OpenGL ES 2.0 GLSL中没有`outerProduct`函数。你在哪里读到的？（或者我错过了它？）

这是规范 [http://www.khronos.org/registry/gles/specs/2.0/GLSL_ES_Specification_1.0.17.pdf](http://www.khronos.org/registry/gles/specs/2.0/GLSL_ES_Specification_1.0.17.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T22:52:31.570

尝试`mat3 outerMat = outerProduct(vec3(floatColor.rgb),vec3(floatColor.rgb));`

为了扩展，也许给它一个显式类型比使用 .rgb 更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-30T19:50:14.213

它现在可用于 webGL2。在此处检查您的系统：[https ://webglreport.com/?v=2](https://webglreport.com/?v=2)

# mongodb - Cloudfoundry 服务列表未显示 Mongo 2.0

> ID：12682478
> 
> 赞同：0
> 
> 时间：2012-10-01T23:22:29.097
> 
> 标签：mongodb, cloud-foundry

在我的部署配置目录中，我看到了两个版本的 MongoDB（1.8 和 2.0）。但是，当我跑步时

> 虚拟机服务

从我的客户那里，只有 1.8 出现（大概是因为它是默认的）。我尝试更改 mongodb_gateway.yml（和 node.yml）中的默认值，但重新启动后列表未更改。

知道如何让 Mongo 2.0 显示为可配置服务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:04:18.720

如果我从 mongodb_node.yml 和 mongodb_gateway.yml 文件中删除 1.8，然后重新启动 cloud Foundry，就会出现 2.0（和 1.8）。问题是没有办法区分这两者，所以它似乎使用您在 yml 文件中设置的默认版本。无论如何，它现在出现了。

# iphone - 如何通过按钮退出应用程序？

> ID：12682481
> 
> 赞同：0
> 
> 时间：2012-10-01T23:23:02.827
> 
> 标签：iphone, ios, xcode

我想提供一个退出按钮。有很多解决方案，但不是一个合适的。请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T23:25:03.823

从用户体验的角度来看，最好让用户通过按下主页按钮退出，而不是提供关闭按钮。

来自[iOS HIG](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/UEBestPractices/UEBestPractices.html#//apple_ref/doc/uid/TP40006556-CH20-SW27)：

> ### 不要以编程方式退出
> 
> 永远不要以编程方式退出 iOS 应用程序，因为人们倾向于将其解释为崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T23:28:26.197

```
-(IBAction) buttonPressed {
    exit(1);
} 
```

再见

请不要这样做！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T02:16:57.937

你不应该这样做。iOS 禁止它。

# qt - 下载 Qt 4.8.3

> ID：12682485
> 
> 赞同：0
> 
> 时间：2012-10-01T23:23:51.033
> 
> 标签：qt, download

我已经好几个月没有使用 Qt 了。但是现在当我想下载最新版本时，我在Qt项目网站上找不到最新版本的下载，只有4.8.1版本的Qt SDK，但在商业版网站上有4.8.3。

那么我在哪里可以下载带有 Qt 4.8.3 for linux (ubuntu) 的 Qt SDK？请

* * *

我已经用 apt-get i 安装了 SQK，我下载了 Qt 4.8.3。我现在需要的是使用 MySQL 插件编译它的指令。下载中有一个文件指向旧的 qt.nokia.com 网站，所以我找不到这些说明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T23:29:26.393

[http://qt-project.org/downloads](http://qt-project.org/downloads)

试试这个链接它可能会工作

链接中还给出了有关 4.8.3 的详细信息。我正在使用 Qt 创建器，它对我来说工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T23:53:53.567

Qt 4.6.3 和 Qt 4.7.3 开发注意事项 Qt SDK 1.2 仅包含用于为 Symbian 平台开发应用程序的最新目标。如果您希望使用适用于 Symbian 的 Qt 4.6.3 或适用于 Symbian^3 和 Symbian Anna 的 Qt 4.7.3，请使用 Qt SDK 1.1.2。安装 Qt SDK 1.1.2 后，要启用早期目标和 App TRK，请不要运行 SDK 更新，因为这会删除您需要的功能。

请注意，如果您想在同一台计算机上使用 Qt SDK 1.1.2 和 Qt SDK 1.2.1，您应该将它们安装到不同的用户帐户中。

Qt SDK 1.1.2 可以在这里找到。

这是网站上提到的。我认为 Qt SDK 没有这样的版本

# heroku - Heroku - 升级到“开发”计划后如何访问共享数据库

> ID：12682488
> 
> 赞同：0
> 
> 时间：2012-10-01T23:24:08.330
> 
> 标签：heroku

我的 Heroku 应用程序已将其共享数据库自动升级到开发计划。然后我想将开发计划升级到每月 9 美元的计划。我这样做了，并认为它只会让我有更多的行，我删除了旧的免费“开发”插件。现在我想我已经删除了数据库。

我没有备份，所以我认为我唯一的选择是将数据从旧的共享数据库中取出。从 shared 升级到 dev 的说明假设您已经在 shared 上 - 但我不是。有没有办法从共享数据库重新升级到开发数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T02:19:39.277

我最终联系了 support(at)heroku.com。

他们修复了它并承认升级体验令人困惑 - 所以在尝试升级您的计划时要小心......

# macos - 从 OSX 命令行访问（forge 环境）的问题

> ID：12682489
> 
> 赞同：6
> 
> 时间：2012-10-01T23:24:15.790
> 
> 标签：macos, command-line, trigger.io, forge

我正在关注[Trigger.io Forge 教程](http://docs.trigger.io/en/v1.4/getting-started.html#getting-started-with-the-command-line-tools)，但无法从 OSX 10.8 上的命令行正常工作。

使用终端和 Forge 教程，我转到 forge-workspace 文件夹并将其输入到终端中：

```
$HOME/Library/Trigger\ Toolkit/forge create 
```

把这个拿回来：

```
Matts-MacBook-Pro:forge-workspace mattm$ $HOME/Library/Trigger\ Toolkit/forge create
[   INFO] Forge tools running at version 3.3.17
[   INFO] Update result: you already have the latest tools

This name is what your application will be called on devices. You can change it later     through config.json.
App Name: Weather App
[   INFO] Registering new app "Weather App" with trigger.io...
[   INFO] Fetching initial project template
[   INFO] Building app for the first time...
[   INFO] Update result: you already have the latest tools
[   INFO] App structure created. To proceed:
[   INFO] 1) Put your code in the "src" folder
[   INFO] 2) Run forge build to make a build
[   INFO] 3) Run forge run to test out your build
Matts-MacBook-Pro:forge-workspace mattm$ 
```

教程说：

> 此时，您应该打开一个命令终端，如下所示：
> 
> ```
> (forge-environment) 
> ```

但这并没有出现。另外，当我查看我的库目录（并进行系统范围的搜索）时，我没有看到任何标记为 Trigger 的文件夹。

当我尝试按照教程指导并执行诸如使用 forge create 命令之类的操作时，什么也没有发生：

```
Matts-MacBook-Pro:hello-world mattm$ forge create</p>
-bash: forge: command not found

Matts-MacBook-Pro:hello-world mattm$ $forge create</p>
-bash: create: command not found 
```

在你问之前，是的，我安装了 Python，并且能够使用 Forge 浏览器界面构建和运行应用程序。

知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-07T00:03:16.513

在 Mac OS X 上，将以下内容添加到您的 bash 配置文件中

```
export PATH=$PATH:/Applications/TriggerToolkit.app/Contents/MacOS/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T01:29:25.120

我已将更新推送到入门文档以澄清这一点： http: [//docs.trigger.io/en/v1.4/getting-started.html#getting-started-with-the-command-line-tools](http://docs.trigger.io/en/v1.4/getting-started.html#getting-started-with-the-command-line-tools)

不再需要寻找“（伪造环境）”。如果您将 forge 可执行文件的路径添加到您的 PATH 中，那么您将能够按照您的尝试运行这些命令。

# google-drive-api - Google Drive SDK 修订历史 下载 Buggy

> ID：12682491
> 
> 赞同：2
> 
> 时间：2012-10-01T23:24:39.003
> 
> 标签：google-drive-api

Google 云端硬盘修订历史下载中是否存在错误？当我检索修订历史列表并尝试通过下载 URL 下载时，请求经常挂起并超时。

有些文件就像一个魅力，而其他文件只是挂起，除了最新版本。

此外，如果您进入 drive.google.com 并尝试通过 Google Drive 界面下载相同的修订版，我也会遇到同样的问题。Chrome 说“开始下载”，但从不下载任何东西。

这是否与未固定并因此被清除的修订有关？如果是这种情况，这是否意味着您只能检索固定的修订？所有的修订似乎都没有被固定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:07:35.217

通过与 Google 开发人员交谈，这看起来像是 Google 方面的一个错误。这周应该修好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:13:49.790

如果您重试下载，是否有效？

许多 Drive API 调用因各种 5xx 错误而失败，这些错误通常在指数退避和重试后成功。

# java - dspace 导入元数据确认更改不适用

> ID：12682492
> 
> 赞同：1
> 
> 时间：2012-10-01T23:24:49.330
> 
> 标签：java, postgresql, tomcat, dspace

每当我尝试将元数据导入我的 DSpace 存储库时，就像我以前一直这样做的方式一样，会发生一些奇怪的事情。

首先，DSpace 允许我上传格式正确的 CSV 文件，然后它实际上向我显示了检测到的更改（“待审核的更改列在下面以供审核”）并要求我对其进行审核。

最后，当我接受更改时，我收到一条消息，告诉我“未检测到更改”。

有人可以解释一下吗？

我尝试过的事情没有成功：

*   重新启动 Tomcat 服务器
*   尝试上传不同的 CSV 文件
*   使用不同的用户

非常感谢

**2012 年 3 月 10 日更新**

我已经尝试了命令行导入工具，现在我收到了这个错误：

```
java.sql.SQLException: Collection 105 has no default item READ policies
    at org.dspace.content.Item.inheritCollectionDefaultPolicies(Item.java:2189)
    at org.dspace.content.InstallItem.finishItem(InstallItem.java:220)
    at org.dspace.content.InstallItem.installItem(InstallItem.java:83)
    at org.dspace.content.InstallItem.installItem(InstallItem.java:42)
    at org.dspace.app.bulkedit.MetadataImport.runImport(MetadataImport.java:239)
    at org.dspace.app.bulkedit.MetadataImport.main(MetadataImport.java:1060)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597) 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T23:44:07.200

好吧，最后一次更新让我用谷歌搜索了这个错误，它很快指出了我：[http](http://dspace.2283337.n4.nabble.com/Dspace-tech-Internal-System-Error-after-granting-licence-td3288317.html) ://dspace.2283337.n4.nabble.com/Dspace-tech-Internal-System-Error-after-granting-licence-td3288317.html . 然后它只是检查集合的权限，我意识到 DEFAULT_BITSTREAM_READ 设置了两次，给人的印象是 DEFAULT_ITEM_READ 也被启用了。将 DEFAULT_ITEM_READ 权限授予“管理员”组后，该问题已修复。

# javascript - 管理点击网格

> ID：12682493
> 
> 赞同：0
> 
> 时间：2012-10-01T23:24:49.737
> 
> 标签：javascript, three.js

我正在尝试管理单击网格（立方体）以进行一些处理。

```
 var cubeFor3D = new THREE.Mesh(new THREE.CubeGeometry(40,80,40),img3D);

    scene.add(cubeFor3D);
    //
    renderer.render(scene,camera);
    //
    animate();
         //Track the click on cube3d
    cubeFor3D.on('click', function(){

          // response to click...
          console.log('you have clicked on cube 2D');

 }); 
```

运行时，我在 Web 控制台上收到此错误：

```
TypeError: cubeFor3D.on is not a function 
```

在 API 文档中，它显示为这样：

```
mesh.on('click',.. 
```

但我想我应该用`mesh`我的网状真实姓名替换。看来我错了。请帮忙。

我在我的文件中包含 API JS：`<script src='threex.domevent.js'></script>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:59:35.823

迟到的答案，但是，如果您将其添加到 init 函数的乞求中，它应该可以工作：

三.Object3D._threexDomEvent.camera(camera);

事实上，我通常会直接在 scene = new THREE.Scene();

# php - 插入查询并期望多个结果？

> ID：12682494
> 
> 赞同：-1
> 
> 时间：2012-10-01T23:25:02.997
> 
> 标签：php, sql, insert, mysqli

我有一个 mysqli 函数，它在表中插入一行。我要找回错误

```
Warning: mysqli_stmt::bind_result(): Number of bind variables doesn't match number of 
fields in prepared statement 
```

这对我来说很奇怪，因为我认为 insert nto 返回真或假。这是使用 sql 语句的函数。

```
function add_project_deadline ($mysqli, $project_id, $deadline) {

if ($stmt = $mysqli->prepare("INSERT INTO `project_deadline` (project_id, deadline) 
    VALUES (?, ?)")){
    $stmt->bind_param('is', $project_id, $deadline);
    $stmt->execute();
    $stmt->bind_result($return);
    $stmt->close();
    return $return;
} else {return false;}  

} 
```

我的问题是为什么我会收到此 bind_result 错误以及如何修复它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:48:25.340

由于您正在执行一个`INSERT`没有任何结果的查询，因此您不需要或使用它`bind_result`来获取数据。 `bind_result`用于绑定到 SELECT 语句中使用的列。

`mysqli_stmt::execute()`返回`true`成功或`false`失败，因此只需将其值分配给您的`$return`变量。

如果`execute()`返回 false，则`INSERT`语句由于某种原因失败。如果返回`true`，则表示成功，您可以通过查看语句对象`INSERT`的属性来确定插入的行数。`mysqli_stmt::$affected_rows`

这就是您收到该错误的原因，希望对您有所帮助。您可以在 的手册页上找到大部分此类信息[`mysqli_stmt::execute()`](http://www.php.net/manual/en/mysqli-stmt.execute.php)。

# javascript - JavaScript - 如何创建变量名

> ID：12682497
> 
> 赞同：1
> 
> 时间：2012-10-01T23:25:10.047
> 
> 标签：javascript, variables

> **可能重复：**
> [Javascript 动态变量名](https://stackoverflow.com/questions/5117127/javascript-dynamic-variable-name)

我将变量从 onClick 事件传递到 JavaScript 函数。总共有四个变量：两个告诉方向，两个告诉速度变化。我希望该函数评估选择了哪个方向（`h_`或`v_`，对于水平和垂直），然后应用必要的速度（更快或更慢）。

现在，我通过首先评估方向并`changeSpeed`根据选择的方向调用不同的函数来成功地做到这一点。

我想做的是结合这些功能。在示例中，`$(direction + "speed")`意味着成为`h_speed`or `v_speed`。

JavaScript 有能力做到这一点吗？（真诚的，米格尔）

```
var h_speed = 10;
var v_speed = 10;

function changeSpeed(speed, direction){
var direction = direction;
    switch (speed)
    {
        case 'slower':
                        $($direction + "speed") = $($direction + "speed")*2;
                        break;
        case 'faster':
                        $($direction + "speed") = $($direction + "speed")/2;
                        break;
    }
} 
```

**这是我的工作代码的两个版本：**

# 版本 1

```
var h_speed = 10;
var v_speed = 10;

function identifyDirection(speed, direction){
    switch (direction)
    {
        case 'vertical':
                        v_changeSpeed(speed);
                        break;
        case 'horizontal':
                        h_changeSpeed(speed);
                        break;
    }
}

function h_changeSpeed(speed){
    switch (speed)
    {
        case 'slower':
                    h_speed = h_speed*2;
                    break;
        case 'faster':
                    h_speed = h_speed/2;
                    break;
    }
}

function v_changeSpeed(speed){
    switch (speed)
{
        case 'slower':
                    v_speed = v_speed*2;
                    break;
        case 'faster':
                    v_speed = v_speed/2;
                    break;
    }
} 
```

# 版本 2

```
/**
 * the changeSpeed functions' arguments
 * are placed directly in the function that
 * determines whether horizontal or vertical
 * speed is changing.
 *
 */

function changeSpeed(speed, direction){
    switch (direction)
{
    case 'vertical':
        switch (speed)
        {
            case 'slower':
                v_speed = v_speed*2;
                break;
            case 'faster':
                v_speed = v_speed/2;
                break;
        }
        break;
    case 'horizontal':
        switch (speed)
        {
            case 'slower':
                h_speed = h_speed*2;
                break;
            case 'faster':
                h_speed = h_speed/2;
                break;
        }
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:44:30.713

当然有更好的方法来做你想做的事情，但是如果你想拥有同样的东西（注意你不应该使用全局变量，你可以使用函数作用域将它们设为私有，但这是另一个话题）。

```
var speed = {
  h: 10,
  v: 10
};

function changeSpeed(speedChange, direction) {
  switch (speedChange) {
    case 'slower':
      speed[direction] *= 2;      
      break;
    case 'faster':
      speed[direction] /= 2;      
      break;
  }
} 
```

现在你可以通过调用来改变速度，例如：

```
changeSpeed("slower", "h"); 
```

并通过 speed.h 或 speed.v 访问该速度

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T23:34:36.040

变量是变量对象的属性。您可以按名称访问的唯一变量对象是全局变量对象（`this`在全局上下文或`window`浏览器中）。因此，对于全局变量，您可以这样做：

```
function hSpeed() {...}

function vSpeed(){...}

// Set direction
var direction = 'h';

// Call related function
window[direction + 'Speed'](); 
```

但是，您不能在函数执行上下文中这样做（因为 ECMA-262 明确拒绝访问函数执行和变量对象），您需要使“变量”成为您以相同方式访问的对象的属性（即使用方括号表示法）：

```
var lib = {};
var lib.hSpeed = function(){...};
var lib.vSpeed = function(){...};

// Set direction
var direction = 'h';

// Call related function
lib[direction + 'Speed'](); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T23:35:57.997

将 2 个变量放在一个对象中，例如：

```
var directions = {
  horizontal: 1,
  vertical: 1
} 
```

然后你就可以从参数中取出方向并匹配对象的子对象：

```
function changeSpeed(speed, direction) {
  //operate on diections[direction]
} 
```

至于改变速度，你可以用对象中的函数做类似的事情，但在你的情况下，我只是建议使用另一种数据结构，因为逻辑不会改变，只有参数：

```
var speedFactor = {
  faster: 2,
  slower: .5
} 
```

那么你就可以做所有事情：

```
function changeSpeed(speed, direction) {
  directions[direction] = directions[direction] * speedFactor[speed]
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T23:38:29.027

好的...

棘手但：

```
//Global namespace
var speeds = {};
speeds['h_speed'] = 10;
speeds['v_speed'] = 10;

function changeSpeed(speed, direction){
  var dir = direction.substring(0,1);
  var sp = (speed === 'slower') ? 0.5 : 2;
  //Still accessible from inside your function
  speeds[dir + '_speed'] = speeds[dir + '_speed'] * sp;
} 
```

会做这项工作。

# ruby-on-rails - 如果我先放置表单，则路由问题

> ID：12682504
> 
> 赞同：0
> 
> 时间：2012-10-01T23:26:00.360
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我遵循 michale hartl 的 rails 教程，然后我想扩展它，所以我尝试集成 thumbs_up gem。我能够为帖子和评论投票，我感到非常自豪。但后来我想在我的 UI 上做一点工作。我不喜欢所有用于添加新评论的表格都位于帖子所附评论的提要下方。所以我认为我所要做的就是改变我的部分的顺序

由此

```
<%= render partial: 'comments/comment', collection: my_item.comments, as: :comment %>
<%= render :partial => "comments/form", :locals => { :cur_post => my_item } %> 
```

对此

```
<%= render :partial => "comments/form", :locals => { :cur_post => my_item } %>
<%= render partial: 'comments/comment', collection: my_item.comments, as: :comment %> 
```

它会起作用的。但遗憾的是，情况并非如此。当我重新排序它们时，我得到了这个错误。

```
No route matches {:action=>"vote_up", :controller=>"comments", :id=>#<Comment id: nil, content: nil, user_id: nil, post_id: 14, created_at: nil, updated_at: nil>} 
```

我可以删除任何一个部分，一切都会正常工作，所以我不确定为什么评论上方的表格会导致错误。

这是一个[要点的链接](https://gist.github.com/a5f658a2b4f1854ef2f0)

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:34:49.030

我相信这个问题来自这条线

```
<%= form_for([cur_post, cur_post.comments.build]) do |f| %> 
```

当这首先发生时，它会在 cur_post.comments 上构建一个新的评论。现在出现问题，当您渲染“评论/评论”时，新构建的评论没有保存。当您将模型传递给这样的 url 助手时，Rails 期望：

```
vote_up_comment_path(comment) 
```

该对象在数据库中（AFAIK）

您应该能够通过不构建到`comments`关联中来解决此问题

```
<%= form_for([cur_post, Comment.new]) do |f| %> 
```

否则，在您的评论/评论中，您可以检查是否`comment.new_record?`属实并进行相应处理。

# jquery - 像在 Facebook 上一样创建一个漂亮的图表

> ID：12682505
> 
> 赞同：-1
> 
> 时间：2012-10-01T23:26:00.767
> 
> 标签：jquery, html, web-applications, charts

在 Facebook Insights 页面上，他们有漂亮的图表和漂亮的颜色/样式。

有没有可以匹配类似风格的脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T23:27:18.617

试试这个 [https://developers.google.com/chart/](https://developers.google.com/chart/)

# c# - 如何在 C# 中调整 Windows 窗体窗体的大小？

> ID：12682506
> 
> 赞同：4
> 
> 时间：2012-10-01T23:26:10.440
> 
> 标签：c#, winforms, resize, window-resize

我正在制作一个 Windows 窗体应用程序。我希望在按下按钮后表单高度增加。我该怎么做呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T23:29:11.497

使用[`Height`属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.height.aspx)。例如：

```
this.Height = newHeight; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T00:29:18.200

您可以在按钮单击时将表单高度值增加指定的数量：

```
private void button1_Click(object sender, EventArgs e)
{
    int amountToIncrease = 10;
    this.Height += amountToIncrease;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T23:30:16.783

```
this.Size = new Size(175, 125); 
```

或者

```
this.ClientSize = new Size(175, 125); 
```

来自 MSDN：表单客户区的大小是不包括边框和标题栏的表单大小。

[http://msdn.microsoft.com/en-us/library/9278sfx2(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/9278sfx2(v=vs.80).aspx)

# java - 如何在 Java 中检查 2 个句子之间的删除词

> ID：12682510
> 
> 赞同：0
> 
> 时间：2012-10-01T23:26:20.187
> 
> 标签：java, string, compare

如果要检查从句子 B 中的句子 A 中删除的单词，Java 中的最佳方法是什么。例如：

> 句子A：我想删除这个简单句子上不必要的单词。
> 
> 句子 B：我想删除这句话上的单词。
> 
> 输出：我想删除这个（简单）句子中的（不必要的）单词。

其中括号内的单词是从句子 A 中删除的单词。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T23:32:10.903

假设顺序无关紧要：使用公共集合。

1.  用于`String.split()`将两个句子拆分为单词数组。
2.  使用 commons-collections'`CollectionUtils.addAll`将每个数组添加到一个空的`Set`.
3.  使用 commons-collections 的`CollectionUtils.subtract`方法获取 AB。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T23:34:44.487

假设顺序和位置很重要，这看起来像是最长公共子序列问题的一种变体，一种动态规划解决方案。

wikipedia 有一个关于这个主题的很棒的页面，我在这里要概述的实在太多了

[http://en.wikipedia.org/wiki/Longest_common_subsequence_problem](http://en.wikipedia.org/wiki/Longest_common_subsequence_problem)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T00:09:01.337

```
String a = "I want to delete unnecessary words on this simple sentence.";
String b = "I want to delete words on this sentence.";

String[] aWords = a.split(" ");
String[] bWords = b.split(" ");
List<String> missingWords = new ArrayList<String> ();

int x = 0;
for(int i = 0 ; i < aWords.length; i++) {
  String aWord = aWords[i];
  if(x < bWords.length) {
    String bWord = bWords[x];
    if(aWord.equals(bWord)) {
        x++;
    } else {
        missingWords.add(aWord);
    }
   } else {
      missingWords.add(aWord);
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T23:52:59.443

其他人都在使用重量级算法来解决实际上非常简单的问题。它可以使用最长公共子序列来解决，但它是一个非常受限的版本。这不是一个完整的差异；它只包括删除。不需要动态编程或类似的东西。这是一个 20 行的实现：

```
private static String deletedWords(String s1, String s2) {
    StringBuilder sb = new StringBuilder();
    String[] words1 = s1.split("\\s+");
    String[] words2 = s2.split("\\s+");
    int i1, i2;
    i1 = i2 = 0;
    while (i1 < words1.length) {
        if (words1[i1].equals(words2[i2])) {
            sb.append(words1[i1]);
            i2++;
        } else {
            sb.append("(" + words1[i1] + ")");
        }
        if (i1 < words1.length - 1) {
            sb.append(" ");
        }
        i1++;
    }
    return sb.toString();
} 
```

当输入是问题中的输入时，输出完全匹配。

当然，我知道对于某些输入有多种解决方案。例如：

```
a b a
a 
```

可能是，也`a (b) (a)`可能是`(a) (b) a`对于这个问题的某些版本，其中一个解决方案比另一个更可能是“实际”解决方案，对于那些你需要一些递归或动态编程方法的人......但我们不要这样做比Israel Sato最初要求的要复杂得多！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-21T07:20:35.230

这很好用....对于更新的字符串，也
更新了用方括号括起来的字符串。

```
import java.util.*;
class Sample{
public static void main(String[] args){
    Scanner sc=new Scanner(System.in);  

    String str1 = sc.nextLine();
    String str2 = sc.nextLine();
    List<String> flist = Arrays.asList(str1.split("\\s+"));
    List<String> slist = Arrays.asList(str2.split("\\s+"));
    List<String> completedString = new ArrayList<String>();
    String result="";
    String updatedString = "";
    String deletedString = "";
    int i=0;
    int startIndex=0;
    int endIndex=0;
    for(String word: slist){
        if(flist.contains(word)){
            endIndex = flist.indexOf(word);
            if(!completedString.contains(word)){
                if(deletedString.isEmpty()){
                    for(int j=startIndex;j<endIndex;j++){
                        deletedString+= flist.get(j)+" ";
                    }
                }
            }
            startIndex=endIndex+1;
            if(!deletedString.isEmpty()){
                result += "("+deletedString.substring(0,deletedString.length()-1)+") ";
                deletedString="";
            }
            if(!updatedString.isEmpty()){
                result += "["+updatedString.substring(0,updatedString.length()-1)+"] ";
                updatedString="";
            }
            result += word+" ";
            completedString.add(word);
            if(i==slist.size()-1){
                endIndex = flist.size();
                for(int j=startIndex;j<endIndex;j++){
                    deletedString+= flist.get(j)+" ";
                }
                startIndex = endIndex+1;
            }
        }
        else{
            if(i == 0){
                boolean boundaryCheck = false;
                for(int j=i+1;j<slist.size();j++){
                    if(flist.contains(slist.get(j))){
                        endIndex=flist.indexOf(slist.get(j));
                        boundaryCheck=true;
                        break;
                    }
                }
                if(!boundaryCheck){
                    endIndex = flist.size();
                }
                if(!completedString.contains(word)){
                    for(int j=startIndex;j<endIndex;j++){
                        deletedString+= flist.get(j)+" ";
                    }
                }
                startIndex = endIndex+1;
            }else if(i == slist.size()-1){
                endIndex = flist.size();
                if(!completedString.contains(word)){
                    for(int j=startIndex;j<endIndex;j++){
                        deletedString+= flist.get(j)+" ";
                    }
                }
                startIndex = endIndex+1;
            }               
            updatedString += word+" ";
            completedString.add(word);
        }
        i++;
    }
    if(!deletedString.isEmpty()){
        result += "("+deletedString.substring(0,deletedString.length()-1)+") ";
    }
    if(!updatedString.isEmpty()){
        result += "["+updatedString.substring(0,updatedString.length()-1)+"] ";
    }
    System.out.println(result);
} 
```

}

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-01T23:33:58.807

这基本上是不同的，看看这个：

*   [差异](http://en.wikipedia.org/wiki/Diff)

和根算法：

*   [最长公共子序列问题](http://en.wikipedia.org/wiki/Longest_common_subsequence_problem)

这是一个示例 Java 实现：

*   [http://introcs.cs.princeton.edu/java/96optimization/Diff.java.html](http://introcs.cs.princeton.edu/java/96optimization/Diff.java.html)

比较线条。您唯一需要做的就是按单词而不是按行拆分，或者将两个句子的每个单词放在单独的行中。

如果例如在 Linux 上，`diff`您甚至可以在编写任何代码之前使用程序本身查看后一个选项的结果，试试这个：

```
$ echo "I want to delete unnecessary words on this simple sentence."|tr " " "\n" > 1
$ echo "I want to delete words on this sentence."|tr " " "\n" > 2
$ diff -uN 1 2
--- 1   2012-10-01 19:40:51.998853057 -0400
+++ 2   2012-10-01 19:40:51.998853057 -0400
@@ -2,9 +2,7 @@
 want
 to
 delete
-unnecessary
 words
 on
 this
-simple
 sentence. 
```

`-`前面的行是不同的（或者，它会显示`+`这些行是否添加到句子 B 中，而句子 A 中没有）。试试看是否适合您的问题。

希望这可以帮助。

# iphone - 在 iOS 6 中返回 null 的 UITextfields

> ID：12682511
> 
> 赞同：0
> 
> 时间：2012-10-01T23:26:24.797
> 
> 标签：iphone, xcode, ios6

我刚刚为 iOS 6 更新了我的开发系统，当我测试我构建的应用程序时，我现在只是从我的 UITextfields 中获取（null）。

这是我正在做的一个例子：`NSString *email = usernameField.text;`

在输入该文本字段并返回我输入的内容后，我只得到 (null)

iOS 6 我在这里缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:07:58.353

弄清楚了。我忘了为该视图合成文本字段。之前没有它他们工作得很好，但 iOS 6 似乎对它更严格。

# javascript - NodeJS“this”空对象

> ID：12682514
> 
> 赞同：4
> 
> 时间：2012-10-01T23:26:49.460
> 
> 标签：javascript, node.js, this

为什么“this”在 NodeJS 中是一个空对象？“module.exports”属于哪里？

我认为这`"module.exports..."`可以写成，`"this.module.exports..."`但它不会工作。

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-01T23:45:21.127

如果您在实际模块中：

*   `module`是对当前模块的引用

*   `exports`是对导出数据的引用。它被 NodeJS 缓存并交付给`require`它的其他模块

*   `this``exports`是对对象的替代引用

*   `module.exports``exports`是对对象的替代引用

*   `this.module`是`undefined`

`this`是空的，因为如上所述，它是对与 相同的对象的引用，`exports`由开发人员填充。

如果`this.module`是对 的引用`module`，那么由于`this`是对 的引用`exports`，它会将`module`自身与其他导出的项目一起导出。我怀疑这是需要的。

* * *

如果你在 REPL 中，那么`this.module`是被定义的。

# xcode - AVCam 不适用于横向模式

> ID：12682515
> 
> 赞同：0
> 
> 时间：2012-10-01T23:26:58.197
> 
> 标签：xcode, landscape, deprecated, xcode4.5, avcam

我正在使用 Apple 提供的示例 AVCam，但为了我的应用程序的目的，它做了一些修改。但是，除了修复一些其他问题外，没有真正触及原始内容。然而，当要让它在横向模式下工作时，我遇到了一个主要障碍。

我从stackoverflow上的另一个问题中获取的正确类中有以下代码：

```
-(void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {

[CATransaction begin];
if (toInterfaceOrientation==UIInterfaceOrientationLandscapeLeft){
    captureVideoPreviewLayer.orientation = UIInterfaceOrientationLandscapeLeft;
} else {
    captureVideoPreviewLayer.orientation = UIInterfaceOrientationLandscapeLeft;
}

[CATransaction commit];
[super willAnimateRotationToInterfaceOrientation:toInterfaceOrientation duration:duration];
}

-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeLeft animated:NO];

return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft);
} 
```

但是，它不起作用。此代码的目的是在手机移动时允许横向显示。每次您改变方向时，控制台中都会弹出一个警告：

```
WARNING: -[<AVCaptureVideoPreviewLayer: 0x1ed97620> setOrientation:] is deprecated.  Please use AVCaptureConnection's -setVideoOrientation: 
```

不知道如何解决这个弃用错误，或者弃用是否是导致它不转变为景观的原因。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T19:24:37.120

我可以为您提供解决此问题的解决方法，即使我确信必须有更好的解决方案：

```
-(void)willAnimateRotationToInterfaceOrientation (UIInterfaceOrientation)toInterfaceOrientation
                                    duration:(NSTimeInterval)duration {
if (![[[self captureManager] recorder] isRecording]) {
[CATransaction begin];
if (toInterfaceOrientation==UIInterfaceOrientationLandscapeLeft){
    captureVideoPreviewLayer.orientation = UIInterfaceOrientationLandscapeLeft;
    captureVideoPreviewLayer.frame = CGRectMake(0, 0, 480, 320);

} else if (toInterfaceOrientation==UIInterfaceOrientationPortrait){
    captureVideoPreviewLayer.orientation = UIInterfaceOrientationPortrait;
    captureVideoPreviewLayer.frame = CGRectMake(0, 0, 320, 480);

} else if (toInterfaceOrientation==UIInterfaceOrientationLandscapeRight){
    captureVideoPreviewLayer.orientation = UIInterfaceOrientationLandscapeRight;
    captureVideoPreviewLayer.frame = CGRectMake(0, 0, 480, 320);

}

[CATransaction commit];
[super willAnimateRotationToInterfaceOrientation:toInterfaceOrientation duration:duration];
} 
```

}

# c# - WinRT - 如何从文本框中获取光标处的行和列？

> ID：12682525
> 
> 赞同：2
> 
> 时间：2012-10-01T23:28:30.140
> 
> 标签：c#, textbox, windows-8, microsoft-metro, windows-runtime

如何从我的 Windows 8 Metro 应用程序中的文本框中获取光标处的行和列？没有像 WinForms 中那样的 GetFirstCharIndexFromLine 方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T01:50:19.097

这是实现此目的的一种方法：

```
// Returns a one-based line number and column of the selection start
private static Tuple<int, int> GetPosition(TextBox text)
{
    // Selection start always reports the position as though newlines are one character
    string contents = text.Text.Replace(Environment.NewLine, "\n");

    int i, pos = 0, line = 1;
    // Loop through all the lines up to the selection start
    while ((i = contents.IndexOf('\n', pos, text.SelectionStart - pos)) != -1)
    {
        pos = i + 1;
        line++;
    }

    // Column is the remaining characters
    int column = text.SelectionStart - pos + 1;

    return Tuple.Create(line, column);
} 
```

这将获得行号和列号。

# wcf - 将 C# WCF 可扩展性代码移动到配置文件

> ID：12682535
> 
> 赞同：0
> 
> 时间：2012-10-01T23:29:50.857
> 
> 标签：wcf

以下代码将 ParameterInspector 添加到端点。

```
ChannelFactory<ITest> factory = new ChannelFactory<ITest>("BasicHttpBinding_ITest");
OperationProfilerManager clientProfilerManager = new OperationProfilerManager();
factory.Endpoint.Behaviors.Add(new OperationProfilerEndpointBehavior(clientProfilerManager));
ITest proxy = factory.CreateChannel(); 
```

作为一种好的做法，我们正在尝试将所有这些代码移至 Web.config。所以仅仅像这样创建工厂

```
ChannelFactory<ITest> factory = new ChannelFactory<ITest>("BasicHttpBinding_ITest"); 
```

或这个 -

```
ChannelFactory<ITest> factory = new ChannelFactory<ITest>(); 
```

应该从配置中获取扩展元素。通过以下配置，不会触发**IParameterInspector的****BeforeCall**或**AfterCall**方法。您能否指出我们在遵循 Web.config 时的错误 -

 **```
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_ITest" />
        </basicHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://n1:8000/Service" binding="basicHttpBinding"
            bindingConfiguration="BasicHttpBinding_ITest" contract="ServiceReference1.ITest"
            name="BasicHttpBinding_ITest" />
    </client>
    <behaviors>
        <endpointBehaviors>
            <behavior name="todo">                
            </behavior>
        </endpointBehaviors>
    </behaviors>
    <extensions>
        <behaviorExtensions>
            <add name="OperationProfilerEndpointBehavior" type="SelfHostedServiceClient.OperationProfilerEndpointBehavior, SelfHostedServiceClient"/>
        </behaviorExtensions>
    </extensions>
</system.serviceModel> 
```

谢谢您的帮助。

参考： [卡洛斯博客](http://blogs.msdn.com/b/carlosfigueira/archive/2011/04/26/wcf-extensibility-iparameterinspector.aspx)

**编辑：分辨率**

根据卡洛斯的回答，我采取了以下步骤来解决这个问题。

步骤 1\. 创建派生自 BehaviorExtensionElement 的 OperationProfilerBehaviorElement 类。该类负责实例化实现**IEndpointBehavior的类**

```
class OperationProfilerBehaviorElement : BehaviorExtensionElement  {
    public override Type BehaviorType
    {
        get {
            return typeof(OperationProfilerEndpointBehavior);
        }
    }

    protected override object CreateBehavior()
    {
        OperationProfilerManager clientProfilerManager = new OperationProfilerManager();
        return new OperationProfilerEndpointBehavior(clientProfilerManager);
    } } 
```

步骤 2\. 这个类必须在 Web.config 中声明如下，

```
<extensions>
  <behaviorExtensions>
    <add name="OperationProfilerBehavior" type="SelfHostedServiceClient.OperationProfilerBehaviorElement, SelfHostedServiceClient"/>
  </behaviorExtensions>
</extensions> 
```

步骤 3\. 添加了如下**端点行为**，

```
<behaviors>
  <endpointBehaviors>
    <behavior name="**InspectParameters**">
      <OperationProfilerBehavior/>
    </behavior>
  </endpointBehaviors>
</behaviors> 
```

步骤 4\. 设置端点的**behaviorConfiguration**属性等于 InspectParameters，如下所示，

```
 <endpoint address="http://localhost:8000/Service" behaviorConfiguration="InspectParameters"
    binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ITest"
    contract="ServiceReference1.ITest" name="BasicHttpBinding_ITest" /> 
```

现在我能够在单个 C# 行中初始化工厂，并且默认情况下从 Web.config 添加了**参数检查器**

> ChannelFactory factory = new ChannelFactory("BasicHttpBinding_ITest");

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:00:16.677

配置部分中`OperationProfilerEndpointBehavior`引用的类型不应该是实现的类- 它应该是继承自的类型，并且该类是应该创建行为的类。`<extensions> / <behaviorExtensions>``IEndpointBehavior``BehaviorElementExtension`

[在http://blogs.msdn.com/b/carlosfigueira/archive/2011/06/28/wcf-extensibility-behavior-configuration-extensions.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2011/06/28/wcf-extensibility-behavior-configuration-extensions.aspx)查看有关行为扩展的更多信息。**

# linq-to-xml - XDocument 在写入时创建额外的字节

> ID：12682537
> 
> 赞同：0
> 
> 时间：2012-10-01T23:30:14.763
> 
> 标签：linq-to-xml

我第一次尝试使用 XDocument，这似乎是一个不错的选择。但是，在我打开、修改和保存之后，另一个（较旧的 VB6）应用程序需要能够读取文件，但不能，因为文件开头有一些额外的不可见字节。[请在此处](http://i45.tinypic.com/29cax74.png)查看随附的屏幕截图。在我使用 XDocument 保存之前，这 3 个字节不存在。这是代码，非常简单。

```
XDocument xmlFile = XDocument.Load(outputFile);
var query = from c in xmlFile.Elements("LOG_CFG").Elements("LogControl").Elements("LogFileAttributes").Elements("LogFileName")
            select c;

foreach (XElement element in query)
{
    element.Value = GetLogCfgLogFileName(name);
}

xmlFile.Save(outputFile); 
```

一些搜索建议我将 Save 行更改为：

```
using (var writer = new XmlTextWriter(outputFile, null))
{
    xmlFile.Save(writer);
} 
```

但是，这会导致文件丢失格式；输出文件都在一行上。它与保存到加载的同一个文件有关，因为如果我保存到第二个文件名，它会很好用。

有谁知道开头的额外字节是否可以避免，如果不能，建议一个有用的模式来打开、修改和保存回同一个文件？我可以回到 XmlTextReader/Writer，但我真的很喜欢 XDocument。

# types - ocaml 类型构造函数参数

> ID：12682540
> 
> 赞同：4
> 
> 时间：2012-10-01T23:30:26.700
> 
> 标签：types, constructor, ocaml, type-constructor

我这样定义了一个 AVL 树，其中 'a -> 'a -> int 是比较函数

```
type 'a t = Empty of ('a -> 'a -> int)
  | Node of 'a * 'a t * 'a t * ('a -> 'a -> int) 
```

我正在尝试使用此 AVL 模块在单独的模块中实现优先级队列。

```
type 'a t = Queue of (Avl.t * int) 
```

但是当我尝试编译时，我得到了这个错误：

```
 Error: The type constructor Avl.t expects 1 argument(s),
   but is here applied to 0 argument(s) 
```

它在谈论什么论点，队列类型中的语法应该是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T23:42:08.920

您的 AVL 树由节点 ( `'a`) 中的类型参数化。所以你应该可以说

```
type 'a t = Queue of ('a Avl.t * int) 
```

# perl - 使用 Perl 或 shell 脚本替换记录中的换行符

> ID：12682541
> 
> 赞同：0
> 
> 时间：2012-10-01T23:30:35.613
> 
> 标签：perl, shell, expression

我需要删除文本文件字段中的换行符。例如：

输入文件如下所示：

```
"user1","John","Doe","123 a street,
San Francisco,
CA, 94089"
"user2","Foo","Bar","123 x rd., San Jose, CA 95129"
... 
```

如何删除第一条记录中的换行符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:38:22.677

使用完整的错误检查：

```
use Text::CSV_XS qw( );

my $qfn_in  = '...'; 
my $qfn_out = $qfn_in . '.new';

my $csv = Text::CSV_XS->new({
    binary => 1,
    eol    => "\n",
});

open(my $fh_in, "<:encoding(UTF-8)", $qfn_in)
   or die("Can't open \"$qfn_in\": $!\n");

open(my $fh_out, ">:encoding(UTF-8)", $qfn_out)
   or die("Can't create \"$qfn_out\": $!\n");

while (my $row = $csv->getline($fh)) {
   s/\n/ /g for @$row;
   $csv->print($fh, $row) 
      or die("Error writing to \"$qfn_out\": " . $csv->error_diag() . "\n");
}

$csv->eof()  
   or die("Error reading \"$qfn_in\": " . $csv->error_diag() . "\n");

close($fh_in);
close($fh_out) 
   or die("Error writing to \"$qfn_out\": $!\n");

rename($qfn_out, $qfn_in) 
   or die("Can't overwrite \"$qfn_in\" with \"$qfn_out\": $!\n"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T16:51:08.180

以下将实现这一点，尽管该`Text::CSV_XS`解决方案更加健壮：

```
use strict;
use warnings;

my $str =<<"DATA";
"user1","John","Doe","123 a street,
San Francisco,
CA, 94089"
"user2","Foo","Bar","123 x rd., San Jose, CA 95129"
DATA

$str =~ s/,\n/,/g;

print $str; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T23:36:48.590

在 Perl 中，使用`chomp`. 您可能想要 chomp 以逗号结尾的每一行：

```
perl -pe 'chomp if /,$/' input.txt 
```

输入文件看起来像一个 CSV 文件。使用模块解析它可能会更好：[Text::CSV](http://p3rl.org/Text%3a%3aCSV)

# jboss-arquillian - 无法使用 Arquillian 注入注入 bean 的依赖项

> ID：12682542
> 
> 赞同：1
> 
> 时间：2012-10-01T23:30:56.020
> 
> 标签：jboss-arquillian

我正在使用 Arquillian 为我的测试注入依赖项。如果我将 bean 直接注入到我的测试类中，它可以正常工作，但如果 bean 具有它们自己的依赖项，则必须注入这些依赖项，这些依赖项不会被注入。

例如：FacLptConfiguration bean 被正确导入到我的测试类中，但它没有被注入到 CfdFileCreator bean 中。我将 FacLptConfigurtion 注入到测试类中只是为了确认注入工作，但是这个类的用户是 CfdFileCreator。

```
@RunWith(Arquillian.class)
public class CfdFileCreatorArquillianTest {

@Deployment
public static WebArchive createDepolyment() {
    return ShrinkWrap.create(WebArchive.class)
            .addClass(FacLptConfiguration.class)
            .addClass(InterimFileCreator.class)
            .addClass(CfdFileCreator.class)
            .addAsManifestResource(EmptyAsset.INSTANCE, "beans.xml")
            .addAsWebInfResource(new File("C:/aLearn/FacLpt/web/WEB-INF/env-entries.properties"));
}

public static String TEST_FOLDER = "C:/aLearn/FacLpt/src/test/testdata/pruebas/";

@Inject
private FacLptConfiguration facLptConfiguration;

@Inject
private CfdFileCreator cfdFileCreator;

@Test
public void createCfd() {
    System.out.println("in createCFD");
    cfdFileCreator.createCFDFile();
} 
```

}

这些注射不起作用：

```
 @Singleton
  public class CfdFileCreator {

  @Inject
  private InterimFileCreator interimFileCreator;
  @Inject
  private FacLptConfiguration facLptConfiguration; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T14:40:14.753

我认为您的问题是*beans.xml*的位置。对于网络存档，它应该是*WEB-INF/beans.xml*。利用：

`addAsWebInfResource(EmptyAsset.INSTANCE, ArchivePaths.create("beans.xml"))`

另见[https://community.jboss.org/thread/175404](https://community.jboss.org/thread/175404)

# image - ExpressJS：从 MongoDB 中检索图像并在 Jade 中显示它们

> ID：12682543
> 
> 赞同：1
> 
> 时间：2012-10-01T23:31:10.017
> 
> 标签：image, node.js, mongodb, pug, express

我正在寻找从 MongoDB 检索图像并显示它们的好方法。例如，要检索个人资料图片并将其显示在个人资料页面上，我目前是这样做的：

**个人资料页**

```
block content
  h1= session.user.name
  img(src='/avatars') 
```

**路线**

```
exports.avatars = (req, res) ->
  users.find req.session.user, (err, user) ->
    if user
      res.writeHead('200', {'Content-Type': 'image/png'})
      res.end(user.avatar.data, 'binary')
    else
      res.locals.flash = err
      res.render('index', {title: 'Home'}) 
```

基本上，我呈现个人资料页面，`img`标签向服务器发送一个请求，以从数据库中获取用户的图片。我将图像保存为 MongoDB 中的 BinData。不使用`GridFS`，因为我希望图片很小。

有一个更好的方法吗？？我尝试使用将图像数据直接发送到玉视图，`res.render('users/show', {picture: data})`但`img`标签不喜欢这样，我不清楚为什么。这种方法是死胡同吗？

任何意见/建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:17:57.033

将图像数据直接发送到玉视图会起作用，如果

**a）**您对图像数据进行了base64编码

**b)**以“数据：”为前缀

但我不建议您这样做，您实际上是在 html 中嵌入图像。

相反，您应该创建一个单独的路由来处理您的图像/头像。

例如，您的头像的图像源应该类似于

```
img(src='http://mydomain.com/avatars/user1.jpg') 
```

当浏览器请求此图像时，您会使用从 mongo 检索到的图像数据进行响应。

# java - JSP - forEach 循环通过arraylist

> ID：12682545
> 
> 赞同：0
> 
> 时间：2012-10-01T23:31:47.377
> 
> 标签：java, spring, spring-mvc

在 JSP 中

```
 <select name="roomMenu">
        <option value="">Choose</option>
        <c:forEach var="item" items="${visibleRooms}">
            <option>TEST</option>
        </c:forEach>
    </select> 
```

在控制器中

```
ArrayList<Room> visibleRooms = new ArrayList<Room>();
//code to fill visibleRooms with Room objects
model.addAttribute("visibleRooms", visibleRooms); 
```

我知道 visibleRooms 数组列表中有 4 个项目。但是我的下拉菜单没有显示任何“测试”选项。

语法错了吗？

# c++ - Raspberry Pi 上的字节序问题

> ID：12682546
> 
> 赞同：6
> 
> 时间：2012-10-01T23:31:47.720
> 
> 标签：c++, endianness

我刚刚开始使用 C++ 进行一些原始网络编程，并且一直在我的 Raspberry Pi 上进行编译（没有交叉编译）。这使得一切都是小端的。

构建 IP 标头后，我计算了 IP 校验和，但结果总是不正确（基于此处的示例[http://www.thegeekstuff.com/2012/05/ip-header-checksum/](http://www.thegeekstuff.com/2012/05/ip-header-checksum/)）。

加快 gdb，我已经解决了 IP 标头中前 32 位的排序问题。该示例使用`0x4500003C`，表示版本 4 ( `0x4`)、IHL 5 ( `0x5`)、TOS 0 ( `0x00`) 和 tot_length 60 ( `0x003C`)。所以我将我的数据包设置为相同。

```
struct iphdr* ip; // Also some mallocing
ip->version = 4;
ip->ihl = 5;
ip->tos = 0;
ip->tot_len = 60; 
```

现在在 gdb 中，我检查了前 32 位，`0x3C000045`因为字节序而期待，但我得到了这个：

```
(gdb) print ip
$1 = (iphdr *) 0x11018
(gdb) x/1xw 0x11018
0x11018:        0x003c0045 
```

前 16 位是小端（`0x0045`），但第二个，包含十进制 60，似乎是大端（`0x003C`）！

这是什么给的？我疯了吗？我对结构内的字节顺序完全错误吗？（绝对有可能）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T23:41:48.377

结构中有字段的顺序，然后是多字节字段中的字节顺序。

`0x003C`根本不是字节序，它是 60 的十六进制值。当然，它以某种字节序存储在内存中，但是你用来写字段的顺序和你用来读回它的顺序是一样的——两者都是Raspberry Pi 的本机字节顺序，它们相互抵消。

通常你会想写：

```
ip->tot_len = htons(60); 
```

将 16 位字段存储到数据包中时。还有`htonl`32 位字段，以及`ntohs`从`ntohl`网络数据包中读取字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T18:35:25.553

ARM 架构可以同时运行小端和大端，但 Android 平台运行的是小端。

# html - 边框溢出100％高度宽度身体移动浏览器？

> ID：12682549
> 
> 赞同：0
> 
> 时间：2012-10-01T23:32:15.910
> 
> 标签：html, css, mobile

## 我有以下 DIV 结构：

```
<style>
#header{border-bottom:1px solid blue;}
#footer{botter-top:1px solid blue;}
#header,#footer{height:15%;}
#content{height:70%;}
#header,#footer,#content{width:100%;}
</style>

<div id="header"></div>
<div id="content"></div>
<div id="footer"></div> 
```

*我注意到的是，在桌面浏览器中，从 100% 偏移 2px+ 的预期溢出* **但是，在移动浏览器中，似乎没有任何溢出/滚动。**

*   移动设备是否将边框计为 100% 高度/宽度计算的一部分？

## 如果是这样的话：

*   有没有办法通过 CSS 为桌面浏览器调用这种行为？
*   有没有办法通过移动浏览器的 CSS 来扭转这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:49:05.360

每个默认`box-sizing`的浏览器（移动和桌面）都应该添加 2px。

尝试添加此规则：

`#header,#footer,#content { box-sizing:border-box; }`

到你的 CSS。

* * *

*   有没有办法通过 CSS 为桌面浏览器调用这种行为？

没必要。这已经是默认行为了。

*   有没有办法通过移动浏览器的 CSS 来扭转这种行为？

是的，通过添加上面的规则:-) 或此答案底部的解决方法。

* * *

如果您只想定位移动设备，请将规则嵌套在媒体查询中：

```
@media only screen and (max-device-width: 480px){
    #header,#footer,#content { box-sizing:border-box; }
} 
```

要使其在 IE8 上运行，请使用[respond.js](https://github.com/scottjehl/Respond)。但是如果你只有这个媒体查询，可能你实际上并不需要它（它会被简单地忽略）。

[浏览器（IE8+，其他所有）都很好地支持](http://caniuse.com/css3-boxsizing)该`box-sizing`属性，我认为您不需要 IE7 的后备（全球不到 2% 的用户）。

* * *

解决您的问题的另一个非常简单的解决方法是添加 1px 的负边距：

```
#footer,#content { margin-top:-1px; } 
```

这将解决移动设备和任何已知浏览器中的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T23:55:02.680

所以是的，桌面浏览器会看到 2px 的偏移量，因为规范说需要 100% 的父级 + 边框 + 边距。移动浏览器似乎没有受到影响，但主要是因为它们试图将内容自动调整到窗口以消除滚动。

有 2 个 css3 修复，第一个是使用新的 box-sizing 属性，并将其设置为边框框。二是使用flexbox模型。但不幸的是，较旧的浏览器可能不支持这些解决方案中的任何一个。

所以我会使用 box-sizing，但是在 IE7 和后面添加一个 IE 条件语句，然后使用 javascript 或 css hack 来修复它。

**编辑**

这是使用 box-sizing [http://jsfiddle.net/aaFHZ/的解决方案](http://jsfiddle.net/aaFHZ/)

```
body, html {height:100%; width: 100%;}
#header{border-bottom:1px solid blue;}
#footer{border-top:1px solid blue;}
#header,#footer{height:15%;}
#content{height:70%;}
#header,#footer,#content{width:100%; box-sizing:border-box;} 
```

这是使用 flexbox 的解决方案（注意：这只适用于最新的浏览器）[http://jsfiddle.net/YkSYN/1/](http://jsfiddle.net/YkSYN/1/)

```
<style>
body, html {height:100%; width: 100%;}
#header{border-bottom:1px solid blue;}
#footer{border-top:1px solid blue;}
#header,#footer {
    -webkit-box-flex: 15;
    -moz-box-flex: 15;
    box-flex: 15;}
#content {
    -webkit-box-flex: 70;
    -moz-box-flex: 70;
    box-flex: 70;}
#header,#footer,#content{width:100%;}
#wrapper {
    display: -webkit-box;
    -webkit-box-orient: vertical;
    display: -moz-box;
    -moz-box-orient: vertical;
    display: box;
    box-orient: vertical;
    width: 100%; 
    height:100%;}
</style>
<div id="wrapper">
    <div id="header"></div>
    <div id="content"></div>
    <div id="footer"></div>
</div>​ 
```

# ravendb - 在 RavenDB 中将 Guid 作为 Id

> ID：12682550
> 
> 赞同：7
> 
> 时间：2012-10-01T23:32:27.297
> 
> 标签：ravendb

RavenDb[文档](http://ravendb.net/docs/client-api/basic-operations/saving-new-document)指出：

> 支持数字或 Guid Id 属性并将无缝工作。在这种情况下，RavenDB 会自动将内部字符串 ID 转换为实体中显示的数字或 Guid 值并返回。

我存储了以下对象：

```
class A
{
    public Guid Id { get; set; }
    public Guid BId { get; set; }
}

class B
{
    public Guid Id { get; set; }
    public string Name { get; set; }
} 
```

然后我创建了以下投影：

```
class AB
{
    public Guid Id { get; set; }       // This should be the Id of A
    public Guid BId { get; set; }      // This should be the Id of B
    public string BName { get; set; }  // This should be the name of B
} 
```

我创建了以下索引来创建投影：

```
class MyIndex : AbstractIndexCreationTask<AB>
{
    public MyIndex()
    {
        Map = docs =>
            from d in docs
            select new
            {
                d.Id,
                d.BId,
                BName = string.Empty
            };

        TransformResults = (database, results) =>
            from r in results
            let b = database.Load<B>("bs/" + r.BId.ToString())
            select new
            {
                r.Id,
                r.BId,
                BName = b.Name
            };
    }
} 
```

当我使用以下查询时：

```
session.Query<AB, MyIndex>().FirstOrDefault(t => t.Id == guid); 
```

我得到这个例外：

> 将值“bs/cc0a65ae-dd36-4437-8a57-fa20b91eeef7”转换为类型“System.Guid”时出错。路径“标识”。

**问题：**

1.  这是由我的投影中的转换引起的，因为`Id`那里是一个字符串，而不是我的 Guid。但是，将其省略不会返回 Id。我必须做什么？

2.  我必须使用字符串构建`"bs/" + r.BId.ToString()`来加载相关文档。有没有办法不必这样做？是否有某种功能可以为我解析 doc 标签？

3.  有没有一种通用的方法可以完全去除文档标签？

**我的约束。**

我将生成 Guid，不能让 RavenDb 为我生成它。我知道实际的文档 ID 是字符串，但我确实需要使用我创建的 Guid。我更愿意拥有`Id`我的实体的财产。

我正在使用 Raven.Client 1.0.972

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T20:59:50.520

您可以使用 MultiMap/Reduce Index 来实现这一点，但您需要一些技巧：

1）您需要减少使用字符串，而不是指南。正如我将在下面演示的那样，您仍然可以在 AB 类中将值作为 guid 取回。

2) 您不能将 AB 类的第一个属性称为“Id”，因为 raven 会尝试将其转换为“__document_id”。所以称它为“AId”，它会正常工作。

3）在映射阶段，您必须自己操作字符串以剥离文档键前缀。

这是一个将所有内容组合在一起的示例程序。这表明它确实有效，但我认为它也说明了为什么 Ayende 更喜欢字符串标识符，因此您不必处理这种混乱。

```
using System;
using System.Linq;
using Raven.Client.Document;
using Raven.Client.Indexes;

namespace RavenScratchTest
{
  class Program
  {
    static void Main()
    {
      var documentStore = new DocumentStore { Url = "http://localhost:8080" };
      documentStore.Initialize();
      IndexCreation.CreateIndexes(typeof(Program).Assembly, documentStore);

      using (var session = documentStore.OpenSession())
      {
        var b = new B { Id = Guid.NewGuid(), Name = "Foo" };
        var a = new A { Id = Guid.NewGuid(), BId = b.Id };

        session.Store(a);
        session.Store(b);

        session.SaveChanges();
      }

      using (var session = documentStore.OpenSession())
      {
        var a = session.Query<A>().Customize(x => x.WaitForNonStaleResults()).First();
        var b = session.Query<B>().Customize(x => x.WaitForNonStaleResults()).First();

        Console.WriteLine("A:  Id = {0}", a.Id);
        Console.WriteLine("   BId = {0}", a.BId);
        Console.WriteLine();
        Console.WriteLine("B:  Id = {0}", b.Id);
        Console.WriteLine("  Name = {0}", b.Name);
        Console.WriteLine();

        var guid = a.Id;
        var ab = session.Query<AB, MyIndex>().Customize(x => x.WaitForNonStaleResults())
          .FirstOrDefault(t => t.AId == guid);

        if (ab == null)
          Console.WriteLine("AB: NULL");
        else
        {
          Console.WriteLine("AB:  AId = {0}", ab.AId);
          Console.WriteLine("   BId = {0}", ab.BId);
          Console.WriteLine("   BName = {0}", ab.BName);
          Console.WriteLine();
        }
      }

      Console.WriteLine();
      Console.WriteLine("Done.");
      Console.ReadLine();
    }
  }

  class A
  {
    public Guid Id { get; set; }
    public Guid BId { get; set; }
  }

  class B
  {
    public Guid Id { get; set; }
    public string Name { get; set; }
  }

  class AB
  {
    public Guid AId { get; set; }
    public Guid BId { get; set; }
    public string BName { get; set; }
  }

  class MyIndex : AbstractMultiMapIndexCreationTask<MyIndex.ReduceResult>
  {
    public MyIndex()
    {
      AddMap<A>(docs => from a in docs
                select new
                {
                  AId = a.Id.ToString().Split('/')[1],
                  a.BId,
                  BName = (string)null
                });

      AddMap<B>(docs => from b in docs
                select new
                {
                  AId = (string)null,
                  BId = b.Id.ToString().Split('/')[1],
                  BName = b.Name
                });

      Reduce = results => from result in results
                group result by result.BId
                into g
                select new
                  {
                    g.FirstOrDefault(x => x.AId != null).AId,
                    BId = g.Key,
                    g.FirstOrDefault(x => x.BName != null).BName
                  };
    }

    internal class ReduceResult
    {
      public string AId { get; set; }
      public string BId { get; set; }
      public string BName { get; set; }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T00:00:30.903

您可以在保存时显式地向 RavenDB 提供一个 ID：

```
session.Store(doc, explicitIdValueString); 
```

`explicitIdValueString`可以是 Guid 字符串。此值将用于标识整个数据库中的文档，并且不会以类型标记名称为前缀。您还可以通过覆盖`IDocumentStore.Conventions`诸如`FindTypeTagName`which is a之类的约定来自定义标签名称或 ID 生成策略`Func<Type, string>`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T08:32:38.967

主要问题是，虽然 RavenDB 可以在客户端处理数字/整数，但在服务器端，RavenDB 使用字符串 id。

一般来说，不建议使用 Guids / numeric ids。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-09T14:05:47.950

假设您有用户并且您想为这些用户生成 guid 标识符。

```
new User { Id = "users/" + Guid.NewGuid().ToString("N") } 
```

出于理智的目的，在文档中我急切地创建密钥，因为我将它们设置为不可变的。

```
public class User
{
    public User(Guid? guid = null)
    {
        IdPart = (guid ?? Guid.NewGuid()).ToString("N")
    }

    string IdPart { get; }
    string Id => $"Users/{IdPart}" 
```

有时 IdPart 实际上是一个完整的键。假设我们有“用户/ abc”。如果用户有一个项目。我通常会创建一个类似于以下内容的文档：

```
public class Project
{
    public User(Guid? userId = null)
    {
        UserId = "Users/" + (guid ?? Guid.NewGuid()).ToString("N");
        Id = $"{UserId}/project/"

    } 
```

注意后面的`project/`this 将通知 raven 在斜线之后创建一个 HiLo 值。

此概念可用于轻松混合分配的标识符、自然标识符和序列/hilo/身份键，同时促进可读标识符而不是`1`. `1`是什么？但是`User/abc/project/1`，我可以告诉你那是什么。abc创建的第一个项目

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-02-06T10:24:29.530

```
class MyIndex : AbstractIndexCreationTask<AB>
{
    public MyIndex()
    {
        Map = docs =>
            from d in docs
            select new
            {
                d.Id,
                d.BId,
                BName = string.Empty
            };

        TransformResults = (database, results) =>
            from r in results
            let b = database.Load<B>("bs/" + r.BId.ToString())
            select new
            {
                Id = Guid.Parse(r.Id.ToString().Split('/').Last()),
                r.BId,
                BName = b.Name
            };
    }
} 
```

# dll - 指定类库中文件的路径，该类库中从控制台应用程序调用的方法

> ID：12682551
> 
> 赞同：0
> 
> 时间：2012-10-01T23:32:31.360
> 
> 标签：dll

我有一个 ClassLibrary 项目，这是我的业务层 - Demo.Business

对于这个类库，

```
I have folder in the class library as below
                TRT
                 |
                TRT.cs
                TRTDetails.cs
                TRTFiles(Folder)
                 |
                **TRTFile.txt** 
```

在 TRT.cs 类中，我有一个方法

```
public void UpdateDetails()
{
   var typeSeq = from val in TRTDetails.Read**(@"TRTFile.txt")**
} 
```

现在我已将此类库“Demo.Business.dll”的引用添加到我的控制台应用程序 - “DemoProcess.exe”。在上面的控制台应用程序中，我正在调用方法**“UpdateDetails()”**，如下所示：

```
public void CallMethod()
{
   UpdateDetails();
} 
```

如何在类库的方法“UpdateDetails()”中指定文件“TRTFile.txt”的路径？

我尝试使用 System.IO.Path.GetDirectoryName

```
(System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase) 
```

它总是给出执行应用程序的路径。IE

```
C:\\Projects\\Demo.Process\\bin\\Debug 
```

我怎样才能得到路径

```
C:\\Projects\\Demo.Business\\TRT\\TRTFiles............ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:07:26.423

有两种方法可以做到这一点：

I. 这可以使用相对路径来完成。如果您的`dll`也位于`Debug`文件夹中，则以下内容`path = @"..\..\..\Demo.Business\TRT\TRTFiles\"`将完成工作。

首先`..\`会让我们到`C:\\Projects\\Demo.Process\\bin\\`.
第二个`..\`会让我们`C:\\Projects\\Demo.Process\\`。
第三`..\`将让我们到`C:\\Projects\\`。

二、或者通过使用用于编写 Visual Studio 扩展的类（[可扩展性](http://msdn.microsoft.com/en-us/library/extensibility%28v=vs.100%29.aspx)、[EnvDTE](http://msdn.microsoft.com/en-us/library/envdte.aspx)命名空间等），它们提供了获取有关项目及其内容的所有信息的功能。但这很复杂。

# actionscript-3 - Flash TextField 补间不顺畅

> ID：12682552
> 
> 赞同：1
> 
> 时间：2012-10-01T23:32:32.693
> 
> 标签：actionscript-3, flash, air, flash-builder

我遇到了 TextFields 的问题，每当我对它们所在的容器进行补间时，文本都会跳跃并且不能非常平滑地缩放。这个问题有解决方案吗？我试过设置cacheAsBitmap，这似乎没有任何效果。谢谢。

想补充一点，我在 AIR 中执行此操作，并且补间不是线性的，例如，不仅仅是 x 补间，它是同时影响 x 和 y 的补间。我有一种感觉，可能是因为这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T01:13:05.157

正如其他答案中的人所说，您可以尝试对文本字段设置的值进行四舍五入，以部分（有时完全）避免这种“跳跃”。

如果您使用的是补间引擎，例如 TweenLite、eaze 等，您可以尝试寻找一种方法来舍入位置：

*   例如通过在 Tweenlite 中使用 RoundPropsPlugin，

*   或在来自补间本身的 onUpdate 事件中使用 Math.round(value) 函数。

大多数情况下，好的补间引擎将具有这些解决方案中的任何一个（甚至两者！）（如果没有，也许考虑更换引擎，[TweenLite](http://www.greensock.com/tweenlite/)或[eaze](http://code.google.com/p/eaze-tween/)在我看来是两个最好的！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T00:28:51.613

确保它们为动画而不是为了可读性而抗锯齿。您可以在文本字段属性中找到设置。如果使用脚本，例如 TweenLite，您可能还需要考虑在更新时四舍五入位置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T00:28:56.730

将抗锯齿选项更改为“动画抗锯齿”而不是“可读性抗锯齿”。

# java - 如何在Java中将字符串与枚举类型进行比较？

> ID：12682553
> 
> 赞同：10
> 
> 时间：2012-10-01T23:32:32.427
> 
> 标签：java, string, enums, compare

我有一个美国所有州的枚举列表，如下所示：

```
public enum State
{ AL, AK, AZ, AR, ..., WY } 
```

在我的测试文件中，我将从包含状态的文本文件中读取输入。由于它们是字符串，我如何将它与枚举列表的值进行比较，以便将值分配给我设置为的变量：

```
private State state; 
```

我知道我需要通过枚举列表。但是，由于这些值不是字符串类型，如何比较呢？这就是我盲目输入的内容。我不知道它是否正确。

```
public void setState(String s)
{
    for (State st : State.values())
    {
        if (s == State.values().toString())
        {
           s = State.valueOf();
           break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-01T23:37:03.067

尝试这个

```
public void setState(String s){
 state = State.valueOf(s);
} 
```

如果“s”值与任何“State”不匹配，您可能想要处理可能引发的 IllegalArgumentException

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-01T23:36:04.533

使用`.name()`方法。喜欢`st.name()`。例如`State.AL.name()`返回字符串“AL”。

所以，

```
if(st.name().equalsIgnoreCase(s)) { 
```

应该管用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T23:47:10.880

将枚举与字符串进行比较

```
for (Object s : State.values())
    {
            if (theString.equals(s.toString()))
        {
            // theString is equal State object

        }
    } 
```

# jquery - 仅在 Jquery 中检查时处理 Asp:CheckBoxList 的 onClick

> ID：12682555
> 
> 赞同：0
> 
> 时间：2012-10-01T23:32:42.587
> 
> 标签：jquery, asp.net, onclick, checkboxlist

我有一个动态生成的 asp.net 复选框列表，如果复选框最初被选中并且未选中，我需要处理一些代码。

这需要在 Jquery 或 Javascript 中完成。

我看到的所有示例都处理获取“已检查”的所有值我只对获取触发 onClick() 事件 ID 的特定项目感兴趣，以便我可以运行一些其他代码来处理它。

```
public void DrawPoolWeekCbList()
{
    var poolWeeks = ControllerFacade.GetAllPoolWeeksByPoolYear(PageView.PoolWeekYear.Text);
    var pWeekCount = poolWeeks.Count;
    var curRecord = 0;
    foreach (var poolWeek in poolWeeks)
    {
        PageView.cblPoolWeeks.Items.Add(poolWeek);
        PageView.cblPoolWeeks.Items[curRecord].Attributes.Add("onclick", "OnCheckBoxClicked("+ poolWeek +")");
        curRecord++;
    }
}

//UI Code
function OnCheckBoxClicked(poolWeek) {
    var chkId = poolWeek.toString();
    $('#<%= lblPoolWeekChange.ClientID %>').text(chkId);
    $(".addNew").dialog("open");
} 
```

我见过的所有示例都找到了所有选中的复选框并循环遍历它们，我再次只想要触发该功能的特定复选框 id。

谢谢！

```
//Generated HTML - 
<input id="ContentPlaceHolder1_cblPoolWeeks_0" type="checkbox" name="ctl00$ContentPlaceHolder1$cblPoolWeeks$0" onclick="OnCheckBoxClicked(01);" value="01" /><label for="ContentPlaceHolder1_cblPoolWeeks_0">01</label></td><td><input id="ContentPlaceHolder1_cblPoolWeeks_1" type="checkbox" name="ctl00$ContentPlaceHolder1$cblPoolWeeks$1" onclick="OnCheckBoxClicked(02);" value="02" /><label for="ContentPlaceHolder1_cblPoolWeeks_1">02</label></td><td><input id="ContentPlaceHolder1_cblPoolWeeks_2" type="checkbox" name="ctl00$ContentPlaceHolder1$cblPoolWeeks$2" onclick="OnCheckBoxClicked(03);" value="03" /><label for="ContentPlaceHolder1_cblPoolWeeks_2">03</label> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:19:29.477

这个片段对我有用，请记住，asp.net 页面上只有一个 CheckBoxList，如果有多个这可能不起作用 - 请记住，这是用于处理单个复选框，而不是用于迭代，如“检查所有”功能。如果您需要将所有检查值添加到会话变量（我的情况）以供以后更新记录，这很方便。

```
 $(document).ready(function () {
       $("input:checkbox").click(function () {
           if ($(this).is(":checked")) {
               OnCheckBoxClicked(this.value);
           } else {
               OnUnchecked(this.value);
           }
       });
   }); 

   function OnCheckBoxClicked(poolWeek) {

       var chkId = poolWeek.toString();
       //Show DialogBox - Set label to pool week.
       $('#<%= lblPoolWeekChange.ClientID %>').text(chkId);
       $(".addNew").dialog("open");

   }

   function OnUnchecked(poolWeek) {
       var chkId = poolWeek.substring(2, 4);
       var commodity = $('#<%= Commodity.ClientID %> option:selected').text();
       $.ajax(
                {
                    type: "POST",
                    url: "Ajax/DeleteExcludedPoolWeek.aspx",
                    data: "poolWeek=" + chkId +  "&commodity=" + commodity,
                    success: function (msg) {
                        $('#myDiv').text('Pool week status changed.');

                    },
                    error: function (x, e) {
                        alert("The call to the server side failed. " + x.responseText);
                    }
                }
            );
   } 
```

# http - 内联加载 jQuery 库是减少渲染时间的有效方法吗？

> ID：12682557
> 
> 赞同：0
> 
> 时间：2012-10-01T23:32:57.093
> 
> 标签：http, http-headers, shared-libraries

[围绕 gzip、缩小和结合两者以获得最大压缩效果的](https://stackoverflow.com/questions/807119/gzip-versus-minify)讨论让我想知道是否可以通过将 jQuery 库直接放在我的 HTML 文件中来获得净性能效果？

我已经对图标精灵进行了此操作，我对其进行 base64 编码，然后通过 CSS 数据源加载，以尽量减少 HTTP 请求的数量。

现在我问：您是否知道以原始 min+gzip 形式加载 jQuery 库（可在官方生产下载链接上获得）与通过托管在其 CDN 上的 Google AJAX 库加载它相比是否更有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:36:54.757

### TL;博士：

您应该始终将公共项目（如 JS 库）保留在外部文件中，因为这允许在您的服务器、浏览器以及沿途的许多节点上进行缓存。在查看页面的整体速度时，缓存时间大大超过了压缩或请求时间。

### 更长的版本：

对于这个问题，有很多事情需要考虑。以下是我脑海中浮现的那些。

1.  缩小脚本和样式总是有利于速度。我觉得这里没什么好讨论的。

2.  压缩（和浏览器中的提取）有开销。启动 gzip 模块需要花费时间来发送请求，因此对于小文件或二进制文件（图像等），通常最好跳过 gzip。然而，大型且主要由 ascii 组成的东西（如 JS 库）是一种压缩的好东西，因此请检查一下。

3.  减少 HTTP 请求通常是一件好事。但请注意，自 HTTP 1.1（所有主流浏览器都支持）以来，新的 HTTP 请求并不意味着新的套接字连接。使用`keep-alive`，同一个套接字连接可以一次性为网页和所有附属文件提供服务。请求的唯一额外开销是请求和响应标头，除非您有很多小图像/脚本，否则可以忽略不计。只需确保这些文件是从无[cookie 域提供](https://serverfault.com/questions/78227/what-is-a-cookie-free-domain)的。

4.  与第 3 点相关，在页面中嵌入内容确实有减少 HTTP 请求的好处，但也有增加页面本身大小的缺点。对于像 JS 库这样大的东西，库的大小大大超过了额外文件所需的 HTTP 开销的大小。

5.  现在这是踢球者：如果库嵌入在页面中，它几乎永远不会被缓存。对于初学者，大多数（所有？）主流浏览器默认不会缓存主 HTML 页面。`CACHE-CONTROL`如果需要，您可以在页眉中添加元标记，但有时这不是一个选项。此外，即使该页面被缓存，您的其余页面（可能也在使用该库）现在也需要缓存。突然间，您的整个网站都缓存在了用户的机器上，包括许多 JS 库的副本，而这可能不是您想要对用户执行的操作。另一方面，如果您将 JS 库作为外部文件，它可以自己缓存一次，特别是（如[@Barmar](https://stackoverflow.com/users/1491895/barmar)所说）如果库是从像 Google 这样的通用 CDN 加载的。

6.  最后，缓存不仅仅发生在客户端的浏览器中。如果您正在运行企业级服务，您可能拥有多个共享和单独缓存的服务器池、速度极快的 CDN 缓存、通往您的域的代理缓存，甚至某些路由器和其他设备上的 LAN 缓存。因此，现在我将您带回到顶部的 TL;DR，说您可以通过缓存（尤其是在浏览器中）获得的加速比您可能遇到的任何其他考虑更重要。

希望有帮助。

# python - 如何编写异常捕获代码在 Python2.4 到 Python3 中工作

> ID：12682558
> 
> 赞同：12
> 
> 时间：2012-10-01T23:33:10.547
> 
> 标签：python, python-3.x

无论如何要编写一个从 python 2.4 到 python 3 兼容的异常捕获代码？

像这样的代码：

```
# only works in python 2.4 to 2.7
try:
    pass
except Exception,e:
   print(e)

# only works in python 2.6 to 3.3
try:
    pass
except Exception as e:
    print(e) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-01T23:36:27.637

尝试编写同时适用于 Python 2 和 Python 3 的代码最终是徒劳的，因为它们之间存在大量差异。事实上，许多项目现在都维护在单独的 Python 2 和 Python 3 版本中。

也就是说，如果你一心想以超级便携的方式做到这一点......

```
import sys
try:
    ...
except Exception:
    t, e = sys.exc_info()[:2]
    print(e) 
```

# jquery - 如何在jquery的行尾增加选择器值？

> ID：12682560
> 
> 赞同：0
> 
> 时间：2012-10-01T23:33:25.843
> 
> 标签：jquery, loops, auto-increment

我有一个问题，我需要将父 div 的高度调整为子 div 中最长文本的长度，但我需要连续测试所有 div 并找到最长的文本并将该宽度用作值该行中所有父 div 的高度。然后我需要相同的循环函数来增加jQuery选择器，它开始选择一个类名“row-1”到下一行，即row-2，然后遍历所有这些并设置它们的高度......然后到第三row, row-3 等等，直到服务器端查询返回的所有行都经过测试并调整了它们的行高。听起来很奇怪，但它看起来是这样的：

[http://ccs.btcny.net/redhook/](http://ccs.btcny.net/redhook/)

我正在使用 PHP 创建行并添加类名，并且我有一个函数可以干净快速地输出标记！

但如果这有助于 PHP 和整体逻辑如下：

从第一行中的 1 个项目开始，然后在遍历查询时向每一行添加 1 个项目，直到检索到所有项目。然后在创建新行时缩小所有内容。

我让这个 jquery 函数在下面逐行运行......但我需要一个循环函数，直到所有项目都被检索到。这是我能够完成的：

```
$('.row-1 div.article-list-title').each(function() {
            maxWidth = maxWidth > $(this).width() ? maxWidth : $(this).width();

            var titwidth = $(this).width();
            console.log(titwidth);
            });

        $('.row-1').each(function() {
              $(this).height(maxWidth);
            });
$('.row-2 div.article-list-title').each(function() {
            maxWidth = maxWidth > $(this).width() ? maxWidth : $(this).width();

            var titwidth = $(this).width();
            console.log(titwidth);
            });

        $('.row-2').each(function() {
              $(this).height(maxWidth);
            });

/* And so on */ 
```

任何帮助深表感谢！

提前感谢您帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T00:40:19.353

我认为我对你试图用这个做什么了解不够，所以我会保存“我不会这样做”的演讲。

不过，我认为这会给你你想要的（如果你想使用 jQuery）。

```
heights = new array();
/** Loop through the title classes **/
$('div.article-list-title').each(function(){
  var $this = $(this),
    currentRow = $this.parent(),
    x = 1;
  /** Match the parent row class name **/ 
  while(! currentRow.hasClass("row-"+ x)) x++;
  if (heights.length < x) heights[x] = 0;
  if ($this.width() > heights[x]) heights[x] = $this.width();
});
/** Now update all the row-x class heights **/
for (var y = 1; y <= heights.length; y++) {
  $(".row-"+y).height(heights[y]);
} 
```

小心`while(! currentRow.hasClass("row-"+ x)) x++;`，如果`article-list-title`元素没有父`row-x`类元素，它将永远循环

# scala - 如果特定函数返回空，如何检查 Scala？

> ID：12682574
> 
> 赞同：0
> 
> 时间：2012-10-01T23:35:15.813
> 
> 标签：scala

我有这个功能：

`type CustomSet = Int => Boolean`

如果我想创建交叉点，我会执行以下操作：

```
def intersection(s: CustomSet, t: CustomSet): CustomSet = {
        (x: Int) => contains(s, x) && contains(t, x)
  } 
```

现在，我看不到任何方法来检查两组的交集是否为空......

我尝试了很多方法：

`- if (intersection(s, t) == CustomSet())`

`- if (intersection(s, t) == None)`

等等，但它不工作......

你能告诉我我在这个检查中哪里错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T04:46:48.593

只需将所有评论放在一起：

的结果`intersection`只是一个函数。您可以比较两个函数的引用相等性，即它们是否是同一个函数。

没有办法测试两个函数是否针对所有可能的参数（和系统状态）返回相同的结果（并且具有相同的副作用），因此您所能做的就是定义您关心的输入参数范围并比较结果具有所有有趣输入参数的所有结果的两个函数。

所以在你的情况下，你可以做类似的事情

```
(-1000 to 1000).forall(!intersection(s,t)(_)) 
```

这将测试从 -1000 到 1000 的所有数字是否不在和的`s`交集`t`

# asp.net-mvc - Ninject 条件绑定更改范围

> ID：12682578
> 
> 赞同：1
> 
> 时间：2012-10-01T23:35:48.483
> 
> 标签：asp.net-mvc, binding, scope, ninject

在带有 MVC3 Ninject Extension 的 MVC4 应用程序中使用 Ninject，当绑定到存储库（DbContext）时，我想`InRequestScope`用于控制器，当在自定义`MembershipProvider`.

我想做这个：

```
kernel.Bind<IRepo>().To<Repo>().InRequestScope();
kernel.Bind<IRepo>().To<Repo>().WhenInjectedInto<MembershipHelper>()
                               .InSingletonScope(); 
```

这样，对控制器的每个 Web 请求都会获得一个新的 repo 实例，而 MembershipProvider 会保持与 repo 的可重用连接。

这在开发环境中似乎可以正常工作，但是我怎么知道正在使用哪个绑定？有没有办法测试范围是否正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T05:25:48.270

是的，这很好。这是一个非常简单的测试方法：

```
public interface IRepo { }

public class Repo : IRepo { }

public class MembershipHelper
{
    private readonly IRepo _repo;
    public MembershipHelper(IRepo repo)
    {
        _repo = repo;
    }

    public string GetId()
    {
        return _repo.GetHashCode().ToString();
    }
}

public class HomeController : Controller
{
    private readonly IRepo _repo;
    private readonly MembershipHelper _helper;
    public HomeController(IRepo repo, MembershipHelper helper)
    {
        _repo = repo;
        _helper = helper;
    }

    public ActionResult Index()
    {
        return Content(_repo.GetHashCode().ToString() + " " + _helper.GetId());
    }
} 
```

现在导航到`/home/index`并观察 2 个哈希码。每个请求的第一个更改，而第二个保持不变。

# jquery - 将占位符文本添加到 jQuery Tokenizer

> ID：12682582
> 
> 赞同：1
> 
> 时间：2012-10-01T23:36:10.260
> 
> 标签：jquery, jquery-tokeninput

我正在使用 jQuery Tokenizer ( [http://loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/) ) 并尝试像普通输入一样添加占位符文本。

我尝试将文本放在典型的`placeholder`标签元素中，如下所示：

```
<input data-autocomplete-source="http://localhost:3000/city_to_zips" id="account_town" name="city_to_zip_id" placeholder="Enter city..." type="text" style="display: none; "> 
```

但是，很明显，tokenizer 隐藏了该输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T22:46:55.260

**方法 1：**快速而肮脏的方法，将占位符属性直接添加到在[jquery.tokeninput.js](https://github.com/loopj/jquery-tokeninput/blob/master/src/jquery.tokeninput.js)文件中创建的输入中：

```
// Create a new text input an attach keyup events
var input_box = $("<input type=\"text\"  autocomplete=\"off\" placeholder=\"Enter city...\">") 
```

**方法 2：**将 placeHolderText 添加为默认设置之一。首先将参数添加到 DEFAULT_SETTINGS 例如：

`placeHolderText: 'Enter City...',`

然后添加以下内容：

`.attr("placeholder", $(input).data("settings").placeHolderText)`

前

`.attr("id", $(input).data("settings").idPrefix + input.id)`

默认情况下，占位符文本将为“输入城市...”，您可以在设置令牌输入时覆盖它，例如：

```
$(function() {
    $("#account_town").tokenInput("http://example.com/search", {
    'placeHolderText': 'Enter Town...',
}); 
```

请参阅[pastebin](http://pastebin.com/k7rnDdvN)（更改在第 31、244 行）

# python - 父进程结束时 subprocess.Popen 调用的进程未正确关闭

> ID：12682583
> 
> 赞同：1
> 
> 时间：2012-10-01T23:36:12.740
> 
> 标签：python, parent-child, popen

我在 Python 中有简化的以下代码：

```
proc_args = "gzip --force file; echo this_still_prints > out"
post_proc = subprocess.Popen(proc_args, shell=True)

while True:
    time.sleep(1) 
```

假设文件足够大，需要几秒钟的时间来处理。如果我在 gzip 仍在运行时关闭 Python 进程，它将导致 gzip 结束，但它仍会执行以下行到 gzip。我想知道为什么会发生这种情况，如果有办法让我不再继续执行以下命令。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T00:14:37.883

退出的进程不会自动导致其所有子进程被杀死。有关此问题的大量讨论，请参阅[此问题](https://stackoverflow.com/questions/269494/how-can-i-cause-a-child-process-to-exit-when-the-parent-does?)及其相关问题。

gzip 退出是因为包含其标准输入的管道在父级退出时关闭；它读取 EOF 并退出。但是，运行这两个命令的 shell 没有从标准输入读取，所以它没有注意到这一点。所以它只是继续并执行`echo`命令（也不会读取标准输入）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T23:38:23.003

`post_proc.kill()` 我相信这就是您要寻找的东西...但是您必须明确称呼它

见：[http ://docs.python.org/library/subprocess.html#subprocess.Popen.kill](http://docs.python.org/library/subprocess.html#subprocess.Popen.kill)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-25T16:53:29.810

我`try-finally`在这种情况下使用（不幸的是，您不能`with`像在 中那样使用`file.open()`）：

```
proc_args = "gzip --force file; echo this_still_prints > out"
post_proc = subprocess.Popen(proc_args, shell=True)

try:
    while True:
        time.sleep(1)
finally:
    post_proc.kill() 
```

# iis - WCat 从 WCat Scenario Creator 生成的 ubr 文件中抛出错误

> ID：12682584
> 
> 赞同：0
> 
> 时间：2012-10-01T23:36:26.250
> 
> 标签：iis, wcat

我使用 WCat Scenario Creator (http://fiddler2wcat.codeplex.com/) 通过网站生成许多请求的脚本。

我必须添加“端口：8888；” 对每一个请求。然后，在“所有客户端已连接，测试开始”之后。响应，测试产生了这个错误：

收到无效代码。接受远程连接时出错。

我知道前两个请求有效，所以下一个第三个请求出了什么问题是个问题。

请求看起来像

```
 request {
        id = "3";
        url = "/Content/Telerik-Kendo/textures/highlight.png";
        verb = GET;
        cookies = True;
        secure = False;
        statuscode = 304;
        setheader {
            name = "Accept";
            value = "image/png, image/svg+xml, image/*;q=0.8, */*;q=0.5";
        }
        setheader {
            name = "Referer";
            value = "http://server.compute-1.amazonaws.com:8888/Home/Winpoints/?sessionid=502hhfoij5ef4jedzouxz02z&low=0&high=150&companyid=3&verticalmarketid=8";
        }
        setheader {
            name = "Accept-Language";
            value = "en-US";
        }
        setheader {
            name = "User-Agent";
            value = "Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)";
        }
        setheader {
            name = "Accept-Encoding";
            value = "gzip, deflate";
        }
        setheader {
            name = "Host";
            value = "server.compute-1.amazonaws.com:8888";
        }
        setheader {
            name = "If-Modified-Since";
            value = "Thu, 27 Sep 2012 05:47:46 GMT";
        }
        setheader {
            name = "If-None-Match";
            value = ""0ed9e9e739ccd1:0"";
        }
        setheader {
            name = "Connection";
            value = "Keep-Alive";
        }
        setheader {
            name = "Cookie";
            value = "ASP.NET_SessionId=502hhfoij5ef4jedzouxz02z";
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T23:38:19.430

至少对于这个问题，答案是“If-None-Match”标头的值周围的双引号。

```
 setheader {
            name = "If-None-Match";
            value = ""0ed9e9e739ccd1:0"";
        } 
```

将其更改为具有 1 个打开和关闭双引号已修复它。

```
 setheader {
            name = "If-None-Match";
            value = "0ed9e9e739ccd1:0";
        } 
```

# xamarin.android - 按下 ImageButton 时更改图像

> ID：12682586
> 
> 赞同：1
> 
> 时间：2012-10-01T23:36:30.900
> 
> 标签：xamarin.android, imagebutton

我的 android 应用程序中有一个 ImageButton，我希望应用程序在按下按钮时更改图像，当用户释放按钮时，它会返回默认图像。

PS 我正在为 android 使用单声道，我必须以编程方式执行此操作，不幸的是我不能使用 XML 标记。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T02:56:19.147

您可以挂钩视图的[`Touch`](http://docs.mono-android.net/?link=E%3aAndroid.Views.View.Touch#)事件来做到这一点：

```
var button = FindViewById<ImageButton>(Resource.Id.MyImageButton);

button.Touch += (object sender, View.TouchEventArgs e) => {
    if (e.Event.Action == MotionEventActions.Down) {
        button.SetImageResource(Resource.Drawable.Icon);
    } else if (e.Event.Action == MotionEventActions.Up) {
        button.SetImageResource(Android.Resource.Drawable.IcMenuGallery);
    }
}; 
```

# jsf - 为什么在引用 @ManagedProperty 时会引发异常？

> ID：12682587
> 
> 赞同：0
> 
> 时间：2012-10-01T23:36:47.527
> 
> 标签：jsf, javabeans, icefaces

我有一个带有视图范围 bean 和会话范围 bean 的 JSF Web 应用程序。我想从视图 bean 修改会话 bean 的成员，并且我遵循了某个知名 JSF 人员的[这个指南，但如果没有运行时异常，我似乎无法让它工作。](http://balusc.blogspot.com.br/2011/09/communication-in-jsf-20.html#InjectingManagedBeansInEachOther)对托管会话 bean 的引用，“home”在引用时为空，类似于[这个问题](https://stackoverflow.com/questions/9036266/managedproperty-not-working)，除了我已经遵循了接受答案的建议。

```
package brian.canadaShipping;

import java.io.Serializable;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.ManagedProperty;
import javax.faces.bean.ViewScoped;

@ManagedBean(name= "requestBean")
@ViewScoped
public class CpstcRequestBean implements Serializable {

@ManagedProperty(value="#{home}")
private CpstcHomeBean homeBean;

public CpstcHomeBean getHomeBean() {
    return homeBean;
}

public void setHomeBean(CpstcHomeBean homeBean) {
    this.homeBean = homeBean;
}

private static final long serialVersionUID = -5066913533772933899L;

public String testVar = "hello world";
private boolean displayOutput = false;

public boolean isDisplayOutput() {
    return displayOutput;
}

public void setDisplayOutput(boolean displayOutput) {
    this.displayOutput = displayOutput;
}

public String getTestVar() {
    return testVar;
}

public void setTestVar(String testVar) {
    this.testVar = testVar;
}

public CpstcRequestBean()
{
    System.out.println("TEST: " + homeBean.toString());
    System.out.println("Hello, ResuestBean!");
}

} 
```

我的“home”bean 的第一部分如下：

```
@ManagedBean(name= "home")
@SessionScoped
public class CpstcHomeBean implements Serializable {
    ... 
```

**更新：**我遵循了 Jordan 的建议，并且在我的视图范围 bean 中有以下内容：

```
@ManagedBean(name= "requestBean")
@ViewScoped
public class CpstcRequestBean implements Serializable {

@Inject @Named("home") CpstcHomeBean homeBean;

public CpstcHomeBean getHomeBean() {
    return homeBean;
}

public void setHomeBean(CpstcHomeBean homeBean) {
    this.homeBean = homeBean;
}

public CpstcRequestBean()
{
    System.out.println("TEST: " + homeBean.toString());
    System.out.println("Hello, ResuestBean!");
}
... 
```

以及我的会话范围 bean 中的这个：

```
@Named("home")
@SessionScoped
public class CpstcHomeBean implements Serializable {
... 
```

但我的“家”bean 引用仍然为空。有任何想法吗？

**更新2：**事实证明，您必须在两个类中都使用@Named，而不仅仅是注入的类。我的网络应用程序现在加载，但有些元素是空白的。在我的控制台日志中，我看到“目标无法访问，标识符‘home’解析为空。” 我在 Tomcat 7 上运行，如果这会影响事情的话。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T00:18:16.057

您可以将会话 bean 的 @ManagedBean 更改为 @Named，然后将其注入到视图范围的 bean 中，或者您可以像这样引用会话 bean：

```
FacesContext fc = FacesContext.getCurrentInstance()
private CpstcHomeBean homeBean = (CpstcHomeBean)  fc.getApplication().evaluateExpressionGet(fc, "#{home}", CpstcHomeBean.class); 
```

# actionscript - 在 Actionscript 3 中模拟鼠标事件

> ID：12682596
> 
> 赞同：4
> 
> 时间：2012-10-01T23:37:43.247
> 
> 标签：actionscript, dispatchevent

给定舞台坐标 (x,y)，我想让我的 flash 应用程序的行为就像用户在位置 (x,y) 上单击一样。也就是说，像

```
function simulateClick(x:Number, y:Number):void{
    var e:MouseEvent = new MouseEvent(MouseEvent.CLICK, true, false, x, y)
    stage.dispatchEvent(e);
} 
```

我发现很多页面都在谈论这种事情，它们都给出了与上述类似的解决方案。但是，这并不等同于用户点击 (x,y)。有两个问题：

首先是e.stageX和e.stageY都是0，我不能直接设置。文档说它们是在设置 e.localX 和 e.localY 时计算的，但是当我在 dispatchEvent 之前设置 e.localX 时不会发生这种情况，也不会在事件侦听器中发生这种情况。

我可以用这样的东西重写我所有的事件监听器：

```
var p:Point = e.target.localToGlobal(new Point(e.localX, e.localY)); 
```

这是唯一的选择吗？

第二个问题是我的事件侦听器注册了舞台的孩子，而不是舞台本身。所以我需要找出调用 dispatchEvent 的目标。显然，Flash 能够确定目标应该是什么，即哪个对象拥有在位置 (x,y) 处可见的最高像素，因为它在用户实际点击时这样做。有没有一种简单的方法来获取这些信息，或者我应该编写自己的递归函数来做同样的事情？我目前正在使用 DisplayObjectContainer.getObjectsUnderPoint，但它并不完全正确。

我在 FlashDevelop 中写作，如果这有什么不同的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:18:30.677

`e.stageX/Y`为我正确填充...`getObjectsUnderPoint()`似乎也可以正常工作。我假设传递给的 x/y 值`simulateClick`是全局坐标？

编辑：正如评论中所指出的，必须在 InteractiveObject 实例上调度鼠标事件......相应地修改了代码。

```
import flash.display.Bitmap;
import flash.display.BitmapData;
import flash.display.DisplayObject;
import flash.display.InteractiveObject;
import flash.display.Sprite;
import flash.events.MouseEvent;
import flash.geom.Point;

public function simulateClick(x:Number, y:Number):void
{
    var objects:Array = stage.getObjectsUnderPoint(new Point(x, y));

    var target:DisplayObject;
    while(target = objects.pop())
    {
        if(target is InteractiveObject)
        {
            break;
        }
    }

    if(target !== null)
    {
        var local:Point = target.globalToLocal(new Point(x, y));

        var e:MouseEvent = new MouseEvent(MouseEvent.CLICK, true, false, local.x, local.y);
        target.dispatchEvent(e);
    }
}

public function addedToStage():void
{
    var parent:Sprite = new Sprite();
    stage.addChild(parent);

    var child:Sprite = new Sprite();
    child.name = 'child 1';
    child.graphics.beginFill(0xff0000, 1);
    child.graphics.drawRect(0, 0, 200, 200);
    child.graphics.endFill();

    var child2:Sprite = new Sprite();
    child2.name = 'child 2';
    child2.graphics.beginFill(0xff00ff, 1);
    child2.graphics.drawRect(0, 0, 100, 100);
    child2.graphics.endFill();
    child2.x = 150;
    child2.y = 150;

    var bmpData:BitmapData = new BitmapData(80, 80, false, 0x00ff00);
    var bmp:Bitmap = new Bitmap(bmpData);
    bmp.name = 'bitmap';

    child2.addChild(bmp);

    parent.addChild(child);
    parent.addChild(child2);

    child2.addEventListener(MouseEvent.CLICK, function(e:MouseEvent):void
    {
        trace('target: ' + e.target.name);
        trace('localX: ' + e.localX);
        trace('localY: ' + e.localY);
        trace('stageX: ' + e.stageX);
        trace('stageY: ' + e.stageY);
    });

    simulateClick(190, 190);
} 
```

输出：

```
target: child 2
localX: 40
localY: 40
stageX: 190
stageY: 190 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T00:16:01.077

对于问题 1：创建 MouseEvent（为其分配本地 x,y）后，您应该能够直接引用 e.stageX 并将其设置为您想要的，然后再调度事件。它只是 MouseEvent 实例的一个属性。对于#2，currentTarget 始终是鼠标下方最上面的东西，而 target 是发送事件的东西——假设事件是真正由鼠标交互发送的。在您的情况下，您可以将目标设置为您调度事件的任何对象，并任意设置 currentTarget。真正的问题是，这是否是目前处理鼠标下方内容的最有效方法？答案是，可能不是。最好使用 MOUSE_OVER 事件来密切关注鼠标现在所在的位置，将它存储为一个变量，当您想调用它时可以使用它，并且不要尝试一直迭代整个显示链（因为 Flash 本身的执行速度比您在循环中执行的速度要快得多）。如果您将 mouseOver 放在舞台上，并且只检查 currentTarget，那么您将在它更改的每一帧上获得鼠标下最上面的项目。

您应该知道（为了防止一些明显的讨厌的脚本），某些动作不能由动作脚本动态生成的鼠标事件触发。其中包括打开文件引用和全屏显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-30T18:54:33.107

我也遇到过这个问题，有点头疼。在我的情况下，我正在创建事件，执行一些复杂的计算，但即使我已经设置了局部坐标，我也无法检索全局坐标。

实际上，在我的情况下，解决方案非常明显...... **只有在事件被调度之后才会填充全局坐标**，否则事件如何知道如何将本地转换为全局？

这是另一个陷阱，**除了不检查用于调度事件的对象是否为 InteractiveObject 之外**。

我发布这个是因为其他人可能会因为这两个陷阱而面临这个问题。一个简单易读的快速答案。

# javascript - 下拉菜单上的仅 CSS 边框

> ID：12682603
> 
> 赞同：0
> 
> 时间：2012-10-01T23:38:27.153
> 
> 标签：javascript, html, css, wordpress

如果您将鼠标悬停在“技术”选项卡上，您会看到一个下拉菜单出现，但是，从选项卡的右下角到下拉菜单的右上角应该是一个边框。我怎么能只用css做到这一点？还是需要 JavaScript？

[开发网站在这里](http://graham.diggsdev.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T04:03:14.533

KI想我明白了

```
#menu .ddsmoothmenu li#menu-item-36 li:first-child {
    margin-top: -1px;
    border-top: 1px solid black;
    z-index: 10
}

#menu .ddsmoothmenu li a {
    font-family: 'Open Sans Condensed', sans-serif;
    letter-spacing: 0.02em;
    color: #816363;
    font-size: 1.03em;
    z-index: 30;
} 
```

打开时它看起来有点奇怪，您可以通过在幻灯片完成后将边框顶部样式放入子菜单来修复它。

# logic - 条件命题背后的自然直觉？

> ID：12682606
> 
> 赞同：0
> 
> 时间：2012-10-01T23:38:43.423
> 
> 标签：logic, discrete-mathematics

基本上我在推理出条件命题的真值表时遇到了麻烦 / P 暗示 Q / 如果 P 那么 Q / 等等。

从我的书和对谷歌的快速研究来看，似乎没有人解释定义定义的原因是什么，他们基本上都只是给你一个真值表并说接受它。我有能力做到这一点，但我完全看不出这 4 种组合的可能性如何代表一些连贯的概念或想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:54:24.137

答案是：它的设置方式是为了让其余的数学计算更容易。

我假设您在定义中发现的奇怪之处在于，如果您有`P -> Q`, 并且`P`是 False，那么您会觉得很奇怪，您不必处理此案。如果你继续学习你的数学课程，你会发现这实际上与从矛盾中你可以证明任何事情的想法一致。“如果`P`，那么`Q`”这句话的基本意思是“如果`P`是真的，那么它*一定*是`Q`真的，但如果不是，那么我做什么都没有关系。” `P`您可能会发现偶尔说“必须为真，然后也必须为真”更自然`Q`，但这对应于`P /\ Q`.

然而，在某种基本意义上，它只是被认为是理所当然的，它似乎对应于你在高层次上认为的暗示，但有十六种可能的逻辑关系（对于二元连接词......）。如果你调整逻辑，事情就会机械地运作，偶尔最好不要质疑它，因为有时你真的在高级直觉之前定义了真理，而不是相反。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T23:55:26.487

`P implies Q`方法

> 只要 P 为真，Q 就必须为真。然而，当 P 为假时，它并没有告诉我们关于 Q 的任何信息。

例如，考虑`P = 'go out in the rain'`和`Q = 'you will get wet'`。这与在雨中外出并被弄湿是一致的。这也与不在雨中外出和弄湿（你可以洗个澡）或保持干燥（你不接触里面的任何水）是一致的。但这与在雨中外出并保持干燥是不一致的。

这并不总是直观的原因是因为在自然语言中我们经常使用“如果”来表示“当*且仅当*”，所以`not P implies not Q`（例如“如果你打我，我会打你”）；我们通过上下文和常识来区分。但是布尔逻辑对此有一个单独的运算符（它只是`=`运算符）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-29T10:30:10.410

希望我的解释足够清楚，并且您会看到与我相同的光。让p=我今天给你买卷饼，q=你明天给我买卷饼。p, q 的真值表，如果 p 则 q

第一种情况- P 和 q 都为真

如果我今天给你买卷饼，那么理智要求你明天给我买卷饼，因为我今天对你很好，所以你应该以善报答。因此 IF P THEN Q 为真

第二种情况- p 为真，q 为假

如果我今天给你买卷饼，而你明天不给我买卷饼，我相信那是邪恶的，你不能以恶报善，因此如果 P THEN Q IS FALSE

第三种情况- p 为假，q 为真

如果我今天不给你买卷饼，而你明天给我买卷饼，那么你以善报恶是件好事，你对我很好，因此如果 P THEN Q 为真

第四种情况 - p 为假，q 为假

如果我今天不给你买卷饼，你明天不给我买卷饼，什么都不会发生，我们继续我们的生活，我不能指责你不给我买，或者如果我买了你，那么你的回复肯定是“以眼还眼，以牙还牙”，因此如果 P THEN Q 为真

# php - Codeigniter 在 xampp 上处理虚拟主机时删除 index.php

> ID：12682610
> 
> 赞同：2
> 
> 时间：2012-10-01T23:39:28.683
> 
> 标签：php, apache, .htaccess, codeigniter

我以前的文件夹树是（使用便携式 xampp）：（例如在 D：驱动器根目录上工作）

```
/xampp/htdocs/application
/xampp/htdocs/system
/xampp/htdocs/themes
/xampp/htdocs/index.php etc.. 
```

现在我正在尝试转变为一个可以处理多个项目的结构，因此是新树：

```
/xampp/htdocs
/web_projects/project-name/codeigniter/application
/web_projects/project-name/codeigniter/system
/web_projects/project-name/htdocs/themes
/web_projects/project-name/htdocs/index.php 
```

我在 htdocs 中的**htaccess文件：**

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 !^(index\.php|robots\.txt)

# if Serves works on Linux OS
RewriteRule ^(.*)$ index.php/$1

# if Server works on Windows OS
# RewriteRule ^(.*)$ index.php?/$1

RewriteCond %{REQUEST_FILENAME} !-f

# if Serves works on Linux OS
RewriteRule ^(application|modules|plugins|system|themes|library|files) index.php/$1 [L]

# if Server works on Windows OS
# RewriteRule ^(application|modules|plugins|system|themes|library|files) index.php?/$1 [L] 
```

和**httpd-vhosts.conf**：

```
NameVirtualHost *:8080

<VirtualHost *:8080>
    DocumentRoot "/xampp/htdocs"
    ServerName localhost
    <Directory "/xampp/htdocs">
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost>

<VirtualHost *:8080>
    DocumentRoot "/web_projects"
    ServerName welcome.localhost
    <Directory "/web_projects">
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost>

<VirtualHost *:8080>
    DocumentRoot "/web_projects/test/htdocs"
    ServerName test.localhost
    <Directory "/web_projects/test/htdocs">
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

最后**等/主机**：

```
127.0.0.1 localhost
127.0.0.1 welcome.localhost
127.0.0.1 test.localhost
127.0.0.1 vstart # Alias for test 
```

所有虚拟主机都在工作，即**http://vstart:8080/**正在工作，但 codeigniter 在地址行中没有 index.php 时无法运行，因此路由无法正常工作。

我的**config/config.php**文件是：

```
$config['base_url'] = ((isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] == "on") ? "https" : "http");
$config['base_url'] .= "://".$_SERVER['HTTP_HOST'];
$config['base_url'] .= str_replace(basename($_SERVER['SCRIPT_NAME']),"",$_SERVER['SCRIPT_NAME']);

$config['index_page'] = ''; 
```

这组在我以前的文件夹树中运行顺利，现在无法正常工作。我挖掘互联网以找到失败的解决方案。

有什么外眼可以捕捉到我做错的地方吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:36:12.623

找到了解决方案：

我需要做的就是将“AllowOverride All”添加到受人尊敬的虚拟主机中。

希望将来可以帮助某人。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-02T00:49:54.687

新项目应放在“ **htdocs** ”文件夹中

例子：

xampp/htdocs/ **new_project1** / index.htm

xampp/htdocs/ **new_project1** /css

xampp/htdocs/ **new_project1** /图像

xampp/htdocs/ **new_project2** / index.htm

xampp/htdocs/ **new_project2** /css

xampp/htdocs/ **new_project2** /images

# php - 使用 Javascript 设置值

> ID：12682612
> 
> 赞同：1
> 
> 时间：2012-10-01T23:39:42.727
> 
> 标签：php, javascript, html, forms

我有这个代码：

```
<html>
<head>

<script type="text/javascript">

/***********************************************
* Drop Down Date select script- by JavaScriptKit.com
* This notice MUST stay intact for use
* Visit JavaScript Kit at http://www.javascriptkit.com/ for this script and more
***********************************************/

var monthtext=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sept','Oct','Nov','Dec'];

function populatedropdown(dayfield, monthfield, yearfield){
     var today=new Date()
     var dayfield=document.getElementById(dayfield)
     var monthfield=document.getElementById(monthfield)
     var yearfield=document.getElementById(yearfield)
     for (var i=0; i<31; i++)
         dayfield.options[i]=new Option(i, i+1)
     dayfield.options[today.getDate()]=new Option(today.getDate(), today.getDate(), true, true) //select today's day
     for (var m=0; m<12; m++)
         monthfield.options[m]=new Option(monthtext[m], monthtext[m])
     monthfield.options[today.getMonth()]=new Option(monthtext[today.getMonth()], monthtext[today.getMonth()], true, true) //select today's month
     var thisyear=1920;  // fixed start year of 1900
     var nowyear = 1994;
     var diff = nowyear - thisyear +1; // number of years from 1900
     for (var y=0; y<diff; y++){
         yearfield.options[y]=new Option(thisyear, thisyear)
         thisyear+=1
     }
}
</script>

<script>
function getcombined(){
    var year = document.getElementbyId("yeardropdown").value;
    var month = document.getElementById("monthdropdown").value;
    var day = document.getElementById("daydropdown").value;
    var combineddob = year + "-" + "month" + "-" + day;
    document.getElementById("hidden1").value=combineddob
}
</script>

</head>

<body>
<form action="" name="someform">
<select id="daydropdown" name='day' value="daydropdown">
</select> 
<select id="monthdropdown" name='month' value="monthdropdown">
</select> 
<select id="yeardropdown" name='year'  value="yeardropdown">
</select> 
<input type='hidden' id='hidden1' name='dob' value="" />
<input type='submit' />
</form>

<script type="text/javascript">

window.onload=function(){
    populatedropdown("daydropdown", "monthdropdown", "yeardropdown")
}
</script>

</body>
</html> 
```

我需要`<input type='hidden' id='hidden1' name='dob' value='' />`更新到`var combineddob`提交表单的时间。

我尝试了几种方法，但我对 javascript 了解不多，所以我不擅长这些修复。

我可能正在寻找一些东西，但我还没有弄清楚这里有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T23:58:55.210

如果您希望在用户提交表单之前发生某些事情，您应该设置表单的[onsubmit](http://www.w3schools.com/jsref/event_form_onsubmit.asp)属性。在这种情况下：

```
<script>
<!--
function getcombined(){
    var year = document.getElementById("yeardropdown").value;
    var month = document.getElementById("monthdropdown").value;
    var day = document.getElementById("daydropdown").value;
    var combineddob = year + "-" + month + "-" + day;
    document.getElementById("hidden1").value=combineddob;
    return true;
}
-->
</script>

</head>

<body>
<form action="" name="someform" onsubmit='return getcombined();'> 
```

我在函数中添加了“return true”，以指示表单实际上应该在之后提交。我还修复了两个拼写错误，即 getElementbyId 中的小写 b 和缺少的分号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T23:45:25.230

改变你的html

```
<input type='submit' /> 
```

对此

```
<input type='submit' id="submitButton" /> 
```

在你的脚本中

```
window.onload = function(){
    populatedropdown("daydropdown", "monthdropdown", "yeardropdown");
    var submitBtn = document.getElementById("submitButton");
    submitBtn.onsubmit = function(){getcombined();};
}; 
```

这将允许您在`onsubmit`单击提交按钮时运行该函数。它将依次调用该函数`getcombined();`，然后提交表单。

**编辑**

也许你应该改变这两行：

```
var combineddob = year + "-" + "month" + "-" + day;
document.getElementById("hidden1").value=combineddob 
```

至

```
var combineddob = year + "-" + month + "-" + day;
document.getElementById("hidden1").value=combineddob; 
```

和

```
var year = document.getElementbyId("yeardropdown").value; 
```

to （注意`getElementbyId`不是函数）

```
var year = document.getElementById("yeardropdown").value; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T23:53:28.167

首先：

```
var year = document.getElementbyId("yeardropdown").value; 
```

至：

```
var year = document.getElementById("yeardropdown").value; 
```

在提交按钮中添加 onclick：

```
<input type='submit' onclick="getcombined();alert(hidden1.value);" /> 
```

# android - Android + Phonegap + Admob

> ID：12682613
> 
> 赞同：2
> 
> 时间：2012-10-01T23:39:47.223
> 
> 标签：android, cordova, admob

正如标题所示，我正在尝试使用 Phonegap 创建一个 Android 应用程序，然后尝试将 Admob 插入其中。

我正在使用Adob​​e 提供的[本教程](http://www.adobe.com/devnet/html5/articles/getting-started-with-phonegap-in-eclipse-for-android.html)，它运行良好。之后，当我使用Google 提供的[本教程](https://developers.google.com/mobile-ads-sdk/docs/admob/fundamentals)时，我遇到了问题。根据谷歌教程，我必须更改活动类，下面是原始代码，第二块代码是修改后的代码。似乎没有任何错误阻止它编译。只是当我尝试使用 Android 模拟器运行它时，我收到一条错误消息，指出“不幸的是 MyFirstPhonegapPlugin 已停止”

请注意，使用 Google 教程，有两种实现代码的方法，仅使用下面的类和混合使用 XML 和下面的类。我尝试了另一种方式，但由于出现无法编译的错误，我选择了这种方式。

```
package com.tricedesigns;
import org.apache.cordova.DroidGap;
import android.os.Bundle;

public class MyFirstPhoneGapPluginActivity extends DroidGap {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");
    }
} 
```

调整后的代码：

```
 package com.tricedesigns;

    import org.apache.cordova.DroidGap;
    import android.os.Bundle; 
    import com.google.ads.*;

    public class MyFirstPhoneGapPluginActivity extends DroidGap {
        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            super.loadUrl("file:///android_asset/www/index.html");
            // Look up the AdView as a resource and load a request.
            AdView adView = (AdView)this.findViewById(R.id.adView);
            adView.loadAd(new AdRequest());
          }
        } 
```

我正在使用 Phonegap 1.6.1 和适用于 Android 和 Admob 的最新 SDK

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T00:41:28.087

Phonegap 的实现方式，它几乎隐藏了有关 Android 的所有细节，并让您基本上将移动 Web 应用程序实现为原生应用程序。如果您想在本地实现 Android，我建议您阅读[Hello World](http://developer.android.com/training/basics/firstapp/index.html)教程。您在此处的代码正在崩溃，`AdView adView = (AdView)this.findViewById(R.id.adView);`因为您没有带有 id 的 AdView 元素的布局文件`adView`。

如果您对它的移动 Web 部分更感兴趣并计划继续使用 Phonegap，您最好尝试[这个插件](https://github.com/rajpara11/phonegap-plugins/tree/master/Android/AdMobPlugin)，它可以让您使用 Phonegap 框架进行 JavaScript 调用，并且该插件执行所有底层 Android 调用有必要获得广告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T15:10:04.540

[这是](https://github.com/sainttex/PhoneGap-Android-Native-AdMob)我正在寻找的功能齐全的项目

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-16T12:35:50.983

旧版本 phonegap 不支持外部 jar 库。但现在phonegap 增加了一些新功能。使用phonegap builder，添加配置添加一些配置

```
<gap:plugin name="com.admob.plugin" version="1.0.0" source="plugins.cordova.io"/> 
```

所以不再需要任何java代码。只需要一些js代码。

```
admob.initAdmob("admob banner ID","admob interstitial ID");
admob.showBanner(admob.BannerSize.BANNER,admob.Position.TOP_APP); 
```

这将在您的应用顶部创建并显示一个 admob 横幅。

# iphone - Facebook SDK 3.1 上的 iOS 6 本机支持问题

> ID：12682619
> 
> 赞同：3
> 
> 时间：2012-10-01T23:40:50.453
> 
> 标签：iphone, objective-c, ios, facebook

我在我的一个应用程序中使用 Facebook SDK 3.0，一切正常。如果已安装，则将用户重定向到 Facebook 应用程序，如果未安装，则将用户重定向到移动网站。

上周我集成了新的 SDK 3.1，以便与 Facebook 帐户进行原生集成。为此，我从：

```
[FBSession openActiveSessionWithPermissions:permissions
                               allowLoginUI:YES
                          completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
    /* My code here */

}]; 
```

现在已弃用新的：

```
[FBSession openActiveSessionWithPublishPermissions:permissions
                                   defaultAudience:FBSessionDefaultAudienceFriends
                                      allowLoginUI:YES
                                 completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
    /* My code here */

}]; 
```

在 iOS 5 上，没有任何改变，完美。在 iOS 6 上，它可以在我的设备上运行，但我有一些用户报告说系统正在询问他们的权限，但他们无法连接。

事实上，我有一个视频，即使在系统请求 Facebook 权限时单击“确定”，该应用程序也无法访问该帐户，甚至没有在系统偏好设置中注册。

这是视频：[http ://www.youtube.com/watch?v=JUHF9KNNg6M](http://www.youtube.com/watch?v=JUHF9KNNg6M)

如果我从系统中删除该帐户，一切都会像以前在 Facebook SDK 3.0 上预期的那样工作。

有人也遇到过这个问题吗？或者你知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T08:46:04.397

您是否将您的许可请求分开？

“iOS 6 中内置的身份验证对话框为开发人员提供了一种在其应用程序中使用 Facebook 登录的本地方式，而无需进行快速应用程序切换。请注意，要使用 iOS 6 本地身份验证，应用程序需要更改它们向用户请求权限的方式- 应用程序必须将它们的读取和写入权限请求分开。iOS 版 Facebook SDK 支持这些功能，并帮助开发人员使用它们来构建适用于多个 iOS 版本和设备配置的应用程序。

[https://developers.facebook.com/docs/howtos/ios-6/](https://developers.facebook.com/docs/howtos/ios-6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T18:09:24.220

可以发布您请求的权限吗？

iOS6 上的原生 Facebook 集成已弃用该`offline_access`权限，如果您尝试包含该权限，身份验证将失败。有关更多信息，请参阅[https://developers.facebook.com/docs/howtos/ios-6/](https://developers.facebook.com/docs/howtos/ios-6/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T10:22:16.063

我认为您的问题可能是您没有在 Facebook 上指定捆绑标识符。我也有，一旦我在 developer.facebook.com 中指定了捆绑标识符，一切都开始正常工作。

# pdf - 如何调整 EPS 文件的 BoundingBox？

> ID：12682621
> 
> 赞同：6
> 
> 时间：2012-10-01T23:41:25.587
> 
> 标签：pdf, ghostscript, postscript, eps

我想裁剪一个`PS`或`PDF`文件的主要区域以创建一个`EPS`没有空白的文件。`ghostrcipt`、`ps2pdf`、的命令`epstools`可以从文档文件中裁剪出主图。

问题是它们只以原始形式裁剪，但我想用`BoundingBox 0 0 x y`;创建一个 EPS 文件。裁剪并移动到左下角。

当我们想要在 PS 文档中插入生成的 EPS 文件时的区别。当有 时`BoundingBox x0 y0 x y`，PS 文档在点 x0 y0 处插入 EPS 文件，而不是我们所在的位置。

**例子：**

考虑一个简单的`PS`文件

```
%!
/Times-Roman findfont 
11 scalefont setfont

72 700 moveto
(This is a test)show 
```

如果`EPS`使用类似的命令将其转换为

```
ps2eps test.ps test.eps 
```

它会产生

```
%!PS-Adobe-2.0 EPSF-2.0
%%BoundingBox: 72 700 127 708
%%HiResBoundingBox: 72.000000 700.000000 127.000000 707.500000
%%EndComments
% EPSF created by ps2eps 1.68
%%BeginProlog
save
countdictstack
mark
newpath
/showpage {} def
/setpagedevice {pop} def
%%EndProlog
%%Page 1 1
/Times-Roman findfont 
11 scalefont setfont
72 700 moveto
(This is a test)show
%%Trailer
cleartomark
countdictstack
exch sub { end } repeat
restore
%%EOF 
```

它已在其原始坐标中进行裁剪，结果`BoundingBox`为`72 700 127 708`. 现在，如果尝试`EPS`在文档中插入此文件`PS`，它会尝试在此坐标处嵌套。

如果`EPS`使用`BoundingBox: 0 0 55 8`. 当然，所有绘图坐标（此处为 moveto）都必须使用此新参考进行修改。

**注意：**如前所述，我修复 BoundingBox 参考点的目的是使其可在 PS 文档中导入。因此，这个问题的另一个答案是：如何在 PS 文档中插入 EPS 文件，而不管它的 BoundingBox。

例如，如何将此 EPS 文件插入到`200 200 255 208`PS 文档的位置。我尝试使用以下代码插入 EPS，但除非 BoundingBox 从以下位置启动，否则它将不起作用`0 0`：

```
200 200 translate 
save 
/showpage {} bind def 
(test.eps)run 
restore 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T04:34:33.450

简单地*取消*翻译怎么样？

```
-72 -700 translate 
```

*是在*eps本身，还是在包含之前的准备部分？

* * *

*尴尬的！*

以下打字稿说明了一个 awk 脚本，该脚本在 DSC 注释的指导下对 eps 执行所需的修改（就像妈妈以前做的那样！）。

优点是：*如果*您可以保证输入 EPS 充分符合 DSC 以提供这些标记，那么这种方法将比*通过*ghostscript 传递文件快几个数量级。

简单性既是这个程序的优点也是局限性。它扫描 DSC 评论，从 BoundingBox 评论中提取值，抑制 HiResBoundingBox，并在 Page 评论之后添加 postscript 'translate' 和 'rectclip' commnds。只要 EPS 确实是真实的，这应该会产生正确的结果。但是另一个答案中的 ghostscript 方法会在输入文件上产生不太可靠的 DSC 一致性的结果（因为它不走捷径，它将 DSC 视为注释并完全忽略它们）。

严格来说，'rectclip' 不应该是必要的，但问题要求输出被“裁剪”。

```
592(1)11:27 AM:~ 0> cat epscrop.awk
/%%BoundingBox: ([^ ]*) ([^ ]*) ([^ ]*) ([^ ]*)/{x=$2;y=$3;w=$4-x;h=$5-y;print $1,0,0,w,h}
!/%%BoundingBox:/&&!/%%HiRes/{print}
/%%Page /{print -x,-y,"translate"; print 0,0,w,h,"rectclip"}

593(1)11:27 AM:~ 0> awk -f epscrop.awk etest.eps
%!PS-Adobe-2.0 EPSF-2.0
%%BoundingBox: 0 0 55 8
%%EndComments
% EPSF created by ps2eps 1.68
%%BeginProlog
save
countdictstack
mark
newpath
/showpage {} def
/setpagedevice {pop} def
%%EndProlog
%%Page 1 1
-72 -700 translate
0 0 55 8 rectclip
/Times-Roman findfont
11 scalefont setfont
72 700 moveto
(This is a test)show
%%Trailer
cleartomark
countdictstack
exch sub { end } repeat
restore
%%EOF 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T07:38:23.590

要将其转换为您想要的 BoundingBox 样式的 EPS，我会使用 Ghostscript 并让 EPS 进行往返：EPS => PDF => EPS。

诀窍是通过添加参数来确保 PDF 使用与 BoundingBox 宽度和高度相同的媒体大小`-dEPSCrop`。

这两个命令创建您*的“没有空格的 EPS”*：

**第一步：**将EPS转换为PDF：

```
gs                   \
  -o so#12682621.pdf \
  -sDEVICE=pdfwrite  \
  -dEPSCrop          \
   so#12682621.eps 
```

**第二步：**将PDF转换回EPS：

```
gs                                \
  -o so#12682621.roundtripped.eps \
  -sDEVICE=epswrite               \
   so#12682621.pdf 
```

要测试生成的 EPS 的保真度，您可以使用 ImageMagick`compare`将差异以红色像素形式显示为 PNG 文件：

```
 compare                      \
   -density 600               \
    12682621.roundtripped.eps \
    12682621.eps              \
   -compose src               \
    12682621.png 
```

这导致：![在此处输入图像描述](../Images/0cd9115ba6d134e170f07b66bff9de84.png)

您会注意到存在一些像素差异。它们是由 707.500000 的值引起的`%%HiResBoundingBox`，这会导致稍后出现舍入错误（PNG 不能有“半像素”）。

# sql - SQL Server 中的简单 INSERT 查询

> ID：12682626
> 
> 赞同：0
> 
> 时间：2012-10-01T23:41:53.400
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我正在寻找一种从 T2 插入数据库表 T1 的方法（追加操作_

表 1：dbo.t1

```
col1   col2
----   -----
1       ABC
2       ABCr  
3       ABCs
4       ABCd 
```

表 2：dbo.t2

```
col1   col2
----   -----
7       ABCe
8       ABCy 
```

现在，表 1 变为

```
col1   col2
----   -----
1       ABC
2       ABCr  
3       ABCs
4       ABCd
7       ABCe
8       ABCy 
```

SQL查询，我使用的是：

```
select * 
into dbo.t1
from dbo.t2 
```

我知道使用#temp 表太简单了。

我正在寻找一种方法，以便我只需将行从 T2 附加到 T1 并保持性能。T1 的现有行根本没有接触。

任何帮助都会有所帮助。

谢谢 ！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T23:43:10.067

这回答了你的问题了吗？它将Table2中的所有记录插入到Table1的末尾（并且不触及Table1中的现有记录）

```
insert into Table1 (col1, col2) (select col1, col2 from Table2) 
```

# crystal-reports - 在水晶报告中，如何让默认值出现在空值上？

> ID：12682629
> 
> 赞同：0
> 
> 时间：2012-10-01T23:42:16.520
> 
> 标签：crystal-reports, null, formula

我正在使用 VS 2010，但我不确定 Crystal 报告是哪一年。2008 年还是 2010 年？当日期字段为空时，我想显示“N/A”。这是我的公式

```
 If isnull({usp_print_get;1.Cit_Date}) then 'its null' else 'not null' 
```

当有日期时它会打印“不为空”，但如果没有日期，它只会将空格留空而不是打印“它的空”我已经检查了数据库并且该记录的日期字段确实为空并且不是空格或空字符串。任何帮助表示赞赏。最终，我想在其为空或实际 Cit_Date 时打印“N/A”。现在我只是用字符串来测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T10:46:23.160

查看您的公式，它应该可以工作，只是语法很奇怪。使用双引号而不是单引号。

```
IF isnull({usp_print_get;1.Cit_Date}) THEN 
  "N/A"
ELSE
  " " 
```

但是，如果您想在此公式中使用日期，则必须将其转换为字符串。输出必须是相同的数据类型，它会弄乱 Formatting 选项。

```
IF isnull({usp_print_get;1.Cit_Date}) THEN 
  "N/A"
ELSE
  TO_TEXT({usp_print_get;1.Cit_Date}, "MM-dd-yyyy") 
```

以您想要的方式格式化日期。

如果您正在调试，请将公式和日期列并排放在报告中。
更容易检查它是否正常工作。

# powershell - 将 Powershell 对象的类型名称从 PSCustomObject 更改为我选择的名称？

> ID：12682631
> 
> 赞同：5
> 
> 时间：2012-10-01T23:42:58.603
> 
> 标签：powershell

我有一个使用自定义对象的脚本。我用这样的伪构造函数创建它们：

```
function New-TestResult 
{
    $trProps = @{
        name = "";
        repo = @{};

        vcs   = $Skipped;

        clean = New-StageResult; # This is another pseudo-constructor
        build = New-StageResult; # for another custom object.
        test  = New-StageResult; #     - Micah

        start = get-date;
        finish = get-date;
    }

    $testResult = New-Object PSObject -Property $trProps
    return $testResult
} 
```

这些很有用，因为它们可以传递给类似的东西`ConvertTo-Csv`或`ConvertTo-Html`（不像，说，哈希表，否则会实现我的目标）。它们被键入为`PSCustomObject`对象。这段代码：

```
$tr = new-testresult
$tr.gettype() 
```

返回这个：

```
IsPublic IsSerial Name                     BaseType
-------- -------- ----                     --------
True     False    PSCustomObject           System.Object 
```

我可以将`Name`那里返回的字段更改为其他字段`PSCustomObject`吗？

稍后当我整理测试结果时，我将传递给另一个函数，有时是单个结果，有时是一组结果。我需要能够做一些不同的事情，具体取决于我得到的那些。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-02T00:09:27.920

当然，在创建 $testResult 后试试这个：

```
$testResult.psobject.TypeNames.Insert(0, "MyType") 
```

PowerShell 扩展类型系统的核心是 psobject 包装器（至少在 V1 和 V2 中）。此包装器允许您添加属性和方法、修改类型名称列表并获取底层 .NET 对象，例如：

```
C:\PS > $obj = new-object psobject
C:\PS > $obj.psobject

BaseObject          :
Members             : {string ToString(), bool Equals(System.Object obj), int GetHashCode(), type GetType()}
Properties          : {}
Methods             : {string ToString(), bool Equals(System.Object obj), int GetHashCode(), type GetType()}
ImmediateBaseObject :
TypeNames           : {System.Management.Automation.PSCustomObject, System.Object} 
```

或者从提示符尝试这个：

```
C:\PS> $d = [DateTime]::Now
C:\PS> $d.psobject
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-05T23:39:23.580

我创建了一个特殊的 cmdlet 来快速检测 powershell 下对象的类型名称。

对于自定义对象，`.getType()`Method 无法获取 ETS 类型名称。

```
 function Get-PsTypeName {
    [CmdletBinding()]
    Param(
        [Parameter(Mandatory = $true,
            ValueFromPipeline = $true)]
        $InputObject
    )

    begin {

    }

    process {
        ((Get-Member -InputObject $InputObject)[0].TypeName)
    }

    end {
    }
} 
```

# java - 尝试识别整数时遇到问题

> ID：12682636
> 
> 赞同：1
> 
> 时间：2012-10-01T23:43:35.227
> 
> 标签：java, integer

我通常可以通过输入 int something = 0; 来识别一个整数；初始化什么的。

这次我想得到一个整数，就像我从 JtextArea 做一个字符串一样。

```
 String strcname = cname.getText();
            **int strage = age.getInt();**
            String stremail = email.getText();
            String strphone = phone.getText(); 
```

显然我在这里遇到了一个错误，但不知道如何将这个排除为整数有什么想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T23:46:21.777

你可以使用：

```
int strage = Integer.parseInt(age.getText()); 
```

# c# - 为 StyleCop 拼写检查指定 CustomDictionary 文件的路径

> ID：12682642
> 
> 赞同：13
> 
> 时间：2012-10-01T23:44:48.823
> 
> 标签：c#, .net, spell-checking, stylecop

评论的拼写检查已添加到 StyleCop 的最新版本中。看来我可以用 StyleCop 重用我现有的 CustomDictionary 文件（我为 FxCop 创建的）。SA1650 规则[文档](http://www.stylecop.com/docs/SA1650.html)并没有说这是可能的。但在4.7.39 版的[发行说明](http://stylecop.codeplex.com/downloads/get/386813)中，我看到了

> 添加对在 settings.StyleCop 文件中指定字典文件夹的支持。

如何配置 StyleCop 以在我的解决方案的根文件夹中搜索此文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-26T11:06:31.663

就我而言，当我在 .csproj 文件旁边的 Settings.StyleCop 文件中指定自定义字典条目时，它起作用了。

```
<GlobalSettings>
  <StringProperty Name="MergeSettingsFiles">NoMerge</StringProperty>
  <CollectionProperty Name="RecognizedWords">
    <Value>word1</Value>
    <Value>word2</Value>
    ...
  </CollectionProperty>
</GlobalSettings> 
```

实际上，StyleCopSettingsEditor.exe 实用程序为我创建了这些设置。我使用 Visual Studio 中项目的上下文菜单打开它，使用“StyleCop 设置”菜单项。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-31T02:37:01.297

`Settings.StyleCop`在解决方案根目录中添加一个名为的文件，其内容如下：

```
<StyleCopSettings Version="105">
  <GlobalSettings>
    <CollectionProperty Name="DictionaryFolders">
      <Value>**my-dictionary-folder**</Value>
    </CollectionProperty>
  </GlobalSettings>
</StyleCopSettings> 
```

替换`my-dictionary-folder`为包含 CustomDictionary.xml 文件的文件夹的相对路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T11:32:43.350

根据规则[SA1650的 StyleCop 文档](http://www.stylecop.com/docs/SA1650.html)

> CustomDictionary.xml 文件应与 StyleCop.dll 和规则放在同一文件夹中。检查该文件夹（和所有子文件夹）的字典文件。StyleCop 加载 CustomDictionary.xml、CustomDictionary.en-GB.xml，然后是 CustomDictionary.en.xml（其中 en-GB 是 Settings.StyleCop 文件中指定的区域性）。StyleCop 还加载 custom.dic、custom.en-GB.dic 和 custom.en.dic（其中 en-GB 是 Settings.StyleCop 文件中指定的区域性）。还可以使用拼写选项卡上的设置编辑器将识别的单词添加到 Settings.StyleCop 文件中。

因此，您似乎必须将 CustomDictionary.xml 的副本放在该特定位置而不是解决方案文件夹的根目录中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T03:38:27.480

一个类似的问题已经在这里[http://stylecop.codeplex.com/workitem/7422](http://stylecop.codeplex.com/workitem/7422)被问过，这里有一张公开的票[http://stylecop.codeplex.com/workitem/7435](http://stylecop.codeplex.com/workitem/7435)我相信它会提供你正在寻找的东西因为如果它完成了。

# python - Determining if a MIME email part is a file or message text

> ID：12682644
> 
> 赞同：4
> 
> 时间：2012-10-01T23:45:01.243
> 
> 标签：python, email, mime, email-attachments, email-headers

As part of some email batch processing, we need to decode and *clean up* the messages. One critical part of that process is separating the mail bodies of a message and the mail attachments. The trickiest part is to determine when a `Conent-Disposition: inline` part is to be considered a message body alternative or a file.

So far, this code seems to handle most of the cases:

```
from email import message_from_string

def split_parts(raw):
    msg = message_from_string(raw)
    bodies = []
    files = []

    for sub in msg.walk():
        if sub.is_multipart():
            continue
        cd = sub.get("Content-Disposition", "")
        if cd.startswith("attachment") or (cd.startswith("inline") and
                                           sub.get_filename()):
            files.append(sub)
        else:
            bodies.append(sub)

    return bodies, files 
```

Note the reliance on the inline parts to have a filename specified in the headers, which Outlook seems to do for all its `multipart/related` messages. The `Content-ID` could also be used as a hint, but according to the [RFC 2387](http://www.ietf.org/rfc/rfc2387) it is not such an indicator.

Therefore, if an embedded image is encoded as a message part that has `Content-Disposition: inline`, defines a `Content-ID` and doesn't have a filename then the above code can mistakenly classify it as a message body alternative.

From what I've read from the RFC's, there's not much hope on finding an easy check (specially since coding according to the RFCs is almost useless in the real world, because nobody does it); but I was wondering how big the chances are to hit the misclassification case.

* * *

## Rationale

I could have a set of functions to treat each `multipart/*` case and let them indirectly recurse. However, we don't care so much about a faithful display; as a matter of fact, we filter all HTML messages through [tidy](http://tidy.sourceforge.net/). Instead, we are more interested in chosing one of the message body alternatives and saving as many attachments as possible, even if they are intended to be embedded.

Furthermore, some user agents do really weird things when composing `multipart/alternative` messages with embedded attachments that are not intended to be displayed inline (such as PDF files), as a result of the user dragging and dropping an arbitrary file into the composition window.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T17:53:48.243

I'm not quite following you, but, if you want bodies, I would assume anything with a text/plain or text/html content type, with an inline content disposition, with no file name or no content-id, could be a body part.

# mysql - 为 MySQL 索引添加唯一性

> ID：12682647
> 
> 赞同：0
> 
> 时间：2012-10-01T23:46:14.803
> 
> 标签：mysql, database, unique-key

关于如何从 MySQL 中删除键的唯一性有很多答案，但没有关于如何添加它的答案。

有什么办法可以将 KEY 变成 UNIQUE KEY？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T23:48:44.350

```
ALTER TABLE sales.order ADD UNIQUE(order_ref); 
```

[从http://dev.mysql.com/doc/refman/5.1/en/alter-table.html](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)窃取的示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T23:51:20.997

使用 phpmyadmin 更直观的方式，在浏览表格时单击**结构。**在页面底部有“索引”部分，您可以使用编辑按钮管理键和类型。

# rabbitmq - 如何在关闭时重新初始化 DefaultConsumer 的频道

> ID：12682650
> 
> 赞同：0
> 
> 时间：2012-10-01T23:46:39.887
> 
> 标签：rabbitmq

我正在使用 RabbitMQ DefaultConsumer

```
public void init () {

  DefaultConsumer dc = new DefaultConsumer(channel);

  dc.addShutdownListener(this);

}

handleShutdownSignal() {
   //TODO: Recreate channel associated with this consumer
} 
```

一旦通道出现错误并发送关闭信号，我该如何重新初始化通道，因为消费者已经依赖于它使用的前一个通道？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T02:54:53.177

您将需要重新建立连接，创建一个通道，然后创建一个新的消费者。如果连接仍然正常，您可以使用它来获取新频道。

# django - Django 真的已经安装了 MySQL 后端吗？

> ID：12682652
> 
> 赞同：0
> 
> 时间：2012-10-01T23:47:03.210
> 
> 标签：django, settings, mysql-python

我需要在 Django 中使用 mysql 后端。设置文件中的文档说只使用“django.db.backends.mysql”，这也记录在[https://docs.djangoproject.com/en/dev/ref/settings/#engine](https://docs.djangoproject.com/en/dev/ref/settings/#engine)

当我将数据库设置引擎设置为“django.db.backends.mysql”时，Django 出错。

我在网上找到了需要安装 MySQLdb 的参考资料。但是，我在我的站点包中查找 django/db/backends/sqlite3 和 django/db/backends/mysql。

所以，看起来我有 Django 后端。我是否安装了 MySQL 后端但有配置问题，或者我需要安装 MySQLdb 包以允许后端工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T00:14:59.747

`django.db.backends.mysql`是 MySQLdb 的包装器；您需要安装 MySQLdb 才能使其工作，否则它会在启动时引发 ImproperlyConfigured 异常。

Django 数据库后端通常是这样工作的——它们依赖于较低级别的数据库接口库，但它们为 ORM 层提供了统一的接口。

唯一可以“开箱即用”的后端是 SQLite，但该后端也不例外，只是 SQLite 接口内置于 python 发行版中，因此几乎可以保证它存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T23:53:27.087

您必须安装 MySQLdb 才能使用 MySQL 作为数据库后端。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T00:07:03.287

如果您阅读[文档](https://docs.djangoproject.com/en/1.4/topics/install/#database-installation)，它会指出，

> 如果您计划使用 Django 的数据库 API 功能，则需要确保数据库服务器正在运行。

所以是的，您需要安装 MySQL 服务器才能使后端正常工作。

# python - python数组值神秘地变化

> ID：12682655
> 
> 赞同：0
> 
> 时间：2012-10-01T23:47:22.350
> 
> 标签：python, arrays

我对以下行为感到非常困惑：

```
 gap_in_y[i][j] = max((scoreMatrix[i-1][j] - dy), (gap_in_y[i-1][j] - ey))
  if i == 3 and j == 1:
    print gap_in_y
  gap_in_x[i][j] = max((scoreMatrix[i][j-1] - dx), (gap_in_x[i][j-1] - ex))
  if i == 3 and j == 1:
    print gap_in_y 
```

这两个 print 语句生成的数组在一个值上完全不同：包含在`gap_in_y[3][1]`. 修改`gap_in_x`，一个单独的数组，不应该影响`gap_in_y`......但是，它会以某种方式影响。

有任何想法吗？我一直在疯狂地试图弄清楚这一点！

我以下列方式创建了两个数组：

```
for i in range (0, ALength+1):
    for j in range (0, BLength+1):
        new.append("N/A")
    gap_in_y.append(new)
    gap_in_x.append(new)
    new = [] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T23:56:13.760

`gap_in_y`如果不查看和是如何创建的，就很难判断`gap_in_x`，但这里可能发生的情况是`gap_in_y[3]`和`gap_in_x[3]`都是对同一个列表的引用，因此修改一个将修改另一个。您可以通过添加以下代码来检查这一点：

```
if i == 3:
    print id(gap_in_y[3]) == id(gap_in_x[3]) 
```

如果这曾经打印`True`，那么您知道您在两个嵌套列表中都有相同列表的副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T00:40:02.853

当你这样做时：

```
gap_in_x.append(new)
gap_in_y.append(new) 
```

两个列表都将引用同一个对象`new`。

最简单的解决方案可能是将其更改为：

```
gap_in_x.append(new[:])
gap_in_y.append(new[:]) 
```

（假设`new`是一个列表）。

切片运算符`[:]`将创建列表的副本，`new`因此每个列表都将收到自己的副本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T00:42:40.590

我看到，当您创建数组时，您创建了一个新列表，并将这个相同的列表附加到`gap_in_x`和`gap_in_y`列表中。因此它们现在包含相同的列表，并且其中的任何突变都会自然地从任一父列表中看到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T03:18:53.103

不是追加 new，而是追加 new[:]，这将为每个 gap_in_* 创建一个 new 副本，就像您现在拥有的那样，它将相同的列表放入每个 gap_in_* 中。

```
for i in range (0, ALength+1):
    for j in range (0, BLength+1):
        new.append("N/A")
    gap_in_y.append(new[:])
    gap_in_x.append(new[:])
    new = [] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T03:37:46.397

其他答案指出了当前代码的问题。我只是想建议一种创建列表的替代方法，使用列表乘法和列表推导而不是显式循环和`append()`：

```
gap_in_x = [["N/A"] * (BLength + 1) for _ in range(ALength + 1)]
gap_in_y = [["N/A"] * (BLength + 1) for _ in range(ALength + 1)] 
```

请注意，您不想对外部列表（例如`[["N/A"] * BLength] * ALength`）使用列表乘法，因为这会导致与您已经拥有的类似的问题，其中所有内部列表将是彼此的副本（尽管在同一个这次是外部数组，而不是跨越两个）。内部列表很好，因为字符串是不可变的。部分（或全部）`N/A`s 是否引用同一个对象并不重要，因为该对象无法修改。

# file - VS 2012：将解决方案资源管理器滚动到当前文件

> ID：12682656
> 
> 赞同：475
> 
> 时间：2012-10-01T23:47:24.200
> 
> 标签：file, visual-studio-2012, solution-explorer

VS2010 具有查看文件会自动导致解决方案资源管理器滚动到该文件的功能。

使用 VS2012，从 IDE 中查看不同的文件不再滚动并自动在解决方案资源管理器中选择文件。

是否有可能恢复此功能？有地方设置吗？如果是这样，如何/在哪里？

* * *

## 回答 #1

> 赞同：819
> 
> 时间：2012-10-02T00:08:59.610

是的，你可以在下面找到

> 工具 -> 选项 -> 项目和解决方案 -> 在解决方案资源管理器中跟踪活动项目

默认情况下它是关闭的（正如您已经注意到的），但是一旦打开，解决方案资源管理器将在您在文件之间切换时展开文件夹并突出显示当前文档。

* * *

## 回答 #2

> 赞同：313
> 
> 时间：2013-01-08T21:24:57.630

如果您需要与解决方案窗格进行一次性同步，则有一个新命令“与活动文档同步”（默认快捷方式：`Ctrl`+ `[`、、`S`）。此处解释：[Visual Studio 2012 新功能：解决方案资源管理器](https://docs.microsoft.com/archive/blogs/zainnab/visual-studio-2012-new-features-solution-explorer)

* * *

## 回答 #3

> 赞同：113
> 
> 时间：2013-06-10T11:43:01.600

如果您安装了 ReSharper，单击++`Shift`会将焦点移至解决方案资源管理器中的当前文件。`Alt``L`

如接受的答案中所述，还需要启用活动项目跟踪

> 工具->选项->项目和解决方案->在解决方案资源管理器中跟踪活动项目

* * *

## 回答 #4

> 赞同：47
> 
> 时间：2015-05-28T21:12:35.290

有很多方法可以做到这一点：

**转到当前文件一次：**

*   **视觉工作室 2013**

    VS 13 有它自己的快捷键：`Ctrl`+ `\`，`S`（按`Ctrl`+ `\`，释放两个键，按下`S`键）

    `SolutionExplorer.SyncWithActiveDocument`如果您在`Keyboard Settings`(Tools->Options->Enviornment->Keyboard)中搜索，您可以编辑此默认快捷方式

    此外，解决方案资源管理器中还有一个新图标，更多信息请[点击此处](https://stackoverflow.com/a/27771877/2167804)。

    [![与 VS2013 中的活动文档按钮同步 - 解决方案资源管理器](../Images/94e373d13dcb6115088fd9abd08510ca.png)](https://i.stack.imgur.com/8RmfS.png)

*   **视觉工作室 2012**

    如果你使用 VS 2012，有一个很棒的插件可以将这个[新功能](https://visualstudiogallery.msdn.microsoft.com/291836cc-febe-44ad-86b0-b745485110e7)从 VS2013 添加到 VS2012：. 默认快捷方式是`strg`+ `alt`+ `ü`。我认为这是最好的，因为导航到解决方案资源管理器被映射到`strg` + `ü`。

*   **锐器**

    如果你使用**Resharper**试试`Shift`++`Alt``L`

    *这是一个很好的映射，因为您可以使用`Strg`++`Alt`导航`L`到解决方案资源管理器*

**一直跟踪当前文件：**

*   **视觉工作室 >= 2012**：

    如果您想一直在解决方案资源管理器中跟踪当前文件，则可以使用已接受答案中的解决方案（工具->选项->项目和解决方案->在解决方案资源管理器中跟踪活动项目），但我认为这可以在大型项目中变得非常烦人。

* * *

## 回答 #5

> 赞同：31
> 
> 时间：2015-08-20T10:57:59.090

如果您没有安装 ReSharper，但仍想使用快捷键++`Shift`将焦点移至 Visual Studio 2013 的解决方案资源管理器中的当前文件，请按照以下步骤操作：`Alt``L`

1.  转到工具->选项并在搜索选项文本框中搜索“键盘”：

[![在此处输入图像描述](../Images/ee7de27ac73d6275a7beecc81e80dd78.png)](https://i.stack.imgur.com/SlJVP.png)

2.  在 Show commands contains 框中键入“solutionexplorer”，然后在下面的列表中查找 SyncWithActiveDocument 命令： [![在此处输入图像描述](../Images/06d0fbe64e190fc0fc7822a45c7ad5c2.png)](https://i.stack.imgur.com/KKLED.png)

3.  单击“Press short keys”标签下的文本框，然后按：`Shift`+ `Alt`+`L`并单击“分配”按钮，您就完成了： [![在此处输入图像描述](../Images/2fba04b5e18e034ac379e050ee64896c.png)](https://i.stack.imgur.com/JrVTf.png)

要验证在 Visual Studio 中打开任何文件并按快捷键`Shift`++ ，您将在解决方案资源管理器中看到该文件`Alt`。`L`享受！

* * *

## 回答 #6

> 赞同：29
> 
> 时间：2016-11-15T14:30:30.647

在 VSS 中可以通过三种方式实现。

1.  您可以单击`Active sync`解决方案资源管理器上的图标。

[![VSS Active 同步与解决方案资源管理器中的图标](../Images/6bacf1c24fb7955411121f9d0eb1fe41.png)](https://i.stack.imgur.com/GfzUl.png)

2.  通过选择工具中的活动同步复选框（***工具 > 选项 > 项目和解决方案 > 常规***）。在那检查解决方案资源管理器中的跟踪活动项目复选框。当您在主窗口中选择一个文件时，它将自动导航到资源管理器中的活动文件。

[![VSS_Tools_Active_sync](../Images/9e9abc29c102d3f749ee0a2572fc3164.png)](https://i.stack.imgur.com/jjejQ.png)

3.  通过使用快捷键 ( *`Ctrl`*+ *`[`*+ *`S`*)，您可以导航到活动项目。

***注意：1 或 2 仅在同一时间内有效。***. 所以你必须使用第一个或第二个。

* * *

## 回答 #7

> 赞同：16
> 
> 时间：2015-06-03T06:20:42.993

我发现`Sync with Active Document`解决方案资源管理器中的按钮是最有效的（这可能是 vs2013 的功能！）

![在此处输入图像描述](../Images/6f98297d8edd0d0862c1c6c4ac5df48e.png)

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2019-04-09T13:57:25.607

在**Visual Studio 2017**上，快捷方式是：`Ctrl`+ `´`, `S`.

[![在此处输入图像描述](../Images/f128dee573bcfd968c816fa639aa51cf.png)](https://i.stack.imgur.com/ajnJH.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-01T14:39:07.617

视觉工作室 2019

工具 => 选项

[![在此处输入图像描述](../Images/ca05c5c48c07de121852697e3cf4abc4.png)](https://i.stack.imgur.com/lcPLn.png)

# iphone - 无法使用 Xcode 4.5 禁用调试器

> ID：12682658
> 
> 赞同：1
> 
> 时间：2012-10-01T23:47:43.667
> 
> 标签：iphone, ios, xcode4.5

我的应用程序在 Xcode 4.5 上运行非常慢，我刚刚意识到这是由于调试器始终处于打开状态。看来您不能在 Manage Schema/Release/Debugger 下选择 NONE，那么如何在 Xcode 4.5 上禁用调试器？

提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:57:11.150

缓慢不太可能是由于附加了调试器。速度很慢更有可能是由于在调试而不是发布模式下编译造成的。调试不会优化代码。发布确实如此。您可以将配置切换到 Release，它应该会加快速度，但更难调试。如果您愿意，可以创建单独的调试和发布方案。

请注意，此处重要的 Debug 和 Release 的具体区别在于编译器优化。调试通过“-O0”。发布通过“-Os”。您当然可以创建一个通过“-Os”而不更改其他内容的调试配置（例如关闭断言，如果您的发布配置这样做）。

# objective-c - UILabel调整高度不起作用

> ID：12682659
> 
> 赞同：0
> 
> 时间：2012-10-01T23:47:48.227
> 
> 标签：objective-c, ios, xcode

我有以下代码来调整标签的高度，但它不起作用。它显示带有.....的文本我做错了什么？

```
float storeAddress1YOffset=10;
float storeAddress1XWidth=scrollView.frame.size.width;
float storeAddressLabel1YHeight=15;
UILabel *storeAddressLabel=[[UILabel alloc]initWithFrame:CGRectMake(Xoffset,storeSectionHeight+ storeAddress1YOffset,storeAddress1XWidth, storeAddressLabel1YHeight) ];
storeAddressLabel.font=[UIFont fontWithName:@"GillSans" size:15.0f];
currentHeight=currentHeight + storeAddress1YOffset + storeAddressLabel1YHeight;
[storeAddressLabel setText:fullAddress];

CGRect labelFrame = storeAddressLabel.frame;
labelFrame.size = [fullAddress sizeWithFont:storeAddressLabel.font
                            constrainedToSize:CGSizeMake(storeAddressLabel.frame.size.width, CGFLOAT_MAX)
                                lineBreakMode:storeAddressLabel.lineBreakMode];
storeAddressLabel.frame = labelFrame; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:05:22.950

你的代码似乎对我有用。您没有实例化一些变量：

```
float Xoffset = ?;
float storeSectionHeight = ?;
float currentHeight = ?;
NSString *fullAddress = @"?"; 
```

除了您没有显示任何关于`scrollView`或添加`storeAddressLabel`到（我假设）`scrollView`作为子视图的详细信息。

当我使用 plain 填充这些缺失的部分时，`UIView`标签似乎已正确调整为 test string `fullAddress`。请包含更多您的代码，包括这些缺失的部分。

# php - 创建/编辑 php 动态页面

> ID：12682660
> 
> 赞同：0
> 
> 时间：2012-10-01T23:48:02.663
> 
> 标签：php, mysql, dynamic, phpmyadmin, craigslist

好的，我有一个动态页面，人们可以在其中发布城市中的事件，我们将调用该页面：city.php。但是，为了访问该页面，您必须从 states.php 中选择一个州，然后从 allcities.php 中选择一个城市。州和城市都在mysql数据库中。在 city.php 页面上，您可以单击“添加事件”，它将带您到 createevent.php，您可以在其中创建和添加显示在 city.php 上的事件。但这是我想做的：

我想让 city.php 成为为该城市发布不同内容的中心点。我想要一个关于事件、新闻、工作和出售的页面。在 city.php 上，您将为这些页面选择一个链接，将您带到 events.php、news.php、jobs.php 和 sale.php 等页面。如何使所有这些页面保持动态并与所选城市相关？我玩弄了一圈，想不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:54:42.137

在 PHP 中有很多方法可以做这样的事情。我个人不同意你的方法，因为它听起来。不过，我对你所说的似乎是错误的。

正如亚当所说，$_SESSION 是首先想到的。您还可以查看 $_COOKIE： [http://php.net/manual/en/features.cookies.php](http://php.net/manual/en/features.cookies.php)

或者只是将城市 ID 作为 $_GET 变量传递： [http ://www.yoursite.com/events.php?city=2](http://www.yoursite.com/events.php?city=2)

然后像这样在 PHP 中阅读它

```
$city_id = $_GET['city']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T23:52:52.327

我不确定我是否理解您的意思，但您是否希望变量跨越到其他页面？看看 PHP 对会话的使用。会话非常方便，它本质上允许您将站点范围的变量关联到每个用户。

[http://php.net/manual/en/features.sessions.php](http://php.net/manual/en/features.sessions.php)

基本上在每个页面的顶部放置：

```
session_start(); 
```

然后分配/访问您只需调用的会话变量：

```
$_SESSION['city'] = $city; 
```

或者

```
echo $_SESSION['city']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T23:55:27.080

非常通用，但关键在于关系数据库结构。显示很容易，因此请确保新闻、工作、事件表具有`id_city`构建正确查询的功能。

示例 DB 样式作为对您的评论的回答：

```
cities : id_city | city_name | city_slug | id_state
events : id_event | id_city | event_name | other_event_data | ...
jobs   : id_jobs | id_city | job_name | job_salary | etc. 
```

所以用户点击`yoursite.com/washington`

然后您可以查询来自 url（这里是华盛顿）的查询，例如：

```
SELECT id_city FROM cities WHERE city_slug = "washington" 
```

你现在有了 id_city。那么如果是工作，

```
SELECT * FROM jobs WHERE id_city = "above gotten id_city" 
```

希望这可以帮助。

# java - 优化 Android 上的画布绘制

> ID：12682661
> 
> 赞同：0
> 
> 时间：2012-10-01T23:48:04.533
> 
> 标签：java, android, bitmap, android-canvas

我不确定为什么我的代码（稍微）滞后，并且不能以相同的速度可靠地运行——我想我一定是做错了什么，因为许多其他游戏都非常流畅。我的 Renderer 类中的相关代码在这里：

```
public void drawPicString(Location location, String string,
        RenderParams params) {
    //canvas.save();
    float rawX = location.getX();
    float rawY = location.getY();
    Bitmap rawbit = myImageCache.get(string);
    //Bitmap rawbit = provider.getBitmap(string);
    float thisWidth = rawbit.getWidth();
    float thisHeight = rawbit.getHeight();
    if(params.shouldResize){
        thisWidth = params.resizex;
        thisHeight = params.resizey;
    }
    float leftx = rawX-(thisWidth/2);
    float topy = rawY-(thisHeight/2);
    Matrix matrix = new Matrix();
    matrix.setTranslate(leftx, topy);
    if(params.shouldResize){
        float toScaleY = ((float)thisHeight)/rawbit.getHeight();
        float toScaleX = ((float)thisWidth)/rawbit.getWidth();
        matrix.preScale(toScaleX, toScaleY);
        }
    if(params.shouldRotate){
        matrix.preRotate((float)Math.toDegrees(params.myangle),(float)(thisWidth/2.0),(float)(thisHeight/2.0));
    }
    canvas.drawBitmap(rawbit, matrix, paint);
} 
```

我能想到的唯一相关信息是 myImageCache 是位图的缓存，因此它不必在每次绘制它们时都从资源中获取它们。“画布”是在表面视图上的画布绘图，在绘图开始之前的每一帧都传递给它。

提前感谢您的任何想法！

# html - Bootstrap 下拉菜单中的图像

> ID：12682662
> 
> 赞同：0
> 
> 时间：2012-10-01T23:48:05.460
> 
> 标签：html, css, twitter-bootstrap

过去几周我一直在学习使用 Twitter Bootstrap，终于有了我的第一个问题。我正在尝试将图像放置在下拉菜单中。

问题：图像在 Firefox 中以正确的全尺寸显示，但在 chrome 或 safari 中显示不正确，以下是供参考的图片以及网站链接： [http ://www.japaneselanguagefriend.com/application/login.php](http://www.japaneselanguagefriend.com/application/login.php)

![火狐图片](../Images/1532f81666bedb346388a8a14d949661.png)

![铬图像](../Images/1648cc2e57042bc833fc9daa95b8cf15.png)

如果有人能告诉我问题是什么以及如何解决它，我们将非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:58:36.473

您可以添加类似的样式

```
.dropdown-chart li img {
  max-width: none;
} 
```

目前`max-width`from cascade 将图像的宽度限制为图像 parent 的继承宽度`<li>`。

# jquery-mobile - 占位符在带有选择的jquery mobile中不起作用

> ID：12682663
> 
> 赞同：1
> 
> 时间：2012-10-01T23:48:05.673
> 
> 标签：jquery-mobile, placeholder

[http://jsfiddle.net/NZ2FJ/](http://jsfiddle.net/NZ2FJ/)

正如您在上面的示例中看到的， data-placeholder="true" 不起作用。

有人可以建议解决方法吗？

[官方文档](http://jquerymobile.com/demos/1.1.1/docs/forms/selects/custom.html)也没有显示占位符。

提前致谢。

```
<div data-role="fieldcontain">
<label for="subject"><em>* </em> Subject: </label>
<select name="subject" id="subject" class="required" data-placeholder="true"  data-native-menu="false">
<option value=""  >Select subject</option>
<option value="Art">Art</option>
<option value="Band">Band</option>
<option value="Choir">Choir</option>
<option value="Design">Design</option>
<option value="Drama">Drama</option>
...
...
</select><br />
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T00:54:53.780

您添加了`data-native-menu="false"`导致 jQM 以这种方式运行的属性

你的例子：

*   [http://jsfiddle.net/NZ2FJ/1/](http://jsfiddle.net/NZ2FJ/1/)

没有属性：

*   [http://jsfiddle.net/NZ2FJ/3/](http://jsfiddle.net/NZ2FJ/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:48:53.680

如果您想保留该`data-native-menu="false"`属性以便获得一个弹出选择框，只需在页面加载时从您的 js 中选择第一个选项：

```
$(document).ready(function () {
    $("#subject option:first").attr('selected', 'selected');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T08:56:23.450

我将 jquery Mobile 更新到 1.2.0，现在可以正常工作了。

# objective-c - 覆盖的 getter 不会触发其他选择器

> ID：12682666
> 
> 赞同：0
> 
> 时间：2012-10-01T23:48:11.820
> 
> 标签：objective-c, ios, ios5

假设我有一个属性`foo`和一个关联的 ivar `_foo`。

我以下列方式覆盖了 foo 的吸气剂：

```
- (fooType*)foo {
  [_foo bar];
  return _foo;
} 
```

然而，当我为 设置符号断点时`bar`，它永远不会触发。想知道为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:15:55.063

如果你调用的对象`foo`是 nil，你就不会进入这个方法。同样，如果`_foo`为 nil，您将不会进入`bar`.

尝试在你调用的地方放置一个断点，`foo`然后查看你调用它的对象。然后你也可以尝试进入对 foo 的调用。

# c# - Linq 返回对象的副本

> ID：12682669
> 
> 赞同：3
> 
> 时间：2012-10-01T23:48:18.513
> 
> 标签：c#, linq

```
var top100 = (from m in _messages
              where m.IsSent == false
              select m).Take(100);

foreach (var message in top100)
{
    message.IsSent = _sms.SendSMS(message.Source, message.Destination, message.TextMessage);
}

var count = _messages.Count(x => x.IsSent); 
```

我不明白为什么变量 count 等于 0。我原以为我正在处理对我的消息对象的引用，但如果 count 为 0，这是否意味着我正在处理副本？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T00:12:06.303

我只是尝试调查您的问题，但我没有重现它，所以这让我想知道您的 IsSent 是否真的是错误的，这就是您得到结果的原因。

```
void Main()
{
    var top100 = (from m in Messages where m.IsSent == false select m).Take(100);   
    foreach (var message in top100) { 
        message.IsSent = true; 
    }
    var count = Messages.Count(x => x.IsSent); 
    Console.WriteLine(count);
}
List<Message> Messages {
    get {
        if(_messagesList == null) {
            _messagesList = new List<Message>();
            for (int i = 0; i < 100; i++)
                _messagesList.Add(new Message { IsSent = false });
        }
        return _messagesList;
    }
}
List<Message> _messagesList;
class Message {
    public bool IsSent { get; set; }
} 
```

输出是`100`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T23:59:05.800

只需`top100`在短信处理后获取计数。

`var count = top100.Count(m => m.IsSent);`

让我们假设计数正在返回您当前的代码。对于您刚刚尝试的*100*条消息，它将返回一个不正确的计数。所以说`_messages`里面有101条消息。其中 100 个`IsSent`设置为 false，1 个`IsSent`设置为 true。`IsSent`在第一行中将 100设置为 true 后，`_messages.Count(x => x.IsSent)`将返回 101。根据您的`count`用途，101 可能没有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T00:11:10.337

您正在处理 Enumerable。Take 会产生一个结果，因此除非您`.ToList()`在最后添加 a ，否则您的`.Count()`调用基本上只会重新应用`from m in _messages where m.IsSent == false`Returning the next 100 unsent messages 。

将 a 添加`.ToList()`到您的初始拉动 100，然后`.Count()`将根据您处理的初始 100 进行评估。

# excel - 如何从 Word 中获取对打开的 Excel 电子表格的引用？

> ID：12682682
> 
> 赞同：3
> 
> 时间：2012-10-01T23:50:24.930
> 
> 标签：excel, vba, ms-word

我有一些 VBA 代码可以从 Excel 中复制内容并将其粘贴到 Word 中。我遇到的问题是如何打开电子表格。我可以使用绝对路径引用打开它

> 工作簿。打开“C:\path\filename.xls”

我更愿意使用相对路径引用来引用电子表格。我能够找到从 Excel 工作簿到另一个工作簿的相对路径引用的代码，但如果您从 Word 中执行此操作，它似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T20:04:17.170

添加对 Excel 对象库的引用，然后在代码中创建一个对象并使用该对象来控制 Excel 的一个实例。只要确保避免使用 ActiveWorkbook 之类的东西，以防万一。

添加参考后：

```
Sub DoStuffWithExcelInWord()
   Dim xl As Excel.Application
   Dim wkbk As Excel.Workbook
   Dim wk As Excel.Worksheet
   Set xl = CreateObject("Excel.Application")
   Set wkbk = xl.Workbooks.Open("C:\test.csv")
   Set wk = wkbk.Sheets(1)
   Debug.Print wk.Cells(1, 1).Value
   xl.Quit
   Set wk = Nothing
   Set wkbk = Nothing
   Set xl = Nothing
End Sub 
```

您也可以使用 Excel 创建非常相似的东西来自动化 Word，如果这更多的是您正在寻找的东西。

# tridion - 使用 DD4T 时如何为嵌入式字段启用 siteEdit？

> ID：12682684
> 
> 赞同：2
> 
> 时间：2012-10-01T23:50:42.870
> 
> 标签：tridion, tridion-2011, siteedit, dd4t

我正在尝试为使用 DD4T 实现的页面的嵌入式字段启用 siteEdit。

我能够找到有助于为正常方法和组件表示启用它的方法和标签，但不适用于嵌入式字段和组件（直接传递 Icompoennt 模型）级别。

我正在尝试为 SiteEdit2012(UI) 启用它

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:04:18.997

与“普通”字段相同。想象一下，您有一个名为“地址”的嵌入式字段，其中包含 2 个字段：街道和号码。这就是你将如何做到！启用SiteEdit：

```
//Street  
@Html.SiteEditField(Model.Component, Model.Component.Fields["address"].EmbeddedValues[0]["street"])

//Number
@Html.SiteEditField(Model.Component, Model.Component.Fields["address"].EmbeddedValues[0]["number"]) 
```

# tfs - TFS 2010 - 从 TFS 中的现有项目创建一个新项目

> ID：12682686
> 
> 赞同：0
> 
> 时间：2012-10-01T23:51:08.360
> 
> 标签：tfs, branch, team-project

我需要从 TFS 中的现有项目创建一个新项目。这仅用于源代码控制。我不需要复制任何工作项。

所以现在我需要在 NewProjectCollection 中创建 NewTeamProject 并在 OldProjectCollection 中使用 OldTeamProject 的源分支。

请建议继续进行此操作..非常感谢您提前提供的帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:38:01.780

**手动拆分**

*   在现有集合中创建新的团队项目
*   在创建向导中从团队项目选项中选择分支
*   [遵循拆分团队项目收集指南](http://msdn.microsoft.com/en-us/library/dd936158%28v=vs.100%29.aspx#Delete)

然而，我有一种感觉，这不会带来所有的历史，而且这不是一个特别好的选择，尤其是在涉及到集合拆分时。

**TFS 集成工具**

另一种方法是使用 tfs 集成平台，它基本上会重播新团队项目的所有签到，该项目可以在您的新集合中。由于该程序的工作方式，您将丢失签入的原始日期/时间，但仍然能够看到每次签入更改的内容。

[TFS 集成工具 TFS 集成](http://tfsintegration.codeplex.com/) [工具博客文章和参考](http://blogs.msdn.com/b/willy-peter_schaub/archive/2011/06/06/toc-tfs-integration-tools-blog-posts-and-reference-sites.aspx)

[通过手动更新数据库](http://social.msdn.microsoft.com/Forums/en-US/tfsintegration/thread/7459e196-8f34-4b2e-a99e-4598328c9833)，有一种风险的方法可以让您的时间戳正确

# java - 当我尝试获取 Int 时，我的应用程序停止

> ID：12682688
> 
> 赞同：0
> 
> 时间：2012-10-01T23:51:24.477
> 
> 标签：java, android, parsing, int

我正在尝试制作一个接受输入并自动将其更改为 int 的应用程序。但是，当它尝试获取 int 时，应用程序会自动停止。下面是完整的代码...

```
 public class MainActivity extends Activity implements OnClickListener{  

        @Override
        public void onCreate(Bundle savedInstanceState) {

            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            Button calculate = (Button)findViewById(R.id.calculateTip);
            calculate.setOnClickListener(this);

        }//end onCreate

    public void onClick(View v) {

            EditText money = (EditText)findViewById(R.id.bill);
            int bill = Integer.parseInt(money.getText().toString());
            money.setText("Event Processed");

    }//end onClick

    }//end MainActivity 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:26:47.590

我怀疑应用程序正在停止，因为您尝试解析的值并不是真正的整数。您应该将该代码放入 try catch 中。

IE：

```
 public void onClick(View v) {

       EditText money;
       try
       {
            money = (EditText)findViewById(R.id.bill);

             // This check makes sure that the EditText is returning the correct object.
            if(money != null)
            {
              int bill = Integer.parseInt(money.getText().toString());
              money.setText("Event Processed");
            }
       }
       catch(NumberFormatException e)
       {
       // If we get in here that means the inserted value was not an Integer. So do               something.
       //ie:
        money.setText("Please enter a value amount" );
        }
    }//end onClick 
```

无论如何，您应该在 try catch 中使用此代码以保持数据完整性。

希望这会有所帮助！干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T23:55:38.763

您确定 Object 是 EditText 的一个实例并且它不为空吗？

# c++ - 对于 std::set，相同的“值”意味着什么？

> ID：12682694
> 
> 赞同：3
> 
> 时间：2012-10-01T23:52:27.773
> 
> 标签：c++, stl, insert, comparison, stdset

在 C++ 中，std::set::insert() 仅在没有具有相同“值”的值时插入一个值。同样，这是否意味着 operator== 或者它是否意味着 operator< 对于任何一个排序都是错误的，或者它是否意味着其他东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T00:13:51.487

> 这是否意味着对于哪个 operator< 对于任一排序都是错误的？

是的，如果集合使用默认比较器并使用`<`. 更一般地，在带有比较器的有序容器中`Compare`，两个键`k1`和`k2`被视为*等效*if `!Compare(k1,k2) && !Compare(k2,k1)`。

不需要密钥来实现`operator==`或其他任何东西；它们只需要使用容器的比较器进行比较即可给出[*严格的弱排序*](http://en.wikipedia.org/wiki/Strict_weak_ordering)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T23:55:21.593

[std::set](http://en.cppreference.com/w/cpp/container/set)有一个名为 `Compare' 的模板参数，如下签名所示：

```
template < class Key, class Compare = less<Key>,
       class Allocator = allocator<Key> > class set; 
```

`Compare`用于确定元素之间的顺序。这里，默认[`less<Key>`](http://en.cppreference.com/w/cpp/utility/functional/less)使用`<`运算符来比较两个键。

如果有帮助，您可以将集合视为`std::map`具有无意义值的 a，即`std::set<int>`可以将 a 视为`std::map<int, int>`值无意义的 a。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T23:55:56.117

唯一`set`允许执行的比较`T`是通过作为模板的一部分进行比较的仿函数类型。因此，这就是它定义等价的方式。

对于 中的每个值，对于`set`该值和新值之间的两个排序之一，比较必须评估为真。如果任何值都为假，那么它不会被存储。

# c# - 从通用列表底部删除重复项

> ID：12682696
> 
> 赞同：5
> 
> 时间：2012-10-01T23:52:38.627
> 
> 标签：c#, linq, generics

我正在尝试从通用列表底部删除重复项。我的类定义如下

```
public class Identifier
{
    public string Name { get; set; }
} 
```

我已经定义了另一个实现 IEqualityComparer 的类以从 List 中删除重复项

```
public class DistinctIdentifierComparer : IEqualityComparer<Identifier>
{
    public bool Equals(Identifier x, Identifier y)
    {
        return x.Name == y.Name;
    }

    public int GetHashCode(Identifier obj)
    {
        return obj.Name.GetHashCode();
    }
} 
```

但是，我正在尝试删除旧项目并保持最新状态。例如，如果我有如下定义的标识符列表

```
Identifier idn1 = new Identifier { Name = "X" };
Identifier idn2 = new Identifier { Name = "Y" };
Identifier idn3 = new Identifier { Name = "Z" };
Identifier idn4 = new Identifier { Name = "X" };
Identifier idn5 = new Identifier { Name = "P" };
Identifier idn6 = new Identifier { Name = "X" };

List<Identifier> list =  new List<Identifier>();
list.Add(idn1);
list.Add(idn2);
list.Add(idn3);
list.Add(idn4);
list.Add(idn5);
list.Add(idn6); 
```

我已经实施

```
var res = list.Distinct(new DistinctIdentifierComparer()); 
```

如何通过使用 distinct 来确保我保留了 idn6 并删除了 idn1 和 idn4？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T23:59:23.883

[大多数 LINQ 操作符都是保留顺序的](http://www.codeducky.org/linq-operators-and-ordering/)：Distinct() 的 API 表示它将获取遇到的每个项目的第一个实例。如果您想要最后一个实例，只需执行以下操作：

```
var res = list.Reverse().Distinct(new DistinctIdentifierComparer()); 
```

另一个避免您必须定义显式比较器的选项是：

```
var res = list.GroupBy(i => i.Name).Select(g => g.Last()); 
```

来自 MSDN：

> IGrouping 对象的生成顺序基于 source 中生成每个 IGrouping 的第一个键的元素的顺序。分组中的元素按照它们在源中出现的顺序产生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T00:07:22.160

您还可以实现自定义添加方法来维护最新记录：

```
public class IdentifierList : List<Identifier>
{
    public void Add(Identifier item)
    {
        this.RemoveAll(x => x.Name == item.Name);
        base.Add(item);
    }
}

Identifier idn1 = new Identifier { Name = "X" };
Identifier idn2 = new Identifier { Name = "Y" };
Identifier idn3 = new Identifier { Name = "Z" };
Identifier idn4 = new Identifier { Name = "X" };
Identifier idn5 = new Identifier { Name = "P" };
Identifier idn6 = new Identifier { Name = "X" };

IdentifierList list = new IdentifierList ();
list.Add(idn1);
list.Add(idn2);
list.Add(idn3);
list.Add(idn4);
list.Add(idn5);
list.Add(idn6); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T00:01:17.333

你可以`Group`检查是否`Count`有 > 1

```
var distinctWorked = !(res
.GroupBy(a => a.Name)
.Select(g => new{g.Key, Count = g.Count()})
.Any(a => a.Count > 1)); 
```

# bash - Grep 仅在匹配后打印

> ID：12682715
> 
> 赞同：7
> 
> 时间：2012-10-01T23:54:55.663
> 
> 标签：bash, grep

我用`grep`它输出这样的列表

```
/player/ABc12
/player/ABC321
/player/EGF987
/player/egf751 
```

但是我只想给出玩家的名字，比如`ABC321`，`EFG987`等等......

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-02T00:09:18.153

开始使用`grep`：

```
$ grep -oP "/player/\K.*" FILE
ABc12
ABC321
EGF987
egf751 
```

或更短：

```
$ grep -oP "[^/]/\K.*" FILE
ABc12
ABC321
EGF987
egf751 
```

或没有`-P`(pcre) 选项：

```
$ grep -o '[^/]\+$' FILE
ABc12
ABC321
EGF987
egf751 
```

或纯`bash`：

```
$ IFS=/ oIFS=$IFS
$ while read a b c; do echo $c; done < FILE
ABc12
ABC321
EGF987
egf751
$ IFS=$oIFS 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-02T00:31:30.937

@sputnick 有正确的想法`grep`，类似的东西实际上是我的首选解决方案。我个人立即想到了一个积极的回顾：

```
grep -oP '(?<=/player/)\w+' file 
```

但`\K`效果也很好。

另一种（稍微短一些）解决方案是`sed`：

```
sed 's:.*/::' file 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-02T00:05:43.300

停止使用 grep。

```
$ awk -F/ '$2 == "player" { print $3 }' input.txt
ABc12
ABC321
EGF987
egf751 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T00:30:06.140

一种使用方式`GNU grep`和积极的回顾：

```
grep -oP '(?<=^/player/).*' file.txt 
```

结果：

```
ABc12
ABC321
EGF987
egf751 
```

# xcode - 在 xcode 4.5 中将图像从相机胶卷发布到 facebook

> ID：12682718
> 
> 赞同：0
> 
> 时间：2012-10-01T23:55:16.580
> 
> 标签：xcode, facebook, xcode4.5

我已经设置了一些功能。但我不知道从这里去哪里。一旦我知道如何实际使用图像，我可能会弄清楚如何处理 facebook。我尝试将图像保存到 NSDictionary 中，然后重定向到不同的视图控制器，但它不允许我从 imagePickerController 方法中重定向。所以有人知道如何使用从相机胶卷中选择的图像吗？

我的下一个想法是将它保存在 NSDictionary 中，然后只用一个语句检查 NSdictionary 的值是否发生了变化，但这根本不是一种有效的方法。

在下面编辑以包括提供的答案，但没有任何反应，没有图像显示或任何东西。我错过了什么？

```
- (void) useCameraRoll
{
if ([UIImagePickerController isSourceTypeAvailable:
     UIImagePickerControllerSourceTypeSavedPhotosAlbum])
{
    UIImagePickerController *imagePicker =
    [[UIImagePickerController alloc] init];
    imagePicker.delegate = self;
    imagePicker.sourceType =
    UIImagePickerControllerSourceTypePhotoLibrary;
    imagePicker.mediaTypes = [NSArray arrayWithObjects:
                              (NSString *) kUTTypeImage,
                              nil];
    imagePicker.allowsEditing = NO;
    [self presentModalViewController:imagePicker animated:YES];
    [imagePicker release];
    newMedia = NO;
}
}

-(void)imagePickerController:(UIImagePickerController *)picker
didFinishPickingMediaWithInfo:(NSDictionary *)info
{
NSString *mediaType = [info
                       objectForKey:UIImagePickerControllerMediaType];
[self dismissModalViewControllerAnimated:YES];
if ([mediaType isEqualToString:(NSString *)kUTTypeImage]) {
    UIImage *image = [info
                      objectForKey:UIImagePickerControllerOriginalImage];

    NSLog(@"image:%@",image);

    displayPhoto.image = image;
    [displayPhoto setFrame:CGRectMake(0, 0, 320, 480)];
    [[self view] addSubview:displayPhoto];

}
else if ([mediaType isEqualToString:(NSString *)kUTTypeMovie])
{
    // Code here to support video if enabled
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:33:18.240

假设您已经使用您创建的按钮从视图控制器调用它，为什么不直接将 UIImageView 添加到您的视图控制器上呢？将其称为 myPhotoImageView 或类似的名称，然后在 didFinishPickingMediaWithInfo 方法中，只需在后面添加以下代码行

```
UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage]; 
```

作为

```
myPhotoImageView.image = image; 
```

要调整图像视图的大小以使外观看起来不错，请执行此操作。

```
CGSize size = image.size;
CGRect photoFrame;
if (size.width > size.height)
{
    // Landscape
    CGFloat scaleFactor = 320 / size.width;
    photoFrame = CGRectMake(0, 0, 320, size.height*scaleFactor);
}
else
{
    // Portrait
    CGFloat scaleFactor = 320 / size.height;
    photoFrame = CGRectMake(0, 0, size.width*scaleFactor, 320);
}
myPhotoImageView.frame = photoFrame; 
```

# javascript - 使用隐藏字段值编写 JQuery / Javascript IF / else 语句

> ID：12682728
> 
> 赞同：1
> 
> 时间：2012-10-01T23:55:59.313
> 
> 标签：javascript, jquery, html, css, hidden

我正在尝试根据通过 ajax 加载的隐藏字段的值来为 div 分配一个 CSS 类。

我的代码在调用时返回隐藏字段的正确值，但无论结果如何，我的 div 总是被分配相同的 css 类。

我猜我的 IF 语句语法有问题：

```
function doneLoading(){

var colorStatus = $('#colorStatus').val();

if(colorStatus = 'RED'){
    $('.circleFrame').addClass('redState'); 
}

else if(colorStatus = 'GREEN'){
    $('.circleFrame').addClass('greenState');   
}

else if(colorStatus = 'YELLOW'){
    $('.circleFrame').addClass('yellowState');  
}

else {
    alert("Something is broken");
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T23:58:46.673

这是因为你在做`=`分配而不是`==`比较。您可能希望使用[http://jshint.com](http://jshint.com)来帮助定位这些类型的错误。

考虑以下替代方法来缩短您的代码。

```
function doneLoading() {
    var color = $('#colorStatus').val().toLowerCase();
    $('.circleFrame').addClass(color + 'State');
} 
```

* * *

要保持验证，您可以这样做：

```
var colors = {green:1, red:1, yellow:1};

function doneLoading() {
    var color = $('#colorStatus').val().toLowerCase();

    if (colors.hasOwnProperty(color))
        $('.circleFrame').addClass(color + 'State');
    else
        alert("Something is broken");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T23:57:17.363

您使用的是赋值运算符而不是比较运算符。

尝试

```
if(colorStatus === 'RED'){
    $('.circleFrame').addClass('redState'); 
} 
```

反而。（对于其他颜色也是如此。）

# android - 访问文件浏览器并获取文件路径

> ID：12682732
> 
> 赞同：0
> 
> 时间：2012-10-01T23:56:27.847
> 
> 标签：android, android-file

> **可能重复：**
> [Android 文件选择器](https://stackoverflow.com/questions/2701857/android-file-picker)

我需要在我的 Android 应用程序中包含一个文件选择器，它返回所选文件的完整文件路径。

但我不知道如何实现这一点。

我还没有在 Stackoverflow 中寻找这个问题，但我还没有找到我的问题的明确答案。

我找到了如何从图库中的图像中获取文件路径，但没有关于获取所有其他文件类型的文件路径的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T00:17:08.880

```
 private List<String> FindFiles(Boolean fullPath) {
        final List<String> tFileList = new ArrayList<String>();

        String[] fileTypes = new String[]{"dat","doc","apk"....}; // file extensions you're looking for
        FilenameFilter[] filter = new FilenameFilter[fileTypes .length];

        int i = 0;
        for (final String type : fileTypes ) {
            filter[i] = new FilenameFilter() {
                public boolean accept(File dir, String name) {
                    return name.endsWith("." + type);
                }
            };
            i++;
        }

        FileUtils fileUtils = new FileUtils();
        File[] allMatchingFiles = fileUtils.listFilesAsArray(
                new File("/sdcard"), filter, -1);
        for (File f : allMatchingFiles) {
            if (fullPath) {
                tFileList.add(f.getAbsolutePath());
            }
            else {
                tFileList.add(f.getName());
            }
        }
        return tFileList;
    }

    public class FileUtils {

        public File[] listFilesAsArray(File directory, FilenameFilter[] filter,
                int recurse) {
            Collection<File> files = listFiles(directory, filter, recurse);

            File[] arr = new File[files.size()];
            return files.toArray(arr);
        }

        public Collection<File> listFiles(File directory,
                FilenameFilter[] filter, int recurse) {

            Vector<File> files = new Vector<File>();

            File[] entries = directory.listFiles();

            if (entries != null) {
                for (File entry : entries) {
                    for (FilenameFilter filefilter : filter) {
                        if (filter == null
                                || filefilter
                                        .accept(directory, entry.getName())) {
                            files.add(entry);
                            Log.v("FileUtils", "Added: "
                                    + entry.getName());
                        }
                    }
                    if ((recurse <= -1) || (recurse > 0 && entry.isDirectory())) {
                        recurse--;
                        files.addAll(listFiles(entry, filter, recurse));
                        recurse++;
                    }
                }
            }
            return files;
        }
    } 
```

# winapi - Excel - Windows 7 任务栏进度

> ID：12682749
> 
> 赞同：2
> 
> 时间：2012-10-01T23:59:08.797
> 
> 标签：winapi, vba, excel, taskbar

运行 Excel 2010，我可以确保始终在此版本上运行这些工作表，因为它只能在我工作的终端计算机上进行本地访问。

我通过 excel 运行了一些导入过程和大型文件夹过滤/打印批处理功能。我想在我的功能处理过程中使用 Windows 7 任务栏进度条视觉效果，以了解它们的进展情况。考虑使用其他视觉效果来显示进度，但这（如果可能）似乎是最明显和最专业的风格。

我一直在彻底研究试图使这项工作，但无济于事。到目前为止，我的理解是我需要实现 ITaskbarList3 接口，该接口通常在 Windows API 中找到。从我发现的显示如何使其工作的代码中，一旦隐含其余部分似乎相当容易且不言自明。

我完全限制使用 Excel 作为代码的基础，在工作计算机上没有安装权限。我可以在家安装以获取任何必要的文件，然后传输它们。乐于使用任何广泛或真正倒退的方式来达到目的，因为目的证明了采取任何手段都是合理的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T00:51:10.943

使用 Excel 状态栏会容易得多：

Application.StatusBar = "向用户显示进度...";

* * *

对于 Windows 和任务栏进度条，您需要下载 [Windows 7 任务栏：开发人员资源](http://archive.msdn.microsoft.com/Windows7Taskbar/Release/ProjectReleases.aspx?ReleaseId=2246)。

您需要打开示例解决方案，右键单击 Windows7.DesktopIntegration 项目 > 属性 > 构建 > 勾选注册 COM。

通过在开发期间检查 IDE 中的“Register for COM interop”选项，IDE 将在目标程序集上调用 regasm 以及 /codebase 选项。

这将导致 regasm.exe 为从您的程序集中导出的 COM 可见类添加以下注册表项：

HKEY_CLASSES_ROOT\CLSID{xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx}\InprocServer32\CodeBase=

*这将使 CLR 能够按照程序集的路径定位您的程序集。如果没有代码库路径，CLR 将不得不使用标准搜索算法来定位您的程序集（及其依赖项）。*

下一步构建解决方案 > 转到 Windows7.DesktopIntegration 项目的 bin 文件夹并将 Windows7.DesktopIntegration.DLL 和 Windows7.DesktopIntegration.TLB 复制到 System32 文件夹或更好地注册到 GAC。

*一种帮助 CLR 定位所需程序集的相关技术是将所有程序集（及其依赖项）复制到与客户端应用程序本身相同的文件夹中。但是，您的客户端应用程序将是 Excel。这意味着您必须将程序集复制到与 Excel 应用程序相同的文件夹中（这不是一个好主意）。*

一旦您能够实例化 Windows7.DesktopIntegration DLL，您应该能够调用该`Windows7Taskbar.SetProgressValue`方法，例如 VBA 代码：

```
Set Windows7Taskbar = CreateObject("Windows7.DesktopIntegration")

Windows7Taskbar.SetProgressState(form.Handle, Windows7Taskbar.ThumbnailProgressState.Normal)

Windows7Taskbar.SetProgressValue(form.Handle, progress, maximum) 
```

# ruby-on-rails - 重建 ruby 应用程序而不在生产中重新启动 apache

> ID：12682755
> 
> 赞同：-1
> 
> 时间：2012-10-01T23:59:50.590
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, apache2

是否可以在生产模式下以某种方式重新编译应用程序（更改代码时），而无需重新启动 apache？我正在使用 passanger...谢谢 Dorijan

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T00:03:55.067

** 编辑 **

在您应用的根目录中：

```
touch tmp/restart.txt 
```

这将重新启动 Rails 应用程序。

[从文档：](http://guides.rubyonrails.org/configuring.html)

> config.cache_classes 控制是否应在每个请求上重新加载应用程序类和模块。在开发模式下默认为 false，在测试和生产模式下默认为 true。也可以使用 threadsafe! 启用。

生产中的可怕想法虽然减慢了每个请求的速度。最好使用 Capistrano 之类的东西进行部署，并让它为您重新启动服务器。

# objective-c - 缺少 ios 5 标头给出 theos 错误

> ID：12682763
> 
> 赞同：0
> 
> 时间：2012-10-02T00:00:37.047
> 
> 标签：objective-c, ipad, cydia, tweak

所以是的，通过theos从我的ipad编译时出现错误代码

```
 Making all for bundle iNotitweet...
  Compiling iNotitweetController.m...
  In file included from iNotitweetController.m:2:
  /var/theos/include/Twitter/Twitter.h:7:36: error: _ABAddressBookAddRecord.h: No
 such file or directory
 In file included from /var/theos/include/Twitter/Twitter.h:9,
             from iNotitweetController.m:2:
 /var/theos/include/Twitter/NSCoding-Protocol.h:8: warning: duplicate declaration for protocol 'NSCoding'
   In file included from iNotitweetController.m:2:
   /var/theos/include/Twitter/Twitter.h:13: error: cannot find interface declaration
   for '_ABAddressBookAddRecord', superclass of 'Twitter'
   iNotitweetController.m: In function '-[iNotitweetController composeTweet]':
   iNotitweetController.m:48: error: 'TWTweetComposeViewController' undeclared (first
   use in this function)
   iNotitweetController.m:48: error: (Each undeclared identifier is reported only once
   iNotitweetController.m:48: error: for each function it appears in.)
   iNotitweetController.m:48: error: 'twtComposer' undeclared (first use in this
   function)
   iNotitweetController.m:50: error: expected expression before '^' token
   make[2]: *** [obj/iNotitweetController.m.o] Error 1
   make[1]: *** [internal-bundle-all_] Error 2
   make: *** [iNotitweet.all.bundle.variables] Error 2 
```

我正在使用 rpetrich 的标头并从 github 上的 freemanrepo 中窃取了 twitter 标头，有人可以告诉我这些错误的含义以及我在哪里可以找到 _ABAddressBookAddRecord.h 我遵循此代码[http://pastebin.com/rArx47Bx](http://pastebin.com/rArx47Bx)和本教程[http ://tumblr.leonnears.com/post/17966636490/create-ncwidget-ios](http://tumblr.leonnears.com/post/17966636490/create-ncwidget-ios)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T02:49:23.720

这些标头是旧版本 iPhoneOS（甚至在 iOS 之前）的兼容性标头，我不建议继续使用它们 - 无论如何都没有真正需要支持低于 4.3.3 的版本（甚至是 5.0.1），因为几乎每个人都至少使用这两种固件中的一种。对于最新的标头，可以从 dyldcache 中转储您自己的标头（使用 kennytm 的 dyld_decache 从[此处），或者您可以在](https://github.com/kennytm/Miscellaneous/downloads)[此处](https://github.com/autopear/SpringBoard-iOS5-Headers)找到适用于 iOS 5 的 SpringBoard 标头。

# c++ - 通过 if 语句需要左值作为赋值错误的左操作数

> ID：12682764
> 
> 赞同：0
> 
> 时间：2012-10-02T00:00:37.453
> 
> 标签：c++

我看过类似的问题，但作为一个完全的新手，他们没有多大帮助，当我尝试运行我的最终 if 语句时，我遇到了这个错误，我怎样才能让我的 cout 语句更清晰？它的预期目的是输出它可以接受多少袋垃圾，用户试图给它多少，如果不能把它们都拿走，会剩下多少袋。

```
while(( reg < 50) && (met< 20) && (glass < 20))
{
reg=reg+reg; met=met+met; glass=glass+glass;
cout<< " I have enough "<< endl;

if(reg+=reg > 50){
cout<< "I can only accept " << 50 - (reg+=reg) << "of your " << (reg+=reg)<<" regular     bags of garbage, I'll leave the other " << 50 - (reg+= reg)<< " I'll leave the other " << reg- (50 - reg+=reg)<< endl;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:10:23.520

```
50 - reg += reg; 
```

`operator+=`的优先级低于`operator-`。上述语句解释为：

```
(50 - reg) += reg; 
```

这是行不通的。你可能想要：

```
50 - (reg += reg); 
```

# algorithm - 采访：如何验证一个字符串是否包含另一个字符串？

> ID：12682765
> 
> 赞同：-2
> 
> 时间：2012-10-02T00:00:38.733
> 
> 标签：algorithm

一般的想法是做两个for循环，执行字符串1中的每个字符，比较string2中的每个字符，如果都找到，则表示包含。所以我们需要循环string1中的所有字符，并比较所有字符，看看string2中的所有字符，这将O sqaure运行时间。哪个面试官说这不是个好主意。

在它之后，我正在考虑它。我不能产生一个没有做两个循环的想法。也许我可以先从 string1 中获取所有字符，转换为 asc2，即内置到树中的数字。因此，当与 string2 进行比较时，它会使搜索非常快。

或者任何人有更好的主意？

就像 string1 是 abc 但 string2 是 cbattt 这意味着每个字符都包含在 string2 中。不是子字符串，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:18:58.977

在文本中搜索给定模式（模式匹配）是一个众所周知的问题。已知解决方案：

1.  [KMP](http://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm "KMP")
2.  [见证人表](http://u.cs.biu.ac.il/~amir/PMslides/pattern_matching_lecture_notes_2.pdf "见证人表")
3.  [博耶摩尔](http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm "博耶摩尔")
4.  [后缀树](http://en.wikipedia.org/wiki/Suffix_tree "后缀树")

所有解决方案都在一些次要方面有所不同，比如它是否可以推广到 2D 模式匹配，或者更多。如果它需要预处理，如果它可以概括为未绑定的字母，运行时间等'......

**编辑：**
如果您只想知道某个字符串的所有字母是否都出现在其他字符串中，为什么不使用字母表大小的表格，指示是否可以在字符串中找到给定的字符。如果字母表无界或非常大（超过*O(1)*），请使用哈希表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T00:10:59.047

正如 iccthedral 所说，[boyer moore](http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm)可能是面试官想要的。

# objective-c - iOS 6 中弃用的代码回退到 iOS 5

> ID：12682768
> 
> 赞同：0
> 
> 时间：2012-10-02T00:00:53.653
> 
> 标签：objective-c, xcode, ios5, ios6, fallback

我有这个自定义后退按钮：

```
- (IBAction)backToMenu:(id)sender {

[self.presentingViewController dismissModalViewControllerAnimated:YES]; 

} 
```

在 iOS 6 模拟器中测试我的应用程序说dismissModalViewControllerAnimated 已被弃用，我必须改用dismissViewControllerAnimated，所以，我如何使用iOS 6 代码并回退到iOS 5

我试过这个：

```
if([self respondsToSelector:@selector(presentingViewController:animated:completion:)])
    [self.presentingViewController dismissViewControllerAnimated:(YES) completion:nil];
else if([self respondsToSelector:@selector(presentingViewController:animated:)])
    [self.presentingViewController dismissModalViewControllerAnimated:YES];
else
    NSLog(@"Oooops, what system is this ?!!! - should never see this !"); 
```

但是没有结果，我看到 NSLog 并且没有视图被驳回，有什么提示吗？

先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T00:03:51.893

您正在测试的选择器与您正在调用的选择器不同。尝试以下操作：

```
if([self.presentingViewController respondsToSelector:@selector(dismissViewControllerAnimated:completion:)])
    [self.presentingViewController dismissViewControllerAnimated:(YES) completion:nil];
else if([self.presentingViewController respondsToSelector:@selector(dismissModalViewControllerAnimated:)])
    [self.presentingViewController dismissModalViewControllerAnimated:YES];
else
    NSLog(@"Oooops, what system is this ?!!! - should never see this !"); 
```

重要的区别在于*您正在调用的对象*-`self.presentingViewController`在这种情况下 - 与*您在该对象上调用的方法*不同。我们称后者为选择器，这就是您要放入`@selector()`包装器中的位。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T06:46:33.557

使用 [self dismissViewControllerAnimated:YES 完成：Nil]; 适用于 iOS 6

# centos - CentOS：RVM 和没有可用的软件包 libyaml

> ID：12682769
> 
> 赞同：3
> 
> 时间：2012-10-02T00:00:57.000
> 
> 标签：centos, rvm, packages

我正在尝试在 CentOS 主机上安装 RVM，但失败并出现以下错误：

```
/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby: error while loading shared libraries: libruby.so.1.9: cannot open shared object file: No such file or directory
Libraries missing for ruby-1.9.3-p194: libruby.so.1.9\. Refer to your system manual for installing libraries
Mounting remote ruby failed, trying to compile. 
```

经过一些谷歌搜索后，我似乎需要手动安装 libyaml 包，主机说：

```
No package libyaml available. 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T23:23:43.647

尝试使用 RVM 安装它：

```
rvm pkg install libyaml 
```

它适用于我的 CENTOS 6.3 VPS。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T11:28:33.303

使用最新的 rvm (run `rvm get head`)，在安装 Ruby 时会自动获取 libyaml（至少在 1.9.3 上）。

您将通过检查 /usr/local 来查看它是否已安装，因为这是 rvm 放置它的位置...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T23:53:13.933

我设法通过拼凑其他人的尝试来解决它。我按照[这些](https://webcache.googleusercontent.com/search?q=cache%3Ablog.jeffcosta.com%2F2011%2F07%2F22%2Finstall-ruby-version-manager-rvm-on-centos-6%2F&oq=cache%3Ablog.jeffcosta.com%2F2011%2F07%2F22%2Finstall-ruby-version-manager-rvm-on-centos-6%2F&aqs=chrome..69i57j69i58.2255j0j4&sourceid=chrome&es_sm=119&ie=UTF-8)说明进行操作，尽管收到错误消息：

```
Error running 'autoreconf -is --force', please read /usr/local/rvm/log/ruby-1.9.2-p320/yaml/autoreconf.log 
```

我设法安装了`rake`gem 和`rails`gem。

# php - 在电子邮件中加载或触发外部脚本

> ID：12682773
> 
> 赞同：0
> 
> 时间：2012-10-02T00:01:07.860
> 
> 标签：php, email

我们可以在电子邮件中加载外部脚本吗？

就像我们可以在电子邮件中使用的内联 CSS 中触发外部脚本来跟踪视图一样。

例子 ：

```
<td style=\"background:#ffffff url('http://domain.com/views.php?param=key') no-repeat; height:20px;\">&nbsp;</td> 
```

但是当电子邮件被打开时，我们能以某种方式在电子邮件中加载外部脚本的输出吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T00:03:02.440

我认为您无法加载任何外部脚本。您可以加载外部图像，但大多数（所有）现代电子邮件客户端默认不下载图像。用户必须允许电子邮件显示图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T00:11:05.787

这取决于。一些邮件客户端将允许`<iframe>`HTML 电子邮件中的元素：

[http://www.campaignmonitor.com/blog/post/3219/do-iframes-work-in-email/](http://www.campaignmonitor.com/blog/post/3219/do-iframes-work-in-email/)

当然，很多主要客户端（尤其是：Gmail 和 Outlook 的最新版本）不支持此功能，因此这不是一种可靠的方法。

如果您不需要在电子邮件中实际显示 PHP 脚本的任何输出（例如，如果您只是想查看邮件是否被收件人打开或其他什么），那么您可能能够侥幸逃脱使用`<img>`引用您的脚本的标签。但是，许多邮件客户端不会显示此类图像，除非用户单击“显示不安全图像”按钮。再说一次，它不是 100% 可靠的。可能没有 100% 可靠的方法来做到这一点。

# macos - 如何说服 Homebrew 不再安装 MacPorts

> ID：12682775
> 
> 赞同：1
> 
> 时间：2012-10-02T00:01:18.333
> 
> 标签：macos, macports, homebrew

您好，已按照官方说明卸载了 MacPorts，然后重新启动。Spotlight 确认我的系统上没有留下任何 MacPort 目录。特别是，/opt/local/ 不再存在。

然而，当我运行时`brew doctor`，它说：

```
Warning: You have Macports or Fink installed.
This can cause trouble. You don't have to uninstall them, but you may like to
try temporarily moving them away, eg.
sudo mv /opt/local ~/macports 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T00:09:35.937

检查以下任何一项是否属实：

*   `which port`或`which fink`返回某物的路径。
*   `/sw`或`/opt/local`存在。

# xml - XML 模式设计 - 源属性值

> ID：12682777
> 
> 赞同：1
> 
> 时间：2012-10-02T00:01:39.890
> 
> 标签：xml, xsd, schema-design

我被要求记录一个 XML Schema 文件。我需要包含每个模式元素的业务和技术描述。查看我们的指南和 W3C XML Schema 建议，我发现自己想知道最佳实践究竟是什么。

我们的指南规定注释标签应具有以下格式：

```
<xs:annotation>
    <xs:documentation source="BusinessDescription">This is the business description</xs:documentation>
    <xs:documentation source="TechnicalDescription">This is the business description</xs:documentation>
</xs:annotation> 
```

XML 建议声明源属性的类型应为“xs:anyURI”。显然，“BuinessDescription”和“TechnicalDescription”不是 URI，并且会在整个模式中多次重复。因此，将源属性用作语义属性真的正确吗？

在 XML Schema [http://shop.oreilly.com/product/9780596002527.do](http://shop.oreilly.com/product/9780596002527.do)中，Eric van der Vlist 建议这是可以接受的，但也与此观点相矛盾，指出这可能导致互操作性问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T00:16:57.260

您可以将格式良好的 xml 放在那里，而不仅仅是文本，而不是混淆已知的标准属性。只要有 `<Business>This is the business...</Business><Technical>This is the technical....</Tecnhical>`节点在那里。

# javascript - 图像按钮在悬停时改变位置

> ID：12682779
> 
> 赞同：0
> 
> 时间：2012-10-02T00:02:24.357
> 
> 标签：javascript, css, image

那天我看到了一个很好的效果，现在我找不到任何关于它的东西。

这个概念是有一个图像，其正常外观和 onHover 外观组合成一个图像。悬停时图像会移动并显示 onHover 外观。

这是一个视觉示例：

![在此处输入图像描述](../Images/51d1f2315366e3d24ea8b79874e63417.png)

我很确定它涉及这种代码：

```
<img id="button" src="img.png" width="100" height="50">

onHover:
document.getElementById("button").top = "-50"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T00:04:45.310

CSS：

```
#button {
    background-image:url('img.png');
    background-position: 0 0;
}

#button:hover {
    background-position: 0 -50px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T00:13:34.980

HTML：

```
<div></div>​ 
```

CSS：

```
<style>
div{
    width:98px;
    height:45px;
    /*border:1px solid red;*/
    background-image:url('http://i.stack.imgur.com/kxznh.png');
    background-position: -83px -123px;
}
div:hover {
    background-position: -83px -177px;
}
​&lt;/style> 
```

[这是一个演示](http://jsfiddle.net/F8jCE/)

# perl - 关于在本地目录中安装 Perl DBD::Oracle

> ID：12682783
> 
> 赞同：1
> 
> 时间：2012-10-02T00:02:52.887
> 
> 标签：perl, mod-perl

1.  我想从 solaris servier 中的 perl 脚本连接到 oracle 数据库。在当前的 perl 版本 5.8.4 中可以看到 DBI 已安装但未安装 DBD::Oracle。我没有 root 访问权限，也没有使用我的家庭用户 ID。下载 DBD-Oracle-1.50 并在我的 perl 脚本所在的本地目录中解压缩。我想将 DBD Oracle 库文件复制到自定义目录并运行脚本，因为我没有 root 访问权限。当我阅读 DBD-Oracle-1.50 中的安装脚本时，它说手动安装我需要运行以下脚本。由于我没有 root 访问权限，因此我想将库模块复制到本地目录中。不知道如何告诉这些脚本将其安装在我的 perl 脚本所在的本地目录中。

2.  在我的用户 ID 下的自定义目录中安装 DBI 和 DBD 是否使其正常工作。这些模块是否需要 root 访问权限才能正常工作？要使用 DBD::Oracle 需要在服务器中安装 oracle。我的理解 Oracle 驱动程序 DBD::Oracle 应该照顾它。

> ```
>  perl Makefile.PL
>  make && make test
>  make install 
> 
> >  ls -tlr /usr/perl5/vendor_perl/5.8.4/sun4-solaris-64int total 956
> > -rwxr-xr-x   1 root     bin        15161 Mar 26  2005 Roadmap.pod
> > -rwxr-xr-x   1 root     bin         1048 Sep  5  2006 TASKS.pod
> > -rwxr-xr-x   1 root     bin       289343 Jun 26  2007 DBI.pm
> > -rwxr-xr-x   1 root     bin         4608 Jun 12  2008 goferperf.pl
> > -rwxr-xr-x   1 root     bin         1356 Jun 12  2008 dbixs_rev.pl
> > -rwxr-xr-x   1 root     bin        58386 Apr  3  2010 SNMP.pm drwxr-xr-x   3 root     bin            7 Oct 13  2010 NetSNMP
> > drwxr-xr-x   2 root     bin            3 Oct 13  2010 Win32 drwxr-xr-x
> > 8 root     bin           19 Oct 13  2010 DBI drwxr-xr-x   2 root    
> > bin            4 Oct 13  2010 Bundle drwxr-xr-x   6 root     other    
> > 6 Oct 13  2010 auto drwxr-xr-x   3 root     bin           11 Oct 13 
> > 2010 DBD
> > 
> > ls -ltr  /usr/perl5/vendor_perl/5.8.4/sun4-solaris-64int/DBD total 543
> > -rwxr-xr-x   1 root     bin       111586 May  6  2006 Pg.pm
> > -rwxr-xr-x   1 root     bin        28785 Sep 27  2006 Proxy.pm
> > -rwxr-xr-x   1 root     bin         7937 Jan 25  2007 Sponge.pm
> > -rwxr-xr-x   1 root     bin        42836 Feb  6  2007 DBM.pm
> > -rwxr-xr-x   1 root     bin        19882 Mar 28  2007 File.pm
> > -rwxr-xr-x   1 root     bin        12051 May 10  2007 ExampleP.pm
> > -rwxr-xr-x   1 root     bin        43586 May 14  2007 Gofer.pm
> > -rwxr-xr-x   1 root     bin         3761 Jun 15  2007 NullP.pm drwxr-xr-x   4 root     bin            4 Oct 13  2010 Gofer 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T20:02:40.920

如果已经安装了 DBI，您应该只需要安装 DBD::Oracle，尽管您可能想要安装更高版本的 DBI。您可以在您的主目录下安装 DBD::Oracle，然后将 PERL5LIB 环境变量设置为该目录（或包含该目录）。很长的安装方法是：

```
perl Makefile.PL PREFIX=~/perl #Or whatever sub-directory you like
make
make test
make install 
```

然后在运行程序之前在 PERL5LIB 中至少包含“~/perl/lib;~/perl/lib/site_perl”（或在程序中包含“使用库”）。

您还可以设置某些环境变量，例如 PERL_MM_OPT 和 PERL_MB_OPT，这样您就不必在命令行上指定 PREFIX=（请参阅 ExtUtils::MakeMaker 和 Module::Build 的文档）。我还建议使用[cpanm](http://search.cpan.org/dist/App-cpanminus/)并将 PERL_CPANM_HOME 设置为您的主目录下的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T19:16:17.033

Perl 模块可以很好地安装在自定义目录中。当您无权`root`安装`PM`. 一旦您安装`DBI`并`DBD`在您的自定义文件夹中，有几种不同的方法可以确保`perl`知道此安装。

**1.设置环境变量PERL5LIB**

Perl 将在 PERL5LIB 环境变量中指定的目录中查找模块，然后再查找标准库和当前目录，因此您可以设置此变量来定位您的模块。

语法与您用于 PATH 环境变量的语法相同，因此您在 unix 上用冒号分隔目录，在 Windows 上用分号分隔目录。

例子：

```
# unix, bourne shell
PERL5LIB=/home/path/lib:/usr/another/path/lib; export PERL5LIB 
```

请注意，使用`-T`选项（污点检查）运行的脚本不使用该变量，因此在这些情况下，此选项将不起作用。

**2.使用'-I'命令行参数**

语法应该类似于：

```
perl -I /home/path/lib -I /usr/another/lib script.pl 
```

**3.在脚本中添加库路径**

在脚本中包含路径的命令是：use lib "path"。请注意，此语句将“path”添加到 @INC 数组中，因此它与 unshift @INC, "path" 基本相同

```
Example:

#!/usr/bin/perl
use lib "/home/path/lib";
use lib "/usr/another/lib"; 
```

# hibernate - Grails/GORM/Hibernate：引用未保存瞬态实例的域实例的属性列表

> ID：12682787
> 
> 赞同：0
> 
> 时间：2012-10-02T00:03:21.717
> 
> 标签：hibernate, grails, grails-orm

我经常做错事并在 Grails 中获得未保存的瞬态实例异常。我无法粘贴代码，如果我粘贴了，您可能只会告诉我永远停止编程。但这是我想要一些帮助的一般情况：

我打电话给`instanceOfMyComplicatedDomainClass.save(flush: true, failOnError: true)`grails/hibernate 给了我无处不在的：

```
object references an unsaved transient instance - save the transient instance before flushing: soexample.SomeOtherDomainClass 
```

我能做什么（除了理解我自己的代码）来查看哪个属性是问题，因为我有几个具有相同的类？`.save()`我想要一个我可以在它之前调用的方法`println`//`log`无论导致所有愤怒的属性的**名称是什么。**让我举个例子：

```
class MyComplicatedDomainClass {
  SomeOtherDomainClass dataContents
  SomeOtherDomainClass moreDataContents

  static constraints = {
    dataContents(nullable:true)   
    moreDataContents(nullable:true) 
  }      
}

class SomeOtherDomainClass {
  String randomData
}

...

def someRandomMethodAnywhere(){
  def newComplicated = new MyComplicatedDomainClass()
  def imUnsaved = new SomeOtherDomainClass(randomData:'lalala')
  def imOK = new SomeOtherDomainClass(randomData:'lalala2').save() 
  newComplicated.dataContents = imUnsaved
  newComplicated.moreDataContents = imOK
  //At this point newComplicated references an unsaved transient, "imUnsaved".  If I try to save newComplicated it will fail.
  def badPropertyList = findUnsavedTransients(newComplicated)
  assert badPropertyList.contains("dataContents")  //So findUnsavedTransients method returns a list of the names of the properties referencing the unsaved transients
} 
```

我将如何编写 findUnsavedTransients？Hibernate 中是否已经有任何方法可以做类似的事情？

我在问一些与我的其他问题不同的问题来列出所有未保存的瞬态：[获取所有对象的列表 grails 计划神奇地保存](https://stackoverflow.com/questions/11944004/grails-get-a-list-of-all-objects-grails-is-planning-to-magically-save)

此外，我看到（并已阅读）其他约 15 个“休眠：未保存的瞬态......”问题，我要求提供通用解决方案来查看问题所在，而不是针对我做错的具体解决方案在今天的特定片段中。教人钓鱼……可以这么说。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T00:54:24.690

伯特今天发布了一些有趣的东西。

www.burtbeckwith.com/blog/?p=1570

检查休眠侦听器。

# javascript - 音频标签属性问题

> ID：12682790
> 
> 赞同：0
> 
> 时间：2012-10-02T00:03:37.287
> 
> 标签：javascript, jquery

我需要创建带有一堆属性的音频标签。

我有

```
var audioPlayer=document.createElement('audio');
var audioSource=document.createElement('source');

     audioSource.type="audio/mp3";

     audioPlayer.controls="controls";
     audioPlayer.autoplay="autoplay";    

$('div').append(audioPlayer); 
```

我的html变成：

在铬

```
<audio controls autoplay id='test', class='classname'>

</audio> 
```

在FF

```
<audio controls='' autoplay='' id='test', class='classname'>

</audio> 
```

我应该怎么做才能在javascript中创建这些？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T00:05:58.603

`controls`并且`autoplay`是布尔值，这意味着属性的存在就足够了 - 它的值没有区别。

我个人喜欢设置`audioPlayer.controls = true;`，因为它是布尔值。

# c++ - 对象向量不会编译

> ID：12682792
> 
> 赞同：2
> 
> 时间：2012-10-02T00:03:54.407
> 
> 标签：c++, class, types, vector

我已经将向量与对象一起使用了数百次，但现在似乎它不想对它们做任何事情。我不断收到一个编译错误“模板类型参数的模板参数必须是一个类型”：

注意我使用的是开放框架

```
#pragma once

#include "ofMain.h"
#include "cLine.h"

using namespace std;

class testApp : public ofBaseApp{
    public:

        vector < cLine > lines; // Here is the vector of type cLine

        void setup();
        void update();
        void draw();

        void keyPressed(int key);
        void keyReleased(int key);
        void mouseMoved(int x, int y);
        void mouseDragged(int x, int y, int button);
        void mousePressed(int x, int y, int button);
        void mouseReleased(int x, int y, int button);
        void windowResized(int w, int h);
        void dragEvent(ofDragInfo dragInfo);
        void gotMessage(ofMessage msg);
}; 
```

以及 cLine 的头文件：

```
#ifndef aftermotion_cLine_h
#define aftermotion_cLine_h

#include <iostream>
#include "ofMain.h"

class cLine
{
public:

    int y;
    float thickness;

    cLine();
    cLine(const cLine &);
    cLine(float thinkness);

    void draw();
    void update();

};

#endif 
```

编辑：我试过 #include ，它没有改变任何东西，因为它已经是 sdt 库的一部分，它本身是来自开放框架库的“ofMain.h”文件的包含

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T00:06:01.067

你从来没有`#include <vector>`在你的标题中。因此，`std::vector`不是已知类型。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-02T00:09:36.420

包括向量.h

```
#include <vector> 
```

# mysql - 如果不存在则插入 mysql 5.5.24

> ID：12682797
> 
> 赞同：0
> 
> 时间：2012-10-02T00:04:59.470
> 
> 标签：mysql

我一直在环顾四周，但是我看不到我的错误，

我的查询

```
INSERT INTO p_location_check (location_id) VALUES (1) 
IF NOT EXISTS (SELECT approved, disapproved FROM p_location_check WHERE approved REGEXP '^1234568745$' OR disapproved = '^1234568745$' AND location_id=1); 
```

只是为了测试之后

```
INSERT INTO p_location_check (location_id) VALUES (1) 
IF NOT EXISTS (SELECT approved, disapproved FROM p_location_check WHERE approved = 1234568745 OR disapproved = 1234568745 AND location_id=1); 
```

回应

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的“如果不存在（选择已批准，未批准 FROM qp_location_check WHERE 批准”附近使用正确的语法）

服务器版本

> 服务器版本：5.5.24-0ubuntu0.12.04.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T06:49:48.063

**编辑：**

试试这个查询 -

```
INSERT INTO p_location_check (location_id) VALUES (1) FROM dual
WHERE (SELECT COUNT(*)
       FROM p_location_check
       WHERE approved = 1234568745 OR disapproved = 1234568745 AND location_id=1
       ) = 0; 
```

添加您的 WHERE 条件。

# javascript - 无法让 Google DFP 广告显示在 jQuery-UI 选项卡中

> ID：12682798
> 
> 赞同：1
> 
> 时间：2012-10-02T00:05:13.193
> 
> 标签：javascript, ajax, jquery-ui-tabs, google-dfp

我无法在 jQuery-UI 选项卡（通过 ajax 加载）中显示 Google DFP 广告。我这里有一个例子：

[http://www.anecka.com/google_dfp/](http://www.anecka.com/google_dfp/)

如您所见，初始页面加载和刷新工作正常，当用户在标签之间切换时，Google DFP 广告消失。Google 控制台显示我的标记是正确的，并且控制台中没有 javascript 错误。

我有一个推送广告的方法：

```
function pushVerticalGoogleAd(slot, div_id) {
        googletag.cmd.push(function() { 
            googletag.defineSlot('/7085388/' + slot, [950, 80], div_id).addService(googletag.pubads());
            googletag.enableServices();
            googletag.display(div_id); 
        });
    } 
```

每个选项卡都包含对此方法的调用，如下所示：

```
pushVerticalGoogleAd('homepage_top_950x80', 'ad1'); 
```

现在在你说这是因为我重用了相同的 div-id 并且我声明了重复的插槽之前，我同意，但是每当我在服务器上随机化广告 div_ids 时，它仍然会出现这个问题。

我知道我可能在这里用鞋敲钉子，所以任何有 Google DFP 经验的人都知道我在哪里可以买到锤子？:)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:27:54.677

我认为您应该尝试使用刷新方法...在不确切知道您要做什么的情况下很难知道这是否对您有用，但下面的代码至少允许广告通过多次点击显示...

尝试这个：

```
<html>
<head>
    <title>Test</title>
    <link rel="stylesheet" href="css/ui-lightness/jquery-ui-1.8.24.custom.css" />
    <script type="text/javascript" src="js/jquery-1.7.1.js"></script>
    <script type="text/javascript" src="js/jquery.ui.core.js"></script>
    <script type="text/javascript" src="js/jquery.ui.widget.js"></script>
    <script type="text/javascript" src="js/tabs.js"></script>
    <script type='text/javascript'>
        var googletag = googletag || {};
        googletag.cmd = googletag.cmd || [];
        (function() {
        var gads = document.createElement('script');
        gads.async = true;
        gads.type = 'text/javascript';
        var useSSL = 'https:' == document.location.protocol;
        gads.src = (useSSL ? 'https:' : 'http:') +
        '//www.googletagservices.com/tag/js/gpt.js';
        var node = document.getElementsByTagName('script')[0];
        node.parentNode.insertBefore(gads, node);
        })();
    </script>
    <script type="text/javascript">
        var divs = {};
        function pushVerticalGoogleAd(slot, div_id) {
            if(div_id in divs) {
                googletag.cmd.push(function() {
                    googletag.pubads().refresh([divs[div_id]]);
                });
            } else {
                googletag.cmd.push(function() {
                    divs[div_id] = googletag.defineSlot('/7085388/' + slot, [950, 80], div_id).addService(googletag.pubads());
                    googletag.enableServices();
                    googletag.display(div_id);
                });
            }
        }
    </script>
</head>
<body>
    <script type="text/javascript">
        $(document).ready(function() {
            $('#tabs-contain').tabs();
        });
    </script>
    <div id="tabs-contain">
        <ul id="tabs">
            <li><a href="ad1.html"><span>Tab 1</span></a></li>
            <li><a href="ad2.html"><span>Tab 2</span></a></li>
        </ul>
    </div>
</body>
</html> 
```

# mysql - 哪个数据库表更好？

> ID：12682804
> 
> 赞同：1
> 
> 时间：2012-10-02T00:06:27.257
> 
> 标签：mysql, sql, database

我只是想要一些建议，在数据库中创建“问题”表时，我需要存储每个问题的问题编号还是不需要，因为每个问题都有自己唯一的 ID，这要归功于自动增量，当学生参加考试，每个学生的问题将随机出现，因此他们无法复制答案。

换句话说，问题表应该是这样的（示例 1）：

```
 QuestionId (int 11) auto increment PK  //unique identifier for each question
    QuestionNo (int 3) //the question number
    QuestionContent (varchar 800) //the question itself
AnswerId (int 11) //Foreign key to AnswerId in Answer Table 
```

或者应该是这样的（示例2）：

```
 QuestionId (int 11) auto increment PK  //unique identifier for each question
    QuestionContent (varchar 800) //the question itself
AnswerId (int 11) //Foreign key to AnswerId in Answer Table 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T00:10:07.120

我想你回答了你自己的问题。自增 PK 字段意味着每个问题都会有一个唯一的 ID 号。您需要提供另一个问题编号字段的唯一原因是您是否需要能够根据已确定的其他编号系统查找问题，或者问题编号是否具有其他意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T00:10:20.897

我会制作`QuestionNo`一个表格的字段来连接一个测试和一个问题。例如，我将有一个`Question_on_Test`which 将包含该字段，因为它仅与特定的测试修订相关，而与问题本身无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T00:12:33.093

在您的第二个设计中，如果您从数据库中删除一个问题（无论出于何种原因），您将丢失该问题的 ID 号。这可能对您的设计至关重要，也可能不重要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T00:13:25.750

我认为在问题表中有一个 AnswerID 是没有意义的。这是假设一个问题可能有多个答案（一对多关系）。通常有一个正确答案和几个错误答案。

如果每个问题只有一个答案，则不需要在单独的表格中。

编辑：而且，由于问题可以随机排序，问题编号是没有意义的。

我认为答案表应该是：

```
int AnswerID  (unique ID)
char AnswerChar (A, B, C, D, E)
int QuestionID (parent Question ID)
bool IsCorrect
text AnswerText 
```

# scala - Maven 编译依赖错误 javax.mail 丢失

> ID：12682805
> 
> 赞同：0
> 
> 时间：2012-10-02T00:06:27.337
> 
> 标签：scala, maven, compilation, package, lift

我正在按照电梯指南中的说明设置基本的 hello world 应用程序（在 Windows 7 上使用 cygwin）

这样做后开始

```
mvn archetype:generate -U -DarchetypeGroupId=net.liftweb \
-DarchetypeArtifactId=lift-archetype-blank -DarchetypeVersion=2.0 \
-DarchetypeRepository=http://scala-tools.org/repo-releases \
-DgroupId=demo.helloworld -DartifactId=helloworld \
-Dversion=1.0-SNAPSHOT 
```

然后

```
cd helloworld
mvn jetty:run 
```

我收到以下错误

> [错误] 无法在项目 helloworld 上执行目标：无法解析项目 demo.helloworld:helloworld:war:1.0-SNAPSHOT 的依赖项：无法收集 [net.liftweb:lift-mapper:jar:2.0（编译）的依赖项， javax.servlet:servlet-api:jar:2.5 (提供), junit:junit:jar:4.7 (测试), org.mortbay.jetty:jetty:jar:[6.1.6,7.0) (测试), org.scala -lang:scala-compiler:jar:2.7.7 (test)]: 指定范围内没有可用于 javax.mail:mail:jar:[1.4,1.4.3) 的版本 -> [Help 1]

在此之前，对于 metadata.xml 文件的校验和错误有两个警告。我将校验和忽略放在我的 pom 文件中。

我从 Oracle 下载了`mailx`API 包并将其放在我的类路径中。在尝试了针对类似听起来错误的各种解决方案后，似乎没有任何效果。有人可以提出一些建议吗？

PS：我搜索了两天的答案并尝试了各种线程中出现的所有解决方案，但没有找到答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T03:05:36.667

您需要将`java.net`存储库显式添加到您的 pom.xml。（这很奇怪）

```
 <repositories>
    <repository>
    <id>Java.Net</id>
    <url>http://download.java.net/maven/2/</url>
    </repository>
    <!-- other repos -->
  </repositories> 
```

# jquery - jQuery 延迟/承诺/动画与 CoffeeScript

> ID：12682807
> 
> 赞同：0
> 
> 时间：2012-10-02T00:06:57.217
> 
> 标签：jquery, jquery-animate, coffeescript, jquery-deferred, promise

我想要为三件事制作动画：头部、脚部和手臂。我正在使用 jQuery 和 CoffeeScript。

我想创建一个像这样为头部和脚部设置动画的函数：

```
move_feet: () ->
   feet.animate({
        left: 100
    },{
        duration: 100
    })

move_head: () ->
   head.animate({
        left: 100
    },{
        duration: 100
    }) 
```

然后当脚和头完成移动时，移动手臂。

我尝试使用`when`/`then`模式，但我认为我没有正确使用它。

```
$.when(move_head(), move_feet()).done(=>
    move_arm()
); 
```

`move_feet`立即起火。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:53:44.773

你有正确的想法。当您使用 $.when 检查多个返回的承诺/延迟时，我认为您想使用 $.then(callback)。

```
$.when(promise1, promise2).then(callback); 
```

应该做的伎俩！

希望能帮助到你！

# linux - 使用 linux 命令 sed 选择多行

> ID：12682810
> 
> 赞同：8
> 
> 时间：2012-10-02T00:07:15.640
> 
> 标签：linux, shell, sed, awk

我有一个示例 [文件]，我想抓取第 3-6 行和第 11-13 行，然后使用单行命令进行排序并将其保存为 3_6-11_13。这些是我迄今为止使用的命令，但我没有得到想要的输出：

```
sed -n '/3/,/6/p'/11/,/13/p file_1 > file_2 | sort -k 2 > file_2  & sed -n 3,6,11,13p file_1 > file_2 | sort -k 2 file_2. 
```

有没有更好的方法来缩短这个。我曾考虑过使用 awk，但到目前为止我一直使用 sed。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-02T00:18:17.993

`sed`允许您按数字指定地址，如下所示：

```
sed -n '3,6p' 
```

这`-n`是为了防止`sed`自动打印输出。

然后，如果您使用`gsed`分号分隔这些命令，则可以运行多个命令：

```
sed -n '3,6p; 11,13p' | sort -k2 > 3_6-11_13 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T00:13:17.947

sed 使用 -e 选项组合多个命令

```
$ sed -e 'comm' -e 'comm' file.txt 
```

或者您可以使用分号分隔命令

```
$ sed 'comm;comm;comm' file.txt 
```

# javascript - 编码下一个/上一个按钮以在 Adob e Edge 的 Javascript 数组中选择项目

> ID：12682812
> 
> 赞同：0
> 
> 时间：2012-10-02T00:07:39.970
> 
> 标签：javascript, jquery, arrays, adobe-edge

我有一个需要在名为 updateMyInfo 的函数中显示的信息数组，该函数接受当前索引号的参数。我开始在索引 0 处显示项目，并且有一个下一个/上一个按钮可以在数组中移动。所以，我尝试：

```
// make the function visible anywhere
updateMyInfo = updateInfo;

function updateInfo(index) {
  slide.$("title").html(mySlide[index].title);
  slide.$("info").html(mySlide[index].info);
  slide.$("img").attr("src", "images/" + mySlide[index].img);
 }

var next = sym.getSymbol('details').getSymbolElement('next');
index = 0;
updateMyInfo(0);

next.click(function(){
    index++;
    updateMyInfo(index);    
}); 
```

该函数在 index=0 的情况下被调用一次，很好。我单击下一步，索引为 1，第二个数据显示。我再次单击下一步，索引再次为 0。

# css - CSS浮动正确问题

> ID：12682815
> 
> 赞同：0
> 
> 时间：2012-10-02T00:08:00.740
> 
> 标签：css, css-float

我有这个问题...我有一段文字，然后是我想要浮动的按钮：对，然后我有一个只是边框的 div ......就像这样

```
TEXT TEXT TEXT TEXT TEXT TEXT TEXT TEXT TEXT TEXT TEXT TEXT TEXT TEXT TEXT TEXT
<div style="float:right;">button</div>
<div class="dotline"></div> 
```

我的问题是顺序是文本，虚线，然后是按钮，当它应该是文本，按钮和虚线时，我该如何解决这个问题？

这是 dotline 类的 css

```
.dotline {
    border-top: 1px dotted #B0B0B0;
    height: 1px;
    margin: 10px 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T00:10:37.543

清除浮动：

```
.dotline {
    border-top: 1px dotted #B0B0B0;
    height: 1px;
    margin: 10px 0;
    clear : both;
} 
```

[http://jsfiddle.net/y5pgd/](http://jsfiddle.net/y5pgd/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T00:11:30.190

您可以剪切按钮的浮动。

您可以将 clear: both 添加到按钮

或在按钮后插入一个新的 cleafix div。

无论如何，您应该停止按钮浮动以获得正确的顺序。

# dropbox-api - Dropbox API 获取媒体列表的 URL

> ID：12682818
> 
> 赞同：1
> 
> 时间：2012-10-02T00:08:17.520
> 
> 标签：dropbox-api

我正在使用 Dropbox REST API，我想知道是否有一种方法可以列出文件夹中的文件以及每个文件的 URL？或者我是否必须为每个人单独调用媒体端点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-30T20:52:51.183

查看他们的[/media](https://www.dropbox.com/developers-v1/core/docs#media)文档。您需要遍历文件列表，但这应该可以解决问题。

# cgdb - 如何在 cgdb 中滚动 gdb 窗口？

> ID：12682821
> 
> 赞同：16
> 
> 时间：2012-10-02T00:09:02.880
> 
> 标签：cgdb

在使用 cgdb 时，如何滚动查看 gdb 窗口中可见的输出？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-02T04:11:02.017

PgUp 和 PgDn 应该滚动 gdb 窗口。如果没有，请检查您的`TERM`环境变量并确保其设置正确。

# android - 在 Android 小部件中使用 OpenGL

> ID：12682822
> 
> 赞同：3
> 
> 时间：2012-10-02T00:09:05.597
> 
> 标签：android, opengl-es

我可以制作一个小部件。我可以使用 Android 在 Open GL ES 中绘制原语。（我只是在学习）但是我还没有找到任何关于如何在 Android 小部件框架中使用 Open GL ES 的信息。对于初学者，我只想有一个可以绘制三角形的小部件。（我的目标是 2.2）任何人都可以指出我如何设置它的正确方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T00:17:39.720

这取决于您所说的小部件是什么意思。如果您在谈论应用程序小部件（或启动器小部件），您将无法做您想做的事。如果您在应用程序中创建小部件，请使用 SurfaceView（API Demos 有几个示例。）

# asp.net - SSRS & ASP.net ReportViewer rsAccessDenied

> ID：12682825
> 
> 赞同：2
> 
> 时间：2012-10-02T00:09:30.297
> 
> 标签：asp.net, reporting-services, ssrs-2008-r2

我在报告服务器上运行了一个 SSRS 2008 R2 报告。当我使用报告管理器或 Web 服务 URL 访问报告时，它可以正常工作。

```
http://mycomputer/ReportServer 
```

和

```
http://mycomputer/Reports 
```

当我将 ReportViewer 添加到 WebForms 网站并将其指向

```
http://mycomputer/reportserver 
```

使用我的报告的报告路径，在使用 VS.net 的网络服务器运行网站时，它会给我一个拒绝访问错误。

授予用户“mycomputer\myusername”的权限不足以执行此操作。(rsAccessDenied)

以下是我在 aspx 页面中使用的确切代码。

```
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>
<rsweb:ReportViewer ID="ReportViewer1" runat="server" ProcessingMode="Remote" Font-Names="Verdana"
    Font-Size="8pt" InteractiveDeviceInfos="(Collection)" WaitMessageFont-Names="Verdana"
    WaitMessageFont-Size="14pt" Width="712px">
    <ServerReport ReportPath="/MyReports" ReportServerUrl="http://mycomputer/reportserver" />
</rsweb:ReportViewer> 
```

mycomputer \ myusername 是机器上的管理员。我还在 ReportManager 中将其添加为管理员。

我在管理员模式下使用 IE 运行它。

还有什么可能导致访问被拒绝问题？

我读过其他人有问题，但他们中的大多数都不是针对 2008R2 的，所以我无法弄清楚如何尝试他们所做的事情。没有 IIS 可配置，也没有 IUSR 可授予对报告的访问权限。

SSRS 日志只显示相同的错误消息，没有任何其他信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T01:47:18.287

创建一个实现 IReportServerCredentials 的实例类应该可以解决该问题。添加以下类并调用如下：

```
ReportViewer1.ServerReport.ReportServerCredentials = new ReportServerCredentials("username", "pwd", "domain");

/// <summary>
/// Local implementation of IReportServerCredentials
/// </summary>
public class ReportServerCredentials : IReportServerCredentials
{
    private string _userName;
    private string _password;
    private string _domain;

    public ReportServerCredentials(string userName, string password, string domain)
    {
        _userName = userName;
        _password = password;
        _domain = domain;
    }

    public WindowsIdentity ImpersonationUser
    {
        get
        {
            // Use default identity.
            return null;
        }
    }

    public ICredentials NetworkCredentials
    {
        get
        {
            // Use default identity.
            return new NetworkCredential(_userName, _password, _domain);
        }
    }

    public bool GetFormsCredentials(out Cookie authCookie, out string user, out string password, out string authority)
    {
        // Do not use forms credentials to authenticate.
        authCookie = null;
        user = password = authority = null;
        return false;
    }
} 
```

感谢菲尔·克鲁斯：[链接](http://social.msdn.microsoft.com/Forums/en-US/vsreportcontrols/thread/c65abca7-0fdb-40fb-aabe-718f63377a55/ "关联")

# android - 适用于我们应用程序的 Android ICS Skin

> ID：12682834
> 
> 赞同：0
> 
> 时间：2012-10-02T00:10:30.813
> 
> 标签：android, skinning

有没有一种简单的方法让我们的应用程序看起来像 ICS 或 JB？主要是滑块和单选按钮。它们以绿色显示时看起来很旧。

对此有任何提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:27:58.830

[github](https://github.com/ChristopheVersieux/HoloEverywhere)上有一个不错的包，叫做 HoloEverywhere。

但有一件事，不要试图将其作为 ICS/JB 应用程序传递，仅仅因为它“*看起来*”像人们期望在原生 ICS/JB Android 设置中看到的用户界面。

该项目所能做的最好的事情就是以最新的 SDK 为目标，以保证您在 Android 的广泛使用市场，包括 GB。

目标高，而不是低；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T00:16:43.300

最好的方法是使用 Android 库“ [Actionbar Sherlock](http://actionbarsherlock.com/) ”。该库使用旧设备的所有本机 ICS 主题等。

> ActionBarSherlock 是兼容性库的扩展，旨在通过单个 API 促进在所有版本的 Android 中使用操作栏设计模式。

# bash - 使用mailx发送邮件时shell脚本中的乘法

> ID：12682837
> 
> 赞同：-2
> 
> 时间：2012-10-02T00:10:38.983
> 
> 标签：bash, shell, mailx

```
mailx -s "Report for $DATE_TENDAYS_FORMAT1" -r uname@host.com uname@host.com <<EOF

Total Items Purchased as per EDW: `echo $QUERY_TEN_DAYS3 | awk '{print $1}'`

Total Items Missing or Mismatch : `echo $QUERY_TEN_DAYS3 | awk '{print $2}'`

Mismatch  Percentage: `100*((echo $QUERY_TEN_DAYS3 | awk '{print $2}')/(echo $QUERY_TEN_DAYS3 | awk '{print $1}'))`

EOF 
```

每当我尝试使用`mailx`上述语法发送电子邮件时，我总是在第三行出现错误`(Mismatch Percentage) on * sign`。我在第三行的乘法过程中做错了什么？

**更新：-**

```
TEST1=`echo $QUERY_TEN_DAYS3 | awk '{print $1}'`
echo $TEST1

TEST2=`echo $QUERY_TEN_DAYS3 | awk '{print $2}'`
echo $TEST2

mailx -s "Report for $DATE_TENDAYS_FORMAT1" -r uname@host.com uname@host.com <<EOF
Comparison using previous day’s data

******************************************

Mismatch  Percentage: $((100 * ($TEST2/ $TEST1)))

EOF 
```

我已经尝试了上面的代码，但它仍然在第一行给我错误，因为`( unexpected`. 任何想法为什么会发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T01:10:47.677

**为小数部分使用预定义变量可以避免长命令行和混乱。**

事实上，用`echo`+`awk`来提取零件似乎有点过头了。根据模块的其他方面，最好将它们放入单独的变量中，而不是放入`$QUERY_TEN_DAYS3`.

现在，假设我们被 困住了`$QUERY_TEN_DAYS3`，它是一个以空格分隔的值，形式`"DIVISOR DIVIDEND ..."`为 ，另一种分解它的方法是这样的：

```
read -r FOO BAR JUNK <<<"$QUERY_TEN_DAYS3" 
```

然后，我们得到：

```
mailx -s "Report for $DATE_TENDAYS_FORMAT1" -r uname@host.com uname@host.com <<EOF

Total Items Purchased as per EDW: $FOO

Total Items Missing or Mismatch : $BAR

Mismatch  Percentage: $((100 * ($BAR / $FOO)))

EOF 
```

括号的位置首先进行除法（在乘法之前截断）似乎有问题，但这就是你上面所说的。通过使用变量，更容易发现这样的点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T02:35:17.137

**为我工作：**

所以问题可能是很多事情，例如没有实际使用`bash`（或它的最新版本）、没有运行您在此处发布的内容、输入错误、脚本文件中的 EOL 字符问题。

```
$ echo $BASH_VERSION
3.00.15(1)-release

$ QUERY_TEN_DAYS3="1 2"

$ TEST1=`echo $QUERY_TEN_DAYS3 | awk '{print $1}'`
$ echo $TEST1
1

$ TEST2=`echo $QUERY_TEN_DAYS3 | awk '{print $2}'`
$ echo $TEST2
2

$ cat <<EOF
> Comparison using previous day’s data
>
> ******************************************
>
> Mismatch  Percentage: $((100 * ($TEST2/ $TEST1)))
>
> EOF
Comparison using previous day’s data

******************************************

Mismatch  Percentage: 200 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T00:18:51.297

假设这是 bash shell，您可以使用如下表达式

```
$((100 * 4)) 
```

获得算术表达式的评估。将“4”替换为您提供的更大的表达式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T00:26:28.713

请试试这个：

```
$((100 * $(echo $QUERY_TEN_DAYS3 | awk '{print $2}') / $(echo $QUERY_TEN_DAYS3 | awk '{print $1}'))) 
```

还有使用*expr*命令或*let*命令的不同方式。

# android - BatteryManager 统计数据在 Android 上不起作用

> ID：12682841
> 
> 赞同：1
> 
> 时间：2012-10-02T00:11:04.830
> 
> 标签：android, batterymanager

我正在尝试使用 BroadCastReceiver 获得击球手水平：

```
int level = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, 0);
int scale = intent.getIntExtra(BatteryManager.EXTRA_SCALE, 0); 
```

我在 AndroidManifest.xml 中添加了以下权限：

```
<uses-permission android:name="android.permission.BATTERY_STATS" /> 
```

当我打印级别和比例时，我看到默认值 0。是否有其他设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T00:28:14.483

[以百分比计算电池电量：](http://developer.android.com/training/monitoring-device-state/battery-monitoring.html#CurrentLevel)

您可以通过从电池状态意图中提取当前电池电量和比例来查找当前电池电量，如下所示：

```
int level = battery.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);
int scale = battery.getIntExtra(BatteryManager.EXTRA_SCALE, -1);

float batteryPct = level / (float)scale; 
```

像这样实现广播接收器：

```
 BroadcastReceiver mybatteryReceiver= new BroadcastReceiver() {
            public void onReceive(Context context, Intent intent) {
                int rawlevel = intent.getIntExtra("level", -1);
                int scale = intent.getIntExtra("scale", -1);
                int level = -1;
                if (rawlevel >= 0 && scale > 0) {
                    level = (rawlevel * 100) / scale;
                }
                Log.d("TEMP","Battery Level in % is:: " + level + "%");
            }
        }; 
```

从这里获取代码它已经过试验和测试。工作正常。

[https://www.dropbox.com/s/1y6q5wu526ngz7t/BatteryStats.zip](https://www.dropbox.com/s/1y6q5wu526ngz7t/BatteryStats.zip)

代码结果： ![在此处输入图像描述](../Images/bff111ef9b4055d407c34cb71fca04b2.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-27T11:50:51.950

获取电池充电状态无需许可，只需在广播接收器中使用以下代码：-

int level = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, 0);

这将导致电池电量:)

# python - 如何在 Python 中实现 shell 作业控制基础知识？

> ID：12682846
> 
> 赞同：2
> 
> 时间：2012-10-02T00:12:02.597
> 
> 标签：python, bash, shell, unix, job-control

大多数现代 shell 都实现了基本的作业控制，例如挂起、恢复、中断和后台。

在 Python 中，如何使 shell 对 ^Z、fg、^C 和 bg（它们出现在 bash 中）敏感？或者我应该读什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T02:25:27.643

You can capture signals sent to your program using `signal` module. For instance `^Z` means `SIGTSTP` in Unix like systems.

```
import signal
jobs = []

def handler(signum, frame):
    jobs.append(frame)

signal.signal(signal.SIGTSTP, handler) 
```

Now when you type `Ctrl`+`Z` `handler` will be called and print "catch". You can capture `^C` using `signal.SIGINT`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T00:26:59.137

无需做任何事情：

```
python -c 'import time; time.sleep(600)' 
```

你可以测试你所有的键盘组合；）

# c# - 将 XML 字符串加载到数据表中

> ID：12682848
> 
> 赞同：0
> 
> 时间：2012-10-02T00:12:15.530
> 
> 标签：c#, visual-studio-2010, datatable, xml-parsing

```
 string parseData= "<TEST xmlns:dt=\"urn:schemas-microsoft-com:datatypes\"><A dt:dt=\"string\">10</A><B dt:dt=\"string\">20</B></TEST>";

            DataSet ds = new DataSet("Whatev");

            TextReader txtReader = new StringReader(parseData);
            XmlReader reader = new XmlTextReader(txtReader);
            ds.ReadXml(reader);
            DataTable ad = new DataTable("newT");
            ad.ReadXml(reader); 
```

为此，我在广告中得到空表，在 ds 中得到三个表。我所期待的是，一张表有两列 A 和 B，一行的值为 10 和 20。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T00:55:01.330

您根本没有正确使用它。有很多问题：

1.  您正在从同一流中读取两次。在第一遍中，流指针位于流的末尾。当它已经在末尾时，您尝试再次读取它，因此没有其他内容被读取。要么读入你的数据集，要么读入你的数据表，而不是两者兼而有之。或者，如果你真的想的话，至少要回到流的开头。

2.  您的 XML 格式不正确。它必须采用以下格式：

    ```
    <SomeRoot>
        <TableName>
            <ColumnName>ColumnValue</ColumnName>
        </TableName>
        <TableName>
            <ColumnName>AnotherColumnValue</ColumnName>
        </TableName>
    </SomeRoot> 
    ```

    您将无法对任意 XML 使用该方法。

3.  您的表没有架构集。您需要读取模式或预先设置它。

    ```
    var table = new DataTable("TEST");
    table.Columns.Add("A", typeof(string));
    table.Columns.Add("B", typeof(string));
    table.ReadXml(xmlReader); 
    ```

试试这个：

```
var xmlStr = @"<Root>
    <TEST>
        <A>10</A>
        <B>20</B>
    </TEST>
</Root>";
var table = new DataTable("TEST");
table.Columns.Add("A", typeof(string));
table.Columns.Add("B", typeof(string));
table.ReadXml(new StringReader(xmlStr)); 
```

* * *

如果您决定自己解析 XML，LINQ 可以在这里为您提供帮助。

```
public static DataTable AsDataTable(XElement root, string tableName, IDictionary<string, Type> typeMapping)
{
    var table = new DataTable(tableName);

    // set up the schema based on the first row
    XNamespace dt = "urn:schemas-microsoft-com:datatypes";
    var columns =
       (from e in root.Element(tableName).Elements()
        let typeName = (string)e.Element(dt + "dt")
        let type = typeMapping.ContainsKey(typeName ?? "") ? typeMapping[typeName] : typeof(string)
        select new DataColumn(e.Name.LocalName, type)).ToArray();
    table.Columns.AddRange(columns);

    // add the rows
    foreach (var rowElement in root.Elements(tableName))
    {
        var row = table.NewRow();
        foreach (var column in columns)
        {
            var colElement = rowElement.Element(column.ColumnName);
            if (colElement != null)
                row[column.ColumnName] = Convert.ChangeType((string)colElement, column.DataType);
        }
        table.Rows.Add(row);
    }
    return table;
} 
```

然后使用它：

```
var xmlStr = @"<Root>
    <TEST xmlns:dt=""urn:schemas-microsoft-com:datatypes"">
        <A dt:dt=""string"">10</A>
        <B dt:dt=""string"">20</B>
    </TEST>
</Root>";
var root = XElement.Parse(xmlStr);
var mapping = new Dictionary<string, Type>
{
    { "string", typeof(string) },
};
var table = AsDataTable(root, "TEST", mapping); 
```

可能有更好的方法来获取数据类型的关联 .NET 类型，但我目前不知道该怎么做，如果我发现了，我会更新。

# c# - XAML - ListViewItem - IsEnabled 绑定

> ID：12682858
> 
> 赞同：3
> 
> 时间：2012-10-02T00:13:40.033
> 
> 标签：c#, xaml, windows-8, microsoft-metro, winrt-xaml

请让我摆脱痛苦：

```
<ListView.ItemContainerStyle>
    <Style TargetType="ListViewItem">
        <Setter Property="IsEnabled" Value="{Binding MyBoolField}" />
    </Style>
</ListView.ItemContainerStyle> 
```

where`MyBoolField`是`ListView`'sassigned中每个项目的可用属性`ItemsSource`，当然是类型`bool`。

期望的行为是`IsEnabled`每个的属性都`ListViewItem`绑定到`MyBoolField`它包含的对象的属性（来自`ListView`'s的元素`ItemsSource`）。然而，上面的例子没有注意这个绑定并且总是`true`.

如果我将值设置为`false`静态，则该项目将按预期禁用。

我只能假设这是范围界定问题，或在此特定场景中限制使用绑定，但是我无法找到任何文档来支持这一点。

也许知道在`DataTemplate`分配给 this`ListView`的`ItemTemplate`所有工作中设置的绑定是有用的，所以希望问题不是那么基本/愚蠢。

## 评论中的要点

*   调试“输出”窗口中没有相关输出。
*   在其他地方绑定`MyBoolField`属性可以正常工作，因为底层数据源正确地提供了一个布尔值，这似乎只是在这种情况下绑定它的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T11:24:02.287

好的，阅读[这篇文章](https://stackoverflow.com/questions/11857505/how-do-i-do-bindings-in-itemcontainerstyle-in-winrt)似乎它是 WinRT 的一个已知限制，也许你在那里发现了一些有用的东西。我也会尝试一件事，因为那篇文章中的 OP 说了一些关于它的事情。使用`Self`绑定，并使用`Path=DataContext.MyBoolField`

进一步阅读，这是基于 WinRT 构建的 Silverlight 的限制。所以[这](http://blog.xyzzer.me/2011/10/26/workaround-for-binding-not-supported-on-stylesettervalue-in-silverlight/)是一种解决方法，也应该适用于 WinRT

# java - 尽管使用了 validate()，但 GUI 没有更新

> ID：12682860
> 
> 赞同：2
> 
> 时间：2012-10-02T00:13:50.287
> 
> 标签：java, swing, validation, user-interface, connect

这是我正在制作的 Connect Four 程序。到目前为止，我可以将检查器添加到空（合格）插槽中，每次交替使用红色和黑色。我的代码可能效率很低，因为这是我的第一个摇摆程序。但是，我唯一的主要问题是在单击空插槽后我无法真正更新 GUI。我尝试了 validate()，但这似乎没有做任何事情。可以在下面找到程序中使用的图像的链接。非常感谢你的帮助！

```
import java.awt.Container;
import java.awt.EventQueue;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Scanner;

import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JLabel;

import javax.swing.*;

public class GameFrame extends JFrame {

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    frame = new GameFrame();
                    frame.setContentPane(new JLabel(new ImageIcon(getClass()
                            .getResource("675 x 588 Connect Four.png"))));
                    frame.addSlots();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the frame.
     */

    static GameFrame frame;
    private static Icon slotForButton;
    public static JButton slotButton;
    static private JButton[] slot = new JButton[42];
    static private String[] slotColor = new String[42];
    static boolean turn = true;
    static boolean legitClick;
    static String slotClicked;
    static int slotNum;
    static Container gamePane;

    public GameFrame() {
        setBounds(100, 100, 685, 622);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setResizable(false);
        super.setTitle("Connect Four by Joel Christophel");
    }

    void addSlots() {
        ButtonHandler bh = new ButtonHandler();
        gamePane = getContentPane();
        gamePane.setLayout(new GridLayout(6, 6));
        int counter = 0;

        for (JButton e : slot) {
            slot[counter] = makeSlot("white");
            slot[counter].setBorderPainted(false);
            slot[counter].setContentAreaFilled(false);
            slot[counter].setFocusPainted(false);
            slot[counter].setActionCommand(counter + "");
            slotColor[counter] = "white";

            slot[counter].addActionListener(bh);
            add(slot[counter]);

            counter++;
        }
    }

    static JButton makeSlot(String color) {

        if (color.equals("white")) {
            slotForButton = new ImageIcon(
                    GameFrame.class.getResource("Space.png"));
        }

        else if (color.equals("red")) {
            slotForButton = new ImageIcon(
                    GameFrame.class.getResource("Red Checker.png"));
        }

        else if (color.equals("black")) {
            slotForButton = new ImageIcon(
                    GameFrame.class.getResource("Black Checker.png"));
        }

        slotButton = new JButton(slotForButton);

        return slotButton;
    }

    private class ButtonHandler implements ActionListener {

        public void actionPerformed(ActionEvent e) {
            slotClicked = e.getActionCommand();

            GameFrame.legitClick(slotClicked);
        }

    }

    private static void changeTurn() {
        turn = !turn; // true is red's turn; false is black's
    }

    private static void legitClick(String slotClicked1) {
        legitClick = false;

        slotClicked = slotClicked1;
        Scanner numScan = new Scanner(slotClicked);
        slotNum = numScan.nextInt();

        try {
            if (!slotColor[slotNum + 7].equals("white")&&slotColor[slotNum].equals("white")) {
                legitClick = true;
            }
        }

        catch (ArrayIndexOutOfBoundsException t) {

            if (slotColor[slotNum].equals("white")) {
                legitClick = true;
            }
        }

        if (legitClick == true) {
            if (turn == true) {
                slot[slotNum] = makeSlot("red");
                slotColor[slotNum] = "red";
                System.out.println("Put " + slotColor[slotNum] + " checker     in slot number " + slotNum + ".");
            }

            else if (turn == false) {
                slot[slotNum] = makeSlot("black");
                slotColor[slotNum] = "black";
                System.out.println("Put " + slotColor[slotNum] + " checker      in slot number " + slotNum + ".");
            }

            gamePane.validate();
            GameFrame.changeTurn();
        }
        System.out.println(turn);
    }

} 
```

[http://i.stack.imgur.com/8cNB3.png](http://i.stack.imgur.com/8cNB3.png) 675 x 588 连接四.png

[http://i.stack.imgur.com/6oX7A.png](http://i.stack.imgur.com/6oX7A.png)黑色棋盘格.png

[http://i.stack.imgur.com/cdF7u.png](http://i.stack.imgur.com/cdF7u.png)红色棋盘格.png

[http://i.stack.imgur.com/JNT61.png](http://i.stack.imgur.com/JNT61.png) Space.png

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T04:42:15.073

两件事，在我看来，您在代码中做错了。

*   首先检查您在 **legitClick()**方法中指定的条件，无论何时单击，它总是返回 false (legitClick)。因此，视图不会出现任何变化。
*   看来您在 a中创建了一个新的**JButton**`makeSlot()`，这并不是您想要的，您只需更改相应**JButton的****Icon**而不是创建一个新的。

 **`makeSlot()`我在方法和方法内部对代码进行了一些修改`legitClick()`，尽管您必须自己更改逻辑才能真正按照您的意愿工作，因为我不知道检查器是如何工作的:(

```
import java.awt.Container;
import java.awt.EventQueue;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Scanner;

import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JLabel;

import javax.swing.*;

public class GameFrame extends JFrame {

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    frame = new GameFrame();
                    frame.setContentPane(new JLabel(new ImageIcon(getClass()
                            .getResource("/image/675 x 588 Connect Four.png"))));
                    frame.addSlots();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the frame.
     */

    static GameFrame frame;
    private static Icon slotForButton;
    public static JButton slotButton;
    static private JButton[] slot = new JButton[42];
    static private String[] slotColor = new String[42];
    static boolean turn = true;
    static boolean legitClick;
    static String slotClicked;
    static int slotNum;
    static Container gamePane;

    public GameFrame() {
        setBounds(100, 100, 685, 622);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setResizable(false);
        super.setTitle("Connect Four by Joel Christophel");
    }

    void addSlots() {
        ButtonHandler bh = new ButtonHandler();
        gamePane = getContentPane();
        gamePane.setLayout(new GridLayout(6, 6));

        for (int counter = 0; counter < slot.length; counter++) {
            // Added by me.
            slot[counter] = new JButton();
            slot[counter].setIcon(makeSlot("white", counter));
            slot[counter].setBorderPainted(false);
            slot[counter].setContentAreaFilled(false);
            slot[counter].setFocusPainted(false);
            slot[counter].setActionCommand(counter + "");
            slotColor[counter] = "white";

            slot[counter].addActionListener(bh);
            add(slot[counter]);

            //counter++;
        }
    }

    static Icon makeSlot(String color, int index) {

        if (color.equals("white")) {
            slotForButton = new ImageIcon(
                    GameFrame.class.getResource("/image/Space.png"));
        }

        else if (color.equals("red")) {
            slotForButton = new ImageIcon(
                    GameFrame.class.getResource("/image/Red Checker.png"));
        }

        else if (color.equals("black")) {
            slotForButton = new ImageIcon(
                    GameFrame.class.getResource("/image/Black Checker.png"));
        }

        //slot[index].setIcon(slotForButton);

        return slotForButton;
    }

    private class ButtonHandler implements ActionListener {

        public void actionPerformed(ActionEvent e) {
            slotClicked = e.getActionCommand();

            GameFrame.legitClick(slotClicked);
        }

    }

    private static void changeTurn() {
        turn = !turn; // true is red's turn; false is black's
    }

    private static void legitClick(String slotClicked1) {
        legitClick = false;

        slotClicked = slotClicked1;
        Scanner numScan = new Scanner(slotClicked);
        slotNum = numScan.nextInt();

        try {
            if (slotColor[slotNum + 7].equals("white")&&slotColor[slotNum].equals("white")) {
                legitClick = true;
            }
        }

        catch (ArrayIndexOutOfBoundsException t) {

            if (slotColor[slotNum].equals("white")) {
                legitClick = true;
            }
        }

        /*
         * This variable is used to tell
         * makeSlot that the JButton at
         * this index is pressed. So
         * simply change the Icon for this
         * JButton, instead of adding a new 
         * JButton.
         */
        int index = Integer.parseInt(slotClicked1);

        if (legitClick == true) {
            if (turn == true) {
                slot[index].setIcon(makeSlot("red", index));
                slotColor[slotNum] = "red";
                System.out.println("Put " + slotColor[slotNum] + " checker     in slot number " + slotNum + ".");
            }

            else if (turn == false) {
                slot[index].setIcon(makeSlot("black", index));
                slotColor[slotNum] = "black";
                System.out.println("Put " + slotColor[slotNum] + " checker      in slot number " + slotNum + ".");
            }

            //gamePane.validate();
            GameFrame.changeTurn();
        }
        System.out.println(turn);
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T00:17:17.153

简单的答案是在之后添加这行代码`gamePane.validate();`

`gamePane.repaint();`

正确答案是学习如何使用[SwingWorker](http://en.wikipedia.org/wiki/SwingWorker)**

# javascript - 骨干无法解析json

> ID：12682862
> 
> 赞同：0
> 
> 时间：2012-10-02T00:14:00.413
> 
> 标签：javascript, json, backbone.js

我正在使用backbone.js，并试图从twitter 获取一些json，但它不起作用，集合的长度为0。这是代码。

```

var Tweet = Backbone.Model.extend();

var Tweets = Backbone.Collection.extend({
    型号：推特，
    url: 'http://api.twitter.com/1/favorites.json?screen_name=dhh',
    解析：函数（响应）{
        返回响应。结果；
    }
});

var tweets = new Tweets();
tweets.bind('reset', function(tweets) {
   警报（推文.长度）；
});
推文.fetch();

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T03:51:45.833

尝试

```
parse: function(response) {
  return response;
} 
```

将我的浏览器指向我`api.twitter.com/1/favorites.json?screen_name=dhh`没有看到 .results 属性，只是一个包含对象的数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:09:52.027

解决方案是去掉 parse 函数，它与其他答案建议的效果相同，并添加 &callback=?

# android - 在 android tts 中无法获得所需的 (SVOX) 语言

> ID：12682863
> 
> 赞同：1
> 
> 时间：2012-10-02T00:14:11.540
> 
> 标签：android, text-to-speech

我有一个应用程序应该以多种语言实现 tts。这些语言不适用于标准 PICO 引擎，所以我需要 SVOX 或类似的东西。我已经安装了 SVOX 和所需的声音，悬停我无法更改我的手机 tts 引擎（我有 android 2.1，所以没有这个选项，我也无法安装 tts 扩展应用程序，因为我的手机不兼容） .

我可能应该以某种方式以编程方式更改正在使用的引擎，但我似乎无法做到这一点。

这是我的代码：如果我使用标准声音，这可以工作，而我需要的声音不可用

```
public void onInit(int status) {

    if (status == TextToSpeech.SUCCESS) {

        Locale[] AvalLoc = Locale.getAvailableLocales();

        Log.i("TTS","Available locales " + Arrays.toString(AvalLoc));
               /*
                   JUST TRYING TO OUTPUT WHICH LANGUAGES ARE AVAILABLE
                 */
         for (Locale l : AvalLoc) {
             int buf = tts.setLanguage(l);

             if (buf == TextToSpeech.LANG_MISSING_DATA
                     || buf == TextToSpeech.LANG_NOT_SUPPORTED) {
                 Log.i("TTS", "Language NOT available" + l.getCountry());
             } else {
                 Log.i("TTS","Language available" + l.getCountry());
             }

         }

        Locale loc = new Locale("ita","ITA"); /*This works, but I would need to be able to use SVOX voices instead*/

        int result = tts.setLanguage(loc);
        tts.setOnUtteranceCompletedListener(onUtteranceCompleted);

        if (result == TextToSpeech.LANG_MISSING_DATA
                || result == TextToSpeech.LANG_NOT_SUPPORTED) {
            Log.e("TTS", "This Language is not supported");
        } else {
          btnSpeakQuestion.setEnabled(true); 
        }

    } else {
        Log.e("TTS", "Initilization Failed!");
    }

} 
```

我安装了标准和 SVOX TTS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T21:02:57.297

我在 pt_BR 语言环境中遇到了类似的问题，为了在我的 Android 设备上使用 SVOX，我必须使用 setEngineByPackageName 方法更改默认的 TTS 引擎（顺便说一句，该方法已被弃用）。

使用 SVOX Classic，您应该更改 TTS 引擎并给出包名称：

```
int result = tts.setEngineByPackageName("com.svox.classic");
if( result == TextToSpeech.ERROR ) {
    //Could not find svox classic
} 
```

根据[Android API](http://developer.android.com/reference/android/speech/tts/TextToSpeech.html)，您不应使用此方法，因为它不会通知调用者 TTS 已初始化。但至少将有助于在不同语言中测试 SVOX。

顺便说一句，一旦你改变了 TTS 引擎，设置语言环境就没有效果了：

```
int result = tts.setLanguage(Locale.US); 
```

即使在更改 TTS 引擎后使用上面的设置语言，我的应用程序也会继续使用 SVOX 配置 (pt_BR)。

**重要提示**：仅当在 TTS 配置上启用 SVOX 时，上述方法才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T16:09:33.573

你确定你的执照吗？SVOX 现在被 Nuance 收购。

# android - 处理Android App中Web服务宕机的情况

> ID：12682864
> 
> 赞同：1
> 
> 时间：2012-10-02T00:14:20.460
> 
> 标签：android, web-services, android-asynctask

我是初学者。我正在创建一个使用返回 SOAP 的 Azure Web 服务的 Android 应用程序。Web 服务的地址是*http://XXXXXXXX.cloudapp.net/Service.svc/*。

我正在使用 ksoap2 来使用该服务。我想涵盖所有基础。我已经处理了 Android 设备中没有互联网连接的情况。但是，我想处理 Web 服务关闭的不太可能的情况。

人们是如何做到这一点的？我是否在 catch 中使用某种异常处理程序？哪个抓？提前致谢。我正在使用 AsyncTask：

```
 public class getSetWSDate extends AsyncTask<Void, Void, Void> 
```

{

```
 ProgressDialog dialog;

   @Override
   protected void onPreExecute() {
       // TODO Auto-generated method stub
       super.onPreExecute();

       dialog = ProgressDialog.show(activity, "", "Please wait...");

   }

   @Override
   protected Void doInBackground(Void... params) {
       // TODO Auto-generated method stub

       try {
            SoapObject request = new SoapObject(NAMESPACE, DATE_METHOD_NAME); 

               SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
               envelope.dotNet = true;
               envelope.setOutputSoapObject(request);

               HttpTransportSE ht = new HttpTransportSE(URL);
               ht.debug = true;

               ht.call(SOAP_ACTION_DATE, envelope);

               final  SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
               final String strDate = response.toString();

               SimpleDateFormat dateFormat = new SimpleDateFormat("dd-MM-yyyy");
                Date webServiceDate = new Date(); //"2013-07-07 10:00:00" 
                try {

                    webServiceDate = (Date)dateFormat.parse(strDate);
                } catch (ParseException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                catch (Exception e) {
                      e.printStackTrace();
                  }
       syncDateDatasource.open();

   syncDateDatasource.createDate(webServiceDate);
   syncDateDatasource.close();
       }        catch (Exception e) {
              e.printStackTrace();
          }
       return null;
   }

   @Override
   protected void onPostExecute(Void result) {
       // TODO Auto-generated method stub
       super.onPostExecute(result);

       if(dialog.isShowing())
       {
           dialog.dismiss();
       }

       try {
         ....

       } catch (Exception e) {
                  e.printStackTrace();
              }

   } 
```

}

# ruby-on-rails-3 - Heroku 应用程序正常工作，但不允许我推送其他更改

> ID：12682866
> 
> 赞同：1
> 
> 时间：2012-10-02T00:14:32.367
> 
> 标签：ruby-on-rails-3, git, heroku

我有一个带有两个遥控器的 heroku 应用程序：登台和生产。到目前为止，我对此没有任何问题。

今天我已成功推送到我的生产应用程序，但在尝试推送/获取我的暂存应用程序时出现以下错误。

```
 !  Heroku Git error, please try again shortly.
 !  See http://status.heroku.com for current Heroku platform status.
 !  If the problem persists, please contact http://support.heroku.com.

fatal: The remote end hung up unexpectedly 
```

登台应用程序工作正常。它响应请求，我可以成功地做一些事情`heroku run console --remote=staging`。

我尝试`git push -f staging master`并得到了同样的错误。我所有的 heroku 应用程序都在运行，但由于某种原因，我无法推送到这个登台应用程序。

这是我跑步时得到的`heroku run rake about --remote=staging`

```
About your application's environment
Ruby version              1.9.2 (x86_64-linux)
RubyGems version          1.3.7
Rack version              1.4
Rails version             3.2.8
Active Record version     3.2.8
Action Pack version       3.2.8
Active Resource version   3.2.8
Action Mailer version     3.2.8
Active Support version    3.2.8
Middleware                Rack::Cache, ActionDispatch::Static, Rack::Lock, Rack::Auth::Basic, #<ActiveSupport::Cache::Strategy::LocalCache::Middleware:0x00000003adf3b0>, Rack::Runtime, Rack::MethodOverride, ActionDispatch::RequestId, Rails::Rack::Logger, ActionDispatch::ShowExceptions, ActionDispatch::DebugExceptions, ActionDispatch::RemoteIp, ActionDispatch::Callbacks, ActiveRecord::ConnectionAdapters::ConnectionManagement, ActiveRecord::QueryCache, ActionDispatch::Cookies, ActionDispatch::Session::CookieStore, ActionDispatch::Flash, ActionDispatch::ParamsParser, ActionDispatch::Head, Rack::ConditionalGet, Rack::ETag, ActionDispatch::BestStandardsSupport, Warden::Manager
Application root          /app
Environment               staging
Database schema version   20120922013103 
```

# ruby-on-rails - 向引用其他表的 RoR 数据库添加一行

> ID：12682869
> 
> 赞同：0
> 
> 时间：2012-10-02T00:14:57.087
> 
> 标签：ruby-on-rails

我有一个表 Owners 和 Pets。每个 Owner 拥有_many 个宠物，每个宠物都属于_to 所有者。我正在编写一个通过获取 owner_id 和宠物信息来创建新宠物的函数。到目前为止我有

```
pet = Pet.new(pet_hash)
pet.save 
```

但是我如何将该 Pet 与 owner_id 关联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:19:32.517

假设您有所有者，您可以执行以下操作：

```
owner.pets.build(pet_hash)
owner.save 
```

# c# - 在 RichEditBox 中编辑单个字符或单词？

> ID：12682871
> 
> 赞同：0
> 
> 时间：2012-10-02T00:15:13.360
> 
> 标签：c#, xaml, windows-8, visual-studio-2012

![在此处输入图像描述](../Images/d51a828bc37b1292925bdbde6b2c5c5f.png)

基本上在 RichEditBox 中，您可以粘贴文本，它可以根据您复制的内容自动格式化粘贴的文本。我想知道如何将文档的特定部分（例如单词或句子）设置为特定形式的字体颜色或字体样式或有关文本的任何其他属性。

我找不到任何关于如何做这样的事情的真实文档。

编辑：

我发现：

```
 richEditBox.Document.GetRange(3, 10).CharacterFormat.ForegroundColor = Windows.UI.Colors.Blue; 
```

如果有人知道更好的东西，请发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T14:32:31.883

只需使用

```
richEditBox.Document.GetRange(3, 10).CharacterFormat.ForegroundColor = Windows.UI.Colors.Blue; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:29:25.297

你在寻找这样的东西吗？

[http://msdn.microsoft.com/en-us/library/0dhsw8eb(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/0dhsw8eb(v=vs.90).aspx)

# dependency-injection - Castle.Windsor 不会使用 FromAssembly.InThisApplication 运行安装程序，除非代码中引用了程序集

> ID：12682873
> 
> 赞同：2
> 
> 时间：2012-10-02T00:15:35.227
> 
> 标签：dependency-injection, castle-windsor

我有 2 个项目，一个是 MVC 站点，另一个是类库。MVC 站点引用了类库。

`IWindsorInstaller`我在 MVC 站点和类库中有一个实现。MVC 站点中没有直接引用类库中定义的任何类的代码，它们都是在别处定义的接口的实现。

在 MVC 站点中，在应用程序启动中我正在做通常的事情

```
var container = new Castle.Windsor.WindsorContainer();
container.Install(FromAssembly.InThisApplication()); 
```

这不会调用类库中的安装程序。但是，如果我这样做

```
container.Install(FromAssembly.Containing<ClassFromTheClassLibrary>()); 
```

安装程序被调用两次。似乎 Castle 需要对其他程序集的实际代码内引用才能获取`InThisApplication`它。我可以通过这样做来解决这个问题：

```
container.Install(FromAssembly.This());
container.Install(FromAssembly.Containing<ClassFromTheClassLibrary>()); 
```

但我希望不必直接引用其他程序集。

*更新*命名空间是：

*   MVC 应用程序是 MyApp.OnlineProducts.Service
*   类库是 MyApp.Individuals.Service

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T00:38:31.760

如果您按照所需的命名约定命名程序集，这应该可以工作。如果您的主应用程序程序集名称是 MyApp.exe，则应将其他类库命名为 MyApp.*.dll（例如 FirstClassLibrary.Whatever.dll 和 MyApp.SecondClassLibrary.dll），Windsor 将选取所有遵守命名的相关库惯例。请参阅解释此行为的 Windsor 文档中的[此页面。](http://docs.castleproject.org/Default.aspx?Page=Whats-New-In-Windsor-3&NS=Windsor&AspxAutoDetectCookieSupport=1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T00:42:30.137

FromAssembly.InThisApplication() 匹配使用调用程序集作为前缀的程序集。从 MyApp.dll 调用将匹配 MyApp.Core.dll 和 MyApp.Stuff.dll。

那么，重命名您的类库可能是一种选择吗？

否则，您可能希望使用： FromAssembly.InDirectory(new AssemblyFilter("c:\dir","*.dll"))
来定位您的“组件程序集”。

== 更新 == 我的评论具有误导性。

FromAssembly.InThisApplication() 仅遍历调用程序集引用的程序集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-26T09:18:02.760

按照此处的其他答案，在构建 Web 应用程序/wcf 服务时，请确保类调用

```
var container = new Castle.Windsor.WindsorContainer();
container.Install(FromAssembly.InThisApplication()); 
```

不在 App_Code 文件夹中。这是一个容易犯的错误，因为 Windsor 引导过程依赖`AppInitialize()`于 App_Code 中某个位置的方法，但是在 App_Code 文件夹中拥有实际的引导代码会使其存在于单独的 App_Code 程序集中，从而破坏了此处提到的程序集前缀转换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-05T06:23:06.350

要获取当前正在执行的程序集，请遵循其他答案。

```
public class ServiceIoC
{
    private static IWindsorContainer _container;
    private static int initstatus = 0;

    public static IWindsorContainer Container
    {
        get
        {
            if (_container == null && initstatus == 0)
            {
                initstatus = 1;
                _container = new WindsorContainer();
                _container.Install(FromAssembly.InThisApplication(Assembly.GetExecutingAssembly()));
            }

            return _container;
        }
    }

} 
```

# html - 是什么导致了这个巨大的空白？

> ID：12682885
> 
> 赞同：1
> 
> 时间：2012-10-02T00:17:19.300
> 
> 标签：html, css

有问题的网址：http: [//bit.ly/PSWSk5](http://bit.ly/PSWSk5)

当我注意到我的浏览器（Chrome）让我向右滚动时，我目前正在上面的页面上进行编码，显示一个不应该存在的巨大白色区域。

我查看了代码，但似乎看不到导致问题的原因。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T00:23:53.497

您有一个高度和宽度为 1000 像素的 iframe。iframe 的 id 和名称是 id="f2655f1b1" name="f2f789918c"。

# node.js - 试图让节点快递应用程序运行

> ID：12682886
> 
> 赞同：0
> 
> 时间：2012-10-02T00:17:22.543
> 
> 标签：node.js, express

我的机器（mac）上安装了节点、mongodb 和 redis，并尝试 使用以下说明测试此应用程序[https://github.com/vinkaga/node-backbone](https://github.com/vinkaga/node-backbone)

```
Install and run MongoDB
Install and run Redis.io
Edit config.js if you are running MongoDB or Redis.io from another machine or non-default port
Start server by typing "node server.js" 
```

以前从未使用过 node 或 express 并且天真地假设运行`node server.js`就足以让一切开始，我做到了，但它说

```
![Error: Cannot find module 'express'][1] 
```

这是应用程序的目录

![目录](../Images/b5663c0a6a11c97901869b4751770eb9.png)

这是 package.json 文件。我还需要做些什么才能让它在本地机器上运行吗？

```
{
    "name":"YOUR-PROJECT-NAME",
    "description":"YOUR PROJECT DESCRIPTION",
    "author":"YOUR NAME <your@emailaddress.com>",
    "version":"0.0.1",
    "dependencies":{
        "connect":">=2.1.2",
        "express":"2.x.x",
        "connect-redis" : ">=1.3.0",
        "jade":">=0.24.0",
        "ejs" : ">=0.7.1",
        "mongoose":">=2.5.14",
        "socket.io":">=0.9.5",
        "connect-assetmanager":">=0.0.27",
        "connect-assetmanager-handlers" : ">=0.0.18"
    },
    "devDependencies":{
        "vows":">=0.6.2",
        "mocha":">=1.0.1",
        "should":">=0.6.1",
        "request":">=2.9.x",
        "soda":">=0.2.5"
    },
    "engine":"node >= 0.6.12"
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T00:24:18.083

从您的项目目录运行此命令

> $ npm 安装

# c++ - Qt C++ - 在 QSplashScreen 内对齐 QProgressBar

> ID：12682888
> 
> 赞同：5
> 
> 时间：2012-10-02T00:17:42.110
> 
> 标签：c++, qt, user-interface

我通过子类化 QSplashScreen将 a`QProgressBar`放在里面。`QSplashScreen`它覆盖了`drawContents()`方法。

我以为我已经正确设置了几何图形，但它同时呈现在屏幕的顶部和底部。我不知道为什么。也许还有另一种对齐方式。数字是正确的，因为图像是 380x284，所以 19 高度的进度条应该向下 265 像素。

抱歉，图片很糟糕，闪屏没有显示打印屏幕按钮。目前它只是一个 1 色的白色闪屏，但正如您所见，顶部和底部的进度条（它们都是相同的颜色，是来自相机的照明）。

[http://i.imgur.com/p1LoJ.jpg](http://i.imgur.com/p1LoJ.jpg)

另一个问题是`showMessage()`QSplashScreen 的方法。我希望消息显示在进度条上方，右对齐......如果有人有任何想法如何做到这一点。

闪屏.cpp

```
#include "splashscreen.h"

SplashScreen::SplashScreen(QApplication *app, QWidget *parent) :
    QSplashScreen(parent)
{
    this->app = app;

    this->setPixmap(QPixmap(":/images/splashscreen.png"));
    this->setCursor(Qt::BusyCursor);

    // if I dont make it a child, it *only* renders at the top
    progress = new QProgressBar(this); 
    progress->setGeometry(0, 265, 380, 19); // puts it at bottom
    progress->setAlignment(Qt::AlignHCenter | Qt::AlignVCenter);
    progress->setValue(0);
    progress->setMaximum(100);
    progress->setEnabled(true);

    this->showMessage("Hello", Qt::AlignBottom);

    connect(progress, SIGNAL(valueChanged(int)), this, SLOT(progressBarUpdated(int)));
}

void SplashScreen::drawContents(QPainter *painter)
{
    QSplashScreen::drawContents(painter);
    this->progress->render(painter);
}

void SplashScreen::progressBarUpdated(int value)
{
    this->repaint();
    this->app->processEvents();
} 
```

闪屏.h

```
#ifndef SPLASHSCREEN_H
#define SPLASHSCREEN_H

#include <QSplashScreen>
#include <QProgressBar>
#include <QApplication>

class SplashScreen : public QSplashScreen
{
    Q_OBJECT
public:
    explicit SplashScreen(QApplication *app, QWidget *parent = 0);
    QProgressBar *progress;
    QWidget *spacer;
    QApplication *app;

public slots:
    void progressBarUpdated(int value);

protected:
    void drawContents(QPainter *painter);

};

#endif // SPLASHSCREEN_H 
```

主文件

```
#include <QtGui/QApplication>
#include <time.h>

#include "splashscreen.h"
#include "mainwindow.h"

int main(int argc, char *argv[])
{
    srand(time(0));
    QApplication a(argc, argv);

    SplashScreen *splash = new SplashScreen(&a);
    splash->show();

    // snip.. loading a ton of stuff into memory at startup 
    // if you're testing this you might have to sleep/timer here iono

    MainWindow w;
    splash->finish(&w);
    w.show();

    return app.exec();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T07:35:28.657

您可以直接绘制进度，无需创建 QProgressBar。例如：

sp.h:

```
#ifndef SPLASHSCREEN_H
#define SPLASHSCREEN_H

#include <QSplashScreen>
#include <QApplication>

class SplashScreen : public QSplashScreen
{
    Q_OBJECT
public:
    explicit SplashScreen(QApplication *app, QWidget *parent = 0);
    int m_progress;
    QApplication *app;

public slots:
    void setProgress(int value)
    {
      m_progress = value;
      if (m_progress > 100)
        m_progress = 100;
      if (m_progress < 0)
        m_progress = 0;
      update();
    }

protected:
    void drawContents(QPainter *painter);

};

#endif // SPLASHSCREEN_H 
```

sp.cpp

```
#include "sp.h"

SplashScreen::SplashScreen(QApplication *aApp, QWidget *parent) :
    QSplashScreen(parent), app(aApp), m_progress(0)

{
    this->setPixmap(QPixmap(":/images/splashscreen.png"));
    this->setCursor(Qt::BusyCursor);

    this->showMessage("Hello", Qt::AlignBottom);
}

void SplashScreen::drawContents(QPainter *painter)
{
  QSplashScreen::drawContents(painter);

  // Set style for progressbar...
  QStyleOptionProgressBarV2 pbstyle;
  pbstyle.initFrom(this);
  pbstyle.state = QStyle::State_Enabled;
  pbstyle.textVisible = false;
  pbstyle.minimum = 0;
  pbstyle.maximum = 100;
  pbstyle.progress = m_progress;
  pbstyle.invertedAppearance = false;
  pbstyle.rect = QRect(0, 265, 380, 19); // Where is it.

  // Draw it...
  style()->drawControl(QStyle::CE_ProgressBar, &pbstyle, painter, this);
} 
```

可能这对你有帮助。

# c++ - 如何为任何值编码 Euler #3？

> ID：12682889
> 
> 赞同：0
> 
> 时间：2012-10-02T00:17:42.453
> 
> 标签：c++

```
/*
The prime factors of 13195 are 5, 7, 13 and 29.
What is the largest prime factor of the number 600851475143 ?
*/

#include <iostream>
#include <string>
#include <cmath>

using namespace std;

int main()
{
    unsigned long num = 600851475143;
    unsigned long i;
    long double root = sqrt(num);
    long double tempRoot = 0;
    unsigned long factor = 0;
    unsigned long largest = 0;

    for (i=2; i<root; i++)
    {
        if (num%i == 0)
        {   
            num = num/i;
            factor = i;
            cout << factor << endl;

            if (factor > largest)
                {
                    largest = factor;
                }
        }
    }

    cout << largest << endl;    

return 0;
} 
```

该解决方案有效，因为巧合的是 600851475143 的因子都是素数。但是在调试代码时，我为变量 num (=600851475143) 输入了各种值。例如，当我输入 135 时，它显示了所有因子，包括非素因子。如何为因子添加质数检查器？我尝试在嵌套 if 中使用与此处相同的方法，但惨遭失败。任何帮助，将不胜感激。

另外，请说明我是否在某些变量的情况下使用了不必要的大变量类型。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:20:58.157

您不必进行质数检查。当你在考虑因素时，只要确保继续划分一个候选人，直到它不再划分这个数字。这在代码中很容易做到：只需`if (num%i == 0)`将`while (num%i == 0)`.

# c# - 递归算法后变量神秘地不断变化

> ID：12682895
> 
> 赞同：2
> 
> 时间：2012-10-02T00:18:12.043
> 
> 标签：c#, recursion

我无法弄清楚为什么每次运行递归算法后都会更改一个完全不相关的变量。绝对没有我以任何方式为该变量分配新值的地方，但是递归方法仍然运行并且变量被更改。

我写的程序正在播放连接四。它有一个“棋盘”对象，用于存储玩家筹码的位置，以及一种评估该人可以获得多少可能的连接四并为该配置分配分数的方法。

递归算法旨在找到最佳的筹码序列。它制作了董事会的副本。将芯片添加到几个可能的位置之一（因此递归）。和递归。一旦达到基本情况，它就会找到芯片的假设配置将获得的“分数”。当它退出算法时，它会选择给出最多点的路径。

问题是电路板的原始副本不断被覆盖？该程序是这样的。（广义）

```
int[] FindBestPath(Board OrginalBoard, int Depth)
{
  Board TempBoard = OriginalBoard;
  if(Depth > 0)
    for(x of many possible modifications)
    {
      Tempboard.MakeModification(x);
      Depth--;
      Score = FindBestPath(TempBoard, Depth);
      if(Score > highestScoreYet)
      {
           highestScoreYet = Score;
           BestModification = x;
      }
    }
  else if(Depth == 0)
    Return new int[2] {ConfigurationScore(TempBoard), -1};

  return new int[2] {HighestScoreYet, BestModification};
} 
```

为什么当我实际调用递归算法时通过的“原始板”会以所有可能的方式得到修改“x”？我没有添加“参考”声明或任何东西，所以不应该保留原件吗？

关于对象行为和递归算法是否有一些已知的奇怪之处？我可以在 Microsoft C# Express 2010 中以某种方式在原始板对象被修改的当前未知时刻以某种方式断点吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T00:21:07.073

If `Board`is a `class`then`Board TempBoard = OriginalBoard;`是 C# 中的引用赋值，与 C++ 中它是值赋值不同，这就是为什么当您调用时`Tempboard.MakeModification(x);`更改了原始赋值。

考虑`struct`在赋值上使用 which 的行为类似于 C++ 类或创建一个新的临时对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T00:23:21.537

这里的罪魁祸首`Board`是一个类，一个引用类型。当你这样做时：

```
Board TempBoard = OriginalBoard; 
```

你没有得到董事会的副本。您会得到对同一块板的引用。

解决方案是创建`Board`一个结构，它是一个值类型，或者克隆你的板。由于在您的情况下使用 struct 很可能是一个坏主意，因此您应该考虑实施一种`Clone`方法，而不是：

```
Board TempBoard = OriginalBoard; 
```

做：

```
Board TempBoard = OriginalBoard.Clone(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T00:23:39.573

您正在使 TempBoard 等于 OriginalBoard，这意味着它们具有相同的参考。您可以按照与 C 中的指针相同的方式来考虑它。因此，您在 TempBoard 中更改的任何内容都会在 OriginalBoard 中更改，因为它们都引用相同的东西。结构是值类型，类是引用类型，这意味着如果你以同样的方式传入一个结构，它就不会像这个对象那样改变。

# if-statement - PHP if 语句与 PHP mail()

> ID：12682900
> 
> 赞同：0
> 
> 时间：2012-10-02T00:18:23.953
> 
> 标签：if-statement, php

我刚刚在联系表单中添加了一个电话号码输入，我想这样做，所以如果用户选择在我们的表单中输入他们的电话号码，我想在发送的电子邮件正文中附加一些文本 + 电话号码php mail() 函数。如果用户将电话号码输入留空，我不想要额外的文字。

该脚本运行良好，直到我插入带有我想要附加的文本的 if 语句。感谢您的任何帮助，您可以提供！

```
<?php

$name = $_REQUEST['name'];
$email = $_REQUEST['email'];
$number = $_REQUEST['number'];
$message = $_REQUEST['message'];

   $to = "test@test.com"; 
   $email_subject = "Message from test.com";
   $email_body = "$message";

   $headers = "From: $name <$email>";

   mail($to,$email_subject,$email_body if ($number != "") { echo "Patient Phone Number: $number";},$headers);
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T00:22:24.433

您不能在函数参数中使用 if 语句，因此请使用：

```
<?php

  $name = $_REQUEST['name'];
  $email = $_REQUEST['email'];
  $number = $_REQUEST['number'];
  $message = $_REQUEST['message'];

  $to = "test@test.com"; 
  $email_subject = "Message from test.com";
  $email_body = "$message";

  /**
   * Append number to email body (.= adds text after the previously defined $email_body -string)
   */
  if ($number != "") { 
    $email_body .= "Patient Phone Number: $number";
  }

  $headers = "From: $name <$email>";

  mail($to,$email_subject,$email_body,$headers);

?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T00:21:04.030

尝试更多类似的东西：

```
if($number != ""){
  $email_body .= "Patient Phone Number: $number";
}

mail($to,$email_subject,$email_body,$headers); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T00:22:36.543

尝试从邮件函数中删除 if 语句以将其分配为变量，然后将其发送到邮件函数。

# ios - 如何升级到 Xcode 4.5

> ID：12682902
> 
> 赞同：2
> 
> 时间：2012-10-02T00:18:47.460
> 
> 标签：ios, xcode, ios6, upgrade

原谅我的无知，但我之前没有做过 Xcode 升级。我想我只需去苹果，下载 .dmg 文件，双击它，瞧！但是，在这样做之后（.dmg 文件是 1.56GB 文件），如果我通过单击屏幕底部的图标运行 Xcode，当它加载时，如果我检查版本，它仍然显示 4.3.2。所以很明显，我没有做需要做的事情。

此外，我不再复制该消息，因此我无法给出准确的报价，但在启动 Xcode 时，我收到一条消息，它无法识别该设备。我想这是我的 iPad，在我将 iOS 升级到版本 6 之前，它被配置为开发设备。

也许我的问题可以通过简单地指向一个适当的文件来回答。我发现的网站似乎都是关于升级后的问题。我还没有到那一步，我不认为。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T00:21:01.997

从 App Store 下载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T07:22:05.337

如果您已经下载了 DMG 文件，您需要双击它以便它可以挂载图像文件。在该 dmg 文件中有您需要的 xcode 文件并将其复制到您的应用程序文件夹中。如果您已经有一个 xcode 应用程序，它将覆盖它。

否则，如果您不是开发人员，从应用商店下载它确实更容易。祝你好运：-）

# c# - ValidationExpression Number 正负 Decimal

> ID：12682909
> 
> 赞同：1
> 
> 时间：2012-10-02T00:19:47.103
> 
> 标签：c#, asp.net

我为我的糟糕写作道歉，英语不是我的第一语言。

我需要为此进行正则表达式

好的

```
-1000000.00  = 7 digits and 2 decimals with negative
-100
1000000.00
100 
```

坏的

```
-10000000  = 8 digits
100.000  = 3 decimals
-100.000  = 3 decimals 
```

tnx 的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T00:23:27.680

这应该有效。应该允许一个可选的减号、0 - 7 个数字和一个可选的点，后面有 2 个数字：

```
^[\-]?[0-9]{0,7}([\.][0-9][0-9])?$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T05:50:00.393

尝试使用以下正则表达式来验证您的数字和小数

```
 Regex : (-)?[0-9]{0,7}(\.[0-9]{2})? 
```

你可以[在这里](http://gskinner.com/RegExr/)看到正则表达式的演示

# nservicebus - 标头中的 NServiceBus 无效字符

> ID：12682918
> 
> 赞同：1
> 
> 时间：2012-10-02T00:21:08.070
> 
> 标签：nservicebus

我们正在使用 3.2.2 的 NServiceBus，在我们的一种环境中，生成的消息头在末尾附加了一些奇怪的字符。该消息已经像这样显示在传出队列中。我们总共有 5 个环境（DEV、QA、STG、PROD、PLT），它可以在所有环境中工作，除了一个。我们从标题中删除字符并重新运行消息一切正常。

这些字符是某种安全哈希或类似的东西吗？知道它们是在哪里生成的吗？

![附加奇数字符的消息头](../Images/38bee7a89ed5b44ad056fb7d643d34d6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T02:07:28.660

删除应用程序池/应用程序并重新创建应用程序池/应用程序为我们修复了它。抱歉，我不知道为什么它解决了这个问题。

# java - NetBeans7.2中ArrayList的问题

> ID：12682922
> 
> 赞同：4
> 
> 时间：2012-10-02T00:21:25.900
> 
> 标签：java, netbeans, arraylist

我是 Java 新手，但我很喜欢它！

我正在使用 NetBeans7.2，当我尝试创建这样的 ArrayList 时：

```
ArrayList<String> list = new ArrayList<>(); 
```

NetBeans 说“类型 ArrayList 不带参数”（这没有意义，因为我的代码很简单，而且对于 Java7 来说是正确的）。

另外，当我尝试导入时：

```
import java.util.ArrayList; 
```

NetBeans 说“ArrayList 已在此编译单元中定义”。

不再需要导入 ArrayList 了吗？

非常感谢你！请原谅我的英语不好；）

编辑：这是我的完整代码（这只是一个练习）

```
import java.util.ArrayList;
public class ArrayList {

   public static void main(String[] args) {

      ArrayList<String> cores = new ArrayList<>();
      cores.add("Branco");
      cores.add(0, "Vermelho");
      cores.add("Amarelo");
      cores.add("Azul");
      System.out.println(cores.toString());

      System.out.println("Tamanho= " + cores.size());
      System.out.println("Elemento2= " + cores.get(2));
      System.out.println("Indice Branco= " + cores.indexOf("Branco"));

      cores.remove("Branco");

      System.out.println("Tem Amarelo?" + cores.contains("Amarelo"));

   }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T03:05:25.567

如果您将类名更改为 ArrayList 以外的其他名称，那么您的代码在 Java7 中将是绝对正确的，在 Java7 中可以`<>`像您一样使用菱形运算符 ( )：

```
ArrayList<String> list = new ArrayList<>(); 
```

这背后的基本思想是，实例化泛型类的代码可以变得不那么冗长。Java7 编译器自动暗示需要什么。

Java6 会抱怨并要求您按照 Jon 建议的方式编写它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T02:32:18.397

你所要做的：

```
ArrayList<String> myArray = new ArrayList<String>(); 
```

它应该可以正常工作！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-12T10:17:15.650

如果您将其命名为“ **ArrayList** ”，请更改*类名*。

# php - 在 MySQL 中存储 PHP session_id 以进行 AJAX 授权？

> ID：12682923
> 
> 赞同：1
> 
> 时间：2012-10-02T00:21:25.443
> 
> 标签：php, mysql, ajax, authorization, sessionid

不太清楚如何授权 PHP AJAX 调用 session_id 或任何 $_SESSION 变量实际上。

它是否应该在登录时存储在数据库中，并在每次 AJAX 调用时针对 $_SESSION 存储进行引用？

我知道这些主题可能已经被无限地讨论过，但我似乎找不到明确的答案。

提前致谢！

**启示**

哇，所以授权仅限于是否有会话？害怕。让我想知道这是否就是 .net 的 web.config 的拒绝 =“？” 是在做。感谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T00:29:22.457

会话始终存在，因为会话数据是服务器端的。只要他们拥有授予他们该会话的 cookie，他们就会被视为授权用户。

在通过 AJAX 调用的文件的开头，只需执行以下操作：

```
<?php

session_start();
if(!isset($_SESSION['id'])) {
    exit;
}

?> 
```

除非他们有一个活动会话，否则不会执行任何操作。

您也可以阻止人们直接访问您的 AJAX 文件，只需添加以下内容：

```
<?php

if(!isset($_SERVER['HTTP_X_REQUESTED_WITH']) OR ($_SERVER['HTTP_X_REQUESTED_WITH'] != 'XMLHttpRequest')) {
    exit;
}

?> 
```

有人仍然可以解决这个问题，但总比没有好。

# c# - 在运行时在网格中添加 ui 控件的最佳方法是什么？

> ID：12682925
> 
> 赞同：1
> 
> 时间：2012-10-02T00:21:51.233
> 
> 标签：c#, xaml, windows-runtime

t 可能是一个基本问题。但经过几个小时的研究，我无法弄清楚。我有一个项目详细信息页面。每当滚动视图到达右下角时，我想在其中添加另一个网格。现在，我通过在 xaml 中添加一列并切换其可见性属性部分实现了这一目标。

```
<Grid x:Name="body" Style="{StaticResource LayoutRootStyle}">

    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="Auto"/>
    </Grid.ColumnDefinitions>

    <Grid x:Name="dynamicGrid" Grid.Column="1" Grid.RowSpan="2" Visibility="Collapsed">
        <Grid.RowDefinitions>
            <RowDefinition Height="80"/>
            <RowDefinition Height="360"/>
            <RowDefinition Height="360"/>
        </Grid.RowDefinitions>
        <TextBlock .../>
        <GridView .../>
        <GridView .../>
    </Grid> 
```

在后面的代码中

```
if (//Reach the right side)
{
    if (related.Visibility == Visibility.Collapsed)
    {
    related.Visibility = Windows.UI.Xaml.Visibility.Visible;
    }
}

if (// Move away from right border)
{
    related.Visibility = Windows.UI.Xaml.Visibility.Collapsed;
} 
```

它在某种程度上有效。但是动画是跳动的。有时，滚动查看器甚至拒绝回到开头。我想问题是当我在运行时添加/删除 ui 控件时，滚动查看器不能很好地处理它。

我想知道有没有更好的方法来实现这个功能？欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T08:35:57.083

您可以通过调用 grid.Children.Add(newChildControl) 在网格中添加子控件。您还可以通过调用 Grid.SetRow/Column/RowSpan/ColumnSpan 将子控件分配给特定的行/列/跨度。

# c - 如何计算字符串中回文的单词数？

> ID：12682930
> 
> 赞同：0
> 
> 时间：2012-10-02T00:22:39.630
> 
> 标签：c, string, palindrome

我显然是论坛的新手，需要一些帮助。我正在编写一个程序来显示一个句子中元音、单词和回文的数量。我走到了尽头，完全迷失了。

我正在使用 C，我正在尝试遍历输入中的单词，然后确定句子中有多少回文，然后将其存储在计数器中并稍后在 main 方法中打印，但我需要帮助创建所述循环以正确地将值存储在计数器中。

这是我到目前为止所拥有的（我正在专门研究`int is_palindrome(char my_sen[])`）

```
 #include <stdio.h>
        #include <string.h>
        #include <ctype.h>
        #define SENTENCE 256

        int main(void){

        char my_sen[SENTENCE],*s; //String that containts at most 256 as well as a pointer
        int words = 1, count = 0, pal_count= 0; //Integer variables being defined
        int i,vowel = 0, length;  //More definitions
        printf("Enter a sentence: ");//Input sentence
        gets(my_sen);//Receives and processes input
        length = strlen(my_sen); //Stores the length of the input within length

        for(i=0;my_sen[i] != '\0'; i++){
            if(my_sen[i]=='a' || my_sen[i]=='e' || my_sen[i]=='i' || my_sen[i]=='o' || my_sen[i]=='u' || //Loop that states if the input contains any of the following
               my_sen[i]=='A' || my_sen[i]=='E' || my_sen[i]=='I' || my_sen[i]=='O' || my_sen[i]=='U')   //characters(in this case, vowels), then it shall be
               {                                                                                         //stored to be later printed
                   vowel++;
               }

            if(my_sen[i]==' ' || my_sen[i]=='!' || my_sen[i]=='.' || my_sen[i]==',' || my_sen[i]==';' || //Similar to the vowel loop, but this time
                my_sen[i]=='?')                                                                          //if the following characters are scanned within the input
                {                                                                                        //then the length of the characters within the input is
                    length--;                                                                            //subtracted
        }
        }

        for(s = my_sen; *s != '\0'; s++){ //Loop that stores the number of words typed after
            if(*s == ' '){                //each following space
            count++;
        }
        }

        printf("The sentence entered is %u characters long.\n", length); //Simply prints the number of characters within the input
        printf("Number of words in the sentence: %d\n", count + 1); // Adding 1 to the count to keep track of the last word
        printf("Average length of a word in the input: %d\n", length/count);//Prints the average length of words in the input
        printf("Total Number of Vowels: %d\n", vowel);//Prints the number of vowels in the input
        printf("Average number of vowels: %d\n", vowel/count);//Prints the average number of vowels within the input
        printf("Number of words that contain at least 3 vowels: %d\n",vowel_count(my_sen));//Prints number of words that contain at least 3 vowels
        printf("Number of words that are palindomes: %d\n", is_palindrome(my_sen));
        return 0;
        }

        int vowel_count(char my_sen[])
        {
          int wcount = 0; 
          int vcount = 0; 
          int i = 0;
          int ch;
          while ((ch = my_sen[i++]) != '\0')
          {
            if (isspace(ch) || !isalpha(ch))
            {
              wcount += vcount >= 3; 
              vcount = 0; 
              continue;

            if (strchr("aeiouAEIOU", ch) != NULL) 
            {
              ++vcount; 
            }
          }

          wcount += vcount >= 3; // add 1 to wcount if vcount >= 3
          return wcount;
        }

int is_palindrome(char my_sen[]){
  int begin, middle, end, length = 0, result = 0, pal = 0; //variables representing the string length, beginning, middle, and end of string

   while ( my_sen[length] != '\0' ) //loop to define and initialize variables
      length++;

   end = length - 1; //end is the end of the length
   middle = length/2;//middle is half the length

   for( begin = 0 ; begin < middle ; begin++ )
   {
      if ( my_sen[begin] != my_sen[end] ) //if the beginning isn't equal to the end, then it's not a palindrome
      {
        result += pal;
         pal = 0;
         continue;
      }
      end--;
   }
   if( begin == middle ) //if the beginning is the same as the middle, its a palindrome
      pal++;
      result += pal;
      return result;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T04:19:37.097

下面的代码已经过测试。请根据需要更正或投反对票。如果代码格式无效，我们深表歉意。我将给你举一个我刚刚放在一起的例子，从我的头顶上掉下来。它可能不完全符合您的要求，但它应该可以帮助您入门。然后，我将解释我的代码是如何工作的，并为您提供一些修改代码的指示。

```
#include <stdlib.h>
#include <string.h>
#include <stdio.h>

int main()
{
int i,vowels,pals,words;
vowels=words=pals=i=0;
long max=1024;
char *sentence=malloc(sizeof(char)*max);
printf("sentence:");
fgets(sentence,max,stdin);
if (sentence[strlen(sentence)-1]=='\n')
{
sentence[strlen(sentence)-1]='\0';
}
for (i=0;i<=strlen(sentence);i++)
{
char x;
x=sentence[i];
switch (x)
{
case 'a':
case 'A':
case 'e':
case 'E':
case 'i':
case 'I':
case 'o':
case 'O':
case 'u':
case 'U':
vowels+=1;
}
if ((x==' '||x=='\0') && i>0 && sentence[i-1]!=' ')
{
words+=1;
}
if (i>0 && (x=='\0'||x==' '))
{
char *lastchar,*pos,*word;
lastchar=sentence+i;
pos=(sentence+i)-1;
while (*pos!=' ' && pos!=sentence)
{
pos--;
if (*pos==' ')
{
pos++;
break;
}
}
word=strndup(pos,lastchar-pos);
if (isSameStringReversed(word)==0)
{
pals+=1;
}
free(word);
} //if on space for pal
} //for
printf("vowels:%d words:%d pals:%d\n",vowels,words,pals);
free(sentence);
}

int isSameStringReversed(char *word)
{
int i;
char destword[strlen(word)+1];
int j;
for (i=strlen(word)-1,j=0;i>=0;i--,j++)
{
destword[j]=word[i];
}
return strncmp(word,destword,strlen(word));
}
</pre> 
```

现在一些代码说明。

```
//here are our includes. nothing special.
#include <stdlib.h>
#include <string.h>
#include <stdio.h>

int main()
{
//defines
int i,vowels,pals,words;
long max;
//set all to zero. (an empty sentence has no words.)
vowels=words=pals=i=0;
//max is the largest sentence you can enter
max=1024;
//allocate space for the sentence in memory.
char *sentence=malloc(sizeof(char)*max);
//prompt for sentence
printf("sentence:");
//read characters from stdin, making sure that only the first 1023 characters are read. (fgets removes the last character(s) if it is greater or equal to the provided limit. e.g. providing 1024 means that all characters past character 1023 are removed, and a \0 is appended to sentence.)
fgets(sentence,max,stdin);
//check last character of sentence for \n character, as some calls leave newlines attached.
if (sentence[strlen(sentence)-1]=='\n')
{
//set the last character to \0 if newline found. \0 terminates strings in c.
sentence[strlen(sentence)-1]='\0';
}
//move through every character in the sentence, including the terminating \0 character. This way, we make sure we pass every word and character provided, and we don't have to check at the end of loops for remaining characters.
for (i=0;i<=strlen(sentence);i++)
{
//defines for this for loop
char x;
//pull the current character from sentence. this way, we don't ahve to do sentence[i] each time.
x=sentence[i];
//switch is like an extended if statement with lots of possible branches.
switch (x)
{
//if x, the current character, equals 'a'
case 'a':
//if x, the current character, equals uppercase 'A'
case 'A':
//etc for the rest of the variables (excluding the sometimes cases of 'y')
case 'e':
case 'E':
case 'i':
case 'I':
case 'o':
case 'O':
case 'u':
case 'U':
//if x equals any of the above letters, then
//we add one to vowels, since our current letter is a vowel.
vowels+=1;
}
//if our current character is a space character, or a \0, meaning the end of our sentence string,
//and we are not on our first character, (because our sentence is not empty), and the character before our current character is not a space (because we don't count double spaces as words)
if ((x==' '||x=='\0') && i>0 && sentence[i-1]!=' ')
{
//it's a word, so add one to the words count
words+=1;
}
//again, if we are on a space or at the end of our string,
if (i>0 && (x=='\0'||x==' '))
{
//defines
char *lastchar,*pos,*word;
//lastchar is a pointer to where we are currently sitting (on the space or end character of the string)
lastchar=sentence+i;
//pos is a pointer to the previous character
//say we have
//A bunny likes racecar races.
//if we are on the space just after racecar, then lastchar points to the space, and pos points to the r in racecar
pos=(sentence+i)-1;
//while the character that pos points to isn't a space, and we aren't at the beginning of the string
while (*pos!=' ' && pos!=sentence)
{
//move the pointer pos back one character
pos--;
//if we're on a space, we've moved back before the previous word.
if (*pos==' ')
{
//we want to move pos to the first character of the preceding word.
pos++;
break;
}
}
//make a new copy of the current word, which we do by using strndup, analagus to (duplicate string with only n number of characters).
//we take the value of pos, and subtract it from lastchar, which gives us the length of the preceeding word.
//we used racecar as our example, so the space after racecar, minus the position of the r, gives us 7, which is the amount that strndup copys.
word=strndup(pos,lastchar-pos);
//if the function below returns 0
if (isSameStringReversed(word)==0)
{
//we've found a palindrome
pals+=1;
}
//free word, a.k.a. the chunk of memory we created for checking the last word as a palindrome.
free(word);
} //endif palindrome boundary check
} //endfor character in sentence loop
//print the character vowel and palindrome counts
printf("vowels:%d words:%d pals:%d\n",vowels,words,pals);
//free the sentence, as we're done with it.
free(sentence);
}

//function
//word is a pointer to char, or an array of characters. In this case word points to "word" defined above,
//or "racecar" from our example.
int isSameStringReversed(char *word)
{
//defines
//take the length of the provided word, and add a character to it for the \0, or ending character.
char destword[strlen(word)+1];
int i;
int j;
//set i to the number of the last character in word, and j to 0.
//move through the string, subtracting one from i and adding one to j.
for (i=strlen(word)-1,j=0;i>=0;i--,j++)
{
//move from right to left, assigning word to destword in reverse order.
//racecar would take the last r, assign it to the first slot in destword, the second to last a to the second position, and so on.
destword[j]=word[i];
//continue the loop
}
//see if the two reversed strings match, with strncmp.
return strncmp(word,destword,strlen(word));
} 
```

解释。请注意，我们在除最后一个函数之外的所有地方都使用了指针。这是有充分理由的。指针是灵活的、易于理解的，并且允许进行数学运算。它们也很快并且有助于代码的可读性。如果您注意到，当我们从 lastchar 中减去 pos 时，我们会使用这些数学属性。这在使用字符时并不那么重要，但是当您进入其他数据类型时，从一个元素移动到另一个元素会很有帮助。此外，如果你注意到，我所有的变量都被清楚地标记了。同样，这将有助于代码的可读性和可维护性。如果上面的代码还不够，请随时让我知道，我会尽我所能进一步阐述具体问题。

# android - Android AutoCompleteTextView 在横向模式下显示对象信息而不是文本

> ID：12682933
> 
> 赞同：12
> 
> 时间：2012-10-02T00:23:12.680
> 
> 标签：android, autocompletetextview, custom-adapter, hints

我正在使用带有 AutoCompleteTextView 的自定义适配器。它在模拟器和我的平板电脑上运行良好。但是，我的手机在横向模式下存在问题。在此模式下显示的自动完成提示是对象信息而不是文本。但是，当我选择任何项目时，字段会在相应字段中正确填充文本。

基于 Android Stock Array Adapter 的其他字段的自动完成工作正常。

我必须在我的自定义适配器中为此做些什么吗？我在 SO 上只看到一个类似的问题。对该问题的一个回答是谈论覆盖 toString 方法，但我无法充分理解它以在我的代码中实现。

任何指导将不胜感激？如果您需要更多信息，请告诉我。

编辑：添加了我的自定义适配器源代码....

```
 public class Part_Mstr_Info
  {
    private long part_id;
    private String name, desg, org, dept;

    public Part_Mstr_Info(long part_id, String name, String desg, String org, String dept)
    {
        this.part_id = part_id;
        this.name = name;
        this.desg = desg;
        this.org = org;
        this.dept = dept;
    }
    public long get_part_id() { return part_id; }
    public String get_name() { return name; }
    public String get_desg() { return desg; }
    public String get_org() { return org; }
    public String get_dept() { return dept; }
}

public class CustomAdapter extends ArrayAdapter<Part_Mstr_Info> implements Filterable{
   private List<Part_Mstr_Info> entries;
   private ArrayList<Part_Mstr_Info> orig;
   private Activity activity;
   private ArrayFilter myFilter;

   public CustomAdapter(Activity a, int textViewResourceId, ArrayList<Part_Mstr_Info> entries) {
    super(a, textViewResourceId, entries);
    this.entries = entries;
    this.activity = a;
}

public static class ViewHolder{
    public TextView tv_ac_name;
    public TextView tv_ac_desg;
    public TextView tv_ac_org;
    public TextView tv_ac_dept;
}

@Override
public int getCount(){
      return entries!=null ? entries.size() : 0;
}

@Override
public Part_Mstr_Info getItem(int index) {
    return entries.get(index);
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View v = convertView;
    ViewHolder holder;
    if (v == null) {
        LayoutInflater vi =
            (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = vi.inflate(R.layout.ac_name_list, null);
        holder = new ViewHolder();
        holder.tv_ac_name = (TextView) v.findViewById(R.id.ac_name);
        holder.tv_ac_desg = (TextView) v.findViewById(R.id.ac_desg);
        holder.tv_ac_org = (TextView) v.findViewById(R.id.ac_org);
        holder.tv_ac_dept = (TextView) v.findViewById(R.id.ac_dept);
        v.setTag(holder);
    }
    else
        holder=(ViewHolder)v.getTag();

    final Part_Mstr_Info custom = entries.get(position);
    if (custom != null) {
        holder.tv_ac_name.setText(custom.get_name());
        holder.tv_ac_desg.setText(custom.get_desg());
        holder.tv_ac_org.setText(custom.get_org());
        holder.tv_ac_dept.setText(custom.get_dept());
    }
    return v;
}

@Override
public Filter getFilter() {
    if (myFilter == null){
        myFilter = new ArrayFilter();
    }
    return myFilter;
}

@Override
public String toString() {
    String temp = getClass().getName();
    return temp;
}

private class ArrayFilter extends Filter {
    @Override
    protected FilterResults performFiltering(CharSequence constraint) {
        FilterResults results = new FilterResults();
        if (orig == null)
            orig = new ArrayList<Part_Mstr_Info>(entries);
        if (constraint != null && constraint.length() != 0) {
            ArrayList<Part_Mstr_Info> resultsSuggestions = new ArrayList<Part_Mstr_Info>();
            for (int i = 0; i < orig.size(); i++) {
                if(orig.get(i).get_name().toLowerCase().startsWith(constraint.toString().toLowerCase())){
                    resultsSuggestions.add(orig.get(i));
                }
            }

            results.values = resultsSuggestions;
            results.count = resultsSuggestions.size();

        }
        else {
            ArrayList <Part_Mstr_Info> list = new ArrayList <Part_Mstr_Info>(orig);
            results.values = list;
            results.count = list.size();
        }
        return results;
    }

    @Override
    @SuppressWarnings("unchecked")
    protected void publishResults(CharSequence constraint, FilterResults results) {
        clear();
        ArrayList<Part_Mstr_Info> newValues = (ArrayList<Part_Mstr_Info>) results.values;
        if(newValues !=null) {
            for (int i = 0; i < newValues.size(); i++) {
                add(newValues.get(i));
            }
            if(results.count>0) {
                notifyDataSetChanged();
            } else {
                notifyDataSetInvalidated();
            }   
        }    

    }

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-05-06T11:38:18.927

正确的方法是覆盖ArrayFilter 私有类中的方法[Filter#convertResultToString(Object) 。](http://developer.android.com/reference/android/widget/Filter.html#convertResultToString%28java.lang.Object%29 "Android 过滤器文档")

如Android文档中所述

> 公共 CharSequence convertResultToString（对象结果值）
> 
> 将过滤集中的值转换为 CharSequence。子类应重写此方法以转换其结果。默认实现为空值返回一个空字符串或该值的默认字符串表示。

在你的情况下，它应该是这样的：

```
private class ArrayFilter extends Filter {
    @Override
    public CharSequence convertResultToString(Object resultValue) {
        return ((Part_Mstr_Info) resultValue).get_name();
    } 
```

添加此方法将允许 AutoCompleteTextView 提供更正提示（在横向视图中）而不是对象引用或默认 toString

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-02T01:14:36.490

是的，只需覆盖 POJO 上的 toString() 方法。

```
public class MyObject {
    ...

    @Override
    public String toString() {
        return showThisStringOnAdapter;
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-17T12:54:12.140

创建扩展的自定义类`<AutoCompleteTextView />`。例如：

```
package lt.irisas.akcija.utils;

import lt.irisas.akcija.data.ItemsModel;
import android.content.Context;
import android.database.Cursor;
import android.util.AttributeSet;
import android.widget.AutoCompleteTextView;

/** Customizing AutoCompleteTextView to return Cursor column info as String
*/
public class CustomAutoCompleteTextView extends AutoCompleteTextView {

    public CustomAutoCompleteTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }
    /* Overriding this method and returning String type solves the problem */
    @Override
    protected CharSequence convertSelectionToString(Object selectedItem) {
        Cursor c = (Cursor) selectedItem;

        return c.getString(c.getColumnIndex("COLUMN_NAME"));
    }
} 
```

但是，`<AutoCompleteTextView/>`您必须使用自定义的而不是。例如：

```
 <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <lt.irisas.akcija.utils.CustomAutoCompleteTextView
            android:id="@+id/search_field"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:singleLine="true"
            android:imeOptions="actionSearch" >
        </lt.irisas.akcija.utils.CustomAutoCompleteTextView>
</LinearLayout> 
```

希望能帮助到你。至少它对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-14T19:33:49.260

这是你的答案：

```
adapter.setCursorToStringConverter(new CursorToStringConverter() {
    @Override
    public CharSequence convertToString(Cursor c) {
        return c.getString(c.getColumnIndexOrThrow("Column"));
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T10:10:50.243

我上次找到了答案。我有同样的问题，似乎自动完成在横向模式下使用 convertToString() 方法而不是 newView() 和 bindView() 方法。您必须将所有光标数据返回到一个没有“\n”的字符串中，就像项目将在软键盘上水平显示一样。

在您的 AutoCompleteTextViewAdapter 示例中，添加方法：

```
 @Override
    public CharSequence convertToString(Cursor cursor) {

        String name = cursor.getString(0);
        String number = cursor.getString(1);

        return name+" : "+number;
    } 
```

我用我的手机 Xperia U 和另一个 Galaxy Note 对其进行了测试，它可以工作。就是这么简单。当然，您将根据您希望它显示的内容填充此方法。

# jquery - 如何使用 jQuery 通过单击表格单元格中的文本来获取 event.target.id？

> ID：12682937
> 
> 赞同：1
> 
> 时间：2012-10-02T00:23:19.757
> 
> 标签：jquery, function, html-table, bind

我有一个带有代码的简单 HTML 表

```
<table><tr><td id=tdFavicon><b>Favicon</b></td></tr></table> 
```

我想使用代码将事件绑定到它

```
$(tdFavicon).bind('click', saveOption); 
```

但我的问题是当我使用代码时

```
function saveOption() {alert(event.target.id);} 
```

单击单元格时，我只收到 id“tdFavicon”警报，而不是单击单元格中的文本时。

在我看来，这应该可行，但也许我的代码变得太复杂了。我为这个例子改变了它。我也许可以为要绑定到的表格单元格内的文本创建一个带有 id 的跨度，但我想知道为什么这不起作用。谁能帮我完成这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T00:29:05.827

试试这个（注意：虽然 using`$(tdFavicon)`可能有效，但不能保证，而且它也比使用 selector 慢`"#tdFavicon"`。）

```
$("#tdFavicon").bind('click', function(ev){
 saveOption(this,ev);
});

function saveOption(elem,ev) {
 alert("table cell: " + elem.id + "  object clicked: " + ev.target.tagName);
} 
```

您的代码不起作用的原因是点击事件实际上是在文本元素上，所以这就是您得到的 - 一个空的 id。总而言之，您的代码运行得很好，只是出现了逻辑错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T00:35:13.803

事件的泡沫。也就是说，当您单击一个元素时，它会在该元素上查找一个单击处理程序。如果没有找到它，它会在父元素上查找，然后是父元素的父元素，一直到根元素。

`event.target`生成事件的元素（标签）也是如此`<b>`，但不是处理它的元素（`<td id="tdFavicon">`标签）。jQuery 提供*处理*事件的元素作为被调用处理函数的上下文（的值`this`）。

这意味着，您需要做的就是：

```
function saveOption() {
    alert(this.id);
}
$('#tdFavicon').bind('click', saveOption); 
```

或者更简单地说：

```
$('#tdFavicon').bind('click', function {
    alert(this.id);
}); 
```

[证明它有效](http://jsfiddle.net/w7xEN/2/)

# java - 将命令行参数存储在数组类中

> ID：12682938
> 
> 赞同：0
> 
> 时间：2012-10-02T00:23:22.640
> 
> 标签：java, command-line-arguments

音乐椅。音乐椅是一款儿童游戏，玩家在播放音乐的同时绕着一组椅子走动。当音乐停止时，每个人都必须坐下。但是，椅子比人少一张，所以有人被排除在外。而且，确实，那个人不在游戏中。一把椅子被移走。游戏又开始了；别人出去了。这种情况一直持续到只剩下一名玩家，即获胜者。

我在播放器 [] 中存储命令行参数时遇到问题

这是我的代码

```
import java.util.*;
public class MusicalChairs {

    Player [] players;
    Random r = new Random();
    public static void main(String[] args){

      MusicalChairs mc = new MusicalChairs();

          mc.setUpGame(args);

        }

        public void setUpGame(String [] p){
            System.out.println("This is how we stand.......");

           for (int i = 0; i < p.length; i++){

            System.out.println(p[i]+" is "+ Player.Status.IN);

           }

        }

        public void showStatus(){

        }

        public void winner(){

            System.out.println("is the winner");
        }

    }

class Player{
    enum Status{IN,OUT};
    private String name;
    private Status status;

   public Player(String n){
       name=n;
   }

   public String getName(){
       return name;
   }

   public void setStatus(Status s){
       status=s;
   }

   public Status getStatus(){
       return status;
   }

    public String toString(){
      String ret = name;
      if(status==Status.IN){
          ret="IN ";
      }
      else{
          ret="OUT ";
      }
        return ret;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:29:39.400

您没有将参数存储在数组中。如果您的问题是*如何做到这一点*，那么您应该：

*   初始化`players`数组。
*   对于每个参数，您必须创建一个`Player`对象并将其存储在数组中。
*   使用程序中的数据。

这可以这样做：

```
public void setUpGame(String [] p) {
    System.out.println("This is how we stand.......");
    //Initialize the `players` array.
    players = new Player[p.length];
    for (int i = 0; i < p.length; i++){
        System.out.println(p[i]+" is "+ Player.Status.IN);
        //For each argument, you must create a `Player` object and store it in the array.
        players[i] = new Player(p[i]);
        players[i].setStatus(Status.IN);
    }
    //Once your array is filled, use the data in your program.
    //...
} 
```

问题仍然悬而未决：您的具体问题是什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T00:30:57.043

我认为您需要更新代码以创建新玩家并维护数组中的引用...

```
public void setUpGame(String [] p){
    System.out.println("This is how we stand.......");

    // You may want to check for a 0 number of players...
    players = new Player[p.length];

    for (int i = 0; i < p.length; i++){
        players[i] = new Player(p[i]);
        players[i].setStatus(Player.Status.IN);
        System.out.println(players[i].getName()+" is "+ players[i].getStatus());
    }
} 
```

# variables - 来自另一个表的变量的 SSIS 任务

> ID：12682942
> 
> 赞同：1
> 
> 时间：2012-10-02T00:23:37.460
> 
> 标签：variables, ssis, lookup-tables

我对 SSIS 很陌生。在此之前，我一直在手动编写 ETL 程序，因此我对这个环境缺乏信心或熟悉。我知道使用静态查询执行 SQL 和导入等基础知识。

但是，我正在寻找执行以下操作的最佳方法：

我有一个查找表，其中包含包含字段和标志的记录列表。

对于标志为 0 的每条记录，我想使用查询导入记录，以使用来自上述查找表的查询的 where 子句中的两个字段将数据转储到一个公用表。

有人可以帮助这个菜鸟。

提前致谢。将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:14:27.947

使用“条件拆分”。它允许按条件将行拆分为多个流。在您的情况下，它将是“[Flag] == 0”

# c# - 找不到路径的一部分 Asp.Net MVC 3

> ID：12682944
> 
> 赞同：0
> 
> 时间：2012-10-02T00:23:51.380
> 
> 标签：c#, asp.net-mvc-3, file-io

我正在尝试下载存储在文件夹中的文件。

```
 string path = "D:\\app_data\\Clients\\Client " + jobdescription.ClientID + "\\Job " + jobdescription.JobDescriptionID + "\\";
 string file = Path.Combine(path, jobdescription.JobTitle + ".docx");
 return File(path, "application/docx", jobdescription.JobTitle + ".docx"); 
```

产生的错误是：

```
Server Error in '/' Application.
Could not find a part of the path 'D:\app_data\Clients\Client 1\Job 2\' 
```

但是具有指定文件名的文件在文件夹中。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T03:50:18.267

您在第三行中使用`path`而不是使用`file`, 。

它应该是：

```
return File(file, "application/docx", jobdescription.JobTitle + ".docx"); 
```

# php - 创建文件并设置目录权限

> ID：12682946
> 
> 赞同：0
> 
> 时间：2012-10-02T00:24:00.120
> 
> 标签：php, xml

我正在使用下面的 PHP 代码来创建动态 xml 文件。

```
...
$file_name = "";
$rss_feed_dir = $_SERVER['DOCUMENT_ROOT'] . '/xml/';

chmod($rss_feed_dir, 0777);

$file = $rss_feed_dir . $file_name . '.xml';

$file_handle = fopen($file, "w");
fwrite($file_handle, $xml);
fclose($file_handle); 
```

如果目录权限设置为 0777，则将创建该文件，并且似乎在 0755 处失败。我在许多网站上读到世界执行权限可能会带来安全风险。

我应该在这个脚本结束时 chmod 回到 0755 吗？

有没有更好的方法来设置目录权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:37:31.477

我怀疑这是因为您的 rss_feed_dir 指向的目录是另一个用户拥有的目录 - 而不是用于运行您的脚本的用户。

因此，如果您的脚本未使用指定的组或用户运行，则 755 权限将使您无法对目录进行写访问。这就解释了为什么当权限为 755 时无法成功执行写入文件命令，但在 777 时成功。

如果此 php 文件位于服务器上并从 Web 调用，请尝试修改您的目录所有权本身：

```
chown -R YOUR_USER:www-data YOUR_RSS_DIRECTORY_HERE 
```

然后 chmod 到 775

希望有帮助！

# java - java jdbc mysql：如何将凭据存储在带有特殊字符的属性文件中？

> ID：12682949
> 
> 赞同：0
> 
> 时间：2012-10-02T00:24:10.480
> 
> 标签：java, mysql, jdbc

我正在尝试使用带有 java 程序的 JDBC 连接到 MySQL。该程序从属性文件中读取以获取凭据（url、用户名、密码）。我们在密码中使用特殊字符，例如 ^,&,*,@。

属性文件的一部分如下所示：

```
mysql.username=bob
mysql.password=th1$is^my@pa$$w*rd   (not the real password, but for the sake of discussion) 
```

堆栈跟踪中的错误如下所示：错误：无法连接到数据库：[43008] 访问被拒绝：对于用户'bob'@''（使用密码：是）

我确认该程序能够读取密码（通过将其打印到控制台）。看起来这是我缺少的某种转义序列？

谷歌搜索并询问了一些同事，但似乎没有人知道答案。

任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:33:17.767

> 堆栈跟踪中的错误如下所示：错误：无法连接到数据库：[43008] 访问被拒绝：对于用户'bob'@''

这就是你的答案，更具体地说是**'bob'@''**片段。这告诉您在无主机（或空主机）上使用 bob 正在尝试连接到您的 MySQL 数据库，我几乎可以肯定这不是您想要做的。

解决方案在于确保您获得正确的 url 来连接到您的数据库：

```
String url = "jdbc:mysql://"+HOST+"/" + DB; //Double check your HOST constant

Class.forName("com.mysql.jdbc.Driver").newInstance();
Connection conn = DriverManager.getConnection(url, userName, password); 
```

我希望它有所帮助。干杯

**编辑：**

顺便说一句，您似乎以正确的方式存储通行证，您应该在属性文件中转义的唯一字符是：

```
\t \n \r \\ \" \' \ (space) \= \: 
```

# html - 是否有等效于 glGenVertexArrays 和 glBindVertexArrays 的 WebGL？

> ID：12682950
> 
> 赞同：6
> 
> 时间：2012-10-02T00:24:12.687
> 
> 标签：html, opengl-es, webgl

我正在制作一个 WebGL 程序并需要 GL 函数 glGenVertexArrays 和 glBindVertexArrays。有人知道 WebGL 中是否有类似的东西？这是我到目前为止所拥有的：

```
 canvas = document.getElementById("WEB_GL_CANVAS");//Specify the viewing window

  gl = WebGLUtils.setupWebGL(canvas);
  if (!gl)
    alert("WebGL isn't available");

  gl.viewport(0, 0, canvas.width, canvas.height);
  {
    var color = getRandomColor();
    gl.clearColor((color[0] / 2) + 0.5, (color[1] / 2) + 0.5, (color[2] / 2) + 0.5, 1);
  }
  gl.enable(gl.DEPTH_TEST);

  // Create a vertex array object
  GLuint vao;
  gl.genVertexArrays( 1, &vao );//Won't work
  gl.bindVertexArray( vao );//Need a WebGL version 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T00:59:17.690

仅当实现[OES_vertex_array_object](http://www.khronos.org/registry/webgl/extensions/OES_vertex_array_object/)扩展时。

但是，您*不需要*这些功能。没有它们你也可以做得很好。在渲染网格（或一组网格，或其他）之前，您只需绑定缓冲区并使用 glVertexAttribPointer 及其同类。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-02T23:37:37.860

碰巧的是，Chrome Canary 和 Chromium 从上周左右开始构建，现在基本支持 OES_vertex_array_object。它在 WebKit 中也有一段时间了。它还不完美：例如，还没有 ANGLE 支持。不过，如果您想针对扩展进行开发，您现在可以开始这样做。

如果您想了解它在 WebGL 上下文中的工作原理，我有快速[的博客文章和](http://blog.tojicode.com/2012/10/oesvertexarrayobject-extension.html)OES_vertex_array_object 的演示。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-10T18:09:37.493

这就是 Emscripten 的做法：

```
GLctx = canvas.getContext("webgl")
// Extension available from Firefox 25 and WebKit
var vaoExt = GLctx.getExtension('OES_vertex_array_object');
if (vaoExt) {
    GLctx['createVertexArray'] = function() { return vaoExt['createVertexArrayOES'](); };
    GLctx['deleteVertexArray'] = function(vao) { vaoExt['deleteVertexArrayOES'](vao); };
    GLctx['bindVertexArray'] = function(vao) { vaoExt['bindVertexArrayOES'](vao); };
    GLctx['isVertexArray'] = function(vao) { return vaoExt['isVertexArrayOES'](vao); };
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-13T20:43:01.047

OpenGL 3.0 功能将在 WebGL 2.0 中提供，您可以检查您的浏览器是否已经支持 WebGL 2.0，例如：[http](http://webglreport.com/?v=2) : //webglreport.com/?v=2 或任何实验性扩展（如 OpenGL 3.0 中的某些功能） WebGL 1.0 可用

# php - 使用查询字符串和锚标签形成正确的 URL

> ID：12682952
> 
> 赞同：154
> 
> 时间：2012-10-02T00:24:19.433
> 
> 标签：php, wordpress, url, standards, url-fragment

当查询字符串和锚标记（哈希标记）在 URL 中都可见时，它们出现的正确顺序是什么？

`http://www.whatever.com?var=val#anchor`

或者

`http://www.whatever.com#anchor?var=val`

有这方面的任何文件吗？

URL 由 WordPress / PHP 处理。

* * *

## 回答 #1

> 赞同：196
> 
> 时间：2012-10-02T00:51:17.650

```
?var=var#hash 
```

之后的一切`#`都是客户端。

此外，研究[URL 重写](https://en.wikipedia.org/wiki/Rewrite_engine)以摆脱丑陋的`?var=var`.

* * *

## 回答 #2

> 赞同：101
> 
> 时间：2016-01-13T16:57:41.140

**?** 如[RFC 3986中](https://www.rfc-editor.org/rfc/rfc3986#section-4.1)**所述，应位于 # 之前**：

```
relative-ref = relative-part [ "?" query ] [ "#" fragment ] 
```

*取自超级用户的答案（*[锚标记是在查询字符串之前还是之后？](https://superuser.com/questions/498617/does-an-anchor-tag-come-before-the-query-string-or-after)*）：*

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-02-11T06:23:30.210

请注意，当 URL 同时具有锚标记 (#) 和查询字符串 (?) 时，浏览器可能会忽略查询字符串并导航到锚标记而不重新加载页面。

可能需要使用

```
<form action='webpage.php?q=string#tag' method='GET or POST'>
    <input type='text' id='q' name='q' value='string'>
    <input type='submit' value='submit'>
</form> 
```

而不仅仅是一个 URL 链接

```
<a href='webpage.php?q=string#tag'>. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-05T13:45:33.813

如果使用的目的`#`是表示一个[页面`fragment`then](https://www.rfc-editor.org/rfc/rfc3986#page-16) - yes `?`and then `#`。

如果`#`出现在之前`?`并且它不是表示页面（当它是权限的一部分（用户名和密码）`fragment`时可能发生这种情况），它必须被编码，否则你就有麻烦了。`#`这同样适用于可能赋予 URL 不同含义的任何其他特殊字符 ( `:`, ,...)。`@`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-11-06T16:22:08.817

您可以将此 JavaScript 代码放在站点的公共部分，以强制将所有不正确的请求重定向到具有正确顺序的模拟：

```
<script>
    var p=location.hash.indexOf("?");
    if(p>=0){
        var goodLoc = location.href.replace(location.hash, "");
        location.replace(goodLoc + window.location.hash.substring(p) + window.location.hash.substring(0, p));
    }
</script> 
```

# php - 这怎么可能 - 在 php 中成功调用不存在的方法 [方法来自哪里？？？]

> ID：12682953
> 
> 赞同：2
> 
> 时间：2012-10-02T00:24:23.803
> 
> 标签：php, methods, kohana

> **可能重复：**
> [调用不存在的方法时重定向到其他方法](https://stackoverflow.com/questions/6268613/redirecting-to-other-methods-when-calling-non-existing-methods)

我有一个代码，我正在检查它并获得了很棒的功能。

php 5.4.0/Kohana 3.0.3

正是字符串有问题：

```
$ticket = ORM::factory('ticket');
$this->template->errors = $ticket->validate()->errors('validate_ticket'); 
```

问题是 Model_Ticket 类及其所有父类不包含方法 validate()，但此方法返回有效值。这怎么可能？

下一个代码显示：

```
echo 'get_class($ticket)='; echo get_class($ticket); echo "\n";

echo "var_dump(method_exists(\$ticket,'validate'))="; var_dump(method_exists($ticket,'validate')); echo '\n';

echo "var_dump(method_exists('Model_Ticket','validate'))=";var_dump(method_exists('Model_Ticket','validate'));echo '\n'

echo 'get_class($ticket->validate())=';echo get_class($ticket->validate()); 
```

这是我们得到的结果：

```
get_class($ticket)=Model_Ticket
var_dump(method_exists($ticket,'validate'))=bool(false)
var_dump(method_exists('Model_Ticket','validate'))=bool(false)
get_class($ticket->validate())=Validate 
```

get_class_methods($ticket) 还显示，$ticket 不包含方法 validate()...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T06:38:50.170

`Model`类父类没有`validate()`方法。

由于[Kohana DOCS](http://kohanaframework.org/3.0/guide/api/ORM#__call)当我们尝试调用`validate`方法（`elseif ($method === 'validate')`）时调用了受保护`_validate`的方法。

# javascript - 响应式 Javascript 文件？

> ID：12682954
> 
> 赞同：2
> 
> 时间：2012-10-02T00:24:35.743
> 
> 标签：javascript, jquery-mobile, responsive-design

我已经使用 jQuery Mobile UI 构建了我的移动网站，但我现在意识到我需要一些功能使其与我的桌面网站不同（桌面网站上的日期选择器日期应该更长，等等）。

我研究了 Modernizr 和 matchMedia 来帮助我加载单独的 js 文件，但我无法找到一种让它响应式工作的好方法。Modernizr 仅在初始加载时有效（除非我错过了文档中的某些内容），并且当 matchMedia 超过最小/最大宽度阈值时，我遇到了多次执行的问题。它有时可以工作，但问题在于添加/删除单独的 js 文件。最重要的是（但不是一个大问题 - 我不认为），Chrome 在将脚本从另一个脚本加载到 DOM 时会引发错误。

最好的办法是编写一个 js 文件，然后添加一个侦听器，例如`$.mobile.media("screen and (min-width: XXXpx)")`主体的宽度，更改我需要的值吗？

我可能让这对自己来说太难了，或者因为我试图保持 HTTP 请求和站点大小尽可能小而遗漏了一些明显的东西，但我无法为此找到一个好的解决方案。

谢谢！

*Lightning Round Bonus 问题*`data-role` `data-id` `data-theme`：在切换到桌面站点后保留所有 jQuery Mobile 样式 () 是否是好的做法/正确？它看起来非常糟糕......对于只在更大屏幕上观看它的人来说非常糟糕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:01:50.440

恕我直言，最好的方法是在您的 javascript 中引入几个标志，例如“isMobile”、“isTablet”或“isDesktop”，这些标志将在附加到 webapp 的“pageinit”事件的方法中设置。稍后，您可以检查这些标志以在代码的特定部分中使用正确的版本进行相应的操作。

检查标志的方式取决于您的架构。在我现在正在工作的项目中，我从页面主体的后端附加的类中提取该信息，但那是因为我们有该信息。您可以尝试使用像[Harvey](http://harvesthq.github.com/harvey/)这样的库来观察将被触发的媒体查询，并相应地设置标志。我不认为您的选择到此为止，但恐怕我无法为您提供更多帮助！

# xna - XNA 中非常长的 Texture2D 对象的缺点？

> ID：12682955
> 
> 赞同：2
> 
> 时间：2012-10-02T00:24:53.863
> 
> 标签：xna, xna-4.0

我正在使用 Texture2D 对象作为图块表。它是一维的——一格高，但有多长。

我只是好奇是否有任何缺点（除了更难以编辑，我猜）让它们像这样布置而不是更紧凑的方式，例如，而不是 64x1 瓷砖，使其成为 16x16。改变它不会很难，但我想如果长图像没有伤害的话，为什么还要麻烦呢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:38:57.577

拥有较长的图像可以更容易地在工作表中“索引”精灵。例如，在您的情况下，索引处的图像`i`位于坐标处`(w * i, 0)`，其中`w`是一个精灵的宽度。将它放在正方形中意味着您需要更复杂的数学来找到正确的精灵。它会在`(w * (i % 16), h * (i / 16))`. （顺便说一下，这些坐标以像素为单位。）

所以使用长图！它会让你的代码更干净。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T06:46:17.127

唯一真正的缺点是您将使用较少的精灵达到纹理的最大宽度（`Reach`轮廓上为 2048，上为 4096 `HiDef`）。

这不是一个真正的问题，因为当它发生时，添加对更多行的支持是如此微不足道。

* * *

看到您提出的问题，有*一件*晦涩的、与性能相关的事情至少需要注意，即使您*几乎*不需要担心它。

纹理的像素数据以逐行的顺序存储在 CPU 内存中。因此，如果您的图块水平存储，您尝试读取或写入单个图块的像素（即：`GetData`和`SetData`），您将访问许多小的、分散的内存部分。如果您垂直存储切片，则每个切片将占用一大块内存 - 这具有更好的缓存一致性，并且可以用更少的操作进行复制（即：它更快）。

这在 GPU 上**不是**问题，在 GPU 上，纹理存储在布局中，这样所有附近的像素（不仅仅是左右的像素）都存储在附近的内存中。

# ruby - 可以使用＆符号在Ruby中打印哈希吗？

> ID：12682956
> 
> 赞同：0
> 
> 时间：2012-10-02T00:25:04.687
> 
> 标签：ruby, arrays, iterator

真的不知道如何命名这个问题。

考虑一个任意散列（ENV 很方便）：

```
ENV.each { |key, val| puts key + ': ' + val }
LC_MESSAGES: en_US.utf-8
LC_COLLATE: en_US.utf-8
PWD: /Users/baller/ive_fallen_and_i_cant_get_up
LC_MONETARY: en_US.utf-8 
```

是否可以使用 &: 速记来做到这一点？

```
foo.each(&:bar) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:36:42.230

默认情况下，没有。

要执行您想要的操作，您需要向 Array 类添加一个方法，该方法会以您想要的方式打印出来，例如：

```
class Array
  def bar
    puts "#{self[0]}: #{self[1]}"
  end
end 
```

有了它，`ENV.each(&:bar)`就会做你所期望的。

也就是说，我不会推荐这个。只有当实用程序远远超过未来冲突的可能性时，才应该添加到基类中，并且该方法高度专门用于其中至少有 2 个元素的数组。

不相关，但连接字符串 via`+`比使用插值要慢得多。它不必要地创建了额外的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T00:58:49.520

在您的示例中，使用`&:bar`代替块将导致在`#to_proc`给定对象上被调用，在本例中为符号`:bar`。Ruby 中 Symbol的`#to_proc`实现基本上扩展`foo.each(&:bar)`为`foo.each { |i| i.bar }`. 由于哈希产生了两个参数，`i`因此在此示例中是键值 args 的数组。这就是为什么您必须扩展`Array`（如@x1a4 所述）以使您的哈希按预期对待 &:bar 。

作为替代方案，您可以创建自己的类来响应`#to_proc`或简单地将您的块实现为 Proc：

```
class Bar
  def to_proc
    Proc.new { |key, val| puts key + ': ' + val }
  end
end

bar = Bar.new

# or

bar = Proc.new { |key, val| puts key + ': ' + val } 
```

使用 bar 的句柄，您可以将 &bar 代替块传递给像 ENV 这样的哈希。所以给定一个哈希值，foo：

```
foo.each(&bar) 
```

关于这个主题的更多阅读的好帖子：[http ://weblog.raganwald.com/2008/06/what-does-do-when-used-as-unary.html](http://weblog.raganwald.com/2008/06/what-does-do-when-used-as-unary.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T00:59:17.403

通常，如果集合的元素响应该方法，这是可能的。例如：

```
class Foo
  attr_reader :bar

  def initialize(bar)
    @bar = bar
  end
end

foos = [Foo.new("one"), Foo.new("two"), Foo.new("three")]

p foos.map(&:bar)  #=> ["one", "two", "three"] 
```

这是有效的，因为`&symbol`它是 的语法糖[`symbol.to_proc`](http://www.ruby-doc.org/core-1.9.3/Symbol.html#method-i-to_proc)，它反过来会产生一些魔法来返回一个块，该块将该消息发送到它作为参数接收的对象。

虽然这不适用于您的示例（因为中的对象`ENV`不响应`:bar`），但您可以使用以下方法传递一个存储在变量中的块`&`：

```
block = lambda { |key, value| puts "#{key}: #{value}" }
ENV.each(&block) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T05:16:17.650

您可以通过执行以下操作来摆脱两个块变量并使用一个：

```
each{|kv| puts kv.join(": ")} 
```

# java - 自定义 Elasticsearch 的搜索算法

> ID：12682957
> 
> 赞同：6
> 
> 时间：2012-10-02T00:25:09.540
> 
> 标签：java, lucene, elasticsearch, apache-tika

*我最初尝试将类似的帖子发布到 elasticsearch 邮件列表（[https://groups.google.com/forum/?fromgroups=#!topic/elasticsearch/BZLFJSEpl78](https://groups.google.com/forum/?fromgroups=#!topic/elasticsearch/BZLFJSEpl78)），但没有得到任何有用的回复，所以我想试试堆栈溢出。这是我关于 SO 的第一篇文章，如果它不完全符合它的意图，我深表歉意。*

我目前正在与一所大学合作，帮助他们实施测试套件，以进一步完善他们正在进行的一些研究。他们的研究基于动态模式搜索。在花了一些时间评估各种开源搜索解决方案后，我选择了弹性搜索作为基础平台，我想知道最好的方法是什么。我花了大约一周的时间研究 elasticsearch 文档和代码本身，还阅读了 Lucene 的文档，但我很难找到明确的前进方向。

该项目的目标是为研究人员提供一款软件，他们可以使用该软件来插入搜索算法的修订版以进行测试和改进。他们希望能够用除 Java 之外的语言编写可插拔算法，这些语言受 JVM 支持，如 Groovy、Python 或 Closure，但这不是硬性要求。其中一部分是为他们提供一个前端来运行查询和查看输出，以及一个管理界面来将文档添加到索引中。由于非常强大和完整的 REST API，我对所有这些都很满意。我不太确定的是如何继续实现可插入搜索算法。

研究人员的算法需要 4 个输入才能运行：

1.  查询词。
2.  跨索引的 Word（术语）x 文档矩阵。
3.  跨索引的 Document x Word（术语）矩阵。
4.  索引中的单词（术语）频率列表。这是每个单词在整个索引中出现的次数。

出于他们的目的，文档并不对应于实际的真实世界文档（他们实际上称它们为文本事件）。相反，就目前而言，它对应于一个句子（具有可配置性也可能有用）。我认为处理这个问题的最佳方法是将文档分解成句子（使用 Apache Tika 或类似的东西），将每个句子作为自己的文档放入索引中。我相信我可以在我提供的管理 UI 中使用映射器附件插件作为起点来执行此操作。不利的一面是，在将文档提供给 elasticsearch 之前对其进行分解并不是一种非常可配置的方式。如果他们想将分辨率更改为他们的算法，他们需要再次将所有文档重新添加到索引中。如果索引按原样存储完整的文档，并且搜索算法可以选择每个查询的工作分辨率，那么这将是完美的。我不确定这是否可能。

下一个问题是如何获取他们需要的三个输入并将其传递给他们的可插入搜索算法。我真的很挣扎从哪里开始。从 Luecene 看来，我需要提供自己的搜索/查询实现，但我不确定这是否正确。elasticsearch 网站上似乎也没有列出任何搜索插件，所以我什至不确定是否可能。这里重要的是，在使用模式对索引中的每个文档进行评分之前，算法需要在索引级别使用可用于生成其模式的查询术语进行操作。据我所知，这意味着elasticsearch提供的脚本接口将没有任何用处。elasticsearch 指南中对脚本接口的描述听起来像是在文档级别而不是索引级别运行的脚本。其他关注点/考虑因素是能够以多种语言对该算法进行编程（就像脚本接口一样）以及增强 REST API 返回的内容以进行搜索以包含算法生成的模式的能力（我假设这意味着我需要定义自己的 REST 端点）。

任何人都可以给我一些关于从哪里开始的建议吗？看来我将不得不编写自己的搜索插件，它可以接受脚本作为它的核心算法。在将控制权传递给脚本之前，该插件将负责组织我之前概述的 4 个输入。它还将负责从脚本中获取输出并通过它自己的 REST API 返回它。这看起来合乎逻辑吗？如果是这样，我该如何开始这样做？我需要查看代码的哪些部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:08:34.017

如果他们的算法是这样工作的，您应该为每个文档存储 1 个句子。如果他们改变了他们的模型，你总是可以重新索引。

Lucene 非常擅长寻找匹配项，所以我怀疑你同事的算法会处理得分问题。ElasticSearch 支持自定义评分脚本。您可以将参数传递给给定的评分脚本。您可以在 ES 中使用 groovy 编写脚本。 [http://www.elasticsearch.org/guide/reference/modules/scripting.html](http://www.elasticsearch.org/guide/reference/modules/scripting.html)

要在搜索算法中使用更大的数据结构，将这些数据结构作为参数传递是没有意义的，您可能会发现在评分脚本中使用其他数据源很有用。例如 Redis：http: [//java.dzone.com/articles/connecting-redis-elasticsearch](http://java.dzone.com/articles/connecting-redis-elasticsearch)。

# inno-setup - 为什么需要管理员权限？

> ID：12682959
> 
> 赞同：2
> 
> 时间：2012-10-02T00:25:20.210
> 
> 标签：inno-setup, code-signing, windows-server-2008-r2, codesign, code-signing-certificate

我在 Windows 2008 R2 上以非管理员帐户登录。

当我尝试在该帐户下运行 Inno-setup 脚本时，我需要输入管理员密码。

![在此处输入图像描述](../Images/790fde0623c97e2f484f0ff537e81705.png)

问题是后来我无法调试该脚本，因为它引用了`{userappdata}`变量，这意味着在运行时它引用了管理员！

我不希望被要求提供管理员权限——无论是在调试期间还是在实际安装期间。怎么做？我更喜欢该应用程序不由管理员安装。分别将文件安装到`{app}`（通常`C:\Program Files (x86)`）并且`{userappdata}`仅

如何防止被要求以管理员身份安装它？如果我为该应用程序购买代码签名证书 - 会解决这个问题吗？

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T02:19:33.650

已经分享了一些技巧，

[http://www.vincenzo.net/isxkb/index.php?title=Vista_considerations](http://www.vincenzo.net/isxkb/index.php?title=Vista_considerations)

如果您可以使您的安装程序对标准用户友好，则可以删除高程。你可以先设置`PrivilegesRequired=lowest`，然后看看有什么中断。修复破碎的部分后，您应该得到这样的安装程序。

如果您的安装程序仍需要提升，代码签名不会停止提升提示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T00:44:18.893

安装任何东西到`%PROGRAMFILES%`（`C:\Program Files`或`C:\Program Files (x86)`在支持 UAC 的 Windows 版本中（甚至在非超级用户或管理员帐户下的 Windows XP）都需要管理员权限。没有办法解决这个问题；不应该是普通（非管理员）用户将软件安装到`%PROGRAMFILES%`.

# c# - 尝试使用 Mvc3 和 Ninject 时出错

> ID：12682960
> 
> 赞同：1
> 
> 时间：2012-10-02T00:25:22.600
> 
> 标签：c#, asp.net-mvc, ninject

我从 nuget 包管理器安装了 MVC3，一切似乎都可以编译，但是当我尝试运行我的应用程序时，我得到以下信息：

```
System.TypeLoadException was unhandled by user code
  HResult=-2146233054
  Message=Inheritance security rules violated by type: 'Ninject.Web.Mvc.Filter.FilterContextParameter'. Derived types must either match the security accessibility of the base type or be less accessible.
  Source=mscorlib
  TypeName=Ninject.Web.Mvc.Filter.FilterContextParameter
  StackTrace:
       at System.Reflection.RuntimeAssembly.GetExportedTypes(RuntimeAssembly assembly, ObjectHandleOnStack retTypes)
       at System.Reflection.RuntimeAssembly.GetExportedTypes()
       at Ninject.Infrastructure.Language.ExtensionsForAssembly.HasNinjectModules(Assembly assembly) in c:\Projects\Ninject\ninject\src\Ninject\Infrastructure\Language\ExtensionsForAssembly.cs:line 25
       at Ninject.Modules.CompiledModuleLoaderPlugin.<LoadModules>b__0(Assembly asm) in c:\Projects\Ninject\ninject\src\Ninject\Modules\CompiledModuleLoaderPlugin.cs:line 81
       at Ninject.Modules.AssemblyNameRetriever.AssemblyChecker.GetAssemblyNames(IEnumerable`1 filenames, Predicate`1 filter) in c:\Projects\Ninject\ninject\src\Ninject\Modules\AssemblyNameRetriever.cs:line 114
       at Ninject.Modules.AssemblyNameRetriever.AssemblyChecker.GetAssemblyNames(IEnumerable`1 filenames, Predicate`1 filter)
       at Ninject.Modules.AssemblyNameRetriever.GetAssemblyNames(IEnumerable`1 filenames, Predicate`1 filter) in c:\Projects\Ninject\ninject\src\Ninject\Modules\AssemblyNameRetriever.cs:line 54
       at Ninject.Modules.CompiledModuleLoaderPlugin.LoadModules(IEnumerable`1 filenames) in c:\Projects\Ninject\ninject\src\Ninject\Modules\CompiledModuleLoaderPlugin.cs:line 81
       at Ninject.Modules.ModuleLoader.LoadModules(IEnumerable`1 patterns) in c:\Projects\Ninject\ninject\src\Ninject\Modules\ModuleLoader.cs:line 60
       at Ninject.KernelBase.Load(IEnumerable`1 filePatterns) in c:\Projects\Ninject\ninject\src\Ninject\KernelBase.cs:line 236
       at Ninject.KernelBase..ctor(IComponentContainer components, INinjectSettings settings, INinjectModule[] modules) in c:\Projects\Ninject\ninject\src\Ninject\KernelBase.cs:line 97
       at Ninject.KernelBase..ctor(INinjectModule[] modules) in c:\Projects\Ninject\ninject\src\Ninject\KernelBase.cs:line 57
       at Ninject.StandardKernel..ctor(INinjectModule[] modules) in c:\Projects\Ninject\ninject\src\Ninject\StandardKernel.cs:line 46
       at HoneyBadger.Web.Mvc.App_Start.NinjectWebCommon.CreateKernel() in c:\HoneyBadger\trunk\HoneyBadger.Web.Mvc\HoneyBadger.Web.Mvc\App_Start\NinjectWebCommon.cs:line 43
       at Ninject.Web.Common.Bootstrapper.Initialize(Func`1 createKernelCallback) in c:\Projects\Ninject\Ninject.Web.Common\src\Ninject.Web.Common\Bootstrapper.cs:line 50
       at HoneyBadger.Web.Mvc.App_Start.NinjectWebCommon.Start() in c:\HoneyBadger\trunk\HoneyBadger.Web.Mvc\HoneyBadger.Web.Mvc\App_Start\NinjectWebCommon.cs:line 26
  InnerException: 
```

有任何想法吗？？

更新：

我还想补充一点，它正在轰炸新的 StandardKernel()

```
private static IKernel CreateKernel()
        {
            var kernel = new StandardKernel();

            kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
            kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();

            RegisterServices(kernel);

            return kernel;
        } 
```

添加 AllowPartiallyTrustedCallers 后出现新错误：

```
Attempt by security transparent method 'HoneyBadger.Web.Mvc.App_Start.NinjectWebCommon..cctor()' to access security critical method 'Ninject.Web.Common.Bootstrapper..ctor()' failed.

Assembly 'HoneyBadger.Web.Mvc, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' is marked with the AllowPartiallyTrustedCallersAttribute, and uses the level 2 security transparency model.  Level 2 transparency causes all methods in AllowPartiallyTrustedCallers assemblies to become security transparent by default, which may be the cause of this exception. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T02:16:41.427

[在网上](http://www.sharpfellows.com/?tag=/Ninject)做了一些研究后，我发现一件事是你需要为你的程序集[AllowPartiallyTrustedCallers](http://msdn.microsoft.com/en-us/library/system.security.allowpartiallytrustedcallersattribute.aspx)：

```
[assembly: AllowPartiallyTrustedCallers] 
```

您的项目是否启用了该功能？

更多链接：

*   [http://blog.bugrapostaci.com/2010/02/](http://blog.bugrapostaci.com/2010/02/)
*   [运行具有操作的单元测试可能会破坏新标准内核的运行时异常](https://stackoverflow.com/questions/6036524/running-unit-test-having-operation-could-destablize-the-runtime-exception-at-new)

# ios - 在自定义 MKOverlayView 上多次调用 DrawMapRect

> ID：12682961
> 
> 赞同：3
> 
> 时间：2012-10-02T00:25:28.667
> 
> 标签：ios, mkmapview, mkoverlay

任何人都在这里解决过这个问题[iOS - MKOverlayView 自定义视图矩形填充作品，但线条画没有](https://stackoverflow.com/questions/6023904/ios-mkoverlayview-custom-view-rect-fills-works-but-line-draws-do-not?answertab=active#tab-top)？

我遇到了同样的问题。canDrawMapRect 只调用一次并返回 YES 。但是 drawMapRect 方法被调用了两次，使用相同的 MKMapRect 和 MKZoomScale。我的自定义`MKOverlay`层仅以编程方式添加到`MKMapview`.

谢谢

# python - 如何为每个目录创建一个进程？

> ID：12682963
> 
> 赞同：1
> 
> 时间：2012-10-02T00:25:50.770
> 
> 标签：python, process, directory, fork

我很难为当前目录中的每个文件夹创建**子进程以在它们上执行某些功能（Python 2.7）。**

我的想法是：

*   首先使用**os.listdir(path)获取所有文件夹并使用****os.path.isdir(file_path)**过滤文件。
*   计算文件夹并计算需要多少个**分叉**，**例如：**对于 5 个文件夹，我需要 3 个分叉（2³ - 1 = 7 个子进程）
*   遍历所需的分叉数量，并在每次迭代中执行文件夹的代码，一次两个，从包含所有文件夹路径的列表中获取它们的路径。

    ```
    for counter in needed_forks:
       folder_pid = os.fork()
       if pid:
          some_function(folder_list[counter])
       else:
          some_function(folder_list[counter+1]) 
    ```

我认为，我无法获得任何好的输出，主要是因为 folder_list 的一个索引在每次迭代中重复。任何帮助都非常感谢，我急于完成这项任务，试图同时学习多处理和 Python。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T00:29:43.627

为什么不让一个进程继续分叉？然后您不必尝试计算要使用的分叉数：

```
for d in directories:
    if os.fork():
        # parent
        continue
    else:
        # child
        # handle d...
        break # don't keep going 
```

当然，我会质疑`fork`以这种方式处理目录的智慧......

# python - 在 Google App Engine 上导入和处理电子表格

> ID：12682965
> 
> 赞同：0
> 
> 时间：2012-10-02T00:25:55.907
> 
> 标签：python, excel, google-app-engine, google-sheets

我有一个充满信息的电子表格，只有一次我需要通过读取行​​并从所有数据中创建模型实体将这些数据放入数据存储区。每一行是一个实体，每一列是一个不同的属性。

我有点困惑如何将数据准确地放入 GAE 可处理的表单中，然后我应该使用什么来处理 python 中的电子表格。我可以轻松地将我目前在 Excel 中的数据移动到 Google Docs，如果这样可以让事情变得更容易，但我仍然不确定从那里做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:35:15.287

一种简单的方法是发布电子表格。请参阅此博文：http: [//blog.pamelafox.org/2010/08/importing-data-from-spreadsheets-to-app.html](http://blog.pamelafox.org/2010/08/importing-data-from-spreadsheets-to-app.html)

另一种方法是将电子表格下载为 CSV，然后使用应用引擎批量加载程序上传此 CSV。

# ruby - ruby-1.9.3-p194 和 ruby -1.9.3-p194@global gemsets 有什么区别？

> ID：12682967
> 
> 赞同：2
> 
> 时间：2012-10-02T00:26:16.203
> 
> 标签：ruby, rvm, gemset

我目前在 OSX 10.6.8 上运行以下内容，并试图了解 gemsets 和 gems。

红宝石 1.9.3-p194

导轨 3.2.8

RVM 1.15.6

当我查看 .rvm/gems/ 时，我看到了几个 gemset 目录。每个里面都有一个 gems 目录。现在，非'@' gemset 和@global gemset 之间的关系是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:33:59.760

从[文档中](https://rvm.io/gemsets/global/)：

> ### 解释全局 gemsets
> 
> `@global`RVM 为每个 ruby​​ 解释器提供 (>= 0.1.8) gemset。
> 
> 您为给定 ruby​​ 安装到`@global`gemset 的 Gem 可用于您创建的与该 ruby​​ 关联的所有其他 gemset。
> 
> 这是允许所有项目为特定的 ruby​​ 解释器安装共享同一个已安装 gem 的好方法。

为了对此进行扩展，没有 的`@global`gemset 是该 Ruby 版本的默认 gemset。它本质上是一个没有名字的宝石。`@global`但是，由于上述文档中概述的原因，gemset 是特殊的。

# symfony - 从包含的 Twig 模板中干净地添加 JS 和 CSS

> ID：12682968
> 
> 赞同：15
> 
> 时间：2012-10-02T00:26:18.433
> 
> 标签：symfony, twig, assetic

我正在寻找是否有一种干净的方法可以从包含的模板中添加 JS 和 CSS。

因此，例如，如果 layout.html.twig 有：

```
{% include 'GenericBundle:Generic:page.html.twig' with {'data': data} %}
...
{% block javascript %}

    {% javascripts
        '@GenericBundle/Resources/public/js/app/jquery/jquery.min.js'
        '@GenericBundle/Resources/public/js/lib/bootstrap/bootstrap.min.js'
    %}
        <script src="{{ asset_url }}"></script>
    {% endjavascripts %}

{% endblock %} 
```

在通用捆绑页面中，我想包含更多 Javascript，但将其添加到已建立的 Javascript 块中以保持 HTML 和 JS 最佳实践。

有没有一种干净的方法可以做到这一点？我正在使用 Symfony2，并且可能会使用 Singletons 等将解决方案组合在一起，但如果有可用的方法，我宁愿使用更清洁的方法。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-09-16T16:06:38.090

我知道我参加聚会有点晚了，但是使用 Twig 1.2，您可以利用[use](http://twig.sensiolabs.org/doc/tags/use.html)标签和[block](http://twig.sensiolabs.org/doc/functions/block.html)功能：

**GenericBundle:Generic:page.html.twig**

```
{% block javascripts %}
    <script src="..."></script>
{% endblock %}
{% block included_content %}
   Bar
{% endblock %} 
```

**布局.html.twig**

```
{% use 'GenericBundle:Generic:page.html.twig' with javascripts as page_javascripts %}

{% block javascript %}

    {% javascripts
        '@GenericBundle/Resources/public/js/app/jquery/jquery.min.js'
        '@GenericBundle/Resources/public/js/lib/bootstrap/bootstrap.min.js'
    %}
        <script src="{{ asset_url }}"></script>
    {% endjavascripts %}
    {{ block('page_javascript') }} // Don't forget the 'braces'

{% endblock %}

...
{{ block('included_content') }} // Don't forget the 'braces' 
```

# llvm - 编译 LLVM 时缺少选项

> ID：12682969
> 
> 赞同：1
> 
> 时间：2012-10-02T00:26:27.357
> 
> 标签：llvm

当我使用来自发行版（archlinux）的 LLVM 包时，我有多个可用的命令行选项（我`llvm-link -help`用来查看它们）。

```
OPTIONS:
  -asm-verbose                                 - Add comments to directives.
  -cppfname=<function name>                    - Specify the name of the generated function
  -cppfor=<string>                             - Specify the name of the thing to generate
  -cppgen                                      - Choose what kind of output to generate
    =program                                   -   Generate a complete program
    =module                                    -   Generate a module definition
    =contents                                  -   Generate contents of a module
    =function                                  -   Generate a function definition
    =functions                                 -   Generate all function definitions
    =inline                                    -   Generate an inline function
    =variable                                  -   Generate a variable definition
    =type                                      -   Generate a type definition
  -disable-spill-fusing                        - Disable fusing of spill code into instructions
  -enable-correct-eh-support                   - Make the -lowerinvoke pass insert expensive, but correct, EH code

  ... many more ... 
```

但是，当从源代码构建 LLVM 时，我没有得到这些选项：

```
OPTIONS:
  -f                - Enable binary output on terminals
  -help             - Display available options (-help-hidden for more)
  -o=<filename>     - Override output filename
  -print-after-all  - Print IR after each pass
  -print-before-all - Print IR before each pass
  -stats            - Enable statistics output from program
  -time-passes      - Time each pass, printing elapsed time for each on exit
  -v                - Print information about actions taken
  -verify-dom-info  - Verify dominator info (time consuming)
  -verify-loop-info - Verify loop info (time consuming)
  -version          - Display the version of this program 
```

为什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:39:43.720

您的发行版提供的构建出现了问题。您显示的帮助输出（第一个）绝对是虚假的。你应该向 archlinux 报告错误。

# oop - FP 建模 - 可变性问题

> ID：12682977
> 
> 赞同：0
> 
> 时间：2012-10-02T00:27:05.140
> 
> 标签：oop, haskell, functional-programming, modeling, mutable

我即将开始一个模拟/建模项目。

假设我有一个 A 类型的组件，其特征是一组数据（温度或压力等参数，PDE 和一些边界条件等）和一个 B 类型的组件，其特征是一组不同的数据（不同或相同的参数，不同的 PDE 和边界条件）。我们还假设将应用于每个组件的函数/方法是相同的（例如 Galerkin 方法）。

如果我使用 FP 方法，每个组件都将被分解为数据部分和作用于数据的函数，以获得 PDE 的解决方案。假设参数是恒定的，这种方法对我来说似乎更简单。如果参数不是恒定的（例如，温度突然升高，因此不可能是不变的）怎么办？

解决参数可变性问题的最佳方法是什么？

我来自 C++/Fortran 背景，而且我不是专业程序员，所以请纠正我的任何错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T01:55:07.473

仅仅因为某些东西可以改变并不意味着它不能用不可变的数据来建模。

在 OOish 风格中，假设您有以下内容：

```
a = some_obj.calculationA(some, arguments);
b = some_obj.calculationB(more, args);
return combine(a, b) 
```

显然`calculationA`并且`calculationB`取决于`some_obj`，您甚至可以手动`some_obj`将其作为两个计算的输入。您只是不习惯看到这就是您正在做的事情，因为您考虑的是在对象上调用方法。

以最明显的方式翻译到 Haskell 的一半会给你类似的东西：

```
let a = calculationA some_obj some arguments
    b = calculationB some_obj more args
in combine a b 
```

手动将额外参数作为额外参数传递给所有函数实际上并没有那么麻烦`some_obj`，因为无论如何这就是您在 OO 风格中所做的事情。

缺少的重要内容是 OO 样式`calculationA`并且`calculationB`可能会更改`some_obj`，也可能在此上下文返回后使用。这在函数式风格中也很明显：

```
let (a, next_obj) = calculationA some_obj some arguments
    (b, last_obj) = calculationB next_obj more args
in (combine a b, last_obj) 
```

从理论的角度来看，我习惯于思考事物的方式，无论如何，这“真的”是 OOP 版本中正在发生的事情。给定的命令式代码可以访问的每个可变对象“实际上”是一个额外的输入和一个额外的输出，秘密地和隐式地传递。如果你认为函数式风格让你的程序过于复杂，因为到处都有几十个额外的输入和输出，问问你自己，当所有数据流仍然*存在*但被掩盖时，程序是否真的没有那么复杂？

但这*就是*更高的抽象（例如 monad，但它们不是唯一的）来救援的地方。最好不要把 monad 想成神奇地给你可变状态。相反，将它们视为封装模式，因此您不必像上面那样手动编写代码。当您使用`State`monad 进行“有状态编程”时，所有这些通过函数的输入和输出的状态线程仍在继续，但它是以严格控制的方式完成的，并且正在发生这种情况的函数由 monadic 标记类型，所以你知道它正在发生。

# python - 在 GAE 中从 urlfetch 打开文件

> ID：12682983
> 
> 赞同：1
> 
> 时间：2012-10-02T00:28:31.053
> 
> 标签：python, google-app-engine, blobstore

我正在尝试在 GAE 中打开一个使用`urlfetch()`.

这是我到目前为止所拥有的：

```
from google.appengine.api import urlfetch

result = urlfetch.fetch('http://example.com/test.txt')
data = result.content
## f = open(...) <- what goes in here? 
```

这可能看起来很奇怪，但 BlobStore 中有一个**非常相似**的函数可以写入`data`blobfile：

```
f = files.blobstore.create(mime_type='txt', _blobinfo_uploaded_filename='test')
with files.open(f, 'a') as data:
    data.write(result.content) 
```

如何写入`data`任意文件对象？

编辑：应该更清楚；我正在尝试 urlfetch**任何**文件并`result.content`在文件对象中打开。所以它可能是 .doc 而不是 .txt

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T03:20:33.520

您可以使用 StringIO 模块使用字符串的内容来模拟文件对象。

```
from google.appengine.api import urlfetch
from StringIO import StringIO

result = urlfetch.fetch('http://example.com/test.txt')
f = StringIO(result.content) 
```

然后，您可以从 f 对象中读取（）或使用其他文件对象方法，如 seek()、readline() 等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T00:40:30.057

Yoy不必打开文件。您已收到 data = result.content 中的 txt 数据。

# aviarc - VAR 数据集的范围是什么？

> ID：12682984
> 
> 赞同：1
> 
> 时间：2012-10-02T00:28:32.293
> 
> 标签：aviarc

如果 Workflow1 显示 Screen1 然后 Screen1 调用 Workflow2，我可以从 Screen1 使用 Workflow2 中的**var**数据集还是 Workflow2 重新初始化 var 数据集以供自己使用？

有没有关于 var 数据集的文档？

我只是为屏幕验证重新编写代码，但它不起作用，因为我怀疑 var 数据集已被重置，并且 Screen1 中的值不再可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:41:54.423

目前无法在文档中找到它，但您描述的行为是预期的。

**每个以<workflow>**元素开头的工作流都会创建一个新的范围（[参见此处](http://dev.aviarc.com/docs/aviarc/reference/xml_commands/com.aviarc.base/1.3.0/workflow)）和 VAR 数据集。此数据集仅对与其相关的屏幕可见。如果屏幕在其案例中调用另一个工作流，它将创建自己的 VAR 数据集并隐藏任何其他已经存在的数据集。

在您的示例中，设置如下：

```
--> 进入 Workflow1
    数据集：
        变量
        ...（任何其他声明的数据集）
--> 显示屏幕 Screen1
    可见数据集：
        变量
        ...（任何其他声明的数据集）
--> 调用 Workflow2
    数据集：
        var（这是一个新的干净数据集，没有任何
             与在 Workflow1 中创建的 VAR 数据集的关系）
        ...（任何新数据集）
        ...（在 Workflow1 中声明的任何数据集，假设有
             没有在 Worklow2 中声明的具有相同名称的新数据集）

```

因此，您的推理似乎是正确的，如果您希望数据在整个工作流程中可用，则需要创建一些其他数据集。

# c - 管理共享内存中的互斥锁

> ID：12682985
> 
> 赞同：1
> 
> 时间：2012-10-02T00:28:40.087
> 
> 标签：c, concurrency, mutex

我正在尝试在共享内存中创建互斥锁的简单任务。我有以下代码来声明一段共享内存，并将其附加到`int*`.

```
int *mutex;

// allocate shared memory for mutex
if ((shmid2 = shmget(IPC_PRIVATE, 4, IPC_CREAT | 0666)) < 0) {
  printf("Could not allocate shared memory for mutex: %d.\n", errno);
  exit(errno);
}

if ((mutex = shmat(shmid2, NULL, 0)) == (int*)-1) {
  printf("Could not attach shared memory for mutex: %d\n", errno);
  exit(errno);
}

// set the mutex to one
mutex[0] = 1; 
```

现在，我尝试定义一个关键部分，由锁定和解锁互斥锁包围。（在许多子进程之一的内部）。

```
while (*mutex == 0) ;
mutex[0] = 0;

// critical section

...

// end critical section

mutex[0] = 1; 
```

但是，我发现这种技术不起作用，两个子进程可以同时进入关键部分，没有太多问题（它经常发生）。所以我想知道在不使用 pthread 的情况下我能做些什么来解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T00:33:47.393

您的选择是：

1.  使用 POSIX 信号量而不是尝试使用共享内存自旋锁自己实现它们。有关详细信息，请参阅文档[`semop (2)`](http://linux.die.net/man/2/semop)和相关功能。

2.  如果必须使用共享内存信号量，则需要使用原子比较/交换。否则，两个进程可以同时看到`*mutex == 0`并同时设置它`1`，而不会“注意到”另一个进程正在做同样的事情。

# list - Alfresco 4 中用户友好的自定义列表

> ID：12682986
> 
> 赞同：0
> 
> 时间：2012-10-02T00:28:43.190
> 
> 标签：list, sharepoint, alfresco

我正在尝试寻找 Sharepoint 2010 的免费替代品。特别是我需要自定义列表创建功能。我读过 Alfresco 是一个很好的替代品，但我似乎找不到任何关于自定义数据列表创建的教程。在 Sharepoint 中，您可以开箱即用地创建自定义列表和字段，但似乎使用 Alfresco 您必须处理 XML 代码，这对用户不太友好，对吗？

如果是这种情况，是否有任何其他类型的 ECM 具有此功能？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T05:38:36.873

使用 Alfresco，有（第 3 方）工具提供了在运行时使用 gui 对内容进行建模的功能，从而保护用户免受丑陋的 XML 的影响。前往[http://addons.alfresco.com](http://addons.alfresco.com)并搜索“模型”。Alfresco Form-Model Management 就是一个例子。

也就是说，我很难想象基于 gui 的内容建模会成为选择 ECM 的关键特性，因为通常开发人员很少这样做（在一个特定项目中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-14T21:36:48.170

这是一个教程，展示了如何在 Alfresco 中进行自定义数据列表：http: [//ecmarchitect.com/archives/2010/04/25/1156](http://ecmarchitect.com/archives/2010/04/25/1156)。我针对 Alfresco 3.3 编写了它，并且没有针对最新版本对其进行测试，但是从那时起，内容建模和大多数共享表单配置内容并没有真正改变太多，所以试一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-13T16:23:13.150

ECM 的概念正在迅速发展。作为在大型环境中构建和管理 SharePoint、Documentum、Wiki 场以及 ECM 服务、Web 服务、数据服务等的人，传统的 Web ECM 定义并不是许多公司现在在解决方案中所寻求的。Web 解决方案不仅仅是“纯 ECM”。在许多情况下，它们也不是由开发人员和管理员构建和管理的。“用户管理员”正在成为常态。SharePoint 的分层委派模型和自定义功能不是最终状态，但它们正朝着正确的方向前进。我猜 Alfresco 的新版本也可能朝这个方向发展。