# StackOverflow 问答 15336000-15336999

# ios - 如何在 sqlite IOS 中添加二维数组？

> ID：15336024
> 
> 赞同：0
> 
> 时间：2013-03-11T10:17:06.423
> 
> 标签：ios, sqlite

我有一个数组，即 _twoArray 它包含如下数据

```
ha ha 2d array(
    (
    "Anand Kapadiya",
    "Alok Darji",
    "Akash Parikh",
    "Ajay Desai",
    "Aysu Can",
    "Ayegba James",
    "Ashish Modi",
    "Arks Patel",
    "Archit Patel",
    "Anzey Khodorovskyy"
),
    (
    "12/01",
    "08/13/1990",
    "12/09/1989",
    "05/22/1988",
    "04/14/1992",
    "12/15/1905",
    "09/08",
    "05/27/1990",
    "05/22/1990",
    "02/06"
) 
```

)

我有一个包含一个表和 2 个字段的数据库，一个是名称，另一个是出生日期如何从这个二维数组在数据库中添加出生日期和名称我正在尝试以下代码

```
 for (id obj in _twoArray) 
{

 sqlite3_stmt *stmt;
    int x;

    char *update = "insert into PersonNamesAndBirthDates (Names,Birthdates) values(? ?);";
    x = sqlite3_prepare_v2(database1, update, -1, &stmt, nil);

    if (x == SQLITE_OK)
    {
        NSLog(@"PersonNamesAndBirthDates is -->%@",[NSString stringWithFormat:@"%@",obj]);

        sqlite3_bind_text(stmt, 1, [[NSString stringWithFormat:@"%@",obj] UTF8String],-1, NULL);
        sqlite3_bind_text(stmt, 2, NULL,-1, NULL);

    }
    if (sqlite3_step(stmt) != SQLITE_DONE){}
    NSLog(@"Error: ");
    sqlite3_finalize(stmt);

} 
```

请给我一些建议，或者如果这不可能，那么告诉我如何同时在表中添加 2 个不同的数组

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:26:26.870

您的 _twoArray 包含两个对象，它们又是 NSArray。现在修复了一个数组中总是有两个数组，然后试试这个

```
NSArray *nameArr = [_twoArray objectAtIndex:0];
NSArray *bdArr   = [_twoArray objectAtIndex:1];
if (sqlite3_open([databaseFilePath UTF8String], &database1) == SQLITE_OK)
{
    for (int i = 0; i< [nameArr count]; i++)
    {

        sqlite3_stmt *stmt;
        int x;

        char *update = "insert into PersonNamesAndBirthDates (Names,Birthdates) values(? ?);";
        x = sqlite3_prepare_v2(database1, update, -1, &stmt, nil);

        if (x == SQLITE_OK)
        {
            NSLog(@"PersonName is -->%@",[NSString stringWithFormat:@"%@",[nameArr objectAtIndex:i]]);
            NSLog(@"BirthDates is -->%@",[NSString stringWithFormat:@"%@",[bdArr objectAtIndex:i]]);

            sqlite3_bind_text(stmt, 1, [[NSString stringWithFormat:@"%@",[nameArr objectAtIndex:i]] UTF8String],-1, NULL);
            sqlite3_bind_text(stmt, 2, [[NSString stringWithFormat:@"%@",[bdArr objectAtIndex:i]] UTF8String],-1, NULL);

        }
        if (sqlite3_step(stmt) != SQLITE_DONE){}
        NSLog(@"Error: ");
        sqlite3_finalize(stmt);

    }
    sqlite3_close(database1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:27:08.677

您的数组包含两个数组类型的对象。

```
 for (int i=0;i<[[_twoArray objectAtIndex:0] count];i++) 
{

 sqlite3_stmt *stmt;
    int x;

    char *update = "insert into PersonNamesAndBirthDates (Names,Birthdates) values(? ?);";
    x = sqlite3_prepare_v2(database1, update, -1, &stmt, nil);

    if (x == SQLITE_OK)
    {
        NSLog(@"PersonName:%@ BirthDate:%@",[[NSString stringWithFormat:@"%@",[[_twoArray objectAtIndex:0] objectAtIndex:i]],[[NSString stringWithFormat:@"%@",[[_twoArray objectAtIndex:1] objectAtIndex:i]]);

        sqlite3_bind_text(stmt, 1, [[NSString stringWithFormat:@"%@",[[_twoArray objectAtIndex:0] objectAtIndex:i]] UTF8String],-1, NULL);
        sqlite3_bind_text(stmt, 2, NULL,-1, NULL);

    }
    if (sqlite3_step(stmt) != SQLITE_DONE){}
    NSLog(@"Error: ");
    sqlite3_finalize(stmt);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T10:44:19.987

您不能以您尝试的方式执行此操作，因为您的`for`循环一次为您提供一个数组而不是变量。您可以使用以下两种方式：

1.  创建两个数组`name`并`dob`分别在同一索引上添加记录然后`for`对任何数组的索引使用循环并使用2个字符串变量来存储相同索引的数据，然后使用这些来创建查询

2.  或者，您可以创建一个`NSDictionary`可以存储的`name`和`dob`，例如

    ```
     NSMutableArray *array = [[NSMutableArray alloc] initWithCapacity:0];
        while (records) {
            NSDictionary *dictionary = [NSDictionary dictionaryWithObjectsAndKeys:
                                        @"Mr. X", @"name"
                                        @"13/12/82", @"dob"
                                        nil];
            [array addObject:dictionary];
            records--;
        } 
    ```

    然后为索引创建每个查询。要检索字典、值并创建查询，请使用以下代码，

    ```
     for (NSDictionary *dict in array) {
            NSString *userName = [dict valueForKey:@"name"];
            NSString *dateOfBirth = [dict valueForKey:@"dob"];
            //write query here
        } 
    ```

# jquery - 单击复选框并将类应用于其父级

> ID：15336025
> 
> 赞同：0
> 
> 时间：2013-03-11T10:17:07.990
> 
> 标签：jquery, forms, checkbox, toggleclass

如果选中了输入框，我正在尝试将一个类应用于 li 元素，但我无法弄清楚为什么它没有发生。HTML 和 CSS 是“由其他人设计的”，所以我确信单独的 jQuery 存在错误。

HTML是

```
<ol class="subproduct">
<li>
    <input type="checkbox" name="extra2" value="tested" />
    <p class="checkbox"></p>
    <h3>test <span class="price">5</h3>
    <p>word words words</p>
</li>
<li>
    <input type="checkbox" name="extra2" value="tested" />
    <p class="checkbox"></p>
    <h3>test <span class="price">5</h3>
    <p>word words words</p>
</li>
<li>
    <input type="checkbox" name="extra2" value="tested" />
    <p class="checkbox"></p>
    <h3>test <span class="price">5</h3>
    <p>word words words</p>
</li>
<li>
    <input type="checkbox" name="extra2" value="tested" />
    <p class="checkbox"></p>
    <h3>test <span class="price">5</h3>
    <p>word words words</p>
</li> 
```

用于此的 Jquery 是

```
$(document).ready(function() {
    $('input:checkbox').change(function(){
         if($(this).is(":checked")) {
             $('.subproduct li').addClass("checked");
         } else {
             $('.subproduct li').removeClass("checked");
         }
    });
}); 
```

我用所有的 CSS 和 HTML 创建了一个小 JSFiddle - [http://jsfiddle.net/sturobson/gG8Qr/](http://jsfiddle.net/sturobson/gG8Qr/)

我确定有一些过度的特异性或什么？基本上，如果选中该复选框，我想向 .subproduct li 添加/删除一个类

但是当前的代码不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:20:27.517

您正在检查检查 bocx 是否被选中......然后如果选中，您正在将类添加到所有`<li>`.. 用于`parent()`获取该特定`<li>`和 ..使用添加或删除类 .. 使用 parent();

```
$(document).ready(function() {
  $('input:checkbox').change(function(){
    if($(this).is(":checked")) {
        $(this).parent().addClass("checked");
    } else {
         $(this).parent().removeClass("checked");
    }
  });
}); 
```

[在这里摆弄](http://jsfiddle.net/bipen/gG8Qr/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:20:49.677

您总是将类分配给所有`li`元素。`li`尝试仅使用 jQuery [**parent()**](http://api.jquery.com/parent)将其分配给直接育儿，类似于：

```
$(document).ready(function() {
    $('input:checkbox').change(function(){
        if($(this).is(":checked")) {
            $(this).parent("li").addClass("checked");
        } else {
            $(this).parent("li").removeClass("checked");
        }
    });
}); 
```

或者，如果您想始终将类分配给父类，无论它是`li`不是，您都可以使用`parent()`类似于以下内容：

```
$(document).ready(function() {
    $('input:checkbox').change(function(){
        if($(this).is(":checked")) {
            $(this).parent().addClass("checked");
        } else {
            $(this).parent().removeClass("checked");
        }
    });
}); 
```

* * *

[**演示**](http://jsfiddle.net/gG8Qr/4/)- 仅将课程分配给父级`li`

* * *

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T10:21:01.350

您必须深入 DOM 而不是选择所有`.subproduct li`元素。为此，请使用 jQuery parent、next 或 prev 函数。在您的示例中：

```
$(document).ready(function() {
    $('input:checkbox').change(function(){
         if($(this).is(":checked")) {
             $(this).parent().addClass("checked");
         } else {
             $(this).parent().removeClass("checked");
         }
    });
}); 
```

# jquery-mobile - jQuery Mobile val() 在 changePage 后返回 undefined

> ID：15336039
> 
> 赞同：0
> 
> 时间：2013-03-11T10:17:53.667
> 
> 标签：jquery-mobile, redirect, refresh, undefined

我有 2 个正在使用的页面：第一个页面是从 php 服务器获取值并填充选择/输入的页面，第二个页面是一个对话框，它从第一页中的隐藏输入中获取值. 第一个转换打开对话框并正确获取值。之后我将值保存在 php 会话中并重新加载第一页。在此过程之后，当我再次打开对话框时，jquery 无法获取 val() 并显示未定义。我不确定这是由于重新加载页面问题还是其他原因。如果我刷新页面，那么它将再次正常工作。

```
<div data-role="page" id="page1">
    <div data-theme="a" data-role="header">
          .....
    <div data-role="navbar" data-iconpos="top">
          .....
    </div>
    <div data-theme="c" id="cashtab" data-role="content">
        <div style="display:none" id="proddata" data=""></div>
        <div style="display:none" id="prodstock" data=""></div>
        <form id="mainsubmit" action="form.php" method="post" data-ajax="false">
            <input id="formproduct" type="hidden" name="product" value=""/>
            <div id="productsearch" style="width:48%; float:left; margin-right:2%;">
                <label for="search">Search Product:</label><br/><br/>
                <ul id="productautocomplete" data-role="listview" data-inset="true" data-filter="true" data-filter-placeholder="Select a product... (type at least 3 letters)" data-filter-theme="d"></ul>
            </div>
            <div id="packingselect" style=" width:23%; float:left; margin-right:2%;">
                 <label for="packing">Select Packing:</label>
                 <select name="packing" id="packing" data-iconpos="left">
                 </select>
            </div>
            <div id="qtyenter" style=" width:23%; float:left; margin-right:2%;">
                 <label for="quantity">Select Qty:</label>
                 <input type="number" data-clear-btn="true" name="quantity" id="qty" value=""/>
            </div><br/><br/><br/><br/><br/><br/><br/><br/>
            <div style="display:inline-block; width:33%; margin-left:33%; margin-right:33%;">
                 <a href="#page3" data-rel="dialog" data-role="button" >ADD</a>
            </div>
        </form>
    </div>
</div>

<div data-role="page" id="page3" data-url="dialog.html" data-close-btn="right">
    <div data-role="header">
        <h1>Batch Selection</h1>
    </div>
    <div data-role="content">
    <div style="overflow:auto;">
    <table id="batchsel" style="border:1px;">
        <thead>
        <tr>
            <th></th>
            <th>Batch No</th>
            <th>Exp Date</th>
            <th>Brate</th>
            <th>Srate</th>
            <th>Packing</th>
            <th>Stock</th>
            <th>Supplier</th>
            <th>ST%</th>
            <th>Bill Date</th>
            <th>Bill No</th>
            <th>btax</th>
        </tr>
        </thead>
              <!--data populated from server once the values from first page is read properly. 
              <!-- currently not loading the second time as unable to fetch val() -- >
        <tbody>
        </tbody>
    </table>
    </div>
    <div id="remainingdata">
        <p1 id="changeable_requirements"></p1>
        <!-- function the send the checked checkboxes relavent info to store in session --> 
        <button id="saveprod" onclick="addProduct(); return false;">Add Product</button>
    </div>
    </div>
</div>

<script>
$( document ).on( "pageinit", "#page1", function() {

//for product select autopopulate -- working //

$("#productautocomplete").live( "listviewbeforefilter", function ( e, data ) {
        var $ul = $( this ),$input = $( data.input ),value = $input.val(),html = "";
        $ul.html( "" );
        if ( value && value.length > 2 ) {
            $ul.html( "<li><div class='ui-loader'><span class='ui-icon ui-icon-loading'></span></div></li>" );
            $ul.listview( "refresh" );
        $.getJSON('ajax/getProductList.php', {term:$input.val()}, function(data) {
        var items = [];
        var str = "";
        for (var key in data) {
            if (data.hasOwnProperty(key)) {
                var value = data[key].value;
                var label = data[key].label;
                var stock = data[key].stock;
                var proddata = data[key].data;
                str += '<li code="'+value+'" name="'+label+'" stock="'+stock+'" data="'+proddata+'">';
                str += '<a data-ajax="false" rel="external">'+label+' [ '+stock+' ]</a>';
                str += '</li>';
            }
        }
        $ul.html( str );
                $ul.listview( "refresh" );
                $ul.trigger( "updatelayout" );
        });
        }
    });
    //end search

    //on click set hidden input fields to be used in dialog box. -- working

    $('#productautocomplete li').live('click', function(e) {
    //--------------------fetch data ------------------------
    var id = $(this).attr('code'); 
    var name = $(this).attr('name');
    var data = $(this).attr('data');
    var stock = $(this).attr('stock');
    //add packaging type and unit info to div data
    $('#proddata').attr('data',data);
    //add currstock info to div
    $('#prodstock').attr('data',stock);
    //----------------------hide list
    $('#productautocomplete li').hide();
    //----------------------place name in visible input box
    $('#productsearch input').attr('value',name);
    //----------------------place id in hidden input box for the actual form.
    $('#formproduct').val(id);
    //----------------------fill options for package + show select package div 
    var filteroptions = data.split(",");
    $('#packing option').remove();
    for (var x=0; x<3 ; x++) {
        var eachoption = filteroptions[x].split(":");
        //if unit wise option is less than that of stock show as option. 
        if (eachoption[0]!="0" && eachoption[0] <= stock.valueOf()) {
        $('#packing').append($('<option>', { 
            value: eachoption[0]+':'+eachoption[1],
            text : eachoption[1]+' [ '+eachoption[0]+' ] '
        }));
        }
    }
    });
});

//this is where the problem lies .. 
//have tried with pageinit.. but that only calls it once.
$( document ).on( "pageshow", "#page3", function() {
    $('#batchsel tbody').empty(); 

    // !!!!!!!!!!!!!!!!!!!!!!! // !!!!!!!!!!!!!!!!!!!!!!! //
    //doesnt fetch any of 4 following values after pageChange back to page1\. 
    //not sure if this is due to how i'm reloading the page1\. 
    //see function addProduct below.

    var prodcode = $('#formproduct').val(); // 
    var prodstock = $('#prodstock').attr('data');
    var prodqty = $('#qty').val();
    var packing = $('#packing').find(":selected").val();

    //returns undefined
    alert(prodcode); alert(packing); alert(prodqty); 

    //always ends here when dialog opens second time.
    if (!prodcode || !packing || !prodqty) {
       alert("Please give all required information");
       //does not close also when opens the second time.
       $('#page3').dialog('close');
    }

    var packinginfo = packing.split(":");
    var totalrequired = prodqty * packinginfo[0];
    //alert(packinginfo[1]);alert(totalrequired);
    if (totalrequired > prodstock ) {
    alert("Not enough Stock");
    $('#page3').dialog('close');
    } else {
    //------------------------------ Getting Batch Info ---------------------------------------------------
    var rows = '';
    $.getJSON('ajax/getBatchDetails.php', {code:prodcode,pack:packinginfo[1],qty:totalrequired}, function(data) {
        for (var key in data) {
        if (data.hasOwnProperty(key)) {
            //alert (data[key].Batch);
            rows += '<tr><td><input type="checkbox" class="batchcheckbox" id="batchcheckbox_'+data[key].BatchId+'" value="'+data[key].BatchId+':'+data[key].Stock+'" onchange="resetRemainingQty(this.value);""/></td><td>' + data[key].Batch + '</td><td>' + data[key].ExDt +'</td><td>' + data[key].BRate + '</td><td>' + data[key].SRate + '</td><td>' + data[key].Pack + '</td><td>' + data[key].Stock + '</td><td>' + data[key].Supname + '</td><td>' + data[key].Stax + '</td><td>' + data[key].BillDt + '</td><td>' + data[key].BillNo + '</td><td>' + data[key].btax + '</td><tr>';
        }
        }
        $('#batchsel tbody').append(rows);
        //add remaining amount in the data field of p1\. 
        $('#remainingdata p1').attr('data',totalrequired);
        $('#remainingdata p2').attr('data',totalrequired);
        $('#remainingdata p1').html("<h4>Remaining Amount : "+totalrequired+"</h4>");
    });
    //---------------------------------------------end batch info display: -----------------------------------
    }
});

function addProduct() {
    //--------code info---------
    var prodcode = $("#formproduct").val(); // to send
    //--------packing info---------------
    var packing = $('#packing').find(":selected").val();
    var packinginfo = packing.split(":");
    //-----------qty req ---------------------
    var prodqty = $('#qty').val();
    var totalrequired = prodqty * packinginfo[0]; // to send
    //-------------batch info -----------
    var allbatchids = "";
    $('.batchcheckbox').each(function() {
    if($(this).is(':checked')){
        var data = $(this).val();
        var datasplit = data.split(":");
        var batchid = datasplit[0];
        allbatchids += batchid+":";
    }
    });
    allbatchids = allbatchids.substring(0, allbatchids.length - 1); // to send
    alert(prodcode+",,"+packinginfo[1]+",,"+totalrequired+",,"+allbatchids);
    //-------------- send to server to save to session ---------
    $.getJSON('ajax/saveProductSession.php', {code:prodcode,pack:packinginfo[1],qty:totalrequired,batch:allbatchids}, function(data) {
    if (data.error == "1") {
        alert(data.message);
    } else {

        /// !!!!!!!! !!!!!!!!!!!!!!! !!!!!!!!!!!!!!!
        /// 
        /// the loads the page1\. but jquery doesnt take val() after this. 
        ///tried multiple variations of this but to no effect. 
        ///removed all options.. redirect to main.php.. reloadpage:false.. etc. 
        ///Any other way to reload the page so that the dialog once open again can 
        ///get the values from the page1 again. 

        $.mobile.changePage("#page1", {  reloadPage: true , dataUrl : "page1", reverse : true, changeHash: true } ); 

    } 
    });
//    
//    $.ajax({
//  type: "POST",
//  url: "ajax/saveProductSession.php",
//  data: { code:prodcode,pack:packinginfo[1],qty:totalrequired,batch:allbatchids }
//    }).done(function() {});
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T07:49:16.997

好的 ！我让它工作了！无论如何谢谢@Gajotres。脚步 ：

1a。通过 changePage 从 main.php 发送变量：

```
var prodcode = $('#formproduct').val();
var prodstock = $('#prodstock').attr('data');
var prodqty = $('#qty').val();
var packing = $('#packing').find(":selected").val();
$.mobile.changePage('batch.php', {
    role: 'dialog', 
    data: {'prodcode': prodcode,'prodstock': prodstock, 'prodqty' : prodqty , 'packing' : packing},
    type: 'get' 
}); 
```

2a. 将整个 div id 'page3' 移动到一个名为 'batch.php' 的新 php 页面，我从 php 获取变量并将其设置为 html div。

```
<?php 
    extract($_GET);
    if (!$prodcode && !$prodstock && !$packing && !$prodqty) {
        header('Location: '.DEF_SITEURL."main.php");
        exit;
    }
?>
<div data-role="page" id="batchpage" data-url="batch.php" data-close-btn="right">

    <div data-role="header">
        <h1>Batch Selection</h1>
    </div>
    <div data-role="content">
    <div style="display:none;" id="batchprodcode" data="<?php echo $prodcode; ?>"></div>
    <div style="display:none;" id="batchprodstock" data="<?php echo $prodstock; ?>"></div>
    <div style="display:none;" id="batchpacking" data="<?php echo $packing; ?>"></div>
    <div style="display:none;" id="batchqty" data="<?php echo $prodqty; ?>"></div>
    <div style="overflow:auto;">
    <table id="batchsel" style="border:1px;">
        <thead>
        <tr>
            <th></th>
            <th>Batch No</th>
            <th>Exp Date</th>
            <th>Brate</th>
            <th>Srate</th>
            <th>Packing</th>
            <th>Stock</th>
            <th>Supplier</th>
            <th>ST%</th>
            <th>Bill Date</th>
            <th>Bill No</th>
            <th>btax</th>
        </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    </div>
    <div id="remainingdata">
        <p1 id="changeable_requirements"></p1>
        <button id="saveprod" onclick="addProduct(); return false;">Add Product</button>
    </div>
    </div>
</div> 
```

3a。然后，我只需将用于 page3 的 pageshow 更改为在 batch.php 上创建的新 div。该脚本仍然在 main.php 上运行。

```
$( document ).on( "pageshow", "#batchpage", function() {
   $('#batchsel tbody').empty();
   var prodcode = $('#batchprodcode').attr('data');
   var prodstock = $('#batchprodstock').attr('data');
   var prodqty = $('#batchqty').attr('data');
   var packing = $('#batchpacking').attr('data');
   ...
}); 
```

# xslt - XSLT 隐藏元素 IF 字符串为空

> ID：15336040
> 
> 赞同：1
> 
> 时间：2013-03-11T10:17:54.253
> 
> 标签：xslt

我想隐藏“imageText”并且 div IF 字符串为空。目前，此 imageText 将文本覆盖到具有背景颜色的图像上（文本在 Umbraco 中指定）。

我已经尝试过：

```
<xsl:if test = "imageText" != ''"> 
```

有人可以帮我完成这个吗？

这是我的代码：

```
<td width="300" height="114" valign="top">

    <div class="imageTitle">
    <xsl:call-template name="getText">
      <xsl:with-param name="imageText" select="$bottomImageLeftText" />
    </xsl:call-template>   
    </div>

    </td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:42:10.663

元素中的文本是被称为`imageText`还是在变量中`$bottomImageLeftText`？似乎是后者，所以请试试这个：

```
<td width="300" height="114" valign="top">
  <xsl:if test="$bottomImageLeftText != ''">
    <div class="imageTitle">
      <xsl:call-template name="getText">
        <xsl:with-param name="imageText" select="$bottomImageLeftText" />
      </xsl:call-template>   
    </div>
  </xsl:if>
</td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:46:05.807

您需要以传递给 的值为条件`with-param`，而不是参数名称（仅*在*被调用模板中有意义）。所以将`div`元素包装在一个

```
<xsl:if test="string($bottomImageLeftText)"> 
```

`$bottomImageLeftText`如果字符串值为非空，这将包括 div 及其内容——包括它仅包含空格的情况。如果您想将仅空白视为完全空，您可以使用

```
<xsl:if test="normalize-space($bottomImageLeftText)"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T10:48:04.650

我会尝试这样的事情：

```
<!-- Code which calls the getText template and passes the bottomImageLeftText variable -->
<xsl:call-template name="getText">
  <xsl:with-param name="imageText" select="$bottomImageLeftText" />
</xsl:call-template>

<!-- getText template which checks the param imageText for an empty string. -->
  <xsl:template name="getText" >
    <xsl:param name="imageText" />

    <xsl:if test="$imageText" >
      <div class="imageTitle">
        <!-- your code, display image title -->
      </div>
      </xsl:if>
  </xsl:template> 
```

# watir - 我们可以使用 watir 自动化 Silverlight 屏幕吗？

> ID：15336041
> 
> 赞同：2
> 
> 时间：2013-03-11T10:17:56.060
> 
> 标签：watir, watir-webdriver, firewatir

我们可以使用 watir 自动化银光屏幕吗？在 watir 的主页上，写到 watir 可以自动化任何 Web 应用程序，无论它建立在什么平台上。但我读到它不支持小程序或微软silverlight。请帮助我解决这个问题。如果我们可以自动化silverlight屏幕，那么请告诉我们如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:26:04.337

No, watir can not automate anything inside browser plugin.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T18:29:16.017

Content inside plugins such as Flash and Silverlight is not really exposed inside the DOM and so is difficult to test with Watir. However there are other tools you can use in combination with Watir such as [Sikuli](http://www.sikuli.org/) (use Jruby in that case to run watir, cucumber etc and use them in combination with Sikuli which is java based)

# r - 如何在 R 中矢量化我的函数？

> ID：15336045
> 
> 赞同：0
> 
> 时间：2013-03-11T10:18:08.667
> 
> 标签：r, function

我在 R 中编写了一个函数，如下所示，但我无法以矢量化方式使用它（下面代码的第二部分）。我想知道如何使这个函数矢量化

```
normalize=function(browser){
   if (browser=="Chrome" | browser=="Firefox" | browser=='Safari' | grepl('IE',browser)){
     browser
   }else{
     "Others"
   }
}

data$browser_n<-normalize(data$browser)      // not working (data is a data frame) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T10:22:34.443

使用 ifelse()：

```
normalize=function(browser){
  ifelse(browser=="Chrome" | browser=="Firefox" | browser=='Safari' | grepl('IE',browser), browser, 'Others')
}

browser <- c('aaa', 'Chrome')
normalize(browser) 
# [1] "Others" "Chrome" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T10:33:24.577

```
normalize <- function(browser){
  replace(browser, !(browser %in% c("Chrome", "Firefox", "Safari") | 
                     grepl('IE',browser)), "Others")  
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T11:34:11.927

这里有两条评论。

最好使用`||`而不是`|`. 这就是为什么。

> & 和 && 表示逻辑 AND 和 | 和 || 表示逻辑或。较短的形式执行元素比较的方式与算术运算符大致相同。较长的形式从左到右评估，仅检查每个向量的第一个元素。仅在确定结果之前进行评估。较长的形式适用于编程控制流，通常在 if 子句中首选。

另一种方法是使用`any`.

```
 normalize = function(browser){
   if (any(browser == "Chrome", browser == "Firefox", browser == "Safari",
     grepl("IE", browser)) {
     browser
   } else {
     "Others
   }
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T10:34:47.387

虽然这可能不是最正确的答案，但您可以尝试`Vectorize`. 通常，您可以使用`Vectorize`许多函数来对它们进行矢量化。我应该补充一点，这`Vectorize`只是一个漂亮的包装`mapply`

```
normalize = function(browser) {
    if (browser == "Chrome" | browser == "Firefox" | browser == "Safari" | grepl("IE", browser)) {
        return(browser)
    } else {
        return("Others")
    }
}

vNormalize <- Vectorize(normalize)

data <- data.frame(browser = c("Chrome", "Firefox", "Safari", "IE 10"))

vNormalize(data$browser)
## [1] Chrome  Firefox Safari  IE 10  
## Levels: Chrome Firefox IE 10 Safari 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T10:23:33.457

或者，如果您对向量化并不真正感兴趣，但想像`browser_n`您的示例中那样获取新变量，您可以只写

```
data$browser_n<-data$browser
data$browser_n[!(data$browser=="Chrome" | data$browser=="Firefox" | 
               data$browser=='Safari' | grepl('IE',data$browser))] <- "Others" 
```

# .htaccess - .htaccess 重定向 /shop/ 但不是 /shop/product

> ID：15336052
> 
> 赞同：2
> 
> 时间：2013-03-11T10:18:33.247
> 
> 标签：.htaccess, redirect

我需要重定向：

`/shop/`到`/shop/pay-your-bill/`

目前在我的 .htaccess 文件中，我有：

```
Redirect /shop/ http://url/shop/pay-your-bill/ 
```

然而，这会导致此错误：

网页 URL/shop/pay-your-bill/pay-your-bill/pay-your-bill/pay-your-bill/pay-your-bill/pay-your-bill/pay-your-bill/支付你的账单/支付你的账单/支付你的账单/支付你的账单/支付你的账单/支付你的账单/支付你的账单/支付你的账单/支付- your-bill/pay-your-bill/pay-your-bill/pay-your-bill/pay-your-bill/pay-your-bill/pay-your-bill 导致了过多的重定向。清除此站点的 cookie 或允许第三方 cookie 可能会解决问题。如果不是，则可能是服务器配置问题，而不是您的计算机问题。

有没有办法将商店重定向到正确支付账单？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:51:47.527

您可以像这样使用 RedirectMatch：

```
RedirectMatch 302 ^/shop/?$ /shop/pay-your-bill/ 
```

或者如果你可以使用 mod_rewrite 然后使用：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^shop/?$ /shop/pay-your-bill/ [L,R,NC] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:40:50.870

你可以试试这个

```
rewriterule ^/shop/(.*) http://url/shop/pay-your-bill/ [r=301,nc] 
```

# c - 查找最小和最大单词的程序

> ID：15336054
> 
> 赞同：1
> 
> 时间：2013-03-11T10:18:44.173
> 
> 标签：c, string

这是 KN King 书中的一个例子，它在一系列单词中找到最小和最大的单词，并在单词长度为 4 处停止。但它不能正常工作。

```
#include <stdio.h>
#include <string.h>

#define N 20

int main(void) {
    char smallest_word[N];
    char largest_word[N];
    char current_word[N];
    printf("Enter word: ");
    gets(current_word);
    strcpy(smallest_word, strcpy(largest_word, current_word));
    while(strlen(current_word) != 4){
        printf("Enter word: ");
        gets(current_word);
        if(strcmp(current_word, smallest_word) < 0)
            strcpy(smallest_word, current_word);
        if(strcmp(current_word, largest_word) > 0)
            strcpy(largest_word, current_word);

    } 
    printf("\nSmallest word: %s\n", smallest_word);
    printf("Largest word: %s\n", largest_word);
    return 0;
} 
```

假设我输入：

```
cat 
dog 
catfish
bear 
```

给

```
Output:
Smallest Word: bear
Largest Word: dog 
```

我认为这是错误的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T10:21:26.467

如果我们按[字典顺序](http://en.wikipedia.org/wiki/Lexicographical_order)排列这四个单词，我们得到：

*   熊
*   猫
*   鲶鱼
*   狗

因此输出看起来是正确的（“bear”是第一个，“dog”是最后一个）。

# windows-phone-7 - 将 Line 的对象转换为位图以及 windows phone 中的字节数组

> ID：15336057
> 
> 赞同：0
> 
> 时间：2013-03-11T10:18:47.113
> 
> 标签：windows-phone-7

我卡在了转换点我想用画布画一条线现在我想把这条线保存在位图数据中以备将来使用它怎么可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:30:03.180

创建一个[`WriteableBitmap`](http://msdn.microsoft.com/en-us/library/dd638675%28v=vs.95%29.aspx)，使用您的 Canvas 作为构造函数的参数。然后使用[`SaveJpeg`](http://msdn.microsoft.com/en-US/library/windowsphone/develop/system.windows.media.imaging.extensions.savejpeg%28v=vs.105%29.aspx)方法保存图片。

# c# - 处理 .net Windows 服务中的停止

> ID：15336065
> 
> 赞同：3
> 
> 时间：2013-03-11T10:19:04.107
> 
> 标签：c#, .net, windows-services

我确信这是一个非常常见的案例，但我在 MSDN 上找不到太多关于它的信息。

假设我有一个正在执行事务的服务，当我收到停止请求时，我想确保在实际进程终止之前我已经完成了当前事务。

我知道 Windows 似乎有一个“停止”状态，但我不确定如何从 ServiceBase.OnStop 方法控制它。

一旦我注册了停止请求，我是否应该从 OnStop 返回？如果是这样，我如何指示我何时真正完成？

或者我应该阻止并且在当前事务完成之前不从 OnStop 返回？（即在调用 OnStop 和 OnStop 返回之间，windows 会自动将服务置于“停止”状态）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:21:35.573

如果你有某种线程在做事务，你应该在 OnStop 中等待它完成（或被取消，你的决定）。如果 OnStop 返回，服务应该停止，而不仅仅是标记为停止或类似的东西。

# c# - 安装 .NET Framework 4.5 后 HttpContext.Current.User 为空

> ID：15336079
> 
> 赞同：3
> 
> 时间：2013-03-11T10:19:49.820
> 
> 标签：c#, wcf, cookies, forms-authentication, asp.net-4.5

我使用的是 .NET 4.0 VS10。我有使用表单身份验证的工作 WCF 服务。我升级到 VS11，.NET 4.5。

现在我的 HttpContext.Current.User 在 wcf 请求中为空。我从登录到这个请求注入了一个 cookie。

```
HttpRequestMessageProperty httpRequest;
...
httpRequest.Headers.Add(HttpRequestHeader.Cookie, cookie); 
```

任何想法如何使它再次工作？

已经有了

```
<serviceHostingEnvironment aspNetCompatibilityEnabled="true" /> 
```

和

```
[AspNetCompatibilityRequirements(RequirementsMode = spNetCompatibilityRequirementsMode.Required)] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-27T17:36:17.477

如果您在 Oneway（标有**[OperationContract(IsOneWay=true)]**的操作）WCF 操作合同中遇到此问题，这里是问题的原因。HttpContext 是一个 asp.net 构造。在成功调用单向操作后，服务模型将 202（已接受）回复发送回客户端。

*   在 4.5 中，asp.net 清除了 HttpContext，因为响应已经被发送回客户端，这是设计使然。
*   在 4.0 中，这种不受支持的场景有效，这只是一个令人高兴的巧合。

由于我们发现了一些关于此的客户报告，因此在 .net 4.5.1 更新中进行了一个奇怪的修复。要提供有关修复的更多详细信息：

1.  如果您的项目仍然针对 4.0 并且您正在 4.5.1 机器上运行您的应用程序，那么您的问题将得到修复（内部检查目标框架版本）。
2.  如果您的项目重新定位到 4.5，则 Httpcontext.Current.User 将由于我上面提到的原因再次变为 null。尝试使用 OperationContext.Current.ServiceSecurityContext.WindowsIdentity 来获取用户身份，而不是 HttpContext.Current.User 属性。此属性与主机无关，并在您的客户端通过身份验证时填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:28:52.303

[这里](https://stackoverflow.com/questions/2072142/httpcontext-current-user-is-always-null#2072187)有一个类似问题的解决方案：

添加

```
<serviceHostingEnvironment aspNetCompatibilityEnabled="true" /> 
```

到你的配置文件。

# c# - 显示串口数据实时图表

> ID：15336080
> 
> 赞同：2
> 
> 时间：2013-03-11T10:19:49.870
> 
> 标签：c#, serial-port, zedgraph

我想显示来自串行端口的数据图。这些数据之间继续有 \r。对于绘图，我使用的是 ZedGraph.dll。我的代码如下

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using ZedGraph;
using System.IO.Ports;
namespace FilterRealTimeCSharp
{
    public partial class Form1 : Form
    {
        List<double> measures;
        /// The ZedGraph curve
        LineItem myCurve;
        BackgroundWorker worker;
      //  ZedGraphControl zedGraphControl1;
        GraphPane myPane;
        public Form1()
        {
            InitializeComponent();
            //create an empty list
            measures = new List<double>();

            myPane = zedGraphControl2.GraphPane;
            //init your zegGraphControl here
            //create an empty curve: it will be filled later
            myCurve = myPane.AddCurve("Porsche", null, Color.Red, SymbolType.Diamond);
            //create the worker
            worker = new BackgroundWorker();
            // set this to true so that you can cancel the worker
            worker.WorkerSupportsCancellation = true;
            worker.DoWork += worker_DoWork;
            worker.RunWorkerCompleted += worker_RunWorkerCompleted;
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }
        private void worker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            //the worker has completed
            //do whatever you want here

        }
        private void worker_DoWork(object sender, DoWorkEventArgs e)
        {
            //put all your serial port code here
            SerialPort sprt = new SerialPort("COM1");
            sprt.BaudRate = 9600;
            sprt.Parity = Parity.None;
            sprt.StopBits = StopBits.One;
            sprt.DataBits = 8;
            sprt.Handshake = Handshake.None;
            try
            {
                sprt.Open();
            }
            catch (Exception)
            {
                MessageBox.Show("Check port");
                return;
            }
            //worker.CancellationPending will change to true when CancelAsync is called
            //(so when the user clicks button2).
            //while the worker should still continue, read incoming data
            while (!worker.CancellationPending)
            {
                //wait for data to come...
                System.Threading.Thread.Sleep(100);
                string indata = sprt.ReadExisting();
                //extract the values from the read data
                //be careful here: make sure the read data is complete...
                string[] splt = indata.Split('\r');
               // string chop = splt[2];
               //// string final = chop.Remove(5);
               // float d = Convert.ToSingle(chop);
                //update the measures
                //measures is shared by several threads: you must lock it to access it safely

                lock (measures)
                {
                    for (int i = 1; i < splt.Length-2; i++)
                    {
                        string chop = splt[i];
                        // string final = chop.Remove(5);
                        float d = Convert.ToSingle(chop);
                        measures.Add(d);
                    }
                }
                //update the graph
                BeginInvoke((Action)(() => UpdateGraph()));
            }
            //user wants to stop the worker
            sprt.Close();
        }
        /// This function is called when the graph should be updated
        private void UpdateGraph()
        {
            //messures is shared by several threads: you must lock it to access it safely
            lock (measures)
            {
                //add each measure into the curve
                for (int i = 0; i < measures.Count; i++)
                {
                    //fill each with what ever you want
                    double x = myCurve.Points.Count;
                    double y = measures[i];
                    //add a new point to the curve
                    myCurve.AddPoint(x, y);
                }
                //all measures have been added
                //we can empty the list
                measures.Clear();
            }
            //the curve has been updated so refresh the graph
            zedGraphControl2.AxisChange();
            zedGraphControl2.Invalidate();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            worker.RunWorkerAsync();
        }

        private void button2_Click(object sender, EventArgs e)
        {
            worker.CancelAsync();
        }
    }
} 
```

但它没有显示连续图。我不知道我的代码中的问题在哪里。请帮我解决这个问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:18:33.870

你为什么不试试[RollingPointPairList](http://zedgraph.sourceforge.net/documentation/html/T_ZedGraph_RollingPointPairList.htm)而不是 list...？

有一个使用 ZedGraph 的[实时绘图](http://goorman.free.fr/ZedGraph/zedgraph.org/wiki/index3061.html?title=Display_Dynamic_or_Real-Time_Data)示例，祝你好运..:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T00:31:36.350

可能是您每次绘制曲线时都在清除度量列表。每次，ZedGraph 都会绘制一个点并擦除曲线的其余部分。也许？

# xpages - 如何使用自定义转换器将数字结果格式化为字符串

> ID：15336081
> 
> 赞同：1
> 
> 时间：2013-03-11T10:19:50.850
> 
> 标签：xpages

在我的表单中，我有四个需要计算的字段，结果显示在最后一个名为 PaymentAmount 的字段中。建议我为 PaymentAmount 使用自定义转换器，因为我只需要在 PaymentAmount 上进行部分刷新，以便在其他四个字段上的 onchange 事件。

这很好用，但我的问题是结果格式错误。

我的代码如下所示：

**获取对象（）**

```
try {
    var transCode = getComponent("TransactionCode").getValue();
    var nominal = getComponent("Nominal").getValue();
    var price = getComponent("Price").getValue();
    var qFactor =  getComponent("QuoteFactor").getValue()||1;
    var fee1= getComponent("Fee1").getValue()||0;
    var fee2= getComponent("Fee2").getValue()||0;
    var fee3= getComponent("Fee3").getValue()||0;
    var feeTotal = fee1+fee2+fee3;

    var paymentAmount = nominal * (price * qFactor);
    if(transCode == "Buy") {
        paymentAmount+=feeTotal;
    } else if(transCode == "Sell") {
        paymentAmount -= feeTotal;
    } else return 0;

    return paymentAmount;
} catch(e){
    dBar.error(e);
} 
```

**getAsString()**

```
return value.toString(); 
```

我尝试使用 java 中所有可用的方法和对象来格式化结果，例如： String.format("%.2f", value); 但失败了。

如果我根据我的语言环境输入我的值 10000*1,44+1,2 = 14401,2 但在 PaymentAmount 中显示的结果是 14401.2。我希望它根据我的语言环境 14001,2 显示。

例如，如果我在 getAsString() 中使用以下内容，则会收到此错误：

```
try {
    var val = java.lang.String.format("%.2f",value);

} catch(e) { dBar.error(e); }

com.ibm.jscript.InterpretException: Script interpreter error, line=2, col=28: Java method 'format(string, number)' on java class 'java.lang.String' not found 
```

我无法为 getAsString() 中的值获取正确的数据类型。

对于已经看到/评论过我之前的问题的您，我再次被这些“本地化问题”所困扰......

请指教

/米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:11:10.150

您可以使用此 Java 代码在您的语言环境中获取号码：

```
import java.text.NumberFormat;
import java.util.Locale;
...
...
Locale swedishLocale = new Locale("sv", "SE"); // Locale for Sweden
NumberFormat nf = NumberFormat.getInstance(swedishLocale);
return nf.format(14401.2); 
```

这将返回`14 401,2`。不要*尝试*将其转换为 SSJS，否则会出现`Ambiguity when calling format(long) and format(double)`. [我以前被这个咬过](https://stackoverflow.com/questions/15087998/formatting-number-via-java-text-decimalformat-always-returns-error-in-ssjs)。

**更新**

您可以使用静态方法创建一个类，该方法在您的语言环境中格式化日期。

```
package pkg;
import java.text.NumberFormat;
import java.util.Locale;
public class Utilities {
    public static String formatString() {
        Locale swedishLocale = new Locale("sv", "SE");
        NumberFormat nf = NumberFormat.getInstance(swedishLocale);
        return nf.format(14401.2);
    }
} 
```

然后您可以通过以下方式在 SSJS 中调用此方法：

```
var formattedNumber = pkg.Utilities.formatString(); 
```

您可以根据需要为方法添加参数。

# inno-setup - 在 Inno Setup 安装期间重命名/替换快捷方式

> ID：15336082
> 
> 赞同：5
> 
> 时间：2013-03-11T10:19:53.130
> 
> 标签：inno-setup

[InstallDelete] 部分可以删除文件，但不能删除图标（唯一支持的类型是文件，我希望它也支持图标）。

我需要更改与正在安装的程序相关联的快捷方式。我可以通过将适当的参数添加到 [Icons] 部分来添加新的快捷方式（例如“维护”），但还没有找到删除旧快捷方式的方法（例如“修复”）。

有没有人知道如何在不深入研究注册表的情况下实现这一点 - 我熟悉（但肯定不是专家）使用 Pascal 脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:43:04.427

“图标”又名快捷方式只是放置在某处的 .lnk 文件 - 例如在您的桌面上 - 指向其他文件 - 例如`Program.exe` - 在`{app}`目录中。

如果您在`[Icons]`部分中创建这样的“图标”，它将在卸载过程中自动删除（除非`uninsneveruninstall`设置了标志）。

如果您有一些想要删除的“图标”，那么只需从目标文件夹（例如桌面）中删除 .lnk 文件。您可以在以下部分中`[InstallDelete]`或`[UninstallDelete]`以编程方式执行此操作`[Code]`：

```
[InstallDelete]
Type: files; Name: "{commondesktop}\My Program.lnk" 
```

其中`"{commondesktop}\My Program.lnk"`是要删除的图标的路径\名称（实际上是 .lnk 文件的名称）。

# mesh - 莫比乌斯带有接缝！Java3D

> ID：15336086
> 
> 赞同：3
> 
> 时间：2013-03-11T10:20:08.047
> 
> 标签：mesh, java-3d, normals

我正在Java3D 中创建一个莫比乌斯带。我有一条缝，我似乎无法摆脱它！我假设它与法线有关，并且连接边缘之间的角度差异在技术上是 180 度。有人可以帮我去除这个接缝吗？

这是我的代码：

```
 public class MobiusStrip extends Applet {
        public static void main(String[] args){
            new MainFrame(new MobiusStrip(), 800, 600);      
        }

        @Override
        public void init(){
            GraphicsConfiguration gc = SimpleUniverse.getPreferredConfiguration();
            Canvas3D canvas = new Canvas3D(gc);
            this.setLayout(new BorderLayout());
            this.add(canvas, BorderLayout.CENTER);
            SimpleUniverse su = new SimpleUniverse(canvas);
            su.getViewingPlatform().setNominalViewingTransform();
            BranchGroup bg = createSceneGraph();
            bg.compile();
            su.addBranchGraph(bg);
        }

        private BranchGroup createSceneGraph(){
            BranchGroup root = new BranchGroup();       
            Shape3D shape = new Shape3D();
            shape.setGeometry(mobius().getIndexedGeometryArray());
            //Scaling transform
            Transform3D tr = new Transform3D();
            tr.setScale(0.5);

            //Spin transform group
            TransformGroup spin = new TransformGroup();
            spin.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
            root.addChild(spin);

            //Set appearance
            Appearance ap = new Appearance();
            PointAttributes pa = new PointAttributes(10, true);
            ap.setPointAttributes(pa);
            ap.setPolygonAttributes(new PolygonAttributes
                    (PolygonAttributes.POLYGON_FILL, 
                    PolygonAttributes.CULL_NONE, 0));

            //Set materials
            Material mat = new Material();
            mat.setLightingEnable(true);
            mat.setShininess(30);
            ap.setMaterial(mat);

            //Overarching Transform group
            TransformGroup tg = new TransformGroup(tr);
            tg.addChild(shape);
            spin.addChild(tg);
            shape.setAppearance(ap);                

            //Set rotation
            Alpha alpha = new Alpha(-1, 6000);
            RotationInterpolator rotate = new RotationInterpolator(alpha, spin);
            BoundingSphere bounds = new BoundingSphere();
            rotate.setSchedulingBounds(bounds);
            spin.addChild(rotate);

            //Set background
            Background background = new Background(1.0f, 1.0f, 1.0f);
            background.setApplicationBounds(bounds);
            root.addChild(background);

            //Set lighting
            AmbientLight light = new AmbientLight(true, new Color3f(Color.BLACK));
            light.setInfluencingBounds(bounds);
            root.addChild(light);

            PointLight ptlight = new PointLight(new Color3f(Color.white),
            new Point3f(0.5f,0.5f,1f),
            new Point3f(1f,0.2f,0f));
            ptlight.setInfluencingBounds(bounds);
            root.addChild(ptlight);

            return root;
        }//Close branchgroup method

        //Create the Mobius shape
        private GeometryInfo mobius()
          {
            int m = 100; //number of row points
            int n = 100; //number of col points
            int p = 4*((m-1)*(n-1)); //faces * points per face

            IndexedQuadArray iqa = new IndexedQuadArray(m*n, 
                          GeometryArray.COORDINATES, p);
            Point3d[] vertices = new Point3d[m*n];
            int index = 0;

            //Create vertices
            for(int i = 0; i < m; i++)
            {
                for(int j = 0; j < n; j++)
                 {
                    double u = i * (2*(Math.PI))/(m - 1);
                    double v = -0.3 + (j * (0.6/(n-1)));
                    double x=(1+v*Math.cos(u/2))*Math.cos(u);
                    double y=(1+v*Math.cos(u/2))*Math.sin(u);
                    double z=v*Math.sin(u/2);
                    vertices[index]=new Point3d(x,y,z);
                    index++;
                }//close nested for loop
             }//close for loop

            iqa.setCoordinates(0, vertices);
            index = 0;

            //set index for coordinates
            for(int i = 0; i < m-1; i++){
                for(int j = 0; j < n-1; j++){
                    iqa.setCoordinateIndex(index, i*m+j);
                    index++;
                    iqa.setCoordinateIndex(index, i*m+j+1);
                    index++;
                    iqa.setCoordinateIndex(index, (i+1)*m+j+1);
                    index++;
                    iqa.setCoordinateIndex(index, (i+1)*m+j);
                    index++;
                }//close nested for loop
            }//close for loop

            //create geometry info and generate normals for shape
            GeometryInfo gi = new GeometryInfo(iqa);
            NormalGenerator ng = new NormalGenerator();
            ng.generateNormals(gi);
            return gi;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:03:07.007

有关更多解释，请参阅[此问题](https://stackoverflow.com/questions/13042763/drawing-a-mobius-strip-in-opengl)。您需要进行两项更改：

```
ap.setPolygonAttributes(new PolygonAttributes(PolygonAttributes.POLYGON_FILL, PolygonAttributes.CULL_BACK, 0));

double u = i * (4 * (Math.PI)) / (m - 1); 
```

# c# - 以编程方式创建 UML 类图

> ID：15336087
> 
> 赞同：2
> 
> 时间：2013-03-11T10:20:08.697
> 
> 标签：c#, xml, uml, class-diagram

我希望能够以编程方式创建 UML 类图，并且我看到 VS Ultimate Edition 具有内部 XML 的 UML 类图支持。我的问题是我可以以交互方式执行此运行时吗？这意味着我正在运行我的 .exe，并以编程方式构建 XML，并在我放置在 Form 上的图表组件中显示结果图表？我可以编写代码来处理类形状的拖动和调整大小、创建关联以及与编辑类图相关的其他操作吗？或者我会在 XML 结构上进行操作，并在每次编辑后保持重新加载结果图？

非常重要的是我如何显示结果类图....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T16:58:21.533

两步：

第 1 步：使用 DOT（图形描述语言）创建类关系的图形表示。

DOT 是一种纯文本图形描述语言。这是一种描述人类和计算机程序都可以使用的图形的简单方法。

第 2 步：使用 DOT 阅读器库渲染为图片。

有很多库可用于渲染 DOT 文件。

# javascript - 单位电量计算

> ID：15336089
> 
> 赞同：-7
> 
> 时间：2013-03-11T10:20:13.627
> 
> 标签：javascript, jquery

我正在尝试构建一个电气单位计算器。我已经开发了一个，但我对我的代码不满意。我在这里问你们有没有其他方法来开发这个计算器。

以下是我的代码：

**HTML**

```
<input name="" type="text" value="" onblur="check()" id="bill" /> 
```

**脚本**

```
<script>
    function check()
    {
    var a=0,b=0,c=0;
    var tot = 0;
    var tot1=0;
    var tot2=0;
    var tot3=0;

    var a = document.getElementById('bill').value;

    if(a>200)
    {
        b = a - 200;
        alert('b is: '+b);
        if(b>200)
        {
        c= b-200;
        alert('c is: '+c);
        tot1 = 200*4;
        tot2 = 200*5;
        tot3 = c*6;
        tot = tot1 + tot2 + tot3;
        alert(tot);
        }
        else
        {

        tot1 = 200*4;
        tot2 = b*5;
        tot3 = c*6;
        tot = tot1 + tot2 + tot3;
        alert(tot);

        }
    }
    else
    {
        tot = a*4;
        alert(tot);

    }
    }

</script> 
```

请朋友帮帮我..:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:57:04.273

您的代码需要分开 - 注释也有助于帮助其他人理解您的代码的用途。这是一个工作示例：

```
function check() 
{   var initialRate = 4; // electricity charged at this rate below 200
    var standardRate = 5; // amount of electricity between 200 and 400 charged at this rate
    var overageRate = 6; // the part of electricity usage over 400 at this rate
    var electricityUsage = +document.getElementById('bill').value; // convert String to Number

    if (isFinite(electricityUsage) || electricityUsage < 0) {
        alert('The number entered was invalid, or was less than 0.');
        return;
    }

    // calculates the total
    alert(
        electricityUsage > 400
        ? initialRate * 200 + standardRate * 200 + overageRate * (electricityUsage - 400)
        : electricityUsage > 200
            ? initialRate * 200 + standardRate * (electricityUsage - 200)
            : initialRate * electricityUsage
    );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T10:39:18.167

```
<script>
     function check()
    {
    var a=0,b=0,c=0;
    var tot = 0;
    var tot1=0;
    var tot2=0;
    var tot3=0;

    var a = parseFloat(document.getElementById('bill').value);

    if(a>200)
    {
        tot1 = 200*4;
        b = a - 200;
        alert('b is: '+b);
        if(b>200)
        {
        c= b-200;
        alert('c is: '+c);
        tot2 = 200*5;
        tot3 = c*6;
        tot = tot1 + tot2 + tot3;
        alert(tot);
        }
        else
        {

        tot1 = 200*4;
        tot2 = b*5;
        tot3 = c*6;
        tot = tot1 + tot2 + tot3;
        alert(tot);

        }
    }
    else
    {
        tot = a*4;
        alert(tot);

    }
    }
</script>
<input name="" type="text" value="" onblur="check()" id="bill" /> 
```

我认为这会做:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T11:32:50.270

我想我终于有了。有三个电荷带，您需要知道每个带中值的哪一部分。然后，您需要对每个波段中的金额应用适当的乘数。

如果我是对的，那么代码非常简单：

```
function check() {
    var a = Number(document.getElementById('bill').value);
    var n = 200;
    var tot1 = Math.min(n, a);
    a = a - n;
    var tot2 = Math.max(0, Math.min(n, a));
    a = a - n;
    var tot3 = Math.max(0, a);
    return tot1 * 4 + tot2 * 5 + tot3 * 6;
} 
```

如果有更多的波段，那么我们会在一个循环中进行计算，但对于三个波段来说这已经足够了。

注意：该函数返回计算的总数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T10:41:36.323

尝试这个：

```
function check()
{
    // Algorithm
    // Slabs : 200 | 400 | ...
    // Amoun :  4  |  5  |  6

    slabs = [200, 400]
    rate = [4, 5, 6]

    var total = document.getElementById('bill').value;

    // Over the head
    if (total > slabs[1]) {
        amount = slabs[0] * rate[0] + (slabs[1] - slabs[0]) * rate[1] + (total - slabs[1]) * rate[2];
    } else if (total > slabs[0]) {
        amount = slabs[0] * rate[0] + (total - slabs[0]) * rate[1];
    } else {
        amount = total * rate[0];
    }

    alert("Total charge: " + amount);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T11:26:23.230

看到这个：**[样本](http://jsfiddle.net/vTsUC/)**

```
function check()
{
    var tot = 0,tot1=0,tot2=0,tot3=0;
    var a = document.getElementById('bill').value;
    tot1 = (a<=200) ? (a * 4) : 800;
    tot2 = (a<=400) ? ((a-200) * 5): 1000;
    tot3 = (a-400) > 0 ? ((a-400) * 6): 0;
    tot = tot1 + tot2 + tot3;
    var msg = "Total Charge: "+tot+"\n Details\n < 200        : "+tot1;
        msg += (tot2 != 0) ? "\n200 to 400 : "+tot2 : "";
        msg += (tot3 != 0) ? "\n>400          : "+ tot3 : "";
    alert(msg);
} 
```

# c# - 打印缩放图像c#

> ID：15336090
> 
> 赞同：4
> 
> 时间：2013-03-11T10:20:15.793
> 
> 标签：c#, .net

我正在尝试使用此代码打印图像。

```
 private void Print()
     {
         PrintDocument printDocument = new PrintDocument();
         printDocument.PrintPage += PrintDocument_PrintPage;

         PrintPreviewDialog printDialog = new PrintPreviewDialog();
         printDialog.Document = printDocument;

         DialogResult result = printDialog.ShowDialog();
         if (result == DialogResult.OK) printDocument.Print();

         printDocument.PrintPage -= PrintDocument_PrintPage;
     }

     private void PrintDocument_PrintPage(object sender, PrintPageEventArgs e)
     {
      //e.Graphics.DrawImage(img, e.PageBounds.X, e.PageBounds.Y);
        e.Graphics.DrawImage(img, e.PageBounds.X, e.PageBounds.Y, 
             e.PageBounds.Width, e.PageBounds.Height);
     } 
```

当图像很小时，它打印得很好，但是当它的高分辨率（我有图像 992*1403）时，它以错误的尺寸绘制。当我查看`PreviewDialog`或将其绘制到*pdf 文件*时，它打印得很好，但是当我在打印机上打印时，它打印的尺寸错误。

用这段代码解决了我的问题：

e.Graphics.DrawImage(img, 0, 0, e.PageSettings.PrintableArea.Width, e.PageSettings.PrintableArea.Height);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:41:57.060

只是一个猜测，但应用程序如何在`PageBounds`不知道您正在打印什么类型的纸张的情况下知道呢？

您是否尝试过使用以下方式将纸张尺寸设置为特定尺寸：

```
printDocument .DefaultPageSettings.PaperSize = 
                new PaperSize("Custom", someWidth, someHeight); 
```

# asp.net - 如何以编程方式在 ASP.NET 中创建 HTML 注释

> ID：15336091
> 
> 赞同：3
> 
> 时间：2013-03-11T10:20:18.120
> 
> 标签：asp.net, html

考虑这个片段：

```
<!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]—&gt; 
```

我有权访问该`Page`对象。所以我可以做这样的事情：

```
Page.Header.Controls.Add(new HtmlGenericControl()) 
```

如何将上述代码段插入 ASP.NET 页面的页眉或正文？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T10:52:42.333

这看起来很老套，可能有更好的解决方案，但这似乎有效：

```
protected void Page_Load(object sender, EventArgs e)
{
    Literal comment = new Literal();
    comment.Text = @"<!--[if lt IE 9]><script src='//html5shiv.googlecode.com/svn/trunk/html5.js'></script><![endif]-->";
    Page.Header.Controls.Add(comment);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-11T10:29:48.003

你可以使用 page.clientscript.add("pageload",'')

# xml - wcf 响应格式转换

> ID：15336092
> 
> 赞同：-1
> 
> 时间：2013-03-11T10:20:19.193
> 
> 标签：xml, string, wcf

我有返回字符串的 wcf 函数。

然后响应 xml 显示为：

```
<string>ok</string> 
```

但我想得到这个回应

```
<myOwnStrName>ok</myOwnStrName> 
```

我将如何在 WCF 中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:25:29.287

您可以通过定义自己的自定义类型来做到这一点，如下所示

[https://stackoverflow.com/a/1974599/1196411](https://stackoverflow.com/a/1974599/1196411)

# iphone - 单击以在 iPhone 中调用应用程序

> ID：15336099
> 
> 赞同：0
> 
> 时间：2013-03-11T10:20:42.630
> 
> 标签：iphone

我想知道一个名为[Call Recorder - IntCall](https://itunes.apple.com/in/app/call-recorder-intcall/id521680097?mt=8)的 iPhone 应用程序。

谁能解释如何在不使用设备数字键盘和蜂窝网络的情况下通过应用程序拨打号码？什么 API 提供此服务？我见过很多第三方点击调用服务，但有没有适用于 iOS 或 Android 移动应用的 API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:29:10.283

您不能在蜂窝网络上拨打电话，只有默认的拨号器应用程序可以这样做。

您链接中的应用程序是 VoIP 应用程序，并使用其自己的 VoIP 客户端来记录对话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T15:20:13.100

我们是这个应用程序的开发者。正如 rckoenes 所说，它是一个 VoIP 应用程序，使用 VoIP 库和我们的 VoIP 服务器来实现录音。

有一些 VoIP 库，有些是免费的，但我们已经购买了一个库（很贵）。

一般来说，VoIP 实施起来并不容易。您需要了解协议，并且需要有一个服务器来支持您的应用程序需要执行的操作。

# android - 在 0x09050941（代码 = 1）处获取错误致命信号 11（SIGSEGV）关于使用画布进行圆形图像

> ID：15336106
> 
> 赞同：1
> 
> 时间：2013-03-11T10:20:58.603
> 
> 标签：android, sqlite, canvas, bitmap, bitmapfactory

我被一个奇怪的问题困住了。在我的应用程序中，用户可以更改他/她的个人资料图片。并且该图像以一轮显示。我正在从相机/文件（图库）中获取图像并在圆角隐藏位图我正在使用以下代码。

```
public static Bitmap getRoundedShape(Context context, Bitmap scaleBitmapImage, int imageWidth, int imageHeight) {
        int targetWidth = getDPEquivalentPixels(context, imageWidth);
        int targetHeight = getDPEquivalentPixels(context, imageHeight);
        Bitmap targetBitmap = Bitmap.createBitmap(targetWidth, targetHeight, Bitmap.Config.ARGB_8888);

        Canvas canvas = new Canvas(targetBitmap);
        Path path = new Path();
        path.addCircle(((float) targetWidth - 1) / 2, ((float) targetHeight - 1) / 2, (Math.min(((float) targetWidth), ((float) targetHeight)) / 2), Path.Direction.CW);
        Paint paint = new Paint();
        paint.setColor(Color.GRAY);
        // paint.setStyle(Paint.Style.STROKE);
        paint.setStyle(Paint.Style.FILL);
        paint.setAntiAlias(true);
        paint.setDither(true);
        paint.setFilterBitmap(true);
        canvas.drawOval(new RectF(0, 0, targetWidth, targetHeight), paint);

        canvas.clipPath(path);
        Bitmap sourceBitmap = scaleBitmapImage;
        canvas.drawBitmap(sourceBitmap, new Rect(0, 0, sourceBitmap.getWidth(), sourceBitmap.getHeight()), new Rect(0, 0, targetWidth, targetHeight), null);
        return targetBitmap;
    } 
```

首先，我将图像上传到服务器进行压缩。然后我将它作为字节数组保存在本地 SQLite 中，并使用上述方法将其转换为圆形位图以显示在`ImageView`.

从现在开始，我将参考`SQLite`个人资料图片。我的问题是第一次圆角代码工作正常，但是当我使用 SQLIte Image 并尝试将其转换为圆形时，我收到以下错误。

```
A/libc(14809): Fatal signal 11 (SIGSEGV) at 0x5f763ee0 (code=1), thread 14809 
```

编辑 ：：

我有保存从 SQLite 检索的用户对象的用户 POJO。我正在将此 Pojo 转换为 json 并存储在 SharedPreferance 中，直到用户会话处于活动状态。

```
public class User {

    private int uid;
    private String userName;
    private String firstName;
    private String lastName;
    private String email;
    private Date dob;
    private String gender;
    private int delFlag;
    private int pin;
    private Bitmap imageData;

} 
```

我正在使用 Gson 进行 JSON 到 POJO 和反之亦然的解析。但我不知道 Gson 库是否会`imageData`正确解析我的（数据类型位图）。它可能会产生问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:13:40.090

我想你会想要检查[这个家伙的解决方案](https://stackoverflow.com/questions/5871482/serializing-and-de-serializing-android-graphics-bitmap-in-java)，因为 Bitmap 似乎是不可序列化的。我对 JSON/Gson 的机制知之甚少，无法知道这绝对是问题所在。*如果我站在你的*立场上，我会首先更改代码，以便它从 PNG 文件而不是 JSON 文件中读取位图，并确认这是问题所在。然后看一个更好的方法来序列化/存储位图，如上面的链接。

# c - 运行时检查失败 #2

> ID：15336111
> 
> 赞同：0
> 
> 时间：2013-03-11T10:21:10.340
> 
> 标签：c

我正在练习我的 C Prog 语言，我决定创建一个具有收银员功能的沙龙

看起来很乱，虽然我还在学习

发布在这里： http: [//pastebin.com/B2XaaCYV](http://pastebin.com/B2XaaCYV)

它说变量“菜单”的运行时错误，但我试图重新检查它大约 5 倍，我没有看到任何错误。代码非常简单，例如 xy[0][1] = 默认 0 = 表示尚未购买。它的值将仅为 0/1。选择发型后实际购买时为1。

那么当然

```
xy[1][i] means price of xy[0][i] 
```

我尝试使用其他技术，例如删除中断和更改变量名称，但它仍然显示变量菜单的运行时错误

不知道是什么导致了错误。所以我希望有人可以帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:43:08.060

```
scanf("%1s",&menu); 
```

不！A`char`根本不是字符串。您想获得单个字符，因此请使用`getchar()`或`scanf("%c",&menu);`。

一个相关的错误是在您的`core_return`中，您尝试将 3 个字符读入一个字符。另外，不要`main`在子程序中调用你的。而是从子例程返回并在主程序中放置一个循环。顺便说一句，`'yes'`并且`'no'`无效。如果要比较字符串，则必须使用`strcmp`：

```
// returns 1 if the user wants to go again
int another_menu(void)
{
    char tmp[20];
    printf("Do you want another service?");

    for(;;){
        scanf("%3s",tmp);
        if(strcmp("y",tmp) || strcmp("yes",tmp))
            return 0;
        else if(strcmp("n",tmp) || strcmp("no",tmp))
            return 1;
        printf("Please specify either 'no' or 'yes': ");
    }
} 
```

使用编译器警告可以更快地找到错误 (GCC: `-Wall -Wextra`)。

# c# - VS 2012项目加载错误，.Net版本不兼容

> ID：15336112
> 
> 赞同：1
> 
> 时间：2013-03-11T10:21:18.450
> 
> 标签：c#, visual-studio-2012, .net-framework-version

当我尝试在 VS 2012 中加载项目时出现错误。这个项目是在同一台机器上创建的，它工作正常，但现在它开始抱怨项目目标框架。

![加载项目时出现VS2012错误](../Images/fd6a555c17c657e28adc8e85a4c5eabd.png)

从错误消息中我不明白 .NETFramework,Version=v4.5 和将目标更改为 .Net Framework 4.5 之间的区别当我选择下载并安装 .NETFramework,Version=v4.5 时，安装程​​序说这个版本是已经是操作系统的一部分，不需要单独安装。我正在 Windows 8 64 位操作系统上开发 VS 2012。

任何指针都会有所帮助，谢谢

# json - GSON 解析 JSON 的问题

> ID：15336114
> 
> 赞同：0
> 
> 时间：2013-03-11T10:21:20.510
> 
> 标签：json, performance, gson

我在 GSON 解析 JSON 时遇到问题

我的 JSONERSPONSE 是

```
 {"services":[{"service":{"name":"asd","id":"1"}},
    {"service":{"name":"asdf","id":"2"}},
    {"service":{"name":"asdfg","id":"3"}}]} 
```

如何解析这个响应？

意味着我在创建上述响应类时遇到问题我已经创建了**服务**类，但我对如何创建***服务***类感到困惑。

```
public class services {

@SerializedName("service")
ArrayList<service> list;

public services(){
    System.out.println("services constructor stuff");
    list= new ArrayList<service>();
}

/**
 * @return the list
 */
public ArrayList<service> getList() {
    return list;
}

/**
 * @param list the list to set
 */
public void setList(ArrayList<service> list) {
    this.list = list;
} 
```

}

```
but getting 0 in getList(); 
```

注意：我无法更改响应，所以不建议这样做

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:34:48.150

服务.java

```
public class Services {

    private List<Service> services;

    public List<Service> getServiceList() {
        return services;
    }

    public void setServiceList(List<Service> services) {
        this.services = services;
    }
} 
```

服务.java

```
public class Service {

    private int id;
    private String name;

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
} 
```

你的 json 解析逻辑在这里：

```
Gson gson = new Gson();
String s = "{\"services\":[{\"service\":{\"name\":\"asd\",\"id\":\"1\"}},{\"service\":{\"name\":\"asdf\",\"id\":\"2\"}},{\"service\":{\"name\":\"asdfg\",\"id\":\"3\"}}]}";
Services services = gson.fromJson(s, Services.class); 
```

基本上，json字符串并不是一个简单的json数组格式，它实际上是一个json对象里面的一个json数组。所以这意味着您需要两个类，一个代表 json 数组中的每个项目 - Service.java，另一个作为包含项目列表的包装器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T00:00:22.260

好的，我们需要创建一个中间层类来使它正确。 **服务.java**

```
public class Services {
    private ArrayList<ServiceWrapper> services = new ArrayList<ServiceWrapper>();
    public ArrayList<ServiceWrapper> getServices() {
        return services;
    }
    public void setServices(ArrayList<ServiceWrapper> services) {
        this.services = services;
    }
} 
```

**服务包装器.java**

```
public class ServiceWrapper {
    private Service service;
    public Service getService() {
        return service;
    }
    public void setService(Service service) {
        this.service = service;
    }
} 
```

**服务.java**

```
public class Service {
    private int id;
    private String name;
    public int getId() {
        return id;
    }
    public void setId(int id) {
        this.id = id;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
} 
```

以下是测试代码

```
Gson gson = new Gson();
String s = "{\"services\":[{\"service\":{\"name\":\"asd\",\"id\":\"1\"}},{\"service\":{\"name\":\"asdf\",\"id\":\"2\"}},{\"service\":{\"name\":\"asdfg\",\"id\":\"3\"}}]}";
Services services = gson.fromJson(s, Services.class);
for(ServiceWrapper serviceWrapper : services.getServices()){
    System.out.println(serviceWrapper.getService().getId());
    System.out.println(serviceWrapper.getService().getName());
} 
```

# c# - 通过从组合框中选择任何表来填充 datagridview

> ID：15336117
> 
> 赞同：0
> 
> 时间：2013-03-11T10:21:27.837
> 
> 标签：c#, sql-server

我使用以下代码在组合框中显示我的 SQL 数据库表的名称。现在，当我从组合框中单击任何这些表名时，我想要我的 DataGridView 填充该表的内容。

我的数据库中有三个表。

```
private void Form1_Load(object sender, EventArgs e)
    {
        String strConnection = "Data Source=HP\\SQLEXPRESS;database=MK;Integrated Security=true";

        SqlConnection con = new SqlConnection(strConnection);
        try
        {

            con.Open();

            SqlCommand sqlCmd = new SqlCommand();

            sqlCmd.Connection = con;
            sqlCmd.CommandType = CommandType.Text;
            sqlCmd.CommandText = "Select table_name from information_schema.tables";

            SqlDataAdapter sqlDataAdap = new SqlDataAdapter(sqlCmd);

            DataTable dtRecord = new DataTable();
            sqlDataAdap.Fill(dtRecord);
            comboBox1.DataSource = dtRecord;
            comboBox1.DisplayMember = "TABLE_NAME";
            con.Close();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }
    private void PopulateGridView(string tablename)
    {
        String strConnection = "Data Source=HP\\SQLEXPRESS;database=MK;Integrated Security=true";

        SqlConnection con = new SqlConnection(strConnection);
        try
        {

            con.Open();

            SqlCommand sqlCmd = new SqlCommand();

            sqlCmd.Connection = con;
            sqlCmd.CommandType = CommandType.Text;
            sqlCmd.CommandText = "Select * from " + tablename;

            SqlDataAdapter sqlDataAdap = new SqlDataAdapter(sqlCmd);

            DataTable dtRecord = new DataTable();
            sqlDataAdap.Fill(dtRecord);
            dataGridView1.DataSource = dtRecord;

            con.Close();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }

    private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (comboBox1.SelectedValue != null)
        {
            PopulateGridView(comboBox1.SelectedValue.ToString());
        }

    }
} 
```

}

这是我的表 (datejoin)

```
rahul   sharma  12-1-2011
suresh  chand   23-4-2012
prachi  shukla  13-2-2011
siddharth   malhotra    25-9-2012
saina   chopra  12-8-2011
amit    mehta   20-3-2012 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:25:48.990

订阅组合框的`SelectedIndexChanged`事件并从组合框中检索选定的表名。从那里，运行查询以从表中检索记录并将结果绑定到 datagridview。

样本：

```
private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    String strConnection = "Data Source=HP\\SQLEXPRESS;database=MK;Integrated Security=true";

    SqlConnection con = new SqlConnection(strConnection);
    con.Open();

    string tableName = comboBox1.SelectedText;

    SqlCommand sqlCmd = new SqlCommand();
    sqlCmd.Connection = con;
    sqlCmd.CommandType = CommandType.Text;
    sqlCmd.CommandText = "Select * from " + tableName;

    SqlDataAdapter sqlDataAdap = new SqlDataAdapter(sqlCmd);

    DataTable dtRecord = new DataTable();
    sqlDataAdap.Fill(dtRecord);
    dgv.DataSource = dtRecord;
    con.Close();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:32:06.297

您将在组合框 SelectedIndexChange 上有一个事件并将表的名称传递给您的函数

```
private void ComboBox1_SelectedIndexChanged(object sender, System.EventArgs e)
{
   RebindGridView(ComboBox1.SelectedValue);
} 
```

然后在你的函数中：

```
private void RebindGridView(string tablename)
{
  String strConnection = "Data Source=HP\\SQLEXPRESS;database=MK;Integrated Security=true";

            SqlConnection con = new SqlConnection(strConnection);
            try
            {

                con.Open();

                SqlCommand sqlCmd = new SqlCommand();

                sqlCmd.Connection = con;
                sqlCmd.CommandType = CommandType.Text;
                sqlCmd.CommandText = "Select * from " + tablename;

                SqlDataAdapter sqlDataAdap = new SqlDataAdapter(sqlCmd);

                DataTable dtRecord = new DataTable();
                sqlDataAdap.Fill(dtRecord);
                gridview1.DataSource = dtRecords;
                 gridview1.DataBind();
                con.Close();
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
} 
```

# r - 矩阵求逆

> ID：15336123
> 
> 赞同：2
> 
> 时间：2013-03-11T10:21:37.623
> 
> 标签：r, matrix, matrix-inverse

我想反转一个正方形对称正定矩阵。我知道在 R 中有两个函数`solve()`，`chol2inv()`但它们的结果是不同的。我需要知道为什么会这样？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T10:30:38.080

以下是计算矩阵逆的几种方法，包括`solve()`和`chol2inv()`：

```
> A <- matrix(c(2, -1, 0, -1, 2, -1, 0, -1, 2), 3)

> solve(A)
     [,1] [,2] [,3]
[1,] 0.75  0.5 0.25
[2,] 0.50  1.0 0.50
[3,] 0.25  0.5 0.75

> chol2inv(chol(A))
     [,1] [,2] [,3]
[1,] 0.75  0.5 0.25
[2,] 0.50  1.0 0.50
[3,] 0.25  0.5 0.75

> library(MASS)
> ginv(A)
     [,1] [,2] [,3]
[1,] 0.75  0.5 0.25
[2,] 0.50  1.0 0.50
[3,] 0.25  0.5 0.75 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-11T10:27:41.390

因为`solve`你需要给你的原始矩阵，但`chol2inv`你使用预先计算的cholesky分解：

```
set.seed(1)
a<-crossprod(matrix(rnorm(9),3,3))
a_chol<-chol(a)
solve(a)
            [,1]        [,2]       [,3]
[1,]  1.34638151 -0.02957435  0.8010735
[2,] -0.02957435  0.32780020 -0.1786295
[3,]  0.80107345 -0.17862950  1.4533671
chol2inv(a_chol)
            [,1]        [,2]       [,3]
[1,]  1.34638151 -0.02957435  0.8010735
[2,] -0.02957435  0.32780020 -0.1786295
[3,]  0.80107345 -0.17862950  1.4533671 
```

# mysql - 在 Mysql (WAMP) 中传输完整数据库

> ID：15336132
> 
> 赞同：1
> 
> 时间：2013-03-11T10:21:55.487
> 
> 标签：mysql, database, wamp, data-transfer

我正在从事一个涉及 WAMP 的项目。WAMP 中 Mysql 服务器上所有数据库的完整大小约为 150 mb。如何在计算机之间传输？文件大小似乎有限制。更改 PHP MyAdmin 似乎没有帮助。

另外，我通常通过创建一个同名的数据库然后选择要导入的数据库文件来单独导入数据库。但是，我现在已经共同导出了所有数据库，它给了我一个名为 localhost.sql 的文件（其中包含 8 个数据库）

如何在另一台计算机的 Mysql 服务器中导入它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:29:22.273

不要使用 PHPMyAdmin。而是使用[`mysqldump`](http://dev.mysql.com/doc/refman/5.6/en/mysqldump.html)实用程序创建转储文件：

```
mysqldump --user=root --all-databases > dump.sql 
```

这将在您的服务器上创建一个`dump.sql`包含所有数据库的数据库。有关如何选择单个数据库/表的信息，请参阅[文档](http://dev.mysql.com/doc/refman/5.6/en/mysqldump.html)

然后在另一台计算机上将转储加载到 mysql

```
mysql --user=root < dump.sql 
```

# c - stdint 的 int8_t 可以存在于没有 8 位字节的架构上吗？

> ID：15336136
> 
> 赞同：2
> 
> 时间：2013-03-11T10:22:01.173
> 
> 标签：c, architecture, types

[显然有些架构没有 8 位字节。](https://stackoverflow.com/questions/5516044/system-where-1-byte-8-bit)

似乎这样的体系结构会排除`int8_t`（定义在`stdint.h`）类型的存在，因为根据我的理解，C 不能创建小于 a 的数据类型`CHAR_BIT`。

也就是说，[IEEE stdint.h def](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/stdint.h.html)似乎要求存在这种类型（以及其他类型），只允许 64 位在不支持它的架构上不存在。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T10:26:40.257

编辑：正如@JasonD 在下面的评论中指出的那样，链接页面在最后声明；

> 添加 int8_t 的结果如下：
> 
> *   一个字节正好是 8 位。
>     
>     
> *   {CHAR_BIT} 的值为 8，{SCHAR_MAX} 的值为 127，{SCHAR_MIN} 的值为 -128，{UCHAR_MAX} 的值为 255。

换句话说，链接的 IEEE 页面*不适用于字节长度不是 8 的架构*。这与需要 8 位字符的 POSIX 一致。

-- 编辑前 --

~~[解释在您链接到](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/stdint.h.html) 的页面上的注释中；~~

> ~~整数类型的“宽度”是用于在纯二进制系统中存储其值的位数；**实际类型可能使用比这更多的位**（例如，28 位类型可以存储在 32 位实际存储中）~~

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:29:01.893

仅仅因为架构本身不处理 8 位字节，并不排除精确的 8 位整数类型。可以使用更宽寄存器的移位和掩码来处理算术以“模拟”8 位算术。

# excel - VBA 电子表格列

> ID：15336139
> 
> 赞同：2
> 
> 时间：2013-03-11T10:22:04.610
> 
> 标签：excel, vba, spreadsheet

```
Private Sub txtTotal1_Change()
Dim Final As Integer
If cbOldf_Change() Then
    olf1 = cbOldf.ActiveCell.Offset(0, 1)
    Final = oldf_col * quantity
ElseIf cbHaribo1_Change() Then
    haribo1 = cbHaribo1.ActiveCell.Offset(0, 1) + 1
    Final = haribo_col * quantity
ElseIf cbOldf_Change() = cbHaribo1_Change() Then
    oldf_1 = cbOldf.ActiveCell.Offset(0, 1) + 1
    haribo1 = cbHaribo1.ActiveCell.Offset(0, 1) + 1
    Final = oldf_1 + haribo1 * quantity
End If
If txtQuantity1_Change() Then
    txtTotal.Value = Final
End Sub 
```

我是 vba 的新手。我有两个单独产品的工作表（haribo 和旧的最爱）我有组合框可以从这些工作表中获取产品，还有一个文本框可以输入数量。在产品工作表中，产品名称在 A 列中，价格在 B 列中。我想要实现的是能够从组合框中选择产品名称，在文本框中输入数量并获得总价进行计算，然后显示在“总计”文本框中。

我是新手，所以请看一下我糟糕的代码，我已经诚实地付出了大约 5 个小时的努力，现在我已经束手无策了！我希望得到一些帮助或指出正确的方向。

编辑：这是我的工作簿[https://www.dropbox.com/s/49iym4exbcgmhcq/Main%20Page.xlsm](https://www.dropbox.com/s/49iym4exbcgmhcq/Main%20Page.xlsm) 我正在为大学做这件事，正如您通过查看它可能猜到的那样

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:15:18.213

尝试使用此代码设置总数：

```
Private Sub SetTotal()
    Dim dblTotal As Double
    Dim dblQuantity As Double
    If IsNumeric(Me.txtQuantity1) Then
        dblQuantity = CDbl(Me.txtQuantity1)
    End If
    If cbHaribo1.Value <> "" Then
        dblTotal = dblQuantity * GetPrice(Sheets("HARIBO").Range("A:B"), cbHaribo1.Value)
    End If

    If Me.cbOldf.Value <> "" Then
        dblTotal = dblTotal + dblQuantity * GetPrice(Sheets("OLDFAVORITES").Range("A:B"), cbOldf.Value)
    End If
    Me.txtTotal1 = Format(dblTotal, "0.00")
End Sub

Private Function GetPrice(rng As Range, strProduct As String) As Double
    On Error GoTo ErrorHandler
    GetPrice = WorksheetFunction.VLookup(strProduct, rng, 2, False)
    Exit Function
ErrorHandler:
    GetPrice = 0
End Function 
```

要触发此代码，您需要插入以下事件：

```
Private Sub cbHaribo1_Change()
    SetTotal
End Sub
Private Sub cbOldf_Change()
    SetTotal
End Sub    
Private Sub txtQuantity1_Change()
    SetTotal
End Sub 
```

请注意，表格有点模棱两可 - 目前代码适用于 Haribo 和旧收藏夹的数量。最好是提供第二个数量字段 - 或者插入一个选项框，使 Haribo 或旧收藏夹变灰...

# javascript - 如何限制 html.textbox 中时间格式的值

> ID：15336140
> 
> 赞同：0
> 
> 时间：2013-03-11T10:22:07.543
> 
> 标签：javascript, jquery, html, datetime

我需要使用 jquery 限制 html.textbox 中时间格式 (00:00:00) [hh:mm:ss) 的值。限制值为：特殊 Char 、 az 、 AZ 所有其他值。仅允许的数字。“：”值应该是默认值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-10T10:41:34.467

单击此处[http://keith-wood.name/timeEntry.html](http://keith-wood.name/timeEntry.html)，了解文本框 html 中的 jquery 时间条目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:55:16.633

**小提琴**：http : [//jsfiddle.net/b9Arm/](http://jsfiddle.net/b9Arm/)

**HTML**

```
<input maxlength="8" type="text" id="time" style="border: 1px solid" /> 
```

**JS**

```
$('#time').keypress(function(e) {
    if (!((e.keyCode >= 48 && e.keyCode <= 57) || 
          (e.shiftKey === true && e.keyCode === 58))) {
        e.preventDefault();
    }
}); 
```

注意：除了 48 到 57 之外，还要添加从数字键盘输入的数字的键码。此外，您需要进行一些验证以确保格式确实是 dd:dd:dd。

例如：

```
$('#time').blur(function (e) {
    if(!(/\d\d\:\d\d\:\d\d/.test($('#time').val()))) {
        alert('Achtung Baby!')
    }
}); 
```

# php - 如果未选中一个单选按钮，则显示错误？

> ID：15336141
> 
> 赞同：0
> 
> 时间：2013-03-11T10:22:09.253
> 
> 标签：php, html, mysql

如果我以 mysql_* 格式询问，我很抱歉，因为这是我现在正在使用的。我仍然希望你们能帮助我。

所以我的问题是，一旦提交了其中一行单选按钮未选中的表单，我就会尝试显示错误。但是，根据我的代码，它仅出现在特定行上，而不是顶部的单个消息，因为我认为我已将其包含在 While-Loop 中。各位大神能不能给个方法建议一下？无论是javascript还是函数，我都很好。我只是不知道该怎么做：P。

这是我的代码：

```
while($fetch=mysql_fetch_array($query)){

//DISPLAY ALL ANSWERS
if(isset($_POST['voted'])){
    if(in_array($_POST['score('.$fetch['questionID'].')'], $radioValue)){
        echo "<tr>Question no. ",$fetch['questionID'],": ",
        $_POST['score('.$fetch['questionID'].')'],"<br></tr>";
    }
    else{
        echo "<center><font color=red>All fields are required</font><br><br>
        <input type='button' name='return' value='Return' onclick='history.go(-1)'><br>";
        exit();
    }
}

//DISPLAYS QUESTIONS WITH QUESTION NUMBER
echo "<tr align=left><th><font face='Courier New,arial' size=2px>".$fetch["questionID"].". ".$fetch["question"]."<br>
    <td><font face='Courier New,arial' size=2px>";

//DISPLAYS RADIO BUTTONS FROM 1 to 5    
for($i = 1; $i < 6; $i++){
    echo "<input type=radio name='score(".$fetch["questionID"].")' value=",$i," >"; echo $i;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:28:32.053

我会在while循环中放置一个变量来检查错误。类似于以下内容：

```
$validationFailed = false;
while($fetch=mysql_fetch_array($query)){

//DISPLAY ALL ANSWERS
if(isset($_POST['voted'])){
if(in_array($_POST['score('.$fetch['questionID'].')'], $radioValue)){
    echo "<tr>Question no. ",$fetch['questionID'],": ",
    $_POST['score('.$fetch['questionID'].')'],"<br></tr>";
}
else{
    $validationFailed = true;
    exit();
}
}

//following should be outside the while loop.
if($validationFailed) {
    echo "<center><font color=red>All fields are required</font><br><br>
    <input type='button' name='return' value='Return' onclick='history.go(-1)'><br>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:29:36.037

首先请为单选按钮使用相同的名称，值会有所不同。现在在提交时尝试此代码，如果为真，然后发布您的表单，否则显示错误消息

```
var iz_checked = true;
$('input').each(function(){
   iz_checked = iz_checked && $(this).is(':checked');
}); 
```

# javascript - 如何在 Handlebar 模板中使用注释？

> ID：15336142
> 
> 赞同：146
> 
> 时间：2013-03-11T10:22:09.197
> 
> 标签：javascript, html, templates, handlebars.js

我使用 Handlebar.js 作为我的模板引擎。现在我想注释掉我的车把模板中的一些块。但后来我意识到 Handlebar 并没有忽略 Handlebar 注释块中的表达式。有什么解决方法吗？

* * *

## 回答 #1

> 赞同：220
> 
> 时间：2013-05-27T08:19:16.980

最新版本的 Handlebars 支持块评论：

```
{{!-- {{commented expressions}} --}} 
```

[https://github.com/wycats/handlebars.js/commit/a927a9b0adc39660f0794b9b210c9db2f7ddecd9](https://github.com/wycats/handlebars.js/commit/a927a9b0adc39660f0794b9b210c9db2f7ddecd9)

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2014-02-28T15:49:40.103

只需在左括号后添加一个感叹号即可。

正常表达：

```
{{expressions}} 
```

评论表达：

```
{{!expressions}} 
```

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2017-05-18T11:35:06.553

在您的车把模板文件中使用这种方式。

```
<div class="entry">
  {{!-- only output author name if an author exists --}}
  {{#if author}}
    <h1>{{author.firstName}} {{author.lastName}}</h1>
  {{/if}}
</div> 
```

注释不会出现在结果输出中。如果您希望显示评论，请使用 HTML 评论。

```
<div class="entry">
  {{! This comment will not be in the output }}
  <!-- This comment will be in the output -->
</div> 
```

[参考这个链接](http://handlebarsjs.com/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-07-06T14:29:17.380

评论handlebar.js的两种方式

单个组件：

```
{{!fixedTop=true}}     --> comments the whole content inside the brackets 
```

多组件：

```
 {{!--fixedTop=true
          alignment=true--}}     --> comments the whole content until end with "--" 
```

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2017-06-27T10:16:31.197

使用此代码：

```
{{#data}}
<!-- enter comments here  -->
<p>{{name}}</p>
{{/data}} 
```

# java - 在 Spring MVC（使用休眠验证器）中提交带有无效数据的表单时发送的语法错误请求

> ID：15336143
> 
> 赞同：5
> 
> 时间：2013-03-11T10:22:11.507
> 
> 标签：java, spring, spring-mvc, hibernate-validator

登录表单：

```
<f:form class="form-horizontal" method="post" action="/login"
    commandName="logindata">
    <fieldset>
        <legend class="text-info">Login</legend>
        <div class="control-group">
            <f:label path="uname" class="control-label" for="uname">Username</f:label>
            <div class="controls">
                <f:input type="text" path="uname" name="uname" id="uname"
                    placeholder="Username" />
            </div>
        </div>
        <div class="control-group">
            <f:label path="pwd" class="control-label" for="pwd">Password</f:label>
            <div class="controls">
                <f:input type="password" path="pwd" name="pwd" id="pwd"
                    placeholder="Password" />
            </div>
        </div>
        <div class="control-group">
            <div class="controls">
                <button type="submit" class="btn" id="login">
                    Login <i class="icon-chevron-right"></i>
                </button>
            </div>
        </div>
        <div id="errormsg" class="alert alert-error">${message}</div>
    </fieldset>
</f:form> 
```

loginData 类：

```
package com.demo.forms;

import org.hibernate.validator.constraints.Length;
import org.hibernate.validator.constraints.NotEmpty;

public class loginData {
    @Length(min=4)
    private String uname; 

    @NotEmpty
    private String pwd;

    public String getUname() {
        return uname;
    }
    public void setUname(String uname) {
        this.uname = uname;
    }
    public String getPwd() {
        return pwd;
    }
    public void setPwd(String pwd) {
        this.pwd = pwd;
    }
} 
```

用于显示和提交表单的控制器方法：（显示包含注册表单和登录表单的主页）

```
@RequestMapping(value = "/", method=RequestMethod.GET)
    public String showHome(Model model)
    {
        loginservice.logout();
        model.addAttribute("logindata", new loginData());
        model.addAttribute("signupdata", new signupData());
        return "home";
    } 
```

提交登录表单时调用的方法：

```
@RequestMapping(value = "login", method=RequestMethod.POST)
    public String submitloginForm(@Valid loginData logindata, SessionStatus state, Model model, BindingResult result)
    {
            if((loginservice.loggedin()) || (result.hasErrors()))
            {
                return showHome(model);
            }
            else
            {
                String uname = logindata.getUname();
                String pwd = logindata.getPwd();
                if(loginservice.login(uname, pwd))
                {
                    model.addAttribute("user",uname);
                    return "redirect:profile";
                }
                else
                {
                    model.addAttribute("message","Invalid Username/Password");
                    return showHome(model);
                }   
            }   
    } 
```

当输入的数据“有效”（正确或错误）时，登录工作正常。但是，当它无效时，例如密码字段为空或用户名长度少于四个字符时，将显示以下错误：

```
The request sent by the client was syntactically incorrect. 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-11T17:31:00.540

您必须修改参数的顺序。始终将`BindingResult result`参数直接放在带有`@Valid`注释的参数之后。

```
@RequestMapping(value = "login", method=RequestMethod.POST)
public String submitloginForm(@Valid loginData logindata, BindingResult result,
                              SessionStatus state, Model model) 
```

这甚至在[本周春季的本周 - 2013 年 3 月 5 日](http://www.springsource.org/node/4243)博客条目中提到

> 前几天有人问我这个问题，我觉得值得一提：在您的 Spring MVC @Controller 类处理程序方法中，确保 BindingResult 参数紧跟在模型或命令参数之后，如下所示：@RequestMapping(. ..) 公共字符串句柄请求（@ModelAttribute @Valid YourCustomPojo 尝试，BindingResult 结果）。在此示例中，handleRequest 将验证 POJO (YourCustomPojo) - 检查 POJO 的 JSR303 注释并尝试应用约束，因为 POJO 使用 @Valid 注释 - 并将任何错误存储在 BindingResult 中，如果我们询问，它可以使用为了它。

春天会

*   0) 确定处理方法
*   1) 创建 loginData 的实例
*   2）填充它
*   3) 验证它，并将验证结果存储在 BindingResult
*   4) 调用方法（使用 loginData 和 BindingResult 值），无论绑定 Result 是否包含错误

# perl - WWW::Mechanize::Firefox 通过链接循环

> ID：15336146
> 
> 赞同：1
> 
> 时间：2013-03-11T10:22:23.663
> 
> 标签：perl, web-scraping, www-mechanize, www-mechanize-firefox

我正在使用 a`foreach`来循环链接。我需要 a`$mech->back();`来继续循环还是隐含的。

此外，我是否需要`$mech2`为每个循环嵌套一个单独的对象？

我目前拥有的代码被卡住（它没有完成）并在`td#tabcolor3`找不到的第一页结束。

```
foreach my $sector ($mech->selector('a.link2'))
{
    $mech->follow_link($sector);

    foreach my $place ($mech->selector('td#tabcolor3'))
    {
            if (($mech->selector('td#tabcolor3', all=>1)) >= 1)
    {
        $mech->follow_link($place);
            print $_->{innerHTML}, '\n'
            for $mech->selector('td.dataCell');
        $mech->back();
    }
    else
    {
        $mech->back();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:35:13.647

我建议为此使用单独的 $mech 对象：

```
foreach my $sector ($mech->selector('a.link2'))
{
    my $mech = $mech->clone();
    $mech->follow_link($sector);

    foreach my $place ($mech->selector('td#tabcolor3'))
    {
            if (($mech->selector('td#tabcolor3', all=>1)) >= 1)
    {
            my $mech = $mech->clone();
            $mech->follow_link($place);
            print $_->{innerHTML}, '\n'
            for $mech->selector('td.dataCell');
        #$mech->back();
    }
#    else
#    {
#        $mech->back();
#    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:50:10.260

当页面不再显示时，您无法从页面访问信息。但是，可行的方法是在迭代之前*先*`foreach`构建列表，因此您编写的代码应该没问题。

 *`back`由于链接是绝对的，因此无需调用。如果您使用过`click`，那么页面中必须有一个可以点击的链接，但`follow_link`您所做的只是转到一个新的 URL。

也不需要检查要遵循的链接数量，因为`for`根本不会执行空列表上的循环。

为了使事情更清楚，我建议您`selector`在循环之前将结果分配给数组。

像这样

```
my @sectors = $mech->selector('a.link2');
for my $sector (@sectors) {

    $mech->follow_link($sector);

    my @places = $mech->selector('td#tabcolor3');
    for my $place (@places) {

        $mech->follow_link($place);

        print $_->{innerHTML}, '\n' for $mech->selector('td.dataCell');
    }
} 
```

**更新**

我很抱歉。这似乎`follow_link`很挑剔，需要点击*当前页面上*的链接。

我建议您`href`从每个链接中提取属性并使用`get`而不是`follow_link`.

```
my @selectors = map $_->{href}, $mech->selector('a.link2');
for my $selector (@selectors) {

    $mech->get($selector);

    my @places = map $_->{href}, $mech->selector('td#tabcolor3');
    for my $place (@places) {

        $mech->get($place);

        print $_->{innerHTML}, '\n' for $mech->selector('td.dataCell');
    }
} 
```

请让我知道这是否适用于您要连接的网站。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-06T09:31:59.233

我正在使用 WWW:Mechanize::Firefox 来循环一堆带有大量 Javascript 的 URL。该页面不会立即呈现，因此需要在决定下一步操作之前测试特定页面元素是否可见（类似于 Mechanize::Firefox 文档中的建议，除了测试中的 2 个 xpath）。

该页面最终会在大约 2-3 秒后呈现一个“无信息”或一些想要的东西的 xpath。如果没有信息，我们转到下一个 URL。我认为存在某种竞争条件，两个 xpath 都没有同时存在导致**`MozRepl::RemoteObject: TypeError: can't access dead object`**间歇性错误（`sleep 1`奇怪的是在循环中）。

我似乎可以工作/提高可靠性的解决方案是将所有的`$mech->get`和包含`$mech->is_visible`在`eval{};`这样的中：

```
eval{ 
  $mech->get("$url");
  $retries = 15; #test to see if element visible = page complete
  while ($retries-- and ! $mech->is_visible( xpath => $xpath_btn ) and  ! $mech->is_visible( xpath => $xpath_no_info )){
    sleep 1;
  };
  last if($mech->is_visible( xpath => $xpath_no_info) ); #skip rest if no info page
}; 
```

其他人可能会建议对此进行改进。*

# ruby-on-rails - Rails 连接（包括）表，其中“id”不存在于一个表和不同的主键中

> ID：15336147
> 
> 赞同：0
> 
> 时间：2013-03-11T10:22:28.230
> 
> 标签：ruby-on-rails, join, associations

我有两个模型，其中一个以“id”作为主键。第二个模型没有“id”作为主键。而是有一个复合键。如何加入这些？

```
class A < ActiveRecord::Base
  has_one :B, :order => "dt DESC"
end

class B < ActiveRecord::Base
  belongs_to :A, :foreign_key => :emp_id
end 
```

emp_id 充当外键。在 A 的控制器中，

```
arel = A.includes(:b) 
```

这失败了。我收到以下错误，

> ActiveRecord::StatementInvalid (Mysql2::Error: Unknown column 'b.id' in 'field list': SELECT `a`. `id`AS t0_r0,....

我该如何进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:03:57.690

尝试将 设置`primary_key`为`belongs_to`或`has_one`。

有关这些选项的更多信息，请访问：

[ActiveRecord 属于_to](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-belongs_to)

[ActiveRecord has_one](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_one)

# sql - 查询问题，它不会接受条件

> ID：15336148
> 
> 赞同：1
> 
> 时间：2013-03-11T10:22:28.447
> 
> 标签：sql

我在这里有这个查询：

```
SELECT formas.*, SMS_SERVISI.IDTICKET, SMS_SERVISI.MBYLLUR,SMS_SERVISI.time_added
FROM formas 
LEFT JOIN SMS_SERVISI ON formas.ID = SMS_SERVISI.IDTICKET 
WHERE SMS_SERVISI.IDTICKET ='' or SMS_SERVISI.IDTICKET is null AND  formas.sektori_pergjegjes ='K' 
ORDER BY formas.id DESC; 
```

我的问题是，它不会接受条件：

```
formas.sektori_pergjegjes ='K' 
```

好像它不会识别它...我需要显示所有记录，`formas.sektori='K'` 如果我把它放在错误的地方，你能告诉我吗？我到处都有这种情况，并且有效...谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:26:19.633

这是因为你没有使用括号。当条件的一部分为`OR`真时，其余部分无关紧要。

```
SELECT formas.*, SMS_SERVISI.IDTICKET, SMS_SERVISI.MBYLLUR,SMS_SERVISI.time_added
FROM formas 
LEFT JOIN SMS_SERVISI ON formas.ID = SMS_SERVISI.IDTICKET 
WHERE (SMS_SERVISI.IDTICKET ='' or SMS_SERVISI.IDTICKET is null) AND  formas.sektori_pergjegjes ='K' 
ORDER BY formas.id DESC; 
```

# itext - pdf 的 acroFields 的字体大小即将使用 iText 为 0

> ID：15336149
> 
> 赞同：0
> 
> 时间：2013-03-11T10:22:29.990
> 
> 标签：itext

我正在使用此代码来获取 PDF 的 AcroField 的字体大小。

但是名为“first name last name”的 AcroField 的字体大小为 0（尽管其实际字体为 32.3）。

其他字段的字体大小正在准确。请帮助我获得准确的字体大小。

我的代码是...

```
 final AcroFields.Item item = acroFields.getFieldItem(fieldName);

 ArrayList list =null;
 if(item!=null)
    list = item.merged;
    if (list != null) 
    {
    for (final Iterator it1 = list.iterator(); it1.hasNext();) 
    {
        final PdfDictionary itemDict = (PdfDictionary) it1.next();
        final PdfObject da = itemDict.get(PdfName.DA);
        System.out.println(da.toString()); //font size is printing out to be 0;
    }
 } 
```

新代码是

```
 import java.util.ArrayList;
       import java.util.Iterator;
       import java.util.Map;
       import java.util.Set;
       import com.lowagie.text.pdf.AcroFields;
       import com.lowagie.text.pdf.PRStream;
       import com.lowagie.text.pdf.PdfDictionary;
       import com.lowagie.text.pdf.PdfEncodings;
       import com.lowagie.text.pdf.PdfName;
       import com.lowagie.text.pdf.PdfReader;
       import com.lowagie.text.pdf.PdfStamper;
       import com.lowagie.text.pdf.PdfStream;

     public class MyTest {      

        public static void main(String[] args) {

    String pdfName = "Crunch-Business_card_NRW_edits.pdf";      

    PdfStamper stamper = null;
    FileOutputStream fout = null;   
    try{
        PdfReader reader = new PdfReader(pdfName);
        fout = new FileOutputStream("output.pdf");
        stamper = new PdfStamper(reader, fout); 

        AcroFields acroFields = stamper.getAcroFields();
        Map fieldMap = acroFields.getFields(); 
        Set keys = fieldMap.keySet();

        for (Iterator it = keys.iterator(); it.hasNext();)
        {
            String fieldName  = (String) it.next(); 
            acroFields.setField(fieldName,acroFields.getField(fieldName));

            final AcroFields.Item item = acroFields.getFieldItem(fieldName);
            final ArrayList list = item.merged;
            if (list != null) {
                for (final Iterator it1 = list.iterator(); it1.hasNext();) {
                    final PdfDictionary itemDict = (PdfDictionary) it1.next();

                    PdfDictionary appearanceDict = itemDict.getAsDict(PdfName.AP);
                    PdfStream normalAppearance = appearanceDict.getAsStream(PdfName.N);

                    System.out.println("normalAppearance======"+normalAppearance);// normalAppearance is coming null.
                    byte[] streamBytes = PdfReader.getStreamBytes((PRStream) normalAppearance);
                    System.out.println(PdfEncodings.convertToString(streamBytes, null));
                }
            }

        }                       
        stamper.setFreeTextFlattening(false);
        stamper.setFormFlattening(false);
        stamper.close(); 
    }
    catch(Exception e){
        e.printStackTrace();
    }

} 
```

}

PDF 的链接是[http://www.mediafire.com/view/?tpjql3ipn3xqpbo](http://www.mediafire.com/view/?tpjql3ipn3xqpbo)。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:46:28.763

*在本质上：*

0 表示“自动调整大小”：您必须计算适合的大小。

*详细地：*

我们看一下文档中的字段定义：

```
52 0 obj
<<
    /Ff 41943042
    /F 4
    /Type/Annot
    /RV(<?xml version="1.0"?>
        <body xfa:APIVersion="Acroform:2.7.0.0" xfa:spec="2.1"
              xmlns="http://www.w3.org/1999/xhtml"
              xmlns:xfa="http://www.xfa.org/schema/xfa-data/1.0/">
            <p dir="ltr"
               style="margin-top:0pt;margin-bottom:0pt;text-valign:middle;
                      font-family:'Alternate Gothic LT';font-size:30pt;
                      color:#ffffff">first name last name</p>
        </body>)
    /Subtype/Widget
    /DV(first name last name)
    /T(name)
    /V(first name last name)
    /DS(font: 'Alternate Gothic LT',sans-serif 12.0pt; text-align:left; color:#FFFFFF )
    /AP<</N 7 0 R>>
    /P 21 0 R
    /MK<<>>
    /FT/Tx
    /Rect[36.8297 87.7383 250.89 129.353]
    /DA(/AlternateGothicLT-No3 0 Tf 1 1 1 rg)
>>
endobj 
```

而在 7 0 中出现流的内容：

```
q Q /Tx
BMC
q
0 0 214.06 41.61 re W n
q
BT
1 0 0 1 2 7.14 Tm
/AlternateGothicLT-No3 32.31 Tf
1 1 1 rg
(first name last name)Tj
0 g
ET
Q
Q
EMC 
```

因此，就像您通过 iText 阅读一样，**DA**（默认外观）字符串将字体设置为 0。

根据 PDF 规范[ISO 32000-1](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)，第 435 页，这意味着：

> 默认外观字符串 (DA) 包含建立图形状态参数所需的任何图形状态或文本状态运算符，例如文本大小和颜色，以显示字段的可变文本。只有文本对象中允许的运算符才能出现在该字符串中（参见图 9）。字符串至少应包括一个 Tf（文本字体）运算符及其两个操作数，字体和大小。指定的字体值应与默认资源字典的字体条目中的资源名称匹配（从交互式表单字典的 DR 条目中引用；参见表 218）。大小为零表示字体应自动调整大小：其大小应根据注释矩形的高度计算。

**因此，必须计算大小以填充可用空间，但不能更多。**

在外观流中，您会看到最后一个外观创建者考虑了 32.31 分来完成这项工作。

**编辑**

您可以像这样提取正常外观流的字节：

```
PdfDictionary appearanceDict = itemDict.getAsDict(PdfName.AP);
PdfStream normalAppearance = appearanceDict.getAsStream(PdfName.N);
byte[] streamBytes = PdfReader.getStreamBytes((PRStream) normalAppearance);
System.out.println(PdfEncodings.convertToString(streamBytes, null)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:42:44.790

我已经尝试了@mkl 提供的解决方案并得到了预期的结果。这是@mkl 解释的解决方案。

```
PdfDictionary appearanceDict = itemDict.getAsDict(PdfName.AP);
PdfStream normalAppearance = appearanceDict.getAsStream(PdfName.N);
byte[] streamBytes = PdfReader.getStreamBytes((PRStream) normalAppearance);
System.out.println(PdfEncodings.convertToString(streamBytes, null)); 
```

# asp.net - 以编程方式打开企业库中的跟踪侦听器

> ID：15336152
> 
> 赞同：0
> 
> 时间：2013-03-11T10:22:40.090
> 
> 标签：asp.net, web-applications, logging, web-config, enterprise-library

我已经使用 Enterprise Library 启用了两个跟踪侦听器来登录到事件日志和日志文件。

是否可以选择以编程方式在任何时间点仅登录一个日志（例如，我想有时登录到事件日志并有时登录到日志文件）。

```
<configuration>
  <configSections>
    <section name="loggingConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.LoggingSettings, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="true" />
  </configSections>

  <loggingConfiguration name="" tracingEnabled="true" defaultCategory="General">
    <listeners>
      <add name="Event Log Listener" type="Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.FormattedEventLogTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
        listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.FormattedEventLogTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
        source="Enterpriselibrary" formatter="Text Formatter" log="TestLog"
        machineName="." traceOutputOptions="None" />
      <add name="Flat File Trace Listener" type="Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.FlatFileTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
        listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.FlatFileTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
        fileName="C:\AER\test.log" formatter="Text Formatter" traceOutputOptions="LogicalOperationStack, DateTime, Timestamp, ProcessId, ThreadId, Callstack" />
    </listeners>
    <formatters>
      <add type="Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.TextFormatter, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
        template="Timestamp: {timestamp}{newline}&#xA;Message: {message}{newline}&#xA;Category: {category}{newline}&#xA;Priority: {priority}{newline}&#xA;EventId: {eventid}{newline}&#xA;Severity: {severity}{newline}&#xA;Title:{title}{newline}&#xA;Machine: {localMachine}{newline}&#xA;App Domain: {localAppDomain}{newline}&#xA;ProcessId: {localProcessId}{newline}&#xA;Process Name: {localProcessName}{newline}&#xA;Thread Name: {threadName}{newline}&#xA;Win32 ThreadId:{win32ThreadId}{newline}&#xA;Extended Properties: {dictionary({key} - {value}{newline})}"
        name="Text Formatter" />
    </formatters>
    <categorySources>
      <add switchValue="All" name="General">
        <listeners>
          <add name="Event Log Listener" />
          <add name="Flat File Trace Listener" />
        </listeners>
      </add>
    </categorySources>
    <specialSources>
      <allEvents switchValue="All" name="All Events" />
      <notProcessed switchValue="All" name="Unprocessed Category" />
      <errors switchValue="All" name="Logging Errors &amp; Warnings">
        <listeners>
          <add name="Event Log Listener" />
        </listeners>
      </errors>
    </specialSources>
  </loggingConfiguration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-14T17:42:52.137

当然，只需创建单独的类别并将各个跟踪侦听器与每个类别相关联。然后，在您的代码中，您只需指定希望通过 LogEntry 登录的类别。像这样：

定义您的类别：

```
<categorySources>
  <add switchValue="All" name="Category">
    <listeners>
      <add name="Event Log Listener" />
    </listeners>
  </add>
  <add switchValue="All" name="AnotherCategory">
    <listeners>
      <add name="Flat File Trace Listener" />
    </listeners>
  </add>
</categorySources> 
```

然后以编程方式引导您的日志条目：

```
LogWriter.Write("Log entry through a specific Category to the Event Log", "Category");
LogWriter.Write("Log entry through another Category to a file", "AnotherCategory"); 
```

# android - 从 ScrollPickerView 获取所选行的位置（android 的自定义 ui 选择器视图）

> ID：15336153
> 
> 赞同：0
> 
> 时间：2013-03-11T10:22:42.923
> 
> 标签：android

我正在使用 android 进行开发，我需要制作一个自定义 ui 选择器视图，就像我使用链接中的代码在 iphone 中的那样

[http://code.google.com/p/scroll-picker-view-for-android/](http://code.google.com/p/scroll-picker-view-for-android/)

这里在

```
scrollPickerViewListener = this;
scrollPickerView = new ScrollPickerView(this);
scrollPickerView.addSlot(getResources().getStringArray(R.array.custom_list), 1, ScrollPickerView.ScrollType.Ranged);
scrollPickerView.setSlotIndex(0, 13);

ViewGroup.LayoutParams params = new      
ViewGroup.LayoutParams(LayoutParams.FILL_PARENT, 200);
this.setContentView(scrollPickerView, params); 
```

用户滚动时如何从pickerview中获取所选项目的索引

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:04:18.660

我首先要问你为什么要创建一个 iPhone 选择器而不是[使用为 Android](http://developer.android.com/design/building-blocks/pickers.html)制作的选择器，无论如何......

我检查了您正在使用的库的一些[源代码](https://code.google.com/p/scroll-picker-view-for-android/source/browse/trunk/library/src/com/ttshrk/view/ScrollPickerView.java)，似乎该库的开发人员认为完全不留下任何评论很有趣。它从 ListView 扩展，所以它不应该那么难。

快速浏览显示一个 ScrollPickerViewListener。您可能应该使用它。尝试这个。

```
scrollPickerView.setScrollPickerViewListener(){
       public void onSingleTapUp(int index){

       }
} 
```

或者...

```
@Override
public void onSingleTapUp(int slotId) {
   Toast.makeText(this, ""+slotId, Toast.LENGTH_SHORT).show();
} 
```

# java - 你可以让一个 JFrame 随机选择一张图片作为它的背景吗

> ID：15336155
> 
> 赞同：0
> 
> 时间：2013-03-11T10:22:50.003
> 
> 标签：java, swing, jframe, jlabel, imageicon

你能做一个`JFrame`随机选择提供的三到四张图片作为背景的吗？因此，当用户打开 时`JFrame`，`JFrame`将选择任何指定的图片作为背景。

我想要这样的东西：

```
ImageIcon background = new ImageIcon("First Image.png");
JLabel label = new JLabel(background);
frame.add(label); 
```

第二张图：

```
ImageIcon background2 = new ImageIcon("Second Image.png");
JLabel label2 = new JLabel(background2);
frame.add(label2); 
```

第三：

```
ImageIcon background3 = new ImageIcon("Third Image.png");
JLabel label3 = new JLabel(background3);
frame.add(label3); 
```

也许是第四个：

```
ImageIcon background4 = new ImageIcon("Fourth Image.png");
JLabel label4 = new JLabel(background4);
frame.add(label4); 
```

我想要一些代码，这样 JFrame 就可以使用这些代码中的任何一个。

另外，有没有办法随机更改 JFrame 标题？

就像我想要它一样：

`'My Game: It's the best!'`

...然后当用户再次打开 JFrame 时，标题将更改为，也许：

`'My Game: Try it, it's new!'`和/或

`'My Game: You can play it easily!'`和/或

`'My Game: Find all the mysteries...'`和/或

`'My Game: Money don't go on trees!'`和其他有趣的台词。

希望我让你容易理解！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:28:19.163

还请考虑[`Collections.shuffle()`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)，[此处](https://stackoverflow.com/a/3078354/230513)为`List<JLabel>`和[此处](https://stackoverflow.com/a/7935040/230513)为`List<Icon>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:37:43.387

您可以使用[java.util.Random](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html)类来生成随机数。

如果你想选择随机字符串/图像/图像路径，你可以声明一个数组并从中获取一个随机项。这是标题的示例代码：

```
//class level variable, supply your own lines.
final String[] TITLES = new String[]{"My Game: It's the best!", "My Game: Try it, it's new!"}

//next snippet is random title generation
//it's better to use only one random instance, 
//so you might want to declare this one on class level too
Random random = new Random(); 
int index = random.nextInt(TITLES.length); //get random index for given array.
String randomTitle = TITLES[index];
frame.setTitle(randomTitle); 
```

您可以对图像路径/图像执行相同的操作。声明一个数组类型，通过随机索引获取一个对象：

```
final String[] IMAGE_PATHS = //initialization goes here

Random random = new Random(); 
String randomImagePath = IMAGE_PATHS[random.nextInt(IMAGE_PATHS.length)];
ImageIcon background = new ImageIcon(randomImagePath);
JLabel label = new JLabel(background); 
```

# image - 图像大小和像素的分辨率

> ID：15336157
> 
> 赞同：0
> 
> 时间：2013-03-11T10:22:55.370
> 
> 标签：image, compression, resolution, pixel, ppi

如果提供图像大小和图像高度和宽度，是否有任何公式来计算图像分辨率。我用谷歌搜索了答案，但没有得到太多帮助。有一个公式，但如果我用图像的高度和宽度计算，我得到的分辨率与实际分辨率不同。

另外，如果我从 42 兆像素相机和 32 兆像素相机拍摄照片，图像大小和尺寸会有所不同吗？

谢谢吉腾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:28:08.193

这是一个简单的交叉乘法

如果您的图像的宽度应该为 10 英寸且宽度为 1000 像素，则其水平分辨率为 1000 / 10 = 100 ppi（每英寸像素）。

我错过了什么吗？

# javascript - Wordpress 和 Javascript：字符串变量，其 html 标签被浏览器读取，带有换行符

> ID：15336158
> 
> 赞同：0
> 
> 时间：2013-03-11T10:22:56.093
> 
> 标签：javascript, wordpress

我已经疯狂地试图解决这个问题。

在我的 javascript 代码中，我定义了一个字符串变量，我在其中以字符串的形式放置了一个 HTML 表。即：

```
var tData="<table><tbody><tr><a><th>Type</th><th>Score</th><th>Percentile</th></a></tr><tr><td><a>Overall</a></td><td>2.4</td><td>50%</td></tr><tr><td><a>Best 100</a></td><td>2.3</td><td>70%</td></tr></tbody></table>"; 
```

现在，我的浏览器（chrome 和 firefox）正在通过字符串读取这个变量赋值，作为带有换行符的 HTML 代码。请看下面的图片以获得更清晰的信息。

如果我删除 html 标签并编写一个简单的字符串，则代码可以正常工作。因此，我可以向您保证，以前没有倒逗号错误（我检查了多次），也没有虚假字符。

![在此处输入图像描述](../Images/9877c023be0215644ed15a3aca48962e.png)

我在这个问题上花了太多时间。请帮我解决这个问题。

**编辑**

在标题和标签中添加了 Wordpress，因为这是一个 wordpress 问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:28:57.523

由于您的文档是 XHTML，因此您必须将代码包含在 CDATA 部分中：

```
<script>
<![CDATA[
    // code here
]]>
</script> 
```

这可以防止浏览器`<...>`将内容中的序列解释为标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:26:56.117

如果你想在 JavaScript 中使用多行字符串，你必须取消换行，即

```
var str = "abc\
de"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T11:15:20.047

行。尤里卡！！！

我找到了解决办法。我打破了以下字符串：

```
var tData="<table><tbody><tr><a><th>Type</th><th>Score</th><th>Percentile</th></a></tr><tr><td><a>Overall</a></td><td>2.4</td><td>50%</td></tr><tr><td><a>Best 100</a></td><td>2.3</td><td>70%</td></tr></tbody></table>"; 
```

进入

```
 var tData = "<tab"+"le><tb"+"ody><t"+"r><a><t"+"h>Type</t"+"h><t"+"h>Score</t"+"h><t"+"h>Percentile</t"+"h></a></t"+"r><t"+"r><t"+"d><a>Overall</a></t"+"d><t"+"d>2.4</t"+"d><t"+"d>50%</t"+"d></t"+"r><t"+"r><t"+"d><a>Best 100</a></t"+"d><t"+"d>2.3</t"+"d><t"+"d>70%</t"+"d></t"+"r></tbo"+"dy></ta"+"ble>"; 
```

欺骗浏览器。我仍然希望得到一个更好的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T10:29:43.113

```
Delete all invisible characters (whitespace) around that area,
then give it another try. 
```

试试这个：

```
var tData="<table><tbody>";
tData+="<tr><th><a>Type</a></th><th>Score</th><th>Percentile</th></tr>";
tData+="<tr><td><a>Overall</a></td><td>2.4</td><td>50%</td></tr>";
tData+="<tr><td><a>Best 100</a></td><td>2.3</td><td>70%</td></tr>";
tData+="</tbody></table>"; 
```

可能重复[“意外令牌非法”没有明显原因](https://stackoverflow.com/questions/12719859/syntaxerror-unexpected-token-illegal)

# ruby - ruby 中的 `|x,y|` 和 `|x;y=0|` 有什么区别？

> ID：15336159
> 
> 赞同：0
> 
> 时间：2013-03-11T10:22:58.410
> 
> 标签：ruby

`|`在使用块编写代码时，我试图了解 pipe() 内的局部变量创建。并且在我`IRB`下面的代码中也尝试了同样的方法。

```
[1,2,3].each {|x;y| y=x; print y}

#123=> [1, 2, 3]
[1,2,3].each {|x;y = 0| y=x; print y}

#SyntaxError: (irb):1: syntax error, unexpected '=', expecting '|'
#[1,2,3].each {|x;y = 0| y=x; print y}
                    ^
#(irb):1: syntax error, unexpected '}', expecting $end
#        from C:/Ruby193/bin/irb:12:in `<main>' 
```

但是无法理解第二个代码发生了什么，而第一个代码是完美的。

谁能告诉我两者的区别`|x,y| and |x;y=0|`？希望这个问题的答案对我有意义。

下面再次完美运行：

```
a = "hello world".split(//).each{ |x,newstr = Array.new() | newstr = x.capitalize;puts newstr }

#H
#E
#L
#L
#O
#
#W
#O
#R
#L
#D
#=> ["h", "e", "l", "l", "o", " ", "w", "o", "r", "l", "d"] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T10:38:09.720

从 Ruby 1.9 开始，可以**在块中声明一个局部变量，**方法是用**`;`**. 在您的示例中，`x`它是一个块参数，并且`y`是一个局部变量。下面的代码很好地说明了这一点。

```
> [1,2,3].each {|x; y| puts "x: #{x} - y: #{y}"}
x: 1 - y: 
x: 2 - y: 
x: 3 - y:
 => [1, 2, 3] 
```

由于 y 未初始化，因此它没有任何值。**从语法上讲，您不能`| |`**像在第二个示例中那样直接在管道之间初始化局部块变量。这只是被禁止的。

但是，在 Ruby 1.9 中，您可以**为块参数设置默认值**。确实，

```
> [1,2,3].each {|x,y=0| puts "x: #{x} - y: #{y}"}
x: 1 - y: 0
x: 2 - y: 0
x: 3 - y: 0
 => [1, 2, 3] 
```

在语法上是正确的。这个时间**`y`是一个默认值的块参数`0`**。您可以通过以下方式说明差异：

```
> { one: 1, two: 2, three: 3}.each {|x,y=0| puts "x: #{x} - y: #{y}"}
x: one - y: 1
x: two - y: 2
x: three - y: 3
 => {:one=>1, :two=>2, :three=>3} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:25:13.623

`;y`用于解决 Ruby 的作用域（隐藏外部变量），并且不接受值，因为它在内部`||`

# ruby-on-rails - 回形针有时不保存图像

> ID：15336161
> 
> 赞同：1
> 
> 时间：2013-03-11T10:23:09.290
> 
> 标签：ruby-on-rails, paperclip

我在 Rails 应用程序中使用回形针。有时当我上传文件时它工作正常，有时它不工作。我用它来上传图片，比如 jpeg、png、gif、jpg 等。

无需就版本控制和配置向我提出建议。一切正常，但有时却不行。

任何人都遇到过这个问题，如果遇到，那么您如何找到解决方案？

# c++ - Shared_Ptr 吃掉了我的应用程序的性能

> ID：15336162
> 
> 赞同：0
> 
> 时间：2013-03-11T10:23:09.897
> 
> 标签：c++, qt, shared-ptr

我在 Ubuntu 上，我正在开发一个计算机视觉应用程序（光流），我正在使用 valgrind 对代码进行一些分析。分析后，我发现 shared_ptr 占用了 74% 的应用程序。请找到使用 shared_ptr 的附加代码。我正在为此寻找优化。除此之外，sprintf 也很耗时，openMP 线程也很吃力。我真的很想知道 sprintft 和 openMP 的成本......

```
 int main(int argc, char *argv[])
{
    //QApplication a(argc, argv);

    omp_set_dynamic( 0 );
    omp_set_num_threads( 4 );

    double t1, t2;

    // ------------- Initialization: Frames. --------------

    // Load first image
    char imFName[1024];
    sprintf( imFName, "%s/img_%08i.png", imPath.c_str(), imIndex );
    ifstream fileExists( imFName );

    if (!fileExists)
    {
        printf("First image %s/img_%08i.png could not be loaded!", imPath.c_str(), imIndex);
        return -1;
    }

    QImagePtr prevImg;
    QImagePtr curImg( new QImage( QString(imFName) ) );

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T10:26:31.147

我怀疑这`shared_ptr`是罪魁祸首，但是`new`and `delete`.

您在堆上分配内存，将其分配给`item`，当 for 循环的范围结束时，它会释放它。所以你有一个昂贵的noop。

正如@nvoigt 已经建议的那样，使用自动对象

```
CharachterDetection item(frame); 
```

并将访问权限从 更改`item->`为`item.`。

在您的图片中，位置是`/usr/arm-linux-gnueabihf/...`。如果这不是本机运行，而是在模拟虚拟机上运行，​​我不会依赖任何结果。

**更新**：

您在循环中运行 sprintf 并重复复制路径，然后再次将其放入 QString 中。也许使用其中一个[`QString::arg`](http://qt-project.org/doc/qt-5.0/qtcore/qstring.html#arg)更适合。但这只是一个猜测。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T10:27:43.677

也许您在帖子中遗漏了一些代码？您的共享指针似乎除了构造和删除您的对象之外什么也没做。如果需要该对象的构造函数代码，您可以将对象放入堆栈：

```
// ----------------------- Perform Marker Detection ------------------------
ZtAbsoluteSystemItem item(frame); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T10:40:36.807

从你的代码中很难判断问题到底出在哪里，所以我只能提供两条我过去发现有用的一般建议：

*   避免`new`手动使用，考虑[`std::make_shared`](http://en.cppreference.com/w/cpp/memory/shared_ptr/make_shared)使分配更有效。
*   避免无用的引用计数。当采用 a 参数时`std::shared_ptr`，将其视为`const std::shared_ptr<...>&`而不是创建 a 的副本，`std::shared_ptr`这意味着每个函数调用的原子增量和减量。

# java - 将包含内容的目录从 HDFS 复制到本地文件系统

> ID：15336171
> 
> 赞同：1
> 
> 时间：2013-03-11T10:23:48.653
> 
> 标签：java, scala, hadoop, hdfs

我正在寻找一种从 HDFS 复制整个目录的最佳方法，其中包含所有内容。就像是：

```
Path srcPath = new Path("hdfs://localhost:9000/user/britva/data");
Path dstPath = new Path("/home/britva/Work");
fs.copyToLocal(false, srcPath, dstPath); 
```

此外，“数据”文件夹可以包含“工作”目录中不存在的文件夹。那么最好的方法是什么？

感谢您的回答！

我想其中一种解决方案是使用[FileUtil](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/fs/FileUtil.html)对象，但不确定如何使用它，因为我只初始化了一个文件系统 - HDFS。那么问题是我应该如何初始化我的本地FS？据我了解，当您有许多节点时使用此工具。但是我想要 - 使用本地 FS - 从 HDFS 复制到项目源。

另外，因为我正在使用 Play！框架，使用它的路径会很棒，比如`Play.application.path + "/public/stuff"`.

如果我尝试使用上面的代码，它会说：

```
java.io.IOException: No FileSystem for scheme: file 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-19T18:44:47.313

我使用 scala，所以这里是类似于 java 的 scala 示例。

步骤1。确保您的 hdfs 处于活动状态。对于本地，只需尝试打开 127.0.0.1:50070

第2步。这是斯卡拉代码：

```
val hdfsConfig = new Configuration
val hdfsURI = "127.0.0.1:9000"
val hdfs = FileSystem.get(new URI(hdfsURI), hdfsConfig)
val targetPath = new Path("127.0.0.1:9000/hdfsData")
if (hdfs.exists(targetPath)) {
  hdfs.delete(targetPath, true)
}
val oriPath = new Path(#your_local_file_path)
hdfs.copyFromLocalFile(oriPath, new Path(hdfsURI+"/"))
hdfs.close() 
```

第三步。例如：我的本地文件路径是：/tmp/hdfsData

我想在 HDFS 中运行 Step2 的代码后复制此目录下的所有文件：所有文件都将位于“127.0.0.1:9000/hdfsData/”

第4步。从 HDFS 复制到本地，只需将“copyFromLocalFile”更改为“copyToLocalFile”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-31T17:59:54.200

如果您使用`maven`关于“没有用于方案的文件系统”异常来构建项目，我会遇到这样的问题，我的情况如下：

请检查您尝试运行的 JAR 的内容。特别是`META-INFO/services`目录，文件`org.apache.hadoop.fs.FileSystem`。应该有 filsystem 实现类的列表。检查行`org.apache.hadoop.hdfs.DistributedFileSystem`存在于 HDFS 和`org.apache.hadoop.fs.LocalFileSystem`本地文件方案的列表中。

如果是这种情况，您必须在构建期间覆盖引用的资源。

另一种可能性是您的类路径中根本没有`hadoop-hdfs.jar`，但这可能性很小。通常，如果您具有正确`hadoop-client`的依赖关系，则不是一种选择。

# ruby - 使用 Ruby 解析 csv 文件时无法获取标题

> ID：15336172
> 
> 赞同：1
> 
> 时间：2013-03-11T10:23:49.030
> 
> 标签：ruby, csv

我无法获得标题。没有错误发生。我怎样才能正确地得到它？

数据：

```
"A","B","C"
"1","2","3" 
```

红宝石：

```
require "csv"

table = CSV.read("filename", :headers => true)

puts table[0] # "1","2","3"

puts table[headers] # Nothing happens. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:26:05.013

尝试`table.headers`：

```
irb(main):006:0> table.headers
=> ["A", "B", "C"] 
```

你是如何运行这段代码的？`table[headers]`应该返回一个错误：

```
irb(main):008:0> table[headers]
NameError: undefined local variable or method `headers' for main:Object
    from (irb):8
    from /usr/bin/irb:12:in `<main>' 
```

# java - 带有空集合的每个循环的activiti多实例

> ID：15336173
> 
> 赞同：3
> 
> 时间：2013-03-11T10:23:51.910
> 
> 标签：java, activiti, bpmn

在我们的工作流程中，我们有几个多实例调用活动，如下所示：

```
<callActivity id="loopFoos" calledElement="${workflowResolver.resolveWorkflowName(foo)}">
    <multiInstanceLoopCharacteristics isSequential="false" activiti:collection="${foos}" activiti:elementVariable="foo" />
</callActivity> 
```

问题是某些集合是空的，这会导致异常，因为 activiti 假设集合中至少有一个元素。我们可以围绕所有子工作流程调用做出决策，但这会用与业务无关的细节污染工作流程图。

我们需要的是java对每个like的行为

```
for (Foo foo : foos) {
 // call workflow
} 
```

空集合根本不进入循环。

有没有办法让activiti表现得像这样？如果没有，您将如何对工作流程进行建模？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:19:31.140

没有办法使用标准的 Activiti 功能来解决这个问题。因此，唯一的选择是使用网关或 Java 服务任务和类实现`ActivityBehaviour`（不推荐）来控制序列流。我更喜欢使用`exclusiveGateway`s 。检查此链接以获取更多信息：

1.  [Activiti官方论坛讨论](http://forums.activiti.org/en/viewtopic.php?f=6&t=1714)

2.  [MultiInstanceActivityBehavior.java](https://github.com/Activiti/Activiti/blob/master/modules/activiti-engine/src/main/java/org/activiti/engine/impl/bpmn/behavior/MultiInstanceActivityBehavior.java) - int resolveNrOfInstances(ActivityExecution execution) [ParallelMultiInstanceBehavior](https://github.com/Activiti/Activiti/blob/master/modules/activiti-engine/src/main/java/org/activiti/engine/impl/bpmn/behavior/ParallelMultiInstanceBehavior.java) - void createInstances(ActivityExecution execution); [SequentialMultiInstanceBehavior](https://github.com/Activiti/Activiti/blob/master/modules/activiti-engine/src/main/java/org/activiti/engine/impl/bpmn/behavior/SequentialMultiInstanceBehavior.java) - void createInstances（ActivityExecution 执行）；

# pdo - PDO 准备语句参数

> ID：15336180
> 
> 赞同：0
> 
> 时间：2013-03-11T10:24:08.137
> 
> 标签：pdo, prepared-statement

我刚开始学习 PDO，我读到在准备语句中可以使用命名参数和问号参数。那么我应该使用哪个，或者它们完全一样，只是我决定使用哪个？因为我看到更多的人选择使用问号参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:26:16.113

您可以同时使用这两种方法，但使用“命名参数”（出于显而易见的原因）更容易、更清晰。命名参数的一个好处是您可以在代码中看到在查询中插入了哪些变量，并且添加代码片段（稍后）更容易，因为所有内容都有名称并且不依赖于参数的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:39:02.193

事实上，问号产生的代码要短得多。
不是小说家而是程序员，我更喜欢这样简洁的代码

```
$stm = $pdo->prepare("SELECT id FROM table WHERE name=? and pass=?");
$stm->execute(array($name,$pass));
$id  = $stm->fetchColumn(); 
```

而命名占位符将要求我将每个名称都写十几次。

但无论如何，这确实只是个人喜好问题。

# php - Symfony 2：AvalancheImagineBundle - 无法找到控制器“imagine.controller:filter”

> ID：15336181
> 
> 赞同：0
> 
> 时间：2013-03-11T10:24:13.103
> 
> 标签：php, symfony, symfony-2.1

我使用 AvalancheImagine 包生成缩略图时收到此错误：

```
Unable to find controller "imagine.controller:filter".
500 Internal Server Error - InvalidArgumentException 
```

捆绑包注册在`AppKernel.php`. 路由和配置 yml 文件已更新，但是当我在开发环境中加载资产的 url 时仍然出现此错误。

开发模式下的以下输出：

```
 protected function createController($controller)
    {
        if (false === strpos($controller, '::')) {
            throw new \InvalidArgumentException(sprintf('Unable to find controller "%s".', $controller));
        }
        list($class, $method) = explode('::', $controller, 2);

at ControllerResolver ->createController ('imagine.controller:filter')
in E:\workspace\***\app\cache\dev\classes.php at line 5297  -+
at ControllerResolver ->getController (object(Request))
in E:\workspace\***\src\Inhouse\MainBundle\Event\BeforeControllerActionListener.php at line 32  -+ 
```

我的`composer.json`：

```
"avalanche123/imagine-bundle": "dev-master", 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:47:10.690

你在使用自己的控制器吗？

如果是这样，你应该有：

```
parameters:
    imagine.controller.class: Company\AnyBundle\Controller\ImagineController 
```

也许你忘记了`.class`？

# c++ - 实现许可管理服务器

> ID：15336186
> 
> 赞同：1
> 
> 时间：2013-03-11T10:24:40.023
> 
> 标签：c++, client-server, communication

我想实现一个许可证管理软件的服务器端。我在 LINUX 操作系统中使用 C++。

当软件启动时，它必须连接到检查权限并允许/禁止运行某些功能的服务器。

我的问题是关于跨互联网客户端和服务器之间通信的实现：

服务器将在互联网上拥有一个静态 IP，因此使用一个简单的 TCP/IP 套接字客户端连接到 TCP/IP 套接字服务器（提供 IP/PORT）就足够了吗？

我熟悉套接字通信，但不太熟悉互联网通信，所以我的问题是这是否是正确的方法，还是我需要使用不同的机制，如 http 客户端服务器或其他。

问候

AFG

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:19:51.227

以下是使用 HTTP 作为传输的一些好处：

*   **更容易正确，更有可能在生产中工作**：是的，您可能必须添加额外的依赖项来处理 HTTP（客户端和服务器端），但它仍然比另一个您必须实现、维护的本土协议更可取，关心向后兼容性，处理多平台问题（例如字节序）等。就实现的便利性而言，在常见情况下使用基于 HTTP 的解决方案应该容易得多（尤其是如果您为许可构建 REST 样式服务 API检查）。
*   **更多帮助**：HTTP 作为 Web 的基础是当今使用最广泛的技术之一。您将遇到的大多数（全部？）问题可能都已公开记录在解决方案/解决方法中。
*   **加密“免费”**：加密已经是一个已解决的问题（HTTPS/SSL），无论是在传输方面，还是在你最终必须实现的方面，这只是设置的问题。
*   **服务器身份验证“免费”**：HTTPS/SSL 不仅解决了加密问题，还解决了服务器身份验证问题，因此客户端可以验证它是否真的在与正确的服务通信。
*   **保证在互联网上工作**：HTTP/HTTPS 流量在互联网上很常见，因此您不会遇到难以穿越的路由问题或防火墙。使用您自己的协议时，这可能是一个问题。
*   **开箱即用的灵活性**：您还可以减少客户端与服务器通信的限制，因为在许多不同的环境中构建客户端非常简单，只要他们可以使用 HTTP（可能还有 SSL），并且他们知道如何发布对您的服务器的请求（即您的服务 API 的样子）。
*   **易于与管理 webapp 集成**：如果您希望允许用户以某种方式管理与许可证关联的帐户（更新联系信息等），那么您甚至可以将许可证服务器与该应用程序结合起来。如果有用，您还可以将许可证管理 UI 部分构建到同一个应用程序中。

最后一点（这对您的客户端 HTTPS/SSL 实施施加了额外的限制）：您甚至可以使用客户端 SSL 证书，这实际上允许对服务器进行客户端身份验证。根据您使用它们的方式，客户端证书更难管理，但它们可以是例如。已过期或已撤销，因此在某种程度上它们实际上*是*许可证（用于连接到服务器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:47:53.760

*   HTTP 不是一种不同的机制。它是通过 TCP/IP 连接运行的协议。
*   Internet 仅使用 IP 传输。您可以在它之上使用 UDP、TCP 或 SCTP 会话（嗯，UDP 不是一个很大的会话）层。TCP 是一般的选择。
*   套接字是操作系统接口。它们是大多数系统中唯一的网络接口，但有些系统具有不同的接口。与运输本身无关。
*   IP 地址实际上与网络拓扑相关联，因此我强烈反对将 IP 地址硬编码到服务器中。如果您出于任何原因必须更改网络提供商，您将不会获得相同的 IP 地址。使用 DNS，只需一个`gethostbyname`电话。
*   并且不要忘记对服务器进行身份验证；即使使用硬编码的 IP，也很容易重定向它。

# angularjs - angularjs 和dust.js 有什么区别？

> ID：15336187
> 
> 赞同：10
> 
> 时间：2013-03-11T10:24:42.063
> 
> 标签：angularjs, dust.js

我目前正在使用 Backbone 哲学，其中涉及到***dust.js***的模板样式。最近我遇到了 AngularJS，它使用自定义元素和属性扩展了 HTML 语法。

Backbone+dust.js 环境的缺点：

*   升级组件非常耗时。
*   模块规范和识别并不容易。

如果我将我的功能转移到 AngularJS 会有帮助还是感觉一样？

谁能向我解释这两个库之间的主要区别是什么，因为它们在某种程度上看起来很相似？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-11-15T22:47:04.857

dust.js 纯粹是一个模板模块。因此，它允许将 json 与模板组合以提供 html 输出。

Angular.js 是客户端框架，它允许将逻辑绑定到模板（您的页面）中定义的变量。

因此，使用dust.js，您负责决定何时通过模板运行json。通常，您在服务器（或客户端）上输入 json 并要求它呈现结果。

当模型（json）更改时，使用 angular.js，框架会根据需要重新渲染。该更改的触发器可能是用户操作（例如填写表单），也可能是由于从服务加载了一些新的 json。

如果你想要一个单页 JS 应用程序（想想 gmail），通常你会使用 angular.js。dust.js 可能更类似于具有多页面的传统方法，其内容由传入 json 驱动。

你甚至可以串联使用它们——服务器端渲染使用dust.js和angular.js中的动态客户端逻辑。

# android - 使用 ScrollView 时自定义设计的视图消失了

> ID：15336191
> 
> 赞同：1
> 
> 时间：2013-03-11T10:24:47.340
> 
> 标签：android, android-layout, android-scrollview

我正在使用一种`CalendarView`在 Android 中设计的自定义。当我`Scrollview`在布局中使用时，自定义设计`CalendarView`没有显示在屏幕上。

什么可能导致`CalendarView`消失？

我的布局是：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <Button
            android:id="@+id/NextMonth"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:text="@string/NextMonth" />

        <Button
            android:id="@+id/PreviousMonth"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:text="@string/PreviousMonth" />

        <TextView
            android:id="@+id/MonthText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:text="Month" />

        <TextView
            android:id="@+id/SundayText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/PreviousMonth"
            android:layout_marginLeft="25dp"
            android:text="@string/SundayText"
            android:textSize="10sp" />

        <TextView
            android:id="@+id/MondayText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/PreviousMonth"
            android:layout_marginLeft="22dp"
            android:layout_toRightOf="@+id/SundayText"
            android:text="@string/MondayText"
            android:textSize="10sp" />

        <TextView
            android:id="@+id/TuesdayText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/PreviousMonth"
            android:layout_marginLeft="20dp"
            android:layout_toRightOf="@+id/MondayText"
            android:text="@string/Tuesday"
            android:textSize="10sp" />

        <TextView
            android:id="@+id/WednesdayText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/PreviousMonth"
            android:layout_marginLeft="22dp"
            android:layout_toRightOf="@+id/TuesdayText"
            android:text="@string/Wednesday"
            android:textSize="10sp" />

        <TextView
            android:id="@+id/Thursday"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/PreviousMonth"
            android:layout_marginLeft="20dp"
            android:layout_toRightOf="@+id/WednesdayText"
            android:text="@string/ThurdayText"
            android:textSize="10sp" />

        <TextView
            android:id="@+id/Friday"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/PreviousMonth"
            android:layout_marginLeft="22dp"
            android:layout_toRightOf="@+id/Thursday"
            android:text="@string/FridayText"
            android:textSize="10sp" />

        <TextView
            android:id="@+id/Saturday"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/PreviousMonth"
            android:layout_marginLeft="27dp"
            android:layout_toRightOf="@+id/Friday"
            android:text="@string/SaturdayText"
            android:textSize="10sp" />

        <com.example.calendar_module.CalendarView
            android:id="@+id/calendar"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_below="@+id/NextMonth" />
    </RelativeLayout>

</ScrollView> 
```

我的 CalenderView 类文件：

```
package com.example.calendar_module;

import java.util.Calendar;

import android.app.ActionBar.LayoutParams;
import android.content.Context;
import android.content.res.Resources;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Rect;
import android.graphics.drawable.Drawable;
import android.util.AttributeSet;
import android.util.MonthDisplayHelper;
import android.view.MotionEvent;
import android.widget.ImageView;

public class CalendarView extends ImageView {

private static int WEEK_TOP_MARGIN = 0;
private static int WEEK_LEFT_MARGIN = 05;
private static int CELL_WIDTH = 20;
private static int CELL_HEIGH = 20;
private static int CELL_MARGIN_TOP = 05;
private static int CELL_MARGIN_LEFT = 29;
private static float CELL_TEXT_SIZE;

private static final String TAG = "CalendarView"; 
private String[] mDayString = {"Sun","Mon","Tue","Wed","Thu","Fri","Sat"};
private Calendar mRightNow = null;
private Drawable mWeekTitle = null;
private Cell mToday = null;
private Cell[][] mCells = new Cell[6][7];
private Cell[] mDayCells = new Cell[7];
private OnCellTouchListener mOnCellTouchListener = null;
MonthDisplayHelper mHelper;
Drawable mDecoration = null;

public interface OnCellTouchListener {
    public void onTouch(Cell cell);
    }

public CalendarView(Context context) {
    this(context, null);
}

public CalendarView(Context context, AttributeSet attrs) {
    this(context, attrs, 0);
}

public CalendarView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    mDecoration = context.getResources().getDrawable(R.drawable.typeb_calendar_today);      
    initCalendarView();
}

private void initCalendarView() {
    mRightNow = Calendar.getInstance();
    // prepare static vars
    Resources res = getResources();
    WEEK_TOP_MARGIN  = (int) res.getDimension(R.dimen.week_top_margin);
    WEEK_LEFT_MARGIN = (int) res.getDimension(R.dimen.week_left_margin);

    CELL_WIDTH = (int) res.getDimension(R.dimen.cell_width);
    CELL_HEIGH = (int) res.getDimension(R.dimen.cell_heigh);
    CELL_MARGIN_TOP = (int) res.getDimension(R.dimen.cell_margin_top);
    CELL_MARGIN_LEFT = (int) res.getDimension(R.dimen.cell_margin_left);

    CELL_TEXT_SIZE = res.getDimension(R.dimen.cell_text_size);
    // set background
        //      setImageResource(R.drawable.background);
    mWeekTitle = res.getDrawable(R.drawable.calendar_week);

    mHelper = new MonthDisplayHelper(mRightNow.get(Calendar.YEAR), mRightNow.get(Calendar.MONTH));

     }

private void initCells() {

    class _calendar {
        public int day;
        public boolean thisMonth;
        public _calendar(int d, boolean b) {
            day = d;
            thisMonth = b;
        }
        public _calendar(int d) {
            this(d, false);
        }
    };
    _calendar tmp[][] = new _calendar[6][7];

    for(int i=0; i<tmp.length; i++) {
        int n[] = mHelper.getDigitsForRow(i);
        for(int d=0; d<n.length; d++) {
            if(mHelper.isWithinCurrentMonth(i,d))
                tmp[i][d] = new _calendar(n[d], true);
            else
                tmp[i][d] = new _calendar(n[d]);

        }
    }

    Calendar today = Calendar.getInstance();
    int thisDay = 0;
    mToday = null;
    if(mHelper.getYear()==today.get(Calendar.YEAR) && mHelper.getMonth()==today.get(Calendar.MONTH)) {
        thisDay = today.get(Calendar.DAY_OF_MONTH);
    }

    //      // build cells
    Rect Bound = new Rect(CELL_MARGIN_LEFT, CELL_MARGIN_TOP, CELL_WIDTH+CELL_MARGIN_LEFT, CELL_HEIGH+CELL_MARGIN_TOP);
   //       for( int i=0 ; i < 7 ; i++ )
   //       {
   //           
  //            mDayCells[i] = new Cell(mDayString[i],new Rect(Bound),CELL_TEXT_SIZE);
  //            Bound.offset(CELL_WIDTH, 0);
  //            
  //        }
 //     
 //     Bound.offset(0, CELL_HEIGH);      // move to next row and first column
 //     Bound.left = CELL_MARGIN_LEFT;
 //     Bound.right = CELL_MARGIN_LEFT+CELL_WIDTH;
 //     

    for(int week=0; week<mCells.length; week++) {
        for(int day=0; day<mCells[week].length; day++) 
        {

            if(tmp[week][day].thisMonth) {
                if(day==0 || day==6 )
                    mCells[week][day] = new RedCell(tmp[week][day].day, new Rect(Bound), CELL_TEXT_SIZE);
                else 
                    mCells[week][day] = new Cell(tmp[week][day].day, new Rect(Bound), CELL_TEXT_SIZE);
            } else {

                mCells[week][day] = new GrayCell(tmp[week][day].day, new Rect(Bound), CELL_TEXT_SIZE);
            }

            Bound.offset(CELL_WIDTH, 0); // move to next column 

            // get today
            if(tmp[week][day].day==thisDay && tmp[week][day].thisMonth) {
                mToday = mCells[week][day];
                mDecoration.setBounds(mToday.getBound());
            }
        }
        Bound.offset(0, CELL_HEIGH); // move to next row and first column
        Bound.left = CELL_MARGIN_LEFT;
        Bound.right = CELL_MARGIN_LEFT+CELL_WIDTH;

    }       
  }

@Override
public void onLayout(boolean changed, int left, int top, int right, int bottom) {
  //        Rect re = getDrawable().getBounds();
 //     WEEK_LEFT_MARGIN = CELL_MARGIN_LEFT = (right-left - re.width()) / 2;
 //     mWeekTitle.setBounds(WEEK_LEFT_MARGIN, WEEK_TOP_MARGIN, WEEK_LEFT_MARGIN+mWeekTitle.getMinimumWidth(), WEEK_TOP_MARGIN+mWeekTitle.getMinimumHeight());

    initCells();
    super.onLayout(changed, left, top, right, bottom);
}
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    setMeasuredDimension(CELL_WIDTH, CELL_HEIGH);
}

 public void setTimeInMillis(long milliseconds) {
    mRightNow.setTimeInMillis(milliseconds);
    initCells();
    this.invalidate();
 }

public int getYear() {
    return mHelper.getYear();
}

public int getMonth() {
    return mHelper.getMonth();
}

public void nextMonth() {
    mHelper.nextMonth();
    initCells();
    invalidate();
}

public void previousMonth() {
    mHelper.previousMonth();
    initCells();
    invalidate();
}

public boolean firstDay(int day) {
    return day==1;
}

public boolean lastDay(int day) {
    return mHelper.getNumberOfDaysInMonth()==day;
}

public void goToday() {
    Calendar cal = Calendar.getInstance();
    mHelper = new MonthDisplayHelper(cal.get(Calendar.YEAR), cal.get(Calendar.MONTH));
    initCells();
    invalidate();
}

public Calendar getDate() {
    return mRightNow;
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    if(mOnCellTouchListener!=null){
        for(Cell[] week : mCells) {
            for(Cell day : week) {
                if(day.hitTest((int)event.getX(), (int)event.getY())) {
                    mOnCellTouchListener.onTouch(day);
                }                       
            }
        }
    }
    return super.onTouchEvent(event);
}

public void setOnCellTouchListener(OnCellTouchListener p) {
    mOnCellTouchListener = p;
}

@Override
protected void onDraw(Canvas canvas) {
    // draw background
    super.onDraw(canvas);
    mWeekTitle.draw(canvas);

    // draw cells
    for(Cell[] week : mCells) {
        for(Cell day : week) {
            day.draw(canvas);           
        }
    }

    // draw today
    if(mDecoration!=null && mToday!=null) {
        mDecoration.draw(canvas);
    }
}

public class GrayCell extends Cell {
    public GrayCell(int dayOfMon, Rect rect, float s) {
        super(dayOfMon, rect, s);
        mPaint.setColor(Color.LTGRAY);
    }           
}

private class RedCell extends Cell {

    public RedCell(int dayOfMon, Rect rect, float s) {
        super(dayOfMon, rect, s);
        mPaint.setColor(0xdddd0000);
    }           

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:32:51.177

我认为，`height`您的自定义`view`等于 == 0。尝试记录它。如果它是正确的，只需覆盖`onMeasure`并设置您的`view`.

还有 esle：为什么在 xml 中`height == match_parent`？你能想象它的样子`ScrollView`吗？）

**UPD：**好的，在你的情况下`height == 0`。你必须像这样`override onMeasure()`在你的自定义方法中`view`：

```
 @Override
 protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
     setMeasuredDimension(WIDTH, HEIGHT);
 } 
```

其中以像素为单位的宽度和高度值。

祝你好运！

# ruby-on-rails - 在 ruby 中发送异步 http 请求是否需要 EventMachine

> ID：15336193
> 
> 赞同：1
> 
> 时间：2013-03-11T10:24:57.540
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, multithreading, asynchronous

使用 Ruby 1.9.3 和 Rails 3.2，我的目标是

1) 启动 2 个异步 http 请求，`req1`并且`req2`.

2）当这些都在等待响应时，做一些其他的处理。

3）一旦我们收到回复，`req1`我们需要处理它并等待`req2`返回。如果`req2`先返回，则等待`req1`完成，然后在处理从返回的数据之前进行处理`req2`。

我试过用线程来做，但似乎在线程都返回响应之前我什么都做不了。我相信使用 EventMachine 可以完成我想要的事情，但如果有一个我不知道的更好的解决方案，我宁愿避免这样做。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T10:16:40.233

您可以使用赛璐珞：io 或纤维。

# c# - 如何从 FluentValidator 获取验证规则

> ID：15336195
> 
> 赞同：8
> 
> 时间：2013-03-11T10:25:00.513
> 
> 标签：c#, .net, validation, fluentvalidation, validationrules

给定一个扩展 AbstractValidator 并实现 IValidator 的验证器，我想得到它的规则。似乎没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T11:25:50.723

使用 IValidator 接口中的 GetEnumerator 方法。

通过枚举集合，您可以检查应用于每个属性的验证器。

但是，在处理 DelegatingValidators 时它变得相当复杂，因此我将带有 .WithState() 的自定义状态应用到我可以轻松理解的验证器上。

# sql - 我应该使用什么查询？

> ID：15336198
> 
> 赞同：-1
> 
> 时间：2013-03-11T10:25:13.697
> 
> 标签：sql, join, union

我的查询有条件，我想创建这样的查询结果

```
ID  Name    Address ID  Name    Address
1   Dono    x1  1   Dono    x1
2   Kasino  x2  2   Kasino  x2
3   Indro   x3  3   Indro   x3
4   Nano    x4  4   Nano    x4 
```

数据来自一个具有相同选择查询的表，但是当我使用`Union All`它时并没有给我想要的结果

这是我的查询

`select * from table x union all select * from table x`

我应该使用什么样的`select`陈述？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:27:06.067

```
select ID, Name, Address, ID, Name, Address from table x; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:27:33.497

你需要的是

```
select id, name, address, id, name, address from x 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T10:28:33.777

```
SELECT *, * FROM x 
```

这看起来很奇怪，但它确实有效。更奇怪的是，您对这样的结果的要求。

`UNION ALL`用于连接来自不同查询的***行，而不是列。***

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T10:30:40.093

您需要的查询是...

```
select ID, [Name], [Address], ID, [Name], [Address] from Your_Tab 
```

# java - 为什么 SimpleDateFormat 解析不正确的日期？

> ID：15336200
> 
> 赞同：39
> 
> 时间：2013-03-11T10:25:19.380
> 
> 标签：java, scala

我有字符串格式的日期，我想将其解析为实用日期。

```
var date ="03/11/2013" 
```

我将其解析为：

```
new SimpleDateFormat("MM/dd/yyyy").parse(date) 
```

但奇怪的是，如果我传递“03-08-201309 **hjhkjhk** ”或“ **03-88** -2013”​​或**43** -88-201378”，它不会抛出错误，它会解析它。

为此，我必须编写正则表达式模式来检查日期的输入是否正确。但为什么会这样？？

代码 ：

```
scala> val date="03/88/201309 hjhkjhk"
date: java.lang.String = 03/88/201309 hjhkjhk

scala> new SimpleDateFormat("MM/dd/yyyy").parse(date)
res5: java.util.Date = Mon May 27 00:00:00 IST 201309 
```

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-03-11T10:33:02.677

你应该使用`DateFormat.setLenient(false)`：

```
SimpleDateFormat df = new SimpleDateFormat("MM/dd/yyyy");
df.setLenient(false);
df.parse("03/88/2013"); // Throws an exception 
```

我不确定它会捕捉到你想要的*一切*——我似乎记得即使`setLenient(false)`它比你想象的更宽松——但它应该捕捉到无效的月份数字。

我认为它不会捕获尾随文本，例如“03/01/2013 sjsjsj”。您可能会使用`parse`接受 a的重载`ParsePosition`，然后在解析完成后检查当前解析索引：

```
ParsePosition position = new ParsePosition(0);
Date date = dateFormat.parse(text, position);
if (position.getIndex() != text.length()) {
    // Throw an exception or whatever else you want to do
} 
```

您还应该查看[Joda Time](http://joda-time.sf.net) API，它可能允许进行更严格的解释——无论如何，它通常是一个更清晰的日期/时间 API。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-07-27T09:37:42.153

[Jon Skeet 的答案](https://stackoverflow.com/a/15336373/5772882)是正确的，并且在 2013 年编写时是一个很好的答案。

但是，您在问题中使用的类`SimpleDateFormat`和`Date`，现在早已过时，所以如果今天有人遇到类似的问题，恕我直言，最好的答案是改用[现代 Java 日期和时间 API](https://docs.oracle.com/javase/tutorial/datetime/)。

很抱歉我不能编写 Scala 代码，所以你将不得不使用 Java。我在用

```
private static DateTimeFormatter parseFormatter
        = DateTimeFormatter.ofPattern("MM/dd/yyyy"); 
```

格式模式字母与您的问题相同，但含义略有不同。`DateTimeFormatter`正如我们将看到的，从字面上获取模式字母的数量。现在我们尝试：

```
 System.out.println(LocalDate.parse(date, parseFormatter)); 
```

结果：

*   `"03/11/2013"`被解析成`2013-03-11`预期的那样。我使用了现代`LocalDate`类，一个代表没有时间的日期的类，正是我们在这里需要的。
*   传递`"03/88/2013 hjhkjhk"`给一个`DateTimeParseException`带有消息`Text '03/88/2013 hjhkjhk' could not be parsed, unparsed text found at index 10`。相当精确，不是吗？但是，如果这是我们想要的，现代 API 具有仅解析部分字符串的方法。
*   `"03/88/201309"`给`Text '03/88/201309' could not be parsed at index 6`. 我们要求一个 4 位数的年份并给它 6 位数，这导致了反对。显然，它会在尝试将 88 解释为一个月中的某一天之前检测并报告此错误。
*   不过，它也反对 88 月中的某一天：`"03/88/2013"`给`Text '03/88/2013' could not be parsed: Invalid value for DayOfMonth (valid values 1 - 28/31): 88`. 再次，请享受该消息的信息量。
*   `"03-08-2013"`（用连字符而不是斜杠）给出`Text '03-08-2013' could not be parsed at index 2`，这并不奇怪。索引 2 是第一个连字符所在的位置。

Jon Skeet 解释说，过时的`SimpleDateFormat`可以是宽大的，也可以是不宽大的。这也是如此`DateTimeFormatter`，实际上它有 3 种而不是 2 种解析器样式，称为“宽松”、“智能”和“严格”。但是，由于许多程序员没有意识到这一点，我认为他们做出了一个不错的选择，即不将“lenient”设为默认值（“smart”是）。

如果我们想让我们的格式化程序宽松怎么办？

```
private static DateTimeFormatter parseFormatter
        = DateTimeFormatter.ofPattern("MM/dd/yyyy")
                .withResolverStyle(ResolverStyle.LENIENT); 
```

现在它也将`"03/88/2013"`, 解析为`2013-05-27`. 我相信老班也会这样做：从 3 月初算起 88 天得到 5 月 27 日。其他错误消息仍然相同。换句话说，它仍然反对未解析的文本、6 位数的年份和连字符。

**问：我可以在我的 Java 版本中使用现代 API 吗？**

如果至少使用 Java **6**，则可以。

*   在 Java 8 及更高版本中，新的 API 是内置的。
*   在 Java 6 和 7 中获得[ThreeTen Backport](http://www.threeten.org/threetenbp/)，这是新类的后向端口（对于 JSR-310 来说是 ThreeTen，现代 API 是首次定义的地方）。
*   在 Android 上，使用 ThreeTen Backport 的 Android 版本。它被称为 ThreeTenABP，我认为[这个问题有一个很好的解释：How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)。

# c - 结构程序编译没有错误，但在控制台窗口中没有结果？

> ID：15336201
> 
> 赞同：0
> 
> 时间：2013-03-11T10:25:23.977
> 
> 标签：c

嗨朋友们，练习程序编译为零错误但输出未显示在控制台窗口中...我认为我缺少一些东西...请指导我...谢谢！

```
struct card{

       char *face;
       char *suit;

       }aCard,deck[52], *cardPtr;

int main()
{
    struct card aCard;  //define one struct card Variable

   struct card *cardPtr; //define a pointer to  structure card

   cardPtr = &aCard;

   printf("%s\n %s\n",cardPtr->face, cardPtr->suit);

   system("PAUSE");
   return 0;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:29:13.863

`cardPtr->face`并且`cardPtr->suit`未初始化。因此，未定义的行为。分配内存，并在打印前分配值。

**编辑**

```
cardPtr->face = malloc(n * sizeof(char)); 
```

其中 n 是内存块可以容纳的字符数。在打印之前，您仍然需要在这个 char 数组中放入一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:31:11.080

您尚未将任何内容分配给`aCard`。将值分配给`aCard`，然后将其分配给`cardPtr`。

```
aCard.face="Hello";
aCard.suit="world";
cardPtr = &aCard; 
```

现在您可以看到打印的值。

# c# - 获取发布在 IP 上的肥皂消息

> ID：15336202
> 
> 赞同：0
> 
> 时间：2013-03-11T10:25:24.773
> 
> 标签：c#, asp.net, wcf, web-services, soap

我怎样才能在 IP 上发布肥皂消息，比如 12.23.421.12:3759

有什么方法可以读取此 IP 上的肥皂消息并可以从 XML 解析数据。

这是 WIRESHARK 工具的日志，我需要解析它

```
<SOAP-ENV:Envelope 
   xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" 
   xmlns:SOAP-ENC="http://schemas.xmlso ap.org/soap/encoding/" 
   xmlns:xsi ="http://www.w3.org/2001/XMLSche ma-instance" 
   xmlns:xsd="http://w ww.w3.org/2001/XMLSchema">
<SOAP-ENV:Body>
    <huawei:setSubscriberDetails xmlns:huawei="http://business.add.gsm.rcom.com">
        <paramSubscriberDetails>
            <IMEI>355030005026 8312</IMEI>
            <IMSI >405828210239016</IMSI>
            <prepaid>true</prepaid>
            <MSISDN>919646845889</MSISDN>
        </paramSubscriberDetails>
    </huawei:setSubscriberDetails>
</SOAP-ENV:Body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:13:41.367

尝试将服务引用添加到您的项目。这将创建一个类和一些可用于调用soap 服务的方法。

如果您只收到 Soap 消息，则使用 Load 方法将其加载到[XDocument中。](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)因为它是 XML，所以您可以通过以下方式获取信息

```
var xDoc = XDocument.Load("http://yourserver.com/yourservice/1");
var body = xDoc.Element("SOAP-ENV:Body");
var huaweiSubscriberDetails = new HuaweiSubscriberDetails(){
     Imei = body.Element("IMEI").Value,
     Imsi = body.Element("IMSI").Value,
     etc...
} 
```

我只是在没有 Visual Studio 的情况下做了这个，所以如果它包含错误，请不要把我钉在上面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T06:18:39.823

我认为您需要在 IP:Port 上安装 TCP Listener

[TcpListener MSDN](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener.aspx)

通常是 SOAP 响应返回到调用者地址（SOAP 请求）。如果 SOAP 请求来自您，则不需要 TcpListener。这是我的猜测:)

# java - 缺少子类的方法实现时的标准异常？

> ID：15336206
> 
> 赞同：3
> 
> 时间：2013-03-11T10:25:30.280
> 
> 标签：java, exception, methods

## 语境：

我有一个抽象类`SuperClass`，它有大量子类，每个子类都处理不同的业务对象，但方式相似。

我需要添加一些新功能，这些功能肯定在`SuperClass`. 这里明显的方法是`SuperClass`为属性添加一个抽象 getter，并让每个子类覆盖它，以便它可以在调用时发送正确的属性。

**问题是：由于害怕回归，我不允许更改我正在处理的其他子类的代码**。

所以我不能添加抽象方法，因为其他子类将不再编译。

因为只有我现在正在处理的对象需要这个新功能，所以我可以在 中声明一个标准的非抽象方法`SuperClass`，然后返回`null`那里。然后在我正在处理的子类中覆盖它，瞧。

## 问题：

如果没有正确阅读我在 Javadoc 中的警告的人曾经尝试从不同的子类调用这个新方法，由于 getter 没有被正确覆盖，它将产生意想不到的结果。与其在 中返回`null`（和意想不到的结果）`SuperClass`，我认为抛出异常对我的程序员同事来说会更优雅和有用。

**我可以定义一个定制的异常，但是是否有一些类似于“标准”异常的东西`YouForgotToImplementSomethingException`或`PleaseReadTheJavadocException`存在于“标准”异常中？**

## 编辑：

按照答案中的建议抛出一个`Error`不是我非常喜欢的东西，但也许在这里模拟编译器的行为可能有意义？对此有什么想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T10:27:43.023

我已经看到一些库为此使用[UnsupportedOperationException 。](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/UnsupportedOperationException.html)

> 抛出以指示不支持请求的操作。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-11T10:30:17.893

确切的事情是`java.lang.AbstractMethodError`。

# string - 如何通过字符向量与略有不同的字符串进行匹配

> ID：15336209
> 
> 赞同：1
> 
> 时间：2013-03-11T10:25:36.463
> 
> 标签：string, r, character, match

我正在尝试从另一个 data.frame 向 data.frame 添加几列：

我要从中添加列的data.frame：

```
 head(fix)[1:2,]
Year                                         Name Moders.hjälp. Utg.Sjukvård. Antal.Fall.Moderskapshjälp. Antal.Dagar.Moderskapshjälp. Antal.Dödsfall.
1 1921                                      Allians          2003            NA                          42                         1603              43
2 1921 Bageri- och konditoriindustriarb. I Stocholm            NA            NA                          NA                           NA              10 
```

换句话说，我想添加`fix[,3:ncol(fix)]`：

```
head(data)[1:4,]
    Year                                                 Name Delägare.män. Delägare.kvinnor. Sjukdomsfall.män.
92  1921                                         Sbk. Allians          2416              1610               526
198 1921 Bageri- och Konditoriindustriarb. I Stockholm sbh-k.           143                13                19 
```

通过匹配`Year`列和`Name`列。

那`problem`就是：

和上面的列`Name`的名称略有不同（即VS ）。我找不到匹配部分字符串以找到相似之处的正确解决方案。我尝试使用但没有成功...`fix``data``Allians``Sbk. Allians``match`

这是`dput`

`dput(head(fix)[1:2,])`

```
structure(list(Year = c(1921L, 1921L), Name = c("Allians", "Bageri- och konditoriindustriarb. I Stocholm"
), Moders.hjälp. = c(2003, NA), Utg.Sjukvård. = c(NA_integer_, 
NA_integer_), Antal.Fall.Moderskapshjälp. = c(42L, NA), Antal.Dagar.Moderskapshjälp. = c(1603L, 
NA), Antal.Dödsfall. = c(43L, 10L)), .Names = c("Year", "Name", 
"Moders.hjälp.", "Utg.Sjukvård.", "Antal.Fall.Moderskapshjälp.", 
"Antal.Dagar.Moderskapshjälp.", "Antal.Dödsfall."), row.names = 1:2, class = "data.frame") 
```

`dput(head(data)[,c(1:2,11:13)])`

```
structure(list(Year = c(1921L, 1924L, 1921L, 1924L, 1921L, 1924L
), Name = c("Sbk. Allians", "Sbk. Allians", "Bageri- och Konditoriindustriarb. I Stockholm sbh-k.", 
"Bageri- och Konditoriindustriarb. I Stockholm sbh-k.", "Bergsunds verkstads arbetares sbk", 
"Bergsunds verkstads arbetares sbk"), Delägare.män. = c(2416L, 
3896L, 143L, 129L, 280L, 289L), Delägare.kvinnor. = c(1610L, 
4300L, 13L, 13L, 2L, NA), Sjukdomsfall.män. = c(526L, 1084L, 
19L, 34L, 100L, 97L)), .Names = c("Year", "Name", "Delägare.män.", 
"Delägare.kvinnor.", "Sjukdomsfall.män."), class = "data.frame", row.names = c(92L, 
93L, 198L, 199L, 222L, 223L)) 
```

非常适合任何建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T10:40:33.887

您可以使用`agrep`：

```
sapply(data$Name, function(x) agrep(x, fix$Name, max.distance=0.4)) 
```

它将 data$Name 与 fix$Name 匹配。你也可以玩一下 max.distance （也许在一个循环中）。之后你可以合并/索引/等你想要的匹配...

**更新**

这些方面的东西应该为你做这项工作：

```
# match
matches <- sapply(data$Name, function(x) agrep(x, fix$Name, max.distance=0.4))
# clean match
matches_cleaned <- sapply(matches, function(x) ifelse(length(x) > 0,x, NA))
# add matched names to data
data$fix_names <- fix$Name[matches_cleaned]

# merge
merge(data, fix, by.x = c('Year', 'fix_names'), by.y = c('Year', 'Name')) 
```

# android - fork() 返回现有进程的 pid

> ID：15336210
> 
> 赞同：0
> 
> 时间：2013-03-11T10:25:45.787
> 
> 标签：android, c, linux-kernel, fork, init

我正在尝试修补 Android 的 init 以允许卸载 Android 并在已初始化的硬件上加载 Ubuntu。[这](http://dl.dropbox.com/u/100376233/Linux-shooteru/DAY1/init.patch)是我正在尝试的补丁。

但是在 kill -USR1 1 内核出现恐慌并且重新启动后，我在 RAM 控制台中看到了下一个：

```
[   96.671325] init: Got SIGUSR1, trying to execve /system/xbin/ubuntu.sh
[   96.680786] init: fork done, pid=1
[   96.685089] [K] Kernel panic - not syncing: Attempted to kill init!
[   96.685150] [<c010ac50>] (unwind_backtrace+0x0/0xe0) from [<c0596408>] (panic+0x6c/0x198)
[   96.685150] [<c0596408>] (panic+0x6c/0x198) from [<c017e1d0>] (do_exit+0x98/0x650)
[   96.685180] [<c017e1d0>] (do_exit+0x98/0x650) from [<c017ea34>] (do_group_exit+0x84/0xc0)
[   96.685211] [<c017ea34>] (do_group_exit+0x84/0xc0) from [<c017ea80>] (__wake_up_parent+0x0/0x18)
[   96.685241] CPU1: stopping
[   96.685333] [<c010ac50>] (unwind_backtrace+0x0/0xe0) from [<c0109e2c>] (handle_IPI+0xd4/0x140)
[   96.685424] [<c0109e2c>] (handle_IPI+0xd4/0x140) from [<c01053cc>] (__irq_svc+0x4c/0xe4)
[   96.685516] [<c01053cc>] (__irq_svc+0x4c/0xe4) from [<c01058c0>] (ret_fast_syscall+0x0/0x30)
[   96.785858] subsystem-fatal-8x60: Q6 NMI was sent.
[   96.790924] [K] Rebooting in 5 seconds..
[  101.798248] [K] Going down for restart now 
```

fork() 如何将 pid==1（子进程的）返回给已经有 pid==1 的父进程 init？

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:19:28.827

`strerror`在信号处理程序中是不安全的，所以从那里开始！:-)

# android - 如何从root重新启动adb到用户模式？

> ID：15336215
> 
> 赞同：53
> 
> 时间：2013-03-11T10:26:03.577
> 
> 标签：android, adb, root

关于亚行的基本问题。

`adb root`以 root 身份重新启动 adb。但我想要的是在一段时间后重新启动它给用户。

我尝试了以下方法：

```
adb kill-server
adb start-server 
```

不工作..

`ps -A`-> 记下 adb 的进程号并将其杀死.. 即使这样也没有用。最后我正在重新启动我的设备。有什么办法可以从根 adb 回到一般 adb？

谢谢你。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-11T16:33:05.910

`adb kill-server`并且`adb start-server`只控制`adb`PC端的守护进程。`adbd`恢复通过以下`service.adb.root`方式完成的属性更改后，您需要在设备本身上重新启动守护程序`adb root`：

```
~$ adb shell id
uid=2000(shell) gid=2000(shell)

~$ adb root
restarting adbd as root

~$ adb shell id
uid=0(root) gid=0(root)

~$ adb shell 'setprop service.adb.root 0; setprop ctl.restart adbd'

~$ adb shell id
uid=2000(shell) gid=2000(shell) 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2015-12-22T20:37:21.697

如果您使用`adb root`，您将收到以下消息：

```
C:\>adb root
* daemon not running. starting it now on port 5037 *
* daemon started successfully *
restarting adbd as root 
```

要退出 root 模式，您可以使用：

```
C:\>adb unroot
restarting adbd as non root 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-03-17T18:58:33.183

试试这个以确保你得到你的外壳：

输入 adb shell（根）。然后在下面输入命令。

```
stop adbd && setprop service.adb.root 0 && start adbd & 
```

该命令将`stop adbd`，然后`setprop service.adb.root 0`if`adbd`已成功`stop`ped，最后 re`start adbd`应`.root`已成功将属性设置为 0。所有这一切都将在后台完成，这要归功于最后一个`&`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-23T01:30:00.837

我想为@user837048 的回答添加更多解释。在我的 OSX Yosemite 和 Galaxy S3 上，它已植根并使用固件`CyanogenMod 11`，`KitKat`我已经完成了以下程序`Enable`和`Disable`root 提示。

请确保在下面

*   在您的系统上

    *   确保您已安装`Android SDK`并设置了二进制文件的路径。`which adb`在你的外壳上输入。它必须给你一些结果。 `$ which adb /Applications/Android Studio.app/sdk/platform-tools/adb`
*   在您的手机上

    *   设置 > 开发者选项 > Android 调试 =`ON`
    *   设置>开发人员选项>根访问=`Apps and ADB`

*如果您没有`Developer Options`在设置中看到，请转到设置 > 关于手机。向下滚动`Build number`并点按 7 次。我知道这很疯狂。但相信我它有效：D*

通过 USB 数据线连接您的手机。在`computer's`终端上输入

```
$ adb shell 
```

您将看到类似的提示，**如果您的手机上显示任何提示，请点击“始终信任”和“确定”以信任连接**

```
shell@m0:/ $ 
```

现在输入

```
shell@m0:/ $ id
uid=2000(shell) gid=2000(shell) groups=1004(input),1007(log),1011(adb),1015(sdcard_rw),1028(sdcard_r),3001(net_bt_admin),3002(net_bt),3003(inet),3006(net_bw_stats) context=u:r:shell:s0 
```

看你是`not root`

现在从 shell 退出，这将回退到`computer's prompt`

```
shell@m0:/ $ exit 
```

现在激活root

```
$adb shell
* daemon not running. starting it now on port 5037 *
* daemon started successfully *
root@m0:/ # 
```

**哇..你是根**

```
root@m0:/ # id
uid=0(root) gid=0(root) context=u:r:shell:s0 
```

*我尝试了许多解决方案以返回`normal non root prompt`. 但除了@user837048 的解决方案外没有用。*

```
root@m0:/ # stop adbd && setprop service.adb.root 0 && start adbd &
[1] 32137
root@m0:/ #
$ 
```

这可能会使您退出`Adb prompt`正常提示。现在再次连接。

```
$ adb shell
shell@m0:/ $ 
```

**嗯..你是非root**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-30T07:18:45.337

如需快速步骤，只需检查**摘要**。如果有兴趣了解详细信息，请继续阅读下文。

adb 是一个守护进程。这样做`ps adb`我们可以看到它的过程。

```
shell@grouper:/ $ ps adb
USER     PID   PPID  VSIZE  RSS     WCHAN    PC        NAME
shell     133   1     4636   212   ffffffff 00000000 S /sbin/adbd 
```

我刚刚检查了当 adb 以 root 和用户身份运行时它使用了哪些附加属性变量。

**adb 用户模式：**

```
shell@grouper:/ $ getprop | grep adb                                         
[init.svc.adbd]: [running]
[persist.sys.usb.config]: [mtp,adb]
[ro.adb.secure]: [1]
[sys.usb.config]: [mtp,adb]
[sys.usb.state]: [mtp,adb] 
```

**adb 根模式：**

```
shell@grouper:/ # getprop | grep adb                                         
[init.svc.adbd]: [running]
[persist.sys.usb.config]: [mtp,adb]
[ro.adb.secure]: [1]
[service.adb.root]: [1]
[sys.usb.config]: [mtp,adb]
[sys.usb.state]: [mtp,adb] 
```

我们可以看到这`service.adb.root`是我们做 adb root 时出现的一个新的 prop 变量。

因此，要从 root 将 adb 改回用户，我继续将其设为 0

```
setprop service.adb.root 0 
```

但这并没有改变什么。

然后我继续并终止了该过程（打算重新启动该过程）。`pid`我设备中的进程`adbd`是`133`

```
kill -9 133 
```

杀死进程后，我自动退出了 shell。

我又做`adb shell`了一次，它是在用户模式下。

**概括 ：**

所以，我们有 3 个非常简单的步骤。

1.  以 root 身份输入 adb shell。
2.  setprop service.adb.root 0
3.  杀死 -9`(pid of adbd)`

完成这些步骤后，只需重新输入 shell，`adb shell`您就会以用户身份回到您的设备上。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-05-02T04:45:26.423

这是一个非常普遍的问题。

一种解决方案是**杀死 adb 服务器**并通过命令提示符**重新启动它。**有时这可能无济于事。

只需去窗口任务管理器杀死 adb 进程并重新启动 Eclipse。

将完美工作:)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-07-12T15:04:53.703

我一直在使用基本操作系统 loki 来解决这个问题。就像一天一样，我使用以下命令解决了它重新启动 adb 的问题：

```
./adb kill-server 
```

和

```
./adb start-server 
```

*您需要在 Sdk 文件夹 > 平台工具中*

现在，重新启动您的手机，这将重新启动您手机中的所有进程。

这就是我修复它的方式。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-07-23T01:45:15.833

如果您无法访问 Android 设备监视器上的数据文件夹

**命令**

```
C:\Users\bscis\AppData\Local\Android\sdk\platform-tools
(Where you located sdk folder)

C:\Users\bscis\AppData\Local\Android\sdk\platform-tools>adb shell
generic_x86:/ $

C:\Users\bscis\AppData\Local\Android\sdk\platform-tools>adb kill-server
C:\Users\bscis\AppData\Local\Android\sdk\platform-tools>adb start-server
* daemon not running. starting it now at tcp:5037 *
* daemon started successfully *

C:\Users\bscis\AppData\Local\Android\sdk\platform-tools>adb root

C:\Users\bscis\AppData\Local\Android\sdk\platform-tools> 
```

工作正常......

# primefaces - p:fileDownload primefaces 3.5 和 Liferay 6.1 ga1，不支持我的类型

> ID：15336217
> 
> 赞同：2
> 
> 时间：2013-03-11T10:26:05.323
> 
> 标签：primefaces, download, liferay, data-export

作为主题标题，当我尝试将我的数据导出到 Excel 文件时，然后允许客户端用户下载它。我的代码抛出不支持我的类型 application/vnd.ms-excel。

尝试使用 p:dataExporter，失败。

尝试使用 p:fileDownload，失败。

我进行了一些搜索，发现 primefaces 文件下载和数据导出器不支持 liferay 门户，也许直到 6.1 ga1 版才可能实现？

请问这里有其他解决方案吗:-？

ps：我从 primefaces 演示页面复制代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T02:55:12.440

仍然可以使用以下解决方法。

```
[Public StreamData getFile() {
  // 1\. initialize the fileInputStream
  // 2\. get Liferay's ServletResponse
  // 3\. write the file into the outputStream
  // 4\. return null to this method
}][1] 
```

有关更详细的示例代码，请参阅 [http://kianworknotes.blogspot.com/2013/03/primefaces-filedownload-in-liferay.html#more](http://kianworknotes.blogspot.com/2013/03/primefaces-filedownload-in-liferay.html#more)

如果您使用 POI 生成 Excel。在第 3 步中，只需编写以下内容

```
workbook.write(outputstream) 
```

# javascript - 如何调试随机黄瓜故障？

> ID：15336218
> 
> 赞同：0
> 
> 时间：2013-03-11T10:26:05.833
> 
> 标签：javascript, ruby, debugging, cucumber

我遇到了一个黄瓜测试套件的问题，我想不出任何调试它的方法。

我们有一套相当大的黄瓜特性，它们都传递给开发机器。问题是，当我们在 ci 服务器上运行整个黄瓜套件时，有几个场景失败了，并且当场景尝试填写表格时（显然不在页）。由于随机失败，我认为这是 ajax 请求的时间问题，但似乎并非如此，因为添加非常大的睡眠（尝试了从 1 到 60 秒的所有内容）并没有改变任何东西。这个场景更有趣，因为还有另外 3 个场景运行相同的步骤，但它们以相同的顺序在第一个步骤上失败，并且这些通过，除非我删除第一个场景，在这种情况下，第一个运行这些步骤的步骤是一个失败的。

有什么技巧可以调试黄瓜上的这种怪异现象吗？功能（请记住，这些场景总是在开发机器上传递，问题出在 ci 服务器上）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:10:40.813

我也有机会调试仅在 CI 上重现的间歇性测试失败。根据我的经验，问题总是归结为几个基本原因：

1.  前端的竞争条件。例如，在 xhr 回调之前启用输入表单会添加默认值。
2.  “乐观”从前端写入。有时，前端工程师通过忽略结果来使涉及 PUT/POST 请求的操作更具响应性。在这种情况下，没有办法让 Cucumber 等到请求完成，因此针对数据库中状态更改的测试将与应用程序竞争。
3.  对测试夹具中不可用的资源的请求。例如，对 3rd 方 API 的请求可能会被 CI 阻止。有时 URL 在测试环境中的构造不正确，特别是当它们是“手工”构建的，而不是使用 Rails 帮助器时。

间歇性 Cucumber 故障总是难以调试。不要放弃！努力弄清楚如何构建一个可测试的、无竞争的前端是值得的。您可以使用 capybara-webkit 调试仅 CI 故障。获取 javascript 控制台输出以在 CI 上打印出来，然后您可以将打印添加到您的 javascript 以跟踪其状态直到测试失败点。您还可以破解 capybara-webkit 以打印有关前端发出的请求的信息。这是一个例子：[https ://github.com/joshuanapoli/capybara-webkit/commit/96b645073f7b099196c5d3da4653606e98a453e4](https://github.com/joshuanapoli/capybara-webkit/commit/96b645073f7b099196c5d3da4653606e98a453e4)

# javascript - 如何将数据库值附加到 JSON 数据

> ID：15336219
> 
> 赞同：0
> 
> 时间：2013-03-11T10:26:06.747
> 
> 标签：javascript, json

我有一个 JSON 列出数据库中的值。下面是数据库中 2 行的 JSON 数据。

```
[{"Name":"P1","Description":"pd1","Value":"v1","Attribute":"a1"},{"Name":"P1","Description":"pd1","Value":"v2","Attribute":"a2"}] 
```

数据库值是左连接查询的结果。只有“值”和“属性”字段不同。我可以将该字段附加到 JSON 而不是多组记录吗？我知道有“推动”来做到这一点，但我不知道在我的代码中的何处以及如何使用它。下面是从 db 获取值并序列化值的代码。

```
GetProfileDataService GetProfileDataService = new BokingEngine.MasterDataService.GetProfileDataService();
IEnumerable<ProfileData> ProfileDetails = GetProfileDataService.GetList(new ProfileSearchCriteria { Name = strProfileName });
JavaScriptSerializer javaScriptSerializer = new JavaScriptSerializer();
string strSerProfileDetails = javaScriptSerializer.Serialize(ProfileDetails);
context.Response.ContentType = "text/json";
context.Response.Write(strSerProfileDetails); 
```

下面是我的getJSON

```
$(document).ready(function () {
    $.getJSON('ProfileHandler.ashx', { 'ProfileName': 'Profile 1' }, function (data) {
        $.each(data, function (k, v) {
            alert(v.Attribute+' : '+v.Value);               
        });            
    });
}); 
```

请在这里帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:18:44.277

您可以做几件事。

将值和属性存储为数组：

`[{"Name":"P1","Description":"pd1","Value":["v1", "v2"],"Attribute":["a1", "a2"]}]`

或者将它们存储为“符号”分隔的字符串：

`[{"Name":"P1","Description":"pd1","Value":"v1;v2"],"Attribute":"a1;a2"]}]`

为了使用第一种情况，您必须尝试弄清楚如何格式化 ProfileDetails 以便让 javaScriptSerializer.Serialize 正确解析它。您可能必须首先转换您的数据才能使其正常工作（即将*值*和*属性*转换为数组）。

对于第二种情况，您可以修改您的 GetProfileDataService.GetList 方法，以便将值和属性合并到符号分隔的字符串中（如下所示：[GROUP BY to combine/concat a column](https://stackoverflow.com/questions/15154644/sql-group-by-to-combine-concat-a-column/15154723#comment21339144_15154723)）

# iphone - iOS 中的 URL 方案

> ID：15336220
> 
> 赞同：0
> 
> 时间：2013-03-11T10:26:11.403
> 
> 标签：iphone, ios

我在我的应用程序中添加了一个 URL 方案。URL 方案是`testapp://`. `testapp://`当我在 Safari 中输入文本并点击返回时，它启动了我的应用程序。

然后我用`testapp://placeid=12`. 这是在 iPad 中启动 TestApp，但在 iPhone 中，我得到`Cannot Open Page`并且无法测试。

我可以通过`placeid=12`as URL 查询。但我想知道的是，为什么它不能单独在 iPhone 中打开。

对此有任何想法吗？

**注意：**无论设备类型如何，这似乎都是 iOS 问题。这是 iOS 6 及更高版本的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:50:26.883

它可能不起作用，因为 testapp://placeid=12 不是有效的 URL。您还需要一个域地址，例如 testapp://localhost/query?placeid=12。'=' 字符可能会导致错误。

我现在无法测试它，所以请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:59:12.673

会不会是每台设备都运行不同的 iOS 版本？

如果是这样，请根据版本考虑一些细节。例如，如果您阅读**[Advanced App Tricks](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/AdvancedAppTricks/AdvancedAppTricks.html)**，有一个部分可能会对您有所帮助：

> **处理 URL 请求**
> 
> 具有自己的自定义 URL 方案的应用程序必须能够处理传递给它的 URL。所有 URL 都会在启动时或在您的应用程序运行时或在后台传递给您的应用程序委托。要处理传入的 URL，您的委托应实现以下方法：
> 
> *   使用[application:willFinishLaunchingWithOptions:](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/application:willFinishLaunchingWithOptions:)和[application:didFinishLaunchingWithOptions:](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/application:didFinishLaunchingWithOptions:)方法来检索有关 URL 的信息并决定是否要打开它。如果任一方法返回 NO，则不会调用您应用的 URL 处理代码。
> *   在 iOS 4.2 及更高版本中，使用[application:openURL:sourceApplication:annotation:](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/application:openURL:sourceApplication:annotation:)方法打开文件。
> *   在 iOS 4.1 及更早版本中，使用[application:handleOpenURL:](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/application:handleOpenURL:)方法打开文件。

希望这可以帮助。否则，我真的会建议你坚持[标准](http://www.idev101.com/code/Objective-C/custom_url_schemes.html)。它会让你的生活更轻松:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-02T01:41:02.780

如问题说明中所述，这是 iOS 6 的 Safari 浏览器行为。进入 Safari 时，URL 的主机中不能有“=”。

相反，我通过以下方式解决了这个问题。

在邮件中发送 URL，从 Mail 中，如果我单击 URL，应用程序就会启动。但重要的一点是，我必须解析 URL 主机才能获取值。

# menu - android在菜单栏中启用默认的后退按钮

> ID：15336226
> 
> 赞同：0
> 
> 时间：2013-03-11T10:26:31.393
> 
> 标签：menu

我想启用默认的android后退按钮，我使用

```
getActionbar().setDisplayHomeAsUpEnabled(true); 
```

在我的应用程序中，但后退功能不起作用，我使用片段事务替换我的活动中的片段，我也使用了 addtoBackStack()，我的设备后退按钮正在工作，但 android 默认后退按钮在我的应用程序中不起作用。

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:06:53.043

不要在单击帮助菜单时完成您的活动。一旦您调用完成，该活动将被销毁并从活动堆栈中删除（因此当您按下返回时，它不再是以前的活动）。

您应该只在活动真正完成时才完成活动（即用户已经完成了活动应该让他们做的任何事情）。您需要将应用程序中的一组活动视为一个堆栈。每次启动一个活动时，它都会被放置在堆栈的顶部。如果您希望后退按钮带您回到上一个活动，请不要完成它（因为每次调用完成它都会将其从堆栈中删除）。每次用户回击时，当前的活动都会从堆栈中“弹出”，系统会恢复它下面的活动。如果用户按下后堆栈中没有来自您的应用程序的更多活动，则您的应用程序完成并且用户返回主屏幕。

# javascript - 从没有密钥的 JSON 中捕获数据

> ID：15336230
> 
> 赞同：0
> 
> 时间：2013-03-11T10:26:45.083
> 
> 标签：javascript, html, json

我的问题是，如果在 JSON 文件的开头没有密钥，我无法打印从服务器收到的内容，这是我当前的代码...

```
 $.getJSON("http://10.21.26.251:8080/Transport/getMessage?user=1", function(data) {
    var output = "<tr>"; 
    for ( var i in data.item) {
    output += "<td>"
    + "-- "
    + data.item[i].messageId
    + " --<br>-- "
    + data.item[i].userId
    + " --<br>"
    + data.item[i].messageContent
    + "<br></br></td>";
    }
    output += "</tr>";
    document.getElementById("placeholder").innerHTML = output;
    }); 
```

但这取决于收到的具有项目名称的代码，当前的 JSON 是这样收到的……我无法控制收到的内容

```
 {
    "messageId": "d1e5afa5-5153-49b7-ae73-3501fbed1b68",
    "userTo": {
    "userId": 1,
    "userName": "COE",
    "userLastCheckedDate": 1362994638139
    },
    "userFrom": {
    "userId": 2,
    "userName": "Man",
    "userLastCheckedDate": 1362994638139
    }
    etc... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:59:41.347

很难用这么小的样本来了解 json 模式，但假设它是一个电子邮件列表，我会试试这个：

```
$.getJSON("http://10.21.26.251:8080/Transport/getMessage?user=1", function(data) {
var output = "<tr>"; 
for ( var i = 0; i < data.length;i++) {
output += "<td>"
+ "-- "
+ data[i].messageId
+ " --<br>-- "
+ data[i].userFrom.userId
+ " --<br>"
+ data[i].messageContent
+ "<br></br></td>";
}
output += "</tr>";
document.getElementById("placeholder").innerHTML = output;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:03:35.723

如果我理解你想要做什么，你基本上想在不知道它们的名字的情况下遍历 JSON 对象属性。另外（如果我错了，请纠正我），您的对象似乎是一个对象数组。你可以这样做：

```
var output = "<tr>";

for (var i=0; i<data.length; i++) { // Loop through the main array of objects

    output += "<td>";

    $.each(data[i], function(key, val) { // Loop through the properties of the current object
        output += "-- "
            + val
            + " --<br>";
    });

    output += "</br></td>";
}
output += "</tr>";
document.getElementById("placeholder").innerHTML = output; 
```

# asp.net-mvc - 我的购物车有什么更好的解决方案？

> ID：15336232
> 
> 赞同：0
> 
> 时间：2013-03-11T10:26:47.680
> 
> 标签：asp.net-mvc, session, shopping-cart

我目前正在为我的网上商店的购物车编程，我想知道最好的解决方案是什么。

我目前有 5 个会话，其中包括用户为节省 sql 压力而添加的项目的数据。但是我刚刚读到使用会话对性能不利，并且服务器在达到最大值时会破坏会话（我不知道最大值是多少，我不希望数百名用户同时购买商品时间，只有少数）。

结论，每次用户访问购物车时，使用 5 个会话保存产品数据或使用查询获取产品的所有信息，哪个更好？

也欢迎任何其他建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:32:03.900

我认为最好的方法是将购物车保存到数据库

因此，用户将拥有亚马逊上的永久图表。

您可以对每个购物车进行数据挖掘。

如果用户已登录，您可以使用用户 ID/密钥保存购物车

如果用户是匿名用户，您可以使用 cookie 来识别匿名用户

如果您不喜欢永久购物车，您可以在已保存的购物车上添加时间戳

会话在配置的超时后或用户关闭其浏览器或应用程序池回收时结束。

我将使用数据库查询缓存来保存产品信息而不是会话

无论如何，会话或缓存“压力”服务器内存，数据库查询压力 sql

无论如何，有人会感到压力。恕我直言，最好的方法是缓存 sql 响应，这样您就可以平衡内存和查询之间的压力

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:42:36.873

如果您只希望少数用户在任何时候从您的网上商店购买商品，那么保存到数据库应该没问题。

如果您担心数据库压力过大，可以将用户的临时购物车保存到 cookie 中。这使服务器不必担心会话——如果你需要它们，这将允许网络农场——并允许你利用客户的机器通过 JavaScript 处理基本的事情。

# php - 单词提取

> ID：15336233
> 
> 赞同：-4
> 
> 时间：2013-03-11T10:26:49.553
> 
> 标签：php, string, text-extraction

我有一个 txt 文件，结构如下：

```
*ABC123 a ABC123 ,
    / comment here
    DEF452 hju
then ABC123 h
   DEF452 hh,
   6HH , 7JJ , 8LL,
   Z123 enf of file
\ \

*ABC124 a ABC124 ,
    / comment here
    DEF4552 hju
then ABC124 h
   DEF4566 hh,
   62HH , 78JJ , 128LL,
   Z124 enf of file
\ \ 
```

我需要的是提取这个“代码”块的一些片段，它的长度是可变的，并且每次都有不同的值。

任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:40:54.570

```
preg_match_all('/[a-z]+:\/\/\S+/', $string, $matches); 
```

这是一种简单的方法，适用于很多情况，而不是全部。所有匹配项都放在 $matches 中。

这是在 PHP 中使用正则表达式的链接：[http](http://www.regular-expressions.info/php.html) ://www.regular-expressions.info/php.html 。此外，这里是电子邮件正则表达式的链接：[http ://www.regular-expressions.info/email.html](http://www.regular-expressions.info/email.html)

祝你好运。

# javascript - 为什么在闭包中使用 var slice 而不是 Array.prototype.slice？

> ID：15336238
> 
> 赞同：0
> 
> 时间：2013-03-11T10:26:55.567
> 
> 标签：javascript, closures

在**Oreilly.JavaScript.The.Good.Parts**书中，有一段代码是这样的：

```
Function.method('curry', function () { 
    var slice = Array.prototype.slice, 
        args = slice.apply(arguments),
        that = this; 
    return function () {
         return that.apply(null, args.concat(slice.apply(arguments)));
     };
}); 
```

我想知道为什么不直接使用 Array.prototype.slice 而不是私有变量，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:33:06.957

我认为这是一个很好的，不是必须的，即任何一种方式都可以。

使用别名阅读起来稍微容易一些（因为要解析的代码更少）。

如果经常调用 curried 方法，那么别名将提高性能，因为 JavaScript 不必通过复杂的规则来取消引用`Array`然后`prototype`.

最后，有人可能会`Array.prototype.slice`在稍后覆盖（不太可能）或者作者可能已经为这个函数调用覆盖了它（也不太可能）。因此，该代码确保当您稍后调用它时，它的行为就像您立即执行它一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:30:30.273

它可以在没有定义的情况下工作`slice`，但是在这个函数中有两个调用`Array.prototype.slice`，所以最好定义一个“快捷方式”，以使它看起来更好（更短的代码，更少的冗余）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T10:31:47.737

从性能的角度来看，`slice`在下面的代码中使用了两次。使用快捷方式将减少要键入的代码的长度和查找过程。

如果您在局部变量中有切片，则访问它时需要进行单一查找：

*   getVar“切片”

相比之下，使用`Array.prototype.slice`通常会转化为几个“指令”：

*   getVar“数组”
*   getMember“原型”
*   获取成员“切片”

`slice`从缩小的角度来看，像谷歌编译器这样的工具也将通过将局部变量（在这种情况下）重命名为单个字母变量来进一步减小代码大小。`Array.prototype.slice`对于在范围之外访问的全局变量（在这种情况下），这不会发生。

从功能的角度来看，`Array.prototype.slice`是动态解析的，因此可以稍后更改。将本地引用分配给该`Array.prototype.slice` **时间点指向**的函数对象可确保没有其他代码可以更改您现在自己持有的函数引用。

# java - JBoss AS 6 - log4j 配置

> ID：15336241
> 
> 赞同：1
> 
> 时间：2013-03-11T10:26:57.630
> 
> 标签：java, configuration, log4j, jboss6.x

我已经从迁移`JBoss 4.2.3`到`JBoss AS 6`. 在`JBoss 4.2.3`我已配置`log4j`为使用`log4j.properties`. 当前的日志记录（在 JBoss AS 6 上）除了默认`server.log`和`boot.log`. 请帮我找出为什么我没有得到其他日志。

这是我的项目结构：

```
/src
 `--log4j.properties
/META-INF
 `--jboss-deployment-structure.xml
/lib (added to classpath)
 `--log4j.jar 
```

`jboss-deployment-structure.xml`由于阅读了我在该问题上发现的内容，我添加了迁移后的内容。不幸的是，这对我不起作用。以下是配置：

**jboss-部署-结构.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<jboss-deployment-structure>
    <deployment>
        <exclusions>
            <module name="org.apache.log4j" />
            <module name="org.jboss.logging" />
            <module name="org.jboss.logmanager" />
            <module name="org.jboss.log4j.logmanager" />
        </exclusions>
    </deployment>
</jboss-deployment-structure> 
```

**log4j.properties**

```
# Set root category priority to INFO and its only appender to CONSOLE.
log4j.rootCategory=DEBUG, CONSOLE, LOGFILE

# Set the enterprise logger category to FATAL and its only appender to CONSOLE.
#log4j.logger.org.apache.axis.enterprise=FATAL, CONSOLE

# Categories
log4j.category.org.hibernate=INFO
log4j.category.org.hibernate.SQL=DEBUG

# CONSOLE is set to be a ConsoleAppender using a PatternLayout.
log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender
log4j.appender.CONSOLE.Threshold=DEBUG
log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout
log4j.appender.CONSOLE.layout.ConversionPattern=[%F->%M() line%L] %d{dd-MM-yyyy HH:MM:ss} - %m%n
log4j.appender.CONSOLE.Encoding=ISO-8859-1

# LOGFILE is set to be a File appender using a PatternLayout.
log4j.appender.LOGFILE=org.apache.log4j.FileAppender
log4j.appender.LOGFILE.Append=false
log4j.appender.LOGFILE.File=${jboss.server.home.dir}/log/cache.log
log4j.appender.LOGFILE.Threshold=DEBUG
log4j.appender.LOGFILE.layout=org.apache.log4j.PatternLayout
log4j.appender.LOGFILE.layout.ConversionPattern=%d [%t] %-5p %c %x - %m%n
log4j.appender.LOGFILE.Encoding=ISO-8859-1

# AspectJ time logger
log4j.logger.TimeLog=DEBUG, timeLog, CONSOLE
log4j.additivity.TimeLog=false

log4j.appender.timeLog=org.apache.log4j.FileAppender
log4j.appender.timeLog.File=${jboss.server.home.dir}/log/time.log
log4j.appender.timeLog.Threshold=DEBUG
log4j.appender.timeLog.layout=org.apache.log4j.PatternLayout
log4j.appender.timeLog.layout.ConversionPattern=%d{dd/MM/yyyy HH:mm:ss} %c %m%n
log4j.appender.timeLog.Encoding=ISO-8859-1 
```

时间记录器是我的自定义记录器，这就是为什么它有一点不同的配置。

**PS**请不要告诉我我的错误是我使用的是 JBoss 6 版。

# c# - Entity Framework 5 更新记录

> ID：15336248
> 
> 赞同：885
> 
> 时间：2013-03-11T10:27:12.657
> 
> 标签：c#, asp.net-mvc-3, entity-framework-5

我一直在探索在 ASP.NET MVC3 环境中在 Entity Framework 5 中编辑/更新记录的不同方法，但到目前为止，它们都没有勾选我需要的所有框。我会解释为什么。

我找到了三种方法，我会提到它们的优缺点：

**方法 1 - 加载原始记录，更新每个属性**

```
var original = db.Users.Find(updatedUser.UserId);

if (original != null)
{
    original.BusinessEntityId = updatedUser.BusinessEntityId;
    original.Email = updatedUser.Email;
    original.EmployeeId = updatedUser.EmployeeId;
    original.Forename = updatedUser.Forename;
    original.Surname = updatedUser.Surname;
    original.Telephone = updatedUser.Telephone;
    original.Title = updatedUser.Title;
    original.Fax = updatedUser.Fax;
    original.ASPNetUserId = updatedUser.ASPNetUserId;
    db.SaveChanges();
} 
```

*优点*

*   可以指定更改哪些属性
*   视图不需要包含所有属性

*缺点*

*   2 x 查询数据库以加载原始然后更新它

**方法 2 - 加载原始记录，设置更改值**

```
var original = db.Users.Find(updatedUser.UserId);

if (original != null)
{
    db.Entry(original).CurrentValues.SetValues(updatedUser);
    db.SaveChanges();
} 
```

*优点*

*   仅将修改后的属性发送到数据库

*缺点*

*   视图需要包含所有属性
*   2 x 查询数据库以加载原始然后更新它

**方法 3 - 附加更新的记录并将状态设置为 EntityState.Modified**

```
db.Users.Attach(updatedUser);
db.Entry(updatedUser).State = EntityState.Modified;
db.SaveChanges(); 
```

*优点*

*   1 x 查询要更新的数据库

*缺点*

*   无法指定更改哪些属性
*   视图必须包含所有属性

**问题**

我的问题给你们；有没有一种干净的方法可以实现这组目标？

*   可以指定更改哪些属性
*   视图不需要包含所有属性（例如密码！）
*   1 x 查询要更新的数据库

我知道这是一件需要指出的小事，但我可能缺少一个简单的解决方案。如果不是方法一将占上风;-)

* * *

## 回答 #1

> 赞同：684
> 
> 时间：2013-03-11T13:12:34.607

您正在寻找：

```
db.Users.Attach(updatedUser);
var entry = db.Entry(updatedUser);
entry.Property(e => e.Email).IsModified = true;
// other changed properties
db.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：176
> 
> 时间：2013-08-01T21:01:38.323

我真的很喜欢接受的答案。我相信还有另一种方法可以解决这个问题。假设您有一个非常短的属性列表，您不想在视图中包含这些属性，因此在更新实体时，这些属性将被省略。假设这两个字段是密码和 SSN。

```
db.Users.Attach(updatedUser);

var entry = db.Entry(updatedUser);
entry.State = EntityState.Modified;

entry.Property(e => e.Password).IsModified = false;
entry.Property(e => e.SSN).IsModified = false;   

db.SaveChanges(); 
```

此示例允许您在将新字段添加到用户表和视图后基本上不理会业务逻辑。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2013-11-12T11:33:31.747

```
foreach(PropertyInfo propertyInfo in original.GetType().GetProperties()) {
    if (propertyInfo.GetValue(updatedUser, null) == null)
        propertyInfo.SetValue(updatedUser, propertyInfo.GetValue(original, null), null);
}
db.Entry(original).CurrentValues.SetValues(updatedUser);
db.SaveChanges(); 
```

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2015-04-25T16:19:49.580

我在我的存储库基类中添加了一个额外的更新方法，它类似于由 Scaffolding 生成的更新方法。它没有将整个对象设置为“已修改”，而是设置了一组单独的属性。（T 是类泛型参数。）

```
public void Update(T obj, params Expression<Func<T, object>>[] propertiesToUpdate)
{
    Context.Set<T>().Attach(obj);

    foreach (var p in propertiesToUpdate)
    {
        Context.Entry(obj).Property(p).IsModified = true;
    }
} 
```

然后调用，例如：

```
public void UpdatePasswordAndEmail(long userId, string password, string email)
{
    var user = new User {UserId = userId, Password = password, Email = email};

    Update(user, u => u.Password, u => u.Email);

    Save();
} 
```

我喜欢一趟数据库。不过，最好使用视图模型执行此操作，以避免重复的属性集。我还没有这样做，因为我不知道如何避免将我的视图模型验证器上的验证消息带入我的域项目。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2016-03-16T16:04:01.973

```
public interface IRepository
{
    void Update<T>(T obj, params Expression<Func<T, object>>[] propertiesToUpdate) where T : class;
}

public class Repository : DbContext, IRepository
{
    public void Update<T>(T obj, params Expression<Func<T, object>>[] propertiesToUpdate) where T : class
    {
        Set<T>().Attach(obj);
        propertiesToUpdate.ToList().ForEach(p => Entry(obj).Property(p).IsModified = true);
        SaveChanges();
    }
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-12-03T15:58:36.417

只是添加到选项列表中。您还可以从数据库中获取对象，并使用[Auto Mapper](http://automapper.org/)之类的自动映射工具 来更新您想要更改的记录部分。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-05-30T12:07:46.630

根据您的用例，上述所有解决方案都适用。这是我通常的做法：

对于服务器端代码（例如批处理），我通常加载实体并使用动态代理。通常在批处理过程中，您无论如何都需要在服务运行时加载数据。我尝试批量加载数据而不是使用 find 方法来节省一些时间。根据我使用乐观或悲观并发控制的过程（我总是使用乐观，除了并行执行场景，我需要用普通的 sql 语句锁定一些记录，但这很少见）。根据代码和场景，影响可以减少到几乎为零。

对于客户端场景，您有几个选择

1.  使用视图模型。模型应该有一个属性 UpdateStatus(unmodified-inserted-updated-deleted)。客户端有责任根据用户操作（插入-更新-删除）为该列设置正确的值。服务器可以向数据库查询原始值，或者客户端应将原始值与更改的行一起发送到服务器。服务器应附加原始值并使用每行的 UpdateStatus 列来决定如何处理新值。在这种情况下，我总是使用乐观并发。这只会执行插入 - 更新 - 删除语句而不是任何选择，但它可能需要一些聪明的代码来遍历图形并更新实体（取决于您的场景 - 应用程序）。映射器可以提供帮助，但不能处理 CRUD 逻辑

2.  使用像微风.js 这样隐藏大部分复杂性的库（如 1 中所述）并尝试使其适合您的用例。

希望能帮助到你

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-05T13:53:34.180

已经给出了一些非常好的答案，但我想投入两分钱。这是将视图对象转换为实体的一种非常简单的方法。简单的想法是只有存在于视图模型中的属性才会被写入实体。这类似于@Anik Islam Abhi 的答案，但传播为零。

```
public static T MapVMUpdate<T>(object updatedVM, T original)
{
    PropertyInfo[] originalProps = original.GetType().GetProperties();
    PropertyInfo[] vmProps = updatedVM.GetType().GetProperties();
    foreach (PropertyInfo prop in vmProps)
    {
        PropertyInfo projectProp = originalProps.FirstOrDefault(x => x.Name == prop.Name);
        if (projectProp != null)
        {
            projectProp.SetValue(original, prop.GetValue(updatedVM));
        }
    }
    return original;
} 
```

**优点**

*   视图不需要具有实体的所有属性。
*   当您向视图添加删除属性时，您永远不必更新代码。
*   完全通用

**缺点**

*   2 次点击数据库，1 次加载原始实体，1 次保存。

对我来说，这种方法的简单性和低维护要求胜过增加的数据库调用。

# java - 单击面板时失去对 JTextField 的关注

> ID：15336251
> 
> 赞同：3
> 
> 时间：2013-03-11T10:27:22.080
> 
> 标签：java, swing, focus, jpanel, jtextfield

当用户单击主面板时，我想失去对 JTextField 的关注。

`setFocusable(true)`对我不起作用。

如果我单击主面板，JTextField 仍然是焦点，您可以输入内容。

注意：我的 JFrame 设置为可聚焦（true）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T10:46:59.783

我认为既然你想把注意力集中在点击主面板上，你应该`MouseListener`为你实现一个简单的工作。再次，因为面板（主面板）被添加到`JFrame`或者更确切地说它被设置为内容面板，这就是`setFocusable(true);`应该调用的地方。下面的代码应该解决问题：

```
 mainPanel.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent e) {
                super.mouseReleased(e);
                Focus.this.grabFocus();
            }
        }); 
```

请注意，这`Focus`是我的班级名称，`JPanel`在将其添加到`JFrame`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T10:49:55.943

> 注意：我的 JFrame 设置为可聚焦（true）。

例如

```
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class JPanelAndFocus {

    private JFrame frm = new JFrame("JPanel_And_Focus");
    private JPanel panel = new JPanel();
    private JTextField one = new JTextField(10);
    private JTextField two = new JTextField(10);
    private JTextField three = new JTextField(10);

    public JPanelAndFocus() {
        //panel.setLayout(new FlowLayout());
        panel.add(one);
        panel.add(two);
        panel.add(three);
        panel.setFocusable(true);
        panel.addMouseListener(new MouseAdapter() {
            @Override
            public void mousePressed(MouseEvent e) {
                javax.swing.SwingUtilities.invokeLater(new Runnable() {
 //delayed should be important for events from DocumentListener / InputMask
                    @Override
                    public void run() {
                        //panel.requestFocus();
                        panel.requestFocusInWindow();
                    }
                });
            }
        });
        panel.setPreferredSize(new Dimension(400, 100));
        frm.add(panel);
        frm.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frm.setLocation(400, 300);
        frm.pack();
        frm.setVisible(true);
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                //one.requestFocus();
                one.requestFocusInWindow();
            }
        });
    }

    public static void main(String[] args) {

        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JPanelAndFocus jpaf = new JPanelAndFocus();
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-22T07:22:42.090

虽然上面引用的不同方法对我不起作用，这意味着焦点仍然在 JButton 上，但我发现 e.getSource() 可以正确设置组件焦点

```
YourContainerPanel.addMouseListener(new MouseAdapter() {
    @Override
    public void mouseClicked(MouseEvent e) {
        JComponent clicked = (JComponent)e.getSource();
        clicked.requestFocusInWindow();
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-05T12:24:21.540

试试这个

```
this.getParent().requestFocus() 
```

# android - 使用 Twitter 进行身份验证

> ID：15336252
> 
> 赞同：-3
> 
> 时间：2013-03-11T10:27:24.557
> 
> 标签：android, twitter, oauth

我在网上搜索，但还没有找到整个过程是如何运作的。我想使用他们的 Twitter 帐户对应用程序中的用户进行身份验证，然后使用此帐户允许在我的服务器上发布信息。所以我不想再和推特互动了，不想发帖，不想阅读推文。我只是想用它作为某种通行证来获取用户的用户名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:32:56.230

查看[http://www.oneall.com/](http://www.oneall.com/)。它允许您登录大多数社交网络。它具有详细的文档和分步指南，可帮助您使用社交网络进行身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:35:03.407

听起来您想实现某种“使用 Twitter 登录”类型的功能。您仍然需要向 Twitter 发送用户授权请求。你看过 Twitter API 吗？这总是一个很好的起点……

[https://dev.twitter.com/docs/api/1.1#102](https://dev.twitter.com/docs/api/1.1#102)

# java-me - 如何使用串口从 J2ME 中的血糖仪获取数据？

> ID：15336257
> 
> 赞同：2
> 
> 时间：2013-03-11T10:27:39.857
> 
> 标签：java-me, serial-port

我必须为必须与电子医疗设备*（血糖仪）接口的可编程 GPRS 调制解调器 JAVA* *(J2ME)*做一个应用程序。

 *我在设备的串行端口上有一个输入缓冲区和一个输出缓冲区。

当应用程序启动时，我在串口上监听，我从血糖仪收到一个字节，十进制代码“5”对应于 ASCII 表，查询符号，15 秒后我得到字节“4”对应于传输结束。

要从血糖仪接收数据，我需要发送一个对应于字节“6”的 ACK 信号*（确认） 。*我尝试了以下表格：

`outBuffer.write("ACK\r\n".getBytes()); //first without setting the charset and after I trying to set all the charset.`

我试图发送这样的字节缓冲区：

`byte[] bSend = new byte[] { 6 }; outBuffer.write(bSend); //(I tried also with the byte 10 (LF) and 13 (CR)).`

结果是我无法接收数据，但我循环获得但只有值 5 和 4。

如果我发送 ACK 消息，所有可以与串行端口通信的软件*（如串行监视器）都可以正确接收来自血糖仪的数据。*

我认为我的问题是由于 Java 中 ACK 编码的价值，有人可以指出任何解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:50:13.193

由于这似乎是一个非常低级的接口，它使用 ASCII 控制字符进行通信，我认为您需要逐字发送这些字节值，而不需要像换行符或其他任何额外的东西。这意味着

```
byte[] bSend = new byte[] { 6 }; 
outBuffer.write(bSend); 
```

是正确的做法。现在，这个协议看起来很像 ASTM E1381，所以我[在这里](http://www.readbag.com/userportal-iha-dk-jrt-bayercontour-meterinterface)检查了一下，第 6.1.2 段可能与您的问题有关：

> `<ENQ>`当仪表启动建立阶段时，仪表通过最初发送一个字符来确定计算机是否已连接。如果计算机在 15 秒内通过发送`<ACK>` 字符做出响应，仪表将进入数据传输模式。如果计算机在 15 秒内以`<NAK>`字符响应，则仪表会发送一个 然后尝试通过从计算机中`<EOT>`查找字符来进入远程命令模式 。`<ENQ>`另请参阅“第 6.2 节远程命令模式协议”。15 秒内对仪表的 `<ENQ>`除`<ACK>`or`<NAK>`字符以外的任何响应都会导致仪表发送一个`<EOT>`，延迟一秒，然后再发送一个`<ENQ>`。如果计算机在 15 秒内没有响应，则仪表发送一个`<EOT>`，延迟一秒钟，然后发送另一个`<ENQ>`并再次等待计算机的响应。**注意：发送 1 秒后`<ENQ>`，仪表可能会进入低功耗模式。因此，有可能`<ACK>`计算机发送的第一个没有被正确读取。在这种情况下，仪表以 响应`<EOT>`，延迟一秒，然后发送另一个`<ENQ>`。**

强调我的，我想这就是正在发生的事情。因此，您应该重复发送另一个 ENQ 以使其进入数据传输模式，假设那是您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T04:49:49.297

它应该是字节 bSend=(byte)0x6; outBuffer.write(bSend);*

# asp.net - ASP.NET MVC 注册自定义文化和国际化

> ID：15336263
> 
> 赞同：2
> 
> 时间：2013-03-11T10:27:50.360
> 
> 标签：asp.net, asp.net-mvc, internationalization, cultureinfo

我有一个 ASP.NET MVC 4 项目，并且我已经在其中注册了自定义文化，因为我想要一个特定于客户端的翻译。

我用类似的参数调用下面的辅助方法`RegisterCulture("en-GB-CustA", "English (Customer A)", "en-GB");`这个调用是在类的`Application_Start`事件处理程序中完成的`MvcApplication : HttpApplication`。

```
private static void RegisterCulture(string cultureCode, string cultureName, string baseCultureCode)
{
    var ci = new CultureInfo(baseCultureCode);
    var ri = new RegionInfo(ci.Name);
    var builder = new CultureAndRegionInfoBuilder(cultureCode, CultureAndRegionModifiers.None);
    builder.LoadDataFromCultureInfo(ci);
    builder.LoadDataFromRegionInfo(ri);

    builder.CultureEnglishName = cultureName;
    builder.CultureNativeName = cultureName;

    try
    {
        builder.Register();
    }
    catch (InvalidOperationException)
    {

    }
} 
```

方法很简单，基本上是在现有文化的基础上创造新文化，并替换它的名字。

现在在我的 Global.asax 中，仅出于测试目的，我将以下代码放入`MvcApplication`类中，以将当前线程切换为自定义线程。

```
protected void Application_AcquireRequestState(object sender, EventArgs e)
{
    var ci = new CultureInfo("en-GB-CustA");

    Thread.CurrentThread.CurrentUICulture = ci;
    Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture(ci.Name);
} 
```

我还包括了两个资源文件。一个被称为`Test.resx`默认文本，第二个是`Test.en-GB-CustA.resx`. 我在那里添加了一个简单的字符串资源，`Title`用两个不同的值调用。

```
Test.resx => "Hello World!"
Test.en-GB-CustA => "Hello from custom culture!" 
```

我还在我的视图中添加了显示此标题的代码（为了简化，我为两个资源文件添加`ViewRes`了 s ）。`CustomToolNamespace`

```
@ViewRes.Test.Title 
```

不幸的是，即使在我一直获得详细的“Hello world”值之前，我已经将自定义文化设置为所描述的。我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T14:15:50.957

我知道这听起来很简单，这是一个古老的线程，但是您尝试过重新启动吗？

你的代码看起来不错。

我遇到了完全相同的问题，新的自定义文化（语言环境）正在正确创建，但没有应用于正确名称的资源文件。重新启动是应用设置更改的唯一方法。

唯一要检查的另一件事是您是否以管理员权限运行 - 因为您需要这些权限来创建新的语言环境。

看这里：

[http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.aspx](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T13:51:44.937

我最终将代码从我的自定义文化中重命名为`en-XX`. 我还必须定义两者`TwoLetterISOLanguageName`，`ThreeLetterISOLanguageName`并且它已正确注册。

# jquery - 如果 img src 正确，则将 css 添加到 img 标签，使其显示无

> ID：15336265
> 
> 赞同：0
> 
> 时间：2013-03-11T10:27:57.723
> 
> 标签：jquery, html, css

我正在尝试创建一个 jquery，它只检查是否有任何带有特定 src 的 img 标签，以及是否有任何 img 应该显示：没有 css。我希望它遍历页面并对所有 img 标签执行此操作

但我似乎无法让它工作。

这是我尝试过的

```
$('img([src^="/_layouts/15/images/ikk/news/image.jpg"])').each(function () {
        $(this).css("display", "none");
    }); 
```

html:

```
<img alt="" src="/_layouts/15/images/ikk/news/image.jpg"> 
```

注意：生成的这个 url 可能有很多 img 标签，所以我需要迭代和检查。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T10:31:37.530

你犯了一个错误，不要`()`在第一个`img`选择器中添加！

```
$('img[src^="/_layouts/15/images/ikk/news/image.jpg"]').each(function () {
    //$('.latest-news-container img').css("display", "none");
    //and just use
    $(this).hide();
}); 
```

如果您只是不想隐藏选定的 img，请执行以下操作：

```
$('img[src^="/_layouts/15/images/ikk/news/image.jpg"]').hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:37:42.130

在这里检查它的工作小提琴你提供了一个错误的选择器。

它应该是

```
$("img[src.....]") 
```

**[小提琴](http://jsfiddle.net/tWdQt/)**

# asp.net - 如何在asp.net c#中只获取不包括时间的日期

> ID：15336272
> 
> 赞同：5
> 
> 时间：2013-03-11T10:28:15.300
> 
> 标签：asp.net

如何在asp.net c#中只获取不包括时间的日期。我只想输入日期作为搜索的输入，例如 2013 年 3 月 11 日

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T10:29:22.240

您可以使用[DateTime.Date](http://msdn.microsoft.com/en-us/library/system.datetime.date.aspx)仅获取 DateTime 对象的日期部分

```
DateTime dateOnly = date1.Date; 
```

与此实例具有相同日期的新对象，时间值设置为午夜*12:00:00 (* *00:00:00* )。

如果您有字符串中的日期并想先将其转换为 DateTime 对象，那么您可以使用[DateTime.ParseExact](http://msdn.microsoft.com/en-us/library/system.datetime.parseexact.aspx)

```
result = DateTime.ParseExact("3/11/2013", "d/MM/yyyy", CultureInfo.InvariantCulture); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-05T10:43:25.497

尝试使用这个：

```
 @{
     DateTime dd=DateTiem.Now;
     string date=dd.toString("dd/MM/yyyy");
   } 
```

现在只看：

```
 @date 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T10:33:12.637

```
DateTime dt = your_Dt.Date; 
```

或者

您可以将其格式化为您想要的任何格式，如下所示：

```
dt.Tostring("MM/dd/yyyy"); 
```

或者

您可以将 value 转换为 shortdate 为：

```
Convert.ToDateTime(your_Dt).ToShortDateString(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-06T07:39:25.870

我在 MS-SQL 2014 中将数据库保存为日期时间，但是当我只需要在日期中时，我会执行以下操作......在 cshtml 中

```
@foreach (var item in Model.dbModelLst)
{
            <tr>
              <td>@item.ChargeFrequency</td>
              <td>@item.Charge</td>
              <td>@item.FromDate.ToShortDateString().ToString()</td>
              <td>@item.ToDate.ToShortDateString().ToString()</td>
              <td>@item.Inv_SerialNo.SerialNo</td>
              <td>@item.IncludeLic</td>
              <td>@item.Status</td>
               .....
               .....
           </tr>
} 
```

其中 dbModelist 包含模型列表（IEnumerable）...我以这种方式解决。谢谢你。

# java - 扫描 Java 包中的注释

> ID：15336274
> 
> 赞同：0
> 
> 时间：2013-03-11T10:28:17.657
> 
> 标签：java, recursion, annotations

我想实现将递归扫描带注释的类的逻辑。我可以毫无问题地扫描包结构：

```
Stack<Package> stack = new Stack<Package>();
stack.push(Package.getPackage(ROOT_PACKAGE));
while(!stack.isEmpty()) {
    Package temp = stack.pop();             
    annotatedClasses.addAll(getAnnotatedClasses(temp));         
    for(Package p : temp.getPackages()) {
        stack.push(p);
    }
} 
```

我遇到困难的地方是我似乎找不到实现这种方法的方法：

```
public List<Class> getAnnotatedClasses(Package p); 
```

给定一个 Package 对象，有没有办法获取其中的所有类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:32:47.463

*   您可以使用反射使用反射扫描包中的类[以获取包的所有类，](https://stackoverflow.com/questions/520328/can-you-find-all-classes-in-a-package-using-reflection)然后递归地进入所有类以查找注释。

# regex - 正则表达式匹配字母数字、URL 运算符，除了正斜杠

> ID：15336275
> 
> 赞同：0
> 
> 时间：2013-03-11T10:28:19.123
> 
> 标签：regex, url-rewriting

在过去的几个小时里，我一直在努力让这个正则表达式正确，但不幸的是，我仍然无法得到它。也尝试搜索现有线程，但没有骰子。:(

我想要一个正则表达式来匹配以下可能的字符串：

```
userprofile?id=123
profile
search?type=player&gender=male
someotherpage.htm 
```

但不是

```
userprofile/
helloworld/123 
```

基本上，我希望正则表达式匹配**字母数字**、**URL 运算符**，例如**?、= 和 &**但**不匹配正斜杠**。（即只要字符串包含正斜杠，正则表达式应该只返回 0 个匹配项。）

我尝试了以下正则表达式，但似乎没有一个有效：

```
([0-9a-z?=.]+)
(^[^\/]*$[0-9a-z?=.]+)
([0-9a-z?=.][^\/]+)
([0-9a-z?=.][\/$]+) 
```

任何帮助将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:32:59.140

这应该可以解决问题：

```
/\w+(\.htm|\?\w+=\w*(&\w+=\w*)*)?$/i 
```

要打破这一点：

```
\w+              // Match [a-z0-9_] (1 or more), to specify resource
  (              // Alternation group (i.e., a OR b)
    \.htm        // Match ".htm"
    |            // OR
    \?           // Match "?"
    \w+=\w*      // Match first term of query string (e.g., something=foo)
    (&\w+=\w*)*  // Match remaining terms of query string (zero or more)
  )
?                // Make alternation group optional
$                // Anchor to end of string 
```

该`i`标志用于不区分大小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:39:55.440

它们都匹配的原因是您的正则表达式匹配字符串的一部分，而您没有告诉它它需要匹配整个字符串。您需要确保它不允许字符串中的任何其他字符，例如

```
^[0-9a-z&?=.]+$ 
```

这是一个小 perl 脚本来测试它：

```
#!/usr/bin/perl

my @testlines = (
         "userprofile?id=123",
         "userprofile",
         "userprofile?type=player&gender=male",
         "userprofile.htm",
         "userprofile/",
         "userprofile/123",
        );

foreach my $testline(@testlines) {
  if ($testline =~ /^[0-9a-z&?=.]+$/) {
    print "$testline matches\n";
  } else {
    print "$testline doesn't match - bad regexp, no cookie\n";
  }
} 
```

# c# - 获取 Windows.Ui.Xaml.DependencyProperty 的名称

> ID：15336276
> 
> 赞同：2
> 
> 时间：2013-03-11T10:28:19.190
> 
> 标签：c#, properties, windows-runtime, dependency-properties, winrt-xaml

对于一个项目，我需要获取 DependecyProperty 的名称，但不知道如何。它是一个 Windows 8 项目（.NET-Framework 4.5）。我需要确切的名称，因为我需要以字符串形式导出 xaml。

似乎在 System.Windows.DependencyProperty 中您可以访问 DependencyProperty 的 Name 属性，但在 Windows.Ui.Xaml.DependencyProperty 中不能访问（如我的情况）。

**例子：**

```
public static readonly DependencyProperty MyDepPropProperty =
                    DependencyProperty.RegisterAttached("MyDepProp", typeof(object), typeof(MyClass), new PropertyMetadata(null)); 
```

我需要从 MyDepPropProperty 获取“MyDepProp”。

**示例 2：** 来自 Grid.WidthProperty 的“宽度”。

有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:16:53.970

显然无法获得 Name 属性。

# google-app-engine - 从 Google App Engine 访问预测训练模型的问题

> ID：15336278
> 
> 赞同：1
> 
> 时间：2013-03-11T10:28:33.110
> 
> 标签：google-app-engine, google-prediction

我在通过 Google App Engine 访问我在 Google 预测中创建的训练模型时遇到问题。我已经在这里实现了文章中的所有步骤...... [https://developers.google.com/appengine/articles/prediction_service_accounts](https://developers.google.com/appengine/articles/prediction_service_accounts)

当我部署到我的应用引擎实例时，我可以成功运行托管模型示例，但是使用我自己的示例模型 (A1) 失败并出现错误：找不到模型。

appID 为 samplrprocessing，日志显示如下：

**：https://www.googleapis.com/prediction/v1.5/trainedmodels/A1/predict?alt=json&key=MYKEYHERE 返回“未找到模型。必须首先训练模型。”回溯（最后一次调用）：文件“/base/data/home/apps/s~samplrprocessing/1.365876750758965087/stream.py”，第 45 行，在 main() 文件“/base/data/home/apps/s~samplrprocessing/1.365876750758965087/stream.py”中，第 40 行，在 main resp = service.trainedmodels().predict(id="A1", body=bodyLoad).execute() 文件“/base/data/home/apps/s~samplrprocessing/1.365876750758965087/oauth2client/util .py”，第 120 行，在 positional_wrapper 中返回已包装（*args，**kwargs）文件“/base/data/home/apps/s~samplrprocessing/1.365876750758965087/apiclient/http.py”，第 678 行，在执行中引发 HttpError (resp, 内容, uri=self.uri)**

有没有其他人遇到过这个问题？我已授予服务帐户 API 访问我的预测项目的权限，因此我开始对正在发生的事情失去想法。

提前致谢...

# sql - SSRS 共享点列表

> ID：15336284
> 
> 赞同：1
> 
> 时间：2013-03-11T10:28:47.770
> 
> 标签：sql, sql-server-2008, sharepoint, reporting-services, sharepoint-2007

如何找出 Sharepoint 报告从何处获取数据？

有可能/容易吗？

我有一份类似于我即将制作的实时报告（它将使用相同的数据源），但我不知道这是从哪里来的！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T06:29:54.557

最简单的方法是复制和重命名文件，上传并在 SharePoint 上的报表生成器中进行编辑。这样，您无需编辑 XML 即可维护准确的数据源。

如果你想下载它，去这里[Microsoft SQL Server 2008 R2 Report Builder 3.0](http://www.microsoft.com/en-us/download/details.aspx?id=6116)

但是，如果您喜欢文本编辑器，您可以打开 .rdl 文件进行编辑。在 XML 中查找类似的内容：

```
 <DataSources>
    ..data source details here. 
    Where the data comes from
    </DataSources>
    <DataSets>
    .. actual returned date definitions here, like columns. 
    What the data is
    </DataSets> 
```

# c - 在 mtd 块设备上写入

> ID：15336285
> 
> 赞同：12
> 
> 时间：2013-03-11T10:28:52.273
> 
> 标签：c, linux, embedded, flash-memory

我正在尝试使用 MTD 块设备在 NAND 闪存上写入，但我并不了解所有内容。

[正如我在这里](http://etutorials.org/Linux+systems/embedded+linux+systems/Chapter+7.+Storage+Device+Manipulation/7.1+MTD-Supported+Devices/)读到的

*   `mtdblockN`是只读块设备 N
*   `mtdN`是读/写字符设备 N
*   `mtdNro`是只读字符设备 N

但是我想使用简单`write`的 C 语言直接将字节写入分区，但我不明白它是如何工作的（我读到我首先必须擦除要写入的扇区）。

我应该使用哪种设备以及如何在此设备上书写？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-11T14:09:42.337

从/向内存技术设备读取和写入与任何其他类型的 IO 并没有什么不同，除了在您写入之前您需要擦除扇区（擦除块）

为了使事情变得简单，您始终可以只使用 mtd-utils（例如`flash_erase`,`nanddump`和`nandwrite`, 分别用于擦除、读取和写入）而无需编写代码。

但是，如果您确实想务实地这样做，这里有一个示例，请务必阅读所有评论，因为我将所有详细信息都放在那里：

```
#include <stdio.h>
#include <fcntl.h>
#include <sys/ioctl.h>
#include <mtd/mtd-user.h>

int main()
{
    mtd_info_t mtd_info;           // the MTD structure
    erase_info_t ei;               // the erase block structure
    int i;

    unsigned char data[20] = { 0xDE, 0xAD, 0xBE, 0xEF,  // our data to write
                               0xDE, 0xAD, 0xBE, 0xEF,
                               0xDE, 0xAD, 0xBE, 0xEF,
                               0xDE, 0xAD, 0xBE, 0xEF,
                               0xDE, 0xAD, 0xBE, 0xEF};
    unsigned char read_buf[20] = {0x00};                // empty array for reading

    int fd = open("/dev/mtd0", O_RDWR); // open the mtd device for reading and 
                                        // writing. Note you want mtd0 not mtdblock0
                                        // also you probably need to open permissions
                                        // to the dev (sudo chmod 777 /dev/mtd0)

    ioctl(fd, MEMGETINFO, &mtd_info);   // get the device info

    // dump it for a sanity check, should match what's in /proc/mtd
    printf("MTD Type: %x\nMTD total size: %x bytes\nMTD erase size: %x bytes\n",
         mtd_info.type, mtd_info.size, mtd_info.erasesize);

    ei.length = mtd_info.erasesize;   //set the erase block size
    for(ei.start = 0; ei.start < mtd_info.size; ei.start += ei.length)
    {
        ioctl(fd, MEMUNLOCK, &ei);
        // printf("Eraseing Block %#x\n", ei.start); // show the blocks erasing
                                                  // warning, this prints a lot!
        ioctl(fd, MEMERASE, &ei);
    }    

    lseek(fd, 0, SEEK_SET);               // go to the first block
    read(fd, read_buf, sizeof(read_buf)); // read 20 bytes

    // sanity check, should be all 0xFF if erase worked
    for(i = 0; i<20; i++)
        printf("buf[%d] = 0x%02x\n", i, (unsigned int)read_buf[i]);

    lseek(fd, 0, SEEK_SET);        // go back to first block's start
    write(fd, data, sizeof(data)); // write our message

    lseek(fd, 0, SEEK_SET);              // go back to first block's start
    read(fd, read_buf, sizeof(read_buf));// read the data

    // sanity check, now you see the message we wrote!    
    for(i = 0; i<20; i++)
         printf("buf[%d] = 0x%02x\n", i, (unsigned int)read_buf[i]);

    close(fd);
    return 0;
} 
```

这样做的好处是，由于您可以像在其他设备上一样使用标准工具，因此很容易理解[`write()`](http://linux.die.net/man/2/write)、[`open()`](http://linux.die.net/man/3/open)和[`read()`](http://linux.die.net/man/3/read)做什么以及对它们的期望。

例如，如果在使用时`write()`你得到`EINVAL`它的值可能意味着：

> > fd 附着在不适合书写的物体上；或者文件是使用 O_DIRECT 标志打开的，并且 buf 中指定的地址、count 中指定的值或当前文件偏移量未适当对齐。

# ios - 为什么我无法使用 mergDropbox 链接我的 Dropbox 应用？

> ID：15336290
> 
> 赞同：0
> 
> 时间：2013-03-11T10:29:01.400
> 
> 标签：ios, external, dropbox, livecode

当我调用任何 mergDropbox 命令时，我似乎无法从 Dropbox 获得响应。我已经在 Dropbox 上设置了一个应用程序，所以我有一个应用程序密钥和秘密可以传递给 mergDropbox 设置命令，但是当我这样做时没有任何反应。所有这些在外部附带的演示堆栈中都可以正常工作（它将我链接到 Monte 的演示 Dropbox 应用程序）顺便说一句。

我想知道这是否与我的 Dropbox 应用程序状态是“开发”而不是“生产”这一事实有关，但如果是这样，我不确定如何继续，因为我无法申请生产状态，直到我有成功链接到应用程序 - 这对我来说似乎是第 22 条情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T10:29:01.400

这个问题是在邮件列表上提出的，但是，我认为答案对其他人有帮助，所以我在这里发帖。

发生的问题是您尚未设置 Dropbox 应用所需的自定义 url 方案以在链接后返回您的应用。当您不设置此选项并尝试链接应用程序时，您不会切换到 Dropbox 应用程序，并且 Dropbox sdk 会记录如下内容：

```
[ERROR] DropboxSDK: unable to link; app isn't registered for correct URL scheme (db-c0sbjqyibf12hg1) 
```

因此，您需要在此处输入 db-yourappkey 作为您的自定义 url 方案： ![在此处输入图像描述](../Images/22d541d27976dced5b81296254a288ba.png)

# php - 在php中将ajax填充的下拉列表插入数据库

> ID：15336300
> 
> 赞同：0
> 
> 时间：2013-03-11T10:29:25.443
> 
> 标签：php, mysql, ajax

```
<select id="country" name="country" onChange="getState(this.value)" class="dropdown">
<option value="0">Select Country</option>
<?php 
echo $country;
?>
</select> 
```

上面的代码从数据库中获取国家，根据使用 ajax 的国家，我使用下面的代码创建了一个下拉列表，我无法插入状态值。如何在 php dbpage 中获取状态值以插入状态值

```
<div id="statediv" >
<select id="ddlstate" name="ddlstate"  class="dropdown" value="0">
<option>Select Country First</option>
</select>
</div>
this is my full ajax code
function getState(countryId)
{       
    var strURL="findState.php?country="+countryId;
    var req = getXMLHTTP();
    if (req) {
        req.onreadystatechange = function() {
        if (req.readyState == 4) {
            if (req.status == 200) {                        
                document.getElementById('statediv').innerHTML=req.responseText;                     
            }
            else {
                alert("There was a problem while using XMLHTTP:\n" + req.statusText);
            }
        }
    }           
    req.open("GET", strURL, true);
    req.send(null);
    }
} 
```

这是 findState.php

```
<?php $country=intval($_GET['country']);
    $query="SELECT stateid,statename FROM state WHERE countryid='$country'";
    $result=mysql_query($query);
?>
<select name="state" onchange="getCity(<?php echo $country?>,this.value)">
    <option>Select State</option>
    <?php while($row=mysql_fetch_array($result)) { ?>
        <option value=<?php echo $row['stateid']?>>
            <?php echo $row['statename']?>
        </option>
    <?php } ?>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:39:32.207

请找到使用 countryid 的州并以这种方式执行。

```
<?php $states= getStates($countryid);
$str ='';
$str .='<select id="ddlstate" name="ddlstate"  class="dropdown" value="0">';
foreach($states as $val){
$str.='<option value="'.$val->id.'">'.$val->name.'</option>';
}
$str.='</select>';
echo $str; exit; ?> 
```

这只是您需要在 php 文件中使用的示例代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:41:11.743

只要您的 Ajax 正确生成和填充下拉列表，如下所示：

```
<select id="country" name="country" onChange="getState(this.value)" class="dropdown">
<option value="0">Select Country</option>
<option value="1">Country1</option>
<option value="2">Country2</option>
<option value="3">Country3</option>
</select> 
```

检查萤火虫，或通过查看页面的源代码。一旦你知道这是正确的，提交表单并使用这样的 PHP 代码来检查：

```
if( isset($_REQUEST['country'] ) ) {
 echo $_REQUEST['country'];
} else {
 echo "Country not sent from form";
} 
```

一旦您知道从您的表单发送的国家/地区，您就可以使用该值放入数据库或任何您喜欢的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:57:30.697

我猜你插入查询是错误的。检查字段数和提供的值。

```
insert into query_mas(employee_id,country_id,state_id,city_id,experience,query) values('".$employee_id."','".$country_id."','".$state_id."','".$city_id."','".$e‌​xperience."')"; 
```

# sql-server - 触发器脚本无法正常工作

> ID：15336301
> 
> 赞同：0
> 
> 时间：2013-03-11T10:29:27.947
> 
> 标签：sql-server, triggers

我的数据库中有三个表：

> ```
> Room (num PK, seats, reservation price)
> Reservation (num PK, client id FK Client(id), room number FK Room(num), reservation date)
> Client (id PK, name) 
> ```

我想在预订之前，我们检查房间是否没有使用触发器。

这是我试过的脚本：

```
CREATE TRIGGER Verify_room_taken ON reservation
INSTEAD OF INSERT
AS
    BEGIN
        IF EXISTS ( SELECT * FROM reservation
                    WHERE [room number] = (SELECT [room number] FROM INSERTED)
                    AND [reservation date] = (SELECT [reservation date] FROM INSERTED))
        ROLLBACK TRAN
    END 
```

但是这个脚本不能正常工作，当我在不同的日期和不同的房间添加预订时，它不会因为光标而做出我所做的更改。

这是我第二次尝试的代码：

```
ALTER TRIGGER Verifier_chambre_prise ON reservation
INSTEAD OF INSERT
AS
    BEGIN
        IF NOT EXISTS ( SELECT * FROM reservation
                    WHERE [n° de chambre] = (SELECT [n° de chambre] FROM INSERTED)
                    AND [date de réservation] = (SELECT [date de réservation] FROM INSERTED))
            INSERT INTO reservation  SELECT * FROM INSERTED
    END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:01:11.590

好吧，您正在编写一个[`INSTEAD OF`](http://msdn.microsoft.com/en-us/library/ms175089%28v=sql.105%29.aspx)触发器-这意味着除非您在触发器中`INSERT`写入`reservation`一个触发器，否则不会发生-您需要在触发器中编写一个新`INSERT`语句。

我不会尝试为您编写更正的版本，因为还有其他与多行插入相关的问题 -`inserted`可以包含多行。

这意味着 a) 您不应该这样做`= (select x from inserted)`，因为该子查询可能会返回多个值，并且您会收到运行时错误。并且 b) 您可能会遇到*某些*行有效而*某些*行无效的情况。我不确定你想如何分解这个问题，所以这就是我不写替代品的原因。

最后，当然，（如评论中所述）这是您设置的毫无意义的练习，因为`UNIQUE`对两列的约束会比您在触发器中编写的任何内容做得更好。

# mpi - 我可以使用 MPI_Bcast 进行同步吗？

> ID：15336302
> 
> 赞同：1
> 
> 时间：2013-03-11T10:29:29.993
> 
> 标签：mpi

我需要执行一个只能由主进程执行的操作。奴隶们真的什么都做不了，只能等主人说完。因此，我做了以下事情（伪代码，我包装了大多数例程，所以我很难想出实际的 MPI 代码。我希望评论足够清楚地解释我在做什么）

```
def routine():

    if not isMaster(): 
        # I am a slave. I just sit here, waiting for the master to finish.
        # wait for a string from the master explaining the state
        string = MPI_Bcast("whatever", 0) 
        return (string == "SUCCESS")

    <master does its long running business>

    string = MPI_Bcast("SUCCESS", 0) # tell the slaves it worked fine.

    return True 
```

这行得通，还是我滥用广播？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:15:30.063

如果您制作该伪代码：

```
def routine():

    if not isMaster(): 
        # I am a slave. I just sit here, waiting for the master to finish.
        # wait for a string from the master explaining the state
        string = MPI_Bcast("whatever", 0) 
        return (string == "SUCCESS")

    else:
        <master does its long running business>
        string = MPI_Bcast("SUCCESS", 0) # tell the slaves it worked fine.

    return True 
```

那你应该没事。（当然，您需要确保为您的语言正确获取特定的 MPI API。）通常，对于广播或任何集体操作，通信器中的每个等级都需要执行相同数量的调用。为了便于理解，重组程序以在同一源代码行上无条件地执行每个等级的 Bcast 可能是有益的，例如

```
def routine():
    status_code = UNKNOWN
    if isMaster(): 
        #do stuff
        status_code = OK

    MPI_Bcast(&status_code, 0)
    #check status_code on each rank 
```

# javascript - Raphael.js 标记和点击事件

> ID：15336308
> 
> 赞同：1
> 
> 时间：2013-03-11T10:29:37.450
> 
> 标签：javascript, raphael, graphael

我有一个用 gRaphael.js 制作的图表，其中有 3 个不同的图表，每个图表都有自己的标签 ![](../Images/9b992f345f1a3be69d596fe84af7c346.png)

我使用 hoverColumn 方法在 3 个图上显示每个标签的数据。当我点击其中一个标签时，我想显示额外的信息。

我想知道我是否可以为每个标签添加一个 id，或者是否有任何方法可以将事件侦听器添加到标签，以便我可以更轻松地识别事件并知道我必须显示什么。

如果我使用点击方法，图表会变得疯狂，我的所有标签都会变大变黑，一切都停止工作

这是我的一小部分代码。我删除了一些我认为不重要的部分。

```
var lines = r.linechart(50, 10, 800, 700, xaxis, yaxisarray, options).hoverColumn(function () {
    this.tags = r.set();

    for (var i = 0, ii = this.y.length; i < ii; i++) {
                    // create the tag
        this.tags.push(r.tag(this.x, this.y[i], this.values[i] + ' ms', 0, 8).insertBefore(this));
    }
}, function () {
    this.tags && this.tags.remove();
}) 
```

重申一下：我怎样才能知道我点击了哪个标记/标签（单独）

# java - 将图像复制到不同大小的另一个位置

> ID：15336312
> 
> 赞同：2
> 
> 时间：2013-03-11T10:29:44.027
> 
> 标签：java, file-io, file-copying

我正在尝试使用 Java 将图像文件从一个位置复制到另一个位置。现在我想将图像文件保存为特定大小，无论源位置中图像文件的大小是多少。

我正在使用以下代码，它在目标位置生成与源文件大小相同的图像：

```
public class filecopy {
    public static void copyFile(File sourceFile, File destFile)
            throws IOException {
        if (!destFile.exists()) {
            destFile.createNewFile();
        }

        FileChannel source = null;
        FileChannel destination = null;
        try {
            source = new FileInputStream(sourceFile).getChannel();
            destination = new FileOutputStream(destFile).getChannel();

            // previous code: destination.transferFrom(source, 0, source.size());
            // to avoid infinite loops, should be:
            long count = 0;
            long size = source.size();
            while ((count += destination.transferFrom(source, count, size
                    - count)) < size)
                ;
        } finally {
            if (source != null) {
                source.close();
            }
            if (destination != null) {
                destination.close();
            }
        }
    }

    public static void main(String args[]) {
       try {
        File sourceFile = new File("D:/new folder/abc.jpg");
        File destFile = new File("d:/new folder1/abc.jpg");
        copyFile(sourceFile,destFile);
        } catch (IOException ex) {
           ex.printStackTrace();
         }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T10:43:50.177

这是根据您的规范调整图像大小的代码。在 copyFile 方法中，

```
int width=100,height=75; /* set the width and height here */
BufferedImage inputImage=ImageIO.read(sourceFile);
BufferedImage outputImage=new BufferedImage(width, height,
    BufferedImage.TYPE_INT_RGB);
Graphics2D g=outputImage.createGraphics();
g.setRenderingHint(RenderingHints.KEY_INTERPOLATION,
    RenderingHints.VALUE_INTERPOLATION_BICUBIC);
g.clearRect(0, 0, width, height);
g.drawImage(inputImage, 0, 0, width, height, null);
g.dispose();
ImageIO.write(outputImage,"jpg",destFile);
/* first parameter is the object of the BufferedImage,
   second parameter is the type of image that you are going to write,
       you can use jpg, bmp, png etc
   third parameter is the destination file object. */ 
```

# mysql - mysql - 获取名称末尾具有指定编号的表

> ID：15336314
> 
> 赞同：0
> 
> 时间：2013-03-11T10:29:46.740
> 
> 标签：mysql, sql

我需要选择在名称末尾具有指定数字的所有表（数字是当前年份 - 6 个月与当前月份 - 6 个月）。

我试过了，但它失败了，因为 tb 不是一列

```
SELECT 
 table_name AS tb
FROM 
 information_schema.tables
WHERE 
 table_schema = DATABASE()
AND tb LIKE "something_%"
AND (SELECT DATE_FORMAT(CURDATE() - INTERVAL 6 MONTH,'%Y%m')) < RIGHT(tb, 6) 
```

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:38:12.573

嗯，首先，这闻起来像是一个糟糕的桌子设计。如果您的信息必须在表名中编码，您也可以将其放在表中的列中。那么问题就不会发生了。

其次，您的 SELECT 语句缺少 FROM - 但整个第二个 SELECT 不会那样工作......但我真的不知道如何帮助那里。看看我的第一点;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:40:19.330

您不能在 WHERE 子句中使用别名。并且`LIKE`不支持并且`AND`像您似乎希望的那样。你必须用`CONCAT()`

```
SELECT 
 table_name AS tb
FROM 
 information_schema.tables
WHERE 
 table_schema = DATABASE()
AND table_name LIKE CONCAT('something', (SELECT DATE_FORMAT(CURDATE() - INTERVAL 6 MONTH,'%Y%m'))) 
```

# javascript - 清除文本框值 onclick 并显示 onblur

> ID：15336316
> 
> 赞同：9
> 
> 时间：2013-03-11T10:29:49.177
> 
> 标签：javascript

有没有办法清除文本框上的默认文本框值 onclick 并在表单页面上显示多个文本框的 onblur ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T12:45:48.090

HTML：

```
<input type="text" value="" onClick="Clear();" id="textbox1>
<input type="text" value="" onClick="Clear();" id="textbox2>
<input type="text" value="" onClick="Clear();" id="textbox3>
<input type="text" value="" onClick="Clear();" id="textbox4> 
```

Javascript：

```
function Clear()
{    
   document.getElementById("textbox1").value= "";
   document.getElementById("textbox2").value= "";
   document.getElementById("textbox3").value= "";
   document.getElementById("textbox4").value= "";
} 
```

您的问题对我来说有点含糊，但是单击上面的内容会清除所有文本框。希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-04T10:47:57.367

一条线解决方案

```
 <input type="text" value="" onClick="this.value='';" id="textbox1"> 
```

或者

```
 <input type="text" value="" onClick="this.value=='Initial Text'?this.value='':this.value;" id="textbox1"> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-25T05:03:26.427

```
function Clear1(str)
{    
   document.getElementById(str).value= "";
}

function Clear2(str2)
{    
var aa1=document.getElementById(str2);
	if (aa1.value==""){  
    document.getElementById(str2).style.backgroundColor = "#ffcccc"; 
	}else{
    document.getElementById(str2).style.backgroundColor = "#ffffff";   
  }
}
```

```
<input type="text" value="test1" onClick="Clear1(this.id);" id="textbox1" onblur="Clear2(this.id);">
<input type="text" value="test2" onClick="Clear1(this.id);" id="textbox2" onblur="Clear2(this.id);">
<input type="text" value="test3" onClick="Clear1(this.id);" id="textbox3" onblur="Clear2(this.id);">
<input type="text" value="test4" onClick="Clear1(this.id);" id="textbox4" onblur="Clear2(this.id);"> 
```

**[https://jsfiddle.net/warunamanjula/qy0hvmyq/1/](https://jsfiddle.net/warunamanjula/qy0hvmyq/1/)**

# jquery-ui - 嵌套的 jQuery UI 选项卡无法正确显示

> ID：15336317
> 
> 赞同：0
> 
> 时间：2013-03-11T10:29:53.333
> 
> 标签：jquery-ui, tabs

我必须为无法在 jsFiddle 中重现这一点而道歉（因为代码放在 2 个文件中）。我有 3 个工作正常的选项卡，在第三个中我加载了另一个包含 2 个选项卡的文件。这些选项卡显示为大约 400 像素高的渐变，这些选项卡的内容显示在它们下方。这不是我想要的，你可以想象 :) 它就像灰色标题，其中包含选项卡被拉伸到整个 div... 这是图片：http: [//2i.cz/2i/ t/954d3e14c7.jpg](http://2i.cz/954d3e14c7) 如您所见，选项卡本身非常大，表格如下所示。

这是我的代码：

第一个文件：

```
$(function() {
      $( "#tabs" ).tabs();
});

$("#detail").load('./safe/kalkulace_grafy_all.php?k_polozka=<? echo $co; ?>&cu=<? echo $ids; ?>');

<div id="tabs">
    <ul>
            <li><a href="#tabs-1">Info</a></li>
            <li><a href="#tabs-2">Info2</a></li>
            <li><a href="#tabs-3">Info3</a></li>
    </ul>
    <div id="tabs-1" class="detail_ceny_tab" style="height: 446px;"></div>
    <div id="tabs-2" class="detail_ceny_tab" style="height: 446px;"></div>
    <div id="tabs-3" class="detail_ceny_tab" style="height: 446px;">
        <div id="detail"></div>
    </div>
</div> 
```

第二个文件：

```
 $(function() {
      $( "#subTabs" ).tabs();
    });

    $("#subTab1").load('./safe/kalkulace_kalkVzorec.php?k_polozka=<? echo $k_polozka; ?>&cu='+cu);

<div id="subTabs" style="margin-left:500px">
    <ul>
        <li><a href="#subTab1">Kalkulační vzorec</a></li>
        <li><a href="#subTab2">Seznam potřeb</a></li>
    </ul>
    <div id="subTab1"> </div>
    <div id="subTab2"> </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-26T07:44:35.687

你想减少灰色选项卡面板区域吗？我认为它已经晚了，但如果他们有类似的想法，希望它可以帮助其他人。以下代码可能会有所帮助，您可以减少选项卡面板的宽度。

```
$( "#subTabs" ).find( ".ui-tabs-nav").css('width', '50%');

$( "#subTabs" ).find( ".ui-tabs-panel").each( function( index, element ){
    $( this ).css('width', '50%');
}); 
```

# google-app-engine - 谷歌应用引擎：ndb 排序属性

> ID：15336321
> 
> 赞同：3
> 
> 时间：2013-03-11T10:30:07.363
> 
> 标签：google-app-engine, app-engine-ndb

我有以下模型：

```
class Product(ndb.Model):
    name = ndb.StringProperty()
    bidTime = ndb.DateTimeProperty()
    price = ndb.IntegerProperty()
    ... 
```

我想使用以下查询：

```
productRanks = Product.query(Product.bidTime>=startDate,
                             Product.bidTime<endDate).order(-Product.price).fetch() 
```

where`startDate`和`endDate`是日期时间对象。但我收到以下错误消息：

*第一个排序属性必须与应用不等式过滤器的属性相同*

如果我`Product.bidTime`按顺序添加，则不会出现错误：

```
.order(Product.bidTime, -Product.price) 
```

但是，排序结果将是错误的（根据日期，而不是价格）。那么，问题是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T11:02:40.180

就 appengine 而言，没有问题。它的行为与记录的一样。从文档

> 注意：由于 App Engine 数据存储区执行查询的方式，如果查询指定属性的不等式过滤器和其他属性的排序顺序，则不等式过滤器中使用的属性必须在其他属性之前排序。

请参阅[https://developers.google.com/appengine/docs/python/datastore/queries#Sort_Orders](https://developers.google.com/appengine/docs/python/datastore/queries#Sort_Orders)

获得结果集后，您可能需要在内存中进行排序。

# objective-c - 在核心图中设置轴标签偏移

> ID：15336322
> 
> 赞同：1
> 
> 时间：2013-03-11T10:30:10.343
> 
> 标签：objective-c, core-plot, bar-chart

设置栏偏移后，轴标签不会显示在栏的中心并且错位。谁能帮我这个 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T23:57:54.793

将`barOffset`条形的中心从数据源提供的条形位置移开。如果轴标签位于条形位置，则它们不会与条形对齐。

可能的解决方案：

1.  将 设置`barOffset`为零 (0)。
2.  更改轴标签策略以将标签放置在条形下方。除非您制作自定义标签，否则这也会移动轴上的任何刻度线。

# google-chrome - svg 元素内的元素在 Chrome 中悬停时得到下划线

> ID：15336323
> 
> 赞同：4
> 
> 时间：2013-03-11T10:30:14.927
> 
> 标签：google-chrome, svg

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T17:19:58.800

[当您在 jsfiddle 中复制代码](http://jsfiddle.net/9sAaC/)时不会发生这种情况，所以我猜您的样式表有这样的内容：

```
a:hover {
   text-decoration: underline;
} 
```

尝试通过编写覆盖此行为：

```
svg a:hover {
   text-decoration: none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-24T08:07:18.160

对于 safari，我必须将 svg 元素包装在 div 中并应用样式

```
text-decoration: none !important; 
```

到那个 div（我正在使用 sass）：

```
.header__logo {
    text-decoration: none !important;  // Safari adds text decoration to    text element inside svg
    a:-webkit-any-link,
    a:hover {
        text-decoration: none;
    }
} 
```

# excel - 替换功能不替换文本

> ID：15336327
> 
> 赞同：0
> 
> 时间：2013-03-11T10:30:31.823
> 
> 标签：excel, substitution

我正在尝试使用 Excel 中的替换函数`05`将第一列中的更改`04`为如下：

```
06-05NG22D021 --------------- 04NG22D021
06-05NG22D021-KP01  ---------- 06-04NG22D021-KP01
06-05NG22D021-M01  ----------- 06-04NG22D021-M01
06-05NG22D021-MK01 ----------- 06-04NG22D021-MK01 
```

问题是当我使用时：

```
=SUBSTITUTE(A1, "-05", "-04") 
```

它不会将文本更改为应有的文本，仅当我像这样删除“-0”时才会更改

```
=SUBSTITUTE(A1, "5", "4") 
```

它工作正常。问题是我必须在字符串中包含“-0”以确保更改文本的正确部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T01:05:28.157

您可以通过以下方式绕过该问题：

```
=REPLACE(A1,5,1,4) 
```

（复制下来以适应）其中第二个参数是`A1`（恰好是`5`）中的第 5 个字符。

[更换](http://www.techonthenet.com/excel/formulas/replace.php)。

（但不适用于您示例中的第一行。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-02T16:56:05.277

有时是因为单元格或列被锁定。或者也可以是格式单元格编号类别。

解锁：右键单击单元格或列，然后在“格式化单元格”窗口中转到“保护”选项卡，如果选中则取消选中“锁定”。

要更改格式单元格编号类别：右键单击单元格或列，然后在“格式单元格”窗口中转到“编号”选项卡，将类别更改为“常规”，特别是如果已经选择了“文本”。

返回您的单元格并重新应用公式。

# unicode - MFC 多字节应用程序显示垃圾“？？？？？？” 关于粘贴汉字，但打字工作

> ID：15336334
> 
> 赞同：-1
> 
> 时间：2013-03-11T10:30:51.147
> 
> 标签：unicode, localization, mfc, multibyte

我们的 MFC 应用程序使用多字节字符集 (MBCS)。操作系统是 Windows 7。

我们可以通过虚拟键盘输入简体中文字符，但是从谷歌翻译复制粘贴中文字符到应用程序的编辑框会显示垃圾字符“????”

这是 MBCS 应用程序的已知问题吗？有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:43:41.510

复制和粘贴到多字节应用程序时，Unicode 字符将被转换为本地代码页。如果他们不能被转换，你会得到？你真的应该用 Unicode 编译和分发你的应用程序，否则你将一直在与这些问题作斗争。

如果您无法在 Unicode 中重新编译，请尝试捕捉“粘贴”操作并自己处理剪贴板。使用`GetClipboardData`并读取 的值`CF_UNICODETEXT`，这将是有效文本。然后，您需要自己转换为正确的多字节格式。

# ruby-on-rails - 基础 3 sass 未编译

> ID：15336335
> 
> 赞同：2
> 
> 时间：2013-03-11T10:31:04.503
> 
> 标签：ruby-on-rails, sass, compass-sass, zurb-foundation

直到最近我的 SaSS 一直在顺利编译，今晚早些时候我开始收到以下错误。

我已经尝试重新调整我的 Gemfile，但我不能为我的生活锻炼如何让文件编译并提供正确的 css。

```
Started GET "/assets/application.css" for 127.0.0.1 at 2013-03-11 21:27:35 +1100
Error compiling asset application.css:
Sass::SyntaxError: File to import not found or unreadable: foundation/common/ratios.
Load paths:
  Sass::Rails::Importer(/Users/paulmcguane/Sites/Rails/teammngt/app/assets/stylesheets/app.css.scss)
  /Users/paulmcguane/Sites/Rails/teammngt/app/assets/stylesheets
  /Users/paulmcguane/.rvm/gems/ruby-1.9.3-p125/gems/compass-0.12.2/frameworks/blueprint/stylesheets
  /Users/paulmcguane/.rvm/gems/ruby-1.9.3-p125/gems/compass-0.12.2/frameworks/compass/stylesheets
  Compass::SpriteImporter
  (in /Users/paulmcguane/Sites/Rails/teammngt/app/assets/stylesheets/app.css.scss)
Served asset /application.css - 500 Internal Server Error 
```

宝石文件

```
 source 'https://rubygems.org'

gem 'rails', '3.2.3'
gem 'therubyracer', :platform => :ruby

gem 'better_errors'

# Database Gems
gem 'yaml_db'
gem 'thin'
gem 'pg'
gem 'rb-readline'

#Application Processing
gem 'haml'
gem 'json'
gem 'spreadsheet'
gem 'paperclip'

#Phone conversion
gem 'countries'
gem 'phony'
gem 'phony_rails'

#Application required gems
gem 'zurb-foundation'
gem 'twilio-ruby'
gem 'simple-navigation', '~> 3.7.0'
gem 'kaminari'
gem 'client_side_validations'
gem 'event-calendar', :require => 'event_calendar'
gem 'watu_table_builder', :require => 'table_builder'
gem 'best_in_place'
gem 'to_xls', :git => 'https://github.com/dblock/to_xls.git', :branch => 'to-xls-on-models'

#Auth and Management
gem 'devise'
gem 'cancan'
gem 'switch_user'
gem 'paper_trail', '~> 2'
gem 'omniauth-facebook'
gem 'bcrypt-ruby', '~> 3.0.0'
gem 'fb_graph'
#gem 'announcements'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'

  # Add these gems
  gem 'compass-rails'
  gem 'zurb-foundation'
end

gem 'jquery-rails'
gem 'compass' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T11:18:57.343

从 gemfile 的外观来看，您没有指定 zurb-foundation 的版本。

**简短的回答是**`gem 'zurb-foundation', '= 3.2.5'`，改为在您的 gemfile中指定。

否则，如果您最近运行了包更新，您的 zurb-foundation gem 已升级到 4.x，它不再包含 Foundation/common/ratios 的路径。

我在 Heroku 上用这个撞到了墙上，我在[避免头痛：在 Heroku 上预编译 Zurb (Foundation) 中谈到了这个](http://eric-schaefer.com/blog/2013/04/24/rails-zurb-foundation-import-heroku/)

# powershell - 使用 PowerShell 2.0 在远程计算机上运行批处理文件

> ID：15336336
> 
> 赞同：4
> 
> 时间：2013-03-11T10:31:04.687
> 
> 标签：powershell

我正在尝试在远程机器上运行一个 exe，它基本上会卸载产品代理。下面是代码：

```
$test = Get-Content PC.txt

foreach ($a in $test)
{
   $curr = Get-Location
   Set-Location \\$a\Admin$\System32\CCMSetup
   .\ccmsetup.exe /uninstall
   Set-Location $curr
} 
```

它不起作用。我最终从主机本身中删除了该程序:)

备用选项：我使用命令行创建了一个批处理文件：

```
cd C:\Windows\System32\ccmsetup
ccmsetup /uninstall
exit 
```

似乎上述也可以使用 Invoke-Command 来实现。

```
Invoke-Command -ComputerName $client -FilePath UninstallCCM.cmd 
```

显然，它不接受批处理文件。我想让它尽可能简单。

目前我正在使用 PSExec 安装和卸载程序。我是否需要在需要使用 PowerShell 执行脚本的每台远程计算机上启用 PS Remoting (WinRM)？有人可以帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-11T10:55:29.307

此命令应成功执行：

```
Invoke-Command -ComputerName $client -ScriptBlock { cd C:\Windows\System32\ccmsetup; ccmsetup /uninstall} -Credential $(Get-Credential) -Authentication CredSSP 
```

但是您需要通过在每台机器上运行这两个命令来在所有机器上启用 CredSSP 身份验证：

```
Enable-WsManCredSSP -Role Server -Force
Enable-WSManCredSSP -Role Client -DelegateComputer * -Force 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T14:46:37.360

我强烈推荐下载[PSTools](http://technet.microsoft.com/en-gb/sysinternals/bb897553.aspx)。里面有一个命令叫“psexec”

PSexec 很简单，你可以这样称呼它：

```
psexec \\myserver C:\Windows\System32\ccmsetup /uninstall 
```

# c# - PanoramaBackground.png 现在显示为背景图像？

> ID：15336339
> 
> 赞同：0
> 
> 时间：2013-03-11T10:31:20.233
> 
> 标签：c#, .net, wpf, xaml

我不知道我是否做错了，但是当我运行 VS 附带的 Windows Phone 8 Panorama 模板项目时，PanoramaBackground.png 背景图像从不显示 - 不在设计视图中，不在模拟器中，也不在即使在设备上。为什么不显示？我们如何让它出现？

![在此处输入图像描述](../Images/1fdc3545d35c0f1b05ad8507bbd14717.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-23T06:56:55.850

使用“资产/PanoramaBackground.png”网址

或者

解决方案资源管理器 -> 在 PanoramaBackground.png 上单击鼠标右键 -> 单击属性 -> 将构建操作设置为资源值

# c# - 为什么以下条件运算符在包含 Nullable 类型的 StringBuilder 中工作异常？在 C# 中？

> ID：15336343
> 
> 赞同：6
> 
> 时间：2013-03-11T10:31:31.023
> 
> 标签：c#, .net, nullable, stringbuilder, conditional-operator

```
StringBuilder htmlResp=new StringBuilder();
int? cuID= 1;
string cuName="Tom";
string cuEmpID="ZXCV";

htmlResp .Append( "<option value=\"" + cuID.Value + "\">" + cuName+" ("+cuEmpID==""? "-":cuEmpID+")"+  "</option>");
html.Resp.ToString(); 
```

我不明白为什么上面的代码（从实际代码修改）总是给我奇怪的结果：“ZXCV）”而不是“Tom（ZXCV）”。

有谁知道背后的原因，如果可能的话可以提供参考吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T10:41:08.957

您在条件表达式周围缺少一些括号。

试试这个：

```
string text = "<option value=\"" + cuID.Value + "\">" + cuName + " (" + (cuEmpID == "" ? "-" : cuEmpID) + ")" + "</option>";
htmlResp.Append(text); 
```

至于*为什么*缺少括号会导致这种情况发生……这是一个有趣的问题！

为了回答这个问题，让我稍微简化一下原始代码：

```
string text = ">>>" + cuEmpID == "" ? "-" : cuEmpID + "<<<"; // Gives "ZXCV<<<" 
```

发生的事情是条件表达式`">>>" + cuEmpID == ""`用作条件。这不等于“”，因此使用了条件表达式的右侧，即`cuEmpID + "<<<"`部分，它给出了我们所看到的输出。

您应该真正简化表达式，例如：

```
string normalisedEmpID = cuEmpID == "" ? "-" : cuEmpID;

string text = string.Format
(
    "<option value=\"{0}\">{1} ({2})</option>",
    cuID.Value,
    cuName,
    normalisedEmpID
); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T10:42:02.630

“不要让表达式太复杂”的一个很好的例子。

```
 "<option value=\"" + cuID.Value + "\">" + cuName 
        + " ("+cuEmpID==""? "-":cuEmpID+")"+  "</option>"); 
```

编译为

```
 ("<option value=\"" + cuID.Value + "\">" + cuName+" ("+cuEmpID ) == "" 
      ? "-"
      : cuEmpID+")"+  "</option>"); 
```

一个简单的“修复”将是

```
 "<option value=\"" + cuID.Value + "\">" + cuName + " (" 
       + ((cuEmpID == "") ? "-" : cuEmpID ) 
       + ")" + "</option>" 
```

但为了可读性，使用一些中间变量。`?:`永远不应该嵌套在其他表达式中。

# python - pypdf 错误 - 模块对象没有属性号

> ID：15336345
> 
> 赞同：3
> 
> 时间：2013-03-11T10:31:36.130
> 
> 标签：python, pypdf

这是我正在使用的代码

```
import os
import decimal
from pyPdf import PdfFileReader
path = r"E:\python\Real Python\Real Python\Course materials\Chapter 8\Practice files"
inputFileName = os.path.join(path,"Pride and Prejudice.pdf")
inputFile = PdfFileReader(file(inputFileName,"rb"))

print "Number of pages:", inputFile.getNumPages()
print "Title:", inputFile.getDocumentInfo().title 
```

现在，当我运行此代码时，出现错误：

```
'module' object has no attribute 'Number' 
```

我截取了运行上述代码时得到的整个输出的屏幕截图，其中包含错误和所有内容。所以，请看一下，让我知道出了什么问题？

![在此处输入图像描述](../Images/3bab0b4a3e0bfb5c9edd984572f840ef.png)

在我使用`import decimal`代码之后，我得到了一些错误。因此，我截取了整个内容的屏幕截图，并将其附在此处。 ![在此处输入图像描述](../Images/ae2eddef08d3b9d4ece4222a86383510.png)

# javascript - 为什么使用命名函数表达式？

> ID：15336347
> 
> 赞同：98
> 
> 时间：2013-03-11T10:31:38.183
> 
> 标签：javascript, function, anonymous-function, function-expression

我们有两种不同的方式在 JavaScript 中进行函数表达式：

**命名函数表达式（NFE）**：

```
var boo = function boo () {
  alert(1);
}; 
```

**匿名函数表达式**：

```
var boo = function () {
  alert(1);
}; 
```

并且它们都可以用 来调用`boo();`。我真的不明白为什么/何时应该使用匿名函数以及何时应该使用命名函数表达式。他们之间有什么区别？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-03-11T10:41:56.843

在匿名函数表达式的情况下，函数是*匿名*的 ——从字面上看，它没有名字。您分配给它的变量有一个名称，但函数没有。*（更新：在 ES5 中确实如此。从 ES2015 [又名 ES6] 开始，使用匿名表达式创建的函数通常会得到一个真实的名称 [但不是自动标识符]，请继续阅读......）*

名字很有用。名称可以在堆栈跟踪、调用堆栈、断点列表等中看到。名称是一件好事™。

（您曾经不得不提防旧版本 IE [IE8 及以下] 中的命名函数表达式，因为它们错误地在两个完全不同的时间创建了两个完全独立的函数对象 [更多内容请参见我的博客文章[*Double take*](http://blog.niftysnippets.org/2010/09/double-take.html) ]。如果您需要支持 IE8 [!!]，最好坚持使用匿名函数表达式或函数*声明*，但避免命名函数表达式。）

关于命名函数表达式的一个关键是它为函数体中的函数创建了一个具有该名称的范围内标识符：

```
var x = function example() {
    console.log(typeof example); // "function"
};
x();
console.log(typeof example);     // "undefined"
```

然而，从 ES2015 开始，许多“匿名”函数表达式创建具有名称的函数，而这早于各种现代 JavaScript 引擎，它们非常聪明地从上下文推断名称。在 ES2015 中，您的匿名函数表达式会生成一个名为 的函数`boo`。但是，即使使用 ES2015+ 语义，也不会创建自动标识符：

```
var obj = {
    x: function() {
       console.log(typeof x);   // "undefined"
       console.log(obj.x.name); // "x"
    },
    y: function y() {
       console.log(typeof y);   // "function"
       console.log(obj.y.name); // "y"
    }
};
obj.x();
obj.y();
```

函数名称的分配是通过规范中各种操作中使用的[SetFunctionName抽象操作完成的。](https://tc39.github.io/ecma262/#sec-setfunctionname)

简短的版本基本上是任何时候匿名函数表达式出现在赋值或初始化之类的右侧，例如：

```
var boo = function() { /*...*/ }; 
```

*（或者它可能是`let`或`const`而不是`var`）*，或

```
var obj = {
    boo: function() { /*...*/ }
}; 
```

或者

```
doSomething({
    boo: function() { /*...*/ }
}); 
```

*（最后两个实际上是同一件事）*，生成的函数将有一个名称（`boo`在示例中为 , ）。

有一个重要且有意的例外：分配给现有对象的属性：

```
obj.boo = function() { /*...*/ }; // <== Does not get a name 
```

这是因为在添加新功能的过程中会引发信息泄露问题；[我在这里](https://stackoverflow.com/a/41912102/157247)对另一个问题的回答中的详细信息。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2015-02-19T00:49:06.657

如果函数需要引用自身（例如递归调用），命名函数很有用。实际上，如果您将文字函数表达式作为参数直接传递给另一个函数，则该函数表达式*不能*在 ES5 严格模式下直接引用自身，除非它被命名。

例如，考虑以下代码：

```
setTimeout(function sayMoo() {
    alert('MOO');
    setTimeout(sayMoo, 1000);
}, 1000); 
```

`setTimeout`如果传递给的函数表达式是匿名的，就不可能如此干净地编写这段代码。我们需要在`setTimeout`调用之前将其分配给一个变量。这种方式，使用命名函数表达式，稍微更短更整洁。

从历史上看，即使使用匿名函数表达式也可以编写这样的代码，通过利用[`arguments.callee`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/arguments/callee)...

```
setTimeout(function () {
    alert('MOO');
    setTimeout(arguments.callee, 1000);
}, 1000); 
```

...但`arguments.callee`已被弃用，并且在 ES5 严格模式下被彻底禁止。因此，MDN 建议：

> `arguments.callee()`通过***给函数表达式命名***或在函数必须调用自身的情况下使用函数声明来避免使用。

（强调我的）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-04-12T01:19:19.313

您应该**始终使用命名**函数表达式，这就是为什么：

1.  当您需要递归时，您可以使用该函数的名称。

2.  匿名函数在调试时没有帮助，因为您看不到导致问题的函数的名称。

3.  当您不命名函数时，以后很难理解它在做什么。给它起个名字更容易理解。

```
var foo = function bar() {
    //some code...
};

foo();
bar(); // Error! 
```

例如，在这里，因为名称 bar 是在函数表达式中使用的，所以它不会在外部范围内声明。对于命名函数表达式，函数表达式的名称包含在其自己的范围内。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-09-07T23:56:23.110

如果将函数指定为函数表达式，则可以为其命名。

它只在函数内部可用（IE8-除外）。

```
var f = function sayHi(name) {
  alert( sayHi ); // Inside the function you can see the function code
};

alert( sayHi ); // (Error: undefined variable 'sayHi') 
```

此名称用于可靠的递归函数调用，即使它被写入另一个变量。

此外，NFE（命名函数表达式）名称可以用`Object.defineProperty(...)`如下方法覆盖：

```
var test = function sayHi(name) {
  Object.defineProperty(test, 'name', { value: 'foo', configurable: true });
  alert( test.name ); // foo
};

test(); 
```

注意：使用函数声明无法做到这一点。此“特殊”内部函数名称仅在函数表达式语法中指定。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-11T10:38:08.110

使用命名函数表达式更好，当您希望能够引用有问题的函数而不必依赖于已弃用的功能，例如`arguments.callee`.

# c# - 如何使用 C# 从 XElement 获取元素名称？

> ID：15336352
> 
> 赞同：7
> 
> 时间：2013-03-11T10:31:49.933
> 
> 标签：c#, linq-to-xml, xelement

我有一个 Xml，我必须获取元素名称

```
 <Data>
     <Test key="G" modifier="control" /> 
     <Test1  key="E" modifier="control" /> 
     <Test3 /> 
     <Test4 /> 
 </Data>

 XDocument xd = XDocument.Load("..\\Cmd.xml");
 IEnumerable<XElement> xeCmdData = Cmd.XPathSelectElements(".//Data");

 foreach (XElement xeData in xeCmdData)
 {
     // here i am getting the whole xml how to get Element name  ... 
     // Like <Data> 
     //          <Test key="G" modifier="control" /> 
     //          <Test1  key="E" modifier="control" /> 
     //          <Test3 /> 
     //          <Test4 />  
     //      </Data>
 } 
```

如何获取元素名称？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T10:41:33.127

```
XDocument xd = XDocument.Load("..\\Cmd.xml");
IEnumerable<string> names = xd.XPathSelectElements("//Data/*")      
                              .Select(e => e.Name.LocalName); 
```

或者没有 XPath

```
IEnumerable<string> names = xd.Descendants("Data")      
                              .Elements()
                              .Select(e => e.Name.LocalName); 
```

结果：

```
Test
Test1
Test3
Test4 
```

# typo3 - Typo3 kickstarter 空白扩展名

> ID：15336361
> 
> 赞同：0
> 
> 时间：2013-03-11T10:32:13.917
> 
> 标签：typo3, kickstarter

这是我的问题：我在typo3（4.7.10）上使用kickstarter创建了几个扩展，但是当我想将扩展添加到页面时，我只有没有任何名称的默认图标

![](../Images/e32e3f1932670c38da99d8bfedcd0563.png)

但扩展名在此屏幕中正确显示

![](../Images/f79220e24446dbadb727b1c78620c5c8.png)

`locallang.xm`l 和是正确的`locallang_dg.xml`，如果我编辑它们，问题仍然存在

```
<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<T3locallang>
<meta type="array">
<type>module</type>
<description>Language labels for extension 'user_documentations'</description>
</meta>
<data type="array">
<languageKey index="default" type="array">
<label index="pi1_title">Documentations</label>
<label index="pi1_plus_wiz_description">Afficher les documentations</label>
</languageKey>
</data>
</T3locallang> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:05:40.797

您需要将插件配置添加到`TSconfig`.

检查`mod.wizards.newContentElement.wizardItems.<tab>.<entry>.`配置。

您可以`TSconfig`在您的`ext_localconf.php`via中添加`t3lib_extMgm::addPageTSConfig('static TSconfig string');`。

这是我的一个私人扩展的示例配置：

```
t3lib_extMgm::addPageTSConfig('                                                                     
mod.wizards.newContentElement.wizardItems {                                                         
    common.elements {                                                                               
        wvv {                                                                                       
            icon = ../typo3conf/ext/pgampe_bonnvolley/wvvlogo24x24.png                              
            title = LLL:EXT:pgampe_bonnvolley/locallang_db.xml:tt_content.plugin_wvv_title          
            description = LLL:EXT:pgampe_bonnvolley/locallang_db.xml:tt_content.plugin_wvv_description
            tt_content_defValues {                                                                  
                CType = wvv                                                                     
                tx_pgampebonnvolley_option = 4                                                  
            }                                                                                       
        }                                                                                           
    }                                                                                               
    common.show := addToList(wvv)                                                                   
}                                                                                                   
'); 
```

# css - 如何使用带有内联元素的 HTML5 Boilerplate ir 类？

> ID：15336367
> 
> 赞同：1
> 
> 时间：2013-03-11T10:32:48.733
> 
> 标签：css, html5boilerplate, image-replacement

我正在使用 HTML5 Boilerplate css，我想将该`ir`类应用于我的页脚菜单。菜单在一个列表中，我使用 inline-block 水平显示这个列表。

这是代码[的小提琴](http://jsfiddle.net/Kt8Qe/)。您可以看到图像替换有效，但后面的文本菜单元素（没有图像）被翻译到底部。这是由于`.ir:before`css 规则模拟了占用一些空间的块元素。

有没有办法在没有这种副作用的情况下使用 HTML5 Boilerplate 技术？如果没有，我将回到`text-indent:-9999px`技术上。

额外的问题：与文本缩进相比，HTML5 样板技术有什么好处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:09:56.953

该`text-indent: -9999px`方法有一些缺点。主要有：

*   在 IE6 和 IE7 中对 inline-block 元素不起作用。
*   第一代 事实证明，iPad 使用这种技术存在性能问题，页面渲染速度大大降低。
*   即使我们看不到它，任何设备中的任何浏览器都必须绘制一个巨大的 div（超过 9999px）溢出屏幕。这对性能**不利**，因为它会增加页面加载时间并需要更多内存资源。

HTML5 Boilerplate 中的`.ir`技术已被证明具有更高的性能和可靠性。你在做正确的事。

话虽如此，我不能 100% 确定您要在代码中实现什么。[我在这个小提琴](http://jsfiddle.net/gleezer/Kt8Qe/1/)中稍微重构了 html 。

如您所见，我设置了红色边框以了解元素的确切位置以及它们占用的空间。每个图像/文本现在都是独立的`<li>`，这是语义逻辑（一个链接/一个列表项），如下所示：

```
 <ul>
     <li>facebook<li>
     <li>twitter</li>
     <li>example page</li>
 <ul> 
```

我还删除了`float:left`导航，因为您需要在其中浮动元素，而不是容器本身。希望这可以清除它并帮助您到达您想要的地方。如果需要任何改进或者我误解了您想要实现的目标，我已准备好编辑此答案。

# c# - 如何在静态方法中引用非静态对象

> ID：15336369
> 
> 赞同：1
> 
> 时间：2013-03-11T10:32:53.900
> 
> 标签：c#, methods, static, textbox

我创建了一个文本框并希望在静态方法中引用它。我怎样才能做到这一点？这是我的代码

```
 private void Form1_Load(object sender, EventArgs e)
    {
        TextBox textbox2 = new TextBox();
        textbox2.Text = "A";
    }

    static void gettext() 
    {
        textbox2.Text = "B"; //here is my problem
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T10:35:30.843

您需要以某种方式将其传递给静态方法，最简单的选择是扩展方法签名以接受文本框：

```
static void gettext(TextBox textBox) 
{
    textBox.Text = "B"; //here is my problem
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T10:35:47.530

您应该将文本框作为静态方法的参数

```
static void gettext(TextBox textbox)
{
    textbox.Text = "B";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T10:35:34.640

我不确定您是否理解静态的含义，静态意味着它属于 CLASS 而不是该类的 INSTANCE。可能更好的解决您的问题的方法是创建一个设置文本的实例方法。

```
// private variable
private TextBox textbox2;

private void Form1_Load(object sender, EventArgs e)
{
    // refers to private instance variable
    textbox2 = new TextBox();
    textbox2.Text = "A";
}

private void gettext() 
{
    // refers to private instance variable
    textbox2.Text = "B";
} 
```

如果您在理解上有困难`static`，您可能不需要使用它。静态成员可用于类的所有实例，但不属于其中任何一个，这意味着静态方法无法访问私有成员。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-11T10:37:12.793

你可以这样做

```
static void gettext(TextBox textbox2) 
{
    textbox2.Text = "B";
} 
```

在代码中

```
private void Form1_Load(object sender, EventArgs e)
{
    YourClass.gettext(textbox2);
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-11T10:45:46.370

您可以在 Load 上创建一个静态变量集：

```
private static readonly TextBox _textBox = new TextBox();

private void Form1_Load(object sender, EventArgs e)
{
    _textBox.Text = "A";
}

static void gettext()  
{ 
    _textbox2.Text = "B";
} 
```

# c++ - 在 linux 上编译和链接不同版本的 gcc

> ID：15336371
> 
> 赞同：2
> 
> 时间：2013-03-11T10:32:58.937
> 
> 标签：c++, gcc, linker, elf

我打算用 gcc 4.7.1 编译一个静态库（mylib.a）。我想利用C++11的优势，所以使用-std=c++11。我编译这个库的平台是带有 glibc-2.8 的 x86_64 SLES 11。

然后我想将遗留平台上的这个静态库与遗留代码链接，因此我必须使用 gcc 4.1.2 来链接和编译遗留代码。所以在我的库头文件中，我不会使用任何 C++11 特定代码。我还将从 gcc.4.7.1 链接 libstdc++.a。我想链接 mylib.a、libstdc++.a(gcc4.7.1) 和旧目标文件的平台是 x86_64 SLES 10 和 glibc-2.4。

我用 mylib.a 中的一些虚拟 C++11 代码 (std::async()) 尝试了所有这些混乱，并且成功了。我认为这可能只是因为 ELF 的要求。我的想法是否正确，或者ELF与它无关？如果 mylib.a 包含一些真正复杂的逻辑，我应该期待什么样的错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T10:37:36.633

[Linux 有一个 C++ 应用程序二进制接口 (ABI)](http://refspecs.linux-foundation.org/cxxabi-1.83.html)，它已经存在了一段时间。这意味着 Linux 上跨编译器的调用约定和名称修改是固定的。因此，只要库是兼容的，您就应该能够使用不同的编译器（或同一编译器的不同版本）进行编译，并拥有正确可靠地链接在一起的代码。

不完全是 ELF 要求*本身*......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T10:38:35.290

GCC 保证二进制兼容性一直追溯到某个古老的 3 版本。只要您链接到的 libstdc++ 具有新的库功能，您就没有理由不能使用它们。您只需远离使用 GCC 4.1.2 编译的代码中的新语言和库特性。

# visual-studio-2008 - 如何控制 msvcr90d.dll/msvcp90d.dll 的 SxS

> ID：15336378
> 
> 赞同：0
> 
> 时间：2013-03-11T10:33:16.317
> 
> 标签：visual-studio-2008, dll, msvcr90d.dll

经过长时间的学习/研究，我发现

我的应用程序应该使用 msvcr90d.dll/msvcp90d.dll -- 9.0.21022.8 但是当我用 vs2008 调试它时，它总是使用 msvcr90d.dll -- 9.0.30729.6161

我认为这应该是我的应用程序因 STL 标准向量异常（来自第 3 方 DLL）而崩溃的根本原因。我曾经使用 vs2008 在我的机器上成功运行过该应用程序。一定是其他应用影响了我的应用。

我什至重新安装 vs2008（一次又一次），并为我的应用程序调整清单选项，没有任何改变。我和我的应用程序一起崩溃了。（在我准备向老板演示之前，该应用程序崩溃了……）

我的机器上也有 vs2010、vs2012。但是，当它们已经存在时，该应用程序就可以正常工作。在应用程序崩溃之前，我唯一记得的就是我使用 TeamViewer 远程访问我的机器……第二天，邪恶的日子开始了。

如何控制我的应用程序的 SxS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:27:39.380

您在清单中要求的 DLL 版本 .21022.8 正在通过发布者策略文件进行*重定向*，这些发布者策略文件也部署在您的并行缓存中。这使您最终获得了 SP1 版本以及几个安全补丁。这是 Microsoft 可以用来修补运行时 DLL 中的安全漏洞的主要机制。

您可以相当确定的一件事是，它**不是**导致您的问题的 DLL 版本，这个第 3 方 DLL 要求的版本将受到相同的版本重定向规则的约束。顺便说一句，易于检查，查看 Debug + Windows + Modules 窗口并查找 msvcr90d.dll。您将查看是否加载了多个，并且可以看到版本号。并注意发布版本的 msvcr90.dll，将它们都加载到进程中是非常糟糕的。当您链接到 DLL 的发布版本时可能会发生这种情况。

一种标准的导致崩溃的不匹配是[_HAS_ITERATOR_DEBUGGING #define](http://msdn.microsoft.com/en-us/library/vstudio/aa985939%28v=vs.90%29.aspx)。迭代器调试会更改 C++ 集合类对象的大小。当 DLL 通过导出的函数公开这样的对象并为此 #define 使用不同的设置进行编译时，就会出错。它公开的对象布局错误。您必须确保您使用的设置与第 3 方在编译 DLL 时使用的设置相同。Debug 版本默认打开它，因此将项目的#define 设置为 0 很可能是快速修复。如果您不知道或希望他们更改设置，请联系供应商。也许也是指出跨 DLL 边界公开 C++ 对象是一个坏主意的好时机。

# vb.net - 仅使用一个事件处理程序按下时在按钮内获取文本

> ID：15336379
> 
> 赞同：1
> 
> 时间：2013-03-11T10:33:19.817
> 
> 标签：vb.net, button

我正在做一个简单的计算器。我厌倦了在每个按钮中分配事件处理程序，它效率低下。

我只希望一个事件处理程序在按下时获取按钮内的文本。

怎么做？

```
 Private Sub num1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles co.Click
    numPressed = num1.Text
End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T10:40:09.250

在您的点击事件中：

```
Dim button as Button = sender
Dim theTextYouWant as String = button.Text 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T11:23:16.907

您可以`button's click event`像这样在运行时有效地添加句柄，

我假设您的`buttons`内部是`panel`被调用的`PnlBtns`。

```
'Traversing through panel and adding a common handler for buttons
For each ctrl in PnlBtns.controls
 If TypeOf ctrl is button then
   AddHandler ctrl.Click, AddressOf CommonClickHandler
 end if
Next

'Common Handler for all of your buttons.
Private Sub CommonClickHandler(ByVal sender As System.Object, ByVal e As System.EventArgs)
  MsgBox(ctype(sender,button).text)
End Sub 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T10:49:39.890

只需添加您要使用函数处理的所有事件，并检测在其中按下了哪个按钮：

```
Private Sub num1_Click(sender As Object, ByVal e As EventArgs) _
Handles co.Click, co2.Click, co3.Click 'etc
    Dim btn As Button = CType(sender, Button)
    numPressed = btn.Text
End Sub 
```

# php - fr3d LdapBundle - 防止登录

> ID：15336383
> 
> 赞同：1
> 
> 时间：2013-03-11T10:33:27.853
> 
> 标签：php, symfony-2.1, fr3dldapbundle

我正在使用 LDAP 对我的用户进行身份验证（回退到 FOS 用户捆绑包）。一切正常，我可以登录。

然而，这产生了一个“新”问题。我希望控制谁可以使用 FOS 登录应用程序，但使用 LDAP 控制他们的密码。

我使用 ROLES 进行了尝试：

```
- { path: ^/, role: ROLE_PGM_USER } 
```

但这不是正确的地方，因为此时用户已经登录。

有没有办法将 fr3d 配置为也检查 fos “启用”字段，然后在不允许他们登录时显示自定义消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:39:32.897

找到了。

使用此处的说明覆盖 LdapManager ( [https://github.com/Maks3w/FR3DLdapBundle/blob/master/Resources/doc/cookbook/override_ldap-manager.md](https://github.com/Maks3w/FR3DLdapBundle/blob/master/Resources/doc/cookbook/override_ldap-manager.md) )。

然后像这样更改绑定函数：

```
/**
 * {@inheritDoc}
 */
public function bind(LdapUserInterface $user, $password)
{
    if (!$user->hasRole('ROLE_PGM_USER')) {
        return false;
    }
    return $this->connection->bind($user->getDn(), $password);
} 
```

这样可以防止没有“ROLE_PGM_USER”的用户登录。

# linux - 统计二进制数据的出现次数

> ID：15336386
> 
> 赞同：6
> 
> 时间：2013-03-11T10:33:47.413
> 
> 标签：linux, binary, grep

我需要计算`0xFF 0x84 0x03 0x07`二进制文件中十六进制字符串的出现次数，没有太多麻烦......有没有一种从linux命令行快速获取这些数据的方法，或者我应该编写专门的代码来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-05-30T23:01:44.080

如果您的版本`grep`采用`-P`参数，那么您可以使用`grep -a -P`, 在二进制文件中搜索任意二进制字符串。这接近你想要的：

```
grep -a -c -P '\xFF\x84\x03\x07' myfile.bin 
```

*   `-a`确保不会跳过二进制文件

*   `-c`输出计数

*   `-P`指定您的模式是与 Perl 兼容的正则表达式 (PCRE)，它允许字符串包含上述`\xNN`格式的十六进制字符。

不幸的是，`grep -c`只会计算模式出现的“行”数 - 而不是实际出现的次数。

要获得 的确切出现次数`grep`，您似乎需要执行以下操作：

```
grep -a -o -P '\xFF\x84\x03\x07' myfile.bin | wc -l 
```

`grep -o`将每个匹配项分开到自己的行中，并`wc -l`计算行数。

请注意，这一切都取决于您的二进制字符串不包含换行符这一事实。

如果您确实需要使用此方法 grep 换行符，我能想到的最简单的方法是`tr`将字符交换为不在您的搜索词中的另一个字符。

```
# set up test file (0a is newline)
xxd -r <<< '0:08 09 0a 0b 0c 0a 0b 0c' > test.bin

# grep for '\xa\xb\xc' doesn't work
grep -a -o -P '\xa\xb\xc' test.bin | wc -l

# swap newline with oct 42 and grep for that
tr '\n\042' '\042\n' < test.bin | grep -a -o -P '\042\xb\xc' | wc -l 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:46:02.170

像使用 hexdump

`hexdump -v -e '"0x" 1/1 "%02X" " "' <filename> | grep -oh "0xFF 0x84 0x03 0x07" |wc -w`

`hexdump`将以给定格式输出二进制文件，如 0xNN

`grep`将找到所有出现的字符串，而不考虑在一行上重复的相同字符串

`wc`会给你最后的计数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:24:59.187

How about:

```
$ hexdump a.out | grep -Ec 'ff ?84 ?03 ?07' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T10:38:47.720

你试过了`grep -a`吗？

来自 grep 手册页：

```
-a, --text
              Process a binary file as if it were text; this is equivalent to the --binary-files=text option. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-14T16:49:17.213

This doesn't quite answer your question, but does solve the problem when the search string is ASCII but the file is binary:

```
cat binaryfile | sed 's/SearchString/SearchString\n/g' | grep -c SearchString 
```

Basically, 'grep' was almost there except it only counted one occurrence if there was no newline byte in between, so I added the newline bytes.

# delphi - 如何用 FM 播放 AVI 文件？

> ID：15336394
> 
> 赞同：2
> 
> 时间：2013-03-11T10:34:47.960
> 
> 标签：delphi, video, firemonkey, avi

谁能告诉我如何用 FireMonkey 播放 AVI 文件？我应该使用哪个组件？

我搜索了所有组件，但没有发现任何有用的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T10:52:09.373

1.  将 TMediaPlayer 添加到您的表单
2.  将 TMediaPlayerControl 添加到您的表单
3.  将 TButton 添加到您的表单
4.  双击您的按钮
5.  在开始和结束标签之间插入

`if MediaPlayer1.Media <> nil then begin MediaPlayer1.Play; end;`

它应该如下所示：
[![截屏](../Images/92d18591bfb9da4487355088cae21cc0.png)](https://fs.fnkr.net/4rliHuUEvZvb)

6.  更改`C:\earth.avi`为 avi 文件的位置

结果：

[![截屏](../Images/55cae4f482a0e54a992286a23643ecff.png)](https://fs.fnkr.net/RwSITpPyztdu)

# c - 如何使用strcpy将字符串复制到字符串数组中？

> ID：15336400
> 
> 赞同：2
> 
> 时间：2013-03-11T10:35:12.330
> 
> 标签：c, string, malloc, strcpy

我正在尝试将一个字符串复制到一个字符串数组中，但它不起作用。我知道这是由于内存分配造成的问题，但我不知道如何使它工作，因为 STRING_LENGTH 是一个常数。

```
#define NUMBER_OF_STRINGS 3
#define STRING_LENGTH 255
char message_ecran[NUMBER_OF_STRINGS][STRING_LENGTH];

int i;
char texte3[] = "CVC";
char texte7[] = "iiiiiiiii";

for (i=0;i<=NUMBER_OF_STRINGS;i++)
{
    strcpy(message_ecran[i], texte7);
}
strcpy(message_ecran[0], texte3); 
```

代码后 message_ecran 的值：

```
"CVC"
null
"iiiiiiiii" 
```

期望值

```
"CVC"    
"iiiiiiiii"
"iiiiiiiii" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T10:36:53.427

`message_ecran`一个问题是您在以下循环中运行结束：

```
for (i=0;i<=NUMBER_OF_STRINGS;i++) 
```

由于`message_ecran[NUMBER_OF_STRINGS]`超出范围，因此尝试`strcpy()`进入它会导致[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)。

**编辑**关于您的编辑，我无法重现该问题。当我将以下内容添加到您的最新代码时：

```
for (i = 0; i < NUMBER_OF_STRINGS; i++) {
  printf("%d:[%s]\n", i, message_ecran[i]);
} 
```

它打印出来

```
0:[CVC]
1:[iiiiiiiii]
2:[iiiiiiiii] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T10:37:29.750

该代码具有未定义的行为，因为它在此行超出了数组的边界：

```
for (i=0;i<=NUMBER_OF_STRINGS;i++) 
```

因为数组索引是从零开始的，并且从`0`到数组`N - 1`中`N`的元素数。这意味着有效的数组索引`message_ecran`是`0`且`1`仅，但`2`将用作`for`循环中的索引。改成：

```
for (i=0;i<NUMBER_OF_STRINGS;i++) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:38:09.207

此外，您可以从 1 开始循环，即

```
for (i = 1; i < NUMBER_OF_STRINGS; i++) 
```

因为您稍后将在第零个位置分配“texte3”。

# ruby-on-rails-3.2 - 测试重复对象时出现 rspec 错误 [Rails]

> ID：15336404
> 
> 赞同：0
> 
> 时间：2013-03-11T10:35:25.730
> 
> 标签：ruby-on-rails-3.2, rspec-rails

我的 rspec 测试都运行良好，除非我复制对象以测试属性的唯一性。

这是模型：

**应用程序/模型/驱动程序.rb**

```
1\.  class Driver < ActiveRecord::Base
2\.    attr_accessible :last_name, :first_name, :short_name
# irrelevant code
18\. before_save do
19\.   last_name = last_name.gsub(' ', '-').capitalize!
20\.   if last_name.include? '-'
21\.     last_name[(last_name.index('-'))+1] = last_name[(last_name.index('-'))+1].capitalize!
22\.   end
23\. end
24\. before_save do
25\.   first_name = first_name.gsub(' ', '-').capitalize!
26\.   if first_name.include? '-'
27\.     first_name[(first_name.index('-'))+1] = first_name[(first_name.index('-'))+1].capitalize!
28\.   end
29\. end
30\. before_save { short_name.downcase! }
# more irrelevant code
59\. validates :short_name, presence: true, length: { maximum: 10 },
60\.                   uniqueness: { case_sensitive: false } 
```

因此，我通过复制驱动程序对象来测试 short_name 属性的唯一性，如下所示：

**规格/模型/driver_spec.rb**

```
require 'spec_helper'

  describe Driver do

    before do
      @driver = Driver.new(last_name: "Driver", first_name: "Example", short_name: "exdrvr")
    end

  subject { @driver }

  it { should respond_to(:last_name) }
  it { should respond_to(:first_name) }
  it { should respond_to(:short_name) }

  it { should be_valid }

  # a bunch of other tests, all of which work fine

  describe "when short name is already taken" do
    before do
      driver_with_same_short_name = @driver.dup
      driver_with_same_short_name.short_name = @driver.short_name.upcase
      driver_with_same_short_name.save
    end
    it { should_not be_valid }
  end 
```

这是我运行所有测试时得到的结果：

```
.................................F....

Failures:

  1) Driver when short name is already taken 
     Failure/Error: driver_with_same_short_name.save
     NoMethodError:
       undefined method `gsub' for nil:NilClass
     # ./app/models/driver.rb:19:in `block in <class:Driver>'
     # ./spec/models/driver_spec.rb:128:in `block (3 levels) in <top (required)>'

Finished in 1.74 seconds
38 examples, 1 failure

Failed examples:

rspec ./spec/models/driver_spec.rb:130 # Driver when short name is already taken 
```

因此，基本上所有测试都运行良好，除非我复制驱动程序对象。然后 last_name 属性突然为零。我尝试在模型文件的第 18-23 行注释掉 before_save 块，当然我也收到了相同的 first_name 错误消息。知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:14:59.457

发现了问题：根本不在我的规范中，而是在模型的 before_save 块中。我将 driver.rb 中的第 18-23 行替换为

```
before_save { self.last_name = last_name.gsub(' ', '-').split('-').each { |x| x.capitalize! }.join('-') } 
```

对于 first_name 块也是如此。测试现在运行良好。更重要的是，该模型现在实际上正在做我打算做的事情。我想这就是测试的目的！

# sql - 如何组合两个查询以创建多个列

> ID：15336411
> 
> 赞同：0
> 
> 时间：2013-03-11T10:35:44.100
> 
> 标签：sql, sql-server-2008

我想结合 2 个查询来制作一个这样的结果

```
Sandi | schemaid | value | Sandi | schemaid | value
100   | 2883     | 12324 | 200   | 2886     | 3456
120   | 2882     | 435   | 220   | 2887     | 555 
130   | 2881     | 3456  | 230   | 2888     | 333 
```

查询是：

```
select y.Sandi , y.schemaid,y.value from tbl_schema y
where y.idx=1

select y.Sandi , y.schemaid,y.value from tbl_schema y
where y.idx=2 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:44:30.927

由于您希望单独的`idx`数据出现在列中而不是行中，因此您可以使用 include a`row_number()`并加入 row_number 上的单独查询，类似于：

```
select
  q1.Sandi q1_Sandi,
  q1.schemaid q1_schemaid,
  q1.value q1_value,
  q2.sandi q2_Sandi,
  q2.schemaid q2_schema_id,
  q2.value q2_value
from
(
  select sandi, schemaid, value,
    row_number() over (order by sandi) rn
  from tbl_schema
  where idx = 1
) q1
full outer join
(
  select sandi, schemaid, value,
    row_number() over (order by sandi) rn
  from tbl_schema
  where idx = 2
) q2
  on q1.rn = q2.rn 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/7fd3f/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:57:25.133

由于您在两个查询中都使用同一个表（tbl_schema），*`for given ids (idx)`*我认为您可以使用`full outer join`如下：

```
select y.Sandi, y.schemaid, y.value, x.Sandi_, x.schemaid_, x.value_  
from tbl_schema y full outer join tbl_schema x
       on y.idx + 1 = x.idx
where y.idx = 1 and x.idx = 2 
```

# android - 为第二个相对布局调用 ViewFlipper.addView 时引发 IllegalStateException

> ID：15336418
> 
> 赞同：1
> 
> 时间：2013-03-11T10:35:59.127
> 
> 标签：android, android-layout, android-relativelayout

我想在 viewFlipper 中显示两个以上的相对布局，但运行以下代码会引发异常

> java.lang.IllegalStateException：指定的孩子已经有一个父母。您必须首先在孩子的父母上调用 removeView()。

代码：

```
for (int i = 0; i < imageid.length; i++)  
{
    RelativeLayout image = new RelativeLayout(MainActivity.this);  

    // image.addView(rrl3);
    // image.addView(rrl4);

    image.setBackgroundResource(imageid[i]);  

    vflp.addView(rrl3);
    vflp.addView(image, new LayoutParams(  
        LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
} 
```

# java - Java HTTP 服务器和资源

> ID：15336420
> 
> 赞同：1
> 
> 时间：2013-03-11T10:36:05.013
> 
> 标签：java, android, http, nanohttpd

我正在使用 NanoHTTPd 从我的 android 应用程序中提供文件。我可以很好地打开 .html 文件，但它正在尝试查看问题所在的图像。不会显示网页背景图像之类的任何内容。

有没有人有任何示例代码。我知道 nanoHTTPd 可以做到这一点。我在 Android 和 Java 方面有很多经验，但这是我第一次使用服务器。

```
private class MyHTTPD extends NanoHTTPD {
    public MyHTTPD() throws IOException {
        super(PORT, null);
    }

    @Override
    public Response serve(String uri, String method, Properties header, Properties parms, Properties files) {
        Log.d("response", "URI:" + uri + " method: " + method + " header: " + header + " parms: " + parms + " files: " + files);
        final StringBuilder buf = new StringBuilder();
        for (Entry<Object, Object> kv : header.entrySet())
            buf.append(kv.getKey() + " : " + kv.getValue() + "\n");
        handler.post(new Runnable() {
            @Override
            public void run() {
                hello.setText(buf);
            }
        });

        String html = null;
        InputStream is = null;
        if (uri.length() > 3) {
            // respond with resource or sub page

            // serve image?
            if (uri.substring(uri.lastIndexOf("."), uri.length()).equals(".jpg")) {
                try {
                    is = new FileInputStream(Environment.getExternalStorageDirectory().getPath() + "/WiFile" + uri);
                    Log.d("Serve", "image: " + Environment.getExternalStorageDirectory().getPath() + "/WiFile" + uri);
                } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            } else {
                //serve page
                try {
                    is = new FileInputStream(Environment.getExternalStorageDirectory().getPath() + "/WiFile" + uri);
                    Log.d("response subpage", Environment.getExternalStorageDirectory().getPath() + "/WiFile" + uri);
                } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        } else {
            // respond with index
            try {
                is = new FileInputStream(Environment.getExternalStorageDirectory().getPath() + "/WiFile/" + "index.html");
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            Log.d("response index", Environment.getExternalStorageDirectory().getPath() + "/WiFile/" + "index.html");
        }

        byte[] b;
        try {
            b = new byte[is.available()];
            is.read(b);
            html = new String(b);
        } catch (IOException e) { // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return new NanoHTTPD.Response(HTTP_OK, MIME_HTML, html);
    }
} 
```

编辑：

在浏览器中打开图像只会返回大量文本符号（...ï¿½ï¿½kï¿½OOOï¿½...）。我是否以错误的方式解析图像？

使固定：

就像古斯塔夫说的那样，我没有使用正确的模因类型，但我也没有返回 serveFile(.....) 例如....

```
// serve image?
            if (uri.substring(uri.lastIndexOf("."), uri.length()).equals(".jpeg")) {
                try {
                    is = new FileInputStream(Environment.getExternalStorageDirectory().getPath() + "/WiFile" + uri);
                    mimeType = "image/jpeg";
                    Log.d("Serve", "image: " + Environment.getExternalStorageDirectory().getPath() + "/WiFile" + uri);
                    return serveFile(uri, header, new File(Environment.getExternalStorageDirectory().getPath() + "/WiFile"), true);
                } catch (FileNotFoundException e) {}
            } else {
                //serve page
                try {
                    is = new FileInputStream(Environment.getExternalStorageDirectory().getPath() + "/WiFile" + uri);
                    mimeType = MIME_HTML;
                    Log.d("response subpage", Environment.getExternalStorageDirectory().getPath() + "/WiFile" + uri);
                    return serveFile(uri, header, new File(Environment.getExternalStorageDirectory().getPath() + "/WiFile"), true);
                } catch (FileNotFoundException e) {}
            }
        } else {
            // respond with index
            try {
                is = new FileInputStream(Environment.getExternalStorageDirectory().getPath() + "/WiFile/" + "index.html");
                mimeType = MIME_HTML;
                Log.d("response index", Environment.getExternalStorageDirectory().getPath() + "/WiFile/" + "index.html");
                return serveFile(uri, header, new File(Environment.getExternalStorageDirectory().getPath() + "/WiFile"), true);
            } catch (FileNotFoundException e) {}
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:01:17.233

无论您要作为有效负载发送什么，您都将传递`MIME_HTML`给构造函数。`Response`参数是 a `String`，所以试试

```
return new NanoHTTPD.Response(HTTP_OK, "image/jpeg", html); 
```

提供 (JPEG) 图像时。

# javascript - sencha touch 中的操作栏

> ID：15336421
> 
> 赞同：-1
> 
> 时间：2013-03-11T10:36:07.320
> 
> 标签：javascript, extjs, sencha-touch-2, extjs4.1

`xtype : actioncolumn`sencha touch 中是否有类似 extjs 4.1 的列配置？如果没有，那么 sencha touch 有什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:45:07.810

你可以试试这个：

> 在 Sencha Touch 中，我们可以使用 Ext.field.select

有关更多详细信息，您可以参考此链接：

> [http://docs.sencha.com/touch/2-0/#!/api/Ext.field.Select](http://docs.sencha.com/touch/2-0/#!/api/Ext.field.Select)

# hadoop - Stage-1 的 Hadoop 作业信息：reducer 的数量始终显示为 1。我无法更改它。我怎样才能改变它？

> ID：15336422
> 
> 赞同：1
> 
> 时间：2013-03-11T10:36:08.997
> 
> 标签：hadoop, hive

我在 hadoop 集群上使用 Hive。每当我尝试运行配置单元查询时，它总是显示为

> Stage-1 的 Hadoop 作业信息：reducer 数量：1

我使用了以下 Hive 配置：

```
hive.exec.reducers.bytes.per.reducer=1000000000
hive.exec.reducers.max=999 
```

请告诉我如何增加数量减少器。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:27:23.640

确保您已完成以下几点：

您的 mapred.reduce.tasks 默认为 -1。通过将此属性设置为 -1，Hive 将自动计算出减速器的数量。

没有分组的 hive 查询将仅使用 1 个 reducer。

另请注意，当 mapred.job.tracker 为“本地”时，hadoop 默认将 mapred.reduce.tasks 的值设置为 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:45:37.013

您是否尝试设置 mapred.reduce.tasks 参数？

# ajax - 如何使用 f:ajax 在 jsf 结构的不同部分渲染内容

> ID：15336424
> 
> 赞同：1
> 
> 时间：2013-03-11T10:36:14.823
> 
> 标签：ajax, jsf, xpath

我的问题的简明版本是这样的：我如何响应模糊事件

```
<h:inputText> 
```

获得相同的值以显示在 a

```
<h:outputText> 
```

位于 inputText 字段的范围之外。

inputtext 字段具有以下 xpath：

```
//*[@id="form:j_idt40:src_table:0:j_idt137"] 
```

输出文本位于此处：

```
//*[@id="form:j_idt40:target_table:0:target_id"] 
```

我正在使用 primefaces 数据表，两条路径位于两个单独的数据表中

输入字段的jsf代码如下：

```
<p:dataTable id="src_table">
    <p:column id="src_id" headerText="srcHeader">
        <h:inputText value="#{bean.myAttribute}">
            <f:ajax event="blur" render="src_id WHAT_SHOULD_GO_HERE?" ></f:ajax>
        </h:inputText>
    </p:column>
</p:datatable> 
```

输出代码如下

```
<p:dataTable id="target_table">
    <p:column headerText="TargetHeader">
        <h:outputText id="target_id" value="#{bean.myAttribute}" />
    </p:column>
</p:datatable> 
```

我在 WHAT_SHOULD_GO_HERE 上尝试了几条路径？占位符，但我似乎无法正确处理。他们最终都抛出了面部异常，如下所示：

```
javax.faces.FacesException: <f:ajax> contains an unknown id ':target_id' - cannot locate it in the context of the component j_idt137 
```

这当然是我替换 WHAT_SHOULD_GO_HERE 的时候？与：target_id

我也试过：

```
form:j_idt40:target_table:0:target_id, 

:form:j_idt40:target_table:0:target_id 
```

但没有运气。

任何人都可以帮助我理解 xpath 甚至 f:ajax 并渲染视图的特定部分吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:24:02.447

> *谁能帮助我理解 xpath*

JSF 根本不使用 Xpath `<f:ajax>`。它只需要一个相对或绝对的客户端 ID。这在[如何找出组件的客户端 ID 以进行 ajax 更新/渲染中进行了详细说明？找不到从 "bar" 引用的表达式 "foo" 的组件](https://stackoverflow.com/questions/8634156/how-to-reference-components-in-jsf-ajax-cannot-find-component-with-identifier/8644762#8644762)。

您应该只将由自动生成的 ID 表示的组件更改`j_idt40`为具有固定 ID 集，否则当您稍后在视图中添加或删除组件时它会再次中断。

# c++ - 'vector' 没有命名类型

> ID：15336428
> 
> 赞同：0
> 
> 时间：2013-03-11T10:36:33.613
> 
> 标签：c++, vector, namespaces

我对 C++ 相当陌生，并且在将向量声明为类变量时遇到了问题。通过使用类似的策略，我让它们在我的代码中的其他地方工作，但它不喜欢我的头文件。

```
error: ‘vector’ does not name a type
error: ‘vector’ has not been declared
error: expected ‘,’ or ‘...’ before ‘&lt;’ token
error: ‘vector’ does not name a type 
```

我已经评论了 GCC 指出的问题。

```
#ifndef HEADER_H
#define HEADER_H

#include <cstdlib>
#include <vector>
#include <string>

using std::string;

//  Class declarations

class Node {
    int id;
    string type;
public:
    Node(int, string);
    int get_id();
    string get_type();
    string print();
};

class Event {
    string name, date, time;
public:
    Event(string, string, string);
    string get_name();
    string get_date();
    string get_time();
    string print();
};

class Course {
    char id;
    std::vector<Node*> nodes[40];     // This one
public:
    Course(char, std::vector<Node*>); // This one
    char get_id();
    std::vector<Node*> get_nodes();   // & this one.
    string print();
};

class Entrant {
        int id;
        Course* course;
        string name;
    public:
        Entrant(int, char, string);
        int get_id();
        Course* get_course();
        string get_name();
        string print();
    };

    //  Function declarations

void menu_main();

void nodes_load();
void event_create();
void entrant_create();
void course_create();

#endif  /* HEADER_H */ 
```

[这是我的 IDE 中错误的屏幕截图](http://imgur.com/uutPSOx)，如果提供更多线索的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T10:41:08.603

从实际编译代码中我可以看到的唯一问题是您`Course`在`Entrant`课堂上使用但此时您没有定义`Course`。

如果您像这样转发`Course`上面的声明`Entrant`：

```
class Course;

class Entrant { }; //class definition 
```

然后你的代码编译，根据这个[活生生的例子](http://liveworkspace.org/code/309uU7%243)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T11:23:21.347

你是作弊 ;-） 。您提供给我们的代码有`std::vector`，它可以工作，而您屏幕截图中的代码有`vector`哪个不起作用（编译器不知道从哪里得到它）。

解决方案：更改您的代码以使用`std::vector`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T10:42:30.073

你安装了stl吗？也许这会对你有所帮助[http://ubuntuforums.org/showthread.php?t=1261897](http://ubuntuforums.org/showthread.php?t=1261897)

# cloud-foundry - 在云代工基础设施上部署多个版本

> ID：15336431
> 
> 赞同：0
> 
> 时间：2013-03-11T10:36:36.767
> 
> 标签：cloud-foundry

我正在尝试在基于 BOSH 的 CF 实例上部署多个版本（例如 cassandra cf-release、mysql cf-release、elasticsearch cf-release）。对于上面列出的每个单独的版本，我都有一个部署清单文件，其中列出了部署云代工厂和与该版本关联的服务的组件。由于与 CF 相关的基础设施已经部署并运行，我想知道部署清单中是否有办法指向当前正在运行的 CF。目前，我在每个服务版本中重复 CF 的部署信息，这导致 BOSH 为每个版本部署 CF。

总而言之，我希望有两种类型的部署清单，如下所示：

1.  仅 CF 版本（仅用于 CF 部署的基础设施、网络、作业和属性）
2.  Service only CF release - （指向当前运行的 CF + 基础设施、网络、作业和属性，仅用于服务部署）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:34:02.043

感谢您对 CloudFoundry 的积极关注。为了实现您的目标，您可以部署一个清单，然后您可以添加/删除/编辑作业和包并重新部署，它只会更新和部署您已更改的服务。希望有帮助！

如果您有任何其他疑问，请告诉我。

# jsf - 如何在 Primefaces 数据表中自定义分页

> ID：15336432
> 
> 赞同：3
> 
> 时间：2013-03-11T10:36:39.910
> 
> 标签：jsf, primefaces

Primefaces Datatable 有很多选项来安排分页。我需要制作 Paginator，如下图所示：

![在此处输入图像描述](../Images/0994d816d0465f75f3169892d61ef9e3.png)

有没有人知道如何做到这一点。如果您知道，请建议任何替代方式。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T13:48:52.250

扩展 PrimeFaces`DataTableRenderer`并覆盖`encodePaginatorMarkup()`：

```
import org.primefaces.component.datatable.DataTableRenderer;

public class MyDataTableRenderer extends DataTableRenderer {

    @Override
    protected void encodePaginatorMarkup(FacesContext context, DataTable table, String position, String tag, String styleClass) throws IOException {
        // Copypaste here the original PF source code and make modifications where necessary.
    }

} 
```

*（您可以在它扩展[的`DataRenderer`类](https://code.google.com/p/primefaces/source/browse/primefaces/trunk/src/main/java/org/primefaces/renderkit/DataRenderer.java)中找到该方法的源代码）*

然后，要让它运行，请在以下位置注册它`faces-config.xml`：

```
<render-kit>
    <renderer>
        <description>Overrides the PrimeFaces table renderer with customized paginator.</description>
        <component-family>org.primefaces.component</component-family>
        <renderer-type>org.primefaces.component.DataTableRenderer</renderer-type>
        <renderer-class>com.example.MyDataTableRenderer</renderer-class>
    </renderer>
</render-kit> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-09-28T14:33:59.817

您可以**将自己的实现添加**到支持的分页器元素的标准集中，而不是像上面建议的那样扩展 PrimeFaces`DataTableRenderer`和覆盖。`encodePaginatorMarkup()`**`org.primefaces.component.paginator.PaginatorElementRenderer`**

 **这可以通过在 JSF ApplicationFactory 实现中调用以下静态方法来实现：

```
org.primefaces.renderkit.DataRenderer.addPaginatorElement("{myPaginator}", new MyPaginatorImplementation()); 
```

随后您需要添加`MyPaginatorImplementation`必须实现接口的类`org.primefaces.component.paginator.PaginatorElementRenderer`。

作为起点，您可以从 PrimeFaces`PageLinksRenderer`类开始您的定制，例如

```
public class MyPaginatorImplementation implements PaginatorElementRenderer {

    public void render(FacesContext context, UIData uidata) throws IOException {
        ResponseWriter writer = context.getResponseWriter();
        int currentPage = uidata.getPage();
        int pageLinks = uidata.getPageLinks();
        int pageCount = uidata.getPageCount();
        int visiblePages = Math.min(pageLinks, pageCount);

        //calculate range, keep current in middle if necessary
        int start = Math.max(0, (int) Math.ceil(currentPage - ((visiblePages) / 2)));
        int end = Math.min(pageCount - 1, start + visiblePages - 1);

        //check when approaching to last page
        int delta = pageLinks - (end - start + 1);
        start = Math.max(0, start - delta);

        writer.startElement("span", null);
        writer.writeAttribute("class", UIData.PAGINATOR_PAGES_CLASS, null);

        for(int i = start; i <= end; i++){
            String styleClass = currentPage == i ? UIData.PAGINATOR_ACTIVE_PAGE_CLASS : UIData.PAGINATOR_PAGE_CLASS;

            writer.startElement("span", null);
            writer.writeAttribute("class", styleClass, null);
            writer.writeAttribute("tabindex", 0, null);
            writer.writeText((i + 1), null);
            writer.endElement("span");
        }

        writer.endElement("span");
    } 
} 
```

现在您可以使用 PrimeFaces 提供的标准方式在您的 XHTML 中使用它，例如

`<p:dataTable paginatorTemplate="{myPaginator}" />`

与其他选项相比，此替代方案的优点是：

*   您可以使用 UIData 元素中的信息（例如显示的第一行和最后一行）。这在数据列表/数据表中的自定义构面中不可用。
*   您可以在应用程序中的每个数据表和/或数据列表中重复使用它，从而防止在 xhtml 中重复编码模板。

但代价是需要额外的 java 代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T16:01:32.290

尝试使用`{RowsPerPageDropdown} of {totalPage}`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T10:49:32.790

我认为没有一种简单的方法可以实现您想要的。目前 Paginator Template`p:dataTable`支持以下选项：

1.  当前页面报告
2.  第一页链接
3.  上一页链接
4.  下一页链接
5.  最后一页链接
6.  页面链接
7.  RowsPerPageDropdown
8.  JumpToPageDropdown

查看类的源代码，`org.primefaces.renderkit.DataRenderer`您可以使用这些选项。您希望通过开发自定义数据表或修改源来完成。Primefaces 目前没有。**

# iphone - 录制音频时如何将音频录制设置更改为 16Khz 和 16 位？

> ID：15336434
> 
> 赞同：2
> 
> 时间：2013-03-11T10:36:45.347
> 
> 标签：iphone, ios, objective-c, avaudioplayer, audio-recording

我有如下所示的设置。

我想在录制音频时将音频录制设置更改为 16Khz 和 16 位。

```
NSArray *dirPaths;
NSString *docsDir;

dirPaths = NSSearchPathForDirectoriesInDomains(
                                               NSDocumentDirectory, NSUserDomainMask, YES);
docsDir = [dirPaths objectAtIndex:0];
NSString *soundFilePath = [docsDir
                           stringByAppendingPathComponent:@"sound.wav"];

NSURL *soundFileURL = [NSURL fileURLWithPath:soundFilePath];

NSDictionary *recordSettings = [NSDictionary
                                dictionaryWithObjectsAndKeys:
                                [NSNumber numberWithInt:AVAudioQualityMin],
                                AVEncoderAudioQualityKey,
                                [NSNumber numberWithInt:16],
                                AVEncoderBitRateKey,
                                [NSNumber numberWithInt: 2],
                                AVNumberOfChannelsKey,
                                [NSNumber numberWithFloat:44100.0],
                                AVSampleRateKey,
                                nil];

NSError *error = nil;

audioRecorder = [[AVAudioRecorder alloc]
                 initWithURL:soundFileURL
                 settings:recordSettings
                 error:&error];

if (error)
{

} else
{
    [audioRecorder prepareToRecord];
} 
```

如何设置这些设置？

**编辑问题**：

感谢您的回复，我尝试了这些方法，但它对我不起作用，因为我的客户正在将录制的语音（我以字节格式发送的录制的语音）发送到 ASR 引擎（自动语音识别）。我没有收到我发送的相同回复（我收到的回复音频显示“引号”）。客户说您没有以 16KHz 和 16 位采样率录制声音，这就是您得到响应的原因。但是我问他我发送到他的服务器的字节，他给了那个 .wav 文件，它正在完美地播放。但是如果他发送给 ASR 引擎的同一个，ASR 引擎不接受我发送的录制的声音（他说 ASR 不会接受，因为你没有以 16KHz 和 16 位采样率录制音频）。客户给出以下响应。（但，

```
Filename:   sv_SE_356985580762248932.wav
Folder: E:\developApp\TestappName\Mortionsn_dev\2nd-iteration\test_wfiles
File Type:  44100Hz, 16-bit, Stereo
Uncompressed Size:  1.63 MB (1,713,696 bytes)
File Format:    Windows PCM
Windows PCM
Size on Disk:   1.63 MB (1,717,892 bytes)
Last Written (local):   3/11/2013  00:21:00.000
Length: 0:09.714
428,424 samples 
```

**使用以下答案第二次编辑问题**：

后来通过提出建议，我将设置代码更改为：

```
NSMutableDictionary *recordSettings = [NSMutableDictionary dictionary];

[recordSettings setValue: [NSNumber numberWithInt:kAudioFormatLinearPCM] forKey:AVFormatIDKey];

[recordSettings setValue: [NSNumber numberWithFloat:16000.0] forKey:AVSampleRateKey];//8000.0

[recordSettings setValue: [NSNumber numberWithInt: 1] forKey:AVNumberOfChannelsKey];

[recordSettings setValue: [NSNumber numberWithInt:16] forKey:AVLinearPCMBitDepthKey];

[recordSettings setValue: [NSNumber numberWithBool:NO] forKey:AVLinearPCMIsBigEndianKey];

[recordSettings setValue: [NSNumber numberWithBool:NO] forKey:AVLinearPCMIsFloatKey];

[recordSettings setValue: [NSNumber numberWithInt: AVAudioQualityMax] forKey:AVEncoderAudioQualityKey]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T10:27:10.043

试试这个，一般音频设置是，

```
AVFormatIDKey,
AVSampleRateKey,
AVNumberOfChannelsKey. 
```

对于录音机

```
AVEncoderAudioQualityKey;
AVEncoderBitRateKey;
AVEncoderBitRatePerChannelKey;
AVEncoderBitDepthHintKey; 
```

确保您已包含常规和记录器设置。

并将您的更改`AVSampleRateKey`为`16000.0`,

```
NSDictionary *recordSettings = [NSDictionary dictionaryWithObjectsAndKeys:                 
                                [NSNumber numberWithInt:kAudioFormatLinearPCM],
                                AVFormatIDKey
                                [NSNumber numberWithInt: 2],
                                AVNumberOfChannelsKey,
                                [NSNumber numberWithFloat:16000.0],
                                AVSampleRateKey,
                                [NSNumber numberWithInt:AVAudioQualityMin],
                                AVEncoderAudioQualityKey,
                                [NSNumber numberWithInt:16],
                                AVEncoderBitRateKey,
                                nil]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T10:10:25.100

您现有的设置是 44.1kHz 和 16 位，因此（假设上述设置已经有效）您需要更改的唯一行是：

```
[NSNumber numberWithFloat:44100.0] 
```

至：

```
[NSNumber numberWithFloat:16000.0] 
```

# highcharts - 将数据传递给具有超过 1000 个条目的 Highstock 图表中的单击事件回调

> ID：15336437
> 
> 赞同：1
> 
> 时间：2013-03-11T10:36:55.790
> 
> 标签：highcharts, highstock

我有一个图表，我在其中显示图表下方每个点的附加数据。因此，我将数据对象的 id 传递到系列的点数据中。当有人点击图表中的一个点时，我可以从`event.point.id`回调中读取 id。不幸的是，这只适用于少于 1000 分的情况。如果我将 turboThreshold 设置为 2000，则`event.point`对象中缺少附加数据。

一个系列看起来像这样

```
series:{
  data: [{x:1, y:2, id:'someId'}]
  turboThreshold: 2000
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:26:55.070

请看一个简单的例子[http://jsfiddle.net/GRUjw/1](http://jsfiddle.net/GRUjw/1)它有 2000 个点和 ids。点的 id 信息显示在 div 中。

```
plotOptions: {
        series: {
            turboThreshold:3000,
            cursor: 'pointer',
            point: {
                events: {
                    click: function() {
                        $('#report').html('Clicked point\'s id: '+this.id);
                    }
                }
            }
        }
    }, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:51:21.633

根据this [Github issue](https://github.com/highslide-software/highcharts.com/issues/456)，我也必须禁用`dataGrouping`该系列

```
series:{
  data: [{x:1, y:2, id:'someId'}]
  turboThreshold: 2000,
    dataGrouping: {
     enabled: false
  }
} 
```

# c# - 从另一个类的数组中读取数据

> ID：15336440
> 
> 赞同：3
> 
> 时间：2013-03-11T10:37:01.233
> 
> 标签：c#

我需要从位于另一个类中的数组中读取数据。我已经阅读了一些解释相同问题的线程，但无法让它与我的代码一起使用......

包含的示例：我需要将`ParticipantX`数组中的数据从`Parsedata`类读取到`Form1`类，如我的示例所示。

如果有任何帮助，我将不胜感激。最好的办法是如果你能帮助我编写我需要的代码。我现在卡住了。谢谢。

```
public class Parsedata
{
    public void ParsedataMethod()
    {
    ...
        //Neccesary data are added to this array
        string[,] ParticipantX = new string[40, 4]; 
```

在同一个命名空间中，我有 Form1 类：

```
using Crestron.ActiveCNX;
public partial class Form1 : Form
{
    ActiveCNX cnx;
    cnx = new ActiveCNX();

    private void SerialSend_Click(object sender, EventArgs e)
    {
        int number = 8;
        for (int i = 1; i < number; i++)
            cnx.SendSerial(i, ParticipantX[i, 1]); //
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:39:39.517

您可以通过委托 + 事件处理程序将其传递，例如：

```
public partial class Form1 : Form
{
    public string[,] ParticipantX;
    public Form1()
    {
        InitializeComponent();
        Class1.SendArray += new EventHandler<MyArgs>(GetArray);
    }

    public void GetArray(object sender, MyArgs ea)
    {
        this.Invoke(new MethodInvoker(
            delegate()
            {
              ParticipantX = ea.myArray;
            }));
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        Class1 t = new Class1();
        t.ParsedataMethod();
    }
}

public class MyArgs : EventArgs
{
    public string[,] myArray { get; set; }
} 
```

在你的解析数据类中，`OnArraySend`当你想将数组传递给你的表单时调用：

```
public static event EventHandler<MyArgs> SendArray;
    public void ParsedataMethod()
    {
        string[,] ParticipantX = new string[40, 4];
        OnArraySend(new MyArgs() { myArray = ParticipantX });
    }

    protected virtual void OnArraySend(MyArgs ea)
    {
        if (SendArray != null)
        {
            SendArray(this, ea);
        }
    } 
```

这是一个粗略的例子，但你明白了一般的想法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:52:43.633

首先，请记住，属性是类的一部分，而类具有属性（或字段）。如果没有班级所有者，您将无法获得财产。

在静态中，您可以这样实现：

```
public static class Parsedata{
  public static string[,] StringX{get;set;}
} 
```

但是，当您的类和属性不是静态的时，您需要先将类实例化为一个对象。例子：

```
public class Parsedata{
  public string[,] StringX{get;set;}
}
public class Caller{
  Parsedata p = new Parsedata();
  public void SetStringX(string[,] stringX){
    p.StringX = stringX;
  }
  public string[,] GetStringX(){
    return p.StringX;
  }
} 
```

但是，您必须记住，实例化对象的值在实例之间是不同的。示例（仅说明）：

```
WebSite a = new WebSite();
a.Name = "Stack";
WebSite b = new WebSite();
b.Name = "Overflow";
Console.WriteLine(a.Name); // will result Stack
Console.WriteLine(b.Name); // will result Overflow 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T10:42:54.610

尝试这个：

```
public class Parsedata
{
     private string[,] m_ParticipantX;
     public void ParsedataMethod()
     {
       ...
       m_ParticipantX = new string[40, 4];//Neccesary data are added to this array
     }

     public string[,] ParticipantX
     {
          get { return m_ParticipantX; }
     }
}

using Crestron.ActiveCNX;
public partial class Form1 : Form
{
    ActiveCNX cnx;
    cnx = new ActiveCNX();
    Parsedata data = new Parsedata();

    private void SerialSend_Click(object sender, EventArgs e)
    {
        data.ParseDataMethod();
        int number = 8;
        for (int i = 1; i < number; i++)
            cnx.SendSerial(i, data.ParticipantX[i, 1]); //
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T10:46:50.807

该`ParticipantX`数组是在方法内声明的，这意味着它将是该方法的本地数组。

您必须将声明放在方法之外：

```
public class Parsedata
{
    public string[,] ParticipantX;

    public void ParsedataMethod()
    {
        ...
        ParticipantX = new string[40, 4]; 
```

我已标记`ParticipantX`为`public`，以便您可以从表单中访问它：

```
ParseData parseData = new ParseData();
parseData.ParticipantX[x, y] ... 
```

更好的方法是使其成为公共属性：

```
private string[,] _participantX;
public string [,] ParticipantX
{
    get { return _participantX; }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-11T10:41:32.927

您可以制作 Parsedata 和 ParsedataMethod 静态方法或在您的表单中创建 Parsedata 的实例：

```
var pd = new ParseData(); 
```

然后你可以使用：

```
pd.Participant(...); 
```

# android - 用什么？线程池或选择器或轮询或 epoll（libev 库）

> ID：15336441
> 
> 赞同：1
> 
> 时间：2013-03-11T10:37:08.870
> 
> 标签：android, sockets, css-selectors, nio, epoll

我的 Android（2.3 及更高版本）应用程序需要与 100 个（最多）同时运行 TCP 服务器的嵌入式设备进行 TCP 通信。

智能手机应用程序应该足够强大，可以同时处理 100 多个连接。它需要经常设置/获取信息。所以对于网络模块，我们分析了以下选项：

*   **第**一种选择：拥有一个线程管理器 ( `ThreadPoolExecutor`) 并为每个设备建立连接。
    *   可能的问题：制作 100 的线程是不可行的。
*   **第二种**选择：使用 Java NIO 选择器来维护每个 fd。
    *   问题：Java NIO 似乎很慢。您要求他们检查的描述符越多，他们的速度就越慢。

> while (mMainSelector.select(SELECTOR_TIMEOUT) { .... 获取选定键的东西 .... SocketChannel socketChannel = channel.accept()

从客户端开始连接到上述代码到达最后一行（channel.accept()）大约需要1-3秒。

另外，为了确认我的测试，我参考了一些支持这一点的博客。

[避免蔚来](http://java.dzone.com/articles/avoid-nio-get-better-throughpu)

[NIO 不比 IO 快](http://www.theserverside.com/news/thread.tss?thread_id=48449)

*   **第三种**选择: `epoll`: 比选择器更好，但我想它在 Android 中并不容易获得。*有人用过`epoll`安卓吗？我们有针对 Android 的 libev 构建吗？*

是否有任何其他替代方案最适合处理 100 个同时连接，而不影响速度？

# c# - Metro 应用程序：带有自动切换项目内容的网格视图

> ID：15336443
> 
> 赞同：2
> 
> 时间：2013-03-11T10:37:13.230
> 
> 标签：c#, windows, xaml, gridview, microsoft-metro

我想创建一个分组的图像网格视图：没问题。

现在我会为每个gridview项目分配许多图像，延迟后自动切换图像。（如应用程序磁贴通知）

我可以想象一个使用翻转视图和计划任务的棘手方式，但有没有一种干净流畅的方式来做到这一点？

可能是教程链接？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:04:08.657

您可以将 tile 控件用作 gridview 项的 DataTemplate。有一些商业控件，您可以找到带有源代码的免费实现，例如 Calisto：[http ://timheuer.com/blog/archive/2012/05/31/introducing-callisto-a-xaml-toolkit-for-地铁应用程序.aspx](http://timheuer.com/blog/archive/2012/05/31/introducing-callisto-a-xaml-toolkit-for-metro-apps.aspx)

# sass - 如何在 Compass 中动态导入文件？

> ID：15336447
> 
> 赞同：3
> 
> 时间：2013-03-11T10:37:22.200
> 
> 标签：sass, compass-sass

我有许多网站使用相同的布局，但使用不同的颜色主题。我想要一种方法让所有网站都拥有相同的 scss，但能够选择一个可以导入的主题。例如：

**site1/_theme.scss**

```
$bordercolor: #2200dd; 
```

**site2/_theme.scss**

```
$bordercolor: #dd2200; 
```

**样式.scss**

```
@import "$site/_theme.scss";

.content{
  border: 1px solid $bordercolor;
} 
```

有没有办法让它工作，所以它会根据变量导入正确的主题部分？

# java - 使用大分数时使用哪种数据类型？

> ID：15336454
> 
> 赞同：1
> 
> 时间：2013-03-11T10:37:44.463
> 
> 标签：java, floating-accuracy

我正在做一个 NLP 项目，应该计算这个表达式：

> 频率=1/345128

我正在使用浮点数和双精度数，它读取为 0.0，这对我没有帮助，因为我希望确切的数字至少为小数点后 6 位。

早些时候，当我这样做时，我只是将数字乘以 10^6，因为我只是在比较两个值。但是现在不同了，我需要确切的数字。有没有我可以使用的解决方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T10:39:26.357

我怀疑这`a`是一个整数变量，这意味着您的代码正在使用整数除法（这会截断结果）。如果是这种情况，您需要将表达式转换为浮点除法：

```
freq = a / 345128.0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:44:07.307

您必须将分子或分母转换为双精度。

```
public class TestMain
{
    public static void main(String args[])
    {
        double freq=1d/345128d;
        System.out.println(freq);
    }
} 
```

# java - 如何使用 POI 处理旧的 excel .xls 文件？

> ID：15336457
> 
> 赞同：25
> 
> 时间：2013-03-11T10:37:49.823
> 
> 标签：java, excel, apache-poi, jxl

我从 jxl 切换到 poi，因为 POI 具有更多功能。但是，我无法处理以旧格式生成的 xls 文件。现在我收到此错误：

> org.apache.poi.hssf.OldExcelFormatException：提供的电子表格似乎是 Excel 5.0/7.0 (BIFF5) 格式。POI 仅支持 BIFF8 格式（来自 Excel 版本 97/2000/XP/2003）

现在我正在考虑根据 xls 版本同时使用 JXL 和 POI，因此对于旧格式的 xls 文件，我将使用 jxl，而对于较新的版本，我将使用 POI。这是一个好的解决方案吗？有没有其他选择？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-12-14T19:59:37.067

对于旧的 Excel 格式文件，您有以下选择：

1.  [HSSF](https://poi.apache.org/spreadsheet/)，`POI`Excel '97(-2007) 文件格式的实现。
    *   如果您只想提取文本内容，那么您可以使用[OldExcelExtractor](https://poi.apache.org/apidocs/org/apache/poi/hssf/extractor/OldExcelExtractor.html)，它只会从文件中提取文本和数字。
    *   如果您需要来自特定单元格的值，那么您需要采取类似于 的`OldExcelExtractor`方法，在记录级别处理文件，并检查[OldStringRecord](https://poi.apache.org/apidocs/org/apache/poi/hssf/record/OldStringRecord.html)、[NumberRecord](https://poi.apache.org/apidocs/org/apache/poi/hssf/record/NumberRecord.html)、[OldFormulaRecord](https://poi.apache.org/apidocs/org/apache/poi/hssf/record/OldFormulaRecord.html)和朋友的坐标。
2.  就像你已经提到的，[JXL](http://jexcelapi.sourceforge.net/)也可以处理一些情况。
3.  使用[JDBC/ODBC](http://www.java2s.com/Tutorial/Java/0340__Database/UseJDBCODBCbridgetoreadfromExcel.htm)驱动程序。它不像`HSSF`某些旧格式那样灵活，但它是提取信息的唯一方法。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2014-03-04T04:05:28.160

据我所知，您可以使用此代码读取 .xls 格式的 excel 文件

```
FileInputStream in=new FileInputStream(new File("filename.xls"));
Wookbook wb=new HSSFWorkbook(in); 
```

阅读新的 excel 版本（2007 及更高版本）：

```
 FileInputStream in=new FileInputStream(new File("filename.xls"));
    Wookbook wb=new XSSFWorkbook(in); 
```

您将需要的外部 jar 文件：

```
 1\. poi-3.9 
 2\. dom4j-1.6.1
 3\. XMLbeams-2.5.0 
```

如果你的工作只需要你使用 .xls 那么只有 poi-3.0 就足够了。您需要其他 jar 才能使用新版本的 excel。

# xaml - 如何本地化 windows phone 中的音频文件？

> ID：15336458
> 
> 赞同：1
> 
> 时间：2013-03-11T10:37:50.603
> 
> 标签：xaml, localization, windows-phone-7.1, converter

我正在尝试本地化我的 .wav 音频文件。我得到这样的例外：

```
MS.Internal.Data.DynamicValueConverter' converter failed to convert value 'System.IO.UnmanagedMemoryStream' (type 'System.IO.UnmanagedMemoryStream');
BindingExpression: Path='LocalizedResources.AudioTest' DataItem='WPLocalizationMultilingualAppToolkit.LocalizedStrings' (HashCode=77186600);
target element is 'System.Windows.Controls.MediaElement' (Name='AudioTestElement'); 
target property is 'Source' (type 'System.Uri').. System.InvalidOperationException: Can't convert type System.IO.UnmanagedMemoryStream to type System.Uri. 
```

如何转换`UnmanagedMemoryStream`为 Uri？

# javascript - Windows 8 应用程序：Bing 地图 javascript

> ID：15336463
> 
> 赞同：1
> 
> 时间：2013-03-11T10:37:56.707
> 
> 标签：javascript, windows, bing-maps

我正在开发一个包含 Bing 地图的 Windows 8 应用程序，但是当我在 Visual Studio 中尝试时遇到问题，出现错误提示

> ms-appx://fe56a029-c8e7-41e5-a755-b22871affb67/doglatrinemapsearch.html 中第 19 行第 17 列未处理的期望

`0x800a1391 - JavaScript runtime error: 'Microsoft' is undefined`

我的代码如下所示：

```
 var map = new Microsoft.Maps.Map(document.getElementById("mapDiv"),
                       {
                           credentials: "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
                           center: new Microsoft.Maps.Location(55.559549, 12.927881),
                           mapTypeId: Microsoft.Maps.MapTypeId.birdseye,
                           zoom: 100
                       }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-22T10:04:52.347

看起来您正试图在地图控件完成加载之前加载地图。请查看以下关于使用 JavaScript 控件创建跨平台 Bing 地图应用程序的代码示例和博客文章：

[http://code.msdn.microsoft.com/Cross-Platform-Bing-Maps-e96600d5](http://code.msdn.microsoft.com/Cross-Platform-Bing-Maps-e96600d5) [http://www.bing.com/blogs/site_blogs/b/maps/archive/2013/06/28/cross-platform -development-with-bing-maps-and-phonegap.aspx](http://www.bing.com/blogs/site_blogs/b/maps/archive/2013/06/28/cross-platform-development-with-bing-maps-and-phonegap.aspx)

# javascript - 为什么原型更改不通过引用方法传递？

> ID：15336471
> 
> 赞同：7
> 
> 时间：2013-03-11T10:38:35.083
> 
> 标签：javascript, jquery, google-analytics

Google Analytics 最初使用`_gaq` `[object Array]`. 将数组传递给函数在 JavaScript 中是通过引用传递对象。

（**编辑：**正如答案中所指出的，*引用是按值传递的*。有关在 JavaScript 中传递引用/值的更多详细信息，请参见[https://stackoverflow.com/a/5314911/120521 。）](https://stackoverflow.com/a/5314911/120521)

下面的代码使用 jQuery 等待 DOM 加载，然后附加一个事件，一旦用户更改字段，该`change`事件将向 Google Analytics 发送虚拟页面浏览量。`<input/>`

```
var _gaq = _gaq || [];
_gaq.push(['_setAccount', _gAAccount]);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(ga, s);
})();

var Tracking = {
  trackInputs: function ($, gaObject) {
    var inputs = $('#signUp').find('input');
    inputs.bind('change', function () {
      gaObject.push(['_trackPageview', '/virtual/input']);
      console.log(gaObject); // Outputs:
                         // [Array[2], Array[1], Array[2]]
                         // i.e. _setAccount, _trackPageview,
                         // and _trackPageview calls.
    });
  }
};

jQuery(document).ready(function($) {
  Tracking.trackInputs($, _gaq);
});

// ... DOM begins below 
```

但是，从上面的评论中可以看出，该`trackInputs()`方法打印了“原始”数组。通常，Google Analytics 脚本所做的是将`_gaq`数组更改为`_gaq`对象并更改对象的推送原型，以便在向对象推送新调用时向 Google Analytics 服务器发出请求。

**为什么这种改变也不是通过引用传递到的`trackInputs()`？**

我意识到加载的谷歌分析脚本将（或者会？）在`Tracking.trackInputs()`定义之后发生，所以浏览器可能不理解它现在是一个`[object object]`但会坚持认为它是原始的`[object Array]`. 但是，那么它不再是参考，是吗？

（全局使用`_gaq`对象（根本不将其传递给方法）可以解决问题，但我想了解为什么这不起作用。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T12:44:44.893

```
jQuery(document).ready(function($) {
  Tracking.trackInputs($, _gaq);
}); 
```

由于在加载 GA*之前*`_gaq`DOM 已准备好，因此 的引用仍然指向一个普通数组，然后由函数`gaObject`内部的本地符号永久保存。`trackInputs()`

```
trackInputs: function ($, gaObject) { 
```

GA 加载后，全局符号`_gaq`被跟踪器替换，但`gaObject`仍指向旧符号。

您可以使用 GA 的“就绪”功能来调用您的`trackInputs()`函数，而不是使用`$(document).ready(...)`：

```
_gaq.push(function() {
    // when this runs, the tracker would have initialized;
    Tracking.trackInputs($, _gaq);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T12:30:14.900

> Google Analytics 最初使用 _gaq [对象数组]。将数组传递给函数在 JavaScript 中是通过引用传递对象。

您最初的假设是不正确的。Javascript 总是使用按值传递。按值传递。按价值传递。

您正在通过**value**传递对对象的引用。引用按值传递。归根结底，您有**许多对**同**一个底层数组**的引用，因为每次**按值传递引用**时， 您都有一个新的引用副本，但对象永远不会改变。

> 通常，Google Analytics 脚本所做的是将 _gaq 数组更改为 _gaq 对象，并更改对象的推送原型，使其在向对象推送新调用时向 Google Analytics 服务器发出请求。

它在哪里这样做？

> 但是，从上面的评论中可以看出，trackInputs() 方法会打印“原始”数组。

当然可以。

```
var _gaq = _gaq || [];
_gaq.push(['_setAccount', _gAAccount]);
_gaq.push(['_trackPageview']); 
```

定义和排列并将东西放入其中。

```
jQuery(document).ready(function($) {
  Tracking.trackInputs($, _gaq);
}); 
```

将该数组按值传递给方法

```
var Tracking = {
  trackInputs: function ($, gaObject) {
    ...
    inputs.bind('change', function () {
      gaObject.push(['_trackPageview', '/virtual/input']);
      ...
    });
  }
}; 
```

在 gaObject 周围创建一个闭包，它是对原始数组的引用，并在更改处理程序中使用它。它与引用不同`_gaq`，它是该引用的副本，但它指向同一个数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T12:25:03.697

冒着说出愚蠢的话的风险，因为我一直盯着你的脚本大约 20 分钟，没有什么明显的东西跳出来……它是否有可能按预期工作，但是你的测试用例被打折了分析作为您自己的 IP 地址列在[配置文件过滤器](http://support.google.com/analytics/bin/answer.py?hl=en-GB&answer=1033162)下？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T12:54:05.230

```
jQuery(document).ready(function() {
  _gaq.push(function() {
    Tracking.trackInputs($, _gaq);
  });
}); 
```

# nsdictionary - 从对象生成 JSON 时，JSON 写入异常中的类型无效

> ID：15336476
> 
> 赞同：1
> 
> 时间：2013-03-11T10:38:51.513
> 
> 标签：nsdictionary, nsdata, nsjsonserialization

我想创建一个 json 字符串发送到服务器，但我不知道该怎么做。我正在使用以下代码，但它给了我一个例外。

由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“JSON 写入中的类型无效

```
NSError *error = nil;

self.drill.drillTitle = drillTitle.text;
self.drill.crewName = teamName.text;
self.drill.objectives = objectives.text;
self.drill.category = category;
self.drill.benchmarks = benchmarkArray;
self.drill.crewMembers = crewArray;
self.drill.currentUser = [Session retreiveSession];

NSDictionary *jsonDictionary = [NSDictionary dictionaryWithObjectsAndKeys:self.drill.drillTitle, @"drillTitle", self.drill.crewName, @"crewName", self.drill.objectives, @"objectives", self.drill.benchmarks, @"benchmarks", self.drill.crewMembers, @"crewMembers", self.drill.currentUser, @"currentUser", nil, self.drill.category, @"category", nil];

        NSData *jsonData = [NSJSONSerialization dataWithJSONObject:jsonDictionary options:NSJSONWritingPrettyPrinted error:&error];
        NSString *jsonString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];
        NSLog(@"JSON output: %@", jsonString); 
```

我的 Drill 课程在这里：

```
#import <Foundation/Foundation.h>
#import "Category.h"
#import "Users.h"
#import "Benchmark.h"

@interface Drill : NSObject

@property (nonatomic, retain) NSString *drillId;
@property (nonatomic, retain) NSString *drillTitle;
@property (nonatomic, retain) NSString *crewName;
@property (nonatomic, retain) NSString *objectives;
@property (nonatomic, retain) Category *category;
@property (nonatomic, retain) NSMutableArray *benchmarks;
@property (nonatomic, retain) NSMutableArray *crewMembers;
@property (nonatomic, retain) Users *currentUser;
@property (nonatomic, retain) NSString *totalDrillTime;
@property (nonatomic, retain) NSString *timestamp;
@property (nonatomic, retain) NSString *error;

- (id)initWithCoder:(NSCoder *)coder;
- (void)encodeWithCoder:(NSCoder *)encoder;

@end

#import "Drill.h"

@implementation Drill

@synthesize drillId;
@synthesize drillTitle;
@synthesize crewName;
@synthesize objectives;
@synthesize category;
@synthesize benchmarks;
@synthesize crewMembers;
@synthesize currentUser;
@synthesize totalDrillTime;
@synthesize timestamp;
@synthesize error;

- (id)initWithCoder:(NSCoder *)coder {

    self = [super init];
    if(self) {
        drillId = [coder decodeObjectForKey:@"id"];
        drillTitle = [coder decodeObjectForKey:@"drillTitle"];
        crewName = [coder decodeObjectForKey:@"crewName"];
        objectives = [coder decodeObjectForKey:@"objectives"];
        category = [coder decodeObjectForKey:@"category"];
        benchmarks = [coder decodeObjectForKey:@"benchmarks"];
        crewMembers = [coder decodeObjectForKey:@"crewMembers"];
        currentUser = [coder decodeObjectForKey:@"currentUser"];
        totalDrillTime = [coder decodeObjectForKey:@"totalDrillTime"];
        timestamp = [coder decodeObjectForKey:@"timestamp"];
        error = [coder decodeObjectForKey:@"error"];
    }
    return self;
}

- (void)encodeWithCoder:(NSCoder *)encoder {

    [encoder encodeObject:drillId forKey:@"id"];
    [encoder encodeObject:drillTitle forKey:@"drillTitle"];
    [encoder encodeObject:crewName forKey:@"crewName"];
    [encoder encodeObject:objectives forKey:@"objectives"];
    [encoder encodeObject:category forKey:@"category"];
    [encoder encodeObject:benchmarks forKey:@"benchmarks"];
    [encoder encodeObject:crewMembers forKey:@"crewMembers"];
    [encoder encodeObject:currentUser forKey:@"currentUser"];
    [encoder encodeObject:totalDrillTime forKey:@"totalDrillTime"];
    [encoder encodeObject:timestamp forKey:@"timestamp"];
    [encoder encodeObject:error forKey:@"error"];
}

@end 
```

# java - 已弃用的 Java HttpClient - 有多难？

> ID：15336477
> 
> 赞同：177
> 
> 时间：2013-03-11T10:38:55.020
> 
> 标签：java, apache-httpclient-4.x, apache-commons-httpclient

我要做的就是下载一些 JSON 并将其反序列化为一个对象。我还没有下载JSON。

我能找到的几乎每一个 HttpClient 示例，包括 apache 网站上的示例，看起来都像......

```
import org.apache.http.client.HttpClient;
import org.apache.http.impl.client.DefaultHttpClient;

public void blah() {
    HttpClient client = new DefaultHttpClient();
    ...
} 
```

但是，Netbeans 告诉我这`DefaultHttpClient`已被弃用。我试过谷歌搜索`DefaultHttpClient deprecated`以及我能想到的许多其他变体，但找不到任何有用的结果，所以我显然遗漏了一些东西。

下载网页内容的正确 Java7 方法是什么？作为语言的一部分，真的没有像样的 Http 客户端吗？我觉得很难相信。

我对此的 Maven 依赖是...

```
<dependency>
    <groupId>org.apache.httpcomponents</groupId>
    <artifactId>httpclient</artifactId>
    <version>LATEST</version>
    <type>jar</type>
</dependency> 
```

* * *

## 回答 #1

> 赞同：270
> 
> 时间：2013-03-11T10:55:48.880

相关进口：

```
import org.apache.http.impl.client.CloseableHttpClient;
import org.apache.http.impl.client.HttpClientBuilder;
import java.io.IOException; 
```

用法：

```
HttpClient httpClient = HttpClientBuilder.create().build(); 
```

编辑（根据朱尔斯的建议）：

由于该`build()`方法返回 a `CloseableHttpClient`which *is-a* `AutoClosable`，您可以将声明放在 try-with-resources 语句（Java 7+）中：

```
try (CloseableHttpClient httpClient = HttpClientBuilder.create().build()) {

    // use httpClient (no need to close it explicitly)

} catch (IOException e) {

    // handle

} 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2014-11-19T13:18:49.407

恕我直言，接受的答案是正确的，但错过了一些“教学”，因为它没有解释如何提出答案。对于所有不推荐使用的类，请查看[**JavaDoc**](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/client/DefaultHttpClient.html)（如果您没有下载或[上网](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/client/DefaultHttpClient.html)），它将提示使用哪个类来替换旧代码。当然它不会告诉你一切，但这是一个开始。例子：

```
...
 *
 * @deprecated (4.3) use {@link HttpClientBuilder}.  <----- THE HINT IS HERE !
 */
@ThreadSafe
@Deprecated
public class DefaultHttpClient extends AbstractHttpClient { 
```

现在您有了要使用的类`HttpClientBuilder`，因为没有构造函数来获取**构建器**实例，您可能会猜测必须有一个静态方法`create`：一旦你有了构建器，你也可以猜到大多数构建器都有一个**构建方法**，因此：

```
org.apache.http.impl.client.HttpClientBuilder.create().build(); 
```

**自动关闭：**

正如 Jules 在评论中暗示的那样，返回的类 implements `java.io.Closable`，所以如果你使用 Java 7 或更高版本，你现在可以这样做：

```
 try (CloseableHttpClient httpClient = HttpClientBuilder.create().build()) {...} 
```

优点是您不必处理finally 和nulls。

**其他相关信息**

还要确保阅读[连接池](https://hc.apache.org/httpcomponents-client-ga/tutorial/html/connmgmt.html)并设置[超时](https://stackoverflow.com/questions/39256157/apache-http-setsockettimout-vs-setconnecttimout-vs-setconnectionrequesttimeout)。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-09-02T23:33:47.157

**[来自 Apache 的示例](https://hc.apache.org/httpcomponents-client-4.5.x/examples.html)**使用这个：

```
CloseableHttpClient httpclient = HttpClients.createDefault(); 
```

`org.apache.http.impl.client.HttpClients`自 4.3 版以来，该课程就在那里。

的代码与此处[接受](https://stackoverflow.com/a/15336796)`HttpClients.createDefault()`的答案相同。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-04-30T21:56:22.860

Try [`jcabi-http`](http://http.jcabi.com)，它是一个流畅的 Java HTTP 客户端，例如：

```
String html = new JdkRequest("https://www.google.com")
  .header(HttpHeaders.ACCEPT, MediaType.TEXT_HTML)
  .fetch()
  .as(HttpResponse.class)
  .assertStatus(HttpURLConnection.HTTP_OK)
  .body(); 
```

另请查看此博客文章：[http ://www.yegor256.com/2014/04/11/jcabi-http-intro.html](http://www.yegor256.com/2014/04/11/jcabi-http-intro.html)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-03-11T10:45:39.663

`4.3-alpha1`由于`LATEST`版本规范，它在您使用的版本中被弃用。如果您查看该类的 javadoc，它会告诉您使用什么来代替：`HttpClientBuilder`.

在最新的稳定版本 ( `4.2.3`) 中，`DefaultHttpClient`尚未弃用。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-03-11T10:55:41.817

如果您仅尝试读取 json 数据，我建议您使用以下方法。

```
URL requestUrl=new URL(url);
URLConnection con = requestUrl.openConnection();
BufferedReader in = new BufferedReader(new InputStreamReader(con.getInputStream()));
StringBuilder sb=new StringBuilder();
int cp;
try {
    while((cp=rd.read())!=-1){
    sb.append((char)cp);
  }
 catch(Exception e){
 }
 String json=sb.toString(); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-11T10:48:57.033

使用[HttpClientBuilder](http://hc.apache.org/httpcomponents-client-dev/httpclient/apidocs/org/apache/http/impl/client/HttpClientBuilder.html)构建[HttpClient](http://hc.apache.org/httpcomponents-client-dev/httpclient/apidocs/org/apache/http/client/HttpClient.html)而不是使用 DefaultHttpClient

前任：

```
MinimalHttpClient httpclient = new HttpClientBuilder().build();

 // Prepare a request object
 HttpGet httpget = new HttpGet("http://www.apache.org/"); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-04-02T06:19:26.213

**您可以添加以下 Maven 依赖项。**

```
 <dependency>
        <groupId>org.apache.httpcomponents</groupId>
        <artifactId>httpclient</artifactId>
        <version>4.5.1</version>
    </dependency>
    <!-- https://mvnrepository.com/artifact/org.apache.httpcomponents/httpmime -->
    <dependency>
        <groupId>org.apache.httpcomponents</groupId>
        <artifactId>httpmime</artifactId>
        <version>4.5.1</version>
    </dependency> 
```

**您可以在您的 java 代码中使用以下导入。**

```
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGett;
import org.apache.http.impl.client.HttpClientBuilder;
import org.apache.http.client.methods.HttpUriRequest; 
```

**您可以在您的 java 代码中使用以下代码块。**

```
HttpClient client = HttpClientBuilder.create().build();
HttpUriRequest httpUriRequest = new HttpGet("http://example.domain/someuri");

HttpResponse response = client.execute(httpUriRequest);
System.out.println("Response:"+response); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-09-01T08:03:25.100

这是我在这个版本的android 22中不推荐使用httpclient的问题的解决方案

```
 public static String getContenxtWeb(String urlS) {
    String pagina = "", devuelve = "";
    URL url;
    try {
        url = new URL(urlS);
        HttpURLConnection conexion = (HttpURLConnection) url
                .openConnection();
        conexion.setRequestProperty("User-Agent",
                "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1)");
        if (conexion.getResponseCode() == HttpURLConnection.HTTP_OK) {
            BufferedReader reader = new BufferedReader(
                    new InputStreamReader(conexion.getInputStream()));
            String linea = reader.readLine();
            while (linea != null) {
                pagina += linea;
                linea = reader.readLine();
            }
            reader.close();

            devuelve = pagina;
        } else {
            conexion.disconnect();
            return null;
        }
        conexion.disconnect();
        return devuelve;
    } catch (Exception ex) {
        return devuelve;
    }
} 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2014-04-22T12:39:24.377

对于原始问题，我会要求您应用以下逻辑：

```
 CloseableHttpClient httpClient = HttpClientBuilder.create().build();
 HttpPost httpPostRequest = new HttpPost(); 
```

# sql - 报表生成器中的可见性表达式

> ID：15336483
> 
> 赞同：5
> 
> 时间：2013-03-11T10:39:18.517
> 
> 标签：sql, reporting-services

我目前在 Report builder 3 上设计了 3 个同时运行的报告，但我只想在 Select Report Parameter 中选择每个报告时才显示它。

我知道我必须进入图表属性并根据表达式选择可见性，但我不知道如何构造表达式。

参数包括：

Occupancy PitchNightsSold Capacity

我认为我需要做的就是编写以下表达式：

```
=IIf(Parameters!WhichReport.Value = "Occupancy", true, false) 
```

但它似乎不起作用，你能帮忙吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-11T10:51:55.707

在**可见性**属性中，您必须给出**隐藏**组件的表达式。因此，`true`如果要**隐藏**并且`false`要**显示**组件，则必须给出。将表达式更改为

`=IIf(Parameters!WhichReport.Value = "Occupancy", false, true)`

# asp.net-mvc - Html.ActionLink 发送 rout 引擎获取参数

> ID：15336487
> 
> 赞同：0
> 
> 时间：2013-03-11T10:39:22.820
> 
> 标签：asp.net-mvc

假设我认为我有以下内容

```
Html.ActionLink("ping", "X","Y"); 
```

并在路线类

```
routes.MapRoute(
    name: "X",
    url: "{controller}/{action}/OId/{o_id}",
    defaults: new { controller = "Home", action = "Index" }
);
routes.MapRoute(
    name: "Default",
    url: "{controller}/{action}/{id}",
    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

当我在这个页面上时，动作链接的输出`X/Z`是

```
/X/Y 
```

这是正确的，但如果请求 GET Params 包含一个名为 o_id 的变量，则输出为

```
/x/y/OId/* 
```

虽然我没有向 ActionLink 方法发送任何参数？

# c# - 如果部分事务失败，则提交事务

> ID：15336488
> 
> 赞同：0
> 
> 时间：2013-03-11T10:39:25.863
> 
> 标签：c#, transactions, servicedcomponent

我有一个在 COM+ 中运行的方法，它看起来有点像以下：

```
[AutoComplete(true)]
public bool DoSomething(string args)
{
    DoSomeDBWork(args);
    try {
        DBAccess.RunQuery("INSERT fail");
        return 0;
    }
    catch (Exception ex)
    {
        //Hide the error because it doesnt matter - log it out though for completeness
        DBAccess.RunQuery("INSERT INTO Log VALUES ('{0}')", ex.ToString());
        return -1
    }
} 
```

OK 所以方法运行，DoSomeDBWork() 方法运行，对数据库进行一些更新。

“插入失败”运行，但失败。我只想忽略它，但注销它已失败。

但是我收到了一个错误：System.Transactions.TransactionException：该操作对事务的状态无效。

我假设即使我捕获了异常，因为它是一个数据库错误，它会自动回滚事务。
该错误来自“插入日志...”行
，并且在 DoSomeDBWork() 中更新的所有内容也都被回滚。

如何忽略失败的行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:18:52.160

在尝试插入日志**之前**，您必须回滚用于“插入失败...”的事务 。不熟悉 DBAccess 及其工作原理，但是一旦您回滚，您应该能够隐式或显式地启动一个新事务。

```
[AutoComplete(true)]
public bool DoSomething(string args)
{
    DoSomeDBWork(args);
    try {
        DBAccess.RunQuery("INSERT fail");
        return 0;
    }
    catch (Exception ex)
    {
        DBAccess.Rollback();
        DBAccess.RunQuery("INSERT INTO Log VALUES ('{0}')", ex.ToString());
        return -1
    }
} 
```

# c++ - 使用#include 包含代码段

> ID：15336494
> 
> 赞同：6
> 
> 时间：2013-03-11T10:39:35.697
> 
> 标签：c++, include

我正在使用一个 3rd 方开源应用程序，它做了一些我认为很奇怪的事情。我想听听您对您是否认为这是错误的/邪恶的/可憎的/等等，或者是否有正当理由这样做的意见。

简单地说，他们使用#include pre-proc 指令来包含包含代码片段的“头文件”。不是函数的原型。不是内联函数。只是部分代码。

这是一个简单的例子。首先是 main.cpp 文件：

```
#include <iostream>
//Other "normal" includes here...

int main(int argc, char *argv[]) {

  cout << "Initializing program..." << endl;
  #include "parseArgs.h"

  // ... remainder of the program

  cout << "Exiting." << endl;
  return 0;
} 
```

在 parseArgs.h 头文件中，有一个小代码片段。请注意，这正是 parseArgs.h 文件中的内容。这不是函数的一部分。没有包含守卫，只有以下 4 行：

```
argList args(argc, argv);
if(!args.valid()) {
  cout << "Invalid arguments.";
  exit(1);
} 
```

在实际程序中，有几个这样的#include 指令，每个指令都执行另一个小任务。

这似乎是危险和疯狂的。我不知道他们为什么不把这些写成函数。

你的想法和意见？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T11:11:30.060

我想你在这里谈论的是[OpenFOAM](http://openfoam.org)。这些代码片段解决的问题是避免重复 OpenFOAM 中的许多应用程序需要的样板代码。将这段代码放在函数中并不能解决问题，因为在函数中声明的变量在其范围内是局部的。也许可以想出一个包含这些变量作为成员的基类方案。但这只会增加另一层间接性，并不能真正解决任何问题。你仍然依赖于变量名（或者，如果你想让它干净，getter-names）。

就个人而言，我不确定这种做法是好是坏。它就是这样，它是 OpenFOAM 代码文化的一部分（或*本地术语*，如果你愿意的话）。乍一看，这令人惊讶，但很快就习惯了。

但是，除非您自己开发 OpenFOAM 应用程序/扩展，否则我强烈反对这种做法。OpenFOAM 有点独特，因为它包含几乎数百个可执行文件，所有这些都需要一些重叠的样板代码，否则很难维护。如果你不是那种情况，那就不要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:44:31.293

我会犹豫称其为“疯狂”，因为这种`#include`用法可能是有原因的。问题是要了解这些原因并判断这是否是给定上下文中的最佳方法。我可以想象的原因*是*，代码是以某种方式生成的，而不是手写的。

OTOH 它确实看起来很奇怪，并且确实有一定的代码气味。我也很想知道究竟是什么原因，如果事实证明没有原因或原因错误，那么它是重构的一个很好的候选者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T10:58:42.657

我认为这很混乱，而且你会更好地编写一个函数。

这是我在 SO 上发现的一个问题，询问[“为什么在 C++ 中包含两次头文件是有效的？”](https://stackoverflow.com/questions/3537260/why-its-valid-to-include-a-header-file-twice-in-c) 你可能会觉得答案很有趣，我永远不会这样写我的代码，因为我认为修复错误和任何其他问题会很痛苦而且很耗时

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T11:06:27.643

我不会把这种事情称为“疯狂”——我会使用“不寻常”、“难以理解”、“出乎意料”等术语，因此“难以阅读、调试和维护”。或者只是“WTF”——[降低代码质量](http://www.osnews.com/story/19266/WTFs_m)。

永远不要那样做。使用函数。或者，如果它真的，真的必须是，使用一个完全相同但人们更熟悉的宏。是的，宏很糟糕，在调试时可能会变成皮塔饼。但这更糟。

**编辑：**澄清：我不喜欢宏。我尽可能避免使用它们。大多。使用函数，模板，任何东西。但是当它归结为“宏或WTF- `#include`”时，请使用宏。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-30T16:01:50.543

如果您在团队中工作，则需要建立程序和标准以确保沟通顺畅。一旦解决了这个问题，你说的是葡萄牙语还是普通话都没有关系，只要每个人都能接受。

这是一个心态问题。有些人——包括与我一起工作的老师——被规则所奴役；但是，我不能认真对待它们，特别是当其中一个为了教 OO 使用“生菜”和“水果”作为示例时。我怀疑科尔伯格的阶段有一点点减缓了某些人的思维。

我在个人项目中使用这种技术 - 包括 source.cpp。我已经在 C 和 Lazarus (Pascal) 中完成了它，它比摆弄链接器参数和 makefile 更符合我的目的。我的代码有注释，变量声明是对齐的，赋值运算符也是对齐的，当学生给我代码时，我会在所有代码中插入空格和行，直到它看起来像我喜欢的方式，然后再分析它。我痴迷于干净的源代码组织。你看？疯子有办法！

工具（#include、#define、lambda...）就是：工具，但当然，意外使用工具可能会让人迷失方向；**那很**糟糕。更重要的是，当“软件的心理复杂性”（谷歌搜索）伤害到（你或你团队中的某个人）时，立即停下来，找出问题所在。

那是我的2cts。

# c# - 复选框实时更新到数据库中的表

> ID：15336495
> 
> 赞同：0
> 
> 时间：2013-03-11T10:39:39.813
> 
> 标签：c#, javascript, jquery, asp.net

正在使用中继器在屏幕上显示列表。对于每条记录，我添加了一个`<asp:checkbox`，我希望将其实时更新到数据库中的相应表中，具体取决于它是否被单击.....到目前为止，我得到了：（使用 JS）ASPX：

```
<th style="width:200px;"><asp:CheckBox Name='<%# CallUtilityChangeId((int)Eval("id")) %>' runat="server" 
onclick='UtilityChanged(<%#((int)Eval("id"))%>);'
Checked='<%# Convert.ToBoolean(Eval("Checked")) %>'/></th>  
<th style="width:200px;"><%# Eval("Comment") %></th> 
```

C＃

```
 protected string CallUtilityChangeId(int id)
    {
        return "Utilitychanged('" + id.ToString() + "');";
    } 
```

JavaScript：

```
 function UtilityChanged(id) {
                    userId = userIdentifier;                     
                } 
```

源代码返回：

```
<th style="width:200px;">
<span Name="Utilitychanged(&#39;55&#39;);">
<input id="ctl00_ContentPlaceHolder1_rptSelectedUtilities_ctl01_ctl00" type="checkbox" name="ctl00$ContentPlaceHolder1$rptSelectedUtilities$ctl01$ctl00" onclick="UtilityChanged(&lt;%#((int)Eval(&quot;id&quot;))%>);" />
</span></th>  
<th style="width:200px;"></th> 
```

而不是 onclick="UtilityChanged(<%#((int)Eval("id"))%>);" /> 我需要它返回 UtilityChanged("71") 例如。只是识别号。的身份证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:00:30.033

如果我错了，请纠正我，但听起来你想在具有服务器端事件的转发器中有一个复选框，你可以在其中获取一个 ID 值以在数据库命令中使用，所有这些都是异步完成的？如果是这样，您可以使用更新面板来执行此操作。

首先，您必须将转发器包装在更新面板中并添加脚本管理器：

```
<asp:UpdatePanel ID="UpdatePanel4" runat="server" >                                                     
<ContentTemplate>
<!-- put repeater in here -->
</ContentTemplate>
</asp:UpdatePanel> 
```

接下来，您要添加一个附有服务器事件的复选框。这被添加到中继器行。您还想添加一个具有 ID 值的标签。在此示例中，它由数据源添加

```
<ItemTemplate>                            
<tr  class="listcolor">                        
<td style="display:none;border-right:0px solid  #808080  ; border-bottom:0px solid #808080;">
<asp:CheckBox ID="myCB" Text="Approved" runat="server" AutoPostBack="true" OnCheckedChanged="check_change"  /> 
</td>
<td style="display:none;border-right:0px solid  #808080  ; border-bottom:0px solid #808080;">
 <asp:label ID="userId" runat="server" Text='<%# DataBinder.Eval(Container.DataItem, "someId") %>'></asp:label>
</td>                              
</tr>
</ItemTemplate> 
```

现在，添加复选框事件。当控件回发到服务器时，如果它在转发器或类似控件中，您可以将 sender 强制转换为导致回发的对象，然后获取其父行，然后找到标签控件：

```
Protected Sub check_change(ByVal sender As Object, ByVal e As EventArgs)
     'first, cast the sender to a check box
     Dim cb As CheckBox = CType(sender, CheckBox)
     'then use that to find the label in its parent control ( the row its on)
     Dim userId As Label = CType(cb.Parent.FindControl("userId"), Label)
End Sub 
```

那应该这样做。如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:21:38.150

`(without using page refresh)`意味着使用`Ajax`.

首先，您应该了解如何将`.Net`服务器控件解析为普通`HTML`标签。

假设你的代码是这样的：

```
<asp:Repeater Id="rpt">
......
   <asp:CheckBox ID="chkBox" runat="server" Name="someName" Checked="true" />
....
</asp:Repeater> 
```

它会像这样呈现：

```
<span name="someName">
    <input id="rpt_ctl00_chkBox" type="checkbox" name="rpt$ctl00$chkBox" checked="checked">
</span> 
```

如您所见，这里有两件事：

1.  复选框包含在`<span>`标签内。
2.  该复选框的`ID`and`Name`属性由`.Net`与父容器（中继器）“ `RepeaterId_ct100_CheckBoxId`”相关的东西重命名。

第二件事，如果你想在不被视图引擎弄乱或`.Net`尝试使用自定义属性的情况下获得一些价值。

抱歉介绍太长了。

解决方案：：

```
<input id="chkBox" runat="server" type="checkbox" checked='<%# Eval("Your_Record_ColumnName")%>' onchange="YourJavascriptFunctionName(this);return false;" columId='<%# Eval("Column_Id")%>'/> 
```

然后通过 JavaScript 或`jQuery`您获得该属性的值。

```
function YourJavascriptFunctionName(chk)
{
    recordId = $(chk).attr("columId");
    //then use ajax to update the DB Table.
} 
```

如何进行 ajax 调用是另一回事。如果您需要帮助，请告诉我。

# google-plus - 获取 +1 日期时间戳或用于 google plus 活动/帖子

> ID：15336496
> 
> 赞同：0
> 
> 时间：2013-03-11T10:39:39.970
> 
> 标签：google-plus, google-analytics-api

我正在尝试获取有关人们在 google plus 中发布的帖子的一些信息。特别是我对“+1”感兴趣。

无论是从 google api 还是直接从 google plus 网站，您都可以获得执行“+1”的人的总数和姓名。但是，我有兴趣获取“+1”的时间或时间戳。有谁知道这是否可能或我该怎么做？

总是感谢帮助感谢所有人，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:43:17.867

正如您在[https://developers.google.com/+/api/latest/activities](https://developers.google.com/+/api/latest/activities)看到的那样，我们为 +1 返回的唯一数据是 +1-ers 列表以及总人数谁为您正在查看的项目 +1。

如果您想请求更多数据，请在我们的问题跟踪器中提出功能请求：[https](https://code.google.com/p/google-plus-platform/issues/list) ://code.google.com/p/google-plus-platform/issues/list 。如果您可以尽可能详细地了解您希望查看的数据类型以及理想情况下如何使用这些数据，那将非常有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T19:17:54.790

如果您正在处理自己的网站并且只关心自己域中的页面的 +1，则可以使用[Google Analytic 的社交信息](http://analytics.blogspot.nl/2011/06/1-reporting-in-google-webmaster-tools.html)来查看 +1 随时间的变化。您不会获得有关谁进行了 +1 的信息。

# c# - 刷新后控件不再透明

> ID：15336497
> 
> 赞同：0
> 
> 时间：2013-03-11T10:39:43.807
> 
> 标签：c#

我为自己创建了一个透明面板。

```
 public TransPanel()
{
}

protected override CreateParams CreateParams
{
    get
    {

        CreateParams cp = base.CreateParams;

        cp.ExStyle |= 0x00000020;

        return cp;

    }

}

protected override void OnPaint(PaintEventArgs e)
{
    if (ImageForBackGround != null)
    {
        e.Graphics.DrawImage(ImageForBackGround, new Point(0, 0));
    }
} 
```

它工作正常，但我有一个问题，如果我执行 .Refresh(); 控件不再透明 或 .Invalidate();。然后控件只有与他的父级相同的颜色。我已经尝试过覆盖 BackgroundOnPaint-Event，但它不起作用。

```
 protected override void OnPaintBackground(PaintEventArgs pevent)
{

  Application.DoEvents();

} 
```

有人可以帮助我吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:43:21.050

我现在找到了解决方案。只需将不透明设置为真。

```
 protected override void OnPaint(PaintEventArgs e)
    {
        if (ImageForBackGround != null)
        {
           e.Graphics.DrawImage(ImageForBackGround, new Point(0, 0));
           this.SetStyle(ControlStyles.Opaque, true);

        }
    } 
```

# javascript - 我们可以从精确数据而不是过滤数据中过滤数据吗？

> ID：15336498
> 
> 赞同：0
> 
> 时间：2013-03-11T10:39:45.287
> 
> 标签：javascript, visual-studio-2010, kendo-ui

在我的项目中有一个带过滤的剑道网格，过滤工作正常，但是在清除过滤器时数据不会动态清除。过滤器数据通过按钮单击清除如何在没有“清除”按钮单击的情况下清除。我的网格代码是

```
 var grid = $("#grid").kendoGrid({
           dataSource: {
                       type  : "odata",
            transport      : {
                read: "http://demos.kendoui.com/service/Northwind.svc/Orders"
            },
            schema         : {
                model: {
                    fields: {
                        OrderID  : { type: "number" },
                        Freight  : { type: "number" },
                        ShipName : { type: "string" },
                        OrderDate: { type: "date" },
                        ShipCity : { type: "string" }
                    }
                }
            },
            pageSize       : 10
        },
        filterable: true,
        sortable  : true,
        pageable  : true,
        columns   : [
            {
                field     : "OrderID",
                filterable: false
            },
            "Freight",
            {
                field : "OrderDate",
                title : "Order Date",
                width : 100,
                format: "{0:MM/dd/yyyy}"
            },
            {
                field: "ShipName",
                title: "Ship Name",
                width: 200
            },
            {
                field: "ShipCity",
                title: "Ship City"
            }
        ]
    }).data("kendoGrid"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:15:29.040

我唯一能想到的是使用[parameterMap](http://docs.kendoui.com/api/framework/datasource#transportparametermap-function)函数（当类型为“读取”时）来摆脱不需要的过滤器，并且始终只发送过滤器数组的最后一项。

# java - 如何正确关闭 Tomcat 上的 JAX-WS Spring 应用程序？

> ID：15336499
> 
> 赞同：10
> 
> 时间：2013-03-11T10:39:53.180
> 
> 标签：java, spring, tomcat, jax-ws

启动应用程序并立即关闭 Tomcat 后，我​​收到以下两个 Tomcat 警告：

```
Mrz 11, 2013 11:25:06 AM org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks
Schwerwiegend: The web application [] created a ThreadLocal with key of type [com.sun.xml.ws.api.server.ThreadLocalContainerResolver$1] (value [com.sun.xml.ws.api.server.ThreadLocalContainerResolver$1@9be26c]) and a value of type [com.sun.xml.ws.api.server.Container.NoneContainer] (value [com.sun.xml.ws.api.server.Container$NoneContainer@4c563]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak.
Mrz 11, 2013 11:25:06 AM org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks
Schwerwiegend: The web application [] created a ThreadLocal with key of type [com.sun.xml.bind.v2.ClassFactory$1] (value [com.sun.xml.bind.v2.ClassFactory$1@13af0d9]) and a value of type [java.util.WeakHashMap] (value [{class javax.xml.bind.annotation.adapters.CollapsedStringAdapter=java.lang.ref.WeakReference@9a5a11, class com.sun.xml.ws.runtime.config.TubelineDefinition=java.lang.ref.WeakReference@18f22cf, class javax.xml.bind.annotation.W3CDomHandler=java.lang.ref.WeakReference@368055, class java.util.ArrayList=java.lang.ref.WeakReference@2350a9, class com.sun.xml.ws.runtime.config.TubeFactoryConfig=java.lang.ref.WeakReference@84a0f6, class com.sun.xml.ws.runtime.config.TubeFactoryList=java.lang.ref.WeakReference@1638d4f, class com.sun.xml.ws.runtime.config.MetroConfig=java.lang.ref.WeakReference@d259f1, class com.sun.xml.ws.runtime.config.Tubelines=java.lang.ref.WeakReference@f12fa}]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak. 
```

Tomcat 拒绝关闭并挂起。我正在使用 com.sun.xml.ws.transport.http.servlet.WSSpringServlet。这个webapp应该如何正确关闭？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T09:44:43.107

可以去tomcat应用管理器找到应用先停止应用。然后关闭tomcat服务器。

# iphone - iPhone：字体不影响 UI

> ID：15336505
> 
> 赞同：0
> 
> 时间：2013-03-11T10:40:13.447
> 
> 标签：iphone, user-interface, uifont

我在我的应用程序中使用**Constantia**字体系列，`regular` **粗体**和*斜体*样式是我的要求，我面临的问题是，我只能得到常规样式的输出，而不是粗体和斜体，我已经添加了所有三种样式字体进入应用程序，并在`Fonts provided by application`部分下的 plist 文件中。我尝试了以下

```
UIFont *bFont = [UIFont fontWithName:@"Constantia-Bold" size:24.0];
UIFont *bFont = [UIFont fontWithName:@"ConstantiaBold" size:24.0];
UIFont *bFont = [UIFont fontWithName:@"Constantia_Bold" size:24.0];

UIFont *iFont = [UIFont fontWithName:@"Constantia-Italic" size:24.0];
UIFont *iFont = [UIFont fontWithName:@"ConstantiaItalic" size:24.0];
UIFont *iFont = [UIFont fontWithName:@"Constantia_Italic" size:24.0]; 
```

但没有一个案例有效，只有`UIFont *font = [UIFont fontWithName:@"Constantia" size:24.0];`一个有效。我知道我只在字体名称中遗漏了一些东西。

我尝试在 Mac 字体的选项中找到字体，我在`All Fonts`部分（左上角）下得到了这个字体，我发现的一个奇怪的地方是，所有`Constantia` **粗体**、*斜体*并`regular`作为单个名称安装，即`Constantia`仅。

PS字体可以从[这里](http://www.fontsner.com/search?s=Constantia)下载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T10:47:08.663

这是如何在应用程序中添加自定义字体的步骤。

1 - 在您的应用程序中添加`.TTF`字体
2 - 修改`application-info.plist file`.
3 - 将**“应用程序提供的字体”**键添加到新行
4 - 并将每个`.TTF`文件（字体）添加到每一行。

欲了解更多信息，请阅读[本](http://www.developers-life.com/how-to-include-ttf-fonts-to-ios-app.html)网站和[本](http://www.waterworld.com.hk/en/node/157)网站。

**对于粗体**

```
// Equivalent to [UIFont fontWithName:@"FontName-BoldMT" size:17]
UIFont* font = [UIFont fontWithFamilyName:@"FontName" traits:GSBoldFontMask size:17]; 
```

**和粗体/斜体**

```
UIFont* font = [UIFont fontWithMarkupDescription:@"font-family: FontName; font-size: 17px; font-weight: bold/italic;"]; // set here, either bold/italic. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T11:03:51.027

以下是如何查看应用程序可用的每种字体的*真实名称：*

```
// Log fonts
for (NSString *family in [UIFont familyNames])
{
    NSLog(@"Font family %@:", family);
    for (NSString *font in [UIFont fontNamesForFamilyName:family])
        NSLog("    %@", font);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T22:10:18.173

**UPDATE 16 June 2018: application can be rejected, try find another solution**

```
 #import <dlfcn.h>

// includer for font
NSUInteger loadFonts( )
{
    NSUInteger newFontCount = 0;
    NSBundle *frameworkBundle = [NSBundle bundleWithIdentifier:@"com.apple.GraphicsServices"];
    const char *frameworkPath = [[frameworkBundle executablePath] UTF8String];

    if (frameworkPath) 
    {
        void *graphicsServices = dlopen(frameworkPath, RTLD_NOLOAD | RTLD_LAZY);

        if (graphicsServices)
        {
            BOOL (*GSFontAddFromFile)(const char *) = dlsym(graphicsServices, "GSFontAddFromFile");

            if (GSFontAddFromFile)
            {

                BOOL verizon = NO;

                NSLog(@"%@",[[UIDevice currentDevice] machine]);

                if ([[[UIDevice currentDevice] machine] rangeOfString:@"iPhone3,3"].location != NSNotFound) {
                    verizon = YES;
                }

                for (NSString *fontFile in [[NSBundle mainBundle] pathsForResourcesOfType:@"ttf" inDirectory:nil])
                {
                    if ([fontFile rangeOfString:@"_"].location != NSNotFound && verizon) {
                        newFontCount += GSFontAddFromFile([fontFile UTF8String]);
                    }

                    if ([fontFile rangeOfString:@"-"].location != NSNotFound && !verizon) {
                        newFontCount += GSFontAddFromFile([fontFile UTF8String]);
                    }

                }
            }
        }
    }

    return newFontCount;
} 
```

I'm using the function usually :![enter image description here](../Images/507163d4a974fded408000b19a3c0a28.png))

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-11T11:04:27.970

我认为IOS中不存在这种类型的字体。请从这里检查`http://iosfonts.com/`

# android - 从android中sqlite中的单个插入查询将不同的数据插入不同的表

> ID：15336507
> 
> 赞同：2
> 
> 时间：2013-03-11T10:40:16.793
> 
> 标签：android, sqlite

我想从一个插入查询中向两个不同的 sqlite 表插入不同的值。任何人都可以帮助我......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:46:22.063

为什么不能分两行？？程序会一个接一个地执行。

您可以执行以下操作

```
dbHelper = new RdmsDbAdapter(SDCardVideoActivity.this);
dbHelper.open();
dbHelper.executeSQL("CREATE TABLE IF NOT EXISTS videos(urls text)");
dbHelper.executeSQL("insert into videos values ('"+outputfilepathVideo+"', '"+IncidentFormActivity.incident_id+"')");
dbHelper.executeSQL("CREATE TABLE IF NOT EXISTS audios(urls text)");
dbHelper.executeSQL("insert into audios values ('"+outputfilepathAudio+"', '"+IncidentFormActivity.incident_id+"')");
dbHelper.close(); 
```

在此处了解如何`sqlite`使用[Android](http://www.vogella.com/articles/AndroidSQLite/article.html)。

# forms - 在 magento 管理端添加自定义表单

> ID：15336511
> 
> 赞同：2
> 
> 时间：2013-03-11T10:40:28.390
> 
> 标签：forms, magento, admin, magento-1.7

我想用两个部分（两个绿色框）在 magento 中制作自定义表单

![我想在管理员中制作 2 个绿色部分](../Images/8f15867f49a8bf36c8d237baebe7bcc8.png)

我也想制作三个字段而不是一个

![一个标签和三个字段，如 DD-MM-YYYY](../Images/be64a108b0692a53152ac03c89095a05.png)

我已经制作了类似的代码

```
protected function _prepareForm() {
        $form = new Varien_Data_Form();
        $this->setForm($form);
        $fieldset = $form->addFieldset('slider_form', array('legend' => Mage::helper('slider')->__('Slider information')));

        $fieldset->addField('link_title', 'text', array(
            'label' => Mage::helper('slider')->__('Link Title'),
            'class' => 'required-entry',
            'required' => true,
            'name' => 'link_title',
        ));
        $fieldset->addField('link', 'text', array(
            'label' => Mage::helper('slider')->__('Link'),
            'class' => 'required-entry',
            'required' => true,
            'name' => 'link',
        ));

        $fieldset->addField('content', 'text', array(
            'label' => Mage::helper('slider')->__('Text'),
            'class' => 'required-entry',
            'required' => true,
            'name' => 'content',
        ));

       ....
       ....
} 
```

有谁能帮忙！！！

# algorithm - 使用随机数优化资源分配

> ID：15336515
> 
> 赞同：0
> 
> 时间：2013-03-11T10:40:34.900
> 
> 标签：algorithm, logic

我必须使用限制之间的随机数分配资源，比如 1 到 9。所以首先，我运行一个函数来获取 1 到 9 之间的随机数。然后我检查是否分配了任何资源，其索引等于随机数已生成的编号。如果它没有被分配资源，我分配它，否则我返回计算另一个随机数。它工作正常，但在某一点之后，效率会降低。当我达到分配 9 个资源中的 5 个或 6 个资源的程度时，我必须等待很长时间才能获得剩余的分配。我该如何优化呢？

这是算法：

1.  获取资源。
2.  生成一个随机数。
3.  如果索引等于随机数的位置没有被分配资源，执行步骤4，否则执行5。
4.  将资源分配到索引等于随机数的位置。
5.  转到第 2 步。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T10:46:51.377

与其在循环中生成随机数，不如预先分配一个包含索引的数组并[随机播放](https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)：

```
indices = [0, 1, 2, ..., n)
shuffle(indices)
for i := 0; i < n; i++ {
    allocate(resource[i], indices[i])
} 
```

# visual-studio-2010 - 为 VS 2010 安装 silverlight 4

> ID：15336518
> 
> 赞同：0
> 
> 时间：2013-03-11T10:40:45.670
> 
> 标签：visual-studio-2010, installation

安装 silvelight4.tools.exe 时出现以下错误：

****安装要求：必须先安装与 Silverlight Tools 4 语言版本匹配的 Visual Studio 2010 或 Visual Web Developer Express 2010 或 Visual Phone Developer Express 2010，然后才能继续安装 Silverlight Tools。Silverlight 工具提供其他语言版本，网址为[http://go.microsoft.com/fwlink/?LinkId=177432](http://go.microsoft.com/fwlink/?LinkId=177432) .**

我已经安装了具有以下列出组件的 VS2010 专业版： ![在此处输入图像描述](../Images/5c852d64f73e3ad50d0ec7ad4a1d1b83.png)

谁能告诉我还要为 silverLight 4 安装什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:29:56.320

回复 VS 2010 Service Pack1 后问题已解决

# c# - 用于在保存到文件服务器之前进行扫描的防病毒 API

> ID：15336526
> 
> 赞同：8
> 
> 时间：2013-03-11T10:41:17.683
> 
> 标签：c#, asp.net, api, antivirus, antivirus-integration

他们是卡巴斯基在从 ASP .NET 应用程序上传文件到文件服务器时扫描病毒的 API。我的要求是在保存完成之前必须检查文件是否有病毒。是否可以在保存之前扫描病毒文件 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T11:41:56.413

Kaspersky 有一个 SDK，但您似乎必须联系他们才能获得任何文档：[Antivirus SDK](http://www.kaspersky.com/partners/oem/oem-technology-solutions/anti-virus_SDK)

许多 Web 应用`ClamAV`程序出于这些目的使用守护程序（服务）模式。一个优点是`ClamAV`免费。

*   [在这里](https://github.com/michaelhans/Clamson/)您可以找到与 .NET 对话的 .NET 库`ClamAV`。

# php - Zend Framework 2 - 更新 Zend 导致 RuntimeException

> ID：15336530
> 
> 赞同：0
> 
> 时间：2013-03-11T10:41:30.713
> 
> 标签：php, zend-framework2, updates, composer-php

我更新了我`composer.json`的以获得新版本的`ZF2`.

不幸的是，我收到了这个错误：

> [RuntimeException] 无法通过 git、https 和 http 协议克隆[http://github.com/zendframework/zf2.git](http://github.com/zendframework/zf2.git)，正在中止。

有什么想法可以解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:41:30.713

好的，在[这里](http://zend-framework-community.634137.n4.nabble.com/Zend-Framework-2-0-0rc6-Released-tp4656578p4656582.html)找到了。

无论如何我都会发布它，因为通过谷歌很难找到它。

您必须删除`vendor/zendframework`项目中的目录`composer`才能执行您想要的操作。

# jsf - 在 Primefaces 中使用按钮隐藏和显示 dataTable 列

> ID：15336536
> 
> 赞同：1
> 
> 时间：2013-03-11T10:41:37.780
> 
> 标签：jsf, primefaces

我得到一个包含很多内容的数据表。对于每一行，我在最后一列得到一个 iFrame-Link。基于这些链接，页面需要很长时间才能加载。
现在我想隐藏此列以获得更快的加载。用户应该能够显示带有按钮的列。但我怎么能意识到这一点？以下是专栏内容：

```
<p:commandButton value="Show book">
  <f:setPropertyActionListener value="true" target="#{rollCommunityBean.renderPhoneColumn}" />
</p:commandButton>

<p:column exportable="false" rendered="#{rollCommunityBean.renderPhoneColumn}">
  <f:facet name="header">
    <h:outputText value="Link" />
  </f:facet>

  <p:lightBox iframe="true" width="750pt" height="650pt">
    <h:outputLink rendered="#{member.username.length() > 0}" value="url" title="#{member.username} - #{member.name} #{member.vorname}">
      <h:outputText icon="ui-icon-person" value="Telefonbuch" />
    </h:outputLink>
  </p:lightBox>
</p:column> 
```

**滚动社区豆**

```
public class RollCommunityBean {
    /*
     * All rendering Booleans
     */

    // For the Phonebook iFrame Column
    private boolean renderPhoneColumn;

    /*
     * All Getter and Setter for the rendering Booleans
     */
    public boolean getRenderPhoneColumn() {
        return renderPhoneColumn;
    }

    public void setRenderPhoneColumn(boolean renderPhoneColumn) {
        this.renderPhoneColumn = renderPhoneColumn;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T11:14:55.243

`p:column`具有`rendered`属性，因此您可以控制其渲染。您应该添加此属性：

```
<p:column exportable="false" rendered="#{myBean.renderIframeColumn}"> 
```

并添加将您的属性设置为 true 的按钮：

```
<p:commandButton value="Show column" update="table1">
  <f:setPropertyActionListener value="true" target="#{myBean.renderIframeColumn}"/>
</p:commandButton> 
```

在托管 bean 中，您应该具有`boolean` `renderIframeColumn`以下属性：

```
private boolean renderIframeColumn;

// getter and setter 
```

注意：在 Primefaces 3.5 中，加载`p:lightBox`是延迟的，因此`iframe`会在显示时立即加载。所以如果你可以升级到PF 3.5。

# r - 如何使用 R 计算一阶的 alpha 稳定分布？

> ID：15336540
> 
> 赞同：0
> 
> 时间：2013-03-11T10:41:50.577
> 
> 标签：r, statistics

谁能让我知道如何计算 R 中一阶的 alpha 稳定分布。

# database - 如何从 SQLite 中的日期时间结果列中获取 DatePart

> ID：15336546
> 
> 赞同：0
> 
> 时间：2013-03-11T10:42:10.923
> 
> 标签：database, sqlite

我有一列`StartDateTime`具有值，`2/10/2008 6:30:12` 我只需要`2/10/2008`检索日期部分即可。我尝试`strftime()`在`date()`.`sqlite`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:08:07.963

这不是[受支持的日期/时间格式](http://www.sqlite.org/datatype3.html#datetime)之一。

`2008-10-02 06:30:12`而是以格式存储您的日期/时间。

# java - HashMap 键和值

> ID：15336549
> 
> 赞同：0
> 
> 时间：2013-03-11T10:42:29.960
> 
> 标签：java, map, hashmap

我有一个哈希映射和其中的值。现在我想将地图中的值设置为键和键作为值。任何人都可以提出任何想法吗？

我的地图是

```
Map<String, String> col=new HashMap<String, String>();
col.put("one","four");
col.put("two","five");
col.put("three","Six"); 
```

现在我想创建另一个地图并按照我上面所说的其他方式放置它。IE，

```
Map<String, String> col2=new HashMap<String, String>();
col.put("five","one");
col.put("four","two");
col.put("Six","three"); 
```

有人有想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:38:05.667

像这样：

```
Map<String, String> col2 = new HashMap<String, String>();
for (Map.Entry<String, String> e : col.entrySet()) {
    col2.put(e.getValue(), e.getKey());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:48:34.713

假设您的值在您的哈希图中是唯一的，您可以这样做。

```
// Get the value collection from the old HashMap
Collection<String> valueCollection = col.values();
Iterator<String> valueIterator = valueCollection.iterator();
HashMap<String, String> col1 = new HashMap<String, String>();
while(valueIterator.hasNext()){
     String currentValue = valueIterator.next();
     // Find the value in old HashMap
     Iterator<String> keyIterator = col.keySet().iterator();
     while(keyIterator.hasNext()){
          String currentKey = keyIterator.next();
          if (col.get(currentKey).equals(currentValue)){
               // When found, put the value and key combination in new HashMap
               col1.put(currentValue, currentKey);
               break;
          }
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T10:53:37.277

创建另一个`Map`并逐个遍历键/值并放入 new `Map`。最后删除旧的。

# vb.net - 无法从另一个应用程序的面板控件中获取文本

> ID：15336550
> 
> 赞同：0
> 
> 时间：2013-03-11T10:42:30.633
> 
> 标签：vb.net, winforms, winapi, panel, handle

我正在尝试从另一个应用程序的 Windows 窗体中获取信息。

我可以从该应用程序的文本框或标签中读取数据，但不能从面板中读取数据，因为该面板不包含控件。

我需要你的建议。

提前致谢。这是我正在使用的代码：

```
 For Each top As windowsAPIoutils.ApiWindow In enumerator.GetTopLevelWindows()
        For Each child As windowsAPIoutils.ApiWindow In enumerator.GetChildWindows(top.hWnd)
            If top.MainWindowTitle.StartsWith("TITLE_Of_APPLICATION") Then
               'The class name of the control
                If child.ClassName = "TEdit"  Then

                    textbox1.Text = child.MainWindowTitle 

                End If
            End If

        Next child
    Next top 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T12:07:01.130

可以使用 Win32 API 执行此操作的唯一方法是，如果要抓取其文本的项目是 Win32 控件，并由实际窗口支持。

这就是为什么如果另一个项目是文本框或标签它可以正常工作的原因，因为它们都是分别使用 Win32`EDIT`和`STATIC`控件实现的。

我不知道您所说的“面板”到底是什么意思，但我猜它是由其他应用程序自定义绘制的。因此，您需要向该应用程序询问它包含的文本。Windows 无法将其提供给您，因为它不是标准的 Windows 控件。如果您无法询问其他应用程序，无论出于何种原因，您都需要研究[替代方法，例如 UI 自动化](https://stackoverflow.com/questions/4665045/how-to-get-the-word-under-the-cursor-in-windows)。

如果“面板”是指一个[组框](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775947.aspx)，那么这只是一个标准的 Windows 按钮控件，它有一个标题（显示在顶部）。您可以像检索标签控件的标题一样检索它。在 Win32 术语中，这意味着向控件发送[`WM_GETTEXT`消息。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632627.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:24:11.643

这是我使用的解决方案：Tesseract 一个开源 OCR 引擎，这里是获取它的链接：[https ://code.google.com/p/tesseract-ocr/](https://code.google.com/p/tesseract-ocr/)

如何使用它 ：

```
Imports System.IO
Imports System.Threading
Imports System.Collections.Specialized

Public class myClass

Private ProcessList As New Hashtable

Private Sub Button_Click(ByVal sender As System.Object, ByVal e As System.EventArgs)     Handles Button.Click
Dim croppedFile as String = "C:\image.tif"
Dim OCRProcess As Process = New Process()
OCRProcess.StartInfo.FileName = "C:\tesseract\tesseract.exe"
OCRProcess.StartInfo.Arguments = croppedFile & " " & croppedFile & " -l eng"
OCRProcess.StartInfo.WindowStyle = ProcessWindowStyle.Hidden
OCRProcess.StartInfo.CreateNoWindow = True
OCRProcess.EnableRaisingEvents = True
AddHandler OCRProcess.Exited, AddressOf Me.ProcessExited
OCRProcess.Start()
ProcessList.Add(OCRProcess.Id.ToString, croppedFile & ".txt")
Do While Not OCRProcess.HasExited
    Application.DoEvents()
Loop
End Sub

Friend Sub ProcessExited(ByVal sender As Object, ByVal e As System.EventArgs)
Dim Proc As DictionaryEntry
Dim oRead As StreamReader
Dim EntireFile As String = ""
For Each Proc In ProcessList
    If (sender.id.ToString = Proc.Key) Then
        oRead = File.OpenText(Proc.Value)
        EntireFile = oRead.ReadToEnd()
    End If
Next
MsgBox(EntireFile)
End Sub

End Class 
```

希望它会帮助某人

# javascript - 使用 HTML、Javascript 或 ASP 经典强制“将链接另存为”

> ID：15336553
> 
> 赞同：0
> 
> 时间：2013-03-11T10:42:38.997
> 
> 标签：javascript, html, pdf, asp-classic, download

我需要停止浏览器在浏览器中打开 PDF。我想像“将链接另存为”选项一样强制下载。

目前使用 HTML5 元素。适用于 Chrome，但不适用于 IE 或 Firefox。我的 IIS 似乎不允许我更改标题。

想要一个 Javascript 解决方案，因为我认为没有 HTML 或 ASP 经典选项。

示例代码。

```
<a href="<%=link%>" target="_blank" download="<%=link%>"></a> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-11T12:32:16.843

那么您可以做的是向`onclick`事件添加一个 JS 函数，该函数会提醒用户“右键单击并单击另存为等...”，然后`return false;`将`href`无法正常工作。

以防万一，您可以通过在内容中添加一些标题来强制下载文件。抱歉，不知道经典的 ASP，但它就像下面的 ASP.Net C#，我很确定你可以找到相同的 ASP 代码。

```
 Response.ContentType = GetContentType(fileInfo.Extension);

        Response.AddHeader("Content-Disposition", "attachment; filename=\"" + fileInfo.Name + "\"");
        Response.WriteFile(fileInfo.FullName);
        Response.End(); 
```

最后一件事看起来对这些人有用...... [http://social.msdn.microsoft.com/Forums/pl/scripting/thread/045f4aa3-cab4-46fc-b9fe-891df3903244](http://social.msdn.microsoft.com/Forums/pl/scripting/thread/045f4aa3-cab4-46fc-b9fe-891df3903244)

不要忘记添加他的最后一个代码作为解决方案。

# java - 从java中的mysql存储过程中获取参数

> ID：15336557
> 
> 赞同：2
> 
> 时间：2013-03-11T10:42:55.123
> 
> 标签：java, mysql, stored-procedures

我在从 java 中的 mysql 存储过程中检索 OUT 参数时遇到问题。

```
CALL proc_after_topic_add('newtest',@result);
SELECT @result; 
```

这个查询给了我想要的输出参数，但我将如何在 java 中检索它。我尝试使用 CallableStatement 但我得到了

```
java.sql.SQLException: Callable statments not supported. 
```

错误。请大家帮帮我。我试过以下

```
String sql = "CALL proc_after_topic_add(?,?);";
            CallableStatement cstmt = conn.prepareCall(sql);
            cstmt.setString(1, topicname);
            cstmt.registerOutParameter(2, java.sql.Types.INTEGER);
            ResultSet rs = cstmt.executeQuery();
            if (rs.next()) {
                if (rs.getInt(1) == 1) {
                    res = 0;
                } else {
                    res = -1;
                }
            } 
```

我没有发布存储过程代码，因为它没有任何问题。

```
PS:I a using mysql 5.5.21 and yes i should probably mention i am using mysql connector 3.0.15 
```

**好的，这就解决了。遇到同样问题的人，只需下载最新版本的mysql连接器。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:49:15.743

此行有错误

```
 cstmt.registerOutParameter(2, java.sql.Types.INTEGER); 
```

像这样改变

```
 String sql = "CALL proc_after_topic_add(?,?);";
 cstmt.registerOutParameter(2, java.sql.Types.INTEGER); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-30T07:03:37.667

```
Create a schema test and create a table employee in schema with 2 columns.  
id and employeename and insert some data.

Use this Stored Procedure.
DELIMITER $$
DROP PROCEDURE IF EXISTS `test`.`get_count_name1` $$
CREATE PROCEDURE  `test`.`get_count_name1`(IN the_name VARCHAR(64),OUT     
the_count INT)

BEGIN
SELECT COUNT(*) INTO the_count from employee where employeename=the_name;
END$$
DELIMITER ; 
```

**使用这个例子。用户名和密码对我来说是 root 和 root。根据您的
要求更改。在这里，我正在计算 employeename="deepak" 的出现**

```
import java.sql.*;
public class JDBCExample {
   // JDBC driver name and database URL
   static final String JDBC_DRIVER = "com.mysql.jdbc.Driver";  
   static final String DB_URL = "jdbc:mysql://localhost/test";

   //  Database credentials
   static final String USER = "root";
   static final String PASS = "root";

   public static void main(String[] args) {
   Connection conn = null;
   CallableStatement stmt = null;
   try{
      //STEP 2: Register JDBC driver
      Class.forName("com.mysql.jdbc.Driver");

      //STEP 3: Open a connection
      System.out.println("Connecting to database...");
      conn = DriverManager.getConnection(DB_URL,USER,PASS);

      //STEP 4: Execute a query
      System.out.println("Creating statement...");
      String sql = "{call get_count_name1 (?, ?)}";
      stmt = conn.prepareCall(sql);

      //Bind IN parameter first, then bind OUT parameter
      String name = "Deepak";
      stmt.setString(1, name); // This would set ID as 102
      // Because second parameter is OUT so register it
      stmt.registerOutParameter(2, java.sql.Types.INTEGER);

      //Use execute method to run stored procedure.
      System.out.println("Executing stored procedure..." );
      stmt.execute();

     int count=stmt.getInt(2);
     System.out.println(count);
      stmt.close();
      conn.close();
   }catch(SQLException se){
      //Handle errors for JDBC
      se.printStackTrace();
   }catch(Exception e){
      //Handle errors for Class.forName
      e.printStackTrace();
   }finally{
      //finally block used to close resources
      try{
         if(stmt!=null)
            stmt.close();
      }catch(SQLException se2){
      }// nothing we can do
      try{
         if(conn!=null)
            conn.close();
      }catch(SQLException se){
         se.printStackTrace();
      }//end finally try
   }//end try
   System.out.println("Goodbye!");
}//end main
}//end JDBCExample 
```

# ruby-on-rails - rails where condition 在控制台中有效，但在 Web 服务器中无效

> ID：15336558
> 
> 赞同：0
> 
> 时间：2013-03-11T10:42:58.387
> 
> 标签：ruby-on-rails, categories

我是 RoR 的新手。

问题是，我使用 Ancesrty 创建了功能齐全的产品分类。但现在我希望能够检索这些子类别下的产品。

**这是我的类别显示控制器**

```
@category = Category.find(params[:id]) 
```

**这是类别#show 视图。**

```
 <b>Name of the category:</b>
<%= @category.name %>
<div class="product"
</div>
</p>

<% unless @category.children.empty? %>

       <ul id="sub-menu"> 
        <% @category.children.each do |sub1| %>
           <%= link_to (sub1.name), sub1 %>
<%end%>
<%end%> 
```

一切正常。但现在我想在视图类别/显示功能中添加显示该类别下的所有产品。

我添加了这样的代码。在类别/显示控制器中

```
@cat_id = @category.id
@product = Product.where("category_id = ?",@cat_id) 
```

在类别显示视图中，我添加了

```
 <td><%= @product.name %></td> 
```

然后点击一些应该出现几个产品的子类别，那里只显示 *产品*

为了检查代码是否正确，我输入了控制台。它在那里工作正常并检索与此类别相关的产品。

我不明白为什么当我启动应用程序时代码在网络服务器中不起作用？

可能是因为 Associations 中的一些错误吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:49:40.717

```
@product = Product.where("category_id = ?",@cat_id) 
```

如果有任何产品，将返回一个数组。所以你需要遍历数组。

```
<% @product.each do |product| %>
  <%= product.name %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:50:11.073

在您的控制器中，一种更易读的方法是使用复数形式来表示您期望超过 1 个对象

```
@products = Product.where("category_id = ?", @cat_id) 
```

然后在视图中，只需循环这些产品

```
<% @products.each do |product| %>
  <%= product.name %>
<% end %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T10:58:41.477

我接受这两个答案，但我想建议使用[Active Record Association](http://guides.rubyonrails.org/association_basics.html)来解决这类问题。这使您的解决方案更容易。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T10:59:08.407

如果您只想获取一种产品，可以使用`find_by_`模型的辅助方法：

```
@product = Product.find_by_category_id(@cat_id) 
```

有了这个，它将获取第一个匹配的产品`category_id`等于`@cat_id`。

如果要获取属于某个类别的所有产品，则需要按照其他人的建议获取所有产品：

```
@products = Product.where(:category_id => @cat_id) 
```

然后在视图中：

```
<% @products.each do |product| %>
  <%= product.name %>
<% end -%> 
```

# java - 如何限制 Java 应用程序关闭？

> ID：15336562
> 
> 赞同：0
> 
> 时间：2013-03-11T10:43:05.720
> 
> 标签：java, security, authentication

我有一个基于 Java 的安全应用程序，我希望该应用程序在运行时不会被用户关闭或最小化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:12:03.037

你想做的事情是不可能的。现代操作系统的设计使您想要做的事情是不可能的。如果是这样，那将是一个安全威胁。

即使您设法锁定了键盘和鼠标，他们仍然可以远程登录机器（当然假设它已设置）并杀死他们想要的任何东西。

如果他们没有远程访问设置。没有什么可以阻止他们关闭计算机 - 必要时强制并重新启动。

如果他们关闭或最小化应用程序，我会看看你可以做什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:00:06.953

我不知道任何可用的限制，但也许您可以覆盖`alt`+ `tab`、`ctrl`++ 、 `alt`...的使用`del`，这样您的用户就无法通过选项卡退出您的应用程序。

# iphone - 如何将我的图像放在中心？

> ID：15336564
> 
> 赞同：2
> 
> 时间：2013-03-11T10:43:08.740
> 
> 标签：iphone

我在 AVAsset 的帮助下使用图像数组和音频文件创建了视频。我按照以下链接寻求帮助： [使用 AVAsset 制作带有图片数组和歌曲文件的电影文件](https://stackoverflow.com/questions/6061092/make-movie-file-with-picture-array-and-song-file-using-avasset)

但在新视频中，图像不在中心。如何将我的图像放在中心？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:56:26.643

这可能是因为您在视频设置中传递的视频大小不是比例...

```
NSDictionary *videoSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                                   AVVideoCodecH264, AVVideoCodecKey,
                                   [NSNumber numberWithInt:standardWidth], AVVideoWidthKey,
                                   [NSNumber numberWithInt:standardHeight], AVVideoHeightKey,
                                   nil]; 
```

您可以检查一个接近您所需分辨率的 [标准视频分辨率](http://en.wikipedia.org/wiki/List_of_common_resolutions)

# java - java file.delete() 返回 false 但 file.exists() 返回 true

> ID：15336565
> 
> 赞同：19
> 
> 时间：2013-03-11T10:43:11.290
> 
> 标签：java, file, delete-file

当我试图从java代码中删除tomcat服务器conf / Catalina / localhost中存在的文件时，file.delete（）总是返回false。但是，如果我通过 file.exists() 函数检查文件，它会返回 true。我没有任何例外。请帮助我们为什么会发生这种情况。解决方案是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-03-05T05:24:54.630

无法删除文件的原因有很多；它可能不存在，它可能是一个非空目录，您可能没有关闭所有使用它的资源，并且您的程序可能没有这样做的权限，仅举几例。

不幸的是，该[`File.delete()`](https://docs.oracle.com/javase/8/docs/api/java/io/File.html#delete--)方法提供的关于原因的信息非常少；这几乎取决于您四处寻找并弄清楚。但有好消息；你不想一开始就使用`File`。

Java 7 引入了新的[`java.nio.file`](https://docs.oracle.com/javase/8/docs/api/java/nio/file/package-summary.html)包，它是一个更加健壮的文件访问 API。它提供了抽象的概念[`Path`](https://docs.oracle.com/javase/8/docs/api/java/nio/file/Path.html)并将具体操作分离到[`Files`](https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html)类中，特别是它提供了[`Files.delete()`](https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#delete-java.nio.file.Path-)记录以引发明确的异常，描述删除可能失败的原因。

使用`Path`和`Files`; 你会很高兴你做到了。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-11T10:45:47.787

> 当我试图从java代码中删除tomcat服务器conf / Catalina / localhost中存在的文件时，file.delete（）总是返回false。但是，如果我通过 file.exists() 函数检查文件，它会返回 true。

很可能您没有删除服务器上文件的**权限**。检查您的权限。

`f.delete()`返回 false 表示它不是/不能被删除并`f.exists()`返回 true 所以文件存在但不能被删除。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-07-05T13:46:30.790

您必须先关闭流，然后才能将其删除。

例如 -

```
fileInputStream.close();
file.delete(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-05-09T07:06:59.473

如果目录非空，则`File.delete()`方法将返回 false 而不会引发错误。

您必须在删除之前清理目录。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T10:47:48.997

这意味着该文件存在，但您的 java 进程没有删除该文件的权限。这就是删除函数返回 false 的原因

`Returns: true if and only if the file or directory is successfully deleted; false otherwise`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-08T16:52:13.953

在删除文件之前，您应该关闭所有文件读写连接，在 100% 文件将被删除后，例如 buffedreader.close() outputstream.close()

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-03-31T09:57:03.637

尝试使用 临时删除文件`java.nio.Files.delete`，添加 try/catch 块；执行，看看抛出了什么异常...

# javascript - 使用 Phonegap，我如何检查剩余的可用磁盘空间？

> ID：15336567
> 
> 赞同：3
> 
> 时间：2013-03-11T10:43:26.213
> 
> 标签：javascript, cordova, diskspace

我有一个 Phonegap 应用程序，它使用文件系统 API 将文件保存在设备文件系统上。

启动时，应用程序需要一些文件系统空间，`window.requestFileSystem`但运行时可以下载其他文件，我无法预测所需磁盘空间的总量。

这个想法是在下载开始之前检查可用空间，如果空间不够，则向用户发送一条消息。

Phonegap 有什么方法可以检查剩余的可用空间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-09T18:09:41.173

在找到[这篇文章](https://stackoverflow.com/a/23511474/1275214)之前，我创建了自己的函数来执行此操作，尝试获取具有确定字节的文件系统，直到达到限制并递归地假设可用空间。由于回调，可能有必要将超时设置为大于 0。在我的测试中，cordova.exec 方式和我的方式之间的差异非常小，并且可能会更好地降低限制值的准确性。

```
function availableBytes(callback, start, end){
    callback = callback == null ? function(){} : callback
    start = start == null ? 0 : start
    end = end == null ? 1 * 1024 * 1024 * 1024 * 1024 : end //starting with 1 TB
    limit = 1024 // precision of 1kb

    start_temp = start
    end_temp = end
    callback_temp = callback
    if (end - start < limit)
        callback(start)
    else{
        window.requestFileSystem(LocalFileSystem.PERSISTENT, parseInt(end_temp - ((end_temp - start_temp) / 2)), function(fileSystem){
            setTimeout(function(){
                availableBytes(callback_temp, parseInt(parseInt(end_temp - ((end_temp - start_temp) / 2))), end_temp)
            }, 0)
        }, function(){
            setTimeout(function(){
                availableBytes(callback_temp, start_temp, parseInt(end_temp - ((end_temp - start_temp) / 2)))
            }, 0)
        })
    }
} 
```

可以像这样使用：

```
availableBytes(function(free_bytes){
    alert(free_bytes)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-29T16:11:42.110

代码将调用 File 插件 (cordova.file.plugin) 的 getFreeDiskSpace 方法，并根据成功或错误回调，给你一个结果。如果达到成功回调，您将获得以千字节为单位的总可用磁盘空间。您可以通过简单的数学轻松转换为兆字节或千兆字节。

```
cordova.exec(function(result) {
    alert("Free Disk Space: " + result);
}, function(error) {
    alert("Error: " + error);
}, "File", "getFreeDiskSpace", []); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T10:58:25.857

Phonegap 不提供此功能。解决方案是自己创建一个 phonegap 插件来检查可用空间。

*   [Phonegap 插件开发指南](http://docs.phonegap.com/en/2.5.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide)
*   [安卓实现](https://stackoverflow.com/questions/4595334/android-get-free-space-on-internal-memory)
*   [iOS 实现](https://stackoverflow.com/questions/5712527/how-to-detect-total-available-free-disk-space-on-the-iphone-ipad-device)

# mysql - 选择查询以计算发生次数以及总成本

> ID：15336579
> 
> 赞同：0
> 
> 时间：2013-03-11T10:43:59.577
> 
> 标签：mysql, sql

我有一个报告页面，显示其他报告的汇总数据。我使用过 php 和 mysqli。让我深入解释一下。

我有一个商店的网络应用程序，您可以在其中添加产品详细信息。使用这些产品详细信息，您可以生成产品的包装清单报告。根据生成的包装清单报告，我需要生成另一份包含包装清单汇总数据的报告。

以下是我的表格：

**产品表：**

```
id | name | desc_id | purity | style_no | type | duty    
1  | ABC  |   1     | 18     | TEST123  |  R   | 100    
2  | XYZ  |   2     | 14     | TEST456  |  B   | 80    
3  | DEF  |   1     | 14     | TEST122  |  R   | 80    
4  | PQR  |   1     | 18     | TEST124  |  R   | 120    
5  | HJK  |   3     | 18     | TEST134  |  B   | 300 
```

**说明表：**

```
id | descrip     
1  | Gold Diamond Ring    
2  | Gold Diamond Pendant    
3  | Gold Diamond Earring 
```

**包装主表**

```
id | name     
1  | pkg_1    
2  | pkg_2 
```

**包装细节表**

```
id | pkg_id | prod_id    
1  |  1     | 1    
2  |  1     | 2    
3  |  1     | 3    
4  |  1     | 4    
5  |  1     | 5 
```

我已经使用下面的查询来生成特定 id 的包装清单报告，它可以正常工作。

`SELECT id, (SELECT descrip FROM description WHERE id = desc_id ) AS descrip,` `style_no, type , purity, duty FROM product WHERE id IN ( SELECT prod_id FROM` `packaging_list_details WHERE pkg_id =1 ) ORDER BY descrip ASC , purity ASC`

显示以下结果：

```
id | descrip            | style_no   | type   | purity | duty
1  |Gold Diamond Ring   | TEST123    |  R     | 18     | 100
4  |Gold Diamond Ring   | TEST124    |  R     | 18     | 120
3  |Gold Diamond Ring   | TEST122    |  R     | 14     | 80
2  |Gold Diamond Pendant| TEST456    |  B     | 14     | 80
5  |Gold Diamond Earring| TEST134    |  B     | 18     | 300 
```

现在我想要使用查询汇总上述结果的数据。像：

```
id | descrip            | purity | qty | duty
1  |Gold Diamond Ring   | 18     | 2   | 220
2  |Gold Diamond Ring   | 14     | 1   | 80
3  |Gold Diamond Pendant| 14     | 1   | 80
4  |Gold Diamond Earring| 18     | 1   | 300 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:08:18.870

您需要使用该`GROUP_BY`语句 - 有关更多信息，请参阅[MySql 文档](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)。

这会将查询转换为

```
SELECT d.descrip, p.purity, count(p.purity) as qty, sum(p.duty)
FROM product p
  INNER JOIN Description d ON p.desc_id = d.id
  LEFT OUTER JOIN packaging_details pg on pg.prod_id = p.id

GROUP BY d.descrip, p.purity
ORDER BY d.descrip desc, p.purity desc 
```

您也可以使用您正在使用的子选择方法，但我更喜欢使用连接。`INNER JOIN`将链接两个表，以便返回它们的所有记录。将返回语句`OUTER JOIN`中表中的所有行，并将它们与 中表中的值相匹配。`LEFT``RIGHT`

查看完整的[SQL Fiddle 示例](http://sqlfiddle.com/#!2/29b05/17)。

**注意：我不确定您从哪里获得样本中的 Id 值 - 它们只是行号吗？**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:58:55.130

我认为您应该使用 JOIN 重写您的查询：

```
SELECT
  P.id
  ,D.descrip
  ,P.style_no
  ,P.type
  ,P.purity
  ,P.duty
FROM
  packaging_list_details PLD
  JOIN
  product P ON
    (P.id = PLD.prod_id)
  LEFT JOIN
  description D on
    (D.desc_id = P.id)
WHERE
  (PLID.pkg_id = 1) 
```

这应该给你你已经拥有的相同结果。要获得总数，您可以编写一个新查询，类似于上面的：

```
SELECT
  P.id
  ,D.descrip
  ,P.type
  ,P.purity
  ,COUNT(p.id) as total_products
  ,SUM(P.duty) as total_duty
FROM
  packaging_list_details PLD
  JOIN
  product P ON
    (P.id = PLD.prod_id)
  LEFT JOIN
  description D on
    (D.desc_id = P.id)
WHERE
  (PLID.pkg_id = 1)
GROUP BY
  P.id
  ,D.descrip
  ,P.type
  ,P.purity 
```

第二个查询为您提供您正在寻找的总数。

# php - onclick 按钮以前的数据应该使用 javascript 刷新

> ID：15336584
> 
> 赞同：0
> 
> 时间：2013-03-11T10:44:20.100
> 
> 标签：php, javascript, jquery, html, jquery-ui

我在同一个 div 中有 2 个值，我也有相同的类。单击每个值会出现不同的数据。我正在获取数据，但问题是它附加了以前的数据。

例如：

```
<div id="dashboard">
<span class="icon"></span>
<span class="icon"></span>
</div> 
```

当我单击“图标”时，会出现一组单独的值，当我单击第二个“图标”时，我希望隐藏从第一个“图标”生成的值。所有这些值都是从插件生成的。

如何在同一个类和同一个 div 中使用显示/隐藏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:55:05.203

我没有从你的问题中得到太多细节。

也许你看起来像这样...... [DEMO](http://jsfiddle.net/39qyR/5/)

```
 <div id="dashboard">
<span class="icon" onclick="document.getElementById('dataArea').innerHTML='Icon1 Data';">Icon 1</span> | 
<span class="icon" onclick="document.getElementById('dataArea').innerHTML='Icon2 Data';"> Icon 2</span>
</div> <br/>
<div id="dataArea"></div> 
```

这意味着，用于附加数据使用`element.innerHTML = ""`或`$().html()`；此方法将刷新 div 内的旧数据存在，并添加新数据。但`.append()`会用旧数据添加新数据。

# java - 优化 string.endsWith() 工作的方式。

> ID：15336586
> 
> 赞同：0
> 
> 时间：2013-03-11T10:44:22.347
> 
> 标签：java, regex, string, algorithm, bytearray

我需要查找 Application Server 收到的所有 Web 请求，以检查 URL 是否具有 .css、.gif 等扩展名

提到了 tomcat 如何侦听每个请求并选择正确配置的 Servlet 来提供服务。 [字符块](http://tomcat.apache.org/tomcat-6.0-doc/api/org/apache/tomcat/util/buf/CharChunk.html) ，消息[字节](http://tomcat.apache.org/tomcat-5.5-doc/catalina/docs/api/org/apache/tomcat/util/buf/MessageBytes.html)， [映射器](http://tomcat.apache.org/tomcat-5.5-doc/catalina/docs/api/org/apache/tomcat/util/http/mapper/Mapper.html)

这是我实施的想法：

*   加载我们喜欢比较的所有扩展并获取它们的字节表示。
*   通过对字节数组中的字节求和来获得此扩展的唯一值 // 例如：“css”.getBytes()
*   将结果值添加到排序列表
*   每当我们收到请求时，获取 URL 的字节表示 // 例如：“flipkart.com/eshopping/images/theme.css”.getBytes()
*   开始对字节数组的最后一个索引中的字节求和，并在遇到“。”时中断。点字节值
*   搜索与排序列表相加的值的存在 // 在此处使用二分搜索

如果有的话，请就实施和问题提供您的反馈。

-感谢，克里希纳

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T10:46:38.660

这听起来比它需要的要复杂得多*。*

*   用于`String.lastIndeXOf`查找 URL 中的最后一个点
*   用于`String.substring`获取基于它的扩展
*   有一`HashSet<String>`组支持的扩展，或者`HashMap<String, Whatever>`如果你想将扩展映射到其他东西

当我发现这种简单的方法被证明是性能瓶颈时，我*绝对会感到震惊- 事实上，我怀疑它会比您建议的方法**更*有效，因为它不需要将整个 URL 转换为一个字节数组...（尚不清楚为什么您的方法无论如何都使用字节数组而不是从`char`值中形成散列。）

从根本上说，我更喜欢的性能方法是：

*   在架构上围绕以后难以更改的事物进行前期设计和测试
*   对于其他一切：
    *   首先确定性能标准，以便您知道何时可以停止
    *   编写最简单的代码
    *   用真实数据进行测试
    *   如果性能不够好，请使用分析器（等）来找出瓶颈所在，并对其进行优化，以确保您可以使用现有测试*证明其优势*

# git - Git合并问题两个分支

> ID：15336587
> 
> 赞同：2
> 
> 时间：2013-03-11T10:44:24.323
> 
> 标签：git, merge

我是 git 新手，在合并时遇到问题。
设想 ：

我有一个主分支。我从 dev 分支中的 master start 提交创建新的分支 dev 。两天后，我从 dev branch 创建了新的分支 devmerge 。现在一个团队开始开发 devmerge，一个团队正在开发。现在 dev 也是一些提交历史，devmerge 也是一些提交历史，但问题是当我想将 devmerge 合并到 dev 时，结果错过了 dev 的一些提交历史（丢失了一些开发数据）。我不知道发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:11:32.417

我建议在不同的阶段尝试它。

```
Master ---------------------
  \-----Dev-----------------
              \-DevMerge---- 
```

您有上述内容，分别执行每个合并：

```
git checkout dev
git merge devmerge 
```

导致：

```
Master --------------------------
  \-----Dev------------------m1--
              \-DevMerge----/ 
```

`m1`合并提交在哪里。

```
git checkout master
git merge dev 
```

导致：

```
Master ----------------------------m2------
  \-----Dev------------------m1---/
              \-DevMerge----/ 
```

我建议安装一个[工具，例如`gitg`](http://git-scm.com/downloads/guis)根据您使用的平台，以获得分支的可视化表示。

# visual-studio - MSVC 编译相同源代码的变体，然后将它们链接在一起

> ID：15336590
> 
> 赞同：0
> 
> 时间：2013-03-11T10:44:34.137
> 
> 标签：visual-studio

使用 MSVC 编译器，我可以从命令提示符处执行此操作

```
cl /c /Foout1 dispatch_example.cpp
cl /c /arch:AVX /Foout2 dispatch_example.cpp
cl instrset_detect.cpp out1.obj out2.obj 
```

如何使 Visual Studio 项目文件执行此操作？我的意思是，从命令提示符我可以做到

```
msbuild foo.vcxproj 
```

它构建了所有内容，以便我可以从命令提示符构建项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T23:35:39.410

查看您输入的[在线说明](http://msdn.microsoft.com/en-us/library/ms164311.aspx) 应该可以工作。

```
C:\Users\Mikhail\Documents\Visual Studio 2012\Projects\openMPProducerConsumer\openMPProducerConsumer>notepad fun.out

Microsoft (R) Build Engine version 4.0.30319.17929
[Microsoft .NET Framework, version 4.0.30319.18034]
Copyright (C) Microsoft Corporation. All rights reserved.

Build started 5/13/2013 6:34:08 PM.
Project "C:\Users\Mikhail\Documents\Visual Studio 2012\Projects\openMPProducerConsumer\openMPProducerConsumer\openMPProducerConsumer.vcxproj" on node 1 (default targets).
InitializeBuildStatus:
  Creating "x64\Debug\openMPProducerConsumer.unsuccessfulbuild" because "AlwaysCreate" was specified.
ClCompile:
  All outputs are up-to-date.
Link:
  All outputs are up-to-date.
  openMPProducerConsumer.vcxproj -> C:\Users\Mikhail\Documents\Visual Studio 2012\Projects\openMPProducerConsumer\openMPProducerConsumer\x64\Debug\openMPProducerConsumer.exe
FinalizeBuildStatus:
  Deleting file "x64\Debug\openMPProducerConsumer.unsuccessfulbuild".
  Touching "x64\Debug\openMPProducerConsumer.lastbuildstate".
Done Building Project "C:\Users\Mikhail\Documents\Visual Studio 2012\Projects\openMPProducerConsumer\openMPProducerConsumer\openMPProducerConsumer.vcxproj" (default targets).

Build succeeded.
    0 Warning(s)
    0 Error(s)

Time Elapsed 00:00:00.36 
```

# rest - 查询 Raven Db

> ID：15336595
> 
> 赞同：0
> 
> 时间：2013-03-11T10:44:57.617
> 
> 标签：rest, ravendb, ravendb-http

我在 localhost:8081 有一个 Raven Db 实例。我确保更改 raven 的配置文件以允许匿名访问。我创建了一个名为 AT 的数据库。在 AT 内部，我有一个名为 Admins 的集合。在管理员内部，我有两个文档。我正在尝试使用[RestClient](https://code.google.com/p/rest-client/)通过 Rest 检索一些数据。我尝试使用以下方法访问数据库：

`http://localhost:8081/docs/admins/7cb95e9a`（最后一点是我想要的文档的 ID）。

和

`http://localhost:8081/docs/at/admins/7cb95e9a`.

两者都收到404。我不确定我在这里缺少什么。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:12:11.127

URL 具有以下格式：
`http://localhost:8081/databases/{{database-name}}/docs/{{document-id}}`.

收藏是虚拟的东西。仅通过其 ID 获取文档，这里没有任何集合。文档 ID 可以是您设置的任何内容，但如果您让 RavenDB 生成它，它可能会是`admins/1`.

# c++ - OpenCL 内核只正确执行一次

> ID：15336597
> 
> 赞同：0
> 
> 时间：2013-03-11T10:45:18.000
> 
> 标签：c++, kernel, opencl, local

我写了一个内核，它只正确执行一次！我正在尝试执行此内核代码：

```
__kernel void calculate2dim(__global int *g_idata, 
__local int *sdata, __global int *g_odata) {

unsigned int tid = get_local_id(0);
unsigned int i = get_global_id(0);
sdata[tid] = g_idata[i];
barrier(CLK_LOCAL_MEM_FENCE);

for(unsigned int s = 1; s < get_local_size(0); s *= 2) {
    if(tid % (2*s) == 0) {
        sdata[tid] += sdata[tid + s];
    }
    barrier(CLK_LOCAL_MEM_FENCE);
}

if(tid == 0)
    g_odata[get_group_id(0)] = sdata[0];
} 
```

这是主机代码的片段（请记住，它是草稿，尚未完美编写代码）：

```
cl_int err;
size_t global;  // global domain size for our calculation
size_t local;   // local domain size for our calculation

int* data = new int[200];
int *res = new int[200];
int result = 0;

for(int i = 0; i < 200; i++) {
    data[i] = i % 14;
    res[i] = 0;
}

unsigned int correct;               // number of correct results returned
cl_mem input1;                       // device memory used for the input array
cl_mem output;

unsigned int count = 200;

input1 = clCreateBuffer(context,  CL_MEM_READ_ONLY, sizeof(int) * count, NULL, NULL);
output = clCreateBuffer(context, CL_MEM_WRITE_ONLY, sizeof(int) * count, NULL, NULL);

if (!input1)
{
    cerr << "Error: Failed to allocate device memory!" << endl;
    exit(1);
}

err = clEnqueueWriteBuffer(commands, input1,
                           CL_TRUE, 0, sizeof(int) * count,
                           data, 0, NULL, NULL);

if (err != CL_SUCCESS)
{
    cerr << "Error: Failed to write to source array!" << endl;
    exit(1);
}

err = 0;
err  = clSetKernelArg(kernel_av, 0, sizeof(cl_mem), &input1);
err |= clSetKernelArg(kernel_av, 1, count * sizeof(int), NULL);
err |= clSetKernelArg(kernel_av, 2, sizeof(cl_mem), &output);
if (err != CL_SUCCESS)
{
    cerr << "Error: Failed to set kernel arguments! " << err << endl;
    exit(1);
}

err = clGetKernelWorkGroupInfo(kernel_av, device_id,
                               CL_KERNEL_WORK_GROUP_SIZE,
                               sizeof(local), &local, NULL);
if (err != CL_SUCCESS)
{
    cerr << "Error: Failed to retrieve kernel work group info! "
         <<  err << endl;
    exit(1);
}

global = count;

if(local > global) {
    local = global;
}
cout << "global = " << global << " local = " << local << endl;
local = 200;

err = clEnqueueNDRangeKernel(commands, kernel_av,
                             1, NULL, &global, &local,
                             0, NULL, NULL);
if (err)
{
    cerr << "Error: Failed to execute kernel!" << endl;
    return EXIT_FAILURE;
}

// Wait for all commands to complete
clFinish(commands);

// Read back the results from the device to verify the output
//
err = clEnqueueReadBuffer(commands, output,
                           CL_TRUE, 0, sizeof(int) * count,
                           res, 0, NULL, NULL );

if (err != CL_SUCCESS)
{
    cerr << "Error: Failed to read output array! " <<  err << endl;
    exit(1);
}

cout << res[0] << endl;

int x = 0;
for(int i = 0; i < 200; i++) {
    x += data[i];
    cout << res[i] << endl;
}
cout << x << endl;

// Shutdown and cleanup
delete [] data;
delete [] res;

clReleaseMemObject(input1);
clReleaseMemObject(output); 
```

第一次执行后，我在主机代码中有正确的答案 1280，但随后（第二次执行和其他一些）我得到类似 1073743104 的东西，而不是正确的答案。也许我忘记清理一些变量或什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:09:36.590

最后我得到了它！

当你使用这个算法（Parallel Reduction Tree）时，你应该记住，线程数应该是 2 的幂！

否则（让我们取 10 个数字）它将是这样的：

步骤 0：1 2 3 4 5 6 7 8 9 10

第 1 步：**3** 2 **7** 4 **11** 6 **15** 8 **19** 10

第 2 步：**10 (3 + 7)** 2 7 4 **18 (11 + 15)** 6 15 8 **???** 10 //因为每一步的活动线程数应该是偶数！

# php - 在使用 OAuth2.0 登录/注册用户时，我可以使用什么作为密码？

> ID：15336598
> 
> 赞同：1
> 
> 时间：2013-03-11T10:45:22.343
> 
> 标签：php, javascript, oauth-2.0, facebook-oauth, google-oauth

我将 Google 和 Facebook OAuth2.0 添加到我的网站。我让它工作了，所以它用名字、姓氏和电子邮件预先填充了我的注册表（必须手动输入密码）。现在我想启用用户无需输入密码即可登录/注册。正如我所提到的，我可以从 OAuth 毫无问题地获取电子邮件地址，但我不知道使用什么作为密码，因为我的数据库中不能有一个空的密码字段（然后你可以输入没有密码的用户电子邮件，你可以登录）。

在我的数据库中，我正在检查电子邮件和密码字段（简单登录）。

那么我如何使用 OAuth 注册我的用户（在密码字段中输入什么），以便稍后我可以通过单击 OAuth 图标登录他们？

是否有任何特定于用户且不公开的密钥？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:15:14.490

我想你还没有理解 OAuth 的真正含义。

OAuth 创建和授权层并将客户端的角色与资源所有者的角色分开。客户端应用程序仅访问用户提供的授权后由资源所有者控制的那些资源。

出于安全目的，资源所有者访问受保护资源的凭据，客户端获取访问令牌——表示特定范围、生命周期和其他访问属性的字符串。

访问令牌由授权服务器在用户批准后颁发给第三方客户端。客户端使用访问令牌访问由资源所有者服务器托管的受保护资源。

根据 RFC 6749：

```
The authorization server MUST NOT issue client passwords or other
client credentials to native application or user-agent-based
application clients for the purpose of client authentication.  The
authorization server MAY issue a client password or other credentials
for a specific installation of a native application client on a
specific device. 
```

因此不需要密码

# c# - 是否可以以编程方式检查 selenium Remote Webdriver Server 是否正在运行

> ID：15336599
> 
> 赞同：3
> 
> 时间：2013-03-11T10:45:26.137
> 
> 标签：c#, selenium, remotewebdriver

嗨，是否可以使用 C# 检查远程 webdriver 服务器是否正在运行。ping 服务器没有帮助，您能告诉我们应该进行什么类型的调用以及我们可以从服务器获得什么反馈吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:05:39.413

您应该真正定义“运行”的含义。

您*可以*通过在服务器上发送 JSON 请求来获取服务器的一般状态。

您会看到服务器将实现 Wire 协议，因此这意味着它将或至少*应该*响应以下 REST url 列表：

[http://code.google.com/p/selenium/wiki/JsonWireProtocol](http://code.google.com/p/selenium/wiki/JsonWireProtocol)

具体来说：

[http://code.google.com/p/selenium/wiki/JsonWireProtocol#/status](http://code.google.com/p/selenium/wiki/JsonWireProtocol#/status)

并且可能

[http://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/sessions](http://code.google.com/p/selenium/wiki/JsonWireProtocol#GET_/sessions)

据`status`推测，将：

`The server should respond with a general "HTTP 200 OK" response if it is alive and accepting commands`

如果这就是您所说的“正在运行”，即它是活着的并且正在踢并且愿意接受命令，那么您将需要发送一个请求`/status`并检查您得到的响应。

# jquery - 带有多个图像的 Wordpress 滑块

> ID：15336601
> 
> 赞同：4
> 
> 时间：2013-03-11T10:45:28.460
> 
> 标签：jquery, wordpress, plugins, slider

我不确定我是否在寻找错误的东西，但我正在寻找一个 wordpress 插件，它创建一个图像滑块/轮播，一次显示多个图像。例如，滑块将显示两个图像。然后您可以单击下一个或上一个，它会自动与下一个/上一个图像左/右对齐。

所以东西会向左或向右滑动，显示下一个/上一个图像。

我知道我经常看到这些，但现在似乎找不到 - 只有一次只显示一张图像的滑块。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T05:31:43.633

只是想我会让每个人现在都使用我最终使用的东西。

我使用“ [http://simple-fields.com/](http://simple-fields.com/) ”插件为滑块添加一些新的自定义字段，然后为我的轮播添加“ [http://caroufredsel.dev7studios.com/](http://caroufredsel.dev7studios.com/) ”。CarouFredsel 很棒而且用途广泛。

我可能已经使用了 ink.robot 提到的 jcarousel，但我对 fred 很熟悉！

干杯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T11:11:14.020

jCarousel for wordpress 就是这样一个插件。CSS 很容易修改以显示 n 个图像，而不仅仅是一个、两个等。

在这里找到它： [http ://wordpress.org/extend/plugins/jcarousel-for-wordpress/](http://wordpress.org/extend/plugins/jcarousel-for-wordpress/)

请注意，它已经有一段时间没有为 wordpress 更新了，但应该仍然可以正常工作。

# python - 检查列表中是否不存在某个项目时，为什么此代码不起作用 - 如果列表中的项目 == False：

> ID：15336602
> 
> 赞同：4
> 
> 时间：2013-03-11T10:45:29.673
> 
> 标签：python

考虑这个列表：

```
list = [1,2,3,4,5] 
```

我想检查此列表中是否不存在数字 9。有两种方法可以做到这一点。

方法一：这个方法有效！

```
if not 9 in list: print "9 is not present in list" 
```

方法二：此方法无效。

```
if 9 in list == False: print "9 is not present in list" 
```

有人可以解释为什么方法2不起作用吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-11T10:49:57.737

这是由于[比较运算符链接](http://docs.python.org/2/reference/expressions.html#not-in)。从文档中：

> 比较可以任意链接，例如，`x < y <= z`等价于`x < y and y <= z`，除了`y`只评估一次（但在两种情况下，当发现为假`z`时根本不评估）。`x < y`

您假设`9 in list == False`表达式被执行，`(9 in list) == False`但事实并非如此。

相反，python 会评估它`(9 in list) and (list == False)`，而后一部分永远不会是 True。

您真的想使用`not in`运算符，并*避免*命名变量`list`：

```
if 9 not in lst: 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T10:49:07.050

它应该是：

`if (9 in list) == False: print "9 is not present in list"`

# youtube-api - YouTube V3 创建广播

> ID：15336604
> 
> 赞同：0
> 
> 时间：2013-03-11T10:45:34.230
> 
> 标签：youtube-api

我正在尝试使用 YouTube 的 v3 API 创建广播。我的请求如下所示：

```
curl -H "Authorization: Bearer ******************" -H "Content-type: application/json" -d "  {\"snippet\":{\"title\":\"Hello\", \"scheduledStartTime\":\"2014-01-30T00:00:00.000Z\", \"scheduledEndTime\":\"2014-01-31T00:00:00.000Z\"},\"status\":{\"privacyStatus\":\"public\"}}" https://www.googleapis.com/youtube/v3/liveBroadcasts?part=snippet,status 
```

但我从谷歌得到的回应是这样的：

```
{
 "error": {
 "errors": [
 {
   "domain": "youtube.liveBroadcast",
   "reason": "liveBroadcastForbidden",
   "message": "Request is not authorized"
 }
],
"code": 403,
"message": "Request is not authorized"
}
} 
```

我可以确认我传递的访问令牌是正确的。我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:53:12.217

直播 API 目前仅对合作伙伴开放。以后会更广泛地使用。如果您已获得授权访问权限，则应从[API Console](https://code.google.com/apis/console/)启用 YouTube API 。看起来你还没有启用它们。

# opencv - cuda内核的opencv 3通道图像数据偏移量

> ID：15336610
> 
> 赞同：0
> 
> 时间：2013-03-11T10:45:57.750
> 
> 标签：opencv, cuda, kernel, offset

我有以下代码片段：

```
// main.cu

#define thread 16

dim3 blocks( ( width + thread - 1 ) / thread, ( height + thread - 1 ) / thread );

dim3 threads( thread, thread );

kernel<<<blocks, threads>>>( dev_data, width, height );

// kernel function

__global__ void kernel( uchar *data, int width, int height ) {

// map from threadIdx/blockIdx to pixel position

int x = threadIdx.x + blockIdx.x * blockDim.x;

int y = threadIdx.y + blockIdx.y * blockDim.y;

int offset = x + y * blockDim.x * gridDim.x;

data[offset * 3 + 0] = 255;

data[offset * 3 + 1] = 0;

data[offset * 3 + 2] = 0;
} 
```

当我执行它时，只有接近一半的像素变蓝。我究竟做错了什么？我认为它与索引有关。

# entity-framework - 使用 EF Code First 更改属性的类型

> ID：15336613
> 
> 赞同：8
> 
> 时间：2013-03-11T10:46:03.310
> 
> 标签：entity-framework, ef-code-first, entity-framework-migrations

我首先使用实体​​框架代码。

此时我有以下模型：

```
public class MaterialEditNewViewModel
{
    public int RequestID { get; set; }
    [Required]
    public double? Quantity { get; set; }
    [Required]
    public MaterialWorthEnumViewModel? MaterialWorth { get; set; }
    ...
} 
```

MaterialWorthEnumViewModel 在哪里：

```
public enum MaterialWorthEnumViewModel
{
    [Display(Name = "< 1.000€")] LessThan1000,
    [Display(Name = "1.000€ < 10.000€")] Between1000And10000,
    [Display(Name = "10.000€ < 100.000€")] Between10000And100000,
    [Display(Name = "100.000€ < 1.000.000€")] Between100000And1000000,
    [Display(Name = "1.000.000€ < 10.000.000€")] Between1000000And10000000,
    [Display(Name = "10.000.000€ < 25.000.000€")] Between10000000And25000000,
    [Display(Name = "> 25.000.000€")] GreaterThan25000000
} 
```

我需要用双类型（99999.99）更改这个枚举。

我知道如果我更改类型，我的数据库将在此属性（更改之前/之后的数据）上不一致，但这是另一个问题。

我的问题是：EF Code First 迁移是否允许我更改类型并在发布时在生产服务器上传播此更改？

谢谢。

# objective-c - 更新 UITableView 单元格中的子视图

> ID：15336615
> 
> 赞同：1
> 
> 时间：2013-03-11T10:46:06.320
> 
> 标签：objective-c, xcode, ipad, uitableview

我正在使用 Storyboards 在 iPad 6.0 中开发应用程序。

让我先解释一下我的目标。我正在尝试使用 2 个 UITableViewControllers 实现主细节（SplitViewController-like）视图控制器。

第一个 UITableView("Master")，我们称之为**HeaderTableView**，顾名思义，列出了...

...第二个 UITableView("Detail")，我们称之为**EncodingTableView**，它包含一个以编程方式更改的 CustomTableViewCell（每个单元格中包含的子视图可能是 UITextField、UIButton 或 UISwitch）。

请参阅**EncodingTableView.m**

```
- (void)updateEncodingFields:(NSArray *)uiViewList
{
    // Add logic for determining the kind of UIView to display in self.tableView

    // Finally, notify that a change in data has been made (not working)
    [self.tableView reloadData];
}
    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
        {
            NSString *encodingFieldsTableId = @"encodingFieldsTableId";

            CustomTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:encodingFieldsTableId];

            if (cell == nil) {
                cell = [[CustomTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:encodingFieldsTableId];
            }
            // Change text in textView property of CustomTableViewCell
            cell.encodingFieldTitle.text = uiViewList.title;
            // added methods for determining what are to be added to [cell.contentView addSubView:]
            // data used here is from the array in updateEncodingFields:

        } 
```

我的**HeaderTableView.m**，包含 didSelectRowAtIndexPath 以更新**EncodingTableView**

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
            if (![selectedIndexPath isEqual:indexPath]) {
                selectedIndexPath = indexPath;
                [self updateDataFieldTableViewForIndexPath:indexPath];
            }
        }

    - (void)updateDataFieldTableViewForIndexPath:(NSIndexPath *)indexPath {
        [self.encodingTableView updateEncodingFields:self.uiViewList];
    } 
```

**问题- 数据一切正常，但****EncodingTableView** 为什么不“重绘”字段？我怀疑重复使用细胞与此有关，但我不知道为什么。

结果截图：

**HeaderTableView 中的初始选择** ![初始选择](../Images/ada4a0657260c50be7f48af3290684a2.png)

**HeaderTableView 中的第二个选择** ![第二次选择](../Images/c1e8231dce7f6f62ed8306dc59be5818.png)

我试过的：

*   我不断看到诸如 [UITableView setNeedsDisplay]、[UITableView reloadData] 和 [UITableView setNeedsLayout] 之类的建议，但它们都不起作用。
*   删除 tableViewCells 的重用工作正常，但这会导致我的部分 CustomTableView.encodingFieldTitle 消失。更不用说如果我放弃重用单元，这可能会导致性能问题。

**限制**：我知道使用 SplitViewController 是一个好主意，但这只是我的应用程序的一个子部分（因此不是 RootViewController）。

最后，感谢您阅读这么长的帖子。;)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T11:46:22.440

看起来你很可能在里面添加子视图`tableView:cellForRowAtIndexPath:`。

问题是，如果您使用单元重用，则并不总是从内部的空白开始，`tableView:cellForRowAtIndexPath:`而是可能会为您提供一个已经配置过一次的单元。这就是您所看到的，一个之前添加了标签的单元格被交还给您，然后您在顶部添加更多标签。

有几种方法可以解决这个问题：

1.  `UITableViewCell`（我的首选选项）使用这些额外的子视图作为属性创建一个子视图。

2.  确保单元设置只完成一次 这样做
    的好地方是当您实际创建一个不存在的单元时，例如在`if (cell)`支票内

    ```
    if (cell == nil) {
      cell = [[CustomTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:encodingFieldsTableId];

      // add subview's here and give them some way to be referenced later
      // one way of doing it is with the tag property (YUK)
      UILabel *subView = [[UILabel alloc] initWithframe:someFrame];
      subView.tag = 1;
      [cell.contentView addSubview:subView];
    }

    UILabel *label = (id)[cell.contentView viewWithTag:1];
    label.text = @"some value"; 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T11:02:52.637

我在您的代码中看到的一个问题是 tableView cellForRowAtIndxPath 函数中使用的单元格标识符不同。

出队时，您正在使用此标识符 - >“encodingFieldsTableId”

&

在创建单元格时，您正在使用此标识符 - >“dataFieldUiGroupTableId”。

理想情况下，这两个标识符应该相同！！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-03T12:18:58.080

尝试添加，

```
cell.encodingFieldTitle.text = nil; 
```

前`if(cell == nil)`

因此，每当`cellForRowAtIndexPath`调用您的方法时，您要重用的单元格中已经存在的字符串将被删除，并且`uiViewList.title`将显示其中的新文本。

# delphi - Delphi中一个和多个“类型”块的区别

> ID：15336620
> 
> 赞同：6
> 
> 时间：2013-03-11T10:46:29.817
> 
> 标签：delphi, syntax, compilation, delphi-2007

我已经为 Delphi 编程五六年了，我认为自己相当擅长它，但我最近偶然发现了一种我无法真正解释的行为。我在写一个简单的链表，我们称它为 TIntegerList。下面的示例代码可以正确编译：

```
type
  PIntegerValue = ^TIntegerValue;

  TIntegerValue = record
    Value: Integer;
    Next: PIntegerValue;
    Prev: PIntegerValue;
  end; 
```

但是，下面的代码没有（说 TIntegerValue 未声明）：

```
type
  PIntegerValue = ^TIntegerValue;

type  
  TIntegerValue = record
    Value: Integer;
    Next: PIntegerValue;
    Prev: PIntegerValue;
  end; 
```

Delphi 中究竟是如何处理“type”关键字的？与每种类型有一个“类型”相比，在一个“类型”关键字下声明多个类型的语法含义是什么？好吧，这很令人困惑，但我希望代码示例有助于解释我的意思。我在德尔福 2007 年工作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T10:49:39.480

`type`当代码已经是现有类型声明部分的一部分时，逻辑上不需要使用关键字。所以，

```
type
  TRec1 = record
  end;

  TRec2 = record
  end; 
```

产生无法区分的类型

```
type
  TRec1 = record
  end;

type
  TRec2 = record
  end; 
```

但是，正如您所发现的，编译器有一个限制，即要求在引入前向声明的部分结束之前完全解析所有前向声明。

没有什么特别的理由必须这样。编译器完全有可能放宽这个限制。只能假设可能源自很久以前的编译器实现细节已泄漏到语言规范中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T14:48:21.963

这个纯粹的标准帕斯卡。由于 Pascal 编译器通常是一次性的并且没有类型的前向声明，因此 N. Wirth 在原始 Pascal 中定义了此功能，以允许将此类“递归”类型用于例如链表等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T10:54:42.657

我已经发表了评论，但需要同行评审。这个比较有效。因此，这是另一个答案。这可以合并或任何你想要的。

在“算法 + 数据结构 = 程序”中，Wirth 在“程序 4.1 直列表插入”中给出了一个示例

```
type
  ref  = ^word;
  word = record
           key: integer;
           count: integer;
           next: ref
         end; 
```

# c# - 实体框架 - 存储密码

> ID：15336621
> 
> 赞同：2
> 
> 时间：2013-03-11T10:46:30.220
> 
> 标签：c#, wpf, mvvm, passwords

我正在学习 WPF、MVVM 和实体框架，并且只是制作一个测试项目（用于学习目的）。目前，用户可以继续使用该应用程序并“注册”。我目前已经能够从数据库中存储和检索数据，这很酷。对我来说，下一步是为用户提供密码，可以加密和解密的东西。我遇到的问题是尝试使用 PasswordBox，我一生都无法弄清楚。

我已经阅读了一些关于 PasswordHelper 类等的文章，但是没有任何可以循序渐进的内容。据我所知，这不能在 MVVM 之后完成，所以没关系，我只是发现很难打破 MVVM。

如果有人能帮助我朝着正确的方向前进，那就太好了。

# highstock - 导航范围内的高库存总量

> ID：15336625
> 
> 赞同：0
> 
> 时间：2013-03-11T10:46:39.483
> 
> 标签：highstock

有没有办法显示图表上显示的数据总数（并尊重导航器“缩放”设置）？

我正在绘制用电量图表，因此每个范围的总使用量（假设有 20 分钟左右的峰值使用量，我将导航器设置为该范围）将是一件好事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:34:19.440

您可以捕获 afterSetExtremes 事件并从范围计算点。

[http://jsfiddle.net/TdFjy/](http://jsfiddle.net/TdFjy/)

```
xAxis: {
            events: {
                afterSetExtremes: function () {
                    var counter = 0,
                        min = this.min,
                        max = this.max;

                    $.each(chart.series[0].options.data, function (i, point) {
                        if (point[0] >= min && point[0] <= max) counter++;
                    });

                    $('#report').html(counter);

                }
            }
        }, 
```

# android - 如何从帧缓冲区（/dev/graphics/fb0）获取视频内容？

> ID：15336626
> 
> 赞同：1
> 
> 时间：2013-03-11T10:46:41.830
> 
> 标签：android, framebuffer, android-ndk-r5

我正在从本机代码访问 ( `framebuffer`)`fb0`文件，并成功地能够使用`fb0`. 但是如果我播放视频或打开相机，它会给我黑屏。

那时，如果我旋转屏幕，它会给出一些视频图像，然后再次黑屏。

有人可以帮助了解如何访问视频数据，`framebuffer`或者还想知道它在屏幕旋转时显示图像的原因吗？

# objective-c - 我的自定义类没有调用 xmppstream 委托方法

> ID：15336627
> 
> 赞同：7
> 
> 时间：2013-03-11T10:46:41.883
> 
> 标签：objective-c, ios5, xmppframework

我最近开始使用 xmppframework，但我遇到了一个问题。我能够连接到我本地网络上的服务器，但是我的自定义类上没有调用 xmppstreamdelegate 方法，但在 appdelegate 类上工作得非常好。任何人都可以请帮我解决这个问题。是否仅在 appdelegate 类上支持委托？

标题：

```
@interface XmppClass : NSObject<XMPPStreamDelegate>{
    XMPPStream *xmppStream;
    Login * loginDetail;
    BOOL allowSelfSignedCertificates;
    BOOL allowSSLHostNameMismatch;
}
@property (nonatomic, strong, readonly) XMPPStream *xmppStream;

@property (nonatomic, strong) Login *loginDetail;
- (id)initWithLogin:(Login *) loginrefernce;
- (BOOL)connect;
- (void)disconnect;
- (void)setupStream;
@end 
```

执行：

```
@implementation XmppClass

@synthesize xmppStream;
@synthesize loginDetail;
- (id)initWithLogin:(Login *) loginrefernce
{
    self = [super init];
    if (self) {
        self.loginDetail=loginrefernce;
        [DDLog addLogger:[DDTTYLogger sharedInstance]];
        [self setupStream];
        [self connect];
    }
    return self;
}
- (void)setupStream
{
NSAssert(xmppStream == nil, @"Method setupStream invoked multiple times");
// Setup xmpp stream
// 
// The XMPPStream is the base class for all activity.
// Everything else plugs into the xmppStream, such as modules/extensions and delegates.

xmppStream = [[XMPPStream alloc] init];
#if !TARGET_IPHONE_SIMULATOR
{
// Want xmpp to run in the background?
// 
// P.S. - The simulator doesn't support backgrounding yet.
//        When you try to set the associated property on the simulator, it simply fails.
//        And when you background an app on the simulator,
//        it just queues network traffic til the app is foregrounded again.
//        We are patiently waiting for a fix from Apple.
//        If you do enableBackgroundingOnSocket on the simulator,
//        you will simply see an error message from the xmpp stack when it fails to set the property.
xmppStream.enableBackgroundingOnSocket = YES;
}
#endif

NSLog(@"setup stream");
[xmppStream addDelegate:self delegateQueue:dispatch_get_main_queue()];

[xmppStream setHostName:@"10.68.202.123"];
//[xmppStream setHostPort:8070];

allowSelfSignedCertificates = NO;
allowSSLHostNameMismatch = NO;

// You may need to alter these settings depending on the server you're connecting to

}

- (BOOL)connect
{
    NSLog(@"connect");
    if (![xmppStream isDisconnected]) {
        return YES;
    }

//
// If you don't want to use the Settings view to set the JID, 
// uncomment the section below to hard code a JID and password.
// 
// myJID = @"user@gmail.com/xmppframework";
// myPassword = @"";
if (self.loginDetail.emailId == nil || self.loginDetail.password == nil) {
    return NO;
}

[xmppStream setMyJID:[XMPPJID jidWithString:[self.loginDetail.emailId      stringByAppendingString:@"/pc"]]];

NSError *error = nil;
if (![xmppStream connect:&error])
{

    NSLog(@"Error connecting: %@", error);

    return NO;
}

return YES;
}

- (void)disconnect
{
    [xmppStream disconnect];
}
- (void)xmppStream:(XMPPStream *)sender socketDidConnect:(GCDAsyncSocket *)socket 
{
    DDLogVerbose(@"%@: %@", THIS_FILE, THIS_METHOD);
}

- (void)xmppStream:(XMPPStream *)sender willSecureWithSettings:(NSMutableDictionary *)settings
{
    DDLogVerbose(@"%@: %@", THIS_FILE, THIS_METHOD);
    NSLog(@"some security thing");
    if (allowSelfSignedCertificates)
    {
        [settings setObject:[NSNumber numberWithBool:YES] forKey:(NSString  *)kCFStreamSSLAllowsAnyRoot];
    }
    if (allowSSLHostNameMismatch)
    {
        [settings setObject:[NSNull null] forKey:(NSString *)kCFStreamSSLPeerName];
    }
    else
   {
        // Google does things incorrectly (does not conform to RFC).
        // Because so many people ask questions about this (assume xmpp framework is broken),
        // I've explicitly added code that shows how other xmpp clients "do the right thing"
        // when connecting to a google server (gmail, or google apps for domains).
        NSString *expectedCertName = nil;
        NSString *serverDomain = xmppStream.hostName;
        NSString *virtualDomain = [xmppStream.myJID domain];
        if ([serverDomain isEqualToString:@"talk.google.com"])
        {
             if ([virtualDomain isEqualToString:@"gmail.com"])
             {
                  expectedCertName = virtualDomain;
             }
             else
             {
                  expectedCertName = serverDomain;
             }
        }
        else if (serverDomain == nil)
        {
             expectedCertName = virtualDomain;
        }
        else
        {
             expectedCertName = serverDomain;
        }
        if (expectedCertName)
        {
             [settings setObject:expectedCertName forKey:(NSString *)kCFStreamSSLPeerName];
        }
} 
```

}

```
- (void)xmppStreamDidSecure:(XMPPStream *)sender
{
    DDLogVerbose(@"%@: %@", THIS_FILE, THIS_METHOD);
}

- (void)xmppStreamDidConnect:(XMPPStream *)sender
{
    DDLogVerbose(@"%@: %@", THIS_FILE, THIS_METHOD);
    NSLog(@"connected");
    NSError *error = nil;
    if (![[self xmppStream] authenticateWithPassword:self.loginDetail.password error:&error])
    {
            DDLogError(@"Error authenticating: %@", error);
    }
}

- (void)xmppStreamDidAuthenticate:(XMPPStream *)sender
{
    DDLogVerbose(@"%@: %@", THIS_FILE, THIS_METHOD);
    NSLog(@"authenticated");

}

- (void)xmppStream:(XMPPStream *)sender didNotAuthenticate:(NSXMLElement *)error
{
    DDLogVerbose(@"%@: %@", THIS_FILE, THIS_METHOD);
    NSLog(@"did not authenticate");
}

- (BOOL)xmppStream:(XMPPStream *)sender didReceiveIQ:(XMPPIQ *)iq
{
    DDLogVerbose(@"%@: %@", THIS_FILE, THIS_METHOD);
    return NO;
}

- (void)xmppStream:(XMPPStream *)sender didReceiveMessage:(XMPPMessage *)message
{
    DDLogVerbose(@"%@: %@", THIS_FILE, THIS_METHOD);

    // A simple example of inbound message handling.

}

- (void)xmppStream:(XMPPStream *)sender didReceivePresence:(XMPPPresence *)presence
{
    DDLogVerbose(@"%@: %@ - %@", THIS_FILE, THIS_METHOD, [presence fromStr]);
}

- (void)xmppStream:(XMPPStream *)sender didReceiveError:(id)error
{
    DDLogVerbose(@"%@: %@", THIS_FILE, THIS_METHOD);
}

- (void)xmppStreamDidDisconnect:(XMPPStream *)sender withError:(NSError *)error
{
    DDLogVerbose(@"%@: %@", THIS_FILE, THIS_METHOD);
    NSLog(@"%@",error);
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-31T04:07:24.293

最有可能的问题是您的类实例，即您的 XMPPStream 的委托，在调用委托方法之前已释放。通过使此类成为其他类的属性或实例变量或使用 dispatch_once 使其更加持久。例如，

改变

```
YourClass *instance = [[YourClass alloc] init];
instance.xmppStream = .... 
```

经过

```
@property(nonatomic, strong) YourClass *instance;
self.instance = [[YourClass alloc] init];
self.instance.xmppStream = .... 
```

这里 YourClass 包含 XMPPStream 并且是它的委托。

我写了一篇关于这个问题的大博文。这是很常见的情况。 [http://blog.alwawee.com/2013/07/31/on-xmppframework-delegate-method-not-being-call/](http://blog.alwawee.com/2013/07/31/on-xmppframework-delegate-method-not-being-called/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-05T01:36:56.387

你可以使用多播，像这样

```
[[self appDelegate].xmppStream addDelegate:self delegateQueue:dispatch_get_main_queue()]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-13T07:25:57.660

我有同样的问题......这对我有帮助。希望它对您有用，只需在您的代码中进行以下更改。

```
Static XmppClass *selfRef = nil;
@implementation XmppClass
@synthesize xmppStream;
- (void)setupStream
{
// Setup xmpp stream
selfRef = [[XmppClass alloc] init];
xmppStream = [[XMPPStream alloc] init];
[xmppStream addDelegate:selfRef delegateQueue:dispatch_get_main_queue()]; 
```

# .net - 如何从 EntityFramework 数据模型自动创建 CRUD WCF 服务？

> ID：15336631
> 
> 赞同：1
> 
> 时间：2013-03-11T10:46:51.750
> 
> 标签：.net, wcf, entity-framework, windows-8, crud

我已经使用 EntityFramework 5 创建了一个数据模型，并希望将其用作 WCF 数据服务。是否有任何框架可以从 DataModel 中自动生成此服务？

基本上我想通过自己不生成每个服务方法来节省时间。它应该支持 REST 和/或 SOAP，并且应该生成所有可能的 CRUD 操作。这个提议有什么好的框架或工具吗？

作为附加说明：该服务稍后应由 Microsoft azure 托管。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:53:27.300

您可以使用[WCF 数据服务](http://msdn.microsoft.com/en-us/data/odata.aspx)。它采用实体框架模型并创建使用 OData 协议来查询和修改数据的服务。基本上，它公开了一个 EDMX（仅由概念模型部分组成），任何客户端都可以使用它来创建简单的 REST 查询。

还有一个简单的权限模型，用于确定服务可以访问哪些数据以及它是否具有写访问权限。

# hibernate - 如何让 Hibernate 更新数据库统计信息？

> ID：15336632
> 
> 赞同：1
> 
> 时间：2013-03-11T10:46:54.450
> 
> 标签：hibernate, h2, table-statistics

我将很多行放入以前几乎为空的数据库表中，然后我根据该表中的数据创建报告。尽管该表已编入索引，但查询花费的时间太长了，我猜这是因为 Hibernate 每次都对查询进行全表扫描，而不是使用索引，因为它认为数据库表只包含几行。

如何使表的 Hibernate 更新数据库统计信息，以便它可以构建合适的查询计划？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T05:41:40.253

Hibernate 可以运行[原生 SQL 语句](http://dev-answers.blogspot.ch/2012/04/running-native-sql-deletes-or-updates.html)，这样你也可以运行[`analyze`](http://h2database.com/html/grammar.html#analyze)：

```
Query analyze = session.createSQLQuery("analyze");
analyze.executeUpdate(); 
```

另请参阅有关[本机 SQL 语句执行](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html)的官方文档。

# python - 接受单一的贝宝付款

> ID：15336636
> 
> 赞同：2
> 
> 时间：2013-03-11T10:47:02.607
> 
> 标签：python, paypal

我的网站是用 Python 编码的，我想提供通过贝宝在我的网站上接受付款的能力。我想使用免费的贝宝服务（无月费）来执行此操作，用户被重定向到贝宝网站进行登录和支付。我希望工作流程像这样工作：

*   用户点击支付宝支付
*   用户点击“paypal 支付”按钮
*   用户被重定向到贝宝网站登录
*   付款成功后，用户重定向回我的网站并看到确认页面。

除了有关将贝宝重定向回我的网站的部分之外，我了解所有内容。我如何对其进行编码，以便我可以判断贝宝是否已成功并仅在成功付款时处理确认页面？

注意

*   我不会使用定期付款
*   如果可能的话，我宁愿不要为此使用一个庞大而笨重的库，因为这似乎是一项小任务

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T14:35:01.520

您可以使用 PayPal 的 PDT 来检查交易是否有效。支付数据传输 (PDT) 是一种检索 PayPal 交易详细信息的安全方法，以便您可以将它们显示给您的客户。它与网站支付标准结合使用，以便客户在 PayPal 网站上付款后返回您的网站后，他们可以立即查看包含交易详细信息的确认消息。PDT 不适用于信用卡或 Express Checkout 交易。本页介绍了 PDT 的工作原理以及如何配置您的帐户以使用 PDT。

PDT 的工作原理 当客户向您付款时，PayPal 通过将交易 ID 附加到您在帐户资料中指定的 URL 来向您发送付款的交易 ID。此信息通过 HTTP GET 作为此名称/值对发送：

```
tx=transactionID 
```

获得交易 ID 后，您将包含交易 ID 和您的身份令牌的 FORM 发送到 PayPal，这是一个字符串值，用于向 PayPal 标识您的帐户。下面有说明如何获取您的身份令牌的说明。表格如下所示：

```
<form method=post action="https://www.paypal.com/cgi-bin/webscr"> 
<input type="hidden" name="cmd" value="_notify-synch"> 
<input type="hidden" name="tx" value="TransactionID"> 
<input type="hidden" name="at" value="YourIdentityToken"> 
<input type="submit" value="PDT"> 
</form> 
```

在 PayPal 对您的帖子的回复中，第一行将是 SUCCESS 或 FAIL。

激活 PDT 要使用 PDT，您必须在您的 PayPal 帐户资料中激活 PDT 和自动退货。您还必须获取一个 PDT 身份令牌，该令牌用于您发送给 PayPal 的所有 PDT 通信。

请按照以下步骤为 PDT 配置您的帐户：

1.登录您的贝宝账户。2.单击配置文件子选项卡。3.点击卖家偏好栏中的网站支付偏好。4.在网站付款的自动返回下，单击打开单选按钮。5\. 对于退货 URL，输入您网站上的 URL，该 URL 将在客户付款后接收 PayPal 发布的交易 ID。6.在支付数据传输下，单击开单选按钮。7.单击保存。8.点击卖家偏好列中的网站支付偏好。9.向下滚动到页面的支付数据传输部分以查看您的 PDT 身份令牌。

以下链接也将对您有所帮助：

[可以返回的 PDT 变量](https://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNandPDTVariables)

[PDT的描述](https://www.x.com/developers/paypal/documentation-tools/paypal-payments-standard/integration-guide/paymentdatatransfer)

[示例代码](https://www.x.com/developers/PayPal/documentation-tools/code-sample/216627)

[PDT 故障排除提示](https://www.x.com/content/pdt-troubleshooting-steps)

# c++ - 线程安全的传递运算符

> ID：15336640
> 
> 赞同：4
> 
> 时间：2013-03-11T10:47:15.743
> 
> 标签：c++, multithreading, thread-safety, mutex, new-operator

我正在为我们的*堆内存管理器*`new()`覆盖和操作符。有一个*互斥体*并且是线程安全的，但我没有将互斥体添加到，它用作*传递运算符*，因为我怀疑它在调用时会在堆栈上。将在堆栈上并且不需要自己的互斥锁是否正确？`new[]()`*`new()`*`new[]()`*`new[]()`***

 ***```
/*!
\brief Override the Standard C++ new [] operator
\param size [in] Number of bytes to allocate
\exception std::bad_alloc
\returns Pointer to the start of the allcoated memory block of \c size bytes
\todo Check if this is thread-safe or if it needs a mutex lock, return address probably is on the stack so it should be ok
*/
void *operator new[] (size_t size)
{
    return operator new(size);
}

/*!
\brief Overrides the Standard C++ new operator
\param size [in] Number of bytes to allocate
\exception std::bad_alloc
\returns Pointer to the start of the allcoated memory block of \c size bytes
*/
void *operator new(size_t size) 
{
    MM_ENTER_CRITICAL_SECTION(CMemoryManager::mutex)
    // Memory manager code removed since it's outside of the question context
    MM_LEAVE_CRITICAL_SECTION(CMemoryManager::mutex)
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:03:36.037

> new 将在堆栈上并且不需要自己的互斥锁是否正确？

运算符的`new[]()`工作方式与分配单个对象类似`new()`，但它分配一个对象数组。我不知道这与堆栈有什么关系，分配的对象是在堆上分配的，并且指向该内存的指针会返回给您。

堆栈上唯一的东西是指针本身，但对于`new`.

看到那个`new[]()`调用`new()`然后**我看不出**你需要一个互斥锁的原因，`new[]()`因为`new()`它已经受到互斥锁的保护。`new[]()`如果另一个线程已经在里面，任何调用的线程都必须等待`new()`。***

# string - Htaccess 重写单个查询字符串

> ID：15336643
> 
> 赞同：2
> 
> 时间：2013-03-11T10:47:32.057
> 
> 标签：string, .htaccess, mod-rewrite

我遇到了一个相当老的siye的问题。我有一些带有查询字符串的通用 URL，我想进行 301 重定向，但我不想笼统地重定向 URL。我想选择每个查询字符串的重定向位置，因为站点中有很多不同的类别。例如：

我想改变：

```
index.php?_a=viewCat&catId=199 
```

至：

```
/garden-furniture/patio-furniture/garden-benches-garden-seats/cat_199.html 
```

但是我不想将另一个 catid 更改为我选择的另一个 URL，完全不同的结构。我遇到的问题是我拥有的代码，如果我没有 ? 在目标网址的末尾，它可以工作，但是将查询字符串附加到末尾，如果我把它放在末尾，它根本不会重定向。

我正在使用的代码：

```
RewriteCond %{QUERY_STRING} ^_a=viewCat&catId=199 
RewriteRule ^index\.php$  /garden-furniture/patio-furniture/garden-benches-garden-seats/cat_199.html? [L,R=301] 
```

任何帮助，将不胜感激！

编辑：我的 htaccess 的其余部分

```
RewriteEngine On
RewriteRule ^conservatory/(.*)$ /conservatory-furniture/$1 [R=301,L]
RewriteRule ^dining-room/(.*)$ /dining-room-furniture/$1 [R=301,L]
RewriteRule ^garden/(.*)$ /garden-furniture/patio-furniture/$1 [R=301,L]

RewriteBase /
RewriteCond %{QUERY_STRING} (.*)$
 RewriteRule cat_([0-9]+)(\.[a-z]{3,4})?(.*)$   index.php?_a=viewCat&catId=$1&%1 [NC]

RewriteCond %{QUERY_STRING} (.*)$
RewriteRule prod_([0-9]+)(\.[a-z]{3,4})?$   index.php?_a=viewProd&productId=$1&%1 [NC]

RewriteCond %{QUERY_STRING} (.*)$
RewriteRule info_([0-9]+)(\.[a-z]{3,4})?$   index.php?_a=viewDoc&docId=$1&%1 [NC]

RewriteCond %{QUERY_STRING} (.*)$
RewriteRule tell_([0-9]+)(\.[a-z]{3,4})?$   index.php?_a=tellafriend&productId=$1&%1 [NC]

RewriteCond %{QUERY_STRING} (.*)$
RewriteRule _saleItems(\.[a-z]+)?(\?.*)?$   index.php?_a=viewCat&catId=saleItems&%1 [NC,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:35:33.963

如果这些是完整的 URL，您可以将模式锚定在字符串的开头

```
RewriteRule ^cat_([0-9]+)(\.[a-z]{3,4})?(.*)$   index.php?_a=viewCat&catId=$1&%1 [NC] 
```

这将防止`cat_`内部被重写为的 URL`index.php?...`.

而且由于您不使用尾随*可选*部分，因此您也可以消除它

```
RewriteRule ^cat_([0-9]+) index.php?_a=viewCat&catId=$1&%1 [NC] 
```

另一点是`RewriteCond`with 查询字符串。如果查询字符串是可选的，您可以删除并将s`RewriteCond`修改为`RewriteRule`

```
RewriteRule ^cat_([0-9]+) index.php?_a=viewCat&catId=$1 [QSA,NC] 
```

所以，所有这些都会变成

```
RewriteRule ^cat_([0-9]+) index.php?_a=viewCat&catId=$1 [QSA,NC]
RewriteRule ^prod_([0-9]+) index.php?_a=viewProd&productId=$1 [QSA,NC]
RewriteRule ^info_([0-9]+) index.php?_a=viewDoc&docId=$1 [QSA,NC]
RewriteRule ^tell_([0-9]+) index.php?_a=tellafriend&productId=$1 [QSA,NC]
RewriteRule ^_saleItems index.php?_a=viewCat&catId=saleItems [QSA,NC,L] 
```

# php - 由于错误的 url 路径，样式未在 magento 中加载，如何解决？

> ID：15336647
> 
> 赞同：10
> 
> 时间：2013-03-11T10:47:51.010
> 
> 标签：php, magento

我已经在我的本地系统上安装了 magento，除了样式没有加载之外，一切正常。

我观察到问题是由于发送请求时样式表 url 不正确（在 firebug 中使用 net 发现的）..

请求网址：

```
http://se.com/var/www/se.com/skin/frontend/default/jm_wall/css/layout.css 
```

请求网址应为：

```
http://se.com/skin/frontend/default/jm_wall/css/layout.css 
```

我该如何解决这个问题？

* * *

附加信息：

*   我已经从 ubuntu 10.04 迁移了 ubuntu 12.04（全新安装）（它在 10.04 上运行良好）
*   我已经配置了 apache 虚拟主机
*   我在数据库的表中设置了`web/unsecure/base_url`&`web/secure/base_url``http://se.com/``core_config_data`
*   我拥有对 var、skin 和 media 文件夹的完全权限
*   Magento 缓存被禁用和清理（为了安全）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-11T18:17:28.040

朋友我已经解决了这个问题。。

我重做了之前做过的所有步骤，比如从 svn 获取所有文件，重新导入数据库，更改 web/unsecure/base_url 和 web/secure/base_url，配置 apache 虚拟主机等。

但我认为解决问题的方法是将媒体和 var 目录的所有权更改为 www-data 而不是 kaushik，并赋予这些文件夹完全权限。

我已经完成了这一步，因为在主服务器中，这些目录归 www-data 用户所有。

此外，我观察到 css 是从 se.com/media/css 文件夹加载的，该文件夹是在正确设置媒体目录后自动创建的，这在之前没有发生，该目录有 css 文件，如 0a039da6028e6d636132ecd5e235f417.css 等。

请求网址是这样的（来自firebug中的网络窗口）......

```
http://se.com/media/css/0a039da6028e6d636132ecd5e235f417.css 
```

不像我上面提到的那样（`http://se.com/skin/frontend/default/jm_wall/css/layout.css`），也不像请求是如何发送的（`http://se.com/var/www/se.com/skin/frontend/default/jm_wall/css/layout.css`）

希望这对其他人有帮助...

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-03-10T07:47:59.440

需要转到 sql manager 并执行以下操作：

```
SELECT * FROM `core_config_data` WHERE `path` LIKE '%merge%' 
```

然后将值从 1 更改为 0 清除缓存，一切都会好的

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-07-15T17:06:57.110

当我使用脚本清除缓存和重新索引时，我遇到了类似的问题。

我的朋友 @brucekaushik 给出了完美的答案。我想给他投票，但不能。

只需执行以下操作..

> 1.  将目录更改为 Magento Root
> 2.  运行以下命令：
> 
> > sudo chown -R www-data:www-data media/var/

* * *

谢了，兄弟 ！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-18T07:26:14.420

css 来自以下 url 的原因是 css 合并选项在管理面板中设置为“YES”.. [http://se.com/media/css/0a039da6028e6d636132ecd5e235f417.css](http://se.com/media/css/0a039da6028e6d636132ecd5e235f417.css)

如果你想得到这个（[http://se.com/skin/frontend/default/jm_wall/css/layout.css](http://se.com/skin/frontend/default/jm_wall/css/layout.css)）请将css合并选项设置为“NO”并清除缓存并再次检查......

我认为这会有所帮助....

# python - 在 ChoiceField 中显示列表的最后一项

> ID：15336649
> 
> 赞同：0
> 
> 时间：2013-03-11T10:47:55.263
> 
> 标签：python, key-value, choicefield

此代码仅显示字典列表的最后一项：

```
def chooseOneServer():
    dara = websvc()
    i=0
    for item in dara:
        for key,value in item.items() :
            if key == '1' :
                servers = ( ('i',value), ) 
                i +=1  
    return servers 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:50:02.850

我已经在你上一个问题的评论中回答了这个问题，但又是这样：

```
def chooseOneServer():
    dara = websvc()
    i=0
    servers = []
    for item in dara:
        for key,value in item.items() :
            if key == '1':
                servers.append(('i',value))
                i += 1
    return servers 
```

您只需将每个项目添加到列表中，而不是每次都覆盖相同的元组。

# asp.net - 允许用户创建 PDF 文档

> ID：15336650
> 
> 赞同：1
> 
> 时间：2013-03-11T10:47:59.950
> 
> 标签：asp.net, pdf-generation

我是 PDF 生成的新手，但有一个项目要做。在我的项目中，用户应该能够创建 PDF 文档。我搜索了很多关于使用`itextsharp`. 但他们已经展示了创建简单 PDF 文档的示例，即 hello world。
我想要的是空白编辑器（为此正在使用`ckeditor`）并且用户将数据写入该空白编辑器，并且当用户单击保存按钮文件时应该以 PDf 格式保存。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:57:51.137

这可以帮助您，因为 PDFSharp 为 PDF [PDF 示例提供了更多功能](http://www.pdfsharp.net/wiki/PDFsharpSamples.ashx#WebSamples_1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:10:31.017

如果您想保留输入到 CKEditor 中的所有格式，这可能会变得很棘手。

根据我的经验，两个最好的 PDF 生成库是[iTextSharp](http://itextpdf.com/)和[syncfusion](http://www.syncfusion.com/products/aspnet/pdf#features-overview_heading)。在这两者中，我觉得同步融合可以更容易使用。

基本上，您要做的是解析 HTML 并生成类似的 PDF 结构。iText 和 syncfusion 都可以直接从 HTML 转换为 PDF，但是如果您的 html 有一个奇怪的布局，您可能必须手动形成 PDF（使用 PdpPTables、段落对象等）。

# javascript - Javascript IoC / DI 框架

> ID：15336655
> 
> 赞同：11
> 
> 时间：2013-03-11T10:48:22.620
> 
> 标签：javascript, dependency-injection, ioc-container

对于像 Java 这样的强类型静态语言，IoC / DI 框架 / 工具包对于解耦复杂系统非常宝贵，从而使子组件可单元测试并且它们的组合流畅。

我们中的大多数人认为 Javascript 作为松散类型的动态语言已经在精神上提供了 IoC / DI 的主要好处，而有些人坚持认为应该有更高级别的抽象/实现。

对于后者，Javascript 领域中常见的 IoC / DI 实现是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T21:25:26.463

请查看[wire.js](https://github.com/cujojs/wire)。这是我的选择，而且效果很好。

主要特点是：

> *   简单的声明式依赖注入
> *   灵活的非侵入式连接基础设施
> *   应用生命周期管理
> *   强大的核心工具和插件架构，用于集成流行的框架和现有代码。
> *   支持浏览器和服务器环境

另请检查[DI 的一些替代 npm 模块](https://npmjs.org/browse/keyword/dependency%20injection)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T21:38:22.890

Javascript 的 Duck-Typing 允许我们轻松地模拟依赖项。

这是一个快速示例，说明如何执行此操作：

我们有一个简单的函数，它表示要添加到数据库中的项目。DB 是我们想要模拟的依赖项。

```
function SaveItem(item){

    var db = new DB();

    db.insert(item);

}; 
```

如果我们将 DB 依赖项更改为参数，那么我们可以注入任何我们想要的东西。当函数被调用时，它会检查 dataStore 参数是否存在。当项目存在时，该值被分配给 db。当 dataStore 为 null 或未定义时，将创建一个新的 DB 对象。这使您可以放心地注入您的依赖项，即 db 将始终具有值。

```
function SaveItem(item, dataStore){

    var db = dataStore || new DB();

    db.insert(item);

}; 
```

现在我们可以像这样模拟我们的依赖：

```
function mockDb(){

    return{
        insert: function(){ 
            assert(true);  
        }
    }

}; 
```

并在测试中将它们组合在一起：

```
function SaveItemShouldCallInsertOnDb = function(){

    var testDb = new mockDb();
    var someTestItem = { name: "test item" };

    SaveItem(someTestItem, testDb);
}; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-11T21:33:16.340

Angular.js 提供了一个很棒的 IMO 依赖管理实现。但是 Angular 不仅仅是一个 DI 容器，因此要从中受益，您的应用程序必须从头开始使用 Angular。不过，值得一试，尤其是在您有大量基于表单的交互时。

# permissions - 具有外部用户的 LDAP / Active Directory

> ID：15336662
> 
> 赞同：2
> 
> 时间：2013-03-11T10:48:56.093
> 
> 标签：permissions, active-directory, ldap, openldap, authentication

**语境**

长期使用 Active Directory 的公司。以前，管理员将域用户组添加到具有读取权限的许多资源中。改变这一切是不现实的。

为与另一家公司的合作项目引入了使用 LDAP 进行身份验证的服务（在本例中为 GitHub:Enterprise 实例）。

**问题**

为外部用户创建 AD 帐户可以让他们访问许多他们不应该访问的资源。如果我们不为他们创建 AD 帐户，他们将无法访问新服务。

*   有没有办法为具有一些本地用户（外部人员）并为其他用户（员工）引用原始 AD 数据库的 AD 创建一种“装饰”代理？

*   还有什么其他方法可以解决访问权限问题？

可以使用 Windows 或 Linux 设置额外的 VM 来解决问题；但是，如果不需要这样做，那就更好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T12:50:49.647

Typically this would be done with SAML federation.

Or you could use your openLDAP and add all the users into it as this would not allow permissions for AD.

# arrays - PowerShell：Export-CSV 不会将 String[] 写入文件

> ID：15336664
> 
> 赞同：1
> 
> 时间：2013-03-11T10:49:00.283
> 
> 标签：arrays, string, powershell, csv, export

我在将三个值导出到 csv 时遇到问题。

这是我的代码：

```
Get-WmiObject win32_networkadapterconfiguration -ComputerName $sn.Name | 
Where-Object { 
    $_.Description -like "BASP Virtual Adapter" -or
    $_.Description -like "HP Network Team #1" } | 
Select-Object PSComputername, MACAddress, IPAddress | 
Export-Csv C:\Server_MAC_IP.txt -Force 
```

如果没有 Export-CSV，它会正确显示，一个名称一个 MAC 和一个 IP，但在 txt 中它显示即“Server01”、“MAC1”、“System.String[]”。有没有办法获取IP地址？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:53:37.157

尝试

```
Get-WmiObject win32_networkadapterconfiguration -ComputerName $sn.Name | 
Where-Object { $_.Description -like "BASP Virtual Adapter" -or $_.Description -like "HP Network Team #1" } | 
Select-Object PSComputername, MACAddress, @{N="IPAddress";E={ $_.IPADDRESS -JOIN ';'}} |
Export-Csv C:\Server_MAC_IP.txt -Force 
```

# excel - DAX IF 包含公式

> ID：15336669
> 
> 赞同：1
> 
> 时间：2013-03-11T10:49:17.067
> 
> 标签：excel, powerpivot, dax

您好，我有一列包含所有基于 Windows 的操作系统系统以及它们的类型，例如 Windows 7 企业版、Windows Server 2000、Windows Server 2003 标准版等。

我需要过滤这些以仅显示 Windows“操作系统名称”。

我使用了这个公式`=IF(ISERROR(SEARCH("7",[Caption])),"Windows 7","Error")`来挑选所有 Windows 7，但是当我尝试将“错误”更改为另一个 IF(ISERROR(SEARCH)) 时，它实际上并没有正确搜索语句。

我有什么办法可以解决这个问题？下面的图片是我使用公式时发生的情况`接受您可以在 Excel 中嵌套任何公式，因此用另一个 IF(ISERROR(...本身，它应该工作。

`=IF(ISERROR(SEARCH("7",[@Caption])),"Windows 7",IF(ISERROR(SEARCH("Windows",[@Caption])), "any other Windows","Error"))`

![在此处输入图像描述](../Images/571da48cfb2b66acb0e52d87774322d6.png) ![在此处输入图像描述](../Images/ff9fe072cda182c898b7810d472c7d1e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:56:16.093

您可以在 Excel 中嵌套任何公式，因此用`"ERROR"`另一个公式替换`IF(ISERROR(...`肯定是可能的。确保您要放置的公式本身是正确的并且它应该可以工作。

```
=IF(ISERROR(SEARCH("7",[@Caption])),
    “Windows 7的”，
    IF(ISERROR(SEARCH("Windows",[@Caption])),
        “任何其他 Windows”，
        “错误”））

```

请注意，我添加了，`@`因为我认为您的公式中缺少这一点！

# javascript - 重新加载后如何将数据保留在页面中？

> ID：15336672
> 
> 赞同：0
> 
> 时间：2013-03-11T10:49:33.320
> 
> 标签：javascript, jquery, jquery-data

我有一个加载登录页面的页面，在用户登录后，它会将另一个文件的某些部分加载到自身中。问题是我想知道在第一页中按下了哪个按钮并将其放在登录页面中。第一个页面使用加载登录页面`location.window`并刷新页面。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:57:28.533

或者，您可以利用 cookie/HTML5 localStorage 来跟踪页面 url。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:53:50.680

如果您使用的是 FORM，那么您可以在隐藏字段中发送按钮信息，例如

```
<input type="hidden" name="track" value="but1"> 
```

或者如果您使用 GET 方法，您可以通过查询字符串发送信息，例如

```
http://domain/login.php?track=but1 
```

# android - 如何比较数据库字段的值

> ID：15336673
> 
> 赞同：-4
> 
> 时间：2013-03-11T10:49:35.830
> 
> 标签：android, sqlite

我有一个 dd.mm.yyyy 格式的字符串日期值。我在数据库中有两列。两者都包含文本值。该值是 dd.mm.yyyy 格式的日期。我想将我的字符串日期值与这些进行比较。并想检查它是否位于这些之间。如果我的值大于第一个字段并且小于第二个字段，我想获取数据然后获取一些数据。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:56:16.140

您可以查看示例代码以找出解决方案（Sqlite-PhoneGAp）

不要与用于 PhoneGAp 的 tx.ExecuteSQL() 混淆

```
 if(sType=='select' && sMode=='select'){

                     //SELECT * from Em_Expense where strftime('%m', expdate)='06' and strftime('%Y', expdate)='2011'

                     tx.executeSql('SELECT expenseType,expdate,description,price,mode from Em_Expense where strftime(\'%m\', expdate)="'+sMonth+'" and strftime(\'%Y\', expdate)="'+sYear+'"', [],queryCustomSearchSuccess, errorCB);
                 }
                 else if(sMode=='select' && sType!='select')
                     {

                     tx.executeSql('SELECT expenseType,expdate,description,price,mode from Em_Expense where strftime(\'%m\', expdate)="'+sMonth+'" and strftime(\'%Y\', expdate)="'+sYear+'" and expenseType="'+ sType +'"', [],queryCustomSearchSuccess, errorCB);
                     }
                 else if(sType=='select' && sMode !='select')
                     {

                     tx.executeSql('SELECT expenseType,expdate,description,price,mode from Em_Expense where strftime(\'%m\', expdate)="'+sMonth+'" and strftime(\'%Y\', expdate)="'+sYear+'" and mode="'+ sMode +'"', [],queryCustomSearchSuccess, errorCB);
                     }
                 else
                     {
                     tx.executeSql('SELECT expenseType,expdate,description,price,mode from Em_Expense where strftime(\'%m\', expdate)="'+sMonth+'" and strftime(\'%Y\', expdate)="'+sYear+'" and mode="'+ sMode +'" and expenseType="'+sType+'"', [],queryCustomSearchSuccess, errorCB);
                     } 
```

# javascript - jquery信息图

> ID：15336679
> 
> 赞同：1
> 
> 时间：2013-03-11T10:49:41.873
> 
> 标签：javascript, jquery, html, imagemap

我正在尝试实现类似于[Visit Norway 网站上的地图](http://www.visitnorway.com/)

我查看了许多插件来帮助我入门，例如 j 矢量地图、ammaps 和 imagemapmaster。

Image Map Master 似乎最适合我的需要。我想我会用这个，但我想知道？有谁知道在 Visit Norway 网站上使用什么插件创建此地图。

![在此处输入图像描述](../Images/dd9e7b678163c3dc3192c2e36a5c8113.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:21:38.463

**很棒的 Dojo 工具包。**

该地图中有**Dojo SVG**、**Dijit 组件**等。在 Chrome > 检查器 (F12) > 来源中查看所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:20:56.173

地图功能来自此文件：

[http://www.visitnorway.com/js/module_mapcomponent_viewer.min.js](http://www.visitnorway.com/js/module_mapcomponent_viewer.min.js)

地图上的链接位置（蓝色图标）、弹出窗口上的数据（标题、img URL、描述等）来自 JSON 文件：

[http://www.visitnorway.com/WebServices2/JsonServices.asmx/GetMapComponentData?pageId=11818&languageCode=%22en%22&isMice=false&enableBooking=true](http://www.visitnorway.com/WebServices2/JsonServices.asmx/GetMapComponentData?pageId=11818&languageCode=%22en%22&isMice=false&enableBooking=true)

请使用任何 JS Beautifier 服务查看实际代码。

# php - CakePHP 读取生成的 PDF 并将其作为字节发送

> ID：15336680
> 
> 赞同：0
> 
> 时间：2013-03-11T10:49:47.857
> 
> 标签：php, file, cakephp, pdf

在我的 web 应用程序中，当用户转到此 url: 时，我可以使用 gedooo 按需从多个 odt 文件生成 pdf 文件`http://{base_url}/models/generer/{doc_id}`，modelsController 生成 pdf 并在导航器上启动下载。

现在我必须通过网络服务将模型中的 pdf 内容（如电子邮件中的附件）发送到远程应用程序。问题是执行 pdf 生成并将其集成到我的请求中，而不将其作为文件存储在服务器上。我试图做类似的事情：

```
$pdf = new File('http://{base_url}/models/generer/{doc_id}');
$content = $pdf->read(); 
```

我得到一个错误。我没有想法，我需要你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:07:27.077

您不能传输 PDF（二进制文件）。

如果你想在webservice中传输它，你必须将它转换为base64

```
$file = file_get_contents('http://{base_url}/models/generer/{doc_id}');
$filedata = base64_encode($file); 
```

现在您可以在 web 服务中发送这些数据

```
echo json_encode(array('file'=>$filedata)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:27:28.220

我找到了解决方案！

```
$this->requestAction($url); 
```

将文件写入我的 webapp 的文件夹中，然后

```
$content = file_get_contents($local_url) 
```

# facebook - 带有自定义图像的 Facebook 连接按钮

> ID：15336684
> 
> 赞同：0
> 
> 时间：2013-03-11T10:49:57.423
> 
> 标签：facebook, facebook-graph-api

我需要为 Facebook 连接按钮使用自定义图像。这是来自 Facebook 的标准代码：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=486357154765214";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

显示按钮：

```
<div class="fb-login-button" data-show-faces="false" data-width="200" data-max-rows="1"></div> 
```

任何想法？

干杯伙计们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:54:32.330

添加您自己的按钮图像并在“onclick”事件中调用 FB.login 方法。此处有关 FB.login 的更多详细信息：[https ://developers.facebook.com/docs/reference/javascript/FB.login/](https://developers.facebook.com/docs/reference/javascript/FB.login/)

# jquery - 如何在超时后淡出消息

> ID：15336686
> 
> 赞同：5
> 
> 时间：2013-03-11T10:50:01.350
> 
> 标签：jquery, jsf, jakarta-ee, jsf-2, primefaces

我有一个简单的登录页面，如果登录不成功，会显示一条消息。我希望这条消息在 5 秒后淡出，但我无法让它工作。

登录部分（删除了大部分不相关的东西）：

```
<h:inputText title="Name" value="#{authBean.name}" id="username" />
<h:inputSecret title="Password" value="#{authBean.password}" id="password" />

<p:commandButton id="loginButton" action="#{authBean.loginAndRedirect}"
          update="@form" value="Login" />
<h:message id="messages" for="login:username" /> 
```

到目前为止我已经尝试过：

在 Firebug 命令行中输入的命令完美运行：`$('[id$=messages]').fadeOut();`

现在我需要一种通过计时器触发它的方法：

像这样在按钮上设置回调不起作用（没有效果，没有错误）：

```
<p:commandButton ... oncomplete="setTimeout(5000, '$('[id$=messages]').fadeOut())" ... /> 
```

我已经尝试过了`onclick`，`oncomplete`但没有效果也没有错误。

尝试在元素上使用 primfaces 效果（包装的 JQuery 效果）`message`：

```
<h:message id="messages" for="login:username" errorClass="errorMessage">
  <p:effect type="fadeout" event="load" delay="5000">
    <f:param name="mode" value="'hide'" />
  </p:effect>
</h:message> 
```

没有效果，没有错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T10:52:27.590

你在`function`里面缺少一个闭包`setTimeout()`。此外，调用函数比使用内联 JavaScript 更好。它更易于阅读和调试。

例如

```
<p:commandButton ... oncomplete="fadeoutfunction()" ... /> 
```

和

```
function fadeoutfunction(){
 setTimeout(function(){
    $('[id$=messages]').fadeOut();
 },5000);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T10:52:04.023

```
<p:commandButton ... 
oncomplete="setTimeout(function(){$('[id$=messages]').fadeOut()},'5000')" ... /> 
```

# jquery - Slimbox - 覆盖在图像前面

> ID：15336690
> 
> 赞同：4
> 
> 时间：2013-03-11T10:50:07.847
> 
> 标签：jquery, css, joomla, slimbox

我对 Slimbox 插件有疑问。当我单击图像时，它会在图像前面加载叠加层。

这是一个示例链接：http: [//immodena.ch/verkaufsangebote/villen/item/38-villa-mit-wohnen-und-arbeiten](http://immodena.ch/verkaufsangebote/villen/item/38-villa-mit-wohnen-und-arbeiten)

我不明白哪里出了问题。我认为这是一些覆盖默认插件样式表的 z-index 的问题，但是对于检查器，我在这个方向上看不到任何东西。

你们中的一些人，可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T13:34:16.503

对了，终于找到问题了。

您需要添加`z-index:1;`到`#lbImage { }`

然后你需要`z-index:9999;`从`#lbCenter, #lbBottomContainer { }`

`z-index:9998;`并从中删除`#lbOverlay { }`

希望这可以帮助 ：）

```
 #lbImage {
     z-index:1;
 }

div#lbCenter,
div#lbOverlay,
div#lbBottomContainer {
    z-index: inherit;
} 
```

# solr - Slaves 如何自动检测 Solr Master 上的新内核？

> ID：15336695
> 
> 赞同：1
> 
> 时间：2013-03-11T10:50:14.247
> 
> 标签：solr, replication, core, solr4

我有一个具有一个主控和一些从属的 Solr 环境。该索引由多个 Solr 核心组成，这些核心共享它们的 Schema，但需要彼此分离。

不时有新的核心通过软件添加到主控。目前，为了复制，我必须手动将这些新核心添加到从站，这很糟糕。

有没有办法让从站自动检测主站上的新核心，在本地创建它们并立即开始复制？非常感激您的帮忙。

更新：当前设置是 Solr3，但已经计划向 Solr4 迁移。所以这基本上是一个 Solr4 问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:24:40.440

我不知道标准复制设置中从属设备的任何自动核心检测/设置。您也许可以通过软件使用[CoreAdmin](http://wiki.apache.org/solr/CoreAdmin)命令自己自动执行此操作。或者，由于您正在迁移到 Solr 4，您应该考虑使用[SolrCloud](http://docs.lucidworks.com/display/solr/SolrCloud)，因为这可能会提供您正在寻找的一些功能。

# symfony - 资产和过滤器

> ID：15336706
> 
> 赞同：0
> 
> 时间：2013-03-11T10:51:00.963
> 
> 标签：symfony, filter

我尝试使用 cssembed 过滤器加载我的样式表（因为 css 中引用了图像）

在 config.yml

```
assetic:
debug:          %kernel.debug%
use_controller: false
bundles:        [ cramifviewkitBundle ]
#java: /usr/bin/java
filters:
    cssrewrite: ~
    cssembed:
        jar: %kernel.root_dir%/Resources/java/cssembed-0.4.5.jar
    yui_css:
        jar: %kernel.root_dir%/Resources/java/yuicompressor-2.4.7.jar
    yui_js:
        jar: %kernel.root_dir%/Resources/java/yuicompressor-2.4.7.jar 
```

我下载 cssembed-0.4.5.jar 并将其定位在**src/my_bundle/Resources/java**

在我写的模板中：

```
{% stylesheets 
    '@myBundle/Resources/public/css/*'
    '@myBundle/Resources/public/JQMenu/css/*'
    filter='cssembed'
%} 
```

第一次导入一切都很好，但是对于第二次导入，当我查看萤火虫时，我有这个：

```
<link type="text/css" href="/viewkit/web/app_dev.php/css/eb2d30c_part_1_jqueryMenus_1.css" rel="stylesheet"> 
```

当我打开它时，它不是css而是html，因为有一个错误：

```
<h1>Exception thrown when handling an exception    (Symfony\Component\HttpKernel\Exception\FlattenException: Warning: json_encode() [<a   href='function.json-encode'>function.json-encode</a>]: Invalid UTF-8 sequence in argument in C:\wamp\www\viewkit\vendor\monolog\monolog\src\Monolog\Formatter\NormalizerFormatter.php line 99)</h1>
<div class="block_exception clear_fix">
<h2><span>1/1</span> <abbr title="ErrorException">ErrorException</abbr>: Warning: json_encode() [<a href='function.json-encode'>function.json-encode</a>]: Invalid UTF-8 sequence in argument in  C:\wamp\www\viewkit\vendor\monolog\monolog\src\Monolog\Formatter\NormalizerFormatter.php line 99</h2>
</div>
<div class="block">
 <ol class="traces list_exception">
 <li> in  C:\wamp\www\viewkit\vendor\monolog\monolog\src\Monolog\Formatter\NormalizerFormatter.php line 99</li> 
```

知道它可能来自哪里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:20:45.460

按照您在配置中指定的方式放置`cssembed-0.4.5.jar`in`app/Resources/java`目录。

# html - 如何在另一个 div 中创建一个固定的 div？

> ID：15336709
> 
> 赞同：-1
> 
> 时间：2013-03-11T10:51:10.337
> 
> 标签：html, css, css-position

亲爱的朋友们，我在我的网页设计中遇到了一个问题。我的布局如下，

```
<div class="main_div">
<div class="left_column">
<div class=="fixed_div"></div>
</div>
<div class="mid_column"></div>
<div class=="right_column"></div>
</div> 
```

和 css 文件看起来像

```
 .main_div{
    float:left;
    width:80%;
    }
   .left_column{
    float:left;
    width:20%;
    }
    .mid_column{
    float:left;
    width:40%;
    }
    .right_column{
    float:left;
    width:20%;
    } 
```

我想要做的是我需要将**fixed_div**固定在**父元素**内并将宽度设置为 100%。但它总是来自left_column。我将如何克服这个问题请帮忙。谢谢 **请注意，有时我会从 jquery 更改 left_column 的宽度。所以当时 fixed_div 也必须调整为 left_column。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:57:01.760

对于块元素，默认情况下您的问题已得到解决，因为它们具有`width: auto;`. 根本不要调整`#fixed_div`宽度，它会起作用。

PS 使用 ID 选择所有元素`css`- 不是一种好的样式，最好将其重新设计为类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:58:16.537

这应该有助于：

```
.fixed_div { 
   position: absolute; 
   left: 0; 
   top: 0; 
   width: 100%;
} 

.left_column {
   position: relative;
   float:left;
   width:20%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:49:33.550

为此，您已经浮动了所有元素，您必须使用 clearfix 技术来消除任何错误。并将 .fixed_div 设置为`display: block;`. 如果这对您没有帮助，请放置演示。实际上你遇到了什么问题。

# c# - 如何在安装应用程序的 hkey_classes_root 键上添加值

> ID：15336711
> 
> 赞同：7
> 
> 时间：2013-03-11T10:51:15.137
> 
> 标签：c#, registry, windows-installer, url-protocol, visual-studio-setup

**解决了！！**

我正在尝试为我的应用程序创建一个自定义 URL 协议，该协议将在他们访问或单击指向 myapp:start 的链接时启动我的应用程序

我的问题是如何知道用户安装我的应用程序的位置。msi安装程序可以在注册HKEY_CLASSES_ROOT到注册表时放置位置吗？

```
HKEY_CLASSES_ROOT
   myapp
      (Default) = "URL:myapp Protocol"
      URL Protocol = ""
      DefaultIcon
           (Default) = "myapp.exe,1"
      shell
           open
               command
                   (Default) = "C:\Program Files\MyAppFolder\MyApp.exe" "%1" 
```

我想将路径“C:\Program Files\MyAppFolder\MyApp.exe”更改为用户在安装过程中安装我的应用程序的位置。

**解决方案**

```
HKEY_CLASSES_ROOT
   myapp
      (Default) = "URL:myapp Protocol"
      URL Protocol = ""
      DefaultIcon
           (Default) = "myapp.exe,1"
      shell
           open
               command
                   (Default) = "[TARGETDIR]MyApp.exe "%1"" 
```

[TARGETDIR] 将自动更改为用户安装文件的位置，例如“C:\Program Files\MyAppFolder\”

有关更多信息，请单击此链接 -> [将应用程序注册到 URI 方案](http://msdn.microsoft.com/en-us/library/aa767914%28v=vs.85%29.aspx)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T10:55:52.230

使用 Visual Studio 安装项目，您可以`[TARGETDIR]`在创建注册表项时使用该变量。

此变量会自动设置为您的应用程序正在安装到的目标目录，只需将您的`.exe`文件附加到末尾即可。

# ios - 未调用 UIPageViewController 完成块

> ID：15336712
> 
> 赞同：3
> 
> 时间：2013-03-11T10:51:16.900
> 
> 标签：ios, objective-c, objective-c-blocks

当我打电话时

```
- (void)setViewControllers:(NSArray *)viewControllers 
                 direction:(UIPageViewControllerNavigationDirection)direction 
                  animated:(BOOL)animated 
                completion:(void (^)(BOOL finished))completion; 
```

在`UIPageViewController` `delegate`

```
- (void)pageViewController:(UIPageViewController *)pageViewController 
        didFinishAnimating:(BOOL)finished 
   previousViewControllers:(NSArray *)previousViewControllers 
       transitionCompleted:(BOOL)completed; 
```

我看到没有调用完成块。但是当我在方法之外调用这个方法时`delegate`，会调用完成块。我配置错了吗？你能给我提示吗！

谢谢！

# linux - sudo apt-get update 未连接到源

> ID：15336715
> 
> 赞同：0
> 
> 时间：2013-03-11T10:51:30.777
> 
> 标签：linux

当我想`sudo apt-get update`在 linux mint14 中运行此命令时，我陷入了等待头文件的困境。我在终端看到这个 `0% [Waiting for headers] [Waiting for headers] [Waiting for headers] [Waiting f`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:54:59.740

尝试

```
inxi -r 
```

在终端中并检查在输出中为您打印的存储库。它们可能不正确；如果是这种情况，请修改

> /etc/apt/sources.list

文件到您知道的工作存储库中。

# php - 如何避免错误 - 严格标准：只能通过引用传递变量

> ID：15336717
> 
> 赞同：0
> 
> 时间：2013-03-11T10:51:34.287
> 
> 标签：php

我收到以下错误

> 严格的标准：只有变量应该通过引用在第 8 行的 C:\wamp\www\dragdrop\newhotel\reservation\ajax\tips.php 中传递

8号线是

```
$img=mysql_real_escape_string(end(explode('/',$_POST['img']))); 
```

我是新手请帮帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:54:37.183

Explode 是一个函数，因此您不能将其传递给 end。使用中间变量。

```
$List = explode('/',$_POST['img']);
$img=mysql_real_escape_string(end($List)); 
```

应该管用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:55:45.517

您没有传递变量，而是直接传递了一个数组。

[http://php.net/manual/de/function.end.php](http://php.net/manual/de/function.end.php)

```
$var = explode('/',$_POST['img']);
$var = end($var);
$img = mysql_real_escape_string($var); 
```

# wpf-controls - WPF MVVM如何动态绑定ContentTemplate

> ID：15336719
> 
> 赞同：0
> 
> 时间：2013-03-11T10:51:45.490
> 
> 标签：wpf-controls, mvvm-light, datatemplate

(WPF MVVM) 我正在尝试使用我自己的样式和 ContentTemplate->StaticResource->DataTemplate 的组合来制作暂停/播放按钮。我将 DataTemplate 设置为矢量图形数据。我为暂停按钮和播放按钮准备了 2 个矢量图形。我的目标：如果我单击暂停按钮，ContentTemplate 将“切换”到 Play-Button-DataTemplate，并且按钮变为 Play-Button。我知道我需要绑定按钮的 Click-event 或使用 RelayCommand 来做 Pause/Play 操作（在我的代码片段中我没有绑定 Click 事件），但我不知道**如何绑定 ContentTemplate 来获取我需要的效果**。先感谢您。

```
<controls:MyButton x:Name="btnPause" AutomationProperties.Name="btnPause" Style="{StaticResource MyButtonStyle}" ContentTemplate="{StaticResource dtmpPause}" />

<DataTemplate x:Name="dtmpPause">
        <Path x:Name="pathPause" Fill="White" Stretch="Uniform" Data="M314.00598,126.271 L379.52698,126.271 L379.52698,440.672 L314.00598,440.672 z M187.40198,126.271 L252.92398,126.271 L252.92398,440.672 L187.40198,440.672 z M283.45901,34.240997 C146.03,34.240997 34.229004,146.043 34.229004,283.45697 C34.229004,420.88702 146.03,532.70099 283.45901,532.70099 C420.88699,532.70099 532.70203,420.88702 532.70203,283.45697 C532.70203,146.043 420.88699,34.240997 283.45901,34.240997 z M283.45901,0 C439.772,0 566.92999,127.158 566.92999,283.45697 C566.92999,439.771 439.772,566.94299 283.45901,566.94299 C127.15799,566.94299 0,439.771 0,283.45697 C0,127.158 127.15799,0 283.45901,0 z"/>
</DataTemplate>

<DataTemplate x:Name="dtmpPlay">
    <Path x:Name="pathPlay" Fill="White" Stretch="Uniform" Data="M269.00003,121.50002 L298.00003,121.50002 L298.00003,445.50003 L269.00003,445.50003 z M283.5,41.621429 L41.620132,283.50198 L283.5,525.37958 L525.37982,283.50198 z M283.5,0 L566.99994,283.50198 L283.5,567 L0,283.50198 z"/>
</DataTemplate> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:05:08.043

使用 DataTemplateSelector，它允许您根据定义的条件选择您希望的 DataTemplate，您可以根据需要实现它。

这是一个例子：

```
public class TaskListDataTemplateSelector : DataTemplateSelector
{
    public override DataTemplate
        SelectTemplate(object item, DependencyObject container)
    {
        FrameworkElement element = container as FrameworkElement;

        if (element != null && item != null && item is Task)
        {
            Task taskitem = item as Task;

            if (taskitem.Priority == 1)
                return
                    element.FindResource("importantTaskTemplate") as DataTemplate;
            else
                return
                    element.FindResource("myTaskTemplate") as DataTemplate;
        }

        return null;
    }
} 
```

在此示例中，您根据 DataContext 的优先级返回您希望的任何 DataTemplate。

在 xaml 中，您需要告诉控件它应该使用什么 DataTemplateSelector：

```
<ListBox Width="400" Margin="10"
         ItemsSource="{Binding Source={StaticResource myTodoList}}"
         ItemTemplateSelector="{StaticResource myDataTemplateSelector}"
         HorizontalContentAlignment="Stretch"/> 
```

在这种情况下，ListBox 将使用 myDataTemplateSelector。

在您的情况下，它是 MyButton。

# jquery - MVC 4：将复杂对象传递给异步控制器操作

> ID：15336721
> 
> 赞同：0
> 
> 时间：2013-03-11T10:51:48.093
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4

我正在尝试使用 Javascript 将 orderlines 列表传递给异步控制器操作：

```
var model = "<some JSON string>";
$.ajax({ type: "POST",
  url: "/MyController/MyAction",
  datatype: "json",
  data: { 'orderLines': model},
  success: function(msg) {
     ...
  }
}); 
```

当我在运行时检查模型变量时，orderline 属性的值设置正确。但是，当我在控制器操作中放置断点时，orderline 传入参数的属性为 0。看起来 JSON 字符串没有正确反序列化。

控制器动作如下所示：

```
public ActionResult AsyncUpdateOrderline(List<OrderLine> orderLines)
{
  ...
} 
```

如何正确地将复杂对象传递给异步控制器操作？

谢谢，尼尔斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T10:53:21.847

您需要设置请求 Content-Type 标头并使用该`JSON.stringify`方法向控制器发送数据：

```
var model = [
    { quantity: 1, name: 'some name 1' },
    { quantity: 2, name: 'some name 2' }
];

$.ajax({ 
    url: '/MyController/MyAction',
    type: 'POST',
    contentType: 'application/json',
    data: JSON.stringify({ orderLines: model }),
    success: function(msg) {
        ...
    }
}); 
```

请注意，模型不应是 JSON 字符串，而是 javascript 数组对象，其中每个元素都反映`OrderLine`模型的结构。

# c# - 从字符串中过滤开始和结束字符

> ID：15336722
> 
> 赞同：3
> 
> 时间：2013-03-11T10:51:53.223
> 
> 标签：c#, regex, visual-studio, filter

每次打开串口时都会收到以下字符串，该字符串用于检查所连接设备正在运行的 BIOS 版本和固件版本。

细绳：

```
v03400216000000001FC5H240108206B-RAMBOX=[03] 
```

现在检查 Bios 版本和固件版本的唯一重要字符如下：

```
03400216 
```

注意：`bytearray`是 a`byte[]`转换为 a`string`并填充：

```
v03400216000000001FC5H240108206B-RAMBOX=[03] 
```

我尝试使用以下代码实现此目的：

```
string versiontext = bytearray.Trim();
bytearray = versiontext.Remove(0, 2);
versiontext = bytearray.Remove(9, bytearray.Length);
bytearray = versiontext; 
```

但这没有成功，并导致以下异常：

```
Index and count must refer to a location within the string. 
```

我应该使用`Regex`, 而不是`.Remove`?

编辑：

@lazyberezovsky 帮助我，我只是忘记了`.Substring()`.

我`string result`使用以下代码实现了：

```
if (bytearray.Contains("RAMBOX"))
{
       string Versionstring = bytearray.Substring(1, 8);
       bytearray = Versionstring;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T10:53:51.197

简单的子字符串呢？

```
var input = "v03400216000000001FC5H240108206B-RAMBOX=[03]";
var version = input.Substring(1, 8); 
```

# linux - 根据特定条件将 CSV 文件中的多行合并为一行

> ID：15336725
> 
> 赞同：0
> 
> 时间：2013-03-11T10:51:56.533
> 
> 标签：linux, csv, awk

我正在尝试读取这种格式的 CSV 文件

```
COL1, COL2  
5, 25  
5, 67  
5, 89  
3, 55  
3, 8  
3, 109  
3, 12  
3, 45  
3, 663  
80, 34  
80, 5 
```

并将具有相同 COL1 的所有条目的 COL2 组合在一行中，以使第一列指示后面的列数。因此，对于上面给出的示例，输出文件应如下所示：

```
3, 25, 67, 89  
6, 55, 8, 109, 12, 45, 663  
2, 34, 5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:15:00.293

使用的解决方案`awk`：

```
$ awk 'NR>1{a[$1]=a[$1]", "$2;c[$1]++}END{for (k in a) print c[k] a[k]}'  file
3, 25, 67, 89
6, 55, 8, 109, 12, 45, 663
2, 34, 5 
```

# c - 使用 protobuf 序列化消息与 zeromq 通信

> ID：15336726
> 
> 赞同：0
> 
> 时间：2013-03-11T10:51:56.707
> 
> 标签：c, sockets, protocol-buffers, zeromq

我无法使用 C 通过 ZeroMQ 套接字接收在 protobuf 中序列化的消息。我已经序列化了客户端输入的消息，并使用 zhelpers.h 中定义的 s_send() 函数将此缓冲区发送到服务器。服务器代码是与 zeromq 包捆绑的相同测试代码作为示例。

这是我的客户端：

```
#include "amessage.pb-c.h"
#include "zhelpers.h"

int main (void)
{

    AMessage msg = AMESSAGE__INIT; // AMessage
    void *buf;                     // Buffer to store serialized data
    unsigned len;

    printf ("Connecting to server...\n");
    void *context = zmq_ctx_new ();
    void *requester = zmq_socket (context, ZMQ_REQ);

    char buffer[256] = "";

    printf("[client] :");
    scanf("%s", buffer );

    msg.csmsg = buffer;
    len = amessage__get_packed_size(&msg);        
    buf = malloc(len);

    printf("[client]: pack msg len : %d\n ", len);
    printf("Sent msg : %d\n", buf);

    amessage__pack(&msg,buf);

    s_send(requester, buf);

    zmq_close (requester);
    zmq_ctx_destroy (context);
    return 0;
} 
```

和服务器端：

```
#include "zhelpers.h"
#include <pthread.h>
#include <stdlib.h>
#include "amessage.pb-c.h"

#define MAX_MSG_SIZE 256

static size_t read_buffer (unsigned max_length, unsigned char *out)
{
   size_t cur_len = 0, nread;
   uint8_t c;
   while ((nread=fread(out + cur_len, 1, max_length - cur_len, stdin)) != 0)
   {
       cur_len += nread;
       if (cur_len == max_length)
       {
           fprintf(stderr, "[server]: max message length exceeded\n");
           exit(1);
       }
   }
   return cur_len;
 }

 static void * worker_routine (void *context) 
 {

    AMessage *msg;

    uint8_t buf[MAX_MSG_SIZE];
   char buffer[256];

   //  Socket to talk to dispatcher
   void *receiver = zmq_socket (context, ZMQ_REP);
   zmq_connect (receiver, "inproc://workers");

   while (1) {

          uint8_t *string = s_recv (receiver);

       if(string == 0)
            printf("[server]: Error: In receiving msg.\n");
       else
       {

        size_t msg_len = read_buffer (MAX_MSG_SIZE, string);
        printf("[server]: client msg len is: %d.\n", msg_len);
        msg = amessage__unpack(NULL, msg_len, string);   
        if (msg == NULL)
        {
            fprintf(stderr, "[server]: error unpacking incoming message\n");
            exit(1);
        }
        printf ("[client]: %s \n", msg->csmsg);

    }
    amessage__free_unpacked(msg, NULL);
    free (string);
    //  Do some 'work'
    sleep (1);

   }
   zmq_close (receiver);
   return NULL;
}

  int main (void)
  {
   void *context = zmq_ctx_new ();
   void *clients = zmq_socket (context, ZMQ_ROUTER);
   zmq_bind (clients, "tcp://*:5555");

   void *workers = zmq_socket (context, ZMQ_DEALER);
   zmq_bind (workers, "inproc://workers");

   //  Launch pool of worker threads
   int thread_nbr;
   for (thread_nbr = 0; thread_nbr < 5; thread_nbr++) {
        pthread_t worker;
        pthread_create (&worker, NULL, worker_routine, context);
   }
    //  Connect work threads to client threads via a queue proxy
    zmq_proxy (clients, workers, NULL);

    zmq_close (clients);
    zmq_close (workers);

    zmq_ctx_destroy (context);
    return 0;
  } 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T06:38:02.723

您正在使用`s_send()`which 需要一个 C 字符串作为参数，并调用`strlen()`以确定其大小。但是，协议缓冲区数据是二进制数据，并且可能在消息中的任何位置包含空字节。

而是使用`zmq_send()`并将消息的长度提供给`zmq_msg_init_size()`函数。

# data-structures - 我们可以用单链表构造一棵二叉树吗

> ID：15336729
> 
> 赞同：1
> 
> 时间：2013-03-11T10:52:01.777
> 
> 标签：data-structures

我搜索了很多，但没有一个显示如何使用单链表创建二叉树。甚至可以创建一个？！我记得我在某处读过可以使用单链表创建二叉树。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:18:02.447

您可以[将二叉树表示为数组](http://en.wikipedia.org/wiki/Binary_tree#Arrays)。如果你想在你的树中唯一的方向是从根到叶，那么理论上你可以使用单链表而不是数组。

但是，这将导致**巨大**的性能损失，因为您将不得不进行指针追逐，而不是像在数组中那样直接跳转到下一个节点。

我发现很难想到你会真正做到这一点的场景，但原则上它是可能的。

# maven - 我应该在 pom 文件中指定 args 以避免 CLOVER 的 Java 堆空间吗？

> ID：15336731
> 
> 赞同：1
> 
> 时间：2013-03-11T10:52:08.960
> 
> 标签：maven, clover

我已经用三叶草运行了 mvn 来生成三叶草报告，但发现如下：

```
ERROR: java.lang.OutOfMemoryError flushing coverage for recorder D:\workspace\nu\clover\clover.dbb6cs_he5gw8qr: Java heap space
Exception in thread "CloverFlushThread" java.lang.OutOfMemoryError: Java heap space. 
```

有没有办法`-Xms512M -Xmx1024M`在 maven(pom.xml) 中配置 for clover？我一直在寻找它，但没有理由。请点击[这里](https://confluence.atlassian.com/display/CLOVER/CloverInstr)。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-18T20:52:19.703

我怀疑在 Clover 工具化您的代码后，您在测试执行期间遇到了 OOO 异常。如果这是正确的，那么您需要增加由 Maven 分叉的 JUnit VM 上的内存堆。您应该在 POM 文件中添加类似的内容

```
<plugin>
    <artifactId>maven-surefire-plugin</artifactId>
    <groupId>org.apache.maven.plugins</groupId>
    <version>2.18</version>
    <configuration>
        <argLine>-Xms512m -Xmx1024m</argLine>
    </configuration>
</plugin> 
```

祝你好运 ;）

# php - 如何在 PHP 或 MySQL 中按日期对数据进行分组？

> ID：15336733
> 
> 赞同：-1
> 
> 时间：2013-03-11T10:52:14.050
> 
> 标签：php, mysql, sql, tsql

我在mysql中有一张表

```
comment_id   comment_by_user   comment_date                comment_body
  1244         david_sam       2013-02-27 15:46:53          xyz
  1245         raymond_davis   2013-02-27 13:46:53          xyz
  1246         jam_jam         2013-02-14 18:46:53          xyz 
```

我想将此数据显示为

```
2013-02-27 -------------------------------------
1244       david_sam        15:46      xyz     
1245       raymond_davis    13:46      xyz
2013-02-14 -------------------------------------
1246       jam_jam          18:46      xyz 
```

我该怎么做，哪个 SQL 查询和哪个 PHP 方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:00:09.007

您只需选择所有需要的列

```
select comment_id, comment_by_user,
       date(comment_date), time(comment_date), comment_body
from comments
order by comment_date desc, comment_id 
```

然后在日期更改时输出行并插入附加行

```
$current_date = '';
while (list($id, $user, $date, $time, $body) = $sth->fetch(PDO::FETCH_NUM)) {
    if ($date != $current_date) {
        echo "$date ----\n";
        $current_date = $date;
    }

    echo "$id $user $time $body\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:01:01.833

试试这个。。

```
SELECT * FROM `table_name` ORDER BY `comment_date` DESC 
```

你的php代码应该是这样的..

```
$date = '';
foreach($records as $record)
{
    if($date != date('Y-m-d'), strtotime($record->comment_date))
    {
        //  print "2013-02-14 -------------------------------------";
        $date = date('Y-m-d'), strtotime($record->comment_date);
    }

    //  print "1246       jam_jam          18:46      xyz";
} 
```

# jquery - 如何从标题行 ID 获取 JQuery Accordion 的索引？

> ID：15336737
> 
> 赞同：1
> 
> 时间：2013-03-11T10:52:32.990
> 
> 标签：jquery, asp.net, accordion

我有一个 Accordion，我想通过其 ID 获取特定标头的索引。

手风琴由中继器生成：

```
<asp:Repeater ID="rptProjectList" OnItemDataBound="rptProjects_ItemDataBound" runat="server">
    <HeaderTemplate>
        <div id="accordion">
    </HeaderTemplate>

    <ItemTemplate>
        <h1 style="margin: 0px" class="accordionHeader" id='<%# Eval("projectCode") %>'></h1>

        <div>
           ....some stuff             
        </div>
    </ItemTemplate>

    <FooterTemplate>
        </div>
    </FooterTemplate>
</asp:Repeater> 
```

给定 projectCode 作为参数，我希望能够打开扩展特定部分的页面。例如，用户转到 MyPage.aspx?project=ABC123，页面加载时 ABC123 项目打开，其他面板折叠。

我拥有的 jQuery 是：

```
var activeProject = $(document).getUrlParam("project"); 
```

获取代码。

和

```
$j('#accordion').accordion({
        active: activeIndex,
        collapsible: true
    }); 
```

设置手风琴。

我无法弄清楚的是中间的那一点。我需要能够通过遍历 div 来获取 activeIndex 以获取具有相关项目代码的行的索引。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T10:55:33.907

你可以这样做。 [手风琴](http://api.jqueryui.com/accordion/#option-active)

```
var active = $( ".selector" ).accordion( "option", "active" ); //getter 

<div id="accordion">
  <h3 class='headAcc'>First header</h3>
  <div>First content panel</div>
  <h3 class='headAcc'>Second header</h3>
  <div>Second content panel</div>
</div> 
```

jQuery

```
$('#accordion').accordion({
});

//suppose you want to show thee index which starts some text 
var indexToActivate = $('.headAcc:contains("Second header")').index();
alert(indexToActivate);
indexToActivate=indexToActivate-1; //index is zero based for jquery ui. 
$('button').on('click',function(){
    var active = $( "#accordion" ).accordion( "option", "active" ); //getter 
    alert('Current Index is ' + active +" ");

     $( "#accordion" ).accordion( "option", "active",indexToActivate ); //setter

     var active = $( "#accordion" ).accordion( "option", "active" ); //getter 
       alert('Current New Index is ' + active +" ");
}); 
```

[`Working Demo`](http://jsfiddle.net/2CqEK/3/)

# javascript - jquery 触发器悬停在具有相同选择器属性的另一个元素上

> ID：15336738
> 
> 赞同：1
> 
> 时间：2013-03-11T10:52:33.880
> 
> 标签：javascript, jquery, hover, selector, bind

这听起来很简单，并且有一个涉及更改 CSS 类的解决方案，但我想知道是否有一个优雅的即时解决方案来解决以下问题。

这是[一个类似的问题](https://stackoverflow.com/questions/13325519/jquery-trigger-a-hover-event-from-another-element)，但它为我的场景创建了“太多递归”。

所以我有 2 个按钮，它们都转到下一个选项卡；一个在内容的顶部，一个在下面。当我将鼠标悬停在其中任何一个上时，我希望它们都显示悬停状态。它们具有相同的 html 代码；

```
<a href="#" class="button step-next" onclick="showStep(3); return false;">Next &raquo;</a> 
```

并在另一篇文章之后，我尝试了解决方案；

```
$('a.step-next').on('mousenter mouseleave', function(e) {
    $('a.step-next').not(this).trigger(e.type);
}); 
```

但是我最初使用 not() 的逻辑是错误的；它只会在两个元素之间来回触发事件。

显然，我可以更改 CSS 以添加一个新类并在悬停/非悬停时将其删除，这是我要走的路线。但是有一个仅触发的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:03:25.210

不确定您想要实现什么（*`html required`*），但这可能是您正在寻找的解决方案：

```
$('a.step-next').on('mousenter mouseleave', function(e) {
  $(this).siblings('a.step-next').trigger(e.type);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:11:51.367

如果我理解正确，您不希望代码生成的事件重新触发代码..

如果是这样，您可以使用*`extraParameters`*of[`.trigger()`](http://api.jquery.com/trigger/)方法

```
$('a.step-next').on('mousenter mouseleave', function(e, fromCode) {
    if (fromCode === undefined){
        $('a.step-next').not(this).trigger(e.type, true);
    }
}); 
```

# java - Java：在构造函数内部或外部初始化对象？

> ID：15336741
> 
> 赞同：-3
> 
> 时间：2013-03-11T10:52:35.707
> 
> 标签：java, constructor, initialization

我有兴趣了解在构造函数内部或外部初始化对象之间是否有任何区别

```
public class HTMLTable {
int value1;
Scanner user_input;

  public HTMLTable () {
    user_input = new Scanner(System.in);
    value = user_input.next();
  }
} 
```

代替：

```
public class HTMLTable {
int value1;
Scanner user_input = new Scanner(System.in);

  public HTMLTable () {
    value = user_input.next();
  }
} 
```

有人可以解释吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T10:55:09.857

没有区别：编译器将在构造函数中移动任何*外部初始化*。

简而言之，请参阅 Java，第[3.2.4 节：字段默认值和初始化](http://docstore.mik.ua/orelly/java-ent/jnut/ch03_02.htm)程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T10:57:32.577

没有区别。无论如何，编译器都会将初始化代码（如第二个示例）移动到构造函数主体中。根据代码的可读性选择这个或那个变体。

# python - neo4j、灯泡和 utf8

> ID：15336745
> 
> 赞同：1
> 
> 时间：2013-03-11T10:52:56.940
> 
> 标签：python, unicode, encoding, character-encoding, neo4j

我在使用 python 的库灯泡插入和查找来自 neo4j 的数据时遇到了一些问题。问题与字符编码有关。我得到：

```
UnicodeEncodeError: 'ascii' codec can't encode character u'\xe9' in position 22: ordinal not in range(128) 
```

尝试在索引中查找节点时。我已经在 Google 上搜索了更改任一 neo4j 灯泡中字符编码的方法，但似乎找不到解决方法。

**编辑** 这是重现错误的代码：

```
from bulbs.model import Node
from bulbs.neo4jserver import Graph
from bulbs.property import String
import MySQLdb
import sys

class Topic(Node):
    element_type = 'node'
    name = String(nullable=False)

g = Graph()
g.add_proxy('topics', Topic)

con = MySQLdb.connect(host='127.0.0.1', user='root', db='wiki_new', charset='utf8')
cur = con.cursor()
cur.execute('SELECT page_title FROM page')
while True:
    row = cur.fetchone()
    if not row:
        break

    sys.stdout.write(row[0] + '\n')
    nds = g.topics.index.lookup(name=row[0])
    if not nds:
        g.topics.create(name=row[0]) 
```

导致错误的字符串是： !Xóõ 。

**更新**

我现在使用 python 的 sax 解析器从 XML 文件（维基百科页面转储）中获取数据。代码基本相同，我得到的错误是：

```
 File "graph.py", line 197, in <module>
    build_wikipedia_graph(WIKI_DUMP_PATH)
  File "graph.py", line 195, in build_wikipedia_graph
    filter_handler.parse(open(wiki_dump_path))
  File "/usr/lib/python2.7/xml/sax/saxutils.py", line 255, in parse
    self._parent.parse(source)
  File "/usr/lib/python2.7/xml/sax/expatreader.py", line 107, in parse
    xmlreader.IncrementalParser.parse(self, source)
  File "/usr/lib/python2.7/xml/sax/xmlreader.py", line 123, in parse
    self.feed(buffer)
  File "/usr/lib/python2.7/xml/sax/expatreader.py", line 207, in feed
    self._parser.Parse(data, isFinal)
  File "/usr/lib/python2.7/xml/sax/expatreader.py", line 304, in end_element
    self._cont_handler.endElement(name)
  File "/home/pedro/wiki/1.0/page_parser.py", line 55, in method
    getattr(self._downstream, method_name)(*a, **k)
  File "/home/pedro/wiki/1.0/page_parser.py", line 87, in endElement
    self.pageCallBack(self.currentPage, self.callbackArgs)
  File "graph.py", line 181, in _callback
    kgraph.set_links_to(page.title, target)
  File "graph.py", line 59, in set_links_to
    topic_dst = self._g.topics.get_or_create('name', topic_dst, name=topic_dst)
  File "/usr/local/lib/python2.7/dist-packages/bulbs/element.py", line 607, in get_or_create
    vertex = self.index.get_unique(key, value)
  File "/usr/local/lib/python2.7/dist-packages/bulbs/neo4jserver/index.py", line 335, in get_unique
    resp = lookup(self.index_name,key,value)
  File "/usr/local/lib/python2.7/dist-packages/bulbs/neo4jserver/client.py", line 878, in lookup_vertex
    path = build_path(index_path, vertex_path, index_name, key, value)
  File "/usr/local/lib/python2.7/dist-packages/bulbs/utils.py", line 126, in build_path
    segments = [quote(str(segment), safe='') for segment in args if segment is not None]
UnicodeEncodeError: 'ascii' codec can't encode character u'\xe9' in position 22: ordinal not in range(128) 
```

当我尝试使用名称创建节点时发生错误： atp-toernooi van montréal/toronto 。

**另一个更新** 使用更新的灯泡库，我得到一个不同的错误：

```
 File "/usr/local/lib/python2.7/dist-packages/bulbs/utils.py", line 129, in build_path
    segments = [quote(unicode(segment), safe='') for segment in args if segment is not None]
  File "/usr/lib/python2.7/urllib.py", line 1238, in quote
    return ''.join(map(quoter, s))
KeyError: u'\xe9' 
```

有什么帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:21:48.293

Bulbs 在 Neo4j Server 中将字符串存储为 unicode——注意属性类型 String 将值转换为 unicode（unicode 字符串是 Python 3 中的默认值）：

*   [https://github.com/espeed/bulbs/blob/master/bulbs/property.py#L171](https://github.com/espeed/bulbs/blob/master/bulbs/property.py#L171)

请参阅 Python Unicode HOWTO：

[http://docs.python.org/2/howto/unicode.html#python-2-xs-unicode-support](http://docs.python.org/2/howto/unicode.html#python-2-x-s-unicode-support)

首先，验证您的 MySQL 服务器是否支持 UTF-8：

`mysql> show character set like 'utf%';`

另外，请注意我的更改和评论...

```
from bulbs.model import Node
from bulbs.neo4jserver import Graph
from bulbs.property import String
import MySQLdb
import sys

class Topic(Node):
    element_type = 'node'           # by convention name this 'topic'
    name = String(nullable=False)

g = Graph()
g.add_proxy('topics', Topic)

# Make sure use_unicode to set True
con = MySQLdb.connect(host='127.0.0.1', user='root', db='wiki_new', use_unicode=True, charset='utf8')
cur = con.cursor()
cur.execute('SELECT page_title FROM page')
while True:
    row = cur.fetchone()  
    if not row:
        break

    sys.stdout.write(row[0] + '\n')

    # Use Bulbs' get_or_create method to simplify your code
    nds = g.topics.get_or_create(name, row[0], name=row[0]) 
```

# python - python和字符串提取

> ID：15336747
> 
> 赞同：-2
> 
> 时间：2013-03-11T10:52:58.633
> 
> 标签：python, string

我有很多这样的行：

```
13480 AAA BBB CCC 
```

我想使用 python 将它们转换为：

```
SELECT XX FROM YY WHERE SOUNDEX("AAA BBB CCC")=FIELD1 AND CP="13480" 
```

知道“ `AAA BBB CCC`”是一个城镇，所以它可能是“ `AAA BBB CCC`”、“ `AAA BBB`”、“ `AAA-BBB-CCC`”、“ `AAA`”、“ `L'AAA`”、“ `D'AAA BBB`”、“ `D'AAA..`”。好吧，数字后面的行尾是城镇名称。

所以一个包含以下行的大文件：

```
06260 Puget Théniers
06620 Bar sur Loup (Le)
06640 SAINT JEANNET
06640 Saint Jeannet
06660 AURON
06660 SAINT ETIENNE DE TINEE
06660 Saint Etienne de Tinée
06670 Levens
06710 Touët sur Var
06750 ANDON
06750 Thorenc 
```

最终会像

```
SOUNDEX("Puget Théniers") AND CP="06260"
SOUNDEX("Bar sur Loup (Le)") AND CP="06620"
SOUNDEX("SAINT JEANNET") AND CP="06640"
SOUNDEX("Saint Jeannet") AND CP="06640"
SOUNDEX("AURON") AND CP="06660"
SOUNDEX("SAINT ETIENNE DE TINEE") AND CP="06660"
SOUNDEX("Saint Etienne de Tinée") AND CP="06660"
SOUNDEX("Levens") AND CP="06670"
SOUNDEX("Touët sur Var") AND CP="06710"
SOUNDEX("ANDON") AND CP="06750"
SOUNDEX("Thorenc") AND CP="06750" 
```

最好/最干净的开始方式是什么？

我知道我可以使用正则表达式在 bash shell 中执行此操作，但我已经在 python 中完成了一个大解析器，它输出这样的行。所以我想用 Python 完成所有这些，这就是为什么我正在寻找一个干净的代码和一些解释，因为我将来可能有很多这样的“过滤器”要做。

[update]`13480`应该始终是数字，如果不是，则应引发异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:14:07.953

试试这个（更复杂）：

```
import re
str = "13480 D'AAA-BBB CCC..."
result = re.search("([\d]+)\s([\w\s\x27\x2E\x2C\x2D]+)",str)

print(result.group(1)) # will print "13480"
print(result.group(2)) # will print "D'AAA-BBB CCC..." 
```

一个超级简单的解决方案：

```
str = "13480 D'AAA-BBB CCC..."
result = str.split(' ',1)

print(result[0]) # will print "13480"
print(result[1]) # will print "D'AAA-BBB CCC..." 
```

现在您必须使用来自 group(1) 和 group(2) 或 result[0] 和 result[1] 的结果来创建 SQL 查询。但我建议您使用参数化查询，而不是简单的字符串操作（以避免 SQL 注入）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T11:04:09.923

```
'SELECT XX FROM YY WHERE SOUNDEX("{1} {2} {3}")=FIELD1 AND CP="{0}"'\
    .format(*'13480 AAA BBB CCC'.split()) 
```

这个单行就可以了，你也可以使用一些[正则表达式](http://docs.python.org/2/library/re.html)。

但这绝对**不是**您想要使用的。正如*Martijn*评论的那样，您*不应该*手动构建 SQL 表达式。在您的 SQL 基础上使用包装器 - [MySQLdb](http://mysql-python.sourceforge.net/MySQLdb.html)或通用[**sqlalchemy**](http://www.sqlalchemy.org/)（最终您将使用后者）

`sqlalchemy`你最终会得到类似的东西：

```
input_id, input_fields = input_line.split(maxsplit=1)
selection = (session.query(YY_Table)
                    .filter(YY_Table.field1=input_fields)
                    .filter(YY_Table.cp=input_id)) 
```

（所有这一切的前提是你编写了一个正确的脚本。如果你编写一个一次性的代码来按摩你的数据库，那么请随意使用`split`RegEx 甚至 VIM 脚本）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T13:30:58.410

您可以简单地在第一个空格上拆分这些行：

```
for line in inputfile:
    code, town = line.strip().split(None, 1) 
```

现在您可以进一步处理此信息。如果你想用它来查询数据库，我*不会*生成 SQL 查询文本。而是使用 SQL 参数：

```
cursor.select('SELECT XX FROM YY WHERE SOUNDEX(?)=FIELD1 AND CP=?', (town, code)) 
```

这有几个优点：

1.  您不必担心如何正确转义参数。这在防止 SQL 注入攻击时很重要，但在处理输入数据可能包含 SQL 特定特殊字符的文件中的任意数据时也很重要。
2.  数据库有机会准备语句，创建一个可重复用于未来查询的查询计划。如果你做很多这样的查询，那会有很大的不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T11:22:39.247

```
# Replace yourdbms with the library of your choice
# Be sure to use the library's tokens (%s, ?, etc.)

import yourdbms

sql = """
    SELECT XX FROM YY 
    WHERE SOUNDEX(%s)=FIELD1 AND
          CP=%s
    """
conx = yourdbms.connect(your_db_info)
cursor = conx.cursor()
with open('path/to/yourfile', 'r') as f:
    for line in f:
        # Get the params without regex
        pos = line.find(' ')
        params = line[pos+1:], int(line[:pos])
        cursor.execute(sql, params)
        do_something_with(cursor)
cursor.close()
conx.close() 
```

# magento - 有没有办法在 Magento 中向 Sales_Order_Grid 添加“邮政编码”？

> ID：15336748
> 
> 赞同：0
> 
> 时间：2013-03-11T10:52:59.023
> 
> 标签：magento, magento-1.7

我正在寻找一种在 magento 1.7 中将运输或计费邮政编码添加到 Sales_Order_Grid 的方法

我尝试了几种不同的方法，但到目前为止，在尝试搜索自定义列时，结果要么导致错误，要么重定向到主仪表板。

我已经创建了一个模块来执行此操作，但是在尝试访问该页面时出现错误：

处理您的请求时出错 出于安全原因，默认情况下禁用异常打印。

错误日志记录号：903668493355

```
 a:5:{i:0;s:92:"SQLSTATE[42S22]: Column not found: 1054 Unknown column 'shipping_postcode' in 'where clause'";i:1;s:6422:"#0 /var/www/mysite.com/htdocs/lib/Varien/Db/Statement/Pdo/Mysql.php(110): Zend_Db_Statement_Pdo->_execute(Array)
#1 /var/www/mysite.com/htdocs/lib/Zend/Db/Statement.php(300): Varien_Db_Statement_Pdo_Mysql->_execute(Array)
#2 /var/www/mysite.com/htdocs/lib/Zend/Db/Adapter/Abstract.php(479): Zend_Db_Statement->execute(Array)
#3 /var/www/mysite.com/htdocs/lib/Zend/Db/Adapter/Pdo/Abstract.php(238): Zend_Db_Adapter_Abstract->query('SELECT COUNT(*)...', Array)
#4 /var/www/mysite.com/htdocs/lib/Varien/Db/Adapter/Pdo/Mysql.php(419): Zend_Db_Adapter_Pdo_Abstract->query('SELECT COUNT(*)...', Array)
#5 /var/www/mysite.com/htdocs/lib/Zend/Db/Adapter/Abstract.php(825): Varien_Db_Adapter_Pdo_Mysql->query(Object(Varien_Db_Select), Array)
#6 /var/www/mysite.com/htdocs/lib/Varien/Data/Collection/Db.php(225): Zend_Db_Adapter_Abstract->fetchOne(Object(Varien_Db_Select), Array)
#7 /var/www/mysite.com/htdocs/lib/Varien/Data/Collection.php(225): Varien_Data_Collection_Db->getSize()
#8 /var/www/mysite.com/htdocs/lib/Varien/Data/Collection.php(211): Varien_Data_Collection->getLastPageNumber()
#9 /var/www/mysite.com/htdocs/lib/Varien/Data/Collection/Db.php(516): Varien_Data_Collection->getCurPage()
#10 /var/www/mysite.com/htdocs/lib/Varien/Data/Collection/Db.php(563): Varien_Data_Collection_Db->_renderLimit()
#11 /var/www/mysite.com/htdocs/app/code/core/Mage/Adminhtml/Block/Widget/Grid.php(533): Varien_Data_Collection_Db->load()
#12 /var/www/mysite.com/htdocs/app/code/core/Mage/Adminhtml/Block/Sales/Order/Grid.php(61): Mage_Adminhtml_Block_Widget_Grid->_prepareCollection()
#13 /var/www/mysite.com/htdocs/app/code/local/Thaneuk/CustomGrid/Block/Adminhtml/Sales/Order/Grid.php(25): Mage_Adminhtml_Block_Sales_Order_Grid->_prepareCollection()
#14 /var/www/mysite.com/htdocs/app/code/core/Mage/Adminhtml/Block/Widget/Grid.php(626): Thaneuk_CustomGrid_Block_Adminhtml_Sales_Order_Grid->_prepareCollection()
#15 /var/www/mysite.com/htdocs/app/code/core/Mage/Adminhtml/Block/Widget/Grid.php(632): Mage_Adminhtml_Block_Widget_Grid->_prepareGrid()
#16 /var/www/mysite.com/htdocs/app/code/core/Mage/Core/Block/Abstract.php(862): Mage_Adminhtml_Block_Widget_Grid->_beforeToHtml()
#17 /var/www/mysite.com/htdocs/app/code/core/Mage/Core/Block/Abstract.php(582): Mage_Core_Block_Abstract->toHtml()
#18 /var/www/mysite.com/htdocs/app/code/core/Mage/Core/Block/Abstract.php(526): Mage_Core_Block_Abstract->_getChildHtml('grid', true)
#19 /var/www/mysite.com/htdocs/app/code/core/Mage/Adminhtml/Block/Widget/Grid/Container.php(77): Mage_Core_Block_Abstract->getChildHtml('grid')
#20 /var/www/mysite.com/htdocs/app/design/adminhtml/default/default/template/widget/grid/container.phtml(36): Mage_Adminhtml_Block_Widget_Grid_Container->getGridHtml()
#21 /var/www/mysite.com/htdocs/app/code/core/Mage/Core/Block/Template.php(241): include('/var/www/uk-dev...')
#22 /var/www/mysite.com/htdocs/app/code/core/Mage/Core/Block/Template.php(272): Mage_Core_Block_Template->fetchView('adminhtml/defau...')
#23 /var/www/mysite.com/htdocs/app/code/core/Mage/Core/Block/Template.php(286): Mage_Core_Block_Template->renderView()
#24 /var/www/mysite.com/htdocs/app/code/core/Mage/Adminhtml/Block/Template.php(81): Mage_Core_Block_Template->_toHtml()
#25 /var/www/mysite.com/htdocs/app/code/core/Mage/Adminhtml/Block/Widget/Container.php(308): Mage_Adminhtml_Block_Template->_toHtml()
#26 /var/www/mysite.com/htdocs/app/code/core/Mage/Core/Block/Abstract.php(863): Mage_Adminhtml_Block_Widget_Container->_toHtml()
#27 /var/www/mysite.com/htdocs/app/code/core/Mage/Core/Block/Text/List.php(43): Mage_Core_Block_Abstract->toHtml()
#28 /var/www/mysite.com/htdocs/app/code/core/Mage/Core/Block/Abstract.php(863): Mage_Core_Block_Text_List->_toHtml()
#29 /var/www/mysite.com/htdocs/app/code/core/Mage/Core/Block/Abstract.php(582): Mage_Core_Block_Abstract->toHtml()
#30 /var/www/mysite.com/htdocs/app/code/core/Mage/Core/Block/Abstract.php(526): Mage_Core_Block_Abstract->_getChildHtml('content', true)
#31 /var/www/mysite.com/htdocs/app/design/adminhtml/default/default/template/page.phtml(74): Mage_Core_Block_Abstract->getChildHtml('content')
#32 /var/www/mysite.com/htdocs/app/code/core/Mage/Core/Block/Template.php(241): include('/var/www/uk-dev...')
#33 /var/www/mysite.com/htdocs/app/code/core/Mage/Core/Block/Template.php(272): Mage_Core_Block_Template->fetchView('adminhtml/defau...')
#34 /var/www/mysite.com/htdocs/app/code/core/Mage/Core/Block/Template.php(286): Mage_Core_Block_Template->renderView()
#35 /var/www/mysite.com/htdocs/app/code/core/Mage/Adminhtml/Block/Template.php(81): Mage_Core_Block_Template->_toHtml()
#36 /var/www/mysite.com/htdocs/app/code/core/Mage/Core/Block/Abstract.php(863): Mage_Adminhtml_Block_Template->_toHtml()
#37 /var/www/mysite.com/htdocs/app/code/core/Mage/Core/Model/Layout.php(555): Mage_Core_Block_Abstract->toHtml()
#38 /var/www/mysite.com/htdocs/app/code/core/Mage/Core/Controller/Varien/Action.php(390): Mage_Core_Model_Layout->getOutput()
#39 /var/www/mysite.com/htdocs/app/code/core/Mage/Adminhtml/controllers/Sales/OrderController.php(95): Mage_Core_Controller_Varien_Action->renderLayout()
#40 /var/www/mysite.com/htdocs/app/code/core/Mage/Core/Controller/Varien/Action.php(419): Mage_Adminhtml_Sales_OrderController->indexAction()
#41 /var/www/mysite.com/htdocs/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('index')
#42 /var/www/mysite.com/htdocs/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#43 /var/www/mysite.com/htdocs/app/code/core/Mage/Core/Model/App.php(354): Mage_Core_Controller_Varien_Front->dispatch()
#44 /var/www/mysite.com/htdocs/app/Mage.php(683): Mage_Core_Model_App->run(Array)
#45 /var/www/mysite.com/htdocs/index.php(87): Mage::run('', 'store')
#46 {main}";s:3:"url";s:29:"/index.php/admin/sales_order/";s:11:"script_name";s:10:"/index.php";s:4:"skin";s:5:"admin";} 
```

任何人都可以帮助我，因为我还需要能够搜索邮政编码列以检索正确的订单数据？！？

```
 <?php
class Thaneuk_CustomGrid_Block_Adminhtml_Sales_Order_Grid extends Mage_Adminhtml_Block_Sales_Order_Grid
{
public function __construct()
    {
        parent::__construct();
        $this->setId('sales_order_grid');
        $this->setUseAjax(true);
        $this->setDefaultSort('created_at');
        $this->setDefaultDir('DESC');
        $this->setSaveParametersInSession(true);
    }

    protected function _getCollectionClass()
    {

        return 'sales/order_grid_collection';
    }

    protected function _prepareCollection()
    {
        $collection = Mage::getResourceModel($this->_getCollectionClass());
        $collection->getSelect()->join('sales_flat_order_address', 'main_table.entity_id = sales_flat_order_address.parent_id AND sales_flat_order_address.address_type =           shipping',array('postcode'));
        $this->setCollection($collection);
        return parent::_prepareCollection();
    }

    protected function _prepareColumns()
    {

        $this->addColumn('real_order_id', array(
            'header'=> Mage::helper('sales')->__('Order #'),
            'width' => '80px',
            'type'  => 'text',
            'index' => 'increment_id',
        ));

        if (!Mage::app()->isSingleStoreMode()) {
            $this->addColumn('store_id', array(
                'header'    => Mage::helper('sales')->__('Purchased From (Store)'),
                'index'     => 'store_id',
                'type'      => 'store',
                'store_view'=> true,
                'display_deleted' => true,
            ));
        }

        $this->addColumn('created_at', array(
            'header' => Mage::helper('sales')->__('Purchased On'),
            'index' => 'created_at',
            'type' => 'datetime',
            'width' => '100px',
        ));

        $this->addColumn('billing_name', array(
            'header' => Mage::helper('sales')->__('Bill to Name'),
            'index' => 'billing_name',
        ));

        $this->addColumn('shipping_name', array(
            'header' => Mage::helper('sales')->__('Ship to Name'),
            'index' => 'shipping_name',
        )); 

        $this->addColumnAfter('shipping_postcode', array(
        'header' => Mage::helper('sales')->__('Shipping Postcode'),
         'filter_index'=>'main_table.postcode',
        'index' => 'shipping_postcode',
        ),'method');

        $this->addColumn('base_grand_total', array(
            'header' => Mage::helper('sales')->__('G.T. (Base)'),
            'index' => 'base_grand_total',
            'type'  => 'currency',
            'currency' => 'base_currency_code',
        ));

        $this->addColumn('grand_total', array(
            'header' => Mage::helper('sales')->__('G.T. (Purchased)'),
            'index' => 'grand_total',
            'type'  => 'currency',
            'currency' => 'order_currency_code',
        ));

        $this->addColumn('status', array(
            'header' => Mage::helper('sales')->__('Status'),
            'index' => 'status',
            'type'  => 'options',
            'width' => '70px',
            'options' => Mage::getSingleton('sales/order_config')->getStatuses(),
        ));

        if (Mage::getSingleton('admin/session')->isAllowed('sales/order/actions/view')) {
            $this->addColumn('action',
                array(
                    'header'    => Mage::helper('sales')->__('Action'),
                    'width'     => '50px',
                    'type'      => 'action',
                    'getter'     => 'getId',
                    'actions'   => array(
                        array(
                            'caption' => Mage::helper('sales')->__('View'),
                            'url'     => array('base'=>'*/sales_order/view'),
                            'field'   => 'order_id'
                        )
                    ),
                    'filter'    => false,
                    'sortable'  => false,
                    'index'     => 'stores',
                    'is_system' => true,
            ));
        }

        $this->addExportType('*/*/exportCsv', Mage::helper('sales')->__('CSV'));
        $this->addExportType('*/*/exportExcel', Mage::helper('sales')->__('Excel XML'));

        return parent::_prepareColumns();
    }

        protected function _prepareMassaction()
    {
        $this->setMassactionIdField('entity_id');
        $this->getMassactionBlock()->setFormFieldName('order_ids');
        $this->getMassactionBlock()->setUseSelectAll(false);

        if (Mage::getSingleton('admin/session')->isAllowed('sales/order/actions/cancel')) {
            $this->getMassactionBlock()->addItem('cancel_order', array(
                 'label'=> Mage::helper('sales')->__('Cancel'),
                 'url'  => $this->getUrl('*/sales_order/massCancel'),
            ));
        }

        if (Mage::getSingleton('admin/session')->isAllowed('sales/order/actions/hold')) {
            $this->getMassactionBlock()->addItem('hold_order', array(
                 'label'=> Mage::helper('sales')->__('Hold'),
                 'url'  => $this->getUrl('*/sales_order/massHold'),
            ));
        }

        if (Mage::getSingleton('admin/session')->isAllowed('sales/order/actions/unhold')) {
            $this->getMassactionBlock()->addItem('unhold_order', array(
                 'label'=> Mage::helper('sales')->__('Unhold'),
                 'url'  => $this->getUrl('*/sales_order/massUnhold'),
            ));
        }

        $this->getMassactionBlock()->addItem('pdfinvoices_order', array(
             'label'=> Mage::helper('sales')->__('Print Invoices'),
             'url'  => $this->getUrl('*/sales_order/pdfinvoices'),
        ));

        $this->getMassactionBlock()->addItem('pdfshipments_order', array(
             'label'=> Mage::helper('sales')->__('Print Packingslips'),
             'url'  => $this->getUrl('*/sales_order/pdfshipments'),
        ));

        $this->getMassactionBlock()->addItem('pdfcreditmemos_order', array(
             'label'=> Mage::helper('sales')->__('Print Credit Memos'),
             'url'  => $this->getUrl('*/sales_order/pdfcreditmemos'),
        ));

        $this->getMassactionBlock()->addItem('pdfdocs_order', array(
             'label'=> Mage::helper('sales')->__('Print All'),
             'url'  => $this->getUrl('*/sales_order/pdfdocs'),
        ));

        $this->getMassactionBlock()->addItem('print_shipping_label', array(
             'label'=> Mage::helper('sales')->__('Print Shipping Labels'),
             'url'  => $this->getUrl('*/sales_order_shipment/massPrintShippingLabel'),
        ));

        return $this;
    }

    public function getRowUrl($row)
    {
        if (Mage::getSingleton('admin/session')->isAllowed('sales/order/actions/view')) {
            return $this->getUrl('*/sales_order/view', array('order_id' => $row->getId()));
        }
        return false;
    }

    public function getGridUrl()
    {
        return $this->getUrl('*/*/grid', array('_current'=>true));
    }

} 
```

帮助总是受到赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-26T11:20:29.790

```
Before return parent::_prepareCollection(); You should create a join:
$collection->getSelect()->joinLeft(array('billing'=>'sales_flat_order_address'),
    'main_table.entity_id = billing.parent_id AND billing.address_type="billing"',array('billing.postcode AS bp'));
And in the method _prepareColumns paste:
$this->addColumn('bp', array(
        'header' => Mage::helper('sales')->__('Billing Postcode'),
        'index' => 'bp',
        'width' => '60px',
        'filter_index'  => 'billing.postcode'
    )); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T11:31:36.640

sales_flat_order_address 中该字段的正确名称`postcode`不是`'shipping_postcode'`。（检查 Magento CE 1.7）。

您可能还想添加`address_type = 'shipping'`WHERE 子句，以从运输中获取邮政编码，而不是从计费中获取。

修正你的`_prepareCollection()`方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T11:29:14.410

如果您在 where 子句错误中得到 Unknown 列，请尝试此代码

```
 $this->addColumnAfter('shipping_postcode', array(
        'header' => Mage::helper('sales')->__('Shipping Postcode'),
         'filter_index'=>'main_table.postcode',
        'index' => 'shipping_postcode',
    ),'method'); 
```

在您的网格列代码中给出**filter_index参数。**它解决了你的问题。

# android - 检测正在进行的活动的 BroadcastReceiver 类

> ID：15336765
> 
> 赞同：0
> 
> 时间：2013-03-11T10:53:55.920
> 
> 标签：android, android-broadcast

很抱歉，我知道当我们将`BroadcastReceiver`s 与活动生命周期混合时，我们会导致大脑出现很多错误和故障。我需要帮助我的大脑停止，我的问题很简单。

有没有办法让`BroadcastReceiver`类检测活动进行的`onPause()`方法？如果是，那么该课程将如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:09:59.557

在您的活动中，我唯一能想到的就是向您的一个接收者发送服装广播意图。

例如：

行动：

```
 public static final String CUSTOM_INTENT = "example.com.intent.action.ActivityGoingOnPause"; 
```

暂停活动：

```
 protected void onPause() {
     Intent i = new Intent();
     i.setAction(CUSTOM_INTENT);
     context.sendBroadcast(i);
  } 
```

显现：

```
 <receiver android:name=".YourReceiver" android:enabled="true">  
        <intent-filter>
            <action android:name="example.com.intent.action.ActivityGoingOnPause"></action>
        </intent-filter>
    </receiver> 
```

接收者：

```
 public class YourReceiver extends BroadcastReceiver {
     @Override
     public void onReceive(Context context, Intent intent) {
        if (intent.getAction().equals(YourActivity.CUSTOM_INTENT)) {
          //do your thing
        }
     }
 } 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:08:56.030

在 onPause 中设置一个全局变量，如 isActivityPaused，并在活动的 onResume 中取消设置，然后检查该变量并决定是否发送广播。

# python - 使用 Python 的 MySQL 未读结果

> ID：15336767
> 
> 赞同：12
> 
> 时间：2013-03-11T10:54:00.873
> 
> 标签：python, mysql

我使用 mysql.connector 进行 SQL 操作。我有一个简短的脚本，它在光标上执行以下操作（字符串）`cursor.execute(...)`：

```
"use {}".format(db)

"show tables"

command = """
ALTER TABLE Object DROP PRIMARY KEY;
ALTER TABLE Object ADD `id` bigint(20) NOT NULL PRIMARY KEY AUTO_INCREMENT FIRST;
ALTER TABLE Object ADD INDEX (`uid`);""" 
```

该脚本遍历多个数据库`db`。

问题是在某些时候我收到“未读结果”错误。似乎当我运行脚本时，在某些时候“使用 mydb”会返回一个结果（cursor._have_result=True），而我没想到会这样。奇怪的是，如果我重新运行完整的脚本，它会运行更长的时间，更多的数据库稍后会给出相同的错误。

您能提出解决或调查此问题的方法吗？我可以做些什么来防止“未读结果”吗？

PS：当我重新运行脚本时，已经完成的数据库的 ALTER 命令失败。不确定这是否会导致问题。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-06-24T05:09:35.687

使用 MySQL Connector/Python，当你在不同的地方使用连接对象而不读取结果时，可能会出现*Unread结果。*这不是一个可以绕过的东西。您可以使用[*缓冲*选项](https://dev.mysql.com/doc/connector-python/en/connector-python-connectargs.html)立即读取结果。

正如评论中提到的，最好将语句拆分并单独执行。

如果要执行多个语句，则需要对[MySQLCursor.execute()方法使用](http://dev.mysql.com/doc/connector-python/en/myconnpy_MySQLCursor_execute.html)[*multi=True*](http://dev.mysql.com/doc/connector-python/en/myconnpy_MySQLCursor_execute.html)选项（从 Connector/Python v1.0.4 开始）。实际上，如果您不使用*multi*选项并发送多个语句，则会引发 InterfaceError。（我也怀疑这里有一个错误..）

补充说明：

*   [您可以使用 MySQLConnection.database 属性](http://dev.mysql.com/doc/refman/5.6/en/connector-python-apiref-MySQLConnection.html#myconnpy_MySQLConnection_database)，而不是执行 USE 命令来更改数据库。
*   您最好将更改分组到一个 ALTER TABLE 语句中，如下所示：

    ALTER TABLE t1 DROP PRIMARY KEY, ADD id INT NOT NULL AUTO_INCREMENT KEY FIRST, ADD INDEX(c1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-02-23T11:02:44.557

你必须通过`buffered = true`你的光标。阅读更多官方[文档](https://dev.mysql.com/doc/connector-python/en/connector-python-tutorial-cursorbuffered.html)

```
cursor = conn.cursor(buffered=True) 
```

# android - 使用 ScrollView 滚动 ImageView

> ID：15336768
> 
> 赞同：1
> 
> 时间：2013-03-11T10:54:02.923
> 
> 标签：android, android-layout

我正在尝试创建一个包含一个长图像的布局，该图像只能垂直滚动。

即 - 它应该拉伸到整个屏幕宽度并拉伸到整个高度。

我的布局是这样做的，但它会在图像前后产生奇怪的间隙。每个间隙大约占屏幕的 2/3，并且可以向下滚动。

如何消除间隙以便仅`ImageView`出现在屏幕上？

我的活动 XML 是这样的：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_marginTop="0dp" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="0dp"
        tools:context=".HelpActivity" >

        <ImageView
            android:id="@+id/imageHelp"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="0dp"
            android:src="@drawable/tutorial_with_text" />
    </LinearLayout>

</ScrollView> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T10:55:41.453

找到解决方案：供将来参考：

在 ImageView 上使用 android:adjustViewBounds="true"

# java - 默认包的 JUnit 测试用例

> ID：15336769
> 
> 赞同：0
> 
> 时间：2013-03-11T10:54:11.160
> 
> 标签：java, eclipse, unit-testing, junit, package

我对 Eclipse 和 Java 非常陌生，并且正在研究具有以下结构的 java 项目

```
Src_folder
    --default package 
    |  --src (main )
    --package1
    |  --src1
    --package2
       --src2 
```

我想为每个类添加一个 JUnit 测试用例。我想为测试用例创建以下结构：

```
test_folder
    --default package 
    |  --src_test (main )
    --package1
    |  --src1_test
    --package2
       --src2_test 
```

我的问题是，在为类 in 创建测试用例时，我为默认包命名包是什么`src`？将默认包与 main 函数一起使用是一种标准做法，还是将默认包重命名为指示`entry`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:55:55.220

强烈建议不要使用默认包。如果您尝试使用默认包，即使 Eclipse 也会提示您。
默认包表示开发者懒得添加一行包声明，其他什么都没有。
[什么是默认包？](http://www.xyzws.com/Javafaq/what-is-the-default-package/126)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:59:21.300

```
src
   --some_package
     --some source files
   --package2
     --some other source files

testsrc
   --some_package
     ... same structure as src folder 
```

这是遵循的标准做法。

[**并且非常不鼓励使用默认包**](https://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDAQFjAA&url=http://www.coderanch.com/t/512937/java/java/default-package-discouraged-worry&ei=drk9UauPDYKrrAe8rYGQBw&usg=AFQjCNHYeZ4f0-hCVjPRkT0Dezu8rBIfUg&sig2=jgCiiSfQ5kuHZuVNyAycDA)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T11:02:46.007

不鼓励使用默认包，因为您无法从中导入任何内容。在您的情况下，它只是一个主要方法，所以不是很关心，但至少给它一个包名仍然更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T11:06:48.847

测试用例应该与他们测试的类在同一个包中。这是访问默认可见性修饰符所必需的，该修饰符仅在包中可见并减少导入。所以不要为测试创建新包，将类分开放在一个自己的文件夹中就足够了，正如大家所说：你不应该使用默认包。如果允许您更改此设置，请执行此操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T11:03:30.280

我建议使用 maven 或类似工具来获得标准的目录布局。然后，您可以从中生成 eclipse 项目文件。

[http://www.mkyong.com/maven/how-to-convert-maven-java-project-to-support-eclipse-ide/](http://www.mkyong.com/maven/how-to-convert-maven-java-project-to-support-eclipse-ide/)

# python - 在 Flask 中使用具有不同绑定的相同名称的表

> ID：15336778
> 
> 赞同：9
> 
> 时间：2013-03-11T10:54:57.323
> 
> 标签：python, flask, sqlalchemy, flask-sqlalchemy

我有两个共享相同名称但位于不同数据库中的表：

```
class Lcn(db.Model):
    __tablename__ = 'lcn'

class LcnRemote(db.Model):
    __bind_key__ = 'remote'
    __tablename__ = 'lcn' 
```

似乎 SQLAlchemy 不喜欢那样。它说：

> sqlalchemy.exc.InvalidRequestError：已经为此 MetaData 实例定义了表“lcn”。指定 'extend_existing=True' 以重新定义现有 Table 对象上的选项和列。

有没有办法解决这个问题而不必重命名我的一个表？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-12T11:04:24.033

为具有相同名称的不同数据库使用单独的[声明性基类](https://stackoverflow.com/questions/8264686/sqlalchemy-multiple-databases-with-same-table-names-not-working)，以防止共享 SQLAlchemy 元数据。您必须创建两个`flask_sqlalchemy.SQLAlchemy()`实例：

```
app = Flask(__name__)
app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:////tmp/database1.db'
app.config['SQLALCHEMY_BINDS'] = {'remote': 'sqlite:////tmp/database1.db'}

db1 = SQLAlchemy(app)

class Lcn(db1.Model):
    __tablename__ = 'lcn'

db2 = SQLAlchemy(app)

class LcnRemote(db2.Model):
    __bind_key__ = 'remote'
    __tablename__ = 'lcn' 
```

这是 Flask-SQLAlchemy 的一个限制，它确实应该允许您为每个绑定创建声明性基础。目前该类的设计方式将`SQLAlchemy()`其限制在*一个*这样的基础上；`db.Model`它通过它在开始时生成的类代理各种 SQLAlchemy 元数据调用。通过创建您的*两个*实例来`flask_sqlalchemy.SQLAlchemy()`解决此问题。

# javascript - FileReader 返回“未定义”。为什么？

> ID：15336779
> 
> 赞同：0
> 
> 时间：2013-03-11T10:54:58.337
> 
> 标签：javascript, html, audio, html5-audio

谁能弄清楚为什么 FileReader 对象的这个声明返回未定义？

```
console.log("this is f " + f); 
```

控制台.log(f);

```
var reader = new FileReader(); 
var ref = reader.readAsArrayBuffer(f);
console.log(ref);
console.log("the reader object is " + reader.length);//why does reader not have a length       property? 
```

这是我的 jsFiddle：http: [//jsfiddle.net/trkkazulu/6bV63/](http://jsfiddle.net/trkkazulu/6bV63/)

谢谢，

J·威尔斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T10:57:02.403

[`FileReader`没有财产。*_* `length`](http://www.w3.org/TR/FileAPI/#dfn-filereader)你可能想要[`Blob#size`](http://www.w3.org/TR/FileAPI/#dfn-size)（`File` ——你`f`是一个`File`实例——继承自`Blob`）。

[这是](https://stackoverflow.com/questions/4152365/how-to-know-the-size-of-the-image-to-be-uploaded-with-javascript/4152398#4152398)我不久前使用 File API 显示文件大小的 SO 答案的链接，如果这是您想要获得的。

# android - 服务被破坏后的共享偏好

> ID：15336784
> 
> 赞同：2
> 
> 时间：2013-03-11T10:55:12.927
> 
> 标签：android, service, sharedpreferences

我有一个查询。在服务中，共享首选项存储该值。如果服务被破坏/杀死，值也会被破坏。我正在尝试创建一个示例并显式调用finish()，该finish() 进一步调用destroy()。再次重新打开我的应用程序后。我能够取回我之前存储的值。它是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:56:24.383

除非您不清除应用程序中的数据，否则它不会破坏。

但请确保您`commit`拥有`sharedPreferences`.

是的，您可以在`sharedPreferences`再次打开应用程序后获取存储的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:56:47.917

除非您清除应用程序的数据，否则任何价值都不会被破坏

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T10:58:08.750

是的，您可以取回该值，但如果您卸载该应用程序，则共享首选项存储的值将被销毁。

谢谢

# jasper-reports - IReport 中的乘法变量

> ID：15336787
> 
> 赞同：-1
> 
> 时间：2013-03-11T10:55:24.590
> 
> 标签：jasper-reports, ireport

我需要在**IReport** 中创建一个将两个值相乘的变量。我想知道在创建变量时我可以在计算列中给出什么？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:09:43.647

.50 - 是$V{Fsum}* .50f的双重替换表达式

# optimization - 执行的指令数怎么会大于发出的指令数？

> ID：15336788
> 
> 赞同：2
> 
> 时间：2013-03-11T10:55:27.507
> 
> 标签：optimization, cuda, profiling

[如果像包括这个](http://developer.download.nvidia.com/CUDA/training/Inst_limited_kernels_Oct2011.pdf)在内的几个在线资源都有，执行的指令数+重播数=发出的指令数，如果重播数为正，那么一个CUDA内核如何具有以下属性（来自nvprof)?

```
Invocations       Avg       Min       Max       Event Name
1                 69161760  69161760  69161760  inst_executed
1                 37263115  37263115  37263115  inst_issued1
1                 19130919  19130919  19130919  inst_issued2

(inst_issued = inst_issued1 + inst_issued2 = 37263115 + 19130919; ratio = inst_executed/inst_issued > 1). 
```

是

```
inst_issued = inst_issued1 + inst_issued2 
```

发出指令总数的正确公式？除了 *issued1 和 *issued2 之外，还有内核发布的指令吗？如果是这样，如何对其进行分析？

在网上，我没有看到任何明显的问题答案。例如，我的 nvprof --query-events 版本只产生上述三个参数作为 --events 的可能参数。在 CUDA 编程文档、上面的链接或我读过的与 CUDA 指令优化相关的其他十个左右的链接中似乎也没有提到这一点。

附加信息：

0) 我正在运行 CUDA 5.0，并使用 nvcc -m64 -arch=sm_30 进行编译。

1）我正在运行我的内核的仅数学版本，并且由于它没有寄存器压力，因此全局内存访问的数量可以忽略不计。

2) 我无法访问 nVidia 视觉分析器，所以我不确定它是否会给我与上述不同的答案。

非常感谢，如果这很愚蠢，请提前道歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T13:13:55.313

inst_issue2 是发出 2 条指令的问题槽数。

inst_issued1：每个周期发出的单条指令数

inst_issued2：每个周期发出的双指令数

发出的总指令的公式为：

```
inst_issued = (inst_issued2 * 2) + inst_issued1 
```

使用问题中的数字给出：

```
inst_issued = (inst_issued2 * 2) + inst_issued1
            = (19130919 * 2) + 37263115
            = 75524953
ratio = inst_executed / inst_issued
      = 69161760 / 75524953
      = .916 
```

# iphone - 如何以英寸或 UIImage 分辨率获取 UIImage 大小？

> ID：15336789
> 
> 赞同：1
> 
> 时间：2013-03-11T10:55:28.753
> 
> 标签：iphone, ios, uiimage, size, resolution

我想压缩我的图像并上传到服务器。这种压缩应该取决于图像大小。或者，如果我们在 iPhone 中有任何 API 来获取图像分辨率，这样我就可以根据这个分辨率设置压缩率。

谢谢吉腾

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:26:26.067

iOS SDK 中没有任何内容可以从给定像素为您提供以英寸为单位的图像大小，一种选择是[确定您的应用程序在哪个设备上运行](https://stackoverflow.com/questions/3272752/detect-retina-screen-iphone-4-in-iphone-sdk)，然后[为您的图像对象计算以英寸为单位的大小](https://stackoverflow.com/questions/610193/calculating-pixel-size-on-an-iphone)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T10:57:17.677

您可以通过`image.size.width`和`image.size.height`...获得以磅为单位的大小

要获得以像素为单位的值，请将它们乘以`image.scale`. 要获得以英寸为单位的尺寸，您可以将它们相乘`1/264.0`（根据[Wikipedia](http://en.wikipedia.org/wiki/List_of_displays_by_pixel_density#Apple)）...

# javascript - 当值与空集之前的先前值相同时，Backbone.js 更改事件不会触发

> ID：15336801
> 
> 赞同：1
> 
> 时间：2013-03-11T10:56:08.347
> 
> 标签：javascript, backbone.js

1）将模型数据设置为一个值`model.set({state : 'wa'})`

2）设置模型数据为null`model.set({state : null})`

3）将模型数据设置为第一个值`model.set({state : 'wa'})`

当您在将模型数据设置为 null 之前将其设置为之前的值时，不会触发 change 事件。如果我将示例更改为`model.set({state : 'ca'})`在步骤 1 中显示，它将触发所有三个集合的更改事件。在此示例中，仅针对第 1 步和第 2 步触发了两个更改事件。

为什么将值设置为 null 之前的前一个值时，骨干网不会触发事件？

# 附言

我刚刚检查了`model.previousAttrbutes()`将值设置为null时是否可能没有更新。确实如此。因此，为什么不触发更改事件仍然没有意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:29:48.633

为了解决这个问题，我只是使用`unset()`

```
model.unset('state',{silent: true}); 
```

# php - ZF2 使用注解定义单选按钮

> ID：15336802
> 
> 赞同：1
> 
> 时间：2013-03-11T10:56:13.923
> 
> 标签：php, annotations, zend-framework2

是否可以使用 Zend\Form\Annotation 功能来创建单选按钮？

我现在正在尝试这个：

```
/**
 * @Annotation\Type("Zend\Form\Element\Radio")
 * @Annotation\Options({"label":"Status"})
 */
public $status; 
```

但我不知道如何通过注释传递单选按钮选项。

有任何想法吗？普通文本输入工作正常，即：

```
/**
 * @Annotation\Filter({"name":"StringTrim"})
 * @Annotation\Type("Zend\Form\Element\Textarea")
 * @Annotation\Options({"label":"Description"})
 */
public $description; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:17:53.137

很容易：

```
/**
 * @Annotation\Type("Zend\Form\Element\Radio")
 * @Annotation\Options({"label":"Status"})
 * @Annotation\Attributes({"options":{"1":"Enabled","2":"Disabled"}})
 * @Annotation\Required(true)
 */
public $status; 
```

# facebook - 视窗电话 | Facebook 集成与添加帐户选项

> ID：15336808
> 
> 赞同：0
> 
> 时间：2013-03-11T10:56:30.653
> 
> 标签：facebook, windows-phone-7

我正在将 facebook API 与 Facebook.dll 集成。如果我已经在我的 Windows Phone 中添加了帐户，我希望在我的应用程序中为 facebook 自动登录。“添加帐户”选项在电话设置中可用。因此，当用户已经添加了 facebook 帐户时，我不希望用户登录我的应用程序。我怎样才能做到这一点？？？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:21:45.777

不幸的是，当前的 Windows Phone SDK 无法做到这一点。
第三方应用程序无权访问帐户信息（我想是出于隐私原因）。

# java - 使用命令行执行类的异常

> ID：15336813
> 
> 赞同：0
> 
> 时间：2013-03-11T10:56:48.400
> 
> 标签：java, swing

我的以下代码在从 NetBeans IDE 运行时运行良好

```
 public Selector() {
        try {

            if (count == 0) {
                initComponents();
                count++;
                ims.CPool.configureConnPool();
                fillTable();
                setResizable(false);
                Dimension Size = Toolkit.getDefaultToolkit().getScreenSize();
                setLocation(new Double((Size.getWidth() / 2) - (getWidth() / 2)).intValue(), new Double((Size.getHeight() / 2) - (getHeight() / 2)).intValue());
                jTable1.addMouseListener(this);
                img = ImageIO.read(Selector.class.getResource("/ims/Icons/login.png"));
                sci = img.getScaledInstance(jLabel3.getWidth(), jLabel3.getHeight(), java.awt.Image.SCALE_SMOOTH);
                ImageIcon newIconImage = new javax.swing.ImageIcon(sci);

                jLabel3.setIcon(newIconImage);

            } else {
                throw new myExc("Only one instance of the application is allowed to run at a time !");
            }
        } catch (HeadlessException | IOException | myExc x) {
            x.printStackTrace();
            JOptionPane.showMessageDialog(null,x.getMessage());
        }
    } 
```

每当我尝试启动具有上述构造函数的类时，都会出现如下所示的异常

```
Exception in thread "AWT-EventQueue-0" java.lang.IllegalArgumentException: input
 == null!
        at javax.imageio.ImageIO.read(Unknown Source)
        at ims.init.Selector.<init>(Selector.java:60)
        at ims.init.Selector$8.run(Selector.java:502)
        at java.awt.event.InvocationEvent.dispatch(Unknown Source)
        at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
        at java.awt.EventQueue.access$000(Unknown Source)
        at java.awt.EventQueue$3.run(Unknown Source)
        at java.awt.EventQueue$3.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Sour
ce)
        at java.awt.EventQueue.dispatchEvent(Unknown Source)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.run(Unknown Source) 
```

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:12:04.053

检查`getResource()`调用返回的内容

```
img = ImageIO.read(Selector.class.getResource("/ims/Icons/login.png")); 
```

可能是路径不正确“ims”但可能是“imgs”

# django - 基于 Django-Tastypie 构建的自文档 API

> ID：15336814
> 
> 赞同：6
> 
> 时间：2013-03-11T10:56:48.813
> 
> 标签：django, api, documentation, tastypie

我正在使用 django-tastypie，我对此非常满意。但我真的很想从 Django Rest Framework 中获得自我记录 api 功能。

有哪些解决方案（或人们构建了）来获得 Django Rest Framework 的这种自动生成的文档，但来自基于 TastyPie 的 API？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T20:24:26.013

我自己没有机会使用它，但 django-tastypie-swagger 看起来很有希望（[https://github.com/concentricsky/django-tastypie-swagger/](https://github.com/concentricsky/django-tastypie-swagger/)）。Swagger 本身是 API 文档 ( [https://developers.helloreverb.com/swagger/](https://developers.helloreverb.com/swagger/) ) 的绝佳选择。

# spring - Spring 中基于 Groovy 的 BDD

> ID：15336816
> 
> 赞同：1
> 
> 时间：2013-03-11T10:56:55.867
> 
> 标签：spring, groovy, osgi, bdd

我们正计划构建一个基于 spring 的系统，并且我们想使用一个基于 groovy 的 BDD 框架。该系统也是基于 OSGi 的。

有什么关于一个好的 BDD 框架的建议，它也适合 Spring 的 STS eclipse。？

在这样的环境中，您将如何使用模拟？OSGi 需要模拟很多外部依赖项。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:55:52.670

[Spock 测试框架](http://docs.spockframework.org/en/latest/ "Spock 测试框架")是一个基于 Groovy 的强大的受 BDD 启发的测试框架。它有很多功能，可能正是您想要的。

不要被低版本号（当前版本是 0.7）吓到，它已经稳定并准备好生产很长时间了。我已经使用它至少几年来测试 Java、Groovy、Griffon 和 Grails 项目——并且不会梦想回去......

它建立在 JUnit 之上，将在 JUnit 运行的每个环境中运行（至少我知道）。它作为普通的 JUnit 测试在 Eclipse 和 IntelliJ IDEA 中运行。

`expect:`一个非常简单的例子（注意：后面的注释`where:`等是可选的）：

```
import spock.lang.Specification

class SpockExampleSpecification extends Specification {

    def "a String should return correct length"() {
        expect: "correct length"
        myString.length() == length

        where: "different strings have different lengths"
        myString    | length
        "hello"     | 5
        "abc"       | 3
        ""          | 0
    }

    def """show a string mock that could be injected into a class;
           using groovy metaClass, spring injection or any other means"""() {

        given: "a mock for char sequence, injected into DoubleLength"
        def mock = Mock(CharSequence)
        def dsl = new DoubleLength(myString: mock)

        when: "accessing lengths from this mock"
        def doubleLength = dsl.length()

        then: """mock value should be used and we should
                 get the expected interactions with the mock"""
        1 * mock.length() >> 1234
        doubleLength == 2468
    }

} 
```

* * *

```
class DoubleLength {
    def myString

    def length() {
        2 * myString.length()
    }
} 
```

# sugarcrm - SugarCRM CE 6.5.11 详细视图损坏

> ID：15336817
> 
> 赞同：1
> 
> 时间：2013-03-11T10:56:57.027
> 
> 标签：sugarcrm, suitecrm

我们正在使用 SugarCRM CE 6.5.11。我们在联系人和客户模块中创建了自定义字段并导入了一些数据。现在我们无法访问任何这些模块的详细视图。

例如，我们可以创建一个新的潜在客户，创建后，详细信息视图会照常显示。

但是，一旦我们返回潜在客户列表视图并单击新潜在客户以查看详细信息视图，我们什么也得不到。我们只能看到顶部菜单和 SugarCRM 页脚。在 Internet Explorer 中，它显示“null”。

![详细视图 null](../Images/392b54243d01196b80a05b4796bb4c9e.png)

客户、潜在客户和联系人中的任何详细信息视图都会发生这种情况。我们可以创建新的并查看列表，但无法访问详细视图。我们还尝试从修复菜单中进行快速修复，但没有成功。

有什么想法可以打破吗？

# visual-studio-2010 - 以编程方式为三态工作流实例设置关联数据 (sharepoint 2010)

> ID：15336823
> 
> 赞同：1
> 
> 时间：2013-03-11T10:57:18.063
> 
> 标签：visual-studio-2010, sharepoint-2010

我想以编程方式为三态工作流实例设置关联数据。我想通过 Visual Studio 使用 C# 代码使用功能接收器（激活时）来执行此操作。

这可能吗 ？任何代码示例？

# c# - 为什么在调试时某些字段“丢失”？

> ID：15336824
> 
> 赞同：1
> 
> 时间：2013-03-11T10:57:18.410
> 
> 标签：c#, .net, debugging, youtube-api

如果我写：

```
IList<Video> videoContainer = videos.ToList();
DateTime theData = videoContainer.First().YouTubeEntry.Published; 
```

代码完美运行。但是，如果我进入调试模式并分析 videoContainer 扩展字段，则看不到该字段`Published`。

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:05:51.227

当您首先抓住感兴趣的项目时，它会更容易

```
IList<Video> videoContainer = videos.ToList();
var entry = videoContainer.First().YouTubeEntry;  // debug 'entry'
DateTime theData = entry.Published; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:11:33.957

只是一个快速的猜测，也许你的构建配置设置有问题。您可以在 Visual Studio 菜单中查看当前设置：Build->Configuration Manager。

只是为了确保，在进行测试之前执行 Build->Batch Build。如果您使用的是 ASP.Net，请确保您使用的 Web（IIS 中的虚拟文件夹和站点链接）已经引用了最新代码。这只是为了确保您的测试项目是最新的。

# jquery - 从 jQuery Promise 对象返回数据

> ID：15336825
> 
> 赞同：1
> 
> 时间：2013-03-11T10:57:19.720
> 
> 标签：jquery, getjson, promise

我正在使用`$.getJSON()`并尝试使用以下各种代码返回数据：

```
 var changeUserPage = function (id) {
       return repository.getUserPage(id).done(function (data) {            
           // console.log(data)
       })
 } 
```

问题是，虽然在 done 函数中，我可以看到我想要的正确数据，但我无法将它返回给我的调用函数，例如：

```
 var data = dataContext.changeUserPage(lastPolicyWorkedOn); 
```

data current 持有 promise 对象：

```
Object {readyState: 1, setRequestHeader: function, getAllResponseHeaders: function, getResponseHeader: function, overrideMimeType: function…} 
```

编辑

getJSON 方法如下所示：

```
var getUserPage = function (policyId) {
       policyId = encodeURIComponent(policyId);

       var uri = "http://localhost:54997/api/policy/getUserPage/" + policyId;
       return $.getJSON(uri);         
} 
```

如何最好地返回实际的 json 数据？

谢谢

戴维

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:15:03.720

无法`changeUserPage`返回数据，因为数据是使用`async`方法获取的`$.getJSON`。

改变

```
var data = dataContext.changeUserPage(lastPolicyWorkedOn); 
```

至

```
dataContext.changeUserPage(lastPolicyWorkedOn).done(function(data){
    //do something with data
}); 
```

# java - 在 CXF 中使用 wsdl2java 生成 Web 服务服务器实现

> ID：15336831
> 
> 赞同：1
> 
> 时间：2013-03-11T10:57:33.423
> 
> 标签：java, web-services, cxf, wsdl2java

****背景 ：****

 **我以前有使用 Apache CXF Web 服务的经验，但我对使用 Apache CXF 发行版附带的 wsdl2java 工具生成服务端点接口 (SEI) 和服务实现有点陌生。

**任务 ：**

我目前正在实现将由外部系统使用的基于 SOAP 的 Web 服务。我已经定义了消息 (XSD) 和 WSDL 文件。我尝试使用 Apache CXF 的 wsdl2java 工具生成 SEI。SEI 使用 JAXB 类型作为输入参数正确生成，并将类型返回给 Web 服务方法。

当我查看为服务实现类生成的代码时，我发现它扩展了 javax.xml.ws.Service 类。此外，还会生成许多与服务端点接口中的方法同名的重载方法，并在方法名称后附加“Soap12Http”。其中一些方法采用 WebServiceFeature... 类型的参数，而其他方法则不采用任何参数。例子 ：

```
public class Query extends Service {

        @WebEndpoint(name = "product_query-soap12-http")
    public IQuery getProductsSoap12Http(WebServiceFeature... features) {
        return super.getPort(getProductsSoap12Http, IQuery.class,features);
    }
} 
```

*其中 IQuery 是服务端点接口

**问题 ：**

1.  我期待服务实现类实现服务端点接口，而不是扩展 javax.xml.ws.Service。这是一个有效的期望吗？
2.  我期待服务实现类从服务端点接口实现方法。这是一个有效的期望吗？
3.  我还想知道是否可以要求 wsdl2java 命令为 JAXB POJOS 生成 jar，而不是将它们生成为类文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:06:57.723

对于 1 和 2，答案是否定的。生成的 XXXXService 类几乎是 WSDL 中各种 SEI 代理的工厂。wsdl 中的每个端点/绑定/端口类型组合都应导致对服务对象进行一系列“getXYZPort(...)”调用，以返回该特定 SEI 的实例。

对于 3，上周在 cxf 的工具中添加了一个 -clientjar 选项（尚未发布，需要最新的快照），这可能接近所需的内容。**

# ruby-on-rails - 如何为 Rails 选择轻量级 Gems？

> ID：15336837
> 
> 赞同：1
> 
> 时间：2013-03-11T10:57:55.903
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我是 Rails 新手，在为我的应用程序选择正确的 gem 时遇到问题。例如，现在我需要一个 gem 来为链接制作 slug。我在这里找到了很多[https://www.ruby-toolbox.com](https://www.ruby-toolbox.com)。但最受欢迎的宝石正在做我永远不会使用的 +10 件事。所有最受欢迎的宝石都会发生这种情况。

有没有一种聪明的方法来为 Rails 选择轻量级 Gems？也许有一种方法可以查看 github 中的 Gem 有多少代码？或者有多少个文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T11:06:57.090

就我个人而言，我想知道如果 gem 仅具有有限的功能，是否真的需要 gem。为什么不自己为链接构建 slug？几乎不值得使用宝石。

另一方面，通常您可以随意自定义宝石。例如，设计包含许多您可能不需要的功能。在这个 gem 中，您可以简单地选择只使用您实际需要的部分。此外，您可以自定义所有您想要的。

检查流行 gem 的 github 可能是重要的第一步。它可以让您深入了解 gem 的实际作用以及它包含的代码。如果它对你的口味来说太大了，你甚至可以考虑只使用提供的代码的一部分。例如，您可以复制粘贴 github 代码（而不需要 gemfile 中的 gem）并注释掉与您的情况无关的代码，尽管我个人不建议这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T14:07:28.033

这是一个非常好的选择宝石的指南：[Exploring RubyGems](http://railscasts.com/episodes/384-exploring-rubygems)

以下是 Ryan 建议在 gem 中计算行数的方法：

1.  克隆宝石回购
2.  使用 cloc 命令计算行数

例子：

```
$ git clone https://github.com/plataformatec/devise.git
$ cloc app lib
      87 text files.
      86 unique files.                              
      23 files ignored.

http://cloc.sourceforge.net v 1.56  T=1.0 s (64.0 files/s, 5294.0 lines/s)
-------------------------------------------------------------------------------
Language                     files          blank        comment           code
-------------------------------------------------------------------------------
Ruby                            64            762           1513           3019
-------------------------------------------------------------------------------
SUM:                            64            762           1513           3019
------------------------------------------------------------------------------- 
```

您还可以检查`test`或`spec`目录中的行数以检查测试覆盖率。

# php - 具有动态 php 值的 jQueryUI 滑块

> ID：15336838
> 
> 赞同：0
> 
> 时间：2013-03-11T10:57:56.637
> 
> 标签：php, mysql, jquery-ui, slider

我有一个滑块，我想显示来自 MySQL 数据库的 2 个值之间的差异，到目前为止我所拥有的似乎有点偏离，这是我的代码。

PHP代码：

```
$warOffenderRespect = $r['warOffenderRespect'];
$warDefenderRespect = $r['warDefenderRespect'];

$totalrespect=$warOffenderRespect+$warDefenderRespect;

$percentage=round($warDefenderRespect/$totalrespect*100);

if($warDefenderRespect>$warOffenderRespect)
{
    $max = $warDefenderRespect;
    $value = $warOffenderRespect;
    $range='max';
}
else
{
    $max = $warOffenderRespect; 
    $value = $warDefenderRespect;
    $range='min';
} 
```

JS代码：

```
$(function() {
$( "#slider-range<?php echo $slidercnt; ?>" ).slider({
  range: "<?php echo $range; ?>",
  value: <?php echo $value; ?>,
  min: 0,
  max: <?php echo $max; ?>,
  /*
  slide: function( event, ui ) {
    $( "#amount" ).val( "$" + ui.value );
  }
  */
});
$('#slider-range<?php echo $slidercnt; ?>').unbind('mousedown');

}); 
```

HTML 代码：

```
<div id="slider-range<?php echo $slidercnt; ?>" style='width:200px;'></div> 
```

滑块正在显示，但准确性似乎下降了很多。

# ruby - 从 Ruby 中的排序数组创建嵌套哈希——递归 group_by

> ID：15336841
> 
> 赞同：6
> 
> 时间：2013-03-11T10:58:09.243
> 
> 标签：ruby

我有一组对象，这些对象已根据这些对象的几个属性进行了排序。按优先级顺序，这些属性`foo`是`bar`和`baz`。这意味着对象首先按`foo`;排序 然后具有相同`foo`值的子序列按`bar`; 然后那些具有相同`foo`和`bar`值的按 排序`baz`。

我想将其转换为反映此分组的嵌套哈希。基本上我正在寻找一个递归的`Enumerable#group_by`. 键是`foo`、`bar`和`baz`;的值 这些值可以是对象的子哈希或数组。这是一个例子：

```
[obj1, obj2, ... objn].group_by_recursive(:foo, :bar, :baz)
#=> {
      foo_val_1 => {
        bar_val_1 => {
          baz_val_1 => [
            obj1,
            obj2,
            obj3
          ],
          baz_val_2 => [
            obj4,
            obj5
          ]
        },
        bar_val_2 => {
          baz_val_1 => [
            obj6,
            obj7
          ],
          baz_val_2 => [
            obj8
          ]
        },
      },
      foo_val_2 => {
        ...
      },
      ...
    } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-11T11:47:04.133

想出了一个很好的解决方案。像这样的猴子补丁`Enumerable`：

```
module Enumerable

  def group_by_recursive(*props)
    groups = group_by(&props.first)
    if props.count == 1
      groups
    else
      groups.merge(groups) do |group, elements|
        elements.group_by_recursive(*props.drop(1))
      end
    end
  end

end 
```

您传递的属性可以是`Procs`或`Symbols`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T11:58:07.060

类似于 Sean 的，缺乏错误处理......

```
class Array
  def nested_group_by(*keys)
    return self if keys.length == 0
    groups = group_by(&keys.shift)
    Hash[groups.map { | k, v | [k, v.nested_group_by(*keys)] }]
  end
end 
```

# android - 如何在测验应用程序中显示多个屏幕而不重复活动？

> ID：15336845
> 
> 赞同：2
> 
> 时间：2013-03-11T10:58:20.007
> 
> 标签：android, android-activity

我在 Android 开发方面完全是菜鸟，我想通过构建一个真实的测验应用程序来变得更好。我有一些非常高级的问题：

1.  一个测验屏幕有一个问题和五个答案。这是使用一项活动创建的。现在我希望用户导航到下一个屏幕，即下一个问题等等。

2.  我是为每个问题创建一个新活动，还是使用相同的活动切换内容？我该怎么做呢？

内容资源是一个 XML 提要 - 那么我如何帮助用户从一个问题屏幕导航到另一个问题屏幕？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:00:16.707

您无需创建其他活动。只需更改下一个按钮单击时的视图内容。

假设您在 上显示问题`TextView`，然后只需在下一次单击事件中更改它的文本。同样的事情也适用于答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T11:00:29.517

我建议使用[Fragments 方法](http://developer.android.com/reference/android/app/Fragment.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T11:01:27.447

对于您描述的特定示例，绝对没有理由进行多项活动。

如果您对问题长度和答案长度（以及答案数量）有特定限制，您可以布置一个 xml，其中`TextView`准备好填充这些 s，然后您可以在从一个问题移动到另一个问题时动态填写值。如果您想使用它变得更加时髦，请`ViewFlipper`在运行时将布局添加并膨胀到鳍状肢中，并添加动画以使用户在从一个问题到另一个问题时获得更流畅的体验。

我确实认为这个问题有点太宽泛了，您应该开始实际编写应用程序并在遇到麻烦时提出更具体的问题（您可能不会）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T11:09:20.467

我认为不要选择多项活动来代表不同的问题。

在您的 main.xml 布局中

```
<LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginBottom="5dp"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:orientation="vertical" >

        <LinearLayout
            android:id="@+id/linear_Layout"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >
        </LinearLayout>
    </LinearLayout> 
```

只需膨胀您要表示的视图并添加到此 LinearLayout。回答一个问题后，只需删除膨胀的视图，然后再次膨胀新的视图，依此类推。

```
LayoutInflater mInflater = (LayoutInflater) getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
        View view= (View) mInflater.inflate(R.layout.question1, null);
        LinearLayout.LayoutParams p = new LinearLayout.LayoutParams(
                LinearLayout.LayoutParams.WRAP_CONTENT,
                LinearLayout.LayoutParams.WRAP_CONTENT);
        p.setMargins(5, 5, 5, 5);
        layout.setGravity(Gravity.CENTER_HORIZONTAL);
        layout.addView(view, p); 
```

在下一个问题按钮的活动类中单击

这样做 /** 它将删除您夸大的所有视图。

```
layout.removeAllViews(); 
```

这是一个很好的做法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T11:01:22.123

无需创建新活动。只需更改页面的内容。

# regex - 如何将字符串拆分为单词？

> ID：15336857
> 
> 赞同：0
> 
> 时间：2013-03-11T10:59:02.020
> 
> 标签：regex, tcl, expect

**vlan_outcome**的内容

 **```
show int description | include Vl[0-9]+
Vl1                            admin down     down
Vl150                          up             up 
```

如何将以下正则表达式放入变量中？

```
var1 = Vl1  var2 = admin down var3 = down
war2 = Vl150 war3 = up        war3 = up 
```

**更正确地说，我希望分配发生（var1 = Vl1 或 war1 = Vl150）只有当它们的状态出现在两列时**

到目前为止，我正在尝试并尝试失败：

```
foreach element [ split $vlan_outcome "\n" ] {
#regexp (Vl\[0-9\]+)(\[\[:blank:\]\]+)(.*)(\[\[:blank:\]\]+)(.*) ignore vlan state1 state2
puts $element
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:44:57.130

您的问题应该是如何将[字符串拆分为单词](http://wiki.tcl.tk/989#pagetoc37df483c)。

因此，如果您逐行循环数据，只需使用正则表达式将行拆分为单词，如下所示：

```
set data [regexp -inline -all -- {\S+} $line]
if {[lindex $data 1] == "up" && [lindex $data 2] == "up"} {
    set value [lindex $data 0]
} 
```**

# php - php 将天数添加到 strftime

> ID：15336861
> 
> 赞同：1
> 
> 时间：2013-03-11T10:59:13.513
> 
> 标签：php, date, strftime

我需要以这种格式打印从现在到 30 天的意大利时间`2013-03-11#11 Mar | Mon`

我发现 Date 函数不返回意大利语翻译，所以我正在使用[strftime](http://php.net/manual/en/function.strtotime.php)。

但是我怎样才能给[strftime](http://php.net/manual/en/function.strtotime.php)添加天数？

```
setlocale(LC_ALL, 'it_IT');
for($i=0; $i<30; $i++){
    echo $date = date("Y-m-d", strtotime('now + '.$i.' days'));
    echo " # ";
    echo $date_string = strftime("%d %b | %a" );
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:15:17.533

此代码似乎可以解决您的问题：

```
setlocale(LC_ALL, 'it_IT');
for($i=0; $i<30; $i++){
    echo $date = date("Y-m-d", strtotime('now + '.$i.' days'));
    echo " # ";
    echo $date_string = strftime( "%d %b | %a", strtotime('now + '.$i.' days') ) . "<br>";
} 
```

您遇到的问题是 strftime 使用的是默认日期，即今天。查看文档[http://php.net/manual/en/function.strftime.php](http://php.net/manual/en/function.strftime.php)，您可以指定一个时间戳来代替它使用，这是您的未来日期（现在 +$i），作为第二个参数.

享受！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T11:12:09.487

你可以使用这个：

```
strftime("%d %b | %a",strtotime($date)) 
```

这将显示月份和日期。

# python - 如何将 DMS 转换为具有给定格式的弧度：python 中的 DD-MM-SS

> ID：15336865
> 
> 赞同：-2
> 
> 时间：2013-03-11T10:59:18.220
> 
> 标签：python

我想知道如何将 DMS 从给定格式 DD-MM-SS 转换为弧度

这个“打印（DMStoRAD（47-39-28））”的解决方案应该是0.831785

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:12:17.047

```
import numpy

def dms_string_to_radians(dms_string):
    degrees = numpy.sum(numpy.fromstring(dms_string, sep='-') * 
            [1.0, 1/60.0, 1/3600.0])

    return numpy.radians(degrees)

print dms_string_to_radians('47-39-28') 
```

输出：

```
0.831785136406 
```

正如预期的那样。

或者，如果您不喜欢使用 Numpy 并希望坚持使用标准库：

```
import string, math

def dms_string_to_radians(dms_string):

    dms = [float(x) for x in string.split(dms_string, '-')]
    degrees = sum(
            [scale * val for scale, val in zip([1.0, 1/60.0, 1/3600.0], dms)])

    return math.radians(degrees)

print dms_string_to_radians('47-39-28') 
```

这与第一个输出相同。

我更改了函数名称，因为我无法让自己使用您的命名约定；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T12:42:03.030

试试这个：

```
def DMS2Rad(D, M, S):
    return ((D+M/60+S/3600)/180*3.141592654) 
```

# android - 在发送到服务器时删除 Json 中的特殊字符

> ID：15336866
> 
> 赞同：0
> 
> 时间：2013-03-11T10:59:18.563
> 
> 标签：android, json

嗨计算我得到json后如下

```
{"xxxx":"{\"value\":\"http:\\\/\\\/blaze.mobiclay.net\\\/action\\\/qzproject\\\/feed\\\/20111015\\\/getfeedurl?feedID=702\",\"type\":\"RSS\"}","yyyy":"{\"value\":\"chg\",\"type\":\"String\"}","zzzz (mins)":"{\"value\":\"3\",\"type\":\"String\"}", 
```

但是当我需要将它发送到服务器时，我需要它如下

```
{"xxxx":{"type":"RSS","value":""},"zzzz (mins)":{"type":"String","value":""},"yyyy":{"type":"String","value":""}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:07:14.663

我认为这是您正在寻找的:-) [编码](http://code.google.com/p/json-simple/wiki/EncodingExamples)

并[解码](http://code.google.com/p/json-simple/wiki/DecodingExamples)

# selenium - Selenium：等待服务器响应足够长的时间？

> ID：15336868
> 
> 赞同：3
> 
> 时间：2013-03-11T10:59:25.787
> 
> 标签：selenium

我们有*大量*的 selenium 脚本，其中一些测试是“不稳定的”：在 CI 构建上它们失败了，但在开发机器上它们没问题。

我们假设原因在于性能：CI 构建比开发机器慢，并且我们的应用程序在操作后直接阻止与 Web 应用程序的任何交互，直到服务器响应返回。

这让我想到了一个问题：

**客户端如何知道服务器可能需要多长时间？**

我们可以在每次点击后等待很长时间 -> 但这会大大降低测试套件的速度。

等待**足够长的时间**有什么诀窍吗？

由于我们的套件如此之大，我不想在每个测试用例中都维护/处理它，而是通常在测试框架或服务器端进行维护/处理。

我对硒没有太多的技术经验，但这听起来更像是一个概念问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-07-16T18:17:01.123

这就是你可以做的（在高层次上）。

在客户端上，您可以调用您的 API。当 API 完成时（无论是成功还是失败），您可以设置一个全局变量来说明 API 已经完成。

```
$.getJSON('/some/endpoint.xhtml', {
  someParam: someVar
})
.done(function (data) {
    // do work
})
.fail(function (data) {
  // do error handling
})
.always(function(data) {
    // window.testVars will need to be initialized earlier
    // like so : window.testVars = { completedEndoint = 0 };
    window.testVars.completedEndpoint++;
}); 
```

`JavascriptExecutor`然后在 Java Selenium 代码中，您可以通过驱动程序访问这些变量。

```
private static Map<String, Object> getState(WebDriver driver)
{
    Map<String, Object> map = (Map<String,Object>)((JavascriptExecutor)driver).executeScript("return window.testVars");
    return map;
} 
```

然后在您的测试中，您可以使用：

```
Map<String,Object> defState = initializeState(driver);
performUseCaseToCallTheEndpoint();

ExpectedCondition<Boolean> condition = new ExpectedCondition<Boolean>()
{
  @Override
  public Boolean apply(WebDriver driver)
  {
      Map<String,Object> curState = getState(driver);
      if(curState.get("completedEndpoint") > defState get("completedEndpoint"))
      {
           return true;
      }
      else
      {
          return false;
      }
  }
};
WebDriverWait wait = new WebDriverWait(driver, 60); 
wait.until(condition); 
```

这应该让你开始。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-21T18:30:11.780

在课堂上，你可以有字段

```
public int startTime;
public int stopTime;
public int averageResponseTime = 2000; 
```

在这里，设置`averageResponseTime`为您愿意等待响应的最长时间（在本例中为 2000 毫秒）

在您的 @Before/testSetup 方法中：

```
// set the startime for the test    
startTime = new Date(); 
```

在您的 @After/tearDown 方法中：

```
// set the stopTime
stopTime = new Date();

// calculate how long it took
int duration = stopTime - startTime;

// average out the response time
averageResponseTime  = (averageResponseTime + duration)/2; 
```

在您的测试中，实例化一个新的等待，`averageResponseTime` 作为 waitTimeout传入

```
WebDriverWait wait = new WebDriverWait(driver, averageResponseTime); wait.until(expectedCondition); 
```

在第一次测试（左右）之后，超时将越来越接近服务器实际响应所需的平均时间。

# python - Python 搜索 CSV 文件并返回相关信息

> ID：15336869
> 
> 赞同：-1
> 
> 时间：2013-03-11T10:59:26.560
> 
> 标签：python, regex, csv, python-3.x

我有一个 csv 文件，其中包含有关我们网络上某些计算机的信息。我希望能够从命令行键入一个快速行，以从 csv 中带回相关项目。在格式：

```
$ tag.py *hostname* 
```

csv 有大约 50 列，其中包含从 MAC 地址到上次在网络上看到的信息。我只想在搜索时输出这些列的选择。我已经编写了必要的代码并且它可以工作。但是我希望搜索更加灵活。就目前而言，搜索词需要与我正在搜索的值完全相同。又名

```
$ tag.py mycomputer        # This returns nothing
$ tag.py mycomputer.co.uk  # This returns the information I want
$ tag.py 63746             # This returns nothing
$ tag.py 00063746          # This returns the information I want 
```

所以现在我的代码。

```
# Import Modules

import sys
import csv

# Get user Input
# I assume the script is used in the form script.py "search-term"
# If no input added to command, ask for user input

if len(sys.argv) < 2:
    print("Please enter a hostname or asset number.")
    search_1 = input("Search for:")
else:
    search_1=sys.argv[1]

# Setup Variables
# Open cvs and setup csv.reader settings

csvfile = open("file.csv", "r", encoding="Latin-1")
csvfile.seek 
reader = csv.reader(csvfile, dialect='excel', delimiter=",", quotechar="'")

# Search cvs for the input string

for line in reader:
    if search_1 in line:
        print("------------------------------------------------------")
        print("  Hostname = " + line[10])
        print("  " + line[11])
        print("  AssetId = " + line[30])
        print("  IP = " + line[7])
        print("  MAC = " + line[6])
        print("  Owner = " + line[15])
        print("  Username = " +line[14])
        print("  Tel = " + line[17])
        print("  Last Seen = " + line[27])
        print("------------------------------------------------------")

csvfile.close() 
```

如果我搜索主机名或将额外的 0 字符添加到资产编号，我希望代码能够忽略 fqdn。`len(search_1) < 8`我想我可以通过在前面附加一些来解决资产编号问题，`0`直到它有 8 个字符长，但这避免了我真的更愿意只搜索字符串而不对其进行操作以匹配我正在寻找的东西的事实.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:06:53.817

不要测试您的输入字符串是否在行中，而是测试您的输入字符串是否在任何列中。该[`any()`功能](http://docs.python.org/3/library/functions.html#any)非常适合：

```
if any(search_1 in col for col in line): 
```

稍微分解一下：`csv.reader()`迭代中的每一行本身就是一个列列表，您可以遍历这些列。`for col in line`就是这样做的。我们用 测试是否`search_1`存在于每一列中`search_1 in col`，`any()`并将执行循环，直到它找到一个列 where `search_1 in col`is `True`，在这种情况下，它停止迭代循环并返回`True`自身。如果未找到匹配项，`False`则返回。

# iframe - iframe 窗口顶部位置问题。iframe 一遍又一遍地加载

> ID：15336871
> 
> 赞同：0
> 
> 时间：2013-03-11T10:59:30.940
> 
> 标签：iframe

当我的 iframe 加载时，我需要父页面在 iframe 仍然存在时加载不同的内容（页眉、页脚）。我添加到 iframe ：

```
window.top.location = "http://mysite.com"; 
```

它加载新的父页面，但一遍又一遍地重新加载。如何仅启用一个加载/iframe 加载或某些解决方案。

我试过了

```
window.onload = function() {
if(!window.location.hash) {
    window.location = window.location + '#loaded';
    window.location.reload();
} 
```

}

但它什么也没做。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:36:54.400

如果不重新加载 iframe，您就无法重新加载 iframe 父级！如果要更改父页面中的某些内容，则必须使用父页面中的 javascript 而不是 iframe。如果你想捕捉“iframe 加载事件”，你必须从 iframe 内部进行。看起来不可能的情况，但你仍然可以做到！

您需要让 iframe 和父页面通信，并且可以使用 html5 postmessage 来完成（即使父页面和 iframe 在不同的域中也可以使用！）。如果您也需要 IE7 兼容性，您可以使用[easyXDM](http://easyxdm.net/) javascript 库而不是 postMessage，只需在他们的站点中搜索即可。

只需在触发（或任何类似事件）时从 iFrame 执行 postMessage `jQuery(document).ready()`，父页面必须有一个侦听器等待此消息以触发页眉/页脚/任何更改事件。

# xsd - XSD：xs:integer 和 xs:int 有什么区别？

> ID：15336872
> 
> 赞同：118
> 
> 时间：2013-03-11T10:59:31.830
> 
> 标签：xsd

我已经开始创建 XSD 并在几个示例中找到了`xs:integer`和`xs:int`.

`xs:integer`和 和有什么不一样`xs:int`？我应该什么时候使用`xs:integer`？我应该什么时候使用`xs:int`？

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2013-03-11T10:59:31.830

区别如下： `xs:int`是带符号的 32 位整数。 `xs:integer`是一个整数无界值。有关详细信息，请参阅[https://web.archive.org/web/20151117073716/http://www.w3schools.com/schema/schema_dtypes_numeric.asp](https://web.archive.org/web/20151117073716/http://www.w3schools.com/schema/schema_dtypes_numeric.asp) 例如，XJC (Java) 生成`Integer`for`xs:int`和`BigInteger`for `xs:integer`.

底线：`xs:int`如果您想跨平台工作并确保您的号码顺利通过，请使用。如果您想要更大的数字 - 使用`xs:long`代替`xs:integer`（它将生成为`Long`）。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-03-11T15:34:36.257

[xs:integer](http://www.w3.org/TR/xmlschema11-2/#integer)类型是 xs:decimal的限制，fractionDigits 方面设置为零，并带有一个禁止小数点和尾随零的词法空间，否则它们是合法的。它没有最小值或最大值，尽管在有限大小的机器中运行的实现不需要能够接受任意大或小的值。（它们需要支持 16 位十进制数字的值。）

[xs:int](http://www.w3.org/TR/xmlschema11-2/#int)类型是 xs:long 的限制，maxInclusive facet 设置为 2147483647，minInclusive facet 设置为 -2147483648 。（如您所见，它可以方便地放入两个补码的 32 位有符号整数字段；xs:long 适合 64 位有符号整数字段。）

通常的规则是：使用与您想说的话相匹配的那个。如果对元素或属性的约束是其值必须是整数，则 xs:integer 会简洁地说明这一点。如果约束条件是该值必须是一个整数，并且可以以二进制补码表示形式用最多 32 位表示，请使用 xs:int。（一个次要但有时重要的问题是，您的工具链与一个工具链一起工作是否比另一个更好。对于比您的工具链寿命更长的数据，首先听取数据是明智的；对于仅用于提供工具的数据链，如果你改变你的工具链，这将是没有意义的，没有理由不听工具链。）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-09-23T15:01:49.677

我只想添加一个对某些人可能很重要的迂腐注释：说 xs:int “是”一个有符号的 32 位整数是不正确的。这种形式的词意味着在二进制数字计算机的内存（或寄存器等）中实现。XML 是基于字符的，并且会将最大 32 位有符号值实现为“2147483647”（当然是我的引号），这比 32 位要多得多！正确的是 xs:int 是（间接地）对 xs:integer 的限制，它将最大和最小允许值设置为与带有符号位的 32 位整数的相应实现强加限制相同。

# indexing - VHDL std_logic_vector 索引与“downto”

> ID：15336875
> 
> 赞同：3
> 
> 时间：2013-03-11T10:59:34.870
> 
> 标签：indexing, vhdl

我想单独设置 std_logic_vector 的位，以便为单个位或一组位轻松设置注释。这是我所拥有的：

```
signal DataOut : std_logic_vector(7 downto 0);
...
DataOut <= (                        5=>'1',     -- Instruction defined
                                    4=>'1',     -- Data length control bit, high=8bit bus mode selected
                                    3=>'1',     -- Display Line Number ctrl bit, high & N3 option pin to VDD=3 lines display
                                    2=>'0',     -- Double height font type control byte, not selected
                                    1 downto 0=>"01",   -- Select Instruction table1
                                    others=>'0' -- for bits 6,7
                                    ); 
```

但是，我对“downto”语句有疑问，使用 Xilinx ISE 时出现以下错误：

```
Type std_ulogic does not match with a string litteral 
```

避免使用等效的任何解决方案

```
1=>'0',
0=>'1', 
```

并允许我逐块设置位？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T15:34:56.353

`X downto Y => 'A'`当 A 是数组的元素时，赋值是正确的。例如，这个片段是正确的：

```
1 downto 0 => '1', 
```

这个片段是错误的：

```
1 downto 0 => "01", 
```

因此，您的分配是非法的。作为您的代码，您可以指定为：

```
DataOut <= (                        5 downto 3 =>'1',     
                                    2 downto 1 =>'0',     
                                    0 => '1',  
                                    others=>'0' 
                                    ); 
```

如果要通过数组字段访问/分配，可以使用连接：

```
DataOut <= Something_0 & Something_1 & "01"; 
```

虽然`Something_*`是`std_logic_vector`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T13:43:29.210

另一个答案是使用 '&' 进行连接，这会失去命名关联的清晰度，尽管您可以使用命名常量恢复一些自文档

```
constant Instr_Defined : std_ulogic := '1';
constant Bus_8_Bit     : std_ulogic := '1';

DataOut <= "00" & Instr_Defined
                & Bus_8_Bit
                & '1'     -- description
                & '0'     -- ditto
                & "01"; 
```

另一个答案是编写一个函数来创建指令：这可以使主要流程变得非常简单和清晰，同时将指令编码完全分开并放在一个地方，例如在你需要知道指令格式的地方使用的包中（也许在汇编器和 CPU 中）

```
DataOut <= Encode_Instruction(Instr_Defined, Bus_8_Bit, Font_Mode); 
```

可以在函数体中使用上述任何技术，无论多么冗长。越明确和详细越好；它不会弄乱主要设计，因此除非更改指令格式，否则您很少会看它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T11:25:20.843

做这个：

```
DataOut(7 downto 6)<="00";
DataOut(5)<='1';
DataOut(4)<='1';
DataOut(3)<='1';
DataOut(2)<='1';
DataOut(1 downto 0)<="01"; 
```

# c# - 以编程方式检索具有给定 url 或用户 ID 的谷歌博客数据（C#）

> ID：15336879
> 
> 赞同：0
> 
> 时间：2013-03-11T10:59:39.460
> 
> 标签：c#, google-api, blogger

我正在创建 ac# 控制台应用程序，它将使用用户 ID 和密码从特定用户的所有博客中检索数据。

所以我找到了下面的代码--->

```
using Google.GData.Blogger;
using Google.GData.Client;

namespace ConsoleApplication5
{
    class Program
    {
        static void Main(string[] args)
        {
            Service service = new Service("blogger", "blogger-example");

            // ClientLogin using username/password authentication
            string username;
            string password;
            if (args.Length != 2)
            {
                Console.WriteLine("Usage: BloggerDevSample.exe <username> <password>");
                return;
            }
            else
            {
                username = args[0];
                password = args[1];
            }

            service.Credentials = new GDataCredentials(username, password);

            ListUserBlogs(service);

            Console.WriteLine("Press enter to quit");
            Console.ReadLine();
        }

        static void ListUserBlogs(Service service)
        {
            Console.WriteLine("\nRetrieving a list of blogs");
            FeedQuery query = new FeedQuery();
            // Retrieving a list of blogs   
            query.Uri = new Uri("http://www.blogger.com/feeds/default/blogs");
            AtomFeed feed = null;
            feed = service.Query(query);
            foreach (AtomEntry entry in feed.Entries)
            {
                Console.WriteLine("  Blog title: " + entry.Title.Text);
            }
        }
    }
} 
```

它目前使用用户名和密码获取数据，这应该是已知的，
但我想**使用特定博客的 URL 获取博客数据，因此任何博客数据都可以在没有私人凭据（用户名和密码**）的情况下访问博客网址。我认为这可以通过 Goggle 提供的一些 API 来实现，但是如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:09:34.193

阅读博客的 RSS 提要怎么样？

# javascript - 钛 webview fireEvent addEventListener

> ID：15336881
> 
> 赞同：0
> 
> 时间：2013-03-11T10:59:41.830
> 
> 标签：javascript, titanium, titanium-mobile, addeventlistener, appcelerator-mobile

这是我的情况。我有一个 html +css + jquery 运行良好的项目，我想在钛中进行调整。这个项目有地理定位 + fb api 调用。

我想将我的项目改编成钛 html5 项目。我发现我只能通过 addEventListener 和 fireEvent 函数调用 Titan api（当然只有在我使用 webviews 的情况下）。

这是我使用的第一个钛项目，需要地理定位和 facebook api。

实际上，我开始修改之前的项目，将 addEventlistener 添加到 app.js 文件中，将 fireEvents 添加到之前项目的 javascript 文件中（包含在 html 文件中的第一个项目中）中需要钛 api 调用的部分（我不能在 app.js 之外调用钛 API）。

问题是我需要返回一些值（对象）。

为了更好地理解我在做什么，这里是事件的顺序。

钛项目 (app.js)

```
var win = Ti.UI.createWindow();

var webview = Ti.UI.createWebView({
    url: 'index.html'
});

Ti.App.addEventListener('geolocation',function(){      
    //some titanium api call

    lat = x;lon=y;
    Ti.App.fireEvent('geolocation_back',{latitude:lat,longitude:lon}); 
});

win.add(webview);
win.open(); 
```

HTML + CSS + JS PROJECT（文件导入index.html，不导入app.js）

```
Ti.App.fireEvent('geolocation');

var my_lat ;
var my_lon ;

Ti.App.addEventListener('geolocation_back',function(d){
    my_lat = d.latitude;
    my_lon = d.longitude;
    //do other stuff with my_lat and my_lon
}); 
```

我希望你明白我在做什么。

我的问题是：

**1）我正在做的事情是使用钛和html代码的正确方法吗？**

**2）有没有其他方法可以在 html 代码中调用钛 API 并返回变量/对象？**

**编辑** 此代码仅适用于 iOS 和 android，但不适用于 Web 浏览器。似乎内置服务器（Titanium studio 或 Android 网络浏览器模拟器）不加载 Ti.* 或 Titanium.* 对象。有没有办法让它在网络浏览器上运行？

我看到网络移动编译器在子文件夹中创建了所有钛 API，有钛.js 和 TI/* 文件夹。谁能解释我为什么控制台说我没有定义 Ti？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:53:53.717

正如我[在这里所说](https://stackoverflow.com/questions/15368543/ti-app-fireevent-reference-error-ti-is-not-defined/15526919#15526919)

我找到了解决办法！

只需将下面的简单脚本添加到您的所有 html 页面

> var Ti = window.parent.Ti

玩得开心！

# c# - 如何从网络获取目录文件名

> ID：15336890
> 
> 赞同：1
> 
> 时间：2013-03-11T11:00:20.147
> 
> 标签：c#, .net, winforms

我想阅读网络目录文件。 **当我使用此代码时。**

```
string[] files;
string webfilepath = "http://www.anydomain.com/templates/images";
files = Directory.GetFiles(webfilepath, @"*.*", SearchOption.TopDirectoryOnly); 
```

代码显示错误 url 格式不支持。有没有其他方法可以读取 web 目录。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:02:24.083

> 有没有其他方法可以读取网页目录

不，HTTP 没有您可以检索的“目录索引”，除非服务器（或在其上运行的软件）自己生成它，例如 Apache 的`Options +Indexes`配置。但是该索引是在 HTML 中生成的，您必须对其进行解析才能获得完整的文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:01:53.497

您正在尝试传递`url`给[Directory.GetFiles](http://msdn.microsoft.com/en-us/library/07wt70x2.aspx)而不是传递文件夹的物理路径，如果可以访问，您可以使用[Server.MapPath](http://msdn.microsoft.com/en-us/library/ms524632%28v=vs.90%29.aspx)获取 url 的物理路径，即用于访问文件夹的代码正在机器上运行 url 指向。如果 url 在不同的机器上，那么你*不能*使用`Directory.GetFiles`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:05:12.323

你不能以通用的方式做到这一点。因为它取决于Web服务器，如果它这样做的话，它如何将目录内容转储到客户端。

首先，您需要确保您的服务器使用某种协议发送内容。然后您可以使用 HttpWebRequest 发送 HTTP 请求并获取结果。您将不得不在一天结束时对结果进行自己的解析。

# ruby-on-rails - 在 Ruby 中，“名称”是一个保留属性，如果是，我该如何使用 :name 属性？

> ID：15336896
> 
> 赞同：0
> 
> 时间：2013-03-11T11:00:36.580
> 
> 标签：ruby-on-rails, ruby

免责声明，我是 ruby​​/rails n00b。

我有一个简单的 ActiveRecord 类：

```
class LandingPage < ActiveRecord::Base
attr_accessible :name, :parent_id, :published
end 
```

现在，我还没有制定出模式，但有时 object.name 返回正确的值，有时 object.name 或者在类内部，self.name 返回如下值：

> <登陆页面：0x007fd05c605980>

我猜这是因为“名称”就像一个保留属性？但有时它会起作用。我可以使用“名称”作为属性吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:03:21.417

Name 不是 Ruby 中的保留属性，也不是 Ruby on Rails 中的保留属性。我认为您正在打印该`to_s`方法的返回值。

如果您使用的是穷人的调试器（`Kernel#puts`或`Kernel#p`），那么它将使用该`to_s`方法。

尝试：

```
puts landing_page.name 
```

而不是`puts landing_page`. 或者如果你在视图中使用它，也是一样的：

```
<%= @landing_page.name %> 
```

而不是`<%= @landing_page %>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T11:07:10.297

如果你在一个类方法中

```
class Foo
  def self.foo
    puts self.name
  end
end 
```

`Foo.foo`将返回类名 Foo。但是，鉴于以下情况

```
class Foo
  attr_accessor :name

  def self.foo
    puts self.name
  end

  def method1
    puts self.name
  end
end 
```

`Foo.new(name: 'my name').method1`将返回`my name`

# sql - 对于 MS Access VBA 中多个客户 ID 的每个循环

> ID：15336901
> 
> 赞同：1
> 
> 时间：2013-03-11T11:00:57.177
> 
> 标签：sql, vba, ms-access, ms-access-2007

我有一个现有的表，其中包含 1000 条记录。我需要根据客户 ID 和与之关联的日期字段更新每条记录。

基本上，我可以根据日期的顺序在每个日期旁边放一个有序的数字。

我想我需要使用两个“for each”循环来完成这项工作。IE

```
For Each Customer ID in tblCustomers

'gather all records for that customer and get all dates in order from each record via recordset?

    For Each Date 
    newfield = newfield+ 1
    end loop

end loop 
```

谁能指出我正确的方向来解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:14:51.657

类似于以下内容：

```
Dim rstCustomers As DAO.Recordset
Set rstCustomers = CurrentDb.OpenRecordset("SELECT CustomerID FROM tblCustomers GROUP BY CustomerID")
If rstCustomers.RecordCount > 0 Then
    rstCustomers.MoveFirst
    Do Until rstCustomers.EOF
        Dim rstRecords As DAO.Recordset
        Set rstRecords = CurrentDb.OpenRecordset("SELECT RecordDate, OrderField FROM tblRecords WHERE CustomerID = " & rstCustomers!CustomerID & " ORDER BY RecordDate")
        If rstRecords.RecordCount > 0 Then
            Dim iCount as Integer
            iCount = 1
            rstRecords.MoveFirst
            Do Until rstRecords.EOF
                rstRecords.Edit
                   rstRecords!OrderField = iCount
                rstRecords.Update

                iCount = iCount + 1
                rstRecords.MoveNext
            Loop
        End If
        rstRecords.Close
        Set rstRecords = Nothing

        rstCustomers.MoveNext
    Loop
End If
rstCustomers.Close
Set rstCustomers = Nothing 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:06:22.683

使用[Recordset循环记录](http://msdn.microsoft.com/en-us/library/office/bb177501%28v=office.12%29.aspx)

# php - 从 Joomla 2.5 迁移到 Joomla 3 的 ReDJ 插件（管理面板中不显示任何内容）

> ID：15336905
> 
> 赞同：3
> 
> 时间：2013-03-11T11:01:09.030
> 
> 标签：php, joomla, joomla3.0

我在**2.5 Joomla**网站上安装了**ReDJ 插件**v 1.6 。但是我正在使用**Joomla 3**并且这个模块现在不起作用 - 出现异常错误。在更改日志中，我发现了这个： 。所以我只是为所有处理异常的类添加后缀。并且还在.****`Changed class names for ALL models, controllers and views``Legacy``JRequest``$input=JFactory::getApplication()->input;`****

 ****所以就目前而言，似乎一切正常。除了.. 组件管理面板 -**我可以看到组件菜单，但页面上没有任何内容**。这是截图：[http ://tinyurl.com/btfzxux](http://tinyurl.com/btfzxux)

主控制器`controller.php`代码： http: [//pastebin.com/vQjYvYkK](http://pastebin.com/vQjYvYkK)
主组件文件`redj.php`代码： http: [//pastebin.com/gF6icdE3](http://pastebin.com/gF6icdE3)

我发现文件中的行`parent::display();`不行`controller.php`。并且日志和显示没有错误。
这条线调用`JControllerAdmin->display()`的是：

```
/**
 * Display is not supported by this controller.
 *......................
 *......................
 */
public function display($cachable = false, $urlparams = array())
{
    return $this;
} 
```

所以什么都没有显示。我尝试将`extends`定义重命名为`JControllerLegasy`（因为它支持 display() 方法），但组件输出中仍然没有任何内容。

如何在 Joomla 3 的管理面板中输出组件内容？

任何帮助表示赞赏。
SG

**更新 1：**

我在 GitHub 上发布我的代码。我正在为**Joomla 3**优化这个插件。欢迎任何帮助！ [https://github.com/staniaslavg/ReDJ](https://github.com/staniaslavg/ReDJ)

*PS 现在重定向列表显示并添加一个新的工作正常。但是..项目列表中没有项目。*

**更新 2：**

最后，一切正常（由我测试，但似乎一切正常..）

*PS*如果选项卡中没有显示任何内容 - 检查数据库列。我又加了几个。`$this->get('Errors')`通过文件中的 var_dump 错误变量（如 ）检查 whis`views/.../view.html.php`

***GitHub 上的代码***： **[https ://github.com/staniaslavg/ReDJ](https://github.com/staniaslavg/ReDJ)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:09:29.440

我在 github 存储库中发布了一些更新，以表明它可以正常工作。（对于重定向视图序列）。不幸的是，Joomla 中使用了一些代码！组件的 2.5 已被弃用，并在 3.0 中被删除。GUI 在 3.0 中看起来也很糟糕，它需要更多的工作。

**尽管我很想帮助你让它运行起来，但它所花费的时间是巨大的。我强烈建议使用 Joomla！2.5 这仍然是一个很好的时期支持。**

**开发人员还宣布[Joomla! 3.0版本正在进行中。](http://www.selfget.com/forum/redj/393-rejd-for-joomla-3-0.html)**

浏览所有代码并修复它对我来说意义不大，但这里有**一些例子：**

**JDatabase::getEscaped() 已被删除。请改用 JDatabase::escape()。**

`$db->getEscaped($orderCol.' '.$orderDirn)`

=>`$db->escape($orderCol.' '.$orderDirn)`

**JToolBar 不再支持在执行功能之前隐藏主菜单的“X”功能（例如，addNewX、editListX）。**

和别的。****

# javascript - 多个动态列

> ID：15336906
> 
> 赞同：1
> 
> 时间：2013-03-11T11:01:09.493
> 
> 标签：javascript, css

我正在尝试创建基于列的博客布局。我希望文本在到达页面底部时换行到新列。这是非常简单的形式，例如，当列`height == the_height_of_the_wrapper`然后`column-count++`.

这样的问题将是文本将均匀分布。此外，这将依赖于 css 列，我想要一些对浏览器更友好的东西。是否有此功能的现有插件或任何我可以得到一些想法的地方？

如果有人熟悉任何文本密集的 Windows 8“地铁”应用程序（例如新闻应用程序），那么这就是我试图模仿的那种布局。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:15:23.257

正如我在评论中注意到的那样，你不能`column-count`在那里使用。但是有解决方案，请检查这个：[Continuing overflowed text in a different div?](https://stackoverflow.com/questions/7400174/continuing-overflowed-text-in-a-different-div)

或者。您可以将固定高度（即使是百分比也可以）应用于列将适当填充的包装器。（例如：w3schools.com/css3/tryit.asp?filename=trycss3_column-count）。甚至似乎您不必指定固定的列数，因为它似乎会根据内容的要求创建额外的列。

# google-apps-script - 单元格更改时的电子邮件通知

> ID：15336907
> 
> 赞同：8
> 
> 时间：2013-03-11T11:01:10.673
> 
> 标签：google-apps-script, google-sheets, google-spreadsheet-api

需要谷歌脚本的帮助。我有多行[电子表格](https://docs.google.com/spreadsheet/ccc?key=0AqmhWQ_A7q_adFU2cnRKRlZGSlFkWF9WeXhqblFFWmc&usp=sharing)。

> **需要一个执行以下操作的脚本：**
> 
> 如果 G 列中的任何单元格已更改，则向自定义地址发送电子邮件通知，其中包含此行中的信息：来自单元格 D 的信息和单元格 G 的新值。

**UPD**

我找到了有用的信息：

```
function emailNotification() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = ss.getActiveSheet();
  var cell = ss.getActiveCell().getA1Notation();
  var cellvalue = ss.getActiveCell().getValue().toString();
  var recipient = "me@gmail.com";
  var subject = 'Update to '+sheet.getName();
  var body = sheet.getName() + ' has been updated. Visit ' + ss.getUrl() + ' to view the changes on cell: «' + cell + '» New cell value: «' + cellvalue + '»';
  MailApp.sendEmail(recipient, subject, body);
}; 
```

此脚本跟踪整个表中的更改。而且我想只在G列中跟踪变化，并从D列中获取值。

> **问题：**
> 
> 当值已更改 G 列中的单元格时，如何获取 D 列中的单元格的值

**最后脚本 - 回答我的问题**

[电子表格](https://docs.google.com/spreadsheet/ccc?key=0AqmhWQ_A7q_adFU2cnRKRlZGSlFkWF9WeXhqblFFWmc&usp=sharing)

```
function sendNotification() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = ss.getActiveSheet();
  var cell = ss.getActiveCell().getA1Notation();
  var row = sheet.getActiveRange().getRow();
  var cellvalue = ss.getActiveCell().getValue().toString();
  var recipients = "me@gmail.com";
  var message = '';
  if(cell.indexOf('G')!=-1){ 
    message = sheet.getRange('D'+ sheet.getActiveCell().getRowIndex()).getValue()
  }
  var subject = 'Update to '+sheet.getName();
  var body = sheet.getName() + ' has been updated. Visit ' + ss.getUrl() + ' to view the changes on row: «' + row + '». New comment: «' + cellvalue + '». For message: «' + message + '»';
  MailApp.sendEmail(recipients, subject, body);
}; 
```

在 onEdit 上设置触发器，脚本将正常工作

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T11:53:24.303

您应该在发布问题之前搜索此论坛；我确实在*电子邮件+手机*上进行了搜索，并得到了一些结果：

例如，[这个帖子答案](https://stackoverflow.com/questions/13768532/how-to-attach-onchange-cell-value-event-script-to-google-sheet/13770980#13770980)几乎完全符合您的要求。

编辑后编辑：

使用`IF`条件。

像这样的东西：

```
 var cellG = ''
    if(cell.indexOf('D')!=-1){ // = if you edit data in col D
cellG = sheet.getRange('G'+ sheet.getActiveCell().getRowIndex()).getValue()
// add more condition if necessary and/or send your mail (cellG contains the value in column G of the active row
}
    Logger.log(cellG) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-12T12:08:44.493

跟踪单元格更改事件的正确方法是将事件对象“e”与 onEdit 触发器一起使用。事件对象包含已编辑的范围，因此您始终可以获取已更改单元格的内容。

```
function sendNotification(e){
  var range = e.range;
  range.setNote('Last modified: ' + new Date());
} 
```

注意：函数名称不应该是 onEdit，它是应用程序脚本中的特殊名称。**由于LIMITED** authMode ，onEdit 函数不允许发送电子邮件。

[这是一个应用程序脚本](http://www.funbutlearn.com/2016/09/send-notification-email-if-cell-is.html)，如果在特定范围内编辑单元格，它允许发送电子邮件。它还允许在通知电子邮件中发送要发送的整行、整列或自定义范围。

# security - FCKEDITOR 安全问题

> ID：15336910
> 
> 赞同：0
> 
> 时间：2013-03-11T11:01:12.797
> 
> 标签：security, drupal-6, drupal-modules, fckeditor

我在一个drupal 6网站上运行FCKEDITOR 6.x-2.3，一群黑客团队努力查看网站上是否存在任何安全问题，他们发现了FCKEDITOR的一些漏洞，匿名用户可以使用一些上传器将文件上传到服务器像[这样一个](http://www.exploit-db.com/exploits/17644/)服务器。

对于匿名用户，我可以访问以下目录：

> 站点/所有/模块/fckeditor/fckeditor/editor/filemanager/browser/default/browser.html
> 
> 站点/所有/模块/fckeditor/fckeditor/editor/filemanager/browser/default/frmupload.html

上传我的上传文件。有没有办法解决它？或者我应该忘记使用 FCKEDITOR 或任何其他所见即所得的编辑器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:19:58.950

You can update your FCKEditor module (check: [http://drupal.org/node/1482442](http://drupal.org/node/1482442))

Or, you can use CKEditor instead of FCKEDITOR. See: [http://drupal.org/project/ckeditor](http://drupal.org/project/ckeditor)

I have faced similar security issue using CKEditor. And I have following the below steps:

**Here is the process to update ckeditor and ckfinder:**

1.  Update CKeditor version 6.x—1.13
2.  Download CK Finder latest version 2.3
3.  Unzip the ckfinder in sites/all/module/contrib/ckeditor/ckfinder
4.  Open /all/module/contrib/ckeditor/ckfinder/config.php
5.  Comment out the CheckAuthentication() function ![enter image description here](../Images/a2a68d539a1ac3152f65cd48e3b7ec80.png)

6.  Add the below two lines ![enter image description here](../Images/07a78823dd9cf44f4adc02abbb68db4b.png)

7.  $baseUrl may differ depends on products.

8.  Open /contrib/ckeditor/ckfinder/config.js
9.  add the below lines: ![enter image description here](../Images/f85c9040ebcf33694507f590a9b0e281.png)

10.  Note: I would like to request all to prepare a set of allowed and denied extensions ![enter image description here](../Images/662d6a7091a09d51d74e33b0b976cf1c.png)

One more additional issue: Add cookie_domain in sites/default/settings.php file.

# php - 语言切换器块在 drupal 中不起作用

> ID：15336914
> 
> 赞同：0
> 
> 时间：2013-03-11T11:01:31.783
> 
> 标签：php, drupal, drupal-7, drupal-modules

我正在使用语言切换块来使我的 drupal 网站语言化。它显示语言切换器块，但是当我单击任何语言时，内容不会被翻译。URL 会根据语言选择进行更改。

我正在使用[语言切换器](http://drupal.org/project/language_switcher)和[国际](http://drupal.org/project/i18n)化模块。

我已经通过 config/languages 添加了语言。我还通过启用多语言翻译支持来发布我的内容。在翻译选项卡中，我启用已翻译的操作。

实际上我遵循了所有步骤，但不知道为什么我的内容没有被翻译。我想不出问题。任何人都可以给我一些指示？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:37:27.510

管理多语言内容时涉及的阶段很多，涉及的各个模块以及配置设置之间，可能很难从远处调试您的问题。

每当我建立一个多语言网站时，我都会使用相同的参考
[HowTo: Basic Internationalization setup](http://drupal.org/node/1268692) on [drupal.org](http://drupal.org/)。

由于我发现几乎不可能记住设置的每个细节，因此我通过逐步遵循本指南来避免任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:55:29.623

现在工作....

浏览此站点[http://localize.drupal.org/](http://localize.drupal.org/)并单击您的语言。然后下载您的语言文件（例如 drupal-7.21.language-code.po）。

转到 admin/config/regional/translate 并单击 Import 选项卡。将您刚刚下载的翻译包导入所需的语言。返回概览选项卡。请注意您添加的语言的翻译字符串百分比较高。之后，您的翻译工作正常。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-12-20T12:17:44.420

请转到*配置 - 区域和语言 - 语言 - 检测和选择*，然后通过 URL 或会话启用选择

# jquery - 如何在gridview按钮单击时调用jquery对话框？

> ID：15336915
> 
> 赞同：0
> 
> 时间：2013-03-11T11:01:33.767
> 
> 标签：jquery, asp.net, jquery-ui-dialog

我正在使用[jquerydialog](http://jqueryui.com/dialog/#modal-form)。我有一个gridview和一个编辑按钮。我想调用`jquery dialog`gridview上的编辑按钮`click event`和。我怎样才能实现这一点？当放置在gridview之外时，JqueryDialog在按钮单击事件上正常工作

这里的javascript

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script type="text/javascript" src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>

<script type="text/javascript"> 
   $(function() {    
        $("#dialog-form").dialog({
            autoOpen:false,
            show:{
                effect:"blind",
                duration:1000                
            },
            hide:{
                effect:"explode",
                duration:1000
            },
            height:500,
            width:550,
            modal:true              
        });            
   });
   $("input[id$=btnAdd]").live("click",function(){                
            $("#dialog-form").dialog("open");
        });
 </script> 
```

这是我用过的gridview

```
<asp:GridView ID="gdProgram" runat="server" CssClass="ui-widget ui-widget-contain" AutoGenerateColumns="False" Width="700px"
HeaderStyle-CssClass="ui-widget-header">
    <Columns>
        <asp:TemplateField HeaderText="SlNo">
            <ItemTemplate >
                <asp:Label ID="Label1" runat="server" Text='<%# "Test1" %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField>
             <ItemTemplate>
                <asp:Label ID="lbl2" runat="server" Text='<%# "Test2" %>'></asp:Label>
            </ItemTemplate>           
        </asp:TemplateField>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:Label ID="lbl3" runat="server" Text='<%# "Test3" %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField>
            <ItemTemplate>
                <input type="button" id="btnEdit" runat="server" value="Edit" /> 
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>     
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:18:45.183

把它改成这样。

```
 <asp:TemplateField>
   <ItemTemplate>
             <input type="button" id="btnEdit" runat="server" value="Edit" onclick="showDialog(this);" /> 
            </ItemTemplate>
        </asp:TemplateField> 
```

在 JS 中

```
function ShowDialog(currObj)
{
   // do some thing with currObj data
  $("#dialog-form").dialog({
            autoOpen:false,
            show:{
                effect:"blind",
                duration:1000                
            },
            hide:{
                effect:"explode",
                duration:1000
            },
            height:500,
            width:550,
            modal:true              
        });      
  return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T11:39:38.947

这应该可以完美地工作......！

```
$(document).ready(function(){
    $('#<%=gdProgram.ClientID%> :button').click(function(){
           $("#dialog-form").dialog("open");
    });
}); 
```

以防万一它不起作用..这意味着您在母版页上有一些与此代码冲突的其他 jquery。你只需要使用`jQuery.noConflict`它。

```
 var j=jQuery.noConflict();
    j(document).ready(function(){
        j('#<%=gdProgram.ClientID%> :button').click(function(){
               j("#dialog-form").dialog("open");
        });
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:06:42.590

使用[Tejs](https://stackoverflow.com/users/148004/tejs) [answer](https://stackoverflow.com/a/6203284/122005)中的相同概念，您可以尝试以下操作：

将 gridview 按钮更改为：

```
<ItemTemplate>
    <asp:Button ID="btnEdit" runat="server" Text="Edit" />
</ItemTemplate> 
```

而你的 JS 调用：

```
<script type="text/javascript" language="javascript">
     $(document).ready(function()
     {
         $('#<%= btnEdit.ClientID %>').click(function(e) 
         { 
             $("#dialog-form").dialog("open");

             if(/*Some Condition Is Not Met*/) 
                return false;
         });
     });
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-15T07:32:52.263

选择 gridview 中的输入类型按钮时，尝试使用 class 而不是 Id 作为选择器。

```
 <ItemTemplate>
      <input type="button" id="btnEdit" class="btnClass" runat="server" value="Edit" /> 
    </ItemTemplate>

    <script type="text/javascript" language="javascript">
         $(document).ready(function()
         {
            $('.btnClass').unbind("click");
            $('.btnClass').bind("click", function() {

                 $("#dialog-form").dialog("open");

                 if(/*Some Condition Is Not Met*/) 
                 return false;
            });
         });
    </script> 
```

# java - 无法设置 JAVA_HOME，因为找不到 Java JDK 1.7 的安装位置

> ID：15336916
> 
> 赞同：4
> 
> 时间：2013-03-11T11:01:35.250
> 
> 标签：java, macos, installation

我刚刚从[这里](http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html)下载了最新的适用于 Mac OSX 的 Java JDK (jdk-7u17-macosx-x64.dmg) 。

我已经安装了它，但是我找不到它的安装位置，以便我可以设置 JAVA_HOME。

```
notebook:work askar$ ls -al /System/Library/Frameworks/JavaVM.framework/Versions/Current
lrwxr-xr-x  1 root  wheel  1 Jul 29  2012 /System/Library/Frameworks/JavaVM.framework/Versions/Current -> A 
```

今天是 2013 年 3 月 11 日。这里显示的是 2012 年 7 月 29 日...

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-11T11:03:12.323

使用`/usr/libexec/java_home`返回首选 JVM 版本路径的实用程序。您可以检索所有已安装 JVM 的列表
。`/usr/libexec/java_home -V`

最简单的设置方法`$JAVA_HOME`是：

```
export JAVA_HOME=$(/usr/libexec/java_home) 
```

这将始终将路径设置为最新的 JVM，因此您不必在升级 java 后更新它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T11:04:31.090

```
echo `/usr/libexec/java_home` 
```

您可以使用此命令在 mac os 中查找 java home。

# .net - Application.LoadComponent 找不到资源

> ID：15336917
> 
> 赞同：8
> 
> 时间：2013-03-11T11:01:41.283
> 
> 标签：.net, wpf, resources

我的项目中有一个 xaml 文件`Ns1\Ns2\myfile.xaml`。它的构建操作设置为 Page，使用自定义工具 MSBuild:Compile。我正在尝试将此文件加载到静态构造函数中：

```
namespace Ns1.Ns2 {
    internal class MyClass {
        static() {
            var obj = Application.LoadComponent(new Uri("/myfile.xaml", UriKind.Relative));
        }
    }
} 
```

但是，当我尝试运行此代码时，它会失败并出现异常`cannot locate resource 'myfile.xaml'`。如果我将 URI 更改为绝对 URI：

```
var obj = Application.LoadComponent(new Uri("pack://application:,,,/ns1/ns2/myfile.xaml", UriKind.Absolute)); 
```

它失败了`Cannot use absolute URI`。如果我将 myfile.xaml 的类型更改为 Resource，我会得到相同的错误。

如何从代码中编译和引用 myfile.xaml？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-11T11:12:47.923

您应该指定程序集名称：

```
Application.LoadComponent(new Uri("/AssemblyName;component/myfile.xaml", UriKind.Relative)) 
```

或者，如果文件有一个代码隐藏类，您可以“新建”它，生成的代码将加载关联的 XAML。

# azure - Windows Azure 角色间通信

> ID：15336920
> 
> 赞同：2
> 
> 时间：2013-03-11T11:01:52.113
> 
> 标签：azure, asp.net-mvc-4, queue, azureservicebus

我想创建一个执行以下操作的 Azure 应用程序：

*   向用户展示了一个 MVC 4 网站（Web 角色），其中显示了命令列表。
*   当用户选择一个命令时，它会广播给所有工作角色。
*   工作角色处理任务、存储结果并通知 Web 角色
*   Web 角色显示辅助角色的组合结果

从我一直在阅读的内容来看，似乎有两种方法可以做到这一点：Windows Azure 服务总线或使用队列。每个工作人员角色还将结果存储在数据库中。

服务总线似乎更适合其发布/订阅模型，因此所有工作角色将获得相同的命令并且大致相同的时间。不过，队列似乎更容易使用。

开发时可以在模拟器本地使用服务总线吗？我正在使用免费试用版，无法在开发过程中不断保持应用程序。此外，当使用队列时，如何通知 Web 角色处理已完成？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T16:15:42.787

我同意。对于这种消息传递要求，ServiceBus 是一个更好的选择。您可以通过一些努力对队列执行相同的操作。但是，您将编写大量代码来实现 ServiceBus 已经提供给您的东西。

ServiceBus 没有像 Azure Strorage 服务（队列/表/blob）那样的本地模拟器。但是，当角色在您的开发环境中本地运行时，您仍然可以使用 ServiceBus 在角色之间进行消息传递。

至于您关于通知 Web 角色处理完成的最后一个问题，这里有几种方法。只是一些想法（不是详尽的列表）......

1.  Web 角色可以定期检查工作单元状态的表存储。
2.  另一个用于完成工作的 ServiceBus 队列/主题。
3.  内部端点。您必须有逻辑才能知道它是否只是来自工作角色 N 的更新，或者它是否指示所有工作角色的已完成工作单元。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T16:32:50.700

我同意 Rick 的回答，但还要考虑以下几点：

如果您选择服务总线主题方法，那么当每个工作人员角色上线时，都需要生成对该主题的订阅。您需要考虑订阅维护何时其中一名工作人员发生故障并被回收，或者订阅可能存在的任何原因。

告诉网络角色所有工作人员都已完成是很有趣的。Rick 提供的选项很好，但您需要在这里考虑一些事情。这意味着网络角色需要知道有多少工作人员在那里或其他一些机制来决定何时所有工作人员都报告完成。您可能会遇到五个工作角色收到消息并开始工作的情况，然后其中一个角色开始反复处理失败。其他四个报告他们已完成，但现在 Web 角色正在等待第五个。你要等多久回复？你能继续吗？如果您只是告诉系统缩小规模，而网络角色认为有 5 个，现在只有 4 个。这些都是您需要考虑的事情，它们都取决于您的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-13T14:48:05.337

根据您的问题，您可以使用任一队列服务并获得良好的结果。但他们每个人都将面临不同的挑战和优势。

服务总线队列的一些优点是它通过持久连接（最多 100 个连接）提供阻塞接收，它可以监视消息的完成情况，并且可以发送更大的消息（256KB）。

与服务总线解决方案相比，存储队列的一些优点是它稍微快一些（如果 15 毫秒对您来说很重要），您可以使用单个存储系统（因为无论如何您可能会将 Storage 用于 blob 和表服务），并且简单自动缩放。如果您需要根据负载自动缩放辅助角色，通过存储队列传递请求会使自动缩放变得微不足道——您只需在 Azure 云服务 UI 中的缩放选项卡下设置自动缩放。

可以在此处找到两种 azure 队列服务的更深入比较：http: [//msdn.microsoft.com/en-us/library/hh767287.aspx](http://msdn.microsoft.com/en-us/library/hh767287.aspx)

> 此外，当使用队列时，如何通知 Web 角色处理已完成？

对于 Azure 存储队列解决方案，我编写了一个可以提供帮助的库：[https](https://github.com/brentrossen/AzureDistributedService) ://github.com/brentrossen/AzureDistributedService 。它提供了一个代理层，可促进从 Web 角色到工作角色并通过存储队列返回的 RPC 样式通信。

# hadoop - 启动 Oozie 工作流程的问题

> ID：15336923
> 
> 赞同：0
> 
> 时间：2013-03-11T11:02:09.807
> 
> 标签：hadoop, mapreduce, oozie

我在启动 Oozie 工作流程时遇到问题：

配置：

```
<workflow-app name="Hive" xmlns="uri:oozie:workflow:0.4">
    <start to="Hive"/>
    <action name="Hive">
        <hive xmlns="uri:oozie:hive-action:0.2">
            <job-tracker>${jobTracker}</job-tracker>
            <name-node>${nameNode}</name-node>
            <configuration>
                <property>
                    <name>oozie.hive.defaults</name>
                    <value>hive-default.xml</value>
                </property>
            </configuration>
            <script>/user/hue/oozie/workspaces/hive/hive.sql</script>
              <param>INPUT_TABLE=movieapp_log_json</param>
              <param>OUTPUT=/user/hue/oozie/workspaces/output</param>
            <file>hive-default.xml#hive-default.xml</file>
        </hive>
        <ok to="end"/>
        <error to="kill"/>
    </action>
    <kill name="kill">
        <message>Action failed, error message[${wf:errorMessage(wf:lastErrorNode())}]</message>
    </kill>
    <end name="end"/>
</workflow-app> 
```

文件内容：

```
[root@localhost ~]# hadoop fs -cat /user/hue/oozie/workspaces/hive/hive.sql
SELECT * FROM ${INPUT_TABLE} 
```

我得到错误：

```
2013-03-11 06:53:10,196 INFO org.apache.oozie.command.wf.ActionStartXCommand: USER[hdfs] GROUP[-] TOKEN[] APP[Hive] JOB[0000025-130310103217365-oozie-oozi-W] ACTION[0000025-130310103217365-oozie-oozi-W@:start:] Start action [0000025-130310103217365-oozie-oozi-W@:start:] with user-retry state : userRetryCount [0], userRetryMax [0], userRetryInterval [10]
2013-03-11 06:53:10,197 WARN org.apache.oozie.command.wf.ActionStartXCommand: USER[hdfs] GROUP[-] TOKEN[] APP[Hive] JOB[0000025-130310103217365-oozie-oozi-W] ACTION[0000025-130310103217365-oozie-oozi-W@:start:] [0000025-130310103217365-oozie-oozi-W@:start:]Action status=DONE
2013-03-11 06:53:10,197 WARN org.apache.oozie.command.wf.ActionStartXCommand: USER[hdfs] GROUP[-] TOKEN[] APP[Hive] JOB[0000025-130310103217365-oozie-oozi-W] ACTION[0000025-130310103217365-oozie-oozi-W@:start:] [0000025-130310103217365-oozie-oozi-W@:start:]Action updated in DB!
2013-03-11 06:53:10,351 INFO org.apache.oozie.command.wf.ActionStartXCommand: USER[hdfs] GROUP[-] TOKEN[] APP[Hive] JOB[0000025-130310103217365-oozie-oozi-W] ACTION[0000025-130310103217365-oozie-oozi-W@Hive] Start action [0000025-130310103217365-oozie-oozi-W@Hive] with user-retry state : userRetryCount [0], userRetryMax [0], userRetryInterval [10]
2013-03-11 06:53:11,244 WARN org.apache.oozie.action.hadoop.HiveActionExecutor: USER[hdfs] GROUP[-] TOKEN[] APP[Hive] JOB[0000025-130310103217365-oozie-oozi-W] ACTION[0000025-130310103217365-oozie-oozi-W@Hive] credentials is null for the action
2013-03-11 06:53:13,734 INFO org.apache.oozie.action.hadoop.HiveActionExecutor: USER[hdfs] GROUP[-] TOKEN[] APP[Hive] JOB[0000025-130310103217365-oozie-oozi-W] ACTION[0000025-130310103217365-oozie-oozi-W@Hive] checking action, external ID [job_201303101032_0029] status [RUNNING]
2013-03-11 06:53:13,838 WARN org.apache.oozie.command.wf.ActionStartXCommand: USER[hdfs] GROUP[-] TOKEN[] APP[Hive] JOB[0000025-130310103217365-oozie-oozi-W] ACTION[0000025-130310103217365-oozie-oozi-W@Hive] [0000025-130310103217365-oozie-oozi-W@Hive]Action status=RUNNING
2013-03-11 06:53:13,839 WARN org.apache.oozie.command.wf.ActionStartXCommand: USER[hdfs] GROUP[-] TOKEN[] APP[Hive] JOB[0000025-130310103217365-oozie-oozi-W] ACTION[0000025-130310103217365-oozie-oozi-W@Hive] [0000025-130310103217365-oozie-oozi-W@Hive]Action updated in DB!
2013-03-11 06:53:41,459 INFO org.apache.oozie.servlet.CallbackServlet: USER[-] GROUP[-] TOKEN[-] APP[-] JOB[0000025-130310103217365-oozie-oozi-W] ACTION[0000025-130310103217365-oozie-oozi-W@Hive] callback for action [0000025-130310103217365-oozie-oozi-W@Hive]
2013-03-11 06:53:41,570 INFO org.apache.oozie.action.hadoop.HiveActionExecutor: USER[hdfs] GROUP[-] TOKEN[] APP[Hive] JOB[0000025-130310103217365-oozie-oozi-W] ACTION[0000025-130310103217365-oozie-oozi-W@Hive] action completed, external ID [job_201303101032_0029]
2013-03-11 06:53:41,610 WARN org.apache.oozie.action.hadoop.HiveActionExecutor: USER[hdfs] GROUP[-] TOKEN[] APP[Hive] JOB[0000025-130310103217365-oozie-oozi-W] ACTION[0000025-130310103217365-oozie-oozi-W@Hive] Launcher ERROR, reason: Main class [org.apache.oozie.action.hadoop.HiveMain], exit code [10001]
2013-03-11 06:53:41,807 INFO org.apache.oozie.command.wf.ActionEndXCommand: USER[hdfs] GROUP[-] TOKEN[] APP[Hive] JOB[0000025-130310103217365-oozie-oozi-W] ACTION[0000025-130310103217365-oozie-oozi-W@Hive] ERROR is considered as FAILED for SLA
2013-03-11 06:53:41,877 INFO org.apache.oozie.command.wf.ActionStartXCommand: USER[hdfs] GROUP[-] TOKEN[] APP[Hive] JOB[0000025-130310103217365-oozie-oozi-W] ACTION[0000025-130310103217365-oozie-oozi-W@kill] Start action [0000025-130310103217365-oozie-oozi-W@kill] with user-retry state : userRetryCount [0], userRetryMax [0], userRetryInterval [10]
2013-03-11 06:53:41,877 WARN org.apache.oozie.command.wf.ActionStartXCommand: USER[hdfs] GROUP[-] TOKEN[] APP[Hive] JOB[0000025-130310103217365-oozie-oozi-W] ACTION[0000025-130310103217365-oozie-oozi-W@kill] [0000025-130310103217365-oozie-oozi-W@kill]Action status=DONE
2013-03-11 06:53:41,877 WARN org.apache.oozie.command.wf.ActionStartXCommand: USER[hdfs] GROUP[-] TOKEN[] APP[Hive] JOB[0000025-130310103217365-oozie-oozi-W] ACTION[0000025-130310103217365-oozie-oozi-W@kill] [0000025-130310103217365-oozie-oozi-W@kill]Action updated in DB!
2013-03-11 06:53:42,030 WARN org.apache.oozie.command.coord.CoordActionUpdateXCommand: USER[hdfs] GROUP[-] TOKEN[] APP[Hive] JOB[0000025-130310103217365-oozie-oozi-W] ACTION[-] E1100: Command precondition does not hold before execution, [, coord action is null], Error Code: E1100 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T05:04:23.533

错误来自 Oozie，协调器没有启动工作流，即，如果您以 root 用户启动 Oozie，请停止服务并使用您安装 Oozie 的用户重新启动 oozie。现在重新运行工作流程。

这将解决您的问题！

# sql-server - 将记录复制到其他表时更新外键

> ID：15336925
> 
> 赞同：2
> 
> 时间：2013-03-11T11:02:14.093
> 
> 标签：sql-server, sql-server-2005

我有两个要合并在一起的表。它们都有相同的列。但是，我要复制的记录被另一个表引用。

结果，当我更新对新表的引用时，引用不再正确。我应该如何更新引用以使其保持正确？

编辑 - 道歉 - 更多细节：

目前我有这个：

```
INSERT INTO Suppliers
                      (Name, Reference, Telephone, Email, ContactName, AddressId, CommentSetId)
SELECT     Name, Reference, Telephone, Email, ContactName, AddressId, CommentSetId
FROM         Hotels 
```

我想删除表“Hotels”，但需要确保在将记录复制到表“Suppliers”后来自另一个表“HotelContract”的引用仍然正确

编辑 2 - 这是 SQL Server 2005。

我有一个表“HotelContract”，其中包含外键“HotelId”。我已将此更新为“SupplierId”，以便在将酒店复制到“Supplier”表时使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T13:30:45.460

如果您在酒店和供应商中有另一个唯一键（例如名称），您可以使用此键更新 HotelContract 中的 SupplierId（首先将外键约束放到酒店）。您可以通过 HotelContracts、Hotels 和 Suppliers 之间的连接来做到这一点：

```
update HotelContract
   set SupplierId = S.SupplierId
  from HotelContract C
 inner join
       Hotels H
          on H.HotelId = C.SupplierId -- assuming the pk column in Hotels is HotelId
 inner join
       Suppliers S
          on S.Name = H.Name -- assuming Name is unique in both tables 
```

如果您没有这样的唯一键，则必须将来自 Hotels 的原始 HotelId（现为 SupplierId）存储在 Supplier 的临时列中。在这种情况下，HotelContract 的更新很简单。

之后恢复HotelContract的外键。

# c# - C# 中的文本框事件

> ID：15336928
> 
> 赞同：1
> 
> 时间：2013-03-11T11:02:17.677
> 
> 标签：c#, winforms, events, textbox, validating

我有一个文本框。离开文本框后，第一个字符应该是大写字母。三个事件的工作方式相同。它们是离开、验证和验证。

```
if (txtLocl.Text.Length > 0)
    txtLocl.Text = txtLocl.Text.Substring(0, 1).ToUpper() + txtLocl.Text.Substring(1); 
```

我应该使用这 3 个事件中的哪个事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:18:11.357

您可以订阅[`Control.Leave`](http://msdn.microsoft.com/en-gb/library/system.windows.forms.control.leave.aspx)当控件失去焦点时将触发的事件。最初，我认为 using[`Control.LostFocus`](http://msdn.microsoft.com/en-gb/library/system.windows.forms.control.lostfocus.aspx)将是最适合使用的事件，但它无法通过设计器获得，这意味着您需要手动订阅该事件，这在我看来有点丑陋和非常规。

```
private void inputTextBox_Leave(object sender, EventArgs e)
{
    if (inputTextBox.Text != string.Empty)
    {
        string input = inputTextBox.Text;
        inputTextBox.Text = input.First().ToString(CultureInfo.InvariantCulture).ToUpper() +
                            string.Join(string.Empty, input.Skip(1));
    }
} 
```

你听起来很感兴趣[`Control.Validating`](http://msdn.microsoft.com/en-gb/library/system.windows.forms.control.validating.aspx)。using 的优点`Control.Validating`是您可以利用事件处理程序的给定参数；`CancelEventArgs`并将`Cancel`属性设置为 true。这将阻止控件失去焦点并强制用户输入*有效值*。我认为这不适合您的应用程序，因为除了格式化输入之外，您并没有真正验证任何内容。

```
private void inputTextBox_Validating(object sender, CancelEventArgs e)
{
    if (inputTextBox.Text == string.Empty)
    {
        statusLabel.Text = "The given input is not valid.";
        e.Cancel = true;
    }
} 
```

请记住，当表单关闭时，所有控件随后都会失去焦点并`Control.Validating`触发事件，这可能会阻止表单关闭，直到所有字段都通过其相关验证检查。如果您发现自己需要避免这种行为，快速搜索将占上风。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-20T10:15:54.360

还有许多其他活动。

正如[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.leave%28v=vs.100%29.aspx)所说，当您通过使用键盘（TAB、SHIFT+TAB 等）、调用 Select 或 SelectNextControl 方法或将 ContainerControl.ActiveControl 属性设置为当前窗体来更改焦点时，会发生焦点事件按以下顺序：

```
1) Enter

2) GotFocus

3) Leave

4) Validating

5) Validated

6) LostFocus 
```

当您使用鼠标或调用 Focus 方法更改焦点时，焦点事件按以下顺序发生：

```
1) Enter

2) GotFocus

3) LostFocus

4) Leave

5) Validating

6) Validated 
```

如果 CausesValidation 属性设置为 false，则会抑制 Validating 和 Validated 事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:06:46.747

您可能想要订阅 LostKeyboardFocus 事件（在 WPF 中）或 Leave 事件（在 WF 中）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T11:16:57.110

我建议使用 Leave，因为我假设您没有验证该值，而是对其进行格式化。Validating 和 Validated 应分别包含验证代码和验证的后果，IMO。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T11:05:28.787

> textBox1_Leave 适合您。

在此处查看有关文本框的事件和描述>>

[http://msdn.microsoft.com/en-us/library/system.windows.forms.textbox_events.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.textbox_events.aspx)

希望它有帮助。

# orchardcms - 为 Orchard 主题中的特定位置创建模板

> ID：15336931
> 
> 赞同：0
> 
> 时间：2013-03-11T11:02:32.730
> 
> 标签：orchardcms, orchardcms-1.6

为 Orchard 1.6 开发自定义主题。我的顶级导航和最近的博客完全按照我的意愿呈现。但是，我想创建一个页脚，以不同的方式显示导航和最近的博客文章。我在页脚中使用了四个区域，并希望向它们添加小部件（导航、最近的博客文章），但是我希望呈现不同。

我不知道如何在这些区域内创建用于这些小部件的视图。形状跟踪工具中显示的模板覆盖选项并不特定于我所在的区域，因此它们将应用于网站正文中的那些（我已经实现了）。

我正在尝试做的事情是否可能没有我试图避免的一些自定义代码（不仅仅是一个视图，而是某种类型的新组件）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T23:11:49.403

如果启用 Widget Alternates，您将获得可以使用的其他替代项，特别是取决于区域名称。

# html - 将 ul 与其他浮动 ul 一起放在 div 中

> ID：15336936
> 
> 赞同：2
> 
> 时间：2013-03-11T11:02:46.573
> 
> 标签：html, css

我有一个包含两个 ul 的 div。我想将第一个 ul 放在他的右边，第二个 ul 放在中间。
我不能使用绝对定位，因为它在嵌套元素和移动视图中给我带来了其他问题。

这就是我所做的：

```
<div class="w">
    <ul class="right"><li>a very very very long text</li></ul>
    <ul class="center"><li>center</li></ul>
</div>

.w {
    text-align: center;
    display: inline-block;
    width: 100%;
}

ul {
    list-style-type:none;
    margin: 0;
    padding: 0;
}

li {
    float: left;
}

.right {
    float: right;
}

.center {
    display: inline-block;
} 
```

你可以在这里看到 jsfiddle：http: [//jsfiddle.net/mF7XR/](http://jsfiddle.net/mF7XR/)

问题是居中的 ul 与左侧和右侧 ul 开始之间的中间对齐（参见示例）。因此它没有正确居中。如何居中更正第二个 ul？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:15:04.107

我不确定你是否适合使用 javascript。无论如何，我做了一些工作。请看一看。

**javascript**

```
//Added Id to ul.center as "center"
function resize(){
  var width = document.body.offsetWidth;
  var center = document.getElementById('center');
  center.style.marginLeft = (width/2) - (center.offsetWidth/2);
}
//Call the above function on "resize" and "load" events. 
```

* * *

**CSS**

```
.center {
   display: inline-block;
   float:left;
} 
```

**[工作箱](http://jsbin.com/ukazad/2/edit)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:25:24.120

This solution uses no absolute positioning. Tested on Win/Chrome.

Change the `.center` to

```
.center {
    display: inline-block;
    position: relative;
    width: 100%;
    top: -20px; /* move up */
} 
```

and add this rule

```
.center li {
    float: none;
} 
```

**[jsfiddle](http://jsfiddle.net/mF7XR/3/)**

* * *

**Update**

If your content is not known, then you need JS (or jQuery) to set the offset relative position.

Initially I thought about using a different markup, but your restriction on absolute positioning pretty much kills this idea.

**[jsfiddle](http://jsfiddle.net/mF7XR/5/)**

It would be interesting to know why you cannot use absolute position. Maybe the root of your problem lies there.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:10:40.160

怎么样`position:relative`？然后，您可以将其放置在任何位置，而不会导致嵌套元素和移动视图出现问题。

[http://jsfiddle.net/mF7XR/4/](http://jsfiddle.net/mF7XR/4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T11:29:23.333

定义居中元素的宽度，然后只有你能得到你想要的。您还可以按如下方式定义边距... 边距：0 {大于右侧浮动元素的数字}px 0 {大于左侧浮动元素的数字在这里您只有两个元素，所以放在这里 0}px;

# postgresql - postgresql中的复杂查询

> ID：15336937
> 
> 赞同：2
> 
> 时间：2013-03-11T11:02:49.470
> 
> 标签：postgresql, pivot

大家好，向大家致以热烈的问候，我在 posgresql 中编写复杂的查询时遇到了一些挑战。事实是我在编写此特定查询期间时遇到问题，非常需要您的帮助。让我们开始吧。

这是我的桌子

```
[products_tb]         [client_tb]          [sales_tb]
+--------------+      +-------------+      +-------------+--------------+-----+
| product_name |      | client_name |      | client_name | product_name | qty | 
+--------------+      +-------------+      +-------------+--------------+-----+
| shoe         |      | john        |      | john        | shoe         | 20  |
+--------------+      +-------------+      +-------------+--------------+-----+
| belt         |      | bob         |      | john        | belt         | 9   |
+--------------+      +-------------+      +-------------+--------------+-----+
                      | kim         |      | bob         | shoe         | 2   |
                      +-------------+      +-------------+--------------+-----+
                                           | bob         | belt         | 98  |
                                           +-------------+--------------+-----+
                                           | kim         | shoe         | 46  |
                                           +-------------+--------------+-----+
                                           | kim         | belt         | 3   |
                                           +-------------+--------------+-----+

[query output] # this output will be displayed using php and html
+----------+-------+------+-----+-----+
| products | Total | john | bob | kim |
+----------+-------+------+-----+-----+
| shoe     | 68    | 20   | 2   | 46  |
+----------+-------+------+-----+-----+
| belt     | 110   | 9    | 98  | 3   |
+----------+-------+------+-----+-----+ 
```

我正在尝试编写一个允许我生成表 [查询输出] 的查询。任何帮助都感激不尽。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:43:21.733

不使用 cross_tab 的版本：

```
select p.product_name, sum(s.qty), 
sum(CASE WHEN c.client_name='john' THEN s.qty END) as john,
sum(CASE WHEN c.client_name='bob' THEN s.qty END) as bob,
sum(CASE WHEN c.client_name='kim' THEN s.qty END) as kim
   from products_tb AS p 
   JOIN sales_tb AS s ON p.product_name=s.product_name
   JOIN clients_tb AS c ON c.client_name=s.client_name
   GROUP BY p.product_name; 
```

[http://sqlfiddle.com/#!12/afc9a/10](http://sqlfiddle.com/#!12/afc9a/10)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:10:50.630

这是使用标准 SQL 的一种方法：

```
SELECT st.product_name AS products,
       SUM(st.qty) AS Total,
       (SELECT SUM(st_john.qty)
        FROM sales_tb st_john
        WHERE client_name = 'john' AND st_john.product_name = st.product_name) AS john,
       (SELECT SUM(st_bob.qty)
        FROM sales_tb st_bob
        WHERE client_name = 'bob' AND st_bob.product_name = st.product_name) AS bob,
       (SELECT SUM(st_kim.qty)
        FROM sales_tb st_kim
        WHERE client_name = 'kim' AND st_kim.product_name = st.product_name) AS kim
FROM sales_tb st
GROUP BY product_name 
```

请参阅[SQL Fiddle 演示](http://sqlfiddle.com/#!1/2e3bd/4)

# r - 从 rle() 对象中减去最后 N 个值

> ID：15336941
> 
> 赞同：4
> 
> 时间：2013-03-11T11:02:57.590
> 
> 标签：r, sequence, run-length-encoding

以下函数用于为以下数据集创建路径概览：

```
tc <- textConnection('
path           touchpoint  time
abc             A           1        
abc             A           2        
abc             B           3        
abc             C           4         
def             A           2       
def             B           3       
def             D           4        
def             C           5        
def             D           6 
ghi             A           1
ghi             A           2
ghi             A           3
ghi             C           4
jkl             A           5        
jkl             A           6        
jkl             B           7        
jkl             C           8     
mno             B           1        
mno             A           2        
mno             A           3       
mno             C           4 
pqr             A           1
pqr             C           2
')

paths <- read.table(tc, header=TRUE) 
```

--

```
library(plyr)

foo <- function(x){
  r <- rle(as.character(x))
  short <- paste0(r$values, collapse="_")
  long  <- paste0(r$values, "(", r$lengths, ")", collapse="_")
  data.frame(short, long)
}

ddply(paths, .(path), function(x)foo(x$touchpoint))

  path                     short                            long
1  abc                     A_B_C                  A(2)_B(1)_C(1)
2  def                 A_B_D_C_D        A(1)_B(1)_D(1)_C(1)_D(1)
3  ghi                       A_C                       A(3)_C(1)
4  jkl                     A_B_C                  A(2)_B(1)_C(1)
5  mno                     B_A_C                  B(1)_A(2)_C(1)
6  pqr                       A_C                       A(1)_C(1) 
```

因此，这个函数创建了两种形式的“路径”：

*   Short 提供从最近到最近的每条路径的接触点序列。
*   Long 提供从最近到最近的每条路径的接触点序列，包括涉及接触点的次数。

由于某些路径的接触点数量可能非常大，我想加入以下约束：仅从和中选择`n`最新的值。由于路径是从对象构造的，我的问题是：`short``long``rle()`

如何`N`从 rle() 对象中获取值及其相应的长度？由于路径是从最近的接触点保存到最近的接触点，因此`N`需要选择最后的值和相应的长度。`rle()`文档没有为此问题提供解决方案。

预期结果`N=2`是：

```
 path                     short                            long
1  abc                     B_C                          B(1)_C(1)
2  def                     C_D                          C(1)_D(1)
3  ghi                     A_C                          A(3)_C(1)
4  jkl                     B_C                          B(1)_C(1)
5  mno                     A_C                          A(2)_C(1)
6  pqr                     A_C                          A(1)_C(1) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T11:08:24.180

`r$values`仅取和的最后 N 个值`r$lengths`：

```
foo <- function(x,N){
  r <- rle(as.character(x))
  lastN<-max(1,(length(r$lengths) - N + 1)):length(r$lengths)
  short <- paste0(r$values[lastN], collapse="_")
  long  <- paste0(r$values[lastN], "(", r$lengths[lastN], ")", collapse="_")
  data.frame(short, long)
}

ddply(paths, .(path), function(x) foo(x$touchpoint,N=2))

  path short      long
1  abc   B_C B(1)_C(1)
2  def   C_D C(1)_D(1)
3  ghi   A_C A(3)_C(1)
4  jkl   B_C B(1)_C(1)
5  mno   A_C A(2)_C(1)
6  pqr   A_C A(1)_C(1)

 ddply(paths, .(path), function(x) foo(x$touchpoint,N=4))
  path   short                long
1  abc   A_B_C      A(2)_B(1)_C(1)
2  def B_D_C_D B(1)_D(1)_C(1)_D(1)
3  ghi     A_C           A(3)_C(1)
4  jkl   A_B_C      A(2)_B(1)_C(1)
5  mno   B_A_C      B(1)_A(2)_C(1)
6  pqr     A_C           A(1)_C(1) 
```

编辑：编辑函数以获取最后 N 个值，而不是第一个。

# .htaccess - 重定向有效但

> ID：15336943
> 
> 赞同：1
> 
> 时间：2013-03-11T11:03:04.353
> 
> 标签：.htaccess

我已经设置了从旧域到新域的重定向，它可以工作，但是有些链接没有正确重定向....

```
 <IfModule mod_rewrite.c>
     RewriteEngine On
     RewriteCond %{HTTP_HOST} ^old.us$ [OR]
     RewriteCond %{HTTP_HOST} ^www.old.us$
     RewriteRule (.*)$ http://www.new.com/$1 [R=301,L]
 </IfModule> 
```

我正在尝试重定向：`www.old.us/scripts/affiliate.pl?id=505`到`www.new.com`

但像这样重定向：`www.new.com/scripts/affiliate.pl?id=505`导致**404**页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:13:11.393

将您的代码更改为：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)?old\.us$ [NC]
RewriteRule ^ http://www.new.com/? [R=301,L] 
```

# c# - Asp.Net 图表在 y 轴上有多个系列和多个值

> ID：15336950
> 
> 赞同：0
> 
> 时间：2013-03-11T11:03:20.627
> 
> 标签：c#, asp.net, charts

我有一个如下所示的数据表：

```
 Data      Value 1   Value 2     Value 3 
 series1     32        -2            46 
 series2    -62                      99
 series3     19        23            98 
```

在图表上，我需要它看起来像这样：

```
32 -2 46      -62    99       19 23 98
series1        series2         series3 
```

和图例：值 1，值 2，值 3

我尝试过的代码：

```
private void LoadChartCurrencyTotal(DataTable initialDataSource)
    {
        DataTable pivotedDt = Pivot(initialDataSource);
        chart1.DataSource = pivotedDt;
        foreach (DataRow dr in pivotedDt.Rows)
        {
            Series series = new Series(dr["Data"].ToString());

            List<string> colNames = (from DataColumn col in pivotedDt.Columns where col.ColumnName != "Data" select col.ColumnName).ToList();

            series.XValueMember = "Data";
            series.YValueMembers = string.Join(",", colNames);

            chart1.Series.Add(series);
        }
        chart1.DataBind();
        FormatChart(chart1);
    } 
```

`Data points insertion error. Only 1 Y values can be set for this data series.`由于连接的列名，这会返回。

也试过：

```
private void LoadChartCurrencyTotal(DataTable initialDataSource)
    {
        DataTable pivotedDt = Pivot(initialDataSource);
        foreach (DataRow pivotDr in pivotedDt.Rows)
        {
            Series serie = new Series(pivotDr["Data"].ToString());

            List<decimal?> colValues = new List<decimal?>();
            foreach (DataColumn col in pivotedDt.Columns)
            {
                if (col.ColumnName != "Data")
                {
                    //colValues.Add(pivotDr[col.ColumnName] != DBNull.Value
                    //                 ? decimal.Parse(pivotDr[col.ColumnName].ToString())
                    //                 : new decimal?());
                    decimal? colValue = pivotDr[col.ColumnName] != DBNull.Value
                                            ? decimal.Parse(pivotDr[col.ColumnName].ToString())
                                            : new decimal?();
                    serie.Points.AddXY(pivotDr["Data"], colValue);
                }
            }

            //serie.Points.AddXY(pivotDr["Data"], string.Join(",", colValues));

            chart1.Series.Add(serie);
        }
        FormatChart(chart1);
    } 
```

这编译但结果完全搞砸了：传说sais series1，series2，series3，结果是：

```
32 -62 19     -2    23     46 99 98
series1         series2     series3 
```

我得到每列而不是每行的结果。

我最后一次尝试的是：

```
DataView pivotedDv = pivotedDt.AsDataView();
chart1.DataBindTable(pivotedDv, pivotedDt.Columns[0].ColumnName); 
```

但这只会返回：

```
0.00       0.00      0.00
series1    series2   series3 
```

和传说：0.00

希望有人知道这应该如何完成。但请不要拖放和单击解决方案，而是代码。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T13:30:18.317

我想我已经按照您喜欢的方式使用以下代码。希望这可以帮助：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            DataTable dt = GetTestData();
            LoadChartCurrencyTotal(dt);
        }

    }

    private void LoadChartCurrencyTotal(DataTable initialDataSource)
    {
        for (int i = 1; i < initialDataSource.Columns.Count; i++)
        {
            Series series = new Series();
            foreach (DataRow dr in initialDataSource.Rows)
            {
                int y = (int)dr[i];
                series.Points.AddXY(dr["Data"].ToString(), y);
            }
            Chart1.Series.Add(series);
        }
    }

    private DataTable GetTestData()
    {
        DataTable dt = new DataTable();
        dt.Columns.Add("Data", Type.GetType("System.String"));
        dt.Columns.Add("Value1", Type.GetType("System.Int32"));
        dt.Columns.Add("Value2", Type.GetType("System.Int32"));
        dt.Columns.Add("Value3", Type.GetType("System.Int32"));
        DataRow dr1 = dt.NewRow();
        dr1["Data"] = "series1";
        dr1["Value1"] = 32;
        dr1["Value2"] = -2;
        dr1["Value3"] = 46;
        dt.Rows.Add(dr1);
        DataRow dr2 = dt.NewRow();
        dr2["Data"] = "series2";
        dr2["Value1"] = -62;
        dr2["Value2"] = 0;
        dr2["Value3"] = 99;
        dt.Rows.Add(dr2);
        DataRow dr3 = dt.NewRow();
        dr3["Data"] = "series3";
        dr3["Value1"] = 19;
        dr3["Value2"] = 23;
        dr3["Value3"] = 98;
        dt.Rows.Add(dr3);
        return dt;
    } 
```

![在此处输入图像描述](../Images/e32f9538fb3d3a633fa2925679d1d8cb.png)

# ruby-on-rails - Rails：使用方法“属性”仅获取子模型的某些属性

> ID：15336958
> 
> 赞同：0
> 
> 时间：2013-03-11T11:03:42.647
> 
> 标签：ruby-on-rails, activerecord, ruby-on-rails-3.2

有没有办法像这样只获取外国模型的某些字段：

```
@user = User.find(:first, :select => ['`users`.`id`, `users`.`nickname`, `users`.`birthdate`, `users`.`sex`'], :conditions => ['`users`.`id` = ?', id])

city = @user.profile.city.attributes 
```

随着`attributes`我检索我的城市模型的所有属性。我只想得到一些。就像是：

```
city = @user.profile.city.attributes[:name, :postcode] 
```

是否可以通过保持语法像上面一样简单？我想用来`attributes`接收哈希。

多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-10T19:22:27.333

如果您不介意在 SQL 返回所有内容后选择字段，您可以这样做：

```
@user.profile.city.attributes.select{|k,v| ["name","postcode"].include?(k)} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:10:51.030

以您的方式链接时，无法选择外国模型的字段。唯一的方法是对 City 模型进行查询：

```
City.where(:profile_id => @user.profile.id, :select => ...) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:11:06.770

你不能在属性之后给出争论，否则会引发 ArguementError。在这种情况下，您可以使用内部连接来获取记录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-02T21:08:54.037

```
city = @user.profile.city.pluck(:name, :postcode) 
```

# ruby - YARD ⇒ 如何根据 YARD 插件中的一个 DSL 语句将自定义输出添加到几个方法描述中

> ID：15336962
> 
> 赞同：0
> 
> 时间：2013-03-11T11:03:55.397
> 
> 标签：ruby, yard

我在为以下 DSL 编写 YARD 插件时遇到问题：

```
class MyClass
  my_dsl :do_it, :do_other
  def do_it
    # do it
  end
  def do_other
    # do other
  end
  def do_unrelated
    # do unrelated
  end
end 
```

现在我想为这些方法的文档片段添加注释，这些片段受 DSL “影响” `my_dsl`。在`my_dsl`处理程序中，范围完全不同（我不想添加一些新文档，我想扩展已经存在的方法。）

所以我决定在里面使用[Proxy](http://rubydoc.info/docs/yard/YARD/CodeObjects/Proxy)代码对象`MyDSLHandler#process`来标记延迟未来后处理所需的方法（这将发生在内置`MethodHandler`on 中`def do_it ; … ; end`。）它看起来像：

```
class MyDSLHandler < YARD::Handlers::Ruby::DSLHandler
  handles method_call(:my_dsl)
  namespace_only

  def process
    statement.parameters.each { |astnode|
      mthd = astnode.jump(:string_content).source if astnode.respond_to? :jump
      obj = YARD::CodeObjects::Proxy.new(namespace, "\##{mthd}", :method)
      register(obj)
      obj[:my_dsl_params] << {
        name: mthd,
        file: statement.file, line: statement.line # I need this!
      }
    }
  end
end 
```

现在的问题是该`Proxy`对象是从 plain 派生的`Object`，而不是从`YARD::CodeObjects::Base`所以没有`[]=`定义方法：

```
[warn]: Load Order / Name Resolution Problem on MyClass#do_it:
[warn]: -
[warn]: Something is trying to call [] on object MyClass#do_it before it has been recognized.
[warn]: This error usually means that you need to modify the order in which you parse files
[warn]: so that MyClass#do_it is parsed before methods or other objects attempt to access it.
[warn]: -
[warn]: YARD will recover from this error and continue to parse but you *may* have problems
[warn]: with your generated documentation. You should probably fix this.
[warn]: -
[error]: Unhandled exception in Yard::Handlers::MyDSLHandler:
[error]:   in `example_mydsl.rb`:5:

    5: my_dsl :do_it, :do_other

[error]: ProxyMethodError: Proxy cannot call method #[] on object 'MyClass#do_it' 
```

我应该如何将一些值从当前上下文存储到`Proxy`对象，以便它们在对象实际实例化期间可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:00:21.077

好吧，我能够解决它。

这里的使用`Proxy`是不应该的。s 有一个非常特殊的`CodeObject`特性：它们是“沉默的”单例。因此，当您通过 定义对象时，对同一对象（根据）的`CodeObject.new`所有即将调用都将重新映射到现有对象。`new``Registry`

因此，在我的情况下，我只是创建`MethodObject`：

```
m = "#{astnode.jump(:string_content).source[1..-1]}";
obj = YARD::CodeObjects::MethodObject.new(namespace, "#{m}") 
```

然后我在新创建的对象上做我想做的事：

```
obj.my_dsl_params = { :win => true, :mthd => "#{m}", … } 
```

方法定义解析中的对象将`merge`这些属性与它自己的。唯一需要的是注册一个对象或从系统注册方法`register(obj)`返回它。`process`

# php - 以编程方式设置用户图片的 Drupal 7 问题

> ID：15336963
> 
> 赞同：0
> 
> 时间：2013-03-11T11:03:55.827
> 
> 标签：php, drupal, drupal-7

我正在使用脚本以编程方式在 Drupal 7 中设置用户图片。该脚本如下所示：[Drupal 7 save user picture programmatically](https://stackoverflow.com/questions/15297551/drupal-7-save-user-picture-programmatically)。

该脚本工作正常，但是一旦为特定用户设置了用户图片，并且如果我尝试删除该图片（作为管理员或用户本人），服务器将返回：

> 警告：取消链接（/home/hkdepot/public_html/drupal_dev_4/sites/default/files/avatars/upload/b8f1e69e83aa12cdd3d2babfbcd1fe27_101.jpg）：drupal_unlink() 中的权限被拒绝（/home/hkdepot/public_html/drupal_dev_4/includes/file 的第 2199 行.inc）。

该文件不会从文件夹中删除。

这是我应该担心的吗？这是设置图片时的权利问题吗？我该如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:30:25.253

> 775 = rwxrwxr-x =**用户**：*读写执行*；**组**：*读写执行*；**世界**：*读取，执行*

这只是意味着试图删除文件（可能是 www-data）的用户不是所有者，也不是所有权组。所以你要么需要

1.  将文件权限设置为`777`
2.  将所有者更改为正在删除的用户
3.  将要删除的用户添加到组

进一步阅读：

*   [Linux 文件权限位掩码](https://www.google.com/search?q=linux+file+permission+bitmask&aq=f&oq=linux+file+permission+bitmask&aqs=chrome.0.57.5680j0&sourceid=chrome&ie=UTF-8)
*   [如何在 Linux 中更改文件的所有者和组](https://www.google.com/search?q=linux+chown&aq=f&oq=linux+chown&aqs=chrome.0.57j5j0l2j62l2.1601j0&sourceid=chrome&ie=UTF-8)

# android - 运行应用程序时出错

> ID：15336968
> 
> 赞同：0
> 
> 时间：2013-03-11T11:04:10.140
> 
> 标签：android, stack-overflow, tabactivity

在我的 Android 应用程序的主 Activity 中`tabActivity`，其中一个选项卡包含另一个选项卡活动。我用不同的视图加载第二个活动。

在模拟器上加载应用程序时出错。

```
03-11 16:28:46.463: E/AndroidRuntime(23736): FATAL EXCEPTION: main
03-11 16:28:46.463: E/AndroidRuntime(23736): java.lang.StackOverflowError
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.text.Styled.measureText(Styled.java:430)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.text.Layout.measureText(Layout.java:1655)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.text.Layout.getLineMax(Layout.java:689)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.text.Layout.draw(Layout.java:340)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.text.BoringLayout.draw(BoringLayout.java:365)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.widget.TextView.onDraw(TextView.java:4150)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.View.draw(View.java:6880)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.View.draw(View.java:6883)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.widget.AbsListView.dispatchDraw(AbsListView.java:1480)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.widget.ListView.dispatchDraw(ListView.java:3138)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.widget.ExpandableListView.dispatchDraw(ExpandableListView.java:229)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.View.draw(View.java:6986)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.widget.AbsListView.draw(AbsListView.java:2584)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.View.draw(View.java:6883)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.View.draw(View.java:6883)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.View.draw(View.java:6883)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.View.draw(View.java:6883)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.View.draw(View.java:6883)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.View.draw(View.java:6883)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1862)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewRoot.draw(ViewRoot.java:1522)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewRoot.performTraversals(ViewRoot.java:1258)
03-11 16:28:46.463: E/AndroidRuntime(23736):    at android.view.ViewRoot.handleMessage(ViewR 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:06:33.590

当正在运行的程序的堆栈深度超过某些平台或 VM 特定限制时抛出。通常，这只会在程序变得无限递归时发生，但它也可能发生在正确编写（但深度递归）的程序中。 [更多细节](http://developer.android.com/reference/java/lang/StackOverflowError.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T13:53:01.307

最有可能在您的子活动中，您尝试再次加载第一个活动，该活动加载第二个活动，该活动再次加载第一个活动，依此类推，导致递归并且您的应用程序因达到操作系统应用的内存限制而死亡.

# java - 在构造函数中调用类的setter或直接传递值在Java中更好吗？

> ID：15336975
> 
> 赞同：2
> 
> 时间：2013-03-11T11:04:24.837
> 
> 标签：java, constructor, setter

```
class Foo(){

String name;

public Foo(String name){
   //code to be inserted
}

public void setName(String name){
   this.name = name;
}

} 
```

在缺少的行中插入什么会更好，为什么：

1.)`this.name = name;`

2.)`setName(name);`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T11:06:58.513

由你决定。

例如，如果您想在将传递给构造函数的属性存储到`name`变量中之前对其执行一些验证，请调用 setter。

但是如果你想避免这种验证，或者你的 setter 可能抛出异常，直接分配变量。

这里最重要的是在构造函数方法的末尾创建了一个一致的实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T11:06:51.180

```
setName(name); 
```

以防万一您在 setter 中添加了一些检查，否则您可以避免 setter。

例如

```
public void setWeight(int weight){
  if(weight<=0)
    this.weight = 50;  // set some default/average weight
  else
    this.weight = weight;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T11:12:35.393

一般来说，setter 调用更安全。setter 可能有额外的逻辑：

1.  数据验证
2.  状态更新：例如，设置集合的容量有时意味着将数据复制到更大的容器中。
3.  状态更新以维护类不变量：设置一个字段可能需要更改另一个字段以使其保持一致。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T11:11:30.770

在我看来，最好的方法是传递 setter 方法中的值以及在为该类创建对象时更重要的值，然后将它们传递给构造函数。

如果你尝试在构造函数中传递所有值，那么随着你的类的增长，它会变得更大更丑，因为有太多参数来创建对象。

因此，例如，假设您的类 Foo 依赖于属性 int id，并假设您需要始终基于此 id 在构造函数中执行一些逻辑。因此，您将创建一个传递此 ID 的构造函数。稍后使用 setter 方法向该对象的属性添加值。

```
 Foo(int id){

  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T11:05:48.153

```
class Foo(){

   String name;

   public Foo(String name){
      this.name = name;    
   }

} 
```

在设置您可以调用的名称时`Foo(name)`

# javascript - 数组的Javascript最大值并找到它在哪里？

> ID：15336978
> 
> 赞同：3
> 
> 时间：2013-03-11T11:04:28.677
> 
> 标签：javascript, arrays, numbers, max

javascript问题在这里...

我需要在数组中找到最大的数字，然后返回这个数字在数组中的位置。它无法排序，因为它需要与另一个数组中的单词匹配。这是数组：

```
var array1 = dan, john, james, harry, mike;
var array2 = 66, 33, 85, 34, 45; 
```

基本上，该数字必须与其已经使用的名称相匹配。如果有人有答案，我会很高兴:)

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T11:07:36.903

```
var array1    = [ 'dan', 'john', 'james', 'harry', 'mike' ],
    array2    = [ 66, 33, 85, 34, 45 ],
    maxPos    = Math.max.apply( null, array2 ),
    posInArr  = array2.indexOf( maxPos );

console.log( array1[ posInArr ] );  // 'james' 
```

上面的代码演示了使用`Math.max()`and`Array.prototype.indexOf()`来获取其中的最大数字`array2`，然后在该数组中找到该数字的索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T11:10:07.650

这是搜索脚本：

```
var array1 = ['dan', 'john', 'james', 'harry', 'mike'];
var array2 = [66, 33, 85, 34, 45];
var max = array2.length-1;
for (var i=array2.length-1; i--;) {
   if (array2[i] > array[max]) {
      max = i;
   }
}
alert(array1[max]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:08:04.767

```
 var array1 = dan, john, james, harry, mike;

  Array.max = function( array ){
        return array1.indexOf(Math.max.apply( Math, array ));
    }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T11:10:45.923

您可以将数组读入循环。如果读取的数字高于前一个，则将其存储到一个变量中，并为其索引使用第二个变量。

最后，您将获得数组的最大值及其索引。

# java - 从数组中获取每个元素并将其放在不同的 JTable 行中

> ID：15336980
> 
> 赞同：0
> 
> 时间：2013-03-11T11:04:36.807
> 
> 标签：java, arrays, jtable

如何从数组中获取每个元素并将其放在不同的 JTable 行中？

我存档的是一个结构如下的表：

```
 +--------------------------+------------------------+
             +   Peak                   +   Comments/Assignment  +
             +--------------------------+------------------------+
             + element1, element 2, ... +                        +
             +--------------------------+------------------------+ 
```

我想要这样的东西：

```
 +----------+------------------------+
             +   Peak   +   Comments/Assignment  +
             +----------+------------------------+
             + element1 +                        +
             + element2 +                        +
             + element3 +                        +
             +   ...    +                        +
             +----------+------------------------+ 
```

现在我有这个（见评论）：

```
Object[] objVal = (myJList).getSelectedValues(); //get selected values from a JList
            String[] stringArray = Arrays.copyOf(objVal, objVal.length, String[].class); //put in a String Array

            int[] intArray = new int[stringArray.length];
            for (int i = 0; i < stringArray.length; i++) {
                intArray[i] = Integer.parseInt(stringArray[i]); //parse Int
            }

            Arrays.sort(intArray); //sort it ascending

            JFrame f = new JFrame(); //my JFrame
            JPanel p = new JPanel(); //add a JPanel

            DefaultTableModel modelPeaks = new DefaultTableModel(); //JTable model
            JTable table = new JTable(modelPeaks); //assign the model

            modelPeaks.addColumn("Peak");
            modelPeaks.addColumn("Comments / Assignment");

            modelPeaks.addRow(new Object[]{Arrays.toString(intArray).replace("[", "").replace("]", "")}); //add a raw with the values and remove the squere brackets

            //but what I want is to add each element from the array to a separate row and to fill up just the first column not to add all elements to a row

            /* example of what I want to archive
             +----------+------------------------+
             +   Peak   +   Comments/Assignment  +
             +----------+------------------------+
             + element1 +                        +
             + element2 +                        +
             + element3 +                        +
             +   ...    +                        +
             +----------+------------------------+
             */

            JScrollPane scrollPane = new JScrollPane(table);

            p.setLayout(new FlowLayout());
            p.add(scrollPane);
            f.add(p);
            f.setVisible(true);
            f.setSize(500, 500); 
```

感谢您抽出宝贵时间，如果您不明白我要归档的内容，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:55:01.320

您可以将代码更改为

```
for(int i=0;i<intArray.length;i++)
{
    modelPeaks.addRow(new Object[]{intArray[i],/*Comments/Assignment value*/}); 
} 
```

# android - 安卓：imeOptions。按钮不显示

> ID：15336982
> 
> 赞同：2
> 
> 时间：2013-03-11T11:04:41.740
> 
> 标签：android, user-interface, ime

我尝试设置`android:imeOptions`为`actionSend`, `actionSearch`。但是键盘上没有“发送”或“搜索”按钮，只有通常的“Enter”键。我还尝试设置不同的输入类型。（我正在使用 HTC Sensation XL。）怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:09:55.660

我建议你切换`EditText`到`singleLine`模式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-02T02:51:19.283

目前在 Android Studio 2.2.3 如果你使用

```
android:singleLine="true" 
```

IDE 发出警告，它已被弃用，请改用 maxlines。

```
android:maxLines="1" 
```

但是 maxLines 并不能解决问题。解决方案是只添加属性 inputType。例子 ：

```
<EditText
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/actionDoneDemo"
    android:layout_below="@id/nameET"
    android:imeOptions="actionDone"
    android:hint="Action Done Demo"
    android:inputType="text"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:34:05.687

试试这些[actionDone imeOption 在 Android 2.3 中的 EditText 上不起作用](https://stackoverflow.com/questions/5578991/actiondone-imeoption-doesnt-work-on-edittext-in-android-2-3)

如果不支持，请阅读[如何处理 ImeOptions 的完成按钮单击？](https://stackoverflow.com/questions/2004344/android-edittext-imeoptions-done-track-finish-typing). 可能是 HTC 实现了自己的软键盘，忽略了 imeOptions

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-25T07:44:19.257

只需在 xml 中执行：

```
<EditText android:imeOptions="actionSearch" 
    android:inputType="text"/> 
```

编码快乐！！

# android-layout - 如何在活动布局的顶部动态添加视图，从而自动将旧视图向下移动

> ID：15336983
> 
> 赞同：0
> 
> 时间：2013-03-11T11:04:42.297
> 
> 标签：android-layout

我正在开发一个应用程序，其中我在操作栏上有一个图标。当我单击此操作栏图标时，一个**EditText**应该出现在布局的顶部（在操作栏下方），并且布局上的所有其他数据都应该向下移动.我正在使用**相对布局**。

我知道我们如何在相对布局中动态添加视图。但是在这里我必须在布局的顶部添加项目，同时在单击图标之前顶部还有一些视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:23:41.293

如果它适合您，请尝试以下操作，根据我对您问题的理解，这就是您所需要的。

```
 EditText et = new EditText(this);
    empty.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
    et.setText("Dynamic EditText!");
    et.setMinLines(1);
    et.setMaxLines(3);
    relativelayout.addView(et);

 // assuming you already have your relative layout and the rest declared. 
```

# sql - SQL 派生表导致未知列

> ID：15336989
> 
> 赞同：1
> 
> 时间：2013-03-11T11:04:47.987
> 
> 标签：sql, mysql-error-1054, derived-table

```
+------------------+        +------------------+    
| object           |        | example          |
+------------------+        +------------------+    
| id               |        | id               |    
| table_name       |        | ...              |    
| ref_id           |        |                  |    
+------------------+        +------------------+    

object  [ id = 5, table_name = example, ref_id = 2]
example [ id = 2 ] 
```

我有一个表，它可以代表一组来自多个不同表的对象。这些对象都有一个`id`, 引用`object.ref_id`。

我正在尝试通过 选择原始对象（从 引用的表中`object.table_name`）`object.id`。为此，我尝试使用以下 SQL 查询。虽然这会导致`#1054 - Unknown column 'entity.id' in 'where clause'`.

```
SELECT  * 
FROM    (
        SELECT  table_name
        FROM    object 
        WHERE   id = 5) AS entity
WHERE   entity.id = (
        SELECT  ref_id
        FROM    object 
        WHERE   id = 5) 
```

我究竟做错了什么？

**案例示例**

```
SELECT * 
FROM example 
WHERE id = (
    SELECT  ref_id
    FROM    object 
    WHERE   id = 5 ) 
```

虽然，对于我来说，FROM 子句不像示例中那样简单，因为这个值通常是从`object.table_name`.

**使用 TOMBOM 的方法进行更新**

使用 Tombom 的解决方案会导致错误，为了测试，我已经替换了 CONCAT 函数中的变量。

```
SET @sql = CONCAT('SELECT * FROM ', 'example', ' WHERE id = ', '1');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

> #1243 - 给 EXECUTE 的未知准备好的语句处理程序 (stmt)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:19:39.857

你不能以这种方式告诉 MySQL 一个（子）查询的结果是一个表名。您必须使用结果构建动态语句。

```
SELECT @tableName:=table_name, @refId:=ref_id FROM object WHERE id = 5 LIMIT 1;

SET @sql = CONCAT('SELECT * FROM ', @tableName, ' WHERE id = ', @refId);

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

更新：请尝试使用存储过程：

```
DELIMITER $$
CREATE PROCEDURE procName(IN my_id INT)
BEGIN
SELECT @tableName:=table_name, @refId:=ref_id FROM object WHERE id = my_id LIMIT 1;

SET @sql = CONCAT('SELECT * FROM ', @tableName, ' WHERE id = ', @refId);

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;
END $$
DELIMITER ; 
```

然后执行存储过程

```
CALL procName(5); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-28T12:39:47.693

我最近遇到了完全相同的问题。当我删除最后一行时，`DEALLOCATE PREPARE stmt;`一切都开始工作了。

# elasticsearch - elasticsearch - 我应该将数据全部组织在一张表中吗？

> ID：15336990
> 
> 赞同：2
> 
> 时间：2013-03-11T11:04:48.283
> 
> 标签：elasticsearch

我是 ElasticSearch 和一般搜索的新手。

我有一个需要搜索的大型数据库。70张桌子。

我不太清楚搜索这样的数据库的最佳实践。我已经对 25 个数据库表进行了大型 SQL 选择，以获取我需要的所有数据。我这样做主要是因为我需要 Facets。

这在 ElasticSearch 中有意义吗？在 ElasticSearch 中组织要搜索的数据的最佳方式是什么？

此致，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-20T16:51:27.807

ElasticSearch 的一个显着特点是能够跨多个索引/类型或两者进行搜索，这将允许您以与在数据库中构建数据类似的方式构建数据。

Indices 本质上是 ElasticSearch' 等价于数据库，而类型是表。这使您可以保持数据分离，例如，具有这样的 ElasticSearch 定义 -

```
Index  |  Type

data   -  table1
data   -  table2
data   -  table3
data   -  .... 
```

这将允许您在一个查询中搜索所有类型，如下所示 -

```
curl -XPUT <host>:9200/data/table1,table2,table3 
```

或者你可以有相同类型的不同索引，就像这样 -

```
Index  |  Type

data1   -  table
data2   -  table
data3   -  table
data4   -  .... 
```

这种逻辑分离数据的能力是 ElasticSearch 的一个强大功能，在索引或类型之间划分数据也牢记性能。

# asp.net - 如何在 ASP.NET MVC 中的请求之间存储数据？

> ID：15336991
> 
> 赞同：15
> 
> 时间：2013-03-11T11:04:51.440
> 
> 标签：asp.net, .net, asp.net-mvc

我的应用程序从 USB 扫描仪读取条形码。我将它们视为令牌，然后从这些令牌构建命令。在创建命令之前，可能需要进行 2 次或更多次读取。我需要以某种方式存储以前的读取。如何在请求之间保留一些数据？在我看来，我不使用该令牌。

视图中只能显示命令的结果。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-11T11:42:41.873

该`TempData`字典非常适​​合在控制器操作之间存储数据。它最常用于 Post/Redirect/Get 模式，但也可以在这里应用。

这是一篇很好的文章：http: [//www.devcurry.com/2012/05/what-is-aspnet-mvc-tempdata.html](http://www.devcurry.com/2012/05/what-is-aspnet-mvc-tempdata.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-11T11:06:17.910

以下是我想到的几种可能性：

在客户端：

*   曲奇饼
*   隐藏字段

在服务器上：

*   缓存（确保使用用户特定的密钥以避免冲突）
*   一些后端存储（例如数据库）
*   ASP.NET 会话

# php - 如何获得相同的萤火虫“网络”部分信息？

> ID：15336992
> 
> 赞同：3
> 
> 时间：2013-03-11T11:04:52.543
> 
> 标签：php, dom, networking, symfony, curl

是否有任何 API 可以提供对网页下载信息的访问（下载 CSS/图像、下载时间等......）？

也许甚至是界面？

![](../Images/64a60f0eae85fcbc32d8198c9a9dd6a6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:14:45.317

在 Symfony 2.2.0 中有一个叫做秒表的新特性，它可能很有用。

> 您现在可能已经猜到了，Stopwatch 组件提供了一种测量代码特定部分的执行时间的方法。在 Symfony 中，分析器大量使用它来收集有关在处理请求期间发生的情况以及在每一层中花费了多少时间的信息。

你可以在[这里](http://symfony.com/blog/new-in-symfony-2-2-new-stopwatch-component)阅读。

# codeigniter - 使用 CodeIgniter 从数据库生成 PDF 文件

> ID：15336995
> 
> 赞同：1
> 
> 时间：2013-03-11T11:05:00.087
> 
> 标签：codeigniter, pdf-generation

例如，使用 CodeIgniter 从数据库生成 PDF 文件，

当我点击保存按钮时，表格中的所有内容都可以下载为 pdf 格式，请帮助我，谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:23:42.693

CodeIgniter 中没有原生 PDF 库，因此您需要使用第三方库或第三方软件即服务 (SaaS) 来生成 PDF。

这是我为一位客户所做的。

我首先使用标准 CodeIgniter 技术生成一个格式良好、易于打印的 HTML 页面，从相关表中选择数据，对其进行排序，然后回显到页面。

接下来，我使用以下 SasS 将格式化的 HTML 页面转换为 PDF 下载：

[http://www.htm2pdf.co.uk](http://www.htm2pdf.co.uk)

这是一个商业系统，但相对便宜且快速且易于使用。

或者，如果您想做一些自定义编程，您可以尝试：

[http://html2pdf.fr](http://html2pdf.fr)

在这种情况下，您需要链接到类文件（CodeIgniter 外部）并调用各种方法来生成 PDF。这种方法不需要年费，但需要更多的编程工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:24:24.340

您可以先使用 codeginter 的数据库实用程序获取 txt 格式的备份[http://ellislab.com/codeigniter/user-guide/database/utilities.html#backup](http://ellislab.com/codeigniter/user-guide/database/utilities.html#backup)

然后您可以阅读生成的文件并使用[https://github.com/aiwmedia/HTML2PDF-CI将其转换为 pdf](https://github.com/aiwmedia/HTML2PDF-CI)

您可以提供此 pdf 文件以供下载

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:39:52.107

看看这篇文章。

[http://www.christophermonnat.com/2008/08/generating-pdf-files-using-codeigniter/](http://www.christophermonnat.com/2008/08/generating-pdf-files-using-codeigniter/)

我的回答也很有帮助。

[Codeigniter 2 中的 cezPDF](https://stackoverflow.com/questions/11224501/cezpdf-in-codeigniter-2)

在用户单击时，您应该点击一个控制器功能，该功能将查询数据库并加载您可以传递给该库的视图文件，并将其作为 pdf 文件抛出。

# c# - 索引超出范围错误，当它不是时

> ID：15336998
> 
> 赞同：3
> 
> 时间：2013-03-11T11:05:03.997
> 
> 标签：c#, arrays

我有以下方法：

```
private void DetermineIfWagerIsValid(CouponViewModel result, Bet bet, string wagerType, int selectionCount)
{
    if (bet.Wagers[0].WagerType == wagerType) //error here
    {
        if (bet.Selections.Count != selectionCount)
        {
            bet.BetStatus = BetStatus.FilledInAndInvalid;
        }
    }
} 
```

很简单，但是当索引似乎没有超出范围时，我会收到间歇性的“索引超出范围”错误：

![超出范围](../Images/f019c89abdccd60ac5d57060ae22406e.png)

这是堆栈跟踪：

> 在 System.ThrowHelper.ThrowArgumentOutOfRangeException() 在 System.Collections.Generic.List `1.get_Item(Int32 index) at System.Collections.ObjectModel.Collection`1.get_Item（Int32 索引）
> 在 Arkle.CouponProcessing.Scan.LonglistDecoder_994550.DetermineIfWagerIsValid(CouponViewModel 结果, Bet bet, String wagerType, Int32 selectionCount) 中 c:\code\Arkle\Arkle\Arkle.CouponProcessing\Scan\LonglistDecoder_994550.cs:Arkle.CouponProcessing 的第 117 行。 Scan.LonglistDecoder_994550.DetermineIfBetIsValid(CouponViewModel result) in c:\code\Arkle\Arkle\Arkle.CouponProcessing\Scan\LonglistDecoder_994550.cs: 第 107 行 Arkle.CouponProcessing.Scan.LonglistDecoder_994550.Decode() in c:\code\Arkle \Arkle\Arkle.CouponProcessing\Scan\LonglistDecoder_994550.cs:第 62 行 ArkleWPF.UI.SlipScanning.CouponTools.DecodeCoupon(Image img, OMRForm omrForm1, CouponDecoder decoder, CouponPrintingInformation viewSettings, String slipBarcode, DecodeStatus status) in C:\code\ Arkle\Arkle\ArkleWPF\UI\SlipScanning\CouponTools.vb:第 215 行
> 在 ArkleWPF.UI.SlipScanning.CouponTools.ProcessForm(OMRForm omrForm1, DecodeStatus status, CouponPrintingInformation viewSettings, Boolean alwaysLotto) 在 C:\code\Arkle\Arkle\ArkleWPF\UI\SlipScanning\CouponTools.vb：ArkleWPF.UI 的第 89
> 行。 C:\code\Arkle\Arkle\ArkleWPF\UI\SlipScanning\CouponTools.vb 中的 SlipScanning.CouponTools._Closure$__1._Lambda$__1()：
> System.Threading.ThreadHelper.ThreadStart_Context（对象状态）的第 27 行
> 在 System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx) 在 System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx) 在 System.Threading.ExecutionContext.Run System.Threading.ThreadHelper.ThreadStart() 处的（ExecutionContext executionContext、ContextCallback 回调、对象状态）

它不是每次都发生，更像是每秒钟或第三次，它让我发疯！有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:24:32.700

```
 System.Collections.Generic.List1.get_Item(Int32 index) at
 System.Collections.ObjectModel.Collection1.get_Item(Int32 index) 
```

The requested index does not exist in the list lookup. `Wagers` is an array but `WagerType` does not have the requested index. The `exception` is being raised from within the list's `get` statement.