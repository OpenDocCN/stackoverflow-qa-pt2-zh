# StackOverflow 问答 14801000-14801999

# html - 为什么我的页面中心不对齐？！

> ID：14801000
> 
> 赞同：0
> 
> 时间：2013-02-10T18:21:33.697
> 
> 标签：html, center-align

这是我关于 Stack Overflow 的第一个问题，但我已经从这个很棒的网站学到了我所知道的一切，所以我希望你能提供帮助......

我有一个非常简单的主页，它只是拒绝居中对齐。它基本上只是背景图像和中间带有 Wow Slider 图像滑块的奇怪文本（免费版）。我尝试在容器 div（table_01）、正文、单独的容器 div（现在因沮丧而删除）和其他各种东西上将边距设置为 0 auto。Div-align:center 不起作用，我一直在玩弄直到我的手指流血但没有成功。整个页面的 html 如下所示：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>house</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link type="text/css" rel="stylesheet" href="homestyle.css"/>
<link href="http://fonts.googleapis.com/css?family=Roboto+Condensed" rel="stylesheet"     type="text/css" />

<!-- Start WOWSlider.com HEAD section -->
    <link rel="stylesheet" type="text/css" href="engine1/style.css" media="screen" />
    <script type="text/javascript" src="engine1/jquery.js"></script>
<!-- End WOWSlider.com HEAD section -->

</head>

<body>

<div id="Table_01">
    <div id="home-01_">
      <img id="home_01" src="images/home_01.png" width="255" height="194" alt="" />
    </div>
  <div id="home-02_">
        <p> Your qualifications and whatnots can go in here, or if you'd prefer I     can put a tagline like "All aspects of construction and landscaping tackled"....</p>
  </div>
  <div id="commentbar">
    <p class="comslide">Scrolling comments will go here (they scroll every twenty     seconds so that customers can see how great your buildings are....)</p> </div>

  <div id="home-04_" class="topbar">

        <a href="CHANGE THIS TO HOME LINK">Home</a></div>

  <div id="home-05_" class="topbar">
        <a href="CHANGE THIS TO SERVCIES LINK">Services</a>
  </div>
    <div id="home-06_">
        <img id="home_06" src="images/home_06.png" width="2" height="70" alt="" />
    </div>
  <div id="home-07_" class="topbar">
    <a href="CHANGE THIS TO GALLERY LINK">Gallery</a>
  </div>
    <div id="home-08_">
        <img id="home_08" src="images/home_08.png" width="1" height="70" alt="" />
    </div>
  <div id="home-09_"  class="topbar">
         <a href="CHANGE THIS TO CONTACT LINK">Contact</a>
  </div>

    <div id="home-10_">
        <img id="home_10" src="images/home_10.png" width="2" height="726" alt="" />
    </div>
    <div id="home-11_">
        <img id="home_11" src="images/home_11.png" width="551" height="28" alt=""     />
    </div>
    <div id="home-12_">
        <img id="home_12" src="images/home_12.png" width="239" height="28" alt=""     />
    </div>
    <div id="home-13_">
        <img id="home_13" src="images/home_13.png" width="225" height="28"     alt="" />
    </div>
    <div id="home-14_">
        <img id="home_14" src="images/home_14.png" width="168" height="76" alt=""     />
    </div>

<div id="home-15_"><!-- Start WOWSlider.com BODY section id=wowslider-container1 -->
    <div id="wowslider-container1">
    <div class="ws_images"><ul>
<li><img src="data1/images/raised_bed.jpg" alt="raised bed" title="raised bed"     id="wows1_0"/></li>
<li><img src="data1/images/steps.jpg" alt="steps" title="steps" id="wows1_1"/></li>
<li><img src="data1/images/fence.jpg" alt="fence" title="fence" id="wows1_2"/></li>
<li><img src="data1/images/extension.jpg" alt="extension" title="extension"     id="wows1_3"/></li>
<li><img src="data1/images/garden_wall.jpg" alt="garden_wall" title="garden_wall"     id="wows1_4"/></li>
<li><img src="data1/images/wall.jpg" alt="wall" title="wall" id="wows1_5"/></li>
</ul></div>
<div class="ws_bullets"><div>
<a href="#" title="Raised Bed"><img src="data1/tooltips/raised_bed.jpg" alt="Raised     Bed"/>1</a>
<a href="#" title="Steps and Paving"><img src="data1/tooltips/steps.jpg"     alt="steps"/>2</a>
<a href="#" title="Fencing"><img src="data1/tooltips/fence.jpg" alt="fence"/>3</a>
<a href="#" title="Extensions"><img src="data1/tooltips/extension.jpg"     alt="extension"/>4</a>
<a href="#" title="Garden walls"><img src="data1/tooltips/garden_wall.jpg"     alt="garden_wall"/>5</a>
<a href="#" title="and all forms of Bricklaying"><img src="data1/tooltips/wall.jpg" alt="wall"/>6</a>
</div></div>

    </div>
    <script type="text/javascript" src="engine1/wowslider.js"></script>
    <script type="text/javascript" src="engine1/script.js"></script>
<!-- End WOWSlider.com BODY section --></div>

    <div id="home-16_">
        <img id="home_16" src="images/home_16.png" width="168" height="76" alt=""     />
    </div>

    <div id="home-17_">
        <img id="home_17" src="images/home_17.png" width="57" height="580" alt="" />
    </div>
    <div id="home-18_">
        <img id="home_18" src="images/home_18.png" width="56" height="57" alt="" />
    </div>
    <div id="home-19_">
        <img id="home_19" src="images/home_19.png" width="55" height="184" alt="" />    
    </div>
    <div id="home-20_">
        <img id="home_20" src="images/home_20.png" width="54" height="184" alt="" />
    </div>
    <div id="home-21_">
        <img id="home_21" src="images/home_21.png" width="60" height="57" alt="" />
    </div>
    <div id="home-22_">
        <img id="home_22" src="images/home_22.png" width="54" height="580" alt="" />    
    </div>
    <div id="home-23_">
        <img id="home_23" src="images/home_23.png" width="56" height="127" alt="" />
    </div>
    <div id="home-24_">
        <img id="home_24" src="images/home_24.png" width="60" height="127" alt="" />    
    </div>
    <div id="home-25_">
        <img id="home_25" src="images/home_25.png" width="682" height="47" alt="" />
    </div>
    <div id="home-26_">
        <img id="home_26" src="images/home_26.png" width="28" height="396" alt="" />    
        </div>
        <div id="home-27_"><p>This box will contain an "add a comment" thing. Every time someone adds a comment you will get an email asking you if you want it to appear on the top bit of the page.</p></div>

    <div id="home-28_">
        <img id="home_28" src="images/home_28.png" width="184" height="220" alt="" />
    </div>
    <div id="home-29_"><p> And this one is your basic "About me" box. Please write up a basic description of who you are and the services you offer so that I can stick it in here. For the record, the two little trucks link to your facebook and twitter accounts (I'll make you an LRC account for both) and if users click the envelope in the middle then their mail program will pop up with your email adress already in the send to box. There's a white outline on them atm but that'll be gone as soon as my photoshop works properly again.</p> </div>

    <div id="home-30_">
        <img id="home_30" src="images/home_30.png" width="29" height="296" alt="" />
    </div>
    <div id="home-31_">
        <img id="home_31" src="images/home_31.png" width="298" height="211" alt="" />
    </div>
    <div id="home-32_">
        <img id="home_32" src="images/home_32.png" width="42" height="176" alt="" />    
    </div>
    <div id="home-33_">
    <a href="mailto:">
        <img id="mail" src="images/Email.png" width="145" height="158" alt="Click to email" /></a>
    </div>
    <div id="home-34_">
        <img id="home_34" src="images/home_34.png" width="365" height="35" alt="" />
    </div>
    <div id="home-35_">
        <img id="home_35" src="images/home_35.png" width="365" height="41" alt="" />    
    </div>
    <div id="home-36_">
        <img id="home_36" src="images/home_36.png" width="110" height="100" alt="" />
    </div>
    <div id="home-37_">
    <a href="CHANGE THIS TO FB ADDRESS" target="blank">
        <img src="images/truck_37.png" width="109" height="73" alt="" /></a>
    </div>
    <div id="home-38_">
        <img id="home_38" src="images/home_38.png" width="59" height="100" alt="" />
    </div>
    <div id="home-39_">
    <a href="CHANGE THIS TO FB ADDRESS" target="blank">
        <img src="images/truck_39.png" alt="" />
      </a>
    </div>
    <div id="home-40_">
        <img id="home_40" src="images/home_40.png" width="116" height="29" alt="" />
    </div>
    <div id="home-41_">
        <img id="home_41" src="images/home_41.png" width="109" height="27" alt="" />
    </div>
    <div id="home-42_">
        <img id="home_42" src="images/home_42.png" width="145" height="18" alt="" />
    </div>
</div id="Table_01">

<!-- End Save for Web Slices -->
</body>
</html> 
```

样式表是这样的：

```
 @charset "utf-8";
  /* CSS Document */

body {
    font-family: 'Roboto Condensed', sans-serif;

}

a:link {
    color:#db6748;
    text-decoration:none;
    font-size:18px  
    font-family: 'Roboto Condensed', sans-serif;
}  

a:visited {
color:#8f3821;
}

#Table_01 {
position:absolute;
left:0px;
top:0px;
bottom:0px;
width:1020px;
height:920px;
z-index:1;
margin:0 auto;
padding:0;
text-align:center;
}

#home-01_ {
position:absolute;
left:0px;
top:0px;
width:255px;
height:194px;
}

#home-02_ {
position:absolute;
left:255px;
top:0px;
width:765px;
height:99px;
background-image:url(images/home_02.png);   
}

#commentbar {
position:absolute;
left:255px;
top:99px;
width:765px;
height:95px;
border-top:dotted;
border-color:#666;
background-image:url(images/home_03.png);
}

#home-04_ {
position:absolute;
left:0px;
top:194px;
width:269px;
height:42px;
background-image:url(images/home_04.png);
}

.topbar {
font-size:24px;
border-top:dotted;
border-color:#333;
}

.comslide{
position:absolute;
vertical-align:middle;;
color:#CCC;
}

.topbar a:link {color:#d5d5d5;}
.topbar a:hover { color:#999;}

#home-05_ {
position:absolute;
left:269px;
top:194px;
width:282px;
height:42px;
background-image:url(images/home_05.png);
}

#home-06_ {
position:absolute;
left:551px;
top:194px;
width:2px;
height:70px;
}

#home-07_ {
position:absolute;
left:553px;
top:194px;
width:239px;
height:42px;
background-image:url(images/home_07.png)
}

#home-08_ {
position:absolute;
left:792px;
top:194px;
width:1px;
height:70px;
}

#home-09_ {
position:absolute;
left:793px;
top:194px;
width:225px;
height:42px;
background-image:url(images/home_09.png)
}

#home-10_ {
position:absolute;
left:1018px;
top:194px;
width:2px;
height:726px;
}

#home-11_ {
position:absolute;
left:0px;
top:236px;
width:551px;
height:28px;
}

#home-12_ {
position:absolute;
left:553px;
top:236px;
width:239px;
height:28px;
}

#home-13_ {
position:absolute;
left:793px;
top:236px;
width:225px;
height:28px;
}

#home-14_ {
position:absolute;
left:0px;
top:264px;
width:168px;
height:76px;
}

#home-15_ {
position:absolute;
left:168px;
top:264px;
width:682px;
height:213px;
z-index:1;
background-image:url(images/home_15.png);
}

#home-16_ {
position:absolute;
left:850px;
top:264px;
width:168px;
height:76px;
}

#home-17_ {
position:absolute;
left:0px;
top:340px;
width:57px;
height:580px;
}

#home-18_ {
position:absolute;
left:57px;
top:340px;
width:56px;
height:57px;
}

#home-19_ {
position:absolute;
left:113px;
top:340px;
width:55px;
height:184px;
}

#home-20_ {
position:absolute;
left:850px;
top:340px;
width:54px;
height:184px;
}

#home-21_ {
position:absolute;
left:904px;
top:340px;
width:60px;
height:57px;
}

#home-22_ {
position:absolute;
left:964px;
top:340px;
width:54px;
height:580px;
}

#home-23_ {
position:absolute;
left:57px;
top:397px;
width:56px;
height:127px;
}

#home-24_ {
position:absolute;
left:904px;
top:397px;
width:60px;
height:127px;
}

#home-25_ {
position:absolute;
left:168px;
top:477px;
width:682px;
height:47px;
}

#home-26_ {
position:absolute;
left:57px;
top:524px;
width:28px;
height:396px;
}

#home-27_ {
position:absolute;
left:85px;
top:524px;
width:298px;
height:185px;
background-image:url(images/home_27.png);
}

#home-28_ {
position:absolute;
left:383px;
top:524px;
width:184px;
height:220px;
}

#home-29_ {
position: absolute;
left: 568px;
top: 525px;
width: 368px;
height: 220px;
background-image:url(images/home_29.png);

}

#home-30_ {
position:absolute;
left:935px;
top:524px;
width:29px;
height:296px;
}

#home-31_ {
position:absolute;
left:85px;
top:709px;
width:298px;
height:211px;
}

#home-32_ {
position:absolute;
left:383px;
top:744px;
width:42px;
height:176px;
}

#home-33_ {
position:absolute;
left:425px;
top:744px;
width:145px;
height:158px;
background-image:url(images/home_33.png)

}

#home-34_ {
position:absolute;
left:570px;
top:744px;
width:365px;
height:35px;
}

#home-35_ {
position:absolute;
left:570px;
top:779px;
width:365px;
height:41px;
}

#home-36_ {
position:absolute;
left:570px;
top:820px;
width:110px;
height:100px;
}

#home-37_ {
position:absolute;
left:680px;
top:820px;
width:109px;
height:73px;
background-image:url(images/home_37.png);
}

#home-38_ {
position:absolute;
left:789px;
top:820px;
width:59px;
height:100px;
}

#home-39_ {
position:absolute;
left:848px;
top:820px;
width:116px;
height:71px;
background-image:url(images/home_39.png);
}

#home-40_ {
position:absolute;
left:848px;
top:891px;
width:116px;
height:29px;
}

#home-41_ {
position:absolute;
left:680px;
top:893px;
width:109px;
height:27px;
}

#home-42_ {
position:absolute;
left:425px;
top:902px;
width:145px;
height:18px;
}

#higher {

position:absolute;
top: 0px;
width:682px;
height:213px;

}

#page-01_ {
position:absolute;
left:0px;
top:0px;
width:255px;
height:194px;
}

#page-02_ {
position:absolute;
left:255px;
top:0px;
width:765px;
height:99px;
}

#page-03_ {
position:absolute;
left:255px;
top:99px;
width:765px;
height:95px;
}

#page-04_ {
position:absolute;
left:0px;
top:194px;
width:269px;
height:42px;
}

#page-05_ {
position:absolute;
left:269px;
top:194px;
width:282px;
height:42px;
}

#page-06_ {
position:absolute;
left:551px;
top:194px;
width:2px;
height:75px;
}

#page-07_ {
position:absolute;
left:553px;
top:194px;
width:239px;
height:42px;
}

#page-08_ {
position:absolute;
left:792px;
top:194px;
width:1px;
height:75px;
}

#page-09_ {
position:absolute;
left:793px;
top:194px;
width:225px;
height:42px;
}

#page-10_ {
position:absolute;
left:1018px;
top:194px;
width:2px;
height:726px;
}

#page-11_ {
position:absolute;
left:0px;
top:236px;
width:551px;
height:33px;
}

#page-12_ {
position:absolute;
left:553px;
top:236px;
width:239px;
height:33px;
}

#page-13_ {
position:absolute;
left:793px;
top:236px;
width:225px;
height:33px;
}

#page-14_ {
position:absolute;
left:0px;
top:269px;
width:57px;
height:651px;
}

#page-15_ {
position:absolute;
left:57px;
top:269px;
width:907px;
height:455px;
}

#page-16_ {
position:absolute;
left:964px;
top:269px;
width:54px;
height:651px;
}

#page-17_ {
position:absolute;
left:57px;
top:724px;
width:907px;
height:20px;
}

#page-18_ {
position:absolute;
left:57px;
top:744px;
width:368px;
height:176px;
}

#Email_ {
position:absolute;
left:425px;
top:744px;
width:145px;
height:158px;
background-image:url(images/Emailbg.png);
}

#page-20_ {
position:absolute;
left:570px;
top:744px;
width:394px;
height:76px;
}

#page-21_ {
position:absolute;
left:570px;
top:820px;
width:110px;
height:100px;
}

#page-22_ {
position:absolute;
left:680px;
top:820px;
width:109px;
height:73px;
}

#page-23_ {
position:absolute;
left:789px;
top:820px;
width:59px;
height:100px;
}

#page-24_ {
position:absolute;
left:848px;
top:820px;
width:116px;
height:71px;
}

#page-25_ {
position:absolute;
left:848px;
top:891px;
width:116px;
height:29px;
}

#page-26_ {
position:absolute;
left:680px;
top:893px;
width:109px;
height:27px;
}

#page-27_ {
position:absolute;
left:425px;
top:902px;
width:145px;
height:18px;
} 
```

另一个样式表只是格式化滑块-我尝试取消链接以查看页面是否会居中对齐，但没有任何乐趣。有任何想法吗？如果您需要，我将添加其他样式表的代码。

谢谢

奈

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T18:35:31.053

[JS Bin 的工作演示](http://jsbin.com/uyigef)。

需要更改以下规则：

```
#Table_01 {
    position: relative;
    width:1020px;
    height:920px;
    z-index:1;
    margin:0 auto;
    padding:0;
    text-align:center;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T18:32:58.440

您的#Table_01 永远不会对齐中心，因为它的位置设置为绝对位置，左侧和顶部为 0。删除这些值将是一个开始......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T18:35:47.893

您需要删除每个`position: absolute`,`left: *px`和`top:*px`属性，然后调整`width:`. `#Table_01`这是由某个生成器创建的吗？这段代码看起来很丑...

# html - 改变节奏和方向 我是 HTML 的新手。我正在使用<marquee>标签。 有没有办法将文本移动的方向从右向左更改为圆形或向上？ 另外，我可以改变这些跑马灯的速度吗？

> ID：14801004
> 
> 赞同：3
> 
> 时间：2013-02-10T18:21:48.227
> 
> 标签：html, marquee

我是 HTML 的新手。我正在使用`<marquee>`标签。

有没有办法将文本移动的方向从右向左更改为圆形或向上？

另外，我可以改变这些跑马灯的速度吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T18:31:14.487

您可以使用标签创建滚动字幕（即滚动文本或滚动图像）。它可以完全定制。您对修改滚动文本的方向和速度感兴趣，这可以通过添加一些属性来实现。

例如，一个示例 html 代码：

```
<marquee behavior="scroll" direction="left" scrollamount="1">Pace-slow</marquee> 
```

这里的属性方向可以取值，如左，上，右等，具体取决于滚动方向，滚动量可以控制速度，越多越快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-29T19:07:26.963

```
<!-- Scroll Amount -->
<marquee scrollamount="50"> This is a marquee with scrollamount 50 </marquee>
<marquee scrollamount="5"> This is a marquee with scrollamount 5 </marquee>
```

```
<!-- Scroll Delay -->
<marquee scrolldelay="50">This is a marquee with scrolldelay  50</marquee>
<marquee scrolldelay="100">This is a marquee with scrolldelay  100</marquee>
```

```
<!-- mouse over or click events -->
<marquee onmouseover="this.stop()" onmouseout="this.start()">This marquee will stop on mouseover.</marquee>
<marquee onclick="this.stop()">This marquee will stop on mouseclick. </marquee>
```

附加参考： 在此处输入链接描述 在[此处](http://tutorial.techaltum.com/marquee.html) [输入链接描述](http://www.plus2net.com/html_tutorial/html_marquee_direction.php)</marquee>

# android - findViewById 如何初始化视图

> ID：14801008
> 
> 赞同：10
> 
> 时间：2013-02-10T18:22:14.303
> 
> 标签：android

我刚刚为被 findViewById 困惑的人写了一个答案，我意识到我的理解存在差距。这个问题仅用于知识和好奇心。

考虑一下：

```
button = (Button)findViewById(R.id.button); 
```

`findViewById`返回 的实例`View`，然后将其强制转换为目标类。到目前为止一切都很好。

要设置视图，请从关联的 XML 声明中的参数`findViewById`构造一个`AttributeSet`，并将其传递给`View`.

然后我们将`View`实例转换为`Button`.

get如何`AttributeSet`依次传递给`Button`构造函数？

[编辑]

所以我很困惑:)。重点是当布局膨胀时，视图层次结构已经包含视图后代类的实例。findViewById 只是返回对它的引用。当你想到它时很明显 - doh..

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-10T18:26:53.257

`findViewById`什么也没做。它只是查看视图层次结构并返回对带有 requests 的视图的引用`viewId`。`View`已经创建并存在。如果您不要求`findViewById`某些视图，则没有任何变化。

视图被夸大了`LayoutInflator`。当您调用`setContentView`xml 布局时，将解析并创建视图层次结构。

属性传递给 Button 的构造函数`LayoutInflater`。检查[LayoutInflator 源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/view/LayoutInflater.java#LayoutInflater.inflate%28org.xmlpull.v1.XmlPullParser,android.view.ViewGroup,boolean%29)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-10T18:33:16.107

我不认为`findViewById()`构造或实例化视图。它将在已膨胀布局的视图层次结构中搜索具有匹配 id 的视图。此方法对 a`View`和 a 的工作方式不同`ViewGroup`。

来自安卓源代码：

`View.findViewById()`如果此视图具有给定的 id 或 null，则返回相同的 View 对象，它调用：

```
protected View findViewTraversal(int id) {
    if (id == mID) {
        return this;
    }
    return null;
} 
```

`ViewGroup.findViewById()`遍历子视图并在这些视图上调用相同的方法，它调用：

```
 protected View findViewTraversal(int id) {
    if (id == mID) {
        return this;
    }

    final View[] where = mChildren;
    final int len = mChildrenCount;

    for (int i = 0; i < len; i++) {
        View v = where[i];

        if ((v.mPrivateFlags & IS_ROOT_NAMESPACE) == 0) {
            v = v.findViewById(id);

            if (v != null) {
                return v;
            }
        }
    }

    return null;
} 
```

# c++ - 堆栈实现

> ID：14801015
> 
> 赞同：1
> 
> 时间：2013-02-10T18:22:59.420
> 
> 标签：c++, arrays, stack

我无法理解 push 和 pop 如何与堆栈一起工作。我了解它们是如何工作的，因为它们将一个数字推入堆栈，最后一个推入的数字将被弹出。我也理解指针背后的逻辑以及它们是如何工作的。我不明白的是代码应该如何编写。

我的程序应该让用户创建一个堆栈（确定它有多大），然后选择将内存（数字）压入堆栈或将其弹出。

这是我到目前为止得到的，我被困住了。我已经通过 cplusplus.com 进行了研究，并阅读了关于这些东西的几乎所有内容，但仍然无法弄清楚该程序应该如何布局以及它是如何运行的。

```
#include<iostream>
#include<cstring>
#include<cmath>
#include<cstdlib>

using namespace std;

int choice;
int * arrPtr = NULL;
int * stack;
int * top;
int val, capacity, size; 
//stack would point to the location of the first element,
// top would point to the location where the next element will be stored,
// capacity is the number of elements that can be stored in the stack,
// size would be the number of elements actually stored in the stack

int main()
{
//This is the menu
cout << "1\. Create" << endl;
cout << "2\. Push" << endl;
cout << "3\. Pop" << endl;
cout << "4\. Count" << endl;
cout << "5\. Display" << endl;
cout << "6\. Exit\n" << endl;
cin >> choice;

//I figured i would use choices for the menu and went ahead and wrote it out
switch(choice)
{
    case 1:
        create();
        break;
    case 2:
        push();
        break;
    case 3:
        pop();
        break;
    case 4:
        count(0);
        break;
    case 5:
        display();
        break;
    case 6:
        exit();
    default:
        cout << "Please enter correct choice (1-4)!";
        break;
    }

    return 0;   
}   //end main

void create()
{
    cout << "Enter the size of the stack you wish to create: ";
    int capacity = 0;
    cin >> capacity;

    arrPtr = new int[capacity];
} //end create function

//From here it went wrong, I cannot figure it out.           

void push(){
    for (int i = 0; i < capacity; i++)
    {
        cout << "Enter the number you wish to put on the stack: ";
        cin >> val;
        push(val)
    }//end for
}//end push 
```

请帮助我理解这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:41:27.257

创建`std::array`. 创建迭代器。将迭代器设置为数组的末尾。（结束的意思`array.end()`）

Push：递减迭代器，插入值。
Pop：返回值，递增迭代器。
计数：不是堆栈的标准，但您可以通过从 end 中减去当前迭代器来获得它。
窥视：返回值

显然你要确保你没有从阵列的前面推开，或者从后面弹出，所以你应该添加一些检查。

堆栈非常简单。希望这可以帮助。

编辑：实现，未测试的代码，有点思路

```
template <typename T, std::size_t N>
class Stack {
public:
  Stack();
  void push(T value);
  T pop();
  T peek() const;
  std::size_t count() const;

private:
  std::array<T, N> m_baseArray;
  std::array<T>::iterator m_it;
};

template <typename T, std::size_t N>
Stack::Stack() : m_baseArray(), m_it(m_baseArray.end()) { }

template <typename T, std::size_t N>
void Stack::push(T value) {
  if (m_it == m_baseArray.begin())
    throw std::exception();
  --m_it;
  *m_it = value;
}

template <typename T, std::size_t N>
T Stack::pop() {
  if (m_it == m_baseArray.end())
    throw std::exception();
  T res = *m_it;
  ++m_it;
  return res;
}

template <typename T, std::size_t N>
T Stack::peek() const {
  if (m_it == m_baseArray.end())
    throw std::exception();
  return *m_it;
}

template <typename T, std::size_t N>
std::size_t Stack::count() const {
  return m_baseArray.end() - m_it;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T19:00:45.083

最简单的堆栈使用`std::vector`

```
#include <iostream>
#include <vector>
using namespace std;

template<typename T>
class Stack{
private: 
  vector<T> theArray;
public:
  Stack(){ theArray.clear(); }
  void push(T data) { theArray.push_back(data); }
  T pop() { T retData = theArray.back(); theArray.pop_back(); return retData; }
  void display() {
    for(size_t i = theArray.size() - 1; i != (size_t)-1; i--){
      cout << theArray[i] << '\n';
    }
  }
};

int main(int argc, char *argv[])
{
  Stack<int> s;
  s.push(10);
  s.push(20);
  s.push(30);
  s.display();

  int ret = s.pop();
  cout << "After popping : " << ret << '\n';
  s.display();
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-01T13:01:30.910

我已经在 Mac 上编译了这段代码，但它应该可以在安装了 bash 的 PC 上的 Linux 上正常工作。

```
#include<iostream>
#include<cstring>
#include<cmath>
#include<cstdlib>

using namespace std;

int choice;
int capacity; /*size of stack*/ 

int stack[1000];/*THIS IS WHERE ALL THE STACK ENTRIES WILL BE STORED*/
int top=0; /* THIS WILL KEEP CHECK OF THE INDEX OF TOP MOST ELEMENT */

//stack would point to the location of the first element,
// top would point to the location where the next element will be stored,
// capacity is the number of elements that can be stored in the stack,
// size would be the number of elements actually stored in the stack

void create() //Set size of stack
{
    cout << "Enter the size of the stack you wish to create: ";
    cin >> capacity;

} //end create function

void push(int n) //Enter data into stack

{

/* Ensures that there isn't a stack overflow */

    if(top<capacity)
    {
        stack[top++]=n; 
    }

    else
    {
        cout<<"Stack FULL!!\n";
    }

    //end for
}//end push

void pop() //Remove data from stack
{
    /* Ensures that there isn't a stack underflow */
    if(top>0)
    {
        cout<<"Popped entry is:"<<stack[top-1]<<"\n";
        top--;   
    }

    else
    {
        cout<<"Stack is EMPTY!!\n";
    }

}

void count() //Count number of elements
{
    cout<<"Stack size is:"<<top<<"\n"; 
}

void display() //Print elements from lowest stack entry to highest 
{
    int i=0;
    cout<<"Your stack is:\n";
    while(i<top)
    {
        cout<<i+1<<") "<<stack[i]<<"\n";
        i++;
    }
}

int main()
{
    system("clear");  //Start with blank screen

    int exitCheck=1,entry;

    //I figured i would use choices for the menu and went ahead and wrote it out -- This is good approach!!
    cout<<"Welcome user \n";

    create(); /*Size of stack can be set only once to prevent inconsistency */

    while(exitCheck == 1)  /* This is the menu */
    {

        cout << "1\. Push" << endl;
        cout << "2\. Pop" << endl;
        cout << "3\. Count" << endl;
        cout << "4\. Display" << endl;
        cout << "5\. Exit\n" << endl;
        cin >> choice; //Choice should be placed here as we need userinput during each turn 

        switch(choice)
        {
            case 1:
                cout<< "Enter your data: ";
                cin>>entry;
                push(entry);
                break;
            case 2:
                pop();
                break;
            case 3:
                count();
                break;
            case 4:
                display();
                break;
            case 5:
                {
                    exitCheck=1;
                    break;
                } /*exit in this case wont achieve a proper result in a concole based app thats why i replaced it with loop exit condition */

            default:
                cout << "Please enter correct choice (1-5)!\n";
                break;
            }

        cout<< "Enter 1 to continue else anything else to quit:\n";
        cin>> exitCheck;

    }

    cout<<"Thanks for using this code!!\n";    
return 0;   
}
  //end main 
```

# java - 使用 Java 中的 Cling 获取 UPnP 设备的流 URL

> ID：14801018
> 
> 赞同：1
> 
> 时间：2013-02-10T18:23:36.497
> 
> 标签：java, upnp, android-cling

我想为我的 Java 应用程序使用 Cling 来浏览我的 Panasonic dmr-bct720 蓝光刻录机的目录。我尝试了第一个示例，但 Cling 找不到该设备。使用 VLC，我可以浏览它并观看视频。

谁能给我一个如何显示流 URL 的示例？

# ajax - 什么会导致没有在客户端上设置 cookie？

> ID：14801021
> 
> 赞同：16
> 
> 时间：2013-02-10T18:23:42.830
> 
> 标签：ajax, http, cookies, cross-domain, same-origin-policy

我有一个使用 jQuery.ajax 向另一台主机执行请求的 Web 应用程序（现在实际上是相同的，因为我使用的是“localhost”的不同端口）。然后服务器返回一个cookie。

Chrome 的开发工具中显示的 HTTP 响应中的 cookie 值是

```
Set-Cookie: MyUserSession=JxQoyzYm1VfESmuh-v22wyiyLREyOkuQWauziTrimjKo=;expires=Sun, 10 Feb 2013 22:08:47 GMT;path=/api/rest/ 
```

所以未来有 4 小时的到期时间。

但是，cookie 不会随后续请求一起存储和发送（在 Chrome 和 Firefox 中测试）。我首先认为它必须是“2013 年 2 月 10 日”而不是“2013 年 2 月 10 日”，但这并没有什么不同。Chrome 还在响应的 cookie 选项卡上将“过期”显示为“无效日期”，但这也可能是[开发工具错误](https://code.google.com/p/chromium/issues/detail?id=123013)。

有任何想法吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-10T20:12:06.590

我想我找到了解决方案。由于在开发过程中，我的服务器位于“localhost:30002”，而我的 Web 应用位于“localhost:8003”，因此它们在 CORS 方面被视为*不同的主机。*因此，我对服务器的所有请求都包含在 CORS 安全规则中，尤其是[Requests with credentials](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS?redirectlocale=en-US&redirectslug=HTTP_access_control#Requests_with_credentials)。“凭据”包括该链接上注明的 cookie，因此返回的 cookie 不被接受，因为我没有通过

```
xhrFields: {
  withCredentials: true
} 
```

到 jQuery 的`$.ajax`功能。我还必须将该选项传递给后续的 CORS 请求才能发送 cookie。

我`Access-Control-Allow-Credentials: true`在服务器端添加了标头，并将`Access-Control-Allow-Origin`标头从通配符更改为`http://localhost:8003`（端口号很重要！）。该解决方案现在对我有用，并且 cookie 被存储。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-21T10:10:46.680

在与类似的场景（没有 CORS）苦苦挣扎了几个小时之后，我发现了另一个潜在的原因：**一定要明确设置 cookie 的路径**。

我的前端应用程序正在调用`HOST_URL/api/members/login`，这正在返回正确的`Set-Cookie`标题，没有路径。

我可以`Response Cookies`在 Chrome DevTools 下看到 cookie，但随后的请求不包括它。去了`chrome://settings/cookies`，饼干在那里，但路径是`/api/members`。

在服务器端设置 cookie 时指定根路径解决了该问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T18:32:10.493

你从哪里得到日期？

如果您手动添加它，请尝试使其防故障

```
var exdays = 3; //3 days valid as an example
var exdate=new Date();
exdate.setDate(exdate.getDate() + exdays);
//Now set the cookie to said exdate
document.cookie = "MyUserSession =" + escape(JxQoyzYm1VfESmuh-v22wyiyLREyOkuQWauziTrimjKo=)+"; expires="+exdate.toUTCString()); 
```

# sass - Sass 命令行选项强制使用 CSS 扩展名作为输入的文件

> ID：14801023
> 
> 赞同：2
> 
> 时间：2013-02-10T18:23:57.140
> 
> 标签：sass

我使用 sass 已经有一段时间了，但是我想知道是否有办法强制它使用带有`.css`扩展名的文件而不是通常的`.scss`.

问题是我想使用 sass 对一个用纯 CSS 编写的相当老的项目执行缩小，但是在我将文件的扩展名更改为`.scss`.

```
sass input.css output.css --style compressed 
```

所以基本上我要问的是，是否有什么可以用来绕过 sass 强加给我的要求，以专门使用带`.scss`扩展名的文件作为输入？可能是我在官方文档中遗漏的命令行选项之类的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T19:29:31.280

在使用命令行工具本身进行一些额外的文档蠕虫和戳戳之后，`sass`我似乎找到了解决方案。我需要做的就是添加`--scss`参数让 sass 知道无论我使用哪个文件或扩展名，它都应该将其解释为 SASS 文件。因为我的 CSS 文件当然是符合 SASS 标准的，所以在没有任何抱怨的情况下执行了缩小。

```
sass --scss main.css main.min.css --style compressed 
```

一个小的（在我看来记录不充分）命令行参数，我浪费了一天的大部分时间来找到它。

# android - 待办事项列表示例

> ID：14801024
> 
> 赞同：2
> 
> 时间：2013-02-10T18:23:58.467
> 
> 标签：android

我是 Android 应用程序开发的新手，有一个小问题。

我试图按照一个示例来创建一个待办事项列表应用程序。但是，即使我完全复制了它，它也不起作用。

当我运行它时它没有显示任何错误，但是会出现一个空白屏幕，几秒钟后它会关闭并显示“不幸的是，ToDoList 已停止”。

有谁知道这个问题可能是什么？

**代码**

```
 package com.paad.todolist;

    import java.util.ArrayList;

    import android.app.Activity;
    import android.os.Bundle;
    import android.view.KeyEvent;
    import android.view.Menu;
    import android.view.View;
    import android.widget.ArrayAdapter;
    import android.widget.EditText;
    import android.widget.ListView;

    public class MainActivity extends Activity {

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            setContentView(R.layout.activity_main);

            ListView myListView = (ListView)findViewById(R.id.ListView);
            final EditText myEditText = (EditText) findViewById(R.id.EditText);

            final ArrayList<String> todoItems = new ArrayList<String>();
            final ArrayAdapter<String> aa;

            aa = new ArrayAdapter<String> (this,android.R.layout.simple_list_item_1,todoItems);

            myListView.setAdapter(aa);

        myEditText.setOnKeyListener(new View.OnKeyListener()   {
            public boolean onKey(View v, int keyCode, KeyEvent event)   {
                if (event.getAction() == KeyEvent.ACTION_DOWN)
                    if ((keyCode == KeyEvent.KEYCODE_DPAD_CENTER)    ||
                        (keyCode == KeyEvent.KEYCODE_ENTER))   {
                        todoItems.add(0, myEditText.getText().toString());
                        aa.notifyDataSetChanged();
                        myEditText.setText("");
                        return true;
                    }
                return false;
            }
        });
    }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            // Inflate the menu; this adds items to the action bar if it is present.
            getMenuInflater().inflate(R.menu.activity_main, menu);
            return true;
        }

    } 
```

**布局 XML 文件**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <EditText 
        android:id="@+id/EditText"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="@string/addItemHint"
        android:contentDescription="@string/addItemContentDescription"
    />

    <ListView
        android:id="@+id/ListView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
    />        

</LinearLayout> 
```

日志：

```
02-10 20:03:53.850: D/AndroidRuntime(24220): Shutting down VM
02-10 20:03:53.850: W/dalvikvm(24220): threadid=1: thread exiting with uncaught exception (group=0x40f0a2a0)
02-10 20:03:53.850: E/AndroidRuntime(24220): FATAL EXCEPTION: main
02-10 20:03:53.850: E/AndroidRuntime(24220): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.paad.todolist/com.paad.todolist.MainActivity}: java.lang.NullPointerException
02-10 20:03:53.850: E/AndroidRuntime(24220):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2100)
02-10 20:03:53.850: E/AndroidRuntime(24220):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
02-10 20:03:53.850: E/AndroidRuntime(24220):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
02-10 20:03:53.850: E/AndroidRuntime(24220):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
02-10 20:03:53.850: E/AndroidRuntime(24220):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-10 20:03:53.850: E/AndroidRuntime(24220):    at android.os.Looper.loop(Looper.java:137)
02-10 20:03:53.850: E/AndroidRuntime(24220):    at android.app.ActivityThread.main(ActivityThread.java:4898)
02-10 20:03:53.850: E/AndroidRuntime(24220):    at java.lang.reflect.Method.invokeNative(Native Method)
02-10 20:03:53.850: E/AndroidRuntime(24220):    at java.lang.reflect.Method.invoke(Method.java:511)
02-10 20:03:53.850: E/AndroidRuntime(24220):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
02-10 20:03:53.850: E/AndroidRuntime(24220):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
02-10 20:03:53.850: E/AndroidRuntime(24220):    at dalvik.system.NativeStart.main(Native Method)
02-10 20:03:53.850: E/AndroidRuntime(24220): Caused by: java.lang.NullPointerException
02-10 20:03:53.850: E/AndroidRuntime(24220):    at com.paad.todolist.MainActivity.onCreate(MainActivity.java:30)
02-10 20:03:53.850: E/AndroidRuntime(24220):    at android.app.Activity.performCreate(Activity.java:5206)
02-10 20:03:53.850: E/AndroidRuntime(24220):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
02-10 20:03:53.850: E/AndroidRuntime(24220):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
02-10 20:03:53.850: E/AndroidRuntime(24220):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T22:31:22.783

您的代码运行良好。如前所述，您可能没有在清单中定义您的活动。为此，请在项目根目录中的清单文件中执行以下操作。

```
<activity
        android:label="@string/app_name"
        android:name=".Activityname" >
</activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T17:46:31.450

它不起作用，因为您没有在 android 清单 XML 中正确定义您的活动。

# ember.js - 在 ember.js pre4 中连接子视图的正确方法

> ID：14801026
> 
> 赞同：0
> 
> 时间：2013-02-10T18:24:08.267
> 
> 标签：ember.js

我试图找出在 Ember.js pre4 中连接子视图的正确方法。

我在 App.ContactsShowView 类中将以下 html 设置为模板：

```
<div class="container">
    <h1>Show Contact</h1>    
    ID:{{id}}
</div>
 Info:
{{outlet infoarea}} 
```

我想将 ContactsShowinfoView 渲染到上述插座信息区域。

```
App.ContactsShowinfoView = Ember.View.extend({
    templateName: 'contact/templates/contactsShowinfoView',
}); 
```

阅读文档，这似乎应该通过 Route 中的 renderTemplate 方法来完成。我尝试了以下代码的多种变体：

```
App.ContactsShowRoute = Ember.Route.extend({
    renderTemplate:function() {
        this._super();
        this.render( "contactsshowinfo", {
            outlet:"infoarea"

        });
    }
}); 
```

充其量我没有收到错误消息，只是显示了 ContactShow 视图（但没有，连接插座）。

我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:58:35.700

您没有为视图/模板使用一致的名称。试试这个：

```
App.ContactsShowInfoView = Ember.View.extend({
    templateName: 'contact/templates/contactsShowInfoView',
});

App.ContactsShowRoute = Ember.Route.extend({
    renderTemplate:function() {
        this._super();
        this.render( "contactsShowInfo", {
            outlet:"infoarea"

        });
    }
}); 
```

# c++ - C++：查找方法

> ID：14801027
> 
> 赞同：0
> 
> 时间：2013-02-10T18:24:11.917
> 
> 标签：c++

因此，如果我输入 patricia（别担心我将其转换为 toupper），该字符串将被加载到我的向量中。我的问题是关于查找功能。我倒数字符正确吗？所以如果我要输入 patricia 并且 j 将在 ABBOT，PATRICIA 逗号中的值将是 5。好吧，到目前为止我很好，但是在我找到的变量中会发生什么？

```
bool NameSearch::findFirstNames(vector<string> &vsFirst, string name)
{ 

int j = 0;
bool bName = false;
vsFirst.clear();

while(j < total)
{  
    int comma;
    comma = names[j].find(',');

            //Confused here
    int found = names[j].find(name, comma);

    if(found > -1)  
    {
        vsFirst.push_back(names[j]);
        bName = true;
    }

        j++;
} 

return bName;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T18:38:01.943

该`if (found > -1)`测试可能适用于您的平台，但在技术上是可疑的。

的返回类型`std::string::find()`是`std::string::size_type`，如果没有找到您要搜索的子字符串，则返回值是`std::string::npos`（另一方面，如果找到子字符串，则返回值是其第一次出现的字符索引）。

现在该`std::string::npos`值恰好是 type 的最大可能值`std::string::size_type`，如果这是`unsigned int`在您的实现中，则意味着与带*符号*的int的比较`-1`将产生`true`。

但是，一般不能对类型做出任何假设，`std::string::size_type`因此，我建议将测试重写为：

```
if (found != std::string::npos)
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T18:37:52.693

这是误导性代码。 `std::string::find()`返回一个`size_t`，而不是一个`int`。

```
int comma;
comma = names[j].find(','); 
```

这是误导性代码。`std::string::find()`失败时，它返回`std::string::npos`，而不是`-1`。在您的环境中，这相当于`-1`巧合。

```
if(found > -1) 
```

if 语句有效地尝试通过确保没有找到结果来检查“*是否找到结果*`std::string::npos`” 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T19:12:11.007

还有另外两个答案，指出这段代码有什么问题，但我觉得他们都没有向你解释，作者在做什么，这就是你想要的解释。:)

我们先来看下面的代码片段。

```
int comma;
comma = names[j].find(','); 
```

正如所指出的，它应该重写为：

```
size_t comma;
comma = names[j].find(','); 
```

上面的代码中有 4 个`find`方法的重载`std::string` 使用了这个：

```
size_t find (char c, size_t pos = 0) const; 
```

它返回索引，作为第一个参数传递的字符（在您的情况下是`','`）出现在字符串中，或`std::string::npos`​​者如果找不到该字符。显然作者确信该`','`字符必须存在于字符串`names[j]`中并且不检查结果。

在行中：

```
int found = names[j].find(name, comma); 
```

再次应改写为：

```
size_t found = names[j].find(name, comma); 
```

使用了以下`find`方法的重载：

```
size_t find (const string& str, size_t pos = 0) const; 
```

这个搜索字符串以查找`names[j]`作为第一个参数传递的字符串的第一次出现（在您的情况下`name`），并返回匹配开始的索引（如果存在匹配或`std::string::npos`其他情况）。

如您所见，两个提到的`find`方法重载都有第二个参数，默认值为`0`. 第二个参数允许用户指定在搜索字符串中开始搜索的索引（在您的情况下`names[j]`）

来电：

```
comma = names[j].find(','); 
```

相当于调用：

```
comma = names[j].find(',', 0); 
```

它的意思是：`','`在字符串中`names[j]`从头开始查找字符，并返回该字符第一次出现的索引`std::string::npos`，如果该字符串中没有这样的字符，则返回。

来电：

```
size_t found = names[j].find(name, comma); 
```

意思是：在 string 中查找等于的子`name`字符串`names[j]`，但从找到逗号的位置开始，并返回该子字符串第一次出现的索引，或者`std::string::npos`如果该字符串中没有这样的子字符串，则在逗号之后。

也许`comma_position`不是`comma`这个变量会是一个更好的名称。

# r - 在 R 中用变量名增长一个列表

> ID：14801035
> 
> 赞同：12
> 
> 时间：2013-02-10T18:25:06.097
> 
> 标签：r, list

我正在尝试在 R 中增加一个列表，其中每个条目的值和名称都保存在一个变量中，但它似乎不起作用。

```
my_models_names <- names(my_models)
my_rocs=list() 
for (modl in my_models_names) {

    my_probs <- testPred[[modl]]$Y1
    my_roc <- roc(Ytst, my_probs)
    c(my_rocs, modl=my_roc) # <-- modl and my_roc are both variables
    } 
```

我的列表`my_rocs`最后是空的，即使我知道循环迭代（`my_roc`填充）为什么？

在相关说明中，有没有办法在不循环的情况下做到这一点？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-11T07:24:11.870

通常在 R 中，增长的对象是不好的。与从完整对象开始并填充它相比，它增加了使用的内存量。似乎您事先知道列表的大小应该是多少。

例如：

```
my_keys <- letters[1:3]
mylist <- vector(mode="list", length=length(my_keys))
names(mylist) <- my_keys

mylist
## $a
## NULL

## $b
## NULL

## $c
## NULL 
```

您可以通过以下方式进行分配：

```
key <- "a"
mylist[[key]] <- 5
mylist
## $a
## [1] 5
##
## $b
## NULL
##
## $c
## NULL 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-10T18:39:17.643

[我在这个线程](https://stackoverflow.com/questions/1105659/r-how-to-add-variable-key-value-pair-to-list-object)上找到了答案。

我可以使用以下通用公式扩展列表：

```
mylist <- list()

for (key in my_keys){ 
mylist[[ key ]] <- value # value is computed dynamically
} 
```

在我的操作中：

*   `mylist`是 `my_rocs`
*   `key`是`modl`
*   `value`是`my_roc`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-11T07:44:39.120

您还可以使用更类似于 R 的解决方案，并使用`lapply`：

```
get_model = function(model_name) {
    my_probs <- testPred[[model_name]]$Y1
    return(roc(Ytst, my_probs))
  }
model_list = lapply(names(my_models), get_model) 
```

Note that this solution saves you a lot of boilerplate code, it also does not suffer from the reallocation problem of your solution by growing the object. For large datasets, this can mean that the `lapply` solution is thousands of times faster.

# mysql - 什么数据库用于 3D 距离计算？

> ID：14801039
> 
> 赞同：0
> 
> 时间：2013-02-10T18:25:14.890
> 
> 标签：mysql, relational-database, hbase, amazon-dynamodb

全部-

我认为我的解决方案之一终于超越了 MySQL。现在我有 7000 万行，它们只是将对象的 x、y、z 存储在 3D 空间中。不幸的是，我不知道如何优化我的数据库来处理插入/查询了。我需要根据距离进行查询（获取距离内的对象）。

有人对好的替代品有建议吗？我不知道我是否应该查看 hbase 或非关系数据库之类的东西，因为我可能会遇到类似的问题。我通常每分钟插入大约 100 行，我的查询如下所示：

```
// get objects within 500 yards
SELECT DISTINCT `object_positions`.`entry` FROM `object_positions` WHERE  `object_positions`.`type` = 3 AND `object_positions`.`continent` = '$p->continent' AND SQRT(POW((`object_positions`.`x` - $p->x), 2) + POW((`object_positions`.`y` - $p->y), 2) + POW((`object_positions`.`z` - $p->z), 2)) < 500; 
```

没什么复杂的，但我认为所涉及的数学是导致 MySQL 爆炸的原因，我想知道我是否应该研究基于云的数据库解决方案？它很容易每秒处理 10-100 个查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T19:43:42.340

给您带来麻烦的不是 MySQL，而是需要对您的问题应用索引。你有一个问题，再多的 NoSQL 或云计算都无法用魔法解决。

为了清楚起见，这是您的查询简化了一点。

```
SELECT DISTINCT entry 
           FROM object_positions 
          WHERE type = 3 
            AND continent = '$p->continent'
            AND DIST(x,$p->x, y, $p->y, z,$p-z) < 500 
```

DIST() 是笛卡尔距离函数的简写。

您需要在表中的 x、y 和 z 上放置单独的索引，然后您需要这样做：

```
SELECT DISTINCT entry 
           FROM object_positions 
          WHERE type = 3 
            AND continent = '$p->continent'
            AND x BETWEEN ($p->x - 500) AND ($p->x + 500)
            AND y BETWEEN ($p->y - 500) AND ($p->y + 500)
            AND z BETWEEN ($p->z - 500) AND ($p->z + 500)
            AND DIST(x,$p->x, y, $p->y, z,$p-z) < 500 
```

该语句的三个`BETWEEN`子句`WHERE`将允许使用索引来避免对每个查询的表进行全表扫描。他们将在候选点周围的 1000x1000x1000 立方体中选择所有点。然后 DIST 计算将抛出您想要的半径之外的那些。您将获得相同批次的积分，但效率更高。

您不必实际创建 DIST 函数；您在问题中的公式很好。

您确实有（类型，大陆）的索引，不是吗？如果不是你也需要它。

# iphone - iPhone 应用程序按钮样式，例如“添加到主屏幕”按钮

> ID：14801042
> 
> 赞同：0
> 
> 时间：2013-02-10T18:25:39.857
> 
> 标签：iphone, button, uibutton

我是 iphone 应用程序开发的新手，我只想在左侧屏幕截图上创建一个像这样的按钮栏。

[http://www.internet-fuer-architekten.de/files/iphone_app-simulation2.png](http://www.internet-fuer-architekten.de/files/iphone_app-simulation2.png)

这些是什么类型的按钮？

我可以在 xcode 中找到的唯一按钮是“圆形矩形按钮”和“工具栏按钮”。但它们都与屏幕截图上的按钮不同。

我在 iPhone 上的许多应用程序中都看到了这个按钮，所以我认为它们一定是来自 IOS 的按钮。

有谁知道，如何获得这个按钮？

多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:28:37.253

左边的屏幕截图显示了一个[UIActionSheet](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIActionSheet_Class/Reference/Reference.html)。您可以使用此类来制作类似的操作表弹出窗口，但如果您想在`UIActionSheet`类之外使用该按钮样式，则必须创建`UIButton`带有背景图像的自定义。

# filtering - 使用 Windows Azure 过滤队列中的消息

> ID：14801044
> 
> 赞同：4
> 
> 时间：2013-02-10T18:26:00.433
> 
> 标签：filtering, message-queue, azure-storage-queues, azure-servicebus-queues

有什么方法可以根据属性过滤消息吗？我的意思是，只有某些属性才能让 Worker 角色使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T19:54:31.230

[我假设当您谈论过滤时，您的意思是队列端过滤，而不是客户端过滤]

据我所知，Azure 队列没有消息过滤功能。如果您使用 ServiceBus 主题和订阅，则可以根据消息属性进行过滤。有关更多信息，请参阅[本文](http://msdn.microsoft.com/en-us/library/windowsazure/hh699844.aspx)的订阅过滤器部分。

# jquery - 在 jQuery 中重新排列 html 表的代码

> ID：14801045
> 
> 赞同：0
> 
> 时间：2013-02-10T18:26:16.327
> 
> 标签：jquery, html-table

我怎么能从这个开始：

```
<tr>
    <td>A</td>
    <td><input for A></td>
</tr>
<tr>
    <td>B</td>
    <td><input for B></td>
</tr> 
```

对此：

```
<tr>
    <td>A</td>
    <td>B</td>
</tr>
<tr>
    <td><input for A></td>
    <td><input for B></td>
</tr> 
```

我需要将行移动到 n （这取决于从数据集中检索到的行数，在这种情况下为 2 列，但它可以是任意数量）列数。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:58:04.490

您可以将表数据读入二维数组，然后用转置矩阵覆盖表数据。

```
function reArrange() {
    var table = $('table#theTable');
    // we will store all the table-data in a two-dim array:
    var data = new Array();
    // find all rows (row-index: i):
    $(table).find('tr').each(function(i, row) {
        // find all cells in this row (col-index: j):
        $(row).find('td').each(function(j, cell) {
            // make sure, we got the array right:
            if ( data[j] === undefined ) {
                data[j] = new Array();
            }
            // use col-index as first index in the array:
            data[j][i] = $(cell).html();
        });
    });
    // reset table:
    $(table).find('tr').remove();  
    // re-fill table
    $(data).each(function(i, elem){
        var row = $('<tr/>');
        $(elem).each(function(j, col) {
            cell = $('<td/>').html(col);
            $(row).append(cell);
        });
        $(table).append(row);
    });

}
reArrange(); 
```

看看这个 jsFiddle：http: [//jsfiddle.net/66YpC/2/](http://jsfiddle.net/66YpC/2/)

我希望，这就是你要找的。如果您需要有关代码的更多信息，请告诉我！

# jquery-mobile - jQueryMobile - 使用 ajax 循环每个按钮以更改嵌套标签的文本

> ID：14801046
> 
> 赞同：2
> 
> 时间：2013-02-10T18:26:24.017
> 
> 标签：jquery-mobile, text, each

我有一个页面，将在单击按钮时进行外部调用，然后更新按钮以反映成功。ajax 调用正常工作，但是当页面上有很多按钮时，我很难尝试操作按钮的文本。

当它是页面上唯一的项目时，它很容易匹配 `$(".sabPauRes.ui-btn-text").text("Updated");`，但我不确定在使用每个函数时如何使用 $(this) 指向它。我读了一些关于“最接近”的内容，但它似乎并没有完成我想要的（或者我只是做错了）。

下面的代码示例！

```
$(document).ready(function(){
    $('.sabPauRes').each(function() {
        $(this).click(function(event) {
            event.preventDefault();
            $.ajax({
                type: "GET",
                url: this.href,
                cache: false,
                dataType: "text",
                success: onSuccess
            })
        })

        $("#resultLog").ajaxError(function(event, request, settings, exception) {
            $("#resultLog").html("Error Calling: " + settings.url + "<br />HTTP Code: " + request.status);
        })

        function onSuccess(data)
        {
            // validate the result of the ajax call, update text, change button methods as needed
            if (data == "Success") {
                // PROBLEM -- how do I use $this to match a class that is nested within it?
                $(this).closest(".ui-btn-text").text("Updated");
            } else {
                alert("Failed: " + data);
            }
            $("#resultLog").html("Result: " + data);

        }
    })
}) 
```

html

```
<body>
<div data-role="page">
    <div data-role="content">

    <div data-role="collapsible">
        <h3>This is an item</h3>
        <p>
                <a href="/api/?resume=fhdh54" class="sabPauRes" data-ajax="false" data-role="button" data-inline="true" data-request="resume">Resume Download</a>

            <div id="resultLog"></div>
        </p>
    </div>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:50:53.633

Found the answer within [Change button text jquery mobile](https://stackoverflow.com/questions/4009524/change-button-text-jquery-mobile)

If you assign $(this) to a variable, then you can reference it in the .text() function as shown below:

```
$(document).ready(function(){
$('.sabPauRes').each(function() {
    $this = $(this);
    $(this).click(function(event) {
        event.preventDefault();
        $.ajax({
            type: "GET",
            url: this.href,
            cache: false,
            dataType: "text",
            success: onSuccess
        })
    })

    $("#resultLog").ajaxError(function(event, request, settings, exception) {
        $("#resultLog").html("Error Calling: " + settings.url + "<br />HTTP Code: " + request.status);
    })

    function onSuccess(data)
    {
        // validate the result of the ajax call, update text, change button methods as needed
        if (data == "Success") {
            alert(data);
            $(".ui-btn-text",$this).text("Updated");
        } else {
            alert("Failed: " + data);
        }
        $("#resultLog").html("Result: " + data);

    }
}) 
```

})

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T20:58:24.370

第一件事。使用 jQuery Mobile 时请停止使用 jQuery 就绪处理程序。给你的页面一个`id`并使用`pageinit()`事件。

> **[pageinit = DOM 就绪](http://jquerymobile.com/demos/1.2.0/docs/pages/page-scripting.html)**
> 
> 人们在 jQuery 中学习的第一件事就是使用 $(document).ready() 函数在 DOM 准备好后立即执行特定于 DOM 的代码（这通常发生在 onload 事件之前很久）。然而，在 jQuery Mobile 站点和应用程序中，页面被请求并注入到与用户导航相同的 DOM 中，因此 DOM 就绪事件没有那么有用，因为它只针对第一页执行。要在 jQuery Mobile 中加载和创建新页面时执行代码，您可以绑定到 pageinit 事件。

您可以将 ref 保存到单击的按钮并在处理程序中使用它，`success`如下`error`所示：

```
$(document).on("pageinit", "#page1", function(){
    $(document).on("click", "a.sabPauRes", function(event){
        event.preventDefault();
        //Save a ref to the clicked button
        $this = $(this);
        $.ajax({
            type: "GET",
            url: this.href,
            cache: false,
            dataType: "text",
            success: function (data){
                // validate the result of the ajax call, update text, change button methods as needed
                if (data == "Success") {
                    $this.find(".ui-btn-text").text("Updated");
                } else {
                    $this.find(".ui-btn-text").text("Failed");
                }
                $("#resultLog").html("Result: " + data);
            },
            error: function(jqXHR, textStatus, errorThrown) {
                $this.find(".ui-btn-text").text("Error");
                $("#resultLog").html("Error Calling: " + $this.attr("href") + "<br />HTTP Code: " + jqXHR.status + " " + jqXHR.statusText);
            }
        })

    });
}); 
```

这是[jsFiddle](http://jsfiddle.net/pmatseykanets/mkEMk/)

# android - 使用 Android XML 的部分标题？

> ID：14801047
> 
> 赞同：2
> 
> 时间：2013-02-10T18:26:31.667
> 
> 标签：android, eclipse, user-interface

`enter code here`浏览我遇到的这个部分/示例的 Android UI 指南：

![在此处输入图像描述](../Images/c608cdc2572ce9f3382ad55d46387f28.png)

在上面的示例中，有几个名为“SECTION”的标题，其下方有一条水平线。

我仍然掌握了复制这一点的适当方法 - 是否有特定的东西，如使用`Header`XML 元素，可以自动设置字体和水平线的样式？或者像这样的东西通常更原始，即A`TextView`下面有一个1像素的水平图像（`ImageView`？）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-17T10:29:40.723

这一个可能重复的问题：[Android 4.0 Sub-Title (section) Label Styling](https://stackoverflow.com/questions/10020466/android-4-0-sub-title-section-label-styling)

简而言之：尝试`style="?android:attr/listSeparatorTextViewStyle"`在 XML 布局文件中向 TextView 元素添加您希望使其看起来像这样的属性。

# java - 字段类型为 bigDecimal 的 entityManager 持久性行为不一致

> ID：14801048
> 
> 赞同：1
> 
> 时间：2013-02-10T18:26:32.957
> 
> 标签：java, jpa, eclipselink, derby, bigdecimal

我使用实体管理器为 int byte string double 等几种类型保存数据，这工作正常我将字段添加到实体类类型 bigDecimal 并且在调试对象包含值类型 bigDecimal 的代码时我可以看到。当我从表中读取数据时，我得到了所有类型的条目，但没有得到 bigDecimal(got 0) 的条目，知道这可能是什么原因。我验证该类包含为 bigDecimal 获取和设置。顺便说一句，我将 derby DB 与 eclipselink 一起使用

发生了一些奇怪的事情，这是我调试过程的不一致行为，两次我能够看到 bigdecimal 数据......

这是实体

```
@Entity
public class emp {

    @Id
    @GeneratedValue(strategy = GenerationType.TABLE)
    private int id;
    private String firstName;
    private String lastName; 
        private BigDecimal bigDecimal; 
```

这是保存数据的代码，这里的对象包含所有的值

```
entityManager.getTransaction().begin();
entityManager.persist(object);
entityManager.getTransaction().commit(); 
```

这是读取数据的代码

```
 factory = Persistence.createEntityManagerFactory("abc");
        EntityManager entityManager = factory.createEntityManager();

String className = classOjc.toString();

            Query query = entityManager.createQuery("SELECT p FROM " + className + " p");

            @SuppressWarnings("rawtypes")
            List resultList = query.getResultList();

            System.out.println(resultList.size());

            for (Object result : resultList) {

                System.out.println(result.toString());
            } 
```

# javascript - JQuery复选框切换按钮几次后不起作用

> ID：14801050
> 
> 赞同：7
> 
> 时间：2013-02-10T18:26:43.360
> 
> 标签：javascript, jquery, html

谁能解释为什么按切换 3 次后代码片段不起作用？

选中的属性仍设置为“已选中”，但浏览器不再选中复选框。

```
$(document).ready(function() {

  $("#btn").click(function() {

    if($("#chk").is(":checked"))  
       $("#chk").removeAttr("checked");  
    else
       $("#chk").attr("checked","checked");

    $("#lbldebug").text($("#chk").clone().wrap('<p>').parent().html());
  });
}); 
```

见[http://jsbin.com/ewawih/2/edit](http://jsbin.com/ewawih/2/edit)

我已经在 Opera 和 Chrome 上测试过，两者都有同样的问题。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T18:48:26.803

对于 jQuery 1.9+，属性的 attr 将不起作用，您可以简化复选框的切换，例如：

```
 $("#btn").click(function() {
      $("#chk").prop("checked",!$("#chk").prop("checked"));
      $("#lbldebug").text($("#chk").clone().wrap('<p>').parent().html());
  }); 
```

编辑：看到：`!$("#chk").prop("checked")`注意使布尔值与当前相反的第一个字符，因此切换通过将其设置为与当前相反的值来工作，无论该值是什么。

只是为了解释一下`attr('checked')`，在 jQuery 1.9+ 中访问 获取原始属性 - 这是标记的一部分，而`.prop("checked")`访问当前属性值。有些东西仍然是属性，但是这是一个属性，并且通过/作为属性访问属性已被弃用，然后在 jQuery 1.9/2.0 中被删除。在 jQuery 1.6 中，他们进行了更改，在 1.6.1 中，他们恢复了其中的一些更改并弃用了`attr()`，尽管由于 1.6.1 的更改它仍然有效。1.9+ 然后删除了这些用法。将属性视为某个字符串，将属性视为当前值。您对属性的使用是访问该字符串，该字符串没有更改，而属性确实更改了，因此`.prop()`有效。

另请注意，您对元素的文本/换行（我假设用于调试）不显示属性，而仅显示不包含该属性的元素的“字符串” - 因此它似乎不会改变/存在您以这种方式“调试”，您需要添加对属性的访问（真/假值）并附加它以获得该值的可见表示。

*   属性值反映默认值（它在开始时/页面首次呈现时的标记中的内容）而不是当前可见状态和实际值（某些旧版本的 IE 有所不同）。因此，您会看到属性不会告诉您复选框是否被选中。

对于 chrome 上的 1.9.1：

```
$("#chk").checked //returns undefined 
```

> ~~（以前在更改之前工作，感觉像一个错误）~~

EDIT2：错误：格式不正确

```
$("#chk")[0].checked // proper form works
$("#chk").get(0).checked  // same as above, works
document.getElementById("chk").getAttribute("checked") // returns "checked" or null or "true" or "fun" or empty "" if it was set thay way, attribute present checks box
$("#chk").is(":checked") // returns true/false current value
$("#chk").attr("checked") // returns "checked" or undefined does not change
document.getElementById("chk").defaultChecked // returns true/false of original, does not change
$("#chk").prop("checked") // returns current value true/false
document.getElementById("chk").checked //returns current value true/false
$("#chk").is("[checked]") // attribute selector returns original value, does not change 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T18:30:57.573

```
if($("#chk").is(":checked"))  
    $("#chk").prop("checked", false);  
else
    $("#chk").prop("checked", true); 
```

您应该使用`.prop()`并且检查也可以使用 BOOLEAN 指定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T18:38:00.523

```
$(document).ready(function() {

  $("#btn").click(function() {

    if($("#chk").attr('checked')=='checked')  
       $("#chk").removeAttr("checked");  
    else
       $("#chk").attr("checked","checked");

    $("#lbldebug").text($("#chk").clone().wrap('<p>').parent().html());
  });
}); 
```

希望它对你有用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-24T10:38:37.263

官方解决方案是 Muhammad Talha Akba 之一：

[http://jquery.com/upgrade-guide/1.9/#attr-versus-prop-](http://jquery.com/upgrade-guide/1.9/#attr-versus-prop-)

# java - 如何定义 F 和 F 和 F Java中的接口？

> ID：14801051
> 
> 赞同：1
> 
> 时间：2013-02-10T18:26:43.960
> 
> 标签：java

我将如何在 Java 中定义和`F<T>`接口（代替C#，它们将具有带有一个、两个和三个参数的函数在内部返回 void）？`F<T,U>``F<T,U,V>``Action`

当我尝试将它们创建为嵌套类型时，我收到一条错误消息“重复嵌套类型 F”，当我尝试将它们创建为顶级类型时，我必须将两者都`F<T>`放在`F<T,U>`F.java 中。

我也许可以通过将每个 F 放在单独的包中来解决这个问题，但我不喜欢这种解决方案，因为我必须定义尽可能多的包，因为我将拥有尽可能多的通用参数。

实现具有多个泛型参数等的 Tuple 类也是如此。

代码示例，不起作用：

```
public interface F<T>{
    public void f(T arg1);
}

public interface F<T,U>{
    public void f(T arg1,U arg2);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T18:44:23.620

您不能使用相同的接口名称来执行此操作。Java 删除参数化类型。

其他工具包也使用 F1<T>、F2<T1、T2> 和 F3<T1、T2、T3> 等名称完成了类似的操作。它有点冗长，但有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T18:40:06.677

> 我必须将 F 和 F 都放在 F.java 中。

因为`F`被定义为`public`（这个可以省略）

还要避免使用同名的多个接口。从来没有一个很好的理由这样做！

```
interface F<T,U,V>{
   public void f(T arg1);
   public void f(T arg1, U arg2, V arg3);
   public void f(T arg1, U arg2);
}

public class TryTest<T,U,V> implements F<T,U,V>{
   public void f(T arg1, U arg2){ }
   public void f(T arg1) { }
   public void f(T arg1, U arg2, V arg3) { }
   public static void main(String[] args) { 
      System.out.println("Works!");
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T18:43:17.243

问题是你不能有两个同名的接口。在编译期间不使用泛型（原始类型），因此编译器不会区分它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-10T18:47:05.853

在 Java 中，泛型类型具有固定数量的类型参数。因此，如果您需要不同数量的参数，则需要不同的类型：

```
interface F1<T> {
    void f(T arg);
}

interface F2<T, U> {
    void f(T t, U u);
} 
```

等等。

# python - Python拆分为换行符

> ID：14801057
> 
> 赞同：3
> 
> 时间：2013-02-10T18:27:22.560
> 
> 标签：python, string, split, beautifulsoup, urllib2

我有一个 html 文件，我正在检索文本的正文

我想打印一行

现在我正在打印

```
for line in newName.body(text=True):
    print line 
```

这给了我身体里的一切我想要打印的东西

```
for line in newName.body(text=True):
    print line[257:_____] # this is where i need help 
```

而不是*_*或选择另一个数字来结束我希望它转到换行符，所以它看起来像

```
for line in newName.body(text=True):
    print line[257:'\n'] 
```

但是那个剂量工作我怎样才能使它工作？

我正在处理的文本位于 body pre 我想要的文本 /pre /body

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-10T18:52:53.280

您可以使用[`.partition()`方法](http://docs.python.org/2/library/stdtypes.html#str.partition)来获取第一行：

```
first_line = newName.body.getText().partition("\n")[0] 
```

假设`newName`是一个`BeautifulSoup`对象。它通常被命名为`soup`.

要从`<pre>`html 中的第一个标签获取文本：

```
text = soup.pre.string 
```

要获取文本中的行列表：

```
list_of_lines = text.splitlines() 
```

如果要在文本中保留行尾标记：

```
list_of_lines = text.splitlines(True) 
```

要从列表中获取第 i 行：

```
ith_line = list_of_lines[i] 
```

注意：从零开始的索引，例如，`i = 2`对应于第 3 行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T19:56:10.623

无法保证您的 HTML 文件不止一行。网页可以排成一行，但页面的结构不必与标记的结构相匹配，反之亦然。

可以肯定的是，试试这个：

> 打印 len(newName.body(text=True).split('\n'))

如果该值> 1，那么您应该能够获得所需的行，例如：

> newName.body(text=True).split('\n')[257]

也许不是最优雅的方式，但它确实有效，如果实际上有多行的话。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-10T20:13:04.103

是你想要`line[127:line.find('\n')]`的，因为你确定它是`127`从那时起同样你必须确定有一个`\n`.

# ruby-on-rails - 非空唯一键轨

> ID：14801058
> 
> 赞同：0
> 
> 时间：2013-02-10T18:27:27.170
> 
> 标签：ruby-on-rails, ruby-on-rails-3

Rails 中的唯一键是如何生成的？

我有一个规格说`The backend will have a relational DB, with one table with the following schema: "user : string, password : string, count : int", with user enforced to be non-empty, a unique key.`

这是否意味着如果我使用

```
rails generate scaffold UserModel user:string password:string count:int 
```

将为我生成一个唯一的密钥？默认情况下它会有非空要求吗？

还是我需要

```
rails generate scaffold UserModel user:string password:string count:int unique_key int 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:33:36.167

Rails 将为您生成密钥并在内部处理它们。无需明确包含它们。

因此，您可以简单地编写如下内容：

```
rails generate scaffold User user:string password:string count:int 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T18:33:42.860

Rails 将使用生成器自动创建一个*唯一*且不为*null*`id`的字段。这应该符合您的要求。

# asp.net - 我想从 SQL Server 表中的数据时间类型字段中获取正确格式的年/月/日

> ID：14801061
> 
> 赞同：0
> 
> 时间：2013-02-10T18:27:38.173
> 
> 标签：asp.net, sql, sql-server, sql-server-2008

我在 SQL Server 中有一个表，它有一`orderDate`列`datetime`类型

![在此处输入图像描述](../Images/8a7163f6088c5dc75656ecd912028080.png)

我在我的 asp.net 页面中使用 using`System.Globalization`并使用此代码来获取我的太阳能格式的系统日期历史记录，例如 1391/01/29 年/月/日：

```
 PersianCalendar pc=new PersianCalendar(); 
 DateTime dt = DateTime.Now; 
 string year= pc.GetYear(dt).ToString();
 string month= pc.GetMonth(dt).ToString();
 string day= pc.GetDayOfMonth(dt).ToString(); 
```

它工作正常，然后我将日期存储在我的表中，然后在 SQL Server 中编写一个选择查询，它工作正常，但是当我获取此列值并将其显示在我`SqlDataSource`在另一个 asp.net 页面中使用的网格视图中时，它显示结果是这样的：

```
AM 12:00:00  9/1/1391 
```

但它应该显示如下结果

```
1391/09/01 
```

我不知道为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T18:45:15.740

在绑定字段上设置[DataFormatString属性：](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.boundfield.dataformatstring.aspx)

```
<asp:BoundField DataField="<Your Date Field>" HeaderText="<Column Header>"
                DataFormatString="{0:yyyy-MM-dd}"  /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T18:46:58.890

或者您可以在传递给应用程序之前在服务器上转换日期值。

```
SELECT replace(convert(varchar(10),getdate(),120),'-','/') date 
```

# python - “for”如何定义函数中的变量？

> ID：14801066
> 
> 赞同：0
> 
> 时间：2013-02-10T18:28:07.207
> 
> 标签：python, function, variables, sum

我正在尝试定义一个函数来查找句子中单词的平均长度。一切都很好，但我只是询问了我的功能的某些部分，即：

```
random_sentence = str(input('Enter a sentence:'))

def average():
    'Takes the average length of a word in a sentence inputed by user.'
    words = random_sentence.split()
    averageword = sum(len(word) for word in words)/len(words)
    return averageword

print(average())

averageword = sum(len(word) for word in words)/len(words) 
```

我了解 sum 和 len 的作用，但是，Python 如何知道“单词中的单词”中的“单词”是什么。它是在某处预定义的吗？当我把这句话拿出来时，功能就起作用了，因为它会说单词没有定义。我很欣赏澄清。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T18:35:56.303

`for` [是 Python 中的关键字](http://docs.python.org/dev/reference/lexical_analysis.html#keywords)。

当 Python 执行一个程序时，它会将文件转换为一系列带有[词法分析的](http://en.wikipedia.org/wiki/Lexical_analysis)*标记*。之后，对标记进行[解析](http://en.wikipedia.org/wiki/Parsing)以确定它们属于哪个构造。

在您的情况下，之前的[*表达式*标记](http://docs.python.org/dev/reference/expressions.html#grammar-token-expression)`for`使构造成为[生成器表达式](http://docs.python.org/dev/reference/expressions.html#generator-expressions)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T18:43:34.053

列表`words`是可迭代的——它定义了一个`__iter__`方法，该方法返回列表的迭代器。`for`关键字调用`__iter__()`列表，然后调用迭代`next()`器，直到`StopIteration`抛出异常：

```
In [1]: words = ["a", "b"]

In [2]: i = words.__iter__()

In [3]: i
Out[3]: <listiterator at 0x5cd82b0>

In [4]: i.next()
Out[4]: 'a'

In [5]: i.next()
Out[5]: 'b'

In [6]: i.next()
---------------------------------------------------------------------------
StopIteration                             Traceback (most recent call last)
<ipython-input-6-e590fe0d22f8> in <module>()
----> 1 i.next()

StopIteration: 
```

关于迭代器和迭代器的更多细节：

[http://docs.python.org/2/library/stdtypes.html#iterator-types](http://docs.python.org/2/library/stdtypes.html#iterator-types) [http://getpython3.com/diveintopython3/iterators.html#a-fibonacci-iterator](http://getpython3.com/diveintopython3/iterators.html#a-fibonacci-iterator)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T19:03:43.113

“单词”在列表推导和生成器表达式以及 for 循环中本地定义。这就像一个临时变量。

用 'x' 代替 'word' 来这样想：

```
theSum = sum([len(x) for x in words]) 
```

（我在它周围加上括号以表明它就像一个列表）。这意味着“让 x 成为列表‘单词’中的一个元素。对于每个 x，计算它的长度并根据结果制作一个列表。”

你也可以这样想：

```
list = []
for x in words:
    list.append(len(x))

theSum = sum(list) 
```

[您可以在List Comprehensions](http://www.secnetix.de/olli/Python/list_comprehensions.hawk)获得一些关于语法的血腥细节

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T18:37:27.590

for x in y 要求 y 是可迭代的（即列表、字典、字符串等）

然后python遍历y，每次迭代x定义为y[iteration#]

所以基本上如果 y = [1,2,3]

```
for x in y:
    print x 
```

将返回

1

2

3

# cocoa-touch - iOS 开发 - 从设置 root.plist 引用 js 文件

> ID：14801067
> 
> 赞同：0
> 
> 时间：2013-02-10T18:28:08.537
> 
> 标签：cocoa-touch

在我的 webviewcontroller.m 文件中，我引用了外部 JS 和 CSS 文件，用于操作我拉入 WebViewUI 的内容。

我可以使用引用外部文件；

```
[webView stringByEvaluatingJavaScriptFromString: @"var script = document.createElement('script');"
 "script.type = 'text/javascript';"
 "script.src = 'http://xxx/xxx.js';"
 "document.getElementsByTagName('head')[0].appendChild(script);"]; 
```

但是我一直在使用设置 root.plist 引用文件路径时遇到问题；

```
NSString *JSStr = @"var script = document.createElement('script');"
    "script.type = 'text/javascript';";
    JSStr = [JSStr stringByAppendingString:[defaults stringForKey:@"overridejspath" ]];
    JSStr = [ JSStr stringByAppendingString:@"document.getElementsByTagName('head')[0].appendChild(script);"];
    [webView stringByEvaluatingJavaScriptFromString:JSStr]; 
```

我可以使用类似的方法成功引用 CSS 文件，但不能引用 JS 文件。你能帮我吗？

# linux - 在 Windows 和 Linux 中编写 C 会导致编译问题吗？

> ID：14801069
> 
> 赞同：1
> 
> 时间：2013-02-10T18:28:14.467
> 
> 标签：linux, windows, cross-compiling

我在两台不同的机器上工作。一个是Windows，另一个是Linux。如果我交替处理同一个项目但在两个操作系统之间切换，我最终会遇到编译错误吗？我问是因为也许有一个标准支持但另一个不支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T18:29:52.973

可能只有当您的应用程序使用某些特定 API 时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T19:05:37.513

这个问题非常广泛，严格来说，它取决于您的工具链。如果您使用相同的工具链（例如 GCC/MinGW 或 Clang），您将最大限度地减少此类错误的机会。如果您要在 Windows 上使用 Visual Studio 并在 Linux 端使用 GCC 或 Clang，您会遇到更多问题，因为某些标头不同。因此，一旦您的程序离开了严格的 ANSI C (C89) 领域，您就只能靠自己了。

但是，如果您不小心，您可能会遇到许多其他更严重的错误，例如如果您没有告诉 Windows 端的编辑器使用这些，Linux 上的编译器会在行尾阻塞。

啊，还要记住，如果你想真正进行交叉编译，GCC 可能是最好的选择，因此我在回答中提到的第一部分成为一个有争议的问题。GCC 在两端都是经过验证的选择。鉴于您的问题，您不太可能尝试编写类似内核模式驱动程序的东西 - 这将是根本不同的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T19:36:13.153

完全有可能编写在两个平台上都可以运行的代码，而编译代码没有问题。然而，这并非没有一些困难。编译器允许您在编译器中使用非标准功能，并且通常很难做更多花哨的用户界面（即使它仍然只是文本），因为一旦您开始想要做的不仅仅是“阅读一行文本”进入外壳”，进入“非标准”领域。

如果您确实发现自己需要做的超出标准 C 库所能做的事情，请确保将代码的这些部分隔离到一个单独的文件中（或几个文件，一个用于 Linux/Unix 风格的系统，一个用于 Windows 系统）。

使用相同的编译器 (gcc) 将有助于避免“编译器 B 无法编译在编译器 A 中运行良好的代码”的问题。

但这远非绝对必要——只要确保你在两个平台上编译代码，并且经常使用所有“支持”的编译器，在你发现之前没有挖出一个很难摆脱的非常深的洞“它在其他系统上不起作用”。如果您（至少）有一个运行其他操作系统的虚拟机，这当然会有所帮助，因此您可以轻松地尝试这两种变体。

理想情况下，您希望建立一个自动化系统，这样当您更改代码时[并感觉更改“完成”]，它会自动构建在您想要使用的所有平台和所有编译器上。如果可能的话，还会自动测试！

我也会认真考虑使用版本控制——这样，当某方面出现问题时，您可以返回并查看代码停止工作之前的样子，并（希望）更快地找到它崩溃的原因而不是“嗯，我认为这是我对 foo.c 所做的更改，让我们把它拿出来......不，不是那个，好吧，这里的变化怎么样......” - 至少对于版本控制，你可以说“好的，所以版本 1234 不起作用，让我们尝试版本 1220 - 好的，可以。现在尝试 1228，仍然有效 - 所以在 1229 和 1234 之间更改 - 尝试 1232，啊，它坏了......“没有编辑文件，你仍然可以轻松转到您喜欢的任何其他版本。我用过 Mercurial 很多次，也用过一些 git，一些颠覆，并且在 Perforce 的一个项目上工作了几年。

作为副作用：大多数版本控制系统还以比手动执行更明智的方式处理文件名和行尾。

如果您将版本控制系统与“自动化构建和测试系统”（例如 Jenkins）结合起来，您可以让一切都变得非常自动化。Jenkins 是免费的，可在 Windows 和 Linux 上运行，您可以在将代码提交到版本控制系统时使用它来自动构建和测试您的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T18:55:39.663

在您重新编译相应操作系统中的源代码之前，它不会产生问题。如果你想将windows（.exe或.obj）生成的编译文件运行到linux中，反之亦然，那么它肯定会产生问题并且不可能。但是您可以将源代码（扩展名为 .c/.c++ 的文件）移动到任何操作系统中。有时它也会对不同的头文件产生问题，所以也要注意这一点。最佳实践是为整个项目使用单个操作系统，避免使用多个操作系统，直到非常必要。

# java - 执行查询未定义

> ID：14801070
> 
> 赞同：0
> 
> 时间：2013-02-10T18:28:15.667
> 
> 标签：java, jsp, jdbc

当我尝试在代码中添加 executeQuery 时，我的 Eclipse 显示以下错误 ![在此处输入图像描述](../Images/8f53abb1d4199ab3174187783b96e81e.png)

stmt 只显示执行而不显示 executequery 和其他执行方法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T18:32:53.157

`java.sql.Statement`是 java.sql 包中的一个接口，`java.beans.Statement`是包中的一个类`java.beans`。你需要**[java.sql.Statement](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/Statement.html)**而不是**[java.beans.Statement](http://docs.oracle.com/javase/7/docs/api/java/beans/Statement.html)**。进口`java.sql.Statement`，其中有`extecute(str)`和其他`overloaded execute methods`。`java.beans.Statement`只有一种执行方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T18:32:41.833

如果有行，请查看导入：

```
import java.sql.Statement; 
```

顺便说一句：好的做法是使用 PreparedStatement。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T18:35:09.320

你检查过你的进口吗？确保您使用的是 java.sql.Statement

# algorithm - 随机图中的循环数

> ID：14801072
> 
> 赞同：6
> 
> 时间：2013-02-10T18:28:20.660
> 
> 标签：algorithm, graph-algorithm

*在 8 个顶点的无向随机图中，一对顶点之间存在边的概率为 1/2。长度为 3 的无序循环的预期数量是多少？*

以下是我的想法：

**方法 1** 长度为 3 的基本上循环（“无序”我假设意味着顶点可以按任何顺序获取）将是三角形。

令顶点数 = v，并且没有这样的循环是 C

对于 n=3，C = 1

对于 n = 4，c = 4。（有 2 条对角线的正方形。4 个唯一三角形）。……

对于 n>3，C(n) = (n-2) + (n-2)(n-3) + (n-4)，概括。

这是因为：让我们从外边缘开始，并以此为基础创建可能的三角形。对于我们选择的第一条边（2 个顶点在那里），还有 (n-2) 个其他顶点来选择三角形的第三个点。所以 (n-2) 在第一个任期内。

接下来，最后一项是因为我们选择作为三角形基础的最后一条边的最左边和最右边的三角形已经被我们选择的第一条边和它的前任所占据。

中间项是剩余边数和可能的三角形的乘积。

```
 .--------.

.                   .

.                   .

      .        . 
```

有了上面这组 8 个顶点，我们可以很容易地从视觉上想出来。（如果需要更好的图表，我会做必要的！）。所以对于 v=8，C(8) = 40。所以，边的概率是 1/2 。. .

**方法2** 来自n个点的三角形数量为nC3，其中C是“组合”。但由于这些边缘中的一半预计不会存在。. .

我不知道如何超越这一点。任何正确方向的提示都会很棒。顺便说一句，这不是作业问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-10T18:33:14.840

你有 nC3 个可能的三角形。要出现一个三角形，所有三个边都必须存在 - 所以特定三角形出现的概率是 1/8。

则预期的三角形数为`(nC3) / 8`。

在你的情况下，`8C3 / 8`或 7。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-17T06:15:28.287

所以你已经给出了 n 个顶点，现在你有 nC1 方法来选择第一条边。存在该边的概率为 1/2。现在在左 n-1 边中，我们可以选择 (n-1)C1 方式，概率为 1/2，类似地，第三边与 (n-2)C1 的概率为 1/2所以同时这可以做到**{nC1*(1/2) *(n-1)C1* (1/2)*(n-2)C1*1/2}/3!** 我们必须除以 3！因为它要求无序。

# android - Android如何在ImageView上应用蒙版？

> ID：14801075
> 
> 赞同：34
> 
> 时间：2013-02-10T18:28:48.023
> 
> 标签：android, android-imageview

所以我尝试了这里的代码：[Creating an ImageView with a mask](https://stackoverflow.com/questions/8657144/creating-an-imageview-with-a-mask)。我使用以下图像作为原始图像和蒙版：

![在此处输入图像描述](../Images/bcdce6ca615c0765332ca2fcc4405147.png)![在此处输入图像描述](../Images/7874d94db98d66474108ad0c4c797c33.png)

但是，我得到的结果是这样的：

![在此处输入图像描述](../Images/8de6bf7a08a3198fd87db6428611d070.png)

请注意，窗口背景不是黑色，而是全息光（在银河系上看起来像非常淡的灰色，而不是完全白色）。第二张图片是我在列表视图中选择项目时得到的结果。

相反，如果我使用相同的算法创建一个新的位图，然后将其传递给图像视图而不是覆盖 onDraw()，它会正确绘制：

```
Canvas canvas = new Canvas();
Bitmap mainImage = //get original image
Bitmap maskImage = //get mask image
Bitmap result = Bitmap.createBitmap(mainImage.getWidth(), mainImage.getHeight(), Bitmap.Config.ARGB_8888);

canvas.setBitmap(result);
Paint paint = new Paint();
paint.setFilterBitmap(false);

canvas.drawBitmap(mainImage, 0, 0, paint);
paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_IN));
canvas.drawBitmap(maskImage, 0, 0, paint);
paint.setXfermode(null);

imageView.setImageBitmap(result); 
```

我得到了预期的结果：

![在此处输入图像描述](../Images/8921651cec1e411272ee4e06cff38975.png)

请注意，淡化已正确应用。这在进行选择时更加明显。

那么 ImageView 的 onDraw 方法是如何创建这个黑色背景而不是让窗口背景显示出来的呢？有趣的是，如果原始图像本身具有一定的透明度，则尊重该透明度，例如：

![在此处输入图像描述](../Images/fdf675fcf3a4d7049b2925cc4416fd55.png)

我无法自己弄清楚。我宁愿能够在 onDraw 上执行此操作，而不是预先创建位图，因为它仅适用于作为源和掩码的位图。我希望能够使用渐变和纯色等其他可绘制对象来做到这一点，但在这些情况下，宽度和高度没有设置。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-07-05T11:23:28.627

在研究了所有 stackoverflow 帖子后，我找到了创建没有黑色边框的遮罩的完美组合。它非常适合我的目的。

目前我正在使用一个普通图像和一个遮罩图像（具有透明度的 png）创建一个可拖动视图，因此我需要覆盖 onDraw 函数。

```
private Bitmap mImage = ...;
private Bitmap mMask = ...;  // png mask with transparency
private int mPosX = 0;
private int mPosY = 0;

private final Paint maskPaint;
private final Paint imagePaint;

public CustomView (final Context context) {
    maskPaint = new Paint();
    maskPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));

    imagePaint = new Paint();
    imagePaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_OVER));
}

/* TODO
 if you have more constructors, make sure you initialize maskPaint and imagePaint
 Declaring these as final means that all your constructors have to initialize them.
 Failure to do so = your code won't compile.
*/

@Override
public void onDraw(Canvas canvas) {
    super.onDraw(canvas);

    canvas.save();      
    canvas.drawBitmap(mMask, 0, 0, maskPaint);
    canvas.drawBitmap(mImage, mPosX, mPosY, imagePaint);
    canvas.restore();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T18:56:27.133

回答我自己的问题。Xfermode 按预期工作。油漆使结果是画布透明（这是窗口活动使用的画布）。由于画布本身被设置为透明，窗口显示了它背后的东西：黑色背景。

为了正确地做到这一点，确实必须创建一个新的位图来保存 alpha 蒙版的结果。我更新了代码以考虑所有类型的可绘制对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-15T04:26:52.600

在此代码中适用：

```
 mask_over = BitmapFactory.decodeResource(
            getResources(), mask_over1[0]);
    icon = Bitmap.createScaledBitmap(icon, screenwidth, screenwidth, false);
    mask_over = Bitmap.createScaledBitmap(mask_over, screenwidth, screenwidth, false);
             back_img=createBitmap_ScriptIntrinsicBlur(Bitmap.createScaledBitmap(cropview.croppedImage, screenwidth, screenwidth, false),25.0f);
    LinearLayout.LayoutParams layoutParams111 = new LinearLayout.LayoutParams(screenwidth, screenwidth); 
```

# batch-file - 无法批量解析变量

> ID：14801077
> 
> 赞同：0
> 
> 时间：2013-02-10T18:29:05.907
> 
> 标签：batch-file, copy, robocopy

我正在尝试使用 robocopy 将文件从一个文件夹复制到另一个文件夹，但我认为源和目标设置不正确。非常感谢这方面的帮助。

```
@echo off
SET PathString = C:\Users\bibhukdas\Documents\New_folder1~C:\Users\bibhukdas\Documents\New_folder
echo ******start**** >>C:\Users\bibhukdas\Documents\New_folder\log.txt
echo ******POINT1**** >>C:\Users\bibhukdas\Documents\New_folder\log.txt
echo "%PathString%" >>C:\Users\bibhukdas\Documents\New_folder\log.txt
for /f "tokens=1,2 delims =~" %%a in("%PathString%") do set Source1=%%a&set  Destination1=%%b
echo ******POINT1**** >>C:\Users\bibhukdas\Documents\New_folder\log.txt
if "%Source1%" == "0" goto NOSOURCE1
robocopy.exe %Source1% %Destination1% *.doc /COPY:DAT /MINAGE:5 /R:1 >>    C:\Users\bibhukdas\Documents\New_folder\log.txt

:NOSOURCE1
echo *****source unavailable******* >>C:\Users\bibhukdas\Documents\New_folder\log.txt
:EXIT 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:52:52.847

我对您的代码的要点进行了修改。我认为它现在应该可以工作

```
@echo off
SET "PathString=C:\Users\bibhukdas\Documents\New_folder1,C:\Users\bibhukdas\Documents\New_folder"
set "delim=,"
echo ******start**** 
echo ******POINT1**** 
echo "%PathString%" 
for /f "tokens=1,2 delims=," %%a in (`echo %PathString%`) do (
echo "%%a" 
echo "%%b"
echo ******POINT1**** 
) 
```

让我知道。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T22:58:57.897

您可以轻松添加 ECHO 命令以查看变量的值。这样您就可以确定它们*是否*设置正确。

无论如何，发布的脚本中似乎确实存在一些问题。

第一个是这一行：

```
SET PathString = C:\Users\bibhukdas\Documents\New_folder1~C:\Users\bibhukdas\Documents\New_folder 
```

周围的空间`=`很重要。赋值之前的一个成为变量名的一部分，另一个成为值的一部分。因此，上面的行本质上创建了一个名为 的变量`PathString `，即带有尾随空格字符。要解决此问题，只需删除两个空格。

另一种是`for`循环线。该`delims`选项后跟一个空格，该空格无效，会导致语法错误。同样，只需删除空间。

还有一个不同类型的问题。您不会`source unavailable`在命令之后省略输出`robocopy`，这意味着`source unavailable`尽管文件已被复制，但您仍会在日志中获得该行。这应该可以通过在该行`GOTO :EXIT`之后添加一个命令来轻松解决。`robocopy`但是，您也可以这样做：

```
if "%Source1%" == "0" (
  echo *****source unavailable******* >>C:\Users\bibhukdas\Documents\New_folder\log.txt
) else (
  robocopy.exe %Source1% %Destination1% *.doc /COPY:DAT /MINAGE:5 /R:1 >>    C:\Users\bibhukdas\Documents\New_folder\log.txt
) 
```

最后，您可以通过减少输出重定向的数量来提高脚本的可维护性。

重定向可以应用于括号中的命令块，如下所示：

```
(
  *command1*
  *command2*
  *command3*
  ...
) >*outputfile* 
```

因此，您可以通过这种方式将重定向应用于`C:\Users\bibhukdas\Documents\New_folder\log.txt`所有需要它的命令：

```
(
  echo ******start****
  echo ******POINT1****
  echo "%PathString%"
  for /f "tokens=1,2 delims=~" %%a in("%PathString%") do set Source1=%%a&set  Destination1=%%b
  echo ******POINT1****
  if "%Source1%" == "0" (
    echo *****source unavailable*******
  ) else (
    robocopy.exe %Source1% %Destination1% *.doc /COPY:DAT /MINAGE:5 /R:1
  )
) >>C:\Users\bibhukdas\Documents\New_folder\log.txt 
```

但是请注意，`for`循环必须移到块外。这是因为它设置了稍后`%`在同一块中评估（使用扩展）的变量，这不能按预期工作。这是括号块的效果之一。您可以在此处使用延迟扩展，但在这种特殊情况下，将分配移到块外要容易得多。

因此，在解决了所有提到的问题之后，您的脚本可能如下所示：

```
@echo off
SET PathString=C:\Users\bibhukdas\Documents\New_folder1~C:\Users\bibhukdas\Documents\New_folder
for /f "tokens=1,2 delims=~" %%a in("%PathString%") do set Source1=%%a&set Destination1=%%b
(
  echo ******start****
  echo ******POINT1****
  echo "%PathString%"
  echo ******POINT1****
  if "%Source1%" == "0" (
    echo *****source unavailable*******
  ) else (
    robocopy.exe %Source1% %Destination1% *.doc /COPY:DAT /MINAGE:5 /R:1
  )
) >>C:\Users\bibhukdas\Documents\New_folder\log.txt 
```

# java - 如何将 ImageIcon 添加到 JDialog 中？

> ID：14801079
> 
> 赞同：1
> 
> 时间：2013-02-10T18:29:27.523
> 
> 标签：java, swing, jlabel, jdialog, imageicon

我尝试创建一个包含加载程序 gif 图像和一些文本的浮动对话框。我有以下课程：

```
public class InfoDialog extends JDialog {
    public InfoDialog() {
        setSize(200, 50);
        setDefaultCloseOperation(JDialog.DO_NOTHING_ON_CLOSE);
        setUndecorated(true);
        setLocationRelativeTo(null);

        URL url = InfoDialog.class.getClassLoader().getResource("loader.gif");
        ImageIcon loading = new ImageIcon(url);
        getContentPane().add(new JLabel("Logging in ... ", loading, JLabel.CENTER));
    }
} 
```

但是，当我打电话时：

```
 InfoDialog infoDialog = new InfoDialog()
   infoDialog.setVisible(true); 
```

显示一个空对话框。ImageIcon 和 Label 未显示在对话框中。

我在这段代码中做错了什么？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T19:01:48.797

图像通常放置在“资源”源文件夹中，

![在此处输入图像描述](../Images/76f9aa1098e1fbeb3f0700c5360b704a.png)
然后作为字节流访问，

```
package com.foo;

import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JDialog;
import javax.swing.JLabel;
import javax.swing.SwingUtilities;

public class Demo 
{
    private static final String IMAGE_URL = "/resource/bar.png";

    public static void main(String[] args) 
    {
        createAndShowGUI();
    }

    private static void createAndShowGUI()
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run() 
            {
                try
                {
                    JDialog dialog = new JDialog();     
                    dialog.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
                    dialog.setTitle("Image Loading Demo");

                    dialog.add(new JLabel(new ImageIcon(ImageIO.read(getClass().getResourceAsStream(IMAGE_URL)))));

                    dialog.pack();
                    dialog.setLocationByPlatform(true);
                    dialog.setVisible(true);
                } 
                catch (IOException e) 
                {
                    e.printStackTrace();
                }
            }
        });
    }
} 
```

生产摩根弗里曼。

![在此处输入图像描述](../Images/be7e20c76f5e565cbac2e57afac101c3.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T19:01:47.263

我将添加`ImageIcon`到 a`JLabel`然后添加`JLabel`到`JDialog`contentPane 后跟 a `this.validate`and`this.repaint`在构造函数中。

要调试，有时您需要实际代码，没有这些代码只是基于假设的建议

# scheme - 生成素数时的“应用程序：不是程序”

> ID：14801082
> 
> 赞同：0
> 
> 时间：2013-02-10T18:29:37.007
> 
> 标签：scheme, primes, lazy-sequences, sieve, non-procedure-application

我正在尝试输出前 100 个素数并不断收到错误消息：

申请：不是程序；期望一个可以应用于给定参数的过程：(#) arguments...: [none]

错误显示在我的 take$ 过程中：

```
(if (or (= m 0) (null? st))
      '()
      (cons (car st) (take$ (- m 1) ((cdr st))))))) 
```

这是我所有的代码：

```
(define int-builder$
    (lambda (x)
       (list x (lambda () (int-builder$ (+ 1 x ))))))

(define take$
    (lambda (m st)
       (if (or (= m 0) (null? st))
           '()
           (cons (car st) (take$ (- m 1) ((cdr st)))))))

(define filter-out-mults$
   (lambda (num  st)
     (cond
     (( = (remainder (car st) num) 0) 
         (filter-out-mults$ num ((cadr st))))
         (else 
            (list (car st) (lambda () (filter-out-mults$ num ((cadr st)))))))))

(define sieve$
   (lambda (st)
     (list (car st)
          (lambda() (sieve$ (filter-out-mults$ (car st) ((cadr st))))))))

(define stol$
    (lambda (n) 
      (take$ n (sieve$ (int-builder$ 2))))) 
```

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T19:46:41.037

Your problem is that you have not been consistent in how you have been using your abstract Sieve.

Is a sieve defined like this:

```
;; A Sieve is a (cons n p), where
;;    n is a Natural Number
;;    p is a Procedure that takes no arguments and returns a Sieve 
```

or is it defined like this

```
;; A Sieve is a (list n p), where
;;    n is a Natural Number
;;    p is a Procedure that takes no arguments and returns a Sieve 
```

In some places in your code, you are extracting the p and invoking it like this: `((cdr st))`; in other places, like this: `((cadr st))`

The reason that the commenters on your question were looking askance at each of those individually is that you have not given a high-level definition for what the rules are for forming Sieves and extracting subparts from Sieves. A data definition like the one above would help this.

For me, after I added data-definitions, contracts, and then started testing your functions individually, I quickly found the problem. (Hint: It has something to do with the inconsistency between `((cdr st))` and `((cadr st))` noted above.)

Here is my version of your code. It localizes the choice of Sieve representation by hiding it behind an abstract interface; I used a macro to do this since the stream constructor wants to delay evaluation of the expression it receives (though one could work around this by changing the interface so the Sieve constructor was required to take a sieve-producing procedure rather than a direct expression).

Exercise for reader: With the current api, and if someone follows the data definition I have given in this code, `stream-empty?` can never return true; how could you prove this?

```
;; A Stream is a (list Nat (-> () Stream))
;; but this knowledge should not be used anywhere but in the
;; procedures (and special form) stream-rest, stream-first, stream,
;; and stream-empty?.

;; stream-rest: Stream -> Stream
(define (stream-rest st) ((cadr st)))

;; stream-first: Stream -> Nat
(define (stream-first st) (car st))

;; Special Form: (stream <natural-number> <stream-expr>) is a Stream
(define-syntax stream
  (syntax-rules ()
    ((stream n expr) (list n (lambda () expr)))))

;; Stream -> Boolean
(define (stream-empty? st) (null? st))

;; Nat -> Stream
(define (int-builder$ x)
  (stream x (int-builder$ (+ 1 x))))

;; Nat Stream -> [Listof Nat]
(define (take$ m st)
  (if (or (= m 0) (stream-empty? st))
      '()
      (cons (stream-first st) (take$ (- m 1) (stream-rest st)))))

;; Nat Stream -> Stream
(define (filter-out-mults$ num st)
  (cond
   (( = (remainder (stream-first st) num) 0)
    (filter-out-mults$ num (stream-rest st)))
   (else 
    (stream (stream-first st) (filter-out-mults$ num (stream-rest st))))))

;; Stream -> Stream
(define (sieve$ st)
  (stream (stream-first st)
          (sieve$ (filter-out-mults$ (stream-first st) (stream-rest st)))))

;; Nat -> [Listof Nat]
(define (stol$ n)
  (take$ n (sieve$ (int-builder$ 2)))) 
```

# php - 服务器不时阻塞 php 文件

> ID：14801083
> 
> 赞同：1
> 
> 时间：2013-02-10T18:29:40.740
> 
> 标签：php, nginx, webserver

我在 Windows 上使用 Nginx 进行开发测试，并且时不时地加载一个页面。Chrome 只是坐在那里并最终加载显示一个空白的白色页面，并且此行被放入 nginx 的错误日志中：

```
2013/02/10 12:21:34 [error] 936#4372: *406 WSARecv() failed (10054: An existing connection was forcibly closed by the remote host) while reading upstream, client: 24.179.144.72, server: localhost, request: "GET / HTTP/1.1", upstream: "fastcgi://127.0.0.1:9000", host: "24.179.144.72", referrer: "http://24.179.144.72/" 
```

它似乎只发生在 php 页面上，静态页面似乎工作正常。之后页面工作正常一点然后它再次发生。

有没有人遇到过这个问题并找到了解决方法？

# uiwebview - 如何将网站中的图像加载到 UIPageControl 中？

> ID：14801086
> 
> 赞同：0
> 
> 时间：2013-02-10T18:29:58.893
> 
> 标签：uiwebview, uipagecontrol

我真的很想知道如何将特定图像从网站加载到 UIPageController。对我来说有点困惑，可能是因为我是初学者，我不知道......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T19:27:12.847

你想一次做多件事

*   使用例如加载图像数据`[NSData dataWithContentsOfURL:theImageURL]`，或者更好的是，通过异步执行`[NSURLConnection sendAsynchronousRequest:queue:completionHandler:]`。
*   从数据创建图像：`[UIImage imageWithData:theData]`
*   `UIImageView`用该图像初始化一个
*   将其添加到页面控件

如果您不知道图像 URL，则必须解析 HTML 并使用类似的东西提取它`NSXMLParser`

# php - 内爆逻辑未按预期工作

> ID：14801088
> 
> 赞同：0
> 
> 时间：2013-02-10T18:30:10.680
> 
> 标签：php, arrays, multidimensional-array, associative-array

所以我正在建立[关于数组的多维关联数组的这个问题](https://stackoverflow.com/questions/14793148/multi-dimensional-associative-array-of-arrays/14793314#comment20716892_14793314)。我想出的是一种非常简单易行的方法来解决我的问题。以下数组：

```
$options = array(
    'navigation' => array(
        'page_title' => __('Aisis', 'aisis'),
        'menu_title' => __('Aisis', 'aisis'),
        'capabillity' => 'edit_themes',
        'menu_slug' => 'aisis-core-options',
        'function' => 'some_function',
        'icon_url' => '',
        'position' => '',
        'sub_menues' => array(
            array(
                'page_title' => __('Aisis', 'aisis'),
                'menu_title' => __('Aisis', 'aisis'),
                'capabillity' => 'edit_themes',
                'menu_slug' => 'aisis-core-options',
                'function' => 'some_function',
            ), 
            array(
                'page_title' => __('Aisis', 'aisis'),
                'menu_title' => __('Aisis', 'aisis'),
                'capabillity' => 'edit_themes',
                'menu_slug' => 'aisis-core-options',
                'function' => 'some_function',
            ), 
        )
    ),
    'settings' => array(
        array(
            'option_group' => 'bla',
            'option_name' => '',
            'sanitize_call_back' => ''
        )
    ),
    'core_template' => 'path/to/admin/template.phtml'
); 
```

然后按如下方式处理：

```
foreach($options as $settings=>$option){
    if($setting = 'navigation' && is_array($option)){
        foreach($option as $option_key=>$option_value){
            var_dump($option);
            if(!is_array($option_value)){
                echo implode(',', $option);
            }
        }
    }
} 
```

问题是：

在我要说明的最后一个 if 语句中，或者至少我认为我是这样，只要 $options['navigation'] 中的键的值不是数组，就可以分解数组并返回值。这一切都按预期工作，接受它给了我*“数组到字符串的转换”*，由于 if 语句，它“不应该”。

所以我的简单问题是：

**只要键的值不是数组，我如何内爆 $options['navigation'] ？**

我以为我在正确的轨道上......

另外，在那张纸条上，当我看到 var_dump($option_values) 时，我看到了其他数组，所以我不仅看到了 'sub_menues'，而且还看到了 'settings' 数组

我认为我的逻辑是合理的：

*如果关键是导航，请执行此操作。*

本质上，在这种情况下，我遇到了数组的范围问题，那么如何让它只查看 $options['navigation'] 中的键 => 值和任何其他数组，而不是 $options 中的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T19:36:19.800

根据 Kolink 的解决方案构建的正确解决方案：

```
$temp_array = array();
if( is_array($options['navigation'])) {
    foreach($options['navigation'] as $value) {
        if(!is_array($value)){
            $temp_array[] = $value;
        }
    }

    echo implode(',', $temp_array);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T18:47:19.373

使用`==`而不是`=`比较值。

编辑：也就是说，`foreach`如果您只对一个键感兴趣，为什么要使用 a ？

```
if( is_array($options['navigation'])) {
    foreach($options['navigation'] as $value) {
        if( is_array($value)) echo implode(",",$value);
    }
} 
```

# c++ - 我如何使用pickit 2

> ID：14801089
> 
> 赞同：-2
> 
> 时间：2013-02-10T18:30:40.447
> 
> 标签：c++, microcontroller, pic, circuit

嘿大家
我有一个pickit 2，我对微控制器的接线有点困惑。我找到了每个引脚是什么，但我想知道是直接连接它们还是需要使用任何电容器或二极管。如果你能提供一个很好的图表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:28:17.273

如果我理解正确的话，PICKIT 2 是一个演示板，可以上电。如果您指的是在定制板上使用编程器，最简单的方法是模仿演示板的布局。Microchip 通常会为其所有演示板提供原理图，并且通常拥有我见过的任何 MCU 的最佳文档。

# django-south - South and Can't DROP 'created_date'; 检查列/键是否存在“

> ID：14801090
> 
> 赞同：3
> 
> 时间：2013-02-10T18:30:45.873
> 
> 标签：django-south

我尝试添加我的模型降价，但出现错误。我的旧models.py：

```
class Post(models.Model):
    title = models.CharField(max_length=255)
    slug = models.SlugField(max_length=255, unique=True)
    excerpt = models.TextField(blank=True, help_text="A small teaser of\
                your content")
    content = models.TextField()
    date_created = models.DateTimeField(auto_now_add=True)
    is_published = models.BooleanField(default=True)
    objects = models.Manager()
    published_objects = PublishedManager()
    tags = TaggableManager()
category = models.ForeignKey(Category) 
```

和我的新models.py

```
class Post(models.Model):
    title = models.CharField(max_length=255)
    slug = models.SlugField(max_length=255, unique=True)
    excerpt = models.TextField(blank=True, help_text="A small teaser of\
                your content")
    content = models.TextField()
    contentmarkdown = models.TextField()
    date_created = models.DateTimeField(auto_now_add=True)
    is_published = models.BooleanField(default=True)
    objects = models.Manager()
    published_objects = PublishedManager()
    tags = TaggableManager()
    category = models.ForeignKey(Category)

    def save(self):
        self.content = markdown.markdown(self.contentmarkdown)
        super(Post, self).save() # Call the "real" save() method. 
```

当我使用 south 并在此行之后：python manage.py migrate blog 我收到此错误：

```
File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/south/management/commands/migrate.py", line 108, in handle
    ignore_ghosts = ignore_ghosts,
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/south/migration/__init__.py", line 213, in migrate_app
    success = migrator.migrate_many(target, workplan, database)
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/south/migration/migrators.py", line 235, in migrate_many
    result = migrator.__class__.migrate_many(migrator, target, migrations, database)
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/south/migration/migrators.py", line 310, in migrate_many
    result = self.migrate(migration, database)
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/south/migration/migrators.py", line 133, in migrate
    result = self.run(migration)
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/south/migration/migrators.py", line 107, in run
    return self.run_migration(migration)
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/south/migration/migrators.py", line 81, in run_migration
    migration_function()
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/south/migration/migrators.py", line 57, in <lambda>
    return (lambda: direction(orm))
  File "/home/ada/mainproject/blog/migrations/0004_auto__del_field_book_created_date__add_field_post_contentmarkdown__chg.py", line 12, in forwards
    db.delete_column('blog_book', 'created_date')
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/south/db/mysql.py", line 28, in _column_rm
    return func(self, table_name, column_name, *args, **opts)
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/south/db/mysql.py", line 217, in delete_column
    super(DatabaseOperations, self).delete_column(table_name, name)
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/south/db/generic.py", line 51, in _column_rm
    return func(self, table, column, *args, **opts)
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/south/db/generic.py", line 886, in delete_column
    self.execute(self.delete_column_string % params, [])
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/south/db/generic.py", line 273, in execute
    cursor.execute(sql, params)
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/django/db/backends/util.py", line 40, in execute
    return self.cursor.execute(sql, params)
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/django/db/backends/mysql/base.py", line 114, in execute
    return self.cursor.execute(query, args)
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/MySQLdb/cursors.py", line 201, in execute
    self.errorhandler(self, exc, value)
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/MySQLdb/connections.py", line 36, in defaulterrorhandler
    raise errorclass, errorvalue
django.db.utils.DatabaseError: (1091, "Can't DROP 'created_date'; check that column/key exists") 
```

请你告诉我为什么我会收到这个错误？'created_date' 没有任何意义？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T18:39:57.027

这是因为您正在尝试删除包含“created_date”列的内容，如果您查看错误，它指的是文件、行号，甚至是有问题的代码片段。

```
File "/home/ada/mainproject/blog/migrations/0004_auto__del_field_book_created_date__add_field_post_contentmarkdown__chg.py", line 12, in forwards db.delete_column('blog_book', 'created_date') 
```

当您在变量“date_created”和“created_date”之间切换时，您似乎指的是错误的列名

# unix - 使用 fork() 查找数字中的数字总和

> ID：14801097
> 
> 赞同：1
> 
> 时间：2013-02-10T18:31:18.200
> 
> 标签：unix, fork, wait, system-calls

我正在编写一个小程序，它在命令行中输入一个数字，并使用 fork() 创建一个对数字的数字求和的进程链。到目前为止，情况如下：

```
#include <stdio.h>
#include <unistd.h>
#include <sys/wait.h>

int main(int argc, char* argv[]){

  if(argc != 2){
    printf("Usage: sod [number] \n");  /* -o sod when compiled */
    exit(1); 
  }

  pid_t childpid = 0; 
  int sum = 0;   

  int i; 
  for(i = 0; i < strlen(argv[1]); i++){
    /* atoi needs a string */
    char str[2]; 
    str[0] = argv[1][i]; str[1] = 0;  
    sum += atoi(str);   
    if(childpid = fork()) 
      break;  
  }

  wait(NULL); 
  printf("sum: %d\n", sum);
  exit(0); /* probably redundant... */
  return 0; 
} 
```

根据我在系统手册中的理解，if 语句确保进程在一个链中（每个父进程可以有一个子进程，并且继续向下），因为`fork()`将子进程的 id 返回给父进程，将 0 返回给孩子。因此，分配的结果对于父级来说是非零/真，并强制它从循环中中断：

```
 if(childpid = fork()) 
          break; 
```

在我添加`wait(NULL)`调用之前，该函数打印了多行总和，不一定按顺序打印，我认为这应该是预期的，因为进程在不同的时间完成。有趣的是，如果我用大量数字（如 11221121）调用程序，它有时会打印一些总和，在它们中间输出我的 shell 提示符，并在挂在那里之前再打印一些，就像在无限中一样环形：

```
[nvj]@sun ~/313/sod> (12:15:21 02/10/13)
:: sod 11221121
sum: 1
sum: 2
sum: 4
sum: 6
sum: 7
sum: 8
sum: 10

[nvj]@sun ~/313/sod> (12:15:24 02/10/13)
:: sum: 11
sum: 11
[hangs here...] 
```

对于为什么会发生这种情况，我唯一的猜测是某些事情正在超时，或者需要等待其他人的事情正在陷入困境。为了使程序真正结束（并以某种顺序打印总和），我添加了`wait(NULL)`调用。据我所知，它迫使父母在继续之前等待其所有孩子。不出所料，这会导致实际总和在最后一个创建的孩子完成时首先打印，然后让其余的按顺序进行：
[

```
nvj]@sun ~/313/sod> (12:25:02 02/10/13)
:: sod 12389492182398
sum: 69
sum: 69
sum: 61
sum: 52
sum: 49
sum: 47
sum: 39
sum: 38
sum: 36
sum: 27
sum: 23
sum: 14
sum: 6
sum: 3
sum: 1 
```

值得庆幸的是，程序实际上在这种情况下结束。但是，当具有实际总和的孩子返回并显示其结果时，有没有办法让它结束呢？我已经尝试过诸如平面调用之类的东西`exit`（如您所见......），但这似乎在与子进程不同的“领域”中运行，并且在第一次打印后不会立即发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T18:37:59.153

使用`fork()`是一种对数字求和的非常昂贵的方法。您可以使用 Web 服务来代替；那会更慢。

所以，作为一个训练练习，你需要意识到每个孩子都有自己的变量副本。第 N 个子进程无法影响其`sum`任何父进程中的值 - 除非您进入共享内存等。

当你说：

```
sum: 10

[nvj]@sun ~/313/sod> (12:15:24 02/10/13)
:: sum: 11
sum: 11
[hangs here...] 
```

shell 会事先提示您，并等待您的输入。如果您`echo Hi`在 'hung' shell 中键入，您将看到`Hi`echoed 并且您的提示符正常。它只是意味着您的父进程在最后一个孩子完成写作之前完成。

在你放入之前`wait()`，你的第一个进程分叉，退出循环，打印它的值，然后退出，让 shell 再次提示。同时，第一个孩子在做自己的事情，第二个孩子在做自己的事情，每个孩子都在分叉和退出，事情发生的顺序由调度程序决定。

`wait()`就位后，孩子（和它的孩子（和它的孩子（和它的孩子......）））已经完成了它的输出，你会以确定的顺序得到答案。

最后一个孩子有前一个孩子累积的数字之和，这意味着只有最后一个孩子需要打印任何东西才能得到最终的总和。

其中一个语句是多余`exit(0);`的。`return(0);`我建议使用`return(0);`代替`exit(0);`。

# sql - 数据库设计最佳性能

> ID：14801098
> 
> 赞同：-2
> 
> 时间：2013-02-10T18:31:21.333
> 
> 标签：sql, database

我在构建良好的数据库设计时遇到问题。第 1 条有权限组 1,2,3

用户位于权限组 2 和 4

所以这个用户应该看第1条。但是在这种情况下我可以设计一个不使用OR的sql吗？

如果有数百万篇文章，那么使用 OR 将不会很好。

标签文章 Articleid 名称

表权限 Id Articleid PermissionGroup

表 userpermission Id Userid Permissiongroup

像这样的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:18:16.307

使用您提供的有限详细信息很难准确判断您要做什么，但您应该能够`JOIN`通过表格了解用户是否可以访问文章：

```
select u.username,
  p.articleId
from users u
inner join userpermission up
  on u.userid = up.userid
inner join permissions p
  on up.permissiongroup = p.permissiongroup
inner join articles a
  on p.articleid = a.articleid 
```

使用 JOIN 您将根据权限返回用户和他们可以访问的文章。

# ember.js - 非常基本的 ember 路由器示例未解决

> ID：14801100
> 
> 赞同：1
> 
> 时间：2013-02-10T18:31:23.237
> 
> 标签：ember.js

我在 ember-router-example 之后尝试了这个非常基本的 ember 路由器示例。但是当我运行它时，它会显示一个空白页面。我检查了控制台窗口是否有任何错误，但似乎没问题。不太确定为什么这不起作用以及在哪里丢失。

我只是想创建主页、部分、项目的第一级链接。

有人可以帮助我吗？

`index.html`：

```
 <body>
    <script src="js/libs/jquery-1.7.1.js"></script>
        <script src="js/libs/jquery.lorem.js"></script>
        <script src="js/libs/bootstrap.min.js"></script>
        <script src="js/libs/handlebars-1.0.0.beta.6.js"></script>
        <script src="js/libs/ember.js"></script>
        <script src="js/app.js"></script>

           <script type="text/x-handlebars" data-template-name="application">

            <div>
                <ul>
                    <li><a {{action "doHome"}}>Home</a></li>
                    <li><a {{action "doSections"}}>Sections</a></li>
                    <li><a {{action "doItems"}}>Items</a></li>
                </ul>
            </div>

             <div>
            {{outlets}}
           </div>

           </script>

            <script type="text/x-handlebars" data-template-name="home">
            <h1>yeah right Home</h1>
           </script>

           <script type="text/x-handlebars" data-template-name="sections">
            <h1>Oh v in Sections index</h1>
           </script>

           <script type="text/x-handlebars" data-template-name="items">
            <h1>correct in Items Index Page</h1>
           </script>
    </body> 
```

`app.js`：

```
 $(function() {

    App = Ember.Application.create()

    App.ApplicationController = Ember.Controller.extend();
    App.ApplicationView = Ember.View.extend({
        templateName:'application'
    });

    App.HomeController = Ember.Controller.extend();
    App.HomeView = Ember.View.extend({
        templateName:'home'
    });

    App.SectionsController = Ember.Controller.extend();
    App.SectionsView = Ember.View.extend({
        templateName:'sections'
    });

    App.ItemsController = Ember.Controller.extend();
    App.ItemsView = Ember.View.extend({
        templateName:'items'
    });

    App.Route = Ember.Route.extend({
        root: Ember.Route.extend({
            doHome : function(router,event){
                router.transitionTo('home');
            },

            doSections:function(router,event){
                router.transitionTo('sections');
            },

            doitems:function(router,event){
                router.transitionTo('items');
            },

            home : Ember.Route.extend({
                route : '/',
                connectOutlets:function(router,event){
                    router.get('applicationController').connectOutlet('home');
                }
            }),

            sections : Ember.Route.extend({
                route : '/sections',
                connectOutlets:function(router,event){
                    router.get('applicationController').connectOutlet('sections');
                }
            }),

            items : Ember.Route.extend({
                route : '/items',
                connectOutlets:function(router,event){
                    router.get('applicationController').connectOutlet('items');
                }
        })

        })//root
}) //router

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T21:19:29.487

我用你的代码创建了[这个小提琴。](http://jsfiddle.net/crUFE/)它似乎正在工作，只需使用最新的*ember*和*车把*。也许你应该改变`{{outlets}}`.`{{outlet}}`

### 编辑

上面的小提琴不起作用，请参阅更新的[小提琴](http://jsfiddle.net/crUFE/2/)。[*我使用新的路由 API*](http://emberjs.com/guides/routing/defining-your-routes/)
重写了路由代码，现在它按预期工作。[](http://emberjs.com/guides/routing/defining-your-routes/)

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T18:53:38.220

我相信当您在主 html 文件中定义模板时，您应该使用“模板”而不是 templateName。如果您要将这些模板创建为单独的把手文件并使用构建步骤，那么您将使用 templateName 来引用它们（按文件名）。

史蒂夫*

# wpf - WPF：滚动项目控件内容固定标题

> ID：14801102
> 
> 赞同：10
> 
> 时间：2013-02-10T18:31:34.840
> 
> 标签：wpf, gridview, scrollview, itemscontrol

是否有可能用 WPF 的 ItemsControl 做这样的事情：[Demo](http://jqueryfordesigners.com/demo/header-slide.html)

我正在尝试冻结 GroupedItems 而不是 GridView 列。

![在此处输入图像描述](../Images/02a95add4019c5cc6f923a317bc3ff09.png)

资源：

```
<Window.Resources>
    <CollectionViewSource x:Key="data" Source="{Binding}">
        <CollectionViewSource.GroupDescriptions>
            <PropertyGroupDescription PropertyName="Date"/>
        </CollectionViewSource.GroupDescriptions>
    </CollectionViewSource>
</Window.Resources> 
```

列表显示：

```
<ListView Grid.Column="0" ItemsSource="{Binding Source={StaticResource data}}">
    <ListView.View>
        <GridView>
            <GridView.Columns>
                <GridViewColumn Header="Col 1" DisplayMemberBinding="{Binding Col1}" Width="100"/>
                <GridViewColumn Header="Col 2" DisplayMemberBinding="{Binding Col2}" Width="100"/>
                <GridViewColumn Header="Col 3" DisplayMemberBinding="{Binding Col3}" Width="100"/>
            </GridView.Columns>
        </GridView>
    </ListView.View>
    <ListView.GroupStyle>
        <GroupStyle>
            <GroupStyle.ContainerStyle>
                <Style TargetType="{x:Type GroupItem}">
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type GroupItem}">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <Grid Grid.Row="0">
                                        <TextBlock Background="Beige" FontWeight="Bold" Text="{Binding Path=Name, StringFormat={}{0}}"/>
                                    </Grid>
                                    <DockPanel Grid.Row="1">
                                        <ItemsPresenter Grid.Row="2"></ItemsPresenter>
                                    </DockPanel>
                                </Grid>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </GroupStyle.ContainerStyle>
        </GroupStyle>
    </ListView.GroupStyle>
</ListView> 
```

后面的代码：

```
public MainWindow()
{
    InitializeComponent();

    List<String> colList1 = new List<string>() { "Item1", "Item2", "Item3", "Item4", "Item5", "Item6", "Item7" };
    List<String> colList2 = new List<string>() { "1", "2", "3", "4", "5", "6" };

    ObservableCollection<Data> dataCollection = new ObservableCollection<Data>();

    for (var a = 0; a < 100; a++)
    {
        Random rnd = new Random();
        int min = rnd.Next(5000);
        int rnd1 = rnd.Next(0, 6);
        int rnd2 = rnd.Next(0, 5);

        dataCollection.Add(new Data()
        {
            Date = DateTime.Now.AddMinutes(min).ToString("hh:MM tt"),
            Col1 = colList1[rnd2],
            Col2 = String.Format("Col2: {0}", "X"),
            Col3 = colList2[rnd2]
        });
    }
    this.DataContext = dataCollection;
}

public class Data
{
    public string Date { get; set; }
    public string Col1 { get; set; }
    public string Col2 { get; set; }
    public string Col3 { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T11:04:50.647

我的解决方案使用共享组标题样式的 TextBlock 覆盖。定位和正确的 HitTesting 是棘手的部分，但我很有信心这不会因为布局或逻辑的微小变化而中断。

[我不确定您是否要隐藏 ColumnHeader，但这很简单，除了此处](https://stackoverflow.com/a/632556/385995)描述的内容外，不需要任何其他调整。

![在此处输入图像描述](../Images/95f3d340501c25743f9096899b175ad6.png)

后面的代码：

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Media;

namespace WpfApplication1
{
    public partial class FreezingGroupHeader : UserControl
    {
        private double _listviewHeaderHeight;
        private double _listviewSideMargin;

        public FreezingGroupHeader()
        {
            InitializeComponent();

            List<String> colList1 = new List<string>() { "Item1", "Item2", "Item3", "Item4", "Item5", "Item6", "Item7" };
            List<String> colList2 = new List<string>() { "1", "2", "3", "4", "5", "6" };

            ObservableCollection<Data> dataCollection = new ObservableCollection<Data>();

            Random rnd = new Random();

            for (var a = 0; a < 100; a++)
            {
                int min = rnd.Next(5000);
                int rnd1 = rnd.Next(0, 6);
                int rnd2 = rnd.Next(0, 5);

                dataCollection.Add(
                    new Data()
                    {
                        Date = DateTime.Now.AddMinutes(min).ToString("hh:MM tt"),
                        Col1 = colList1[rnd2],
                        Col2 = String.Format("Col2: {0}", "X"),
                        Col3 = colList2[rnd2]
                    }
                );
            }
            this.DataContext = dataCollection;

            this.Loaded += OnLoaded;
        }

        private void OnLoaded(object sender, RoutedEventArgs e)
        {
            // Position frozen header
            GetListViewMargins(this.listview1);

            Thickness margin = this.frozenGroupHeader.Margin;
            margin.Top = _listviewHeaderHeight;
            margin.Right = SystemParameters.VerticalScrollBarWidth + _listviewSideMargin;
            margin.Left = _listviewSideMargin;

            this.frozenGroupHeader.Margin = margin;

            UpdateFrozenGroupHeader();
        }

        private void listview1_ScrollChanged(object sender, ScrollChangedEventArgs e)
        {
            UpdateFrozenGroupHeader();
        }

        /// <summary>
        /// Sets text and visibility of frozen header
        /// </summary>
        private void UpdateFrozenGroupHeader()
        {
            if (listview1.HasItems)
            {
                // Text of frozenGroupHeader
                GroupItem group = GetFirstVisibleGroupItem(this.listview1);
                if (group != null)
                {
                    object data = group.Content;
                    this.frozenGroupHeader.Text = data.GetType().GetProperty("Name").GetValue(data, null) as string;  // slight hack
                }
                this.frozenGroupHeader.Visibility = Visibility.Visible;
            }
            else
                this.frozenGroupHeader.Visibility = Visibility.Collapsed;
        }

        /// <summary>
        /// Sets values that will be used in the positioning of the frozen header
        /// </summary>
        private void GetListViewMargins(ListView listview)
        {
            if (listview.HasItems)
            {
                object o = listview.Items[0];
                ListViewItem firstItem = (ListViewItem)listview.ItemContainerGenerator.ContainerFromItem(o);
                if (firstItem != null)
                {
                    GroupItem group = FindUpVisualTree<GroupItem>(firstItem);
                    Point p = group.TranslatePoint(new Point(0, 0), listview);
                    _listviewHeaderHeight = p.Y; // height of columnheader
                    _listviewSideMargin = p.X; // listview borders
                }
            }
        }

        /// <summary>
        /// Gets the first visible GroupItem in the listview
        /// </summary>
        private GroupItem GetFirstVisibleGroupItem(ListView listview)
        {
            HitTestResult hitTest = VisualTreeHelper.HitTest(listview, new Point(5, _listviewHeaderHeight + 5));
            GroupItem group = FindUpVisualTree<GroupItem>(hitTest.VisualHit);
            return group;
        }

        /// <summary>
        /// walk up the visual tree to find object of type T, starting from initial object
        /// http://www.codeproject.com/Tips/75816/Walk-up-the-Visual-Tree
        /// </summary>
        private static T FindUpVisualTree<T>(DependencyObject initial) where T : DependencyObject
        {
            DependencyObject current = initial;

            while (current != null && current.GetType() != typeof(T))
            {
                current = VisualTreeHelper.GetParent(current);
            }
            return current as T;
        }

        public class Data
        {
            public string Date { get; set; }
            public string Col1 { get; set; }
            public string Col2 { get; set; }
            public string Col3 { get; set; }
        }
    }
} 
```

xml:

```
<UserControl x:Class="WpfApplication1.FreezingGroupHeader"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300"
           >

    <UserControl.Resources>
        <CollectionViewSource x:Key="data" Source="{Binding}">
            <CollectionViewSource.GroupDescriptions>
                <PropertyGroupDescription PropertyName="Date"/>
            </CollectionViewSource.GroupDescriptions>
        </CollectionViewSource>

        <Style x:Key="GroupHeaderStyle1" TargetType="{x:Type TextBlock}">
            <Setter Property="Background" Value="Beige" />
            <Setter Property="Foreground" Value="Black" />
            <Setter Property="FontWeight" Value="Bold" />
        </Style>
    </UserControl.Resources>

    <Grid>
        <ListView x:Name="listview1" Grid.Column="0" ItemsSource="{Binding Source={StaticResource data}}" ScrollViewer.ScrollChanged="listview1_ScrollChanged" >
            <ListView.View>
                <GridView>
                    <GridView.Columns>
                        <GridViewColumn Header="Col 1" DisplayMemberBinding="{Binding Col1}" Width="100"/>
                        <GridViewColumn Header="Col 2" DisplayMemberBinding="{Binding Col2}" Width="100"/>
                        <GridViewColumn Header="Col 3" DisplayMemberBinding="{Binding Col3}" Width="100"/>
                    </GridView.Columns>
                </GridView>
            </ListView.View>
            <ListView.GroupStyle>
                <GroupStyle>
                    <GroupStyle.ContainerStyle>
                        <Style TargetType="{x:Type GroupItem}">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="{x:Type GroupItem}">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition  Height="Auto"/>
                                                <RowDefinition Height="Auto"/>
                                            </Grid.RowDefinitions>
                                            <Grid Grid.Row="0">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Style="{StaticResource GroupHeaderStyle1}" Text="{Binding Name, StringFormat={}{0}}"  />
                                            </Grid>
                                            <DockPanel Grid.Row="1">
                                                <ItemsPresenter Grid.Row="2"></ItemsPresenter>
                                            </DockPanel>
                                        </Grid>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </GroupStyle.ContainerStyle>
                </GroupStyle>
            </ListView.GroupStyle>
        </ListView>
        <TextBlock x:Name="frozenGroupHeader" Style="{StaticResource GroupHeaderStyle1}" VerticalAlignment="Top"/>
    </Grid>
</UserControl> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-03-07T10:16:50.680

由于我刚刚遇到了类似的问题，并且“hack-ish”解决方案不符合我的需求，而且我通常不喜欢生产环境中的“hack-ish”东西，我为此开发了一个通用解决方案，我想分享. 附加的类具有以下主要功能：

*   MVVM 兼容
*   没有代码隐藏
*   兼容 ListView、GridView、ItemsControl，甚至静态 xaml！- 应该使用 ScollViewer 处理任何东西......
*   使用附加属性来声明组项

xaml 用法（只是您的内部 ControlTemplate）：

```
<ControlTemplate TargetType="{x:Type GroupItem}">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition  Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid Grid.Row="0" local:StickyScrollHeader.AttachToControl="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType=Grid}}">
            <TextBlock Background="Beige" FontWeight="Bold" Text="{Binding Path=Name, StringFormat={}{0}}"/>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
        </Grid>
        <DockPanel Grid.Row="1">
            <ItemsPresenter Grid.Row="2"></ItemsPresenter>
        </DockPanel>
    </Grid>
</ControlTemplate> 
```

类（放在任何地方，必要时添加 xaml 命名空间）：

```
public static class StickyScrollHeader
{
    public static FrameworkElement GetAttachToControl(FrameworkElement obj)
    {
        return (FrameworkElement)obj.GetValue(AttachToControlProperty);
    }

    public static void SetAttachToControl(FrameworkElement obj, FrameworkElement value)
    {
        obj.SetValue(AttachToControlProperty, value);
    }

    private static ScrollViewer FindScrollViewer(FrameworkElement item)
    {
        FrameworkElement treeItem = item;
        FrameworkElement directItem = item;

        while (treeItem != null)
        {
            treeItem = VisualTreeHelper.GetParent(treeItem) as FrameworkElement;
            if (treeItem is ScrollViewer)
            {
                return treeItem as ScrollViewer;
            }
            else if (treeItem is ScrollContentPresenter)
            {
                return (treeItem as ScrollContentPresenter).ScrollOwner;
            }
        }

        while (directItem != null)
        {
            directItem = directItem.Parent as FrameworkElement;

            if (directItem is ScrollViewer)
            {
                return directItem as ScrollViewer;
            }
            else if (directItem is ScrollContentPresenter)
            {
                return (directItem as ScrollContentPresenter).ScrollOwner;
            }
        }

        return null;
    }

    private static ScrollContentPresenter FindScrollContentPresenter(FrameworkElement sv)
    {
        int childCount = VisualTreeHelper.GetChildrenCount(sv);

        for (int i = 0; i < childCount; i++)
        {
            if (VisualTreeHelper.GetChild(sv, i) is FrameworkElement child && child is ScrollContentPresenter)
            {
                return child as ScrollContentPresenter;
            }
        }

        for (int i = 0; i < childCount; i++)
        {
            if (FindScrollContentPresenter(VisualTreeHelper.GetChild(sv, i) as FrameworkElement) is FrameworkElement child && child is ScrollContentPresenter)
            {
                return child as ScrollContentPresenter;
            }
        }

        return null;
    }

    public static readonly DependencyProperty AttachToControlProperty =
        DependencyProperty.RegisterAttached("AttachToControl", typeof(FrameworkElement), typeof(StickyScrollHeader), new PropertyMetadata(null, (s, e) =>
        {
            try
            {
                if (!(s is FrameworkElement targetControl))
                { return; }

                Canvas.SetZIndex(targetControl, 999);

                ScrollViewer sv;
                FrameworkElement parent;

                if (e.OldValue is FrameworkElement oldParentControl)
                {
                    ScrollViewer oldSv = FindScrollViewer(oldParentControl);
                    parent = oldParentControl;
                    oldSv.ScrollChanged -= Sv_ScrollChanged;
                }

                if (e.NewValue is FrameworkElement newParentControl)
                {
                    sv = FindScrollViewer(newParentControl);
                    parent = newParentControl;
                    sv.ScrollChanged += Sv_ScrollChanged;
                }

                void Sv_ScrollChanged(object sender, ScrollChangedEventArgs sce)
                {
                    if (!parent.IsVisible) { return; }

                    try
                    {

                        ScrollViewer isv = sender as ScrollViewer;
                        ScrollContentPresenter scp = FindScrollContentPresenter(isv);

                        var relativeTransform = parent.TransformToAncestor(scp);
                        Rect parentRenderRect = relativeTransform.TransformBounds(new Rect(new Point(0, 0), parent.RenderSize));
                        Rect intersectingRect = Rect.Intersect(new Rect(new Point(0, 0), scp.RenderSize), parentRenderRect);
                        if (intersectingRect != Rect.Empty)
                        {
                            TranslateTransform targetTransform = new TranslateTransform();

                            if (parentRenderRect.Top < 0)
                            {
                                double tempTop = (parentRenderRect.Top * -1);

                                if (tempTop + targetControl.RenderSize.Height < parent.RenderSize.Height)
                                {
                                    targetTransform.Y = tempTop;
                                }
                                else if (tempTop < parent.RenderSize.Height)
                                {
                                    targetTransform.Y = tempTop - (targetControl.RenderSize.Height - intersectingRect.Height);
                                }
                            }
                            else
                            {
                                targetTransform.Y = 0;
                            }
                            targetControl.RenderTransform = targetTransform;
                        }
                    }
                    catch { }
                }
            }
            catch { }
        }));
} 
```

希望这也有助于其他人遇到这个问题;）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T21:51:55.953

这个解决方案不是很好，而且它是hack-ish，但它基本上会做你想要的。我使列表视图标题不可见，在列表视图上方放置一个文本块，并将文本值设置为列表框中第一个可见项目的组项。哈基，但这是我想出的最好的。

```
public partial class MainWindow : Window
{

    public MainWindow()
    {
        InitializeComponent();

        List<String> colList1 = new List<string>() { "Item1", "Item2", "Item3", "Item4", "Item5", "Item6", "Item7" };
        List<String> colList2 = new List<string>() { "1", "2", "3", "4", "5", "6" };

        ObservableCollection<Data> dataCollection = new ObservableCollection<Data>();

        for (var a = 0; a < 100; a++)
        {
            Random rnd = new Random();
            int min = rnd.Next(5000);
            int rnd1 = rnd.Next(0, 6);
            int rnd2 = rnd.Next(0, 5);

            dataCollection.Add(
                new Data()
                {
                    Date = DateTime.Now.AddMinutes(min).ToString("hh:MM tt"),
                    Col1 = colList1[rnd2],
                    Col2 = String.Format("Col2: {0}", "X"),
                    Col3 = colList2[rnd2]
                }
            );

        }
        this.DataContext = dataCollection;
    }

    public class Data
    {
        public string Date { get; set; }
        public string Col1 { get; set; }
        public string Col2 { get; set; }
        public string Col3 { get; set; }
    }

    private void grid_ScrollChanged(object sender, ScrollChangedEventArgs e)
    {
        if (grid.Items.Count > 0)
        {
            HitTestResult hitTest = VisualTreeHelper.HitTest(grid, new Point(5, 5));
            System.Windows.Controls.ListViewItem item = GetListViewItemFromEvent(null, hitTest.VisualHit) as System.Windows.Controls.ListViewItem;
            if (item != null)
                Head.Text = ((Data)item.Content).Date;
        }

    }

    System.Windows.Controls.ListViewItem GetListViewItemFromEvent(object sender, object originalSource)
    {
        DependencyObject depObj = originalSource as DependencyObject;
        if (depObj != null)
        {
            // go up the visual hierarchy until we find the list view item the click came from  
            // the click might have been on the grid or column headers so we need to cater for this  
            DependencyObject current = depObj;
            while (current != null && current != grid)
            {
                System.Windows.Controls.ListViewItem ListViewItem = current as System.Windows.Controls.ListViewItem;
                if (ListViewItem != null)
                {
                    return ListViewItem;
                }
                current = VisualTreeHelper.GetParent(current);
            }
        }

        return null;
    }

} 
```

XAML：

```
<Window x:Class="header.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="auto" SizeToContent="Width">
<Window.Resources>
    <CollectionViewSource x:Key="data" Source="{Binding}">
        <CollectionViewSource.GroupDescriptions>
            <PropertyGroupDescription PropertyName="Date"/>
        </CollectionViewSource.GroupDescriptions>
    </CollectionViewSource>

    <Style x:Key="myHeaderStyle" TargetType="{x:Type GridViewColumnHeader}">
        <Setter Property="Visibility" Value="Collapsed" />
    </Style>
</Window.Resources>
<Grid>
    <StackPanel>
    <TextBlock Name="Head" Grid.Row="0"/>
            <ListView Name="grid" Grid.Column="0" Grid.Row="1" ItemsSource="{Binding Source={StaticResource data}}" Height="300" ScrollViewer.ScrollChanged="grid_ScrollChanged">
                <ListView.View>
                    <GridView ColumnHeaderContainerStyle="{StaticResource myHeaderStyle}">
                        <GridView.Columns>
                            <GridViewColumn DisplayMemberBinding="{Binding Col1}" Width="100"/>
                            <GridViewColumn DisplayMemberBinding="{Binding Col2}" Width="100"/>
                            <GridViewColumn DisplayMemberBinding="{Binding Col3}" Width="100"/>
                        </GridView.Columns>
                    </GridView>
                </ListView.View>
                <ListView.GroupStyle>
                    <GroupStyle>
                        <GroupStyle.ContainerStyle>
                            <Style TargetType="{x:Type GroupItem}">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="{x:Type GroupItem}">
                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition  Height="Auto"/>
                                                    <RowDefinition Height="Auto"/>
                                                </Grid.RowDefinitions>
                                                <Grid Grid.Row="0">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <TextBlock Background="Beige" FontWeight="Bold" Text="{Binding Path=Name, StringFormat={}{0}}"/>
                                                </Grid>
                                                <DockPanel Grid.Row="1">
                                                    <ItemsPresenter Grid.Row="2"></ItemsPresenter>
                                                </DockPanel>
                                            </Grid>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </GroupStyle.ContainerStyle>
                    </GroupStyle>
                </ListView.GroupStyle>
            </ListView>
    </StackPanel>
</Grid> 
```

编辑：固定 ScrollChanged 事件。

```
private void grid_ScrollChanged(object sender, ScrollChangedEventArgs e)
    {
        if (grid.Items.Count > 0)
        {
            Point point = new Point(5, 5);
            foreach(Data lvItem in grid.Items)
            {
                HitTestResult hitTest = VisualTreeHelper.HitTest(grid, point);
                ListViewItem item = GetListViewItemFromEvent(null, hitTest.VisualHit) as System.Windows.Controls.ListViewItem;
                if (item != null)
                {
                    Data value = ((Data)item.Content);
                    Head.Text = ((Data)item.Content).Date;
                    break;
                }
                else
                {
                    point.X += 5;
                    point.Y += 5;
                }
            }
        }

    } 
```

# c# - 创建表格的下拉列表

> ID：14801103
> 
> 赞同：1
> 
> 时间：2013-02-10T18:31:35.623
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-4

我目前有一个系列表。在这个表中，存在一个字段status_id，它是链接到表Status的外键。状态可以是新的、正在运行的、已结束的……

我的模型类看起来像这样：

```
public partial class Serie
{
    public Serie()
    {
        this.Episodes = new HashSet<Episode>();
    }

    public int ID { get; set; }
    public string Name { get; set; }
    public string Country { get; set; }
    public Nullable<int> Status_id { get; set; }

    public virtual ICollection<Episode> Episodes { get; set; }
    public virtual Status Status { get; set; }
} 
```

地位：

```
public partial class Status
{
    public Status()
    {
        this.Series = new HashSet<Serie>();
    }

    public int ID { get; set; }
    public string Name { get; set; }

    public virtual ICollection<Serie> Series { get; set; }
} 
```

在编辑系列时，我想要一个包含所有可能状态（名称字段）的下拉列表，并在用户提交表单时收到它。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:54:05.927

最简单的答案是您需要一个高管列表，将模型中的列表传递回您的视图，创建一个选择列表，然后呈现一个下拉列表。

```
public ActionResult EditSomething()
{
    Model Model = new Model();
    Model.statusList = {some method to fill IEnumerable<status>};

    return View(Model);
} 
```

在您看来：

```
@Html.DropDownListFor(model => model.Id, new SelectList(Model.statusList, "Id", "Name ")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T18:50:27.480

您需要使用创建下拉列表`<%= Html.DropDownList("StatusId", Model.Statuses)%>`。您将使用所有可能的状态填充您的视图模型，记录用户在变量中选择的状态的 id，该变量在用户提交表单时随您的视图模型一起发送。这是一篇详细介绍该过程的文章：http: [//odetocode.com/blogs/scott/archive/2010/01/18/drop-down-lists-and-asp-net-mvc.aspx](http://odetocode.com/blogs/scott/archive/2010/01/18/drop-down-lists-and-asp-net-mvc.aspx)

# javascript - 发送数据时出现jQuery ajax错误

> ID：14801105
> 
> 赞同：0
> 
> 时间：2013-02-10T18:31:37.293
> 
> 标签：javascript, jquery, ajax, facebook, facebook-javascript-sdk

我正在尝试调试运行以下代码时出现的错误。ajax 调用只携带一个变量`destroy`，即`String`. 但是，我收到一个`alert(xhr.status);`返回 0 的错误，而 statusText 正在返回“错误”。任何人都可以看到这个问题吗？

新更新的代码是：

```
function logout() {
var destroy = "session_destroy"
FB.logout(function(response) {
    $.post("setUser.php", { destroy: destroy }, function (data) {
        alert(data);
        window.location.href = "signup.php";
    })
    .fail(function() { 
        alert("error"); 
    })
    .always(function() { 
        alert("finished"); 
    });
} 
```

注意：此 ajax 调用旨在破坏其代码存在于`setUser.php`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T18:45:05.053

我认为您的代码没有任何问题。setUser.php 给你的响应是什么？

注意：要查看在 CHrome 或 IE >9 中登录的内容，请按 F12，然后转到控制台。

但是你为什么不使用速记版本呢？

```
$.post("setUser.php", { destroy: destroy }, function (data) {
    alert(data);
    window.location.href = "signup.php";
})
 .fail(function(e, status, error) { 
     console.log(e);
     console.log(status);
     console.log(error);
     alert(error);
 })
 .always(function() { 
     alert("finished"); 
 }); 
```

[**文档**](http://api.jquery.com/jQuery.post/)

# python - 将 IPv6 套接字与 GEvent WSGIServer 一起使用

> ID：14801114
> 
> 赞同：0
> 
> 时间：2013-02-10T18:32:14.727
> 
> 标签：python, ipv6, gevent

我正在尝试将 WSGIServer 绑定到 IPv6 环回地址：

```
import socket
import gevent
from gevent.pywsgi import WSGIServer

addrs = socket.getaddrinfo('::1', 8000, socket.AF_INET6, 0, socket.SOL_TCP)
bind_spec = addrs[0][-1]

listener = socket.socket(socket.AF_INET6, socket.SOCK_STREAM)
listener.bind(bind_spec)

server = WSGIServer(
    listener,
    lambda a,b:'asd'
)

server.serve_forever() 
```

但这只会产生

```
error: [Errno 22] Invalid argument 
```

在

```
File "/usr/local/lib/python2.7/dist-packages/gevent/server.py", line 122, in _do_accept
  client_socket, address = self.socket.accept() 
```

我尝试使用 gevent monkeypatcher，但没有帮助。在创建套接字后导入 gevent 也无济于事。

我的系统上启用了 IPv6。如果我用普通的 accept() 替换服务器构造，套接字会成功绑定并接受连接。

```
listener.listen(5)
listener.accept() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:19:17.523

我太愚蠢了...... GEvent 不会`listen()`在提供的套接字上调用，所以我必须在创建服务器之前自己调用它。

# iphone - 如何在 ios iphone 应用程序的文本字段中显示我的电话号码

> ID：14801116
> 
> 赞同：0
> 
> 时间：2013-02-10T18:32:26.733
> 
> 标签：iphone

我对 ios 开发非常陌生，正在尝试让我的电话号码显示在文本字段或类似的内容中，而无需对其进行硬编码。有没有办法从我的手机中“调用”该数据并将其显示在一个文本字段，这甚至可能吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:47:04.433

在 UITextView（而不是 UITextField）中，您可以将 iOS 设置为自动检测电话号码，然后可以点击这些电话号码来发起呼叫，

```
textview.editable = NO;
textview.dataDetectorTypes = UIDataDetectorTypePhoneNumber; 
```

您还可以在 Xcode 下的 IBuilder 中定义检测到的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T18:35:07.920

一般问题所以一般答案：

您可以从联系人中获取电话号码 - 所以看看 AddressBook 框架可以为您做什么。

# php - 获取WordPress中特定页面的内容

> ID：14801119
> 
> 赞同：0
> 
> 时间：2013-02-10T18:32:37.137
> 
> 标签：php, wordpress, loops

目前我正在查询我在 WordPress 中拥有的所有页面并将它们显示在页面上。像这样：

```
<?php
query_posts(array('post_type' => 'page'));
while(have_posts()) 
{ 
$this_page = the_post();
echo the_content();
} 
?> 
```

问题是，我怎么能做同样的事情，但只针对一个特定的帖子？附带说明一下，如果我需要使用页面的 id，我在哪里可以找到它们，因为目前我看不到 WordPress 中的 id 页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:38:20.433

在此处查看 wordpress 法典中 query_posts 的页面：http: [//codex.wordpress.org/Function_Reference/query_posts](http://codex.wordpress.org/Function_Reference/query_posts)。

相应地调整参数。例如，要查询具有特定 id 的帖子：

```
query_posts( 'p=5' ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T18:40:32.263

像这样的东西？

```
query_posts( array ( 'category_name' => 'my-category-slug', 'posts_per_page' => -1 ) );//al items from my-category-slug
while(have_posts()) 
{ 
  $this_page = the_post();
  echo the_content();
} 
```

# android - 使用 jsoup 从页面中抓取文本

> ID：14801120
> 
> 赞同：1
> 
> 时间：2013-02-10T18:32:40.273
> 
> 标签：android, web-scraping, jsoup

我想在 android 中使用 Jsoup 从网页中删除一些文本。我使用了这些代码：

```
 package com.example.scrappping1;

  import java.io.IOException;
  import android.os.Bundle;
  import android.app.Activity;
  import android.view.Menu;
  import android.widget.Button;
  import android.widget.EditText;
  import android.widget.TextView;
  import android.widget.Toast;

  import org.jsoup.Jsoup;
  import org.jsoup.nodes.Document;
  import org.jsoup.nodes.Element;
  import org.jsoup.select.Elements;

   public class MainActivity extends Activity { 
   @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    final TextView text = (TextView)findViewById(R.id.tv);

    String URL = "http://www.bengalinux.org/cgi-bin/abhidhan/index.pl?en_word=like";

    Document site = null;

    try 
    {
     site = Jsoup.connect(URL).userAgent("Mozilla/5.0 (Macintosh; U; Intel Mac OS X; de-de) AppleWebKit/523.10.3 (KHTML, like Gecko) Version/3.0.4 Safari/523.10").get();
    } 
     catch (IOException e)
      {
        //e.printStackTrace();
        Toast.makeText(getApplicationContext(), "fdf",Toast.LENGTH_LONG).show();
      }

     Elements newsline = site.select("div.dict_entry");
     String output = "";
     for (int i = 0; i < newsline.size(); i++) {

         output = newsline.get(i).text();
       }           

      text.setText(output);                                
}// onCreate
    }// end 
```

但我收到了这个错误

> “应用程序意外停止”

我不明白为什么？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T18:54:31.220

确保您在清单中具有此权限：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

# python - 将 <...> 作为“foo bar”中的一项的正则表达式 等等”（目标：简单的音乐/lilypond 解析）

> ID：14801122
> 
> 赞同：2
> 
> 时间：2013-02-10T18:32:50.457
> 
> 标签：python, regex, lilypond

我在 Python(3) 中使用 re 模块并希望用以下格式替换 (re.sub(regex, replace, string)) 字符串

```
"foo <bar e word> f ga <foo b>" 
```

至

```
"#foo <bar e word> #f #ga <foo b>" 
```

甚至

```
"#foo #<bar e word> #f #ga #<foo b>" 
```

但是我无法将单个单词与 <...> 构造中的单词边界隔离开来。

帮助会很好！

**PS 1**

整个故事是一个音乐故事：我有 Lilypond 格式的字符串（或者更好的是，非常简单的核心格式的子集，只有音符和持续时间），并希望将它们转换为 python 对 int(duration),list(of pitch字符串）。性能并不重要，所以我可以来回转换它们，使用 python 列表迭代，拆分字符串并再次加入它们等。但是对于上述问题，我没有找到答案。

源字符串

```
"c'4 d8 < e' g' >16 fis'4 a,, <g, b'> c''1" 
```

应该导致

```
[
(4, ["c'"]),
(8, ["d"]),
(16, ["e'", "g'"]),
(4, ["fis'"]),
(0, ["a,,"]),
(0, ["g", "b'"]),
(1, ["c''"]),
] 
```

基本格式是字符串+数字，如下所示：e4 bes16

*   项目清单
*   字符串可以包含多个，至少一个，[a-zA-Z] 字符
*   字符串后跟零个或多个数字：e bes g4 c16
*   字符串后跟零个或多个 ' 或 ,（不合并）：e' bes, f'''2 g,,4
*   字符串可以用字符串列表代替，列表限制符是 <>: 4 数字在 > 后面，不允许有空格

**PS 2**

目标不是创建 Lilypond 解析器。它真的只是非常短的片段，没有额外的功能，没有插入注释的扩展。如果这不起作用，我会选择另一种格式（简化），如 ABC。所以任何与 Lilypond 相关的事情（“通过 lilypond 运行它，让它在 Scheme 中给出音乐数据，解析它”）或其工具链肯定不是这个问题的答案。该软件包甚至没有安装。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T23:30:09.610

我知道您不是在寻找通用解析器，但是[pyparsing](http://pyparsing.wikispaces.com/)使这个过程变得非常简单。您的格式似乎与我作为最早的 pyparsing 示例之一编写的[化学式解析器](http://pyparsing.wikispaces.com/file/view/chemicalFormulas.py/31041705/chemicalFormulas.py)非常相似。

这是您使用 pyparsing 实现的问题：

```
from pyparsing import (Suppress,Word,alphas,nums,Combine,Optional,Regex,Group,
                       OneOrMore)

"""
List item
 -the string can consist of multiple, at least one, [a-zA-Z] chars
 -the string is followed by zero or more digits: e bes g4 c16
 -the string is followed by zero or more ' or , (not combined): 
  e' bes, f'''2 g,,4
 -the string can be substituted by a list of strings, list limiters are <>;
  the number comes behind the >, no space allowed
"""

LT,GT = map(Suppress,"<>")

integer = Word(nums).setParseAction(lambda t:int(t[0]))

note = Combine(Word(alphas) + Optional(Word(',') | Word("'")))
# or equivalent using Regex class
# note = Regex(r"[a-zA-Z]+('+|,+)?")

# define the list format of one or more notes within '<>'s
note_list = Group(LT + OneOrMore(note) + GT)

# each item is a note_list or a note, optionally followed by an integer; if
# no integer is given, default to 0
item = (note_list | Group(note)) + Optional(integer, default=0)

# reformat the parsed data as a (number, note_or_note_list) tuple
item.setParseAction(lambda t: (t[1],t[0].asList()) )

source = "c'4 d8 < e' g' >16 fis'4 a,, <g, b'> c''1"
print OneOrMore(item).parseString(source) 
```

有了这个输出：

```
[(4, ["c'"]), (8, ['d']), (16, ["e'", "g'"]), (4, ["fis'"]), (0, ['a,,']), 
 (0, ['g,', "b'"]), (1, ["c''"])] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T18:57:30.123

你的第一个问题可以这样回答：

```
>>> import re
>>> t = "foo <bar e word> f ga <foo b>"
>>> t2 = re.sub(r"(^|\s+)(?![^<>]*?>)", " #", t).lstrip()
>>> t2
'#foo #<bar e word> #f #ga #<foo b>' 
```

我添加`lstrip()`以删除出现在此模式结果之前的单个空格。如果您想使用第一个选项，您可以简单地替换`#<`为`<`.

您的第二个问题可以通过以下方式解决，尽管您可能需要考虑`,`像`['g,', "b'"]`. 您的字符串中的逗号是否应该存在？可能有更快的方法。以下仅是概念证明。列表推导式可能会代替最后一个元素，尽管它会非常复杂。

```
>>> s = "c'4 d8 < e' g' >16 fis'4 a,, <g, b'> c''1"
>>> q2 = re.compile(r"(?:<)\s*[^>]*\s*(?:>)\d*|(?<!<)[^\d\s<>]+\d+|(?<!<)[^\d\s<>]+")
>>> s2 = q2.findall(s)
>>> s3 = [re.sub(r"\s*[><]\s*", '', x) for x in s2]
>>> s4 = [y.split() if ' ' in y else y for y in s3]
>>> s4
["c'4", 'd8', ["e'", "g'16"], "fis'4", 'a,,', ['g,', "b'"], "c''1"]
>>> q3 = re.compile(r"([^\d]+)(\d*)")
>>> s = []
>>> for item in s4:
    if type(item) == list:
            lis = []
            for elem in item:
                    lis.append(q3.search(elem).group(1))
                    if q3.search(elem).group(2) != '':
                            num = q3.search(elem).group(2)
            if q3.search(elem).group(2) != '':
                    s.append((num, lis))
            else:
                    s.append((0, lis))
    else:
            if q3.search(item).group(2) != '':
                    s.append((q3.search(item).group(2), [q3.search(item).group(1)]))
            else:
                    s.append((0, [q3.search(item).group(1)]))

>>> s
[('4', ["c'"]), ('8', ['d']), ('16', ["e'", "g'"]), ('4', ["fis'"]), (0, ['a,,']), (0, ['g,', "b'"]), ('1', ["c''"])] 
```

# php - 打印到收据打印机 (pdf)

> ID：14801126
> 
> 赞同：1
> 
> 时间：2013-02-10T18:33:00.270
> 
> 标签：php, printing

我想在我的基于网络的 POS 上使用收据打印机。在我走得更远之前，我知道你不能强制从浏览器打印收据，唯一的选择是通过 PHP 和 cups 来打印，这不是选项或 Java Applet，不喜欢..

我的问题是我正在查看 Star Micronics TSP-100，并想向其发送 PDF。我已经翻遍了，找不到收据打印机是否可以打印标准 PDF。

另外，如果有人对此有任何经验，任何提示都会有所帮助..即您设置的页面大小是多少？

编辑：服务器平台是 Linux、PHP / MYSQL，我使用 Yii 和 epdf 插件。PDF 生成不是问题。目前尚不清楚收据打印机是否可以打印 pdf。另外，在设置文档时我应该使用哪些页面属性。即宽度/高度..我知道的宽度是由打印机决定的，但我对高度很好奇。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-19T15:19:32.260

您无法从浏览器强制打印收据，但您可以使用 Active X 控件（在 IE 中）并在本地打印收据。

我所做的是： 1\. 在服务器上生成 pdf 2\. 调用 Active X 命令以使用 wget 下载 PDF（这会将文件放在本地机器上。

```
objShell.run('cmd /K wget -P /pos/invoices/ http://url.com/pos/<?php echo $filename;?>',0,false); 
```

3.  使用 Adob​​e 命令行调用 Active x 命令以打印本地 PDF

    ```
    objShell.run('"C:\\Program Files (x86)\\Adobe\\Reader 11.0\\Reader\\AcroRd32.exe" /h /s /o /t "C:\\pos\\<?php echo $filename;?>"'); 
    ```

为了打印到您的收据打印机，您只需将其设置为默认打印机或更改 Active x 命令以包含打印机名称。我仍在处理纸张尺寸问题。

我意识到您使用的是 Linux，因此 Windows 命令将不起作用，但过程是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T19:43:24.077

你的问题不太清楚。您没有提及您使用的是哪个操作系统。

我认为，你有两个问题

1.  从 PHP 打印 PDF。我找到了这个[Adob​​e Reader 命令行参考](https://stackoverflow.com/questions/619158/adobe-reader-command-line-reference)

2.  从模板生成 PDF。我可以推荐[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)，它适用于 MS-Windows 和 Linux 平台。它使用 WebKit 来渲染页面，所以源代码是纯 HTML+CSS。

# java - 通过反射调用子类的方法

> ID：14801132
> 
> 赞同：2
> 
> 时间：2013-02-10T18:33:35.210
> 
> 标签：java, reflection

这是我的超类`Animal`

```
class Animal
{
   //Empty
} 
```

我的子类`Tiger`

```
class Tiger extends Animal
{
    public static void TigerPrint()
    {     -------
        System.out.println("Tiger");
    }
    public void Run()
    {
         System.out.println("Tiger Running");
    }
} 
```

现在我做，

```
 Animal a=new Tiger(); 
```

在**编译时** `a`将是一个`Animal`.在**运行时**它将是`Tiger`.

所以我做了

```
a.getClass().getMethod("TigerPrint").invoke(null);//WORKS
a.getClass().getMethod("Run").invoke(null);//NOT WORKING (NullPointerException) 
```

我怎样才能调用通过反射的`Run`方法。`subclass`

是的，我可以

```
((Tiger)a).Run(); 
```

但我怎么能在反思中做到这一点！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T18:36:36.523

您正在对空实例调用实例方法 - 因此您收到 NPE 是有道理的。试试这个（将实例传递给`invoke`方法而不是`null`）：

```
a.getClass().getMethod("Run").invoke(a); 
```

注意：第一次调用有效，因为您可以在空实例上调用静态方法而不会导致 NPE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T18:41:09.753

您有两个选择，要么使`run()`方法静态并保持当前调用，要么更改当前调用以传递 assylias 指向的对象实例。

# ios - 是否有使用 JSON + NSTimer 从服务器获取数据的替代方法？

> ID：14801134
> 
> 赞同：1
> 
> 时间：2013-02-10T18:33:37.013
> 
> 标签：ios, json, nstimer, fetch

我使用 NSTimer 使用 JSON 从我的服务器获取常量数据。

使用这种技术有很多缺点，例如不需要的数据获取和电池寿命消耗。

这种用法的一个例子是从服务器获取聊天消息。

**持续数据获取有没有好的替代方案？**

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T18:55:04.983

轮询的一些替代方法是：

1.  让用户通过手势请求新数据，
2.  APN - 有新数据时推送，
3.  持续连接。

# python - 动态分配一个对象/字典方法，该方法在首次访问时用函数结果覆盖自身

> ID：14801140
> 
> 赞同：1
> 
> 时间：2013-02-10T18:34:23.077
> 
> 标签：python, caching, optimization, memoization

我想这将是一个有趣的周日早上解决问题。已经3个小时了，我还差得远……

背景：

我`dogpile`用来缓存来自`SqlAlchemy`.

我将一行数据转换为`dict`调用的自定义子类`ObjectifiedDict`。这只是让我用对象表示法来处理字典，所以我可以对这些只读字典使用相同的模板和助手，就像我对活动的 SqlAlchemy 对象所做的那样。（我也喜欢将缓存数据存储为字典，因此我可以将相同的缓存值用于其他应用程序或语言）

一切正常。

我一直在探索使缓存更好一点的方法，并记住了 Pyramid 的`@reify`装饰器（[http://docs.pylonsproject.org/projects/pyramid/en/latest/api/decorator.html](http://docs.pylonsproject.org/projects/pyramid/en/latest/api/decorator.html)）。@reify 让对象方法用函数的返回值覆盖自己，这样底层函数只被调用一次。出于缓存目的，这个想法对我来说非常有吸引力。

[正如评论中提到的，记忆是一个更合适的术语]

问题：

我不知道如何最好地处理这样的事情。尝试动态设置对象属性以重新定义自己比我想象的要困难得多。 `@reify`非常简单而且效果很好，因为它在一个预定义的类上。

到目前为止，我想出的最好的就是这个......

```
class ReifiedObjectFunction(object):
    def __init__(self, object , object_attribute, function , *args , **kwargs ):
        self.object = object
        self.object_attribute = object_attribute
        self.function = function
        self.args = args
        self.kwargs = kwargs
        try:
            self.__doc__ = function.__doc__
        except: # pragma: no cover
            pass
    def __repr__(self):
        val = self.function(*self.args,**self.kwargs)
        setattr( self.object , self.object_attribute , val )
        return val

class ObjectifiedDict(dict):
    def __getattr__(self,attr):
        if attr in self:
            return self[attr]
        return self.__getattribute__(attr)
    def lazyload( self, attr , function , *args , **kwargs ):
        self[attr] = ReifiedObjectFunction(self,attr,function,*args,**kwargs)

def lazyloaded_function(*args,**kwargs):
    print 'compute lazyloaded_function %s,%s' % ( args , kwargs )
    return "%s" % args

sample = ObjectifiedDict({'a':'a','b':'bb','c':'ccc'})
print "get a"
print "     %s" % sample.a
print "get b"
print "     %s" % sample.b
print "set d"
sample.lazyload( 'd' , lazyloaded_function , "dddd" )
print "d is set"
print "sample : %s" % sample
print "get d"
print "     %s" % sample.d
print "get d again"
print "     %s" % sample.d
print "sample : %s" % sample 
```

不过，这有一些明显且巨大的警告。它仅适用于字符串上下文（因为我正在重载**repr**）并且我只能返回字符串值。

有人对我应该如何进行有线索吗？

**更新：**

我想出了这个我想做的工作示例。有没有人看到这种方法有任何问题：

```
class LazyloadedFunction(object):

    def __init__(self, object , object_attribute, function , *args , **kwargs ):
        self.object = object
        self.object_attribute = object_attribute
        self.function = function
        self.args = args
        self.kwargs = kwargs
        try:
            self.__doc__ = function.__doc__
        except: # pragma: no cover
            pass

    def execute(self):
        val = self.function(*self.args,**self.kwargs)
        return val

class ObjectifiedDict(dict):

    def __getitem__(self,attr):
        if attr in self:
            item = dict.__getitem__(self,attr)
            if isinstance( item , LazyloadedFunction ):
                item = item.execute()
                dict.__setitem__( self , attr , item )
            return item

    def __getattr__(self,attr):
        if attr in self:
            if isinstance( self[attr] , LazyloadedFunction ):
                self[attr] = self[attr].execute()
            return self[attr]
        return self.__getattribute__(attr)

    def __getattribute__(self,attr):
        return dict.__getattribute__(self,attr)

    def lazyload( self, attr , function , *args , **kwargs ):
        self[attr] = LazyloadedFunction(self,attr,function,*args,**kwargs)

def lazyloaded_function(*args,**kwargs):
    print 'compute lazyloaded_function %s,%s' % ( args , kwargs )
    return [1,2,3]

sample_a = ObjectifiedDict({'a':'a','b':'bb','c':'ccc'})
sample_a.lazyload( 'd' , lazyloaded_function , "dddd" )

sample_b = ObjectifiedDict({'a':'a','b':'bb','c':'ccc'})
sample_b.lazyload( 'd' , lazyloaded_function , "dddd" )

print "sample_a"
print sample_a
print "sample_a.d = %s" % sample_a.d
print sample_a

print "====="

print "sample_b"
print sample_b
print "sample_b['d'] = %s" % sample_b['d']
print sample_b 
```

# types - 资源解释为字体但使用 MIME 类型 text/html 传输将无法修复

> ID：14801143
> 
> 赞同：4
> 
> 时间：2013-02-10T18:34:49.587
> 
> 标签：types, mime

我正在尝试解决 Chrome 警告：

> 资源解释为字体，但使用 MIME 类型 text/html 传输

我想它正在抑制我的字体的正确加载。我在css中使用这段代码：

```
@font-face {
    font-family: 'stereofidelic';
    src: url('/css/fonts/stereofidelic.eot'); /* IE9 Compat Modes */
    src: url('/css/fonts/stereofidelic.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
         url('/css/fonts/stereofidelic.woff') format('woff'), /* Modern Browsers */
         url('/css/fonts/stereofidelic.ttf')  format('truetype'), /* Safari, Android, iOS */
         url('/css/fonts/stereofidelic.svg#svgFontName') format('svg'); /* Legacy iOS */
    }
@font-face {
    font-family: 'bebasneue';
    src: url('/css/fonts/BebasNeue.eot'); /* IE9 Compat Modes */
    src: url('/css/fonts/BebasNeue.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
         url('/css/fonts/BebasNeue.woff') format('woff'), /* Modern Browsers */
         url('/css/fonts/BebasNeue.ttf')  format('truetype'), /* Safari, Android, iOS */
         url('/css/fonts/BebasNeue.svg#svgFontName') format('svg'); /* Legacy iOS */
    }
@font-face {
    font-family: 'karamuruh';
    src: url('/css/fonts/karamuruh.eot'); /* IE9 Compat Modes */
    src: url('/css/fonts/karamuruh.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
         url('/css/fonts/karamuruh.woff') format('woff'), /* Modern Browsers */
         url('/css/fontsh/karamuruh.ttf')  format('truetype'), /* Safari, Android, iOS */
         url('/css/fonts/karamuruh.svg#svgFontName') format('svg'); /* Legacy iOS */
    }
@font-face {
    font-family: 'comicnotesmooth';
    src: url('/css/fonts/comicnotesmooth.eot'); /* IE9 Compat Modes */
    src: url('/css/fonts/comicnotesmooth.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
         url('/css/fonts/comicnotesmooth.woff') format('woff'), /* Modern Browsers */
         url('/css/fonts/comicnotesmooth.ttf')  format('truetype'), /* Safari, Android, iOS */
         url('/css/fonts/comicnotesmooth.svg#svgFontName') format('svg'); /* Legacy iOS */
    }
@font-face {
    font-family: 'singlesleeve';
    src: url('/css/fonts/singlesleeve.eot'); /* IE9 Compat Modes */
    src: url('/css/fonts/singlesleeve.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
         url('/css/fonts/singlesleeve.woff') format('woff'), /* Modern Browsers */
         url('/css/fonts/singlesleeve.ttf')  format('truetype'), /* Safari, Android, iOS */
         url('/css/fonts/singlesleeve.svg#svgFontName') format('svg'); /* Legacy iOS */
    }        
@font-face {
    font-family: 'TravelingTypewriter';
    src: url('/css/fonts/TravelingTypewriter.eot'); /* IE9 Compat Modes */
    src: url('/css/fonts/TravelingTypewriter.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
         url('/css/fonts/TravelingTypewriter.woff') format('woff'), /* Modern Browsers */
         url('/css/fonts/TravelingTypewriter.ttf')  format('truetype'), /* Safari, Android, iOS */
         url('/css/fonts/TravelingTypewriter.svg#svgFontName') format('svg'); /* Legacy iOS */
    } 
```

我尝试将任何类型的指令添加到我的 .htaccess 中，谷歌搜索我发现许多人的解决方案是在 .htaccess 中添加以下内容：

```
AddType application/vnd.ms-fontobject .eot
AddType application/octet-stream .otf .ttf
AddType font/otf .otf
AddType font/opentype .woff 
```

但我仍然从 Chrome 收到同样的警告：

```
Resource interpreted as Font but transferred with MIME type text/html: "http://mydomain/css/fonts/TravelingTypewriter.woff". index.php:195
Resource interpreted as Font but transferred with MIME type text/html: "http://mydomain/css/fonts/BebasNeue.woff". index.php:195
Resource interpreted as Font but transferred with MIME type text/html: "http://mydomain/css/fonts/TravelingTypewriter.ttf". index.php:195
Resource interpreted as Font but transferred with MIME type text/html: "http://mydomain/css/fonts/BebasNeue.ttf". index.php:195
Resource interpreted as Font but transferred with MIME type text/html: "http://mydomain/css/fonts/TravelingTypewriter.svg". index.php:195
Resource interpreted as Font but transferred with MIME type text/html: "http://mydomain/css/fonts/BebasNeue.svg". index.php:195 
```

在我的本地网络服务器上一切正常，我不需要任何 AddType 指令到 .htaccess 中。

这是在 stackoverflow.com 上建议的 24 小时谷歌搜索 + 尝试解决方案，但没有运气。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T05:26:32.053

如果你有 mod rewrite，你应该设置如下规则：

```
RewriteEngine On
RewriteRule !(\.ico\.gif|\.png|\.jpe?g|\.css|\.js|\.php|\.eot|\.svg|\.ttf|\.woff|\.otf|^public/.*)$ index.php [nocase,last] 
```

我使用阿帕奇。

# javascript - 脚本没有创建跨度

> ID：14801144
> 
> 赞同：0
> 
> 时间：2013-02-10T18:34:59.450
> 
> 标签：javascript, jquery, css, hover, html

这是我用来在图像下创建跨度以在悬停时显示背景图像的脚本

```
$(".gallery li a.image, .portfolio li a.image").append('<span class="image_hover"></span>'); //add span to images
        $(".gallery  li a.video, .portfolio li a.video").append('<span class="video_hover"></span>'); //add span to videos

        $('.gallery  li a span').css('opacity', '0').css('display', 'block') //span opacity = 0 

        // show / hide span on hover
        $(".gallery li a, .portfolio li a").hover(
             function () {
                 $(this).find('.image_hover, .video_hover').stop().fadeTo('slow', .7); }, 
            function () {
                  $('.image_hover, .video_hover').stop().fadeOut('slow', 0);
        }); 
```

这是css代码：

```
#gallery_prettyphoto.portfolio
{padding: 0 0 20px 0;
overflow: hidden;
}

#gallery_prettyphoto.portfolio ul li
{
display: inline-block;
height: 400px;
margin-bottom:35px;

}

#gallery_prettyphoto.portfolio ul li a img
{border: none; margin-top: 30px;}
/*#gallery_prettyphoto.portfolio:hover ul li a img {width: 120%;}*/

#gallery_prettyphoto.portfolio ul li h3 a
{text-decoration: none; text-align: center;}

 #gallery_prettyphoto.portfolio ul li p
 {margin: 10px 0 15px 0;}

 #gallery_prettyphoto.portfolio ul li a.more-link
 {-moz-border-radius: 3px; /* FF1-3.6 */
  -webkit-border-radius: 3px; /* Saf3-4, iOS 1-3.2, Android <1.6 */
   border-radius: 3px; /* Opera 10.5, IE9, Saf5, Chrome, FF4, iOS 4, Android 2.1+ */
border: 1px solid #2C2C2C;
background: #111111;
text-align: center;
padding: 3px 10px;
width: 80px;
display: block;
color: white;
text-decoration: none;}

 #gallery_prettyphoto.portfolio ul li a.more-link:hover
 {background: #222222;}

#gallery_prettyphoto.portfolio a span
{
z-index: 2000;
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
display: block;
cursor: pointer;
}

.portfolio .gallery_2columns a 
{position: relative;
display: block;}

.portfolio .gallery_3columns a 
{position: relative;
display: block;}

.portfolio .gallery_2columns a span.image_hover
{background: black url(images/gallery_hover/hover_image_big.png) no-repeat center center;
}

.portfolio .gallery_2columns a span.video_hover
{background: black url(images/gallery_hover/hover_video_big.png) no-repeat center center;
}

.portfolio .gallery_3columns a span.image_hover
{background: black url(images/gallery_hover/hover_image_medium.png) no-repeat center center;
}

.portfolio .gallery_3columns a span.video_hover
{background: black url(images/gallery_hover/hover_video_medium.png) no-repeat center center;
} 
```

如果没有解决方案，您能否指导我在悬停时创建类似的效果，例如缩放图像或不透明度更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:03:06.317

尝试这个

改变这个：`$(".gallery li a.image, .portfolio li a.image").append('<span class="image_hover"></span>');`

对此：`$(".gallery li a.image, .portfolio li a.image").append("<span class='image_hover'></span>");`

# php - Codeigniter 重写，如何跳过 index.php？

> ID：14801146
> 
> 赞同：1
> 
> 时间：2013-02-10T18:35:06.443
> 
> 标签：php, codeigniter, url, mod-rewrite, rewrite

目前我正在尝试学习 CodeIgniter。

这有效：

```
 http://localhost/NewsPage/index.php/news/fenerana 
```

但我想让它在以下情况下工作：

```
http://localhost/NewsPage/news/fenerana 
```

我怎样才能做到这一点？我当前的 routes.php 文件是：

```
$route['news/(:any)'] = 'news/view/$1';
$route['news'] = 'news';
$route['(:any)'] = 'pages/view/$1';
$route['default_controller'] = 'pages/view'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T18:37:46.980

首先转到 application/config/config.php 并将 'index_page' 设置为空：

```
$config['index_page'] = ''; 
```

然后使用.htaccess（和CI index.php放在同级），像这样：

```
DirectoryIndex index.php
RewriteEngine on
RewriteCond $1 !^(index\.php|images_folder|css_folder_maybe)
RewriteRule ^(.*)$ ./index.php/$1 [L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T18:37:59.010

看看[文档](http://ellislab.com/codeigniter/user-guide/general/urls.html)：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

不过，我的建议是使用这个版本：

```
RewriteEngine On 
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule ^(.*)$ index.php/$1 [L] 
```

# php - 单击按钮时消失文本（JQUERY）

> ID：14801149
> 
> 赞同：-1
> 
> 时间：2013-02-10T18:35:15.470
> 
> 标签：php, javascript, jquery, html

所以我正在制作一个小的 PHP Javascript 和 JQUERY 聊天框，到目前为止它工作得很好，但我试图“看中它”。它会询问您（用户）您的姓名，一旦您在输入框中输入您的姓名，您应该单击 Enter，这会将您带到聊天框。这是聊天框的代码。

[http://pastebin.com/DgQEC9rV](http://pastebin.com/DgQEC9rV) 您可以在页面顶部的 PHP 中找到发送按钮。

但我想知道如何使发送按钮和它所在的整个框与 JQUERY 一起消失，并让聊天框仍然定期加载。

现在聊天的一个活生生的例子。--> [http://www.carlosmayers.com/knil/chat/](http://www.carlosmayers.com/knil/chat/)

我知道只看代码可能会使这个问题看起来非常难以解决，但我知道这里有人可以帮助我！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T18:47:58.987

如果我正确地解释了您的问题，您只想隐藏漏洞聊天框。但它仍应自行更新。

所以使用 jQuery 你可以这样做：`$("#wrapper").attr("style", "display: none");`

而`#wrapper`文档中带有 id (# := css-Selector)“包装器”的 div 是。

jQuery 现在将其设置`style`为`"display: none"`，但聊天框仍将更新！

如果您有 Chrome，请随时在控制台中对其进行测试。

你也可以使用`$("#wrapper").hide();`

# jquery - 带有 3 张幻灯片的内容滑块

> ID：14801150
> 
> 赞同：0
> 
> 时间：2013-02-10T18:35:16.343
> 
> 标签：jquery, html, css, slider, slide

我正在使用 jQuery 创建一个自定义内容滑块。请在[此处](http://jsfiddle.net/isuru_nan/BwD6f/3/)查看小提琴以获取工作示例。在这个例子中，我只有 2 张幻灯片。当点击绿色按钮时，滑动到下一个。

我想为此添加更多幻灯片并单击按钮以滑动到每个幻灯片（没有上一个按钮）。当前的 jQuery 函数`id`对下一个 div 进行了硬编码。现在当我添加更多幻灯片时，此方法将无效。我不知道如何编写一个函数来检测当前所在的 div，然后单击下一步，转到下一个。我怎样才能做到这一点？

谢谢你。

我已经发布了下面的代码。

**HTML**

```
<div id="main-slider-space">
    <div class="slider-wrapper">

        <div id="slide1" class="main-slide">

        </div><!-- end of slide1 -->   

        <div id="slide2" class="main-slide">

        </div><!-- end of slide2 -->   

    </div> <!-- end of slider-wrapper -->   
</div><!-- end of main-slider-space -->

<div id="main-slider-next" class="slider-buttons"><a class="active" href="#"></a></div> 
```

**CSS**

```
#main-slider-space {
    overflow:hidden;
    width:600px;
    height:300px;
    background-color:#C36;
    margin-left:50px;
}

.slider-wrapper {
    position:relative;
    left:0;
    width:3000px;
    height:100%;
}

.main-slide {
    width:600px;
    height:100%;
    float:left;
}

#slide1 { background-color:#5FF; }
#slide2 { background-color:#F5F; }

.slider-buttons {
    position:absolute;
    width:30px;
    height:30px;
}

.slider-buttons:hover { cursor:pointer; }

#main-slider-next {
    background-color:#99CC66;
    right:30px;
    top:50%;
} 
```

**jQuery**

```
function goto(id, t){
    $(".slider-wrapper").animate({"left": -($(id).position().left)}, 600);
}

$(document).ready(function(e) {
   $('#main-slider-next').click(function(e) {
        e.preventDefault();
        goto('#slide2', this);
        return false;
    }); 
}); 
```

[小提琴](http://jsfiddle.net/isuru_nan/BwD6f/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:54:07.440

我会用 css 来制作动画，这是我在你的改变中所做的：

```
.main-slide {
    position:absolute;
    width:600px;
    height:100%;

    -webkit-transition:left 0.5s linear;
    -moz-transition:left 0.5s linear;
    -o-transition:left 0.5s linear;
    transition:left 0.5s linear;
}

.main-slide:not(.current){
    left:600px;
}

.main-slide.current{
    left:0px;
} 
```

然后在您的点击处理程序中只需更改当前元素的类：

```
$(document).ready(function(e) {
   $('#main-slider-next').click(function(e) {
        e.preventDefault();
        next();
        return false;
    }); 
});

function next(){
    var cur = $(".slider-wrapper").children(".current");
    var next = cur.next(".main-slide");
    if(next.length) {
        cur.removeClass("current");
        next.addClass("current");
    }
} 
```

这是我所做的事情[http://jsfiddle.net/NeekGerd/rhXZT/1/](http://jsfiddle.net/NeekGerd/rhXZT/1/)

如果您想保留上一张幻灯片，只需删除以下行：

```
cur.removeClass("current"); 
```

# android - 如何在android中使用字符串

> ID：14801151
> 
> 赞同：0
> 
> 时间：2013-02-10T18:35:16.883
> 
> 标签：android, string, reference

我知道这是一个简单的问题，但我不知道如何在 android 中引用字符串。例如

在这个 EditText 上，我不想硬编码字符串 hi，我希望它引用 res 文件夹中的字符串。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T18:38:49.407

假设您在 xml 中有以下字符串。

```
<string name="string_one">My string</string> 
```

您必须在代码中访问它：

```
String str = resources.getString(R.string.string_one); 
```

您也可以在 xml 中使用 EditText ：

```
android:text="@string/string_one" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T18:37:56.153

`strings.xml`在文件夹中创建一个文件`res/values`，并添加如下文本

```
<string name="card">Card</string> 
```

然后将布局中的文本引用为 android:text="@string/card"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T18:39:02.760

弄清楚了。您需要做的就是在 res 值文件夹中创建一个字符串，然后引用它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T18:41:07.127

在 res/values/ 文件夹中创建一个文件 strings.xml，并在其中添加一个文本，如

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
   <string name="mystring">MyStringFromXML</string>
</resources> 
```

然后将布局中的文本引用为：

`android:text="@string/mystring"`

在Java文件中这样做：

```
String string = getString(R.string.mystring); 
```

# c - 我需要知道一个字符串在另一个字符串中出现了多少次！使用 C

> ID：14801155
> 
> 赞同：-2
> 
> 时间：2013-02-10T18:35:38.713
> 
> 标签：c, string, substring

好吧，标题已经说明了我的需要。我尝试使用循环，但效果不佳，所以，我来寻求你们的帮助！

这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    char word[31], word2[31];
    int size1, size2;
    int i, j, k; // control
    int count = 0;

        printf ("\nInput the first word");
        scanf ("%s", word);
        printf ("\nInput the second word: ");
        scanf (" %s", word2);

// I tried  to make  a loop through the first string and if it matches a letter, it would loop through the others (if they are equal, we have a substring), but failed to put it on the `for` loop

printf ("'%s' appears %d times within '%s'", word2, count, word);

return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T18:50:15.087

[`strstr`](http://www.kernel.org/doc/man-pages/online/pages/man3/strstr.3.html)是一个有用的功能，它大大缩短了你的代码；当您找到匹配项时，只需使用字符串的其余部分重试；

```
#include <string.h>
#include <stdio.h>

int main()
{
  const char* source = "aabaa";
  const char* string2find = "aa";

  int occurrences;
  const char *ptr, *lastfind = NULL;

  for(ptr=source; (lastfind=strstr(ptr, string2find)); ptr=lastfind+1)
    occurrences++;

  printf("%d\n", occurrences);

  return 0;
} 
```

...或者如果您真的打算在没有 string.h 函数的情况下执行此操作，那么代码会变得更加冗长；

```
#include <string.h>
#include <stdio.h>

int main()
{
  const char* source = "aaabaa";
  const char* string2find = "aa";

  int count=0;
  const char *position;
  for(position=source; *position; position++) {
      int comparepos, equal=1;
      for(comparepos=0; string2find[comparepos]; comparepos++) {
         if(position[comparepos] != string2find[comparepos]) {
             equal = 0;
             break;
         }
      }
      count+=equal;
  }

  printf("%d\n", count);

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T18:43:35.027

用于[`strstr`](http://www.cplusplus.com/reference/cstring/strstr/)查找其他字符串中出现的字符串：

```
#include <stdio.h>
#include <string.h>

int main () {
    char* a = "aaaa";
    char* b = "aa";
    char* c;
    int count = 0;
    for(c = a; *c; c++){
        if(strstr(c, b)){
            count++;
        }
    }
    printf("count %d\n", count);
} 
```

另外，用于[`strlen`](http://www.cplusplus.com/reference/cstring/strlen/)查找字符串的长度..

# django - Django-allauth 设置

> ID：14801160
> 
> 赞同：2
> 
> 时间：2013-02-10T18:36:02.240
> 
> 标签：django, django-authentication, django-socialauth, django-allauth

我刚刚完成安装 django-allauth，当我导航到所有社交提供者的模板页面时，我收到以下消息：

```
AttributeError at /account/facebook/login/
'tuple' object has no attribute 'get' 
```

settings.social_account_providers

```
SOCIALACCOUNT_PROVIDERS = ( 
{'facebook':
  {'SCOPE': ['email', 'publish_stream'], 
   'FB_LOGIN': {'auth_type': 'reauthenticate'},
   'METHOD': 'js_sdk'}},
{ 'twitter':
    { 'SCOPE': ['r_emailaddress'] } },
{ 'google':
    { 'SCOPE': ['https://www.googleapis.com/auth/userinfo.profile']}},
{ 'linkedin':
    { 'SCOPE': ['r_emailaddress'] }} 
```

)

html

```
<a method="js_sdk" href="{% provider_login_url "Facebook" %}"></a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T19:42:50.817

`SOCIALACCOUNT_PROVIDERS`设置应该是字典 ( ) `{...}`。我怀疑在你的情况下它是一个元组——我看到你正在使用元组括号。

尝试这个：

```
python manage.py shell
>>> from django.conf import settings
>>> type(settings.SOCIALACCOUNT_PROVIDERS)
<type 'dict'> 
```

它说`<type 'dict'>`在你的情况下吗？

# jquery - jQuery 在特定页面上展开菜单使用 URL 没有 cookie

> ID：14801162
> 
> 赞同：0
> 
> 时间：2013-02-10T18:36:07.663
> 
> 标签：jquery

我试图让这个 jQuery 菜单在子页面打开时自动展开。具体来说，我需要“服务”部分的子页面，例如。“平面设计”“视频制作”和“网页开发”以展开状态显示菜单。有什么建议么？

查看此 JS Bin 了解更多信息[http://jsbin.com/ihoqis/6/edit](http://jsbin.com/ihoqis/6/edit)

```
<div id="primary-nav" data-selectname="Navigate to...">
<div class="menu-navigation-container"><ul id="main-nav" class="menu">
<li id="menu-item-11784" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-11784"><a title="Interactive" href="#">Interactive</a></li>
<li id="menu-item-12121" class="menu-item menu-item-type-post_type menu-item-object-gallery menu-item-12121"><a title="Print" href="#">Print</a></li>
<li id="menu-item-15625" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-15625"><a href="#">About</a></li>
<li id="menu-item-20804" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-20802 current_page_item menu-item-20804"><a href="#">Services</a>
<ul class="sub-menu">
    <li id="menu-item-20816" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-20816"><a href="#">Graphic Design</a></li>
    <li id="menu-item-20815" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-20815"><a href="#">Video Production</a></li>
    <li id="menu-item-20814" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-20814"><a href="#">Web Development</a></li>
</ul>
</li> 
```

Jquery 代码：我使用了建议，但 .show() 似乎没有效果。

```
jQuery(document).ready(function() { 

/*-----------------------------------------------------------------------------------*/
/*  Menu
/*-----------------------------------------------------------------------------------*/     

    if(jQuery('body').hasClass('mobile')){  // Tablet Hover Fix         
        jQuery("#main-nav li").each(function(){     
        if ($(this).find(".active").length){
       $(this).children('ul').slideToggle('normal');  
   }        
    // check URL for 'services' (may need to be refined to check a specific location
    // in the URL structure)
    if(window.location.href.indexOf("services") > -1) {
    // expand the UL below the LI containing that menu item
    $('a:contains("Services")').parents('li').children('ul').show();
    }
            if(jQuery(this).children('ul').length){ 
                var link = jQuery(this).children('a');                  
                if(link.attr('href') == '#'){
                    link.toggle( function() {jQuery(this).siblings('ul').slideDown("slow"); }, function() {jQuery(this).siblings('ul').slideUp("slow"); });
                }   

                else{
                    var firstClick = true;
                    link.click(function(e){
                    if (firstClick){
                        jQuery(this).siblings('ul').slideDown("slow");
                        firstClick = false;
                        e.preventDefault();    
                    }   
                    });                     
                }
            }
        });     
    }

    else{       
            jQuery("#main-nav li").each(function(){             
                if(jQuery(this).children('ul').length){ 
                    jQuery(this).hoverIntent({
                        interval: 10,  /*Original Value 100*/
                        over: navHoverIn,
                        timeout: 9900, /*Original Value 300*/
                        out: navHoverOut            
                    });
                }
            });
    }

    function navHoverIn () {
            jQuery(this).children('ul').slideDown("slow");
            jQuery(this).addClass("down");
    }

    function navHoverOut () {
            var menu =  jQuery(this);
            jQuery(this).children('ul').slideUp("slow",function() {
                  menu.removeClass("down");
            });          
    }

    var defaultmenu = jQuery('#primary-nav').attr('data-selectname');
    jQuery('#main-nav').mobileMenu({
            defaultText: defaultmenu
    });

    jQuery.event.special.debouncedresize.threshold = 250; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T18:46:58.263

像这样的东西应该可以完成这项工作：

```
// check URL for 'services' (may need to be refined to check a specific location
// in the URL structure)
if(window.location.href.indexOf("services") > -1) {
   // expand the UL below the LI containing that menu item
   $('a:contains("Services")').parents('li').children('ul').show();
} 
```

[这是一个演示](http://jsfiddle.net/b2QLT/9/)

注意：这仅适用于初始页面加载或使用更新按钮。必须与检测 URL 的方式有关。刷新页面而不是使用运行按钮。

# json - Grails 将地图渲染为 JSON 问题

> ID：14801166
> 
> 赞同：0
> 
> 时间：2013-02-10T18:36:35.860
> 
> 标签：json, grails, map

我有一些代码需要将 grails 中的地图转换为 JSON。我使用 grails 转换器将映射转换为 JSON 对象，如下所示：

```
def map=[:].withDefault { [] }
...
def users=service?.staff.each{map<<[(it.id):it.firstName+" "+it.lastName]}
render map as JSON 
```

如果地图为空，我在转换后得到这个 [:] 如果我尝试使用 $.parseJSON 进行解析，则会出现以下错误

```
JSON.parse: unexpected character 
```

虽然如果地图不为空，我得到“[2:'Feras Odeh']”作为 json 对象，如果我尝试解析，我得到了

```
JSON.parse: expected ',' or ']' after array element 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T21:21:18.817

```
import grails.converters.*; 
```

...

```
List users = service?.staff.collect{[it.id: "${it.firstName} ${it.lastName}"]}
render(users as JSON) 
```

# node.js - 组织 Nodejs 应用程序：从 HTML 分离的内容？

> ID：14801170
> 
> 赞同：0
> 
> 时间：2013-02-10T18:37:18.733
> 
> 标签：node.js, content-management-system

是否有某种最佳实践来组织有关内容管理的 Nodejs 应用程序？当直接在jade或ejs模板中“硬编码”内容（尤其是文本）时，这对我来说似乎很糟糕。我的经验是，这不太容易维护（至少对于较大的项目）。

是否应该从视图旁边的单独内容目录中提供所有内容？

```
| appRoot
| -- public
| -- views
     | -- index.ejs
     | -- user.ejs
| -- content
     | -- index.json
     | -- user.json 
```

但这也有一些缺点：链接、自定义样式和那些东西呢？在内容 *.json 中定义这些对我来说似乎也很糟糕。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T11:31:35.947

我没有使用 json 作为模型，但我在玉模板中使用 markdown。我喜欢单独的目录，因为这是 MVC 风格应用程序中的常见做法，它提供了模型与视图的分离。

我发现使用 webstorm 重构节点中的文件路径很容易，因此您以后也可以更改目录结构。

# apache - 在一台服务器上运行多个网站

> ID：14801171
> 
> 赞同：0
> 
> 时间：2013-02-10T18:37:20.130
> 
> 标签：apache

这可能是一个重复的问题，但我一直在思考这个问题。我知道，apache 支持在单个服务器上托管许多网站。但我想知道实施。

服务器将具有单个 IP 地址。TCP 始终是 80 端口。那怎么可能在一台机器上运行 10 个不同的网站。DNS也具有一对一的映射。

我在想，可能在 HTTP 协议中进行了一些调整，但想不出准确和最佳的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:41:14.960

您可以在 Apache 配置中添加许多`VirtualHost`条目，如下所示：

```
<VirtualHost *:80>
ServerName www.domain.tld
ServerAlias domain.tld *.domain.tld
DocumentRoot /www/domain
</VirtualHost>

<VirtualHost *:80>
ServerName www.otherdomain.tld
DocumentRoot /www/otherdomain
</VirtualHost> 
```

这基本上会提示 Apache 做出不同的响应，根据请求的域提供不同的文档。

更多信息可以在 Apache 文档中找到：[http ://httpd.apache.org/docs/2.2/vhosts/name-based.html](http://httpd.apache.org/docs/2.2/vhosts/name-based.html)

# express - CSRF 与 Twilio

> ID：14801173
> 
> 赞同：0
> 
> 时间：2013-02-10T18:37:27.777
> 
> 标签：express, csrf, twilio

我正在尝试让 Twilio 与我的 express/node.js 安装一起使用。当 Twilio 收到一条短信时，它正在与我的服务器建立传入连接。然后我用短信回复这个。

这是第一次。然后第二次，我的服务器阻止了 Twilio，因为它说这是一个伪造的请求。

有没有合适的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T18:56:36.413

您应该为该 URL 禁用 CSRF。请参阅有关如何执行此操作的问题：[Disable csrf validation for some requests on Express](https://stackoverflow.com/questions/13516898/disable-csrf-validation-for-some-requests-on-express)

CSRF 是一个仅与需要 cookie 形式的会话信息的请求相关的漏洞（这就是 CSRF 有时也称为“会话骑行”的原因）。简而言之，CSRF 是指恶意网站所有者可以使用`<form>`他们控制的页面上的标签将表单发布到您的网站，从而在用户不知情的情况下将经过身份验证的请求发送到您的服务器。例如，假设 Facebook 有一个 /delete_user.php 删除当前经过身份验证的用户。对该 URL 的 CSRF 攻击将采用`<form action="http://facebook.com/delete_user.php">`恶意站点所有者站点上的标记形式（没有双关语），该标记在用户不知情的情况下被提交。/delete_user.php 的非 CSRF 安全实现将看到用户的 auth cookie 并删除用户——这让用户非常沮丧。

无论如何，长话短说，您的 Twilio 处理程序不需要用户的浏览器 cookie，因此不会受到 CSRF 攻击。只需禁用 Twilio 回调 URL 的 CSRF 检查。

# r - 如何在 R 中创建交互式脚本以简化/部分自动化数据探索部分？

> ID：14801176
> 
> 赞同：1
> 
> 时间：2013-02-10T18:37:35.423
> 
> 标签：r

我想在 R 中创建一个交互式菜单 - 与我交互然后执行选定的任务......我在交互式 R / R 用户菜单 / 等上做了一些谷歌搜索，但没有任何帮助。

我想向自己展示以下交互式菜单

1.  清除所有记忆
2.  加载数据
3.  运行回归模型
4.  运行集群模型 请做出选择（1,2,3 或 4）：

根据选择，它会询问额外的输入（例如，在选项 2 之后，加载数据，它会给我的项目下的 data/in 目录中存在的所有文件加上一个数字，这样我就可以通过简单地输入 1 来选择要加载的文件,2,3 等

我确实准备了不同的数据集以与我的脚本一起运行（针对不同的段或场景），并希望在这些数据集之间快速切换。例如。业务运营计划 Oct'12，消费者预算计划等。我也不想一遍又一遍地重新加载我的数据..

我正在考虑构建一些“伪代码”之类的东西

```
print the menu
ask user for input
ifelse(menuinput==1, source(script1.r),
      ifelse(menuinput== 2,source(script2.r),
      ifelse(menuinput==3,source(script3.r),NA))) 
```

但我不确定是否有更简单的方法可以做到这一点。

谢谢，

杰弗里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T22:36:29.577

如果你需要设计一个定制的菜单，我建议你看看 Rstudio 的 Shiny。

我正在使用它为我的学生创建分析和数据操作 GUI。这是一项正在进行的工作，但应该让您了解一些可能的事情。代码和安装说明链接如下：

[https://github.com/mostly-harmless/radyant](https://github.com/mostly-harmless/radyant)

要在服务器上查看它的运行情况：

[http://vnijs.rady.ucsd.edu:3838/marketing/](http://vnijs.rady.ucsd.edu:3838/marketing/)

# string - AS3 替换字符串中的第 n 个出现

> ID：14801191
> 
> 赞同：0
> 
> 时间：2013-02-10T18:38:38.407
> 
> 标签：string, actionscript-3, replace

当我想用“xyz”替换“abc”时，我使用以下命令：

```
str.split("abc").join("xyz"); 
```

但是如果我有以下字符串“这只是一个测试字符串”并且只想用“\n”替换第二个空格怎么办。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T21:25:51.507

为了改进@fsbmain 的答案，可以使用 '/(( [^ ]+){3}) /' ( [http://regexr.com?33nm5](http://regexr.com?33nm5) ) 替换第 n 次出现：

```
var str:String = ("This is just a test string").replace(/(( [^ ]+){3}) /, "$1\n");
trace(str); 
```

输出将是：

```
这只是一个
测试字符串

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T19:05:21.663

你可以使用[这个](http://regexr.com?33nku)正则表达式：

```
 var str:String = ("This is just a test string").replace(/(.[^ ]+ .[^ ]+) /, "$1\n");
    trace(str); 
```

输出：

```
这是
只是一个测试字符串

```

# r - 离线正交范围计数实现

> ID：14801195
> 
> 赞同：4
> 
> 时间：2013-02-10T18:38:55.613
> 
> 标签：r, computational-geometry

我正在研究的一个统计问题似乎需要做一些计算几何中称为“离线正交范围计数”的事情：

假设我有一组*n*个点（目前，在平面上）。对于每一对点*i*和*j*，我想计算集合中剩余点的数量，这些点位于对角线为端点*i*和*j*的线段的矩形中。然后，整体输出是一个包含*n(n-1) 个*值的向量，每个值在*[0, 1, 2, ... , n-2]*中。

我已经看到存在关于该问题（或至少是一个非常相似的问题）的丰富文献，但我找不到实现。我更喜欢 R（一种统计计算语言）包，但我想这要求太多了。开源 C/C++ 实现也将起作用。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T03:57:17.377

我希望我能很好地理解你的问题。这里是 R 中使用 package 的实现`geometry`。我使用 `mesh.drectangle`计算从点 p 到矩形边界的有符号距离的函数。

1.  我使用为所有点创建一个组合`combn`
2.  对于组合的每个点*p*，我计算从矩形*rect_p*到其他点的距离
3.  如果距离 < 0 我选择点。

例如

```
library(geometry)
## I generate some data 
set.seed(1234)
p.x <- sample(1:100,size=30,replace=T)
p.y <- sample(1:100,size=30,replace=T)
points <- cbind(p.x,p.y)

## the  algortithm
ll <- combn(1:nrow(points),2,function(x){
     x1<- p.x[x[1]]; y1 <- p.y[x[1]]
     x2<- p.x[x[2]]; y2 <- p.y[x[2]]
     p <- points[-x,]
     d <- mesh.drectangle(p,x1,y1,x2,y2)
     res <- NA
     if(length(which(d <0))){
        points.in = as.data.frame(p,ncol=2)[ d < 0 , ]
       res <- list(n = nrow(points.in), 
                    rect = list(x1=x1,x2=x2,y1=y1,y2=y2),
                    points.in = points.in)
     }
     res
},simplify=F)
ll <- ll[!is.na(ll)]

## the result
nn <- do.call(rbind,lapply(ll,'[[','n')) 
```

例如，为了可视化结果，我绘制了具有 5 个点的矩形。

![在此处输入图像描述](../Images/3db810a2087decad628e8f03809cb4ef.png)

```
library(grid)
grid.newpage()
vp <- plotViewport(xscale = extendrange(p.x),
                          yscale = extendrange(p.y))
pushViewport(vp)
grid.xaxis()   
grid.yaxis()
grid.points(x=points[,'p.x'],y=points[,'p.y'],pch='*')
cols <- rainbow(length(ll))
ll <- ll[nn == 5]           ## here I plot only the rectangle with 5 points 
lapply(seq_along(ll),function(i){
            x <- ll[[i]]
            col <- sample(cols,1)
            x1<- x$rect$x1; x2<- x$rect$x2
            y1<- x$rect$y1; y2<- x$rect$y2
            grid.rect(x=(x1+x2)*.5,y=(y1+y2)*.5,
                      width= x2-x1,height = y2-y1,
                      default.units ='native',
                      gp=gpar(fill=col,col='red',alpha=0.2)
                      )
            grid.points(x=x$points.in$p.x,y=x$points.in$p.y,pch=19,
                        gp=gpar(col=rep(col,x$n))) 

 }
)
upViewport() 
```

# mongodb - 使用 ObjectId 作为 mongo 中用户的唯一标识符的替代方法是什么？

> ID：14801197
> 
> 赞同：0
> 
> 时间：2013-02-10T18:39:03.163
> 
> 标签：mongodb, collections, userid, bigdata

我的网站布局是这样的：

```
blah.com/user/<username>

User1 {
  _id: "ObjectID(asdfa)",
  name: "john smith",
  email: "blah@test.com,
  friends: [
    "ObjectID(asdfa2)",
    "ObjectID(asdfa3)",
    "ObjectID(asdfa4)",
  ]
} 
```

我宁愿不使用用户名作为我集合中的唯一键，所以我想使用一个 ID。但我认为到处都有 ObjectID 引用并不好。如何制作一个有组织的集合，其中 _id 既独特又可读，没有自动增量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T01:53:31.667

一般来说，文献推荐尝试自然键，但正如我所见，您的收藏没有任何有意义的价值，除了电子邮件，但通常是敏感数据。

您可以根据您定义的任何业务规则在应用层生成密钥，避免自动递增密钥，并为系统 URL 中使用的密钥添加一些含义。

问候， 莫西

# c - 如何检查十六进制数是否等于特定的二进制数？

> ID：14801201
> 
> 赞同：0
> 
> 时间：2013-02-10T18:39:27.243
> 
> 标签：c, binary, hex

嗨，我正在尝试做一些应该很简单的事情，但我无法弄清楚。我有一个指向无符号字符数组的指针，我得到第一个元素，它是一个十六进制数。我想将其转换为二进制，以便检查它是否等于诸如 0x01101000 之类的数字。

```
 unsigned char arr[] = {0x25};  //just for example. I am actually using *arr.
      unsigned char byte = arr[0];
      if(( byte & 0x01101000) == //not sure if this is the right way to proceed 
```

将不胜感激一些帮助！谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:44:01.197

看到[这个](https://stackoverflow.com/a/2612556/762123)答案。

> 如果您使用的是 GCC，那么您可以为此使用 GCC 扩展： int x = 0b00010000;

因此，在您的情况下，它将是：

```
if( byte == 0b01101000 )
... 
```

不过，请务必在您的文字中仅放置 8 位。

# php - PHP 特定类型的数字

> ID：14801202
> 
> 赞同：0
> 
> 时间：2013-02-10T18:39:39.397
> 
> 标签：php, arrays, sorting, numbers

我有以下类型的数组：

```
$foo = array(
         "a" => 1,
         "b" => 1,
         "c" => 2,
         "d" => 2,
         "e" => 3,
         "f" => 3,
         "g" => 4,
         "h" => 4,
         "i" => 5,
         "j" => 5,
         "k" => 10,
         "l" => 12,
         "m" => 15,
         "n" => 20
       ); 
```

我需要以这种方式对数组进行排序：

```
$foo = array(1,2,3,4,5,12,20,15,10,5,4,3,2,1); 
```

如您所见，最佳值需要位于数组的中间。以及数组开始/结束中的最小值。密钥需要链接到原始值。

谢谢您的帮助！对不起我的英语不好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T18:55:35.120

如果输入已经排序，您可以使用两个循环首先将每个具有奇数偏移量的项目按升序推送，然后将每个具有偶数偏移量的项目按降序推送到您的数组中：

```
$keys = array_keys($foo);
$n = count($keys);
$result = array();
for ($i=0; $i<$n; $i+=2) {
    $result[$keys[$i]] = $foo[$keys[$i]];
}
for ($i=$n-$n%2-1; $i>0; $i-=2) {
    $result[$keys[$i]] = $foo[$keys[$i]];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T19:06:41.100

首先将所有整数按升序排列。假设 $foo_as 是您按升序获得的新数组。

```
$a=a new empty array of size $n

$n=number of integers.
$c=0;
for ($i=$n-1;$i>0;$i--){
   if (i%2==0){
      $a(i/2)+c=$foo_as($n-$c)
   }
   else{
      $a(i+1/2)-c=$foo_as($n-$c)
   }
   $c++
} 
```

解释：我把最大的整数放在中间。之后，我用整数按降序填充中间索引周围的备用索引。

```
-   -   -   -   -   11  -   -   -   -   -
-   -   -   -   10  11  -   -   -   -   -
-   -   -   -   10  11  9   -   -   -   -
-   -   -   8   10  11  9   -   -   -   -
-   -   -   8   10  11  9   7   -   -   -
-   -   6   8   10  11  9   7   -   -   -
-   -   6   8   10  11  9   7   5   -   -
-   4   6   8   10  11  9   7   5   -   -
-   4   6   8   10  11  9   7   5   3   -
2   4   6   8   10  11  9   7   5   3   -
2   4   6   8   10  11  9   7   5   3   1 
```

我使用了一个基本算法来证明这一点。如果在某些时候，我的`php`语法不正确，请忽略它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T19:39:30.060

一个矫枉过正的版本：

```
<?php
$foo = array(
        "a" => 1,
        "b" => 1,
        "c" => 2,
        "d" => 2,
        "e" => 3,
        "f" => 3,
        "g" => 4,
        "h" => 4,
        "i" => 5,
        "j" => 5,
        "k" => 10,
        "l" => 12,
        "m" => 15,
        "n" => 20
);

$arrayKeys = array_keys($foo);
$arrayValues = array_values($foo);

$array_count = count($foo);
for ($idx =0; $idx < round($array_count/2); $idx+=2) {
    $tmpA = $arrayKeys[$idx];
    $arrayKeys[$idx] = $arrayKeys[$array_count - $idx -1];
    $arrayKeys[$array_count - $idx -1] = $tmpA;

    $tmpB = $arrayValues[$idx];
    $arrayValues[$idx] = $arrayValues[$array_count - $idx -1];
    $arrayValues[$array_count - $idx -1] = $tmpB;
}

$tmpArray = array_combine($arrayKeys, $arrayValues);

$ascent = array_slice($tmpArray, 0, round($array_count/2));
$descent = array_slice($tmpArray, round($array_count/2));

asort($ascent);
arsort($descent);

$foobar = array_merge($ascent, $descent);

var_dump($foo, $foobar);
?> 
```

# matlab - 获取枚举字符串 - matlab 编码器

> ID：14801207
> 
> 赞同：7
> 
> 时间：2013-02-10T18:39:56.440
> 
> 标签：matlab, matlab-coder

我有一个这样的枚举：

```
classdef(Enumeration) bla_type < int32
    enumeration
        bla_one(1)
        bla_2(2)
    end
end 
```

我可以像这样得到“元素的字符串表示”：

```
char(bla_type.bla_one) 
```

=>

```
bla_one 
```

不幸的是，matlab 编码器不喜欢这样。有没有其他选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-14T05:08:14.980

Coder 中没有优雅的内置方法可以做到这一点。枚举类型成为 C 中的标准枚举，而`enumeration`MATLAB 中的函数在 Coder 中不可用。最简单但令人不快的方法是使用手动填充的字符串名称创建一个带有 switch 语句的函数。这不好，因为现在您必须在两个地方维护名称。

但是，一种效果很好的方法是使用 Coder 更强大的功能之一：coder.const。

解决方案是创建一个包含枚举成员及其值的表的函数。此函数本身无法编译，而是在编译期间调用以在生成的 C 代码中构建查找表。我们可以在 Coder 兼容函数中使用这个查找表来获取数据。

想象一下，我们有一个像这样的枚举类型（在 someenum.m 中）：

```
classdef someenum < int32 %#codegen
    enumeration
        First_thing (0)
        Second_thing (2)
        Another_thing (3)
        No_thing (4000)
    end
end 
```

然后我们还有一个名为“buildsomeenum2name.m”的构建时函数：

```
function [namearray, memberidx] = buildsomeenum2name
%BUILDSOMEENUM2NAME Compile-time creation of lookup table for someenum 
% THIS FUNCTION IS NOT CODER COMPATIBLE, BUT IS CALLED DURING COMPILE
% TO CREATE A LOOKUP TABLE.

[members, names]=enumeration('someenum');

maxlen = 0;
for i=1:numel(names)
    maxlen = max(maxlen, numel(names{i}));
end

namearray = char(zeros(numel(names), maxlen));
for i=1:numel(names)
    namearray(i, 1:numel(names{i})) = names{i};
end

memberidx =  int32(members); %#ok<NASGU>

end 
```

在`buildsomeenum2name`MATLAB 中调用时，它会创建一个包含枚举类型所有成员的字符串名称的数组，以及另一个按相同顺序包含其数值的向量列表。

这是很酷的部分。MATLAB Coder 可以在构建时评估函数并将它们转换为常量。这些常量在生成的 C 代码中变成文字，而不是实际代码。由于函数是在构建时评估的，枚举信息被放入一个漂亮的表中，因此如果我们制作一个与 Coder 兼容的查找函数，我们可以使用它将成员类型转换为字符串。我们将此函数称为“someenum2name.m”：

```
function name = someenum2name(enum) %#codegen
%SOMEENUM2NAME Get the string name of an enumerated type

% The following line loads namearray and memberidx with constant arrays
coder.extrinsic('buildsomeenum2name');
[namearray, memberidx] = coder.const(@buildsomeenum2name);

% First find the index of the enumerated type in the memberidx vector

index = find(memberidx==int32(enum));
if isempty(index)
    name = 'UNKNOWN';
    return;
end

name = deblank(namearray(index,:));

end 
```

此函数使用该`coder.const`命令`buildsomeenum2name`在编译时进行评估并创建查找表。我们必须指示 Coder 不要尝试编译`buildsomeenum2name`，所以使用`coder.extrinsic`命令告诉它忽略该函数。然后`someenum2name`可以查找字符串的索引并将其拉出（使用 deblank 是因为数组中的字符串有尾随的 0 需要拉出。）该函数`someenum2name`可以在 MATLAB 和 Coder 编译的代码中调用。

此方法使所有内容保持同步，因此如果您向枚举添加新成员或重新排列它们，则 coder.const 函数将确保在输出代码中重新构建这些值，以便 someenum2name 工作。

在命令行中，这看起来像：

```
>> someenum2name(someenum.No_thing)
ans =
No_thing 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T12:08:58.160

试试`[~,s]=enumeration('bla_type')`。您会得到一个字符串元胞数组，其中包含`s`. 所以`bla_one`会在`s{1}`。不知道 MATLAB 编码器是否支持这一点。

# json - Kinvey API 控制台 - JSONParseError

> ID：14801211
> 
> 赞同：0
> 
> 时间：2013-02-10T18:40:20.143
> 
> 标签：json, rest, kinvey

当我在 Kinvey API 控制台上进行简单查询时，我得到

```
{
  "error": "JSONParseError",
  "description": "Unable to parse the JSON in the request",
  "debug": "Unexpected end of input"
} 
```

查询示例：/appdata/:appKey/:collectionName/?query={"_id":"3"}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:43:41.193

我是 Kinvey 的工程师，应该能够帮助你解决这个问题，但我可能需要更多信息。

三件事：您的查询看起来格式正确，所以我认为这不是问题所在。

其次，确保您`HTTP Method`的设置为 GET，

最后，在该`URL target`字段中，您可以让网站`/appdata/:appkey/:collectionName:/`为您的特定应用程序和集合自动完成，您要做的就是将您的查询附加`?query={"_id":"3"}`到该自动生成的 URL 的末尾。

然后，单击发送请求。

如果这不起作用，请发表关于结果的评论，我可以跟进！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T18:40:20.143

在单击“发送请求”按钮之前，您必须单击站点中的任意位置，以便它将字符转换为代码，在 url

# php - Php 意外的 T_FOR，期待 )。使用 for() 创建多维数组

> ID：14801213
> 
> 赞同：-3
> 
> 时间：2013-02-10T18:40:24.473
> 
> 标签：php, arrays, for-loop, multidimensional-array

这是我的代码。我想要实现的是得到这样的文本

```
Hola   Hi
Pollo   Chicken
Queso   Cheese 
```

依此类推，并且能够从中制作一个数组，使得

数组[0][1] 是嗨。这是我的代码，错误在第 13 行

```
<?php

if(isset($_POST['submit'])){
$message = $_POST['text'];
$words2 = explode("\r\n", $message);
$words = explode("\t", $words2[0]);
$numberoflines = count($words2);
echo $numberoflines;
for($i=0; $i<$numberoflines; $i++){
$words[$i] = $line;
$arrayline = explode("\t", $line);
$cow = array( 
    for($u=0; $u<2; $u++){
        array($arrayline[$u])
            }
        );
}
}
?>
<html>
<form method = "POST" method ="changetext.php">
<textarea name="text">
</textarea>
<input type="submit" value = "Flip!" name="submit">
</form>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T19:10:59.303

尝试这样的事情：

```
$words = array();
if(isset($_POST['submit'])){
    // Break down the text as lines:
    $lines = explode("\r\n", $_POST['text']);

    // For every line...
    foreach($lines as $line){
        // Seperate the 2 words (seperated by a tab)
        $words[] = explode("\t", $line);
    }

    // Print the result:
    var_dump($words);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T18:45:16.750

也许这就是你想要达到的目标？！？

```
for($i=0; $i<$numberoflines; $i++){
 $arraycols= explode("\t", $words[$i]);
 foreach($arraycols as $col){
    $list[$i][] = $col;
 }
} 
```

所以数组 $list 是 $list[row][col]

如果我猜对了 $words 数组中的内容。你的代码有点混乱；）

# ruby-on-rails-3 - 我如何根据迁移制作 Rails 3 模型类型？

> ID：14801214
> 
> 赞同：0
> 
> 时间：2013-02-10T18:40:27.400
> 
> 标签：ruby-on-rails-3, heroku, migration

我遇到的问题是，当我运行迁移时，更新会应用于数据库，但 rails 不会这样做。

为了更准确。我有一个带有门牌号的地址模型。Recetly 我被告知门牌号码应该能够包含字母，如（35B）。因此，我想将整数列转换为字符串列。无论如何，这对我的数据没有问题，红色。只有整数。

我应用的迁移按预期工作。它更改 postgres 数据库中列的类型并保留数据内容。我正在使用此迁移。

```
class ConvertIntToStringOnNumber < ActiveRecord::Migration
  def change
    change_table :addresses do |t|
      t.change :number, :string
    end
  end
end 
```

使用此 schema.rb 的迁移结果

```
create_table "addresses", :force => true do |t|
  t.string   "street"
  t.string   "number"
  t.integer  "zip"
  t.string   "floor"
  t.datetime "created_at", :null => false
  t.datetime "updated_at", :null => false
end 
```

在我的 heroku 服务器上运行迁移后，我无法使用表单中的数据查询数据库，这在之前没问题。Rails 正在尝试查找整数，但数据库包含字符串。

Rails 正在尝试运行此查询，即使 schema.rb 说的有些不同。这是聚会停止的地方。

```
SELECT  "addresses".* FROM "addresses"  WHERE "addresses"."street" = 'xxxx' AND "addresses"."number" = 63 AND "addresses"."floor" = '' AND "addresses"."zip" = 9000 LIMIT 1): 
```

我已经看到了很多与外来键有关的问题，但这不是这些问题之一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T05:02:48.017

您是否在运行迁移后重新启动了应用程序？

ActiveRecord 在实例化表时将有关表的信息加载到每个类中。有关更多信息，请参阅[#columns](http://apidock.com/rails/v3.2.8/ActiveRecord/ModelSchema/ClassMethods/columns)。由于 Heroku 在生产模式下运行您的应用程序，因此您的类不会在每次请求时自动重新加载。

尝试`heroku restart`在您的应用程序上运行——Rails 应该会接受这些更改。

# java - 滚动视图没有完全向下滚动

> ID：14801215
> 
> 赞同：12
> 
> 时间：2013-02-10T18:40:29.313
> 
> 标签：java, android, scroll, scrollview

我正在构建一个类似聊天的应用程序，它使用滚动视图将用户输入的文本显示到屏幕上。我正在做的是在屏幕上附加更多文本时自动向下滚动滚动视图。我正在使用

```
 ScrollView my_scrollview = (ScrollView) findViewById(R.id.scroller);
 my_scrollview.fullScroll(ScrollView.FOCUS_DOWN); 
```

这似乎可行，尽管出于某种原因，因为键盘通常在聊天时出现在屏幕上，当滚动视图向下滚动时它并不完全 - 不显示添加的最新文本视图（您必须手动向下滚动到最新的一）。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-15T15:20:22.983

我环顾四周，发现[其他一些人](https://stackoverflow.com/questions/8620153/how-to-get-the-android-textview-to-scroll-down-to-the-end-automatically)也遇到了同样的问题。

我使用这段代码解决了这个问题：

```
final ScrollView scrollView = (ScrollView) findViewById(R.id.scroll_view);
scrollView.post(new Runnable() {
    public void run() {
        scrollView.fullScroll(View.FOCUS_DOWN);
    }
}); 
```

希望这可以帮助那里的人！

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-08-03T20:36:38.103

它迟到了，但可能会帮助一些人解决这个问题。添加最后一个元素并为滚动视图更新它需要大约 200 微秒，所以这肯定会起作用。

```
void scrollDown()
{
    Thread scrollThread = new Thread(){
        public void run(){
            try {
                sleep(200);
                ChatActivity.this.runOnUiThread(new Runnable() {
                    public void run() {
                        myScrollView.fullScroll(View.FOCUS_DOWN);
                    }    
                });
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    };
    scrollThread.start();
} 
```

只需`scrollDown();`在将元素添加到滚动视图后调用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-09-27T20:50:29.190

在 Xamarin Android 项目上这样做了：

```
var scrollView = FindViewById<ScrollView>(Resource.Id.scrolview); 

scrollView.Post(() =>
{
    scrollView.FullScroll(FocusSearchDirection.Down);
}); 
```

感谢OP。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-17T20:00:58.730

```
 @Override
        public void onClick(View v) {

            scview_ashora = findViewById(R.id.scview_ashora);
            scview_ashora.fullScroll(ScrollView.FOCUS_DOWN);

            scview_ashora.postDelayed(new Runnable() {
                @Override
                public void run() {
                    //replace this line to scroll up or down
                    scview_ashora.fullScroll(ScrollView.FOCUS_DOWN);
                }
            }, 1000000L);

        }
    }); 
```

# c++ - 为什么 setf(ios::fixed) 会跳过双精度数中的第 6 个数字？

> ID：14801218
> 
> 赞同：0
> 
> 时间：2013-02-10T18:40:56.733
> 
> 标签：c++

```
 #include <iostream>
 using namespace std;

 int main() {
     double pi = 0.1234567;
     cout << "1234567890" << endl;
     // cout.width(10);
     cout.setf(ios::fixed);
     cout << pi << endl;
 } 
```

输出

```
1234567890
0.123457 
```

为什么它打印的是 0.123456 而不是 0.123456？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T18:41:53.577

因为它正确地四舍五入，这就是原因。`0.1234567`四舍五入到小数点后 6 位（默认）是`0.123457`.

# servicestack - /auth/twitter 未找到

> ID：14801220
> 
> 赞同：3
> 
> 时间：2013-02-10T18:41:07.910
> 
> 标签：servicestack

我正在努力在我的 ServiceStack 实现中实现 Twitter 身份验证。我正在使用[此处找到的 Social Bootstrap API](https://github.com/ServiceStack/SocialBootstrapApi)以供参考。

在我的 apphost 中，我有以下代码：

```
var appSettings = new AppSettings();
Plugins.Add(new SessionFeature());
Plugins.Add(new AuthFeature(
    () => new AuthUserSession(), 
    new IAuthProvider[] 
    { 
        new TwitterAuthProvider(appSettings)
    })); 
```

在 my 中指定了以下选项`web.config`；`oauth.twitter.ConsumerKey`, `oauth.twitter.ConsumerSecret`,`oauth.twitter.RedirectUrl`和`oauth.twitter.CallbackUrl`.

我在单元测试中使用以下代码来测试 Twitter 身份验证：

```
var authenticate = restClient.Post<AuthService>(
    "/auth/twitter?format=json",
    new Auth()
    {
        UserName = "username",
        Password = "password",
        RememberMe = true
     }); 
```

`/auth/credentials`适用于我设置的基于 SQL 的身份验证（我删除了`AuthProvider`为上面的示例注册我的自定义的行）。我收到`/auth/twitter`端点的“未找到”错误。

有什么我想念的吗？我的理解是身份验证端点在`/auth/[provider]`.

我在 Visual Studio 2012 中将 Service Stack 版本 3.9.35.0 与 ASP.NET Web 表单项目一起使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T19:13:06.067

不确定它是否相关，但[ServiceStack 的 SocialBootstrap API](https://github.com/ServiceStack/SocialBootstrapApi/)是一个 ASP.NET MVC 应用程序，ServiceStack[托管在 /api](http://bootstrapapi.apphb.com/api/metadata)。因此，如果您收到**404**，请尝试在您的路线前加上`/api/`.

ServiceStack 中的 Twitter、Facebook Auth 和所有其他[Open Id 提供程序](https://github.com/ServiceStack/ServiceStack/wiki/OpenId)需要 html 重定向和手动接受，因此无法像普通的 C# 集成测试那样进行测试。

基本上，您需要使用像[Selenium](http://seleniumhq.org/)这样的东西，它允许您进行完整的端到端集成测试，可以模拟使用浏览器的用户。

### 其他注意事项：

使用[C# ServiceClient](https://github.com/ServiceStack/ServiceStack/wiki/C#-client)时，您永远不想添加前缀**?format=json** ，因为格式已经在每个请求的**HTTP Accept标头中发送。**此外，您通常不需要指定自定义路由，因为如果不存在自定义路由，服务将自动回退到使用 ServiceStack 的预定义路由。

 **因此，如果您可以使用 C# 客户端测试 twitter 身份验证，您可以更改：

```
var restClient = new JsonServiceClient(...);
var authenticate = restClient.Post<AuthService>(
"/auth/twitter?format=json",
new Auth()
{
    UserName = "username",
    Password = "password",
    RememberMe = true
 }); 
```

到这个更简洁的版本：

```
var restClient = new JsonServiceClient(...);
var authenticate = restClient.Post(new Auth {
    provider = "twitter",
    UserName = "username",
    Password = "password",
    RememberMe = true
}); 
```**

# ruby-on-rails - ActiveRecord 在保存模型之前验证范围关联？

> ID：14801223
> 
> 赞同：0
> 
> 时间：2013-02-10T18:41:10.797
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, associations

我正在编写一个 API，并且有两个模型将作为一篇文章的一部分创建，它们是`Order`和`LineItem`. 我的 API 需要（理想情况下）这种格式的数据：

```
{
    "name": "Test Name",
    "date": "2013/01/01",
    "items": [{
        "name": "Item One",
        "quantity": 10
    }, {
        "name": "Item Two",
        "quantity": 30
    }]
} 
```

在上面的示例中，“name”和“date”是我的`Order`模型的属性，“items”数组中的每个条目都是一个`LineItem`. 我的两个模型定义如下：

```
class Order < ActiveRecord::Base
    has_many :line_items
end

class LineItem < ActiveRecord::Base
    belongs_to :order

    validates :name, :uniqueness => {:scope => :order_id }
end 
```

因此，每个订单项对于订单必须是唯一的。**当**我收到此 POST 请求来构建我的项目时，似乎`LineItems`在保存我的. 但是，如果我的 s 未能验证，那么我已经在我的系统中保存了一个我不想要的订单。**`Order``LineItem`**

 **处理这种情况的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:48:28.417

听起来您正在寻找的是在 Order.valid 时要求验证行项目？叫做。您可以使用 validates_associated 执行此操作：

```
class Order < ActiveRecord::Base
  has_many :line_items
  validates_associated :line_items
end 
```

这也将导致对行项目的验证也被调用。有关更多详细信息，请参阅：

[http://guides.rubyonrails.org/active_record_validations_callbacks.html#validates_associated](http://guides.rubyonrails.org/active_record_validations_callbacks.html#validates_associated)

**编辑**

正如评论中所指出的，似乎当前打开的错误阻止了验证失败（尽管重复的 line_item 不会保存到磁盘）。看：

*   [https://github.com/rails/rails/pull/8308](https://github.com/rails/rails/pull/8308)
*   [https://github.com/rails/rails/issues/4568](https://github.com/rails/rails/issues/4568)

为了解决这个错误，您可能需要创建一个 before_validation 回调来验证新项目的名称唯一性。修复错误后，您就可以删除此回调。**

# android - 自定义 AsyncTaskLoader，5 次尝试后未调用 loadinBackground

> ID：14801226
> 
> 赞同：10
> 
> 时间：2013-02-10T18:41:17.757
> 
> 标签：android, asynctaskloader

我有一个`SherlockListFragment`实现自定义的`AsyncTaskLoader`. 在被覆盖的`onStartLoading()`中，我有：

```
@Override
protected void onStartLoading() {
  if (mData != null) {
    deliverResult(mData);
  }
  else{
    forceLoad();
  }
} 
```

包含`SherlockListFragment`在以下位置启动加载程序`onActivityCreated`：

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
  super.onActivityCreated(savedInstanceState);
  mAdapter = new MyListAdapter(getActivity());
  setListAdapter(mAdapter);
  getLoaderManager().initLoader(0, null, this);
} 
```

和 ：

```
@Override
public Loader<List<MyData>> onCreateLoader(int id, Bundle args) {
  return new MyListLoader(getActivity());
} 
```

问题是在 5 次激活/导航到我的 FragmentActivity 之后，`loadinBackground()`没有调用。被`onStartLoding`称为，以及`forceLoad`，但仅此而已。没有例外，LogCat 中没有任何内容。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-08-17T09:40:43.687

可以调用**forceLoad()**。

查看文档中的内容：***您通常应该只在加载程序启动时调用它 - 即 isStarted() 返回 true***[。](https://developer.android.com/reference/android/content/Loader.html#forceLoad())

 *完整代码：

```
@Override
protected void onStartLoading() {
    try {
        if (data != null) {
            deliverResult(data);
        }
        if (takeContentChanged() || data == null) {
            forceLoad();
        }

        Log.d(TAG, "onStartLoading() ");
    } catch (Exception e) {
        Log.d(TAG, e.getMessage());
    }
} 
```

# **重要的：**

[文档说](https://developer.android.com/reference/android/content/Loader.html)：*子类`Loader<D>`通常必须至少实现**onStartLoading()、onStopLoading()、onForceLoad() 和 onReset()**。*

AsyncTaskLoader 扩展了 Loader 但没有实现**onStartLoading(), onStopLoading(), onReset()**。你必须自己实现它！

* * *

PS 在使用简单的 CursorLoader 之后，我对它感到困惑，我还认为使用 forceLoad() 是不好的做法。但事实并非如此。*

# python - 在pypy中清理

> ID：14801228
> 
> 赞同：1
> 
> 时间：2013-02-10T18:41:19.370
> 
> 标签：python, pypy

我一直在寻找在 python 中清理对象的方法。我目前正在使用 pypy。

我找到了一个网页和一个例子。

首先是一个基本示例：

```
class FooType(object):
    def __init__(self, id):
        self.id = id
        print self.id, 'born'

    def __del__(self):
        print self.id, 'died'

ft = FooType(1) 
```

这应该打印：

1 出生 1 死亡

但它只打印 1 出生

所以我的问题是：如何在 PyPy 中清理任何东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T18:48:18.303

当您需要在特定时间确定运行“清理”时，请使用[上下文管理器](http://docs.python.org/3/reference/datamodel.html#context-managers)。

```
class FooType(object):
    def __init__(self, id):
        self.id = id
        print 'born'
    def __enter__(self):
        print 'entered'
        return self
    def __exit__(self, *exc):
        print 'exited'

with FooType(1) as ft:
    pass # do something with ft 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-10T18:49:58.960

与其他所有 Python 实现（*包括 CPython* ）一样，您*应该*这样做：通过显式管理代码中的生命周期，而不是依赖自动内存管理和.*`__del__`*

 *即使在 CPython 中，也有不止一种情况`__del__`根本没有被调用，而且**在**很多情况下调用它的时间比您预期的要晚得多（例如，任何时候任何对象都陷入引用循环中，这很容易发生）。这意味着它基本上是无用的，除了可能调试生命周期问题（但有内存分析器！），如果某些代码忽略显式清理，作为**最后的手段。**

通过明确清理，您可以回避所有这些问题。有一个进行清理的方法，并让客户端代码在正确的时间调用它。上下文管理器可以使这在面对异常时更容易正确处理，并且更具可读性。`__del__`即使引用计数“立即”调用*，*它通常也允许更快地清理`__del__`。例如，这个：

```
def parse_file(path):
    f = open(path)
    return parse(f.read()) # file stays open during parsing 
```

比这个 wrt 资源使用更糟糕：

```
def parse_file(path):
    with open(path) as f:
        s = f.read()
    # file is closed here
    return parse(s) 
```

我还认为这样的设计更简洁，因为它不会混淆资源包装对象的生命周期和被包装资源的生命周期。有时，让该对象比资源寿命更长，甚至使其拥有新资源的所有权是有意义的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T09:29:07.923

在您的示例中，`__del__`未调用，但这只是因为您编写的测试程序立即完成。PyPy 保证`__del__`在对象不再可访问后的某个时间调用它，但前提是程序继续执行。所以如果你`ft = FooType(1)`在一个无限循环中做，它也会在一段时间后打印`died`出来。

正如其他答案所解释的那样，CPython 并不能真正保证任何事情，但在简单的情况下（例如，没有引用循环），它会`__del__`立即可靠地调用。不过，关键是您不应该严格依赖这一点。*

# sox - 如何继续录制？

> ID：14801233
> 
> 赞同：1
> 
> 时间：2013-02-10T18:41:29.113
> 
> 标签：sox

如何使用 SOX 继续现有的 wav 录音？

我试过：rec test.wav --combine concatenate test2.wav

test.wav 是旧文件 test2.wav 是新文件

问题是新的录音放在开始而不是放在 test.wav 的结尾

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T19:28:24.787

该`rec`命令只是一个快捷方式`sox -d`，`-d`可用于代替输入或输出文件来选择默认设备作为输入或输出。当你写

```
rec test.wav --combine concatenate test2.wav 
```

它将与

```
sox -d test.wav --combine concatenate test2.wav 
```

在这种情况下`-d`，之前已列出`test.wav`，因此将是输出文件的第一部分。跑步

```
sox test.wav -d --combine concatenate test2.wav 
```

应该做你想做的。

# php - 如何在php中反转if条件？

> ID：14801234
> 
> 赞同：0
> 
> 时间：2013-02-10T18:41:36.290
> 
> 标签：php, if-statement

嗨，我想看看我是否可以反转这个 if 语句，以便我可以有一个 if 条件，它仅在用户会话不是用户 ID 时列出结果。

我是 mysql 和 php 的新手，如果有人能告诉我我需要做什么，我将不胜感激

这是我正在尝试反转的 if 语句，所以如果 $user['id'] 不是 $_SESSION['user_id']

```
if ($user['id'] == $_SESSION['user_id']){ 
```

我试过这个：（不起作用并出现语法错误）

```
if (!isset($user['id'] == $_SESSION['user_id'])){ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T18:42:57.500

这是相当简单的，实际上是[基本的 PHP 东西](http://php.net/language.operators.comparison)：

`if ($user['id'] != $_SESSION['user_id'] )`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-16T02:51:19.733

只需检查使用 if 条件

```
if(!$user['id']==$_SESSION['user_id']) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-16T01:43:15.300

除了 Sturb 的回答，您还可以反转变量：

```
if($_SESSION['user_id'] != $user['id']) 
```

# r - 在设定的时间段内记录零时删除部分数据帧

> ID：14801235
> 
> 赞同：2
> 
> 时间：2013-02-10T18:41:46.923
> 
> 标签：r

我有一个简单的数据框。

```
a <- c("06/12/2012 06:00","06/12/2012 06:05","06/12/2012 06:10","06/12/2012 06:15","06/12/2012 06:20","06/12/2012 06:25",
   "06/12/2012 06:30","06/12/2012 06:35","06/12/2012 06:40","06/12/2012 06:45","06/12/2012 06:50","06/12/2012 06:55",
   "06/12/2012 07:00","06/12/2012 07:05","06/12/2012 07:10","06/12/2012 07:15","06/12/2012 07:20","06/12/2012 07:25",
   "06/12/2012 07:30","06/12/2012 07:35","06/12/2012 07:40","06/12/2012 07:45","06/12/2012 07:50","06/12/2012 07:55",
   "06/12/2012 08:00")
a <- strptime(a, "%d/%m/%Y %H:%M")

b <-c("1","0","0","0","2","0","0","0","3","0","0","0","0","0","1","2","5","6","0","0","0","0","6","10","2")
df1 <- data.frame(a,b) 
```

当有效数据不足时，我想使用 R 删除部分数据框。每 5 分钟记录一次数据。如果在“b”列中仅记录零时有 20 分钟或更长时间的连续数据，则可以从我的最终数据框中删除这些数据。

如果有人有任何想法可以帮助我，我将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T19:58:46.190

另一个，仍在使用`rle`：

```
is.zero <- df1$b == 0
is.zero.rle <- rle(is.zero)
df1[rep(is.zero.rle$lengths, is.zero.rle$lengths) * is.zero < 4, ] 
```

* * *

如果我显示中间结果可能有助于理解：

```
rep(is.zero.rle$lengths, is.zero.rle$lengths) * is.zero
# [1] 0 3 3 3 0 3 3 3 0 5 5 5 5 5 0 0 0 0 4 4 4 4 0 0 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T19:41:07.657

一种使用的解决方案`rle`（正如本在评论中提到的那样）

```
# get rle
t <- rle(as.numeric(as.character(df1$b)))
# check for condition. NOTE: here I assume all are 5 minute intervals!!
# So, if rle length >= 4, then its >= 20 minute interval
p <- which(t$values == 0 & t$lengths >= 4)
w <- cumsum(t$lengths)
o <- unlist(lapply(p, function(x) {
    c((w[x-1]+1):w[x])
}))
df1[-o, ]

#                      a  b
# 1  2012-12-06 06:00:00  1
# 2  2012-12-06 06:05:00  0
# 3  2012-12-06 06:10:00  0
# 4  2012-12-06 06:15:00  0
# 5  2012-12-06 06:20:00  2
# 6  2012-12-06 06:25:00  0
# 7  2012-12-06 06:30:00  0
# 8  2012-12-06 06:35:00  0
# 9  2012-12-06 06:40:00  3
# 15 2012-12-06 07:10:00  1
# 16 2012-12-06 07:15:00  2
# 17 2012-12-06 07:20:00  5
# 18 2012-12-06 07:25:00  6
# 23 2012-12-06 07:50:00  6
# 24 2012-12-06 07:55:00 10
# 25 2012-12-06 08:00:00  2 
```

# wordpress - Wordpress 没有按需提取 Dircaster 脚本

> ID：14801242
> 
> 赞同：0
> 
> 时间：2013-02-10T18:43:10.043
> 
> 标签：wordpress, magpie, audiojs

我有一个脚本，当作为 php 独立运行时，它可以正常工作。它是 rss 提要的简单输出，但 rss 是由 dircaster 动态生成的。然而，当我把它变成一个 wordpress 插件时，它每次都无法工作。

这是经常出现的错误。有时按下刷新会使其工作。

```
Warning: array_slice() expects parameter 1 to be array, null given in /home/evilmer/public_html/frome.me/ffm/wp-content/plugins/fromefm-player/fromefm-player-plugin.php on line 50

Warning: Invalid argument supplied for foreach() in /home/evilmer/public_html/frome.me/ffm/wp-content/plugins/fromefm-player/fromefm-player-plugin.php on line 53 
```

这是基于`[ffmplayer show=xxx showno=xx]`. 我没有包含整个短代码，因为我认为这不是必需的。

```
include_once(ABSPATH . WPINC . '/rss.php');         

$num_items = $showno;
$feedurl = 'http://fromefm.co.uk/archive/dircasterX.php?show='.$show;
$feed = fetch_rss($feedurl);
$items = array_slice ($feed->items, 0, $num_items); 
$list = "";

foreach ($items as $item ) 
{
$title = $item[title];
$mp3link   = $item[link];
$description    =  $item[description];
$list .= "$title - $description</br><audio src='$mp3link' preload='none'>    </audio>";}
    return "

<script>
  audiojs.events.ready(function() {
var as = audiojs.createAll();
  });
</script>

$list

"; 
```

第 50 行是：

```
$items = array_slice ($feed->items, 0, $num_items); 
```

第 53 行是

```
foreach ($items as $item ) 
```

我确信它只是没有正确或每次都运行 DircasterX.php (dircaster.org) 脚本，但是当我独立使用它并使用 magpierss 而不是版本 (rss.php) 调用它时，它似乎工作正常内置在wordpress中。

独立版本目前在这里[http://www.fromefm.co.uk/popupplayer/five.php?show=homelyremedies&showno=6](http://www.fromefm.co.uk/popupplayer/five.php?show=homelyremedies&showno=6)它不是使用 wordpress 简码而是从中获取变量`$_get`。

这里有插件的演示安装（请忽略 fromfmplayer.js 上的 js 错误，因为它无关）[http://frome.me/ffm/?page_id=48](http://frome.me/ffm/?page_id=48)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T09:45:23.897

你得到的警告告诉你那`$feed`是空的。可能是因为`fetch_rss($feedurl)`它的结果没有成功。

# ios - 在 Facebook SLRequest 中使用“扩展权限”

> ID：14801248
> 
> 赞同：1
> 
> 时间：2013-02-10T18:43:43.277
> 
> 标签：ios, ios6, social-framework

我正在通过 iOS 应用程序与 Facebook 进行交互。我想通过使用来自 iOS 6 的社交框架的 SLRequest 来避免 OAuth。

我想使用 Facebook API 的“读取流”权限，它被归类为“扩展权限”。WWDC 2012 关于社交整合的视频说，在 WWDC 期间，扩展权限不可用，但它可能会发生变化并密切关注文档。

这有改变吗？更好的是，我在文档中的哪里可以找到这些信息？

# mysql - 如何使用 FULLTEXT 搜索返回所有字段？

> ID：14801254
> 
> 赞同：0
> 
> 时间：2013-02-10T18:44:25.847
> 
> 标签：mysql

这个问题与[全文搜索在搜索确切标题时不起作用有关](https://stackoverflow.com/questions/14800986/fulltext-search-not-working-when-searching-the-exact-title)

我正在尝试学习如何有效地搜索数据库，并且遇到了 FULLTEXT 搜索，这似乎是最好的选择。在这一点上，我的表仍然很小，因为我还没有收集到很多数据。我有这个可以搜索表的 sql 代码

```
SELECT * FROM table WHERE MATCH(title) AGAINST ('hamlet') LIMIT 30; 
```

但由于只有一行，它什么也没返回。有什么解决方法，允许查询返回信息？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T18:59:03.383

这就是我所做的：

```
SELECT title ,
MATCH(title) 
AGAINST ('hamlet' IN BOOLEAN MODE)
AS relevance 

FROM test 
WHERE  MATCH(title) 
AGAINST ('hamlet' IN BOOLEAN MODE) 

HAVING relevance > 0 ORDER BY relevance DESC 
```

使用的表：

```
CREATE TABLE IF NOT EXISTS `test` (
  `id` tinyint(4) NOT NULL,
  `title` varchar(255) collate utf8_unicode_ci NOT NULL,
  PRIMARY KEY  (`id`),
  FULLTEXT KEY `name_2` (`title`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Dumping data for table `test`
--

INSERT INTO `test` (`id`, `title`) VALUES
(2, 'hamlet'); 
```

# java - 如何使用java从xml中省略xml声明

> ID：14801257
> 
> 赞同：0
> 
> 时间：2013-02-10T18:44:50.297
> 
> 标签：java, xml

如何从使用 Java（任何函数）我的 xml 中省略 xml 声明：

```
<?xml version="1.0" encoding="utf-16"?>
       <Entity>RIM_BPS</Entity> 
```

我需要输出只是

```
<Entity>RIM_BPS</Entity> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T19:16:54.493

首先，你为什么打算这样做？因为 xml 文档必须有声明标签才能用于 xml 解析器。好吧，无论如何，如果您仍然需要删除标记行，您可以按照下面提到的简单步骤来完成： 1\. 在 BufferedSteamReader 中读取 xml 文件 2\. 打开 Stream 3\. 逐行读取它您知道声明标记将是您的 xml 的第一行（忽略空格） 4\. 忽略第一个声明标记行，然后将所有其他行保存在文件中。

或者，您可以选择附加标志来修改已经存在的文件。

我希望这会有所帮助....如果您仍然需要帮助，请告诉我们。

谢谢... 777 先生

# woocommerce - 侧边栏删除 WP Woocommerce

> ID：14801258
> 
> 赞同：-1
> 
> 时间：2013-02-10T18:44:56.547
> 
> 标签：woocommerce

woocommerce 产品页面有一个疯狂的问题......侧边栏只掉在一个产品页面上，但没有其他 woocommerce 页面......

见这里：[http ://brachelleart.com/shop/vate-lamp/](http://brachelleart.com/shop/vate-lamp/)

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T01:00:25.470

页面不存在。那是你的问题。

# javascript - 用户可以修改存储在 sessionStorage 中的变量的值吗

> ID：14801259
> 
> 赞同：5
> 
> 时间：2013-02-10T18:44:59.617
> 
> 标签：javascript, html, session-storage, web-storage

我正在使用客户端 JavaScript 来使用 Web Storage 存储一些变量，更具体地说，是 sessionStorage。

但我不确定用户是否可以以任何方式简单地修改这些变量的值？如果是这样，请举例说明这种情况是如何发生的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T18:58:04.993

是的，用户可以随时修改自己存储的值。我可以立即想到三种方法：

*   使用 Web 浏览器控制台运行修改存储的 JS 命令
*   使用客户端指定的 DNS 设置客户端托管站点，以运行他们自己的代码来修改存储
*   打开本地存储文件并手动编辑它们

重要的是您不*信任*客户端存储。如果您要将会话信息存储在客户端上，那么您需要某种方式让您的服务器端代码验证信息未被篡改。还有其他原因您可能不想在客户端存储此信息（例如隐私），但假设您已经考虑过这些，您仍然需要确保您信任客户端的数据或确保信任没有必要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T18:48:28.130

在您的情况下不完全确定，但作为规则会话应始终在服务器端而不是客户端处理。会话的要点之一是出于安全原因从客户端完全删除该数据

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T19:07:37.397

完成 hrunting 和 tucker 的回答后，用户甚至可以通过简单地访问浏览器开发工具（通常是 F12）来更改 sessionStorage。

# jquery-mobile - 如何使用 jquery mobile 创建注销对话框？

> ID：14801261
> 
> 赞同：0
> 
> 时间：2013-02-10T18:45:09.783
> 
> 标签：jquery-mobile

我是 jqueryMobile 的新手。我想在单击注销图像时创建一个对话框。

在应用程序中，我有一个注销图像，单击它应该会创建一个对话框弹出窗口，询问“您真的要注销吗？” 有两个按钮是和否。由于我是 jqueryMobile 的新手，所以我不知道如何制作它。请帮我解决一下这个。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:19:46.707

我认为这可能对您有所帮助.. 检查一下，他们已经用一个编辑框显示了两个按钮，您可以根据您的要求进行修改 [http://dev.jtsage.com/jQM-SimpleDialog/demos/string.html](http://dev.jtsage.com/jQM-SimpleDialog/demos/string.html)

# linq - 为什么在foreach循环之前放置dbcontext

> ID：14801266
> 
> 赞同：0
> 
> 时间：2013-02-10T18:45:16.890
> 
> 标签：linq, entity-framework-5, using

我一直在努力弄清楚为什么这段代码会在 foreach 循环之前处理 dbcontext 。任何线索将不胜感激。谢谢！

```
 [TestMethod]
    public void CreatePostAddComment()
    {
        IQueryable<Post> thePost;
        using (var _context = new BlogRepository())
        {
            _context.AddPost(GetTestPost());
            var retrivePost = _context.GetPostByName("TestPost1");
            thePost = retrivePost;
        }

        foreach (var post in thePost)
        {
            using (var _dbContext = new BlogRepository())
            {
                _dbContext.AddComment(GetTestComment(post));
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T19:02:13.657

using 语句实际上是语法糖，它相当于：-

```
[TestMethod]
public void CreatePostAddComment()
{
    IQueryable<Post> thePost;
    {
        var _context = new BlogRepository();
        _context.AddPost(GetTestPost());
        var retrivePost = _context.GetPostByName("TestPost1");
        thePost = retrivePost;
        _context.Dispose();
       //Note, using is much better, because Dipose is called
       //even if there is an exception.
    }

    foreach (var post in thePost)
    {
        using (var _dbContext = new BlogRepository())
        {
            _dbContext.AddComment(GetTestComment(post));
        }

    }
} 
```

但是，您的代码存在几个关键问题，其中只有第一个是 Context Disposed Exception。

您关于正在处理的上下文的第一个问题是因为仅当您枚举实际的 IQueryable 时才会调用 EF 查询，在这种情况下，是在 foreach 中。换句话说，IQueryable 没有做任何工作并且是懒惰的。当 foreach 实际上需要 IQueryable 去获取它的信息时，此时上下文已经被释放。

其次，您不能对刚刚获得的姿势进行处理，因为您使用的是另一个上下文。EF 会抱怨 post 对象仍附加到旧上下文。这个问题将突出一个更普遍的模式。只要您的“工作单元”，您就应该保留您的上下文。一般来说，您在调用 DbContext.SaveChanges() 后进行处理。

这导致我发现你的第三个错误。您没有调用 DbContext.SaveChanges()。这段代码不会发生任何事情。您不会写入数据库，不会运行 EF 验证，除了即将超出范围的内存之外，什么都不会发生。

最后，您的测试方法正在产生副作用（假设它会成功保存）。这将导致进一步的痛点。解决此问题的一种方法是在测试之前开始事务，并在测试之后回滚。

我知道如果你想走这条路，MbUnit 会为你做交易逻辑。

总而言之，这就是我会做的……假设我了解您要实现的目标-

从风格的角度来看，我讨厌 CRUD 方法。像 GetPostByName 这样的方法，当你有 Linq 时。我遇到的问题包括需要维护更多代码（如果您切换到 nHibernate，则需要重新实现 GetPostByName）。其次，您接下来会发现您需要一个 GetPostByDescript，然后是 GetPostById，然后是 GetPostByDescriptionOrName ......等等......

PS。使用像 ThePost 这样的名称，我假设您是在单个实例之后....

```
[Rollback]
[TestMethod]
public void CreatePostAddComment()
{

    using(var  _context = new BlogRepository())
    {
        _context.AddPost(GetTestPost());
        _context.SaveChanges();
        var thePost = _context.Posts.First(x => x.Name =="TestPost1");
        _dbContext.AddComment(GetTestComment(post));
        _context.SaveChanges();
    }
} 
```

# selenium - 如何在黄瓜测试用例中点击回车键

> ID：14801267
> 
> 赞同：6
> 
> 时间：2013-02-10T18:45:20.723
> 
> 标签：selenium, cucumber, capybara

我需要在黄瓜测试用例中单击键盘的输入键。我使用了硒网络驱动程序。请告诉我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-10T19:54:33.253

您可以使用[键](http://selenium.googlecode.com/svn/trunk/docs/api/rb/Selenium/WebDriver/Keys.html)和[ActionBuilder](http://selenium.googlecode.com/svn/trunk/docs/api/rb/Selenium/WebDriver/ActionBuilder.html)：

```
page.driver.browser.key_down(:enter).key_up(:enter).perform 
```

或[send_keys](http://selenium.googlecode.com/svn/trunk/docs/api/rb/Selenium/WebDriver/Element.html#send_keys-instance_method)：

```
find(:id, 'my_id').native.send_keys(:enter) 
```

Capybara 目前不包含自己的按键 API。

# r - 将两列相互绘制，省略缺失值

> ID：14801275
> 
> 赞同：1
> 
> 时间：2013-02-10T18:46:15.487
> 
> 标签：r, plot, missing-data

这是我使用 dput() 的数据框：

```
structure(list(Year = 1900:1903, Top.10..income.share = structure(c(82L, 
81L, 76L, 75L), .Label = c("", "30,3", "30,65", "30,8", "31,3", 
"31,37", "31,38", "31,4", "31,5", "31,51", "31,52", "31,55", 
"31,62", "31,64", "31,66", "31,67", "31,69", "31,75", "31,77", 
"31,8", "31,81", "31,82", "31,85", "31,9", "31,98", "32,01", 
"32,03", "32,04", "32,05", "32,07", "32,11", "32,12", "32,2", 
"32,35", "32,36", "32,42", "32,43", "32,44", "32,5", "32,62", 
"32,64", "32,67", "32,72", "32,82", "32,87", "33,02", "33,22", 
"33,4", "33,69", "33,72", "33,76", "33,87", "33,95", "34,25", 
"34,4", "34,57", "34,62", "34,71", "35,49", "36,3", "36,48", 
"37,26", "37,3", "37,73", "37,77", "37,78", "37,84", "37,92", 
"38,01", "38,1", "38,2", "38,38", "38,4", "38,47", "38,52", "38,59", 
"38,6", "38,63", "38,84", "38,91", "38,99", "39,13", "39,31", 
"39,48", "39,6", "39,82", "39,9", "40,29", "40,54", "40,59", 
"40,75", "41,02", "41,16", "41,52", "41,73", "41,98", "42,12", 
"42,23", "42,36", "42,67", "42,76", "42,86", "42,95", "43", "43,07", 
"43,11", "43,26", "43,35", "43,39", "43,64", "43,76", "44,07", 
"44,17", "44,4", "44,43", "44,57", "44,67", "44,77", "44,94", 
"45,03", "45,16", "45,47", "45,5", "45,67", "45,96", "46,09", 
"46,3", "46,35", "46,54"), class = "factor")), .Names = c("Year", 
"Top.10..income.share"), row.names = c(NA, 4L), class = "data.frame") 
```

我的会话信息（）：

```
R version 2.15.0 (2012-03-30)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] de_DE.UTF-8/de_DE.UTF-8/de_DE.UTF-8/C/de_DE.UTF-8/de_DE.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

loaded via a namespace (and not attached):
[1] rstudio_0.97.248 tools_2.15.0 
```

我想要做的是根据 Top10 列绘制 Year 列。
但是由于有很多缺失值，所以图表看起来很糟糕。
到目前为止，这是我编写的用于绘制此图的代码。

```
require(stats)

tid_a = read.csv("tid-a.csv", header=TRUE, sep=";")
germany <- tid_a[1:111, ]
usa <- tid_a[112:210, ]

germany_year <- germany[, 2]
germany_top10 <- na.omit(germany[, 3])

plot(germany_year, germany_top10, type="l") 
```

我已经尝试了一些我在网上找到的示例来省略缺失值，但我是一个菜鸟，无法让它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T18:49:17.773

这个问题是不可[重现](http://tinyurl.com/reproducible-000)的，但这样的事情应该有效：

```
gdat <- na.omit(subset(germany,select=c(Year,Top10)))
plot(Top10~Year,data=gdat,type="l") 
```

（`subset`这种方式的使用相当罕见——`germany[,c("Year","Top10")]`更常见——但我喜欢它，因为它是可读的。更简单的版本是`plot(...,data=na.omit(germany))`，但它会省略数据框*任何*`NA`列中带有s 的行。）

# ruby - 如何使用 Ruby 检测 Windows XP？

> ID：14801279
> 
> 赞同：0
> 
> 时间：2013-02-10T18:46:27.267
> 
> 标签：ruby, operating-system, detection

使用 Ruby 开发游戏 atm，但由于游戏编码方式的性质，Windows XP 被证明是一个问题，因为可以进行各种调整以使您比其他玩家更快，所以我的意图是加载游戏检测您是否正在运行 Windows XP，如果是，则无法进一步加载。

这可能看起来很苛刻，但是 XP 相对于 Vista 或 Win7 等的优势是巨大的，而且是不平衡的。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:54:32.207

在这里您可以找到一些有关如何检测操作系统的解决方案：

[如何找到我的 Ruby 程序在哪个操作系统上运行？](https://stackoverflow.com/questions/170956/how-can-i-find-which-operating-system-my-ruby-program-is-running-on)

但我认为，它只会告诉你，它是否是 Windows。所以你必须做第二步：

如果是Windows，你可以调用系统命令`ver`来检测Windows版本（你可能知道，系统命令可以使用`-Symbol来调用）。

```
`ver` 
```

有关此命令的更多信息，请参见此处： http: [//www.windows-commandline.com/2009/01/find-windows-os-version-from-command.html](http://www.windows-commandline.com/2009/01/find-windows-os-version-from-command.html)

# java - 单个对象映射到多个对象以响应 Web 服务

> ID：14801280
> 
> 赞同：0
> 
> 时间：2013-02-10T18:46:44.120
> 
> 标签：java, web-services

我编写了一个 java 服务类并基于该类创建了一个 Web 服务（使用 eclipse Juno 和 Apache 作为 Web 服务器）。我的服务方法的返回类型是 ProductInfoOutput，内部由 ProductInfo 和 ResponseStatus 组成。但是当我在 WSDL 文件中看到时，我发现两个基于 ResponseStatus 的对象。我不知道为什么。也许在开发时我这样做了，但现在 ProductInfoOutput 只有一个 ResponseStatus 实例。您能否建议我如何从 WSDL 中删除这个额外的对象。以下是来自 WSDL 的部分。

```
<complexType name="ProductInfoOutput">
<sequence>
 <element name="productInfo" nillable="true" type="tns1:ProductInfo"/>
 <element name="responseStatus" nillable="true" type="tns1:ResponseStatus"/>
 <element name="response" nillable="true" type="tns1:ResponseStatus"/>
</sequence>
</complexType> 
```

服务等级：

```
ProductInfoOutput productInfoOutput;
DatabaseQueries query;

public ProductInfoOutput getProductInfo(String barcode) {
    productInfoOutput=new ProductInfoOutput();
    query=new DatabaseQueries();
    productInfoOutput=query.retrieveSingleProductByBarcode(barcode);
    return productInfoOutput;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:59:57.770

经过两天的浪费，我找到了问题的根本原因。项目中有一个 server-config.wsdd 文件，它是您第一次创建 Web 服务时自动创建的，即使您更新业务类也不会更新。我从 wsdd 手动删除了服务，并从业务类重新创建了 Web 服务。

# oracle10g - TOAD-修改物化视图选择查询而不丢弃

> ID：14801287
> 
> 赞同：2
> 
> 时间：2013-02-10T18:47:10.543
> 
> 标签：oracle10g, toad, materialized-views

有什么方法可以编辑 MVIEW 查询而不将其放入 TOAD。我不确定我们是否可以做到？如果不能，我可以以不影响表格内容的方式进行吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T03:26:03.883

您无法更改物化视图查询，您必须删除并重新创建它。

请参阅：[http ://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_2001.htm](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_2001.htm)

> 使用 ALTER MATERIALIZED VIEW 语句以下列一种或多种方式修改现有物化视图：
> 
> *   改变其存储特性
>     
>     
> *   更改其刷新方法、模式或时间
>     
>     
> *   改变其结构，使其成为不同类型的物化视图
>     
>     
> *   启用或禁用查询重写

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-03T06:35:52.197

正如 Jeffre Kemp 所指出的，您无法更改现有物化视图的查询。

但是，如果您预计将来需要进行更改，您可以选择以下方法之一：

*   使用完成所有繁重工作的中间视图；你的 MATERIALIZED VIEW 然后做一个简单的`SELECT * FROM myView`. 这允许您更改查询 - 但是，它不允许您在 MATERIALIZED VIEW 中添加/删除列
*   为您的物化视图使用预先构建的表格；这在逻辑上将保存内容的 TABLE 与用于更新内容的查询分开。现在，您可以删除 MATERIALIZED VIEW，根据需要从 TABLE 中添加/删除列，然后重新创建 MATERIALIZED VIEW
*   对查询 MATERIALIZED VIEW 的所有代码使用同义词；如有必要，使用 CTAS 创建一个备份表，将同义词指向此备份表，删除并重新创建您的 MATERIALIZED VIEW，将同义词指向 MATERIALIZED VIEW，然后删除您的备份表（我们就是这样做的）

# c++ - 哪种数据结构更好地用于查找句子是否由唯一字符组成？

> ID：14801288
> 
> 赞同：0
> 
> 时间：2013-02-10T18:47:11.467
> 
> 标签：c++, algorithm, data-structures, map

我正在尝试解决一项任务，但不确定我是否使用了合适的数据结构。我的任务是查找句子是否由唯一字符组成并因此返回布尔值。

这是我的功能：

```
bool use_map(string sentence) {
    map<int, string> my_map;

    for (string::size_type i = 0; i <= sentence.length(); i++) {
        unsigned int index = (int)sentence[i];    
        if (my_map.find(index) != my_map.end())
            return false;       
        my_map[index] = sentence[i];
    }

    return true;    
} 
```

我发现只有适合我的地图结构。也许我错过了什么？

也许在 ? 处使用动态数组之类的东西会更好`PHP`？

* * *

我正在尝试使用哈希表解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T18:51:56.740

一个非常简单（但相当耗费内存）的方法是：

```
bool use_map(const std::string& sentence)
{
    std::set<char> chars(sentence.begin(), sentence.end());
    return chars.size() == sentence.size();
} 
```

如果没有重复的字符，则字符串和集合的大小将相等。

@Jonathan Leffler 在评论中提出了一个很好的观点：句子通常包含几个空格，所以这将返回`false`。您需要过滤掉空格。不过，`std::set`应该是您选择的容器。

**编辑：**

这是一个没有额外内存的 O(n) 解决方案的想法。只需使用查找表来标记之前是否看到过该字符：

```
bool no_duplicates(const std::string& sentence)
{
    static bool table[256];
    std::fill(table, table+256, 0);

    for (char c : sentence) {

        // don't test spaces
        if (c == ' ') continue;
        // add more tests if needed

        const unsigned char& uc = static_cast<unsigned char>(c);
        if (table[uc]) return false;
        table[uc] = true;
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-10T18:53:35.407

其他答案建议`std::set`，这是一个解决方案。但是，他们复制里面的所有字符`std::set`，然后得到`set`. 你真的不需要这个，你可以避免它，使用`std::set::insert`. 就像是：

```
std::set< char > my_set;
for (std::string::size_type ii = 0; ii < sentence.size(); ++ii) 
{
    if( ! my_set.insert( sentence[ ii ] ).second )
    {
        return false;
    }
} 
```

这样，您将：

*   在第一个重复的字符上停止，您将不会复制整个字符串（不必要）
*   您将避免`int`代码中不必要的强制转换
*   将节省内存 - 如果你真的不需要你`std::map< int, std::string >::second`

另外，请确保您需要“计算”所有`char`s 或者您想跳过其中一些（如空格、逗号、问号等）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-10T18:51:45.660

我想一个简单的方法是将所有字符存储在一个不允许重复的关联容器中，例如`std::set`, 并检查它是否包含单个值：

```
#include <set>
#include <string>

bool has_unique_character(std::string const& str)
{
    std::set<char> s(begin(str), end(str));
    return (s.size() == str.size());
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-10T19:23:12.803

那这个呢？当然还有案例问题...

```
bool use_map(const std::string& sentence)
{
    std::vector<bool> chars(26, false);
    for(std::string::const_iterator i = sentence.begin(); i != sentence.end(); ++i) {
        if(*i == ' ' || *i - 'a' > 25 || *i - 'a' < 0) {
            continue;
        } else if(chars[*i - 'a']) {
            return false;
        } else {
            chars[*i - 'a'] = true;
        }
    }

    return true;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-10T19:32:55.287

对字符进行排序，然后查找两个字符相等的相邻字母字符对。像这样的东西：

```
std::string my_sentence = /* whatever */
std::sort(my_sentence.begin(), my_sentence.end());
std::string::const_iterator it =
    std::adjacent_find(my_sentence.begin(), my_sentence.end());
while (it != my_sentence.end() && isalpha((unsigned char)*it)
    it = std::adjacent_find(++it, my_sentence.end());
if (it == my_sentence.end())
    std::cout << "No duplicates.\n";
else
    std::cout << "Duplicated '" << *it << "'.\n"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-10T19:13:45.653

如果允许使用额外的内存，请使用**哈希表**：
遍历数组，检查当前元素是否已经被哈希。如果是，您发现了重复。如果不是，则将其添加到哈希中。这将是**线性**的，但需要额外的内存。

如果原始序列元素的范围非常小，那么您可以简单地拥有一个范围大小的数组，而不是散列，并在**桶排序**中做类似的事情。例如

```
bool hasDuplicate( string s )
{
   int n = s.size();
   vector<char> v( 256, 0 );
   for( int i = 0; i < n; ++i )
      if( v[ s[ i ] ] ) // v[ hash( s[i] ) ] here in case of hash usage
         return true;
      else
         v[ s[ i ] ] = 1; // and here too
   return false;
} 
```

最后，如果您不允许使用额外的内存，您可以**对其进行排序**并检查两个相邻元素是否在一次传递中相等。这将花费**O(nlogn)**时间。不需要集合或地图:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-10T20:20:03.123

这是最快的解决方案：

```
bool charUsed[256];
bool isUnique(string sentence) {
    int i;
    for(i = 0; i < 256; ++i) {
        charUsed[i] = false;
    }

    int n = s.size();
    for(i = 0; i < n; ++i) {
        if (charUsed[(unsigned char)sentence[i]]) {
            return false;
        }
        charUsed[(unsigned char)sentence[i]] = true;
    }
    return true;
} 
```

# jquery - 使用一种条件/ BPOPUP 插件在页面加载时加载弹出窗口

> ID：14801290
> 
> 赞同：0
> 
> 时间：2013-02-10T18:47:23.927
> 
> 标签：jquery, popup, load, bpopup

我需要帮助来解决我遇到的问题。我需要有一个弹出窗口来显示一个条件的信息。我成功实现了它，但它需要单击一个按钮。我需要的是，如果它验证一个条件，它会在页面加载后出现。

这是代码，在此先感谢。

```
<?php 
$set = 0;

if( $this->dx_auth->is_logged_in())
{
    $userid = $this->dx_auth->get_user_id();
    if( $list->user_id == $userid )
    {
        $set = 1;
    }
}
?>

 <?php if($set): ?>
<div id="new_hosting_actions">
<h2> <?php echo anchor ('rooms/edit/'.$room_id,translate("Edit this Listing")); ?> <span    class="smaller"> <?php echo translate("Upload photos, change pricing, edit details"); ?>   </span> </h2>
 <hr class="toolbar_separator" />
 <h2> <?php echo anchor ('calendar/single/'.$room_id,translate("Calendar")); ?><span class="smaller"> <?php echo translate("Change the availability of").' '.'"'.$title.'"'; ?>  </span> </h2>
 <hr class="toolbar_separator" />
<h2> <?php echo anchor('users/edit', translate("Update Your Profile"))?> <span class="smaller"> <?php echo translate("Upload a new profile image and change your profile");?> </span> </h2> 
```

```
 <script type="text/javascript"> 

   ;(function($) {
        $(function() {

        $('#my-button2').bind('click', function(e) {
        e.preventDefault();
        $('.element_to_pop_up2').bPopup({
        closeClass:'close',
        fadeSpeed: 'slow', //can be a string ('slow'/'fast') or int
        followSpeed: 1500, //can be a string ('slow'/'fast') or int
        modalColor: 'black',
        contentContainer:'.content',

         zIndex: 1,
         modalClose: true
            });
        });
     });
 })(jQuery);
  </script>
 <button id="my-button2" type="button" class="button5">POP IT UP</button>

        <div id="element_to_pop_up" class="element_to_pop_up2" style="display:none">
          <div id="status">

         <div id="dates" class="book_it_section" >
          <input id="hosting_id" name="hosting_id" type="hidden" value="<?php echo $room_id; ?>" />
            <h2>Send Message </h2>

            <div class="messagearea">

            </div>
               <p><div class="border"></div></p>
            <div class="send">           
            </div>
         </div>         
        </div>
        <a class="close" href="#"><img src="<?php echo base_url(); ?>images/fancy_close.png" alt="close" width="45" height="45" /> </a>       
      </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T18:49:16.447

这不能使用实际的弹出窗口来完成；如果不是由用户的操作（例如单击）触发，浏览器将阻止它们打开。

但是，您可以改用叠加层。毫无疑问，您可以将许多 jQuery 插件用于叠加，但我对任何一个都不够熟悉，无法提供建议。

# c++ - 纹理坐标不对应于 cv::Mat 坐标

> ID：14801291
> 
> 赞同：1
> 
> 时间：2013-02-10T18:47:38.777
> 
> 标签：c++, opengl, opencv, coordinates

我想要的是向相机显示一个标记，并在找到后用图像覆盖它，例如：（让我们调用**image**）

![在此处输入图像描述](../Images/3115d7205e85a5c1f233b0953d657748.png)

我要做的是：

1）我用opencv打开我的网络摄像头。我加载**图像**。我检测到捕获帧中的标记。计算标记相对于**frame**的坐标。

```
#define WIDTH              600 //opengl window width
#define HEIGHT             440 //opengl window height
VideoCapture cap;
GLint window;
GLuint *textures = new GLuint[2];
vector <Point2f> coord(4);
int flag =0;
// Capture next frame
    Mat frame;
    cap >> frame;
    flip(frame,frame,1);
    aruco::CameraParameters CamParam;
    aruco::MarkerDetector MDetector;
    std::vector <Marker> Markers;
    float MarkerSize=170;

    //marker detection
    CamParam.readFromXMLFile("parametri_camera.yml");
    CamParam.resize( frame.size());
    MDetector.detect(frame, Markers, CamParam, MarkerSize);
    Mat image = imread("Immagine.png");
    if (Markers.size()!=0) flag =1;
    else flag =0;
    for (int i=0; i< Markers.size(); i++) {
        coord_marker(frame, Markers[i], CamParam, coord);
    } 
```

2）我将**图像**和**帧**转换/转换为两个纹理。

```
glHint(GL_PERSPECTIVE_CORRECTION_HINT,GL_NICEST);
    glBindTexture(GL_TEXTURE_2D, textures[0]);
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_NEAREST);
    glTexImage2D(GL_TEXTURE_2D, 0, 4,frame.cols, frame.rows, 0, GL_RGB,GL_UNSIGNED_BYTE, frame.data);

glHint(GL_PERSPECTIVE_CORRECTION_HINT,GL_NICEST);
    glPixelStorei(GL_UNPACK_ALIGNMENT, 1);
    glBindTexture(GL_TEXTURE_2D, textures[1]);
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_NEAREST);
    glTexImage2D(GL_TEXTURE_2D, 0, 4,image.cols, image.rows, 0, GL_RGB,GL_UNSIGNED_BYTE, image.data); 
```

3）我展示了两个纹理，它们`textures[1]`的位置与标记的坐标相对应。

```
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glEnable(GL_TEXTURE_2D);

    // Set Projection Matrix
    glMatrixMode (GL_PROJECTION);
    glLoadIdentity();
    gluOrtho2D(0, WIDTH, HEIGHT, 0); 

    // Switch to Model View Matrix
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    glBindTexture(GL_TEXTURE_2D, textures[0]);
    // Draw a textured quad
    glBegin(GL_QUADS);
    glTexCoord2f(0.0f, 0.0f); glVertex2f(0.0f, 0.0f);
    glTexCoord2f(1.0f, 0.0f); glVertex2f(WIDTH, 0.0f);
    glTexCoord2f(1.0f, 1.0f); glVertex2f(WIDTH, HEIGHT);
    glTexCoord2f(0.0f, 1.0f); glVertex2f(0.0f, HEIGHT);
    glEnd(); 

    if(flag ==1) {
    glBindTexture(GL_TEXTURE_2D, textures[1]);
    glBegin(GL_QUADS);
    glTexCoord2f(0.0f, 0.0f); glVertex2f((GLfloat)((coord[1].x)),(GLfloat)(coord[1].y));
    glTexCoord2f(1.0f, 0.0f); glVertex2f((GLfloat)((coord[2].x)),(GLfloat)(coord[2].y));
    glTexCoord2f(1.0f, 1.0f); glVertex2f((GLfloat)((coord[3].x)),(GLfloat)(coord[3].y));
    glTexCoord2f(0.0f, 1.0f); glVertex2f((GLfloat)((coord[0].x)),(GLfloat)(coord[0].y)); 
    glEnd();
    }
    glFlush();
    glutSwapBuffers(); 
```

这是结果：

![在此处输入图像描述](../Images/1d341ea99277e0d985cc80a26b24eb7a.png)

如您所见，`textures[1]`相对于标记移动。我错过了什么？看起来我需要做一些从 Mat 坐标到纹理坐标的转换/转换。但是怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:43:40.567

我在我的代码中发现了错误。

设置 openGL 窗口大小错误（窗口大小小于捕获的帧）。我必须使用捕获的帧（640x480）的大小来调整窗口的大小。这样，Mat 框架中标记的坐标就与`textures[1]`.

```
#define WIDTH              640 //opengl window width and captured frame width
#define HEIGHT             480 //opengl window height and captured frame height 
```

![在此处输入图像描述](../Images/60b72798cf88a0be5c88ab4b770a5900.png)

希望这会对某人有所帮助！

# vim - 向后删除直到 Vim 中的字符

> ID：14801293
> 
> 赞同：25
> 
> 时间：2013-02-10T18:47:58.183
> 
> 标签：vim, keyboard-shortcuts

`d``t`删除直到下一个逗号。

```
a, b, c[,] d, e

dt,

a, b, c[,] e 
```

为了得到：反向执行相同操作的命令是什么：

```
a, b, d, e 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-02-10T18:52:50.567

通常在 Vim 中，大写字母执行相反方向的动作。因此`d``T``,`将向后搜索。但是，您需要使用`2``d``T``,`以便删除第一个逗号。

出于同样的原因，您需要使用`d``f``,`而不是`d``t``,`删除给定示例中的逗号。

# php - 使用 include 重写 URL 不会加载样式表

> ID：14801302
> 
> 赞同：0
> 
> 时间：2013-02-10T18:48:31.047
> 
> 标签：php

我所有的文件都在 public_html 文件夹中。我用 .htaccess 重写了页面的 url，例如，`mywebsite.com/balance.php`looks的 url `mywebsite.com/myaccount/balance`。

我可以包含一个文件：`<?php include 'header_login.php'; ?>,`但它没有样式表。

这个 .php 文件和 .css 文件都在 public_html 文件夹中。

如果我将 url 重写为`mywebsite.com/balance`它的工作原理。

如何使用 url 中的这个“虚拟”文件夹进行这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T18:50:57.083

简单的。
始终在 HTML 和 CSS 文件中使用**绝对路径。**
绝对路径始终从`/`指向 Web 服务器根目录开始。
所以，让你的css路径像

```
/css/styles.css 
```

管他呢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T18:55:12.370

样式表的地址可能不正确。您必须使用绝对路径。

如果你的结构是这样的：

```
/balance.php
/style.css 
```

在您的 balance.php 中，您使用：`<link rel="stylesheet" href="style.css">`

并将其重写为：`/myaccount/balance`

浏览器将在 中查找 style.css 文件`/myaccount/balance/style.css`。

只需将其更改为**绝对路径**就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T18:53:57.820

您可以定义您的基本网址 `define ("BASE_URL","http://www.mysite.com");` 并添加`BASE_URL`样式表，例如

```
<link rel="stylesheet" type="text/css" href="<?php echo BASE_URL; ?>/style.css"> 
```

# android - 未找到 Marmalade Sdk Gui

> ID：14801304
> 
> 赞同：-1
> 
> 时间：2013-02-10T18:49:06.223
> 
> 标签：android, ios, marmalade

我是 Marmalade SDK 上的新手机游戏开发人员。我有一个由 Marmalade 制作的游戏示例。尝试运行它时出现此错误。请帮助！

[http://s4.postimage.org/c58430drx/Capture.png](http://s4.postimage.org/c58430drx/Capture.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T08:30:05.053

它表明您已经包含了一个名为 GUI 的子项目，但 marmalade 找不到它。在问题中发布 MKB 的内容以识别问题。

# java - 调用方法时java ArrayList始终为空

> ID：14801306
> 
> 赞同：1
> 
> 时间：2013-02-10T18:49:15.907
> 
> 标签：java, arraylist, size, zero, empty-list

我的程序很简单。我有一个有 2 种方法的类。我有另一个类，其中调用了这两种方法。当第一个方法被调用时，arraylist 被初始化并填充了一些对象，然后调用第二个方法简单地告诉 arraylist 的大小并打印出来。我不明白为什么在调用第二种方法时我总是得到一个空的。但是，当我在第一种方法中打印数组时，我得到了大小及其所有元素。Arraylist 是公开的.. 请看一下代码..

**在第 1 课**

```
Items initialize = new Items();
initialize.init(); 
Items view = new Items();
view.viewItems(); 
```

**在第 2 班**

```
public class Items {

public String id;
public String name;
public String details;
public String stock;

public ArrayList<Items> myList = new ArrayList<Items>();

public void init(){

    Items item1 = new Items();

item1.id = "0023";
item1.name = "Round Table";
item1.details = "Brown, high quality wood blah blah..";
item1.stock = "34";
myList.add(item1);

if(myList.size()==0){
        System.out.println("There are no products to display");
    }

    Iterator<Items> iterator = myList.iterator();
    System.out.println(myList.size());
            System.out.println("Products Available:");
    while(iterator.hasNext()){
        Items current = iterator.next();

        System.out.println("\nID: " +current.id + "\nTitle: "+current.name+"\nDescreption: "+current.details+"\nAmount: "+current.stock);

}

public void viewItems() {

int size  = myList.size();

if(myList.size()==0){
        System.out.println("There are no products to display");
    }

    Iterator<Items> iterator = myList.iterator();
    System.out.println(myList.size());
            System.out.println("Products Available:");
    while(iterator.hasNext()){
        Items current = iterator.next();

        System.out.println("\nID: " +current.id + "\nTitle: "+current.name+"\nDescreption: "+current.details+"\nAmount: "+current.stock);

} 
```

因此，结果是，当调用第一种方法时，我可以看到添加或删除产品的项目和尺寸编号（已经进行了很多实验），而在调用另一种方法时，我总是得到 0 的尺寸和空数组。我已经尝试过使用公共字符串，并且方法在调用时会更改字符串。所以我猜它与 ArrayList.. 谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T18:51:23.663

您正在创建一个`new instance of Items`然后调用`viewItems()`方法。您必须在调用的同一实例上调用 viewItems()`init()`

```
Items initialize = new Items();
initialize.init(); 
initialize .viewItems(); 
```

# ruby-on-rails - Rails 查询：nil:NilClass 的未定义方法

> ID：14801311
> 
> 赞同：0
> 
> 时间：2013-02-10T18:49:30.553
> 
> 标签：ruby-on-rails, querying

在我的 Rails 应用程序中，我的项目有很多步骤，每个步骤都有很多图像。

我正在尝试使用有关步骤的信息标记指向有关每个步骤的页面的链接，特别是步骤的名称和与该步骤关联的默认图像。

```
<%= link_to "", project_step_path(@project, i), :class=> "dot", 
data: {title: steps.find_by_number(i).name, 
image: steps.find_by_number(i).images.order("position ASC").first.file} %> 
```

标题数据标签确实返回了步骤的名称，但我的图像数据标签出现错误。当我在 Rails 控制台中尝试它时，它会返回图像的文件路径，但是当我尝试在我的应用程序中实现它时，我收到错误**undefined method `file' for nil:NilClass**。

当我从我的图像标签中删除“文件”时（所以它是图像：steps.find_by_number(i).images.order("position ASC").first），并返回每个链接的图像数据标签是什么，我得到[对象对象]。

我怎样才能让它返回正确的查询结果？

这是我的步骤控制器：

```
class StepsController < ApplicationController

  before_filter :get_project

  def show
    @step = @project.steps.find_by_number(params[:id])
    @image = Image.new
    @images = @step.images.order("position")
    @steps = @project.steps.order("number")
    @numSteps = @steps.count

    respond_to do |format|
      format.html # show.html.erb
      format.json { render :json => @step }
    end
  end
  private
  # get_project converts the project_id given by the routing
  # into an @project object
  def get_project
    @project = Project.find(params[:project_id])
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:01:42.017

原因是以下整个事情变得零

```
images.order("position ASC").first 
```

最可能的问题可能是当您选择 step by 时`i`，可能会有一个没有图像的数据集

为避免出现此错误，您可以做的一件事是使用`try`

```
steps.find_by_number(i).images.order("position ASC").first.try(:file) 
```

# c++ - OpenCV + WebCam 导致崩溃（写入期间内存访问冲突）

> ID：14801312
> 
> 赞同：0
> 
> 时间：2013-02-10T18:49:34.637
> 
> 标签：c++, opencv, camera

最近安装了 OpenCV 2.4.3 来尝试做一些视频捕捉和对象区分。但遗憾的是，每次通过网络摄像头捕获视频的尝试都会导致内存访问冲突。

我正在使用 Visual Studio 2010 (Win 7 x86) 和网络摄像头“A4 Tech USB2.0”。首先我认为问题可能出在相机本身，但后来我尝试使用`videoInput.h`lib 从相机获得任何响应，仍然没有结果。（Skype 等其他应用程序可以看到（并使其工作）没问题）。

这是一个代码（几乎是书本上的）：

```
 <pre>
    #include "cv.h"
    #include "highgui.h"
    #include "stdlib.h"
    #include "stdio.h"

    int main(int argc, char* argv[])
    {
    CvCapture* capture = cvCreateCameraCapture(CV_CAP_ANY); //cvCaptureFromCAM( 0 );
    assert( capture );

    double width = cvGetCaptureProperty(capture, CV_CAP_PROP_FRAME_WIDTH);
    double height = cvGetCaptureProperty(capture, CV_CAP_PROP_FRAME_HEIGHT);
    printf("[i] %.0f x %.0f\n", width, height );

    IplImage* frame=0;

    cvNamedWindow("capture", CV_WINDOW_AUTOSIZE);

    printf("[i] press Esc for quit!\n\n");

    if(capture != NULL)
    {
      while(true)
     {
       frame = cvQueryFrame( capture ); //it crashes here all the time

        cvShowImage("capture", frame);

       char c = cvWaitKey(35);
       if (c == 27) 
       { 
        break;
       }
      }
     }

     cvReleaseCapture( &capture );
     cvDestroyWindow("capture");
     return 0;
     }
</pre> 
```

阅读具有相同问题的其他主题并尝试解决一些问题：（添加捕获之间的间隔`cvWaitKey(35)`，添加检查捕获设备是否真的存在`if (capture != NULL)` ）但仍然无法理解为什么会继续发生这种情况。

更新：我最终得到的是带有 OpenCVwindow 和窗口本身的生成属性的控制台（看起来是灰色背景）。和内存访问冲突错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:39:14.607

经过一番思考和测试，找到了解决方案。

看来，DirectShow 上的 DirectVobSub 过滤器以某种方式阻止了我以编程方式访问我的相机（通过 OpenCV 和 VideoInput 库）。每次我运行我的程序并访问我的相机时，它都会创建一个自己的新实例，这会导致访问内存冲突）。从我的电脑上卸载它后，代码开始工作。

# linux - 查找 -type f 有限制

> ID：14801313
> 
> 赞同：18
> 
> 时间：2013-02-10T18:49:56.263
> 
> 标签：linux, unix, find

我有以下查找命令来查找卷中的所有文件：

```
find ./ -type f 
```

我将如何排除所有以 开头的文件`.`？另外，我确实想包含以下**文件夹**，`.`例如：

*   包括`.Trashes/file.php`
*   不包括`folder/.hidden_file.php`

什么是正确的`find`命令？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-10T18:54:30.327

要排除名称以 开头的所有文件`.`：

```
find ./ -type f ! -name '.*' 
```

这将在所有目录中搜索（即使它们的名称以点开头），从当前目录下降，查找名称不以点 ( `! -name '.*'`) 开头的常规文件。

# matlab - 如何将此代码转换为 MATLAB 中的函数，以便我可以通过调用它来使用它

> ID：14801314
> 
> 赞同：-1
> 
> 时间：2013-02-10T18:49:59.490
> 
> 标签：matlab

% 代码从 Lathi MS2P4 pg 232 的 Signals and Systems 略微修改。

如何使此代码成为函数？这样我就可以“调用”它来使用它。而不是一遍又一遍地粘贴整个事情。这只是两个函数的卷积动画。

```
figure(1) % Create figure window and make visible on screen 
x = @(t) cos(2*pi*3*t).* u(t);
h = @(t) u(t)-u(t-1);
dtau = 0.005;
tau = -1:dtau:4;
ti = 0;
tvec = -1:0.1:5;
y = NaN*zeros(1,length(tvec)); % Pre-allocate memory
for t = tvec,
    ti = ti + 1; % Time index
    xh = x(t-tau).*h(tau);
    lxh = length(xh);
    y(ti) = sum(xh.*dtau); % Trapezoidal approximation of integral
    subplot(2,1,1)
    plot(tau,h(tau),'k-',tau,x(t-tau),'k--',t,0,'ok')
    axis([tau(1) tau(end) -2.0 2.5])
    patch([tau(1:end-1);tau(1:end-1);tau(2:end);tau(2:end)],...
        [zeros(1,lxh-1);xh(1:end-1);xh(2:end);zeros(1,lxh-1)],...
        [0.8 0.8 0.8],'edgecolor','none')
    xlabel('\tau')
    legend('h(\tau)','x(t-\tau)','t','h(\tau)x(t-\tau)')
    c = get(gca,'children');
    set(gca,'children',[c(2);c(3);c(4);c(1)]);
    subplot(2,1,2)
    plot(tvec,y,'k',tvec(ti),y(ti),'ok')
    xlabel('t')
    ylabel('y(t) = \int h(\tau)x(t-\tau) d\tau')
    axis([tau(1) tau(end) -1.0 2.0])
    grid
    drawnow
%   pause
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T19:03:12.103

您可以使用 Matlab 的，如此[处](http://www.mathworks.es/help/matlab/ref/function.html)`function`所述

所以，你必须在顶部写上“function yourFunctionName”，然后你可以使用它的名字来调用它，`yourFunctionName`在这种情况下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T20:53:38.103

以下是适用于您的确切代码、简单的函数定义以及`u(t)`OP 中缺少的附加内容：

```
figure(1) % figure window outside function
u = @(t)heaviside(t); % define step function
x = @(t) cos(2*pi*3*t).* u(t);
h = @(t) u(t)-u(t-1);
dtau = 0.005;

convol_anime(x, h, dtau); % pass function handles + parameters 
```

您已经定义的地方：

```
function convol_anime(x, h, dtau)

tau = -1:dtau:4; ti = 0; tvec = -1:0.1:5;
y = nan*zeros(1,length(tvec)); 
... 
```

# c# - 任务完成

> ID：14801317
> 
> 赞同：14
> 
> 时间：2013-02-10T18:50:04.810
> 
> 标签：c#, multithreading, task, threadpool

我有一个创建多个任务的循环，如下所示。当每个任务完成时，如何更新屏幕（在包含一些数据的文本框中添加新行）？

如何检测所有任务何时完成？

**C# 代码**

```
 for (int i = 0; i < int.Parse(radTextBoxFloodRequests.Text); i++)
 {
      int x = i;
      // Create a task and supply a user delegate by using a lambda expression. 
      var taskA = new Task(() => TaskRequest(int.Parse(radTextBoxFirstNumber.Text), int.Parse(radTextBoxSecondNumber.Text), int.Parse(radTextBoxFloodDelay.Text), x));
      // Start the task.
      taskA.Start();
 }

 private void TaskRequest(int number1, int number2, int delay, int count)
 {
      // Some long running method
 } 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-10T18:54:22.307

您可以使用[`ContinueWith()`](http://msdn.microsoft.com/en-us/library/dd270696.aspx)：

> *“创建一个在目标任务完成时异步执行的延续。”* - MSDN

```
Task t = new Task(() => Console.WriteLine("")).ContinueWith(task => Console.Writeline("Continue With"), 
                                                            TaskScheduler.FromCurrentSynchronizationContext()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T19:05:20.977

你在找`Parallel.ForEach()`吗？

```
 [Test]
    public void ParallelTasks()
    {
        var strings = new List<string> {"task1", "task2", "task3"};

        Parallel.ForEach(strings, str => Console.WriteLine(str + "is done"));

        // All your parallel tasks are executed now
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T18:58:12.247

我建议您使用 3 个简单结构的组合：

*   一个简单的`int numActiveTasks`，即在任务创建时递增`InterlockedIncrement(ref numActiveTasks)`，即紧接在任务结束时，即在函数结束时`taskA.Start()`递减`InterlockedDecrement(ref numActiveTasks)``TaskRequest(...)`
*   a `ManualResetEvent`，即在任务开始之前复位，并在计数器递减**后在任务结束时发出信号**
*   一个线程，`WaitOne()`位于 上`ManualResetEvent`，然后读取`numActiveTasks`

这给你

*   完成单个任务的通知
*   完成所有任务的通知 (numActiveTasks<=0)

这样做的主要优点是，您对通知发生在哪个线程上具有主权。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-20T22:53:05.160

扩展用户 12345678 的答案，您可以执行以下操作。

```
 private void RunTasks()
    {
        Dictionary<string, string> dict = new Dictionary<string, string>();

        List<Task> tasks = new List<Task>();
        foreach (KeyValuePair<string,string> kvp in dict)
        {
            Console.WriteLine("Executing task " + kvp.Key + " ...");
            Task t = new Task(() => MyMethod(kvp.Key, kvp.Value));
            tasks.Add(t);
            t.Start();
            t.ContinueWith(task => Console.WriteLine(kvp.Key + " completed"));

        }

        Console.WriteLine("Waiting tasks to complete...");
        Task.WaitAll(tasks.ToArray());
        Console.WriteLine("All tasks completed...");
    }

    private void MyMethod(string arg1, string arg2)
    {

    } 
```

# php - 从 $.ajax 调用中检索参数的问题

> ID：14801320
> 
> 赞同：0
> 
> 时间：2013-02-10T18:50:40.693
> 
> 标签：php, jquery, pdo

嘿伙计们，我有以下 $.ajax 调用：

```
$.ajax({
        type: "POST",
        dataType: "json",
        url: '/pcg/popups/getNotes.php',
        data:
        {
            'nameNotes': notes_name.text(),

        },
        success: function(response) {
            $('#notes_body').text(response.the_notes);
            alert(response.the_notes);

        }
)}; 
```

现在专注于`data:` 假设我发送了“BillCosby”。这将被发送到指定的文件，我在该文件中有这个：

```
$username_notes = $_POST['nameNotes']; 
```

现在假设我只是让 $username_notes 像这样在 json 中返回......

```
$returnArray = array( 'the_notes' => $username_notes );

echo json_encode($returnArray); 
```

这将起作用，响应将是 BillCosby。现在，当我尝试使用 PDO 从我的 MySQL 数据库中获取 BillCosby 的值时，它将返回 null ....在显示整个文件的代码之前，我只想明确 PDO 有效完美，如果我给变量 $username_notes 'BillCosby' 的直接值，我会完美地运行数据库，如果我有 $_POST['nameNotes']; 它只会返回 null；在前。

getNotes.php：

```
$username_notes = $_POST['nameNotes'];

grabNotes($username_notes);

function grabNotes($xusername)
{   
    .....

    $newUser = $xusername;

    try {  
      # MySQL with PDO_MYSQL  
      $DBH = new PDO("mysql:host=$hostname;dbname=$database", $username, $password);  
      $DBH->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );

    }  
    catch(PDOException $e) { 
        echo "I'm sorry, I'm afraid I can't do that.";  
        file_put_contents('PDOErrors.txt', $e->getMessage(), FILE_APPEND);   
    }

    $sql = "SELECT notes FROM csvdata WHERE username = :username";
    $getmeminfo = $DBH->prepare($sql);
    $getmeminfo->execute(array(':username' => $newUser));
    $row = $getmeminfo->fetch(PDO::FETCH_ASSOC);
    $notes = $row['notes'];

    $returnArray = array( 'the_notes' => $row['notes'],);

    echo json_encode($returnArray);

    $DBH = null;

} 
```

所以我的问题是，为什么我不能从 PDO 语句中取回返回值？如果我在 $.ajax 文件调用的文件中告诉 PDO 语句名称 - 'BillCosby'，它将完美运行。但如果我通过 $_POST 从 $.ajax 获取值，它将不起作用并返回 null。有趣的是我可以返回与发送的相同的值。

谢谢你们的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T19:00:47.703

尝试修剪它：

```
$username_notes = trim( $_POST['nameNotes'] ); 
```

有时字符串中的空格会导致这种错误，而且很难发现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T20:00:17.743

我经常需要添加？callback=?。因此，您的 JQuery ajax 请求将如下所示：

```
$.ajax({
    type: "POST",
    dataType: "json",
    url: '/pcg/popups/getNotes.php?callback=?',
    data:
    {
        'nameNotes': notes_name.text(),

    },
    success: function(response) {
        $('#notes_body').text(response.the_notes);
        alert(response.the_notes);

    }
)}; 
```

此外，最好使用 jQuery.getJSON 方法。

# c# - 提交 Ajax.Beginform 后更新部分视图

> ID：14801322
> 
> 赞同：9
> 
> 时间：2013-02-10T18:51:00.477
> 
> 标签：c#, ajax, asp.net-mvc, asp.net-mvc-4, partial-views

我是 .NET mvc 的新手。

在“DisplayThings”视图中，我有类似的内容：

```
@foreach (var thing in Model)
{
    @Html.Partial("DisplayPartial", thing)
} 
```

在部分视图“DisplayPartial”中，我有

```
@using (Ajax.BeginForm("Afunc", new AjaxOptions ()))
{
    @Html.EditorFor(model => model.AstringThing)
    @Html.EditorFor(model => model.AintThing)

    <input type="submit" name="submit" value="Ajax Post" />
} 
```

目前“Afunc”-Action 将模型保存到数据库，然后重定向到控制器操作以从数据库中检索所有“事物”并呈现整个“显示事物”视图。

我的问题是：当我按下其中一个提交按钮时（列表中的每个“事物”都有一个提交按钮）。我只想重新加载/反映我的更改的部分视图。我不想重新加载整个“Displaythings”视图。我该怎么做呢？如果我只返回一个局部视图，我会丢失除局部视图之外的所有内容。

如果这是一个不好的方法，请给我指示。

**更新：**

当我在新页面中呈现部分视图时，我仍然做错了。我的控制器：

```
public ActionResult Afunc(ThingModel thingmodel)
{
    // do

    return PartialView("DisplayPartial", thingmodel);
} 
```

我尝试过使用 UpdateTargetId 和 onsuccess 都具有相同的结果（新页面）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-10T19:00:25.237

在`AjaxOptions`您现在只是传递的那个中，您可以使用属性`new AjaxOptions`指定目标元素：`UpdateTargetId`

```
<div id="unique_thing_id">
@using (Ajax.BeginForm("Afunc", new AjaxOptions { UpdateTargetId = 'unique_thing_id' }))
{    
}
</div> 
```

上面，每个“事物”都具有唯一 id 的容器用 表示`<div id="unique_thing_id">`。这将替换为请求的响应。更改`Afunc`为仅渲染特定的“事物”部分。

# javascript - SSL 证书 Socket.io

> ID：14801323
> 
> 赞同：4
> 
> 时间：2013-02-10T18:51:17.680
> 
> 标签：javascript, node.js, ssl, socket.io

我创建了自己的 Livechat，它工作正常，但在我尝试添加我的 SSL 证书后，它不再正常工作。

我尝试了不同的代码。

```
var fs = require('fs');
var express = require("express");

var options = { 
    key:  fs.readFileSync('ca.key'), 
    cert: fs.readFileSync('ca.crt')
}; 

var expres = express()
  , app = require('https').createServer(options, expres)
  , io = require('socket.io').listen(app, { });

app.listen(8080); 
```

和

```
var fs = require('fs');
var express = require("express");

var options = {
    key:    fs.readFileSync('ca.key'),
    cert:   fs.readFileSync('ca.csr'),
    ca:     fs.readFileSync('ca.crt'),
    requestCert:        true,
    rejectUnauthorized: false
};

var expres = express()
  , app = require('https').createServer(options, expres)
  , io = require('socket.io').listen(app, { });

 app.listen(8080); 
```

这三个文件与内容一起存在。（ca.key、c​​a.csr 和 ca.crt）

有时我得到一个 107 (ERR_SSL_PROTOCOL_ERROR) 或者有时服务器甚至没有启动。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T18:33:17.320

如果您检查 https 服务器 API [http://nodejs.org/api/https.html#https_class_https_server](http://nodejs.org/api/https.html#https_class_https_server)。你会发现它是 tls.Server 的子类

```
Class: https.Server
This class is a subclass of tls.Server and emits events same as http.Server. 
```

在检查 tls.server API [http://nodejs.org/api/tls.html#tls_tls_createserver_options_secureconnectionlistener](http://nodejs.org/api/tls.html#tls_tls_createserver_options_secureconnectionlistener)时，您会看到 tls 或 https 服务器需要什么：

```
key: A string or Buffer containing the private key of the server in PEM format. (Required)
cert: A string or Buffer containing the certificate key of the server in PEM format. (Required) 
```

由于您仅将上述两个用作一个示例。您应该使用所需的 PEM 格式对其进行验证/测试。您可以使用此处给出的说明创建它[http://nodejs.org/api/tls.html#tls_tls_ssl](http://nodejs.org/api/tls.html#tls_tls_ssl)

```
openssl genrsa -out ryans-key.pem 1024
openssl req -new -key ryans-key.pem -out ryans-csr.pem
openssl x509 -req -in ryans-csr.pem -signkey ryans-key.pem -out ryans-cert.pem 
```

在此之后，您可以检查其他选项是否是罪魁祸首，在使用上述证书进行测试时将其删除。

```
//requestCert:        true,  
//rejectUnauthorized: false 
```

# javascript - JavaScript：split() 但保留逗号、点、其他分隔符

> ID：14801324
> 
> 赞同：2
> 
> 时间：2013-02-10T18:51:21.487
> 
> 标签：javascript, arrays

我正在尝试解析作为引号的字符串。所以基本上它看起来像这样：

```
quote.split(/[\s.,]+/) 
```

这完美地工作并按预期返回一个数组。但由于这是一个引用，我不想松开“，”，而是将它们作为数组中的一个单独元素。我该怎么做呢？

干杯，有一个愉快的星期天！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T19:13:18.293

只需在匹配组周围加上括号，以将分隔符保持为单独的元素：

```
"one,two.three four".split(/([,.\s])/); 
```

将返回

```
["one", ",", "two", ".", "three", " ", "four"] 
```

# knockout.js - 在视图模型问题中更新后的 knockoutjs 数据操作

> ID：14801327
> 
> 赞同：2
> 
> 时间：2013-02-10T18:51:30.623
> 
> 标签：knockout.js, knockout-mapping-plugin

我有一个带有两个 VM 的主视图模型，它是通过映射插件创建的。

```
viewModelObj    = {
    first           : new firstVM(),
    second          : new secondVM()
}

viewModel = mapping.fromJS(viewModelObj, mappingOptions);
ko.applyBindings(viewModel); 
```

数据如下所示：

```
'firstObj'      : {
    'title'         : 'CURRENT title goes here',
    'children'      : [
        { 'id': '00001', 'name': 'Rube no 1' },
        { 'id': '00002', 'name': 'Rube no 2' },
        { 'id': '00003', 'name': 'Rube no 3' }
    ],
    'warning'   : false
},
'secondObj'     : {
    'title'         : 'Second Item title'
} 
```

firstVM 有 observableArray 孩子

```
self.children = ko.observableArray(item.children);

self.calLength = ko.computed(function() {
  return 'Total ' + self.children().length;
}); 
```

在我更新数据之前，一切似乎都运行良好。更新数据：

```
'firstObj'  : {
    'title'     : 'UPDATED TITLE goes here',
    'children'  : [
        { 'id': '00004', 'name': 'Rube no 4' },
        { 'id': '00005', 'name': 'Rube no 5' },
        { 'id': '00006', 'name': 'Rube no 6' },
        { 'id': '00007', 'name': 'Rube no 7' },
        { 'id': '00008', 'name': 'Rube no 8' },
        { 'id': '00009', 'name': 'Rube no 9' }
    ],
    'warning'   : true
},
'secondObj'     : {
    'title'         : '2nd Title UPDATED'
} 
```

在 html first.children().length 返回更新数组的正确长度，foreach.children 也可以正常工作，但**VM 中的 calLength() 函数不返回更新后的长度。为什么？**

看起来所有数据都已成功更新，但如果它是一个数组，则无法在 VM 函数中访问（我可以轻松获取 self.title() 或其他可观察数据）。也许mappingOptions有一些问题？

```
'first' : {
    create : function(options) {
        return  mapping.fromJS(options.data, {}, this);
    }
},
'second' : {
    create : function(options) {
        return  mapping.fromJS(options.data, {}, this);
    }
} 
```

这是一个完整的演示：

[http://jsfiddle.net/simoncereska/bfvgT/](http://jsfiddle.net/simoncereska/bfvgT/)

ps 如果有其他意见，欢迎留言：）

非常感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:09:18.210

确保您的孩子可观察数组正在使用新值进行更新，而不是用新的可观察数组替换。

# sql - SQL 图像表

> ID：14801329
> 
> 赞同：-1
> 
> 时间：2013-02-10T18:51:36.923
> 
> 标签：sql, image, join

我正在为我的博客和作品集开发 CMS，并且想知道是否有人可以帮助我。我只是想知道将图像添加到我的博客和投资组合表的最佳方法是什么。我应该将所有图像放在一个单独的表格中，并在我的 CMS 中使用单独的表格来处理图像，还是应该在我已经为我的博客和投资组合拥有的表格中添加几个用于图像详细信息的字段，然后使用相同的表格插入它们我用于插入博客详细信息和内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T18:55:47.817

好吧，对于一个简单的 CMS，我不会在数据库中存储任何图像细节。
我宁愿将它们放在一个文件夹中，并即时获取任何详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T18:58:50.670

并不是每个人都对此有相同的看法。你可以做几件事，这里有一些我知道的：

1.  您可以将位置（出于安全原因，最好是半随机文件名）放在表格字段中。
2.  您可以将图像本身作为`blob`-data 放在表格字段中。
3.  您可以将上传的内容另存为**`sha1(fileid)`. `extention`**并检索上传的 id。

我想最好为媒体/上传创建一个单独的表，因为它将是中心位置。这也将使事情更容易找到。

考虑以上所有内容，以及您在互联网上找到的内容。您的问题没有简单的答案，因为这因系统而异。

# php - 按下按钮开始倒计时

> ID：14801331
> 
> 赞同：-1
> 
> 时间：2013-02-10T18:51:47.833
> 
> 标签：php, javascript, html, countdown

我有问题。我有一个将命令发送到 perl 脚本的按钮。该页面将在 60 秒内加载并加载。所以我需要倒计时来告诉用户perl脚本完成还有多少时间。所以我从网上得到了他的javascript，当页面加载时会自动倒计时。有可能扭转这种局面吗？

[http://goo.gl/cYdKg](http://goo.gl/cYdKg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:00:46.173

当您没有正确说明您的要求时，您看到会发生什么？两个人做同样的错误事情（对我们不利，我们之前没有澄清过）。

```
$.fn.timedDisable = function(time, callback) {
    if (time == null) {
        time = 5000;
    }
    var seconds = Math.ceil(time / 1000);
    return $(this).each(function() {
        $(this).attr('disabled', 'disabled');
        var disabledElem = $(this);
        var originalText = this.innerHTML;
        disabledElem.text( originalText + ' (' + seconds + ')');
        var interval = setInterval(function() {
            disabledElem.text( originalText + ' (' + --seconds + ')');
            if (seconds === 0) {
                disabledElem.removeAttr('disabled')
                    .text(originalText);
                clearInterval(interval);

                if (typeof callback !== 'undefined')
                    callback();
            }
        }, 1000);
    });
};

$(function() {
    $('#btnContinue').click(function() {
        $(this).timedDisable(5000, function() {
            window.alert('done');
        });
    });
}); 
```

# javascript - 从 cdnjs 获取最新版本

> ID：14801334
> 
> 赞同：10
> 
> 时间：2013-02-10T18:52:39.963
> 
> 标签：javascript, cdn

我想从我的内容交付网络中提取最新版本。

问：而不是说：

```
cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.js 
```

有没有办法说这样的话：

```
cdnjs.cloudflare.com/ajax/libs/modernizr/modernizr.js 
```

并且不包括版本号？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-10T19:00:44.737

你不想这样做。CDN 是关于积极缓存的。例如，CDN 服务器发送远在未来的`Expires`标头以确保资源保持缓存状态。

如果有一个 URL 总是指向最新版本，那么你所有的缓存都会发疯。一些客户仍然看到旧版本，而另一些客户则看到新版本。事实上，添加版本或其他标签是确保获取新版本并且客户端不涉及缓存的已知技术。只需查看您正在查看的页面的源代码：

```
http://cdn.sstatic.net/js/stub.js?v=655f0a867d03 
```

如果没有参数 StackOverflow 中的噪音，`v`团队永远无法同时拥有：出色的缓存和快速可靠地推送新版本的能力。

最后但同样重要的是 - 您确定要盲目加载具有未知错误和弃用的最新脚本版本吗？考虑到第一部分，即使有人在抱怨，也很难判断他真正使用的是哪个版本。

# python - 打印 csv 'none' 错误

> ID：14801338
> 
> 赞同：0
> 
> 时间：2013-02-10T18:52:53.273
> 
> 标签：python, search, csv

尝试打印 csv，但我不断收到错误“无”我想简单地列出 csv 的内容。我有两天，周六周日

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T18:54:24.997

你的星期五函数没有返回任何东西。

如果您尝试打印文件中的数据，则必须遍历它

`csvFile = csv.reader(open('friday.csv','rb'))`

> 从 csv 文件读取的每一行都作为字符串列表返回。

```
for line_list in csvFile:
  # do something with the dat 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T18:56:10.373

该方法`friday`并`saturday`没有包含任何`return`声明。默认情况下，Python`None`在到达函数末尾而没有遇到`return`语句时返回。

添加一个`return`（和实际读取文件的代码），如下所示：

```
def friday():
   with csv.reader(open('friday.csv','rb')) as csvFile:
       return '\n'.join(' - '.join(csvFile)) 
```

# ruby - EventMachine 运行循环中的 Linux 环境变量

> ID：14801339
> 
> 赞同：0
> 
> 时间：2013-02-10T18:52:57.970
> 
> 标签：ruby, rubygems, eventmachine

我有一个简单的 ruby​​ 文件，它使用 Eventmachine 作为守护程序。它看起来像这样：

```
...
EM.run {
   Signal.trap('INT') { @log.debug("trapped INT signal"); stop(true) }
   Signal.trap('TERM') { @log.debug("trapped TERM signal"); stop(true) }

   EM.add_periodic_timer 60 do
        puts ENV['TEST_ENV']
   end
}
... 
```

`echo $TEST_ENV`运行它之后，当清楚地显示在进程启动之前定义了变量时，我没有为 TEST_ENV 打印任何内容。

如何确保我的守护进程可以看到环境变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T04:20:17.413

我只能说，除非您没有展示的示例还有更多内容，对我有用：

```
petunia ~/t $ cat t.rb
#!/usr/bin/env ruby

require 'rubygems'
require 'eventmachine'

EM.run {
  EM.add_periodic_timer(5) do
    puts ENV['TEST_ENV']
  end
}

petunia ~/t  $ TEST_ENV=test ruby ./t.rb 
test 
```

# javascript - 超简单的 Chrome 扩展程序不会在按钮 onclick 事件中添加EventListener

> ID：14801349
> 
> 赞同：17
> 
> 时间：2013-02-10T18:54:09.860
> 
> 标签：javascript, google-chrome-extension, addeventlistener

所以我正在测试创建一个 chrome 扩展。我知道使用 Manifest v2，您不能在 popup.html 中使用 javascript。因此，我已将 javascript 移至单独的文件 popup.js。

我试图在弹出窗口中有一个简单的按钮来调用你好世界警报，但它根本不起作用。

此外，Chrome 的 Inspect Element 调试器不会显示任何错误。

**popup.html**

```
<html>
    <head>
        <title>Test</title>
        <script language='javascript' src='popup.js'></script>
    </head>
    <body>
        <form name='testForm'>
            <input type='button' id='alertButton' value='click me'>
        </form>
    </body>
</html> 
```

**popup.js**

```
function myAlert(){
    alert('hello world')
}

window.onload = function(){
    document.addEventListener('DOMContentLoaded', function () {
        document.getElementById('alertButton').addEventListener('onclick', myAlert);
    }); 
} 
```

**清单.json**

```
{
  "manifest_version": 2,
  "name": "Test",
  "description": "Test Extension",
  "version": "1.0",

  "icons": { 
    "48": "icon.png"
   },

  "permissions": [
    "http://*/*", 
    "https://*/*"
  ],

  "browser_action": {
    "default_title": "This is a test",
    "default_icon": "icon.png",
    "default_popup": "popup.html"
  }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-10T19:07:22.707

只需删除`window.onload`：

```
function myAlert(){
    alert('hello world');
}

document.addEventListener('DOMContentLoaded', function () {
    document.getElementById('alertButton').addEventListener('click', myAlert);
}); 
```

# entity-framework - 实体框架 6\. 模式名称

> ID：14801354
> 
> 赞同：2
> 
> 时间：2013-02-10T18:54:28.103
> 
> 标签：entity-framework, entity-framework-6

我想为我的实体分配架构名称，而不指定表名。现在，我只能做：`modelBuilder.Entity<T>().ToTable("MyEntities", "myschema");`有没有办法做类似的事情：`modelBuilder.Entity<T>().ToTable("myschema")`？请考虑到我不能使用 PluralizationService 并手动计算表名，因为 PluralizationService 成为内部...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:48:58.350

怎么样...

```
var t = typeof (T);
var name= t.Name;
modelBuilder.Entity<T>().ToTable(name, "myschema") 
```

如果您需要上下文中的 DbSet 复数名称

```
 public DbSet<Single> Plural{ get; set; } 
```

然后可以对这个小扩展进行返工以返回您想要的值。两者的组合，没有循环。但我相信你会找到正确的变化......

```
 public static class BosDalExtensions
{
 public static List<string> GetModelNames(this DbContext context ) {
      var model = new List<string>();
      var propList = context.GetType().GetProperties();
      foreach (var propertyInfo in propList)
      {
      if (propertyInfo.PropertyType.GetTypeInfo().Name.StartsWith("DbSet"))
      {
          model.Add(propertyInfo.Name);

      }
      }

      return model;
  }
 public static List<string> GetModelTypes(this DbContext context)
 {
     var model = new List<string>();
     var propList = context.GetType().GetProperties();
     foreach (var propertyInfo in propList)
     {
         if (propertyInfo.PropertyType.GetTypeInfo().Name.StartsWith("DbSet"   ))
         {
             model.Add(propertyInfo.PropertyType.GenericTypeArguments[0].Name);
         }
     }

     return model;
 }
} 
```

# iphone - 在 iOS 上将图像分享到 Instagram

> ID：14801359
> 
> 赞同：1
> 
> 时间：2013-02-10T18:54:41.303
> 
> 标签：iphone, ios, xcode

我试图在 instagram 上打开我的一张照片，但每次我按下操作按钮（如您从我的代码中看到的那样）时，它都会显示 instagram 图标，当我按下 Instagram 图标时，应用程序就会崩溃。我究竟做错了什么？我已经坚持了一段时间。

```
interface  ViewController : UIViewController <UIDocumentInteractionControllerDelegate>{
IBOutlet UIImageView *onlyImageVIew;    
IBOutlet UIImageView *myImageView;

  }
@property (nonatomic, retain) UIDocumentInteractionController *docController; 
  -(IBAction)actionButton:(id)sender;

@end

 -(IBAction)actionButton:(id)sender {

NSURL *instagramURL = [NSURL URLWithString:@"instagram://app"];
if ([[UIApplication sharedApplication] canOpenURL:instagramURL]) {
    NSString *documentsDirectory = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
    NSString *savedImagePath = [documentsDirectory stringByAppendingPathComponent:@"Image.ig"];

    UIImage *image = [UIImage imageNamed:@"01.png"];

    NSData *imageData = UIImagePNGRepresentation(image);
    [imageData writeToFile:savedImagePath atomically:YES];
    NSURL *imageUrl = [NSURL fileURLWithPath:savedImagePath];
    NSLog(@"%@",imageUrl);
    UIDocumentInteractionController *docController = [[UIDocumentInteractionController alloc] init];
    docController.delegate = self;
    docController.UTI = @"com.instagram.photo";
    docController.URL = imageUrl;
    //[docController setURL:imageUrl];
    [docController presentOpenInMenuFromRect:CGRectZero inView:self.view animated:YES];

}
} 
```

这是我实现 bool 函数时的崩溃

2013-02-10 13:34:46.206 分享到 instagram[2197:907] 文件：//localhost/var/mobile/Applications/0AABBF7B-F479-44E7-BA7F-B0FAA636F1CB/Documents/Image.ig

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T06:10:07.873

希望下面的代码对你有用。

```
-(void)ShareInstagram
{
UIImagePickerController *imgpicker=[[UIImagePickerController alloc] init];
imgpicker.delegate=self;
[self storeimage];
NSURL *instagramURL = [NSURL URLWithString:@"instagram://app"];
if ([[UIApplication sharedApplication] canOpenURL:instagramURL])
{

    CGRect rect = CGRectMake(0 ,0 , 612, 612);
    NSString  *jpgPath = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/15717.ig"];

    NSURL *igImageHookFile = [[NSURL alloc] initWithString:[[NSString alloc] initWithFormat:@"file://%@", jpgPath]];
    dic.UTI = @"com.instagram.photo";
    dic.delegate=self;
    dic = [self setupControllerWithURL:igImageHookFile usingDelegate:self];
    dic=[UIDocumentInteractionController interactionControllerWithURL:igImageHookFile];
    dic.delegate=self;
    [dic presentOpenInMenuFromRect: rect    inView: self.view animated: YES ];
    //  [[UIApplication sharedApplication] openURL:instagramURL];
}
else
{
    //   NSLog(@"instagramImageShare");
    UIAlertView *errorToShare = [[UIAlertView alloc] initWithTitle:@"Instagram unavailable " message:@"You need to install Instagram in your device in order to share this image" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];

    errorToShare.tag=3010;
    [errorToShare show];
}
}

- (void) storeimage
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,     NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *savedImagePath = [documentsDirectory stringByAppendingPathComponent:@"15717.ig"];
UIImage *NewImg=[self resizedImage:imageCapture :CGRectMake(0, 0, 612, 612) ];
NSData *imageData = UIImagePNGRepresentation(NewImg);
[imageData writeToFile:savedImagePath atomically:NO];
}

-(UIImage*) resizedImage:(UIImage *)inImage: (CGRect) thumbRect
{
CGImageRef imageRef = [inImage CGImage];
CGImageAlphaInfo alphaInfo = CGImageGetAlphaInfo(imageRef);

// There's a wierdness with kCGImageAlphaNone and CGBitmapContextCreate
// see Supported Pixel Formats in the Quartz 2D Programming Guide
// Creating a Bitmap Graphics Context section
// only RGB 8 bit images with alpha of kCGImageAlphaNoneSkipFirst, kCGImageAlphaNoneSkipLast, kCGImageAlphaPremultipliedFirst,
// and kCGImageAlphaPremultipliedLast, with a few other oddball image kinds are supported
// The images on input here are likely to be png or jpeg files
if (alphaInfo == kCGImageAlphaNone)
    alphaInfo = kCGImageAlphaNoneSkipLast;

// Build a bitmap context that's the size of the thumbRect
CGContextRef bitmap = CGBitmapContextCreate(
                                            NULL,
                                            thumbRect.size.width,       // width
                                            thumbRect.size.height,      // height
                                            CGImageGetBitsPerComponent(imageRef),   // really needs to always be 8
                                            4 * thumbRect.size.width,   // rowbytes
                                            CGImageGetColorSpace(imageRef),
                                            alphaInfo
                                            );

// Draw into the context, this scales the image
CGContextDrawImage(bitmap, thumbRect, imageRef);

// Get an image from the context and a UIImage
CGImageRef  ref = CGBitmapContextCreateImage(bitmap);
UIImage*    result = [UIImage imageWithCGImage:ref];

CGContextRelease(bitmap);   // ok if NULL
CGImageRelease(ref);

return result;
}

- (UIDocumentInteractionController *) setupControllerWithURL: (NSURL*) fileURL usingDelegate: (id <UIDocumentInteractionControllerDelegate>) interactionDelegate
{

    UIDocumentInteractionController *interactionController = [UIDocumentInteractionController interactionControllerWithURL:fileURL];
    interactionController.delegate = self;

    return interactionController;
}

- (void)documentInteractionControllerWillPresentOpenInMenu:(UIDocumentInteractionController *)controller
{

}

- (BOOL)documentInteractionController:(UIDocumentInteractionController *)controller canPerformAction:(SEL)action
{
//    NSLog(@"5dsklfjkljas");
    return YES;
}

- (BOOL)documentInteractionController:(UIDocumentInteractionController *)controller performAction:(SEL)action
 { 
//    NSLog(@"dsfa");
     return YES;
 }

 - (void)documentInteractionController:(UIDocumentInteractionController *)controller didEndSendingToApplication:(NSString *)application
 {
     //    NSLog(@"fsafasd;");
 } 
```

这段代码对我有用。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T19:21:58.330

首先，确保您的图像不在通话`nil`后`imageNamed:`。

然后，确保`imageData`不在通话`nil`后`UIImagePNGRepresentation`。

最后，在尝试使用之前检查将图像写入文件的结果：

```
BOOL writingResult = [imageData writeToFile:savedImagePath atomically:YES];
if(writingResult == NO)
{
    NSLog(@"Failed to write to %@",savedImagePath);
    return;
} 
```

您的文件可能没有被写入，因此尝试共享一个不存在的文件会导致您的崩溃。

# php - 从具有共享 ID 的相应数据库中有多个条目的数据库中获取条目（准备好的语句）

> ID：14801364
> 
> 赞同：1
> 
> 时间：2013-02-10T18:54:58.080
> 
> 标签：php, mysql, if-statement, mysqli, prepared-statement

这会有点复杂。但我会尝试解释我正在尝试做的事情。

我在数据库中有一个表，如下所示：

表 - 条目

```
ID | User | Address | Workflow | Audit Date |
1  | Tim  | 123     | 10 p/w   |  22/2/2013 |
2  | Bob  | 222     | 20 p/w   |  22/2/2013 | 
```

现在在相应的表格中，我有图片：

表 - 图片

```
ID | JobNo | User | ImagePath | ImageName |
52 | 1     | Tim  | /1.jpg    | /2.jpg    |
53 | 1     | Tim  | /3.jpg    | /4.jpg    | 
```

现在 Pictures.Jobno 对应 Entries.ID

好吧，我所追求的是，​​当相关的 jobNo 有超过 2 个图像条目时，列出表 Entries 中的所有条目。如果它有 1 个或更少，我想忽略列表。

所以目前我可以通过php调用这样的条目：

```
 function getAllEntries() {
    $mysqli = new mysqli(DB_SERVER, DB_USER, DB_PASSWORD, DB_NAME);
    if (!($query = $mysqli->prepare("SELECT * FROM Entries
                                    ORDER BY Date DESC"))) {
     echo "Prepare failed: (" . $mysqli->errno . ") " . $mysqli->error;
    }
    if (!$query->execute()) {
    echo "Execute failed: (" . $query->errno . ") " . $query->error;
}
    $query->bind_result($ID, $User, $Address, $Workflow, $Audit);
    while ($query->fetch()) {
        //Echo each entry here
    }
    $query->close();
    $mysqli->close();
} 
```

我的问题是，我该如何合并我想做的事情？我想说：

选择所有条目，其中表 Pictures 中有 2 个或更多图像对应于 Entries 表中的作业编号/id 比较。

我确信这是可行的。但我想不出 sql 语句或如何将它正确绑定在准备好的语句中

SELECT * FROM Entries, Pictures, Where Pictures.Jobno = ID.Entries AND（图片中的行数）>= 2。

或者其他的东西？这只是一个 SQL 问题吗？或者我是否需要一个 if 语句并运行一个单独的 SQL 查询。

恐怕我是用 php 和 sql 自学的 - 所以我不太知道如何自己解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T19:04:09.147

处理这个问题的方法通常是加入一个子查询，该查询检索每个图片的数量`JobNo`并过滤子句`>= 2`中的图片`HAVING`：

```
SELECT 
  entries.*, 
  numpics
FROM entries 
LEFT JOIN (
  /* Subquery joined returns aggregate COUNT() in pictures per JobNo */
  SELECT JobNo, COUNT(*) AS numpics FROM pictures GROUP BY JobNo
) pcounts ON entries.ID = pcounts.JobNo
HAVING numpics >= 2 
```

[http://sqlfiddle.com/#!2/347f4/8](http://sqlfiddle.com/#!2/347f4/8)

由于 MySQL 对 的宽松处理`GROUP BY`，您可能只需要一个 , 就可以逃脱`LEFT JOIN`，而`pictures`无需子查询：

```
/* MySQL Only */
SELECT entries.*
FROM
  entries 
  LEFT JOIN pictures ON entries.ID = Pictures.JobNo
GROUP BY entries.ID
HAVING COUNT(pictures.JobNo) >= 2 
```

# java - 下载html源代码很慢

> ID：14801367
> 
> 赞同：0
> 
> 时间：2013-02-10T18:55:25.650
> 
> 标签：java, android, jsoup

我在我的 android 应用程序中使用 jsoup，但问题是，html 源代码需要太多时间来下载。这是我的代码：

```
 long t = System.currentTimeMillis();
    String url = "http://www.stackoverflow.com/";
    Document doc = null;
    try {
        Connection c = Jsoup.connect(url);
        doc = c.get();
        System.out.println(System.currentTimeMillis() - t);
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

执行此代码需要 1.265 秒，这感觉很奇怪，因为我可以在同一设备上使用网络浏览器在不到 0.5 秒的时间内下载整个网站（包含图像和所有好东西）。我做错什么了吗？或者也许有一种更快的方法来获取网站的 html 源代码？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T19:15:00.640

您在哪里尝试此代码？你的设备？如果您使用的是 LTE/3G 网络，它不会太差。

我认为的另一个原因是，如果您使用 Wifi，您的无线路由器不在设备的最佳位置。

从该代码中，我看不到任何可能导致更多延迟的内容。如果您没有缓存主机 DNS 条目并且服务器离您很远，那么 1.2 秒可能不会那么糟糕。

此外，在比较时间时，尝试将代理设置为与您的浏览器相同。服务器可能会根据用户代理给出不同的优先级。在这种情况下，您使用的是默认 Java 用户代理。

# python - python测量两个相似图像的质量

> ID：14801373
> 
> 赞同：2
> 
> 时间：2013-02-10T18:55:54.650
> 
> 标签：python, image, image-processing

我正在尝试寻找一种方法来确定 python 是否可以帮助识别相似图像并返回整体质量更好、清晰、丰富的 JPG 图像。python中有没有帮助的包？

我在下面提到了一个例子来说明我的意思。这两个图像相似，但质量不同。关于如何定性测量的任何提示？我应该查看图像大小、颜色范围等吗？

更好的（不那么锐利和清晰）： http: [//www.lessaccent.com/i/blog/coke-can.jpg](http://www.lessaccent.com/i/blog/coke-can.jpg)

好但不比上面的好（更锐利，增加颗粒）：http: [//images.sodahead.com/polls/002323967/371436027_CokeCan_answer_1_xlarge.jpeg](http://images.sodahead.com/polls/002323967/371436027_CokeCan_answer_1_xlarge.jpeg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T19:53:33.440

这通常是通过一些度量和参考图像来计算的。SSIM（请参阅[https://stackoverflow.com/a/13884956/1832154](https://stackoverflow.com/a/13884956/1832154)）往往适合进行此类比较，并且对于您的图像（以第一个作为参考图像），SSIM 给出的值约为 0.91第二张图片与参考图片相关。事实上，它们并没有那么不同，但该指标报告的结构相似性差异约为 9%——考虑到图像，这似乎是可以接受的差异。

# c# - 如何找到我在 msmq 中添加的消息

> ID：14801374
> 
> 赞同：0
> 
> 时间：2013-02-10T18:55:56.100
> 
> 标签：c#, msmq

我把它弄湿了，[只是](http://fransiscuss.com/2012/06/01/msmq-basic-tutorial/)我把它添加到这样的 Windows 服务中

```
public partial class TriggerHostProcesses : ServiceBase
{
    private const string MESSAGE_QUEUE = @".\Private$\Sample Queue";
    private MessageQueue _queue;
    public TriggerHostProcesses()
    {
        InitializeComponent();
    }

    protected override void OnStart(string[] args)
    {
        SendMessage("Hope This Works");
    }

    protected override void OnStop()
    {
    }

    internal void start()
    {
        OnStart(null);
    }

    private void SendMessage(string message)
    {
        _queue = new MessageQueue(MESSAGE_QUEUE);
        Message msg = new Message();
        msg.Body = message;
        msg.Label = "Testing " + DateTime.Now.ToString();
        _queue.Send(msg,new MessageQueueTransaction());
    }
} 
```

并得到消息

```
 partial class HostListener : ServiceBase
{
      private const string MESSAGE_QUEUE = @".\Private$\Sample Queue";
    private MessageQueue _queue;

    public HostListener()
    {
        InitializeComponent();
    }

    protected override void OnStart(string[] args)
    {
        try
        {
            var myTransaction = new MessageQueueTransaction();

            var queue = new MessageQueue(MESSAGE_QUEUE);
            var message = queue.Receive(new TimeSpan(0, 0, 20),myTransaction);
            message.Formatter = new XmlMessageFormatter(
                                new String[] { "System.String,mscorlib" });
            Console.WriteLine(message.Body.ToString());
        }
        catch(Exception ex)
        {
            Console.WriteLine("No Message");
        }
    }

    protected override void OnStop()
    {
        // TODO: Add code here to perform any tear-down necessary to stop your service.
    }

    internal void start()
    {
        OnStart(null);
    }
} 
```

在我的主要我添加了这个

```
 var ServiceToRun1 = new TriggerHostProcesses();
        var ServiceToRun2 = new HostListener();

        if (Environment.UserInteractive)
        {
            // This used to run the service as a console (development phase only)

            ServiceToRun1.start();
            ServiceToRun2.start();

            Console.WriteLine("Press Enter to terminate ...");
            Console.ReadLine();

            ServiceToRun1.Stop();
            ServiceToRun2.Stop();
        }
        else
        {
            ServiceBase.Run(ServiceToRun1);
        } 
```

我得到了例外`Timeout for the requested operation has expired.`

有人可以检查他们是否可以看到问题所在吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T19:28:06.483

我不相信您正确使用交易。例如，在发送消息时，您使用：

```
_queue.Send(msg,new MessageQueueTransaction()); 
```

但是，这不会开始或提交事务。[在MSDN](http://msdn.microsoft.com/en-us/library/d787y5ww.aspx)中查看该示例使用以下代码（由我编辑）：

```
var myTransaction = new MessageQueueTransaction();
myTransaction.Begin();
myQueue.Send("hello world", myTransaction);
myTransaction.Commit(); 
```

我不相信您的消息正在发送，因此您的`Receive`超时。

同样，您的接收逻辑似乎没有正确使用事务：

```
myTransaction.Begin();
var myMessage = myQueue.Receive(myTransaction); 
var body myOrder = (string)myMessage.Body;
myTransaction.Commit(); 
```

如果发生异常，您应该`Rollback`处理您的消息，以便将它们放回队列中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T09:02:42.460

这是我的最终产品。我在 Windows 服务中使用它。一次 20 秒，看看我是否有消息，然后执行我的流程。

```
public class MSMQueue:IQueue
    {

        public MSMQueue(string queueName)
        {
            Message_Queue = queueName;
        }

        public string Message_Queue { get; private set; }

        public string Pop()
        {
            MessageQueue queue = new MessageQueue(Message_Queue);

            if (queue.Transactional)
                return popTransactionalQueue(queue, new TimeSpan(0, 0, 1));
            else
                return popNormalQueue(queue, new TimeSpan(0, 0, 1));
        }

        public string Pop(TimeSpan timeSpan)
        {
            MessageQueue myQueue = new MessageQueue(Message_Queue);

            if (myQueue.Transactional)
                return popTransactionalQueue(myQueue, timeSpan);
            else
                return popNormalQueue(myQueue, timeSpan);
        }

        public void Add(string message)
        {
            // Connect to a queue on the local computer.
            MessageQueue myQueue = new MessageQueue(Message_Queue);

            // Send a message to the queue.
            if (myQueue.Transactional)
            {
                var myTransaction = new MessageQueueTransaction();
                myTransaction.Begin();
                myQueue.Send(message, myTransaction);
                myTransaction.Commit();
            }
            else
                myQueue.Send(message);
        }

        #region private methods

        private string popNormalQueue(MessageQueue queue, TimeSpan timeOut)
        {
            var message = queue.Receive(timeOut);
            message.Formatter = new XmlMessageFormatter(
                                new String[] { "System.String,mscorlib" });
            return message.Body.ToString();
        }

        private string popTransactionalQueue(MessageQueue queue, TimeSpan timeOut)
        {

            // Set the formatter.
            queue.Formatter = new XmlMessageFormatter(new Type[]
                {typeof(String)});

            // Create a transaction.
            MessageQueueTransaction myTransaction = new 
                MessageQueueTransaction();

            String message=string.Empty;

            try
            {
                myTransaction.Begin();

                Message myMessage = queue.Receive(timeOut, myTransaction); 
                message = (String)myMessage.Body;

                myTransaction.Commit();

            }

            catch (MessageQueueException e)
            {
                myTransaction.Abort();
                throw e;
            }

            return message;
        }

        #endregion
    } 
```

# jquery - 带有警报弹出窗口的 jQuery Validate 插件 - 仍然出现 - 用户无法在选择框中选择正确的值

> ID：14801381
> 
> 赞同：6
> 
> 时间：2013-02-10T18:56:45.257
> 
> 标签：jquery, jquery-validate, alert

我正在使用以下代码：

```
$().ready(function() {
    $('#state_form').validate({
        rules: {
            state: "required"
        },
        messages: {
            state: 
            {
                required: "The State is required!"
            }
        },          
        errorPlacement: function(error, element) {
            alert(error.html());
        }
    });
}); 
```

但如果用户提交表单，则会出现错误弹出窗口。这是对的。然后，如果用户单击选择框“状态”，仍然会出现带有错误的弹出窗口（不可能选择正确的值）。真实示例可在[janzitniak.info/temp/test.php 获得](http://www.janzitniak.info/temp/test.php)

这是不可接受的。我该如何解决这个问题？

[JQuery form validation with alert popup](https://stackoverflow.com/questions/9647855/jquery-form-validation-with-alert-popup-alert-still-being-shown-with-a-valid-s)中描述的解决方案- 仍然显示有效提交的警报对我没有帮助，也许我没有正确理解。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-10T19:22:48.060

使用该[`onclick: false`选项](http://docs.jquery.com/Plugins/Validation/validate#toptions)可防止在选择状态之前触发错误。此外，您只需要使用`.text()`而不是`.html()`因为`alert()`无论如何都不需要使用 HTML。

```
$(document).ready(function () {
    $('#state_form').validate({
        onclick: false, // <-- add this option
        rules: {
            state: "required"
        },
        messages: {
            state: {
                required: "The State is required!"
            }
        },
        errorPlacement: function (error, element) {
            alert(error.text());
        }
    });
}); 
```

**演示：http: [//jsfiddle.net/U6N3R/](http://jsfiddle.net/U6N3R/)**

**注意**：请勿在 Safari 中使用此代码，否则您将陷入无限循环。似乎`alert()`Safari`errorPlacement`在单击“确定”按钮后第二次触发回调函数。

* * *

为了获得更现代的用户体验，我推荐使用 jQuery 模态或工具提示插件。

以这个答案为例： [https ://stackoverflow.com/a/14741689/594235](https://stackoverflow.com/a/14741689/594235)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-24T17:33:42.027

一些小的修正以停止无限循环，使用 keyup: false 作为其他选项。

```
$(document).ready(function () {
$('#state_form').validate({
    onclick: false, 
    onkeyup: false,
    rules: {
        state: "required"
    },
    messages: {
        state: {
            required: "The State is required!"
        }
    },
    errorPlacement: function (error, element) {
        alert(error.text());
    }
});
}); 
```

# java - 有人知道我的代码有什么问题吗？

> ID：14801382
> 
> 赞同：-7
> 
> 时间：2013-02-10T18:56:45.790
> 
> 标签：java, android, onclicklistener

任何人都能看到这段代码有什么问题吗？将是一个股票代码，所以当一个按钮被点击时，1 被添加，然后 1 将再次变为 2，依此类推，基本上它是一个点击器，当关闭时会记住它所在的数字。

更清楚地说，这些行作为错误出现：

```
countButton.setOnClickListener(new OnClickListener() {
          public void onClick(View v) {
              mCount++;
              countTextView.setTextView.setText("Count: " + mCount); 
```

所有代码：

```
 package com.example.counter;

import android.app.Activity;
import android.content.DialogInterface.OnClickListener;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity {
    // Private member field to keep track of the count
    private static int mCount = 0;

    private TextView countTextView;
    private Button countButton;
    public static final String PREFS_NAME = "com.example.myApp.mCount";
    private SharedPreferences settings = null;
    private SharedPreferences.Editor editor = null;

    /** ADD THIS METHOD **/
    @Override
    public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);  
      setContentView(R.layout.activity_main);
      countTextView = (TextView) findViewById(R.id.TextViewCount);
      countButton = (Button) findViewById(R.id.ButtonCount);

      countButton.setOnClickListener(new OnClickListener() {
          public void onClick(View v) {
              mCount++;
              countTextView.setText("Count: " + mCount);
              editor = settings.edit(); 
              editor.putInt("mCount", mCount);
              editor.commit();
          }
      });
    settings = getSharedPreferences(PREFS_NAME, MODE_PRIVATE);

     }

    @Override
    public void onPause() {
      super.onPause();  
    }

    @Override
    public void onResume() {
      super.onResume();  
      mCount = settings.getInt("mCount", 0);
      countTextView.setText("Count: " + mCount);
    }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T19:00:37.640

您已在恢复和暂停之间切换逻辑。

暂停应该保留您的号码。

简历应该读旧号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T19:12:56.687

改成 `new OnClickListener()`除了`new View.OnClickListener()`大家建议的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T19:02:55.233

不要使用`.setTextView.setText(..)`，而只是使用`.setText (CharSequence text)`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T19:09:03.657

请参阅以下运行代码以满足您的要求

```
public class MainActivity extends Activity {
// Private member field to keep track of the count
private static int mCount = 0;

private TextView countTextView;
private Button countButton;
public static final String PREFS_NAME = "com.example.myApp.mCount";
private SharedPreferences settings = null;
private SharedPreferences.Editor editor = null;

/** ADD THIS METHOD **/
@Override
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);  
  setContentView(R.layout.activity_main);
  countTextView = (TextView) findViewById(R.id.TextViewCount);
  countButton = (Button) findViewById(R.id.ButtonCount);

  countButton.setOnClickListener(new OnClickListener() {
      public void onClick(View v) {
          mCount++;
          countTextView.setText("Count: " + mCount);
          editor = settings.edit(); 
          editor.putInt("mCount", mCount);
          editor.commit();
      }
  });
settings = getSharedPreferences(PREFS_NAME, MODE_PRIVATE);

 }

@Override
public void onPause() {
  super.onPause();  
}

@Override
public void onResume() {
  super.onResume();  
  mCount = settings.getInt("mCount", 0);
  countTextView.setText("Count: " + mCount);
}
} 
```

只需复制并粘贴它。就是这样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-10T19:18:32.960

```
import android.content.DialogInterface.OnClickListener; 
```

应该改为

```
import android.view.View.OnClickListener; 
```

您正在导入错误的侦听器，因此它需要不同的方法签名`onClick()`

除了提到的所有其他事情。

# entity-framework - 在 EF 查询中包括孙子

> ID：14801384
> 
> 赞同：29
> 
> 时间：2013-02-10T18:57:00.437
> 
> 标签：entity-framework, linq-to-entities

给定对象层次结构

```
public class Parent
{
    public int Id { get; set; }
    public virtual Child Child { get; set; }
}

public class Child
{
    public int Id { get; set; }
    public virtual GrandChild GrandChild { get; set; }
}

public class GrandChild
{
    public int Id { get; set; }
} 
```

和数据库上下文

```
public class MyContext : DbContext
{
    public DbSet<Parent> Parents { get; set; }
} 
```

可以使用 Lambda 语法 ( ) 包括子孙，`using System.Data.Entity`如下所示：

```
using (MyContext ctx = new MyContext())
{
    var hierarchy = 
        from p in ctx.Parents.Include(p => p.Child.GrandChild) select p;
} 
```

如果随后更改类名称，Lambda 语法可防止中断查询。但是，如果`Parent`有`ICollection<Child>`这样的代替：

```
public class Parent
{
    public int Id { get; set; }
    public virtual ICollection<Child> Children { get; set; }
} 
```

Lambda 语法不再有效。相反，可以使用字符串语法：

```
var hierarchy = from p in ctx.Parents.Include("Children.GrandChild") select p; 
```

字符串语法是唯一的选择，还是在这种情况下有一些替代方法可以使用 Lambda 语法？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-10T22:30:35.547

当然，你可以做到

```
var hierarchy = from p in ctx.Parents
                    .Include(p => p.Children.Select(c => c.GrandChild))
                select p; 
```

请参阅[MSDN](http://msdn.microsoft.com/en-us/library/gg671236%28v=vs.103%29.aspx)，标题备注，第五个项目符号。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2016-08-03T11:10:11.857

更新：如果您使用的是**Entity Framework Core**，您应该使用以下语法

```
var hierarchy = from p in ctx.Parents
                    .Include(p => p.Children)
                    .ThenInclude(c => c.GrandChild)
                select p; 
```

# gwt - 如何强制 GWT 为每个 DOM 元素添加唯一 ID？

> ID：14801389
> 
> 赞同：2
> 
> 时间：2013-02-10T18:57:46.563
> 
> 标签：gwt

我有一个 GWT 应用程序，如果不可能，我想自动为每个元素添加 ID，手动执行此操作的最快方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T04:52:34.340

我不太确定性能问题。以 10-20 个小部件的形式添加露水 id 会如何导致性能损失？

要在小部件上自动设置调试 ID，您需要在 module.gwt.xml 文件中包含以下内容。

```
<!-- Enable debug ID. -->
<inherits name="com.google.gwt.user.Debug"/>
<set-property name="gwt.enableDebugId" value="true"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T04:48:51.537

如果你想让一个元素总是有一个 Id，你可以使用UI Object 类的[ensureDebugId](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/UIObject.html#ensureDebugId%28com.google.gwt.dom.client.Element,%20java.lang.String%29)。它确保您的元素在将其附加到 dom 之前设置了一个 Id。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T19:16:43.953

是的，它可能：

第一种方式：

```
Button b = new Button();
DOM.setElementAttribute(b.getElement(), "id", "my-button-id") 
```

第二种方式：

```
FlowPanel panel = new FlowPanel();
panel.getElement().setId("my-flowpanel-id"); 
```

如果您想将所有附加到 DOM 的 id 分配给您，您可以这样做

```
Iterator<Widget> iterator = RootPanel.get().iterator();

while(iterator.hasNext()) {
    Widget w = iterator.next();
     w.getElement().setId("id");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T00:58:01.237

您可以创建自己的 Widget 类来扩展 GWT Widget 并为每个类设置一个 id：

```
public class myWidget extends Widget {

    public myWidget(String id) {
        super();
        getElement().setId("id");
    }

    public void setId(String id) {
        // Use this method if you use Ui:Binder
        getElement().setId("id");
    }
} 
```

显然，如果您不需要所有小部件（如 FlowPanel、Button 等）上的 id，则可以扩展其他类而不是 Widget。

# mysql - 执行连接

> ID：14801399
> 
> 赞同：1
> 
> 时间：2013-02-10T18:58:40.197
> 
> 标签：mysql, join

所以这是我第一次遇到mysql数据库，

我从第一个问题中得到了很多帮助： [MYSQL - First Database Structure help Please](https://stackoverflow.com/questions/14774071/mysql-first-database-structure-help-please)

并按照 pitchinnate 的推荐建立了我的数据库

我有 ：

餐桌俱乐部的餐桌结构

```
Column      Type            Null    Default
id          int(11)         No  
clubname    varchar(100)    No  
address     longtext        No  
phone       varchar(12)     No  
website     varchar(255)    No  
email       varchar(100)    No 
```

表 club_county 的表结构

```
Column      Type    Null    Default
club_id     int(11) No  
county_id   int(11) No 
```

表县的表结构

```
Column      Type        Null    Default
id          int(11)     No  
state_id    tinyint(4)  No  
name        varchar(50) No 
```

表状态的表结构

```
Column      Type        Null    Default
id          tinyint(4)  No  
longstate   varchar(20) No  
shortstate  char(2)     No 
```

我为上面看起来那样的所有内容设置了外键关系.... states.id ->county.state_id 例如

我试图运行的内容：

```
SELECT *
FROM club
JOIN states
JOIN county
  ON county.state_id=states.id
JOIN club_county
  ON club_county.club_id=club.id
club_county.county_id=county.id 
```

这没有用......我相信对于那些知道应该做什么的人来说原因是显而易见的。

我想做的是

获取所有俱乐部的列表及其相关的州和县

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:04:38.730

您需要为每个连接指定一个 JOIN 条件。它应该如下所示：

```
SELECT *
FROM club
JOIN club_county ON club.id = club_county.club_id
JOIN county ON club_county.county_id = county.id
JOIN states ON county.state_id = state.id 
```

您的版本在读取`JOIN states`.

关于表名的一件事：建议使用单数或复数表名，不要混合使用它们（注意你有`club`（单数）和`states`（复数）表）。这使您在开发时更容易记住事情，并且您不太可能犯错误。

编辑：

如果要限制结果中出现的列，只需修改 SELECT 子句。相反，如果“SELECT *”，你用逗号分隔你想要的字段。

例如

```
SELECT club.id, club.name, county.name, states.name
FROM club
JOIN club_county ON club.id = club_county.club_id
JOIN county ON club_county.county_id = county.id
JOIN states ON county.state_id = state.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T19:10:45.747

您编写的查询甚至不会执行，因为它有语法错误。有关 JOINS 的更多详细信息，请参阅此链接： [13.2.8.2。加入语法](http://dev.mysql.com/doc/refman/5.0/en/join.html)

还有，`

```
SELECT * 
FROM club a, county b, states c, club_county d 
WHERE a.id = d.county_id
AND b.id = d.county_id
AND b.state_id = c.id 
```

`

我希望这会有所帮助...如果您仍然需要帮助，请告诉我们...

谢谢... 777 先生

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T19:43:04.767

所以在你修改了问题之后，现在的答案更像是：

```
SELECT club.id,club.clubname,county.name,states.longstate,states.shortstate 
FROM club,club_county,county,states
WHERE club.id=club_county.club_id
AND county.id=club_county.county_id
AND states.id = county.state_id 
```

如果您需要更多帮助，请告诉我...

谢谢... 777 先生

# regex - 用于重组目录结构的 Mod_Rewrite 规则（或替代规则）

> ID：14801406
> 
> 赞同：1
> 
> 时间：2013-02-10T18:59:19.887
> 
> 标签：regex, apache, mod-rewrite, redirect

我工作的网站过去有这两个页面：

[http://www.africananimals.com/stripes/zebras](http://www.africananimals.com/stripes/zebras)

和

[http://www.africananimals.com/news/zebras](http://www.africananimals.com/news/zebras)

（这些不是实际的域名，只是示例。）

最近重新组织了目录结构，相同页面的 URL 更改为：

[http://www.africananimals.com/zebras/stripes](http://www.africananimals.com/zebras/stripes)

和

[http://www.africananimals.com/zebras/news](http://www.africananimals.com/zebras/news)

我想要一个 mod_rewrite 规则（或一种资源消耗较少的替代方法，例如 Redirect 命令或类似的东西），以使两个页面都带有旧 URL 书签的爱好者受益。我需要它适用于 http//www.africananimals.com 和 http//africananimals.com/ 版本的 URL。

我的解决方案是这样的：

```
Redirect /stripes/zebras http://www.africananimals.com/zebras/stripes
Redirect /news/zebras http://www.africananimals.com/zebras/news 
```

——但我不确定我是否正确。正则表达式很糟糕，而且对 .htaccess 的理解很肤浅，我肯定会感谢一些指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:23:41.240

如果请求不包含单词 zebras，它甚至不会尝试这个正则表达式（节省 cpu）。这将在开始时交换条纹或斑马，并在斑马结束时替换它。

```
RewriteEngine On
RewriteCond %{REQUEST_URI} zebras
RewriteRule ^(stripes|news)/zebras/?$ zebras/$1 [R,L] 
```

这 /？它将使它也接受任何以 / 结尾的 uri，因为目录应该如此。

# java - 用 Java 创建一个天气应用程序

> ID：14801411
> 
> 赞同：0
> 
> 时间：2013-02-10T18:59:40.887
> 
> 标签：java, api, weather

我想用 Java 创建一个天气应用程序，只是为了好玩。
我知道如何使用 MaxMinds 的 GeoIP 数据库将 IP 映射到位置。

我打算使用它来自动检测用户的位置并在干净、简单的 GUI 上显示天气信息。

我的朋友使用了`BackStage BBC`他的 Uni 给他的 API，但他说他不能把它交给我，因为他不被允许。

我还有哪些其他替代 API 可用于获取天气信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T03:28:12.273

1.  [ProgrammableWeb的 Weather 类别](http://www.programmableweb.com/apis/directory/1?apicat=Weather)中的 API 的完整列表可能是您决定要使用哪个 API 的第一站。
2.  这些 API 中的大多数都支持 REST 标准，这将是您将信息集成到 Java 应用程序中的主要机制。

# networking - 将普通电话重新路由到 Skype

> ID：14801412
> 
> 赞同：0
> 
> 时间：2013-02-10T18:59:45.940
> 
> 标签：networking, skype, telephony, telecommunication, yahoo-messenger

我是一名移动/网络开发人员，但我想看看是否有任何可能的方法：将来电重新路由到 Skype 或任何其他语音聊天应用程序？

谁能解释一下哪些技术/ API 可以用来做这样的事情？

谢谢

如果这个问题在这里很宽泛或断章取义，请道歉。如果有，请告诉我在哪里发帖。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T19:03:25.050

看看[SipToSis](http://www.mhspot.com/sts/siptosis.html)。这不仅可以解决问题（GPL 许可的开箱即用的工作产品），而且最重要的是，学习它会帮助您了解所使用的 API。

# excel - Excel宏将xlsx转换为xls

> ID：14801413
> 
> 赞同：5
> 
> 时间：2013-02-10T18:59:54.100
> 
> 标签：excel, vba

我在文件夹中有一堆文件，它们都是`xlsx`格式的，我需要将它们转换为`xls`格式。这将在日常基础上进行。

*我需要一个宏，它将围绕文件夹循环并将文件从 xlsx 转换为 xls 而无需更改文件名。？*

这是我用来循环的宏

```
Sub ProcessFiles()
Dim Filename, Pathname As String
Dim wb As Workbook

Pathname = ActiveWorkbook.Path & "C:\Users\myfolder1\Desktop\myfolder\Macro\"
Filename = Dir(Pathname & "*.xls")
Do While Filename <> ""
    Set wb = Workbooks.Open(Pathname & Filename)
    DoWork wb
    wb.Close SaveChanges:=True
    Filename = Dir()
Loop
End Sub 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-10T19:48:34.507

您缺少的是，您需要使用新的文件[格式](https://msdn.microsoft.com/en-us/library/office/ff198017%28v=office.14%29.aspx)和名称`wb.Close SaveChanges=True`来调用，而不是调用以另一种格式保存文件。[`wb.SaveAs`](http://msdn.microsoft.com/en-us/library/office/ff841185%28v=office.14%29.aspx)

你说你想在不改变文件名的情况下转换它们，但我怀疑你真的是想用相同的基本文件名保存它们，但带有`.xls`扩展名。因此，如果工作簿已命名`book1.xlsx`，您希望将其另存为`book1.xls`. 要计算新名称，您可以[`Replace()`](https://msdn.microsoft.com/EN-US/library/office/gg264409%28v=office.14%29.aspx)对旧名称进行简单的操作，将`.xlsx`扩展名替换为`.xls`.

您还可以通过设置禁用兼容性检查器[`wb.CheckCompatibility`](https://msdn.microsoft.com/en-us/library/office/ff836165%28v=office.14%29.aspx)，并通过设置抑制警报和消息[`Application.DisplayAlerts`](https://msdn.microsoft.com/EN-US/library/office/ff839782%28v=office.14%29.aspx)。

```
Sub ProcessFiles()
Dim Filename, Pathname, saveFileName As String
Dim wb As Workbook
Dim initialDisplayAlerts As Boolean

Pathname = "<insert_path_here>"  ' Needs to have a trailing \
Filename = Dir(Pathname & "*.xlsx")
initialDisplayAlerts = Application.DisplayAlerts
Application.DisplayAlerts = False
Do While Filename <> ""
    Set wb = Workbooks.Open(Filename:=Pathname & Filename, _
                            UpdateLinks:=False)
    wb.CheckCompatibility = False
    saveFileName = Replace(Filename, ".xlsx", ".xls")

    wb.SaveAs Filename:=Pathname & saveFileName, _
              FileFormat:=xlExcel8, Password:="", WriteResPassword:="", _
              ReadOnlyRecommended:=False, CreateBackup:=False

    wb.Close SaveChanges:=False
    Filename = Dir()
Loop
Application.DisplayAlerts = initialDisplayAlerts
End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-05T10:13:26.907

```
Sub SaveAllAsXLSX()
Dim strFilename As String
Dim strDocName As String
Dim strPath As String
Dim wbk  As Workbook
Dim fDialog As FileDialog
Dim intPos As Integer
Dim strPassword As String
Dim strWritePassword As String
Dim varA As String
Dim varB As String
Dim colFiles As New Collection
Dim vFile As Variant
Set fDialog = Application.FileDialog(msoFileDialogFolderPicker)
With fDialog
    .Title = "Select folder and click OK"
    .AllowMultiSelect = True
    .InitialView = msoFileDialogViewList
    If .Show <> -1 Then
        MsgBox "Cancelled By User", , "List Folder Contents"
        Exit Sub
    End If
    strPath = fDialog.SelectedItems.Item(1)
    If Right(strPath, 1) <> "\" Then strPath = strPath + "\"
End With
If Left(strPath, 1) = Chr(34) Then
    strPath = Mid(strPath, 2, Len(strPath) - 2)
End If
Set obj = CreateObject("Scripting.FileSystemObject")
RecursiveDir colFiles, strPath, "*.xls", True
For Each vFile In colFiles
        Debug.Print vFile
    strFilename = vFile
    varA = Right(strFilename, 3)
    If (varA = "xls" Or varA = "XLS") Then
     Set wbk = Workbooks.Open(Filename:=strFilename)
       If wbk.HasVBProject Then
              wbk.SaveAs Filename:=strFilename & "m", FileFormat:=xlOpenXMLWorkbookMacroEnabled
            Else
               wbk.SaveAs Filename:=strFilename & "x", FileFormat:=xlOpenXMLWorkbook
            End If
            wbk.Close SaveChanges:=False
           obj.DeleteFile (strFilename)
    End If
Next vFile

End Sub
Public Function RecursiveDir(colFiles As Collection, _
                             strFolder As String, _
                             strFileSpec As String, _
                             bIncludeSubfolders As Boolean)

    Dim strTemp As String
    Dim colFolders As New Collection
    Dim vFolderName As Variant

    'Add files in strFolder matching strFileSpec to colFiles
    strFolder = TrailingSlash(strFolder)
    strTemp = Dir(strFolder & strFileSpec)
    Do While strTemp <> vbNullString
        colFiles.Add strFolder & strTemp
        strTemp = Dir
    Loop

    If bIncludeSubfolders Then
        'Fill colFolders with list of subdirectories of strFolder
        strTemp = Dir(strFolder, vbDirectory)
        Do While strTemp <> vbNullString
            If (strTemp <> ".") And (strTemp <> "..") Then
                If (GetAttr(strFolder & strTemp) And vbDirectory) <> 0 Then
                    colFolders.Add strTemp
                End If
            End If
            strTemp = Dir
        Loop

        'Call RecursiveDir for each subfolder in colFolders
        For Each vFolderName In colFolders
            Call RecursiveDir(colFiles, strFolder & vFolderName, strFileSpec, True)
        Next vFolderName
    End If

End Function
Public Function TrailingSlash(strFolder As String) As String
    If Len(strFolder) > 0 Then
        If Right(strFolder, 1) = "\" Then
            TrailingSlash = strFolder
        Else
            TrailingSlash = strFolder & "\"
        End If
    End If
End Function 
```

# python - zc.buildout 停止工作：ImportError: No module named apport.fileutils

> ID：14801416
> 
> 赞同：11
> 
> 时间：2013-02-10T19:00:28.657
> 
> 标签：python, buildout

我已经使用 buildout 很长一段时间没有任何问题，事实上我昨天没有任何问题。

但是今天我所有的项目都无法扩建。我在两个不同的 Ubuntu 工作站上尝试了相同的结果。

这是我得到的错误：

```
Initializing zc.buildout
Debug: Downloading http://pypi.python.org/packages/2.7/s/setuptools/setuptools-0.6c11-py2.7.egg
Traceback (most recent call last):
  File "bootstrap.py", line 259, in <module>
    import zc.buildout.buildout
  File "/tmp/tmpNkVMXW/zc.buildout-2.0.0-py2.7.egg/zc/buildout/buildout.py", line 18, in <module>
    import zc.buildout.easy_install
  File "/tmp/tmpNkVMXW/zc.buildout-2.0.0-py2.7.egg/zc/buildout/easy_install.py", line 59, in <module>
    pkg_resources.Requirement.parse('distribute')
AttributeError: 'NoneType' object has no attribute 'location'
Error in sys.excepthook:
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/apport_python_hook.py", line 66, in apport_excepthook
    from apport.fileutils import likely_packaged, get_recent_crashes
ImportError: No module named apport.fileutils

Original exception was:
Traceback (most recent call last):
  File "bootstrap.py", line 259, in <module>
    import zc.buildout.buildout
  File "/tmp/tmpNkVMXW/zc.buildout-2.0.0-py2.7.egg/zc/buildout/buildout.py", line 18, in <module>
    import zc.buildout.easy_install
  File "/tmp/tmpNkVMXW/zc.buildout-2.0.0-py2.7.egg/zc/buildout/easy_install.py", line 59, in <module>
    pkg_resources.Requirement.parse('distribute')
AttributeError: 'NoneType' object has no attribute 'location' 
```

它抱怨没有名为 apport.fileutils .. 的模块，但是当我运行 python 并导入它时，我没有例外：

```
from apport.fileutils import likely_packaged, get_recent_crashes 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-10T19:18:04.983

2.0.0 刚刚发布。旧的 bo​​otstrap.py 与 2.0.0 不兼容，但默认下载。您可以从[此处](http://downloads.buildout.org/2/bootstrap.py)获取 v2 bootstrap.py ，或者如果您想坚持使用旧版本，请使用下面的代码。

```
python bootstrap.py -v 1.7.0 
```

编辑：旧版本的 v1 bootstrap.py 不允许版本强制。[这里](http://downloads.buildout.org/1/bootstrap.py)的最新版本可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-07T09:58:47.097

问题+答案来自 2013 年。我最近（2015 年）看到它再次发生。

问题是 ubuntu 的`python-apport`包安装了一个`/usr/lib/python2.7/dist-packages/apport_python_hook.py`覆盖`sys.excepthook`. 它确保将 python 回溯输入到 ubuntu 的“apport”错误报告机制中。

这本身不是问题。但是`bootstrap.py`限制了python路径，使得钩子不能再导入`apport`了……

因此，如果在引导运行期间发生错误，则会打印一个异常，然后再次失败，因为无法导入 apport。

一个解决方案可能是`sudo apt-get remove python-apport`. 这至少是我们在服务器上所做的（在任何情况下，apport 都毫无意义）。

# c# - 如何在 Windows 8 中获得焦点控制？

> ID：14801422
> 
> 赞同：0
> 
> 时间：2013-02-10T19:00:48.780
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

如何在 Windows 8 中获得焦点控制？现在我正在使用`OnLostFocus`and `OnGoFocus`，使用变量来标记控件何时具有焦点。它适用于少量控件，但我需要一个通用解决方案。

在 Windows 窗体中，有一个获得焦点控件的功能，但我在 Windows 8 中找不到它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T19:08:44.633

使用 FocusManager 获取当前聚焦的控件。

# .net - 对数百万的列表项进行分组

> ID：14801424
> 
> 赞同：1
> 
> 时间：2013-02-10T19:01:23.307
> 
> 标签：.net

我将查询写入 Azure 表存储以提取大约 4000 万条记录的数据，我在客户端接收到数据，但是当我转换为 toList() 时，它会抛出内存不足异常。

谁能告诉我如何将 4000 万条数据加载到内存中，我必须存储所有 4000 万条记录并对这 4000 万条记录执行组操作，请建议处理 Out of memory 异常的正确方法。

# asp.net-mvc - Asp.Net Mvc 上传？

> ID：14801425
> 
> 赞同：0
> 
> 时间：2013-02-10T19:01:27.943
> 
> 标签：asp.net-mvc, uploadify

脚本

```
<script>
    $(document).ready(function () {
        console.log('@Url.Content(Request.Url.Authority + "/Content/uploadify/uploadify.swf")');
        $(function () {
            $("#file").uploadify({
               'uploader': '@Url.Content(Request.Url.Authority + "/Content/uploadify/uploadify.swf")',
               'script': '@Url.Action("_UploadImage", "Authors", new { area = "Admin" })',
               'cancelImg': '@Url.Content(Request.Url.Authority + "/Content/uploadify/uploadify-cancel.png")',
               'auto': false,
               'multi': false
            });
        })
    });
</script> 
```

html

```
@using (Html.BeginForm("Upload", "Home", FormMethod.Post, new { enctype = "multipart/form-data", id = "form_image" }))
{
    <p>
        <input type="file" name="file" id="file" />
        <a href="javascript:$('#file').uploadifyUpload();">Resmi Yükle</a>
    </p>
} 
```

consol 日志输出与我预期的一样正确。

> localhost:4574/Content/uploadify/uploadify.swf

错误信息：

> GET localhost:4574/Admin/uploadify.swf?preventswfcaching=1360522154772 404（未找到）

注意：脚本和 html 代码位于名为“Admin”的区域中。

我找不到我想念的东西。有什么建议吗？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-16T08:17:17.907

**BUG**当没有背景图片uploadify 对当前页面url 发出错误的http 请求，最后附加false。

这个错误的**解决方案**在于“jquery.uplodify.js”。只要找到这条线

*   `this.settings.upload_url = WFUpload.completeURL(this.settings.upload_url);this.settings.button_image_url = SWFUpload.completeURL(this.settings.button_image_url)`

并将其重写为-

*   `this.settings.upload_url = SWFUpload.completeURL(this.settings.upload_url);this.settings.button_image_url = this.settings.button_image_url ? SWFUpload.completeURL(this.settings.button_image_url) : this.settings.button_image_url`

# java - 使用 public getter/setter 访问同一个类中的私有变量，或者直接访问变量

> ID：14801428
> 
> 赞同：5
> 
> 时间：2013-02-10T19:01:29.057
> 
> 标签：java, oop

我正在学习编程，虽然我觉得我在编程方面有很好的知识（多年来一直在编写 PHP、Javascript 等），但我从未涉足 OOP 的世界。正因为如此，我要求对我所处的情况给出一个一般性的答案。我知道总会有一些例外，但我正在寻找这种情况下最正确的方法。

好的，所以我有两个课程，`Game`并且`GameGraphics`. `GameGraphics`将创建一个对象`Game`并使用它拥有的所有方法。我们最近了解到，一个类的所有变量都应该是私有的，因此所有变量`Game`都可以`GameGraphics`通过 getter 和 setter 访问。

但是，当我想访问类`Game`内部的变量时`Game`，我应该使用公共方法，还是直接访问变量？对此最正确的方法是什么？

如果这很重要，我正在用 Java 开发。请原谅我缺乏 OOP 经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-09T10:59:27.557

我建议您始终使用访问器方法。您的程序稍后将更容易调试。

让我给出一个相当常见的场景。假设您注意到属性如何意外更新，并且您想知道代码中属性可能更新的位置：

*   **如果您始终使用 setter 来更新值。**您可以在整个项目中搜索该字段的 setter 方法*一次*，然后就完成了。您的代码中可能*没有*其他地方可以更新值。甚至不在类本身内部（请记住：除了访问器之外没有直接的字段访问）。

*   **如果您同时使用 setter 方法和直接字段访问来更新值**，您将不得不搜索您的项目两次。首先，通过setter方法。其次，在球场上。请注意，从第二个列出的所有结果都可能是混淆的（该属性可能存在于搜索结果中，因为它要么正在被*访问*，要么正在被*更新*）。

此外，如果您想在更新或访问属性时进行一些调试并检查一些值，您可以将断点放在其 setter 或 getter 方法中。简单的。您不需要将断点放在其他地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T19:07:46.450

使用访问器方法（getter 和 setter）访问其他类的变量的两个主要原因是

*   将访问器呈现为接口成员的能力，以及
*   覆盖子类中的访问器的能力。

可读性的轻微下降是为这些优势付出的合理代价，因为它们允许您封装类的逻辑，从而对您进行更严格的控制。

这些优点都不适用于私有方法：它们不能实现接口方法，也不能被覆盖。事实上，Java 编译器通常会完全优化它们，尤其是那些更简单的。

这就是为什么我建议直接使用实例变量，而不是添加一个额外的层，这无助于可读性，但会被编译器优化掉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T19:06:05.293

这更多的是个人喜好问题。

您使用 getters\setters 的原因主要是为了隐藏调用类的实现（在您的情况下为 GameGraphics）。当其他开发人员需要使用您的代码时，这很好。并且您的 getter\setter 直接访问成员，因此在他们调用您的实例变量时调用它们有点多余。

但是，如果你的 getter\setter 做的不仅仅是改变像 logging\etc 这样的值，那么你显然总是需要使用它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T19:20:54.603

如果您只是在学习 OOP，那么一定要坚持通过公共方法公开的私有成员。这并不是说公共领域都不好，而是要了解何时使用哪个，您必须详细研究这两种方法。

在类中，几乎总是直接访问私有成员，这肯定是首选——封装的全部意义在于隔离栅栏内的代码和栅栏外的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-10T19:08:05.493

使用任何一个都没问题。getter/setter 的重点是为不了解类内部但类本身知道其内部的客户提供对字段的安全访问。如果 getter/setter 做了一些额外的事情，即使它们是从类内部调用的，也需要调用它们。否则，您可以直接访问字段。

# dart - 使用 Dartium 时，是否可以在网站上调用 Dart REPL？

> ID：14801429
> 
> 赞同：5
> 
> 时间：2013-02-10T19:01:39.753
> 
> 标签：dart, dartium

我现在知道我无法[通过控制台与 Dart](https://stackoverflow.com/questions/14793357/is-it-possible-to-enter-dart-code-directly-into-the-chromium-dev-tools-console)交互，但我希望可能有另一种方式在 Dartium 中调用 REPL。

基本上，我想做的是： 1\. 访问 Dartium 中的网站 2\. 调用某种 Dart REPL 3\. 使用 Dart 命令而不是 Javascript 来处理 DOM、CSS 等。

这可能吗？或者说，Dart 开发模型都是 Edit/Refresh 吗？

干杯安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-21T18:26:08.080

Dartium 中的 Chrome 开发工具现在可以让你很好地做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T16:36:34.650

Dart 编辑模型是 Edit/Refresh。也许您正在寻找类似[http://try.dartlang.org/的东西](http://try.dartlang.org/)

# visual-studio-2010 - Resharper 和 VisualSvn 快捷方式

> ID：14801435
> 
> 赞同：3
> 
> 时间：2013-02-10T19:02:03.043
> 
> 标签：visual-studio-2010, resharper, visualsvn

在安装 resharper 并选择默认的 reshaper 快捷键方案后，我遇到了 VisualSvn 快捷键的问题。似乎 resharper 覆盖了所有快捷方式，而那些不在方案中的快捷方式则留空。这包括 VisualSvn 快捷方式（全为空白）。我知道我可以设置这些

工具->选项->环境->键盘

但是有没有办法应用所有默认的visualsvn快捷方式而无需手动输入每个快捷方式？

# javascript - 如何使用 Javascript 将 div 添加到 html 代码中

> ID：14801436
> 
> 赞同：0
> 
> 时间：2013-02-10T19:02:07.250
> 
> 标签：javascript, dom-events, onmouseover

我正在尝试创建一个函数，该函数应该获取鼠标坐标并使用它们的值绘制一个小半径并将它们插入 CSS 左侧和顶部位置。我被困在应该将我创建的 div 添加到 html 的部分。如果我不够清楚，请原谅我。

```
 <script type="text/javascript">
           function getcoord(event) {
           var x=event.clientX  ;
           var y=event.clientY  ;
           follow(x,y);
           function follow(xcor,ycor) {
           folowHTML =
'<div style="'background-color:red;width:30px;height:30px;'
   +'border-radius:30px;position:absolute;left:''+xcor;'top:'+ycor';">' 
   +'</div>';

          };}
                 </script>
                 <body onmouseover="getcoord(event);">

                  </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:36:51.600

你可以试试这样的...

```
<style>
    #follow {
        background-color: #fff;
        border:1px solid red;
        border-radius: 50%;
        height: 20px;
        margin:-10px 0 0 -10px;
        position: absolute;
        width: 20px;
        z-index: 10;
    }
</style>
<script>
    function initFollow(){

        var follow = document.createElement('div');

        follow.setAttribute('id','follow');
        document.getElementsByTagName("body")[0].appendChild(follow);

        window.addEventListener('mousemove', function(e) {
            var left = e.pageX + 'px',
                top  = e.pageY + 'px';
            follow.style.left = left;
            follow.style.top = top;
        }, false);

    }
    window.addEventListener('load',initFollow,false);
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T19:36:51.023

也许尝试添加这一行：

```
document.body.innerHtml = folowHTML + document.body.innerHtml; 
```

另外，您可能应该将位置更改`absolute`为`fixed`我认为的位置。

## 编辑：这是不好的方式

在这里你有答案： [在 </body> 标记之前插入元素与 vanilla JavaScript](https://stackoverflow.com/questions/14801921/instert-element-before-body-tag-with-vanilla-javascript/14801968#14801968)

# sql - TSQL where 案例

> ID：14801441
> 
> 赞同：4
> 
> 时间：2013-02-10T19:02:49.180
> 
> 标签：sql, sql-server, tsql

对于这个问题，我需要正确的 tsql 语法：

```
Select * from table where var_A='10'
select * from table where var_B='10' 
```

何时使用 var_A 或 var_B 取决于 var_C 的值

所以当`var_c='something'`使用`var_A='10'`else`var_B='10'`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T19:07:46.633

```
select *
from [table]
where case when var_c = 'something' then var_a else var_b end = '10' 
```

[SQL Fiddle 与演示](http://sqlfiddle.com/#!3/45759/1)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T03:10:00.077

伊恩可能有最好的答案，但我想我会为不同的（虽然不太灵活）方法提供另一个答案，以防万一：

```
IF var_c = 'something' BEGIN
    SELECT * FROM [table] WHERE var_a = '10'
END
ELSE BEGIN
    SELECT * FROM [table] WHERE var_b = '10'
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T04:18:10.567

这就是你在 where 子句中使用 case 语句的方式。

```
select * from table
where ( case when var_c = 'something' 
        then var_a
        else 
            var_b
        end
      ) 
```

# php - 如何跳过mysql中的每一行？

> ID：14801442
> 
> 赞同：2
> 
> 时间：2013-02-10T19:02:50.693
> 
> 标签：php, mysql

我在 mysql 中有一个表，我正在从这个表中获取结果。但我不想获取此表中的所有行，而只想获取其他每一行。所以首先获取第一行然后跳过第二行，获取第 3 行并跳过第 4 行，依此类推。

有没有办法做到这一点，如果有的话，有人可以告诉我怎么做。

我试过这个：

功能：

```
function blocked_users_list() {
            global $connection;
            global $_SESSION;
            global $profile_id;
            $query = "SELECT
  baseview.* 
  @odd:=1-@odd AS even
FROM 
  (
   SELECT *
    FROM ptb_block_user
    WHERE
      WHERE ptb_block_user.blocked = '1'
      AND ptb_block_user.blocked_id = ".$_SESSION['user_id']."
  ) AS baseview,
  (
    SELECT @odd:=0
  ) AS filter
WHERE
  even=1                
                        ";
            $blocked_users_list = mysql_query($query, $connection);
            confirm_query($query, $connection);
            return $blocked_users_list;
        } 
```

php:

```
<?php
        $blocked_users_list = blocked_users_list();
        while ($block = mysql_fetch_array($blocked_users_list)) { 

?> 
```

但它给出了这个错误：

```
Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in /Applications/XAMPP/xamppfiles/htdocs/ptb1/blocked_users.php on line 44 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T19:06:40.957

在查询中执行：

```
SELECT * 
FROM ( 
    SELECT 
        @row := @row +1 AS rownum, [column name] 
    FROM ( 
        SELECT @row :=0) r, [table name] 
    ) ranked 
WHERE rownum % [n] = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T19:30:54.490

您可以在 mysql 中使用模数（一个查询）

```
select * from `table` where `id` % 2 = 1 
```

检索所有奇数 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T19:08:42.377

假设您有类似的查询

```
SELECT 
  col1 AS colA,
  col2 AS colB
FROM
  sometable
WHERE
  something=17 
```

获取**所有**行作为基线。然后，您可以使用过滤每隔一行

```
SELECT
  baseview.* 
  @odd:=1-@odd AS even
FROM 
  (
    SELECT 
      col1 AS colA,
      col2 AS colB
    FROM
      sometable
    WHERE
      something=17
  ) AS baseview,
  (
    SELECT @odd:=0
  ) AS filter
WHERE
  even=1 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-10T19:07:13.980

使用变量记录索引，然后使用 mod 2 ( `$ind % 2`) 检查 - 这将返回 0 或 1。

```
<?php
    $users_list = users_list();
    $ind = 0;
    while ($user = mysql_fetch_array($users_list)) { 
        if(($ind++)%2) echo "something"; 
    } 
?> 
```

# php - 简单的 Acl 控制应用程序 - 不允许我添加新用户

> ID：14801443
> 
> 赞同：0
> 
> 时间：2013-02-10T19:02:52.720
> 
> 标签：php, cakephp, cakephp-2.3

我是 CakePHP 的新手，我正在尝试实现[Simple Acl Controlled Application tutorial](http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/simple-acl-controlled-application.html)，我已经到了尝试添加新用户和组的部分。

我成功添加了组，但是当我尝试添加新用户时，我收到“无法保存用户。请重试。” 部分功能。

```
public function add() {
        if ($this->request->is('post')) {
            $this->User->create();
            if ($this->User->save($this->request->data)) {
                $this->Session->setFlash(__('The user has been saved'));
                $this->redirect(array('action' => 'index'));
            } else {
                $this->Session->setFlash(__('The user could not be saved. Please, try again.'));
            }
        }
    } 
```

我注意到表单试图创建一个包含我创建的所有不同组的下拉框，但下拉框是空的，我创建了三个不同的组（管理员、响应者和志愿者）。

这是添加用户视图的副本..

```
<div class="users form">
<?php echo $this->Form->create('User'); ?>
    <fieldset>
        <legend><?php echo __('Add User'); ?></legend>
    <?php
        echo $this->Form->input('id');
        echo $this->Form->input('username');
        echo $this->Form->input('password');
        echo $this->Form->input('group_id');
    ?>
    </fieldset>
<?php echo $this->Form->end(__('Submit')); ?>
</div>
<div class="actions">
    <h3><?php echo __('Actions'); ?></h3>
    <ul>

        <li><?php echo $this->Html->link(__('List Users'), array('action' => 'index')); ?></li>
    </ul>
</div> 
```

按要求型号：

```
<?php

App::uses('AppModel', 'Model');
App::uses('AuthComponent', 'Controller/Component');

class User extends AppModel {

    public $belongsTo = array('Group');
    public $actsAs = array('Acl' => array('type' => 'requester'));

    public function parentNode() {
        if (!$this->id && empty($this->data)) {
            return null;
        }
        if (isset($this->data['User']['group_id'])) {
            $groupId = $this->data['User']['group_id'];
        } else {
            $groupId = $this->field('group_id');
        }
        if (!$groupId) {
            return null;
        } else {
            return array('Group' => array('id' => $groupId));
        }
    }

    public $primaryKey = 'id';

    public $validate = array(
        'id' => array(
            'numeric' => array(
                'rule' => array('numeric'),
            ),
        ),
        'username' => array(
            'notempty' => array(
                'rule' => array('notempty'),
            ),
        ),
        'password' => array(
            'notempty' => array(
                'rule' => array('notempty'),
            ),
        ),
        'group_id' => array(
            'numeric' => array(
                'rule' => array('numeric'),
            ),
        ),
    );

    //The Associations below have been created with all possible keys, those that are not needed can be removed

    //old belongs to
//    public $belongsTo = array(
//        'Group' => array(
//            'className' => 'Group',
//            'foreignKey' => 'group_id',
//            'conditions' => '',
//            'fields' => '',
//            'order' => ''
//        )
//    );

    public $hasMany = array(
        'Post' => array(
            'className' => 'Post',
            'foreignKey' => 'user_id',
            'dependent' => false,
            'conditions' => '',
            'fields' => '',
            'order' => '',
            'limit' => '',
            'offset' => '',
            'exclusive' => '',
            'finderQuery' => '',
            'counterQuery' => ''
        )
    );

    public function beforeSave($options = array()) {
        $this->data['User']['password'] = AuthComponent::password($this->data['User']['password']);
        return true;
    }

} 
```

调试信息：

```
array(
    'User' => array(
        'password' => '*****',
        'id' => '',
        'username' => 'iwanjones'
    )
) 
```

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:18:32.470

在您视图中的表单中，您将`id`字段创建为输入字段（尽管通过 Cake 的自动魔法它应该将其转换为隐藏输入）。创建新用户时，还没有`id`。将在保存（创建）记录时确定。在大多数应用程序中，这将由 MySQL 后端的`AUTO_INCREMENT`功能完成，它选择第一个可用的“免费”id。

在添加新用户的情况下，该`id`字段因此不是必需的。只有当您想要编辑现有用户并确保 Cake 编辑正确的用户时才需要它，方法是设置它的 id。

此时您在视图中设置了 id 字段，但它没有任何价值，因为它是一个新用户。`id`在您的模型中，您添加了一个要求字段为数字的验证规则。但是，该值实际上是空的。你应该做两件事来让它工作：

1.  `echo $this->Form->input('id');`从添加视图中删除该行。
2.  从模型中删除 id 字段的验证规则（验证主键字段非常少见，因为 Cake 已经以正确的方式处理了这个问题）。

这应该允许用户成功保存。

# operators - PostScript 标记令牌

> ID：14801445
> 
> 赞同：6
> 
> 时间：2013-02-10T19:03:03.100
> 
> 标签：operators, interpreter, postscript

在 PostScript 中，如果你有

```
[4 5 6] 
```

你有以下令牌：

```
mark integer integer integer mark 
```

堆栈是这样的：

```
| mark |
| mark | integer |
| mark | integer | integer |
| mark | integer | integer | integer |
| array | 
```

现在我的问题 **是：]-mark 运算符是文字对象还是可执行对象？**

我是否正确 [-mark 是文字对象（只是数据）并且 ]-mark 是可执行对象（因为当您看到此 ]-mark 运算符时总是需要创建一个数组）？

PostScript 语言参考手册第 3.3.2 节给了我：

> [ 和 ] 运算符在执行时会生成一个以封闭对象作为元素的文字数组对象。同样，<< 和 >> (LanguageLevel 2) 产生一个文字字典对象。

我不清楚这两个 [ ] 运算符是可执行的还是只有 ] 运算符。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T07:31:45.260

# 概括。

所有这些特殊标记 , , `[`,`]`都作为*可执行名称*从扫描器中出来。并被定义为产生一个标记类型对象（因此它们本身不是*运算符*，但它们是在所有运算符所在的位置定义的可执行名称）。并且被定义为过程或操作符，其执行方式与任何其他过程或操作符一样。这些使用运算符来查找左括号。但是所有这些标记都由扫描仪特殊处理，扫描仪可以识别它们而没有周围的空白，因为它们是其分隔符集的一部分。`<<``>>`*`[``<<`*`systemdict``]``>>``counttomark`**

 **# 细节。

这完全取决于你什么*时候*看。让我们追溯一下解释器对这些标记做了什么。我将用一个字符串来说明这一点，但它与文件的工作原理相同。

所以如果你有一个输入字符串

```
([4 5 6]) cvx exec 
```

`cvx`使文字对象*可执行*。程序流是一个文件对象，也标记为*可执行文件*。`exec`将对象推入执行堆栈，解释器在内部解释器处理循环的下一次迭代中遇到该对象。执行程序流时，*可执行*文件对象位于执行堆栈的最顶端。

解释器`token`用来调用扫描器。扫描程序会跳过初始空格，然后读取所有非空格字符直到下一个分隔符，然后尝试将字符串解释为数字，但未能将其变为可执行名称。括号是定界符集的一部分，因此被称为“自定界”。所以扫描器读取一个括号字符，停止读取，因为它是一个分隔符，发现它不能是一个数字，所以它产生一个可执行名称。

```
Top of Exec Stack | Operand Stack
(4 5 6]) [        | 
```

接下来，解释器循环执行任何可执行文件（除非它是一个数组）。*执行*令牌意味着从字典中加载它，然后执行定义（如果*它是*可执行的）。`[`定义为`-mark-`对象，与`mark`定义名称相同。从技术上讲，它不是操作员或程序，它只是一个定义。自动加载发生是因为名称来自扫描仪并设置了可执行标志。

```
(4 5 6])  | -mark- 
```

然后扫描器产生 4、5 和 6，它们是数字并被直接推入操作数堆栈。6 由`]`在流上推回的 定界。

```
(])  | -mark- 4 5 6 
```

解释器不*执行*这些数字，因为它们是不可*执行*的，但如果它执行了，它会是一样的。执行一个数字的*动作*只是将它压入堆栈。

然后，扫描仪终于遇到了右支架`]`。这就是魔法发生的地方。自定界，后面不需要任何空格。扫描器产生可执行文件名`]`，解释器通过加载来执行它，它发现......

```
{ counttomark array astore exch pop } 
```

或者可能是执行此操作的实际操作员。但是，是的。`counttomark`产生元素的数量。`array`创建该大小的数组。`astore`用堆栈中的元素填充数组。并`exch pop`一劳永逸地丢弃那个讨厌的标记。

对于字典，`<<`与 完全相同`[`。它留下一个标记。然后你排列一些键值对，并且`>>`是对...产生影响的过程

```
{ counttomark dup dict begin 2 idiv { def } repeat pop currentdict end } 
```

制作字典。定义所有对。弹出标记。拿出字典。此版本的过程尝试通过将其设置为双倍大小来创建*快速*字典。将`2 idiv`to 移到前面`dup`以制作一个*小*字典。

因此，从哲学上讲，`counttomark`是您正在使用的运算符。并且它需要一个不用于其他任何东西的特殊对象类型，marktype 对象，`-mark-`. 其余的只是*语法糖*，让您访问这种堆栈计数能力来创建线性数据结构。

# 附录

这是一个模拟解释器循环读取的过程`currentfile`。

```
{currentfile token not {exit} if dup type /arraytype ne {exec} if }loop 
```

`exec`负责`load`ing（并进一步*执行*）任何可执行文件名。从中可以看出，这`token`确实是扫描仪的名称；并且解释器循环*直接遇到*的过程（数组）不会被执行（ `type /arraytype ne {exec} if`）。

然而，使用`token`字符串可以让你做一些*很酷的事情*。例如，您可以使用替换名称动态构造过程主体。这很像一个 lisp 宏。

```
/makeadder { % n  .  { n add }
    1 dict begin
    /n exch def
    ({//n add}) token % () {n add} true
    pop exch pop % {n add}
    end
} def 
```

`token`从字符串中读取整个过程，将*立即评估的名称* `//n`替换为其当前定义的值。请注意，扫描程序一次读取一个可执行数组，在返回之前在内部有效地执行`[`... `] cvx`（在某些解释器中，例如我自己`xpost`的在单独的内存中。但是 2 级垃圾收集使这在很大程度上无关紧要）。

还有`bind`一个运算符通过用运算符对象本身替换运算符名称来修改过程。这些技巧可帮助您在速度关键的过程（如内部循环）中排除名称查找。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T20:32:06.253

[ 和 ] 都是可执行标记。[ 产生一个标记对象， ] 创建一个对象数组到最后一个标记**

# java - 检查两个单词，看单词 a 的开头是否等于单词 b

> ID：14801450
> 
> 赞同：0
> 
> 时间：2013-02-10T19:04:04.983
> 
> 标签：java, compare, substring

给定以下字符串

```
String a = "hello";
String b = "hell";
String c = "help"; 
```

我想知道字符串 b 是否是 a 的子字符串，以及字符串 c 是否是 a 的子字符串。

您可以在这里看到答案显然是 b 是肯定的，而 c 是否定的。如何在 Java 中执行此测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T19:05:14.130

很简单：

```
if (a.startsWith(b)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T19:05:36.260

尝试这个：

```
if(a.contains(b)) {...}
if(a.contains(c)) {...} 
```

也适用于：

```
if(a.contains("ell")) {...} 
```

# mysql - 创建外键时出错

> ID：14801458
> 
> 赞同：0
> 
> 时间：2013-02-10T19:05:05.467
> 
> 标签：mysql

我一直在搜索 SO 和 Google 来解决这个问题，但我想出的几乎就是我的错误消息告诉我的，这不是问题所在。

我正在使用 PHPMyAdmin 创建表之间的关系。我有这个表“warehouse_product_history”，其中有一列“from”类型为 int(11) NULL。我尝试为表“仓库”创建一个外键，PHPMyAdmin 执行此操作时执行的查询如下

```
ALTER TABLE  `warehouse_product_history` 
ADD FOREIGN KEY (`from`) REFERENCES `my_db`.`warehouses` (`id`)
ON DELETE CASCADE ON UPDATE CASCADE; 
```

仓库->id 的类型是 int(11) NOT NULL，所以这不应该是问题。我试图将 `from-column 的数据类型更改为 int(11) NOT NULL 但结果相同。

我收到此错误消息

```
Error creating foreign key on from (check data types) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T21:34:13.367

从您的表架构来看，您的列并不相同。`warehouses.id`是签名的`UNSIGNED NOT NULL`地方， .`warehouse_product_history.from``DEFAULT NULL`

# vba - 如何使用 pastepecial 将图表作为位图粘贴到 vba 中的另一张纸上

> ID：14801459
> 
> 赞同：1
> 
> 时间：2013-02-10T19:05:13.403
> 
> 标签：vba, excel, charts, bitmap, copy-paste

有没有办法使用过去的特殊方法将复制的图表作为位图粘贴到另一个工作表。目前这是我的语法-

```
PasteSheet.PasteSpecial (Format:="Bitmap", Link:=False, DisplayAsIcon:=False) 
```

PasteSheet 是我要粘贴到的另一个工作表。目前使用此代码，它仅粘贴在活动工作表中。我是否必须使用选择复制然后选择我要粘贴到的页面，然后改回我复制的工作表？我希望不会因为我有很多床单哈哈。

谢谢

编辑：我发现如果我将图表复制为形状而不是图表对象，我可以使用 pasteSpecial 方法粘贴到另一张表。话虽如此，它现在将图表粘贴到另一个创建一个巨型图表哈哈。

```
GraphSheet.Shapes(chtName).Copy 
PasteSheet.PasteSpecial Format:="Microsoft Office Drawing Object", Link:=False , _
     DisplayAsIcon:=False 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T06:17:31.210

这无需激活/选择 Sheet2 即可工作：

```
Sheet1.ChartObjects(1).Chart.CopyPicture
Sheet2.Paste 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T19:59:00.957

> 我是否必须使用选择复制然后选择我要粘贴到的页面，然后改回我复制的工作表？

**是**的 - 您粘贴到的工作表必须处于活动状态。使用`Sheets("mytargetname").Select`——仅仅使用`Activate`是不够的……

如果你设置

```
Application.ScreenUpdating = False 
```

执行此操作时，您的屏幕不会闪烁...

# templates - Firefox 扩展：如何将配置文件目录中的文件作为 XUL 的数据源？

> ID：14801464
> 
> 赞同：1
> 
> 时间：2013-02-10T19:05:33.753
> 
> 标签：templates, firefox-addon, xul

假设我正在编写一个 Firefox 扩展/附加组件，并且我有一些用户数据存储在用户配置文件目录中的文件（XML 或 RDF 格式）中。我想将该数据用作 XUL 模板的数据源。有没有办法以安全、跨平台的方式引用文件？

到目前为止，根据我所做的所有阅读，我唯一的想法是从 XUL 中的“rdf:null”数据源开始，并`datasources`在使用 FileUtils 获取配置文件目录的路径之后替换代码中的属性. 这是唯一的方法吗？

# asp.net-mvc - ViewModel 中的 ICollection 显示为 null，modelstate 在 MVC4 中无效

> ID：14801466
> 
> 赞同：0
> 
> 时间：2013-02-10T19:05:36.213
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我有以下视图模型：

```
public class CreateCardViewModel
    {
        [HiddenInput(DisplayValue = false)]
        public int SetId { get; set; }

        [Required]
        public ICollection<Side> Sides { get; set; }

        [Required]
        [DataType(DataType.Date)]
        public DateTime DateCreated { get; set; }

        [Required]
        public bool IsReady { get; set; }

    } 
```

以及为创建定义的以下操作：

```
[HttpGet]
        public ActionResult Create(int setId)
        {
            var model = new CreateCardViewModel();

            // attach card to current set
            model.SetId = setId;

            // create a new Side
            var side = new Side() {Content = "Blank Side"};

            // Add this to the model's Collection
            model.Sides = new Collection<Side> { side };

            return View(model);
        }

        [HttpPost]
        public ActionResult Create(CreateCardViewModel viewModel)
        {
            if (ModelState.IsValid)
            {
                var set = _db.Sets.Single(s => s.SetId == viewModel.SetId);
                var card = new Card {Sides = viewModel.Sides};

                set.Cards.Add(card);

                _db.Save();
            }
            return View(viewModel);

        } 
```

当我尝试创建新卡时，viewModel 的 Sides 属性为空，因此 ModelState 出现为空。我不太明白为什么最初的 Side 没有通过模型。

我的视图如下所示：

```
<h2>Create</h2>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>CreateCardViewModel</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.SetId)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.SetId)
            @Html.ValidationMessageFor(model => model.SetId)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.DateCreated)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.DateCreated)
            @Html.ValidationMessageFor(model => model.DateCreated)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.IsReady)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.IsReady)
            @Html.ValidationMessageFor(model => model.IsReady)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:23:47.090

您的视图中没有任何内容绑定到`Sides`您的 ViewModel 的属性。如果表单中没有任何内容来保存该属性的值，则在发生模型绑定时它将为空。您需要以某种方式捕获`Side`表单中的 - 您如何添加/删除此属性？通过应该在表单上进行的用户交互？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T19:10:43.873

尝试在 Create() 类型上添加第二个参数`ICollection<Side>`，看看是否有任何东西传递给它。

# python - 使用 = 命令时，Vim 不会正确缩进 Python 代码

> ID：14801468
> 
> 赞同：3
> 
> 时间：2013-02-10T19:05:46.640
> 
> 标签：python, vim

当我使用 = 命令缩进整个 Python 文件或部分时，它不会正确缩进它。这是我的vimrc：

```
set nocompatible
syntax on
set ruler
set tabstop=2
set softtabstop=2
set shiftwidth=2
set expandtab
set smarttab
set hlsearch
set incsearch
set ignorecase
set autoindent
" turn on line numbers:
set number
" Toggle line numbers and fold column for easy copying:
nnoremap <F2> :set nonumber!<CR>:set foldcolumn=0<CR>
nnoremap <F4> :set nospell!<CR>
nnoremap <F3> :set invpaste paste?<Enter>
imap <F3> <C-O><F3>
set pastetoggle=<F3>

filetype on
filetype plugin indent on
filetype plugin on

" Execute file being edited with <Shift> + e:
map <buffer> <S-e> :w<CR>:!/usr/bin/env python % <CR>
let g:solarized_termcolors=256
set background=dark
colorscheme solarized 
"set spell spelllang=en_us

set backspace=indent,eol,start
autocmd FileType python set complete+=k~/.vim/syntax/python.vim isk+=.,(
autocmd VimEnter * NERDTree 
```

此外，当我使用 w 或 b 遍历我的 python 文件时，或者删除它时不会正确删除。例如，它不会停止在 . 或 ( 当删除他们之前的作品时，甚至会删除这些作品。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T19:44:31.323

你应该去掉`filetype on`and `filetype plugin on`:`filetype plugin indent on`是你唯一需要的行。

***编辑***

~~`.`和的问题`(`几乎可以肯定是由`iskeyword`. 我隐约记得有人遇到过同样的问题，因为他/她在一些误导性的博客文章中发现他/她需要基于字典的补全。因为他/她的字典文件中的条目在 form 中`.method(`，所以他/她需要`.`将 视为关键字字符。~~

在编辑 Python 文件时尝试以下命令：

```
:verbose set iskeyword? 
```

~~它应该返回一个逗号分隔的值列表，其中包括`.`和`(`以及设置它的位置。它很可能是第三方 python ftplugin，因为默认的 ftplugin 没有 touch `iskeyword`。~~

此行是导致`.`/`(`问题的原因：

```
autocmd FileType python set complete+=k~/.vim/syntax/python.vim isk+=.,( 
```

1.  你绝对不需要那种补全机制，因为 Vim 的默认全补全功能已经足够强大了。

2.  因为完成机制是如何实现的，以及你的字典文件是如何编写的`.`，`(`Vim 必须将其视为关键字字符。

3.  您的自定义/语法文件甚至可能不会像那样形成，因此此设置甚至可能不起作用。

4.  `isk`是 的缩写形式`iskeyword`，定义什么是关键字字符的选项。

您似乎从其他人那里复制了设置，却不了解他们做了什么。你的问题的答案是你自己的这个简单的事实`~/.vimrc`应该足以告诉你这个想法有多么错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T20:23:34.727

你可以正常粘贴使用`:set paste`，我有一个非常方便的宏：

```
set pastetoggle=<F10> 
```

您可以将其设置为任何其他键，只需将其添加到您的`.vimrc`文件中

# apache-pig - pig 为空查询

> ID：14801469
> 
> 赞同：0
> 
> 时间：2013-02-10T19:05:50.040
> 
> 标签：apache-pig

我正在使用猪 0.10。我有一个外袋（关系）

```
grunt>dump e;
(vinyas,(shetty,12),{(12,vinyas),(99,shetty)})
(vas,(shety,12),{(12,vinyas),(33,shetty)})
(fgkyas,(shety,12),{(12,vinyas),(12,shetty)})
(fky,(uhjyt,12),{(,),(,)})

grunt> describe e;
e: {name: chararray,t: (),b: {t: (x: int,y: chararray)}}

grunt> op = filter e by IsEmpty(b) or b is null; 
```

现在 op 没有返回任何东西。我实际上期待返回关系 e 的最后一个元组（即带有“fky”的名称）。可以 some1 plz 解释这种行为吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T23:39:06.703

[`IsEmpty`](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.pig/pig/0.11.0/org/apache/pig/builtin/IsEmpty.java#IsEmpty.0isEmpty)检查 的大小`DataBag`，这也考虑了空元组。所以你需要指定更严格的检查。

（而且`b`绝对不是`NULL`——这样就不会得到你想要的）。

# java - 将 Java 中的类关系转换为数据库模式

> ID：14801475
> 
> 赞同：0
> 
> 时间：2013-02-10T19:06:47.087
> 
> 标签：java, hibernate, orm, hibernate-mapping

在没有 XML 映射文件的情况下自动将类转换为数据库模式的最佳工具/框架是什么？

我的问题是，我有大约 20 个彼此之间具有不同关系（关联、内部类等）的类，我想将所有这些转换为数据库表以保存所有这些数据及其关系。

我尝试查看一些 Hibernate 教程，发现它需要构建一个映射 XML，这对我的情况来说非常痛苦。

有什么框架可以自动化这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T19:22:23.977

或者，您可以注释您的类而不是使用 XML，然后从您的实体生成模式。无论如何，我强烈建议以易于使用 OR 映射器的方式编写类。最好事先设计您的模型以使用 Hibernate。

# python - 使用并行 python 和类

> ID：14801476
> 
> 赞同：0
> 
> 时间：2013-02-10T19:06:52.317
> 
> 标签：python, oop, parallel-python

我很震惊地发现互联网上关于并行 python (PP) 和处理类的教程和指南很少。我遇到了一个问题，我想启动同一个类的几个实例，然后检索一些变量（例如并行读取 5 个数据文件的实例，然后检索它们的数据）。这是一段简单的代码来说明我的问题：

```
import pp

class TestClass:
    def __init__(self, i):
        self.i = i

    def doSomething(self):
        print "\nI'm being executed!, i = "+str(self.i)
        self.j = 2*self.i
        print "self.j is supposed to be "+str(self.j)
        return self.i

class parallelClass:
    def __init__(self):
        job_server = pp.Server()
        job_list = []
        self.instances = [] # for storage of the class objects
        for i in xrange(3):
            TC = TestClass(i) # initiate a new instance of the TestClass
            self.instances.append(TC) # store the instance
            job_list.append(job_server.submit(TC.doSomething, (), ())) # add some jobs to the job_list
        results = [job() for job in job_list] # execute order 66...

        print "\nIf all went well there's a nice bunch of objects in here:"
        print self.instances
        print "\nAccessing an object's i works ok, but accessing j does not"
        print "i = "+str(self.instances[2].i)
        print "j = "+str(self.instances[2].j)

if __name__ == '__main__' :
    parallelClass() # initiate the program 
```

为了您的方便，我添加了评论。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:57:06.323

# 你应该使用`callbacks`

A`callbacks`是您传递给`submit`调用的函数。该函数将以作业的结果作为参数调用（[查看 API 以了解更多奥术用法](http://www.parallelpython.com/content/view/15/30/#API)）。

# 在你的情况下

设置回调：

```
class TestClass:
    def doSomething(self):
         j = 2 * self.i
         return j # It's REQUIRED that you return j here.

    def set_j(self, j):
        self.j = j 
```

将回调添加到作业提交调用

```
 class parallellClass:
      def __init__(self):
          #your code...
          job_list.append(job_server.submit(TC.doSomething, callback=TC.set_j)) 
```

你完成了。

我对代码进行了一些改进，以避免`self.j`在`doSomething`调用中使用，并且只使用局部`j`变量。

如评论中所述，在 中`pp`，您仅传达工作的结果。这就是为什么你**必须**返回这个变量，它将被传递给回调。

# ruby-on-rails - 混合backbone.js 路由器和rails 控制器

> ID：14801477
> 
> 赞同：4
> 
> 时间：2013-02-10T19:06:59.913
> 
> 标签：ruby-on-rails, backbone.js, ruby-on-rails-3.2

我目前正在尝试将主干.js 移植到我的 Rails 应用程序中。对于初学者，我想将它构建到 /applications 的 rails 应用程序的特定部分。话虽如此，我有一个 Rails 资源“资源：应用程序”，它给了我 localhost:3000/applications。现在，当我为 /applications 实例化主干时，我会在该 rails 资源处获得主干路由的锚标记。IE 本地主机：3000/applications/#applications/5。

鉴于我只会在 rails 应用程序的特定部分使用主干，因此不会使其成为单页应用程序，这是正确的做事方式吗？URL 似乎有点多余。

正确的答案可能是我需要取消骨干路由器？如果是这样，那么在尝试查找集合/模型时如何将 :id 传递给主干应用程序。

我使用主干的目的是帮助组织 Rails 应用程序的特定部分，该部分将是大量 javascript。

我应该提到我可以将路由器更改为：

```
routes:
 '': 'index'
 ':id': 'show' 
```

这将为我提供 localhost:3000/applications/#/1 的 url - 但是我认为这将我画到了一个角落，并且不允许我在其他 Rails 资源上使用主干。如果我要调用主干的 localhost:3000/dashboard，那么将执行错误的主干.js 功能。

另一个想法是为每个 rails 资源调用一个骨干路由器。我可以使用上述路由代码，因为只会为该 rails 资源调用路由器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T03:20:27.317

我最终弄清楚了这一点。我转而使用主干导轨并按照他们的教程启动并运行示例应用程序；[https://github.com/codebrew/backbone-rails](https://github.com/codebrew/backbone-rails)。解决方案出现在 rails html.erb 中，并且只加载我需要的 rails 资源的特定路由器。

```
routes:
  "new"      : "newPost"
  "index"    : "index"
  ":id/edit" : "edit"
  ":id"      : "show"
  ".*"        : "index" 
```

然后说一个posts.html.erb，我可以输入以下内容。

```
<div id="posts"></div>

<script type="text/javascript">
  $(function() {
    // Blog is the app name
    window.router = new Testing.Routers.PostsRouter({posts: <%= @posts.to_json.html_safe -%>});
    Backbone.history.start();
  });
</script> 
```

如果我的回答没有意义，我建议阅读上述 github 链接上的教程。

# javascript - 9 版之前的 IE 中 JavaScript 中的 replace() 方法等价于什么？

> ID：14801484
> 
> 赞同：0
> 
> 时间：2013-02-10T19:07:26.837
> 
> 标签：javascript, replace

我需要在脚本中使用 replace() 方法，但它在 9 版之前的 Internet Explorer 中不起作用！

因此，以下代码也在 IE < 9 中返回“访问 Microsoft”！

```
var str="Visit Microsoft!";
var n=str.replace("Microsoft","Sara"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T19:11:21.147

`replace()`适用于大多数浏览器（AFAIK 也 IE6、IE7）。

顺便说一句，您可以使用此功能从头开始实现它。

[http://phpjs.org/functions/str_replace/](http://phpjs.org/functions/str_replace/)

# c# - 内存错误大小

> ID：14801486
> 
> 赞同：0
> 
> 时间：2013-02-10T19:07:36.023
> 
> 标签：c#, memory

我尝试流式传输文件。我使用一个字节制表符。

```
byte[] byteBuffer=new byte[iSize]; 
```

`iSize`价值 1,459,126,243 和2,489,816 `GC.GetTotalMemory`。我的电脑上有 16 G 的内存。问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T21:27:37.527

你是在 x86 还是 x64 下编译？除非您在 x64 下运行，否则您将无法从 16gb 内存中受益……

# glsl - 使用 glsl 将屏幕淡化为特定颜色

> ID：14801488
> 
> 赞同：1
> 
> 时间：2013-02-10T19:07:44.647
> 
> 标签：glsl, fragment-shader

我想使用 glsl 将屏幕淡化为特定颜色到目前为止，这是我的 glsl 代码，它运行良好：

```
uniform sampler2D textureSampler;
uniform vec2 texcoordOffset;
uniform vec3 sp;
uniform vec3 goal;
varying vec4 vertColor;
varying vec4 vertTexcoord;
void main(void) {
  vec3 col=texture2D(textureSampler, vertTexcoord.st).rgb;
  gl_FragColor = vec4(col+((goal-col)/sp), 1.0);
  //gl_FragColor = vec4(col+((goal-col)*sp), 1.0); //as suggested below also this doesn't solve the problem
} 
```

我唯一的问题是，使用更高的 sp 值，颜色不会完全褪色为新颜色。我认为问题是由着色器工作的准确性引起的。有人知道如何提高准确性吗？

**编辑：** 可能是这种效果取决于驱动程序吗？我正在使用带有最新驱动程序的 ATI，也许有人可以在 NVIDIA 卡上尝试代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T19:12:57.600

让我们分解一下：

```
float A, B:
float Mix;

float C = A + (B-A) / Mix; 
```

现在很容易看出 Mix 必须是无限的才能创建纯 A，所以这根本不是 GLSL 的错。常用的方程如下

```
float C = A + (B-A) * Mix;
// Let's feed some data:
// Mix = 0 -> C = A;
// Mix = 1 -> C = A + (B - A) = A + B - A = B;
// Mix = 0.5 -> C = A + 0.5*(B - A) = A + 0.5*B - 0.5*A = 0.5*A + 0.5*B 
```

正确，对吧？

将您的代码更改为：

```
gl_FragColor = vec4(col+((goal-col) * sp), 1.0); 
```

并改用`<0,1>`in sp 的范围。另外，`sp`实际上不应该是浮动的吗？如果它的所有组件都相等（IOW `sp.x == sp.y == sp.z`），您只需更改它的类型，它就会起作用，如此[处所引用](https://stackoverflow.com/a/14753271/752976)。

# hidden-markov-models - 具有已知状态的马尔可夫模型

> ID：14801491
> 
> 赞同：1
> 
> 时间：2013-02-10T19:07:50.220
> 
> 标签：hidden-markov-models, markov-chains

我是隐藏马尔可夫模型的新手，并试图找出对以下问题进行建模的最佳方法：

我有一个可以处于三种不同状态的随机变量。与隐藏马尔可夫模型类似，我对序列中的下一个状态以及该状态将取什么值感兴趣，但我所拥有的状态是已知的而不是隐藏的。

非常感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T10:22:39.017

由于您没有隐藏组件，因此您实际上是在处理马尔可夫链。算法：Viterbi、Forward Backward 与 HMM 中的算法基本相似，实际上更简单。你可以参考[这个](http://vimeo.com/7175217)在加州大学洛杉矶分校教授的视频讲座。它首先介绍了马尔可夫链的算法，然后介绍了 HMM。

# java - 调用函数而不存储返回的值

> ID：14801499
> 
> 赞同：0
> 
> 时间：2013-02-10T19:08:32.240
> 
> 标签：java, function

调用返回值而不将返回值存储在变量中的函数是否可以？这是一些示例代码：

```
class Test
{ 
  int days[] = {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};

  boolean validity()
  { 
     //some code
     isLeap();
  }

  boolean isLeap(int y)
  {
       if(y%400==0 || (y%100!=0 && y%4==0))
       {
          days[1] = 29;             
          return true; 
       }
       else
       {
          days[1] = 28;         
          return false;
       }
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T19:10:21.423

是的，这是允许的。编译器不会抛出错误。但是在您的情况下，将处理器时间用于不必要的事情没有任何意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T21:08:39.373

是的，这是允许的

在您的代码示例中，这不是很好的编码风格......一个名为 isLeap(xxx) 的函数正在更新数据。我认为大多数人不会期望在这样的函数中更新数据的副作用。
意外的副作用可能会导致一些令人讨厌的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-28T10:39:47.673

是的，您可以调用一个函数，但永远不要将该函数的返回值存储在 java 中。但这只会不必要地消耗处理时间。因为您不会通过首先声明您希望通过方法完成一些处理并返回最终输出来实现您想要实现的目标。如果你不存储它不会有任何用处。

# c++ - 添加包含路径到 Waf 配置 (C++)

> ID：14801504
> 
> 赞同：10
> 
> 时间：2013-02-10T19:08:50.633
> 
> 标签：c++, python, compilation, include, waf

如何向 wscript 添加包含路径？

我知道我可以声明每个 cpp 文件中要包含哪些文件夹中的哪些文件，例如：

```
def build(bld):
    bld(features='c cxx cxxprogram',
        includes='include', 
        source='main.cpp', 
        target='app', 
        use=['M','mylib'], 
        lib=['dl']) 
```

但我不想为每个文件设置它。我想添加一个“全局包含”的路径，这样每次编译任何文件时都会包含它。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-10T21:19:41.790

我找到了答案。您只需将“包含”的值设置为您想要的路径列表。不要忘记`waf configure`再次运行:)

```
def configure(cfg):
    cfg.env.append_value('INCLUDES', ['include']) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T17:04:05.510

我花了一些时间在 bld.program() 方法中使用“use”选项找到一个好方法。以使用 boost 库为例，我想出了以下内容。我希望它有帮助！

```
'''
run waf with -v option and look at the command line arguments given
to the compiler for the three cases.

you may need to include the boost tool into waf to test this script.
'''
def options(opt):
    opt.load('compiler_cxx boost')

def configure(cfg):
    cfg.load('compiler_cxx boost')
    cfg.check_boost()

    cfg.env.DEFINES_BOOST = ['NDEBUG']

    ### the following line would be very convenient
    ###     cfg.env.USE_MYCONFIG = ['BOOST']
    ### but this works too:
    def copy_config(cfg, name, new_name):
        i = '_'+name
        o = '_'+new_name
        l = len(i)
        d = {}
        for key in cfg.env.keys():
            if key[-l:] == i:
                d[key.replace(i,o)] = cfg.env[key]
        cfg.env.update(d)

    copy_config(cfg, 'BOOST', 'MYCONFIG')

    # now modify the new env/configuration
    # this adds the appropriate "boost_" to the beginning
    # of the library and the "-mt" to the end if needed
    cfg.env.LIB_MYCONFIG = cfg.boost_get_libs('filesystem system')[-1]

def build(bld):

    # basic boost (no libraries)
    bld.program(target='test-boost2', source='test-boost.cpp',
                use='BOOST')

    # myconfig: boost with two libraries
    bld.program(target='test-boost',  source='test-boost.cpp',
                use='MYCONFIG')

    # warning:
    # notice the NDEBUG shows up twice in the compilation
    # because MYCONFIG already includes everything in BOOST
    bld.program(target='test-boost3', source='test-boost.cpp',
                use='BOOST MYCONFIG') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-05T17:33:33.437

我想通了，步骤如下：

在 wscript 文件的配置功能中添加了以下检查。这告诉脚本检查给定的库文件（在本例中为 libmongoclient），我们将检查的结果存储在 MONGOCLIENT 中。

```
conf.check_cfg(package='libmongoclient', args=['--cflags', '--libs'], uselib_store='MONGOCLIENT', mandatory=True) 
```

在这一步之后，我们需要在 /usr/local/lib/pkgconfig 路径中​​添加一个包配置文件（.pc）。这是我们指定 lib 和 headers 路径的文件。在下面粘贴此文件的内容。

```
prefix=/usr/local 
libdir=/usr/local/lib 
includedir=/usr/local/include/mongo

Name: libmongoclient 
Description: Mongodb C++ driver 
Version: 0.2 
Libs: -L${libdir} -lmongoclient 
Cflags: -I${includedir} 
```

在依赖于上述库（即MongoClient）的特定程序的构建函数中添加了依赖项。下面是一个例子。

```
mobility = bld( target='bin/mobility', features='cxx cxxprogram', source='src/main.cpp', use='mob-objects MONGOCLIENT', ) 
```

在此之后，再次运行配置，并构建您的代码。

# asp.net-mvc - 在 asp.net mvc 应用程序中扩展 Knockout.js ViewModel

> ID：14801507
> 
> 赞同：2
> 
> 时间：2013-02-10T19:09:06.210
> 
> 标签：asp.net-mvc, knockout.js

通过几个简单的步骤，我已经让 KO 与 asp.net mvc 玩得很好：

1.  `var jsonModel = @Html.Raw(Json.Encode(Model));`
2.  `model = ko.mapping.fromJS(jsonModel);`
3.  `ko.applyBindings(model);`

瞧，我现在可以直接在 KO 绑定中使用我的服务器端模型。

```
<input type="text" data-bind="value: Name" /> 
```

如果我想扩展主模型，那很简单：

```
 model.blurevent = function(o,x) {
        var src = x.srcElement;
        alert(src.value);
    }; 
```

接下来，我想扩展模型的子类。例如，我的模型有一个 Resume 类，其中包含 Employers 集合。我想将客户端事件添加到 Employer 类。

所以，如果这只是一个纯 JavaScript 解决方案，我可以这样做：

```
function Employer() {
    this.ShowDetais = function() { this.DetailsVisible(true); }
} 
```

但是，由于我正在从服务器序列化整个模型（上面的#1），因此没有定义 Employer。相反，序列化程序只是创建一个匿名集合：

```
model = {
"Resume" : {
  ...
  "Employers": [
  {
    "ResumeEmployerID": 0,
    "Name": "Employer 1",
    "Title": null,
    "EmployedFrom": "\/Date(-62135578800000)\/",
    "EmployedTo": null,
    "GeneralDescription": null,
    "ProjectHighlights": {

    }
  }
 } 
```

如您所见，使用默认的 json 序列化程序，无需单独定义模型中使用的每个类（就像在纯 javascript 应用程序中那样），因此无法在客户端扩展子类。

我想知道这是否已经解决？是否有一个序列化程序可以创建一个更正式的模型，并且更可扩展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:26:34.017

我认为这个插件有望满足您的需求

[淘汰赛映射](http://knockoutjs.com/documentation/plugins-mapping.html)

它应该深入映射您的对象

我认为这个问题有一个很好的例子吗？[Knockout.js 和映射插件没有深度翻译](https://stackoverflow.com/questions/7563936/knockout-js-and-mapping-plugin-not-deep-translating)

# lisp - 如何测试符号中的第一个字符是否是lisp中的字母？

> ID：14801508
> 
> 赞同：2
> 
> 时间：2013-02-10T19:09:07.647
> 
> 标签：lisp, letters, character-properties

如何测试符号中的第一个字符是否是lisp中的字母？我知道它与 alpha-char-p 函数有关。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T19:10:48.037

像这样：

```
(alpha-char-p (char (string 'my-symbol) 0)) 
```

[`string`](http://www.lispworks.com/reference/HyperSpec/Body/a_string.htm) 将*字符串指示符*转换为字符串。这里的一些评论表明它太笼统了，最好使用 [`symbol-name`](http://www.lispworks.com/reference/HyperSpec/Body/f_symb_2.htm) which 将拒绝与符号以外的任何东西一起使用。我相信接受字符串指示符的接口更适合请求*符号的第一个字符*。

# objective-c - OS X 上 Cocoa 的 NSPageController 教程

> ID：14801513
> 
> 赞同：10
> 
> 时间：2013-02-10T19:09:50.177
> 
> 标签：objective-c, macos, cocoa

我需要`NSPageController`在某个项目中使用，但我不知道它是如何工作的，有没有人有时间给我看一些简单的教程，因为文档对我没有帮助。

忘了提：我正在研究`Mac project`（**NOT** `iOS`）

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-11-15T17:46:40.777

# 简单的 NSPageController 书本模式教程

创建新的**Cocoa 应用程序**- 项目。在界面生成器中打开`MainMenu.xib`并将**Image Well**和**Label**对象添加到您的应用程序窗口。同时添加**页面控制器**对象。

![](../Images/b1d3faa7918b2703933f5ae4f89e4732.png)

将**页面控制器的**视图设置为指向**Image Well**。

![](../Images/a8a47c45823c936d495bec5dff3d7296.png)

* * *

# 添加一些图片到`Images.xcassets`

我在这个示例项目中使用了三个图像：

*   第一个.png
*   第二个.png
*   第三个.png

* * *

# MyAppDelegate.h

**为Page Controller**、**Label**和**Image Well**添加引用插座。设置`MyAppDelegate`为`NSPageControllerDelegate`并添加`NSArray`图像。在此之后，您的`MyAppDelegate.h`文件应如下所示：

```
@interface MyAppDelegate : NSObject <NSApplicationDelegate, NSPageControllerDelegate>

@property (assign) IBOutlet NSWindow *window;
@property (unsafe_unretained) IBOutlet NSPageController *pageController;
@property (weak) IBOutlet NSImageView *imageView;
@property (weak) IBOutlet NSTextField *infoLabel;

@property (nonatomic) NSArray *imageArray;

@end 
```

* * *

# MyAppDelegate.m

一些初始化：

```
- (void)awakeFromNib {
    _imageArray = @[ [NSImage imageNamed:@"first"],
                     [NSImage imageNamed:@"second"],
                     [NSImage imageNamed:@"third"]];

    /* Set delegate for NSPageControl */
    [_pageController setDelegate:self];
    /* Set arranged objects for NSPageControl */
    [_pageController setArrangedObjects:_imageArray];
    /* Set transition style, in this example we use book style */
    [_pageController setTransitionStyle:NSPageControllerTransitionStyleStackBook];

    /* Set info label's text */
    NSString *info = [NSString stringWithFormat:@"Image %ld/%ld", ([_pageController selectedIndex]+1), [_imageArray count]];
    [_infoLabel setStringValue:info];
} 
```

页面控制器委托方法：

```
- (void)pageController:(NSPageController *)pageController didTransitionToObject:(id)object {
    /* When image is changed, update info label's text */
    NSString *info = [NSString stringWithFormat:@"Image %ld/%ld", ([_pageController selectedIndex]+1), [_imageArray count]];
    [_infoLabel setStringValue:info];
}

- (NSString *)pageController:(NSPageController *)pageController identifierForObject:(id)object {
    /* Returns object's array index as identiefier */
    NSString *identifier = [[NSNumber numberWithInteger:[_imageArray indexOfObject:object]] stringValue];
    return identifier;
}

- (NSViewController *)pageController:(NSPageController *)pageController viewControllerForIdentifier:(NSString *)identifier {
    /* Create new view controller and image view */
    NSViewController *vController = [NSViewController new];
    NSImageView *iView = [[NSImageView alloc] initWithFrame:[_imageView frame]];

    /* Get image from image array using identiefier and set image to view */
    [iView setImage:(NSImage *)[_imageArray objectAtIndex:[identifier integerValue]]];
    /* Set image view's frame style to none */
    [iView setImageFrameStyle:NSImageFrameNone];

    /* Add image view to view controller and return view controller */
    [vController setView:iView];
    return vController;
} 
```

* * *

# 它已经完成了

![](../Images/b3abfbe532960cf129fc4a1415673469.png) ![](../Images/0c8513e06256e429a38e5240a570ea1f.png)

* * *

# 如果您的 _pageController 为 null/nil

`ctrl`通过用鼠标按下并拖动到文件中的 _pageController 将您的页面控制器连接到_pageController `MyAppDelegate.h`。

![](../Images/66a997e0669db03e5a72eaf9bae7f0c1.png)

# c++ - streambuf 类的哪个成员指向内存中的实际缓冲区？

> ID：14801514
> 
> 赞同：0
> 
> 时间：2013-02-10T19:09:54.827
> 
> 标签：c++, visual-studio-2010, stream, cout, streambuf

这个问题与[我之前的问题有关](https://stackoverflow.com/questions/14532718/how-come-the-code-below-works)。我使用下面的代码来检查与`streambuf`关联的对象中的值`cout`。使用VS2010 IDE，我可以看到这个类的几个成员。谁能指出我这些成员中的哪一个指向内存中 cout 的空缓冲区？

```
#include <iostream>

int main()
{
    std::streambuf* p = std::cout.rdbuf();  
} 
```

**编辑**：查看`streambuf`头文件可以在类中找到以下私有成员`basic_streambuf`：

```
 _Mutex _Mylock; // thread lock
    _Elem *_Gfirst; // beginning of read buffer
    _Elem *_Pfirst; // beginning of write buffer
    _Elem **_IGfirst;   // pointer to beginning of read buffer
    _Elem **_IPfirst;   // pointer to beginning of write buffer
    _Elem *_Gnext;  // current position in read buffer
    _Elem *_Pnext;  // current position in write buffer
    _Elem **_IGnext;    // pointer to current position in read buffer
    _Elem **_IPnext;    // pointer to current position in write buffer

    int _Gcount;    // length of read buffer
    int _Pcount;    // length of write buffer
    int *_IGcount;  // pointer to length of read buffer
    int *_IPcount;  // pointer to length of write buffer

    locale *_Plocale;   // pointer to imbued locale object 
```

我相信`_Pfirst`这是我正在寻找的地址，它是 NULL 正如预期的那样。

# c# - EF5 + ListView 和实体

> ID：14801515
> 
> 赞同：0
> 
> 时间：2013-02-10T19:09:56.800
> 
> 标签：c#, wpf, entity-framework, xaml, ef-code-first

我的项目中有以下课程，

```
public class Area
{
    [Key]
    public int Id { get; set; }
    [Required]
    public string Name { get; set; }

    public ObservableCollection<VisitDetail> VisitDetails { get; set; }
}

public class VisitDetail
{
    [Key]
    public int VisitId { get; set; }
    [Required]
    public int AreaId { get; set; }

    public Area Area { get; set; }
} 
```

用户希望使用以下方法将其**访问区域**保存为该日期。

![在此处输入图像描述](../Images/9c26e7ed9ed43141e7b8a01bb22f5379.png)

我只想从中获取选定的区域**以**`ListView`保存它们。当我试图让那些使用`ListView.Items[index].IsSelected`它的人抛出一个错误说，

```
Unable to cast object of type 'Namespace.Area' to type 'System.Windows.Controls.ListViewItem' 
```

请告诉我解决问题的确切方法。

**编辑 1：**

我的项目在 WPF 中。还要注意这一点，当加载**访问详细信息**窗口时，`Area`实体集合绑定到`ListView.ItemsSource`. （因为 WPF 没有任何`ListView.CheckedItems` `:(`）

**编辑 2：**

感谢@blins，您的解决方案有效。但我无法得到检查的项目。我在这里发布我的 xaml。但是我可以得到选定的项目。如果我能拿到那些托运的物品，我会很高兴。

这是我的 XAML`ListView`

```
<ListView Name="lvList" SelectionMode="Multiple" ClipToBounds="True" >
    <ListView.View>
        <GridView >
            <GridViewColumn DisplayMemberBinding="{Binding Id}" />
            <GridViewColumn Header="Area" >
                <GridViewColumn.CellTemplate>
                    <DataTemplate >
                        <CheckBox x:Name="checkbox" Content="{Binding Name}" IsChecked="{Binding Path=IsSelected}" />
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
        </GridView>
    </ListView.View>
</ListView> 
```

我认为我的问题应该有一个解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:05:16.213

抛出异常是因为您的 ListView 的[Items](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.items.aspx)属性实际上表示用于生成列表内容的项目列表（即，它们不是 ListViewItem 类型，而是您的 Area 类型）。这正是 WPF 的操作方式，在这种情况下，您需要向底层 ItemsControl 的 ItemContainerGenerator 询问与 UI 中的项目对应的 ListViewItem。

XAML：

```
<ListView Name="listView1" /> 
```

代码（假设你已经设置了ListView的DataContext和ItemsSource等）：

```
ListViewItem item = listView1
   .ItemContainerGenerator
   .ContainerFromIndex(0) as ListViewItem;

item.IsSelected = true; 
```

如果您不知道/关心列表中的索引，而是您知道该项目，则另一种选择。

```
ListViewItem item = listView1
   .ItemContainerGenerator
   .ContainerFromItem(someAreaInstance) as ListViewItem; 
```

对问题第 2 部分的回答：

您确实应该更深入地研究[MVVM](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)模式，这将帮助您从一开始就避免这种情况，但这是实现您所追求的一种方法。首先，您可能需要一个类似以下的辅助方法（未经测试）：

```
static FrameworkElement GetVisualDescendantByName(DependencyObject control, string name)
{
    // Recurse
    FrameworkElement el = null;
    int nChildren = VisualTreeHelper.GetChildrenCount(control);
    for (int i = 0; i < nChildren; i++)
    {
        var child = VisualTreeHelper.GetChild(control, i);
        el = GetVisualDescendantByName(child, name);
        if (el != null)
            return el;
    }

    // See if control is a match
    if (control is FrameworkElement)
    {
        el = control as FrameworkElement;
        if (el.Name == name)
            return control as FrameworkElemdent;
    }

    return null;
} 
```

你可以做类似的事情......

```
foreach (var item in lvList.Items)
{
    var listItem = lvList.ItemContainerGenerator
        .ContainerFromItem(item) as ListViewItem;

    CheckBox cb = GetVisualDescendantByName(listItem, "checkbox") as CheckBox;

    // Do stuff with CheckBox...
    var myVar = cb.IsChecked;
} 
```

# c - 读取返回 0 字节

> ID：14801516
> 
> 赞同：1
> 
> 时间：2013-02-10T19:10:02.223
> 
> 标签：c

我正在尝试使用文件描述符读取文件（这可能比我需要做的工作要多得多，但尽管如此..）

我正在尝试创建一个类似于 ar 的存档器。我有一个要读取的非空文件，但是当我尝试使用 read 命令检索前 8 个字节时，返回 int 为 0，这意味着它没有读取任何字节。errno 告诉我一切都很顺利。

我要做的是读取文件开头的字符串，这样我就可以运行字符串比较。

对意大利面条代码感到抱歉，我仍在测试并试图解决问题。

问题在于语句 temp = read(archiveFD,buf,8); archiveFD 指向我的存档文件，该文件不为空，但没有读取任何内容。

命令：

./a.out r ar.c archive.a

弧：

```
#include <stdio.h>
#include <string.h>
#include <fcntl.h>
#include <sys/stat.h>
#include <sys/types.h>
#include <utime.h>
#include <errno.h>
#define BUF_SIZE 1024

int main(int argc, char *argv[]) {

int fileFD, archiveFD, openFlags;
mode_t filePerms;
ssize_t numRead;
char buf[BUF_SIZE];
char fileName[16];
const struct utimbuf *times;
char modTime[12];
char entry[29];
int temp;
char *line = NULL;
size_t len = 0;

if(strcmp(argv[1], "r") != 0 && strcmp(argv[1], "x") != 0 && strcmp(argv[1], "d") != 0 && strcmp(argv[1], "t") != 0) {
    printf("%s","Not a valid command.\n");
    return 0;
}

if(strcmp(argv[1], "r") == 0) {
    if(argv[3] == NULL) {
        printf("%s","Missing arguments.\n");
        return 0;
    }

    fileFD = open(argv[2], O_RDONLY);
    if(fileFD == -1) {
        printf("%s","Error opening input file.\n");
        return 0;
    }

    openFlags = O_CREAT | O_RDWR | O_TRUNC;
    filePerms = S_IRUSR | S_IWUSR | S_IRGRP | S_IWGRP | S_IROTH | S_IWOTH;
    archiveFD = open(argv[3], openFlags, filePerms);
    if(archiveFD == -1) {
        printf("%s","Error opening archive file.\n");
        return 0;
    }

    temp = read(archiveFD,buf,8);
    //printf("%s",(char *) buf);
    //  if(strcmp("!<arch>\n",buf) != 0)
    //      write(archiveFD,"!<arch>\n",8); //begins archive
    //  printf("%s","here");
    //}
    printf("%d",temp);
    printf("%s",strerror(errno));
    //printf("%s",buf);

    sprintf(fileName,"%-16s",argv[2]);
    printf("%s",fileName);
    utime(argv[2],times);
    //strcpy(modTime,"12345678901234");
    //printf("%s",modTime);
    sprintf(modTime,"%-.12lld",(long long) times->modtime);
    modTime[12] = '\0';
    printf("%s",modTime);
    sprintf(entry,"%s%s\n",fileName,modTime);
    printf("%s",entry);

    write(archiveFD,entry,29);

    while((numRead = read(fileFD, buf, BUF_SIZE)) > 0)
        if(write(archiveFD, buf, numRead) != numRead) {
            printf("%s","Could not write whole buffer.\n");
            return 0;
        }
    if(numRead == -1) {
        printf("%s","Error reading.\n");
        return 0;
    }

    if(close(fileFD) == -1) {
        printf("%s","Error closing input file.\n");
        return 0;
    }
    if(close(archiveFD) == -1) {
        printf("%s","Error closing archive file.\n");
        return 0;
    }

}

return 0;
}` 
```

存档.a：

```
ar.c            140737161196
#include <stdio.h>
#include <string.h>
#include <fcntl.h>
#include <sys/stat.h>
#include <sys/types.h>
#include <utime.h>
#include <errno.h>
#define BUF_SIZE 1024

int main(int argc, char *argv[]) {

int fileFD, archiveFD, openFlags;
mode_t filePerms;
ssize_t numRead;
char buf[BUF_SIZE];
char fileName[16];
const struct utimbuf *times;
char modTime[12];
char entry[29];
int temp;
char *line = NULL;
size_t len = 0;

if(strcmp(argv[1], "r") != 0 && strcmp(argv[1], "x") != 0 && strcmp(argv[1], "d") != 0 && strcmp(argv[1], "t") != 0) {
    printf("%s","Not a valid command.\n");
    return 0;
}

if(strcmp(argv[1], "r") == 0) {
    if(argv[3] == NULL) {
        printf("%s","Missing arguments.\n");
        return 0;
    }

    fileFD = open(argv[2], O_RDONLY);
    if(fileFD == -1) {
        printf("%s","Error opening input file.\n");
        return 0;
    }

    openFlags = O_CREAT | O_RDWR | O_TRUNC;
    filePerms = S_IRUSR | S_IWUSR | S_IRGRP | S_IWGRP | S_IROTH | S_IWOTH;
    archiveFD = open(argv[3], openFlags, filePerms);
    if(archiveFD == -1) {
        printf("%s","Error opening archive file.\n");
        return 0;
    }

    temp = read(archiveFD,buf,8);
    //printf("%s",(char *) buf);
    //  if(strcmp("!<arch>\n",buf) != 0)
    //      write(archiveFD,"!<arch>\n",8); //begins archive
    //  printf("%s","here");
    //}
    printf("%d",temp);
    printf("%s",strerror(errno));
    //printf("%s",buf);

    sprintf(fileName,"%-16s",argv[2]);
    printf("%s",fileName);
    utime(argv[2],times);
    //strcpy(modTime,"12345678901234");
    //printf("%s",modTime);
    sprintf(modTime,"%-.12lld",(long long) times->modtime);
    modTime[12] = '\0';
    printf("%s",modTime);
    sprintf(entry,"%s%s\n",fileName,modTime);
    printf("%s",entry);

    write(archiveFD,entry,29);

    while((numRead = read(fileFD, buf, BUF_SIZE)) > 0)
        if(write(archiveFD, buf, numRead) != numRead) {
            printf("%s","Could not write whole buffer.\n");
            return 0;
        }
    if(numRead == -1) {
        printf("%s","Error reading.\n");
        return 0;
    }

    if(close(fileFD) == -1) {
        printf("%s","Error closing input file.\n");
        return 0;
    }
    if(close(archiveFD) == -1) {
        printf("%s","Error closing archive file.\n");
        return 0;
    }

}

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:15:03.823

在此块中：（为简洁起见，省略了错误检查）

```
openFlags = O_CREAT | O_RDWR | O_TRUNC;
filePerms = S_IRUSR | S_IWUSR | S_IRGRP | S_IWGRP | S_IROTH | S_IWOTH;
archiveFD = open(argv[3], openFlags, filePerms);
temp = read(archiveFD,buf,8); 
```

我绝对希望 read 返回零。您刚刚打开文件`O_TRUNC`，所以即使文件不是空的，它也是在您打开它之后。如果您不想丢弃所有现有数据，`O_TRUNC`请从 openFlags 中删除。

# jquery - Jqueryui 对话框没有以正确的高度打开

> ID：14801517
> 
> 赞同：0
> 
> 时间：2013-02-10T19:10:10.857
> 
> 标签：jquery, jquery-ui

我有一个网站，出于某种原因，jqueryui 对话框的打开高度比应有的小 100px，如果我在 chrome 控制台中运行相同的代码，它工作正常 $("#dlgAddWorkLog").dialog({ autoOpen:假，宽度：258，高度：250}）；

我刚刚更新了最新的 jqueryui（在测试服务器上），看看是否可以修复它，但无济于事。

要查看实际问题，请访问[https://cworklog.com](https://cworklog.com)以 test116 test116 身份登录，然后单击“添加工作日志”

出现的结果对话框比它应该小了大约 100px。

继续打开控制台并输入 $("#dlgAddWorkLog").dialog({ autoOpen: false, width: 258, height: 250});

看着它完美地工作

我不知道是否有图书馆冲突或什么，我也在页面上使用 YUI 2.9。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:24:15.657

work_log.php 第 350 行，我确定您不会将高度值设置为 180 px ：

```
<select name="company_id" onchange="
   if (this.value == 'new')
   { 
       $('#new_company').toggle(true); 
       $('#dlgAddWorkLog').dialog('option', 'height', 425); }
   else
   { 
       $('#new_company').toggle(false); 
       $('#dlgAddWorkLog').dialog('option', 'height', 180); 
   }
"> 
```

避免 JS 内联顺便说一句，调试起来很乱......

# jquery - 为什么我的新课程没有被选中？

> ID：14801520
> 
> 赞同：2
> 
> 时间：2013-02-10T19:10:36.363
> 
> 标签：jquery, css, html

我正在尝试更改按钮的类，因此当单击它时，它会隐藏一个 div，文本更改为显示，并且使用 addClass/removeClass 更改类，因此它可以被下一个单击事件拾取，这将反转过程。

但是，它不太有效，我不确定为什么：/

这是我的代码。

HTML：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Vanishing Act</title>
        <link rel='stylesheet' type='text/css' href='stylesheet.css'/>
        <script type='text/javascript' src='script.js'></script>
    </head>
    <body>
        <div class="vanish1"></div>
        <div class="vanish2"></div>
        <div class="vanish3"></div>
        <div class="vanish4"></div>
        <br/>
        <br />
        <button class='first' value='button'>Hide the box!</button>
    </body>
</html> 
```

CSS：

```
.vanish1 {
    height: 100px;
    width: 100px;
    display: inline-block;
    background-color: #F38630;
    border-radius: 5px;
}

.hide1 {
    color: red;
} 
```

JQ:

```
 $(document).ready(function() {
    $('.first').click(function() {
            $('.vanish1').fadeOut('slow');
            $(this).text('Show the box!');
            $(this).addClass("hide1");
            $(this).removeClass("first");
    });

    $('.hide1').click(function() {
        $('.vanish1').fadeIn('slow');
        $(this).text('Hide the box!');
        $(this).removeClass("hide1");
        $(this).addClass("first");
    });
}); 
```

当我单击按钮时，div 成功隐藏并更改了类（由 CSS 和 Chromes 开发工具确认）。但是当我再次点击它时，什么也没有发生..

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T19:22:13.817

动态更改 html 时可以使用[委托。](http://api.jquery.com/on/)看到这个[小提琴](http://jsfiddle.net/57xSR/)。

```
$('body').on('click', '.first', function() {
        $('.vanish1').fadeOut('slow');
        $(this).text('Show the box!');
        $(this).addClass("hide1");
        $(this).removeClass("first");
});
$('body').on('click', '.hide1', function() {
    $('.vanish1').fadeIn('slow');
    $(this).text('Hide the box!');
    $(this).removeClass("hide1");
    $(this).addClass("first");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T19:18:17.517

您正在动态添加/删除类
意味着您在单击`hide1`时添加类，`.first`因此在此单击之前`.hide1`未注册
尝试使用 jquery 将事件绑定到正文

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-10T19:17:30.223

在定义处理程序时，`.hide1`按钮还不存在，因此它不会绑定事件。有两种方法可以解决这个问题：

1：使用实际切换：

```
(function() {
    var toggle = true;
    $(document).ready(function() {
        $(".first").click(function() {
            toggle = !toggle;
            if( toggle) {
                $(".vanish1").fadeIn("slow");
                $(this).text("Hide the box!").removeClass("hide1").addClass("first");
            }
            else {
                $(".vanish1").fadeOut("slow");
                $(this).text("Show the box!").addClass("hide1").removeClass("first");
            }
        });
    });
})(); 
```

或 2：使用`on`：

```
$(document).ready(function() {
    $('.first').on('click',function() {
            $('.vanish1').fadeOut('slow');
            $(this).text('Show the box!').addClass("hide1").removeClass("first");
    });

    $('.hide1').on('click',function() {
        $('.vanish1').fadeIn('slow');
        $(this).text('Hide the box!').removeClass("hide1").addClass("first");
    });
}); 
```

方法 1 是首选。

# c++ - BMP Header - MSDN 含糊不清，我的字节序错了吗？

> ID：14801528
> 
> 赞同：0
> 
> 时间：2013-02-10T19:11:19.990
> 
> 标签：c++, header, endianness, bmp

我正在编写一个程序来为我的化学实验室的一些数据创建图像。我们正在研究元素等的排放，并编写数据以包括通过光谱仪显示频带的示例。我认为编写一个程序来为我做这件事会很整洁，而不是彩色铅笔，所以一切都很整洁。另外，我没有彩色铅笔。

我将图像数据作为 RGB 值存储在一个 int 数组中，长度为我想要的图像的宽度 * 高度，宽度为 320，高度为 50。最后我将它们作为 24 位 BGR 排序写入文件像素。

在将数据写入文件之前，我当然会尝试写入 BMP 标头。MSDN 有一个图表来显示文件部分的一般顺序，其中包括一些关于 RBGQuads 的内容，但在段落解释中没有描述如何使用它们。我认为它们是可选的？我发现这张图表显示了我所期望的标题的唯一强制性部分：http: [//www.fastgraph.com/help/bmp_header_format.html](http://www.fastgraph.com/help/bmp_header_format.html)，所以我认为我在正确的轨道上。

因此，我开始使用字节顺序，因为在尝试使用 Paint 或在 Windows 图像查看器中打开时，我的文件总是“损坏或损坏”。

所有消息来源都说 BMP 标头是小端的。我尝试在写入时双向交换字节顺序，但仍然无法打开文件。自制损坏文件还有其他常见的罪魁祸首吗？

这是我存储标题信息的地方：

```
typedef struct
{
  char type[2];
  unsigned int fsize;
  unsigned short res1;
  unsigned short res2;
  unsigned int data_offset;
} BMPFILEHEADER;

typedef struct
{
  unsigned int sizebytes;
  int  width_pix;
  int  height_pix;                   // negative for top down.
  unsigned short  planes;            // must be 1
  unsigned short  bits_per_pix;
  unsigned int compression;          // zero for BI_RGB (uncompressed)
  unsigned int SizeImage;            // may be set to 0 for BI_RGB images.
  int  pix_per_meter_x;
  int  pix_per_meter_y;
  unsigned int color_used;           // set to 0
  unsigned int color_important;      // set to 0
} BMPINFOHEADER; 
```

当然，我是按这个顺序写的。-- 类型是 char[] 因为无论如何它必须是值 'B' 'M'。

首先我尝试用 fwrite() 编写它们：

```
 fwrite ( &header , 1 , 14 , fhandle );
  fwrite ( &headerext , 1 , 40 , fhandle ); 
```

然后我试着像这样写它们：

```
 fputc ( 'B' , fhandle );
  fputc ( 'M' , fhandle );
  fw_little_end ( fhandle , &header.fsize , 4 );
  fw_little_end ( fhandle , &header.res1 , 2);
  fw_little_end ( fhandle , &header.res2 , 2);
  fw_little_end ( fhandle , &header.data_offset , 4); 
```

其中 fw_little_end() 看起来像这样：

```
void fw_little_end ( FILE * fhandle , void * data , int size )
{
  int i;
  char * cdata = data;
  for ( i = size; i > 0; i-- )
  {
    fputc ( *(cdata+i-1) , fhandle );
  }
} 
```

可能是最初它被写入文件小端并且我的`fw_()`函数命名错误，但为了确定，我也从 size-0 和 0-size 尝试过它。

如果听起来相关，这就是写入数据的地方：

```
 int shift1 = 256;
  int shift2 = 256*256;
  for ( i = 0; i < img_size; i++)
  {
    fputc ( (unsigned char) (data[i]%256) , fhandle ); // B
    fputc ( (unsigned char) (data[i]/shift1)%256 , fhandle ); // G
    fputc ( (unsigned char) (data[i]/shift2)%256 , fhandle ); // R
  } // theoretically B only needs the typecast, not the %256 but oh well lol. 
```

这篇文章已经很长了，希望我已经包含了足够多的相关代码。我很抱歉，因为我知道那里有很多信息，除此之外对我来说没有任何意义。如果有更好的方式来做这些事情，我很乐意指出正确的方向。

因此，我感谢您的所有意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:09:11.490

我发布了一个直接的答案：

```
/* ======================================================================================== */
BOOL SaveBitmap24(LPCTSTR pszFilename, LPBYTE pPixelColorTriplets, INT nWidth, INT nHeight)
{
    BOOL bState = FALSE;
    // sizes
    INT nOfsetToPixel = sizeof(BITMAPFILEHEADER) + sizeof(BITMAPCOREHEADER);
    INT nPixelSize = nWidth * nHeight * 3;
    INT nFileSize = nOfsetToPixel + nPixelSize;
    // setup bitmap file header --------------
    BITMAPFILEHEADER bmFileHeader = { 0 };
    // "BM" signature
    bmFileHeader.bfType = 0x4D42;
    bmFileHeader.bfOffBits = nOfsetToPixel;
    bmFileHeader.bfSize = nFileSize;
    // setup bitmap info header --------------
    BITMAPCOREHEADER bmCoreHeader = { 0 };
    bmCoreHeader.bcSize = sizeof(BITMAPCOREHEADER);
    bmCoreHeader.bcWidth = nWidth;
    bmCoreHeader.bcHeight = nHeight;
    bmCoreHeader.bcBitCount = 24;
    bmCoreHeader.bcPlanes = 1;
    // write file -----------------------
    FILE *fileBitmap = fopen(pszFilename, _T("wb"));
    if (fileBitmap)
    {   fwrite(&bmFileHeader, sizeof(BITMAPFILEHEADER), 1, fileBitmap);
        fwrite(&bmCoreHeader, sizeof(bmCoreHeader), 1, fileBitmap);
        fwrite(pPixelColorTriplets, nPixelSize, 1, fileBitmap);
        fclose(fileBitmap);
        bState = TRUE;
    }
    return bState;
} 
```

# c# - 使用 BCrypt.Net 模拟设计密码加密？

> ID：14801532
> 
> 赞同：2
> 
> 时间：2013-02-10T19:11:48.430
> 
> 标签：c#, mysql, ruby-on-rails, devise, bcrypt

我在这里尝试一个非常简单的任务。我有一个正在运行的服务器，它上面运行着一个 MySQL 实例，我的 rails 应用程序使用它来填充。对我来说不幸的是，我用设计来完成我所有的用户管理，现在有点卡住了。

所以我有一个正在编写的 C# 应用程序。我想通过我已经存在的 MySQL 数据库简单地验证用户和密码。

现在这是我所知道的（或认为我知道的）：

Devise 使用 Bycrypt 对其密码进行单向加密，然后将其存储在数据库中。问题是我不确定如何正确实施 bycrypt 以生成正确的加密密码进行验证。

这是我当前生成哈希密码的过程：

```
string pass = password.Text;
string mySalt = BCrypt.Net.BCrypt.GenerateSalt();
string myHash = BCrypt.Net.BCrypt.HashPassword(pass, mySalt); 
```

我认为这一定是错误的。我只是不太清楚我在这里缺少什么或我做错了什么。我会继续谷歌搜索，如果我想出答案，我会回复。此外，如果我违反了任何编辑规则或其他任何事情，请告诉我，以便我可以快速修复它们。

在此先感谢您的时间 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T20:40:15.970

我认为您的问题是每次您对密码进行哈希处理以验证数据库时都会生成 Salt。您需要使用最初生成密码时使用的相同 Salt 值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T22:42:05.490

好吧，所以我的问题实际上很愚蠢，但是对于与我具有相同逻辑谬误的其他人，我将进行解释。

默认情况下，Devise 使用 BCrypt 进行加密，这通常使用 Blowfish 完成，当他们这样做时，他们总是使用 BCrypts 生成盐函数，该函数为密码的每个散列生成随机盐。

由于随机盐，BCrypt 包含一个名为 Verify(password, hashed_pa​​ss) 的实用函数。此功能允许对未加密密码和散列通行证的测试进行比较。漂亮而且非常有用

# ios - UIScrollview，如何在另一个窗口下滚动页面

> ID：14801534
> 
> 赞同：0
> 
> 时间：2013-02-10T19:12:06.970
> 
> 标签：ios, objective-c, xcode

我有一个 UISCrollview 加载 webviews，当用户开始滚动到下一页时，我需要让即将到来的网页从另一个静止的 UIView 下方滚动到屏幕中，我尝试更改 alpha 但它不是真的什么我在寻找。我怎样才能做到这一点？例如，滚动方向是从上到下，现在我在屏幕顶部有一个 uiview，其中显示了一些静态数据（标题、位置和其他文本标签），当用户向下滚动时，我希望内容在标签 ui 视图下方滚动。希望这可以澄清它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T23:21:11.887

如果我正确理解了这个问题，我会说你不能用 UIScrollView 做到这一点。相反，您可以为每个 UIWebView 拥有单独的视图，并使用 UIPanGestureRecognizer 处理一个视图在另一个视图下的平移。

另外，您知道在 UIScrollView 中使用 UIWebView 时可能会发生冲突吗？

# window - XMoveWindow 在 XMapWindow 之前不工作

> ID：14801536
> 
> 赞同：1
> 
> 时间：2013-02-10T19:12:13.363
> 
> 标签：window, x11

我有一个窗口，我希望能够控制它出现的位置。但是，在调用“XMapWindow”之前调用“XMoveWindow”似乎没有任何效果。

[文档](http://tronche.com/gui/x/xlib/window/XMoveWindow.html)什么也没说。帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:48:51.430

在[XtCreateWindow](http://tronche.com/gui/x/xlib/window/XCreateWindow.html)中有 x 和 y 坐标，因此您可以在创建时指定位置。请注意，在第一次映射窗口之前，X 服务器不必知道窗口，因此移动未映射的窗口可能没有任何效果。

但 XtCreateWindow 仅适用于主窗口的子窗口；如果您想放置一个顶级窗口（您的主应用程序或弹出对话框），您必须与窗口管理器协商放置窗口。以下代码片段使用主窗口的 Xt 库来执行此操作：

```
 Arg args[] = {
    { XtNx, (dis_width - WIN_WIDTH) / 2},
    { XtNy, (dis_height - WIN_HEIGHT) / 2},
    { XtNwidth, WIN_WIDTH},
    { XtNheight, WIN_HEIGHT},
    { XtNborderWidth, 10},
    { "minWidth", WIN_WIDTH},
    { "minHeight", WIN_HEIGHT},
    { "maxWidth", WIN_WIDTH},
    { "maxHeight", WIN_HEIGHT},
    { "mwmDecorations", 0xA}, // border + title; see MWM_DECOR_ constants
    { "mappedWhenManaged", False},
  };

  shell = XtAppCreateShell (_ ("Welcome"), NULL, applicationShellWidgetClass, Dis, args, XtNumber (args)); 
```

它创建一个以屏幕为中心的窗口。

对于弹出窗口，请参阅[XtCreatePopupShell](http://lesstif.sourceforge.net/doc/super-ux/g1ae03e/part1/chap5.html)，它使用带有参数的类似数组。

# iphone - 存储所选 ACAccount 以供通过应用程序进一步使用的正确方法是什么？

> ID：14801538
> 
> 赞同：1
> 
> 时间：2013-02-10T19:12:26.653
> 
> 标签：iphone, ios, ios6, social-framework

我正在构建一个应用程序，用户将在其中使用他的一个 iOS 集成 Twitter 帐户。我正在使用 Accounts Framework，在[文档示例](http://developer.apple.com/library/ios/#samplecode/Tweeting/Listings/Tweeting_TweetingViewController_m.html)中，将从中执行对 Twitter 的请求的帐户以这种方式获取：`ACAccount *twitterAccount = [accountsArray objectAtIndex:0];`因此用户无法选择他正在使用的“TWAccount”。

我将轻松构建一个 UISheet 来显示所有 Twitter 帐户并让用户选择他想要的，但**我的问题是**：

通过应用程序存储所选帐户以供长期使用的正确方法是什么？

编辑：对不起，我的问题并不完全清楚。我想存储它，就像我们存储应用程序的其他首选项一样。因此，当用户第一次启动应用程序时，他必须选择要使用的帐户，但之后他将永远不必再选择何时重新启动它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T19:15:46.563

像您要存储的任何其他对象一样存储它。它是一个对象。保留它。例如，在 ARC 下，您只需将其分配给一个属性。记得注册 ACAccountStoreDidChangeNotification 以防用户背着你做一些事情，比如删除这个帐户；如果通知到达，您应该释放您的 ACAccount 对象并再次获取它。

该帐户由其唯一标识`identifier`，因此在您的应用程序后续启动时，您可以使用 再次获取它`accountWithIdentifier:`。

# javascript - 一种将所有本地化字符串转换为 JSON 的方法？

> ID：14801539
> 
> 赞同：0
> 
> 时间：2013-02-10T19:12:35.957
> 
> 标签：javascript, android, json, cordova, localization

我正在尝试为 Android 开发一个 phonegap 插件，它首先检查用户的默认语言环境，然后获取该语言环境的所有字符串并将其转换为 JSON，然后将其发送回 JavaScript。

我知道如何检查默认语言环境并将内容发送回 JavaScript，但问题是我不知道如何做中间部分，即。获取与语言环境匹配的字符串并将它们转换为 JSON。

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T19:24:05.357

鉴于您知道语言环境，您可以在由语言环境命名的文件中包含本地化字符串。例如，en_US.strings 就是 en_US 文件。如果您遵循该格式，则只需 usr XHR 即可加载它。如果文件本身是令牌和本地化的 JSON 数据包，那么您就大功告成了。

# java - 使用 java 编辑清单

> ID：14801540
> 
> 赞同：0
> 
> 时间：2013-02-10T19:12:46.467
> 
> 标签：java, command-line, manifest

我刚刚开始了我的第一个 Java 程序。我创建了一个批处理文件来运行我的命令行参数。在这个程序中，我正在用 HelloWorld.java 编写一个“HelloWorld”字符串

```
class HelloWorld
{
public static void main(String [] args)
{
    System.out.println("HelloWorld!!");
}
} 
```

现在，在我将 java 添加到我的路径后，我在 .bat 文件中使用以下内容。

```
 javac HelloWorld.java  //to complie
 java HelloWorld    //toRun
 jar -cvf HelloWorld.jar HelloWorld.class  //creating a archive
 jar -xf HelloWorld.jar  //Extracting and finding the manefest 
```

从我的 jar 文件中，我现在必须编辑清单文件并将我刚刚编写的类设置为 jar 文件的主类，我已经完成了如下操作：

```
jar -cmf HelloWorld.jar Manifest.txt HelloWorld.class  //Here is the problem
java -jar HelloWorld.jar //here I am trying to run it
pause 
```

我似乎无法编辑清单。我有命令提示错误还是我输入错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T21:46:59.867

Manifest 是 META-INF 目录中名为“MANIFEST.MF”的文件。所以，你需要让你的最终代码在文件系统上看起来像这样：

```
HelloWorld.class
WEB-INF
    MANIFEST.MF 
```

然后把它全部罐起来。

最后，您还应该将 HelloWorld.class 放入一个实际的包中：

```
package pkg;

public class HelloWorld {
    public static void main(String args[]) {
        System.out.println("Hello World!");
    }
} 
```

然后您的最终产品将如下所示：

```
pkg
    HellowWorld.class
META-INF
    MANIFEST.MF 
```

你的最终班级名称将是`pkg.HelloWorld`.

使用 Java 中的实际包可以更好地工作，最好立即使用它们并避免麻烦。

注意：哦，我的错误，我没有注意到 -m 标志的使用——所以习惯于清单只是构建工件的一部分的大型项目。

# java - GSON 库无法正确解析 JSON UTF-8，将重音替换为“？”

> ID：14801546
> 
> 赞同：2
> 
> 时间：2013-02-10T19:13:14.233
> 
> 标签：java, php, json, utf-8, gson

我正在尝试使用 GSON 库开发一个 Java 应用程序来解析 JSON（来自 PHP 文件（UTF-8 编码）-> json_encode）

我的 php 源代码：

```
<?php
$base = mysql_connect ('****', '*****', '*****');  
mysql_select_db ('*****', $base) ; 
$req = mysql_query("SELECT ***, ****, ***, ****, **** from *****");

function jsonRemoveUnicodeSequences($struct) {
   return preg_replace("/\\\\u([a-f0-9]{4})/e", "iconv('UCS-4LE','UTF-8',pack('V', hexdec('U$1')))",               json_encode($struct));
}

while ($row = mysql_fetch_array($req)) {
    $output[] = $row;
}

print(jsonRemoveUnicodeSequences($output));    
mysql_free_result ($req);    
?> 
```

JSON 字符串在我的网络浏览器中正确显示并带有重音符号。

我的 Java 源代码：

```
 BufferedReader reader = null;

        try {
            URL url = new URL("**************");
            URLConnection urlConnection = url.openConnection(); 

            reader = new BufferedReader(new InputStreamReader(urlConnection.getInputStream(), "UTF-8"));

            StringBuilder sb = new StringBuilder();            
            String line = null;  

            while ((line = reader.readLine()) != null) {
                sb.append(line);
                System.out.println("JSON data issu du PHP : "+ line + "\n");
                Gson gson = new Gson();

                Type type = new TypeToken<List<AlertTable>>(){}.getType();
                ArrayList<AlertTable> bddListJson = gson.fromJson(line, type);              
                bddList = (ArrayList<AlertTable>) bddListJson.clone();                   
            }
        } catch (IOException e) {
            //
        } finally {
            if (reader != null) {
                //
            }
        }   

        System.out.println(bddList.get(1).getTypeAlert());
        System.out.println(bddList.get(1).getLigne());
        System.out.println(bddList.get(1).getSens());
        System.out.println(bddList.get(1).getStation());
        System.out.println(bddList.get(1).getTimeAlert()); 
```

在控制台中，带有重音的字符被替换为“？”。

任何的想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T01:06:56.563

首先，请注意您的代码在某些系统上可能会失败，因为 MySQL 使用*连接字符集*在客户端和服务器之间移动文本。您应该发出一个原始查询，例如`SET NAMES <charset>`设置脚本中可用输入数据的编码。

现在，假设没有转码问题（因为您的列只存储 ASCII 字符并且所有涉及的字符集都是 ASCII 兼容的），我编写了以下代码以`\u0000`用 UTF8 编码的字符串替换转义序列：

```
<?php

while ($row = mysql_fetch_array($req)) {
  $out[] = preg_replace_callback("/\\\\u([a-f0-9]{4})/i", "unescape", $row);
}

// On PHP 5.4+ use json_encode($out, JSON_UNESCAPED_UNICODE)
echo json_encode($out);

/* Accept the matcher array
 * return the UTF-8 encoded string
 */
function unescape($match) {
  return call_user_func_array('pack', get_pack_args(hexdec($match[1])));
}

function get_pack_args($cp) {
  if ($cp < 0x80) return array('C1', $cp);

  if ($cp < 0x0800) {
    $length = 2;
  } else if ($cp < 0x010000) {
    $length = 3;
  } else {
    $length = 4;
  }

  $args[0] = "C{$length}";

  // lead byte
  $args[1] = (0xFE << (7 - $length)) | ($cp >> (6 * ($length - 1)));

  // continuation bytes
  for ($l = 0; $l < ($length - 1); $l++) {
    $args[$length - $l] = 0x80 | (($cp >> (6 * $l)) & 0x3F);
  }

  // stupid PHP...
  ksort($args);
  return $args;
} 
```

您应该深入测试代码，但这是一个很好的起点。为了在浏览器中显示，您应该使用 HTTP 标头指定编码：

```
header('Content-Type: application/json; charset=utf8'); 
```

请注意，`json_encode()`默认情况下会转义 unicode 序列。这是低效的，因此您可能想要使用该`JSON_UNESCAPED_UNICODE`标志，或者选择另一个 JSON 库进行编码。

此时服务器部分应该没问题了，你可以用你的浏览器测试一下。如果它可以工作，但 Java 程序仍然无法在控制台上显示正确的字符，则可能是控制台本身有问题，甚至是控制台应用程序使用的字体有问题。如果没有实际数据，则无法分辨，但请按照我的建议将 JSON 打印到 UTF8 编码的文本文件中。然后用文本编辑器打开它（如果需要，指定 UTF-8）并告诉你所看到的。

最后，请注意`mysql`不鼓励使用 PHP 扩展。使用`mysqli`或`PDO`代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T19:23:38.947

如果您正确设置了 json_encode 的参数，例如

```
 json_encode($WhoRank,JSON_HEX_TAG | JSON_HEX_APOS | JSON_HEX_QUOT | JSON_HEX_AMP | JSON_UNESCAPED_UNICODE); 
```

编码值和传输数据没有问题，但如果不能再次工作，您可以使用**urlencode**对 UTF-8 值进行编码并在 Java 上对其进行解码

像这样

```
urlencode('aیgfسبd'); 
```

输出

```
a%DB%8Cgf%D8%B3%D8%A8d 
```

有了这个输出，你的 json 值没有问题。

# android - 在 ListView Android 中选择多个项目

> ID：14801552
> 
> 赞同：2
> 
> 时间：2013-02-10T19:14:04.950
> 
> 标签：android, android-listview

我希望选择多个 ListView 项目，然后共享所有项目。我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T19:30:19.723

在此处查看真棒示例[android-multiple-selection-listview](http://adanware.blogspot.in/2012/04/android-multiple-selection-listview.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:24:29.767

![我想要的形象](../Images/a3ab88e660b451874cc6bd752a870901.png)

我希望在点击操作栏中的选项菜单项时，列表视图的选择模式变为多种，这很容易实现。同时我想增加两个选项菜单项，即“确定”和“取消”，这样一旦用户选择了部分或全部列表视图项目，他就可以点击“确定”选项菜单继续。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T19:21:23.690

出色地，

首先，您需要创建 OnItemClickListener(View v) 以获得点击。

然后你可以制作一个 HashMap 来保存被点击的项目。

您还可以更改单击项目的背景，以便用户知道单击了哪些项目。

您需要的最后一件事是动作（按钮单击 - 共享），它将通过 HashMap 并收集所有单击的项目。之后，您可以随心所欲地使用它们。

看似庞大的作品，其实可以很容易地分成几个步骤，一个一个地合上……其实很简单。

# c# - SqlDataAdapter 给了我 0 个结果

> ID：14801554
> 
> 赞同：0
> 
> 时间：2013-02-10T19:14:11.793
> 
> 标签：c#, sql, winforms, datatable, sqldataadapter

```
SqlCommand cmd = new SqlCommand();
cmd.Connection = con;
cmd.CommandType = CommandType.Text;
cmd = CreateParameterizedQuery();
SqlDataAdapter dap = new SqlDataAdapter();
dap.SelectCommand = cmd;
DataTable tbl = new DataTable();
dap.Fill(tbl);
if (tbl.Rows.Count > 0)
{
    grid.DataSource = tbl;
} 
```

实际的 SQL 查询将在 SQL Management Studio 中产生结果。但是我得到 0 行数据。我在 tbl.Rows.Count 处设置了一个断点，我看到它是 0，并且单步执行将跳过设置 DataSource 的必要代码。

```
 private SqlCommand CreateParameterizedQuery()
    {
        SqlCommand command = new SqlCommand();
        string[] allTheseWords;
        if (textBoxAllTheseWords.Text.Length > 0)
        {
            allTheseWords = textBoxAllTheseWords.Text.Split(' ');
            string SQLQuery = "SELECT distinct [databaseName].[dbo].[customerTable].[name], [databaseName].[dbo].[customerTable].[dos], [databaseName].[dbo].[customerTable].[ACC], [databaseName].[dbo].[reportTable].[id], [databaseName].[dbo].[reportTable].[ACC], [databaseName].[dbo].[reportTable].[fullreport] FROM [databaseName].[dbo].[reportTable], [databaseName].[dbo].[customerTable] WHERE ";
            int i = 0;
            foreach (string word in allTheseWords)
            {
                var name = "@word" + (i++).ToString();
                command.Parameters.AddWithValue(name, "'%" + word + "%'");
                SQLQuery = SQLQuery + String.Format(" [databaseName].[dbo].[reportTable].[fullreport] LIKE {0} AND ", name);
            }
            SQLQuery = SQLQuery + " [databaseName].[dbo].[customerTable].[ACC] = [databaseName].[dbo].[reportTable].[ACC]";
            command.CommandText = SQLQuery;
        }
        return command;
    } 
```

我在 Windows 8 上使用带有 C# 的 WinForm。

* * *

SQLQuery 变量在调试时包含此数据

```
SELECT distinct [databaseName].[dbo].[customerTable].[name], [databaseName].[dbo].[customerTable].[dos], [databaseName].[dbo].[customerTable].[ACC], [databaseName].[dbo].[reportTable].[customerID], [databaseName].[dbo].[reportTable].[ACC], [databaseName].[dbo].[reportTable].[fullreport] FROM [databaseName].[dbo].[reportTable], [databaseName].[dbo].[customerTable] WHERE  [databaseName].[dbo].[reportTable].[fullreport] LIKE @word0 AND  [databaseName].[dbo].[customerTable].[ACC] = [databaseName].[dbo].[reportTable].[ACC] 
```

debugMySQL 是一种吐出带有替换参数的 SQL Query 的方法

```
 public void debugMySQL()
    {
        string query = command.CommandText;
        foreach (SqlParameter p in command.Parameters)
        {
            query = query.Replace(p.ParameterName, p.Value.ToString());
        }
        textBox1.Text = query;
    } 
```

输出看起来像

```
SELECT distinct [databaseName].[dbo].[customerTable].[name], [databaseName].[dbo].[customerTable].[dos], [databaseName].[dbo].[customerTable].[ACC], [databaseName].[dbo].[reportTable].[id], [databaseName].[dbo].[reportTable].[ACC], [databaseName].[dbo].[reportTable].[fullreport] FROM [databaseName].[dbo].[reportTable], [databaseName].[dbo].[customerTable] WHERE  [databaseName].[dbo].[reportTable].[fullreport] LIKE '%single%' AND  [databaseName].[dbo].[customerTable].[ACC] = [databaseName].[dbo].[reportTable].[ACC] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:43:32.087

您可以使用参数值查看参数化查询`SQL Profiler`。

![在此处输入图像描述](../Images/a0a7ad914f83ea694e06fdc6a53a9a11.png)

# python - 在 WAF 脚本中处理更改的文件

> ID：14801555
> 
> 赞同：3
> 
> 时间：2013-02-10T19:14:12.060
> 
> 标签：python, waf

是否可以在 wscript 文件中编写 WAF 函数，该函数将在构建每个更改的文件时调用？

我希望能够做到以下几点：

1.  通过自定义 Python 函数处理所有输入`.hpp`文件并将它们输出到构建文件夹。如果此类文件已更改，我想处理它并更新其在输出文件夹中的定义。
2.  `.hpp`通过外部脚本处理所有输入文件并将结果输出到构建文件夹。

**更新：**

解释一下：我希望为每个更改的文件运行一个`fun1(file)`函数，该函数将读取文件，对其进行修改并返回修改后的版本，该版本应输出到目标目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:39:28.980

只处理修改过的文件是WAF的主要功能之一^^

要执行您的 python 函数，您可以执行以下操作：

```
top = '.'
out = 'build'

def configure(conf):
    pass

def build(bld):

    def fun1(input_file):

        # whatever

        return output_file_content_as_string

    def process(task):

        for src_node in task.inputs:

            src = src_node.abspath()
            tgt = src_node.get_bld()

            out = fun1(src)

            tgt.write(out)

        return 0 # everything ok

    bld(
        rule   = process,
        source = ['myfile.hpp', 'myfile2.hpp', ],
    ) 
```

这将在 myfile.hpp 等上调用 fun1，并仅在修改后的文件上在构建目录中输出。

默认情况下，waf 为每个源管理一个签名以检测任何更改，并仅在签名更改时处理它......

# list - 记录每个客户的系统列表和汽车列表

> ID：14801557
> 
> 赞同：0
> 
> 时间：2013-02-10T19:14:43.833
> 
> 标签：list, class, inheritance

我正在为机械记录系统进行简单的模拟，其中将包含客户列表及其详细信息；每个人都有自己拥有的汽车清单。每次访问也会被记录下来。

客户：姓名、地址、汽车清单（包括品牌、型号和注册号）

访问：日期，所有者，汽车，完成工作的描述，下次访问日期

在主要方法中，我需要模拟两个客户端的创建，每个客户端有 5 辆汽车。数据将被硬编码。然后需要添加7次访问并显示所有信息。

```
class Human 
{

    int id;

    public int Id
    {
        get { return id; }
        set { id = value; }
    }

    private string name;

    public string Name
    {
        get { return name; }
        set { name = value; }
    }

    private string address;

    public string Address
    {
        get { return address; }
        set { address = value; }
    }
}

class Customer : Human
{
    public LinkedList<Car> Cars = new LinkedList<Car>();

   public Customer()
   {

   }

 }

 public class Visit
{

    public int visitId { get; set; }
    public DateTime DateTimeVisited { get; set; }
    public string customer { get; set; }
    public string Discussion { get; set; }

    public DateTime NextDateTimetoVisit { get; set; }

}

 class Mechanic :Human
{

    public LinkedList<Customer> customerDetails;

    public LinkedList<Visit> visitDetails;

    public LinkedList<Car> carDetails;

    public Mechanic()
    {
        customerDetails = new LinkedList<Customer>();

        visitDetails = new LinkedList<Visit>();

        carDetails = new LinkedList<Car>();

    }

    public void AddCustomer(Customer c)
    {

        customerDetails.AddLast(c);
    }

    public void AddVisit(Visit v)
    {

        visitDetails.AddLast(v);
    }

    public LinkedList<Customer> ViewCustomer()
    {

          return customerDetails;
    }

     public LinkedList<Visit> ViewVisit()
    {

        return visitDetails;
    }

     public void AddCar(Car car)
     {

         carDetails.AddLast(car);
     }

} 
```

//主要的

```
 //Create customer
                    Customer customer1 = new Customer();
                    Customer customer2 = new Customer();

                    customer1.Id = 1;
                    customer1.Name = "Brandon Spiteri";
                    customer1.Address = "22, St. George's St. B'bugia";

                    mech1.AddCustomer(customer1);

                    Car car1 = new Car();

                    car1.carmake = "Hyundai";
                    car1.carmodelnum = "HJ30NAEJJ";
                    car1.carregnum = "BAH 864";
                    car1.Id = 1; //check

                    mech1.AddCar(car1);

                    //mech1.AddCar(car1);

                    Car car2 = new Car();

                    car2.carmake = "Citroen";
                    car2.carmodelnum = "HJ30NAEJJ";
                    car2.carregnum = "IBE 554";
                    car2.Id = 1;
                    mech1.AddCar(car2);

                    Car car3 = new Car();

                    car3.carmake = "Toyota";
                    car3.carmodelnum = "HJ30NAEJJ";
                    car3.carregnum = "DAP 691";
                    car3.Id = 1;
                    mech1.AddCar(car3);

                    Car car4 = new Car();

                    car4.carmake = "Nissan";
                    car4.carmodelnum = "HJ30NAEJJ";
                    car4.carregnum = "EBD 482";
                    car4.Id = 1;
                    mech1.AddCar(car4);

                    Car car5 = new Car();

                    car5.carmake = "Rover";
                    car5.carmodelnum = "HJ30NAEJJ";
                    car5.carregnum = "BAD 505";
                    car5.Id = 1;
                    mech1.AddCar(car5);

                    customer2.Id = 2;
                    customer2.Name = "George Spiteri";
                    customer2.Address = "6, Dun A. Gambin St. Santa Lucija";

                    mech1.AddCustomer(customer2);

                    Car car6 = new Car();

                    car6.carmake = "Mercedes";
                    car6.carmodelnum = "HJ30NAEJJ";
                    car6.carregnum = "BAH 864";
                    car6.Id = 2;
                    mech1.AddCar(car6);

                    Car car7 = new Car();

                    car7.carmake = "BMW";
                    car7.carmodelnum = "HJ30NAEJJ";
                    car7.carregnum = "EFG 426";
                    car7.Id = 2;
                    mech1.AddCar(car7);

                    Car car8 = new Car();

                    car8.carmake = "Peugeot";
                    car8.carmodelnum = "HJ30NAEJJ";
                    car8.carregnum = "IHJ 376";
                    car8.Id = 2;
                    mech1.AddCar(car8);

                    Car car9 = new Car();

                    car9.carmake = "Mazda";
                    car9.carmodelnum = "HJ30NAEJJ";
                    car9.carregnum = "ADL 693";
                    car9.Id = 2;
                    mech1.AddCar(car9);

                    Car car10 = new Car();

                    car10.carmake = "Ford";
                    car10.carmodelnum = "HJ30NAEJJ";
                    car10.carregnum = "RGJ 486";
                    car10.Id = 2;
                    mech1.AddCar(car10); 
```

当我调试汽车是否属于特定客户时，它们似乎是单独声明的，客户没有汽车。访问类也正确实现了吗？我哪里错了？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T19:27:01.723

将所有列表以及 AddCar 方法移动到基类，如下所示：

```
class Human 
{
 public LinkedList<Customer> customerDetails;

 public LinkedList<Visit> visitDetails;

 public LinkedList<Car> carDetails;

 public void AddCar(Car car)
 {

     carDetails.AddLast(car);
 }
 ...
}

class Customer:public Human
{
 ...
} 
```

# c - setcontext() Valgrind 读取大小为 8 的无效

> ID：14801558
> 
> 赞同：4
> 
> 时间：2013-02-10T19:14:44.460
> 
> 标签：c, valgrind

我目前面临一个非常奇怪的问题。我正在构建一个库并将其链接到我的程序。一切运行良好，没有分段错误（也使用 gdb 检查）但是当我使用 Valgrind 运行程序时，它会因为以下行而疯狂：

```
==11972== Invalid read of size 8
==11972==    at 0x509509C: setcontext (setcontext.S:73)
==11972==    by 0x509764F: ??? (in /lib/x86_64-linux-gnu/libc-2.15.so)
==11972==  Address 0x541f060 is 128 bytes inside a block of size 936 alloc'd
==11972==    at 0x4C2B3F8: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==11972==    by 0x402090: environment_get (env.c:99)
==11972==    by 0x401ED6: environment_new (env.c:36)
==11972==    by 0x40124B: thr_new (thr.c:156)
==11972==    by 0x400EBE: main (itest1.c:31) 
```

但是程序运行良好，并且`setcontext`有一个正确分配的参数，没有问题。我有什么理由担心这些台词吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-04-15T22:33:41.970

晚了七年才开始讨论这个问题，但是：我通过确保我的堆栈至少是`SIGSTKSZ`. 所以，下面的代码可以解决这个问题：

```
#include <valgrind/valgrind.h>

//technically, the below doesn't need to be dynamically allocated, but for demonstration:
ucontext_t context = (ucontext_t*) malloc(sizeof(ucontext_t));

getcontext(&context);
void* stack = malloc(SIGSTKSZ);
VALGRIND_STACK_REGISTER(stack, stack + SIGSTKSZ);
context->uc_stack.ss_sp     = stack;
context->uc_stack.ss_size   = SIGSTKSZ;
context->uc_stack.ss_flags  = 0;
sigemptyset(&context->uc_sigmask);
context->uc_link            = &someOtherContextToGoToAfterwards;
makecontext(context, functionForContextToExecute); 
```

然后，在清理它时，您可以做一些负责任的事情，例如：

```
VALGRIND_STACK_DEREGISTER(context->uc_stack.ss_sp);
free(context->uc_stack.ss_sp);
free(context). 
```

# delphi - 如何从我的 Delphi 服务调用另一个应用程序？

> ID：14801559
> 
> 赞同：5
> 
> 时间：2013-02-10T19:14:51.617
> 
> 标签：delphi

我已经使用 Delphi 提供了服务。每次我在该服务中调用另一个应用程序时，该应用程序都没有运行。怎么了？

顺便说一句，我使用过 shellexecute、shellopen 或用 cmd 调用它。这些方法都不起作用。

这是我的代码：

```
 program roro_serv;

uses
  SvcMgr,
  Unit1 in 'Unit1.pas' {Service1: TService},
  ping in 'ping.pas';

{$R *.RES}

begin
  Application.Initialize;
  Application.CreateForm(TService1, Service1);
  Application.Run;
end.

    unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Classes, Graphics, Controls, SvcMgr, Dialogs,
  ExtCtrls, DB, MemDS, DBAccess, MyAccess, Menus, forms, IniFiles,
  ComCtrls, wininet, Variants, shellapi,
  FileCtrl, ExtActns, StdCtrls, ShellCtrls;

type
  TService1 = class(TService)
    Timer1: TTimer;
    procedure Timer1Timer(Sender: TObject);
    procedure ServiceExecute(Sender: TService);
    procedure ServiceStop(Sender: TService; var Stopped: Boolean);
    procedure ServiceStart(Sender: TService; var Started: Boolean);
  private
    { Private declarations }
  public
    function GetServiceController: TServiceController; override;
    { Public declarations }
    procedure run_procedure;
    procedure log(text_file, atext : string );
    procedure loginfo(text : string);
    function  CheckUrl(url: string): boolean;
    procedure execCMD(CommandLine, Work:  string);
    function  DoDownload(FromUrl, ToFile: String): boolean;
  end;

var
  Service1: TService1;
  iTime : integer;
  limit_time : integer = 2;
  myini : TiniFile;
  default_exe_path : string = '';
  default_log_path : string = '';
  appdir : String = '';

implementation

{$R *.DFM}

uses ping;

function TService1.CheckUrl(url: string): boolean;
var 
hSession, hfile, hRequest: hInternet;
dwindex,dwcodelen :dword; 
dwcode:array[1..20] of char; 
res : pchar; 
begin 
if pos('http://',lowercase(url))=0 then 
url := 'http://'+url; 
Result := false; 
hSession := InternetOpen('InetURL:/1.0', 
INTERNET_OPEN_TYPE_PRECONFIG,nil, nil, 0);
if assigned(hsession) then
begin 
hfile := InternetOpenUrl(
hsession, 
pchar(url), 
nil, 
0, 
INTERNET_FLAG_RELOAD, 
0); 
dwIndex := 0; 
dwCodeLen := 10; 
HttpQueryInfo(hfile, HTTP_QUERY_STATUS_CODE, 
@dwcode, dwcodeLen, dwIndex); 
res := pchar(@dwcode); 
result:= (res ='200') or (res ='302'); 
if assigned(hfile) then 
InternetCloseHandle(hfile); 
InternetCloseHandle(hsession); 
end;
end;

procedure ServiceController(CtrlCode: DWord); stdcall;
begin
  Service1.Controller(CtrlCode);
end;

function TService1.GetServiceController: TServiceController;
begin
  Result := ServiceController;
end;

procedure TService1.Timer1Timer(Sender: TObject);
begin
iTime:=iTime+1;
if iTime=15 then // (limit_time*60) then
  begin
      itime:=1;
      run_procedure;
  end;
// loginfo('Defaultlog : '+default_log_path+'; exe : '+default_exe_path);
end;

procedure TService1.ServiceExecute(Sender: TService);
begin
Timer1.Enabled := True;
while not Terminated do
ServiceThread.ProcessRequests(True);
Timer1.Enabled := False;
end;

procedure TService1.run_procedure;
var
i : integer;
sUrl, sLogFile, sAction, sAct_param : String;
begin
for i:=0 to 20 do
   begin
   sLogFile:=default_log_path+myini.ReadString('logs', 'log_file'+intTostr(i), '');
   if fileexists(slogfile) then
      begin
      loginfo(slogfile+' tersedia');
      sAction:=myini.ReadString('logs', 'action'+intTostr(i), '');
           if ((trim(sAction)<>'') and (fileexists(default_exe_path+sAction))) then
              begin
                   // this line is don't work in servcie
                   ShellExecute(Application.Handle, 'open', 'c:\Windows\notepad.exe', nil, nil, SW_SHOWNORMAL);
                   sAct_param:=myini.ReadString('logs', 'action_prm'+intTostr(i), '');
                   // this line is don't work in servcie
                   execCMD(sAction+' '+sAct_param, default_exe_path);
                   loginfo(sAction+' '+sAct_param+' defpath : '+default_exe_path);
                   // this loginfo works
              end;
      end else
      begin

      end;

   end;
end;

procedure TService1.log(text_file, atext: string);
var
logFile : TextFile;
begin
AssignFile(LogFile, text_file);
if FileExists(text_file) then
Append(LogFile) else rewrite(LogFile);
WriteLn(logFile, aText);
CloseFile(LogFile);
end;

procedure TService1.loginfo(text: string);
begin
log(ChangeFileExt(application.exename, '.log'), formatdateTime('dd-mm-yyyy hh:nn:ss ', now)+
text);
end;

procedure TService1.ServiceStop(Sender: TService; var Stopped: Boolean);
begin
myini.Free;
end;

procedure TService1.execCMD(CommandLine, Work: string);
var
SA: TSecurityAttributes;
SI: TStartupInfo;
PI: TProcessInformation;
StdOutPipeRead, StdOutPipeWrite: THandle;
WorkDir: string;
begin
with SA do begin
nLength := SizeOf(SA);
bInheritHandle := True;
lpSecurityDescriptor := nil;
end;
CreatePipe(StdOutPipeRead, StdOutPipeWrite, @SA, 0);
try
with SI do
begin
FillChar(SI, SizeOf(SI), 0);
cb := SizeOf(SI);
dwFlags := STARTF_USESHOWWINDOW or STARTF_USESTDHANDLES;
wShowWindow := SW_HIDE;
hStdInput := GetStdHandle(STD_INPUT_HANDLE); // don't redirect stdin
hStdOutput := StdOutPipeWrite;
hStdError := StdOutPipeWrite;
end;
WorkDir := Work;
CreateProcess(nil, PChar('cmd.exe /C ' + CommandLine),
nil, nil, True, 0, nil,
PChar(WorkDir), SI, PI);
CloseHandle(StdOutPipeWrite);
finally
CloseHandle(StdOutPipeRead);
end;
end;

procedure TService1.ServiceStart(Sender: TService; var Started: Boolean);
begin
appdir:=ExtractFileDir(Application.ExeName);
myini:=TiniFile.Create(ExtractFileDir(application.ExeName)+'\setting.ini');
limit_time:=myini.ReadInteger('setting', 'limit_time', 0);
default_exe_path:=myini.ReadString('setting', 'default_exe_path','');
if trim(default_exe_path)='' then default_exe_path:=appdir+'\';

default_log_path:=myini.ReadString('setting', 'default_log_path','');
if trim(default_log_path)='' then default_log_path:=appdir+'\logs\';

end;

function TService1.DoDownload(FromUrl, ToFile: String): boolean;
begin
 {  with TDownloadURL.Create(self) do
   try
     URL:=FromUrl;
     FileName := ToFile;
     ExecuteTarget(nil) ;
   finally
     Free;
   end;    }
end;

end. 
```

请参阅 run_procedure 代码行；

简而言之：如何从我的服务中调用另一个应用程序？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-10T19:46:09.453

`ShellExecute/Ex()`并`CreateProcess()`在与调用进程相同的会话中运行指定的文件/应用程序。服务始终在会话 0 中运行。

在 XP 和更早版本中，第一个登录的用户也在会话 0 中运行，因此服务可以运行交互式进程并让该交互式用户查看它，但前提是该服务被标记为交互式（`TService.Interactive`属性为 true）。如果多个用户登录，他们在会话 1+ 中运行，因此看不到服务运行的交互式进程。

Windows Vista 引入了一项名为[“Session 0 Isolation”](http://msdn.microsoft.com/en-us/windows/hardware/gg463353)的新功能。交互式用户根本不再在会话 0 中运行，而是始终在会话 1+ 中运行，会话 0 根本不是交互式的（该`TService.Interactive`属性不再有任何作用）。但是，为了帮助迁移遗留服务，如果服务运行尝试在会话 0 上显示 GUI 的交互式进程，Windows 会提示当前登录的用户（如果有）切换到临时使 GUI 可见的单独桌面. 在 Windows 7 及更高版本中，该旧版支持现已不复存在。

从 2000 年开始，在 Windows 上的所有版本中，从服务运行交互式进程并使其对交互式用户可见的正确方法是使用[`CreateProcessAsUser()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682429.aspx)在指定用户的会话和桌面中运行新进程。MSDN、StackOverflow 和整个 Web 上都有很多详细的示例，所以我不打算在这里重复它们。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-10T19:32:44.537

服务在与交互式用户不同的会话中运行。服务在会话 0 中运行。会话 0 进程无权访问交互式桌面。这意味着在会话 0 中显示交互式进程的任何尝试都注定要失败。您正在尝试创建一个交互式记事本进程。

有多种方法可以通过会话在交互式桌面上启动进程：[在 Windows Vista 和更高版本中从 Windows 服务启动交互式进程](http://blogs.msdn.com/b/winsdk/archive/2009/07/14/launching-an-interactive-process-from-windows-service-in-windows-vista-and-later.aspx)。正如您在阅读那篇文章后会理解的那样，您尝试做的事情并非易事。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-10T10:49:31.387

此解决方案旨在从服务中使用，我想我会在此处粘贴此代码，因为它是我让我的服务以当前登录用户身份运行应用程序的方式。

```
function WTSQueryUserToken(SessionId: ULONG; var phToken: THandle): BOOL; stdcall; external 'Wtsapi32.dll';

procedure runApp(appName: String);
var
  hToken: THandle;
  StartupInfo: TStartupInfo;
  ProcessInfo: TProcessInformation;
  res: boolean;

  begin
    GetStartupInfo(StartupInfo);
   if WTSQueryUserToken(WtsGetActiveConsoleSessionID, hToken) then
   begin
     res := CreateProcessAsUser(hToken, PWideChar(appName), nil, nil, nil, False, CREATE_NEW_CONSOLE, nil, nil, StartupInfo, ProcessInfo);
     if res then
      WaitForSingleObject(ProcessInfo.hProcess,INFINITE);
   end;
end; 
```

//您的服务或应用程序中的任何位置

```
RunApp ('notepad.exe'); 
```

# php - 使用不同用户级别的 PHP 登录

> ID：14801563
> 
> 赞同：-1
> 
> 时间：2013-02-10T19:15:03.790
> 
> 标签：php, sql

请帮忙。这段代码有什么问题。我正在尝试创建具有不同用户级别的登录名，但是当我尝试以管理员或其他用户身份登录时，它没有指向请求页面。

这是代码

```
<?php
...//the problem goes here, it didn't direct to the request page

if(empty($error)){//if the array is empty , it means no error found
    $query_check = "SELECT * FROM users WHERE (email = '$email' AND password= '$password') AND activation IS NULL";
    $result = mysqli_query($db_conn, $query_check);
    if(!$query_check){
    echo "Query Failed";        
    }
    if(@mysqli_num_rows($result)==1){//if match
        $_SESSION = mysqli_fetch_array($result,MYSQLI_ASSOC); //Assign the result of this query to SESSION Global Variable
        $row = mysqli_fetch_array ($result, MYSQLI_ASSOC);
            if($row['role_type']=='admin'){
                header("Location:../views/admin/dashboard.php");
                exit;
            }
            if($row['role_type']=='staff'){
                header("Location:../views/staff/dashboard.php");
            }
            if($row['role_type']=='patient'){
                header("Location: ../views/dafault/home.php");
            }
    }else{
        $msg_error = "Either Your Account is inactive or Email address /Password is Incorrect";
    }
}else{
    echo '<div class="errormsgbox"> <ol>';
    foreach($error as $key => $values){
        echo '  <li>'.$values.'</li>';
    }
    echo '</ol></div>';
}

if(isset($msg_error)){
    echo '<div class="warning">'.$msg_error.' </div>';
    }
mysqli_close($db_conn);
} 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T19:22:09.813

标头函数应包含完全限定的 url，而不是相对文件系统路径。

```
header('Location: http://www.example.com/views/admin/dashboard.php'); 
```

# flash - Flex 3 预加载器因 Flash 11/11.5 而死

> ID：14801564
> 
> 赞同：2
> 
> 时间：2013-02-10T19:15:26.603
> 
> 标签：flash, apache-flex, flex3, flash-builder, flex4.5

我真的需要帮助，我已经处理了几个月了。基本上我有一个带有自定义预加载器的旧 Flex 3 应用程序。一旦每个人都升级到 Flash 11 和 11.5，预加载器就消失了。我正在尝试使用 Flash Builder 4.7 进行工作，并在 3.6 库中进行链接，但可惜它似乎默默地失败了。即使是标准的预加载器也与“正在加载库 0”（但它确实显示）结合在一起......我正在使用现在经典的“DownloadProgressBar”扩展自定义预加载器模式。

```
package com.timberdesignco.preloader
{
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.events.ProgressEvent;
    import flash.events.TimerEvent;
    import flash.utils.Timer;

    import mx.events.FlexEvent;
    import mx.preloaders.DownloadProgressBar;

    public final class CustomPreloader extends DownloadProgressBar {
        public  var loader : LoadScreen;
        private var _timer : Timer;

        public function CustomPreloader() 
        {
            super(); 
        }

        override public function initialize() : void
        {
            super.initialize();

            this.loader = new LoadScreen();
            this.addChild(this.loader);

            this._timer = new Timer(10);
            this._timer.addEventListener(TimerEvent.TIMER, handleTimerTick);
            this._timer.start();
        }

        override public function set preloader(preloader : Sprite):void 
        {                   
            preloader.addEventListener(ProgressEvent.PROGRESS,  SWFDownLoadScreen);
            preloader.addEventListener(Event.COMPLETE,          SWFDownloadComplete);
            preloader.addEventListener(FlexEvent.INIT_PROGRESS, FlexInitProgress);
            preloader.addEventListener(FlexEvent.INIT_COMPLETE, FlexInitComplete);
        }

        private function SWFDownLoadScreen(event : ProgressEvent) : void
        {
            var prog : Number = event.bytesLoaded / event.bytesTotal * 100;
            if (this.loader)
            {
                this.loader.progress = prog;
            }
        }

        private function handleTimerTick(event : TimerEvent) : void
        {
            this.stage.addChild(this);
            this.loader.x = (this.stage.stageWidth  - this.loader.width)  / 2 - 35;
            this.loader.y = (this.stage.stageHeight - this.loader.height) / 2;
            this.loader.refresh();
        }

        private function SWFDownloadComplete(event : Event) : void {}

        private function FlexInitProgress(event : Event) : void {}

        private function FlexInitComplete(event : Event) : void 
        {      
            this.loader.ready = true;
            this._timer.stop();
            this.dispatchEvent(new Event(Event.COMPLETE));
        }

        override protected function showDisplayForInit(elapsedTime:int, count:int):Boolean
        {
            return true;
        }

        override protected function showDisplayForDownloading(elapsedTime:int,
                                                  event:ProgressEvent):Boolean
        {
            return true;
        }
    }
} 
```

* * *

```
package com.timberdesignco.preloader
{
    import flash.display.Bitmap;
    import flash.display.BitmapData;
    import flash.display.Graphics;
    import flash.display.Loader;
    import flash.display.Sprite;
    import flash.text.Font;
    import flash.text.TextField;
    import flash.text.TextFormat;
    import flash.utils.ByteArray;

    import mx.graphics.codec.PNGEncoder;

    public class LoadScreen extends Loader {

        //~ Instance Attributes -----------------------------------------------
        [Embed(source="/assets/CreightonReg.otf", fontFamily="Creighton")]
        private var CreightonEmbedded:Class;
        private var creightonEmbeddedFont:Font = new CreightonEmbedded();

        [Embed(source="/assets/LoadingBar-Bark.png")]
        private var MyLogoClass: Class;

        private var _logo : Bitmap;
        private var _logoData : BitmapData;

        private var isReady  : Boolean = false;
        public  var progress : Number;

        //~ Constructor -------------------------------------------------------        
        public function LoadScreen()
        {
            super();
            this.progress = 0;
            this._logo = new MyLogoClass as Bitmap;
        }

        //~ Methods -----------------------------------------------------------
        public function refresh() : void {
            this._logoData = this.draw();
            var encoder : PNGEncoder = new PNGEncoder();
            var bytes   : ByteArray  = encoder.encode(this._logoData);
            this.loadBytes(bytes);
        }

        override public function get width() : Number {
            return 300;
        }

        override public function get height() : Number {
            return 300;
        }

        private function draw() : BitmapData {
            // create bitmap data to create the data
            var data : BitmapData = new BitmapData(this.width, this.height, true, 0);

            // draw the logo
            //data.draw(this._logo.bitmapData, null, null, null, null, true);

            // draw the progress bar
            var s : Sprite = new Sprite();
            var g : Graphics = s.graphics;

            // draw the bar background
            //g.beginFill(_BarBackground);
            //g.lineStyle(2, _BarOuterBorder, 1, true);
            //var px : int = (this.width - _BarWidth) / 2;
            //var py : int = _TopMargin + _LogoHeight + _Padding;
            //g.drawRoundRect(px, py, _BarWidth, _BarHeight, 2);
            //var containerWidth : Number = _BarWidth - 4;
            //var progWidth : Number = containerWidth * this.progress / 100;
            //g.beginFill(_BarColor);
            g.lineStyle(2, 0xa1865e);
            //g.drawRect(px + 1, py + 1, progWidth, _BarHeight - 3);
            var rad:int = (5 * (this.progress / 10));
            for(var i:int = this.progress; i > 0; i--) {
                g.drawCircle(this.width / 2 + 5, this.height / 2, (5 * (int)(i  / 10) + 1));
                data.draw(this._logo.bitmapData, null, null, null, null, true); 
            } 

            var startX:Number = this.width / 2 + 5;
            var endX:Number = startX + 50;//(rad / 2);
            var startY:Number = (this.height / 2); // - Math.sqrt(Math.pow(rad, 2) - (Math.pow(startX - endX, 2))); 
            var endY:Number = 50;

            g.moveTo(startX, startY);
            g.lineTo(endX, endY);
            g.lineTo(endX + 20, endY);

            var textFormat:TextFormat = new TextFormat();
            textFormat.color = 0xa1865e;
            textFormat.font = creightonEmbeddedFont.fontName;
            textFormat.size = 14;
            textFormat.letterSpacing = 2;

            var text:TextField = new TextField();
            text.defaultTextFormat = textFormat;
            text.embedFonts = true;
            text.text = Math.ceil(progress) + "%";
            text.x = endX + 28;
            text.y = endY - 14;
            text.textColor = 0xa1865e;
            text.width = 100;
            text.height = 20;
            s.addChild(text);

            data.draw(s);

            return data;
        }

        public function set ready(value : Boolean) : void
        {
            this.isReady = value;
            this.visible = !this.isReady;
        }

        public function get ready() : Boolean { return this.isReady; }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:16:53.877

所以我有你的预加载器的简化版本。

![在此处输入图像描述](../Images/a27022b82067c6aeaa081886501d94b0.png)

这是我的代码。如果有的话，我们可以讨论哪些部分应该以另一种方式完成。

//应用

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application 
xmlns:mx="http://www.adobe.com/2006/mxml" 
layout="absolute" minWidth="955" 
minHeight="600" 
preloader="com.timberdesignco.preloader.CustomPreloader">

<mx:Script>
    <![CDATA[
        [Embed("/assets/bmw.png") ]
        [Bindable] public var Office:Class;
    ]]>
</mx:Script>

<mx:Image source="{Office}" horizontalCenter="0" verticalCenter="0"/>

</mx:Application> 
```

//自定义预加载器

```
package com.timberdesignco.preloader
{
import flash.display.Sprite;
import flash.events.Event;
import flash.events.ProgressEvent;
import flash.events.TimerEvent;
import flash.utils.Timer;
import mx.core.Application;
import mx.events.FlexEvent;
import mx.preloaders.DownloadProgressBar;

public final class CustomPreloader extends DownloadProgressBar 
{
    public  var loader : LoadScreenV2;
    private var _timer : Timer;

    public function CustomPreloader() 
    {
        super(); 
    }

    override public function initialize() : void
    {
        super.initialize();

        loader = new LoadScreenV2();
        this.addChild(this.loader);

        loader.x = (this.stage.stageWidth  - this.loader.width)  / 2 - 35;
        loader.y = (this.stage.stageHeight - this.loader.height) / 2;

        this._timer = new Timer(10);
        this._timer.addEventListener(TimerEvent.TIMER, handleTimerTick);
        this._timer.start();
    }

    override public function set preloader(preloader : Sprite):void 
    {                   
        preloader.addEventListener(ProgressEvent.PROGRESS,  SWFDownLoadScreen);
        preloader.addEventListener(Event.COMPLETE,          SWFDownloadComplete);
        preloader.addEventListener(FlexEvent.INIT_PROGRESS, FlexInitProgress);
        preloader.addEventListener(FlexEvent.INIT_COMPLETE, FlexInitComplete);
    }

    private function SWFDownLoadScreen(event : ProgressEvent) : void
    {
        var prog : Number = event.bytesLoaded / event.bytesTotal * 100;

        if (this.loader)
        {
            this.loader.progress = prog;
        }
    }

    private function handleTimerTick(event : TimerEvent) : void
    {
        this.loader.refresh();
    }

    private function SWFDownloadComplete(event : Event) : void 
    {
    }

    private function FlexInitProgress(event : Event) : void {}

    private function FlexInitComplete(event : Event) : void 
    {      
        this._timer.stop();
        this.dispatchEvent(new Event(Event.COMPLETE));
    }

    override protected function showDisplayForInit(elapsedTime:int, count:int):Boolean
    {
        return true;
    }

    override protected function showDisplayForDownloading(elapsedTime:int, event:ProgressEvent):Boolean
    {
        return true;
    }
}
} 
```

//加载屏幕V2

```
package com.timberdesignco.preloader
{
import flash.display.Graphics;
import flash.display.Sprite;
import flash.text.Font;
import flash.text.TextField;
import flash.text.TextFormat;

import mx.preloaders.IPreloaderDisplay;

public class LoadScreenV2 extends Sprite
{
    private var _progress:Number;
    private var g : Graphics;

    private var startX:Number;
    private var endX:Number;
    private var startY:Number; 
    private var endY:Number;

    private var text:TextField;

    [Embed(source="/assets/Pahuenga.otf", fontFamily="Pahuenga")]
    private var CreightonEmbedded:Class;
    private var creightonEmbeddedFont:Font = new CreightonEmbedded();

    [Embed(source="/assets/LoadingBar-Bark.png")]
    private var MyLogoClass: Class;

    public function LoadScreenV2()
    {
        super();

        init();
    }

    public function get progress():Number
    {
        return _progress;
    }

    public function set progress(value:Number):void
    {
        _progress = value;

        refresh();
    }

    private function init():void
    {
        g = this.graphics;

        startX = this.width / 2 + 5;
        endX = startX + 50;
        startY = (this.height / 2); 
        endY = 50;

        var textFormat:TextFormat = new TextFormat();
        textFormat.color = 0xa1865e;
        textFormat.font = creightonEmbeddedFont.fontName;
        textFormat.size = 14;
        textFormat.letterSpacing = 2;

        text = new TextField();
        text.defaultTextFormat = textFormat;
        text.embedFonts = true;

        text.x = endX + 28;
        text.y = endY - 14;
        text.textColor = 0xa1865e;
        text.width = 100;
        text.height = 20;
        addChild(text);
    }

    override public function get width() : Number 
    {
        return 300;
    }

    override public function get height() : Number 
    {
        return 300;
    }

    public function refresh():void
    {
        g.clear();
        draw();
    }

    protected function draw():void
    {
        g.lineStyle(2, 0xa1865e);

        for(var i:int = this.progress; i > 0; i--) {
            g.drawCircle(this.width / 2 + 5, this.height / 2, (5 * (int)(i  / 10) + 1));
        } 

        g.moveTo(startX, startY);
        g.lineTo(endX, endY);
        g.lineTo(endX + 20, endY);

        text.text = Math.ceil(progress) + "%";
    }

}
} 
```

# c# - 将 php 样式的数组参数从 C# 传递到 Web 服务

> ID：14801577
> 
> 赞同：1
> 
> 时间：2013-02-10T19:17:03.193
> 
> 标签：c#, soap

我在调用合作伙伴的 Soap 网络服务时遇到问题。我必须用 C# 编写一个客户端来配合这个服务。我对网络服务比较陌生，如果我的问题很琐碎，我很抱歉，但是经过数小时的谷歌搜索后我找不到答案。

因此，服务（用 php 编写）接受键值对的参数。此结构（字段名称、类型）记录在手册中，但未出现在 wsdl 中（wsdl 中没有类型定义）

WSDL 的一部分：

```
 <message name="Authenticate">
    <part name="auth" type="xsd:anyType"/>  
    </message> 
```

（例如“auth”是上面提到的数组类型，这是一个输入参数）

因此这些参数在 wsdl 中显示为“anyType”。当我生成代理类（使用添加 Web 引用选项）时，我注意到这些参数在自动生成的类中显示为“对象”。

我试图通过

*   HashTable、Dictionary：这些是不可序列化的。
*   数组：不是键值对，不接受二维数组，一维是不够的（无论如何也不行）。
*   自定义类：我想这将是答案，但我有序列化问题。

我的自定义课程是：

```
 [Serializable]
    public class AuthClass
        {
            public string Username { get; set; }
            public string AuthCode { get; set; }       
        } 
```

所以我创建了一个“Authclass”实例，填充它，并尝试传递给服务。

```
 Authclass a = new AuthClass(); 
    (...fill....)
    MyService s = new MyService(); //auto-generated proxy class
    s.Authenticate(a);  //auto-generated method 
```

在运行时，我收到了序列化错误消息：类型 HelloWsdl.AuthClass 不是预期的。使用 XmlInclude 或 SoapInclude 属性指定静态未知的类型。

我为 AuthClass、SoapInclude、XMLInclude、XmlRoot 等尝试了很多序列化属性，我也尝试过强制转换为“对象”，使用对象数组、列表等，但这些都没有解决问题。

所以我的问题是

*   如何将“php-style”数组参数传递给此 Web 服务？哪个是正确的方法？
*   在这种情况下是否可以使用生成的代理类，或者我必须选择另一种技术？在这种情况下，推荐哪种技术？

不幸的是，我无法更改 wsdl。

# java - 小服务程序会话

> ID：14801578
> 
> 赞同：1
> 
> 时间：2013-02-10T19:17:06.153
> 
> 标签：java, session, servlets

我写了一小段代码来理解会话......这是代码

```
public class SessionServlet extends HttpServlet
{
public void doGet(HttpServletRequest request,HttpServletResponse response) throws    IOException,ServletException
{
PrintWriter out=response.getWriter();
HttpSession session=request.getSession();
if(session.isNew())
{
out.println("Client has not responded");

}
else out.println("Client has responded");
}
} 
```

以我的理解，在第一次运行我的程序时，它应该“客户没有响应”，但是它打印了第一条语句......可以解释为什么它会这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T07:54:41.930

If its JSP your accessing before the request reaches the servlet , you should probably check for a setting

`<%@ page session="true" %>`

in JSP.

Change it to **<%@ page session="false" %>** , because having it true , means JSP will participate in a session and no session found it will create one , even before the request reaches the servlet

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T23:19:40.763

您的代码似乎没问题，要对其进行测试，请确保您**清除浏览器缓存/cookie**以确保删除旧会话。

# c++ - 将德语变音符号错误编码为命令行参数

> ID：14801579
> 
> 赞同：0
> 
> 时间：2013-02-10T19:17:13.230
> 
> 标签：c++, encoding, stl, qt-creator

我的 QTCreator 运行 x64 ArchLinux 时遇到了严重问题。包含德语变音符号的命令行参数无效。我想将它们转换为 std::string，这应该是可能的，至少这是我能读到的全部内容。

```
std::string arg(argv[1]);
// do something with arg 
```

如果我使用调试器查看变量，它会显示一个有点转义的字符串。例如，ä 变成“=\”。但是，如果我

```
std::cout << arg << std::endl; 
```

该变量在我的控制台（urxvt）上完全正常。

我检查了 QtCreator 的编辑器设置（我以前从未接触过），它说，它使用 UTF-8。在将一些变音符号添加到注释中并执行后，我将源文件转换为 UTF-8

```
% iconv -f ascii -t utf-8 main.cpp > _main.cpp
% mv _main.cpp main.cpp
# qtcreator recognized the change and ask me to reload the file, what I did

% file -bi main.cpp
# then results text/x-c; charset=utf-8, was text/x-c; charset=us-ascii before 
```

没有任何效果。我什至无法定义包含变音符号的 std::string：

```
std::string s("Mäx");
// the GDB debugger show 's' as: M=\x 
```

然后我从我的 .pro 文件中定义了 UNICODE

```
DEFINES += UNICODE
# also without success 
```

为了更加神秘化，以下内容具有不同的效果：

```
std::vector< std::string > list(argv, argv + argc);
# the debugger shows 2 elements (which is correct)
# but the element at index 1 looks like this: "MÃ¤x" 
```

我完全无助。也许有人可以帮忙。谢谢

@奥拉夫：

```
// lacks sanity checks but good enough for testing
std::wstring Encoding::char2Wide(const char *chars) {
    setlocale(LC_ALL, "");

    // get the length of the string to convert
    int len = mbstowcs(NULL, chars, 0) + 1;

    wchar_t* result = new wchar_t[len];
    len = mbstowcs(result, chars, len);

    std::wstring s(result);
    return s;
} 
```

**2013 年 2 月 11 日**

为了澄清一点，这张图片显示了 std::string 的问题 ![std::string 的问题](../Images/82ae7acd96584629eae076c158e9614b.png)

控制台上的输出不是问题。完全没问题。这是我的语言环境设置

```
% locale
LANG=de_DE.UTF-8
LC_CTYPE="de_DE.UTF-8"
LC_NUMERIC="de_DE.UTF-8"
LC_TIME="de_DE.UTF-8"
LC_COLLATE="de_DE.UTF-8"
LC_MONETARY="de_DE.UTF-8"
LC_MESSAGES="de_DE.UTF-8"
LC_PAPER="de_DE.UTF-8"
LC_NAME="de_DE.UTF-8"
LC_ADDRESS="de_DE.UTF-8"
LC_TELEPHONE="de_DE.UTF-8"
LC_MEASUREMENT="de_DE.UTF-8"
LC_IDENTIFICATION="de_DE.UTF-8"
LC_ALL= 
```

**哈哈：**

```
if ( s == "Mäx" ) std::cout << "Yeahhh" << endl;
-> Yeahhh (what the fxxx!) 
```

也许这只是一个 qtcreator 问题。我今天用 Visual Studio 尝试了这个简单的例子，一切都按预期进行。而且，它也可以像我期望的那样在 Linux 上使用 Eclipse CDT。GDB 显示正确的值。我想，我会提交一个错误。

**更新**

在这里查看[https://stackoverflow.com/a/14801772/76591](https://stackoverflow.com/a/14801772/76591)以获得正确答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T19:37:38.357

这一切都取决于各种程序中使用的编码，qtcreator，urxvt，gdb，...。

从`ascii`to转换`utf-8`没有意义，因为每个仅 ascii 的文件已经是 utf-8 编码的。前 127 个 utf-8 字符与 127 个 us-ascii 字符相同。

当我`std::string s("Mäx");`在 gdb 中查看时，我看到了

> (gdb) ps
> $1 = {static npos = <优化输出>,
> _M_dataplus = {<std::allocator<char>> = {<__gnu_cxx::new_allocator<char>> = {<No data fields>}, <No data字段>}，_M_p = 0x602028“最大”}}

你的最后一个例子，

> # 但索引 1 处的元素看起来像这样：“MÃ¤x”

显示输出正在使用`iso-8859-1`，因为`ä`在 utf-8 中是两个字节的`303 244`八进制字符。您可以`man iso-8859-1`分别验证这一点。

因此，如果您在各种程序中看到不同的输出，这意味着它们使用不同的编码。

您有两个程序，urxvt 和 qtcreator。

根据此消息[QtCreator and UTF-8](http://lists.qt.nokia.com/public/qt-creator/2009-October/004697.html)，对于 qtcreator，您必须在项目的设置中设置编码。

对于 urxvt，环境似乎是有责任的。我已经设置`LANG=de_DE.UTF-8`了，它适用于 UTF-8 字符串。但是，如果我开始 urxvt

> LANG=de_DE urxvt

它在输出或gdb 中`Mäx`显示UTF-8 字符串。`MÃ¤x``"M\303\244x`

您可以在启动 urxvt 时测试不同的行为

```
LANG=en_US.UTF-8 urxvt 
```

或者

```
LANG=en_US urxvt 
```

并比较各自的输出。

**更新**：

您可以通过右键单击`argv[1]`->“更改显示格式”->“UTF-8 字符串”来更改纯 C 字符串的显示。

为了`std::string`显示，`M=\x`来自调试助手。我在“工具”->“选项”->“调试器”->“调试助手”下禁用了调试助手。然后您可以看到各个成员`std::string`并更改`_M_p`为显示 UTF-8 字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T03:43:10.213

只需使用 wchar_t** 作为 main 的第二个参数。

# java - 膨胀自定义 android 小部件

> ID：14801580
> 
> 赞同：0
> 
> 时间：2013-02-10T19:17:15.490
> 
> 标签：java, android, custom-component

我知道有几十个类似的帖子，但在我看来，这里的一切都是正确的：

自定义小部件：

```
public class DoubleTextItem extends LinearLayout {

private TextView txtMain;
private TextView txtDescription;

public DoubleTextItem(Context context) {
    super(context);
}
public DoubleTextItem(Context context, AttributeSet attrs) {
    super(context, attrs);
}

@Override
protected void onFinishInflate() {
    super.onFinishInflate();
    ((Activity)getContext()).getLayoutInflater().inflate(R.layout.widget_double_text_item, this);
    setupViewItems();
}

private void setupViewItems() {
    txtMain = (TextView) findViewById(R.id.txtMain);
    txtDescription = (TextView) findViewById(R.id.txtDecription);
}
public void setDescription(String text) {
    txtDescription.setText(text);
}
} 
```

自定义小部件布局 xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

    <TextView
    android:id="@+id/txtMain"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" />

    <TextView
    android:id="@+id/txtDecription"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" />

</LinearLayout> 
```

在活动函数中，我得到一个转换错误，

```
LayoutInflater inflater = LayoutInflater.from(this);
DoubleTextItem item = (DoubleTextItem) inflater.inflate(R.layout.widget_double_text_item, layout);              
item.setText(som-txt);
item.setDescription("#"+athlete.getString("position")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T21:10:07.917

在这里，根视图是一个 LinearLayout 但您尝试将其转换为您的自定义类：

```
DoubleTextItem item = (DoubleTextItem) inflater.inflate(R.layout.widget_double_text_item, layout); 
```

标准建议是：

> 所有的 DoubleTextItem 都是 LinearLayout，但并非所有的 LinearLayout 都是 DoubleTextItem。

这意味着您不能将对象从 LinearLayout 向下转换为 DoubleTextItem，假设太多，Java 不会让您这样做。

如果你想在你的布局中使用 DoubleTextItem，你需要使用：

```
<your.package.name.DoubleTextItem 
    ... /> 
```

（另外，在里面调用 inflate`onFinishInflate()`似乎有点傻，特别是因为你没有保存充气的项目......如果你想充气不同的布局，不要充气第一个。）

* * *

总体而言，您似乎正在尝试重新创建现已弃用的[TwoLineListItem](https://developer.android.com/reference/android/widget/TwoLineListItem.html)，也许您可​​以从它的[源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/widget/TwoLineListItem.java#TwoLineListItem)中学习一些指针（或者只使用 TwoLineListItem。）

# json - JSON.stringify 给了我错误的 json 数组

> ID：14801583
> 
> 赞同：0
> 
> 时间：2013-02-10T19:17:21.907
> 
> 标签：json, debugging, serialization, escaping

我有这个代码：

```
var sidebars = {};
var counter = 0;

// Loop through all already crated sidebars
$('.custom_dynamic_sidebars li').each(function(event) {
    sidebars[counter] = $(this).text();
    counter++;
});

var sidebars_string = JSON.stringify(sidebars); 
```

但它给了我这个字符串：

```
{\"0\":\"aa\",\"1\":\"bb\"} 
```

这是将数组发送到服务器的javascript：

```
 $.ajax({
        url:"/welit_2/wp-admin/admin-ajax.php",    
        type:'POST',
        data:'action=dynamic_sidebars&sidebars='+sidebars_string+'',

        success:function(results) {
            console.log(results);
        }
    }); 
```

有谁知道我做错了什么？谢谢你的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T00:04:44.887

> 所以我找到了一个解决方案如果你在输出之前对 JSON 字符串运行 stripslashes() ，它可以正常工作

# c# - 具有 lambda 格式的 Visual Studio 自动完成事件处理程序

> ID：14801584
> 
> 赞同：5
> 
> 时间：2013-02-10T19:17:28.700
> 
> 标签：c#, visual-studio, lambda, event-handling, intellisense

我在 VS2012 上并想使用 lambda 格式进行事件处理，但是每当您通过 += 键入事件订阅时，VS 都会使用 tab 键自动完成，例如：

VS 通过引用函数自动完成并插入函数：

```
txtTitle.TextChanged += txtTitle_TextChanged;

void txtTitle_TextChanged(object sender, TextChangedEventArgs e)
{
    ....
} 
```

有没有办法强制使用 Lambda 格式自动完成：

```
txtTitle.TextChanged += (object sender, TextChangedEventArgs e) =>
{
    ....
} 
```

必须从自动完成的非 lambda 复制和粘贴到更紧凑的 lambda 格式是一个巨大的痛苦。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T21:33:45.907

您可以只创建一个代码片段，我有一个用于创建 Lambda 事件。

如果您想尝试（只需保存为*任何*.snippet）并在VS中导入（工具->代码片段管理器），这里是片段

片段：

```
<?xml version="1.0" encoding="utf-8"?>
<CodeSnippets xmlns="http://schemas.microsoft.com/VisualStudio/2005/CodeSnippet">
  <CodeSnippet Format="1.0.0">
    <Header>
      <SnippetTypes>
        <SnippetType>Expansion</SnippetType>
      </SnippetTypes>
      <Title>SnippetFile1</Title>
      <Author>sa_ddam213</Author>
      <Description>
      </Description>
      <HelpUrl>
      </HelpUrl>
      <Shortcut>le</Shortcut>
    </Header>
    <Snippet>
      <Declarations>
        <Literal Editable="true">
          <ID>s</ID>
          <ToolTip>s</ToolTip>
          <Default>s</Default>
          <Function>
          </Function>
        </Literal>
        <Literal Editable="true">
          <ID>e</ID>
          <ToolTip>e</ToolTip>
          <Default>e</Default>
          <Function>
          </Function>
        </Literal>
      </Declarations>
      <Code Language="csharp" Kind="method body"><![CDATA[($s$,$e$) => { };]]></Code>
    </Snippet>
  </CodeSnippet>
</CodeSnippets> 
```

然后使用只需键入**eventname += le Tab**

例子

已加载 += le 选项卡

结果

```
Loaded += (s, e) => { }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T20:09:10.453

你可以写：

```
this.txtTitle.TextChanged += (s, e) => {}; 
```

# javascript - 如何动态创建 JSON 对象？

> ID：14801590
> 
> 赞同：-3
> 
> 时间：2013-02-10T19:17:41.043
> 
> 标签：javascript, jquery, json

```
var dates = [
                {
                    "marker": "1986", 
                    "type": "default",
                    "title": "Master of Puppets" ,
                    "content": "Metallica's third studio album, Master of Puppets, was recorded at Sweet Silence Studios and was released in March 1986\. The album reached number 29 on the Billboard 200, and spent 72 weeks on the chart.[23] The album was the band's first to be certified gold on November 4, 1986, and was certified six times platinum in 2003.[24] Steve Huey of Allmusic considered the album \"the band's greatest achievement\".[25] Following the release of the album, Metallica supported Ozzy Osbourne for a United States tour.[21] Hetfield broke his wrist skateboarding down a hill and continued the tour performing vocals, with guitar technician John Marshall playing rhythm guitar.[26]"
                },
                {
                    "marker": "1991", 
                    "type": "youtube-video",
                    "title": "Ten" ,
                    "youtubeId": "VbhsYC4gKy4" ,
                    "content": "With the success of Ten, Pearl Jam became a key member of the Seattle grunge explosion."
                },
                {
                    "marker": "1992", 
                    "type": "image",
                    "title": "Nirvana",
                    "img": "http://upload.wikimedia.org/wikipedia/commons/1/19/Nirvana_around_1992.jpg",
                    "content": "Kurt Cobain (front) and Krist Novoselic (left) live at the 1992"
                },
                {
                    "marker": "1994", 
                    "type": "default",
                    "title": "5 de Abril" ,
                    "content":"<p>I am the best </p>"
                }
            ]; 
```

我的代码中有一个像这样的对象（在我的 html 页面上生成时间线）。如何动态生成这样的对象？如何动态地将内容分配给这些标签（“marker”、“type”）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:44:37.633

要以 JSON 格式输出任何 PHP 变量，请使用[`json_encode`](http://php.net/json-encode).

下次，问你的意思，而不是让我们在评论中哄骗你，好吗？;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T19:53:43.407

JSON 代表 JavaScript 对象表示法。在 JavaScript 中，它用于定义 javascript 对象。从 JSON 构建的 JavaScript 对象基本上是键值对的集合。

由于 JavaScript 是一种基于原型的语言（请参见此处：[http](http://en.wikipedia.org/wiki/Prototype-based_programming) ://en.wikipedia.org/wiki/Prototype-based_programming ），您可以“动态生成”这种对象，只需为其分配所需的任何 key:pair 值. 例子 ：

```
var RandomObject = {} //Create an empty key:pair values object
RandomObject["SomeKey"] = "SomeValue"; 
```

这基本上会做同样的事情，就好像你这样做了：

```
var RandomObject = {"SomeKey":"SomeValue"} 
```

现在，您在这里拥有的是一组键：值对。为了动态地重新创建它，您需要首先创建一个 JavaScript 数组，然后为其分配您的 key:pair 值：

```
var DynamicDates = new Array();
DynamicDates[0] = {
    "marker": "1991", 
    "type": "youtube-video",
    "title": "Ten" ,
    "youtubeId": "VbhsYC4gKy4" ,
    "content": "With the success of Ten, Pearl Jam became a key member of the Seattle grunge explosion."
}; 
```

注意：我选择了第二个条目以使其在示例中更短。

# c++ - 使用 lambda 调用私有析构函数作为 std::shared_ptr 的删除器？

> ID：14801591
> 
> 赞同：0
> 
> 时间：2013-02-10T19:17:54.767
> 
> 标签：c++, memory-management, c++11, lambda, anonymous-function

对于这个游戏，我有一个 Game 类，它是一个单例......这是头文件

```
#ifndef SOKOBAN_GAME_H
#define SOKOBAN_GAME_H
#include <memory>
#include <SDL/SDL.h>
namespace sokoban
{
  class Game
  {
  public:
    static Game* getInstance();
    void startGame();
  private:
    Game();
    ~Game();
    Game(const Game&) = delete;
    Game(Game&&) = delete;
    Game& operator=(const Game&) = delete;
    Game& operator=(Game&&) = delete;

    static std::shared_ptr<Game> instance_;
    SDL_Surface* mainSurface_;
  };
};
#endif 
```

现在，除了 getInstance 函数之外，大部分实现文件都不重要了：

```
Game* Game::getInstance()
{
  if(!Game::instance_)
  {
    Game::instance_ = std::shared_ptr<Game>(new Game,
    [](Game* ptr)
    {
      delete ptr;
    });
  }

  return Game::instance_.get();
} 
```

如您所见，我的惰性初始化样式要求我使用智能指针，但是因为我试图避免使用公共析构函数，所以我必须使用 lambda 作为删除器，现在这段代码编译得很好，但是我不能似乎找到了为什么标准所说的 lambda 是一个单独的唯一对象的任何模式，可以调用这个私有方法，特别是在查看了一些关于 SO 的问题之后，例如：

*   [为什么不能在 lambda 中使用私有方法？](https://stackoverflow.com/questions/11933999/why-is-it-not-possible-to-use-private-method-in-a-lambda)

我基本上想知道的是成员函数中 lambda 的访问规则，例如示例...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T23:54:29.387

该标准在 5.1.2/3 中说

> lambda 表达式 [...] 的类型是唯一的 [...] 类类型 — 称为闭包类型 [...] 闭包类型在最小的块范围、类范围或命名空间范围中声明包含相应的 lambda 表达式。

这意味着发生在（成员）函数内部的 lambda 被视为本地类，在周围函数的块范围内声明。关于本地课程，标准在 9.8/1 中说：

> [...]本地类在封闭范围的范围内，并且与封闭函数一样具有对函数外部名称的相同访问权限。 [...]

因此 lambda 具有与包含成员函数相同的访问权限，这意味着它可以访问类的私有成员。

如果 lambda 直接出现在类范围内，它将被视为嵌套类，适用类似规则：11.7/1 说：

> 嵌套类是成员，因此具有与任何其他成员相同的访问权限。

无论哪种方式，出现在类范围内的 lambda 都可以访问私有类成员。所以你的例子很好。

（您提到的帖子最终是关于访问由*qualified-id*命名的基类的受保护成员的问题。）

# android - 修改 onClickListener 内部的视图

> ID：14801602
> 
> 赞同：0
> 
> 时间：2013-02-10T19:19:26.327
> 
> 标签：android, onclicklistener

我已经在一个单独的类中实现了 onClickListener 和我的应用程序的主要活动。主类包含一些按钮和一些编辑文本，当用户按下取消按钮时，应该重置编辑文本提示。主要活动

```
public ButtonListener(Context cx , Button b, EditText f) {
    cntx = cx;
    button = b;
    et = f;
}
@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
            //check wich button was pressed
    if(button.getId() == R.button.button_cancel) {
        et.setHint(R.string.et_nome);
    }
    else {
            //operations for other buttons 
```

但它不起作用。当我按下取消时，它不会被删除的edittext。在主要活动中，我用

```
Button b = (Button)findViewById(R.button.button_cancel); 
```

并设置监听器

```
b.setOnclickListener(new ButtonListener(this, b, edittext)); 
```

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T19:23:12.053

尝试将其文本设置为空白：

`et.setText(" ");`

[您可以在此处](http://developer.android.com/reference/android/widget/TextView.html)查看其他方法。

处理此问题的另一种方法是隐藏按钮以暂时消除它。看看[这个线程](https://stackoverflow.com/questions/6173400/how-to-programmatically-hide-a-button-in-android-sdk)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T19:23:01.370

你应该改变：

```
if(button.getId() == R.button.button_cancel) 
```

到：

```
if(v.getId() == R.button.button_cancel) 
```

以便代码检查引发点击事件的元素的标识符，而不是您的成员变量`button`。

# asp.net - 使用 linq 对自定义类进行排序列表

> ID：14801604
> 
> 赞同：0
> 
> 时间：2013-02-10T19:20:07.873
> 
> 标签：asp.net, .net, vb.net, linq

我有一个自定义课程

```
Class Item
    Public item As String
    Public Descrip As String
    Public price As String
    Public Bin As String
    Public Total As Decimal
    Public Qty As Integer
End Class 
```

现在我有另一节课

```
Public Class Default3
    Inherits System.Web.UI.Page

    Dim c As Int16 = 0
    Dim Item3 As New Item
    Dim Item2 As New List(Of Item) 
```

现在我在 Item2 中添加 Item 类型的项目

```
 Item3.Item = String.Format(record(0))    ' Field "Item"
 Item3.Descrip = String.Format(record(1)) ' Field "Descrip"
 Item3.price = String.Format(record(2))   ' Field "Price"
 Item3.Bin = String.Format(record(3))     ' Field "Bin"

 Item2.Add(Item3) 
```

现在如何根据 Item3.Bin 对 Item2 中的元素进行排序？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:12:15.040

使用[OrderBy](http://msdn.microsoft.com/en-us/library/bb534966.aspx)

```
Item2 = Item2.OrderBy(Function(x) x.Bin).ToList() 
```

或者你可以使用[排序](http://msdn.microsoft.com/en-us/library/3da4abas.aspx)

```
Item2.Sort(Function(x, y) x.Bin.CompareTo(y.Bin)) 
```

# asp.net-mvc - 让 Html.LabelForModel() 为视图的主模型工作

> ID：14801605
> 
> 赞同：0
> 
> 时间：2013-02-10T19:20:16.227
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4, t4

我正在尝试为 Asp.net MVC4 (Razor) 中的 Create/Edit/Details/Delete/Index 视图自定义 T4 模板。

我**实际上**想要做的是向我的模型添加一个 [Display(Name="MyFancyModelName")] 属性，然后在视图中添加 @Html.LabelForModel() 以获取它的标签。

有没有内置/简单的方法来实现这样的目标？

```
// .cs
[Display(Name="FancyViewModel")]
public class MyViewModel
{
    ....
}

// .cshtml
@model MyViewModel

@Html.LabelForModel() 
```

# ios - 将 UiWebView 中的视频旋转为横向

> ID：14801609
> 
> 赞同：0
> 
> 时间：2013-02-10T19:20:43.777
> 
> 标签：ios, xcode, uiwebview, orientation

我正在尝试将 UIWebView 中的 youtube 视频设为横向，但我的应用程序仅设置为纵向，我不希望其他任何内容为横向。我已经尝试了很多事情，例如支持景观和所有其他视图返回不景观但它不起作用。我的项目是一个基于标签的应用程序。如果我必须让整个视图可以旋转，而不仅仅是视频，但如果 youtube 视频一旦进入全屏（自动发生）就可以旋转，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T19:24:38.917

您可以让您的控制器订阅`UIDeviceOrientationDidChangeNotification`通知，并从处理通知的方法中仅旋转`UIWebView`包含视频的内容。

这将是这样的：

```
[[NSNotificationCenter defaultCenter] addObserver:self
       selector: @selector(handleOrientationChangeNotification:)
           name: UIDeviceOrientationDidChangeNotification object:nil];

-(void)handleOrientationChangeNotification:(NSNotification *)notification
{ 
    UIDeviceOrientation currentDeviceOrientation =  [[UIDevice currentDevice] orientation];

    if (currentDeviceOrientation == UIDeviceOrientationLandscapeRight) {
        webView.transform = CGAffineTransformRotateMake(M_PI_2);
        webView.bounds = (CGRect){480,320};
        webView.center = (CGPoint){240,160};
    } else if (...
       ...
} 
```

# php - 如何将 PHP 数组用于我的目的？

> ID：14801613
> 
> 赞同：-1
> 
> 时间：2013-02-10T19:20:55.393
> 
> 标签：php, arrays, echo, external

我正在为一家音乐推广公司制作网站。该网站包含每个推广艺术家的单独页面；他们即将发生的事件出现在其中。还有一个单独的“事件”页面。

我想知道如何创建和使用数组，以便我可以在一个地方更新任何即将发生的事件，并在这两个单独的页面上回显信息。

此外，在活动页面上，所有艺术家的活动都需要按时间顺序呼应出来。

这是接近它的正确方法吗？

```
 <?php
$donevents = array();
$donevents[101] = array (
    "venue" = "The Moon Club",
    "date" = "5th December 2013",
    "link" = "www.candyratrecords.com"
);
$donevents[102] = array (
    "venue" = "Chapel Arts Centre",
    "date" = "8th August 2013",
    "link" = "www.chapelarts.co.uk"
);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T19:36:02.647

一个小人物就大有不同（TM）：

```
 $donevents[101] = array (
   "venue" => "The Moon Club",
   "date" => "5th December 2013",
   "link" => "www.candyratrecords.com"
  ); 
```

[查看有关数组的 PHP 手册](http://php.net/manual/en/language.types.array.php)。

*此外，将事件*存储在程序代码中是非常糟糕的设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T19:27:58.670

如果您不使用数据库，则 CSV 文件可能是将数据与代码分开的不错选择。研究使用 PHP 的函数将 CSV 文件读入数组，您可以将文件存储在 webroot 之上，这样它就不能被公开访问。

如果不能选择使用实际数据库，则使用 CSV 文件可以更轻松地维护数据。

# php - CodeIgniter 中的.htaccess 和 routes.php 文件有什么关系？

> ID：14801615
> 
> 赞同：0
> 
> 时间：2013-02-10T19:20:57.333
> 
> 标签：php, .htaccess, codeigniter, mod-rewrite, routing

这是我的 .htaccess 文件：

```
RewriteEngine On 
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule ^(.*)$ index.php/$1 [L] 
```

还有我的 routes.php 文件：

```
$route['default_controller'] = 'pages/view';
$route['news/(:any)'] = 'news/view/$1';
$route['news'] = 'news';
$route['(:any)'] = 'pages/view/$1'; 
```

他们基本上不做同样的事情吗？哪个正确使用？

**编辑：我的问题不是针对这个例子的。它更像是，这对什么有好处？好像他们俩是同一件事？还是我错了？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T19:23:32.013

.htaccess 文件从 URL 中删除 index.php，而 routes.php 文件根据控制器、操作和参数控制 URI 段指向的位置

换句话说，

.htaccess 是 apache 服务器从请求的 URL 中删除 index.php 的指令，而 routes.php 只是指示您的实际 php 脚本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T19:26:21.943

该`.htaccess`文件告诉 apache 将任何请求与不是您正在服务的目录中的文件或文件夹的 uri 匹配，并将其转发到您的 index.php*控制器*（也无需`index.php`在 url 中引用）。

`routes.php`是 uris 到控制器的映射，并且是 codeigniter 特定的一段代码。独立于您的`.htaccess`codeigniter 代码，并且可以独立于任何 php 框架使用

# python - 使用 Python 使用 DBus 监控 Clementine

> ID：14801616
> 
> 赞同：2
> 
> 时间：2013-02-10T19:21:05.010
> 
> 标签：python, media-player, monitoring, dbus

我想做与这里解释的完全相同的事情：

[如何使用 python 持续监控节奏盒的音轨变化](https://stackoverflow.com/questions/3919735/how-to-continuously-monitor-rhythmbox-for-track-change-using-python)

但用 Clementine 而不是 Rhythmbox。

问题是，我找不到与*playUriChanged*等效的方法来提供给*connect_to_signal*方法。

我能找到的唯一与 qdbus 相关的东西是

```
signal void org.freedesktop.MediaPlayer.TrackChange(QVariantMap) 
```

但它需要一个参数。

我对 DBus 不熟悉，因此不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T01:21:47.213

它不带参数，它返回参数（哈希映射）

[从此脚本](http://svn.tribler.org/vlc/trunk/extras/misc/mpris.py)中提取的代码：

```
def TrackChange(Track):
    # use Track["URI"], Track["title"], Track["artist"] etc

def Connect(name):
    global root, player, tracklist

    # first we connect to the objects
    root_o = bus.get_object(name, "/")
    player_o = bus.get_object(name, "/Player")
    tracklist_o = bus.get_object(name, "/TrackList")

    # there is only 1 interface per object
    root = dbus.Interface(root_o, "org.freedesktop.MediaPlayer")
    tracklist  = dbus.Interface(tracklist_o, "org.freedesktop.MediaPlayer")
    player = dbus.Interface(player_o, "org.freedesktop.MediaPlayer")

    # connect to the TrackChange signal
    player_o.connect_to_signal("TrackChange", TrackChange, dbus_interface="org.freedesktop.MediaPlayer") 
```

# ruby-on-rails-3 - 在 EC2 上部署 Rails 应用程序时使用 Rubber 设置环境变量

> ID：14801619
> 
> 赞同：2
> 
> 时间：2013-02-10T19:21:27.920
> 
> 标签：ruby-on-rails-3, amazon-ec2, capistrano

N00b 问题在这里，但我目前正在使用橡胶在我的 EC2 服务器实例上部署我的 Rails webapp。我之前在 heroku 上进行部署（对每次启动时的速度感到沮丧）并决定昨晚切换主机。

我想在部署时设置一些环境变量（用于条带）。在我的 heroku 案例中，我可以在命令行中设置环境变量，例如：

```
heroku set ENV_VAR1=xxxxyyyyzzzz ENV_VAR2=xxxxyyyyzzzz 
```

我想知道是否有一个 cap 命令，或者我可以更改某些文件以在 EC2 上设置这些环境变量，或者甚至是我可以运行的命令行命令来设置它们？我对橡胶/帽子不是很熟悉，因为我昨晚只是在关注其中一个轨道演员视频。

感谢大家。

# c# - 如何仅使用一个选择语句来获取多个值并将它们添加到数组中

> ID：14801621
> 
> 赞同：-1
> 
> 时间：2013-02-10T19:21:33.563
> 
> 标签：c#, mysql

我想知道如何仅使用一个 select mysql 语句从不同的列中获取多个值，并将这些值添加到字符串数组中。

例如：

```
string[] Person = new string[3];
"Select Name,Nickname,Age From TableName";
Person[0] = Name
Person[1] = Nickname
Person[2] = Age 
```

我怎样才能做到这一点？

我尝试了什么：

```
 string[] Persons = new string[3];
            command.CommandText = "Select Name From TableName";
            MySqlDataReader myReader;
            myReader = commmand.ExecuteReader();

            int i = 0;

                while (myReader.Read())
                {
                    Persons[i] = myReader.GetString(0);
                    i++;
                } 
```

我知道如何只获得 1 列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T19:30:26.923

将`while`循环替换为：

```
if (myReader.Read())
{
    Persons[0] = myReader.GetString(0);
    Persons[1] = myReader.GetString(1);
    Persons[2] = myReader.GetString(2);
}
myReader.Close(); 
```

这只读取一行数据。如果您需要阅读更多行，请再次使用循环。请参阅[使用 DataReader 检索数据](http://msdn.microsoft.com/en-us/library/haa3afyz.aspx)。

# java - 如何使 drawString() 文本加粗？

> ID：14801640
> 
> 赞同：10
> 
> 时间：2013-02-10T19:23:25.103
> 
> 标签：java, graphics, drawstring

我的`drawString()`方法中有一个`paintComponent`方法。有没有办法使`drawString()` **粗体**绘制的文本？另外，有没有办法让文字变大？`JLabel`除非绝对必要，否则我想避免使用s。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-10T19:27:54.437

根据以下文件`drawString`：

> **使用此图形上下文的当前字体和颜色**绘制由指定字符串给出的文本。最左边字符的基线位于此图形上下文坐标系中的位置 (x, y)

事实上，`Graphics`类有`setFont(Font font)`可用的方法：

```
g.setFont(new Font("default", Font.BOLD, 16)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T19:27:33.567

您必须在绘制文本之前设置字体。

```
g.setFont(font); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T19:27:50.587

有以下方法： setFont(Font) - 类 java.awt.Component 中的方法 设置此组件的字体。setFont(Font) - 类 java.awt.Container 中的方法 设置此容器的字体。setFont(Font) - 类 java.awt.Graphics 中的方法 将此图形上下文的字体设置为指定的字体。

# assembly - JE 在零标志设置为 1 的情况下进行跳转？

> ID：14801641
> 
> 赞同：0
> 
> 时间：2013-02-10T19:23:30.860
> 
> 标签：assembly, x86

执行的指令是

```
0044B8B8  |> F745 14 000800>TEST DWORD PTR SS:[EBP+14],800
0044B8BF  |.^0F84 7BFFFFFF  JE App.0044B840 
```

EBP 指向`0022F38C`所以 +14 是我们测试 800 时的`0022F3A0`哪个值（对吗？）并且与（对吗？）寄存器似乎在两条指令之间没有改变（EIP 除外）；`00001002``JE``JZ`

```
EAX 00000039
ECX 00000000
EDX 00000000
EBX 0022F3C9
ESP 0022F37C ASCII "XY"
EBP 0022F38C
ESI CCCCCCCD
EDI 004597E6 ASCII "XYZ"
EIP 0044B8BF App.0044B8BF
C 0  ES 0023 32bit 0(FFFFFFFF)
P 1  CS 001B 32bit 0(FFFFFFFF)
A 0  SS 0023 32bit 0(FFFFFFFF)
Z 1  DS 0023 32bit 0(FFFFFFFF)
S 0  FS 003B 32bit 7FFDD000(FFF)
T 0  GS 0000 NULL
D 0
O 0  LastErr ERROR_SUCCESS (00000000)
EFL 00000246 (NO,NB,E,BE,NS,PE,GE,LE)
ST0 empty -??? FFFF 00700070 00700070
ST1 empty -??? FFFF 00F000F0 00F000F0
ST2 empty -??? FFFF 005A0040 004E006A
ST3 empty -??? FFFF 000E0005 006000EB
ST4 empty -??? FFFF 1D0A67F9 E9A7BEF0
ST5 empty 0.0000000000000006002
ST6 empty 0.0000000000000006002
ST7 empty 0.0000000000000006002
               3 2 1 0      E S P U O Z D I
FST 4000  Cond 1 0 0 0  Err 0 0 0 0 0 0 0 0  (EQ)
FCW 037F  Prec NEAR,64  Mask    1 1 1 1 1 1 
```

然而，仍然进行了跳跃。谁能解释为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T19:34:06.807

我不太确定你在期待什么，但[`TEST`基本上是一个不存储结果的 AND 指令](http://en.wikipedia.org/wiki/TEST_(x86_instruction))；

```
0x0800 BITWISE AND 0x1002 = 0 
```

由于结果为零，因此跳转。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T00:22:58.083

JZ 与 JE 相同。由于 CMP 指令是减法而不存储结果，如果 CMP 的两个操作数相等，则它们的差为零，并设置 Z 标志。

而且，就像 Joachim 所说， TEST 是 AND 而不存储结果。

# freebsd - 调整freebsd分区大小

> ID：14801645
> 
> 赞同：3
> 
> 时间：2013-02-10T19:23:33.540
> 
> 标签：freebsd

我的电脑上有 Windows、Linux 和 FreeBSD。但不小心我“忘记”在磁盘末尾分配 17 GB 的可用磁盘空间（并且“坏”的 Windows 正在使用一个小的主恢复分区。因此我现在有 4 个主分区）。我可以调整 FreeBSD 分区的大小以获取可用空间吗？有我的磁盘分区。

```
$ gpart show     
    =>       63  488397105  ada0  MBR  (232G)
             63       1985        - free -  (992k)
           2048     716800     1  ntfs  (350M)
         718848  313856000     2  ntfs  (149G)
      314574848       2046        - free -  (1M)
      314576894   83996674     3  ebr  (40G)
      398573568         27        - free -  (13k)
      398573595   52428726     4  freebsd  [active]  (25G)
      451002321   37394847        - free -  (17G) // Free space i wanna allocate

    =>       0  83996674  ada0s3  EBR  (40G)
             0  29997058       1  linux-data  (14G)
      29997058      2028          - free -  (1M)
      29999086  49997844  476176  linux-data  (23G)
      79996930      1980          - free -  (990k)
      79998910   3997764  1269824  linux-swap  (1.9G)

    =>       0  52428726  ada0s4  BSD  (25G)
             0  52428725       1  freebsd-ufs  (25G)
      52428725         1          - free -  (512B) 
```

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T23:29:50.357

看看 gpart 的`resize`命令。这应该使您能够扩大分区。然后，您可以使用 growfs(8) 扩展分区中的 UFS 文件系统。

在尝试此操作之前，请备份您的文件系统！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-23T12:30:05.420

growfs(8) 适用于 UFS 案例。如果您使用的是 ZFS，您将需要`zpool online -e` 扩展分区（切片）后的 zpool。

# javascript - 构造对象名称，然后将对象传递给函数？

> ID：14801655
> 
> 赞同：0
> 
> 时间：2013-02-10T19:24:43.550
> 
> 标签：javascript

我正在研究现有的 Javascript 代码，它使用存储在名为 data1、data2 等的对象中的数据集。这些数字是从数据库中获取的 ID。

现在，我需要编写一个额外的函数，它将 ID 作为输入，然后使用该 ID 构造适当的对象名称，然后将该对象作为参数传递给函数。

所以，像：

```
function doStuff(id){
    var objname="data"+id;
    //now, I need to pass the object (not just the name) to a function
    someFunction(objname);    //this obviously doesn't work, because it just passes the object name as a string
} 
```

那么，鉴于我有对象名称，我如何将实际对象传递给函数？

这个问题听起来很简单，我认为有一种方法可以做到这一点，但谷歌似乎没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:40:58.897

由于对象存在，您需要一种“找到”它们的方法。我建议您使用键值数组在字符串和对象之间创建关系——键是字符串，值是对象。然后，您可以使用字符串索引数组，它将返回对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T19:44:27.130

创建一个对象并在其中存储键，如下所示：

```
var obj = {
    data0 : "example 1",
    data1 : "example 2"
} 
```

然后你可以像这样访问属性：

```
function doStuff(id) {
    var key = "data" + id;
    someFunction(key);
}

someFunction(key) {
    return obj[key];
} 
```

# python - 在基于 Python 的 DSL 中自定义异常回溯

> ID：14801657
> 
> 赞同：1
> 
> 时间：2013-02-10T19:24:50.453
> 
> 标签：python, dsl, abstract-syntax-tree, traceback

我创建一个基于 python 的 DSL 只是为了好玩。现在，它只是将文本编译成直接执行 python 代码的 AST。我的意思是，如果我写：

```
a = int(read("input something: "))
b = a**2 
```

它将其转换为一棵树，例如：

```
Program:
  VariableSet a:
    Call:
      VariableGet int
      Call:
        VariableGet read
        Literal("input something: ")
  VariableSet b:
    BinaryExpession **:
       VariableGet a
       Literal(2) 
```

这些节点中的每一个都将使用如下代码执行：

```
class VariableSet(object):
    def __init__(self, name, expr):
        self.name = name
        self.expr = expr

    def __call__(self, scope):
        value = self.expr(scope)
        scope.put(self.name, value)
        return value 
```

它工作得很好。我希望，当某些指令引发异常时，异常堆栈回溯指向 DSL 源代码，而不是 python AST 代码。现在，我看到的只有：

```
Traceback (most recent call last):
  File "parser.py", line 164, in <module>
    parse(data)(scope)  
  File "/home/juanplopes/Projects/my-parser/ast.py", line 158, in __call__
    result = expr(scope)
  File "/home/juanplopes/Projects/my-parser/ast.py", line 63, in __call__
    value = self.expr(scope)
  File "/home/juanplopes/Projects/my-parser/ast.py", line 81, in __call__
    return self.method(scope)(*[arg(scope) for arg in self.args])
  File "/home/juanplopes/Projects/my-parser/ast.py", line 81, in __call__
    return self.method(scope)(*[arg(scope) for arg in self.args])
  File "parser.py", line 153, in read
    raise Exception('some exception')
Exception: some exception 
```

有没有办法自定义如何在 python 中生成回溯？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T19:46:17.983

是的，但这样做很丑陋。

您可能想[看看它是如何在`jinja2`](https://github.com/mitsuhiko/jinja2/blob/master/jinja2/debug.py).

Jinja 是一个模板引擎。它处理回溯，以便它们指向模板错误。
也许您可以将其转换为您的代码，以便它指向 DSL 错误。

# android - 在运行 4.1.1 的 Galaxy SIII 上无法接收 SMS 接收广播

> ID：14801658
> 
> 赞同：0
> 
> 时间：2013-02-10T19:24:53.940
> 
> 标签：android, sms, galaxy, samsung-mobile, android-broadcast

我只在运行 Android 4.1.1**的三星 Galaxy SIII上遇到这个问题。**三星 Galaxy Ace 和三星 Galaxy Y 上没有问题。收到短信时，收到的广播短信没有启动。手机上没有安装其他短信应用程序。

我正在使用以下代码接收短信广播

```
 smsReceiver = new BroadcastReceiver() {

    @Override
    public void onReceive(Context context, Intent intent) {

        Log.d(TAG, "Inside onReceive of smsReceiver");
        Bundle bundle = intent.getExtras();
        Object[] messages = (Object[]) bundle.get("pdus");
        SmsMessage[] sms = new SmsMessage[messages.length];
        // Create messages for each incoming PDU
        for (int n = 0; n < messages.length; n++) {
            sms[n] = SmsMessage.createFromPdu((byte[]) messages[n]);
        }
        for (SmsMessage msg : sms) {
            //do something
        }
    }
};

IntentFilter intentFilter = new IntentFilter();

if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {

    intentFilter.setPriority(IntentFilter.SYSTEM_HIGH_PRIORITY - 1);

} else {
    // set Interger.MAX_VALUE because other apps like Handcent are intercepting
    intentFilter.setPriority(Integer.MAX_VALUE);

}
intentFilter.addAction("android.provider.Telephony.SMS_RECEIVED");
// register receiver for receive SMS
registerReceiver(smsReceiver, intentFilter); 
```

我在清单中设置了以下权限

```
<uses-permission android:name="android.permission.WRITE_SMS"/>
<uses-permission android:name="android.permission.SEND_SMS"/>
<uses-permission android:name="android.permission.RECEIVE_SMS"/>
<uses-permission android:name="android.permission.READ_SMS"/> 
```

我没有 logcat 访问权限。我花了两天时间试图在 Android 的迷宫中找到原因，但没有任何帮助。

# javascript - 拖动 div 选择页面上的文本（某些浏览器）

> ID：14801660
> 
> 赞同：0
> 
> 时间：2013-02-10T19:25:00.930
> 
> 标签：javascript

我使用以下函数来拖动带有句柄的 div。

问题是，在某些浏览器中，当我同时拖动文本时，文本被选中并在页面上突出显示..

任何想法如何解决它？

```
function enableDragging (ele) {
    var dragging = dragging || false,
        x, y, Ox, Oy,
        current;
        enableDragging.z = enableDragging.z || 1;
    var grabber = document.getElementById("myHandle");
    grabber.onmousedown = function (ev) {
        ev = ev || window.event;
        var target = ev.target || ev.srcElement;
        current = target.parentElement;
        dragging = true;
        x = ev.clientX;
        y = ev.clientY;
        Ox = current.offsetLeft;
        Oy = current.offsetTop;
        current.style.zIndex = ++enableDragging.z;
        console.log(dragging);

        document.onmousemove = function(ev) {

            ev = ev || window.event;

            //pauseEvent(ev);         
            if (dragging == true) {
                var Sx = ev.clientX - x + Ox,
                    Sy = ev.clientY - y + Oy;
                current.style.top = Sy + "px";
                current.style.left = Sx + "px";
                document.body.focus();
                // prevent text selection in IE
                document.onselectstart = function () { return false; };
                // prevent IE from trying to drag an image
                ev.ondragstart = function() { return false; };                  
                return false;   
            }
        }
        document.onmouseup = function(ev) {
            //alert("stop");
            dragging && (dragging = false);
        }
    };
}    

function pauseEvent(e){
    if(e.stopPropagation) e.stopPropagation();
    if(e.preventDefault) e.preventDefault();
    e.cancelBubble=true;
    e.returnValue=false;
    return false;
} 
```

拖动开始于：

```
 var ele = document.getElementById("divWrapper");
    enableDragging(ele); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T19:38:00.047

对不起，我忘记了你上一篇文章中的第二个问题。但是，您也需要防止默认`onmouseup`：

```
document.onmouseup = function(ev) {
    ev = ev || window.event;
    dragging && (dragging = false);
    if (ev.preventDefault) {
        ev.preventDefault();
    } else {
        ev.cancelBubble=true;
        ev.returnValue=false;
    }
    return false;
} 
```

**编辑**

或者干脆使用你的`pauseEvent()`功能。请注意，在您的代码中有这样的：`ev.ondragstart = function () {...};`. 将事件处理程序分配给 Event 对象是没有用的，而是将其分配给`document`or `document.body`。并且也在`pauseEvent()`每个事件处理函数中使用它。

看起来最好移动到处`document.onselectstart`​​理`document.ondragstart`程序`onmousedown`，因为当执行移动到`onmousemove()`.

# asp.net-mvc - Microsoft MVC Razor - EditorFor 和 Digitalbush 面具不起作用

> ID：14801665
> 
> 赞同：1
> 
> 时间：2013-02-10T19:25:49.367
> 
> 标签：asp.net-mvc, input, mask, editorfor

我无法让遮罩控件完全正常工作。像这样显示的简单 mvc editorfor 行无法屏蔽输入。我正在向它发送时间跨度值。

```
@Html.EditorFor(model => model.VXChargeBO.VisitTime) 
```

应该像这样屏蔽_ _ : _ _ 相反，它只显示经过的时间为 00:00:00

我试过调整掩码，但问题似乎出在 MVC 或 CSS 中，我想排除 MVC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T00:54:52.750

利用：

```
@Html.TextBoxFor(model => model.VXChargeBO.VisitTime) 
```

# android - 当我尝试连接到我的网络服务时出现 Ksoap 问题

> ID：14801669
> 
> 赞同：0
> 
> 时间：2013-02-10T19:26:18.037
> 
> 标签：android, wsdl, ksoap2

我正在尝试通过 ksoap 连接到我的网络服务并给我这个错误

> 找不到 {} 的调度方法

我知道这是 2 个具有相同错误的问题，它们都没有正确放置命名空间或添加正确的方法名称，这里我添加了正确的命名空间，而且它现在工作的正确方法也不是，这就是问题所在，这是调用网络服务的代码

> ObjConexion 对象 = 新的 ObjConexion();

```
SoapObject request = new SoapObject(object.NameSpace(), "login");
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    Bundle extras = getIntent().getExtras();

    /*PropertyInfo namePro =new PropertyInfo();
    namePro.setName("_name");
    //namePro.setValue(extras.getString("name"));
    namePro.setValue("sdfasdfsadf");
    namePro.setType(String.class);
    request.addProperty(namePro);
    */
    PropertyInfo emailPro =new PropertyInfo();
    emailPro.setName("email");
    //emailPro.setValue(extras.getString("mail"));
    emailPro.setValue("asdfsdfasdfasdf");
    emailPro.setType(String.class);
    request.addProperty(emailPro);

    PropertyInfo passwordPro =new PropertyInfo();
    passwordPro.setName("password");
    //passwordPro.setValue(((EditText) findViewById(R.id.passwd)).getText().toString());
    passwordPro.setValue("asdkasdkfkasdf");
    passwordPro.setType(String.class);
    request.addProperty(passwordPro);

    HttpTransportSE androidHttpTransport = new HttpTransportSE("WSDLPath");
    androidHttpTransport.debug = true;
    try {
        androidHttpTransport.call("", envelope);
        SoapPrimitive result = (SoapPrimitive)envelope.getResponse();   

    }catch (Exception e) {
        e.printStackTrace();

        Toast.makeText(this,e.getMessage().toString(),Toast.LENGTH_LONG).show();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:30:26.993

您尚未输入方法名称：

```
androidHttpTransport.call("", envelope); 
```

输入方法名称：

```
androidHttpTransport.call(METHOD_NAME, envelope); 
```

首选以下网址，您可以在其中获得答案。这个问题是我问的。在解决了它之后，我将答案用于其他人。

[使用 ksoap2 在 android 中创建带有安全标头的肥皂信封](https://stackoverflow.com/questions/14196387/create-soap-envelope-with-security-header-in-android-using-ksoap2)

# java - Java Calendar YEAR 在初始化为静态 int 时返回零

> ID：14801670
> 
> 赞同：1
> 
> 时间：2013-02-10T19:26:19.507
> 
> 标签：java

我试图理解下面两行之间的区别。为什么当我向字段添加静态时它返回零。

```
private static final int this_year = Calendar.getInstance().get(Calendar.YEAR); 
```

从这里我得到：`this_year = 0;`

```
private final int this_year = Calendar.getInstance().get(Calendar.YEAR); 
```

从这里我得到：`this_year = 2013;`

谁能解释为什么第一个返回零？

这是我使用它的代码：

```
public class TheKing {
  public static final TheKing theKing = new TheKing();
  private final int beltSize;
  private static final int this_year = Calendar.getInstance().get(Calendar.YEAR);

  private TheKing() { 
    beltSize = this_year - 1930;
  }

  public int beltSize() {
    return beltSize;
  }

  public static void main(String[] args) {
    System.out.println("TheKing wears a size " + 
      theKing.beltSize() + " belt.");
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T19:57:05.190

声明字段时`static`，它们会在静态初始化方法中进行初始化，这意味着您的代码在编译时如下所示：

```
static {
    theKing = new TheKing();
    this_year = Calendar.getInstance().get(Calendar.YEAR);
} 
```

请注意，在初始化之前调用了构造`this_year`函数，并且在`int`初始化之前，它的默认值为`0`. 换句话说，`this_year`在设置为 之前使用`2013`。

解决此问题的一种方法是简单地颠倒声明的顺序：

```
private static final int this_year = Calendar.getInstance().get(Calendar.YEAR);
public static final TheKing theKing = new TheKing(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T19:55:39.977

[静态方法按照它们在代码中给出的顺序进行初始化](https://stackoverflow.com/a/2547737/1711796)。

```
public static final TheKing theKing = new TheKing();
private static final int this_year = Calendar.getInstance().get(Calendar.YEAR); 
```

所以上面会`theKing`先初始化，它调用构造函数，它使用 0 的未初始化值`this_year`。如果您将其更改为：

```
private static final int this_year = Calendar.getInstance().get(Calendar.YEAR);
public static final TheKing theKing = new TheKing(); 
```

它会工作得很好。

或者，如果您删除`static`,`this_year`将在创建对象时被初始化`theKing`。

# javascript - 为什么在这一行中需要 bind(this) ？

> ID：14801671
> 
> 赞同：2
> 
> 时间：2013-02-10T19:26:19.833
> 
> 标签：javascript

我在这里关注谷歌浏览器的扩展开发指南：http: [//developer.chrome.com/extensions/getstarted.html](http://developer.chrome.com/extensions/getstarted.html)

在这个文件的第 41 行：http: [//sprunge.us/NFjZ](http://sprunge.us/NFjZ)

```
requestKittens: function() {
  var req = new XMLHttpRequest();
  req.open("GET", this.searchOnFlickr_, true);
  req.onload = this.showPhotos_.bind(this);
  req.send(null);
}, 
```

，他们使用了这样的绑定函数 this.showPhotos_.bind(this); 如果没有此绑定，示例扩展将无法工作。我在 showPhotos_ 方法中进行了测试，并验证“this”只是 kittenGenerator 对象。由于 showPhotos_ 只是该对象的一个​​方法，这应该是隐式完成的，那么为什么还要这个绑定呢？

* * *

请注意，由于 popup.js 文件中的拼写错误，google 的示例将无法运行。要更正它，请将“kittensOnFlickr_”更改为“searchOnFlickr_”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T19:30:21.767

`showPhotos_`从 req.onload 调用时如果没有绑定，`this`则不会。`req``kittenGenerator`

# sql - 根据下拉结果从数据库中动态拉取

> ID：14801673
> 
> 赞同：0
> 
> 时间：2013-02-10T19:26:22.207
> 
> 标签：sql, database, forms, dynamic, drop-down-menu

我目前正在从我的数据库中提取我需要的信息，但希望显示的信息根据下拉结果进行更改。我做了一些研究，并认为最好的方法是使用表格，但不确定它是如何工作的。

这是我下面的代码：

```
 <section id="compare">

    <select>
      <option>Select Gym</option>       
      <option>fitness first</option>
      <option>anytime fitness</option>
      <option>the gym</option>
      <option>its leisure ltd</option>
      <option>the armoury</option>
    </select>
    <select>
      <option>Select Gym</option>       
      <option>fitness first</option>
      <option>anytime fitness</option>
      <option>the gym</option>
      <option>its leisure ltd</option>
      <option>the armoury</option>      
    </select>

    <section id="left"> 
    <?php

    mysql_select_db("gyms", $con);
    $result = mysql_query("SELECT * FROM gym WHERE id='1'") or die ('Error: '.mysql_error ());

        while($row = mysql_fetch_array($result)){
          echo "<h1>" . $row['name'] . "</h1>";
          echo "<p><h6>type</h6>" . $row['type'] . "</p>";
          echo "<p><h6>price</h6>" . $row['price'] . "</p>";
          echo "<p><h6>hours</h6>" . $row['hours'] . "</p>";
          echo "<p><h6>parking</h6>" . $row['parking'] . "</p>";
          echo "<p><h6>facilities</h6>" . $row['facilities'] . "</p>";
          } 
    ?>      
    </section>

    <section id="right">
    <?php
    $result = mysql_query("SELECT * FROM gym WHERE id='2'") or die ('Error: '.mysql_error ());

        while($row = mysql_fetch_array($result2)){
          echo "<h1>" . $row['name'] . "</h1>";
          echo "<p><h6>type</h6>" . $row['type'] . "</p>";
          echo "<p><h6>price</h6>" . $row['price'] . "</p>";
          echo "<p><h6>hours</h6>" . $row['hours'] . "</p>";
          echo "<p><h6>parking</h6>" . $row['parking'] . "</p>";
          echo "<p><h6>facilities</h6>" . $row['facilities'] . "</p>";
          } 

    mysql_close($con);
    ?>
    </section>

  </section> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:52:19.793

您是绝对正确的，您需要使用实现 POST 方法的表单，该方法将所选值发布到表单中，与数据库中包含的“id”字段匹配。

这是一个例子：

```
<form action="compare.php" method="post">
    <select name="gyms-1">
      <option value="0">Select Gym</option>         
      <option value="1">fitness first</option>
        </select>
    <select name="gyms-2">
      <option value="0">Select Gym</option>         
      <option value="1">fitness first</option>      
    </select>
    <input name="send" id="send" type="submit" value="compare" />
</form> 
```

下面是实现 post 方法的 PHP 代码：

```
<?php
    $gyms=$_POST['gyms-1'];
    $jimmy=$_POST['gyms-2'];

    mysql_select_db("gyms", $con);
    $result = mysql_query("SELECT * FROM gym WHERE id='$gyms'") or die ('Error: '.mysql_error ());

        while($row = mysql_fetch_array($result)){
          echo "<h1>" . $row['COLUMN NAME'] . "</h1>";
          echo "<p><h6>type</h6>" . $row['COLUMN NAME'] . "</p>";
          } 

    $result2 = mysql_query("SELECT * FROM gym WHERE id='$jimmy'") or die ('Error: '.mysql_error ());

        while($row = mysql_fetch_array($result2)){
          echo "<h1>" . $row['COLUMN NAME'] . "</h1>";
          echo "<p><h6>type</h6>" . $row['COLUMN NAME'] . "</p>";
          } 

    mysql_close($con);
?> 
```

这应该允许您根据用户选择的值在数据库中显示多行。有什么问题给我留言！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T19:36:22.277

用户 jquery .change。例如沿途：

```
 $("#left").change(function(){ 
    $("#right").html("[post your data]");
   }); 
```

# macos - 在 MAC 上，我必须显示一个带有取消按钮和微调器的繁忙窗口

> ID：14801681
> 
> 赞同：0
> 
> 时间：2013-02-10T19:27:20.460
> 
> 标签：macos, spinner, nswindowcontroller

在使用 XCODE 和 Objective-C 的 MAC 上，我需要显示一个小的“*忙*”窗口，其中包含一个微调器和一个取消按钮。这将阻止用户在我的应用程序中执行任何其他操作，直到我完成长操作，但是如果他们单击取消它应该停止操作。

我尝试`NSWindowController`使用取消按钮创建一个简单的基于窗口并制作窗口模式，就像 这样

`-(void) start_long_operation {`
............

```
[self showBusy];
return; // return to continue the long operation
} 
```

// 抛出一个“忙碌”的对话框，这样用户在完成之前不能做任何事情

```
-(void) showBusy {  
    BusyNSWindow *loadingView = [[LoadingView alloc] initWithWindowNibName:@"LoadingView"];<br>
    [[NSApplication sharedApplication] runModalForWindow:loadingView.window];  
} 
```

// 如果取消点击，信号停止长操作，关闭“忙碌”对话框

```
-(IBAction) cancel
{
// cancel was clicked inside the "busy" dialog box so signal process to stop long operation
} 
```

但发生的事情是它留在里面`[[NSApplication sharedApplication] runModalForWindow:loadingView.window]`并且不返回。我希望它返回，以便它可以在“忙碌”对话框启动时继续长时间处理，所以这不起作用。

任何人都知道如何创建一个带有取消按钮和微调器的小“忙碌”窗口，以防止用户在操作完成之前在该窗口外单击，但允许程序的其余部分正常继续，以便它可以处理长时间操作？

-rough_neck

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:25:24.470

无论如何都不应该在主线程上进行长操作。用于长时间运行的操作`NSOperation`，`NSOperationQueue`所以它在后台运行，然后模态窗口就可以正常工作了。

另一种选择，但不太方便，是使用“模态会话”。请参阅`-beginModalSessionForWindow:`、`-runModalSession:`和`-endModalSession:`的方法`NSApplication`。为此，您必须将长时间运行的操作分解为可以按顺序调用的快速运行步骤。

# c++ - 混合 gtk+ 和 c++

> ID：14801686
> 
> 赞同：1
> 
> 时间：2013-02-10T19:27:46.210
> 
> 标签：c++, c, linux, gtk

在 gtk+ 中使用 c++ 编程时，是否有任何理由使用特殊绑定？既然 c++ 是 C 的超集，为什么不能使用具有用于回调事件的静态成员的类并将 c 样式的 gtk+ 对象封装在这样的类中：

```
class MainWindow{
    public:
         MainWindow(void);
         GtkWidget* window;
         GtkWidget* button;
         static void signals(GtkWidget *widget, GdkEventButton *event, gpointer callback_data);
         static gboolean onDelete(GtkWidget *widget, GdkEvent *event, gpointer data);
         static void onDestroy(GtkWidget *widget, gpointer data);
         /* GtkWidget* canvas;
         GtkWidget* items; */

     }; 
```

和在施工时完成的信号连接：

```
MainWindow::MainWindow(){
// Create widgets
        window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
        button = gtk_button_new_with_label("Push the button.");
// Connect widget signals
        g_signal_connect(G_OBJECT(button), "button_press_event", G_CALLBACK(signals), NULL);
// Add widgets to main window (pack multiple widgets)
        gtk_container_add(GTK_CONTAINER(window), button);
// Show window
        gtk_widget_show_all(window);
// Connect Main Window Signals
        g_signal_connect(G_OBJECT(window), "delete_event", G_CALLBACK(onDelete), NULL);
        g_signal_connect(G_OBJECT(window), "destroy", G_CALLBACK(onDestroy), NULL); 
```

}

然后在设置 gtk+ 调用后在 Main 中创建类：

```
int main(int argc, char* argv[])
      {

    // initialize GTK
        gtk_init(&argc, &argv);
        gdk_rgb_init();
    // Create Main Window...
        MainWindow win;
    // Listen
        gtk_main();
        return 0;
      } 
```

构造函数可以接受初始大小和位置的参数以及其他选项......

是我把它弄得太简单了，还是我读过的所有其他东西都让它太难了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T19:33:45.440

你可以这样做。

如果您喜欢 C++ 接口，GTK 也已经提供了 C++ 包装器。

它被称为[gtkmm](http://www.gtkmm.org/en/documentation.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-10-11T10:50:19.560

你当然可以这样做。但是由于使用 gtkmm 编程的许多预定义类增加了更多的面向对象的环境，这将减少无用的代码。

# android - In-App Billing 在什么情况下 Intent 数据可以为空？

> ID：14801692
> 
> 赞同：1
> 
> 时间：2013-02-10T19:28:01.870
> 
> 标签：android, in-app-billing

我在我的一款游戏中实现了一些应用内购买。整个过程正常运行，少数人成功购买了物品。

`handleActivityResult(int requestCode, int resultCode, Intent data)`但是，查看游戏的在线日志，由于该函数`Intent data`为**null** ，因此该函数出现了一堆错误。

那么，在什么情况下intent data可以为null呢？谷歌的文档没有详细说明这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-08T08:58:33.480

在我删除清单中活动的 android:launchMode="singleInstance" 属性之前，我一直在接收空意图数据。现在我似乎总是收到一个意图对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-19T17:13:38.100

当我在片段中进行应用内计费设置时，我遇到了同样的问题。onActivityResult 返回 Intent 数据为 null，因此它在 handleActivityResult 中为 null。将应用内计费转移到一项活动为我解决了这个问题。

# android - 如何知道 android:id Android 期望什么？

> ID：14801694
> 
> 赞同：2
> 
> 时间：2013-02-10T19:28:19.110
> 
> 标签：android, android-layout, android-source, android-2.2-froyo

在某些 android 类中，您可以设置自定义布局。据我了解，这些自定义布局需要某些`android:id`s 才能工作。

例如，对于`ListActivity`a `ListView`with`@android:id/list`必须提供，这在文档中指定。

其他观点呢？例如，我在查看 API Demos 时遇到了

```
<CheckBoxPreference
                android:key="child_checkbox_preference"
                android:dependency="parent_checkbox_preference"
                android:layout="?android:attr/preferenceLayoutChild"
                android:title="@string/title_child_preference"
                android:summary="@string/summary_child_preference" /> 
```

有一个为首选项指定的布局。该布局似乎是`preference_child.xml`，其中有`@+android:id/title`和`@+android:id/summary`，我假设视图将使用它来提供标题和摘要，但这是否记录在任何地方？

我如何知道我必须使用哪些资源 ID 才能让一切自动运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:39:11.377

AFAIK，除了了解[文档](http://developer.android.com/reference/android/R.id.html)或打开 android 的 id.xml 并查找参考资料外，没有什么诀窍。

PS您的代码演示了如何使用整个样式中的特定属性（使用“？”），它与ID无关

# javascript - Jquery可拖动图像拖放到左上角所在的那个div

> ID：14801695
> 
> 赞同：1
> 
> 时间：2013-02-10T19:28:18.690
> 
> 标签：javascript, jquery, html, drag-and-drop

可放置的 div：

```
<div id="invContainer" style="width:100px; height:100px;>
  <div id="inv_0-0" class="inventory" style="position: relative; float:left; width:50px; height:50px; background-color: #fff;"></div>
  <div id="inv_1-0" class="inventory" style="position: relative; float:left; width:50px; height:50px; background-color: #000;"></div>
  <div id="inv_0-1" class="inventory" style="position: relative; float:left; width:50px; height:50px; background-color: #000;"></div>
  <div id="inv_1-1" class="inventory" style="position: relative; float:left; width:50px; height:50px; background-color: #fff;"></div>
</div> 
```

我有一些可拖动的图像，如果我把它放到这个容器中，图像就会落在图像中心所在的位置。但我希望它放在图像左上角的位置。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:20:02.310

首先看看JQuery draggable是否有标准的snap-to-position功能。否则，您必须将图像“移动”到您想要的位置。像这样的小数学：

```
function ondrop_move(obj) {
    w = obj.width();
    h = obj.height();
    new_top = obj.position().top + (h / 2);
    new_left = obj.position().left + (w / 2)
    obj.css('left', new_left);
    obj.css('top', new_top);
} 
```

# java - 在 Java 中，从文件列表中删除重复文件

> ID：14801696
> 
> 赞同：1
> 
> 时间：2013-02-10T19:28:21.763
> 
> 标签：java, file, collections, duplicates

我有一个清单`java.io.File`。我想强制这个列表是唯一的。

将它们放在 HashSet 中是否正确？像：

```
List<File> list = ...

List<File> newList = new ArrayList<File>(new HashSet<File>(list)) 
```

还是有更好的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T19:34:05.177

最好将集合类型设置为 Set，这样任何阅读您的代码的人都会完全知道您正在处理一组独特的文件

```
List<File> list = ...

Set<File> files = new HashSet<File>(list); 
```

它也会快一点。

# oracle - CREATE TABLE 语句中缺少右括号

> ID：14801702
> 
> 赞同：2
> 
> 时间：2013-02-10T19:28:35.583
> 
> 标签：oracle, ddl

我得到一个

> ORA-00907 错误，缺少右括号

当试图用 MySQL 创建一个表时。

我在网上进行了广泛的查看，但在这里找不到任何可以帮助我的东西。

这是我的 CREATE TABLE 语句：

```
CREATE TABLE station
(
nomStation varchar2(255),
capacite number(15) NOT NULL,
lieu varchar2(255) NOT NULL,
region ENUM('Quebec', 'Ontario', 'NewBrunswick', 'NovaScotia'),
tarif number(10) DEFAULT 0,
CONSTRAINT station_nomStation_pk PRIMARY KEY(nomStation)
); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-10T19:38:52.780

根据我的经验，“ORA-00907 错误，缺少右括号”通常是由错误数量的逗号触发的，例如在最后一列或约束之后添加额外的逗号。

但是，在您的情况下，一些谷歌搜索似乎表明 Oracle 不支持您使用的 ENUM 语法。相反，您应该使用 CHECK，如[本博文](http://thinkoracle.blogspot.no/2005/05/enum-in-oracle.html)中所述。

# java - Java - 无法添加文本

> ID：14801703
> 
> 赞同：2
> 
> 时间：2013-02-10T19:28:35.980
> 
> 标签：java, class, text, system.out

我最近一直在练习一些Java。我在一类和另一类中制作了一个随机键盘，称为表单。

我设法从另一个类中添加了键盘方法。

但是当我尝试添加文本（ System.out.println("text"); ）时，它不会允许我，如果我在外部包装器中添加它，它将不会显示。

**键盘类：**

```
import java.util.Scanner;

class Keyboard {
   public static void main(String args[]){
      System.out.print("Enter your name... ");
      Scanner sc = new Scanner(System.in);
      System.out.println("Your name is " + sc.nextLine());

   }
} 
```

**FillInForm 类问题 1：**

```
public class FillInForm {

    Keyboard j = new Keyboard();
    System.out.println("text"); <-------------- doesn't allow me. Why?

} 
```

**FillInForm 类问题 2：**

```
public class FillInForm {

    Keyboard j = new Keyboard();
{
        System.out.println("text");  <---------Also doesn't work. Why?
    }
} 
```

*这只是为了练习，类和方法不必有意义*。随手做的。我只想知道为什么我不能在名为“FillInForm”的类中显示文本。

我知道这个问题很简单，但是有人可以帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T19:31:49.777

将语句放在*方法*而不是类块中。作为声明，`Keyboard`声明可以存在于类块中，但不能存在于`println`语句中：

```
public class FillInForm {

    Keyboard j = new Keyboard();

    public void myMethod() {
       System.out.println("text");
   }
} 
```

对于问题 2。问题与您再次尝试在类块中放置非声明性语句相同。

鉴于输入功能是类的`static`主要方法，`Keyboard`最好将此功能移至 中的`main`方法`FillInForm`，除非您希望`KeyBoard`用作类的包装器`Scanner`。如果是后者，您可以创建一个实例方法来访问`Scanner#nextLine`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T19:31:55.073

代码必须是方法的一部分，最后两段代码不是这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T19:34:04.067

代码必须是方法的一部分。并且您需要向一个类添加一个主要方法：

```
public class FillInForm {

... other methods ...

  public static void main(String[] args) { // static means, this method does not belong to an instance of the class, it belongs to the class itself
    Keyboard j = new Keyboard();
    System.out.println("text"); 

};
} 
```

main 方法是你的应用程序的入口点，它在你的应用程序启动时自动调用

# ftp - FTP 文件列表崩溃 (iOS 6.1)

> ID：14801704
> 
> 赞同：1
> 
> 时间：2013-02-10T19:28:36.073
> 
> 标签：ftp, crash, file-listing, ios6.1

我一直在等待 iOS 6.1，希望它能解决我在开发应用程序（使用 iOS 6.0.x）过程中发现的一些网络问题。实际上，iOS 6.1 解决了其中一些问题，但不幸的是，其他问题仍然存在。我已经向 Apple 提交了错误报告，但我的客户（一家大公司）需要尽快展示应用程序，这种不稳定性是一个严重的限制。:( 我在这里问希望有人发现了这个问题并找到了解决方法。基本上我通过 FTP 守护程序（vsftpd）执行一些连续的文件列表。随机地，应用程序在以下选择器内崩溃：

```
[self.networkStream open]; 
```

我通过简单地获取 Apple 的 FTPSample 项目并将文件“ListController.m”的“listOrCancelAction”选择器替换为以下内容来复制它：

```
- (IBAction)listOrCancelAction:(id)sender
{
    #pragma unused(sender)
    if (!self.isReceiving)
        [self startReceive];
    [self performSelector:@selector(listOrCancelAction:) withObject:sender afterDelay:1.0];
} 
```

这样，您只能单击一次“列表”按钮。一段时间后应用程序崩溃。

我的环境：

*   Mac OS X 10.7.4；
*   XCode 4.6（iOS SDK 6.1）；
*   iPad3 更新至 iOS 6.1；

堆栈跟踪：

```
Incident Identifier: BAE3971A-4C82-4D91-A5FE-34748740CEB4
CrashReporter Key:   d89bdbe7d8601b5d1230f3e2dbe4d7164277af23
Hardware Model:      iPad3,1
Process:         FTPSample [5102]
Path:            /var/mobile/Applications/622BE7B0-B65D-40B4-BCBA-62BCF71657CA/FTPSample.app/FTPSample
Identifier:      FTPSample
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2013-02-09 20:12:40.211 +0100
OS Version:      iOS 6.1 (10B141)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x00000030
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   CFNetwork                       0x31c8ec24 _ZL13_WriteCommandP26_CFFTPNetConnectionContextP19_CFFTPStreamContextPK10__CFString + 64
1   CFNetwork                       0x31c8ed8a _ZL13_StartProcessP26_CFFTPNetConnectionContextP19_CFFTPStreamContext + 222
2   CFNetwork                       0x31c8e72c _ZL33_FTPConnectionRequestStateChangedP19_CFFTPStreamContextN13NetConnection5StateEP13CFStreamErrorP21NetConnection_ClassicP26_CFFTPNetConnectionContext + 108
3   CFNetwork                       0x31cb5b3a NetConnection_Classic::requestStateChanged(void*, NetConnection::State, CFStreamError*) + 26
4   CFNetwork                       0x31c65ee0 NetConnection::enqueue(void*, unsigned char) + 316
5   CFNetwork                       0x31c8c1ce _ZL14_FTPStreamOpenPKvP13CFStreamErrorPhP19_CFFTPStreamContext + 3414
6   CFNetwork                       0x31cfbcbe CoreReadStreamWithCallBacks::_streamImpl_Open(CFStreamError*, unsigned char*) + 38
7   CFNetwork                       0x31cfbdae non-virtual thunk to CoreReadStreamWithCallBacks::_streamImpl_Open(CFStreamError*, unsigned char*) + 6
8   CFNetwork                       0x31cfd04a CoreStreamBase::_streamInterface_Open() + 42
9   CFNetwork                       0x31cfb7b8 CoreStreamCFStreamSupport<__CFReadStream*, CoreReadStream>::_stream_open(__CFReadStream*, CFStreamError*, unsigned char*, void*) + 36
10  CoreFoundation                  0x31f4d3f4 _CFStreamOpen + 72
11  CoreFoundation                  0x31f682f6 CFReadStreamOpen + 86
12  FTPSample                       0x0008083e -[ListController startReceive] (ListController.m:184)
13  FTPSample                       0x000815fc -[ListController listOrCancelAction:] (ListController.m:393)
14  UIKit                           0x33eed0c0 -[UIApplication sendAction:to:from:forEvent:] + 68
15  UIKit                           0x33eed148 -[UIBarButtonItem(UIInternal) _sendAction:withEvent:] + 116
16  UIKit                           0x33eed0c0 -[UIApplication sendAction:to:from:forEvent:] + 68
17  UIKit                           0x33eed072 -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 26
18  UIKit                           0x33eed050 -[UIControl sendAction:to:forEvent:] + 40
19  UIKit                           0x33eec906 -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 498
20  UIKit                           0x33eecdfc -[UIControl touchesEnded:withEvent:] + 484
21  UIKit                           0x33e155ec -[UIWindow _sendTouchesForEvent:] + 520
22  UIKit                           0x33e027fc -[UIApplication sendEvent:] + 376
23  UIKit                           0x33e02116 _UIApplicationHandleEvent + 6150
24  GraphicsServices                0x35af45a0 _PurpleEventCallback + 588
25  GraphicsServices                0x35af41ce PurpleEventCallback + 30
26  CoreFoundation                  0x31fcf170 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 32
27  CoreFoundation                  0x31fcf112 __CFRunLoopDoSource1 + 134
28  CoreFoundation                  0x31fcdf94 __CFRunLoopRun + 1380
29  CoreFoundation                  0x31f40eb8 CFRunLoopRunSpecific + 352
30  CoreFoundation                  0x31f40d44 CFRunLoopRunInMode + 100
31  GraphicsServices                0x35af32e6 GSEventRunModal + 70
32  UIKit                           0x33e562fc UIApplicationMain + 1116
33  FTPSample                       0x0007ad90 main (main.m:61)
34  FTPSample                       0x0007a354 start + 36

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x3a373648 kevent64 + 24
1   libdispatch.dylib               0x3a2a3974 _dispatch_mgr_invoke + 792
2   libdispatch.dylib               0x3a2a3654 _dispatch_mgr_thread$VARIANT$mp + 32

Thread 2 name:  WebThread
Thread 2:
0   libsystem_kernel.dylib          0x3a372eb4 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x3a373048 mach_msg + 36
2   CoreFoundation                  0x31fcf040 __CFRunLoopServiceMachPort + 124
3   CoreFoundation                  0x31fcdd9e __CFRunLoopRun + 878
4   CoreFoundation                  0x31f40eb8 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x31f40d44 CFRunLoopRunInMode + 100
6   WebCore                         0x37f26500 _ZL12RunWebThreadPv + 440
7   libsystem_c.dylib               0x3a2dc30e _pthread_start + 306
8   libsystem_c.dylib               0x3a2dc1d4 thread_start + 4

Thread 3:
0   libsystem_kernel.dylib          0x3a383d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3a2d1cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3a2d1a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3a2d18a0 start_wqthread + 4

Thread 4:
0   libsystem_kernel.dylib          0x3a383d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3a2d1cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3a2d1a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3a2d18a0 start_wqthread + 4

Thread 5:
0   libsystem_kernel.dylib          0x3a383d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3a2d1cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3a2d1a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3a2d18a0 start_wqthread + 4

Thread 6 name:  com.apple.CFSocket.private
Thread 6:
0   libsystem_kernel.dylib          0x3a383594 __select + 20
1   CoreFoundation                  0x31fd31f2 __CFSocketManager + 674
2   libsystem_c.dylib               0x3a2dc30e _pthread_start + 306
3   libsystem_c.dylib               0x3a2dc1d4 thread_start + 4

Thread 0 crashed with ARM Thread State (32-bit):
    r0: 0x00000007    r1: 0x1f84c9f8      r2: 0x1f84c9f8      r3: 0x00000004
    r4: 0x00000000    r5: 0x1f852a30      r6: 0x00000007      r7: 0x2fd86518
    r8: 0x0000000b    r9: 0x000a1934     r10: 0x1f858e70     r11: 0x1f84c9f0
    ip: 0x3a492970    sp: 0x2fd864e8      lr: 0x31c8ec1f      pc: 0x31c8ec24
  cpsr: 0x60000030

Binary Images:
   0x79000 -    0x8dfff +FTPSample armv7  <3a5b53df672035cc91392e17de53022d> /var/mobile/Applications/622BE7B0-B65D-40B4-BCBA-62BCF71657CA/FTPSample.app/FTPSample
0x2feea000 - 0x2ff0afff  dyld armv7  <454baf45f9a831aa88e1ea4447c58d4e> /usr/lib/dyld
0x31202000 - 0x31202fff  Accelerate armv7  <b68ff92e404931f3bcb6361720f77724> /System/Library/Frameworks/Accelerate.framework/Accelerate
0x31203000 - 0x31341fff  vImage armv7  <30522b92940d3dd184c8e46780594048> /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage
0x31342000 - 0x31425fff  libBLAS.dylib armv7  <d8edada1cea133458ca779e34a3a7f88> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib
0x31426000 - 0x316dbfff  libLAPACK.dylib armv7  <9e08aead79d13043bab622402a270fba> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib
0x316dc000 - 0x31735fff  libvDSP.dylib armv7  <09e2a5e3e9203950890ba57592523132> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib
0x31736000 - 0x31747fff  libvMisc.dylib armv7  <7b7d4ccc9f2b364cb0da4251e745545d> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib
0x31748000 - 0x31748fff  vecLib armv7  <a7751c047dcc35ba8885212e1938b93f> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib
0x31c4f000 - 0x31d14fff  CFNetwork armv7  <4771a5e4f9b83bceb252f0f3d166aaca> /System/Library/Frameworks/CFNetwork.framework/CFNetwork
0x31d15000 - 0x31d6bfff  CoreAudio armv7  <5d534dbf76ff30f4a628f25f56c5f26a> /System/Library/Frameworks/CoreAudio.framework/CoreAudio
0x31f38000 - 0x3206afff  CoreFoundation armv7  <fcb8d4e838543bcb9a52c9f232b8b4eb> /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
0x3206b000 - 0x321a3fff  CoreGraphics armv7  <81e213f810a034d4ba411f9b505da2a6> /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
0x321a5000 - 0x321e0fff  libCGFreetype.A.dylib armv7  <a5d20b80ab1532d8831027a66d2d9eb5> /System/Library/Frameworks/CoreGraphics.framework/Resources/libCGFreetype.A.dylib
0x323c4000 - 0x323dffff  libRIP.A.dylib armv7  <ec1487f9bdb93597a3f8d434406ad9bf> /System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib
0x323e0000 - 0x32495fff  CoreImage armv7  <6ae4ae2461313e3f84c6a8102d5b1b0e> /System/Library/Frameworks/CoreImage.framework/CoreImage
0x32523000 - 0x32588fff  CoreMedia armv7  <8592bdc268b83b8886acfc1fdab649ed> /System/Library/Frameworks/CoreMedia.framework/CoreMedia
0x32612000 - 0x32668fff  CoreTelephony armv7  <c5a2e59bb15d35b8a8e356e129b78b5e> /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
0x32669000 - 0x326cbfff  CoreText armv7  <e135debbc8f937299f4986fc3e9459e3> /System/Library/Frameworks/CoreText.framework/CoreText
0x326cc000 - 0x326dbfff  CoreVideo armv7  <00f18bb26e663da9ae251a6ec36a19ec> /System/Library/Frameworks/CoreVideo.framework/CoreVideo
0x32860000 - 0x32a23fff  Foundation armv7  <0179934581d13346aa7583165108b95c> /System/Library/Frameworks/Foundation.framework/Foundation
0x32bde000 - 0x32c27fff  IOKit armv7  <a98ba9fefc7333e4a5a9169198848c62> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x32c28000 - 0x32e00fff  ImageIO armv7  <b5ce84bb074d3de4b07b55da9fd8bfd1> /System/Library/Frameworks/ImageIO.framework/ImageIO
0x33317000 - 0x33370fff  MobileCoreServices armv7  <77da8a9e7f813f5baf37eaa4a87fae84> /System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices
0x3345f000 - 0x33466fff  OpenGLES armv7  <f2ede6b206f336de82cc38619692e762> /System/Library/Frameworks/OpenGLES.framework/OpenGLES
0x33468000 - 0x33468fff  libCVMSPluginSupport.dylib armv7  <2506af1c983f3f09ac69aca44f67e863> /System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib
0x3346c000 - 0x3346efff  libCoreVMClient.dylib armv7  <af6ff28dce6031baaa850ccc79e5699b> /System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib
0x3346f000 - 0x33473fff  libGFXShared.dylib armv7  <a6ac1673a088379aa512ba5cac301f5b> /System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib
0x33474000 - 0x334b1fff  libGLImage.dylib armv7  <b8b8f3a1bfd0345e86aa0c2952534949> /System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib
0x33bac000 - 0x33cc1fff  QuartzCore armv7  <c086b6e6cd9d341399bcc3675c82f1fe> /System/Library/Frameworks/QuartzCore.framework/QuartzCore
0x33d10000 - 0x33d3efff  Security armv7  <fbc24f15bd9e37539cdd6e3576bde938> /System/Library/Frameworks/Security.framework/Security
0x33dbd000 - 0x33dfcfff  SystemConfiguration armv7  <410d69b356e533d6a1d538cf33059634> /System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration
0x33dff000 - 0x34353fff  UIKit armv7  <ad8b3ad23f413187a178179db39cfa6b> /System/Library/Frameworks/UIKit.framework/UIKit
0x34354000 - 0x34392fff  VideoToolbox armv7  <d2e8067306d9346ab4a448f10f336894> /System/Library/Frameworks/VideoToolbox.framework/VideoToolbox
0x3465c000 - 0x3465ffff  AggregateDictionary armv7  <a2170ad876f13ef1b944547913d05af2> /System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary
0x34a8b000 - 0x34ac6fff  AppSupport armv7  <921794b7d82a3558a0eb860979be199c> /System/Library/PrivateFrameworks/AppSupport.framework/AppSupport
0x34b39000 - 0x34b42fff  AssetsLibraryServices armv7  <de7ca29cd47433cd8eca9c04102f5508> /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices
0x34b71000 - 0x34b88fff  BackBoardServices armv7  <585cc62d83c530ee82988de940c1e161> /System/Library/PrivateFrameworks/BackBoardServices.framework/BackBoardServices
0x34b92000 - 0x34bb6fff  Bom armv7  <b5315d733e123a0781683efdc734064b> /System/Library/PrivateFrameworks/Bom.framework/Bom
0x34dec000 - 0x34df1fff  CommonUtilities armv7  <f8fea9ee6ca236b0a7fa6c00eb8a0d24> /System/Library/PrivateFrameworks/CommonUtilities.framework/CommonUtilities
0x350b7000 - 0x350b8fff  CoreSurface armv7  <6065f7e040e93d6ea2837e929592cc30> /System/Library/PrivateFrameworks/CoreSurface.framework/CoreSurface
0x35125000 - 0x3512afff  CrashReporterSupport armv7  <03ee46e3ca3f3920a7174e62096723fb> /System/Library/PrivateFrameworks/CrashReporterSupport.framework/CrashReporterSupport
0x35351000 - 0x3536afff  DictionaryServices armv7  <84669055e3e63d6ab56b8fe7b0476aaa> /System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices
0x353dd000 - 0x357f0fff  FaceCoreLight armv7  <43de0b31da3b39e4acf85ec2c8d5c65c> /System/Library/PrivateFrameworks/FaceCoreLight.framework/FaceCoreLight
0x359e8000 - 0x359f4fff  GenerationalStorage armv7  <d77ad2367fff37d485480aa39df7d325> /System/Library/PrivateFrameworks/GenerationalStorage.framework/GenerationalStorage
0x35aee000 - 0x35af9fff  GraphicsServices armv7  <d4b7fd6509753bff9525fef374ddc359> /System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices
0x35de5000 - 0x35e31fff  IMFoundation armv7  <797535fc363c3f818bcd1424251393bf> /System/Library/PrivateFrameworks/IMFoundation.framework/IMFoundation
0x35e38000 - 0x35e39fff  IOAccelerator armv7  <9655464326203d258d3d0fc7e94651e2> /System/Library/PrivateFrameworks/IOAccelerator.framework/IOAccelerator
0x35e3a000 - 0x35e3ffff  IOMobileFramebuffer armv7  <f38c374982a931d5a47458dd3c34ac59> /System/Library/PrivateFrameworks/IOMobileFramebuffer.framework/IOMobileFramebuffer
0x35e40000 - 0x35e44fff  IOSurface armv7  <a55bf03c35de3fd9b56dce82083c3d10> /System/Library/PrivateFrameworks/IOSurface.framework/IOSurface
0x35e8e000 - 0x36034fff  JavaScriptCore armv7  <a5780997f4b738659172f40877c9a7d9> /System/Library/PrivateFrameworks/JavaScriptCore.framework/JavaScriptCore
0x3632f000 - 0x3635cfff  MobileAsset armv7  <3a9e6258ae1230f5b12f1638b09cb974> /System/Library/PrivateFrameworks/MobileAsset.framework/MobileAsset
0x363a1000 - 0x363a4fff  MobileInstallation armv7  <c63e4b1ae40635cd9c6a7de851c80d10> /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation
0x363a5000 - 0x363abfff  MobileKeyBag armv7  <35882c57076334aeb0641969a9b69ff3> /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag
0x36408000 - 0x3640bfff  MobileSystemServices armv7  <10b4eee2739c353183ac2cfe4e39a443> /System/Library/PrivateFrameworks/MobileSystemServices.framework/MobileSystemServices
0x36cf8000 - 0x36d1dfff  OpenCL armv7  <5bf059a9deb632678d70099f14f51b82> /System/Library/PrivateFrameworks/OpenCL.framework/OpenCL
0x37331000 - 0x37359fff  PrintKit armv7  <3f0b9c58a458358eb506858e8ff9e1fe> /System/Library/PrivateFrameworks/PrintKit.framework/PrintKit
0x3735a000 - 0x373cefff  ProofReader armv7  <9cb25467554637bcb268ba30527d3c0f> /System/Library/PrivateFrameworks/ProofReader.framework/ProofReader
0x37513000 - 0x37524fff  SpringBoardServices armv7  <e2571f80a0ad3dc580c69794457bd887> /System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices
0x376af000 - 0x376b1fff  TCC armv7  <d5bef30a5bda315194173b862975f9fb> /System/Library/PrivateFrameworks/TCC.framework/TCC
0x376d0000 - 0x376ddfff  TelephonyUtilities armv7  <803d7a92439238ee942086999c481eb6> /System/Library/PrivateFrameworks/TelephonyUtilities.framework/TelephonyUtilities
0x37b60000 - 0x37c00fff  UIFoundation armv7  <9a464526e26634bc834537e5ac3abf1f> /System/Library/PrivateFrameworks/UIFoundation.framework/UIFoundation
0x37efc000 - 0x37f1bfff  WebBookmarks armv7  <77b65bc9c87b367ebea9a5b7984b13a5> /System/Library/PrivateFrameworks/WebBookmarks.framework/WebBookmarks
0x37f1c000 - 0x3884bfff  WebCore armv7  <ce52fd40ccc236c4b86c020beabb1bb0> /System/Library/PrivateFrameworks/WebCore.framework/WebCore
0x3884c000 - 0x38929fff  WebKit armv7  <dee20c7689bc3e029172b488d8c5f772> /System/Library/PrivateFrameworks/WebKit.framework/WebKit
0x389d4000 - 0x389dbfff  XPCObjects armv7  <723fe314ab95381cbfa69a0000005692> /System/Library/PrivateFrameworks/XPCObjects.framework/XPCObjects
0x396fe000 - 0x39704fff  libAccessibility.dylib armv7  <f40705b5e9c43ce3b1f185fe690b9ac8> /usr/lib/libAccessibility.dylib
0x39705000 - 0x3971bfff  libCRFSuite.dylib armv7  <5a8a3d18a1ff3c97bd773705fef2d81c> /usr/lib/libCRFSuite.dylib
0x39733000 - 0x3973ffff  libMobileGestalt.dylib armv7  <ea41737238273d73b173ec09358d7b62> /usr/lib/libMobileGestalt.dylib
0x39751000 - 0x39751fff  libSystem.B.dylib armv7  <7aeeab280f7e361e9986d962d0fa5281> /usr/lib/libSystem.B.dylib
0x3986f000 - 0x3987bfff  libbsm.0.dylib armv7  <3870b1c8b1783b788bd51da1a04eae6e> /usr/lib/libbsm.0.dylib
0x3987c000 - 0x39885fff  libbz2.1.0.dylib armv7  <b04d27fa0f2d31d8bd0745f8aa0d7f67> /usr/lib/libbz2.1.0.dylib
0x39886000 - 0x398d0fff  libc++.1.dylib armv7  <ceb9fb64fb203d3a94063a9db6590ca4> /usr/lib/libc++.1.dylib
0x398d1000 - 0x398e4fff  libc++abi.dylib armv7  <4b8520bc534231ae97ce146e076bc7bf> /usr/lib/libc++abi.dylib
0x39915000 - 0x39a02fff  libiconv.2.dylib armv7  <ac23bb84e91e35418c9a2fb4792658b2> /usr/lib/libiconv.2.dylib
0x39a03000 - 0x39b4cfff  libicucore.A.dylib armv7  <da9d04cc6f6d3825aa52636342ef1e04> /usr/lib/libicucore.A.dylib
0x39b54000 - 0x39b54fff  liblangid.dylib armv7  <a10d8f96815d35e0a1d2c7b998a941f3> /usr/lib/liblangid.dylib
0x39b57000 - 0x39b5efff  liblockdown.dylib armv7  <996afbc31d8b3f2a907be2427509a4c8> /usr/lib/liblockdown.dylib
0x39e7d000 - 0x39f7bfff  libobjc.A.dylib armv7  <79e5d714945834e4b2587abfc6c7269c> /usr/lib/libobjc.A.dylib
0x3a03f000 - 0x3a054fff  libresolv.9.dylib armv7  <3ee61a04a99b322e97e179bc03c46cf1> /usr/lib/libresolv.9.dylib
0x3a079000 - 0x3a0fefff  libsqlite3.dylib armv7  <cbefd01867b93d2a869a534825a1414c> /usr/lib/libsqlite3.dylib
0x3a0ff000 - 0x3a14afff  libstdc++.6.dylib armv7  <e3154b06ac5d360c948111abfb2bc339> /usr/lib/libstdc++.6.dylib
0x3a14b000 - 0x3a171fff  libtidy.A.dylib armv7  <c43990ee3a5e389aacf288c3615a50dc> /usr/lib/libtidy.A.dylib
0x3a175000 - 0x3a222fff  libxml2.2.dylib armv7  <28dcf6ee713b387ebb763d11d4b3cd37> /usr/lib/libxml2.2.dylib
0x3a223000 - 0x3a243fff  libxslt.1.dylib armv7  <d327d9e0f43333568abda8d83558c8a9> /usr/lib/libxslt.1.dylib
0x3a244000 - 0x3a250fff  libz.1.dylib armv7  <3ea49513bc023326be68e35324c11d0e> /usr/lib/libz.1.dylib
0x3a251000 - 0x3a254fff  libcache.dylib armv7  <91862e82d5063531b4fb4da9a19e5365> /usr/lib/system/libcache.dylib
0x3a255000 - 0x3a25bfff  libcommonCrypto.dylib armv7  <d9e66574881739e8b25c3ae087a9f409> /usr/lib/system/libcommonCrypto.dylib
0x3a25c000 - 0x3a25efff  libcompiler_rt.dylib armv7  <6ac449c92d743640a23d9d1ebe0b48a9> /usr/lib/system/libcompiler_rt.dylib
0x3a25f000 - 0x3a264fff  libcopyfile.dylib armv7  <87bcae8743ab35c8a070ac95b7d57acb> /usr/lib/system/libcopyfile.dylib
0x3a265000 - 0x3a29afff  libcorecrypto.dylib armv7  <04b464137fc2304b84eeed1a5418f4a8> /usr/lib/system/libcorecrypto.dylib
0x3a29b000 - 0x3a2b8fff  libdispatch.dylib armv7  <9323bb560d4e3a3fb41efdc78bd0cf94> /usr/lib/system/libdispatch.dylib
0x3a2b9000 - 0x3a2bafff  libdnsinfo.dylib armv7  <c25502085c833181b2a12cf525cffde6> /usr/lib/system/libdnsinfo.dylib
0x3a2bb000 - 0x3a2bcfff  libdyld.dylib armv7  <82229500ed4132ecbe012e0774e5fc4a> /usr/lib/system/libdyld.dylib
0x3a2bd000 - 0x3a2bdfff  libkeymgr.dylib armv7  <e19c865e73e2352bbc8022033e953f22> /usr/lib/system/libkeymgr.dylib
0x3a2be000 - 0x3a2c3fff  liblaunch.dylib armv7  <c8bedc36bc3d3b55b91b12ebb1240968> /usr/lib/system/liblaunch.dylib
0x3a2c4000 - 0x3a2c7fff  libmacho.dylib armv7  <965ab939e24935e7a3a65981574a7745> /usr/lib/system/libmacho.dylib
0x3a2c8000 - 0x3a2c9fff  libremovefile.dylib armv7  <295706037a5238b4aa145df7b9354a0e> /usr/lib/system/libremovefile.dylib
0x3a2ca000 - 0x3a2cafff  libsystem_blocks.dylib armv7  <50a01a02f573317fbd21e1070b0afc7d> /usr/lib/system/libsystem_blocks.dylib
0x3a2cb000 - 0x3a351fff  libsystem_c.dylib armv7  <cacc68d271e53338b7780c26f651b767> /usr/lib/system/libsystem_c.dylib
0x3a352000 - 0x3a358fff  libsystem_dnssd.dylib armv7  <6c5ac17133a1366aaeea5dc38dceaf1f> /usr/lib/system/libsystem_dnssd.dylib
0x3a359000 - 0x3a371fff  libsystem_info.dylib armv7  <5a4a4c9da868317db7f17cb616eb32d1> /usr/lib/system/libsystem_info.dylib
0x3a372000 - 0x3a388fff  libsystem_kernel.dylib armv7  <8e995919df713a8783f23e7f6649bf09> /usr/lib/system/libsystem_kernel.dylib
0x3a389000 - 0x3a3a5fff  libsystem_m.dylib armv7  <036ea0321da038e8b69a0c4413da00fe> /usr/lib/system/libsystem_m.dylib
0x3a3a6000 - 0x3a3b4fff  libsystem_network.dylib armv7  <afc167a2e9be3dd6851da8deaf42bafd> /usr/lib/system/libsystem_network.dylib
0x3a3b5000 - 0x3a3bcfff  libsystem_notify.dylib armv7  <c1d71aa978383c51a9ba2b32782d6cc6> /usr/lib/system/libsystem_notify.dylib
0x3a3bd000 - 0x3a3befff  libsystem_sandbox.dylib armv7  <45bb99d46408351a9c61b5326032adea> /usr/lib/system/libsystem_sandbox.dylib
0x3a3bf000 - 0x3a3bffff  libunwind.dylib armv7  <df8f1d90cbb837cc92d5901fab94e6ca> /usr/lib/system/libunwind.dylib
0x3a3c0000 - 0x3a3d5fff  libxpc.dylib armv7  <7f983066ea4c3c119f3e2344a04fef6e> /usr/lib/system/libxpc.dylib 
```

有什么提示吗？

提前致谢，

*   AGPX

# c - 将数组作为参数传递给 C 中的函数指针

> ID：14801705
> 
> 赞同：0
> 
> 时间：2013-02-10T19:28:44.360
> 
> 标签：c, arrays, function, pointers, arguments

我目前正在研究指向函数的指针，并一直在练习排序数组函数。关键是我在函数中输入了一个数字序列，程序将按升序重新排列。当我通过值函数进行调用时它工作得很好（我认为这就是你所说的）。但是，当我尝试将指针分配给函数并尝试使用该指针而不是函数本身时，它会返回一堆错误。我确定问题是由于我将数组作为参数传递给函数 POINTER。这是我的代码：

```
#include<stdio.h>
#define SIZE 10

void sort(int a[], int size);
void swap(int *elt1, int *elt2);
main()
{
    int i; int array[SIZE]= {1,9,3,2,4,100,43,23,32,12};
    void (*fptr)(int array, int SIZE);
    fptr = &sort;
    (*fptr)(array,SIZE);
    /*sort(array, SIZE);*/
    for(i=0;i<SIZE;i++)
    {
            printf("%d\n", array[i]);
    }
    return 0;
}

void sort(int a[], int size)
{
    int pass, j;
    for(pass = 0; pass<size;pass++)
    {
            for(j=0;j<size;j++)
            {
                    if(a[j]>a[j+1])
                    {
                            swap(&a[j], &a[j+1]);
                    }
            }

    }

}

void swap(int *elt1, int *elt2)
{
    int hold;
    hold = *elt1;
    *elt1 = *elt2;
    *elt2 = hold;

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T19:30:34.640

函数的第一个参数是指向`int`（即`int *`）的指针，而不是`int`。

```
void (*fptr)(int array, int SIZE); 
```

应该

```
void (*fptr)(int *array, int SIZE); 
```

# performance - GHC 性能：为什么更多的工作需要*多*少的时间？

> ID：14801708
> 
> 赞同：1
> 
> 时间：2013-02-10T19:29:08.610
> 
> 标签：performance, haskell, ghc

不幸的是，整个示例涉及大量代码。[你可以在这里](http://hpaste.org/82107)看到完整的模块（仍然无法编译），下面的伪代码函数 f 对应于 hpaste 中的 'FIXME' 标签。

这是一个伪代码大纲：

```
module Test (run) where
    import Data.Vector.Unboxed as U

    run m i iters = let {get q} in do print $ testWrapper iters m q

    testWrapper :: forall i . Int -> Int -> i -> U.Vector i
    testWrapper iters m q =
        let {get test params: xs, dim, ru}
        in U.map fromIntegral (iterate (f dim ru) xs !! iters)

    {-# INLINE f #-}
    f :: (Int, Int) -> Vector r -> Vector r -> Vector r
    f dim ru = (g dim ru) . zipWith (*) ru

    {-# INLINE g #-}
    g :: (Int, Int) -> Vector r -> Vector r -> Vector r
    g dim ru = ... 
```

对于某些参数，此代码在 ~.5 秒内运行。

我还测试了将 f 更改为 f'：

```
f' dim ru = (g dim ru) 
```

（我只是删除了最终的 zipWith，减少了所需的整体工作）。

在相同的输入参数上，修改后的代码需要 4.5 秒。

这发生在使用 optimizaiton 编译（使用 GHC 7.4.2、ghc -O2 以及更多优化）时。快速版本的核心大约是 3000 行，而慢版本的核心大约是 1900 行。

这可能没什么可做的，但是什么样的 GHC 疯狂可能会导致我的程序通过减少它所做的工作而减速一个数量级？当我最小的测试用例基本上生成超过 2000 行核心时，我怎么会发现这样的*东西*？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T20:46:31.737

查看堆配置文件。会不会是“更少的工作”版本留下了一些未评估的 thunk？这会导致较大的内存占用，并通过垃圾收集影响速度。

# c++ - SFML2 Mouse::isButtonPressed 填满事件队列

> ID：14801712
> 
> 赞同：0
> 
> 时间：2013-02-10T19:30:06.340
> 
> 标签：c++, sfml

首先我想说我不确定标题是否合适，但这是我能找到的唯一合乎逻辑的解释。

我想要做的是通过单击精灵来移动我的窗口（有点像模拟标题栏）。一切正常，直到我放开鼠标按钮，新鼠标事件的发射率要低得多，并且它们之间有 1.5~2 秒的巨大停顿。

sf::Mouse::isBUttonPressed 是否可能正在填充队列，还是另一个问题？

编辑：窗口类有一个 sf::Event 对象并将其传递给每个对象的事件处理程序。sprite 类有一个这种形式的事件处理程序：

```
bool object::handleEvents(sf::Event& event)
{
    switch(event.type)
    {
        case sf::Event::MouseMoved:
        case sf::Event::MouseButtonPressed:
        case sf::Event::MouseButtonReleased:
        {
            auto mouse_pos = sf::Mouse::getPosition(*this->parent);

            if(this->isPointInside(mouse_pos))
            {
                if(event.type == sf::Event::MouseMoved)
                {
                    this->hovering = true;

                    if(this->callback["onHover"])
                        this->callback["onHover"](this, nullptr);

                    return true;
                }
                else if(event.type == sf::Event::MouseButtonPressed)
                {
                    this->clicked = true;
                    this->focused = true;

                    if(event.mouseButton.button == sf::Mouse::Left)
                        if(this->callback["onLClick"])
                            this->callback["onLClick"](this, ref(mouse_pos));

                    if(event.mouseButton.button == sf::Mouse::Right)
                        if(this->callback["onRClick"])
                            this->callback["onRClick"](this, ref(mouse_pos));

                    return true;
                }
                else if(event.type == sf::Event::MouseButtonReleased && this->clicked)
                  {
                        this->clicked = false;

                        if(event.mouseButton.button == sf::Mouse::Left)
                            if(this->callback["onLClickReleased"])
                                this->callback["onLClickReleased"](this, ref(mouse_pos));

                        if(event.mouseButton.button == sf::Mouse::Right)
                            if(this->callback["onRClickReleased"])
                                this->callback["onRClickReleased"](this, ref(mouse_pos));

                        return true;
                  }
                }
            else
            {
                if(this->hovering)
                {
                    if(this->callback["onHoverLost"])
                        this->callback["onHoverLost"](this, nullptr);
                    this->hovering = false;
                }
            }
        }break;

        default: ;
    }
    return false;
} 
```

以及负责移动窗口的代码：

```
titlebar->callback["onLClick"] = [&](object* obj, void* data)
{
    sf::Vector2i* relpos = (sf::Vector2i*)(data);
    while(sf::Mouse::isButtonPressed(sf::Mouse::Left))
    {
        sf::Vector2i abspos = sf::Mouse::getPosition();
        window.setPosition(sf::Vector2i((abspos.x - relpos->x),(abspos.y - relpos->y)));
    }
    titlebar->clicked = false;
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T04:11:24.750

该类`sf::Mouse`与事件系统无关，而是完全独立的`sf::Keyboard`，`sf::Joystick`因此不可能`isButtonPressed`对事件产生任何影响。

代码中的真正问题是按下鼠标左键时的“无限”循环。如果按下鼠标左键，那么在您的应用程序中发生的一切都是，窗口会四处移动。不会有任何事件分派（= 处理），并且在那段时间内发生的每个事件都将被放入事件队列中。因此，当您返回处理事件时，您将拥有比平时更长的队列，并且会从最旧的事件开始调度。因此，如果您现在将窗口移动 2 秒，您将获得一个 2 秒的填充队列，这可能会延迟进一步的处理。

要解决此问题，您很可能必须在移动窗口时调度所有事件。

# jpa - Ebean.delete() 为多对多关系创建错误的 SQL

> ID：14801713
> 
> 赞同：1
> 
> 时间：2013-02-10T19:30:08.083
> 
> 标签：jpa, orm, many-to-many, ebean

我有两个简单的实体*问题*和*标签*，以及它们之间的`many-to-many`关系。一切正常，除非我想删除导致此异常的*问题：*`Ebean.delete(Issue.class, id)`

```
javax.persistence.PersistenceException: Query threw SQLException:Unknown column
 'issue_id' in 'where clause' 
Bind values:[1b7e5955c26b51dex546fca27x13cc54c2531x-7fef, ] 
Query was:
select t0.id c0 
from tag t0 
where issue_id=? 
```

非常奇怪的是，**生成的 SQL 显然是错误**的。它尝试访问表`issue_id`中的an`tag`但没有。我希望这不是 Ebean 中的错误，而只是我的一个错误，但我不知道它可能是什么。

这是实体 bean（我删除了 getter/setter）和 Ebean 生成的 DDL：

**发行实体**

```
@Entity
public class Issue {

    @Id @Column(length=64)
    private String id;    // <-- I use assigned ids
    @Version
    private Date timeStamp;
    private String title;
    private String description;
    private String createdBy;
    @CreatedTimestamp
    private Date createdAt;
    private String state;
    @ManyToMany(cascade=CascadeType.ALL)
    @JoinTable(
        name="issue_tag",
        joinColumns={@JoinColumn(name="issue_id", referencedColumnName="id")},
        inverseJoinColumns={@JoinColumn(name="tag_id", referencedColumnName="id")})
    private Set<Tag> tags;
} 
```

**标记实体**

```
@Entity
public class Tag {

    @Id @Column(length=64)
    private String id;    // <-- I use assigned ids
    @Version
    private Date timeStamp;
    private String name;

    @ManyToMany(mappedBy="tags", cascade=CascadeType.ALL)
    private Set<Issue> issues;
} 
```

**生成的 DDL**

```
create table issue (
  id                        varchar(64) not null,
  title                     varchar(255),
  description               varchar(255),
  created_by                varchar(255),
  state                     varchar(255),
  time_stamp                datetime not null,
  created_at                datetime not null,
  constraint pk_issue primary key (id))
;

create table tag (
  id                        varchar(64) not null,
  name                      varchar(255),
  time_stamp                datetime not null,
  constraint pk_tag primary key (id))
;

create table issue_tag (
  issue_id                       varchar(64) not null,
  tag_id                         varchar(64) not null,
  constraint pk_issue_tag primary key (issue_id, tag_id))
;

alter table issue_tag add constraint fk_issue_tag_issue_01 foreign key (issue_id) references issue (id) on delete restrict on update restrict;

alter table issue_tag add constraint fk_issue_tag_tag_02 foreign key (tag_id) references tag (id) on delete restrict on update restrict; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-31T17:01:14.057

这里的主要问题是您在`many-to-many`关系上设置了删除级联。删除操作的级联应该小心。它只能设置在or的`one`一侧。 `one-to-one``one-to-many`

删除应该只级联到不能单独存在的对象。因此，如果我们有班级`Person`，我们可以在地址列表或与附加信息的班级的关系上设置删除级联。为什么在关系上设置删除级联`many-to-many`是错误的？想象一下我们在学生和课程之间有这样的关系。我们在两个方向都删除了cascane。现在取消一门课程将导致所有注册该课程的学生被大学除名。同样，移除一名学生会导致取消他注册的所有课程。

在您的代码中，您在两个关系方向都有删除级联。事实证明，这对 Ebean 来说太难了。但是假设 Ebean 完全按照你告诉他的做了。这将是一场灾难。为什么？

1.  您正在`Issue`删除`id=1`
2.  删除级联到与此问题相关的所有标签。
3.  删除级联到与上一点删除的所有标签相关的所有问题
4.  回到 2。

因此，如果所有问题和标签都连接在网络中，那么删除其中一个将导致整个网络的删除。

如果您删除这些级联，那么您的代码将正常工作。
删除问题将导致：

*   `issue`从表中删除一行
*   从`issue_tag`表中删除适当的行

# menu - Windows 功能区框架：ApplicationMenu 中的库

> ID：14801729
> 
> 赞同：1
> 
> 时间：2013-02-10T19:32:08.950
> 
> 标签：menu, gallery, windows-ribbon-framework

根据 MS 文档，功能区框架的应用程序菜单应该能够承载`DropDownGallery`元素，但我无法通过 uicc 编译器。例如：

```
<Ribbon.ApplicationMenu>
  <ApplicationMenu CommandName="AppMenu" >
    <ApplicationMenu.RecentItems>
      <RecentItems CommandName="RecentItems" EnablePinning="false" MaxCount="15" />
    </ApplicationMenu.RecentItems>
    <MenuGroup Class="MajorItems">
      <DropDownGallery CommandName="MyAppGallery" Type="Commands" HasLargeItems="false">
        <DropDownGallery.MenuLayout>
          <VerticalMenuLayout Gripper="None"/>
        </DropDownGallery.MenuLayout>
      </DropDownGallery>
    </MenuGroup>
  </ApplicationMenu>
</Ribbon.ApplicationMenu> 
```

这会导致 uicc 编译器出现 SC1053 错误：

```
error SC1053 : The attribute 'Type' on the element '{http://schemas.microsoft.com/windows/2009/Ribbon}DropDownGallery' is not defined in the DTD/Schema. 
```

相同的`DropDownGallery`语法在我们应用程序的其他任何地方都适用，并且 MS 文档明确声明这`DropDownGallery`是`MenuGroup`.

是什么赋予了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:34:56.343

回答我自己的问题：

事实证明，这里有两个问题。

1.  应用程序菜单中的画廊是有限的。唯一支持的布局是命令的一级垂直菜单，唯一支持的属性是`CommandName`和`ApplicationMode`。MS 文档中的任何地方都没有提到这些限制。

2.  功能区编译器 uicc.exe 中有一个明显的错误：除了属性之间，它不允许元素标记中的任何*地方出现任何空白。*

将这些放在一起，这是唯一真正适用于应用程序菜单中画廊的标记：

```
<DropDownGallery CommandName="MyAppGallery"/> 
```

或者

```
<DropDownGallery CommandName="MyAppGallery"></DropDownGallery> 
```

请特别注意，元素名称和属性之间*只有空格。*即使 the`>`和 the之间的空格`</`也会导致功能区编译器出错：

```
<!-- this will fail! -->
<DropDownGallery CommandName="MyAppGallery"> </DropDownGallery> 
```

# asp.net - 我在 asp.net 中的页面的后退按钮

> ID：14801730
> 
> 赞同：2
> 
> 时间：2013-02-10T19:32:10.067
> 
> 标签：asp.net, button, back

我使用此代码来隐藏错误。

```
<customErrors defaultRedirect="ErrorServer.aspx" mode="On" /> 
```

我想为我的错误页面设置后退按钮，当用户按下按钮时，它会转到用户来自该页面的页面。这意味着每次返回的 URL 都会不同！如何在我的页面中添加后退按钮？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T19:37:33.880

您可以在错误页面上查看引用 URL。

所以你的前端可以有这个：

```
<asp:HyperLink ID="hypBackLink" Text="Go Back" runat="server" /> 
```

在您的 Page_Load 事件中：

```
if(Request.UrlReferrer != null)
     hypBackLink.NavigateURL = Request.UrlReferrer; 
```

# oracle - Toad 的“估计表大小”中显示的列是什么？谁能解释一下？

> ID：14801731
> 
> 赞同：3
> 
> 时间：2013-02-10T19:32:10.817
> 
> 标签：oracle, toad

我正在使用蟾蜍“估计表大小”，它显示了很多列：

```
 AVG Row Len (states) 
   Est Size (states)
   Max Row Len (DDL)
   Est Size (DDL)
   AVG Row Len (scan) 
   Est Size (Scan) 
```

谁能解释一下这些列？大小和长度有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T01:53:21.883

Toad 帮助中的一些要点：

* * *

Avg Row Len (Scan) 根据当前表中的数据计算 avg row len（即，您需要使用扫描工具进行扫描）。

Avg Row Len (Stats) 提取上次收集表上的统计信息时 Oracle 存储的平均行长度（基于收集统计信息时表中的数据）。

Max Row Len (DDL) 根据列的类型和数量提取最大行长度。

如果这些方法都不适用，您可以在 Avg Row Len (User) 中输入您自己的号码。例如，如果您有样本数据，但您知道样本数据中的字段中的值太小，那么您可能会进行扫描，然后将比 Avg Row Len (Scan) 稍大的数字放入 Avg Row伦（用户）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-11T08:37:30.163

我找不到任何特定的文档，但如果我们将所有行都填充到最大大小，我希望 DDL 大小是表的大小。要获得正确的估计，您需要按下扫描按钮，然后 Est Size (Scan) 将被更新，这使您可以更好地了解表格的实际大小。

# jquery - jquery回调有问题

> ID：14801733
> 
> 赞同：0
> 
> 时间：2013-02-10T19:32:30.700
> 
> 标签：jquery, callback

我在 html 中有一个手风琴，标题 onclick 调用函数 initTable。

```
<script type="text/javascript">
  $(document).ready(function() 
  {
    $('.accordion ul li h1').click(function() 
    {                
      document.getElementById('processing').innerHTML = "Processing...";
      document.body.style.cursor = 'Wait';
      $(this).parent().parent().find('.ac:visible').slideToggle().parent().removeClass('active');

      if ($(this).next().is(':hidden'))
      {
        $(this).next().slideToggle().parent().addClass('active'); 
      }
    });
  } );
  </script>
</head>
<body>
  <div id=processing></div>
  <div class="wrapper">
    <div class="accordion">
      <ul>
        <li>
          <h1 onclick=initTable("Anticoag")>Anticoag</h1>
          <div class="ac">
            <div id="AnticoagTable" width="100%">Loading...</div>
          </div>
        </li> 
```

initTable 访问服务器获取数据并创建一个 DataTable，这需要几秒钟。

我要做的是在 initTable 调用发生之前将我的 div id='processing' 设置为“Processing...”。

现在发生的事情是它正在等待表数据返回，然后显示“正在处理...”

我尝试使用此代码将我的 h1 更改为 onclick=test1(category)。但由于某种原因，我的 initTable 函数甚至没有被调用。不知道是语法还是我完全错误地使用它。

```
function test1(category)
{
  test2(category, function()
  {
    initTable(category);
  });
}

function test2(category)
{
  alert("test2");
  document.getElementById('processing').innerHTML = "Processing...";
  document.body.style.cursor = 'Wait';
} 
```

通过请求添加 initTable 函数 function initTable(category) { if (gsCategory === "") gsCategory = category; else if (gsCategory == category) gbToggle = !gbToggle; 否则 gbToggle = false;

```
 gsCategory = category;

    if (gbToggle === false) {
        gsCategory = category;

        var select = document.forms[0].selFacility;
        var facility = select.options[select.selectedIndex].value;

        var patJson = getJson(facility, category);
        document.getElementById('processing').innerHTML = "Done...";
        document.body.style.cursor = 'Default';
        var anOpen = [];
        var sImageUrl = "../images/";
        makeTable(category);

        var oTable = $('#' + category).dataTable({
            "bProcessing": false,
                "bDestroy": true,
                "aaData": patJson,
                "bAutoWidth": false,
                "aoColumns": [{
                "mDataProp": null,
                    "sClass": "control center",
                    "sDefaultContent": '<img src="' + sImageUrl + 'details_open.png' + '">',
                    "sWidth": "5%"
            }, {
                "mDataProp": "S_PAT_NAME",
                    "sWidth": "30%"
            }, {
                "mDataProp": "S_AGE",
                    "sWidth": "15%"
            }, {
                "mDataProp": "S_FIN",
                    "sWidth": "30%"
            }, {
                "mDataProp": "S_ROOM_BED",
                    "sWidth": "20%"
            }]
        });

        $('#' + category + ' td.control').live('click', function () {
            var nTr = this.parentNode;
            var i = $.inArray(nTr, anOpen);

            if (i === -1) {
                $('img', this).attr('src', sImageUrl + "details_close.png");
                var nDetailsRow = oTable.fnOpen(nTr, fnFormatDetails(oTable, nTr), 'details');
                $('div.innerDetails', nDetailsRow).slideDown();
                anOpen.push(nTr);
            } else {
                $('img', this).attr('src', sImageUrl + "details_open.png");
                $('div.innerDetails', $(nTr).next()[0]).slideUp(function () {
                    oTable.fnClose(nTr);
                    anOpen.splice(i, 1);
                });
            }
        });
    } //gbToggle = false
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:47:21.457

你已经分配了一个函数来点击 jQuery，你不需要也不应该使用`onclick`属性

只需将 initTable 调用放在点击处理函数中即可。要识别点击了什么，您可以使用`data-something`属性

```
$(document).ready(function()  {
  $('.accordion ul li h1').click(function()  {  
  var category = $(this).attr('data-category');

  $('#processing')..text("Processing...");
  ...
  initTable( category );

<h1 data-category="Anticoag">Anticoag</h1> 
```

您还需要：

*   知道在 javascript`{`中插入新行是不正确的
*   了解当您将内联函数传递给其他函数时会发生什么，因为您做到了

    test2(category, function() { initTable(category); });

而且您甚至没有在`test2`函数定义中声明第二个参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T19:41:57.180

你`initTable(category)`的永远不会被调用。

`test2`应该 ：

```
 function test2(category,cb){
  alert("test2");
  document.getElementById('processing').innerHTML = "Processing...";
  document.body.style.cursor = 'Wait';
  //Calling the call-back
  cb(category);
 } 
```

那是你的实际代码。但你可以简单地在你的`test1`

```
function test1(category)
{
  test2(category);

  //asynchronous call to initTable().
  setTimeout(function(){
      initTable(category);
  },0);
} 
```

# rvm - Siriproxy 服务器错误

> ID：14801734
> 
> 赞同：0
> 
> 时间：2013-02-10T19:32:35.710
> 
> 标签：rvm, raspberry-pi, siri

我正在尝试在新鲜的 Raspberry Pi 上运行 Siriproxy。

我已逐步遵循本教程：http: [//www.hometoys.com/emagazine.php?art_id=2090](http://www.hometoys.com/emagazine.php?art_id=2090)

一切看起来都安装了 100%。但在最后一步，我尝试运行“rvmsudo siriproxy server”，但出现以下错误。

```
siri@raspberrypi:~/SiriProxy$ rvmsudo siriproxy server
/home/siri/.rvm/rubies/ruby-1.9.3-p385/lib/ruby/1.9.1/psych.rb:297:in `initialize': No    such file or directory - /root/.siriproxy/config.ym              l (Errno::ENOENT)
    from /home/siri/.rvm/rubies/ruby-1.9.3-p385/lib/ruby/1.9.1/psych.rb:297:in `open'
    from /home/siri/.rvm/rubies/ruby-1.9.3-p385/lib/ruby/1.9.1/psych.rb:297:in `load_file'
    from /home/siri/.rvm/gems/ruby-1.9.3-p385@SiriProxy/gems/siriproxy-0.3.3/lib/siriproxy/command_line.rb:143:in `parse_options'
    from /home/siri/.rvm/gems/ruby-1.9.3-p385@SiriProxy/gems/siriproxy-0.3.3/lib/siriproxy/command_line.rb:33:in `initialize'
    from /home/siri/.rvm/gems/ruby-1.9.3-p385@SiriProxy/gems/siriproxy-0.3.3/bin/siriproxy:6:in `new'
    from /home/siri/.rvm/gems/ruby-1.9.3-p385@SiriProxy/gems/siriproxy-0.3.3/bin/siriproxy:6:in `<top (required)>'
    from /home/siri/.rvm/gems/ruby-1.9.3-p385@SiriProxy/bin/siriproxy:23:in `load'
    from /home/siri/.rvm/gems/ruby-1.9.3-p385@SiriProxy/bin/siriproxy:23:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T06:17:20.330

似乎当您运行涉及`cp ~/SiriProxy/config.example.yml ~/.siriproxy/config.yml`您在用户目录中创建这些目录的部分时，而不是在它正在查找的根目录中。~/ 符号是主目录的简写。尝试学习基本的 linux 导航是如何工作的，并匹配 config.yml 文件的存储位置——例如，根目录与用户目录。

# javascript - JavaScript 全局对象引用 vs 'this'

> ID：14801743
> 
> 赞同：2
> 
> 时间：2013-02-10T19:33:50.090
> 
> 标签：javascript, reference, scope

我正在开发一个编写为对象文字的应用程序框架，为了简单起见，我想做两件事：

1.  使对象全局可用
2.  对所有引用使用对象名称（全局定义）（与 using 相比`this`）

所以，我已经进行了一些测试，完成了研究，并且没有找到任何不采用这种方法的充分理由。我的问题是 - 我错过了什么吗？性能测试实际上似乎有利于我的方法，从逻辑层面来看，我没有看到任何问题。查看其他框架，我看到了混合，但我知道该`this`参考受到许多程序员的尊敬。

以供参考...

我的方法的一个非常小的例子：

```
var myobj = {

    someVal: 'foo',

    init: function(){
       // Make myobj available globally
       window.myobj = myobj;
       // Fire off a method
       myobj.doStuff();
    },

    doStuff: function(){
        // Just print out the contents...
        console.log(myobj.someVal);
    }
}

myobj.init(); 
```

请注意，这些引用都是针对全局的，而不是`this`.

就像我说的那样，我已经看到了这种情况的混合，我想我只是想知道这是否会导致长期问题，或者这是否无足轻重。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T19:39:38.900

就限制而言，首先想到的是您只能拥有该对象的一个​​实例。尝试初始化一个新对象会清除该对象。

`this`使用全局变量名而不是全局变量名的另一个原因是，`this`即使变量名发生变化，它也会指向正确的对象。

如果您真的希望这是一个名称永远不会更改的“创建一次”全局对象，那么这种技术在技术上并没有错。但它不能在任何其他情况下使用。如果需求发生变化（例如，如果您使用的库导致与所选变量名发生命名冲突），考虑编写更具适应性的代码可能更明智

Using`this`使您可以灵活地重命名变量并在不同的上下文中传递它，而无需担心跟踪变量名称。如果出现命名冲突，它也将很容易更改。

# javascript - Niceedit 数据验证 PHP

> ID：14801748
> 
> 赞同：0
> 
> 时间：2013-02-10T19:34:35.527
> 
> 标签：javascript, jquery, html, nicedit

我使用 Nicedit 作为一个不错的 tekst 编辑器，这样我就可以在 mij 形式的文本字段中使用粗体和斜体。我想将此 tekst 存储在我的数据库中，但 Nicedit 将所有 HTML 标签用于粗体、斜体和其他文本中。是否有类似 preg_match 的东西可以验证文本，以便我可以将其安全地放在我的数据库中。我不知道例如是否有更新的解决方案。Jquery 做同样的事情并且更容易验证，如果是这样，什么是最好的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:47:59.687

niceditor output normal text with bold and italic without HTML tags. i can sugest you:

1- download the full script of niceditor (choose all options)

2- look if you dont escape the text variable in your php .

# php - MYSQL 和 PHP 检查 IP 地址是否已被使用，以便只允许查看一次页面

> ID：14801751
> 
> 赞同：0
> 
> 时间：2013-02-10T19:35:03.977
> 
> 标签：php, mysql, ip

优惠券应仅针对尚未查看该类型的 IP 显示。如果他们这样做，它应该回显错误页面。只允许用户查看页面一次。

IP 正在进入数据库，但当在该类型的数据库中找到 IP 时，PHP 无法正常工作以显示错误页面。

网址：[http ://muhs.trinix.co/coupon?type=czo0OiJNZW93Ijs=](http://muhs.trinix.co/coupon?type=czo0OiJNZW93Ijs=)

```
<?PHP
if(empty($_GET['type'])){die();}
mysql_connect("localhost", "muhs_cp", "********************");
mysql_select_db("muhs_cp");
$type = mysql_real_escape_string(unserialize(base64_decode($_GET['type'])));
$randid = rand(1, 9999999999);
$ip = $_SERVER['REMOTE_ADDR'];

$resultz = mysql_query("SELECT ip FROM coupons WHERE type = '$type' AND ip = '$ip'        LIMIT 1");

if(mysql_fetch_array($resultz) !== false){
mysql_query("INSERT INTO `coupons` (`id`, `type`, `ip`) VALUES ('$randid', '$type', '$ip')");

$result = mysql_query("SELECT * FROM coupons WHERE type = '".mysql_real_escape_string($type)."'") or die(mysql_error());
$row = mysql_fetch_array( $result );
$expired = $row['expired'];
$notes = $row['notes'];
$cookie = $row['cookie'];
mysql_query("UPDATE `totals` SET `number` = `number` + 1 WHERE `type` = '".mysql_real_escape_string($type)."'");
}
else{
echo "
<html>
<head>
<title>Your Coupon</title>
<link href='css/screen.css' rel='stylesheet' type='text/css' />
</head>
<body id='wrapper'>
<div id='login'>
<h1>Whoops! Looks like this coupon has already been used.</h1>
<br />
<img src='../images/logo.png' />
<br />
<p>You are unable to make a coupon more than once.</p>
</div>
</body>
</html>"; die();};
?> 
```

更新：我有一个额外的！在 if 语句中。我还能够更改代码，使其只允许用户查看该页面一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T19:47:07.557

它在这一行：

```
if(mysql_fetch_array($resultz) !== false){ ... 
```

如果它不应该返回一些东西，那么你应该说！= NULL。你拥有它的方式将永远是 !== false 所以它永远不会显示作为 else 语句一部分的页面，因为它永远不会走那么远。

例如，

如果您只想在 B 处于状态 C 时才执行 A，这对我们来说在数据库中没有 IP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T19:53:25.040

我会重写那部分：

```
$ip = $_SERVER['REMOTE_ADDR'];

//if you don't want every type to be usable just once, add ip here
$resultz = mysql_query("SELECT ip FROM coupons WHERE type = '$type' AND ip = '$ip' LIMIT 1");

//better to work with num_rows here
if(mysql_num_rows($resultz)>0){
mysql_query("INSERT INTO `coupons` (`id`, `type`, `ip`) VALUES ('$randid', '$type', '$ip')"); 
```

# asp.net-mvc - 使用 MVC4 的 Razor 视图中的 InvalidOperationException

> ID：14801754
> 
> 赞同：0
> 
> 时间：2013-02-10T19:35:34.113
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我正在尝试构建一个抽认卡应用程序来学习 MVC4。一套包含卡片，一张卡片包含面（以方便单面或多面卡片）。

我有以下用于卡片创建的视图模型：

```
public class CreateCardViewModel
    {
        [HiddenInput(DisplayValue = false)]
        public int SetId { get; set; }

        [Required]
        public ICollection<Side> Sides { get; set; }

        [Required]
        [DataType(DataType.Date)]
        public DateTime DateCreated { get; set; }

        [Required]
        public bool IsReady { get; set; }

    } 
```

以及为创建定义的以下操作：

```
[HttpGet]
        public ActionResult Create(int setId)
        {
            var model = new CreateCardViewModel();

            // attach card to current set
            model.SetId = setId;

            // create a new Side
            var side = new Side() {Content = "Blank Side"};

            // Add this to the model's Collection
            model.Sides = new Collection<Side> { side };

            return View(model);
        }

        [HttpPost]
        public ActionResult Create(CreateCardViewModel viewModel)
        {
            if (ModelState.IsValid)
            {
                var set = _db.Sets.Single(s => s.SetId == viewModel.SetId);
                var card = new Card {Sides = viewModel.Sides};

                set.Cards.Add(card);

                _db.Save();
            }
            return View(viewModel);

        } 
```

在视图中，我尝试首先显示我在 Controller 中创建的 Side，并允许用户对其进行编辑。我得到“InvalidOperationException：模板只能用于字段访问、属性访问、单维数组索引或单参数自定义索引器表达式。” 当我尝试在视图中使用以下标记运行时：

```
<h2>Create</h2>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>CreateCardViewModel</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.SetId)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.SetId)
            @Html.ValidationMessageFor(model => model.SetId)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.DateCreated)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.DateCreated)
            @Html.ValidationMessageFor(model => model.DateCreated)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.IsReady)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.IsReady)
            @Html.ValidationMessageFor(model => model.IsReady)
        </div>

        // OFFENDING CODE
        @foreach (var side in Model.Sides)
             {
                 @Html.EditorFor(model => model.Sides.ElementAt(side.SideId))
             }

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
} 
```

创建卡片时如何让用户编辑现有的面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T20:09:37.320

Instead of using `ElementAt()`, just use the normal `[]` index operator:

`@Html.EditorFor(model => model.Sides[side.SideId])`

# facebook - 是否可以有一个自定义的 facebook like 按钮？

> ID：14801757
> 
> 赞同：31
> 
> 时间：2013-02-10T19:35:58.360
> 
> 标签：facebook, facebook-like

有时，客户希望有一个自定义的“facebook 按钮”。我的意思是不同的图像和设计。

我曾经使用 sharer.php ：

```
<a id="fb-share" style='text-decoration:none;' type="icon_link" onClick="window.open('http://www.facebook.com/sharer.php?s=100&amp;p[title]=foo&amp;p[summary]=bar&amp;p[url]=https://www.foobar.com/&amp;p[images][0]=https://www.foobar.com/thumb.gif','sharer','toolbar=0,status=0,width=580,height=325');" href="javascript: void(0)">
<img src="img/share.gif" width="62" height="18" alt="Share"/>
S</a> 
```

但它似乎不太好用，因为 facebook 已经弃用了 Share 按钮。相反，我们必须使用“喜欢按钮”。

那么是否可以有一个带有自定义图像的自定义按钮？

我在 facebook api 页面上看到了一个用于创建按钮的[生成器](http://developers.facebook.com/docs/reference/plugins/like/)，但我想知道是否可以使用具有不同图像的自定义按钮？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-10T19:44:28.930

做很多工作是可能的。

基本上，您必须[通过 Open Graph API 发布点赞操作](https://developers.facebook.com/docs/technical-guides/opengraph/built-in-actions/likes/)。然后，您可以将自定义设计添加到您的喜欢按钮。

但是，您需要自己跟踪喜欢的内容，以便回访用户能够与他以前喜欢的内容不同。

另外，您需要让用户[登录您的应用](https://developers.facebook.com/docs/concepts/login/permissions-login-dialog/)并询问他们的`publish_action`权限。

总而言之，如果您为应用程序这样做，它可能是值得的。对于一个您基本上希望用户喜欢文章的网站，这真的太多了。

此外，请考虑每次通过 Facebook 登录向用户请求许可时都会增加掉线率。

*如果你想看一个例子，我[最近用 open graph like button 制作了一个应用程序](https://www.facebook.com/iogo/app_481212558596438)，只需将鼠标悬停在马赛克中的一些照片上即可查看*

# java - 如何在 JFrame 中调整 JScrollPane 的大小？以及如何从 Java 中读取文件？

> ID：14801759
> 
> 赞同：0
> 
> 时间：2013-02-10T19:36:06.180
> 
> 标签：java, swing, user-interface, jscrollpane, layout-manager

我有一个歌曲库，我希望这个选择列表只在窗口的左侧，因为我想把关于歌曲的其他信息放在右侧。我不确定如何更改 的大小`JScrollPane`，它位于`JFrame`.

在这个库中，我希望能够将存储在文件中的歌曲导入到我的歌曲库中。现在，我的代码中有一个数组，但我希望能够从文本文件中读取而不是使用这种方法。在文件中，我希望能够存储有关歌曲的艺术家和专辑信息，但我不希望它显示在歌曲列表中。

```
 String songs[] = {"Song1", "Song2", "Song3", "Song4", "Song5"};
    JList list = new JList(songs);

    public SongLib(){

        JFrame songLibrary = new JFrame("Song Library");
        songLibrary.setLocationRelativeTo(null);
        songLibrary.setResizable(true);
        songLibrary.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 

        list.addListSelectionListener(new ListSelectionListener(){
            public void valueChanged(ListSelectionEvent evt){
                int i = list.getSelectedIndex();
                if (i != -1)
                    System.out.println("Selected: " + songs[i]);
                else
                    System.out.println("Choose a song");    
            }
        });

        JScrollPane JSPane = new JScrollPane(list);
        JSPane.setPreferredSize(new Dimension(100,100));
        songLibrary.add(JSPane);
        songLibrary.setSize(400,400);
        songLibrary.setVisible(true);
    }

    public static void main(String[] args){
        new SongLib();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T19:42:50.723

1.  别再打电话了（在你的余生中）`setPreferredSize()`。这意味着这个调用：`JSPane.setPreferredSize(new Dimension(100,100));`绝对应该被删除。
2.  如果您想将 2 个面板与可拖动的分隔符并排放置：使用`JSplitPane`. 如果您不想要可拖动的分隔线，请使用`JPanel`适当的`LayoutManager`(`GridBagLayout`可能是一个不错的选择)
3.  从文件中读取非常容易，只需在 SO 上进行搜索，您就会发现数百条响应。如果你想解析 csv 文件，周围有一些库可以帮助你做到这一点。最终，如果您考虑将其作为应用程序一段时间，那么有一些小型纯 Java 可嵌入数据库，它们在读取/存储/搜索信息方面会比简单的文本文件做得更好。
4.  学习 Java 命名约定并遵守它们：变量总是以小写字母开头。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T19:51:45.790

除了@Guillaume Polet 的好[建议](https://stackoverflow.com/a/14801818/230513)之外，[`setVisibleRowCount()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JList.html#getVisibleRowCount%28%29)可能对您未来有用。

![图片](../Images/7addc481bca9be1531fe4c1f6547e00b.png)

```
import java.awt.EventQueue;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JScrollPane;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;

/** @see https://stackoverflow.com/a/14801908/230513 */
public class SongLib {

    String songs[] = {"Song1", "Song2", "Song3", "Song4", "Song5"};
    JList list = new JList(songs);

    public SongLib() {

        JFrame songLibrary = new JFrame("Song Library");
        songLibrary.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        list.setVisibleRowCount(4);
        list.addListSelectionListener(new ListSelectionListener() {

            @Override
            public void valueChanged(ListSelectionEvent evt) {
                int i = list.getSelectedIndex();
                if (i != -1) {
                    System.out.println("Selected: " + songs[i]);
                } else {
                    System.out.println("Choose a song");
                }
            }
        });

        JScrollPane JSPane = new JScrollPane(list);
        songLibrary.add(JSPane);
        songLibrary.pack();
        songLibrary.setLocationRelativeTo(null);
        songLibrary.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new SongLib();
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T19:42:45.807

对于 1.，看看 Java 中的布局，尤其是 GridBagLayout。 [http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)

对于 2：读取和写入文件是通过使用 File-Objects 和 Inout/Output-Streams 进行的。但这是一种非常低级的方法。我认为您应该考虑使用 XML 文件。看看 JAXB

# iphone - 以单触模式显示视图控制器

> ID：14801761
> 
> 赞同：0
> 
> 时间：2013-02-10T19:36:14.160
> 
> 标签：iphone, ios, xamarin.ios

在我基于 Monotouch 的 iOS 项目中，我有 2 个视图控制器。在第一个 ViewController 上，我通过 xib 创建了一个按钮。现在选择此按钮时，我想显示第二个视图控制器，但它没有发生，它会导致应用程序崩溃。

所以在我的 design.cs 文件中，这是创建按钮的方式

```
[Outlet]
MonoTouch.UIKit.UIButton firstButton { get; set; }

[Action ("clickMe:")]
partial void clickMe (MonoTouch.Foundation.NSObject sender); 
```

这是在我的 .cs 文件中的按钮操作方法中，这导致了崩溃。

```
partial void clickMe (MonoTouch.Foundation.NSObject sender)

{

SecondViewController secondViewControllerObject=new SecondViewController();

this.PresentViewController(secondViewControllerObject, true, null);

} 
```

错误描述：-

执行本机代码时收到 SIGABRT。

由于未处理的异常而终止运行时

```
Unhandled Exception:
0   TestingFirstProject                 0x0008ebce mono_handle_exception_internal_first_pass + 2190
1   TestingFirstProject                 0x00090612 mono_handle_exception_internal + 1602
2   TestingFirstProject                 0x0009115f mono_handle_exception + 47
3   TestingFirstProject                 0x000d42b2 mono_x86_throw_exception + 306
4   ???                                 0x0b496f8f 0x0 + 189362063
5   TestingFirstProject                 0x00215f38 monotouch_exception_handler + 136
6   CoreFoundation                      0x013ca318 __handleUncaughtException + 728
7   libobjc.A.dylib                     0x0401d0b9 _ZL15_objc_terminatev + 86
8   libc++abi.dylib                     0x0435ea65 _ZL19safe_handler_callerPFvvE + 13
9   libc++abi.dylib                     0x0435eacd __cxa_bad_typeid + 0
10  libc++abi.dylib                     0x0435fbc2 _ZL23__gxx_exception_cleanup19_Unwind_Reason_CodeP17_Unwind_Exception + 0
11  libobjc.A.dylib                     0x0401cf89 _ZL26_objc_exception_destructorPv + 0
12  CoreFoundation                      0x013c9fb1 -[NSException raise] + 17
13  Foundation                          0x01a08711 -[NSObject(NSKeyValueCoding) setValue:forUndefinedKey:] + 282
14  Foundation                          0x01989ec8 _NSSetUsingKeyValueSetter + 140
15  Foundation                          0x019899b7 -[NSObject(NSKeyValueCoding) setValue:forKey:] + 267
16  Foundation                          0x019b4428 -[NSObject(NSKeyValueCoding) setValue:forKeyPath:] + 412
17  UIKit                               0x029410cc -[UIRuntimeOutletConnection connect] + 106
18  libobjc.A.dylib                     0x04030663 -[NSObject performSelector:] + 62
19  CoreFoundation                      0x0133c45a -[NSArray makeObjectsPerformSelector:] + 314
20  UIKit                               0x0293fbcf -[UINib instantiateWithOwner:options:] + 1327
21  UIKit                               0x02804e37 -[UIViewController _loadViewFromNibNamed:bundle:] + 280
22  UIKit                               0x02805418 -[UIViewController loadView] + 302
23  UIKit                               0x02805648 -[UIViewController loadViewIfRequired] + 73
24  UIKit                               0x02805882 -[UIViewController view] + 33
25  UIKit                               0x02811235 -[UIViewController shouldAutorotate] + 36
26  UIKit                               0x02a103d2 -[UIWindowController transition:fromViewController:toViewController:target:didEndSelector:] + 1933
27  UIKit                               0x0280e4f3 -[UIViewController presentViewController:withTransition:completion:] + 4521
28  UIKit                               0x0280e777 -[UIViewController presentViewController:animated:completion:] + 112
at (wrapper managed-to-native) MonoTouch.ObjCRuntime.Messaging.void_objc_msgSendSuper_IntPtr_bool_IntPtr (intptr,intptr,intptr,bool,intptr) <IL 0x00016, 0x00044>
at MonoTouch.UIKit.UIViewController.PresentViewController (MonoTouch.UIKit.UIViewController,bool,MonoTouch.Foundation.NSAction) [0x0006f] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIViewController.g.cs:659
at TestingFirstProject.TestingFirstProjectViewController.clickMe (MonoTouch.Foundation.NSObject) [0x00006] in /Users/rock/Desktop/Sample Project/TestingFirstProject/TestingFirstProject/TestingFirstProjectViewController.cs:41
at (wrapper runtime-invoke) <Module>.runtime_invoke_void__this___object (object,intptr,intptr,intptr) <IL 0x0004b, 0x0007d>
33  TestingFirstProject                 0x00009922 mono_jit_runtime_invoke + 722
34  TestingFirstProject                 0x0016c4ae mono_runtime_invoke + 126
35  TestingFirstProject                 0x0020f086 monotouch_trampoline + 3686
36  libobjc.A.dylib                     0x04030705 -[NSObject performSelector:withObject:withObject:] + 77
37  UIKit                               0x02727920 -[UIApplication sendAction:to:from:forEvent:] + 96
38  UIKit                               0x027278b8 -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 61
39  UIKit                               0x027e8671 -[UIControl sendAction:to:forEvent:] + 66
40  UIKit                               0x027e8bcf -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 578
41  UIKit                               0x027e7d38 -[UIControl touchesEnded:withEvent:] + 546
42  UIKit                               0x0275733f -[UIWindow _sendTouchesForEvent:] + 846
43  UIKit                               0x02757552 -[UIWindow sendEvent:] + 273
44  UIKit                               0x027353aa -[UIApplication sendEvent:] + 436
45  UIKit                               0x02726cf8 _UIApplicationHandleEvent + 9874
46  GraphicsServices                    0x04d0fdf9 _PurpleEventCallback + 339
47  GraphicsServices                    0x04d0fad0 PurpleEventCallback + 46
48  CoreFoundation                      0x012b6bf5 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 53
49  CoreFoundation                      0x012b6962 __CFRunLoopDoSource1 + 146
50  CoreFoundation                      0x012e7bb6 __CFRunLoopRun + 2118
51  CoreFoundation                      0x012e6f44 CFRunLoopRunSpecific + 276
52  CoreFoundation                      0x012e6e1b CFRunLoopRunInMode + 123
53  GraphicsServices                    0x04d0e7e3 GSEventRunModal + 88
54  GraphicsServices                    0x04d0e668 GSEventRun + 104
55  UIKit                               0x0272465c UIApplicationMain + 1211
at (wrapper managed-to-native) MonoTouch.UIKit.UIApplication.UIApplicationMain (int,string[],intptr,intptr) <IL 0x00056, 0x000a4>
at MonoTouch.UIKit.UIApplication.Main (string[],string,string) [0x0004c] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:38
at TestingFirstProject.Application.Main (string[]) [0x00000] in /Users/rock/Desktop/Sample Project/TestingFirstProject/TestingFirstProject/Main.cs:17
at (wrapper runtime-invoke) <Module>.runtime_invoke_void_object (object,intptr,intptr,intptr) <IL 0x00049, 0x00077>
60  TestingFirstProject                 0x00009922 mono_jit_runtime_invoke + 722
61  TestingFirstProject                 0x0016c4ae mono_runtime_invoke + 126
62  TestingFirstProject                 0x001706a4 mono_runtime_exec_main + 420
63  TestingFirstProject                 0x00175a95 mono_runtime_run_main + 725
64  TestingFirstProject                 0x00066e05 mono_jit_exec + 149
65  TestingFirstProject                 0x0020433d main + 2013
66  TestingFirstProject                 0x00002955 start + 53

[ERROR] FATAL UNHANDLED EXCEPTION: MonoTouch.Foundation.MonoTouchException: Objective-C exception thrown.  Name: NSUnknownKeyException Reason: [<SecondViewController 0x12a36ca0> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key butnSubmit.
  at (wrapper managed-to-native) MonoTouch.ObjCRuntime.Messaging:void_objc_msgSendSuper_IntPtr_bool_IntPtr (intptr,intptr,intptr,bool,intptr)
  at MonoTouch.UIKit.UIViewController.PresentViewController (MonoTouch.UIKit.UIViewController viewControllerToPresent, Boolean animated, MonoTouch.Foundation.NSAction completionHandler) [0x0006f] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIViewController.g.cs:659 
  at TestingFirstProject.TestingFirstProjectViewController.clickMe (MonoTouch.Foundation.NSObject sender) [0x00006] in /Users/rock/Desktop/Sample Project/TestingFirstProject/TestingFirstProject/TestingFirstProjectViewController.cs:41 
  at (wrapper managed-to-native) MonoTouch.UIKit.UIApplication:UIApplicationMain (int,string[],intptr,intptr)
  at MonoTouch.UIKit.UIApplication.Main (System.String[] args, System.String principalClassName, System.String delegateClassName) [0x0004c] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:38 
  at TestingFirstProject.Application.Main (System.String[] args) [0x00000] in /Users/rock/Desktop/Sample Project/TestingFirstProject/TestingFirstProject/Main.cs:17 
Stacktrace:

Native stacktrace:

    0   TestingFirstProject                 0x0009148c mono_handle_native_sigsegv + 284
    1   TestingFirstProject                 0x000d769d sigabrt_signal_handler + 109
    2   libsystem_c.dylib                   0x9a4c386b _sigtramp + 43
    3   ???                                 0xffffffff 0x0 + 4294967295
    4   libsystem_sim_c.dylib               0x041e057b abort + 140
    5   TestingFirstProject                 0x001ea3fd monoeg_g_logv + 157
    6   TestingFirstProject                 0x001ea42b monoeg_assertion_message + 43
    7   TestingFirstProject                 0x00215e5f monotouch_unhandled_exception_handler + 159
    8   TestingFirstProject                 0x0008cefc mono_invoke_unhandled_exception_hook + 140
    9   TestingFirstProject                 0x0009100a mono_handle_exception_internal + 4154
    10  TestingFirstProject                 0x0009115f mono_handle_exception + 47
    11  TestingFirstProject                 0x000d42b2 mono_x86_throw_exception + 306
    12  ???                                 0x0b496f8f 0x0 + 189362063
    13  TestingFirstProject                 0x00215f38 monotouch_exception_handler + 136
    14  CoreFoundation                      0x013ca318 __handleUncaughtException + 728
    15  libobjc.A.dylib                     0x0401d0b9 _ZL15_objc_terminatev + 86
    16  libc++abi.dylib                     0x0435ea65 _ZL19safe_handler_callerPFvvE + 13
    17  libc++abi.dylib                     0x0435eacd __cxa_bad_typeid + 0
    18  libc++abi.dylib                     0x0435fbc2 _ZL23__gxx_exception_cleanup19_Unwind_Reason_CodeP17_Unwind_Exception + 0
    19  libobjc.A.dylib                     0x0401cf89 _ZL26_objc_exception_destructorPv + 0
    20  CoreFoundation                      0x013c9fb1 -[NSException raise] + 17
    21  Foundation                          0x01a08711 -[NSObject(NSKeyValueCoding) setValue:forUndefinedKey:] + 282
    22  Foundation                          0x01989ec8 _NSSetUsingKeyValueSetter + 140
    23  Foundation                          0x019899b7 -[NSObject(NSKeyValueCoding) setValue:forKey:] + 267
    24  Foundation                          0x019b4428 -[NSObject(NSKeyValueCoding) setValue:forKeyPath:] + 412
    25  UIKit                               0x029410cc -[UIRuntimeOutletConnection connect] + 106
    26  libobjc.A.dylib                     0x04030663 -[NSObject performSelector:] + 62
    27  CoreFoundation                      0x0133c45a -[NSArray makeObjectsPerformSelector:] + 314
    28  UIKit                               0x0293fbcf -[UINib instantiateWithOwner:options:] + 1327
    29  UIKit                               0x02804e37 -[UIViewController _loadViewFromNibNamed:bundle:] + 280
    30  UIKit                               0x02805418 -[UIViewController loadView] + 302
    31  UIKit                               0x02805648 -[UIViewController loadViewIfRequired] + 73
    32  UIKit                               0x02805882 -[UIViewController view] + 33
    33  UIKit                               0x02811235 -[UIViewController shouldAutorotate] + 36
    34  UIKit                               0x02a103d2 -[UIWindowController transition:fromViewController:toViewController:target:didEndSelector:] + 1933
    35  UIKit                               0x0280e4f3 -[UIViewController presentViewController:withTransition:completion:] + 4521
    36  UIKit                               0x0280e777 -[UIViewController presentViewController:animated:completion:] + 112
    37  ???                                 0x129333bc 0x0 + 311636924
    38  ???                                 0x12933118 0x0 + 311636248
    39  ???                                 0x12932ff5 0x0 + 311635957
    40  ???                                 0x12931ff5 0x0 + 311631861
    41  TestingFirstProject                 0x00009922 mono_jit_runtime_invoke + 722
    42  TestingFirstProject                 0x0016c4ae mono_runtime_invoke + 126
    43  TestingFirstProject                 0x0020f086 monotouch_trampoline + 3686
    44  libobjc.A.dylib                     0x04030705 -[NSObject performSelector:withObject:withObject:] + 77
    45  UIKit                               0x02727920 -[UIApplication sendAction:to:from:forEvent:] + 96
    46  UIKit                               0x027278b8 -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 61
    47  UIKit                               0x027e8671 -[UIControl sendAction:to:forEvent:] + 66
    48  UIKit                               0x027e8bcf -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 578
    49  UIKit                               0x027e7d38 -[UIControl touchesEnded:withEvent:] + 546
    50  UIKit                               0x0275733f -[UIWindow _sendTouchesForEvent:] + 846
    51  UIKit                               0x02757552 -[UIWindow sendEvent:] + 273
    52  UIKit                               0x027353aa -[UIApplication sendEvent:] + 436
    53  UIKit                               0x02726cf8 _UIApplicationHandleEvent + 9874
    54  GraphicsServices                    0x04d0fdf9 _PurpleEventCallback + 339
    55  GraphicsServices                    0x04d0fad0 PurpleEventCallback + 46
    56  CoreFoundation                      0x012b6bf5 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 53
    57  CoreFoundation                      0x012b6962 __CFRunLoopDoSource1 + 146
    58  CoreFoundation                      0x012e7bb6 __CFRunLoopRun + 2118
    59  CoreFoundation                      0x012e6f44 CFRunLoopRunSpecific + 276
    60  CoreFoundation                      0x012e6e1b CFRunLoopRunInMode + 123
    61  GraphicsServices                    0x04d0e7e3 GSEventRunModal + 88
    62  GraphicsServices                    0x04d0e668 GSEventRun + 104
    63  UIKit                               0x0272465c UIApplicationMain + 1211
    64  ???                                 0x0e9ccd74 0x0 + 245157236
    65  ???                                 0x0e9cb3e8 0x0 + 245150696
    66  ???                                 0x0e9cabe8 0x0 + 245148648
    67  ???                                 0x0e9cac77 0x0 + 245148791
    68  TestingFirstProject                 0x00009922 mono_jit_runtime_invoke + 722
    69  TestingFirstProject                 0x0016c4ae mono_runtime_invoke + 126
    70  TestingFirstProject                 0x001706a4 mono_runtime_exec_main + 420
    71  TestingFirstProject                 0x00175a95 mono_runtime_run_main + 725
    72  TestingFirstProject                 0x00066e05 mono_jit_exec + 149
    73  TestingFirstProject                 0x0020433d main + 2013
    74  TestingFirstProject                 0x00002955 start + 53

=================================================================
Got a SIGABRT while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries 
used by your application.
================================================================= 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:56:10.300

您的例外中的关键信息是：

> 此类与键 butnSubmit 的键值编码不兼容

这意味着您的 C# 类上有一个属性，该属性在 .xib（接口构建器）文件中没有相应的出口。

重新检查/重新创建您的网点，看看是否能解决问题。

# html - Boostrap 2 中的网格系统顺序

> ID：14801767
> 
> 赞同：0
> 
> 时间：2013-02-10T19:37:06.327
> 
> 标签：html, css, twitter-bootstrap

我对 Bootstrap 2的[网格系统有疑问。](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)

我想用一些文本制作一个标题，并在它的右侧制作一个图像。
因此我做了一个, 并在里面`row`放了 a`span8`和 a 。`span4`

但是，当窗口太小而无法并排显示内容时，我希望`span4`div 位于 div 之前`span8`。

```
<div class="hero-unit">
    <div class="container">
        <div class="row">
            <div class="span8">
                This is some text
            </div>
            <div class="span4">
                <img src="image.png" alt="" />
            </div>
        </div>
    </div>
</div> 
```

* * *

我怎样才能做到这一点？
所以换句话说，我怎样才能改变`div`s 的顺序。

如果我没有完全弄错，文档中没有描述这样的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T19:46:58.537

您可以使用媒体查询和浮动来做到这一点。

应该看起来像这样：

```
<div class="span4 pull-right"><!-- Image here --></div>
<div class="span8"><!-- Text here --></div> 
```

现在您应该使用媒体查询（如 responsive.less 文件中所示）在屏幕尺寸跳到特定标记以下时进行切换。然后确保`span4`' 的浮动已删除。您可能需要使用`.row-fluid`而不是通常`.row`使用并使用自己的填充以使其看起来很棒。

# php - 服务器端 SQL 包括

> ID：14801768
> 
> 赞同：0
> 
> 时间：2013-02-10T19:37:11.413
> 
> 标签：php, mysql, performance, include

这是这个问题[服务器端SQL库的php版本](https://stackoverflow.com/questions/14618438/server-side-sql-library)

是否有可以将 sql 分解为完全服务器端逻辑的库？

作为一个例子，考虑这个基本查询`SELECT table1column1, table2column1 FROM table1, table2 WHERE table1.id = 1 AND table2.table1id = table1.id;`，它比将两者`SELECT`分解成 2 `SELECT`s`SELECT`慢约 5 倍`PRIMARY`，假设`table2.table1id`不是`PRIMARY`.

我想要一个库，在这种情况下，它就是这样做的，将单个查询分成两个。它不必解析 sql 来理解一个人想要什么，而最好采用这种格式`basicJoin($table1columnsList, $table2columnsList, $table1name, $table2name, $table1id, $table2table1idColumnName)`。

这个函数将

1.  `SELECT``table1`基于`$table1id`( `PRIMARY`)指定到数组中的列
2.  `SELECT`所有`table2`id ( `table2`'s `PRIMARY`) 和`table1id`s 放入一个数组并找到正确的`table2`id
3.  将`table2`上面的 id 用于指定到数组（或数组中）`SELECT`的列`table2``table1`

在 php 中处理我的逻辑只大大减少了处理延迟和处理延迟峰值，但是写出所有这些逻辑很乏味。

它已经存在了吗？如果有，在哪里？

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:45:30.333

如果您喜欢 OOP，那么 Propel - [http://propelorm.org/](http://propelorm.org/)它会处理所有逻辑并为您提供类似`joinWith()`和`getThis()`、、、`setThat()`等方法`save()`。

看来 Propel 确实将查询分开，以便它可以提供可以单独保存的多个对象。

# sql - 如何进行查询的这种实现

> ID：14801769
> 
> 赞同：0
> 
> 时间：2013-02-10T19:37:14.330
> 
> 标签：sql, sql-server

我的数据库表如下

```
CREATE TABLE [dbo].[vProduct](
[nId] [int] NOT NULL, //Primary key
[sName] [varchar](255) NULL

  )

CREATE TABLE [dbo].[vProductLanguage](
[kProduct] [int] NOT NULL,
[kLanguage] [int] NOT NULL  //Foriegn key to table vLanguage
 ) 

CREATE TABLE [dbo].[vLanguage](
[nId] [int] NOT NULL, //Primary key
[sName] [varchar](50) NULL,
[language] [char](2) NULL
  ) 
```

表 vProduct 与 vProduct.nId = vProductLanguage.kLanguage 上的 vProductLanguage 有关系

表 vProductLanguage 与 vProductLanguage.kLanguage = vLanguage.nid 上的 vLanguage 有关系

所以它像表 vProductLanguage 将有正在选择的语言

行将如下图所示

```
Table vProduct 
```

![v产品](../Images/3e4f9ddd1cae7d0521434cc836b2af9b.png)

```
Table vProductLanguage 
```

![vProductLanguage](../Images/c1255f95f28cee51a4579f1919c979a2.png)

```
Table vLanguage 
```

![v语言](../Images/a2904084a46cbfecf4337d46a694c3ae.png)

我想要的是从表 vLanguage 中选择所有语言并从表 vProductLanguage 中选择语言。这将与表 vProduct 相关联。我尝试了以下查询，但它只返回与产品相关的语言。

```
select * from 
      vProductLanguage 
           left join vLanguage on vProductLanguage.kLanguage = vLanguage.nId
       left join vProduct on vProductLanguage.kProduct = vProduct.nId
Where vProduct.nId = 1 
```

我想从表 vLanguage 和表 vProductLanguage 中选择所有行。

希望我把我的问题说清楚了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:44:27.227

听起来您想先从`JOIN`表格`vLanguage`开始：

```
select *
from vLanguage l
left join vProductLanguage pl
  on l.nid = pl.kLanguage
left join vProduct p
  on pl.kProduct = p.nid
  and p.nid = 1 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/26ef8/3)。

这将返回表中的所有行以及`vLanguage`表中的任何匹配行`vProductLanguage`。.

如果您有多个，`vProduct`则可以将查询稍微重写为：

```
select *
from vLanguage l
left join
(
  select pl.kLanguage, 
    p.nid,
    p.sName
  from vProductLanguage pl
  left join vProduct p
    on pl.kProduct = p.nid
  where p.nid = 1
) p
  on l.nid = p.kLanguage 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/3a5045/3)

# css - 2 级嵌套 CSS 选择器

> ID：14801775
> 
> 赞同：1
> 
> 时间：2013-02-10T19:37:45.473
> 
> 标签：css, selector

我知道我们可以在 CSS 中做到这一点：

```
div.className p
{
/* some style*/
} 
```

但是我们该怎么做

```
div.className p span
{
/* some style */
} 
```

像这样引用 HTML 中的跨度：

```
<div class='className'>
   <p>  <span> Some text </span> </p>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:43:30.253

您的选择器在技术上没有问题。我建议在不需要时不要包含标签名称，如[Google HTML/CSS Style Guide](http://google-styleguide.googlecode.com/svn/trunk/htmlcssguide.xml?showone=Type_selectors#Type_selectors)所述。

通过使用 Chrome 的检查器检查元素，很容易掌握选择器的工作原理。提供了完整的选择器路径，如下所示：

![在此处输入图像描述](../Images/4d37b1110ac774881400427cbfaa5d3b.png)

# webdriver - 如何在 Selenium2 Grid Hub 上运行第二个浏览器

> ID：14801776
> 
> 赞同：0
> 
> 时间：2013-02-10T19:37:48.787
> 
> 标签：webdriver, selenium-rc, selenium-webdriver, gradle

我设法让 Selenium Grid Hub 在我的代码中运行（使用 Groovy/Gradle 构建系统），并从 .json 配置文件加载配置，当我运行测试时它只运行一个线程。我将我的网格服务器配置为最多 2 个会话。如何让我的单元测试（或网格）实际启动第二个浏览器？我在 Selenium 网站和 Google 上到处查看，但每个人都没有提到如何去做，好像这是每个人都已经知道的事情。我在这里错过了什么吗？

这是我的集线器和节点的配置文件： [https ://github.com/djangofan/WebDriverTestingTemplate/tree/master/root](https://github.com/djangofan/WebDriverTestingTemplate/tree/master/root)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:29:07.317

您正在寻找[DesiredCapabilities](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/remote/DesiredCapabilities.html)。

在java中你会写这样的东西：

```
DesiredCapabilities capabilities = DesiredCapabilities.chrome();
RemoteWebDriver driver = new RemoteWebDriver(yourGridUrl, capabilities); 
```

这将在您的网格上启动 chrome 浏览器。

# python - django 错误：配置不当：WSGI 应用程序

> ID：14801778
> 
> 赞同：7
> 
> 时间：2013-02-10T19:37:58.270
> 
> 标签：python, django, wsgi, django-middleware

我的应用程序昨晚工作，不知道为什么今天早上它不能工作。我认为我所做的只是创建一个应用程序`django`来存储我的模型、测试和视图。

出现此错误，在 OS X 上使用 Heroku Postgres 应用程序运行 django，并将 dj_database 作为中间件：

```
 File "/Users/{ME}/Projects/{PROJECT}/{PROJECT}/lib/python2.7/site-packages/django/core/servers/basehttp.py", line 58, in get_internal_wsgi_application
    "could not import module '%s': %s" % (app_path, module_name, e)) django.core.exceptions.ImproperlyConfigured: WSGI application
'{PROJECT}.wsgi.application' could not be loaded; could not import module
'{PROJECT}.wsgi': No module named core.wsgi 
```

`wsgi.py`我的文件的相关部分：

```
"""
WSGI config for {PROJECT} project.

This module contains the WSGI application used by Django's development
server and any production WSGI deployments. It should expose a
module-level variable named ``application``. Django's ``runserver``
and ``runfcgi`` commands discover this application via the
``WSGI_APPLICATION`` setting.

Usually you will have the standard Django WSGI application here, but
it also might make sense to replace the whole Django WSGI application
with a custom one that later delegates to the Django one. For example,
you could introduce WSGI middleware here, or combine a Django
application with an application of another framework.

"""
import os

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "do.settings")

# This application object is used by any WSGI server configured to use this
# file. This includes Django's development server, if the WSGI_APPLICATION
# setting points here.
from django.core.wsgi import get_wsgi_application
application = get_wsgi_application()

# Apply WSGI middleware here.
# from helloworld.wsgi import HelloWorldApplication
# application = HelloWorldApplication(application) 
```

`settings.py`我文件的相关（我认为）部分：

```
WSGI_APPLICATION = '{PROJECT}.wsgi.application'

# ...

import dj_database_url
DATABASES['default'] = dj_database_url.config(default='sqlite://db/sqlite3.db') 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T19:40:18.667

创建一个名为的应用程序`django`意味着任何`from django import X`人都将查看您的应用程序，而不是`django`框架。

在这种情况下，该软件正在尝试导入[`django.core.wsgi`](https://github.com/django/django/blob/master/django/core/wsgi.py)，但它现在正在您的应用程序代码中查找此文件，但找不到该文件；因此错误：`No module named core.wsgi`

* * *

**给你的应用取另一个名字。**

您必须重命名包含您的应用程序的文件夹，`INSTALLED_APPS`以及`settings.py`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-26T19:41:09.777

来自 Django[文档](https://docs.djangoproject.com/en/1.8/intro/tutorial01/)：

> 您需要避免在内置 Python 或 Django 组件之后命名项目。特别是，这意味着您应该避免使用像**django**（这将与 Django 本身冲突）或**test**（与内置 Python 包冲突）之类的名称。

# visual-studio - InteropForms Toolkit 2.1 是否适用于 Visual Studio 2012？

> ID：14801784
> 
> 赞同：2
> 
> 时间：2013-02-10T19:38:56.573
> 
> 标签：visual-studio, vb6, interop, vb6-migration, winforms-interop

我有一个 VB6 项目，我想最终升级到其他项目。为此，我想开始使用 InteropForms Toolkit 2.1，但页面声明安装程序仅适用于 VS2008 和 VS2010。

有没有办法在VS2012中使用工具包？如果是这样，有人成功了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-11T17:10:52.067

使 Interop Toolkit 2.1 与 Visual Studio 2012 一起工作的步骤（已修改早期响应）

1.  修改`InteropFormProxyGenerator.AddIn`以下文件夹中的文件：`C:\Program Files (x86)\Microsoft Visual Basic Power Packs\Interop Forms Toolkit 2.1\Setup\User`

2.  添加以下内容：

    `<HostApplication> <Name>Microsoft Visual Studio</Name> <Version>11.0</Version> </HostApplication>`

3.  复制文件`Documents\Visual Studio 2012\Addins`夹中的文件

4.  复制（合并）`Documents\Visual Studio 2010\Templates\ItemTemplates\Visual Basic\*.*`到`Documents\Visual Studio 2012\Templates\ItemTemplates\Visual Basic\`

    和

    复制（合并）`Documents\Visual Studio 2010\Templates\ProjectTemplates\Visual Basic\Windows\*.*`到`Documents\Visual Studio 2012\Templates\ProjectTemplates\Visual Basic\Windows`

注意：文档可能是 MyDocuments

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T05:54:58.247

互操作表单工具包在 VS2010 中有效，在 VS2012 中无效。

我已经安装了包含在 VS2010 中创建的互操作用户控件的 VS2010 和 VS2012 项目，您可以在 VS2012 中使用和修改为了在现有项目中添加新控件，我使用 vs2012，我正在复制/粘贴旧控件并更改用于 com 注册的 GUID .

但也许有人有更好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T13:13:36.897

我在 VS 2010 中尝试过，它可以工作。不过它需要 Net 2.0，而我们在 Net 4.x 中进行开发。为了避免兼容性和部署问题，我们当时放弃了 InteropForms Toolkit。我发现当您只想使用混合的 VB6 和 Net4 表单时，您实际上并不需要它。对于用户控件，这可能是另一回事，但我们不会交互使用它们 :-)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-10-07T22:06:58.033

`Interop Toolkit 2.1`使用 Visual Studio 2012 的步骤

1.  修改以下文件夹中的“InteropFormProxyGenerator.AddIn”文件：C:\Program Files (x86)\Microsoft Visual Basic Power Packs\Interop Forms Toolkit 2.1\Setup\User

2.  添加以下内容：

<HostApplication> <Name>Microsoft Visual Studio</Name> <Version >11.0</Version> </HostApplication>

3.  将文件复制到“Doc​​uments\Visual Studio 2012\Addins”文件夹中

4.  复制 `Documents\Visual Studio 2010\Templates\ItemTemplates\Visual Basic\*.*` 到 `Documents\Visual Studio 2010\Templates\ItemTemplates\Visual Basic\`

    和

    复制 `Documents\Visual Studio 2010\Templates\ProjectTemplates\Visual Basic\Windows\*.*` 到 `Documents\Visual Studio 2012\Templates\ProjectTemplates\Visual Basic\Windows`

# c++ - 输出所需的列数

> ID：14801786
> 
> 赞同：0
> 
> 时间：2013-02-10T19:39:07.030
> 
> 标签：c++, formatting, format, multiple-columns

我想获得一些关于如何让我的程序输出用户所需数量的列的提示。例如，如果用户为 termsPerLine 输入 2，那么程序应该在两列中打印由 Juggler 系列生成的值，或者如果用户为 termsPerLine 输入 3，则为 3 列，依此类推。输出变量是 firstTerm。任何帮助都会很棒。

```
#include <string>
#include <iostream>
#include <cmath>
#include <iomanip>

using namespace std;

int ValidateInput(string Prompt);

int main()
{
    int count;
    double Odd;
    double Even;
    long long int firstTerm;
    int noOfTerms;
    int termsPerLine;

    cout << "Program will determine the terms in a Juggler Series" << endl << endl;

    firstTerm = ValidateInput("Enter the first term: ");

    noOfTerms = ValidateInput("Enter the number of terms to calculate (after first): ");

    termsPerLine = ValidateInput("Enter the terms to display per line: ");

    cout << "First " << noOfTerms << " terms of JUGGLER SERIES starting with " << firstTerm << endl;

    count = 1;

    do
    {
        if (firstTerm % 2 == 0 )
        {
            firstTerm = pow(firstTerm , 0.5);
            cout << setw(16) << firstTerm << endl;
            count++;
        }
        if (firstTerm % 2 != 0 )
        {
            firstTerm = pow(firstTerm, 1.5);
            cout << setw(16) << firstTerm << endl;
            count++;
        }
    }
    while (count <= noOfTerms);

    cout << endl;
    system("Pause");
    return 0;
}

int ValidateInput( string Prompt)
{
    int num;
    cout << Prompt << endl;
    cin >> num;

    while ( num <= 0 )
    {      
        cout << "Enter a positive number" << endl;
        cin >> num;
    } 

    return num;  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:45:01.777

在循环顶部试试这个：

```
if ((count % termsPerLine) == 0)
{
    cout << "\n";
} 
```

或者在循环的底部：

```
if ((count % termsPerLine) == termsPerLine)
{
    cout << "\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-16T04:20:31.517

只需将您的循环修复为：

```
for (count = 1; count <= numOfTerm; count++)
{

if(firstTerm % 2 == 0)
    firstTerm = pow(firstTerm, 0.5);                        
else
    firstTerm = pow(firstTerm, 1.5);

if(count % termPerLine != 0)
    cout << setw(15) << firstTerm;
else
    cout << setw(15) << firstTerm <<  endl;

}; 
```

# phpunit - ZF2 单元测试认证

> ID：14801787
> 
> 赞同：23
> 
> 时间：2013-02-10T19:39:09.077
> 
> 标签：phpunit, zend-framework2, zfcuser

我正在学习单元测试，并试图解决以下问题：

```
Zend\ServiceManager\ServiceManager::get was unable to fetch or create an instance for zfcUserAuthentication 
```

...使用在以下给出的唯一答案：

[使用 ZfcUser 的控制器的简单 ZF2 单元测试](https://stackoverflow.com/questions/14354456/simple-zf2-unit-tests-for-a-controller-using-zfcuser)

所以我的 setUp 函数看起来是一样的。不幸的是，我收到错误消息：

```
Zend\Mvc\Exception\InvalidPluginException: Plugin of type Mock_ZfcUserAuthentication_868bf824 is invalid; must implement Zend\Mvc\Controller\Plugin\PluginInterface 
```

这是在这部分代码引起的（在我的代码中以相同的方式拆分）：

```
$this -> controller->getPluginManager()
->setService('zfcUserAuthentication', $authMock); // Error refers to this line. 
```

$authMock 对象显然没有实现插件接口，我需要实现它才能传递给 setService。

$authMock 不打算在单元测试中使用吗？我应该使用不同的（面向单元测试的）setService 方法吗？

我需要一种方法来处理登录到我的应用程序，否则我的单元测试毫无意义。

感谢您的任何建议。

=== 编辑 (11/02/2013) ===

我想把重点放在这部分进行澄清，因为我认为这是问题区域：

```
// Getting mock of authentication object, which is used as a plugin.
$authMock = $this->getMock('ZfcUser\Controller\Plugin\ZfcUserAuthentication');

// Some expectations of the authentication service.
$authMock   -> expects($this->any())
    -> method('hasIdentity')
    -> will($this->returnValue(true));  

$authMock   -> expects($this->any())
    -> method('getIdentity')
    -> will($this->returnValue($ZfcUserMock));

// At this point, PluginManager disallows mock being assigned as plugin because 
// it will not implement plugin interface, as mentioned.
$this -> controller->getPluginManager()
->setService('zfcUserAuthentication', $authMock); 
```

如果模拟没有处理必要的实现，我还能假装登录吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-15T14:54:26.710

您的名称间距或自动加载器有问题。

创建模拟时，`ZfcUser\Controller\Plugin\ZfcUserAuthentication`找不到的类定义。所以 PHPUnit 创建了一个模拟，它只为你的测试扩展这个类。如果该类可用，那么 PHPUnit 将在制作其模拟时使用实际类来扩展，然后将使用父类/接口。

你可以在这里看到这个逻辑：[https ://github.com/sebastianbergmann/phpunit-mock-objects/blob/master/PHPUnit/Framework/MockObject/Generator.php](https://github.com/sebastianbergmann/phpunit-mock-objects/blob/master/PHPUnit/Framework/MockObject/Generator.php)

```
 if (!class_exists($mockClassName['fullClassName'], $callAutoload) &&
        !interface_exists($mockClassName['fullClassName'], $callAutoload)) {
        $prologue = 'class ' . $mockClassName['originalClassName'] . "\n{\n}\n\n";

        if (!empty($mockClassName['namespaceName'])) {
            $prologue = 'namespace ' . $mockClassName['namespaceName'] .
                        " {\n\n" . $prologue . "}\n\n" .
                        "namespace {\n\n";

            $epilogue = "\n\n}";
        }

        $cloneTemplate = new Text_Template(
          $templateDir . 'mocked_clone.tpl'
        ); 
```

所以如果没有类或接口，PHPUnit实际上会自己创建一个，这样mock就会满足原始类名的类型提示。但是，不会包含任何父类或接口，因为 PHPUnit 不知道它们。

这可能是由于您的测试中没有包含正确的命名空间或您的自动加载器出现问题。如果不实际查看整个测试文件，很难判断。

* * *

`ZfcUser\Controller\Plugin\ZfcUserAuthentication`或者，您可以在测试中模拟`Zend\Mvc\Controller\Plugin\PluginInterface`并将其传递给插件管理器，而不是 mocking 。尽管如果您在代码中对插件进行类型提示，您的测试仍然无法正常工作。

```
//Mock the plugin interface for checking authorization
$authMock = $this->getMock('Zend\Mvc\Controller\Plugin\PluginInterface');

// Some expectations of the authentication service.
$authMock   -> expects($this->any())
    -> method('hasIdentity')
    -> will($this->returnValue(true));  

$authMock   -> expects($this->any())
    -> method('getIdentity')
    -> will($this->returnValue($ZfcUserMock));

$this -> controller->getPluginManager()
->setService('zfcUserAuthentication', $authMock); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-07T15:53:18.217

我刚刚为 FlashMessenger 插件做了一个示例。您应该只使用 ControllerPluginManager 来覆盖 ControllerPlugin。确保您的应用程序引导调用*setApplicationConfig()*；

```
<?php
namespace SimpleTest\Controller;

use Zend\Test\PHPUnit\Controller\AbstractHttpControllerTestCase;

class SimpleControllerTest extends AbstractHttpControllerTestCase {

  public function testControllerWillAddErrorMessageToFlashMessenger()
  {
      $flashMessengerMock = $this->getMockBuilder('\Zend\Mvc\Controller\Plugin\FlashMessenger', array('addErrorMessage'))->getMock();
      $flashMessengerMock->expects($this->once())
          ->method('addErrorMessage')
          ->will($this->returnValue(array()));

      $serviceManager = $this->getApplicationServiceLocator();
      $serviceManager->setAllowOverride(true);
      $serviceManager->get('ControllerPluginManager')->setService('flashMessenger', $flashMessengerMock);

      $this->dispatch('/error/message');

  }
}?> 
```

# css - 容器 DIV 不垂直包装

> ID：14801793
> 
> 赞同：0
> 
> 时间：2013-02-10T19:39:43.460
> 
> 标签：css, html, word-wrap

我意识到可能已经有数以千计的问题与此相关，但我浏览了其中的许多问题并没有提出令人满意的解决方案。如果有人能对我应该做什么提供一些见解，我将不胜感激。URL 是[http://www.ouranthology.com](http://www.ouranthology.com)（索引页）
如您所见，内容完全流过白色背景。我尝试将 float:right 和 clear:both 添加到相应的部分，但无济于事。所以现在编码又回到了它开始的地方，大量的 < P > 标签创建了空白。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T20:03:10.417

这是风格造成的

```
.post {
  position: absolute;
  top: 590px;
  font-family: Georgia, "Times New Roman", Serif;
} 
```

绝对定位将块从流中取出，因此它的父级不会将其视为子级进行渲染。将其更改为 position:relative 将解决您问题中的问题。

更进一步，尽量不要使用像素定位（top:590px;），你应该能够通过使用正常的流定位来获得你想要的外观。这使您的布局对更改更具弹性。

而且你的结构看起来很奇怪。我懂了

```
<div class="container">
  <div class="content">
    <div class="post">
      <div class="post-title"></div>
      <div class="post-author"></div>
      <div class="post-excerp"></div>

      <div class="post-title"></div>
      <div class="post-author"></div>
      <div class="post-excerp"></div>

      <div class="post-title"></div>
      <div class="post-author"></div>
      <div class="post-excerp"></div> 
```

我会预料到的

```
<div class="container">
  <div class="content">
    <div class="post">
      <div class="post-title"></div>
      <div class="post-author"></div>
      <div class="post-excerp"></div>
    </div>

    <div class="post">
      <div class="post-title"></div>
      <div class="post-author"></div>
      <div class="post-excerp"></div>
    </div>

    <div class="post">
      <div class="post-title"></div>
      <div class="post-author"></div>
      <div class="post-excerp"></div>
    </div> 
```

甚至

```
<div class="container">
  <div class="content">
    <article class="post">
      <div class="post-title"></div>
      <div class="post-author"></div>
      <div class="post-excerp"></div>
    </article>

    <article class="post">
      <div class="post-title"></div>
      <div class="post-author"></div>
      <div class="post-excerp"></div>
    </article>

    <article class="post">
      <div class="post-title"></div>
      <div class="post-author"></div>
      <div class="post-excerp"></div>
    </article> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T19:48:08.310

如果您希望根据帖子的白色背景更长然后在课堂上
尝试 。`Position:Relative``post`

# javascript - 选择节点时展开 div

> ID：14801795
> 
> 赞同：0
> 
> 时间：2013-02-10T19:39:54.083
> 
> 标签：javascript, jsf, jsf-2, primefaces

我有一个基本的 p:tree 可以可视化数据库中的组件。我想以这种方式扩展树： ![在此处输入图像描述](../Images/b8fe04d54dc83b6fe9dbb226d143394f.png)

当我选择一个节点时，我想打开组件下方的 div 层并将附加数据显示为该组件作为图片。到目前为止，我制作了这个 JSF 代码：

```
<h:form>
    <p:growl id="growl1" showSummary="true" showDetail="true" cached="true" autoUpdate="true"/>
    <p:tree id="tree" styleClass="treeskin" value="#{TreeViewController.root}" var="node" dynamic="true" animate="true"
            selectionMode="single"  selection="#{TreeViewController.selectedNode}" highlight="true">

        <p:ajax event="select" listener="#{TreeViewController.onNodeSelect}"/>
        <p:ajax event="expand" listener="#{TreeViewController.onNodeExpand}" />
        <p:ajax event="collapse" listener="#{TreeViewController.onNodeCollapse}" />

        <p:treeNode styleClass="treeskin">
            <h:outputText value="#{node}"/>
        </p:treeNode>
    </p:tree>

</h:form> 
```

这可能吗？

# wordpress - .htaccess 重定向在 Apache 上的 WordPress 3.5.1 中不起作用

> ID：14801797
> 
> 赞同：1
> 
> 时间：2013-02-10T19:39:58.513
> 
> 标签：wordpress, apache, .htaccess, seo, canonical-link

我正在尝试解决 WordPress 3.5.1 的规范问题

[http://www.whatisanaddiction.com/index.php](http://www.whatisanaddiction.com/index.php) 需要重定向到 [http://www.whatisanaddiction.com/](http://www.whatisanaddiction.com/) 所以我不会遇到搜索引擎重复的内容问题。

我不太清楚需要在 .htaccess 中使用的代码，但在将 WordPress 的代码插入 .htaccess 之前，我从来没有遇到过问题。

我尝试了各种变体，许多变体导致整个网站出现“服务器错误”。

这是我到目前为止所得到的，但它仍然没有正确重定向 index.php 版本。

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]

RewriteCond %{THE_REQUEST} ^.*\/index\.php\ HTTP/
RewriteRule ^(.*)index\.php$ /$1 [R=301,L]
    # always www
RewriteCond %{HTTP_HOST} !^www\.whatisanaddiction\.com$ [NC]
RewriteRule ^(.*)$ http://www.whatisanaddiction.com/$1 [L,R=301]

</IfModule>

# END WordPress

Redirect 301 http://www.whatisanaddiction.com/index.php http://www.whatisanaddiction.com/ 
```

...我看到各种各样的人在网上问这个问题，但到目前为止还没有“有效”的解决方案。也许我没有在寻找正确的条款？？？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T23:59:25.243

Ok for some strange reason the sample I used above just started working... weird, maybe the server needed some time to "think about it." ??? weird.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T23:31:03.337

您的 301 重定向参数不正确。您要重定向的页面上不应包含域名。试试这个。

```
Redirect 301 /index.php http://www.whatisanaddiction.com/ 
```

# java - java小程序的错误

> ID：14801800
> 
> 赞同：-6
> 
> 时间：2013-02-10T19:40:18.527
> 
> 标签：java, applet, tic-tac-toe

我收到无法修复的错误。我在这些行中收到大约 8 个错误：

```
 if (weight [1] + weight[4] + weight[7] == twoWeights){
        if(weight[1]==0){
            return 1;

        else if (weight [4] == 0)
            return 4;

        else 
            return 7;

    }
    if (weight [2] + weight[5] + weight[8] == twoWeights){
        if(weight[2]==0)
            return 2;

        else if (weight [5] == 0)
            return 5;

        else 
            return 8;

    }
    if (weight [0] + weight[4] + weight[8] == twoWeights){
        if(weight[0]==0)
            return 0;

        else if (weight [4] == 0)
            return 4;

        else 
            return 8;

    }                       
    if (weight [2] + weight[4] + weight[6] == twoWeights){
        if(weight[2]==0)
            return 2;

        else if (weight [4] == 0)
            return 4;

        else 
            return 6;

    }                       
    return -1;
}

int getRandomSquare(){
    boolean gotEmptySquare = false;
    int selectedSquare = -1;

    do {
        selectedSquare = (int) (Math.random() * 9);
        if (squares[selectedSquare].getLabel().equals("")){
            gotEmptySquare = true;
        }
    }
    while (!gotEmptySquare);
        return selectedSquare;
    }
    void highlightWinner(int win1; int win2; int win3) {
        squares [win1].setBackground(Color.CYAN);
        squares [win2].setBackground(Color.CYAN);
        squares [win3].setBackground(Color.CYAN);
    }
    void endTheGame (){
        newGameButton.setEnabled(true);
        for(int i=0;i<9;i++){
            squares[i].setEnabled(false);
        }
    }
} 
```

}

错误是：

> TicTacToe.java:213: 'else' 没有 'if' else if (weight [4] == 0) ^
> 
> TicTacToe.java:256: ';' 预期 int getRandomSquare(){ ^
> 
> TicTacToe.java:269: 非法开始表达式 void highlightWinner(int win1; int win2; int win3) { ^
> 
> TicTacToe.java:269: ';' 预期 void highlightWinner(int win1; int win2; int win3) { ^
> 
> TicTacToe.java:269: ';' 预期 void highlightWinner(int win1; int win2; int win3) { ^
> 
> TicTacToe.java:274: 非法的表达式开头 void endTheGame (){ ^
> 
> TicTacToe.java:274: ';' 预期无效 endTheGame (){ ^

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T19:44:13.250

上面代码的第二行多了一个`{`

更改`if(weight[1]==0){`为`if(weight[1]==0)`，因为您没有关闭左大括号。如果您在进行此更改后仍然看到错误，请举起整个班级。我怀疑您没有正确打开或关闭牙套。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T19:44:15.560

```
if(weight[1]==0){
    return 1;

else if (weight [4] == 0)
    return 4; 
```

您需要先关闭大括号，然后才能开始另一个 if/else if。或者如果 if 后面只有一行，则去掉左大括号。

# jsf - 定义行和列时，primefaces datagrid 不起作用

> ID：14801801
> 
> 赞同：0
> 
> 时间：2013-02-10T19:40:35.687
> 
> 标签：jsf, datagrid, primefaces, carousel

我想在 primefaces 轮播或滑块或数据网格中用一行表示我的 MYSQL 数据库表中的数据。旋转木马根本不起作用。当我添加 rows="1" 属性并且我不知道如何将我的数据实现到滑块中时，数据网格不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:43:29.307

我解决了这个问题。我包含在我的 xhtml 文件中的 jQuery 版本与 primefaces jQuery 库的版本不同。所以我只是使用了 primefaces jQuery 库并删除了另一个，并且所有 primefaces 组件都可以正常工作。

# c# - 用户控件 .ascx 变量访问

> ID：14801804
> 
> 赞同：2
> 
> 时间：2013-02-10T19:41:02.473
> 
> 标签：c#, asp.net, user-controls, compiler-errors

应该怎么做才能解决访问问题？

标记：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="Header.ascx.cs" Inherits="Version_2.Themes.Anatema.Header" %>

<%= deneme %> 
```

代码：

```
namespace Version_2.Themes.Anatema
{
    public partial class Header : UserControl
    {
        public string deneme = "asd";
    }
} 
```

错误：

> 当前上下文中不存在名称“deneme”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T23:50:11.123

试试这个，它应该工作。

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="user.ascx.cs" Inherits="user" %>
<asp:Label ID="Label1" runat="server">
<%=test%>
</asp:Label> 
```

**代码背后**

```
using System;

public partial class user : System.Web.UI.UserControl{

public string test = "This is a test";
protected void Page_Load(object sender, EventArgs e){
    this.DataBind();

}
} 
```

# css - 将顶部填充添加到导航列表类

> ID：14801805
> 
> 赞同：0
> 
> 时间：2013-02-10T19:41:03.213
> 
> 标签：css, padding

这是html：

```
<header>
  <img src="cp_logo2.png" alt="Cycle Pathology" />
    <nav class="vertical">
       <ul>
         <li><a href="#">Events Page</a></
         <li class="newgroup"><a href="#">Rose Hill Rally</a></li>
There are <li> under this as well as four <li class-="newgroup"> 
```

这是 CSS 样式表的分配：“如果列表项属于 newgroup 类，则在顶部添加 25 px 的填充空间以在该列表项和前一个列表项之间添加更大的间隙。” 想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:43:32.230

听起来很明显：

```
.newgroup {
    padding-top: 25px;
} 
```

# mysql - 省略公共记录的 SQL 外连接

> ID：14801808
> 
> 赞同：2
> 
> 时间：2013-02-10T19:41:10.797
> 
> 标签：mysql, sql, database, join

我正在尝试制定一个 SQL FULL OUTER JOIN，它包括表 A 和表 B 中的所有值，但不包括它们之间的共同值。

我搜索了互联网，偶然发现了以下 SQL 代码：

```
SELECT * FROM TableA
FULL OUTER JOIN TableB
ON TableA.name = TableB.name
WHERE TableA.id IS null 
OR TableB.id IS null 
```

可以这样说明：

![在此处输入图像描述](../Images/53986a6e46720aa75a19f2ce84d6083c.png)

我不确定我是否理解这些`IS null`部分。是否可以通过简单地说明以下内容作为`WHERE`条件来执行 SQL？：

```
WHERE TableA.id <> TableB.id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T19:48:44.083

您对 IS NULL 子句有什么不了解的地方？

在 OUTER JOIN (LEFT, RIGHT, FULL) 中，外部表中的列有可能最终为 NULL。

条款

```
WHERE TableA.id IS null 
OR TableB.id IS null 
```

只是说其中一个 ID 必须为 NULL，即如果您有来自 TableA 的行，则不能存在来自 TableB 的匹配行，反之亦然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T19:55:56.483

```
SELECT Name, ID FROM TableA UNION SELECT Name, ID FROM TableB 
EXCEPT
SELECT Name, ID FROM TableB INTERSECT SELECT Name, ID FROM TableA 
```

第一个选择从表 A 和表 B 中获取所有行，并将其组合成一个结果集。第二个选择选择两者之间共有的所有行。except 所做的是从第一个选择中选择所有行 - 从第二个选择中选择所有行。

你最终得到的是所有行 - 两个表之间共有的行。

# javascript - 为什么将 Javascript 代码从 html 移动到外部 js 文件后无法工作？

> ID：14801809
> 
> 赞同：0
> 
> 时间：2013-02-10T19:41:20.953
> 
> 标签：javascript, html, inline-code

我的 Javascript 代码在我的 HTML 中运行良好。当我将它移到我的 main.js 时，它突然停止工作。

**免责声明：我对 jQuery 和 Javascript 很陌生，如果真的很明显，我很抱歉。**

```
var infoVisible = false,
buyVisible = false;

function closeAllProductInfo() {
    $('#info').css({visibility: 'hidden'});
    $('#buy').css({visibility: 'hidden'});
    $('#options.info a').removeClass('active');
    $('#options.buy a').removeClass('active');
    infoVisible = false;
    buyVisible = false;
    imagesVisible = false;
}

function openProductInfo() {
    closeAllProductInfo();
    $('#info').css({visibility: 'visible', opacity: 0});
    $('#info').animate({opacity: 1}, 250);
    $('#options.info a').addClass('active');
    infoVisible = true;
}

function openProductBuy() {
    closeAllProductInfo();
    $('#buy').css({visibility: 'visible', opacity: 0});
    $('#buy').animate({opacity: 1}, 250);
    $('#options.buy a').addClass('active');
    buyVisible = true;
}

$('.info').click(function() {
    if (infoVisible) { 
        $('#info').animate({opacity: 0}, 250, function() {  
            closeAllProductInfo(); 
        }); 
    } else { 
        openProductInfo(); 
    }

    return false;
});

$('.buy').click(function() {
    if (!$(this).hasClass('in-active')) {
        if (buyVisible) { 
            $('#buy').animate({opacity: 0}, 250, function() { 
                closeAllProductInfo(); 
            }); 
        } 
        else { 
            openProductBuy(); 
        }
    }

    return false;
});

$('#info').click(function() {
    if (infoVisible) { 
        $('#info').animate({opacity:0}, 250, function() { 
            closeAllProductInfo(); 
        }); 
    }
});

$('#buy').click(function() {
    if (!$(this).hasClass('in-active')) {
        if (buyVisible) { 
            $('#buy').animate({opacity:0}, 250, function() { 
                closeAllProductInfo(); 
            }); 
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T19:45:39.547

可能是因为它曾经在加载文档后执行，但现在它在加载脚本时执行。您是在 HTML 文件的末尾还是开头加载 main.js？在文档准备好后使用它来执行它：

```
jQuery(document).ready(function($) {
  // Code using $ as usual goes here.
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T19:46:03.713

尝试将所有代码包装在：

```
$(document).ready(function(){
   // Your code in here.
}); 
```

# image - 将所有 Google 图片热链接重定向到包含图片的页面？

> ID：14801810
> 
> 赞同：2
> 
> 时间：2013-02-10T19:41:23.300
> 
> 标签：image, mod-rewrite, redirect

我有一个主要包含图像的网站。当有人单击“查看原始图像”时，我想将 Google 图片中出现的所有 jpg/gif/png 链接重定向到包含该图片的帖子。有没有办法在 .htacess 中使用 mod_rewrite 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T19:54:30.127

Google 图片现在只有一个扩展包装器，其中包含较大版本的图片。它不再为您提供预加载的“预览”页面，原因是防止重定向。据我所知，这是做不到的。但是，您可以[阻止您的图片出现在 Google 搜索中](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=35308)。

[![](../Images/f7ea465674c5779f1b5d3fefa1eaa7ca.png)](https://images.wikia.com/private-tfc-storage/images/a/a1/Untitled.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:21:13.307

如果您使用的是 Wordpress，则应该使用 Imaguard 插件之类的工具。如果你不使用 WP，至少你可以在这里下载源代码

[http://wordpress.org/extend/plugins/imaguard/](http://wordpress.org/extend/plugins/imaguard/)

看看他们是怎么做到的。似乎正在检查推荐人，如果不在他们的白名单或本地推荐人中，他们会重定向到带有文本的图像。可能使用 GD 插件即时添加文本。

# android - 如何在 API 8 的 android 应用程序中显示可用 wifi 列表？

> ID：14801812
> 
> 赞同：1
> 
> 时间：2013-02-10T19:42:07.823
> 
> 标签：android, android-wifi, android-networking

我正在开发一个应该搜索可用 wifi 并连接到所选网络的 android 应用程序。首先，我想在我的应用程序中显示所有 wifi 网络。我找到了一些教程，但所有主题都需要 API 14，我必须使用 API 8 来实现这种方法。任何想法都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:47:01.190

Unfortunately you MUST have API 14 as a `minSdkVersion`. There simply is not such a function in earlier API(s), thats why Google added it.

Change the `minSdkVersion` under your `AndroidManifest.xml` to show `android:minSdkVersion="14"`

# c# - 使用反射设置值

> ID：14801815
> 
> 赞同：1
> 
> 时间：2013-02-10T19:42:42.000
> 
> 标签：c#, reflection

我正在努力完成这项工作

```
Type ReflectionObject = r.GetType();
var field = ReflectionObject.GetField("Frame");
field.SetValue(r, 2); 
```

但它不起作用。我设置了一个断点，我发现我没有得到任何字段。因此，对于测试，我创建了一个带有“测试”字段的模型

```
namespace Recorder.Models
{
class Recording : Recorder.Recording
{
    int test { get; set; }
}
} 
```

并使我的代码更简单

```
Recorder.Models.Recording r = new Recorder.Models.Recording();
var fields = r.GetType().GetFields(); 
```

“字段”仍然是空的。这有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:48:34.623

因为那是一个属性，而不是一个字段。试试这个：

```
var prop = ReflectionObject.GetProperty("Frame");
prop.SetValue(r, 2); 
```

# sharepoint - 将 InfoPath 表单提交到 SharePoint 时出现错误 5337

> ID：14801821
> 
> 赞同：2
> 
> 时间：2013-02-10T19:42:53.680
> 
> 标签：sharepoint, infopath-forms-services

我有一些带有自定义代码的 InfoPath 2010 表单，可将​​信息提交到支持 SharePoint 2010 表单的库。其中一个表单有一个日期字段，由选择器选择并存储在库中的日期/时间列中。该表单几个月来一直运行良好，但有一天它刚刚开始失败并出现以下错误：

```
There has been an error while processing the form. 
Click OK to resume filling out the form. You may want to check 
your form data for errors. 
```

当我单击“显示错误详细信息”时，它会显示错误代码 5337 并提供相关 ID。

当我在事件日志中查找错误时，详细信息如下：

```
Business logic failed due to an exception. (User: XXX\frank, Form 
Name: Miscellaneous Form, IP: , Request:
http://intranet//apps/_layouts/FormServer.aspx
XsnLocation=/FormServerTemplates/Miscellaneous  
Form.xsn&Source=/apps/SitePages/expenses.aspx&DefaultItemOpen=1, 
Form ID: urn:schemas-microsoft-com:office:infopath:
Miscellaneous-Form:-myXSD-2012-05-14T12-19-23, 
Type: FormatException, 
Exception Message: String was not recognized as a valid DateTime.) 
```

我完全不知道这个问题是如何出现的。在工作和停止之间没有触及解决方案的任何方面。InfoPath 表单上的日期格式与 SharePoint 列表列中的日期格式相同。系统区域设置和区域设置在所有地方都是一致的，并且没有更改。这个问题是在 1 月 20 日的一系列 Windows 更新之后出现的，所以我想知道其中一个是否可能导致了这个问题。

我计划采取的下一步是重建和重新部署表单，看看是否能解决问题。然而，这是我继承的代码，它是更大解决方案的一部分，所以我对重新部署感到紧张，以防我破坏其他东西。这就是为什么我想在这里问是否有人遇到过这个或类似的问题，并且可以指出一些我可能忽略的明显问题。

感谢您不厌其烦地阅读本文。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:56:37.807

在 Windows 和/或 SharePoint 更新后，我遇到了一些 InfoPath 问题，因此您不应该排除这是问题的根本原因。我会使用更新的名称检查任何已知问题。

关于 DateTime 格式，您的自定义代码是否设置了 DateTime 值？如果答案是肯定的，请确保您使用以下日期格式。

```
infoPathField.SetValue(dateFieldItem.ToString("yyyy-MM-dd")); 
```

另一件事，您可以检查 SharePoint 日志并复制异常堆栈跟踪吗？

# android - Android - 线性/相对布局，同一行和下一行

> ID：14801822
> 
> 赞同：0
> 
> 时间：2013-02-10T19:42:57.303
> 
> 标签：android, android-layout, android-linearlayout, android-relativelayout

所以，我目前正在创建我的第一个 Android 应用程序。这是一场艰苦的战斗，但我不知何故坚持了下来。不过现在坚持设计。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >

<TextView
    android:id="@+id/phid"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:visibility="gone" />

<ImageView
    android:id="@+id/color"
    android:contentDescription="paintable circle"
    android:layout_width="18dp"
    android:layout_height="fill_parent"
    android:layout_gravity="left"
    android:layout_marginLeft="6dip"
    android:layout_marginTop="6dip"
    android:src="@drawable/circle" />

 <TextView
     android:id="@+id/datetime"
     android:layout_width="wrap_content"
     android:layout_height="60dip"
     android:paddingBottom="6dip"
     android:paddingLeft="6dip"
     android:paddingRight="10dp"
     android:paddingTop="10dip"
     android:textSize="12sp"
     android:textStyle="bold" /> 
```

这给出了一个很好的列表，标题在左上角，日期在最右上角。但我想要标题下的文本视图，与日期时间相同的字体大小，以及日期时间下具有相同字体大小的另一个文本视图。我尝试添加另一个LinearLayout，一个RelativeLayout，没有任何额外的布局，但它似乎不起作用。我在这里想念什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T14:36:04.983

您可以使用相对布局

将标题放在左上角

```
android:layout_alignParentLeft = "true" 
```

将日期时间放在右侧

```
android:layout_alignParentRight = "true" 
```

然后对于要放置在组件下的每个 TextView，使用

```
android:layout_below = (give the id of the control ) 
```

干杯

# javascript - 在 AJAX 调用期间“锁定”用户操作的技术

> ID：14801825
> 
> 赞同：0
> 
> 时间：2013-02-10T19:43:11.800
> 
> 标签：javascript, jquery

很多时候，我发现自己设计的应用程序对服务器、外部 API、HTTP 请求等进行 AJAX 调用。问题是，虽然这种异步调用正在发生，但用户仍然可以点击进行相同 AJAX 调用的项目或中断应用程序的流程等。我尝试了各种黑客来防止这种情况发生，但我想知道最被接受的方法是什么？

为了使这一点更具体，假设我有一个`button`进行 AJAX 调用的`form`元素和一个更改我的应用程序用于 AJAX 调用的一些数据的元素。`button's`设计按钮和表单功能以使其在AJAX 调用过程中不起作用的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T20:10:09.560

完成您想要的最佳方法是通过函数引导 AJAX 调用，以便您可以在该函数中检查请求是否处于活动状态。这是一个假设您使用 JQuery 的示例：

```
active_ajax_call = false;

function get_ajax(url, senddata) {
    if(active_ajax_call == false) {
        active_ajax_call = true;
        $.ajax({
            type: "POST",
            url: url,
            data: senddata
        }).done(function (data) {
            active_ajax_call = false;
            console.log(data);
        });
    }
}

get_ajax("some_url", {name: "John", location: "Amsterdam"}); 
```

当然，向网站用户展示一个不错的 ajax 加载器或其他东西，以便他们知道正在提取数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T19:46:05.840

在按钮的处理程序中，禁用按钮（在视觉上和功能上），然后执行 AJAX 调用。从 AJAX 调用返回，重新启用按钮。

这就是主要网站是如何做到的（例如 PayPal）。

# stata - Stata中是否有相当于Excel的COUNTIFS功能？

> ID：14801829
> 
> 赞同：1
> 
> 时间：2013-02-10T19:43:33.253
> 
> 标签：stata

我有有关投资的数据，按投资者姓名组织：

（公司名称）、公司（公司名称）和投资年份（全年）。

如何创建一个变量来计算当前投资前 10 年中每个投资者（公司名称）的观察次数？

我试过

```
bys firmname: egen exprience= count (roundyear < roundyear[_n]  & roundyear> roundyear[_n]-10 ) 
```

但它不起作用。

我知道如何在 Excel 中执行此操作，但由于数据量很大，因此需要大量时间来执行此操作。

数据如下所示：

```
 firmname, companyname, year
 f1, c2, 1990
 f1, c2, 1999
 f1, c3, 1991
 f1, c3, 1992
 f1, c3, 1993
 f1, c4, 1990
 f1, c4, 1993
 f1, c4, 1994 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T20:46:12.173

的文档`egen`警告您不要引用`_n`.

有关最后这么多时间单位的总和是两个累积总和之间的差的原理，请参见[Stata - Moving Finite Product 。](https://stackoverflow.com/questions/14608369/stata-moving-finite-product)

但是，我怀疑你应该直接去

[http://www.stata-journal.com/sjpdf.html?articlenum=pr0033](http://www.stata-journal.com/sjpdf.html?articlenum=pr0033)

查看一些带有详细示例的技术。

# javascript - 根据从下拉菜单中选择的选项创建查询字符串

> ID：14801836
> 
> 赞同：0
> 
> 时间：2013-02-10T19:44:20.127
> 
> 标签：javascript, drop-down-menu, parameters, query-string

我有这个下拉菜单：

```
<select name="Filter" onchange="applyFilter(this);">
<option name="Item1" id=Item1 value="10.5">Test1</option>
<option name="Item2" id=Item2 value="27">Test2</option>
<option name="Item3" id=Item3 value="31">Test3</option>
</select> 
```

我仍在学习 javascript，并正在尝试编写一个生成/加载查询字符串 URL 并将所选项目的值作为参数传递的函数。下拉菜单中的每个选项都需要有自己的 ID。这是我到目前为止的代码：

```
<script language="javascript1.2" type="text/javascript">
function applyFilter()
{ 
var currentQS = '';
var currentObject;
var currentURL = '' + window.location.href;

currentQS = unescape(window.location.search);
var newQS = '';

currentObject = document.getElementById('Item1');
newQS = $Querystring(newQS).set(currentObject.name,currentObject.value).toString();
newQS = newQS.substring(1,newQS.length);

currentObject = document.getElementById('Item2');
newQS = $Querystring(newQS).set(currentObject.name,currentObject.value).toString();
newQS = newQS.substring(1,newQS.length);

currentObject = document.getElementById('Item3');
newQS = $Querystring(newQS).set(currentObject.name,currentObject.value).toString();
newQS = newQS.substring(1,newQS.length);

var newURL = 'http://' + location.hostname + location.pathname + '?' + newQS;
window.location = newURL;
}
</script> 
```

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:17:23.663

不知道`$Querystring`指的是什么，但你应该能够这样做：

```
document.getElementsByName('Filter')[0].addEventListener('change', function() {
    window.location = 'http://' + location.hostname + location.pathname + '?' + this.name + '=' + this.options[this.selectedIndex].value;
}); 
```

但是，选择菜单可能不是您尝试做的最佳选择。看看这篇博文： http: [//uxmovement.com/forms/stop-misusing-select-menus/](http://uxmovement.com/forms/stop-misusing-select-menus/)

# asp.net - 如何在保持 404 状态的同时重定向 404？

> ID：14801837
> 
> 赞同：0
> 
> 时间：2013-02-10T19:44:22.097
> 
> 标签：asp.net, html, iis, iis-manager

使用 iis Manager，我将 404 设置为`execute a URL on this site`. 但是，通过 Google 网站管理员工具的“Fetch as Google”检查，我发现响应的代码为 200。

我该如何解决？

# android - 可以将外部加载的移动应用程序包含在另一个移动应用程序中吗？

> ID：14801841
> 
> 赞同：0
> 
> 时间：2013-02-10T19:44:29.290
> 
> 标签：android, ios, air

如果您创建一个使用自定义 url 方案来启动外部应用程序的移动应用程序，该外部应用程序是否可以直观地包含在您的移动应用程序中？我想启动一个 Skype 窗口，但我的移动应用程序（恰好是一个 AIR 应用程序，但我可以为其创建本机扩展）的选项卡、边框等仍然可见，因此该 Skype 窗口是一个应用程序内的视图。

一个推论：可以得到启动的应用程序窗口的位置和大小吗？如果是这样，至少可能会产生一种错觉，即Skype（或任何其他已启动的应用程序，就此而言）包含在您的移动应用程序中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T19:52:57.110

这在 iOS 6 中是不可能的**。**

* * *

*有一种可能性，就像您描述的那样启动其他应用程序并显示它们的视图，可能会在未来版本中找到公共 SDK 的方式。现在只有系统组件可以做到这一点。*

# c - debugging linker errors (undefined symbols)

> ID：14801847
> 
> 赞同：0
> 
> 时间：2013-02-10T19:45:05.710
> 
> 标签：c

I'm trying to link an executable with an external library called [libr](http://www.radare.org/y/). I'm not looking for help with that library specifically, only the linker error, which is pasted below:

```
undefined reference to `r_asm_new()' 
```

Ok, so I double check my link command:

```
-lr_core -lr_config -lr_cons -lr_cmd -lr_util -lr_flags -lr_asm -lr_lib -lr_debug -lr_hash -lr_bin -lr_lang -lr_io -lr_anal -lr_parse -lr_bp -lr_egg -lr_reg -lr_search -lr_syscall -lr_sign -lr_diff -lr_socket -lr_fs -lr_magic -lr_db 
```

and it seems to contain all the libraries that libr package has. I double the the libr_asm.so file with objdump:

```
$ objdump -T libr_asm.so.0.9.3git | grep r_asm_new
  00000000000ca66a g    DF .text    0000000000000149  Base        r_asm_new 
```

so as far as I can tell the -l_asm flag should have done it. I'm linking a c library to a c++ executable, but I can't think of how that could change the situation.

Thanks.

EDIT: The full link line:

```
/usr/bin/c++       CMakeFiles/main.dir/main.cc.o CMakeFiles/main.dir/ElfFile.cc.o CMakeFiles/main.dir/ElfFileSection.cc.o CMakeFiles/main.dir/ElfFileDefinitions.cc.o CMakeFiles/main.dir/SectionsWindow.cc.o CMakeFiles/main.dir/SectionView.cc.o  -o main -rdynamic -L/home/chris/radare_install/lib -lboost_filesystem-mt -lboost_system-mt -lgtkmm-3.0 -latkmm-1.6 -lgdkmm-3.0 -lgiomm-2.4 -lpangomm-1.4 -lgtk-3 -lglibmm-2.4 -lcairomm-1.0 -lgdk-3 -latk-1.0 -lgio-2.0 -lpangocairo-1.0 -lgdk_pixbuf-2.0 -lcairo-gobject -lpango-1.0 -lcairo -lsigc-2.0 -lgobject-2.0 -lglib-2.0 -lgtksourceviewmm-3.0 -lgtkmm-3.0 -lgtksourceview-3.0 -latkmm-1.6 -lgdkmm-3.0 -lgiomm-2.4 -lpangomm-1.4 -lglibmm-2.4 -lcairomm-1.0 -lsigc-2.0 -lgtk-3 -lgdk-3 -latk-1.0 -lgio-2.0 -lpangocairo-1.0 -lgdk_pixbuf-2.0 -lcairo-gobject -lpango-1.0 -lcairo -lgobject-2.0 -lglib-2.0 -lr_core -lr_config -lr_cons -lr_cmd -lr_util -lr_flags -lr_lib -lr_debug -lr_hash -lr_bin -lr_lang -lr_io -lr_anal -lr_parse -lr_bp -lr_egg -lr_reg -lr_search -lr_syscall -lr_sign -lr_diff -lr_socket -lr_fs -lr_magic -lr_db -lr_asm -Wl,-rpath,/home/chris/radare_install/lib 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T20:06:53.810

....关于这个问题的评论提醒了我：

```
extern "C" {
  #include "foo.h"
} 
```

# erlang - Erlang：向模块发送消息？

> ID：14801849
> 
> 赞同：4
> 
> 时间：2013-02-10T19:45:22.543
> 
> 标签：erlang

我正在阅读“Learn you some Erlang”中的[这一](http://learnyousomeerlang.com/designing-a-concurrent-application)部分，其中有一段代码如下所示：

```
start() ->
register(?MODULE, Pid=spawn(?MODULE, init, [])),
Pid.

start_link() ->
register(?MODULE, Pid=spawn_link(?MODULE, init, [])),
Pid.

terminate() ->
?MODULE ! shutdown. 
```

我对这个`terminate`功能感到非常困惑。那是说向模块本身发送消息吗？这是如何运作的？这是怎么回事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T19:53:03.697

TL;DR：关机被发送到一个进程，而不是模块。

`?MODULE`是一个值，在编译时更改为当前模块（文件）的名称。

此代码示例中具体发生的情况是，正在生成的进程正在以模块名称向 VM 注册，以便其他进程可以通过这种方式引用它。你可以`?MODULE`用几乎任何原子替换整个代码块，只要你每次都给出相同的值。

因此，当`terminate()`被调用时，关闭消息不会发送到模块，而是发送到生成并以该名称向 VM 注册的进程。

使用`?MODULE`只是一种避免与其他注册进程命名冲突的便捷方法。

# android - Web forms data entry generator for SQLite

> ID：14801850
> 
> 赞同：0
> 
> 时间：2013-02-10T19:45:28.417
> 
> 标签：android, asp.net, sqlite, web-applications, data-entry

I'm building an android application that is very data intensive, and need to an interface to use to add data quickly and easily.

i've looked at all of the database tools, none of which make it easy to enter data using foreign keys. I need all the foreign key fields to show up with dropdown lists (for 1-1) or checkbox lists (for *-1) for fields to make it easy to enter data.

The closest I've found to achieving this is the following: [http://www.sqlmaestro.com/products/sqlite/datawizard/download/](http://www.sqlmaestro.com/products/sqlite/datawizard/download/)

Which claims to generate ASP.Net forms from a database. Does anybody know any other tools that'd help me?

I guess I could build my own forms,but would prefer to spend my time developing my app. I'd be happy with a framework to kickstart development of my required forms, maybe somebody has done something similar already? (ASP.Net preferable but not a necessity).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:17:16.860

我知道aspnet 制造商。

[http://www.hkvstore.com/aspnetmaker/](http://www.hkvstore.com/aspnetmaker/)

可以非常快速地创建一个完整的站点来处理您的数据库操作。它不是免费的，你坚持他给你的任何东西，但对于快速工具来说还不错。

从另一个角度，你听说过**脚手架**吗？

我使用了 SubSonic ver 2，它有脚手架，但其他 DAL 也有。这种技术的作用是自动为您创建编辑表单。

你可以在谷歌上搜索“scaffold asp.net”

所以你可以选择一个有脚手架的 DAL 并使用它。

# c# - OpenXML文件，你怎么知道哪个是哪个，什么时候没有扩展

> ID：14801852
> 
> 赞同：3
> 
> 时间：2013-02-10T19:45:31.233
> 
> 标签：c#, openxml, packaging

我现在所做的，哪些工作是这样的：

```
private string DetermineOpenXML(string file)
    {

        try
        {
            SpreadsheetDocument doc = SpreadsheetDocument.Open(file, false);
            doc.Close();
            return ".xslx";
        }
        catch
        {
            try
            {
                WordprocessingDocument doc = WordprocessingDocument.Open(file, false);
                doc.Close();
                return ".docx";
            }
            catch
            {
                try
                {
                    PresentationDocument doc = PresentationDocument.Open(file, false);
                    doc.Close();
                    return ".pptx";
                }
                catch
                {
                    return string.Empty;
                }
            }
        }
    } 
```

我认为除了反复试验之外，必须有更好的方法来查看它是什么类型的文件。问题是，我正在开发一个小程序，它找出文件扩展名文件应该有什么。我这样做的原因是因为我有来自数据库的文件，它们有时会在没有扩展名的情况下保存，有时会以错误的扩展名保存。

我对这些文件所做的是，我发现所有 OpenXML 文档共享相同的文件签名：“50 4B 03 04 14 00 06 00”，这接近于 zip 文件的签名，我也可以打开 OpenXML使用 zip 程序的文件并查看其内容。也许这是我应该寻求的解决方案，我只是希望使用 OpenXML SDK 会更快/更容易，并且它有一个属性或可以为我检查它的东西。

编辑：我已经添加了一个答案，我仍然想看看是否有更好的解决方案，即使它适用于我目前的目的。它没有考虑扩展名应该是模板文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T20:53:12.907

我最终改用 System.IO.Packaging。

```
private string anotherOpenXmlAttempt(string file)
    {
        string ext = string.Empty;
        Package package = Package.Open(file);
        if (package.PartExists(new Uri("/word/document.xml", UriKind.Relative)))
        {
            ext = ".docx";
        }
        else if (package.PartExists(new Uri("/xl/workbook.xml", UriKind.Relative)))
        {
            ext = ".xslx";
        }else if (package.PartExists(new Uri("/ppt/presentation.xml", UriKind.Relative)))
        {
            ext = ".pptx";
        }

        package.Close();
        return ext;
    } 
```

尚未进行任何广泛的测试，但已为我当前的文件工作。

如果有人有一个很好的解决方案，我会留下这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T20:17:40.697

根据我对 OpenXMLSDK2 的经验，它对于操作文档的 xml 内部结构更有用。如果您只需要扩展类型，那么为什么不使用：

[字符串扩展 = System.IO.Path.GetExtension(filename);](http://msdn.microsoft.com/en-us/library/system.io.path.getextension.aspx)

值得注意的是，try catch 是一种仅用于确定外部细节的昂贵方法，因为它需要 catch 块的所有异常细节、堆栈跟踪等。

Excel 的扩展类型也是 .xslx 而不是 .xslt，即“可扩展样式表语言转换”

希望有帮助！

# ruby-on-rails - check if Rails partial is empty

> ID：14801856
> 
> 赞同：0
> 
> 时间：2013-02-10T19:46:00.437
> 
> 标签：ruby-on-rails

I have a main page that is responsible for HTML/CSS styling, but some of the contents come from partials. A partial receives some locals or params, i.e. current_user or person, and displays information if any.

Is there a way for me to check if a partial rendered anything? My end goal is something like this:

```
<% if my_partial can render something %>
 <div class="css_for_something">
  <%= render(partial: 'my_partial', locals: {...} ) %>
<% else %>
  <div class="css_for_no_info">
   <%= render something else %>
<% end %> 
```

I do not want the partials to handle styling logic; they just need to display content if any. Conversely, the main page should not know anything about the logic in the partial(s), such as checking values or querying the database.

Thank you

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-09T18:42:13.970

不幸的是，Chris Peter 的解决方案在 rails 4.2.4 上对我不起作用，因为它`render_to_string`似乎在视图中不可用。

但是，以下工作（rails 4.2.4）：

```
<% partial_content = render partial: 'my_partial' %>
<% if partial_content.present? %>
  <%= partial_content %>
<% else %>
  <%# rendered if partial is empty %>
<% end %> 
```

请注意，`present?`检查实际上只检查渲染的内容是否为空。如果返回某些内容，例如 HTML 注释，则检查返回 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T19:52:32.160

尝试将生成的值存储`render_to_string`在变量中：

```
<% partial_content = render_to_string(partial: 'my_partial', locals: {...} ).strip %> 
```

然后你可以看看它是否包含任何内容：

```
<% if partial_content.present? %>
  <%= partial_content %>
<% else %>
  <div class="css_for_no_info">
    <%= render something else %>
  </div>
<% end %> 
```

# r - How to assign to a list in R without creating a bunch of new elements?

> ID：14801860
> 
> 赞同：3
> 
> 时间：2013-02-10T19:46:16.100
> 
> 标签：r

If I say `l = list()` and then I do `l[[27]] = 100`, it will create 26 other entries with the value `NULL` in them. Is there a way to avoid this?

For example if I run: `l <- list(); for (i in c(4,7,1)) { l[[i]] <- i^1 }`

It will creat a list with entries ranging from 1 to 7, and NULL values for all the ones I did not assign. How can I avoid these spurious entries?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-10T19:47:34.897

Use character values for the indices:

```
l <- list(); for (i in c(4,7,1)) { l[[as.character(i)]] <- i^1 }

> l
$`4`
[1] 4

$`7`
[1] 7

$`1`
[1] 1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-10T20:06:30.250

我会避免`for`循环并使用`lapply`：

```
> x <- c(4, 7, 1)
> setNames(lapply(x, `^`, 1), x)
$`4`
[1] 4

$`7`
[1] 7

$`1`
[1] 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T19:48:55.750

You could append to the list:

```
l <- list(); for (i in c(4,7,1)) { l <- append(l, i^1) } 
```

# android - .apk 如何（或不）处理硬链接

> ID：14801863
> 
> 赞同：0
> 
> 时间：2013-02-10T19:46:30.207
> 
> 标签：android, apk, hardlink

格式是否`.apk`处理硬链接？还是只是一遍又一遍地复制同一个文件？

我进行了一些简单的测试，似乎没有处理硬链接，这意味着`.apk`当您有多个指向同一个文件的硬链接时，生成的大小会显着增加。有没有办法让资源指向同一个文件？

* * *

用例如下：我有*几个*图像，它们在我的应用程序的某些地方使用，它们的名称包含有关它们的一些信息。例如，我可以有一个`apple.jpg`, `apple_red.jpg`, `apple_red_big.jpg`,`apple_big.jpg`等`apple_green.jpg`。我的应用程序使用与数据最匹配的图像，因此如果数据是关于一个红色的大苹果，它将使用`apple_red_big.jpg`，而如果应用程序只知道数据涉及苹果它只会使用`apple.jpg`.

目前我没有为每个资源提供不同的文件，所以`apple_red.jpg`只是一个硬链接到`apple.jpg`. 将来我可能会决定添加更多图像，从而`apple_red.jpg`可以拥有自己的图像。

此外，由于`apple.jpg`用作后备选项，它几乎总是一个简单的硬链接到另一个恰好也是`apple_something.jpg`.

如何避免在最终的 apk 中复制所有这些图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:30:16.937

如果您以不同的文件名提供相同的图像（即使它们只是硬链接），aapt 会将它们打包为单独的资源。与使用文件系统创建硬链接不同，Android 的做法是提供别名资源。该技术[在文档中进行了](http://developer.android.com/guide/topics/resources/providing-resources.html#AliasResources)描述。基本上，您只需创建一个引用另一个可绘制对象的位图可绘制对象：

**文件 res/drawable/apple.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@drawable/apple_something" /> 
```

您存储`apple_something.png`在 res/drawable 目录中的位置。别名资源仅占用 .apk 文件中的一点点额外空间。

在代码中，两者都`R.drawable.apple`将`R.drawable.apple_something`检索相同的图像（尽管它们将是不同的 Drawable 对象）；在 xml 中它将是`@drawable/apple`and `@drawable/apple_something`。

# ember.js - Ember.js missing modules?

> ID：14801865
> 
> 赞同：0
> 
> 时间：2013-02-10T19:46:42.400
> 
> 标签：ember.js

I am trying Ember.js out and facing some wierd issues . .

Initially i forked ember.js form [Ember-GitHub](https://github.com/emberjs/ember.js/downloads)

and imported lib folder with jQuery, Handlebar, Ember libraries.

That Ember version have undefined Ember.View , Ember.Router, Ember.Route even i can find them inside source code, they appear undefined.

Anyway if i use some other versions of ember packages : [Download packages](https://github.com/emberjs/ember.js/downloads)

i can find version with Ember.View and Ember.Router BUT without Ember.Controller and Ember.Route

*This also varies in same versions of file in minifed and not-minifed versions wtf*

Why are these modules undefined when i can find them inside Ember Source code ?

And why this varies so much from version to version ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T20:11:38.423

最简单的解决方案：

*   下载：emberjs 从主页[http://emberjs.com/](http://emberjs.com/)
*   下载：车把从他们的主页[http://handlebarsjs.com/](http://handlebarsjs.com/)
*   下载：jquery 1.9.0 在[http://jquery.com/download/](http://jquery.com/download/)

在您的 index.html 中，在`</body>`输入之前：

```
<script src="scripts/vendor/jquery-1.9.0.min.js"></script>
<script src="scripts/vendor/handlebars-1.0.rc.1.min.js"></script>
<script src="scripts/vendor/ember-1.0.0-pre.4.js"></script>

<script src="scripts/app.js"></script> 
```

在 app.js 中，输入：

```
App = Ember.Application.create();

// Do some ember stuff here, like making a mapping on the Router 
```

享受！

# c - LZW Compression with Entire unicode library

> ID：14801866
> 
> 赞同：1
> 
> 时间：2013-02-10T19:46:56.363
> 
> 标签：c, compression, lzw

I am trying to do this problem:

> Assume we have an initial alphabet of the entire Unicode character set, instead of just all the possible byte values. Recall that unicode characters are unsigned 2-byte values, so this means that each 2 bytes of uncompressed data will be treated as one symbol, and we'll have an alphabet with over 60,000 symbols. (Treating symbols as 2-byte Unicodes, rather than a byte at a time, makes for better compression in the case of internationalized text.) And, note, there's nothing that limits the number of bits per code to at most 16\. As you generalize the LZW algorithm for this very large alphabet, don't worry if you have some pretty long codes.
> 
> With this, give the compressed version of this four-symbol sequence, using our project assumptions, including an EOD code, and grouping into 4-byte ints. (These three symbols are Unicode values, represented numerically.) Write your answer as 3 8-digit hex values, space separated, using capital hex digits, not lowercase.
> 
> 32767 32768 32767 32768

The problem I am having is that I don't know the entire range of the alphabet, so when doing LZW compression I don't know what byte value the new codes will have. Stemming from that problem I also don't know the the EOD code will be.

Also, it seems to me that it will only take two integers the compressed data.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T06:40:09.157

问题陈述格式不正确。

正如我们今天所知，在 Unicode 中，代码点（代表字符、字符的可组合部分和其他有用但更隐蔽的东西的那些数字）不能全部从 0 到 65535 编号以适应 16 位。Unicode 中有超过 10 万个中文、日文和韩文字符。显然，您只需要 17 位以上的位即可。因此，Unicode 显然不是这里的正确选择。

OTOH，存在一种“精简”版本的 Unicode，[通用字符集](http://en.wikipedia.org/wiki/Universal_Character_Set)，其**UCS-2**编码使用 16 位代码点，技术上最多可用于 65536 个字符等。那些代码大于 65535 的字符很不幸，UCS-2 不能使用它们。

因此，如果它真的是 UCS-2，您可以下载它的规范（我相信是 ISO/IEC 10646）并准确找出使用了 64K 中的哪些代码，因此应该形成您的初始 LZW 字母表。

# actionscript-3 - ActionScript: fruit ninja swipe

> ID：14801869
> 
> 赞同：0
> 
> 时间：2013-02-10T19:47:03.540
> 
> 标签：actionscript-3, flash, actionscript

I'm trying to build the fruit ninja type swipe to some of my buttons in Flash CS6 and ActionScript3\.

In trying to figure it out this is what I have come up with:
get the coordinates of where the user first put his finger mouse down,
then where we lifted it
see if your button touches any of those coordinates (if yes, execute that button code)
run some kind of animation between the first two coordinates (mouse down, mouse up points)

am I on the right track?

Also, has anyone already done this so that I can look at their code?

Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T12:32:07.603

使用[物理库 Box2d查看伟大的](http://box2dflash.sourceforge.net/)[Emanuele Feronato](http://www.emanueleferonato.com/)关于该主题的系列：

*   [使用 box2d 对对象进行切片、分割和切割](http://www.emanueleferonato.com/2011/06/13/slicing-splitting-and-cutting-objects-with-box2d/)

*   [第 2 部分：实际拆分对象](http://www.emanueleferonato.com/2011/06/25/slicing-splitting-and-cutting-objects-with-box2d-part-2/)

*   [第 4 部分：使用真实图形](http://www.emanueleferonato.com/2011/08/05/slicing-splitting-and-cutting-objects-with-box2d-part-4-using-real-graphics/)

（我找不到第 3 部分，但我认为我们在那里没有遗漏任何太重要的东西）。希望这可以帮助！

# node.js - What are the benefits of installing Express.js locally vs globally

> ID：14801874
> 
> 赞同：10
> 
> 时间：2013-02-10T19:47:20.867
> 
> 标签：node.js, express

As I understand it, there are two ways to install Express.js.

1.  Using `npm install express` - either from package.json or via command line. This method will install express locally in your node_modules folder.
2.  Using `npm install express -g` . This method installs the package globally on your machine.

I was just wondering what the benefits were to using either method. Is either one considered "best practice" over the other?

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-10T19:49:36.150

要创建应用程序，您应该始终在本地安装它。这将允许您为您制作的每个应用程序使用不同的 express 版本。

全局安装 express 将允许您使用`express`命令行实用程序来创建样板代码和东西。所以理想情况下，你应该在两个地方都安装 express，但要确保你开发的应用程序在本地版本上运行。

# android - Android：使用 RandomAccessFile 从内部存储访问文件

> ID：14801876
> 
> 赞同：3
> 
> 时间：2013-02-10T19:47:30.673
> 
> 标签：android, file-io, android-assets, randomaccessfile

我正在创建一个需要从文件中读取数据的应用程序。我最初是使用 a`BufferedReader`和 an从 assets 文件夹中读取它，`InputStreamReader`但我遇到了内存问题（请参阅[Android：文件读取 - OutOfMemory 问题](https://stackoverflow.com/questions/14763656/android-file-reading-outofmemory-issue)）。一个建议是将数据从 assets 文件夹复制到内部存储（**不是 SD 卡**），然后通过`RandomAccessFile`. 所以我查找了如何将文件从资产复制到内部存储，我发现了 2 个来源：

[https://groups.google.com/forum/?fromgroups=#!topic/android-developers/RpXiMYV48Ww](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/RpXiMYV48Ww)

[http://developergoodies.blogspot.com/2012/11/copy-android-asset-to-internal-storage.html](http://developergoodies.blogspot.com/2012/11/copy-android-asset-to-internal-storage.html)

我决定使用第二个代码并为我的文件修改它。所以它看起来像这样：

```
public void copyFile() {
    //Open your file in assets
    Context context = getApplicationContext();
    String destinationFile = context.getFilesDir().getPath() + File.separator + "text.txt";

    if (!new File(destinationFile).exists()) {
        try {
            copyFromAssetsToStorage(context, "text.txt", destinationFile);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }   
}

private void copyStream(InputStream input, OutputStream output) throws IOException {
    byte[] buffer = new byte[1024];
    int length = Input.read(buffer);
    while (length > 0) {
        output.write(buffer, 0, length);
        length = input.read(buffer);
    }
}

private void copyFromAssetsToStorage(Context context, String sourceFile, String destinationFile) throws IOException {
    InputStream inputStream = context.getAssets().open(sourceFile);
    OutputStream outputStream = new FileOutputStream(destinationFile);
    copyStream(inputStream , outputStream );
    outputStream.flush();
    outputStream.close();
    inputStream.close();
} 
```

我假设这会将文件复制到应用程序的数据目录中。我无法对其进行测试，因为我希望能够使用`RandomAccessFile`. 但是，我从来没有做过这两个中的任何一个（从 assets 和 复制文件`RandomAccessFile`），所以我被卡住了。这个应用程序的工作已经停止，因为这是唯一阻止我完成它的事情。

任何人都可以向我提供有关如何使用 访问数据的更正、建议和正确实现`RandomAccessFile`吗？（数据是每行长度为 4-15 个字符的字符串列表。）

编辑*

```
private File createCacheFile(Context context, String filename){
File cacheFile = new File(context.getCacheDir(), filename);

    if (cacheFile.exists()) {
        return cacheFile ;
    }

    InputStream inputStream = null;
    FileOutputStream fileOutputStream = null;

    try {

        inputStream = context.getAssets().open(filename);
        fileOutputStream = new FileOutputStream(cacheFile);

        int bufferSize = 1024;
        byte[] buffer = new byte[bufferSize];
        int length = -1;
        while ( (length = inputStream.read(buffer)) > 0) {
            fileOutputStream.write(buffer,0,length);
        }

    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    finally {
        try {
            fileOutputStream.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
        try {
            inputStream.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    return cacheFile;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T22:03:52.280

1-将文件从资产复制到缓存目录

此代码仅用于说明，您必须进行*适当的异常处理*并*关闭资源*

```
private File createCacheFile(Context context, String filename){
  File cacheFile = new File(context.getCacheDir(), filename);

  if (cacheFile.exists()) {
      return cacheFile ;
  }

  InputStream inputStream = context.getAssets().open(filename);
  FileOutputStream fileOutputStream = new FileOutputStream(cacheFile);

  int bufferSize = 1024;
  byte[] buffer = new byte[bufferSize];
  int length = -1;
  while ( (length = inputStream.read(buffer)) > 0) {
     fileOutputStream.write(buffer,0,length);
  }

  fileOutputStream.close();
  inputStream.close();

  return cacheFile;
} 
```

2-使用打开文件`RandomAccessFile`

```
File cacheFile = createCacheFile(context, "text.txt");
RandomAccessFile randomAccessFile = new RandomAccessFile(cacheFile, "r");

// Process the file

randomAccessFile.close(); 
```

附带说明一下，您应该遵循 Java 命名约定，例如，您的方法和变量名称应该以小写字母开头，例如`copyFromAssetsToStorage`and`destinationFile`

**编辑：**

您应该`try/catch`为每个`close()`操作单独创建一个，因此如果一个操作失败，另一个仍然会被执行并检查它们是否没有`null`

```
finally {
    try {
       if(fileOutputStream!=null){
          fileOutputStream.close();            
       }
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
      if(inputStream!=null){
       inputStream.close();      
      }      
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

# c++ - compare integers with different signedness

> ID：14801879
> 
> 赞同：0
> 
> 时间：2013-02-10T19:47:38.910
> 
> 标签：c++, c++11

I wrote some program to test my suspicions. It contains super-ultra-reliable function, on my mind `:)`, called `less` to compare integral numbers. For some combinations of types it produces results that differ from the results, which gives **C++**. When this happens it gives false, that you can see on the screen.

```
#include <iostream> 
#include <iomanip> 
#include <type_traits> 
#include <limits> 
#include <typeinfo> 

#include <cstdlib> 

#pragma GCC diagnostic ignored "-Wsign-compare" 
#pragma GCC diagnostic ignored "-Wtype-limits" 
template< typename T, typename U > 
inline 
bool less(T const & lhs, U const & rhs) 
{ 
    if (std::is_signed< T >::value && std::is_unsigned< U >::value) { 
        if (lhs < 0) { 
            return true; 
        } else if (rhs > std::numeric_limits< T >::max()) { 
            return true; 
        } else { 
            return static_cast< T >(lhs) < rhs; 
        } 
    } else if (std::is_unsigned< T >::value && std::is_signed< U >::value) { 
        if (rhs < 0) { 
            return false; 
        } else if (lhs > std::numeric_limits< T >::max()) { 
            return false; 
        } else { 
            return lhs < static_cast< T >(rhs); 
        } 
    } else { 
        return lhs < rhs; 
    } 
} 
#pragma GCC diagnostic warning "-Wtype-limits" 
#pragma GCC diagnostic warning "-Wsign-compare" 

#pragma GCC diagnostic ignored "-Wsign-compare" 
#pragma GCC diagnostic ignored "-Wtype-limits" 
template< typename U, typename S > 
void test() 
{ 
    std::cout << typeid(U).name() << " vs " << typeid(S).name() << std::endl; 
    static_assert(std::is_unsigned< U >::value && std::is_signed< S >::value, "signedness violated"); 
    static_assert(sizeof(U) != sizeof(S), "size should not be the same"); 
    U const x(std::numeric_limits< U >::max() - 2); 
    S const y(-1); 
    S const z(std::numeric_limits< S >::min()); 
    std::cout << std::boolalpha << (less(x, y) == (x < y)) << std::endl 
              << std::boolalpha << (less(y, x) == (y < x)) << std::endl 
              << std::boolalpha << (less(y, z) == (y < z)) << std::endl 
              << std::boolalpha << (less(z, y) == (z < y)) << std::endl 
              << std::boolalpha << (less(x, z) == (x < z)) << std::endl 
              << std::boolalpha << (less(z, x) == (z < x)) << std::endl 
              << std::endl; 
} 
#pragma GCC diagnostic warning "-Wtype-limits" 
#pragma GCC diagnostic warning "-Wsign-compare" 

int main() 
{ 
    using namespace std; 

    test< uint8_t,  int16_t >(); 
    test< uint8_t,  int32_t >(); 
    test< uint8_t,  int64_t >(); 
    test< uint16_t, int8_t  >(); 
    test< uint16_t, int32_t >(); 
    test< uint16_t, int64_t >(); 
    test< uint32_t, int8_t  >(); 
    test< uint32_t, int16_t >(); 
    test< uint32_t, int64_t >(); 
    test< uint64_t, int8_t  >(); 
    test< uint64_t, int16_t >(); 
    test< uint64_t, int32_t >(); 

    return EXIT_SUCCESS; 
} 
```

I compile (`bash s.sh 2>&1 | tee s.log`) the program using the following script:

```
#!/usr/bin/env sh 

set -o errexit 
set -o verbose 

g++ -std=gnu++11 -m64 s.cpp -o s64 
g++ -std=gnu++11 -m32 s.cpp -o s32 

MINGWDIR=/c/mingw64
PATH=/usr/bin:${MINGWDIR}/bin:/c/Windows/system32:${MINGWDIR}/x86_64-w64-mingw32/lib32 ./s64 2>&1 | tee s64.log | grep -c false
PATH=/usr/bin:${MINGWDIR}/bin:/c/Windows/system32:${MINGWDIR}/x86_64-w64-mingw32/lib32 ./s32 2>&1 | tee s32.log | grep -c false

diff s32.log s64.log 
```

As a result (`s.log`) script gives the following:

```
g++ -std=gnu++11 -m64 s.cpp -o s64 
g++ -std=gnu++11 -m32 s.cpp -o s32 

MINGWDIR=/c/mingw64
PATH=/usr/bin:${MINGWDIR}/bin:/c/Windows/system32:${MINGWDIR}/x86_64-w64-mingw32/lib32 ./s64 2>&1 | tee s64.log | grep -c false
10
PATH=/usr/bin:${MINGWDIR}/bin:/c/Windows/system32:${MINGWDIR}/x86_64-w64-mingw32/lib32 ./s32 2>&1 | tee s32.log | grep -c false
10

diff s32.log s64.log 
```

As you can see the results are the same (for **x32** and **x64** platforms). And some of the tests have failed. Why is this happening? My program is wrong or my knowledge about **C++** is little?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T19:58:09.033

您正在测试基本`operator <`功能是否与您的功能相同`less`。它不是。

您的函数考虑了有符号/无符号不匹配，并给出了数学上正确的答案。

当有符号/无符号不匹配时，基本的 C++ 运算符会将有符号值转换为无符号值。

# c# - 如何防止在非零数字之前输入零？

> ID：14801882
> 
> 赞同：1
> 
> 时间：2013-02-10T19:48:08.860
> 
> 标签：c#, validation, textbox, truncation

在 C# 中，WinForms 如何停止以下输入：

0000000000001234556

0000.123456

00000123456.123456

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T19:51:09.533

如果你想要 1234556 而不是 000000001234556
那么你可以将它转换为`Int`,`Double`或任何其他你想要的数据类型

第二个选项是使用`keypress`事件

```
private void textBox1_KeyPress(object sender, System.Windows.Forms.KeyPressEventArgs e)
    {
        if (e.KeyCode == ascii of 0)
        {
            e.Handled = false;
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T19:50:05.677

您可以覆盖该`KeyPress`事件并定义一个状态，如果输入 == '0' 然后忽略，否则，等待非零输入。然后将状态更改为接受 0。

既然你不显示代码，我也不会

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T19:52:14.487

您可以向`KeyDown`or`KeyPress`事件添加事件处理程序。在事件处理程序中检查是否`KeyEventArgs` `KeyCode`为 0 以及您的`TextBox.Text`属性的长度是否为 0。如果是，请将`KeyEventArgs` `Handled`属性设置为 false。

# android - Android Beam ContentProvider Uri 失败

> ID：14801886
> 
> 赞同：2
> 
> 时间：2013-02-10T19:48:42.897
> 
> 标签：android, bluetooth, nfc, android-4.2-jelly-bean, android-beam

我正在尝试使用 setBeamPushUrisCallback 从 Galaxy nexus（运行 4.2.1）到 nexus7（运行 4.2）发送内容提供者 uri。两台设备都安装了应用程序，但在 NFC 切换到蓝牙期间传输失败，我得到的例外是：

```
02-10 13:33:32.762: D/BluetoothOppUtility(23916): closeSendFileInfo:  uri=content://com.android.beam.Beam/msgs/2
02-10 13:33:32.762: W/dalvikvm(23916): threadid=21: thread exiting with uncaught exception (group=0x40d70930)
02-10 13:33:32.770: E/AndroidRuntime(23916): FATAL EXCEPTION: Bluetooth Share Service
02-10 13:33:32.770: E/AndroidRuntime(23916): java.lang.NullPointerException
02-10 13:33:32.770: E/AndroidRuntime(23916):    at com.android.bluetooth.opp.BluetoothOppUtility.closeSendFileInfo(BluetoothOppUtility.java:327)
02-10 13:33:32.770: E/AndroidRuntime(23916):    at com.android.bluetooth.opp.BluetoothOppService.insertShare(BluetoothOppService.java:614)
02-10 13:33:32.770: E/AndroidRuntime(23916):    at com.android.bluetooth.opp.BluetoothOppService.access$1800(BluetoothOppService.java:69)
02-10 13:33:32.770: E/AndroidRuntime(23916):    at com.android.bluetooth.opp.BluetoothOppService$UpdateThread.run(BluetoothOppService.java:472)
02-10 13:33:32.941: E/NfcHandover(693): Handover transfer failed 
```

我已经在我的清单中声明了提供者（我可以在我的应用程序中很好地查询 uri）并添加了意图过滤器，以便在梁成功时启动要启动的活动。我究竟做错了什么？为什么总是切换到蓝牙而不是wifi？

更新：

这是应用程序中的相关代码：

该活动实现了 CreateBeamUrisCallback 并在 onCreate 中：

```
 mNfcAdapter = NfcAdapter.getDefaultAdapter(this);
 if (mNfcAdapter == null) return;  // NFC not available on this device
 mNfcAdapter.setBeamPushUrisCallback(this, this); 
```

和覆盖的方法：

```
@Override
public Uri[] createBeamUris(NfcEvent event) {
    Uri uri = Uri.parse("content://com.android.beam.Beam/msgs/2");
    return new Uri[]{uri};
} 
```

显现：

```
 <provider
    android:name="com.example.android.beam.BeamContentProvider"
    android:authorities="com.android.beam.Beam"
    android:exported="true"/>
 <activity android:name="com.example.android.beam.Beam"
            android:label="@string/app_name"
            android:launchMode="singleTop">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
         <intent-filter>
             <action android:name="android.intent.action.VIEW" />
            <action android:name="android.intent.action.EDIT" />
            <action android:name="android.intent.action.PICK" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:mimeType="vnd.android.cursor.item/vnd.com.example.msgs" />
        </intent-filter>
    </activity> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:34:12.240

我发现了问题，我必须`openFile(Uri uri, String mode)`在我的内容提供程序中进行覆盖，我必须在其中查询数据库，从游标中检索值，将它们写入文件并返回`ParcelFileDescriptor`文件。

# types - Handling anonymous functions in SML datatypes

> ID：14801887
> 
> 赞同：0
> 
> 时间：2013-02-10T19:48:43.413
> 
> 标签：types, sml, smlnj, currying

I have the following datatype and 3 examples of tests:

```
datatype 'a test = Test of ('a -> bool) * string;
val pos = Test (fn x => x > 0, "pos");
val even = Test (fn x => x mod 2 = 0, "even");
val small = Test (fn x => x < 100, "small"); 
```

I'm still learning the ropes on SML, but I can't figure out how to "call" one of the tests as a recursive currying function. I tried with the following function but of course it wouldn't work. Anyone have any tips?

```
fun pass x [] = []
    | pass x (h::t) = (h x)::(pass x t);

pass: 'a -> 'a test list -> string list; 
i.e. pass' ~101 [pos, even, small] = ["small"] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T20:30:47.950

我假设您想过滤给定输入通过的测试名称。

您可以`'a test`通过模式匹配进行分解，获取相应的函数并在当前输入上测试它们：

```
fun pass x [] = []
  | pass x (Test(f, s)::t) = if f x then s::pass x t 
                             else pass x t 
```

# ios - application:didFinishLaunchingWithOptions: firing notification before destination controller is created

> ID：14801889
> 
> 赞同：11
> 
> 时间：2013-02-10T19:48:48.420
> 
> 标签：ios, uistoryboard, nsnotifications

Hello, I am writing an app that should respond with an UI update and an internal status change when a local notifcation is used to open it. I am using storyboards and I have set up my main view controller to observe status changes:

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // ...
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(resumeByNotification:) name:@"Resume" object:nil];
} 
```

In my app delegate I have this:

```
- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification
{
    if (application.applicationState == UIApplicationStateInactive)
    {
        [[NSNotificationCenter defaultCenter] postNotificationName:@"Resume" object:self userInfo:notification.userInfo];
    }
} 
```

And this works just fine: if the app is running in the background, the view controller will intercept the notification and react accordingly. (If the app is running in the foreground, it's ignored because the UI is being taken care of directly.)

The problem arises when the app has been killed and the notification is received. I have written this in the didFinishLaunchingWithOptions method, making the phone vibrate as a quick debug technique :), and I *do* get the notification:

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    UILocalNotification *localNotification = launchOptions[UIApplicationLaunchOptionsLocalNotificationKey];
    if (localNotification)
    {
        [[NSNotificationCenter defaultCenter] postNotificationName:@"Resume" object:self userInfo:localNotification.userInfo];
        AudioServicesPlaySystemSound(kSystemSoundID_Vibrate);
    }

    return YES;
} 
```

The phone DOES vibrate so the notification IS there, but it doesn't seem to trigger the observer. I suppose that this is because the view controller's didViewLoad method hasn't been called yet. I am not sure how to work this around. I suppose I could use UIStoryboard's instantiateViewControllerWithIdentifier: method to make sure the view controller is actually there, but wouldn't I be getting an "extra" instance of it, in addition to the one that will eventually be instantiated by the storyboard's own life cycle? Judging from what the on the class reference documentation says, it's not exactly meant to do this kind of thing.

Am I missing something very obvious here? In fact, is my approach the correct one for this kind of situation?

Thanks!

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-10T20:03:56.433

视图控制器不会加载它的视图，直到有东西询问它的视图。在启动时，这通常发生在`application:didFinishLaunchingWithOptions:`返回后。

你可能想知道为什么。答案是您可能会在启动时实例化多个视图控制器，其中一些是隐藏的。例如，如果您的窗口的根视图控制器是`UINavigationController`，您可能会加载带有视图控制器堆栈的导航控制器（用户上次在应用程序运行时推送的堆栈）。只有这个堆栈的顶部视图控制器是可见的，所以不需要加载其他视图控制器的视图。系统在加载任何视图之前一直等到`application:didFinishLaunchingWithOptions:`返回，以便只加载必要的视图。

因此，解决您的问题的一种方法就是向视图控制器询问其视图，从而强制它加载。如果您的视图控制器是窗口的根视图控制器，您可以这样做：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    UILocalNotification *localNotification = launchOptions[UIApplicationLaunchOptionsLocalNotificationKey];
    if (localNotification) {
        [[self.window rootViewController] view];
        [[NSNotificationCenter defaultCenter] postNotificationName:@"Resume" object:self userInfo:localNotification.userInfo];
        AudioServicesPlaySystemSound(kSystemSoundID_Vibrate);
    }

    return YES;
} 
```

另一种解决方法是开始在视图控制器的`initWithCoder:`方法中观察通知：

```
- (id)initWithCoder:(NSCoder *)aDecoder {
    if (self = [super initWithCoder:aDecoder]) {
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(resumeByNotification:) name:@"Resume" object:nil];
    }
    return self;
} 
```

当视图控制器从 MainStoryboard 实例化时调用，这发生在`application:didFinishLaunchingWithOptions:`消息之前。

# android - Turn on GPS from service not Activity on Android

> ID：14801892
> 
> 赞同：0
> 
> 时间：2013-02-10T19:49:28.170
> 
> 标签：android, android-intent, gps, android-service

I have service where I need to turn on GPS forcefully I tried some of the code which are working good on activity codes are like,

```
Intent intent=new Intent("android.location.GPS_ENABLED_CHANGE");
    intent.putExtra("enabled", true);
    sendBroadcast(intent); 
```

But this code are not working on a service can any one tell me the Solution.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:56:33.000

与其试图强行打开 GPS，不如使用下面的代码打开设置，让用户在愿意的情况下启用 GPS。还在清单中添加适当的权限。

```
 LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
 if(!locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER )) 
  { 
     Intent myIntent = new Intent( Settings.ACTION_LOCATION_SOURCE_SETTINGS ); 
     startActivity(myIntent);
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T06:35:23.490

1.  仅适用于有根电话。
2.  必须安装 BusyBox。
3.  在代码中不是微不足道的。
4.  与 /system 区域混淆，因此很危险（可能是软砖）

如果您足够勇敢，请尝试我创建的样本，该样本收集了互联网上的所有信息。我既不认为不负责任。

[http://rapidshare.com/files/3977125468/GPSToggler-20130214.7z](http://rapidshare.com/files/3977125468/GPSToggler-20130214.7z)

（仅限勇敢的心）

# struts - Struts 1.3 not able to validate using xml ValidatorForm

> ID：14801893
> 
> 赞同：0
> 
> 时间：2013-02-10T19:49:31.877
> 
> 标签：struts, struts-1, struts-validation, struts1

I am making simple login page and trying to validate it using struts `ValidatorForm` but its not working. But same code worked for `DynaValidatorForm`. Not able to understand what's problem. It is not showing any error when I click login button. Here is my code.

**login.jsp**

```
 <body>  
    <div style="color:red">  
                <html:errors />  
            </div>  
            <html:form action="/Login" >  
                User Name : <html:text name="LoginForm" property="username" /> <br>  
                Password  : <html:password name="LoginForm" property="password" /> <br>  
                <html:submit value="Login" />  
            </html:form>  
            </body> 
```

**LoginAction.java**

```
public class LoginAction extends Action  

{  public ActionForward execute(ActionMapping mapping, ActionForm form,  
        HttpServletRequest request, HttpServletResponse response)  
        throws Exception {  

    LoginForm loginForm=(LoginForm) form;  
     String userName = loginForm.getUsername();  
        String password = loginForm.getPassword();  
        if(userName.equals("sumeet") )  
        {  
            return mapping.findForward("success");  
        }  
        else  
        {  
            return mapping.findForward("failure");  
        } 
```

**struts.config**

```
 <?xml version="1.0" encoding="UTF-8"?>  
    <!DOCTYPE struts-config PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 1.3//EN" "http://struts.apache.org/dtds/struts-config_1_3.dtd">  
    <struts-config>  
    <form-beans>  
            <form-bean name="LoginForm" type="com.ibm.Forms.LoginForm" >  
            </form-bean>  
    </form-beans>  

        <global-exceptions>  
        </global-exceptions>  

        <global-forwards>  
        </global-forwards>  

        <action-mappings>  
            <action name="LoginForm" path="/Login" scope="session" input="/login.jsp" type="com.ibm.Action.LoginAction" cancellable="true" validate="true">  
            <forward name="success" path="/success.jsp"/>  
            </action>  
        </action-mappings>  

        <message-resources parameter="test2.resources.ApplicationResources"/>  
        <plug-in className="org.apache.struts.validator.ValidatorPlugIn">  
    <set-property property="pathnames" value="/WEB-INF/validator-rules.xml,/WEB-INF/validation.xml"/>  
    </plug-in>  
    </struts-config> 
```

**valdiation.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>  
    <!DOCTYPE form-validation PUBLIC "-//Apache Software Foundation//DTD Commons Validator Rules Configuration 1.1.3//EN" "http://jakarta.apache.org/commons/dtds/validator_1_1_3.dtd" >  
    <form-validation>  

    <formset>  
            <form name="LoginForm">  
                <field property="username" depends="required">  
                                </field>  

    <field property="password" depends="required,minlength">  
            <arg1 key="${var:minlength}" name="minlength" resource="false"/>  
              <var>  
              <var-name>minlength</var-name>  
              <var-value>6</var-value>  
              </var>  
              </field>  
              </form>  
           </formset>  
    </form-validation> 
```

Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:44:24.997

您缺少`.do`html 表单的 action 属性。您不需要两个输入中的 name 属性。

```
<html:form action="/Login.do" >  
    User Name : <html:text property="username" /> <br>  
    Password  : <html:password property="password" /> <br>  
    <html:submit value="Login" />  
</html:form> 
```

# ruby-on-rails - 如何使用 Ubuntu 12.04 云实例服务器设置 Michael Hartl 的 Ruby on Rails 开发环境？

> ID：14801894
> 
> 赞同：0
> 
> 时间：2013-02-10T19:49:32.470
> 
> 标签：ruby-on-rails, github, ubuntu-12.04, web-deployment, railstutorial.org

我目前正在关注 Michael Hartl 著名的 Rails 教程，以使用 Rails 构建一个 twitter 应用程序。使用我的 MacOSX 一切都很棒。我可以使用 Sublime Text 2、Github、Heroku、iTerms 无缝且毫不费力地推送到 heroku 云。

问题是，我安装了一个 Ubuntu 12.04 的云实例，我目前只能使用终端通过 SSH 连接进行操作。无论如何我可以设置一个开发环境，以便我可以按照 Hartl 的指示无缝工作，但是我现在不是将 Git 存储库推送到 Heroku，而是使用 Ubuntu 推送到云实例？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:59:02.753

关于将 Rails 部署到 VPS 的教程有很多，但对我来说最有价值的是[这个 Railscast](http://railscasts.com/episodes/335-deploying-to-a-vps)，它实际上是付费的，但对开发人员的好处远远超过 9 美元。

# jquery - 检查年龄验证

> ID：14801900
> 
> 赞同：0
> 
> 时间：2013-02-10T19:50:08.007
> 
> 标签：jquery, cookies, popup

我有一些代码，但它不适合我。我认为 cookie 不起作用，因为每当我尝试访问该站点时，都会显示弹出窗口。请帮忙。谢谢。

```
 if ($.cookie("userAge") == null) {
    displayVerification();
  }

  $("#verify").click(function() {
    $( "#verification-dialog" ).dialog("close");
    $.cookie("userAge", userAge);
    });   

  $("#no-verify").click(function() {
    window.location='http://google.pl';
    });  

  function displayVerification() {    
    $( "#verification-dialog" ).dialog({      
      closeOnEscape: false,
      dialogClass: "no-close",  
      draggable: false,
      minWidth: 490,
      modal: true,  
      resizable: false,     
      title: "Weryfikacja wieku"
    });
  } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-10T20:15:42.413

Cookie 在`localhost`. 您最好将您的网站托管到网络上检查一下。并尝试`($.cookie('userAge') == undefined)`代替`($.cookie('userAge') == null)`

编辑：我像`($.cookie("userAge") == undefined)`以前一样给了。现在将其更改为单引号。对不起错字

# php - 最好的方法是什么，可以在所有文件中访问但在一个文件中声明的 PHP 常量？

> ID：14801901
> 
> 赞同：0
> 
> 时间：2013-02-10T19:50:20.650
> 
> 标签：php

最好的方法是什么，可以在所有文件中访问但在一个文件中声明的 PHP 常量？

文件 A.php

```
 const MAX_VIDEOS = 4; 
```

可在以下位置访问：

文件 B.php

```
 $maxvideosplusone = MAX_VIDEOS + 1; 
```

如果你对这个问题有一个面向对象的建议就更好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T19:53:40.530

请记住， const 关键字是为 CLASS 使用而设计的。如果你想调用它，那么你需要做 MyClass::CONSTANT。如果您使用的是程序方法，那么您需要使用[定义函数](http://www.php.net/manual/en/function.define.php)。例如：

```
define('MAX_VIDEOS', 4); 
```

在`file A.php`并使用[包含](http://www.php.net/manual/en/function.include.php)在`file B.php`：

```
include('file A.php'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T19:53:00.493

您可以在一个文件中定义变量，然后将其包含在任何其他文件中：

定义它的文件。（文件 A.php）

```
<?php
    define('MAX_VIDEOS', 4);
?> 
```

包含常量的文件（文件 B.php）

```
<?php
    include_once("fileconstants.php");

    print MAX_VIDEOS + 1;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T19:52:18.303

你可以像这样使用[define()](http://www.php.net/manual/en/function.define.php)：

```
define('MAX_VIDEOS', 4); 
```

从 PHP 5.3 开始，您也可以在类之外使用 const 关键字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T19:52:38.517

```
define("MY_VAR", $value); 
```

用法：

```
MY_VAR; 
```

# java - 为什么我的动画在第一次播放时不流畅？

> ID：14801909
> 
> 赞同：0
> 
> 时间：2013-02-10T19:51:50.077
> 
> 标签：java, animation, timer, jscrollpane

我通过更改 a 的水平滚动条的值制作了动画`JScrollPane`，类似于 android OS 屏幕之间的过渡。在跑步的前几秒（最多 10 秒），如果我要求动画，它不流畅并且有跳跃；但是在我玩了一段时间之后（要求动画），它变得非常流畅。为什么会发生这种情况，更重要的是如何解决？

**我并不是说我的动画的前几秒不流畅，我的意思是当我第一次启动我的程序时，我要求动画不流畅，但后来，在接下来的时间里，那是平滑的**。

```
 final JScrollBar br = mainContainerScrollPane.getHorizontalScrollBar();
        ActionListener toTheRight = new ActionListener()
    {
        @Override
        public void actionPerformed(ActionEvent e)
        {
            if (br.getValue() + 140 <= destinationScreenValue)
            {
                br.setValue(br.getValue() + 140);
            } else
            {
                br.setValue(destinationScreenValue);
                currentScreenName = destinationScreenName;
                timer.stop();
            }
        }
    };
        timer = new Timer(10, toTheRight);
        timer.setRepeats(true);
        timer.setCoalesce(true);
        timer.start(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T20:46:33.433

以 100 Hz 运行几乎会立即使 EDT 饱和，这将与正常的 JVM 启动开销相冲突。一些替代方案：

*   使用[此处](https://stackoverflow.com/a/3256941/230513)显示的方法检查您的动画预算。

*   尝试以较低的速率进行[分析](https://stackoverflow.com/q/2064427/230513)，以找到适合您的目标平台的最佳值。

*   `Timer`指定超过启动开销的初始延迟。

*   从较低的帧速率开始，并在事情稳定下来*后*使用更短的延迟来提高值。

附录：以下是一些动态改变动画速率的示例：

*   [`Test`](https://stackoverflow.com/a/11233735/230513)其中一个`FloatSpring`模拟[胡克定律](http://en.wikipedia.org/wiki/Hooke%27s_law)。

*   [`TestAnimatedWindow`](https://stackoverflow.com/a/14796414/230513)动态调整 a 的边界`Window`。

# java - 将字符串数组从 c 传递给 java jni

> ID：14801914
> 
> 赞同：-1
> 
> 时间：2013-02-10T19:52:10.010
> 
> 标签：java, c++, java-native-interface, arrays

好的，我正在做一个 java 本机接口（jni）项目，我正在尝试将一个字符串数组从 c++ 传递给 java。这是怎么做的。我不知道该怎么做。我所做的只是直接传递数组并在 Google 上花费数小时。我没有尝试过其他任何东西，因为我不知道该尝试什么。我已经看到有关如何在另一个方向进行转换的帖子和答案，但不是这样。我也看到它是用 char 数组完成的，但这种方法看起来很复杂。

我什至用 int 数组尝试过这个，它不会工作

```
jintArray t[3];
return t; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:01:24.900

我建议您阅读[JNI 规范](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/functions.html#string_operations)`NewStringUTF`中的函数。这真的很简单。

# php - 使用贝宝 IPN 的令牌系统？

> ID：14801918
> 
> 赞同：1
> 
> 时间：2013-02-10T19:52:26.070
> 
> 标签：php, mysql, paypal, paypal-ipn

这是我上一篇文章的后续。我终于设法解决了我遇到的贝宝 IPN 问题。它发送信息，并将信息记录到我的数据库中。所以没有问题了。

但是现在我需要将他们在成功付款后支付的信用额度记入用户帐户。

我有一个数据库，其中有一个名为 members 的表和一个名为 balance 的列。

付款成功后如何更新会员余额字段？

这是 ipn.php 文件代码：

```
<?php
// Database variables
$host = "localhost"; //database location
$user = "XXXXXXX"; //database username
$pass = "XXXXXXX"; //database password
$db_name = "XXXXXXXX"; //database name
$test_email="";
// PayPal settings
$paypal_email = 'XXXXXXX@gmail.com';
$return_url = 'http://www.XXXX/successful.php';
$cancel_url = 'http://www.XXXX/payment-cancelled.htm';
$notify_url = 'http://www.XXXXXX/payments.php';
$item_name = 'Test Item';
$item_amount = 'amount';
// Include Functions
include("functions.php");
//Database Connection
$link = mysql_connect($host, $user, $pass);
mysql_select_db($db_name);
// Check if paypal request or response
if (!isset($_POST["txn_id"]) && !isset($_POST["txn_type"])){
// Firstly Append paypal account to querystring
$querystring .= "?business=".urlencode($paypal_email)."&";

// Append amount& currency (£) to quersytring so it cannot be edited in html

//The item name and amount can be brought in dynamically by querying the $_POST['item_number'] variable.
$querystring .= "item_name=".urlencode($item_name)."&";
$querystring .= "amount=".urlencode($item_amount)."&";

//loop for posted values and append to querystring
foreach($_POST as $key => $value){
  $value = urlencode(stripslashes($value));
  $querystring .= "$key=$value&";
}

// Append paypal return addresses
$querystring .= "return=".urlencode(stripslashes($return_url))."&";
$querystring .= "cancel_return=".urlencode(stripslashes($cancel_url))."&";
$querystring .= "notify_url=".urlencode($notify_url);

// Append querystring with custom field
//$querystring .= "custom=".USERID;

// Redirect to paypal IPN
header('location:https://www.sandbox.paypal.com/cgi-bin/webscr'.$querystring);
exit();
}else{

// Response from Paypal
// read the post from PayPal system and add 'cmd'
$req = 'cmd=_notify-validate';
foreach ($_POST as $key => $value) {
  $value = urlencode(stripslashes($value));
  $value = preg_replace('/(.*[^%^0^D])(%0A)(.*)/i','${1}%0D%0A${3}',$value);// IPN fix
  $req .= "&$key=$value";

}

// assign posted variables to local variables
$data['item_name']   = $_POST['item_name'];
$data['item_number']   = $_POST['item_number'];
$data['payment_status']  = $_POST['payment_status'];
$data['payment_amount']  = $_POST['mc_gross'];
$data['payment_currency'] = $_POST['mc_currency'];
$data['txn_id'] = $_POST['txn_id'];
$data['receiver_email']  = $_POST['receiver_email'];
$data['amount'] = $_POST['amount'];
$data['custom'] = $_POST['custom'];
$payment_status = $_POST['payment_status'];

// post back to PayPal system to validate
$header = "POST /cgi-bin/webscr HTTP/1.0\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "Content-Length: " . strlen($req) . "\r\n\r\n";

//  $paypal_url = "www.paypal.com";
$paypal_url = "www.sandbox.paypal.com";
  $fp = fsockopen ($paypal_url, 80, $errno, $errstr, 30);

if (!$fp) {
  // HTTP ERROR
} else {
  fputs ($fp, $header . $req);
  while (!feof($fp)) {
   $res = fgets ($fp, 4096);

   if($payment_status == "Completed" || $payment_status == "Pending"){
        // Validate payment (Check unique txnid & correct price)
        $valid_txnid = check_txnid($data['txn_id']);
        $valid_price = check_price($data['payment_amount'], $data['item_number']);
        // PAYMENT VALIDATED & VERIFIED!
        if($valid_txnid && $valid_price){   
         $orderid = updatePayments($data);
         if($orderid){  
          // Payment has been made & successfully inserted into the Database  
          @mail($test_email, "PAYPAL DEBUGGING", "Payment has been made & successfully inserted into the Database");
          exit();   
         }else{    
          // Error inserting into DB
          // E-mail admin or alert user
          @mail($test_email, "PAYPAL DEBUGGING", "Error inserting into DB");
          exit();
         }
        }else{  
         // Payment made but data has been changed
         // E-mail admin or alert user

         //
         @mail($test_email, "PAYPAL DEBUGGING", "Payment made but data has been changed");
         exit();
        }        

   }
   if (strcmp($res, "VERIFIED") == 0) {

        // Used for debugging
        @mail($test_email, "PAYPAL DEBUGGING", "Verified Response<br />data = <pre>".print_r($post, true)."</pre>");

        // Validate payment (Check unique txnid & correct price)
        $valid_txnid = check_txnid($data['txn_id']);
        $valid_price = check_price($data['payment_amount'], $data['item_number']);
        // PAYMENT VALIDATED & VERIFIED!
        if($valid_txnid && $valid_price){   
         $orderid = updatePayments($data);
         if($orderid){  
          // Payment has been made & successfully inserted into the Database  
          @mail($test_email, "PAYPAL DEBUGGING", "Payment has been made & successfully inserted into the Database");    
         }else{    
          // Error inserting into DB
          // E-mail admin or alert user
          @mail($test_email, "PAYPAL DEBUGGING", "Error inserting into DB");
         }
        }else{  
         // Payment made but data has been changed
         // E-mail admin or alert user

         //
         @mail($test_email, "PAYPAL DEBUGGING", "Payment made but data has been changed");
        }        

   }else if (strcmp ($res, "INVALID") == 0) {

        // PAYMENT INVALID & INVESTIGATE MANUALY!
        // E-mail admin or alert user

        // Used for debugging
        @mail($test_email, "PAYPAL DEBUGGING", "Invalid Response<br />data = <pre>".print_r($post, true)."</pre>");
   } 
  } 
fclose ($fp);
}
}
?> 
```

这是function.php的代码

```
<?php
// functions.php
function check_txnid($tnxid){
global $link;
return true;
$valid_txnid = true;
        //get result set
        $sql = mysql_query("SELECT * FROM `payments` WHERE txnid = '$tnxid'", $link); 
if($row = mysql_fetch_array($sql)) {
                $valid_txnid = false;
}
        return $valid_txnid;
}
function check_price($price, $id){
        $valid_price = false;
        //you could use the below to check whether the correct price has been paid for the product

/*
$sql = mysql_query("SELECT amount FROM `products` WHERE id = '$id'"); 
        if (mysql_numrows($sql) != 0) {
  while ($row = mysql_fetch_array($sql)) {
   $num = (float)$row['amount'];
   if($num == $price){
        $valid_price = true;
   }
  }
        }
return $valid_price;
*/
return true;
}
function updatePayments($data){
        global $link;
if(is_array($data)){   
                $sql = mysql_query("INSERT INTO `payments` (txnid, payment_amount, payment_status, itemid, createdtime) VALUES (
                                '".$data['txn_id']."' ,
                                '".$data['payment_amount']."' ,
                                '".$data['payment_status']."' ,
                                '".$data['item_number']."'  ,
                                '".date("Y-m-d H:i:s")."'
                                )", $link);
        return mysql_insert_id($link);
        }
}
?> 
```

function.php 文件与 ipn.php 文件一起使用，以便将信息来回发送到 paypal 并更新 mysql 数据库。

任何帮助，将不胜感激。

谢谢

# javascript - 使用 vanilla JavaScript 在标签前插入元素

> ID：14801921
> 
> 赞同：21
> 
> 时间：2013-02-10T19:52:45.503
> 
> 标签：javascript

```
<html>
  ...
  <body>
    ...
  // element should be inserted here
  </body>
</html> 
```

我对 vanilla Javascript 不是很熟悉，一直使用 jQuery。到目前为止，我尝试过这个，但是这让元素位于`<head>`and的中间`<body>`。

```
var bodyTag = document.getElementsByTagName('body')[0];
bodyTag.parentNode.insertBefore(myElement, bodyTag); 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-02-10T19:53:38.227

这很简单。使用[appendChild](https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild)方法，它可以写成：

```
document.body.appendChild(myElement); 
```

# eventmachine - 是否有任何 ramaze 和 eventmachine 示例一起工作？

> ID：14801922
> 
> 赞同：1
> 
> 时间：2013-02-10T19:52:48.093
> 
> 标签：eventmachine, ramaze

如何将 ramaze 与 eventmachine 一起使用？我找不到任何启用 ramaze 的 EM 的示例。例如类似于 async sinatra 的东西？

谢谢

# python - python的直方图均衡化

> ID：14801923
> 
> 赞同：5
> 
> 时间：2013-02-10T19:52:50.390
> 
> 标签：python, image-processing, histogram, histogram-equalization

我有这个例程来做照片的直方图均衡：

```
def histeq(im,nbr_bins=256):

   #get image histogram
   imhist,bins = histogram(im.flatten(),nbr_bins,normed=True)
   cdf = imhist.cumsum() #cumulative distribution function
   cdf = 255 * cdf / cdf[-1] #normalize

   #use linear interpolation of cdf to find new pixel values
   im2 = interp(im.flatten(),bins[:-1],cdf)

   return im2.reshape(im.shape), cdf

#im = array(Image.open('AquaTermi_lowcontrast.jpg').convert('L'))
im = array(Image.open('Unequalized.jpg').convert('L'))
#Image.open('plant4.jpg').convert('L').save('inverted.jpg')

im2,cdf = histeq(im)

plt.imshow(im2)
plt.savefig("outputhisto.jpg") 
```

当我使用来自 wiki 页面的[图片进行](http://en.wikipedia.org/wiki/File:Unequalized_Hawkes_Bay_NZ.jpg)[直方图均衡](http://en.wikipedia.org/wiki/Histogram_equalization)运行时，结果如下： ![在此处输入图像描述](../Images/cb9149a3d8fe24cad5b67da285e10335.png)

而不是将图像的对比度适当地调整为类似[this](http://en.wikipedia.org/wiki/File:Equalized_Hawkes_Bay_NZ.jpg)的东西。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T20:09:45.783

您确定您只是没有使用错误的颜色图进行渲染吗？尝试

```
plt.imshow(im2, cmap=plt.cm.gray) 
```

或者

```
plt.imshow(im2, cmap=plt.get_cmap('gray')) 
```

# android - 是否可以隐藏系统栏

> ID：14801928
> 
> 赞同：6
> 
> 时间：2013-02-10T19:53:03.170
> 
> 标签：android, android-4.2-jelly-bean

我创建了一个启动器，以便在内部应用程序中使用它。出于某些安全原因，我想隐藏系统栏（对参数的访问权限以及对已安装应用程序的访问权限的命令）。但我不知道该怎么做。将使用的平板电脑未植根。你能帮我吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-27T05:48:39.543

你不能隐藏它，但你可以禁用它，除了家。为此，您可以将您的应用程序作为主类别并让用户选择。

```
<category android:name="android.intent.category.HOME" /> 
```

其余都可以禁用。

将此添加到清单中。

```
<uses-permission android:name="android.permission.EXPAND_STATUS_BAR"/> 
```

在 onCreate() 里面

```
this.requestWindowFeature(Window.FEATURE_NO_TITLE); 
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.activity_home);
    View v = findViewById(R.id.home_view);
    v.setSystemUiVisibility(View.SYSTEM_UI_FLAG_LOW_PROFILE); 
```

其中 home_view 是 xml 文件的父视图。

```
 @Override
     public boolean onKeyDown(int keyCode, KeyEvent event) {
            return false;
        }

 public void onWindowFocusChanged(boolean hasFocus)
     {
             try
             {
                if(!hasFocus)
                {
                     Object service  = getSystemService("statusbar");
                     Class<?> statusbarManager = Class.forName("android.app.StatusBarManager");
                     Method collapse = statusbarManager.getMethod("collapse");
                     collapse .setAccessible(true);
                     collapse .invoke(service);
                }
             }
             catch(Exception ex)
             {
             }
     } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-09-13T08:34:54.537

您可以隐藏我使用此代码隐藏的底部栏：

```
getWindow().getDecorView().setSystemUiVisibility(View.GONE); 
```

将此代码用于带有键盘或遥控器的 android 框。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-10T19:56:38.767

> 将要使用的平板电脑没有root

那你就藏不住了。但是，您可以[`SYSTEM_UI_FLAG_HIDE_NAVIGATION`](http://developer.android.com/reference/android/view/View.html#SYSTEM_UI_FLAG_HIDE_NAVIGATION) 暂时隐藏它，但一旦用户触摸屏幕，它就会变得可见：

> 有一个限制：因为导航控件非常重要，所以最少的用户交互会导致它们立即重新出现。发生这种情况时，这两个标志和`SYSTEM_UI_FLAG_FULLSCREEN`将自动清除，以便两个元素同时重新出现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-23T20:57:56.697

您可以使用 SYSTEM_UI_FLAG_HIDE_NAVIGATION 标志在 Android 4.0 及更高版本上隐藏导航栏。这个片段隐藏了导航栏和状态栏：

```
View decorView = getWindow().getDecorView();
// Hide both the navigation bar and the status bar.
// SYSTEM_UI_FLAG_FULLSCREEN is only available on Android 4.1 and higher, but as
// a general rule, you should design your app to hide the status bar whenever you
// hide the navigation bar.
int uiOptions = View.SYSTEM_UI_FLAG_HIDE_NAVIGATION
              | View.SYSTEM_UI_FLAG_FULLSCREEN;
decorView.setSystemUiVisibility(uiOptions 
```

请参阅以下内容：[隐藏导航栏](https://developer.android.com/training/system-ui/navigation.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-10T19:55:46.657

把它放在你的 onCreate() 方法中：

`requestWindowFeature(Window.FEATURE_NO_TITLE);`

编辑：隐藏状态栏将要求您的应用程序是全屏或植根。

# c++ - 如何使模板中的纯虚方法适应从它继承的类？

> ID：14801930
> 
> 赞同：0
> 
> 时间：2013-02-10T19:53:09.413
> 
> 标签：c++, templates, inheritance, typename

假设我有这个示例模板：

```
template<class T>
class Wrapper
{
virtual T* ReturnPtr() = 0;
}; 
```

然后我继承它：

```
class Buffer; //some class
class BufferWrapper : public Wrapper<Buffer>
{
virtual Buffer* ReturnPtr(); //<< (1.)
} 
```

1.  这是正确的方法吗？当我这样写它时，它不会给我任何智能感知错误，但是一旦我在某处写 ReturnPtr()，它就会告诉我“对象具有与成员函数不兼容的类型限定符”。
2.  这是否意味着不可能使用这样的虚拟方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T20:04:27.857

当您在对象上调用非`const`函数时，Intellisense 会显示该消息`const`。正如我们所见，`ReturnPtr`是非常量。您可能会看到此消息通常有两个原因。第一个是当您尝试调用类型`ReturnPtr`的`const`对象时`BufferWrapper`：

```
const BufferWrapper bw;
bw.ReturnPtr(); // Can't call non-const member function on const object 
```

第二种是当您的`BufferWrapper`对象是类的数据成员并且您从该类的成员函数中调用`ReturnPtr`它时：`const`

```
struct SomeClass
{
  BufferWrapper bw;

  void SomeClass::SomeFunc() const
  {
    bw.ReturnPtr(); // Cannot call non-const member function here
  }
} 
```

# netbeans-7 - 重新启动计算机后Netbeans无法正常工作

> ID：14801931
> 
> 赞同：1
> 
> 时间：2013-02-10T19:53:10.310
> 
> 标签：netbeans-7, ubuntu-11.10

我在 Ubuntu 11.10 上安装了 NetBeans 7.1。我不得不重新启动计算机以释放一些已被 apache 吞噬的磁盘空间。（apache2/error.log 已经占用了超过 90% 的磁盘空间。）现在我得到以下信息。

```
$ sudo netbeans
/bin/bash: : No such file or directory

$ sudo apt-get install netbeans
Reading package lists... Done
Building dependency tree       
Reading state information... Done
E: Unable to locate package netbeans

$ sudo apt-get remove netbeans
Reading package lists... Done
Building dependency tree       
Reading state information... Done
E: Unable to locate package netbeans 
```

如果我输入，我可以让 netbeans 运行

```
/usr/local/netbeans-7.2/bin/netbeans 
```

但是，当我尝试将 /usr/local/netbeans-7.2/bin/netbeans 复制到 /bin 时，我得到以下信息

```
$ sudo cp /usr/local/netbeans-7.2/bin/netbeans /bin
$ /bin/netbeans
/bin/bash: : No such file or directory 
```

/bin/bash 确实存在。

我注意到我需要刷新我的 FireFox 页面才能使用后退按钮。所以我想知道磁盘已满时是否会覆盖某些内容。也许某些文件结构已损坏。

# css - 悬停效果的列范围（而不是链接范围）

> ID：14801932
> 
> 赞同：1
> 
> 时间：2013-02-10T19:53:11.033
> 
> 标签：css

我正在编辑我的问题，因为我觉得它不是很清楚，并将答案放在问题和这里：

我们的目标是将文件浏览器表示为一列链接，其中包括：

（可选）一个小“+”或“-”图像（用于展开或缩回文件夹）。

一个文件名。将鼠标悬停在文件名上应将文件名的背景更改到*列*的右边缘，即使文件名很短。

找到的解决方案：

```
<div style="display:block;">
  <img src="+.png" />
  <a style="display:inline-block;width:200px;">A file name</a>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:06:31.680

我正在编辑我的问题，因为我觉得它不是很清楚，并将答案放在问题和这里：

我们的目标是将文件浏览器表示为一列链接，其中包括：

（可选）一个小“+”或“-”图像（用于展开或缩回文件夹）。

一个文件名。将鼠标悬停在文件名上应将文件名的背景更改到*列*的右边缘，即使文件名很短。

找到的解决方案：

```
<div style="display:block;">
  <img src="+.png" />
  <a style="display:inline-block;width:200px;">A file name</a>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T20:02:01.433

试试这个代码

```
 <a><img src="imagePlus.png" /></a><a class="forHover">Linklinklink2</a> 
```

CSS

```
 .forHover
 {
     display:block;
 } 
```

# php - 使用restler返回图像

> ID：14801938
> 
> 赞同：0
> 
> 时间：2013-02-10T19:53:40.163
> 
> 标签：php, restler

是否可以使用 Luracast Restler 返回图像？像打电话的东西：

```
http://myserver.com/api/users/002/avatar 
```

下载一个png？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T10:52:16.437

可以使用 Restler 提供图像。

您需要在您的**API 方法中执行以下操作**

*   为正确的图像类型（png、jpeg 等）设置内容类型标题

    ```
    header("Content-Type: image/png"); 
    ```

*   回显图像内容

    **例子**

    ```
    $im = imagecreatefrompng("test.png");

    header('Content-Type: image/png');

    imagepng($im); //this sends the image as the response
    imagedestroy($im); 
    ```

*   使用 exit 或 die 来停止执行，而不是通常的返回结果

# facebook - 获取用户新闻提要中的所有最新条目

> ID：14801942
> 
> 赞同：2
> 
> 时间：2013-02-10T19:53:57.513
> 
> 标签：facebook, facebook-graph-api, facebook-fql, feed

有谁知道检索用户整个新闻提要的方法？查询`/me/home`确实过滤了一些故事。此外，它似乎检索了头条新闻。有没有办法检索最新的故事？

不管是通过 Graph API 还是 FQL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T20:45:01.913

*me/home 正在按我的创建日期顺序拉帖子*

[https://developers.facebook.com/tools/explorer/135669679827333/?method=GET&path=me%3Ffields%3Dhome.limit(20).fields(created_time%2Cupdated_time%2Cid)](https://developers.facebook.com/tools/explorer/135669679827333/?method=GET&path=me%3Ffields%3Dhome.limit(20).fields(created_time%2Cupdated_time%2Cid))

试试这个作为您的查询，您可以修改字段以包含您需要的任何内容。

```
me?fields=home.limit(20).fields(created_time,updated_time,id) 
```

如果由于实际家庭提要中的 cookie 设置而导致它仍然无序，则可以通过在 sort() 中传递数组来强制它重新排序；“php”。

对于 sort() 参考： http: [//php.net/manual/en/function.sort.php](http://php.net/manual/en/function.sort.php)

# c# - 将多个 API 调用建模为 1 个对象（数据结构）

> ID：14801947
> 
> 赞同：1
> 
> 时间：2013-02-10T19:55:09.670
> 
> 标签：c#, xml, database, data-structures

我正在尝试对一系列复杂的 Api 调用进行建模，这些调用返回有关`SolarSystem`由`SolarSystemID`. 不同的 Api 调用返回有关的信息，`SolarSystem`并且并非所有信息都可以在 1 个 Api 调用中获得。

示例数据：

```
<eveapi version="2">
  <currentTime>2013-02-10 19:30:31</currentTime>
  <result>
    <rowset name="solarSystems" key="solarSystemID" columns="solarSystemID,shipJumps">
      <row solarSystemID="30004995" shipJumps="100"/>
      <row solarSystemID="30001746" shipJumps="3"/>
      <row solarSystemID="30004972" shipJumps="2960"/>
... 
```

和：

```
<eveapi version="2">
  <currentTime>2013-02-10 19:02:37</currentTime>
  <result>
    <rowset name="solarSystems" key="solarSystemID" columns="solarSystemID,shipKills,factionKills,podKills">
      <row solarSystemID="30000750" shipKills="0" factionKills="61" podKills="0"/>
      <row solarSystemID="30034971" shipKills="0" factionKills="113" podKills="0"/>
      <row solarSystemID="30003049" shipKills="0" factionKills="195" podKills="0"/>
... 
```

我有几个不同的 Api 调用类来进行单独的 Api 调用（`JumpsApiRequest`、、`KillsApiRequest`等）。我正在尝试将这些数据建模为一个`SolarSystems`类，该类将保存一`Dictionary<int, SolarSystem>`组`SolarSystem`由它们索引的对象`SolarSystemID`。

我能看到的唯一方法是创建`SolarSystems`一个`static`类（一次只能存在一个实例）并具有将返回我要求的特定信息的属性，如果信息是最新的，或者调用相应`ApiRequest`的来刷新信息，如果它不是最新的，然后返回最新信息。

我迷失的地方是，当信息来自不同的 Api 调用时，我不确定处理此问题的最佳方法。在我进行 Api 调用后，我可以遍历所有结果并使用 更新`SolarSystems`类索引的每个元素，`SolarSystemID`但这似乎效率很低。SolarSystems 的数量非常庞大。

我想知道我是否可以利用 Linq 的某些属性将其转换为类似数据库的场景，或者我是否会受益于创建数据库以在本地存储所有这些值？如果数据库是更好的方法，您推荐的解决方案是什么？

谢谢。

所有 Api Call 类都继承自基`ApiRequest`类。抽象`ApiRequest`类实现：

```
 public DateTimeOffset TimeRequested { get; set; }
    public DateTimeOffset CachedUntil { get; set; }
    public List<Parameter> Parameters { get; set; }
    protected XDocument Results { get; set; }
    protected static string _Host;
    private Uri CombinedUri { get; set; }

    private void CombineUri()
    public virtual void MakeRequest()
    protected virtual void ParseResults() 
```

每个子类都有对应于特定 Api 调用结果的属性，并实现`ParseResults`从 xml 中提取并将它们放入属性的覆盖方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:21:22.130

您可以进行以下实现：

*   使用包含每个 ApiRequest 子类的实例的 SolarSystems 类。

*   SolarSystems 将具有生成所有 ApiRequest 并将结果数据聚合到属性中的逻辑`Dictionary<int, SolarSystem>`。

*   因为每个 ApiRequest 子类都有不同的过期时间。在 ApiRequest 类上创建一个事件，该事件将在缓存过期时触发，指示应更新 SolarSystems 实例上的数据。

*   SolarSystems 类应该订阅每个 ApiRequest 实例上的事件。

*   为了轻松更新 SolarSystems 实例上的数据，SolarSystem 类可以具有与 ApiRequest 子类中包含的所有特定属性类似的结构。

一个例子：

您将拥有 ApiRequest 子类，该子类`JumpsApiRequest`将具有存储 jumps 的属性`Dictionary<int, JumpsHelperClass>`。并且 SolarSystem 类也将具有 type 的属性`JumpsHelperClass`。因此，当缓存过期事件触发时，它将以如下方式更新 SolarSystems 实例上的当前数据：

```
//MasterCollection  Dictionary<int, SolarSystem>
foreach (int item in MasterCollection.Keys)
{
    MasterCollection[item].Jumps  = JumpsApiRequestInstance.Jumps[item];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T20:28:44.450

您可以使用 LINQ to XML 从结果中查询您需要的信息。链接到有关 LINQ to XML 的 MSDN 信息：http: [//msdn.microsoft.com/en-us/library/bb387098.aspx](http://msdn.microsoft.com/en-us/library/bb387098.aspx)

# c# - 如何使用 C# 连接到 Mysql？

> ID：14801948
> 
> 赞同：3
> 
> 时间：2013-02-10T19:55:12.777
> 
> 标签：c#, mysql

我只是 C# 的初学者。我将 XAMPP 服务器用于 MySQL 数据库和 Visual C# 2010。然后我在 phpMyAdmin 中创建了一个名为“testdb”的数据库和一个名为“login”的表。我已经在表格中插入了我的用户名和密码。我正在做一个简单的 WinForm 登录，其中我为用户名和密码以及一个按钮制作了两个文本框。我已经完成了我的代码，并且没有编译器错误。但是我在一行中遇到了麻烦。它说“无法连接到任何指定的 MySQL 主机”。我将 MySql.Data 添加到我的参考资料中。我想在登录的时候取数据库表中的数据，然后给用户授权或者不匹配会提示错误信息。

这是我的代码：

```
using MySql.Data.MySqlClient; 

public bool Login(string username, string password)
{
    MySqlConnection con = new MySqlConnection("host=localhost;username…");
    MySqlCommand cmd = new MySqlCommand("SELECT * FROM login WHERE username='" +
                                      username + "' AND password='" + password + "';");

    cmd.Connection = con;

    con.Open(); // This is the line producing the error.

    MySqlDataReader reader = cmd.ExecuteReader();

    if (reader.Read() != false)
    {    
        if (reader.IsDBNull(0) == true)
        {
            cmd.Connection.Close();
            reader.Dispose();
            cmd.Dispose();
            return false;
        }    
        else
        {
            cmd.Connection.Close();
            reader.Dispose();
            cmd.Dispose();
            return true;
        }    
    }    
    else
    {
        return false;
    }    
} 
```

*我希望您的反馈。:)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-11T03:19:07.163

您的直接问题可能是连接字符串不正确或数据库服务器不可用。连接字符串应该是这样的

```
Server=localhost;Database=testdb;Uid=<username>;Pwd=<password>; 
```

并替换为您的实际值`<username>`。`<password>`

除此之外，您的代码还有几个问题，如果它打算成为生产代码，即使这只是一个学习一些东西的玩具项目，您也绝对应该研究它们。该列表按特定顺序排列，可能并不全面。

1.  不要对连接字符串进行硬编码。[而是将其移动到配置文件中。](http://msdn.microsoft.com/en-us/library/ms254494%28v=vs.110%29.aspx)
2.  不要在配置文件或源代码中包含纯文本密码。有多种解决方案，如[Windows 身份验证、证书](http://connectionstrings.com/mysql)或受[Windows 数据保护 API](http://msdn.microsoft.com/en-us/library/ms995355.aspx)保护的[密码](http://msdn.microsoft.com/library/system.security.cryptography.protecteddata.aspx)。
3.  不要仅仅`IDisposable`通过调用来处理实例`IDisposable.Dispose()`。[而是使用该`using`语句来释放资源，即使在出现异常的情况下也是如此。](https://stackoverflow.com/questions/538060/proper-use-of-the-idisposable-interface)
4.  不要使用字符串操作技术构建 SQL 语句。[而是用于`SqlParameter`防止 SQL 注入攻击。](http://msdn.microsoft.com/en-us/library/ms161953%28v=sql.105%29.aspx)
5.  不要将纯文本密码存储在数据库中。[相反，至少存储密码的加盐哈希并使用慢速哈希函数，而不是 MD5 或 SHA 系列的成员。](http://www.securityfocus.com/blogs/262)
6.  您可以使用[`IDbCommand.ExecuteScalar`](http://msdn.microsoft.com/en-us/library/system.data.idbcommand.executescalar.aspx)来检索标量结果并避免使用数据读取器。
7.  将布尔值与`true`or进行比较`false`是多余的，只会给您的代码添加噪音。而不是`if (reader.IsDBNull(0) == true)`你可以只使用`if (reader.IsDBNull(0))`. 这同样适用于`if (reader.Read() != false)`等价于`if (reader.Read() == true)`and 因此也`if (reader.Read())`。
8.  使用像[实体框架](http://msdn.microsoft.com/en-us/data/ef.aspx)这样的 O/R 映射器通常比在 SQL 命令级别上与数据库交互更受欢迎。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T20:22:21.843

尝试根据标准 MySQL ConnectionString 修改您的 ConnectionString：

```
Server=myServerAddress;Database=myDataBase;Uid=myUsername;Pwd=myPassword; 
```

资料来源： [MySQL 连接字符串](http://www.connectionstrings.com/mysql)

您还可以查看以下链接，该链接显示了如何使用 C# 连接到 MySQL 数据库：

[创建连接器/网络连接字符串 (MYSQL)](http://dev.mysql.com/doc/refman/5.0/en/connector-net-programming-connecting-connection-string.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-30T01:00:09.447

让它变得简单且无 sql 注入，并且不要忘记在您的引用中添加**MySql.Web** ，因为您使用**XAMPP**

```
 public bool Login(string username, string password)
        {
            DataTable dt = new DataTable();
            string config = "server=....";
            using (var con = new MySqlConnection { ConnectionString = config })
            {
                using (var command = new MySqlCommand { Connection = con })
                {
                    con.Open();
                    command.CommandText = @"SELECT * FROM login WHERE username=@username AND password=@password";
                    command.Parameters.AddWithValue("@username", username);
                    command.Parameters.AddWithValue("@password", password);
                    dt.Load(command.ExecuteReader());
                    if (dt.Rows.Count > 0)
                        return true;
                    else
                        return false;

                } // Close and Dispose command

            } // Close and Dispose connection
        } 
```

# c++ - GetQueuedCompletionStatusEx()、ReadDirectoryChangesW()

> ID：14801950
> 
> 赞同：2
> 
> 时间：2013-02-10T19:55:31.997
> 
> 标签：c++, winapi, iocp, readdirectorychangesw

我正在使用`GetQueuedCompletionStatusEx()`并`ReadDirectoryChangesW()`尝试接收多个文件系统层次结构更改的通知。

我注意到当一次有很多更改时，我会收到错误 0x10C 的完成数据包。此错误代码不在我包含的头文件中的任何位置，也不在文档中（[http://msdn.microsoft.com/en-us/library/windows/desktop/aa365465(v=vs.85 ).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365465(v=vs.85).aspx) )。后来稍微挖掘一下，我发现它是`STATUS_NOTIFY_ENUM_DIR`在`ntstatus.h`. 文档中既没有提到 STATUS_NOTIFY_ENUM_DIR，也没有必要包含 ntstatus.h。MSDN 表明它应该是`ERROR_NOTIFY_ENUM_DIR`. 所以我想知道，这是文档中的错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T20:28:02.157

`ERROR_NOTIFY_ENUM_DIR`在 winerror.h 中定义：

```
//
// MessageId: ERROR_NOTIFY_ENUM_DIR
//
// MessageText:
//
// A notify change request is being completed and the information is not being returned in the caller's buffer. The caller now needs to enumerate the files to find the changes.
//
#define ERROR_NOTIFY_ENUM_DIR            1022L 
```

但是，1022 是 0x3FE。0x10C 是 268，这不是`ReadDirectoryChangesW()`应该返回的错误代码。因此，如果`ReadDirectoryChangesW()`直接返回`STATUS_NOTIFY_ENUM_DIR`而不是将其翻译成`ERROR_NOTIFY_ENUM_DIR`，那么这很可能是其`ReadDirectoryChangesW()`自身内部的一个错误，除非它是 winerror.h 中的错字。

`STATUS_NOTIFY_ENUM_DIR`由一些较低级别的系统使用，例如[`NT_TRANSACT_NOTIFY_CHANGE`](http://msdn.microsoft.com/en-us/library/ee441586.aspx)and [`NtNotifyChangeDirectoryFile()`](http://undocumented.ntinternals.net/UserMode/Undocumented%20Functions/NT%20Objects/File/NtNotifyChangeDirectoryFile.html)，表示通知数据大于输出缓冲区可以容纳的大小。正如其自己的文档中所述，这就是`ERROR_NOTIFY_ENUM_DIR`in的含义。`ReadDirectoryChangesW()`

其他函数的一些返回值，如函数`WaitFor...()`族和 OverlappedIO/IOCP 函数，直接映射到`STATUS_...`内部代码，但没有这样记录，因为这是一个私有的实现细节。例如，如果您查看 winbase.h，则有几十个常见的返回码，如`WAIT_OBJECT_0`、`WAIT_IO_COMPLETION`、`STILL_ACTIVE`和各种`EXCEPTION_...`，它们直接映射到`STATUS_...`值。

不过，在这种情况下，情况似乎并非如此。 [根据 MSDN](http://support.microsoft.com/kb/113996)，`STATUS_NOTIFY_ENUM_DIR`确实应该映射到`ERROR_NOTIFY_ENUM_DIR`，所以这似乎是一个错误：

> 当由于来自 Win32 子系统的输入/输出 (I/O) 请求而调用内核模式驱动程序时，内核模式驱动程序返回的状态代码将被转换为状态代码对应的 Win32 错误代码。下表显示了从 Windows NT 状态代码到 Win32 错误代码的映射。
> 
> ```
> WINDOWS NT STATUS CODE                  WIN32 ERROR CODE
> ------------------------------------------------------------------
> ...
> STATUS_NOTIFY_ENUM_DIR                  ERROR_NOTIFY_ENUM_DIR
> ... 
> ```

# php - PHP file_get_contents 返回 false

> ID：14801955
> 
> 赞同：23
> 
> 时间：2013-02-10T19:56:07.413
> 
> 标签：php, json

也许我已经坐在这里太久了，但为什么会`file_get_contents`回到`false`这里？我已经剪切并粘贴了 URL，它工作正常吗？

```
$url = "http://jobs.github.com/positions.json?search=" . $as_any . "&location=" .       $location;
// URL contains http://jobs.github.com/positions.json?search=Project Manager&location=London
var_dump($url);
$json = file_get_contents($url);
var_dump($json);
$results = json_decode($json, TRUE);
var_dump($results);
exit; 
```

**编辑：**

我已经检查过了`allow_url_fopen`，它肯定是打开的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-10T20:27:13.857

尝试这个：

```
$query = http_build_query(array('search'=>$as_any, 'location'=>$location));
$url = "http://jobs.github.com/positions.json?" . $query; 
```

问题是您没有对包含空格的搜索词进行 URL 编码。该请求从服务器返回 400 错误，如果您启用了错误报告，您会注意到这一点。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-10T19:59:11.597

您可能需要在 php.ini 中启用 allow_url_fopen

[http://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen](http://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)

从文档中：

> 此选项启用支持访问 URL 对象（如文件）的 URL 感知 fopen 包装器。

您的服务器可能会阻止您使用 file_get_contents 打开位于 URL 中的文件。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-10T20:00:38.517

可能 allow_url_fopen 在你的 php.ini 中：http: [//php.net/manual/en/filesystem.configuration.php](http://php.net/manual/en/filesystem.configuration.php)

需要被允许。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2021-05-07T12:09:46.470

在我的情况下，在这个简单的函数上替换**file_get_contents()**

```
function get_content($URL){
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_URL, $URL);
    $data = curl_exec($ch);
    curl_close($ch);
    return $data;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-09T18:04:29.090

有时如果**file_get_contents**返回**false**（未找到），您应该查看 url 是否已**编码**。

*例子：*

> [http://test.net/демо/](http://test.net/%D0%B4%D0%B5%D0%BC%D0%BE/)

*应该：*

> [https://test.net/%D0%B4%D0%B5%D0%BC%D0%BE/](https://test.net/%D0%B4%D0%B5%D0%BC%D0%BE/)

# ubuntu - 卸载 nginx？

> ID：14801958
> 
> 赞同：10
> 
> 时间：2013-02-10T19:56:21.260
> 
> 标签：ubuntu, nginx, ubuntu-12.04

我犯了严重错误，我只想卸载然后重新安装一个新副本以重新开始。

我试过了

```
#sudo apt-get nginx uninstall 
```

那没有那么好

```
cd /usr/local/src
wget http://nginxcp.com/nginxadmin2.3-stable.tar
tar xf nginxadmin2.3-stable.tar
cd publicnginx
./nginxinstaller uninstall 
```

没有运气，有人可以帮我吗？运行ubuntu 12.04服务器版，长期支持

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-10T19:58:26.807

要摆脱与 nginx 相关的所有内容（配置等），请执行以下操作：

```
sudo apt-get purge nginx 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-05-12T03:50:49.147

卸载nginx包括依赖包

* * *

检查状态和版本

```
sudo service nginx status
nginx -v 
```

首先停止 nginx 服务

```
sudo service nginx stop 
```

删除除配置文件之外的所有文件。

```
sudo apt-get remove nginx nginx-common 
```

*删除一切。*

```
sudo apt-get autoremove 
```

删除 nginx 使用的不再需要的依赖项。

```
sudo service nginx status 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-05-21T05:15:42.727

我已经尝试过这个及其工作

首先停止 nginx 服务

sudo 服务 nginx 停止

sudo apt-get purge nginx

sudo apt-get 自动删除

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-12-10T16:11:45.620

完全不用通配符

```
sudo apt-get purge nginx* 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-06-03T18:58:30.103

在 ubuntu 上

```
sudo apt-get purge nginx nginx-common 
```

# c# - 盒子里的颜色，c#控制台应用程序

> ID：14801959
> 
> 赞同：0
> 
> 时间：2013-02-10T19:56:21.787
> 
> 标签：c#

我正在创建一个边框框，它应该在边框处创建一个具有不同颜色的框。这是我的代码：

```
class BorderedBox : ColoredBox
{
    public int heigth;
    public int width;

    ConsoleColor color = borderColor;

    public BorderedBox (Point p, int width, int height, ConsoleColor backColor, ConsoleColor borderColor)
        : base (p, width, height, backColor)
    {
            this.borderColor = borderColor;
    }
    public override void Draw()
    {
        for (int j = 0; j < height; j++)
        {
            Console.SetCursorPosition(p.X, p.Y + j);

            for (int i = 0; i < width; i++)
            {   
                if (i == 0 || i == width - 1 || j == 0 || j == height - 1)
                Console.BackgroundColor = borderColor;

                else 

                Console.BackgroundColor = backColor;

                Console.Write(' ');

            }
        }
    }
} 
```

但是我在 [ ConsoleColor color = borderColor; ] ，它说“名称'borderColor'在当前上下文中不存在。有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T19:59:15.460

在您尝试分配`ConsoleColor color = borderColor`时，`borderColor`尚未定义。我怀疑你刚刚搞砸了你的变量声明，真正的意思是：

```
ConsoleColor borderColor; 
```

代替：

```
ConsoleColor color = borderColor; 
```

# boto - dajaxice collectstatic 创建一个临时文件

> ID：14801965
> 
> 赞同：0
> 
> 时间：2013-02-10T19:57:03.163
> 
> 标签：boto, django-staticfiles, django-storage, dajaxice

我在使用 Dajaxice 以及创建用于 ajax 的自定义 javascript 文件时遇到问题。当`manage.py collectstatic`安装了 Dajaxice 运行时，它会创建一个自定义的 javascript 文件。[这篇文章](https://stackoverflow.com/questions/12519243/dajaxice-javascript-core-file-not-getting-parsed/12641524#12641524)也提到了这个问题。在我的情况下运行：

```
python manage.py findstatic dajaxice/dajaxice.core.js 
```

给出：

```
Found 'dajaxice/dajaxice.core.js' here:
/private/var/folders/dp/yw0xd2f52yg7qmt992s72_9r0000gn/T/tmpRWRAGT 
```

在本地运行时。我遇到的问题是，当将它与 django-storages 配对并启动以从 Amazon S3 提供静态文件时，它会爆炸，因为该文件是引用绝对路径而不是相对路径创建的（我认为它的 boto 没有实现django-storages 不喜欢的东西）。错误如下所示：

```
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/app/.heroku/python/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/app/.heroku/python/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/app/.heroku/python/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/app/.heroku/python/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/app/.heroku/python/lib/python2.7/site-packages/django/core/management/base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "/app/.heroku/python/lib/python2.7/site-packages/django/contrib/staticfiles/management/commands/collectstatic.py", line 163, in handle_noargs
    collected = self.collect()
  File "/app/.heroku/python/lib/python2.7/site-packages/django/contrib/staticfiles/management/commands/collectstatic.py", line 113, in collect
    handler(path, prefixed_path, storage)
  File "/app/.heroku/python/lib/python2.7/site-packages/django/contrib/staticfiles/management/commands/collectstatic.py", line 290, in copy_file
    source_path = source_storage.path(path)
  File "/app/.heroku/python/lib/python2.7/site-packages/django/core/files/storage.py", line 82, in path
    raise NotImplementedError("This backend doesn't support absolute paths.") 
```

（在这种情况下，我在 Heroku 上进行部署，这就是为什么我不能手动将创建的文件复制到静态位置并引用它）。有没有解决的办法？我可以让 Dajaxice 将生成的文件放在相对路径位置吗？或者我可以通过强制 django-storages/boto 接受绝对路径来解决它吗？或者，如果所有其他方法都失败了，是否有一种简单的方法可以预先生成文件，而不是在我收集静态时卸载我的所有 S3 依赖项，复制文件并强制 Dajax 停止查找生成的文件？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T09:23:25.713

我遇到了这个问题，请参阅[https://github.com/jorgebastida/django-dajaxice/issues/66](https://github.com/jorgebastida/django-dajaxice/issues/66)，使用

> python manager.py 收集静态

# git - 未能将一些参考资料推送到“https://github.com/myname/myrepo”

> ID：14801972
> 
> 赞同：2
> 
> 时间：2013-02-10T19:57:19.113
> 
> 标签：git, emacs, github, magit

关于 magit / push 的问题

我开始使用 magit，在 git 方面的经验很少。

我已经成功通过了 magit 手册：

```
adding
ignoring
staging
commiting locally 
```

然后，我尝试推送 github.com/myname。为此，我使用“P P”，然后输入我的用户名和密码。

如果失败

> 到`https://github.com/myname/myrepo`！[rejected] master -> master (non-fast-forward) error: failed to push some refs to `'https://github.com/myname/myrepo'`
> **hint: 更新被拒绝，因为你当前分支的尖端在
> 提示后面：它的远程对应。合并远程更改（例如“git pull”）
> 提示：在再次推送之前。
> 提示：有关详细信息，请参阅“git push –help”中的“关于快进的说明”。**
> git 异常退出，代码为 1。

我想我会用 git config --global push.default current 解决它，但它没有帮助。

我很高兴看到[推送到 github 时出错 - 更新被拒绝，因为推送的分支提示位于其遥控器后面，](https://stackoverflow.com/questions/14609263/geting-an-error-pushing-to-github-updates-were-rejected-because-a-pushed-branc)但没有让它工作

任何的想法 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T20:47:03.430

您必须先`pull`更改或`push -f`更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-17T18:53:11.543

我一直是使用 git pull --rebase 和 git push origin master 的忠实粉丝，因为很多你可以工作的地方都不允许使用 push -f。

```
git pull --rebase 
git push origin master 
```

rebase 会将您的更改应用到远程（在线网站）之后。该视频从字面上介绍了您的确切问题并使用 git pull --rebase [https://youtu.be/IhkvMPE9Jxs?t=10m36s解决了它](https://youtu.be/IhkvMPE9Jxs?t=10m36s)

# android - 如何通过wifi在电脑和智能手机之间进行通信

> ID：14801973
> 
> 赞同：3
> 
> 时间：2013-02-10T19:57:28.800
> 
> 标签：android, wifi, localhost

首先，我的目标是从我的 HTC one X 上的 chrome 访问我笔记本电脑上的本地服务器。本地服务器工作（wamp），并从 127.0.0.1 运行。

我不能依赖外部网络，因此我想创建一个本地 wifi 网络。

目前我在手机上打开了 Wi-Fi 热点。笔记本电脑成功连接到网络，手机居然认出了它。

笔记本电脑的 IP 是 192.168.1.150（我在笔记本电脑和手机上都找到了这个）。

我的问题是，在计算机中，当我尝试访问 192.168.1.150:80 时，我得到 403 Forbidden，而我的手机上什么也没有（我什至尝试发送数据包但没有成功）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T20:19:22.580

终于找到解决办法了！

[http://www.mobitechie.com/android-2/how-to-access-localhost-on-android-over-wifi/](http://www.mobitechie.com/android-2/how-to-access-localhost-on-android-over-wifi/)

本教程解释了我遇到的每一个问题（如何修复 403 错误并在防火墙中打开相关端口）。

# php - 以编程方式从 Google 获取关键字点击次数的最简单方法

> ID：14801978
> 
> 赞同：1
> 
> 时间：2013-02-10T19:58:16.557
> 
> 标签：php, javascript, json, screen-scraping

我正在编写一个基于**html/javascript/PHP**的**Web 应用程序**，它允许用户输入随机关键字并返回该关键字在 Google.com 上搜索时会产生**的命中数**

我知道这可以通过多种不同的方法来实现，但我想要的是**最简单的方法**。

如果我们选择允许 2% 的边际误差，您认为**最好的方法是什么？**你能展示一些示例代码吗？

## 方法一：屏幕抓取

使用 PHP 并`file_get_contents`像这样

```
$keyword = "Football";
$html = file_get_contents("http://www.google.com/?q=" . rawurlencode($keyword));
preg_match('/Results: - \d+ of about ([0-9,]+) for/', $html, $reg);
var_dump($reg[1]); 
```

但这对我来说并不完全，我想这会**违反谷歌的使用条款**？那会有什么影响？

## 方法 2：谷歌 Ajax API

使用 Google Ajax API 和`estimatedResultsCount`JSON 中的属性。我真的不知道如何实际执行此操作，因此如果您认为这将是更好的方法，您能否提供一些**示例代码**，以便我理解？

其他方法？我在这里真正要寻找的是关于使用**什么**技术以及**如何使用它们**的具体、更精确的答案。同样，为了清楚起见，还请提供一些示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:23:36.687

使用方法 2，使用 Google 的 API。

我建议检查 jQuery，尤其是[$.ajax](http://api.jquery.com/jQuery.ajax/)函数，并首先在[jsfiddle.net](http://jsfiddle.net/)中使用 API。

# python - 虚拟环境中的 0MQ

> ID：14801979
> 
> 赞同：3
> 
> 时间：2013-02-10T19:58:23.307
> 
> 标签：python, virtualenv, zeromq

通过执行以下操作，我能够在 Ubuntu 12.04 中安装 0MQ： $ sudo apt-get install libzmq-dev $ sudo apt-get install python-zmq

但是当我在 virtualenv 中使用它时，它找不到模块。我必须在我的 virtualenv 中做什么才能看到它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T19:59:07.187

创建 virtualenv 并激活它后，使用 pip 安装 Python 包。它们将安装到您的 virtualenv 中。

或者，当您创建 virtualenv 时，在其中启用系统范围的包（使用`--system-site-packages`开关），以便系统安装的包将在 virtualenv 中可见。

# c - 从C中的终端获取所有输出

> ID：14801982
> 
> 赞同：1
> 
> 时间：2013-02-10T19:58:33.533
> 
> 标签：c, linux, terminal

我目前正在开发一个 ssh 程序，我希望能够通过网络完全控制终端。我的问题是，如果我向服务器发送命令以在终端中运行，我如何获得终端打印的输出？我看过很多帖子说要使用该`popen()`命令，但从我尝试过的内容来看，我无法更改目录并使用它执行其他命令，只能使用简单的东西，例如`ls`. 除了将其发送到类似`command > filetoholdcommand`. 提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T23:22:01.003

我会把它作为评论，但我没有足够的代表，因为我是新人。cd 是一个内置的 shell 命令，所以你想使用 system()。但是 cd 对你的进程没有影响（你必须使用 chdir()，为此），所以你真正想要做的是通过 fork/exec 将 shell 作为子进程启动，将管道连接到它的 stdin 和 stdout，然后在用户会话或连接期间通过管道传输命令。

以下代码给出了总体思路。基本的和有缺陷的 - 使用 select() 而不是 usleep() 。

```
int argc2;
printf( "Server started - %d\n", getpid() );
char buf[1024] = {0};
int pid;
int pipe_fd_1[2];
int pipe_fd_2[2];
pipe( pipe_fd_1 );
pipe( pipe_fd_2 );

switch ( pid = fork() ) 
{
case -1:
    exit(1);
case 0: /* child */
    close(pipe_fd_1[1]);
    close(pipe_fd_2[0]);
    dup2( pipe_fd_1[0], STDIN_FILENO );
    dup2( pipe_fd_2[1], STDOUT_FILENO );
    execlp("/bin/bash", "bash", NULL);
default: /* parent */
    close(pipe_fd_1[0]);
    close(pipe_fd_2[1]);
    fcntl(pipe_fd_2[0], F_SETFL, fcntl(pipe_fd_2[0], F_GETFL, NULL ) | O_NONBLOCK );
    while(true)
    {
      int r = 0;
      printf( "Enter cmd:\n" );
      r = read( STDIN_FILENO, &buf, 1024 );
      if( r > 1 )
      {
        buf[r] = '\0';
        write(pipe_fd_1[1], &buf, r);
      }
      usleep(100000);
      while( ( r = read( pipe_fd_2[0], &buf, 1024 ) ) > 0 )
      {
        buf[r-1] = '\0';
        printf("%s", buf );
      }
      printf("\n");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T20:04:09.113

你想要“ [popen](http://linux.die.net/man/3/popen) ”功能。`ls /etc`这是运行命令并输出到控制台的示例。

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[])
{

  文件 *fp;
  整数状态；
  字符路径[1035]；

  /* 打开命令进行读取。*/
  fp = popen("/bin/ls /etc/", "r");
  如果（fp == NULL）{
    printf("运行命令失败\n");
    出口;
  }

  /* 一次读取一行输出 - 输出它。*/
  而（fgets（路径，sizeof（路径），fp）！= NULL）{
    printf("%s", 路径);
  }

  /* 关 */
  关闭（fp）；

  返回0；
}

```

# ios - UIPageViewController 缓存和交换具有相似内容的页面的视图层次结构

> ID：14801992
> 
> 赞同：1
> 
> 时间：2013-02-10T19:59:23.917
> 
> 标签：ios, uiview, uiviewcontroller, uipageviewcontroller

我的 UIViewController 中嵌入了一个 UIPageViewController。寻呼机可以包含 5-38 个页面（每个页面是 UIViewController 子类的一个实例），具体取决于具体情况。我注意到，根据我在每个页面上制作 UI 元素的复杂程度，应用程序会显着变慢，并且在滑动到下一页时非常慢。

事情是这样的——每个页面上的视图都是相同的，除了几个 UITextViews 的值。每次为新页面调用 viewControllerAtIndex 时，我都会在每个页面的 viewDidLoad 方法中构建视图。我觉得必须有一种方法可以为每个页面重复使用相同的视图，并且只需交换应该不同的文本值。谁能描述一个策略来做到这一点？

就像我说的，每个页面都有一个相同的视图层次结构，除了一些文本的值，所以我真的只是在寻找一种方法来维护每页一个基本的视图控制器，但缓存视图层次结构以重新使用每页，并根据页码换出一些简单的文本值。

**编辑**

我在原始帖子中忘记提及的是，我正在以编程方式构建我的视图，因为页面上的元素数量取决于用户在之前的屏幕上所做的选择。即可能有 5 个 TextView 或 10 个 TextView 等，具体取决于用户在前一个屏幕上选择的内容（在进入 UIPageViewController 之前）。话虽如此，我不相信基于 xib 的方法会起作用，因为初始布局是动态的。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T23:14:26.483

您是否尝试过使用基于 xib 的视图，您可以将其从 xib 中拉出一次，并保持对它的强烈引用。在控制器的 viewDidLoad 中，您可以将其视图设置为此 xib 基本视图，然后使用正确的文本填充文本视图。

# php - 它没有更新表 PDO 中的行

> ID：14801996
> 
> 赞同：1
> 
> 时间：2013-02-10T20:00:02.060
> 
> 标签：php

有人能告诉我为什么这段代码没有更新这些行中的列吗

```
$q2 = $db->prepare("insert into stat (clan_id,abbreviation) values (:cid,:abb) ON DUPLICATE KEY UPDATE abbreviation=:abb");
            $q2->execute(array(
                ":cid"=>$somevalue,
                ":abb"=>$abbrev
                )); 
```

缩写是我在此表中的唯一键，还有更多值，但为了清楚起见我删除了一些。

编辑：问题仍然存在，PDO 正在添加新条目，但是当它遇到重复时它不会更新

这是表结构，这里可能有问题吗？

```
CREATE TABLE IF NOT EXISTS `stats` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `clan_id` varchar(168) NOT NULL,
  `abbreviation` varchar(64) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `abbreviation` (`abbreviation`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=155146 ; 
```

# mysql - MySQL 连接和非法混合排序规则错误

> ID：14801998
> 
> 赞同：1
> 
> 时间：2013-02-10T20:00:09.467
> 
> 标签：mysql, concatenation

尝试连接某些值时，使用 MySQL 5.5.27 时不断出现错误。我已经搜索并看到了一堆字符集的答案（这无疑是我头上的一个 TAD），但我已经将我的所有表格都转换为*字符* `utf8-unicode-ci`集并且仍然得到错误。

当然有一种方法可以连接这些值，但我只是不知道如何。我是一个对 MySQL 比较陌生的 Oracle 人。

这是 SQL 行：

```
concat(pl.last_name,'-',format(money,0)) 
```

我得到：

```
#1270 - Illegal mix of collations (latin1_swedish_ci,IMPLICIT), (utf8_unicode_ci,COERCIBLE), (utf8_unicode_ci,COERCIBLE) for operation 'concat' 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T23:28:26.713

如果 money 确实是 VARCHAR 中的数字，则可以使用 cast。

试试这个：

```
concat_ws(pl.last_name,'-',cast(money AS unsigned)); // This is with decimals.
concat(`pl.last_name,'-',substring_index(money,',',1)) // Without decimals. If you use . i.e. the American currency notation you can substitute , with an . 
```

**编辑**

您应该首先尝试 `concat(pl.last_name,'-',format(money,0))`：

这是您可以使用的非常基本的 php 代码。

```
<?php

function selecting_data(){

    $host = "host";
    $user = "username";
    $password = "password";
    $database = "database";
    $charset = "utf8";

    $link = mysqli_connect($host, $user, $password, $database);
    mysqli_set_charset($charset, $link);
    IF (!$link) {
        echo('Unable to connect to the database!');
    } ELSE {

        $query = "SELECT lastname, format(money,0) FROM mytable"; //Select query
        $result = mysqli_query($link, $query);
        while ($rows = mysqli_fetch_array($result, MYSQLI_BOTH)){
            echo $rows['lastname']."<br>".$rows['money'] ; 
        }
    }
    mysqli_close($link);

}
?>

<html>
<head><title>title</title></head>
<body>
<?PHP echo selecting_data(); ?>
</body>
</html> 
```