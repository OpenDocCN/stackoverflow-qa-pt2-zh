# StackOverflow 问答 15771000-15771999

# browser-cache - Web浏览器缓存设计是什么导致缓存增长时性能下降

> ID：15771000
> 
> 赞同：1
> 
> 时间：2013-04-02T17:58:59.533
> 
> 标签：browser-cache

在描述 Web 浏览器的性能缓慢或不稳定时，几乎普遍的建议是“您是否尝试过清除缓存？”

由于我用过的每一个浏览器都得到了这个建议，我假设他们的缓存实现有共同点。

大量缓存数据会降低性能甚至导致浏览器故障是怎么回事？

浏览器缓存是如何在数据存储和检索级别实现的？

# javascript - KnockoutJS `with` 绑定和 IE8

> ID：15771005
> 
> 赞同：3
> 
> 时间：2013-04-02T17:59:18.137
> 
> 标签：javascript, html, internet-explorer-8, knockout.js

出于某种原因，我的代码在 IE8 中生成了以下错误，但在任何普通浏览器中都没有。

```
SCRIPT5022: Unable to parse bindings.
Message: TypeError: 'logoSrc' is undefined;
Bindings value: 'attr': { 'src': logoSrc } 
```

我确认确实定义了 logoSrc 属性，即使在 IE8 中，就在绑定之前，但它仍然失败。并且禁用与 logoSrc 的绑定只会导致下一个绑定失败。

html如下。我知道我以前使用过 with 绑定，所以我很确定这不是问题，而且 html 似乎已正确关闭。

```
<div data-bind="visible: mode() === 'print'" class="container-fluid">
    <!-- ko with: printVm -->
    <div class="row-fluid">
        <div class="span12">
            <div class="page-header">
                <div class="pull-right" style="width:140px;height:60px;overflow:hidden;">
                    <img data-bind="'attr': { 'src': logoSrc }" src="" />
                </div>
                <h2>Invoice Statement - <span data-bind="text: itemZeroClientName"></span></h2>
            </div>
            <strong>Invoice number:</strong> <span data-bind="text: invoiceId"></span>
            <strong>Invoice date:</strong> <span data-bind="text: userInfo().invoiceDateDisplay"></span>
            <strong>Client number:</strong> <span data-bind="text: itemZeroClientId">22365</span>
            <hr />
        </div>
    </div>
    <div class="row-fluid">
        <div class="span6 cr-tablet6 cr-phone6">
            <h4>Billed by <span data-bind="text: companyNameDisplay"></span></h4>
            <span data-bind="html: companyInfo"></span>
        </div>
        <div class="span6 cr-tablet6 cr-phone6">
            <h4>Billed to</h4>
            <span data-bind="html: clientInfoDisplay"></span>
        </div>
    </div>

    <div class="row-fluid">
        <div class="span12">
            <hr />
            <table id="printInvoiceTable" class="table">
                <thead>
                <tr>
                    <th class="date">Date</th>
                    <th class="name">Provider</th>
                    <th class="code">Proc Code</th>
                    <th class="location">Location</th>
                    <th class="time">Hours</th>
                    <th class="units">Units</th>
                    <th class="charge">Charges</th>
                </tr>
                </thead>
                <tbody data-bind="foreach: items">
                    <tr>
                        <td data-bind="text: dateDisplay"></td>
                        <td data-bind="text: orgName"></td>
                        <td data-bind="text: procedureCodeString"></td>
                        <td data-bind="text: location"></td>
                        <td class="formatted-number" data-bind="text: timeWorkedHrs"></td>
                        <td class="formatted-number" data-bind="text: (unitsOfService() || 0).toFixed(2)"></td>
                        <td class="formatted-currency" data-bind="text: (clientCharges() || 0).toFixed(2)"></td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td class="formatted-number" data-bind="text: totalWorkedHours"></td>
                        <td class="formatted-number" data-bind="text: totalUnitsOfService"></td>
                        <td class="formatted-currency" data-bind="text: totalClientRate"></td>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
    <!-- /ko -->
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:33:54.270

如上所述，问题似乎在于 IE8 删除评论（因此在某些情况下是虚拟绑定），并且已[在淘汰论坛上报告](https://groups.google.com/forum/?fromgroups=#!topic/knockoutjs/VXkPGfhyyt0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T01:03:32.713

我在 IE8 中使用 with 和 jquery 文件上传时遇到问题。我也遇到了评论问题，并且能够通过转义评论条件来解决它。淘汰赛网页提到了这个警告。

# javascript - 有没有办法只用 CSS 来改变表单动作属性，或者有没有 JavaScript 和服务器端脚本的替代品？

> ID：15771009
> 
> 赞同：0
> 
> 时间：2013-04-02T17:59:28.807
> 
> 标签：javascript, html, css, forms, security

首先，由于位于专有系统上，我无法访问表单标记或服务器端脚本。我确实使用 jQuery 删除了属性，并允许我的用户操作来替换此数据以及替换提交按钮。问题是，机器人/蜘蛛/爬虫（我这样做的原因）可以在禁用 JavaScript 的情况下访问我的站点并绕过此过滤器。所以我正在寻找另一种方法来“打破”表格，直到他们确认他们是人类。验证码似乎没用。

我将展示 jQuery 和插件，但它可能无关紧要，因为我正在寻找 JavaScript 替代方案和服务器端脚本替代方案。如果我可以用替代方法删除数据，我可以轻松地用 jQuery 替换，因为它是功能性的，而不是问题。

这是正在删除/替换的基本内容....

```
$('form.ProductReviewForm').attr('action', '')
    .attr('method', ''); 
```

然后在幻灯片功能后替换它们。

**更新：**我今天能够通过使用....获得零个机器人帖子

```
(function($){
$('form.ProductReviewForm').attr('action', '')
    .attr('method', '');
$(document).bind( "mousemove keypress", function () {
    $('form.ProductReviewForm').attr('action', 'http://www.diabeteshealthsupplies.com/postreview.php')
        .attr('method', 'post');
});
})(jQuery); 
```

如您所见，我们仅使用 mousemove 或 keypress 修复属性。用户必须做的事情，而不是机器人。

# c++ - 我的 Qt5 可执行文件不能在 Visual Studio 2010 之外运行

> ID：15771019
> 
> 赞同：3
> 
> 时间：2013-04-02T17:59:51.583
> 
> 标签：c++, visual-studio-2010, qt5

我用 Qt5 和 Visual Studio 2010 完成了一个大项目。使用运行按钮，Visual Studio 内部的一切都很好。

但我的目标当然是在没有视觉工作室的情况下将其发布给其他人。

我的问题是：我无法让 .exe 在 Visual Studio 之外运行。起初我被要求提供几个 dll，我在 Qt5 bin 文件夹中找到了它们。

但是知道我摆脱了这些消息，当我不想打开我的 exe 时，什么也没有发生。根本不值一提.....

我什至无法在 Windows 任务管理器中找到我的 exe。

这里有人知道这个问题的答案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:05:44.717

在运行时加载了一些 dll 文件，并且在不存在时不会给您任何错误、警告或任何内容（对依赖项步行器也完全透明）。这就是`platforms\qwindows.dll`- 请注意，它必须位于`platforms\`相对于可执行文件的子文件夹中。您可能还缺少`libEGL.dll`和`libGLESv2.dll`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-23T16:01:15.427

Dependency Walker 在这种情况下不是很有用，因为它显示了非常奇怪的 dll 文件丢失：API-MS-WIN-CORE-PRIVATEPROFILE-L1-1-1.DLL 等。

您可以使用 Qt5.x cmd 提示符（5.x 是您正在使用的版本）并从您的构建目录运行 windeployqt.exe。它会自动找到所有必要的 dll 文件并将其复制到您的输出目录。

# coffeescript - Spine.js 在获取时清除模型记录

> ID：15771020
> 
> 赞同：0
> 
> 时间：2013-04-02T17:59:51.887
> 
> 标签：coffeescript, spine.js

`refresh`Spine.js 中有一个函数，它有这个选项：

```
You can pass the option {clear: true} to wipe all the existing records. 
```

但是假设我正在实现分页并希望在每次获取时清除所有记录，因为现在当我获取下一页时，新记录只是附加到当前记录集和页面膨胀，这是不可取的。不幸`fetch`的是没有这样有用的选择。那么有没有可能实现类似的功能`fetch`呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:43:12.407

我会采取的方法是通过在模型上添加自定义 fetch 方法来覆盖默认提取

# xml - 如何通过文本显示删除线

> ID：15771027
> 
> 赞同：0
> 
> 时间：2013-04-02T18:00:08.467
> 
> 标签：xml, xslt, xslt-1.0

我想使用 xsl 在 HTML 中显示一些带有删除线的文本。

```
 <xsl:text>Hello world</xsl:text> 
```

预期输出：~~Hello world~~

有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:10:39.293

恐怕我目前无法测试其中任何一个，但也许：

```
<strike><xsl:text>Hello world</xsl:text></strike> 
```

或者

```
<fo:inline text-decoration="line-through"><xsl:text>Hello world</xsl:Text></fo:inline> 
```

希望其中一个对你有用！

# mercurial - 与犯错的人合作时的善变工作流程

> ID：15771028
> 
> 赞同：2
> 
> 时间：2013-04-02T18:00:09.483
> 
> 标签：mercurial, workflow

我需要在 Mercurial 存储库（我们称其为“foo”）上与一些通常是版本控制新手的人合作，尤其是 Mercurial。

我正在尝试提出一个工作流程，使我们能够使用 Mercurial，而无需在他们的一端（混乱）或我的一端（清理）付出很多额外的努力。

我担心的是，作为新手，我需要期望他们犯错误，并且我需要允许他们以可控的方式这样做，否则他们根本不会使用该工具，因为他们太害怕了。但我不希望一个糟糕的改变不必要地污染存储库。

我不希望它们能够正确合并或使用`mq`扩展。这不是低估它们的问题，而是考虑到过去使用 SVN 的经验和我自己使用 Hg 的经验，这是一个现实的评估。

**以下哪种方法最有意义？或者如果有更好的方法，它是什么？**

1.  我们有一个存储库`foo-submit`，所有人都可以读/写，还有一个存储库`foo-trunk`，所有人都可以读，但管理员可以写。用户从中拉取`foo-trunk`更改并将更改推送到`foo-submit`. 清理：如果我发现一个好的变化，我就让它通过；如果我发现一个不好的变化，我会通过与以前的版本合并来“绕过”它。

2.  我们有一个`foo-trunk`所有人可读、管理员可写的存储库。每个用户负责维护他们自己的克隆，该克隆可供团队其他成员读取。当有人想要推送更改时，他们让我知道，然后我从他们的存储库中提取它，并根据需要进行适当的清理（与 #1 相同）

3.  我们有一个存储库`foo-dev`，所有人都可以读/写，还有一个存储库`foo-trunk`，所有人都可以读，但管理员可以写。用户拉/推到 foo-dev，如果他们需要进行广泛的开发，他们可以在命名的分支中工作。我负责执行合并和清理。存储库`foo-trunk`仅用于拥有一个“干净”副本，该副本具有尖端始终处于良好状态的分支。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T16:57:31.643

好问题，而且我从未见过一个很好的答案。

也就是说，我喜欢选项 2。这是 Linux 内核使用的“拉取请求”模型，并在 GitHub 上很流行。它允许管理员充当看门人/审阅者，只有在他们高兴时才允许好的变更集通过他们。如果他们认为开发人员没有交付有价值的东西，那么拉取请求将被拒绝（有原因）。然后开发人员可以离开，修复他们的代码/仓库，并提交另一个拉取请求。

运行带有[RhodeCode](http://rhodecode.org/)之类的服务器可以帮助掌握拉取请求。随着事情的发展，您可以拥有处理子系统的较低级别的看门人，以及处理整个项目的更高级别的看门人。

我从来没有完全理解的是被拒绝的变更集应该发生什么，并且开发人员决定放弃而不是修复并重试。它们可能会被关闭，但随后可能会错误地出现在未来的拉取请求中。它们是无害的，但可能会令人困惑。另一种选择是剥离它们，但这听起来像是给人们工具，他们会割伤自己。

* * *

您提供的其他 2 个选项值得一提。

1 类似于 2。您仍在执行“拉取请求”类型的流程，但现在您拥有反映开发人员克隆的服务器端分支。几乎没有区别，这就是 RhodeCode、GitHub、BitBucket 服务器让您工作的方式，除了您不必去搜索更改。服务员会告诉你他们在等你看。

3 的问题是每个人的更改都`foo-dev`在您到达之前全部合并在一起。他们将开始相互依赖，挑选樱桃会变得一团糟。您可能最终会`graft`更改更改集，`foo-trunk`这意味着您正在使用新的哈希创建新的更改集。当开发人员拉出这些时，他们现在将在两个地方进行更改；他们的原始`foo-dev`版本和您的移植`foo-trunk`版本。这对我来说听起来不可持续。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T18:53:07.970

3a -`foo-dev`有受保护的`default`分支（只有一些管理员可以推送/合并到这个分支），用户使用命名分支

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T18:21:58.283

如果您不想使用 mq（以最少的麻烦理解），我能想到的最好方法是让您的开发人员

1.  为正在开发的当前功能创建自己的分支
2.  完成并验证后将其合并回主开发分支（或移植/移植）
3.  然后关闭分支。

从长远来看，让他们学习 mq，掌握起来并不难。

# python - 在 Velocity/Airspeed 中使用 Python 字典/对象

> ID：15771035
> 
> 赞同：0
> 
> 时间：2013-04-02T18:00:28.550
> 
> 标签：python, velocity

我正在使用 airspeed 包来处理 Velocity 模板（现有 Java/Velocity 项目的脚本，因此选择了引擎）。我已经将数据建模为自定义对象的字典，现在我试图弄清楚如何在 Velocity 模板中迭代它们。

Python代码：

```
class Walkthrough:
    def __init__(self, title):
        self.title = title
        self.pages = {}
    def add_page(self, page):
        self.pages[page.number] = page

class Page:
    def __init__(self, title):
        self.title = title

walks = {}
walks['obj_1'] = Walkthrough('Object 1')
walks['obj_2'] = Walkthrough('Object 2')
loader = airspeed.CachingFileLoader("./velocity")
text_template = loader.load_template("text_only.vm")
map = { 'walkthroughs': walks }
text_template.merge(map, loader=loader) 
```

速度模板：

```
<html>
    ...
    #foreach($walk in $walkthroughs)
        <h3>$walk.title</h3>
    #end
    ...
</html> 
```

我只得到'obj_1'和'obj_2'，而不是关联的对象。有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:27:13.353

我不知道*速度*引擎，但我知道当你这样做时 Python 会产生一个键列表`for k in dictionary`。

由于您正在**迭代**，`walks`如果您使用 a`list`而不是 a会更有意义`dict`。

# php - 如何使用 PHP 显示来自 JSON 的所需信息

> ID：15771040
> 
> 赞同：-1
> 
> 时间：2013-04-02T18:00:47.710
> 
> 标签：php, arrays, json

如何回显来自 JSON 对象的信息。代码如下所示；

```
array(20) {
  [0]=>
  object(stdClass)#1 (15) {
    ["team_id"]=>
    int(10260)
    ["home"]=>
    object(stdClass)#2 (7) {
      ["played"]=>
      int(15)
    }
    ["away"]=>
    object(stdClass)#3 (7) {
      ["played"]=>
      int(15)
    }
    ["points"]=>
    int(77)
  } 
```

例如，我怎样才能从这个数组中回显每个团队名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:02:59.343

你应该使用 PHP`json_decode`

```
$obj = json_decode($getData);
$value= $obj->{'team-id'}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:07:17.093

这很简单。

```
foreach ($array as $item) {
    echo $item->team_id;
} 
```

# flex3 - Flex 3 - 在透明 PNG 下为文本对象启用上下文菜单

> ID：15771041
> 
> 赞同：2
> 
> 时间：2013-04-02T18:00:48.687
> 
> 标签：flex3, png, contextmenu

这是情况。在我的应用程序中，我有一个由透明 PNG 组成的覆盖层。我已使用以下代码将 png 的 hitarea 替换为 1x1 图像：

```
[Bindable]
[Embed(source = "/assets/1x1image.png")]
private var onexonebitmapClass:Class;

private function loadCompleteHandler(event:Event):void
{
    // Create the bitmap
    var onexonebitmap:BitmapData = new onexonebitmapClass().bitmapData;
    var bitmap:Bitmap;
    bitmap = event.target.content as Bitmap;
    bitmap.smoothing = true;
    var _hitarea:Sprite = createHitArea(onexonebitmap, 1);
    var rect:flash.geom.Rectangle = _box.toFlexRectangle(sprite.width, sprite.height);
    var drawnBox:Sprite = new FlexSprite();

    bitmap.width = rect.width;
    bitmap.height = rect.height;
    bitmap.x = -loader.width / 2;
    bitmap.y = -loader.height / 2;
    bitmap.alpha = _alpha;
    _hitarea.alpha = 0;
    drawnBox.x = rect.x + rect.width / 2;
    drawnBox.y = rect.y + rect.height / 2;

    // Add the bitmap as a child to the drawnBox
    drawnBox.addChild(bitmap);

    // Rotate the object.
    drawnBox.rotation = _rotation;

    // Add the drawnBox to the sprite
    sprite.addChild(drawnBox);

    // Set the hitarea to drawnBox
    drawnBox.hitArea = _hitarea;

}

private function createHitArea(bitmapData:BitmapData, grainSize:uint = 1):Sprite
{
    var _hitarea:Sprite = new Sprite();
    _hitarea.graphics.beginFill(0x900000, 1.0);
    for (var x:uint = 0; x < bitmapData.width; x += grainSize)
    {
        for (var y:uint = grainSize; y < bitmapData.height; y += grainSize)
        {
            if (x <= bitmapData.width && y <= bitmapData.height && bitmapData.getPixel(x, y) != 0)
            {
                _hitarea.graphics.drawRect(x, y, grainSize, grainSize);
            }
        }
    }
    _hitarea.graphics.endFill();
    return _hitarea;
} 
```

这是基于此处完成的工作：[为 PNG 图像创建一个具有透明 (alpha) 区域的命中区域在 Flex](http://www.webverwirklichung.com/en/blog/programming/flex/creating-hitarea-png-image-transparent-alpha-regions-flex)

使用上面的代码，我基本上可以忽略所有鼠标事件（单击、双击、移动等）的覆盖层。但是，我无法捕获覆盖层下方的项目的右键单击（上下文菜单）事件.

例如，我有一个拼写检查组件，可以检查任何文本项上的拼写，并且像大多数其他拼写检查器一样，如果字典中的单词不正确或不在字典中，则会用红色下划线，如果你右键单击它会给你一个建议列表在上下文菜单中。当文本框不在覆盖层下时，这很好用，但如果文本框在覆盖层下，我什么也得不到。

如果有人可以给我一些关于如何在透明 png 下的 textItem 上捕获右键单击事件的指示，那就太好了。

# symfony - Symfony2 Assetic 不要在 --env=dev 上生成复合文件

> ID：15771043
> 
> 赞同：1
> 
> 时间：2013-04-02T18:00:53.570
> 
> 标签：symfony, assetic

有没有办法告诉 Assetic 命令行文件在为开发环境构建时不生成复合“输出”文件？

我们使用 --watch 配置运行它。我们有合成文件需要很长时间才能生成并且没有被使用，所以这是一种严重的时间浪费。它还导致它重新生成该堆栈中的所有文件，而不是一个更改的文件。

有任何想法吗？如果没有，我很想自己重写asset:dump 命令，因为每次我们进行微小的文件更改时都会严重浪费1-3 分钟。=(

* * *

Symfony 版本：2.2.0（根据调试栏，刚刚运行 Composer 更新，没有任何变化）

config.yml（资产块）

```
assetic:
  debug:          %kernel.debug%
  use_controller: false
  #bundles: []
  #java: /usr/bin/java
  filters:
    cssrewrite: ~
    less:
      node: /usr/bin/node
      node_paths: [/usr/local/lib/node_modules,/usr/lib/node_modules]
      apply_to: "\.less"
    typescript:
      resource: %kernel.root_dir%/../src/GamePlan/Bundle/CoreBundle/Resources/config/assetic.typescript.xml
      apply_to: "\.ts"
      tsc: /usr/local/bin/tsc
      node: /usr/bin/node
      useOut: false 
```

（自定义 TypeScriptFilter，但它也发生在 CSS 文件中，所以它不应该是导致它的原因......这也是官方 repo 中的一个相对较小的调整。）

config_dev.yml（资产块）

```
assetic:
  use_controller: false 
```

示例用法：

```
{% stylesheets output="bundles/mybundle/styles/mystyle.css"
    filter="cssrewrite"
    "@MyBundle/Resources/styles/a.less"
    "@MyBundle/Resources/styles/b.less"
    "@MyBundle/Resources/styles/subfolder/*.less"
    "@MyBundle/Resources/styles/subfolder/*/*.less"
%}
<link type="text/css" rel="stylesheet" href="{{ asset_url }}"/>
{% endstylesheets %} 
```

运行命令（从 /var/www 作为 www-data）：

```
php Symfony/app/console assetic:dump --env=dev [--watch] 
```

有或没有 --watch 都不会改变生成的文件，只要它全部完成或只是监视。

请注意，这是否会给任何人一个关于正在发生的事情的线索，但它会在生成单个开发文件之前尝试生成复合文件。

我还确保我没有复制任何包含、引用其他块中的任何复合文件等。

它没有在 HTML 中加载复合文件，但我可以看到它们是从命令生成的。

如果需要更多信息，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T21:30:38.300

所以我最终通过了 Assetic 包的 DumpCommand。事实证明，无论环境如何，它们总是无条件地生成（如果我们处于调试模式，只有一个条件可以只做开发者）。

为了自己修复它，我只是复制了那个 DumpCommand 并制作了我自己的版本，我最终在上面添加了一个条件，所以它只有在环境是 prod 时才会这样做。我也做到了，所以如果该文件已更改，它只会转储开发文件。

这个解决方案并不完美，需要注意（例如，如果一个文件依赖于另一个文件，它不会被重新编译，所以如果我有编译器错误，我必须不时运行原始文件）。但是，它对我有用。

修改后的 dumpAsset() 如下所示：

```
private function dumpAsset($name, OutputInterface $output)
{
    $asset = $this->am->get($name);
    $formula = $this->am->getFormula($name);

    if (!$this->am->isDebug()) {
        // start by dumping the main asset
        $this->doDump($asset, $output);
    }

    // dump each leaf if debug
    if (isset($formula[2]['debug']) ? $formula[2]['debug'] : $this->am->isDebug()) {
        foreach ($asset as $leaf) {
            $mtime = filemtime(($leaf->getSourceRoot() ? $leaf->getSourceRoot() . DIRECTORY_SEPARATOR : '') . $leaf->getSourcePath());
            if ($mtime >= $asset->getLastModified()) {
                $this->doDump($leaf, $output);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T10:15:47.217

```
private function dumpAsset($name, OutputInterface $output)
{
    $asset = $this->am->get($name);
    $var = false;
    $mtime3 = filemtime(str_replace('_controller/', '', rtrim($this->basePath, '/').'/'.$asset->getTargetPath()));
    foreach ($asset as $leaf) {
        $mtime = $leaf->getLastModified();
        $mtime2 = filemtime(str_replace('_controller/', '', rtrim($this->basePath, '/').'/'.$leaf->getTargetPath()));
        if ($mtime2 > $mtime3)
            $var = true;
        if ($mtime > $mtime2)
        {
            $var = true;
            $this->doDump($leaf, $output);
        }
    }
    if (!$this->am->isDebug() && $var) {
        $this->doDump($asset, $output);
    }
} 
```

Merci et ce fut parfait。

通过 42 新秀 ;)

# html - 何时使用 target="_self"

> ID：15771047
> 
> 赞同：27
> 
> 时间：2013-04-02T18:01:05.017
> 
> 标签：html, iframe, anchor

`_self` [框架目标](http://www.w3.org/TR/html4/types.html#type-frame-target)何时变得有用或值得使用？

这不是（*总是？*）默认行为吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-02T18:04:30.973

可以使用以下`<base>`标签更改默认值`<head>`：

```
<base href="http://www.mysite.com/" target="_blank"/> 
```

在这种情况下，您可以使用`target="_self"`on 链接来覆盖`target`set by `base`。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-03-02T04:55:56.793

`_self`当您确实需要为与单页应用程序具有相同基础的链接强制重新加载整个页面时，目标值也可以与 AngularJS 的 HTML5 定位模式一起使用。

[https://docs.angularjs.org/guide/$location#html-link-rewriting](https://docs.angularjs.org/guide/$location#html-link-rewriting)

> 在以下情况下，链接不会被重写；相反，浏览器将对原始链接执行完整的页面重新加载。
> 
> 包含目标元素的链接示例：`<a href="/ext/link?a=b" target="_self">link</a>`
> 
> ...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-03T16:29:53.850

```
<base target="_self"/> 
```

当我有一个想要加载到 Firefox 侧边栏中的页面时，这对我来说非常方便。我希望单击的任何链接都留在侧边栏中，而不是在主窗口中打开链接。将以上内容添加到已`<head>`修复的我中，并且所有页面的链接都保留在侧边栏中。

# java - 如何设置按钮的文本不可见？

> ID：15771052
> 
> 赞同：0
> 
> 时间：2013-04-02T18:01:38.270
> 
> 标签：java, android, sqlite

我有一些按钮，并且设置了一些文本，我需要这些文本在活动开始时可见。之后，我从 sqlite 数据库为我的所有按钮设置了一些文本，但我不希望在用户单击按钮之前显示该文本。

最简单的解决方案是使用 button.setText(c.getString(int)); 并在单击按钮时从 db 设置该文本，但我的 c 光标不在活动范围内，因此我无法在按钮的 onClick 方法中使用它。我试图将所有内容都放在我的 nextQuestion() 方法中的活动范围内，但这给了我错误。

所以我想我应该隐藏数据库中的所有文本集，直到按下按钮，取消隐藏它。怎么做？或者，如果第一个想法是可能的，那就更好了。

这是我的游戏课：

```
public class Game extends Activity implements View.OnClickListener{

    Button b1, b2, b3, b4, b5, b6, b7, b8, b9, b10;
    MediaPlayer buttonClicks;
    public boolean music;

    LinkedList<Long> mAnsweredQuestions = new LinkedList<Long>();

    private String generateWhereClause(){
        StringBuilder result = new StringBuilder();
        for (Long l : mAnsweredQuestions){
            result.append(" AND _ID <> " + l);
        }
        return result.toString();
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.game);

        addListenerOnButton();

        nextQuestion();
    }

    private void addListenerOnButton() {
        buttonClicks = MediaPlayer.create(this, R.raw.button);
        b1 = (Button) findViewById(R.id.button1);
        b2 = (Button) findViewById(R.id.button2);
        b3 = (Button) findViewById(R.id.button3);
        b4 = (Button) findViewById(R.id.button4);
        b5 = (Button) findViewById(R.id.button5);
        b6 = (Button) findViewById(R.id.button6);
        b7 = (Button) findViewById(R.id.button7);
        b8 = (Button) findViewById(R.id.button8);
        b9 = (Button) findViewById(R.id.button9);

        b1.setOnClickListener(this);
        b2.setOnClickListener(this);
        b3.setOnClickListener(this);
        b4.setOnClickListener(this);
        b5.setOnClickListener(this);
        b6.setOnClickListener(this);
        b7.setOnClickListener(this);
        b8.setOnClickListener(this);
        b9.setOnClickListener(this);

    }

    private void nextQuestion() {
        TestAdapter mDbHelper = new TestAdapter(this);
        mDbHelper.createDatabase();

        try{

            mDbHelper.open(); 

            Cursor c = mDbHelper.getTestData(generateWhereClause());

            mAnsweredQuestions.add(c.getLong(0));

            b1.setText(c.getString(2));
            b2.setText(c.getString(3));
            b3.setText(c.getString(4));
            b4.setText(c.getString(5));
            b5.setText(c.getString(6));
            b6.setText(c.getString(7));
            b7.setText(c.getString(8));
            b8.setText(c.getString(9));
            b9.setText(c.getString(10));
        }

            finally{
                mDbHelper.close();
            }

    }

    public void onClick(View v) {
        switch(v.getId()){
        case R.id.button1:
            if(music == true){
                buttonClicks.start();
                    }
            b1.setText(c.getString(2));// this is a good option, but can't use cursor
            b2.setEnabled(true);
            break;
        case R.id.button2:
            if(music == true){
                buttonClicks.start();
                    }
            b3.setEnabled(true);
            break;
        case R.id.button3:
            if(music == true){
                buttonClicks.start();
                    }

            break;
        case R.id.button4:
            if(music == true){
                buttonClicks.start();
                    }
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:10:13.237

将String-s 传递到一些变量中的某个中间存储，然后在适当的时候从这些字符串中设置按钮的文本怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:10:55.343

您正在尝试为更大的潜在问题的症状找到解决方案。如果您在活动之间共享数据时遇到困难，那么您当然不应该朝这个方向前进。

话虽如此，要回答您的具体问题，您可以设置`textColor`为`android.R.color.transparent`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T18:11:36.127

没有内置方法可以仅隐藏按钮上的文本，但是您可以简单地将数据库中的值存储在一堆变量中，并且在按下按钮之前不要将它们设置为按钮。

这意味着你应该改变：

```
b1.setText(c.getString(2));
b2.setText(c.getString(3));
...
b9.setText(c.getString(10)); 
```

类似于：

```
String mButtonText1, mButtonText2, ... mButtonText9; // <-- class members

mButtonText1 = c.getString(2);
mButtonText2 = c.getString(3);
...
mButtonText9 = c.getString(10); 
```

（或者，您可以将这些值放在一个数组中）

然后在`onClick()`：

```
b1.setText(mButtonText1); 
```

要“隐藏”按钮上的文本，只需`setText()`使用`""`or调用`null`。

您可以通过将按钮的文本颜色设置为“透明”来实现相同的效果，但我没有尝试过。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T18:13:19.827

我认为最好的方法是：

将文本设置为 null 或为空，并且在您的 java 实现中，您设置文本。

像这样：

teste.xml：

```
<Button android:id="@+button/testebutton" android:text="" android:layout_width="wrap_content" android:layout_height="wrap_content"/> 
```

Teste.java：

```
Button testeButton = (Button) findViewById(R.button.testebutton);
testeButton.setText("NEW TITLE"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T18:17:47.710

如何使游标成为（类的）实例变量而不是方法局部变量？也许使用[http://en.wikipedia.org/wiki/Lazy_initialization](http://en.wikipedia.org/wiki/Lazy_initialization) ...

# jquery - 如何在 jquery 中选择多个 css 属性？

> ID：15771059
> 
> 赞同：0
> 
> 时间：2013-04-02T18:01:53.177
> 
> 标签：jquery, css

嗨我是一个新的jquery 用户，我需要一些帮助。

我试图在单击该 div 时更改最后一个子 div 元素的 css :hover 属性。更具体地说，我有一个导航栏 div，里面有一些子 div 按钮。子 div 都是同一个类的一个部分，因此当我将鼠标悬停在它们上时……border-width 属性会发生变化。我希望这样当我单击最后一个子 div 时，边框颜色会发生变化，但仍仅在鼠标悬停时显示......当我再次单击它时，我希望在 css 中定义的原始边框属性重拍效果。

这是我正在尝试做的一个示例：

```
$("div.navbar:last").click(function(){    
    if ($("div#details").is(":hidden")){    
        $("div#details").fadeIn(100);    
        $("div.navbar:hover").css("border-bottom-color","#ee4444");
    } else {
        $("div#details").fadeOut(100);
        $("div.navbar").css("border-bottom-color","#88ddff");
    }   
}); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T18:04:42.097

您不能`:hover`在 jQuery 中使用选择器。您应该避免使用该`.css()`方法，而是使用`addClass`、`removeClass`和`toggleClass`来更改 DOM 状态。

然后实际的 CSS 可以接管并使用这些类作为样式挂钩来更改页面的呈现方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:06:04.900

正如 Adeneo 所说，您不能`:hover`在 jQuery 中使用伪选择器（如 ）。如果你想在 jQuery 中附加一个悬停事件，你可以使用类似下面的东西：

```
$("#myElement").on('hover', function() {
    alert("I've been hovered over!");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T18:16:30.567

您可以将伪类放在单击时添加的辅助类上

JS

```
 $("div.navbar:last").click(function(){    
    if ($("div#details").is(":hidden")){    
        $("div#details").fadeIn(100);    
        $("div.navbar").addClass("hoverBottom");
    } else {
        $("div#details").fadeOut(100);
        $("div.navbar").css("border-bottom-color","#88ddff");
    }  
    }); 
```

CSS

```
.hoverBottom:after {
  border-bottom-color","#ee4444";
} 
```

# android - 在运行时定位视图

> ID：15771060
> 
> 赞同：0
> 
> 时间：2013-04-02T18:01:55.043
> 
> 标签：android, view

我想在我的 CustomView 中使用未知（开始）数量的视图，所以我必须以编程方式设置每个视图的位置。问题是我不能使用 setX()/... 或 seTop()/... ，因为我正在为 froyo 开发。但是我该如何设置位置呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T07:59:05.027

您`RelativeLayout`可以执行以下操作：

```
RelativeLayout.LayoutParams layoutParams = (RelativeLayout.LayoutParams)child.getLayoutParams();

layoutParams.leftMargin = x;
layoutParams.topMargin = y;

child.setLayoutParams(layoutParams); 
```

# ruby - 为什么我的正则表达式跳过点而不是匹配它之前的字符串？

> ID：15771064
> 
> 赞同：0
> 
> 时间：2013-04-02T18:02:00.457
> 
> 标签：ruby, regex, irb

我试图在 IRB 中计算出一个正则表达式并得到了一些意想不到的输出。目标是匹配所有内容，直到 FQDN 中的最后一个点。

因此，例如，如果我试图匹配 string `"flowtechconsulting.com"`，我从以下开始：

```
s1.sub(/^(.*)\\./, "\\1")   #=> "flowtechconsultingcom" 
```

但是，该`sub`函数仅返回除点之外的所有内容，而不是第一个匹配组。

如果我添加两个匹配的组，它会起作用：

```
s1.sub(/^(.*)\\.(.*)$/, "\\1")   #=> "flowtechconsulting" 
```

我只是不确定为什么第一个不起作用。似乎应该如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:08:04.953

`/^(.*)\./`只捕获所有内容。“com”没有被捕获，因此在替换中没有被替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:07:36.567

忘记`sub`，并执行以下操作：

```
"foo.bar.baz.com"[/(.*)(?:\.)/, 1]
# => "foo.bar.baz" 
```

# fortran - 在 Fortran 中读取大型数据集

> ID：15771079
> 
> 赞同：2
> 
> 时间：2013-04-02T18:02:50.777
> 
> 标签：fortran, fortran90

我正在尝试将一个大型数据文件读入 Fortran，它包含大约 40960000 行，后来我将其转换为矩阵，因此它是 6400 * 6400。当我使用更小的数据集尝试我的代码时，它工作正常。但是，当我使用较大的数据集时，它告诉我存在分段错误。我怀疑这是内存分配问题。有没有办法分配更多的内存或以其他方式纠正这个问题。

```
 program infectgrid
   implicit none

   integer ::  i,  individual, nedge,&
    tempinfect_tim_err, dumnum_infalpha0, dumnum_infalpha1, alpha0counter, &
    alpha1counter, obsrand,  minvalshift

    character (LEN = 50) :: parameterfilelabel,  parameterfile, networkfilelabel,        infectfilenamelabel, networkfile, infectfilename
             !allocatable to allow for reading in of individuals and time periods
   integer, dimension(:) , allocatable :: xcord, ycord, dummy3, recover_tim1, recover_tim2, &
     recover_tim3, recover_tim4, recover_tim5,  sampleadjshort, shortsamplecount, &
     cov1dum, covlog, covvect1uni

    character, dimension (:), allocatable :: rec
   integer, dimension (:, :) ,  allocatable :: link  
    real, dimension(:) , allocatable  :: alphavect

    call random_seed

 open(12, file = "filenamesinfection.txt", status = "old")

 read(12, *) parameterfile, networkfile, infectfilename
 close(12)

 open(12, file = parameterfile, status = "old")
 read(12, *)  individualname, alpha0name, alpha1name
 read(12, *) individual, alpha0, alpha1

  nedge = individual*individual

allocate(rec(1:nedge))
allocate(xcord(1:nedge))
allocate(ycord(1:nedge))
allocate(dummy3(1:nedge))
allocate(sampleadjshort(1:nedge))
allocate(shortsamplecount(1:nedge))
allocate(covlog(1:nedge))
allocate(cov1dum(1:nedge))

allocate(link(1:individual, 1:individual))

   link = 0
   covlog = 0

    print *, individual, alpha0, alpha1
    print *, link(individual, individual)

    print *, "test"
   open(10, file = networkfile, status = "old")
   print *, networkfile       
   print *, "test"
   do i = 1, nedge

   read ( 10, *) rec(i),  xcord(i), ycord(i), dummy3(i), cov1dum(i), sampleadjshort(i),      shortsamplecount(i)    

   if (dummy3(i) == 1)  then 

   link(xcord(i), ycord(i)) = 1
    end if

    if (xcord(i) == ycord(i)) then 
    covlog(i) = 1
    end if
    end do
    close(10)

    covvect1uni = pack(cov1dum, covlog == 1)

    print *, "xcord",  xcord(nedge), "ycord",  ycord(nedge)
    print *, link(individual, individual)
    print *, "test" 
```

该文件打印出第一个和第二个“测试”，但没有打印出链接语句或以“xcord”开头的行，不久之后给了我一个分段错误，即分段错误 nohup ./swnetworkinfectrecoveralpha05covgeo2.out

至于编译器选项，我认为我正在使用大部分可用的东西： ifort -free -O2 -stand f03 -check bounds -traceback -warn all -fstack-protector -assume protect_parens -implicitnone -o swnetworkinfectrecoveralpha05covgeo2.out swnetworkinfectrecoveralpha05covgeo2.f90

# maven - 需要解释maven错误请

> ID：15771086
> 
> 赞同：0
> 
> 时间：2013-04-02T18:03:03.393
> 
> 标签：maven, maven-nar-plugin

[http://blog.bigpixel.ro/2012/07/building-cc-applications-with-maven/comment-page-1/#comment-8196](http://blog.bigpixel.ro/2012/07/building-cc-applications-with-maven/comment-page-1/#comment-8196)

我正在按照上面的示例进行 maven nar 插件，但是在执行 mvn 包时出现以下错误

“找不到工件 net.sf.antcontrib:cpptasks-parallel:jar:1.0-beta-5-parallel-1-SNAPSHOT”，但我在 ~/.m2/repository 中看到以下文件夹树及其内容...是什么赋予了？

```
~
   .m2
      repository
         net
            sf
               antcontrib
                  cpptasks-parallel
                     1.0-beta-5-parallel-1-SNAPSHOT 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T04:52:36.213

改变依赖

```
<dependency>
 <groupId>net.sf.antcontrib</groupId>
 <artifactId>cpptasks-parallel</artifactId>
 <version>1.0-beta-5-parallel-1-SNAPSHOT</version>
</dependency> 
```

至

```
<dependency>
 <groupId>org.codeswarm</groupId>
 <artifactId>cpptasks-parallel</artifactId>
 <version>20121119</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T14:47:42.293

~~不幸的是，目前既没有`maven-nar-plugin`也没有`cpptasks-parallel`部署到中央。所以你自己需要`mvn install`它们（或者更好的是，`mvn deploy`它们需要你自己的 Maven 存储库）。[您可以在 GitHub 上](https://github.com/maven-nar)找到这两个项目。~~

编辑：`nar-maven-plugin`版本 3.0.0 已经发布，现在[可以从 Maven Central 获得](http://search.maven.org/#artifactdetails%7Ccom.github.maven-nar%7Cnar-maven-plugin%7C3.0.0%7Cmaven-plugin)。两个注意事项：

1.  groupId 和 artifactId 改变了；GAV 现在是：

    ```
    <plugin>
        <groupId>com.github.maven-nar</groupId>
        <artifactId>nar-maven-plugin</artifactId>
        <version>3.0.0</version>
    </plugin> 
    ```

2.  该`cpptasks-parallel`项目已合并到`nar-maven-plugin`中，因此无需再担心该依赖关系。

# mfc - Mfc 鼠标滚轮不旋转旋转按钮控制的文本框

> ID：15771088
> 
> 赞同：0
> 
> 时间：2013-04-02T18:03:26.730
> 
> 标签：mfc, mouse, mousewheel, groupbox

我有一个MFC申请表如图：

![零件方向](https://i.stack.imgur.com/ABiLc.png)

我想知道为什么鼠标滚轮在“基本角度：”字段（用于控制旋转控制）上工作，而不是在“角度”和“范围”字段上工作。直接单击旋转按钮效果很好。

嵌套表单的“底角”和“±”字段也是如此：

![嵌套](https://i.stack.imgur.com/dy7H7.png)

我的假设：发生这种情况是因为字段位于组框内

我做了什么来测试它：我更改了 teo froms 中的组框尺寸，以使非工作字段不与它重叠：

![零件方向已修改](https://i.stack.imgur.com/dwLNc.png)

![嵌套修改](https://i.stack.imgur.com/LZcFG.png)

结果：鼠标滚轮开始作用于 Part Orientation 对话框的控件。但是在嵌套对话框中它继续拒绝工作。

注意：文本框是 CEdits。他们使用 CString 变量进行 DDX。零件方向是一个模态对话框。嵌套是 CMFCTabControl 内部、CDialogBar 内部、CDockablePane 内部、CMainFrame 内部的一种形式（这个是从 CFrameWndEx 派生的）

现在，我的怀疑：对于窗体部件方向对话框，我怀疑 groupbox 正在吃鼠标滚轮事件。对于嵌套对话框，我怀疑 DockablePane 正在吃鼠标滚轮事件。或者可能是由我设计的窗格布局创建的隐式 CTabbed 窗格；甚至是 MainFrame。

我的问题是：如何使鼠标滚轮在组框内的旋转按钮控制的文本框上工作？我的应用程序对话框中有更多这样的案例。

有没有一种方法可以让谁来处理鼠标滚轮的移动？同样的问题适用于嵌套表单控件已删除哪个组框区域并且鼠标滚轮继续不使旋转按钮移动！

在此先感谢，塞尔吉奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:57:09.783

第一步是禁用我这里有的一个叫做 WizMouse 的小软件。鼠标滚轮立即在零件方向对话框的微调器控制文本框中工作。

为了让其他人工作，我不得不改变微调器 RC 定义

```
UDS_ARROWKEYS 
```

到

```
UDS_SETBUDDYINT | UDS_AUTOBUDDY | UDS_ARROWKEYS | UDS_NOTHOUSANDS | UDS_HOTTRACK 
```

这使得鼠标滚轮移动了，但是以不希望的方式移动：它是步进一个单位，向上移动是递减，并且它的上限是100！

为什么？因为，我有一个处理 UDN_DELTAPOS 的函数来操纵微调器的偏移量。它定义将值步进为增量为 5.0 的双精度值。直接单击两个微调器按钮时也会发生这种情况！

在该函数中，我所要做的就是将 *pResult 设置为 1 而不是 0。

现在一切正常:)

谢谢，再来一次。

# c# - 检查字符串列表中的任何项目是否不在对象列表中

> ID：15771089
> 
> 赞同：0
> 
> 时间：2013-04-02T18:03:27.297
> 
> 标签：c#, list

假设我有这个用于创建对象列表的字符串列表。

我的字符串列表中有 171 个项目，而我的对象列表有 170 个。所以一个没有通过，但我需要弄清楚是哪一个。

幸运的是，可以在每个对象的每个名称中找到所有字符串。这意味着，例如：

```
string nameObjOne 
```

将等于：

```
public class myObj
{
    public string myName {get;set;}
} 
```

那么如何检查我的第一个列表中的所有字符串是否都位于对象列表中，以便我可以找出哪个不存在？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T18:06:55.393

您可以使用 LINQ选择存在`List<string>`但没有相应项目的项目：`List<myObj>`

```
var results = strings.Except(myObjects.Select(o => o.myName)).ToArray(); 
```

之后，您只需检查`results`数组的长度即可确定是否有这样的项目。

由于实现，它是*O(n+m)*`Except`解决方案，它使用`HastSet`.

# java - 填充 N 叉树 - Java

> ID：15771090
> 
> 赞同：2
> 
> 时间：2013-04-02T18:03:30.527
> 
> 标签：java, tree

我正在用 Java 实现一个 N-ary 树；每个节点可以有尽可能多的节点。当我尝试构建一棵树时，问题就来了。我有一个函数可以递归地创建一个特定高度的树，并根据节点列表分配子节点。当我调用该函数时，根节点不包含任何数据；一旦完成，它就会返回一个空值。我从未实现过 N-ary 树，所以我对实现有点确定，任何关于它的指针都会非常感激！

```
//Creates a tree 
void createTree(int height) throws InvalidMoveException,   
  Modified_Tree.InvalidMoveException {
    root = new ListNode();
    root = populateTree(moves.root,height,true,0);  
}

 //Function called by Create tree to populate the tree
 //It takes in a ListNode, an int height that determines the height of the tree, 
 //and a boolean, which is used
 //To know whether the node is a black piece/max or a white piece/min

 public ListNode populateTree(ListNode root, int height, boolean black, int score) 
  {

    ListNode node = root;
     List<ListNode> nodes = new List<ListNode>(10);

     //Sets the size of List in node to the int taken
              node.setChildNumber(nodes.size());

    //return if reached the pre-maximum height
    if(height == 1){

        for(int i = 0; i < nodes.size(); i++){

            //Add the child to the last node
            node.addChild(nodes.get(i));

        }

        return node;
    }

    else{

              for(int j =0; j < node.getChildNumber(); j++){
      node = populateTree(node.getChildAt(j),height-1,!black,score);

        }   
    }
    return node;
 } 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:47:02.973

你的问题在这里：

```
List<ListNode> nodes = new List<ListNode>(10); 
```

首先，我假设您的意思`new ArrayList<ListNode>(10);`是`List<T>`. 其次，该论点`10`仅确保您`10`最初将拥有位置。这*并不*意味着您将在`10` `ListNode`内部自动初始化实例`nodes`。然后你有：

```
 for(int i = 0; i < nodes.size(); i++){
        //Add the child to the last node
        node.addChild(nodes.get(i));
    } 
```

此循环永远不会执行，因为`nodes.size()`它根本不包含任何节点，因此为零。所以你需要先用`ListNode`实例初始化你的列表。

# ruby - TDD。请帮我解决错误

> ID：15771092
> 
> 赞同：0
> 
> 时间：2013-04-02T18:03:34.297
> 
> 标签：ruby, tdd

TDD：

```
describe RPNCalculator do

  attr_accessor :calculator

  before do
    @calculator = RPNCalculator.new
  end

it "adds two numbers" do
  calculator.push(2)
  calculator.push(3)
  calculator.plus
  calculator.value.should == 5
end
end 
```

我的代码：

```
class RPNCalculator
attr_accessor :calculator

def initialize()
  @calculator = []
end

def RPNCalculator(x=0,y=0)
@calculator.push(x)
@calculator.push(y)
@calculator.map {|x,y| x + y }
end 
```

错误：

```
RPNCalculator
adds two numbers (FAILED - 1) 
```

失败：

```
1)RPNCalculator adds two numbers
Failure/Error: calculator.push(2)
NoMethodError:
undefined method `push' for #<RPNCalculator:0x000000021b85a8 @calculator=[]> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:19:05.677

问题出在您调用的测试中`calculator.push(2)`。`RPNCalculator`您在没有名为 的方法的对象上调用它`push`。它是类中的实例变量`@calculator`，您将其实例化为`Array`具有该方法的 。

您的测试实际上应该是：

```
it "adds two numbers" do
  @calculator.RPNCalculator(2,3).value.should == 5
end 
```

我应该指出，方法名称以大写字母开头被认为是错误的形式。

如果我可能如此大胆地猜测您的测试试图得到什么，那么您想将`push`数字输入您的数字`RPNCalculator`并继续推动数字并随意获得这些数字的总和。如果确实如此，您可能正在寻找这样的东西：

```
class RPNCalculator
attr_accessor :calculator

def initialize()
  @calculator = []
end

def push(*num)
  # Use is_a? in order to ensure anything added to
  # the Array can later be added together 
  @calculator.push(*num) if num.all? {|n| n.is_a? Numeric}
  # If you would like this to work with any class that can be added
  # then change 'n.is_a? Numeric' to 'n.respond_to? :+'
end

def plus
  @calculator.reduce(:+)
end

def value
  plus
end 
```

这样做应该使您的原始测试无需更改即可工作。

使用示例：

```
calc = RPNCalculator.new
calc.push(3)
calc.push(2)
calc.plus #=> 5
calc.push(6)
calc.plus #=> 8   
calc.push(1,2,3,4)
calc.plus #=> 18 
```

请注意，我在方法定义中使用了 splat 运算符（星号）。我建议对这个主题进行一些[阅读。](http://endofline.wordpress.com/2011/01/21/the-strange-ruby-splat/)值得学习和喜爱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:14:21.357

试试这个：

```
class RPNCalculator
attr_accessor :calculator

def initialize()
  @calculator = []
end

def RPNCalculator(x=0,y=0)
  @calculator.push(x)
  @calculator.push(y)
  p @calculator.reduce(&:+)
end
end

cal = RPNCalculator.new
cal.RPNCalculator(10,20) #30 
```

# css - 如何让div移到页面底部

> ID：15771093
> 
> 赞同：1
> 
> 时间：2013-04-02T18:03:39.453
> 
> 标签：css, html

我正在尝试将 div 从页面顶部移到底部，但它不起作用。

这是 div 及其 CSS：

```
 <div class="slides">
    <?php include 'slides.php'; ?>
  </div>

.slides {
    width: 990px;
    height: 390px;
    margin-bottom: 15px;
} 
```

我已经在 jfiddle 上获得了代码（无论如何，其中一些）：

[http://jsfiddle.net/jerU7/](http://jsfiddle.net/jerU7/)

您可以在此处查看原始页面：

[http://www.autotrafficinfo.com/](http://www.autotrafficinfo.com/)

我需要将顶部的旋转横幅移动到页脚上方的底部。我将 div (class="slides") 移到了 html 的底部，但它仍然位于顶部。我意识到你可以让 div 做一些不明显的事情，但我不知道如何让这个下移。

在 jfiddle 上的代码中，您可以看到文本（“160 万的实时流量......”）位于顶部。事实上，旋转的图像出现在底部（尽管所有三个都出现在那里，而不是一次一个并旋转，因为没有连接 Java 脚本）。文字和横幅都应该在底部。

如何将 div (class="slides") 向下移动，使其位于页脚上方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:06:40.587

CSS：

```
 .slides{
      top:97%; // Or designate the px location if you so desire
      width: 990px;
      height: 390px;
      margin-bottom: 15px;
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T18:16:26.923

您的代码需要进行一些重组。

1.  `#greenSmall`将所有 div 从to包装到`#green`一个新的`.content`div 中。
2.  `float:left`删除css 属性`#green`
3.  将`.slides`div 移动到 div 下方和`.content`div 上方`footer`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-05T15:55:32.557

上述答案的代码几乎是正确的，但它错过了一个元素。要使“顶部”和“底部”起作用，元素必须绝对定位。所以，上面的代码会变成

```
.slides{
  position: absolute;      
  top:97%; // Or designate the px location if you so desire
  width: 990px;
  height: 390px;
  margin-bottom: 15px; 
```

}

# javascript - Backbone collection.'at(index)' 正在返回多个项目

> ID：15771104
> 
> 赞同：0
> 
> 时间：2013-04-02T18:04:16.867
> 
> 标签：javascript, css, backbone.js

我有一个与 Backbone 中的函数迭代有关的问题。

```
 //View
    var PanelView = BlockView.extend({ 
        //BACKBONE PROPERTIES AND FUNCTIONS 
            className   : 'panel', 
            initialize  : function(){ 
                            BlockView.prototype.initialize.call(this);
                         }, 
            //RENDERING FUNCTIONS FOR THINGS WITH COLLECTIONS
            render      : function(){ 
                            //check special properties 
                            this.$el.css(this.model.get('css')); 
                            this.renderType(); 
                            //render data from the blocks 
                            if(this.model.get('collection')){
                                this.model.get('collection').each(this.renderBlock, this);
                            }else{
                                this.renderBlock(this.model.get('block')); 
                            }
                            //return to the dialog 
                            return this; 
                         }, 
            renderBlock : function(block){
                            var view = block.get('view'); 
                            var blockView = new view({model:block}); 
                            this.$el.append(blockView.render().el); 
                          },
            renderType : function(){
                            //if there is a collection, change the css of the blocks according to the display type of the panel. 
                            if(this.model.get('collection')){ 
                                alert('rendering type');
                                switch(this.model.get('display').type){
                                    case 'rows':    
                                        //change css of blocks to be in rows 
                                        this.model.setRows();           
                                        break; 
                                    case 'columns':
                                        this.model.setColumns(); 
                                        break;
                                    case 'grid':
                                        this.model.setGrid();  
                                };                                          
                            }                           
                          }         
    }); //View 

//Model function
    setColumns  : function(){
                    if(this.get('collection')){                 
                        var block = this.get('collection').at(0); 
                        block.get('css').width = 500 + '%'; 
                        console.log(this.get('collection').at(0)); 
                    }
    }, 
```

这看起来很简单，到目前为止这个或每个。

在我遇到这个特定问题之前，每个功能都运行良好。出于某种原因，这会改变多个块的 css 值，即使它不应该这样做。

这个函数不会被多次调用，它只会发生一次。即使我在控制台中签出变量，它也会返回集合中的一个块。

谁能帮我确定为什么这段特定的代码会遍历多个对象？

我会附上所有的代码，但它有多个页面。这是唯一似乎运行异常的代码。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:30:16.080

不要在每个函数调用中将此作为参数传递

```
 .each(this.renderBlock, this); 
```

您发送的不是项目，而是上下文。我认为如果您通过项目应该可以正常工作。

```
 .each(this.renderBlock, item, this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:47:29.343

我发现问题是

```
block.get('css').width = 500 + '%'; 
```

实际上是在修改 Block 原型。每种类型的块都扩展了 Block，以及它的基本 CSS。由于他们没有自己的 CSS，他们只使用原型 css 对象。更改 block.get('css').width 调用并更改该属性，因此更改所有块。

我通过使用 block.set(css:{width: 500 + '%'}) 将其设置在该特定块上来修复它。

现在我知道为什么 set 是必要的：D

# android - SetMargin 以编程方式无法为 RelativeLayoutParams 正常工作

> ID：15771106
> 
> 赞同：4
> 
> 时间：2013-04-02T18:04:22.327
> 
> 标签：android, android-layout

我目前正在以编程方式添加封装在 Linearlayout 中的 RelativeLayout。基础是一个滚动视图，我正在尝试将这些布局添加到名为 svbase 的滚动视图中

```
LinearLayout llbase = new LinearLayout(getApplicationContext());
 LinearLayout.LayoutParams llbaseParams = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT); // Verbose!
llbaseParams.setMargins(0, new CommonOpearation().getPixel(10, getApplicationContext()), 0,  new CommonOpearation().getPixel(10, getApplicationContext()));

llbase.setLayoutParams(llbaseParams);
llbase.setGravity(Gravity.CENTER_HORIZONTAL);

for(int n =0;n<2;n++)
{

  RelativeLayout rLayoutBase = new RelativeLayout(getApplicationContext());
  RelativeLayout.LayoutParams rLayoutParms = new RelativeLayout.LayoutParams( new CommonOpearation().getPixel(140, getApplicationContext()), new CommonOpearation().getPixel(125, getApplicationContext()));
  **rLayoutParms.setMargins(0, 0,  new CommonOpearation().getPixel(5, getApplicationContext()), 0);**
  rLayoutBase.setLayoutParams(rLayoutParms);

  Drawable drawable = MyCurrentActivity.this.getApplicationContext().getResources().getDrawable(R.drawable.curved_bg); //new Image that was added to the res folder
  try {
      rLayoutBase.getClass().getMethod(android.os.Build.VERSION.SDK_INT >= 16 ? "setBackground" : "setBackgroundDrawable", Drawable.class).invoke(rLayoutBase, drawable);
  } catch (Exception ex) {

  }

  llbase.addView(rLayoutBase);
} 

  svBase.addView(llbase); 
```

如您所见，我有两个相对布局封装在水平方向的线性布局中。我已经尝试使用 setMargin 为每个相对布局提供边距，并且具有一定 5dp 的权利。但是，它不会在两个相对布局之间留出余量。但是，如果我要在 xml 中手动执行，它会起作用。

可以在图像中看到差异。顶部是 xml 指定布局，而底部两个相对布局是通过编程生成的

![在此处输入图像描述](https://i.stack.imgur.com/EsgL1.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T18:42:25.300

解决了我自己的。

解决方案已经存在！谷歌不够！我的错！ [忽略 setMargin() 的相对布局](https://stackoverflow.com/questions/8175457/relative-layout-ignoring-setmargin)

# java - 平衡四叉树的预排序数据

> ID：15771107
> 
> 赞同：-1
> 
> 时间：2013-04-02T18:04:29.160
> 
> 标签：java, sorting, computational-geometry, quadtree

PMR 矩形四叉树是一个四叉树，它在每个叶子中都有一个（矩形）对象列表。这称为桶。

此四叉树的结构取决于插入元素的顺序。
该四叉树的发明者提议为预先已知（静态）的数据实现平衡四叉树，这样要插入的（矩形）对象应按 x 和 y 坐标进行预排序。

**通过 x 和 y 坐标排序以实现平衡的四叉树究竟是什么意思？** 假设我们取矩形的 SW 角，这是否意味着按 x 排序，如果相等 x 按 y 排序？或者这是否意味着第一个元素是最小的 x，第二个是最小的 y（与 x 无关）？

该主题的圣经（Hanan Samet：多维和度量搜索结构）没有解释这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:24:43.290

似乎是一个知识并不普及的话题，我必须自己回答：

要添加到四叉树的元素的预排序顺序应该是 morton 顺序。（另见 Hanan Samet 的论文） morton 索引从给定的两个 (x,y) 坐标计算 int 值，在某种程度上，两个靠近的坐标在它们的 morton 索引上也几乎没有差异。

# c# - 如何从 Windows Phone 的 webbrowser c# 登录中获取用户 ID？

> ID：15771112
> 
> 赞同：1
> 
> 时间：2013-04-02T18:04:33.737
> 
> 标签：c#, parsing, webbrowser-control, windows-phone, userid

我正在尝试检索输入并提交正确的用户名和密码后返回的用户 ID。

我一直在努力：

1.  成功登录后关闭 Web 浏览器。（它只是重定向到具有 UserID 的页面，并且最后具有带有用户 ID 的 URL。

2.  登录后检索用户 ID。

我试过这个来检索用户ID，但没有成功。

```
 OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs ex)
                {
                base.OnNavigatedTo(ex); 
                IDictionary<string, string> parameters = NavigationContext.QueryString;      //once the login is successful this piece of code should be 
                 if (parameters.ContainsKey("id"))                                          //executed 
                     {
                    string UserId = parameters["id"];
                    }
                } 
```

然后我尝试了以下方法。我得到了当前的 URL，而不是加载的 URL。除此之外，我如何解析它以获取用户 ID？

```
private void webBrowser2_Navigated(object sender, NavigationEventArgs e)
        {
 string URLString = e.Uri.ToString();
           txtURL.Text = URLString; 
```

我想我可能只是在事件处理程序和解析方面遇到了问题。

对不起，我是新手，所以请原谅我犯的任何错误。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:16:49.417

The Navigated event will fire each time a new page is loaded in the control. So the event will be fired first when your login page is navigated to, you would ignore this. The next time the event will fire as a result of navigation in the control and this time will either be from the user successfully logging in or a failure. Either way you'll need to read the Uri and parse out the relevant parameters. You can extract just the query elements from the uri using the Query property. See here for details [http://msdn.microsoft.com/en-us/library/system.uri.query(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.uri.query(v=vs.95).aspx)

# ruby-on-rails - Rails，单选按钮不在数据库的布尔字段中存储值

> ID：15771115
> 
> 赞同：0
> 
> 时间：2013-04-02T18:04:37.287
> 
> 标签：ruby-on-rails, ruby-on-rails-3, radio-button

我创建了一个小表单来允许用户提交“意见”。这可以是积极的或消极的。我在数据库上有一个“正”布尔字段。如果是肯定的，这应该是正确的，如果是否定的，这应该是错误的。

```
=form_for @opinion do |f|
        = f.hidden_field :event_id
        %p
          =f.radio_button(:positive, :checked => (:positive == 1))
          =f.label :true, 'Positive'
          =f.radio_button(:positive, :checked => (:positive == 0))
          =f.label :false, 'Negative'
        %p
          =f.label 'Body'
          =f.text_area :body
        =f.submit 
```

但是，除了正场之外，所有内容都正确存储。我究竟做错了什么？

这就是我得到的

```
 Parameters: {"utf8"=>"✓", "authenticity_token"=>"EgFB9zohTA93ClNAQpS0qcsEivSCe1imjDUuw/e/YYA=", "opinion"=>{"event_id"=>"31", "positive"=>"{:checked=>false}", "body"=>"asdasasdasd"}, "commit"=>"Create Opinion", "locale"=>"en"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:19:25.583

取出`:checked`东西。如果您的数据库字段是布尔值，则 rails form_for 知道要检查哪个 f.radio_button。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T18:22:35.880

当您的属性值等于提供的值时，Rails 将添加“已检查”

```
=f.radio_button :positive, 1
=f.label :true, 'Positive'
=f.radio_button :positive, 0
=f.label :false, 'Negative' 
```

请检查[文档](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-radio_button)

# c++ - VS2010 不从资源文件夹中提取文件

> ID：15771120
> 
> 赞同：0
> 
> 时间：2013-04-02T18:04:48.753
> 
> 标签：c++, visual-studio-2010, relative-path

我需要在 c++ 中的 mfc 中解析我的 VS 项目中的文本文件。文本文件应该是整个`exe`产品的一部分。为此，我将文本文件放在资源文件夹中，并将代码中的路径设置为：

```
char fileName[] = "../myFile.txt"; 
```

我面临的问题是 VS 在其 Resources 文件夹中找不到此文件。我在项目文件中添加了该文件，但这只是给了我一个损坏的文件错误。但是，如果我在代码中提供文件的绝对路径，则文件访问有效，即`"C/abc/myFile.txt"`

我需要在所有机器上运行代码，因此需要一些方法让 VS 使用相对路径读取这个文件。有人可以提供一些帮助吗？我是一个新手，并且已经尝试了我所知道的一切。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:27:48.333

实际上，如果它是一个资源文件，它应该被复制到 bin 文件夹中，这意味着你的 fileName 应该是：

`char fileName[] = "myFile.txt";`

如果这不起作用，您可能需要更改 myFile.txt 的属性，以确保它确实在构建过程中被复制。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-02T18:25:12.997

在这里您可以找到问题的答案：[http ://www.cplusplus.com/forum/general/54255/](http://www.cplusplus.com/forum/general/54255/)

# php - 如何知道是否输入了电子邮件或用户名

> ID：15771129
> 
> 赞同：0
> 
> 时间：2013-04-02T18:05:29.747
> 
> 标签：php

大家好，我想问我的html表单，需要输入您可以输入的用户名/电子邮件。然后它通过用户名或电子邮件搜索数据库中是否存在该帐户（如果是）。 **该脚本有效，但仅适用于电子邮件。**

我的问题是如何在输入字段中识别用户是写用户名还是电子邮件？现在它会同时检查两者，但由于某种原因，它不会检测到仅输入用户名的电子邮件。

```
function getUserEmailExist( $input )
    {
    global $database;

        if( preg_match( '/^[a-z0-9]+([_\\.-][a-z0-9]+)*@([a-z0-9]+([\.-][a-z0-9]+)*)+\\.[a-z]{2,}$/i', $input ) ) {
            $type = 2;
            $get = $database->checkExistRecovery( $input, $type );
        }

        if( preg_match( '/[^0-9A-Za-z]/', $input ) ) {
            $type = 1;
            $get = $database->checkExistRecovery( $input, $type );
        }

        if( $get ) {
            $this->updateRecover( $input, $type );
        } else {     
            return false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:07:49.300

如果声明如下，您需要移动您的电子邮件。

因为如果输入是一封电子邮件，无论如何它都会匹配第二个预匹配。所以你正在覆盖你的 $type 变量。

固定的。

```
 function getUserEmailExist( $input )
    {
        global $database;

        if( preg_match( '/[A-Za-z0-9]+/', $input ) ) {
            $type = 1;
            $get = $database->checkExistRecovery( $input, $type );
        }

if( preg_match( '/^[a-z0-9]+([_\\.-][a-z0-9]+)*@([a-z0-9]+([\.-][a-z0-9]+)*)+\\.[a-z]{2,}$/i', $input ) ) {
            $type = 2;
            $get = $database->checkExistRecovery( $input, $type );
        }

        if( $get ) {
            $this->updateRecover( $input, $type );
        } else {     
            return false;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:10:48.983

我想你希望你的第二个正则表达式是`/[A-Za-z0-9]+/`. 您当前正在寻找不包含这些字符的任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T18:12:15.257

为什么你关心所有的验证逻辑？我看不到您的实际数据库查询，但似乎您可以轻松地执行以下操作：

```
SELECT * FROM users
WHERE email = ? OR username = ? 
```

在哪里 ？将是电子邮件或用户名值。

# java - 在哪里初始化 onLongClickListener

> ID：15771131
> 
> 赞同：1
> 
> 时间：2013-04-02T18:05:40.587
> 
> 标签：java, android, onclick, adapter, onclicklistener

我正在努力尝试实现 OnLongClick 功能 - 我无法理解在哪里添加侦听器并定义生成的方法。

我使用的实现使用了一个适配器 - 并且没有 onClickListener，但可以正常工作。任何人都可以建议在哪里/如何实现 OnLongClick 监听器

我不需要列表中的每个项目来执行不同的操作 - 只是为了让屏幕上的任何人都能长按

```
public class CombChange extends ListActivity {
    @Override
 public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);

setListAdapter(new ListEdit(this, symbols));

@Override
 protected void onListItemClick(ListView l, View v, int position, long id) {

  String selectedValue = (String) getListAdapter().getItem(position);
  if (lastPressed.equals(selectedValue) ){
   count++;}
}

public class ListEdit extends ArrayAdapter<String> {
 private final Context context;
 private final String[] values;

 public ListEdit(Context context, String[] values) {
  super(context, R.layout.activity_comb_change, values);
  this.context = context;
  this.values = values;
 }

 @Override
 public View getView(int position, View convertView, ViewGroup parent) {
  LayoutInflater inflater = (LayoutInflater) context
   .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

  View rowView = inflater.inflate(R.layout.activity_comb_change, parent, false);
  TextView textView = (TextView) rowView.findViewById(R.id.label);
  ImageView imageView = (ImageView) rowView.findViewById(R.id.logo);
  textView.setText(values[position]);

  // Change icon based on name
  String s = values[position];

  if (s.equals("a")) {
   imageView.setImageResource(R.drawable.a);

return rowView;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:50:36.837

试试这个：

```
@Override
 protected void onListItemClick(ListView l, View v, int position, long id) {

v.setOnLongClickListener(new OnLongClickListener() {

            @Override
            public boolean onLongClick(View v) {
                // TODO Auto-generated method stub

                String selectedValue = (String) getListAdapter().getItem(position);
                if (lastPressed.equals(selectedValue) ){
                count++;}

                return false;
            }
        });

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T18:29:27.723

不幸的是，a`ListActivity`没有`onListItemLongClick()`类似于[onListItemClick()](http://developer.android.com/reference/android/app/ListActivity.html#onListItemClick%28android.widget.ListView,%20android.view.View,%20int,%20long%29)函数的受保护方法。

相反，您可以添加到适配器函数中`setOnLongClickListener()`的顶级布局项（或任何）。`View``getView()`

**示例**：

```
myView.setOnLongClickListener(new OnLongClickListener() {
    @Override
    public boolean onLongClick(View v) {
        // Do something here.
        return true;
    }
}); 
```

警告，`OnLongClickListener`您放入列表项可能会隐藏`onListItemClick()`您已经为列表工作的功能。如果是这种情况，您还必须添加`setOnClickListener()`并`getView()`使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T18:26:27.857

在你的 getView 你可以说

```
rowview.setOnLongClickListener(new OnLongClickListener() {

            @Override
            public boolean onLongClick(View arg0) {
                //Do your stuff here
                return false;
            }
        }); 
```

# sql-server - SSIS：启用事务导致数据库连接失败

> ID：15771134
> 
> 赞同：3
> 
> 时间：2013-04-02T18:05:53.680
> 
> 标签：sql-server, transactions, ssis

我有一个包，用于将 CSV 文件中的记录加载到表中。它在控制流中有三个元素：

*   截断表
*   将文件加载到表中
*   验证加载后表上是否有记录或引发错误

这个想法是在包上有一个事务，因此如果元素加载失败或文件为空，则事务将回滚并且表不会被截断。

要启用事务，我只需转到包属性并设置**TransactionOption=Required**，然后我只是尝试执行包并在尝试执行第一个元素时收到此错误（尝试截断表的 SQL 任务）：

> [执行 SQL 任务] 错误：无法获取连接“数据库连接”。连接可能未正确配置，或者您可能对此连接没有正确的权限。

如果我只是返回并将包的 TransactionOption 属性更改为默认值（支持），那么包将正确执行，但如果出现错误，则不会回滚。

我正在使用 ADO.NET 连接到 SQL Server DB。

知道我在做什么错吗？这是使用交易的正确方法还是我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-24T08:13:39.197

我知道这是一个老话题，但我遇到了和你一样的问题 - 包工作正常，直到我将容器事务的选项之一设置为**TransactionOption=Required** 据我了解，这可能与 Microsoft 分布式事务协调器（MSDTC ) 服务未**在 SQL 服务器**上启动。

当我遇到这个问题时，我检查了我运行包的机器上是否启动了 MSDTC - 它是。可悲的是，我无法访问 SQL 服务器来检查同样的事情。

但是，在运行包的机器上执行以下步骤解决了问题：

在 Windows Server 2008 和 Windows Vista 上：

1.  单击**Start**，单击**Run**，然后键入**dcomcnfg**以启动 Component Services Management 控制台。

2.  单击以展开**组件服务**并单击以展开**计算机**。

3.  单击以展开 My Computer，单击以展开**Distributed Transaction Coordinator**，右键单击**Local DTC**，然后单击**Properties**。

4.  单击**本地 DTC 属性**对话框的**安全**选项卡。

 **在该对话框中，我必须**启用**“**网络 DTC 访问**”以及“**允许入站**”和“**允许出站**”。

资料来源：

[关于这个的msdn论坛](https://social.msdn.microsoft.com/Forums/sqlserver/en-US/abeff835-f379-41cb-9e9b-a78a3d27a637/implementing-transaction-in-ssis-package-execute-sql-task-error-failed-to-acquire-connection?forum=sqlintegrationservices)

[有关 MSDTC 问题疑难解答的 msdn 文章](https://msdn.microsoft.com/en-us/library/aa561924.aspx)**

# ios - 手电筒调光错误

> ID：15771137
> 
> 赞同：-1
> 
> 时间：2013-04-02T18:06:09.870
> 
> 标签：ios, objective-c, flashlight

当我将您的手电筒调光器编码放入我的应用程序时，我收到此错误“本地声明'滑块'隐藏实例变量”

这是代码：

```
UISlider *slider = [[UISlider alloc] initWithFrame:CGRectMake(20.0f, 20.0f, 280.0f, 40.0f)];
slider.maximumValue = 1.0f;
slider.minimumValue = 0.0f;
[slider setContinuous:YES];
[slider addTarget:self action:@selector(sliderDidChange:) forControlEvents:UIControlEventValueChanged];
[self.view addSubview:slider]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:10:31.573

该错误意味着`slider`在您的应用程序中某处命名的变量已被声明。如果您只是重命名变量，错误应该会消失。

并且看在史蒂夫的份上，请不要再制作另一个手电筒应用程序！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:11:07.187

`"local declaration 'slider' hides instance variable"`

这是直截了当的。您需要更改任何一个名称，

最好将本地滑块更改为其他名称：

```
UISlider *localSlider = [[UISlider alloc] initWithFrame:CGRectMake(20.0f, 20.0f, 280.0f, 40.0f)];
UISlider *slider = [[UISlider alloc] initWithFrame:CGRectMake(20.0f, 20.0f, 280.0f, 40.0f)];
localSlider .maximumValue = 1.0f;
localSlider .minimumValue = 0.0f;
[localSlider setContinuous:YES];
[localSlider addTarget:self action:@selector(sliderDidChange:) forControlEvents:UIControlEventValueChanged];
[self.view localSlider]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T18:16:03.187

您已使用与先前声明的实例变量相同的名称声明了局部变量“滑块”。您需要更改实例变量或局部变量的名称，一切都会好起来的。

# java - 使用数组来实现灵活性

> ID：15771143
> 
> 赞同：0
> 
> 时间：2013-04-02T18:06:24.000
> 
> 标签：java, arrays, bufferedreader

在我的程序的一部分中，我正在读取包含`"ua, "`并将它们设置为等于我想要处理的行数的行。我想使用数组来使这个灵活到我想要的多行。

这就是它如何使用 4 行

而不是有多个 else if 语句，我想简化它，以便我可以定义一些我想要处理的行，而不必编辑这部分

```
try (BufferedReader br = new BufferedReader(new FileReader(f.getAbsolutePath()))) {

    String line1 = null, line2 = null, line3 = null, line4 = null, line = null;
    boolean firstLineMet = false;
    boolean secondLineMet = false;
    boolean thirdLineMet = false;

    while ((line = br.readLine()) != null) {
        if (line.contains("ua, ")) {

            if (!firstLineMet) {
                line1 = line;
                firstLineMet = true;
            } else if (!secondLineMet) {
                line2 = line;
                secondLineMet = true;
            } else if (!thirdLineMet) {
                line3 = line;
                thirdLineMet = true;
            } else {
                line4 = line;
                ProcessLines(uaCount, line1, line2, line3, line4);
                line1 = line2;
                line2 = line3;
                line3 = line4;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:56:22.753

或者，您可以执行以下操作以实现您的目标。

```
int counter = 0;
int limit = 3; // set your limit
String[] lines = new String[limit];
boolean[] lineMet = new boolean[limit];

while ((line = br.readLine()) != null) {
    if (line.contains("ua, ")) {
        lines[counter] = line;
        lineMet[counter] = true; // doesn't make any sense, however
        counter++;
    }
    if (counter == limit){
    // tweak counter otherwise previous if will replace those lines with new ones
        counter = 0; 
        ProcessLines(uaCount, lines); // send whole array 
        lines[0] = lines[1]; // replace first line with second line
        lines[1] = lines[2]; // replace second line with third line
        lines[2] = lines[3]; // replace third line with fourth line

        // ProcessLines(uaCount, lines[0], lines[1], lines[2], lines[3]);
        // Do Something
    }
} 
```

我希望这能帮到您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:11:24.460

假设读取内存中的整个文件是可以的，您可以使用以下提供的便捷方法`Files`：

```
List<String> lines = Files.readAllLines(yourFile, charset);
ProcessLines(uaCount, lines.get(0), lines.get(1), ...); 
```

或者，如果您想按顺序处理这些行，但仅限于某个限制：

```
for (int i = 0; i < limit && i < lines.length(); i++) {
    processLine(lines.get(i));
} 
```

# android - 自动选择 Android 文本到语音的语言环境

> ID：15771145
> 
> 赞同：3
> 
> 时间：2013-04-02T18:06:37.623
> 
> 标签：android, text-to-speech

我开发了一个以多种语言发布的应用程序。该应用程序还使用了 Android 的一些 TextToSpeech 功能。

我想知道是否可以检测手机的语言并自动设置我的语言环境而不是要求用户决定语言环境？

```
 int result = tts.setLanguage(Locale.US); 
```

我希望自动设置

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T18:09:47.950

尝试

```
tts.setLanguage(Locale.getDefault()) 
```

设置默认语言环境。我不知道如果默认设备上没有语音词典会如何反应。

编辑：或者我可以。它将返回 LANG_MISSING_DATA 或 LANG_NOT_SUPPORTED。在这些情况下，您可能应该设置备份语言环境。

# css - Css字体在IE中不起作用

> ID：15771154
> 
> 赞同：0
> 
> 时间：2013-04-02T18:06:58.343
> 
> 标签：css, fonts, font-face

我正在使用一些从 FontSquirrel 生成的字体，但 IE 似乎无法处理这些字体。我做错了什么？这不是一个公共网页。它是为在本地平台上工作而构建的，直到我准备好启动，这就是为什么域名以`.local`.

```
 @font-face {
    font-family: 'proxima_light';
    src: url('http://www.anotherdomain.local/fonts/proximanova-light-webfont.eot');
    src: local('proxima_light'), url('http://www.anotherdomain.local/fonts/proximanova-light-webfont.eot?#iefix') format('embedded-opentype'),
         url('http://www.anotherdomain.local/fonts/proximanova-light-webfont.woff') format('woff'),
         url('http://www.anotherdomain.local/fonts/proximanova-light-webfont.ttf') format('truetype'),
         url('http://www.anotherdomain.local/fonts/proximanova-light-webfont.svg#proxima_nova_ltregular') format('svg');
    font-style: normal;
 }

 @font-face {
    font-family: 'proxima';
    src: url('http://www.anotherdomain.local/fonts/proximanova-regular-webfont.eot');
    src: local('proxima'), url('http://www.anotherdomain.local/fonts/proximanova-regular-webfont.eot?#iefix') format('embedded-opentype'),
         url('http://www.anotherdomain.local/fonts/proximanova-regular-webfont.woff') format('woff'),
         url('http://www.anotherdomain.local/fonts/proximanova-regular-webfont.ttf') format('truetype'),
         url('http://www.anotherdomain.local/fonts/proximanova-regular-webfont.svg#proxima_nova_rgregular') format('svg');
    font-weight: normal;
    font-style: normal;
 }

 @font-face {
    font-family: 'proxima';
    src: url('http://www.anotherdomain.local/fonts/proximanova-semibold-webfont.eot');
    src: local('proxima'), url('http://www.anotherdomain.local/fonts/proximanova-semibold-webfont.eot?#iefix') format('embedded-opentype'),
         url('http://www.anotherdomain.local/fonts/proximanova-semibold-webfont.woff') format('woff'),
         url('http://www.anotherdomain.local/fonts/proximanova-semibold-webfont.ttf') format('truetype'),
         url('http://www.anotherdomain.local/fonts/proximanova-semibold-webfont.svg#proxima_nova_ltbold') format('svg');
    font-weight: bolder;
    font-style: normal;
 } 
```

正如我所说..只有IE不处理字体..其他所有浏览器都做得很好..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T21:56:20.343

开发控制台是否在加载字体文件时返回错误，也请您提供字体文件的响应头。**如果响应标头包含Cache-Control: no-cache**
，我在 IE 9 中不使用字体文件时遇到了问题

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T20:30:27.307

我不确定这是否会有所帮助，但 IE 与 FF 有一些类似的跨域问题。在这种情况下，可能是您的绝对 URL 使 IE 认为您的字体是从不同的域提供的。您是否尝试过使用相对路径？**

# rest - 指定 http 文档架构的选项有哪些

> ID：15771159
> 
> 赞同：0
> 
> 时间：2013-04-02T18:07:16.550
> 
> 标签：rest, content-type

我正在开发一个 RESTful Web 服务，它可能传输不同类型的有效负载，特别是序列化为 xml 或 json 的不同结构。我知道我可以将内容类型标头设置为 application/xml 或 application/json，但我还想指定文档的结构（因此，对于 xml，我想给出架构）。

谷歌搜索我发现 application/wrml ( [http://blog.programmableweb.com/2011/11/18/rest-api-design-putting-the-type-in](http://blog.programmableweb.com/2011/11/18/rest-api-design-putting-the-type-in-content-type/) ​​-content-type/ ) 这似乎是个好主意，但尚未被广泛接受。还有其他方法可以实现相同的目标吗？

编辑：如何使用媒体类型参数（[https://www.rfc-editor.org/rfc/rfc2046](https://www.rfc-editor.org/rfc/rfc2046)）类似

```
content-type: application/xml; schema=http://myserver.com/myApplication/schema.xsd 
```

# php - PHP Diff 部分日期时间

> ID：15771164
> 
> 赞同：1
> 
> 时间：2013-04-02T18:07:30.673
> 
> 标签：php, mysql, datetime

我正在尝试减去当前日期时间与数据库中规定的时间之间的时间差。datetimes 当前格式是 yyyy:mm:dd hh:mm:ss，但是对于这种特定情况，我只想减去时间而不是日期，所以我只想计算 hh:mm:ss 然后存储到不同的我可以使用和格式化我想要的变量。是否可以获取完整的日期时间，将其分开并对其进行比较？我认为这有点令人困惑，所以请问您是否需要澄清。这是我迄今为止尝试过的：

```
<?php
//The time in the database
$classTime = DateTime::createFromFormat('Y-m-d H:i:s', '0000-00-00 18:30:00');

$timein = new DateTime("now", new DateTimeZone('America/Detroit'));
$timein->getTimestamp();
$timeout = $classTime;
$totaltime = $timeout->diff($timein);
$totaltime = $totaltime->format('Y-m-d H:i:s');
$totaltime = date('0000:00:00 H:i:s', strtotime($totaltime));
//I create a new date because i'm storing this time into the database, which can't be done with a datetime.

//FORMAT TIMES
$timein = $timein->format('Y-m-d H:i:s');
$timeout = $timeout->format('Y-m-d H:i:s');
echo "Time in " . $timein . " Time Out " . $timeout . " Total Time " . $totaltime;
?> 
```

此电流输出返回：

```
Time in 2013-04-02 14:05:32 Time Out -0001-11-30 18:30:00 Total Time 0000:00:00 00:00:00 
```

但我希望它返回如下内容：

```
Time in 2013-04-02 14:05:32 Time Out -0000-00-00 18:30:00 Total Time 0000:00:00 03:30:00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:14:41.133

你的问题不是很清楚，我花了很多时间回答错误的问题，直到我仔细查看了你的代码，看看你真正想要什么。

据我了解，您将课程的完成时间作为 MySql Datetime 类型存储在数据库中，并且您希望找到`now`课程结束时间和课程结束时间之间的剩余时间。

出于此答案的目的，我将忽略时区。

你从

```
$classTime = DateTime::createFromFormat('Y-m-d H:i:s', '0000-00-00 18:30:00'); 
```

要进行有意义的时间比较，需要将 $classTime 的日期部分设置为今天：-

```
$timeIn = new DateTime();

$year = (int)$timeIn->format('Y');
$month  = (int)$timeIn->format('m');
$day = (int)$timeIn->format('d');

$classTime->setDate($year, $month, $day); 
```

然后您可以进行比较：-

```
$diff = $timeIn->diff($classTime); 
```

$diff 现在是[DateInterval](http://www.php.net/manual/en/class.dateinterval.php)的一个实例。

我们现在可以回显信息：-

```
$start = $timeIn->format('Y-m-d H:i:s');
$end = $classTime->format('Y-m-d H:i:s');
$duration = $diff->format("%Hh, %Im, %Ss");
echo "Time in: $start, Time out: $end, Duration: $duration"; 
```

在我运行代码时，它给出了以下输出：-

```
Time in: 2013-04-05 13:22:54, Time out: 2013-04-05 18:30:00, Duration: 05h, 07m, 06s 
```

# python - 在 Python 中编码 LED 选择器时遇到问题

> ID：15771170
> 
> 赞同：1
> 
> 时间：2013-04-02T18:07:39.770
> 
> 标签：python, led, gpio

我有 4 个 LED 连接到 Raspberry Pi 的 GPIO 输出。我想使用 argv 命令，以便可以使用简单的二进制代码选择 LED。例如：

蟒蛇测试.py 1010

这将点亮该行中的第一个和第三个 LED。问题是我认为我没有正确处理这个问题。到目前为止，这是我的代码

```
from sys import argv
import RPi.GPIO as GPIO

GPIO.setmode(GPIO.BOARD)

GPIO.setup(11, GPIO.OUT)
GPIO.setup(12, GPIO.OUT)
GPIO.setup(13, GPIO.OUT)
GPIO.setup(15, GPIO.OUT)

x, y = argv

print "Script:", x

if y == '0000':
    GPIO.output(11, 0)
    GPIO.output(12, 0)
    GPIO.output(13, 0)
    GPIO.output(15, 0)

if y == '0001':
    GPIO.output(11, 0)
    GPIO.output(12, 0)
    GPIO.output(13, 0)
    GPIO.output(15, 1)

GPIO.cleanup() 
```

我忽略了其余的组合，所以我不会夸大这个问题。我遇到了几个语法问题，但我想知道我是否应该放弃这个并以另一种方式去做。我是新手，任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:15:26.290

这听起来很像您真正想要的是将输入字符串的各个部分映射到对`GPIO.output`. 您可以通过迭代控制字符串轻松地做到这一点（并且代码比目前少得多）：

```
led_map = {
    # This maps each "bit" of your input string to the correct ID for GPIO.
    0 : 11,
    1 : 12,
    2 : 13,
    3 : 15
}

for i in xrange(len(y)):
    bit = y[i]
    GPIO.output(led_map[i], int(bit)) 
```

这种设置使您不必单独编码每个排列（即使只有两个或三个位，这很快就会变得很糟糕，更不用说四个或更多了）。无需考虑排列，您可以单独考虑位，并依次对每个位执行适当的功能。

# php - PHP GD压缩png但不压缩Jpeg

> ID：15771176
> 
> 赞同：0
> 
> 时间：2013-04-02T18:07:51.710
> 
> 标签：php, png, jpeg, gd, image-compression

以下对 png 文件非常有效，但对于 jpeg/jpg 压缩不起作用。

```
function compressImage($source, $destination, $quality) {
    $info = getimagesize($source);
    if ($info['mime'] == 'image/jpeg') $image = imagecreatefromjpeg($source);
    elseif ($info['mime'] == 'image/png') $image = imagecreatefrompng($source);
    imagejpeg($image, $destination, $quality);
    return $destination;
} 
```

我如何让它压缩jpeg？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:12:25.673

为了使用 GD 处理 JPEG 文件，您的 PHP 版本需要使用内置的 libjpeg 支持进行编译。您可以在`phpinfo`. 寻找以下两个：

*   已启用 JPEG 支持
*   libJPEG 版本 6b *（或不同）*

如果您没有这些，请询问您的主机。

可能由此产生的另一个问题是您的 jpeg 图像的 mime 类型可能会出现未知。仔细检查库版本 - 如果存在，请回复评论，我会看看我是否可以通过库内省以外的方式在您的代码中找到问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:34:05.073

问题出在 PHP 上。

做：

百胜安装 gd gd-devel

# java - 在 Servlet 中创建将电子邮件发送到给定邮件 ID 的 Java 方法

> ID：15771185
> 
> 赞同：-2
> 
> 时间：2013-04-02T18:08:20.553
> 
> 标签：java, email, servlets

基本上，我想在 Servlet 中创建将电子邮件发送到给定邮件 ID 的 Java 方法。

对于一些细节，我正在创建一个在线门户。现在，我正在实现的功能是在用户注册时，将向注册的电子邮件 ID 发送一封电子邮件。情况是我无法创建整个类或专用 servlet 来处理此操作。我只需要创建一个专用方法，我可以创建其他支持方法并调用它们。

请有人告诉我如何实施。我在 5-6 个地方找了它，但不懂代码。如果您也解释了代码，那将会很有帮助。我了解专业级别的 Java EE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:14:01.763

阅读有关[JavaMail API](http://www.oracle.com/technetwork/java/javamail/index.html)的内容。

它实现了发送邮件的必要复杂性。

[在这里](http://www.mkyong.com/java/javamail-api-sending-email-via-gmail-smtp-example/)，您有一个很好的例子来说明如何使用 Gmail SMTP 服务。

如果您需要更多帮助，请告诉我们。

# function - 使用 AngularJS 进行实时计算

> ID：15771187
> 
> 赞同：0
> 
> 时间：2013-04-02T18:08:43.760
> 
> 标签：function, angularjs

我对 Angularjs 和一般的 MVVM 模型非常陌生。我正在尝试构建一个像 Excel 电子表格一样工作的计算器应用程序。IE 更新一个单元格会导致所有相关单元格也更新。

到目前为止，我的代码看起来像这样

```
<div ng-app="">

<div ng-controller="calculations">

    <input type="number" name="staff" ng-model="staff" id="staff" ng-change="change('C3')"  />

    <input type="hidden" name="budget" ng-model="budget" ng-change="change('C6')" placeholder="budget" />

    <input type="text" name="total" ng-model="total" ng-change="change('C8')" />

</div> 
```

和角

```
function calculations($scope) {

$scope.change = function (cell) {

    if (cell == 'C3') {
        $scope.budget = $scope.staff * 35000;

    }

};

} 
```

我不知道该怎么做是添加一个连接函数，当 cell = C6 （它应该在我的第一个函数中设置 $scope.budget）然后 $scope.total = $scope.budget / $scope.staff; 依此类推，直到我的所有字段都具有动态值。我的想法是我不想提交或单击开始计算，我想即时进行，这就是我选择 angular 的原因，因为我的理解是它做得很好。想法？

# database - 使用数据库登录 Azure

> ID：15771189
> 
> 赞同：0
> 
> 时间：2013-04-02T18:08:58.167
> 
> 标签：database, azure, login, azure-sql-database

我正在尝试在 asp.net 网站上创建一个登录系统，该系统允许用户注册和登录该网站。我要求将注册用户详细信息存储在 Azure 上已有的数据库中。

到目前为止，我已经创建了如下所示的登录系统：http: [//msdn.microsoft.com/en-us/library/windowsazure/hh508981.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh508981.aspx)并且表单有效。但是，当我登录到 azure 管理门户时，我找不到用户的注册详细信息。我还需要在数据库中的注册表单中添加更多字段。

有谁知道我在哪里可以查看注册用户以及如何添加更多字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:56:34.647

如果您遵循用于创建应用程序的相同链接，您将看到 SQL Azure 用于存储此信息的架构，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/FUjKB.png)

现在，如果你想直接访问这个数据库，你真正需要的是 SQL Server Management Studio (SSMS) 来连接这个数据库并从你的本地机器上访问它。按照下面的链接在本地下载和配置 SQL Azure 工作室，以便您可以连接到 SQL 数据库并修改架构或查看记录等。将 SSMS 与 SQL 数据库连接后，您可以像管理任何其他本地数据库一样管理它.

[使用 SQL Server Management Studio 管理 Windows Azure SQL 数据库](http://www.windowsazure.com/en-us/develop/net/common-tasks/sql-azure-management/)

# javascript - jquery滚动不会从确切位置滚动

> ID：15771195
> 
> 赞同：0
> 
> 时间：2013-04-02T18:09:30.637
> 
> 标签：javascript, jquery, html

我正在使用以下 jquery 使我的链接滚动到下一个 div。但是，我遇到了一个问题。从页面顶部开始，脚本可以正常工作。一旦我单击来自另一个 div 的链接（页面下方的另一个链接），脚本只会向上或向下滚动，但不会滚动到下一个指定的 div。如何使脚本从链接所在的当前位置完全滚动？

```
$(function() {
$('#nav a').bind('click',function(event){
    var $anchor = $(this);

    $('html, body, #container, .main').stop().animate({
        scrollTop: $($anchor.attr('href')).offset().top
    }, 1500,'easeInOutExpo');
    event.preventDefault();
 });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:14:54.433

你在这里有一个错误：

```
scrollTop: $($anchor.attr('href')).offset().top
     //------^^^^^^^---------------------------------this itself a selector 
```

更改为此并尝试：

```
scrollTop: $anchor.attr('href').offset().top 
```

或者这个也是：

```
 $('#nav a').bind('click',function(event){
    var $anchor = $(this).attr('href');
    $('html, body, #container, .main').stop().animate({
        scrollTop: $($anchor).offset().top
    }, 1500,'easeInOutExpo');
    event.preventDefault();
 }); 
```

### [在小提琴中结帐](http://jsfiddle.net/egzHC/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:12:14.240

你没有打电话给正确的地方......

这应该可以解决问题...首先设置锚点。

```
$(function() {
$('#nav a').bind('click',function(event){
    var $anchor = $(this).attr('href');

    $('html, body, #container, .main').stop().animate({
        scrollTop: $($anchor).offset().top
    }, 1500,'easeInOutExpo');
    event.preventDefault();
 });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T10:07:16.060

好的，所以我给你做了一个 JSFiddle，我重写了下面代码的 js 代码，但是你可以在这里查看完整的东西：http: [//jsfiddle.net/re7Xc/](http://jsfiddle.net/re7Xc/)

```
$(function() {
     $('a.scrolltonext').click(function(event){
     event.preventDefault();
     var parentblock = $(this).parent();
     var nextblock = parentblock.next();
     //nextblock.css('background-color','#00f');

         if(nextblock.size()>0) {
              $('html, body').stop().animate({
                   'scrollTop': nextblock.offset().top
              }, 800);
         }
     }); 
}); 
```

不过，这个脚本中的问题是我将链接放在 div 本身中，所以它不在某个地方的 #nav 中。因此，如果您将链接放在#nav 中，则必须**重写该部分！**

我也在那里放了一个 if 语句，因为我认为在滚动之前先检查是否有下一个 div 会更好。

希望它有一些意义，让我知道它是否适合你！干杯

# jquery - Jquery PrettyPhoto 提交按钮

> ID：15771196
> 
> 赞同：0
> 
> 时间：2013-04-02T18:09:37.243
> 
> 标签：jquery, asp.net, webforms, lightbox, prettyphoto

我正在使用一个名为 Pretty Photo 的 Jquery 灯箱解决方案。我在灯箱中打开一个表单，让用户单击发送电子邮件的提交按钮。单击该按钮时，我可以正常收到电子邮件，但其中没有任何信息。有人可以帮忙吗？我的代码在下面，用于 ASPX 和 ASPX.CS

登陆页面.ASPX.CS

```
 public partial class LandingPage : WebBasePage
{

      protected void btnSubmit_Click(object sender, EventArgs e)
{
    try
    {
        //Create the msg object to be sent
        MailMessage msg = new MailMessage();
        //Add your email address to the recipients
        msg.To.Add("vdecapite@associatedestates.com");
        //Configure the address we are sending the mail from
        MailAddress address = new MailAddress("vdecapite@associatedestates.com");
        msg.From = address;
        //Append their name in the beginning of the subject
        msg.Subject = txtName.Text + " :  " + ddlSubject.Text;
        msg.Body = txtMessage.Text + " : " + txtName.Text;

        //Configure an SmtpClient to send the mail.
        SmtpClient client = new SmtpClient("smtp.aecrealty.com");
        client.EnableSsl = false; //only enable this if your provider requires it
        //Setup credentials to login to our sender email address ("UserName", "Password")
        NetworkCredential credentials = new NetworkCredential("vdecapite@associatedestates.com", "Vpdc05141989");
        client.Credentials = credentials;

        //Send the msg
        client.Send(msg);

        //Display some feedback to the user to let them know it was sent
        lblResult.Text = "Your message was sent!";

        //Clear the form
        txtName.Text = "";
        txtMessage.Text = "";
    }
    catch
    {
        //If the message failed at some point, let the user know
        lblResult.Text = "Your message failed to send, please try again.";
    }
}
    }

            } 
```

登陆页面.ASPX

```
 <a href="#inline-1" rel="prettyPhoto" >TEST</a>
<div id="inline-1" class="hide">
       <table>
        <!-- Name -->
        <tr>
            <td align="center">
                Name:</td>
            <td>
                <asp:TextBox ID="txtName"
                                runat="server"
                                Columns="50"></asp:TextBox>
            </td>
        </tr>

        <!-- Subject -->
        <tr>
            <td align="center">
                Subject:
            </td>
            <td>
                <asp:DropDownList ID="ddlSubject" runat="server">
                    <asp:ListItem>Ask a question</asp:ListItem>
                    <asp:ListItem>Report a bug</asp:ListItem>
                    <asp:ListItem>Customer support ticket</asp:ListItem>
                    <asp:ListItem>Other</asp:ListItem>
                </asp:DropDownList>
            </td>
        </tr>

        <!-- Message -->
        <tr>
            <td align="center">
                Message:
            </td>
            <td>
                <asp:TextBox ID="txtMessage"
                                runat="server"
                                Columns="40"
                                Rows="6"
                                TextMode="MultiLine"></asp:TextBox>
            </td>
        </tr>

        <!-- Submit -->
        <tr align="center">
            <td colspan="2">
                <asp:Button ID="btnSubmit" runat="server" Text="Submit"
                    onclick="btnSubmit_Click" UseSubmitBehavior="false"/>
            </td>
        </tr>

        <!-- Results -->
        <tr align="center">
            <td colspan="2">
                <asp:Label ID="lblResult" runat="server"></asp:Label>
            </td>
        </tr>
    </table>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T20:42:02.027

jquery lightbox 是否在内容周围添加表单标签？如果是这样，您将拥有嵌套表单，即表单内的表单。嵌套表单不是 html 投诉，并且会表现得很有趣。因此，请确保您没有嵌套的表单标签。

希望这可以帮助

# c# - 从 C# 本地服务获取已安装 IIS Web 应用程序的路径

> ID：15771198
> 
> 赞同：0
> 
> 时间：2013-04-02T18:09:46.790
> 
> 标签：c#, asp.net, iis, service

我在 VS 2010 中使用 C#、.NET 开发了两个项目：一个是 ASP.NET Web 应用程序，第二个是作为本地系统运行的 C# Windows 服务。Web 应用程序通过 IIS 在同一台物理机器上安装和运行。

我的问题是，如何从服务中获取此机器上我的 Web 应用程序安装文件夹的路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:19:53.527

我假设您使用的是 IIS 7.5，并且您知道 Web 应用程序名称。如果是这样，您可以使用 Microsoft.Web.Administration 程序集中的 ServerManager 来获取物理路径。

这是有关如何使用类[ServerManager 如何获取站点在磁盘上的物理路径的链接？](https://stackoverflow.com/questions/5431703/servermanager-how-to-get-sites-physical-path-on-disk)

# jquery - 数据表 jquery json 格式

> ID：15771201
> 
> 赞同：0
> 
> 时间：2013-04-02T18:09:53.247
> 
> 标签：jquery, json, datatables

我目前正在尝试实现 jquery 数据表扩展以生成实时结果表。这些结果是由我调用另一个 Web 服务的函数背后的代码引起的。

我有 javascript 收集我的参数，我正在使用 jquery.ajax() 函数与函数后面的代码交谈。datatables 函数需要以下格式的 JSON

```
{
  "aaData": [
    [
      "Trident",
      "Internet Explorer 5.0",
      "Win 95+",
      "5",
      "C"
    ]
 ]
} 
```

我不知道如何让我的函数响应，例如将逗号分隔的信息字符串转换为上述格式。

我已经研究了 json.net 扩展，但我不确定要采取什么方法。考虑到每次我的函数运行时，我都会添加到 JSON 中，该 JSON 需要位于数据表的 .txt 文件中

任何建议表示赞赏！

谢谢

我目前拥有的代码

```
var oTable;
$(document).ready ( function(){
      oTable=$('#mytable').dataTable({
       "sAjaxSource": 'TestData.txt'
   });
 });​ 
```

并调用我的代码并返回一个字符串

```
function asyncServerCall(inputs) {
        jQuery.ajax({
            url: 'Process.aspx/SearchBtnAjax',
            data: JSON.stringify({ cities: inputs }),
            type: "POST",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function(data) {
            alert(data.d);
            oTable.fnReloadAjax();
             }
        });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:26:30.553

## 这就是我在数据表中实现实时数据的方式：

例如，我`<table id="id">`连续有 5 个单元格。通过 AJAX，我发送了一些新值，我将这些值放入变量`cell1`, `cell2`, `cell3`, `cell4`,`cell5`

```
var table=$('#id').dataTable();
var newRow=table.fnAddData([cell1,cell2,cell3,cell4,cell5]);
table.fnSettings().aoData[newRow[0]].nTr; 
```

不确定这是否正是您所需要的，但它对我来说是完美的。

# c# - 如何使用asp.net进行评论回复系统？

> ID：15771203
> 
> 赞同：-3
> 
> 时间：2013-04-02T18:09:56.447
> 
> 标签：c#, asp.net, c#-4.0

我想在 div 上显示一个帖子，并在该帖子下显示该帖子的回复，并连续想要显示另一个帖子和回复......我做了这么多，但这并没有显示所需的输出

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;
    using System.Web.UI;
    using System.Web.UI.WebControls;
    using System.Data.SqlClient;

    public partial class Default3 : System.Web.UI.Page
    {
        int i = 0;
        SqlConnection con = new SqlConnection("server=LOD-PC;uid=sa;pwd=1234;database=db2");
        protected void Page_Load(object sender, EventArgs e)
        {
            con.Open();
            SqlCommand cmd = new SqlCommand("select * from t3 ORDER by id DESC", con);
            SqlDataReader dr = cmd.ExecuteReader();
            while (dr.Read())
            {
                i++;
                string name = dr["name"].ToString();
                string image1 = dr["img"].ToString();
                string image2 = image1.Substring(2).ToString();
                string id = dr["id"].ToString();
                string status = dr["status"].ToString();
                string buttonid = i.ToString();

                Response.Write("<div id='myDiv' class='myDivClass'> <img src='" + image2 + "' style='width:50px; height:50px; float:left; margin-right:6px;' /> <br/> <br/> <span class='name'> <input id='texta' class='texta' type='text' value=" + name.ToString() + " /> <span/> <span class='id'> <input id='textb' class='textb' type='text' value=" + id.ToString() + " /> <span/> <div id='g'><br/><br/><br/><span class='status'> " + status + " </span> <span class='combutton'> <input id='"+buttonid+"'  class='button' type='button' value='Comment'/> </span> </div> </div>");
            }
            con.Close();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:17:56.513

根据您的 SQL 查询输出 HTML 时，您没有引用值的文本：

```
value=" + id.ToString() + " /> 
```

那应该是

    值='" + id.ToString() + "' />

除此之外，您还必须提供更多关于未按预期显示的信息。但是，我可以解决以下几点：

> Response.Write("任何 asp 标签")

ASP 标记是在服务器端处理的，而不是在客户端处理的。将它们写入响应不会导致它们被执行。如果您在浏览器中的 HTML 上“查看源代码”，您会看到 HTML 源代码中的标签，但它们对浏览器没有任何特殊意义。

请丢弃实现 IDisposable 的东西，例如 SqlConnection、SqlCommand 和 SqlDataReader。*using*关键字是去那里的方法。例如与

```
SqlConnection con = new SqlConnection("server=LOD-PC;uid=sa;pwd=1234;database=db2"); 
```

线

```
con.Close(); 
```

如果在访问数据库时抛出异常，则不会执行。

相反，使用表格

```
using (SqlConnection con = 
     new SqlConnection("server=LOD-PC;uid=sa;pwd=1234;database=db2"))
{
    // Do stuff with the connection
} 
```

当*using*块超出范围时，它将`con.Dispose()`自动调用（无论块内是否引发异常），然后依次调用`con.Close()`.

> 服务器=LOD-PC；uid=sa

请不要与`sa`用户联系。那是要求安全马裤。

# html - 如何制作横向描述列表？

> ID：15771204
> 
> 赞同：0
> 
> 时间：2013-04-02T18:09:58.667
> 
> 标签：html, css

我试图让它看起来像

```
杯子：考究：凌乱
糖和三通
对孩子有好处：当然
慈善机构：是的
幸运打击：没有

```

但我无法让 CSS 正确。我尝试在 dd/dt 标签上使用显示内联/块组合，但它只是搞砸了，特别是如果我想要第一个，杯子：在线路中休息。

```
dl {
  width:100%;
  overflow:hidden;
} 
```

其余代码：http: [//jsfiddle.net/eUk2h/3/](http://jsfiddle.net/eUk2h/3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:31:07.630

试试这个，有类来指定列，例如。对于左列和`column`右列。然后默认情况下and将使用属性显示在他们自己的行上。为了让事情在同一行，然后使用删除. `column1_2``column2_2``<dt>``<dd>``clear``inline``clear`

我将类名精简到最少来演示：

```
<div>
    <dl class="column column1_2">
        <dt>Cups:</dt>
        <dd>Sugar and Tee</dd>

        <dt>Good for Kids:</dt>
        <dd class="inline">Sure</dd>

        <dt>Charity:</dt>
        <dd class="inline">Yes</dd>

        <dt>LuckStrike:</dt>
        <dd class="inline">No</dd>
    </dl>
    <dl class="column column2_2">
        <dt>Dressy:</dt>
        <dd class="inline">Messy</dd>
    </dl>
</div> 
```

CSS：

```
.column {
    float: left;
}
.column1_2,
.column2_2 {
    width: 50%;
}
.column dd {
    clear: both;
    margin: 0;
}
.column dt {
    float: left;
    clear: left;
}
.column .inline {
    clear: none;
    float: left;
    margin-left: 10px;
} 
```

请参阅工作示例：http: [//jsfiddle.net/pvkZn/](http://jsfiddle.net/pvkZn/)

# android - ActionBar 可绘制背景不一致

> ID：15771206
> 
> 赞同：1
> 
> 时间：2013-04-02T18:10:09.270
> 
> 标签：android, styles, android-actionbar, actionbarsherlock

我已成功在操作栏上设置了背景图像。我使用 ActionBarSherlock，在 Android 2.x 中一切正常。问题出在 Android 4.x 上。背景图像随活动而变化。如果我将背景设置为纯色，则所有活动的外观都是相同的。如果一个集合是一个drawable，有时它会更亮，而其他的会更暗。

我在 values-14 中的样式文件

```
 <style name="AppBaseTheme" parent="android:Theme.Holo.Light">
        <item name="android:actionBarStyle">@style/ActionBarBG</item>
    </style>

    <style name="ActionBarBG" parent="android:Widget.Holo.Light.ActionBar">
        <item name="android:background">@drawable/top_bar_bg</item>
    </style> 
```

奇怪的是，当我将一些屏幕截图包含在这个问题中时，所有图像都正确显示。所以我必须假设这是设备（三星 Galaxy SII）的问题。有人发现过这样的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:22:09.820

我用其他设备进行了测试，我发现它只发生在三星 Galaxy SII 上。我被迫得出结论，这是一个设备问题。

# version-control - 合并后乌龟Hg红线

> ID：15771209
> 
> 赞同：4
> 
> 时间：2013-04-02T18:10:16.653
> 
> 标签：version-control, mercurial, version, tortoisehg

嗨，合并后我有这条红线是什么意思？ ![在此处输入图像描述](https://i.stack.imgur.com/3Adls.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T20:34:27.370

左侧的图表视图显示了您的不同开发分支，例如不同的更改集（可能由不同的人完成）：

A 人在修订版 17、20 和 25 中进行了更改
。B 人（或团队的其他成员）进行了其他更改......并且在某些时候必须再次将更改合并在一起。

不同的线条颜色只是为了清楚起见，我认为颜色是随机分配的。*[（有关更多行的屏幕截图，](http://tortoisehg.bitbucket.io/manual/2.7/workbench.html#module-workbench.dialog)*
*请参阅 TortoiseHG 文档）*

在您的示例中，在修订版 26 处连接的蓝线和红线表示您（或其他人）合并了修订版 24 和 25（蓝点所在的线）。

第 24 版也是如此，其中第 20 版和第 23 版合并。

* * *

您提出这个问题的事实表明，Mercurial（或任何 VCS）中的分支和合并概念对您来说似乎是新的。
也许你应该阅读一些关于分支和合并的内容。这里有一些很好的教程：

*   [教程 - 合并更改](https://www.mercurial-scm.org/wiki/TutorialMerge)
*   [合并](http://hginit.com/04.html)
*   [Mercurial 之旅：合并工作](http://hgbook.red-bean.com/read/a-tour-of-mercurial-merging-work.html)

# scala - 使用 Control.Parallel 将 Haskell 代码移植到 Scala

> ID：15771211
> 
> 赞同：4
> 
> 时间：2013-04-02T18:10:19.063
> 
> 标签：scala, haskell, concurrency, multicore, scalaz

下面的 Haskell 代码使用`par`和`pseq`做一些多核数字运算作为玩具来显示正在使用的几个内核。在 Scala 中表达这一点的最简单和最惯用的方式是什么？Futures and Promises 看起来很有希望（咳咳），我一直在看`scalaz.concurrent`，例如[这个例子](https://github.com/scalaz/scalaz/blob/master/example/src/main/scala/scalaz/example/concurrent/Fibs.scala)，但我找不到文档来解释这一切。

```
import Control.Parallel

main = a `par` b `par` c `pseq` print (a + b + c)
  where
      a = ack 3 10
      b = fac 42
      c = fib 35

fac 0 = 1
fac n = n * fac (n-1)

ack 0 n = n+1
ack m 0 = ack (m-1) 1
ack m n = ack (m-1) (ack m (n-1))

fib 0 = 0
fib 1 = 1
fib n = fib (n-1) + fib (n-2) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T20:06:05.583

您可以像这样在 Scala 中翻译您的示例：

```
import concurrent.{Await, Future, future}
import concurrent.ExecutionContext.Implicits.global
import concurrent.duration.Duration

object Main extends App {

  val fac: Int => Int = {
    case 0 => 1
    case n => n * fac(n-1)
  }

  val ack: (Int, Int) => Int = {
    case (0, n) => n + 1
    case (m, 0) => ack (m-1, 1)
    case (m, n) => ack (m-1, ack(m, n-1))
  }

  val fib: Int => Int = {
    case 0 => 0
    case 1 => 1
    case n => fib(n-1) + fib(n-2)
  }

  val fa = future { ack(3, 10) }
  val fb = future { fac(42) }
  val fc = future { fib(35) }

  val x = for (((a, b), c) <- fa zip fb zip fc) yield (a + b + c)

  val result = Await.result(x, Duration.Inf) //awaiting synchronously after the result
  println(s"Value is: $result")

} 
```

该`future { fib(3, 10) }`位将创建一个异步计算，该计算将在不同的执行线程上运行并返回一个`Future`对象。然后，您可以将所有未来组合成一个大未来，该未来将提供所有结果的列表，使用`Future.sequence`.

我们可以将后一个future的结果映射到结果的总和中，从而获得最终值。

有了这个最终的未来，我们可以做几件事。我们可以进一步组合它，或者我们可以在其上附加回调，或者我们可以同步等待指定的持续时间。在我的示例中，我在结果之后以同步方式等待无限时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T19:57:13.600

我建议您使用期货，因为它们是自 2.10 以来标准库的一部分并且非常易于使用。我不会移植你的代码，而是给你一个例子，让你有个想法。

```
// not tailrec, will stack overflow for larger numbers
def fib(x: Int): Int = x match {
  case 0 | 1 => x
  case x => fib(x-1) + fib(x-2)
}

import scala.concurrent._
import ExecutionContext.Implicits.global

// create all the futures
val futures = Seq(future(fib(3)), future(fib(4)), future(fib(5)))

// make a Future[Seq[Int]] out of Seq[Future[Int]] and sum the ints
val sumFuture = Future.sequence(futures).map(_.sum)

// if the future is completed successfully print the result
sumFuture.onSuccess {
  case x => println(x)
} 
```

# git - WebStorm/PhpStorm + Git 集成：“相同”与“最新”存储库版本

> ID：15771212
> 
> 赞同：5
> 
> 时间：2013-04-02T18:10:21.753
> 
> 标签：git, intellij-idea, phpstorm, webstorm

我是 Git 新手，如果这是一个愚蠢的问题，我很抱歉，但是`git`右键单击 WebStorm/PhpStorm 中的文件时出现的上下文菜单的子菜单中的以下两个选项有什么不同（在项目侧栏中）

*   与*相同*的存储库版本比较
*   与*最新*的存储库版本比较

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T11:52:02.643

请参阅[比较文件版本](http://jetbrains.com/webstorm/webhelp/comparing-file-versions.html)帮助部分。

*   *相同*版本是您上次同步到的版本。显示自上次更新以来的当前本地更改。
*   如果自上次更新后存储库中的文件已更改，则与*最新存储库版本相比可能会显示其他更改。*

# c++ - 如何从没有复制构造函数的函数返回一个类？

> ID：15771214
> 
> 赞同：1
> 
> 时间：2013-04-02T18:10:24.993
> 
> 标签：c++, boost, boost-asio, smart-pointers, copy-constructor

我用的是boost Asio，下面的函数不会编译。

```
udp::resolver Create_UDP_Socket(){
    boost::asio::io_service io_service;
    udp::socket s(io_service, udp::endpoint(udp::v4(), 0));
    udp::resolver resolver(io_service);
    return resolver;
} 
```

错误：使用已删除的功能

> boost::asio::ip::basic_resolver::basic_resolver(const boost::asio::ip::basic_resolver&)

返回解析器的最佳方法是什么？有什么我可以用移动语义做的，还是我应该指向解析器并返回它？（什么样的：共享/独特？）

**编辑：这有效：**

```
std::shared_ptr<udp::resolver> Create_UDP_Socket(){
    boost::asio::io_service io_service;
    udp::socket s(io_service, udp::endpoint(udp::v4(), 0));
    std::shared_ptr<udp::resolver> resolver(new udp::resolver{io_service});
    return resolver;
} 
```

我仍然很好奇是否可以在不指向该类的情况下返回该类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T18:36:09.277

*您可以通过将智能指针*返回到一个对象来避免复制对象。

```
boost::shared_ptr<udp::resolver> Create_UDP_Socket(){
    boost::asio::io_service io_service;
    udp::socket s(io_service, udp::endpoint(udp::v4(), 0));
    return boost::shared_ptr<udp::resolver>( new resolver(io_service) );
} 
```

A `std::shared_ptr`or`std::unique_ptr`也可以。

# java - 比较泛型类型 Java

> ID：15771215
> 
> 赞同：7
> 
> 时间：2013-04-02T18:10:28.690
> 
> 标签：java, generics, types, compare

我在比较泛型类型时遇到问题。在 C# 中，我一直在做类似的事情：`class Element<T, V> where T : IComparable<T>`.

我的问题是如何用java编写？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-02T18:11:18.860

我怀疑你想要类似的东西：

```
class Element<T extends Comparable<T>> 
```

...使用[`Comparable`](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)接口和有[界类型参数](http://www.angelikalanger.com/GenericsFAQ/FAQSections/TypeParameters.html#What%20is%20a%20bounded%20type%20parameter?)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-25T20:48:17.997

希望它对其他人有帮助。

```
import java.lang.reflect.Method;
import java.util.ArrayList;
import java.util.Collections;
import java.util.HashMap;
import java.lang.reflect.Method;
import java.util.ArrayList;
import java.util.Collections;
import java.util.HashMap;

public class Comparator {
    public static HashMap<Class,Class> primitiveMap = new HashMap<Class,Class>() {{
        put(boolean.class,Boolean.class);
        put(byte.class,Byte.class);
        put(char.class,Character.class);
        put(short.class,Short.class);
        put(int.class,Integer.class);
        put(long.class,Long.class);
        put(float.class,Float.class);
        put(double.class,Double.class);
        put(String.class,String.class);
        put(Boolean.class,Boolean.class);
        put(Byte.class,Byte.class);
        put(Character.class,Character.class);
        put(Short.class,Short.class);
        put(Integer.class,Integer.class);
        put(Long.class,Long.class);
        put(Float.class,Float.class);
        put(Double.class,Double.class);
        put(Number.class, Number.class);
    }};

    private static int compare(Class<?> returnType,Object a, Object b) {
        if(returnType == String.class) {
            return ((String)a).compareTo((String)b);
        } else if(returnType == Short.class) {
            return ((Short)a).compareTo((Short)b);
        } else if(returnType == Integer.class) {
            return ((Integer)a).compareTo((Integer)b);
        } else if(returnType == Long.class) {
            return ((Long)a).compareTo((Long)b);
        } else if(returnType == Float.class) {
            return ((Float)a).compareTo((Float)b);
        } else if(returnType == Double.class) {
            return ((Double)a).compareTo((Double)b);
        }
        return 0;
    }
    public static <T> void sortAscending(ArrayList<T> list,Method m) {
        Class<?> returnType = primitiveMap.get(m.getReturnType());
        Collections.sort(list,(a,b) -> {
            try {
                return compare(returnType,m.invoke(a),m.invoke(b));
            } catch(Exception e) {
                System.out.println("Exception occured"+e.getMessage());
            }
            return 0;
        });
    }
    public static <T> void sortDescending(ArrayList<T> list,Method m) {
        Class<?> returnType = primitiveMap.get(m.getReturnType());
        Collections.sort(list,(a,b) -> {
            try {
                return compare(returnType,m.invoke(b),m.invoke(a));
            } catch(Exception e) {
                System.out.println("Exception occured"+e.getMessage());
            }
            return 0;
        });
    }
} 
```

用于

```
 import java.util.ArrayList;

public class Roommates {
    private String name;
    private int age;
    public Roommates(String name,int age) {
        this.name=name;
        this.age=age;
    }
    public String getName() {
        return name;
    }
    public int getAge() {
        return age;
    }
    public String toString() {
        return "name="+name+" age="+age;
    }

    public static void main(String...strings)throws Exception {
        ArrayList<Roommates> list = new ArrayList<Roommates>();
        list.add(new Roommates("Siva",31));
        list.add(new Roommates("Prabu",25));
        list.add(new Roommates("Suresh",55));
        list.add(new Roommates("Raghav",23));
        list.add(new Roommates("Suganthan",27));
        list.add(new Roommates("Vijay",34));

        Comparator.sortDescending(list,Roommates.class.getDeclaredMethod("getName"));
        System.out.println(list);

        Comparator.sortAscending(list,Roommates.class.getDeclaredMethod("getAge"));
        System.out.println(list);
    }
} 
```

# javascript - 除非先单击，否则不会填充 Ext.form ComboBox

> ID：15771218
> 
> 赞同：0
> 
> 时间：2013-04-02T18:10:36.453
> 
> 标签：javascript, extjs, combobox, store

我所拥有的是一个获取 ID 列表的下拉列表，其选择决定了应该为第二个下拉列表获取哪个列表。问题是，除非我先单击（空）第二个下拉列表，否则在*第*一个下拉列表中选择一个选项后它不会填充。*但是*，一旦执行此“解决方法”，无论何时在第一个下拉列表中选择一个选项，第二个下拉列表总是会正确填充，这是预期的功能（除了最初的怪异）。

抱歉，如果这令人困惑，这是我的代码：

```
var restaurantInput =
  {
      createInput: function(parentObject, inputClassName, value, propertyObject)
      {
          var restaurantList = [];
          $.ajax({
              type: "GET",
              url: "http://mysite.com/restaurants/",
              success: function(response)
              {
                  var results = (typeof response === 'string' ) ? JSON.parse(response) : response;
                  for (i in results.restaurants){
                      restaurantList.push({restaurantID: results.restaurants[i].restaurant_id.toString(), restaurantname: results.restaurants[i].name});
                  }
              }
          }).done(function(){
              var restaurantCombo = Ext.create("Ext.form.field.ComboBox",
              {
                  store:
                  {
                    filterOnLoad: false,
                    sortOnLoad: false,
                    fields: ["restaurantID", "restaurantname"],
                    data: restaurantList
                  },
                  name: "restaurantName",
                  id: "restaurantName",
                  displayField: "restaurantname",
                  valueField: "restaurantID",
                  listeners: {
                      'select':function(){
                          updateMenuList(Ext.getCmp("restaurantName").getValue());
                      }
                  }
              });
              var str = '<div id="restaurantComboDiv"></div>';
              parentObject.html(str);
              restaurantCombo.setValue(value);
              restaurantCombo.render("restaurantComboDiv");
          });
      }
  }; 
```

* * *

```
var menuCombo = Ext.create("Ext.form.field.ComboBox",
  {
      store:
      {
        filterOnLoad: false,
        sortOnLoad: false,
        fields: ["menuID", "menuname"],
        data: []
      },
      name: "menuName",
      id: "menuName",
      displayField: "menuname",
      valueField: "menuID",
      multiSelect: true
  });

var menuInput =
  {
      createInput: function(parentObject, inputClassName, value, propertyObject)
      {
      var str = '<div id="menuComboDiv"></div>';
      parentObject.html(str);
      menuCombo.setValue(value);
      menuCombo.render("menuComboDiv");
      }
  }; 
```

* * *

```
function updateMenuList(RID)
  {
      var menuList = [];
      $.ajax({
              type: "GET",
              url: "http://mysite.com/restaurants/"+RID,
              success: function(response)
              {
                  var results = (typeof response === 'string' ) ? JSON.parse(response) : response;
                  var i=0, len=0;
                  for (i=0, len=results.menu.length; i<len; i++)
                  {
                    menuList.push({menuID: results.menu[i].menu_id, menuname: results.menu[i].name});
                  }
              }
          }).done(function(){
              menuCombo.setValue("");
              menuCombo.store.removeAll();
              menuCombo.store.add(menuList);
              menuCombo.bindStore(menuCombo.store);
          });
  } 
```

当页面首次加载时，用户可以从餐厅列表中进行选择。当做出选择时，会触发一个事件，该事件应该更新菜单的存储。然后用户尝试选择他们的订单，但菜单是空白的。如果用户选择另一家餐厅，则菜单会正确填充。每隔一段时间，用户选择任何餐厅，菜单就会继续填充。

如果用户的第一个选择是打开菜单，它显然是空白的，因为尚未选择餐厅。如果用户随后选择了一家餐厅，则菜单会正确填充。

我试图通过调用`menuCombo.expand();`更新函数来解决这个问题`.done()`，它有点工作。这会导致菜单在选择餐厅后立即展开，并且正确的项目都在那里。但是，一旦 Menu 因任何原因崩溃，再次展开时它会变为空白，这与之前的问题完全相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T18:51:54.657

找到了我的问题的答案（与您的问题完全相同），将 queryMode 设置为本地...

comboBox.queryMode = '本地';

（参考：[与 Ext.data.JsonStore 连接的 ExtJS 3 Combobox 在第二次++ click 时未打开](https://stackoverflow.com/questions/8853417/extjs-3-combobox-connected-with-ext-data-jsonstore-doesnt-open-at-second-clic)）

希望这可以帮助！

# eclipse - 如何使用 print() 方法打印带有空格的参数？

> ID：15771219
> 
> 赞同：0
> 
> 时间：2013-04-02T18:10:38.870
> 
> 标签：eclipse, python-3.x, pydev

如果我为 Python 2.x 解释器提供

```
 print 1, 2, 3 
```

，它将输出

```
 1 2 3 
```

当我为 3.0 解释器提供相同的输入时，eclipse (PyDev) 遇到错误；“期待其中之一：..”。但是，它能够运行代码并提供相同的输出。为什么我会收到此错误？另外，如何使用 print() 方法打印相同的输出？我试过了

```
 print(1, 2, 3) 
```

，但这会输出元组

```
 (1, 2, 3) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:22:09.030

```
print(1, 2, 3) 
```

在 Python 3 下工作。如果你得到一个元组，那就是 Python 2。

如果你这样做

```
from __future__ import print_function 
```

然后它也可以在 Python 2 下工作。

# ios - 如何在 UIView 中嵌入表格视图，类似于在 iBooks 中用于字体选择的方式？

> ID：15771221
> 
> 赞同：0
> 
> 时间：2013-04-02T18:10:42.407
> 
> 标签：ios, objective-c, uitableview, uiview, uiviewcontroller

![在此处输入图像描述](https://i.stack.imgur.com/cHeNA.png)

我想实现类似于 iBooks 如何在 UIView 中嵌入 UITableView 以进行字体选择的东西，但我不确定如何。谁能解释如何实现这种效果？

（注意：这是针对 iPhone 的。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:27:12.680

您可以使用 UIPopover 控制器。SettingsViewController 只是一个带有 tableview 的普通 ViewController。尝试这样的事情：

```
-(IBAction)settings:(id)sender {

if (_poController != nil && [_poController isPopoverVisible] == YES) {

if ([_poController.contentViewController isKindOfClass:[SettingViewController class]]) {

  return;
} else {

  [_poController dismissPopoverAnimated:NO];
}
}

SettingViewController* vc = [[SettingViewController alloc] initWithNibName:@"SettingsViewController" bundle:nil];
UINavigationController *navController= [[UINavigationController alloc] init];
[navController pushViewController:vc animated:NO];

CGRect f = vc.view.frame;
f.size.height = 237.0f;
f.size.width = 350.0f;
vc.view.frame = f;
vc.modalPresentationStyle = UIModalPresentationFormSheet;
vc.contentSizeForViewInPopover = CGSizeMake(350.0f, 237.0f);

if (_poController == nil) {
_poController = [[UIPopoverController alloc]   initWithContentViewController:navController];
}
_poController.contentViewController = navController;
vc.controller = _poController;

[_poController presentPopoverFromRect:_settings.frame 
                             inView:_buttonsView
           permittedArrowDirections:UIPopoverArrowDirectionUp 
                           animated:YES];
[vc release];
[navController release];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:33:03.767

不确定它是否正是您想要的，但您可以使用它：

[http://www.cocoacontrols.com/controls/wepopover](http://www.cocoacontrols.com/controls/wepopover)

它在 iPhone 上可用。Cocoa 控件也是很多自定义控件的好来源，我过去曾使用过它。

# php - Symfony 新包找不到模板

> ID：15771229
> 
> 赞同：2
> 
> 时间：2013-04-02T18:11:06.080
> 
> 标签：php, symfony

我做了一个新的 bundle routing.yml：

```
_jihtest:
    pattern: /test
    defaults: { _controller: JihTest:Index:index } 
```

创建文件目录/src/Jih/Test/...（例如/src/Jih/Test/Recources/views/Index/index.html.twig）

我可能是一个索引控制器：

```
class IndexController extends Controller{

    public function indexAction() {

        return $this->render('JihTest:Index:index.html.twig');

    }

} 
```

但是当转到链接时，它说：`Unable to find template "JihTest:Index:index.html.twig".`

我做错了什么/忘记了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T18:14:20.493

控制器的名称与文件夹的名称相匹配。在您的情况下，文件夹名称以小写字符“i”开头。将其重命名为“索引”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T18:24:22.297

在您的情况下，捆绑包名称必须以 结尾`Bundle`：

```
_jihtest:
    pattern: /test
    defaults: { _controller: JihTestBundle:Index:index } 
```

和

```
class IndexController extends Controller{

    public function indexAction() {

        return $this->render('JihTestBundle:Index:index.html.twig');

    }
} 
```

# ios - iOS6，StoryBoards：UISearchDisplayController 返回错误的自定义 UICell 高度

> ID：15771231
> 
> 赞同：0
> 
> 时间：2013-04-02T18:11:10.787
> 
> 标签：ios, uitableview, uisearchbar, uisearchdisplaycontroller

我在情节提要中使用自定义单元格，高度设置为 57。

![在此处输入图像描述](https://i.stack.imgur.com/fEt7i.png)

在 tableView 中搜索时，`UISearchDisplayController`返回我的自定义单元格，但高度错误。

![在此处输入图像描述](https://i.stack.imgur.com/99PRF.png)

代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellReuseIdentifier = @"Cell";
CommemorativeItemCell *cell =[self.tableView dequeueReusableCellWithIdentifier:CellReuseIdentifier];

KmCell *kmCell=nil;

if(tableView==self.searchDisplayController.searchResultsTableView)
{
   kmCell=[self.filteredResult objectAtIndex:[indexPath row]];
}
else
{
    kmCell=[self.arr objectAtIndex:[indexPath row]];
}

// bla bla filling up and drawing labels...

return cell;
} 
```

如何使单元格 UISearchDisplayController 返回具有相同的高度？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:20:51.750

您是否尝试过在 viewDidLoad 中设置搜索结果单元格的高度

```
self.searchDisplayController.searchResultsTableView.rowHeight = 100; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-15T10:20:04.450

试试这个方法可能对你有帮助！

您可以根据需要返回数字而不是 110。例如，我使用的是 110。

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 110;
} 
```

# go - 为什么运行某些 goroutine 需要 time.sleep？

> ID：15771232
> 
> 赞同：34
> 
> 时间：2013-04-02T18:11:14.563
> 
> 标签：go, goroutine

在 GO 教程中，我们有这张幻灯片：[Goroutines](https://tour.golang.org/concurrency/1)

```
package main

import (
    "fmt"
    "time"
)

func say(s string) {
    for i := 0; i < 5; i++ {
        time.Sleep(100 * time.Millisecond)
        fmt.Println(s)
    }
}

func main() {
    go say("world")
    say("hello")
} 
```

运行此代码会产生预期的结果（“world”和“hello”交替写入屏幕 5 次）。

但是，如果我们注释掉`time.Sleep`（因此，`"time"`导入的行）并再次运行程序，我们只剩**下**五次在屏幕上写入的“hello”。

`time.Sleep`使goroutine 免于死亡有什么如此重要？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-02T18:27:12.493

如果你删除了，`time.Sleep`你就不会给`say("world")`goroutine 运行的机会。goroutine 调度器不是抢占式的。你的 goroutine 必须在另一个 goroutine 运行之前放弃控制。放弃控制的一种方法是奔跑`time.Sleep`。

如果你`time.Sleep`从`say`函数中取出 ，那么主 goroutine 运行 5 次而不放弃对辅助 goroutine 的控制，然后当主 goroutine 从`say`程序返回时退出，因为没有什么可以让程序保持活力。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-04T21:01:00.420

因为 goroutine 调度器不是抢占式的，所以你的 goroutine 必须在另一个 goroutine 运行之前放弃控制。放弃控制的一种方法是使用`time.Sleep`. 另一种方法是使用`runtime.Gosched()`.

这是修改为使用 Gosched() 的教程：[http ://play.golang.org/p/jQ9mlGYXXE](http://play.golang.org/p/jQ9mlGYXXE)

这是理解 goroutines 的有用课程。但是，试图直接控制调度器绝对是一种反模式；悲伤往往会随之而来。

相反，更多地考虑 goroutines，比如通信数字硬件的块（状态机是一个很好的类比）。最好了解一下goroutine 所基于的[Communicating Sequential Processes模型。](http://usingcsp.com/)在基于 CSP 的设计中，每个 goroutine 都有自己的私有状态并交换消息以与其他 goroutine 的状态进行交互。消息的传递强制同步，调度程序使用同步来确定哪些活动获得 cpu 时间以及哪些活动被放入等待队列。

当您以这种方式使用 Go 时，您可能永远不需要担心调度程序的内部结构。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-07T23:36:23.560

如果你从 say 函数中删除*time.Sleep*，main 将执行 say("hello") 并终止而不执行 goroutine。如果您在主端之前添加 time.Sleep （或其他*选择 {}*），它将给 goroutine 运行时间，并且将从调度程序中选择该线程。

例子：

```
package main

import (
    "fmt"
    "time"
)

func say(s string) {
    for i := 0; i < 5; i++ {
        // time.Sleep(100 * time.Millisecond)
        fmt.Println(s)
    }
}

func main() {
    go say("world")
    say("hello")

    time.Sleep(1*time.Second)
    // Vs: 
    // select {} // blocks indefinitely, requires manual interrupt
          // In CSP-speak the empty select is like STOP.
          // for{} would cause the cpu to max and the process's STATE will be `running`
          // select{} will not cause the cpu to max and the process state will be `sleeping`
} 
```

输出通常是 5 *hello*后跟 5 *world*但它也可以设法在最后一个*hello之前打印一个**world*

 ***试试看 --> (http://) **goo.gl/K2v7H0*****

# macos - 由于奇怪的原因，launchd Job 无法执行（3）：8

> ID：15771236
> 
> 赞同：2
> 
> 时间：2013-04-02T18:11:22.537
> 
> 标签：macos, osx-mountain-lion, launchd, launchdagent

我正在尝试在 OS X Mountain Lion 10.8.3 中安排一个简单的任务

```
launchctl start nextstopsun.helloworld 
```

命令不执行脚本并向控制台抛出消息

```
4/2/13 9:50:49.663 PM com.apple.launchd.peruser.501[139]: (nextstopsun.helloworld[46729]) Job failed to exec(3) for weird reason: 8 
```

我的 plist 很简单：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Label</key>
    <string>nextstopsun.helloworld</string>
    <key>Program</key>
    <string>/Users/nextstopsun/Work/scripts/hw.sh</string>
    <key>StartCalendarInterval</key>
    <dict>
        <key>Hour</key>
        <integer>21</integer>
        <key>Minute</key>
        <integer>15</integer>
    </dict>
    <key>UserName</key>
    <string>nextstopsun</string>
</dict>
</plist> 
```

脚本也很简单

```
echo "Hello World!" > hw.log 
```

launchctl 加载它没有错误。从 shell 执行脚本时，它按预期工作。注销并重新登录无济于事。在谷歌中没有找到任何答案。那个“奇怪的原因：8”到底是怎么回事？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T06:40:33.583

几点建议：

1.  使您的脚本可执行 ( `chmod +x <your_script>`) 或通过 bash 或 sh 将脚本作为参数启动它
2.  **最有可能**：您的 shebang 行 (#!) 有错误，launchd 无法识别。尝试`#!/bin/sh`或`#!/bin/bash`。请注意，它必须是脚本的第一行。
3.  首先通过 加载您的工作`launchctl load <your_plist>`。但我认为你已经这样做了，否则会有其他错误消息。

# javascript - 如何从 Azure 数据库中的表中删除一行？

> ID：15771237
> 
> 赞同：0
> 
> 时间：2013-04-02T18:11:24.253
> 
> 标签：javascript, windows, azure, windows-8, windows-store-apps

我正在开发一个 Windows 商店 javascript 应用程序。该应用程序通过移动服务与 Azure 集成。我想删除与特定 id 匹配的特定记录。

假设我在表（项目）中有四列（否，名称，标题，消息，id）

我想删除 id=5 和 title='stackoverflow' 的整行。什么代码将执行该操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:02:26.293

鉴于您获得了对[表](http://msdn.microsoft.com/en-us/library/windowsazure/jj554239.aspx)对象的引用，您需要从表中获取实际行，然后只需在对象上调用[del(item, callback)](http://msdn.microsoft.com/en-us/library/windowsazure/jj554233.aspx)方法`table`。您可以从已经检索到的对象列表中获取实际行，或者使用[where 方法](http://msdn.microsoft.com/en-us/library/windowsazure/jj613351.aspx)来获取它。

类似于：

```
var myTable = client.getTable('MyItem');
// here is a code to get the actual item
myTable.del(item); 
```

或更简单：

```
myTable.where({ id: 5, titile: "stackoverflow" })
    .read()
    .done(function (results) {
        var result = results[0];
        if (result != null && typeof (result) != "undefined") {
            todoTable.del(result);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T05:06:55.787

根据移动服务服务器脚本参考：

[http://msdn.microsoft.com/en-us/library/windowsazure/jj554210.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/jj554210.aspx)

删除的语法是`Table.del(itemOrId, options)`. 如果您已经知道要删除的行的 id，只需将其传递给 del.. `table.del(5)`，而不是先获取项目然后删除它。

我最初的回答假设您使用的是服务器端脚本，但听起来您正在使用 JS 客户端库并且它只需要一个对象。如果您真的只想传递一个 id 我会尝试将它作为对象参数传递，然后更新您的服务器端删除脚本以使用`Table.del(itemOrId, options)`，或者，在您的服务器端删除脚本中添加 id 参数并为对象传递 null 。

# c# - c# SelectSingleNode in xml 返回null。此站点上没有类似的解决此问题的解决方案

> ID：15771239
> 
> 赞同：1
> 
> 时间：2013-04-02T18:11:26.013
> 
> 标签：c#, xml

我在读取 XML 字符串时遇到了问题。在这里，我有以下一个：

```
<SplitterLayoutDataSet xmlns="http://tempuri.org/SplitterLayoutDataSet.xsd"> 
    <SplitterLayout> 
        <SplitterName>mainSplitContainerControl</SplitterName> 
            <SplitterPosition>0.2213375796178344</SplitterPosition> 
     </SplitterLayout> 
</SplitterLayoutDataSet> 
```

所以，我想用`<SplitterName>`以下代码读取标签：

```
XmlElement rootElement = doc.DocumentElement;
rootElement.RemoveAllAttributes();
if (rootElement != null)
    {
        foreach (KeyValuePair<Control, object> key in SaveLayoutControls)
        {
            Control c = key.Key;
            XmlElement el = rootElement.SelectSingleNode("SplitterName") as XmlElement;
            if (el != null)
            {
                if (c is GridControl)
                    SetGridLayout(el, c as GridControl);
                else if (c is SplitContainerControl)
                    SetSplitContainerLayout(el, c as SplitContainerControl);
                else if (c is TreeList)
                    SetTreeListLayout(el, c as TreeList);
                else if (c is CollapsibleSplitter)
                    SetCollapsibleSplitterLayout(el, c as CollapsibleSplitter);
                else if (c is Splitter)
                    SetSplitterLayout(el, c as Splitter);
                }
            }
       } 
```

我想读取“el”字段，但它返回 NULL 值。有什么想法可以解决这个问题吗？因为我尝试了很多方法都没有结果。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:15:41.660

有两个问题：

1）您要求一个*没有命名空间*`SplitterName`的元素，而 XML 文件中的元素隐式使用命名空间 URI 。*`"http://tempuri.org/SplitterLayoutDataSet.xsd"`*

 *2）您要求直接在文档元素下的节点，并且您的`SplitterName`元素*不是*`SplitterLayoutDataSet`.

您绝对*可以*为此使用 XPath [`XmlNamespaceManager`](http://msdn.microsoft.com/en-gb/library/system.xml.xmlnamespacemanager.aspx)，但我个人会尝试使用 LINQ to XML：

```
XNamespace ns = "http://tempuri.org/SplitterLayoutDataSet.xsd";
XElement root = ...;
XElement names = root.Descendants(ns + "SplitterName").First(); 
```

（此外，当您没有`key`在搜索中的任何位置使用时，不清楚为什么您在每次迭代中都搜索该元素......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:15:22.063

您的 XPath 没有指向正确的位置。

"SplitterName" xpath 将检查根元素下的该元素。

采用

"//SplitterName" 或 "//SplitterLayout/SplitterName" 或 "\SplitterLayoutDataSet/SplitterLayout/SplitterName"

并删除 xmlns="zzz" 或将 NamespaceManager 添加到添加了命名空间并以 XPath 元素为前缀的查询中，例如“//ns:SplitterName”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T13:05:12.667

好的，我找到了解决方案。我尝试使用命名空间，现在这部分代码可以正常工作。这是以下代码示例；

```
 XmlDocument doc = new XmlDocument();
    doc.InnerXml = xml;
    XmlElement rootElement = doc.DocumentElement as XmlElement;
    XmlNamespaceManager xns = new XmlNamespaceManager(doc.NameTable);
    xns.AddNamespace("ns", "http://tempuri.org/SplitterLayoutDataSet.xsd");
    if (rootElement != null)
    {
        foreach (KeyValuePair<Control, object> key in SaveLayoutControls)
        {
            Control c = key.Key;
            XmlElement el = rootElement.SelectSingleNode("ns:SplitterLayout", xns) as XmlElement;
            if (el != null)
            {
                if (c is GridControl)
                    SetGridLayout(el, c as GridControl);
                else if (c is SplitContainerControl)
                    SetSplitContainerLayout(el, c as SplitContainerControl);
                else if (c is TreeList)
                    SetTreeListLayout(el, c as TreeList);
                else if (c is CollapsibleSplitter)
                    SetCollapsibleSplitterLayout(el, c as CollapsibleSplitter);
                else if (c is Splitter)
                    SetSplitterLayout(el, c as Splitter);
            }
        }
    } 
```*

# php - 无效格式 xml 的最佳 PHP 解析器

> ID：15771241
> 
> 赞同：3
> 
> 时间：2013-04-02T18:11:33.253
> 
> 标签：php, xml, xml-parsing

什么是最好的 xml 解析器，特别是对于技术上无效且`<?xml`缺少标签的 XML 格式？

我不能使用 simpleXML，因为这会导致无效的错误。我知道我可以在获得 xml 后手动添加我需要的标签，但我更喜欢看看你们认为将 xml 解析为 php 中的数组的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:16:25.930

您可以[`SimpleXML`](http://www.php.net/manual/en/book.simplexml.php)通过使用来使用和禁用错误[`libxml_use_internal_errors(false);`](http://php.net/manual/en/simplexml.examples-errors.php)。万一 SimpleXML 根本不会使用您的字符串，我以前曾亲自[`DOM`](http://www.php.net/manual/en/book.dom.php)解析/修复损坏的 XML。

另一方面，为什么不简单地`<?xml`在阅读之前添加字符呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-17T07:25:29.450

你可以试试这个

```
<?php
//invalid xml file
$xmlfile = 'test.xml';
$xmlparser = xml_parser_create();

// open a file and read data
$fp = fopen($xmlfile, 'r');
$xmldata = fread($fp, 4096);

xml_parse_into_struct($xmlparser,$xmldata,$values);

xml_parser_free($xmlparser);
print_r($values);
?> 
```

# mysql - 在子查询中使用按案例排序

> ID：15771243
> 
> 赞同：1
> 
> 时间：2013-04-02T18:11:37.120
> 
> 标签：mysql, sql

每个时间表都有许多坡道，每个坡道都有一个`end_date`.

我需要列出我所有的坡道，以及一个额外的字段，其中包含坡道的 ID 以及该时间表的最新结束日期。我还需要能够在我的`WHERE`子句中使用这个额外的字段。

这通常是使用该`MAX`函数的子查询的情况，除了一个问题：斜坡的`end_date`字段可以为空，表示斜坡是当前的。因此，`SELECT MAX(end_date)`不起作用，因为`null`值比非空值“小”。

到目前为止，这就是我想出的：

```
SELECT r1.*,
    (SELECT r2.id
    FROM ramp as r2
    WHERE schedule_id = r.schedule_id
    ORDER BY IF(end_dte is NULL, '9999-99-99', end_dte) DESC
    LIMIT 1) as latestId
FROM ramp as r1 
```

这产生了这个表，这正是我想要的：

```
+-------+-------------+------------+-----------------+--------+------------+------------+----------+
| id    | schedule_id | suppr_flag | comment         | months | start_dte  | end_dte    | latestId |
+-------+-------------+------------+-----------------+--------+------------+------------+----------+
|    16 |           7 | NULL       | NULL            |   NULL | 2008-06-23 | NULL       |       16 |
|    15 |           6 | NULL       | NULL            |   NULL | 2007-05-01 | 2007-12-31 |       15 |
|    13 |           5 | NULL       | 1-15 deals      |   NULL | 2004-08-11 | NULL       |       13 |
|    11 |           4 | NULL       | NULL            |   NULL | 2005-08-11 | NULL       |       11 |
|    12 |           4 | NULL       | NULL            |     12 | 2004-08-11 | 2005-08-10 |       11 |
|    17 |          13 | NULL       | NULL            |      6 | 2009-03-05 | 2009-09-04 |       19 |
|    18 |          13 | NULL       | NULL            |      6 | 2009-09-05 | 2010-03-04 |       19 |
|    19 |          13 | NULL       | NULL            |   NULL | 2010-03-05 | NULL       |       19 |
|    20 |          14 | NULL       | NULL            |     12 | 2001-06-18 | 2008-06-17 |       20 | 
```

除了我不能`latestId`在 WHERE 子句中使用（它是一个未知列）。

你有什么想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:50:13.707

一个快速的解决方案是在 ORDER BY 子句上重复整个查询，因为在那里看不到别名，但我不太喜欢查询的外观：

```
SELECT r1.*,
    (SELECT r2.id
    FROM ramp as r2
    WHERE schedule_id = r1.schedule_id
    ORDER BY IF(end_dte is NULL, '9999-99-99', end_dte) DESC
    LIMIT 1) as latestId
FROM ramp as r1
ORDER BY
    (SELECT r2.id
    FROM ramp as r2
    WHERE schedule_id = r1.schedule_id
    ORDER BY IF(end_dte is NULL, '9999-99-99', end_dte) DESC
    LIMIT 1); 
```

或者您可以从原始查询中选择，然后对结果进行排序：

```
SELECT s.*
FROM (
  SELECT r1.*,
      (SELECT r2.id
      FROM ramp as r2
      WHERE schedule_id = r1.schedule_id
      ORDER BY IF(end_dte is NULL, '9999-99-99', end_dte) DESC
      LIMIT 1) as latestId
  FROM ramp as r1
) s
ORDER BY s.latestId 
```

但是，如果我理解您的逻辑正确性，您可以使用此查询来获取`end_dte`每个的最大值`schedule_id`：

```
SELECT schedule_id, MAX(COALESCE(end_dte, '9999-12-31')) max_dte
FROM ramp
GROUP BY schedule_id; 
```

然后，您可以再次使用 ramp 加入此查询以获取与最大值关联的 ID `end_dte`。在 ON 子句中，您将需要再次使用 COALESCE：

```
SELECT r1.schedule_id, r2.id as latestId
FROM (
  SELECT schedule_id, MAX(COALESCE(end_dte, '9999-12-31')) max_dte
  FROM ramp
  GROUP BY schedule_id) r1 INNER JOIN
  ramp r2
  ON r1.max_dte = COALESCE(r2.end_dte, '9999-12-31')
     AND r1.schedule_id = r2.schedule_id 
```

然后你可以再次加入这个以获得你需要的结果：

```
SELECT ramp.*, m.latestId
FROM
  ramp INNER JOIN (
    SELECT r1.schedule_id, r2.id as latestId
    FROM (
      SELECT schedule_id, MAX(COALESCE(end_dte, '9999-12-31')) max_dte
      FROM ramp
      GROUP BY schedule_id) r1 INNER JOIN
      ramp r2
      ON r1.max_dte = COALESCE(r2.end_dte, '9999-12-31')
         AND r1.schedule_id = r2.schedule_id
      ) m ON ramp.schedule_id = m.schedule_id
ORDER BY
  latestId 
```

请[在此处](http://sqlfiddle.com/#!2/d4676/1)查看小提琴。请注意，我使用的是“9999-12-31”而不是“9999-99-99”，第一个是有效日期，第二个不是。

**编辑**

如果您还希望考虑多个`schedule_id`共享相同最大日期的事实，并且在这种情况下您只需要最新（最大）ID，则可以使用 GROUP BY 查询和 MAX 聚合函数：

```
SELECT r1.schedule_id, MAX(r2.id) as latestId
FROM (
  SELECT schedule_id, MAX(COALESCE(end_dte, '9999-12-31')) max_dte
  FROM ramp
  GROUP BY schedule_id) r1 INNER JOIN
  ramp r2
  ON r1.max_dte = COALESCE(r2.end_dte, '9999-12-31')
     AND r1.schedule_id = r2.schedule_id
GROUP BY
  r1.schedule_id 
```

并且您在主查询中使用此更新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:17:21.687

你可以在你的订单中使用两列......首先是非空指示标志，然后是日期。改变你所拥有的...

```
ORDER BY IF(end_dte is NULL, '9999-99-99', end_dte) DESC 
```

到

```
ORDER BY
   IF( end_dte is null, 1, 2 ),
   end_dte DESC 
```

这样，它将所有“NULL”结束日期推到列表的顶部（通过 IF() 值将是 1 对 2 对于任何其他有日期的），然后，按日期降序

# c# - 序列化事务似乎没有中止？

> ID：15771245
> 
> 赞同：1
> 
> 时间：2013-04-02T18:11:44.067
> 
> 标签：c#, transactions, transactionscope

我正在尝试序列化事务，例如：

```
public static void Main()
{
    MemoryStream stream = new MemoryStream();
    BinaryFormatter formatter = new BinaryFormatter();

    using (TransactionScope scope = new TransactionScope(TransactionScopeOption.RequiresNew, TimeSpan.FromMinutes(1)))
    {
        formatter.Serialize(stream, Transaction.Current);
        stream.Seek(0, SeekOrigin.Begin);

        MemoryStream result = Second(stream);
        Transaction transaction = (Transaction)formatter.Deserialize(result);
        Console.WriteLine(transaction.TransactionInformation.Status);
    }

    Console.ReadLine();
}

public static MemoryStream Second(MemoryStream stream)
{
    BinaryFormatter formatter = new BinaryFormatter();
    Transaction transaction = (Transaction)formatter.Deserialize(stream);

    using (TransactionScope scope2 = new TransactionScope(transaction))
    {

    }

    Console.WriteLine(transaction.TransactionInformation.Status);

    MemoryStream newStream = new MemoryStream();
    formatter.Serialize(newStream, transaction);
    newStream.Seek(0, SeekOrigin.Begin);
    return newStream;
} 
```

但是在这两个上`WriteLines`，由于某种原因，交易被报告为活跃。如果我在没有序列化的情况下做同样的事情，那么行为应该是它应该的（它中止），但是当我突然序列化它时，它会停止正常运行。我究竟做错了什么？

# loops - Arduino Leonardo 上的串行循环问题

> ID：15771247
> 
> 赞同：1
> 
> 时间：2013-04-02T18:11:45.467
> 
> 标签：loops, serial-port, arduino

我可以让 Serial 和 Serial1 同时工作吗？

```
void setup() {
  Serial.begin(9600);
  while (!Serial);                        // while not open, do nothing
  Serial1.begin(9600);
}

void loop() {
  while (Serial.available() > 0) {        // if at least one char is available
    /* CODE */
    //Serial.write(Serial.read());
  }

  while (Serial1.available() > 0) {
    /* CODE */
    //Serial.write(Serial1.read());
  }
} 
```

当我打开串行监视器时，第一个虽然效果很好，但如果我两者都有，第二个是打印结果导致无限循环。我该如何解决这个问题？

»» Arduino Leonardo 板使用 Serial1 通过引脚 0 (RX) 和 1 (TX) 上的 RS232 进行通信。串行保留用于 USB CDC 通信。

我可以`Serial1`完全一样使用`Serial`吗？在 Serial1 上读取什么样的信号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:37:52.327

我不得不在这里猜测，但我认为原因是没有任何连接到 Serial1 的东西会消耗你写的数据。因此，您的代码卡在`write`调用中。

要验证是否确实如此，您可以`Serial1.write(Serial1.read());`（在第二个循环中）更改为`Serial.write(Serial1.read());`. 如果这没有阻止，我的猜测可能是正确的。

[http://arduino.cc/en/Guide/ArduinoLeonardo#toc6](http://arduino.cc/en/Guide/ArduinoLeonardo#toc6)说明 Serial1 是什么：

> 要使用硬件串行端口（引脚 0 和 1，RX 和 TX），请使用 Serial1。（有关更多信息，请参阅串行参考页。）

因此，当您想通过板角看到的 RX 和 TX 端口/0 和 1 引脚进行通信时，请使用 Serial1。

# oracle - 当表被删除时，依赖触发器会发生什么？

> ID：15771252
> 
> 赞同：4
> 
> 时间：2013-04-02T18:11:56.960
> 
> 标签：oracle, triggers, drop-table

我有一张表`backup`，我在上面应用了一个触发器`upd_trig`。现在，我删除了我的表，然后检查了所有关联的触发器/索引是否也将被删除或保留在那里。

[正如我在这里](http://social.msdn.microsoft.com/Forums/en-US/sqldatabaseengine/thread/b4a2e31e-8de6-4251-93b3-585cda624c07/)发现的一些讨论，他们说一旦我们删除我们的表，触发器/索引都将被删除。但是，似乎触发器仍然存在。谁能解释一下，当我们放下桌子时到底发生了什么

```
SQL> drop table backup;

Table dropped.

SQL> select text from user_source;

TEXT
----------------------------------------------------------------------------------------------------
TRIGGER
"BIN$Dg5j/bf6Rq6ugyN5ELwQkw==$0" BEFORE UPDATE ON backup FOR EACH ROW
BEGIN
INSERT INTO BACKUP VALUES(USER,:OLD.ENAME,SYSDATE);
END;

9 rows selected.

SQL> select count(*) from user_triggers;

  COUNT(*)
----------
         1

SQL> select trigger_name from user_triggers;

TRIGGER_NAME
------------------------------
BIN$Dg5j/bf6Rq6ugyN5ELwQkw==$0 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T18:24:13.230

该表已被删除，但它在回收站[中](http://docs.oracle.com/cd/E11882_01/server.112/e25494/tables011.htm)`flashback ... before drop`，可以使用闪回命令（也在回收站中，任何索引也会。`BIN$...``BIN$...`

您可以清空回收站以永久删除其中的对象。要立即删除表，而不将其放入回收站，您可以将关键字添加`purge`到`drop`命令中，如[文档中所述](http://docs.oracle.com/cd/E18283_01/server.112/e17120/tables010.htm)。这也将立即删除任何索引和触发器。

* * *

如果它没有自动删除，那么触发器无论如何都是无关紧要的，因为您无法对删除的表执行任何 DML，因此它永远不会触发。那就是如果触发器所*针对*的表被删除。你的触发器很奇怪，它插入到同一个表中。通常你会在一个表上插入一个触发器到你的备份表中（好吧，对于触发器的一种使用）。在这种情况下，删除备份表将使活动表上的触发器*无效*，但不会删除它。只有删除活动表才会删除活动表上的触发器。

# python - python“导入包为”奇怪的行为

> ID：15771254
> 
> 赞同：0
> 
> 时间：2013-04-02T18:12:00.580
> 
> 标签：python, python-2.7

我有这个文件结构：

```
mainfolder
    package/
        __init__.py
        packagefile.py 
```

`__init__.py`：

```
import packagefile as othername 
```

如果我`import package`从主文件夹中，也会`package`有。怎么了 ？是进口两次吗？我有 python 2.7.3。这是预期的行为吗？当我这样做时， sys 将不会出现在当前命名空间中。`packagefile``othername``import sys as something_else`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:23:58.120

是的，这是预期的行为。基本上，包总是在其中定义了模块。您正在做的是将其中一个模块作为另一个名称导入。这并不妨碍它已经被定义为它的原始名称。

我不相信这会产生任何不利的负面后果。例如，如果您进入交互式终端，您应该会看到：

```
>>> package.packagefile is package.othername
True 
```

这表明它们是对同一对象的引用——例如，类似于比较 C++ 中的两个指针。

但是，如果您只是想重命名模块成员，我建议您直接重命名文件。

# python - 在 for 语句中只允许 2 种输入类型

> ID：15771255
> 
> 赞同：1
> 
> 时间：2013-04-02T18:12:03.063
> 
> 标签：python, python-3.x

在运行时，用户可以通过输入“c”或“v”来请求元音或辅音，否则会引发错误。

我将如何编辑代码以添加一个我认为可能是 isisntance 的捕获？

```
for i in range(9):
    x = input("letter("+str(i+1)+"), Would you like a consonant (c) or a vowel (v)? :")
    if x == 'c':
        randomLetters += getConsonant()
        print(randomLetters)
    elif x == 'v':
        randomLetters += getVowel()
        print(randomLetters)
return (randomLetters) 
```

为感兴趣的人完成了代码，感谢您的回答帮助我完成了它。

```
for i in range(9):
    msg = "letter("+str(i+1)+"/9), Would you like a consonant (c) or a vowel (v)? :"
    x = input(msg)
    while x != "c" and x != "v":
        print("put a damn c or v in")
        x = input(msg)
    if x == 'c':
        randomLetters += getConsonant()
        print(randomLetters)
    elif x == 'v':
        randomLetters += getVowel()
        print(randomLetters)
return (randomLetters) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:15:03.073

假设您使用的是 Python 3.x，则`input()`返回一个字符串。所以：

```
for i in range(9):
    x = input("letter("+str(i+1)+"), Would you like a consonant (c) or a vowel (v)? :")
    if not x.isalpha(): raise TypeError('x can only have be a string')
    if x == 'c':
        randomLetters += getConsonant()
        print(randomLetters)
    elif x == 'v':
        randomLetters += getVowel()
        print(randomLetters)
return (randomLetters) 
```

如果您只希望输入为“c”或“v”：

```
for i in range(9):
    while not x in ('c', 'v'):
        x = input("letter("+str(i+1)+"), Would you like a consonant (c) or a vowel (v)? :")
    if x == 'c':
        randomLetters += getConsonant()
        print(randomLetters)
    elif x == 'v':
        randomLetters += getVowel()
        print(randomLetters)
return (randomLetters) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:33:15.320

您的代码存在一些问题：

1.  无论输入如何，它都会移动到下一个字母。
2.  当输入不是`"c"`or时，它不会处理这种情况`"v"`。
3.  它没有向用户提供有关无效输入的任何消息。

我在这里所做的：
在 for 循环中的每次迭代中，我们进入一个无限循环，该循环一直持续到给出有效输入为止。

1.  取第一个输入，然后进入 while 循环。
2.  对于有效输入，在“有效”处理之后，我们`break`进行 inf 循环，并移动到下一个字母。
3.  对于无效输入，我们显示错误消息，再次输入，然后转到 2。

“固定”版本¹：

```
for i in range(1,10): # no need for the +1 in string.
    msg = "letter({0}), Would you like a (c)onsonant or a (v)owel? : ".format(i)
    x = input(msg) # raw_input(msg)
    while True: # infinite loop
        if x == 'c':
            randomLetters += getConsonant()
            print(randomLetters)
            break
        elif x == 'v':
            randomLetters += getVowel()
            print(randomLetters)
            break
        else: # x not in ['c','v']
            print('Invalid input, {0} is not valid'.format(x))
            x = input(msg) # get new input and repeat checks
return (randomLetters) 
```

¹ [有一些额外的调整]

# java - 如何将值附加到 StringBuilder 数组

> ID：15771261
> 
> 赞同：2
> 
> 时间：2013-04-02T18:12:14.940
> 
> 标签：java, stringbuilder

我正在解析十进制格式的网格坐标。我想将模式匹配存储在 StringBuilder 数组中以供进一步操作。但是，在每个 while 循环中调用 append() 时，我得到一个空指针。

```
String coordinateExample = "N14585928W084144340";
this.parseCoordinate(coordinateExample);
...

public void parseCoordinate(String coordinateString) {

    int i = 0;

    //extract NSEW leading characters
    Pattern pL = Pattern.compile("[A-Z]");
    Matcher m = pL.matcher(coordinateString);        
    StringBuilder[] hemisphere = new StringBuilder[]{};

    while (m.find()) {
        hemisphere[i].append(m.group());
        //System.out.println("m.group(): " + m.group());
        i++;
    }        
    // reset i
    i = 0;

    //extract decimal degree digits
    Pattern pN = Pattern.compile("[0-9]++");
    Matcher n = pN.matcher(coordinateString);
    StringBuilder[] coordinate = new StringBuilder[]{};

    while (n.find()) {            
        coordinate[i].append(n.group());
        //System.out.println("q.group(): " + n.group());
        i++;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T18:16:32.653

```
StringBuilder[] coordinate = new StringBuilder[]{}; 
```

这是创建一个可以包含 StringBuilder 类型实例的空数组。您最可能想要做的是：

```
StringBuilder coordinate = new StringBuilder(); 
```

它创建了一个可以附加到的实际 StringBuilder 对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-20T04:42:00.410

您正在创建字符串构建器数组，但在使用数组时未实例化它指定长度

解决方案 // StringBuilder[] hemisphere = new StringBuilder[length];

```
for(int i=0;i<length;i++){
hemisphere [i]=new StringBuilder();
} 
```

然后你不会得到任何空指针异常我希望这会有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T18:14:30.270

`StringBuilder`您正在创建一个未指定长度的数组，即，因此您有一个要填充`StringBuilder[] hemisphere = new StringBuilder[]{};`的空数组，因此`array``NullPointerException`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T18:25:15.690

我对Java真的很陌生，但是为什么`{}`在构建器实例化之后使用方括号？不应该是这样`StringBuilder [] name = new StringBuilder []`吗？或者也许`StringBuilder [][] name = new StringBuilder [][]`？

# javascript - twitter bootstrap 折叠第一项并在加载时打开第二项

> ID：15771265
> 
> 赞同：3
> 
> 时间：2013-04-02T18:12:23.407
> 
> 标签：javascript, twitter-bootstrap

我第一次使用 twitter boostrap 并且正在使用可折叠的手风琴。

当页面加载时，第一个项目默认打开，其余项目全部折叠。

我希望在页面加载时默认打开第二个项目和第一个项目和剩余项目。

有没有一种简单的方法可以实现这一目标？我试过玩这个`data-toggle`属性，但没有得到任何结果。

```
<div class="accordion" id="accordion2">
  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
        Name &amp; Location
      </a>
    </div>
    <div id="collapseOne" class="accordion-body collapse in">
      <div class="accordion-inner">
        <%= f.input :name %> <br/>

        <%= f.input :addr_1, label: 'Address' %> <br/>

        <%= f.input :addr_2, label: false %> <br/>

        <%= f.input :addr_3, label: false, placeholder: "County, State, Provence, Region etc" %> <br/>

        <%= f.input :country, label: false, :priority => [ "Ireland", "United Kingdom" ] %>  <br/>

        </div>
    </div>
  </div>

    <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">
        Description
      </a>
    </div>
    <div id="collapseTwo" class="accordion-body collapse">
      <div class="accordion-inner">

        <%= f.input :description, :input_html => { :cols => 10, :rows => 3 } %> <br/>

        <%= f.input :looped, :as => :boolean %> 

        <%= f.input :duration_hours, :label => 'Duration',  :collection => 0..12, :include_blank => false, :hint => "hours" %>

        <%= f.input :duration_mins, collection: [ 0, 15, 30, 45 ], :include_blank => false, label: false, :hint => "mins" %>
      </div>
    </div>
  </div>

  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseThree">
        Images
      </a>
    </div>
    <div id="collapseThree" class="accordion-body collapse">
      <div class="accordion-inner">
        <%= f.simple_fields_for :photos do |builder| %>
          <%= render 'photo_fields', f: builder %>
        <% end %>
        <div style=clear:both;> </div>
        <%= link_to_add_fields "Add More", f, :photos %>
      </div>
    </div>
  </div>

  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseFour">
        Route
      </a>
    </div>
    <div id="collapseFour" class="accordion-body collapse">
      <div class="accordion-inner">
        <%= f.simple_fields_for :routes do |builder| %>
          <%= render 'route_fields', f: builder %>
        <% end %>
        <%= link_to_add_fields "Add Step", f, :routes %>
      </div>
    </div>
  </div>

  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseFive">
        Directions
      </a>
    </div>
    <div id="collapseFive" class="accordion-body collapse">
      <div class="accordion-inner">
        <%= f.simple_fields_for :directions do |builder| %>
          <%= render 'direction_fields', f: builder %>
        <% end %>
        <%= link_to_add_fields "Add More Directions", f, :directions %>
      </div>
    </div>
  </div>

</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T18:24:06.950

Bootstrap 使用`in`该类来确定默认打开哪些项目（不仅仅是在手风琴功能上），因此您可以将该类移动到`#collapseTwo`div 并且它将默认打开。

# php - 使用 PHP Simple HTML DOM Parser 查找表格单元格并获取下一个兄弟的内容

> ID：15771266
> 
> 赞同：5
> 
> 时间：2013-04-02T18:12:25.287
> 
> 标签：php, dom, html-parsing

我正在尝试使用 PHP Simple HTML DOM Parser 来获取外部文件的 HTML。该文件包含一个表格，目标是找到具有特定数据内容的能够单元格，然后获取下一个同级单元格的数据。此数据需要放入 PHP 变量中。

基于[如何使用 PHP 解析和处理 HTML/XML 等文章中的研究和信息？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-xml-with-php),抓取[A 元素的 href 属性](https://stackoverflow.com/questions/3820666/grabbing-the-href-attribute-of-an-a-element/3820783#3820783),[抓取数据：PHP Simple HTML DOM Parser](http://www.bitrepository.com/php-simple-html-dom-parser.html)当然还有[PHP Simple HTML DOM Parser Manual](http://simplehtmldom.sourceforge.net/manual.htm)我已经能够产生一些结果，但我担心我可能走错了路。

表格行如下所示：

```
<tr>
<td>fluff</td>  
<td>irrelevant</td> 
<td>etc</td>   
<td><a href="one">Hello world</a></td>                        
<td>123.456</td> 
<td>fluff</td>          
<td>irrelevant</td>   
<td>etc</td>
</tr> 
```

我想要完成的是找到包含“Hello world”的表格单元格，然后从下一个 td 单元格中获取数字。以下代码找到该表格单元格并回显其内容，但我尝试将其用作地标以获取下一个单元格的数据失败了......

```
$html = file_get_html("http://site.com/stuff.htm");
$e = $html->find('td',0)->innertext = 'Hello world';
echo $e; 
```

所以最终，在上面的例子中，123.456 的值需要以某种方式进入 PHP 变量。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T18:23:08.280

可以使用[`DOMXPath`](http://www.php.net/manual/en/class.domxpath.php)类来完成。为此，您不需要外部库。

这里有一个例子：

```
<?php

$html = <<<EOF
<tr>
<td>fluff</td>  
<td>irrelevant</td> 
<td>etc</td>   
<td><a href="one">Hello world</a></td>                        
<td>123.456</td> 
<td>fluff</td>          
<td>irrelevant</td>   
<td>etc</td>
</tr>
EOF;

// create empty document 
$document = new DOMDocument();

// load html
$document->loadHTML($html);

// create xpath selector
$selector = new DOMXPath($document);

// selects the parent node of <a> nodes
// which's content is 'Hello world'
$results = $selector->query('//td/a[text()="Hello world"]/..');

// output the results 
foreach($results as $node) {
    echo $node->nodeValue . PHP_EOL;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T18:37:09.453

使用简单的 html dom 解析器：

```
$str = "<table><tr>
<td>fluff</td>  
<td>irrelevant</td> 
<td>etc</td>   
<td><a href=\"one\">Hello world</a></td>                        
<td>123.456</td> 
<td>fluff</td>          
<td>irrelevant</td>   
<td>etc</td>
</tr></table>";

$html = str_get_html($str);

 $tds = $html->find('table',0)->find('td');
 $num = null;
 foreach($tds as $td){

     if($td->plaintext == 'Hello world'){

        $next_td = $td->next_sibling();
        $num = $next_td->plaintext ;    
        break; 
     }
 }

 echo($num); 
```

# javascript - GMT-0400 和 GMT-0500 班次

> ID：15771268
> 
> 赞同：0
> 
> 时间：2013-04-02T18:12:26.310
> 
> 标签：javascript, python, json

为什么 GMT-0400 转换为 1989 年之前的 GMT-0500？

```
> new Date('1989-04-02T23:01:14.52Z')
Sun Apr 02 1989 19:01:14 GMT-0400 (EDT)
> new Date('1988-04-02T23:01:14.52Z')
Sat Apr 02 1988 18:01:14 GMT-0500 (EDT) 
```

它与夏令时有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:19:59.653

从 1987 年到 2007 年，夏令时从 4 月的第一个星期日开始。所以在 1988 年是 4 月 3 日，而在 1989 年是 4 月 2 日。

[http://en.wikipedia.org/wiki/History_of_time_in_the_United_States#DST_1966](http://en.wikipedia.org/wiki/History_of_time_in_the_United_States#DST_1966)

# android - 在 mavenized Android 项目中组织测试代码和测试用例

> ID：15771270
> 
> 赞同：0
> 
> 时间：2013-04-02T18:12:38.870
> 
> 标签：android, maven, maven-3, emma

我有一个由 Maven 构建的 Android 应用程序，现在我想测量单元测试覆盖率。我尝试了 Cobertura，但有一个[问题](https://stackoverflow.com/questions/15234914/cobertura-maven-plugin-excludes-configuration)，我无法解决。

因此，我想切换到艾玛。

我开始[阅读](https://code.google.com/p/maven-android-plugin/wiki/EmmaMaven)它，在我看来，为了使用 Emma，有必要将我的应用程序的代码与测试用例分开（为应用程序及其单元测试创​​建单独的 Maven 项目），即有 2 个不同的Maven 项目。

这是真的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:35:27.237

将 src/main/java 和 src/test/java 分开怎么样？虽然我不是艾玛的专家。

# java - 如何根据运行应用程序的尝试使用不同的日志名称？

> ID：15771276
> 
> 赞同：0
> 
> 时间：2013-04-02T18:12:53.480
> 
> 标签：java, logging

我已经成功地将日志写入这样的文件。

```
 private static Logger logger = Logger.getLogger(className.class.getName());
    FileHandler fh;   
    fh = new FileHandler("C:/className.log");   
    logger.addHandler(fh); 
    SimpleFormatter formatter = new SimpleFormatter();  
    fh.setFormatter(formatter); 
```

但是当我使用“C:/newFolder/className.log”时，我又在控制台上获取日志。如何修复它。

我想根据尝试运行应用程序来命名我的日志文件。如何做到这一点？请帮助....在此先感谢

# google-groups - 权限被拒绝：无法从组目录中隐藏

> ID：15771277
> 
> 赞同：3
> 
> 时间：2013-04-02T18:12:58.620
> 
> 标签：google-groups, google-groups-api

我正在尝试通过 API 修补现有组，但它返回此错误：

```
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "invalid",
    "message": "Permission denied: Cannot hide from Groups directory."
   }
  ],
  "code": 400,
  "message": "Permission denied: Cannot hide from Groups directory."
 }
} 
```

该组当前具有“showInGroupDirectory”=> false。

我在补丁请求中将 showInGroupDirectory 设置为 true，所以我不知道为什么会收到此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-17T07:36:01.360

I've found an answer.. and it's pretty obvious:

*   You need to go to admin settings ([https://admin.google.com/#your-domain](https://admin.google.com/#your-domain)).
*   Then go to Apps -> Google Apps -> Groups for business -> Advanced Settings.
*   Then tick this box: [http://screencast.com/t/yKh7w5hB](http://screencast.com/t/yKh7w5hB) (Group owners can hide groups from the groups directory )

# ios - UINavigationcontroller 中的自定义 NavigationBar

> ID：15771278
> 
> 赞同：0
> 
> 时间：2013-04-02T18:13:01.100
> 
> 标签：ios, objective-c, xcode, ipad, xcode4.5

我在 UINavigationcontroller 中有一个 UITableViewController，我想在其中添加一个自定义导航栏。如果我在 tableView 类中执行此操作，它会与表格一起滚动，这不是我想要的。如果我在 NavigationController 类中执行此操作，它不会出现。

我在 NavigationController NIB 文件中创建了一个 UINavigatioBar，并将其作为 IBOutlet 连接到我的 Navigationcontroller.h。在我的 NavigationController.m 我有：

`productsNavigationBar = [[UINavigationBar alloc] initWithFrame:CGRectMake(0, 0, 1048, 88)]; [productsNavigationBar setBarStyle:UIBarStyleBlackTranslucent]; [self.view addSubview:productsNavigationBar];`

谁知道该怎么做才能让我的酒吧出现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:17:32.630

在你的 tableViewController 中实现这个 DataSource 方法，并在 UITableView 的 Header 中添加你想要的导航栏

```
- (UIView *) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    UIView *headerView = [[[UIView alloc] initWithFrame:CGRectMake(0, 0, tableView.bounds.size.width, 30)] autorelease];
    [headerView setBackgroundColor:[UIColor redColor]];

    return headerView;
} 
```

要更改 Header 的高度，请执行此方法

```
-(CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
    return 100.0f;
} 
```

# ruby-on-rails - 下载后删除我的 Rails 3.2 中存储在 public/data 文件夹中的文件

> ID：15771281
> 
> 赞同：1
> 
> 时间：2013-04-02T18:13:09.007
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我有一个 Rails 3.2 应用程序，您可以上传文件，然后它提供下载链接来下载文件。我希望应用程序在下载后的特定天数/小时后自动删除文件。因此，这将清理应用程序中的空间以进行更多下载。上传文件将进入我的应用程序中的 public/data 文件夹。我已经搜索过，似乎找不到太多关于此的内容。我相信这是我的应用程序中放置的某种脚本，但不确定如何或从哪里开始。任何帮助会很酷吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:33:19.503

不是 rake 任务方面的专家，但我绝对知道您需要为此创建一个 rake 任务。希望这是您所追求的入门指南：

[每 60 天擦除一次记录](https://stackoverflow.com/questions/13975376/erase-records-every-60-days)

[在 rake 中销毁 Rails 3 对象？](https://stackoverflow.com/questions/6310993/destroying-a-rails-3-object-in-rake)

您可能还想查看以下 Railcast 第[164 集 Cron in Ruby](http://railscasts.com/episodes/164-cron-in-ruby)。有多种调度程序 gem 可供使用。

[每当宝石](https://github.com/javan/whenever)

希望这些资源对您有所帮助。

# asp.net - 如何访问在 RowDeleting 事件中被删除的行的值

> ID：15771282
> 
> 赞同：1
> 
> 时间：2013-04-02T18:13:10.293
> 
> 标签：asp.net, vb.net, gridview, rowdeleting

我试图在从数据库中删除之前保存一些信息。我正在使用asp gridview。我正在尝试从使用 RowDeleting 事件删除的行中检索值。然而，我非常失败。

```
Protected Sub gv1_RowDeleting(sender As Object, e As System.EventArgs) Handles   gv1.RowDeleting
   Dim a As String = gv1.Columns(0).ToString
   Dim b As String = gv1.SelectedRow.RowIndex.ToString
   Dim c As String = gv1.Rows(a).Cells(0).Text
End Sub 
```

a 最终成为标题行的第一列。b 出错了。我尝试了很多不同的东西，但无法提出行索引。我会认为这个事件只会访问被删除的行。这是我的gridview声明：

```
<asp:GridView ID="gv1" runat="server" AllowSorting="True" AutoGenerateColumns="False" EnableViewState="false"
            DataSourceID="ds1" EmptyDataText="NO ROWS FOUND" CssClass="gridView" DataKeyNames="id" GridLines="None">
            <Columns>
                <asp:BoundField DataField="id" HeaderText="ID" SortExpression="id" />
                <asp:BoundField DataField="totalsd" HeaderText="SD" SortExpression="totalsd" />
                <asp:BoundField DataField="freesd" HeaderText="FREE" SortExpression="freesd" />
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:Button ID="deleteButton" runat="server" CommandName="Delete" Text="Delete" OnClientClick="return confirm('Are you sure you want to delete this record?');" />
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:16:28.670

声明`e`为`System.Web.UI.WebControls.GridViewDeleteEventArgs`。然后，您可以使用 获取行索引`e.RowIndex`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T18:22:40.247

尝试这种示例方式，例如使用`RowCommand`

```
<asp:LinkButton ID="DelButton" runat=server Text="Delete" CommandName="Delete" CausesValidation=False CommandArgument='<%# Databinder.Eval(Container,"DataItem.id") %>'></asp:LinkButton> 
```

并在 vb 文件中更改

```
Protected Sub GridView1_RowCommand(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewCommandEventArgs) Handles GridView1.RowCommand

        Dim MyConn1 As New OleDbConnection(Your Connection string)
        Dim cmdDelete As OleDbCommand

        If e.CommandName = "Delete" Then
             cmdDelete = New OleDbCommand("Delete from table" & _
                                               "Where id= " & e.CommandArgument.ToString() & ";", MyConn1)
            MyConn1.Open()
            cmdDelete.ExecuteNonQuery()
            MyConn1.Close()
            BindAutoMake()

        End If
    End Sub 
```

**注意：确保您仍然有 Row_deleting 事件处理程序方法，但是 Empty 没有任何代码。否则它会给你错误。**

# transparent - 如何在所有浏览器中使列表项的背景透明

> ID：15771291
> 
> 赞同：0
> 
> 时间：2013-04-02T18:13:43.473
> 
> 标签：transparent

这可能看起来微不足道，但不知何故我无法让它发挥作用。

我有一个带有列表项的菜单（如下），我想给它一个透明的背景。

```
<ul class="nav">
    <li>
        <a href="value.php"><img src="./images/content/menu-item.png"></a>
    </li>
    <li>
        <div class="wrapper-demo">
            <div id="dd" class="wrapper-dropdown-5 active" tabindex="1">
                <img src="./images/menu-selected.png">
                <ul class="dropdown">
                    <li><a href="#"><i class="icon-user"></i>Profile</a></li>
                    <li><a href="#"><i class="icon-cog"></i>Settings</a></li>
                    <li><a href="#"><i class="icon-remove"></i>Log out</a></li>
                </ul>
            </div>
        &#8203;</div>
    </li>
    <li>
       ...
    </li>
    <li>
       ...
    </li>
</ul> 
```

问题是我无法为 ul.dropdown 中的 li 项目提供透明背景。

这就是我所做的： -

```
.wrapper-dropdown-5 .dropdown li {
padding: 0 10px ;
background-color: rgba(0,0,0,.3); 
```

}

即使透明PNG也不起作用。它只是向我展示了一种低色调的颜色，但没有透明度。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:19:50.247

IE 不支持 RGBA。

```
.wrapper-dropdown-5 .dropdown li {
  padding: 0 10px ;
  background-color: #000;
  /* IE 8 */
  -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=30)";

  /* IE 5-7 */
  filter: alpha(opacity=30);

  /* Netscape */
  -moz-opacity: 0.3;

  /* Safari 1.x */
  -khtml-opacity: 0.3;

  /* Good browsers */
  opacity: 0.3;
} 
```

# ruby - 为什么从基于大数组的大哈希中选择值这么慢？

> ID：15771293
> 
> 赞同：3
> 
> 时间：2013-04-02T18:13:50.610
> 
> 标签：ruby

我有一个包含大约 150k 个元素的散列和​​一个包含 25k 个元素的数组。我需要创建一个新的散列，或修改现有的散列，以删除其键不在数组上的所有元素。这是我现在拥有的：

```
hash.select {|k,v| array.include?(k)}
new_hash = hash.delete_if {|k,v| !array.include?(k)} 
```

由于比较复杂，这两种方法非常慢。有没有办法可以加快速度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T18:16:24.033

```
(hash.keys - array).each{|k| hash.delete(k)} 
```

或者，这可能会更快：

```
keys_to_be_removed = {}
hash.each{|k, _| keys_to_be_removed[k] = true}
array.each{|k| keys_to_be_removed[k] = false}
keys_to_be_removed.each{|k, v| hash.delete(k) if v} 
```

关键是要避免数组操作，并尽可能在哈希中做所有事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T21:26:04.787

@sawa 的回答在提高速度方面很好，但它确实让你表达你的意图比`Hash#select`. 如果数组是[`Set`](http://www.ruby-doc.org/stdlib-2.0/libdoc/set/rdoc/Set.html)使用 O(1) 查找而不是使用 O(N) 查找的数组，那么您的初始方法将工作得很好。

```
require 'set'

set = array.to_set
hash.select { |k,v| set.include?(k) } 
```

[这个](https://gist.github.com/dbenhur/5296334)微基准测试表明集合速度很快，并且这种方法比预建集合时推荐的键减删除方法略快，如果必须动态创建集合，则速度略慢。

```
 user     system      total        real
noop                    0.600000   0.020000   0.620000 (  0.614905)
keys_minus_arr_delete   1.190000   0.020000   1.210000 (  1.213376)
select_set_include      1.050000   0.010000   1.060000 (  1.084079)
select_set_include_fly  1.350000   0.020000   1.370000 (  1.361623)
sawa2                   1.860000   0.020000   1.880000 (  1.870162) 
```

# jsf-2 - p:datalist varStatus.last 总是假的

> ID：15771300
> 
> 赞同：0
> 
> 时间：2013-04-02T18:14:14.217
> 
> 标签：jsf-2, primefaces

我正在尝试在 ap:datalist (PF 3.4) 的集合中的每个条目**之间**添加一个分隔符，如下所示：

```
<p:dataList id="feed" value="#{allProfessorsMB.selectedProfessor.courseList}" var="course" varStatus="status">                           
    <p:outputLabel value="#{course.name}"/>
    <p:separator id="separator" rendered="#{!status.last}"/>                           
</p:dataList> 
```

它接缝 #{!status.last} 始终返回 true，因为始终呈现分隔符。我尝试了一些文本（而不是分隔线），例如 #{status.last ? 'true' : 'false'} 并且一直打印 'false'。

我看过很多 JSTL 标签和一些 ui:repeat 的例子，但与此不相似。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-29T11:35:06.807

你可以使用类似的东西：

```
<p:dataList rowIndexVar="rowIndex" rowCountVar="rowCount" id="feed" value="#{allProfessorsMB.selectedProfessor.courseList}" var="course">
    <p:outputLabel value="#{course.name}"/>
    <p:separator id="separator" rendered="#{rowIndex + 1 != rowCount}"/>
</p:dataList> 
```

# jquery - Jquery 1.9.1 未捕获的类型错误

> ID：15771304
> 
> 赞同：0
> 
> 时间：2013-04-02T18:14:24.637
> 
> 标签：jquery

我一直在更新到 Jquery 1.9.1 遇到了问题。在 Jquery 代码本身中，我得到以下信息；

```
//Serialize an array of form elements or a set of
//key/values into a query string
jQuery.param = function( a, traditional ) {
var prefix,
s = [],
add = function( key, value ) {
// If value is a function, invoke it and return its value
value = jQuery.isFunction( value ) ? value() : ( value == null ? "" : value );
s[ s.length ] = encodeURIComponent( key ) + "=" + encodeURIComponent( value );

**Uncaught TypeError: Object function Document() { [native code] } has no method 'apply'**
}; 
```

我似乎无法将其回溯到特定代码。我确实将 .live('click' 更改为 .on('click';

```
$(document).on("click", "#candidatesubmit", function() {
    var strForm = $("form").serialize();
    //alert(strForm);
    $.ajax({
        type: 'POST',
        url: 'actEditStatusForm.cfm',
        data: strForm,
        error: function(xhr, textStatus, errorThrown) {
            // show error 
            alert(errorThrown);
        },
        success: function(response1, textStatus, jqXHR) {
            ColdFusion.Grid.refresh('candidatesGrid', true); 
```

该帖子已完成，因此该部分似乎工作正常。但是下面的代码不起作用；

```
<cfsavecontent variable="canddivscript">
<script>
function initDateStuff2Script() {
$(function() {
    //alert('xxxxx');
    $('input.datestuff2').datepicker({dateFormat: 'yy/mm/dd'});
});
}
</script>
</cfsavecontent>
<cfoutput>
<cfhtmlhead text="#canddivscript##chr(13)##chr(10)#">
</cfoutput>
<cfset ajaxOnLoad("initDateStuff2Script")> 
```

只有一个带有 class="datestuff2" 的特定输入字段会做任何事情，那就是在我输入日期时设置一个掩码 yyyy/mm/dd。其他输入字段什么也不做。我想我可以回到 Jquery 1.7

代码很长，所以我不能在这里全部发布。

# cluster-computing - 打开 MPI 挂在多个主机上

> ID：15771307
> 
> 赞同：0
> 
> 时间：2013-04-02T18:14:35.460
> 
> 标签：cluster-computing, mpi, redhat, freeze, openmpi

所以我一直试图让 openmpi 在两台主机上工作，每当我输入我的命令时它就会挂起。使用调试，我设法看到本机服务器在 /tmp 命令之后成功执行了 mpi，但是 host2 挂在那里。

> $ mpirun --prefix /usr/lib/openmpi -d -host server10 你好
> 
> [server9:09833] procdir: /tmp/openmpi-sessions-jonesi1@server9_0/58918/0/0
> 
> [server9:09833] 作业目录：/tmp/openmpi-sessions-jonesi1@server9_0/58918/0
> 
> [server9:09833] 顶部：openmpi-sessions-jonesi1@server9_0
> 
> [server9:09833] tmp: /tmp
> 
> [server9:09833] mpirun：重置路径：/usr/lib/openmpi/bin:/usr/lib64/qt-3.3/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/ sbin:/usr/sbin:/sbin:/usr/lib64/openmpi/bin:/home/[我的用户名]/bin
> 
> [server9:09833] mpirun：重置 LD_LIBRARY_PATH：/usr/lib/openmpi/lib:/usr/lib64/openmpi/lib
> 
> [server10:01982] procdir: /tmp/openmpi-sessions-jonesi1@server10_0/58918/0/1
> 
> [server10:01982] 作业目录：/tmp/openmpi-sessions-jonesi1@server10_0/58918/0
> 
> [server10:01982] 顶部：openmpi-sessions-jonesi1@server10_0
> 
> [server10:01982] tmp: /tmp

我看到很多人建议 ssh 可能被阻止，但是命令 ssh server10 mpirun hello 工作正常。有人对如何进行有任何建议吗？提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-31T15:39:20.897

检查两台机器上的防火墙是否关闭。在 Linux 上，您可以使用

```
iptables -L 
```

SSH 可能会在防火墙允许的情况下工作，但 MPI 将需要一个不同的（高）端口，该端口可能会被阻止。

# vb.net - 读取 Xml 文件并在流文档中将单词加粗

> ID：15771308
> 
> 赞同：0
> 
> 时间：2013-04-02T18:14:38.770
> 
> 标签：vb.net

将以下文本放置在 XAML 中流文档段落的内联中，会使单词“charge”变为粗体。但是使用 xmlreader.ReadInnerXml 从 xml 文件中读取相同的文本什么也不做。

离子和电子对这种电荷流动的电阻导致等离子体的欧姆加热。

如何使单词变粗？

```
'Part of the code reading the xml file and displaying the content in a flowdocument
    x.ReadToFollowing("Paragraph")
     Dim b As String = x.ReadInnerXml
     paragraph.Inlines.Add(b)
     flowdocument.Blocks.Add(paragraph)
     flowdocumentscrollviewer.Document=flowdocument 
```

部分xml文件：

```
<HelpDocuments>
  <ICPCanvas1Help Num="1">
     <Paragraph Color="Black" FontWeight="Normal" Alignment="0" FontSize="14">
 This interaction causes the ions and electrons
within the coil to flow in the closed annular paths
shown in the window. The resistance of the ions and
electrons to this flow of<Run FontWeight="Bold"> charge </Run> causes ohmic heating of
the plasma.      
    </Paragraph>
  </ICPCanvas1Help>
</HelpDocuments> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:50:14.003

在要加粗的单词周围添加以下标签。

`<Run FontWeight="bold">charge</Run>`

# jfreechart - JfreeChart散点图点击弹出信息

> ID：15771309
> 
> 赞同：2
> 
> 时间：2013-04-02T18:14:38.843
> 
> 标签：jfreechart, scatter-plot

是否可以将 GUID 添加到散点图上的每个点，以便当用户单击该点时我可以处理 GUID 并检索一些信息？

编辑：添加示例：

```
package demo;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.EventQueue;
import java.util.Random;
import javax.swing.JFrame;
import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartMouseEvent;
import org.jfree.chart.ChartMouseListener;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.axis.NumberAxis;
import org.jfree.chart.axis.NumberTickUnit;
import org.jfree.chart.entity.XYItemEntity;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.plot.XYPlot;
import org.jfree.chart.renderer.xy.XYItemRenderer;
import org.jfree.data.xy.XYDataset;
import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYSeriesCollection;

public class ScatterMouseClick extends JFrame {

    private static final long serialVersionUID = 1L;
    private static final int N = 24;
    private static final Random rand = new Random(System.currentTimeMillis());
    private final XYSeries series = new XYSeries("Scatter Series");

    public ScatterMouseClick(String s) {
        super(s);
        final ChartPanel chartPanel = createDemoPanel();
        this.add(chartPanel, BorderLayout.CENTER);
    }

    private ChartPanel createDemoPanel() {
        JFreeChart jfreechart = ChartFactory.createScatterPlot(
            "Scatter Mouse click Demo", "X", "Y", createSampleData(),
            PlotOrientation.VERTICAL, true, true, false);
        XYPlot xyPlot = (XYPlot) jfreechart.getPlot();
        xyPlot.setDomainCrosshairVisible(true);
        xyPlot.setRangeCrosshairVisible(true);
        XYItemRenderer renderer = xyPlot.getRenderer();
        renderer.setSeriesPaint(0, Color.blue);
        adjustAxis((NumberAxis) xyPlot.getDomainAxis(), true);
        adjustAxis((NumberAxis) xyPlot.getRangeAxis(), false);
        xyPlot.setBackgroundPaint(Color.white);
        ChartPanel chartPanel = new ChartPanel(jfreechart);
        chartPanel.addChartMouseListener(new ChartMouseListener() {
            public void chartMouseClicked(ChartMouseEvent e) {
                if (e.getEntity() instanceof XYItemEntity) {
                    XYItemEntity item = (XYItemEntity) e.getEntity();
                    System.out.println("You clicked at point of series:["
                        + item.getSeriesIndex() + "] at location: ["
                        + item.getItem() + "] with UTL Text: "
                        + item.getURLText());
                }
            }

            public void chartMouseMoved(ChartMouseEvent e) {
            }
        });
        return chartPanel;
    }

    private void adjustAxis(NumberAxis axis, boolean vertical) {
        axis.setRange(-3.0, 3.0);
        axis.setTickUnit(new NumberTickUnit(0.5));
        axis.setVerticalTickLabels(vertical);
    }

    private XYDataset createSampleData() {
        XYSeriesCollection xySeriesCollection = new XYSeriesCollection();
        for (int i = 0; i < N * N; i++) {
            //TODO HOW ADD URL text information here
            series.add(rand.nextGaussian(), rand.nextGaussian());
        }
        xySeriesCollection.addSeries(series);
        return xySeriesCollection;
    }

    public static void main(String args[]) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                ScatterMouseClick demo = new ScatterMouseClick("Scatter Mouse click Demo");
                demo.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                demo.pack();
                demo.setLocationRelativeTo(null);
                demo.setVisible(true);
            }
        });
    }
} 
```

[这是关于如何显示点信息的另一篇文章](https://stackoverflow.com/questions/3909636/jfreechart-displaying-data-on-a-scatter-plot-on-mouse-click)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:51:15.857

使用 a ，如此[处](https://stackoverflow.com/a/8219445/230513)`ChartMouseListener`所示。您可以根据需要检查。如果您在 中启用 URL 生成，可能会很方便。`ChartEntity``ChartFactory``getURLText()`

附录：使用您的示例生成 URL 的最简单修改是`ChartFactory`通过将最终参数 , 设置`urls`为来启用它们`true`：

```
JFreeChart jfreechart = ChartFactory.createScatterPlot(
    "Scatter Mouse click Demo", "X", "Y", createSampleData(),
    PlotOrientation.VERTICAL, true, true, true); 
```

[您可以在此处](http://www.jfree.org/jfreechart/api/javadoc/src-html/org/jfree/chart/ChartFactory.html#line.1484)查看工厂如何将生成器添加到渲染器。您可以指定备用[构造函数参数](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/urls/StandardXYURLGenerator.html)，也可以覆盖该`generateURL()`方法以自定义结果。

安慰：

```
您点击了系列点：[0] 位置：[0]
    带有 URL 文本：index.html?series=0&item=0
您点击了系列点：[0]，位置：[1]
    带有 URL 文本：index.html?series=0&item=1
您点击了系列点：[0] 在位置：[2]
    带有 URL 文本：index.html?series=0&item=2

```

附录：基于现在删除的评论，请注意`getURLText()`仅检索生成器放在那里的内容。或者，请注意它`XYItemEntity`提供了对 parent 的完全访问权限`XYDataset`，尽管您可能必须将其强制转换为您的子类以检索特定数据。

# jquery - Jquery setTimeout 抛出“JScript 运行时错误：无效参数”。例外？

> ID：15771316
> 
> 赞同：1
> 
> 时间：2013-04-02T18:14:59.563
> 
> 标签：jquery, validation, settimeout, copy-paste

我为将文本/按键粘贴到文本区域中的字数验证编写了以下代码：

```
 $('textarea[maxlength]').keyup(function(eventObject) {
              window.setTimeout(validateLength(eventObject.target), 1);
              return true; 
```

validateLength 函数（如下）被执行，但是当它返回 settimeout 时抛出异常：

```
 function validateLength(textareaElement) {
           //get the limit from maxlength attribute
                var limit = parseInt($(textareaElement).attr('maxlength'));
                //get the current text inside the textarea
                var text = $(textareaElement).val();
                //count the number of characters in the text
                var chars = text.length;

                //check if there are more characters then allowed
                if(chars > limit){
                    //and if there are use substr to get the text before the limit
                    var new_text = text.substr(0, limit);

                    alert('The character limit is ' + limit + '. Your text has been trimmed to ' + limit + ' characters.');
                    //and change the current text with the new text
                    $(textareaElement).val(new_text);
                }
                alert(chars);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:18:55.827

您正在调用该函数并将结果传递给 setTimeout。你需要传递一个函数。

```
$('textarea[maxlength]').keyup(function(eventObject) {
  window.setTimeout(function(){validateLength(eventObject.target)}, 1);
  return true;
} 
```

# iphone - 延迟后执行方法

> ID：15771325
> 
> 赞同：-1
> 
> 时间：2013-04-02T18:15:25.247
> 
> 标签：iphone, ios, objective-c, ipad

我想在*-touchesEnded*方法完成执行后 2 秒执行一个*-recognized方法。*但是，如果用户在这 2 秒内触摸了某物，则不得执行该方法。在下一次再次执行*-touchesEnded*方法后，必须再次设置计时器以等待 2 秒。等等......希望这个问题足够清楚。如果没有，请告诉我。

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:18:54.053

您需要使用[NSTimer](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html)来协调这一点。当您要启动计时器的事件被触发时，请使用`scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:`在两秒内安排函数调用。

使用对视图控制器来说是全局的布尔变量来防止计时器在两者之​​间设置。

这是一个粗略的想法：

```
BOOL shouldRespondToTouch = YES;

- (void)touchesEnded {
    [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(doAction) userInfo:nil repeats:NO];
    shouldRespondToTouch = NO;
}

- (void)doAction {
    shouldRespondToTouch = YES;
    // Do stuff here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:22:44.450

```
 -(void) touchesEnded {
    [NSTimer scheduledTimerWithInterval: 1.0 target:self selector:@selector(targetMethod:) userInfo:nil repeats: YES];

    }

    //define the targetmethod
    -(void) targetMethod: NSTimer * theTimer
 {
    NSLog(@\"Me is here at 1 minute delay\");
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:57:29.663

事实证明，这真的很简单。

在 view.h 中创建一个 ivar

```
NSDate *startDate; 
```

将以下内容添加到 view.m 中的这些方法中

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
self->startDate = [NSDate date];
NSLog(@"%@", startDate);
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
if (self->startDate) {
        NSTimeInterval ti = [[NSDate date] timeIntervalSinceDate:self->startDate];
        NSLog(@"Time: %f", ti);
        if (ti >= 2 ) {
            NSLog(@"Yes, greater than 2 seconds !");
        }
    }
} 
```

奇迹般有效。**

# copy - AutoHotKey：您可以将不同的副本分配给不同的键吗？

> ID：15771327
> 
> 赞同：0
> 
> 时间：2013-04-02T18:15:29.880
> 
> 标签：copy, autohotkey, paste

是否可以使用 AutoHotKey 将剪贴板的不同副本分配给不同的键？例如，我想复制一个数字，将其分配给 F11 键，所以当我按 F11 时，它会打印该数字。但后来我想复制一个不同的号码，并将该号码分配给 F12。是否有可能做到这一点？我知道我可以通过编辑脚本将一个数字分配给一个键，但是我分配给这些键的数字正在迅速变化，因此每次更改脚本的效率都不是很高。我认为这是不可能的，但我不妨问问。我是 AutoHotKey 和脚本的新手。这是我目前正在使用的代码：

```
#NoEnv ; Recommended for performance and compatibility with future AutoHotkey releases.
; #Warn ; Enable warnings to assist with detecting common errors.
SendMode Input ; Recommended for new scripts due to its superior speed and reliability.
SetWorkingDir %A_ScriptDir% ; Ensures a consistent starting directory.
~F11::
clipboard = %clipboard%
send %clipboard% 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:56:14.237

有几种选择：

# 选项1。

```
+F11::  ; [Shift]+[F11] = ADD data to clipboard SHORT VERSION
    ClipBoard = ; Clear ClipBoard
    Send ^c ; Copy currently highlighted data
    Sleep, 50
    F11Save = %ClipBoard% ; Store ClipBoard data in variable %F11Save%
Return

+F11::  ; [Shift]+[F11] = ADD data to clipboard LONG VERSION
    TmpCB =%ClipBoard% ; Store previous ClipBoard Data
    ClipBoard = ; Clear ClipBoard
    Send ^c ; Copy currently highlighted data
    Sleep, 50
    F11Save = %ClipBoard%
    ClipBoard = %TmpSave% ; Restore previous ClipBoard TEXT content.
Return

F11::  ; paste text only...SHORT VERSION
    Send, %F11Save%
Return

F11::  ; paste text only...LONG VERSION
    ClipBoard = %F11Save%
    Send, ^v
Return 
```

重复其他功能键。

# 选项 2 使用我前段时间写的：

```
#SingleInstance Force
#installKeybdHook
#Persistent
; Written by Robert Ilbrink, The Netherlands
Menu, Tray, Icon , Shell32.dll, 100, 1
SetTitleMatchMode, 2
Global Nr := 1
x:=A_ScreenWidth-250
y:=A_ScreenHeight/2
; ================================== GUI ================================== 
ShowListBox:
Gui, Add, ListBox, h270 w195 vMyListBox gMyListBox, 01 %Array_1%|02 %Array_2%|03 %Array_3%|04 %Array_4%|05 %Array_5%|06 %Array_6%|07 %Array_7%|08 %Array_8%|09 %Array_9%|10 %Array_10%|11 %Array_11%|12 %Array_12%|13 %Array_13%|14 %Array_14%|15 %Array_15%|16 %Array_16%|17 %Array_17%|18 %Array_18%|19 %Array_19%|20 %Array_20%
Gui, Add, Button, x10  y275 w45 h20, Paste
Gui, Add, Button, x60  y275 w45 h20, Refresh
Gui, Add, Button, x110 y275 w45 h20, Help
Gui, Add, Button, x160 y275 w45 h20, Special
Gui, +AlwaysOnTop
WinGet, State, MinMax, 
If (State = -1)
    Return
Else
    Gui, Show, x%x% y%y%,MultiClipBoard
Exit
; ================================== SHORTCUTS ================================== 
+^1::MySend(Array_1)  ; [Shift]+[Ctrl]+1 pastes item 1
+^2::MySend(Array_2)  ; [Shift]+[Ctrl]+2 pastes item 2
+^3::MySend(Array_3)  ; [Shift]+[Ctrl]+3 pastes item 3
+^4::MySend(Array_4)  ; [Shift]+[Ctrl]+4 pastes item 4
+^5::MySend(Array_5)  ; [Shift]+[Ctrl]+5 pastes item 5
+^6::MySend(Array_6)  ; [Shift]+[Ctrl]+6 pastes item 6
+^7::MySend(Array_7)  ; [Shift]+[Ctrl]+7 pastes item 7
+^8::MySend(Array_8)  ; [Shift]+[Ctrl]+8 pastes item 8
+^9::MySend(Array_9)  ; [Shift]+[Ctrl]+9 pastes item 9
+^0::MySend(Array_10) ; [Shift]+[Ctrl]+0 pastes item 10
+^q::MySend(Array_11) ; [Shift]+[Ctrl]+q pastes item 11
+^w::MySend(Array_12) ; [Shift]+[Ctrl]+w pastes item 12
+^e::MySend(Array_13) ; [Shift]+[Ctrl]+e pastes item 13
+^r::MySend(Array_14) ; [Shift]+[Ctrl]+r pastes item 14
+^t::MySend(Array_15) ; [Shift]+[Ctrl]+t pastes item 15
+^y::MySend(Array_16) ; [Shift]+[Ctrl]+y pastes item 16
+^u::MySend(Array_17) ; [Shift]+[Ctrl]+u pastes item 17
+^i::MySend(Array_18) ; [Shift]+[Ctrl]+i pastes item 18
+^o::MySend(Array_19) ; [Shift]+[Ctrl]+o pastes item 19
+^p::MySend(Array_20) ; [Shift]+[Ctrl]+p pastes item 20
; ================================== NUMPAD SHORTCUTS ================================== 
^Numpad1::MySend(Array_1)  ; [Ctrl]+1 pastes item 1
^Numpad2::MySend(Array_2)  ; [Ctrl]+2 pastes item 2
^Numpad3::MySend(Array_3)  ; [Ctrl]+3 pastes item 13
^Numpad4::MySend(Array_4)  ; [Ctrl]+4 pastes item 4
^Numpad5::MySend(Array_5)  ; [Ctrl]+5 pastes item 5
^Numpad6::MySend(Array_6)  ; [Ctrl]+6 pastes item 6
^Numpad7::MySend(Array_7)  ; [Ctrl]+7 pastes item 7
^Numpad8::MySend(Array_8)  ; [Ctrl]+8 pastes item 8
^Numpad9::MySend(Array_9)  ; [Ctrl]+9 pastes item 9
^Numpad0::MySend(Array_10)  ; [Ctrl]+0 pastes item 10
+^Numpad1::MySend(Array_11)  ; [Shift]+[Ctrl]+1 pastes item 11
+^Numpad2::MySend(Array_12)  ; [Shift]+[Ctrl]+2 pastes item 12
+^Numpad3::MySend(Array_13)  ; [Shift]+[Ctrl]+3 pastes item 13
+^Numpad4::MySend(Array_14)  ; [Shift]+[Ctrl]+4 pastes item 14
+^Numpad5::MySend(Array_15)  ; [Shift]+[Ctrl]+5 pastes item 15
+^Numpad6::MySend(Array_16)  ; [Shift]+[Ctrl]+6 pastes item 16
+^Numpad7::MySend(Array_17)  ; [Shift]+[Ctrl]+7 pastes item 17
+^Numpad8::MySend(Array_18)  ; [Shift]+[Ctrl]+8 pastes item 18
+^Numpad9::MySend(Array_19)  ; [Shift]+[Ctrl]+9 pastes item 19
+^Numpad0::MySend(Array_20)  ; [Shift]+[Ctrl]+0 pastes item 20
; ================================== SEND FUNCTION ================================== 
MySend(Item)
{
    ClipBoard = %Item%
    IfWinActive, MultiClipBoard
        Send, !{Esc}
    Sleep, 100
    Send, ^v
}
; ================================== SINGLE or DOUBLE CLICK ================================== 
MyListBox: ; Single Click (Normal) or Double Click (DoubleClick) to paste data back to other application
if A_GuiControlEvent <> Normal ; Alternatively use "DoubleClick"
    return
GuiControlGet, MyListBox  ; Retrieve the ListBox's current MultiClipBoard.
StringTrimLeft, ClipBoard, MyListBox, 3 
Send, !{Esc}
Sleep, 200
Send, ^v
;Send, {Enter}
;SendInput, %MyListBox%{Tab}
return
; ================================== PASTE BUTTON ================================== 
ButtonPaste: ; Select an item with [Up] / [Down] arrows and press [Paste] to paste data back to other application
Gui, Submit, NoHide
StringTrimLeft, ClipBoard, MyListBox, 3 
Send, !{Esc}
Sleep, 200
Send, ^v
;SendInput, %MyListBox%{Tab}
Return
; ================================== EXIT / CLOSE BUTTONS ================================== 
GuiClose:
GuiEscape:
Gui, Destroy
ExitApp
; ================================== REFRESH BUTTON ================================== 
ButtonRefresh:
Gui,+LastFound
WinGetPos,x,y,w,h
Gui, Destroy
GoSub, ShowListBox
Return
; ================================== Copy Into the List ================================== 
Browser_Favorites:: ; [Star] key to copy to clipboard.
!c:: ; [Alt]+c to copy to multiClipboard.
#c:: ; [Win]+c to copy to multiClipboard.
Send, ^c
Sleep, 100
Array_%Nr% := ClipBoard
Nr++
If (Nr >20) ; wrap around after 20 entries
    Nr:=1
WinGet, State, MinMax, MultiClipBoard
If (State = -1)
    Return ; GUI, Show
Gui,+LastFound
WinGetPos,x,y,w,h
Gui, Destroy
GoSub, ShowListBox
Return
; ================================== CLEAR / OPEN / SAVE ================================== 
ButtonSpecial:
SetTimer, ChangeButtonNames, 30 
MsgBox, 4098, Special Action, [Clear]`, Clears all items`n[Upload]`, Upload a txt file`n[Save]`, Save current list.
IfMsgBox, Abort ;  ================================== CLEAR ================================== 
{
    MsgBox, 4100,, Are you sure to clear the list?
    IfMsgBox No
        Return
    Nr := 1
    Loop, 20
    {
        Array_%Nr% = 
        Nr++
    }
    Nr := 1
    Gui,+LastFound
    WinGetPos,x,y,w,h
    Gui, Destroy
    GoSub, ShowListBox
    Exit
}
Else ifMsgBox, Retry ;  ================================== OPEN ================================== 
{
    FileSelectFile, SelectedFile, 3, , Open a file, Text Documents (*.txt)
    If SelectedFile =
        Exit
    Else
    {
        Loop, read, %SelectedFile%
        {
            If A_LoopReadLine =
                Break
            Array_%A_Index% := A_LoopReadLine
            If (A_Index > 20)
                Break
            Nr := A_Index + 1
        }
    }

    Gui,+LastFound
    WinGetPos,x,y,w,h
    Gui, Destroy
    GoSub, ShowListBox
    Exit
}
Else ifMsgBox, Ignore ;  ================================== SAVE ================================== 
{
        FileSelectFile, SelectedFile, S, , Save the list as a Text Document, (*.txt)
        StringReplace, SelectedFile, SelectedFile, `.txt, 
        FileDelete, %SelectedFile%.txt
        Loop, 20
        {
            CurrentLine := Array_%A_Index%
            FileAppend, %CurrentLine%`n, %SelectedFile%.txt ; % Array_%A_Index%, doesn't work
        }
}
Exit
; ================================== HELP BUTTON ================================== 
ButtonHelp:
MsgBox, , MultiClipBoard Help, Press [Alt]+c or [Win]+c to copy highlighted data onto the clipboard (TEXT only).`n`nClick on an item to paste it to the last active application.`n`nPress [Refresh] to refresh the screen after items were added while minimized.`n`nPress [Special] to select`n[Clear] to clear the list (after confirmation),`n[Load] to load items from a file or`n[Save] to save current items to a file. `n`n[Shift]+[Ctrl]+[nr] (1...0) will paste item 1...10.`n[Shift]+[Ctrl]+[letter] (qwertyuiop) will paste item 11...20.
; ================================== RENAME STANDARD MSGBOX BUTTONS FOR SPECIAL MENU ================================== 
ChangeButtonNames: 
IfWinNotExist, Special Action
    return  ; Keep trying.
SetTimer, ChangeButtonNames, off 
WinActivate 
ControlSetText, Button1, &Clear 
ControlSetText, Button2, &Open
ControlSetText, Button3, &Save 
return
; ================================== END ================================== 
```

这将显示一个小窗口，您可以在其中存储（`win`+c 或`Alt`+c）最多 20 个项目。当您单击列表中的一项时，它将被发送到打开的应用程序。

我添加了使用`Shift`++或数字`Ctrl`下方`Nr`的字母发送存储数据的功能。

# php - 关于多个相关标签和项目关系的 SQL 查询

> ID：15771328
> 
> 赞同：1
> 
> 时间：2013-04-02T18:15:30.373
> 
> 标签：php, mysql, sql, tagging

我在 SO 中搜索了以下一些查询，但找不到与我的搜索匹配的内容，而且我在`IN`,`INNER JOIN`和`LEFT JOIN`编写它们之间有点迷失。

当前数据库关系 ![在此处输入图像描述](https://i.stack.imgur.com/k4X3x.png)

**1.通过标签获取物品**

`TAG.url`是从 a 得到的字符串`$_GET`，所以不是 INT id。

例如，使用 url `mydomain/items/tag1+tag2/`，我们将有以下请求。

对于一个很容易但对于两个或更多的标签，以下似乎在 mySQL 中不起作用：

```
SELECT 
    ITEM.id AS 'item_id',
    ITEM.title AS 'item_title',
    ITEM.content AS 'item_content'
  FROM ITEM, ITEM_TAG, TAG
WHERE
  (ITEM.id=ITEM_TAG.id_item AND TAG.id=ITEM_TAG.id_dtag AND TAG.url='tag1')
AND
  (ITEM.id=ITEM_TAG.id_item AND TAG.id=ITEM_TAG.id_dtag AND TAG.url='tag2')
...
AND
  (ITEM.id=ITEM_TAG.id_item AND TAG.id=ITEM_TAG.id_dtag AND TAG.url='tagn') 
```

这个有效：

```
SELECT 
  ITEM.id AS 'item_id',
  ITEM.title AS 'item_title',
  ITEM.content AS 'item_content'
FROM ITEM
  INNER JOIN TAG TAG1
   ON TAG1.url='tag1'
  INNER JOIN ITEM_TAG ITEM_TAG1
   ON ITEM_TAG1.id_item=ITEM.id AND ITEM_TAG1.id_tag=TAG1.id
  INNER JOIN TAG TAG2
   ON TAG2.url='tag2'
  INNER JOIN ITEM_TAG ITEM_TAG2
   ON ITEM_TAG2.id_item=ITEM.id AND ITEM_TAG2.id_tag=TAG2.id
  ...
  INNER JOIN TAG TAGn
   ON TAG2.url='tagn'
  INNER JOIN ITEM_TAG ITEM_TAGn
   ON ITEM_TAGn.id_item=ITEM.id AND ITEM_TAGn.id_tag=TAGn.id 
```

在这一点上，有没有比那些`INNER JOIN`和更好的方法来做到这一点`ON`？

**2.获取其他标签的相关标签**

在这里，我想获取标签列表和与其他标签匹配的项目数。

例如，让我们想象以下固定装置：

```
 ITEM_TAG             TAG
id_item | id_tag       id | url
1       | 1            1  | tag1
1       | 2            2  | tag2
1       | 3            3  | tag3
1       | 4            4  | tag4
2       | 1
2       | 2
2       | 3
3       | 1
3       | 2 
```

总是用下面的搜索`mydomain/items/tag1+tag2/`。

我希望显示与某些项目有关系的**其他标签（如果存在这些关系）。**

很抱歉，我不知道如何提出将输出以下内容的请求：

```
 TAG
url    count(id_item)
tag3 | 2
tag4 | 1 
```

如何得到这个结果？

**编辑**

我尝试了以下似乎可行的方法：

```
SELECT 
  COUNT(id_item) AS 'nb_item', 
  TAG.url AS 'tag_url'
FROM ITEM_TAG, TAG
WHERE 
 url NOT IN ('tag1','tag2')
 AND id_item IN 
 (
   SELECT id_item FROM ITEM_TAG, TAG 
   WHERE url IN ('tag1','tag2') AND id_tag=id
 )
 AND id_tag=id
GROUP BY TAG.id ORDER BY nb_item DESC 
```

任何优化这一点的想法或建议都将受到极大的欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:19:06.367

**1.通过标签获取物品**

```
select  i.id
,       i.title
,       i.content
from    item i
join    item_tag it
on      i.id = it.id_item
join    tag t
on      t.id = it.id_tag
where   t.url in ('tag1', 'tag2') 
```

**2.获取其他标签的相关标签**

```
select  t2.url
,       count(it2.id_item)
from    tag t1 -- this tag
join    item_tag it1
on      t1.id = it.id_tag
join    item_tag it2 -- other tag for same item
on      it2.item_id = it1.item_id
join    tag t2
on      t2.id = it2.id_tag
where   t1.url in ('tag1', 'tag2')
        and t2.url not in ('tag1', 'tag2')
group by
        t2.url 
```

# javascript - 如何调试非常慢（客户端）的网站模板？

> ID：15771331
> 
> 赞同：1
> 
> 时间：2013-04-02T18:15:38.660
> 
> 标签：javascript, html, css, debugging, profiling

一位客户购买了一个网站模板并希望我使用它。但是，无论出于何种原因，模板都非常慢并且会使浏览器挂起/变慢，尤其是在向下滚动时。

问题在于客户端代码（javascript、flash、图像或 CSS），而不是服务器端。

如何调试此站点以尝试确定导致模板变慢的确切原因？

我尝试添加/删除内容，但似乎没有帮助，所以我认为它可能与 css 相关联

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:22:19.133

使用现代浏览器，按 F-12，清除缓存，打开 NETWORK 面板并重新加载页面。这将为您提供资源列表、文件大小以及传输和加载所需的时间。

通常的嫌疑人：**包含 UI 元素的超过 100K 的图像**。我有一个朋友制作了一个 2500 像素宽的横幅，但在 CSS 中将其调整为 960 宽。它仍然使用相同的 350K PNG 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T18:32:44.780

除了浏览器开发工具或 Firebug 等中的网络面板外，还可以尝试使用 YSlow 和类似的插件来分析您的页面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T18:28:07.800

问题可能与 javascript 滚动事件有关。

例如，在 jQuery 中，$(window).scroll(); 中的任何内容；窗口移动的每个像素都被执行。

示例：[http ://codepen.io/coulbourne/pen/omKql](http://codepen.io/coulbourne/pen/omKql)

如果有滚动功能，请尝试去抖动

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T18:28:17.823

检查背景。是图像吗？这可能是您的问题的原因之一。

其他经常被遗忘的细节是调整图像大小需要时间（不是太多，但它是一些东西）。在将它们放入 HTML 代码之前，请尝试自行调整它们的大小。

这两个技巧可以做的比你想象的要多！（如果有帮助，请告诉我！）

# opencv - 可以录制视频但无法阅读

> ID：15771332
> 
> 赞同：0
> 
> 时间：2013-04-02T18:15:41.180
> 
> 标签：opencv, video-streaming, video-recording

我正在使用 OpenCV 的 VideoCapture 和 VideoWriter 类。我从 IP 摄像机录制 MJPEG 流。对于视频编写器类，我传递了与在 VideoCapture 实例中调用 get 相同的参数。录制视频后，我可以在 Media Player Classic 中成功打开它。但是，如果我尝试在另一个 OpenCV 应用程序中打开相同的视频，我似乎无法流式传输视频。open 调用成功，但随后连续调用 read 失败，我无法抓取任何帧。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:32:47.207

我想我的问题是我便宜的网络摄像机。一旦我将 FOURCC 代码手动设置为 MJPEG（而不是从相机获取），我的问题就解决了……

# c# - 为什么我的派生类不能转换为基类？

> ID：15771341
> 
> 赞同：1
> 
> 时间：2013-04-02T18:16:07.500
> 
> 标签：c#, base, derived

我有以下课程：

```
public class Item
{
}

public class ItemCollection<TItem> : ICollection<TItem> where TItem : Item, new()
{
} 
```

我有两个派生类：

```
public class Feature : Item
{
}

public class Features : ItemCollection<Feature>
{
} 
```

我有一个管理器类来管理这些集合：

```
public class ItemCollectionManager<TCollection> where TCollection : ItemCollection<Item>, new()
{
} 
```

我尝试使用这个类：

```
public class FeatureManager : ItemCollectionManager<Features>
{
} 
```

但这会导致：

“该类型`Features`必须可转换为`ItemCollection<Item>`才能在泛型类中用作 TCollection `ItemCollectionManager<TCollection>`”。

如前所述，

`Features`是一个`ItemCollection<Feature>`

和

`Feature`是一个`Item`。

我不相信接口是完成这项任务的理想解决方案，但如果提供理由，我愿意改变。

如果有人可以就我做错了什么提出建议，将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:52:44.533

你不能做...

```
ItemCollection<Feature> features = ...;
ItemCollection<Item> items = features; 
```

它是关于泛型`variance`（即协变和逆变） -**并且它仅支持接口、委托 - 并且仅提供它们以这种方式设计**（用`in`/装饰`out`并符合随之而来的规则）。例如`IEnumerable<>`是（如果您查找它的定义，您会看到`out`）。有关更多详细信息，我认为最好阅读更多...

[C# 4.0 中如何实现泛型协方差和逆变换？](https://stackoverflow.com/questions/245607/how-is-generic-covariance-contra-variance-implemented-in-c-sharp-4-0/246101#246101)
[了解 C# 中的协变和逆变接口](https://stackoverflow.com/questions/2719954/understanding-covariant-and-contravariant-interfaces-in-c-sharp/2720046#2720046)
[http://msdn.microsoft.com/en-us/library/dd799517.aspx](http://msdn.microsoft.com/en-us/library/dd799517.aspx)

在您的情况下，您可以设计一个`IItemCollection<out T>`( `interface`) - (**理论上**) 可能支持您需要的转换。但它必须是`read-only`（*有点简化，并不完全正确，但这样想更容易——规则有点复杂*）。

由于您将其命名为“集合”，因此我假设它不仅仅是用于枚举、查看项目 - 即，如果您有一个`Add`与. 此外，涉及的任何其他参数可能不允许您的界面成为协变的。 `input parameters``contra-variance``upcasting`

* * *

还有一些我发的其他帖子相关...

[如何使泛型类包含一组仅包含其自己的类型或子类型的子类？](https://stackoverflow.com/questions/15590540/how-to-make-generic-class-that-contains-a-set-of-only-its-own-type-or-subtypes-a/15599634#15599634)

[C# 通用处理程序，我有什么误解？](https://stackoverflow.com/questions/15723317/c-sharp-generic-handlers-what-am-i-misunderstanding/15723829#15723829)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T18:22:20.410

您需要在 ItemCollectionManager 上添加一个通用参数 TItem。

我相信您的 ItemCollectionManager 类定义应该是这样的。

```
 public class ItemCollectionManager<TCollection, TItem> where TCollection : ItemCollection<TItem>, new(), 
where TItem : Item
    {
    } 
```

您`FeatureManager`现在定义类的方式完全可以接受添加继承`Item`到的任何类`TCollection`，因为唯一的限制`TCollection`是它包含类型的类`Item`。该集合`Features`仅接受`Feature`类或继承该`Feature`类型的类。由于您不能添加`Item`to的基本类型`Features`，因此它不应该编译。

# javascript - 将 yyyy-mm-dd 转换为 JS 时间戳

> ID：15771343
> 
> 赞同：0
> 
> 时间：2013-04-02T18:16:20.480
> 
> 标签：javascript, datetime, timestamp, utc

关于如何将时间戳转换为 yyyy-mm-dd 有很多问题，但我正试图以另一种方式来做。

我有一个格式为 2013-02-25 的日期数组，但我希望它们是 js 时间戳。

我有一系列日期，比如我`["2013-02-25", "2013-02-22", "2013-02-21"]`试过

`new Date(dateArray[0]).getTime() / 1000;`

但这给出了错误的结果，因为“2013-02-25”被转换为 1361750400，即 1970 年 1 月 16 日星期五 18:15:50 GMT

请对如何在 javascript 中执行此操作有任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T18:17:54.923

**更新：**问题已更新为使用此代码尝试解析日期。

你现在的问题是你这样做了`new Date(dateArray[0]).getTime() / 1000;`。你不应该除以 1000。试试`new Date(dateArray[0]).getTime()`.

* * *

我认为明显的解决方案是您错过的解决方案：

```
var date = new Date("2013-02-25")// contains Mon Feb 25 2013 02:00:00 
```

*   [这是日期的规格](https://www.rfc-editor.org/rfc/rfc2822#page-14)
*   [w3c 日期和时间格式](http://www.w3.org/TR/NOTE-datetime)

# ios - 在方向更改时重新定位以编程方式添加的 uibutton

> ID：15771353
> 
> 赞同：-1
> 
> 时间：2013-04-02T18:16:47.910
> 
> 标签：ios, uibutton

我正在以编程方式将 UIButtons 添加到我的视图中，并且我想根据方向更改重新定位它们。

我通过为行和列运行 2 个 for 循环以及在第二个 for 循环中创建按钮：我为每个按钮分配了一些属性和唯一标签。（例如[，构建 10x10 UIButtons 网格的最佳方法？](https://stackoverflow.com/questions/1215419/best-way-to-build-10x10-grid-of-uibuttons)）

我通过收听 willAnimateRotationToInterfaceOrientation 来检测方向变化，并希望根据它们的标签调用按钮以将它们移动到新位置。

我需要保持按钮的状态，所以我不能删除它们。它必须重新定位。

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:33:09.727

有三种方法可以做到这一点。

1）使用自动调整掩码：使用这种方法，您无需做任何事情，按钮会根据为按钮设置的自动调整掩码相对于其父视图自动重新定位。

2）第二种方法是在超级视图旋转后重新定位按钮。您可以编写一个方法来根据旋转后其超级视图的新宽度和高度计算按钮的新框架。有旋转回调，如

```
 - (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation 
```

3）您还可以在按钮的超级视图中实现以下方法并重置按钮的框架

```
- (void)layoutSubviews 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:08:32.187

用这个：

```
 UIButton *button = (UIButton *)[self.view viewWithTag:1]; // change viewWithTag to your buttons tag number. Now you can use button to position it anyway you want.
    button.frame = CGRectMake(x, y, w, h); // x, y, width, height 
```

# ios - 数组中图像帧的错误属性

> ID：15771354
> 
> 赞同：0
> 
> 时间：2013-04-02T18:16:53.020
> 
> 标签：ios, objective-c, uiimageview, nsmutablearray

我有一组在 CGRect 框架内创建的图像

.h 文件：

```
NSMutableArray *imageArray; 
```

.m 文件：

```
 myImage = [[UIImageView alloc] initWithFrame:myImageRect];
[imageArray addObject:myImage]; 
```

如果我直接从 myImage 变量调用框架，我会得到正确的值：

```
NSLog(@"Frame x:%f y:%f w:%f h:%f", myImage.frame.origin.x, myImage.frame.origin.y, myImage.frame.size.width, myImage.frame.size.height); 
```

输出：`frame x:226.000000 y:226.000000 w:226.000000 h:334.000000`

但是，如果我通过数组调用图像，它会给我不正确的值：

```
UIImageView *anImage = [imageArray objectAtIndex:5];        
NSLog(@"frame x:%f y:%f w:%f h:%f", anImage.frame.origin.x, anImage.frame.origin.y, anImage.frame.size.width, anImage.frame.size.height); 
```

输出：`frame x:0.000000 y:0.000000 w:0.000000 h:0.000000`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:42:40.387

你可能错的是数组的初始化

```
NSMutableArray *imageArray=[[NSMutableArray alloc]initWithCapacity:5]; 
```

试过了

```
NSMutableArray *imageArray=[[NSMutableArray alloc]initWithCapacity:5];
UIImageView *  myImage ;
CGRect myImageRect=CGRectMake(10, 10, 10, 10);

for (int i=0; i<5; i++) {
    myImage= [[UIImageView alloc] initWithFrame:myImageRect];
    [imageArray addObject:myImage];

}
UIImageView *anImage = [imageArray objectAtIndex:3];
NSLog(@"%@",NSStringFromCGRect(anImage.frame)); 
```

结果

```
2013-04-03 01:10:49.114 TrialsError[95088:11303] {{10, 10}, {10, 10}} 
```

# c++ - C++11 - 我丢失了移动/复制分配

> ID：15771356
> 
> 赞同：4
> 
> 时间：2013-04-02T18:17:18.267
> 
> 标签：c++, c++11

我在另一个问题中发布了这段代码，但我对此有新的疑问：

```
#include <iostream>
#include <string>
#include <vector>
using namespace std;

class X
{
    public:

    std::vector<double> data;

    // Constructor1
    X():
        data(100000) // lots of data
    {
        cout << "X default constructor called";
    }

    // Constructor2
    X(X const& other): // copy constructor
        data(other.data)   // duplicate all that data
    {
        cout << "X copy constructor called";
    }

    // Constructor3
    X(X&& other):  // move constructor
        data(std::move(other.data)) // move the data: no copies
    {
        cout << "X move constructor called";
    }

    X& operator=(X const& other) // copy-assignment
    {
        cout << "X copy assignment called";
        data=other.data; // copy all the data
        return *this;
    }

    X& operator=(X && other) // move-assignment
    {
        cout << "X move assignment called";
        data=std::move(other.data); // move the data: no copies
        return *this;
    }

};

class X2
{
    public:

    std::vector<double> data;

    // Constructor1
    X2():
        data(100000) // lots of data
    {}

    // Constructor2
    X2(X const& other): // copy constructor
        data(other.data)   // duplicate all that data
    {}

    X2& operator=(X const& other) // copy-assignment
    {
        data=other.data; // copy all the data
        return *this;
    }
};

X make_x()
{
    X myNewObject; // Il normale costruttore viene chiamato qui
    myNewObject.data.push_back(22);
    return myNewObject; // Si crea un oggetto temporaneo prima di ritornare con il move constructor perchè myNewObject dev'essere distrutto
}

int main()
{
    X x1 = make_x(); // x1 has a move constructor

    X2 x2 = make_x(); // x2 hasn't a move constructor
} 
```

在 main() 行中，我希望调用移动分配和复制分配......但他们没有！

MSVC2012 输出为：

> X 默认构造函数调用 X 移动构造函数调用 X 默认构造函数调用 X 移动构造函数调用

而g ++的一个是

> X 默认构造函数调用 X 默认构造函数调用

[http://liveworkspace.org/code/220erd](http://liveworkspace.org/code/220erd) $2

任务在哪里？？我以为第一行 main() 会调用移动赋值，第二行 main() 会调用复制赋值

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T18:21:43.600

```
// Constructor2
X2(X const& other): // copy constructor
    data(other.data)   // duplicate all that data
{}

X2& operator=(X const& other) // copy-assignment
{
    data=other.data; // copy all the data
    return *this;
} 
```

首先，它们不是复制构造函数和复制赋值运算符 for，`X2`因为它们接受 type 的参数`X`。第一个实际上称为转换构造函数，因为它可以从 an 转换`X`为`X2`.

```
int x = 5; 
```

这不是 5 被分配给`x`; 它正在`x`被初始化`5`。初始化虽然看起来很相似，但与赋值不同。事实上，您的代码中根本不会发生赋值，因此不会使用移动或复制赋值运算符。

我们可以看看您给出的每个编译器实际上在做什么：

1.  MSVC

    首先，`myNewObject`创建于`make_x`. 这打印出来`X default constructor called`。然后`return myNewObject;`会先把复制到返回值当做move，发现有move构造函数，调用它。

    > 当满足或将满足复制操作的省略标准时，除了源对象是函数参数的事实，并且要复制的对象由左值指定时，选择复制的构造函数的重载决策是首先执行好像对象是由右值指定的。

    然后将返回值复制到`x1`. 然而，这个副本显然被忽略了，因为我们没有看到`X copy constructor called`输出：

    > 当尚未绑定到引用 (12.2) 的临时类对象将被复制/移动到具有相同 cv-unqualified 类型的类对象时，可以通过将临时对象直接构造到目标中来省略复制/移动操作省略的复制/移动

    其次，`myNewObject`在第二次调用`make_x`. 这再次打印出来`X default constructor called`。然后在做的时候也会发生同样的动作`return myNewObject`。从返回值构造 of`x2`不输出任何东西，因为它的构造函数接受 an`X`不做任何输出。

2.  海合会

    首先，`myNewObject`是在 中创建的`make_x`，就像 MSVC 一样。这打印出来`X default constructor called`。

    现在 GCC 做了一个 MSVC 没有做的额外优化。它意识到它最好不要费心从`myNewObject`返回值移动，而是直接在返回值的位置构造它：

    > 在具有类返回类型的函数的 return 语句中，当表达式是具有与函数返回类型相同的 cvunqualified 类型的非易失性自动对象（函数或 catch 子句参数除外）的名称时，复制/move 操作可以通过将自动对象直接构造到函数的返回值中来省略

    `x1`然后像在 MSVC 中一样执行由临时对象构造引起的相同省略。

    第二次调用的`make_x`发生方式与第一次完全相同，只是现在`x2`由转换构造函数构造，该构造函数采用`X`. 当然，这不会输出任何内容。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-02T18:20:22.690

您正在看到[命名返回值优化](http://en.wikipedia.org/wiki/Return_value_optimization)NRVO 的效果。以下代码

```
X f()
{
  X tmp;
  // ...
  return tmp;
} 
```

可以完全删除临时并在函数调用者的返回槽中构造它。在您的示例中，效果就像函数被内联并`x1`直接构造`x2`。

如果你想看到作业，你可以写：

```
X x1;
x1 = make_x(); 
```

# c# - 带捕获的数组

> ID：15771359
> 
> 赞同：-5
> 
> 时间：2013-04-02T18:17:26.373
> 
> 标签：c#, arrays, input, numbers, double

这是我必须做的：

1.  创建一个数组
2.  用户输入 10 个双元素
3.  使用 catch 确保它是有效数据
4.  然后显示数据

这是到目前为止的代码：

```
static void Main(string[] args)
{
    double[] numbers;

    numbers = new double[10];

    for (int count = 0; count < 10; count += 1)
    {
        double num;

        Console.WriteLine("Enter a number");
        num = Convert.ToDouble(Console.ReadLine());

    }
    Console.WriteLine("{0}", numbers);
    Console.ReadLine();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:21:47.860

```
static void Main(string[] args)
{
    double[] numbers = new double[10];

    for (int count = 0; count < 10; count += 1)
    {
        double num;
        Console.WriteLine("Enter a number");

        while(!double.TryParse(Console.ReadLine(),out num))
        {
             Console.WriteLine("Not a valid number");
             Console.WriteLine("Enter a number");
        }
        numbers[count] = num;
    }

    foreach(double item in numbers)
    {
        Console.WriteLine("{0}", item);
    }

    Console.ReadLine();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:57:14.377

```
static void Main(string[] args)
    {
        double[] numbers = new double[10];

        int counter = 0;

        do
        {
            Console.WriteLine("Enter valid number or press X to exit");
            var t = Console.ReadLine();
            try
            {
                double temp = double.Parse(t);

                numbers[counter] = temp;
                counter++;

            }
            catch (Exception)
            {
                if (t.Contains("X"))
                {
                    break;
                }
                //Console.WriteLine("Enter valid number or press X to exit");
            }

        } while (counter<10);

        foreach (var number in numbers)
        {
            Console.Write("\nEntered number: "+number);
        }

        Console.ReadLine();

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T18:24:20.793

```
static void Main(string[] args)
{
    double[] numbers = new double[10];

    int i = 0;
    while (i < 10)
    {
        double num;

        Console.WriteLine("Enter a number");
        string input = Console.ReadLine();
        try
        {
            num = double.Parse(input);
            numbers[i] = num;
            i++
        }
        catch
        {
            Console.WriteLine("Invalid Number");
        }
    }

    foreach (double d in numbers)
        Console.WriteLine(d);
    Console.ReadLine();
} 
```

# android - Jquery mobile：如何仅在首次加载页面时显示弹出窗口？

> ID：15771360
> 
> 赞同：1
> 
> 时间：2013-04-02T18:17:28.737
> 
> 标签：android, ios, jquery-mobile, mobile, popup

我开始使用 jquery mobile 开发我的第一个移动应用程序。到目前为止它进展顺利，但我无法解决特定的弹出行为。

一旦用户加载应用程序，我希望它显示一个弹出窗口。这个弹出窗口应该类似于您在许多应用程序中看到的添加到主页弹出窗口。它旨在通过一些重要的按钮将用户方向指向固定页脚。我设法插入此弹出窗口并在页面加载时打开它，但有两件事我无法做。

1.  我的弹出窗口加载并消失，这是我想要的，没关系。但是，一旦您重新加载页面，或导航到另一个页面并返回，它就会再次打开。这对用户来说很烦人。我希望它仅在您第一次加载主页时打开。

2.  我想将弹出窗口定位在页脚上方，所以不是在它上面，而是在上面。我该怎么做？我是否使用 x 和 y，如果是，如何使用？

3.  有没有办法让覆盖效果模糊整个页面，除了页脚？

谢谢你。

这是代码：

```
 <div data-role="page" id="home">
<div data-position="fixed" data-role="header" data-theme="d">
<h1>Prva pomoć</h1>
    <button data-icon="info" data-iconpos="right"></button>
</div>
<div data-role="content">   
    <ul data-role="listview" data-divider-theme="d">
<li data-role="list-divider">Ne reagira i ne diše
</li>
<li><a href="#page2">Oživljavanje</a></li>
    <li><a href="#page3">Oživljavanje + AVD</a></li>
<li data-role="list-divider">Ne reagira, ali diše</li>
    <li><a href="#page4">Bočni položaj</a></li>
    <li data-role="list-divider">Ostalo</li>
    <li><a href="#page4">Gušenje</a></li></ul></div> 
    <div id="popspot"></div>
    <div data-role="popup" id="popup" data-transition="slidedown" data-position-to="#popspot" data-theme="a" data-overlay-theme="e" data-history="true">
<p>U slučaju hitnoće koristi ovaj izbornik!<p></div>
        <script type="text/javascript" language="JavaScript">
            $(":jqmData(role='page'):last").on("pageshow", function(event) {
              $("#popup", $(this)).popup("open");
               setTimeout(function(){
      $("#popup").popup("close");
    }, 3000);
            });
        </script>
    <div data-role="footer" id="hitnizbor" data-position="fixed" class="nav-glyphish-example">
<div class="nav-glyphish-example" data-grid="b" data-role="navbar" data-theme="e">
<ul>
    <li><a href="#popup" data-rel="popup" id="chat" data-icon="custom">Zovi Hitnu</a></li>
    <li><a href="#" id="email" data-icon="custom">Oživljavanje</a></li>
    <li><a href="#" id="skull" data-icon="custom">Osobni podaci</a></li>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:49:58.030

您可以使用 sessionStorage 或 localStorage 来跟踪与是否显示弹出窗口相关的信息。

您的代码将如下所示

```
if (localStorage.popUpShown != 'true') {
        // window will position the pop up to center
        $('#popup').popup('open', {positionTo: 'window'});

        localStorage.popUpShown = 'true';
        setTimeout(function () {
            $("#popup").popup("close");
        }, 3000);
    }
else{
        // Can remove this alert in development enviornment.
        alert('already shown the popup');
    } 
```

你可以在`**[live fiddle](http://jsfiddle.net/mayooresan/MyaE9/)**`这里查看[http://jsfiddle.net/mayooresan/MyaE9/](http://jsfiddle.net/mayooresan/MyaE9/)

还对您的 html 进行了一些调整。您的 html 页面中有标记错误。

```
<div data-role="page" id="home">
    <div data-position="fixed" data-role="header" data-theme="d">

<h1>Prva pomoć</h1>

        <button data-icon="info" data-iconpos="right"></button>
    </div>
    <div data-role="content">
        <ul data-role="listview" data-divider-theme="d">
            <li data-role="list-divider">Ne reagira i ne diše</li>
            <li><a href="#page2">Oživljavanje</a>

            </li>
            <li><a href="#page3">Oživljavanje + AVD</a>

            </li>
            <li data-role="list-divider">Ne reagira, ali diše</li>
            <li><a href="#page4">Bočni položaj</a>

            </li>
            <li data-role="list-divider">Ostalo</li>
            <li><a href="#page4">Gušenje</a>

            </li>
        </ul>
        <div id="popspot"></div>
        <div data-role="popup" id="popup" data-transition="slidedown" data-position-to="#popspot" data-theme="a" data-overlay-theme="e" data-history="true">
            <p>U slučaju hitnoće koristi ovaj izbornik!</p>
        </div>
    </div>
    <div data-role="footer" id="hitnizbor" data-position="fixed" class="nav-glyphish-example">
        <div class="nav-glyphish-example" data-grid="b" data-role="navbar" data-theme="e">
            <ul>
                <li><a href="#popup" data-rel="popup" id="chat" data-icon="custom">Zovi Hitnu</a>

                </li>
                <li><a href="#" id="email" data-icon="custom">Oživljavanje</a>

                </li>
                <li><a href="#" id="skull" data-icon="custom">Osobni podaci</a>

                </li>
            </ul>
        </div> 
```

# joomla - 龙门升级失败后站点关闭 (Joomla)

> ID：15771364
> 
> 赞同：-4
> 
> 时间：2013-04-02T18:17:35.370
> 
> 标签：joomla, backend

我有一个想要更新到 2.5 版的 Joomla 站点，但在此之前我升级了 Gantry 框架。大错。模板来自 Rocket Theme, [Camber](http://demo.rockettheme.com/joomla/camber/)。

我通过扩展管理器更新了 Gantry。安装被取消，现在我收到一条错误消息。我无法访问我的页面或后端。

我能做些什么？！

我目前的 Joomla 是 1.7
我的网址：[www.casabar.com](http://www.casabar.com)

错误代码：

```
Fatal error: Call to a member function getWord() on a non-object in /libraries/gantry/gantry.php on line 189 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:08:58.880

您提到安装已取消 - 尝试从扩展管理器卸载扩展，然后重新安装成功？

听起来好像在安装中断时没有复制依赖文件之一？

- 更新

哦，我看到您无法访问后端。在这种情况下，我建议对龙门文件进行 FTP 上传。

# ios - GPUImage：使用画笔描边应用滤镜

> ID：15771365
> 
> 赞同：0
> 
> 时间：2013-04-02T18:17:35.697
> 
> 标签：ios, xcode, image-processing, gpuimage

目前我正在开发一个照片编辑*iOS*应用程序，我正在使用 brad 的`GPUImage`框架来处理图像。我应用了不同的混合模式，并且效果很好。但这可能`UIImage`与*笔触*混合吗？

每当用户刷过该`UIImage`图像的刷过部分时，应将其与笔触混合。我`GLPaint`用来创建画笔描边。

# sql - 显示一列重复的完整行

> ID：15771366
> 
> 赞同：0
> 
> 时间：2013-04-02T18:17:38.843
> 
> 标签：sql, duplicates

我似乎不知道如何在这上面找到一些东西。这是我的示例，它只显示了重复的列：

```
select column1,COUNT(column1)
    from table
    where column1> 0
    GROUP BY column1
    HAVING COUNT(column1) > 1 
```

**输出：**

```
----------------------------
column1 | (name not defined)
----------------------------
2134567 | 2
2881992 | 3 
```

**我想要的是：**

```
------------------------------------------------
column0 | column2 |column1 | (name not defined)
------------------------------------------------
1       |     abc |2134567 | 2
2       |     cde |2881992 | 3 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:22:20.623

您需要将查询连接回要从中提取附加数据的表

```
SELECT column0, column2, table.column1, columncount
FROM table 
    INNER JOIN (SELECT column1, COUNT(column1) columncount
                FROM table
                WHERE column1> 0
                GROUP BY column1 HAVING COUNT(column1) > 1) t2 ON table.column1 = t2.column1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T18:24:07.893

尝试类似：

```
SELECT * FROM [Tanle1]
WHERE Column0 IN
     (SELECT Column0 FROM [Table1]
      GROUP BY Column0
      HAVING COUNT(Column0) > 1) 
```

# jquery - jQuery 一一定位和移动特定元素

> ID：15771369
> 
> 赞同：1
> 
> 时间：2013-04-02T18:17:45.003
> 
> 标签：jquery, indexing, insertafter

我有一个这样的 HTML 结构：

```
<tr class="v65-productDisplay-row"></tr>
<tr class="v65-productDisplay-row PriceAndButton"></tr>
<tr class="v65-productDisplay-row PhotoLine"></tr>
<tr class="v65-productDisplay-row"></tr>
<tr></tr>
<tr class="v65-productDisplay-row"></tr>
<tr class="v65-productDisplay-row PriceAndButton"></tr>
<tr class="v65-productDisplay-row PhotoLine"></tr>
<tr class="v65-productDisplay-row"></tr>
<tr></tr>
<tr class="v65-productDisplay-row"></tr>
<tr class="v65-productDisplay-row PriceAndButton"></tr>
<tr class="v65-productDisplay-row PhotoLine"></tr>
<tr class="v65-productDisplay-row"></tr>
<tr></tr>
...and so on 
```

我试图定位每个 PriceAndButton TR 并将其插入每个相应的 PhotoLine TR 之后。这是我到目前为止的代码，但它还没有工作：

```
 jQuery(".PriceAndButton").each(function() {
            var IndexValue = $(this).index();
            $(this).insertAfter(".PhotoLine:eq(" + IndexValue + 1 + "");
        }); 
```

我的想法是获取每个 PriceAndButton 元素的索引值并将其插入到 PhotoLine TR 之后，其中它的 eq 等于索引值 + 1。这应该可以正常工作，因为 PhotoLine TR 总是紧随其后？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:21:11.687

您的代码（我修复了右括号）：

```
".PhotoLine:eq(" + IndexValue + 1 + ")"; 
```

将连接为字符串。如果`IndexValue`等于 3，那么您将得到字符串`.PhotoLine:eq(31)`而不是`.PhotoLine:eq(4)`. 你的意思是：

```
".PhotoLine:eq(" + (IndexValue + 1) + ")"; 
```

但即便如此，它也不会很好地工作。

为简单起见，您可以完全避免使用`eq`，而是选择`.next('.PhotoLine')`（或只是`.next()`，但我喜欢准确以避免意外的惊喜）：

```
$('.PriceAndButton').each(function(i,el) {
    $(this).insertAfter($(this).next('.PhotoLine'));
}); 
```

[http://jsfiddle.net/mblase75/YWaYN/](http://jsfiddle.net/mblase75/YWaYN/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T18:21:43.823

您可以像这样使用 jQuery [next 方法](http://api.jquery.com/next/)：

```
$(".PriceAndButton").each(function() {
    var self = $(this);
    self.insertAfter(self.next());
}); 
```

# sql - 数据库“x”的日志不可用

> ID：15771371
> 
> 赞同：22
> 
> 时间：2013-04-02T18:17:53.903
> 
> 标签：sql, sql-server, connection

在没有更改任何内容后，我尝试使用我的网站的注册页面，突然出现以下错误消息：

> 数据库“x”的日志不可用。检查事件日志以获取相关的错误消息。解决所有错误并重新启动数据库。

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

我尝试重新打开程序和数据库，尝试刷新数据库，但没有任何效果。可能是什么问题？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-10-06T06:59:40.260

*   使数据库脱机。
*   把它重新上线。
*   运行 DBCC checkdb 以确保一切正常。
*   设置自动关闭 = False。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T18:21:13.983

可能是数据库设置为 AutoClose，或设置为 OFFLINE，或者在 SQL Server 服务未运行时，.ldf 文件被其他人或工具删除或损坏/压缩。

制作 MDF 文件的副本，您可以尝试使用以下方法附加它：

```
CREATE DATABASE mydb_copy ON (filename = 'C:\path to.mdf')
  FOR ATTACH_REBUILD_LOG; 
```

否则，开始寻找备份...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-21T11:42:17.737

太多的事情会导致这种情况。我有同样的问题，您可以尝试使数据库脱机并重新联机（或重新启动 MSSQL）。通常它会有所帮助。如果这不能帮助您尝试以下解决方案：

1.  对于 SQL Server 2008 和 2005，请尝试安装最新的 SP
2.  运行*DBCC CHECKDB ('DatabaseName')*并查看发现的错误
3.  检查 Windows 日志和 SQL Server 日志以获取更具体的错误代码
4.  有些人找到将数据库上的自动关闭选项设置为 FALSE 的解决方案
5.  这种情况背后的原因可能是由于服务器的 IO 或内存不佳

# .net - 调试器附件自动化

> ID：15771378
> 
> 赞同：2
> 
> 时间：2013-04-02T18:18:24.790
> 
> 标签：.net, visual-studio, debugging, sdk, automation

我有两个项目，一个是“前端”或加载器项目，另一个是 Web 服务，它实际上完全位于一个单独的文件夹/解决方案中。

我已经在使用我的前端将该项目加载到 Cassini 中（实际上有两个）。我想做的是将调试器附加到我的两个 Web 服务上，并且它们的相关源代码在运行时、在前端，甚至那些项目中，都不包含在前端解决方案中。

我确实可以访问源代码和 pdb，所以我相信我应该能够做到这一点，但不是 100% 肯定，而且在线执行此操作的信息充其量是……稀疏。

在 .NET、Visual Studio SDK 或其他第三方框架中，有没有办法做到这一点？

我可以访问 VS 2010 和 VS 2012

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:12:47.940

要调用的 VS API 是[EnvDTE.Process.Attach](http://msdn.microsoft.com/en-us/library/vstudio/envdte.process.attach.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-2)。

API 的文档给出了一个按名称附加进程的示例，该示例不适用于多个应用程序池。[您可以通过命令行工具（可能需要提升）](http://blogs.msdn.com/b/friis/archive/2009/10/22/which-w3wp-exe-pid-corresponds-to-which-application-pool.aspx)或[w3wp 命令行](http://blogs.msdn.com/b/jb/archive/2006/02/22/536693.aspx#10191977)按应用程序池名称找到正确的 w3wp 进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:42:06.810

所以你在这里有几个选择。

第一个选项（如果适用）是仅添加以下行：

```
#if DEBUG
System.Diagnostics.Debugger.Launch();
#endif 
```

这通常会弹出“Visual Studio JIT 调试”窗口并允许您选择正在运行的实例或启动新的 Visual Studio。

或者，如果您想要一些...“更棘手”的东西，您可以遍历正在运行的进程，查找任何 Visual Studio 实例，并使用`EnvDTE`API 绑定到它们。这要**复杂**得多，所以如果适用，我推荐上面更简单的选项，但这里是：

首先，我们需要一种“查找”Visual Studio 实例的方法：

```
private static IEnumerable<Process> GetVisualStudioProcesses()
{
    var processes = Process.GetProcesses();
    return processes.Where(o => o.ProcessName.Contains("devenv"));
} 
```

然后我们可以使用它来尝试附加到那些正在运行的实例支持的正确的基于 COM 的接口：

```
private static bool TryGetVsInstance(int processId, out EnvDTE._DTE instance)
{
    var numFetched = IntPtr.Zero;
    var monikers = new IMoniker[1];
    IRunningObjectTable runningObjectTable;
    IEnumMoniker monikerEnumerator;

    GetRunningObjectTable(0, out runningObjectTable);
    runningObjectTable.EnumRunning(out monikerEnumerator);
    monikerEnumerator.Reset();

    while (monikerEnumerator.Next(1, monikers, numFetched) == 0)
    {
        IBindCtx ctx;
        CreateBindCtx(0, out ctx);

        string runningObjectName;
        monikers[0].GetDisplayName(ctx, null, out runningObjectName);

        object runningObjectVal;
        runningObjectTable.GetObject(monikers[0], out runningObjectVal);

        if (runningObjectVal is EnvDTE._DTE && runningObjectName.StartsWith("!VisualStudio"))
        {                    
            var currentProcessId = int.Parse(runningObjectName.Split(':')[1]);
            if (currentProcessId == processId)
            {
                instance = (EnvDTE._DTE)runningObjectVal;
                return true;
            }
        }
    }

    instance = null;
    return false;
} 
```

COM 定义在哪里：

```
[ComImport, Guid("00000016-0000-0000-C000-000000000046"), InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
public interface IOleMessageFilter
{
    [PreserveSig]
    int HandleInComingCall(int dwCallType, IntPtr hTaskCaller, int dwTickCount, IntPtr lpInterfaceInfo);

    [PreserveSig]
    int RetryRejectedCall(IntPtr hTaskCallee, int dwTickCount, int dwRejectType);

    [PreserveSig]
    int MessagePending(IntPtr hTaskCallee, int dwTickCount, int dwPendingType);
}
public class MessageFilter : IOleMessageFilter
{
    private const int Handled = 0, RetryAllowed = 2, Retry = 99, Cancel = -1, WaitAndDispatch = 2;

    int IOleMessageFilter.HandleInComingCall(int dwCallType, IntPtr hTaskCaller, int dwTickCount, IntPtr lpInterfaceInfo)
    {
        return Handled;
    }

    int IOleMessageFilter.RetryRejectedCall(IntPtr hTaskCallee, int dwTickCount, int dwRejectType)
    {
        return dwRejectType == RetryAllowed ? Retry : Cancel;
    }

    int IOleMessageFilter.MessagePending(IntPtr hTaskCallee, int dwTickCount, int dwPendingType)
    {
        return WaitAndDispatch;
    }

    public static void Register()
    {
        CoRegisterMessageFilter(new MessageFilter());
    }

    public static void Revoke()
    {
        CoRegisterMessageFilter(null);
    }

    private static void CoRegisterMessageFilter(IOleMessageFilter newFilter)
    {
        IOleMessageFilter oldFilter;
        CoRegisterMessageFilter(newFilter, out oldFilter);
    }

    [DllImport("Ole32.dll")]
    private static extern int CoRegisterMessageFilter(IOleMessageFilter newFilter, out IOleMessageFilter oldFilter);
} 
```

我们可以像这样在“尝试附加到”调用中结束它：

```
public static bool AttachToProcess(int processId)
{
#if !DEBUG
    // Not allowed if not in DEBUG mode...
    return false;
#else
    MessageFilter.Register();
    Exception lastException = null;
    bool attachSuccess = false;
    while (!attachSuccess && !(lastException is COMException))
    {
        Log("Attempting DynamicAttach to process id:" + processId);
        try
        {
            Log("Querying for active VS instances...");
            var studioProcesses = GetVisualStudioProcesses();
            var studioDtes = studioProcesses
                .Select(proc =>
                {
                    EnvDTE._DTE dte;
                    if (TryGetVsInstance(proc.Id, out dte))
                    {
                        return new DteWrapper(dte);
                    }
                    return null;
                })
                .Where(dte => dte != null);
            foreach (var studioDte in studioDtes)
            {
                attachSuccess = TryAttachTo(processId, studioDte, out lastException);
                if(attachSuccess) break;
            }
        }
        catch (Exception vsex)
        {
            lastException = vsex;
        }

    }
    MessageFilter.Revoke();
    return attachSuccess;
#endif
}

private static bool TryAttachTo(int processId, DteWrapper studioDte, out Exception lastException)
{
    bool attachSuccess = false;
    lastException = null;
    Log("Attempting to attach to process " + processId);
    try
    {
        var localProcesses =
            from localProcess in studioDte.Debugger.LocalProcesses.Cast<EnvDTE.Process>()
            let processWrapper = new ProcessWrapper(localProcess)
            where processWrapper.Process2 == null || !processWrapper.Process2.IsBeingDebugged
            select processWrapper;
        if (!localProcesses.Any())
        {
            lastException = new ApplicationException("Can not find process to attach to!");
            return false;
        }
        foreach (var process in localProcesses)
        {
            try
            {
                if (process.Process.ProcessID == processId)
                {
                    Log("Found dte process to attach to, attempting attach...", studioDte);
                    try
                    {
                        process.Process.Attach();
                        Log("Attached to process!");
                        attachSuccess = true;
                        AtLeastOneDebuggerWasAttached = true;
                    }
                    catch (Exception detachException)
                    {
                        Log("Could not attach to process:" + detachException, studioDte);
                        attachSuccess = false;
                        lastException = detachException;
                    }
                }
            }
            catch (Exception attachException)
            {
                lastException = attachException;
            }
        }
    }
    catch (Exception queryProcessesException)
    {
        lastException = queryProcessesException;
    }
    return attachSuccess;
} 
```

一些辅助类定义为：

```
internal class DteWrapper
{
    public DteWrapper(EnvDTE._DTE dte)
    {
        Dte = dte as EnvDTE.DTE;
        Dte2 = dte as EnvDTE80.DTE2;
        Debugger = dte.Debugger;
        Debugger2 = (Dte2 != null) ? Dte2.Debugger as EnvDTE80.Debugger2 : null;
        Events = dte.Events;
        DebuggerEvents = dte.Events.DebuggerEvents;
    }

    public EnvDTE.DTE Dte { get; private set; }
    public EnvDTE80.DTE2 Dte2 { get; private set; }

    public EnvDTE.Debugger Debugger { get; private set; }
    public EnvDTE80.Debugger2 Debugger2 { get; private set; }

    public EnvDTE.Events Events { get; private set; }
    public EnvDTE.DebuggerEvents DebuggerEvents { get; private set; }
}
internal class ProcessWrapper
{
    public ProcessWrapper(EnvDTE.Process dteProcess)
    {
        this.Process = dteProcess;
        this.Process2 = dteProcess as EnvDTE80.Process2;
        this.Process3 = dteProcess as EnvDTE90.Process3;
        this.ManagedProcess = System.Diagnostics.Process.GetProcessById(dteProcess.ProcessID);
    }
    public Process ManagedProcess { get; private set; }
    public EnvDTE.Process Process { get; private set; }
    public EnvDTE80.Process2 Process2 { get; private set; }
    public EnvDTE90.Process3 Process3 { get; private set; }
} 
```

# java - CANNOT LINK EXECUTABLE 错误与加载所需的库。如何正确链接它们？

> ID：15771389
> 
> 赞同：2
> 
> 时间：2013-04-02T18:19:06.400
> 
> 标签：java, android, ffmpeg, libs, android-native-library

编辑：我知道可能重复，但答案并不直接适用。我正在使用 ProcessBuilder 而不是 Runtime.getRuntime().exec：

```
public int execProcess(List<String> cmds, ShellUtils.ShellCallback sc) {    
    StringBuilder cmdlog = new StringBuilder();
    for (String cmd : cmds) {
         cmdlog.append(' ');
    }
    Utils.logger("v", cmdlog.toString(), DEBUG_TAG);

    ProcessBuilder pb = new ProcessBuilder();
    pb.directory(mBinFileDir);
    pb.command(cmds);

    Process process = null;
    int exitVal = 1; // Default error
    try {
        process = pb.start();

        StreamGobbler errorGobbler = new
        StreamGobbler(process.getErrorStream(), "ERROR", sc);

        StreamGobbler outputGobbler = new
        StreamGobbler(process.getInputStream(), "OUTPUT", sc);

        errorGobbler.start();
        outputGobbler.start();

        exitVal = process.waitFor();

        sc.processComplete(exitVal);

     } catch (Exception e) {
         Log.e(DEBUG_TAG, "Error executing ffmpeg command!", e);
     } finally {
         if (process != null) {
             Utils.logger("w", "destroyng process", DEBUG_TAG);
             process.destroy();
         }
    }
    return exitVal;
} 
```

* * *

我在为 android 编译的 FFmpeg 上有两个版本：启用和不`liblame`启用。

当我加载`/data/data/<<my-package-name>>/app_bin/`不支持不支持编译的 FFmpeg 二进制文件时，它可以毫无问题地从视频中提取音频。但是，当我使用启用了蹩脚支持的那个时，我在日志中收到了以下错误。

所需的库（也是为 android 编译的）在`libs`使用`System.loadLibrary("lame")`.

我想知道是否还有其他事情要做才能正确地使 FFmpeg 二进制文件找到库。这些是提供给 NDK 以构建 FFmpeg 二进制文件的相同库。

```
D/dalvikvm(13741): Trying to load lib /data/app-lib/<<my-package-name>>/liblame.so 0x40ffed08
D/dalvikvm(13741): Added shared lib /data/app-lib/<<my-package-name>>/liblame.so 0x40ffed08
D/dalvikvm(13741): No JNI_OnLoad found in /data/app-lib/<<my-package-name>>/liblame.so 0x40ffed08, skipping init
D/FfmpegController(13741): Trying to chmod '/data/data/<<my-package-name>>/app_bin/ffmpeg' to: 755
V/FfmpegController(13741): /data/data/<<my-package-name>>/app_bin/ffmpeg -y -i /storage/sdcard0/Download/video.webm -vn -acodec copy /storage/sdcard0/Download/audio.ogg 
>>>>>> ---------- <<<<<<
D/DownloadsService(13741): soinfo_link_image(linker.cpp:1673): could not load library "liblame.so" needed by "/data/data/<<my-package-name>>/app_bin/ffmpeg"; caused by load_library(linker.cpp:771): library "liblame.so" not foundCANNOT LINK EXECUTABLE
>>>>>> ---------- <<<<<<
I/DownloadsService(13741): FFmpeg process exit value: 255 
```

我没有附加代码，因为它相当简单：

*   下载 FFmpeg 二进制文件（应用程序不附带）；
*   将下载文件夹中的二进制文件复制到`/data/data/<<my-package-name>>/app_bin/`；
*   chmod 755;
*   从那里执行并读取输出。

如果需要其他内容，请发表评论。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T12:55:20.703

有趣的是，我最近找到了所有的答案......无论如何，如果你想的话，它可能对其他人有用：

*   添加共享库的路径，例如`liblame.so`
*   `System.loadLibrary("lame")`从`libs`文件夹加载
*   你想用`ProcessBuilder`

**做**：

1)

```
ProcessBuilder pb = new ProcessBuilder("liblame.so");
Map<String, String> envMap = pb.environment();
envMap.put("LD_LIBRARY_PATH", "/data/app-lib/<<my-pkg-name>>/"); 
```

或者，更好的是，避免处理包名称后的“-1”或“-2”后缀（更改）：

2)

```
ProcessBuilder pb = new ProcessBuilder();
Map<String, String> envMap = pb.environment();
envMap.put("LD_LIBRARY_PATH", "/data/data/<<my-pkg-name>>/lib"); 
```

并且不要硬编码`/data/data/<<my-pkg-name>>/lib` 使用：`Context.getApplicationInfo().nativeLibraryDir`

使用此解决方案 2）我还发现`System.loadLibrary("lame")`它**不需要**。

# c++ - c++11数组传递给函数错误

> ID：15771391
> 
> 赞同：3
> 
> 时间：2013-04-02T18:19:07.113
> 
> 标签：c++, arrays, function, c++11

我正在按照[这个](http://www.youtube.com/watch?v=czrbhZjp4JA&list=PL3345A50B73C26A6F)YouTube 视频教程系列尝试一个 c++11 数组。虽然我在使用 IDE 方面不是很熟练，但我的 IDE、Eclipse 和 Codeblocks 都设置为让编译器遵循 C++0x ISO 语言标准 [-std=c++0x]，这至少允许它们了解 c++11 数组的语法，例如`array <double, 5> rainfall;` 两者都以相同的方式响应。我编写的以下代码将此数组传递给将其打印出来的函数。

```
#include <iostream>
#include <array>

using namespace std;

void printArray(double[], int);

int main()
{
    array <double, 5> rainfall;

    rainfall[0] = 2.3;
    rainfall[1] = 0.3;
    rainfall[2] = 0.0;
    rainfall[3] = 4.1;
    rainfall[4] = 0.5;

    printArray(rainfall, 5);

    return 0;
}

void printArray(double array[], int size)
{
    for(int i = 0; i < size; i++)
    {
        cout << array[i] << " | ";
    }
} 
```

使用非 c++11 数组，例如`double rainfall[5]`这样可以正常工作，但`array <double, 5> rainfall`出现错误，显示`cannot convert 'std::array<double, 5u>' to 'double*' for argument '1' to 'void printArray(double*, int)` 我正在关注的视频使用相同的代码，但没有收到此错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T18:41:58.220

如您所见，在您使用的视频中，该人使用了一个静态的 c 样式数组，该数组可以隐式转换为 T* 但是您使用的是 c++11 数组，该数组没有隐式转换为静态数组. 虽然，C++11 的数组类具有方法数据，可让您直接访问基础数据，这将在您的情况下进行。

但在这种情况下，如果你想在 c++11 数组中使用该函数，你可以像这样进行重载：

`template <typename T, size_t Size> void printArray(const std::array<T, Size>& arr);`

这适用于任何尺寸，您不需要为尺寸传递另一个（不需要的）参数；）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T18:21:11.987

你可以传递`rainfall.data()`给函数。An`std::array<T, N>`不能隐式转换为`T[N]`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T18:25:01.827

或者您可以将函数定义为

```
void printArray (const array <double, 5>& myarray, int size) 
```

# python - Python 全局函数，如“打印”

> ID：15771393
> 
> 赞同：2
> 
> 时间：2013-04-02T18:19:14.257
> 
> 标签：python, c, function, global

我希望在 python 3.3 中创建一个全局函数，例如 print 函数。特别是我们在自己的应用程序中嵌入了 python，我们希望公开一个简单的“调试（值）”全局函数，可用于任何脚本。我们可以通过将函数附加到模块来做到这一点，但是，为了方便起见，它更容易像 'print(value)' 那样是全局的。

您如何声明一个全局函数，该函数可用于任何没有导入的 python 文件，或者这是 python 中的黑盒？是否可以从 C 端绑定？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T18:24:10.377

这几乎总是一个坏主意，但如果你真的想这样做……</p>

如果您打印出或以其他方式检查该`print`功能，您会看到它在模块中[`builtins`](http://docs.python.org/3/library/builtins.html)。那是你的线索。所以，你可以这样做：

调试模块.py：

```
import builtins
builtins.debug = debug 
```

现在，在 之后`import debugmodule`，任何其他模块都可以调用`debug`而不是`debugmodule.debug`.

* * *

> 是否可以从 C 端绑定？

在 CPython 中，C 扩展模块基本上可以做与纯 Python 模块相同的事情。或者，更简单地说，用`_debugmodule.so`C 编写 a，然后将 a`debugmodule.py`导入并复制`debug`到`builtins`.

如果您要嵌入 CPython，您可以通过在启动脚本/交互式 shell/其他任何东西之前将函数注入`builtins`模块来执行此操作，或者在以后的任何时间。

* * *

虽然这肯定有效，但并不完全清楚这是否真的*保证*有效。如果您阅读[文档](http://docs.python.org/3/library/builtins.html)，它会说：

> 作为实现细节，大多数模块都将名称`__builtins__`作为其全局变量的一部分提供。的值`__builtins__`通常是此模块或此模块`__dict__`属性的值。由于这是一个实现细节，因此 Python 的替代实现可能不会使用它。

而且，至少在 CPython 中，实际上是`__builtins__`作为查找链的一部分被搜索的模块或字典，而不是`builtins`模块。因此，另一个实现可能会`__builtins__`像 CPython 那样在 中查找内容，但同时不会使`builtins`（或用户对其进行修改）在 中自动可用`__builtins__`，在这种情况下，这是行不通的。（由于 CPython 是迄今为止唯一可用的 3.x 实现，因此很难推测……）

如果这在未来的 Python 3.x 实现中不起作用，我能想到的唯一选择是将你的函数注入每个模块，而不是内置函数。您可以使用[PEP-302](http://www.python.org/dev/peps/pep-0302/)导入挂钩来做到这一点（这在 3.3 中比编写 PEP 302 时要容易得多……阅读[导入系统](http://docs.python.org/3.3/reference/import.html)了解详细信息）。

* * *

在 2.x 中，没有`builtins`自动将东西注入到魔术模块`__builtins__`中的模块，而是只有一个魔术模块`__builtin__`（注意缺少`s`）。您可能需要也可能不需要`import`（为了安全起见，您也可以这样做）。你可能会也可能不会改变它。但它（至少）适用于 CPython 和 PyPy。

* * *

那么，*正确*的做法是什么？简单：而不是`import debugmodule`, 只是`from debugmodule import debug`在所有其他模块中。这样，它最终成为每个需要它的模块中的模块级全局。

# javascript - 创建圆形鼠标悬停饱和效果

> ID：15771396
> 
> 赞同：4
> 
> 时间：2013-04-02T18:19:23.790
> 
> 标签：javascript, jquery, css, animation, mouseover

我有两个版本的图像：去饱和版本和全彩版本。我想要完成的是悬停效果，其中将鼠标悬停在去饱和图像上会显示图像彩色版本的圆圈。这有点像将聚光灯照射在去饱和图像上以显示其颜色。然后，当您将鼠标移开时，它会逐渐恢复到去饱和状态。

我知道我可能会使用 flash，但我想用 JavaScript 和 CSS 来做这件事。理想情况下，如果禁用 JavaScript 并且宽度可能是流动的（响应式），这将降级为仅图像。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T02:00:35.417

## 边界半径

CSS3`border-radius`可用于创建带有背景图像的圆形 div，用作图像聚光灯。聚光灯可以覆盖在主图像之上，并根据鼠标坐标定位。[JSFiddle 演示](http://jsfiddle.net/CkJXJ/3/)

尽管在 CSS3 中没有自然的方式来柔化聚光灯的边缘——这需要支持向任意内容添加不透明度渐变——但可以使用一组交错的元素来模拟，这些元素具有增加的半径和降低的不透明度。[更新了带有软化边缘的演示](http://jsfiddle.net/ga2D2/3/)

在[更新的演示](http://jsfiddle.net/ga2D2/3/)中，聚光灯的大小和柔和度可以使用以下变量进行调整：

```
var spotlightDiameter = 150;      // Base size (not including the soft edge)
var numSpotlightLayers = 6;       // More layers = softer edges
var spotlightLayerThickness = 2;  // Thinner = the softening is more subtle 
```

这是一个[修改后的演示](http://jsfiddle.net/bu7rd/)，其中聚光灯有明显的涟漪。增加了层的厚度，以更清楚地显示它是如何工作的。

下面是带有锐边的初始版本的代码的简化版本。

**HTML**

```
<div class="content">
    <div class="spotlight"></div>
</div> 
```

**CSS**

```
.content {
    position: relative;
    width: 640px;
    height: 480px;
    background: url(desaturated.jpg) no-repeat 0 0;
    overflow: hidden;
}
.spotlight {
    display: none;
    position: absolute;
    background: url(overly_saturated.jpg) no-repeat 0 0;
} 
```

**jQuery**

```
var spotlightDiameter = 150;

// Update the spotlight position on mousemove
$('.content').on('mousemove', function(e){
    var center = {x: e.pageX - this.offsetLeft,
                  y: e.pageY - this.offsetTop};
    var x = center.x - (spotlightDiameter >> 1);
    var y = center.y - (spotlightDiameter >> 1);

    $('.spotlight').css({left: x + 'px', top: y + 'px',
                         backgroundPosition: -x + 'px ' + -y + 'px'}).show();
});

// Hide the spotlight on mouseout
$('.content').on('mouseout', function(e){
    $('.spotlight').hide();
});

// Initialize the spotlight
$(document).ready(function(){
    $('.spotlight').width(spotlightDiameter + 'px')
                   .height(spotlightDiameter + 'px')
                   .css({borderRadius: (spotlightDiameter >> 1) + 'px'});
}); 
```

## 替代实现

这也可以使用 HTML5 Canvas 或 SVG 来实现。下面是不同方法的浏览器支持比较：

*   `border-radius`[: IE8 或更早版本](http://caniuse.com/#search=border-radius)不支持。
*   [HTML5 Canvas： IE8 或更早版本](http://caniuse.com/#search=canvas)不支持。
*   SVG：不支持[IE8 或更早版本](http://caniuse.com/#search=svg)，或者[Android 2.3 或更早版本](http://caniuse.com/#search=svg)（这仍然是大部分[Android 市场份额](http://developer.android.com/about/dashboards/index.html)）。

简而言之，IE8 和更早版本不是这些方法中的任何一个选项，如果需要 Android 支持，则将选择限制为`border-radius`HTML5 Canvas。当然，由于这是基于鼠标的，Android 支持可能不是一个因素。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-02T18:53:27.787

`<image>`使用两个完全重叠的SVG元素。底部是灰度图像。顶部是彩色图像。将 a`clipPath`应用于彩色图像，然后调整剪切路径上的变换以显示上部图像的不同区域。

## 简单演示：http: [//jsfiddle.net/hZgkz/](http://jsfiddle.net/hZgkz/)

SVG：

```
<svg xmlns="http://www.w3.org/2000/svg" width="200px" height="250px">
  <defs>
    <image id="im" width="500" height="500"
     xlink:href="http://www.nyweamet.org/wp-content/uploads/2011/09/0942a__grandCentralStationExterior.jpg"/>
    <clipPath id="clip">
      <path id="path" transform="translate(40,60)"
            d="M60,0 A30,30 1,0,0 60,120 30,30 1,0,0, 60,0"/>
    </clipPath>
  </defs>
  <use id="clippedImage" xlink:href="#im" clip-path="url(#clip)"/>
</svg> 
```

和移动圆圈的 JavaScript：

```
var tx = document.querySelector('#path').transform.baseVal.getItem(0);
setInterval(function(){
  var ms = (new Date)*1;
  tx.matrix.e = Math.sin(ms/812)*150 + 160;
  tx.matrix.f = Math.cos(ms/437)*60 + 70;
},50); 
```

您所要做的就是跟踪鼠标移动并将翻译设置到正确的位置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T19:21:55.140

如果我正确理解了您的要求，您可以使用一些 CSS 来实现结果。我在这里准备了一个小小提琴作为演示：http: [//jsfiddle.net/sandro_paganotti/k3AmZ/](http://jsfiddle.net/sandro_paganotti/k3AmZ/)

这是涉及的代码：

## HTML

```
<figure data-desaturated></figure>
<figure data-original></figure> 
```

## CSS

```
figure{ width: 550px; height: 360px;
        position: absolute; top: 0; left: 0;
        margin: 0; padding: 0; 
        background-position: 50% 50%;
        background-repeat: no-repeat;
        background-image: url('yourimage.png');

}

figure[data-desaturated]{
    /* I've used CSS filters tu simulate desaturation, you can use your already desaturated image */
    -webkit-filter: grayscale(0.9);
}

figure[data-original]{
    width: 360px;
    left: 95px;
    border-radius: 180px;
    opacity: 0;
    transition: opacity 0.4s;
}

figure[data-desaturated]:hover + figure[data-original],
figure[data-original]:hover{
    opacity: 1;
} 
```

我还添加了一个`transition`来增强体验。

# 更新

跟随鼠标移动的版本：http: [//jsfiddle.net/sandro_paganotti/k3AmZ/3/](http://jsfiddle.net/sandro_paganotti/k3AmZ/3/)

# java - 如何获取要在 ArrayList.set() 方法中使用的二维数组列表的索引？

> ID：15771398
> 
> 赞同：0
> 
> 时间：2013-04-02T18:19:32.070
> 
> 标签：java, arraylist

`set`我有一个 2D ArrayList，我想通过使用该方法将其中一个元素替换为其他元素。

根据Java API：

```
set(int index, E Element) 
```

是构造函数。鉴于 ArrayList 是二维的，如何输入索引？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T18:20:22.967

如果你有一个二维的`ArrayList`，那么你需要做的是

```
outerList.get(x).set(y, newValueAtXY); 
```

...它获取索引处的行`x`并将该行中的元素设置`y`为`newValueAtXY`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:33:34.930

我在搜索时遇到了这个：

```
array.get(i1).put(i2, value); 
```

我认为，可以这样修改：

```
array.get(i1).set(i2, value); 
```

我希望它有效。

# internet-explorer - 我们收到大量来自 IE9 的 /scanImageUrl 请求

> ID：15771399
> 
> 赞同：4
> 
> 时间：2013-04-02T18:19:36.163
> 
> 标签：internet-explorer, iis, browser, request

这些请求都是来自 Internet Exploder 9 并打开了兼容模式。我们知道兼容性模式已打开，因为 trident 属性在用户代理字符串中发送。

这是最近才开始的。

这些是合法用户，而不是机器人，我们已经确定了这一点。我们无法重现这个问题。

这是一个新的谷歌搜索结果，似乎其他人也有同样的问题。 [http://www.webmasterworld.com/webmaster/4560505.htm#msg4560681](http://www.webmasterworld.com/webmaster/4560505.htm#msg4560681)

帮助赞赏！

谢谢

# php - 试图删除某行以上的所有内容

> ID：15771400
> 
> 赞同：2
> 
> 时间：2013-04-02T18:19:39.633
> 
> 标签：php, regex, preg-replace

假设我有以下字符串：

```
$str = 'Bag Attributes
    localKeyID: 28 B5 8E 16 11 88 E9 00 58 D5 76 30 12 B9 59 B8 E4 CE 7C AA
subject=/C=UK/ST=Suffolk/L=Ipswich/O=Example plc/CN=alice
issuer=/C=UK/ST=Suffolk/L=Ipswich/O=Example plc/CN=Certificate Authority/emailAddress=ca@example.com
-----BEGIN CERTIFICATE-----
MIIDDzCCAfegAwIBAgIJAMkyzQVK88NHMA0GCSqGSIb3DQEBBQUAMIGCMQswCQYD
VQQGEwJTRTESMBAGA1UECBMJU3RvY2tob2xtMQ4wDAYDVQQHEwVLaXN0YTEQMA4G
[...]
0fbkqbKulrchGbNgkankZtEVg4PGjo+Y8MdMjtfSZB29hwYvfMX09jzJ68ZqmpYQ
njvcVtLbEZN5OGCkaslb/f2OxLbsUNgIbws538WnaaufDvKmQe2kUdWmpl9Wn9Bf
bZq7B+njvcVa7SsWF/WLq5AUbw==
-----END CERTIFICATE-----'; 
```

我想删除上面的所有内容（可能包括），`-----BEGIN CERTIFICATE-----`但是我一生都无法弄清楚如何做到这一点。请注意，它并不总是如此`-----BEGIN CERTIFICATE-----`。它可能是`--BEGIN CERTIFICATE--`（两边都有两个-），也可能是`-----BEGIN RSA PRIVATE KEY-----`类似的东西。

无论如何，这是我尝试过的：

1.  `echo preg_replace('#.*?-+[^\r\n]-+#s', '', $str);`

    `-+[^\r\n]-+`与上述匹配`-----BEGIN CERTIFICATE-----`，我试图将每个字符与 .*? 但它不起作用。它停在`-----END CERTIFICATE-----`not at the `-----BEGIN CERTIFICATE-----`。

2.  `echo preg_replace('#.*?-+[^\r\n]-+#s', '', $str);`

    和以前一样。即使？，在这种情况下，应该改变贪婪，它实际上似乎并没有真正做任何事情。

    IE。我正在尝试将每个字符匹配到

3.  `echo preg_replace('#[.\r\n]*?-+.+-+#', '', $str);`

    在这里，我试图匹配每个字符，包括`-+.+-+`. 我可以这样做`.`，`[^\r\n]`因为我没有使用 s 修饰符，但它在这里也不起作用。相反，它只是匹配`-+.+-+`部分，就好像`[.\r\n]*?`没有退出一样。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:28:50.720

使用[preg_match()](http://php.net/manual/en/function.preg-match.php)：

```
$str = 'Bag Attributes
    localKeyID: 28 B5 8E 16 11 88 E9 00 58 D5 76 30 12 B9 59 B8 E4 CE 7C AA
subject=/C=UK/ST=Suffolk/L=Ipswich/O=Example plc/CN=alice
issuer=/C=UK/ST=Suffolk/L=Ipswich/O=Example plc/CN=Certificate Authority/emailAddress=ca@example.com
-----BEGIN CERTIFICATE-----
MIIDDzCCAfegAwIBAgIJAMkyzQVK88NHMA0GCSqGSIb3DQEBBQUAMIGCMQswCQYD
VQQGEwJTRTESMBAGA1UECBMJU3RvY2tob2xtMQ4wDAYDVQQHEwVLaXN0YTEQMA4G
[...]
0fbkqbKulrchGbNgkankZtEVg4PGjo+Y8MdMjtfSZB29hwYvfMX09jzJ68ZqmpYQ
njvcVtLbEZN5OGCkaslb/f2OxLbsUNgIbws538WnaaufDvKmQe2kUdWmpl9Wn9Bf
bZq7B+njvcVa7SsWF/WLq5AUbw==
-----END CERTIFICATE-----';

preg_match('/(?P<begin>-+[^-]+-+)(?P<body>.*?)(?P<end>-+[^-]+-+)/s', $str, $m);

echo 'begin: '. $m['begin'] .'<br>body: '.$m['body'].'<br> end: '. $m['end']; 
```

一些解释：

**(?P`<begin>`** => 开始命名组

**-+** => 匹配“-”之一或更多

**[^-]+** => 匹配每个字符直到找到“-”

**-+** => 匹配“-”之一或更多

**)** => 结束组

**/s** => 设置了 s 修饰符，因此模式中的点元字符匹配所有字符，**包括换行符**

* * *

这是一个 preg_replace() 解决方案：

`$str = preg_replace('/.*?(-+[^-]+-+.*?-+[^-]+-+)/s', '$1', $str);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:27:22.277

```
$pre = ';.*-+BEGIN CERTIFICATE-+';
$post = '-+END CERTIFICATE-+';
$out = preg_replace('/' . $pre . '(.*)' . $post . '/is', "$1", $str); 
```

您可能希望保留原始字符串...

# vb6 - 确定二进制兼容性被破坏的原因

> ID：15771401
> 
> 赞同：6
> 
> 时间：2013-04-02T18:19:40.727
> 
> 标签：vb6, dll, binary-compatibility

当我尝试重建我的一个 VB6 DLL 时，我收到一个警告：

> “二进制兼容性 DLL 或 EXE 包含无法找到其定义的参数类型或返回类型”

我必须在选定的 DLL 中发布一些更改（方法内部的简单更改 - 根据[此](http://msdn.microsoft.com/en-us/library/aa733706%28v=VS.60%29.aspx)没有破坏兼容性）

我遵循的普遍接受的方法是将旧的 DLL 维护在一个单独的共享目录中，并在制作新的 DLL 时，将它们编译为设置为旧的 DLL 集的二进制兼容性。这样做是为了在我注册新的 DLL 时不更改 GUID。这些 GUID 用作其他 DLL 中的引用，我在发布期间没有干扰这些 DLL。

**我很确定我没有添加任何东西来破坏二进制兼容性规则（签名、公共方法、变量等没有变化）为什么会发生这个错误？**

我是不是因为不检查一些基本的东西而成为菜鸟？从早上开始就挠头。任何帮助深表感谢。

编辑：如果我的签名有任何更改，有没有一种方法可以在不比较代码的情况下知道？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T06:15:20.870

获取您的旧 DLL 并`compat_`为其添加前缀。

基本上将您的`MyAppDataAccess.dll`文件重命名为`compat_MyAppDataAccess.dll`.

现在转到您的 ActiveX DLL 的属性并将您的项目设置为与新的二进制兼容性`compat_MyAppDataAccess.dll`，如下所示。

现在只需构建您的 DLL 并部署它。

它应该工作。如果实际上您的二​​进制兼容性会因您的更改而被破坏，那么您将收到一条警告说明。

![在此处输入图像描述](https://i.stack.imgur.com/jpn4b.jpg)

# java - 带列表的原始类型 给出编译错误

> ID：15771406
> 
> 赞同：1
> 
> 时间：2013-04-02T18:19:54.390
> 
> 标签：java, generics, compiler-construction, intellij-idea

我有以下通用类：

```
import java.util.ArrayList;
import java.util.List;

public class GenericRaw<T> {
    public List<String> get() {
         return new ArrayList<>();
    }
} 
```

让我们考虑一下它的使用情况：

```
public class Usage {
    public void doSomething() {
        GenericRaw base = new GenericRaw();
        for (String x : base.get()) {   }
    }
} 
```

对于此代码，Idea 不会给出任何编译错误，但 Java 编译器本身会：

> java：需要不兼容的类型：java.lang.String 找到：java.lang.Object

**可在 JDK 1.6.0_33 和 JDK 1.7.0_17 上重现。**

有人可以帮我解释这个问题吗？

我的调查结果。可以成功编译以下变体：

> ```
> public void doSomething() {
>     GenericRaw<?> base = new GenericRaw();
>     for (String x : base.get()) {   }
> } 
> ```

甚至：

> ```
> public void doSomething() {
>     GenericRaw base = new GenericRaw();
>     List<String> list = base.get();
>     for (String x : list) {   }
> } 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T18:22:47.067

> 有人可以帮我解释这个问题吗？

当然。它遵循 JLS 在[第 4.8 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.8)中对原始类型的描述：

> 为了方便与非通用遗留代码的接口，可以使用参数化类型（§4.5）的擦除（§4.6）或元素类型为参数化类型的数组类型（§10.1）的擦除作为类型. 这种类型称为原始类型。

的[擦除](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.6)是`GenericRaw<T>`：

```
public class GenericRaw {
    public List get() { ... }
} 
```

因为：

> 类型擦除还将构造函数或方法的签名（第 8.4.2 节）映射到没有参数化类型或类型变量的签名。构造函数或方法签名 s 的擦除是由与 s 相同的名称和 s 中给出的所有形式参数类型的擦除组成的签名。
> 
> 如果构造函数或方法的签名被擦除，构造函数或方法的类型参数（第 8.4.4 节）和方法的返回类型（第 8.4.5 节）也会被擦除。

# objective-c - 如何从另一个类访问 SpriteBatchNode？cocos2d

> ID：15771410
> 
> 赞同：0
> 
> 时间：2013-04-02T18:20:12.733
> 
> 标签：objective-c, cocos2d-iphone

我无法让我的精灵批处理节点工作，部分原因是我不完全理解这个概念。SpriteFrameCache 是共享的，这使其易于访问，但 SpriteBatchNode 不是，所以我不知道从另一个类访问它的最佳方法。

我在我的主 GameplayLayer.m 中将我的精灵批处理节点设置为实例变量：

```
[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"MyTexture.plist"];
spriteBatchNode = [CCSpriteBatchNode batchNodeWithFile:@"MyTexture.png"]; 
```

但是后来我有一个 Monster 类，在类中设置了动画，但是精灵在我的 GameplayLayer 类中创建的纹理中：

```
CCAnimation *walkAnim = [CCAnimation animation];
[walkAnim addSpriteFrame:[spriteFrameCache spriteFrameByName:@"monster-sprite-walk0.png"]];
//some other code
self.monsterWalkAnimation = [CCRepeatForever actionWithAction:walkAnimationAction]; 
```

这不起作用，我猜是因为它不知道纹理在哪里。访问该精灵批处理节点的最佳方法是什么，或者我是否设置错了？

# c# - RavenDB 慢读

> ID：15771417
> 
> 赞同：0
> 
> 时间：2013-04-02T18:20:33.013
> 
> 标签：c#, .net, database, ravendb

我正在使用 RavenDB，但我注意到我的数据库在读取时非常慢。这是我查询数据库的方式：

```
 IEnumerable<Reduced> items;
        Filter filter = (Filter)Filter;

        var watch = Stopwatch.StartNew();
        using (var session = documentStore.OpenSession())
        {

            var query = session.Query<eBayItem,eBayItemIndexer>().Where(y => y.Price <= filter.MaxPrice && y.Price >= filter.MinPrice); 
            query = filter.Keywords.ToArray()
            .Aggregate(query, (q, term) =>
                q.Search(xx => xx.Title, term, options: SearchOptions.And));
           if (filter.ExcludedKeywords.Count > 0)
            {
                query = filter.ExcludedKeywords.ToArray().Aggregate(query, (q, exterm) =>
                q.Search(it => it.Title, exterm, options: SearchOptions.Not));
            }
           items = query.AsProjection<Reduced>().ToList();
           Console.WriteLine("Query: " + query.ToString());
           Console.WriteLine("Results: " + items.Count());
        }
        watch.Stop();
        Console.WriteLine("Query time: " + watch.Elapsed.Milliseconds + " ms");
        return items; 
```

**输出：**

*   查询： Price_Range:[* TO Dx600] AND Price_Range:[Dx400 TO NULL] AND Title:(Canon) AND Title:(MP) AND Title:(Black) -Title:(G1) -Title:(T3)
*   结果：3
*   查询时间：365 毫秒

**索引：**

```
public class eBayItemIndexer : AbstractIndexCreationTask<eBayItem>
{
    public eBayItemIndexer()
    {
        Map = contentItems =>
            from contentItem in contentItems
            select new { contentItem.Title, contentItem.Price };

        Index(x => x.Title, FieldIndexing.Analyzed);
        Index(x => x.Price, FieldIndexing.Analyzed);

        TransformResults = (database, items) =>
            from contentItem in items
            select new { contentItem.Id };
    }
} 
```

**初始化：**

```
 documentStore = new EmbeddableDocumentStore() { DataDirectory = "test.db" };
        documentStore.Initialize();
        IndexCreation.CreateIndexes(typeof(eBayItemIndexer).Assembly, documentStore);
        documentStore.Configuration.TransactionMode = Raven.Abstractions.Data.TransactionMode.Lazy;
        documentStore.Configuration.AllowLocalAccessWithoutAuthorization = true; 
```

他们的代码有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:52:54.403

`EmbeddableDocumentStore`可能是问题所在。更准确地说，看起来您正在初始化商店，然后立即调用查询。索引上的前几个查询总是会慢一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-21T04:23:13.940

我遇到了类似的问题，我使用的是专用服务器（非嵌入式）。我发现的问题是我在查询时初始化文档存储，而不是事先在应用程序加载时初始化。

如果在本机程序上运行，请在启动过程中初始化文档存储并将其保持为单例，直到您要关闭程序。您只需要一个文档存储，但您应该为每个原子操作创建一个新会话。

如果您在 Web 应用程序中运行它，请在您选择的依赖注入容器中将应用程序启动时的文档存储注册为单例范围。

这些选项中的任何一个都将提前初始化文档存储并使其保持打开状态。然后，您只需为每个查询打开一个会话。当通过一个通用 Guid 从 200 万条记录中查询大约 300 条记录时，我从 2+ 秒到大约 150 毫秒。如果你有一个较小的数据库，这个数字应该会显着下降。

# ios - 通过 iOS 登录 Facebook

> ID：15771418
> 
> 赞同：0
> 
> 时间：2013-04-02T18:20:33.550
> 
> 标签：ios, facebook

我最近在将 Facebook 集成到我的应用程序时遇到了问题。

我希望应用程序能够要求用户在每次连接到 Facebook 时输入他们的用户名和密码，我尝试了 Facebook SDK“切换用户”中的示例，但在集成方面仍然存在一些问题该功能进入我的应用程序。

谁能帮帮我？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:38:03.240

使用 FBLoginView 它将显示一个用于使用 FBSDK 登录的登录按钮，并在您的产品中注销功能期间，编写以下内容：`[FBSession.activeSession closeAndClearTokenInformation];`然后将 FBLoginView 浸入，以便它允许用户重新登录您的产品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:58:40.407

谢谢回答我的问题。我终于通过创建一个按钮并添加一个 IBAction 来执行登录/注销解决了这个问题，当用户尝试登录时，我使用 FBSessionBehaviorForcingWebView 打开会话，这将允许不同的用户登录，因为它询问用户每次都输入电子邮件和密码。

# javascript - 如何在复选框或单选上执行 jQuery 触发器，使其与用户单击它时完全相同？

> ID：15771421
> 
> 赞同：-1
> 
> 时间：2013-04-02T18:20:43.033
> 
> 标签：javascript, jquery

我有一个使用 can.js 的页面，因此很难在 jsfiddle.net 上重现，但最终结果是这样的：

如果我单击复选框（或者它也可以是单选按钮），那么另一个`input`文本框将更新由于我的单击而导致的更改。（例如，文本框现在将显示“蓝色”）。

但是，如果我在 Firebug 的控制台或 Chrome 的开发人员工具控制台中以编程方式使用 jQuery：

```
$("#some-form input:eq(3)").trigger("click"); 
```

或者

```
 $("#some-form input:eq(3)").click(); 
```

那么网页上的复选框实际上会被选中，但`input`文本框的值不会像以前那样更新为“蓝色”。

因此，为了更接近地模拟用户使用代码单击复选框，我尝试了：

```
$("#some-form input:eq(3)").trigger("focus");
$("#some-form input:eq(3)").trigger("mousedown");
$("#some-form input:eq(3)").trigger("mouseup");
$("#some-form input:eq(3)").trigger("click");
$("#some-form input:eq(3)").trigger("change"); 
```

但以上所有内容仍然不会模拟用户手动单击复选框。

尽管 can.js 代码使用 can.compute() 或 can.Observe() 来更新该`input`文本框可能很复杂，但关键是，如果用户手动单击收音机或复选框可以工作，为什么不以编程方式。换句话说，可以通过编程完成哪些几乎与实际物理点击相同的操作？是否有一些我可能错过的事件？

（更多详细信息：这是在最新的 Firefox 和 Chrome 上尝试过的，所以它不应该是浏览器问题。另外，我什至尝试过先聚焦，然后用空格字符触发 keydown 事件，但仍然没有效果. 更奇怪的是，如果我真的触发了**两次**点击，那么`input`文本框实际上显示更新为“蓝色”，那为什么两次？）。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-02T23:40:40.763

答案是，这是由于一个 jQuery 错误：

[http://bugs.jquery.com/ticket/3827](http://bugs.jquery.com/ticket/3827)

我可以使用以下方法重现它：

```
// strange behavior:
$("#some-form input:eq(3)").click(); 
```

如果被本地人替换`click`：

```
document.getElementById("some-form").getElementsByTagName("input")[3].click(); 
```

那么它可以在 Chrome、Safari 和 Firefox 上完美运行。

所以修复似乎是在 2013 年 1 月 15 日的 jQuery 1.9 中发布的。

有更多信息：[在 jQuery 中，为什么在触发单击未选中的复选框后，事件处理程序报告它未选中？](https://stackoverflow.com/questions/15778985/in-jquery-why-after-a-trigger-of-click-on-an-unchecked-checkbox-the-event-hand)

# python - BeautifulSoup 4、findNext()函数

> ID：15771424
> 
> 赞同：9
> 
> 时间：2013-04-02T18:20:52.867
> 
> 标签：python, python-2.7, beautifulsoup

我正在玩 BeautifulSoup 4，我有这个 html 代码：

```
</tr>
          <tr>
<td id="freistoesse">Giraffe</td>
<td>14</td>
<td>7</td>
</tr> 
```

我想匹配`<td>`标签之间的两个值，所以这里是 14 和 7。

我试过这个：

```
giraffe = soup.find(text='Giraffe').findNext('td').text 
```

但这仅匹配`14`。如何将这两个值与此函数匹配？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-02T18:22:53.943

使用`find_all`代替`findNext`：

```
import bs4 as bs
content = '''\
<tr>
<td id="freistoesse">Giraffe</td>
<td>14</td>
<td>7</td>
</tr>'''
soup = bs.BeautifulSoup(content)

for td in soup.find('td', text='Giraffe').parent.find_all('td'):
    print(td.text) 
```

产量

```
Giraffe
14
7 
```

* * *

或者，您可以使用`find_next_siblings`（也称为`fetchNextSiblings`）：

```
for td in soup.find(text='Giraffe').parent.find_next_siblings():
    print(td.text) 
```

产量

```
14
7 
```

* * *

**解释：**

请注意，它`soup.find(text='Giraffe')`返回一个 NavigableString。

```
In [30]: soup.find(text='Giraffe')
Out[30]: u'Giraffe' 
```

要获取关联的`td`标签，请使用

```
In [31]: soup.find('td', text='Giraffe')
Out[31]: <td id="freistoesse">Giraffe</td> 
```

或者

```
In [32]: soup.find(text='Giraffe').parent
Out[32]: <td id="freistoesse">Giraffe</td> 
```

获得`td`标签后，您可以使用`find_next_siblings`：

```
In [35]: soup.find(text='Giraffe').parent.find_next_siblings()
Out[35]: [<td>14</td>, <td>7</td>] 
```

* * *

PS。BeautifulSoup 添加了使用下划线而不是 CamelCase 的方法名称。他们做同样的事情，但符合 PEP8 风格指南的建议。因此，更`find_next_siblings`喜欢`fetchNextSiblings`.

# c++ - 计算结构向量中的匹配项

> ID：15771434
> 
> 赞同：3
> 
> 时间：2013-04-02T18:21:12.910
> 
> 标签：c++, arrays, vector, iterator, std

我有一个问题，需要我计算此数组中使用`std::count()`或的实例数`std::find()`。我知道如何使用标准数据（见底部代码）类型来做到这一点，但不是`NameContainer`我正在使用的。

```
//Type
struct NameContainer{
    char name [32];
}

//An array of containers
NameContainer *_storedNames = new NameContainer[_numberOfNames];

//An example of what I'm trying to do with a string rather than the NameContainer
std::vector<string> v(_storedNames, _storedNames + _numberOfNames);
//returns an numeric value
return std::count(v.begin(), v.end(), nameToSearch)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:30:52.910

例如，您可以使用`count_if`并提供谓词（接受范围内的元素作为参数并返回可转换为 bool 的值的一元函数）

```
bool myPred(NameContainer n){
  return (strcmp(n.name, "name") == 0); }

std::vector<NameContainer> v(_storedNames, _storedNames + _numberOfNames);

int i=std::count_if(v.begin(), v.end(), myPred)) 
```

您可以`strcmp()`用来比较字符数组。

如果只使用`std::count`or `std::find`：

在您的情况下，count 和 find 都采用与容器类型相同的类型参数进行比较`NameContainer`。`std::count`将执行以下操作来比较搜索的值：

```
if (*first == val) 
```

什么意味着你必须重载`operator==`你的类作为参数。

```
inline bool operator == (const NameContainer &first,const NameContainer &second){
        return (strcmp(first.name,second.name)==0);
    } 
```

然后调用`std::count(v.begin(), v.end(), myObjectPredicate))` myObjectPredicate 作为您的 NameContainer 类对象，其名称将在向量中搜索。

所以这是可行的解决方案。您可以详细改进它：

```
struct NameContainer{
char name [32];
};

inline bool operator== (const NameContainer &first,const NameContainer &second){
        return (strcmp(first.name,second.name)==0);
    }

int main(int argc, char** argv) {

    NameContainer* _storedNames = new NameContainer[1];
    std::vector<NameContainer> vn(_storedNames, _storedNames + 1);

    const char* cc="piotr";
    NameContainer nc;
    memcpy(nc.name,cc,strlen(cc)+1);
    vn.push_back(nc);

    NameContainer myObjectPredicate;
    memcpy(myObjectPredicate.name,cc,strlen(cc)+1);

    int count=std::count(vn.begin(), vn.end(), myObjectPredicate);
    std::cout<<count;

    return 2400;
} 
```

输出：

> 1

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T18:49:13.477

您可以使用函子

```
struct names_equal {
    string comp_to;

    names_equal(string a) : comp_to(a) {}

    bool operator()(NameContainer& p) {
        return p.name == comp_to;
    }
}; 
```

数像

```
cout << std::count_if(v.begin(), v.end(), names_equal(nameToSearch)); 
```

这种方式`nameToSearch`不必硬编码。

* * *

**编辑**

如果不能使用`count_if`, 则必须`count`为它修改 NameContainer 和重载 == 。

```
struct NameContainer{
    string name;

    bool operator==(string str) {
        return name == str;
    }
}; 
```

然后这样数

```
cout << std::count(v.begin(), v.end(), nameToSearch); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T18:23:47.630

阅读 std::count 上的文档，您会发现它使用 operator== 进行比较。因此，如果你想使用 std::count，你想比较的东西必须有一个 operator== 为它定义。在您的情况下，您可以很容易地将一个添加到您的 NameContainer 中。

# objective-c - iPad iOS 内存管理 - 如何释放 UIImageViews、UIScrollViews 使用的“Real Memory”？

> ID：15771449
> 
> 赞同：6
> 
> 时间：2013-04-02T18:21:51.727
> 
> 标签：objective-c, ipad, memory-management, ios6, calayer

我的一个应用程序出现内存问题，我已将 Instruments> Activity monitor 中定义的“真实内存”确定为可能的罪魁祸首。

我的应用程序**在 UIScrollViews 分配大的 UIImages**。有一个 CIImageFilter 应用于其中一个图像。活动监视器显示，在第一次推送包含带有大图像的滚动视图的视图控制器时，**实际内存使用量跃升至 300mb 左右。**随后的推送/弹出将其提高到大约 500mb：

我读到“实时字节”不计算纹理和 CALayers 使用的内存，所以我的问题是：**如何正确释放我的 Image/Scrollviews 的 CALayers 使用的内存？**

见右侧真实内存使用蓝色饼图：

![在此处输入图像描述](https://i.stack.imgur.com/V3UXh.png)

此进程的真实内存和虚拟内存都是最高的：

![在此处输入图像描述](https://i.stack.imgur.com/WWyii.png)

困扰我的是，当弹出该控制器时，我试图清理我的大滚动视图和图像，“实时字节”的数字下降到大约 5mb，而“真实内存”保持高得离谱（~500 mb） ：

```
ContainerScrollView* container = ...;
[container.view removeFromSuperview];
container.view = nil; 
```

这是分配分析： ![在此处输入图像描述](https://i.stack.imgur.com/tpC0S.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T04:28:14.777

我发现一个人在这里遇到了类似的问题：

[使用 ARC 的神秘 CoreImage 内存泄漏](https://stackoverflow.com/questions/9388742/mysterious-coreimage-memory-leak-using-arc)

答案（我真的希望如此）似乎开始使用`NSData dataWithContentsOfFile:` 然后创建一个`UIImage imageWithData:`. 有用户选择的图像吗？将其写入临时文件并读回。我不相信任何其他图像方法，因为在我 12 小时的测试中，它们在 iOS 6.1.2 中对于大图像视图的行为似乎不合理。

# php - PHP - 2 个内容相同但标签不同的页面

> ID：15771452
> 
> 赞同：0
> 
> 时间：2013-04-02T18:22:02.543
> 
> 标签：php, html, seo

我正在涉足 PHP、Wordpress 和一些 HTML5。我做了3个文件；新闻、新闻-IE 和新闻-HTML5。News 检查浏览器类型并根据浏览器是 IE8 或更高版本获取 news-IE (divs) 或 news-HTML5 (HTML5 tags)。这是一个不好的方法吗？这会导致搜索引擎标记为重复内容吗？如果是这样，我认为应该在 robots.txt 中添加一个不允许，对吧？

代码：

```
<?php 
   $IE; 
   if( strstr('/(?i)msie [1-8]/',$_SERVER['HTTP_USER_AGENT']) ) { $IE = 't'; } else { $IE = 'f'; } 
?>
<?php 
   if( $IE == 't' ) { get_template_part("news-IE"); } else { get_template_part("news-HTML5"); } 
```

?>

注意：由于工作场所正在讨论渐进增强，我只是在使用这种方法。我认为这可能是在 IE 中禁用 Javascript 的一个不错的解决方案，这样 div 将代替部分标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:51:22.637

通常忽略代码，搜索引擎只会阅读新闻，而不是新闻-IE 或新闻-HTML5。您可以通过将 robots.txt 文件添加到您的根目录来确保这一点，并确保您为特定文件设置了禁止，例如，如果它们都在您的根目录中，您可以这样做：

```
disallow: /news-HTML5.html
disallow: /news-IE.html 
```

将 .html 替换为这些文件的任何文件扩展名。

# java - HTML页面的大小可以变小吗？

> ID：15771454
> 
> 赞同：-1
> 
> 时间：2013-04-02T18:22:03.707
> 
> 标签：java, android, html

我有大约 1000 多个页面要为 Android 移动应用程序显示，所有这些页面都是 HTML。每个页面的大小约为300KB，是否可以减小它们的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:26:40.520

这样的事情怎么样？[http://htmlcompressor.com/compressor.html](http://htmlcompressor.com/compressor.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:27:41.417

这些文件中是否有一些重复的数据？

也许，您可以将视觉结构与数据分开。

你看过 MVC（模型-视图-控制）架构吗？我认为它可能会在应用程序层之间引入关注点分离。

您可以将您的数据结构组织成 JSON 格式并使用一些 JavaScript 解析以 HTML 表示它吗？

如果您可以部署数据文件并按需交付，在应用程序中使用一些缓存层，您可以使用压缩（gzip、deflate、...）改善客户端/服务器之间的数据传输，并在服务器端安装一些过滤器以获取代码清理（​​mod_pagespeed）和缩小器。它们可以帮助您减少不必要的字符/代码。

# ckeditor - ckEditor 4.1 - 如何删除内联工具提示

> ID：15771455
> 
> 赞同：1
> 
> 时间：2013-04-02T18:22:04.737
> 
> 标签：ckeditor, tooltip

内联编辑器中工具提示的行为在键入或移动光标时非常烦人。：如何删除它或改变它的行为？

我想展示形象但没有足够的声誉。:) [http://ckeditor.com/forums/CKEditor/How-do-I-remove-the-inline-editor-tooltip](http://ckeditor.com/forums/CKEditor/How-do-I-remove-the-inline-editor-tooltip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:25:21.863

[这个问题将在 CKEditor 4.2 中得到解决](https://dev.ckeditor.com/ticket/10042)。如果您希望立即使用建议的解决方案，或者只需等待几周以获得稳定的 4.2，您可以使用建议的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T11:19:57.997

不要放弃，我认为如果您在 CKEDITOR iframe 中找到正确的元素，您可以使用 JQuery 禁用它。

您总是可以尝试一下： [如何使用 jQuery 在浏览器中禁用工具提示？](https://stackoverflow.com/questions/1027762/how-to-disable-tooltip-in-the-browser-with-jquery)

除此之外，它只是编辑器的标题属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T02:48:59.093

显然 ckeditor 团队认为这并不重要或容易实现：

[http://dev.ckeditor.com/ticket/9896](http://dev.ckeditor.com/ticket/9896)

# css - 避免被css覆盖

> ID：15771459
> 
> 赞同：1
> 
> 时间：2013-04-02T18:22:16.707
> 
> 标签：css, wordpress

我创建了一个 UI（用于 wordpress 插件），在该 UI 中，我让用户可以选择在一个`div`（我们称之为`div`，`container`）中添加文本、图像和视频。

我已经为此工作了一段时间。我最近添加了`tinyMCE`（`WYSIWYG`编辑器）在里面添加文本`container`。

现在，我意识到我犯了一个大错误。用户写入的文本被为 wp 管理面板定义的 css 规则覆盖。

例如，

用户输入`<h1>Hello</h1>`（在 tinyMCE 的帮助下），然后我从 tinyMCE 中获取该内容并将其附加到`container`.

但是问题来了，wordpress的admin css可以有这样的css规则，

```
h1 {
 color : #d6d6d6;
 line-height: 40px;
 font-size: 30px;
} 
```

所以，它在 tinyMCE 和我的`container`. （因为 tinyMCE 的代码在里面`iframe`，并且不受 wordpress 的 css 规则的影响，但我`container`没有）

我想要一些东西，这样里面的任何元素都`container`不会受到 wordpress 的管理 css 的影响。

我知道一个好的解决方案是放在`container`里面`iframe`。但是我已经编写了很多代码而没有考虑过`iframe`，我需要 3-4 天来调整所有内容以适应`iframe`. 可能存在一些跨浏览器问题。

我可以重置一些 wordpress 规则，但有时会失败，因为用户可以输入任何内容。我需要一些完全证明的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:50:18.870

在您的 CSS 文档中使用 !important。这样，您的 CSS 就不会被覆盖，因为它优先于所有内容，包括内联样式。

```
h1 {
    color:#ff0 !important;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T18:33:42.310

好吧，如果您想撤消特定规则（例如您提到的 h1 规则），您可以使用 css 通过更具体的方式覆盖它。

```
.container h1 {
    color:#000000;
    line-height: 24px;
    font-size: 24px;
} 
```

这将用给定的值覆盖您提到的 css 规则，但仅当元素位于容器类中时，（我猜测您要使用的默认值。）

不幸的是，您必须为 wordpress 的管理员 css 更改的所有内容添加撤消规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T18:45:46.980

另一种可能的解决方案是编辑 tinyMCE 在其框架中返回的页面以添加到 wordpress 的 CSS 文件中。这意味着最终用户在输入信息时将看到与发布信息时相同的格式。

您是否对 tinyMCE 创建的 iframe 内容具有代码级访问权限？

# sql - 数据库复合PK - 如何适当地制作FK？

> ID：15771462
> 
> 赞同：-3
> 
> 时间：2013-04-02T18:22:20.373
> 
> 标签：sql, database, foreign-keys

我正在做一个 SQL 项目。当我声明外键时，我遇到了一个问题。部分键（属性是主键的一部分）可以是外键吗？

编辑：感谢大家的帮助。我想我刚刚解决了这个问题。但我有一个新问题。如果t1(a, b, c)，t1的主键是(a,b)，那么其他表的FK怎么指向这个表呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:25:20.127

假设您的主键由两个字段（a，b）组成。a 或 b 可以是指向其他表的外键。但是，如果另一个表有一个指向您的表的 FK，则您需要在另一个表中同时包含 (a, b) 的复合 FK。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T18:24:53.230

可能，如果该属性*保证唯一标识主表中的记录。* 但是，如果它满足该保证，那么为什么它没有被用作实际的主键呢？

为了避免很多麻烦，我建议您使用自动生成递增数字的数据类型作为主键，并将该键声明为相关表中的外键。大多数关系数据库已经具有符合此描述的数字类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T18:25:26.363

如果您正在谈论的表是外键的右侧 - 是的。如果复合 PK 表是 FK 的左侧 - 那么另一个表必须与复合键匹配。

如果你有`tbl_1`带有 PK ( `col1`, `col2`) 和`tbl_2`column的表`col3`，你可以有 FK from `tbl_2.col3`to`tbl_1.col2`例如，（只要类型匹配并且`tbl_2.col3`是唯一的）但不是 from `tbl_1.col2`to`tbl_2.col3`

* * *

**编辑**

如果情况是具有`tbl_1`复合 PK 的表 ( ) 应该具有其他表的外键，则您必须使其他表包含所有列，以便它可以形成`tbl_1`PK 的组合，或者更改`tbl_1`PK . 假设`tbl_1.col1`并`tbl_1.col2`形成 PK ，您可以通过对和`tbl_1`进行唯一约束来更改它，并添加您制作 PK 的单个列。`tbl_1.col1``tbl_1.col2``tbl_1.pk`

大多数 ORM 解决方案建议避免使用复合键 - 改为使它们唯一，并使用单个 PK 列 - 通常`integer`或`long/bigint`. 因此，您将更轻松地建立关系，并且单个数字列的 PK 性能会更好。

# ios - UIImageView 在 customView 中返回 nil

> ID：15771468
> 
> 赞同：0
> 
> 时间：2013-04-02T18:22:36.333
> 
> 标签：ios, uiimageview

我创建了一个customView，在customView 里面有一个imageView。当我将控件传递给 customView 并打印出我的 imageView 时，它返回 null。不知道为什么。

。H

```
#import <UIKit/UIKit.h>

@interface GalleryImage : UIView
{
    IBOutlet UIImageView *galleryImageView;
}
- (id)initWithImage:(UIImage*) image;
@property(strong,nonatomic) IBOutlet UIImage *galleryImage;
@end 
```

.m

```
#import "GalleryImage.h"

@implementation GalleryImage

@synthesize galleryImage;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}
- (id)initWithImage:(UIImage*) image
{
    self = [super init];
    if (self) {
        galleryImage = image;
        [galleryImageView setImage:galleryImage];
    }
    return self;
} 
```

以这种方式传递控制：

```
UIImage *infoImage = [UIImage imageNamed:imageName];

GalleryImage *galleryItem = [[GalleryImage alloc] initWithImage:infoImage]; 
```

但我的galleryImageView 返回null。知道为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T18:27:30.253

`galleryImageView`是一个 IBOutlet，它只有在从 nib 加载后才获得内存。init 方法在它之前执行。因此 imageview 没有有效的内存，它返回 null

在里面做

```
awakeFromNib
Prepares the receiver for service after it has been loaded from an Interface Builder archive, or nib file. 
```

所以用这个

```
- (void)awakeFromNib {
        [galleryImageView setImage:galleryImage];
} 
```

# javascript - Mongoose：转换为 ObjectId 的值失败

> ID：15771470
> 
> 赞同：10
> 
> 时间：2013-04-02T18:22:43.360
> 
> 标签：javascript, node.js, mongodb, mongoose, populate

我正在尝试在猫鼬中指定我的数据库的架构。目前我这样做：

```
var Schema = mongoose.Schema;  
var today = new Date(2011, 11, 12, 0, 0, 0, 0);

var personSchema = new Schema({  
   _id : Number,
   name: { type: String, required: true },  
   tel: { type: String, required: true },  
   email: { type: String, required: true },
   newsitems: [{ type: Schema.Types.ObjectId, ref:'NewsItem'}]
});

var taskSchema = new Schema({ 
    _id: Number,
    description: { type: String, required: true },  
    startDate: { type: Date, required: true },
    newsitems: [{ type: Schema.Types.ObjectId, ref:'NewsItem'}]
});

var newsSchema = new Schema({
    _id: Number,
    creator : { type: Schema.Types.ObjectId, ref: 'Person' },
    task : { type: Schema.Types.ObjectId, ref: 'Task' },
    date: { type: Date, required:true },
    loc: {type: String, required: true }  
});

var NewsItem  = mongoose.model('NewsItem', newsSchema);
var Person = mongoose.model('Person', personSchema);
var Task = mongoose.model('Task', taskSchema);

var tony = new Person({_id:0, name: "Tony Stark", tel:"234234234", email:"tony@starkindustries.com" });
var firstTask = new Task({_id:0, description:"Get an interview with the president", startDate:today});
var newsItem1 = new NewsItem({_id:0, creator: tony.id, task: firstTask.id, date: today, loc: "NY"});

newsItem1.save(function (err) {
  if (err) console.log(err);

    firstTask.save(function (err) {
        if (err) console.log(err);
    });

    tony.save(function (err) {
         if (err) console.log(err);
    }); 
});

NewsItem
.findOne({ loc: "NY" })
.populate('creator')
.populate('task')
.exec(function (err, newsitem) {
  if (err) console.log(err)
    console.log('The creator is %s', newsitem.creator.name);
}) 
```

我创建模式并尝试保存一些数据。

错误：

```
{ message: 'Cast to ObjectId failed for value "0" at path "creator"',
  name: 'CastError',
  type: 'ObjectId',
  value: '0',
  path: 'creator' } 
```

我基于以下代码编写了此代码：http: [//mongoosejs.com/docs/populate.html#gsc.tab=0](http://mongoosejs.com/docs/populate.html#gsc.tab=0)

我尝试创建的数据库如下所示：[Specify schema in mongoose](https://stackoverflow.com/questions/15747130/specify-schema-in-mongoose)。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-02T18:52:11.057

您引用的 mongoose 文档中的示例`Number`用于该`personSchema._id`字段和`ObjectId`其他字段。

我认为他们在示例中这样做只是为了证明可以使用其中任何一个。如果未`_id`在架构中指定，`ObjectId`将是默认值。

在这里，您的所有记录都有一个`_id`字段`ObjectId`，但您将它们视为数字。此外，字段 like`personID`和`taskID`不存在，除非您遗漏了定义它们的部分。

如果您确实想对所有`_id`字段使用数字，则必须在模式中定义它。

```
var newsSchema = new Schema({
  _id: Number,
  _creator: {type: ObjectId, ref: "Person"},
  // ...
})

var personSchema = new Schema({
  _id: Number,
  // ...
}) 
```

然后创建具有特定 ID 的新闻项目，并将其分配给创建者：

```
var tony = new Person({_id: 0});
var newsItem = new NewsItem({_id: 0, creator: tony.id}); 
```

但是这里要注意的是，当您使用除字段以外`ObjectId`的其他内容时`_id`，您将自己承担管理这些值的责任。ObjectIds 是自动生成的，不需要额外的管理。

编辑：我还注意到您在关联的两侧都存储了参考。这是完全有效的，有时您可能想要这样做，但请注意，您必须自己将引用存储在`pre`挂钩中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-15T19:15:56.983

# python - 熊猫：按时间间隔滚动平均值

> ID：15771472
> 
> 赞同：103
> 
> 时间：2013-04-02T18:22:45.433
> 
> 标签：python, pandas, time-series, rolling-computation

我有一堆投票数据；我想计算一个 Pandas 滚动平均值，以根据三天的窗口估算每一天。根据[这个问题](https://stackoverflow.com/questions/9762193/pandas-rolling-median-for-duplicate-time-series-data)，`rolling_*`函数根据指定数量的值计算窗口，而不是特定的日期时间范围。

如何实现此功能？

样本输入数据：

```
polls_subset.tail(20)
Out[185]: 
            favorable  unfavorable  other

enddate                                  
2012-10-25       0.48         0.49   0.03
2012-10-25       0.51         0.48   0.02
2012-10-27       0.51         0.47   0.02
2012-10-26       0.56         0.40   0.04
2012-10-28       0.48         0.49   0.04
2012-10-28       0.46         0.46   0.09
2012-10-28       0.48         0.49   0.03
2012-10-28       0.49         0.48   0.03
2012-10-30       0.53         0.45   0.02
2012-11-01       0.49         0.49   0.03
2012-11-01       0.47         0.47   0.05
2012-11-01       0.51         0.45   0.04
2012-11-03       0.49         0.45   0.06
2012-11-04       0.53         0.39   0.00
2012-11-04       0.47         0.44   0.08
2012-11-04       0.49         0.48   0.03
2012-11-04       0.52         0.46   0.01
2012-11-04       0.50         0.47   0.03
2012-11-05       0.51         0.46   0.02
2012-11-07       0.51         0.41   0.00 
```

每个日期的输出只有一行。

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2016-10-07T12:56:29.893

同时，增加了时间窗口功能。请参阅此[链接](https://github.com/pydata/pandas/pull/13513)。

```
In [1]: df = DataFrame({'B': range(5)})

In [2]: df.index = [Timestamp('20130101 09:00:00'),
   ...:             Timestamp('20130101 09:00:02'),
   ...:             Timestamp('20130101 09:00:03'),
   ...:             Timestamp('20130101 09:00:05'),
   ...:             Timestamp('20130101 09:00:06')]

In [3]: df
Out[3]: 
                     B
2013-01-01 09:00:00  0
2013-01-01 09:00:02  1
2013-01-01 09:00:03  2
2013-01-01 09:00:05  3
2013-01-01 09:00:06  4

In [4]: df.rolling(2, min_periods=1).sum()
Out[4]: 
                       B
2013-01-01 09:00:00  0.0
2013-01-01 09:00:02  1.0
2013-01-01 09:00:03  3.0
2013-01-01 09:00:05  5.0
2013-01-01 09:00:06  7.0

In [5]: df.rolling('2s', min_periods=1).sum()
Out[5]: 
                       B
2013-01-01 09:00:00  0.0
2013-01-01 09:00:02  1.0
2013-01-01 09:00:03  3.0
2013-01-01 09:00:05  3.0
2013-01-01 09:00:06  7.0 
```

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2013-04-02T19:03:58.173

像这样的东西怎么样：

首先将数据帧重新采样为 1D 间隔。这取所有重复日期的平均值。使用该`fill_method`选项填写缺失的日期值。接下来，将重新采样的帧传递到`pd.rolling_mean`窗口为 3 和 min_periods=1 ：

```
pd.rolling_mean(df.resample("1D", fill_method="ffill"), window=3, min_periods=1)

            favorable  unfavorable     other
enddate
2012-10-25   0.495000     0.485000  0.025000
2012-10-26   0.527500     0.442500  0.032500
2012-10-27   0.521667     0.451667  0.028333
2012-10-28   0.515833     0.450000  0.035833
2012-10-29   0.488333     0.476667  0.038333
2012-10-30   0.495000     0.470000  0.038333
2012-10-31   0.512500     0.460000  0.029167
2012-11-01   0.516667     0.456667  0.026667
2012-11-02   0.503333     0.463333  0.033333
2012-11-03   0.490000     0.463333  0.046667
2012-11-04   0.494000     0.456000  0.043333
2012-11-05   0.500667     0.452667  0.036667
2012-11-06   0.507333     0.456000  0.023333
2012-11-07   0.510000     0.443333  0.013333 
```

**更新**：正如 Ben 在评论中指出的那样，[使用 pandas 0.18.0 的语法已经改变](http://pandas.pydata.org/pandas-docs/stable/computation.html#window-functions)。使用新语法，这将是：

```
df.resample("1d").sum().fillna(0).rolling(window=3, min_periods=1).mean() 
```

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2013-08-27T13:38:11.130

我只是有同样的问题，但数据点不规则。重采样在这里并不是一个真正的选择。所以我创建了自己的函数。也许它对其他人也有用：

```
from pandas import Series, DataFrame
import pandas as pd
from datetime import datetime, timedelta
import numpy as np

def rolling_mean(data, window, min_periods=1, center=False):
    ''' Function that computes a rolling mean

    Parameters
    ----------
    data : DataFrame or Series
           If a DataFrame is passed, the rolling_mean is computed for all columns.
    window : int or string
             If int is passed, window is the number of observations used for calculating 
             the statistic, as defined by the function pd.rolling_mean()
             If a string is passed, it must be a frequency string, e.g. '90S'. This is
             internally converted into a DateOffset object, representing the window size.
    min_periods : int
                  Minimum number of observations in window required to have a value.

    Returns
    -------
    Series or DataFrame, if more than one column    
    '''
    def f(x):
        '''Function to apply that actually computes the rolling mean'''
        if center == False:
            dslice = col[x-pd.datetools.to_offset(window).delta+timedelta(0,0,1):x]
                # adding a microsecond because when slicing with labels start and endpoint
                # are inclusive
        else:
            dslice = col[x-pd.datetools.to_offset(window).delta/2+timedelta(0,0,1):
                         x+pd.datetools.to_offset(window).delta/2]
        if dslice.size < min_periods:
            return np.nan
        else:
            return dslice.mean()

    data = DataFrame(data.copy())
    dfout = DataFrame()
    if isinstance(window, int):
        dfout = pd.rolling_mean(data, window, min_periods=min_periods, center=center)
    elif isinstance(window, basestring):
        idx = Series(data.index.to_pydatetime(), index=data.index)
        for colname, col in data.iterkv():
            result = idx.apply(f)
            result.name = colname
            dfout = dfout.join(result, how='outer')
    if dfout.columns.size == 1:
        dfout = dfout.ix[:,0]
    return dfout

# Example
idx = [datetime(2011, 2, 7, 0, 0),
       datetime(2011, 2, 7, 0, 1),
       datetime(2011, 2, 7, 0, 1, 30),
       datetime(2011, 2, 7, 0, 2),
       datetime(2011, 2, 7, 0, 4),
       datetime(2011, 2, 7, 0, 5),
       datetime(2011, 2, 7, 0, 5, 10),
       datetime(2011, 2, 7, 0, 6),
       datetime(2011, 2, 7, 0, 8),
       datetime(2011, 2, 7, 0, 9)]
idx = pd.Index(idx)
vals = np.arange(len(idx)).astype(float)
s = Series(vals, index=idx)
rm = rolling_mean(s, window='2min') 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-10-09T00:14:33.040

user2689410 的代码正是我所需要的。提供我的版本（归功于 user2689410），由于一次计算 DataFrame 中整行的平均值，速度更快。

希望我的后缀约定是可读的：_s：字符串，_i：int，_b：bool，_ser：系列和_df：DataFrame。在您找到多个后缀的地方，类型可以是两者。

```
import pandas as pd
from datetime import datetime, timedelta
import numpy as np

def time_offset_rolling_mean_df_ser(data_df_ser, window_i_s, min_periods_i=1, center_b=False):
    """ Function that computes a rolling mean

    Credit goes to user2689410 at http://stackoverflow.com/questions/15771472/pandas-rolling-mean-by-time-interval

    Parameters
    ----------
    data_df_ser : DataFrame or Series
         If a DataFrame is passed, the time_offset_rolling_mean_df_ser is computed for all columns.
    window_i_s : int or string
         If int is passed, window_i_s is the number of observations used for calculating
         the statistic, as defined by the function pd.time_offset_rolling_mean_df_ser()
         If a string is passed, it must be a frequency string, e.g. '90S'. This is
         internally converted into a DateOffset object, representing the window_i_s size.
    min_periods_i : int
         Minimum number of observations in window_i_s required to have a value.

    Returns
    -------
    Series or DataFrame, if more than one column

    >>> idx = [
    ...     datetime(2011, 2, 7, 0, 0),
    ...     datetime(2011, 2, 7, 0, 1),
    ...     datetime(2011, 2, 7, 0, 1, 30),
    ...     datetime(2011, 2, 7, 0, 2),
    ...     datetime(2011, 2, 7, 0, 4),
    ...     datetime(2011, 2, 7, 0, 5),
    ...     datetime(2011, 2, 7, 0, 5, 10),
    ...     datetime(2011, 2, 7, 0, 6),
    ...     datetime(2011, 2, 7, 0, 8),
    ...     datetime(2011, 2, 7, 0, 9)]
    >>> idx = pd.Index(idx)
    >>> vals = np.arange(len(idx)).astype(float)
    >>> ser = pd.Series(vals, index=idx)
    >>> df = pd.DataFrame({'s1':ser, 's2':ser+1})
    >>> time_offset_rolling_mean_df_ser(df, window_i_s='2min')
                          s1   s2
    2011-02-07 00:00:00  0.0  1.0
    2011-02-07 00:01:00  0.5  1.5
    2011-02-07 00:01:30  1.0  2.0
    2011-02-07 00:02:00  2.0  3.0
    2011-02-07 00:04:00  4.0  5.0
    2011-02-07 00:05:00  4.5  5.5
    2011-02-07 00:05:10  5.0  6.0
    2011-02-07 00:06:00  6.0  7.0
    2011-02-07 00:08:00  8.0  9.0
    2011-02-07 00:09:00  8.5  9.5
    """

    def calculate_mean_at_ts(ts):
        """Function (closure) to apply that actually computes the rolling mean"""
        if center_b == False:
            dslice_df_ser = data_df_ser[
                ts-pd.datetools.to_offset(window_i_s).delta+timedelta(0,0,1):
                ts
            ]
            # adding a microsecond because when slicing with labels start and endpoint
            # are inclusive
        else:
            dslice_df_ser = data_df_ser[
                ts-pd.datetools.to_offset(window_i_s).delta/2+timedelta(0,0,1):
                ts+pd.datetools.to_offset(window_i_s).delta/2
            ]
        if  (isinstance(dslice_df_ser, pd.DataFrame) and dslice_df_ser.shape[0] < min_periods_i) or \
            (isinstance(dslice_df_ser, pd.Series) and dslice_df_ser.size < min_periods_i):
            return dslice_df_ser.mean()*np.nan   # keeps number format and whether Series or DataFrame
        else:
            return dslice_df_ser.mean()

    if isinstance(window_i_s, int):
        mean_df_ser = pd.rolling_mean(data_df_ser, window=window_i_s, min_periods=min_periods_i, center=center_b)
    elif isinstance(window_i_s, basestring):
        idx_ser = pd.Series(data_df_ser.index.to_pydatetime(), index=data_df_ser.index)
        mean_df_ser = idx_ser.apply(calculate_mean_at_ts)

    return mean_df_ser 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-05-21T15:26:59.177

正如@andyhayden 的评论中所建议的那样，这个例子似乎需要一个加权平均值。例如，10/25 有两个民意调查，10/26 和 10/27 各有一个。如果您只是重新采样然后取平均值，那么与 10/25 的投票相比，这有效地为 10/26 和 10/27 的投票提供了两倍的权重。

要对每个**投票**给予同等的权重，而不是对每**一天**给予同等的权重，您可以执行以下操作。

```
>>> wt = df.resample('D',limit=5).count()

            favorable  unfavorable  other
enddate                                  
2012-10-25          2            2      2
2012-10-26          1            1      1
2012-10-27          1            1      1

>>> df2 = df.resample('D').mean()

            favorable  unfavorable  other
enddate                                  
2012-10-25      0.495        0.485  0.025
2012-10-26      0.560        0.400  0.040
2012-10-27      0.510        0.470  0.020 
```

这为您提供了基于民意调查的平均值而不是基于天的平均值的原始成分。与以前一样，民意调查在 10/25 进行平均，但 10/25 的权重也被存储，并且是 10/26 或 10/27 权重的两倍，以反映在 10/25 进行了两次民意调查。

```
>>> df3 = df2 * wt
>>> df3 = df3.rolling(3,min_periods=1).sum()
>>> wt3 = wt.rolling(3,min_periods=1).sum()

>>> df3 = df3 / wt3  

            favorable  unfavorable     other
enddate                                     
2012-10-25   0.495000     0.485000  0.025000
2012-10-26   0.516667     0.456667  0.030000
2012-10-27   0.515000     0.460000  0.027500
2012-10-28   0.496667     0.465000  0.041667
2012-10-29   0.484000     0.478000  0.042000
2012-10-30   0.488000     0.474000  0.042000
2012-10-31   0.530000     0.450000  0.020000
2012-11-01   0.500000     0.465000  0.035000
2012-11-02   0.490000     0.470000  0.040000
2012-11-03   0.490000     0.465000  0.045000
2012-11-04   0.500000     0.448333  0.035000
2012-11-05   0.501429     0.450000  0.032857
2012-11-06   0.503333     0.450000  0.028333
2012-11-07   0.510000     0.435000  0.010000 
```

请注意，10/27 的滚动平均值现在是 0.51500（民意调查加权）而不是 52.1667（日加权）。

`resample`另请注意，`rolling`从版本 0.18.0 开始，API 已经发生了变化。

[滚动（熊猫 0.18.0 中的新功能）](http://pandas.pydata.org/pandas-docs/version/0.18.0/whatsnew.html#window-functions-are-now-methods)

[重采样（pandas 0.18.0 中的新功能）](http://pandas.pydata.org/pandas-docs/version/0.18.0/whatsnew.html#resample-api)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-05-14T17:50:47.820

当我尝试使用 window='1M' 时，我发现 user2689410 代码中断了，因为营业月的增量抛出了这个错误：

```
AttributeError: 'MonthEnd' object has no attribute 'delta' 
```

我添加了直接传递相对时间增量的选项，因此您可以为用户定义的时间段执行类似的操作。

感谢您的指点，这是我的尝试-希望它有用。

```
def rolling_mean(data, window, min_periods=1, center=False):
""" Function that computes a rolling mean
Reference:
    http://stackoverflow.com/questions/15771472/pandas-rolling-mean-by-time-interval

Parameters
----------
data : DataFrame or Series
       If a DataFrame is passed, the rolling_mean is computed for all columns.
window : int, string, Timedelta or Relativedelta
         int - number of observations used for calculating the statistic,
               as defined by the function pd.rolling_mean()
         string - must be a frequency string, e.g. '90S'. This is
                  internally converted into a DateOffset object, and then
                  Timedelta representing the window size.
         Timedelta / Relativedelta - Can directly pass a timedeltas.
min_periods : int
              Minimum number of observations in window required to have a value.
center : bool
         Point around which to 'center' the slicing.

Returns
-------
Series or DataFrame, if more than one column
"""
def f(x, time_increment):
    """Function to apply that actually computes the rolling mean
    :param x:
    :return:
    """
    if not center:
        # adding a microsecond because when slicing with labels start
        # and endpoint are inclusive
        start_date = x - time_increment + timedelta(0, 0, 1)
        end_date = x
    else:
        start_date = x - time_increment/2 + timedelta(0, 0, 1)
        end_date = x + time_increment/2
    # Select the date index from the
    dslice = col[start_date:end_date]

    if dslice.size < min_periods:
        return np.nan
    else:
        return dslice.mean()

data = DataFrame(data.copy())
dfout = DataFrame()
if isinstance(window, int):
    dfout = pd.rolling_mean(data, window, min_periods=min_periods, center=center)

elif isinstance(window, basestring):
    time_delta = pd.datetools.to_offset(window).delta
    idx = Series(data.index.to_pydatetime(), index=data.index)
    for colname, col in data.iteritems():
        result = idx.apply(lambda x: f(x, time_delta))
        result.name = colname
        dfout = dfout.join(result, how='outer')

elif isinstance(window, (timedelta, relativedelta)):
    time_delta = window
    idx = Series(data.index.to_pydatetime(), index=data.index)
    for colname, col in data.iteritems():
        result = idx.apply(lambda x: f(x, time_delta))
        result.name = colname
        dfout = dfout.join(result, how='outer')

if dfout.columns.size == 1:
    dfout = dfout.ix[:, 0]
return dfout 
```

以及具有 3 天时间窗口来计算平均值的示例：

```
from pandas import Series, DataFrame
import pandas as pd
from datetime import datetime, timedelta
import numpy as np
from dateutil.relativedelta import relativedelta

idx = [datetime(2011, 2, 7, 0, 0),
           datetime(2011, 2, 7, 0, 1),
           datetime(2011, 2, 8, 0, 1, 30),
           datetime(2011, 2, 9, 0, 2),
           datetime(2011, 2, 10, 0, 4),
           datetime(2011, 2, 11, 0, 5),
           datetime(2011, 2, 12, 0, 5, 10),
           datetime(2011, 2, 12, 0, 6),
           datetime(2011, 2, 13, 0, 8),
           datetime(2011, 2, 14, 0, 9)]
idx = pd.Index(idx)
vals = np.arange(len(idx)).astype(float)
s = Series(vals, index=idx)
# Now try by passing the 3 days as a relative time delta directly.
rm = rolling_mean(s, window=relativedelta(days=3))
>>> rm
Out[2]: 
2011-02-07 00:00:00    0.0
2011-02-07 00:01:00    0.5
2011-02-08 00:01:30    1.0
2011-02-09 00:02:00    1.5
2011-02-10 00:04:00    3.0
2011-02-11 00:05:00    4.0
2011-02-12 00:05:10    5.0
2011-02-12 00:06:00    5.5
2011-02-13 00:08:00    6.5
2011-02-14 00:09:00    7.5
Name: 0, dtype: float64 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-03-08T21:09:14.030

为了保持基本，我使用了一个循环和类似的东西来让你开始（我的索引是日期时间）：

```
import pandas as pd
import datetime as dt

#populate your dataframe: "df"
#...

df[df.index<(df.index[0]+dt.timedelta(hours=1))] #gives you a slice. you can then take .sum() .mean(), whatever 
```

然后您可以在该切片上运行函数。您可以看到添加迭代器以使窗口的开始不是数据框索引中的第一个值然后滚动窗口（例如，您也可以使用 > 规则作为开始）。

请注意，对于超大数据或非常小的增量，这可能效率较低，因为您的切片可能会变得更加费力（对我来说，对于数十万行数据和几列来说已经足够好了，尽管对于几个星期的每小时窗口来说）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-25T23:40:11.200

检查您的索引是否真的`datetime`，不是`str` 可能有帮助：

```
data.index = pd.to_datetime(data['Index']).values 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-25T16:22:04.310

可视化滚动平均值，看看它是否有意义。我不明白为什么在请求滚动平均值时使用 sum 。

```
 df=pd.read_csv('poll.csv',parse_dates=['enddate'],dtype={'favorable':np.float,'unfavorable':np.float,'other':np.float})

  df.set_index('enddate')
  df=df.fillna(0)

 fig, axs = plt.subplots(figsize=(5,10))
 df.plot(x='enddate', ax=axs)
 plt.show()

 df.rolling(window=3,min_periods=3).mean().plot()
 plt.show()
 print("The larger the window coefficient the smoother the line will appear")
 print('The min_periods is the minimum number of observations in the window required to have a value')

 df.rolling(window=6,min_periods=3).mean().plot()
 plt.show() 
```

# entity-framework - MVC 4向现有父级添加子记录

> ID：15771473
> 
> 赞同：0
> 
> 时间：2013-04-02T18:22:46.427
> 
> 标签：entity-framework, asp.net-mvc-4

如何使用 EF 将子项添加到 MVC 4 中的父记录？

我有一个显示新闻的网格。我需要添加作为这些子记录的更新。一个数据库表有新闻，另一个有更新。它们由每个表中的 NewsID 链接。

新闻模型

```
[Key]
[DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
public int NewsId { get; set; }

public string Body { get; set; }
//other fields 
```

更新模型

```
[Key]
[DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
public int NewsUpdateId { get; set; }
public int NewsId { get; set; }

public string Body { get; set; }
//other fields 
```

新闻索引视图（此处仅发布了部分内容；这是一个显示这些详细信息行的网格）

```
@foreach (var item in Model) {
    <tr>
        <td>@Html.ActionLink(item.Headline, "Details", new { id=item.NewsId })</td>
        <td>@Html.Raw(item.Body.Remove(300))...</td>
        //other fields
        <td>@Html.ActionLink("Edit", "Edit", new { id=item.NewsId })</td>            
        //WOULD LIKE ANOTHER LINK GOING TO "UPDATE" SCREEN TO ADD CHILD UPDATES, PASSING IN THE PARENT ID 
    </tr>
} 
```

控制器（现在）

```
public ActionResult Update()
    {
        return View();
    } 
```

但是当然，当我在那个更新屏幕上保存时，没有 NewsID 可以保存到更新中并且它失败了。如何将 NewsID 从索引屏幕/网格传递到我的“创建更新”屏幕，然后在更新屏幕上检索它并将其添加到我的保存操作中？

更新由于没有人知道如何做到这一点，我正在弥补，因为我没有运气。

我尝试过使用 NewsUpdate 屏幕，例如传递 id 值的编辑。不同之处在于，对于 Edit，您正在编辑该记录。对于这个 NewsUpdate，我添加了一个 NewsUpdate，它是 News 的子记录，所以我有现有的 NewsID，需要将它传递到我的 NewsUpdate 屏幕并最终使用它来设置 NewsUpdate.NewsID。

当我保存 NewsUpdate 屏幕时，模型无效，因为它丢失了，所以我尝试这样设置它：

```
var NewsID = Request.Url.PathAndQuery.ToString(); //grab it from url News/Update/8
NewsID = NewsID.Replace("/News/Update/", "");  //results in NewsID = 8
NewsUpdate.NewsID = Convert.ToInt32(NewsID); 
```

这有效，但在此之后模型仍然无效。所以这不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:43:14.613

知道了。

```
 public ActionResult Update(int id = 0)
    {
        NewsUpdate myUpdate= db.NewsUpdate.Create(); //create empty child model
        myUpdate.NewsID = id; //set my parent's ID on the child model
        View(myUpdate); //send child model to child's create screen aka "NewsUpdate"
    } 
```

这会在子模型和 NewsUpdate 屏幕的其余部分传递我的父 ID，这就像一个标准的创建屏幕，只是像往常一样工作。

# jquery - sharepoint 2010 标准模型对话框打印透明与背景内容合并

> ID：15771476
> 
> 赞同：0
> 
> 时间：2013-04-02T18:23:01.507
> 
> 标签：jquery, css, printing, sharepoint-2010

默认情况下，在 Sharepoint 2010 中，您编辑的每个列表项都会在新模型对话框中打开。

此对话框显示为带有 ms-dlgContent 类的新 div。它还创建了一个带有 ms-dlgOverlay 类的 div，作为使背景变暗的灰色框。但是它不会修改包含背景内容的现有 div，（在 id 为 s4-workspace 的 div 中找到。）

当您打印带有对话框的页面时，对话框的背景和 ms-dlgOverlay div 将被忽略，因为背景不打印。这意味着对话框的字段与对话框后面的页面内容重叠，看起来很乱。

我有一个用于打印的 css 页面设置，我想在出现对话框时使用它来隐藏背景内容。我可以在此 css 表中将 div 的样式设置为 display:none，但是当且仅当存在对话框时，我找不到将类添加到 s4-workspace 元素的方法。（如果没有对话框，我希望打印 s4-workspace 元素。）

我尝试将以下内容添加到我的母版页，但它不起作用。我猜这是因为页面加载时对话框窗口不存在，而且我不确定如何在对话框打开/关闭时运行我的 javascript

```
<script type="text/javascript">
    jQuery(function() {
        jQuery("#s4-workspace").removeClass("backgroundOfDialog");
        //this should run if the ms-dlgContent class is found and do nothing otherwise
        jQuery(".ms-dlgContent").parent().children("#s4-workspace").addClass("backgroundOfDialog");
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:17:05.877

我想我想出了一个解决方案……但这远非理想。我每 5 秒检查一次页面以查看对话框的 div 是否存在：

```
<script type="text/javascript">
    jQuery(function() {
        setInterval(checkForDialog, 5000);
    });

    function checkForDialog()
    {
        var dialogDiv = jQuery(".ms-dlgContent");
        if(dialogDiv.length)
        {
            jQuery("#s4-workspace").addClass("backgroundOfDialog");
        }
        else
        {
            jQuery("#s4-workspace").removeClass("backgroundOfDialog");
        }

    }
</script> 
```

# permissions - Drupal 模块的权限列表卡住了

> ID：15771483
> 
> 赞同：0
> 
> 时间：2013-04-02T18:23:22.137
> 
> 标签：permissions, drupal-6, drupal-modules

据我了解，我的问题是我（更确切地说，我的客户是）运行旧版本的 Drupal，特别是 Core 6.26 如果您对任何其他规格感到好奇，我很乐意透露。

有了这个，我用下面的菜单钩子做了一个新模块。

```
function checkin_menu(){
    $items = array();
    $items['checkin'] = array(
        'title' => 'Checkin'
        ,'type' => MENU_CALLBACK
        ,'access arguments' => array('checkin')
        ,'page callback' => 'checkin'
    );
} 
```

权限完全符合我的预期。有一个名为“Checkin”的部分与 .info 文件中指定的模块名称相同，还有一个项目授予“checkin”权限

后来我将模块扩展为具有两条不同的路径。第二个应该仅供管理员使用。

```
function checkin_menu(){
    $items = array();
    $items['checkin'] = array(
        'title' => 'Checkin'
        ,'type' => MENU_CALLBACK
        ,'access arguments' => array('create a checkin')
        ,'page callback' => 'checkin'
    );
    $items['checkin_admin'] = array(
        'title' => 'Checkin Admin'
        ,'type' => MENU_CALLBACK
        ,'access arguments' => array('view all checkins')
        ,'page callback' => 'device_checkin_page'
    );
    return $items;
} 
```

令我惊讶的是，“创建签到”或“查看所有签到”都没有出现。我仍然在权限页面上显示原始的“签到”。这几天我一直在寻找答案。帮助一个人？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T08:20:38.773

权限由另一个钩子定义，即[hook_perm](http://api.drupal.org/api/drupal/developer!hooks!core.php/function/hook_perm/6)。

所以你应该做这样的事情：

```
/**
 * Implementation of the hook_perm()
 */
function checkin_perm() {
  return array (
    'create a checkin',
    'view all checkins',
  );
} 
```

# c# - 将目录更改为用户指定的子目录

> ID：15771484
> 
> 赞同：0
> 
> 时间：2013-04-02T18:23:22.383
> 
> 标签：c#, chdir

我需要将服务器上的目录更改为服务器上的子目录，但必须由客户端指定。

我尝试了多种方法来尝试使其正常工作，但没有解决方案。

任何提示将不胜感激。

# android - Android - Google Maps API v2 - NoClassDefFoundError

> ID：15771485
> 
> 赞同：21
> 
> 时间：2013-04-02T18:23:23.853
> 
> 标签：android, google-maps, noclassdeffounderror, google-maps-android-api-2

我尝试使用 Intellij IDEA 12 运行 Google 地图。

我已经尝试过建议：

*   [在android中嵌入google maps android v2](https://stackoverflow.com/questions/14004289/embedding-google-maps-android-v2-in-android/14626708#14626708)
*   [Google Maps Android API v2 授权失败](https://stackoverflow.com/questions/13696620/google-maps-android-api-v2-authorization-failure?rq=1)
*   [无法实例化 android.gms.maps.MapFragment](https://stackoverflow.com/questions/13719263/unable-instantiate-android-gms-maps-mapfragment/13744765#13744765)
*   [Google Maps Android API 提供 NoClassDefFoundError](https://stackoverflow.com/questions/3792148/google-maps-android-api-gives-a-noclassdeffounderror)

等等。但不幸的是，这对我不起作用。

我的配置：

1) 真机HTC Wildefire s, android 2.3.5

2)![在此处输入图像描述](https://i.stack.imgur.com/kMlNk.jpg)

3）`AndroidManifest.xml`：

```
      <manifest xmlns:android="http://schemas.android.com/apk/res/android"
              package="ru.ergeslab.TransportScheduleYaroslavl"
              安卓：安装位置="自动"
              安卓：版本代码=“1”
              android:versionName="1.0">
        <使用功能
                安卓：glEsVersion="0x00020000"
                android:required="true"/>
        <uses-permission android:name="android.permission.INTERNET"/>
        <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
        <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
        <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>

        <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
        <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
        <权限
                android:name="ru.ergeslab.TransportScheduleYaroslavl.permission.MAPS_RECEIVE"
                android:protectionLevel="签名"/>
        <uses-permission android:name="ru.ergeslab.TransportScheduleYaroslavl.permission.MAPS_RECEIVE"/>
        <使用-sdk
                安卓：m​​inSdkVersion="10"
                android:targetSdkVersion="16" />
        <application android:label="@string/app_name">
            <元数据
                    android:name="com.google.android.maps.v2.API_KEY"
                    android:value="MY_KEY"/>
            <uses-library android:name="com.google.android.maps" />
            <activity android:name="MainActivity"
                      android:label="@string/app_name">
                <意图过滤器>
                    <action android:name="android.intent.action.MAIN"/>
                    <category android:name="android.intent.category.LAUNCHER"/>
                </intent-filter>
            </活动>
        </应用>
    </清单>

```

4)`MainActivity:`

```
<pre>
package ru.ergeslab.TransportScheduleYaroslavl;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;

public class MainActivity extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

    }

} 
```

5）`main.xml`：

```
<?xml 版本="1.0" 编码="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/map"
          android:name="com.google.android.gms.maps.SupportMapFragment"
          android:layout_width="match_parent"
          android:layout_height="match_parent" />

```

6）IDE项目设置： ![在此处输入图像描述](https://i.stack.imgur.com/fwMwb.png)

![在此处输入图像描述](https://i.stack.imgur.com/G7kdg.png)

![在此处输入图像描述](https://i.stack.imgur.com/ak4t0.png)

![在此处输入图像描述](https://i.stack.imgur.com/N3v2k.png)

![在此处输入图像描述](https://i.stack.imgur.com/MgyEL.png)

完整的 Android logcat：

```
04-02 21:27:07.718: 错误/AndroidRuntime(24277): 致命异常: main
        java.lang.NoClassDefFoundError: com.google.android.gms.R$styleable
        在 com.google.android.gms.maps.GoogleMapOptions.createFromAttributes（未知来源）
        在 com.google.android.gms.maps.SupportMapFragment.onInflate（未知来源）
        在 android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:279)
        在 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
        在 android.view.LayoutInflater.inflate(LayoutInflater.java:386)
        在 android.view.LayoutInflater.inflate(LayoutInflater.java:320)
        在 android.view.LayoutInflater.inflate(LayoutInflater.java:276)
        在 com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:250)
        在 android.app.Activity.setContentView(Activity.java:1712)
        在 ru.ergeslab.TransportScheduleYaroslavl.MainActivity.onCreate(MainActivity.java:13)
        在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
        在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1794)
        在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1851)
        在 android.app.ActivityThread.access$1500(ActivityThread.java:132)
        在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1038)
        在 android.os.Handler.dispatchMessage(Handler.java:99)
        在 android.os.Looper.loop(Looper.java:150)
        在 android.app.ActivityThread.main(ActivityThread.java:4277)
        在 java.lang.reflect.Method.invokeNative(Native Method)
        在 java.lang.reflect.Method.invoke(Method.java:507)
        在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
        在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
        在 dalvik.system.NativeStart.main（本机方法）

```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T16:42:33.060

我终于运行了我的应用程序！

我没有编辑清单、布局和活动，只是更新了项目设置：

![在此处输入图像描述](https://i.stack.imgur.com/9TzRK.png)

![在此处输入图像描述](https://i.stack.imgur.com/jjHs3.png)

![在此处输入图像描述](https://i.stack.imgur.com/kLyEN.png)

![在此处输入图像描述](https://i.stack.imgur.com/ekXNl.png)

![在此处输入图像描述](https://i.stack.imgur.com/IegLg.png)

![在此处输入图像描述](https://i.stack.imgur.com/3glnZ.png)

我希望这会对某人有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T18:41:07.043

**1.**从清单文件中删除此权限：

```
<uses-library android:name="com.google.android.maps" /> 
```

它是 Google Maps API V1 的一部分，在 Google Maps API V2 中不需要。

**2.**将元数据部分移动到关闭应用程序标记之前：

```
<meta-data
    android:name="com.google.android.maps.v2.API_KEY"
    android:value="MY_KEY"/>
</application> 
```

**3.**重新生成一个新密钥并通过 Google API 控制台注册它，然后重新进行所有过程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-10T14:37:25.257

### 首先遵循这些指示

为了文档的完整性，请下载并获取您的密钥和项目设置。

[安装 Google Maps Android v2 API](https://developers.google.com/maps/documentation/android/start#installing_the_google_maps_android_v2_api)

## IntelliJ 特定部分

### 模块

1.  将 google-play-services_lib 作为模块导入到项目中。

    `${ANDROID_SDK_ROOT}/extras/google/google_play_services/libproject/google-play-services_lib`

2.  现在确保将其设置为库模块

    ![在此处输入图像描述](https://i.stack.imgur.com/f83WV.png)

3.  进入您的项目设置并确保将模块添加为依赖项。记下文件夹图标。

    ![在此处输入图像描述](https://i.stack.imgur.com/hLwdU.png)

4.  `google-play-services.jar`如果您计划支持旧设备，请将其作为库添加到您的模块和 Android 支持模块之一。大多数人使用`android-support-v4.jar`，但在我的示例中，我使用`android-support-v13.jar`了 v4 中的所有内容。`Fragment`这是您在旧手机上获得支持的地方。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T18:28:18.317

尝试替换你`main.xml`

```
android:name="com.google.android.gms.maps.SupportMapFragment" 
```

在

```
class="com.google.android.gms.maps.SupportMapFragment" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T20:21:58.877

您通常不会将 google-play-services_lib 放在 libs 文件夹中。

尝试将其作为库项目导入。[http://blogs.jetbrains.com/idea/2010/09/android-library-projects-support/](http://blogs.jetbrains.com/idea/2010/09/android-library-projects-support/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-03T08:46:02.833

我遇到了完全相同的问题，我只需要为 to 的库项目设置 SDK `MapsApiV2`（`Android 2.3.3 (API lvl 10)`也许 2.2 也可以。

# jquery - 获取同一张表中最近的文本框

> ID：15771486
> 
> 赞同：0
> 
> 时间：2013-04-02T18:23:28.413
> 
> 标签：jquery, jquery-ui

我在同一张表中有以下控件。

```
<td>
     <asp:TextBox ID="tbOwnerSearchField" Text="Search..." ClientIDMode="Static"  runat="server"></asp:TextBox>
</td>

<td>
     <input type="button" id="btnSearch" data-field="tbOwnerSearchField" value="Search" />
</td> 
```

我目前使用按钮元素的数据属性来存储文本框 id，如下所示：

```
data-field="tbOwnerSearchField" 
```

然后我在我的 jQuery 方法中引用该文本框，如下所示：

```
var searchField = $(this).data("field");
var searchTerm = $("#" + searchField).val(); 
```

对我来说，我的代码似乎很复杂......有没有更好的方法来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:29:36.787

您可以将文本框和输入放在单个 td 元素中，例如：

```
<td>
     <asp:TextBox ID="tbOwnerSearchField" Text="Search..." ClientIDMode="Static"  runat="server"></asp:TextBox>
     <input type="button" id="btnSearch" data-field="tbOwnerSearchField" value="Search" />
</td> 
```

而且比你能做的：

```
var TxtValue = $(this).siblings().eq(0).val(); 
```

# c# - 如何将数据从 XElement 绑定到组合框

> ID：15771490
> 
> 赞同：0
> 
> 时间：2013-04-02T18:23:47.473
> 
> 标签：c#, wpf, xml, combobox, xelement

XElement 文档。

```
<forms xmlns="">
  <form>
    <id>1361</id>
    <name>TEST3</name>
  </form>
  <form>
    <id>1658</id>
    <name>TEST4</name>
  </form>
  <form>
    <id>1975</id>
    <name>Mac New Patient</name>
  </form>
  <form>
    <id>2209</id>
    <name>Test Atlantic</name>
  </form>
  <form>
    <id>2565</id>
    <name>Rice Creek Test</name>
  </form>
</forms> 
```

**背后的代码**

```
 XElement xmlForms = data.GetXmlForm();
 var ElementsList = from c in xmlForms.Element("Forms").Descendants("form")
 select new { Name = c.Element("name").Value, ID = c.Element("id").Value };

 cBox_NewPat.DataContext = ElementsList; 
 cBox_NewPat.DisplayMemberPath = "name";
 cBox_NewPat.SelectedValuePath = "id"; 
```

我需要将 XElement 中的数据（名称，id）绑定到 WPF 组合框。由于某种原因，它无法正常工作，甚至无法将 XML 中的数据获取到元素列表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:55:09.833

属性名称区分大小写。

你需要改变

```
cBox_NewPat.DisplayMemberPath = "name";
cBox_NewPat.SelectedValuePath = "id"; 
```

到

```
cBox_NewPat.DisplayMemberPath = "Name";
cBox_NewPat.SelectedValuePath = "ID"; 
```

匹配您的匿名类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:59:04.453

看起来您在这里遗漏了几件事（除了空结果 - 我将在下面讨论）。

1.  您需要在组合框上设置 ItemsSource 属性。

    ```
    cBox_NewPat.ItemsSource = ElementsList 
    ```

2.  你应该使用

    ```
    cBox_NewPat.DisplayMemberPath = "Name"; 
    ```

    代替

    ```
    cBox_NewPat.DisplayMemberPath = "name"; 
    ```

    因为您的匿名类型属性称为“名称”，而不是“名称”。与 SelectedValuePath 相同

3.  请展示您在 GetXmlForm 方法中所做的事情 - 这是出现问题的地方。如果您执行 XElement.Parse(xmlString)，那么如果您从表单元素中删除名称空间属性 (xmlns)，它将起作用。您还需要使用

    ```
    xmlForms.Descendants("form") 
    ```

    代替

    ```
    xmlForms.Element("forms").Descendants("form") 
    ```

# ruby-on-rails - number_to_human 与货币

> ID：15771492
> 
> 赞同：6
> 
> 时间：2013-04-02T18:23:48.553
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems, ruby-on-rails-3.2

我正在使用 number_to_human 打印 400 万。我想知道是否有一种方法可以将 $ 添加到数字的前面？当我有一个负数时，我会遇到问题。如果我只是在前面扔一个美元，我会得到他们想要的 -400 万美元 -400 万美元

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-02T18:52:03.370

它是内置的 Rails：

```
number_to_currency(number_to_human(-4000000))
# => "-$4 Million" 
```

使用约定的最大优势是，当您需要 i18n 时，您只需传递语言环境：

```
number_to_currency(number_to_human(-4000000), locale: 'en-EU')
# => "-4 Million €" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-11-13T06:11:44.937

它很有趣，如果它对任何人都有帮助：

```
How to Present thousands as "K", millions as "M" in ruby for that, 
just follow the steps 
```

在顶部的控制器中包含 NumberHelper

```
include ActionView::Helpers::NumberHelper 
```

使用这个 number_to_human 助手并传递值，这将转换值

```
<%= number_to_human(5223654) %> 
```

将此代码粘贴到 en.yml 中以使其正常工作

```
en:
  number:
    human:
      decimal_units:
       format: "%n%u"
       units:
         unit: ""
         thousand: K
         million: M
         billion: B
         trillion: T
         quadrillion: Q 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T18:42:58.053

必须有更好的方法。但是，这里有一个快速破解

```
amount = -4000000
if amount < 0
  human = "-$#{number_to_human(amount.abs)}"
else
  human = "$#{number_to_human(amount)}"
end 
```

@apneadiving 展示了真正简单的方法。

# vb6 - 如何在vb6中画一个图片框

> ID：15771493
> 
> 赞同：1
> 
> 时间：2013-04-02T18:23:49.057
> 
> 标签：vb6, drawing, picturebox

我为此使用了很多网站，但没有一个有效，所以我希望我能得到正确的答案

我试过这个，谁能告诉我它有什么问题：

```
 Private sub Picture1_mouseDown
    x = picture1.currentx
    y = picture1.currenty
    End sub

    Private sub Picture1_MouseMove
    If button = 1 then
    line (picture1.currentx,picture1.currenty)-(x,y), _
    QBColor(0)
    End if 
    End sub 
```

我已经剪掉了 Private sub Picture1_MouseMove,Mousedown() 位，因为我急于完成

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T21:58:55.867

这将画一条线，与 kurnilia 画点的解决方案略有不同

```
Option Explicit

Private lastX As Single
Private lastY As Single

Private Sub Form_Load()
    ' no need to set this every time we move the mouse inside Picture1
    Picture1.DrawWidth = 5
End Sub

Private Sub Picture1_MouseMove(Button As Integer, Shift As Integer, X As Single, Y As Single)
    If Button = 1 Then
        Picture1.Line (lastX, lastY)-(X, Y), vbBlue
    End If
    lastX = X
    lastY = Y
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:40:32.690

您使用它的方法在`PictureBox`控件上画一条线：`Line`

> 子线（标志为整数，X1 为单，Y1 为单，X2 为单，Y2 为单，颜色为长）
> 
> ```
> Member of VB.PictureBox
> Draws lines and rectangles on an object. 
> ```

没什么好说的，[在vb6中如何动态画线已经介绍过了。](https://stackoverflow.com/questions/3088761/how-do-you-draw-a-line-dynamically-in-vb6)

不过，您似乎在编写事件处理程序时遇到了麻烦。如果您不知道/不记得签名，IDE 随时为您提供帮助。查看[将代码分配给控件以响应 VB6](http://visualbasic.freetutes.com/learn-vb6-advanced/lesson3/p21.html)教程中的事件。

有代码可以帮助您开始绘图。`Picture1`是`PictureBox`控制。当您将鼠标移到图片框上并按住鼠标左键时，将绘制蓝线。

```
Option Explicit

Private Sub Picture1_MouseMove(Button As Integer, Shift As Integer, X As Single, Y As Single)
    If Button = 1 Then
        Picture1.DrawWidth = 5
        Picture1.Line (X, Y)-(X, Y), vbBlue
    End If
End Sub 
```

# c# - 测试工厂模式

> ID：15771495
> 
> 赞同：2
> 
> 时间：2013-04-02T18:23:53.617
> 
> 标签：c#, .net, unit-testing, moq

我有下面的小样本工厂模式实现，想知道是否有人可以帮助我编写适当的 Moq 单元测试用例，以获得最大的代码覆盖率：

```
public class TestClass
{ 
    private readonly IService service;

    public TestClass(Iservice service)
    {
        this.service = service;
    }

    public void Method(string test)
    {
        service = TestMethod(test);
        service.somemethod();
    }

    private IService TestMethod(string test)
    {
        if(test == 'A')
            service = new A();
        if(test == 'B')
            service = new B();
        return service;
    }
} 
```

当我发送 Mock 时，我正在寻找一些测试 TestClass 的帮助，更重要的是 TestMethod，例如我的测试方法如下：

```
[TestMethod]
public void TestCaseA()
{
    Mock<IService> serviceMock = new Mock<Iservice>(MockBehaviour.strict);
    TestClass tClass = new TestClass(serviceMock.Object);

    // The Question is, what is best approach to test this scenario ?
    // If i go with below approach, new A() will override serviceMock
    // which i am passing through constructor.
    var target = tClass.Method("A");
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T18:34:03.910

你不会嘲笑`TestClass`，因为那是你正在测试的。

为此，您需要为`service`.

```
public IService Service { get; private set; } 
```

您需要测试构造函数和`Method`修改实例状态（在这种情况下`Service`）的方式`TestClass`。

`Method`对于测试用例，您的测试将类似于以下内容`B`：

```
[TestMethod]
public void TestSomeMethod()
{
    // Arrange/Act
    var target = new TestClass((new Mock<IService>()).Object);
    target.Method("B");

    // Assert
    Assert.IsInstanceOfType(target.Service, typeof(B));
} 
```

您的测试将类似于以下内容，用于测试测试用例的构造函数`A`：

```
[TestMethod()]
public void TestCasesA()
{
    // Arrange/Act
    var target = new TestClass("A");

    // Assert
    Assert.IsInstanceOfType(target.service, typeof(A));
} 
```

我建议只使用构造方法来注入你的`IService`. 这允许您拥有一个不可变的对象，该对象将减少应用程序的状态。

# magento - 获取magento中所有产品属性的列表

> ID：15771499
> 
> 赞同：8
> 
> 时间：2013-04-02T18:24:04.070
> 
> 标签：magento, model

我一直在做前端magento，但才刚刚开始构建模块。这是我知道如何做前端的事情，但我在我的模块中苦苦挣扎。我现在要实现的目标是在管理员中使用所有可用的产品属性填充多选。包括所有产品属性集的自定义产品属性。我不完全确定这需要什么表，因为我不想假设启用了平面类别数据。

我在系统配置的一个新选项卡中创建了我的管理区域，我创建了一个多选字段，该字段当前仅填充了三个静态选项。这很管用。任何人都可以通过指出正确的方向来帮助我......目前这是我到目前为止所拥有的（因为它的价值）。

```
 <?php
       class test_test_Model_Source 
       {
           public function toOptionArray()
           {
               return array(
                   array('value' => 0, 'label' =>'First item'),
                   array('value' => 1, 'label' => 'Second item'),
                   array('value' => 2, 'label' =>'third item'),

               );
           }
       } 
```

///////////////////////////// 编辑 //////////////////// ////////////////

我觉得我可能会在这里做点什么，但它只返回每个属性的第一个字母（所以我不确定它是否甚至是返回的属性）

```
public function toOptionArray()
{
    $attributes = Mage::getModel('catalog/product')->getAttributes();
    $attributeArray = array();
    foreach($attributes as $a){

            foreach($a->getSource()->getAllOptions(false) as $option){
                $attributeArray[$option['value']] = $option['label'];
            }

    }
    return $attributeArray; 
} 
```

///////////////////////////////// 编辑 //////////////// ////////////////////

我不是非常接近，因为我现在知道该数组正在返回我想要的所有属性代码。但是它仍然只输出每个字母的第一个字母......有人知道为什么吗？

```
public function toOptionArray()
{
    $attributes = Mage::getModel('catalog/product')->getAttributes();
    $attributeArray = array();

    foreach($attributes as $a){
        foreach ($a->getEntityType()->getAttributeCodes() as $attributeName) {
            $attributeArray[$attributeName] = $attributeName;
        }
         break;         
    }
    return $attributeArray; 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T13:51:28.377

我已经回答了我自己的问题。我找到了一种可行的方法，但是我不确定为什么，所以如果有人可以评论和解释那将是有用的。所以虽然有 $attributeArray[$attributeName] = $attributeName; 当您返回仅提供第一个字母的数组时，当涉及到 print_r 时起作用。但是，如果您执行以下操作，我认为这似乎在做同样的事情。我只能想象，在渲染时，它并不期待一个字符串，而是其他东西。无论如何，这是代码：

```
public function toOptionArray()
{
    $attributes = Mage::getModel('catalog/product')->getAttributes();
    $attributeArray = array();

    foreach($attributes as $a){

        foreach ($a->getEntityType()->getAttributeCodes() as $attributeName) {

            //$attributeArray[$attributeName] = $attributeName;
            $attributeArray[] = array(
                'label' => $attributeName,
                'value' => $attributeName
            );
        }
        break;
    }
    return $attributeArray; 
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-17T12:13:52.953

正如弗兰克克拉克建议的那样，不需要做额外的循环。只需使用：

```
public function toOptionArray() 
{
    $attributes = Mage::getResourceModel('catalog/product_attribute_collection')->addVisibleFilter();
    $attributeArray = array();

    foreach($attributes as $attribute){
            $attributeArray[] = array(
                'label' => $attribute->getData('frontend_label'),
                'value' => $attribute->getData('attribute_code')
            );
    }
    return $attributeArray; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T19:56:51.740

您可以尝试以其他方式获取属性，例如这样

```
$attributes = Mage::getSingleton('eav/config')
->getEntityType(Mage_Catalog_Model_Product::ENTITY)->getAttributeCollection(); 
```

一旦有了属性，您就可以通过这种方式获得选项（从 magento 代码复制）

```
$result = array();
foreach($attributes as $attribute){
foreach ($attribute->getProductAttribute()->getSource()->getAllOptions() as $option) {
    if($option['value']!='') {
        $result[$option['value']] = $option['label'];
    }
} 
```

}

# sql - 两条SQL语句，如果没有结果就忽略第一条的返回？

> ID：15771504
> 
> 赞同：1
> 
> 时间：2013-04-02T18:24:10.933
> 
> 标签：sql, sql-server, vb.net, tsql

我有一个sql语句`SELECT * FROM table1 WHERE ....; SELECT * FROM table2 WHERE ....`

我想要的是从第一个 select 语句中获取结果，如果它返回结果，但如果没有，我想忽略它并从第二个 select 语句中获取结果。有没有办法只使用 SQL 来做到这一点？

我将它作为数据表返回给我，使用数据适配器从上述 SQL 语句中填充数据表。我无法更改该部分，或切换到填充数据集（出于我不会进入的原因，但无法更改）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T18:29:24.827

假设两个查询都返回相同数量和类型的列，一种方法是：

```
select * from table1 where ... /* query 1 conditions */
union all
select * from table2 where ... /* query 2 conditions */
and not exists
(select 1 from table1 where ... /* query 1 conditions */) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:34:46.540

几个选项。您可以先检查计数：

```
If (select count(*) from table1 where...) > 0
begin
    select * from table1 where...
end
else
begin
    select * from table2 where...
end; 
```

如果两个结果集的结构相同，则可以使用临时表保存计数检查（从而提高性能）：

```
create table #temp (col1 int, col2 varchar(10), ...);

insert #temp
select * from table1 where...;

if @@rowcount = 0 
begin
    insert #temp
    select * from table2 where...
end;

select * from #temp; 
```

# c# - 从其他类修改线程的属性

> ID：15771507
> 
> 赞同：0
> 
> 时间：2013-04-02T18:24:17.293
> 
> 标签：c#, multithreading, class, attributes

我的代码有问题。我有 2 节课：

*   类短信
*   clsWorker

当我的线程运行时，我想从我的 clsSMS 类中修改它们的属性。

```
public class clsSMS
{
    clsWorker objclsWorker;

     public clsSMS(clsWorker objclsWorker = null)
    {
          this.objclsWorker.operatorBlocageError38();
          // The above call doesn't work...
          // I think the objclsWorker  is always null...
          // What do you think?
    }
}

public class clsWorker
{
    public clsSMS clsobjSMS;

    public clsWorker(...)
    {
          this.clsobjSMS = new clsSMS(objclsWorker: this);

    }
    public void operatorBlocageError38(/*String port_concerne, bool erreur38*/)
    {
        MessageBox.Show("The method call work fine!");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:30:14.773

它不会从您实例化 clsWorker 的发布代码中显示出来。

```
clsWorker worker = new clsWorker();
worker.operatorBlocageError38(); 
```

如果在实例化之前调用 operatorBlocageError38，则该方法必须标记为静态。

```
public static void operatorBlocageError38() 
```

# serial-port - 串行连接发送字节[]的奇怪行为

> ID：15771508
> 
> 赞同：0
> 
> 时间：2013-04-02T18:24:19.200
> 
> 标签：serial-port, arduino, byte, rxtx

我正在使用以下代码尝试将字节数组发送到我的 arduino，但我得到了奇怪的结果。任何人都可以看到问题是什么？我正在努力让Arduino打印出通过串行发送的位串。下面的调试输出

```
 package org.dnsdojo.ryanhost.GA.MuPlusOne;

    import gnu.io.CommPort;
    import gnu.io.CommPortIdentifier;
    import gnu.io.SerialPort;
    import gnu.io.SerialPortEvent;
    import gnu.io.SerialPortEventListener;

    import java.io.IOException;
    import java.io.InputStream;
    import java.io.OutputStream;
    import java.util.concurrent.locks.*;

    /**
     * This version of the TwoWaySerialComm example makes use of the
     * SerialPortEventListener to avoid polling.
     *
     */
    public class TwoWaySerialCommTest
    {
            static Lock lock = new ReentrantLock();
            static Condition outputAvailable = lock.newCondition();
            static Condition inputAvailable = lock.newCondition();
            public volatile byte[] inputBuffer = new byte[1024];
            public volatile byte[] outputBuffer = new byte[1024];

            public TwoWaySerialCommTest()
        {
            super();
        }

            public void put(byte[] buffer)
            {
                    try
                    {
                            lock.lock();
                            int i = 0;
                            for(; i < buffer.length; i++ )
                            {
                                    outputBuffer[i] = buffer[i];
                            }
                            System.out.println((byte) '\n');
                            outputBuffer[i] = (byte) '\n';
                            i++;
                            for(; i < outputBuffer.length; i++ )
                            {
                                    outputBuffer[i] = 0;
                            }
                            System.out.println("Output buffer after put");
                            for(int j = 0; j < outputBuffer.length; j++)
                            {
                                    System.out.print(outputBuffer[j]);
                            }
                            outputAvailable.signal();

                    }
                    catch(Exception e)
                    {
                            System.out.println("Exception for lock in put");
                            e.printStackTrace();
                    }
                    finally
                    {
                            lock.unlock();

                    }
            }

        void connect ( String portName ) throws Exception
        {
            CommPortIdentifier portIdentifier = CommPortIdentifier.getPortIdentifier(portName);
            if ( portIdentifier.isCurrentlyOwned() )
            {
                System.out.println("Error: Port is currently in use");
            }
            else
            {
                CommPort commPort = portIdentifier.open(this.getClass().getName(),2000);

                if ( commPort instanceof SerialPort )
                {
                    SerialPort serialPort = (SerialPort) commPort;
                    serialPort.setSerialPortParams(57600,SerialPort.DATABITS_8,SerialPort.STOPBITS_1,SerialPort.PARITY_NONE);

                    InputStream in = serialPort.getInputStream();
                    OutputStream out = serialPort.getOutputStream();

                    serialPort.addEventListener(new SerialReader(in , inputBuffer));
                    serialPort.notifyOnDataAvailable(true);

                    (new Thread(new SerialWriter(out , outputBuffer))).start();

                }
                else
                {
                    System.out.println("Error: Only serial ports are handled by this example.");
                }
            }
        }

        static void listPorts()
        {
            java.util.Enumeration<CommPortIdentifier> portEnum = CommPortIdentifier.getPortIdentifiers();
            while(portEnum.hasMoreElements())
            {
                    CommPortIdentifier portIdentifier = portEnum.nextElement();
                    if(portIdentifier == null)
                    {
                            System.out.println("No ports");
                    }
                    System.out.println("Available - " + portIdentifier.getName());
            }
        }

        /**
         * Handles the input coming from the serial port. A new line character
         * is treated as the end of a block in this example.
         */
        public static class SerialReader implements SerialPortEventListener
        {
            private InputStream in;
            byte[] buffer;

            public SerialReader ( InputStream in )
            {
                this.in = in;
            }

            public SerialReader (InputStream in, byte[] buffer)
            {
                    this.in = in;
                    this.buffer = buffer;
            }

            public void serialEvent(SerialPortEvent arg0) {
                lock.lock();
                    int data;

                try
                {

                    int len = 0;
                    while ( ( data = in.read()) > -1 )
                    {
                        if ( data == '\n' )
                        {
                            break;
                        }
                        buffer[len++] = (byte) data;
                    }
                    //inputAvailable.signal();
                    //outputAvailable.signal();
                }
                catch ( IOException e )
                {
                    e.printStackTrace();
                    System.exit(-1);
                }
                finally
                {
                    lock.unlock();
                }
            }

        }

        /** */
        public static class SerialWriter implements Runnable
        {
            OutputStream out;
            volatile byte[] buffer;

            public SerialWriter ( OutputStream out )
            {
                this.out = out;
            }

            public SerialWriter ( OutputStream out, byte[] buffer)
            {
                    this.out = out;
                    this.buffer = buffer;
            }

            public void run ()
            {
                    while(true)
                    {
                            lock.lock();
                            try
                        {
                            outputAvailable.await();
                            System.out.println("Waking up");
                            int i = 0;
                            if (this.buffer != null)
                            {
                                    System.out.println("Buffer isn't empty");
                                    for (int j = 0; j < buffer.length; j++)
                                    {
                                            System.out.print(buffer[i]);
                                    }
                                    System.out.println();
                                    while(buffer[i] != ((byte)'\n') && i < buffer.length -1 )
                                    {
                                                    System.out.println(buffer[i]);
                                            this.out.write(buffer[i++]);
                                            System.out.print(buffer[i-1]);
                                            buffer[i-1] = 0;
                                    }
                                    this.out.write((byte) '\n');
                            }
                            else
                            {
                                    System.out.println("Buffer is null");
                                    System.out.println(this.buffer.toString());
                            }
                        }
                        catch ( IOException e )
                        {
                            e.printStackTrace();
                            System.exit(-1);
                        }
                        catch(Exception e)
                        {
                            e.printStackTrace();
                        }

                            finally
                            {

                                    lock.unlock();
                            }
                    }
            }
        }

       /* public static void main ( String[] args )
        {
            try
            {
                (new TwoWaySerialCommTest()).connect("/dev/ttyS82");
            }
            catch ( Exception e )
            {
                TwoWaySerialCommTest.listPorts();
                e.printStackTrace();
            }
        }
*/

    } 
```

TwoWaySerialCommTest 的调试输出

```
10
Output buffer after put
11101101010101110000010110001001100001110011000011010101101111001010101010101010010000000111110001101001011101011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000Waking up
Buffer isn't empty
1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111 
```

以下每一项都在单独的行上（无法在此处正确格式化）

```
1
11
11
10
01
11
10
01
10
01
10
01
10
01
11
11
10
00
00
00
00
01
10
01
11
10
00
00
01
10
00
01
11
10
00
00
00
01
11
11
10
00
01
11
10
00
00
00
01
11
10
01
10
01
10
01
11
10
01
11
11
11
10
00
01
10
01
10
01
10
01
10
01
10
01
10
01
10
01
10
00
01
10
00
00
00
00
00
00
01
11
11
11
11
10
00
00
01
11
10
01
10
00
01
10
01
11
11
10
01
10
01
1 
```

Arduino输出 -

```
-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1 
```

Arduino草图 -

```
String serialData = "";
int readByte = 0;

void setup()
{
Serial3.begin(57600);
Serial.begin(57600);
}

void loop()
{
//Serial3.print("test\n");
delay(5000);
getSerial();
delay(1000);
//Serial3.print("supertest\n");
delay(5000);
getSerial();
delay(1000);
}

void getSerial()
{
while (readByte != '\n')
{
readByte = Serial3.read();
if(readByte < 230 )
{
  serialData += readByte;
}
else if(readByte <= 0) 
{
 break; 
}
}
if(serialData.length() > 0)
{
Serial.println(serialData);
}
serialData = "";
readByte = 'a';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:16:55.973

我猜你没有将你的计算机连接到你的 arduino 上的 rxtx3 引脚，所以从这些中读取不会给你任何东西。（[当没有序列号可用时，Arduino 打印 -1](http://arduino.cc/en/Serial/Read)）

尝试在 getSerial() while 循环中切换到“readByte = Serial.read();”。

# javascript - 如何使用javascript将不透明度从0添加到100？

> ID：15771511
> 
> 赞同：0
> 
> 时间：2013-04-02T18:24:25.347
> 
> 标签：javascript, jquery, css, opacity

将框动画到随机位置，然后将它们移回原始位置，但我不知道如何在此脚本上添加从 0 到 100 的 + 不透明度

```
$(document).ready(function(){
    var h = $(window).height();
    var w = $(window).width();            
    $('#intro .box').each(function(){
        var originalOffset = $(this).position(),
            $this = $(this),
           tLeft = w-Math.floor(Math.random()*900),
           tTop  = h-Math.floor(Math.random()*900);

        $(this).css({
            "left": tLeft,
            "top": tTop
        });

        $this.animate({ "left": originalOffset.left, 
                         "top": originalOffset.top
                     },5000);

    });
}); 
```

所以请帮忙:)这里是演示：http: [//jsfiddle.net/HgMB4/24/](http://jsfiddle.net/HgMB4/24/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T18:27:37.267

在 CSS 中设置`.box`为。`opacity: 0`

然后在您的动画函数中，添加 opacity: 1 作为属性之一。

[http://jsfiddle.net/Hr5ZT/1/](http://jsfiddle.net/Hr5ZT/1/)

```
 $this.animate({ "left": originalOffset.left, 
                     "top": originalOffset.top,
                   "opacity": 1
                 },5000); 
```

# c - 比较opencv中灰度图像的直方图

> ID：15771512
> 
> 赞同：1
> 
> 时间：2013-04-02T18:24:33.333
> 
> 标签：c, opencv, histogram

嗨，任何人都可以为我提供一个简单的开放式 cv 程序来加载两个 RGB 图像，将其转换为灰度，计算直方图，然后比较它们的直方图。我在 open cv 网站上看到了一个类似的程序，但他们使用 HSV 而不是灰度，它是一个 c++ 程序。我可以查看流程和所有内容......我不知道要使用哪些函数以及它们的参数意味着什么......问候，Kiran

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-02T20:32:55.707

这是执行此操作的简单代码片段。由于您没有告诉您要如何比较直方图，因此我建议您直观地进行比较。

```
#include <opencv2/opencv.hpp>

void show_histogram(std::string const& name, cv::Mat1b const& image)
{
    // Set histogram bins count
    int bins = 256;
    int histSize[] = {bins};
    // Set ranges for histogram bins
    float lranges[] = {0, 256};
    const float* ranges[] = {lranges};
    // create matrix for histogram
    cv::Mat hist;
    int channels[] = {0};

    // create matrix for histogram visualization
    int const hist_height = 256;
    cv::Mat3b hist_image = cv::Mat3b::zeros(hist_height, bins);

    cv::calcHist(&image, 1, channels, cv::Mat(), hist, 1, histSize, ranges, true, false);

    double max_val=0;
    minMaxLoc(hist, 0, &max_val);

    // visualize each bin
    for(int b = 0; b < bins; b++) {
        float const binVal = hist.at<float>(b);
        int   const height = cvRound(binVal*hist_height/max_val);
        cv::line
            ( hist_image
            , cv::Point(b, hist_height-height), cv::Point(b, hist_height)
            , cv::Scalar::all(255)
            );
    }
    cv::imshow(name, hist_image);
}

int main (int argc, const char* argv[])
{
    // here you can use cv::IMREAD_GRAYSCALE to load grayscale image, see image2
    cv::Mat3b const image1 = cv::imread("C:\\workspace\\horse.png", cv::IMREAD_COLOR);
    cv::Mat1b image1_gray;
    cv::cvtColor(image1, image1_gray, cv::COLOR_BGR2GRAY);
    cv::imshow("image1", image1_gray);
    show_histogram("image1 hist", image1_gray);

    cv::Mat1b const image2 = cv::imread("C:\\workspace\\bunny.jpg", cv::IMREAD_GRAYSCALE);
    cv::imshow("image2", image2);
    show_histogram("image2 hist", image2);

    cv::waitKey();
    return 0;
} 
```

结果：

![在此处输入图像描述](https://i.stack.imgur.com/8Azmu.jpg)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-19T09:20:10.350

要比较直方图，您可以查看此[http://docs.opencv.org/doc/tutorials/imgproc/histograms/histogram_comparison/histogram_comparison.html](http://docs.opencv.org/doc/tutorials/imgproc/histograms/histogram_comparison/histogram_comparison.html)的最后四个点。

# macos - 渲染到没有 NSOpenGLView 的 IOSurface

> ID：15771516
> 
> 赞同：3
> 
> 时间：2013-04-02T18:24:48.640
> 
> 标签：macos, opengl

我正在尝试修改 Apple MultiGPUIOSurface 示例（特别是文件[http://developer.apple.com/library/mac/#samplecode/MultiGPUIOSurface/Listings/ServerOpenGLView_m.html](http://developer.apple.com/library/mac/#samplecode/MultiGPUIOSurface/Listings/ServerOpenGLView_m.html)），以便服务器端渲染到 IOSurface，而不需要一个 NSOpenGLView。

我的修改版本位于：[http](http://pastebin.com/z3r715jJ) ://pastebin.com/z3r715jJ 我的方法的不同之处在于我基于计时器而不是在 drawRect 中渲染到 IOSurface。我也没有使用 NSOpenGlView 的上下文。

问题是我在客户端应用程序中看到了 IOSurface 的损坏视图。但是，如果我将 NSOpenGLView 的上下文设置为我创建的上下文，或者使用来自 NSOpenGLView 的上下文，它就可以工作。这让我认为 NSOpenGLView 正在做一些我也需要做的额外事情，但我不确定是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:40:45.370

找到了一个解决方案（虽然我不明白为什么）：创建一个像素缓冲区。

我发现了一些关于屏幕外缓冲区和可绘制的需求的讨论（[http://www.mentby.com/Group/mac-opengl/opengl-offscreen-rendering-without-a-window.html](http://www.mentby.com/Group/mac-opengl/opengl-offscreen-rendering-without-a-window.html)）

无论如何，我的解决方法是添加以下行：

```
 NSOpenGLPixelBuffer* pbuf = [[NSOpenGLPixelBuffer alloc] initWithTextureTarget:GL_TEXTURE_RECTANGLE_EXT textureInternalFormat:GL_RGBA textureMaxMipMapLevel:0 pixelsWide:512 pixelsHigh:512];

    [_nsContext setPixelBuffer:pbuf cubeMapFace:0 mipMapLevel:0 currentVirtualScreen:[_nsContext currentVirtualScreen]]; 
```

# jquery - 使用 jQuery、ajax 和 jsonp 数据的连续动画

> ID：15771523
> 
> 赞同：0
> 
> 时间：2013-04-02T18:25:03.250
> 
> 标签：jquery, jquery-animate, news-ticker

我创建了一个使用 ajax 请求读取 jsonp 数据的 JavaScript 文件。我正在添加元素

*   标签，我正在尝试添加*   元素到一个不断向左移动元素的动画。

    所以我有： `var url='https://www.example.com/json/list.json/?callback=jsonpCallBack';`

    ```
     setInterval(function() {
        $.ajax({
            url : url, 
            dataType:'jsonp',       
            success: function(data)
            {
                 var outputhtml='<ul>'; 
                 var item = [];
                  for(var i =0; i < data.length-1 ;i++)
                  {

                    var item = data[i];
                    outputhtml+=  '<li>'+item.symbol + ' &nbsp' ;
                    var changeValue=item.change;
                    if(changeValue == 'd')
                    {
                         outputhtml +='<span class="bid-value-down">' + item.BID+ '</span> &nbsp<span class="ask-value">(' +item.ASK+ ')</span> &nbsp<span class="down">   &nbsp</span> &nbsp&nbsp&nbsp| &nbsp&nbsp&nbsp</li>';
                    }
                    else
                    {
                         outputhtml += '<span class="bid-value-up">' + item.BID+ '</span> &nbsp<span class="ask-value">(' +item.ASK+ ')</span> &nbsp<span class="up">  &nbsp </span> &nbsp&nbsp&nbsp| &nbsp&nbsp&nbsp</li>' ;
                    }
                  }
                  outputhtml+="</ul>";
                  $('.quotesbar-ticker').html(outputhtml) ;
                  $('.quotesbar-ticker ul li').clone().appendTo('.quotesbar-ticker ul');
                  doTicker();
            }

        }) 
        },52000 );
    });`   {               } 
    ```

    作为我的主要功能。在我的主函数中，我调用了 doTicker();

    ```
    function doTicker() 
      {
    jQuery(document).ready(function($) { 
         $('.quotesbar-ticker').css('left',0).animate({'left': '-2500px' } , 20000 , 'linear');
     });

      } 
    ```

    我想要的是以股票形式显示值。但是我的动画功能有问题，我被卡住了。由于我当前的功能目前在一小段时间内用作自动收报机，然后它会停止并再次启动。

    我不想使用任何花哨的插件，因为我想让我的代码尽可能短。有什么帮助吗？我会感激的。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:36:01.493

您目前正尝试在 20000 的时间段内将其移动 2500 像素。它正在停止，因为该距离和时间与您的主要功能更新的频率不匹配。

如果您将 doTicker 函数更改为以下内容，它应该是常量而不是停滞，

```
//setup variables to track timer
var t;
var timer_is_on = 0;

//function to start the timer and reset the ticker when it gets updated
function doTicker() 
{
    //if the timer is running, stop it and reset it.
    if(timer_is_on==1)
    {
        clearTimeout(t);
        timer_is_on = 0;
    }

    //set the ticker back to the start
    $('.quotesbar-ticker').css('left',0);

    //wait for the ticker to be loaded with the new data
    jQuery(document).ready(function($) { 
        //set a timer to repeat every 20 seconds
        t = setTimeout(runTicker(), 20000);
        timer_is_on = 1;
    });
}

//this function is run every 20 seconds
function runTicker()
{
    //don't set the ticker to the begining anymore, but do tell it to move left over 20 seconds
    $('.quotesbar-ticker').animate({'left': '-2500px' } , 20000 , 'linear');
} 
```

# php - PHP翻转多维数组不起作用

> ID：15771536
> 
> 赞同：0
> 
> 时间：2013-04-02T18:25:46.737
> 
> 标签：php, arrays, recursion, flip

我想出了这段代码：

```
function multiArrayFlip($array)
{
    $arrayCount = count($array);
    if ($arrayCount != count($array, COUNT_RECURSIVE)) 
    {
        foreach($array as $key => $value)
        {
            if (is_array($value))
            {
                $array[$key] = multiArrayFlip($value);
            }
        }
    }
    else
    {
      array_flip($array);
    }   

    return $array;
} 
```

但它不起作用。它返回未更改的数组。

这是数组数据示例：

```
 Array
    (
        [0] => Array
            (
                [0] => Array
                    (
                        [zip] => 02135
                        [hispanic_percent] => 7.4
                        [white_percent] => 73.1
                        [black_percent] => 4.2
                        [native_american_percent] => 0
                    )

            )

        [1] => Array
            (
                [0] => Array
                    (
                        [zip] => 02135
                        [school_number] => 1
                        [school_name] => ANOTHER COURSE TO COLLEGE
                        [school_address] => 20 WARREN STREET BRIGHTON MA 02135
                        [contact_number] => 617-635-8865
                        [start_grade] => 9TH GRADE
                        [reduced_lunch_students_count] => 8
                        [reduced_lunch_students_percent] => 120
                        [free_or_reduced_lunch_students_count] => 53
                        [free_or_reduced_lunch_students_percent] => 0
                    )
)
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:37:34.137

您必须将 array_flip 函数的返回值重新分配给 $array 变量才能工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T18:40:59.680

您需要修改您的功能以使其正常工作。之后重新分配值`array_flip`

```
function multiArrayFlip($array)
{
    $arrayCount = count($array);

    if ($arrayCount != count($array, COUNT_RECURSIVE)) 
    {
        foreach($array as $key => $value)
        {
            if (is_array($value))
            {  
                $array[$key] = multiArrayFlip($value);
            }
        }
    }
    else
    {
      $array = array_flip($array);
    }   

    return $array;
} 
```

希望这可以帮助 ：）

# c# - 在c#中使用两个空白括号后跟箭头的目的是什么

> ID：15771538
> 
> 赞同：8
> 
> 时间：2013-04-02T18:25:58.090
> 
> 标签：c#, .net, visual-studio-2010, unit-testing

两个括号和箭头的目的是什么

> service.GetDeviceLOV = () =>

我一直在试图弄清楚它的功能。下面是用于单元测试的整个方法。希望这有助于提供上下文。

```
//A test for GetDeviceTypes
    [TestMethod()]
    [HostType("Moles")]
    public void GetDeviceTypesTest()
    {
        SetUpMoles();
        Login ();

        service.GetDeviceLOV = () =>
        {
            return new List<DeviceLOV>() { 

            new DeviceLOV{DeviceType = "Type 1"},
            new DeviceLOV{DeviceType = "Type 2"},
            new DeviceLOV {DeviceType = "Type 1"}

        };
        };

        List<string> actual;
        actual = presenter.GetDeviceTypes();

        Assert.AreEqual(2, actual.Count ,"actual.Count Should = 2");

    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T18:27:56.010

这是一个[lambda 表达式](http://msdn.microsoft.com/en-us/library/bb397687.aspx)，用于创建匿名函数的委托。

在您的情况下，该`GetDeviceLOV`属性是一个委托，它返回一个`List<DeviceLOV>`（或这个实现的某个接口，例如`IEnumerable<DeviceLOV>`）。

lambda 表达式允许您编写一个“方法”内联并从中创建一个委托，并将其分配给该属性。如果没有这种语法，您需要创建一个单独的方法，并直接分配一个委托，即：

```
private List<DeviceLOV> MakeDeviceList()
{
   return new List<DeviceLOV>
   { 
        new DeviceLOV{DeviceType = "Type 1"},
        new DeviceLOV{DeviceType = "Type 2"},
        new DeviceLOV {DeviceType = "Type 1"}
    };
}; 
```

然后你会写这样的东西：

```
service.GetDeviceLOV = new Func<List<DeviceLOV>>(this.MakeDeviceList); 
```

lambda 表达式允许您编写“内联”方法，并直接分配它。它还提供了额外的功能（在这种情况下没有使用），因为它允许您引用局部变量（编译器将变成闭包）等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T18:27:46.917

那是一个没有参数的 lambda 函数（匿名委托）。以下行中的花括号和其中的所有代码也是该 lambda 的一部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T18:28:21.557

这是一种创建匿名方法的方法。
基本上，它为该`GetDeviceLOV`方法提供了以下内容：

```
{
    return new List<DeviceLOV>() { 

    new DeviceLOV{DeviceType = "Type 1"},
    new DeviceLOV{DeviceType = "Type 2"},
    new DeviceLOV {DeviceType = "Type 1"}
} 
```

# iis - IIS 7.5 MVC 4 应用程序 + 需要单一 SSL 客户端证书页面

> ID：15771542
> 
> 赞同：2
> 
> 时间：2013-04-02T18:26:21.930
> 
> 标签：iis, asp.net-mvc-4, virtual-directory, maproute

我正在尝试开发一个能够以两种方式登录的应用程序，用户名/密码和客户端证书。我无法在我的 IIS 网站配置中创建单个页面，该页面将允许特定视图需要客户端证书。我尝试在视图文件夹上设置需要客户端证书，但它不起作用。我已经尝试为此创建虚拟目录以及创建另一个 MVC 4 应用程序并将其带入我的原始应用程序，但路由似乎从未采用。有没有人对此有任何见解？

将 MVC 4 应用程序嵌套为 IIS 中现有 MVC 4 应用程序下的应用程序/虚拟目录的说明？

谢谢。

# c# - 程序找不到 app.config

> ID：15771546
> 
> 赞同：0
> 
> 时间：2013-04-02T18:26:33.907
> 
> 标签：c#, visual-studio-2012

> // 将 LastRun 设置为现在
> config.AppSettings.Settings["LastRun"].Value = DateTime.Now.ToString(); // 保存所有设置 config.Save(ConfigurationSaveMode.Modified);

此代码在我的开发服务器中运行良好，但在我的生产服务器中运行良好。我的程序似乎无法与我的 app.config 文件通信。我已经检查了所有的“明显”。. 有任何想法吗 ... ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:30:17.827

从您的代码示例中，我无法判断您的配置变量是如何初始化的。但是，从评论中，你有一个网络应用程序。除非您尝试加载特定的 app.config 文件，否则 Web 应用将尝试从 web.config 获取 AppSettings。

以编程方式更改 web.config 的值不是一个好主意。更改 web.config 将导致应用程序重新启动。

如果您有不同的 app.config 来存储此类信息，那将比尝试更改 web.config 更好。但是您必须专门加载文件，如下所示：

```
Configuration config = WebConfigurationManager.OpenWebConfiguration("yourPath\app.config"); 
```

`ConfigurationManager.OpenExeConfiguration()`旨在用于可执行应用程序而不是 Web 应用程序。尝试使用`WebConfigurationManager`如上所示。

[您可以在此SO question/answers](https://stackoverflow.com/questions/719928/how-do-you-modify-the-web-config-appsettings-at-runtime?lq=1)中找到更多信息。

更多信息可以在这个[SO question/answer](https://stackoverflow.com/questions/8500683/unable-to-write-appsettings-of-web-config-on-production-server?lq=1)中找到。

# ios - AVPlayer 边界时间观察器偶尔无法触发

> ID：15771549
> 
> 赞同：3
> 
> 时间：2013-04-02T18:26:38.883
> 
> 标签：ios, observer-pattern, avplayer

我正在使用 AVPlayer 的 -addBoundaryTimeOserverForTimes:queue:usingBlock: 在视频中的特定时间执行一些代码（在这种情况下，我想要在视频达到其持续时间时取消隐藏按钮。代码如下：

```
- (void)viewWillAppear:(BOOL)animated
{
    ...

    _player = [AVPlayer playerWithURL:videoURL];

    AVPlayerLayer *newPlayerLayer = [AVPlayerLayer playerLayerWithPlayer:_player];
    [newPlayerLayer setFrame:_videoView.bounds];
    [_videoView.layer addSublayer:newPlayerLayer];

    _observer = [_player addBoundaryTimeObserverForTimes:@[[NSValue valueWithCMTime:_player.currentItem.duration]] queue:NULL usingBlock:^{
        [someButton setHidden:NO];
    }];

    ...
} 
```

无论出于何种原因，有时代码块会触发并且按钮变得可见，有时则不会。无法在此行为中找到模式。它经常（几乎总是）在模拟器中发生，偶尔在设备上发生。有没有人遇到过这个问题？任何想法可能会发生什么？

**编辑**

此外，如果我在块上设置断点，它总是会触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-12-06T10:04:10.813

**对于那些想要观察播放器何时结束的人：**

我大约每年浏览一次这个问题，因为我总是忘记对我有用的修复程序。这次我**在 macOS 上**遇到了这个问题。我看到了同样的行为，观察者块有时不会被调用。当我从正在调试的应用程序切换回 Xcode 时，该块突然触发。这可能与 OP 所描述的在块中设置断点有关。

但是，这是解决方法：只需`AVPlayerItemDidPlayToEndTimeNotification`按照[此答案](https://stackoverflow.com/a/34644343/4408170)中的说明切换到。但是请注意，顾名思义，通知的对象是玩家的当前项目，而不是玩家本身！

因为这个通知在项目的结束时间触发，而不是观察一些“边界时间”，`forwardPlaybackEndTime`如果您需要另一个时间而不是项目的实际结束时间，即持续时间，只需设置项目的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-20T02:42:33.917

主队列有时不调用。您可以使用子队列，并在子队列的块中调用主队列。

```
// dispatch queue setting
dispatch_queue_t subQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0);

// notification setting
__block id blockObserver;
blockObserver = [self.queuePlayer addBoundaryTimeObserverForTimes:boundary
                 queue:subQueue // if NULL use mainQueue

  usingBlock:^{
    // do something
    dispatch_queue_t mainQueue = dispatch_get_main_queue();
    dispatch_async(mainQueue, ^{
        // do something
    });
}]; 
```

# intuit-partner-platform - GetCustomerAccounts 慢

> ID：15771552
> 
> 赞同：0
> 
> 时间：2013-04-02T18:26:50.477
> 
> 标签：intuit-partner-platform, customer-account-data-api

我有 dotnetAggCatSample 以及我自己的使用 aggCat API 运行的应用程序。

当我在 Dev 模式下执行 GetCustomerAccounts 时，在收到响应之前会有 30 秒左右的延迟。这是某种 Dev 模式限制的滞后部分，还是我可以期望在生产中也出现这种行为？

不过，GetAccountTransactions 并没有真正的滞后。

# jasper-reports - BarChart JFreeChart的条形格式标签？

> ID：15771554
> 
> 赞同：0
> 
> 时间：2013-04-02T18:26:52.703
> 
> 标签：jasper-reports, label, jfreechart, bar-chart

有一个非常简单的问题，但我找不到完全适用于 jrxml-code 的设计。

我有带有条形标签的条形图，这些标签必须格式化为百分比格式，而不是通过 Java 和 jrxml-code

像这样

```
<itemLabel color="#000000" backgroundColor="#FFFFFF"/> 
```

我怀疑在这个标签中应该有一些属性，这使得它成为可能。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:42:26.987

使用条形图的标签，您可以在其中找到 itemlabel 标签，输入以下内容：

```
<valueAxisFormat>
    <axisFormat tickLabelMask="0.0%" verticalTickLabels="false" />
</valueAxisFormat> 
```

如果您使用的是 iReports 设计器，您只需在单击条形图后在属性面板/窗口中将 0.0% 添加到“值轴刻度标签掩码”。

**注意**：您可能需要修改数据，因为值 5 将被格式化为 500.0%。

当然你可以使用不同的掩码#%, 0.00%, #0.0%

不相关，但您可以扩展axisFormat标签并根据需要更改标签字体，方法是修改为：

```
<axisFormat tickLabelMask="0.0%" verticalTickLabels="false">
    <labelFont>
        <font fontName="Arial" size="10"/>
    </labelFont>
</axisFormat> 
```

如果此选项不起作用，解决方法是添加一个用于存储百分比标签值的列。您可以使用“值轴标签表达式”来查询标签。

# c# - C# 是否有用于 .NET 3.5 的类似 mockito 的间谍框架？

> ID：15771556
> 
> 赞同：8
> 
> 时间：2013-04-02T18:26:55.797
> 
> 标签：c#, .net, mocking, spy, spying

我曾经在 java 中有一个非常方便的间谍框架，叫做[Mockito](http://en.wikipedia.org/wiki/Mockito)。它允许您模拟现有对象的**某些**方法，还可以告诉您是否调用了其他方法（您将为此创建一个间谍包装器）。.NET 3.x 中的 C# 有类似的东西吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-02T18:30:28.787

听起来您在描述“部分模拟”。一些（大多数？）模拟框架支持这一点。我确定[Moq](https://github.com/Moq/moq4/wiki/Quickstart)和[RhinoMocks](http://ayende.com/Wiki/Default.aspx?Page=Rhino+Mocks+Partial+Mocks)可以。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T18:31:14.600

他们在外面，但他们花钱。

你可以试试[JustMock](http://www.telerik.com/products/mocking.aspx)或[TypeMock](https://www.typemock.com/)

# r - 在 R 中的 read.csv 中查找坏数据的技术

> ID：15771557
> 
> 赞同：7
> 
> 时间：2013-04-02T18:26:58.860
> 
> 标签：r

我正在读取如下所示的数据文件：

```
userId, fullName,email,password,activated,registrationDate,locale,notifyOnUpdates,lastSyncTime,plan_id,plan_period_months,plan_price,plan_exp_date,plan_is_trial,plan_is_trial_used,q_hear,q_occupation,pp_subid,pp_payments,pp_since,pp_cancelled,apikey
"2","John Smith,"john.smith@gmail.com","a","1","2004-07-23 14:19:32","en_US","1","2011-04-07 07:29:17","3",\N,\N,\N,"0","1",\N,\N,\N,\N,\N,\N,"d7734dce-4ae2-102a-8951-0040ca38ff83" 
```

但实际文件大约有 20000 条记录。我使用以下 R 代码将其读入：

```
user = read.csv("~/Desktop/dbdump/users.txt", na.strings = "\\N", quote="") 
```

我拥有的原因`quote=""`是因为没有它，导入会过早停止。我最终得到了 9569 个观察结果。为什么我不明白为什么确切地`quote=""`克服了这个问题，它*似乎*这样做了。

除了它引入了我必须“修复”的其他问题。我看到的第一个是日期最终是包含引号的字符串，当我使用它们时不想转换为实际日期`to.Date()`。

现在我可以修复字符串并破解我的方式。但更好地了解我在做什么。有人可以解释一下：

1.  为什么`quote=""`修复“坏数据”
2.  找出导致`read.csv`提前停止的原因的最佳实践技术是什么？（如果我只查看 +/- 指示行的输入数据，我看不出有任何问题）。

这是“问题”“附近”的行。我没看到你的伤害吗？

```
"16888","user1","user1@gmail.com","TeilS12","1","2008-01-19 08:47:45","en_US","0","2008-02-23 16:51:53","1",\N,\N,\N,"0","0","article","student",\N,\N,\N,\N,"ad949a8e-17ed-102b-9237-0040ca390025"
"16889","user2","user2@gmail.com","Gaspar","1","2008-01-19 10:34:11","en_US","1",\N,"1",\N,\N,\N,"0","0","email","journalist",\N,\N,\N,\N,"8b90f63a-17fc-102b-9237-0040ca390025"
"16890","user3","user3@gmail.com","boomblaadje","1","2008-01-19 14:36:54","en_US","0",\N,"1",\N,\N,\N,"0","0","article","student",\N,\N,\N,\N,"73f31f4a-181e-102b-9237-0040ca390025"
"16891","user4","user4@gmail.com","mytyty","1","2008-01-19 15:10:45","en_US","1","2008-01-19 15:16:45","1",\N,\N,\N,"0","0","google-ad","student",\N,\N,\N,\N,"2e48e308-1823-102b-9237-0040ca390025"
"16892","user5","user5@gmail.com","08091969","1","2008-01-19 15:12:50","en_US","1",\N,"1",\N,\N,\N,"0","0","dont","dont",\N,\N,\N,\N,"79051bc8-1823-102b-9237-0040ca390025" 
```

*** 更新 ***

这更棘手。即使导入的总行数是 9569，如果我查看最后几行，它们对应于最后几行数据。因此，我推测在导入过程中发生了一些事情，导致很多行被跳过。事实上 15914 - 9569 = 6345 条记录。当我在那里有quote=""时，我得到15914。

所以我的问题可以修改：有没有办法让 read.csv 报告它决定不导入的行？

*** 更新 2 ***

@Dwin，我不得不删除 na.strings="\N" 因为 count.fields 函数不允许这样做。有了这个，我得到了这个看起来很有趣但我不明白的输出。

```
3     4    22    23    24 
1    83 15466   178     4 
```

您的第二个命令会产生大量数据（并在达到 max.print 时停止。）但第一行是这样的：

```
[1]  2  4  2  3  5  3  3  3  5  3  3  3  2  3  4  2  3  2  2  3  2  2  4  2  4  3  5  4  3  4  3  3  3  3  3  2  4 
```

我不明白输出是否应该显示每条输入记录中有多少字段。显然第一行都有超过 2,4,2 等字段......感觉我越来越近了，但仍然感到困惑！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T19:21:20.913

我发现的一个问题（感谢`data.table`）是 之后缺少引号（“）`John Smith`。这对于您拥有的其他行也可能是一个问题吗？

如果我在 之后添加“缺少的”引号`John Smith`，它读起来很好。

我将此数据保存到`data.txt`：

```
userId, fullName,email,password,activated,registrationDate,locale,notifyOnUpdates,lastSyncTime,plan_id,plan_period_months,plan_price,plan_exp_date,plan_is_trial,plan_is_trial_used,q_hear,q_occupation,pp_subid,pp_payments,pp_since,pp_cancelled,apikey
"2","John Smith","john.smith@gmail.com","a","1","2004-07-23 14:19:32","en_US","1","2011-04-07 07:29:17","3",\N,\N,\N,"0","1",\N,\N,\N,\N,\N,\N,"d7734dce-4ae2-102a-8951-0040ca38ff83"
"16888","user1","user1@gmail.com","TeilS12","1","2008-01-19 08:47:45","en_US","0","2008-02-23 16:51:53","1",\N,\N,\N,"0","0","article","student",\N,\N,\N,\N,"ad949a8e-17ed-102b-9237-0040ca390025"
"16889","user2","user2@gmail.com","Gaspar","1","2008-01-19 10:34:11","en_US","1",\N,"1",\N,\N,\N,"0","0","email","journalist",\N,\N,\N,\N,"8b90f63a-17fc-102b-9237-0040ca390025"
"16890","user3","user3@gmail.com","boomblaadje","1","2008-01-19 14:36:54","en_US","0",\N,"1",\N,\N,\N,"0","0","article","student",\N,\N,\N,\N,"73f31f4a-181e-102b-9237-0040ca390025"
"16891","user4","user4@gmail.com","mytyty","1","2008-01-19 15:10:45","en_US","1","2008-01-19 15:16:45","1",\N,\N,\N,"0","0","google-ad","student",\N,\N,\N,\N,"2e48e308-1823-102b-9237-0040ca390025"
"16892","user5","user5@gmail.com","08091969","1","2008-01-19 15:12:50","en_US","1",\N,"1",\N,\N,\N,"0","0","dont","dont",\N,\N,\N,\N,"79051bc8-1823-102b-9237-0040ca390025" 
```

这是一个代码。两者都`fread`工作`read.csv`正常。

```
require(data.table)

dat1 <- fread("data.txt", header = T, na.strings = "\\N")
dat1

dat2 <- read.csv("data.txt", header = T, na.strings = "\\N")
dat2 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T20:14:55.740

该`count.fields`函数在确定在哪里查找格式错误的数据时非常有用。

这给出了每行忽略引用的字段列表，如果有嵌入的逗号，可能会出现问题：

```
table( count.fields("~/Desktop/dbdump/users.txt", quote="", sep=",") ) 
```

这给出了一个忽略引号和 "#"(octothorpe) 作为注释字符的列表：

```
table( count.fields("~/Desktop/dbdump/users.txt",  quote="", comment.char="") ) 
```

Atfer 查看您为第一个表格报告的内容......其中大部分都符合要求......您可以获得具有非 22 值的行位置列表（使用逗号和非引号设置）：

```
which( count.fields("~/Desktop/dbdump/users.txt", quote="", sep=",") != 22) 
```

`fill=TRUE`有时，如果唯一的困难是在行尾缺少逗号，则可以解决问题。

# sql - 访问 2010 如何检查是否检查了是/否字段

> ID：15771558
> 
> 赞同：3
> 
> 时间：2013-04-02T18:27:04.023
> 
> 标签：sql, ms-access, ms-access-2010

我不断收到此错误：

> 在非对象上调用成员函数 fetch()

使用这个 sql 语句：

```
SELECT CD_BAN 
            FROM Tbl_Clients
            WHERE EXISTS = Yes 
```

EXIST 是一个是/否字段..

我正在使用 php

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T18:31:16.347

`EXISTS`是一个关键字。如果这也是您的字段名称，请将其括起来以避免混淆数据库引擎。

```
SELECT CD_BAN 
FROM Tbl_Clients
WHERE [EXISTS] = True 
```

或者您可以改为使用表名来限定它。

```
SELECT Tbl_Clients.CD_BAN 
FROM Tbl_Clients
WHERE Tbl_Clients.EXISTS = True 
```

# vb.net - vb.net使用的杀死进程

> ID：15771577
> 
> 赞同：0
> 
> 时间：2013-04-02T18:27:43.997
> 
> 标签：vb.net, visual-studio-2010

我的程序需要一些帮助。我想重写 .txt 文件中的数据，但出现错误：

> 该进程无法访问文件“C:\Users\AARVIII\Documents\Visual Studio 2010\Projects\PROJECT\WindowsApplication3\bin\Debug\ORDERS\aa.txt”，因为它正被另一个进程使用。

这是代码：

```
Sub WRITEDATA()

    Dim write As New System.IO.StreamWriter("ORDERS\" & TBFNAME.Text + "" + TBLNAME.Text & ".txt", False)
    write.WriteLine(TBFNAME.Text)
    write.WriteLine(TBLNAME.Text)
    write.WriteLine(TBEADD.Text)
    write.WriteLine(TBEADD2.Text)
    write.WriteLine(TBADDRESS.Text)
    write.WriteLine(TBCONTACT.Text)
    write.close()

End Sub 
```

我使用 StreamReader 来获取已经放入该文本文件中的数据。请帮我弄清楚如何终止该进程，以便我可以重写我的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:12:51.507

您的应用程序（在另一个线程上？）很可能是罪魁祸首。首先，为确保释放资源，请确保将代码包装在 using 块中：

```
 Using Dim write As New System.IO.StreamWriter("ORDERS\" & TBFNAME.Text + "" + TBLNAME.Text & ".txt", False)
        write.WriteLine(TBFNAME.Text)
        write.WriteLine(TBLNAME.Text)
        write.WriteLine(TBEADD.Text)
        write.WriteLine(TBEADD2.Text)
        write.WriteLine(TBADDRESS.Text)
        write.WriteLine(TBCONTACT.Text)
  End Using 
```

此外，您可能希望查看此线程：[.NET Asynchronous stream read/write](https://stackoverflow.com/questions/1540658/net-asynchronous-stream-read-write)

# php - 搜索给定半径内的邮政编码

> ID：15771578
> 
> 赞同：0
> 
> 时间：2013-04-02T18:27:44.747
> 
> 标签：php, mysql, search, zip

我的网站的 header.php 文件中有以下代码：

```
<?php
mysql_select_db($database_ecsdb, $ecsdb);
$query_getCat = "SELECT DISTINCT category FROM food ORDER BY category DESC";
$getCat = mysql_query($query_getCat, $ecsdb) or die(mysql_error());
$row_getCat = mysql_fetch_assoc($getCat);
$totalRows_getCat = mysql_num_rows($getCat);

mysql_select_db($database_ecsdb, $ecsdb);
$query_getZip = "SELECT * FROM food ORDER BY zip DESC";
$getZip = mysql_query($query_getZip, $ecsdb) or die(mysql_error());
$row_getZip = mysql_fetch_assoc($getZip);
$totalRows_getZip = mysql_num_rows($getZip);
?>

<div id="header" >
<div id="search">
<h2> Search for Organizations</h2>
<br>

<form action="../spsucares2/search.php" method="get">

<label name="title">
    Category:
        <select name="category">      
          <?php
    do {  
    ?>
              <option value="<?php echo $row_getCat['category']?>"><?php echo $row_getCat['category']?></option>
              <?php
    } while ($row_getCat = mysql_fetch_assoc($getCat));
      $rows = mysql_num_rows($getCat);
      if($rows > 0) {
          mysql_data_seek($getCat, 0);
          $row_getCat = mysql_fetch_assoc($getCat);
      }
    ?>
    </select>
    </label>

  <label>Enter your ZIP Code:
     <input maxlength="5" name="zipcode" size="6" type="text" /></label> </br>

  <label>Select a distance:</label>
        <select name="distance">
          <option>5</option>
          <option>10</option>
          <option>25</option>
          <option>50</option>
          <option>100</option>
        </select>

  <input name="submit" type="submit" value="search" />

</form>

<?php
        if(isset($_POST['submit'])) {
            if(!preg_match('/^[0-9]{5}$/', $_POST['zipcode'])) {
                echo "<p><strong>You did not enter a properly formatted ZIP Code.</strong> Please try again.</p>\n";
            }
            elseif(!preg_match('/^[0-9]{1,3}$/', $_POST['distance'])) {
                echo "<p><strong>You did not enter a properly formatted distance.</strong> Please try again.</p>\n";
            }
            else {
                //connect to db server; select database
                $link = mysql_connect('localhost', 'root', 'fisher36') or die('Cannot connect to database server');
                mysql_select_db('cares') or die('Cannot select database');

                //query for coordinates of provided ZIP Code
                if(!$rs = mysql_query("SELECT * FROM zip WHERE zip_code = '$_POST[zipcode]'")) {
                    echo "<p><strong>There was a database error attempting to retrieve your ZIP Code.</strong> Please try again.</p>\n";
                }
                else {
                    if(mysql_num_rows($rs) == 0) {
                        echo "<p><strong>No database match for provided ZIP Code.</strong> Please enter a new ZIP Code.</p>\n"; 
                    }
                    else {
                        //if found, set variables
                        $row = mysql_fetch_array($rs);
                        $lat1 = $row['latitude'];
                        $lon1 = $row['longitude'];
                        $d = $_POST['distance'];
                        $r = 3959;

                        //compute max and min latitudes / longitudes for search square
                        $latN = rad2deg(asin(sin(deg2rad($lat1)) * cos($d / $r) + cos(deg2rad($lat1)) * sin($d / $r) * cos(deg2rad(0))));
                        $latS = rad2deg(asin(sin(deg2rad($lat1)) * cos($d / $r) + cos(deg2rad($lat1)) * sin($d / $r) * cos(deg2rad(180))));
                        $lonE = rad2deg(deg2rad($lon1) + atan2(sin(deg2rad(90)) * sin($d / $r) * cos(deg2rad($lat1)), cos($d / $r) - sin(deg2rad($lat1)) * sin(deg2rad($latN))));
                        $lonW = rad2deg(deg2rad($lon1) + atan2(sin(deg2rad(270)) * sin($d / $r) * cos(deg2rad($lat1)), cos($d / $r) - sin(deg2rad($lat1)) * sin(deg2rad($latN))));

                        //display information about starting point
                        //provide max and min latitudes / longitudes
                        echo "<table class=\"bordered\" cellspacing=\"0\">\n";
                        //echo "<tr><th>City</th><th>State</th><th>Lat</th><th>Lon</th><th>Max Lat (N)</th><th>Min Lat (S)</th><th>Max Lon (E)</th><th>Min Lon (W)</th></tr>\n";
                        //echo "<tr><td>$row[city]</td><td>$row[state]</td><td>$lat1</td><td>$lon1</td><td>$latN</td><td>$latS</td><td>$lonE</td><td>$lonW</td></tr>\n";
                        echo "</table>\n<br />\n";

                        //find all coordinates within the search square's area
                        //exclude the starting point and any empty city values
                        $query = "SELECT * FROM zip WHERE (latitude <= $latN AND latitude >= $latS AND longitude <= $lonE AND longitude >= $lonW) AND (latitude != $lat1 AND longitude != $lon1) AND city != '' ORDER BY state, city, latitude, longitude";
                        if(!$rs = mysql_query($query)) {
                            echo "<p><strong>There was an error selecting nearby ZIP Codes from the database.</strong></p>\n";
                        }
                        elseif(mysql_num_rows($rs) == 0) {
                            echo "<p><strong>No nearby ZIP Codes located within the distance specified.</strong> Please try a different distance.</p>\n";                               
                        }
                        else {
                            //output all matches to screen
                            echo "<table class=\"bordered\" cellspacing=\"0\">\n";
                            echo "<tr><th>City</th><th>State</th><th>ZIP Code</th><th>Latitude</th><th>Longitude</th><th>Miles, Point A To B</th></tr>\n";
                            while($row = mysql_fetch_array($rs)) {
                                echo "<tr><td>$row[city]</td><td>$row[state]</td><td>$row[zip_code]</td><td>$row[latitude]</td><td>$row[longitude]</td><td>";
                                echo acos(sin(deg2rad($lat1)) * sin(deg2rad($row['latitude'])) + cos(deg2rad($lat1)) * cos(deg2rad($row['latitude'])) * cos(deg2rad($row['longitude']) - deg2rad($lon1))) * $r;
                                echo "</td>  </tr>\n";  
                            }
                            echo "</table>\n<br />\n";
                        }
                    }
                }
            }
        }
    ?>

</div>

</div>
<br clear="all" /> 
```

它允许用户在选定范围内搜索组织。但是，我的搜索功能无法正常工作，因为它不会过滤结果，而是返回所有结果。此外，如果选择了两个类别，则只能搜索一个类别，而不能同时搜索这两个类别。请问我该如何解决这个问题？

# mongodb - MongoDB 如何处理范围和最近邻查询？

> ID：15771580
> 
> 赞同：3
> 
> 时间：2013-04-02T18:27:47.650
> 
> 标签：mongodb, nearest-neighbor, spatial-index, geohashing

MongoDB 如何处理范围和最近邻查询？使用了什么算法？

我知道 MongoDB 使用 GeoHash 和 B-Tree 来索引空间数据，但它如何处理范围和最近邻查询从未在任何文档中提及。

此外，MongoDB 使用 $near 只能处理 100 个 NN。这可能意味着NN算法效率不高？

# ruby-on-rails - Rails - 如何在 f.submit 上放置确认弹出窗口？

> ID：15771582
> 
> 赞同：41
> 
> 时间：2013-04-02T18:27:49.880
> 
> 标签：ruby-on-rails

我想在`<% f.submit %>`调用新对象表单时弹出确认消息。有没有办法在没有 javascript 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-04-02T18:31:02.710

你想要`<%= f.submit :confirm => 'Your confirm message' %>`。仅供参考，这只是 javascript 调用的简写。

编辑：如其他答案所述，弹出确认的新方法是：

```
<%= f.submit 'Save', data: { confirm: 'Your confirm message' } %> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-01-11T18:22:15.153

正确的方法是使用：

```
= f.submit "Save", data: { confirm: "Are you sure you want to submit this form?" } 
```

# jquery - 检测对同一文件的不同 ajax 请求

> ID：15771590
> 
> 赞同：0
> 
> 时间：2013-04-02T18:28:07.200
> 
> 标签：jquery, ajax, request

我有两种形式，我验证并发送到同一页面，之后我需要，对于每个请求，我的响应与 php 文件不同。所以我的问题，我如何找到不同的 ajax 请求。我试过

```
if(isset($_SERVER['HTTP_X_REQUESTED_WITH']) && !empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') 
```

但这适用于所有请求..

```
 $(document).ready(function(){
$("#form1").validate({
     debug: false,
rules: {

passwordid:"required",
username:"required",
password_again :"required",
password_again:{
  equalTo: "#passwordid"
},
 email: {
 required: true,
 email: true
}
 },
messages: {

email: "Please enter your valid email address.",
username: "Please enter your username",
passwordid:"Enter Password",
password_again:"Please enter the same value",
},
  submitHandler: function(form) {

$.ajax
({
type: "POST",
url: "action.php",
data: $('#form1').serialize(),
cache: false,
success: function(html)
{

    $(".result").prepend(html);

  }
        });
    }
    });

$("#form2").validate({
     debug: false,
rules: {

datepicker:"required",
hourid1:"required",
minuteid1:"required",
dhour:"required",
dminute:"required",
   },
messages: {

datepicker:"Please enter your date",
hourid1: "Enter your time",
minuteid1:"Enter your time",
dhour:"Enter your duration",
dminute:"Enter your duration",
 },
  submitHandler: function(form) {

  $.ajax
  ({
  type: "POST",
  url: "action.php",
  data: $('#form2').serialize(),
  cache: false,
  success: function(html)
  {

   $(".result1").prepend(html);

}
        });
    }
});
}); 
```

我只需要一种简单的方法来识别我的ajax请求..任何帮助表示赞赏..提前致谢..如果这发生在一个愚蠢的问题上，我很抱歉......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:30:12.940

为什么不只传递一个额外的参数来指示哪个表单生成了请求？这可以通过在每个表单上添加一个隐藏的输入字段以及服务器可以用来区分表单的某种标识符来轻松实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T18:30:40.027

只需为每个表单添加一个具有给定名称的隐藏输入，但具有不同的值，当序列化和发送时，您将在服务器端访问它：

```
if ( $_POST['myFormsName'] == 'form1' ) {

} 
```

# android - Android：使用 IMSI 是否有任何问题

> ID：15771593
> 
> 赞同：0
> 
> 时间：2013-04-02T18:28:20.010
> 
> 标签：android, unique, identification

我知道获取电话号码或设备 ID 存在问题（两者都可以为空，设备 ID 可以在设备植根时更改等）但是使用 IMSI 有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:31:19.757

是的 - 用户可以切换 SIM 卡。如果您想唯一标识某人，请使用通过加密通道发送的共享密钥（登录名/密码、cookie 等）。

哦，还有——只有wifi的平板电脑没有IMSI，他们没有收音机。

# sql - 结果集中的sql最大日期

> ID：15771597
> 
> 赞同：-3
> 
> 时间：2013-04-02T18:28:27.483
> 
> 标签：sql, oracle

我需要获得每个月的最大 add_dtm，我有这一套。

```
location, read_time,         read_amt, add_dtm
1,        2/7/2013 9:00:00,  5,        2/8/2013 6:00:00
1,        3/20/2013 8:00:00, 5,        3/20/2013 6:30:00
1,        2/20/2013 8:20:00, 5,        2/20/2013 6:35:00
1,        2/7/2013 9:00:00,  5,        2/8/2013 6:00:00 
```

所以基本上我只需要结果中的第二行和第三行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:39:13.557

由于您使用的是 Oracle，因此您应该能够使用以下窗口函数`row_number()`：

```
select location, 
  read_time, 
  read_amt,
  add_dtm
from
(
  select location, read_time, read_amt, add_dtm,
    row_number() over(partition by location, to_char(add_dtm, 'MM-YYYY')
                      order by add_dtm desc) rn
  from yourtable
) 
where rn = 1 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!4/5cc84/5)。

或者，您可以使用获取`max(add_dtm)`for each的子查询，`location`然后将该结果连接回您的表：

```
select t1.location, t1.read_time, 
  t1.read_amt, t1.add_dtm
from yourtable t1
inner join
(
  select location, max(add_dtm) MaxDate
  from yourtable
  group by location, to_char(add_dtm, 'MM-YYYY')
) t2
  on t1.location = t2.location
  and t1.add_dtm = t2.maxdate 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!4/5cc84/7)。

这两个查询的关键是您按月和年对数据进行分组以获得最大日期。

# php - 如何在 mysql 查询中添加 if 条件？

> ID：15771600
> 
> 赞同：1
> 
> 时间：2013-04-02T18:28:39.757
> 
> 标签：php, mysql

我正在尝试将 if 语句添加到 mysql 查询，以便在查询运行之前检查用户是否存在于 user_id 列中名为 ptb_users 的表中。

用户可以在其他用户墙上写字，在用户可以在用户墙上写字之前/在查询插入 ptb_wallposts 之前，我希望它检查 from_user_id = ptb_users.user_id。

我正在尝试这样做，但我的页面上到处都是语法错误，有人可以告诉我我需要如何构建它：

```
 <?php 
// check if the review form has been sent
if(isset($_POST['review_content']))
{
    $content = $_POST['review_content'];
        //We remove slashes depending on the configuration
        if(get_magic_quotes_gpc())
        {
                $content = stripslashes($content);
        }
        //We check if all the fields are filled
        if($_POST['review_content']!='')
        { 
```

如果存在（从 ptb_users 中选择 user_id，其中 user_id = @id）开始

```
 {
            $sql = "INSERT INTO ptb_wallposts (id, from_user_id, to_user_id, content) VALUES (NULL, '".$_SESSION['user_id']."', '".$profile_id."', '".$content."');";
            mysql_query($sql, $connection);

            $_SESSION['message']="<div class=\"infobox-wallpost\"><strong>Wall Post Added</strong> - Your comment was posted to {$profile[2]}'s wall.</div><div class=\"infobox-close4\"></div>"; 
header("Location: {$_SERVER['HTTP_REFERER']}");

        } }
} 
```

结束否则开始回显“错误用户不存在”结束

```
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:34:53.640

这是 if 语句的示例（来自 MySQL 参考）

```
IF search_condition THEN statement_list
[ELSEIF search_condition THEN statement_list] ...
[ELSE statement_list]
END IF 
```

让我解释得更好一点，我将比较 PHP 和 SQL 的 if 语句

PHP：

```
IF(variable > 0){
   anything..     
} 
```

SQL：

```
IF variable > 0 THEN anything.. 
```

**阅读更多：[MySQL 参考 - IF 语句](http://dev.mysql.com/doc/refman/5.0/en/if.html)**

# google-apps-script - 以编程方式将 .ics 附件条目添加到 Google 日历

> ID：15771605
> 
> 赞同：0
> 
> 时间：2013-04-02T18:29:00.987
> 
> 标签：google-apps-script

Gmail 最近添加了一项功能，可通过按电子邮件中的按钮将 .ics 附件添加到您的日历中。有没有办法以编程方式做到这一点？我查看了 Google App Script api 并没有真正找到任何东西。

我希望能够使用标签和可能的主题行来处理这封电子邮件，以便在我发送带有 ics 附件的电子邮件时自动添加日历条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:58:44.007

ICS 是一个[定义明确的标准](https://www.rfc-editor.org/rfc/rfc2445)。因此，您可以加载电子邮件并[获取其附件](https://developers.google.com/apps-script/reference/gmail/gmail-message#getAttachments%28%29)，然后从中自动[创建事件](https://developers.google.com/apps-script/reference/calendar/calendar#createEvent%28String,Date,Date%29)。

这是非常可行的，并且将是与社区分享的有用脚本！

这是一个开始使用 JavaScript的 PoC [ICS 解析器。](https://github.com/thybag/JavaScript-Ical-Parser)

# php - 如果 $value 为真，则返回 $value，否则返回其他内容

> ID：15771607
> 
> 赞同：-2
> 
> 时间：2013-04-02T18:29:17.460
> 
> 标签：php

我知道你可以做到这一点

```
$var = mysql_query("SELECT * FROM..") ? mysql_query("SELECT * FROM.."):'Nope!';

// the same as this

if(mysql_query("SELECT * FROM..")) $var = mysql_query("SELECT * FROM..");
else $var = 'Nope!'; 
```

但这很不方便，因为如果它是一个返回数组或 false 并且可能更新表中的某些数据的函数怎么办。所以我想知道有没有什么办法

```
$var = mysql_query("SELECT * FROM..") ? $returnOfFunction:'Nope!'; 
```

像这样的东西

```
$var = mysql_query("SELECT * FROM..") || 'Nope!'; 
```

但是在php中，这意味着如果这是真的或者这是真的，那么我是真的

我希望有人能理解我的想法。

编辑：这行得通吗？

```
function pickTrue($one, $two) {
  if($one == true) return $one;
  else return $two;
}

$var = pickTrue(mysql_query("SELECT * FROM table"), 'Nope'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:32:24.557

您想要[三元](http://php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary)-without-the-middle-part，自 PHP 5.3 起可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T18:36:39.007

*   首先，不要使用`mysql_*`函数。它们正在被弃用。
*   其次，`mysql_query`返回您必须从中获取的资源。让一个变量包含资源或字符串是不好的做法。

这是一个更好的方法：

```
$q= 'SELECT a, b, c FROM mytable';
if($r= $db->query($q)){
  $success = 'yep';
  while($row = $r->fetch_assoc()) {
    //do stuff
  }
} else {
  $success = 'nope';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T18:32:56.677

不要这样写你的代码。mysql_query 的结果并不总是可以比较的布尔值。您还将丢失查询数据库时可以执行的任何错误消息和错误处理。

简短的回答：是的。长答案：不要

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T18:33:19.763

使用`or`运算符，而不是`||`. 它具有较低的绑定偏好。例如

```
$result = mysql_query($sql) || die(mysql_error()); // always kills the script
v.s.
$result = mysql_query($sql) or die(mysql_error()); // kills the script ONLY if the query returns false 
```

但是，不要使用这种复杂的代码。减少行数是一件好事，但是当它降低可读性时，这是一件非常糟糕的事情。

主要问题是`SELECT`查询要么返回布尔值 false（查询/数据库失败），要么返回结果集。在您实际检索一行数据并检查它之前，您无法知道结果集是什么。例如，仅仅因为查询调用返回了一个非假值，并不意味着查询实际上成功了。不返回数据的查询仍然是有效的查询。

例如，考虑一个登录系统，并且您正在检查一个帐户是否存在：

```
$sql = "SELECT id FROM users WHERE username=Some_username_that_doesnt_exist";
$exists = mysql_query($sql) or "Nope!"; 
```

该查询完全有效，但由于用户名不存在，因此将返回一个空结果集。这是一个非错误的结果，所以`or Nope`不会触发。现在代码认为用户名存在，并且噗……你走上不正确的代码路径。

# jquery - 使用jquery提交内部表单？

> ID：15771610
> 
> 赞同：0
> 
> 时间：2013-04-02T18:29:26.327
> 
> 标签：jquery, asp.net, validation

我正在使用 asp.net Master -content 页面。MasterPage 已经有根级`<form>`标签。我的内容页面联系人有另一个`<form>`用于验证目的的标签区域。

当我提交表单根级别`<form>`执行而不是验证`<form>`标记时。

## 母版页

```
 <form runat="server"> 
```

## 联系方式.aspx

```
 <form id="validForm">
    <div class="control-group">
      <label class="control-label" for="inputName">NAME<sup>*</sup></label>
          <div class="controls">
              <input type="text" class="span4" id="inputName" placeholder="Name"/>
          <span class="help-inline">Please fill your name</span>
          </div>
    </div>                                         
    <div class="control-group">
       <label class="control-label" for="inputEmail">EMAIL<sup>*</sup></label>
          <div class="controls">
            <input type="text" class="span4" id="inputEmail" placeholder="Email"/>
            <span class="help-inline">Please correct your email</span>
          </div>
     </div>                                        
     <div class="control-group">
        <label for="textarea" class="control-label">COMMENT<sup>*</sup></label>
        <div class="controls">
            <textarea rows="4" class="span8" id="textarea" runat="server" ></textarea>
            <span class="help-inline">Please write a comment</span>
        </div>
     </div>
     <div class="control-group form-button-offset">
           <input type="submit" class="btn" value="Send Message" />
           <%--   <asp:Button class="btn" Text="Send Message" runat="server" id="btnSubmit" OnClick="btnSubmit_Click" />--%>
    </div>
</form>                                
                                </div> 
```

## Mail_Validation.Js

```
var $mjq = jQuery.noConflict();
$mjq(function(){
    $mjq(document).ready(function(){
         $mjq(".help-inline").each(function() {
            $mjq(this).css('display', 'none');
         });
    });
    $mjq("#inputEmail").bind('blur', is_valid_email);
    $mjq("#inputName").bind('blur', is_valid_name);
    $mjq("#textarea").bind('blur', is_valid_comment);
    $mjq('#validForm').bind('submit', function() {
        return is_valid_form();
    });
}); 
```

我只`is_valid_form();`在按钮单击时调用过，仍然是父窗体覆盖它。

```
 <script type="text/javascript">
         $('.btn').click(function () {
             //$(this).closest('validForm')[0].submit();
             return is_valid_form();
         }); 
```

现在如何在这里验证我的表格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:54:48.987

您可以在一个页面上有多个表单，但您不应该根据[此](http://www.w3.org/TR/2011/WD-html5-20110525/forms.html#the-form-element)嵌套它们。

# ruby - 如何使用 ruby 脚本启动多个 Rails 应用程序服务器

> ID：15771612
> 
> 赞同：1
> 
> 时间：2013-04-02T18:29:28.203
> 
> 标签：ruby, shell, scripting, rvm, foreman

我正在编写一个 ruby​​ 脚本来启动多个 Rails 服务器，但我遇到了一些问题：

1.  当我以编程`cd`方式进入不同的项目时，不会触发它们各自的`.rvmrc`文件。我的项目都使用不同版本的 ruby​​ 并具有独特的 gemset，所以我需要我的脚本来识别它所在的环境，以便一切正常工作。我尝试以编程方式更改 gemset，但从 rvm 收到此错误：

    `RVM is not a function, selecting rubies with 'rvm use ...' will not work.`

2.  我正在使用工头来启动每个应用程序，这对于将多个启动命令提炼成一个漂亮而简单的命令非常有用`foreman start -p $PORT`，但我也希望每个应用程序的日志显示在它们自己的终端窗口中，或者更好的是，它们自己的选项卡. 我已经看到其他人通过applescript实现了这样的目标，但是有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T22:56:54.653

感谢大家的帮助。我最终使用了[consular](https://github.com/achiu/consular)`.rvmrc` ，它以尊重不同文件的方式处理脚本。有关我的具体解决方案的更多信息，请参阅[这篇文章](http://boredbusiness.tumblr.com/post/47686449581)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:20:39.313

它应该很简单：

```
rvm . do foreman start -p $PORT 
```

# javascript - Keydown键码未返回预期结果

> ID：15771615
> 
> 赞同：0
> 
> 时间：2013-04-02T18:29:34.833
> 
> 标签：javascript, jquery, keycode

我对 keydown 事件的 keyCode 属性返回的字符代码有点困惑。我期待这些代码与 ascii 代码一致。他们中的很多人似乎都这样做了，但我得到了一些意想不到的结果：例如删除键和“。” 钥匙

使用下面的代码：我得到以下代码： DeleteKey: 46 (ASCII val = 127)

德尔键：110

'。' : 190 - 这甚至不在默认的 ascii 表中。

似乎删除键映射到“。”的 Ascii 代码。钥匙

我正在使用 IE 9 进行测试。

这些应该映射到 ascii 表中的十进制条目是我的误解吗？

```
<script type="text/javascript">

    $(document).ready(function () {
        $("body").live("keydown", function (e) {
            console.log(e.keyCode);
        });
    });

</script>

<div id="parent">
<span id="target">Test</span>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:32:34.537

我不认为 keyCode 和 ASCII 是一样的。

要获取 keyCode 的值，您可以使用

```
$("body").live("keydown",function(e){
    console.log(String.fromCharCode(e.keyCode));
}) 
```

# ios - 删除 HTML 电子邮件周围的 MFMailComposeViewController 填充？

> ID：15771625
> 
> 赞同：2
> 
> 时间：2013-04-02T18:30:14.163
> 
> 标签：ios, html-email, mfmailcomposeviewcontroller

当创建一个`MFMailComposeViewController`并将消息正文设置为 HTML 时，我最终会在提供的标记周围留有边距。看起来好像`MFMailComposeViewController`是在获取传递给的 HTML`setMessageBody:isHTML:`并将其粘贴在一个容器中，其中包括所有侧面的填充和底部的 iPhone 电子邮件签名。

反正有没有摆脱这种填充？

# angularjs - ng-selected 是如何工作的？

> ID：15771629
> 
> 赞同：23
> 
> 时间：2013-04-02T18:30:39.183
> 
> 标签：angularjs

这是一个片段。正如我所料，选择了 Q2。

```
<select name="quarter" ng-model="Quarter" >
    <option value="1" >Q1</option>
    <option value="2" ng-selected="Quarter=='Q1'">Q2</option>
    <option value="3">Q3</option>
    <option value="4">4</option>
</select> 
```

更改`'Q1'`为`'Q2`' 不会像我预期的那样被选中。现在将`ng-selected="Quarter=='Q1'"`不会选择 Q1，直到我删除`ng-selected="Quarter=='Q2"`

wtf。这假设如何工作？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-02T18:53:55.220

如果您将 ng-selected 放在 option 元素上，则当 ng-selected 值为 true 时，您的选项将被选中。在您的情况下，当 Quarter 等于 Q1 时，选择了选项 Q2。

如果要选择 Quarter 中传递的值，则必须将 ng-selected 放在 select 元素上：

```
<select name="quarter" ng-model="Quarter" ng-selected="Quarter"
        ng-options="Quarter for Quarter in Quarters" >
    {{Quarter}}
</select> 
```

查看[select 指令文档](https://docs.angularjs.org/api/ng/directive/select)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-28T12:47:23.903

```
<select ng-model="hour">
    <option ng-selected="hour == $index" ng-repeat="h in (((b=[]).length=24)&&b) track by $index" ng-bind="$index">{{h}}</option>
</select> 
```

如果你想选择 24 小时，你可以这样做。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-03-04T02:39:34.217

像这样：

```
<body ng-controller="MainCtrl">
  {{referenceNumber}}
    <select ng-model="referenceNumber">
            <option ng-selected="!referenceNumber">Default</option>
            <option ng-repeat="number in numbers track by $index" ng-value="number">{{number}}</option>
        </select>
  </body> 
```

> “我相信 ngSelected 的主要原因之一是根据模型是否设置不正确来设置默认值。” joshkurz 于 2014 年 3 月 3 日发表评论

所以正确的方法是只在你的情况下依赖 ng-model 。做你想做的事情的正确方法（预先选择一个选项）是这样的：

```
<select ng-model="purchase.product" name="purchase.product" class="u-full-width" ng-options="product.id as product.name for product in products"></select> 
```

参考：

1.  [http://plnkr.co/edit/xXq3b40nvqkjPlyCxZNG?p=preview](http://plnkr.co/edit/xXq3b40nvqkjPlyCxZNG?p=preview)
2.  [https://github.com/angular/angular.js/issues/6528](https://github.com/angular/angular.js/issues/6528)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-29T06:49:56.040

该`ng-selected`指令采用布尔值或导致真/假布尔结果的表达式。

您只需要传递它的值`true`以使其工作或导致`true`.

`<select>`它与标签的ng-model无关。

以下是此行为的示例：

```
<select name="quarter" ng-model="Quarter" >
    <option value="1" >Q1</option>
    <option value="2" ng-selected="true">Q2</option>
    <option value="3">Q3</option>
    <option value="4">Q4</option>
</select> 
```

这将使选项 Q2 默认选中。

# c# - Jenkins 是否支持 XUnit.Net？

> ID：15771635
> 
> 赞同：13
> 
> 时间：2013-04-02T18:30:58.433
> 
> 标签：c#, jenkins, xunit.net

我习惯于 XUnit.net 来满足我在 C# 项目中的所有单元测试需求。对于我的个人项目，我使用 TeamCity 作为我的 CI 服务器并使用正确的插件，单元测试已正确启动，结果在 TeamCity 中正确报告。

然而，在工作中，我们必须使用 Jenkins 作为我们的 CI 服务器。我想知道 Jenkins 是否正确支持 XUnit.net（以及 XUnit.net 理论）。我见过一个插件 XUnit for Jenkins，它可以支持各种 XUnit 框架，但是我没有找到任何与 Jenkins 中的 XUnit.net 框架支持特别相关的指南或讨论。

我主要想知道我是否可以开始实施基于 XUnit.net 的单元测试（也有理论），并请放心，Jenkins 将正确报告所有运行的测试（并正确地将每个理论视为不同的测试）......或者如果我遇到问题，应该改用 NUnit。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2015-03-02T01:34:40.167

这是一个古老的问题，但我认为在这里强调它作为答案是有道理的，以便为将来对它感兴趣的人节省一些时间：

从版本**1.93** [xUnit+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/xUnit+Plugin)（Jenkins 的通用单元测试插件）**开始**支持**xUnit.net v2**（.NET 的单元测试框架）：

![xUnit 插件中的 xUnit.net 支持](https://i.stack.imgur.com/ujf2I.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-16T23:02:25.217

Jenkins 和 xUnit.net 的共同点是它们都支持 NUnit 的 XML 格式。

将构建步骤添加到调用 xunit 控制台运行程序的 Jenkins 配置中，如下所示： xunit.console.exe tests.dll /nunit test_report.xml

然后添加一个 NUnit 插件（或通用的 xunit 插件）并将其指向您的 nunit 格式报告文件。

** 免责声明：上次我使用 Jenkins 时仍然叫 Hudson，而且我从未使用过 xUnit.net，所以这可能不准确。

# excel - 使用excel连接三列数据

> ID：15771636
> 
> 赞同：0
> 
> 时间：2013-04-02T18:30:59.350
> 
> 标签：excel

我有一个包含三列的 excel 文件：

姓名 | 年龄 | 笔记

我需要创建一个列，其中包含这三个列的数据并在其间用下划线连接起来。

例如：

约翰 | 89 | 帅气 |

应该看起来像

john_89_handsome。

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T18:33:06.823

此公式允许您以您想要的形式连接值：

```
= A1 & "_" & B1 & "_" & C1 
```

# javascript - 如何正确创建水平方向的动态选择？

> ID：15771637
> 
> 赞同：2
> 
> 时间：2013-04-02T18:31:02.200
> 
> 标签：javascript, jquery, jquery-mobile

我想`select`在水平块中动态地创建元素。并有有趣的结果。正确的方法是什么？

[JSFiddle](http://jsfiddle.net/vgulaev/VMj4U/3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:32:31.680

您需要定义要附加新元素的位置。为此，使用`.after()`. 然后您需要在生成/修改的控制组上应用样式。

在这里演示：http: [//jsfiddle.net/Palestinian/rKGtQ/](http://jsfiddle.net/Palestinian/rKGtQ/)

代码：

```
// append select menu after Button div
$("#Button_show_filters").after('<select id="sm"><option>Opt 1</option><option>Opt 2</option></select>');

// apply styles on select menu
$("#sm").selectmenu();

// add options to controlgroup 
$( "#test" ).controlgroup( "option", "corners", true );

// create controlgroup
$( "#test" ).controlgroup().trigger('create'); 
```

*控制组 div ID 是`#test`.*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T18:40:13.300

我认为主要问题是每次“推我！！” 按下按钮时，您将附加一个`id`属性为的选择元素`sm`。具有相同 id 的多个元素是无效的 HTML，可能会导致 Javascript 出现问题。看到[这个问题](https://stackoverflow.com/questions/7505350/why-is-it-a-bad-thing-to-have-multiple-html-elements-with-the-same-id-attribute)。

即，该`$("#sm")`行不知道您要针对哪个选择。

也许你应该尝试这样的事情：

```
$("button").click(function () {
    $("#div_for_harakteristikinomenklatury_list").append('<select><option>Opt 1</option><option>Opt 2</option></select>');
    $("#div_for_harakteristikinomenklatury_list select:last").selectmenu();
}); 
```

此外，您应该摆脱`onclick`按钮的属性。你不需要它。将单击处理程序传递给`click`函数应该使函数在单击按钮时运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T18:42:08.467

而不是使用 id 您应该使用 class 并仅在最后附加的选择元素上应用 selctmenu。检查这个小提琴

```
$("button").click(function show_filters() {
//alert("Hello");
    $("#div_for_harakteristikinomenklatury_list").append('<select class="sm"><option>Opt 1</option><option>Opt 2</option></select>');
    $(".sm:last").selectmenu();
}) 
```

[**更新小提琴**](http://jsfiddle.net/VMj4U/4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T19:00:07.643

更改`$("#sm").selectmenu();`为`$("select").selectmenu();`

使用上述方法，无论您新推送的元素的 id 或类是什么，它都会应用样式。

在此处查看现场小提琴[http://jsfiddle.net/mayooresan/VMj4U/6/](http://jsfiddle.net/mayooresan/VMj4U/6/)

# c - C中的内存分配和指针

> ID：15771638
> 
> 赞同：2
> 
> 时间：2013-04-02T18:31:02.543
> 
> 标签：c, pointers, malloc

我正在为考试而学习，我遇到了一些我觉得很难理解的东西。我们正在处理指针和内存分配，而我只是在玩弄一些东西，试图看看是什么改变了什么。我有这段代码：

```
int * arr[10];
for(i=0; i<5;i++) 
{
    int index = i;
    arr[index] = malloc(sizeof(int*));
    int i = 2 * index;
    *arr[index] = i;
    printf("arr [%d] = %d\n", index, *arr[index]);  /* should be 0, 2, 4, 6, 8 */
} 
```

但我发现，如果我不使用 *arr[index] = i，而是使用 arr[index] = &i，我就不需要`malloc`. 我一直认为这两件事本质上是同一件事，但肯定有一些我不明白的关键区别来保证`malloc`与一个一起使用。

我真的很困惑为什么我`malloc`真的需要在这里。我对内存分配相当陌生，我真的不明白什么时候应该使用它（显然）并且想知道是否有人可以为我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T18:33:29.397

试试这个代码：

```
int * arr[10];
for(i=0; i<5;i++) 
{
    int index = i;
    int value = 2*i;
    arr[index] = malloc(sizeof(int*));
    *arr[index] = value;
}

for (i=0; i<5; i++)
{
    int index = i;
    printf("arr [%d] = %d\n", index, *arr[index]);  /* should be 0, 2, 4, 6, 8 */
} 
```

如果您进行建议的更改，您现在将有未定义的行为。而此代码仍然有效。

您将有未定义的行为，因为`*arr[0]`现在指向一块已离开范围的堆栈内存。

* * *

你的 malloc 实际上应该是`malloc(sizeof(int))`. 您正在为 a 分配空间`int`，而不是为 a分配空间`int *`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T18:45:14.317

是的，我认为这很难理解，因为我在 for 中间被重新定义了。我马上重写代码。我写了 i 而不是 index 和 2*i 而不是重新定义的 i。

```
int * arr[10];
for(i=0; i<5;i++) 
{
    arr[i] = malloc(sizeof(int));
    *arr[i] = 2*i;
    printf("arr [%d] = %d\n", i, *arr[i]);  /* should be 0, 2, 4, 6, 8 */
} 
```

您实际上并不需要动态内存，您知道将使用数组 0-4。当您不知道需要多少数据时，您需要动态内存。编写此代码，以便您的其余代码仍然可以工作，但没有 malloc。

```
int array[5];
int **arr=array; 
```

下面的代码意味着，array[index] 应该指向存储 i 的内存地址。它不会复制 i 中的值，所以当你更改 i，或者 i 被删除时，这将导致这个指针是故障，并在以后引起问题。你不应该这样做。

```
arr[index] = &i 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T18:46:15.697

这样写：

```
*arr[index] = i; 
```

方法：将 的值复制`i`到 指向的内存位置`arr[index]`（在您的代码中之前分配的位置）。

```
arr[index] = &i; 
```

意思是：复制到的`i`地址`arr[index]`。

在您的代码`i`中自动创建在 for 循环内，并且只存在于该循环内。一旦离开循环（范围），用于存储的内存就`i`可以自由地用于任何新创建的变量的一部分。

正如 sharth 所建议的，尝试查看原始 for 循环之外的值以查看一些有趣的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T18:38:39.483

**编辑：** 我在下面说你没有显示如何`i`声明。`i`实际上，您重新声明它，如果在循环中使用，则隐藏原始值。无论如何，`i`将在循环结束时超出范围，或者很可能在例程结束时。

你没有`i`在这里展示如何声明。但是，在大多数情况下，它是一个局部变量，或者可能是传递给方法的参数。在任何一种情况下，该变量的空间都在堆栈上声明。您可以使用 获取该变量的地址`&i`，但该变量将在方法结束后消失并且代码将这些值从堆栈中弹出。您可能会很幸运，并且只要您需要，该价值就不会受到影响。但是当另一个方法被调用时，该值很可能被覆盖并繁荣，你的程序充其量只能表现不正确。

`i`如果在全局范围内声明，您可以逃脱惩罚。

此外，即使在更改`i`. 如果在例程结束时打印出数组的所有值，您会看到它们都是相同的值 - 您放入数组的最后一个值。这是因为数组中的每个条目都指向同一个位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T18:34:08.880

一个关键的区别是，一旦超出范围，它`&i`就会不复存在（或者，更确切地说，那块内存可以被重用于其他东西......它可能不会包含你认为它包含的东西）。`i`

# ipad - iPhone 5 和 iPad CSS 媒体查询

> ID：15771642
> 
> 赞同：1
> 
> 时间：2013-04-02T18:31:08.803
> 
> 标签：ipad, ios6, responsive-design, media-queries, iphone-5

我正在使用具有 3 个桌面和 iPad 视图的站点，两个视图都指向一个视图，而对于 iPhone/iPod 则是另一个视图，第三个是警告将您的设备变成纵向，因为在该方向上可以更好地欣赏图形，问题是 iPhone5 横向获得了一点 iPad 版本，我的意思是它隐藏了大部分内容，但它没有向我显示旋转设备的警告，任何想法或建议，这是媒体查询。

```
/* ---------- iPhone/iPod Only Portrait ---------- */
@import url('../css/portrait.css') only screen and (min-device-width: 320px) and (max-device-width: 480px) and (orientation: portrait);
/* ---------- Retina iPhone/iPod Only Portrait ---------- */
@import url('../css/portrait.css') only screen and (min-device-width: 320px) and (max-device-width: 480px) and (orientation: portrait) and (-webkit-min-device-pixel-ratio: 2) and (min-device-pixel-ratio : 2) and (max--moz-device-pixel-ratio: 2);
/* ---------- Non Retina iPhone/iPod Only Portrait ---------- */
@import url('../css/portrait.css') only screen and (min-device-width: 320px) and (max-device-width: 480px) and (orientation: portrait) and (-webkit-min-device-pixel-ratio: 1) and (min-device-pixel-ratio : 1) and (max--moz-device-pixel-ratio: 1);
/* ---------- iPhone5 portrait Only ---------- */
@import url('../css/portrait.css') only screen and (min-device-width: 320px) and (max-device-width: 568px) and (orientation: portrait) and (-webkit-min-device-pixel-ratio: 2) and (min-device-pixel-ratio : 2) and (max--moz-device-pixel-ratio: 2);

/* ---------- iPhone/iPod Only Landscape ---------- */
@import url('../css/landscape.css') only screen and (min-device-width: 320px) and (max-device-width: 480px) and (orientation: landscape);
/* ---------- Retina iPhone/iPod Only landscape ---------- */
@import url('../css/landscape.css') only screen and (min-device-width: 320px) and (max-device-width: 480px) and (orientation: landscape) and (-webkit-min-device-pixel-ratio: 2) and (min-device-pixel-ratio : 2) and (max--moz-device-pixel-ratio: 2);
/* ---------- Non Retina iPhone/iPod Only landscape ---------- */
@import url('../css/landscape.css') only screen and (min-device-width: 320px) and (max-device-width: 480px) and (orientation: landscape) and (-webkit-min-device-pixel-ratio: 1) and (min-device-pixel-ratio : 1) and (max--moz-device-pixel-ratio: 1);
/* ---------- iPhone5 landscape Only ---------- */
@import url('../css/landscape.css') only screen and (min-device-width: 320px) and (max-device-width: 568px) and (orientation: landscape) and (-webkit-min-device-pixel-ratio: 2) and (min-device-pixel-ratio : 2) and (max--moz-device-pixel-ratio: 2);

/* ---------- iPad Only Portrait---------- */
@import url('../css/style_respond.css') only screen and (min-device-width:  768px) and (max-device-width: 1024px) and (orientation: portrait);
/* ---------- iPad Portrait Retina Device Only ---------- */
@import url('../css/style_respond.css') only screen and (min-device-width:  768px) and (max-device-width: 1024px) and (orientation: portrait) and (-webkit-min-device-pixel-ratio: 2)and (min-device-pixel-ratio : 2) and (max--moz-device-pixel-ratio: 2);
/* ---------- iPad Portrait Non Retina Device Only ---------- */
@import url('../css/style_respond.css') only screen and (min-device-width:  768px) and (max-device-width: 1024px) and (orientation: portrait) and (-webkit-min-device-pixel-ratio: 1)and (min-device-pixel-ratio : 1) and (max--moz-device-pixel-ratio: 1) ;

/* ---------- iPad Only landscape---------- */
@import url('../css/style_respond.css') only screen and (min-device-width: 768px) and (max-device-width: 1024px) and (orientation: landscape); 
/* ---------- iPad landscape Retina Device Only ---------- */
@import url('../css/style_respond.css') only screen and (min-device-width: 768px) and (max-device-width: 1024px) and (orientation: landscape) and (-webkit-max-device-pixel-ratio: 2)and (min-device-pixel-ratio : 2) and (max--moz-device-pixel-ratio: 2) ;
/* ---------- iPad landscape Non Retina Device Only ---------- */
@import url('../css/style_respond.css') only screen and (min-device-width: 768px) and (max-device-width: 1024px) and (orientation: landscape) and (-webkit-max-device-pixel-ratio: 1)and (min-device-pixel-ratio : 1) and (max--moz-device-pixel-ratio: 1) ;

@import url('../css/style_respond.css') screen and (orientation:landscape) and (min-width: 1024px); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:13:53.110

你为什么将它与@import 一起使用？在同一个 css 文件中，导入 css 的效率不如 @media screen 方法。您可以在同一个样式表中为所有设备（iPhone、iPad 或桌面）定义所有响应式（横向或纵向）规则。[试试这个，了解关于 Mediaqueries 的 Web Designer 博客](http://webdesignerwall.com/tutorials/css3-media-queries)的基本指南。. 之后获取所有特定设备，如[iPhone 5 和 iPad](http://www.stephentgilbert.com/mediaqueries/)，从[这里开始。](http://www.stephentgilbert.com/mediaqueries/) 希望这些能帮助你。

# java - 在地图上可视化成员数量

> ID：15771644
> 
> 赞同：0
> 
> 时间：2013-04-02T18:31:11.697
> 
> 标签：java, html, geolocation

我正在为一家网球俱乐部建立一个在线预订系统，我想在比利时地图上可视化我们的会员人数，每个地区/村庄或城市都有人数（尽可能）。

我该怎么做？

我想使用谷歌地图之类的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:38:56.430

例如，您可以将[OpenStreetMap](http://openstreetmap.org)与[自定义标记](http://wiki.openstreetmap.org/wiki/Marker_API)一起使用。[谷歌地图](https://developers.google.com/maps/documentation/javascript/training/customizing/custom-markers)提供了相同的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:35:48.130

您可以使用[谷歌地图图层](https://developers.google.com/maps/documentation/javascript/layers)。但是，这取决于您拥有什么样的数据。

# entity-framework - EF代码首先是MVC4-编辑时ArgumentNullException-我在这里做错了什么？

> ID：15771645
> 
> 赞同：0
> 
> 时间：2013-04-02T18:31:12.727
> 
> 标签：entity-framework, asp.net-mvc-4, ef-code-first

假设我有 3 个模型：

```
[Table("UserProfile")]
public class UserProfile //this is a standard class from MVC4 Internet template
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
}

public class Category
{
    public int Id { get; set; }
    public string Name { get; set; }

    public virtual ICollection<Post> Posts { get; set; }
}

public class Post
{
    public int CategoryId { get; set; }
    public virtual Category Category { get; set; }

    public int UserProfileId { get; set; }
    [ForeignKey("UserProfileId")]
    public virtual UserProfile UserProfile { get; set; }
} 
```

现在，我正在尝试编辑*帖子*

```
 [HttpPost]
        public ActionResult Edit(Post post)
        {

            post.UserProfileId = context.UserProfile.Where(p => p.UserName == User.Identity.Name).Select(p => p.UserId).FirstOrDefault();

            //I have to populate post.Category manually 
            //post.Category = context.Category.Where(p => p.Id == post.CategoryId).Select(p => p).FirstOrDefault();

            if (ModelState.IsValid)
            {
                context.Entry(post.Category).State = EntityState.Modified; //Exception
                context.Entry(post.UserProfile).State = EntityState.Modified;
                context.Entry(post).State = EntityState.Modified;
                context.SaveChanges();
                return RedirectToAction("Index");
            }

            return View(post);
        } 
```

我得到了*ArgumentNullException*。快速查看调试，我可以看出我的*Category*是*null*，尽管*CategoryId*设置为正确的值。

注释掉的，看起来很讨厌的技巧**解决了这个问题**，但我想它根本不应该存在。所以问题是**如何正确解决它**。

我会说它与 EF 延迟加载有关，因为我有非常相似的代码来添加*Post*并且在调试中有相同的场景：正确*CategoryId*，*Category*为*null*并且尽管 EF 自动解决了*Post* <-> *Category*依赖，我不必使用任何额外的技巧。在编辑方法上，EF 有一些问题，但我无法弄清楚我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:04:48.723

这是按预期工作的。您的`Post`对象未附加到上下文，因此没有理由进行任何延迟加载。这是完整的代码吗？我不明白为什么你需要设置 Category`Modified`因为你实际上并没有改变它的任何内容。

无论如何，我建议您从数据库中查询现有帖子并分配您要让用户修改的相关字段，如下所示：

```
[HttpPost]
public ActionResult Edit(Post post)
{
    var existingPost = context.Posts
        .Where(p => p.Id == post.Id)
        .SingleOrDetault();

    if (existingPost == null)
        throw new HttpException(); // Or whatever you wanna do, since the user send you a bad post ID

    if (ModelState.IsValid)
    {
        // Now assign the values the user is allowed to change
        existingPost.SomeProperty = post.SomeProperty;
        context.SaveChanges();

        return RedirectToAction("Index");
    }

    return View(post);
} 
```

这样，您还可以确保用户尝试编辑的帖子确实存在。仅仅因为您收到了一些操作参数，并不意味着它们是有效的或帖子的 ID 是真实的。例如，一些不怀好意的用户可能决定编辑他不允许编辑的帖子。你需要检查这种事情。

**更新**

附带说明一下，您还可以避免手动查询当前用户的 ID。如果您正在使用`Simple Membership`，您可以使用`WebSecurity.CurrentUserId`.
如果你正在使用`Forms Authentication`，你可以做到`Membership.GetUser().ProviderUserKey`。

# ios - 未声明的变量 W 无效

> ID：15771646
> 
> 赞同：-1
> 
> 时间：2013-04-02T18:31:13.557
> 
> 标签：ios, objective-c

我正在尝试修复一个错误，该错误表明滑块未声明变量我需要一些快速帮助

h.文件

```
@interface LightViewController : UIViewController {
IBOutlet UISlider *slider;
IBOutlet UISlider *theslider;
IBOutlet UISlider *customslider;
UIButton *onButton;
UIButton *offButton;
UIImageView *onView;
UIImageView *offView;
}

@property(nonatomic, strong) IBOutlet UIButton *onButton;
@property(nonatomic, strong) IBOutlet UIButton *offButton;
@property(nonatomic, strong) IBOutlet UIImageView *onView;
@property(nonatomic, strong) IBOutlet UIImageView *offView;
@property(nonatomic, readonly) float torchLevel;

-(BOOL)setTorchModeOnWithLevel:(float)torchLevel error:(NSError **)outError;
-(BOOL)supportsAVCaptureSessionPreset:(NSString *)preset;
-(IBAction)torchOn:(id)sender;
-(IBAction)torchOff:(id)sender;
@end 
```

m.文件

```
- (void)sliderDidChange:(UISlider *)slider
{
AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
[device lockForConfiguration:nil];
[device setTorchModeOnWithLevel:slider.value error:NULL];
[device unlockForConfiguration];
} 
```

# php - div 内容更改功能无法识别

> ID：15771652
> 
> 赞同：0
> 
> 时间：2013-04-02T18:31:27.963
> 
> 标签：php, javascript, jquery, html

您好，感谢您的宝贵时间！

我正在尝试为类别设置按钮，当单击时加载该类别在 vis Contained div 中的第一项。然后加载的 div 数据中的“下一个”和“上一个”按钮切换到该类别中的其他项目。

到目前为止，我有：

php:

```
<nav>
    <button onclick="changeContent('content1')">content1</button>
</nav>
<section id="main">
    <div id="visContainer"><div>
    </div>
</section

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/js/jquery.min.js"><\/script>')</script>
<script src="js/javascript.js"></script> 
```

js：

```
 $(function(){
        function changeContent(content){
            $('#visContainer').load('divList.html' content);
    };
}); 
```

以及一个 divList.html 文件，其中列出了不同的 div（现在填充 w 文本）。我在 js 的函数 changeContent 行上得到一个“意外标识符”，它一直说 changeContent 没有定义（单击按钮时）。我认为这可能与我的声明或 jQuery 有关，但我不知道在哪里。我是新手，所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:34:14.200

```
$(function(){ ... }); 
```

该函数创建了一个新范围，使`changeContent`您的内联事件处理程序所在的窗口范围不可用。快速修复将是：

```
$(function(){
    window.changeContent = function(content){
        $('#visContainer').load('divList.html' content);
    }
}); 
```

更好的解决方案是删除内联事件处理程序。

```
<button id="myButton">content1</button> 
```

和JS：

```
$(function(){
    $('myButton').on('click', function() {
        $('#visContainer').load('divList.html #content1');
    });
}); 
```

# c# - 任何方法类型的委托 - C#

> ID：15771653
> 
> 赞同：18
> 
> 时间：2013-04-02T18:31:28.507
> 
> 标签：c#, generics, reflection, delegates, method-signature

我想要一个可以执行任何外部方法的类，如下所示：

```
class CrazyClass
{
  //other stuff

  public AnyReturnType Execute(AnyKindOfMethod Method, object[] ParametersForMethod)
  {
    //more stuff
    return Method(ParametersForMethod) //or something like that
  }
} 
```

这可能吗？是否有接受任何方法签名的委托？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-02T18:33:48.543

您可以通过`Func<T>`闭包以不同的方式执行此操作：

```
public T Execute<T>(Func<T> method)
{
   // stuff
   return method();
} 
```

然后调用者可以使用闭包来实现它：

```
var result = yourClassInstance.Execute(() => SomeMethod(arg1, arg2, arg3)); 
```

这里的好处是你允许编译器为你做艰苦的工作，方法调用和返回值都是类型安全的，提供智能感知等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T18:41:04.660

我认为在这种情况下你最好使用反射，因为你会得到你在问题中所要求的 - 任何方法（静态或实例），任何参数：

```
public object Execute(MethodInfo mi, object instance = null, object[] parameters = null)
{
    return mi.Invoke(instance, parameters);
} 
```

是`System.Reflection.MethodInfo`上课。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-02T18:48:47.700

有点取决于你为什么要首先这样做......我会使用 Func 泛型来做到这一点，这样 CrazyClass 仍然可以不知道参数。

```
class CrazyClass
{
    //other stuff

    public T Execute<T>(Func<T> Method)
    {
        //more stuff
        return Method();//or something like that
    }

}

class Program
{
    public static int Foo(int a, int b)
    {
        return a + b;
    }
    static void Main(string[] args)
    {
        CrazyClass cc = new CrazyClass();
        int someargs1 = 20;
        int someargs2 = 10;
        Func<int> method = new Func<int>(()=>Foo(someargs1,someargs2));
        cc.Execute(method);
        //which begs the question why the user wouldn't just do this:
        Foo(someargs1, someargs2);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-27T08:35:20.937

```
public static void AnyFuncExecutor(Action a)
{
    try
    {
        a();
    }
    catch (Exception exception)
    {
        throw;
    }
} 
```

# php - 计算后转换为整数并返回字符串

> ID：15771656
> 
> 赞同：0
> 
> 时间：2013-04-02T18:31:40.037
> 
> 标签：php, arrays, string, integer

我有一个如下数组，我已将其放入一个名为 $testcoords 的数组中

```
array (
  0 => '\'263',
  1 => '252',) 
```

我想提取数值并对其进行操作，然后将它们放回字符串中。我正在尝试使用以下代码：

```
$tc2 = explode(":",$testcoords);
$tcx = (int)(trim($tc2[0],"'\'");
$tcy = (int)(trim($tc2[1],"'");
$tcx2 = (($tcx)*(600/386));
$tcy2 = (($tcy)*(600/386));
$xtrans = (string)$tcx2;
$ytrans = (string)$tcy2; 
```

到目前为止，我知道修剪函数有效 - 只是 (trim($tc2[0],"'\'") 或 (trim($tc2[1],"'") 以两个字符串返回我的数值。

现在我想做的是把这些数值转换为我试图与修剪函数结合的整数。一旦它们是整数，我想转回字符串并发布结果。

当我尝试这样做时，我没有得到任何结果。直到修剪数据的步骤很好。

例如，如果我只是这样做

```
$tcx = (trim($tc2[0],"'\'");
$tcy = (trim($tc2[1],"'"); 
```

对于上面列出的数组，并回显结果，我在回复中得到 263 和 252。

感谢有关如何完成其​​余部分的任何指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:34:57.490

这是一个语法错误。您没有认识到这一点，因为您禁用了错误报告。您可以使用 php.ini 设置`display_errors=1`或`log_errors=1`与`error_reporting=E_ALL`. 您也可以通过发出以下命令在脚本中执行此操作：

```
ini_set('display_errors', 1); // for development 
ini_set('display_errors', 0); // for production (display_errors would be a security risk)
ini_set('log_errors', 1); // for both development and production
ini_set('error_reporting', E_ALL); 
```

* * *

错误：转换为 int 时缺少右括号。`)`

用这个：

```
$tcx = (int)(trim($tc2[0],"'\'")); // <-- note the second closing ')'
$tcy = (int)(trim($tc2[1],"'")); 
```

进一步注意，这可以简化为

```
$tcx = (int)(trim($tc2[0],"'\'"); // <-- note the second closing ')'
$tcy = (int)(trim($tc2[1],"'"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:35:26.633

您之前在这些行上有一个不必要且未闭合的括号`trim`

```
$tcx = (int)(trim($tc2[0],"'\'");
$tcy = (int)(trim($tc2[1],"'"); 
```

将这些更改为：

```
$tcx = (int)trim($tc2[0],"'\'");
$tcy = (int)trim($tc2[1],"'"); 
```

另外，在开发时打开error_reporting，你会看到这些错误被清楚地记录下来。

# visual-studio-2010 - Visual Studio 如何生成类模板？

> ID：15771661
> 
> 赞同：2
> 
> 时间：2013-04-02T18:32:10.227
> 
> 标签：visual-studio-2010, templates, t4, codedom

当我们在 Visual Studio 中添加一个新类时，我们会得到一个模板代码

```
namespace MyProject
{
    class Class1
    {
    }
} 
```

Visual Studio 如何生成此代码？它是否使用 CodeDOM 或 T4Template 或其他东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T20:26:38.777

Visual Studio 有自己的[项目和文件模板](http://msdn.microsoft.com/en-us/library/vstudio/6db0hwky%28v=vs.100%29.aspx)。例如，C# 类文件模板包含在带有 xml 元数据文件和类模板的 .zip 文件中：

```
using System;
using System.Collections.Generic;
$if$ ($targetframeworkversion$ >= 3.5)using System.Linq;
$endif$using System.Text;

namespace $rootnamespace$
{
    class $safeitemrootname$
    {
    }
} 
```

Visual Studio 在基于这些模板创建新文件时，很可能会对 $ 美元之间定义的各种参数进行简单的字符串替换。

如果您查看 Visual Studio 文件夹，您可以找到包含文件和项目模板的各种 .zip 文件。Visual Studio 2010 的文件模板包含在父文件夹内的子文件夹中：

C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\ItemTemplates

# javascript - div内的谷歌新闻框

> ID：15771662
> 
> 赞同：0
> 
> 时间：2013-04-02T18:32:15.097
> 
> 标签：javascript, css, ajax

我正在尝试在我的网站上的 div 中放置谷歌新闻搜索。我目前正在使用谷歌提供的脚本，但我是 Ajax/JavaScript 的新手。我能够显示来自谷歌新闻的最新故事，但不知道如何在 div 中显示它，更不用说使用 CSS 操作样式了。下面是我正在使用的代码。任何帮助将不胜感激！

```
<script type="text/javascript">

    google.load('search', '1');

    var newsSearch;

    function searchComplete() {

      // Check that we got results
      document.getElementById('averagecontainer').innerHTML = '';
      if (newsSearch.results && newsSearch.results.length > 0) {
        for (var i = 0; i < newsSearch.results.length; i++) {

          // Create HTML elements for search results
          var p = document.createElement('p');
          var a = document.createElement('a');
          a.href = newsSearch.results[i].url;
          a.innerHTML = newsSearch.results[i].title;

          // Append search results to the HTML nodes
          p.appendChild(a);
          document.body.appendChild(p);
        }
      }
    }

    function onLoad() {

      // Create a News Search instance.
      newsSearch = new google.search.NewsSearch();

      // Set searchComplete as the callback function when a search is 
      // complete.  The newsSearch object will have results in it.
      newsSearch.setSearchCompleteCallback(this, searchComplete, null);

      // Specify search quer(ies)
      newsSearch.execute('Barack Obama');

      // Include the required Google branding
      google.search.Search.getBranding('branding');
    }

    // Set a callback to call your code when the page loads
    google.setOnLoadCallback(onLoad);

    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:14:15.670

如果我理解正确，这就是您需要的：

创建`<div>`并给它一个ID：

```
<div id="your-div">HERE BE NEWS</div> 
```

然后像这样修改 searchComplete 函数：

```
function searchComplete() {

  var container = document.getElementById('your-div');
  container.innerHTML = '';

  if (newsSearch.results && newsSearch.results.length > 0) {
    for (var i = 0; i < newsSearch.results.length; i++) {

      // Create HTML elements for search results
      var p = document.createElement('p');
      var a = document.createElement('a');
      a.href = newsSearch.results[i].url;
      a.innerHTML = newsSearch.results[i].title;

      // Append search results to the HTML nodes
      p.appendChild(a);
      container.appendChild(p);
    }
  }
} 
```

至于样式操作，您可以通过 css 中的给定 ID 匹配元素。例如像这样：

```
#your-div a {
    font-weight: bold;
} 
```

编辑：

为了向您展示这是有效的，我创建了一个 jsfiddle：http: [//jsfiddle.net/enjkG/](http://jsfiddle.net/enjkG/)

你可以在这里搞砸的事情并不多。我认为您可能有语法错误并且没有检查控制台是否有错误。

# sql-server - 检查文本中是否存在所有单词片段

> ID：15771663
> 
> 赞同：1
> 
> 时间：2013-04-02T18:32:20.660
> 
> 标签：sql-server, sql-server-2008-r2

我想检查给定文本中是否**所有**给定的单词片段都以任何顺序存在。

这些片段由 Web 应用程序用户在单个字符串中提供，由空格分隔，例如*'abc xyz kj'*。它们存在于*'mn kj qabc pc xyzw'*中，但不存在于*'mn kj qabc pc xyw'*中。

我编写了以下有效的函数，但它看起来很复杂，所以我一定做错了。关于不同方法或如何使其执行的任何想法？

顺便说一句，数据库对我来说是只读的，所以我不能对其进行全文索引，所有者也不会这样做。

```
create function dbo.tem_fragmentos(
    @texto varchar(max), 
    @fragmentos varchar(max)
)
returns bit as
begin
    declare 
        @inicio integer = 1,
        @fim integer,
        @fragmento varchar(max);

    set @fragmentos = ltrim(rtrim(@fragmentos));
    while charindex('  ', @fragmentos) > 0
        set @fragmentos = replace(@fragmentos, '  ', ' ');

    while @inicio <= len(@fragmentos) begin
        set @fim = charindex(' ', @fragmentos, @inicio + 1);
        if @fim = 0 set @fim = len(@fragmentos) + 1;
        set @fragmento = substring(@fragmentos, @inicio, @fim - @inicio);
        if charindex(@fragmento, @texto) = 0 return 0;
        set @inicio = @fim + 1;
    end -- while
    return 1;
end;

select dbo.tem_fragmentos('clodoaldo pinto neto', ' clo cl nto pinto'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:02:23.393

我就是这样做的。不确定它是否不那么令人费解......

```
Create  Function dbo.tem_fragmentos
        (
            @texto varchar(max), 
            @fragmentos varchar(max)
        )
Returns Bit As
Begin   
        Declare @table Table (fragmentos Varchar(Max))
        Set     @fragmentos = Ltrim(Rtrim(@fragmentos))

        While @fragmentos <> ''
        Begin
                Insert  @table (fragmentos)
                Select  Left(@fragmentos,Charindex(' ',@fragmentos+' ')-1)

                Set     @fragmentos = Ltrim(Rtrim(Right(@fragmentos,Len(@fragmentos)-(Charindex(' ',@fragmentos+' ')-1))));
        end

        If      Exists (Select 1
                        From @table t
                        Where @texto Not Like '%' + fragmentos + '%')
        Begin
                Return 0;
        End
        Return 1;
End;

Select  dbo.tem_fragmentos('clodoaldo pinto neto', ' clo cl nto pinto'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:40:10.557

我假设您的文本存在于数据库表中，否则您不会让数据库服务器完成这项工作。那么，为什么不让您的应用程序打破空格上的字符串并构建动态 SQL，例如：

```
select *
from MyTable 
where charindex('abc', MyColumn) > 0
    and charindex('xyz', MyColumn) > 0
    and charindex('kj', MyColumn) > 0 
```

**更新：**

如果您不想使用动态 SQL，我会在我的应用程序中将输入拆分为单词，然后使用表值参数 (TVP) 将单词列表传递给查询。然后是一个简单的左连接来确定它们是否都匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T05:27:09.910

听起来通配符`LIKE`搜索应该适合您：

```
declare @texto varchar(max) = 'mn kj q abc pc xyzw', 
        @fragmentos varchar(max) = 'abc xyz kj'
/*
yes = 'mn kj qabc pc xyzw' 
 no = 'mn kj qabc pc xyw'
*/

--use your own number table
declare @number table (n int identity(1,1) primary key clustered, x char(1) null);
insert into @number(x)
    select top 1000 null from master..spt_values

select  [IsMatch] = min(case when @texto like '%'+substring(@fragmentos, n, charindex(' ', @fragmentos + ' ', n) - n)+'%' then 1 else 0 end)
from    @number
where   n <= datalength(@fragmentos)+1 and 
        substring(' ' + @fragmentos, N, 1) = ' '; 
```

# c# - 错误帮助：越界

> ID：15771671
> 
> 赞同：2
> 
> 时间：2013-04-02T18:32:57.280
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

```
@foreach (var item in Model)
{
    <li>
        <div class="lnewsblock">
            <p class="newsthumb">
                <img src="@Html.Raw(item.ShortImage)" width="90" height="71" alt="" /></p>
            <p class="datetxt">@Html.Raw(item.Date.Value.ToString("ddd MM.dd.yyyy"))</p>
            <h2> <a href="/resources/newsdetail?id=@Html.Raw(item.ID.ToString())">@Html.Raw(item.Title)</a></h2>
            <p class="greytxt">@Html.Raw(item.Description.Left(125))<a href="/resources/newsdetail?id=@Html.Raw(item.ID.ToString())"> more</a></p>
        </div>
    </li>
} 
```

上面的代码导致了几个问题。您会注意到它正在拉短图像，这很好。但是，如果**没有要 pull 的图像**，则会产生错误。我将如何修复代码来解决这个问题？

其次，当它拉取项目描述时，它会尝试拉取第一个`125`字符。所以**如果描述太短，也会产生错误。** 我将如何构建代码来解决这个问题？

```
Server Error in '/' Application.
Index was outside the bounds of the array.
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.IndexOutOfRangeException: Index was outside the bounds of the array.

Source Error:

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace:

[IndexOutOfRangeException: Index was outside the bounds of the array.]
   SitefinityWebApp.Mvc.Models.NewsModel.RetrieveCollectionOfNews(NewsType ShowType) in D:\SVN\LbyEgglw\LbyEgglw.WebApp\Mvc\Models\NewsModel.cs:53
   SitefinityWebApp.Mvc.Controllers.NewsController.Index() in D:\SVN\LbyEgglw\LbyEgglw.WebApp\Mvc\Controllers\NewsController.cs:29
   lambda_method(Closure , ControllerBase , Object[] ) +43
   System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +248
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +39
   System.Web.Mvc.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12() +125
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +640
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +312
   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +691
   Telerik.Sitefinity.Mvc.ControllerWrapper.Execute() +133
   Telerik.Sitefinity.Mvc.Proxy.MvcControllerProxy.ExecuteController() +2620
   System.Web.UI.Control.PreRenderRecursiveInternal() +113
   System.Web.UI.Control.PreRenderRecursiveInternal() +222
   System.Web.UI.Control.PreRenderRecursiveInternal() +222
   System.Web.UI.Control.PreRenderRecursiveInternal() +222
   System.Web.UI.Control.PreRenderRecursiveInternal() +222
   System.Web.UI.Control.PreRenderRecursiveInternal() +222
   System.Web.UI.Control.PreRenderRecursiveInternal() +222
   System.Web.UI.Control.PreRenderRecursiveInternal() +222
   System.Web.UI.Control.PreRenderRecursiveInternal() +222
   System.Web.UI.Control.PreRenderRecursiveInternal() +222
   System.Web.UI.Control.PreRenderRecursiveInternal() +222
   System.Web.UI.Control.PreRenderRecursiveInternal() +222
   System.Web.UI.Control.PreRenderRecursiveInternal() +222
   System.Web.UI.Control.PreRenderRecursiveInternal() +222
   System.Web.UI.Control.PreRenderRecursiveInternal() +222
   System.Web.UI.Control.PreRenderRecursiveInternal() +222
   System.Web.UI.Control.PreRenderRecursiveInternal() +222
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +4201

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.272 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T18:46:25.873

这是一个真正的 hack，因为你不应该把这样的逻辑放在你的视图中，但你*可以*这样做；

```
@foreach (var item in Model)
{
    <li>
        <div class="lnewsblock">

            <p class="newsthumb">
            @if(item.ShortImage != null)
            {
                <img src="@Html.Raw(item.ShortImage)" width="90" height="71" alt="" /></p>
            }
            </p>

            <p class="datetxt">
                @Html.Raw(item.Date.Value.ToString("ddd MM.dd.yyyy"))
            </p>

            <h2><a href="/resources/newsdetail?id=@Html.Raw(item.ID.ToString())">@Html.Raw(item.Title)</a></h2>

            <p class="greytxt">
            @if(item.Description.Length >= 125)
            {
                @Html.Raw(item.Description.Left(125))<a href="/resources/newsdetail?id=@Html.Raw(item.ID.ToString())"> more</a>
            }
            else
            {
                @Html.Raw(item.Description)<a href="/resources/newsdetail?id=@Html.Raw(item.ID.ToString())"> more</a>
            }
            </p>
        </div>
    </li>
} 
```

真正应该做的是，其中的“模型”部分不应允许您接收视图无法接受的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T20:19:52.247

不幸的是，您的堆栈跟踪没有多大帮助（至少，不是我）。开发的系统在程序的这个特定部分发生了很多事情，如果没有看到它的代码，我无法为这个问题给出具体的答案或建议。话虽如此，我想与您分享解决您的问题的另一种方法。

不久前，我需要找到一种有效的方法来渲染带有锚标签的图像，以用作图像链接或按钮。虽然在硬编码的 HTML 中执行此操作是可行的……但图像通常是动态的，因此我通过使用一小段代码扩展 MVC 框架找到了一种更加程序化的方法。这里是：

```
public static MvcHtmlString ActionImage(this HtmlHelper html, string action, object routeValues, string imagePath, string alt)
    {
        var url = new UrlHelper(html.ViewContext.RequestContext);

        // build the <img> tag
        var imgBuilder = new TagBuilder("img");
        imgBuilder.MergeAttribute("src", url.Content(imagePath));
        imgBuilder.MergeAttribute("alt", alt);
        string imgHtml = imgBuilder.ToString(TagRenderMode.SelfClosing);

        // build the <a> tag
        var anchorBuilder = new TagBuilder("a");
        anchorBuilder.MergeAttribute("href", url.Action(action, routeValues));
        anchorBuilder.InnerHtml = imgHtml; // include the <img> tag inside
        string anchorHtml = anchorBuilder.ToString(TagRenderMode.Normal);

        return MvcHtmlString.Create(anchorHtml);
    } 
```

它不是最强大的扩展，但它符合我的目的，它也可以为您服务。将变量写入 HTML 属性（例如：图像的 src）是危险的，因为任何具有基本 HTML 知识的人都可能通过稍作调整就可以侵入您的后端。这是我对**jadarnel27**解决方案的主要担忧，因为它将您的变量保存在我不喜欢它们的地方。

这个简单的扩展允许使用简单的单行在您的视图中动态、安全地创建链接图像：

```
<p class="site-title">@Html.ActionImage("Index", null, "~/Images/logo_sm.jpg", "Index")</p> 
```

如果您要根据您的程序需求调整此扩展，您可以在后端进行所有错误处理，这与**jadarnel27**的解决方案非常相似。这既可以解决您的原始问题，又可以使应用程序更加安全。

不幸的是，您提到这不是您的专业领域，从外观上看，如果应用程序的代码都像您上面发布的代码片段一样，您需要对应用程序进行一些相当大规模和彻底的更改。无论如何，我希望这至少可以帮助您和您的公司在前进的道路上做出明智的决定。

# rackspace - 使用 JClouds Location API 设置容器位置

> ID：15771673
> 
> 赞同：2
> 
> 时间：2013-04-02T18:33:06.930
> 
> 标签：rackspace, jclouds

我正在使用 JClouds 对各种云提供商进行抽象，包括 Rackspace。

我正在使用 JClouds 中的 BlobStore 来存储文件，他们的 API 建议我可以使用以下命令在特定（依赖于提供程序）位置创建容器：

```
context.getBlobStore().createContainerInLocation(location, "containerName"); 
```

但是，我应该如何获取位置变量（接口类型位置）？

例如，RackSpace 支持将达拉斯或芝加哥作为容器的位置。所以我想做这样的事情：

```
 Location dallas = ....; // Get location that points to "US-IL"
 context.getBlobStore().createContainerInLocation(dallas, "container"); 
```

'magic' 字符串 US-IL 取自[source](https://github.com/jclouds/jclouds/blob/master/providers/cloudfiles-us/src/main/java/org/jclouds/rackspace/cloudfiles/CloudFilesUSProviderMetadata.java)。

我尝试使用这个：

```
 context.getBlobStore().listAssignableLocations();  // Only contains a single default location
 context.getBlobStore().listAssignableLocations()[0].getParent(); // Not sure what this refers to, scoped at PROVIDER level 
```

任何人都可以阐明我应该如何使用它？

相关问题：[JClouds for Azure Blob](https://stackoverflow.com/questions/8146953/jclouds-for-azure-blob)（不适用，因为答案是 Azure 特定的。不需要位置...）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T22:23:08.247

这现在可以在 jclouds 1.8.0 及更高版本中实现。

```
RegionScopedBlobStoreContext blobStoreContext = ContextBuilder.newBuilder(PROVIDER)
        .credentials(username, apiKey)
        .buildView(RegionScopedBlobStoreContext.class);
BlobStore blobStore = blobStoreContext.getBlobStore(REGION); 
```

# join - 在 Lucene/Solr 中，Join 和 BlockJoin 有什么区别？

> ID：15771677
> 
> 赞同：2
> 
> 时间：2013-04-02T18:33:14.723
> 
> 标签：join, solr, lucene

连接被描述为伪连接，因为它更等同于 SQL 内部查询。而 BlockJoin[被描述](http://blog.mikemccandless.com/2012/01/searching-relational-content-with.html)为更像 SQL 连接，但需要复杂的索引模式，它可以预测您想要进行的所有可能的连接。有人可以根据如何在索引时间和查询时间实现它们来解释这些功能之间的区别。对性能有何影响？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:34:22.190

我不认为 blockjoinquery 是 Solr 函数。我认为它的Lucene功能。

solr 连接不会对 from 查询中的文档进行评分，也不会返回组合结果。所以它最好用作过滤查询。这将允许主 query.to 得分。

另一方面，块连接确实使用评分并返回两个结果。（不是 100% 肯定）

您还可以使用查询时间连接。这有薮计分选项。这也是 lucene 的一项功能，但不需要特殊的索引块。我已经将它与 solr 查询解析器插件结合使用。性能比blockjoin低一点，但它可以工作。

我只使用过 solr join 和 querytimejoin 所以我不能对 blockjoin 说太多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-16T23:10:20.320

据我了解，BlockJoin 用于加入同一核心内的嵌套/子文档。加入是为了加入一个单独的核心。

# javascript - 灵活的图像表

> ID：15771683
> 
> 赞同：0
> 
> 时间：2013-04-02T18:33:29.327
> 
> 标签：javascript, html, css, responsive-design, tabular

我正在寻找一种以表格/表格形式呈现 N 个图像的方法。
问题是，它需要处理窗口调整大小或不同的分辨率并重新排列自己。我可以在我的项目中使用 JQuery，但如果可以避免它当然会更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:49:28.253

我知道您说过您宁愿不使用 JQuery，但您可能想使用 Twitter Bootstrap很短的时间，我相信如果你想要一个只处理网格的精简版本，你可以下载一个自定义版本的 Bootstrap。

[http://twitter.github.com/bootstrap/scaffolding.html#fluidGridSystem](http://twitter.github.com/bootstrap/scaffolding.html#fluidGridSystem)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:50:55.317

您可以使用`float`and some`@media`来实现结果，我准备了一个带有演示的小小提琴：http: [//jsfiddle.net/sandro_paganotti/A6n9n/1/](http://jsfiddle.net/sandro_paganotti/A6n9n/1/)

关键在 CSS 中：

## CSS

```
img{ width: 33%; display: block; float: left; }

@media all and (max-width: 450px){ img{ width: 50% } }
@media all and (min-width: 550px){ img{ width: 20% } } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T19:11:10.910

当它们的父元素调整大小时，图像会自然地重排。

[http://codepen.io/cimmanon/pen/dwbHi](http://codepen.io/cimmanon/pen/dwbHi)

现在，如果您想让元素之间的间距均匀分布，Flexbox 可以帮助您：

[http://codepen.io/cimmanon/pen/iHGCd](http://codepen.io/cimmanon/pen/iHGCd)

```
.gallery {
  margin: -5px;
  display: -webkit-flexbox;
  display: -ms-flexbox;
  display: -webkit-flex;
  -webkit-flex-wrap: wrap;
  -ms-flex-wrap: wrap;
  flex-wrap: wrap;
  -webkit-flex-pack: justify;
  -ms-flex-pack: justify;
  flex-pack: justify;
  -webkit-justify-content: space-between;
  justify-content: space-between;
  -webkit-flex-align: center;
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
}
@supports (flex-wrap: wrap) {
  .gallery {
    display: flex;
  }
}

.gallery img {
  margin: 5px;
}

<div class="gallery">
    <img src="http://placehold.it/200x100" /><!--
    --><img src="http://placehold.it/200x120" /><!--
    --><img src="http://placehold.it/200x100" /><!--
    --><img src="http://placehold.it/200x100" /><!--
    --><img src="http://placehold.it/200x140" /><!--
    --><img src="http://placehold.it/200x100" /><!--
    --><img src="http://placehold.it/200x100" /><!--
    --><img src="http://placehold.it/200x130" /><!--
    --><img src="http://placehold.it/200x100" /><!--
    --><img src="http://placehold.it/200x100" /><!--
    --><img src="http://placehold.it/200x100" /><!--
    --><img src="http://placehold.it/200x90" />
</div> 
```

当前浏览器支持：Chrome、Opera、IE10。 [http://caniuse.com/#feat=flexbox](http://caniuse.com/#feat=flexbox)

或者，您可以使用 CSS Columns（与上面相同的标记）：

[http://jsfiddle.net/qeZaZ/](http://jsfiddle.net/qeZaZ/)

```
.gallery {
    -webkit-columns: 250px;
    -moz-columns: 250px;
    columns: 250px;
    text-align: center;
} 
```

# javascript - 如何在js中点击x次后禁用按钮？

> ID：15771685
> 
> 赞同：1
> 
> 时间：2013-04-02T18:33:35.283
> 
> 标签：javascript, events, onclick

我正在尝试使用 Javascript 在单击 x 次后禁用按钮。为简单起见，现在假设 x = 2。我似乎无法让计数器增加。感谢您的任何帮助！

```
var $ = function (id) {
    return document.getElementById(id);
}

window.onload = function () {
    coke.onclick = function(){
        var count =0;
        if (count >= 1)
        {
            coke.disabled = true;
        }
        else
            count++;
    };
} 
```

其中“可乐”是元素 ID。如果我摆脱了该`if`声明而只拥有`coke.disabled = true`，那么它当然可以工作并在单击后禁用。我确定我缺少一个核心概念。谢谢你

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T18:35:58.270

发生这种情况是因为每次`onclick`触发事件时，您`var count`都被分配为 0，因此在您的函数中它永远不会大于或等于 1。如果您`count`在函数外部初始化 var `onclick`，它将按预期运行。

```
window.onload = function () {
   var count = 0;
   coke.onclick = function(){
       if (count >= 1)
       {
           coke.disabled = true;
       }
       else
           count++;
   };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T18:37:13.893

您需要在函数`count`范围之外定义`onclick`：

```
var $ = function (id) {
    return document.getElementById(id);
}
var count = 0;    // set initial count to 0
window.onload = function () {
    coke.onclick = function(){
        if (count >= 1)
        {
            coke.disabled = true;
        }
        else
            count++;
    };
} 
```

# php - mysql 数据检索的替代方案

> ID：15771686
> 
> 赞同：1
> 
> 时间：2013-04-02T18:33:36.367
> 
> 标签：php, mysql

有没有另一种方法可以做到这一点：

```
$resulter=mysql_query("SELECT * FROM mail WHERE status='UNREAD'");
$a=0;
$name=$selfinfo["username"];
while($result=mysql_fetch_assoc($resulter)){
Foreach($result as $aaa){
if($aaa["msgto"]==$name){
$a=$a+1;
}}}
echo("<br>$a Unread messages"); 
```

我一直以这个错误结束：

```
Warning: Illegal string offset 'msgto' in /home/u534673521/public_html/test/loginsystem/members.area.php on line 18 
```

我不知道出了什么问题。

# c - 使用静态字符数组创建辅助函数

> ID：15771687
> 
> 赞同：0
> 
> 时间：2013-04-02T18:33:37.573
> 
> 标签：c, postgresql, libpq

我正在使用 PostgreSql C 库`libpq`，我可以`PGresult`使用函数从指针中获取值`PQgetvalue`。

`printf`现在，我有一个包含 10-20 列的表，我想通过一个简单的调用将它们打印出来：

```
printf("%s,%s,%s..(so on...)...%s", resA, resB, resC,..., resN); 
```

使用函数加载`resA`的`resB`字符串在哪里。`PGgetvalue`现在，这种方法需要声明 10-20 个指针（如果我想用一个 printf 打印出来），我打算使用一些简单的东西：

```
char* getFieldVal(PGresult* res, int row, char* fieldName)
{
    static char tmp[1000];
    memset(tmp, 0, sizeof(tmp));

    // Load data here...

    return tmp;
} 
```

然后`printf`像这样打电话：

```
printf("%s,%s,%s..(so on...)...%s", 
       getField(r, 0, "A"), getField(r, 0, "B"), ... , getField(r, 0, "N")); 
```

但是，该`printf`函数的输出表明所有`getField`调用都返回从数据库中首先请求的任何内容（在本例中为`A`字段的值），即使我已经使用`memset`call 删除了前一个字符串（只是为了确定）。

我哪里错了？是在我的代码中，还是 gcc 假设我所有的 getField 调用都返回指向同一内存的指针，所以它实际上并没有多次调用它。

或者，`printf`函数是否首先评估所有参数（以相反的顺序），然​​后实际调用该函数？如果是这种情况（我敢打赌），是否有更简单的模式来实现我正在尝试的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:39:03.423

您只是在此函数中返回静态/全局变量的地址，因此每次调用它时，数据都会被覆盖并返回相同的指针。

一种更简单的方法是遍历数据集并分别打印每个变量而不是格式化字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T20:36:05.320

> 或者， printf 函数是否首先评估所有参数（以相反的顺序），然​​后实际调用该函数？

是的。

但是没有必要复制结果，因为它们会一直保存在内存中，直到`PQclear(PGresult*)`被调用。

从您的函数开始，您可以获得指向`fieldName`for值的指针`row`：

```
char* getFieldVal(PGresult* res, int row, char* fieldName)
{
  int n = PQfnumber(res, fieldName);
  if (n == -1)
    return NULL; /* missing field, you might prefer to return an empty string here */
  else
    return PQgetvalue(res, row, n);
} 
```

# regex - URL 路由的正则表达式 - 匹配字母数字和破折号，但此列表中的单词除外

> ID：15771691
> 
> 赞同：2
> 
> 时间：2013-04-02T18:33:40.133
> 
> 标签：regex, codeigniter, url-routing, regex-negation

我正在使用 CodeIgniter 编写一个应用程序，允许用户注册一个帐户并分配一个他们选择的 URL（URL slug）（例如 domain.com/user-name）。CodeIgniter 具有允许使用正则表达式（[链接](http://ellislab.com/codeigniter/user-guide/general/routing.html)）的 URL 路由功能。

用户只能注册包含字母数字字符、破折号 (-) 和下划线 (_) 的 URL。这是我用来验证 URL slug 有效性的正则表达式：`^[A-Za-z0-9][A-Za-z0-9_-]{2,254}$`

我正在使用 url 路由功能将一些 url 路由到我网站上的功能（例如`/home -> /pages/index`, `/activity -> /user/activity`），因此用户显然无法注册这些特定的 URL。

我在很大程度上缺乏正则表达式的经验，但我试图编写一个表达式来匹配任何带有字母数字/破折号/下划线的 URL slug，除非它们是以下任何一种：

1.  default_controller
2.  404_覆盖
3.  家
4.  活动

这是我用来尝试将单词与特定条件匹配的代码：

```
$route['(?!default_controller|404_override|home|activity)[A-Za-z0-9][A-Za-z0-9_-]{2,254}'] = 'view/slug/$1'; 
```

但它没有正确路由。有人可以帮忙吗？（附带问题：在尝试与 URL 匹配时是否有必要在正则表达式中包含`^`或在正则表达式中？）`$`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T20:26:57.140

### 好吧，让我们把这个分开。

**忽略 CodeIgniter 的保留路由。**

您的路线的`default_controller`和`404_override`部分是不必要的。将路由与请求的 URI 进行比较以查看是否匹配。这两项不太可能出现在您的 URI 中，因为它们是 CodeIgniter 的特殊保留路由。所以让我们忘记他们吧。

```
$route['(?!home|activity)[A-Za-z0-9][A-Za-z0-9_-]{2,254}'] = 'view/slug/$1'; 
```

**捕捉一切！**

使用正则表达式，使用圆括号创建一个组`()`。然后可以使用反向引用检索该组 - 在我们的例子中，`$1, $2, etc.`位于路线的第二部分。您在尝试排除的第一组项目周围只有一个组，因此它无法正确捕获整个通配符。您自己已经发现了这一点，并在整个项目周围添加了一个组（好！）。

```
$route['((?!home|activity)[A-Za-z0-9][A-Za-z0-9_-]{2,254})'] = 'view/slug/$1'; 
```

**展望？！**

关于那个主题，第一组周围`home|activity`实际上并不是一个传统的组，因为`?!`一开始就使用了。这称为[负前瞻](http://www.regular-expressions.info/lookaround.html)，它是一个复杂的正则表达式功能。它被错误地使用：

> *如果你想匹配一些没有被其他东西跟随的东西，负前瞻是必不可少的。*

我可以做的还有很多，但基本上我们一开始并不真正想要或不需要它，所以如果你愿意，我会让你探索。

为了让你的生活更轻松，我建议在路由中分离 home、activity 和其他现有控制器。CodeIgniter 将从上到下查看路由列表，一旦匹配，它就会停止检查。因此，如果您在通配符*之前*指定您现有的控制器，它们将匹配，并且您的通配符正则表达式可以大大简化。

```
$route['home'] = 'pages';
$route['activity'] = 'user/activity';
$route['([A-Za-z0-9][A-Za-z0-9_-]{2,254})'] = 'view/slug/$1'; 
```

请记住按从最具体到最少的顺序列出您的路线。通配符匹配不如完全匹配（如家庭和活动）那么具体，因此它们应该紧随其后（如下）。

### 现在，这就是所有复杂的东西。多一点仅供参考。

请记住，括号中的破折号`-`具有特殊含义。`[]`如果您想匹配文字破折号，您应该转义它们。

```
$route['([A-Za-z0-9][A-Za-z0-9_\-]{2,254})'] = 'view/slug/$1'; 
```

请注意，您的字符重复最小值/最大值`{2,254}`仅适用于第二组字符，因此您的用户名必须至少为 3 个字符，最多为 255 个字符。仅供参考，如果您还没有意识到的话。

我看到了你自己对这个问题的回答，这很丑陋。对不起。`^`和符号在`$`整个前瞻过程中使用不当（一开始就不应该存在）。它可能对您正在测试它的一些用例“有效”，但它只会在未来给您带来问题和头痛。

希望现在您对正则表达式以及它们在路由过程中的匹配方式有更多的了解。

为了回答你的问题，不，你不应该在你的正则表达式的开头和结尾使用`^`和`$`——CodeIgniter 会为你添加它。

* * *

### 使用 404，卢克...

此时，您的路线已得到改进，应该可以正常工作。不过，我会把它扔在那里，你可能想考虑使用定义为的控制器/方法`404_override`来处理你的通配符。这样做的主要好处是您不需要任何路由来引导通配符，或者防止通配符弄乱现有的控制器。你只需要：

```
$route['404_override'] = 'view/slug'; 
```

然后，您的 View::slug() 方法将检查 URI，并查看它是否是有效模式，然后检查它是否作为用户存在（毫无疑问，与您的 slug 方法现在所做的相同）。如果是这样，那么你很高兴。如果没有，那么您将抛出 404 错误。

它可能看起来不那么优雅，但效果很好。如果听起来更适合您，请试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:39:12.567

我对 codeIgniter 并不特别熟悉，但大多数框架路由都基于优先级进行操作。也就是说，应该先定义默认控制器、404等路由。然后您可以简化您的正则表达式以仅匹配 slug。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T18:49:37.800

好的回答我自己的问题

我似乎想出了一个不同的表达方式：

```
$route['(^(?!default_controller$|404_override$|home$|activity$)[A-Za-z0-9][A-Za-z0-9_-]{2,254}$)'] = 'view/slug/$1'; 
```

我在整个表达式周围添加了括号（我认为这是 CodeIgniter`$1`在右侧匹配的内容）并添加了行首标识符：`^`和一堆行尾标识符：`$`

希望这对以后可能遇到此问题的人有所帮助。

# python - 如何为不同的用户上传 Google App Engine 应用

> ID：15771693
> 
> 赞同：0
> 
> 时间：2013-04-02T18:33:42.417
> 
> 标签：python, google-app-engine, dev-appserver

创建了一个 python appengine 应用程序，现在想要分发给需要在自己的 appid / 帐户上运行他们的应用程序的不同“用户”。处理这个问题的最佳方法是什么？最多 10 个用户我可以为用户执行此操作，但我如何为他们打包应用程序，或者为他们执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:27:44.717

GAE 是一个云系统，您通常会在其中创建一个应用程序来服务多个客户。请参阅[多租户和命名空间 API](https://developers.google.com/appengine/docs/python/multitenancy/overview)，了解如何安全地分离客户端数据。您还可以拥有[多个自定义域](https://developers.google.com/appengine/docs/domain)，以便每个客户端都可以拥有一个单独的域。

# ipython - ipython notebook 0.12.1 和 0.13.1 兼容性

> ID：15771700
> 
> 赞同：1
> 
> 时间：2013-04-02T18:34:10.143
> 
> 标签：ipython, ipython-notebook

我在 Fedora 上创建了一个 ipython 0.13.1 版本的 ipython 笔记本，它运行良好。当我尝试在 openuse 上的 ipython 0.12.1 上阅读它时，我得到了一个空白的白色笔记本。向后兼容性是否存在已知问题？ipython 和朋友模块的两个版本在每台机器上都可以正常运行。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:33:47.937

IPython 笔记本版本不向后兼容。IPython 0.13.1 支持 nbformat 3，而 0.12 仅支持 nbformat 2。 [这是一个](https://gist.github.com/minrk/1935808)可用于将 v3 笔记本降级到 v2 的脚本。在未来的版本（包括 0.13）中，当您尝试打开不可读的笔记本时，您会收到更好的消息。

# java - SQL从不同数据库中的多个表中删除没有共同元素

> ID：15771705
> 
> 赞同：0
> 
> 时间：2013-04-02T18:34:38.060
> 
> 标签：java, sql, db2

我有 7 张表，其中一张是主列表，另外 6 张是档案。此外，档案位于另一个数据库中。我需要通过检查主表中未列出的 3 个不同的列 ID（顶部、中间、底部）来检查存档表并删除行，因为它们不再相关。我的 SQL 语句如下。我还没有办法对其进行测试，但是由于我对 SQL 不是很熟悉，我希望人们可以提供一些提示。

```
 String[] tables;
        tables = new String[]{"archive1", "archive2", "archive3", 
                                  "archive4", "archive5", "archive6"};

        String query;
        Statement stmt;
        String objs = "TOP AND MIDDLE AND BOTTOM";
        while(i<tables.length){
            //TODO: CONFIRM THE QUERY IS CORRECT
            query = "DELETE FROM "+ tables[i] + " WHERE "+ objs +
                    "NOT IN(SELECT " + objs + " FROM DB.masterTable WHERE " +
                    objs + " IS NOT NULL)";
                    //IS NOT NULL may not be necessary
            try{
            //TODO: VERIFY CONNECTION IS CORRECT
                stmt = this.DB2.createStatement();
                stmt.executeUpdate(query);
            }catch(SQLException x){
                System.out.println("Failure in loop queries!");
            }
            i++;
        }
    } 
```

在表格中有很多列，但我关心的是比较顶部、中间和底部的 ID（它们对每一行都是唯一的，但例如顶部可能有许多相同的值）。所以就像我说的，如果在主表 OBJECTS 中没有具有相同 TOP、MIDDLE、BOTTOM 的行，那么可以从列出它的存档中删除该行。我试图将所有内容放在一个查询中，但也许我需要多个？

我的主要问题是：A）我的查询在任何意义上都正确吗？B）由于表位于 2 个不同的数据库上，我应该如何处理？

找到的解决方案：

```
 query = "DELETE FROM "+ tables[i] +
       " WHERE (TOP, MIDDLE, BOTTOM) NOT IN "+ 
       "(SELECT TOP, MIDDLE, BOTTOM FROM DB1.DB.masterTable)"; 
```

主要问题变成弄清楚如何一次比较每行的所有 3 个字段并访问数据库表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:51:56.677

A) 没有。您的查询中有一些基本错误。如果您展开查询，则在哪里`objs = "OBJ_ID_TOP AND OBJ_ID_MIDDLE AND OBJ_ID_BOTTOM"`

```
query = "DELETE FROM "+ tables[i] 
        + " WHERE OBJ_ID_TOP AND OBJ_ID_MIDDLE AND OBJ_ID_BOTTOM 
              NOT IN(SELECT OBJ_ID_TOP AND OBJ_ID_MIDDLE AND OBJ_ID_BOTTOM 
                     FROM db1Connection.OBJECTS 
                     WHERE OBJ_ID_TOP AND OBJ_ID_MIDDLE AND OBJ_ID_BOTTOM IS NOT NULL)"; 
```

这不是正确的 SQL... 如果我们看一下[WHERE](http://en.wikipedia.org/wiki/Where_%28SQL%29)子句的 wiki 页面，

> 编写 SQL Where 子句的正确语法是
> 
> SELECT <> FROM table WHERE 列操作符值

使用`AND`and`OR`在您的`WHERE`子句中串起多个列条件。

此外，在声明中`AND`无效。`SELECT`如果要组合多个结果集，请使用[UNION](http://en.wikipedia.org/wiki/Set_operations_%28SQL%29#UNION_operator)。

* * *

某种形式（见下文）更接近您的需要。（注意：它没有以任何方式优化......只是一个演示）

**编辑**认为我最初误解了您要执行的操作...但我认为您想从 中删除`some_table`，而不是`master_table`.

```
--DELETE --can swap out SELECT for DELETE when the selected results look right
SELECT s.* 
FROM some_table s  --this is table[i]
  LEFT OUTER JOIN master_table mt   --db1Connection.OBJECTS
     on s.ID_TOP = mt.ID_TOP
        AND s.ID_MIDDLE = mt.ID_MIDDLE
        AND s.ID_BOTTOM = mt.ID_BOTTOM
WHERE mt.ID_TOP IS NULL
        AND mt.ID_MIDDLE IS NULL
        AND mt.ID_BOTTOM IS NULL 
```

B）我无法帮助你解决这个问题......拥有更多 DB2（？）印章的人可以帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:42:33.533

1.  您需要从第一个数据库中获取要删除的数据列表。
2.  然后在第二个数据库中删除

而且，你不能比较说 obj1 和 obj2 和 obj3 不在（某些列表）中，它应该像 obj1 不在（somelist）中和 obj2 不在（somelist）中并且 obj3 不在（无论如何）。

在这种情况下，最好在归档表所在的 DB2 中创建一个临时表，其中包含 DB1 中主表中的数据。然后，运行查询

```
delete from archive1 where col1 not in (select col_master from temp_table); 
```

# r - R CMD 检查的包依赖项

> ID：15771706
> 
> 赞同：1
> 
> 时间：2013-04-02T18:34:39.623
> 
> 标签：r

R 包中的`DESCRIPTION`文件有几种指定依赖关系的方法，`Depends`例如`Suggests`和`Imports`. 我应该使用哪一个来指定安装包后可选但运行时需要的依赖项`R CMD check`？

在我的特殊情况下，我`testthat`用来在运行时自动运行一些测试`R CMD check`，但在“正常”操作期间，`testthat`不需要。[这个问题](https://stackoverflow.com/questions/8898469/is-it-possible-to-use-r-package-data-in-testthat-tests-or-run-examples)的答案表明`testthat`应该在 中`Suggests`，但这足以确保`R CMD check`正确运行吗？

如果存在，我希望看到的是一个字段，我可以在其中指定*仅*需要运行的依赖项，`R CMD check`如果这些包不可用，它应该会失败并显示适当的错误消息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T18:50:02.137

是的，你应该把它们放在`Suggests`野外。成功运行所需的唯一另一件事`R CMD check`是确保将`Suggests`现场中的软件包安装在`R CMD check`.

如果它们不可用，您可以设置环境变量`_R_CHECK_FORCE_SUGGESTS=false`并`R CMD check`运行，并带有关于缺少的建议包的“注意”。

# file - 在 Windows 7 中使用 REN 批量重命名文件（添加前缀）

> ID：15771714
> 
> 赞同：16
> 
> 时间：2013-04-02T18:35:03.673
> 
> 标签：file, cmd, rename, prefix

我已经弄清楚如何`REN`在 Windows 7 命令提示符中使用批量编辑文件。但是，这一次，我尝试为所有文件添加前缀，但我无法做到。所有文件都是 tif 文件。

例如，文件位于 C:\Users\user1\Desktop\Test_Folder
每个文件夹中的文件以 9 开 ​​头。
每个文件有 5 位数字（即 90200、90201、90202）。

我正在尝试在每个文件名前面添加一个 0（零）并将其更改为 090200、090201、090203....

我试过了：

```
FOR %v IN (?????.tif) DO REN %v 0%v 
```

我也试过：

```
FOR %%a in (*.tif) DO REN "%%a" "0%a" 
```

请帮忙。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-11T11:01:57.163

这个比较简单...

```
forfiles /M *.tif /C "cmd /c ren @file 0@file" 
```

来源：[https ://www.windows-commandline.com/rename-file-extensions-bulk/](https://www.windows-commandline.com/rename-file-extensions-bulk/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T18:43:56.087

这对我有用：

```
 for %a in (9????) do ren %a 0%a 
```

```
C:\temp\test>for %a in (9????) do ren %a 0%a

C:\temp\test>ren 90200 090200

C:\temp\test>ren 90201 090201

C:\temp\test>ren 90202 090202

C:\temp\test>dir
 Volume in drive C has no label.
 Volume Serial Number is 4BF5-D156

 Directory of C:\temp\test

     04/02/2013  11:40 AM    <DIR>          .
     04/02/2013  11:40 AM    <DIR>          ..
     04/02/2013  11:36 AM                 4 090200
     04/02/2013  11:36 AM                 4 090201
     04/02/2013  11:36 AM                 4 090202
                    3 File(s)             12 bytes

               2 Dir(s)  86,883,287,040 bytes free 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T22:02:13.883

You can try this to renaming files in folders and subfolders:

```
FOR /r "C:\Users\user1\Desktop\Test_Folder" %%a in (9*.tif) DO REN "%%~a" "0%%~nxa" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T12:04:39.943

没关系！问题解决了。我不得不稍微修改它，这对我有用：

```
FOR /r "C:\Users\user1\Desktop\Test_Folder" %a in (9*.tif) DO REN "%~a" "0%~nxa" 
```

谢谢你们！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-03T07:21:36.857

此代码段将有助于删除文件夹中所有文件的“ab”：

```
FOR /r "folderName" %a in (ab*.txt) DO set fname=%~nxa & REN "%~a"  "%fname:~3%" 
```

如果文件夹名称有 ab1.txt、ab2.txt 等文件，结果将是 1.txt、2.txt。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-14T01:01:52.380

您可以尝试使用 Windows PowerShell

要打开 PowerShell，请打开文件所在的文件夹，确保未选择任何文件。找到文件区域的空白区域，按住 Shift + 右键单击​​并选择在此处打开 PowerShell 窗口

并使用这个公式： dir | 重命名项目-新名称 {$_.name -替换“90”，“090”}。

要打开 PowerShell，请打开文件所在的文件夹，确保未选择任何文件。找到文件区域的空白区域，按住 Shift + 右键单击​​并选择在此处打开 PowerShell 窗口。

当 powerShell 窗口打开时，它将有一部分文本行，这是文件所在的目录 PS X:\Main Folder\Folder Name\Folder Name> （这取决于您有多少文件夹/子文件夹）就在 > 之后，光标将闪烁。

复制此命令： dir | 重命名项目 -Newname {$_.name -replace "90", "090"}

然后将其粘贴到光标闪烁的位置，然后按Enter。

这些文件现在应该在 9 前面都有 0。

限制可能是，如果你有一个像 90909 这样的文件，你最终可能会得到 0900909。

然后，您可以在 Powershell 仍然打开的情况下使用以下命令：

目录 | 重命名项目 -Newname {$_.name -replace "900", "90"}

那应该很容易解决。

这是我知道如何做这类事情的最简单的方法。

我有 mp3 文件，它在那里很有魅力。

该指令适用于任何文件类型。

# apache - 一起运行 mod_cluster mod_proxy_htt 和 mod_proxy_ajp

> ID：15771724
> 
> 赞同：0
> 
> 时间：2013-04-02T18:35:34.957
> 
> 标签：apache

我需要将 mod_proxy_http 用于某些请求，并将 mod_proxy_ajp 与 mod_cluster 一起使用。mod_cluster 的文档指定使用 mod_proxy_http 或 mod_proxy_ajp。有谁知道是否可以告诉 mod_cluster 在虚拟主机中使用 mod_proxy_ajp 而 mod_proxy_http 仍然可以用于其他目的，例如在同一个 Apache 2.2.xx 服务器中的 proxypass 或 mod_rewrite 代理重定向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:52:47.090

经过大量研究和测试，我发现如果加载了 mod_proxy_ajp，mod_cluster 的默认协议是 AJP，否则它会恢复为 HTTP 协议（​​mod_proxy_http）。正是我想要的。

# wordpress - 定义 Wordpress 摘录的开头

> ID：15771726
> 
> 赞同：0
> 
> 时间：2013-04-02T18:35:45.500
> 
> 标签：wordpress

我正在尝试删除我们帖子中的一些字符或文本。我们有我们帖子中的故事拍摄的日期和来源，但我不希望将其包含在我们的摘录中，并且格式人们坚持认为它必须保留在帖子的顶部。

我将如何准确地指定我希望摘录在帖子中从哪里开始？我可以让它从`<p>`标签之类的东西开始，或者我可以在它开始之前设置要跳过的字符数吗？

任何帮助将不胜感激。到目前为止，这是我的代码：

```
<phpcode>
<?php $my_query = new WP_Query('category_name=science&showposts=5'); ?>
<?php while ($my_query->have_posts()) : $my_query->the_post(); ?>
<div id="postlist_container">
<h4 class="und"></h4>
<?php get_the_image(array( 'image_scan' => true , 'image_class' => 'small_image_left','width' => 80 , 'height' => 80)); ?><div class="post_desc"><date><?php the_time('M j, Y') ?></date> &middot; <a href="<?php the_permalink() ?>">
<?php the_title(); ?></a> <br /><br /><?php the_excerpt_max_charlength(250); ?>
</div>
</div>
<div class="clear"></div>
<?php endwhile; ?>
<?php

function the_excerpt_max_charlength($charlength) {
    $excerpt = get_the_excerpt();
    $charlength++;

    if ( mb_strlen( $excerpt ) > $charlength ) {
        $subex = mb_substr( $excerpt, 0, $charlength - 5 );
        $exwords = explode( ' ', $subex );
        $excut = - ( mb_strlen( $exwords[ count( $exwords ) - 1 ] ) );
        if ( $excut < 0 ) {
            echo mb_substr( $subex, 0, $excut );
        } else {
            echo $subex;
        }
        echo '[...]';
    } else {
        echo $excerpt;
    }
}
?>
</phpcode> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:07:05.777

If the date/source are always the same length (which is probably unlikely), then you could use `substr()` on `$excerpt` to remove X number of characters:

```
// assume we want to remove the first 10 chars
$chars_to_skip = 10;
// get the full excerpt
$excerpt = get_the_excerpt();
// check the length
if ( strlen( $excerpt ) > $chars_to_skip ){
    // remove chars from the beginning of the excerpt
    $excerpt = substr( $excerpt, $chars_to_skip );
} 
```

What's more likely is that you would need to do a regex search and replace to remove whatever the pattern matches even when the exact length of the source or date text differs post to post. You could use `preg_replace()` ([api info](http://www.php.net/manual/en/function.preg-replace.php)) to accomplish this, but I can't help with the regular expression not knowing the format you're using.

# wordpress-theming - 显示与帖子模板不同的帖子详细信息页面

> ID：15771729
> 
> 赞同：2
> 
> 时间：2013-04-02T18:35:51.977
> 
> 标签：wordpress-theming, wordpress

一点背景：

我已经建立了一个社交媒体聚合器，它可以引入一堆不同的自定义帖子类型。

根据帖子类型，我为列表视图动态分配模板。因此，每种帖子类型都有独特的外观。

```
 switch (get_post_type())
                {
                    case twitter:
                        get_template_part( 'content', 'twitter' );break;
                    case flickr:
                        get_template_part( 'content', 'flickr' );break;
                    case facebook:
                        get_template_part( 'content', 'facebook' );break;
                    case youtube:
                        get_template_part( 'content', 'youtube' );break;
                    case instagram:
                        get_template_part( 'content', 'instagram' );break;
                    case googleplus:
                        get_template_part( 'content', 'googleplus' ); break;
                    case facebook:
                        get_template_part( 'content', 'facebook' ); break;
                    case linkedin:
                        get_template_part( 'content', 'linkedin' ); break;
                    case pinterest:
                        get_template_part( 'content', 'pinterest' ); break;

                    default:
                        get_template_part( 'content_blog');
                }?> 
```

我想要做的是链接“更多”按钮，该按钮将用户带到一个标准化的详细信息页面，该页面对于所有帖子类型看起来都相同。

有没有办法独立于其各自的模板设置“发布详细信息”格式。

是否有最佳实践方法来实现这一目标？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:16:18.320

如果我理解正确，您希望下面的代码链接到一些不同的 URL。

```
 <?php the_content( 'Read more ...' ); ?> 
```

如果是这样，那么您可以查看[这个 WordPress 论坛问题](http://wordpress.org/support/topic/change-more-tag-url?replies=5) ，它显示了如何实现这一点。

`switch`关于您的陈述还有一点：

而不是使用`switch`为什么不将**content_blog.php**重命名为**content.php**，然后使用这一行代码：

```
get_template_part( 'content', get_post_format() ); 
```

# java - 空异常数组

> ID：15771730
> 
> 赞同：-2
> 
> 时间：2013-04-02T18:35:58.067
> 
> 标签：java

嗨，我在字符串数组中工作，似乎不会在数组中添加数据，让我收到错误或空异常

```
public boolean addCategory(String description){
if(numCategories <= maxArrayCategories){
    arrayCategories[numCategories] = description;
    numCategories++;
    return true;}
else {return false;}} 
```

问题是功能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T18:37:29.800

`arrayCategories`是`null`，您需要创建数组本身才能使用它：

```
arrayCategories = new String[maxArrayCategories]; 
```

在代码顶部的某处，如果这是一个类成员，可能在构造函数中。

在 Java中， [*null*是一种语言字面](https://stackoverflow.com/questions/2707322/what-is-null-in-java)意思，即引用（在本例中为您的数组）指向任何地方。[NullReferenceException](https://stackoverflow.com/questions/218384/what-is-a-null-pointer-exception)表示您正在尝试访问尚未初始化的值，或者已明确设置为 null（在这种情况下，您正在尝试设置数组单元格，其中数组尚未初始化）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:41:07.577

您的代码的问题是您从未初始化`arrayCategories`数组。这就是它抛出`NullPointerException`. 您必须在使用数组之前对其进行初始化。例如，如果您已经知道`arrayCategories`将有`maxArrayCategories`多个元素，那么您应该在调用方法之前`addCategory`使用以下方法初始化数组：

```
arrayCategories = new String[maxArrayCategories]; 
```

并且还要确保要检查的条件应该是

```
if(numCategories < maxArrayCategories) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T18:51:43.303

```
//Hi I hope numCategories is like a index and has value 0 and maxArrayCategories is the length of array and hope you have initialized the array arrayCategories then please try this.
//it would be work.

public boolean addCategory(String description){
if(numCategories < maxArrayCategories-1){
    arrayCategories[numCategories] = description;
    numCategories++;
    return true;}
else {return false;}} 
```

# jquery - 在发布到 iframe 时切换可见性

> ID：15771732
> 
> 赞同：0
> 
> 时间：2013-04-02T18:36:00.613
> 
> 标签：jquery, post, iframe, toggle, visibility

我试图在 iframe 发布表单数据时切换它的可见性。我知道这是一个不安全的操作，因为 iframe 内容托管在其他地方，请忽略这个问题......我已经成功地将表单数据发布到 iframe，现在我需要它在发布时切换显示。

这是我到目前为止所拥有的，我对 js 很陌生，如果语法完全错误，我深表歉意......

```
$.post('http://idx.mlspin.com/search.asp?aid=NB900549', function(data) {
    $('#MLSSearchForm').serialize();
    $('#MLSframe').html(data);
    posting.done(function( data ) {
    $('#MLSframe').css('display','block');
    $('#main_container').css('display','none');
  });
}, 'html'); 
```

这是现场测试页面的链接，请注意要发布的表单是侧边栏中的“销售”选项卡，而不是“租金”：

[http://mraboston.com/wp-content/themes/whiteboard/test_page.html](http://mraboston.com/wp-content/themes/whiteboard/test_page.html)

# c++ - 我如何编写用于字符串的双哈希实现？

> ID：15771738
> 
> 赞同：1
> 
> 时间：2013-04-02T18:36:12.153
> 
> 标签：c++, string-hashing, double-hashing

大家好，第一次来这里，但我想首先问一下我对双散列的理解是否正确。

双散列首先实现一个散列函数，然后检查该点是否打开。如果当前点未打开，则使用第二个散列函数确定另一个点，然后将其乘以当前尝试，然后将其添加到由第一个散列算法确定的索引点。

我现在的代码是：

```
unsigned int findPos(hashedObj& x)
{
    int offset = 1;
    int iteration = 0;
    unsigned int originalPos = myhash1( x );
    unsigned int index = originalPos;
    unsigned int secondPos = myhash2( x );
    while( array[ index ].info != EMPTY && array[ index ].element != x )
    {
        iteration = offset++ * secondPos;
        if ( ( originalPos + iteration ) > array.size( ) )
            index = ( originalPos + iteration ) % array.size( );
        else
            index = originalPos + iteration;
    }
    return ( index );
}

unsigned int hash1( const string& key, const int Tsize )
{
    //start the hashvalue at 0
    unsigned int hashVal = 0;

    //cout<<" the size of the table is: "<< Tsize <<endl;

    //add the ascii value for every word to hashval, multiply by 37 each time
    for ( int i = 0; i < key.length(); i++ )
        hashVal = 37 * hashVal + key[ i ];
    //mod hashval so it remains smaller than the table size
    hashVal %= Tsize;

    //return the itemes index value
    return hashVal;
} 
```

我刚刚意识到我没有包含我的第二个哈希函数

```
unsigned int hash2( const string& key, const int Tsize )
{
//store the sum of ascii numerical values
int hashVal = 0;

//add the values of all chars while multiplying each one with a prime number
for ( int i = 0; i < key.length(); i++ )
    hashVal = 29 * hashVal + key[ i ];

//mod the hashed value with a prime smaller than the table size, subtract that number
//with the prime just used and return that value
unsigned int index = 44497 - ( hashVal % 44497 );

return index;
} 
```

它可能看起来不像，但实际上 tsize 被正确调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:46:51.223

您的 if 语句不正确：

```
if ( ( originalPos + iteration ) > array.size( ) )
    index = ( originalPos + iteration ) % array.size( );
else
    index = originalPos + iteration;
} 
```

应该：

```
if ( ( originalPos + iteration ) >= array.size( ) )
    index = ( originalPos + iteration ) % array.size( );
else
    index = originalPos + iteration;
} 
```

或者更好的是，因为你通过执行 if 浪费了比 % op 更多的东西，而且无论如何答案都是一样的，你可以完全摆脱 if：

```
index = ( originalPos + iteration ) % array.size( ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-09T07:17:07.040

或者你可以通过说完全简化它

```
unsigned int hashkey = myhash1( x );
unsigned int stepSz = myhash2( x );
while( array[ index ].info != EMPTY && array[ index ].element != x )
        hashKey = (hashKey + stepSz) % capacity;
return hashkey; 
```

它完成了同样的事情，同时使 while 循环更小（并摆脱了额外的变量）。我假设您不想允许重复（因此 while 循环中的第二个条件？）。

# php - 转义以插入到 MySql

> ID：15771741
> 
> 赞同：1
> 
> 时间：2013-04-02T18:36:29.320
> 
> 标签：php, mysql, escaping

我有一个 php 页面，用于`mysql_real_escape_string()`转义包含单引号的内容。我相信它使用的是 utf-8（但我不确定）。当我插入一些内容时，我收到以下 mysql 警告（它在内容中添加了 ? 而不是 '）：

不正确的字符串值：'\x92t ...

这是我的 php 示例：

```
 $link = ConnectToServer($theIntranet, $theUser, $thePW);
$theTagToFind = 'ac';
$theTagToUse = 'trc';
$database = '{databaseName}';
$theQuery = "SELECT * FROM {$database}.templates
            WHERE content like '%{" . $theTagToFind . ":%'";
$updates = fopen('001_intranet_change' . strtoupper($theTagToFind) . 'to' . strtoupper($theTagToUse) . '.sql', 'w+');
$rollback = fopen('001_intranet_change' . strtoupper($theTagToUse) . 'backto' . strtoupper($theTagToFind) . '.sql', 'w+');
$theResultHandle = mysql_query($theQuery, $link);

$comment = "--Update All $theTagToFind tags to $theTagToUse tags in $database --";
fwrite($updates, $comment . "\r\n\r\n");
fwrite($rollback, "--Rollback - Convert all $theTagToUse tags back to $theTagToFind tags --\r\n\r\n");
mysql_set_charset('latin1');
while (($data = mysql_fetch_assoc($theResultHandle)) != false)
{
    $rb_content = $data['content'];
    $data['content'] = preg_replace("/{" . $theTagToFind . ":/", "{" . $theTagToUse . ":", $data['content']);
    $theResult[] = $data;
    $update_script = "\r\n 
    Update $database.templates
    SET content = '" . mysql_real_escape_string($data['content']) . "'
    WHERE _id = " .$data['_id'] . ";";

    $rollback_script = "\r\n
    UPDATE $database.templates
    SET content = '" . mysql_real_escape_string($rb_content) . "'
    WHERE _id = " . $data['_id'] . ";";;
    fwrite($updates, $update_script);
    fwrite($rollback, $rollback_script);
}
fclose ($updates);
fclose($rollback);

print_r($theResult); 
```

并且`$data['content']`可以等于：

“您好，请记得联系医生办公室……”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:46:29.057

干得好

```
mysql_set_charset('utf8'); 
```

您必须确保表定义中的字符集也设置为 utf8

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T18:38:40.413

您确定您的服务器配置正确并且[魔术引号](http://php.net/manual/en/security.magicquotes.php)已关闭吗？这些可能具有双重转义值的效果。

您可以通过查看`$_POST`数据来测试它是否已根据您的预期进行了修改。如果是这样，请查看是否可以修复`php.ini`.

请注意，您不应该`mysql_query`在新代码中使用。它很危险，已被弃用，并将在 PHP 的未来版本中删除。使用[SQL 占位符](http://bobby-tables.com/php)是进行转义的最安全和最简单的方法。

在您的简短示例中，您似乎忘记了转义`$data['_id']`，这意味着它可能是 SQL 注入错误。即使是一个错误也会产生严重的后果，因此永远不要将未转义的数据放入查询字符串中。

# c++ - 支持余弦函数的 GMP 库的替代 bignum 库

> ID：15771742
> 
> 赞同：1
> 
> 时间：2013-04-02T18:36:30.477
> 
> 标签：c++, gmp, bignum, trigonometry

有没有人推荐我在 Mac OSX 上工作并尝试编写和运行 C++ 代码。

我正在运行代码来回答被称为“Tammes 问题”的数学问题。我目前有一段梯度流代码，它运行以分布球体上的点并最小化能量函数。这适用于汤姆森问题和 t 的低值（能量函数中的索引）。

Tammes 问题是因为 t 趋于无穷大，所以我需要使 t 相当大。这很好，但是当我将球体上两点之间的距离提高到 t 的幂时，这个数字变得非常小（仍然是正数），然后通过取其倒数，我得到了相当大的能量。问题是能量随着 t 的增加而失去准确性，这可以通过 bignum 库来解决。但是，如果我想找到球体上球冠的大小，我需要重新排列余弦规则以找到点之间的角度。因此，这需要我取一个由于 GMP 不支持 cos 函数而无法接受的数字的余弦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T20:19:34.757

由于您熟悉 GMP，因此我推荐[MPFR](http://www.mpfr.org/)。除了使用多精度浮点运算外，它还提供基于 IEEE 754 (2008) 的超越函数和舍入模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T19:42:27.193

[这个图书馆](http://www.hvks.com/Numerical/arbitrary_precision.html)怎么样？诚然，我没有使用过它或 GMP，但它可能对您的问题有用。

# orchardcms - 合并开发和生产数据库中的果园内容

> ID：15771744
> 
> 赞同：6
> 
> 时间：2013-04-02T18:36:34.390
> 
> 标签：orchardcms, orchardcms-1.6

我正在寻找以下问题的解决方案。我们前段时间开发了生产环境的果园站点。所有站点结构（小部件、部件、层）都是在初始发布之前创建的。现在我们要添加带有附加页面和图层的子站点。我们希望在开发环境中完成这项工作并在发布之前对其进行测试（在最近的生产数据库快照之上）。同时在生产环境中会添加新的次要内容。所以问题是——是否有解决方案可以将一个果园数据库（开发数据库）的更改合并到另一个（生产）数据库？这些更改包括图层、自定义小部件和部件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T11:12:22.280

[Orchard Import Export Module](http://gallery.orchardproject.net/List/Modules/Orchard.Module.Orchard.ImportExport)可以帮助您。它允许您从一个 Orchard 实例导出数据并将其导入另一个。您使用的所有模块都需要有额外的代码来支持这一点。

如果您计划在实时和测试中进行数据库更改，这不会帮助您进行合并，但这可能是朝着正确方向迈出的一步。

有关导入/导出支持的示例，请查看驱动程序中某个 Orchard 核心模块（如标签）的导入和导出方法。

# jquery - Jquery 事件和选择器问题

> ID：15771748
> 
> 赞同：0
> 
> 时间：2013-04-02T18:36:47.147
> 
> 标签：jquery, twitter-bootstrap, jquery-selectors

我是 jquery 的新手，所以如果我的问题没有很好地表达，请原谅我，我只是没有很好的语义线索来表达它。

我正在使用嵌套轮播展示来自 wordpress 网站的内容（使用 twitter 引导程序）

```
<div id="outer-carousel" class="carousel slide well" data-interval="false">
    <div class="carousel-inner">

        <div class="item active">
            <div id="nested-carousel1" class="carousel slide well">
                <div class="carousel-inner">
                    <div class="item active">
                        <center>
                        item1
                        </center>
                    </div>
                    <div class="item">
                        <center>
                        item2
                        </center>
                    </div>
                    <div class="item">
                        <center>
                        item3
                        </center>
                    </div>
                </div>
                <a class="carousel-control left" href="#nested-carousel1" data-slide="prev">&lsaquo;</a>
                <a class="carousel-control right" href="#nested-carousel1" data-slide="next">&rsaquo;</a>
            </div>
        </div>

        <div class="item">          
            <div id="nested-carousel2" class="carousel slide well">
                <div class="carousel-inner">
                    <div class="item">
                        <center>
                        item4
                        </center>
                    </div>
                    <div class="item">
                        <center>
                        item5
                        </center>
                    </div>
                    <div class="item">
                        <center>
                        item6
                        </center>
                    </div>
                </div>
                <a class="carousel-control left" href="#nested-carousel2" data-slide="prev">&lsaquo;</a>
                <a class="carousel-control right" href="#nested-carousel2" data-slide="next">&rsaquo;</a>
            </div>
        </div>

        <div class="item">          
            <div id="nested-carousel3" class="carousel slide well">
                <div class="carousel-inner">
                    <div class="item">
                        <center>
                        item7
                        </center>
                    </div>
                    <div class="item">
                        <center>
                        item8
                        </center>
                    </div>
                    <div class="item">
                        <center>
                        item9
                        </center>
                    </div>
                </div>
                <a class="carousel-control left" href="#nested-carousel3" data-slide="prev">&lsaquo;</a>
                <a class="carousel-control right" href="#nested-carousel3" data-slide="next">&rsaquo;</a>
            </div>

        </div>
    </div>
</div>
<ul class="thumbnails">
    <li class="span1">
        <a class="thumbnail" href="#outer-carousel" data-slide-to="0">
            carousel1
        </a>
    </li>
    <li class="span1">
        <a class="thumbnail" href="#outer-carousel" data-slide-to="1">
            carousel2
        </a>
    </li>
    <li class="span1">
        <a class="thumbnail" href="#outer-carousel" data-slide-to="2">
            carousel3
        </a>
    </li>
</ul> 
```

当用户单击缩略图时，“外部”轮播会更改幻灯片

每张幻灯片都包含一个“内部”旋转木马，该旋转木马用左右箭头进行操作。

不过我有一个问题，因为当我滑动“外部”轮播时，应该将“内部”轮播的第一个“项目”分配给“活动”类。

好消息是：twitter bootstrop 在更改幻灯片时提供了“滑动”事件。

所以我可以在正确的“内部”轮播中设置第一个“项目”的类。

```
 $('#outer-carousel').on('slid', function(e) {    
    // insert class assignment here
}); 
```

在这里查看所有这些操作：http: [//jsfiddle.net/4hgcY/29/](http://jsfiddle.net/4hgcY/29/)

然而，我的问题是，我只想在“外部”旋转木马滑动时才这样做。但正如您在 jsfiddle 中看到的那样，通过滑动内部轮播触发的“slid”事件也会导致上述 Jquery 调用该函数......

我该怎么办？我试过使用选择器

```
 $('#outer-carousel').on('slid', '#outer-carousel",function(e) {    
    // insert class assignment here
}); 
```

但它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:43:34.133

只需确保事件发生在目标轮播上即可。

```
if (this === e.target) {
    // do stuff
} 
```

# python - Tkinter：在之后设置 StringVar 事件，包括按下的键

> ID：15771749
> 
> 赞同：6
> 
> 时间：2013-04-02T18:36:53.163
> 
> 标签：python, tkinter, text-widget

每次将一个字符输入一个`Text`小部件时，我都想获取该小部件的内容并从某个数字中减去它的长度（基本上是“你还有 x 个字符”的交易）。

但这`StringVar()`总是背后的一个事件。据我所知，这是因为事件是在字符输入到 Text 小部件之前处理的。这意味着如果我在该字段中有 3 个字符并且我输入了第 4`StringVar`个字符，则会更新但仍然是 3 个字符长，然后当我输入第 5 个字符时它会更新为 4。

有没有办法让两者保持一致？

这是一些代码。我删除了不相关的部分。

```
def __init__(self, master):
    self.char_count = StringVar()
    self.char_count.set("140 chars left")

    self.post_tweet = Text(self.master)
    self.post_tweet.bind("<Key>", self.count)
    self.post_tweet.grid(...)

    self.char_count = Label(self.master, textvariable=self.foo)
    self.char_count.grid(...)

def count(self):
    self.x = len(self.post_tweet.get(1.0, END))
    self.char_count.set(str(140 - self.x)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T20:52:07.090

一个简单的解决方案是在类绑定之后添加一个新的绑定标签。这样类绑定将在您的绑定之前触发。请参阅[这个问题](https://stackoverflow.com/a/3513906/7432)的答案[How to bind self events in Tkinter Text widget after it will bind by Text 小部件？](https://stackoverflow.com/q/3501849/7432)例如。该答案使用条目小部件而不是文本小部件，但绑定标签的概念在这两个小部件之间是相同的。请务必使用`Text`而不是`Entry`在适当的地方使用。

另一种解决方案是在 KeyRelease 上进行绑定，因为默认绑定发生在 KeyPress 上。

这是一个示例，展示了如何使用 bindtags 执行此操作：

```
import Tkinter as tk

class Example(tk.Frame):
    def __init__(self, master):
        tk.Frame.__init__(self, master)

        self.post_tweet = tk.Text(self)
        bindtags = list(self.post_tweet.bindtags())
        bindtags.insert(2, "custom") # index 1 is where most default bindings live
        self.post_tweet.bindtags(tuple(bindtags))

        self.post_tweet.bind_class("custom", "<Key>", self.count)
        self.post_tweet.grid()

        self.char_count = tk.Label(self)
        self.char_count.grid()

    def count(self, event):
        current = len(self.post_tweet.get("1.0", "end-1c"))
        remaining = 140-current
        self.char_count.configure(text="%s characters remaining" % remaining)

if __name__ == "__main__":
    root = tk.Tk()
    Example(root).pack(side="top", fill="both", expand=True)
    root.mainloop() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T19:13:18.123

与 Tk 中的大多数事件一样，您的处理程序在事件被内置绑定处理*之前*`<Key>`触发，而不是之后。例如，这允许您阻止正常处理的发生，或更改它的作用。

 *但这意味着您无法访问新值（无论是通过 a`StringVar`还是仅通过调用`entry.get()`），因为它尚未更新。

* * *

如果您正在使用`Text`，则在“修改”标志更改后会触发一个虚拟事件`<<Modified>>`。假设您没有将该标志用于其他目的（例如，在文本编辑器中，您可能希望使用它来表示“启用保存按钮”），您可以使用它来完成您想要的操作：

```
def count(self, event=None):
    if not self.post_tweet.edit_modified():
        return
    self.post_tweet.edit_modified(False)
    self.x = len(self.post_tweet.get(1.0, END))
    self.char_count.set(str(140 - self.x))

# ...

self.post_tweet.bind("<<Modified>>", self.count) 
```

* * *

通常，当你想要这样的东西时，你想要的是`Entry`a 而不是 a `Text`。这提供了一种更好的方法来做到这一点：验证。与 Tkinter 基础知识之外的所有内容一样，如果不阅读 Tcl/Tk 文档（这就是 Tkinter 文档链接到它们的原因），您将无法弄清楚这一点。实际上，即使是 Tk 文档也没有很好地描述验证。但它是这样工作的：

```
def count(self, new_text):
    self.x = len(new_text)
    self.char_count.set(str(140 - self.x))
    return True

# ...

self.vcmd = self.master.register(self.count)
self.post_tweet = Edit(self.master, validate='key',
                       validatecommand=(self.vcmd, '%P')) 
```

可以将`validatecommand`0 个或多个参数的列表传递给函数。如果您允许，该`%P`参数将获取条目将具有的新值。有关更多详细信息，请参见[`VALIDATION`](http://www.tcl.tk/man/tcl8.4/TkCmd/entry.htm#M16)条目手册页。

如果您希望拒绝输入（例如，如果您想阻止某人输入超过 140 个字符），只需返回`False`而不是`True`.

* * *

顺便说一句，值得查看[Tk wiki并在](http://wiki.tcl.tk)[ActiveState](http://code.activestate.com/recipes/langs/python/)上搜索 Tkinter 食谱。这是一个很好的赌注，有人有包装器，`Text`并且`Entry`隐藏了使这些解决方案（或其他）工作所需的所有额外内容，因此您只需要编写适当的`count`方法即可。甚至*可能*有一个添加-style 验证的`Text`包装器。`Entry`

还有其他几种方法可以做到这一点，但它们都有缺点。

添加一个`trace`以将所有写入挂钩到`StringVar`附加到您的小部件。这将被*任何*对变量的写入触发。我保证您第一次尝试使用它进行验证时会遇到无限递归循环问题，然后您将来会遇到其他更微妙的问题。通常的解决方案是创建一个哨兵标志，每次进入处理程序时都要检查它以确保您没有递归地执行它，然后在您执行任何可能触发递归事件的事情时设置它。（对于上面的示例，这不是必需的`edit_modified`，因为我们可以忽略任何将标志设置为 的人`False`，我们只将其设置为`False`，因此没有无限递归的危险。）

`<Key>`您可以从虚拟事件中获取新的字符（或多字符字符串） 。但是，你用它做什么呢？你需要知道它将被添加到哪里，它将被覆盖哪些字符，等等。如果你不做所有的工作来模拟`Entry`- 或者更糟糕的是 -`Text`编辑自己，这并不比仅仅做`len(entry.get()) + 1`。*

# ios - 在自定义静态框架iOS中使用magicrecords库

> ID：15771751
> 
> 赞同：4
> 
> 时间：2013-04-02T18:37:00.023
> 
> 标签：ios, core-data, frameworks, static-libraries, magicalrecord

我一直在为 iOS 实现一个自定义静态框架。一切运行良好，但现在我意识到我需要通过框架中的 coredata 存储信息。我在以前的项目中一直在使用magicrecord 库，我想知道是否有人有将magicrecord 集成到您自己的自定义静态框架中的经验。

每当我在框架代码中调用 setupcorestack 方法时，什么都没有发生。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T17:54:23.067

以下是我们的做法：

```
// 1: Note that all setup is done within the AppDelegate of the project (not the framework)

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    // 2: Locate your framework bundle
    NSString *mainBundlePath = [[NSBundle mainBundle] resourcePath];
    NSString *frameworkBundlePath = [mainBundlePath stringByAppendingPathComponent:@"Your-Framework-Bundle-Name.bundle"];
    NSBundle *frameworkBundle = [NSBundle bundleWithPath:frameworkBundlePath];

    // 3: Create an NSManagedObject Model by merging all models from the project and your framework. This simplifies saving as you can use a single persistent store coordinator to save a single managed object model.
    NSArray *bundles = [NSArray arrayWithObjects:[NSBundle mainBundle], frameworkBundle, nil];
    NSManagedObjectModel *models = [NSManagedObjectModel mergedModelFromBundles:bundles];

    [MagicalRecord setShouldAutoCreateManagedObjectModel:NO];
    [NSManagedObjectModel setDefaultManagedObjectModel:models];
    [MagicalRecord setupCoreDataStackWithStoreNamed:@"Your-Store-Name.sqlite"];

    // Project specific setup goes here...

    return YES;
    } 
```

注意：似乎有可能拥有多个持久性存储和多个数据库，但我们还没有尝试过这样做，或者到目前为止还需要这样做。但是，如果您确实需要多个持久存储，您也可以参考其他 SO 帖子：

[具有 MagicalRecord 的多个数据库或仅将部分数据库同步到 iCloud](https://stackoverflow.com/questions/14069730/multiple-databases-with-magicalrecord-or-sync-only-part-of-database-to-icloud)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-17T19:50:24.440

我这样做：

```
NSManagedObjectModel *model = [NSManagedObjectModel MR_newModelNamed:@"MyModel.momd" inBundleNamed:@"myOtherResource.bundle"];
[NSManagedObjectModel  MR_setDefaultManagedObjectModel:model];

//... continue to setup CoreDataStack after here 
```

# sql - 一起使用 INSERT 和 WITH 语句时出错

> ID：15771754
> 
> 赞同：1
> 
> 时间：2013-04-02T18:37:09.760
> 
> 标签：sql, postgresql, common-table-expression, postgresql-9.2, postgresql-9.0

PostgreSQL：Windows 机器上的 v9.2。

更新：服务器上postgres的版本是9.0，我机器上的版本是9.2.1。

我正在尝试使用以下查询来更新我创建的表。

```
WITH
    nei_nox AS (SELECT fips, sum(total_emissions) AS x FROM nei_data WHERE 
        pollutant_name ILIKE '%nitrogen%' GROUP BY fips),
    nei_sox AS (SELECT fips, sum(total_emissions) AS x FROM nei_data WHERE 
        pollutant_name ILIKE '%sulfur%' GROUP BY fips),
    nei_co AS (SELECT fips, sum(total_emissions) AS x FROM nei_data WHERE 
        pollutant_name ILIKE '%monoxide%' GROUP BY fips),
    nei_voc AS (SELECT fips, sum(total_emissions) AS x FROM nei_data WHERE 
        pollutant_name ILIKE '%PM10%' GROUP BY fips),
    nei_nh3 AS (SELECT fips, sum(total_emissions) AS x FROM nei_data WHERE 
        pollutant_name ILIKE '%PM2.5%' GROUP BY fips),
    nei_pm10 AS (SELECT fips, sum(total_emissions) AS x FROM nei_data WHERE 
        pollutant_name ILIKE '%volatile%' GROUP BY fips),
    nei_pm25 AS (SELECT fips, sum(total_emissions) AS x FROM nei_data WHERE 
        pollutant_name ILIKE '%ammonia%' GROUP BY fips)

-- INSERT INTO nei_data_by_county
(
    SELECT dat.fips, nei_nox.x as "nox",
         nei_sox.x as "sox",
         nei_co.x as "co",
         nei_voc.x as "voc",
         nei_nh3.x as "nh3",
         nei_pm10.x as "pm10",
         nei_pm25.x as "pm25"
    FROM bts2dat_55.cg_data dat
    LEFT OUTER JOIN nei_nox ON dat.fips = nei_nox.fips
    LEFT OUTER JOIN nei_sox ON dat.fips = nei_sox.fips
    LEFT OUTER JOIN nei_co ON dat.fips = nei_co.fips
    LEFT OUTER JOIN nei_voc ON dat.fips = nei_voc.fips
    LEFT OUTER JOIN nei_nh3 ON dat.fips = nei_nh3.fips
    LEFT OUTER JOIN nei_pm10 ON dat.fips = nei_pm10.fips
    LEFT OUTER JOIN nei_pm25 ON dat.fips = nei_pm25.fips
); 
```

当我在 pgAdmin 中运行查询时，数据会按预期返回。但是，当我取消注释时，`--INSERT INTO nei_data_by_county`我收到以下错误：

```
ERROR:  syntax error at or near "INSERT"
LINE 33: INSERT INTO nei_data_by_county
         ^ 
```

我从[文档](http://www.postgresql.org/docs/9.1/static/queries-with.html "这里")中知道您可以同时使用该`WITH`语句和该`INSERT`语句，但我无法让此查询正常运行。

有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:49:37.143

[**数据修改 CTE**](http://www.postgresql.org/docs/current/interactive/queries-with.html#QUERIES-WITH-MODIFYING)仅在 PostgreSQL 9.1 中引入。
你的错误信息（9.2 版）让所有人都上当了，包括你自己。

语法在 9.0 中是不可能的。

但解决方案很简单：改用子查询：

```
INSERT INTO nei_data_by_county (<<provide column list!!>>)
SELECT dat.fips
      ,nei_nox.x   -- as "nox" -- column alias is only for you documentation
       -- more columns
FROM   bts2dat_55.cg_data dat
LEFT   OUTER JOIN (
   SELECT fips, sum(total_emissions) AS x
   FROM   nei_data
   WHERE  pollutant_name ILIKE '%nitrogen%'
   GROUP  BY fips
   ) nei_nox USING (fips)
LEFT OUTER JOIN ... -- more subqueries 
```

# haskell - 访问元组中的字段

> ID：15771755
> 
> 赞同：4
> 
> 时间：2013-04-02T18:37:12.763
> 
> 标签：haskell

我正在自学 Haskell，虽然这是迄今为止最有启发性的经历，但我发现在 C 语言家族中很容易完成的一些事情仍然是个谜。所以，这是我非常基本的问题。我想要一个函数来提取具有等于给定值的某个字段的元组。到目前为止我有这个代码

```
withJob :: [(String, String, String)] -> String -> [String]
withJob [] _ = []
withJob ((_,_,x):xs) job
| job == x = x:(withJob xs job)
| otherwise = (withJob xs job)

users :: [(String, String, String)]
users = [("Jack", "22", "Programmer"), ("Mary", "21", "Designer"), ("John", "24", "Designer")] 
```

当这样调用`users 'withJob' "Programmer"`它时，它会输出，`["Programmer"]`但我希望它输出`[("Jack", "22", "Programmer")]`，但是我不知道如何访问元组而不是中的 job( `x`)`job == x = x:(withJob xs job)`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T18:45:56.587

为此使用`@`-patterns：

```
withJob :: [(String, String, String)] -> String -> [(String, String, String)]
withJob [] _   = []
withJob (t@(_,_,x):xs) job
   | job == x  = t : withJob xs job
   | otherwise =     withJob xs job 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T06:37:43.353

扩展@Ingo 的意思：写成Haskell 会更惯用：

```
jobField :: (String, String, String) -> String
jobField (_, _, j) = j

withJob :: [(String, String, String)] -> String -> [(String, String, String)]
withJob xs job = filter (\x -> jobField x == job) xs 
```

我们可能会更进一步：

```
data Person = Person { pName :: String, pAge :: Int, pJob :: String }

filterbyJob :: String -> [Person] -> [Person]
filterbyJob job xs = filter (\p -> pJob p == job) xs 
```

即便如此：

```
filterbyJob :: String -> [Person] -> [Person]
filterbyJob job = filter (\p -> pJob p == job) 
```

甚至：

```
filterbyJob :: String -> [Person] -> [Person]
filterbyJob job = filter ((== job) . pJob) 
```

在这一点上，除非你要使用`filterByJob`很多东西，否则它可能除了写`filter ((== job) . pJob)`你需要的地方之外没有真正的价值！

这个练习的重点是有一个强大的功能`filter`，人们可以直接使用，而不是每次都重写那种代码模式。它不仅可以节省您的时间和代码，而且通过重用已知函数，您可以让未来的程序员（包括未来的自己！）更容易理解代码。

# java - Java 和 C/C++ 应用程序可以共享信号量吗？

> ID：15771763
> 
> 赞同：3
> 
> 时间：2013-04-02T18:37:38.853
> 
> 标签：java, c++, c, multithreading

在 C/C++ 和 W32 api 中创建一个带有线程的 Windows 应用程序是我的意图。还有一个带有线程的java应用程序。

它们都有一组给定的信号量。

一个应用程序可以与另一个应用程序的信号量一起使用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T18:57:31.883

Java 线程不一定对应于 Win32 线程，Java 信号量也不一定与 Win32 信号量相同（例如不能命名）。可以使用 JNI 来实现线程库，但可能比它的价值更麻烦，特别是因为它不能很好地与 JVM 线程配合使用。它也将完全不可移植。

根据您实际尝试完成的任务，可能会更好地研究诸如 CORBA 或 RPC 之类的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T06:52:25.550

在围绕信号量构建整个应用程序系统（与更传统的 IPC 方式相反）之前，请考虑这一点。

与互斥锁不同，信号量没有线程所有权。只有系统的分布式和非持久性逻辑才能判断哪个进程在给定时间点“拥有”信号量的特定部分。这意味着如果其中一个应用程序突然终止（例如，由于缺陷而引用未分配的内存），则该缺陷将级联为整个系统的死锁或不当行为。因为无辜的应用程序会被冻结，而有问题的应用程序会消失，所以无论何时发生这种情况，您都可能很难追查根本原因。

如果您只需要一些短代码块的互斥，请考虑 Win32 命名互斥锁、数据库表或基于文件系统的锁，作为信号量的更易于管理的替代品（在您的情况下允许其中任何一种）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T18:57:39.270

是的，WIN32 确实有多进程信号量，但您可能需要创建一个 JNI 包装器才能从 Java 端使用它们。

[在http://msdn.microsoft.com/en-us/library/ms682438%28v=VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms682438%28v=VS.85%29.aspx)的“备注”部分中查找以“多个进程”开头的段落。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T18:41:26.853

不，线程与所属的进程有关。如果您计划同步两个应用程序，您需要使用一些 IPC（进程间通信）机制

# powershell - powershell脚本中的schtasks问题

> ID：15771767
> 
> 赞同：1
> 
> 时间：2013-04-02T18:37:58.997
> 
> 标签：powershell, windows-task-scheduler

我是 powershell 脚本的新手，我在 windows server 2003 上遇到了 schtasks。我知道问题在于转义，但无法解决它。

```
[string]$a = "-command `"Powershell $b > $c`""
$d = "C:\powershell.exe"; 
```

其中 $b 是 powershell 脚本的路径 (C:\filename.ps1) $c 是日志文件路径 (C:\log\filename.log)

当我尝试使用 schtaks 安排任务时

```
schtasks /create /sc weekly /d $tsk.DofW /st $tsk.At /tn "$tsk.name" /tr "$d $($a)" 
```

我收到一条错误消息，提示无效参数/选项 - 'C:\filename.ps1'

任何帮助表示赞赏

**编辑**

如果我像您提到的那样运行它而没有任何错误，但是当我查看任务调度程序操作选项卡时，它会在详细信息 C:\powershell.exe System.Collections.Hashtable.args 而不是 powershell.exe -command "Powershell C :\filename.ps1 > C:\log\filename.log"。如果我在 schtasks 中添加一个额外的括号，例如“$d $($a)”，我会收到一条错误消息，提示 Invalid argument/option ">"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:57:25.820

试试这个（未经测试）。评论是针对以下行：

```
$b = "C:\filename.ps1"
$c = "C:\log\filename.log"
# Removed [string] - When value is quoted, it's a string, you don't need to cast it.
# Removed "PowerShell" in a PS console(which you open with your $d, 
# you only need to specify the scriptpath to the file. You don't need "powershell" at the start.
$a = "-command $b > $c"

# Powershell executable is in the following location
$d = "c:\windows\System32\WindowsPowerShell\v1.0\powershell.exe"

schtasks /create /sc weekly /d $tsk.DofW /st $tsk.At /tn "$tsk.name" /tr "$d $a" 
```

**编辑**问题是，当您转义 中的引号时`$a`，其中一个引号在命令运行时结束了参数字符串。因此，命令的其余部分考虑了其他参数，这些`powershell`参数找不到要链接的参数。

当您使用`-command`字符串指定参数时，您需要将其添加到命令的末尾，因为`-command`将其后面的所有内容都视为它的值。由于`-command`已经在您的 taskrun 操作结束时，您所需要的只是删除`$a`.

# c# - 突出显示其中一项时刷新列表框时出错

> ID：15771770
> 
> 赞同：0
> 
> 时间：2013-04-02T18:38:06.013
> 
> 标签：c#, wpf, xaml, listboxitem

我目前正在开发一个项目，该项目有一个列表框，表示连接到服务器的玩家。我对列表框项目进行了模板化，以便它们包含播放器的图片及其名称，当鼠标进入该区域时，这些元素周围会出现灰色边框。

我的问题是，如果用户在列表更新时将鼠标悬停在其中一个列表框项目上（假设当新用户连接到服务器时），Visual Studio 会抛出一个与我的鼠标悬停机制有关的错误，告诉我它在 XAML 中找不到名称。

这是我的列表框项目模板

```
<ListBox.ItemTemplate>
    <DataTemplate >
        <Border  BorderThickness="3" CornerRadius="3" Margin="2,2,0,0" Cursor="Hand">

            <Border.BorderBrush  >
                <SolidColorBrush   x:Name="BorderBackgroundColor" /> 
            </Border.BorderBrush >

            <Grid VerticalAlignment="Center" Margin="0,0,0,0">

                <Grid.Background>
                    <SolidColorBrush  x:Name="GridBackgroundColor"  />
                </Grid.Background>

                <Grid.Triggers >
                    <EventTrigger RoutedEvent="Grid.MouseEnter" >
                        <BeginStoryboard>
                            <Storyboard>
                                <ColorAnimation Duration="0:0:0.2" Storyboard.TargetName="GridBackgroundColor" Storyboard.TargetProperty="Color"  To="Gray" />
                                <ColorAnimation Duration="0:0:0.2" Storyboard.TargetName="BorderBackgroundColor" Storyboard.TargetProperty="Color"  To="Gray" />
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                    <EventTrigger RoutedEvent="Grid.MouseLeave" >
                        <BeginStoryboard>
                            <Storyboard>
                                <ColorAnimation Duration="0:0:0.2" Storyboard.TargetName="GridBackgroundColor" Storyboard.TargetProperty="Color"  To="Transparent" />
                                <ColorAnimation Duration="0:0:0.2" Storyboard.TargetName="BorderBackgroundColor" Storyboard.TargetProperty="Color"  To="Transparent" />
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                </Grid.Triggers>

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition   />
                </Grid.RowDefinitions>

                <Border Grid.Column="0" Grid.Row="0" BorderThickness="2" CornerRadius="2" Height="30"  >
                    <Border.BorderBrush>
                        <MultiBinding Converter="{StaticResource StateToBorderConverter}" >
                            <Binding RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType={x:Type UserControl}}"  />
                            <Binding  Path="State" />
                        </MultiBinding>
                    </Border.BorderBrush>

                    <Image Source="{Binding Path=imagePath}" VerticalAlignment="Bottom" HorizontalAlignment="Left" />
                </Border>

                <Label Grid.Column="1" Grid.Row="0" Content="{Binding Path=profileName}"  VerticalContentAlignment="Bottom" HorizontalAlignment="Left" VerticalAlignment="Bottom"  Margin="5,0,0,0" FontSize="15" />

            </Grid>
        </Border>
    </DataTemplate>
</ListBox.ItemTemplate> 
```

这是刷新方法

```
 private void ActualisePlayerList( PlayerListMessage playerListMessage )
    {
        playersProfileInfo.Clear();

        foreach (Utilitaire.ClientProperties oneProperty in playerListMessage.Clients)
        {
            string profileName = oneProperty.Username;
            string imagePath = Directory.GetCurrentDirectory() + "//Profile" + oneProperty.Username.ToLower() + ".jpg";
            if (!File.Exists(imagePath))
            {
                imagePath = "ImageRessources/anonymous-icon.jpg";
            }
            playersProfileInfo.Add(new ProfileContainer(imagePath, profileName, oneProperty.State));
        }

       PlayersListBox.ItemsSource = playersProfileInfo; 
       PlayersListBox.Items.Refresh();

       Filter("");
    } 
```

这是被抛出的命令

```
 Cannot find the name 'GridBackgroundColor' in the name range of 'System.Windows.Controls.Grid'. 
```

如前所述，错误是在调用 ActualisePlayerList 之后触发的。该错误描述已翻译，所以请告诉我它是否没有响铃。无论如何，任何想法为什么会出现？关于模板化列表框项上的触发器，我有什么不知道的吗？当项目已经被删除时，是否正在调用淡出动画？我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:43:29.337

我认为您的问题与您如何刷新列表有关。与其清除列表并重新分配 ItemsSource，不如尝试设置 ItemsSource 一次，然后只操作其中的数据。如果您`ObservableCollection<>`用作源，则不必调用任何`Refresh()`. 刷新将自动发生。

# shell - 如何定义一个“死”壳函数？

> ID：15771773
> 
> 赞同：4
> 
> 时间：2013-04-02T18:38:26.630
> 
> 标签：shell, zsh

注意：这*不是*In bash的副本[，是否有 die "error msg" 的等价物](https://stackoverflow.com/questions/7868818/in-bash-is-there-an-equivalent-of-die-error-msg)，如本文末尾所示。

考虑shell函数

```
foo () {
    echo "testing..." 1>&2
    return 1
    echo "should never reach this point" 1>&2
} 
```

下面显示了`foo`的预期行为：

```
% foo || echo $?
testing...
1 
```

我想将前*两*行中显示的功能封装`foo`在一个函数`die`中，以便可以将定义`foo`简化为

```
foo () {
    die 1 "testing..."
    echo "should never reach this point" 1>&2
} 
```

...同时仍保留其原始行为。

我的兴趣主要是`zsh`，但也会对适合`bash`和/或`/bin/sh`脚本的答案感兴趣，如果它们不同的话。

* * *

顺便说一句，这不起作用：

```
die () {
    local exit_code=$1
    shift
    echo "$*" 1>&2
    exit $exit_code
} 
```

如果从命令行运行一个`foo`使用 this的版​​本`die`，结果将是杀死一个人当前的 shell（至少这是我尝试类似的东西时得到的结果）。这就是为什么这个问题*不是*[In bash, is there an equivalent of die "error msg"](https://stackoverflow.com/questions/7868818/in-bash-is-there-an-equivalent-of-die-error-msg)的重复。无论如何，其他问题的答案不会满足我在这里的要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T21:16:49.000

严格来说，我不认为你想要什么是可能的。你不能简单地通过调用另一个函数从一个函数返回。不过，这可能接近您想要的：

```
die () {
    echo "${*:2}" 1>&2
    return $1
}

foo () (      # Parentheses, not braces, to enclose the body
    set -e
    die 1 "testing..."
    echo "Shouldn't reach here" 1>&2
) 
```

当`die`返回状态为 1 时，`set -e`会导致当前 shell 退出。但是， 的主体`foo`启动了一个新的子shell，所以这就是退出的内容，将控制权返回给调用`foo`. 但是，有两个明显的问题：

1.  `set -e; die...`不短于`echo...; return 1`
2.  制作`foo`子外壳的主体将防止调用者看到该函数中设置的任何变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-01T00:01:56.477

从 zsh 4.3.4 开始，您可以使用 throw/catch 语法。我发现它比老式的 'set -e' 或 exit 进行错误处理的问题要少得多。只要确保你执行“autoload -U throw catch”来访问它们。查看“man zshcontrib”了解详细信息。

# android - Android 浮点数和负数验证

> ID：15771774
> 
> 赞同：0
> 
> 时间：2013-04-02T18:38:28.250
> 
> 标签：android, regex

```
public void updateDisplay(View v)
{
    Button button = (Button) findViewById(R.id.button1);
    button.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            tempNumber.setText(tempNumber.getText().toString() + ((Button) view).getText());
        }
    });

    tempNumber.setText( tempNumber.getText().toString() + ((Button) v).getText() );
}

    <Button
        android:id="@+id/button1"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="0.1"
        android:background="@drawable/button"
        android:onClick="updateDisplay"
        android:text="1"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="5dp"
        android:textColor="@drawable/button_tx_color"
        android:textSize="15sp" />

    <Button
        android:id="@+id/button2"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="0.1"
        android:background="@drawable/button"
        android:onClick="updateDisplay"
        android:text="2"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="5dp"
        android:textColor="@drawable/button_tx_color"
        android:textSize="15sp" />

    <Button
        android:id="@+id/button3"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="0.1"
        android:background="@drawable/button"
        android:onClick="updateDisplay"
        android:text="3"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="5dp"
        android:textColor="@drawable/button_tx_color"
        android:textSize="15sp" />

    <Button
        android:id="@+id/button4"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="0.1"
        android:background="@drawable/button"
        android:onClick="updateDisplay"
        android:text="4"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="5dp"
        android:textColor="@drawable/button_tx_color"
        android:textSize="15sp" />

    <Button
        android:id="@+id/button5"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:onClick="updateDisplay"
        android:layout_weight="0.1"
        android:background="@drawable/button"
        android:text="5"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="5dp"
        android:textColor="@drawable/button_tx_color"
        android:textSize="15sp" />

    <Button
        android:id="@+id/button6"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:onClick="updateDisplay"
        android:layout_weight="0.1"
        android:background="@drawable/button"
        android:text="6"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="5dp"
        android:textColor="@drawable/button_tx_color"
        android:textSize="15sp" />

    <Button
        android:id="@+id/button7"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:onClick="updateDisplay"
        android:layout_weight="0.1"
        android:background="@drawable/button"
        android:padding="0sp"
        android:text="7"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="5dp"
        android:textColor="@drawable/button_tx_color"
        android:textSize="15sp" />

    <Button
        android:id="@+id/button8"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:onClick="updateDisplay"
        android:layout_weight="0.1"
        android:background="@drawable/button"
        android:text="8"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="5dp"
        android:textColor="@drawable/button_tx_color"
        android:textSize="15sp" />

    <Button
        android:id="@+id/button9"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:onClick="updateDisplay"
        android:layout_weight="0.1"
        android:background="@drawable/button"
        android:text="9"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="5dp"
        android:textColor="@drawable/button_tx_color"
        android:textSize="15sp" />

    <Button
        android:id="@+id/button0"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:onClick="updateDisplay"
        android:layout_weight="0.1"
        android:background="@drawable/button"
        android:text="0"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="5dp"
        android:textColor="@drawable/button_tx_color"
        android:textSize="15sp" />

    <Button
        android:id="@+id/buttonDot"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:onClick="updateDisplay"
        android:layout_weight="0.1"
        android:background="@drawable/button"
        android:text="."
        android:layout_marginTop="5dp"
        android:layout_marginBottom="5dp"
        android:textColor="@drawable/button_tx_color"
        android:textSize="15sp" />

    <Button
        android:id="@+id/buttonM"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:onClick="updateDisplay"
        android:layout_weight="0.1"
        android:background="@drawable/button"
        android:text="-"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="5dp"
        android:textColor="@drawable/button_tx_color"
        android:textSize="15sp" /> 
```

我的代码很少，可以在单击按钮时更新和创建数字。一切正常，但我想对浮点数和负数进行一些验证。

错误：12.343.325.4

正确：12.343（第二个点不能写）

错误 12-324-45

正确 -1234

tempNumber 是一个 TextView，我在其中显示结果，仅此而已。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:05:24.960

我不确定我是否理解您的要求，因为它似乎就像在 onClick 方法中添加更多代码以防止错误值一样简单。就像是：

```
new View.OnClickListener() {

    private boolean dotPresent;

    public void onClick(View view) {
        String buttonText = ((Button)view).getText().toString();
        boolean isDot = buttonText.equals(".");
        boolean isSign = buttonText.equals("-");
        int currentLength = tempNumber.getText().length();

        if (isSign && currentLength != 0) return;
        if (isDot && dotPresent) return;

        tempNumber.setText(tempNumber.getText().toString() + buttonText);

        if (isDot) dotPresent = true;
    }
} 
```

前一个类应该只创建一次，并使用 setOnClickListener() 分配给每个按钮。

顺便说一句，另一种可能性是考虑使用普通的 EditText 作为 inputType TYPE_CLASS_NUMBER | TYPE_NUMBER_FLAG_DECIMAL | TYPE_NUMBER_FLAG_SIGNED。然后软键盘应该为用户提供一个数字键盘，并且还存在防止错误值的过滤器。Android 文档中的更多信息：http:
[//developer.android.com/reference/android/text/InputType.html#TYPE_NUMBER_FLAG_DECIMAL](http://developer.android.com/reference/android/text/InputType.html#TYPE_NUMBER_FLAG_DECIMAL)

# maven - 使用 Maven 元数据发布 Ivy SNAPSHOTS

> ID：15771776
> 
> 赞同：3
> 
> 时间：2013-04-02T18:38:30.687
> 
> 标签：maven, nexus, ivy, maven-metadata

我有一个常春藤项目，将其工件发布到 Nexus Maven 存储库。然后我需要其他 Maven 项目才能使用这些 jar 作为依赖项。我已经能够让 Ivy 创建和上传 pom.xml 以及 jars，它工作正常。问题是，当我使用 Ivy 发布新的 SNAPSHOT 版本时 - 没有一个 Maven 项目将检索新的快照依赖项，即使我这样做：

```
mvn clean install -U 
```

我注意到 Ivy 没有将 maven-metadata.xml 文件发布到存储库——我认为这是问题所在？如果是这样，有什么方法可以让 Ivy 制作这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T20:13:51.120

ivy可以配置在解析依赖时读取这个文件（见[ibilio](http://ant.apache.org/ivy/history/latest-milestone/resolver/ibiblio.html)解析器的“m2compatible”属性），但是[发布](http://ant.apache.org/ivy/history/latest-milestone/use/publish.html)任务不会创建或更新这个文件.....

似乎创建和更新“maven-metadata.xml”文件是客户的工作......这是 Maven 存储库的一个未记录的功能。（如果有人能找到它的描述，也许可以修复一个常春藤错误）。

标准解决方法是定期安排 Nexus 任务以重新生成元数据文件。看：

*   [http://www.sonatype.com/people/2009/09/nexus-scheduled-tasks/](http://www.sonatype.com/people/2009/09/nexus-scheduled-tasks/)

一个更极端的解决方案是使用[Maven ANT](http://maven.apache.org/ant-tasks/)任务来执行发布步骤....

# 关于快照修订的评论

最近，我得出的结论是快照版本不值得付出努力。持续交付提倡每个构建都可能发布的概念，并且 ivy 有一个漂亮的构建[编号](http://ant.apache.org/ivy/history/latest-milestone/use/buildnumber.html)任务，以确保每个构建都是独一无二的。当只有一种构建时，我发现我的构建过程更简单。

快照是仅在使用 Maven 与其他项目共享开发构建工件时才需要的功能。恕我直言，ivy 的动态修订功能更强大，因为它们在构建时解决了“最新”修订。在以下示例中查看交付任务如何[与](http://ant.apache.org/ivy/history/latest-milestone/use/deliver.html)[makepom](http://ant.apache.org/ivy/history/latest-milestone/use/makepom.html)任务相结合：

*   [将 ivy.xml 转换为 pom.xml](https://stackoverflow.com/questions/9426011/convert-ivy-xml-to-pom-xml/9429286#9429286)
*   [使用 ant 脚本自动增加我所有项目的常春藤修订版](https://stackoverflow.com/questions/8384024/automate-ivy-revision-increase-for-all-my-projects-using-ant-script/8392205#8392205)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-22T01:19:00.217

我遇到了类似的问题，发现以下网站有助于解决它： [http ://ssinghvi.wordpress.com/2012/01/26/unable-to-retrieve-latest-artifact-from-sonatype-nexus-using-apache -常春藤/](http://ssinghvi.wordpress.com/2012/01/26/unable-to-retrieve-latest-artifact-from-sonatype-nexus-using-apache-ivy/)

基本使用`<ibiblio name="Maven Central" m2compatible="true" useMavenMetadata="false" root="http://…" />`

# ruby-on-rails - Rails - 基于对象值的链接到路径

> ID：15771784
> 
> 赞同：1
> 
> 时间：2013-04-02T18:38:48.493
> 
> 标签：ruby-on-rails

我在索引视图中有一个用户对象列表。对于每个用户，我会显示一个带有 link_to 调用的名称，以便像这样编辑用户：

```
<% @users.each do |u| %>
  <%= link_to u.name, edit_user_path(u) %><br/>
<% end %> 
```

我想根据用户的角色属性（例如员工、经理等）使用不同的编辑路径。我的路线中有`edit_employee_path`,`edit_manager_path`等。

动态确定第二个参数的最佳方法是`link_to`什么？我可以用一堆难看的 if/else 代码来解决这个问题，但我想用最惯用的 Rails 方式来做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T18:43:35.293

辅助方法怎么样

在您可能是`users_helper`或您选择的任何其他助手中

```
def edit_path_by_type(user)
   user.role == "Employee" ? edit_employee_path(user) : edit_manager_path(user)
end 
```

在你看来

```
<%= link_to u.name, edit_path_by_type(u) %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T18:43:46.010

您可以使用 Helper 模块来确定要运行的 *_path 方法。例如：

```
module UsersHelper
  def edit_url(user)
    case user.role
    when :employee
      employee_edit_path(user)
    when :manager
      manager_edit_path(user)
    else
      edit_user_path(user)
    end
  end
end 
```

如果您的路径方法以非常一致的方式命名，您可能能够调用动态构造的方法，例如：

```
<%= link_to u.name, send(:"#{u.role}_user_edit_path", u) %><br/> 
```

但是您需要注意始终存在具有适当名称的方法。

# angularjs - 在 ng-grid 中的选定列标题上设置 css

> ID：15771785
> 
> 赞同：0
> 
> 时间：2013-04-02T18:38:52.287
> 
> 标签：angularjs, angular-ui

有没有办法改变列的 ng-grid 标题的背景颜色，当它是被排序的列时？我没有看到该列与其他列有任何不同的类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:57:56.983

可以定义你自己的`headerRowTemplate`让你使用`ng-class`

[https://github.com/angular-ui/ng-grid/wiki/Templating](https://github.com/angular-ui/ng-grid/wiki/Templating)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T08:59:38.913

我只是通过添加**headerClass 来做**同样的事情。在控制器的标题旁边添加**headerClass: "your custom class name" 。**然后**在 ng-grid 中的自定义标头类上应用 css**。

这里有更多类： [http ://angular-ui.github.io/ng-grid/](http://angular-ui.github.io/ng-grid/)

# c# - 如何在 UI 项目之外创建 URL 链接？

> ID：15771795
> 
> 赞同：0
> 
> 时间：2013-04-02T18:39:08.633
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我有一个 MVC 3 应用程序项目，它引用了一个`ServiceProject`执行命令的`CreateNewPost(Foo entity)`...

重要提示：此 ServiceProject 无法引用`System.Web.MVC`

我需要创建一封电子邮件（此方法在我的 ServiceProject 上），其中包含指向`TestController/FooAction`我系统上某个特定页面（示例）的 url 链接，但我想创建一个相对 URL，它将在生产环境、测试环境中正确生成，甚至开发环境（本地主机）。

如何创建该 URL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:43:23.380

这确实需要参考`System.Web.MVC`，但它应该让您对如何完成它有一个基本的了解。我创建了一个扩展来帮助我解决这个问题：

```
 public static string GetAbsoluteURL(this RouteCollection routes, RequestContext context, RouteValueDictionary values, HttpProtocolType httpProtocol)
    {
        string host;

        if (context.HttpContext.Request.Url != null)
        {
            host = context.HttpContext.Request.Url.Authority;
        }
        else
        {
            host = context.HttpContext.Request.UrlReferrer.Host;
        }

        string virtualPath = routes.GetVirtualPath(context, "Default", values).VirtualPath;

        string protocol = httpProtocol == HttpProtocolType.HTTP ? "http" : "https";

        return string.Format("{0}://{1}{2}", protocol, host, virtualPath);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T19:43:23.877

一种明显的方法是将基本 url 传递给方法（或者可能通过依赖注入传递给整个项目）。

* * *

另一种方式，如果您可以参考`System.Web`并且涉及到 HTTP 请求，您可以使用

```
HttpContext.Request.Url.Scheme + "://" +  HttpContext.Request.Url.Authority + HttpContext.Request.ApplicationPath 
```

`Scheme`为您提供 url 方案（又名*协议*）。

`Authority`为您提供请求服务器的主机名和端口。

`ApplicationPath`为您提供服务器上 ASP.NET 应用程序的虚拟根路径。

* * *

看起来你不能没有 a ，正如之前[在这里](https://stackoverflow.com/questions/2164261/get-host-name-without-using-httprequest)`HttpRequest`回答的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T19:27:15.850

如果不能参考`System.Web.MVC`，就不能使用`UrlHelper`。

但是，您可以使用其中的`System.Uri`类`System.dll`

因此，您可以计算 Web 项目中的基本 uri，将其作为字符串传递给您的服务项目，然后用于`Uri`创建最终的 uri：

```
// controller in web project
ServiceProject.SendEmail( Url.Content( "~" ), ... );

// service project
public void SendEmail( string baseUriAsString, ... )
{
  var baseUri = new Uri( baseUriAsString, UriKind.Absolute );
  string relativeUri = ...
  var finalUri = new Uri( baseUri, relativeUri );
  ... 
```

见 MSDN：[`System.Uri`](http://msdn.microsoft.com/en-us/library/system.uri.aspx)

# lucene - 配置自定义 Lucene Analyzer 以接受某些停用词

> ID：15771796
> 
> 赞同：3
> 
> 时间：2013-04-02T18:39:09.333
> 
> 标签：lucene, analyzer, stemming, hippocms

我需要修改 lucene 分析器以使其能够识别单词“Ben”（荷兰语停用词）。请进一步指导我。如何让 Lucene Analyzer 接受这个词作为常规词？

服务器的 Repository.xml

```
<paramname="analyzer"value="org.hippoecm.repository.query.lucene.StandardHippoAnalyzer"/> 
```

工作区.xml

```
<?xmlversion="1.0"encoding="UTF-8"?>
<Workspacename="default">
    <!--
        virtual file system of the workspace:
        class: FQN of class implementing the FileSystem interface
    -->
    <FileSystemclass="org.apache.jackrabbit.core.fs.mem.MemoryFileSystem">
    </FileSystem>
    <!--
        persistence manager of the workspace:
        class: FQN of class implementing the PersistenceManager interface
    -->
    <PersistenceManagerclass="org.apache.jackrabbit.core.persistence.mem.InMemPersistenceManager">
    </PersistenceManager>
    <!--
        Search index and the file system it uses.
        class: FQN of class implementing the QueryHandler interface
    -->
    <SearchIndexclass="org.apache.jackrabbit.core.query.lucene.SearchIndex">
      <paramname="path"value="${wsp.home}/index"/>
    </SearchIndex>
</Workspace> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T20:58:45.730

最简单的方法是：

将以下类复制到本地项目中

[http://svn.onehippo.org/repos/hippo/hippo-cms7/repository/tags/hippo-repository-2.24.02/engine/src/main/java/org/hippoecm/repository/query/lucene/StandardHippoAnalyzer。爪哇](http://svn.onehippo.org/repos/hippo/hippo-cms7/repository/tags/hippo-repository-2.24.02/engine/src/main/java/org/hippoecm/repository/query/lucene/StandardHippoAnalyzer.java)

更改 Java 包和文件名。

删除可能会影响您的问题的停用词（请参阅上面的 Java 代码）。

更新您的 repository.xml 以使用带有新包和类名的分析器

删除现有的 lucene 索引并重新启动 Hippo。

```
$ mvn clean package && mvn -Pcargo.run 
```

那应该这样做。

# html - 是否可以开一个 合二为一 元素然后在另一个中关闭它 元素>

> ID：15771797
> 
> 赞同：3
> 
> 时间：2013-04-02T18:39:12.110
> 
> 标签：html, forms

我想知道我是否可以做这样的事情：

```
<div>
    <form>
        <input type="text">
</div>
<div>
        <input type="submit" value="Submit">
    </form>
</div> 
```

这是我正在尝试做的简化版本。我的意图是让按钮在表单本身的单独 div 中提交表单。我知道我可以用 javascript 做到这一点，但我认识的人说我可以这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T18:40:20.907

将表单标签移到 div 标签之外

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T18:40:27.640

不，您需要正确关闭标签。请使用标记验证器：http: [//validator.w3.org](http://validator.w3.org)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T18:44:29.983

您需要正确关闭标签，但如果想将表单提交到 div 之外，您可以这样做：

```
<div>
     <form name="form1">
       <input type="text">
     </form>
</div>
<div>
    <input type="button" onclick="document.form1.submit();" value="Submit">
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T18:41:18.197

您可以将整个 div 集包装在表单标签中，这样可能更有意义。

# android - 为什么列表首选项中的条目没有显示在应用程序中？

> ID：15771800
> 
> 赞同：3
> 
> 时间：2013-04-02T18:39:18.130
> 
> 标签：android, xml, arrays, settings, application-settings

在设置部分，有一个颜色列表首选项（如下面的代码所示），但我似乎找不到值不显示的原因。我检查了互联网，但我似乎无法理解 android:entries 和 android:entryValues 之间的区别。这可能是我的代码中的问题吗？任何帮助表示赞赏。提前致谢。

下面的数组

```
<string-array name="preferencebackground">
<item name="Red"/>
<item name="Green"/>
<item name="Blue"/>
<item name="Orange"/>
</string-array>
<string name="preferencebackground">Background Colour Preferences</string>
 <string-array name="preferencebackgroundvalues">
<item name="Red"/>
<item name="Green"/>
<item name="Blue"/>
<item name="Orange"/>
</string-array> 
```

Pref_general.xml

```
 <ListPreference
    android:defaultValue="-1"
    android:entries="@array/preferencebackground"
    android:entryValues="@array/preferencebackgroundvalues"
    android:key="example_list1"
    android:negativeButtonText="@null"
    android:positiveButtonText="@null"
    android:title="@string/preferencebackground" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T19:00:13.980

数组的定义应如下所示：

```
<string-array name="entries">
    <item>Red</item>
    <item>Blue</item>
    <item>Green</item>
    <item>Black</item>
</string-array>

<string-array name="values">
    <item>#FF0000</item>
    <item>#0000FF</item>
    <item>#00FF00</item>
    <item>#000000</item>
</string-array> 
```

此外，我会从首选项中删除这些行...

```
android:negativeButtonText="@null"
android:positiveButtonText="@null" 
```

...而且，更重要的是：设置作为列表一部分的默认值。

```
<ListPreference
    android:defaultValue="Red"
    android:entries="@array/preferencebackground"
    android:entryValues="@array/preferencebackgroundvalues"
    android:key="example_list1"
    android:title="@string/preferencebackground" /> 
```

假设您将数组存储在一个名为的文件`arrays.xml`中，并且首选项文件的格式也很好，那么它应该可以正常工作。

ps 当然最好使用字符串引用而不是硬编码`Red`和颜色引用而不是`#FF0000`etc。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-08-20T10:43:06.360

我遇到了同样的问题，我的错误是在arrays.xml上，

这是我以前的代码..

```
 <string-array name="list">
        <item name="option 1">Option 1 </item>
        <item name="option 2">Option 2 </item>
        <item name="option 3">Option 3 </item>
        <item name="option 4">Option 4 </item>
    </string-array>

    <string-array name="lvalues">
        <item name="1">1</item>
        <item name="2">2</item>
        <item name="3">3</item>
        <item name="4">4</item>
    </string-array> 
```

这是我修改后的代码。

```
 <string-array name="optionlist">
        <item name="option 1">Option 1 </item>
        <item name="option 2">Option 2 </item>
        <item name="option 3">Option 3 </item>
        <item name="option 4">Option 4 </item>
    </string-array>

    <string-array name="optionlistValues">
        <item name="1">1</item>
        <item name="2">2</item>
        <item name="3">3</item>
        <item name="4">4</item>
    </string-array> 
```

希望这会有所帮助。

# javascript - 如何设置 socket.io 来源以限制连接到一个 url

> ID：15771805
> 
> 赞同：16
> 
> 时间：2013-04-02T18:39:46.707
> 
> 标签：javascript, node.js, socket.io

我们有一个 html 站点和一个为该网站提供服务的 node.js 服务器。网站和服务器使用 socke.io 交换数据。我们在文档中发现了这一点：

*origins 默认为* `*:*` *允许连接到 Socket.IO 服务器的源。*

我们的 html.site 位于`http://questionexample.com/page1`. 只有这个网站可以连接到我们的服务器。（但每个人都可以连接到那个网站。）我们如何设置来源？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2014-02-11T19:29:07.237

如果你深入研究 Socket.io 源代码，你会发现这样几行：

```
var origin = request.headers.origin || request.headers.referer
  , origins = this.get('origins');

...

var parts = url.parse(origin);
parts.port = parts.port || 80;
var ok =
  ~origins.indexOf(parts.hostname + ':' + parts.port) ||
  ~origins.indexOf(parts.hostname + ':*') ||
  ~origins.indexOf('*:' + parts.port); 
```

如您所见，Socket.io 获取来自客户端的来源（或引用者），检索域名和端口，并与`origins`您指定的选项进行比较。

**所以有效`origins`值为（`*`表示“任何”）：**

*   `testsite.com:80`
*   `http://testsite.com:80`
*   `http://*:8080`
*   `*:8080`
*   `testsite.com:* http://someotherdomain.com:8080` *（以空格分隔的多个来源）*
*   `testsite.com:*/somepath` *（socket.io 将忽略 /somepath）*
*   `*:*`

这些是无效的（因为没有端口号）：

*   `testsite.com`
*   `http://testsite.com`
*   `http://testsite.com/somepath`

另请注意，如果您指定`sub.testsite.com`为 origins 值，则`testsite.com`将是**有效**的来源。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-10T14:00:31.280

我有类似的问题。尝试在生产模式下运行节点`NODE_ENV=production node app.js`。我有那个代码（[在这里推荐](https://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO#recommended-production-settings)）：

```
io.configure('production', function(){
    console.log("Server in production mode");
    io.enable('browser client minification');  // send minified client
    io.enable('browser client etag'); // apply etag caching logic based on version number
    io.enable('browser client gzip'); // the file
    io.set('log level', 1);           // logging
    io.set('transports', [            // all transports (optional if you want flashsocket)
        'websocket'
        , 'flashsocket'
        , 'htmlfile'
        , 'xhr-polling'
        , 'jsonp-polling'
    ]);
io.set('origins', 'http://questionexample.com/page1:*');
}); 
```

并且 Node 在开发模式下运行，所以它根本无法工作。启用生产模式后一切正常。

我知道答案有点晚了，但也许其他人会使用它

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-01-05T15:54:46.957

对于较新版本的`socket.io`（直到当前`4.x.x`，您需要将 CORS 来源设置为服务器选项的一部分。

CORS 现在被拆分为自己的模块 - 有关详细信息，请参阅[自述文件](https://github.com/expressjs/cors#configuration-options)。

默认配置是；

```
{
  "origin": "*",
  "methods": "GET,HEAD,PUT,PATCH,POST,DELETE",
  "preflightContinue": false,
  "optionsSuccessStatus": 204
} 
```

并限制在一个站点上使用任何子域；

```
cors: {
        origin: [/\.example\.com$/],
        methods: ["GET", "POST"]
        } 
```

这是一个非常简单/基本的配置块，适合那些不使用 express 或除了原始 socket.io 引擎之外的任何东西的人；编辑：更新了`socket.io`.

```
// Options for socket.io => 3.0.0
var options = {
        allowUpgrades: true,
        transports: [ 'polling', 'websocket' ],
        pingTimeout: 9000,
        pingInterval: 3000,
        cookie: 'mycookie',
        httpCompression: true,
        cors: '*:*' <---- Allow any origin here [NOTE THE NAME CHANGE]
}; 
```

旧版本使用；

```
// Options for socket.io > 1.0.0
var options = {
        allowUpgrades: true,
        transports: [ 'polling', 'websocket' ],
        pingTimeout: 9000,
        pingInterval: 3000,
        cookie: 'mycookie',
        httpCompression: true,
        origins: '*:*' <---- Allow any origin here
};

io = require('socket.io')(8010, options); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-06T08:06:58.560

您可以在服务器端使用您网站的 url 执行类似的操作

```
 if (origin !== 'https://foo.example.com') {
    return callback('origin not allowed', false);
  }
  callback(null, true);
}); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-04-02T19:17:36.197

我认为`io.set('origins', http://questionexample.com/page1)`应该这样做

# c# - 在 C# 中使用 DirectShow lib 媒体文件中的跟踪栏

> ID：15771806
> 
> 赞同：-1
> 
> 时间：2013-04-02T18:39:51.920
> 
> 标签：c#, directshow

我想在窗口窗体中使用轨迹栏，它在视频或音频播放时打开媒体文件我想相应地移动轨迹栏的滑块。我已经设置了跟踪栏工具的所有属性，例如 maximun、minimun、tickfreguency small 和 large 相应的变化。使用 mediaposition 我使用 get_duration() 方法收集媒体的 currentPosition 和总持续时间，并将跟踪栏值设置为当前位置，但问题是媒体正在运行时，栏的滑块没有移动。我知道我在代码中遗漏了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:14:37.720

确保您确实在 LOOP 中更新了该信息。所以它会被更新，例如，在计时器中。每 1 秒。

您还可以使用调试器检查从这两个调用（get_duration 和 get_position）中获得的值。

# php - Symfony2 和 XCache。有没有人让它工作？

> ID：15771809
> 
> 赞同：1
> 
> 时间：2013-04-02T18:39:58.337
> 
> 标签：php, symfony, xcache

使用 Symfony 2.0，我试图让它与 XCache 一起工作。

XCache 已正确安装。

至于官方的 Symfony 文档，我们有这个 XcacheClassLoader.php 应该可以做到。至于相同的文档，我们得到了这条建议：

```
 /**
 * XcacheClassLoader implements a wrapping autoloader cached in Xcache for PHP 5.3.
 *
 * It expects an object implementing a findFile method to find the file. This
 * allows using it as a wrapper around the other loaders of the component (the
 * ClassLoader and the UniversalClassLoader for instance) but also around any
 * other autoloader following this convention (the Composer one for instance)
 *
 *     $loader = new ClassLoader();
 *
 *     // register classes with namespaces
 *     $loader->add('Symfony\Component', __DIR__.'/component');
 *     $loader->add('Symfony',           __DIR__.'/framework');
 *
 *     $cachedLoader = new XcacheClassLoader('my_prefix', $loader);
 *
 *     // activate the cached autoloader
 *     $cachedLoader->register();
 *
 *     // eventually deactivate the non-cached loader if it was registered previously
 *     // to be sure to use the cached one.
 *     $loader->unregister();
 *
 * @author Fabien Potencier <fabien@symfony.com>
 * @author Kris Wallsmith <kris@symfony.com>
 * @author Kim Hemsø Rasmussen <kimhemsoe@gmail.com>
 *
 * @api
 */ 
```

如果我做对了， autoload.php 应该包含该代码。这就是我在 autoload.php 中所做的：

声明了普通加载器：

```
$loader = new UniversalClassLoader(); 
```

所有的东西都在那个 $loader 上完成，比如 registerNamespaces、registerPrefixes 和所有外部依赖项都被加载到`$loader`：

```
$loader
->registerNamespaces(
    array(
        'Symfony' => array(__DIR__ . '/../vendor/symfony/src',
                __DIR__ . '/../vendor/bundles'),
        'Sensio' => __DIR__ . '/../vendor/bundles',
        'JMS' => __DIR__ . '/../vendor/bundles',
        'Doctrine\\Common' => __DIR__. '/../vendor/doctrine-common/lib',
        'Doctrine\\DBAL' => __DIR__
etc... 
```

一旦对 $loader 进行了所有“正常”的操作，我就声明了 $cachedLoader，就像文档中所说的那样：

```
 // register classes with namespaces
 $loader->add('Symfony\Component', __DIR__.'/component');
 $loader->add('Symfony',           __DIR__.'/framework');

 $cachedLoader = new XcacheClassLoader('my_prefix', $loader);

 // activate the cached autoloader
 $cachedLoader->register();

 // eventually deactivate the non-cached loader if it was registered previously
 // to be sure to use the cached one.
 $loader->unregister(); 
```

我做对了吗？显然不是，因为我得到的只是浏览器中一个完全空白的页面，甚至没有写日志以防万一他们能给我一些线索。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:16:19.723

如果您还没有 2.2，我建议您尽可能升级到 2.2。2.0 现已结束其维护周期。

但是，因为我们在这两个方面都有经验——对于 symfony 2.0，没有包含 XcacheClassLoader，你必须自己编写它，然后把它放在 app/autoload.php 中（在 APC 加载器所在的同一个地方）。对于 symfony 2.2，情况不再如此。

接下来，我建议您确保您的 xcache 工作正常 - 您可能想要创建一个 php 文件并进行如下测试：

```
<?php

$something="test";
xcache_set('key', $something, 0);
if (xcache_get('key') !== $something)
    echo "something's wrong...";
else
    echo "xcache appears to be working"; 
```

最后，我们所做的几乎就是最新版本的 Symfony/web/app.php（针对 XcacheClassLoader 进行了修改）中的内容——它（以简单的形式）看起来像这样：

```
<?php

use Symfony\Component\ClassLoader\XcacheClassLoader;
use Symfony\Component\HttpFoundation\Request;

$loader = require_once __DIR__.'/../app/bootstrap.php.cache';

$loader = new XcacheClassLoader('sf2', $loader);
$loader->register(true);

require_once __DIR__.'/../app/AppKernel.php';
require_once __DIR__.'/../app/AppCache.php';

$kernel = new AppKernel('prod', false);
$kernel->loadClassCache();
$kernel = new AppCache($kernel);

// rest of app.php 
```

下面的这个 symfony2 文档链接应该解释一些事情（包括其他发帖人关于让作曲家转储自动加载文件的评论（注意 url 中的“当前”）：

[http://symfony.com/doc/current/book/performance.html](http://symfony.com/doc/current/book/performance.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T19:30:33.780

我没有使用 XCache，但我可以建议您使用另一种方法来提高类加载性能，据我所知，这是最好的方法。

检查官方文档[的使用 Composer 的类映射功能](http://symfony.com/doc/current/book/performance.html#use-composer-s-class-map-functionality)部分。

*参考：*

```
By default, the Symfony2 standard edition uses Composer's autoloader in the 
autoload.php file. This autoloader is easy to use, as it will automatically find 
any new classes that you've placed in the registered directories.

Unfortunately, this comes at a cost, as the loader iterates over all configured 
namespaces to find a particular file, making file_exists calls until it finally 
finds the file it's looking for.

The simplest solution is to tell Composer to build a "class map" (i.e. a big 
array of the locations of all the classes). This can be done from the command 
line, and might become part of your deploy process:

    php composer.phar dump-autoload --optimize

Internally, this builds the big class map array in 
vendor/composer/autoload_namespaces.php. 
```

# asp.net - 会话和 ContentPlaceHolders

> ID：15771810
> 
> 赞同：0
> 
> 时间：2013-04-02T18:39:59.443
> 
> 标签：asp.net, vb.net, session, contentplaceholder

是否可以在 MasterPage 中设置一个 Container(ContentPlaceHolder)，并在需要时隐藏它？

例如，我想放置 2 个文本框和一个按钮供用户登录，但如果会话仍在运行（即用户已经登录），我希望将这 2 个文本框和按钮更改为欢迎消息（例如： “欢迎，用户名”）。

![在此处输入图像描述](https://i.stack.imgur.com/Xtx98.png)

MasterPage（注意：并非所有内容都经过编码）

```
<%@ Import Namespace="System.Data.SqlClient" %>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<script runat="server">

    Protected Sub Button1_Click(sender As Object, e As EventArgs)

        Dim loginSQL As New SqlCommand
        Dim loginComm As String

        Dim CommonFunctions As New CommonFunctions()
        Dim dec_pass As String = CommonFunctions.EncryptPassword(txtLoginPass.Text.Trim)

        Dim conn As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True")

        loginComm = "SELECT userid FROM users WHERE username=@username and password=@password"

        conn.Open()

        loginSQL = New SqlCommand(loginComm, conn)
        loginSQL.Parameters.AddWithValue("@username", txtLoginUser.Text.ToString)
        loginSQL.Parameters.AddWithValue("@password", dec_pass)
        Dim dr As SqlDataReader = loginSQL.ExecuteReader()

        If dr.HasRows Then
            Session("userid") = dr("userid")
        ElseIf dr.HasRows = False Then
            lblRegister.ForeColor = Drawing.Color.Red
            lblRegister.Text = "Incorrect Username/Password."
        End If

    End Sub

    Protected Sub Page_Load(sender As Object, e As EventArgs)

        If Session("userid") <> "" Then
            txtLoginUser.Visible = False
            txtLoginPass.Visible = False
        Else

            Dim conn As New SqlConnection("Data Source=BRIAN-PC\SQLEXPRESS;Initial Catalog=master_db;Integrated Security=True")

            Dim useridComm As String = "SELECT name, surname FROM users WHERE userid=@userid"
            Dim sqlUserID As New SqlCommand

            conn.Open()

            Dim userid As String = Session("userid")

            sqlUserID = New SqlCommand(useridComm, conn)
            sqlUserID.Parameters.AddWithValue("@userid", userid)
            Dim datareader As SqlDataReader = sqlUserID.ExecuteReader()

            lblLoggedIn.Text = "Welcome," + txtLoginUser.Text
        End If
    End Sub

</script>

<head>
    <meta charset="utf-8" />
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <title></title>
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="style.css" type="text/css" media="screen, projection" />
</head>

<body>

    <form id="form1" runat="server">

<div id="wrapper">

    <header id="header">
        <strong>Header:</strong> Mobile CMS

        </header>

<section id="login">

    <div id="login-form">

            <asp:ContentPlaceHolder id="ContentPlaceHolder2" runat="server">

                <p>

                    <asp:Label ID="lblUsername" runat="server" Font-Bold="True" Text="U:"></asp:Label>
&nbsp;<asp:TextBox ID="txtLoginUser" runat="server" BorderStyle="None" BorderWidth="0px" Wrap="False"></asp:TextBox>
&nbsp;
                    <asp:Label ID="lblUsername0" runat="server" Font-Bold="True" Text="P:"></asp:Label>
                    <asp:TextBox ID="txtLoginPass" runat="server" BorderStyle="None" BorderWidth="0px" TextMode="Password" Wrap="False"></asp:TextBox>
&nbsp;
                    <asp:Button ID="btnLogin" runat="server" BorderStyle="None" OnClick="Button1_Click" Text="Login" />

                </p>

                <p>

                    <asp:Label ID="lblRegister" runat="server" Font-Bold="True" Font-Underline="True" ForeColor="#0000CC" Text="Register"></asp:Label>

                    <asp:ContentPlaceHolder ID="ContentPlaceHolder3" runat="server">
                        <asp:Label ID="lblLoggedIn" runat="server" Text=""></asp:Label>
                    </asp:ContentPlaceHolder>

                </p>

                </asp:ContentPlaceHolder>

    </div>

</section>

<div class="navigation-bar">
       <ul class="navigation-menu">

            <li><a href="#" class="home">Home</a></li>
            <li><a href="#" class="mainsettings">Settings</a></li>
            <li><a href="#" class="profile">Profile</a>

                <ul>
                    <li><a href="#" class="messages">Messages</a></li>
                    <li><a href="#" class="settings">Profile Settings</a></li>
                </ul>

            </li>
            <li><a href="#" class="uploads">Uploads</a></li>
            <li><a href="#" class="documents">Media</a>

                <ul>
                    <li><a href="#" class="docs">Documents</a></li>
                    <li><a href="#" class="others">Others</a></li>
                </ul>

            </li>

            <li><a href="#" class="projects">Projects</a>

                <ul>
                    <li><a href="#" class="yprojects">Your Projects</a></li>
                    <li><a href="#" class="otherprojects">Other Projects</a></li>
                </ul>

            </li>

        </ul>

    </div>

    <section id="middle">

        <div id="container">
            <div id="content">
                <div>
                    <asp:ContentPlaceHolder id="ContentPlaceHolder1" runat="server">

                    </asp:ContentPlaceHolder>
                </div>
        </div>
        </div>

    </section>

    <footer id="footer">
        <strong>Footer:</strong> adsfdsgfds
    </footer>

</div>

    </form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:11:03.957

理想情况下，您希望使用 ASP.Net`LoginView`和`LoginStatus`控件。

由于您只有一页，因此只需使用两个`Panels`- 根据用户是否经过身份验证显示和隐藏。

注意：不要`ContentPlaceHolder`用于这种情况。

**更新：**

`LoginView`如果您想尝试，这里是示例代码。这是一种更喜欢的方式。

```
%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm6.aspx.cs" 
    Inherits="WebApplication2010.WebForm6" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <asp:LoginView ID="LoginView1" runat="server">
        <AnonymousTemplate>
            <asp:Label ID="lblUsername" runat="server" Font-Bold="True" Text="U:"></asp:Label>
            &nbsp;<asp:TextBox ID="txtLoginUser" runat="server" BorderStyle="None" BorderWidth="0px"
                TextMode="Password" Wrap="False"></asp:TextBox>
            &nbsp;
            <asp:Label ID="lblUsername0" runat="server" Font-Bold="True" Text="P:"></asp:Label>
            <asp:TextBox ID="txtLoginPass" runat="server" BorderStyle="None" BorderWidth="0px"
                TextMode="Password" Wrap="False"></asp:TextBox>
            &nbsp;
            <asp:Button ID="btnLogin" runat="server" BorderStyle="None" OnClick="Button1_Click"
                Text="Login" />
        </AnonymousTemplate>
        <LoggedInTemplate>
            Welcome!
        </LoggedInTemplate>
    </asp:LoginView>
    </form>
</body>
</html>

protected void Button1_Click(object sender, EventArgs e)
{
    var txtLoginUser = LoginView1.FindControl("txtLoginUser") as TextBox;
    var txtLoginPass = LoginView1.FindControl("txtLoginPass") as TextBox;

    // Your authentication

    // If validation is successful, create Authentication ticket
    FormsAuthentication.SetAuthCookie(txtLoginUser.Text, false);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:11:03.113

首先，你有一个`ContentPlaceHolder`内在的另一个`ContentPlaceHolder`，我看不出有任何理由。

```
<asp:ContentPlaceHolder ID="ContentPlaceHolder3" runat="server">
   <asp:ContentPlaceHolder id="ContentPlaceHolder2" runat="server"> 
```

对于手头的问题，我会`ContentPlaceHolder`根据用户是否登录隐藏其中包含的控件，而不是隐藏占位符，但这取决于你。我还会将该`userid`列添加到您的 SQL 查询中。

以下应该让你开始，注意这是**未经测试**的我的头顶：

`SELECT userid, username, password FROM users ....`

```
If dr.HasRows Then
  Session("userid") = dr("userid")
ElseIf dr.HasRows = False Then
   lblRegister.ForeColor = Drawing.Color.Red
   lblRegister.Text = "Incorrect Username/Password."
End If 
```

现在您有了这个，您可以检查 Session 变量`Page_Load`以查看用户是否已登录。

```
Protected Sub Page_Load(sender As Object, e As EventArgs)
  If Session("userid") <> "" Then
    txtLoginUser.Visible = False
    txtLoginPass.Visible = False
  Else
    'Set your label text here, query the database to get the First and Second name of the user using the `userid`
  End If
End Sub 
```

**编辑** 完成阅读后，您需要关闭读者：

`dr.Close()`和`datareader.Close()`

此行还`lblLoggedIn.Text = "Welcome," + txtLoginUser.Text`需要是：

```
lblLoggedIn.Text = datareader("name").ToString() & " " &
datareader("surname").ToString() 
```

# java - 循环索引范围

> ID：15771815
> 
> 赞同：-3
> 
> 时间：2013-04-02T18:40:17.003
> 
> 标签：java, loops

在 Java 中工作时，我正在寻找一种基于每页所需的一组条目数来循环一系列索引的方法。这样做的用途是返回特定页面上的特定元素。

例如，每页有五个元素，我想要第 5 页上的所有元素。如果起始索引为 1（非零），则意味着此方法应遍历索引 21-25。

我该怎么做呢？

（抱歉缺少标签，我不确定这应该用什么标签..）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:45:02.997

只需在您的代码中做一些数学运算。每页元素和页码的乘积是您想要的最后一个索引。然后开始索引是它之前页面的结束索引之后的索引。

```
int start = (page - 1) * (elementsPerPage) + 1;
int end = page * elementsPerPage;
for (int i = start; i <= end; i++)
{
    // Your logic here
} 
```

对此进行了编辑以分别显示计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:46:02.963

你的意思是这样的：

```
for(int i = pageNumber*5-4; i <= pageNumber*5; i++)
{
  //access indices with i here
} 
```

# sql - 如何基于多个表/记录创建视图/单个记录

> ID：15771822
> 
> 赞同：0
> 
> 时间：2013-04-02T18:40:48.263
> 
> 标签：sql, view

我需要帮助在 SQL 2008 中创建一个视图，该视图将创建一条记录，该记录由来自两个表的数据组成，其中一个表包含多个记录。

```
表 1 包含字段 A、B
表 2 包含字段 A、B、1
                       A,B,2
                       A,B,3
                       A,B,4
                       A,B,5
```

我正在寻找一个结果视图

```
A,B,1,2,3,4,5
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:53:08.507

一种选择是研究使用`STUFF`and `FOR XML`：

```
SELECT t.col1, t.col2, 
  STUFF((
    select ',' + cast(t2.id as varchar) 
    from yourothertable t2 
    where t.col1 = t2.col1 and t.col2 = t2.col2
    for xml path('')
        ), 1, 1, '') 
from yourtable t 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!3/8d3e2/1)

如果你想组合 3 列，使用操作符很容易做到`'+'`。

```
SELECT t.col1 + ',' + t.col2 + 
  (
    select ',' + cast(t2.id as varchar) 
    from yourothertable t2 
    where t.col1 = t2.col1 and t.col2 = t2.col2
    for xml path('')
        )
from yourtable t; 
```

# asp.net - 如何在 IIS 中仅使用特定参数重定向 url

> ID：15771824
> 
> 赞同：1
> 
> 时间：2013-04-02T18:40:57.887
> 
> 标签：asp.net, iis, redirect

我有一个如下所示的网址：

```
www.mywebsite.com/page.aspx?code=1.a 
```

我想通过 IIS 将此 URL 重定向到：

```
www.mywebsite.com/page.aspx?code=1.b 
```

我想通过 IIS 而不是在代码中执行此操作。

我有各种其他网站网址，如下所示：

```
www.mywebsite.com/page.aspx?code=2
www.mywebsite.com/page.aspx?code=3.a
www.mywebsite.com/page.aspx?code=6.c 
```

我不希望这些受到影响。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:32:56.013

在 IIS 7.5 中执行此操作的一种简单方法是将Microsoft的**URL Rewrite 扩展安装到 IIS 中。**

[http://www.iis.net/downloads/microsoft/url-rewrite](http://www.iis.net/downloads/microsoft/url-rewrite)

一旦你安装了它，你可以添加一个规则来重定向`?code=1.a`到`?code=1.b`。在 IIS 中，您将在您的网站标题`URL Rewrite`下看到一个名为的新条目。`IIS`您可以使用那里的编辑器来创建新规则。创建规则后，它将被写入您的`web.config`文件。

在`web.config`文件中，规则应如下所示：

```
<system.webServer>
    ...
    <rewrite>
        <rules>
            <rule name="Code=1.a redirect" patternSyntax="ExactMatch" 
                  stopProcessing="true">
                <match url="page.aspx" />
                <action type="Redirect" url="page.aspx?code=1.b"
                        appendQueryString="false" redirectType="Permanent" />
                <conditions>
                    <add input="{QUERY_STRING}" pattern="code=1.a" />
                </conditions>
            </rule>
        </rules>
    </rewrite>
    ...
</system.webServer> 
```

# android - 如何检测滚动视图内的 ImageView 上的滑动操作

> ID：15771829
> 
> 赞同：1
> 
> 时间：2013-04-02T18:41:04.797
> 
> 标签：android, scrollview, gesture

我有一个位于 ScrollView 内的 Imageview。我想检测它上面的 SWIPE UP 和 SWIPE DOWN 手势。有可能做到吗？
使用`SimpleOnGestureListener`我可以检测到向左滑动和向右滑动。

# node.js - 使用带有单元测试的间谍（sinon.js 和 buster.js）

> ID：15771832
> 
> 赞同：0
> 
> 时间：2013-04-02T18:41:11.577
> 
> 标签：node.js, unit-testing, sinon, buster.js

我第一次尝试使用 buster.js 的 sinon.js，并且我正在尝试使用间谍来测试回调。

我的测试失败了，我猜 assert.calledOnceWith 正在使用 '===' 来比较预期与实际。

（coffeescript 中的所有内容）这是我的测试用例：

```
buster      = require 'buster'
_           = require 'underscore'
routeParrot = require '../server/components/routeParrot'

buster.testCase 'routeParrot module',

  setUp: (done) ->

    this.socketioRequest =
      method: 'get'
      url: '/api/users'
      headers: []

    this.httpRequest =
      method: 'get'
      url: '/api/users'
      headers: []

    done()
#  tearDown: (done) ->
#    done()

  'modifies http request to API': () ->

    spy = this.spy()
    routeParrot.http this.httpRequest, {}, (()->), spy

    buster.assert.calledOnceWith spy,
      _.extend(this.httpRequest, requestType: 'http'),
      {jsonAPIRespond: (()->)},
      -> 
```

这是我的错误：

```
[assert.calledOnceWith] Expected function spy() {} to be called once with arguments { headers: [], method: "get", requestType: "http", url: "/api/users" }, { jsonAPIRespond: function () {} }, function () {}
    spy({ headers: [], method: "get", requestType: "http", url: "/api/users" }, { jsonAPIRespond: function () {} }, function () {}) 
```

作为参考，这是我的 routeParrot 模块：

```
module.exports.http = (req, res, next, router) ->
  req.requestType = 'http'

  if req.url.indexOf '/api' is 0
    #api auth
    #TODO
    res.jsonAPIRespond = (json) ->
      res.json json

    router(req, res, next)
  else
    router(req, res, next)

module.exports.socketio = (req, res, router) ->
  req.requestType = 'socketio'

  httpEmulatedRequest =
    method:   if req.data.method then req.data.method else 'get'
    url:      GLOBAL.apiSubDir + (if req.data.url then req.data.url else '/')
    headers:  []

  response =
    jsonAPIRespond: (json) ->
      req.io.respond json

  #TODO api auth
  router req, res, -> 
```

如您所见，我正在尝试将对象文字与嵌入式函数进行比较。我是不是在这里偏离了基础，还是我必须做一些事情，比如覆盖在 calledOnceWith 中完成的比较？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T07:16:22.510

问题是您尝试比较功能不同的功能。因此，您在断言中创建的空函数不能与调用您的 spy 的函数相同。

此外，为了更好地阅读测试失败，您应该拆分断言，以便使用单个断言测试每个参数。否则很难发现哪个参数是错误的。

# boost-python - Boost.Python 无效的关键字参数使解释器崩溃

> ID：15771834
> 
> 赞同：1
> 
> 时间：2013-04-02T18:41:15.937
> 
> 标签：boost-python

我正在尝试定义一个具有多个构造函数方法的类，其中一些采用关键字参数。一切都按预期/预期工作，直到向构造函数传递了一个错误的参数列表，在这种情况下，解释器死亡而不是抛出异常。这是一个最小的例子：

```
#include <boost/python.hpp>
#include <string>

class Crash {
  public:
    Crash(std::string) { }
    Crash(int, int) { }
};

BOOST_PYTHON_MODULE(mymodule) {
    using namespace boost::python;

    class_<Crash>("Crash", init<std::string>())
        .def(init<int, int>((arg("i") = 3)))
    ;
} 
```

输出：

```
Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win 32
Type "help", "copyright", "credits" or "license" for more information.
>>> import mymodule as mm
>>> mm.Crash("asdf")
<mymodule.Crash object at 0x00D9FB70>
>>> mm.Crash(3)
<mymodule.Crash object at 0x00D9FE10>
>>> mm.Crash(4, i=5)
<mymodule.Crash object at 0x00D9FB70>
>>> mm.Crash(i=3) # kills the interpreter 
```

输入无效的关键字，例如，`Crash(blah=4)`也会杀死解释器。

这是一个 Boost.Python 错误，还是我做错了什么？

我正在使用 Boost 1.51 / Python 2.7.3 / MSVC 9.0。

# arrays - 矢量点积 unsing c

> ID：15771837
> 
> 赞同：0
> 
> 时间：2013-04-02T18:41:23.440
> 
> 标签：arrays, function

我有2个问题。首先程序没有提示我输入第二个向量，第二个它没有给我输入第一个向量的输入。

```
#include <stdio.h>
#define SIZE 10
#include <string.h>
int main()
{
    int Vx, Vy, i, j;
    int vector[SIZE];

    printf("Enter 1st vector (q to quit) " );
        for (i=0;i<SIZE;i++)
    {
        scanf("%d", &vector[i]);
    }

    printf("Enter 2nd vector (q to quit) " );
        for (j=0;j<SIZE;j++)

    {
        scanf("%d", &vector[j]);
    }
    printf("\nYou entered");
    printf("\n%d\n", vector[i]);
    printf("%d\n", vector[i]);

    printf("Their dot product is; %d", vector[i] * vector[j]);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:49:18.773

我立即看到您需要更改的三件事：

```
#define SIZE 10

for (i=0; i<SIZE; i++)

for (j=0; j<SIZE; j++) 
```

我不知道您的编译器如何处理未定义的定义，但是您将向量大小设置为...什么都没有？0?

# iphone - 通过通讯录获取用户名和头像

> ID：15771840
> 
> 赞同：0
> 
> 时间：2013-04-02T18:41:30.593
> 
> 标签：iphone, ios

有没有办法通过通讯簿 API (iOS 6) 获取用户的头像和姓名？这相当于从 Facebook Graph API 请求“我”数据。

# java - 使用 lucene 获取文档中的单词位置

> ID：15771843
> 
> 赞同：0
> 
> 时间：2013-04-02T18:41:40.147
> 
> 标签：java, lucene

我想知道如何使用 Lucene 获取文档中单词的位置 我已经生成了索引文件，我想从索引中提取一些信息，例如索引单词、单词在文档中的位置等

我创建了一个这样的阅读器：

```
public void readIndex(Directory indexDir) throws IOException {
    IndexReader ir = IndexReader.open(indexDir);
    Fields fields =  MultiFields.getFields(ir);
    System.out.println("TOTAL DOCUMENTS : " + ir.numDocs());

    for(String field : fields) {
        Terms terms = fields.terms(field);
        TermsEnum termsEnum = terms.iterator(null);
        BytesRef text;
        while((text = termsEnum.next()) != null) {
            System.out.println("text = " + text.utf8ToString() + "\nfrequency = " + termsEnum.totalTermFreq());
        }
    }
} 
```

我将作者修改为：

```
org.apache.lucene.document.Document doc = new org.apache.lucene.document.Document();

                FieldType fieldType = new FieldType();
                fieldType.setStoreTermVectors(true);
                fieldType.setStoreTermVectorPositions(true);
                fieldType.setIndexed(true);

                doc.add(new Field("word", new BufferedReader(new InputStreamReader(fis, "UTF-8")), fieldType)); 
```

我试图通过调用**返回 true的****terms.hasPositions()**来读取该术语是否具有位置 但是不知道哪个函数可以给我位置？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:55:47.027

在您尝试检索位置信息之前，您必须首先确保在启用位置信息的情况下进行索引。

[TermsEnum.DocsAndPositionsEnum](http://lucene.apache.org/core/4_2_0/core/org/apache/lucene/index/TermsEnum.html#docsAndPositions%28org.apache.lucene.util.Bits,%20org.apache.lucene.index.DocsAndPositionsEnum%29)：获取当前任期的 DocsAndPositionsEnum。当枚举未定位时不要调用它。如果没有索引位置，此方法将返回 null。**

# python - GAE：处理程序如何在使用会话和覆盖`dispatch`时返回webapp2.Response？

> ID：15771844
> 
> 赞同：1
> 
> 时间：2013-04-02T18:41:45.453
> 
> 标签：python, google-app-engine, session, webapp2

我修改[了这个示例代码](http://webapp-improved.appspot.com/guide/extras.html)，以便让 webapp2 会话在 Google App Engine 上运行。

我需要做什么才能从继承自覆盖该方法的 BaseHandler 的处理程序[返回 webapp2.Response 对象](http://webapp-improved.appspot.com/features.html#returned-responses)`dispatch`？

这是我要编写的处理程序类型的演示：

```
import webapp2
import logging

from webapp2_extras import sessions

class BaseHandler(webapp2.RequestHandler):
  def dispatch(self):
    # Get a session store for this request.
    self.session_store = sessions.get_store(request=self.request)
    try:
      # Dispatch the request.
      webapp2.RequestHandler.dispatch(self)
    finally:
      # Save all sessions.
      self.session_store.save_sessions(self.response)

class HomeHandler(BaseHandler):
  def get(self):
    logging.debug('In homehandler')
    response = webapp2.Response()
    response.write('Foo')
    return response

config = {}
config['webapp2_extras.sessions'] = {
    'secret_key': 'some-secret-key',
}

app = webapp2.WSGIApplication([
    ('/test', HomeHandler),
], debug=True, config=config) 
```

这段代码显然不起作用，因为 BaseHandler 总是用`self`. 我已经查看了 的代码`webapp2.RequestHandler`，但它严重地让我无法修改我的 BaseHandler（或者可能设置自定义调度程序），以便我可以简单地从继承处理程序返回响应对象。

奇怪的是，分配的快捷方式`self.response = copy.deepcopy(response)`也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T23:31:29.190

您将两种响应混合在一种方法中。使用任一

```
return webapp2.Response('Foo') 
```

或者

```
self.response.write('Foo') 
```

...不是都。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-26T21:15:44.693

我查看了 webapp2.RequestHandler 并注意到返回的值只是向上传递了堆栈。

一个对我有用的解决方案是在从处理程序返回时使用返回的响应，或者在没有返回任何内容时使用 self.response。

```
class BaseHandler(webapp2.RequestHandler):
    def dispatch(self):
        # Get a session store for this request.
        self.session_store = sessions.get_store(request=self.request)

        response = None
        try:
            # Dispatch the request.
            response = webapp2.RequestHandler.dispatch(self)
            return response
        finally:
            # Save all sessions.
            if response is None:
                response = self.response
            self.session_store.save_sessions(response) 
```

在我玩游戏时，我注意到当处理程序中引发异常时，我存储为安全 cookie 的会话没有得到更新。

# javascript - 从内联 javascript 到外部文件，为什么它不起作用？

> ID：15771846
> 
> 赞同：0
> 
> 时间：2013-04-02T18:41:44.650
> 
> 标签：javascript, html

当我使用内联 javascript 并创建一个外部 js 文件时，我不明白我做错了什么。无法让它工作。当它全部在 html 中时它起作用，但是当我移动它时，我的按钮不再起作用。谁能帮忙？

```
 $().ready(init);

function init()
{

    $j('.num button:not(:contains(+/-),:contains(.))').click( addDigit );
    $j('.num button:contains(.)').click( addDecimal );
    $j('.num button:contains(+/-)').click( switchSign );

    $j('.operator button:not(:contains(=),:contains(C))').click( applyOperator );
    $j('.operator button:contains(=)').click( displayResult );
    $j('.operator button:contains(C)').click( clearInput );
}

function addDigit()
{
    Screen.append( $j(this).text() );
}

function addDecimal()
{
    var Input = Screen.readValue().split(' ');

    var FinalExpr = Input[ Input.length-1 ];

    Input[ Input.length-1 ] = FinalExpr.replace('\.','') + '.';

    Screen.set( Input.join(' ') );
}

function switchSign()
{
    var Input = Screen.readValue().split(' ');

    var FinalExpr = Input[ Input.length-1 ];

    if ( FinalExpr.charAt(0) == '-')
    {
        FinalExpr = FinalExpr.substring( 1 , FinalExpr.length );
    }
    else
    {
        FinalExpr = '-' + FinalExpr;
    }

    Input[ Input.length-1 ] = FinalExpr;

    Screen.set( Input.join(' ') );
}

function applyOperator()
{
    Screen.append( ' '+$j(this).text()+' ' );
}

function displayResult()
{
    Screen.displayResult();
}

function clearInput()
{
    Screen.clear();
}

var Screen =
{
    init:
    function()
    {
        return this;
    }

    , ScreenSelector : '.results input:text'
    , ResetNextAppend : true

    , set:
    function( value )
    {
        $j(this.ScreenSelector).val( value );
    }

    , append:
    function( value )
    {
        if (this.ResetNextAppend == true || $j(this.ScreenSelector).val() == 0)
        {
            if ( value.substring(0,1).search(/\d/) != -1 )
            {
                this.clear();
            }
            this.ResetNextAppend = false;
            $j(this.ScreenSelector).removeClass('rna');
        };

        $j(this.ScreenSelector).val( $j(this.ScreenSelector).val() + value );
    }

    , readValue:
    function()
    {
        return $j(this.ScreenSelector).val();
    }

    , readResult:
    function()
    {
        return this.calculate( this.readValue() );
    }

    , displayResult:
    function()
    {
        this.ResetNextAppend = true;
        $j(this.ScreenSelector).addClass('rna');        

        $j(this.ScreenSelector).val( this.readResult() );
    }

    , calculate:
    function( expression )
    {
        return eval( this.convertChars( expression ) );
    }

    , convertChars:
    function( text )
    {
        text = text.replace(String.fromCharCode(215),'*');
        text = text.replace(String.fromCharCode(247),'/');

        return text;
    }

    , clear:
    function()
    {
        this.ResetNextAppend = false;
        $j(this.ScreenSelector).removeClass('rna');

        $j(this.ScreenSelector).val('');
    }

}; 
```

我的 HTML 代码是：

```
 <link rel="stylesheet" type="text/css" href="A05ReDoCSS.css">   
</head>
<body>
<h1>Sara's Calculator</h1>
<div id="A05">
<fieldset class="results"> <!-- use of fieldset keeps out  a bunch of divs -->
<input type="text"/>
</fieldset>
<fieldset class="num pad">
<button type="button">1</button>
<button type="button">2</button>
<button type="button">3</button>
<button type="button">4</button>
<button type="button">5</button>
<button type="button">6</button>
<button type="button">7</button>
<button type="button">8</button>
<button type="button">9</button>
<button type="button">0</button>
<button type="button">+/-</button> <!-- switch -->
<button type="button">.</button>
</fieldset>
<fieldset class="operator pad"> <!-- this is the operations area -->
<button type="button">+</button>
<button type="button">-</button>
<button type="button">&times;</button>
<button type="button">&divide;</button>
<button type="button">=</button>
<button type="button">C</button>
</fieldset>
</div>
<br class="break"/>
<script type="text/javascript" src="A05ReDoJS.js"></script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:54:22.833

确保你有

```
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js'></script> 
```

在某处`<head>`

否则该函数不知道是什么`$`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:48:10.507

可能是由于 .js 的导入一直位于底部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T20:10:15.133

快速提示：如果您使用的是 HTML5 的文档类型，则`<!DOCTYPE html>`不必包含`type='text/javascript'`. 你可以写：
`<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js'></script>`

# python - Python tkinter 网格布局问题

> ID：15771851
> 
> 赞同：3
> 
> 时间：2013-04-02T18:42:02.493
> 
> 标签：python, layout, user-interface, tkinter

我正在使用 Tkinter 和 python 创建一个非常简单的 UI，但是我在调​​整 GUI 元素的大小和使用网格格式正确放置它们时遇到了问题。这是我想要拥有的一阶近似值：

![图片](https://i.stack.imgur.com/F6nAc.png)

这是我到目前为止的代码。我不断接近，但我不认为我真的明白我在做什么。任何帮助深表感谢！

```
#User interface
root = Tk()
window_width = root.winfo_screenwidth()
window_height = root.winfo_screenheight()
root.geometry    ("%dx%d"%(window_width,window_height))

menu_bar = Menu(root)
menu = Menu(menu_bar, tearoff=0)
menu.add_command(label="Open", command = open_file)
menu.add_command(label="Save", command = save)
menu.add_separator()
menu.add_command(label="Quit", command = exit)
menu_bar.add_cascade(label="File",menu=menu)

root.config(menu=menu_bar)

#textbox is the window in which the code is written
textbox = Text(root, width=50, height = window_height/20+4)

#canvas is where the car will go
canvas_frame= Frame(root, width = window_width/1.5, height = window_height-200)
canvas_frame.configure(borderwidth=1.5,background='black')
canvas = Canvas(canvas_frame, width = window_width/1.5, height = window_height-200)

#console to print to
console = Text(root, width = int(window_width/1.5), height = 10)

run_button = Button(root, text = "Run", command = lambda:generate_program(textbox.get(1.0,END)))

clear_button = Button(root, text = "Clear text", command = clear)

#add them to frame
textbox.grid(row=0, column=0, rowspan=20, columnspan=10)
run_button.grid(row=21,column=0)
clear_button.grid(row=21,column=1)
canvas_frame.grid(row=0,rowspan=10,column=21,columnspan=25)
canvas.grid(row=0, rowspan=1, column=21, columnspan=25)
console.grid(row = 1, rowspan=1, column = 21, columnspan=25)

root.mainloop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:47:06.397

在我看来，使用包几何管理器可以更轻松地进行布局。问题之一是您试图使用`rowspan`和`columspan`选项使每个小部件的宽度和高度适合其位置。此外，由于`canvas`是在一个框架内，你必须认为它就像在一个新窗口内，所以一个简单的调用`canvas.grid()`就足够了。

但是，`pack()`您只需将`textbox`,`run_button`和`clear_button`放在一个新框架内：

```
left_frame = Frame(root)
textbox = Text(left_frame, ...)
run_button = Button(left_frame, ...)
clear_button = Button(left_frame, ...)

canvas_frame= Frame(root, ...)
canvas_frame.configure(borderwidth=1.5,background='black')
canvas = Canvas(canvas_frame, ...)
console = Text(root, ...)

left_frame.pack(side=LEFT)
textbox.pack()
run_button.pack(side=LEFT)
clear_button.pack()
canvas_frame.pack()
canvas.pack()
console.pack() 
```

# javascript - 检查 li 值是否相同

> ID：15771853
> 
> 赞同：0
> 
> 时间：2013-04-02T18:42:06.110
> 
> 标签：javascript, jquery, if-statement

代码：

```
$('#friends_list ul li').click(function () {
    var name = $(this).attr('value');
    var parentlist = $('#chat_opened ul');
    var overflow = parentlist.children('li').length;
    var allowed = 5;
    var childC = parentlist.children('li').attr('value');
    if (overflow <= allowed && childC != name) {
        parentlist.append('<li value="' + name + '">' + name + ' Chat</li>');
    } else if (overflow > allowed) {
        $('#inner_overflow ul').append('<li value="' + name + '">' + name + ' Chat</li>');
    } 
```

在我的 if 语句行中，我试图比较两个变量是否为真，然后执行以下操作。所以基本上如果`overflow`小于或等于允许的数字以及`childC`不等于`name`附加到父列表

在我弄清楚如何比较两个 li 值之后， else if 将是相同的。

前任：

```
<ul>
 <li value="usersname">Username</li>
<ul>
<ul> 
  <li value="usersname">Username</li>//no more than two in this unordered list
</ul> 
```

因此，当用户单击第一个时`ul li`，它会将另一个附加`li`到第二个`ul`而不是两次。到目前为止，它将附加 100 个相同的值`li`，所以我需要弄清楚如何制作它，这样第二个 ul 就不会复制任何`li`具有相同值的相同 s。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:15:55.313

无需深入了解您可以对代码进行的所有更改，以完成您所拥有的内容，您可以简单地检查`<li>`目标列表中具有您准备好的值的 's的数量加上：

```
var name = $(this).attr('value');
var parentlist = $('#chat_opened ul');
var overflow = parentlist.children('li').length;
var allowed = 5;
var duplicates = parentlist.find('li[value="' + name + '"]');

if (overflow <= allowed && duplicates.length < 1) {
    . . . 
```

这将检查是否存在任何`<li>`具有该值的 '。如果没有（即`length < 1`），那么您可以安全地添加该值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T19:19:32.997

如果您使用 HTML 4.01，您可以这样做：

```
<ol>
  <li value="username">User Name</li>
  ...
</ol> 
```

但请注意，[这已被弃用](http://www.w3.org/TR/1999/REC-html401-19991224/struct/lists.html#h-10.2)。

```
$('#friends_list ul li').click(function () {
  var name = $(this).attr('value');
  var parentlist = $('#chat_opened ul');
  var overflow =0;
 //need to add these lines
  $('#friends_list ul li').each(function(i)
  {
   if($(this).attr('value')==name)
          overflow++;
   });
   var allowed = 5;
   var childC = parentlist.children('li').attr('value');
   if (overflow <= allowed && childC != name) {
   parentlist.append('<li value="' + name + '">' + name + ' Chat</li>');
  } else if (overflow > allowed) {
    $('#inner_overflow ul').append('<li value="' + name + '">' + name + ' Chat</li>');
 } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-02T19:08:58.357

属性在`value`li 元素上无效，但如果您真的想在每个 li 上使用值，则可以将其与 html-5`data-`属性一起使用，例如：

*html*

```
<ul id='first'>
 <li data-value="usersname">Username</li>
<ul>
<ul id='second'> 
  <li data-value="usersname">Username</li>//no more than two in this unordered list
</ul> 
```

*JS*

```
 $("#first > li").click(function(){
    var self = this;
    var present = false;
    $.each($("#second > li"), function(i,v){
       if($(v).data("value") ==  $(self).data("value")){
         present = true;
         return true;
       }
    });
    if(!present) {
     $("#second").append(self);
    }
    else
    {
      //item with same value already present in the secont ul list
    }
  }); 
```

# ajax - 如何从 servlet 发送多个变量作为对 ajax 帖子的响应？

> ID：15771856
> 
> 赞同：1
> 
> 时间：2013-04-02T18:42:09.760
> 
> 标签：ajax, jsp, servlets

我正在用jsp和java开发一个测试系统

在客户端，我有以下代码：

```
 var xmlhttp = new getXmlHttpRequestObject(); //xmlhttp holds the ajax object

        function servletPost() {
            if(xmlhttp) { 
                //var txtname = document.getElementById("testForm");
                var form = $('#testForm');
                xmlhttp.open("POST","servlet/TestingController",true);
                xmlhttp.onreadystatechange = handleServletPost;
                xmlhttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                xmlhttp.send(form.serialize()); 
            }
        }

        function handleServletPost() {
            //var qComplexity = document.getElementsByName("qComplexity")[0].value;  

            if (xmlhttp.readyState == 4) {
                if(xmlhttp.status == 200) {
                    var respText = xmlhttp.responseText;

                    document.getElementById("fullQuestion").innerHTML = respText;
                    // here i also should change the content of the answer options
                    // so i should get from servlet multiple variables
                    // which allows me to change div contents in my jsp like as respText.question or respText.answer[0]
                } else {
                    alert("Ajax calling error");
                }                    
           }
        } 
```

在服务器端：（我的 Servlet）

```
public void doPost (HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException {
 .........................................................
 .........................................................

 PrintWriter out = res.getWriter();
 String complex = null;
        int categ_id = -1;
        String asked_by = null;
        String Qtext = null;
        int qid = -1;
        q_numb = 1;
        q_numb++;
        String sqlSelect = "SELECT * FROM questions WHERE complexity = '" + complexity 
                        + "'ORDER BY RANDOM() LIMIT 1;";

        ResultSet r = myConnection.runQuery( sqlSelect );
        session.setAttribute("member", tempMem);

        while (r.next()) {
            complex = r.getString(5);
            categ_id = r.getInt(4);
            asked_by = r.getString(3);
            Qtext = r.getString(2);
            qid = r.getInt(1);

            String sqlA = "select * from answers where question_id = '" + qid 
                                + "' ORDER by RANDOM();";

            ResultSet result = myConnection.runQuery( sqlA );
            session.setAttribute("member", tempMem); } 
```

所以我需要发送 complex、Qtext、qid、categ_id 等值。是否有任何结构可以从 ajax 发送到 servlet，反之亦然？以及如何在客户端处理发送的数据？

提前致谢！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:47:45.233

使用[JSON](http://en.wikipedia.org/wiki/JSON)。有无数免费的 Java JSON 编组器。JavaScript 原生支持 JSON。

# c# - C# 矩形数组有 3 个销售人员和 5 个产品

> ID：15771857
> 
> 赞同：0
> 
> 时间：2013-04-02T18:42:09.873
> 
> 标签：c#, integer, currency, multidimensional-array

我不断收到索引超出范围异常。我必须先获得销售人员编号和产品编号，然后是价格，然后才能显示总数。

我不知道发生了什么，因为计算似乎正确。有什么问题可能是一些我似乎无法弄清楚的小问题。感谢帮助。

```
class Program
{
    static void Main(string[] args)
    {

        decimal[,] sales = new decimal[5, 3];
        int spnum;

        Console.WriteLine("Enter your Sales Person Number (type 999 to exit): ");
        spnum = Convert.ToInt32(Console.ReadLine());

        while(spnum != 999)
        {
            int prodnum;
            decimal price;
            decimal amount = 0;

        Console.WriteLine("Enter the product number: ");
        prodnum = Convert.ToInt32(Console.ReadLine());

        Console.WriteLine("Enter the total for the product: ");
        price = Convert.ToDecimal(Console.ReadLine());

        if (spnum >= 1 && spnum <= 3 && prodnum >= 1 && prodnum <= 5  && price >= 0)
        {
            sales[spnum - 1, prodnum - 1] += amount;
        }
        else
        {
            Console.WriteLine("You have entered an invalid number. Please try again.");
        }

        Console.WriteLine("Enter your salesperson (type 999 to exit): ");
        spnum = Convert.ToInt32(Console.ReadLine());

        }

        decimal[] total = new decimal[4];

        Console.WriteLine("\n{0,10}{1,16}{2,16}{3,16}{4,12}", "Product", "SalesPerson1", "SalesPerson2", "SalesPerson3", "Total");

              for (int row = 0; row < 5; row +=1)
        {
            decimal prodtot = 0M;
                  Console.Write("{0,10}", (row+=1));

                  for (int colum = 0; colum < 3; colum +=1)
                  {
                      Console.Write("{0,16:C}", sales[row, colum]);
                      prodtot += sales[row, colum];
                      total[colum] += sales[row, colum];
                  }
                  Console.Write("{0,10:C}", total);

                  for (int c = 0; c < 3; c += 1)
                  {
                      Console.Write("{0,16:C}", total[c]);
                      Console.ReadLine();
                  }
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:43:31.877

C# 中的数组索引基于 0。在您的情况下，它们从 0 到 2 和 0 到 4 运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T18:48:03.250

您将销售声明为：

```
decimal[,] sales = new decimal[5, 3]; 
```

然后你在这里使用它们：

```
if (spnum >= 1 && spnum <= 3 && prodnum >= 1 && prodnum <= 5  && price >= 0)
{
    sales[spnum - 1, prodnum - 1] += amount;
} 
```

`prodnum - 1`可以大于 2。

# session - 在 weblogic 中生成请求会话时如何确定会话 ID

> ID：15771860
> 
> 赞同：0
> 
> 时间：2013-04-02T18:42:21.823
> 
> 标签：session, jakarta-ee, weblogic, session-cookies, jsessionid

当 Web 应用程序中的会话无效时，如果我向该应用程序发出一个新请求，其 cookie 中的 jsessionid 无效，那么新会话的 id 是什么？当我检查时，会生成一个新会话，但会话 ID 保持不变。我无法对此作出解释。是否有这样的约定将 jsessionid 保留在 cookie 中并将该值赋予新创建的会话，或者我做错了什么？:)

情景。

我在同一个 weblogic 上有 2 个 webapps。这些应用程序的 WLCookie 名称相同。

当用户进入 appA 时，我正在对 appB 的注销 servlet 进行异步调用，其中 appB 的会话无效。

当用户单击 appA 中引用 appB 的链接时，我正在 appB 中创建一个新会话，当我检查 cookie 中的 sessionid 时，它仍然保持不变，它首先在 appA 中创建。

据我所知，如果未配置，同一 weblogic 上的两个 webapps 不会共享它们的会话，但是尽管我从外部使 appB 的会话无效，为什么新创建的会话仍然具有相同的会话 ID？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:09:52.393

不要将 jsessionid 与会话混淆。jsessionid 每个容器实例都是唯一的，其中 session 是每个应用程序。因此，会话数据不会从 AppA 传播到 AppB，因为它们共享相同的 jsessionid。

# c - 在ansi C中拆分字符串

> ID：15771862
> 
> 赞同：0
> 
> 时间：2013-04-02T18:42:26.053
> 
> 标签：c, string, split, scanf

我正在尝试找到一种将单个字符串拆分为两个单独变量的方法。现在我有：

```
char buffer[1024];
char firstName[16];
char lastName[16];
fgets(buffer, 1024, stdin);
sscanf(buffer, "%s %s", firstName, lastName); 
```

当我稍后打印数据时，名字很好，但姓氏将是第一个和最后一个组合。例如，当我输入“Joe Bob”时，第一个会打印出“Joe”，第二个会打印出“Joe Bob”。我尝试了其他一些方法，例如使用带有偏移指针的 strtok 甚至 sscanf，但我一直得到相同的结果。我将如何让姓氏只包含第二个名字？我正在使用 ansi C。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:49:53.983

首先，阅读整个字符串：

```
char line[64];
scanf("%[^\t\n]", line); 
```

二、用strok分割

```
char *firstName;
char *lastName;
char *search = " ";

firstName = strtok(line, search);
lastName = strtok(NULL, search); 
```

**更新**：正如@Zack 评论，读取字符串的其他方式更安全：

```
#define BUFFER_SIZE 64
char line[BUFFER_SIZE];

if (fgets(line, BUFFER_SIZE, stdin) != NULL) {
   /* ... */
} 
```

# php - PHP解压压缩包

> ID：15771864
> 
> 赞同：0
> 
> 时间：2013-04-02T18:42:33.610
> 
> 标签：php, zip, extract

我有一个包含一些文件和文件夹的 zip 文件，我想将文件夹“/files”的内容从 zip 文件中提取到指定路径（我的应用程序的根路径）。

如果有一个不存在的文件夹，则应该创建它。

因此，例如，如果 zip 中的路径是：“/files/includes/test.class.php”，则应将其提取到

```
$path . "/includes/test.class.php" 
```

我怎样才能做到这一点？

我发现在 zip 文件中切换的唯一功能应该是

[http://www.php.net/manual/en/ziparchive.getstream.php](http://www.php.net/manual/en/ziparchive.getstream.php)

但我实际上不知道如何使用此功能做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:48:03.677

我认为您需要 zziplib 扩展才能使其正常工作

```
$zip = new ZipArchive;

if ($zip->open('your zip file') === TRUE) {
  //create folder if does not exist
  if (!is_dir('path/to/directory')) {
      mkdir('path/to/directory');
  }

  //then extract the zip
  $zip->extractTo('destination to which zip is to be extracted');
  $zip->close();
  echo 'Zip successfully extracted.';
} else {
  echo 'An error occured while extracting.';
} 
```

阅读此链接以获取更多信息[http://www.php.net/manual/en/ziparchive.extractto.php](http://www.php.net/manual/en/ziparchive.extractto.php)

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:52:18.907

试试这个：

```
$zip = new ZipArchive;
$archiveName = 'test.zip';
$destination = $path . '/includes/';
$pattern = '#^files/includes/(.)+#';
$patternReplace = '#^files/includes/#';

function makeStructure($entry, $destination, $patternReplace)
{
    $entry = preg_replace($patternReplace, '', $entry);
    $parts = explode(DIRECTORY_SEPARATOR, $entry);
    $dirArray = array_slice($parts, 0, sizeof($parts) - 1);
    $dir = $destination . join(DIRECTORY_SEPARATOR, $dirArray);
    if (!file_exists($dir)) {
        mkdir($dir, 0777, true);
    }
    if ($dir !== $destination) {
        $dir .= DIRECTORY_SEPARATOR;
    }
    $fileExtension = pathinfo($entry, PATHINFO_EXTENSION);
    if (!empty($fileExtension)) {
        $fileName = $dir . pathinfo($entry, PATHINFO_BASENAME);
        return $fileName;
    }
    return null;
}

if ($zip->open($archiveName) === true) {
    for ($i = 0; $i < $zip->numFiles; $i++) {
        $entry = $zip->getNameIndex($i);
        if (preg_match($pattern, $entry)) {
            $file = makeStructure($entry, $destination, $patternReplace);
            if ($file === null) {
                continue;
            }
            copy('zip://' . $archiveName . '#' . $entry, $file);
        }
    }
    $zip->close();
} 
```

# scripting - 在主目录中显示可组或全局可写的文件

> ID：15771868
> 
> 赞同：-1
> 
> 时间：2013-04-02T18:42:57.100
> 
> 标签：scripting, ksh, aix

我正在尝试创建一个脚本，该脚本将在主目录中显示所有组和世界可写的文件。

警告：如果您在本地运行，该脚本将无限循环地运行未找到的文件。

```
#!/bin/ksh 
lsuser -a home ALL |cut -f2 -d= | while read HOMEDIR; do
if [ -d $HOMEDIR ]; then
ls -a $HOMEDIR | grep -Ev "^.$|^..$" | while read FILE; do
[[ "$(ls -ld ${FILE})" = @(????????w? *) ]] && print " WARNING ${FILE} is world wr
itable"
[[ "$(ls -ld ${FILE})" = @(?????w???? *) ]] && print " WARNING ${FILE} is group wr
itable"
done
else
echo "No home dir for $HOMEDIR"
fi
done 
```

任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:19:43.163

很抱歉没有评论您的问题，但我还没有足够的声誉。请阅读[为什么不应该](http://mywiki.wooledge.org/ParsingLs)仔细解析 ls(1) 的输出，并按照 Alex 的建议使用 find。您没有使用 find 是否有特定原因？

# apache - 如何避免 VPS 网络服务器上的用户/权限问题？

> ID：15771872
> 
> 赞同：0
> 
> 时间：2013-04-02T18:43:01.800
> 
> 标签：apache, permissions, vps

我是第一次使用 VPS，我想知道设置此服务器的最佳方式是有意义的，并且尽可能少地设置权限。

因此，我将 /var/www（www-data 拥有的所有文件）用于 PostfixAdmin、phpMyAdmin 等系统范围的内容。对于实际域，它们位于`~/www/`. 所以我的结构是这样的：

```
~/
  www/
    domain1.com
    domain2.com
  logs/
    domain1.com
    domain2.com 
```

问题是，像 WordPress 这样的某些 Web 应用程序希望许多文件是可写的，而 Apache 用户是 www-data。我发现即使我`chgrp -R www-data .; chmod -R g+w .`在一个域中，WordPress 仍然会抱怨，直到文件实际*归*www-data 所有。

该服务器没有 FTP，只允许我通过密钥进行 SFTP，没有密码。我正在努力确保它尽可能安全。但是，如果我使用 SFTP，我会以自己的身份创建文件，而不是 www-data。

我正在寻找有关如何设置此系统的建议，以便我可以放入文件，编辑它们，并且所有权限都是 Apache 需要具备的写入权限才能完成它需要做的任何事情。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:01:43.730

啊哈！解决方案是相应地编辑`/etc/apache2/envvars`和更改这些行：

```
export APACHE_RUN_USER=myusername
export APACHE_RUN_GROUP=myusername 
```

也`/var/lock/apache2`对自己说。

# android - Android 中 R.java 文件的引用不起作用

> ID：15771877
> 
> 赞同：0
> 
> 时间：2013-04-02T18:43:04.530
> 
> 标签：android, imageview, android-drawable

我有这个问题...

我的 android 应用程序有一个设置菜单来设置 IP 地址和图像。我可以使用正则表达式验证 IP 地址并在设备的根目录中查找图像，但想法是用户设置的图像必须替换应用程序主要活动中的默认图像......为此，我声明了一个 ImageView 并使用 R.java 文件中的正确 ID（包含默认图像的 ID）进行了初始化，然后将其替换为以下说明：

```
Bitmap bmap = BitmapFactory.decodeFile(selectedFile.getAbsolutePath());
Drawable dra = new BitmapDrawable(bmap);
imagen.setImageDrawable(dra); 
```

其中 imagen 是 ImageView 对象。但由于某种原因，当我运行这段代码时，logcat 显示 imagen 为空......这意味着，我在上面代码的第三行中得到了 NullPointerException ......

这是设置菜单活动的完整代码：

```
public class pantallaConfiguracion extends Activity{
    private static final int REQUEST_PICK_FILE = 1;
    private EditText mFilePathTextView,ip;
    private Button mStartActivityButton, volver, guardar;
    private File selectedFile;
    private ImageView imagen;
    String dirIp;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.configuraciones);
        ip = (EditText) findViewById(R.id.entradaIP);
        volver = (Button) findViewById(R.id.botonVolver);
        guardar = (Button) findViewById(R.id.botonGuardar);
        mFilePathTextView = (EditText)findViewById(R.id.entradaImg);
        mStartActivityButton = (Button)findViewById(R.id.botonBrowse);
        imagen = (ImageView) findViewById(R.id.imagen1);
        volver.setOnClickListener(new OnClickListener(){
            public void onClick(View v) {
                finish();
            }
        });
        guardar.setOnClickListener(new OnClickListener(){
            @SuppressWarnings("deprecation")
            public void onClick(View v) {
                dirIp = ip.getText().toString();
                if(validarIp(dirIp) == false){
                    Toast.makeText(getApplicationContext(), "Dirección IP incorrecta.", Toast.LENGTH_SHORT).show();
                }else{
                    Main.IP_Server = dirIp;
                    descargarDatos.IP_Server = dirIp;
                    enviarDatos.IP_Server = dirIp;
                    Bitmap bmap = BitmapFactory.decodeFile(selectedFile.getAbsolutePath());
                    Drawable dra = new BitmapDrawable(bmap);
                    imagen.setImageDrawable(dra);
                    Toast.makeText(getApplicationContext(), "Cambios Efectuados Correctamente.", Toast.LENGTH_SHORT).show();
                }
            }
            private boolean validarIp(String dirIp) {
                String patron = "(([0-1]?[0-9]{1,2}\\.)|(2[0-4][0-9]\\.)|(25[0-5]\\.)){3}(([0-1]?[0-9]{1,2})|(2[0-4][0-9])|(25[0-5]))";
                Pattern expreg = Pattern.compile(patron);
                Matcher m;
                m = expreg.matcher(dirIp);
                if(m.matches() == false){
                    return false;
                }else{
                    return true;
                }
            }
        });
        mStartActivityButton.setOnClickListener(new OnClickListener(){
            public void onClick(View v){
                switch(v.getId()) {
                case R.id.botonBrowse:
                    Intent intent = new Intent(pantallaConfiguracion.this, FilePicker.class);
                    startActivityForResult(intent, REQUEST_PICK_FILE);
                    break;
                default:
                    break;
                }
            }
        });
    }
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if(resultCode == RESULT_OK) {
            switch(requestCode) {
            case REQUEST_PICK_FILE:
                if(data.hasExtra(FilePicker.EXTRA_FILE_PATH)) {
                    selectedFile = new File(data.getStringExtra(FilePicker.EXTRA_FILE_PATH));
                    mFilePathTextView.setText(selectedFile.getPath());              
                }
            }
        }
    }
} 
```

这是 logcat 输出：

```
04-02 13:40:17.671: E/AndroidRuntime(3139): FATAL EXCEPTION: main
04-02 13:40:17.671: E/AndroidRuntime(3139): java.lang.NullPointerException
04-02 13:40:17.671: E/AndroidRuntime(3139):     at tian.proto.pantallaConfiguracion$2.onClick(pantallaConfiguracion.java:73)
04-02 13:40:17.671: E/AndroidRuntime(3139):     at android.view.View.performClick(View.java:2485)
04-02 13:40:17.671: E/AndroidRuntime(3139):     at android.view.View$PerformClick.run(View.java:9080)
04-02 13:40:17.671: E/AndroidRuntime(3139):     at android.os.Handler.handleCallback(Handler.java:587)
04-02 13:40:17.671: E/AndroidRuntime(3139):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-02 13:40:17.671: E/AndroidRuntime(3139):     at android.os.Looper.loop(Looper.java:130)
04-02 13:40:17.671: E/AndroidRuntime(3139):     at android.app.ActivityThread.main(ActivityThread.java:3687)
04-02 13:40:17.671: E/AndroidRuntime(3139):     at java.lang.reflect.Method.invokeNative(Native Method)
04-02 13:40:17.671: E/AndroidRuntime(3139):     at java.lang.reflect.Method.invoke(Method.java:507)
04-02 13:40:17.671: E/AndroidRuntime(3139):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
04-02 13:40:17.671: E/AndroidRuntime(3139):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
04-02 13:40:17.671: E/AndroidRuntime(3139):     at dalvik.system.NativeStart.main(Native Method) 
```

提前感谢您能给我的任何帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:22:09.843

您无法从设置活动访问主活动中的图像视图。您可以做的是将图像路径保存在 SharedPreference 中，然后在主要活动的 onResume() 方法中查看是否设置了属性，然后相应地实例化图像。您可能需要添加一些缓存以避免不必要的加载。

# c++ - MySQL C++ 连接器在使用 BLOB 执行 INSERT 时崩溃

> ID：15771880
> 
> 赞同：1
> 
> 时间：2013-04-02T18:43:22.983
> 
> 标签：c++, blob, mysql-connector

我遇到了一个问题，试图将文本作为 blob 值插入，MySQL C++ 连接器因异常而崩溃：“访问冲突读取位置”。我在这里看到过这样的问题，但没有一个得到回答。这是一个代码示例：

```
 #include "mysql_connection.h"
#include <cppconn/driver.h>
#include <cppconn/exception.h>
#include <cppconn/resultset.h>
#include <cppconn/statement.h>
#include <cppconn/prepared_statement.h>

#include <string>
#include <iostream>
#include <sstream>

using namespace sql;

void main(){
    Connection  *dbConnection;
    Driver *driver;
    Connection *con;

    driver = get_driver_instance();
    con = driver->connect("localhost", "root", "");
    Statement *stmt = con->createStatement();
    try{
        stmt->execute("USE test");
        stmt->execute("DROP TABLE blob_test");
        stmt->execute("CREATE TABLE blob_test("
                        "id         INTEGER PRIMARY KEY NOT NULL AUTO_INCREMENT,"
                        "original   BLOB NOT NULL);");
        char smallBlob[32];

        for (char i = 0; i < sizeof(smallBlob); ++i)
        {
        smallBlob[i] = i;
        }
        std::istringstream str(smallBlob);
        PreparedStatement *pstmt = con->prepareStatement("INSERT INTO blob_test(id, original) VALUES (1, ?)");

        pstmt->setBlob( 1, &str);
        pstmt->executeUpdate();
    }catch(sql::SQLException &e){
        std::cerr << "# ERR: " << e.what();
        std::cerr << " (MySQL error code: " << e.getErrorCode();
        std::cerr << ", SQLState: " << e.getSQLState() << " )" << std::endl;
    }
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:38:07.217

解决了从源代码编译 MySQL cpp 连接器的问题。

如果你走那条路，请仔细阅读[这个](https://stackoverflow.com/questions/5111664/how-to-add-mysql-connector-c-1-1-to-visual-studio-2010-project)和[这个](http://dev.mysql.com/doc/refman/5.1/en/connector-cpp-apps-windows-visual-studio.html)（特别是最后的评论）。我还必须将 config.h 中的几行更改为将 int 隐式转换为 char*。还要注意不要将 Debug 和 Release 混为一谈，例如，如果您在 Debug 中编译应用程序，则应链接 MySQL 连接器的 Debug 版本，反之亦然。

在我链接 lib 之后，我编译了所有启动的内容）您可以在 dev.mysql.com 论坛上阅读，在大多数情况下，这是强制连接器工作的唯一方法。在编译时我遇到了证明这一点的东西，源代码中的包含文件与 Windows 二进制分发中的包含不同。

# list - 在 Haskell 中完全消除重复项

> ID：15771882
> 
> 赞同：3
> 
> 时间：2013-04-02T18:43:23.717
> 
> 标签：list, haskell

我有这段代码，但它并没有完全满足我的要求，我需要一个元组列表；

```
[(3,2),(1,2),(1,3),(1,2),(4,3),(3,2),(1,2)] 
```

并给出

```
[(1,3),(4,3),(3,2),(1,2)] 
```

但我希望它给

```
[(1,3),(4,3)] 
```

我在哪里做错了？提前致谢。

```
eliminate :: [(Int,Int)] -> [(Int,Int)]
eliminate [] = []
eliminate (x:xs)
    | isTheSame xs x  = eliminate xs
    | otherwise       = x : eliminate xs

isTheSame :: [(Int,Int)] -> (Int,Int) -> Bool
isTheSame [] _ = False
isTheSame (x:xs) a
    | (fst x) == (fst a) && (snd x) == (snd a)  = True
    | otherwise                 = isTheSame xs a 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T18:56:56.910

代码*几乎*是正确的。只需更改此行

```
 | isTheSame xs x  = eliminate xs 
```

到

```
 | isTheSame xs x  = eliminate $ filter (/=x) xs 
```

原因是如果`x`包含在 中，则要`xs`删除*所有*`x`出现的。

也就是说，您的代码示例中有几个部分可以更优雅地表达：

*   `(fst x) == (fst a) && (snd x) == (snd a)`是相同的`x == a`
*   `isTheSame`与 相同`elem`，只是其参数颠倒了

因此，我们可以这样表达函数`eliminate`：

```
eliminate [] = []
eliminate (x:xs)
  | x `elem` xs = eliminate $ filter (/=x) xs
  | otherwise = x : eliminate xs 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-02T18:56:45.017

这应该这样做：

```
-- all possibilities of picking one elt from a domain
pick :: [a] -> [([a], a)]
pick []     = [] 
pick (x:xs) = (xs,x) : [ (x:dom,y) | (dom,y) <- pick xs]

unique xs = [x | (xs,x) <- pick xs, not (elem x xs)] 
```

测试：

```
*Main Data.List> unique [(3,2),(1,2),(1,3),(1,2),(4,3),(3,2),(1,2)]
[(1,3),(4,3)] 
```

更多[here](https://stackoverflow.com/a/14877448/849891)和[splitting list into a list of possible tuples](https://stackoverflow.com/questions/12869097/splitting-list-into-a-list-of-possible-tuples/12872133#12872133)

* * *

在[Landei 的带领](https://stackoverflow.com/a/15772304/849891)下，这是一个*简短*的版本（尽管它会返回排序的结果）：

```
import Data.List

unique xs = [x | [x] <- group . sort $ xs] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-02T19:32:45.950

低效的参考实现。

```
import Data.List

dups xs = xs \\ nub xs
eliminate xs = filter (`notElem` dups xs) xs 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-02T19:06:21.063

一个较短的版本（但结果将被排序）：

```
import Data.List

eliminate :: [(Int,Int)] -> [(Int,Int)]
eliminate = concat . filter ((== 1) . length) . group . sort 
```

或者`Maybe`（谢谢你，Marimuthu）：

```
import Data.List
import Data.Maybe

eliminate = mapMaybe f . group . sort where f [x] = Just x; f _ = Nothing 
```

考虑......我们可以使用列表而不是`Maybe`：

```
import Data.List

eliminate = (>>= f) . group . sort where  f [x] = [x]; f _ = [] 
```

# android - Remote_app_id 与仅在 jellybean 上存储的 id 不匹配

> ID：15771884
> 
> 赞同：0
> 
> 时间：2013-04-02T18:43:27.907
> 
> 标签：android, facebook, android-4.2-jelly-bean

我认为我使用“keytool”生成的“Key Hash”是正确的，因为它适用于 android 上的较低版本。为什么这个错误只出现在 Jellybean 上？

# iphone - 核心地块比例

> ID：15771887
> 
> 赞同：0
> 
> 时间：2013-04-02T18:43:30.530
> 
> 标签：iphone, ios, objective-c, ipad, core-plot

我想像这样绘制图表。

当我设置大 yRange 时，IOS 模拟器和设备上的应用程序无法运行...

```
int xAxisMin = 0;
int xAxisMax = 30;
int yAxisMin = 0;
int yAxisMax = 200000;  

CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)graph.defaultPlotSpace;
plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromInt(xAxisMin) length:CPTDecimalFromInt(xAxisMax - xAxisMin)];
plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromInt(yAxisMin) length:CPTDecimalFromInt(yAxisMax - yAxisMin)]; 
```

![在此处输入图像描述](https://i.stack.imgur.com/LAprF.png)

# python - Python 'if x is None' 没有捕捉到 NoneType

> ID：15771888
> 
> 赞同：2
> 
> 时间：2013-04-02T18:43:31.193
> 
> 标签：python, python-2.7

下面的代码片段不断返回“NoneType is not iterable”错误。为什么 if 语句没有捕捉到这个？

```
inset = set()
for x in node.contacted:
    print type(x)
    if x.is_converted() is True:
        nset.add(x)
        if x.contacted is None:
            memotable[node.gen][node.genind] = nset
        else:
            nset.union(self.legacy(x, memotable))
            memotable[node.gen][node.genind] = nset 
```

根据要求进行完整追溯：

> 回溯（最近一次通话最后）：
> 
> 文件“F:\Dropbox\CS\a4\skeleton\trialtest.py”，第 142 行，在 test_legacy_and_frac()
> 
> 文件“F:\Dropbox\CS\a4\skeleton\trialtest.py”，第 125 行，在 test_legacy_and_frac cunittest2.assert_equals(set([n10,n12,n21]), t.legacy(n00,mtable))
> 
> 文件“F:\Dropbox\CS\a4\skeleton\trial.py”，第 138 行，旧版 nset.union(self.legacy(x, memotable))
> 
> 文件“F:\Dropbox\CS\a4\skeleton\trial.py”，第 138 行，旧版 nset.union(self.legacy(x, memotable))
> 
> TypeError：“NoneType”对象不可迭代

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T18:45:33.313

该`if`声明保证`x.contacted`不是无。

但这`x.contacted`不是您要迭代或索引的内容，因此它没有保护任何东西。

没有理由`memotable`或`memotable[node.gen]`不可能，`None`即使`x.contacted`是别的东西。就此而言，我们不知道里面的代码做了什么`self.legacy(x, memotable)`——也许它试图迭代`x`，或`other_table[x]`，或者谁知道，其中任何一个都可能是`None`。

这就是为什么您需要查看整个回溯，而不仅仅是错误字符串。它将准确地告诉您哪个语句失败，以及为什么。

* * *

现在您已经粘贴了回溯：

```
File "F:\Dropbox\CS\a4\skeleton\trial.py", line 138, in legacy nset.union(self.legacy(x, memotable)) 
```

是的，这是在那条`self.legacy`线内发生的事情，与`x.contacted`. 问题几乎可以肯定是你的`self.legacy`方法正在返回`None`，所以你正在做`nset.union(None)`。

同样，这里是否`x.contacted`是`None`完全无关紧要的，因此您的支票不会在这里保护您。

如果您希望我们调试该函数中的问题，则必须向我们提供该函数的代码，而不是与错误无关的代码。也许这是一些愚蠢的事情，比如做`a + b`而不是`return a + b`最后，或者也许这是一些深刻的逻辑错误，但我们真的无法猜测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:49:48.510

检查 and 的值，`memotable`因为如果不是 None（没有代码） `memotable[node.gen]`，则不能保证它们不是 None 。`x.contacted`

如果您在此处提及变量的值并发布完整的回溯，我们也许可以更准确地指出问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T19:31:38.173

发生异常是因为函数调用`self.legacy(x, memotable)`返回`None`。

回溯指示错误发生在 中`nset.union(self.legacy(x, memotable))`，并`set.union()`在其参数为 时引发该异常`None`。（我假设`nset`是一个`set`。你的代码定义了`inset = set()`，但没有显示`nset`来自哪里）

```
>>> set().union(None)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'NoneType' object is not iterable 
```

# oracle - Oracle 编码问题

> ID：15771890
> 
> 赞同：0
> 
> 时间：2013-04-02T18:43:33.267
> 
> 标签：oracle, encoding

有一个带有哈萨克语区域编码的 Oracle 数据库。还有一个客户端，但它使用 UTF 编码。当我通过 pl/sql developer 更新哈萨克语中的 db 字段或在 Web 应用程序中调用 update proc 时，这些特殊字符变为“？”。但是，如果我在 oracle sql developer 文件夹中找到 oracle sql 开发人员文件夹中的 ora18n java 文件并在哈萨克语中更新字段，那么一切都很好。如何解决我的问题？如果您需要任何 db 或 clinet conf，欢迎您！

# html - 隐藏html表单放大元素

> ID：15771892
> 
> 赞同：0
> 
> 时间：2013-04-02T18:43:34.643
> 
> 标签：html, css

我不明白如何在不放大其他元素的情况下隐藏 html 中的表单。这是一个带有 html 表单隐藏的下拉菜单：

```
<a class="btn dropdown-toggle" data-toggle="dropdown" href="#">                                       Language <i class="icon-angle-down"></i>                                                  </a>                                                   
<ul class="dropdown-menu" style="background:#a2a2a2">
    <li>
        <form id="form-ItemIDLangID" action="ItemView.php" method="post">
            <a href="javascript:;"onclick="document.getElementById('form-ItemIDLangID').submit();">English</a>
            <input type="hidden" name="itemPOST" value='itemID'>
            <input type="hidden" name="langPOST" value='langID'>
       </form>
    </li>
    ...
</ul> 
```

这是结果：

![在此处输入图像描述](https://i.stack.imgur.com/0iSVH.png)

没有表格：

```
<a class="btn dropdown-toggle" data-toggle="dropdown" href="#">                                       Language <i class="icon-angle-down"></i>                                                    </a>                                                 
<ul class="dropdown-menu" style="background:#a2a2a2">
    <li>
        <a href="#">English</a>
    </li>
    ...
</ul> 
```

这是结果：

![在此处输入图像描述](https://i.stack.imgur.com/dqBKL.png)

我不明白如何使用表格并且在第一张图片中没有放大效果，我希望它看起来像第二张图片，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:49:40.103

首先，您的 HTML 无效。一个 LI 只能是其他 LI 的兄弟。[更新：我没有看到屏幕外的 UL。我的错。]

然后，您的表单上可能有导致图像中出现灰色空间的样式，例如`form {margin-bottom: 15px;}`. 没有您的 CSS 或演示，就不可能说。

# azure - 带有异步控制器的 Worker 角色与 Web 角色

> ID：15771896
> 
> 赞同：1
> 
> 时间：2013-04-02T18:43:49.513
> 
> 标签：azure, asp.net-mvc-4

我们系统的几个组件具有“长期运行”的操作。它们可能需要几秒钟到几分钟的时间，并且它们的 CPU 使用率会有所不同。例如，报告生成将占用 CPU 几秒钟，但数据收集主要用于等待数据库查询。

我面临两个选择：

（1）Web角色+工作者角色+队列+表。Worker 角色在队列上旋转，获取带有参数的消息，执行工作，使用进度和完成标志更新表。客户端旋转，显示进度，直到标记完成。一个 Web 角色，根据需要扩大工作人员角色的数量。

(2) Web角色+异步方法。让我的长时间运行的操作使用 .NET 4.5 的 async/await 内容，并将控制器操作标记为异步。根据需要扩大 Web 角色的数量。

选项 1 显然要复杂得多，但它的优点是可以让网络角色自由地做网络事情，并在事情开始变得非常繁忙时允许适当的排队。选项 2 更简单，需要更少的角色和存储资源，但如果事情开始变得繁忙，它是否有可能阻塞整个网站？为了简单起见，我强烈倾向于选项 2。有什么特别的理由不这样做吗？如果网站开始变慢，简单地增加 Web 角色实例的数量就可以解决性能问题，对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T18:53:40.833

与大多数架构决策一样，答案只是“取决于”。

在这种情况下，选项 (2) 更容易编码。如果您不希望大规模扩展，那么我会说这很好。

选项 (1) 的主要优势是您有两个用于扩展的旋钮：您的 Web 角色处理 Web 请求，您的工作人员角色处理工作，并且您可以独立于您的 Web 扩展您的工作人员。

但除非你要大规模扩展，否则我不会担心。选项 (2) 可以很好地扩展，只是效率不高。而且，如果您确实开始大规模扩展，您可以（低效地）使用选项（2）扩大规模，并且（可能）使用您的大规模扩展收入来开发选项（1）。

PS你应该使用`async`这两个选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T02:16:10.670

正如斯蒂芬发布的那样，这将是一个“取决于”类型的答案。

在这种情况下，我可能会选择第一个选项，或者介于您拥有 Web 角色、队列和表的选项之间，但创建一个可执行文件，该可执行文件也作为启动可执行文件在您的 Web 角色上运行。

使用选项 2，您将对连接超时、实例重新启动等开放，并且必须通过扩展您的 Web 角色或重写代码来满足对资源的额外需求。

使用选项 1（正如 Stephen 指出的那样），您的工作负载是分开的，您可以独立扩展角色。此外，让队列和工作人员处理工作允许工作人员管理自己的生命周期，并且您可以通过在完成工作之前不移除队列项目来为计划内或计划外的重新启动建立一些弹性（这样它们将重新出现，如果你在中间崩溃）。您还可以更充分地利用角色资源（首先在线程上扩展，然后是附加实例），因为您的轮询机制将控制工作负载，而不是随机访问网站的人。在 Web 端，您可以选择使用等待完成并返回的异步方法，或者您可以返回一个令牌并让客户端轮询工作是否完成，

不过，选项 1.5 可能是最好的起点。如果您尝试从小处着手，那么在您的网络角色上使用后台可执行文件将是最便宜的解决方案。您将需要至少有 2 个 Web 角色以确保 SLA 覆盖，因此此解决方案将让您仅从这两个实例开始，仅此而已。分别构建执行队列轮询和报告（或其他）执行的可执行文件，然后将其配置为 Web 角色的启动任务。这将使您在启动时降低成本，并且这些 exe 的代码是分开的，如果您需要扩展，以后将成为您的工作角色的代码。在这种情况下要注意的最重要的事情是您的可执行文件会处理所有异常，因为如果此进程由于未处理的异常而退出，它将不会重新启动（与工作角色不同，

# wpf - 在类库中使用资源字典

> ID：15771897
> 
> 赞同：1
> 
> 时间：2013-04-02T18:43:49.697
> 
> 标签：wpf, flowchart

我在我的应用程序中使用[这个（优秀的）流程图设计](http://www.codeproject.com/Articles/24681/WPF-Diagram-Designer-Part-4)器，但我想将它用作`UserControl`.

要将其转换`Application`为`UserControl`我更改了应用程序唯一的窗口：

```
<Window x:Class="DiagramDesigner.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:s="clr-namespace:DiagramDesigner"
    xmlns:c="clr-namespace:DiagramDesigner.Controls"
    WindowStartupLocation="CenterScreen"
    Title="Diagram Designer"
    Height="850" Width="1000">
  <Window.Resources>
    <ContextMenu x:Key="DesignerCanvasContextMenu">
      ...
    </ContextMenu>
  </Window.Resources>
  ...
</Window> 
```

进入用户控件：

```
<UserControl x:Class="DiagramDesigner.DiagramDesignerWPFControl"
     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
     xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
     xmlns:s="clr-namespace:DiagramDesigner"
     xmlns:c="clr-namespace:DiagramDesigner.Controls"
     Height="850" Width="1000">
  <UserControl.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
          ...
        </ResourceDictionary.MergedDictionaries>
        <ContextMenu x:Key="DesignerCanvasContextMenu">
         ...
        </ContextMenu>
    </ResourceDictionary>
  </UserControl.Resources>
  ...
</UserControl> 
```

我`ResourceDicctionary`从内容中取出`App.xaml`并将其添加到控件中。然后我删除了该`App.xaml`文件，因为它不能用于`Class Library`编译。

* * *

**我的问题是**：

当我将新添加`User Control`到另一个项目中的 WPF 表单时，我可以运行新应用程序，我可以添加图表组件并移动它们，但是当我加入/链接时，会引发以下异常：

> 找不到名为“{SolidBorderBrush}”的资源。资源名称区分大小写。

我在我的资源或它们的位置做错了什么`User Control`？

* * *

**接受答案后的版本：**

出现的异常还指向调用了“{SolidBorderBrush}”的行。我最初没有把它放在这个问题中，因为它是一个电话而不是一个声明。这是链接异常的一段代码：

```
<Trigger Property="IsMouseOver" Value="true">
   <Setter TargetName="Border" Property="Background" Value="{DynamicResource ToolbarSelectedBackgroundBrush}" />
   <Setter TargetName="Border" Property="BorderBrush" Value="{DynamicResource SolidBorderBrush}" />
</Trigger> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:49:54.877

我在这里猜测，因为您的问题实际上并未显示任何似乎导致问题的代码，但您可能需要使用`DynamicResource`.

```
{DynamicResource SolidBorderBrush} 
```

您只能在非常特殊的情况下使用 StaticResource。大多数时候你会得到很大的性能提升，但很容易最终陷入无法使用的情况（这可能是已经发生的事情）。

# linux - 使用 Perl split() 命令解析 `du' 命令的输出

> ID：15771900
> 
> 赞同：1
> 
> 时间：2013-04-02T18:44:07.813
> 
> 标签：linux, perl, split, du

我有一个 Perl 脚本，其中包含以下代码段：

```
@mylittlearray = split(/\/dir1\/dir2\//, `du --max-depth=1 \/dir1\/dir2\//`
print $mylittlearray[0];
print $mylittlearray[1];
print "\n"; 
```

输出是

```
24    ones
8 
```

mylittlearray[0] 和 [1] 应该只返回 24 和*"ones"*，而不是*"ones8"*。如果我将 du 命令传送到一个文件并在 VIM 中打开 set list，我会看到以下内容：

```
24^I./ones$
8^I./twos$ 
```

如果我`du`使用 a 运行命令`-0`，我会看到：

```
24      ./ones^@8       ./twos^@8       ./threes^@8     ./fours^@8      ./fives^@80     .^@ 
```

我试图弄清楚如何拆分这两种格式，以便将目录名称与下一个目录的大小分开或拆分。换句话说，我希望 mylittlearray[0] 等于 24，mylittlearray[1] 只包含*"ones"*， mylittlearray[2] 将包含*"8"*等等。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T18:56:06.920

您的问题不太清楚，但如果您只是对从 收集每个结果条目的数据感兴趣，`du`请像这样遍历结果：

```
#!/usr/bin/perl
use strict;
use warnings;

# Capture the output from du
my @array = `du --max-depth=1 /some/folder/`;

# Loop over the output
foreach (@array)
{
    chomp; # Strip new-line
    my ($size, $dir) = split; # Split on whitespace
    print "Dir: $dir, Size: $size\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T21:53:36.367

使用`map`而不是`split`：

```
my $dir = "/dir1/dir2/";
my @mylittlearray = map { m!(\d+)\s+$dir(.*)! } `du --max-depth=1 '$dir'`;
print join(", ", @mylittlearray), "\n"; 
```

# objective-c - Objective-C中方法内部错误的目的是什么

> ID：15771901
> 
> 赞同：1
> 
> 时间：2013-04-02T18:44:25.597
> 
> 标签：objective-c

我开始用这里推荐的书学习Objective-C（在Objective-C中编程），我有两个问题：

例如在复制文件的方法中：

```
NSString *path, newPath;
NSFilemanager;

if([fm copyItemToPath: path toPath newPath error: NULL] == NO)
{
    MSLOG(@"The file does not exist");
} 
```

1.  if 中的错误部分的目的是什么以及为什么在示例中谁从书中获取它为空
2.  我不明白 if 语句中的 NO 的含义

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T18:49:45.433

`NO`是方法的返回值`copyItemToPath`。如果文件复制操作不成功，则返回`NO`（与 相同）。`false`

错误表示返回的`NULL`错误在这种情况下并不重要，可以忽略。否则，您将指针传递给`NSError`对象：

```
NSError *error;
if([fm copyItemToPath: path toPath newPath error: &error] == NO) {
  NSLog(@"Error is %@", [error.localizedDescription]);

.... 
```

错误信息返回函数返回值为 的原因`false`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T18:53:38.527

您首先需要清理代码： 的两个声明`NSString`都是指针，您需要为 声明一个变量指针`NSFileManager`，您的方法缺少 a `:`，并且`if`文本应该是`NSLog`

所以我们有：

```
NSString *path, *newPath;
NSFilemanager *fm;

if([fm copyItemToPath: path toPath: newPath error: NULL] == NO)
{
    NSLog(@"The file does not exist");
} 
```

`NULL`for`err`是默认操作，for是`BOOL`代码`YES`成功还是`NO`失败。

这`==NO`是返回值的故障安全。因为有时它是`1`or`0`或`true`or `false`，这可能会导致错误。

# android - 在 Sublime Text 2 上开发 Android

> ID：15771903
> 
> 赞同：5
> 
> 时间：2013-04-02T18:44:42.707
> 
> 标签：android, installation, sublimetext2

我想开始为 Android 开发，但发现设置所有内容非常困难，因此它可以在 Sublime Text 2 上运行。

我知道我应该下载并设置 Android SDK，但是如何、在哪里以及为什么？以及如何编译我的项目并运行它们？这对我来说完全是个谜。

我已经研究了大约3个小时，但没有任何成功。请你们中的任何人通过指导我完成在 ST2 中设置所有内容的过程来帮助我吗？

请注意，我不想使用 Eclipse IDE。我已经爱上了 ST2，我想坚持下去。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T18:58:00.877

> 我知道我应该下载并设置 Android SDK，但是如何、在哪里以及为什么？

访问[官方网站](http://developer.android.com/sdk/index.html)并按照“其他/现有 IDE”的说明进行操作。我不认为有人写过使用 Sublime 的具体说明（因为你还没有找到）。

> 以及如何编译我的项目并运行它们？这对我来说完全是个谜。

正如其他人已经回答的那样，除了 JDK，您很可能需要从命令行下载并运行[Ant](http://ant.apache.org/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T18:50:27.680

如果您真的想开始 Andriod 开发，而不使用像 Intelji Idea 或 Eclipse 这样的 IDE 的强大支持，那么您应该正确地考虑在 Sublime Text 2 旁边的命令行中[构建和运行您的应用程序](http://developer.android.com/tools/building/building-cmdline.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-26T15:31:03.947

如果你按照 github 上的 'Andrew' 软件模块的使用说明，你可以通过一个叫做 monitor 的工具获得 sublime 与 android sdk 和 ant 构建工具的通信。

[https://github.com/Korcholis/Andrew](https://github.com/Korcholis/Andrew)

有点类似于我曾经使用的与 Eclipse 服务对话的 vim 插件。

但如果其他人正在阅读这篇文章，intellij（android 工作室）在速度和自动完成方面已经取得了突飞猛进的发展。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T18:48:01.800

Eclipse 和 IntelliJ 是已知的 Android 开发支持的 IDE。如果您不想使用 Eclipse 或 IntelliJ，请阅读有关 ant 脚本以及如何使用 Ant 构建的信息。那应该让你开始。

Sublime Text 2，目前不支持在 IDE 中进行 Android 开发。除了使用 Ant 之外，您唯一的选择就是等待有人为此编写插件。

# c++ - 如何识别赋值运算符？

> ID：15771912
> 
> 赞同：0
> 
> 时间：2013-04-02T18:45:13.587
> 
> 标签：c++, operator-overloading

我有一个重载的类`[]`，当我尝试将值设置为数组时，我需要让它识别。我假设，我将不得不重载 operator `=`，但我不知道，整个东西会是什么样子。我的部分代码：

```
class Matrix {
public:

Matrix(int x, int y);
~Matrix(void);
Matrix& operator =(const Matrix &matrix); //ok...this is probably wrong...

class Proxy {
public:

    Proxy(double* _array) : _array(_array) {
    }

    double &operator[](int index) const {
        return _array[index];
    }

private:
    double* _array;
};

Proxy operator[](int index) const {
    return Proxy(_arrayofarrays[index]);
}

Proxy operator[](int index) {
    return Proxy(_arrayofarrays[index]);
}

int x, y;
double** _arrayofarrays;
}; 
```

所以我只需要能够识别我何时尝试设置`Matrix matrix(3,3); matrix[0][0]=1;` 其他一切都可以正常工作，所以我认为不需要粘贴整个代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:09:31.810

看起来您想要一些无法直接实现的东西： `operator[][].`

您可以通过使用中间类来模拟此行为：
由于 Matrix 类通常被索引为 [rows][columns]，因此您可以
让第一个运算符方法返回相应的 Row 对象。
行类可以重载 operator[] 并返回相应的
元素。

```
Row& Matrix::operator[](int r);  
double& Row::operator[](int c); 
```

现在，当您创建矩阵对象时，您可以按预期对其进行索引：

```
Matrix matrix(3,3);  
matrix[0][0] = 1; 
```

最后一行相当于调用：

```
matrix.operator[](0).operator[](0) = 1; 
```

要检查越界索引，请存储矩阵大小：

```
Proxy operator[](int index) {
    assert(index < num_rows);
    return Proxy(_arrayofarrays[index]);
}

double &operator[](int index) const {
    assert(index < num_cols);
    return _array[index];
} 
```

正如 Aldo 建议的那样，Proxy 可以在其构造函数中传递数组长度值：

```
 Proxy(double* _array, int _length) : _array(_array), num_cols(_length){
 } 
```

作为一般经验法则，如果您将原始数组传递给函数，您几乎总是希望传递该数组的长度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T19:02:47.097

您的`Proxy::operator[]`重载正在返回一个`double&`. 这`double&`是最终将由客户端代码分配的对象，您不能拦截它（至少不容易）。可能您需要做的是检查重载中的`index`参数`operator[]`，并在那里抛出您自己的异常，而不是将该索引传递给您的内部数组。

# rotation - LibGDX - 自行旋转 SpriteBatch

> ID：15771915
> 
> 赞同：2
> 
> 时间：2013-04-02T18:45:21.367
> 
> 标签：rotation, libgdx, spritebatch

![在此处输入图像描述](https://i.stack.imgur.com/BR9tQ.png)

我想在单击按钮时自行旋转这个**SpriteBatch**

```
@Override
public void render() {

    SpriteBatch batch = new SpriteBatch();

    batch.begin();
    batch.draw(gemTexture, 10, 10, 100, 100);
    batch.end();

    if (Gdx.input.isTouched()) {
        rotateRight();
    } 
```

}

```
private void rotateRight() {
// How do I rotate it to look like 
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/yty1b.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T06:53:33.693

您正在使用 SpriteBatch 绘制纹理。纹理不支持旋转。我建议[Sprite](https://code.google.com/p/libgdx/wiki/SpriteBatch#Sprite)类可能更适合您尝试做的事情。以下是您可能会做的事情的粗略概述......有关更多详细信息，请参阅[Sprite javadoc](http://libgdx.l33tlabs.org/docs/api/com/badlogic/gdx/graphics/g2d/Sprite.html)。

```
private void createGemSprite() {
    gemSprite = new Sprite(gemTexture);
    gemSprite.setPosition(10, 10);
}

@Override
public void render() {

    SpriteBatch batch = new SpriteBatch();

    batch.begin();
    gemSprite.draw(batch);
    batch.end();

    if (Gdx.input.isTouched()) {
        rotateRight();
    }
}

private void rotateRight() {
    gemSprite.setRotation(gemSprite.getRotation() - 90);
} 
```

# graph - 如何在 Octave 中从已知的 xs 数组和 ys 数组绘制图形？

> ID：15771917
> 
> 赞同：0
> 
> 时间：2013-04-02T18:45:23.320
> 
> 标签：graph, plot, octave

我需要为我的报告绘制几张图表。如果 x 和 y 对保存在文件中，我如何绘制图形。是否可以直接从文件中读取值并绘制图表？示例 x,y 对：

```
0.0 -0.1436521
0.2013266 -0.06703765
0.4026532 -0.08619126
0.60397977 -0.08619126
0.8053064 -0.10534488
1.0066329 -0.12449849
1.2079595 -0.095768064
1.4092861 -0.047884032
1.476395 -0.02873042
1.5099494 -0.06703765
1.5770583 -0.009576807
1.6106128 -0.038307227
1.6777216 -0.019153614 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T05:31:30.540

您可以使用`load`将数据读入数组并`plot`绘制它。

例如（假设数据文件名为“data.txt”），

```
octave:9> data = load('-ascii', 'data.txt')
data =

   0.00000  -0.14365
   0.20133  -0.06704
   0.40265  -0.08619
   0.60398  -0.08619
   0.80531  -0.10534
   1.00663  -0.12450
   1.20796  -0.09577
   1.40929  -0.04788
   1.47639  -0.02873
   1.50995  -0.06704
   1.57706  -0.00958
   1.61061  -0.03831
   1.67772  -0.01915

octave:10> plot(data(:, 1), data(:, 2)) 
```

# css - Ipad上来回悬停菜单问题

> ID：15771919
> 
> 赞同：0
> 
> 时间：2013-04-02T18:45:42.173
> 
> 标签：css, ipad, twitter-bootstrap, menu, hover

我一直在努力让我的 CSS 悬停菜单在 iPad 上正常工作。我曾尝试使用具有相同结果的 javascript 应用悬停类，因此它必须在 css 中。该网站还使用 twitter 引导程序。

当前发生的情况是，在点击时，下拉/链接悬停状态会显示一秒钟，然后是上一个链接下拉/悬停显示，然后它再次显示正确的链接，并且它应该保持打开状态。

编辑：如果其他人有这个问题，更新引导程序（主要是下拉类），你应该没问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-04T15:52:06.607

更新了引导程序，主要是下拉类 javascript。

# php - 如何确定哪个查询执行时间最长

> ID：15771923
> 
> 赞同：1
> 
> 时间：2013-04-02T18:45:53.087
> 
> 标签：php, jquery, mysql, performance, pdo

我有一个规则列表，并根据这些规则触发多个查询，

但是其中一个查询需要一段时间才能运行，我试图找出哪个查询花费的时间太长，以便找出解决方案。

我不明白为什么它需要太长时间（超过 7 秒）

我所有的查询都是更新、插入、删除和几个小选择

注意：我正在传递一个 jquery post 事件，所以我目前得到一个超时错误，那是因为页面的执行时间长于 7 秒。我可以通过增加超时值来修复它。但我想解决问题的根源。执行简单的选择、插入、更新或删除不应该花费那么长时间。

我正在使用 PDO 执行查询，并且我正在使用自己的类连接到表并执行查询。如果你想看我的课，请按照这个[我如何从 PDO 中返回 LastInsertID 以及一个类的方法](https://stackoverflow.com/questions/15753753/how-can-i-return-lastinsertid-from-pdo-whin-a-method-of-a-class)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:49:52.107

您可以启用 MySQL 慢查询日志以查看哪些数据库查询需要很长时间

[http://dev.mysql.com/doc/refman/5.5/en/slow-query-log.html](http://dev.mysql.com/doc/refman/5.5/en/slow-query-log.html)

默认情况下，它将显示耗时超过 10 秒的查询

[http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_long_query_time](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_long_query_time)

我建议将该参数更改为 2 秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:50:56.830

您可以包装 PDO 类并在 query() 方法中记录执行时间。像这样的东西怎么样：

```
class MyPDO extends PDO {

    // extended query method that logs the time a query takes to execute
    public function query($sql) { 
        $start = microtime(true);
        parent::query($sql);

        printf("the query %s took: %s seconds\n",
            $sql,
            microtime(true) - $start);
    }
} 
```

通过替换为来使用`PDO`类`MyPDO`。像这样：

*旧代码*：

```
$connection = new PDO(...); 
```

*新代码*：

```
$connection = new MyPDO(...); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T19:00:20.847

这类似于 hek2mgl 的答案，但我包括一个解释。

当我想知道任何事情（查询、函数等）需要多长时间时，最直接的方法是在开始之前获取时间戳，然后在完成后立即获取另一个时间戳。从结束时间减去开始时间，你就知道已经过去了多少秒。

```
$start = time();
doStuff();
$end = time();
$duration_in_seconds = $end - $start;
echo "Function doStuff() took $duration_in_seconds seconds"; 
```

您可以将持续时间回显到屏幕或将其记录到文件中，只要方便。

如果您需要更精确，您可以像 hek2mgl 一样使用 microtime()。

# database - DBMS 中的 ISA 关系

> ID：15771924
> 
> 赞同：2
> 
> 时间：2013-04-02T18:45:54.190
> 
> 标签：database, database-design, relational-database

我正在阅读 Ramakrishnan 编写的数据库管理系统简介，我遇到了以下 ER 图：

![在此处输入图像描述](https://i.stack.imgur.com/13y38.jpg)

那里，它说，

```
"For example, we might identify a subset of employees as Senior Emps. We can 
modify Figure 2.12 to reflect this change by adding a second ISA node as a 
child of Employees and making Senior Emps a child of this node." 
```

我的问题是，为什么我们需要另一个 ISA 节点？为什么我们不直接将这个新实体添加到当前的 ISA 节点？这有关系吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:41:31.983

“我们不能使用现有的 ISA 节点来创建这种关系吗？”

（免责声明：读完这一切有点半开玩笑。ER 从来没有真正打算在其表达能力上做到逻辑上的完整和精确，而且有这么多不同的 ER 方言，很难绝对确定一些给定的方言试图表达，以及它不试图表达的方式和内容）

您将失去的是各种 IS_A“子实体”之间的排他性特征。您给定的示例设计可能旨在明确记录员工永远不能同时是 hourly_emp 和 contract_emp 的概念。

如果员工既可以是“高级”又可以是“合同”，它们之间没有排他性，如果 ER 方言的 IS_A 三角形打算准确表达这种排他性，那么你的解决方案将是错误的。

但是（重复）请注意，这一切都不是一成不变的。这一切都取决于您在特定 ER 方言中使用的符号的预期语义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-08T20:53:37.807

在我看来，当前的 ISA 节点（即上图）决定了员工的薪酬方式，因此简单地在当前节点上添加另一个节点并没有多大意义，因为 SeniorEmployees 可以是小时工也可以是合同工。

那有意义吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T18:56:38.570

创建具有 ISA 关系的任何实体的原因是为新实体提供附加属性。

就像在面向对象的建模中一样，您将创建一个新的子类，以便新类可以拥有相对于其超类的附加数据或附加方法。

因此，该示例的含义是 SeniorEmployees 应该有一些新列，例如存储服务年限或其他东西的奖励。

如果没有 SeniorEmployees 独有的新属性，我会将它们与普通员工一样对待，无需创建新的子表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T17:55:20.527

这种模式是有问题的。如果某人同时是一家公司的高级员工（兼职）​​和子公司的合同员工（兼职）​​，该怎么办。哦，它破碎了。

问题是一个人不是雇员。一个人是与其他方有零个或多个关系的人。

看看派对模型（Silverston / Hay / Fowler）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-07T01:22:08.100

ISA的两个优点：

1.  特定于子类的描述性属性。
2.  参与关系的身份实体。

# image - 在 Matlab 中裁剪图像而不超出图像尺寸的最快方法

> ID：15771928
> 
> 赞同：1
> 
> 时间：2013-04-02T18:46:20.200
> 
> 标签：image, matlab, image-processing, real-time

使用matlab。

假设我有：

*   水平方向像素`i`数为“MaxWidth”，垂直方向像素数为“MaxHeight”的图像。
*   由左上角和右下角像素的坐标定义的矩形 ROI，如

`ROI = [yleft , xleft ; yright , xright]`

我想知道最快的计算方法是什么，只包含给定 ROI 内部和内部的像素的图像`i_crop`在哪里。`i_crop``i`

像 400x400 图像中的 ROI`[-10 , -10 ; 1000 , 1000]`应该被视为`[1 , 1 ; 400 , 400]`

* * *

到目前为止，我想出了这两个：

## 作物1

```
ROI(ROI<1)=1;
ROI(ROI(:,1)>MaxHeight) = MaxHeight;
ROI(find(ROI(:,2)>MaxWidth)+2) = MaxWidth;
i_crop = i(ROI(1,1):ROI(2,1),ROI(1,2):ROI(2,2),:); 
```

和

## 作物2

```
ymin = ROI(1,1);
xmin = ROI(1,2);
ymax = ROI(2,1);
xmax = ROI(2,2);

if ymin < 1
  ymin = 1;
end
if xmin < 1
  xmin = 1;
end
if ymax < 1
  ymax = 1;
end
if xmax < 1
  xmax = 1;
end

if ymin > MaxHeight
  ymin = MaxHeight;
end
if ymax > MaxHeight
  ymax = MaxHeight;
end
if xmin > MaxWidth
  xmin = MaxWidth;
end
if xmax > MaxWidth
  xmax = MaxWidth;
end

i_crop = i(ymin:ymax,xmin:xmax,:); 
```

后者运行得更快：

```
>> im = imread('peppers.png');
>> tic, for i =1:100000 i_c = crop1(im,[0 0 ; 60 60],512,384); end; toc;
Elapsed time is 2.053574 seconds.
>> tic, for i =1:100000 i_c = crop2(im,[0 0 ; 60 60],512,384); end; toc;
Elapsed time is 1.667059 seconds. 
```

希望我说清楚了，提前谢谢！

# javascript - Java 脚本应用程序中的错误：未捕获的语法错误，意外的标识符

> ID：15771929
> 
> 赞同：0
> 
> 时间：2013-04-02T18:46:22.650
> 
> 标签：javascript

好吧，这就是脚本（顺便说一下，用 JavaScript 编写）

```
function verbox(origen,vi,titulo){
$("#fullbox").fadeIn('fast');
if (vi=="video") {
    $("#previewbox").fadeIn('slow');
    $("#previewboxinner").innerHTML='<iframe width="420" height="315" src="http://www.youtube.com/embed/'+origen+'?rel=0" frameborder="0" allowfullscreen></iframe>';
}
else if (vi=="foto"){
    $("#previewbox").fadeIn('slow');
    $("#previewboxinner").innerHTML='<center><img src="'+origen+'" alt="'+titulo+'"><br>+'titulo'+</center>';
}
} 
```

我知道这是一个错字，但我找不到它，你能帮我找到它吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:49:49.800

改变

```
'"><br>+'titulo'+</center>'; 
```

到

```
'"><br>'+titulo+'</center>'; 
```

# smtp - 您用于发送邮件的 IP 未被授权直接向我们的服务器发送电子邮件

> ID：15771932
> 
> 赞同：16
> 
> 时间：2013-04-02T18:46:26.967
> 
> 标签：smtp, gmail, telnet

嗨，我想通过 smtp 协议向我的 gmail 帐户之一发送邮件...

我试过但最后它发生了错误：

```
telnet> open alt4.gmail-smtp-in.l.google.com 25
Trying 74.125.131.27...
Connected to alt4.gmail-smtp-in.l.google.com.
Escape character is '^]'.
220 mx.google.com ESMTP b4si2095585vdw.57 - gsmtp
HELO stackoverflow.com
250 mx.google.com at your service
MAIL FROM: <test@stackoverflow.com>
250 2.1.0 OK b4si2095585vdw.57 - gsmtp
RCPT TO: <■■■■@gmail.com> // filtered ;)
250 2.1.5 OK b4si2095585vdw.57 - gsmtp
DATA
354  Go ahead b4si2095585vdw.57 - gsmtp
test
ok
it done
.
550-5.7.1 [5.22.81.102] The IP you're using to send mail is not authorized to
550-5.7.1 send email directly to our servers. Please use the SMTP relay at your
550-5.7.1 service provider instead. Learn more at
550 5.7.1 http://support.google.com/mail/bin/answer.py?answer=10336 b4si2095585vdw.57 - gsmtp
Connection closed by foreign host. 
```

那么现在我怎样才能在没有这个问题的情况下发送邮件呢？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-11-27T06:44:23.487

这是因为**Google 将拒绝从 spamhaus 数据库中的 IP 发送的任何电子邮件**。

有关更多信息，您可以在此处阅读： http://productforums.google.com/forum/#!topic/gmail/ [Hus4RxoVTr0](http://productforums.google.com/forum/#!topic/gmail/Hus4RxoVTr0)

您需要做的是**访问[http://www.spamhaus.org/lookup/](http://www.spamhaus.org/lookup/)并按照那里的说明从 spamhaus 数据库中删除您的服务器 ip**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T12:14:00.717

您可以在Google 邮件服务响应的最后一行的[链接中找到答案：](http://support.google.com/mail/bin/answer.py?answer=10336)

> **'您用来发送电子邮件的 IP 未经授权...'**
> 
> 为了防止垃圾邮件，Gmail 会拒绝来自无权发送邮件的 IP 地址的邮件。是否授权 IP 地址发送邮件由为您提供 IP 地址的 ISP 决定。此列表通常包含为拨号、DSL 或其他宽带访问提供的消费者 IP 范围。
> 
> **我能做些什么来解决这个问题？**
> 
> 您的 ISP 可能会提供 SMTP 中继来接受来自您 IP 的邮件，并且这些服务器应该被授权发送邮件。一些 ISP 可能会提供一种方式来获得授权的 IP，方法是升级到企业级服务或静态 IP 服务。您应该联系您的 ISP 以查看可用的选项。
> 
> 另一种选择是通过您自己域的服务器发送邮件，方法是配置它们以允许从您的 IP 地址中继，或使用 MSA（邮件提交代理）。了解如何使用 Gmail 从其他地址发送邮件。
> 
> 请注意，我们无法将 IP 地址列入白名单或以其他方式例外。

换句话说，邮件不能直接从用户发送到收件人邮件服务器。邮件约定要求您必须将邮件发送到您的提供商邮件服务器。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2019-12-05T14:41:41.830

我在 Kubuntu 上使用 Thunderbird 时，我的一个 hotmail 地址遇到了这个问题。尝试更改服务器设置，密码等无济于事。无奈之下，我通过“帐户设置”“帐户操作”（窗口左下角）删除了有问题的电子邮件地址。如果您使用 POP3，您将丢失所有电子邮件，因此请确保您使用 IMAP。然后，您只需在 Thunderbird 中选择“添加电子邮件”，电子邮件就会按原样放回并完美运行。

# matlab - matlab：找圆

> ID：15771937
> 
> 赞同：0
> 
> 时间：2013-04-02T18:46:42.083
> 
> 标签：matlab, image-processing

我是matlab的新手！我正在尝试从帧序列中检测瞳孔...我需要使用这种方法来检测眼睛是否睁开。

当我不使用 erode 和 dilate 时 imfindcircles 正在工作，但是 erode 和 dilate 的步骤给我带来了一个非常酷的图像，它是一个非常干净的白色背景上的黑色圆圈，Hough 会像一个魅力一样工作，但它没有我真的找不到出路。它不依赖于半径范围，因为如果我评论侵蚀和扩张它会起作用。正如我刚才所说，侵蚀和扩张会产生完美的图像。

有小费吗？

```
rightEye = imcrop(videoFrame, rightEyeBox);
leftEye = imcrop(videoFrame, leftEyeBox);

% to grayscale
grayRightEye = rgb2gray(rightEye);
grayLeftEye = rgb2gray(leftEye);

% binarize
grayRightEye = im2bw(grayRightEye, 0.45);

% erode and dilate
finalRight = imdilate(grayRightEye, strel('disk', 7));
finalRight = imerode(finalRight, strel('disk', 11));

imshow(grayRightEye);

rightCircle = max(rightRows, rightCols);
[centers, radii] = imfindcircles(grayRightEye,[5 25]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:17:00.097

我已经通过将 finalRight 类型转换为加倍解决了！

# jquery - DOM 显示图像已加载，但页面未显示图像

> ID：15771939
> 
> 赞同：0
> 
> 时间：2013-04-02T18:46:56.137
> 
> 标签：jquery, ruby-on-rails, asset-pipeline

我从表单提交后加载图像，这是我的代码：

```
$('#new_student').submit(function(event) {
    var spinner = '<%= image_tag("admin/loading.gif") %>';
    $('#register_student').replaceWith(spinner);
}); 
```

这是 Rails 3.2 资产管道的一部分。按钮已正确替换为图像，并且 DOM 正确显示了图像的路径，但页面仅显示了缺少的图像符号。关于为什么会发生这种情况的任何想法？

**编辑**

当我检查按钮时，它会正确替换，我可以单击图像路径并查看图像，所以显然路径是正确的。问题是，它不会显示在页面本身上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T02:31:56.557

当单击按钮并将按钮元素替换为图像时，页面会显示“缺少图像”符号，直到图像完全加载。与其在单击按钮后加载图像，不如将其设置为页面其他位置的不可见元素。现在，当单击按钮时，图像已经加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:13:17.560

您是否可能在某处设置了错误的 z-index，因此图像不可见？

# .htaccess - 重定向.htaccess .php？

> ID：15771946
> 
> 赞同：0
> 
> 时间：2013-04-02T18:47:22.987
> 
> 标签：.htaccess, redirect

我想为一个新的 Wordpress 网站做一些重定向：

```
domain.com/index.php?cPath=24 --> domain.com/about/ 
```

我的 .htaccess (root) 看起来像：

```
Redirect 301 /index.php?cPath=24 /about/ 
```

我得到这个：

```
domain.com/?cPath=24 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:54:02.440

您可以使用`mod_rewrite`重定向标志来完成此操作：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^cPath=24
RewriteRule ^ /about/? [R=301,L] 
```

# java - 如何让 jfilechooser 只接受 .txt

> ID：15771949
> 
> 赞同：39
> 
> 时间：2013-04-02T18:47:29.157
> 
> 标签：java, swing, file-io, jfilechooser

我试图将我的联系人保存在我的表中，但 filechosser 总是将它设置为所有文件。有没有办法可以将其设置为仅接受 .txt 并将其设为默认或唯一选项。

```
savecontact.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
        JFileChooser filesave = new JFileChooser();
        int returnVal = filesave.showSaveDialog(Main.this);
        if (returnVal == JFileChooser.APPROVE_OPTION) {
            try {
                File file = filesave.getSelectedFile();

                PrintWriter os = new PrintWriter(file);
                os.println("");
                for (int col = 0; col < table.getColumnCount(); col++) {
                    os.print(table.getColumnName(col) + "\t");
                }
                os.println("");
                os.println("");

                for (int row = 0; row < table.getRowCount(); row++) {
                    for (int col = 0; col < table.getColumnCount(); col++) {
                        os.print(table.getColumnName(col));
                        os.print(": ");
                        os.println(table.getValueAt(row, col));
                    }
                    os.println("");
                }
                os.close();
                System.out.println("Done!");
            } catch (IOException e1) {
                e1.printStackTrace();
            }
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-04-02T18:51:15.987

您需要添加一个过滤器：

```
JFileChooser jf = new JFileChooser();
FileNameExtensionFilter filter = new FileNameExtensionFilter("TEXT FILES", "txt", "text");
jf.setFileFilter(filter); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-10-04T09:07:12.140

这里有一些例子

```
fileChooser.addChoosableFileFilter(new FileNameExtensionFilter("Images", "jpg", "png", "gif", "bmp"));
fileChooser.addChoosableFileFilter(new FileNameExtensionFilter("*.pdf", "pdf"));
fileChooser.addChoosableFileFilter(new FileNameExtensionFilter("*.txt", "txt")); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-02T18:50:38.530

您可以使用[`FileFilter`](http://docs.oracle.com/javase/tutorial/uiswing/components/filechooser.html#filters).

创建一个`Filefilter`具有必要条件的。将此文件过滤器设置为`JFileChooser`，然后启动它。

# php - phpdoc不解析常量描述

> ID：15771955
> 
> 赞同：0
> 
> 时间：2013-04-02T18:47:36.487
> 
> 标签：php, phpdoc

我一直在尝试记录我的配置文件，遵循 phpdocumentor 文档，我从一个简化的配置文件开始，如下所示：

```
/**
 * Configuration / Settings file
 * 
 * @package site
 * @copyright 2013
 * @author Nick
 * 
 */
/**
 * Switch development mode on/off
 */
define('DEV_MODE',true); 
```

上面的常量包含在文档中，但是它显示的只是常量名称 ( `DEV_MODE`)，而不是任何描述。

然后我[在这里发现了另一个问题](https://stackoverflow.com/questions/6706051/phpdoc-for-constants)，它建议添加`@const`以定义常量：

```
/**
 * Configuration / Settings file
 * 
 * @package site
 * @copyright 2013
 * @author Nick
 * 
 */
/**
 * Switch development mode on/off
 * @const DEV_MODE
 */
define('DEV_MODE',true); 
```

但这仍然没有什么不同。

不确定它是否重要，但我正在使用 phar 文件来运行 phpDoc。

谁能看到我做错了什么？

# c# - 关于 00:00:00:000 等时间的性能相关问题

> ID：15771956
> 
> 赞同：1
> 
> 时间：2013-04-02T18:47:38.090
> 
> 标签：c#

我有[这个 ListView](http://spunit.tk/x/Untitled-1.png)。我的目标是在列表中的所有时间/选定时间中添加/减去固定时间。问题是其中会有大约 1000-3000 行，所以需要一些时间。我的目标是让计算机尽可能快地做到这一点。

现在，如果我以垃圾邮件方式运行该函数，则表单需要一些时间才能完成，如果我选择对选定的行执行此操作，其中一半，则表单会在完成前冻结一段时间。

我的代码现在看起来像这样（[这是代码的图片以便更好地查看](http://spunit.tk/x/564654.png)）：

```
 public void PlusMinus(bool plus)
    {
        int items_to_set = 0;
        int msec_start = 0;
        int msec_end = 0;
        int msec_box = Convert.ToInt32(mskTime.Text.Substring(9, 3)) +
        (Convert.ToInt32(mskTime.Text.Substring(6, 2)) * 1000) +
        (Convert.ToInt32(mskTime.Text.Substring(3, 2)) * 60000) +
        (Convert.ToInt32(mskTime.Text.Substring(0, 2)) * 3600000);
        if (rbtnAll.Checked) { items_to_set = listSub.Items.Count; }
        else { items_to_set = listSub.SelectedItems.Count; }

        if (rbtnAll.Checked)
        {
            for (int i = 0; i < items_to_set; i++)
            {
                msec_start = Convert.ToInt32(listSub.Items[i].SubItems[1].Text.Substring(9, 3)) +
                (Convert.ToInt32(listSub.Items[i].SubItems[1].Text.Substring(6, 2)) * 1000) +
                (Convert.ToInt32(listSub.Items[i].SubItems[1].Text.Substring(3, 2)) * 60000) +
                (Convert.ToInt32(listSub.Items[i].SubItems[1].Text.Substring(0, 2)) * 3600000);
                msec_end = Convert.ToInt32(listSub.Items[i].SubItems[2].Text.Substring(9, 3)) +
                (Convert.ToInt32(listSub.Items[i].SubItems[2].Text.Substring(6, 2)) * 1000) +
                (Convert.ToInt32(listSub.Items[i].SubItems[2].Text.Substring(3, 2)) * 60000) +
                (Convert.ToInt32(listSub.Items[i].SubItems[2].Text.Substring(0, 2)) * 3600000);

                if (plus == true) { msec_start += msec_box; msec_end += msec_box; }
                else { msec_start -= msec_box; msec_end -= msec_box; }
                TimeSpan ts = TimeSpan.FromMilliseconds(msec_start);
                listSub.Items[i].SubItems[1].Text = string.Format("{0:D2}:{1:D2}:{2:D2}:{3:D3}", ts.Hours, ts.Minutes, ts.Seconds, ts.Milliseconds);
                ts = TimeSpan.FromMilliseconds(msec_end);
                listSub.Items[i].SubItems[2].Text = string.Format("{0:D2}:{1:D2}:{2:D2}:{3:D3}", ts.Hours, ts.Minutes, ts.Seconds, ts.Milliseconds);
            }
        }
        else
        {
            for (int i = 0; i < items_to_set; i++)
            {
                msec_start = Convert.ToInt32(listSub.Items[listSub.SelectedIndices[i]].SubItems[1].Text.Substring(9, 3)) +
                (Convert.ToInt32(listSub.Items[listSub.SelectedIndices[i]].SubItems[1].Text.Substring(6, 2)) * 1000) +
                (Convert.ToInt32(listSub.Items[listSub.SelectedIndices[i]].SubItems[1].Text.Substring(3, 2)) * 60000) +
                (Convert.ToInt32(listSub.Items[listSub.SelectedIndices[i]].SubItems[1].Text.Substring(0, 2)) * 3600000);
                msec_end = Convert.ToInt32(listSub.Items[listSub.SelectedIndices[i]].SubItems[2].Text.Substring(9, 3)) +
                (Convert.ToInt32(listSub.Items[listSub.SelectedIndices[i]].SubItems[2].Text.Substring(6, 2)) * 1000) +
                (Convert.ToInt32(listSub.Items[listSub.SelectedIndices[i]].SubItems[2].Text.Substring(3, 2)) * 60000) +
                (Convert.ToInt32(listSub.Items[listSub.SelectedIndices[i]].SubItems[2].Text.Substring(0, 2)) * 3600000);

                if (plus == true) { msec_start += msec_box; msec_end += msec_box; }
                else { msec_start -= msec_box; msec_end -= msec_box; }
                TimeSpan ts = TimeSpan.FromMilliseconds(msec_start);
                listSub.Items[listSub.SelectedIndices[i]].SubItems[1].Text = string.Format("{0:D2}:{1:D2}:{2:D2}:{3:D3}", ts.Hours, ts.Minutes, ts.Seconds, ts.Milliseconds);
                ts = TimeSpan.FromMilliseconds(msec_end);
                listSub.Items[listSub.SelectedIndices[i]].SubItems[2].Text = string.Format("{0:D2}:{1:D2}:{2:D2}:{3:D3}", ts.Hours, ts.Minutes, ts.Seconds, ts.Milliseconds);
            }
        }
    } 
```

那么我是否可以做出一些改变，这会对这里的性能产生很大的积极影响？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T18:52:35.563

根本不解析字符串。相反，将数据存储为`TimeSpan`s ，因此根本不需要解析。

无论如何，将数据存储为字符串是一种不好的做法，因为它会使您的代码因序列化和反序列化而变得混乱。

存储数据的位置并不重要。您可以使用`object Tag`大多数 WinForms 对象上的属性或将其存储在其他地方（可能在自定义列表或字典中）。

此外，您的代码看起来非常冗余。将公共子表达式放入局部变量中。这将提高代码质量和性能。

# javascript - 手风琴 - 打开加载选项卡

> ID：15771964
> 
> 赞同：0
> 
> 时间：2013-04-02T18:48:04.310
> 
> 标签：javascript, jquery, accordion, jquery-ui-accordion

下面的代码在加载时打开第一个选项卡。

```
var accordion_head = $('.accordion > li > a'),
    accordion_body = $('.accordion li > .sub-menu');

// Open the first tab on load

accordion_head.first().addClass('active').next().slideDown('normal'); 
```

如何按名称/ID 或列表上的位置（例如第 4 项）打开选项卡？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:50:23.663

您可以打开第 4 个项目，例如：

```
accordion_head.eq(3).addClass('active').next().slideDown('normal'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:55:19.360

```
// Initialize the accordion with the active option specified (zero-based index):
$("#myAccordionId").accordion({ active: 3 });

// Set the active option, after initialization (zero-based index):
$("#myAccordionId").accordion( "option", "active", 3 ); 
```

更多关于[手风琴小工具](http://api.jqueryui.com/accordion/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-07T05:54:30.040

试试这个，它会工作

```
$( function() {
  $('#accordion').accordion({
      active : 2
  });
}); 
```

谢谢

# php - 使用 php 重置 mysql 数据库中的字段的 html 按钮

> ID：15771965
> 
> 赞同：0
> 
> 时间：2013-04-02T18:48:04.610
> 
> 标签：php, mysql

对 mysql 和 php 有点陌生

我的网站上的每个页面都有一个点击计数器和一个列出所有页面和点击的私人页面。我有一个按钮，可以将所有页面重置为零，在每个页面列表旁边我有一个重置按钮，可以单独重置每个页面。这一切都在使用文本文件，但现在我正在切换到 mysql 数据库。我已经编写了“RESET ALL”按钮来工作，但无法让各个页面按钮工作。

处理代码为：

```
 if($_POST[ind_reset]) {
$ind_reset = $_POST[ind_reset];
mysql_connect("server", "username", "password") or die(mysql_error()); 
 mysql_select_db("database") or die(mysql_error());
    $sql = 'UPDATE counters SET Hits =\'0\' WHERE Page = \'$ind_reset\';';
      } 
```

并且 html 表单代码是一个字符串：

```
$page_reset = "<form id='Reset' action='counter_update.php' method='post'>
    <button type='submit' name='ind_reset' value='$formPage'>RESET</button>
    </form>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:49:45.340

让我们从第一件事开始：

```
if($_POST[ind_reset]) { 
```

应该

```
if($_POST['ind_reset']) { 
```

它不带引号也能工作，因为 PHP 正在默默地纠正您的错误。如果您将错误报告设置为 E_ALL，您将看到错误消息。

您需要考虑的一件事是，您永远不能相信 POST 数据是您认为的应有的数据。也许你输入了一个错字。也许黑客正在向您发送虚假的 POST 数据。无论是哪一种，如果在数据库更新中放入了错误的东西，它都会弄乱你的代码。出于这个原因，您应该有一个检查器来确保该值是有效的，而不是简单地将那个 POST 值插入到您的数据库中。当我做这样的事情时，我会创建一个可能值的数组，并在更新或插入数据库时​​只使用这些值。例子：

```
$pages = array('value_on_page'=>'value_put_in_database', 
               'xyz'=>'thing_in_database_2');
//the valid things to post are either 'value_on_page' or 'xyz',
//but what goes into the database are the values those keys point to
//e.g. if $_POST['ind_reset'] == 'xyz', $ind_reset will be 'thing_in_database_2'

$key = $_POST['ind_reset'];
if(!isset($pages[$key])) {  
    //if that posted value isn't a key in the array, it's bad
    error_log('Invalid posted page'.$key);
} else {
    //this is a valid posted page
    $ind_reset = $pages[$key]; 

    //** do the database stuff right here in this spot **//
} 
```

现在，由于您发布的代码不起作用，您错过了执行数据库查询的最后一个关键部分：您实际运行查询的部分。

```
 $conn = mysql_connect("server", "username", "password") or error_log(mysql_error()); 
    mysql_select_db("database") or error_log(mysql_error());
    $sql = 'UPDATE counters SET Hits =\'0\' WHERE Page = \'$ind_reset\';';
    mysql_query($sql, $conn) or error_log(mysql_error()); 
```

我希望你注意到我用“error_log”替换了“die”。如果您执行 error_log(mysql_error(), 1, 'youremail@example.com')，它会通过电子邮件将其发送给您。否则，就像在我的示例中一样，它会被放入系统错误日志文件所在的任何位置。然后，您可以对数据库错误有一个很好的历史记录，这样当您不可避免地带着更多问题返回 StackOverflow 时，您可以准确地告诉我们发生了什么。如果您使用文件，只需确保轮换错误日志文件的名称（我根据当天的日期命名）或定期清除它，否则它会变得非常非常长。

使用您在评论中发布的 mysqli 代码比 mysql_* 函数更好，但您并不完全正确。“bind_param”部分将您的变量粘贴到问号所在的位置。如果你的变量是一个字符串，你把“s”放在第一位，或者如果它是一个整数，你把“i”放在第一位，等等。确保你在完成后关闭它们。

```
 $db = new mysqli("server", "username", "password", "database");
    if(!$db->connect_errno) {
        $stmt = $db->prepare("UPDATE counters SET Hits = '0' where Page = ?");  
        $stmt->bind_param('s',$ind_reset); //assuming $ind_reset is a string
        if(!$stmt->execute()) {
            error_log($stmt->error);
        }
        $stmt->close();
    } else {
        error_log($db->connect_error);
    }
    $db->close(); 
```

# angularjs - angularjs - 从多个 ng-click 切换 ng-class

> ID：15771968
> 
> 赞同：1
> 
> 时间：2013-04-02T18:48:12.607
> 
> 标签：angularjs

我刚刚开始从事一个需要我学习 AngularJS 的项目。我要做的是创建两个滑入屏幕的菜单，一个从左侧，一个从右侧。当他们这样做时，他们会将内容推送过来。

目前我可以让其中一个工作，但不能同时工作。我意识到这是因为我定义 ng-class 的方式。我只是不能完全概念化如何正确地做到这一点。

```
<div ng-class="{true:'slide-left', false:''}[toggleSlide]" class="container">

    <div class="content">
        <button ng-click="toggleSlide = !toggleSlide" class="btn-left">From Left</button>
        <button ng-click="toggleSlide = !toggleSlide" class="btn-right">From Right</button>
    </div>

    <div class="slide-from-left">
        <p>Here is information that slides from off screen left.</p>
    </div>

    <div class="slide-from-right">
        <p>Here is information that slides from off screen right.</p>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:14:05.553

像这样为你想要的设置 ng-class 语法：

`<div ng-class="{'slide-left':toggleSlide, 'slide-right':!toggleSlide}" class="container">`

另外，我猜你正在尝试使你的代码适应你看到的其他东西，所以我也会提供一些东西。这是一个`ng-class`using分配偶数和奇数类的方法`ng-repeat`：`$index`

`ng-class="['even', 'odd'][$index % 2]"`

# android - Galaxy S2 上的 ANR TextureView（GPU 驱动程序问题？）

> ID：15771971
> 
> 赞同：1
> 
> 时间：2013-04-02T18:48:32.680
> 
> 标签：android, opengl-es, galaxy, glsurfaceview, android-anr-dialog

我在播放 opengl 视频流的 ListView 中有多个 TextureView。该代码在 Nexus 4 (4.2)、Galaxy S3 (4.1) 和 HTC One (4.0.3) 上运行良好。但是，当我在 opengl 线程运行（死锁）时尝试在 S2（SPH-D710VMUB，Virgin Mobile，4.0.4）上滚动列表视图时，会发生 ANR。下面提供了 ANR 跟踪（listview 上的 isHardwareAccelerated() = true）。

另请注意，如果 GLSurfaceView 用于处理相同的 openGL 代码，它可以正常工作，但 Z 顺序会与 ICS 设备的同一窗口中的多个 SurfaceView 混淆。GLTextureView 是通过[从 GLSurfaceView 转换为 TextureView 的指令转换的（通过 GLTextureView）](https://stackoverflow.com/questions/12061419/converting-from-glsurfaceview-to-textureview-via-gltextureview)

编辑 1：尝试了 GLTextureView 的另一种实现，能够找到确切的行。“eglSwapBuffers（EGLDisplay 显示，EGLSurface 表面）；” 由于某种原因会阻塞 S2。

有人注意到：[http](http://vec.io/posts/a-workaround-to-fix-opengl-eglswapbuffers-freezing) : //vec.io/posts/a-workaround-to-fix-opengl-eglswapbuffers-freezing glFinish(); 是需要的。任何的想法？

编辑 2：添加 glFinish() 或 eglWaitGL() 没有帮助。:( 怀疑他们无论如何都会立即返回......

编辑 3：使用[https://github.com/eaglesakura/gltextureview](https://github.com/eaglesakura/gltextureview)重现它：参见[https://github.com/eaglesakura/gltextureview/issues/1](https://github.com/eaglesakura/gltextureview/issues/1)

编辑 4：如果有人想知道，这是我对 GLTextureView 的实现（[https://github.com/edisonw/jjm](https://github.com/edisonw/jjmpeg/tree/jjmpeg-1.0-dev/jjmpeg-android/src/com/edisonwang/android/player) ​​peg/tree/jjmpeg-1.0-dev/jjmpeg-android/src/com/edisonwang/android/player ) 它还包括 FFMpeg 播放内容。

编辑 5：结果可能是 Qualcomm Adreno 200 系列错误：[https ://developer.qualcomm.com/forum/qdevnet-forums/mobile-gaming-graphics-optimization-adreno/11525](https://developer.qualcomm.com/forum/qdevnet-forums/mobile-gaming-graphics-optimization-adreno/11525)

```
 DALVIK THREADS:
        (mutexes: tll=0 tsl=0 tscl=0 ghl=0)
        "main" prio=5 tid=1 NATIVE
          | group="main" sCount=1 dsCount=0 obj=0x40c30460 self=0x129c0
          | sysTid=21854 nice=0 sched=0/0 cgrp=default handle=1074746664
          | schedstat=( 434522015 268952863 603 ) utm=34 stm=9 core=0
          at android.view.GLES20Canvas.nUpdateTextureLayer(Native Method)
          at android.view.GLES20TextureLayer.update(GLES20TextureLayer.java:77)
          at android.view.TextureView.applyUpdate(TextureView.java:388)
          at android.view.TextureView.draw(TextureView.java:276)
          at android.view.View.getDisplayList(View.java:10586)
          at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2597)
          at android.view.View.getDisplayList(View.java:10549)
          at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2597)
          at android.view.View.getDisplayList(View.java:10549)
          at android.view.ViewGroup.drawChild(ViewGroup.java:2850)
          at android.widget.ListView.drawChild(ListView.java:3225)
          at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
          at android.widget.AbsListView.dispatchDraw(AbsListView.java:2271)
          at android.widget.ListView.dispatchDraw(ListView.java:3220)
          at android.view.View.draw(View.java:11150)
          at android.widget.AbsListView.draw(AbsListView.java:3728)
          at android.view.View.getDisplayList(View.java:10586)
          at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2597)
          at android.view.View.getDisplayList(View.java:10549)
          at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2597)
          at android.view.View.getDisplayList(View.java:10549)
          at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2597)
          at android.view.View.getDisplayList(View.java:10549)
          at android.view.HardwareRenderer$GlRenderer.draw(HardwareRenderer.java:842)
          at android.view.ViewRootImpl.draw(ViewRootImpl.java:2011)
          at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1735)
          at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2547)
          at android.os.Handler.dispatchMessage(Handler.java:99)
          at android.os.Looper.loop(Looper.java:137)
          at android.app.ActivityThread.main(ActivityThread.java:4507)
          at java.lang.reflect.Method.invokeNative(Native Method)
          at java.lang.reflect.Method.invoke(Method.java:511)
          at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:978)
          at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:745)
          at dalvik.system.NativeStart.main(Native Method)

    "AsyncTask #2" prio=5 tid=19 WAIT
      | group="main" sCount=1 dsCount=0 obj=0x415cdf00 self=0x3aa178
      | sysTid=8059 nice=10 sched=0/0 cgrp=bg_non_interactive handle=4722816
      | schedstat=( 369083 125724959 3 ) utm=0 stm=0 core=0
      at java.lang.Object.wait(Native Method)
      - waiting on <0x415ce020> (a java.lang.VMThread) held by tid=19 (AsyncTask #2)
      at java.lang.Thread.parkFor(Thread.java:1231)
      at sun.misc.Unsafe.park(Unsafe.java:323)
      at java.util.concurrent.locks.LockSupport.park(LockSupport.java:157)
      at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2022)
      at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:413)
      at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1009)
      at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1069)
      at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
      at java.lang.Thread.run(Thread.java:856)

    "AsyncTask #1" prio=5 tid=13 WAIT
      | group="main" sCount=1 dsCount=0 obj=0x415ca7d8 self=0x30c370
      | sysTid=8050 nice=10 sched=0/0 cgrp=bg_non_interactive handle=3105360
      | schedstat=( 448085 5989790 7 ) utm=0 stm=0 core=1
      at java.lang.Object.wait(Native Method)
      - waiting on <0x415ca970> (a java.lang.VMThread) held by tid=13 (AsyncTask #1)
      at java.lang.Thread.parkFor(Thread.java:1231)
      at sun.misc.Unsafe.park(Unsafe.java:323)
      at java.util.concurrent.locks.LockSupport.park(LockSupport.java:157)
      at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2022)
      at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:413)
      at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1009)
      at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1069)
      at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
      at java.lang.Thread.run(Thread.java:856)

    "GLThread 320" prio=5 tid=12 NATIVE
      | group="main" sCount=1 dsCount=0 obj=0x41535368 self=0x2f7308
      | sysTid=8049 nice=0 sched=0/0 cgrp=default handle=2690528
      | schedstat=( 1744387397 1741438396 2048 ) utm=169 stm=5 core=1
      at com.google.android.gles_jni.EGLImpl.eglSwapBuffers(Native Method)
ndroid.player.GLTextureView$GLThread.run(GLTextureView.java:1261)

"Binder Thread #2" prio=5 tid=10 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x4150bfd8 self=0x217e08
  | sysTid=8038 nice=0 sched=0/0 cgrp=default handle=2155984
  | schedstat=( 1496167 16950375 10 ) utm=0 stm=0 core=0
  at dalvik.system.NativeStart.run(Native Method)

"Binder Thread #1" prio=5 tid=9 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x414fb130 self=0x1bd740
  | sysTid=8037 nice=0 sched=0/0 cgrp=default handle=1595520
  | schedstat=( 2633041 25123960 10 ) utm=0 stm=0 core=0
  at dalvik.system.NativeStart.run(Native Method)

"FinalizerWatchdogDaemon" daemon prio=5 tid=8 TIMED_WAIT
  | group="main" sCount=1 dsCount=0 obj=0x414f7490 self=0x182a50
  | sysTid=8036 nice=0 sched=0/0 cgrp=default handle=1433120
  | schedstat=( 288708 6619500 5 ) utm=0 stm=0 core=0
  at java.lang.VMThread.sleep(Native Method)
  at java.lang.Thread.sleep(Thread.java:1031)
  at java.lang.Thread.sleep(Thread.java:1013)
  at java.lang.Daemons$FinalizerWatchdogDaemon.run(Daemons.java:213)
  at java.lang.Thread.run(Thread.java:856)

"FinalizerDaemon" daemon prio=5 tid=7 WAIT
  | group="main" sCount=1 dsCount=0 obj=0x414f7338 self=0x105230
  | sysTid=8035 nice=0 sched=0/0 cgrp=default handle=1662112
  | schedstat=( 3763081 5489124 25 ) utm=0 stm=0 core=1
  at java.lang.Object.wait(Native Method)
  - waiting on <0x40c265d0> (a java.lang.ref.ReferenceQueue)
  at java.lang.Object.wait(Object.java:401)
  at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:102)
  at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:73)
  at java.lang.Daemons$FinalizerDaemon.run(Daemons.java:168)
  at java.lang.Thread.run(Thread.java:856)

"ReferenceQueueDaemon" daemon prio=5 tid=6 WAIT
  | group="main" sCount=1 dsCount=0 obj=0x414f71d0 self=0xfa1f0
  | sysTid=8034 nice=0 sched=0/0 cgrp=default handle=1662016
  | schedstat=( 1831625 1206249 33 ) utm=0 stm=0 core=1
  at java.lang.Object.wait(Native Method)
  - waiting on <0x40c264f8> 
  at java.lang.Object.wait(Object.java:364)
  at java.lang.Daemons$ReferenceQueueDaemon.run(Daemons.java:128)
  at java.lang.Thread.run(Thread.java:856)

"Compiler" daemon prio=5 tid=5 VMWAIT
  | group="system" sCount=1 dsCount=0 obj=0x414f70e0 self=0x1b8688
  | sysTid=8033 nice=0 sched=0/0 cgrp=default handle=747976
  | schedstat=( 182108462 246633083 1197 ) utm=11 stm=7 core=1
  at dalvik.system.NativeStart.run(Native Method)

"JDWP" daemon prio=5 tid=4 VMWAIT
  | group="system" sCount=1 dsCount=0 obj=0x414f6ff8 self=0x206680
  | sysTid=8032 nice=0 sched=0/0 cgrp=default handle=1450968
  | schedstat=( 1964583 1505832 16 ) utm=0 stm=0 core=1
  at dalvik.system.NativeStart.run(Native Method)

"Signal Catcher" daemon prio=5 tid=3 RUNNABLE
  | group="system" sCount=0 dsCount=0 obj=0x414f6f00 self=0x1b7dd8
  | sysTid=8031 nice=0 sched=0/0 cgrp=default handle=1660128
  | schedstat=( 4634792 2711334 6 ) utm=0 stm=0 core=0
  at dalvik.system.NativeStart.run(Native Method)

"GC" daemon prio=5 tid=2 VMWAIT
  | group="system" sCount=1 dsCount=0 obj=0x414f6e20 self=0x20adb8
  | sysTid=8028 nice=0 sched=0/0 cgrp=default handle=1365944
  | schedstat=( 132084797 114875290 96 ) utm=10 stm=2 core=1
  at dalvik.system.NativeStart.run(Native Method) 
```

关于如何调试这个或为什么会发生的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T21:24:37.250

得到谷歌的官方回应，这确实是三星针对这个非常具体的设备的驱动程序错误（据说已修复）。

# django - 在 Django 模板中乘以 -1

> ID：15771973
> 
> 赞同：9
> 
> 时间：2013-04-02T18:48:36.927
> 
> 标签：django, django-templates

我想总是在 Django 模板中使用我的变量的正值。变量的符号只是文字含义：

```
{% if qty > 0 %}
  Please, sell {{ qty }} products.
{% elif qty < 0 %}
  Please, buy {{ -qty }} products.
{% endif %} 
```

当然，`{{ -qty }}`行不通。

是否有不传递包含绝对值的第二个变量的解决方法？类似于将值转换为无符号整数的模板过滤器。

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-02T19:05:12.170

您可以滥用一些字符串过滤器：

```
{% if qty > 0 %}
  Please, sell {{ qty }} products.
{% elif qty < 0 %}
  Please, buy {{ qty|slice:"1:" }} products.
{% endif %} 
```

或者

```
 Please, sell {{ qty|stringformat:"+d"|slice:"1:" }} products. 
```

但是您可能应该在您的视图中执行此操作或编写自定义过滤器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-10T09:46:54.910

与Python 中的[所有内容](http://xkcd.com/353/)一样，有一个库：[django-mathfilters](https://pypi.python.org/pypi/django-mathfilters/0.1.2)。

然后你可以`abs`像这样简单地使用过滤器：

```
Please, sell {{ qty|abs }} products. 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-03T06:39:22.310

您应该为此使用自定义过滤器。

这是两种不同的方法：

1）您可以定义一个`negate`过滤器：

```
# negate_filter.py
from django import template
register = template.Library()

@register.filter
def negate(value):
    return -value 
```

然后在您的模板中，将代码添加`{% load negate_filter %}`到顶部，然后替换`{{ -qty }}`为`{{ qty|negate }}`.

`buy_sell`2）如果你愿意，你也可以用一个过滤器替换整个东西：

```
# buy_sell_filter.py
from django import template
register = template.Library()

@register.filter
def buy_sell(value):
    if value > 0 :
      return 'sell %s' % value
    else :
      return 'buy %s' % -value 
```

那么你的模板应该只是

```
{% if qty %} Please, sell {{ qty|buy_sell }} products.{% endif %} 
```

您甚至可以在过滤器中包含整个字符串，然后将整个模板设为 {{ qty|buy_sell }}。

这两个选项都是合理的，具体取决于模板的其余部分。例如，如果您有很多使用负数买入和正数卖出的字符串，请执行第二个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T18:53:35.100

理想情况下，您将在视图中执行检查，以将逻辑与显示分开（例如，如果 qty = 0 会发生什么？）如果您坚持在模板中进行数学运算，您可以执行类似[hack](http://slacy.com/blog/2010/07/using-djangos-widthratio-template-tag-for-multiplication-division)的操作。

另一种选择是编写自定义过滤器（请参阅[此示例](https://stackoverflow.com/questions/6319093/do-math-using-django-template-filter)）。

# sql-server-2008 - SQL Server 中的外键关系

> ID：15771974
> 
> 赞同：1
> 
> 时间：2013-04-02T18:48:41.080
> 
> 标签：sql-server-2008

我有一张桌子，让我们简单点..：

```
CREATE TABLE Department(
    [DepartmentId] [int] IDENTITY(1,1) NOT NULL,
    [Name] [nvarchar](128) NOT NULL
) 
```

DepartmentId 是表Department 的主键。

我有另一个名为 DepartmentRelation 的表：

```
CREATE TABLE DepartmentRelation(
    [DepartmentRelationId] [int] IDENTITY(1,1) NOT NULL,
    [ParentDepartmentId] [int] NOT NULL,
    [ChildDepartmentId] [int] NOT NULL  
) 
```

DepartmentRelationId 是表 DepartmentRelation 的主键。

现在我需要定义两个外键，一个用于 ParentDepartmentId，另一个用于 ChildDepartmentId，每个都指向 Department.DepartmentId。

我的问题是，我是否也应该在父列和子列之间添加另一个外键？例如定义一个从孩子到父母的fk？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:00:39.877

这种类型的层次关系通常在一个表中完成，在你的情况下是在`Department`表上（你应该考虑调用它`Departments`，但这只是我的偏好）。无论如何，该图的可视化示例如下：

![在此处输入图像描述](https://i.stack.imgur.com/CqZXw.png)

# jquery - 为什么我不能将新内容加载到 div 中？

> ID：15771976
> 
> 赞同：1
> 
> 时间：2013-04-02T18:48:46.507
> 
> 标签：jquery, html, hyperlink, load

我想在一个 div 中有一个链接列表，将内容加载到第二个 div 中。我已经阅读了我能找到的关于这件事的所有内容……但它似乎不起作用。这是我所拥有的：

```
<div id="scentwrap" align="center">
        <div id="sounds"><h2>Sounds like you need to celebrate!</h2><div>
        <div id="myList">
            <div id="listtit">
                <br>Try more recipes below!
            </div>
            <div id="list">
                <ul>
                    <li> <a href="scent2.html">Soothing Blend</a></li> <li>item # </li> <li>item # </li> <li>item # </li> <li>item # </li> <li>item # </li> <li>item # </li>
                    <li>item # </li> <li>item # </li> <li>item # </li> <li>item # </li> <li>item # </li> <li>item # </li> 
                    <li>item # </li> <li>item # </li> <li>item # </li> <li>item # </li> <li>item # </li> <li>item # </li> 
                    <li>item # </li> <li>item # </li> <li>item # </li> <li>item # </li> <li>item # </li> <li>item # </li> 
                </ul>
            </div>
        </div>
        <div id="currentscent">
            <div id="recipe"> 

                <h4>- Celebration Blend -</h4>
                <ul>
                    <li>Diced Ginger </li>
                    <li>Grapefruit Peels </li>
                    <li>Frankincese Oil </li>       
                </ul>
                <p>
                 Lorem ipsum lorem dadsum doodsum lercem vi can ojr <br> ig thn sas vbg 
                 Lorem ipsum lorem dadsum doodsum<br> lercem vi can ojr ig thn sas vbg 
                </p>
            </div>
            <div id="rec">
                <img src="recimg.jpg"/>
            </div>
        </div>
    </div> 
```

Javascript：

```
$(function() {
$('a[href=scent2.html]').click(function() {
    $('#recipe').load('scent2.html');
   return false;
}); 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:59:58.100

您没有关闭 jQuery 文档就绪事件。代码应如下所示：

```
 $(function() {
     $('a[href="scent2.html"]').click(function() {
       $('#recipe').load('scent2.html'); 
       return false;
     });
   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T18:53:08.360

尝试检查加载文件是否出错

```
<script>
$("#success").load("/not-here.php", function(response, status, xhr) {
  if (status == "error") {
    var msg = "Sorry but there was an error: ";
    $("#error").html(msg + xhr.status + " " + xhr.statusText);
  }
});
  </script> 
```

> 编辑

确保您的呼叫符合同源政策。来自 Jquery 文档网站

```
Due to browser security restrictions, most "Ajax" requests are subject to the same origin policy; the request can not successfully retrieve data from a different domain, subdomain, or protocol. 
```

`file:// protocol`因此，如果您的网站正在使用`http`or`https`等​​加载，则尝试加载 using将引发错误。

# css - 具有相同字符的样式总和在css中编码错误？

> ID：15771979
> 
> 赞同：0
> 
> 时间：2013-04-02T18:48:50.070
> 
> 标签：css, styles

我的 css 似乎没有被拾取，我遇到了问题。我有 3 种不同类型的具有相同字符的样式。奇怪的是，当我应用`<div class = "block halfleft">..</div>`它时，它会显示正确的样式，但`<div class = "twoblock halfleft">`似乎不起作用！任何想法是什么原因造成的？

CSS

```
#member {
        padding: 0;
}

#member .block {
        width: 960px;
        margin-bottom: 40px;
        padding-left:30px;
        height: 475px;
        float: left;
        text-align: left;   
    }   
#member .twoblock {
        width: 960px;
        margin-bottom: 0;
        padding-left:75px;
        padding-bottom: 75px;       
        height: 100%;
        float: left;
        text-align: left;   
    }
#member .threeblock {
        width: 960px;
        margin-bottom: 0;
        padding-left:75px;
        padding-bottom: 75px;       
        height: 500px;
        background-color: #fff;
        float: left;
        text-align: left;   
    }
#member .block.halfleft, #member .twoblock.halfleft, #member .threeblock.halfleft{
        width: 520px;   
        height: 240px;  
        float: left;
        padding-top: 25px;
    }
#member .block.halfright, #member .twoblock.halfright, #member .threeblock.halfright{
        width: 350px;
        height: 240px;
        float: left;
        padding-top: 55px;      

    } 
```

页

```
//WORKS://
<div class="block">
    <div class="block halfleft">//text//</div>
        <div class="block halfright">//text//</div>
</div>

//DOESNT WORK BUT WHAT I WANT TO MAKE WORKING://
<div class="twoblock">
    <div class="twoblock halfleft">//text//</div>
        <div class="twoblock halfright">//text//</div>
</div>

//WORKS://
<div class="twoblock">
    <div class="block halfleft">//text//</div>
        <div class="block halfright">//text//</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:52:05.910

你有一些填充问题！在 .twoblock > .twoblock 和其他一些情况下，75px 会翻倍。避免这种情况的简单方法是添加

```
box-sizing:border-box; 
```

对于您的所有定义，这意味着填充将包含在定义的宽度中，而不是添加到其中。

[http://jsfiddle.net/8gzPh/](http://jsfiddle.net/8gzPh/)

# jquery - jQuery 行抛出“$.browser is undefined”错误

> ID：15771981
> 
> 赞同：0
> 
> 时间：2013-04-02T18:49:03.457
> 
> 标签：jquery, ruby-on-rails-3, ruby-on-rails-3.2

我一直在研究我拥有的 Rails 3.2 应用程序的另一个分支，当我切换回主应用程序时，没有任何工作。Firebug 告诉我，我有一堆不同的 jQuery 插件，它们只是因为这个错误而失败：

```
$.browser is undefined 
```

这个调用是由 4 个不同的插件发出的，它们都失败了，这导致我的页面退出渲染。我无法弄清楚问题所在。我的 application.js 看起来像这样：

```
//= require jquery
//= require jquery_ujs
//= require jquery.ui.autocomplete
//= require jquery.ui.sortable
//= require jquery.ui.tabs
//= require jquery.ui.dialog
//= require jquery.ui.Multiselect
//= require jquery.ui.effect-highlight  
//= require jquery.corner
//= require jquery.cycle.lite
//= require jquery.deserialize
//= require jquery.form
//= require jquery.ifixpng
//= require jquery.livequery.min
//= require jquery.Localisation.min
//= require jquery.query-2.1.7
//= require jquery.shadow
//= require jquery.tablesorter.min
//= require jquery.tools.min
//= require jquery.urldecoder.min
//= require magiczoom
//= require colorpicker
//= require jquery.ScrollTo.min
//= require jquery.ba-bbq.min
//= require_tree .
//= require dataTables/jquery.dataTables
//= require dataTables/jquery.dataTables.api.fnSetFilteringDelay 
```

任何帮助深表感谢。我确定我在这里遗漏了一些简单的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T18:50:23.960

我的猜测是您使用的 jQuery 1.9+ 已经删除了 $.browser。您需要使用[jQuery 迁移插件](https://github.com/jquery/jquery-migrate/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T18:51:19.207

浏览器自 jQuery 1.3 起已弃用，并已在 jQuery 1.9 中删除

有关更多信息，请参阅[文档](http://api.jquery.com/jQuery.browser/)。

> 描述：包含用户代理的标志，从 navigator.userAgent 读取。我们建议不要使用此属性；请尝试改用特征检测（参见 jQuery.support）。jQuery.browser 可能会在 jQuery 的未来版本中移动到插件中。

正如他们所说，使用[navigation.userAgent JavaScript 属性](https://developer.mozilla.org/en-US/docs/DOM/window.navigator.userAgent)来检测浏览器。或者使用旧版本的 jQuery，但这不是我的首选。

# c# - 从调用的 WebMethod 更新 UpdatePanel

> ID：15771988
> 
> 赞同：2
> 
> 时间：2013-04-02T18:49:21.887
> 
> 标签：c#, jquery, asp.net, updatepanel, webmethod

我有这个代码：

```
<script type="text/javascript" language="javascript">
    $(document).ready(function () {
        $('#refreshDocuments').click(function () {
            var areaId = 42;
            $.ajax({
                type: "POST",
                url: "Test.aspx/TimeTest",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    alert(data.d);
                }
            });
        });
    });
</script> 
```

.....................

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
    <ContentTemplate>
        <asp:Label ID="lblTime" runat="server" Text="Label"></asp:Label>
    </ContentTemplate>
</asp:UpdatePanel> 
```

...................测试.cs

```
[System.Web.Services.WebMethod]
    private void TimeTest()
    {
        lblTime.Text = DateTime.Now.ToString();
        UpdatePanel1.Update();``
    } 
```

当我按下这个按钮时调用 TimeTest 方法：

```
<id="refreshDocuments">Test</a> 
```

我的问题是：如何更新标签以满足我的需求？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T19:15:26.530

实际上我的意思是一个标签（我的错误）。一路走来，不能在`TimeTest`方法中刷新UpdatePanel。此外，此方法必须`public static`允许使用`jQuery.ajax`JavaScript 中的方法异步调用它。在此处阅读更多内容：[使用 jQuery 直接调用 ASP.NET AJAX 页面方法](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)

您可以做的是使用`LinkButton`控件并将其注册`AsyncPostBackTrigger`为 UpdatePanel 并在此 LinkBut​​ton 的 Click 事件处理程序中执行所有工作人员

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
    <ContentTemplate>
        <asp:Label ID="lblTime" runat="server" Text="Label"></asp:Label>
    </ContentTemplate>
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="refreshDocuments" />
    </Triggers>
</asp:UpdatePanel>
<asp:LinkButton runat="server" ID="refreshDocuments" 
    Text="Click Me" OnClick="refreshDocuments_OnClick" />

protected void refreshDocuments_OnClick(object sender, EventArgs e)
{
    //refresh controls in UpdatePanel1
    //UpdatePanel1 will be refreshed automatically
} 
```

# python - 为什么 os.getcwd() 在 Windows 上返回 System32 路径（sublime text 2 插件）？

> ID：15771991
> 
> 赞同：1
> 
> 时间：2013-04-02T18:49:33.553
> 
> 标签：python, sublimetext2

所以我正在研究一个 ST2 插件，并且需要获取当前路径，所以我做了：

```
import os
os.getcwd() 
```

我很惊讶它返回 C:\Windows\System32 .. 相反，我不得不做类似的事情：

```
import sublime
dir = sublime.packages_path()
package_path = os.path.join(dir, 'NAME_OF_YOUR_PACKAGE') 
```

我正在寻找有关返回**System32**路径的原因的解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:53:47.930

getcwd() 将返回 Python 的当前工作目录。不是运行脚本的目录。

# asp.net - 重写视频的url

> ID：15771992
> 
> 赞同：1
> 
> 时间：2013-04-02T18:49:36.013
> 
> 标签：asp.net, video, url-rewriting

我是 asp.net 的新手。我有一个视频网址`http://localhost/video/file.mp4`，但我想提供网址，比如`http://localhost/34567fghft/file.mp4`让网址超时，我的问题有什么解决方案吗？先生，我的英语，我一直在用这个，等待你的回答，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:19:37.973

您可以 on`Global.asax`和 on`Application_BeginRequest`获取请求的路径，拆分它，查看是否已过期，操作字符串并将他发送到错误页面，将其重写为真实路径：

```
protected void Application_BeginRequest(Object sender, EventArgs e) 
{       
    string cTheFile = HttpContext.Current.Request.Path;

    if (cTheFile.EndsWith("/file.mp4", StringComparison.InvariantCultureIgnoreCase))
    {
        // manipulate your string to see if is expired...
        string[] keys = HttpContext.Current.Request.Path.Split('/');

        // get the 34567fghft part
        if (IfExpired(keys[keys.Length - 1]))
        {
            HttpContext.Current.Response.Redirect("ExpiredMessage.aspx", true);
            return ;
        }
        else
        {
            HttpContext.Current.RewritePath("http://localhost/video/file.mp4", false);
        }
    }
} 
```

请注意，此代码是关于如何执行此操作的想法。需要一些更好的字符串操作和错误检查。

# iphone - 使用 YouTube API 和 iPhone SDK，我将如何获取有关搜索结果的信息？

> ID：15771995
> 
> 赞同：2
> 
> 时间：2013-04-02T18:49:44.267
> 
> 标签：iphone, ios, search, youtube-api

我正在尝试使用查询来简单地搜索视频，使用以下代码可以完美地工作。

```
 // Create a service object for executing queries
GTLServiceYouTube *service = [[GTLServiceYouTube alloc] init];
// Services which do not require sign-in may need an API key from the
// API Console
service.APIKey = @"AIzaSyA-e4NldR2o8vYPpL6IcAcMH3HSnEpPPJY";
// Create a query
GTLQueryYouTube *query = [GTLQueryYouTube queryForSearchListWithPart:@"id,snippet"];
query.maxResults = 10;
query.q = searchBar.text;
query.videoEmbeddable = @"true";
query.type = @"video";
//query.country = @"US";
// Execute the query
GTLServiceTicket *ticket = [service executeQuery:query
                               completionHandler:^(GTLServiceTicket *ticket, id object, NSError *error) {
                                   // This callback block is run when the fetch completes
                                   if (error == nil) {
                                       GTLYouTubeSearchListResponse *products = object;

                                       [videoArray removeAllObjects];
                                       // iteration of items and subscript access to items.
                                       for (GTLYouTubeSearchResult *item in products) {

                                           NSMutableDictionary *dictionary = [item JSONValueForKey:@"id"];

                                           NSLog(@"%@", [dictionary objectForKey:@"videoId"]);
                                           YoutubeVideo *video = [[YoutubeVideo alloc]init];
                                           [video setLblTitle:item.snippet.title];

                                           //Get youtube video image
                                           [video setImgIconURL:[NSURL URLWithString:item.snippet.thumbnails.defaultProperty.url]];

                                           [video setLblVideoURL:[dictionary objectForKey:@"videoId"]];

                                           [video setLblChannelTitle:item.snippet.channelTitle];
                                           [videoArray addObject:video];

                                       }
                                       reloadData = YES;
                                       [tableView reloadData];

                                       //Download images asynchronously
                                       [NSThread detachNewThreadSelector:@selector(downloadImages)
                                                                toTarget:self
                                                              withObject:nil];
                                   }else{
                                       NSLog(@"Error: %@", error.description);
                                   }
                               }]; 
```

但是，现在我想显示有关视频的某些信息。我可以从中得到一些信息

```
 item.snippet 
```

但我还需要获取视频持续时间和观看次数。如何使用 Youtube API 3.0 获取它们？我也有一个想法尝试为此使用 GData，但它实际上使加载时间增加了三倍

```
 NSString *JSONString = [NSString stringWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"https://gdata.youtube.com/feeds/api/videos/%@?v=2&alt=json", [video lblVideoURL]]] encoding:NSUTF8StringEncoding error:nil ]; 
```

如何获取视频的时长以及视频的观看次数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T07:57:28.327

从搜索 API 收集 id 并执行另一个视频列表 API 调用是完成您想要实现的目标的正确方法。视频列表 API 调用可以将多个视频 id 以逗号分隔在同一个调用中。额外的调用不应考虑耗尽，因为这是API v3 上的[预期行为：](https://code.google.com/p/gdata-issues/issues/detail?id=4332)

> *项目成员 #1 je...@google.com*
> 
> 这是**预期的行为**，不太可能改变。由于 search.list() 方法可以返回频道、视频和播放列表，因此只有对所有这些资源类型有意义的属性才会在搜索响应中返回。如果您需要获取任何其他属性，则需要对 videos.list() 等进行后续请求。请注意，您最多可以将 50 个视频 ID 传递给 videos.list()，因此您可以在单个 video.list() 调用中有效地查找整个页面的 search.list() 结果。

如果您尝试[https://developers.google.com/youtube/v3/docs/videos/list#try-it](https://developers.google.com/youtube/v3/docs/videos/list#try-it)，您将**contentDetails,statistics**设置为部分，您应该能够得到以下结果：

> "contentDetails": { "duration": "PT20M38S", "dimension": "2d", "definition": "hd", "caption": "false", "licensedContent": false },
> 
> “统计”：{“viewCount”：“191”，“likeCount”：“7”，“dislikeCount”：“0”，“favoriteCount”：“0”，“commentCount”：“0”}

**PT20M38S**表示 20 分 38 秒，基于 ISO 8601 ( [http://en.wikipedia.org/wiki/ISO_8601](http://en.wikipedia.org/wiki/ISO_8601) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-28T15:27:54.477

搜索查询仅接受 ID 和 Snippet 作为部分。如果您更改为视频列表查询，您可以包含其他部分，但您必须使用其中一个过滤器。

我认为您必须通过搜索查询获取视频 ID，然后按 ID（您获得的 ID）过滤另一个查询（现在是视频查询），而不是获得您搜索的视频的所有其他信息。

问题是我在获取视频 ID 时遇到问题，我认为 API 使用“标识符”一词而不是“id”，因为它是 Objective-c 的保留词。

编辑：是的，这只是时间问题，只需请求我的 GTLYoutubeSearchResponse.JSON，然后按照我的意愿进行操作。

第一个查询：

```
GTLQueryYouTube *query = [GTLQueryYouTube queryForSearchListWithPart:@"id,snippet"];
query.maxResults = 10;
query.q = @"iphone";
query.fields = @"items(id,snippet)";
query.order = @"viewCount";
//query.channelId = @"UCsnbNwitAF9BzjjdMfRyK2g";//Kavaco

[appDelegate.service executeQuery:query
    completionHandler:^(GTLServiceTicket *ticket,
                        id object,
                        NSError *error) {
        if (error == nil) {
            appDelegate.videos = object;

            [self performSegueWithIdentifier:@"videoList" sender:self];

        }
        else {
            NSLog(@"%@", error.description);
        }
    }]; 
```

第二个查询：在我的 TableViewController 中，在我的 cellForRowAtIndexPath 中，我对找到的每个视频进行另一个查询。确保只请求您需要的变量以避免花费您的积分，在我的情况下，我只请求 viewCount。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"myCell" forIndexPath:indexPath];

GTLYouTubeVideo *video = appDelegate.videos[indexPath.row];

NSMutableDictionary *videoIdJson = [video.JSON objectForKey:@"id"];
NSString *videoId = [videoIdJson objectForKey:@"videoId"];

cell.textLabel.text = video.snippet.title;

GTLQueryYouTube *query = [GTLQueryYouTube queryForVideosListWithPart:@"statistics"];
query.identifier = videoId;
query.maxResults = 1;
query.fields = @"items/statistics(viewCount)";

[appDelegate.service executeQuery:query
                completionHandler:^(GTLServiceTicket *ticket,
                                    id object,
                                    NSError *error) {
                    if (error == nil) {
                        GTLYouTubeVideoListResponse *detalhe = object;

                        NSMutableDictionary *responseJSON = detalhe.JSON;
                        NSArray *tempArray = [responseJSON objectForKey:@"items"];
                        NSMutableDictionary *items = tempArray[0];
                        NSMutableDictionary *statistics = [items objectForKey:@"statistics"];

                        _views = [[NSString alloc] initWithFormat:@"Views: %@",[statistics objectForKey:@"viewCount"]];
                        cell.detailTextLabel.text = _views;

                    }
                    else {
                        NSLog(@"%@", error.description);
                    }
                }];

cell.detailTextLabel.text = _views;

return cell;
} 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-27T22:11:22.240

最好的方法是：

```
if (!service) {
        service = [[GTLServiceYouTube alloc] init];
        service.shouldFetchNextPages = YES;
        service.shouldFetchInBackground = YES;
        service.retryEnabled = YES;
        service.APIKey = @"AIzaSyDSO2JPnM_r9VcDrDJJs_d_7Li2Ttk2AuU";
    }
    [youtubeList removeAllObjects];

    GTLQueryYouTube *query = [GTLQueryYouTube queryForSearchListWithPart:@"id"];
    query.maxResults = 50;
    query.q = withText;
    query.fields = @"items(id)";
    query.order = @"viewCount";
    query.type = @"video";
//    query.videoDuration = @"long";//any-long-medium-short

    __block NSInteger incrementRequest = 0;
    [service executeQuery:query completionHandler:^(GTLServiceTicket *ticket, id object, NSError *error) {
        if (error) {
            NSLog(@"Error is!! = %@", error.localizedDescription);
            return;
        }
        GTLYouTubeVideoListResponse *idsResponse = object;
        for (GTLYouTubeVideoListResponse *videoInfo in object) {
            [youtubeList addObject:videoInfo.JSON];

            GTLQueryYouTube *query2 = [GTLQueryYouTube queryForVideosListWithIdentifier:[[videoInfo.JSON valueForKey:@"id"] valueForKey:@"videoId"] part:@"id,contentDetails,snippet,statistics"];
            query2.maxResults = 1;
            query2.fields = @"items(id,contentDetails,snippet,statistics)";
            query2.order = @"viewCount";

            [service executeQuery:query2 completionHandler:^(GTLServiceTicket *ticket, id object, NSError *error) {
                if (error) {
                    NSLog(@"Error is!! = %@", error.localizedDescription);
                    return;
                }
                GTLYouTubeVideoListResponse *detalhe = object;

                for (NSMutableDictionary *tmpDict in youtubeList) {
                    if ([[[tmpDict valueForKey:@"id"] valueForKey:@"videoId"] isEqualToString:[[[detalhe.JSON valueForKey:@"items"] objectAtIndex:0] valueForKey:@"id"]]) {
                        [tmpDict removeObjectForKey:@"id"];
                        //condition personal
                        if (![Utils parseISO8601TimeIsGrater30:[[[[detalhe.JSON valueForKey:@"items"] objectAtIndex:0] valueForKey:@"contentDetails"] valueForKey:@"duration"]]) {
                            BOOL isBlockedInUs = NO;
                            for (NSString *countryRestric in [[[[[detalhe.JSON valueForKey:@"items"] objectAtIndex:0] valueForKey:@"contentDetails"] valueForKey:@"regionRestriction"] valueForKey:@"blocked"]) {
                                if ([countryRestric isEqualToString:@"US"]) {
                                    isBlockedInUs = YES;
                                    break;
                                }
                            }
                            if (!isBlockedInUs) {
                                [tmpDict addEntriesFromDictionary:detalhe.JSON];
                                [tmpDict setValue:[[[[detalhe.JSON valueForKey:@"items"] objectAtIndex:0] valueForKey:@"snippet"] valueForKey:@"publishedAt"] forKey:@"publishedAt"];
                            } else {
                                [youtubeList removeObject:tmpDict];
                            }
                        } else {
                            [youtubeList removeObject:tmpDict];
                        }

                        break;
                    }
                }

                incrementRequest ++;
                if ([idsResponse.items count] == incrementRequest) {
                    //Finish
                    [self.tableView reloadData];
                }
            }];
        }
    }]; 
```

# big-ip - BigIP F5 irule http_response 变量在 lb_selected 事件发生之前被重置

> ID：15771997
> 
> 赞同：1
> 
> 时间：2013-04-02T18:49:47.113
> 
> 标签：big-ip, f5

由于我在 F5 负载平衡器方面没有受过良好的培训，因此我将尽可能地进行描述。基本上我有一个看起来像这样的 iRule（伪代码）：

```
when HTTP_REQUEST { 
set host_num=0
if uri contains /serv prefix
       set host_num=(digit after /serv) 

}

when LB_SELECTED {
    if { $host_num != 0 } {
            #reselect the appropriate pool member that corresponds to the host_num
    }
} 
```

我的问题基本上是我的 host_num 变量在我在 HTTP_REQUEST 中设置它和我在 LB_SELECTED 事件中实际需要它之间丢失了。

该系统多年来一直运行良好。直到几天前，当我尝试添加另一个强制所有 http 流量为 http 1.0 而不是 1.1 的 irule 时。我已经删除了这个 irule，但这个问题仍然存在。HTTP 配置文件中是否有我缺少的设置？我已经检查了我的其他 irules，但它们都没有可能覆盖它的 host_num 变量，那么会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T10:30:13.287

我相信你这里有一个 tcl 错误，变量赋值不能包含等号。

例如。

```
set host_num 0
...
if { .... } {
    set host_num (....)
} 
```

您是否在 /var/log/ltm 日志中看到任何错误消息？

我会尝试在代码中添加日志语句来跟踪变量值的变化。

# c# - 如何使用 C# 代码授予用户启动和停止特定服务的权限

> ID：15771998
> 
> 赞同：5
> 
> 时间：2013-04-02T18:49:47.647
> 
> 标签：c#, service, permissions

如何仅使用 C# 代码授予特定用户（可能是 NET SERVICE 用户）启动和停止特定服务的权限。

我需要生成的代码来处理从 Windows XP 到 Windows 8 的所有内容。

[编辑] 我已经有一个可以工作的服务，以及一个设置文件夹权限、安装服务、启动它等的安装例程。

该服务检查一个 url 以查看是否有更新，如果有，则下载它，并启动一个更新程序来更新服务（并自行终止）。

更新程序更新服务 exe（和其他需要的文件），并需要重新启动服务。

我从研究中知道，可以授予服务用户（在这种情况下为网络服务）启动和停止单个服务的权限，但我不知道用代码执行此操作的 api。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T19:31:41.253

我从其他地方得到了一些线索，并设法弄清楚：

```
[StructLayoutAttribute(LayoutKind.Sequential)]
struct SECURITY_DESCRIPTOR {
    public byte revision;
    public byte size;
    public short control;
    public IntPtr owner;
    public IntPtr group;
    public IntPtr sacl;
    public IntPtr dacl;
}

[DllImport("advapi32.dll", SetLastError = true)]
static extern bool QueryServiceObjectSecurity(IntPtr serviceHandle, 
    System.Security.AccessControl.SecurityInfos secInfo, 
    ref SECURITY_DESCRIPTOR lpSecDesrBuf, 
    uint bufSize, 
    out uint bufSizeNeeded);

[DllImport("advapi32.dll", SetLastError = true)]
static extern bool QueryServiceObjectSecurity(SafeHandle serviceHandle, 
    System.Security.AccessControl.SecurityInfos secInfo, 
    byte[] lpSecDesrBuf, 
    uint bufSize, 
    out uint bufSizeNeeded);

[DllImport("advapi32.dll", SetLastError = true)]
static extern bool SetServiceObjectSecurity(SafeHandle serviceHandle, 
    System.Security.AccessControl.SecurityInfos secInfos, 
    byte[] lpSecDesrBuf);

public void SetServicePermissions(string service, string username) {
    System.ServiceProcess.ServiceController sc = new System.ServiceProcess.ServiceController(service, ".");
    ServiceControllerStatus status = sc.Status;
    byte[] psd = new byte[0];
    uint bufSizeNeeded;
    bool ok = QueryServiceObjectSecurity(sc.ServiceHandle, SecurityInfos.DiscretionaryAcl, psd, 0, out bufSizeNeeded);
    if (!ok) {
        int err = Marshal.GetLastWin32Error();
        if (err == 122 || err == 0) { // ERROR_INSUFFICIENT_BUFFER
            // expected; now we know bufsize
            psd = new byte[bufSizeNeeded];
            ok = QueryServiceObjectSecurity(sc.ServiceHandle, SecurityInfos.DiscretionaryAcl, psd, bufSizeNeeded, out bufSizeNeeded);
        } else {
            throw new ApplicationException("error calling QueryServiceObjectSecurity() to get DACL for " + _name + ": error code=" + err);
        }
    }
    if (!ok)
        throw new ApplicationException("error calling QueryServiceObjectSecurity(2) to get DACL for " + _name + ": error code=" + Marshal.GetLastWin32Error());

    // get security descriptor via raw into DACL form so ACE
    // ordering checks are done for us.
    RawSecurityDescriptor rsd = new RawSecurityDescriptor(psd, 0);
    RawAcl racl = rsd.DiscretionaryAcl;
    DiscretionaryAcl dacl = new DiscretionaryAcl(false, false, racl);

    // Add start/stop/read access
    NTAccount acct = new NTAccount(username);
    SecurityIdentifier sid = (SecurityIdentifier) acct.Translate(typeof(SecurityIdentifier));
    // 0xf7 is SERVICE_QUERY_CONFIG|SERVICE_CHANGE_CONFIG|SERVICE_QUERY_STATUS|
    // SERVICE_START|SERVICE_STOP|SERVICE_PAUSE_CONTINUE|SERVICE_INTERROGATE
    dacl.AddAccess(AccessControlType.Allow, sid, 0xf7, InheritanceFlags.None, PropagationFlags.None);

    // convert discretionary ACL back to raw form; looks like via byte[] is only way
    byte[] rawdacl = new byte[dacl.BinaryLength];
    dacl.GetBinaryForm(rawdacl, 0);
    rsd.DiscretionaryAcl = new RawAcl(rawdacl, 0);

    // set raw security descriptor on service again
    byte[] rawsd = new byte[rsd.BinaryLength];
    rsd.GetBinaryForm(rawsd, 0);
    ok = SetServiceObjectSecurity(sc.ServiceHandle, SecurityInfos.DiscretionaryAcl, rawsd);
    if (!ok) {
        throw new ApplicationException("error calling SetServiceObjectSecurity(); error code=" + Marshal.GetLastWin32Error());
    }
} 
```