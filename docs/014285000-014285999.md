# StackOverflow 问答 14285000-14285999

# php - curl命令行到php

> ID：14285000
> 
> 赞同：0
> 
> 时间：2013-01-11T19:07:46.133
> 
> 标签：php, linux, curl

我有一个命令，我在转换为 php 时遇到问题。

curl -i -X POST -u user:userpass --url [http://cloud.netelignet.ca/virtual_machines/:virtual_machine_id/startup.xml](http://cloud.netelignet.ca/virtual_machines/:virtual_machine_id/startup.xml)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:18:30.947

我认为它等同于以下内容：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://cloud.netelignet.ca/virtual_machines/:virtual_machine_id/startup.xml");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$username = 'user'; $password = 'userpass';
curl_setopt($ch, CURLOPT_USERPWD, "$username:$password");
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
curl_setopt($ch, CURLOPT_HEADER, 1);
$output = curl_exec($ch);
$info = curl_getinfo($ch);
curl_close($ch); 
```

# r - 查找整数向量中奇数的索引

> ID：14285004
> 
> 赞同：7
> 
> 时间：2013-01-11T19:07:59.207
> 
> 标签：r, integer

假设我们有一些向量：

```
someVector = c(1, 3, 4, 6, 3, 9, 2, -5, -2) 
```

我想得到一个包含`someVector`所有奇数元素位置的向量

所以在这种情况下，它看起来像......

```
resultVector = c(1, 2, 5, 6, 8) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-11T19:09:39.767

```
> which(someVector %% 2 == 1)
[1] 1 2 5 6 8 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-11T19:19:11.903

```
library(schoolmath)
which(is.odd(someVector))
[1] 1 2 5 6 8 
```

只是为了好玩，这里的`is.odd`函数代码：

```
function (x) 
{
  start <- 1
  end <- length(x) + 1
  while (start < end) {
    y <- x[start]
    if (y == 0) {
      cat("Please enter a number > 0")
      end
    }
    test1 <- y/2
    test2 <- floor(test1)
    if (test1 != test2) {
      if (start == 1) {
        result = TRUE
      }
      else {
        result <- c(result, TRUE)
      }
    }
    else {
      if (start == 1) {
        result = FALSE
      }
      else {
        result <- c(result, FALSE)
      }
    }
    start <- start + 1
  }
  return(result)
} 
```

绝对不要使用这个功能！

# java - ImageView 中的图像被拉伸 - Android

> ID：14285007
> 
> 赞同：2
> 
> 时间：2013-01-11T19:08:07.270
> 
> 标签：java, android, image, imageview

我正在尝试在我的屏幕上显示一个小图像。我希望它是一个小正方形。使用下面的代码，它显示为一个长而扁平的矩形。我附上了一张下面的图片。

**爪哇代码**

```
ImageView q1Image = (ImageView)findViewById(R.id.q1Image);
q1Image.setScaleType(ScaleType.FIT_XY); 
```

**xml代码**

```
<TableRow
    android:id="@+id/row4"
    android:layout_width="0dip"
    android:layout_height="wrap_content"
    android:layout_weight="1" >

    <ImageView
        android:id="@+id/q1Image"
        android:layout_width="10dp"
        android:layout_height="10dp"
        android:layout_weight=".1"
        android:textSize="8sp"
        android:gravity="center_horizontal" /> 
```

![测试](../Images/d204f34b1689bf851028b3f4003f24ac.png)

**编辑** 如果我使宽度和高度相等`50dp`，图像会变大，但仍然是一个扁平的矩形。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-11T19:11:34.550

您缩放图像错误。以下是所有比例类型：

![在此处输入图像描述](../Images/e46c72a865f036bf98c9aad11d7c4dfc.png)

顶行 (lr) 中心、centerCrop、centerInside。

底行 (lr)：fitCenter、fitStart、fitEnd、fitXY。

您可能需要`fitCenter`：

```
q1Image.setScaleType(ScaleType.FIT_CENTER); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T19:12:37.473

FIT_XY 将拉伸您的图像以适合所有您的 ImageView。如果您的 ImageView 将图像置于中心，请使用比例类型 fitCenter

```
q1Image.setScaleType(ScaleType.FIT_CENTER); 
```

有关其他选项，请参阅[http://developer.android.com/reference/android/widget/ImageView.ScaleType.html 。](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T23:53:57.637

如果没有完整的布局 XML，这只是推测，但是看到您似乎没有通过更改比例类型来解决问题，这里有一些其他建议：

1.  如果 的 为零不是更好`layout_weight`吗`ImageView`？

2.  你是在指定`android:stretchColumns`吗`TableLayout`？

3.  图像看起来像是被拉伸以匹配下面文本的宽度。你的表中有多少列？看起来其他行中的文本在第 0 列（与第一行中的图像一样），第一行中的文本在第 1 列。如果要将其他行的第 0 列留空，则需要`android:layout_column`在文本视图上指定。

# python - Python 单元测试循环函数

> ID：14285010
> 
> 赞同：0
> 
> 时间：2013-01-11T19:08:13.187
> 
> 标签：python, unit-testing

这是1的后续[问题](https://stackoverflow.com/questions/14282783/call-a-python-unittest-from-another-script-and-export-all-the-error-messages#comment19835851_14282783)

我需要在一个循环中用两个给定的情况测试这个函数。但是，根据打印的结果，似乎只检查了第一次迭代？这有关系`runner.run(unittest.makeSuite(MyTestCase))`吗？

```
import unittest
from StringIO import StringIO
import rice_output

class MyTestCase(unittest.TestCase):
    def setUp(self):
        #####Pre-defined inputs########
        self.dsed_in=[1,2]
        self.a_in=[2,3]
        self.pb_in=[3,4]

        #####Pre-defined outputs########
        self.msed_out=[6,24]

        #####TestCase run variables########
        self.tot_iter=len(self.a_in)

def testMsed(self):
    for i in range(self.tot_iter):
        print i
        fun = rice_output.msed(self.dsed_in[i],self.a_in[i],self.pb_in[i])
        value = self.msed_out[i]
        testFailureMessage = "Test of function name: %s iteration: %i expected: %i != calculated: %i" % ("msed",i,value,fun)
        return self.assertEqual(round(fun,3),round(self.msed_out[i],3),testFailureMessage)

from pprint import pprint
stream = StringIO()
runner = unittest.TextTestRunner(stream=stream)
result = runner.run(unittest.makeSuite(MyTestCase))
print 'Tests run ', result.testsRun
print 'Errors ', result.errors 
```

这是他的输出：

```
0
Tests run  1
Errors  []
[]
Test output
testMsed (__main__.MyTestCase) ... ok

----------------------------------------------------------------------
Ran 1 test in 0.000s

OK 
```

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T19:10:19.187

删除return语句

```
def testMsed(self):
  for i in range(self.tot_iter):
    print i
    fun = rice_output.msed(self.dsed_in[i],self.a_in[i],self.pb_in[i])
    value = self.msed_out[i]
    testFailureMessage = "Test of function name: %s iteration: %i expected: %i != calculated: %i" % ("msed",i,value,fun)
    self.assertEqual(round(fun,3),round(self.msed_out[i],3),testFailureMessage) 
```

# jquery - jQuery Validator 接受无效日期

> ID：14285011
> 
> 赞同：-2
> 
> 时间：2013-01-11T19:08:16.337
> 
> 标签：jquery, jquery-plugins, jquery-validate

为什么 jQuery Validator 接受这个作为有效日期？

01/123/1

如果您输入该日期，它将通过验证。如何确保用户输入的日期有效？我不想使用日期选择器。

链接到验证器： http: [//docs.jquery.com/Plugins/Validation/Methods/date](http://docs.jquery.com/Plugins/Validation/Methods/date)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T22:08:32.560

由于内置日期功能在 Firefox 中不起作用，这里有一个适用于所有浏览器的扩展方法。这还会检查以确保日期有效，99/99/9999 将不起作用。

```
 $.validator.addMethod(
        "mmddyyyy",
        function(value, element) {
            var match = /^(\d{1,2})\/(\d{1,2})\/(\d{4})$/.exec(value),
            isDate = function (m, d, y) {
                return m > 0 && m < 13 && y > 0 && y < 32768 && d > 0 && d <= (new Date(y, m, 0)).getDate();
            };
            return match && isDate(match[1], match[2], match[3]);
        },
        "Please enter a date in the format mm/dd/yyyy."
    );

    $('#Form1').validate({
        rules: {
            birthDate: { required: true, mmddyyyy: true }
        }
    });

}); 
```

# javascript - JavaScript 语法检查

> ID：14285012
> 
> 赞同：0
> 
> 时间：2013-01-11T19:08:40.500
> 
> 标签：javascript, jquery, syntax

伙计们，

快速提问；有人可以检查这种语法是否正确吗？我通过 firefox 1.7.3 和 ie8 遇到了关于此问题的错误，我终生无法得到它。

```
<script>window.jQuery || document.write('<script src="/js/jquery-1.7.1.min.js"><\/script>')</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T19:13:55.357

你不需要`/`在你`document.write`的初学者中转义（`\`失败是因为它不能识别`\/`为有效的转义序列）。

但是，当您删除它时，`</script>`会出现这会使 XML 解析器失败。(`<script>...</script>`是解析器正在寻找的；它不关心它是否在（我们所看到的）字符串中）因此，引入了连接：`</scr'+'ipt>`.

总之，我们有：

```
<script>window.jQuery || document.write('<script src="/js/jquery-1.7.1.min.js"></scr'+'ipt>');</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T19:10:49.050

当解析器遇到第一个`</script>`它结束脚本标签。所以这个修复应该有效：

```
<script>
window.jQuery || document.write('<script src="/js/jquery-1.7.1.min.js"></sc'+'ript>');
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T19:15:42.583

我可以建议一种不同的动态脚本加载方法。例如：

```
var script= document.createElement('script');
script.type= 'text/javascript';
script.src= 'helper.js';
//append script somewhere on the dom 
```

# macos - Git instaweb：浏览器不可用

> ID：14285017
> 
> 赞同：5
> 
> 时间：2013-01-11T19:08:52.287
> 
> 标签：macos, git

我正在尝试设置`git instaweb`在 Chrome 中打开。我已经设置了默认浏览器，如下所示：

```
git config --global web.browser chrome 
```

这种变化反映在我的 global`.gitconfig`中，并且[git-web--browse](http://www.kernel.org/pub/software/scm/git/docs/git-web--browse.html)文档说 chrome 可以作为传递的东西。

当我运行`git instaweb`这就是我得到的：

```
The browser chrome is not available as 'chrome'.
http://127.0.0.1:1234 
```

我也尝试过`google-chrome`，同样的结果发生了。如何将网络浏览器设置为在 chrome 中实际打开？

运行 OSX 10.8.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T23:09:40.223

也许它需要一个类似于[How can I configure git help to use Firefox?](https://stackoverflow.com/a/4948249/6309) ：

```
git config --global web.browser ch
git config --global browser.ch.cmd "open -a Google Chrome.app" 
```

[OP MishieMoo](https://stackoverflow.com/users/334934/mishiemoo) 报告[您](https://stackoverflow.com/questions/14285017/git-instaweb-the-browser-is-not-available/14298925#comment19912434_14298925)需要完整路径：

```
git config --global browser.ch.cmd "open -a \"/Applications/Google Chrome.app\"" 
```

> 没有绝对路径，它试图`Chrome.app`在我的当前目录中打开（不是`Applications`）

# c++ - GCC 4.1.1 不使用 tr1::unordered_map 编译一些代码

> ID：14285019
> 
> 赞同：1
> 
> 时间：2013-01-11T19:09:06.833
> 
> 标签：c++, gcc, stl, unordered-map, tr1

我有以下代码来测试一个更大程序的一个概念，我尝试在 Linux 上使用 GCC 4.1.1 进行编译。由于公司环境的限制，我不能使用更新版本的编译器，所以我必须让它编译并使用当前可用的编译器版本。

```
// test.cpp - my tr1::unordered_map usage example
#include <iostream>
#include <tr1/unordered_map>

namespace YY {

class X { public: X(int z_val = 0); private: int z; };
inline X::X(int z_val) : z(z_val) {}

enum XTE { Xt1, Xt2, Xt3 };

}

namespace std { namespace tr1 {

#define _my_tr1_hashtable_define_trivial_hash(T)        \
  template<>                                            \
    struct hash<T>                                      \
    : public std::unary_function<T, std::size_t>        \
    {                                                   \
      std::size_t                                       \
      operator()(T val) const                           \
      { return static_cast<std::size_t>(val); }         \
    }                                                     

_my_tr1_hashtable_define_trivial_hash(YY::XTE);

#undef _my_tr1_hashtable_define_trivial_hash
}}

namespace YY {
typedef std::tr1::unordered_map<long long, X*> TXM;
typedef std::tr1::unordered_map<XTE, TXM> TTXM;
}

int main()
{
    YY::TTXM m;
    std::cout << m.size();
    return 0;
} 
```

然后我尝试编译这段代码，gcc给了我以下错误：

```
$ g++ -c 测试.cpp
/usr/lib/gcc/x86_64-redhat-linux/4.1.1/../../../../include/c++/4.1.1/tr1/hashtable: Б─≤Internal:: hash_code_base, Internal::extract1st >, std::equal_to, std::tr1::hash, Internal::mod_range_hashing, Internal::default_ranged_hash, false>Б─≥:
/usr/lib/gcc/x86_64-redhat-linux/4.1.1/../../../../include/c++/4.1.1/tr1/hashtable:1014：从Б─≤std实例化： :tr1::hashtable, std::allocator >, Internal::extract1st >, std::equal_to, std::tr1::hash, Internal::mod_range_hashing, Internal::default_ranged_hash, Internal::prime_rehash_policy, false, false,真>Б─≥
/usr/lib/gcc/x86_64-redhat-linux/4.1.1/../../../../include/c++/4.1.1/tr1/unordered_map:63：从Б─≤std实例化： :tr1::unordered_map, std::equal_to, std::allocator >, false>Б─≥
/usr/lib/gcc/x86_64-redhat-linux/4.1.1/../../../../include/c++/4.1.1/bits/stl_pair.h:74：从Б─≤实例化std::pair, std::equal_to, std::allocator >, false> >Б─≥
/usr/lib/gcc/x86_64-redhat-linux/4.1.1/../../../../include/c++/4.1.1/tr1/hashtable:413: 实例化自Б─≤Internal: :extract1st, std::equal_to, std::allocator >, false> > >Б─≥
/usr/lib/gcc/x86_64-redhat-linux/4.1.1/../../../../include/c++/4.1.1/tr1/hashtable:861: 实例化自Б─≤Internal: :hash_code_base, std::equal_to, std::allocator >, false> >, Internal::extract1st, std::equal_to, std::allocator >, false> > >, std::equal_to, std::tr1:: hash, Internal::mod_range_hashing, Internal::default_ranged_hash, false>Б─≥
/usr/lib/gcc/x86_64-redhat-linux/4.1.1/../../../../include/c++/4.1.1/tr1/hashtable:1014：从Б─≤std实例化： :tr1::hashtable, std::equal_to, std::allocator >, false> >, std::allocator, std::equal_to, std::allocator >, false> > >, Internal::extract1st, std:: equal_to, std::allocator >, false> > >, std::equal_to, std::tr1::hash, Internal::mod_range_hashing, Internal::default_ranged_hash, Internal::prime_rehash_policy, false, false, true>Б─≥
/usr/lib/gcc/x86_64-redhat-linux/4.1.1/../../../../include/c++/4.1.1/tr1/unordered_map:63：从Б─≤std实例化： :tr1::unordered_map, std::equal_to, std::allocator >, false>, std::tr1::hash, std::equal_to, std::allocator, std::equal_to, std::allocator >, false > > >，假>Б─≥
test.cpp:42：从这里实例化
/usr/lib/gcc/x86_64-redhat-linux/4.1.1/../../../../include/c++/4.1.1/tr1/hashtable:863：错误：Б─≤内部： :hash_code_base::m_h1Б─≥ 类型不完整
/usr/lib/gcc/x86_64-redhat-linux/4.1.1/../../../../include/c++/4.1.1/tr1/functional:1101：错误：Б─≤声明struct std::tr1::hashБ─≥

```

test.cpp:42：从这里实例化的是

```
YY::TTXM m; 
```

如果我改变

```
typedef std::tr1::unordered_map<XTE, TXM> TTXM; 
```

进入

```
typedef std::tr1::unordered_map<XTE, TXM*> TTXM; 
```

它编译成功，但这不是我想要做的。任何想法，建议，如何使这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T19:39:03.327

它抱怨它没有哈希函数`long long`，所以只需添加

```
_my_tr1_hashtable_define_trivial_hash(long long); 
```

你应该很高兴。

* * *

PS 我认为使用 TXM* 而不是 TXM 起作用的原因是因为编译器不必解析 TXM 类型，如果它是一个指针，所以它不会走上找出它没有一切的路径它需要构造那种类型..即一个长长的散列函数。如果您稍后尝试创建 TXM 对象的实例，那么它会向您抱怨与您现在看到的类似的错误。

# javascript - 会话变量在我的脚本中没有更新

> ID：14285022
> 
> 赞同：0
> 
> 时间：2013-01-11T19:09:23.620
> 
> 标签：javascript, ruby-on-rails, ruby, session

我在玩javascript，在这里遇到了一个奇怪的问题。我在服务器端使用 Ruby on Rails。

这是我想要动态的 HTML 部分：

```
<div id="pic">
  <img src="https://graph.facebook.com/<%=@id.to_s%>/picture?type=large">
</div> 
```

`onreadystatechange`这是引发我的 AJAX 请求事件时调用的代码：

```
if (xmlhttp.readyState==4 && xmlhttp.status==200)
{
  alert(<%=@id.to_s%>);
  document.getElementById("pic").innerHTML = "<img src=\"https://graph.facebook.com/<%=@id.to_s%>/picture?type=large\">";
} 
```

基本上，我的请求是在服务器端处理变量的值的`@id`（它工作正常，如使用调试器所见）。因此，当解释 javascript 代码时，变量的值也应该根据我的期望在客户端发生变化......但它没有，这是我的问题。

我的猜测是，一旦脚本加载到浏览器中，就会评估这段代码`<%=@id.to_s%>`，而不是每次调用函数时。

有解决方法吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:27:01.330

> 我的猜测是，一旦脚本在浏览器中加载，这段代码 <%=@id.to_s%> 就会被评估，而不是每次调用函数时。

确切地。如果不是这种情况，你甚至不需要 ajax 来完成它。

> 有解决方法吗？

正确的方法是从服务器端传递您需要的任何数据，然后从`onreadystatechange`事件处理程序（您似乎已经在使用）在您的 js 上访问它。服务器响应将作为字符串在`xmlhttp.responseText`.

# c# - 为什么原生Win32难拆，.NET app拆容易？

> ID：14285025
> 
> 赞同：11
> 
> 时间：2013-01-11T19:09:43.417
> 
> 标签：c#, c++, .net, winapi, native

为什么反汇编本机 Win32 映像（例如内置 C/C++）的过程比反汇编 .NET 应用程序困难得多？

主要原因是什么？因为什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-11T19:20:37.967

.net 程序集内置于[Common Intermediate Language 中](http://en.wikipedia.org/wiki/Common_Intermediate_Language)。当 CLR 编译它以在适当的系统上运行时，它不会被编译，直到它即将被执行。CIL 有很多元数据，因此它可以编译到不同的处理器架构和不同的操作系统上（在 Linux 上，使用 Mono）。类和方法基本保持不变。

.net 还允许反射，这需要将元数据存储在二进制文件中。

C 和 C++ 代码在编译时被编译为选定的处理器架构和系统。为 Windows 编译的可执行文件不能在 Linux 上运行，反之亦然。C 或 C++ 编译器的输出是汇编指令。源代码中的函数可能不作为二进制函数存在，但以某种方式进行了优化。编译器也可以有相当激进的优化器，它们将采用逻辑结构化的代码并使其看起来非常不同。代码将更有效（在时间或空间上），但会使逆向变得更加困难。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-11T19:12:46.837

由于 .NET 的实现允许通过 CLI 和 CLR 实现 C#、VB 甚至 C/C++ 等语言之间的互操作性，这意味着必须将额外的元数据放入对象文件中以正确传输类和对象属性。这使得反汇编更容易，因为二进制对象仍然包含该信息，而 C/C++ 可以丢弃该信息，因为它不是必需的（至少对于代码的执行，当然在编译时仍然需要该信息）。

此信息通常仅限于与类相关的字段和对象。分配在堆栈上的变量在发布版本中可能没有注释，因为互操作性不需要它们的信息。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-11T19:23:09.773

另一个原因 - 大多数 C++ 编译器在生成最终二进制文件时执行的优化不是在 IL 级别对托管代码执行的。

因此，与在 IL 中具有有意义名称的函数调用相比，容器上的迭代之类的东西看起来像是本机代码的耦合`inc`/`jnc`汇编指令。生成的执行代码可能与 JIT 编译器将内联一些类似于本机编译器的调用相同（或至少接近），但可以查看的代码在 CLR 领域更具可读性。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-11T22:01:48.667

人们提到了一些原因；我会提到另一个，假设我们谈论的是*反汇编*而不是*反编译*。

x86 代码的问题在于区分代码和数据非常困难且容易出错。反汇编者必须依靠猜测才能正确完成，而且他们几乎总是会错过一些东西；相比之下，中间语言被*设计*为“反汇编”（以便 JIT 编译器可以将“反汇编”转换为机器代码），因此它们不会像您在机器代码中发现的那样包含歧义。最终结果是 IL 代码的反汇编非常简单。

如果您在谈论*反编译*，那是另一回事；它与（主要）缺乏对 .NET 应用程序的优化有关。大多数优化是由 JIT 编译器完成的，而不是 C#/VB.NET/etc。编译器，所以汇编代码几乎是源代码的 1:1 匹配，所以找出原始代码是很有可能的。但是对于本机代码，有上百万种不同的方式来翻译少量的源代码行（哎呀，即使是无操作也有无数种不同的编写方式，具有不同的性能特征！）所以很难弄清楚原始代码是什么.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-11T19:31:16.997

在一般情况下，反汇编 C++ 和 .NET 代码没有太大区别。当然，C++ 更难反汇编，因为它做了更多的优化和类似的事情，但这不是主要问题。

主要问题是名称。反汇编的 C++ 代码将包含名为 A、B、C、D、...A1 等的所有内容。除非您可以识别这种格式的算法，否则您可以从反汇编的 C++ 二进制文件中提取的信息不多。

另一端的 .NET 库中包含方法名称、方法参数、类名称和类字段名称。它使反汇编代码的理解更加容易。所有其他的东西都是次要的。

# django - django admin 的两个不同模板

> ID：14285026
> 
> 赞同：0
> 
> 时间：2013-01-11T19:10:01.873
> 
> 标签：django, django-admin

我想向我们的用户和我们的员工开放我正在开发的一个新项目的 django 管理员。我遇到的问题是用户和管理员使用软件的方式不同，并且在两组之间共享相同的界面会导致效率低下。

如果用户是或不是员工，是否可以让 django 管理员使用特定模板？还是我需要创建两个不同的管理站点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:42:47.653

您需要创建不同的 django.contrib.admin.sites.AdminSite 实例

[文档](https://docs.djangoproject.com/en/1.2/ref/contrib/admin/#adminsite-objects)

示例用法，

```
# admin.py
from django.contrib.admin.sites import AdminSite

new_admin = AdminSite(name='My New Admin Panel')

new_admin.index_template = "new_admin/index.html"

# urls.py
from myproject.admin import new_admin

(r'^new_admin/(*.)', new_admin.urls) 
```

# java - 列表顶部的文本视图，可滚动容器

> ID：14285028
> 
> 赞同：0
> 
> 时间：2013-01-11T19:10:21.227
> 
> 标签：java, android

如何使问题文本视图位于列表顶部，就好像它是列表的第一项一样，让问题根据需要向下延伸，然后在其下方启动列表，同时它们都可以滚动同一个卷轴？

```
<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scroller"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:layout_above="@+id/linearLayout2"
    android:layout_alignParentTop="true"
    android:layout_weight="4.34"
    android:fillViewport="true"
    android:scrollbars="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/question_content"
            android:layout_width="match_parent"
            android:layout_height="56dp"
            android:padding="8dip"
            android:textSize="20sp" />

        <ListView
            android:id="@+id/list"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="84dp"
            android:layout_weight="0.10" >

        </ListView>

    </LinearLayout>

</ScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:17:29.843

你不应该放在`ListView`里面`ScrollView`。改为使用`ListView.addHeaderView()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T19:20:26.677

您不需要，也可能不想要 a `ListView`in `ScrollBar`。`ListView`已经可以滚动了。您可以将 替换`ScrollView`为`RelativeView`。然后在你的“ListView”中使用

`android:layout_below="@+id/question_content"`

这应该给你你想要的。那么你甚至不应该需要`LinearLayout`

# php - 在wordpress中上传图片内存不足错误

> ID：14285029
> 
> 赞同：0
> 
> 时间：2013-01-11T19:10:23.667
> 
> 标签：php, wordpress, web-hosting

我在 WordPress 中上传图片时遇到了一些问题。

他们自己的图像大约为 1-2mb，宽度/高度相当大 1000px+ X 1000px+ 但客户希望能够上传它们并让 WordPress 重新调整大小。

但是，当尝试上传时，我收到以下错误：

**“致命错误：内存不足（分配 28573696）（试图分配 4096 字节）”**

现在我明白这意味着服务器没有足够的内存来处理图像但是当我在服务器上进行 phpinfo() 检查时它告诉我我有 256M 的内存。

那么为什么我会收到一条致命的错误消息，说我只分配了 32M 呢？

该网站本身由其他人托管，因此我无权访问 php.ini 或任何错误日志。

提前致谢，

标记，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:57:38.567

即使内存限制非常高，GD 也会耗尽内存来处理来自中级数码相机的全尺寸照片。如果您的服务器在命令行上有 ImageMagick，您可以使用它。当 ImageMagick 调整图像大小时，它使用的内存量相对较少，并且不受 PHP 内存限制的影响。

我发现了一个名为[ImageMagick Engine](http://wordpress.org/extend/plugins/imagemagick-engine/)的 WordPress 插件，它声称让 WordPress 使用 ImageMagick 而不是 GD。我自己从来没有使用过那个插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:26:31.190

`phpinfo`可能会向您显示整个服务器的 php 配置内存，而不是您正在使用的共享帐户。由于主 php 配置文件限制使用 php.ini 文件，您可能无法使用自己的 php.ini 覆盖。

尝试将下面的“定义”行添加到[wp-config.php](http://codex.wordpress.org/Editing_wp-config.php)文件开头下方的几行空白处 `<?php`：

`define('WP_MEMORY_LIMIT', '64M');`

这可能能够覆盖共享设置，为您提供更多内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T23:51:30.693

原来是托管该站点的公司限制分配的内存的问题。移到新主机，问题得到解决。

# perl - 计算文本中一组字符的出现次数

> ID：14285030
> 
> 赞同：-3
> 
> 时间：2013-01-11T19:10:28.270
> 
> 标签：perl, bash, grep, words

我想搜索包含最少参数集的文本和返回行。我能想到的最简单的例子是在字典中搜索至少包含 10 个选项中的 5 个的单词。如果我有设置“co or di na te di re ct io ns”，我会返回任何包含恰好 5 个选项的单词。结果将包括方向和坐标。

第一步是尽可能减少字典（字母，至少一半的选项..）那时我的解决方案是 1\. 使用列表将所有可能性生成到潜在的单词列表中并搜索 linux.words 2\. 迭代通过 linux.words，如果 grep 返回每个元素，则增加一个计数器，然后返回结果 counter>n

有没有更简单的方法来做到这一点？我希望 perl 中有一些我不知道的很酷的东西（我是 perl 新手）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:47:34.013

这将计算出现次数：

```
++$c while /(?=co|or|di|na|te|di|re|ct|io|ns)/g; 
```

该模式很容易构建（`join '|', map quotemeta, ...`）。

# javascript - PHP Switch case的设置值

> ID：14285031
> 
> 赞同：-2
> 
> 时间：2013-01-11T19:10:30.123
> 
> 标签：javascript

我有一个 PHP Switch 机箱。如何使用按钮的 onclick 转换“n”的值？

```
 switch (n)
     {
     case 1:
       $result = mysql_query("select * from tblRestaurants order by RestName ASC");
       break;
     case 2:
       $result = mysql_query("select * from tblCuisines order by RestName ASC");
       break;
     case 3:
       $result = mysql_query("select * from tblLocations order by RestName ASC");
       break;
      case 4:
       $result = mysql_query("select * from tblLocations order by RestName ASC");
       break;
     case 5:
       $result = mysql_query("select * from tblLocations order by RestName ASC");
       break;
     } 

onclick = (switch)n=1 
```

只是猜测

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:16:07.130

在页面加载请求返回 JSON 数据后，您可以设置 PHP 变量的唯一方法...所有 PHP 代码都在所有 HTML 之前执行，因此如果您提交一个按钮，您可以调用 java-script 函数，但是您只能使用该 onClick 调用中的 java-script 函数。如果您坚持不刷新页面，则必须使用大量 AJAX 并获取 JSON 数据返回文档。但是，如果您对页面重定向没问题，您可以将表单提交到同一页面，然后在页面顶部检查您是否发布，如果是，则执行您的查询。页面顶部：

```
<?php
if(isset($_POST['form_submit'])){
//do your queries
}
?> 
```

在您的表格中：

```
<form action='' method='POST'>
<input type='submit' name='form_submit' value='Go'>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:12:06.110

你需要`AJAX`在javascript中使用。此外，正如您所知，最后 3 个查询是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T19:26:21.937

单个按钮的 onClick 将返回单个值。这意味着您需要 (1) 在表单中使用某种选项菜单；(2) 创建某种方式，如果可能的话，将变量相加以达到一个组合结果。基于 PHP，您似乎正试图允许用户选择 5 个可用案例之一，然后返回结果。

为此，我只需使用一个选择框

```
<select name="n">
    <option value = "1"> boom </option>
    <option value = "2"> boom boom </option>
    <option value = "3"> boom boom boom </option>
    <option value = "4"> boom boom boom boom </option>
    <option value = "5"> boom boom boom boom boom </option>
</select> 
```

这将允许用户选择他们希望将其设置为变量 n 的选项。然后只需使用

```
switch($n){
 ........
} 
```

它应该运行用户从上面的菜单中选择的任何一种情况。

# html - 使 div 固定在另一个 div 上方的底部

> ID：14285034
> 
> 赞同：0
> 
> 时间：2013-01-11T19:10:46.867
> 
> 标签：html, css

我一直在开发带有水平滚动的移动布局。

但是现在我有一个问题：

有一个 NAV 元素粘在页面底部，那里没有问题，但我想实现一个“软木板”的效果，顶部和底部都有随附的“框架”。再一次，最上面的一点都没有问题，但是我在试图让最下面的那个保持在底部和资产净值栏上方时遇到了很多麻烦。

是这样的： ![在此处输入图像描述](../Images/6cfb9705973d5b3384b5824755eba86b.png)

基本上，红色方块是当前视图/屏幕，导航栏保持固定在底部，如果我滚动到另一个部分，它会按预期停留在屏幕底部，顶部蓝条（顶部框架）也是如此。

如何使底部的蓝色条保持在预期/示例的位置？

的HTML：

```
 <!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />
    <title>Ptfolio</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="js/less.js" type="text/javascript"></script>
    <link href='http://fonts.googleapis.com/css?family=Faster+One' rel='stylesheet' type='text/css'>
</head>
<body>
    <nav>
        <ul>
            <li><a href="#splash">Home</a></li>
            <li><a href="#next">About</a></li>
            <li><a href="#circuit">Circuit</a></li>
        </ul>
    </nav>
        <div id="wrapper">
            <section id="splash">
                <header>About Me</header>
                <div>
                    Lorem ipsum just testing things
                </div>
                </section>
            <section id="next">
                <div id="frame-top">
                    <header>Portfolio</header>

                    <div id="content">&nbsp</div>
                </div>
                <div id="frame-bottom">&nbsp</div>
            </section>
            <section id="circuit">
                <header>Contact</header>
                <div class="main">
                </div>
            </section>
        </div> <!-- wrapper -->
        <script type="text/javascript" src="cordova-2.3.0.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script type="text/javascript">
            app.initialize();
        </script>
</body>
</html> 
```

和CSS：

```
 /* --Meyerweb */
/* http://meyerweb.com/eric/tools/css/reset/ 
   v2.0 | 20110126
   License: none (public domain)
*/

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section {
    display: block;
}
body {
    line-height: 1;
}
ol, ul {
    list-style: none;
}
blockquote, q {
    quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
    content: '';
    content: none;
}
table {
    border-collapse: collapse;
    border-spacing: 0;
}
/* --Meyerweb */

html, body { 
    height: 100%;
    overflow-x: auto;
}

#wrapper { 
    display: table; 
    width: 350%; 
    height: 100%;
    -webkit-box-sizing: border-box;
    padding-bottom: 3em;
    position: relative;
}

#wrapper > section { 
    display: table-cell; 
    height: 100%; 
    width: 25%;
}

header {
    min-height: 2em;
    font-size: 2em;
}

section#splash {
    background: url("../img/bg_grey.png") repeat;
}

section#splash > header {
    font-family: 'Faster One', cursive;
}

section#next {
    background: url("../img/cork.jpg") repeat;
    z-index: 1;
    padding-bottom: 3.938em;
}

#frame-top {
    background: url("../img/frame.png") repeat-x;
    background-position: top;
    z-index: 3;
    width: 100%;
    padding-top: 1em;
}

#frame-bottom {
    background: url("../img/frame.png") repeat-x;
    height: 16px;
    background-position: top;
    z-index: 4;
}

#content {
    height: 100%;
    z-index: 2;
}

section#circuit {
    background: url("../img/circuit-tile-02.png") repeat;
}

.st-scroll {
    top: 0;
    left: 0;
    transition: all 0.6s ease-in-out;

    /* Let's enforce some hardware acceleration */
    -webkit-transform: translate3d(0, 0, 0);
    -webkit-backface-visibility: hidden;
}

nav {
    bottom: 0;
    position: absolute;
    background: -webkit-gradient(
        linear,
        left bottom,
        left top,
        color-stop(0.3, #303030),
        color-stop(0.5, #212121),
        color-stop(0.7, #575657)
    );
    height: 3em;
    width: 100%;
    z-index: 99;
}

nav ul {
    width:  50%;
    height: 100%;
    color: #FFF;
    margin-right: auto;
    margin-left: auto;
}

nav ul li{
    width: 25%;
    height: 100%;
    display: inline-block;
} 
```

我已经尝试了从边距、填充、高度和最小高度的所有方法，但无法达到预期的效果。谁能指出我做错了什么？

编辑：此时页面的屏幕截图：Chrome - ![在此处输入图像描述](../Images/4efc9aeb3befc992b45d591a6be72a2d.png)

苹果浏览器 - ![在此处输入图像描述](../Images/e52b8c3c704f07ddcb62023d102e92e8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T20:52:52.443

如果我没看错，问题是背景悬在元素的顶部而不是底部？

添加`background-position: bottom;`到该元素的样式。

* * *

编辑以添加我的解决方案 css：

*   HTML与原始帖子没有变化
*   “Meyerweb” CSS 保持不变
*   更改的 CSS：

```
html, body { 
    height: 100%;
    overflow: hidden;
}
body {
    overflow-x: auto;
    /* allows that horizontal scrolling */
}

#wrapper {  
    width: 350%; 
    position: absolute;
    top: 0px;
    bottom: 0px;
    /* ^-- these three lines replace height:100%
     * and correct some layout quirks */
}
#wrapper > section { 
    display: inline-block; 
    height: 100%;
    margin-left: -4px;
    margin-bottom: -4px;
}

#wrapper > section:first-child  {
    margin-left: 0px;
    /* combined with -4px margin above, eliminates gaps between sections */
}

#wrapper > section, section > header, section > div {
    width: 25%;
    /* not sure why 25%, since you seem to only
     * have three sections... but either way,
     * the same value is needed in multiple locations
     * so it's pulled out on its own here for
     * ease of maintenance  */
}

section > header {
    position: absolute;
    top: 0px;
    height: 3em;
}
section > div {
    position: absolute;
    top: 0px;
    height: 100%;
    padding-top: 3em;
    padding-bottom: 3em; 
    box-sizing: border-box;
}

section#splash { /*unchanged*/
    background: url("../img/bg_grey.png") repeat;
}
section#next { /*unchanged*/
    background: url("../img/cork.jpg") repeat;
    z-index: 1;
}
section#next > header#frame-top { /*unchanged*/
    background: url("../img/frame.png") repeat-x;
    background-position: top;
    z-index: 3;
}
section#next > div#frame-bottom {
    background: url("../img/frame.png") repeat-x;
    background-position: bottom;
    background-origin: content-box;
    z-index: 3;
}
section#circuit { /*unchanged*/
    background: url("../img/circuit-tile-02.png") repeat;
}

.st-scroll { /*unchanged*/
    top: 0;
    left: 0;
    transition: all 0.6s ease-in-out;

    /* Let's enforce some hardware acceleration */
    -webkit-transform: translate3d(0, 0, 0);
    -webkit-backface-visibility: hidden;
}

nav {
    bottom: 0;
    left: 0;
    position: fixed;
    background: -webkit-gradient(
        linear,
        left bottom,
        left top,
        color-stop(0.3, #303030),
        color-stop(0.5, #212121),
        color-stop(0.7, #575657)
    );
    background: linear-gradient(to top, #303030 30%, #212121 50%, #575657 70%);
    /* ^-- for non-webkit */
    height: 3em;
    width: 100%;
    z-index: 5;
}

nav ul { /*unchanged*/
    width:  50%;
    height: 100%;
    color: #FFF;
    margin-right: auto;
    margin-left: auto;
}

nav ul li{ /*unchanged*/
    width: 25%;
    height: 100%;
    display: inline-block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:40:41.283

使用“底部：0px”而不是边距。我对此并没有深入研究，但我有一个自己的项目，其中 div 与底部对齐并已修复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T22:40:30.590

在@joequincy 的一些帮助以及对代码的大量黑客攻击和篡改之后，我已经达到了完美的解决方案：

```
 <!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />
    <title>Ptfolio</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="js/less.js" type="text/javascript"></script>
    <link href='http://fonts.googleapis.com/css?family=Chango' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Londrina+Solid' rel='stylesheet' type='text/css'>
</head>
<body>
    <nav>
        <ul>
            <li><a href="#splash">Home</a></li>
            <li><a href="#next">About</a></li>
            <li><a href="#circuit">Circuit</a></li>
            <li>Placeholder</li>
        </ul>
    </nav>
    <div id="wrapper">
        <div class="cell">
            <section id="splash">
                <header>Celso Santos</header>
                <div class="container">
                    <div>
                        Lorem ipsum just testing things
                    </div>
                </div>
            </section>
        </div>
        <div class="cell">  
            <section id="next">
                <header>Portfolio</header>
                <div id="frame-top"></div>
                    <div class="container">
                        <div id="content">&nbsp</div>
                    </div>
                <div id="frame-bottom"></div>
            </section>
        </div>
        <div class="cell">
            <section id="circuit">
                <header>Contact</header>
                <div class="container"></div>
            </section>
        </div>
    </div> <!-- wrapper -->
    <script type="text/javascript" src="cordova-2.3.0.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript">
        app.initialize();
    </script>
</body>
</html> 
```

和CSS：

```
/* --Meyerweb */
/* http://meyerweb.com/eric/tools/css/reset/
   v2.0 | 20110126
   License: none (public domain)
*/

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed,
figure, figcaption, footer, header, hgroup,
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure,
footer, header, hgroup, menu, nav, section {
    display: block;
}
body {
    line-height: 1;
}
ol, ul {
    list-style: none;
}
blockquote, q {
    quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
    content: '';
    content: none;
}
table {
    border-collapse: collapse;
    border-spacing: 0;
}
/* --Meyerweb */

html, body {
    height: 100%;
    overflow: hidden;
}

#wrapper {
    display: table;
    width: 300%;
    height: 100%;
    -webkit-box-sizing: border-box;
    margin-bottom: -3em;
}

#wrapper > .cell { display: table-cell; height: 100%; width: 25%; }

#wrapper > .cell > section { position: relative; height: 100%; }

.container { 
  position: absolute; 
  top: 4em; right: 15px; bottom: 4em; left: 15px; 
  overflow-y: auto; border: 1px solid #000000; }

#wrapper > section {
    display: table-cell;
    height: 100%;
    width: 25%;
}

header {
    min-height: 2em;
    font-size: 2em;
    text-align: center;
}

section#splash {
    background: url("../img/bg_grey.png") repeat;
}

section#splash > header {
    font-family: 'Chango', cursive;
}

section#next {
    background: url("../img/cork.jpg") repeat;
    z-index: 1;
    position: relative;
}

section#next > header {
    top: 20px;
    font-family: 'Londrina Solid', cursive;
    color: rgba(124, 52, 24, 0.92);
    text-shadow: -1px -1px 1px rgba(0, 0, 0, 0.83);
    width: 100%;
    position: relative;
}

section#next > div#frame-top {
    background: url("../img/frame.png") repeat-x;
    background-position: top;
    z-index: 3;
    width: 100%;
    position: absolute;
    top: 0px;
    height: 16px;
}

#frame-top > header {
    font-family: 'Londrina Solid', cursive;
    color: rgba(124, 52, 24, 0.92);
    text-shadow: -1px -1px 1px rgba(0, 0, 0, 0.83);
}

#next > .container {
    bottom: 5em;
}

#frame-bottom {
    background: url("../img/frame.png") repeat-x;
    height: 16px;
    background-position: top;
    z-index: 4;
    position: absolute;
    bottom: 3em;
    width: 100%;
}

#content {
    height: 100%;
    z-index: 2;
    min-height: 100%;
}

section#circuit {
    background: url("../img/circuit-tile-02.png") repeat;
}

#circuit > header {
    text-shadow: 0px 2px 3px #666;
}

.st-scroll {
    top: 0;
    left: 0;
    transition: all 0.6s ease-in-out;

    /* Let's enforce some hardware acceleration */
    -webkit-transform: translate3d(0, 0, 0);
    -webkit-backface-visibility: hidden;
}

nav {
    bottom: 0;
    position: fixed;
    height: 3em;
    width: 100%;
    z-index: 99;
    background-image: linear-gradient(bottom, #333333 10%, #525252 50%, #525252 80%);
    background-image: -o-linear-gradient(bottom, #333333 10%, #525252 50%, #525252 80%);
    background-image: -moz-linear-gradient(bottom, #333333 10%, #525252 50%, #525252 80%);
    background-image: -webkit-linear-gradient(bottom, #333333 10%, #525252 50%, #525252 80%);
    background-image: -ms-linear-gradient(bottom, #333333 10%, #525252 50%, #525252 80%);
    box-shadow: 0px -3px 3px #333333;
}

nav ul {
    width:  80%;
    height: 100%;
    color: #FFF;
    margin-right: auto;
    margin-left: auto;
}

nav ul li{
    width: 20%;
    height: 100%;
    display: inline-block;
} 
```

我保留了表格单元格，将所有内容完美对齐（即使有那些尴尬的“空格”），然后为了保持一切整洁，最大的秘密是使用溢出：隐藏在体内。现在，这确实存在其他问题，例如您现在无法垂直或水平滚动，但鉴于这不是问题（应该使用导航栏来模拟不同的视图来实现导航）它现在可以正常工作，没有任何 JS .

# excel - 在列中复制和求和具有相同值的单元格

> ID：14285046
> 
> 赞同：-1
> 
> 时间：2013-01-11T19:11:48.217
> 
> 标签：excel, vba, function

我需要excel中的函数或宏来计算列中具有相同数据的单元格：

```
mn3288a  
mn3088a  
mn3088a  
mn3088a  
mn3288a  
3009-3001  
LKE1  
LKE1  
LKE1  
mn3088a  
3001-3009 
```

结果应该是这样的：

```
mn3288a    2  
mn3088a    4  
3009-3001  2  
LKE1       3 
```

在新表中。所以我需要复制一个值并计算该值在一列中的重复次数。数据表每天归档，大约有25000个不同的值。我试图`countifs, exat, if...`在excel中组合函数，但没有任何进展。而且我对宏了解不多。所以任何帮助，一个提示会很棒！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:37:33.813

I'm almost entirely sure either a pivot table or a `countif()` would work for you. The pivot table would be easier.

Just create it and refresh it every day after you paste in the new data (or you can change the pivot table to automatically refresh when you open the file).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:55:19.203

当您知道数据列表时，您可以`countif`像 Poweruser 上面提到的答案那样轻松使用。当您不知道时，您也可以使用 Pivot。

*   但是无论如何，如果您打算使用 VBA ...（不推荐，但如果您这样做），请尝试一下 :)

    [按未知列值计数。](https://stackoverflow.com/questions/14261584/vba-excel-finding-the-statistical-mode-of-a-collection/14262473#14262473)

# ruby - 如果在 haml 中，则强制结束 n

> ID：14285047
> 
> 赞同：0
> 
> 时间：2013-01-11T19:11:56.353
> 
> 标签：ruby, haml

我有一个如果：

```
-12.times do |control|
    -dia += 1
    -if control == 1
        %a#hoy{:href=>'/dias/algo'}<
    -else
        %a{:href=>'/dias/algo'}<
            =dia
            %span=dias[rand(7)] 
```

问题是在这两种情况下我都需要锚标记内`=dia`的`span`元素（真/假），当我退出一个标识时它会失败，因为 haml 将结束 if （这也是正常的）。

有没有办法强制结束if？我已经尝试了很多方法，但如果它存在，我找不到正确的方法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:21:47.107

```
-12.times do |control|
  -dia += 1
  %a{:id => control == 1 ? "hoy" : "", :href=>'/dias/algo'}<
    =dia
    %span=dias[rand(7)] 
```

没有测试它，但它应该工作......

# python - 根据给定分布对列表进行排序

> ID：14285049
> 
> 赞同：3
> 
> 时间：2013-01-11T19:12:00.613
> 
> 标签：python, sorting

回答一个[问题](https://stackoverflow.com/a/14281624/977038)，我最终遇到了一个问题，我认为这是一种迂回的解决方法，可以以更好的方式完成，但我一无所知

有两个列表

```
percent = [0.23, 0.27, 0.4, 0.1]
optimal_partition = [3, 2, 2, 1] 
```

最佳分区，是数字 8 分成 4 部分的整数分区之一

我想以一种`optimal_partition`将百分比分布匹配到尽可能接近的方式进行排序，这意味着单个分区应尽可能匹配百分比幅度

所以和和`3 -> 0.4`_`2 -> 0.27``0.23``1 -> 0.1`

所以最终的结果应该是

```
[2, 2, 3, 1] 
```

我最终解决这个问题的方法是

```
>>> percent = [0.23, 0.27, 0.4, 0.1]
>>> optimal_partition = [3, 2, 2, 1]
>>> optimal_partition_percent = zip(sorted(optimal_partition),
                    sorted(enumerate(percent),
                       key = itemgetter(1)))
>>> optimal_partition = [e for e, _ in sorted(optimal_partition_percent,
                          key = lambda e: e[1][0])]
>>> optimal_partition
[2, 2, 3, 1] 
```

你能建议一个更简单的方法来解决这个问题吗？

更简单的意思是，无需实现多重排序，以及基于索引的存储和稍后重新排列。

还有几个例子：

```
percent = [0.25, 0.25, 0.4, 0.1]
optimal_partition = [3, 2, 2, 1]
result = [2, 2, 3, 1]

percent = [0.2, 0.2, 0.4, 0.2]
optimal_partition = [3, 2, 2, 1]
result = [1, 2, 3, 2] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T19:59:47.860

```
from numpy import take,argsort

take(opt,argsort(argsort(perc)[::-1])) 
```

*或没有进口：*

```
zip(*sorted(zip(sorted(range(len(perc)), key=perc.__getitem__)[::-1],opt)))[1] 
```

* * *

```
#Test

l=[([0.23, 0.27, 0.4, 0.1],[3, 2, 2, 1]),
   ([0.25, 0.25, 0.4, 0.1],[3, 2, 2, 1]),
   ([0.2,  0.2,  0.4, 0.2],[3, 2, 2, 1])]

def f1(perc,opt):
    return take(opt,argsort(argsort(perc)[::-1]))

def f2(perc,opt):
    return zip(*sorted(zip(sorted(range(len(perc)),
             key=perc.__getitem__)[::-1],opt)))[1]       

for i in l:
    perc, opt = i
    print f1(perc,opt), f2(perc,opt)

# output:
# [2 2 3 1] (2, 2, 3, 1)
# [2 2 3 1] (2, 2, 3, 1)
# [1 2 3 2] (1, 2, 3, 2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:54:42.000

使用百分比总和为 1 的事实：

```
percent = [0.23, 0.27, 0.4, 0.1]
optimal_partition = [3, 2, 2, 1]
total = sum(optimal_partition)
output = [total*i for i in percent] 
```

现在你需要想办法以某种方式重新分配小数部分。把想法大声说出来：

```
from operator import itemgetter
intermediate = [(i[0], int(i[1]), i[1] - int(i[1])) for i in enumerate(output)]
# Sort the list by the fractional component
s = sorted(intermediate, key=itemgetter(2))
# Now, distribute the first item's fractional component to the rest, starting at the top:
for i, tup in enumerate(s):
    fraction = tup[2]
    # Go through the remaining items in reverse order
    for index in range(len(s)-1, i, -1):
        this_fraction = s[index][2]
        if fraction + this_fraction >= 1:
            # increment this item by 1, clear the fraction, carry the remainder
            new_fraction = fraction + this_fraction -1
            s[index][1] = s[index][1] + 1
            s[index][2] = 0
            fraction = new_fraction
        else:
            #just add the fraction to this element, clear the original element
            s[index][2] = s[index][2] + fraction 
```

现在，我不确定我会说这“更容易”。我还没有测试过，我确定我在最后一节中的逻辑是错误的。事实上，我正在尝试分配给元组，所以我知道至少有一个错误。但这是一种不同的方法。

# node.js - 将 Express 应用程序分解为子模块 - 现在我的自定义“x-powered-by”不起作用

> ID：14285050
> 
> 赞同：3
> 
> 时间：2013-01-11T19:12:00.793
> 
> 标签：node.js, express

[我在这里](http://tjholowaychuk.com/post/38571504626/modular-web-applications-with-node-js-and-express)观看了教程：

.. 并受到启发，将我不断增长的应用程序分解为不同的模块。高层结构如下（为简洁删除了一些部分）：

server.js：

```
var express = require('express')
  , orgs = require('./lib/orgs');

var app = express();

app.configure(function () {
  app.disable('x-powered-by');
  app.use(orgs);
});

http.createServer(app).listen(app.get('port'), function () {
    console.log("Express server listening on port " + app.get('port'));
}); 
```

lib/orgs/index.js

```
var express = require("express")
  , app = module.exports = express() 
```

它工作得很好。但是，我有一个小问题，可能会导致更大的问题。当我以这种方式构建我的应用程序时（例如，有明确的“子模块”），x-powered-by 没有被禁用，这让我相信所有应用程序配置的东西都没有被读取。我试图在调用 orgs 子模块之前和之后放置禁用消息。

有人可以帮我理解吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T01:27:11.077

这被确定为一个错误，并已在此处修复：

[https://github.com/visionmedia/express/commit/fa8eec449bf406cebd7a92d376a098a39a804879](https://github.com/visionmedia/express/commit/fa8eec449bf406cebd7a92d376a098a39a804879)

# android - 如何在 Android 中禁用时间选择器

> ID：14285054
> 
> 赞同：2
> 
> 时间：2013-01-11T19:12:15.323
> 
> 标签：android, timepicker

我的布局中有一个 TimePicker。我需要通过单击按钮或事件来禁用 TimePicker（用户无法更改小时或分钟）。

我怎样才能禁用它？

下面的代码片段不起作用

```
TimePicker tp = (...)findViewById(...);

  for(int i = 0; i< tp.getChildCount(); i++)
        ((View)tp.getChildAt(i)).setEnabled(false); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:32:38.197

这无论如何都不是一个好主意，但如果`TimePicker.setEnabled(false)`不起作用，您可以尝试递归禁用；

```
private void disable(ViewGroup vg)
{
    for (int i = 0; i < vg.getChildCount(); ++i)
    {
        View v = vg.getChildAt(i);
        if (v instanceof ViewGroup)
        {
            disable((ViewGroup)v);
        }
        else
        {
            v.setEnabled(false);
        }
    }
} 
```

只需将 TimePicker 传递给此方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-03T08:27:00.453

```
 sButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            if (sButton.isChecked()) {

                timePicker.setEnabled(true);
                timePicker.setIs24HourView(true);
                displayTime.setText(currentTime());
                changeTime.setOnClickListener(new View.OnClickListener() {
                    @Override
                    public void onClick(View view) {
                        displayTime.setText(currentTime());
                    }
                });

            } else {
                timePicker.setEnabled(false);

            }
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-02T21:49:34.107

我找到了解决方案：

```
 for(int i = 0; i < timePickerStartingHour.getChildCount(); i++) {
     Log.i("MyApp", timePickerStartingHour.getChildAt(i).getClass().getName()); //prints LinearLayout

     for (int j = 0; j < ((LinearLayout)timePickerStartingHour.getChildAt(i)).getChildCount(); j++ ) {
         ((LinearLayout)timePickerStartingHour.getChildAt(i)).getChildAt(j).setEnabled(false);
     }

 } 
```

TimePicker 只有一个子元素，它是 LinearLayout，所以你不能禁用它，你必须禁用 LinearLayout 内的视图

# javascript - jquery scrollTo offsetTop

> ID：14285061
> 
> 赞同：0
> 
> 时间：2013-01-11T19:12:49.243
> 
> 标签：javascript, jquery, scrollto

我正在使用[jquery ScrollTo](https://github.com/balupton/jquery-scrollto)非常棒，但想使用“offset top”插件，有人设置了吗？我不确定如何正确使用它

```
$('#aAbout').click(function about() {
   $.scrollTo('#dAbout', 500, offsetTop: 10px);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:15:13.443

这不是有效的 JavaScript 语法。也许你的意思是：

```
$('#aAbout').click(function() {
    $('#dAbout').scrollTo({
        duration: 500, 
        offsetTop: '10px'
    });
}); 
```

# mysql - MySQL Query 跳转记录

> ID：14285063
> 
> 赞同：0
> 
> 时间：2013-01-11T19:13:00.150
> 
> 标签：mysql

我有以下查询。

```
SELECT month(DMY) Month, 
  Year(DMY) Year, 
  Date(DMY) Date,
  COD_VENDED,
  @running_total := @running_total + Coalesce(TotalImport, 0) as TotalImport
from
(
  SELECT Days.dmy,
    g.COD_VENDED,
    TotalImport
  FROM Days
  left join
  (
    select FECHA_EMIS,
      COD_VENDED,
      sum(IMPORTE) TotalImport
    from GVA12
    group by Date(FECHA_EMIS), Year(FECHA_EMIS)
  ) g
    on date(Days.DMY) = date(g.FECHA_EMIS)
    and g.COD_VENDED='EX'
    and Month(g.FECHA_EMIS)=Month(curDate())
    and Year(g.FECHA_EMIS)=Year(curDate())
  WHERE month(Days.dmy)=Month(curDate())
) src, (SELECT @running_total := 0 AS dummy) dummy 
```

问题是它在数据库中跳跃记录。

[此SQL Fiddle](http://sqlfiddle.com/#!2/253a8/4)中复制了该问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:27:19.570

看来问题出在您的内部子查询上：

```
select FECHA_EMIS,
  COD_VENDED,
  sum(IMPORTE) TotalImport
from GVA12
group by Date(FECHA_EMIS), Year(FECHA_EMIS) 
```

您只是对 the 进行分组，`Date()`因此`Year()`the 的值`COD_VENDED`不会保持不变。

然后，当您进入查询的下一部分时，您仅过滤以下记录：

```
 g.COD_VENDED='EX' 
```

因此，如果子查询返回的值不是，`EX`那么它们将被过滤掉。

您可能需要考虑`COD_VENDED`在子查询中进行分组：

```
SELECT month(DMY) Month, 
  Year(DMY) Year, 
  Date(DMY) Date,
  COD_VENDED,
  @running_total := @running_total + Coalesce(TotalImport, 0) as TotalImport
from
(
  SELECT Days.dmy,
    g.COD_VENDED,
    TotalImport
  FROM Days
  left join
  (
    select FECHA_EMIS,
      COD_VENDED,
      sum(IMPORTE) TotalImport
    from GVA12
    group by Date(FECHA_EMIS), Year(FECHA_EMIS), COD_VENDED
  ) g
    on date(Days.DMY) = date(g.FECHA_EMIS)
    and g.COD_VENDED='EX'
    and Month(g.FECHA_EMIS)=Month(curDate())
    and Year(g.FECHA_EMIS)=Year(curDate())
  WHERE month(Days.dmy)=Month(curDate())
) src, (SELECT @running_total := 0 AS dummy) dummy 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/253a8/9)

# javascript - 为什么 jQuery 选择器变量不能在命名空间中工作？

> ID：14285065
> 
> 赞同：0
> 
> 时间：2013-01-11T19:13:06.447
> 
> 标签：javascript, jquery, variables, javascript-namespaces

我很困惑为什么这不起作用。我希望声明一个以上的变量。我究竟做错了什么？

```
 var message = (function ($) {
        var $modalBody = $('.modal-body'),
            $lblToUser = $modalBody.find('.to-user');
        return {
            toUser: function () {
                $lblToUser.val('To');
                $lblToUser.focus(function () {
                    if (this.value === 'To') this.value = '';
                    $(this).addClass('darker');
                }).blur(function () {
                    if (this.value === '') this.value = 'To';
                    $(this).removeClass('darker');
                });
            },
        };
    })(jQuery);

message.toUser(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:19:12.080

也许您需要先初始化文档？

```
$( document ).ready( function () {       // <-------
     var message = (function ($) {
        var $modalBody = $('.modal-body'),
            $lblToUser = $modalBody.find('.to-user');
        return {
            toUser: function () {
                $lblToUser.val('To');
                $lblToUser.focus(function () {
                    if (this.value === 'To') this.value = '';
                    $(this).addClass('darker');
                }).blur(function () {
                    if (this.value === '') this.value = 'To';
                    $(this).removeClass('darker');
                });
            },
        };
    })(jQuery);

    message.toUser();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T19:19:21.000

看来您`,`最后放错了位置，`toUser`这可能会导致问题。

```
 var message = (function ($) {
    var $modalBody = $('.modal-body'),
        $lblToUser = $modalBody.find('.to-user');
    return {
        toUser: function () {
            $lblToUser.val('To');
            $lblToUser.focus(function () {
                if (this.value === 'To') this.value = '';
                $(this).addClass('darker');
            }).blur(function () {
                if (this.value === '') this.value = 'To';
                $(this).removeClass('darker');
            });
        }, // <-----
    };
})(jQuery);

message.toUser(); 
```

# asp.net - 实体框架包含子句未找到

> ID：14285067
> 
> 赞同：1
> 
> 时间：2013-01-11T19:13:11.450
> 
> 标签：asp.net, entity-framework, c#-4.0, contains

我使用 contains 子句在 db 表中进行搜索。但是，如果数据有大写字母并且如果我用小写字母搜索，它不会找到我搜索的内容。但是当我用大写字母搜索时它可以找到。小写搜索也是如此。

这是我的代码：

```
 using (var context = new eTicaretEntity())
  {
    return context.GetActiveProducts().Where(p => p.Name.Contains(name)).ToList();
  } 
```

你可以看到我的意思是这些照片。

它可以用大写字母查找。

![它可以找到](../Images/30199555f9f134d0890a43a2500c09a8.png)

它找不到带有小写字母的数据。 ![在此处输入图像描述](../Images/9cc9cd0f101bc4f297afc5ddf1375360.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T19:16:20.517

如果您的数据库排序规则区分大小写，那么您必须将比较的两边都转换为大写（或小写）。

```
using (var context = new eTicaretEntity())
{
    return context.GetActiveProducts()
                  .Where(p => p.Name.ToUpper().Contains(name.ToUpper()))
                  .ToList();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T19:20:01.347

试试这个：

```
return context.GetActiveProducts().Where(p => 
          p.Name.IndexOf(name,StringComparison.OrdinalIgnoreCase) >= 0).ToList(); 
```

这将解决您的问题。

# javascript - 开发模式下的资产编译缓慢

> ID：14285069
> 
> 赞同：10
> 
> 时间：2013-01-11T19:13:32.610
> 
> 标签：javascript, ruby-on-rails, ruby, asset-pipeline

我有一个包含数百个咖啡脚本文件的大型 Rails 应用程序。

有时，当我对咖啡脚本文件进行微小更改或切换分支时，整个资产正在被预编译，我必须等待很长时间才能加载页面：

```
Started GET "/assets/application.js" for 127.0.0.1 at 2013-01-11 19:39:45 +0100
Compiled sprockets/commonjs.js  (0ms)  (pid 18142)
Compiled jquery.js  (2ms)  (pid 18142)
Compiled jquery_ujs.js  (0ms)  (pid 18142)
Compiled underscore.js  (0ms)  (pid 18142)
Compiled backbone.js  (0ms)  (pid 18142)
Compiled backbone_rails_sync.js  (0ms)  (pid 18142)
Compiled handlebars.runtime.js  (0ms)  (pid 18142)
Compiled moment.js  (0ms)  (pid 18142)
...and so on 
```

我使用以下资产配置`config/development.rb`：

```
# Do not compress assets
config.assets.compress = false

# Expands the lines which load the assets
config.assets.debug = false 
```

当我设置时，`config.assets.debug = false`我必须等待很长时间才能加载数百个 js 文件。问题是：如何找到中庸之道？大应用开发模式下如何优化资产配置？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-16T19:31:23.673

看看Discourse 团队的[这个中间件](https://github.com/discourse/discourse/blob/master/lib/middleware/turbo_dev.rb)。我们在 Rails 4 应用程序中取得了巨大的成功——在开发过程中将重新加载时间从一分钟缩短到了 5 秒。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T02:09:51.630

这是一个可悲的事实，但你没有。没有一个干净的方法来解决这个问题。

但是，您可以遵循一些模式来最大程度地减少您的痛苦，如果我理解正确的话，您必须在开发中等待很多时间才能看到变化。

如前所述，这些已在此处看到[1](https://stackoverflow.com/questions/11390447/how-can-you-speed-up-the-rails-asset-pipeline-precompile-process)和[此处 2](https://stackoverflow.com/questions/11390447/how-can-you-speed-up-the-rails-asset-pipeline-precompile-process)。

1.  [从这里](https://stackoverflow.com/questions/11390447/how-can-you-speed-up-the-rails-asset-pipeline-precompile-process)看一下第 2 项1 。
2.  在许多文件中分解您的资产。这将意味着在发生更改时处理的行数更少。
3.  更喜欢 css/js，它们可能不那么酷但不需要编译。
4.  在资产预编译时找到一些有趣的事情。它可能会降低生产力，但肯定会消除痛苦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T03:06:03.453

正如其他人所指出的，优化资产是提高编译速度的第一方法（消除不必要的文件和预处理器，仔细导入，并谨慎使用部分）。但是，你为什么要`config.assets.debug = false`进入开发模式呢？当它为假时，sprockets 会将所有文件连接在一起，如果您有大量文件，这可能需要相当长的时间。

相反， turn `config.assets.debug = true`，因此资产在第一个请求时被编译和缓存。Sprockets 设置一个 Cache-Control HTTP 头来减少后续请求的请求开销。浏览器收到 304（未修改）响应。请参阅 Rails[资产管道](http://guides.rubyonrails.org/asset_pipeline.html)文档。

# algorithm - 如何执行螺旋顺序遍历一维数组？

> ID：14285070
> 
> 赞同：0
> 
> 时间：2013-01-11T19:13:35.737
> 
> 标签：algorithm, data-structures

> **可能的重复项：以螺旋形式**
> [循环 以螺旋形式](https://stackoverflow.com/questions/398299/looping-in-a-spiral)
> [编写字符串 以](https://stackoverflow.com/questions/7183735/writing-a-string-in-a-spiral)
> [螺旋顺序打印二维数组 以螺旋顺序打印二维](https://stackoverflow.com/questions/726756/print-two-dimensional-array-in-spiral-order)
> [数组](https://stackoverflow.com/questions/945265/2d-array-in-spiral-order)

我们有一个矩阵形式的数据

```
0 0 0 0 0
0 1 2 3 0
0 4 5 6 0
0 7 8 9 0
0 0 0 0 0 
```

以这种方式存储在一维数组中

```
[0 0 0 0 0 0 1 2 3 0 0 4 5 6 0 0 7 8 9 0 0 0 0 0 0] 
```

这是一个零填充的 3x3 数组转换为 5x5。我们知道开始索引和结束索引。

如我们所见，我们可以执行 25 次操作并打印所有值，但如果我们按照螺旋顺序进行，理想情况下应该只执行 9 次操作。

有谁知道如何做到这一点？

我们知道行数和列数。这里将是 rows=5 cols=5。

因此，起始索引为 rows+1，结束索引为 rows*cols-6

我将其可视化为螺旋顺序遍历。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:29:11.067

假设您的`5x5`矩阵假设索引基数为零，您知道行索引是：
`0,1,2,3,4`
`5,6,7,8,9`
`10,11,12,13,14`
`15,16,17,18,19`
`20,21,22,23,24`

你知道你的第一个索引是`6`，最后一个是`18`. 因此，作为起点，您知道可以消除矩阵的以下部分：

`0,1,2,3,4`
和
`19,20,21,22,23,24,25`

这算作`2`操作。

您还知道，由于您从 index 开始，`6`并且`3x3`您只需要转到 index `8`，因此这是一项操作。

然后你需要添加`5`到你之前的`6`这个产量索引`11`并再次继续（`2`总共操作）当前操作计数是`5`）

再次执行此操作`11`，您将获得`16`一次操作。再进行 2 次操作，最终得到`18`. 现在总共是 8 次操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:57:19.487

我会做这样的事情：

```
 POINT ul = (start_idx/width, start_idx%width);
   POINT br = (end_idx/width, end_idx%width);
   POINT p = ul
   dir = RIGHT;
   while (ul != br)
     visit(ARRAY[p.x+p.y*WIDTH])
     case dir
        when RIGHT:   
           p.x+=1
           if (p.x==br.x) 
             dir = DOWN
             ul.y++;
         when DOWN
           p.y+=1
           if (p.y==br.y) 
             dir = LEFT
             br.x--;
         when LEFT: 
            //like RIGHT but -1 and adjust br.y upwards when done
         when UP:
            //like DOWN but -1 and adjust ul.x rightward when done
    endwhile 
```

这个想法是跟踪要访问的虚拟 x 和 y。沿着由起点和终点定义的框的侧面移动要访问的点。完成访问后，向内调整两侧。

# .net - 正确的线程互斥

> ID：14285081
> 
> 赞同：0
> 
> 时间：2013-01-11T19:14:30.827
> 
> 标签：.net, multithreading

下面问题中如何组织线程间的同步？

我有两个线程，一个作家和一个读者。它们都使用共享资源。当读取器请求数据块时，写入器开始写入，如果传输完成则退出。然后，当所有数据块都被写入时，写入器等待下一个读取器的请求。读取器等待数据块准备好或写入器完成。因此，两个线程之间存在互斥。

我不能使用 yield 等来完成任务，因为语言不支持它。

```
W     -----         /---------\
R----/     \--------           -------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:18:26.827

最简单的方法是使用信号量。在 .net 中，您可以使用[锁定](http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=vs.100%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:17:07.770

这听起来像读写器问题：

听说过信号量或类似的东西;)？

[http://en.wikipedia.org/wiki/Readers-writers_problem](http://en.wikipedia.org/wiki/Readers-writers_problem)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T19:21:59.713

信号量是锁定数据的“经典”方式。

根据您的具体要求，您实际上可能会更好地锁定较新版本的 .Net 中提供的“线程安全集合”（System.Collections.Concurrent）之一：

*   [http://msdn.microsoft.com/en-us/library/dd997305.aspx](http://msdn.microsoft.com/en-us/library/dd997305.aspx)

如果不是所有线程都在更新数据，您还可以使用读取器/写入器锁（相对于“简单锁定”）来获得性能提升：

*   [http://msdn.microsoft.com/en-us/library/bz6sth95%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/bz6sth95%28v=vs.80%29.aspx)

'希望有帮助

# jquery - jQuery - Twitter Bootstrap - 关闭身体的任何元素焦点上的所有弹出框

> ID：14285082
> 
> 赞同：12
> 
> 时间：2013-01-11T19:14:37.217
> 
> 标签：jquery, twitter-bootstrap, focus, popover

我正在尝试关闭任何`popover`打开时`any body element`（不是弹出框本身）`is focused`，

所以我这样做：

```
 $(document.body).on('focus focusout focusin', function(e) {
  if( e.target.classList.contains('popover') ){return false;}
  else{
    $('*').popover('hide');
  }
  // code to close the popover
}); 
```

这在弹出窗口关闭之前效果很好，`Chrome`但不适用于`FF`我`FF`需要。`focusin and focusout`

这是我仅适用于 chrome 的示例：http: [//jsfiddle.net/CU5U5/4/](http://jsfiddle.net/CU5U5/4/)

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-11T19:18:58.363

替代：

```
$(document).on('focus', ':not(.popover)', function(){
    $('.popover').popover('hide');
}); 
```

编辑：

事实证明，我上面的答案是不正确的。您需要在实例化 popover 的元素上调用 .popover('hide') ......而不是 .popover 本身。并且您需要停止在链接上传播单击事件（即，在单击处理程序中返回 false），这样它就不会冒泡到文档根目录。看到这个答案，[http://jsfiddle.net/aFacG/1/](http://jsfiddle.net/aFacG/1/)。

HTML

```
<a data-content="a popover" id="mypopover" href="#">click me</a> 
```

JS

```
$(document).ready(function(){
  $("#mypopover").popover();

  $(document).on('click', function(){
      $("#mypopover").popover('hide');
  });

  $('#mypopover').click(function(){
      return false;
  });
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-01T22:14:14.160

当前接受的答案的问题是，即使您在工具提示内单击，弹出框也会隐藏（如果您在弹出框内有要与之交互的元素，则不好......就像输入字段一样）。

使用 popover 容器上的[stopPropagation](http://api.jquery.com/event.stopPropagation/)方法来防止 hide 事件使 DOM 冒泡。

更新（引导网址已更改）：http: [//jsfiddle.net/bNvX7/10/](http://jsfiddle.net/digitalmaster/bNvX7/)

```
$(document).ready(function(){

    //Initialize popover on element
    $("#mypopover").popover();

    //Attach click handler to document
    $(document).bind('click', function (e) {
        $("#mypopover").popover('hide');
    });

    //Dont hide when I click anything inside #container
    $('#container').bind('click', function(e) {
        e.stopPropagation();
    });
}); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-06-30T02:02:45.893

非常简单：

```
$('.popover').remove(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-10T09:02:05.057

打电话

```
$('.popover').popover('hide'); 
```

将关闭所有当前打开的弹出窗口。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-03T01:22:59.933

这是一种稍微通用的方法，它只需要一个处理程序，适用于切换/链接包含属性 data-rel="popover" 的所有弹出框，例如：

HTML

```
<a href="#" data-rel="popover">toggle</a> 
```

JS

```
 $(document).on('click', function(event) {
    var $clicked = $(event.target);

    if ($clicked.closest('[data-rel="popover"]').length) {
      return;
    } else if ($clicked.closest('.popover').length) {
      event.stopPropagation();
    } else {
      $('[data-rel="popover"]').popover('hide');
    }
  }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-27T03:25:07.230

也许你可以试试这个：

```
 // Part 1: initialize the popver
        var button = template.find(".itemInfo button");
        // add a class name to identify the target later.
        button.addClass("popover-toggle");

        var content = $("<div>test</div>");

        button.popover({
            container:"body",
            content: content,
            html:true,
            placement:"top",
            title:"Popover title",
            trigger:'click'
        });

        // Part 2: add click event listener 
        $(document).on("click", function(event){
            var target = $(event.target);
            $.each( $(".popover-toggle"), function(index, value){
                var _target = $(value);
                // not click on the button and not click on the popover it self
                if( !target.is( _target ) && target.closest(".popover").length == 0 ){
                    _target.popover("hide");
                }
            });
        }); 
```

不是最佳实践，但它在 Chrome 和 FF 上都可以正常工作。

# java - ResultSet 关闭后不允许出现 ResultSet、空指针异常和 SQLException 操作

> ID：14285086
> 
> 赞同：0
> 
> 时间：2013-01-11T19:14:52.020
> 
> 标签：java, sql

我是 Java 和 SQL 的新手，我重复了一个我不知道如何避免的问题：

假设我想做两个executeQuery，一个在getRequestsFromDB方法中的另一个里面我做第一个executeQuery，在第二个方法isProfessionalHasThatProfession我做第二个executeQuery：

```
 private Vector<ClientRequest> getRequestsFromDB() throws SQLException {
    Vector<ClientRequest> retVal = new Vector<ClientRequest>();
    ResultSet result = null;
    try {
        for (int i=0 ; i<_userBean.getProfession().length ; ++i ){
            result = _statement.executeQuery("SELECT * FROM "+_dbName+"."+CLIENTS_REQUEST_TABLE+" WHERE "+CLIENTS_REQUEST_T_PROFESSION+"='"+_userBean.getProfession()[i]+"'");               
            while(result.next()){ //HERE IN THE SECOND LOOP GETTING NULL EXCEPTION

                if(isProfessionalHasThatProfession(result.getString(CLIENTS_REQUEST_T_PROFESSION))){
                    retVal.add(cr);
                    ClientRequest cr = new ClientRequest
                            (result.getString(CLIENTS_REQUEST_T_CLIENT_ID), 
                            result.getString(CLIENTS_REQUEST_T_CITY),
                            result.getString(CLIENTS_REQUEST_T_DATE),
                            result.getString(CLIENTS_REQUEST_T_PROFESSION));
                }
            }
        }
    } catch (SQLException ex) {
        throw ex;
    }
    return retVal;
} 
```

第二个功能：

```
private boolean isProfessionalHasThatProfession(String profession) throws SQLException {             
    ResultSet result = null;
    try {
        result = _statement.executeQuery("SELECT "+WORKER_PROFESSIONS_T_PROFESSION+" FROM "+_dbName+"."+WORKER_PROFESSIONS_TABLE+" WHERE "+WORKER_PROFESSIONS_T_PROFESSIONAL_ID+"='"+_userBean.getProId()+"'");
        while(result.next()){
            if(result.getString(1).equals(profession)){
                return true;
            }
        }
    } catch (SQLException ex) {
        throw ex;
    }
    return false;
} 
```

在第二个循环中，我得到一个 SQLException：“ResultSet 关闭后不允许操作”，我尝试过：最后用 result.close() 关闭结果，但我也得到异常空指针异常。

我真的不知道如何处理，想法？谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:19:42.667

您正在重用`_statement`（我假设是全局的？）来获得 2 个不同的 s，但是在获得第 2 个（在内部函数内部，自动关闭第一个）之后`ResultSet`返回第一个（在外部函数中）-尝试使用 2`ResultSet`单独的陈述

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:28:24.983

从 Java API：

> 默认情况下，每个 Statement 对象只能同时打开一个 ResultSet 对象。因此，如果一个 ResultSet 对象的读取与另一个 ResultSet 对象的读取交错，则每个对象都必须由不同的 Statement 对象生成。

`Statement`所以你必须为第二个生成一个新的`ResultSet`。请不要忘记`Statement`分别关闭 s。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T19:20:49.633

检查此链接：http://download.oracle.com/javase/1.4.2/docs/api/java/sql/Statement.html

默认情况下，每个 Statement 对象只能同时打开一个 ResultSet 对象。因此，如果一个 ResultSet 对象的读取与另一个 ResultSet 对象的读取交错，则每个对象都必须由不同的 Statement 对象生成。Statement 接口中的所有执行方法都会隐式关闭语句的当前 ResultSet 对象（如果存在打开的对象）。

你正在重用你的陈述

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T19:22:25.977

[请参阅ResultSet API](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/ResultSet.html)中的此引用：

*   当生成它的 Statement 对象关闭、重新执行或用于从多个结果序列中检索下一个结果时，ResultSet 对象将自动关闭。

看起来您正在使用一个类或全局范围语句 ( )，它支持您尝试迭代的结果集，并为您的方法`_statement`中的结果集中的每个条目查询某种类型的详细信息。`isProfessionalHasThatProfession`但是当您使用相同的执行新查询时`Statement`，您的旧 ResultSet 将关闭。

因此，第二个查询需要单独的语句。

# aem - 如何以编程方式创建 CQ5 页面的新版本？

> ID：14285092
> 
> 赞同：3
> 
> 时间：2013-01-11T19:15:12.233
> 
> 标签：aem

是否可以以编程方式创建在未来某个时间开始时间的 CQ5 页面的新版本？

例如，假设我们有一个显示税率的页面。我们有一个组件允许作者上传新的费率表（以 css 文件的形式）并创建费率页面内容。我们希望允许作者上传下个月第一天生效的费率。

我知道 jcr 支持多个版本的节点，但不清楚这与 cq5 页面版本控制如何（或是否）相关。并且，进一步，未来是否可以激活新版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T21:35:50.517

鉴于您描述的要求，我可能会以稍微不同的方式完成任务......

与其将我的费率表信息直接存储在页面的 jcr:content 节点（或它们的子节点）中，我可能会将其抽象到存储库中的其他位置。然后，如果您愿意，您可以创建某种管理界面，以允许内容作者上传他们的新费率 csv 文件，并根据需要将其摄取到存储库中。或者，假设数据来自某种数据库，您可能只需编写一个作业，通过使用来自 CQ 的 JDBC 连接在某种预定的基础上自动注入它。一旦数据在存储库中，您就可以编写显示组件以从存储库中读取数据，而不是直接在页面内。

这种方法的优点是可以在 CQ 中重复使用该数据，以便在多个页面、多个站点甚至许多不同的显示格式（如果需要）上显示。此外，您可以设计您的 jcr 结构以支持您对数据更新的任何要求，包括每日、每月、每周、每年等，显然这将取决于具体要求。

这样做的一个缺点是，由于数据和显示数据的页面之间存在分离，因此您可能需要找到一种方法来确保在数据发生更改时正确清除缓存。

更新（根据您的评论）：

我预见到对页面进行版本控制的问题，并且我没有尝试过，所以也许它会起作用，一次只能有一个活动版本。因此，一旦下个月的数据上传，您需要同时维护旧数据（活动）和新数据（尚未活动）。如果您在该窗口期间需要单独的内容更改会发生什么......从业务流程的角度来看，这对我来说似乎很混乱。

回到缓存清除问题，如果您知道受影响的页面，特别是如果它们都在一个子树中，您可以编写一个自定义工作流程，使用复制器服务来清除受影响页面的缓存，然后设置一个启动器来运行节点上的 wf 更改数据。

另一种选择，这个在我的脑海中定义较少，因此需要进行一些实验，将使用内置的 CQ 稍后激活并停用以后的功能。

也许为费率数据创建一个特定的模板，隐含的要求是一次只有一个使用该模板的页面处于活动状态。您的显示组件可以使用查询来查找当前活动的费率数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:30:47.997

我没有亲自尝试过，但是...

我假设您可以使用 PageManager 服务的 createRevision 方法，然后如果它返回而不抛出异常，您可以调用 page.getContentResource.adaptTo(Node.class)，然后从那里获取返回的节点并编辑 JCR 属性对于您的税率组件。

请参阅[页面管理器](http://dev.day.com/docs/en/cq/current/javadoc/com/day/cq/wcm/api/PageManager.html#createRevision%28com.day.cq.wcm.api.Page%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T21:13:15.690

您可以编写一个[工作流](http://dev.day.com/docs/en/cq/current/workflows/wf-overview.html)，其中包含一个由日历日期的到来触发的发布步骤。具有新税率的页面版本以草稿形式保留在工作流管道中，并且仅在日期到达时发布/激活。（因此，您需要某种每天唤醒一次的过程来检查日历。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-23T10:36:40.463

每次修改页面时，cq 都会创建该页面的一个版本。该修改页面的修改时间在页面的 jcr:lastModified 属性中设置。可以操作此属性以保存未来日期并在该日期激活页面，尽管它不是首选方式。您可以将未来日期作为属性存储在页面中。稍后，正如@David 所建议的那样，您可以创建一个工作流或计划作业，以激活具有未来日期的页面。

# ms-access - 格式化通过报告导入的表格

> ID：14285106
> 
> 赞同：1
> 
> 时间：2013-01-11T19:15:50.117
> 
> 标签：ms-access

我每天都会收到一些报告，这些报告必须以特定方式导入到数据库 MS Access 中。问题是，报告的布局方式很难做到这一点。

```
 Program: Name A
     Date | Description | Other | Stuff
     Date | Description | Other | Stuff 
Program: Name B
     Date | Description | Other | Stuff
     Date | Description | Other | Stuff   
Program: Name C
     Date | Description | Other | Stuff
     Date | Description | Other | Stuff 
```

基本上，我希望它看起来像这样。

```
Program: Name A | Date | Description | Other | Stuff
Program: Name A | Date | Description | Other | Stuff
Program: Name B | Date | Description | Other | Stuff
Program: Name B | Date | Description | Other | Stuff
Program: Name C | Date | Description | Other | Stuff
Program: Name C | Date | Description | Other | Stuff 
```

我玩过几个不同的解决方案，但到目前为止还没有完成这项工作。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:45:15.720

就像是：

```
Dim xl As New Excel.Application
Dim ws As Excel.Worksheet
Dim rng As Excel.Range
Dim rs As DAO.Recordset
Dim db As Database

Set db = CurrentDb

''Run once
''s = "create table reporttable (id counter primary key, program text, " _
'' & "pdate text, [description] text, other text, stuff text)"
''db.Execute s, dbFailOnError

Set rs = db.OpenRecordset("ReportTable")
xl.Visible = True ''dev

Set ws = xl.Workbooks.Open("z:\docs\report.xlsx").Sheets("Sheet1")
Set rng = ws.UsedRange

For i = 1 To rng.Rows.Count
    If rng.Cells(i, 1) Like "Program*" Then
        progdat = rng.Cells(i, 1)
    Else
        rs.AddNew
        rs!program = progdat
        rs!pdate = rng.Cells(i, 1) ''Text, because you cannot trust reports
        rs!Description = rng.Cells(i, 2)
        rs!Other = rng.Cells(i, 3)
        rs!Stuff = rng.Cells(i, 4)
        rs.Update
    End If
Next
Set rs = Nothing
Set rng = Nothing
ws.Parent.Close
Set ws = Nothing
xl.Quit
Set xl = Nothing 
```

# java - 带有 IN() 的 Android SQLite 查询

> ID：14285111
> 
> 赞同：2
> 
> 时间：2013-01-11T19:16:11.343
> 
> 标签：java, android, sqlite, android-sqlite

我有以下型号

类别（id，名称，is_active）地点（id，名称，category_id，.....）

根据用户偏好，类别将是`0 or 1`。基于此偏好，我想查询其`categories.is_active = 1`.

我认为有两种方法

**第一种方法**

1.  查询并获取is_active = 1的所有Categories
2.  从上述检索到的类别 ID 集合中获取所有地点的列表。

**第二种方法**

使用 JOIN 编写 RawQuery 并设置条件。

优化速度的最佳方法是什么？

我试过什么？

```
// Get Active Categories
public Cursor getActiveCategories() {
    return db.query(TABLE_CATEGORIES, new String[] { COLUMN_ID,
            COLUMN_NAME, COLUMN_SLUG, COLUMN_ACTIVE }, COLUMN_ACTIVE + "="
            + "'1'", null, null, null, COLUMN_NAME, null);
}

// Get Places
public Cursor getPlaces() {
    return db.query(TABLE_PLACES, new String[] { COLUMN_ID, COLUMN_NAME },
            " type IN ('1','2')", null, null, null, null);
} 
```

在上面的代码中，如何`IN ('1','2')`动态插入类型以便我可以从第一种方法的结果中填充它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T19:29:43.687

一个 rawQuery 几乎总是比两个单独的查询快。由于您在 rawQuery 中没有任何参数，因此它将非常简单，例如；

```
SELECT places.* 
FROM places 
JOIN categories
  ON places.category_id = categories.id
WHERE categories.is_active = 1 
```

# android - RingtoneManager.ACTION_RINGTONE_PICKER 在某些设备上崩溃

> ID：14285119
> 
> 赞同：2
> 
> 时间：2013-01-11T19:17:03.250
> 
> 标签：android, action, picker, ringtone

以下代码在某些设备上不断崩溃（立即关闭铃声选择器对话框），在大多数设备上它按预期工作。我没有为它崩溃的设备找到一个共同的共同点。

如果有人可以帮助我解决这个问题，我会非常高兴。顺便说一句：Logcat 完全没有显示任何内容。没有错误。

这是代码

```
protected void chooseRingtone() {

    final Intent intent = new Intent(RingtoneManager.ACTION_RINGTONE_PICKER);
    intent.putExtra(RingtoneManager.EXTRA_RINGTONE_SHOW_SILENT, false);
    intent.putExtra(RingtoneManager.EXTRA_RINGTONE_TYPE, RingtoneManager.TYPE_ALL);
    intent.putExtra(RingtoneManager.EXTRA_RINGTONE_TITLE, getString(R.string.choose_ringtone));

    if (ringtoneURI != null) {
        intent.putExtra(RingtoneManager.EXTRA_RINGTONE_EXISTING_URI, ringtoneURI);
    } 
    else {
        intent.putExtra(RingtoneManager.EXTRA_RINGTONE_EXISTING_URI, (Uri) null);
    }
    startActivityForResult(intent, RINGTONE_RESULT);
}

@Override
protected void onActivityResult(final int requestCode, final int resultCode, final Intent data) {

    if (resultCode == RESULT_OK && requestCode == RINGTONE_RESULT) {
        ringtoneURI = data.getParcelableExtra(RingtoneManager.EXTRA_RINGTONE_PICKED_URI);
        if (ringtoneURI != null) {
            try {
                ringtoneString = RingtoneManager.getRingtone(this, ringtoneURI).getTitle(this);

            } catch (final Exception e) {
                ringtoneString = "unknown";
            }
            ringtone.setText(ringtoneString);
        }
    }

} 
```

清单看起来像这样：

```
<uses-sdk
android:maxSdkVersion="17"
android:minSdkVersion="8"
android:targetSdkVersion="8" 
/> 
```

# mysql - MySQL 连接问题，查询挂起

> ID：14285123
> 
> 赞同：0
> 
> 时间：2013-01-11T19:17:10.207
> 
> 标签：mysql, performance, join

我有一个表格，其中包含带有时间戳的数字数据点，如下所示：

```
CREATE TABLE `value_table1` (
  `datetime` datetime NOT NULL,
  `value` decimal(14,8) DEFAULT NULL,
  KEY `datetime` (`datetime`)
) ENGINE=InnoDB; 
```

我的表每 5 秒保存一个数据点，因此表中的时间戳将是，例如：

```
"2013-01-01 10:23:35"
"2013-01-01 10:23:40"
"2013-01-01 10:23:45"
"2013-01-01 10:23:50" 
```

我有几个这样的值表，有时需要查看两个值序列之间的比率。因此，我尝试加入，但似乎不起作用：

```
SELECT value_table1.datetime, value_table1.value / value_table2.rate 
    FROM value_table1
    JOIN value_table2
    ON value_table1.datetime = value_table2.datetime
    ORDER BY value_table1.datetime ASC; 
```

在查询上运行 EXPLAIN 显示：

```
+----+-------------+--------------+------+---------------+------+---------+------+-------+---------------------------------+
| id | select_type | table        | type | possible_keys | key  | key_len | ref  | rows  | Extra                           |
+----+-------------+--------------+------+---------------+------+---------+------+-------+---------------------------------+
|  1 | SIMPLE      | value_table1 | ALL  | NULL          | NULL | NULL    | NULL | 83784 | Using temporary; Using filesort |
|  1 | SIMPLE      | value_table2 | ALL  | NULL          | NULL | NULL    | NULL | 83735 |                                 |
+----+-------------+--------------+------+---------------+------+---------+------+-------+---------------------------------+ 
```

**编辑** 问题解决了，不知道我的索引消失在哪里。EXPLAIN 显示了，谢谢！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:30:35.993

正如您的解释所示，查询未在连接上使用索引。如果没有索引，它必须扫描两个表中的每一行来处理连接。

首先，确保连接中使用的列都被索引。

如果是，则可能是导致问题的列类型。您可以创建时间的整数表示，然后使用它来连接两个表。

# objective-c - JSON，cellForRowAtIndexPath 错误

> ID：14285130
> 
> 赞同：0
> 
> 时间：2013-01-11T19:17:47.850
> 
> 标签：objective-c, json, uitableview

努力寻找我的代码的错误所在。在第一次加载视图时，一切正常并且加载正常，但是当我重新访问该视图时，前两个单元格似乎是空的。我记录了字典（dict）`viewWillAppear:`并且它记录了数据，所以错误必须在`cellForRow`方法中。看看我的方法，看看我哪里出错了，第三个单元格填充了第三条数据，所以我完全被难住了，但是前两个单元格完全是空白的，没有数据。

[http://pastebin.com/Va84MG5g](http://pastebin.com/Va84MG5g)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T19:59:14.383

首先，你为什么要在你的方法中进行所有这些疯狂的`UITableViewCell`定制`tableView:cellForRowAtIndexPath:`？创建一个自定义`UITableViewCell`子类并在那里进行设置。

在类的`initWithStyle:`方法中，用 的框架添加所有子视图`CGRectZero`，因为在初始化时，表格视图单元格不知道它有多大。您也可以在此处设置文本对齐方式、颜色等。然后，在 中`layoutSubviews`，继续设置所有帧。覆盖`prepareForReuse`并将您的内容`UIImageViews`设置为零。这将有助于提高重复使用单元的性能。

至于为什么您没有在前两个单元格中看到您的数据，我最初的想法是这与您设置单元格以供重用的方式有关。您要求您的 tableView 出列常规`UITableViewCell`并且仅在返回的单元格为`nil`. 那么当它返回 a 时会发生什么`UITableViewCell`？您跳过分配/初始化所有这些子视图的部分，因此您基本上没有向单元格添加任何内容。我觉得如果您创建一个自定义子类并要求您`UITableView`将其出列**，**您将得到您正在寻找的结果。

**注意：**如果您的目标至少是 iOS 5，您可以`UITableViewCell`在 nib 中创建您的布局并将 nib 注册到表格视图。这样做将保证您总是得到一个出队的单元格，并且您永远不必进行 if (cell == nil) 检查。如果你的目标是 iOS 6，你可以注册一个`UITableViewCell`子类。

# php - PHP：从路径中获取最后一个目录名

> ID：14285134
> 
> 赞同：17
> 
> 时间：2013-01-11T19:18:06.353
> 
> 标签：php, trim

我正在编写一个函数来获取一些不同的数据库查询。现在事情进展顺利，但只需要从定义的路径中获取最后一个目录名。

```
$qa_path=site_root('/learnphp/docs/'); 
```

我只想`docs`从上面的路径中获取。这里 site_root 什么都不是，`$_SERVER['DOCUMENT_ROOT']`那么我怎么才能得到`docs`呢？

谢谢

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-11T19:21:27.763

最简单的方法是使用`basename($yourpath)`您可以在此处看到的：http: [//php.net/basename](http://php.net/basename)

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2014-11-06T11:52:42.353

如果您的字符串末尾包含文件，则提供的答案不起作用，例如：

```
basename('/home/mypath/test.zip'); 
```

给

```
test.zip 
```

因此，如果您的字符串包含文件，请不要忘记先对其进行**dirname**

```
basename(dirname('/home/mypath/test.zip')); 
```

给

```
mypath 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-03-12T08:27:40.467

这是最简单的方法：

```
<?php
  echo basename(getcwd());
?> 
```

getcwd() = 给你完整的目录路径 basename() = 给你最后一个目录

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-11T19:21:40.007

尝试`explode('/', '/learnphp/docs/')` 将字符串拆分为数组位置。然后获取最后一个位置。

这里有更多信息： http: [//php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-11T19:22:11.327

你可以使用这个简单的片段：

```
$qa_path=site_root('/learnphp/docs/');
$qa_path = explode("/", $qa_path);
$qa_path = $qa_path[count($qa_path) - 1]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-11T19:24:35.590

```
$qa_path=explode('/', '/learnphp/docs/');
echo $qa_path[2]; // output docs 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-11T19:38:39.930

这将帮助你

```
$qa_path=site_root('/learnphp/docs/');
$q_path = explode ("/", $qa_path);
$lastV =  end($q_path); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-08-14T04:27:48.843

这将为您提供当前目录名称： `echo basename(dirname(__FILE__));`

# ruby - 如何构建带有孩子的 Mongoid 对象的 json 对象？

> ID：14285135
> 
> 赞同：4
> 
> 时间：2013-01-11T19:18:09.017
> 
> 标签：ruby, mongoid

我有两个简单的课程

```
class Band
  include Mongoid::Document
  field :name, type:String
  has_many :members
end

class Member
  include Mongoid::Document
  field :name, type: String
  belongs_to :band
end 
```

在我为测试目的创建了两个对象之后

```
Band.create(title: 'New Band')
Band.members.create(name: 'New Member') 
```

我得到了下一个数据库状态：

```
> db.bands.find()
{ "_id" : ObjectId("..."), "title" : "New Band" }
> db.members.find()
{ "_id" : ObjectId("..."), "name" : "New Member", "band_id" : ObjectId("...") } 
```

当我尝试构建 Band 对象的 json 对象时，我得到没有子对象的数据：

```
{"_id":"...","title":"New Band"} 
```

但我需要这样的东西：

```
{"_id":"...","title":"New Band", "members" : {"_id":"...","title":"New Member"}} 
```

如何与孩子一起构建json？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T19:58:01.527

您可以覆盖`serializable_hash`：

```
class Member
  include Mongoid::Document
  field :name, type: String
  belongs_to :band

  def serializable_hash(options={})
    {
      id: id,
      name: name
    }
  end
end

class Band
  include Mongoid::Document
  field :title, type: String
  has_many :members

  def serializable_hash(options={})
    {
      id: id,
      title: title,
      members: members.inject([]) { |acc, m| acc << m.serializable_hash; acc }
    }
  end  
end 
```

假设你有一个有成员的乐队：

```
band = Band.create(title: 'New Band')
band.members.create(name: 'New Member') 
```

在这种情况下，`band.to_json`会返回类似的东西：

```
"{\"id\":...,\"title\":\"New Band\",\"members\":[{\"id\":...,\"name\":\"New Member\"}]}" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-03T16:43:09.283

试试这个：

```
a_band = Band.last
a_band.as_json(methods: [:members]) 
```

Mongoid 为您的关系自动生成辅助方法，您可以在构建 JSON 对象时包含这些方法。您可以使用`a_band.members`从数据库中获取乐队的成员，因此您可以将该方法包含在您的 JSON 对象中，就像模型上的任何其他方法一样。

# delphi - Delphi自动完成按钮点击过程

> ID：14285139
> 
> 赞同：2
> 
> 时间：2013-01-11T19:18:15.477
> 
> 标签：delphi, button, compiler-construction, autocomplete, buttonclick

因此，当您双击一个按钮并自动完成按钮单击过程时，我很好奇编译器如何知道该函数链接到哪个按钮。例如它会使 TForm1.Button1Click(Sender: TObject);

那么编译器如何知道链接的按钮呢？它是否只是解析过程名称以查看它是什么按钮？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-11T19:26:58.423

您可以将方法命名为任何名称，Delphi 不会*解析*或使用方法名称来识别关联的组件或事件。

如果您在设计时执行此操作，则与事件处理程序的事件关联存储在 DFM 文件中，您可以在其中找到如下内容：

```
 object Button1: TButton
    Left = 104
    Top = 64
    Width = 75
    Height = 25
    Caption = 'Button1'
    TabOrder = 0
    OnClick = Button1Click
  end 
```

这`OnClick = Button1Click`使您的程序在创建表单时，在运行时将方法（也称为事件处理程序）与对象的事件（一种特殊的属性）相关联。

您还可以在运行时将事件与任何兼容的方法相关联，例如使用以下代码：

```
type
  TForm1 = class(TForm)
    Button1: TButton;
  private
    procedure MyClick(Sender: TObject);
    procedure MyOtherClick(Sender: TObject);

  ....

procedure TForm1.AssociateClickHandler;
begin
  Button1.OnClick := MyClick;
end;

procedure TForm1.MyClick(Sender: TObject);
begin
  Button1.OnClick := MyOtherClick; //from now, the other method with handle the event.
end; 
```

# 使用任何你想要的名字

在设计时，您可以直接在 ObjectInspector 中为事件处理程序编写所需的名称，然后按 Enter 键，Delphi 将为您创建具有该名称的方法。如果您不提供名称，Delphi 会使用组件名称以及不带“On”的事件名称自动生成方法名称。如果该方法已经存在，IDE 只需将事件与该方法相关联。

编写所需的方法名称：

![在此处输入图像描述](../Images/a810ac87483e16f7aace173ef95ea631.png)

按回车：

![在此处输入图像描述](../Images/047c4d8afa0410de0075b00b18cf93ae.png)

您可以将相同的方法关联到同一对象的不同事件，或关联到不同对象的同一事件。

例如，您可以将上面显示的 MyOwnMethodName 与任意数量的按钮的 OnClick 相关联。通常，Sender 参数包含对触发事件的对象的引用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T20:27:57.280

编译器不参与其中。IDE 正在处理所有事情。

当您在设计时双击控件时，表单设计器会知道单击的是哪个控件，因为它是内存中的活动对象。

表单设计器使用控件的 RTTI 和注册`TComponentEditor`实现（如果未注册用户定义的实现，VCL 提供默认实现）来确定该类类型的哪个事件是默认事件（在 的情况下`TButton`，即`OnClick`事件） ，然后使用 RTTI 检查该事件是否已经分配了处理程序。

如果尚未分配处理程序，则表单设计器使用 RTTI 读取控件的`Name`属性和事件的声明名称，将它们连接在一起（删除`On`事件名称的部分），并在源代码中查找该名称的过程的控件`Owner`。如果未找到该过程，则在那时创建它。

一旦表单设计器找到该过程，它就会使用 RTTI 来验证该过程是否与事件的签名匹配，然后如果需要，将该过程分配为新的事件处理程序，然后最终跳转到代码编辑器中的过程实现。

如果您在对象检查器中单击控件的事件并重命名处理程序，源代码中的相应过程将被重命名以匹配新名称，并且任何其他事件，即使是在其他组件中，链接到同一过程也会更新通过他们的 RTTI 来匹配新名称。

编译项目时，IDE 首先利用 RTTI 和注册的组件流式处理例程来创建包含所有各种组件属性/事件值的 .DFM 文件。然后它调用编译器，编译器将 .DFM 文件中的源代码和链接作为二进制资源编译到最终的可执行文件中。

在运行时，RTL 解析 DFM 资源，使用 RTTI 和注册的自定义组件流式处理例程，以定位各种组件并根据需要连接它们的属性/事件值。

# ruby-on-rails - Rails：将多个has_many关系串在一起

> ID：14285145
> 
> 赞同：0
> 
> 时间：2013-01-11T19:18:45.697
> 
> 标签：ruby-on-rails, has-many, rails-activerecord

我有三个看起来像这样的模型：

```
Class User < ActiveRecord::Base
  has_many :comments
end

Class Comment < ActiveRecord::Base
  belongs_to :user
  has_many :votes
end

Class Vote < ActiveRecord::Base
  belongs_to :comment
end 
```

现在我想获得与用户评论相关的所有投票，如下所示：

```
@user.comments.votes 
```

但这会引发错误：

```
undefined method `votes' for #<ActiveRecord::Relation:0x3f6f8a0> 
```

这似乎应该可以工作，但我怀疑 ActiveRecord 正在对更深层次的 has_many 关系咳嗽。我已经将一个 SQL 查询组合在一起，可以获得所需的结果，但我怀疑使用纯 ActiveRecord 有一种更简洁的方法。有小费吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T19:44:03.177

您应该使用[has_many :through 关联](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)

在你的情况下，它会是

```
Class User < ActiveRecord::Base
  has_many :comments
  has_many :votes, :through => :comments
end

Class Comment < ActiveRecord::Base
  belongs_to :user
  has_many :votes
end

Class Vote < ActiveRecord::Base
  belongs_to :comment
end 
```

然后简单地获得选票

```
@user.votes 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T19:27:45.100

试试这个：

```
Vote.joins(comment: :user).where(users: {id: @user.id}) 
```

# position - 如何在 XQuery 中为序列中的位置赋值？

> ID：14285146
> 
> 赞同：1
> 
> 时间：2013-01-11T19:18:47.087
> 
> 标签：position, xquery, variable-assignment, sequence

我有一个长度为 $n 的序列初始化为零：

```
let $seq := (for $i in (1 to $n) return 0) 
```

我可以轻松获得职位...

```
return $seq[5] 
```

...但是我该如何更新呢？（以下不起作用）

```
let $seq[5] := $seq[5] + 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:39:31.160

如果您正在使用支持 XQuery 3 映射的 XQuery 实现（例如 Saxon、BaseX），您可以使用这些：

```
declare namespace map="http://www.w3.org/2005/xpath-functions/map";

(: Fill map with square numbers :)
let $map := map:new(
  for $i in (1 to 10)
  return map:entry($i, $i*$i)
)
(: Overwrite a single value :)
let $map := map:new(($map, map:entry(2, 5)))
(: Fetch this value :)
return map:get($map, 2) 
```

But generally it is possible to solve a problem without maps and in most cases this code will probably run faster as it will get better optimized.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:27:39.747

XQuery 是一种函数式语言，而不是过程式语言，因此变量是**不可变**的——它们一旦分配就不能更新。你需要做这样的事情并创建一个新序列：

```
let $seq2 := 
  for $n at $pos in $seq
  if ($pos eq 5) 
  then $n + 1
  else $n 
```

通常，在 XQuery 中，最好设计算法以便不需要这种类型的可变变量解决方法。如果您有需要更新的数据，请考虑将其放入数据库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T19:31:57.627

> ...but how do I update it? (the following doesn't work)
> 
> ```
> let $seq[5] := $seq[5] + 1 
> ```

**Using pure XPath** (which is also pure XQuery :) **here is probably the shortest way to specify this:**

```
subsequence($seq, 1, 4), $seq[5] + 1, subsequence($seq, 6) 
```

This produces a *new* sequence whose items are the same as the items of `$seq`, except that its 5th item's value is `$seq[5] + 1`.

As others have noted, XPath and XQuery are functional languages and among other things this means that a variable, once defined, cannot have its value modified.

# actionscript-3 - 在子类 AS3 中使用 super()

> ID：14285157
> 
> 赞同：2
> 
> 时间：2013-01-11T19:19:25.910
> 
> 标签：actionscript-3

为了解释我的问题，我写了一些代码。

这是超类：

```
package

{
    public class Cclass
    {
        public function Cclass(a:int, words:String)
        {
            trace("i am:"+a," years old and i will:"+words," you");
        }
    }
} 
```

这是子类：

```
package
{
    public class Dclass extends Cclass
    {
        public function Dclass(a:int, words:String)
        {
            super(a, words);
            trace(a, words);

        }
    }
} 
```

当我测试它时，我得到以下输出：

```
i am:5  years old and i will:kill  you
i am:6  years old and i will:strangle  you
6 strangle 
```

super 运行 the 的构造函数`Cclass`并再次执行相同的操作，但是如果我尝试在没有“super(a, words)”的情况下运行它，它就不起作用，这是可以理解的。我的问题是如何`Dclass`在`trace(a, words);`不运行`Cclass`. 我想得到这个输出：

```
i am:5  years old and i will:kill  you
6 strangle 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:41:58.937

当扩展一个类时，AS3 运行时将自动调用基类构造函数。
因此，您可以假设在扩展类时 super.constructor 总是会发生，无论您是否编写代码。
这就是为什么在构造函数中永远不要包含任何代码的好习惯。

这并不意味着通过一点按摩就无法修复它

```
public class Cclass{
  public function Cclass( ){
  }
  public function doTrace( a:int, words:String):void{
    trace("i am:"+a," years old and i will:"+words," you");
  }
}

public class Dclass extends Cclass{
    public function Dclass(){
      //super();// this is implied that it will always happen
    }
    public function myTrace(a:int, words:String):void{
        this.doTrace(a, words);
    }
}

var dClass:Dclass = new Dclass()
dClass.myTrace(5,'kill') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T19:42:02.153

超级构造函数总是在 actionscript 中运行，如果你不声明它，它无论如何都会自动运行它。最好的方法是让它成为一个函数。

```
public class cc {

     public function doSomething(a:int, words:String)
     {
         trace("i am:"+a," years old and i will:"+words," you");
     }
}

public class dd extends cc {

     override public function doSomething(a:int, words:String) {
         trace("i am:"+a," years old and i will:"+words," you");
     }
}

var d = new dd();
d.doSomething(5, 'kill'); 
```

# android - 如何禁用Android的模拟器相机和假相机？

> ID：14285160
> 
> 赞同：0
> 
> 时间：2013-01-11T19:19:43.053
> 
> 标签：android, android-emulator, android-sdk-tools

我正在尝试创建一个完全剥离的 AVD：没有 GPS、没有摄像头等。这是为了模仿那些拥有绝对糟糕的手机甚至连最基本的东西都没有的用户。

我创建了一个针对 Android 1.6 并关闭 GPS 的 AVD，但找不到禁用相机的方法。

我尝试将“hw.camera = no”添加到 AVD 的 ini 文件中，但这似乎没有帮助。

每当我的应用程序在 AVD 上运行时，它仍然会检测到相机，Camera.open() 仍然会返回一个 Camera 对象，我什至可以从中获取一张图片（模拟器生成的一些黑白方块）。有谁知道如何完全删除相机的存在？我需要 Camera.open() 失败，这样我才能看到我的应用程序在这些条件下的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:24:38.603

如果一切都失败了，请创建一个工厂类。

```
class CameraFactory{
    boolean debugMode;
    static Camera open(){
        if(debugMode){
            return null;  //or whatever it does, throw an exception?
        }
        else{
            return real_camera_open;
    }
} 
```

然后你可以假装在好的硬件上没有相机

# php - 仅在 PHP 中在未转义的空白处爆炸

> ID：14285161
> 
> 赞同：0
> 
> 时间：2013-01-11T19:20:00.557
> 
> 标签：php, escaping, whitespace, explode

我想在 PHP 中分解这种字符串：

```
$foo = "foo.txt da\ code.txt bar.txt"; 
```

我想把它爆炸成：

```
["foo.txt", "da\ code.txt", "bar.txt"] 
```

我知道我可以使用 preg_split 但我不知道应该把什么作为正则表达式。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T17:45:32.617

您可以正面匹配任何以字母字符开头的空格。

```
<?php
$foo = "foo.txt da\ code.txt bar.txt";

print_r(preg_split("/(?<=[a-zA-Z])\s/", $foo)); 
```

您也可以对一般情况使用负面的后视

```
<?php
$foo = "foo.txt da\ code.txt bar.txt something.mp3 other@ 9asdf";

print_r(preg_split('/(?<!\\\\)\s/', $foo)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T17:55:01.607

这是一个时髦的非正则表达式“解析器”。各种*好玩*。*正则表达式*出现之前的世界是什么样的？我的意思是，它一定是*工作*。`;)`

```
<?php

$foo = "foo.txt da\ code.txt bar.txt";
$foos = array();
$char = 0;
$index = 0;
$lookback = '';

while ($char < strlen($foo)) {
    $lookback = $foo{$char-4} . $foo{$char-3} . $foo{$char-2} . $foo{$char-1} . $foo{$char};

    if ($lookback == '.txt ') $index++;

    $foos[$index] .= $foo{$char++};
}

print_r(array_map('trim', $foos));

?> 
```

[http://codepad.org/XMfLemeg](http://codepad.org/XMfLemeg)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T17:48:38.787

您可以使用 preg_split() 但它很慢，所以如果逃逸空间是您唯一的问题，那么您可以更快地做到这一点：

```
$array1 = explode(' ', $list);
$array2 = [];
$appendNext = false;
foreach($array1 as $elem)
{
    if ($appendNext)
    {
        array_push($array2, array_pop($array2) . ' ' . $elem);
    }
    else
    {
        $array2[] = $elem;
    }
    $appendNext = (substr($elem, -1) === '\\');
}
var_dump($array2); 
```

如果你真的想通过正则表达式来做到这一点，这里有一个可行的解决方案：

```
print_r(preg_split("/(?<!\\\)\s/", $foo)); 
```

[http://codepad.org/ngbDaxA3](http://codepad.org/ngbDaxA3) 但它会比上面慢

# javascript - 如何使用 nextAll 使用 jquery/ 查找所有输入

> ID：14285163
> 
> 赞同：2
> 
> 时间：2013-01-11T19:20:08.893
> 
> 标签：javascript, jquery, html, input, focus

我有这个html：

```
 <div class="field phone">
            <input type="text" maxlength="3" />
        </div>
        <div class="field phone number1">
            <input type="text" maxlength="3" />
        </div>
        <div class="field phone number2">
            <input type="text" maxlength="4" />
        </div> 
```

然后我正在使用

```
 $(".phone input:not(:last)").keydown(function() {
        var that = this;
        setTimeout(function() {
            if (that.prevValue != $(that).val()) {
                that.prevValue = $(that).val();
                if ($(that).val().length == $(that).attr("maxlength")) {
                    $(that).nextAll("input")[0].focus();
                }
            }
        });
    }); 
```

问题是`$(that).nextAll("input")[0]`返回未定义，而不是输入选择器，我无法使用`focus()`它

任何想法这里发生了什么？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T19:28:42.470

你可以替换：

```
$(that).nextAll("input")[0].focus(); 
```

有类似的东西

```
$(that).parent().next(".phone").find("input").focus(); 
```

正如 Kevin B 所说，`.next`只`.nextAll`对兄弟姐妹工作，所以你需要回到父母，回到父母的兄弟姐妹，然后再回到孩子。

# assembly - 装配堆栈访问

> ID：14285164
> 
> 赞同：0
> 
> 时间：2013-01-11T19:20:19.687
> 
> 标签：assembly, x86, fpu

```
.data
     oldcw: .int 
     clear: .long 0xF0FF
     round: .long 0x0D00

    fstcw oldcw
    fwait
    mov oldcw,%ax
    and %ax,clear
    or %ax,round
    pushl %eax
    fldcw [%esp]
    popl %eax 
```

我收到关于括号的错误。

```
invalid char '[' beginning operand 1 `[%esp]' 
```

任何人都可以帮助解决括号的问题吗？我试图在这里用 fldcw 修改控制字...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:17:48.357

在气体使用的 AT&T 语法中，圆括号而不是方括号用于表示内存访问。参见例如[这里](http://en.wikibooks.org/wiki/X86_Assembly/GAS_Syntax#Address_operand_syntax)。

换句话说，它应该是：

```
 fldcw (%esp) 
```

另请注意，与 intel 语法相比，操作数是相反的，因此如果您习惯了，您的代码可能不会按照您的预期执行。

如果您更喜欢 intel 语法，您可以使用该`.intel_syntax noprefix`指令。

# python - 用于顺序、条件和修改函数应用的高阶函数？

> ID：14285166
> 
> 赞同：1
> 
> 时间：2013-01-11T19:20:27.810
> 
> 标签：python, functional-programming, monads

我正在以函数式风格编写 Python（我认为我所得到的类似于 monad？）。到目前为止，这是我为三个功能硬编码的内容。如果我有 10 个或 100 个呢？

```
 # a list of (function, function, function), each of which accept 
    # a scalar and return a list
    funcs = [(lambda a: [a, a], lambda a: [a, a, a], lambda a: [a])] * 10

    possible = []
    car = 3
    for a, b, c in funcs:
        ra = a(car)
        if ra:
            rb = b(ra[0])
            if rb:
                rc = c(rb[0])
                if rc: # last function
                    possible.extend(rc) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:47:55.200

这是非常单调的。

您可能想要做的是使用 monad 的`bind`函数（在这种情况下使用 Maybe 或 Either monad）运行折叠，尽管您的各个函数必须返回一个 monadic 值（即您希望原始返回的列表值包裹在 monad 的特定值构造函数中的函数）。

您的最终调用将是这样的（在 Haskell 和 Python 的混合中）：

```
fold Maybe.bind Maybe.mreturn(car) funcs 
```

（您可能希望 Maybe.bind 在 lambda 中，因为 python 不像 Haskell 那样做部分应用程序，我只是懒惰。）

这是一个帮助您入门的[python monad 库/脚本。](http://www.valuedlessons.com/2008/01/monads-in-python-with-nice-syntax.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:46:24.130

也许是这样的：

```
funcs = [(lambda a: [a, a], lambda a: [a, a, a], lambda a: [a])] * 10
initial = [3]
result = []
for function_chain on funcs:
    running = initial
    for function in function_chain:
        running = function(running[0])
        if not running[0]:
            break
    else:
        result.extend(running) 
```

# android - Android，我可以用那个监听器做什么我点击按钮并且没有响应

> ID：14285167
> 
> 赞同：-1
> 
> 时间：2013-01-11T19:20:29.460
> 
> 标签：android

我不知道该代码有什么问题..模拟器可以工作，但是该按钮无法与侦听器一起使用。我做了所有我清理项目的事情，我还做了一个侦听器，它应该可以工作。

```
package com.example.dialog;

import android.os.Bundle;
import android.view.View;

import android.widget.Toast;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.AlertDialog.Builder;
import android.app.Dialog;
import android.content.DialogInterface;

public class MainActivity extends Activity {
    CharSequence[] items = { "Goolge", "Apple", "MaC Os" };
    boolean[] checkedItems = new boolean[items.length];

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        // Button btn= (Button)findViewById(R.id.dialog);
        // btn.setOnClickListener((OnClickListener) this);
    }

    public void onClick(View v) {
        showDialog(0);

    }

    protected Dialog onCreatDialog(int id) {
        switch (id) {
        case 0 :
            Builder builder = new AlertDialog.Builder(this);
            builder.setIcon(R.drawable.ic_launcher);
            builder.setTitle("this is a List of items..");
            builder.setNegativeButton("Ok",
                    new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface arg0, int arg1) {
                            Toast.makeText(getBaseContext(), "Ok clicked",
                                    Toast.LENGTH_SHORT).show();

                        }
                    });
            builder.setPositiveButton("Cancel",
                    new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                            Toast.makeText(getBaseContext(), "cancel cliked",
                                    Toast.LENGTH_SHORT).show();

                        }
                    });
            builder.setMultiChoiceItems(items, checkedItems,
                    new DialogInterface.OnMultiChoiceClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog, int which,
                                boolean isChecked) {
                            Toast.makeText(
                                    getBaseContext(),
                                    items[which]
                                            + (isChecked ? " checked"
                                                    : " unchecked"),
                                    Toast.LENGTH_SHORT).show();

                        }
                    });
            return builder.create();

        }

        return null;

    }

}

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

        <Button
            android:id="@+id/dialog"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:onClick="onClick"
            android:text="@string/click_me" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:30:27.510

取消注释此代码：

```
Button btn = (Button)findViewById(R.id.dialog);
btn.setOnClickListener(new View.onClickListener(){
     @Override
     public void onClick(View v) {
     //Do your stuff
     }
}); 
```

如果您想将您的 Activity 用作 onClickListener，请在 setOnClickListener 上保留“this”，但您的 Activity 必须实现 OnClickListener 接口，并实现其方法才能工作。

# r - 使用 ggplot 创建条形图

> ID：14285171
> 
> 赞同：-1
> 
> 时间：2013-01-11T19:20:46.730
> 
> 标签：r, plot, ggplot2

你能帮我使用 ggplot2 包和`mat`矩阵中的数据创建以下条形图吗？

```
mat <- matrix(c(70.93,78.58,78.72,69.24,62.53,43.85,83.49,70.00,78.30,78.11,71.16,63.82,47.37,89.87),ncol=2)
colnames(mat) <- c("Crude","Standardized")
rownames(mat) <- 2006:2012

library(gplots)
library(RColorBrewer)
my_palette <- palette(brewer.pal(7,"Set1"))

barplot2(mat,
main="Crude and Standardized Rates",
xlab="Type", ylab="Rate", xlim=c(0,20), ylim=c(40,100),
col=my_palette, beside=TRUE, plot.grid = TRUE, xpd=FALSE)
legend(locator(1), rownames(mat), title ="Year",fill=my_palette) 
```

![在此处输入图像描述](../Images/985b340a8c61d86f3dc49dba305a3931.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T19:31:44.563

这是一个非常简单的 ggplot 图。其原理是将数据融合成长格式，然后进行美学映射。应用 brewer 调色板只是使用比例的问题。

```
library("reshape2")

tmp <- melt(mat)
names(tmp) <- c("Year", "Type", "Rate")

library("ggplot2")

ggplot(tmp, aes(x=Type, y=Rate, fill=factor(Year))) +
    geom_bar(stat="identity", position="dodge", colour="black") +
    scale_fill_brewer(type="qual", palette=1) 
```

![在此处输入图像描述](../Images/422a65dd4732ef88c94f262485906242.png)

编辑：

在评论中，您询问了如何放大条形图，@joran 给出了`coord_cartesian`可以做到这一点的回应。但我想回应他的担忧。不要那样做。条形按面积表示其价值；不是从 0 开始意味着你在扭曲差异。您可以更改表示以显示差异：

```
ggplot(tmp, aes(x=Year, y=Rate, colour=Type)) +
    geom_point() +
    geom_line() 
```

![在此处输入图像描述](../Images/ca2b52ba69bc479b09352ade1e77aed7.png)

这使用点和线来表示它们的值，当轴不包含 0 时不会扭曲。

# android - LinearLayout 中的 fill_parent 没有得到尊重

> ID：14285173
> 
> 赞同：1
> 
> 时间：2013-01-11T19:20:57.427
> 
> 标签：android, android-layout

经过对 SO 和 google 的大量研究，我没有看到任何人遇到与我遇到的完全相同的问题，所以这里是：

我最近在一个安卓应用上重做了整个 UI。在大多数情况下，我只对每个屏幕进行了外观更改。它们按预期完美地出现在 Eclipse 的 UI 编辑器中。但是，在执行此操作后，所有测试设备和模拟器上的两个屏幕都停止正确布局。

现在，这两个屏幕的一个大问题是根级 LinearLayout 似乎并没有真正尊重 layout_height 或 layout_width 的 fill_parent。看起来它正在被测量，就好像它被设置为 wrap_content 一样。它只占用了大约 70% 的屏幕——这足以将单个元素包裹在根 LinearLayout 中。我会发布一张图片，但作为一个新用户，我不允许这样做。

布局不会拉伸以填满屏幕。这是布局的代码，除了LinearLayouts中还有一些包含TextView和EditText。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#FF000000"
    android:orientation="vertical" >

<TextView
    style="@style/sans.white.16.bold"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:paddingTop="4dp"
    android:text="@string/edit_account" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

<com.teamunify.ondeck.widget.TUTextView
    style="@style/sans.white.14"
    android:layout_width="100dp"
    android:layout_height="wrap_content"
    android:text="@string/first_name" />

<com.teamunify.ondeck.widget.TUEditText
    android:id="@+id/acc_editor_first"
    android:layout_width="fill_parent"
    android:layout_height="40dp"
    android:selectAllOnFocus="true"
    android:singleLine="true" />
</LinearLayout> 
```

我认为根 LinearLayout 应该填充高度和宽度。我在我们的应用程序中多次使用相同的布局，没有问题。（快速计数显示，我在我们的应用程序中使用了 76 个 LinearLayouts，除了其中两个之外，所有这些都在工作。）

起初，我怀疑我们的自定义类度量可能会破坏一些东西，所以我将布局更改为使用所有普通的 EditText，但没有任何变化。我仔细检查了活动，但除了加载此 xml 之外，它什么也没做。所以，无奈之下，我重新设计了这样的布局：

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="#FF000000"
        android:orientation="vertical" >

    <TextView
        style="@style/sans.white.16.bold"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center|top"
        android:paddingTop="4dp"
        android:text="@string/edit_account" />

    </LinearLayout> 
```

之后，“编辑帐户”字样出现，左上角有黑色背景。显然，LinearLayout 没有填充父级。

长话短说，我在问如何解决这个问题，以便 LinearLayout 按预期填充屏幕。

我完全不知道为什么会发生这种情况，我当然希望 SO 上的某个人有一个想法。这让我把头发拉了出来！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:29:28.790

尝试为根布局设置固定宽度和高度。然后只有你才能调试谁在驱动长度和宽度。父活动或后台活动很可能正在设置维度。一旦确定了根本原因，您就可以返回原始设置。

到目前为止，从这里给出的代码片段来看，这里没有错

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-17T18:45:34.717

如果您出于某种原因使用自定义活动作为其他活动的容器（在我们的例子中，我们正在重新创建 iOS 应用程序的外观，并且需要一个自定义菜单以显示在屏幕的按钮侧）窗口管理器似乎有点混淆嵌套活动的实际高度和宽度应该是什么。对 fillparent 或 matchparent 的调用最终会包装内容。

我们最终改变了容器活动类中几个方法的行为以使其工作。

# sql - 从一周的第一天开始查找季度

> ID：14285174
> 
> 赞同：0
> 
> 时间：2013-01-11T19:20:57.630
> 
> 标签：sql, sql-server-2005

我试图从一周的第一天开始找到季度。

例如，一周的第一天是`12/31/2012`

我希望该季度说 2013 年第一季度。但如果我从特定日期找到 Qtr，它会说 2012 年第四季度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:54:31.380

这是给 Oracle 的 - 年度周表......可能会给你一些想法：

```
-- ISO_WK# --
SELECT mydate
  , TRUNC(mydate, 'w') wk_starts
  , TRUNC(mydate, 'w') + 7 - 1/86400 wk_ends
  , TO_NUMBER (TO_CHAR (mydate, 'IW')) ISO_wk#  
FROM
(
 SELECT TRUNC(SYSDATE, 'YEAR')-1 + LEVEL AS mydate  -- 1st day of yr-1 day --
   FROM dual
CONNECT BY LEVEL <= 
  (-- First day of curr year – first day of past year --
   SELECT TRUNC(SYSDATE, 'YEAR')-TRUNC(ADD_MONTHS (SYSDATE, -12), 'YEAR') "Num of Days"   
     FROM dual
  )
 )
/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:47:48.637

我不确定这是否适用于您的所有情况，因此请使用不同的日期进行测试：

```
DECLARE @date DATETIME
SET @date = '2012-12-31'

SELECT 
    qtr = DATEPART(quarter, DATEADD(DAY, 7 - DATEPART(weekday, @Date), @date)),
    YearNum = DATEPART(YEAR, DATEADD(DAY, 7 - DATEPART(weekday, @Date), @date)) 
```

# android - 如何在 Android 中使用 Accelerometer 上下摇晃？

> ID：14285175
> 
> 赞同：0
> 
> 时间：2013-01-11T19:21:03.290
> 
> 标签：android, accelerometer, android-sensors

我尝试了以下方法，但它不能完美地工作。如果设备保持正常，那么它也会触发抖动事件。

```
@Override
public void onSensorChanged(SensorEvent event) {
    // TODO Auto-generated method stub

    long curTime = System.currentTimeMillis();
    // only allow one update every 200Ms.
    if ((curTime - lastUpdate) > 200) {

        lastUpdate = curTime;

        x = event.values[SensorManager.DATA_X];
        y = event.values[SensorManager.DATA_Y];
        z = event.values[SensorManager.DATA_Z];

        Vibrator vibrate = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);

        if (Round(y, 4) > 22) {
            vibrate.vibrate(200);
            Log.d("sensor", "==== Up Detected===");

        } else if (Round(y, 4) < -20) {
            vibrate.vibrate(200);
            Log.d("sensor", "==== Down Detected=== ");

        }

        mLastX = x;
        mLastY = y;
        mLastZ = z;
    }

}

public static float Round(float Rval, int Rpl) {
    float p = (float) Math.pow(10, Rpl);

    Rval = Rval * p;
    float tmp = Math.round(Rval);
    return (float) tmp / p;
} 
```

请帮忙。

任何帮助将不胜感激..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:39:50.557

应用低通滤波器作为您的 y 轴值。

基本过滤器将如文档中所述。

```
public void onSensorChanged(SensorEvent event){
  // In this example, alpha is calculated as t / (t + dT),
 // where t is the low-pass filter's time-constant and
 // dT is the event delivery rate.

 final float alpha = 0.8;

 // Isolate the force of gravity with the low-pass filter.
 gravity[0] = alpha * gravity[0] + (1 - alpha) * event.values[0];
 gravity[1] = alpha * gravity[1] + (1 - alpha) * event.values[1];
 gravity[2] = alpha * gravity[2] + (1 - alpha) * event.values[2];

 // Remove the gravity contribution with the high-pass filter.
 linear_acceleration[0] = event.values[0] - gravity[0];
 linear_acceleration[1] = event.values[1] - gravity[1];
 linear_acceleration[2] = event.values[2] - gravity[2];
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:31:59.493

传感器值非常原始且嘈杂。您需要在它们之上添加一层数字信号处理才能获得良好的效果。仅使用原始值会导致结果出现很多抖动。您正在尝试使用时间延迟做一些基本的事情，但您需要进行更多过滤。

此外，您会因震动而振动。这种振动会导致加速度计看到运动，从而导致更多误报。

# java - Java doFilter() 将 NPE 作为超类的一部分抛出

> ID：14285176
> 
> 赞同：0
> 
> 时间：2013-01-11T19:21:08.583
> 
> 标签：java, servlets, servlet-filters

好的 - 我最近在工作中使用 Java 过滤器做一些工作，在 Web 应用程序之间移动时我们经常需要回收代码；我们可以让过滤器查看一个相对位置，以便它们可以在多个上下文中使用，但我们仍然会经历很多。所以，我创建了一个超类来帮助代码生成；我还在超类中添加了 runFilter 方法作为抽象方法，只是为了使其与标准 doFilter 分开。超类代码如下所示：

```
public void doFilter(ServletRequest req, ServletResponse resp,
        FilterChain chain) throws IOException, ServletException {
    try {
        runFilter(req,resp,chain);
    }
    catch (Exception e) {
        getLogger().error("Error! Exception:",e);
    }
} 
```

现在，问题来了：每当扩展上述代码的过滤器触发时，我都会收到像我在上面的记录器中设置的错误，但我也从子类的 runFilter 内部获取记录器消息，表明它正在完成它的工作 - 转发甚至工作正常。我查看我的控制台，它显示子类正在访问过滤器链的行上发生的错误。

```
if (isExcluded(debugURI)) {
        chain.doFilter(request, response);
        return;
    } else if (request.getSession().getAttribute("USER") == null) {
        getLogger().info("Session with ID " + serialVersionUID + " has timed out. Redirecting to " + getRedirectTarget() + ".");
        response.sendRedirect(getRedirectTarget()); 
        chain.doFilter(request, response);
        return;
    }
    else {
        chain.doFilter(request, response);
        return;
    } 
```

FilterChain 是否也需要更新（或扩展）才能接收 runFilter 的调用？任何帮助都会非常有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-05T20:43:31.860

我很早就在使用 servlet 时偶然发现了这个错误。这个问题其实很简单。我在超类中产生了错误，因为每个过滤器实例化在基本层面上都失败了；然而，真正的错误是我尝试在 sendRedirect 之后调用 doFilter 方法 - 因为 sendRedirect 方法终止了链，所以我试图访问一个存根。任何重定向都需要在过滤器链中处理，因为 sendRedirect 会终止它。

# sql - 在 SQL Server 查询中多次显示一列

> ID：14285178
> 
> 赞同：0
> 
> 时间：2013-01-11T19:21:17.860
> 
> 标签：sql, sql-server, pivot

我需要一些有关 sql 查询的帮助。

我有两张桌子`USERS`和`ENDPOINT`。对于每个用户，表中定义了 3 行，`ENDPOINT`例如

```
USER   ENDPOINT      ENDPOINTTYPE
123    123456        HomePhone
123    456789        CellPhone
123    A@gmail.com   Email 
```

我想在一行中显示这些数据，例如

```
USER   HomePhone   CellPhone   Email 
```

你能告诉我实现这一目标的方法吗？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T19:42:19.010

这种类型的数据转换称为数据*透视*。SQL Server 具有从 SQL Server 2005 开始的数据透视函数。

在 SQL Server 2005 之前，这可以使用带有`CASE`表达式的聚合函数来完成：

```
select [user],
  max(case when ENDPOINTTYPE = 'HomePhone' then EndPoint end) HomePhone,
  max(case when ENDPOINTTYPE = 'CellPhone' then EndPoint end) CellPhone,
  max(case when ENDPOINTTYPE = 'Email' then EndPoint end) Email
from yourtable
group by [user]; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/53939/4)。

如果您使用的是 SQL Server 2005+，则数据透视查询将如下所示：

```
select *
from
(
  select [user], endpoint, endpointtype
  from yourtable
) src
pivot
(
  max(endpoint)
  for endpointtype in (HomePhone, CellPhone, Email)
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/ffc97/1)

如果您提前知道这些值，则上述查询非常有用。如果你不这样做，那么你会想要使用动态 sql：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(ENDPOINTTYPE) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT [USER],' + @cols + ' from 
             (
                select [USER], [ENDPOINT], [ENDPOINTTYPE]
                from yourtable
            ) x
            pivot 
            (
                max(ENDPOINT)
                for ENDPOINTTYPE in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/ffc97/2)

所有查询都返回相同的结果：

```
| USER | HOMEPHONE | CELLPHONE |       EMAIL |
----------------------------------------------
|  123 |    123456 |    456789 | A@gmail.com | 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T19:27:07.590

尝试这样的事情：

```
SELECT 
    U.[User], 
    EP1.EndPoint as 'HomeEndpoint', EP1.Endpotintype as 'HomeEndpointType', 
    EP2.EndPoint as 'CellEndpoint', EP2.Endpotintype as 'CellEndpointType', 
    EP3.EndPoint as 'EmailEndpoint', EP3.Endpotintype as 'EmailEndpointType'
FROM Users U
    LEFT JOIN EndPoint EP1 ON U.[User] = EP1.[User] AND EP1.EndPointType = 'HomePhone'
    LEFT JOIN EndPoint EP2 ON U.[User] = EP2.[User] AND EP2.EndPointType = 'CellPhone'
    LEFT JOIN EndPoint EP3 ON U.[User] = EP3.[User] AND EP3.EndPointType = 'Email' 
```

或者只返回这 4 列：

```
SELECT 
    U.[User], 
    EP1.EndPoint as 'Home Phone', 
    EP2.EndPoint as 'Cell Phone', 
    EP3.EndPoint as 'Email'
FROM Users U
    LEFT JOIN EndPoint EP1 ON U.[User] = EP1.[User] AND EP1.EndPointType = 'HomePhone'
    LEFT JOIN EndPoint EP2 ON U.[User] = EP2.[User] AND EP2.EndPointType = 'CellPhone'
    LEFT JOIN EndPoint EP3 ON U.[User] = EP3.[User] AND EP3.EndPointType = 'Email' 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!3/9d812/3) - 注意，我将列 User 更改为 UserId 因为它是保留字（或者您可以使用括号）。

# laravel - Laravel 4：to_array() 在哪里？

> ID：14285182
> 
> 赞同：4
> 
> 时间：2013-01-11T19:21:42.233
> 
> 标签：laravel, laravel-4

伙计，这越来越令人沮丧！

在 Laravel 4 中，使用 Eloquent 可以`var_dump(Worker::find(1));`：但是，如果我尝试使用`to_array()`，它就会崩溃：`var_dump(Worker::find(1)->to_array());`. 这会引发以下异常：

call_user_func_array() 期望参数 1 是一个有效的回调，类 'Illuminate\Database\Query\Builder' 没有方法 'to_array'

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-11T19:24:00.013

Laravel 4 中的方法现在是 camelCased

```
var_dump(Worker::find(1)->toArray()); 
```

# javascript - 获取列表值以在滑块中显示为标题

> ID：14285184
> 
> 赞同：0
> 
> 时间：2013-01-11T19:21:49.290
> 
> 标签：javascript, jquery

我正在使用 bjqs 滑块插件来滑动一些内容，目前除了下一个和上一个按钮之外，还有一个导航可以帮助用户选择所需的幻灯片，我想要做的是显示幻灯片的标题而不是数字。这个插件使用`<ul>`并且每个列表项都将是一张幻灯片，所以，我想知道我是否可以从`<li>`元素中获取价值并将其而不是数字。

这是生成数字的代码：

```
 var conf_markers = function() {
    // create a wrapper for our markers
    $m_wrapper = $('<ol class="bjqs-markers"></ol>');

    // for every slide, create a marker
    $.each($slides, function(key, slide){

        var slidenum    = key + 1,
            gotoslide   = key + 1;

        if(settings.animtype === 'slide'){
            // + 2 to account for clones
            gotoslide = key + 2;
        }

        var marker = $('<li><a href="#">'+ slidenum +'</a></li>'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:36:30.430

尝试用这个替换上面的代码，看看它是否有效。我只是看了一眼 github 上的滑块代码，理论上这应该可以工作。`$slides`应该指的`<li>`是包含带有标题的图像。

**编辑**

```
$.each($slides, function(key, slide){
    var slidenum    = key + 1,
        slidename   = $(slide).find('img').attr('title'),
        gotoslide   = key + 1;

    if(settings.animtype === 'slide'){
        // + 2 to account for clones
        gotoslide = key + 2;
    }

    var marker = $('<li><a href="#">'+ slidename +'</a></li>'); 
```

据我所知，基本的html应该是这样的：

```
<li class="bjqs-slide">
    <img src="img/banner01.jpg" title="Automatically generated caption">
    <p class="bjqs-caption">Automatically generated caption</p>
</li> 
```

这是一个[jsFiddle 示例](http://jsfiddle.net/23GvY/)

# c# - Windows 2k8 服务器和非常奇怪的 Oracle ORA-03113 错误后 32-> 64 位 C# 应用程序迁移

> ID：14285187
> 
> 赞同：3
> 
> 时间：2013-01-11T19:21:56.733
> 
> 标签：c#, oracle, 32bit-64bit, windows-server-2008-r2

将我的 C# .NET4 应用程序从旧的 32 位 Windows 2003 Server 迁移到新的 64 位 Windows 2008 Server 后，我遇到了一个非常奇怪的错误。我花了整整一周的时间试图找出发生了什么，但我的想法已经用完了，所以请给点建议。

**详细信息：**
我有一个小型 C# .NET 4.0 应用程序，它从远程 Oracle 数据库服务器中提取一些数据。该应用程序过去在旧的 32 位 Windows 2003 Server 上运行良好。上次我不得不将它移到带有 64 位 Windows 2008 R2 Server 的新服务器上。从那时起，一个返回约 500k 行的 Oracle 数据库查询无法正常工作。启动后大约 2 分钟，它会抛出类似于此的异常：

ORA-03113: 通信通道上的文件结束
进程 ID: 0
会话 ID: 288 序列号: 43544

我已经从 Oracle 站点为 64 位系统下载了最新的 ODAC 驱动程序：**64-bit ODAC 11.2 Release 5 (11.2.0.3.20)**。我都试过了：安装程序和 XCOPY 版本。通过 .bat 文件安装和配置 ODP.NET4。TNS 设置正确。

**远程 Oracle 数据库**位于其他国家/地区。我不是它的管理员。它是 Oracle9i EE，64 位，v9.2.0.8.0。

**我用于测试的 C# 应用程序**如下所示：

```
using (OracleConnection conn = new OracleConnection("User Id=userId; Password=pass; Data Source=database;"))
{
    conn.Open();
    string sql = "SELECT * FROM table";
    int i = 0;
    using (OracleCommand cmd = new OracleCommand(sql, conn))
    {
        using (OracleDataReader reader = cmd.ExecuteReader())
        {
            while (reader.Read())
            {
                if (i++ % 100 == 0)
                {
                    Console.WriteLine(i);
                }
            }
        }

    }
} 
```

我使用过`Adapter.Fill(dataTable)`，但对于测试数据阅读器更好 - 它或多或少地向我展示了某些事情发生的情况。

它使用 ODP.NET 目录中的 Oracle.DataAccess.dll（64 位或 32 位）。应用程序是为任何 CPU 编译的，但我也尝试过 x64 和 x86 编译（使用适当的 Oracle.DataAccess.dll 库）。

我在想这可能是一些超时，所以我尝试了不同的连接字符串选项，包括：
*Validate Connection=true*
*Connection Lifetime=600;Connection Timeout=600;*
*池化=假*
*登记=假；*
我什至将命令 CommandTimeout 设置为 600。

没有任何帮助 - 应用程序根据服务器负载下载不同数量的行 - 从 200k 到 300k 并引发 ORA-03113 异常。它大约需要 120 秒（但不完全是，有时是 130，有时更多，但大多数时间大约是 120 秒）。

奇怪的是，**有时查询完成 OK**，没有任何错误，下载所有 500k 行。例如，今天大约 30-40 次尝试失败，而 2 次成功。
同样奇怪的是，使用相同版本的 ODAC 驱动程序（用于 32 位系统）的相同应用程序每次在旧的 32 位 Windows 2003 Server 上运行良好。

**新的 64 位服务器**带有 Windows 2008 Server R2 Standard + SP1，所有实际更新，未安装防病毒软件。

我尝试了不同的配置：
- 安装 64 位 Oracle 驱动程序并使用 64 位 Oracle.DataAccess 库将应用程序编译到任何 CPU 和 x64，
- 安装 32 位 Oracle 驱动程序并使用 32 位 Oracle 将应用程序编译到任何 CPU 和 x86。数据访问库，

它们都不起作用。我注意到，有时我无法删除/重命名 Oracle 驱动程序目录，因为某些库被 MSDTC（分布式事务协调器）服务阻止。我尝试禁用它，将配置更改为与旧版本相同，增加服务器管理工​​具中的一些参数（其中包括：事务时间限制，从 60 秒到 0（无限制））。但我没有注意到任何改善。

我也尝试过禁用防火墙。

当连接中断 (?) 时，我在 Windows 事件日志中看不到任何匹配的警报或错误。

由于我对服务器管理没有经验，因此它主要使用默认值进行配置。它启用了 3 个角色：应用程序服务器、Web 服务器 (IIS) 和文件服务。

我与 Oracle 数据库服务器管理员交谈过，他向我保证，没有限制（超时、资源）设置，并且 Oracle 服务器日志没有显示任何错误。

再一次 - 相同的查询适用于 32 位 Windows 2003 Server，但不适用于 64 位 Windows 2008 Server。我还测试过，当我删除应用程序服务器和 Web 服务器角色时，它甚至在服务器上都不起作用（所以几乎很清楚）。

我还在家用 64 位 Windows7 笔记本电脑上测试了程序 + 64 位驱动程序，**它工作正常**。

**我假设**Windows 2008 Server 上可能有一些设置 - 无论是超时还是资源，我可能会点击它并终止连接/事务，但我不知道如何检查或在哪里查看。所以，请你指出我有什么问题吗？

--编辑：
我注意到的另一件事：当查询成功完成时（上次我昨天晚上设法做到这一点 - 当服务器负载和连接负载很低时），查看 Oracle 会话监视器只有一个连接打开并且申请结束后不久关闭。但是，***每次***应用程序失败时，***它都会留下 5 个打开的连接***（使用 null 命令），这些连接在应用程序关闭后的几分钟内都不会消失。所以我认为处理连接池可能有问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:43:51.223

最后，经过多次测试，在网络管理员的帮助下，我：
1.将服务器代理更改为其他，
2.禁用 TCP/IPv6 协议，
3.禁用防火墙。
仍然不确定哪个是“有罪的”，但它看起来有帮助 - 我想这可能是我的或代理服务器上的 TCP/IPv6 的一些防火墙规则。

# json - 在 json-simple 中转义 html 标签

> ID：14285192
> 
> 赞同：0
> 
> 时间：2013-01-11T19:22:26.803
> 
> 标签：json, servlets, escaping, simplejson

我有一个发送 json 响应以填充 datatable.net 的 java servlet，我需要生成带有一些链接的 json 响应。

我有以下代码：

```
LinkedList lt2 = new LinkedList();
lt2.add("<a href='host'>sasas</a>");
l1.add(lt2);
obj.put("aaData", l1); 
```

输出

```
{"aaData":[
    ["1","Col2","Col3","Col4","Col5"],
    ["2","Col2","Col3","Col4","<a href='host'>sasas<\/a>"]
]
} 
```

如您所见，浏览器无法像链接一样解释输出，我试图以不同的方式转义字符而没有获得所需的输出。

有没有办法做到这一点？我更喜欢服务器端处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:31:00.273

我是一名忍者开发人员：D hack 有点简单，我按照以下方式进行字符串替换：

```
lt2.add("<a href='host'>sasas</a>".replace("\\/", "/")); 
```

所以现在列表的内容就像浏览器中的链接一样表示。现在，我想知道是否有最好的方法来做同样的事情......

# c++ - 为什么 C++11 'auto' 关键字对静态成员不起作用？

> ID：14285198
> 
> 赞同：13
> 
> 时间：2013-01-11T19:22:53.420
> 
> 标签：c++, c++11, auto

```
class Foo {
 public:
  static const char *constant_string;
};

auto Foo::constant_string = "foo";

int main(void) {
}; 
```

编译： gcc (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3 像这样：

```
gcc -std=c++0x ./foo.cc 
./foo.cc:6:11: error: conflicting declaration ‘auto Foo::constant_string’
./foo.cc:3:22: error: ‘Foo::constant_string’ has a previous declaration as ‘const char* Foo::constant_string’
./foo.cc:6:11: error: declaration of ‘const char* Foo::constant_string’ outside of class is not definition [-fpermissive] 
```

这是`auto`关键字的预期行为，还是 gcc+ 中的错误

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-11T19:28:27.727

语言不允许：

> `[C++11: 7.1.6.4]:`
> 
> ¹`auto` *类型说明符*表示被声明的变量的类型应从其初始值设定项推导出来，或者函数声明符应包括一个*尾随返回类型*。
> 
> ²在这样的声明符有效的任何上下文中，`auto` *类型说明符*可以与带有*尾随返回类型*（8.3.5）的函数声明符一起出现。
> 
> ³否则，变量的类型是从它的初始化器推导出来的。被声明的变量的名称不应出现在初始化表达式中。`auto`在块 (6.3)、命名空间范围 (3.3.6) 和*for-init-statement* (6.5.3)中声明变量时，允许使用。`auto`应作为 decl-specifiers 之一出现*在*decl *-specifier-seq*中，并且*decl-specifier-seq*后面应跟随一个或多个*init-declarators*，每个 init-declarators 应有一个非空*初始化器*。
> 
> ⁴ ***类型说明符*****也可用于`auto`** *在选择语句（6.4）或迭代语句（6.5）的*条件*中声明变量，在*类型说明符序列*中的*new-type-id*或*type-id*中一个*新表达式*(5.3.4)，在一个 for-range-declaration 中，以及**在声明一个带有*大括号或相等初始化器*的静态数据成员，该初始化器出现在类定义的*成员规范***中(9.4.2) .*
> 
>  *⁵ **在本节未明确允许的上下文****中使用的程序是格式错误的。`auto`***

 *很难证明是否定的，但标准中根本没有明确的规则允许`auto`您的情况。

但是，相同的规则意味着以下内容*是*有效的：

```
struct Foo {
   static constexpr auto constant_string = "foo";
};

int main() {} 
```

（请注意，类型`Foo::constant_string`是`char const* const`而不是，比如说，`char const[3]`；[这是使用的效果`auto`](https://stackoverflow.com/questions/12016757/auto-with-string-literals)。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-31T14:52:07.977

Visual C++ 接受

```
decltype(Foo::constant_string) Foo::constant_string = "foo"; 
```*

# node.js - 调试 mocha 测试的阻力最小的途径是什么？

> ID：14285201
> 
> 赞同：45
> 
> 时间：2013-01-11T19:22:58.507
> 
> 标签：node.js, unit-testing, debugging, coffeescript, mocha.js

2016 年 11 月编辑：Node 现在有一个内置调试器，您可以从`--inspect`. 这个答案解释了它：[https](https://stackoverflow.com/a/39901169/30946) ://stackoverflow.com/a/39901169/30946 。

我正在使用咖啡脚本构建摩卡咖啡测试。在测试的顶部，我有：

```
require "../assets/js/theObject.coffee"
debugger
ss = new TheObject() 
```

我想在调试器行上停下来，因为里面的对象`theObject.coffee`没有被加载。我正在使用节点检查器，它可以正常工作。

我拥有的过程是：

1.  启动节点检查器
2.  在命令行运行测试`mocha --compilers coffee:coffee-script ./test/theObjectTests.coffee --ui bdd -d --debug-brk`
3.  转到节点检查器页面，如果它已经打开，请刷新它
4.  等待文件`theObject.coffee`被加载，然后在正确的行放一个断点

必须有更简单的方法。似乎我应该能够运行调试器并让它在该调试器行上停止，但我无法找到它。

我有 WebStorm，它有一个调试器（[本文讨论了](http://wuntusk.blogspot.com/2012/06/using-webstorm-or-phpstorm-and-mocha.html)设置它以运行 mocha 测试，但它对我没有帮助），但是当我启动它时，它失败了。在 WebStorm 调试窗口中运行的命令是：

```
"C:\Program Files\nodejs\node.exe" --debug-brk=64232 C:\Users\jcollum\AppData\Roaming\npm\_mocha

C:\Users\jcollum\AppData\Roaming\npm\_mocha:2
basedir=`dirname "$0"` 
```

我怀疑这可能是特定于 Windows 的问题。

环境：Windows 7、Webstorm、节点 0.8.16、mocha 1.7.4、git-bash

问题：如果您是从头开始使用 Mocha，让调试器运行的最简单方法是什么？简单是这里的关键词。

编辑：因为问这个我已经停止使用 Windows 并在 Ubuntu 中工作。我的 mocha 调试过程（我不经常使用）是一样的。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-04-08T16:52:45.003

**多年后编辑**：Node 6+ 中的最短路径是：`mocha --debug-brk --inspect ./test.js`加上 Node Inspector Manager 插件。

许多周后，没有答案。这是我找到的最快路径。

1.  编写摩卡测试
2.  安装`node-inspector`
3.  开始`node-inspector`——现在它将在 5858 上监听
4.  开始摩卡测试`--debug-brk`
5.  此时 mocha 测试在第一行暂停
6.  打开网络浏览器并转到 localhost:5858
7.  （可选：在测试文件的顶部添加调试器行，在该文件中停止后设置断点）
8.  按 F10 让代码运行
9.  node-inspector 将停在上面的任何行`debugger`上。有时它不会将代码文件的窗口移动到正确的位置，因此您必须按 F10 才能使其进入下一行并显示它在文件中的位置。

命令行：

`node-inspector & mocha --compilers coffee:coffee-script/register ./test/appTests.coffee --ui bdd -d -g "should X then Y" --debug-brk`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-03-19T03:53:38.580

除了上面@jcollum 的回答，我发现不要使用 --debug-brk 标志，最好只使用带有 -w 的 --debug 标志（观看）

这样，当您从代码中添加和删除调试器行时，mocha 将自动重新加载测试，并且您的节点检查器将在适当的行上暂停。

这样就不必重新访问终端不断重新启动测试，然后在调试器中不必要地点击“继续”以通过源代码的第一行。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-06-21T20:17:08.243

使用最新版本的 Mocha 和[node-inspector](https://github.com/node-inspector/node-inspector)，这对我来说非常有用：

```
$ node-debug ./node_modules/mocha/bin/_mocha 
```

它将本地 Mocha 可执行文件作为调试进程加载，在第一行停止，以便您设置断点。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-08-17T21:18:49.167

注意[http://sa.github.io/iron-node/](http://s-a.github.io/iron-node/)。这是调试任何与 Node.js 相关的最有效的软件。

`$ iron-node ./node_modules/mocha/bin/_mocha`

[![在此处输入图像描述](../Images/cf9171080483ead1b47ed70b628ddd2d.png)](https://i.stack.imgur.com/Qt6Bq.jpg)

[![在此处输入图像描述](../Images/1cb766df4154565bb0e1e4d92f4bd266.png)](https://i.stack.imgur.com/T9ma3.gif)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-10-07T08:07:27.103

使用 WebStorm 节点调试器的替代方法。

简而言之：

1.  你需要 WebStorm
2.  在 WebStorm 中创建新的节点调试配置文件
3.  将 mocha 二进制文件的路径设置为`Path to Node App JS File`
4.  添加断点并从 WebStorm 启动会话

[Glenn Block 的屏幕截图的详细说明](http://codebetter.com/glennblock/2013/01/17/debugging-mocha-unit-tests-with-webstorm-step-by-step/)。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-03-05T20:26:38.713

如果它是一个 Node 应用程序，那么从命令行使用集成的 Node 调试器是获得明星的最快途径：

```
$ mocha $args -- debug 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-12-08T12:21:37.543

现在在 Webstorm 中，您可以使用`mocha`配置进行设置。对我来说几乎是开箱即用的：

```
Node interpreter: /usr/local/bin/node
Working directory: /Users/me/sites/mysite
Mocha Package: /Users/me/sites/mysite/node_modules/mocha 
```

进而

```
All in directory
Test directory: /Users/me/sites/mysite/test 
```

它还向您显示了它运行的参数，因此您可以在需要时将它们复制到另一个环境。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-08-10T16:26:10.520

对于 Webstorm 或 PhpStorm，您可以添加特定的 mocha 调试配置：

![调试配置](../Images/81d4d47298c2d21112018481cc52dd0e.png)

你必须通过绿色添加，你可以给它一个名字。

如果已经在项目中安装了 mocha 通过：

```
 npm install mocha --save 
```

或者

```
 yarn add mocha 
```

它将在您的项目中找到相应的模块。

我必须为我的单元测试提供正确的路径，并为`Include subdirectories`/打上标记

由于我的项目是一个打字稿，我必须添加：

```
yarn add ts-node 
```

对于纯 js 项目，它应该不是必需的。

现在您可以运行整个测试套件，然后您可以从列表中选择单个测试用例并运行它们并自行调试它们。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-03-20T17:08:10.837

现有答案都没有提到*阻力最小的路径*：当您需要调试 Mocha 测试时，您可以**简单地添加另一个断言来检查您想要调试的值**。

```
myVar.should.equal(expected); 
```

我发现这通常是我所需要的。完成后，我只是删除了用于调试的额外断言。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-11-26T16:13:21.977

一种现代的方法是使用 nodejs 的[检查器集成功能](https://nodejs.org/api/debugger.html#debugger_v8_inspector_integration_for_node_js)。使用起来相当简单。我已经在[这篇文章中详细说明了如何使用它](https://stackoverflow.com/questions/14352608/whats-the-right-way-to-enable-the-node-debugger-with-mochas-debug-brk-switch/39901169#39901169)

# css - 具有固定未知宽度复选框、按钮的液体宽度文本字段

> ID：14285202
> 
> 赞同：2
> 
> 时间：2013-01-11T19:23:03.203
> 
> 标签：css

我希望（液体）文本字段和按钮/复选框位于单行上。我的方法只能在 Firefox 和 IE 中正常工作，但不能在 Chrome 中正常工作。Chrome 在复选框和按钮的右侧有一个填充。

我不想在复选框和按钮上设置宽度，因为人们的浏览器字体可能不同，宽度也可能不同。所以我不想使用负边距方法。

有人有更好的解决方案吗？我接受 JavaScript。

在 Firefox 和 chrome 上试试这个链接，你会发现不同之处。

[http://jsfiddle.net/9f9dK/2/](http://jsfiddle.net/9f9dK/2/)

```
#nav {
  width: 100%;
}
#table {
  height: 32px;
  display: table;
  cellpadding: 0;
  width: 100%;
}
#table-row {
  display: table-row;
  cellpadding: 0;
  width: 100%;
  white-space: nowrap;
}
.table-cell {
  display: table-cell;
  white-space: nowrap;
  border-collapse: collapse;
  cellpadding: 0;
  width: 0;
}
#table-cell-textfield {
  width: 100%;
  white-space: nowrap;
}
#table-cell-textfield input {
  width: 100%;
  display: table-cell;
  white-space: nowrap;
}
.table-cell label {
  width: 0;
}
.table-cell input {
}

<div id="table">
  <div id="table-row">
    <div class="table-cell">
      <input name="" type="checkbox" value="" />
      <label>option 1</label>
      <input name="" type="checkbox" value="" />
      <label>this is option 2</label>
      <input name="" type="checkbox" value="" />
      <label>3 is here</label>
      <input name="" type="checkbox" value="" />
      <label>Im 4</label>
      <input name="" type="checkbox" value="" />
      <label>last one</label>
    </div>
    <div id="table-cell-textfield">
      <input name="" type="text" />
    </div>
    <div class="table-cell">
      <input type="button" value="search" />
    </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:05:54.183

尝试将 css`width`属性更改`table-cell`为`1px`：

```
.table-cell {
      display: table-cell;
      white-space: nowrap;
      border-collapse: collapse;
      cellpadding: 0;
      width: 1px;
} 
```

似乎对 Chrome 有效，并且在 Firefox 中看起来还不错。

# mysql - MySQL，将数据从行移动到列

> ID：14285205
> 
> 赞同：1
> 
> 时间：2013-01-11T19:23:10.337
> 
> 标签：mysql, select, group-by, pivot-table

我有一个包含以下数据的 MySQL 表：

```
id    userid    fieldid    data
--    ------    -------    ----
 1    186       1          London
 2    186       3          Accountant
 3    186       5          Joe Jones
 4    206       1          Paris
 5    206       5          Mark Smith
 6    210       1          Berlin
 7    210       2          0020
 8    210       3          Farmer
 9    210       4          000-000-0000
10    210       5          Bill Johnson 
```

等等

我想要结束的是另一个表，其中数据根据用户 ID 格式化为行：

```
userid   Region    Acct    Title         Phone           Name
------   ------    ----    -----         -----           ----
  186    London    NULL    Accountant    NULL            Joe Jones
  206    Paris     NULL    NULL          NULL            Mark Smith
  210    Berlin    0020    Farmer        000-000-0000    Bill Johnson 
```

我不需要 SELECT 语句...我知道如何使用 GROUP_CONCAT 查看数据。我说的是另一个表（可能是虚拟表？），数据按行排列。

我不介意引用行名和列名的脚本，但我不想引用特定的数据字段（即 - 如果 row_data = London 移动到 column1）。

我宁愿说“IF fieldid = 1 then move 'data' to new_table.column1”之类的话，但我一点也不知道该怎么说。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:26:27.460

这个怎么样：

```
create table mynewtable as
(the select statement you already know ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:32:52.457

试试这个：

```
CREATE TABLE `temptable` AS 
SELECT userid, MAX(IF(fieldid =1, DATA, NULL)) Region, 
       MAX(IF(fieldid=2, DATA, NULL)) Acct, MAX(IF(fieldid =3, DATA, NULL)) Title, 
       MAX(IF(fieldid=4, DATA, NULL)) Phone, MAX(IF(fieldid =5, DATA, NULL)) `Name` 
FROM tablename 
GROUP BY userid 
```

# asp.net - ASP.NET 文本到语音代码在本地开发机器上工作，但不在生产服务器上

> ID：14285206
> 
> 赞同：2
> 
> 时间：2013-01-11T19:23:22.270
> 
> 标签：asp.net, iis-7

我有一个执行文本到语音 TTS 的 ASP.NET 应用程序。该代码在本地计算机上运行良好，但是当我将其部署在 Windows 2008 R2 服务器 Enterprise 64 位上时，应用程序池就崩溃了。该应用程序由 v4.0 .NET 框架组成。我在服务器上使用 IIS 7。以下是应用程序池崩溃时的错误。

```
Service Unavailable

HTTP Error 503\. The service is unavailable. 
```

这是我应该更早添加的代码

```
 MemoryStream ms = new MemoryStream();

        context.Response.ContentType = "audio/wav";

        Thread t = new Thread(() =>
        {
            SpeechSynthesizer ss = new SpeechSynthesizer();
            ss.SetOutputToWaveStream(ms);
            ss.Speak(context.Request.QueryString["tts"]);
        });
        t.Start();

        t.Join();
        ms.Position = 0;
        ms.WriteTo(context.Response.OutputStream);
        context.Response.End(); 
```

任何帮助将不胜感激

谢谢

这是异常的更多详细信息

```
An unhandled exception occurred and the process was terminated.

Application ID: /LM/W3SVC/17/ROOT

Process ID: 5340

Exception: System.UnauthorizedAccessException

Message: Retrieving the COM class factory for component with CLSID {A832755E-9C2A-40B4-89B2-3A92EE705852} failed due to the following error: 80070005 Access is denied. (Exception from HRESULT: 0x80070005 (E_ACCESSDENIED)).

StackTrace:    at System.Speech.Internal.Synthesis.VoiceSynthesis.Speak(Prompt prompt)
   at System.Speech.Synthesis.SpeechSynthesizer.Speak(Prompt prompt)
   at TTS.<>c__DisplayClass3.<ProcessRequest>b__0()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.runTryCode(Object userData)
   at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

我已授予 IIS_USRS 对文件 C:\Program Files (x86)\Microsoft Speech SDK 5.1\Bin\TTSEng.dll 的完全权限。现在错误已更改为

```
An unhandled exception occurred and the process was terminated.

Application ID: /LM/W3SVC/17/ROOT

Process ID: 2816

Exception: System.InvalidOperationException

Message: No voice installed on the system or none available with the current security setting.

StackTrace:    at System.Speech.Internal.Synthesis.VoiceSynthesis.Speak(Prompt prompt)
   at System.Speech.Synthesis.SpeechSynthesizer.Speak(Prompt prompt)
   at TTS.<>c__DisplayClass3.<ProcessRequest>b__0()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.runTryCode(Object userData)
   at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state) 
```

我的服务器上没有任何声音设备。这个例外正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T20:49:42.413

尝试关注

1.  IIS 是否正在运行
2.  默认网站运行
3.  应用程序池和 ASP.Net 版本
4.  访问是适当的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T14:53:20.967

尝试`C:\windows\system32\config\systemprofile\appdata\roaming`为运行应用程序池的同一用户授予读/写访问权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-06T05:22:30.953

zahid 在这里有正确的答案。在 IIS 中，选择应用程序池，单击高级设置，然后选择身份类型。

语音需要在用户级别访问数据。

# c# - C#中的StringComparison与CompareOptions？

> ID：14285210
> 
> 赞同：1
> 
> 时间：2013-01-11T19:23:43.973
> 
> 标签：c#, .net, string, culture

*读完后[我](https://stackoverflow.com/questions/10652851/difference-between-the-different-overloads-of-string-compare)仍然很困惑：*

```
 string s1 = "hello";
 string s2 = "héllo"; 
```

这里的不同之处在于口音/文化。

以下代码的结果是`False`.

```
Console.WriteLine(s1.Equals(s2, StringComparison.InvariantCulture)); 
```

但是我使用*不变*的文化，所以它应该把 é 当作 e。（默认是英文，不是吗？）

看来我必须一路走才能使用

```
String.Compare(String, String, CultureInfo, CompareOptions) 
```

喜欢

```
 string.Compare(s1, s2, CultureInfo.CurrentCulture, CompareOptions.IgnoreNonSpace) //true 
```

但是，我目前的文化是`he-IL`，所以我不知道它为什么会起作用。

所以 ：

*   虽然我使用过，但我不明白什么时候`CompareOptions`不起作用`StringComparison.InvariantCulture`（[请不要将我引用到 msdn 页面，因为我已经阅读过它并且我不完全理解他们的解释]）

*   简单来说，我应该什么时候使用每个重载？

*   非*[间距组合字符](http://msdn.microsoft.com/en-us/library/system.globalization.compareoptions.aspx#memberList)*不是一种文化吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:40:28.800

你的困惑`InvariantCulture`很常见。*最好*的用途是当您在文件中保存数据并且不关心给定文化的奇怪之处（例如`,`小数分隔符或带有“u”的拼写风格）时。

它在比较中的用途有限，尤其是当您需要特定于文化的行为时。从表面上看，这似乎并不明显，但是将 e 与一个尖锐的口音进行比较与没有一个的 e 相同......这取决于情况。

啊哈！你说的视情况而定。

看起来像是针对*特定文化*超载的工作。任何时候你知道你正在使用哪种文化，你都应该传递这种文化。

在这种情况下，您希望 .Net 忽略变音符号（*例如重音 aigu*），因此您还应该使用接受的重载[`CompareOptions`](http://msdn.microsoft.com/en-us/library/system.globalization.compareoptions.aspx#memberList)（特别是如您所述`CompareOptions.IgnoreNonSpace`）。

# c# - 是否有用于 MSIL 结果的工具

> ID：14285213
> 
> 赞同：4
> 
> 时间：2013-01-11T19:24:02.083
> 
> 标签：c#, compiler-optimization

我对 MSIL 的工作非常好奇。据我了解，CLR 在编译时将其代码转换为 MSIL，以提供一些优化，这些优化随后由 JIT 转换为机器代码。

例如，如果我们有：

```
 using (TextWriter w = File.CreateText("log.txt"))
{
    w.WriteLine("This is line one");
} 
```

它将在 MSIL 中转换为以下代码：

```
 TextWriter w = File.CreateText("log.txt");
    try
    {
        w.WriteLine("This is line one");
    }
    finally
    {
        bool flag = w == null;
        if (!flag)
        {
            w.Dispose();
        }
    } 
```

我不确定它是否会完全像那样翻译，但肯定会翻译成类似的东西。

关键是，我试图研究 MSIL 优化。至此，我发现 MSIL 已翻译为对我来说不太可读的 asm 代码。

是否有任何工具可以显示 C# 代码甚至伪代码中的 MSIL 翻译？

高度赞赏参考资料和相关链接。

附言

我使用我们在上面看到的写：

```
 using (TextWriter w = File.CreateText("log.txt"))
{
    w.WriteLine("This is line one");
} 
```

并编译它。然后我使用 Reflector 查看代码，我看到了我写的相同代码，而不是看到一些优化。

我使用具有相同代码的 LINQPad。我发现 MSIL 输出是：

```
 IL_0001:  ldstr       "log.txt"
IL_0006:  call        System.IO.File.CreateText
IL_000B:  stloc.0     // w
IL_000C:  nop         
IL_000D:  ldloc.0     // w
IL_000E:  ldstr       "This is line one"
IL_0013:  callvirt    System.IO.TextWriter.WriteLine
IL_0018:  nop         
IL_0019:  nop         
IL_001A:  leave.s     IL_002C
IL_001C:  ldloc.0     // w
IL_001D:  ldnull      
IL_001E:  ceq         
IL_0020:  stloc.1     // CS$4$0000
IL_0021:  ldloc.1     // CS$4$0000
IL_0022:  brtrue.s    IL_002B
IL_0024:  ldloc.0     // w
IL_0025:  callvirt    System.IDisposable.Dispose
IL_002A:  nop         
IL_002B:  endfinally 
```

从这段代码中，我们看到 System.IDisposable.Dispose 看起来像是优化的一部分。我的意图是以某种方式查看 C# 代码或伪代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:33:41.793

我会推荐 Telerik JustDecompile。它将是“永远免费”。

*   [http://www.telerik.com/products/decompiler.aspx](http://www.telerik.com/products/decompiler.aspx)

历史上很长一段时间都有 Lutz Roeder 的“The Reflector”。但这现在归 RedGate 所有。您仍然可以以高昂的价格获得它。

*   [http://www.reflector.net/](http://www.reflector.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T19:32:02.763

[反射器](http://www.reflector.net)、[ILSpy](http://ilspy.net)、[dotPeek](http://www.jetbrains.com/decompiler)和 ildasm。

[Reflexil](http://reflexil.net)是一个非常不错的 Reflector 插件。但正如所写的反射器现在是付费的。

**关于优化：**

有什么可以优化的吗？您是否在项目属性中检查了“优化代码”？JIT 编译器也做了一些编译优化。您可以使用 SOS 扩展获取方法的机器代码：

[检索 JIT 输出](https://stackoverflow.com/questions/6928442/retrieve-jit-output)

[无论如何，我如何查看 JIT 编译的内容？](http://mikedimmick.blogspot.ru/2008/03/how-do-i-see-what-jit-compiled-anyway.html)

[在 Visual Studio 中使用 SOS、SOSEX 和转储进行调试](http://stevenhollidge.blogspot.ru/2012/03/debugging-with-sos-sosex-and-dumps-in.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T19:28:02.083

我推荐 IlSpy，它免费且可靠

[http://ilspy.net/](http://ilspy.net/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T19:30:31.507

ILSpy (http://ilspy.net/) 很好而且免费，如果你愿意也可以查看源代码。反射器很好，但不再免费（价格昂贵）。

# android - android上共享库的实例

> ID：14285215
> 
> 赞同：0
> 
> 时间：2013-01-11T19:24:07.153
> 
> 标签：android, shared-libraries

有一个包含静态变量和函数的共享库，我想在 Flex 和 Java 中使用。因此，我的 Flex 应用程序通过 ANE 文件加载库，通过 JNI 加载 Java（尽管它是完全相同的库）。Android 是为每个应用程序加载 2 个库实例，还是为每个使用它的应用程序使用相同的实例？

例如：库有一个静态整型变量，创建时赋值为 0。Flex 将该整数更改为 3。如果 Java 代码读取该变量，Java 将给出什么结果。0还是3？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T21:20:22.747

> 所以从技术上讲，它们是两个不同的应用程序

如果它们是两个不同的应用程序（例如，在 Play 商店中有两个单独的条目），那么它们将在不同的进程中运行。每个应用程序都会有一份 JNI 代码的副本；每个进程都将加载它自己的 JNI 代码副本。它们之间不会共享任何内容，就像两个应用程序安装在不同的设备上一样。

# jquery - jQuery验证选择的自定义方法

> ID：14285216
> 
> 赞同：0
> 
> 时间：2013-01-11T19:24:07.997
> 
> 标签：jquery, jquery-validate

我正在使用 jQuery 验证器和统一插件来修饰我的选择元素。The problem is when a select is returned invalid the user doesn't know since the element is hidden. 因此，如果选择有错误，我正在尝试编写一个自定义方法来将错误类添加到父元素。

这是我到目前为止所拥有的：

```
$.validator.addMethod(
    "selectvalidate", function(){
        if(!$(element).is(':visible')){
            return true;
        }
        else if($(element).val() == "") {
            $(element).parent('.selector').addClass('error');
            return false;
        }
        else{
            $(element).parent('.selector').removeClass('error');
            return true;
        }
    },
    "Please select an option"
); 
```

HTML

```
<fieldset>
   <label>Field Label</label>
     <div class="selector"></div>
     <span>- Select -</span>
     <select>
         <option></option>
     </select>
</fieldset> 
```

任何帮助都会很棒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:29:15.620

您不一定需要自定义方法。只需使用该`errorPlacement:`选项。

这是已经内置的默认功能...

```
errorPlacement: function(error, element) {
    error.insertAfter(element);
} 
```

工作演示：http: [//jsfiddle.net/4ySLB/](http://jsfiddle.net/4ySLB/)

您可以编辑默认函数以将错误放置在任何地方，并根据需要操作 DOM 中的任何其他内容。

要获得更自定义的答案，您必须提供更多代码和 jsFiddle 演示。

# asp.net - 如何将主题中定义的脚本包含到果园模块中的视图中

> ID：14285217
> 
> 赞同：1
> 
> 时间：2013-01-11T19:24:28.997
> 
> 标签：asp.net, asp.net-mvc, razor, asp.net-mvc-4, orchardcms

我为主题中的所有不同模块定义样式。主题中 Styles 文件夹中的每个 CSS 文件都属于某个模块。只有主题知道哪个文件是哪个。我希望模块中的视图包含通过 Style.Require 在主题中定义的样式。就只有主题知道确切的 css 文件而言，我只能使用与主题级别的资源关联的名称间接地做到这一点。问题是当我在模块中使用该名称时，它无法解决。那么在果园有什么办法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T04:54:19.950

而不是`Style.Require`，使用`Style.Include`并提供一些样式表的路径，如下所示：

```
@{
    Style.Include(Html.ThemePath(WorkContext.CurrentTheme,
                                 "/Styles/my-module-stylesheet.css");
} 
```

您不必为此工作定义资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T18:49:58.087

好的，对我有用的是：

在模块使用的一个视图中

```
Style.Require("SomeStyleTobeDefinedInTheme"); 
```

在`ResourceManifest`主题中添加

```
var manifest = builder.Add();
manifest.DefineStyle("SomeStyleTobeDefinedInTheme").SetUrl("themed-module.css"); 
```

**重要的！不要`ResourceManifest`在模块中定义样式！**

# multidimensional-array - 在C中为二维数组中的附加行赋值

> ID：14285230
> 
> 赞同：0
> 
> 时间：2013-01-11T19:25:02.280
> 
> 标签：multidimensional-array

嗨，我正在尝试理解指针和数组，在浏览 youtube 上的视频时，我发现了这个示例，我正在尝试自己重新创建。以下是代码。

```
#include <stdio.h>
#include <math.h>
main()
{
    int arr[][2]={{11,12},{21,22},{31,32},{41,42},{51,52}};
    int i,j;
    arr[5][1]=61;
    arr[5][0]=62;
    arr[6][1]=71;
    arr[6][0]=72;
    arr[7][1]=81;
    arr[7][0]=82;
    for(i=0;i<=7;i++)
    {
        for(j=0;j<=1;j++)
        {
            printf("%d  %d  %u  %u  %d  %d  %d  \n",i,j,arr[i],arr[i]+j,arr[i][j],*(*(arr+i)+j),*(arr[i]+j));
        }
    }
} 
```

当我执行它给我的代码时

```
0 0 3216856768 3216856768 11 11 11  
0 1 3216856768 3216856772 12 12 12  
1 0 3216856776 3216856776 21 21 21  
1 1 3216856776 3216856780 22 22 22  
2 0 3216856784 3216856784 31 31 31  
2 1 3216856784 3216856788 32 32 32  
3 0 3216856792 3216856792 41 41 41  
3 1 3216856792 3216856796 42 42 42  
4 0 3216856800 3216856800 51 51 51  
4 1 3216856800 3216856804 52 52 52  
5 0 3216856808 3216856808 0 0 0   
5 1 3216856808 3216856812 5 5 5   
6 0 3216856816 3216856816 72 72 72  
6 1 3216856816 3216856820 71 71 71  
7 0 3216856824 3216856824 82 82 82  
7 1 3216856824 3216856828 81 81 81  

```

为什么没有为 arr[5][0] 和 arr[5][1] 分配给定值？5 和 0 是从哪里来的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T19:31:40.127

这不是魔术（也不是脚本语言）。如果您创建一个有 5 个元素的数组，那么它将有 5 个元素。无论你用它做什么，它都不会自动扩展。稍后，如果您超出其边界访问数组，则会导致未定义的行为。这段代码甚至可能崩溃。

相反，您应该做的是声明一个足够大的数组：

```
int arr[8][2] = { { 11, 12 }, { 21, 22 }, { 31, 32 }, { 41, 42 }, { 51, 52 } }; 
```

然后稍后您可以正确分配给它们；或使用标准内存管理函数`malloc()`和动态扩展数组`realloc()`：

```
int **arr = malloc(sizeof(*arr) * 5);
int i;
for (i = 0; i < 5; i++) {
    arr[i] = malloc(sizeof(**arr));
} 
```

并一一填写

```
arr[0][0] = 11;
arr[0][1] = 12;
// etc. 
```

然后在需要时扩展它：

```
arr = realloc(arr, sizeof(*arr) * 8);
for (i = 5; i < 8; i++) {
    arr[i] = malloc(sizeof(**arr));
} 
```

在此之后，您也可以安全地使用`arr[5]...arr[7]`。但是，在后一种情况下，不要忘记`free()`使用后需要释放的所有指针。

# java - Instagram 与 A ndroid 的集成不显示用户图像

> ID：14285234
> 
> 赞同：0
> 
> 时间：2013-01-11T19:25:30.347
> 
> 标签：java, android, android-layout, interface, instagram

我正在使用[github 项目将 Instagram 与A​​ndroid 集成](https://github.com/thiagolocatelli/android-instagram-oauth)

我的项目要求我从 Instagram 浏览用户图像。当我打开登录对话框并输入详细信息时，我可以登录。然后它会打开重定向 url。

为了测试，我有一个 onSuccess() 方法和 onFail()

```
`OAuthAuthenticationListener listener = new OAuthAuthenticationListener() { 
    @Override
    public void onSuccess() {
        tvSummary.setText("Connected as " + mApp.getUserName());
        btnConnect.setText("Disconnect");
        JSONArray jsonArray = mApp.getUserImages();}

public void onFail(String error) {
            Toast.makeText(InstagramIntegrationActivity.this, error,
                    Toast.LENGTH_SHORT).show();
        }` 
```

尽管侦听器已注册， `mApp = new InstagramApp(this, ApplicationData.CLIENT_ID, ApplicationData.CLIENT_SECRET, ApplicationData.CALLBACK_URL); mApp.setListener(listener);`但它并没有被调用。在 onSuccess 中，我有解析 JSONObject 并获取图像的代码。

是否有什么事情可能会发生，因为 onFail() 方法上的 onSoccess() 没有被调用？任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:10:08.390

我找到了问题的解决方案。逻辑和代码是正确的。但是我犯的错误是我尝试在[Instagram 开发者网站中注册两个具有相同网站 URI 和重定向 URI 的应用程序](http://instagram.com/developer/)

更正解决了问题。

# javascript - KineticJS 拖动一个连接线的框

> ID：14285235
> 
> 赞同：1
> 
> 时间：2013-01-11T19:25:37.397
> 
> 标签：javascript, html, html5-canvas, kineticjs

我以前在网上看到过这样的例子，但我再也找不到链接了。

基本上它是一个可拖动框的 KineticJS 示例，并带有线连接到它。当您围绕线移动框时，将保持连接并重绘到框的位置。

我真的很想知道是否有其他人看过这个例子，或者如何做到这一点。我已经用谷歌搜索了这个例子，但我在任何地方都找不到答案。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T20:04:35.820

做起来也不是太难...

创建你的盒子：

```
 var box = new Kinetic.Rect({x:10,y:10, other stuff }); 
```

创建你的行：

```
 var line = new Kinetic.Line({ x: box.getX(), y: box.getY(), other stuff });
 var originalPoint = {x: box.getX(), y: box.getY()}; // save original box coordinates 
```

然后添加一个拖动事件重新定义该行

```
 box.on('dragstart dragmove', function(){
     line.setPoints([originalPoint.x, originalPoint.y, box.getX(), box.getY() ]);
     layer.draw();  //redraw current layer
 }); 
```

像这样：http: [//jsfiddle.net/KS9Bf/3/](http://jsfiddle.net/KS9Bf/3/)

这正是您要问的：http: [//jsfiddle.net/KS9Bf/6/](http://jsfiddle.net/KS9Bf/6/)

它是对上一个的更新。

# c - 你能解释一下印刷工会成员的结果吗？

> ID：14285238
> 
> 赞同：0
> 
> 时间：2013-01-11T19:25:43.650
> 
> 标签：c

谁能告诉我为什么`data.i`并且`data.f`被破坏了？该代码来自的网站试图解释它，但使用了错误的语法和许多拼写错误，所以我想知道这里是否有人可以帮助我。

```
#include <stdio.h>
#include <string.h>

union Data
{
   int i;
   float f;
   char  str[20];
};

int main( )
{
   union Data data;        

   data.i = 10;
   data.f = 220.5;
   strcpy( data.str, "C Programming");

   printf( "data.i : %d\n", data.i);
   printf( "data.f : %f\n", data.f);
   printf( "data.str : %s\n", data.str);

   return 0;
} 
```

上述代码编译执行后，产生如下结果：

> data.i：1917853763
> data.f：4122360580327794860452759994368.000000
> data.str：C编程

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T19:27:29.793

你误解了 a 的目的`union`。A`union`旨在用作可以存储多种类型的值的单个变量。但是 a`union`只为最大数据成员的类型分配了足够的空间。因此，您一次只能使用一个数据成员。一旦您设置了一个成员的值，它就会使其他成员无效。

如果您希望能够存储多个数据成员的值，则需要使用`struct`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T19:27:21.713

你有一个`union`，这意味着一次只能有一个成员可以直播。当`strcpy`访问`str`该`f`成员时，覆盖该成员的`i`成员本身将被覆盖。

```
 data.i = 10; 
```

存储到`int`成员中，读取`float`或`char[20]`成员会产生有趣的值，并且可能会产生未定义的行为。

```
 data.f = 220.5; 
```

存储到`float`成员中，`int`先前存储的内容将丢失。

```
 strcpy( data.str, "C Programming"); 
```

存储到`str`成员中，先前存储`float`的内容将丢失。

`data.i`为和打印的值`data.f`是被解释为`int`相应字符串的一些字节。`float`.

要同时使用多个成员，您需要一个`struct`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T19:35:40.633

Actually, `union` differs from `struct`.

In the case of `struct` each member has it's own place in memory.

In the case of `union` all members are placed in the same memory. Thus, you actually have only one member at the moment, so you simply can not read all members of the union.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T19:29:28.760

这个对象“mystruct”有一个“int”，后跟一个“float”，然后是一个字符串。您可以打印任何或所有项目。

```
struct mystruct
{
   int i;
   float f;
   char  str[20];
}; 
```

这个对象“myunion”有一个“int”、一个“float”和一个字符串*ALL SUPERIMPOSED ON TOP OF EACH OTHER*。一次数据将仅对其中一种类型“有效”。

```
union myunion
{
   int i;
   float f;
   char  str[20];
}; 
```

你通常会使用这样的联合：

```
#define INT 0
#define FLOAT 1

struct x
{
    int type_tag;
    union
    {
      int x;
      float y;
    }
} 
```

您将在运行时为“标签”分配一个值，以区分“将此数据视为 int”（0）或“将其视为浮点数”（1）。

'希望有帮助.. PSM

# php - 在子目录中组织助手

> ID：14285240
> 
> 赞同：1
> 
> 时间：2013-01-11T19:25:52.360
> 
> 标签：php, cakephp, cakephp-2.0, cakephp-helper

我是 CakePHP 的新手，我在组织我的帮助文件时遇到了麻烦。我在网上搜索，似乎没有找到答案。

如果我将帮助程序放在 app/Views/Helpers/test 下，我可以毫无问题地使用它们。

但是当我把它放在 app/Views/Helpers/Global/test 下时，

和

```
class AppController extends Controller {

public $helpers = array('Form', 'Html', 'Js', 'Time', 'Text', 'Session','Global/testHelper'); 
```

我收到“无法重新声明类 testHelper”

有人有什么主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T13:50:54.817

组织和打包代码的最佳方式是使用[插件](http://book.cakephp.org/2.0/en/plugins.html)。

您的应用程序的 Helpers 目录下不能有子文件夹。但是您可以使用[App::build()](http://book.cakephp.org/2.0/en/core-utility-libraries/app.html#adding-paths-for-app-to-find-packages-in)为您的助手指定备用位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T21:09:03.213

该错误是不言自明的。您不能直接调用您的助手`TestHelper`，因为该名称已经被 CakePHP 测试套件（定义在 中`lib/Cake/Test/Case/View/HelperTest.php`）使用。

只需将您的助手命名为其他名称，您就可以了。

# android - Android 跨应用程序传递数据

> ID：14285241
> 
> 赞同：2
> 
> 时间：2013-01-11T19:25:57.260
> 
> 标签：android, persistent-storage

我有一个列表视图，其中包含一个位置列表 - 我有列表视图每一行的 ID、名称和位置。我的数据本地存储在 sqlite 中。

当用户单击特定位置时，我想在下一个屏幕中显示该特定位置的详细信息，其结构如下

*   托管两个 Fragment 的 Fragment Activity
*   First Fragment 顶部有一个 Viewpager 指示器，其下方有信息。
*   Second Fragment 托管一个谷歌地图，该地图在地图上显示该地点。

所以我需要知道用户在三个不同的活动和片段中选择的位置。

用户应该能够返回并选择一个新的地方，并且应该能够再次被传递。

**PlaceActivity.java 需要 Place 的 ID**

```
public class PlaceActivity extends SherlockFragmentActivity implements
        OnShareTargetSelectedListener {

    private PlaceMapsFragment fragment_maps = null;
    private PlaceDetailsFragment fragment_details = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_place);

        ActionBar actionBar = getSupportActionBar();
        actionBar.setHomeButtonEnabled(true);
        actionBar.setDisplayHomeAsUpEnabled(true);
        actionBar.setTitle("Nandi Hills");
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        ActionBar.Tab tabMaps = actionBar.newTab();
        ActionBar.Tab tabDetails = actionBar.newTab();

        tabDetails.setText("Details");
        tabMaps.setText("Maps");

        tabDetails.setTabListener(new PlaceTabListener());
        tabMaps.setTabListener(new PlaceTabListener());

        actionBar.addTab(tabDetails);
        actionBar.addTab(tabMaps);

    }

    private class PlaceTabListener implements ActionBar.TabListener {
        @Override
        public void onTabSelected(Tab tab,
                android.support.v4.app.FragmentTransaction ft) {
            ft.setCustomAnimations(android.R.anim.fade_in,
                    android.R.anim.fade_out);
            // TODO Auto-generated method stub

            if (tab.getPosition() == 0) {

                if (fragment_details == null) {
                    fragment_details = new PlaceDetailsFragment();
                    ft.add(R.id.fragment_container, fragment_details,
                            PlaceDetailsFragment.TAG);
                } else {

                    ft.show(fragment_details);
                }
            } else {
                if (fragment_maps == null) {
                    // fragment_maps = new PlaceMapsFragment();
                    fragment_maps = PlaceMapsFragment.newInstance(new LatLng(
                            13.005621, 77.577531));
                    ft.add(R.id.fragment_container, fragment_maps,
                            PlaceMapsFragment.TAG);
                } else {

                    ft.show(fragment_maps);
                }
            }
        }

        @Override
        public void onTabUnselected(Tab tab, FragmentTransaction ft) {

            if (tab.getPosition() == 0) {
                if (fragment_details != null) {
                    ft.hide(fragment_details);
                }
            } else {
                if (fragment_maps != null) {
                    ft.hide(fragment_maps);
                }
            }
        }

        @Override
        public void onTabReselected(Tab tab, FragmentTransaction ft) {
            // TODO Auto-generated method stub

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:32:41.697

在 MapFragment 中创建一个构造函数，获取该片段所需的值，然后使用该信息填充片段。

```
public MyMapFragment(long id,String name,int position){
    this.id = id;
    this.name = name;
    this.position = position
} 
```

您将需要为片段设置对保持活动的回调，以将信息填充到地图片段中

如果您需要将数据发送到活动，则将该数据包含在意图中`intent.put("some_int",1);`

# git - git 本地分支不会“与正确的远程分支合并”

> ID：14285242
> 
> 赞同：0
> 
> 时间：2013-01-11T19:26:05.383
> 
> 标签：git

我创建了 2 个本地分支来跟踪远程分支：

```
# git branch1 -t origin/branch1
# git branch2 -t origin/branch2 
```

但是在我执行“repo sync”并执行 a`git remote show origin`之后，我看到我的分支是“与远程 dev 合并，而不是 branch1 和 branch2”，它们是“正确推送到”，但它说“本地已过期”。

```
 # git remote show origin
  ...
  Local branches configured for 'git pull':
    branch1 merges with remote dev
    branch2     merges with remote dev
  Local refs configured for 'git push':
    branch1 pushes to branch1 (local out of date)
    branch2     pushes to branch2     (local out of date) 
```

我怎样才能让我的分支（branch1，branch2）“与正确的分支合并”？并让我的'本地不再'过时'？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T20:14:54.210

我认为需要注意的重要一点是，`git branch`无论您的分支名称是什么，您都在输入。`git branch1`从来都不是正确的命令。

你要这个：

```
git branch -t origin/branch1 
```

或者，如果您想立即检查分支，您可以这样做：

```
git checkout -t origin/branch1 
```

此外，如果您已经有一个本地分支，并且想要将其设置为跟踪远程分支（而不是从远程分支将其作为新分支检出），您可以这样做：

```
git branch -u upstream/branch1 localbranch1 
```

请注意，此语法最近已更改，其中一些命令仅适用于 Git 1.8.0+。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T21:21:47.827

该`branch1 merges with remote dev`消息并不表示您的分支*与*合并`origin/dev`，但如果您在当前合并时未指定分支运行，*则会合并*到`origin/dev`默认分支。*`branch1``git pull``branch1`*

# python - Scrapy：未解决的导入错误

> ID：14285245
> 
> 赞同：0
> 
> 时间：2013-01-11T19:26:17.840
> 
> 标签：python, eclipse, scrapy

我在 Eclipse 中使用 Python 2.7。我正在做一个使用 Scrapy 构建基本网络爬虫的教程。链接在这里。

[http://www.youtube.com/watch?v=4fbvkMhvsWY](http://www.youtube.com/watch?v=4fbvkMhvsWY)

在命令提示符下启动刮板之前，我在尝试以下代码行时收到“未解决的导入”错误：

```
from scrapy.spider import BaseSpider

from scrapy.selector import HtmlXPathSelector 
```

当我尝试使用以下命令在命令提示符下爬网时：

> scrapy 抓取我的文件

我收到错误**消息 "Spider not found: myfile"**。

我的 items.py 文件中还有另一个未解决的导入错误。“字段”不仅得到“未解决的导入”错误，而且还得到“未使用的导入”错误。

items.py 文件中的代码：

```
from scrapy.item import Item, Field 
```

这是蜘蛛文件中的代码：

蜘蛛文件（命名为 Tutorial1.py）

```
from scrapy.spider import BaseSpider

from scrapy.selector import HtmlXPathSelector

class Tutorial1 (BaseSpider):
    name="Tutorial1"

    allowed_domains=['http://wikipedia.org']
    start_urls = ["http://en.wikipedia.org/wiki/Home_page",]

    def parse(self, response):
        hxs = HtmlXPathSelector(response)
        print hxs.select('//div/a').extract() 
```

此外，在尝试做其他教程时，我遇到了同样的问题，让我相信这与我的目录有关。不过我不确定。

我发现其他人也有类似的问题。

[Scrapy：ImportError：没有名为项目的模块](https://stackoverflow.com/questions/10570635/scrapy-importerror-no-module-named-items)

[Scrapy蜘蛛不工作](https://stackoverflow.com/questions/1806990/scrapy-spider-is-not-working)

我的系统路径如下所示：

> C:\Python27;C:\Python27\Scripts

导入以下内容时我没有收到错误：

```
import zope.interface

import twisted

import lxml

import OpenSSL

import scrapy 
```

请帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T20:35:32.150

`scrapy crawl`你的蜘蛛的名字是你的命令中应该使用的参数。此名称在您的蜘蛛代码 ( `name = "Tutorial1"`) 中设置，因此运行该命令`scrapy crawl Tutorial1`应该可以解决命令行问题。

至于导入错误，我注意到您使用的是 Windows。在 Windows (7) 上安装 scrapy 可能比其他操作系统更复杂。本文建议额外安装 pyopenssl、w3lib 和 pywin32 [。](http://steamforge.net/wiki/index.php/How_to_Install_Scrapy_in_64-bit_Windows_7)

你用的是什么版本的scrapy？

# python - 如何在 virtualenv 中获取 python 2.7.3 而不是 python 2.7.1？

> ID：14285248
> 
> 赞同：0
> 
> 时间：2013-01-11T19:26:22.063
> 
> 标签：python, macos, virtualenv

我在我的 Mac OS X 上安装了 python 2.7.3。 $ python --version Python 2.7.3

然后我创建了一个虚拟环境： $ virtualenv 1stVirtualenv 现在python版本是2.7.1

网上搜了一下，有人建议用-p选项，于是试了一下这个virtualenv -p /usr/bin/python2.7 2ndVirtualenv 还是2.7.1

我找不到任何答案来解决这个问题。欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T06:03:23.850

中的 python 文件`/usr/bin`是指向`/System/Library/Frameworks/`. 运行`/usr/bin/python2.7 --version`会返回系统python的版本：2.7.1。/usr/bin/pythons 是 Apple 控制的，不要管它们。

运行这个来找出你的 2.7.3 版本的 Python 所在的位置：

```
$ which python
/usr/local/bin/python 
```

然后使用返回的任何路径作为 virtualenv 的 p 标志的参数：

```
$ virtualenv --distribute -p /usr/local/bin/python ~/virtualenvs/venv
Running virtualenv with interpreter /usr/local/bin/python
New python executable in virtualenvs/venv/bin/python 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T06:31:04.133

# javascript - 谷歌地图：重新定义中心点，适合特定区域的边界

> ID：14285251
> 
> 赞同：5
> 
> 时间：2013-01-11T19:26:26.597
> 
> 标签：javascript, google-maps

这是我在使用 Google Maps API 时遇到的真正挑战。我有一个全屏的应用程序，有一个填充整个背景的谷歌地图。此应用程序的某些 UI 镶边覆盖了部分地图，因此，实际上，整个地图并不总是可见的。

相反，我们有一个“主要”可见区域和一个“部分”可见区域，如下所示：

![地图示例](../Images/7212c265fb723ca19145198eeef328d7.png)

以下是我的问题：

通常，如果您想在您调用的视图中居中某些东西，`map.setCenter(latLng)`这会将给定的 latLng 放在地图画布的确切中心。但是，就我而言，我想将给定的 latLng 放在画布的确切中心，而不是放在画布完全可见部分的中心。

除了画布的确切中心之外，我还没有找到任何关于将地理点设置为其他任何东西的方法的文档。有谁知道这是否可能？

同样，如果您想缩放地图以使其适合多个点，您可以将所有这些 latLngs 传递给 bounds 对象，每个对象调用`bounds.extend(latLng)`, 然后`map.fitBounds(bounds)`.

但是，这将适合地图，以便点显示在整个地图画布中。是否可以让它们适合画布的特定部分？

感谢您在这里的任何见解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T20:11:54.913

创建地图后，使用地图的 panBy 方法按给定像素平移地图。

```
map.panBy(rightPadding/2,-topPadding/2); 
```

演示：http: [**//jsfiddle.net/doktormolle/JsBEx/**](http://jsfiddle.net/doktormolle/JsBEx/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-28T07:18:44.597

此处描述了另一种方法：[如何使 fitBounds 了解自定义控件](https://stackoverflow.com/questions/12152596/how-to-make-fitbounds-aware-of-custom-controls)。另外，您可以使用 containsLocation 仔细检查这两种技术是否有效（[Google Maps fitBounds into specific area](https://stackoverflow.com/questions/17977880/google-maps-fitbounds-into-specific-area)）

# r - 在 R 中使用 rpart 生成的树对新观察进行分类

> ID：14285253
> 
> 赞同：-2
> 
> 时间：2013-01-11T19:26:29.563
> 
> 标签：r, decision-tree, pattern-recognition

假设我在 R 中使用 rpart 函数，它将分类树拟合到数据集。然后如何使用这棵树对新对象进行分类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T20:01:15.457

```
?predict.rpart # ................ 
```

可能（仅在没有 R 对象的情况下猜测。）

```
predict(rtree, type = "class") 
```

# php - 使用 javascript/php 将 html 表单转换为 pdf 和电子邮件

> ID：14285254
> 
> 赞同：1
> 
> 时间：2013-01-11T19:26:28.870
> 
> 标签：php, javascript, pdf, email-attachments

在做了一些研究和检查之后，我觉得有必要问这个问题，因为有很多因素在起作用。这是它的开始方式。我有一个充满 DOM 事件的 HTML 表单，可以更改（通过 javascript 更改），用户做的最后一件事就是输入他们的电子邮件地址并单击提交。提交后，需要执行以下操作：

*   将他们刚刚看到的 html 表单（在用户选择他们想要的所有项目之后）转换为 pdf
*   PDF不应*存储*在我们的服务器上
*   PDF 应通过电子邮件发送到通过表单提交的电子邮件地址

我不希望任何人为我编写所有这些代码，但我们将不胜感激一些想法或最佳方法/工具来实现这一点。环境是 Javascript 和 PHP。

/-------- 已编辑 --------/ 我*可以*使用 FPDF，但不知道是否有办法使用 javascript 来“捕获”他们在提交之前使用的表单以这种方式为我工作，我不必使用多行 FPDF 来复制表格以使其匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:55:36.167

TCPDF 也将完成这项工作。我已经将它用于类似的任务。JavaScript 不能真正与服务器通信以创建 PDF 文件，您需要使用 PHP 来执行此操作，因此您将不得不根据内容在提交之前重新创建用户在表单上看到的任何内容的形式。

本教程包含通过电子邮件提交表单和附加文件的基本步骤，唯一的区别是本教程假设用户将文件作为表单的一部分上传，而在您的情况下，您将使用创建 PDF改为 FPDF 或 TCPDF。

[http://www.html-form-guide.com/email-form/php-email-form-attachment.html](http://www.html-form-guide.com/email-form/php-email-form-attachment.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T20:01:04.963

尝试以允许您使用一组参数重新创建页面的方式构建您的页面。这样，您可以在服务器上重新创建页面并使用[wkhtmltopdf](http://www.amyuni.com/en/developer/webkitpdf/) (LGPL) 或[Amyuni WebkitPDF](http://www.amyuni.com/en/developer/webkitpdf/)（免费软件，*通常适用免责声明*）等工具即时生成 PDF 文件并将其发送回用户。

工作流程基本上是：
1- 用户按下“提交”按钮
2- 您的 html 表单向服务器发出请求，发送从页面收集的所有值
3- 在服务器上，您调用 html-to-pdf 工具接收一个 url 作为参数，你从用户那里得到的值包含在 url 中，你会得到一个 PDF 作为结果
4-你将 PDF 发回给用户作为对他/她的请求的响应

# eclipse - 在 Maven 项目中保存 xhtml 文件时避免发布 EJB 和 ManagedBeans

> ID：14285260
> 
> 赞同：0
> 
> 时间：2013-01-11T19:26:50.930
> 
> 标签：eclipse, maven, jsf-2, glassfish-3

我已经设置了两个 eclipse 项目（jsf2 web 项目）并通过 eclipse 将它们部署到 glassfish

```
eclipse juno ee 4.2.1 sr1 (fresh install and new workspace)
maven wtp
m2e
glassfish plugin for eclipse
glassfish 3.1.2.2 
```

一个项目是一个从头开始创建的简单动态 Web 项目，它只有一个 ejb 和一个 .xhtml 文件。

在动态 Web 项目中保存 .xhtml 文件时，它将被静默复制到 glassfish/domains/domain1/eclipseApps 中的正确位置，以便快速测试更改。

然而，在我使用 import-maven-project-wizard（选择一个 .pom 文件）创建的另一个项目中，保存一个 .xhtml 文件将触发重建和重新发布，这需要相当多的时间。在这两种情况下，应用程序都运行得很好。

（使用primefaces，一些glassfish-web.xml persistence.xml等maven项目也更复杂......但我相信这不会导致不同的行为）

问：我需要更改什么设置才能让我的 Maven 项目表现为动态 Web 项目？

编辑：问题摘要：在 maven 项目中保存 .xhtml 文件也会触发所有 EJB 和 ManagedBeans 的重新部署

编辑（在balus C的提示之后）：

调查表明，m2e wtp 插件在每次保存工作区中的文件时都会在以下文件中生成新的时间戳。

```
target\m2e-wtp\web-resources\META-INF\maven\<groupId>\<artifactId>\pom.properties
target\m2e-wtp\web-resources\META-INF\maven\<groupId>\<artifactId>\pom.xml 
```

如果我正确理解了[这里](https://github.com/sonatype/m2eclipse-extras/issues/8)的讨论，那么有人已经完成了一个修复，如果由于其他 Maven 的东西而不需要这些文件，将阻止这些文件被更新。遗憾的是，如果我正确理解了 git-hub，这个问题的修复还没有发布。

[Maven 归档器](http://maven.apache.org/shared/maven-archiver/)支持`<addMavenDescriptor/>`禁用 pom.properties 生成的配置选项，但似乎 m2e-wtp 插件已决定不遵守此选项[链接](https://github.com/sonatype/m2eclipse-extras/issues/9)

编辑 (20130114) 我尝试卸载 m2e wtp 只是为了看看是否摆脱 pom.properties 的生成会解决问题。我还检查了我编辑的 .xhtml 文件是 domain/domain1/eclipseApps/ 下唯一具有新时间戳的文件。

所以现在我又没有想法了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:34:57.073

终于设法解决了这个问题。这是我为新创建的 Maven 项目（它还依赖于工作区中的另一个项目）所需执行的最少步骤

在 Eclipse 项目属性 > Maven 中，取消选中“解决工作区项目中的依赖项”

在 pom 文件中为目标设置 runOnIncremental：war for maven-war-plugin 为 false

```
<build>
    ...
    <pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.eclipse.m2e</groupId>
                <artifactId>lifecycle-mapping</artifactId>
                <version>1.0.0</version>
                <configuration>
                    <lifecycleMappingMetadata>
                        <pluginExecutions>
                            <pluginExecution>
                                <pluginExecutionFilter>
                                    <groupId>org.apache.maven.plugins</groupId>
                                    <artifactId>maven-war-plugin</artifactId>
                                    <versionRange>[1.0.0,)</versionRange>
                                    <goals>
                                        <goal>war</goal>
                                    </goals>
                                </pluginExecutionFilter>
                                <action>
                                    <execute>
                                        <runOnIncremental>false</runOnIncremental>
                                    </execute>
                                </action>
                            </pluginExecution>
                        </pluginExecutions>
                    </lifecycleMappingMetadata>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>
</build> 
```

# php - 基于模板的网页-PHP

> ID：14285261
> 
> 赞同：-1
> 
> 时间：2013-01-11T19:26:52.217
> 
> 标签：php, html, template-engine

我正在尝试为站点创建基于模板的系统。它是一个非常简单的页面——我需要页眉、页脚作为模板，我使用 include_once("filename.html") 来调用它们。

我真的不知道我这样做是否正确。我是一名业余设计师。如果我错了，请帮助我？我尝试所有这些，因为我不想使用模板`engine`广告自己做。

```
---body.html--

 <html>
 <head>
 </head>
<body>

<?php
 include_once("header.htm") 
?>
:
  :
:"html body code"

<?php
 include_once("footer.htm") 
 ?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:28:56.050

尽管我会在 include_once 之后放置一个分号，但您这样做是正确的。通常`<head>`标签也在一个单独的文件中，因此可以包含在内。如果您想为每个页面使用不同的标题，您可以为其分配一个变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:31:07.340

这是肯定的一种方法。您可能需要考虑将“全局”文件（header.htm、footer.htm 等）放在名为“global”或“include”或类似名称的文件夹中，以便轻松识别它们。对于样式，您可能还需要做一个所有页面都调用的主 CSS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T19:39:21.753

你想要的是一个模板引擎。使用`includes`是肮脏的，真的只是***错误的方式***。

结帐[http://www.smarty.net/](http://www.smarty.net/)

这将允许您执行以下操作：

```
<html>
<body>
{include file="header.html"}
{include file="{$page}"}
{include file="footer.html"}
</body>
</html> 
```

# java - 在 JSPX 中创建自定义标签

> ID：14285266
> 
> 赞同：1
> 
> 时间：2013-01-11T19:27:08.300
> 
> 标签：java, jsp, jspx

请帮我！我在任何 jspx 页面中多次创建此代码

```
<c:if test="${not empty message}">
    <div id="message">
        <div class="${message.type}">${message.message}</div>
    </div>
</c:if> 
```

我可以创建一次标签并将其包含到我的页面中，例如（例如）在我使用的 Rails 中**:partial =>**吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:52:52.473

创建一个基于 JSP 的自定义标签并传入消息，例如：

```
<%@ attribute name="message" required="true" %>
<c:if test="${not empty message}">
    <div id="message">
        <div class="${message.type}">${message.message}</div>
    </div>
</c:if> 
```

查看[更多详细信息](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPTags5.html)，包括如何使用标签、将标签放在哪里等。有关所有血腥细节，请参阅[Java EE 5 自定义标记文档](http://docs.oracle.com/javaee/5/tutorial/doc/bnalj.html)。

基于 JSP 的自定义标记（或多或少）相当于部分，尽管您也可以简单地使用`<jsp:include>`JSP 片段。标记文件有一些优点，简单的包含有一些优点——这通常是一个争论的问题。

我个人倾向于使用标签，我发现它们更具交流性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:58:26.163

您可以创建一个简单的标签，如下所示。

```
 <jsp:root xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:fn="http://java.sun.com/jsp/jstl/functions" 
xmlns:util="urn:jsptagdir:/WEB-INF/tags/util" xmlns:jsp="http://java.sun.com/JSP/Page" version="2.0">
      <jsp:output omit-xml-declaration="yes" />

      <jsp:directive.attribute name="description" type="java.lang.String" required="false" rtexprvalue="true" description="Some descripton" />
    </jsp:root> 
```

查看@Dave Newton 链接到有关如何设置的文档。

# php - Facebook API 未发布到 Facebook 粉丝页面 PHP

> ID：14285273
> 
> 赞同：0
> 
> 时间：2013-01-11T19:27:29.297
> 
> 标签：php, facebook, facebook-graph-api

第一次涉足facebook图表，所以如果修复有点容易，请原谅我的问题......

我已经制作了我的应用程序，得到了我所有的 appID 和秘密，并且我正在尝试作为页面发布到页面。我已授予应用程序权限，并进行了一些调试，但是在 $facebook->api 调用之后，它什么也没做...

我的代码如下：

```
<?php
require 'core/components/facebook/facebook.php';

$facebook = new Facebook(array(
    'appId'  => '****',
    'secret' => '****',
));

// Get User ID
$user = $facebook->getUser();

if ($user) {
    try {
            $page_id = '****';
            $page_info = $facebook->api("/$page_id?fields=access_token");
            if( !empty($page_info['access_token']) ) {
                $args = array(
                        'access_token'  => $page_info['access_token'],
                        'message'       => "Testing"
                );
            //An echo of $page_info['access_token'] gives me an access token...
                $post_id = $facebook->api("/100160870061728/feed", "post", $args);
                //Does not echo below - help!
            echo "Success post id = " . $post_id;
            }
        else {
                $permissions = $facebook->api("/me/permissions");
                if( !array_key_exists('publish_stream', $permissions['data'][0]) || !array_key_exists('manage_pages', $permissions['data'][0])) {
                        header("Location: " . $facebook->getLoginUrl(array("scope" => "publish_stream, manage_pages")));
                }
            }
    } 
    catch (FacebookApiException $e) {
            error_log($e);
            $user = null;
    }
}

if ($user) {
    $logoutUrl = $facebook->getLogoutUrl();
} 
else {
    $loginUrl = $facebook->getLoginUrl(array('scope' => 'manage_pages, publish_stream'));
}

?> 
```

提前谢谢了

# python - “分数”变量不更新，总是打印 10

> ID：14285278
> 
> 赞同：-5
> 
> 时间：2013-01-11T19:27:33.220
> 
> 标签：python, python-2.7

```
from random import randint
import random
from time import sleep
a = 'circle'
b = 'website'
c = 'parallel'
d = 'purple'
e = 'picture'
f = 'professional'
g = 'hospital'
h = 'complex'
i = 'helicopter'
j = 'airport'
k = 'programer'
l = 'attachment'
m = 'python'
n = 'wireless'
o = 'spouse'
p = 'desktop'
az=randint(1,16)
zz=1
score=10
aa=list(a)
print "Welcome to Josh Azrin's word game! I will give you a scrambled word."
print "If you get the word right you get 10 points. If not than you lose 2 points. You start out with 10 points."
moo = raw_input("Are you Ready? : ")
print"Here is your first scrambled word."
sleep(1.5)
while az == 1:
    print " "
    print(''.join(random.sample(a,len(a))))
    print " "
    info = raw_input(": ")
    if info == a:
        sleep(1)
        print "Nice job. You just earned 10 points! Your score is"
        sleep(1)
        score+10
        print score
        az=randint(1,16)
    else:
        print " "
        print "Nice try. You just lost 2 points. Please try agian."
        print "Your score is"
        sleep(1)
        score - 2
        print score
        sleep(1) 
```

# ...................................................

```
while az == 2:
    print " "
    print(''.join(random.sample(b,len(b))))
    print " "
    info = raw_input(": ")
    if info == b:
        sleep(1)
        print "Nice job. You just earned 10 points! Your score is"
        sleep(1)
        score+10
        print score
        az=randint(1,16)
    else:
        print " "
        print "Nice try. You just lost 2 points. Please try agian."
        print "Your score is"
        sleep(1)
        score - 2
        print score
        sleep(1)
while az == 3:
    print " "
    print(''.join(random.sample(c,len(c))))
    print " "
    info = raw_input(": ")
    if info == c:
        sleep(1)
        print "Nice job. You just earned 10 points! Your score is"
        sleep(1)
        score+10
        print score
        az=randint(1,16)
    else:
        print " "
        print "Nice try. You just lost 2 points. Please try agian."
        print "Your score is"
        sleep(1)
        score - 2
        print score
        sleep(1)
while az == 4:
    print " "
    print(''.join(random.sample(d,len(d))))
    print " "
    info = raw_input(": ")
    if info == d:
        sleep(1)
        print "Nice job. You just earned 10 points! Your score is"
        sleep(1)
        score+10
        print score
        az=randint(1,16)
    else:
        print " "
        print "Nice try. You just lost 2 points. Please try agian."
        print "Your score is"
        sleep(1)
        score - 2
        print score
        sleep(1)
while az == 5:
    print " "
    print(''.join(random.sample(e,len(e))))
    print " "
    info = raw_input(": ")
    if info == e:
        sleep(1)
        print "Nice job. You just earned 10 points! Your score is"
        sleep(1)
        score+10
        print score
        az=randint(1,16)
    else:
        print " "
        print "Nice try. You just lost 2 points. Please try agian."
        print "Your score is"
        sleep(1)
        score - 2
        print score
        sleep(1)
while az == 6:
    print " "
    print(''.join(random.sample(f,len(f))))
    print " "
    info = raw_input(": ")
    if info == f:
        sleep(1)
        print "Nice job. You just earned 10 points! Your score is"
        sleep(1)
        score+10
        print score
        az=randint(1,16)
    else:
        print " "
        print "Nice try. You just lost 2 points. Please try agian."
        print "Your score is"
        sleep(1)
        score - 2
        print score
        sleep(1)
while az == 7:
    print " "
    print(''.join(random.sample(g,len(g))))
    print " "
    info = raw_input(": ")
    if info == g:
        sleep(1)
        print "Nice job. You just earned 10 points! Your score is"
        sleep(1)
        score+10
        print score
        az=randint(1,16)
    else:
        print " "
        print "Nice try. You just lost 2 points. Please try agian."
        print "Your score is"
        sleep(1)
        score - 2
        print score
        sleep(1)
while az == 8:
    print " "
    print(''.join(random.sample(h,len(h))))
    print " "
    info = raw_input(": ")
    if info == h:
        sleep(1)
        print "Nice job. You just earned 10 points! Your score is"
        sleep(1)
        score+10
        print score
        az=randint(1,16)
    else:
        print " "
        print "Nice try. You just lost 2 points. Please try agian."
        print "Your score is"
        sleep(1)
        score - 2
        print score
        sleep(1)
while az == 9:
    print " "
    print(''.join(random.sample(i,len(i))))
    print " "
    info = raw_input(": ")
    if info == i:
        sleep(1)
        print "Nice job. You just earned 10 points! Your score is"
        sleep(1)
        score+10
        print score
        az=randint(1,16)
    else:
        print " "
        print "Nice try. You just lost 2 points. Please try agian."
        print "Your score is"
        sleep(1)
        score - 2
        print score
        sleep(1)
while az == 10:
    print " "
    print(''.join(random.sample(j,len(j))))
    print " "
    info = raw_input(": ")
    if info == j:
        sleep(1)
        print "Nice job. You just earned 10 points! Your score is"
        sleep(1)
        score+10
        print score
        az=randint(1,16)
    else:
        print " "
        print "Nice try. You just lost 2 points. Please try agian."
        print "Your score is"
        sleep(1)
        score - 2
        print score
        sleep(1)
while az == 11:
    print " "
    print(''.join(random.sample(k,len(k))))
    print " "
    info = raw_input(": ")
    if info == k:
        sleep(1)
        print "Nice job. You just earned 10 points! Your score is"
        sleep(1)
        score+10
        print score
        az=randint(1,16)
    else:
        print " "
        print "Nice try. You just lost 2 points. Please try agian."
        print "Your score is"
        sleep(1)
        score - 2
        print score
        sleep(1)
while az == 12:
    print " "
    print(''.join(random.sample(l,len(l))))
    print " "
    info = raw_input(": ")
    if info == l:
        sleep(1)
        print "Nice job. You just earned 10 points! Your score is"
        sleep(1)
        score+10
        print score
        az=randint(1,16)
    else:
        print " "
        print "Nice try. You just lost 2 points. Please try agian."
        print "Your score is"
        sleep(1)
        score - 2
        print score
        sleep(1)
while az == 13:
    print " "
    print(''.join(random.sample(m,len(m))))
    print " "
    info = raw_input(": ")
    if info == m:
        sleep(1)
        print "Nice job. You just earned 10 points! Your score is"
        sleep(1)
        score+10
        print score
        az=randint(1,16)
    else:
        print " "
        print "Nice try. You just lost 2 points. Please try agian."
        print "Your score is"
        sleep(1)
        score - 2
        print score
        sleep(1)
while az == 14:
    print " "
    print(''.join(random.sample(n,len(n))))
    print " "
    info = raw_input(": ")
    if info == n:
        sleep(1)
        print "Nice job. You just earned 10 points! Your score is"
        sleep(1)
        score+10
        print score
        az=randint(1,16)
    else:
        print " "
        print "Nice try. You just lost 2 points. Please try agian."
        print "Your score is"
        sleep(1)
        score - 2
        print score
        sleep(1)
while az == 15:
    print " "
    print(''.join(random.sample(o,len(o))))
    print " "
    info = raw_input(": ")
    if info == o:
        sleep(1)
        print "Nice job. You just earned 10 points! Your score is"
        sleep(1)
        score+10
        print score
        az=randint(1,16)
    else:
        print " "
        print "Nice try. You just lost 2 points. Please try agian."
        print "Your score is"
        sleep(1)
        score - 2
        print score
        sleep(1)
while az == 16:
    print " "
    print(''.join(random.sample(p,len(p))))
    print " "
    info = raw_input(": ")
    if info == p:
        sleep(1)
        print "Nice job. You just earned 10 points! Your score is"
        sleep(1)
        score+10
        print score
        az=randint(1,16)
    else:
        print " "
        print "Nice try. You just lost 2 points. Please try agian."
        print "Your score is"
        sleep(1)
        score - 2
        print score
        sleep(1)
while az == 17:
    print " "
    print(''.join(random.sample(q,len(q))))
    print " "
    info = raw_input(": ")
    if info == q:
        sleep(1)
        print "Nice job. You just earned 10 points! Your score is"
        sleep(1)
        score+10
        print score
        az=randint(1,16)
    else:
        print " "
        print "Nice try. You just lost 2 points. Please try agian."
        print "Your score is"
        sleep(1)
        score - 2
        print score
        sleep(1)
while az == 18:
    print " "
    print(''.join(random.sample(r,len(r))))
    print " "
    info = raw_input(": ")
    if info == r:
        sleep(1)
        print "Nice job. You just earned 10 points! Your score is"
        sleep(1)
        score+10
        print score
        az=randint(1,16)
    else:
        print " "
        print "Nice try. You just lost 2 points. Please try agian."
        print "Your score is"
        sleep(1)
        score - 2
        print score
        sleep(1)
while az == 19:
    print " "
    print(''.join(random.sample(s,len(s))))
    print " "
    info = raw_input(": ")
    if info == s:
        sleep(1)
        print "Nice job. You just earned 10 points! Your score is"
        sleep(1)
        score+10
        print score
        az=randint(1,16)
    else:
        print " "
        print "Nice try. You just lost 2 points. Please try agian."
        print "Your score is"
        sleep(1)
        score - 2
        print score
        sleep(1)
while az == 20:
    print " "
    print(''.join(random.sample(t,len(t))))
    print " "
    info = raw_input(": ")
    if info == t:
        sleep(1)
        print "Nice job. You just earned 10 points! Your score is"
        sleep(1)
        score+10
        print score
        az=randint(1,16)
    else:
        print " "
        print "Nice try. You just lost 2 points. Please try agian."
        print "Your score is"
        sleep(1)
        score - 2
        print score
        sleep(1) 
```

我该怎么做才能使计分器工作？我搞砸了一吨，不管它保持在10...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:28:40.147

您实际上需要重新分配分数的值。

`score = score+10`不是`score+10`

简单地说`score+10`不会修改`score`变量。

* * *

顺便说一句，您的代码还有很多其他问题。

1.  由于您没有循环，因此`while`语句不适用于测试选择了哪个数字。你应该使用一个`if`语句。
2.  绝对没有理由，而且它使您的代码几乎不可读，连续有 20 个`while`（或`if`）语句。您应该找到一种方法来制作一个概括每种情况的函数。
3.  为什么你`sleep`到处都有声明？
4.  您只有 16 个可能的选择，但您要测试多达 20 个
5.  最好尽可能避免硬编码，如`random(1,16)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:57:44.453

而不是使用`score + 10`or`score - 3`使用`score = score + 10`or `score = score - 3`。score + 10 只是将 score 加 10 的值相加。它不会改变 score 的值。

# bash - 检查变量中的字符串

> ID：14285279
> 
> 赞同：0
> 
> 时间：2013-01-11T19:27:34.853
> 
> 标签：bash

在 bash 中，我经常检查变量的值，这样可以吗？有没有更好的办法？

例子：

```
 if [ "`echo ${file} | grep -vE '(Trash|home)'`" ] ;then 
```

这是检查变量文件是否不包含单词 Trash 或 home，如果它不执行某些操作。关键是我正在使用 echo 和 grep，我认为这可能很浪费。

另一个例子：

```
 if [ "`less ${TEMPQUERY} | grep 'http'`" ] ;then 
```

它正在检查文件中的字符串 http，如果它在文件中，请执行一些操作。

我想我只是想知道其他人在做什么，以及我是否有充分的理由不应该以这种方式编码。无论如何，提前感谢您的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T19:51:25.710

```
$ file="My home"
$ [[ $file =~ Trash|home ]] ; echo $?
0
$ file="root"
$ [[ $file =~ Trash|home ]] ; echo $?
1

$ cat input.txt
http://...
$ grep -v -q http input.txt ; echo $?
1 
```

# java - 快速迭代一组并删除满足特定条件的项目

> ID：14285281
> 
> 赞同：0
> 
> 时间：2013-01-11T19:27:37.690
> 
> 标签：java, performance, data-structures, collections

所以我有一个程序，其中包含一组记录。该集合可能有几件或数十万件。每条记录的一位数据是时间戳。我需要消除一组中的所有项目，但其中一个在 15 秒内。最有效的方法是什么？

目前，我创建了该集合的副本。然后我遍历集合，将第一个项目与其他所有项目进行比较，然后重复。如果在 15 秒内找到匹配项，我会将其从重复集中删除。然后将重复集写出到文件中。

显然这是可行的，但我终于意识到这是非常低效的。对于大型集，这似乎需要很长时间，假设它没有发生其他问题。有人可以为我提供一种更智能、更快、更有效（或只是适当）的方式来用 Java 执行此操作吗？我意识到，因为记录包含时间戳，所以对它们进行排序可能会有很大帮助。我想把这一切都包含在程序中，所以我想我需要研究排序和比较器。

我只是无法完全解决这个问题。我想出了一些其他的想法来改进我的代码，但我不禁觉得我仍然完全错误。感谢您的任何建议。

哦，这是为了工作，而不是学校或任何东西，所以任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T19:30:40.800

现在，您描述的算法在**O(n ² )**时间内运行。

现在，如果您需要更快的算法，您可以做的是

*   对您的集合进行排序（如果 java 没有基类排序函数，我会感到惊讶）**O(n * lg(n))**
*   15 秒内的所有“匹配”将彼此相邻
*   您只需要遍历每个元素一次只检查相邻元素**O(n)**

如果你这样做，那么你的算法可能会更易于管理**O(n * lg(n))**时间复杂度

[这里有一些关于 Java 的 Array.sort() 的信息](http://www.leepoint.net/notes-java/data/arrays/70sorting.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T20:43:10.563

您可以继续使用 Set，只需确保从一开始就对其进行排序，例如[TreeSet](http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html)（或[ConcurrentSkipListSet](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentSkipListSet.html)，如果您有多个线程）。要么你实现 Comparable 以便比较时间戳，要么你提供一个 Comparator 来做同样的事情。

这将保证您不能有重复项（就像您之前那样），并且还可以简化您的代码。插入 TreeSet 也会花费你 O(n log n) 的时间。

从这里开始，您可以继续使用 Sam I am 建议的方法：迭代器将按元素升序遍历它，您只需将每个元素与前一个元素和下一个元素进行比较。

顺便说一句，您不需要将所有内容复制到另一个 Set，只需确保使用迭代器的 remove 方法，而不是 TreeSet 的 remove：[遍历 Collection，在循环中删除时避免 ConcurrentModificationException](https://stackoverflow.com/questions/223918/efficient-equivalent-for-removing-elements-while-iterating-the-collection)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T20:28:42.820

如果您有地图，请说：

```
Map<Long, List<MyClass>> map; 
```

其中关键是时间戳，那么你可以这样做：

```
// Value of wanted elements
List<MyClass> ret = new ArrayList<MyClass>();

// Go over all timestamps: if a timestamp is wanted, add all
// corresponding elements
for (Map.Entry<Long, List<MyClass>> entry: map.entrySet())
    if (wanted(entry.getKey()))
        ret.addAll(entry.getValue());

// Return
return ret; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T22:07:28.567

我还没有测试过性能，但我可能实现的一种方法是创建一个 Set 并覆盖相关对象类型的 equals() 方法。

```
public boolean equals( Object o )
{
  return( Math.abs( this.getTimestampSeconds() - o.getTimestampSeconds() ) < 15 );
} 
```

通过这样做，当您将每一行添加到集合中时，对于任何给定的 15 秒时间片，您最终只会得到一个条目。

*** 编辑 ****

我不会对常规域对象执行此覆盖。我可能只会在某种门面对象中执行此操作——它是专门为此目的而创建的。

另外，正如其他人所说。这假定您的输入列表按升序时间戳排序。

# javascript - IE8+ 与同一个域打开器 <-> 选项卡进行通信的最佳方式是什么？postMessage 不起作用，opener.f() & loc.href = FAIL

> ID：14285283
> 
> 赞同：3
> 
> 时间：2013-01-11T19:27:40.280
> 
> 标签：javascript, internet-explorer, internet-explorer-8, internet-explorer-9, postmessage

我正在为书签创建一个登录流程，并且我想避免执行重定向流程，因为它会引起其他一些并发症。因此，我正在寻找一种在同一域的选项卡或弹出窗口与在新选项卡或弹出窗口中用作 window.opener 的内部 iFrame 之间进行通信的方法。

在其他浏览器中，这可以通过 window.opener.postMessage 来完成，但在 IE8+ 中，这在窗口之间是不允许的，只能在 iFrame 之间进行，所以当然在典型的方式中，IE 需要特殊处理，因为它们无法跟随标准或预期行为。

在其他几次尝试中，我尝试了各种方法，我可能仍会尝试 easyXDM，但我希望使用更轻量的代码，而不是将另一个库包含到书签中，我最终想通过谷歌的闭包压缩器对其进行压缩。

我试过：
`window.opener.postMessage()`- 在选项卡之间的 IE8 中不起作用

`window.opener.location.href`- 工作不可靠

`window.opener.someFunction()`- 不适用于所有功能？为什么？

现在有点工作的是通过`localStorage.authToken`在子窗口/选项卡中设置，然后在父/打开器中有一个
`setInterval(function(){checkToken(localStorate.authToken)},3000);`

**更新**
我找到了一个合理的解决方案
[http://www.sfpeter.com/2008/03/communication-between-browser-windows-with-jquery-my-new-plugin/](http://www.sfpeter.com/2008/03/communication-between-browser-windows-with-jquery-my-new-plugin/)

SFPeter 的这种方法在每个页面上设置了一个小的隐藏表单，然后为每个页面使用事件消息。它适用于相同的域请求，并且恰好在 IE8+ 上的窗口和选项卡之间工作。作为传递的一部分，它似乎确实在正文上发出了一个点击事件，在某些情况下可能需要忽略它。

# mysql - 相同的条件，不同的结果？

> ID：14285286
> 
> 赞同：3
> 
> 时间：2013-01-11T19:27:54.890
> 
> 标签：mysql, phpmyadmin, group-by, having-clause

通过阅读 MySQL 文档，我无法解释 phpMyAdmin 中这两个查询之间的区别：

```
SELECT * FROM f_ean GROUP BY ean HAVING type = 'media' 
```

--> 给我 57059 个结果

```
SELECT ean, type FROM f_ean GROUP BY ean HAVING type = 'media' 
```

--> 给我 73201 个结果

只显示不同的列，查询的结果编号怎么可能不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:45:50.160

您应该使用`WHERE`，而不是`HAVING`在您尝试过滤记录时使用。`HAVING`用于在分组和排序发生后应用过滤器。

无论如何，问题在于 MySQL 如何使用`GROUP BY`. `GROUP BY`应与聚合一起使用；MySQL 为方便起见扩展了功能。由于它对列进行排序和分组的方式，您会收到不同的结果。

> MySQL 扩展了 的使用，`GROUP BY`以便选择列表可以引用未在`GROUP BY`子句中命名的非聚合列。这意味着前面的查询在 MySQL 中是合法的。您可以使用此功能通过避免不必要的列排序和分组来获得更好的性能。但是，这主要在每个未在 中命名的非聚合列中的所有值`GROUP BY`对于每个组都相同时很有用。

请[参阅`GROUP BY`](http://dev.mysql.com/doc/refman/5.0/en//group-by-extensions.html).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T19:57:57.873

MySQL 不保证非分组列中的*哪个*值将在结果集中，除非您指定使用 WHERE 子句或 AGGREGATE 函数（或可能是 JOIN 条件）。

稍微推测一下，从未见过任何文档来说明它如何选择要包含的值，我的假设是它在最相关的索引中使用行顺序。

因此，可以合理地假设 SELECTing colA、colZ 与 SELECTing * 可能会触发 MySQL 在编译结果集时利用不同的索引，改变行的“感知”顺序，并显示不同的值。

如果您使用 WHERE 条件，这无关紧要。在分组之前应用 WHERE 条件。但是，当您在未分组的列上使用 HAVING 条件时，该列中可能存在变化，您看到的差异在很大程度上是*预期的行为。*

# iphone - 为什么我的文件总是从 xcode 的项目导航器中消失？

> ID：14285287
> 
> 赞同：15
> 
> 时间：2013-01-11T19:27:55.427
> 
> 标签：iphone, xcode, viewcontroller

我正在从事的项目是作为一个带有故事板的单视图应用程序开始的，并且我添加了另外 2 个视图控制器，每个控制器都有一个 .m 和一个 .h 文件。但是，每次我保存、退出然后重新启动时，4 个新文件都会从项目导航器中消失。我必须点击“将文件添加到项目”并每次从项目文件夹中手动将它们拖入。这不是很不方便，但很烦人，我基本上只是在不工作时将项目最小化。有谁知道发生了什么，或者我如何强制文件保留在导航器中？这种事情以前从未发生过。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2014-01-24T03:21:42.830

过滤栏上有一个按钮“仅显示最近的文件”；该图标看起来像一个时钟。您需要切换此按钮以显示所有文件。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-07-13T03:56:08.413

您可能有一个过滤器来仅显示最近的文件。要切换它，

[![在此处输入图像描述](../Images/c6db69888f0045ea0190ee4c8750e599.png)](https://i.stack.imgur.com/Hjbi2.gif)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-12T01:25:11.693

过滤器栏上有一个按钮（第 4 个） - 项目导航器窗格的底部部分 - 您可以在“仅显示未保存更改的文件”的“开/关”之间切换。您可能已将其“打开”。单击该按钮，您可能会看到文件

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-07-31T23:16:37.303

单击顶部菜单中的导航。然后单击“在项目导航器中显示”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-05T14:51:01.777

这太奇怪了。我发现使用过滤器看不到项目中的文件的原因是我无意中折叠了项目基本目录下的树，显然是在过滤器处于活动状态时。 [![在此处输入图像描述](../Images/d1b142730da36116c5ec457a2f8d8530.png)](https://i.stack.imgur.com/eoRDL.png)

如果您关闭它然后尝试过滤，它可以工作。但是如果你在过滤发生时关闭它，它会记住这一点。我想在某些情况下这会有所帮助...

# python - 为什么 Python 选择使用 None 而不是 null？

> ID：14285291
> 
> 赞同：5
> 
> 时间：2013-01-11T19:28:09.310
> 
> 标签：python

Python 似乎被创建为一种用于完成工作的快速、最小的语言。虽然我喜欢 Python，但有一件事对我来说从来没有意义。为什么命名一个空实体`None`而不是`Null`甚至`null`？免费保存一个角色！有谁知道为什么这条路是用 Python 走的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T19:31:12.130

这是一个哲学问题：你在问“为什么？”。

尽管如此，这里有一个答案：即使对于不懂这门语言的人来说，Python 也努力做到清晰易读。这一行：

```
if foo is None: 
```

读起来比这个好：

```
if (foo == null) { 
```

在正常的英语语法中，“null”不是一个*东西*。是形容词，不是名词。“无”是一个名词，这就是你在计算机科学中使用它的方式。

# python - 需要帮助用 python 解析 XML 文件

> ID：14285301
> 
> 赞同：0
> 
> 时间：2013-01-11T19:28:58.463
> 
> 标签：python, xml-parsing

我有一个列出需要完成的作业的 xml 文件。我希望能够用 python 解析它。这是我的示例 XML 文件

XML 代码：

```
<?xml version="1.0" encoding="ISO-8859-1"?>

<Jobs>

<Job name="Leo" type="upload">
    <File name="Leo.csv" source="/leegin/leo/OU" destination="/leegin/leo/OU/scripts" archive="/leegin/leo/OU/history" date="1" del="1" stat="1"/>
    <File name="Leo2.csv" source="/leegin/leo/OU" destination="/leegin/leo/OU/scripts" archive="/leegin/leo/OU/history" date="1" del="1" stat="1"/>
    <Log name="Leo.txt" path="/leegin/leo/OU/log"/>
    <Notify name="Leo Cruz" email="lcruz@me.com"/>
    <ftp port="21" proto="0" pasvmode="0" mode="0"/>
</Job>

<Job name="Manny" type="download">
    <File name="Manny.csv" source="/leegin/leo/OU" destination="/leegin/leo/OU/scripts" archive="/leegin/leo/OU/history" date="1" del="1" stat="1"/>
    <File name="Manny2.csv" source="/leegin/leo/OU" destination="/leegin/leo/OU/scripts" archive="/leegin/leo/OU/history" date="1" del="1" stat="1"/>
    <Log name="Manny.txt" path="/leegin/leo/OU/log"/>
    <Notify name="Manny Caparas" email="mcaparas@me.com"/>
    <ftp port="21" proto="0" pasvmode="0" mode="0"/>
</Job>

<Job name="Joe" type="copy">
    <File name="Joe.csv" source="/leegin/leo/OU" destination="/leegin/leo/OU/scripts" archive="/leegin/leo/OU/history" date="1" del="1" stat="1"/>
    <File name="Joe2.csv" source="/leegin/leo/OU" destination="/leegin/leo/OU/scripts" archive="/leegin/leo/OU/history" date="1" del="1" stat="1"/>
    <Log name="Joe.txt" path="/leegin/leo/OU/log"/>
    <Notify name="Joe Gomez" email="jgomez@me.com"/>
    <ftp port="21" proto="0" pasvmode="0" mode="0"/>
</Job>

</Jobs> 
```

蟒蛇代码：

```
#!/usr/bin/python2.6

import sys
import optparse

def main():
    desc="""This script is used to setup and run an Automator job."""
    parser = optparse.OptionParser()
    parser.description = desc
    parser.add_option('-j', dest='jobname', type='str', action='store', help='Name of job to execute', metavar='[JobName]')
    parser.add_option('-v', dest='verbose', action='store_true', default=False, help='Used to view scripts debug information.')
    (options, args) = parser.parse_args()

    mandatory_options = ['jobname']
    for m in mandatory_options:
        if not options.__dict__[m]:
            print 'Options -j is required.'
            parser.print_help()
            sys.exit(-1)

    getjob(options.jobname)

def getjob(task):
    from xml.etree import ElementTree
    from xml.etree.ElementTree import Element
    from xml.etree.ElementTree import SubElement

    doc = ElementTree.parse('/opt/automize/template/jobs.xml')

    Files = doc.findall("./Job/File")
    for File in Files:
        print File.attrib['name']

if __name__ == '__main__':  
    main() 
```

好的，所以我要做的是给 python 脚本一个作业名称，然后让脚本在 XML 文件中找到作业并仅提取与特定作业相关的部分。

到目前为止，我已经能够构建所有作业或所有文件的列表。不过，我无法让它为特定的工作做到这一点。我真的很感激这件事的一些指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:41:34.980

[`findall`](http://effbot.org/zone/element.htm)您使用的方法需要一个模式参数，它：

> 可以是标签名称，也可以是[路径表达式](http://effbot.org/zone/element-xpath.htm)。如果给定标签名称，则仅检查直接子元素。路径表达式可用于搜索整个子树。

如果您点击“路径表达式”链接，您会看到它是[XPath](http://www.w3.org/TR/xpath/)的一个子集。因此，您只需要知道用 XPath 术语（或者更确切地说，在 etree 支持的 XPath 子集）中指定查询的正确方法。

您的查询要求所有`File`节点下的所有`Job`节点。要请求具有属性的所有`File`节点下的所有节点，只需使用而不是。`Job``name='Manny'``Job[@name='Manny']``Job`

所以：

```
doc.findall("./Job[@name='{}']/File".format(task)) 
```

不幸的是，etree 1.2 中的 XPath 功能比 1.3 更不完整，而且我相信 Python 2.6 内置了 1.2，所以这可能不适合你。（我相信如果它是真的，这将立即显而易见——路径模式编译器会引发一个异常，告诉你你正在使用它从未听说过的分隔符或运算符——而不是，例如，看起来有效但实际上不匹配任何东西。 )

显而易见的解决方案是：

*   使用 Python 2.7（或 3.x）而不是 2.6。
*   安装 1.3（参见[此处](http://effbot.org/zone/element-index.htm#installation)）并使用它而不是内置实现。
*   下载 1.3（相同链接），将其`ElementTree.py`和`ElementPath.py`文件复制到您的项目中，然后导入它们。
*   安装[`lxml`](http://lxml.de)并使用它的实现而不是参考实现。

# r - 我想从 x、y 和 z 创建一个计数地图，并使用 ggplot 使用 shapefile 剪辑数据

> ID：14285302
> 
> 赞同：6
> 
> 时间：2013-01-11T19:28:59.813
> 
> 标签：r, map, ggplot2, shapefile

我有一个包含 Eastings、Northings 和 Age 的数据集。我想绘制我的数据集的年龄。数据集在以下位置上传： [https ://www.dropbox.com/s/zmtxluhwuupb9iv/age%20at%202100.csv](https://www.dropbox.com/s/zmtxluhwuupb9iv/age%20at%202100.csv)

我用来创建简单图形和轮廓的代码如下：

```
age2100 <- read.csv("age at 2100.csv",header=TRUE, sep=",")
p <- ggplot(age2100, aes(x=Eastings, y=Northings, colour=("Age")))+geom_point()
p+geom_density2d() 
```

我得到的输出如下：

我无法上传图片，因此请在以下 Dropbox 位置找到图片：

[https://www.dropbox.com/s/5k5gefqi7wz6v36/age.png](https://www.dropbox.com/s/5k5gefqi7wz6v36/age.png)

现在，我想在背景上添加一个 shapefile 并将轮廓线剪辑到 shapefile。

所需的输出如下：

[https://www.dropbox.com/s/tqhx2t8cqqozwbt/7Q10%20flow%20dye%20from%20P%20and%20S.JPG](https://www.dropbox.com/s/tqhx2t8cqqozwbt/7Q10%20flow%20dye%20from%20P%20and%20S.JPG)

如何从图 1 进行到所需的输出？如果有人能给我建议，那就太好了。

非常感谢。

贾巴巴

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T20:17:53.123

两种可能：

1.  如果谷歌地图没问题，那么使用`ggmap`.
2.  如果它必须是您的 shapefile，请查看`fortify`in `ggplot`，其中包含`SpatialPolygonsDataFrame`s 的方法。

# java - 如何正确使用 Java 中的拆分

> ID：14285303
> 
> 赞同：1
> 
> 时间：2013-01-11T19:29:01.350
> 
> 标签：java

我一直在做这个代码，但我一直坚持如何正确拆分文本文件。我怎么能做到这一点？我正在使用二维数组，同时从文本文件中读取。

```
Scanner sc= new Scanner (System.in);
    int entry;
    String hockeyStats[][] = new String[8][30];//Array initialized, up to 30 players in total can be in the database.
    BufferedReader input = new BufferedReader (new FileReader ("Vancouver Stats.txt"));//Text file with player names imported.
    // FULL NAME, GOALS, ASSISTS, PLUSMINUS, PENALTY MINUTES, SHOTS
    String listnumbers="word";
    while (listnumbers!=null)
    {
        for (int x=0; x<30;++x)
        {
            listnumbers=input.readLine();
            String temp[]=listnumbers.split(" ");
            for (int y=0; y<7;++y)
            {
                hockeyStats[x][y]=temp[y];
            }

        }
    }
    input.close(); 
```

我必须做什么？我不明白这里的问题。这是我的文本文件中的内容，Vancouver Stats

```
Kesler Ryan 22 27 11 56 222
Sedin Henrik 14 67 23 52 113  
Edler Alexander 11 38 0 34 228 
Hansen Jannik 16 23 18 34 137 
Hamhuis Dan 4 33 29 46 140  
Tanev Christopher 0 2 10 2 15 
```

我对如何获取这些数据集并将它们放入二维数组感到困惑，这样我就可以询问用户是否要排序、搜索玩家、添加他们等。

如果有人可以帮助我，请感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T20:41:21.100

您可以使用以下代码读取您的测试文件并管理您的数据。

```
 try {
            File file=new File("asd.txt");
            Scanner sc=new Scanner(file);
            /*
             * If Players name are unique
             */
            Map<String,ArrayList> mPlayerData=new HashMap();
            ArrayList mData=new ArrayList();

            while(sc.hasNext()){
                 String mPlayerName="";
                 Scanner sc2=new Scanner(sc.nextLine());
                 sc2.useDelimiter(" ");
                 int i=0;
                 while(sc2.hasNext()){
                     if(i<2){
                         mPlayerName=mPlayerName.equalsIgnoreCase("")?sc2.next():mPlayerName+" "+sc2.next();
                     }else{
                         mData.add(sc2.next());
                     }
                     i++;
                 }
                 mPlayerData.put(mPlayerName, mData);
            }
            System.err.println(mPlayerData.size());
        } catch (FileNotFoundException ex) {
            Logger.getLogger(JavaApplication1.class.getName()).log(Level.SEVERE, null, ex);
        } 
```

享受......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T20:04:25.293

我正在为您的问题提供工作代码。代码如下。我将尝试解释您实施错误的一些事情。

1.  `hockeyStats[x][y]=temp[y];`由于前进超过 8，因此超出界限异常`x`。记住`hockeyStats`大小为 8x30
2.  `String temp[]=listnumbers.split(" ")`命中空异常，因为`listnumbers=input.readLine();`可能没有读取任何输入。这发生在文件的末尾。

    导入 java.io.BufferedReader；导入 java.io.FileReader；导入 java.io.FileNotFoundException；导入 java.io.IOException；

    ```
    public class vvvd {

    public static void main(String[] ards ) throws FileNotFoundException, IOException{
    //Scanner sc= new Scanner (System.in);
    int entry;
    String hockeyStats[][] = new String[8][30];//Array initialized, up to 30 players in total can be in the database.
    BufferedReader input = new BufferedReader (new FileReader ("Vancouver.txt"));//Text file with player names imported.
    // FULL NAME, GOALS, ASSISTS, PLUSMINUS, PENALTY MINUTES, SHOTS
    String listnumbers="word";

    listnumbers=input.readLine();
    int x = 0;
    while (listnumbers!=null)
    {
        //for (int x=0; x<8;++x)
        //{

          if(x >= 8)
              break;

            String temp[]=listnumbers.split(" ");
            for (int y=0; y<7;++y)
            {
                hockeyStats[x][y]=temp[y];
            }

        //}
      x++;
     listnumbers=input.readLine();
    }
    input.close(); 
    ```

    }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T19:39:59.460

这是我遇到的问题。

```
String hockeyStats[][] = new String[8][30]; 
```

考虑到稍后您指的是：

```
hockeyStats[x][y] 
```

在其中迭代 30 多个玩家`x`，以及 8 个属性`y`。您应该声明您的 stats 数组`new String[30][8]`。如果问题是`ArrayIndexOutOfBoundsException`，那应该解决它。

* * *

```
String listnumbers="word";
//Here, we check for a null value.  Two reasons this isn't working, see the following comments.
while (listnumbers!=null)
{
    //Looping through 30 records, without ever touching the while loop.
    //This attempts to read and add 30 lines, then checks whether listnumbers is null
    //(and if not, adds another 30, etc.)
    for (int x=0; x<30;++x)
    {
        //You might get listnumbers == null here
        listnumbers=input.readLine();
        //And if you do, it will throw an exception here!
        //Note, there is nothing checking for null between those two points.
        String temp[]=listnumbers.split(" ");
        for (int y=0; y<7;++y)
        {
            hockeyStats[x][y]=temp[y];
        }

    }
} 
```

您可以使用几种替代方法。一个是，摆脱 while 循环，而是这样做：

```
for (int x=0; x<30;++x)
{
    listnumbers=input.readLine();
    if (listnumbers == null) break;
    String temp[]=listnumbers.split(" ");
    for (int y=0; y<7;++y)
    {
        hockeyStats[x][y]=temp[y];
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T23:19:31.043

为了可维护性，我们可以做的简化事情是为您的 stat 持有者创建一个有用的类结构类。

```
static class HockeyPlayer extends Comparable<HockeyPlayer>
{
    static final int VALUES_LENGTH = 5;  //we like knowing how many stats we should be handling
    String lastName;
    String firstName;
    int[] values;

    /**
     * Creates a data structure holding player data of hockey stats
     * @throws FormatException 
     *     when the data passed in does not have enough values stored or if 
     *     the stats could not be parsed into integers
     */
    public HockeyPlayer(String data) throws FormatException
    {
        String[] parsedData = data.split();
        if (data.length != 2 + VALUES_LENGTH)
        {
            throw new FormatException();
        }
        lastName = parsedData[0];
        firstName = parsedData[1];
        values = new int[VALUES_LENGTH]
        // we use two counters, one for the parsed data index and 
        // another for the values index
        for (int i = 0, j = 2; i < values.length; i++, j++)
        {
            //make sure the numbers are parsed into int
            values[i] = Integer.parseInt(parsedData[j]);
        }
    }

    /**
     * Comparison handling method of Comparable objects.  
     * Very useful in sorting
     * @return 0 when equal, -1 when less than, 1 when greater than
     */
    public int compareTo(HockeyPlayer player2)
    {
       //I'll leave this for you to set up since you know how you want your values organized
       return 0;
    }
} 
```

出于多种原因，像这样格式化的类可能非常有用。首先，如果一行格式不正确，您可以比执行大量 if 语句更容易捕获错误，而不是破坏您的程序，因为它给您一个异常，明确表示该行格式错误。最重要的是，它实现了 Comparable 类，数据类型为 HockeyPlayer 作为它可以比较的对象。如果您将数据`ArrayList<HockeyPlayer>`放入`Collections.sort()`.

您必须添加自己的方法来按特定参数（例如名称或某些统计信息）进行搜索，但是现在组装数组要容易得多。

```
ArrayList<HockeyPlayer> list = new ArrayList<HockeyPlayer>();

while (input.hasNextLine())
{
    String data = input.nextLine();
    try
    {
       HockeyPlayer player = new HockeyPlayer(data);
       list.add(player);
    }
    catch (FormatException e)
    {
       System.err.println("Player data not formatted correctly");
    }
} 
```

我总是发现通过引入一些结构可以使您的程序变得更好，这真是令人惊讶。

# database - 数据库一对一关系实现

> ID：14285304
> 
> 赞同：1
> 
> 时间：2013-01-11T19:29:06.827
> 
> 标签：database

目前我还没有建立任何数据库，我仍处于学习使用 ER 图和表格列表规划数据库的阶段。

我了解什么是一对一关系，何时使用它们，何时避免它们等等。我不明白的是它们是如何实现的？它们是否具有相同的主键？还是我只是将外键放在多对多关系中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T19:34:57.677

人们通常会将其实现为其中一个表上的非空外键，该表指向另一个表的主键，并在此外键上添加唯一约束。

您还可以添加检查约束以确保表中的所有外键都显示为另一个表中的主键，反之亦然，尽管这样做会使从两个表中添加和删除项目相当困难。

其他两个选项是：

*   制作一个组合两个实体的表。但这违背了实体的概念和数据的分离。
*   有一个正常的多对多实现，并通过上述约束一对一地执行。

# php - PHP更改下载位置技巧

> ID：14285310
> 
> 赞同：0
> 
> 时间：2013-01-11T19:29:21.457
> 
> 标签：php

有`http://www.mysite.com`和`http://www.anothersiter.com`网站。有一些文件的链接`http://www.anothersite.com`：

```
http://www.anothersite.com/file1
http://www.anothersite.com/file2
...
http://www.anothersite.com/fileN 
```

我想把上面的链接放在`http://www.mysite.com`网站访问者可以下载的地方。但我希望它们被下载，就好像它们来自`http://www.mysite.com`而不是`http://www.anothersite.com`. 是否有可能在 PHP 中实现这样的场景，如果可能的话，如何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:40:51.903

您可以创建一个简单的下载脚本，使用`file_get_contents`. 不过，您的 php.ini 需要`allow_url_fopen`启用才能正常工作。但是代码可以很简单。例如，要下载一个名为 的 PDF 文件`downloaded.pdf`，您可以使用以下命令：

```
header('Content-type: application/pdf');
header('Content-Disposition: attachment; filename="downloaded.pdf"');
echo file_get_contents('http://www.coolermaster-usa.com/upload/download/85/files/product_sheet.pdf'); 
```

这将检索从您的域下载的产品表：

![本地下载](../Images/263457ff283fc75606c4cd54f1af464d.png)

--

**更新**

在下载 MP3 的情况下，您可以考虑使用`Content-Disposition: inline`mp3 并将 mp3 流式传输到浏览器。像这样：

```
header('Content-type: audio/mpeg');
header('Content-Disposition: inline; filename="somefile.mp3"');
echo file_get_contents('http://example.com/somefile.mp3'); 
```

这样文件将在线播放。然后人们可以随时按 CTRL+S 来下载它，或者只是收听它而不将它永久保存在某个地方（只是在他们会话期间的临时 Internet 文件中）。

# javascript - 在回调上重新运行 javascript

> ID：14285313
> 
> 赞同：0
> 
> 时间：2013-01-11T19:29:34.203
> 
> 标签：javascript

我有一个页面显示 Devexpress CallbackPanel 中的地图（PolyMap - polymaps.org）。当页面最初加载时，地图加载得很好，但是在 CallbackPanel 中执行回调时，地图不会加载。我认为我已经将其范围缩小到 javascript 没有在回调中重新初始化的事实，并且我知道我需要通过 CallbackPanel-EndCallback 事件来处理这个问题。

我不知道的是如何在我的 JS 函数中实际实现这一点。我真的是 javascript 新手，我知道如何从另一个函数调用特定函数，但我在一个单独的 javascript 文件中运行一系列复杂的函数，以使用页面底部的以下标记加载地图：

```
<script type="text/javascript" src="../js/PolyMaps/DiseaseMap.js" id="MapLoad"></script> 
```

我真的很想避免将所有内容完全重写到 EndCallback 函数中，而且我知道这必须是一个非常简单的答案，但是如何在另一个 javascript 函数中重新初始化整个脚本呢？IE

```
Function ReRun() {
    //Re-Initialize MapLoad Script
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:31:39.180

将所有初始化逻辑封装在一个函数中，定义在`DiseaseMap.js`：

```
function initMap() {
    // lots of work here
}

initMap(); 
```

然后再次调用该函数：

```
function ReRun() {
    initMap();
} 
```

# c++ - gsoap c文件读取

> ID：14285315
> 
> 赞同：2
> 
> 时间：2013-01-11T19:29:49.133
> 
> 标签：c++, file, gsoap

我是 C++ 新手。我在 c# 中编写了上传文件 wcf 并使用 gsoap2.8 生成 header.h 文件。

这是我在 c# 中的上传文件 wcf 服务。

```
public void UploadFile(RemoteFileInfo request)
    {
        FileStream targetStream = null;
        Stream sourceStream = request.FileByteStream;

        string uploadFolder = @"C:\temp\upload\copyHere";
        string filePath = Path.Combine(uploadFolder, request.FileName);

        using (targetStream = new FileStream(filePath, FileMode.Create, FileAccess.Write, FileShare.None))
        {
            //read from the input stream in 6K chunks
            //and save to output stream
            const int bufferLen = 65000;
            byte[] buffer = new byte[bufferLen];
            int count = 0;
            while ((count = sourceStream.Read(buffer, 0, bufferLen)) > 0)
            {
                targetStream.Write(buffer, 0, count);
            }
            targetStream.Close();
            sourceStream.Close();
        }

    } 
```

下面是 gsoap2.8 从 wsdl 生成的 header.h 代码：

```
class SOAP_CMAC xsd__base64Binary
{
public:
    unsigned char *__ptr;
    int __size;
    char *id;   /* optional element of type xsd:string */
    char *type; /* optional element of type xsd:string */
    char *options;  /* optional element of type xsd:string */
    struct soap *soap;  /* transient */
public:
    virtual int soap_type() const { return 8; } /* = unique id SOAP_TYPE_xsd__base64Binary */
    virtual void soap_default(struct soap*);
    virtual void soap_serialize(struct soap*) const;
    virtual int soap_put(struct soap*, const char*, const char*) const;
    virtual int soap_out(struct soap*, const char*, int, const char*) const;
    virtual void *soap_get(struct soap*, const char*, const char*);
    virtual void *soap_in(struct soap*, const char*, const char*);
             xsd__base64Binary() { xsd__base64Binary::soap_default(NULL); }
    virtual ~xsd__base64Binary() { }
};

class SOAP_CMAC _ns1__RemoteFileInfo
{
public:
    xsd__base64Binary FileByteStream;   /* SOAP 1.2 RPC return element (when namespace qualified) */    /* required element of type ns2:StreamBody */
    struct soap *soap;  /* transient */
public:
    virtual int soap_type() const { return 14; } /* = unique id SOAP_TYPE__ns1__RemoteFileInfo */
    virtual void soap_default(struct soap*);
    virtual void soap_serialize(struct soap*) const;
    virtual int soap_put(struct soap*, const char*, const char*) const;
    virtual int soap_out(struct soap*, const char*, int, const char*) const;
    virtual void *soap_get(struct soap*, const char*, const char*);
    virtual void *soap_in(struct soap*, const char*, const char*);
             _ns1__RemoteFileInfo() { _ns1__RemoteFileInfo::soap_default(NULL); }
    virtual ~_ns1__RemoteFileInfo() { }
}; 
```

这是我的 test.cpp 代码。我需要将文件读入**xsd__base64Binary**以便分配给 remoteFile.FileByteStream

```
BasicHttpBinding_USCOREITransferService svc;
__ns1__UploadFileResponse uploadRespond;
_ns1__RemoteFileInfo remoteFile;

std::string path = "C:\\temp\\upload\\test.txt"; 
```

我需要将上述文件读入????

```
remoteFile.FileByteStream = ? 
```

所以我可以调用 webservice uploadFile 如下：

```
int result = svc.__ns1__UploadFile(&remoteFile, uploadRespond); 
```

先感谢您，

JH

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:33:08.177

这是c中的一个示例：

```
 unsigned char * buffer; 
    int fileLen;    
    FILE *file;

    //OPEN FILE
    file = fopen(name, "rb");
    if (!file)
    {
        fprintf(stderr, "Unable to open file %s", name);
        return;
    }

    //GET FILE LENGTH
    fseek(file, 0, SEEK_END);
    fileLen=ftell(file);
    fseek(file, 0, SEEK_SET);

    //ALLOCATE MEMORY
    buffer=(unsigned char *)malloc(fileLen+1);
    if (!buffer)
    {
        fprintf(stderr, "Memory error! :( ");
        fclose(file);
        return;
    }

    //READ FILE CONTENTS INTO BUFFER AND CLOSE FILE
    fread(buffer, fileLen, 1, file);
    fclose(file);

    //USE THE BUFFER ....

    //FREE YOUR ALLOCATED BUFFER
    free(buffer); 
```

在你的**remoteFile**：

```
remoteFile.FileByteStream.__ptr = buffer;
remoteFile.FileByteStream.__size = fileLen; 
```

**更新：使用soap_malloc分配内存**

采用：

```
buffer=(unsigned char *)soap_malloc(soap,fileLen+1); 
```

代替：

```
buffer=(unsigned char *)malloc(fileLen+1); 
```

消除：

```
free(buffer); 
```

分配将在当前操作的上下文中完成，**释放**将在操作完成时由 gsoal 库完成。

# java - JTable 没有从 MySQL 填充数据

> ID：14285316
> 
> 赞同：1
> 
> 时间：2013-01-11T19:29:51.393
> 
> 标签：java, mysql, netbeans, jtable, swig

我正在尝试将存储在我的数据库中的数据填充到 JTable 中。我有一条`println`语句“将记录添加到数据库”，它打印了 18 次，因此数据库中的行数与打印的语句数相匹配。但是，我的 JTable 中没有显示任何内容，而且我不知道错误在哪里。

代码：

```
try {
        conn = SQLConnect.ConnectDb();
        String sql = "SELECT * FROM CriminalRecords WHERE FName = ? and Sname = ?";

        pst = conn.prepareStatement(sql);
        pst.setString(1, NameSearch.getText());
        pst.setString(2, SurnameSearch.getText());
        rs = pst.executeQuery();

            //display data from db into table hmm  
            ResultSetMetaData md = rs.getMetaData();
            int columnNumber = md.getColumnCount();
            Vector columns = new Vector(columnNumber);

            //  Get column names
            //store column names
            for(int i=1; i<=columnNumber; i++) 
            {
                columns.add(md.getColumnName(i));
            } 

            Vector data = new Vector();
            Vector row;

        //store row data
        while(rs.next())
        {
            row = new Vector(columnNumber);
            for(int i=1; i<=columnNumber; i++)
            {
                row.add(rs.getObject(i));
                System.out.println("Records added to Table");
            }
            data.add(row);

        }
        JTable table1 = new JTable(data, columns);
        this.add(table1);
        rs.close();
        pst.close();
        conn.close(); 
```

JTable 代码

```
/---- table1 ----
            table1.setModel(new DefaultTableModel(
                new Object[][] {
                    {" ", null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                    {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                    {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                    {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                    {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                    {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                    {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null},
                },
                new String[] {
                    "First Name", "Middle Name", "Surname", "Date of Birth", "Address", "Home Phone", "Business Phone", "Mobile Phone", "Resident Status", "Sex", "Race", "Incident Location", "Zone", "Premise Type", "Date Recorded", "Time Recorded", "Weapons", "Crime Offences"
                }
            ));
            table1.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
            scrollPane1.setViewportView(table1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:51:51.727

所以解决方案虽然不是最好的，但它确实有效，这对我现在有用。

```
import net.proteanit.sql.DbUtils;
//
//
//
try {
        conn = SQLConnect.ConnectDb();
        String sql = "SELECT * FROM CriminalRecords WHERE FName = ? and Sname = ?";

        pst = conn.prepareStatement(sql);
        pst.setString(1, NameSearch.getText());
        pst.setString(2, SurnameSearch.getText());
        rs = pst.executeQuery();

        table1.setModel(DbUtils.resultSetToTableModel(rs));

} catch (SQLException ex) {
        Logger.getLogger(DatabaseP.class.getName()).log(Level.SEVERE, null, ex);
    } 
```

# database - 用于选择区域内地理空间数据的数据库技术？

> ID：14285328
> 
> 赞同：0
> 
> 时间：2013-01-11T19:30:44.137
> 
> 标签：database, geospatial, region

我需要能够存储地理键控数据，然后从特定地理区域选择数据，比如多边形（在地球上），以表示用户的视野。是否有（免费）数据库技术可以让我轻松地进行这种选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T21:16:52.650

对于客户端-服务器数据库解决方案，有 PostGIS，对于轻量级本地解决方案，有 SpatiaLITE。免费和开源。

# c# - 如何在 Linq to SQL 中使用字符串字段进行动态比较？

> ID：14285332
> 
> 赞同：0
> 
> 时间：2013-01-11T19:30:59.867
> 
> 标签：c#, .net, winforms, entity-framework-4, linq-to-entities

如何在 Linq to SQL 中使用字符串字段进行动态比较以获得如下查询：

```
"SELECT COLUMN_1, COLUMN_2" +
"FROM "+ stringTABLE +
"WHERE " + stringCOLUMN_1_or2  + " = ' " + 8 + "'"; 
```

我知道我可以这样做：

```
from x in objects
where x.COLUMN_1 == "8"
select x 
```

但 FIELD 是可变的，可以是 COLUMN_1 或 COLUMN_2" 或其他...

作为我想在 Windows 窗体（框架 4.0）中执行的操作的示例

```
from x in objets
where x.field[stringCOLUMN_1_or2] == "8"
select x 
```

我怎么能这样做？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T19:33:31.183

通常，LINQ to SQL 将创建一个与您的列名称相同的属性，因此您的 LINQ 可能如下所示：

```
from x in objets
where x.stringCOLUMN_1 == 8.ToString()
select x; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T19:36:39.993

Not sure what objects is, or your field collection, but first you should have quotes around the literal if it is a string comparison:

```
from x in objets
where x.field[stringCOLUMN_1] == "8"
select x 
```

Usually your column names are represented as properties.

```
from x in objets
where x.stringCOLUMN_1 == "8"
select x 
```

Lastly, usually you have a DBContext and you need to drill into it to select a specific table:

```
from x in db.TableNameHere
where x.stringCOLUMN_1 == "8"
select x 
```

Without seeing more context to your code it's hard to provide more suggestions.

If you're looking to do something more dynamic, note you can append additional where criteria using extension methods:

```
var query = from x in db.TableNameHere select x;
if(ShouldFilterColumn1)
  query = query.Where(x => x.Column1 == "8");

var results = query.ToList(); 
```

Without seeing more context to your code it's hard to provide more suggestions.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T20:19:33.943

我能想到三种可能。

第一个是动态 LINQ。我调查过一次，但没有走得太远。

第二种选择（类似于 AaronLS 的建议）是一次构建查询。这是我最常使用的选项。
**注意**：您必须在 select 或 order 子句之前添加 where 子句，否则您将在运行时遇到异常。

```
var query = from x in objects;
switch (columnIndicator)
{
    case ColumnIndicatorTypes.Column1:
        query = query.Where(x => x.Column1 == "8");
        break;
    case ColumnIndicatorTypes.Column2:
        query = query.Where(x => x.Column2 == "8");
        break;
    case ColumnIndicatorTypes.Column3:
        query = query.Where(x => x.Column3 == "8");
        break;
    case ColumnIndicatorTypes.Column4:
        query = query.Where(x => x.Column4 == "8");
        break;
} 
```

第三个选项是对所有选项进行编码。例如：

```
switch (columnIndicator)
{
    case ColumnIndicatorTypes.Column1:
        query = from x in objects
            where x.COLUMN_1 == "8"
            select x;
        break;
    case ColumnIndicatorTypes.Column2:
        query = from x in objects
            where x.COLUMN_2 == "8"
            select x;
        break;
    case ColumnIndicatorTypes.Column3:
        query = from x in objects
            where x.COLUMN_3 == "8"
            select x;
        break;
    case ColumnIndicatorTypes.Column4:
        query = from x in objects
            where x.COLUMN_4 == "8"
            select x;
        break;
    default:
        query = from x in objects
            select x;
        break;
} 
```

如果您想查看生成的查询，我建议您`db.Log`在运行查询之前连接（类似于`db.Log = New System.IO.StringWriter(New StringBuilder())`），在您的服务器上运行探查器（例如 SQL Server Profiler），或者将对象转换为字符串（我认为这会返回字符串版本的查询，但已经有一段时间了）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T20:13:38.357

您可以使用`ExpressionTree`

[如何：使用表达式树构建动态查询（C# 和 Visual Basic）](http://msdn.microsoft.com/en-us/library/vstudio/bb882637.aspx)

[使用 Expression 使用嵌套类创建谓词](https://stackoverflow.com/questions/14258881/create-predicate-with-nested-classes-with-expression)，其中[Marc Gravell 的答案](https://stackoverflow.com/a/14267890/1600051)看起来简单且可行。

**更新：** 对于 LinqToSql，上面的链接没有帮助。

查看 Trisped 答案（第二个选项），它可能会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T20:16:19.867

我想你可以使用反射：

```
from x in db.TableName
    where (x.GetType().GetProperty(stringCOLUMN_1_or2).GetValue(x, null)) == " 8"
    select x; 
```

不确定是否有任何简单的 Linqish 方法可以做到这一点......

编辑：假设动态 Linq 可以工作，它只是：

```
from x in objets
.Where(stringCOLUMN_1_or2  + " = ' " + 8 + "'")
select x 
```

这里有一些关于使用 SQL 的动态 Linq 的更多信息：[http ://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-库.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

# c++ - C++ 对多个类使用相同的 ADT 结构

> ID：14285337
> 
> 赞同：1
> 
> 时间：2013-01-11T19:31:08.307
> 
> 标签：c++, list, adt

好的，例如，我必须使用 List ADT 创建一个包含多个类的简单医院队列系统。所以我的问题是typedef。我该怎么做，因为类型 def 只能有一种数据类型。

```
 #include <string>
  #include "Patients.h"
  #include "Records.h"
  #include "Services.h"

const int MAX_SIZE = 10000;
typedef Patients ItemType;
typedef Records ItemType;         //Error Here
typedef Services ItemType;        //Error Here

class List
{
  private:
    ItemType items[MAX_SIZE];
    int      size;

  public:

List::List();

void List::display();

void List::replace(int index, ItemType item);

bool List::add(ItemType newItem);

bool List::add(int index, ItemType newItem);

void List::remove(int index);

ItemType List::get(int index); 

bool List::isEmpty(); 

int List::getLength();

};

#include <iostream>
#include "List.h"  // header file
using namespace std;
// constructor
List::List()
{
    size = 0;
}  

// add a new item to the back of the list (append)
bool List::add(ItemType newItem)
{
   bool success = size < MAX_SIZE;
   if (success)
   {  
      items[size] = newItem; // add to the end of the list
      size++;                // increase the size of the list by one
   }  
   return success;
}  

// add a new item at a specified position in the list (insert)
bool List::add(int index, ItemType newItem)
{
   bool success = (index >= 1) && (index <= size + 1) && (size < MAX_SIZE);
   if (success)
   {  
      for (int pos = size; pos >= index; pos--)
         items[pos] = items[pos-1];

      items[index-1] = newItem;
      size++;  // increase the size of the list by one
   }  
   return success;
}  

 // remove an item at a specified position in the list
void List::remove(int index)
{
   bool success = (index >= 1) && (index <= size);
   if (success)
   { 
      for (int fromPosition = index + 1; fromPosition <= size; fromPosition++)
         items[fromPosition - 2] = items[fromPosition - 1];

      size--; 
   }  

}  

// get an item at a specified position of the list (retrieve)
ItemType List::get(int index)
{
   ItemType dataItem;// = 0;
   bool success = (index >= 1) && (index <= size);
   if (success)
      dataItem = items[index - 1];

   return dataItem;
}  

// check if the list is empty
bool List::isEmpty()
{
   return size == 0;
}  

// check the size of the list
int List::getLength()
{
   return size;
}  

void List::replace(int index, ItemType item)
{
bool success = index >= 1 && index <= getLength();
if (success)
    items[index] = item;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:35:53.503

您应该使用模板：

```
#include <list>

typedef std::list<Patient> Patients;
typedef std::list<Record> Records;
typedef std::list<Service> Services; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:33:19.853

我建议您`List`从类更改为类模板。查看`std::list<>`标准库中的工作原理以获取更多想法。

所以，你可能有：

```
template<class ItemType>
class List
{
  private:
    ItemType items[MAX_SIZE];
    int      size;
  public:
    ItemType List::get(int index); 
    ...
}; 
```

然后，您可以在声明列表时指定列表数据的类型：

```
List<Patients> allThePeople;
List<Records>  allThePapers;
List<Services> allTheWork; 
```

* * *

当然，如果`List`出于类分配以外的任何原因创建代码，您应该真正使用它`std::list`。

# c#-4.0 - DocX 文件保存时初始化失败

> ID：14285340
> 
> 赞同：0
> 
> 时间：2013-01-11T19:31:15.730
> 
> 标签：c#-4.0, ms-word, iis-6, openxml, docx

我遇到以下错误：

```
Message: Initialization failed.
Source: mscorlib
Stack Trace: 
   at System.IO.IsolatedStorage.IsolatedStorageFile.Init(IsolatedStorageScope scope)
   at System.IO.IsolatedStorage.IsolatedStorageFile.GetStore(IsolatedStorageScope scope, Type domainEvidenceType, Type assemblyEvidenceType)
   at MS.Internal.IO.Packaging.PackagingUtilities.ReliableIsolatedStorageFileFolder.GetCurrentStore()
   at MS.Internal.IO.Packaging.PackagingUtilities.ReliableIsolatedStorageFileFolder..ctor()
   at MS.Internal.IO.Packaging.PackagingUtilities.GetDefaultIsolatedStorageFile()
   at MS.Internal.IO.Packaging.PackagingUtilities.CreateUserScopedIsolatedStorageFileStreamWithRandomName(Int32 retryCount, String& fileName)
   at MS.Internal.IO.Packaging.SparseMemoryStream.SwitchModeIfNecessary()
   at MS.Internal.IO.Packaging.SparseMemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at MS.Internal.IO.Packaging.CompressEmulationStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at MS.Internal.IO.Packaging.CompressStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at MS.Internal.IO.Zip.ProgressiveCrcCalculatingStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at MS.Internal.IO.Zip.ZipIOModeEnforcingStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.StreamWriter.Flush(Boolean flushStream, Boolean flushEncoder)
   at System.IO.StreamWriter.Write(Char[] buffer, Int32 index, Int32 count)
   at System.Xml.XmlEncodedRawTextWriter.FlushBuffer()
   at System.Xml.XmlEncodedRawTextWriter.RawText(Char* pSrcBegin, Char* pSrcEnd)
   at System.Xml.XmlEncodedRawTextWriter.RawText(String s)
   at System.Xml.XmlEncodedRawTextWriter.WriteStartAttribute(String prefix, String localName, String ns)
   at System.Xml.XmlEncodedRawTextWriterIndent.WriteStartAttribute(String prefix, String localName, String ns)
   at System.Xml.XmlWellFormedWriter.WriteStartAttribute(String prefix, String localName, String namespaceName)
   at System.Xml.Linq.ElementWriter.WriteStartElement(XElement e)
   at System.Xml.Linq.ElementWriter.WriteElement(XElement e)
   at System.Xml.Linq.XElement.WriteTo(XmlWriter writer)
   at System.Xml.Linq.XContainer.WriteContentTo(XmlWriter writer)
   at System.Xml.Linq.XDocument.WriteTo(XmlWriter writer)
   at System.Xml.Linq.XDocument.Save(TextWriter textWriter, SaveOptions options)
   at System.Xml.Linq.XDocument.Save(TextWriter textWriter)
   at Novacode.DocX.InsertDocument(DocX document)
   at SpringWireless.Common.Server.Ws.IntegrationStudio.ProjectDocumentation.Factory.GenerateNewFile() 
```

我只是想在一个循环中多次 (+- 300 docs) 将一个文档插入另一个文档。

有人知道为什么会这样吗？

此错误仅发生在服务器上，在我的机器上，一切运行正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:25:14.060

Docx Api 使用IsolatedStorage 来编写一些大文件。因此，IIS 需要具有对 IsolatedStorage 文件夹的读写权限。

因此，只需为 Pool User 或“Everyone”添加权限，即可在文件夹中读取和写入：“C:\Documents and Settings\Default User\Local Settings\Application Data\IsolatedStorage”

# iphone - 正则表达式匹配数学方程

> ID：14285344
> 
> 赞同：0
> 
> 时间：2013-01-11T19:31:19.300
> 
> 标签：iphone, objective-c, regex, math, nsregularexpression

我正在尝试构建一个导数计算器，因此我将方程分解为组件并匹配每个部分以确定要应用的规则，但我对正则表达式完全陌生。

现在，我正在尝试匹配 x^n 和 Ax^nx ，其中 A 和 n 是常数。这是我的等式：`x{0,}^[0-9]{0,}`但是当我运行下面的代码并输入类似`asdf`、`5`和的内容`x^3`时，它们都会在只`x^3`应返回时作为匹配项返回。等式或我在下面应用它的方式有问题吗？

```
NSRegularExpression* regex = [[NSRegularExpression alloc] initWithPattern: @"x{0,}^[0-9]{0,}" options: NSRegularExpressionCaseInsensitive error: nil];

if ([regex numberOfMatchesInString: equation options: NSMatchingHitEnd range: [equation rangeOfString: equation]] > 0)
{
    NSLog(@"Match x^n");
}
else
{
    NSLog(@"Not x^n");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:48:17.843

`^`描绘了字符串的开头，所以它应该像`\^`

你`regex`应该是

`@"\d*x\\^\d*"`

`\d`代表一个数字..

`*`表示匹配 0 到多个`\d`

# c++ - Mingw+MSYS 中的 libevent 静态编译错误

> ID：14285348
> 
> 赞同：0
> 
> 时间：2013-01-11T19:31:47.010
> 
> 标签：c++, c, gcc, mingw, libevent

我已经编写了一个扩展的 python`winxp`脚本`mingw+msys`。它将调用`libevent`lib。我希望用户不要安装更多的库，所以我想静态编译它，但是有错误。以下是我的编译和安装过程`libevent`：

```
​./configure -prefix=D:/libevent -enable-static
make
make install 
```

我写了两个makefile，我得到了同样的错误。

```
libevent.a(buffer.o):In function 'evbuffer_read':undefined reference to 'WSARecv@28' 
libevent.a(buffer.o):In function 'evbuffer_write_iovec':undefined reference to 'WSASend@28' 
........................ 
```

以下是生成文件：

## 生成文件 1

```
HEAD_PATH_FLAGS=-IC:/Python27/include -ID:/boost/include/boost-1_52 -ID:/libevent/include
LIB_PATH_FLAGS=-LD:/boost/lib -LD:/libevent/lib -LC:/Python27/libs
LIB_FLAGS=-lboost_python-mgw46-s-1_52 -Wl,Bstatic -levent -Wl,Bdynamic -lpython27 -lwsock32
SOURCE=test.o 
all:${SOURCE}
g++ ${HEAD_PATH_FLAGS} ${SOURCE} ${LIB_PATH_FLAG} ${LIB_FLAGS} -fPIC -shared -o test.dll 
```

## 生成文件 2

```
HEAD_PATH_FLAGS=-IC:/Python27/include -ID:/boost/include/boost-1_52 -ID:/libevent/include
LIB_PATH_FLAGS=-LD:/boost/lib -LD:/libevent/lib -LC:/Python27/libs
LIB_FLAGS=-lboost_python-mgw46-s-1_52 -lpython27 -lwsock32
SOURCE=test.o D:/libevent/lib/libevent.a
all:${SOURCE}
g++ ${HEAD_PATH_FLAGS} ${SOURCE} ${LIB_PATH_FLAG} ${LIB_FLAGS} -fPIC -shared -o test.dll 
```

为什么会这样？我怎样才能让它编译没有错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T19:40:54.133

您应该链接到`libws2_32.a`, as`WSASend`并`WSARecv`在那里定义。添加`-lws2_32`到您的链接器命令。

# python - 我正在尝试制作文件删除程序

> ID：14285350
> 
> 赞同：1
> 
> 时间：2013-01-11T19:31:59.290
> 
> 标签：python, windows, python-3.x

我在运行时遇到 winErrors，例如“系统找不到指定的文件”，但我知道这些文件存在......想法是尝试使用递归将自身嵌入到每个文件中，然后删除它们，这大大降低了删除文件所花费的时间。我的朋友用 Java 做的，它设法在 11 秒内删除了 3GB。我想在 Python 中使用相同的想法，这就是结果。

```
import os, sys, glob, fileinput, string
from os import * 

def fileInput():
    #asks for input of a file path
    Folder = input("Please input a file path: ")
    filePathLength = len(Folder)
    #checks to make sure input was provided
    if filePathLength == 0:
        print("Please provide a folder...")
        fileInput()
    else:
    #checks to make sure that it is a proper path, ie- that is has ":\\"
    if Folder.find(":\\") == -1:
        print("Make sure the path is valid")
        fileInput()
    else:
        #if the path is a directory it calls the delete folder function
        print("Inputted path: " + Folder)
        if os.path.isdir(Folder):
            deleteFolder(Folder)
        else:
            print("Path does not exist...")
            fileInput()

def deleteFolder(pathDir):
    print(str(pathDir))
    try:
        for folder in os.listdir(pathDir):
            if folder.find(".") == -1:
                deleteFolder(pathDir + "\\" + folder)
    except NotADirectoryError as notADirectory:
        print(str(notADirectory))
    try:
        for folder in os.listdir(pathDir):
           if folder.find(".") != -1:
                os.remove(folder)
                print("deleted file " + str(folder))
    except IOError as errorCheck:
        print(str(errorCheck))

fileInput() 
```

任何想法将不胜感激。我在 Windows 7 64 位上使用 Python 3.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:44:07.343

`os.listdir()`返回相对路径。使用完整路径`os.remove(os.path.join(pathDir, folder))`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T19:52:55.833

听起来你只需要：

```
import shutil

path = input("Enter path to delete")

shutil.rmtree(path); 
```

# gcc - GCC ASM 优化问题或隐形幽灵？

> ID：14285353
> 
> 赞同：4
> 
> 时间：2013-01-11T19:32:07.043
> 
> 标签：gcc, assembly, x86, sse, inline-assembly

一段时间以来，我一直在为这个问题挠头。我正在使用 GCC 4.4.4（我已经检查了 GCC 3.4.6、4.4.6 和 4.6.3。）并且在我正在做的一些数学运算中遇到了问题。我将示例编译为以下独立程序：

```
#include <stdio.h>
int main()
{
    float something[4] = { 1.0f, 2.0f, 3.0f, 4.0f };
    asm volatile
    (
        "movups %0, %%xmm0 \n\t"
        "movups %%xmm0, %0 \n\t"
        : "=m" (*something)
        :
        : "memory", "xmm0"
    );
    printf("%.0f %.0f %.0f %.0f\n",
        something[0], something[1], something[2], something[3]);
    return 0;
} 
```

简单编译

```
gcc -msse -O -o something something.c 
```

它通过以某种方式破坏第一个数组元素而失败（除了我尝试过的 GCC 3.4.6 ......在那里，它工作正常）。在我的一生中，我看不出这里有什么根本上的错误。

相反，如果我将有问题的 ASM 块更改为

```
_mm_storeu_ps(something, _mm_loadu_ps(something)); 
```

它工作正常。我检查了生成的汇编代码，发现带有 ASM 块的版本少了一个导致 SSE 部分的存储操作：

```
main:
    pushl   %ebp
    movl    %esp, %ebp
    andl    $-16, %esp
    subl    $64, %esp
    movl    $0x40000000, 52(%esp)
    movl    $0x40400000, 56(%esp)
    movl    $0x40800000, 60(%esp) 
```

与更正确的（使用内在函数的代码）相比：

```
main:
    pushl   %ebp
    movl    %esp, %ebp
    andl    $-16, %esp
    subl    $64, %esp
    movl    $0x3f800000, 48(%esp)
    movl    $0x40000000, 52(%esp)
    movl    $0x40400000, 56(%esp)
    movl    $0x40800000, 60(%esp) 
```

WTF 对我或 GCC 有什么问题吗？

（注意，这是一个简明扼要的示例，显示了我所追踪的根本问题。ASM 块和 volatile 关键字的原因似乎并没有真正解决我提出的主要问题在这里转发。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T00:23:56.207

您使用了错误的约束（顺便说一下，这是[今天在这里提出的第二个此类问题](https://stackoverflow.com/questions/14281114/inline-assembly-bitwise-operation-on-float-whats-going-awry-here/14282900)）。意思是`=`输出，所以 gcc 认为你要分配`*something`哪个是第一个数组元素。所以它认为它可以省略初始化，因为无论如何你都会覆盖它。您应该使用`+`符号将操作数标记为输入输出，如下所示：`"+m" (*something)`.

`"=m" (something)`通常意味着您将分配给指针，因为这样 gcc 可以决定省略所有初始化。请注意，对于数组，这甚至不应该编译，就像等效的 C 代码一样。它编译甚至可以工作只是一个幸运的事故（又名编译器错误）。

# performance - 查找给定半径内的所有整数坐标

> ID：14285358
> 
> 赞同：9
> 
> 时间：2013-01-11T19:32:27.573
> 
> 标签：performance, algorithm, geometry, coordinates

给定一个二维坐标系，如何从给定点找到半径内具有整数坐标的所有点？我想要这些点作为 x 坐标和 y 坐标值。

在给定点周围的正方形中查找点很容易，可以这样完成：

```
for(int x = -radius + point.x; x < radius + point.x; ++x)
for(int y = -radius + point.y; y < radius + point.y; ++y)
{
    points.insert(point(x, y));
} 
```

但是我怎样才能找到围绕给定点的圆圈中的点？该算法与性能有关，但与准确性无关。因此，如果一个点接近于半径而不是添加 1 并不重要。换句话说，我不需要浮点精度。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-11T19:42:19.530

最简单的解决方案：取一个正方形并过滤它：

```
Point point(100, 100);
for(int x = -radius; x <= radius; ++x)
for(int y = -radius; y <= radius; ++y)
if(x*x + y*y <= radius* radius)   {
    points.insert(Point(x + point.x, y + point.y));
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T19:35:02.730

一种方法是在 x 上从 -R 到 +R 的外循环和在 y 上的内循环，根据该 x 值处的圆的 y 值（从 -sqrt(r^2 - x^2) 到 sqrt(r^ 2 - x^2) 如果中心在 0,0)，如果中心在 X,Y - 只需以与示例中相同的方式将 X 或 Y 添加到所有循环范围

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T21:14:22.660

您可以对中点圆算法进行小修改以获得实心圆。

首先生成坐标：

```
data = new int[radius];
int f = 1 - radius, ddF_x = 1;
int ddF_y = -2 * radius;
int x = 0, y = radius;
while (x < y)
{
    if (f >= 0)
    {
        y--;
        ddF_y += 2; f += ddF_y;
    }
    x++;
    ddF_x += 2; f += ddF_x;
    data[radius - y] = x; data[radius - x] = y;
} 
```

然后访问所有内部点：

```
int x0 = center.X;
int y0 = center.Y - Radius;
int y1 = center.Y + Radius - 1;

for (int y = 0; y < data.Length; y++)
{
    for (int x = -data[y]; x < data[y]; x++)
    {
        doSomething(x + x0, y + y0);
        doSomething(x + x0, y1 - y);
    }
} 
```

这节省了一些不会在圈内的工作访问点，但以牺牲一点预处理为代价。对于较小的圈子，它肯定无济于事，而对于较大的圈子，老实说，我不知道。您必须对其进行基准测试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T22:48:06.730

下面的代码只是沿着四分之一圆解析边界以确定内部区域。它不需要计算外点的距离，也不需要计算内点的距离。（*编辑*：但最后，实心圆的所有点都被添加）

在一些小型 Java 基准测试中，对于小半径（<10），它与解析整个正方形的简单方法具有相同的速度。对于半径 20-40，它大约快 2 倍，对于半径 > 50，它实现了大约 4 倍的加速。对于一些更大的半径（> 200），加速再次降低，因为对于任何方法，都需要支配时间用于创建和添加 >100k 点 - 无论它们是如何确定的。

```
// add the full length vertical center line once
for (int y = -radius + point.y; y <= radius + point.y; ++y)
    points.insert(Point(point.x, y));

int sqRadius = radius * radius;

// add the shorter vertical lines to the left and to the right
int h = radius;
for (int dx = 1; dx <= radius; ++dx) {
    // decrease h
    while (dx*dx + h*h > sqRadius && h > 0)
        h--;

    for (int y = -h + point.y; y <= h + point.y; ++y) {
        points.insert(Point(point.x + dx, y));
        points.insert(Point(point.x - dx, y));
    }
} 
```

# zend-framework - Zend - 其他域重定向，如 mod_rewrite

> ID：14285360
> 
> 赞同：0
> 
> 时间：2013-01-11T19:32:37.253
> 
> 标签：zend-framework, redirect, url-rewriting, zend-route

我使用 mod_rewrite 的 RewriteRules 在 apache 上有几个基本的重定向。我想使用 Zend Framework 以编程方式进行这些重定向。这些重定向可能包括不同的域。例如

```
RewriteRule ^/xmas(.*) http://mycdn.com/things/xmas$1 [P] 
```

当使用 Apache 重定向时，url 保持不变，例如在浏览器的地址栏上。我想在 ZF 中模仿这种行为，但找不到其他领域的方法。

我可以通过扩展`Zend_Controller_Router_Route`、扩展`match()`方法，然后返回一个包含模块、控制器、操作等字段的数组来进行现场重定向。

```
class My_Route extends Zend_Controller_Router_Route
{
// ...

  public function match($path)
  {
    // ...
    return
      array(
        'module' => 'default',
        'controller' => 'mycontroller',
        'action' => 'index',
    );
  }
} 
```

但是我还没有设法使它适用于重定向到其他域，因为它显然只适用于站点内路由（也没有找到在规范中指定域或完整 url 的方法）。

我尝试了另一种方法，例如：

```
$r = Zend_Controller_Action_HelperBroker::getStaticHelper('redirector');
$r->gotoUrl("http://otherdomain.com/some-stuff-to-redirect-to")->redirect(); 
```

这会进行重定向，但它完全改变了发出全新请求的页面。

我如何在 ZF 中实现这一点？使用 ZF1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T22:13:42.687

mod_rewrite 规则上的`[P]`标志对我来说是一个新标志，但从文档看来，它告诉 Apache 将请求代理到给定的 URL（使用 mod_proxy）。因此，它实际上在内部向该 URL 发出另一个请求并将其返回给用户，这不是重定向。ZF 中的等价物是将请求路由到用于`Zend_Http_Client`向远程服务器发出另一个请求的操作。

它想不出在任何情况下这都是一个好主意。您给出的示例是将请求重写到远程 CDN。通过这样做，您首先完全否定了拥有 CDN 的所有优势（更好的性能，更低的带宽成本）。也许如果您可以解释您的用例，可能会有更好的方法来实现您正在尝试做的事情。

# php - 通过 Jquery AJAX 发送两条数据？

> ID：14285364
> 
> 赞同：0
> 
> 时间：2013-01-11T19:32:49.220
> 
> 标签：php, javascript, jquery, html, ajax

我正在通过 Jquery Ajax 帖子发送数据，我想从我的表单中发送文本框，还有一个名为 username 的变量。例如...

```
$.ajax({type:'POST', url: 'submit.php', data:$('#myform').serialize(), username}); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:44:15.813

只需将额外参数添加到序列化字符串

```
$.ajax({
    type:'POST', 
    url: 'submit.php', 
    data:$('#myform').serialize()+'&username='+encodeURIComponent(username)
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T19:35:58.277

As a good practice, it is better to construct a data object and also include the extra variables. Try constructing a data object and include them ?

```
data = {
    'formData': $('#myform').serialize(),
    'variable': 'username'
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T19:35:22.757

You can pass it your other variable via get like this.

`$.ajax({type:'POST', url: 'submit.php?myvar='+encodeURIComponent(myvar), data:$('#myform').serialize(), username});`

You could also add the value to a hidden field in your form.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T19:56:38.790

尝试这个

```
 $.ajax({ 
         type:'POST', 
         url: 'submit.php', 
         data: { form: $('#myform').serialize(), username: encodeURIComponent(username)}
    }); 
```

检查[ajax 文档将](http://api.jquery.com/jQuery.ajax/)**数据发送到服务器**的部分

 *** * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T19:34:44.943

试试下面的查询。用户名应该是一个 js 变量。

```
var username = "myname";

$.ajax({
 type:'POST', 
 url: 'submit.php', 
 data:$('#myform').serialize(), 
 username:username
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-11T19:34:58.327

尝试，

```
$.ajax({ 
  type:'POST', 
  url: 'submit.php', 
  data:$('#myform').serialize(), 
  username: username //you missed the key
}); 
```**

# grails - 带有 JSF 2 插件的 Grails 2？

> ID：14285366
> 
> 赞同：3
> 
> 时间：2013-01-11T19:32:52.537
> 
> 标签：grails, jsf-2, primefaces, grails-plugin, grails-2.0

有人使用 Grails 2.0 或更高版本的[JSF 插件](http://grails.org/plugin/jsf2)吗？我有点犹豫是否开始将 Grails 与 JSF 一起使用，因为插件页面显示它最后一次更新是在 2010 年 4 月（它的版本是 0.1）并且它与 Grails 1.2 一起使用。

我之所以问，是因为我阅读了一篇使用[PrimeFaces](http://primefaces.org)和 Grails 1.3.7 的博客文章，出于某种原因，我一直坐在这里想知道我将使用哪一个，而实际上我很想同时使用它们。（我的老板现在正在使用 Grails 2.0。）

简而言之，是否可以使用此插件或替代方法将 Grails 2 与 JSF 一起使用，是否有人已经这样做了？

当我尝试通过插件管理器安装插件时，我得到了这个（在 Groovy/Grails ToolSuite 中）

```
Problems occurred (un)installing plugins. See details for more information
------System.out:-----------
 | Loading Grails 2.1.1
| Configuring classpath
| Downloading: jstl-1.2.pom.sha1
| Downloading: servlet-api-2.5.pom.sha1
| Downloading: jstl-1.2.jar.sha1
| Downloading: servlet-api-2.5.jar.sha1
| Error Failed to resolve dependencies (Set log level to 'warn' in BuildConfig.groovy for     more information):

- javax.faces:jsf-api:2.0.2-FCS
- javax.faces:jsf-impl:2.0.2-FCS

------System.err:----------- 
```

# javascript - .less完成解析后如何启动Jquery事件

> ID：14285367
> 
> 赞同：1
> 
> 时间：2013-01-11T19:32:55.413
> 
> 标签：javascript, jquery, less

我正在为我的 CSS 使用 .less。我遇到的问题是因为 Jquery 在 .less 完成解析 .less 文件之前运行，高度和宽度不是正确的。

现在我将 500 milisenconds 的 setTimeout 设置为“等待”，.less 上是否有任何回调函数来启动 jquery 的东西？

谢谢

```
jQuery(function($){
   var m = $('.my-class').height();
   var wh = $(window).height();

   if(wh > m){
      $('.my-class').addClass('.new-class').height(wh - 300);
   }
}); 
```

我必须这样做，才能让它工作：

```
jQuery(function($){
   var m = $('.my-class').height();
   var wh = $(window).height();

   setTimeout(function(){
      if(wh > m){
         $('.my-class').addClass('.new-class').height(wh - 300);
      }
   }, 500);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T20:02:42.740

您可以在最有可能执行的任何 .less 上使用 jQuery .ready() 事件。因此，如果您有一个 .less 是样式的段落，您可以执行类似 .less 的操作`$("p").ready(function() { //do something });`。如果这不起作用，您也可以随时尝试 .resize() 事件，因为当 less 完成样式设置时应该调整元素的大小。例如，您可以执行类似的操作`$("p").resize(function() { //do something now that the size has changed });`

文档：

*   [http://api.jquery.com/ready/](http://api.jquery.com/ready/)
*   [http://api.jquery.com/resize/](http://api.jquery.com/resize/)

# tridion - 如何使用 Tridion 2011 中的自定义 DAO 在我的存储扩展中仅存储 PDF 类型的二进制文件

> ID：14285368
> 
> 赞同：0
> 
> 时间：2013-01-11T19:32:57.010
> 
> 标签：tridion, tridion-2011, tridion-content-delivery, tridion-storage-extension

我已经编写了自定义 DAO，以便在 Tridion 2011 的持久性类型的存储扩展中为我的二进制文件**添加/更新/删除特定记录。**

下面是我试图在我的自定义二进制 DAO ( ) 中使用我的自定义 DAO 类/接口 (`PublishActionDAO`和) 的示例代码。`PublishAction``JPABinaryDAOExtension`

```
public class JPABinaryDAOExtension extends JPABinaryContentDAO implements BinaryContentDAO 
{

    public JPABinaryDAOExtension(String storageId, EntityManagerFactory entityManagerFactory, String storageName) 
    {
        super(storageId, entityManagerFactory, storageName);
    }

    public JPABinaryDAOExtension(String storageId, EntityManagerFactory entityManagerFactory, EntityManager entityManager, String storageName) 
    {
        super(storageId, entityManagerFactory, entityManager, storageName);
    }

    public void create(final BinaryContent binaryContent, final String relativePath) throws StorageException 
    {
        super.create(binaryContent, relativePath);  
        String url = relativePath;
        String tcmURI = Integer.toString(binaryContent.getBinaryId());
        PublishActionDAO publishActionDAO = (PublishActionDAO) StorageManagerFactory.getDefaultDAO("PublishAction");
        PublishAction publishAction = new PublishAction();
        publishAction.setAction("Add");
        publishAction.setUrl(url);
        publishAction.setTcmUri(tcmURI);
        publishActionDAO.store(publishAction);
    }
} 
```

**以上是创建新二进制文件时添加**的示例代码，更新和删除也是如此，我将 Action 存储为**Add**，二进制发布 URL，它的 TCMURI。我可以在上面的代码中轻松获取这些数据。现在我面临的问题是我只需要存储 PDF 类型的二进制文件和其他类型的二进制文件（如（JPG/Word 等）没有记录条目）的记录。

编辑：下面的解决方案对我有用，或者为二进制文件制作对象会降低性能。

```
ItemDAO item = (ItemDAO) StorageManagerFactory.getDAO(binaryContent.getPublicationId(),StorageTypeMapping.BINARY_META);
BinaryMeta binarymeta = (BinaryMeta) item.findBinaryByPrimaryKey(binaryContent.getPublicationId(),binaryContent.getBinaryId());
binarymeta.getBinaryType(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T20:39:35.037

可以通过验证方法中的扩展来严格检查`relativePath`类型`create`：

```
 if (!relativePath.toLowerCase().endsWith(".pdf")) { return; } 
```

但是，有一种更好的方法来处理这个问题 - 在您的 中`cd_storage_conf.xml`，使用特定扩展名映射 Binary 类型。然后 CD 存储框架将仅在扩展匹配时调用您的 DAO：

```
 <Item typeMapping="Binary" itemExtension=".pdf" storageId="myStorage"/> 
```

# java - 广播服务没有被调用

> ID：14285369
> 
> 赞同：0
> 
> 时间：2013-01-11T19:32:59.320
> 
> 标签：java, android, eclipse

使用以下代码

```
 Intent i = new Intent(this, BootUpReceiverRecall.class);
        sendBroadcast(i);

 <receiver  android:process=":remote" android:name="BootUpReceiverRecall"></receiver>

public class BootUpReceiverRecall extends BroadcastReceiver 
{
      // Restart service every 30 seconds
      private static final long REPEAT_TIME = 1000 * 30;

      @Override
      public void onReceive(Context context, Intent intent) 
      {
        AlarmManager service = (AlarmManager) context
            .getSystemService(Context.ALARM_SERVICE);
        Intent i = new Intent(context, BootUpReceiver.class);
        PendingIntent pending = PendingIntent.getBroadcast(context, 0, i,
            PendingIntent.FLAG_CANCEL_CURRENT);
        Calendar cal = Calendar.getInstance();
        // Start 30 seconds after boot completed
        cal.add(Calendar.SECOND, 30);
        //
        // Fetch every 30 seconds
        // InexactRepeating allows Android to optimize the energy consumption
        service.setInexactRepeating(AlarmManager.RTC_WAKEUP,
            cal.getTimeInMillis(), REPEAT_TIME, pending);

        // service.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
        // REPEAT_TIME, pending);
      } 
```

我的 BootUpReceiver 永远不会被调用。我在做什么错？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:37:52.593

You need to define it properly in AndroidManifest.xml :

```
<receiver 
android:process=":remote"
android:name=".BootUpReceiverRecall" /> 
```

Take a look at "android:name" tag,
you need to add a dot(".") before the "BootUpReceiverRecall" if it is in the same package as your application,but if it is not you can simple use the full name like "app.package.receivers.BootUpReceiverRecall".

# node.js - 如何远程启动和停止流星服务器？

> ID：14285371
> 
> 赞同：3
> 
> 时间：2013-01-11T19:33:17.137
> 
> 标签：node.js, unix, build, build-automation, meteor

我正在使用[流星](http://meteor.com)。您可以使用`meteor run`. 假设我在可以 ssh 进入的某个地方拥有自己的服务器（unix）。我有一个构建脚本，可以将 git repo 中的最新源代码复制到该服务器上。我需要该脚本来停止最后运行的流星服务器，并在传输文件后启动新的流星服务器。**以编程方式启动和停止流星服务器的好方法是什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:48:53.327

Meteor 构建在 Node.js 之上。您总是可以创建一个查找 node.js 并退出它的脚本（bash 脚本）。我从未亲自尝试过，但`process.exit()`在流星中有一个节点命令。

还要记住使用`meteor run`是为了开发。一旦你将你的包捆绑起来，它就会从 node.js 中运行

还可以查看一个名为`meteorite`（https://github.com/oortcloud/meteorite）的项目，您还可以从 git 以及您的流星本身更新包

编辑：我忘记了流星扫描文件更改并以最小中断自动更新到客户端而无需重新启动的神奇能力！

# php - 带有开始时间和结束时间以及超过运行时间的mysql时隙查询

> ID：14285375
> 
> 赞同：0
> 
> 时间：2013-01-11T19:33:32.563
> 
> 标签：php, mysql, sql

我有一个返回时隙的 mysql 查询。我有一个名为timeslots 的表，其中包含starttimeb、endtimeb 和employeeb。Booked Starttime 和 endtime 字段从名为 schedule 的不同表中提取。问题是我只能分配由时隙表定义的约会。

例如，我希望 8:00 到 10:00、10:00 到 12:00、12:00 到 14:00、14:00 到 16:00 和 16:00 到 18:00 的时段不可用，如果有计划表中有 1 个计划项目，开始时间为 08:00，结束时间为 18:00。营业时间定义为 8:00 到 18:00，因此在此期间只有两个小时的时间段可用，并且预约的时间可能会超过时间段表中提供的 2 小时时间段，例如，如果8:00 至 12:00 已预订 我只希望 12:00 至 14:00、14:00 至 16:00 和 16:00 至 18:00 可用。或者，如果预订了 9:00 至 11:00，则只有 12:00 至 14:00、14:00 至 16:00 和 16:00 至 18:00 可用。

```
mysql_query( "SELECT *
FROM timeslots
LEFT OUTER JOIN
 (SELECT 
   starttime
 , endtime
 , custno
 , id
FROM schedule
WHERE schedule.date = '2012-12-14'
 ) AS a
 ON a.starttime >= timeslots.starttimeb
 AND a.endtime <= timeslots.endtimeb
 AND a.custno = timeslots.custnob" ); 
```

上面的查询返回类似这样的内容...在我的应用程序中，如果 starttime 为空，则设置为可用时隙。

```
starttimeb endtimeb custnob starttime endtime custno id
08:00:00 10:00:00 迈克尔 W 斯隆 08:00:00 10:00:00 迈克尔 W 斯隆 15670
10:00:00 12:00:00 迈克尔 W 斯隆 NULL NULL NULL NULL
12:00:00 14:00:00 迈克尔 W 斯隆 NULL NULL NULL NULL
14:00:00 16:00:00 迈克尔 W 斯隆 14:00:00 16:00:00 迈克尔 W 斯隆 15673
16:00:00 18:00:00 迈克尔 W 斯隆 NULL NULL NULL NULL
08:00:00 10:00:00 James T Reesor 08:00:00 10:00:00 James T Reesor 15664
10:00:00 12:00:00 James T Reesor NULL NULL NULL NULL
12:00:00 14:00:00 James T Reesor NULL NULL NULL NULL
14:00:00 16:00:00 James T Reesor NULL NULL NULL NULL
16:00:00 18:00:00 James T Reesor 16:00:00 18:00:00 James T Reesor 15674
08:00:00 10:00:00 Carlton L. Pierce NULL NULL NULL NULL
10:00:00 12:00:00 Carlton L. Pierce NULL NULL NULL NULL
12:00:00 14:00:00 Carlton L. Pierce 12:00:00 14:00:00 Carlton L. Pierce 15671
14:00:00 16:00:00 Carlton L. Pierce NULL NULL NULL NULL
16:00:00 18:00:00 Carlton L. Pierce NULL NULL NULL NULL
08:00:00 10:00:00 Frankie D Aldridge NULL NULL NULL NULL
10:00:00 12:00:00 Frankie D Aldridge NULL NULL NULL NULL
12:00:00 14:00:00 Frankie D Aldridge NULL NULL NULL NULL
14:00:00 16:00:00 Frankie D Aldridge NULL NULL NULL NULL
16:00:00 18:00:00 Frankie D Aldridge NULL NULL NULL NULL
08:00:00 12:00:00 迈克尔 W 斯隆 08:00:00 10:00:00 迈克尔 W 斯隆 15670

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T22:38:03.870

很难理解问题是什么，但是如果问题是您想查找 schedule 中的任何行是否与时隙表中的时间重叠，则更改

```
ON a.starttime >= timeslots.starttimeb
AND a.endtime <= timeslots.endtimeb 
```

它只匹配在给定时间段内开始和结束的计划行，进入

```
ON a.starttime < timeslots.endtimeb
AND a.endtime > timeslot.starttimeb 
```

它匹配既不完全在所讨论的时间段之前也不完全在所讨论的时间段之后的计划行，可能会有所帮助。

# css - 显示时 Chrome 不是像素完美的：块

> ID：14285377
> 
> 赞同：-1
> 
> 时间：2013-01-11T19:33:40.940
> 
> 标签：css, google-chrome, pixel-perfect

正如您在 [this][1] fiddle 中看到的，在悬停时，悬停状态`a`总是比 ul 高一个像素。（您可以在小提琴中看到这一点：它甚至超出了 的边界`ul`）这只发生在 Chrome 中（也在 FF en IE10 中测试过，但他们没有这个问题）。有什么解决办法吗？

注意：`overflow: hidden`不是解决方案，因为我希望溢出对其他内容（子菜单等）可见。

```
ul {
  list-style: none;
  text-align: center;
  background: whiteSmoke;
  border: 1px solid red;
}
li {
  display: inline-block;
  font-size: 150%;
  position: relative;
  margin: 0;
}
li a {
  color: #555;
  text-decoration: none;
  text-shadow: 0 2px 0 white;
  display: block;
  padding: 0.2em 0.5em 0.3em;
}
li a:hover {
  color: black;
  background: whiteSmoke;
  box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.125);
}
```

```
<nav>
  <ul>
    <li><a href="#">Home</a></li>
    <li><a href="#">Forum</a></li>
    <li><a href="#">About</a></li>
    <li class="has-sub-menu"><a href="#">Contact</a></li>
  </ul>
</nav>
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-11T19:37:15.807

如果您的菜单在 Chrome 中低 1 个像素；有两种特定于浏览器的方法只能在 Chrome 中应用校正样式。[查看已回答的类似帖子](https://stackoverflow.com/questions/9328832/how-to-apply-specific-css-rules-to-chrome-only)

**CSS**

```
@media screen and (-webkit-min-device-pixel-ratio:0) { 
  position:relative;top:-1px;
} 
```

**JS**

```
if (navigator.appVersion.indexOf("Chrome/") != -1) {
  // modify menu styling 
} 
```

# c++ - 错误 C2248：使用线程时出现奇怪错误

> ID：14285378
> 
> 赞同：1
> 
> 时间：2013-01-11T19:33:40.590
> 
> 标签：c++, multithreading

我收到以下错误

> 错误 2 错误 C2248: 'std::thread::thread' : 无法访问在类 'std::thread' c:\dropbox\prog\c++\ttest\ttest\main.cpp 11 1 ttest 中声明的私有成员
> 
> 错误 1 ​​错误 C2248: 'std::mutex::mutex' : 无法访问在类 'std::mutex' c:\dropbox\prog\c++\ttest\ttest\main.cpp 11 1 ttest 中声明的私有成员

我的代码

```
#include <mutex>
#include <thread>

using namespace std;

struct Serverbas
{
    mutex mut;
    thread t;
};

struct LoginServer : Serverbas
{
    void start()
    {
       t = thread(&LoginServer::run, *this);
    }
    void run() {}
};

int main() {} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T19:55:49.363

```
t = thread( &LoginServer::run, *this); 
```

成员函数的第一个参数`run`（隐含在直接调用中）应该是`this`指针，即 just `this`。不要取消引用它。

当您取消引用时，一切都会崩溃，因为您的`std::thread`和`std::mutex`成员阻止您的类类型的对象是可复制的——这些成员对象的复制构造函数是`private`/ `delete`d，*这*就是您看到的错误。

所以：

```
t = thread(&LoginServer::run, this); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T19:47:40.630

问题是这里的这一行：

```
t = thread( &LoginServer::run, *this); 
```

通过取消引用它，您告诉编译器您想要将此对象的副本传递给线程函数。但是您的类不是可复制构造的，因为它包含 std::mutex 和 std::thread （两者都不是可复制构造的）。您得到的错误是因为这两个类的复制构造函数不可访问。

要修复它，请不要取消引用该对象。如果您仍然使用 lambda，代码可能会更清晰，如下所示：

```
t = thread([this] { run(); }); 
```

# javascript - 一旦元素通过 Ajax 加载到页面，如何使用 jQuery 运行调用一些 Javascript 代码？

> ID：14285383
> 
> 赞同：1
> 
> 时间：2013-01-11T19:33:59.477
> 
> 标签：javascript, ajax, jquery

我试图在某些 html 标签通过 Ajax 加载到页面后立即为其分配一些属性，但我不想在我的页面中编写任何 Javascript。敌人的例子我有如下的html：（记住这是通过ajax来的，而不是在页面加载时）

```
<div data-something="true">
 something here
</div> 
```

我想要这样的东西保存到 .js 文件中：（这不起作用）

```
$('body').on('load', '[data-something]', function(){  
       //do something 
}); 
```

但我不想在一页中有这样的内容：

```
<div data-something="true">
 something here
</div>

<script>
   $(function(){
        //do something
   });
</script> 
```

有什么办法吗？加载元素后立即触发事件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T19:36:04.223

当然，把它放在成功的ajax调用中。

```
$("someelemnt").load("somepage.html",function(){
    // do something.
}); 
```

不要在通过 ajax 加载的页面上使用脚本标签，它们通常会在 html 附加到页面之前执行。

# .net - 多表选择

> ID：14285385
> 
> 赞同：1
> 
> 时间：2013-01-11T19:34:04.720
> 
> 标签：.net, linq, list, object, linq-to-objects

我正在尝试编写一个`Linq`语句，允许我返回一个不同的列表

*`obj1 objects that contain obj2.sID == ASpecified# or obj3.sID == ASpecified#`*.

我试图包括一个我的实体图的例子，希望我的问题更有意义，但可惜我没有足够的声誉。所以我想我只需要在代码中完成它。下面是我的对象。

```
public class obj1
{
    public int obj1_id { get; set; }
    public String obj1Prop1 { get; set; }
    public String obj1Prop2 { get; set; }
    public List<obj2> obj2List { get; set; }
    public List<obj3> obj3List { get; set; }
}
public class obj2
{
    public int obj2_id { get; set; }
    public String obj2Prop1 { get; set; }
    public String obj2Prop2 { get; set; }
    public Int32 sID { get; set; }
}
public class obj3
{
    public int obj3_id { get; set; }
    public String obj3Prop1 { get; set; }
    public String obj3Prop2 { get; set; }
    public Int32 sID { get; set; }
} 
```

我对简单的 linq 语句相当精通，但对这个语句有点不满意。我在想我需要通过*sID**加入`obj3`，`obj2`*但我不确定。

 *任何帮助或方向将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:50:05.550

不需要加入。
尝试以下代码片段

```
var o1 = new List<obj1>(); // Add items to list
var specificId = "123"; // specific id
var listObj1 = o1.Where(o => o.obj2List.Any(o2 => o2.sID == specificId) ||
                             o.obj3List.Any(o3 => o3.sID == specificId)).ToList(); 
```*

# path - RaphaelJS 填充路径部分甜甜圈

> ID：14285387
> 
> 赞同：0
> 
> 时间：2013-01-11T19:34:11.337
> 
> 标签：path, raphael, fill

这是我尝试填充路径时的当前结果： [screenshot](http://i.imgur.com/L0O5q.png) 。

注意笔画是正确的，但填充不是： [jsfiddle](http://jsfiddle.net/Xv3dF/) 。

我看过填充规则，但这似乎没有多大作用。我猜这个问题更多是因为我的形状没有正确关闭。

请帮忙！

这是为上述生成的 svg：

```
<svg height="75" version="1.1" width="150" xmlns="http://www.w3.org/2000/svg" style="overflow: hidden; position: relative; left: 0px; top: 0px;"><desc>Created with Raphaël 2.1.0</desc><defs/>
<path style="" fill="#949598" stroke="#000000" d="M75,75L150,75.00000000000001A75,75,0,0,0,0,74.99999999999999M75,75L45,75A30,30,0,1,1,105,75.00000000000001Z" stroke-width="0"/>
<path style="fill-opacity: 1.2;" fill="#c9532f" stroke="#00ff00" d="M75,75M48.144896960365074,4.972837836089695A75,75,0,0,0,0,74.99999999999999M75,75M64.25795878414603,46.989135134435884A30,30,0,0,0,45,75M64.25795878414603,46.989135134435884L48.144896960365074,4.972837836089695M45,75L0,75Z" stroke-width="1" fill-opacity="1.2"/>
<circle cx="75" cy="75" r="5" fill="#333333" stroke="#000" style="" stroke-width="0"/>    
</svg> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T20:04:20.457

小甜甜圈的路径被绘制成四个部分，在页面上跳跃，在确定形状的内部和外部时，这似乎使 Raphael 感到困惑。（我无法确切说明它是如何做出这一决定的。）

最简单的解决方案是通过从不从页面“抬起你的笔”来绘制形状——换句话说，通过构造路径字符串以仅在开头使用一个“M”。这不可能适用于所有形状，但在您的情况下非常容易。下面，我重新排列了路径，以便将其分段绘制，而无需跳转到新坐标：

```
var p2 = paper.path("M48.1,5A75,75,0,0,0,0,75L45,75A30,30,0,0,1,64.2,47L48.1,5").attr("fill", "#c9532f"); 
```

（为了便于阅读，我还对这些值进行了四舍五入。不需要小数点后 10 位的像素值）。

如您所见，这从同一个地方开始，将外部曲线绘制到 0,75，将线绘制到内部曲线的底部，顺时针绘制内部曲线，然后与原点重新连接。请注意，内部曲线需要第二个布尔值，即“[扫描标志](http://www.w3.org/TR/SVG/paths.html#PathDataCurveCommands)”，从 0 更改为 1，才能在相反方向正确绘制。

一般来说，最好以与手动绘制路径相同的方式构建路径（如果可能），以便在您回头观察它们时保持它们的连贯性。

这是整个事情：

```
var paper = Raphael(0, 0, 800, 600);    
var p1 = paper.path("M75,75L150,75.00000000000001A75,75,0,0,0,0,74.99999999999999M75,75L45,75A30,30,0,1,1,105,75.00000000000001Z").attr("fill", "#949598");

var p2 = paper.path("M48.1,5A75,75,0,0,0,0,75L45,75A30,30,0,0,1,64.2,47L48.1,5").attr("fill", "#c9532f");  

var c = paper.circle(64.2,47, 5).attr("fill", "#333333"); 
```

# android - 替换 HTML 文件中的变量并将其显示给用户

> ID：14285388
> 
> 赞同：0
> 
> 时间：2013-01-11T19:34:22.743
> 
> 标签：android, templates, android-webview

我有一个 HTML 文件，其中包含一些变量，例如我的应用程序的当前版本。在显示 HTML 之前，应替换这些变量。现在我的问题是，最好的方法是什么？

*   我应该把 HTML 文件放在哪里？

*   如何替换我的变量？

*   如何向用户显示此 HTML？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:40:37.137

最简单的方法是将html文件放在assests中。以文本形式读取文件，进行字符串替换，并使用 WebView.loadData 在 Web 视图中显示它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:45:04.580

> 我应该把 HTML 文件放在哪里？

您可以将此文件存储在资产文件夹中，但我不清楚为什么您应该更改那里的值。尝试提供更多信息。

> 如何替换我的变量？

为什么要使用 html？也许使用 JSON 或 XML 格式更好？
您可以查看 java HTML 解析器。

> 如何向用户显示此 HTML？

您只需使用 WebView 从文件加载 html 或将其加载为字符串。

# mysql - 如何处理mysql中的庞大数据库？

> ID：14285400
> 
> 赞同：1
> 
> 时间：2013-01-11T19:35:12.293
> 
> 标签：mysql

我正在与他们处理大量数据的项目合作。在每个表中都有 100k 或更多数据可用。现在我需要运行 sql 更新查询，但我不工作。

我怎么解决这个问题 ？查询在我的本地主机上成功运行，数据很少。但是在服务器上它不起作用

请帮我。

```
UPDATE buzz_business_view b, daily_deals d
SET d.business_id = b.`Business ID`
WHERE d.phone = b.phone 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:44:40.833

确保您要加入的列已编入索引。

使用 where 约束一次选择几行。不要试图一次更新整个表格。

根据表的主键在逻辑上将表划分为多个部分，并一次更新一个部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T21:13:48.427

为了获得最佳性能，您需要为 JOIN 谓词提供合适的索引。

```
CREATE INDEX ... ON buzz_business_view (phone,`Business ID`) ;

CREATE INDEX ... ON daily_deals (phone) ; 
```

* * *

当您说 UPDATE 语句“不起作用”时，该语句是否会引发错误，是否只是看起来挂起，或者该语句是否成功完成但结果与您预期的不一样。

# php - PHP exec() not execute c++ program when executed via browser

> ID：14285402
> 
> 赞同：-1
> 
> 时间：2013-01-11T19:35:21.730
> 
> 标签：php, c++, exec, praat

I have a PHP script that calls exec() to execute a c++ program but when I call it from the browser it doesn't work. Instead if I use command-line "php5 ./mypage.php" it works.

This is my PHP page:

`<?php exec("./praat ./FeaturesExtraction.praat ./emotion.wav ./output/"); ?>`

Praat is a program to analyse speech. This program take as input a script FeaturesExtraction.praat and a wav emotion.wav and write the output in the directory "output" (that has all the permission).

I've tested two Web Servers, Apache and Lighttpd, but I've no results.

Someone can help me? How can I solve this problem? Or how can I wrap praat to use it from web?

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:37:31.583

the problem could be "./praat". Try using the full path to the executable or do the php equivalent of chdir() to the appropriate directory

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:17:28.203

经过不同的测试，这是我的结论：我解决了权限问题，所以我的简单 C 二进制文件可以工作，但不幸的是没有。我看到了 apache 日志文件，错误是：在抛出“MelderError”实例后调用终止已中止

因此，我将提出另一个适当的问题： [Error execution praat from PHP: terminate called after throwing an instance of 'MelderError' Aborted](https://stackoverflow.com/questions/14295793/error-executing-praat-from-php-terminate-called-after-throwing-an-instance-of)

谢谢大家。

# android - 将数据显示到列表视图中

> ID：14285404
> 
> 赞同：-1
> 
> 时间：2013-01-11T19:35:25.627
> 
> 标签：android, sqlite, listview

以下代码在列表视图上显示来自 sqlite 数据库的信息。第一个它显示日期并且列表视图允许我单击，当我单击一个日期时，它会显示在列表视图上该日期完成的信息。我的问题是当我在这个日期 12.01.2013 保存数据并且我稍后重复相同的日期然后它显示相同的日期两次并且我希望它只显示一个日期并且当我单击它以显示我的数据时早上保存的数据和我在同一天晚些时候保存的数据，而不是两个相似的日期。

这是代码

```
public class Pro extends Activity implements OnItemClickListener {

    private ListView uNamesListView;

        private ListAdapter customerListAdapter;
        private ArrayList<PojoClass> pojoArrayList;

    final Context context = this;
    private Button button;
    private TextView result;
    DBAdapter db = new DBAdapter(this);

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        uNamesListView = (ListView) findViewById(R.id.listView1);
        uNamesListView.setOnItemClickListener(this);

        pojoArrayList = new ArrayList<PojoClass>();
        customerListAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, populateList());
        uNamesListView.setAdapter(customerListAdapter);                 

    }

           public List<String> populateList() {

                List<String> uGraduateNamesList = new ArrayList<String>();
                DatabaseHelper openHelperClass = new DatabaseHelper(this);
                SQLiteDatabase sqliteDatabase = openHelperClass.getReadableDatabase();
                Cursor cursor = sqliteDatabase.query(DBAdapter.SCAN_TABLE, null, null, null, null, null, null);
                startManagingCursor(cursor);
                while (cursor.moveToNext()) {

                    String cDate = cursor.getString(cursor.getColumnIndex(DBAdapter.COLUMN_Date ));
                    String cMeterNumber = cursor.getString(cursor.getColumnIndex(DBAdapter.COLUMN_MeterNumber ));
                    String cVname = cursor.getString(cursor.getColumnIndex(DBAdapter.COLUMN_Vname ));
                    String cPname = cursor.getString(cursor.getColumnIndex(DBAdapter.COLUMN_PName ));

                    PojoClass ss = new PojoClass();
                    ss.SetName(cDate);
                    ss.SetSurname(cMeterNumber);
                    ss.SetID(cVname);
                    ss.SetHaddress(cPname);
                pojoArrayList.add(ss);

                    uGraduateNamesList.add(cDate);
                }
                sqliteDatabase.close();

                return uGraduateNamesList;

    }

    @Override
    public void onItemClick(AdapterView<?> aa, View view, int ss, long bb) {
        // TODO Auto-generated method stub
        Intent updateCustomerIntent = new Intent(Pro.this, ViewByVendor.class);

        updateCustomerIntent.putExtra("product", product);
        startActivity(updateCustomerIntent);

        Toast.makeText(getApplicationContext(), "Clicked on :" + ss, Toast.LENGTH_SHORT).show();
        PojoClass clickedObject =  pojoArrayList.get(ss);

        Bundle dataBundle = new Bundle();

        dataBundle.putString("clickedDate", clickedObject.getDates());
        dataBundle.putString("clickedMeterNumber", clickedObject.getMeterNumber());
        dataBundle.putString("clickedVname", clickedObject.getVname());
        dataBundle.putString("clickedPname", clickedObject.getPname());
        updateCustomerIntent.putExtras(dataBundle);
        startActivity(updateCustomerIntent);

    }

} 
```

我会感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T07:47:18.097

在读取列表视图的日期时，您只需要*唯一的*日期。在 SQL 中，这可以使用`DISTINCT`或来完成`GROUP BY`：

```
SELECT DISTINCT Date FROM ScanTable
SELECT Date FROM ScanTable GROUP BY Date 
```

Android 代码如下所示：

```
cursor = db.query(true,                       // <-- distinct
                  DBAdapter.SCAN_TABLE,
                  new String[] { DBAdapter.COLUMN_Date },
                  null, null, null, null, null, null);
cursor = db.query(DBAdapter.SCAN_TABLE,
                  new String[] { DBAdapter.COLUMN_Date },
                  null, null,
                  DBAdapter.COLUMN_Date,      // <-- groupBy
                  null, null); 
```

要显示日期的数据，您应该只将日期传递给该活动，并读取与日期匹配的所有记录：

```
SELECT * FROM ScanTable WHERE Date = ? 
```

```
String selectedDate = ...;
cursor = db.query(DBAdapter.SCAN_TABLE, null,
                  DBAdapter.COLUMN_Date + " = ?", selectedDate,
                  null, null, null); 
```

# jquery - Would it be better to use Knockout.js in this situation?

> ID：14285418
> 
> 赞同：0
> 
> 时间：2013-01-11T19:36:09.623
> 
> 标签：jquery, ajax, django, dom, knockout.js

I'm currently developing a rather large analytic program with a Django/Python backend and am using jQuery.

Let's say that all of my statistics are based on the concept of a "`Person`". After viewing overview statistics, someone may want to open up an individual `Person` and look at their statistics.

Currently I send an AJAX request back to my server, Django fetches the person, renders an entire DOM Tree for them, and returns it. jQuery takes the returned `<div>` and adds it to the documents DOM tree along side any other opened people.

So every `Person` has their own div with all of the same elements, just with their information. The current person you're viewing is `display:block;` while I `display:none;` any other people. Any elements (such as a button to view more detailed information) that need to go back to the server to fetch more detailed information are coded with Django's templating system and given an onlick of something like `getMoreInformation('myUUID');`. I would also like to note that I find myself using UUID's in element IDs frequently so AJAX can find and modify the right person's information if need be.

I recently discovered Knockout.js and am wondering if it would be better for me to use it in this situation, and have some concerns about speed, etc.

It seems like Knockout.js would be "the right thing to do" as it provides a better 1-to-1 relationship between data on the backend and how it is represented in the Javascript (models to models) instead of individual DOM elements with ids passed for any functions. Not to mention it would drastically reduce the amount of elements in the DOM tree.

However, my primary audience is IE8, and I have concerns on Knockout.js having performance problems. While currently I just hide and show the divs related to the people you're investigating, Knockout.js would have to go through all of the `data-bind`'s and use Javascript to replace their content.

What are the performance concerns for using Knockout.js in a situation like this? Or would they be so minimal as to not matter? Hard a hard time finding any benchmarks, has anyone experienced slower UI when moving to Knockout.js? (Less DOM Elements + Knockout.js vs. More DOM Elements w/o Knockout.js in a "real world" application is kind of what I'm looking for here.)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:47:35.453

我认为淘汰赛对此非常有用，请记住您可以使用可见绑定进行设置`display: none`，这样还不错。此外，就性能而言，它的性能可能与 jQuery 一样好或更好，因为绑定可以直接访问元素并且不需要查询 DOM。

但是，如果您的服务器返回 html，可能会涉及到相当多的工作。相反，您希望它以 JSON 格式返回数据并在浏览器中构建 UI。此外，除非您希望在将单个值加载到视图中后对其进行更新，否则您甚至可能不需要单个数据位是可观察的。

我不明白为什么您认为通过切换到淘汰赛会有更多或更少的 DOM 元素。Knockout 使用在渲染之前不需要在 DOM 中的模板。您当前的实现是将大块 html 插入到 DOM 中，并且在其他条件相同的情况下它们应该是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:51:18.927

我想发表评论，但评论太长了，所以这是一个答案

[优化数据可视化 Web 应用程序的性能](https://stackoverflow.com/questions/14011253/optimizing-performance-of-data-visualisation-web-application)

有类似想法后，我换了一个数据可视化工具；

它过去在每次交互时都会调用很多服务器，

现在服务器发送大量数据，剩下的由 js 完成；

我在接收数据时设置索引（最多 170kb 未压缩），然后根据用户交互修改 dom（无显示：到处都没有，内容被更改或分离；数据存储在 javascript 数组中而不是 html 元素中）

结果非常快（我很惊讶）；

您必须小心将元素附加到 DOM 的方式，以创建结构良好的对象以访问最少的 DOM；

不知道淘汰赛，但 imo 如果它是大的和特定的，并且你寻找性能，你最好自己做算法（这并不难，只需将你的数据处理成索引数组，当事件触发时将按原样使用 - 即一个循环接待处，不再）

# plugins - Can I assign JIRA permission schemes to projects in a plugin?

> ID：14285420
> 
> 赞同：2
> 
> 时间：2013-01-11T19:36:35.697
> 
> 标签：plugins, permissions, project, jira

I haven't been able to find any info about this, whether or not it's possible.

I'm writing an external app that I want to give the ability to really put projects on hold (i.e. browse only, can't create/modify/etc... issues), and remove that hold. Everything is working fine in terms of the communication between the two apps, but I can't find the API hook to change the permission scheme associated with a project.

Can anyone point me in the right direction or tell me if this is just something that can't be done?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T22:01:23.240

有可能的。

首先，您应该使用ProjectService 类中的[validateUpdateProjectSchemes](http://docs.atlassian.com/software/jira/docs/api/latest/com/atlassian/jira/bc/project/ProjectService.html#validateUpdateProjectSchemes%28com.atlassian.crowd.embedded.api.User,%20java.lang.Long,%20java.lang.Long,%20java.lang.Long%29)（要获取 projectService 对象，您只需将其注入到构造函数中）。

```
UpdateProjectSchemesValidationResult validationResult = projectService.validateUpdateProjectSchemes(
    user,
    permissionSchemeID,
    null,
    null); 
```

然后，检查验证结果是否有效，并使用[updateProjectSchemes](http://docs.atlassian.com/software/jira/docs/api/latest/com/atlassian/jira/bc/project/ProjectService.html#updateProjectSchemes%28com.atlassian.jira.bc.project.ProjectService.UpdateProjectSchemesValidationResult,%20com.atlassian.jira.project.Project%29)方法使用选择的权限方案实际更新项目：

```
if (validationResult.isValid()){
    projectService.updateProjectSchemes(validationResult, project);
} 
```

# perl - perl cgi::param 错误与污染模式中的单加号

> ID：14285421
> 
> 赞同：0
> 
> 时间：2013-01-11T19:36:35.627
> 
> 标签：perl, cgi, param, taint

我在一个基于 Perl CGI 的网站上工作。它使用 Perl -T（污染模式）运行。我注意到文本输入只包含一个加号，没有其他内容（“+”）导致 CGI::param() 给出此错误：

在 ....../CGI.pm 第 533 行使用 -T 开关运行时，require 中的依赖关系不安全。BEGIN failed - 编译中止。

这不适用于其他单号或带有前导或尾随空格的加号（“-”、“+”、“?”）。

尽管用户通常不会输入单个加号作为输入，但我希望在这里有一个解决方法，以便我的脚本可以很好地拒绝输入，而不是在浏览器中打印一个丑陋的“软件错误”。

```
REQUEST_METHOD=GET QUERY_STRING='page=%2B' perl -s -T -E'
use strict;
use CGI qw( :standard  );
CGI->new();
my $page;
eval { $page = param("page"); };
print "[ $@ ]\n"; 
```

'

这会打印一个编译错误：

[在 ../..../CGI.pm 第 xxx 行使用 -T 开关运行时，require 中的依赖关系不安全。BEGIN 失败——编译中止。]

如果我跳过 CGI->new() 不会有错误。但根据我们的要求，这不是一个选项。

我希望这更清楚。感谢大家的帮助！

YJ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T23:44:45.140

如果您创建 CGI 对象，请使用它。

```
my $cgi = CGI->new();
my $page = $cgi->param("page"); 
```

或者

```
param("page"); 
```

但不要混搭。

# java - 自定义注释以抑制特定的 FindBugs 警告

> ID：14285422
> 
> 赞同：10
> 
> 时间：2013-01-11T19:36:37.730
> 
> 标签：java, annotations, findbugs

我想创建自定义注释来抑制单个 FindBugs 警告，以便通过代码完成更容易使用它们。例如，这个忽略不设置所有`@Nonnull`字段的构造函数。

```
@TypeQualifierDefault(ElementType.CONSTRUCTOR)
@SuppressFBWarnings("NP_NONNULL_FIELD_NOT_INITIALIZED_IN_CONSTRUCTOR")
@Retention(RetentionPolicy.CLASS)
public @interface SuppressNonnullFieldNotInitializedWarning
{ } 
```

但是，使用注释时我仍然看到警告。

```
public class User {
    @Nonnull
    private String name;

    @SuppressNonnullFieldNotInitializedWarning
    public User() {
        // "Nonnull field name is not initialized by new User()"
    }
} 
```

我尝试了不同的保留策略和元素类型，将注释放在构造函数和类上，甚至`@TypeQualifierNickname`.

同样的模式适用`@Nonnull`于类中的所有字段。

```
@Nonnull
@TypeQualifierDefault(ElementType.FIELD)
@Retention(RetentionPolicy.RUNTIME)
public @interface FieldsAreNonnullByDefault
{ } 
```

FindBugs 正确显示分配`null`给`name`.

```
@FieldsAreNonnullByDefault
public class User {
    private String name;

    public UserModel() {
        name = null;
        // "Store of null value into field User.name annotated Nonnull"
    }
} 
```

我相信问题在于`@SuppressFBWarnings`没有用`@TypeQualifier`while is 标记，`@Nonnull`因此不适用于它。但是必须有其他一些机制来使用另一个注释应用一个注释。`@TypeQualifierDefault``@TypeQualifierNickname`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:01:53.193

（没有具体回答这个问题），但如果你只是想让代码完成更好地工作`@SuppressFBWarnings`，你可以`static final String`为每个警告代码定义一个，然后在注释中使用它们。例如

```
public final class FBWarningCodes {
    private FBWarningCodes() { }

    public static final String NP_NONNULL_FIELD_NOT_INITIALIZED_IN_CONSTRUCTOR = "NP_NONNULL_FIELD_NOT_INITIALIZED_IN_CONSTRUCTOR";
} 
```

然后：

```
import static com.tmobile.tmo.cms.service.content.FBWarningCodes.*;

@SuppressFBWarnings(NP_NONNULL_FIELD_NOT_INITIALIZED_IN_CONSTRUCTOR) 
```

（虽然不可否认 Eclipse 不想执行代码完成，除非您`value=`在注释中指定）

# eclipse-plugin - Eclipse 4.2.1 SDCC plugin can't create MCS51 project

> ID：14285428
> 
> 赞同：1
> 
> 时间：2013-01-11T19:37:16.997
> 
> 标签：eclipse-plugin, sdcc

I'm running Eclipse 4.2.1 on 64-bit Windows 7\. I have the Eclipse CDT plugin installed and can make C/C++ projects. I have sdcc installed (get a response on CL with `sdcc --version`). I have downloaded this version of the plugin:

[http://sourceforge.net/projects/eclipse-sdcc/files/latest/download?source=dlp](http://sourceforge.net/projects/eclipse-sdcc/files/latest/download?source=dlp)

Unzipped, and put all the contents of the features and plugins folders in to my corresponding Eclipse install's features and plugins folders. (followed instructions from [http://mihirknows.blogspot.com/2007/10/installing-sdcc-under-eclipse.html](http://mihirknows.blogspot.com/2007/10/installing-sdcc-under-eclipse.html)).

I restart Eclipse, go to File>New>C Project. Select MCS51 family (SDCC) under Project type and SDCC Tool Chain under Toolchains. Click next, leave Release and Debug selected, click Finish. Error Creating Project box pops up. Says Project cannot be created Reason: Internal Error: I click on the Details button and it says java.lang.NullPointer.Exception. (Would have included a screencap, but I no haz the reputation yet > _<)

I've also seen this post: [Eclipse with SDCC plug in - always has an error of java.lang.NullPointerException](https://stackoverflow.com/questions/6672785/eclipse-with-sdcc-plug-in-always-has-an-error-of-java-lang-nullpointerexceptio) They only suggest downloading the same zip I used.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-05T14:01:26.440

我遇到了同样的问题，Alexander.P 在[Eclipse 中使用 SDCC 插件的答案 - 总是有 java.lang.NullPointerException 的错误](https://stackoverflow.com/questions/6672785/eclipse-with-sdcc-plug-in-always-has-an-error-of-java-lang-nullpointerexceptio)对我有用。SDCC 3.4 和 Eclipse Luna 4.4.1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T05:44:23.560

嗯.. 我设法让 SDCC 在 Windows 7 32 位机器上运行。我建议您在未安装插件的 Eclipse 中创建一个新项目并通过源代码进行调试。这就是我所做的，所以我可以消除一些错误并让它运行。

编辑：您还必须将 sh.exe 替换为 Cygwin 使用的那个，因为当您开始构建时，SDCC 插件附带的 sh.exe 似乎崩溃了。

# c# - 用于针对任何邮件服务器进行编程的任何第三方 .net sdk

> ID：14285430
> 
> 赞同：0
> 
> 时间：2013-01-11T19:37:28.357
> 
> 标签：c#, service, sdk

我想要 ac# windows 服务来获取所有传入的电子邮件（及其附件），我可以对电子邮件做任何我想做的事情，例如。我可以将它们存储在我桌面等的文件夹中。

我相信我需要的是一个 sdk，我将在我的 .net 应用程序中引用它。提供 sdk 对象中的所有连接字符串以及任何其他必要的信息以连接到任何邮件服务器。然后我可以获取传入的电子邮件并根据我的要求对其进行操作。

对我来说重要的是；窗口服务应该完全独立于邮件服务器的位置。它应该独立于任何类型的邮件服务器；即：邮件服务器可以是交换或其他任何东西。

谁能告诉我，有哪些第三方 sdk 可用于执行此功能。

执行上述任务是否还需要其他任何东西。

谢谢你，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:48:00.207

[MailSystem.NET](http://mailsystem.codeplex.com/)（更完整）和[AENetMail](https://github.com/andyedinborough/aenetmail)（只有 IMAP，但实现良好）看起来像您可以使用的库。我不知道这些库的抽象级别是否正是您所需要的——但话说回来，这些库是开源的，因此您可能可以贡献您所做的任何增强。

# google-apps-script - Using sendEmail with second alias from getAliases()

> ID：14285433
> 
> 赞同：-1
> 
> 时间：2013-01-11T19:37:32.240
> 
> 标签：google-apps-script, gmail, google-workspace, google-apps-for-education

I have several aliases associated with my Google Apps for Education account at work. getAliases gets them all, which is nice, but when I try to send an email from them using sendEmail, it only seems to work with the first alias, which is my personal one. If I try it using any alias other than [0], nothing happens, and I don't get an error.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-11-20T10:11:03.957

我遇到了类似的问题并且绞尽脑汁，才意识到我一直在使用 MailApp 而不是 GmailApp。

这可能无法解决每个人的问题，但这只是添加到某人可能犯的可能错误的清单中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T03:32:41.197

这是来自的示例[`getAliases()`](https://developers.google.com/apps-script/reference/gmail/gmail-app#getAliases%28%29)。WFM。

```
// Log the aliases for this Gmail account and send an email as the first one.
var me = Session.getActiveUser().getEmail();
var aliases = GmailApp.getAliases();
Logger.log(aliases);
if (aliases.length > 0) {
  GmailApp.sendEmail(me, 'From an alias', 'A message from an alias!', {'from': aliases[0]});
} else {
  GmailApp.sendEmail(me, 'No aliases found', 'You have no aliases.');
} 
```

# javascript - Controller without templateUrl or templateUrl from routeParams in routeProvider

> ID：14285435
> 
> 赞同：0
> 
> 时间：2013-01-11T19:37:38.300
> 
> 标签：javascript, html, templates, hash, angularjs

I find unsatisfactory solve, where templateUrl define at routeProvider, and at controller it redefine. But it is one excess request. (PS: I have my templates at any folder and I have hash-routes with name of this templates, how can I do this(render my template at current hash) correctly?)

For example this code render my index.html template at ng-view tag:

```
angular.module('amiu', [])
.config(function($routeProvider){
  $routeProvider
  .when('/index/', {templateUrl:'partitials/index.html'})
}) 
```

But I want to do that:

```
angular.module('amiu', [])
.config(function($routeProvider, $routeParams){
  $routeProvider
  .when('/:page/', {templateUrl:'template/'+$routeParams.page+'.html'})
  .otherwise({redirectTo:"/"})
}) 
```

How can I do that?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T20:35:42.057

我会提出别的建议。让 $routeProvider “正常”并使用控制器在模板中设置 ng-include 的路径：

```
 $routeProvider
  .when('/page/:page', {templateUrl:'template/page.html',
     controller:"PageController"}); 
```

在 PageController 中，注入 $routeParams ，并使用它来修改模板中包含的 url。

```
$scope.include_url = $routeParams.page ; 
```

最后在 page.html 模板中，连接起来：

```
<div data-ng-include="'template/page-'+include_url+'.html"></div> 
```

它尚未经过测试，我愿意接受修改和建议。

# android - 使用 SimpleCursorAdapter.ViewBinder 更改 listView 中的颜色。安卓

> ID：14285437
> 
> 赞同：1
> 
> 时间：2013-01-11T19:37:44.137
> 
> 标签：android, listview, android-listview, android-viewbinder

我试图更改 ListView 中文本的颜色，所以我创建了 ViewBinder 但我的文本仍然是白色的，没有任何变化，我能用它做什么？

```
// map each name to a TextView
    String[] from = new String[] { "event" };
    int[] to = new int[] { R.id.countryTextView };
    conAdapter = new SimpleCursorAdapter(Clock.this, R.layout.day_plan, null, from, to);
    setListAdapter(conAdapter); // set adapter

    SimpleCursorAdapter.ViewBinder binder = new SimpleCursorAdapter.ViewBinder() {

        @Override
        public boolean setViewValue(View view, Cursor cursor, int columnIndex){    
            int getIndex = cursor.getColumnIndex("colour");
            String color = cursor.getString(getIndex);
           tv = (TextView)findViewById(R.id.countryTextView);

            tv.setTextColor(Color.BLUE);

           if(color.equals("Green"))
            {                   
                tv.setTextColor(Color.rgb(0,255,0));
                return true;
            } 
            return false;          
        }}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:53:13.630

你打电话了`conAdapter.setViewBinder(SimpleCursorAdapter.ViewBinder)`吗？也就是说，您确定这些方法实际上被调用了吗？

还要更改这些行之一：

```
 tv = (TextView)view.findViewById(R.id.countryTextView); // <-- add 'view.' 
```

# asp.net - textbox change apostrophe to html code

> ID：14285438
> 
> 赞同：0
> 
> 时间：2013-01-11T19:37:50.123
> 
> 标签：asp.net

When I set textbox.Text with data contains apostrophe from a gridviewrow, it change the apostrophe to &#39\. For example, the data in my database showing 40' and it shows 40&#39 instead when I assign to the textbox. How do I decode it? Thanks for any help. Here is my code.

```
protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
{
    GridViewRow row = GridView1.SelectedRow;

    textbox.Text = row.Cells[1].Text;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:45:40.830

您可以使用**[HttpUtility](http://msdn.microsoft.com/en-us/library/system.web.httputility.htmldecode%28v=vs.71%29.aspx)**类中的 HtmlDecode。

```
protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
{
    GridViewRow row = GridView1.SelectedRow;

    textbox.Text = HttpUtility.HtmlDecode(row.Cells[1].Text);
} 
```

# php - imap_headers 返回字符串格式

> ID：14285444
> 
> 赞同：1
> 
> 时间：2013-01-11T19:38:00.697
> 
> 标签：php, imap, email-headers

我正在尝试使用 imap_headers($imap_resource) 从收件箱中获取所有邮件标头，该 imap_headers($imap_resource) 返回格式化字符串的数组。

我想知道返回字符串的正确/正确格式，以便我可以解析/解码字符串并将其分解为日期/主题/发件人等。

有人知道这件事吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T21:58:14.653

只`imap_mime_header_decode(string $text)`用于这个。

这将返回一个对象数组，其中每个对象都有两个属性：`charset`和`text`。您可以开始这样做并使用 php 字符串函数来获得您想要的。

# javascript - 获取音频文件以使用自定义 html 5 视频控件

> ID：14285445
> 
> 赞同：0
> 
> 时间：2013-01-11T19:38:08.443
> 
> 标签：javascript, html, html5-video, html5-audio

我在页面上有一个 html5 视频和一个我想用作背景音乐的音频文件。是否可以将音频控件绑定到视频控件（静音、音量、播放、暂停等）。音频不能成为视频文件的一部分，因为视频暂停，我仍然希望播放和循环播放背景音乐。

```
<video id="video" data-setup="{}" >
  <source src="video/MyVideo.mp4" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"' />
  <source src="video/MyVideo.webmhd.webm" type='video/webm; codecs="vp8, vorbis"'>
  <source src="video/MyVideo.oggtheora.ogv" type='video/ogg; codecs="theora, vorbis"' />
  <p>Your browser doesn't support HTML5\. Maybe you should upgrade.</p>
</video>

<audio id="music" loop="loop">
    <source src="audio/background.ogg" type="audio/ogg" />
    <source src="audio/background.mp3" type="audio/mpeg" />
    <source src="audio/background.wav" type="audio/wav" />
    <p> Your browser doesn't support HTML5\.  Maybe you should upgrade.</p>
</audio>

        <input type="button" value="PLAY" id="playpause" onclick="playOrPause()" class="button_play">
        <input type="button" value="Mute" id="mutebutton" onclick="muteOrUnmute()" class="button_play">
        <input type="button" value="+" onclick="document.getElementById('video').volume+=0.2" class="button">
        <input type="button" value="-" onclick="document.getElementById('video').volume-=0.2" class="button"> 
```

和一些 JavaScript

```
 function playOrPause() {
        if (video.ended || video.paused) {
            video.play();
            document.getElementById("playpause").value="PAUSE";
        } else {
            video.pause();
            document.getElementById("playpause").value="PLAY";
                }   
        }

    var m = document.getElementById('mutebutton')[0];
    video.onvolumechange = function(e) {
    mutebutton.value = video.muted ? 'Unmute' : 'Mute';
        }

    function muteOrUnmute() {
        if (video.muted) {
            video.muted = false;
            document.getElementById("mutebutton").value="Mute";
        } else {
            video.muted = true
            document.getElementById("mutebutton").value="Unmute";
                }   
                return false;
        } 
```

我是 JavaScript 和 html5 的新手，因此我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:11:44.987

好的，所以我为我的音乐制作了一个变量

```
var a =document.getElementById("music"); 
```

并将我添加的播放功能连接在一起。`a.play()`到我的播放按钮和静音/取消静音按钮我这样做了

```
function muteOrUnmute() {
        if (video.muted) {
            video.muted = false;
            a.muted = false;
            document.getElementById("mutebutton").value="Mute";
        } else {
            video.muted = true;
            a.muted = true;
            document.getElementById("mutebutton").value="Unmute";
                }   
                return false;
        } 
```

对于音量上下控制，我这样做了：

```
 <input type="button" value="+" onclick="document.getElementById('video').volume+=0.2; document.getElementById('music').volume+=0.1" class="button">
    <input type="button" value="-" onclick="document.getElementById('video').volume-=0.2; document.getElementById('music').volume-=0.1" class="button"> 
```

# ios - Xcode 默认模拟位置

> ID：14285453
> 
> 赞同：14
> 
> 时间：2013-01-11T19:38:57.007
> 
> 标签：ios, xcode, app-store, core-location, gpx

我已经`Default Location`在应用程序的方案设置中设置了（见屏幕截图），然后将应用程序发送给 Apple 以获得批准。但是，我也使用 Ad Hoc 配置文件将相同的版本发送给 QA、项目经理和其他开发人员。现在，当我使用 Ad Hoc 版本启动应用程序时，它总是模拟哥德堡位置（GPX 文件），尽管我目前在斯德哥尔摩。

我的问题是，发送给 Apple 的版本是否受此影响？是否也会模拟哥德堡位置，还是会使用用户真实位置？

谢谢！

![那个设定](../Images/e511880d9f78e5f250d330145681fd8a.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-25T12:45:29.210

我碰巧将（我的私人应用程序的）版本发送给了具有 GPX 文件的 Apple，这是错误的。应用程序不受影响。从 XCode 进行调试时，似乎存在某种错误会覆盖设备上的 GPS 值。修复的唯一方法是重新启动设备（或者可能在没有 GPX 文件的情况下构建（？））。

所以答案是：不，应用程序不受影响。

# facebook - 使用共享 SSL 的 Facebook 页面选项卡

> ID：14285458
> 
> 赞同：1
> 
> 时间：2013-01-11T19:39:14.760
> 
> 标签：facebook, ssl, shared

我正在尝试在我的 Facebook 业务页面上设置页面选项卡。除了安全页面选项卡 URL 外，一切正常。我正在使用来自 hostgator (https://secure623.websitewelcome.com/~username/) 的共享 SSL。当我在浏览器中输入 url 时它工作正常，所以我知道它是有效的，但是当我尝试将它作为安全页面选项卡 URL 输入时，我收到一条错误消息，指出安全页面选项卡 URL 不是有效的 URL。我在网上搜索了一个解决方案，但找到了相互矛盾的答案。

我向 Hostgator 提交了一张票，但这是他们没有帮助的少数几次之一。我还向 FB 支持发送了一封电子邮件，但 2 天后没有收到任何回复。

有没有其他人遇到过这个问题？如果是这样，是否有办法在仍然使用共享 SSL 的同时解决它？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:29:13.933

我使用的网址是：[https ://secure636.hostgator.com/~username/](https://secure636.hostgator.com/~username/)

这在 HTTPS 领域。对应的 HTTP 字段是[http://yourdomain.com](http://yourdomain.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-01T22:27:42.867

使用 Hostgator 共享 SSL 时遇到同样的问题。

获得临时 URL 后，需要重写 htaccess mod。

这些是我尝试过的。我已经做了一个星期，只收到警告和错误。HG 支持通常不会处理 htaccess，这就是我在这里的原因。然后，您的 URL 应解析 https。

```
# Always use https for secure connections
# Replace 'www.example.com' with your domain name
# (as it appears on your SSL certificate)
RewriteEngine On
RewriteCond %{SERVER_PORT} 80
RewriteRule ^(.*)$ https://www.example.com/$1 [R=301,L]

RewriteEngine On 
RewriteCond %{SERVER_PORT} 80 
RewriteRule ^(.*)$ https://www.yourdomain.com/$1 [R,L] 
```

# ios - iOS Exploit：将应用内购买恢复到多个游戏帐户

> ID：14285460
> 
> 赞同：5
> 
> 时间：2013-01-11T19:39:17.523
> 
> 标签：ios, in-app-purchase

我正在 iOS 上创建一个服务器驱动的游戏，允许玩家创建一个用于多设备游戏的游戏帐户。我的游戏具有非消耗性的应用内购买 (IAP)，可以由原始购买者恢复或重新下载。

我希望玩家不能将他们的 IAP 恢复到多个游戏帐户。鉴于Apple的规则，这可能吗？

以英雄学院为例，是有可能的。

*   Player1 购买他的游戏帐户和 iTunes 帐户上的所有 IAP
*   玩家1登录玩家2的英雄学院游戏账号
*   Player1重新下载非消耗性IAP到Player2的游戏账号，赋予Player2所有IAP权限
*   Player2 在他自己的设备上登录他的游戏帐户，现在拥有所有 IAP 的权限

结果是：Player2 已免费获得所有 IAP。

我也许可以在他们的 iTunes 帐户中阅读并将 iTunes 恢复购买限制为单个游戏帐户。实施该解决方案似乎违反了 Apple 恢复非消耗性 IAP 的指导方针。

我可能认为购买是消耗品并且仅适用于单个帐户，但这似乎违反了 Apple 的指导方针，并且最终用户设计不佳。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-09T01:38:34.083

一个简单的解决方案是拥有一个软货币的消耗性 IAP，用户在游戏中花费该 IAP 来购买非消耗性物品。

即，我以 5 美元的价格购买了 100 个魔法币的消耗性 IAP 捆绑包，以购买价值 50 个魔法币的魔法豆物品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T02:13:48.277

我怀疑答案可能在于使用 NSUbiquitousKeyValueStore 之类的东西。这确实需要用户使用 iCloud，但我认为大多数用户都会这样做。如果我理解正确，这是一个基于 iCloud 的键值存储，因此会与一个特定的 AppleID 相关联。

通过保留您自己的英雄学院 ID，我认为您实际上可以将其与特定的 AppleID 同步。也就是说，在您的漏洞利用的第 2 步中，Player2 需要将他的 AppleID 和密码都提供给 Player1。许多人不愿意这样做。然而，有些是，为了防止这种情况，我认为你必须对你的游戏进行编程，以便它检查 NSUbiquitousKeyValueStore 的权限。换句话说，您必须在使用 AppleID 时将特别购买与您的 AppleID 积极关联。

你的游戏永远不会真正看到实际的 AppleID，但它可以通过你放置在其中的英雄学院播放 ID 来区分一个 iCloud 商店和另一个。

出于类似的原因，我正在尝试在我现在正在开发的应用程序中做类似的事情。我还没有进行足够的测试以确保上述方法有效，但到目前为止它似乎很有希望。

# html - 邮件中的图像上的图像

> ID：14285465
> 
> 赞同：4
> 
> 时间：2013-01-11T19:39:22.200
> 
> 标签：html, css, email

是否可以在电子邮件中（建议使用表格和内联 css 样式）将图像放在另一个图像之上？我们想像这个例子一样在图像上盖章：

![在此处输入图像描述](../Images/99d0abc40bb260301f4f3b649802da76.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:49:24.923

根据图像的数量，您可能希望通过动态添加所需叠加层的 HTTP 处理程序来提供图像。这使您可以避免任何电子邮件客户端 HTML 问题以及必须手动编辑（可能很大且不断变化的数量）图像。

您可以缓存图像处理操作的结果以提高性能。

如果您有数十或数百张图像，并且/或者您经常更改覆盖内容，则此方法将开始大放异彩。否则，静态图像将是最简单的（记录 Photoshop 动作并完成）。

例子：

```
<!-- before -->
<img src="http://foo.com/static.jpg">

<!-- after -->
<img src="http://foo.com/handler?id=123&overlay=xyz"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T19:41:55.577

**不**，您必须创建一个“图像表”，我的意思是 2`<td>`内有 4 个元素，`<TR>`并将您的图像分成 4 个部分。（只要您的背景颜色与贴纸和所有其他图像匹配......等等......所以不。）

我建议您在您最喜欢的图像编辑器中进行操作 :) 就像您的 Q. 示例一样

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T19:44:51.843

您应该避免`absolute`在电子邮件中定位，因为大多数客户不会呈现它。你应该做的是获得一个图像编辑器并将它们组合成一个图像。

roXon 建议建立一个图像表，但这里可能没有必要。当您想要在两个或多个侧面被单个大图像包围的文本时，我发现这些特别方便。

# asp.net-mvc - 在控制器之前使用 2 个静态文字创建路由

> ID：14285466
> 
> 赞同：0
> 
> 时间：2013-01-11T19:39:24.860
> 
> 标签：asp.net-mvc, asp.net-web-api, asp.net-mvc-routing

好的，我认为这将是直截了当的，但我错过了一些东西。我正在映射一个 Web API 路由并希望它如下所示：

```
http://localhost:1234/api/myBlog/Articles 
```

并认为这会起作用：

```
routes.MapRoute(
   name: "BlogApi",                
   url: "api/myBlog/{controller}/{id}",
   defaults: new { controller = "Articles", id = UrlParameter.Optional }
); 
```

“myBlog”段不是控制器或文件夹。我只是希望它成为 URL 的一部分。我尝试使用控制器在 Controllers 下创建一个名为“myBlog”的文件夹，`ArticlesController`但这并没有什么不同。我总是得到一个 404 未找到：***找不到与名为“myBlog”的控制器匹配的类型。***

当我不使用`http://localhost:1234/api/myBlog`路由中的默认控制器时也很奇怪`Articles`，所以也想知道这一点。

如果我执行以下操作，我只能让它工作：

```
routes.MapRoute(
   name: "BlogApi",                
   url: "api/Articles/{id}",
   defaults: new { controller = "Articles", id = UrlParameter.Optional }
); 
```

并致电：`http://localhost:1234/api/Articles`

我在这里想念什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:44:24.940

采用：

```
GlobalConfiguration.Configuration.Routes.MapHttpRoute(
   name: "BlogApi",                
   routeTemplate: "api/myBlog/Articles/{id}",
   defaults: new { controller = "Articles", id = UrlParameter.Optional }
); 
```

and put it **before** the default route.

# java - 实现一个通用的 switch case

> ID：14285467
> 
> 赞同：0
> 
> 时间：2013-01-11T19:39:35.500
> 
> 标签：java, switch-statement

我想在 Java 中创建一个通用的 switch case 语句。我正在制作一个程序，在某些时候我必须为 switch 语句制作 32 种不同的情况，例如：`case 0 : , case 1 : , .... case 31 :`. 然后在每种情况下，我都必须编写一些代码行。有什么方法可以实现一个通用的 switch case 语句，这样我就不必编写 32 个单独的案例了？

例如：

```
switch(n){
case k :
.....
{ 
```

我怎样才能在java中实现这个？可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T19:41:15.697

为什么不只使用一个`default`分支：

```
switch (n) {
  // cases for which you need custom behavior...
  default:
    // use n for the general case
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T19:58:25.230

您可以使用枚举。例如，这是一个将数字名称与其整数值匹配的枚举：

```
enum MyDigit
{
    ZERO(0),
    ONE(1),
    TWO(2),
    // etc
    NINE(9);

    private final int intValue;

    MyDigit(int intValue)
    {
        this.intValue = intValue;
    }

    public int intValue()
    {
        return intValue;
    }
} 
```

枚举非常灵活。例如，您还可以构建所有值的反向映射并使用静态查找方法来获取所需的枚举值。

（是的，有些人会说整数值在这里是多余的，因为我可以使用`values()`/ `ordinal()`，但这是为了说明）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T19:56:32.327

当您看到一个包含 32 种情况的 switch 语句以及一个可能需要经常扩充的语句时，它通常表示[代码或设计有“气味”](http://en.wikipedia.org/wiki/Code_smell)。您可能必须在代码的多个位置复制此开关结构，然后您将以高昂的维护成本和违反[开放/封闭原则](http://en.wikipedia.org/wiki/Open/closed_principle)和[单一责任原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)的脆弱代码告终（作为需求的单一更改）可能会迫使您在多个位置随机编码）。

解决此问题的方法是将代码分解为多个类以利用[多态性](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)。当您进行分解时，您必须考虑哪种[设计模式](http://en.wikipedia.org/wiki/Software_design_pattern)将为您提供最合适的 switch 语句替换。一些潜在的候选人（因为我不知道你的代码的性质）是：[Command](http://en.wikipedia.org/wiki/Command_pattern)，[Strategy](http://en.wikipedia.org/wiki/Strategy_pattern)，[Visitor](http://en.wikipedia.org/wiki/Visitor_pattern)；但也有其他的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T00:12:29.487

> 在每种情况下，我都必须写 2 行，它们的变量取决于情况……所以在情况 0 下，我稍后要使用的变量是 0*L(l 是我想要的变量，首先是它的 L= 8)...那么案例 1 是 1*L ...案例 2 : 2*L 依此类推

好吧，检查您输入的数字是否是 0 到 32 之间的数字，然后执行 n*L

```
int result = 0;
if(n>=0&&n<32){
    result=n*L;
}else{
    System.err.println("wrong number");
    //or do whatever you have to
} 
```

# ios - MPMoviePlayerViewController 播放头（时间）通知

> ID：14285469
> 
> 赞同：1
> 
> 时间：2013-01-11T19:39:40.593
> 
> 标签：ios, mpmovieplayercontroller, nsnotifications, mpmoviewcontroller

我只是想知道我的电影的播放头发生了什么变化，但我没有在任何地方找到在线通知列表（我认为苹果肯定会有这些信息）。

无论如何，有人知道我应该关注的通知名称吗？我确定这很简单。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T12:36:18.317

没有关于播放进度或预缓冲进度的通知。这两个信息都可以通过`MPMoviePlayerController`（[参见其参考](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html)）及其实现的协议`MPMediaPlayback`（[参见其参考](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMediaPlayback_protocol/Reference/Reference.html#//apple_ref/occ/intf/MPMediaPlayback)）的简单属性获得。

```
currentPlaybackTime 
```

> 播放头的当前位置。（必需的）

```
@property(nonatomic) NSTimeInterval currentPlaybackTime 
```

> 讨论
> 
> 对于视频点播或逐步下载的内容，此值以从当前项目开始的秒数为单位进行测量。更改此属性的值会将播放头移动到新位置。对于从服务器实时流式传输的内容，此值表示播放列表首次加载时从开始的时间。

* * *

```
playableDuration 
```

> 当前可播放内容的数量。（只读）

```
@property (nonatomic, readonly) NSTimeInterval playableDuration 
```

> 讨论
> 
> 对于逐步下载的网络内容，该属性反映了现在可以播放的内容量。

* * *

# ios - xy = z 和 [x setY:z] 有什么区别？在目标-C？

> ID：14285472
> 
> 赞同：2
> 
> 时间：2013-01-11T19:39:51.813
> 
> 标签：ios, objective-c

> **可能重复：样式：Objective-C 2.0** [Objective-C 属性访问](https://stackoverflow.com/questions/1398305/objective-c-property-access)
> [中的点表示法与消息表示法](https://stackoverflow.com/questions/1249392/style-dot-notation-vs-message-notation-in-objective-c-2-0)

在对 noob-question 竖起大拇指之前：我不知道在这个问题上要搜索什么。无论如何，假设我正在尝试更改 imageview 的背景颜色，有什么区别：

```
imageView.backgroundColor = [UIColor orangeColor]; 
```

和

```
[imageView setBackgroundColor:[UIColor orangeColor]]; 
```

我知道第一个可以用来获取实际值，我可以说

```
UIColor *imageViewColor = imageView.backgroundColor; 
```

并且我不能对另一个这样做，但是为什么另一个存在呢？或者使用第一个作为设置值的方式是完全错误的？但是，为什么它会起作用？

顺便说一下，这个问题与改变和 imageView 的背景颜色无关，我只是在问一般情况，实际区别是什么..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T19:43:00.623

绝对没有。它们是等价的。

（嗯，*语法*不同。）

顺便一提，

> 我不能和另一个人一起做这个

不是真的。两种表示法都有 setter 和 getter 语法：

```
object.property = value; 
```

相当于

```
[object setProperty:value]; 
```

和

```
variable = object.property; 
```

相当于

```
variable = [object property]; 
```

此外，

> 但是为什么另一个存在呢？

因为在旧版本的 Objective-C（“Objective-C 1.0”）中没有属性。必须手动实现 setter 和 getter 方法，这是普遍接受的命名约定。

> 或者使用第一个作为设置值的方式是完全错误的？

不，不是。

> 但是，为什么它会起作用？

因为它不是“错误的”，这就是原因。（但是，你为什么不谷歌呢？）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T19:42:56.980

点表示法是访问值的一种简写方式`@property`- 请参阅这个相关的 SO 问题：[Objective-C Property Access](https://stackoverflow.com/questions/1398305/objective-c-property-access)

> 编译器在编译时将 foo.property 转换为 [foo property]

[声明属性的点表示法与消息表示法](https://stackoverflow.com/questions/1249392/style-dot-notation-vs-message-notation-in-objective-c-2-0)的问题讨论了选择一种样式而不是另一种样式的优点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T19:46:10.440

简短的回答是两者在执行方面完全相同。

现在，更准确地说，Objective-C 在 2.0 中添加了属性。点语法是在属性上调用访问器方法的简写方式。访问器方法是用于获取或设置属性值的方法。有时您会听到它们被称为 getter 和 setter。

那么当你说 时会发生什么`imageView.backgroundColor = someColor`？基本上，编译器会查找 setBackgroundColor 方法并调用该方法。同样，如果您说`UIColor *color = imageView.backgroundColor`，编译器会查找一个调用的方法，该方法`backgroundColor`返回一个 UIColor 并调用该方法。

这里要意识到的是，点语法真的应该只在调用属性的访问器方法时使用。Objective-C 确实允许您使用点语法进行一般消息发送，但这往往会掩盖项目中正在发生的事情，并使代码可维护性成为一个大问题。

# ruby-on-rails - 基于 ruby 的服务器的自适应图像

> ID：14285473
> 
> 赞同：2
> 
> 时间：2013-01-11T19:39:53.417
> 
> 标签：ruby-on-rails, ruby, sinatra, responsive-design, rack

我想根据用户屏幕的大小向客户端提供图像，例如如果我有高分辨率图像，并且用户想在移动设备上查看它，我不想发送全高清图像，而是我想发送缩小到用户设备尺寸的图像，这将提高低带宽设备的加载速度

这里有一个解决方案自适应图像检测访问者[的](http://adaptive-images.com/)

*屏幕尺寸并自动创建、缓存和提供适合设备的网页嵌入 HTML 图像的重新缩放版本。它旨在与响应式设计一起使用并与 Fluid 结合使用图像技术。*（来自给定的链接）

我看到了这种基于`php`&`apache`的服务器的解决方案，是否有针对具有基于 ruby​​ 的服务器的 Web 应用程序的解决方案？一个`gem`可能...谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T04:06:48.377

媒体查询仅适用于 CSS 背景图像。

顺便说一下，自适应图像之类的解决方案并不难实现。

他们只是动态地提供图像来代替 Web 服务器，缓存经过调整的图像以加快处理速度并避免浪费资源。

根据保存请求设备分辨率的 cookie 的值来调整和缓存图像的大小。

假设您在 Rails 中，请执行以下步骤：

1.  将此 javascript 行附加到`<head>`布局中的部分：

    `<script>document.cookie='resolution='+Math.max(screen.width,screen.height)+'; path=/‘;</script>`

2.  添加`AdaptiveImagesController`一个动作`adapt_and_serve`。

3.  让我们`adapt_and_serve`读取/缓存/调整并服务（带有遥远的未来到期标头）与每个请求对应的文件。

4.  添加规则以`routes.rb`捕获需要调整的图像请求并将它们路由到 AdaptiveImagesController#adapt_and_serve

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-11T20:03:05.180

我认为服务没有什么特别的`adaptive images`。这取决于您如何设置前端：您用于`media queries`解析用户的屏幕尺寸并决定图像大小。您可以肯定地为您的目的使用 Rails 框架。有许多响应式设计实现与 Rails 配合得很好 - [Twitter Bootstrap](http://twitter.github.com/bootstrap/index.html)是一个著名的实现。

# fancybox-2 - 使用 fancybox2 跳过 404 链接

> ID：14285474
> 
> 赞同：1
> 
> 时间：2013-01-11T19:39:59.023
> 
> 标签：fancybox-2

我的图像位于另一台服务器上（不同的域，所以我不能使用 javascript 来检查），如果加载错误，我希望 fancybox 跳过图像并继续下一个。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:51:37.777

编辑：所以我最初的答案很糟糕，我正在摆脱它。忘记它曾经发生过。这个概念很不错，但我忘记了跨域策略，所以我结合了其他一些方法来完成这项工作。这不需要您编写自己的后端代码，但我建议您将 YUI 替换为您自己的类似代码。用jsfiddle测试。

这里的基础是您需要确保您可以通过确保服务器按您预期的方式响应来完成这项工作。因此，我使用您的 gravatar 和我的作为测试，并使用 YUI 框架来执行实际请求（通过 jquery 中的 json 请求）。

```
var images = ["https://en.gravatar.com/userimage/3532627/52159e585800d69265e0a1819c4dde54.jpg?size=80","http://www.gravatar.com/avatar/e08d91a83ce8dd7b88aaaae4aec58074?s=128&d=identicon&r=PG"],
    imagelen = images.length,
    newimages = [];
while(imagelen--) {
  var url = images[imagelen];
  $.getJSON("http://query.yahooapis.com/v1/public/yql?"+
            "q=select%20*%20from%20html%20where%20url%3D%22"+
            encodeURIComponent(url)+
            "%22&format=xml'&callback=?",
    function(data){
      console.log(data);
      if(data.results[0]){
        // sweet
        newimages.push(images[imagelen]);
        images.splice(imagelen,1); 
        if (images.length === 0) { // last one, fire callback
          doFancyBoxStuff();
        }
      } else {
        // d'oh!
        images.splice(imagelen,1); 
        if (images.length === 0) { // last one, fire callback
          doFancyBoxStuff();
        }
      }
    }
  );
}
function doFancyBoxStuff() {
  console.warn("fired callback");
} 
```

# actionscript-3 - AS3 组件参数根据另一个参数值启用/禁用

> ID：14285476
> 
> 赞同：1
> 
> 时间：2013-01-11T19:40:03.820
> 
> 标签：actionscript-3, flash-component

是否可以根据另一个参数的值隐藏/显示或启用/禁用组件参数？例子：

选中“showTextField”将显示格式参数（或允许更改它们）

未选中将隐藏格式参数（或不允许更改它们 - 灰显）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T00:51:05.203

如果您使用的是 Flex，您可以利用[数据绑定](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7cc0.html)

这将允许您将一个对象的属性绑定到另一个对象。

当对象中的值发生更改时，这也可以调度[PropertyChangeEvent 。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/events/PropertyChangeEvent.html)

如果您正在使用纯 AS3 项目，您可能需要查看这个 3rd 方库

[http://nanosome.org/notify/](http://nanosome.org/notify/)

# ruby-on-rails - 在@object.variable 的情况下，可以推断变量吗？

> ID：14285478
> 
> 赞同：1
> 
> 时间：2013-01-11T19:40:14.793
> 
> 标签：ruby-on-rails, ruby

我有一个看起来像这样的哈希：

```
extras = {'facebook' => '', 'twitter' => ''} 
```

我的用户属性是这样的：

```
class User < ActiveRecord::Base
  attr_accessible :facebook, :twitter, #... 
```

我想以以下方式检索在我的附加哈希中定义的数据（或更好的方式 - 这是我想到的方式）

```
extras.each do |k,v|
    extras[k] = @user.k
end 
```

这甚至可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T19:48:31.140

是的，您可以使用[`.send(:method)`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-send)或来做到这一点[`.try(:method)`](http://apidock.com/rails/v3.2.13/Object/try)：

```
# with this kind of hash:
extras = {'facebook' => '', 'twitter' => ''} 
```

您可以这样做来收集用户的信息：

```
extras.each_key do |key|
  extras[key] = @user.send(key.to_sym)      
end 
```

或者使用[`.try()`](http://apidock.com/rails/v3.2.13/Object/try)，更安全：在向用户发送未知密钥的情况下，它**不会引发 NoMethodError ：**

```
extras.each_key do |key|
  extras[key] = @user.try(key.to_sym)
end 
```

你也可以用地图来做到这一点：

```
extras.each_key{ |k| extras[k] = @user.send(k.to_sym) } 
```

我发了一篇关于这段代码的帖子，你可以在这里看到： [http ://rails.co.nf/?p=31](http://rails.co.nf/?p=31)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T20:55:36.100

`Object#send`可以带一个字符串。不确定`try`@MrYoshiji 是否提到过

```
extras.each_key { |k| extras[k] = @user.send(k) } 
```

注意要通过方法名称读取变量，您需要使用类似的东西创建该方法`attr_accessible :facebook, :twitter`

# javascript - Google oauth2 javascript 客户端在 IE 9 中不起作用

> ID：14285480
> 
> 赞同：7
> 
> 时间：2013-01-11T19:40:27.463
> 
> 标签：javascript, internet-explorer, oauth-2.0, google-oauth

尽管以下代码使用 Chrome 可以正常工作（显示一个请求用户许可访问地图和位置数据的弹出窗口），但 IE 9 会打开弹出表单，但它是空的；调用 handleAuthClick 方法时。我试过添加 setTimeouts 但没有效果。我确保允许弹出窗口，并检查了在 Chrome 和 IE 中相同的弹出页面 url。有没有人遇到过这个问题？或者有人可以提供解决方法吗？

```
var clientId = '############.apps.googleusercontent.com';
var apiKey = '#A#A#A#A##';
var scopes = 'https://www.googleapis.com/auth/plus.me';

function handleClientLoad() {
    gapi.client.setApiKey(apiKey);
    window.setTimeout(checkAuth, 1);
}

function checkAuth() {
    gapi.auth.authorize({ client_id: clientId, scope: scopes, immediate: true }, handleAuthResult);
}

function handleAuthResult(authResult) {
    if (authResult && !authResult.error) {
        makeApiCall();
    } else {
    }
}

function handleAuthClick(event) {
    try {
        window.setTimeout(function () {
            gapi.auth.authorize({ client_id: clientId, scope: scopes, immediate: false }, handleAuthResult);
        }, 10);
    } catch (e) { alert(e.message); }
}
function makeApiCall() {
    gapi.client.load('plus', 'v1', function () {
        var request = gapi.client.plus.people.get({
            'userId': 'me'
        });
        request.execute(function (resp) {
            $(".google-signin").find("img").attr('src', resp.image.url).css('height', '32').css('width', '32');
            $("#login-msg").text('Welcome: ' + resp.displayName);
            $("img.vote").css('visibility', 'visible');

        });
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:16:50.427

最终解决此问题的方法是将 setTimeout 持续时间从 10 增加到 1000。Google 授权弹出窗口显示了正确的登录信息，而不是空白屏幕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-25T18:18:57.943

客户端 Web 应用程序和 Google 之间的跨域脚本可能会被区域安全性阻止。

请确保 google.com 和运行脚本的网页都属于同一安全区域（通常是 Internet 区域。）如果您不确定，请参阅 serverfault#612903 [https://serverfault.com/questions/612903 /ie11-how-to-check-into-which-zone-a-url-falls](https://serverfault.com/questions/612903/ie11-how-to-check-into-which-zone-a-url-falls)

还要确保将 Web 应用程序和 Google 分类的区域配置为允许执行脚本，并确保 google.com 允许第三方 cookie 访问，因为这用于检查授权。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T19:46:32.913

请注意，您使用的 maps/feeds 范围适用于已弃用的 Google Maps Data API，它与[Places API不同](https://developers.google.com/places/documentation/)

关于您的实际问题，我正在重新标记以用 Plus API 替换 Places API，因为这就是您在这里使用的。

# mysql - mysql查询 - 没有得到它应该提供的结果

> ID：14285484
> 
> 赞同：2
> 
> 时间：2013-01-11T19:40:34.337
> 
> 标签：mysql, sql

```
 SELECT ex.`ID`, ex.`ExpenseName`, om.`Taka`, SUM( om.`Taka` ) AS 'Total Taka' 
    FROM (office_expense_main om) 
        JOIN (office_expenses ex) 
               ON (ex.ID=om.OfficeExpenseID) 
        JOIN (yyyy_mm_officeexpense ym) 
               ON ( ym.Year_Month = '" + _yearMonth + "' AND om.YearMonthID <= ym.ID ) 
    GROUP BY om.`OfficeExpenseID` 
```

此查询应显示 [om. `Taka`] 的给定 [ym.Year_Month] 和 sum[om. `Taka`] - 直到给定的 Year_Month 之前的所有 Taka 的总和。按 om.ID 分组

现在，它显示第一个 Year_Month 的“Taka”（例如，如果我想看到 March 的“taka”和 sum('Taka') 直到 3 月，它会显示 1 月的“Taka”（yyyy_mm 表中的第一个条目）不是为了三月。但显示总和（'Taka'）正是我想看到的）而不是我提供的那个。但是 sum(Taka) 直到给定的 YearMonth。！

但它显示了与昨天完全相同的结果！但我没有改变任何东西，我不明白为什么它现在显示不同..

有谁能够帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T20:28:09.653

由于 MySQL 中称为隐藏列的（错误）功能，您的查询失败。列名 om.Taka 不是聚合列，因此 MySQL 返回任意值。好吧，通常它是您看到的第一个值，但这不能保证。

您需要重新加入 office_expense_main 表。我认为以下可能是您想要的：

```
SELECT ex.id, ex.`ExpenseName`, omlatest.om.taka, SUM( om.`Taka` ) AS 'Total Taka' 
FROM office_expense_main om JOIN
     office_expenses ex
     ON ex.ID = om.OfficeExpenseID JOIN
     yyyy_mm_officeexpense ym
     ON ym.Year_Month = '" + _yearMonth + "' AND om.YearMonthID <= ym.ID join
     office_expenses omlatest
     on om.YearMonthId = ym.id and exiID = omlatest.OfficeExpenseId
GROUP BY ex.id 
```

我没有测试过这个查询，所以它可能有语法错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T19:44:27.797

我认为这个 SQL 不会编译。查看您的`GROUP BY`陈述，您应该`GROUP BY`选择的字段：

```
GROUP BY ex.ID, ex.ExpenseName , om.Taka 
```

另外，我不认为您打算在同一字段上使用 SUM 运算符和 GROUP BY 运算符。不知道还会发生什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T20:26:24.347

您的查询在运行时会得到不同的结果，因为您的选择字段 ( `om.taka`) 是在组函数 ( `sum(om.taka)`) 中使用的字段。这就是我的意思。假设你有这个：

```
mysql> 从 foo 中选择 *；
+------+------+
| 一个 | 乙 |
+------+------+
| 1 | 2 |
| 1 | 3 |
+------+------+

```

如果您使用 group 函数中的字段进行选择，则可以得到：

取决于mysql如何决定行的顺序。具体来说，看这个：

```
mysql> select a, b, sum(b) from foo group by a;
+--------+------+--------+
| 一个 | 乙 | 总和(b) |
+--------+------+--------+
| 1 | 2 | 5 |
+--------+------+--------+
一组中的 1 行（0.01 秒）

```

但这是因为处理行的顺序。如果顺序颠倒，那么你会得到不同的结果。

```
mysql> select a, b, sum(b) from (select * from foo order by b asc) t group by a;
+--------+------+--------+
| 一个 | 乙 | 总和(b) |
+--------+------+--------+
| 1 | 2 | 5 |
+--------+------+--------+
一组中的 1 行（0.00 秒）

mysql> select a, b, sum(b) from (select * from foo order by b desc) t group by a;
+--------+------+--------+
| 一个 | 乙 | 总和(b) |
+--------+------+--------+
| 1 | 3 | 5 |
+--------+------+--------+
一组中的 1 行（0.01 秒）

mysql>

```

教训是，如果您选择在组函数中使用的字段，您将获得任意结果。

# php - 图像保存不适用于 chmod 755，但适用于 777。我该怎么办？

> ID：14285486
> 
> 赞同：0
> 
> 时间：2013-01-11T19:40:38.960
> 
> 标签：php, chmod

我有一个网站，用户可以在其中裁剪图像。我通常将裁剪后的图像保存在具有“755”chmod 参数的文件夹下。

但是，当它是 755 时，它不起作用 - 当我 chmod 到 777 时它起作用，我相信 777 非常不安全，所以我不想使用它。

有什么问题？

附言。系统是这样工作的。服务器中有一些图片，PHP允许用户裁剪这些图像，当他们点击保存时，它应该保存在/cropped”文件夹中。它适用于777但不适用于755。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T19:46:27.683

文件权限指定文件所有者可以做什么，以及其他人可以做什么（组和世界其他地方）。您仍然必须指定正确的所有者。

您可能必须将文件夹的所有者更改为您的服务器进程的用户（可能是 www-data，如果您使用的是 apache）。然后 755 应该可以工作。

```
chown www-data:www-data /cropped 
```

**编辑：**如果`chown -R`里面有子文件夹`/cropped`并且您也想更改它们的权限，请使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T06:17:31.573

您已经从其他用户那里得到了答案。因此，我无需在这里为您进一步重复。

但是，您实际上应该了解 755 和 777 的含义，而不是将其视为某种伪安全级别设置。777 并不立即意味着不安全。坦率地说，我认为您将图像上传文件夹设置为 777 没有直接问题。

所有者、root、php 执行者等并不等同，但可能相同。

这些词以英语为基础，您应该以英语的价值而不是一些外国的编程世界结构来看待它们。

根用户就像一个独裁者。他说什么都行。没有人可以说别的。

当有一个对象时，就有一个所有者用户。并且您设定所有者可以做什么的法律：读、写或执行。您还可以为特定群体的行为制定法律。最后，您还可以为其他人可以做的事情制定法律。

现在独裁者不会到处做所有的工作。运行 PHP 的人可以是一个人。拥有该文件的人可以是另一个人。他们当然可以是同一个人，但这样的定义并不等同。我希望你能看到区别。

这是另一个类比。想想私人公园。如果您允许每个人（即 777）进入公园并在公园内玩耍，您是否会构成某种安全风险？不。如果你有一个保险箱，你会允许谁？只是你自己（所有者），对吧？所以，这就像 linux 权限中的 700 一样。除了你自己，没有其他人有任何许可（除了独裁者，因为他可以来你家，杀了你，拿走你的东西，如果他愿意的话）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T19:43:40.160

755表示所有者可以读/写/执行，组和每个人（公共）只能读/执行。检查您的 httpd 的凭据。777 并不一定意味着它不安全，只需确保使用 .htaccess 或什至配置（每个文件夹）禁用该文件夹内`-ExecCGI`的`php_flag engine off`PHP`php.ini`解析

你可以试试775看看组设置是否够用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T19:46:48.507

您的 /cropped 目录需要归运行 PHP 的用户所有。

这通常是 www-data，但您需要检查您的设置。

# c# - 将双精度数舍入到以位数给出的较低精度的有效方法

> ID：14285492
> 
> 赞同：7
> 
> 时间：2013-01-11T19:41:12.753
> 
> 标签：c#, floating-point, rounding

在 C# 中，我想将双精度数舍入到较低的精度，以便可以将它们存储在关联数组中不同大小的存储桶中。与通常的四舍五入不同，我想四舍五入到一些有效位。因此，大数的绝对值比小数的变化要大得多，但它们往往会按相同的比例发生变化。因此，如果我想四舍五入到 10 个二进制数字，我会找到 10 个最高有效位，并将所有低位清零，可能会添加一个小数字进行四舍五入。

我更喜欢四舍五入的“中途”数字。

如果它是整数类型，这将是一个可能的算法：

> ```
>  1\. Find: zero-based index of the most significant binary digit set H.
>   2\. Compute: B = H - P, 
>        where P is the number of significant digits of precision to round
>        and B is the binary digit to start rounding, where B = 0 is the ones place, 
>        B = 1 is the twos place, etc. 
>   3\. Add: x = x + 2^B 
>        This will force a carry if necessary (we round halfway values up).
>   4\. Zero out: x = x mod 2^(B+1). 
>        This clears the B place and all lower digits. 
> ```

问题是找到一种有效的方法来找到最高位集。如果我使用整数，有很酷的技巧可以找到 MSB。如果可以的话，我不想打电话给 Round(Log2(x)) 。该函数将被调用数百万次。

注意：我已经阅读了这个 SO 问题：

[将双精度值舍入到（有点）较低精度的好方法是什么？](https://stackoverflow.com/questions/14150136/what-is-a-good-way-to-round-double-precision-values-to-a-somewhat-lower-precis)

它适用于 C++。我正在使用 C#。

更新：

这是我正在使用的代码（根据回答者提供的内容修改）：

```
/// <summary>
/// Round numbers to a specified number of significant binary digits.
/// 
/// For example, to 3 places, numbers from zero to seven are unchanged, because they only require 3 binary digits,
/// but larger numbers lose precision:
/// 
///      8    1000 => 1000   8
///      9    1001 => 1010  10
///     10    1010 => 1010  10
///     11    1011 => 1100  12
///     12    1100 => 1100  12
///     13    1101 => 1110  14
///     14    1110 => 1110  14
///     15    1111 =>10000  16
///     16   10000 =>10000  16
///     
/// This is different from rounding in that we are specifying the place where rounding occurs as the distance to the right
/// in binary digits from the highest bit set, not the distance to the left from the zero bit.
/// </summary>
/// <param name="d">Number to be rounded.</param>
/// <param name="digits">Number of binary digits of precision to preserve. </param>
public static double AdjustPrecision(this double d, int digits)
{
    // TODO: Not sure if this will work for both normalized and denormalized doubles. Needs more research.
    var shift = 53 - digits; // IEEE 754 doubles have 53 bits of significand, but one bit is "implied" and not stored.
    ulong significandMask = (0xffffffffffffffffUL >> shift) << shift;
    var local_d = d;
    unsafe
    {
        // double -> fixed point (sorta)
        ulong toLong = *(ulong*)(&local_d);
        // mask off your least-sig bits
        var modLong = toLong & significandMask;
        // fixed point -> float (sorta)
        local_d = *(double*)(&modLong);
    }
    return local_d;
} 
```

更新 2：Dekker 算法

感谢另一位受访者，我从 Dekker 的算法中得出了这一点。它舍入到最接近的值，而不是像上面的代码那样截断，它只使用安全代码：

```
private static double[] PowersOfTwoPlusOne;

static NumericalAlgorithms()
{
    PowersOfTwoPlusOne = new double[54];
    for (var i = 0; i < PowersOfTwoPlusOne.Length; i++)
    {
        if (i == 0)
            PowersOfTwoPlusOne[i] = 1; // Special case.
        else
        {
            long two_to_i_plus_one = (1L << i) + 1L;
            PowersOfTwoPlusOne[i] = (double)two_to_i_plus_one;
        }
    }
}

public static double AdjustPrecisionSafely(this double d, int digits)
{
    double t = d * PowersOfTwoPlusOne[53 - digits];
    double adjusted = t - (t - d);
    return adjusted;
} 
```

更新 2：时间

我跑了一个测试，发现 Dekker 的算法比 TWICE 快！

> 测试中的调用次数：100,000,000
> 不安全时间 = 1.922（秒）
> 安全时间 = 0.799（秒）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T20:02:11.037

Dekker 算法将浮点数拆分为高位和低位部分。如果有效数字中有*s*位（IEEE 754 64 位二进制中的 53 位），则`*x0`接收高*s* - *b*位，这是您请求的，并`*x1`接收剩余位，您可以丢弃这些位。在下面的代码中，`Scale`应该有值 2 ^b。如果*b*在编译时已知，例如常量 43，则可以替换`Scale`为`0x1p43`. 否则，您必须以某种方式产生 2 ^b。

这需要四舍五入到最近的模式。IEEE 754 算术就足够了，但其他合理的算术也可能没问题。它将关系四舍五入，这不是您所要求的（向上关系）。那有必要吗？

这假设`x * (Scale + 1)`不会溢出。必须以双精度（不更高）对操作进行评估。

```
void Split(double *x0, double *x1, double x)
{
    double d = x * (Scale + 1);
    double t = d - x;
    *x0 = d - t;
    *x1 = x - *x0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T20:10:15.780

有趣...从未听说过需要这样做，但我认为您可以通过一些时髦的不安全代码“做到”...

```
void Main()
{
    // how many bits you want "saved"
    var maxBits = 20;

    // create a mask like 0x1111000 where # of 1's == maxBits
    var shift = (sizeof(int) * 8) - maxBits;
    var maxBitsMask = (0xffffffff >> shift) << shift;

    // some floats
    var floats = new []{ 1.04125f, 2.19412347f, 3.1415926f};
    foreach (var f in floats)
    {
        var localf = f;
        unsafe
        {
            // float -> fixed point (sorta)
            int toInt = *(int*)(&localf);
            // mask off your least-sig bits
            var modInt = toInt & maxBitsMask;
            // fixed point -> float (sorta)
            localf = *(float*)(&modInt);
        }
        Console.WriteLine("Was {0}, now {1}", f, localf);
    }
} 
```

和双打：

```
void Main()
{
    var maxBits = 50;
    var shift = (sizeof(long) * 8) - maxBits;
    var maxBitsMask = (0xffffffffffffffff >> shift) << shift;
    var doubles = new []{ 1412.04125, 22.19412347, 3.1415926};
    foreach (var d in doubles)
    {
        var local = d;
        unsafe
        {
            var toLong = *(ulong*)(&local);
            var modLong = toLong & maxBitsMask;
            local = *(double*)(&modLong);
        }
        Console.WriteLine("Was {0}, now {1}", d, local);
    }
} 
```

哇...我不被接受。:)

为了完整起见，这里使用 Jeppe 的“不安全”方法：

```
void Main()
{
    var maxBits = 50;
    var shift = (sizeof(long) * 8) - maxBits;
    var maxBitsMask = (long)((0xffffffffffffffff >> shift) << shift);
    var doubles = new []{ 1412.04125, 22.19412347, 3.1415926};
    foreach (var d in doubles)
    {
        var local = d;
        var asLong = BitConverter.DoubleToInt64Bits(d);
        var modLong = asLong & maxBitsMask;
        local = BitConverter.Int64BitsToDouble(modLong);
        Console.WriteLine("Was {0}, now {1}", d, local);
    }
} 
```

# linux - 詹金斯主从和环境。变量

> ID：14285496
> 
> 赞同：2
> 
> 时间：2013-01-11T19:41:16.870
> 
> 标签：linux, jenkins, gradle

在 ubuntu jenkins master 上，我配置了 gradle 应该自动安装到：

```
GRADLE_HOME: /var/jenkins/tools/mygradle 
```

![在此处输入图像描述](../Images/d5dc22c4d6cd6bfe567fa19b2cb506d8.png)

结果 gradle 安装在所有 ubuntu 从站上：

```
/var/jenkins/tools/mygradle/bin/gradle 
```

这工作正常，我的 gradle 作业建立在从节点上。

现在我需要在作业中调用 .sh 脚本（构建步骤 - 执行 shell）。在某些时候，脚本会调用 gradle，因此需要它在 PATH 中。但是当我执行作业时（在其中一个构建奴隶上）找不到 gradle。

是否可以在所有从属设备上自动安装 gradle，并且还可以将 gradle 添加到所有从属设备的 PATH 中？

所有从站都是**通过 SSH 在 unix 机器上使用 Launch slave 代理启动的**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:40:40.383

这有效：

[https://wiki.jenkins-ci.org/display/JENKINS/Tool+Environment+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Tool+Environment+Plugin)

至少现在。缺点是必须为每个作业配置它。

# jquery - 在 Google App Scripts 上使用 jQuery 手风琴内的表单结构

> ID：14285497
> 
> 赞同：0
> 
> 时间：2013-01-11T19:41:18.800
> 
> 标签：jquery, jquery-ui, google-apps-script

我在 Google App Script 中的 HTML 服务上使用手风琴结构 (jQueryUI) 内的表单。表单结构看起来像这样：

![HtmlService 上带有表单的手风琴](../Images/b929c72b5fae524f7e0fc59be16c17b2.png)

![HtmlService 上带有表单的手风琴](../Images/ba57e92c8f04565898dc8f8472bfefe7.png)

相关代码如下：

```
 <div id="accordion">
    <h3 id='academic-information'>
       <a href='#'>
            <label><input class='header-checkbox' type='checkbox' />Academic Information</label>
      </a>
    </h3>
    <div>
    <form id='calcForm'>
      <label>Choose from a Student Type: </label><br />
    <input name = "stateTuition" type="radio" id = 'sTuition' value='0'/>Resident Student<br />
    <input name = "stateTuition" type="radio" id = 'sTuition' value ='1'/>Non-Resident Student<br />
      <br /><br />
      <label>Stipulated period of Education :</label><br />
      <input name = "academicTrack" type="radio" id = "aTrack" value='0' />4 Years - 15 cr./semester<br />
     <input name = "academicTrack" type="radio" id = "aTrack" value='1' />5 Years - 12 cr./semester<br />
     <input name = "academicTrack" type="radio" id = "aTrack" value='2' />6 Years - 10 cr./semester<br />
     <input name = "academicTrack" type="radio" id = "aTrack" value='3' />7 Years - Non-Traditional<br />
     <input name = "academicTrack" type="radio" id = "aTrack" value='4' />8 Years - Non-Traditional<br />
      </form>
    </div>
    <h3 id='campus-housing'>
        <a href='#'>
            <label><input class='header-checkbox' type='checkbox' />Campus Housing</label>
        </a>
    </h3>
    <div>
      <form id='calcForm'>
        <label>What is the nature of Housing Plan you wish to subscribe: </label><br />
        <input name = "housingType" type="radio" id = "hType" value='0' />No Housing<br />
   <input name = "housingType" type="radio" id = "hType" value='1' />Dorm<br />
 <input name = "housingType" type="radio" id = "hType" value='2' />Apartment<br />
        <br /><br />
        <label>Choose from a room type of your desire: </label><br />
         <input name = "roomType" type="radio" id = "rType" value='0' />No Housing<br />
     <input name = "roomType" type="radio" id = "rType" value='1' />Single Occupancy Room<br />
     <input name = "roomType" type="radio" id = "rType" value='2' />Double Occupancy Room<br />
     <input name = "roomType" type="radio" id = "rType" value='3' />Single Occupancy - Double Room<br /> 
        <br /><br />
      </form>
    </div>
    <h3 id='other-info'>
        <a href='#'>
            <label><input class='header-checkbox' type='checkbox' />Miscellaneous Information</label>
        </a>
    </h3>
    <div>
    <form id='calcForm'>
      <label>Subscription to On-Campus meal plans:</label><br />
      <input name = "campusMealPlan" type="radio" id = 'mPlan' value='0' />No Meal Plan<br />
     <input name = "campusMealPlan" type="radio" id = 'mPlan' value ='1' />Gold Plan 1<br />
 <input name = "campusMealPlan" type="radio" id = 'mPlan' value ='2' />Gold Plan 2<br />
 <input name = "campusMealPlan" type="radio" id = 'mPlan' value ='3' />Silver Plan 1<br />
 <input name = "campusMealPlan" type="radio" id = 'mPlan' value ='4' />Silver Plan 2<br />    
      </form>
    </div>
</div>
 <form id='calcForm'>
  <input type="button" value="Project Cost" onclick = 'google.script.run.withSuccessHandler(processCost).processForm(this.parentNode)'/>
</form> 
```

一切正常，除了执行 processForm 的 google.script.run 无法传递与表单“calcForm”关联的所有值。我假设这是因为 div 之间的表单被破坏了。对此的解决方案是什么，换句话说，如何在单击提交按钮时将通过手风琴中的表单收集的所有信息发送到 processForm 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:57:56.580

你不能那样分解表格。为什么不将整个代码包装在一个包含所有 div 和 jquery 内容的单一表单中呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-08T17:41:36.463

我实际上是通过将表单包装在 div 中来实现的

# c# - GetCustomAttribute 返回 null

> ID：14285498
> 
> 赞同：5
> 
> 时间：2013-01-11T19:41:20.880
> 
> 标签：c#, enums, custom-attributes

有人可以向我解释为什么`Value.GetType().GetCustomAttribute`退货`null`吗？我查看了十个关于如何获取枚举类型成员属性的不同教程。无论`GetCustomAttribute*`我使用哪种方法，都不会返回自定义属性。

```
using System;
using System.ComponentModel;
using System.Reflection;

public enum Foo
{
    [Bar(Name = "Bar")]
    Baz,
}

[AttributeUsage(AttributeTargets.Field)]
public class BarAttribute : Attribute
{
    public string Name;
}

public static class FooExtensions
{
    public static string Name(this Foo Value)
    {
        return Value.GetType().GetCustomAttribute<BarAttribute>(true).Name;
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-11T19:42:33.500

因为您尝试检索的属性尚未应用于该类型；它已应用于该领域。

因此，您需要在 FieldInfo 对象上调用它，而不是在类型对象上调用 GetCustomAttributes。换句话说，你需要做更多这样的事情：

```
typeof(Foo).GetField(value.ToString()).GetCustomAttributes... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T19:48:37.963

phoog 对问题的解释是正确的。如果您想要一个如何检索枚举值属性的示例，请查看[此答案](https://stackoverflow.com/questions/1415140/c-sharp-enums-can-my-enums-have-friendly-names/1415187#1415187)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T19:48:18.510

您的属性处于字段级别，而`Value.GetType().GetCustomAttribute<BarAttribute>(true).Name`将返回应用于枚举 Foo 的属性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T19:58:57.813

我认为您必须像这样重写 FooExtension ：

```
public static class FooExtensions
{
    public static string Name(this Foo Value)
    {
        string rv = string.Empty;
        FieldInfo fieldInfo = Value.GetType().GetField(Value.ToString());
        if (fieldInfo != null)
        {
            object[] customAttributes = fieldInfo.GetCustomAttributes(typeof (BarAttribute), true);
            if(customAttributes.Length>0 && customAttributes[0]!=null)
            {
                BarAttribute barAttribute = customAttributes[0] as BarAttribute;
                if (barAttribute != null)
                {
                    rv = barAttribute.Name;
                }
            }
        }

        return rv;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T20:01:15.633

我最终像这样重写它：

```
public static class FooExtensions
{
    public static string Name(this Foo Value)
    {
        var Type = Value.GetType();
        var Name = Enum.GetName(Type, Value);
        if (Name == null)
            return null;

        var Field = Type.GetField(Name);
        if (Field == null)
            return null;

        var Attr = Field.GetCustomAttribute<BarAttribute>();
        if (Attr == null)
            return null;

        return Attr.Name;
    }
} 
```

# jquery - 不相关的 JQuery 函数相互影响

> ID：14285504
> 
> 赞同：0
> 
> 时间：2013-01-11T19:41:39.623
> 
> 标签：jquery

我正在尝试学习如何使用 JQuery，但遇到了问题。触发一个功能会触发其他无关功能的影响，我不知道为什么。当我单击 box2 元素时，为什么 box1 的效果也会触发？

单击“p”元素时，box1 应扩展为 100% 宽度。单击“box2”时，它应扩展为 400px 高度。问题是当我单击 box2 时， box1 也在发生变化。

注意：这只是一个练习，所以不必担心在这里完美地做事。只是想弄清楚这个怪癖。谢谢！

# 这是我的代码

```
<html>
<head>
<style>
   *{ padding:0px; margin:0px;}
   p { font-family:Verdana, Geneva, sans-serif; font-size:40px; font-weight:bold;   color:#fff;}
   #box1 { background-color:#003366; height:60px; width:350px; padding:15px;}
   #box2 { background-color:red; height:60px; width:350px; padding:15px;}
   .center{text-align:center;}
   .red{color:red;}
</style>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
$(document).ready(function()
{
<!-----------------function p onclick--------------->
  $("p").click(function()
  {
    $("#box1").animate({ width: '100%'});

    $("h1,h2,p").addClass("center");

  });

<!-----------------function box2 onclick--------------->
  $("#box2").click(function()
    {
      $("#box2").animate({ height: '400px'});
    });

});<!--end document.ready JQUERY-->

</script>

</head>
<body>
    <div id="box1"><p>Test It</p></div>
    <h1>Just some words here.</h1>
    <div id="box2"><p>Test It</p></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:43:18.913

您为所有段落分配了一个点击处理程序，并且两个框中都有一个段落：

```
$("p").click(function() 
```

将其更改为：

```
$("#box1").click(function() 
```

或者

```
$("#box1").find('p').click(function() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T19:44:27.977

您不只是单击，而是单击内部`box2`的段落，这就是它触发第一个处理程序的原因。`p``box2`

你可以改变

```
$("p").click(function() 
```

到

```
$("p").not('#box2 p').click(function() 
```

以避免这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T19:44:50.600

您的`box1`点击处理程序正在更新所有`h1`、`h2`和`p`元素。如果您只想要`box1`.

```
$("h1,h2,p", "#box1").addClass("center"); 
```

此外，正如其他人所提到的，您的第一个点击处理程序被分配给所有`p`元素。

# java - 列出具有用户指定扩展名的文件夹中的所有文件的程序不起作用

> ID：14285512
> 
> 赞同：0
> 
> 时间：2013-01-11T19:42:20.080
> 
> 标签：java

我正在尝试制作一个要求用户指定文件扩展名的程序。然后，它会列出所有具有该扩展名的可用文件`textarea`。我做了以下程序。但是，我的编译器在`endsWith()`语句中显示错误，并且如果我在没有`endsWith()`.

任何识别问题的帮助表示赞赏。提前致谢。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.io.*;

public class search extends Thread implements ActionListener
{
JFrame f;
JButton bop,bser;
JTextField tf,text;
JTextArea ta;
JLabel lab,lab1;
String str;
JScrollPane scrol;
File fl;

search()
{
    f=new JFrame("Search box");
    f.setLayout(null);
    f.setSize(820,700);

    bop=new JButton("Open");
    bop.setBounds(50,600,180,30);
    bop.addActionListener(this);
    f.add(bop);

    lab=new JLabel("Extension");
    lab.setBounds(340,570,180,30);
    f.add(lab);

    bser=new JButton("Search");
    bser.setBounds(510,600,180,30);
    bser.addActionListener(this);
    f.add(bser);    

    text=new JTextField();
    text.setBounds(280,600,180,30);
    text.addActionListener(this);
    text.setHorizontalAlignment(JTextField.CENTER);
    f.add(text);

    tf=new JTextField();
    tf.setBounds(25,50,750,40);
    tf.setFont(new Font("Lucida Console",Font.BOLD,20));
    tf.setHorizontalAlignment(JTextField.CENTER);
    f.add(tf);

    ta=new JTextArea();
    scrol=new JScrollPane(ta);
    //JScrollPane.setPreferredSize(750,450);
    scrol.setBounds(25,100,750,450);

    f.add(scrol);

    f.setVisible(true);
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

}

public void actionPerformed(ActionEvent ae)
{
    if(ae.getActionCommand().equals("Open"))
    {
        FileDialog fd=new FileDialog(f,"Open Box",FileDialog.LOAD);
        fd.setSize(300,300);
        fd.setVisible(true);
        str=fd.getDirectory();
        tf.setText(str);                    
    }

    if(ae.getActionCommand().equals("Search"))
    {
        fl=new File(str);
        File[] flist=fl.listFiles();

        for (int i=0;i<flist.length;i++)
        {
            String newline = System.getProperty("line.separator");
            String nm=text.getText();
            if(flist[i].endsWith(nm))
            {
                if(flist[i].isFile())
                {
                    ta.setText(flist[i].getName()+newline);
                }       
            }
        }               
    }
}   

    public static void main(String args[])
    {
        new search();
    }

} 
```

编译器没有给出错误。只是当我运行程序......并输入目录路径时，只要我按下搜索，文本区域中只会显示一个文件名......即使我没有在文本字段中输入任何内容，并且如果条件不满足，那么也会发生同样的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T19:46:08.603

没有`File.endsWith()`，你需要获取文件名：

```
flist[i].getName().endsWith(nm) 
```

您可能还想确保它是一个文件（而不是目录）以防万一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T19:49:57.850

你需要说 file.getName().endsWith( suffix );

此外，如果您在没有先按打开的情况下按搜索，我注意到“str”没有被定义。你会在这里得到一个空指针异常。你可能想检查一下。

****编辑 ******

 **试试下面的代码。我已经对其进行了修改，以便它可以工作。但是，您编写代码的方式存在缺陷会导致缺陷。你会看到的，我敢肯定。修复该缺陷对您来说应该不会太难。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.io.*;

public class Test extends Thread implements ActionListener
{
  JFrame f;

  JButton bop, bser;

  JTextField tf, text;

  JTextArea ta;

  JLabel lab, lab1;

  String str;

  JScrollPane scrol;

  File fl;

  Test()
{
    f = new JFrame( "Search box" );
    f.setLayout( null );
    f.setSize( 820, 700 );

    bop = new JButton( "Open" );
    bop.setBounds( 50, 600, 180, 30 );
    bop.addActionListener( this );
    f.add( bop );

    lab = new JLabel( "Extension" );
    lab.setBounds( 340, 570, 180, 30 );
    f.add( lab );

    bser = new JButton( "Search" );
    bser.setBounds( 510, 600, 180, 30 );
    bser.addActionListener( this );
    bser.setEnabled( false );
    f.add( bser );

    text = new JTextField();
    text.setBounds( 280, 600, 180, 30 );
    text.addActionListener( this );
    text.setHorizontalAlignment( JTextField.CENTER );
    f.add( text );

    tf = new JTextField();
    tf.setBounds( 25, 50, 750, 40 );
    tf.setFont( new Font( "Lucida Console", Font.BOLD, 20 ) );
    tf.setHorizontalAlignment( JTextField.CENTER );
    f.add( tf );

    ta = new JTextArea();
    scrol = new JScrollPane( ta );
    //JScrollPane.setPreferredSize(750,450);
    scrol.setBounds( 25, 100, 750, 450 );

    f.add( scrol );

    f.setVisible( true );
    f.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );

  }

  public void actionPerformed( ActionEvent ae )
  {
    if ( ae.getActionCommand().equals( "Open" ) )
    {
      FileDialog fd = new FileDialog( f, "Open Box", FileDialog.LOAD );
      fd.setSize( 300, 300 );
      fd.setVisible( true );
      str = fd.getDirectory();

      if ( str != null && !str.trim().equals( "" ) )
      {
        tf.setText( str );

        // Enable the search button
        bser.setEnabled( true );
      }
      else
      {
        bser.setEnabled( false );
      }
    }

    if ( ae.getActionCommand().equals( "Search" ) )
    {
      fl = new File( str );
      File[] flist = fl.listFiles();

      for ( int i = 0; i < flist.length; i++ )
      {
        String newline = System.getProperty( "line.separator" );
        String nm = text.getText();
        if ( flist[i].getName().toLowerCase().endsWith( nm.toLowerCase() ) )
        {
          if ( flist[i].isFile() )
          {
            ta.setText( flist[i].getName() + newline );
          }
        }
      }
    }
  }

  public static void main( String args[] )
  {
    new Test();
  }
} 
```**

# eclipse-plugin - 开发eclipse插件时如何访问Common Viewer？

> ID：14285517
> 
> 赞同：0
> 
> 时间：2013-01-11T19:42:35.103
> 
> 标签：eclipse-plugin

我需要通过 eclipse 插件访问项目/包资源管理器的树结构。它可以通过扩展 RCP 应用程序的 CommonNavigator 类来完成：

```
public  CommonViewer viewer = super.getCommonViewer();
Tree tree = viewer.getTree(); 
```

但是我需要通过创建一个插件来做到这一点，我不知道如何复制它以进行插件开发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:38:52.973

如果您只需要获取工作区项目，最好使用`ResourcesPlugin.getWorkspace().getWorkspaceRoot().getProjects()`.

但是，如果您只想查看查看者的内容，我可以建议使用其内容提供程序。使用类似的东西：

```
CommonViewer viewer = super.getCommonViewer();
ITreeContentProvider provider = (ITreeContentProvider) viewer.getContentProvider();
Object rootElements[] = provider.getElements(viewer.getInput()); 
```

# ios - 在当前上下文中绘制圆弧

> ID：14285518
> 
> 赞同：1
> 
> 时间：2013-01-11T19:42:41.650
> 
> 标签：ios, core-graphics, quartz-2d

我试图在当前上下文中绘制自定义弧，但结果不是我期望看到的，如果绘制方法，我有简单的代码行。

```
-(void) drawRect:(CGRect)rect
{
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextBeginPath(context);
    CGContextSetGrayFillColor(context, 1.0, 0.7);
    CGContextMoveToPoint(context, 100,100);
    CGContextAddArc(context, 100, 100, 80, 0, M_PI_2, 0);
    CGContextClosePath(context);
    CGContextFillPath(context);
} 
```

这是结果。 ![在此处输入图像描述](../Images/9d6aead300293322b5ee7f6414d2b438.png)

但我预计会看到这样的结果。为什么 M_PI_2 出现在圆圈的底部？应该有一个 3*M_PI_2，我做错了什么？ ![在此处输入图像描述](../Images/bfbe17f939524afc44982dda7e80d56f.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T19:53:13.257

这在 iOS[*绘图和打印指南中*](http://developer.apple.com/library/ios/documentation/2DDrawing/Conceptual/DrawingPrintingiOS/GraphicsDrawingOverview/GraphicsDrawingOverview.html#//apple_ref/doc/uid/TP40010156-CH14-SW14)[的“iOS 中的坐标系统和绘图”中进行了](http://developer.apple.com/library/ios/documentation/2DDrawing/Conceptual/DrawingPrintingiOS/GraphicsDrawingOverview/GraphicsDrawingOverview.html#//apple_ref/doc/uid/TP40010156-CH14-SW14)*解释：*

 *> iOS 的每个绘图框架都会根据当前的图形上下文建立一个默认的坐标系。在 iOS 中，有两种主要类型的坐标系：
> 
> *   左上原点坐标系（ULO），其中绘图操作的原点在绘图区域的左上角，正值向下和向右延伸。UIKit 和 Core Animation 框架使用的默认坐标系是基于 ULO 的。
>     
>     
> *   左下原点坐标系（LLO），其中绘图操作的原点在绘图区域的左下角，正值向上和向右延伸。Core Graphics 框架使用的默认坐标系是基于 LLO 的。

正角（如`M_PI_2`）表示从正 X 轴向正 Y 轴的旋转。因此，在 UIKit 提供给您的图形上下文中，正角度向下旋转。

另请参阅[此答案](https://stackoverflow.com/a/11732675/77567)。*

# python - 如何从python中提取xml值@attribute = something

> ID：14285528
> 
> 赞同：0
> 
> 时间：2013-01-11T19:43:23.403
> 
> 标签：python, xml, extract, etl

例如这是我的 xml

```
<p1>
     <p2>
         <name>nikki</name>
         <p3>
            <c days="1">1</c>
            <c days="3">5</c>
            <c days="7">9</c>
        </p3>
    </p2>
</p1> 
```

到目前为止，我可以使用提取名称`name = etree.XPath('/p1/p2/name/text()')(root)[0]`但如何提取 day1 、 day3 和 day7 以获得值 1、5、7 ？

这是我使用 import etree 的代码

```
name = etree.XPath('/p1/p2/name/text()')(root)[0]

?? day1 = etree.XPath('/p1/p2/p3/c@days="1"/text()')(root)[0]
?? day3 = etree.XPath('/p1/p2/p3/c@days="3"/text()')(root)[0]
?? day7 = etree.XPath('/p1/p2/p3/c@days="7"/text()')(root)[0]

print name , day1 , day2, day7 

OUTPUT WANTED: nikki 1 5 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:50:14.937

ElementTree 元素的`text`属性将为您提供元素标签之间的值。所以：

```
print name, day1.text, day2.text, day7.text 
```

应该给你预期的输出。

[这](http://docs.python.org/2/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element)是 ElementTree 元素的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T21:39:45.600

*尝试使用 lxml，它有更好的 xpath 支持，你想多了：*

```
xml=\
"""<p1>
     <p2>
         <name>nikki</name>
         <p3>
            <c days="1">1</c>
            <c days="3">5</c>
            <c days="7">9</c>
        </p3>
    </p2>
</p1>"""
import lxml.etree as et
doc=et.fromstring(xml)
print doc.xpath('.//name/text()|.//c/text()') 
```

*出去：*

```
['nikki', '1', '5', '9'] 
```

*编辑：如果你必须使用标准库，你可以这样做：*

```
print root.find('.//name').text
print [e.text for e in root.findall('.//c')] 
```

*出去：*

```
nikki
['1', '5', '9'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T20:21:23.247

您似乎正在使用 lxml。这是一个建议：

```
from lxml import etree

XML ="""
<p1>
     <p2>
         <name>nikki</name>
         <p3>
            <c days="1">1</c>
            <c days="3">5</c>
            <c days="7">9</c>
        </p3>
    </p2>
</p1>"""

root = etree.fromstring(XML)

name = root.xpath("p2/name")[0]
p3 = root.xpath("p2/p3")[0]
day1 = p3.xpath('c[@days="1"]')[0]
day3 = p3.xpath('c[@days="3"]')[0]
day7 = p3.xpath('c[@days="7"]')[0]

print name.text, day1.text, day3.text, day7.text 
```

输出：

```
nikki 1 5 9 
```

注意[谓词](http://www.w3.org/TR/xpath/#predicates)（方括号中的过滤器表达式）。

问题中的表达式`'/p1/p2/p3/c@days="7"/text()'`无效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T20:31:32.980

```
from xml.dom.minidom import parseString

_f = open("your_file_path.xml", "r")
data = _f.read()
_f.close()
dom = parseString(data)

# name
name = dom.getElementsByTagName('name')[0].firstChild.data

# days
itemList = dom.getElementsByTagName("c")
for s in itemList:
    print s.attributes['days'].value

or 

day1 = dom.getElementsByTagName("c")[0].firstChild.nodeValue

or 

day1 = dom.getElementsByTagName("c")[0].firstChild.data 
```

# android - Android Maps API v2 Marker 在拖动时具有自定义的锚点跳转

> ID：14285530
> 
> 赞同：8
> 
> 时间：2013-01-11T19:43:32.747
> 
> 标签：android, google-maps, google-maps-markers, draggable

我有一个 Google Maps Android v2 API 标记，已将锚点设置为 0.5/1.0。只需放置标记即可。问题是当我拖动标记时，它在第一次移动时向上和向左跳跃大约图像的高度（1.0）和宽度的一半（0.5）。谷歌的拖拽代码似乎没有考虑自定义的锚点。

```
mMap.addMarker(new MarkerOptions().draggable(true)
 .icon(BitmapDescriptorFactory
 .fromResource(R.drawable.blue_flag))
 .anchor(0.5f, 1.0f)
 .position(endPosition)); 
```

有人见过这个吗？似乎是拖动算法中的一个错误。

# sql - 如何从任务表或 billingTimes 获取 Project 更新时间？

> ID：14285534
> 
> 赞同：0
> 
> 时间：2013-01-11T19:43:46.877
> 
> 标签：sql, sql-server-2008-r2

我遇到了这个问题我正在尝试获取与项目相关的最后一个任务更新任务以及如何通过获取最后一个 billingTime 来进行更新
我也有 Copley of design Questions

*   获取项目和上次更新时间表单任务的最佳方式是什么？我应该使用*createdOn*列 Form *billingTime*。
*   我应该在项目表上添加新列来记录最后更新的任务吗？

![在此处输入图像描述](../Images/f1e9d142950f7981b9cfce721ea35336.png)

***我的查询：***

```
SELECT     p.projectID, p.projectName, t.lastUpdate, billingsTimes.userID
FROM         Tasks AS t INNER JOIN
                      Projects_tasks ON t.taskID = Projects_tasks.taskID INNER JOIN
                      Projects AS p ON Projects_tasks.projectID = p.projectID INNER JOIN
                      billingsTimes ON t.taskID = billingsTimes.taskID
GROUP BY p.projectName, p.projectID, t.lastUpdate, billingsTimes.userID 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:52:54.880

我认为您不需要在项目表中添加新列。看起来您已经在 2 个表之间建立了关系。如果您正在寻找给定项目的最后更新时间，请尝试以下操作：

```
SELECT     p.projectID, p.projectName, MAX(t.lastUpdate) as 'Last Updated Time'
FROM         Tasks AS t INNER JOIN
                      Projects_tasks ON t.taskID = Projects_tasks.taskID INNER JOIN
                      Projects AS p ON Projects_tasks.projectID = p.projectID
GROUP BY p.projectName, p.projectID 
```

- 编辑

为了`UserId`也显示，试试这个：

```
SELECT     p.projectID, p.projectName, BillingsTimes.UserId, MAX(t.lastUpdate) as 'Last Updated Time'
FROM         Tasks AS t INNER JOIN
                      Projects_tasks ON t.taskID = Projects_tasks.taskID INNER JOIN
                      Projects AS p ON Projects_tasks.projectID = p.projectID INNER JOIN
                      BillingsTimes ON t.taskID = BillingsTimes.taskID
GROUP BY p.projectName, p.projectID, BillingsTimes.UserId 
```

# php - PHP 中的 if 语句让我陷入困境

> ID：14285535
> 
> 赞同：2
> 
> 时间：2013-01-11T19:43:50.783
> 
> 标签：php, if-statement

好的，我已经自学 PHP 并做了大约 40 个小时的小项目，我想我并没有把简单的 IF 语句弄得一团糟，但是……下面的两个回声显示了正确的东西（密码和密码的长度）。

但是，带有“ARGH”的回声和 studentnotexist 函数被调用了！我不知道为什么。当然，这很简单。

```
echo $password;
echo strlen($password);

if (strlen($password < 2)) {
    echo "********************* ARGH ************************";
    studentnotexist();
    session_destroy();
    die();
}
else 
//Begin IF blocks that test various conditions for user name and password
if ($password != $passwordentered) { //if password is wrong
    badpassword();
    die();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T19:46:26.187

您正在检查“$password < $2”的长度而不是“$password”的长度。

观察差异：

```
if (strlen($password < 2)) { 
```

对比

```
if (strlen($password) < 2) { 
```

看看括号在哪里。

你想要第二个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T19:46:14.220

注意关闭括号的位置：

```
if (strlen($password) < 2) 
```

# joomla - Joomla 自定义组件的令牌无效

> ID：14285536
> 
> 赞同：2
> 
> 时间：2013-01-11T19:43:52.163
> 
> 标签：joomla, joomla2.5

我正在构建一个自定义 Joomla 组件，并将其添加到我的模板 (default.php) 文件中的表单中（它使用的是 HTTP POST）：

```
echo JHTML::_( 'form.token' ); //add hidden token field to prevent CSRF vulnerability 
```

然后我检查我的控制器中的令牌：

```
JRequest::checkToken() or die( 'Invalid Token' ); 
```

但无论我做什么，我都会得到一个无效的令牌。当我在 html 页面上查看源代码时，我已经验证了在我的表单中创建了一个带有令牌的隐藏类型。我还验证了，在控制器中，token的值是一样的：

```
print_r(JUtility::getToken()); 
```

因此，如果令牌是相同的值，为什么它会以 Invalid Token 消息退出？

**编辑：**有一个我没有提到的关键部分。我的表单是在一个单独的 js 文件中使用 jquery ajax 处理的，该文件添加到我的 view.html.php 中。这是 ajax POST 的样子：

```
jQuery.ajax({
    type: 'POST',
    url: 'index.php?option=com_recordings&task=deletevideos&format=raw',
    data: {checkedarray:checked},
    success: function(data){
               //delete row
    }
}); 
```

控制器对此进行处理：

```
function deletevideos()
{

    $video_list = JRequest::getVar('checkedarray', 0, 'post', 'array');
    //print_r(JUtility::getToken());
    JRequest::checkToken() or jexit( 'Invalid Token' );     

    $model = &$this->getModel();
    return $model->setDeleteVideos($video_list);
} 
```

This then goes to the model that does the DB update. I saw this old [post](http://forum.joomla.org/viewtopic.php?p=1464422) that might be relevant. It is not clear to me how/where I generate the token and where/how I validate that token. The post seems quite involved as it checks against users as well which I don't think is needed in my case. Or maybe I misunderstand?

**EDIT #2**

Okay so the token is missing and I need to pass it into my js file. So I thought I could add this to my view.html.php:

```
 $addtoken = JUtility::getToken();
    $addtokenjs = 'jQuery(function() {
                    var token="'.$addtoken.'";
                    });';
    $doc->addScriptDeclaration( $addtokenjs );
    $doc->addScript(JURI::base()."components/com_recordings/js/recordings.js"); 
```

I have to put this in the document ready function because apparently addScriptDeclaration does not put anything ahead of my recordings.js file. Then pass the token into the `ajax` call:

```
jQuery.ajax({
    type: 'POST',
    url: 'index.php?option=com_recordings&task=deletevideos&format=raw'+token+'=1',
    data: {checkedarray:checked},
    success: function(data){
               //delete row
    }
}); 
```

Apparently I'm not doing this right as I get this error: `ReferenceError: token is not defined`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T07:01:09.160

It does not seem that you are passing token value in the ajax request.And that's why you are getting this error.

You can - 1) append token to the url like this

```
url: 'index.php?option=com_recordings&task=deletevideos&format=raw&'. JUtility::getToken() .'=1' 
```

2) Or send the whole form using [Serialize](http://api.jquery.com/serialize/).

**EDIT 2:-** You can create a function called getToken like this-

```
 $addtokenjs = 'function getToken() {
                    var token="'.$addtoken.'";
                    return token;
                    };'; 
```

And in url instead of calling `token` you can call `getToken()`

```
url: 'index.php?option=com_recordings&task=deletevideos&format=raw'+getToken()+'=1' 
```

Hope this will work.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T01:34:51.917

Try using

```
JSession::checkToken() or die( JText::_( 'Invalid Token' ) ); 
```

rather than JRequest. The reason I like JSession more is because it guarentees Joomla 2.5/3.0 compatibility without having to think about JRequest being deprecated. In Joomla 2.5 the function uses JRequest and in 3.0 uses JInput.

* * *

**EDIT**

For the AJAX ou actually need to pass the data across with the `POST`. Your data is currently just going to be the `checkedarray:checked` i.e. the checked data and NOT the token in the AJAX request. You'll need to pass the data across with serialize if you wish to use the `POST` method. However note that serialize will place the data in the URL anyhow. You can then process this token with

```
// Check for request forgeries using one of either JRequest of JSession
JRequest::checkToken( 'get' ) or jexit( 'Invalid Token' );
//Alternative
JSession::checkToken( 'get' ) or jexit( 'Invalid Token' ); 
```

Just for completelness the link you have given uses the GET method. In that he's passed across the username (in his case) and the token in the URL as you can see on the third line of his AJAX function

```
function check_username(username, token) {
  var url = 'index.php?option=com_user&task=check_user';
  data = 'username=' + username + '&' + token;     //TOKEN INSERTED INTO URL HERE
 $.ajax({
  type: "GET",
  url: url,
  data: data,
  success: function(xml) {
    var result = $(xml).find('response').text();
    if (result == 'found') {
       alert( 'Please select a different username, ' + username + ' already exists' );
   }
   }
  }); // ajax
} 
```

and then after this is it is trivial to process just using

```
// Check for request forgeries using one of either JRequest of JSession
JRequest::checkToken( 'get' ) or jexit( 'Invalid Token' );
//Alternative
JSession::checkToken( 'get' ) or jexit( 'Invalid Token' ); 
```

Either way its probably going to involve some tweaking to your model - as your passing across more than 1 variable - although it shouldn't be hard to do. Hope this helps!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T11:22:13.447

If the form data is submitted as `$_GET`

```
JRequest::checkToken('get') or jexit( 'Invalid Token' );; 
```

If the form data is submitted as `$_POST`

```
JRequest::checkToken('post') or jexit( 'Invalid Token' );; 
```

Else you can use below which is preferred

```
JRequest::checkToken('request') or jexit( 'Invalid Token' ); 
```

[Read more](http://docs.joomla.org/How_to_add_CSRF_anti-spoofing_to_forms)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T19:34:27.867

The obvious problem with your initial code is that you are not passing the token to the controller.

`data: {checkedarray:checked}` probably contains just an array of IDs you want to delete.

Irfan version is the easiest to implement and it should work. I've managed to make it work.

Here is a [gist with the working code](https://gist.github.com/4588583) (please note that this is not production ready code, it's just to test the token problem). But I've tested it and it works for me.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-04T23:59:46.013

Just in case of future use: On Joomla! 3.x `JUtility::getToken()` has been replaced with `JSession::getFormToken()`.

See here: [http://api.joomla.org/cms-3/classes/JSession.html#method_getFormToken](http://api.joomla.org/cms-3/classes/JSession.html#method_getFormToken)

# php - TCPDF 中的裁剪标记

> ID：14285541
> 
> 赞同：1
> 
> 时间：2013-01-11T19:44:14.787
> 
> 标签：php, tcpdf

我正在尝试在我的 PDF 中制作cropMark，我已经看过示例文档：

[http://www.tcpdf.org/examples/example_056.phps](http://www.tcpdf.org/examples/example_056.phps)

而且我已经下载了该代码并设法使这些cropMarks 工作，但是我似乎无法将裁剪标记添加到我的其他PDF 代码中。为了使cropMark 方法起作用，对PDF 的先前要求是什么？

我正在制作这样的cropMark（右50mm，从0,0向下50mm）：

```
$pdf->cropMark(50,50, 10, 10, 'TL', array(255,0,0)); 
```

我尝试在添加内容之前和之后添加此代码。内容是 Cell、writeHTMLCell 和 SVG 内容的组合。

我添加这样的页面：

```
$pdf->AddPage('L', $page_format, true, false); 
```

我设置页面的边距

```
$pdf->SetMargins(0,0,0); 
```

而且我没有设置任何页眉或页脚边距。我究竟做错了什么？

更新：我应该提到我没有收到任何错误，我只是没有看到任何裁剪标记，我的背景是蓝色的，并且（我相信）裁剪标记应该是红色的。我也尝试过添加新页面（AddPage()）并尝试在新页面上绘制裁剪标记，但仍然没有运气。到目前为止，我发现这些文档有用且一致，所以我一定做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-19T20:21:13.293

我很难弄清楚坐标是如何工作的。以下方法最终为我解决了，并为任何 tcpdf 文档绘制标记和出血：

```
/**
 * Enlarges the MediaBox by the slug of the document in all directions and draws cropmarks,
 * registrations marks and color bars
 *
 * @param $tcpdf the internal tcpdf object
 *
 * @access public
 */
public function drawCropbox($tcpdf, $slug = 6)
{
  for ($i = 1; $i <= $tcpdf->getNumPages(); $i++) {
    $tcpdf->setPage($i);
    $width = $tcpdf->getPageWidth();
    $height = $tcpdf->getPageHeight();
    $outerWidth = $width + 2 * $slug;
    $outerHeight = $height + 2 * $slug;
    $barHeight = min($slug - 1, 6);
    $barWidth = min(9 * $barHeight, ($width - $barHeight * 4)/ 2);
    $barHeight = max(1, $barWidth / 9);
    $registrationHeight  = $barHeight / 2;

    $tcpdf->setPageFormat(
      array(
        $outerWidth,
        $outerHeight,
        'Rotate'   => 0,
        'MediaBox' => array(
          'llx' => -$slug, 'lly' => $height + $slug, 'urx' => $width + $slug, 'ury' => -$slug
        ),
      )
    );

    //Crop left top
    $tcpdf->cropMark(
      $x = 0,
      $y = $outerWidth - $height,
      $w = $slug,
      $h = $slug,
      $type = 'A',
      $color = array(0, 0, 0)
    );

    //Crop right top
    $tcpdf->cropMark(
      $x = $width,
      $y = $outerWidth - $height,
      $w = $slug,
      $h = $slug,
      $type = 'B',
      $color = array(0, 0, 0)
    );

    //Crop left bottom
    $tcpdf->cropMark(
      $x = 0,
      $y = $outerWidth,
      $w = $slug,
      $h = $slug,
      $type = 'C',
      $color = array(0, 0, 0)
    );

    //Crop right bottom
    $tcpdf->cropMark(
      $x = $width,
      $y = $outerWidth,
      $w = $slug,
      $h = $slug,
      $type = 'D',
      $color = array(0, 0, 0)
    );

    //Registration left
    $tcpdf->registrationMark(
      $x = -$slug / 2,
      $y = $width - $height / 2 + 2 * $slug,
      $registrationHeight,
      FALSE,
      array(0, 0, 0),
      array(255, 255, 255)
    );

    //Registration top
    $tcpdf->registrationMark(
      $x = $width / 2,
      $y = $outerWidth - $height - $slug / 2,
      $registrationHeight,
      FALSE,
      array(0, 0, 0),
      array(255, 255, 255)
    );

    //Registration right
    $tcpdf->registrationMark(
      $x = $width + $slug / 2,
      $y = $width - $height / 2 + 2 * $slug,
      $registrationHeight,
      FALSE,
      array(0, 0, 0),
      array(255, 255, 255)
    );

    //Registration bottom
    $tcpdf->registrationMark(
      $x = $width / 2,
      $y = $outerWidth + $slug / 2,
      $registrationHeight,
      FALSE,
      array(0, 0, 0),
      array(255, 255, 255)
    );

    //Color Registration Bar
    $tcpdf->colorRegistrationBar(
      $x = $width - $barWidth - $barHeight,
      $y = $outerWidth - $outerHeight + $slug,
      $w = $barWidth,
      $h = $barHeight,
      FALSE,
      TRUE,
      'A,W,R,G,B,C,M,Y,K'
    );

    //Gray Registration Bar
    $tcpdf->colorRegistrationBar(
      $x = $barHeight,
      $y = $outerWidth - $outerHeight + $slug,
      $w = $barWidth,
      $h = $barHeight,
      TRUE,
      FALSE,
      'A'
    );
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T21:25:01.963

不幸的是，我无法找出为什么裁剪标记不起作用，但我通过使用该`Line`方法自己绘制它们来解决它。这是代码：

```
// set the crop marks to be same color as the text, so that they always show up
$pdf->SetLineStyle(array('width' => 0.25, 'color' => $myRGBColor));

// set quarter of an inch and 3/16 of an inch to mm
$qmm = 6.35;
$smQmm = 4.7625;
$cw = $pdf->getPageWidth();
$ch = $pdf->getPageHeight();

// Top left
$pdf->Line($qmm, 0, $qmm, $smQmm);
$pdf->Line(0, $qmm, $smQmm, $qmm);

// Top right
$pdf->Line($cw - $qmm, 0, $cw - $qmm, $smQmm);
$pdf->Line($cw, $qmm, $cw - $smQmm, $qmm);

// Bottom right
$pdf->Line($cw, $ch - $qmm, $cw - $smQmm, $ch - $qmm);
$pdf->Line($cw - $qmm, $ch, $cw - $qmm, $ch - $smQmm);

// Bottom left
$pdf->Line(0, $ch - $qmm, $smQmm, $ch - $qmm);
$pdf->Line($qmm, $ch, $qmm, $ch - $smQmm); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T14:15:24.220

如果使用 linux，此 shell 脚本会在 pdf 中添加裁剪标记（也称为注册标记）。

```
#!/bin/bash
# takes two arguments, both pdf filenames.
# add cropmarks to  pdf file given as first argument, and writes result to pdf file, given as second argument.
# uses: pdfinfo, ps2pdf, pdftk
# koen 2013

# get bounding box
BOX=`pdfinfo -box $1 | grep 'MediaBox' | head -1`
LEFT=`echo $BOX | awk '{print $2}'`
BOTTOM=`echo $BOX | awk '{print $3}'`
RIGHT=`echo $BOX | awk '{print $4}'`
TOP=`echo $BOX | awk '{print $5}'`
WIDTH=`echo $BOX | awk '{print $4-$2}'`
HEIGHT=`echo $BOX | awk '{print $5-$3}'`

# add postscript code for crop marks
cat >> cropmarks.ps <<EOD
% length of crop mark, in inches
/Crop .5 def 
% length of crop mark, in points
/CropLen Crop 72 mul def 

0 setlinewidth 
$LEFT $BOTTOM moveto CropLen 0 rmoveto 0 CropLen rlineto stroke
$LEFT $BOTTOM moveto 0 CropLen rmoveto CropLen 0 rlineto stroke
$LEFT $TOP moveto CropLen 0 rmoveto 0 CropLen neg rlineto stroke
$LEFT $TOP moveto 0 CropLen neg rmoveto CropLen 0 rlineto stroke
$RIGHT $BOTTOM moveto CropLen neg 0 rmoveto 0 CropLen rlineto stroke
$RIGHT $BOTTOM moveto 0 CropLen rmoveto CropLen neg 0 rlineto stroke
$RIGHT $TOP moveto CropLen neg 0 rmoveto 0 CropLen neg rlineto stroke
$RIGHT $TOP moveto 0 CropLen neg rmoveto CropLen neg 0 rlineto stroke

showpage
EOD
ps2pdf -dDEVICEWIDTHPOINTS=$WIDTH -dDEVICEHEIGHTPOINTS=$HEIGHT cropmarks.ps cropmarks.pdf
pdftk $1 stamp cropmarks.pdf output $2
rm -f cropmarks.ps cropmarks.pdf
#not truncated 
```

# ssas - 如何过滤掉 ssas 父子层次结构中的单独属性？

> ID：14285549
> 
> 赞同：0
> 
> 时间：2013-01-11T19:44:30.087
> 
> 标签：ssas, parent-child, hierarchy, olap, dimensions

我有一个基于部门维度中的部门和子部门的父子层次结构。

有一个单独的字段是我想在我的多维数据集中切片此数据的标志。如何配置维度以使该字段可见？

我将其设置为常规属性，AttributeHierarchyVisible 为 true，但是当我在多维数据集浏览器中查看维度时，找不到它。

我尝试创建从标志到我的部门的用户定义层次结构，但它仍然没有出现。如果我单击“显示所有属性”，它将出现在成员的描述下，但无法过滤。

谁能解释为什么会发生这种情况以及我如何正确引用该标志进行过滤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T07:14:27.697

您应该只需要一个常规属性。我在一个立方体中有类似的尺寸设计，它工作正常。我可以在 BIDS Dimension Browser 和 BIDS Cube Browser 以及 Excel 2010 Pivot Tables 中查看和使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T02:02:29.887

这很奇怪。在维度页面本身，您是否尝试过处理维度，然后自行浏览维度。如果您在那里看不到它，我会一起删除并重新创建维度。

# database - Zend 数据库表 getrow

> ID：14285554
> 
> 赞同：0
> 
> 时间：2013-01-11T19:44:51.710
> 
> 标签：database, zend-framework, fetch

我有一个串行密钥表

```
+----+---------------------+------+
| id | product_key         | used |
+----+---------------------+------+
|  1 | 3C45-GH76-9V74-HLKJ |    1 |
|  2 | REDF-6KI9-00IU-4867 |    0 |
|  3 | 1111-1111-1111-1111 |    0 |
|  4 | 2222-2222-2222-2222 |    0 |
|  5 | 3333-3333-3333-3333 |    0 |
+----+---------------------+------+ 
```

我想获得一个`used=0`使用 zend 框架的行记录。然后更改为`used=1`是否`product_key`有选择。

我对使用 Zend 感到困惑。

我认为是这样的，但是如果选择了该产品密钥，如何将“1”分配给使用？

```
$productKey = $this->_helper->model('ProductKeys')->fetchOne('SELECT * from product_keys WHERE used=0 LIMIT 1'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:33:50.487

在一个简单的查询中似乎没有办法做到这一点。此外，*fetchOne*仅获取第一条记录的第一列。该助手将只返回 ID，而不是 product_key。

**选项 1：** 修改您的 ProductKeys 模型以获取密钥并将其设置为已使用：

```
class My_Model_ProductKeys extends Zend_Db_Table_Abstract
...
function getKeyAndMarkUsed()
{
  $select = $this->select();
  $select->where('used=?',1)->limit(1)->order('ID');
  $keyRow = $this->fetchRow();
  if ($keyRow){
    $this->update(array('used'=>1),'id='.$keyRow->ID);
    return $keyRow->id;
  }
  else{
    //no keys left! what to do??? Create a new key?
    throw new Exception('No keys left!');
  }
} 
```

然后你会：

```
$productKey = $this->_helper->model('ProductKeys')->getKeyAndMarkUsed(); 
```

**选项 2**：创建一个数据库过程来执行上述功能并调用它。

# c - 在c中读取特定数量的字符

> ID：14285558
> 
> 赞同：-6
> 
> 时间：2013-01-11T19:45:04.700
> 
> 标签：c, string

您好，我想从用户那里读取一个字符串（无论他给出多少个字符），但我只想保留和存储其中的 10 个。

例如：

用户类型：你好，我的名字是尼克。

并且只存储：你好，我的 n

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T19:48:39.257

只要你用谷歌搜索...

```
char buf[11];
fgets(buf, sizeof(buf), stdin); 
```

11 char = 10 char 加上终止的 NUL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T19:54:33.493

```
char mystr[11];
scanf("%10[^\n]", mystr); 
```

你可以用`scanf()`它来做你想做的事，但你需要小心格式字符串。注意我使用 a`10`来确保我们不占用超过 10 个字符（这将适合大小为 11 的缓冲区）。此外，我告诉它`[\n]`阅读所有内容，直到它看到一个换行符（或 10 个字符，哪个是第一个）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T20:10:49.563

`scanf`与特制的格式字符串一起使用：

```
char name[11];
scanf("%10[^\n]%*[^\n]", name);
getchar(); 
```

一些解释：

*   数组中的 11 个元素 - 你知道为什么
*   `[^\n]`表示“名称可以包含除换行符之外的任何内容” - 与更传统的相反`%s`- “名称可以包含除空格字符之外的任何内容”
*   `*`意思是“读取但不存储”
*   `getchar`最后消耗行尾字符（@DanielFischer 的建议）

需要如此复杂的格式字符串，因为您要读取 10 个字符并丢弃其余字符。或者，您可以使用`fgets`后跟一些技巧来丢弃字符，直到行尾。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T19:55:06.857

```
char buf[11];
scanf("%10[^\n]",buf); 
```

# jquery - 如何将 div 粘贴到 iPad 视口的右侧

> ID：14285560
> 
> 赞同：0
> 
> 时间：2013-01-11T19:45:16.260
> 
> 标签：jquery, ipad, screen, viewport

![我正在尝试做的示例](../Images/303f12d78f842a11f01a887b89554e8a.png)

当您单击关闭的 div 时，它应该动画到屏幕的中心。

当您单击打开的 div 时，它应该动画回到视口的边缘。

父级（例如 body）应该是 1024px。

**代码预览：**

[http://jsbin.com/uhuxen/2](http://jsbin.com/uhuxen/2)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T20:34:57.253

使用 jQuery animate 来改变 left 属性。

```
$('#edge_dweller').click( function(event){
  $('#edge_dweller').animate({
      right: (50) + '%',
    marginRight: -100 + 'px'
  }, 5000);
}); 
```

[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

这将是关闭和打开的代码：

```
$('#edge_dweller').click( function(event){
  if ($('#edge_dweller').css('right') == '50%')
    $('#edge_dweller').animate({
      right: (0) + '%',
      marginRight: 0 + 'px'
    }, 5000);
  else
    $('#edge_dweller').animate({
      right: (50) + '%',
      marginRight: -100 + 'px'
    }, 5000);
}); 
```

# azure - Windows Azure 电话号码格式

> ID：14285565
> 
> 赞同：0
> 
> 时间：2013-01-11T19:46:03.843
> 
> 标签：azure, phone-number

我想在 Windows Azure 上注册，所以它会询问我的电话号码，但是当我输入它时，我的手机上没有收到任何消息。

我住在法国（+33），电话号码字段中的占位符值是“4 17 91 23 45 67”所以有 11 个号码，我尝试了类似 3 36 11 22 33 44 （没用），还有很多其他的格式，你知道哪种格式适合我的国家（或者为什么它不起作用）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:46:46.767

法国绝对是 Windows Azure 商用的国家之一 (http://www.windowsazure.com/en-us/support/faq/)。

您想要做的是完全省略提供的电话号码中的国家代码 (+33)。

当您在注册期间选择法国作为您的国家/地区时，假定为 +33，因此如果您的完整号码是 33 + 1 22 33 44 55，您将选择法国作为您的国家，然后将 1 22 33 44 55 作为您的电话号码。

# javascript - 如何使用类删除元素

> ID：14285567
> 
> 赞同：1
> 
> 时间：2013-01-11T19:46:09.177
> 
> 标签：javascript, object, getelementsbyclassname

单击具有相同类“框”的按钮时，我想删除所有元素。我已经查找了几个人们这样做的示例，但我仍然无法弄清楚如何为我的代码执行此操作。

我有这个功能，它在单击按钮时向 DOM 添加一个框。

```
 function addBox(newbox) {                                   
   var scene = document.getElementById("scene"); //where all new divs will go        
   var div = document.createElement("div");                   
   div.className += " " + "box";            // assigns the class "box" to all divs
   div.innerHTML += newbox.name; 
   div.style.backgroundColor = newbox.color;                            
   scene.appendChild(div);                                    
  } 
```

这是我正在尝试在单击不同按钮时清除所有新 div 的功能。

```
 function clear() {
  var elems = document.getElementsByClassName("box");
  for ( k = elems.length - 1; k >= 0; k--) {
   parentElement.removeChild(elems[k]);
  }
  } 
```

我在控制台中收到的警告是“未定义 parentElement”。我一直在试图弄清楚如何定义父元素，但我遇到了麻烦。任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T19:48:18.577

您可以从元素的[`parentNode`](https://developer.mozilla.org/en-US/docs/DOM/Node.parentNode)属性中获取父级：

```
function clear() {
    var elems = document.getElementsByClassName("box");
    for (var k = elems.length - 1; k >= 0; k--) {
        var parent = elems[k].parentNode;
        parent.removeChild(elems[k]);
    }
} 
```

# android - 滑动菜单未在滑动时打开

> ID：14285577
> 
> 赞同：4
> 
> 时间：2013-01-11T19:46:44.397
> 
> 标签：android

我正在尝试在我的应用程序中使用`Sliding Menu` [库](https://github.com/jfeinstein10/SlidingMenu/)，但我无法用手指滑动它。我`toggle()`可以`home`打开`slide my finger across the ActionBar`它

这是我的活动

```
public class SmsActivity extends SlidingActivity {

@Override
public void onCreate(Bundle state){
    super.onCreate(state);
    setContentView(R.layout.sms_layout);
    Intent i = getIntent();
    view = i.getIntExtra("sms_view", 1);

    ActionBar bar = getActionBar();
    bar.setDisplayHomeAsUpEnabled(true);
    bar.setIcon(R.drawable.menu_button);
    setBehindContentView(R.layout.sms_menu_layout);

    SlidingMenu menu = getSlidingMenu();
    menu.setMode(SlidingMenu.LEFT);
    menu.setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
    menu.setShadowWidthRes(R.dimen.shadow_width);
    menu.setShadowDrawable(R.drawable.shadow);
    menu.setBehindOffsetRes(R.dimen.slidingmenu_offset);
    menu.setFadeDegree(0.35f);
    setSlidingActionBarEnabled(true);

} 
```

菜单应该打开一个`PreferenceFragment`，内容只是一个`ListFragment`

这是该活动的 XML

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<fragment android:id="@+id/sms_frame"
    android:name="com.app.notifyme.Fragments.ContactListFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"/>

</LinearLayout> 
```

我尝试按照示例进行操作，但我没有看到任何与我所拥有的不同的东西，所以我不知道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:53:47.107

我想你可能错过了这两行：

```
menu.attachToActivity(this, SlidingMenu.SLIDING_WINDOW);
menu.setMenu(R.layout.sm_app); 
```

这些将您的 SlidingMenu 连接到您的活动 - 您没有看到菜单，因为它没有附加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T13:27:30.130

我遇到了同样的问题，我用以下方法解决了它：

```
menu.attachToActivity(this, SlidingMenu.SLIDING_WINDOW); 
```

代替

```
menu.attachToActivity(this, SlidingMenu.SLIDING_CONTENT); 
```

例子：

```
menu = new SlidingMenu(this);
menu.setMode(SlidingMenu.LEFT);
menu.setTouchModeAbove(SlidingMenu.TOUCHMODE_MARGIN);

menu.setShadowDrawable(R.drawable.bg_menu_shadow);
menu.setShadowWidthRes(R.dimen.bg_shadow_width);

menu.setBehindScrollScale(0.0f);
menu.setFadeDegree(0.35f);
menu.attachToActivity(this, SlidingMenu.SLIDING_WINDOW);
menu.setMenu(R.layout.menu); 
```

小心

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T14:36:58.263

尝试为从 Fragment 中的 onCreateView 返回的视图设置 setClickable(true)。

# asp.net - 在数据上下文上切换连接字符串

> ID：14285580
> 
> 赞同：0
> 
> 时间：2013-01-11T19:46:51.690
> 
> 标签：asp.net, vb.net, linq-to-sql

我在*VS2010上有一个**VB.NET*解决方案文件，格式如下

 *```
Code.Business (Business layer) .vb classes.
Code.Data (Data layer) LINQ to SQL .dbml files. 
Code.Web (UI layer) - ASPX pages. 
```

我的`datacontext`数据层中有一个并且有一个更改的默认构造函数

```
Public Sub New()
MyBase.New(ConfigurationManager.ConnectionStrings("MyConStr").ConnectionString, mappingSource)
OnCreated()

End Sub 
```

现在`datacontext`通过业务层 vb 类从所有网页中使用它。

我正在尝试切换到正确的数据库*(Dev/Test/Prod)*。我想使用上面的构造函数并为*("MyConStr")*传递正确的值，以便它可以指向正确的数据库。

我的文件中有所有三个值*（Dev/Test/Prod）**`web.config`*。

在*`Global.asax - Application_Start event`*我正在从`web.config`应用程序变量中读取值。

```
 Dim strDBCon As String = ConfigurationManager.AppSettings(strServer & "_connstr")
 Application("ConString") = strDBCon 
```

我尝试了*Application( `"Constring"`)*并且该值似乎没有被保留，并且我无法在我的默认构造函数上切换该值`datacontext`。

有没有人对这种情况有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T20:38:45.173

我认为您可以添加`partial class`数据上下文。请参阅`Handling Multiple Result Shapes from SPROCs`此链接：

[LINQ to SQL（第 6 部分 - 使用存储过程检索数据）](http://weblogs.asp.net/scottgu/archive/2007/08/16/linq-to-sql-part-6-retrieving-data-using-stored-procedures.aspx)

我认为您可以使用`partial class`编写自己的构造函数*

# jquery - jQuery 的动画问题

> ID：14285584
> 
> 赞同：1
> 
> 时间：2013-01-11T19:47:16.543
> 
> 标签：jquery, animation, jquery-animate

**[小提琴](http://jsfiddle.net/BramVanroy/tKL8E/13/)**。

相关代码（也在小提琴中注释）：

```
// tooltip positioning on hover and overlay fade on all li's except for submenu items that are not the last child
$("ul:not(.sub-menu) > li, ul.sub-menu > li:last-child").not(":has(ul.sub-menu)").hover(function () {
  var $this = $(this),
    title = $(this).children("a").data("title"),
    posL = $this.offset().left + ($this.width() / 2),
    posT = $this.height(),
    tooltip = $("#tooltip"),
    overlay = $("#overlay");

  $this.addClass("over-down");
  overlay.stop(true).fadeIn("slow"); // RELEVANT FOR QUESTION
  tooltip.stop(true, true).text(title).animate({ // RELEVANT FOR QUESTION
    "left": posL - (tooltip.width() / 2),
      "top": posT + $this.offset().top + 20
  }, 300).fadeIn("fast");
}, function () {
  var $this = $(this),
    tooltip = $("#tooltip"),
    overlay = $("#overlay");

  $this.removeClass("over-down");
  overlay.stop(true).fadeOut("slow"); // RELEVANT FOR QUESTION
  tooltip.stop(true).fadeOut(400); // RELEVANT FOR QUESTION
}); 
```

在小提琴中，尝试将鼠标悬停在一个项目上，然后短暂离开它并悬停另一个项目。你会看到`#overlay`div 已经部分淡出，`#tooltip`span 也是如此。我想要的是两者之间的平滑过渡，所以通常情况下，工具提示和覆盖应该再次淡入到 100%，但它们没有。我一直在搞砸，`.stop()`但似乎没有任何效果。

每个测试的浏览器（IE10、FF、Chrome）都会出现此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T20:06:51.670

当您`.stop(true)`在 a 中间时`fadeOut`，该项目将不会设置为，`display:none`因此下一个`fadeIn`将无效。

有两种可能的解决方案：

`.stop(true, true)`在 the 之前使用将`fadeIn`强制在元素上突然`display:none`出现，从而连续启用 a `fadeIn`。这不是一个非常顺利的解决方案。[小提琴](http://jsfiddle.net/tKL8E/15/)

另一种解决方案是使用[`fadeTo`](http://api.jquery.com/fadeTo/)而不是`fadeIn`. `fadeTo`将动画不透明度类似于`fadeIn`，但没有`display:none`要求。它也适用于将它们淡入的隐藏元素`fadeIn`：

```
$this.addClass("over-down");
overlay.stop(true).fadeTo(600, .75); //edited here
tooltip.stop(true, true).text(title).animate({ //here*
    "left": posL - (tooltip.width() / 2),
    "top": posT + $this.offset().top + 20
}, 300).fadeTo(200, 1); //and here 
```

[**小提琴**](http://jsfiddle.net/tKL8E/14/)

这是一种更顺利的解决方案。它将`.75`独立于当前的不透明度或显示将元素正确地设置为不透明度。

*在工具提示中添加了一个，因此在您排队`.stop(true, true)`时它不会保持半褪色。`fadeTo`如果您想滑动它们，请尝试：

```
var do_dequeue = tooltip.is(':visible');
tooltip.stop(true).text(title).animate({ // RELEVANT FOR QUESTION
    "left": posL - (tooltip.width() / 2),
    "top": posT + $this.offset().top + 20,
}, 300).fadeTo(200, 1);
if (do_dequeue) tooltip.dequeue(); 
```

[**小提琴**](http://jsfiddle.net/tKL8E/19/)

var在`do_dequeue`准备移动然后淡入队列之前跟踪工具提示是否部分淡化，如果它是部分淡化，那么它不会等待工具提示被放置在元素下，然后再将其淡化回完全不透明度。我想这是它可以得到的更顺畅。`=]`

# web-services - SyntaxError：使用 Kendo UI 创建 DataSource 时出现无效标签错误

> ID：14285585
> 
> 赞同：2
> 
> 时间：2013-01-11T19:47:23.247
> 
> 标签：web-services, gridview, asp.net-mvc-4, kendo-ui

我刚开始研究 Kendo UI，我为 MVC Web 应用程序项目创建了一个 Kendo UI，并创建了一个视图，该视图将在网格中显示用户列表，用户的数据是从我创建的 Azure Web 服务中检索的。

我遇到的问题是有一个语法错误，说标签无效。这是 Firebug 正在捕获的 json

```
{
    "Meta": {
        "Method": "GetUsuarios",
        "Status": "ok"
    },
    "Response": [
        {
            "ApellidoM": "TestInfo1",
            "ApellidoP": "TestInfo1",
            "CreatedDateTime": "/Date(1357763187027-0600)/",
            "Nombre": "TestInfo1",
            "Password": "TestInfo1",
            "UpdatedDateTime": "/Date(1357763187027-0600)/",
            "UserName": "TestInfo1",
            "UsuarioId": 1
        },
        {
            "ApellidoM": "TestInfo2",
            "ApellidoP": "TestInfo2",
            "CreatedDateTime": "/Date(1357863418857-0600)/",
            "Nombre": "TestInfo2",
            "Password": "TestInfo2",
            "UpdatedDateTime": "/Date(1357863418857-0600)/",
            "UserName": "TestInfo2",
            "UsuarioId": 2
        }
    ]
} 
```

我在 JSONLint.com 上对其进行了测试，它是一个有效的 json 字符串，这是我创建 DataSource 并填充网格的 javascript 函数：

```
$(function () {
    var ds = new kendo.data.DataSource({
        transport: {
            read: {
                url: "http://127.0.0.1:81/SismosService.svc/usuario/index",
                dataType: "jsonp"
            }
        },
        schema: {
            data: "Response"
        },
    });
    $("#usuariosGrid").kendoGrid({
        columns: ["Nombre", "ApellidoP", "ApellidoM"],
        dataSource: ds
    });
}); 
```

这是我的观点：

```
<!DOCTYPE html>

<html>
<head >
    <link href="<%: Url.Content("~/Content/kendo/2012.3.1114/kendo.common.min.css")%>" rel="stylesheet" type="text/css" />
    <link href="<%: Url.Content("~/Content/kendo/2012.3.1114/kendo.default.min.css")%>" rel="stylesheet" type="text/css" />
    <title><%: ViewBag.GestionTitle %></title>
</head>
    <body>

        <h1><%: ViewBag.GestionTitle %></h1>
        <div id="usuariosGrid"></div>
        <button id="addUsuario" type="button" class="k-input"><%: ViewBag.Agregar %></button>

        <script src="<%: Url.Content("~/Scripts/jquery-1.7.1.min.js")%>"></script>
        <script src="<%: Url.Content("~/Scripts/kendo/2012.3.1114/kendo.web.min.js")%>"></script>
        <script src="<%: Url.Content("~/Scripts/usuario/usuario.js")%>"></script>
    </body>
</html> 
```

如您所见，我想做的事情很简单，那为什么会失败呢？我的 Web 服务在我创建的 ResponseObject 中发送用户列表，该类如下所示：

```
[DataContract]
public class ResponseObject<T>
{
    public ResponseObject(T[] Response, MetaObject Meta)
    {
        this.Response = Response;
        this.Meta = Meta;
    }
    [DataMember]
    public T[] Response { get; set; }
    [DataMember]
    public MetaObject Meta { get; set; }
} 
```

Meta 只是我创建的另一个类，只是为了在我的 Web 服务增长时添加更多信息，并且需要将新信息发送到客户端。

这是在我的界面中定义获取用户的方法的方式：

```
 [WebGet(UriTemplate = "/usuario/index",
    RequestFormat = WebMessageFormat.Json,
    ResponseFormat = WebMessageFormat.Json,
    BodyStyle = WebMessageBodyStyle.Bare)]
    ResponseObject<Usuarios> GetUsuarios(); 
```

我收到此错误是什么？我发送用户的方式是否错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T22:09:03.853

好的，我解决了这个问题，我在我的 Web 服务中添加了以下内容以启用 Access-Control-Allow-Origin

```
<httpProtocol>
  <customHeaders>
    <add name="Access-Control-Allow-Origin" value="*"/>
  </customHeaders>
</httpProtocol> 
```

这在 system.webServer 标记内。希望这可以帮助任何有类似问题的人。

# java - 使用 AspectJ 编织 toString() 实现

> ID：14285591
> 
> 赞同：9
> 
> 时间：2013-01-11T19:47:43.687
> 
> 标签：java, aop, aspectj, tostring, dto

尝试为大量 DTO 编织默认的 toString() 方法，仅使用编译时编织。目标是使用 Jackson 库返回 JSON 表示。

[按照这篇文章](http://invalidcodeexception.com/implementing-a-default-tostring-method-with-aspectj/)的建议，把它变成了注解风格的切面配置，最后得到如下代码：

```
public @Aspect class JsonToStringAspect {
    private interface JsonToString {
        public String toString();
    }

    public static class JsonToStringImpl implements JsonToString {
        public String toString() {
            return SingletonJsonEncoder.toJsonString(this);
        }
    }

    @SuppressWarnings("unused")
    @DeclareParents(value = "com.mycompany.dto..*", defaultImpl = JsonToStringImpl.class)
    private JsonToString implementedInterface;
} 
```

在生成的类上运行`javap`表明它们实现了 JsonToString 接口，但在任何地方都没有 toString() 方法的迹象。

如果我将方法名称更改为不与 Object.toString() 冲突的名称（例如 toString2()），则真正添加了该方法。

关于如何克服这个问题的任何线索？也许一个`@Around`关于拦截 java.lang.Object.toString() 执行的切入点的建议，仅适用于 package 下的子类`com.mycompany.dto`？还是一种强制混合发生的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T22:17:25.440

我尝试了您的场景并且可以复制该行为，我还尝试了`@DeclareMixin`代替的组合，但`@DeclareParent`也无法使其正常工作。不过，对我有用的是以这种方式使用本机 aspectj：

```
public aspect JsonToStringAspect {
    private interface JsonToString {}
    declare parents: com.mycompany.dto.* implements JsonToString;

    public String JsonToString.toString() {
        return "Overridden String through JsonToStringAspect";
    }
} 
```

我猜这可能不可行`@AspectJ`，只能通过本机方面来实现。

# java - 将类属性传递给另一个表单，然后编辑其值

> ID：14285597
> 
> 赞同：0
> 
> 时间：2013-01-11T19:48:08.553
> 
> 标签：java, swing, class, reference

假设我有两种 JFrame 形式：`StaffListMenu`和`LeaveDetailsMenu`.

在`StaffListMenu`类中，我有一个名为的属性`staff`，它是当前系统上所有工作人员的 ArrayList。我想`LeaveDetailsMenu`通过单击按钮打开表单，并将`staff`属性传递给`LeaveDetailsMenu`类。据我所知，我会这样做：

```
private void btnLeaveDetailsActionPerformed(java.awt.event.ActionEvent evt) {
    LeaveDetailsMenu leaveDetailsForm = new LeaveDetailsMenu(staff);
    leaveDetailsForm.setVisible(true);
} 
```

现在，我想调用一些方法并从类中重新分配`staff`ArrayList中的一些元素。`leaveDetailsMenu`如果我这样做，更改会反映在类的`staff`属性中`StaffListMenu`吗？

我读到 Java 不会通过引用传递（就像 C# 一样，这是我用于桌面应用程序的唯一其他语言），而是将指针传递给`staff`. 按照这个逻辑，它应该对类中的属性进行更改`StaffListMenu`，对吧？

另外，一个两部分的问题，`StaffListMenu`当`LeaveDetailsMenu`表格关闭时，我有没有办法在课堂上识别？像回调？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T19:57:29.557

> 它应该对 StaffListMenu 类中的属性进行更改，对吗？

是的。您正在传递 ArrayList 对象（从技术上讲，您正在通过值传递 ArrayList 在内存中的地址的值），因此在调用内部对对象所做的任何更改都将在其外部可见。

> 当 LeaveDetailsMenu 表单关闭时，我可以在 StaffListMenu 类中识别吗？

是的。看看[Window.addWindowListener(WindowListener l)](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#addWindowListener%28java.awt.event.WindowListener%29)（JFrame 继承）。您提供一个侦听器，您可以收到窗口关闭事件的通知。

# wso2 - WSO2 API Manager 重定向到错误的地址

> ID：14285598
> 
> 赞同：2
> 
> 时间：2013-01-11T19:48:16.433
> 
> 标签：wso2, wso2-am

我正在 WSO2 API Manager 上发布我们的 API 之一。API 具有我通过 HTTP GET 调用访问的以下资源：[http://content.my-company.com/data/articles/123456](http://content.my-company.com/data/articles/123456)，其中“123456”是文章 ID。

在 API 管理器上，我正在“内容”上下文中注册此 API 的 v1 版本，以便我能够通过以下方式访问它： http: [//api.my-company.com/contents/v1/数据/文章/123456](http://api.my-company.com/contents/v1/data/articles/123456)

问题是我目前收到 404 错误，查看 API 日志，它显示 API 从 WSO2 接收的请求是：[http ://content.my-company.com/http%3A// content.my-company.com/data/articles/123456](http://content.my-company.com/http%3A//content.my-company.com/data/articles/123456)，而不是[http://content.my-company.com/data/articles/123456](http://content.my-company.com/data/articles/123456)

任何人都知道为什么请求被错误地重定向到我的 API？

提前致谢！

此致，

亚历克斯。

# python - 将现有模型迁移到 Django 内置用户模型

> ID：14285603
> 
> 赞同：4
> 
> 时间：2013-01-11T19:48:29.037
> 
> 标签：python, django, django-models, django-users

我正在运行一个 Django 1.4.2 项目。我有一个 User(models.Model) 类的数据库，现在想更改它，以便我使用来自 django.contrib.auth.models 的内置模型 User。我可以简单地使用我现有的代码并简单地使我自己的自定义用户模型成为 Django 内置的子类吗？这是现在的模型。

```
class User(models.Model):
    u_id = models.AutoField(primary_key=True)
    #password = models.CharField(max_length=765)
    old_password = models.CharField(max_length=765, null=True, blank=True)
    birthday = models.DateField(null=True, blank=True)
    school_year = models.CharField(max_length=765, blank=True)
    gender = models.CharField(max_length=18, blank=True)
    #email = models.CharField(max_length=765, blank=True)
    profile_pic = models.CharField(max_length=765, blank=True)
    is_cloudinary_pic = models.BooleanField(default=False)
    fb_id = models.CharField(max_length=765, blank=True)
    phone_num = models.CharField(max_length=765, blank=True)
    name = models.CharField(max_length=765, blank=True)
    confirmcode = models.CharField(max_length=765, blank=True)
    status = models.CharField(max_length=765, blank=True)
    netid = models.CharField(max_length=765, blank=True)
    favorites = models.ManyToManyField('listings.Listing', blank=True, related_name='favorites')
    stripe = models.CharField(max_length=765, blank=True)
    rating = models.IntegerField(null=True, blank=True)
    preferences = models.CharField(max_length=765, blank=True)
    b_notification = models.CharField(max_length=765, blank=True)
    l_notification = models.CharField(max_length=765, blank=True)
    address = models.CharField(max_length=765, blank=True)
    city = models.CharField(max_length=765, blank=True)
    state = models.CharField(max_length=6, blank=True)
    zip = models.CharField(max_length=15, blank=True)
    emailprefs = models.CharField(max_length=30, blank=True)
    exp_month = models.CharField(max_length=6, blank=True)
    exp_year = models.CharField(max_length=12, blank=True)
    last4 = models.CharField(max_length=12, blank=True)
    c_type = models.CharField(max_length=765, blank=True)
    user_type = models.CharField(max_length=10, blank=True)
    contract = models.ForeignKey('contracts.Contract', null=True,blank=True, default=None, on_delete=models.SET_NULL)
    last_listing_booked = models.ForeignKey('listings.Listing', null=True,blank=True, default=None, on_delete=models.SET_NULL, related_name='last_listing_booked')
    last_locked_on = models.IntegerField(null=True, blank=True)
    waitlist_number = models.IntegerField(null=True, blank=True)
    waitlist_listing = models.ForeignKey('listings.Listing', null=True, blank=True, on_delete=models.SET_NULL, related_name='waitlist_listing')
    uploaded_contract = models.FileField(upload_to=contract_file_name, max_length=765, null=True, blank=True, default=None, storage=FileSystemStorage(location=os.path.join(MEDIA_ROOT, 'contracts'))) 
```

当我在使我的模型成为 Django User 模型的子类之后尝试使用 Django South 进行迁移时，我被要求为 user_ptr 设置一个值，该字段我没有成功找到任何信息。

一般来说，以这种方式简单地进行子类化是不安全的吗？我不能丢失我已经拥有的所有用户数据并重新开始。请注意，密码和电子邮件字段被注释掉，因为它们与 Django 的这些字段版本冲突。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T20:20:44.260

如果升级到 Django 1.5 是一个选项，您可以简单地[使用您自己的 User 模型](https://docs.djangoproject.com/en/dev/releases/1.5/#configurable-user-model)，只要它提供所有必需的字段。

user_ptr 是一个隐式 OneToOne 模型，它将您的对象与您派生的类相关联。最简单的方法可能是在以下步骤中手动创建迁移：

1.  添加带有 null=True 的 user_ptr 字段

2.  遍历所有 User 对象并创建相应的 auth.User 对象。如果您不确定如何执行此操作，可以阅读South 文档中[有关数据迁移的部分。](http://south.readthedocs.org/en/latest/tutorial/part3.html)

3.  禁止空 user_ptr 字段

如果您使用的散列方案与 Django 的内置方法不兼容，您可能需要做的另一件事是实现自己的密码散列器。这不是很难做到，并在[另一个问题](https://stackoverflow.com/questions/8794512/is-it-possible-to-change-the-hashing-algorithm-in-django-auth)中得到解决。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T20:37:00.630

如果使用 Django 1.4，您应该创建一个`UserProfile`模型而不是从`django.contrib.auth.models.User`. 直接扩展 Django 的 User 类会导致内部 django.auth 机制的各种麻烦。

[您可以在http://www.turnkeylinux.org/blog/django-profile](http://www.turnkeylinux.org/blog/django-profile)阅读有关如何在 django 中实现用户配置文件的更多信息。

Django 1.5 具有[可配置的用户模型](https://docs.djangoproject.com/en/dev/releases/1.5/#configurable-user-model)，如[Vinay Pai的](https://stackoverflow.com/users/468495/vinay-pai)[另一个答案](https://stackoverflow.com/a/14286032/353550)中所述。

# c# - C# 在光标上生成 Windows 窗体

> ID：14285608
> 
> 赞同：1
> 
> 时间：2013-01-11T19:48:44.230
> 
> 标签：c#, forms, location

这可能真的很容易，但我仍然无法弄清楚。我试图在光标的位置（双击）生成我的 Windows 窗体。我能够得到我需要的一切`(`cursorXY `,`clickhandler `)`，但我不知道如何在我之前或之后编辑表单`Show()`。

```
public Form2(int cursorX, int cursorY)
{
    Location = new Point(cursorX, cursorY);
... 
```

这不起作用，我知道，因为它指的是它在容器中的位置。我通过`form.Location`在调试时捕获来收集它（它总是 0,0）。所以编辑`Location`到目前为止没有做任何事情。我可以移动容器或窗口吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:56:23.407

将`StartPosition`表单设置为`Manual`：

```
public Form2(int x, int y)
{
    InitializeComponent();
    this.StartPosition = FormStartPosition.Manual;
    this.Location = new Point(x, y);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T20:00:03.280

将 StartPosition 设置为手动

```
public Form2(int x, int y)
{
   ...
   this.Location = new Point(x,y)
   this.StartPosition = FormStartPosition.Manual;
   ...
} 
```

[查看更多](http://msdn.microsoft.com/en-us/library/system.windows.forms.formstartposition.aspx)

# macos - MAMP OS X 10.8.2 虚拟主机

> ID：14285613
> 
> 赞同：0
> 
> 时间：2013-01-11T19:48:59.127
> 
> 标签：macos, mamp, virtualhost

我正在尝试在我的 Macbook Pro 上设置 MAMP，但我似乎无法运行虚拟主机。这是我在这方面的第一次尝试。我来自 WAMP/Windows 7 环境，所以我可能忽略了一些东西。我已经按照 MAMP 网站上的指南，以及从 Google 搜索中呈现的其他几个指南，但无济于事......

我的 /etc/hosts：

```
127.0.0.1       localhost
255.255.255.255 broadcasthost
::1             localhost
fe80::1%lo0     localhost
127.0.0.1 robabby 
```

我的 httpd-vhosts.conf：

```
#
# Use name-based virtual hosting.
#
NameVirtualHost *:80

#
# VirtualHost example:
# Almost any Apache directive may go into a VirtualHost container.
# The first VirtualHost section is used for all requests that do not
# match a ServerName or ServerAlias in any <VirtualHost> block.
#

<VirtualHost *:80>
    DocumentRoot "/Users/admin/Development/websites/robabby"
    ServerName robabby
</VirtualHost> 
```

我按照 MAMP GUI 设置新主机。
![在此处输入图像描述](../Images/71fd37b4c1eaa574d946ae0dd08b405d.png)

将我的浏览器指向 robabby:80，我得到一个`ERROR: 500 (internal server error)` ![在此处输入图像描述](../Images/4777a4e0b7a1544507bf46f929479cff.png)

非常感谢任何帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T20:08:04.950

您在这里有两种不同的服务器设置

1 / 监听端口 80（但你应该检查一下，试试“http://127.0.0.1:80”

2 / 监听 8888 端口（即服务器返回错误信息）

您的内置服务器默认为 80，Mamp 正在侦听端口 8888。

是否有两个不同的配置文件或者 Mamp 应该接管内置的 Apache？

你需要解决这个问题。

同时

*   试试 robabby:80

*   尝试将您的虚拟主机更改为 8888

_

```
 NameVirtualHost *:8888

<VirtualHost *:8888>
    DocumentRoot "/Users/admin/Development/websites/robabby"
    ServerName robabby
</VirtualHost> 
```

但是我认为您正在混淆两个服务器设置...

# sdk - 如何为 *.vsct 文件中的工具栏定义 SplitDropDown 或 MenuButton？

> ID：14285622
> 
> 赞同：4
> 
> 时间：2013-01-11T19:49:28.943
> 
> 标签：sdk, visual-studio-2012, vsx, visual-studio-extensions, vsix

[我按照这个演练描述](http://msdn.microsoft.com/en-us/library/vstudio/bb164714.aspx)为工具窗口定义了一个工具栏。

将新按钮添加到工具栏，并将它们连接到我的包中的代码，没有问题并且工作正常（所以我不是在寻找有关如何添加简单按钮的信息）。我看到还有其他按钮类型，例如`SplitDropDown`和`MenuButton`。两者都完全符合我的要求。但是我找不到任何关于如何以正确方式定义子菜单的信息，我所有的实验都失败了。

这是我的按钮定义：

```
<Button guid="guidVsCmdSet" id="cmdIdSplitDowndown" priority="0x106" type="SplitDropDown">
  <Parent guid="guidVsCmdSet" id="VsToolbarGroup" />
  <Icon guid="guidImages" id="bmpPic2" />
  <CommandFlag>IconAndText</CommandFlag>
  <Strings>
    <CommandName>cmdIdSplitDropdown</CommandName>
    <ButtonText>Goto Next</ButtonText>
  </Strings>
</Button> 
```

我想添加一个`SplitDropDown`具有一些预定义/静态子项的按钮。我猜按钮的视觉外观看起来像 Visual Studio 的“向后导航”按钮。这就是我想要达到的目标。

有谁知道`SplitDropDown`按钮的定义，有一个子菜单，会是什么样子？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T10:15:29.313

Visual Studio IDE似乎不再支持`SplitDropDown`and`MenuButton`类型（至少 v11，但我没有在早期版本上测试过。也许我错了，但我无法将这些按钮放入我的工具栏中） . 相反，可以使用`Menu`or类型的菜单。`MenuController`该类型的`Menu`行为类似于 deprecated `MenuButton`（即使它的视觉外观并不完全相同，因为它的按钮高度较小）并且该类型的`MenuController`行为类似于 deprecated `SplitDropDown`。

因此，为了获得拆分下拉菜单，我在 VSCT 文件中添加了以下菜单声明：

```
<Menu guid="guidVsCmdSet" id="menuIdSubMenu" type="MenuController" priority="0x0001" toolbarPriorityInBand="0x0001">
    <Parent guid="guidVsCmdSet" id="VsToolbarGroup" />
    <CommandFlag>IconAndText</CommandFlag>
    <CommandFlag>NotInTBList</CommandFlag>
    <Strings>
        <ButtonText>My Button</ButtonText>
        <CommandName>My Button</CommandName>
    </Strings>
</Menu> 
```

并为下拉命令创建了一个新组；该组的父级设置为菜单。

```
<Group guid="guidVsCmdSet" id="VsSubMenuGroup" priority="0x0001">
    <Parent guid="guidVsCmdSet" id="menuIdSubMenu" />
</Group> 
```

最后，我可以将普通按钮添加到该组中，它们将显示为菜单项。

```
<Button guid="guidVsCmdSet" id="cmdIdSubMenuItem1" priority="0x0001" type="Button">
    <Parent guid="guidVsCmdSet" id="VsSubMenuGroup" />
    <CommandFlag>TextOnly</CommandFlag>
    <Strings>
        <CommandName>cmdIdSubMenuItem1</CommandName>
        <ButtonText>Members</ButtonText>
    </Strings>
</Button> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-09-21T02:36:30.517

Matze 的解决方案将显示`MenuController`为文本。如果您想显示`MenuController`为图标，例如 VS 工具箱中的撤消或重做，您可以为 : 添加一个`Button`作为锚项`MenuController`：

```
 <Button guid="guidVsCmdSet" id="AnchorButton" priority="0x0100" type="Button">
    <Parent guid="guidVsCmdSet" id="VsSubMenuGroup" />
    <Icon guid="guidIcons" id="IconId" />
    <CommandFlag>NoShowOnMenuController</CommandFlag>  
    <!-- Become the permanent anchor item for the menu controller -->  
    <CommandFlag>FixMenuController</CommandFlag>
    <CommandFlag>Pict</CommandFlag>
    <Strings>
      <ButtonText>Button Text</ButtonText>
    </Strings>
  </Button> 
```

关键是`NoShowMenuController`和`FixMenuController` `CommandFlag`。

我花了几个小时才弄明白，直到我看到这个页面：[https ://docs.microsoft.com/en-us/visualstudio/extensibility/dynamically-adding-menu-items?view=vs-2017](https://docs.microsoft.com/en-us/visualstudio/extensibility/dynamically-adding-menu-items?view=vs-2017)

# java - Android Java 接口回调 onPostExecute 空指针异常

> ID：14285624
> 
> 赞同：3
> 
> 时间：2013-01-11T19:49:38.127
> 
> 标签：java, android, callback

我有以下课程：

**主.java**

```
package com.example.webapp;

import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.text.format.Time;
import android.util.Log;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.widget.TextView;

public class Main extends Activity {

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // Handle item selection
        switch (item.getItemId()) {
            case R.id.settings:
                showSettings();
                return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    }

    final Handler handler = new Handler()
    {
        public void handleMessage(Message msg) 
        {

            try {
                final String result = msg.toString();
                JSONObject jObject  = new JSONObject(result.toString());
                mainView(jObject);
              }
              catch(JSONException e) {
                e.getCause();
              }

        };
    };

    public void mainView(JSONObject result){

    }

    public void showSettings(){
        setContentView(R.layout.settings);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.menu, menu);
        return true;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.d("Oncreate","1");
        String url = "http://xxx.xxx.xxx/webapp/server.php?method=getPageIndexLiveValues";
        Log.d("Oncreate","2");
        JSONhandler parser = new JSONhandler(this);
        parser.execute(url);

        Log.d("Oncreate","3");

    }

        public void onRequestCompleted(JSONObject result) {
            setContentView(R.layout.main);
           Log.d("onRequestComplete","complete");
            try {
                TextView test1 = (TextView) findViewById(R.id.textView1);
                test1.setText(result.getString("GP").toString()+"W");
                TextView test2 = (TextView) findViewById(R.id.textView2);
                test2.setText(result.getString("IP").toString()+"W");
                TextView test3 = (TextView) findViewById(R.id.textView3);
                test3.setText(result.getString("EFF").toString()+"%");

                Time today = new Time(Time.getCurrentTimezone());
                today.setToNow();

                TextView textViewDay = (TextView) findViewById(R.id.textDateTime);

                textViewDay.setText(today.monthDay+"-"+(today.month+1)+"-"+today.year+" "+today.format("%k:%M:%S"));             // Day of the month (0-31)

            } catch (JSONException e) {
                e.printStackTrace();
            }
        }

} 
```

JSONhandler.java 包 com.example.webapp；

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.os.AsyncTask;
import android.util.Log;

public class JSONhandler extends AsyncTask<String, Void, JSONObject> {

    //private static final JSONObject JSONObject = null;
    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    public JSONhandler(Main main){

    }

    public interface MyCallbackInterface {
        public void onRequestCompleted(JSONObject json);
    }

    private MyCallbackInterface mCallback;

    public void JSONParser(MyCallbackInterface callback) {
        mCallback = callback;
    }

    public JSONObject getJSONFromUrl(String url) { 
        Log.d("getJSONFromUrl","1");        
        // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();           

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    }

    @Override
    protected JSONObject doInBackground(String... params) {
        Log.d("doInBackground","1");
        String url = params[0];
        Log.d("doInBackground",url);
        Log.d("doInBackground","2");
        return getJSONFromUrl(url);
    }

    @Override
    protected void onPostExecute(JSONObject result) {
        super.onPostExecute(result);
        Log.d("onPostExecute",result.toString());

        //In here, call back to Activity or other listener that things are done
        try{
            JSONObject json = result.getJSONObject("sumIn");
            Log.d("onPostE Sum",json.toString());
            mCallback.onRequestCompleted(json); //<<<<<< See bel
        }catch(JSONException e){
            Log.d("onPostE Sum",json.toString());
        }
    }
} 
```

* * *

```
!!!!ERROR MESSAGE!!!!
E/AndroidRuntime(2237): FATAL EXCEPTION: main
E/AndroidRuntime(2237): java.lang.NullPointerException
E/AndroidRuntime(2237):     at com.example.webapp.JSONhandler.onPostExecute(JSONhandler.java:107)
E/AndroidRuntime(2237):     at com.example.webapp.JSONhandler.onPostExecute(JSONhandler.java:1)
and a lot more..... 
```

我对 Java/Android 很陌生，不知道这里发生了什么。希望可以有人帮帮我。

更新的代码：我更新了代码，但仍然在第 107 行得到错误（//<<<< 见下文）。当 json 初始化正确时，代码运行在 mCallback 错误中。当 json 为空时，TryCatch 捕获错误并记录“空”。

Main 的新代码并根据 Sam 的建议更改代码。

```
package com.example.webapp;

import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.text.format.Time;
import android.util.Log;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.widget.TextView;

import com.example.webapp.JSONhandler.MyCallbackInterface;

    public class Main extends Activity implements MyCallbackInterface  {

        @Override
        public boolean onOptionsItemSelected(MenuItem item) {
            // Handle item selection
        switch (item.getItemId()) {
            case R.id.settings:
                showSettings();
                return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    }

    final Handler handler = new Handler()
    {
        public void handleMessage(Message msg) 
        {

            try {
                final String result = msg.toString();
                JSONObject jObject  = new JSONObject(result.toString());
                mainView(jObject);
              }
              catch(JSONException e) {
                e.getCause();
              }

        };
    };

    public void mainView(JSONObject result){

    }

    public void showSettings(){
        setContentView(R.layout.settings);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.menu, menu);
        return true;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.d("Oncreate","1");
        String url = "http://xxx.xxx.xxx";
        Log.d("Oncreate","2");
        JSONhandler parser = new JSONhandler(this);
        parser.execute(url);

        Log.d("Oncreate","3");

    }

    @Override
    public void onRequestCompleted(JSONObject result) {
        setContentView(R.layout.main);
        Log.d("onRequestComplete","complete");
            try {
                TextView test1 = (TextView) findViewById(R.id.textView1);
                test1.setText(result.getString("GP").toString()+"W");
                TextView test2 = (TextView) findViewById(R.id.textView2);
                test2.setText(result.getString("IP").toString()+"W");
                TextView test3 = (TextView) findViewById(R.id.textView3);
                test3.setText(result.getString("EFF").toString()+"%");

                Time today = new Time(Time.getCurrentTimezone());
                today.setToNow();

                TextView textViewDay = (TextView) findViewById(R.id.textDateTime);

                textViewDay.setText(today.monthDay+"-"+(today.month+1)+"-"+today.year+" "+today.format("%k:%M:%S"));             // Day of the month (0-31)

            } catch (JSONException e) {
                e.printStackTrace();
            }
        }

} 
```

JSONhandler 的新代码并根据 Sam 的建议更改代码。

```
package com.example.webapp;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.os.AsyncTask;
import android.util.Log;

public class JSONhandler extends AsyncTask<String, Void, JSONObject> {

    //private static final JSONObject JSONObject = null;
    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    public JSONhandler(Main main){

    }

    public interface MyCallbackInterface {
        public void onRequestCompleted(JSONObject json);
    }

    private MyCallbackInterface mCallback;

    public JSONhandler(MyCallbackInterface callback) {
        mCallback = callback;
    }

    public JSONObject getJSONFromUrl(String url) { 
        Log.d("getJSONFromUrl","1");        
        // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();           

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    }

    @Override
    protected JSONObject doInBackground(String... params) {
        Log.d("doInBackground","1");
        String url = params[0];
        Log.d("doInBackground",url);
        Log.d("doInBackground","2");
        return getJSONFromUrl(url);
    }

    @Override
    protected void onPostExecute(JSONObject result) {
        super.onPostExecute(result);
        Log.d("onPostExecute",result.toString());

        //In here, call back to Activity or other listener that things are done
        try{
            JSONObject json = result.getJSONObject("sumInvrters");
            Log.d("onPostE Sum",json.toString());
            mCallback.onRequestCompleted(json); //<<<< see below 
        }catch(JSONException e){
            Log.d("onPostE Sum","empty");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:53:20.167

使用 LogCat 和您的笔记：

```
mCallback.onRequestCompleted(json); //<<<<<< See bel 
```

它似乎`mCallback`为空，因为您忘记定义它。让我们稍微改变一下：

1.  让您的 Activity 实现您的回调：

    ```
    public class Main extends Activity implements MyCallbackInterface { 
    ```

    并`@Override`在`onRequestCompleted()`必要时添加。

2.  删除`JSONhandler`期望 Activity 的构造函数，并将其替换为期望您的接口的构造函数。

    * * *

    所以删除这段代码：

     ~~~~```
    public JSONhandler(Main main){

    }

    public void JSONParser(MyCallbackInterface callback) {
        mCallback = callback;
    } 
    ```~~  ~~* * *

    请改用此构造函数：

    ```
    public JSONhandler(MyCallbackInterface callback) {
        mCallback = callback;
    } 
    ```~~~~ 

 ~~~~现在这段代码应该可以正常工作了：

```
JSONhandler parser = new JSONhandler(this);
parser.execute(url); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:53:19.290

第 107 行的值之一为空。可能是 mCallback，假设您评论“见下文”的行是 107。这是因为从未调用过 JSONParse。请注意，这是一个函数而不是构造函数——它应该是一个构造函数吗？~~~~

# google-analytics - Google Analytics 过滤器以包含基于子域和请求 URI 的流量

> ID：14285629
> 
> 赞同：1
> 
> 时间：2013-01-11T19:50:11.707
> 
> 标签：google-analytics

我正在尝试设置我认为可能是高级过滤器。

我想包括到 m.mydomainname.com 子域的所有流量，还包括到页面 mydomainname.com/my_page.html 的所有流量（请注意，它在我的主域上，而不是我的子域上）。

我不能只做 2 个包含过滤器，因为如果我将所有到 m.mydomainname.com 的流量都包含在内，那么这将丢弃对 mydomainname.com/my_page.html 的点击。

有谁知道我需要设置哪些过滤器来创建一个配置文件，该配置文件包括到子域的所有流量以及到我的主域上 1 个特定页面的流量？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T21:21:42.507

您需要两个自定义过滤器：

1.  第一个过滤器用于将主机名和 URI 组合成自定义字段
2.  第二个过滤器使用正则表达式，尝试将 m.mydomainname.com 或 mydomainname.com/my_page.html 与第一个过滤器中定义的自定义字段进行匹配。

对于第一个过滤器，类似于：

```
Custom filter
Advanced
Field A -> Extract A: Hostname, (.*)
Field B -> Extract B: Request URI, (.*)
Output To -> Constructor: Custom Field 1, $A1$B1 
```

对于第二个过滤器，类似于：

```
Custom filter
Include
Filter Field: Custom Field 1
Filter Pattern: m\.mydomainname\.com|mydomainname\.com/my_page\.html 
```

第二个过滤器包括所有流量或 m.mydomainname.com 或单页 mydomainname.com/mypage.html

* * *

使用过滤器时，使用两个配置文件是“最佳实践”：

*   一个没有过滤器的配置文件，收集所有数据
*   使用过滤器的一个配置文件。

# ajax - Prestashop ajax 注册错误

> ID：14285631
> 
> 赞同：2
> 
> 时间：2013-01-11T19:50:21.520
> 
> 标签：ajax, prestashop

我正在尝试运行 prestashop。我已经制作了自定义主题，但注册有问题。当有人在结帐期间尝试注册时，他收到一个错误：

技术错误：无法加载表单。详细信息：抛出的错误：[object Object] 文本状态：错误

我不知道在哪里寻找解决方案。或者也许有人知道如何禁用 ajax 注册？

问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T12:22:50.240

我找到了解决方案。大多数消息来源告诉我应该关闭主题中的移动功能。我这样做了，但没有帮助。所以我检查了它引用某个地址的表格，但 AJAX 请求被定向到主页。

所以我修改了文件中的 AJAX 请求，使其指向与表单相同的位置。

在 /themes/default/authentication.tpl 关于第 97 行有一行：

```
url: baseUri, 
```

我已将其更改为：

```
url: baseUri + 'index.php?controller=authentication', 
```

所以 AJAX 请求在正确的地址下。之后，我不得不更改 /themes/default/mobile/authentication*.tpl 下的一些移动身份验证表单，因此它们包含一个用于输入电话号码的字段。解决整个问题的一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-20T13:58:24.950

这对我有用

> 在管理面板中，转到高级参数>性能，向下滚动到 CCC（组合、压缩和缓存），然后选择将 HTML 中的内联 JavaScript 保留为原始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-21T07:58:17.047

这种错误喜欢

```
TECHNICAL ERROR: unable to load form. Details: Error thrown: [object Object] Text status: error 
```

在一页结帐 (OPC)

从正确的位置与未挂钩的**blockuserinfo**（或此模块的已更改挂钩）相关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-24T10:38:05.370

此问题的另一个来源可能是 blockcart/ajax-cart.js

在某些情况下，即使不需要，它也会在 domready 上触发 ajaxCart.refresh()（实际上：在每个 f*n' 页面中），因此有时它会返回一个 html（主）文档而不是 ajax 文档，从而生成我们所说的技术错误。

为了解决这个问题，我只是重写了 blockcart/ajax-cart.js 并简单地注释掉了警告，以防 ajaxCart.refresh() 出现错误。这不是一个优雅的解决方案，但老实说，因为这是由一些非常糟糕的 js 架构引起的（阅读：某处的错误），并且由于我认为警报对任何前端用户都没有用，我也认为它没有很难评论它。

Prestashop 团队在编写 javascript 方面从来都不是特别聪明，所以我经常从头开始重写。但在这种情况下，我认为小覆盖更好。

# ruby-on-rails - Rails 在控制器中创建关联记录

> ID：14285633
> 
> 赞同：0
> 
> 时间：2013-01-11T19:50:39.517
> 
> 标签：ruby-on-rails

我有 3 张桌子：

项目

```
has_many :answers 
```

问题 --> 每个项目必须回答的问题

```
 has_many :answers 
```

答案

```
belongs_to :project

belongs_to :question 
```

所以，当我创建一个新项目时，我想遍历问题并创建一个答案记录。然后用户可以看到所有的问题并输入他们的答案。

在项目控制器中，我正在尝试创建这些记录。但是，以下方法不起作用：

```
 before_create :create_answers

protected
def create_answers
  Questions.each do |i|
    self.answers.build  contact_id: self.contact_id, question_id: Question[i].id
  end
end 
```

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T19:54:29.067

代替：

```
Questions.each 
```

做：

```
Question.all.each 
```

所有这些代码都需要进入 Project 模型，而不是 ProjectsController。

而不是：

```
Question[i].id 
```

做：

```
i.id 
```

确保这些属性也是`attr_accessible`如此。

全部一起：

```
before_create :build_answers

protected
def build_answers
  Question.all.each do |question|
    answers.build contact_id: contact_id, question_id: question.id
  end
end 
```

和 attr_accessible 位：

```
attr_accessible :contact_id, :question_id 
```

# asp.net-mvc - MVC 控制器 JsonResult 和启用 AJAX 的 WCF 服务之间的区别

> ID：14285647
> 
> 赞同：0
> 
> 时间：2013-01-11T19:51:54.233
> 
> 标签：asp.net-mvc, json, wcf, jquery

我正在尝试创建一个不需要回发并与服务器通信以获取复杂对象的动态网页。我开始创建一个启用 AJAX 的 WCF 服务，然后编写一些 jquery 来与该服务对话。我按照本教程[http://www.codeproject.com/Articles/132809/Calling-WCF-Services-using-jQuery](http://www.codeproject.com/Articles/132809/Calling-WCF-Services-using-jQuery)得到了它。

然后我意识到我可以单独使用 MVC 来执行此操作，将 JsonResult 类型作为控制器上的操作，遵循本教程：[http ://geekswithblogs.net/michelotti/archive/2008/06/28/mvc-json- --jsonresult-and-jquery.aspx](http://geekswithblogs.net/michelotti/archive/2008/06/28/mvc-json---jsonresult-and-jquery.aspx)。

当我试图让 .cshtml 页面保持原样并插入不同的服务（从 WCF 切换到 MVC）时，我的 javascript 开始崩溃（当它试图在 JS 中评估 response.length 时）。我使用 WebDevHelper 工具检查 JSON 文件的响应内容并找到关键差异。

MVC JsonResponse 给了我这个结果：`["anthony"]` 启用 AJAX 的 WCF 服务给了我这个：`{"GetUserResult":["anthony"]}`

WCF 方法如下所示：

```
 [OperationContract]
    [WebInvoke(Method = "POST", BodyStyle = WebMessageBodyStyle.Wrapped, ResponseFormat = WebMessageFormat.Json)]
    string[] GetUser(string Id)
    { return new string[] { "foo", "bar" }; } 
```

MVC 方法如下所示：

```
 public JsonResult GetUser(string Id)
    { return Json(new string[] { "foo", "bar" }); } 
```

GetUser 返回一个字符串数组（在这种情况下，它总是返回数组中的单个项目）。WCF 服务上的方法名称称为“GetUser”，但我不完全理解我在看什么，我有不知道为什么 WCF 会提供与 MVC 不同的数据，最后，为什么 javascript 在评估 result.length 时可以正常工作，但由于在使用较小的 MVC 数据时找不到长度属性而崩溃？似乎 JSON 不包括 JsonResult 中的数组信息？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T20:40:21.473

我发现了问题；启用 WCF AJAX 的服务将方法名称作为您的返回值所在的对象返回。我尝试将属性 WebMessageBodyStyle.Wrapped 更改为 WebMessageBodyStyle.Bare 来解决这个问题 - 但出于某种奇怪的原因，它使我的服务无法找到？我认为这是一个配置问题 - 但为了让它正常工作，我将其更改为 WrappedRequest - 这会给我一个 Bare 响应并且服务按预期工作。不知道为什么服务会因为像这样的小变化而消失……非常古怪

# css - 在移动视图上删除 .class

> ID：14285650
> 
> 赞同：3
> 
> 时间：2013-01-11T19:52:16.123
> 
> 标签：css, zurb-foundation

**基础框架 问：**

问题 - 当网站显示在移动设备或平板电脑设备上时，是否可以删除元素上的 .class？（即低于 768 像素的任何东西？）

我可以用几行 js 轻松删除它。但希望我的代码格式正确。因此，如果在基础框架内有办法做到这一点，我更愿意走那条路。

帮助？我知道这不一定是代码问题..但它有点。希望有人能启发我并指出道路 - 如果有的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T19:55:56.807

使用 browserdetect 脚本 (http://www.quirksmode.org/js/detect.html) 找出您拥有的版本和浏览器（即移动 safari），然后使用 jquery 从元素中删除该类。

但是，考虑到您提到的类和低于 768px 的事实，我建议您查看 css 的媒体查询：http: [//css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

编辑：

反过来用你的逻辑并使用：

```
@media screen and (min-width: 768px) {
  .class {
    background: #ccc;
  }
} 
```

# android - 未找到本机 Lcom/jp/al gi/ 的实现

> ID：14285651
> 
> 赞同：0
> 
> 时间：2013-01-11T19:52:20.817
> 
> 标签：android, android-ndk, java-native-interface

我尝试了一切，但我想我曾经认为还可以，但它仍然说这个错误：

```
No implementation found for native Lcom/jp/algi/Corelib;.vector ([F)[F
threadid=11: thread exiting with uncaught exception (group=0x4001e578) 
```

.cpp 文件 >

```
 extern "C"{
   JNIEXPORT jfloatArray JNICALL Java_com_jp_algi_Corelib_vector
       (JNIEnv *env, jobject clazz, jfloatArray cinput)
       {
      ////

         } 
               } 
```

javah生成的.h文件>

```
 JNIEXPORT jfloatArray JNICALL Java_com_jp_algi_Corelib_vector
        (JNIEnv *, jobject, jfloatArray) 
```

我有本机方法的类.java>

```
 package com.jp.algi;

      public class Corelib {

     static {
    System.loadLibrary("com_jp_algi_Corelib");
       }

// TestFileBroswerActivity(vstup_RGB);
     public native float[] vector(float[] input); 
```

我通过另一个类调用此方法.. App.mk 中的 ISnt 问题<

```
 APP_ABI := armeabi armeabi-v7a 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:30:56.717

图书馆真的叫`libcom_jp_algi_Corelib.so`吗？需要没有前缀和扩展`loadLibrary()`名的库名称。`lib``.so`

库名称在 Android.mk 中指定为`LOCAL_MODULE`. 它也没有`lib`和扩展。

# c# - 调用具有特定参数的方法，无需类型拆箱

> ID：14285652
> 
> 赞同：4
> 
> 时间：2013-01-11T19:52:28.573
> 
> 标签：c#, reflection

现在我正在调用一个方法并且它有效。这是我正在做的一个示例：

```
string result = (string)GetType().InvokeMember(actionName, BindingFlags.InvokeMethod | BindingFlags.Instance | BindingFlags.NonPublic, null, this, new object[] { userId, roleId, rankId }); 
```

调用以下示例方法：

```
 private string UserName(int userId, int roleId, int rankId)
    {
        ...stuff...
        return "JoeDoe";
    } 
```

我有多种方法，如`"UserName"`这里所示，我通过反射找到了，但它们都有相同的签名。我可以远离类型拆箱吗？在这种情况下，有没有办法让我`{int,int,int}`作为参数传递，而不是 new object[] ？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T19:55:06.617

否 - 使用反射，您必须将值装箱以调用成员。但是，反射本身的成本相当高，因此在这种情况下装箱操作（相对）并不昂贵。

如果您可以改为委托，则可以直接调用委托：

```
Func<int, int, int, string> del = yourClassInstance.UserName;

// use three ints directly here...
string result = del(user, role, rank); 
```

这仍然允许您将各种委托分配给不同的方法并调用它们，而无需反射或装箱的开销。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T19:56:55.257

我认为使用性能开销的反射比装箱/拆箱性能开销要高得多。

你不应该随身携带装箱/拆箱。

# meteor - Meteor.JS 的两个实例，子域

> ID：14285668
> 
> 赞同：1
> 
> 时间：2013-01-11T19:53:28.293
> 
> 标签：meteor

如何运行两个流星实例，每个实例在不同域的同一服务器上都有自己的应用程序（例如：foo.com 和 tree.com）？

我目前能想到的最可行的选择是使用不同的端口并在 nginx 中重定向到 localhost 上的这些端口。之后我为 Meteor 设置了正确的 absolutePath。

没有使用例如 nginx 的任何其他选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T20:55:55.883

Meteor 目前不处理 http 主机头来区分两个应用程序。如果您真的想使用同一台机器，则必须在不同的端口上运行不同的实例。

这取决于你把它放在什么上面。任何通过主机头代理识别请求的数据都是你最好的选择（nginx），

此外，您可以使用自定义 node.js 应用程序（类似循环的应用程序）来正确代理数据，看看另一个问题

[Node.js 支持跨服务器的多重负载均衡？](https://stackoverflow.com/questions/6586362/node-js-supports-multiple-load-balance-across-servers)

如果您不想使用 nginx，请将端口修改为您想要的端口，并在 http 主机属性中添加条件。

# eclipse - 在 Aptana Studio (eclipse rcp) 中，捆绑包 'org.eclipse.equinox.p2.reconciler.dropins' 是否设置为自动启动？

> ID：14285669
> 
> 赞同：1
> 
> 时间：2013-01-11T19:53:37.247
> 
> 标签：eclipse, osgi, aptana, aptana3, p2

在[Aptana Studio 3](http://www.aptana.com)（一个 Eclipse RCP）中，捆绑包**org.eclipse.equinox.p2.reconciler.dropins**是否设置为自动启动？

Aptana Studio 3，构建：3.3.1.201212171919

该插件列在**[eclipse]/plugins/org.eclipse....**

```
org.eclipse.equinox.p2.reconciler.dropins_1.1.100.v20110815-1419.jar 
```

Aptana 3.3.x 未加载位于 dropins 文件夹中的 dropin 插件。

[P2 信息](http://wiki.eclipse.org/Equinox_p2_Getting_Started)指出“*如果您尝试使用 dropins，但未找到您的捆绑包，请首先确保将 org.eclipse.equinox.ds 和 org.eclipse.equinox.p2.reconciler.dropins 标记为自动启动。 "*

什么日志文件或配置文件可以确认上面列出的包正在运行？

注意：这可能是一个回归，因为它发生[在 3.1.1 的 Aptana之前](https://jira.appcelerator.org/browse/APSTUD-4682?page=com.atlassian.jira.plugin.system.issuetabpanels%3acomment-tabpanel)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T20:57:48.597

在 Eclipse (config.ini) 的配置中，您必须手动启动 dropins，因为 Aptana Studio RCP 应用程序定义不会自动启动它。注意：在标准的 Eclipse Distro 中它是启动的。

```
osgi.bundles=org.eclipse.equinox.p2.reconciler.dropins@2:start 
```

添加后，配置文件 Aptana->About->Installation Details->Configuration 现在应该将此列出的插件列为“Active”而不是“Resolved”

```
org.eclipse.equinox.p2.reconciler.dropins (1.1.100.v20110815-1419) "Equinox Provisioning Drop-in" [Active] 
```

# c - C - 如何正确使用 OpenSSL 的 BIO_write()

> ID：14285671
> 
> 赞同：3
> 
> 时间：2013-01-11T19:53:55.107
> 
> 标签：c, network-programming, openssl

我是 OpenSSL 的新手。我了解 BIO_write(BIO *b, const void *buf, int len) 需要在循环中调用，但我不完全确定我是否正确使用它。我写了一个这样的函数：

```
int32_t SendPacket(BIO * const pBio, const unsigned char * const pPacket, const int nPacketLength)
{
    int32_t nPos = 0;

    if (!pBio || !pPacket || !nPacketLength)
        return -1;

    while (nPos < nPacketLength)
    {
        int32_t nNumberOfBytesWritten = BIO_write(pBio, &pPacket[nPos], nPacketLength - nPos);
        if (nNumberOfBytesWritten <= 0)
        {
            if (!BIO_should_retry(pBio))
                return -1;
        }
        else
        {
            nPos += nNumberOfBytesWritten;
        }
    }

    return nPos;
} 
```

我正在考虑这样使用它：

```
if (SendPacket(pBio, pPacket, nPacketLength) == nPacketLength)
{
    // Packet sent correctly.
}
else
{
    // Error occurred.
} 
```

函数看起来正确吗？任何反馈表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T11:02:46.123

在我原来的帖子中，我在重试 BIO_write() 时没有将“nNumberOfBytesWritten”重置为 0。

我最终做了这样的事情：

```
int32_t SendPacket(BIO * const pBio, const unsigned char * const pPacket, const int32_t nPacketLength)
{
    int32_t nPos = 0;
    int32_t nNumberOfBytesWritten = 0;
    ...
    for (nPos = 0; nPos < nPacketLength; nPos += nNumberOfBytesWritten)
    {
        if ((nNumberOfBytesWritten = BIO_write(pBio, pPacket + nPos, nPacketLength - nPos)) <= 0)
        {
            if (BIO_should_retry(pBio))
            {
                nNumberOfBytesWritten = 0;
                continue;
            }

            return -1;
        }
    }

    return nPos;
} 
```

# graphical-logo - 为什么透明徽标在我的网站中没有显示为透明？

> ID：14285672
> 
> 赞同：-3
> 
> 时间：2013-01-11T19:53:59.653
> 
> 标签：graphical-logo

我的标志是透明的。但它没有在我的网站上显示为透明的。我的网站网址是[http://gitsolutionsbd.com](http://gitsolutionsbd.com)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-19T15:49:34.153

您的徽标在 Photoshop 之类的程序中可能是透明的，但您已将其保存为 JPG 而不是嵌入透明 Alpha 通道或透明颜色的 PNG 或 GIF。JPEG 虽然可以包含 Alpha 通道，但并未设置为在 Web 浏览器中使用它进行遮罩。

***注意：**这个问题与 Stack Overflow 无关。*

# mysql - 如何组合这些 SQL 查询以提高 MySQL 的效率？

> ID：14285674
> 
> 赞同：1
> 
> 时间：2013-01-11T19:54:11.600
> 
> 标签：mysql, sql, performance, insert

我有以下查询，可能会合并为一个或两个更大的查询：

```
SELECT user, password, email FROM users WHERE user = 'njp316' LIMIT 1;

INSERT IGNORE INTO collectors_users (username, password, email, dateadded, subscribed)
VALUES (user, password, email, NOW(), 'Y'); 
```

这将拉回多行，因此需要循环：

```
SELECT barcode FROM collections WHERE user = user;

INSERT IGNORE INTO collections_collections (username, barcode)
VALUES (user, barcode); 
```

显然我对 SQL 不熟悉，所以只是在寻求帮助。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T19:57:33.823

除非我遗漏了什么……这很简单：

```
INSERT IGNORE INTO collectors_users
(username, password, email, dateadded, subscribed)
SELECT user, password, email, NOW(), 'Y'
FROM users 
WHERE user = 'njp316' 
LIMIT 1;

INSERT IGNORE INTO collections_collections 
(username, barcode)
SELECT user, barcode 
FROM collections 
WHERE user = user; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:57:33.723

您可以使用子选择。

```
INSERT INTO collectors_users (username, password, email, dateadded, subscribed)
SELECT user, password, email, NOW(), 'Y' FROM users WHERE user='njp316' LIMIT 1; 
```

它使用 SELECT 作为数据源来注入 INSERT。请注意，列的顺序很重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T20:02:27.687

试试这个：

```
INSERT IGNORE INTO collectors_users (username, `password`, email, dateadded, subscribed) 
SELECT `user`, `password`, email, NOW(), 'Y' 
FROM users WHERE `user` = 'njp316' LIMIT 1;

INSERT IGNORE INTO collections_collections (username, barcode) 
SELECT `user`,barcode 
FROM collections WHERE `user` = 'njp316'; 
```

# java - 如何打印报告

> ID：14285678
> 
> 赞同：0
> 
> 时间：2013-01-11T19:54:37.463
> 
> 标签：java, jasper-reports

我想打印一份*JR*报告。

我正在尝试这段代码

```
JasperPrint jp = new JasperFillManager().fillReport("billReport", billId, 
    "jdbc:mysql://localhost/kpc_hospital");  
JasperPrintManager.printReport(jp, true) 
```

但这段代码不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T20:10:31.073

有不同的方法，您可以使用这些方法直接打印 Jasper 报告，而不是显示打印对话框。

最简单的方法是：

```
 Connection con;
    String url="jdbc:mysql://localhost/mydb";
    Class.forName("com.mysql.jdbc.Driver").newInstance();
    con=(Connection) DriverManager.getConnection(url,"root","");
    JasperReport jasperReport = JasperCompileManager.compileReport(fileName);
    JasperPrint print = JasperFillManager.fillReport(jasperReport, parameter, con);
    print.setPageHeight(100);
    print.setPageWidth(80);
    print.setOrientation(jasperReport.getOrientationValue().LANDSCAPE);
    JasperPrintManager.printReport(print,false); 
```

你也可以使用这个：

```
 PrinterJob job = PrinterJob.getPrinterJob();
    int selectedService = 0;
    selectedService = 0;
    PrintRequestAttributeSet printRequestAttributeSet = new HashPrintRequestAttributeSet();
    printRequestAttributeSet.add(OrientationRequested.PORTRAIT);
    printRequestAttributeSet.add(MediaSizeName.ISO_A0); 
    MediaSizeName mediaSizeName = MediaSize.findMedia(64,25,MediaPrintableArea.MM);
    printRequestAttributeSet.add(mediaSizeName);
    printRequestAttributeSet.add(new Copies(1));
    JRPrintServiceExporter exporter;
    exporter = new JRPrintServiceExporter();
    exporter.setParameter(JRExporterParameter.JASPER_PRINT, jasper_print);
    exporter.setParameter(JRPrintServiceExporterParameter.PRINT_REQUEST_ATTRIBUTE_SET, printRequestAttributeSet);
    exporter.setParameter(JRPrintServiceExporterParameter.DISPLAY_PAGE_DIALOG, Boolean.FALSE);
    exporter.setParameter(JRPrintServiceExporterParameter.DISPLAY_PRINT_DIALOG, Boolean.TRUE);
    exporter.exportReport();
    job.print(printRequestAttributeSet); 
```

# java - Tomcat Web 应用程序与其他外部部署的 Tomcat Web 应用程序通信

> ID：14285681
> 
> 赞同：0
> 
> 时间：2013-01-11T19:54:48.923
> 
> 标签：java, jsp, tomcat, web-applications

我有几个 Web 应用程序作为 .war 文件部署在 Tomcat 服务器上。每个 Web 应用程序都有一个实现 ServletContextListener 的 ApplicationListener.java 类。在 ApplicationListener.java 类中，我使用 ScheduledExecutorService 生成一个线程，用于从队列中消费消息：

```
@Override
public void contextInitialized(ServletContextEvent event) {

    ReferenceData.init();

    scheduler = Executors.newSingleThreadScheduledExecutor();
    scheduler.scheduleAtFixedRate(new ScheduledConsumer(), 0, ReferenceData.CONSUME_INTERVAL, TimeUnit.MILLISECONDS);

} 
```

这是我的问题：是否有可能创建一个可以与所有其他人“交谈”的附加 Web 应用程序？我本质上想创建一个仪表板，让我显示`ReferenceData.CONSUME_INTERVAL`每个 Web 应用程序的当前值（在上面的代码中使用），以及更新它们的值的能力。

这可能吗？我将不胜感激任何设计建议、细节或示例。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T08:50:49.657

这是一种配置，对吧？

好吧，您可以在每个应用程序（从属）中创建一个 JMX-Bean，并创建一个代理所有这些 JMX-Bean（主）的新应用程序。这些 JMX-Slaves 将自己注册/注销到 JMX-Master。

现在你得到了一些积分：

*   在tomcat的Manager-App中实现了用户界面。
*   实施安全角色。
*   实现了 JMX-Master-Configuration 的持久性。

（JMX-Master可以在一个类app中解决）

# javascript - 对对象数组进行排序以消除重复条目

> ID：14285686
> 
> 赞同：1
> 
> 时间：2013-01-11T19:55:10.097
> 
> 标签：javascript, asp.net, arrays, javascript-objects, arrayobject

我有这个对象数组

```
var ArrTdsObjects = [];

function TdMaster(id, HeaderTxt, CurrentIndex, SortOrder, Width, Color, BgColor) {
    this.id = id;
    this.HeaderTxt = HeaderTxt;
    this.CurrentIndex = CurrentIndex;
    this.SortOrder = SortOrder;
    this.Width = Width;
    this.Color = Color;
    this.BgColor = BgColor;
}
        ArrTdsObjects.push(new TdMaster(
                        CurTdID,
                        CurTdInnerTxt,
                        CurTdCellindex,
                        CurTdSortOrder,
                        CurTdWidth,
                        "color", "bgColor"
                                        )
                            ); 
```

在将一些对象条目添加到数组后

我想消除存储在`ArrTdsObjects`基于`curTdID`

含义：`Id`如果较高的单元格编号具有相同的数组中的第一个单元格，则将被省略`id`

如果它们存在于较高的单元格编号中，我如何消除较低索引编号的数组项目，这意味着数组中最后添加的项目将被保存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T20:05:44.953

从 0 到 array.length 遍历数组并将对象添加到“散列”（阅读：javascript 多态对象）。观察：

```
var objects = [...];
var ids = {};
for (var i = 0; i < objects.length; ++i) { ids[objects[i].id] = objects[i]; }
// Now empty the list and push the non-duplicated objects back into it
objects = [];
// Check hasOwnProperty in case prototypes have been changed
for (var id in ids) { if (ids.hasOwnProperty(id)) { objects.push(ids[id]); } } 
```

`ids`每个 只能包含一个对象`id`，因此只有最后一个对象`id`会保留在`ids`. `id`因此，您可以保证在此操作之后您的数组中只有一个实例。

可能有更好的方法来清理您的阵列，但是几乎可以肯定有更好的方法来做您想做的任何事情，而不必首先清理阵列。

# ruby-on-rails - Rails Heroku 问题：status=500 for path=/

> ID：14285687
> 
> 赞同：1
> 
> 时间：2013-01-11T19:55:11.110
> 
> 标签：ruby-on-rails, heroku

我正在尝试将一个或多或少空白的 Rails 应用程序部署到 Heroku，但我不断收到“我们很抱歉，但出了点问题”的消息。

Heroku 日志中唯一的错误行是：

```
2013-01-11T19:30:59+00:00 heroku[router]: at=info method=GET path=/ host=murmuring-sierra-7952.herokuapp.com fwd=2.111.66.39 dyno=web.1 queue=0 wait=0ms connect=3ms service=718ms status=500 bytes=643 
```

我将其理解为 heroku 无法获取根路径..

除了创建应用程序之外，我唯一做的就是生成一个控制器、博客、索引、显示、新等，并替换我的 routes.rb 中的根，如下所示：

```
resources :blogs
root :to => "blogs#index" 
```

我什至添加了

```
match '/' => "blogs#index" 
```

确保“/”实际上指向 blogs#index

在本地主机上一切正常，顺便说一句

谢谢， 维戈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T20:18:09.113

Heroku 不适用于 sqlite3，它适用于 postgresql。

您的 gemfile 中应该有以下内容：

```
group :development, :test do
  gem 'sqlite3'
end

group :production do
  gem 'pg'
end 
```

然后运行

```
$ bundle install
$ git push heroku master 
```

您将在 heroku 自己的部分中找到有关如何[开始](https://devcenter.heroku.com/articles/rails3#write-your-app)的更多信息。

# express - 如何在 Express 中处理所有请求作为过滤上下文？

> ID：14285693
> 
> 赞同：4
> 
> 时间：2013-01-11T19:55:28.710
> 
> 标签：express

检查 Express 文档我在下面看到了这种解决方案：

```
app.all('/*', function(req, res) {
    console.log('Intercepting requests...');
}); 
```

它确实拦截了请求并在控制台上输出消息。问题是站点的执行过程没有停止，请求没有结束并且似乎处于一种循环中。还有另一种方法可以在 Express 上模拟过滤器，或者现在不能这样做？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-12T14:50:08.453

您必须将`next`其作为参数添加到函数中，然后在完成日志记录后在内部调用它

```
app.all('/*', function(req, res, next) {
  console.log('Intercepting requests ...');
  next();  // call next() here to move on to next middleware/router
}) 
```

# c# - 将自定义标头附加到 ASP.Net 错误页面

> ID：14285697
> 
> 赞同：1
> 
> 时间：2013-01-11T19:55:48.720
> 
> 标签：c#, asp.net, asp.net-mvc-3

我们的网站和 Web 服务托管在不同的域上。为了启用 CORS，我设置了每个请求以通过全局 asax 中的 Application_BeginRequest 标头发送带有适当域的 Access-Control-Allow-Origin 标头。

这在大多数情况下都有效，除非发生错误。当错误发生时，我们会得到标准的 ASP.Net Yellow Page of Death 以及堆栈跟踪。问题是，我附加到响应的 Access-Control-Allow-Origin 标头被删除了；并且在调试站点时，由于浏览器安全限制，我们看不到错误。

无论如何要使用 ASP.Net YPOD 发送自定义标头吗？我尝试在 Application_Error 事件处理程序中添加标头，但 CORS 标头仍然丢失。

我知道我可以完全绕过 YPOD，捕获我们的 Web 服务中发生的任何异常，并吐出自定义错误响应，但如果可能的话，我会尽量避免这种情况。

非常感谢任何建设性的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T21:53:12.140

弄清楚了。诀窍是处理 global.asax.cs 中的 Application_EndRequest 事件，然后在此处附加 CORS 标头。

# scala - 从部分应用的函数中获取 var vs val

> ID：14285704
> 
> 赞同：0
> 
> 时间：2013-01-11T19:56:21.563
> 
> 标签：scala, functional-programming, partial-application

我正在尝试通过使用部分应用的函数在 scala 中围绕我的数据库调用创建一个方便的包装器：

```
 def queryResult[B](connection: Connection, sql: String)(process: (CallableStatement,ResultSet) => B): B =
    using (connection) { connection =>
      using (connection.prepareCall(sql)) { statement =>
        var rs: ResultSet = null
        try {
          process(statement, rs)
        } finally if (rs != null) {
          try {
            rs.close()
          }
          catch {
            case e: SQLException => {}
          }
        }
      }
    } 
```

主要用于自动关闭连接/结果集。但是，我希望`rs`变量作为 var 而不是 val 返回。每当我尝试将 rs 分配给查询中的结果集时，我都会收到一个错误，我无法将其重新分配给 val。

或者，如果您有其他方法可以最大限度地重用打开/关闭流/连接的代码，也请分享。

编辑：正如 Randall Schulz 提到的，[Scala ARM](https://github.com/jsuereth/scala-arm)将解决实际问题。但是，Scala 不支持我发布的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T20:44:35.177

您似乎想要的是一种称为 pass-by-reference 的东西，它不是一种非常常见的功能编程语言。Scala 不支持它。

在这种情况下，只需让“进程”返回一个 ResultSet 而不是将其作为参数。

```
def queryResult[B](connection: Connection, sql: String)(process: CallableStatement => (ResultSet, B)): (ResultSet, B) =
    using (connection) { connection =>
      using (connection.prepareCall(sql)) { statement => {
          val (rs, result) = process(statement)
          if (rs != null) 
             try rs.close
             catch {
               case _ : SQLException =>
             }
          result
       }
     }
   } 
```

# android - 如何将 WCF 与 Android 连接？

> ID：14285708
> 
> 赞同：0
> 
> 时间：2013-01-11T19:56:30.510
> 
> 标签：android, json, wcf

在活动中，有两个用于获取用户名和密码的编辑文本以及一个用于操作的按钮。这是侦听器代码。

```
Button sendBtn = (Button) findViewById(R.id.sendBtn);
        sendBtn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            EditText un = (EditText) findViewById(R.id.usernameEditText);

            EditText pas = (EditText) findViewById(R.id.passwordEditText);
            HttpResponse response = null;

            user_name = un.getText().toString();
            password = pas.getText().toString();
            path = p + user_name;
            my_map = createMap();
            JSONObject ob=null;

            try {
                ob = new JSONObject("{\"Username\":user_name,\"Password\":password}");
            } catch (JSONException e1) {
                e1.printStackTrace();
            }
            try {
                response = makeRequest(path, my_map,ob);
                BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "utf-8"));
                String json = reader.readLine();
                JSONTokener tokener = new JSONTokener(json);
                JSONArray finalResult = new JSONArray(tokener);
            } catch (Exception e) {
                Log.e("HTTP ERROR", e.toString());
            }
        }
    }); 
```

这是 makeRequest 函数：

```
public static HttpResponse makeRequest(String path, Map params,JSONObject obj) throws Exception 
    {   

        DefaultHttpClient httpclient = null;
        HttpPost httpost = null;
        ResponseHandler responseHandler = null;
        //instantiates httpclient to make request

            httpclient = new DefaultHttpClient();

            //url with the post data
            HttpGet httpget = new HttpGet(path);
            httpost = new HttpPost(path);

            //convert parameters into JSON object
            JSONObject holder = obj;

            //passes the results to a string builder/entity
            StringEntity se = new StringEntity(holder.toString(), HTTP.UTF_8);

            //sets the post request as the resulting string
            httpost.setEntity(se);
            //sets a request header so the page receving the request
            //will know what to do with it

            httpost.setHeader("Accept", "application/json");
            httpost.setHeader("Content-type", "application/json");
        try{
            //Handles what is returned from the page 
            responseHandler = new BasicResponseHandler();
        }catch(Exception e){
            Log.e("HTTP ERROR", e.toString());
        }
        return httpclient.execute(httpost, responseHandler);
    } 
```

这里是 WCF 文件：

```
namespace MyWCFSolution
{

   [ServiceContract]
    public interface IService1
    {
       [OperationContract]
       [WebInvoke(Method = "GET",
           ResponseFormat = WebMessageFormat.Json,
           BodyStyle = WebMessageBodyStyle.Wrapped,
           UriTemplate = "Check")]
       String CheckSQL(string getJson);

    }
} 
```

如何使用 Json 将 wcf 服务器连接到 android。我想发送包含用户名和密码的 Json 对象以及包含用户名、密码、姓名和姓氏的 json 对象的响应。但我在这一点上遇到了麻烦。我无法连接主机，无法发布和获取 json 数据。有人能解释清楚吗？（示例代码、注释）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:59:37.680

浏览这篇文章，

[http://www.vogella.com/articles/AndroidJSON/article.html](http://www.vogella.com/articles/AndroidJSON/article.html)

[http://www.androidhive.info/2012/01/android-json-parsing-tutorial/](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

```
ObjectMapper mapper = new ObjectMapper();
ArrayList<RespuestaEncuesta> respuestas = new ArrayList<RespuestaEncuesta>(1);
RespuestaEncuesta r = new RespuestaEncuesta();
r.Comentarios = "ASD";
r.GrupoClienteID = UUID.fromString("00000000-0000-0000-0000-000000000000");
r.GrupoID = 1155;
r.Opcion = "2";
respuestas.add(r);

RespuestaWrapper data = new RespuestaWrapper();
data.Respuestas = respuestas;

mapper.configure(SerializationFeature.WRAP_ROOT_VALUE, true);
String respuestarJson = mapper.writeValueAsString(data);
String url = config[0] + "/GuardaEncuestas";

HttpPost httpPost = new HttpPost(url);
httpPost.setHeader("Accept", "application/json");
httpPost.setHeader("Content-type", "application/json");

StringEntity tmp = new StringEntity(respuestarJson);
httpPost.setEntity(tmp);

DefaultHttpClient httpClient = new DefaultHttpClient();
httpClient.execute(httpPost); 
```

希望会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T20:12:15.300

我前段时间做了一些东西，几乎就像你需要的解决方案一样。

我不知道这是否是最好的解决方法，但效果很好

在你的方法上，首先，如果你想接收一个 JSON，“GET”不是最好的选择，试试 POST，因为 URL QueryString 有字符限制，如果你的 JSON 很大，它不会在那里输入

其次，我在 Net 中声明了一个与 JSON 结构完全匹配的 POCO 对象，然后我声明了它必须接收该对象的方法。

**重要的是，您的 json 上的键与 POCO 对象属性完全匹配，是键敏感的**

IIS 自动解析从 Android 发布的 JSON 到 Net 中的 POCO 对象，所以它就像魔术一样工作，没有什么可解析的，收到了干净的对象。

当然检查您的 URI 模板是否正常，因为如果不正常，您将永远不会在您的 WCF 服务器上收到请求。

其他事情：在您的 Android 应用程序中，您将 JSON 作为 POST 请求发送。在您的 WCF 中，您的方法正在等待 GET 请求。

# angularjs - angularjs的车把

> ID：14285714
> 
> 赞同：0
> 
> 时间：2013-01-11T19:57:09.400
> 
> 标签：angularjs, handlebars.js

到目前为止，我一直在为 javascript 模板使用把手。但是我想使用angularJs。我想知道是否有人可以提出一个过渡到 angularjs 的好方法。例如，如果我有一个模态。我创建了一个车把模板，将其包含在我的页面底部，然后在 js func（rest api）中获取数据并告诉车把模板将编译后的文件放入 div 等。

这是一个示例 js 函数，它使用把手以模式显示事物。

```
$('[data-toggle="tabularmodal"]').click(function(e)
{
    e.preventDefault();
    var data_uri = $(this).attr('data-uri');
    var data_title = $(this).attr('data-header');
    var data;
    var source = $('#tabular-ep-data').html();
    var template = Handlebars.compile(source);
    $('.modal-header h3').html(data_title);
    $.getJSON(data_uri, function(json)
    {
        $('.modal-body').html(template(json));
    });
    $('#myModal').modal('show');
}); 
```

我想要一些关于以 angularjs 方式实现这一目标的建议。在车把中，我必须在页面底部包含 javascript 模板等。我想摆脱它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T20:33:46.707

在 Angular 中，您可以创建一个[指令](http://docs.angularjs.org/guide/directive)，例如`modal`，它可以简单地放置在任何标签上，例如：

```
<button modal="path/to/partial">Open modal</div> 
```

甚至

```
<modal template-url="path/to/partial">Open modal</modal> 
```

如您所见，它非常灵活。深入理解指令需要一些时间，但一旦理解，它们就会非常强大。对于您想要操作 DOM 的所有内容，指令就是答案。

在指令中，您可以注入服务，这可以让生活更轻松。例如，[$http](http://docs.angularjs.org/api/ng.%24http)可用于通过异步请求获取部分。另一个有用的服务是[$compile](http://docs.angularjs.org/api/ng.%24compile)，它准备模板，以便可以将其插入 DOM。

这是一个`modal`指令的示例（但可能性几乎是无穷无尽的）：

```
var app = angular.module('app', []);
app.directive('modal', ['$http', '$compile', function($http, $compile) {
   return {
      restrict: 'E',
      link: function(scope, elm, attrs) {
         element.on('click', function(e) {
            $http.get(attrs.templateUrl).success(function(template) {
               var html = $compile(template)(scope);

               // insert html somewhere
               scope.$apply();
            });
         });

      }
   };
}]); 
```

# uicollectionview - 让 uicollectionview 在第二个单元格上开始

> ID：14285717
> 
> 赞同：0
> 
> 时间：2013-01-11T19:57:19.527
> 
> 标签：uicollectionview, nsindexpath, collectionview

我有一个基于行的集合视图，每个单元格占据整个屏幕。如何让 collectionview 从第二个单元格开始？我是收藏视图和 iOS 的菜鸟。

[ 0 ] | [ 1 ] | [ 2 ] | [ 3 ]

所以你一次只能看到一个单元格，我希望它在用户到达集合视图后立即从 indexpath.row 1 开始

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T21:01:47.580

我最终选择了

```
scrollToItemAtIndexPath:atScrollPosition:animated: 
```

方法，但我可以看到@Lê Quý Sang 方法可以在哪里工作

谢谢！

# php - PayPal 数字商品：购买后如何获取商品编号？

> ID：14285720
> 
> 赞同：1
> 
> 时间：2013-01-11T19:57:29.997
> 
> 标签：php, paypal

我有一个简单的数字商品结账，可以在沙盒模式下工作。我有一个“使用 PayPal 付款”按钮，我可以单击该按钮弹出一个用于登录 PayPal 的窗口。之后它会将我重定向到我的`purchasemade.php`脚本，然后我可以从那里成功下载文件。

我的问题是，我要在我的网站上销售很多产品，所以我需要知道他们在完成购买后要下载哪些产品。每个产品都有一个唯一的 ID，所以我想我会将该 ID 作为 HTML 表单中的项目编号作为名为“item_number”的隐藏字段传递。但是，一旦达到`purchasemade.php`.

如何以原始形式读取 POST 中传递的值？否则，识别产品的最佳方法是什么？我使用 PHP 作为这个项目的脚本语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T01:57:44.210

如果您要坚持使用[支付标准](https://www.x.com/developers/paypal/documentation-tools/paypal-payments-standard/integration-guide/wp_standard_overview)，我建议您使用[IPN](https://www.x.com/sites/default/files/ipnguide.pdf)来交付您的数字商品。您可以使用[PDT](https://www.paypal.com/cgi-bin/webscr?cmd=p/xcl/rec/pdt-techview-outside)（与 IPN 非常相似）将订单数据发送回用户被重定向到的页面，但是，即使在您的 PayPal 帐户中启用了自动退货，也不能保证他们会在此处进行交易。

或者，您可以使用[Express Checkout API](https://www.x.com/developers/paypal/development-and-integration-guides#ec)而不是 Payments Standard。此方法可确保用户在完成付款之前将其返回您的网站。这将允许您利用会话变量，以便您可以在感谢/回执页面上向用户展示下载内容。

尽管如此，我认为不管你走哪条路，IPN 都是你最好的选择。您可以使用它实时自动交付数字商品、发送一般电子邮件通知、更新数据库、访问第三方网络服务等。

# c++ - C++：指针和抽象数组类

> ID：14285726
> 
> 赞同：0
> 
> 时间：2013-01-11T19:57:38.197
> 
> 标签：c++, pointers, abstract-class

我对指针比较陌生，并且已经编写了这个合并函数。这是对指针的有效使用吗？其次是`*two`变量，合并时不应该删除它吗？那将是客户的任务，而不是实施者？

```
VectorPQueue *VectorPQueue::merge(VectorPQueue *one, VectorPQueue *two) {
int twoSize = two->size();

if (one->size() != 0) {
    for (int i = 0; i < twoSize;i++)
    {
        one->enqueue(two->extractMin());
    }
}
return one; 
```

}

交换函数是这样调用的

```
one->merge(one, two); 
```

将这两个对象传递给它以合并

```
PQueue *one = PQueue::createPQueue(PQueue::UnsortedVector);
PQueue *two = PQueue::createPQueue(PQueue::UnsortedVector); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T20:15:00.233

在您的情况下，指针是完全没有必要的。您可以简单地使用引用。

也不需要传入调用成员函数的参数。`this`您可以使用指针获取调用成员函数的对象。

```
/// Merge this with other.
void VectorPQueue::merge(VectorPQueue& other) {
  // impl
} 
```

**一般来说：**使用继承实现容器并不是真正的首选风格。查看标准库以及它如何在序列（迭代器）上实现抽象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T20:17:17.440

乍一看，我看不到任何与指针相关的问题。虽然我更喜欢使用引用，并创建`merge`一个成员函数，`VectorPQueue`所以我不必传递第一个参数（正如其他人已经指出的那样）。让我感到困惑的另一件事是检查- 如果为空`one->size() != 0`会有什么问题？`one`下面的代码仍然可以正确插入`two`，`one`因为它仅取决于`two`的大小。

*关于删除`two`：*

> 那将是客户的任务，而不是实施者

好吧，这取决于你想如何设计你的界面。但由于该函数只将`two`' 元素添加到`one`，我会说它不应该删除它。顺便说一句，我认为这种方法的更好名称将是`addAllFrom()`或类似的名称。

*关于一般指针*：

我强烈建议你看看智能指针。这些是 C++ 中用于减少内存管理工作的常用技术。使用裸指针并通过 new/delete 手动管理它们非常容易出错，很难保证异常安全，几乎可以保证你的内存泄漏等。另一方面，智能指针一旦不包含指针就会自动删除它们需要更多。出于说明目的，C++ 标准库具有`auto_ptr`（`unique_ptr`并且`shared_ptr`如果您的编译器支持 C++ 11）。它是这样使用的：

```
{ // Beginning of scope
std::auto_ptr<PQueue> one(PQueue::createPQueue(PQueue::UnsortedVector));

// Do some work with one...:
one->someFunction();
// ...

} // End of scope - one will automatically be deleted 
```

我个人的经验法则：只使用包裹在智能指针中的指针。只使用堆分配的对象，如果：

*   它们的寿命必须比创建它们的范围更长，而且复制成本太高（幸运的是，C++ 11 具有移动语义，消除了很多此类情况）
*   我必须在它们上调用虚函数

在所有其他情况下，我尝试尽可能多地使用堆栈分配的对象和 STL 容器。

如果您从 C++ 开始，所有这些一开始可能看起来很多，并且在您冒险使用智能指针等之前尝试完全理解指针是完全可以的（甚至可能是必要的）。但是它可以节省大量的调试时间上。我还建议阅读几本关于 C++ 的书——实际上，在我阅读第一本书之前，我一直以为我理解了 C++ 的大部分内容：)

# php - 使用 APC 进行 PHP 缓存

> ID：14285727
> 
> 赞同：3
> 
> 时间：2013-01-11T19:57:40.587
> 
> 标签：php, caching, apc

假设我在 PHP 数组中的 PHP 文件中缓存数据，如下所示：

/cache.php

```
<?php return (object) array(
    'key' => 'value',
); 
```

我包括这样的缓存文件：

```
<?php
$cache = include 'cache.php'; 
```

现在，问题是缓存文件会被APC自动缓存在内存中吗？我的意思是作为典型的操作码缓存，就像所有 .php 文件一样。

如果我以不同的方式存储数据，例如以 JSON 格式 (cache.json)，APC 不会自动缓存数据？

会`apc_store`更快/更可取吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-11T20:08:00.610

不要将 APC 的缓存能力与其优化中间代码和缓存编译代码的能力混为一谈。APC 提供 2 个不同的东西：

1.  它提供了一种缓存数据结构（对象、数组等）的便捷方法，以便您可以使用 apc_store 和 apc_fetch 存储/获取它们
2.  它保留脚本的编译版本，以便下次运行时运行得更快

让我们看一个（1）的例子：假设你有一个需要 1 秒计算的数据结构：

```
function calculate_array() {
    sleep(1);
    return array('foo' => 'bar');
}
$data = calculate_array(); 
```

您可以存储它的输出，这样您就不必再次调用慢速 calculate_array() ：

```
function calculate_array() {
    sleep(1);
    return array('foo' => 'bar');
}
if (!apc_exists('key1')) {
    $data = calculate_array();
    apc_store('key1', $data);
} else {
    $data = apc_fetch('key1');
} 
```

这将大大加快，远少于原来的 1 秒。

现在，对于上面的 (2)：拥有 APC 不会使您的程序运行速度超过 1 秒，这是 calculate_array() 需要的时间。但是，如果您的文件还需要（比如说）100 毫秒来初始化和执行，那么只需启用 APC 就需要（大约）20 毫秒。因此，初始化/准备时间增加了 80%。这可以在生产系统中产生相当大的差异，因此即使您从未显式调用它的任何函数，简单地安装 APC 也会对脚本的性能产生明显的积极影响

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T20:23:04.050

如果您只是存储静态数据（如您的示例中），则最好使用`apc_store`.

这背后的原因不是操作码缓存是更快还是更慢，而是您用于`include`将静态数据获取到范围内的事实。

即使使用操作码缓存，每次执行时仍会检查文件的一致性。PHP 不必解析内容，但必须检查文件是否存在，以及自操作码缓存创建以来它是否未更改。文件系统检查是资源昂贵的，即使它只是`stat`一个文件。

因此，我将使用两种方法`apc_store`来完全删除文件系统检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T20:29:46.400

与其他答案不同，我将使用数组文件解决方案（第一个）

```
<?php return (object) array(
    'key' => 'value',
); 
```

原因是，对于这两种解决方案，您都在正确的一边，但是当您让缓存到 APC 本身时，您不必处理`apc_*()`-functions。您只需包含并使用它。当你设置

```
apc.stat = 0 
```

你也避免了`stat`每个包含的 -calls。这对生产很有用，但请记住在每次部署时清除系统缓存。

[http://php.net/apc.configuration.php#ini.apc.stat](http://php.net/apc.configuration.php#ini.apc.stat)

哦，不要忘记：使用文件方法，即使没有 APC，它也可以工作。对于通常不应该使用任何缓存的开发设置很有用。

# css - 淘汰赛数据绑定中的条件 css

> ID：14285730
> 
> 赞同：1
> 
> 时间：2013-01-11T19:57:48.507
> 
> 标签：css, asp.net-mvc-3, knockout.js, knockout-mvc

我在 MVC3 中工作，在一个简单的表中敲除。

我想应用一些备用行样式，所以我做了

```
 <tr data-bind="css: { altrow: $index()%2 }"> 
```

这很好用。

接下来，我想为特殊行应用特殊行样式。所以我做了

```
 <tr data-bind="css: { altrow: $index()%2 } ,css: { specialrow: IsSpecial == true }"> 
```

这工作正常。它似乎正在从每一行中剥离 CSS，然后在该行特殊时应用。所以它消除了交替的阴影。

如果存在，我只想覆盖任何现有的 CSS。

无论如何，我有点卡住了，对这一切都很陌生。我的搜索结果令人困惑。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T20:21:35.737

同一个元素不能有两个同名的绑定。淘汰赛只会使用第二个。但是，`css`绑定允许您指定多个类。

```
<tr data-bind="css: { altrow: $index()%2, specialrow: IsSpecial == true }"> 
```

# javascript - 点击事件停止工作

> ID：14285732
> 
> 赞同：-1
> 
> 时间：2013-01-11T19:57:52.870
> 
> 标签：javascript, jquery

我希望有人能帮助我，我对这个问题有点厌烦，因为我一直在解决我试图在这个[网站](http://altivamedia.com/pruebas/romulos/wp/menu/)上实现的这种滚动行为的其他问题......正如你看到我的子菜单（在左侧）滚动时跟随窗口位置，或者您可以单击子菜单上的任何选项将触发动画，问题似乎是每次我再次单击时它都不起作用，直到我重新点击它，它会工作......

这是我的代码

变量

```
var startDistance = 210;
var $scrollingDiv = $("#sub-menu");
var position = $("#footer").position();
var height = $("#sub-menu").height();
var pos = position.top - (height + 460); 
```

这是为了区别用户和动画滚动

```
$("body,html").bind("scroll mousedown DOMMouseScroll mousewheel keyup", function(e){
            if ( e.which > 0 || e.type === "mousedown" || e.type === "mousewheel"){
                 if($(window).scrollTop() > startDistance && $(window).scrollTop() < pos) {

                    $scrollingDiv.stop().animate({
                        paddingTop: ($(window).scrollTop() - 75) + "px"
                    }, 'slow');

                }
                if($(window).scrollTop() == 0) {
                    $scrollingDiv.stop().animate({
                        paddingTop: 0
                    }, 'slow');
                }
            }
     }); 
```

点击行为

```
$("#sub-menu ul li a").live('click', function(ev) {
            var $anchor = $(this);
            console.log($anchor.attr('href'));
            $('html, body').stop().animate({
                scrollTop: $($anchor.attr('href')).offset().top
            }, 1500,'easeInOutExpo', function() {
                $scrollingDiv.stop().animate({
                    paddingTop: ($($anchor.attr('href')).offset().top - 556) + "px"
                }, 'slow');
            });
        event.preventDefault();
    }); 
```

这可能是最愚蠢的事情，但过去一个小时我一直在看我的屏幕，却无法意识到发生了什么。

编辑：我也发布了我的滚动代码行为，因为我觉得这可能是一个全球性问题，不仅与我的点击代码有关

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T20:59:08.337

```
[22:00:25.137] ReferenceError: event is not defined @ http://altivamedia.com/pruebas/romulos/wp/wp-content/themes/romulos/_/js/functions.js:45 
```

你不小心写了`event`而不是`ev`：

```
 });
    event.preventDefault();
}); 
```

由于`event`尚未定义一个`ReferenceError`被抛出。只需使用正确的变量：

```
 });
    ev.preventDefault();
}); 
```

### 评论

要自行查找此类错误，请使用浏览器的错误控制台。

# ruby-on-rails - 有多少访问需要memcached？

> ID：14285736
> 
> 赞同：1
> 
> 时间：2013-01-11T19:58:11.177
> 
> 标签：ruby-on-rails, ruby-on-rails-3, memcached

目前，我正在考虑创建一个网站，其中每天将有大约 10,000 个 UV 和 500,000 个 PV。

我正在使用带有许多宝石的 Rails3.2.11。
会有很多图片上传。
你们认为我需要使用 memcached 来获得快速性能吗？
或者不需要这个金额？

我看了一下如何使用Railscasts `Dalli`，`Memcached`但看起来我必须在我的应用程序中重新编码很多部分。

如果它需要太多时间，并且我希望的访问量不需要 memcache，我不会使用它。
我将不使用 memcached。

你怎么看？

PS如果有人知道如何轻松加快性能，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T20:39:49.973

除非有正当理由期望在第一天会有那么多访问者，否则您通常最好从小处着手，然后随着应用服务器上负载的增加（缓存和添加更多服务器）进行扩展

所以，首先，不要为 memcached 操心……如果你的服务是成功的，那么包含缓存是值得的

# twitter-bootstrap - 导航栏隐藏锚点

> ID：14285742
> 
> 赞同：0
> 
> 时间：2013-01-11T19:58:39.137
> 
> 标签：twitter-bootstrap, navbar

我正在使用 Bootstrap 构建一个 Rails 应用程序，但顶部的固定导航栏隐藏了我通过附加到 url 的哈希锚点跳转到的内容。基本上我有与这篇文章解释的相同的问题：[Fixed position navbar obscures anchors](https://stackoverflow.com/questions/9047703/fixed-position-navbar-obscures-anchors)，我尝试使用我在 github 上找到的以下 js 代码来解决这个问题：

```
$(document).ready(function(){    
  var shiftWindow = function() { scrollBy(0, -50) };
  if (location.hash) shiftWindow();
  window.addEventListener("hashchange", shiftWindow);
}); 
```

当我单击页内链接以跳转到锚点时它工作正常，但是当我单击另一个页面中的链接试图重定向到 URL 中带有哈希的页面时失败，例如 from `http://mysite.com/`to `http://mysite.com/posts/1#comment-5`。

我无法弄清楚上面的 js 代码出了什么问题。请帮忙，谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-21T06:46:58.343

我遇到了同样的问题，我发现最简单的解决方案是将锚点包装在**section**标签中，然后将 CSS 表更改为：

```
section {
    display: block;
    padding-top: 40px;
} 
```

然后你就不需要任何 js 并且当你从另一个页面跳转到那个部分 id 时它会起作用。

# reporting-services - 从作业运行包时出现“无效的命令行参数”错误

> ID：14285744
> 
> 赞同：1
> 
> 时间：2013-01-11T19:58:42.227
> 
> 标签：reporting-services, ssis, sql-server-2012, sql-server-agent

我在安排 .dtsx 包作为 SQL Server 代理作业执行时遇到问题。我已经用谷歌搜索了这个问题，但找不到我的特定问题所需的解决方案。

SQL Server 版本为 2012 商业智能版。

该包在 Visual Studio 中运行良好。

该作业设置为在“SQL Server 代理服务帐户”下运行。

该文件与数据库位于同一台服务器上。

部分错误日志是：

> ...完成结束进度进度：2013-01-09 20:51:
> 48.58 来源：Inheader 文件导入验证：33% 完成结束进度：2013-01-09 20:51:48.58 来源：Inheader 文件导入验证：66 % 完成 End Progress Progress: 2013-01-09 20:51:48.59 Source: Inheader File Import
> Validating: 100% complete End Progress Progress: 2013-01-09 20:51:48.59 Source: Product File Import ... 命令行参数无效...步骤失败。

这看起来类似于在 VS 中运行包时生成的日志，因此它似乎不是权限问题 - 它看起来正在处理脚本。

我没有更改配置步骤时生成的命令行参数，它们是（我已经更改了敏感数据）：

```
/FILE "\"C:\...filepath...\package.dtsx\""  /CHECKPOINTING OFF /REPORTING E 
```

我发现的很多链接都没有真正提到文件类型包，而且我有点卡住了，所以任何帮助都将不胜感激。

我也很困惑为什么在执行包之前不会发生错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:44:38.770

假设这是准确的：

`/FILE "\"C:\...filepath...\package.dtsx\"" /CHECKPOINTING OFF /REPORTING E`

那么路径开始之前的反斜杠和引号以及 .dtsx 扩展名之后的反斜杠和引号可能是罪魁祸首。

事情应该看起来更像这样：

`/FILE "C:\...filepath...\package.dtsx" /CHECKPOINTING OFF /REPORTING E`

# css - 如何在 CSS 中给出背景图像？

> ID：14285745
> 
> 赞同：-3
> 
> 时间：2013-01-11T19:58:45.223
> 
> 标签：css

我在 asp.net 中做项目。我想使用 CSS 为我的页面提供一张背景图片。
在 CSS 表中，我给出了类似`"background-image : 'image.jpg';`" ，但我没有在输出页面中获取图像。

有谁知道如何在 CSS 中给出背景图像？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T20:03:12.283

应该只是 `background-image:url('image.jpg');`

[如果您寻找它，背景图像文档很容易获得](http://www.w3schools.com/cssref/pr_background-image.asp)

# jquery - 如何制作已经在滑块“滑动/移动”中的图像，就像视频/动画一样

> ID：14285747
> 
> 赞同：0
> 
> 时间：2013-01-11T19:59:01.520
> 
> 标签：jquery, html, image, slider

> **可能重复：**
> [jQuery 内容旋转器](https://stackoverflow.com/questions/14181109/jquery-content-rotator)

就像我的问题说我见过包含移动图像的滑块，滑块图像不是静态的。

我不知道如何更好地解释这一点，希望你明白我的意思。我会很感激所有的建议，我也想知道这个“东西”叫什么，所以我可能会阅读更多关于这个主题的内容。

谢谢！

# javascript - 在原型上使用 addEventListener

> ID：14285748
> 
> 赞同：1
> 
> 时间：2013-01-11T19:59:04.707
> 
> 标签：javascript, javascript-events

我试图通过点击 addEventListener 来减少 Prototype 的结果，但即使没有点击，结果也会显示出来。

```
<div id="box">Your Item:</div>

<button id="myBtn">Buy</button>

<script type="text/javascript">
function Machine(n,p){
this.name = n;
this.price = p;
}

Machine.prototype.Dispatch = function(){
var container = document.getElementById('box');
container.innerHTML = this.name + " " + this.price;
}
var Drink = new Machine("coke",80);
var Handle = document.getElementById('myBtn');
Handle.addEventListener("click",Drink.Dispatch(),false);
</script> 
```

[http://jsfiddle.net/9trqK/](http://jsfiddle.net/9trqK/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-11T20:01:45.867

您必须将函数*引用*传递给`addEventListener`，而不是像您正在执行的那样调用函数（并传递其返回值）：

```
Handle.addEventListener("click", Drink.Dispatch, false); 
```

当你这样做时，你的处理程序只会在点击时被触发。但是您将面临一个不同的问题：`this`处理程序内部将是单击的元素，而不是您的`Machine`实例。为了解决这个问题，您可以使用[`Function.bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)（请参阅链接文档以获取旧浏览器的 polyfill）：

```
var drink = new Machine("coke",80);
var handle = document.getElementById('myBtn');
handle.addEventListener("click", drink.Dispatch.bind(drink), false); 
```

* * *

注意：通常的做法是仅使用大写首字母作为构造函数名称，因此您可以快速区分它们。这就是我将 and 重命名为and的`Drink`原因。`Handle``drink``handle`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T20:03:18.123

您需要在您的侦听器的 function() {} 闭包之间添加您的调用。或删除函数名称后的 ()。

这应该工作：http: [//jsfiddle.net/9trqK/1/](http://jsfiddle.net/9trqK/1/)

```
function Machine(n, p) {
  this.name = n;
  this.price = p;
}
var handle = document.getElementById('myBtn');
Machine.prototype.Dispatch = function () {
  var container = document.getElementById('box');
  container.innerHTML = this.name + " " + this.price;
}
var Drink = new Machine("coke", 80);
handle.addEventListener("click", function() { Drink.Dispatch() }, false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-07T14:47:36.997

要对对象执行自定义事件，我使用这个简单的脚本来扩展我的对象：

```
/* Simple Custom event prototype for objects

Extend your object like this:

<OBJECT>.prototype = new EventEmitter;

Then you can use :

<OBJECT>.on("test",function() { alert("Test event triggered"); })
<OBJECT>.on("test",function() { alert("Test event 2 triggered"); })
<OBJECT>.trigger("test");

*/
function EventEmitter() {

    var listeners = Object();   //Matrix of event/callbacks

    //Add listener
    this.on = function(evt, callback) {
        //console.log("Listener added: " + evt);

        if (!listeners.hasOwnProperty(evt))
            listeners[evt] = Array();

        listeners[evt].push(callback);      
    }

    //Call listeners
    this.trigger = function(evt, params) {
        //console.log("trigger called " + evt);
        //console.dir(listeners);

        if (evt in listeners) {
            callbacks = listeners[evt];
            //Call all callbacks with the params
            for (var x in callbacks){
                callbacks[x](params);
            }
        } else {
            console.log("No listeners found for " + evt);
        }

    }
} 
```

# variables - Pygame 有奇怪的变量问题 - 几个变量因未知原因而增加

> ID：14285749
> 
> 赞同：0
> 
> 时间：2013-01-11T19:59:08.853
> 
> 标签：variables, python-2.7, iteration, pygame, blit

我在使用 Pygame 时遇到了一个非常奇怪的问题，这让我在过去的几个小时（好吧，更像是 5 个）小时都感到困惑。那里有制作照片马赛克的免费程序，但自从我早期使用 VB5 修补以来，我就一直想编写自己的版本。你知道那是怎么回事。我编写了各种很酷的部分，用于加载源图像、查找颜色平均值和所有内容。但在这里我被困住了，很困惑。所以非常卡住和困惑。

这部分程序将“目标图像”（由小源图像组成的图像）​​转换为其他源图像将尝试匹配并最终替换的更小的颜色块。但是由于某种原因，块的大小随着每次迭代而不断增加。我已经尝试了很多不同的东西，以至于我不得不通过脚本删除一堆东西并在发布之前添加更多评论。

目标 img 是一张 1280x800 的随机谷歌图片，但任何其他图片都应该是一样的。观察 blit 的 Y 大小随着每个块的下降而增加，而 X 大小随着新行的产生而增加。我为纯色矩形硬编码了一个固定大小（2 个像素，比我将使用的要小得多），但无论出于何种原因，它都在不断增加。第一排 blit 现在太小了，很难看到。这很快就改变了。**这是我正在使用的图像的链接（http://www.travelimg.org/wallpapers/2012/01/iceland-golden-falls-druffix-europe-golden-falls-golden-falls- iceland-natur-waterfall-waterfalls-800x1280.jpg），但任何其他重命名为 target.jpg 的图片/尺寸都应该这样做。

如果有人能指出我正确的方向，将不胜感激。我想以漂亮的 12x12 纯色块覆盖整个源图片。我不知道是什么在改变这些块的大小。

```
import pygame
import os
from time import sleep

okformats = ['png','jpg','bmp','pcx','tif','lbm','pbm','pgm','ppm','xpm']

targetimg = 'C:\\Python27\\mosaic\\target.jpg'

if targetimg[-3:] not in okformats:
    print 'That format is unsupported, get ready for some errors...'
else:
    print 'Loading...'

pygame.init()
screen = pygame.display.set_mode((100,100)) #picked a size just to start it out
clock = pygame.time.Clock() #possibly not needed in this script

targetpic = pygame.image.load(targetimg).convert()

targetrect = targetpic.get_rect()  #returns something like [0,0,1280,800]
targetsize = targetrect[2:]
targetw = targetrect[2]
targeth = targetrect[3]

numpicsx = 100 #number of pictures that make up the width
sourceratio = 1  #testing with square pics for now
picxsize = targetw/numpicsx
numpicsy = targeth/(picxsize*sourceratio)
picysize = targeth/numpicsy

print 'Blitting target image'
screen = pygame.display.set_mode(targetsize)
screen.fill((255,255,255)) #set to white in case of transparency
screen.blit(targetpic,(0,0))

#update screen
pygame.display.update()
pygame.display.flip()
clock.tick(30)

SLOWDOWN = .1  #temp slow down to watch it

print numpicsx #here are some print statements just to show all the starting values are correct
print numpicsy
print '---'
print picxsize
print picysize

sleep(1)

for x in xrange(numpicsx):

    for y in xrange(numpicsy):
    currentrect = [x*picxsize,y*picysize,x*picxsize+picxsize,y*picysize+picysize]

    avgc = pygame.transform.average_color((targetpic), currentrect) #average color
    avgc = avgc[:3]  #drops out the alpha if there is one

    pygame.draw.rect(screen, avgc, currentrect)
    #pygame.draw.rect(screen, avgc, (currentrect[0],currentrect[1],currentrect[0]+2,currentrect[1]+2))  #hard coded 2s (rather than 12s in this case) to help pin point the problem

    pygame.display.update()
    pygame.display.flip()
    clock.tick(30) #probably not needed

    sleep(SLOWDOWN)

print 'Done./nSleeping then quitting...'
sleep(3)

pygame.quit() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T04:39:55.480

我的一个朋友查看了我的代码并向我展示了这个问题。我在想绘图的矩形格式是（x1，y1，x2，y2），但实际上是（x，y，宽度，高度）。这是新行：

currentrect = [x*picxsize,y*picysize,picxsize,picysize]

我还删除了 clock.tick(30) 行以加快速度。

# database - 查看多个表

> ID：14285750
> 
> 赞同：1
> 
> 时间：2013-01-11T19:59:09.097
> 
> 标签：database, inheritance, view, subtype, supertype

我对来自 Object-Relational dtb 的 Lab 有点卡住了。我有这个层次结构：

```
SUPERTYPE EMPLOYEE_TYPE3
------------------------------
empno number(4)
ename varchar(10),
job varchar(9),
hiredate date,
sal number(7, 2),
deptno number(2)

SUBTYPE MANAGER_TYPE3
------------------------------
office varchar(6),
car varchar(10)

SUBTYPE SALESMAN_TYPE3
------------------------------
comm number(7, 2)

SUBTYPE STAFF_TYPE3
------------------------------
office varchar(6) 
```

我为`employee_type3`. 我需要做的是创建一个`ALL_EMPLOYEES`包含所有员工子类型的数据的视图。视图应包含每个子类型的所有列。很明显，在某些列中将是空值。

有谁知道如何做这样的看法？我认为联合在这里没用，因为我的列数不同。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:37:12.270

我找到了解决方案，所以如果有人对类似问题感兴趣，你可以在这里找到一些灵感。解决方案：

```
create view all_employees 
(
 empno,
 ename,
 job,
 hiredate,
 sal,
 comm,
 deptno,
 office,
 car
) 
as 
select empno,
       ename,
       job,
       hiredate,
       sal,
       null,
       deptno,
       office,
       car 
  from manager 
union 
select empno,
       ename,
       job,
       hiredate,
       sal,
       comm,
       deptno,
       null,
       null 
  from salesman 
union 
select empno,
       ename,
       job,
       hiredate,
       sal,
       null,
       deptno,
       office,
       null 
  from staff 
```

只需要添加null，其中没有为子类型定义列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T22:01:28.760

您确实使用了联合（但 a `UNION ALL`）。

您对所有行**进行空扩展**，使它们具有相同的结构：

```
select Col1, NULL as Col2, 1 as Discriminator FROM T1 union all
select NULL as Col1, Col2, 2 as Discriminator FROM T2 
```

请注意，我包含了一个鉴别器，因此您可以过滤类型（甚至确定它）。

# c++ - 使用 gcc 编译时覆盖系统头文件

> ID：14285757
> 
> 赞同：2
> 
> 时间：2013-01-11T19:59:23.427
> 
> 标签：c++, osx-mountain-lion

我目前正在尝试编译使用 openssl 头文件的 C++ 源文件，但编译器使用位于 /usr/include/openssl 的系统 openssl 头文件，我希望它使用 /usr/local/openssl/1.0.1c/include /openssl 包含路径。我可能不得不给出指向最后一条路径的“-I”标志，但它使系统保持不变。

```
g++ -o src/base64.o -c -O3 -arch x86_64 -Iinclude/cryptoplus -I/usr/local/openssl/1.0.1c/include/openssl src/base64.cpp 
```

我的环境变量似乎没有强制使用 /usr/include/openssl 包含目录，而且我正在使用 OSX 10.8，抱歉，如果这是新手问题，但它有点令人不安。

先谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:10:56.687

我的坏，我很累！openssl 包含路径不正确，我需要指定

```
-I/usr/local/openssl/1.0.1c/include 
```

没有 openssl 文件夹。

包含调用 openssl 文件夹内的头文件

```
#include <openssl/opensslv.h> 
```

感谢您的意见。

# facebook - Facebook 应用程序对话框不显示权限

> ID：14285762
> 
> 赞同：0
> 
> 时间：2013-01-11T19:59:38.683
> 
> 标签：facebook, oauth

我创建了一个应用程序来使用 Facebook-Connect 并仅将电子邮件标记为需要用户权限。在预览屏幕上，它会询问“您的基本信息”和“电子邮件”。

但是，当我尝试注册应用程序时，它只声明它需要“您的基本信息”而不是询问电子邮件。事实上，它不需要向应用程序透露用户电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T22:16:28.413

问题是缺乏范围。

有关如何使用 passportjs 执行此操作的更多详细信息，请参见：[passport-facebook](http://passportjs.org/guide/facebook/)。

# java - Android线程顺序/ontouch webview

> ID：14285764
> 
> 赞同：1
> 
> 时间：2013-01-11T19:59:46.810
> 
> 标签：java, android, universal-image-loader

我有一个`GridView`图像填充，当我单击一个图像时，它会在 a 中全屏显示，`PagerActivity`并且对于全屏的每个图像，在 a 的底部显示一段 html `webview`。触摸时，有些`webViews`会启动视频，有些则什么也不做。

我的问题是如果我触摸“webView 视频”，视频会显示在下一个布局中。

示例：我的网格中有 3 张图像。我单击了第一个，该图像以全屏显示，底部有一个 web 视图，当我单击以`webview`在图像 1 的顶部启动视频时，视频在图像 2 的顶部启动。

这是我的代码的一部分`ImagePagerActivity`：

```
public class ImagePagerActivity extends BaseActivity {

...

private class ImagePagerAdapter extends PagerAdapter implements OnTouchListener,Handler.Callback {

    ...

    public Object instantiateItem(View view, final int position) {
        final View imageLayout = inflater.inflate(R.layout.item_pager_image, null);
        final ImageView imageView = (ImageView) imageLayout.findViewById(R.id.image);
        final ProgressBar spinner = (ProgressBar) imageLayout.findViewById(R.id.loading);
        final WebView webView = (WebView) imageLayout.findViewById(R.id.webView1);
        final TextView textView=(TextView) imageLayout.findViewById(R.id.edit_message);
        topLevelLayout = (RelativeLayout) imageLayout.findViewById(R.id.top_layout);
        videoView = (VideoView) imageLayout.findViewById(R.id.videoView);
        topLevelLayout.setBackgroundColor(0x00000000);

        ((ViewPager) view).addView(imageLayout, 0);

        imageLoader.displayImage(images[position], imageView, options, new SimpleImageLoadingListener() {

            @Override
            public void onLoadingStarted() {
                ...
            }

            @Override
            public void onLoadingFailed(FailReason failReason) {
                ...
            }

            @Override
            public void onLoadingComplete(Bitmap loadedImage) {

                // HERE ADD THE WEBVIEW ON THE BOTTOM OF THE IMAGE

            }
        });

        return imageLayout;
    }

    public boolean onTouch(View v, MotionEvent event) {

        if(isWebViewLaunchViedo()){
            PlayVideo(positionVideo);
        }
    }

  } 
```

我将此项目用于 GridActivity 和 PagerActivity[通用图像加载器](https://github.com/nostra13/Android-Universal-Image-Loader)

我知道 instantiateItem(..) 方法被调用了两次，这就是为什么当我尝试播放视频时 videoView 已经影响到新视频的原因。但我不知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T01:43:36.303

我终于创建了一个新的透明活动并在新活动中播放视频。

显现 ：

```
<activity
  android:name="com.ad.AdVideoActivity"
  android:theme="@style/Theme.Transparent"         <------
  android:label="@string/title_activity_ad_video" >
</activity> 
```

新的 Ontouch ：

```
public boolean onTouch(View v, MotionEvent event) {
        if (ADS_VIDEO.contains(v.getId()) && event.getAction() == MotionEvent.ACTION_DOWN) {
            intentVideo = new Intent(getBaseContext(),AdVideoActivity.class);
            startActivity(intentVideo);
        }

        return false;
    } 
```

# java - 无法在 Android 中编辑裁剪的照片

> ID：14285771
> 
> 赞同：1
> 
> 时间：2013-01-11T20:00:17.740
> 
> 标签：java, android, image, android-layout, android-linearlayout

我正在构建一个 Android 应用程序，我必须在其中编辑从手机图库中挑选并裁剪的图片。

所以在我的布局中，我有一个 ImageView 我放置裁剪的图像

xml文件

```
<ImageView
    android:id="@+id/ivEditPhoto"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center"
    android:layout_weight=".90"
    android:src="@drawable/app_icon_big" /> 
```

将裁剪后的图像放入 ImaveView

```
bitmapPic = (Bitmap) getIntent().getParcelableExtra(
            "CroppedBitmapImage");
picView = (ImageView) findViewById(R.id.ivEditPhoto);
        picView.setImageBitmap(bitmapPic); 
```

图像被正确放置。但问题是当我尝试编辑它时。我有一个编辑按钮，点击它我会执行以下操作，包括注册 On Touch Listener。

```
DisplayMetrics displaymetrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
        int height = displaymetrics.heightPixels;
        int width = displaymetrics.widthPixels;
        Bitmap alteredPastedBitmap = Bitmap.createBitmap(bitmapPic.getWidth(),
                bitmapPic.getHeight(), bitmapPic.getConfig());
        pasteCanvas = new Canvas(alteredPastedBitmap);
        paint = new Paint();
        paint.setColor(Color.GREEN);
        paint.setStrokeWidth(5);
        matrix = new Matrix();
        pasteCanvas.drawBitmap(bitmapPic, matrix, paint);
        picView.setOnTouchListener(this); 
```

那么以下

```
public boolean onTouch(View v, MotionEvent event) {
    Toast.makeText(this, v.getId(), Toast.LENGTH_SHORT).show();
    if (v.getId() == R.id.ivEditPhoto) {

        Toast.makeText(this, "onTouch", Toast.LENGTH_SHORT).show();
        int action = event.getAction();
        x = event.getX();
        y = event.getY();
        switch (action) {
        case MotionEvent.ACTION_DOWN:
            sX = event.getX();
            sY = event.getY();
            break;
        case MotionEvent.ACTION_UP:
            if (skewedBitmap == null) {
                int resID = 0;
                if (imageId == 0)
                    resID = R.drawable.green_arrow;
                else
                    resID = imageId;
                bitmapToPaste = BitmapFactory.decodeResource(
                        getResources(), resID);
            } else {
                bitmapToPaste = skewedBitmap;
                skewedBitmap = null;
            }
            pasteCanvas.drawBitmap(bitmapToPaste, sX- (bitmapToPaste.getWidth() / 2),sY- (bitmapToPaste.getHeight() / 2), null);
            picView.invalidate();
            break;
        case MotionEvent.ACTION_CANCEL:
            break;
        default:
            break;
        }
    }
    return true;
} 
```

问题是： bitmapPic.getWidth() 和 bitmapPic.getHeight() 是 160*160 和 onTouch event.getX(); 和 event.getY(); 超出坐标（例如：150.33 和 500.89）虽然图像似乎占据了整个屏幕并且触摸在图像上。所以 onTouch 不会放置位图并返回 false。你们中的任何人都可以指导我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:20:41.203

我在我的一个应用程序中遇到了同样的问题。我需要查看更多您的代码，但这可能与您需要实现的 onInterceptTouch() 方法有关。

如果不是这种情况，那么也许您可以查看此代码以获取有关如何移动、修改和旋转位图的帮助：

[http://adblogcat.com/custom-view-to-draw-rotate-erase-and-convert-images-to-black-and-white/](http://adblogcat.com/custom-view-to-draw-rotate-erase-and-convert-images-to-black-and-white/)

顺便说一句，我写了这个教程，这是我的网站，我认为你更容易理解这个教程，而不是把它粘贴在这里。

# asp.net - 具有 MSMQ + 订单处理 Web 应用程序的可靠 WCF 服务。一种方式调用交付

> ID：14285773
> 
> 赞同：2
> 
> 时间：2013-01-11T20:00:21.190
> 
> 标签：asp.net, wcf, msmq

我正在尝试基于此架构（[http://www.devx.com/enterprise/Article/39015](http://www.devx.com/enterprise/Article/39015)）使用 MSMQ 实现可靠的 WCF 服务

如果队列不可用，则消息可能会丢失（即使集群不提供零停机时间）

看看简单的订单处理工作流程

1.  用户输入信用卡详细信息并付款

2.  应用程序从支付网关收到成功结果

3.  应用程序通过 WCF MSMQ 绑定将消息作为“即发即弃”/“单向”调用发送到后端服务

4.  用户将被重定向到“成功”页面

5.  消息存储在远程事务队列中（Windows 集群）

6.  后端服务出列并处理消息，完成复杂的订单处理工作流程，并因此向用户发送电子邮件确认

除了例外，一切看起来都很好。

我无法理解我们如何保证所有“单向”呼叫都将在队列中传递？双工通信不是一种情况，因为用户应尽快在结果网页上重定向。

想象一下这样的情况，当用户收到“成功”页面，其中的语言是“......您的付款已完成，订单已开始处理，您稍后将通过电子邮件发送通知......”但消息本身丢失了。

第 3 步如何实现持久性？

我可以看到的可能解决方案之一是

3a。创建一个带有标记为未完成的交易详细信息的数据库记录，以获取有关该交易的任何记录。该记录可以作为处理丢失消息的起点，以防消息不会保存在队列中。

我读了这篇[文章](https://stackoverflow.com/questions/7650788/how-does-msmq-transactional-message-delivery-work)

> 关于事务性 MSMQ，主要需要了解的是，在向远程队列的事务性发送中涉及三个不同的事务。
> 
> 1.  发送者将消息写入本地队列。
> 2.  发送方机器上的队列管理器通过线路将消息传输到接收方机器上的队列管理器
> 3.  接收者服务处理队列消息，然后从队列中删除消息。

但这并不能解决所描述的问题-据我所知，WCF netMsmqBinding 不使用本地队列将消息发送到远程队列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T21:10:05.533

> 但这并不能解决所描述的问题-据我所知，WCF netMsmqBinding 不使用本地队列将消息发送到远程队列。

其实这是不正确的。无论您是否使用 WCF，MSMQ*总是通过本地队列发送到远程队列。*

如果您将消息发送到远程队列，然后查看服务器管理中的消息队列，您将在出站队列中看到已使用远程队列的地址创建了一个队列。这是一个自动为您创建的临时队列。如果远程队列由于某种原因不可用，则消息将位于本地队列中，直到可用，然后才被传输。

由于三阶段提交，因此提供了持久性：

1.  在本地事务性地写入消息
2.  事务性传输消息
3.  事务性地接收和处理消息

在某些情况下，您可能会丢弃消息，例如，如果您的消息处理发生在*出队*事务范围之外，以及无法知道处理是否成功的情况（例如后端 Web 服务调用超时)，当然你可能有一个格式错误的消息，它永远不会成功处理，但在所有情况下都应该可以为这些设计。

如果您在集群环境中使用公共队列，那么我认为可能会有更大的失败空间，因为集群 msmq 会引入复杂性（我没有真正使用过，所以我不知道）所以尽量避免。

# c - 遍历双向链表时崩溃

> ID：14285776
> 
> 赞同：0
> 
> 时间：2013-01-11T20:00:38.053
> 
> 标签：c, linked-list, doubly-linked-list

```
typedef struct tape
{
    char symbol;
    struct tape *next;
    struct tape *prev;
}tape;

tape *pt;    

void GenerateInputTape(int n)
{
    int i;

    pt=(tape*)malloc(sizeof(tape));

    pt->symbol='B';

    pt->prev=NULL;
    pt->next=(tape*)malloc(sizeof(tape));
    pt=pt->next;

    for(i=0;i<2*(n+1);i++)
    {   
        if(i < (2*n/2))
            pt->symbol='0';
        else
            pt->symbol='1';

        pt->prev=pt;
        pt->next=(tape*)malloc(sizeof(tape));
        pt=pt->next;
    }

    pt->symbol='B';

    pt->next=NULL;
}

void ShowTape()
{
    //Move tape to the beginning
    while (pt->prev != NULL)
        pt=pt->prev; //crash point

    //List out all of the elements
    while ((pt->next) != NULL)
    {   
        printf("%c",pt->symbol);
        pt=pt->next;
    }
    puts("\n");
} 
```

这是一个程序代码片段，旨在创建一个双向链表，用 B0...n011....(n+1)1B 字符填充它并打印它们。不幸的是，它在返回时崩溃了。为什么？

> turing_machine.exe 中 0x771a15de 处未处理的异常：0xC0000005：访问冲突读取位置 0xcdcdcdd5。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-11T20:04:46.633

你设置不`pt->prev`正确。

代替

```
pt->prev=pt;
pt->next=(tape*)malloc(sizeof(tape)); 
```

尝试：

```
pt->next = malloc(sizeof(tape));
pt->next->prev = pt; 
```

# mysql - 使用 MYSQL 跨表选择数据的连接语句出现问题

> ID：14285777
> 
> 赞同：1
> 
> 时间：2013-01-11T20:00:41.003
> 
> 标签：mysql, sql, join

我正在尝试显示用户创建的事件和他注册的事件。我为此准备了三张桌子。

```
//events
| event_id | event_title  | event_details   | event_timestamp | userid
    1           title1        test              1234              1
    2           title2         testing2         123               2

//registration_items : event_id references events.event_id
| id | event_id | task_name 
   1       2        task 1

//registration_signup : id references registration_items.id
| id  | userid | timestamp 
   1       1        1234 
```

这是我当前的查询。**现在它只显示用户创建的事件。它应该显示创建的事件和他注册的事件**

```
select events.*, registration_items.*, registration_signup.*, users.username from events
INNER JOIN users on users.userid = events.userid
LEFT JOIN registration_items ON registration_items.event_id = events.event_id
LEFT JOIN registration_signup ON registration_signup.id = registration_items.id
WHERE events.userid = '$user_id' OR registration_signup.userid = '$user_id' ORDER BY events.event_timestamp DESC 
```

对于 userid1，输出应该是

```
Title
title1  (the user created this)
title2  (the user signed up for this) 
```

对于 userid2，输出应该是

```
Title
title2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T20:06:11.287

```
select events.*, registration_items.*, registration_signup.*, users.username
from events
  INNER JOIN users on users.userid = events.userid
  LEFT JOIN registration_items ON registration_items.event_id = events.event_id
  LEFT JOIN registration_signup ON registration_signup.id = registration_items.id
WHERE registration_signup.userid = '$user_id'

union

select events.*, registration_items.*, registration_signup.*, users.username
from events
  INNER JOIN users on users.userid = events.userid
  INNER JOIN registration_items ON registration_items.event_id = events.event_id
  INNER JOIN registration_signup ON registration_signup.id = registration_items.id
WHERE events.userid = '$user_id'

ORDER BY events.event_timestamp DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T20:45:57.557

我不确定猜测您在示例数据中有错字是否正确。因为您的查询在您将两个事件的用户 id 更改为 1 的那一刻起作用，已注册的事件.. 所以请看一下这个参考演示，如果不是错字，请发表评论......

*   ## [SQLFIDDLE 演示](http://sqlfiddle.com/#!2/1f892/2)

查询：（您的查询..）

```
select u.userid,e.event_id as id,  
ri.event_id as evt, e.event_title, 
ri.task_name,
rs.timestamp, 
u.name from events e
INNER JOIN users u on 
u.userid = e.userid
LEFT JOIN registration_items ri ON 
ri.event_id = e.event_id
LEFT JOIN registration_signup rs ON 
rs.id = ri.id
WHERE e.userid = '1' or
rs.userid = '1' 
ORDER BY e.event_timestamp DESC
; 
```

结果：

```
| USERID | ID | EVT | EVENT_TITLE | TASK_NAME | TIMESTAMP | NAME |
------------------------------------------------------------------
|      1 |  1 |   1 |      title1 |    task 1 |      1234 | john |
|      1 |  2 |   2 |      title2 |  task 1.2 |      3456 | john | 
```

# jquery-ui - Jquery UI 工具提示关闭图标

> ID：14285781
> 
> 赞同：2
> 
> 时间：2013-01-11T20:00:56.680
> 
> 标签：jquery-ui, tooltip

我正在尝试在页面加载时显示 Jquery UI 工具提示，并在工具提示内容内使用关闭/十字标记图标。单击 X 图标时应关闭工具提示。我不想使用任何插件。请提出逻辑。

尝试以下代码在 5 秒后隐藏工具提示。

```
var dur=5000; 
$(document).tooltip({
  show:{
      effect:'slideDown'
  },
  track:true,
  open: function( event, ui ) {
      setTimeout(function(){
      $(ui.tooltip).hide();
   }, dur);
  }
}); 
```

尝试下面的代码来显示工具提示

```
<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
  <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
  <link rel="stylesheet" href="/resources/demos/style.css" />
  <script>
      $(function () {
          $(document).tooltip({
              position: {
                  using: function (position, feedback) {
                      $(this).css(position);
                      $("<div>")
                        .addClass("arrow")
                        .addClass(feedback.vertical)
                        .addClass(feedback.horizontal)
                        .appendTo(this);
                  }
              }
          });
      });
  </script>
  <style>
  .ui-tooltip, .arrow:after {
    background: black;
  }
  .ui-tooltip {
    padding: 10px 20px;
    color: white;

    font: 8px "Helvetica Neue", Sans-Serif;
    text-transform: uppercase;
  }
  .arrow {
    width: 70px;
    height: 16px;
    overflow: hidden;
    position: absolute;
    left: 50%;
    margin-left: -35px;
    bottom: -16px;
  }
  .arrow.top {
    top: -16px;
    bottom: auto;
  }
  .arrow.left {
    left: 80%;
  }
  .arrow:after {
    content: "";
    position: absolute;
    left: 20px;
    top: -20px;
    width: 25px;
    height: 25px;
    box-shadow: 6px 5px 9px -9px black;
    -webkit-transform: rotate(45deg);
    -moz-transform: rotate(45deg);
    -ms-transform: rotate(45deg);
    -o-transform: rotate(45deg);
    tranform: rotate(45deg);
  }
  .arrow.top:after {
    bottom: -20px;
    top: auto;
  }
  </style>
</head>
<body>

<p title="Sample Tool Tip Text">Tooltips</p> 

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T20:58:54.120

如果您想以这种方式使用工具提示，则不能使用`$(document).tooltip()`. 相反，您必须使用`$(selector).tooltip().focus()`，这将强制打开工具提示。

然后你需要绑定一个点击事件并执行以下操作`$(selector).tooltip("destroy")`：

使用您的 jsfiddle，我进行了以下更改：

HTML：

```
<p id="p1" title="Sample Tool Tip Text">Tooltips</p> 
```

JAVASCRIPT：

```
$(function () {
     $("#p1").tooltip({
       items: "p", //use this to override content - in this example, I am using "p" but you can also use classes/id's/etc
       content: function (){
        if ($(this).is("p") ) {
          var text = $(this).attr("title");
          return text + '<span style="position:absolute;top:0;right:0;" class="tooltipClose ui-icon ui-icon-circle-close"></span>';
         }
       },
       position: {
         using: function (position, feedback) {
           $(this).css(position);
           $("<div>")
           .addClass("arrow")
           .addClass(feedback.vertical)
           .addClass(feedback.horizontal)
           .appendTo(this);
         }
       }
     }).focus();

   $(".tooltipClose").click(function(){
      $("#p1").tooltip("destroy");
   });
 }); 
```

这是一个演示：http: [//jsfiddle.net/u8kX9/9/](http://jsfiddle.net/u8kX9/9/)

希望这就是你要找的！需要帮助请叫我！

# javascript - d3js selection.enter() 取决于新添加数据的顺序？

> ID：14285783
> 
> 赞同：0
> 
> 时间：2013-01-11T20:01:03.373
> 
> 标签：javascript, d3.js

我理解错了吗？或者它应该是那样的？

原圆

```
d3.select("svg").selectAll('circle')
.data([{'name':'john', 'age': '50'}]).enter().append('circle')
.attr("cx", function(d){return d.age;}).attr("cy", '200').attr("r", '10').attr("fill",    'red'); 
```

点击按钮A调用下面的函数

```
function prependValue(){
    d3.select("svg").selectAll('circle')
    .data([{'name':'peter', 'age': '100'}, {'name':'john', 'age': '50'} ])
    .enter().append('circle').attr("cx", function(d){return d.age;}).attr("cy", '200').attr("r", '10').attr("fill", 'green');
} 
```

我假设它应该在 cx = 100 处为彼得添加一个绿色圆圈，但是，它将约翰的圆圈颜色更改为绿色。

如果我做

```
.data([{'name':'john', 'age': '50'}, {'name':'peter', 'age': '100'} ]) 
```

一切都按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T20:46:13.153

在这里，我引用了 Mike 在 google group 上对这个问题的回答，以防有人想知道加入是如何工作的：“如果你想按名称加入，你需要指定一个键函数。否则默认行为是按索引加入。

[http://bost.ocks.org/mike/constancy/](http://bost.ocks.org/mike/constancy/) [https://github.com/mbostock/d3/wiki/Selections#wiki-data](https://github.com/mbostock/d3/wiki/Selections#wiki-data)

迈克“

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T20:38:46.880

如果您没有指定用于匹配数据元素的函数（ 的可选参数`.data()`），D3 会按元素的索引匹配元素。也就是说，它确实假设您将以相同的顺序传递元素。

为防止这种情况，请传入一个告诉它如何匹配元素的函数（例如按名称）。有关更多信息，请参阅[文档](https://github.com/mbostock/d3/wiki/Selections#wiki-data)。

# google-maps - 谷歌地图地理编码的更好的免费选项

> ID：14285792
> 
> 赞同：0
> 
> 时间：2013-01-11T20:01:32.050
> 
> 标签：google-maps, yahoo, bing, geocode

我正在使用谷歌地图进行地理编码。但是我有 280k 地址进行地理编码，我想知道一个更好的选择。谢谢你。

我找了必应和雅虎！制作地理编码器的教程，但什么也没找到，只有绘图教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-11T21:00:16.160

必应地图有几个不同的地理编码数据选项。也有很多关于这方面的信息。

Bing Maps 中的批量地理编码器允许获得许可的客户每天对多达 25 个包含 200,000 个地址的文件进行地理编码。未经许可的客户每个文件限制为 50 个地址。文档：http: [//msdn.microsoft.com/en-us/library/gg585136.aspx](http://msdn.microsoft.com/en-us/library/gg585136.aspx)

[http://msdn.microsoft.com/en-us/library/ff701733.aspx](http://msdn.microsoft.com/en-us/library/ff701733.aspx)

Bing Maps 还具有按需 REST 地理编码服务，可以一次对一个地址进行地理编码。这是一些文档：

[http://msdn.microsoft.com/en-us/library/ff701715.aspx](http://msdn.microsoft.com/en-us/library/ff701715.aspx)

[http://msdn.microsoft.com/en-us/library/jj819168.aspx](http://msdn.microsoft.com/en-us/library/jj819168.aspx)

[http://msdn.microsoft.com/en-us/library/jj870778.aspx](http://msdn.microsoft.com/en-us/library/jj870778.aspx)

[http://blogs.bing.com/maps/2013/02/14/bing-maps-rest-service-tips-tricks/](http://blogs.bing.com/maps/2013/02/14/bing-maps-rest-service-tips-tricks/)

尽管如此，应该注意的是，大多数地图平台的地理编码都有限制。通常它们不能与竞争的地图平台一起使用。即 Bing Maps 地理编码的数据不能在 Google Maps 应用程序中使用。

# objective-c - 更新 UIImageView 图像文件时，其他 UIImageView 将其位置重置为中心

> ID：14285793
> 
> 赞同：0
> 
> 时间：2013-01-11T20:01:32.180
> 
> 标签：objective-c, cocoa-touch, uiimage

我一直在尝试几乎同时更新两个 UIImageView 元素。一个应该改变它的位置（image01），另一个应该改变它的图像文件（image02）。

这里的问题是，当我更改 image02 的图像文件时，image01 的位置数据被重置为中心（即元素的原点）。

我完全在这里。你们中有人对造成这种情况的原因有任何想法吗？

这是代码：

```
- (void) touchesEnded:(NSSet*)touches withEvent:(UIEvent*)event {
    UITouch* touch = [touches anyObject];
    CGPoint point = [touch locationInView:self.view];

    // Setting crosshair new position
    [self setCrossHairPosition:point];
    // Getting camera preview, and discovering pixel color at touch location
    // I also set colorName here
    [self captureNow:touch];

    // Getting file and inserting it in the UIImageView
    fileName = [NSString stringWithFormat:@"%@.png", colorName];
     _colorADDPreview.image = [UIImage imageNamed:fileName];
}

- (void) setCrossHairPosition:(CGPoint)point {
    CGRect crossHairRect = _crossHair.frame;
    crossHairRect.origin.x = point.x - (crossHairRect.size.width/2);
    crossHairRect.origin.y = point.y - (crossHairRect.size.height/2);
    _crossHair.frame = crossHairRect;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:41:30.873

我意识到问题出在屏幕的重绘上。

因此，我没有通过界面构建​​器插入元素，而是以编程方式插入它并跟踪它在变量中的位置 =]

# windows-phone-7 - VS2010 Express for Windows Phone 中没有 XmlDocument 和 XDocument

> ID：14285796
> 
> 赞同：0
> 
> 时间：2013-01-11T20:01:49.900
> 
> 标签：windows-phone-7, xml-parsing, linq-to-xml

我使用 MS Studio 2010 Express for Windows Phone 来构建应用程序。在我的应用程序中，我得到了 http 响应并以字符串形式读取它，然后我将其反序列化到类对象中。它在没有 List 集合作为属性的类中工作正常。当它反序列化具有 List 属性的类时，它得到了这样的错误

```
Error in line 12 position 5\. Expecting state  'Element'.. Encountered 'EndElement'  with name  'ContactList', namespace  'http://schemas.datacontract.org/2004/07/DataObjects’. 
```

我想我可以读取 xml 并将值分配给类。我搜索阅读 xml 文件和很多网站提到使用 XDocument .Prase 方法或 xlmDocument.Load。但是添加 System.Xml.Ling 作为参考的事件，我仍然看不到 XDocument .Parse 方法或 xlmDocument 。有人会告诉我应该怎么做才能将以下值分配给班级吗？

有我的类对象：

```
public class CallDetails
{
    public int id { get; set; }
    public string summary { get; set; }
    public string errorMsg { get; set; }
    public int parentCallid { get; set; }
    public string parentCallURL { get; set; }
    public string assignedTo { get; set; }
    public string OrgName { get; set; }
    public DateTime onHoldSince { get; set; }
    public DateTime onHoldUntil { get; set; }
    public string requester { get; set; }
    public bool isOnHold { get; set; }
    private List<Contact> m_ContactList = new List<Contact>();

    public List<Contact> ContactList
    {
        get { return m_ContactList; }

    }
} 
```

有回应：

```
<?xml version="1.0" encoding="utf-8"?><CallDetails xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/DataObjects">
<ContactList>
      <Contact>
          <Method>PriPhone</Method>
          <Number>(604) 555-1234</Number>
      </Contact>
      <Contact>
          <Method>Fax</Method>
          <Number>(604)555-1234</Number>
      </Contact>
  </ContactList>
  <errorMsg
      i:nil="true" />
  <id>0</id>
  <isOnHold>false</isOnHold>
  <onHoldSince>0001-01-01T00:00:00</onHoldSince>
  <onHoldUntil>0001-01-01T00:00:00</onHoldUntil>
  <parentCallURL>/Call/349551</parentCallURL>
  <parentCallid>0</parentCallid>
  <requester>Peter </requester>  
  <summary>Mobile Application Research</summary>
</CallDetails> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T20:11:23.340

只是添加引用是`System.Xml.Linq`不行的，还需要在类头中引用命名空间：

```
using System.Xml.Linq; 
```

然后你可以调用类似的东西`XDocument doc = XDocument.Parse(content);`。但是，据我所知，您正在尝试反序列化数据，因此您可能希望使用`XmlSerializer`该类来代替所有核心工作。[你可以在这里](http://dotnet.dzone.com/articles/serializing-and-deserializing)找到一些代码“灵感” 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:21:51.903

我发现 CallDetail 类导致错误。应该是这样的

```
 public List<Contact> ContactList { get; set; } 
```

# django - 保存从表单获取另一个模型实例作为外键的 django 对象

> ID：14285797
> 
> 赞同：0
> 
> 时间：2013-01-11T20:01:59.073
> 
> 标签：django, forms, foreign-keys

我一直试图保存一个模型的实例，该实例从一个表单中获取另一个模型的实例作为外键。

楷模

```
class Customer(models.Model):
    owner = models.ForeignKey(User)
    custname = models.CharField() 

class Appointment(models.Model):
    user = models.ForeignKey(User)
    start = models.DateTimeField()
    end = models.DateTimeField()
    customer = models.ForeignKey(Customer) 
```

形式

```
class AppointmentForm(forms.Form):
    basedate = forms.DateField()
    start = forms.TimeField(widget=forms.Select())
    end = forms.IntegerField(widget=forms.Select())
    customer = forms.ModelMultipleChoiceField(queryset=Customer.objects.all()) 
```

我无法在通用 FormView 中工作的方法：

```
def form_valid(self, form):
    if form.is_valid():
        appointment = Appointment()
        appointment.user = self.request.user
        basedate = form.cleaned_data['basedate']
        start = form.cleaned_data['start']
        duration = form.cleaned_data['end']
        appointment.start = datetime.datetime.combine(basedate, start)
        appointment.end = appointment.start + datetime.timedelta(minutes=duration)
        appointment.save()
        return super(AppointmentCreate, self).form_valid(form) 
```

我应该在最后一种方法中添加什么来从表单中读取外键客户，然后将其传递给约会？是否有任何过滤方式，以便在表单中只出现属于 request.user 的客户？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T20:34:09.487

像这样的东西应该工作。有几件事：

1）我将表单字段更改为 ModelChoiceField 而不是多项选择。您需要使用 ModelChoiceField 来显示关系。我从 MultipleChoice 更改了它，因为根据您的模型，您只想保存一个选择。您可以在此处阅读有关 ModelChoiceFields 的更多信息：[https ://docs.djangoproject.com/en/dev/ref/forms/fields/](https://docs.djangoproject.com/en/dev/ref/forms/fields/)

2）在您的表格中，我将选择查询更改为`customer = forms.ModelChoiceField(queryset=Customer.objects.filter(owner=request.user)`. 这将仅过滤特定用户的客户。

表格.py

```
class AppointmentForm(forms.Form):
    def __init__(self, *args, **kwargs):
        self.request = kwargs.pop("request")
        super(AppointmentForm, self).__init__(*args, **kwargs)

    basedate = forms.DateField()
    start = forms.TimeField(widget=forms.Select())
    end = forms.IntegerField(widget=forms.Select())
    customer = forms.ModelChoiceField(queryset=Customer.objects.filter(owner=request.user)) 
```

视图.py

```
def form_valid(self, form):
    if request.method=='POST':
        form = AppointmentForm(request.POST, request=request)
        if form.is_valid():
            appointment = Appointment()
            appointment.user = self.request.user
            basedate = form.cleaned_data['basedate']
            start = form.cleaned_data['start']
            duration = form.cleaned_data['end']
            appointment.customer = form.cleaned_data['customer']
            appointment.start = datetime.datetime.combine(basedate, start)
            appointment.end = appointment.start + datetime.timedelta(minutes=duration)       
            appointment.save()
            return super(AppointmentCreate, self).form_valid(form)
    else:
        form = AppointmentForm() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:47:27.917

最后我做到了。关键是要覆盖views.py中FormView类的*get*方法，而不是修改forms.py中的*init ：*

表格.py：

```
class AppointmentForm(forms.Form):
    basedate = forms.DateField()
    start = forms.TimeField(widget=forms.Select())
    end = forms.IntegerField(widget=forms.Select())
    customer = forms.ModelChoiceField(queryset=Customer.objects.all())
    ... 
```

视图.py：

```
 def get(self, request, *args, **kwargs):
        """
        Handles GET requests and instantiates a blank version of the form.
        """
        choices_start, choices_duration = self._get_choices()
        form_class = self.get_form_class()
        form = self.get_form(form_class)
        form.fields['start'].widget=forms.Select(choices=choices_start)
        form.fields['end'].widget=forms.Select(choices=choices_duration)
        form.fields['customer'].queryset=Customer.objects.filter(owner=request.user)
        return self.render_to_response(self.get_context_data(form=form)) 
```

@Dan：非常感谢您为帮助我所做的努力。

# php - 从经典 ASP 迁移到 PHP - 本地资源与实时资源

> ID：14285798
> 
> 赞同：2
> 
> 时间：2013-01-11T20:02:02.683
> 
> 标签：php, asp-classic

我正在评估将一个相当大的站点从 Classic ASP 迁移到 PHP，当然我首先会查看所有潜在的问题和减速带。PHP 版本最初仍将在 IIS 下运行。

开发涉及本地 mySQL 服务器和一些本地域，例如 localhost.website.com、localhost.cdn.website.com、localhost.api.website.com 等，但实时系统不使用它们，而是仅使用实时域等等

目前，在经典 ASP 中，系统通过使用仅存在于服务器上的信号量文件在“live”和“dev”之间切换。它在 global.asa 中执行此操作，然后根据文件的存在设置一堆应用程序变量。

我对 PHP 不是特别熟悉，但是环顾四周，它似乎运行“无共享”原则，因此没有“应用程序范围”的东西。

我想知道如何实现一个类似的环境，在该环境中本地代码可以不加更改地上传，并且系统会以有效的方式自动识别它所在的系统。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T20:23:20.170

过去，我们使用这种技术取得了很大的成功：

`DevLevel.0`代表Production，`DevLevel.1`代表Staging，`DevLevel.2`代表Development。我们有一个 PHP 全局包含检查`__FILE__`魔术常量并查看我们所在的位置，然后`DevLevel`相应地设置一个常量。然后在不同的地方，我们会有：

```
if(DevLevel == 0)
  run credit card in live mode;
else
  run credit card in test mode; 
```

但问题是我们已经超出了它。有时站点有 2 个暂存位置和 10 个开发位置，但存在细微差别。

从那时起，我们开发了一个自动化脚本来检查环境并在项目中发出一个 Local.php，它不受版本控制。它非常灵活，允许我们在任何环境中使用一个命令自动生成 apache、nginx、mysql、postgresql、redis、ssl 和项目配置。

* * *

但回到你的项目。这是我的建议：

```
/path/to/project/conf/example-local.php
/path/to/project/conf/local.php
/path/to/project/conf/.gitignore (contents: local.php) 
```

（用您的 SCM 系统使用的任何忽略机制替换 git ignore）

将“示例”配置放入`example-local.php`. 然后，任何时候开发人员或发布工程师检查它的副本，他们只需要复制`example-local.php`并`local.php`调整它。

您的应用程序应该有一个全局包含文件（如 global.php），它首先包含在每个脚本 PERIOD 中。它应该依次包含 local.php，然后验证正确的常量是否已定义且有效。

这是 global.php 的片段

```
 <?
 ///////////////////////////////////////////////////////////////////////////////

 define('App_Path', dirname(dirname(__FILE__)));
 define('CORE_PATH', App_Path.'/Web/');

 ini_set("max_execution_time", "0");

 // For the purposes of including pear embedded in the application
 set_include_path(App_Path . '/PHP/pear' . PATH_SEPARATOR . get_include_path() );

 require_once(App_Path . "/AutoConf/Local.php");

 ///////////////////////////////////////////////////////////////////////////////

 // Utility function to assert that a constant has been defined.
 function DefinedOrDie($constant, $message)
 {
   if(! defined($constant))
     die("Constant '$constant' not defined in site configuration. $message");
 }

 // Utility function to check if a constant is defined, and if not, define it.
 function DefinedOrDefault($constant, $default)
 {
   if(! defined($constant))
     define($constant, $default);
 }

 /////////////////////////////////////////////////////////////////////////////////
 // These are the constants which MUST be defined in the AutoConf file

 DefinedOrDie('DevLevel', "DevelopmentLevel.  0=Production, 1=Preview, 2=Devel.");

 if(DevLevel !== 0 && DevLevel !== 1 && DevLevel !== 2)
   die("DevLevel constant must be defined as one of [0, 1, 2].");

 DefinedOrDie('DEFAULT_HOSTNAME', "Canonical hostname of the site.  No trailing slash or leading protocol!");

 DefinedOrDie('DB_HOST', "Database server hostname.");
 DefinedOrDie('DB_NAME', "Database name.");
 DefinedOrDie('DB_USER', "Database login username.");
 DefinedOrDie('DB_PASS', "Database password.");

 if(DevLevel > 0){
   DefinedOrDie('Email_OnlySendIfMatch', "Preg regex email must match to be sent.");
   DefinedOrDie('Email_OverrideAddress', "Email address to send all emails to.");
   DefinedOrDie('Fax_OnlySendIfMatch', "Preg regex fax number must match to be sent.");
   DefinedOrDie('Fax_OverrideNumber', "Fax number to send all faxes to.");
   DefinedOrDie('Text_OnlySendIfMatch', "Preg regex text message must match to be sent.");
   DefinedOrDie('Text_OverrideNumber', "Text number to send all texts to.");
   DefinedOrDie('Phone_OnlySendIfMatch', "Preg regex phone number must match to be sent.");
   DefinedOrDie('Phone_OverrideNumber', "Phone number to place all phone calls to.");

   DefinedOrDefault('PROCESS_BILLING', false);
   DefinedOrDefault('MEMCACHE_ENABLED', false);
 }else{
   DefinedOrDefault('PROCESS_BILLING', true);
   DefinedOrDefault('MEMCACHE_ENABLED', true);
 }

 ///////////////////////////////////////////////////////////////////////////////
 // These are the constants which MAY be defined in the AutoConf file
 // Default settings for live site
 if(DevLevel == 0)
 {
   define('DEVEL', false);
   define('DEVEL_DEBUG', false);
   error_reporting (E_RECOVERABLE_ERROR | E_ERROR | E_PARSE);
   ini_set("display_errors", false);
 }
 // Default settings for preview site
 elseif(DevLevel == 1)
 {
   define('DEVEL', true);
   define('DEVEL_DEBUG', false);
   error_reporting (E_ALL & ~E_NOTICE & ~E_STRICT & ~E_DEPRECATED);
   ini_set("display_errors", true);
 }
 // Default settings for development and other sites
 else
 {
   // TODO: remove E_DEPRECATED, and take care of all warnings
   define('DEVEL', true);
   define('DEVEL_DEBUG', false);
   error_reporting (E_ALL & ~E_NOTICE & ~E_STRICT & ~E_DEPRECATED);
   ini_set("display_errors", true);
 }

 // Memcache settings are required, here are defaults
 DefinedOrDefault('MEMCACHE_HOST', 'localhost');
 DefinedOrDefault('MEMCACHE_PORT', '11211'); 
```

这是一个更复杂（但匹配）的 local.php 示例

```
 <?php

 define('DevLevel', 1);

 define('DB_HOST', 'localhost');
 define('DB_NAME', '*******');
 define('DB_USER', '*******');
 define('DB_PASS', '*******');

 define('DEFAULT_HOSTNAME', '***********');

 define('MEMCACHE_SESSION_HOST', 'localhost');

 //define users who will be notified when different alerts are sent by the system. Separate users with a |
 define('ALERT_LEVEL_NOTICE_SMS', '122342342319');
 define('ALERT_LEVEL_NOTICE_EMAIL', 'j3@example.com');

 define('PROCESS_BILLING', false);

 define('Email_OnlySendIfMatch', '/(appcove.com|example.com)$/');
 define('Email_OverrideAddress', false);

 define('FAXES_LIVE', true); //false to use phaxio's test keys (no faxes are sent)

 function HN_LiveToDev($host){
   return str_replace('.', '--', $host).'.e1.example.net';
 }

 function HN_DevToLive($host){
   $count = 0;
   $host = str_replace('.e1.example.net', '', $host, $count);
   if($count > 0){
     return str_replace('--', '.', $host);
   }else{
     die('URL does not look like a dev URL. Could not translate DevToLive.');
   }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T20:36:28.923

我不熟悉 IIS，但在 apache 上，我让网络服务器仅在我的开发盒网络服务器配置上设置了环境变量。然后在php中：

```
define('DEV', isset($_ENV['my_env_var'])); 
```

这比检查文件要快，因为从来没有任何 IO。它还具有理想的属性，即在没有环境变量的情况下默认为“实时”模式。

`$_ENV`是一个预定义的变量： http: [//php.net/manual/en/reserved.variables.php](http://php.net/manual/en/reserved.variables.php)

当心 - 在 php 中，未定义的常量被解释为不带引号的字符串，并将强制为布尔值 true。只要确保常量总是被定义，你会没事的。

# opencv - 打开 CV 应用程序执行时间错误？

> ID：14285805
> 
> 赞同：0
> 
> 时间：2013-01-11T20:02:48.660
> 
> 标签：opencv

我正在运行我的项目“DisplayImage”，在 Eclipse 中**打开 CV**应用程序，但在调试文件夹下的**DisplayImage.d中出现错误，错误是：**

```
 make: *** multiple target patterns.  Stop. 
```

我的代码是：

```
#include <cv.h>
#include <highgui.h>
using namespace cv;

 int main( int argc, char** argv )
 {
  Mat image;
  image = imread( argv[1], 1 );

 if( argc != 2 || !image.data )
   {
     printf( "No image data \n" );
     return -1;
   }

   namedWindow( "Display Image", CV_WINDOW_AUTOSIZE );
   imshow( "Display Image", image );

   waitKey(0);

   return 0;
 } 
```

我已成功在项目中包含 lib 并打开 cv，但是当我尝试运行项目时出现此错误

# c++ - 适用于 iOS 和 Android 平台的 c++ 字符串操作

> ID：14285806
> 
> 赞同：0
> 
> 时间：2013-01-11T20:02:52.457
> 
> 标签：c++, ios, string

我正在将游戏从 objC (ios) 移植到 C++。请告诉我是否有任何跨平台 C++ 库来获得等效于以下 objC 字符串操作。

stringByAppendingPathComponent

stringByDeletingLastPathComponent

最后路径组件

stringByDeletingPathExtension

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T20:09:18.597

好吧，这提供了一些特定的[路径](http://www.boost.org/doc/libs/1_41_0/libs/filesystem/doc/reference.html#Class-template-basic_path)行为。您还可以使用来自`std::string`. [这里](http://www.cplusplus.com/forum/beginner/1962/)的第一个答案有一些例子（虽然他们没有完全按照你的意愿做，但它会给你一个大致的想法）。

# css - Sencha Touch Architect 中的样式或自定义选取器

> ID：14285807
> 
> 赞同：0
> 
> 时间：2013-01-11T20:02:53.897
> 
> 标签：css, sencha-touch, picker, sencha-architect

如何完全自定义 Sencha Touch 选择器？

[这是默认选择器的外观。](http://docs.sencha.com/touch/2-0/#!/api/Ext.picker.Picker)

我已经设法自定义框架、中心和按钮，但我找不到任何东西可以让我自定义那个蓝色渐变工具栏。我什至找不到让它透明的地方。

[我的选择器，代码如下](http://dl.dropbox.com/u/14084584/picker.png)

代码：

```
 Ext.define('FOLUI.view.pageValuePicker', {
      extend: 'Ext.picker.Picker',
      alias: 'widget.pageValuePicker',

      config: {
        cls: 'PickerFrame',
        height: 200,
        itemId: 'pageValuePicker',
        doneButton: {
          cls: 'PaginationButton',
          width: '80px',
          pressedCls: 'PaginationButtonPressed'
        },
        cancelButton: {
          cls: 'PaginationButton',
          width: '80px',
          pressedCls: 'PaginationButtonPressed'
        },
        slots: [
          {
            xtype: 'pickerslot',
            cls: [
              'PickerMiddle'
            ],
            itemId: 'pageValuePickerSlot',
            align: 'center',
            data: [
              {
                text: '1',
                value: 1
              },
              {
                text: '2',
                value: 2
              },
              {
                text: '3',
                value: 3
              },
              {
                text: '4',
                value: 4
              },
              {
                text: '5',
                value: 5
              },
              {
                text: '6',
                value: 6
              },
              {
                text: '7',
                value: 7
              },
              {
                text: '8',
                value: 8
              },
              {
                text: '9',
                value: 9
              }
            ],
            name: 'pageValuePickerSlot'
          }
        ]
      }

    }); 
```

CSS：

```
 .PaginationButton {
        background: #002c42 !important;
        color:#ffffff;
        font-size: 16px;
        font-weight: bold;
        border-radius: 4px;
        border: 1px solid #000d13;
        -webkit-box-shadow: inset 0px 1px 0px #678796;
    }

    .PaginationButtonPressed {
        background: #00344e !important;
        color:#ffffff;
        font-size: 16px;
        font-weight: bold;
        border-radius: 4px;
        border: 1px solid #000d13;
        -webkit-box-shadow: inset 0px 1px 0px #678796;
    }

    .PickerFrame {
        background: #dae4ec !important;
        border: 1px solid #6890b0;
        -webkit-box-shadow: inset 0px 1px 0px #ffffff;
    }

    .PickerMiddle {
        font-family: Arial, "Helvetica Neue", Helvetica, sans-serif;
        color: #022c42 !important;
        font-weight: bold;
        line-height: 45px;
        background-color: #ffffff !important;
        border-radius: 6px;
        border-top-left-radius: 0px;
        border-top-right-radius: 0px;
        border: 1px solid #6890b0;
        -webkit-box-shadow: inset 0px 0px 13px 3px #cbcbcb;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T07:14:12.317

您可以根据其使用的默认元素类设置 ST 样式。最简单的方法是在浏览器中“检查元素”并检查相关项目的类（ST 类名称以 开头`x-`，如`x-toolbar`）。如果你想阻止任何不属于你修改的小部件的项目的样式，你可以给你的小部件一个唯一的 id/class 并在你的 CSS 规则前面加上它。

如果您觉得从自己的 CSS 文件中覆盖现有样式感到尴尬，或者如果您想更深入地研究 ST 样式/主题：ST 使用 SASS/Compass 构建 CSS 文件。设置起来有点麻烦，但好处是您可以使用 SASS/Compass 函数来创建自己的渐变、配色方案等。此外，结果是您最终只得到一个包含所有内容的 CSS 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T22:52:23.123

选择器具有带渐变的伪类。但是 chrome 的 dom 检查器有一些奇怪的行为，可能不会显示伪类。所以你找不到它。转到 CSS 文件并在那里编辑样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-01T08:45:42.053

您可以使用此技巧真正扩展您希望配置的选项：

```
items: [
            {
                xtype: 'selectfield',
                label: 'Choose one',
                usePicker: 1, // convert selectfield into a picker
                defaultPhonePickerConfig: { // customise text values displayed
                  doneButton: 'Select',
                  cancelButton: 'Cancel' 
                },
                options: [
                    {text: 'First Option',  value: 'first'},
                    {text: 'Second Option', value: 'second'},
                    {text: 'Third Option',  value: 'third'}
                ]
            }
        ] 
```

现在至于您希望避免的样式，请不要包含它。您正在看到调用了 ST 默认样式。您已经设法覆盖了部分样式，并且通过向您展示上面的示例，其中选择可以是选择器，您可以看到可以调用样式的位置有多么不同在。

罪魁祸首（ST2.2）：

```
@import 'sencha-touch/default';
@import 'sencha-touch/default/all'; 
```

注释掉“all”行，然后只调用您希望默认样式的单个组件。

```
// @import 'sencha-touch/default/all';
// replacing direct reference to exact path of component mixin
// all in relation to the "sencha-touch" folder which is pathed in config.rb
@import 'sencha-touch/default/src/_MessageBox.scss'; 
@import 'sencha-touch/default/src/_Toolbar.scss'; 
```

一旦你习惯了 mixin 文件的结构以及它是如何被引用和调用的，你就可以通过只调用 ST 的绝对最小结构，即“基础”来简化你的生活。将您希望使用的 mixin 组件复制到 /resources/sass/mixins 中，修改样式以满足您的需要。结果是生成了一个小得多的样式表，消除了所有令人毛骨悚然的默认设置。

# xaml - 从 Windows 商店应用程序的搜索窗格中删除搜索建议

> ID：14285808
> 
> 赞同：1
> 
> 时间：2013-01-11T20:02:58.383
> 
> 标签：xaml, search, windows-8, windows-rt

我只想显示来自我的应用内搜索的搜索建议，而不是默认出现在 Windows 商店应用程序的 SearchPane 中的建议。搜索窗格中有默认存在的应用程序，我不想在我的应用程序搜索结果中显示它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T20:28:38.360

在您的搜索页面中，只需添加：

**注册事件：**

```
SearchPane.GetForCurrentView().SuggestionsRequested += OnSuggestionsRequested; 
```

**处理建议请求事件：**

```
void OnSuggestionsRequested(SearchPane sender, SearchPaneSuggestionsRequestedEventArgs args)
{
    string query = args.QueryText.ToLower();
    string[] terms = { "salt", "pepper", "water", "egg", "vinegar", "flour", "rice", "sugar", "oil" };

    foreach(var term in terms)
    {
        if (term.StartsWith(query))
            args.Request.SearchSuggestionCollection.AppendQuerySuggestion(term);
    }
} 
```

# facebook - 使用第三方应用程序获取特定用户的 Facebook 帖子列表

> ID：14285810
> 
> 赞同：-2
> 
> 时间：2013-01-11T20:03:00.197
> 
> 标签：facebook, facebook-graph-api

你知道有没有办法在个人墙/时间线上收集最后一个用户的帖子？我需要知道用户分享了多少和哪些 youtube 视频，从他的开放图表配置文件中读取它们。

我从未编写过任何 facebook 应用程序，但如果用户已将包含 Youtube 视频的帖子的隐私选项设置为“公开”，则使用 Open Graph Explorer 似乎可以获得此类信息。

我的问题是：第三方应用程序可以请求读取此类信息的权限吗？如果它们的所有者没有将它们设置为“公开”，它是否也可以访问这些帖子？

编辑：应用程序是否可以像该用户的另一个朋友一样访问用户的帖子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T20:28:03.960

您可以通过创建具有权限的应用程序并在用户通过点击[连接](https://developers.facebook.com/docs/reference/api/user/)`read_stream`授予您访问权限后读取用户的墙。但不建议创建“聆听”工具应用程序，如果您的应用程序对其用户没有价值，那么您可能需要重新考虑您的应用程序使命。`me/feed`

# c++ - 快速 RAM 中的动态内存分配

> ID：14285815
> 
> 赞同：8
> 
> 时间：2013-01-11T20:03:14.893
> 
> 标签：c++, c, windows, memory-management

在 Windows 32 位和 64 位机器上，我必须分配内存来存储大量实时流式传输的数据，总共大约 1GB。如果我使用 malloc()，我将获得一个虚拟内存地址，根据我拥有的内存量，这个地址实际上可能会导致对硬盘驱动器的一些分页。不幸的是，我担心 HD 会影响性能并导致数据丢失。

有没有办法强制内存仅在 RAM 中分配，即使这意味着当没有足够的内存可用时出现错误（因此用户需要关闭其他东西或使用另一台机器）？我想保证所有操作都在内存中完成。如果失败，强制应用程序退出是可以接受的。

我知道可能会出现另一个进程，并且它本身会占用一些内存，但我并不担心，因为在这台机器上并没有发生这种情况（它将是机器上唯一执行这种大分配的应用程序）。

[编辑：] 到目前为止，我的尝试是尝试使用 VirtualLock，如下所示：

```
if(!SetProcessWorkingSetSize(this, 300000, 300008))
    printf("Error Changing Working Set Size\n");

// Allocate 1GB space
unsigned long sz = sizeof(unsigned char)*1000000000;
unsigned char * m_buffer = (unsigned char *) malloc(sz);

if(m_buffer == NULL)
{
    printf("Memory Allocation failed\n");
}
else
{
    // Protect memory from being swapped
    if(!VirtualLock(m_buffer , sz))
    {
           printf("Memory swap protection failed\n");
    }           
} 
```

但是工作集的更改失败了，VirtualLock 也是如此。Malloc 确实返回非空值。

[Edit2] 我也试过：

```
 unsigned long sz = sizeof(unsigned char)*1000000000;
 LPVOID lpvResult;
 lpvResult = VirtualAlloc(NULL,sz, MEM_PHYSICAL|MEM_RESERVE, PAGE_NOCACHE); 
```

但是 lpvResult 是 0，所以也没有运气。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T20:12:12.727

您可以使用[mlock、mlockall、munlock、munlockall](http://www.kernel.org/doc/man-pages/online/pages/man2/mlock.2.html)函数来防止页面被交换（POSIX 的一部分，在 MinGW 中也可用）。不幸的是，我没有使用 Windows 的经验，但看起来[VirtualLock](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366895%28v=vs.85%29.aspx)做了同样的事情。

希望能帮助到你。祝你好运！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T20:12:44.620

我认为[VirtualAlloc](http://msdn.microsoft.com/en-us/library/aa366887%28v=VS.85%29.aspx)可能会给你一些你想要的东西。

这个问题实际上归结为只是编写自己的内存管理器而不是使用 CRT 函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T21:33:18.863

您需要将未记录的[`NtLockVirtualMemory`](http://undocumented.ntinternals.net/UserMode/Undocumented%20Functions/Memory%20Management/Virtual%20Memory/NtLockVirtualMemory.html)功能与锁定选项 2 ( `LOCK_VM_IN_RAM`) 一起使用；确保您首先请求并获得`SE_LOCK_MEMORY_NAME`特权，并注意它可能不会被授予（我确定组策略默认的特权是什么，但它很可能被授予任何人）。

我建议使用`VirtualLock`作为后备，如果也失败了，使用`SetProcessWorkingSetSize`. 如果失败了*，*那就让它失败吧，我猜......

有关此问题的一些很好的讨论，请参[见此链接。](http://www.techtalkz.com/microsoft-device-drivers/261194-memory-ordering-flag-state-variables-4.html)一个人说：

> 当您指定`LOCK_VM_IN_WSL`标志时，您只需告诉平衡集管理器您不希望将某些特定页面交换到磁盘，并要求它在修剪目标进程的工作集时不理会该页面。这只是一个指示，因此如果系统内存不足，目标页面可能仍会被交换。但是，当您指定`LOCK_VM_IN_RAM`标志时，您会向内存管理器发出指令以将此页面视为不可分页（即驱动程序在调用`MmProbeAndLockPages`() 时执行某些操作以锁定页面，由 MDL 描述），以便该页面问题是保证一直加载到 RAM 中。

* * *

## 编辑：

### 读[这个](http://blogs.msdn.com/b/oldnewthing/archive/2007/11/06/5924058.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T21:44:33.183

一种选择是从主机的内存中创建一个 RAM 磁盘。虽然在分布式 Windows 代码中不再对此提供本机支持，但您仍然可以免费找到必要的驱动程序或通过商业产品提供这些驱动程序。例如，DRDataRam 提供供个人使用的免费驱动程序和供商业使用的商业许可产品，网址为：http: [//memory.dataram.com/products-and-services/software/ramdisk](http://memory.dataram.com/products-and-services/software/ramdisk)

还有 ImDisk 虚拟驱动程序可在以下网址获得：[http](http://www.ltr-data.se/opencode.html/#ImDisk) ://www.ltr-data.se/opencode.html/#ImDisk它是开源的，可免费用于商业用途。它使用来自 Microsoft 的受信任证书进行数字签名。

有关 Windows 上的 RAM 驱动器的更多信息，请查看 ServerFault.com。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T22:10:45.433

您应该看看[Address Windowing Extensions (AWE)](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366527%28v=vs.85%29.aspx)。听起来它与您的内存限制相匹配（强调我的）：

> AWE在 32 位虚拟地址空间内使用**物理非分页内存和该物理内存各个部分的窗口视图。**

# javascript - Javascript Onclick vs Onmousedown 竞争条件

> ID：14285817
> 
> 赞同：0
> 
> 时间：2013-01-11T20:03:18.333
> 
> 标签：javascript, listener, race-condition, mousedown

我有一个表单的提交和保存按钮，默认情况下监听 Onclick 事件。当表单被提交或保存时 - 页面将滚动位置重置为页面的顶部。

最近，应用程序的用户要求页面停留在页面底部，按钮所在的页面仅用于表单的子集。（这些按钮用于数百种其他形式，因此我无法全局更改滚动的重置。）

所以我试图实现的解决方案涉及几个隐藏的输入字段和一些事件监听器。

我为这些按钮添加了一个 onmousedown 事件，就像这样 -

```
// Submit and Save button listeners
  var globalButtons;
  if (v_doc.getElementsByClassName) {
    globalButtons = v_doc.getElementsByClassName('globalbuttons');
  }
  // Internet Explorer does not support getElementsByClassName - therefore implement our own version of it here
  else {
    globalButtons = [];
    var myclass = new RegExp('\\b'+'globalbuttons'+'\\b');
    var elem = v_doc.body.getElementsByTagName("input");
    for (var i = 0; i < elem.length; i++) {
      var classes = elem[i].className;
      if (myclass.test(classes)) {
        globalButtons.push(elem[i]);
      }
    }
  }
  for (var gb = 0; gb < globalButtons.length; gb++) {
    if (globalButtons[gb].name == 'methodToCall.route' ||
        globalButtons[gb].name == 'methodToCall.save') {
      if(globalButtons[gb].addEventListener) { //all browsers except IE before version 9
         globalButtons[gb].addEventListener("mousedown", function(){flagSpecialScrollOnRefresh()},false);
      }
      else {
        if(globalButtons[gb].attachEvent) { //IE before version 9
           globalButtons[gb].attachEvent("onmousedown",function(){flagSpecialScrollOnRefresh()});
        }
      }
    }
    else { continue; }
  } 
```

此代码位于一个名为`attachButtonListeners`

接下来，我像这样定义了我的处理程序并将其放入另一个函数中，每次加载我的页面时都会调用该函数 -

```
function checkSpecialScrollCase() {
  var spfrm   = getPortlet();
  var sp_doc  = spfrm.contentDocument ? spfrm.contentDocument: spfrm.contentWindow.document;
  var specialScrollExists = sp_doc.getElementById(docTypeButton).value;

  if (specialScrollExists == "YES") {
    sp_doc.getElementById(docTypeButton).value = 'NO';
  }
  // else - nothing to do in this case
} 
```

docTypeButton =`REQS_BUTTONS` 它引用了我的 JSP 页面底部的以下元素 -

```
<input type="hidden" id="REQS_BUTTONS" value="NO"/>
<a name="anchorREQS"></a> 
```

注意锚标记。最后，我需要将 location.hash 调用添加到我的处理程序中，以便滚动到该位置。这部分在这一点上是无关紧要的，这就是原因。

问题 - 我的 flagSpecialScrollOnRefresh 函数没有将值设置为 YES。

我相信我的 onClick 事件发生得太快，以至于我的 onmousedown 事件不会发生。

证据——如果我像这样发出警告声明——

```
function flagSpecialScrollOnRefresh() {
  var scfrm   = getPortlet();
  var sc_doc  = scfrm.contentDocument ? scfrm.contentDocument: scfrm.contentWindow.document;
  alert("BLAH!");
  sc_doc.getElementById(docTypeButton).value = "YES";
} 
```

然后我使用 Firebug 检查元素 - 值正在设置！一旦我拿出警报 - 不行！

如何确保我的`mousedown`事件首先执行？或者这甚至是这里的问题？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T20:26:04.007

`mousedown`是`click`事件的一部分。

无论您`click`现在对事件做什么，都应该将其移至`submit`表单上的事件。这样你就可以使用`mousedown`, `mouseover`, 甚至`click`在*按钮*上做任何你想做的事情。

# java - 构建热点时操作系统不支持错误

> ID：14285820
> 
> 赞同：9
> 
> 时间：2013-01-11T20:03:33.827
> 
> 标签：java, linux, openjdk

我正在尝试从源代码构建 openjdk，并且我在 ubuntu 12.04 上的 openjdk6 上使用“HOTSPOT_RELEASE_VERSION=20.0-b12”。它提示：

```
This OS is not supported:" `uname -a`; exit 1;<br>
This OS is not supported: Linux joker-Inspiron-1545 3.2.0-35-generic-pae #55-Ubuntu SMP Wed Dec 5 18:04:39 UTC 2012 i686 i686 i386 GNU/Linux. 
```

有人可以指导我吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-27T08:19:58.257

更改热点/make/linux/Makefile
SUPPORTED_OS_VERSION = 2.4% 2.5% 2.6% 2.7% **3%**

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-06-30T16:02:02.547

比编辑文件更简单的方法是设置环境变量

`DISABLE_HOTSPOT_OS_VERSION_CHECK=ok`

# android - 在蓝牙打印机中格式化文本

> ID：14285822
> 
> 赞同：10
> 
> 时间：2013-01-11T20:03:40.557
> 
> 标签：android, text, printing, bluetooth, format

实际上，我必须实现一个连接到 BT 术语打印机并在其中打印的模块。我有一个简单但实​​用的示例，它适用于打印机。问题是这些文本是以纯文本打印的，我必须给它格式，粗体，更改字体大小和其他......我该怎么做？？我不知道如何......我使用这个类：

```
/*
 * Copyright (C) 2009 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.edec.aptr;

import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.UUID;

import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothServerSocket;
import android.bluetooth.BluetoothSocket;
import android.content.Context;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.util.Log;

/**
 * This class does all the work for setting up and managing Bluetooth
 * connections with other devices. It has a thread that listens for incoming
 * connections, a thread for connecting with a device, and a thread for
 * performing data transmissions when connected.
 */
public class BluetoothService {
    // Debugging
    private static final String TAG = "BluetoothService";
    private static final boolean D = true;

    // Name for the SDP record when creating server socket
    private static final String NAME = "BTPrinter";

    // Unique UUID for this application
    private static final UUID MY_UUID = UUID
            .fromString("00001101-0000-1000-8000-00805F9B34FB"); // change by
                                                                    // chongqing
                                                                    // jinou

    // Member fields
    private final BluetoothAdapter mAdapter;
    private final Handler mHandler;
    private AcceptThread mAcceptThread;
    private ConnectThread mConnectThread;
    private ConnectedThread mConnectedThread;
    private int mState;

    // Constants that indicate the current connection state
    public static final int STATE_NONE = 0; // we're doing nothing
    public static final int STATE_LISTEN = 1; // now listening for incoming
                                                // connections
    public static final int STATE_CONNECTING = 2; // now initiating an outgoing
                                                    // connection
    public static final int STATE_CONNECTED = 3; // now connected to a remote
                                                    // device

    /**
     * Constructor. Prepares a new BTPrinter session.
     * 
     * @param context
     *            The UI Activity Context
     * @param handler
     *            A Handler to send messages back to the UI Activity
     */
    public BluetoothService(Context context, Handler handler) {
        mAdapter = BluetoothAdapter.getDefaultAdapter();
        mState = STATE_NONE;
        mHandler = handler;
    }

    /**
     * Set the current state of the connection
     * 
     * @param state
     *            An integer defining the current connection state
     */
    private synchronized void setState(int state) {
        if (D)
            Log.d(TAG, "setState() " + mState + " -> " + state);
        mState = state;

        // Give the new state to the Handler so the UI Activity can update
        mHandler.obtainMessage(amarre.MESSAGE_STATE_CHANGE, state, -1)
                .sendToTarget();
    }

    /**
     * Return the current connection state.
     */
    public synchronized int getState() {
        return mState;
    }

    /**
     * Start the service. Specifically start AcceptThread to begin a session in
     * listening (server) mode. Called by the Activity onResume()
     */
    public synchronized void start() {
        if (D)
            Log.d(TAG, "start");

        // Cancel any thread attempting to make a connection
        if (mConnectThread != null) {
            mConnectThread.cancel();
            mConnectThread = null;
        }

        // Cancel any thread currently running a connection
        if (mConnectedThread != null) {
            mConnectedThread.cancel();
            mConnectedThread = null;
        }

        // Start the thread to listen on a BluetoothServerSocket
        if (mAcceptThread == null) {
            mAcceptThread = new AcceptThread();
            mAcceptThread.start();
        }
        setState(STATE_LISTEN);
    }

    /**
     * Start the ConnectThread to initiate a connection to a remote device.
     * 
     * @param device
     *            The BluetoothDevice to connect
     */
    public synchronized void connect(BluetoothDevice device) {
        if (D)
            Log.d(TAG, "connect to: " + device);

        // Cancel any thread attempting to make a connection
        if (mState == STATE_CONNECTING) {
            if (mConnectThread != null) {
                mConnectThread.cancel();
                mConnectThread = null;
            }
        }

        // Cancel any thread currently running a connection
        if (mConnectedThread != null) {
            mConnectedThread.cancel();
            mConnectedThread = null;
        }

        // Start the thread to connect with the given device
        mConnectThread = new ConnectThread(device);
        mConnectThread.start();
        setState(STATE_CONNECTING);
    }

    /**
     * Start the ConnectedThread to begin managing a Bluetooth connection
     * 
     * @param socket
     *            The BluetoothSocket on which the connection was made
     * @param device
     *            The BluetoothDevice that has been connected
     */
    public synchronized void connected(BluetoothSocket socket,
            BluetoothDevice device) {
        if (D)
            Log.d(TAG, "connected");

        // Cancel the thread that completed the connection
        if (mConnectThread != null) {
            mConnectThread.cancel();
            mConnectThread = null;
        }

        // Cancel any thread currently running a connection
        if (mConnectedThread != null) {
            mConnectedThread.cancel();
            mConnectedThread = null;
        }

        // Cancel the accept thread because we only want to connect to one
        // device
        if (mAcceptThread != null) {
            mAcceptThread.cancel();
            mAcceptThread = null;
        }

        // Start the thread to manage the connection and perform transmissions
        mConnectedThread = new ConnectedThread(socket);
        mConnectedThread.start();

        // Send the name of the connected device back to the UI Activity
        Message msg = mHandler.obtainMessage(amarre.MESSAGE_DEVICE_NAME);
        Bundle bundle = new Bundle();
        bundle.putString(amarre.DEVICE_NAME, device.getName());
        msg.setData(bundle);
        mHandler.sendMessage(msg);

        setState(STATE_CONNECTED);
    }

    /**
     * Stop all threads
     */
    public synchronized void stop() {
        if (D)
            Log.d(TAG, "stop");
        setState(STATE_NONE);
        if (mConnectThread != null) {
            mConnectThread.cancel();
            mConnectThread = null;
        }
        if (mConnectedThread != null) {
            mConnectedThread.cancel();
            mConnectedThread = null;
        }
        if (mAcceptThread != null) {
            mAcceptThread.cancel();
            mAcceptThread = null;
        }
    }

    /**
     * Write to the ConnectedThread in an unsynchronized manner
     * 
     * @param out
     *            The bytes to write
     * @see ConnectedThread#write(byte[])
     */
    public void write(byte[] out) {
        // Create temporary object
        ConnectedThread r;
        // Synchronize a copy of the ConnectedThread
        synchronized (this) {
            if (mState != STATE_CONNECTED)
                return;
            r = mConnectedThread;
        }
        // Perform the write unsynchronized
        r.write(out);
    }

    /**
     * Indicate that the connection attempt failed and notify the UI Activity.
     */
    private void connectionFailed() {
        setState(STATE_LISTEN);

        // Send a failure message back to the Activity
        Message msg = mHandler.obtainMessage(amarre.MESSAGE_TOAST);
        Bundle bundle = new Bundle();
        bundle.putString(
                amarre.TOAST,
                "No se puede conectar al dispostivo, verifique que éste se encuentra encendido y cercano a la tablet");
        msg.setData(bundle);
        mHandler.sendMessage(msg);
    }

    /**
     * Indicate that the connection was lost and notify the UI Activity.
     */
    private void connectionLost() {
        // setState(STATE_LISTEN);

        // Send a failure message back to the Activity
        Message msg = mHandler.obtainMessage(amarre.MESSAGE_TOAST);
        Bundle bundle = new Bundle();
        bundle.putString(amarre.TOAST,
                "La conexión con el dispositivo se ha perdido");
        msg.setData(bundle);
        mHandler.sendMessage(msg);
    }

    /**
     * This thread runs while listening for incoming connections. It behaves
     * like a server-side client. It runs until a connection is accepted (or
     * until cancelled).
     */
    private class AcceptThread extends Thread {
        // The local server socket
        private final BluetoothServerSocket mmServerSocket;

        public AcceptThread() {
            BluetoothServerSocket tmp = null;

            // Create a new listening server socket
            try {
                tmp = mAdapter
                        .listenUsingRfcommWithServiceRecord(NAME, MY_UUID);
            } catch (IOException e) {
                Log.e(TAG, "listen() failed", e);
            }
            mmServerSocket = tmp;
        }

        public void run() {
            if (D)
                Log.d(TAG, "BEGIN mAcceptThread" + this);
            setName("AcceptThread");
            BluetoothSocket socket = null;

            // Listen to the server socket if we're not connected
            while (mState != STATE_CONNECTED) {
                try {
                    // This is a blocking call and will only return on a
                    // successful connection or an exception
                    socket = mmServerSocket.accept();
                } catch (IOException e) {
                    Log.e(TAG, "accept() failed", e);
                    break;
                }

                // If a connection was accepted
                if (socket != null) {
                    synchronized (BluetoothService.this) {
                        switch (mState) {
                        case STATE_LISTEN:
                        case STATE_CONNECTING:
                            // Situation normal. Start the connected thread.
                            connected(socket, socket.getRemoteDevice());
                            break;
                        case STATE_NONE:
                        case STATE_CONNECTED:
                            // Either not ready or already connected. Terminate
                            // new socket.
                            try {
                                socket.close();
                            } catch (IOException e) {
                                Log.e(TAG, "Could not close unwanted socket", e);
                            }
                            break;
                        }
                    }
                }
            }
            if (D)
                Log.i(TAG, "END mAcceptThread");
        }

        public void cancel() {
            if (D)
                Log.d(TAG, "cancel " + this);
            try {
                mmServerSocket.close();
            } catch (IOException e) {
                Log.e(TAG, "close() of server failed", e);
            }
        }
    }

    /**
     * This thread runs while attempting to make an outgoing connection with a
     * device. It runs straight through; the connection either succeeds or
     * fails.
     */
    private class ConnectThread extends Thread {
        private final BluetoothSocket mmSocket;
        private final BluetoothDevice mmDevice;

        public ConnectThread(BluetoothDevice device) {
            mmDevice = device;
            BluetoothSocket tmp = null;

            // Get a BluetoothSocket for a connection with the
            // given BluetoothDevice
            try {
                tmp = device.createRfcommSocketToServiceRecord(MY_UUID);
            } catch (IOException e) {
                Log.e(TAG, "create() failed", e);
            }
            mmSocket = tmp;
        }

        public void run() {
            Log.i(TAG, "BEGIN mConnectThread");
            setName("ConnectThread");

            // Always cancel discovery because it will slow down a connection
            mAdapter.cancelDiscovery();

            // Make a connection to the BluetoothSocket
            try {
                // This is a blocking call and will only return on a
                // successful connection or an exception
                mmSocket.connect();
            } catch (IOException e) {
                connectionFailed();
                // Close the socket
                try {
                    mmSocket.close();
                } catch (IOException e2) {
                    Log.e(TAG,
                            "unable to close() socket during connection failure",
                            e2);
                }
                // Start the service over to restart listening mode
                BluetoothService.this.start();
                return;
            }

            // Reset the ConnectThread because we're done
            synchronized (BluetoothService.this) {
                mConnectThread = null;
            }

            // Start the connected thread
            connected(mmSocket, mmDevice);
        }

        public void cancel() {
            try {
                mmSocket.close();
            } catch (IOException e) {
                Log.e(TAG, "close() of connect socket failed", e);
            }
        }
    }

    /**
     * This thread runs during a connection with a remote device. It handles all
     * incoming and outgoing transmissions.
     */
    private class ConnectedThread extends Thread {
        private final BluetoothSocket mmSocket;
        private final InputStream mmInStream;
        private final OutputStream mmOutStream;

        public ConnectedThread(BluetoothSocket socket) {
            Log.d(TAG, "create ConnectedThread");
            mmSocket = socket;
            InputStream tmpIn = null;
            OutputStream tmpOut = null;

            // Get the BluetoothSocket input and output streams
            try {
                tmpIn = socket.getInputStream();
                tmpOut = socket.getOutputStream();
            } catch (IOException e) {
                Log.e(TAG, "temp sockets not created", e);
            }

            mmInStream = tmpIn;
            mmOutStream = tmpOut;
        }

        public void run() {
            Log.i(TAG, "BEGIN mConnectedThread");
            int bytes;

            // Keep listening to the InputStream while connected
            while (true) {
                try {
                    byte[] buffer = new byte[256];
                    // Read from the InputStream
                    bytes = mmInStream.read(buffer);
                    if (bytes > 0) {
                        // Send the obtained bytes to the UI Activity
                        mHandler.obtainMessage(amarre.MESSAGE_READ, bytes, -1,
                                buffer).sendToTarget();
                    } else {
                        Log.e(TAG, "disconnected");
                        connectionLost();

                        // add by chongqing jinou
                        if (mState != STATE_NONE) {
                            Log.e(TAG, "disconnected");
                            // Start the service over to restart listening mode
                            BluetoothService.this.start();
                        }
                        break;
                    }
                } catch (IOException e) {
                    Log.e(TAG, "disconnected", e);
                    connectionLost();

                    // add by chongqing jinou
                    if (mState != STATE_NONE) {
                        // Start the service over to restart listening mode
                        BluetoothService.this.start();
                    }
                    break;
                }
            }
        }

        /**
         * Write to the connected OutStream.
         * 
         * @param buffer
         *            The bytes to write
         */
        public void write(byte[] buffer) {
            try {
                mmOutStream.write(buffer);
                // Share the sent message back to the UI Activity
                mHandler.obtainMessage(amarre.MESSAGE_WRITE, -1, -1, buffer)
                        .sendToTarget();
            } catch (IOException e) {
                Log.e(TAG, "Exception during write", e);
            }
        }

        public void cancel() {
            try {
                mmSocket.close();
            } catch (IOException e) {
                Log.e(TAG, "close() of connect socket failed", e);
            }
        }
    }
} 
```

我从另一个类发送数据，所以：

```
 byte[] send;
        try {
            send = message.getBytes("GB2312");
        } catch (UnsupportedEncodingException e) {
            send = message.getBytes();

        }

        mService.write(send); 
```

message 是一个 String var.. 那么，我该如何格式化文本？？，或者至少，改变字体大小......

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-12T22:15:01.817

现在我知道该怎么做了。我必须应用逆向工程并从市场上反编译一个 .apk，在 Linux 上使用 dex2jar，然后用 java 反编译器打开 jar……试试这个……当你写这个命令时：

`out.write(str.getBytes(),0,str.getBytes().length);`

您正在向该方法发送一个 byte[] 数组。您可以通过在发送真正的 byte[] 数组之前发送另一个 byte[] 数组来修改格式...

默认格式 byte[] 数组是这样的：

`byte[] arrayOfByte1 = { 27, 33, 0 };`

所以你可以试试这个：

```
byte[] format = { 27, 33, 0 };

out.write(format);

out.write(str.getBytes(),0,str.getBytes().length); 
```

这些行将打印默认格式文本，但如果您尝试以下代码，

```
byte[] format = { 27, 33, 0 };

format[2] = ((byte)(0x8 | arrayOfByte1[2]));

out.write(format);

out.write(str.getBytes(),0,str.getBytes().length); 
```

它将以粗体样式打印文本...您可以尝试以下其他格式数组：

```
// Bold
format[2] = ((byte)(0x8 | arrayOfByte1[2]));

// Height
format[2] = ((byte)(0x10 | arrayOfByte1[2]));

// Width
format[2] = ((byte) (0x20 | arrayOfByte1[2]));

// Underline
format[2] = ((byte)(0x80 | arrayOfByte1[2]));

// Small
format[2] = ((byte)(0x1 | arrayOfByte1[2])); 
```

您也可以组合它，然后如果您喜欢小而粗体的文本，请取消注释这些数组分配，例如：

```
byte[] format = { 27, 33, 0 };

// Bold
format[2] = ((byte)(0x8 | arrayOfByte1[2]));
// Height
format[2] = ((byte)(0x10 | arrayOfByte1[2]));
// Width
format[2] = ((byte) (0x20 | arrayOfByte1[2]));
// Underline
// format[2] = ((byte)(0x80 | arrayOfByte1[2]));
// Small
// format[2] = ((byte)(0x1 | arrayOfByte1[2]));
out.write(format);
out.write(str.getBytes(),0,str.getBytes().length); 
```

最后一个代码打印出最大的文本大小。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-11-19T23:48:39.900

我知道这是一个旧线程，但它对我帮助很大，所以我决定分享我的代码以简化格式化的使用。

示例用法：

```
final String message = "Example message\n";
// Default format:
writeWithFormat(message.getBytes(), new Formatter().get(), Formatter.leftAlign());
// Bold format center:
writeWithFormat(message.getBytes(), new Formatter().bold().get(), Formatter.centerAlign());
// Bold underlined format with right alignment:
writeWithFormat(message.getBytes(), new Formatter().bold().underlined().get(), Formatter.rightAlign()); 
```

带有 Builder 模式的格式化程序类：

```
/**
 * Class for formatting
 */
public static class Formatter {
    /** The format that is being build on */
    private byte[] mFormat;

    public Formatter() {
        // Default:
        mFormat = new byte[]{27, 33, 0};
    }

    /**
     * Method to get the Build result
     *
     * @return the format
     */
    public byte[] get() {
        return mFormat;
    }

    public Formatter bold() {
        // Apply bold:
        mFormat[2] = ((byte) (0x8 | mFormat[2]));
        return this;
    }

    public Formatter small() {
        mFormat[2] = ((byte) (0x1 | mFormat[2]));
        return this;
    }

    public Formatter height() {
        mFormat[2] = ((byte) (0x10 | mFormat[2]));
        return this;
    }

    public Formatter width() {
        mFormat[2] = ((byte) (0x20 | mFormat[2]));
        return this;
    }

    public Formatter underlined() {
        mFormat[2] = ((byte) (0x80 | mFormat[2]));
        return this;
    }

    public static byte[] rightAlign(){
        return new byte[]{0x1B, 'a', 0x02};
    }

    public static byte[] leftAlign(){
        return new byte[]{0x1B, 'a', 0x00};
    }

    public static byte[] centerAlign(){
        return new byte[]{0x1B, 'a', 0x01};
    }
} 
```

使用格式的 write 方法如下所示：

```
 /**
     * Method to write with a given format
     *
     * @param buffer     the array of bytes to actually write
     * @param pFormat    The format byte array
     * @param pAlignment The alignment byte array
     * @return true on successful write, false otherwise
     */
    public boolean writeWithFormat(byte[] buffer, final byte[] pFormat, final byte[] pAlignment) {
        try {
            // Notify printer it should be printed with given alignment:
            mOutputStream.write(pAlignment);
            // Notify printer it should be printed in the given format:
            mOutputStream.write(pFormat);
            // Write the actual data:
            mOutputStream.write(buffer, 0, buffer.length);

            // Share the sent message back to the UI Activity
            App.getInstance().getHandler().obtainMessage(MESSAGE_WRITE, buffer.length, -1, buffer).sendToTarget();
            return true;
        } catch (IOException e) {
            Log.e(TAG, "Exception during write", e);
            return false;
        }
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T12:57:19.153

对此有两种认识：

> 你只是想通过传递文本来打印。您将选项留给打印机以选择任何它想要的打印方式。
> 
> 检查您的打印机是否支持基本打印配置文件[BPP] - 基于作业的传输。我成功地在蓝牙打印机上以 html 格式打印了图像和文本。

此外，检查您提供的 UUID。它们是对象推送配置文件、基于 BPP 作业的传输配置文件的不同 UUID。我建议您使用为 BPP[Job based transfer] 分配的 UUID 并尝试传递带有格式化文本的 xhtml 文件。

谢谢玛尼

# powershell - Powershell 拉取 LDS/ADAM 属性值

> ID：14285823
> 
> 赞同：0
> 
> 时间：2013-01-11T20:04:14.217
> 
> 标签：powershell, adam, lds

我正在从 ADAM 环境中提取用户属性，特别是我需要“manageddepartmentnumber”和“manageddepartment”。不过几个小时后，我仍然不知道提取这些信息的最佳方法是什么？

目前正在尝试

```
Connect-QADService -service 'directory.blah.com'
Get-QADUser -Name 'sam*' 
```

这当然......不起作用。任何帮助是极大的赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:48:08.203

建议使用 [ADSI]，例如：

```
FUNCTION getDN {
[CmdletBinding()]
Param(
    [Parameter(
    Mandatory=$True,
    Position=0,
    ValueFromPipeline=$True
    )]
    [String[]]$name
)
$root = [ADSI]''
$searcher = New-Object System.DirectoryServices.DirectorySearcher($root)
$searcher.Filter = "CN=$name"
$adfind = $searcher.FindAll()
RETURN $adfind[0].Path
}

$username = "john.doe"
([ADSI]$(getDN $username)).manageddepartment 
```

# getresponse - 获取响应表

> ID：14285825
> 
> 赞同：2
> 
> 时间：2013-01-11T20:04:21.053
> 
> 标签：getresponse

我从 themeforest 购买了 HTML 登陆页面主题。主题已选择电子邮件形式。现在我想将它与 getresponse 集成 - 所以它可以像常规的 getresponse 网络表单一样工作。我该怎么做？

HTML 主题代码为：

```
<form method="post" action="[[ PUT_THE_URL_YOUR_FORM_POSTS_TO_HERE ]]">
    <input type="email" placeholder="Enter your e-mail" name="email" id="email">
    <input type="submit" name="submit" id="submit" value="Sign Up"/>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-01T21:14:43.413

在您的 GetResponse 帐户中，您应该转到 webforms 菜单，选择“Create a new webform”并前往“Plain html”选项卡。在那里你会看到一些像下面这样的代码——它有你需要的一切：

```
<form action="https://app.getresponse.com/add_subscriber.html" accept-charset="utf-8" method="post">
    <!-- Email field (required) -->
    email: <input type="text" name="email"/><br/>
    <!-- Campaign token -->
    <!-- Get the token at: https://app.getresponse.com/campaign_list.html -->
    <input type="hidden" name="campaign_token" value="CAMPAIGN_ID" />
    <!-- Subscriber button -->
    <input type="submit" value="Subscribe"/>
</form> 
```

不要忘记，除此之外， `action="https://app.getresponse.com/add_subscriber.html"`您还需要`<input type="hidden" name="campaign_token" value="CAMPAIGN_ID" />`在表单代码中指定活动的 ID。

# python - npm 安装 bcrypt

> ID：14285834
> 
> 赞同：0
> 
> 时间：2013-01-11T20:05:16.820
> 
> 标签：python, windows, node.js, heroku, npm

在本地，当我这样做时：

```
npm install bcrypt 
```

我得到：

> ImportError 没有名为站点的模块

但是当我部署到heroku时，它安装得很好。我的问题可能是什么？我尝试了一些配置，我有 python 2.7 和节点 0.8.17

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T20:19:04.440

要安装`bcrypt`，您将满足所有[依赖](https://github.com/ncb000gt/node.bcrypt.js/#dependencies)项。

您还需要一个稳定版本的节点：

> node-gyp 仅适用于稳定/发布版本的节点。由于 bcrypt 模块使用 node-gyp 来构建和安装，因此您需要一个稳定版本的 node 才能使用 bcrypt。

对于 windows 用户，还有一个额外的要求：

> Windows 用户应确保至少安装了节点 0.8.5 并且此模块的版本 >= 0.7.1。

您的错误看起来像 Python 错误。安装 Python 2.x 应该会有所帮助。`site`在 Python 标准库中，因此它应该始终存在。

If you already have Python installed, make sure its version is 2.x.

# c# - MVC 无法使用 ajax.beginform 从部分视图提交和保存数据

> ID：14285837
> 
> 赞同：1
> 
> 时间：2013-01-11T20:05:35.347
> 
> 标签：c#, asp.net-mvc

我是 MVC 的新手，但我一直在对另一个组创建的现有代码进行一些更改。

有一个包含多个部分视图的用户数据视图，我想更新“个人资料”部分（姓名、电话等）。问题是点击“保存”按钮什么也没做。在控制器上设置断点甚至不会显示站点到达该代码。

这些是当前代码的主要部分。

“用户详细信息”视图：

```
@model UserDetailsModel

@{
    Layout = "~/Views/Shared/_ApplicationLayout.cshtml";
}

...

<h2>User Details</h2>
...
<hr />

<div class="row">
    <div class="span2">
    <ul class="nav nav-pills nav-stacked" id="js-side-nav" data-spy="affix">
        <li class="active"><a href="#profile">Profile</a></li>
        <li><a href="#userdevices">Functions</a></li>
...
    </ul>
</div>
<div class="span10">
    <ul class="unstyled">
        <li id="profile">
            <h3>Profile</h3>
            @Html.Partial("_UserProfile", Model.ProfileModel)
            <hr />
        </li>
        <li id="functions">
            <h3>Functions</h3>
            @Html.Partial("_UserFunctions", Model.FunctionsModel)
            <hr />
        </li>
... 
```

“用户资料”部分视图：

// (我添加了 HttpMethod = "Post")

```
@model UserProfileModel

<section id="user-profile-section">
    @using (Ajax.BeginForm("UserProfile", "UserDetail", new AjaxOptions { HttpMethod = "Post", UpdateTargetId = "user-profile-section", InsertionMode = InsertionMode.Replace}))
{
    @Html.EditorForModel("CustomForm")
    <input class="btn btn-primary" type="submit" value="Save Profile"/>
}
</section> 
```

“用户详细信息”控制器：

//（我添加了[System.Web.Http.HttpPost]）

```
[System.Web.Http.HttpPost]
public ActionResult UserProfile(Guid userId, [FromBody] UserProfileModel model)
{
if(!Request.IsAjaxRequest())
    throw new Exception("Expecting ajax request");

if(!ModelState.IsValid)
        return PartialView("_UserProfile", model);

var service = new UserService();
    WebUser user = service.GetUserProfile(userId, SessionState.ApplicationId);
    Mapper.DynamicMap(model, user.Profile, model.GetType(), user.Profile.GetType());
    service.UpdateUser(user);

return PartialView("_UserProfile", model);
} 
```

“用户档案”模型：

```
using System.ComponentModel.DataAnnotations;

namespace UserDetail
{
public class UserProfileModel
{
    [Required]
    [Display(Name = "First Name")]
    public string ContactFirstName { get; set; }

    [Required]
    [Display(Name = "Last Name")]
    public string ContactLastName { get; set; }

    [Display(Name = "Business Phone")]
    public string ContactBusinessPhone { get; set; }

... 
```

ClientValidationEnabled 和 UnobtrusiveJavaScriptEnabled 在 web.config 上设置为 TRUE。

我首先想让代码到达控制器中的 UserProfile 部分，这样我才能确保 service.UpdateUser() 方法有效。我已经检查、搜索并尝试了几个选项，但我没有找到我所缺少的。最后，显然，我希望能够更新数据。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T20:12:54.643

我敢打赌你有一些字段验证失败，但它没有相应的验证消息或被隐藏，因此你没有看到错误。也许要对此进行测试，只需删除除提交按钮之外的表单的全部内容，然后查看它是否成功提交。

作为故障排除步骤尝试的另一件事是更改（将其复制到评论以在测试后恢复）这个

`@using (Ajax.BeginForm("UserProfile", "UserDetail", new AjaxOptions { HttpMethod = "Post", UpdateTargetId = "user-profile-section", InsertionMode = InsertionMode.Replace}))`

...到一个简单的 Html.BeginForm，只是为了确定/排除这里的 AJAX 有问题的可能性，也许无法找到 UpdateTargetId。

另外，在 Chrome 上打开 F12，切换到控制台选项卡，刷新页面并提交，看看是否出现任何 javascript 错误。

最后，尝试暂时删除 [FromBody] 属性作为测试。一些属性会影响路由，我不确定这个是否会，因为我从未使用过它。

# asp.net - 阅读器不会在页面加载时阅读，但在定期调用其方法时会阅读

> ID：14285839
> 
> 赞同：0
> 
> 时间：2013-01-11T20:05:50.627
> 
> 标签：asp.net, vb.net, button, pageload

在我的页面上，我有这个按钮，它调用了这个方法，它可以工作。但是，当我设置相同的方法时，在页面加载期间调用它可以工作，但不完全。该方法有几个读者，他们从数据库中读取并显示信息，定期运行该方法没有问题，但在页面加载时读者从不阅读。

这是我的选择语句之一，为读者提供动力：

```
sql.CommandText = "select temp from forecast where zone='" + myzone + "' and date=TO_DATE('" + mydate + "','dd/mm/yyyy') order by zone,date,time"
        sql.CommandType = CommandType.Text
        reader = sql.ExecuteReader()
        Dim x As Integer
        While (reader.Read())
            data(0, x) = reader.Item("temp").ToString()
            x += 1
        End While 
```

同样，当页面加载后作为按钮单击时，它会读取，在页面加载期间运行时，它不会读取。它不能是 select 语句，因为单击按钮时相同的语句起作用。此外，这两个变量都在工作，并且在页面加载期间执行语句时具有它们应有的值，因此也不能这样。还尝试了 Load 和 Init ，但没有一个可以工作。

我的按钮点击：

```
Protected Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click
    Me.myMethod()
End Sub 
```

和页面加载：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Me.myMethod()
End Sub 
```

关于我可能做错了什么的任何想法？谢谢！

# ruby - 水豚返回胡言乱语

> ID：14285840
> 
> 赞同：0
> 
> 时间：2013-01-11T20:05:55.687
> 
> 标签：ruby, selenium, capybara

我正在尝试使用 Capybara 在包含特定名称的表中选择一行。不幸的是，Capybara 似乎只在桌子上看到了胡言乱语。这是我从以下代码中得到的：

```
page.all('table tr').map { |e| e.text }
=> ["", "y y y w y", "y y w y", "y y y w y", "y y w y", "y y w y w y"] 
```

*更新：*这是它试图处理的表：

```
<table class="views-table cols-5">
  <thead>
    <tr>
      <th class="views-field views-field-phpcode">Status</th>
      <th class="views-field views-field-name">Name</th>
      <th class="views-field views-field-field-id">ID</th>
      <th class="views-field views-field-phpcode-1">Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr class="odd views-row-first">
      <td class="views-field views-field-phpcode">
        <img title="Complete" src="..."><br>Complete
      </td>
      <td class="views-field views-field-name">Harvey</td>
      <td class="views-field views-field-field-id">1</td>
      <td class="views-field views-field-phpcode-1">
        <a class="existing_submit disabled" href="...">Edit</a>
        <a class="existing_submit confirm-submit disabled" rel="Are you sure you want to reset?" href="...">Reset</a>
        <div style="clear: left;"></div>
        <a class="existing_submit disabled" href="...">Import</a>
        <a class="existing_submit disabled" target="_blank" href="...">View</a>
        <a class="existing_submit" target="_blank" href="...">Replay</a>
        <a class="existing_submit confirm-submit disabled" rel="Are you sure you want to submit the results?" href="...">Submit</a>
        <a class="existing_submit" target="_blank" href="...">Print</a>
      </td>
    </tr>
    <tr class="even">
      <td class="views-field views-field-phpcode">
        <img title="Complete" src="..."><br>Complete
      </td>
      <td class="views-field views-field-name">Lucas</td>
      <td class="views-field views-field-field-id">2</td>
      <td class="views-field views-field-phpcode-1">
        <a class="existing_submit disabled" href="...">Edit School</a>
        <a class="existing_submit confirm-submit disabled" rel="Are you sure you want to reset?" href="...">Reset</a>
        <div style="clear: left;"></div>
        <a class="existing_submit disabled" href="...">Import</a>
        <a class="existing_submit disabled" target="_blank" href="...">View</a>
        <a class="existing_submit" target="_blank" href="...">Replay</a>
        <a class="existing_submit confirm-submit disabled" rel="Are you sure you want to submit the results?" href="...">Submit</a>
        <a class="existing_submit" target="_blank" href="...">Print</a>
      </td>
    </tr>
    <tr class="odd">
      <td class="views-field views-field-phpcode">
        <img title="Complete" src="..."><br>Complete               
      </td>
      <td class="views-field views-field-name">Sarah</td>
      <td class="views-field views-field-field-id">3</td>
      <td class="views-field views-field-phpcode-1">
        <a class="existing_submit disabled" href="...">Edit</a>
        <a class="existing_submit confirm-submit disabled" rel="Are you sure you want to reset?" href="...">Reset</a>
        <div style="clear: left;"></div>
        <a class="existing_submit disabled" href="...">Import</a>
        <a class="existing_submit disabled" target="_blank" href="...">View</a>
        <a class="existing_submit" target="_blank" href="...">Replay</a>
        <a class="existing_submit confirm-submit disabled" rel="Are you sure you want to submit the results?" href="...">Submit</a>
        <a class="existing_submit" target="_blank" href="...">Print</a>
      </td>
    </tr>
    <tr class="even">
      <td class="views-field views-field-phpcode">
        <img title="Complete" src="..."><br>Complete           
      </td>
      <td class="views-field views-field-name">Wanda</td>
      <td class="views-field views-field-field-id">4</td>
      <td class="views-field views-field-phpcode-1">
        <a class="existing_submit disabled" href="...">Edit</a>
        <a class="existing_submit confirm-submit disabled" rel="Are you sure you want to reset?" href="...">Reset</a>
        <div style="clear: left;"></div>
        <a class="existing_submit disabled" href="...">Import</a>
        <a class="existing_submit disabled" target="_blank" href="...">View</a>
        <a class="existing_submit" target="_blank" href="...">Replay</a>
        <a class="existing_submit confirm-submit disabled" rel="Are you sure you want to submit the results?" href="...">Submit</a>
        <a class="existing_submit" target="_blank" href="...">Print</a>
      </td>
    </tr>
    <tr class="odd views-row-last">
      <td class="views-field views-field-phpcode">
        <img title="Ready" src="..."><br>Ready          
      </td>
      <td class="views-field views-field-name">Herman</td>
      <td class="views-field views-field-field-id">5</td>
      <td class="views-field views-field-phpcode-1">
        <a class="existing_submit disabled" href="...">Edit</a>
        <a class="existing_submit confirm-submit" rel="Are you sure you want to reset?" href="...">Reset</a>
        <div style="clear: left;"></div>
        <a class="existing_submit" href="...">Import</a>
        <a class="existing_submit" target="_blank" href="...">View</a>
        <a class="existing_submit" target="_blank" href="...">Run</a>
        <a class="existing_submit confirm-submit disabled" rel="Are you sure you want to submit the results?" href="...">Submit</a>
        <a class="existing_submit disabled" target="_blank" href="...">Print</a>
      </td>
    </tr>
  </tbody>
</table> 
```

Capybara 正在使用 Selenium，因此我可以看到它加载的页面，并且该表格与 Capybara 所看到的完全不同。

有没有人见过这样的事情？任何想法为什么会发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T15:14:08.047

Capybara和Nokogiri之间似乎存在脱节。使用该`native`属性可提供正确的值：

`page.all('table tr').map { |e| e.native.text }`

不幸的是，过滤器也会受到影响，因此以下方法不起作用：

`page.should have_selector("table", :text => "Harvey")`

# java - 如何解释可运行但没有堆栈跟踪的 Java 线程？

> ID：14285842
> 
> 赞同：7
> 
> 时间：2013-01-11T20:06:08.207
> 
> 标签：java, debugging

我正在调试一个遗留 Java 应用程序，并且线程转储（通过 获得`jstack`）包含一些条目，如下所示：

```
"Thread-8" prio=10 tid=0x0000000055f2c800 nid=0x49bf runnable [0x0000000000000000]
    java.lang.Thread.State: RUNNABLE 
```

就是这样。没有堆栈跟踪。

这里发生了什么？如何定位在该线程中执行的 Java 代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T20:30:05.807

该线程没有（或没有）执行 Java 代码。它正在处理任何 Java 调用者都没有直接请求的未在 Java 中实现的任务。例如，如果相应的 OS 线程刚刚捕获到一个信号。

# ant - 删除文件集文件名，但在不同的目录中

> ID：14285847
> 
> 赞同：2
> 
> 时间：2013-01-11T20:06:55.100
> 
> 标签：ant, directory, fileset

所以我有一个文件集，其中包含一个目录中的文件：

```
<fileset id="modules" dir="${modules.dir}">
    <include name="core*.jar"/>
    <include name="fileset*.jar"/>
    <include name="upgrader*.jar"/>
    <include name="hello*.jar"/>
</fileset> 
```

但是，这些文件被复制到${lib.dir} 中，即${lib.dir} 包含core*.jar、fileset*.jar 等的副本。如何删除这些复制的文件？

* * *

另外，请注意我不能使用像 ant-contrib 这样的外部库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T20:11:53.480

使用 PatternSet 定义名称集。然后在任意数量的 FileSet 中引用该 PatternSet。

```
<patternset id="module.patterns">
    <include name="core*.jar"/>
    <include name="fileset*.jar"/>
    <include name="upgrader*.jar"/>
    <include name="hello*.jar"/>
</patternset>

<fileset id="modules" dir="${modules.dir}" >
  <patternset refid="module.patterns"/>
</fileset> 
```

**更新：**

鉴于您只需要原始文件的评论，请尝试以下操作：

```
<pathconvert pathsep="," property="flattened.modules" refid="modules">
    <mapper type="flatten" />
</pathconvert>

<filelist id="libmodules" dir="${lib.dir}" files="${flattened.modules}"/> 
```

# opengl - imageStore() 的问题（OpenGL 4.3）

> ID：14285849
> 
> 赞同：4
> 
> 时间：2013-01-11T20:07:23.607
> 
> 标签：opengl, textures, shader, compute-shader

我正在尝试将一些数据从计算着色器输出到纹理，但 imageStore() 似乎什么也没做。这是着色器：

```
#version 430

layout(RGBA32F) uniform image2D image;

layout (local_size_x = 1, local_size_y = 1) in;
void main() {
    imageStore(image, ivec2(gl_GlobalInvocationID.xy), vec4(0.0f, 1.0f, 1.0f, 1.0f));
} 
```

应用程序代码在这里：

```
GLuint tex;

glGenTextures(1, &tex);
glBindTexture(GL_TEXTURE_2D, tex);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, WIDTH, HEIGHT, 0, GL_RGBA, GL_FLOAT, 0);

glBindImageTexture(0, tex, 0, GL_FALSE, 0, GL_WRITE_ONLY, GL_RGBA32F);
glUseProgram(program->GetName());
glUniform1i(program->GetUniformLocation("image"), 0);

glDispatchCompute(WIDTH, HEIGHT, 1); 
```

然后使用该纹理渲染全屏四边形，但目前它仅显示来自视频内存的一些随机旧数据。知道有什么问题吗？

编辑：

这就是我显示纹理的方式：

```
// This comes right after the previous block of code
glUseProgram(drawProgram->GetName());

glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, tex);
glUniform1i(drawProgram->GetUniformLocation("sampler"), 0);

glBindVertexArray(vao);
glDrawArrays(GL_TRIANGLES, 0, 6);

glfwSwapBuffers(); 
```

drawProgram 包括：

```
#version 430
#extension GL_ARB_explicit_attrib_location : require

layout(location = 0) in vec2 position;
out vec2 uvCoord;

void main() {
    gl_Position = vec4(position.x, position.y, 0.0f, 1.0f);
    uvCoord = position;
} 
```

和：

```
#version 430

in vec2 uvCoord;
out vec4 color;

uniform sampler2D sampler;

void main() {
    vec2 uv = (uvCoord + vec2(1.0f)) / 2.0f;
    uv.y = 1.0f - uv.y;

    color = texture(sampler, uv);
    //color = vec4(uv.x, uv.y, 0.0f, 1.0f);
} 
```

片段着色器中最后注释的行产生此输出：[渲染输出](http://i.stack.imgur.com/u9ZPh.jpg)

顶点数组对象 (vao) 有一个带有 6 个 2D 顶点的缓冲区：

-1.0，-1.0

1.0，-1.0

1.0, 1.0

1.0, 1.0

-1.0, 1.0

-1.0，-1.0

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T17:16:12.410

> 这就是我显示纹理的方式：

这还不够好。我没有看到对 的[调用`glMemoryBarrier`](http://www.opengl.org/wiki/GLAPI/glMemoryBarrier)，因此无法保证您的代码确实有效。

[请记住：通过图像加载/存储](http://www.opengl.org/wiki/Image_Load_Store)写入图像不是内存连贯的。它们[在变得可见之前需要明确的用户同步](http://www.opengl.org/wiki/Memory_Model#Incoherent_memory_access)。如果您想稍后将存储到的图像用作纹理，则*必须*`glMemoryBarrier`在写入它的渲染命令之后，但在从它作为纹理采样的渲染命令之前进行显式调用。

> 为什么这是个问题，我不知道

因为桌面 OpenGL*不是*OpenGL ES。

最后三个参数*仅*描述您提供给 OpenGL[的像素数据的排列。](http://www.opengl.org/wiki/Pixel_Transfer)它们*没有*改变OpenGL 存储数据的方式。在 ES 中，它们会这样做，但这只是因为 ES 不进行格式转换。

在桌面 OpenGL 中，将浮点数据上传到归一化整数纹理是完全合法的；OpenGL 应该尽可能地转换数据。ES 不做转换，所以它必须改变*内部格式*（第三个参数）来匹配数据。

桌面 GL 没有。如果你想要一个特定的[图像格式](http://www.opengl.org/wiki/Image_Format)，你要求它。Desktop GL 为您提供您所要求的，并且只提供您所要求的。

始终使用大小合适的内部格式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-12T15:27:17.807

GL_RGBA 不是一种确定大小的内部格式，因此您无法知道它到底是什么。大多数情况下，它由 OpenGL 转换为 GL_RGBA8。

在您的情况下，您设置的 GL_FLOAT 参数仅描述您**可以**在纹理中上传的像素数据。

[阅读此处](https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glTexImage2D.xhtml)的表 2以了解可以设置为内部纹理格式的内容。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-12T12:28:11.663

好的，我找到了解决方案。问题出在这里：

```
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, WIDTH, HEIGHT, 0, GL_RGBA, GL_FLOAT, 0); 
```

此行未指定内部格式 (GL_RGBA) 的大小。当我提供 GL_RGBA32F 它开始工作。为什么这是一个问题，我不知道（希望有人能够解释）。

# xml - 将硬编码字符串转换为 XML/资源文件的最有效方法是什么？

> ID：14285851
> 
> 赞同：1
> 
> 时间：2013-01-11T20:07:49.997
> 
> 标签：xml, string, resources, hardcoded

我有一个非常大的程序（数千行代码），其中无数的字符串被硬编码到 UI 中。我知道这被认为是不好的做法，我需要通过将所有内容放入资源文件来纠正这个巨大的错误。除了自己创建数百个资源文件并浏览代码并手动编辑每一行以引用资源文件中的字符串之外，最有效的方法是什么？我可以以编程方式从代码中提取所有内容并生成一堆资源文件，还是我正在查看数周的额外工作？

# arrays - Mongoid空间虚属性不持久

> ID：14285852
> 
> 赞同：0
> 
> 时间：2013-01-11T20:07:53.320
> 
> 标签：arrays, ruby-on-rails-3.2, mongoid, getter-setter, virtual-attribute

我正在使用[Mongoid Spacial](https://github.com/ryanong/mongoid_spacial)在 Place 模型上存储坐标。我在客户端进行地理编码，并发送两个文本字段：纬度和经度。字段名称正确，这似乎是服务器端问题，因为坐标也无法在 Rails 控制台中保持不变。

**模型**

```
class Place
  include Mongoid::Document
  include Mongoid::Paranoia
  include Mongoid::Timestamps
  include Mongoid::Spacial::Document

  attr_accessible :coordinates, :latitude, :longitude

  field :coordinates, type: Array, spacial: true

  spacial_index :coordinates

  def latitude
    coordinates[:lat]
  end

  def latitude=(latitude)
    self.coordinates[:lat] = latitude
  end

  def longitude
    coordinates[:lng]
  end

  def longitude=(longitude)
    self.coordinates[:lng] = longitude
  end
end 
```

我知道坐标字段是一个数组，并且它作为一个对象返回。

我可以使用以下命令成功设置坐标：

`self.coordinates = [-98.765432,12.345678]`

但不是这些命令：

`self.coordinates[:lng] = -98.765432`

`self.coordinates[0] = -98.765432`

我怎样才能编写 setter 来完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T22:18:04.703

这是一个可行的解决方案，但肯定有更好的方法来做到这一点。

```
 def latitude
    coordinates[:lat]
  end

  def latitude=(lat)
    self.coordinates = [self.longitude,lat]
  end

  def longitude
    coordinates[:lng]
  end

  def longitude=(lng)
    self.coordinates = [lng,self.latitude]
  end 
```

# database - “DROP SCHEMA public”后无法创建新表

> ID：14285854
> 
> 赞同：38
> 
> 时间：2013-01-11T20:08:02.403
> 
> 标签：database, postgresql, database-schema, create-table, sql-drop

因为我想删除一些表格并且有人提出了以下建议，所以我做到了：

```
postgres=# drop schema public cascade;
DROP SCHEMA
postgres=# create schema public;
CREATE SCHEMA 
```

然后我在创建新数据库时遇到问题，例如：

```
postgres=# create database test;
CREATE DATABASE
postgres=# \c test
You are now connected to database "test" as user "postgres".
test=# create table hi(id int primary key);
*ERROR:  no schema has been selected to create in* 
```

你可以看到我有错误

> 错误：没有选择要创建的架构*

如何恢复公共架构？
我建议人们永远不要做“drop schema public cascade”；如果我们不知道如何恢复。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-11T20:46:49.380

[`search_path`](http://www.postgresql.org/docs/current/interactive/ddl-schemas.html#DDL-SCHEMAS-PATH)当您找不到任何架构时，会弹出错误消息。
要么是配置错误。你得到什么？

```
SHOW search_path; 
```

[**或者您从标准系统数据库**](http://www.postgresql.org/docs/current/interactive/sql-createdatabase.html)中删除了`public`模式。运行时可能连接到*错误的数据库*[**`template1`**](http://www.postgresql.org/docs/current/interactive/sql-createdatabase.html)*`drop schema public cascade;`*

 *顾名思义，这是创建新数据库的模板。因此，每个新数据库`public`现在开始时都没有（默认）架构 - 而您的默认值`search_path`可能包含“公共”。

只需运行（以超级用户身份`public`或查看[mgojohn 的答案](https://stackoverflow.com/a/26261096/939860)）：

```
CREATE SCHEMA public; 
```

在数据库`template1`（或您需要的任何其他数据库）中。

`DROP SCHEMA ... CASCADE`快速销毁其中所有对象的建议是有效的。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-10-08T15:46:00.690

如果您有一个应用程序用户（如“postgres”）并以其他用户身份运行 DROP/CREATE 命令，那么该建议可能会引起一些麻烦。例如，如果您以 'johndoe@localhost' 身份登录并简单地点击 psql mydatabase，就会发生这种情况。如果你这样做，新模式的所有者将是 johndoe，而不是“postgres”，当你的应用程序创建它需要的表时，它不会看到新模式。

要将所有权归还给应用程序的用户（假设用户是“postgres”），您可以简单地运行（形成与本地用户相同的 psql 提示符）：

```
ALTER SCHEMA public OWNER to postgres; 
```

你会准备好的。*

# ssl - 在 Heroku 上使用自定义域设置 SSL 端点

> ID：14285856
> 
> 赞同：0
> 
> 时间：2013-01-11T20:08:07.833
> 
> 标签：ssl, heroku, dns

我正在尝试使用我的 Heroku 应用程序设置 SSL，但我遇到了一些困难。

我通过 dnsimple 购买了通配符 SSL，并按照 Heroku 给出的说明进行操作。

我还将别名和 cname 设置为指向 Heroku 生成的 SSL 端点。所有这一切的结果是我可以导航到[https://www.appname.com](https://www.appname.com)、 www.appame.com （但它没有加密）和 appname.com （也没有加密）。此外，[https:](https://appname.com) //appname.com 将我带到 Heroku 的“没有这样的应用程序”消息。

```
# heroku certs 显示消息：
端点公用名过期 受信任
------------------------ ---------------------------------------- - -------- --------
randomname.herokussl.com *.appname.com, appname.com 2014-01-10 23:59 UTC True

# heroku ssl 显示消息：
www.appname.com 没有证书

```

关于我做错了什么的任何想法？我是在 Heroku 方面还是在 DNS 方面搞砸了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T06:33:33.733

能给个真实的网址吗？我不确定您如何成功导航到 https:// 任何内容并且不对其进行加密。此外，对于 appname.com 示例，您可能希望确保将 ALIAS 类型与 DNSimple 一起使用。

# javascript - 预加载输入类型图像

> ID：14285858
> 
> 赞同：-1
> 
> 时间：2013-01-11T20:08:23.010
> 
> 标签：javascript, jquery

当图像在 html 布局中的输入类型“内”定义时，如何预加载图像，如下所示：

```
<input type="image" src="bla.png" id="myimage1" data-url="Myurl" /> 
```

我看到很多带有 img-tag 的样本，但没有看到图像类型的输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T20:12:43.153

```
$(function() {
    var img = new Image ();
    img.src =  $('#myimage').data('url');
}); 
```

# matlab - MATLAB GUI 计算器错误

> ID：14285859
> 
> 赞同：0
> 
> 时间：2013-01-11T20:08:27.073
> 
> 标签：matlab, user-interface, matlab-guide

我正在开发一个计算器，它使用 MATLAB 的 GUIDE 从儒略时间到标准 IRIG 时间来回转换。启动时，计算器在一个方向上运行良好，或者从另一个方向开始，但是在同一个会话中来回移动时，某些东西会被删除。我只使用了两个按钮，这就是这两个按钮的回调代码的样子：

```
% --- Executes on button press in convertjulian.
function convertjulian_Callback(hObject, eventdata, handles)
% hObject    handle to convertjulian (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)
value = handles.isec;

day = floor(value/86400);
remainder = (value/86400 - day)*86400;

hour = floor(remainder/3600);
remainder = (remainder/3600 - hour)*3600;

min = floor(remainder/60);
sec = (remainder/60 - min)*60;

set(handles.jday,'String',day);
set(handles.jhour,'String',hour);
set(handles.jmin,'String',min);
set(handles.jsec,'String',sec); 
```

这是另一个回调：

```
% --- Executes on button press in convertirig.
function convertirig_Callback(hObject, eventdata, handles)
% hObject    handle to convertirig (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)
seconds=handles.jday*86400+handles.jhour*3600+handles.jmin*60+handles.jsec;
set(handles.isec,'String',sprintf('%0.3f',seconds)); 
```

这是我在运行 MATLAB 时遇到的错误：

使用 handle.handle/set 时出错 对象无效或已删除。

时间转换错误>convertjulian_Callback (line 124) set(handles.jday,'String',day);

gui_mainfcn 中的错误（第 96 行） feval(varargin{:});

时间转换错误（第 42 行） gui_mainfcn(gui_State, varargin{:});

@(hObject,eventdata)timeconversion('convertjulian_Callback',hObject,eventdata,guidata(hObject)) 中的错误

评估 uicontrol 回调时出错

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T20:47:33.730

您将句柄视为数值。要从 a 获取值`handles.isec`，您可以使用：

```
value = str2double(get(handles.isec, 'String')); 
```

所有的“j”句柄都是相似的。

# java - @WebServlet 中的 JSF 2.0 和自定义路径

> ID：14285866
> 
> 赞同：3
> 
> 时间：2013-01-11T20:09:14.907
> 
> 标签：java, jsf, servlets, jsf-2

我有一个带有一些标准 JSF 页面和支持 bean 的 JSF webapp。
我正在尝试使用注释的`urlPatterns`参数`@WebServlet`从非根路径获取我的应用程序页面。前任：

```
http://localhost/<appName>/<myPath>/index.xhtml 
```

其中 myPath = /web 如下面的代码所示。

这似乎不起作用。该应用程序仅响应对以下请求的请求：

```
http://localhost/<appName>/index.xhtml 
```

该应用程序部署在 Tomcat 7.0 中。以及以下 JSF 依赖项：

```
<dependency>
    <groupId>com.sun.faces</groupId>
    <artifactId>jsf-impl</artifactId>
    <version>2.1.16</version>
</dependency>
<dependency>
    <groupId>com.sun.faces</groupId>
    <artifactId>jsf-api</artifactId>
    <version>2.1.16</version>
</dependency> 
```

有任何想法吗？

```
import javax.faces.webapp.FacesServlet;

@WebServlet(urlPatterns = "/web",
            initParams = { @WebInitParam(name = "javax.faces.PROJECT_STAGE",
                           value = "Development") })
public class AppServlet implements Servlet {

    FacesServlet servlet = new FacesServlet();

    @Override
    public void destroy() {
        servlet.destroy();
    }

    @Override
    public ServletConfig getServletConfig() {
        return servlet.getServletConfig();
    }

    @Override
    public String getServletInfo() {
        return servlet.getServletInfo();
    }

    @Override
    public void init(ServletConfig servletConfig) throws ServletException {
        servlet.init(servletConfig);
    }

    @Override
    public void service(ServletRequest req, ServletResponse resp)
            throws ServletException, IOException {
        servlet.service(req, resp);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T20:13:34.763

URL 模式`/web`仅匹配`http://localhost/<appName>/web`文件夹，而不像`http://localhost/<appName>/web/index.xhtml`您预期​​的那样匹配子文件夹和文件。为此，您应该使用`/web/*`.

```
@WebServlet("/web/*") 
```

* * *

**与具体问题无关**，这不会与 JSF 一起工作，因为它自己的`FacesServlet`不会以这种方式调用。也许您实际上需要一个[servlet 过滤器](https://stackoverflow.com/tags/servlet-filters/info)？此外，该 web 初始化参数创建 a`<servlet><init-param>`而不是`<context-param>`JSF 通常需要的 a。以防万一你不知道。

# ios - UICollectionView 中 UISwitch 的错误数据表示

> ID：14285871
> 
> 赞同：1
> 
> 时间：2013-01-11T20:09:20.803
> 
> 标签：ios, uicollectionview, uiswitch

我有一个 UICollectionView 我代表从 SQLite 数据库中获取的数据。当我向上和向下滚动 CollectionView 时，我遇到了 UISwitch 问题：

```
-(UICollectionViewCell *)collectionView:(UICollectionView *)cv 
     cellForItemAtIndexPath:(NSIndexPath *)indexPath {

 city_setlist *cellValue = [self.arr objectAtIndex:indexPath.row];

 UISwitch *onoff=(UISwitch *) [cell viewWithTag:106];
 onoff.tag=[cellValue._id_setlist intValue];

 if([cellValue._was_there isEqualToString:@"1"])
     [onoff setOn:YES animated:YES];
 else
     [onoff setOn:NO animated:YES];
} 
```

如果我不滚动，数据就可以了，但是如果我开始上下滚动 CollectionView，UISwitch 会随机打开它应该关闭的位置，反之亦然。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T20:24:20.023

单元格可以在平铺视图中重复使用。这段代码看起来像是假设单元格没有被重用：

```
UISwitch *onoff=(UISwitch *) [cell viewWithTag:106];
onoff.tag=[cellValue._id_setlist intValue]; 
```

我假设这会将开关的标签更改为 106 以外的值。这意味着如果该单元格稍后被重用，它将不再是 106，并且顶行将返回 nil。尝试删除我引用的第二行。`onoff`（您也可以通过在滚动时记录您在第一行中获得的值来确认这是问题所在。）

一般来说，使用标签有点麻烦。通过为您的单元定义一个子类并将 UISwitch 连接到一个属性（例如，通过一个插座），您可能会发现它更干净。

# serial-port - 如何更改串行驱动程序的中断优先级，使其优先级高于以太网中断？

> ID：14285873
> 
> 赞同：1
> 
> 时间：2013-01-11T20:09:27.087
> 
> 标签：serial-port, linux-device-driver

我正在以 460800 波特率运行串行端口。数据连续发送。串行驱动程序数据被传递给用户空间应用程序，用户空间应用程序使用套接字将数据发送到网络应用程序。有时，我得到串行驱动程序 HW Fifo 溢出，因为运行 ISR 或其他中断需要太长时间（我只有以太网、串行和 gp_timer 中断）。另外，我认为有些情况下以太网和串行中断都在中断队列中（我的假设）并且以太网驱动程序中断优先于串行驱动程序中断，同时串行驱动程序 HWFIFO 溢出。

在我禁用数据传输到网络应用程序的那一刻，用户空间的所有数据都接收良好。这让我相信它可能是导致问题的以太网驱动程序。

我想更改串行中断的优先级，以便它在以太网驱动程序中断之前得到服务。你认为改变优先级会解决问题吗？

我在 Linux 2.6.32 ARMV7 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:52:50.883

我不确定哪个版本的补丁会更好尝试，我会说首先应用版本 2.6.33，如果补丁应用没有问题，那么就使用它，如果它们不适用，那么尝试 2.6.31补丁。

补丁的缺点是它使 linux 可抢占，所以你必须小心，因为你永远不知道你什么时候会被换掉。这意味着使用互斥锁来保护线程和类似事物之间共享的数据。如果您了解自己在做什么，这不是一个大问题。

它在 Windows 上工作的原因是运气，如果你在 Windows 上运行测试然后重载系统它仍然工作吗？我对此表示怀疑。在**适当设计**的实时系统中，无论系统负载如何，它都将始终工作。

# jquery - removeAttr('checked') 选中复选框时的事件

> ID：14285874
> 
> 赞同：2
> 
> 时间：2013-01-11T20:09:30.290
> 
> 标签：jquery

我有一个功能可以通过执行以下操作取消选中复选框：

```
$('[name = destination]').removeAttr('checked'); 
```

现在我希望在复选框上触发一个事件，就像我手动检查它一样。有这方面的活动吗？

我试过改变并点击。当我手动选中/取消选中该框时，两者都可以工作，但像这样完成时则不行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T20:11:38.297

而不是删除属性，为什么不将属性设置为 false

```
$('[name = destination]').removeAttr('checked'); 
```

尝试

```
$('[name = destination]').prop('checked', false); 
```

* * *

然后写下处理您正在寻找的此功能的事件

```
$('[name = destination]').on('click' , function(){
  var $chk = $('[name="description"]');
  if($chk.is(':checked')){
       console.log('Checkbox is checked !!');
  }
  else{
       console.log('Checkbox is now UNCHECKED !!');
  }
});

$('[name = destination]').prop('checked', false).trigger('click'); 
```

您也可以使用`.trigger()`方法手动触发事件

```
 $('[name = destination]').trigger('click'); 
```

**触发事件时要小心**

**如果您使用它**来检查状态，则在这种情况下可能不会反映当前的属性状态

**[检查小提琴](http://jsfiddle.net/sushanth009/Ntu7M/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T20:11:27.743

当您更改属性时，您将需要手动触发 a `change`or事件（并且您可能应该通过而不是 来执行此操作，正如另一位海报提到的那样）`click``checked``prop``changeAttribute`

这只是意味着，而不仅仅是

```
$('[name = destination]').removeAttr('checked'); 
```

做

```
$('[name = destination]').removeAttr('checked');
$('[name = destination]').trigger('click'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T20:12:45.490

$('[name = destination]').click(); 触发事件

它将在您手动单击复选框时起作用

# c++ - boost::io_service post 方法是否会导致新的分配？

> ID：14285875
> 
> 赞同：3
> 
> 时间：2013-01-11T20:09:31.127
> 
> 标签：c++, performance, boost, boost-asio

我正在使用带有对象`boost::io_service`的方法对事件进行异步处理。有谁知道这是否会导致新的分配？我知道下面有一个事件队列，但我知道它是如何完全工作的。显然我很关心高性能。`post()``boost::bind`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T21:17:07.233

是的，它会导致分配。如果分配是性能问题，您可以[为 handler 使用自定义分配器](http://www.boost.org/doc/libs/release/doc/html/boost_asio/example/allocation/server.cpp)。

# python - 客户端立即断开连接

> ID：14285879
> 
> 赞同：0
> 
> 时间：2013-01-11T20:09:48.630
> 
> 标签：python, twisted

我在 Python 2.7 上，我在一个简单的 Twisted 客户端上遇到了一个非常奇怪的问题。

```
from twisted.internet.protocol import ClientFactory
from twisted.protocols.basic import LineReceiver
from twisted.internet import reactor
import json, sys, time

class MySpecialClient(LineReceiver):

    def connectionMade(self):
        print "Connection made."

    def lineReceived(self, line):
        print "Got a line."

class MySpecialClientFactory(ClientFactory):
    protocol = MySpecialClient

    def clientConnectionFailed(self, connector, reason):
        print 'connection failed:', reason.getErrorMessage()
        reactor.stop()

    def clientConnectionLost(self, connector, reason):
        print 'connection lost:', reason.getErrorMessage()
        reactor.stop()

def main():
    factory = MySpecialClientFactor()
    reactor.connectTCP('localhost', 5050, factory)
    reactor.run()

if __name___ == "__main__":
    main() 
```

我遇到的问题是我看到“已建立连接”。在我的日志中紧跟“连接丢失：连接已完全关闭。”。为什么我的连接在连接后立即断开？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:21:27.233

我从同一个包中替换，并将方法更改为`LineReceiver`所有“刚刚工作。™”`Protocol``lineReceived``dataReceived`

# encoding - 相关性如何帮助压缩

> ID：14285881
> 
> 赞同：7
> 
> 时间：2013-01-11T20:09:57.230
> 
> 标签：encoding, compression, image, correlation

嗨，我想知道图像中像素之间的相关性如何有助于压缩？另外，为什么我想减少像素之间的相关性以获得更好的压缩效果（我在一篇文献中找到了该信息，但我不明白）？我的最后一个问题是：如果相关性是 R=0.9，那么这些信息如何帮助压缩？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T21:57:26.167

我举个例子。假设每个像素都与其上方的像素密切相关。我们现在压缩`bottomPixel - topPixel`（**两者的增量**），而不是直接压缩像素值。

**由于相关性，这个增量将非常小**。我现在可以使用诸如算术或霍夫曼之类的**可变长度编码**来为小增量分配更少的位，为高增量分配更多位。我会以这种方式保存位，因为**小增量更频繁地发生**。

这个例子推广到很多案例和模型（音频就是其中之一）。

# ajax - Rails 中的 format.js 与 format.html

> ID：14285882
> 
> 赞同：0
> 
> 时间：2013-01-11T20:09:58.783
> 
> 标签：ajax, ruby-on-rails-3, jquery

我想在我的`create`操作中使用 AJAX 加载部分内容。从教程中我知道这样做的方法是将行`format.js`单独包含在`respond_to`块中并创建一个`create.js.erb`文件。但是我的`create`操作中有需要执行的代码。如果我将所有这些代码放在一个`format.js {}`块中，则不会加载部分代码。我想我不确定这个块中应该包含什么？

这类作品：

```
def create
  respond_to do |format|

  format.html do
    session[:user_params].deep_merge!(params[:user]) if params[:user]
    @user = User.new(session[:user_params])
    @user.current_step = session[:user_step]
    if params[:prev_button]
      @user.previous_step
    elsif @user.last_step?
      @user.save
    else
      @user.next_step
    end
    session[:user_step] = @user.current_step
    if @user.new_record?
      render :new
    else
      session[:user_step] = session[:user_params] = nil
      flash[:success] = "Welcome to Friends First!"
      redirect_to @user
    end
  end
  format.js
end
end 
```

我的**new.html.erb**看起来像这样：

```
<%= form_for(@user, :html => { :class => "form-horizontal" }, remote: true) do |f| %>
  <%= render 'shared/error_messages' %>

  <div id="partial">
    <%= render "#{@user.current_step}", :f => f %>
</div>

<div class="control-group">
  <div class="controls">
    <%= f.submit "Previous", class: "btn btn-primary", :name => "prev_button" unless @user.first_step? %>
    <%= f.submit "Next", class: "btn btn-primary" %>
  </div>
</div> 
```

但是由于某种原因`@user.first_step?`，一旦我加载部分内容就无法工作。

**创建.js.erb**

```
$("#partial").html("<%= escape_javascript(render('step2')) %>"); 
```

我真正想要的是：`render(@user.current_step)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T20:30:18.137

您可以执行所有逻辑，然后处理正确的格式。此外，您可以为视图使用多种格式。

[Diaspora 源代码中有一个](https://github.com/diaspora/diaspora/blob/develop/app/controllers/comments_controller.rb#L17-L30)示例：

```
 def create
    post = current_user.find_visible_shareable_by_id(Post, params[:post_id])
    @comment = current_user.comment!(post, params[:text]) if post

    if @comment
      respond_to do |format|
        format.json{ render :json => CommentPresenter.new(@comment), :status => 201 }
        format.html{ render :nothing => true, :status => 201 }
        format.mobile{ render :partial => 'comment', :locals => {:post => @comment.post, :comment => @comment} }
      end
    else
      render :nothing => true, :status => 422
    end
  end 
```

如果出现故障，您不应该进行任何重定向，因为用户仍然停留在页面上。但是您可能想要使用客户端验证。

因此，您可以将`format.js`其用于您的成功案例并使用 partial 重新加载部分 HTML。例如：

```
# create.js.erb
$("#js-user-panel").html("<%= j render("users/panel", :user => @user %>");
# ... create div with flash message here and etc. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T20:17:15.620

我认为您想在`new`页面上加载部分内容，所以这样做是为了`new`采取行动，而不是`create`. 并按照你说的做。

# php - php mysql 循环中的查询 - 确定哪些表行不在循环中

> ID：14285884
> 
> 赞同：1
> 
> 时间：2013-01-11T20:10:03.200
> 
> 标签：php, mysql

可能是一个令人困惑的标题 - 我确实在 SO 档案中找到了一个我认为可以解决问题但仍然没有得到它的结果。

我正在使用一个函数来显示服务器目录中的所有文件（对我来说是管理员）（这很好用）我也有文件名存储在数据库表中......

我想做的是；在生成服务器文件列表时，还要在表中查询匹配的文件名 - 我正在尝试识别服务器上不在我的 db 表中的孤儿。

好像我以前做过这个，或者这是一个“简单”的查询任务，但我正在画一个完全空白并撞到墙上。（如果一行没有结果，您的基本查询只会查找下一个匹配项，我想标记不匹配项）。

我在 SO 档案中找到的一个解决方案是使用“NOT IN”查询，例如：

```
$files_on_server = "file1,file3,file4,file7";
// Your SQL WHERE clause...
...WHERE `filename` NOT IN ($files_in_server) 
```

但这不是为我做的。在此先感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T20:13:53.587

看起来这一切都是关于标点符号的。单引号的值怎么样？

```
$files_on_server = "'file1','file3','file4','file7'"; 
```

但通常更可取的是使用准备好的语句 - google for mysqli 和 PDO。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T20:13:26.500

我认为这`$files_on_server`应该匹配：`$files_in_server`

```
 $files_on_server = "'file1','file3','file4','file7'";
// Your SQL WHERE clause...
...WHERE `filename` NOT IN ($files_on_server) 
```

通过阅读您的问题。如果要收集文件名，可以使用递归函数将它们放入数组中。那么你可以在**NOT IN**语句中内爆数组

```
NOT IN('" . implode("' , '", $files_on_server) . "') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T20:14:13.983

你的字符串：

```
$files_on_server = "file1,file3,file4,file7"; 
```

把它变成这样：

```
$files_on_server = "'file1','file3','file4','file7'";

SELECT *
FROM files
WHERE filename NOT IN ($files_on_server); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T20:14:51.713

我认为您的问题出在这一行：

`$files_on_server = "file1,file3,file4,file7";`

它应该是（注意个别引号）：

`$files_on_server = "'file1','file3','file4','file7'";`

但也要考虑为什么会有孤立文件。如果是因为文件是通过 FTP 删除的，请考虑编写一个 php 接口来删除它们。当有大量文件需要跟踪时，当前的解决方案可能会开始变慢。

# javascript - 仅在 IE9 标准模式下的 asp.net javascript 内存泄漏

> ID：14285890
> 
> 赞同：2
> 
> 时间：2013-01-11T20:10:23.333
> 
> 标签：javascript, asp.net, memory, internet-explorer-9, memory-leaks

使用 javascript 每 X 秒自动刷新一次页面时，我遇到了内存泄漏。我已经证实这种泄漏没有发生在 Firefox 或 Chrome 中，也没有发生在 IE 7/8/10 中——只有 IE 9（我在 Win7 上）。

令我疯狂的是，当我在 IE9 中查看此内容并观察内存使用率攀升时，我可以在 IE 中打开开发人员工具，将浏览器模式更改为 IE8，然后随着页面继续显示内存停止攀升重新加载。把它改回IE9模式，它又开始上升了。

下面的示例页面是一个显示泄漏的模型，但我正在体验它的页面是一个监控页面，我大部分时间都保持打开状态。如果我让这个页面在 IE9 中打开几个小时，它最终会耗尽 32 位应用程序可以访问的所有内存（~1.5Gb），然后 IE 变得无响应。

我已经使用Drip [-0.5](http://www.outofhanwell.com/ieleak/index.php?title=Main_Page)和[IEJSLeaksDetector](http://blogs.msdn.com/gpde/pages/javascript-memory-leak-detector-v2.aspx)查看了这个示例页面- 但是这两个泄漏查找器都是基于 IE7 渲染引擎的，这不是问题。这两种工具都没有显示出任何问题。

我能做些什么来缓解这种情况（除了使用不同的浏览器），或者我能做些什么？

示例 .aspx 文件如下。

```
<html>
<head>
    <title></title>
<script type="text/javascript">
    var sec = 15;
    function pageLoad() {
        setInterval(updReload, 1000);
    }
    function updReload() {
        if (sec == 0) {
            window.location.reload();
        } else {
            document.getElementById('spnReload').innerHTML = sec--;
        }
    }
</script>
</head>
<body>
    <form id="Form1" runat="server">
        <asp:ScriptManager ID="ScriptManager1" runat="server" />
        <h1>Current Time is: <%=Now.ToShortTimeString() %></h1>
        Reload in: <span id="spnReload"></span>
    </form>
</body>
</html> 
```

**更新：** 这是我刚刚发现的一个新问题：IE9 Quirks 模式似乎没有漏洞——只有 IE9 标准模式。即使我将浏览器模式设置为 IE8，如果文档模式是 IE9 标准 - 存在内存泄漏。

* * *

**更新 2：** 我尝试在经典 ASP 文件中重新创建此示例页面，但它没有表现出上面示例文件中显示的内存泄漏。于是我开始认为这可能与 .NET 自己的 javascript 函数有关。我将 注释掉`ScriptManager`并将其添加`onload="pageLoad()"`到 body 标记中，内存泄漏从每次重新加载 1-2 MB 下降到每次重新加载大约 80 KB！更新的代码在这里：

```
<html>
<head>
    <title></title>
<script type="text/javascript">
    var sec = 15;
    function pageLoad() {
        setTimeout(updReload, 1000);
    }
    function updReload() {
        if (sec == 0) {
            window.location.reload();
        } else {
            document.getElementById('spnReload').innerHTML = --sec;
            setTimeout(updReload, 1000);
        }
    }
</script>
</head>
<body onload="pageLoad()">
    <form id="Form1" runat="server">
        <%--<asp:ScriptManager ID="ScriptManager1" runat="server" />--%>
        <h1>Current Time is: <%=Now.ToShortTimeString() %></h1>
        Reload in: <span id="spnReload"></span>
    </form>
</body>
</html> 
```

仍然略有泄漏，但我可能会忍受......问题是我的生产页面发生这种情况是一个内容页面，其母版页包含 ScriptManager.. 我想我必须通过 Page_Load 中的代码将其删除如果这是我必须接受的决议。

还有其他人在使用 .NET 4.0 ScriptManager Javascripts 时遇到 1-2 MB 内存泄漏吗？

我还能做些什么来绕过泄漏并将 ScriptManager 留在页面上？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:48:23.043

我的猜测是你应该明确停止间隔。

清除间隔（秒）；

当达到 15 时。

# scala - Scala 为 JVM 1.7 生成字节码的优势

> ID：14285894
> 
> 赞同：33
> 
> 时间：2013-01-11T20:10:41.010
> 
> 标签：scala, jvm, bytecode

根据 Scala 2.10，与默认为 1.6 发出字节码相比，为 JVM 1.7 发出字节码有哪些优势（如果有）？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-15T17:55:21.900

以前的 Scala 版本发出 49.0 版本的字节码，对应于 Java 5。在 Scala 2.10 版本[中，默认值更改为 50.0 版本](http://www.scala-lang.org/node/43#2.10.0)，对应于 Java 6，它的主要优点是激活该版本引入的更快的验证器，所以它应该会导致（稍微）更好的运行时性能。

正如您所注意到的，使用 2.10 可以发出版本 51.0 字节码，它对应于 Java 7。版本 50.0 和版本 51.0 之间存在一些差异：最大的是包含`invokedynamic`指令，以及随之而来的管道（有关血腥细节，请参阅[类文件格式定义](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html)）。

就 Scala 对 51.0 字节码的使用而言，尽管技术部分已经到位，但我的理解是，使用此功能的工作仍处于实验阶段。请参阅[此 EPFL 演示文稿](http://lampwww.epfl.ch/~magarcia/ScalaCompilerCornerReloaded/2012Q4/2012-11-04-FasterClosures.pdf)和[此线程](http://thread.gmane.org/gmane.comp.lang.scala.internals/14411)，这表明团队正在努力获得方法句柄的性能优势，而不必引入对 Java 7 的依赖。

Scala 2.11 保留了发出版本 50.0 字节码的默认设置，但现在[官方计划](http://www.scala-lang.org/news/2.12-roadmap)使用 Scala 2.12 直接跳转到 Java 8 字节码。与此同时，Scala 2.11 提供了一个[新的后端](http://magarciaepfl.github.io/scala/)，可让您试用[一些](http://thread.gmane.org/gmane.comp.lang.scala.internals/16941)为 Scala 2.12 设计的原型功能，这些功能将成为 Scala 2.12 的默认后端。

无论如何，期待已久的提议的好处都来自使用`invokedynamic`字节码（及其相关的 MethodHandle 结构）。它们包括：

*   [减少闭包的代码大小和执行时间](http://thread.gmane.org/gmane.comp.lang.scala.internals/15435)
*   [改进通用数据类型的专业化](http://thread.gmane.org/gmane.comp.lang.scala.internals/9397)
*   [可能更快的结构类型](http://thread.gmane.org/gmane.comp.lang.scala.user/61476)

（剧透：`MethodHandles`用于在实验后端实现闭包目前比目前优化的闭包创建慢！*）*

# git - 如何取消归档使用 $ git archive 创建的 git 存储库归档

> ID：14285896
> 
> 赞同：2
> 
> 时间：2013-01-11T20:10:50.980
> 
> 标签：git

我有一些使用该`$ git archive`工具创建的 git 档案。

知道如何将这些档案恢复到存储库中吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T20:15:03.337

`git archive`不归档您的存储库。它会在您的存储库中创建*一个特定修订版本*的 tarball 存档。所以你不能把`git archive`它的输出变成一个完整的存储库，对不起。

`git archive`您可以提取生成的 tarball 包含的单个修订版本`tar xf <filename>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T20:14:38.070

根据 --format 选项的值，您可以使用适当的工具提取它们，即 unzip 用于 format=zip，tar 用于 format=tar，gzip/tar 用于 format=tgz 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T20:14:48.670

**拉上拉链：**

```
# git archive --format zip --output filename.zip my_branch 
```

**把它拉出来：**

```
# unzip filename.zip 
```

## 更新：

**将您的来源和结帐设置为分支：**

```
# git checkout -b my_branch origin/my_branch 
```

# jquery - 如何使用两个...功能？在 jQuery 中通过两个 DIV 显示 DIV

> ID：14285897
> 
> 赞同：1
> 
> 时间：2013-01-11T20:11:11.077
> 
> 标签：jquery, html, css, webpage

一开始我说，我的英文很差，所以我一直在想，是否在这里写，你是否会理解我。

我有以下 jQuery 脚本：

```
$(function() {
    $('#div1').hover(function() {
        $('#div1').css('display', 'block');
    }, function() {
        $('#div2').css('display', 'none');
  });
}); 
```

这个脚本必须这样做：http: [//i.stack.imgur.com/RW7Lp.png](http://i.stack.imgur.com/RW7Lp.png)

确实如此 :) 但是，当我从字符串“Strona główna”中取出光标时，第二个 DIV 消失了:(

我怎么能创造......像这样的东西：

```
$(function() {
    $('#div1' + '#div2').hover(function() {
        $('#div1').css('display', 'block');
    }, function() {
        $('#div2').css('display', 'none');
  });
}); 
```

我不太了解 jQuery :(

请帮助我，我希望，我写的可以理解。

一目了然...当光标在区域 Div1 和 Div2 上时，Div1 和 Div2 必须显示 Div2：P

我试图创建一个简单的滑动菜单，但我必须使用 Div，因为整个网站都是用 Divs 编写的，而这个菜单（上图）已经在其他 Div...

这个带有这个菜单的面板在我的 Tumblr 上，所以你可以在：idolwszutrab7.tumblr.com 上看到它，如果有帮助的话，但我没有用这个脚本更新页面。

**更新：**

我全部复制到：

[http://jsfiddle.net/IdolwSzutrab7/Wq3YH/](http://jsfiddle.net/IdolwSzutrab7/Wq3YH/)

我测试了它，它在这个网站上工作:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T20:23:06.343

可能这对你想要的有用

因为你想在 div1 和 div2 悬停时显示 div2

```
$('#div1 , #div2').hover(function() {
    $('#div2').css('display', 'block');
}, function() {
    $('#div2').css('display', 'none');
}); 
```

只要确保这两个 div 之间没有空间，否则悬停在第一个 div 之外，第二个 div 将在到达那里之前关闭。

其他选项是将这两个 div 与其他 div 说 div3 包装并在 div3 上悬停

喜欢

```
<div id='div3'>
 <div id='div1'>

</div><div id='div2'>

</div>
</div> 
```

JS

```
$('#div3').hover(function() {
    $('#div2').css('display', 'block');
}, function() {
    $('#div2').css('display', 'none');
}); 
```

在第二种方式中，也有纯 css 方式。 **CSS**

```
#div3 #div2{
display:none;
}
#div3:hover #div2{
display:block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T12:41:30.590

我有想法，创建两个脚本：P

```
<script>
    $(function() {
        $('#div1').hover(function() {
            $('#div2').css('display', 'block');
        });

        $('#div2').hover(function() {
            $('#div2').css('display', 'block');
        }, function() {
            setTimeout(function() {
            $('#div2').css('display', 'none');
            }, 2000);
        });
    });
</script> 
```

这是工作！

之后，我添加了动画和效果，所以现在它看起来不错，而且还可以工作。

# python - 无法让 python Turtle 在 Linux 上的 Pydev 中工作

> ID：14285898
> 
> 赞同：1
> 
> 时间：2013-01-11T20:11:14.170
> 
> 标签：python, eclipse, tkinter, pydev, turtle-graphics

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T20:27:34.973

就像另一个链接说的那样，确保`tk-dev`在尝试在 python 中导入模块之前安装；我也会在 Python 2.7 解释器上对此进行测试，3.3 太新了，Tkinter 可能不完全受支持或没有经过很好的测试。因此，如果允许，请尝试 2​​.7。

确保您正确导入它：`import Tkinter`

以下是如何安装`Tkinter` [http://tkinter.unpythonic.net/wiki/How_to_install_Tkinter](http://tkinter.unpythonic.net/wiki/How_to_install_Tkinter)

这里有一个链接可以为您提供一些 Tkinter 的 RPM： [http: //rpmfind.net/linux/rpm2html/search.php?query=tk-devel](http://rpmfind.net/linux/rpm2html/search.php?query=tk-devel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T20:58:59.460

1.  检查依赖项和所有需要的库——Think Python 清楚地说明了这一点。
2.  尝试使用不是 python3.3 而是更早的 python 版本 2.7
3.  为什么需要日食？你正在运行什么操作系统？

# php - 在边界内缩小一组数字

> ID：14285906
> 
> 赞同：0
> 
> 时间：2013-01-11T20:11:41.547
> 
> 标签：php, scale

我不知道这是否是问这个问题的正确地方，但在这里我主要在 php 中工作，但任何语言的 ans 都可以。

我正在为网站制作标签云。像[这样的东西](http://en.wikipedia.org/wiki/File%3aWeb_2.0_Map.svg)

假设我有一个数字数组

`array(54, 67, 68, 72, 98, 103, 112, 136, 169, 200, 201)`

这个数字代表一个词在网站上被搜索了多少次。

在标签云中，我想以更大的字体显示流行的关键字。所以我想用这个数字作为字体大小的链接

所以我的问题是，我怎样才能相对减少这些数字，以便所有这些数字都在 10 到 20 时出现。其中 10 和 20 将是​​标签的字体大小

我希望我足够清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T20:50:00.640

这是[小提琴](http://phpfiddle.org/main/code/qbw-du8)。

```
<?php

$values = array(54, 67, 68, 72, 98, 103, 112, 136, 169, 200, 201);

$max = max($values);
$min = min($values);

$fontMin = 10;
$fontMax = 20;

$valueDiff = $max - $min;
$fontDiff = $fontMax - $fontMin;
$incrementEvery = round($valueDiff / $fontDiff);

foreach ($values as $value) {
    $actualFont = round(($value - $min) / $incrementEvery) + $fontMin;
    echo "$value: $actualFont \n";
} 
```

结果是：

```
54: 10 
67: 11 
68: 11 
72: 11 
98: 13 
103: 13 
112: 14 
136: 15 
169: 18 
200: 20 
201: 20 
```

单线是：

```
round(($value - $min) / round(($max - $min) / ($fontMax - $fontMin))) + $fontMin; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T20:19:46.723

您可以使用 php 函数 sort() [http://php.net/manual/en/function.sort.php] 对数组进行排序，以获得最高和最低数字之间的差异。例如，在您的列表中，201 是最高的，54 是最低的，因此您的差值为 147。由于您希望在 10 和 20 之间（含），因此您可以使用 10 种不同的字体大小（如果您使用小数，则可以使用更多），因此您可以将 147 除以 10 以确定将字体大小增加 1 点所需的最小值以上的项目数。

因此，54 将是 10 磅字体，68 将是 11 磅字体 (54 + 14.7 = 68.7)。如果要使用整数，只需使用 PHP floor()。

希望这能让您对如何解决问题有一个很好的了解。

# c# - DbContext.Find() 上发生引用完整性约束冲突（代码优先）

> ID：14285908
> 
> 赞同：1
> 
> 时间：2013-01-11T20:11:48.763
> 
> 标签：c#, entity-framework, dbcontext, invalidoperationexception

我遇到了一个相当有趣的例外。它昨天发生在过去某个时候有效的代码上（我继承了大部分代码库，前开发人员不再和我们在一起）。

我昨天使用了一个解决方法`.Where()`，但是由于我今天在另一个控制器中再次遇到了这个问题，我决定最好在它把我咬到意想不到的地方之前找到它的底部。

我收到以下错误：

> 发生参照完整性约束冲突：当从属对象未更改时，作为参照完整性约束一部分的主键属性不能更改，除非它被设置为关联的主体对象。必须跟踪主体对象并且不标记为删除。

现在是奇怪的部分。当我将 Find() 方法`DbContext.DbSet.Find(int)`与新的 dbContext 一起使用时出现此错误。

这是确切的代码。它在第 5 行找到了 CurResponse 对象而没有发生意外，但它在遇到`db.CurFundings.Find(post.SelectedSourceCurFundingKey);`下面的第 7 行时失败并抛出上面的异常：

```
0\. [HttpPost]
1\. public ActionResult MatchingCur2Fundings(int id, MatchingCur2FundingsVM post, string callbackId)
2\. {
3\. if (ModelState.IsValid)
4\. {
5\. var cur = _db.CurResponses.Find(id);
6\. var c2f = new Cur2FundingDataFlow();
7\. c2f.SourceFunding =  _db.CurFundings.Find(post.SelectedSourceCurFundingKey); 
```

我`post.SelectedSourceCurFundingKey`用如下整数替换：

```
7\. c2f.SourceCurFunding = _db.CurFundings.Find(1); 
```

我仍然得到上面的错误。

当我 quickwatch 时`_db.CurFundings`，它返回 3 个对象，其中一个对象的主键为*1*。

当我快速观看时， `db.CurFundings.Find(post.SelectedSourceCurFundingKey);`我得到了上面的错误，所以它与作业左侧的内容没有任何关系。

我可以通过将 替换为 来获得我需要的项目`DbContext.DbSet.Find()`，`DbContext.DbSet.Where(x => x.id == id).SingleOrDefault()`如下所示：

```
c2f.SourceCurFunding = _db.CurFundings.Where(cf => cf.CurFundingKey == post.SelectedSourceCurFundingKey).SingleOrDefault(); 
```

仅当我使用该`Find()`方法从 DbContext 检索项目时才会出现此问题。

我正在使用 EF CodeFirst，当前的大部分代码都是几个月前继承的。

我不知道这是否会有所帮助，但这是将此特定对象添加到我的 DbContext 的行：

```
public DbSet<CuFunding> CurFundings { get; set; } 
```

这是应用程序中对该属性的唯一引用`DbContext.CurFundings`，当我查看该类型的用法时，我没有看到任何奇怪的事情发生。

我总是可以使用`.Where()`来获得我需要的东西，但我想确保这不是更深层次问题的迹象。

# 编辑 1

这是整个 CurFunding 类`CurConstructionFunding`，但我在前面的示例中缩短了名称：

```
namespace MfpSuite.Models.Documents.CUR
{
  public class CurConstructionFunding
  {
    [Key]
    public int CurConstructionFundingKey { get; set; }
    public int CurPropertyKey { get; set; }
    [ForeignKey("CurPropertyKey")]
    public virtual CurProperty CurProperty { get; set; }

    public string Source { get; set; }
    public string Lender { get; set; }
    public string ConstructionAmount { get; set; }
    public string PermanentAmount { get; set; }
    public string PermanentLoanPerUnit { get; set; }
    public string TotalConstructionAmount { get; set; }
    public string TotalPermanentAmount { get; set; }
    public string TotalPermanentLoanPerUnit { get; set; }

    //public int CurResponseKeyId { get; set; }
    //[ForeignKey("CurResponseKeyId")]
    //public virtual CurResponse CurResponse { get; set; }

    /// <summary>
    /// Indicates which funding this data is imported into.  Note there shouldn't be more than one item in this collection.
    /// 01/14/13 - todo - if there shouldn't be more than one, this should be a 1|1 mapping here (like we have [mistakenly] done w/ docTypes to Doc)
    /// </summary>
    public virtual ICollection<Cur2FundingDataFlow> Cur2FundingDataFlow { get; set; }

  }
} 
```

# 编辑 2

这是我可以从快速观察中得到的`Find()`：

```
_db.CurConstructionFundings = {SELECT 
[Extent1].[CurConstructionFundingKey] AS [CurConstructionFundingKey], 
[Extent1].[CurPropertyKey] AS [CurPropertyKey], 
[Extent1].[Source] AS [Source], 
[Extent1].[Lender] AS [Lender], 
[Extent1].[ConstructionAmount] AS [ConstructionAmount], 
...

_db.CurConstructionFundings

{SELECT 
[Extent1].[CurConstructionFundingKey] AS [CurConstructionFundingKey], 
[Extent1].[CurPropertyKey] AS [CurPropertyKey], 
[Extent1].[Source] AS [Source], 
[Extent1].[Lender] AS [Lender], 
[Extent1].[ConstructionAmount] AS [ConstructionAmount], 
[Extent1].[PermanentAmount] AS [PermanentAmount], 
[Extent1].[PermanentLoanPerUnit] AS [PermanentLoanPerUnit], 
[Extent1].[TotalConstructionAmount] AS [TotalConstructionAmount], 
[Extent1].[TotalPermanentAmount] AS [TotalPermanentAmount], 
[Extent1].[TotalPermanentLoanPerUnit] AS [TotalPermanentLoanPerUnit]
FROM [dbo].[CurConstructionFundings] AS [Extent1]}

        StackTrace  "   at System.Data.Objects.ObjectStateManager.DetectConflicts(IList`1 entries)\r\n   
        at System.Data.Objects.ObjectStateManager.DetectChanges()\r\n   
        at System.Data.Objects.ObjectContext.DetectChanges()\r\n   
        at System.Data.Entity.Internal.InternalContext.DetectChanges(Boolean force)\r\n   
        at System.Data.Entity.Internal.Linq.InternalSet`1.Find(Object[] keyValues)\r\n  
        at System.Data.Entity.DbSet`1.Find(Object[] keyValues)" string

        +       [System.Reflection.RuntimeMethodInfo]   {Void DetectConflicts(System.Collections.Generic.IList`1[System.Data.Objects.EntityEntry])} System.Reflection.RuntimeMethodInfo 
```

# java - Google Maps API v2：如何添加 OnMarkerClickListener 或 OnInfoWindowClickListener 来启动新活动？

> ID：14285911
> 
> 赞同：2
> 
> 时间：2013-01-11T20:11:54.183
> 
> 标签：java, android, google-maps

我当前的代码

```
package com.crusaders.epeats;

import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.GoogleMap.OnMarkerClickListener;
import com.google.android.gms.maps.model.BitmapDescriptorFactory;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.Marker;
import com.google.android.gms.maps.model.MarkerOptions;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import com.google.android.gms.maps.SupportMapFragment;

public class Map extends FragmentActivity implements OnMarkerClickListener{

private Marker myMarkerOne;
private Marker myMarkerTwo;
private Marker myMarkerThree;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.map_display);
    GoogleMap googleMap;
    googleMap = ((SupportMapFragment)(getSupportFragmentManager().findFragmentById(R.id.map))).getMap();
    LatLng latLng = new LatLng(-33.796923, 150.922433);
    LatLng latLngTwo = new LatLng(-33.101010, 150.101012);
    LatLng latLngThree = new LatLng(26.123456, 178.123456);
    googleMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);
    googleMap.setOnMarkerClickListener(this);
        myMarkerOne = googleMap.addMarker(new MarkerOptions()
            .position(latLng)
            .title("myMarkerOne")
            .snippet("myMarkerOne InfoWindow")
            .icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_AZURE)))
        myMarkerTwo = googleMap.addMarker(new MarkerOptions()
            .position(latLngTwo)
            .title("myMarkerTwo") 
            .snippet("myMarkerTwo InfoWindow")
            .icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_RED)));
        myMarkerThree = googleMap.addMarker(new MarkerOptions()
            .position(latLngThree)
            .title("myMarkerThree")
            .snippet("myMarkerThree InfoWindow")
            .icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_CYAN)));
    googleMap.getUiSettings().setCompassEnabled(true);
    googleMap.getUiSettings().setZoomControlsEnabled(true);
    googleMap.animateCamera(CameraUpdateFactory.newLatLngZoom(latLng, 10));   
}
@Override
public boolean onMarkerClick(final Marker marker) {
    // TODO Auto-generated method stub
    if (marker.equals(myMarkerOne))
    {
    setContentView(R.layout.viewone);
    }
    else if (marker.equals(myMarkerTwo))
    {
    setContentView(R.layout.viewtwo);
    }
    return true;
}
} 
```

我不知道我做错了什么。我需要设置多个标记以在单击时打开不同的 XML 布局。可以使用`OnMarkerClick`或`OnInfoWindow`单击来完成。我将第一个标记设置为打开或设置 contentview。 [这](https://stackoverflow.com/questions/14226453/google-maps-api-v2-how-to-make-markers-clickable)对我很有用，但我可能写错了。

else if 语句是一个测试但它不起作用导致第二个标记不会启动。如果您可以帮助回答这个问题，请提供示例代码和一个方法，如果我点击后退按钮，它会返回到地图。

# asp.net - ASP.net 敏感信息存储

> ID：14285914
> 
> 赞同：2
> 
> 时间：2013-01-11T20:12:14.620
> 
> 标签：asp.net, session, datatable, postback, hiddenfield

我在使用 ASP.net 时遇到了一个小问题。我有一个小的 DataTable，我需要依赖于页面并且用户无法访问。我的意思是：

> 1.  如果我将 DataTable 中的数据存储在 Hiddenfield 中，则 hiddenfield 取决于页面（多个相同页面请求的不同值），但它不是用户不可访问的，因为用户可以修改其内容然后回发。
>     
>     
> 2.  如果我将数据表存储在会话中，则用户无法访问（这很好），但由于页面中的某些内容取决于此值，如果用户多次打开页面（在不同的选项卡中），则会话将更新为如果发生回发，则请求的最后一页的内容以及因此“较旧”的页面不会正确呈现。

示例：取一个整数变量。这是敏感信息。我需要将此值保存到，以便用户无法修改它，并且每个页面也可以具有不同的值（与隐藏字段的工作原理相同）。我怎样才能做到这一点？谢谢！

PS：我正在使用带有 C# 的 ASP.net 4.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T20:15:17.533

为隐藏字段添加唯一键；使用此键访问特定于页面实例的唯一会话值。即使有人猜到了别人的唯一密钥，如果没有会话密钥，它也将毫无用处。

例子：

```
<input type="hidden" value="234092735029730" id="InstanceId" runat="server" /> 
```

在第一次呈现页面实例时生成此值：

```
if( !Page.IsPostback ){
    this.InstanceId.Value = GenerateKey().ToString();
} 
```

从特定于该页面的 Session 中检索值时：

```
string key = this.InstanceId.Value;
var value = Session[key]; 
```

要生成页面唯一 ID，可以使用以下方法：

```
using System.Security.Cryptography;

private static RNGCryptoServiceProvider _crypto = new RNGCryptoServiceProvider();

public static long GenerateKey(){
    byte[] bytes = new byte[8];
    _crypto.GetBytes( bytes );
    return BitConverter.ToInt64( bytes, 0 );
} 
```

请记住，会话不一定是 100% 安全的（例如[会话固定](http://en.wikipedia.org/wiki/Session_fixation)攻击），但它比将信息存储在发送给客户端的数据中要安全几个数量级。

# ios - 选定的 UIButton 图像

> ID：14285916
> 
> 赞同：0
> 
> 时间：2013-01-11T20:12:19.113
> 
> 标签：ios, uibutton

我需要切换图像（打开或关闭）。当我设置默认值（在界面生成器中）时，它可以工作，但是当我添加选定的图像时，什么也没有发生。

有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T18:01:26.050

刚刚添加了一个 UIButton 类来控制按钮的图像（UIButton 的自定义子类）

# iphone - 无法理解 iPhone 崩溃日志

> ID：14285917
> 
> 赞同：1
> 
> 时间：2013-01-11T20:12:26.100
> 
> 标签：iphone, ios

我有两个崩溃日志，我不明白其中的原因。两者几乎相同：

```
0   CoreFoundation                  0x382de3e2 __exceptionPreprocess + 158
1   libobjc.A.dylib                 0x3716a95e objc_exception_throw + 26
2   CoreFoundation                  0x382de302 +[NSException raise:format:] + 102
3   RogApp                          0x00101eea +[UAirship shared] (UAirship.m:320)
4   RogApp                          0x0012d3ea -[UAEvent addDataFromSessionWithKey:forKey:] (UAEvent.m:96)
5   RogApp                          0x0012d44a -[UAEvent addDataFromSessionForKey:] (UAEvent.m:100)
6   RogApp                          0x0012da1e -[UAEventAppExit gatherIndividualData:] (UAEvent.m:230)
7   RogApp                          0x0012d520 -[UAEvent gatherData:] (UAEvent.m:114)
8   RogApp                          0x0012d1a0 -[UAEvent initWithContext:] (UAEvent.m:57)
9   RogApp                          0x0012d1cc +[UAEvent eventWithContext:] (UAEvent.m:64)
10  RogApp                          0x00101e0a +[UAirship land] (UAirship.m:302)
11  RogApp                          0x0002ff34 -[RAAppDelegate applicationWillTerminate:] (RAAppDelegate.m:179)
12  UIKit                           0x3764fd9e -[UIApplication _terminateWithStatus:] + 130
13  UIKit                           0x3764c650 -[UIApplication _handleApplicationSuspend:eventInfo:] + 2200
14  UIKit                           0x375c229c -[UIApplication handleEvent:withNewEvent:] + 2464
15  UIKit                           0x375c1778 -[UIApplication sendEvent:] + 68
16  UIKit                           0x375c11ba _UIApplicationHandleEvent + 6194
17  GraphicsServices                0x3555f5f2 _PurpleEventCallback + 586
18  GraphicsServices                0x3555f222 PurpleEventCallback + 30
19  CoreFoundation                  0x382b33e2 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 30
20  CoreFoundation                  0x382b3386 __CFRunLoopDoSource1 + 134
21  CoreFoundation                  0x382b220a __CFRunLoopRun + 1378
22  CoreFoundation                  0x38225238 CFRunLoopRunSpecific + 352
23  CoreFoundation                  0x382250c4 CFRunLoopRunInMode + 100
24  GraphicsServices                0x3555e336 GSEventRunModal + 70
25  UIKit                           0x3761528c UIApplicationMain + 1116
26  RogApp                          0x0002f7fa main (main.m:17)
27  RogApp                          0x0002f774 0x2d000 + 10100RogApp 
```

之间

```
26  RogApp                          0x0002f7fa main (main.m:17) 
```

和

```
11  RogApp                          0x0002ff34 -[RAAppDelegate applicationWillTerminate:] (RAAppDelegate.m:179) 
```

我的代码没有任何调用

在 RAAppDelegate 我有：

```
- (void)applicationWillTerminate:(UIApplication *)application
{
    [UAirship land];
} 
```

那么为什么应用程序在前台终止时会终止？和系统条件有关吗？谢谢

# c# - linq 没有识别查询词

> ID：14285925
> 
> 赞同：0
> 
> 时间：2013-01-11T20:13:01.433
> 
> 标签：c#, .net, linq, razor, visual-studio-2012

我创建了一个用户控件，它应该在页面加载时基本上在我的表单中填充下拉列表，并在提交通过 linq 将信息提交到数据库后添加。

然而，我面临的问题是智能感知没有识别查询术语，例如我的用户控件中的位置和选择。任何指向我可能会丢失的东西？

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.Entity;
using System.Data.Linq;
using UmbracoProd.admin.code.Test;
using UmbracoProd.code;

namespace UmbracoProd.usercontrols.forms
{
    public partial class testCancellation : System.Web.UI.UserControl
    {
       private testhousingEntities canceldb = new testhousingEntities();       

        /*load form*/
        protected void Page_Load(object sender, EventArgs e)
        {
            if (!Page.IsPostBack)
            {
                InitializeForm();
            }            

        }   
        /*updating the database with new row of info */
        private void CreateEntry()
        {
            var date = DateTime.Today;
            var version = (from v in canceldb.CancellationVersions
                            where v.Active
                            select v).FirstOrDefault();

            if (version == null)
            {
              throw new NullReferenceException();
            }            

            //Try to create an entry for the database.  Upon failure, sends the exception to ThrowDbError();
            try
            {
                CancellationRequest cancel = new CancellationRequest();

                //cancel.Semester=ddlSemester.DataTextField.ToString();
                cancel.SubmitDate = date;
                cancel.StudentID = txtStudentId.ToString();
                cancel.FirstName = txtFirstName.ToString();
                cancel.MiddleName = txtMiddleName.ToString();
                cancel.LastName = txtLastName.ToString();
                cancel.AptBuilding = txtAptBuilding.ToString();
                cancel.AptNumber = txtAptNumber.ToString();
                cancel.PermAddress = txtPermAddress.ToString();
                cancel.PermCity = txtPermCity.ToString();
                cancel.PermZip = txtPermZip.ToString();
                cancel.PermState = ddlState.SelectedItem.ToString();
                cancel.Phone = txtPhone.ToString();
                cancel.Email = txtEmail.ToString();
                cancel.Reason = rbCancellation.SelectedItem.ToString();
                cancel.Other = txtOther.ToString();

                canceldb.CancellationRequests.Add(cancel);
                canceldb.SaveChanges();
            }
            catch (Exception oe)
            {
                ThrowDbError(oe);
            }
        }

        /*database exception error*/
        private void ThrowDbError(Exception oe)
        {
            canceldb.Dispose();
            Session.Contents.Add("FormException", oe);
            Response.Redirect("/DBError/", true);
        }

        protected void FormSubmit(object sender, EventArgs e)
        {
            try
            {
              CreateEntry();
            }
            catch (Exception oe)
            {
              ThrowDbError(oe);
            }
        }      
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T20:32:08.350

如果不是您缺少对 System.Linq 的引用，则可能是您有某种类型的对象，该对象的类型可以返回 AsQueryable()。如果它可以返回它，它将解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T20:16:19.633

您只需要添加`@using System.Linq`到每个视图的顶部吗？

# java - 向从模式生成的 JAXB 类添加额外的方法

> ID：14285928
> 
> 赞同：8
> 
> 时间：2013-01-11T20:13:09.513
> 
> 标签：java, jaxb

这是我的 XSD 文件的一个简单摘录

```
<?xml version="1.0" encoding="UTF-8"?>
<schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="ns"
    xmlns:tns="sns" elementFormDefault="qualified">

  <element name="document">
        <attribute name="title" use="required"/>
  </element>
</schema> 
```

我使用它`maven-jaxb2-plugin`来生成 Java 类。该类`Document`具有`getTitle()`返回`title`属性文本的方法。

我想添加一个额外的方法`Document`：

```
public String getStrippedTitle() {
   return getTitle().replaceAll("\\s+", "");
} 
```

我希望我的额外方法出现在未编组对象上（而不是我只是调用它或编写包装类），因为我想将顶级未编组对象传递给字符串模板并让它遍历调用我的子元素额外的方法。

我找到了[说明](http://jaxb.java.net/2.2.5/docs/release-documentation.html#compiling-xml-schema-adding-behaviors)，但他们告诉我在`Unmarshaller`我的（Mac OS X、Java 7）实现上设置一个属性似乎不支持任何属性。

我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T22:01:01.403

按照 Brian Henry 给出的链接，我发现我可以在我的模式文件中执行绑定自定义内联来做我想做的事。效果与 Brian 的解决方案完全相同，但不需要引用对`com.sun.xml.internal`.

首先，模式文件进行了一些修改：

```
<schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="ns"
    xmlns:tns="sns" elementFormDefault="qualified"
    xmlns:jaxb="http://java.sun.com/xml/ns/jaxb"
jaxb:version="2.0">

  <element name="document">
      <annotation>
          <appinfo>
              <jaxb:class implClass="DocumentEx" />
          </appinfo>
      </annotation>
      <attribute name="title" use="required"/>
  </element>
</schema> 
```

当模式被编译成 Java 代码时，生成的 ObjectFactory 将引用`DocumentEx`而不是`Document`. `DocumentEx`是我创建的一个类，如下所示：

```
public class DocumentEx extends Document {
   public String getStrippedTitle() {
       return getTitle().replaceAll("\\s+", "");
   }
} 
```

`Document`（我正在扩展的类）仍然由 schema-to-Java 编译器生成。现在，当我解组一个文档时，我实际上得到了一个 DocumentEx 对象：

```
 JAXBContext jaxbContext = JAXBContext.newInstance("com.example.xml");
    Unmarshaller unmarshaller = jaxbContext.createUnmarshaller();
    unmarshaller.setSchema(testSchema);
    DocumentEx doc = (DocumentEx)unmarshaller.unmarshal(xmlFile); 
```

[Oracle](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/2.0/tutorial/doc/JAXBUsing4.html#wp148576 "甲骨文文档")提供了一些（难以解析的）文档， [O'Reilly](http://onjava.com/pub/a/onjava/2003/12/10/jaxb.html?page=2 "奥莱利")提供了一些有用的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T20:37:49.397

您可以尝试更新您在链接文档中看到的属性名称。试试这个：

```
com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.FACTORY 
```

或者

```
"com.sun.xml.internal.bind.ObjectFactory" 
```

我想这会让你超越我认为你看到的 PropertyException。[这里](https://stackoverflow.com/questions/7552310/add-override-behavior-on-jaxb-generated-classes-by-extending-them)最彻底的答案表明这不能保证有效，但值得一试，因为你已经走了这么远。就我看来（不远）而言，源代码似乎支持此属性。

# algorithm - 给定一个最佳拟合大小的数组，告诉另一个数组中有多少元素可以被拟合（更多细节如下）

> ID：14285930
> 
> 赞同：9
> 
> 时间：2013-01-11T20:13:13.130
> 
> 标签：algorithm, data-structures

> 有一口老干井。它的侧面由混凝土环制成。每个这样的环都有一米高，但这些环可以有不同的（内）直径。然而，所有的环都以彼此为中心。井深N米；也就是说，里面有N个混凝土环。您即将将 M 个混凝土圆盘放入井中。每个圆盘厚一米，不同的圆盘可以有不同的直径。一旦每个磁盘掉落，它就会掉落，直到：
> 
> *   它撞到井底；
> *   它撞击一个内径小于圆盘直径的环；或者
> *   它击中了先前掉落的磁盘。（请注意，如果环的内径和圆盘的直径相等，则圆盘可以穿过环。）
> 
> 您将要掉落的圆盘已准备好，您知道它们的直径，以及井中所有圆环的直径。问题出现了：有多少磁盘可以放入井中？
> 
> 写一个函数：int fall_disks(int A[], int N, int B[], int M); 即，给定两个零索引的整数数组 - A，包含 N 个环的内径（按自上而下的顺序），B，包含 M 个圆盘的直径（按它们被丢弃的顺序） -返回将适合井的磁盘数。例如，给定以下两个数组：

```
 A[0] = 5    B[0] = 2
      A[1] = 6    B[1] = 3
      A[2] = 4    B[2] = 5
      A[3] = 3    B[3] = 2
      A[4] = 6    B[4] = 4
      A[5] = 2
      A[6] = 3 
```

> 该函数应该返回 4，因为除了最后一个磁盘之外的所有磁盘都可以放入井中。该图显示了丢弃四个磁盘后的情况。 ![在此处输入图像描述](../Images/685ec560b6433bba98a1e38373e27499.png)
> 
> 假使，假设：
> 
> *   N 是 [1..200,000] 范围内的整数；
>     *   M 是 [1..200,000] 范围内的整数；
>     *   数组 A 的每个元素都是 [1..1,000,000,000] 范围内的整数；
>     *   数组 B 的每个元素都是 [1..1,000,000,000] 范围内的整数。
> 
> 复杂：
> 
> *   预期的最坏情况时间复杂度为 O(N)；
>     *   预期的最坏情况空间复杂度为 O(N)，超出输入存储（不计算输入参数所需的存储）。
>     *   可以修改输入数组的元素。

我尝试使用堆栈并做某事，但我无法获得 O(n) 解决方案，即使经过我认为的一些优化，最坏的情况仍然是 O(n^2)。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-11T23:08:30.133

首先，您需要修改环的给定内径以填充不必要的间隙。假设你有一个内径`5`低于内径的环`2`。任何大小大于 的磁盘`2`都无法到达该环。所以我们可以将下环的内径改为`2`。基本上我们正在填补空白。

前：

![未填补的空白](../Images/67b683eaba22104d9404266a0479f644.png)

后：

![填补空白](../Images/bde794f86e9939b2c16b37f4399e1427.png)

使用以下算法：

1.  最小值 = A[0]
2.  我 = 1
3.  如果 i == N 则停止
4.  如果 A[i] < min 那么 min = A[i]
5.  如果 A[i] > min 那么 A[i] = min
6.  我++
7.  转到第 3 步

既然这些环已经形成了一个结构，其中每个下环的内径都小于或等于上环的内径，接下来的部分就相当简单了。我们将从底部开始插入磁盘。如果第一个磁盘适合​​最低的环，那么很好，否则我们继续移动到它上面的环，依此类推。您可以使用如下算法：

1.  我 = N-1
2.  j = 0
3.  如果 i < 0 或 j == M 则停止
4.  如果 A[i] >= B[j] 那么 j++
5.  一世 -
6.  转到第 3 步

变量的最终值`j`是所需的答案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T23:51:53.210

```
public static int falling_disks(int[] A, int[] B)
{
    int mymin = A[0];
    int nbDisk = 0;

    for (int i = 0; i < A.Length; i++)
    {
        if (A[i] < mymin) mymin = A[i];
        if (A[i] > mymin) A[i] = mymin;               
    }             

    for (int i = A.Length - 1; i >= 0; i--) 
    {
        if (B[nbDisk] <= A[i]) nbDisk++;
        if (nbDisk == B.Length) break;
    }           

    return nbDisk;
 } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-11T20:40:36.323

这实际上很容易。首先，您必须从井的顶部移除无法到达的空间（到目前为止将 A[x] 设置为最小值）。

![例子](../Images/a6b7e99dd4d8ea50b58ca18b34d43bad.png)

第二件事就是从井底取出合适的圆盘。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T15:48:40.787

一点优化......在O（N）中执行的一般解决方案上是正确的。

如果 B 阵列中第一个磁盘的值小于 A 阵列中的第一个直径，您可以立即返回 0 而无需执行 A 阵列的第一次调整（代表干井）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T20:38:44.693

想象一下，将易碎的周围材料连接到第一个圆盘上，该圆盘会在它下落时折断。

在数组 A[k] 中记录这个易碎圆盘到达深度 k 时的宽度。

这可以通过模拟第一个磁盘的下降在 O(n) 中完成。

对于下一个磁盘，我们要么降落在前一个磁盘上，要么停在较早的深度。当且仅当当前深度的 A[k] 小于下一个磁盘的大小时，我们才会停在较早的深度。

所以放置后续磁盘的算法是：

1.  将当前深度减少 1
2.  如果当前深度为 0，那么我们已经填满了井 STOP
3.  当 A[当前深度] 小于当前环的宽度时转到第 1 步
4.  移动到下一个环并转到第 1 步

当前深度在每个循环上都会递减，因此这需要 O(n) 步才能完成。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-26T08:56:27.717

```
 class Program
{
    static void Main(string[] args)
    {
        int []A= new int[] {5,6,4,3,6,2,3};
        int[] B = new int[] { 2, 3, 5, 2, 4 };
       // Array.Reverse(A);

        Program obj = new Program();
        obj.NoOfDisc(A,B);

    }

    public void NoOfDisc (int[] A, int[] B)
    {
        int i;
        int count= 0;
     int   n= (A.Length)-1;
     for (i = 0; i < A.Length; i++)
     {
         if (n >= 0)
         {

             if (B[i] < A[n])
             {
                 count = count + 1;
                 A[n] = B[i];
                 n = n - 1;
             }

             else
             {
                 i = i - 1;
                 n = n - 1;
             }
         }
     }

   Console.WriteLine(count);
   Console.ReadLine();
  // return count;
    }
} 
```

# asp.net - 如何编写产品喜欢的 sql 查询？

> ID：14285931
> 
> 赞同：0
> 
> 时间：2013-01-11T20:13:18.177
> 
> 标签：asp.net, sql, sql-server

我有一个以`ProductLike`字段`ProductId`、`UserId`和命名的表`Like`。当用户喜欢产品时，会在此表中添加一条记录，其中包含`UserId`和`ProductId`以及`Like`值（真或假）。我想获得拥有每种产品的用户列表或用户组。这是我迄今为止尝试过的，但它有错误。

```
SELECT  p.UserId,* 
FROM    ProductLike p WHERE p.ProductId =
        (SELECT pk.ProductId FROM ProductLike pk WHERE pk.ProductLike = 1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T20:20:10.933

您可以给表起别名并像这样加入：

```
SELECT p.ProductId,p.UserId,p2.UserId 
FROM ProductLike p 
JOIN ProductLike p2 ON p.ProductId = p2.ProductId
WHERE p.[Like]=1 AND p2.[Like]=1 
  AND p.UserId <> p2.UserId 
```

这将为您提供“喜欢”同一产品的所有用户的结果集。

**编辑**：如果您想获得多次被喜欢的所有产品的结果集，您可以这样做：

```
SELECT p.ProductId, COUNT(p.ProductId) 'Likes'
FROM ProductLike p 
WHERE p.[Like]=1 
GROUP BY p.ProductId
HAVING COUNT(p.ProductId) > 1 
```

# javascript - Angular JS Bootstrap 手风琴示例

> ID：14285932
> 
> 赞同：3
> 
> 时间：2013-01-11T20:13:20.443
> 
> 标签：javascript, twitter-bootstrap, angularjs

有没有人有一个很好的例子来说明 Accordian 的 Angular JS 实现（指令）与 Bootstrap 的结合？

有几个例子，没有一个很好用......

[https://github.com/angular-ui/bootstrap/tree/master/src/accordion](https://github.com/angular-ui/bootstrap/tree/master/src/accordion)

[https://github.com/ganarajpr/Angular-UI-Components](https://github.com/ganarajpr/Angular-UI-Components)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T21:57:46.323

所以，我推荐的实现是这个：[http ://angular-ui.github.com/bootstrap/#/accordion](http://angular-ui.github.com/bootstrap/#/accordion)

它来自旨在将所有 boostrap 组件重建为原生 AngularJS 指令的项目（这意味着不依赖于 jQuery，也不依赖于 bootstrap 的 JavaScript）。最重要的是，大多数指令都有可定制的模板，这意味着人们可以根据自己的喜好更改指令的外观和感觉。例如，这里是手风琴的模板：[https ://github.com/angular-ui/bootstrap/tree/master/template/accordion](https://github.com/angular-ui/bootstrap/tree/master/template/accordion)

**警告**：[http ://angular-ui.github.com/bootstrap/ 需要 AngularJS 的 1.0.3，但在](http://angular-ui.github.com/bootstrap/)[https://github.com/angular/angular.js/](https://github.com/angular/angular.js/commit/d6da505f4e044f8a487ac27a3ec707c11853ee0a)中修复了 1.0.3 中的错误[提交/d6da505f4e044f8a487ac27a3ec707c11853ee0a](https://github.com/angular/angular.js/commit/d6da505f4e044f8a487ac27a3ec707c11853ee0a)但尚未发布。在 1.0.4 发布之前，您可以使用 AngularJS 的错误修复版本的快照：http: [//code.angularjs.org/snapshot/](http://code.angularjs.org/snapshot/)

**免责声明**：我是这个项目的一部分，所以我对“设计”有偏见。

# bcrypt - 取消哈希/解密 phpass 密码

> ID：14285940
> 
> 赞同：0
> 
> 时间：2013-01-11T20:14:01.173
> 
> 标签：bcrypt, phpass

我在我当前的项目中使用 phpass 并且该项目的一部分处理密码检索，所以我想知道：是否可以使用 phpass 对密码进行哈希处理，该密码已使用 phpass 进行哈希处理，以便可以发送（通过电子邮件）或改变了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:31:20.207

不。

如果网站背后的任何人可以通过它的加密/散列方法找出用户的密码，那么您应该更改密码，停止使用该网站并告诉其他人也这样做。

*   我会将此作为评论而不是答案，但由于我没有足够的代表这样做，所以我会这样做；无论如何，这是一个非常合理的答案。

# asp.net-mvc - ActionFilter 未在基本控制器的方法级别触发...在类级别工作

> ID：14285942
> 
> 赞同：1
> 
> 时间：2013-01-11T20:14:20.773
> 
> 标签：asp.net-mvc, c#-4.0, asp.net-mvc-4, action-filter

MVC 4 我有一个操作过滤器，我只想将其应用于基本控制器中的 Index 和 Edit 方法，但是当我将其应用于 Index 和 Edit 方法时，操作过滤器不会触发。但是，如果我在班级级别应用过滤器，它确实有效。

基本控制器：

```
//[SetAreaControllerFilter]  <------ does fire here
    public class BaseControllerSingle<TRepository, TViewModelSingle> : BaseController

    [SetAreaControllerFilter]  <----- doesn't fire here
    public ActionResult IndexBase(TViewModelSingle viewModel, string pageTitle)
    {
        ViewBag.Header = pageTitle;
        return View(viewModel);
    } 
```

派生类调用基类：

```
public ActionResult Index()
        {
            ItemViewModel viewModel = _manageItemsAppServ.CreateNewViewModel(CurrentCompanyId);
            viewModel.DDLOptions = _manageItemsAppServ.CreateFilterOptionsViewModel(CurrentCompanyId);
            return base.IndexBase(viewModel, "Manage Materials");
        } 
```

动作过滤器：

```
public class SetAreaControllerFilterAttribute : ActionFilterAttribute, IActionFilter 

 {
      public override void OnActionExecuting(ActionExecutingContext filterContext)
      {
          //Set variable to be used by view and partials
           dynamic viewBag = filterContext.Controller.ViewBag;

           viewBag.AreaName = (string)filterContext.RouteData.DataTokens["area"]; //used by OTIS.Core.js to create links
           viewBag.ControllerName = (string)filterContext.RouteData.Values["controller"]; //used by Toolbar adn OTIS.Core.js to create links
      }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:51:01.037

好吧，似乎没有办法将过滤器应用于基本控制器中的操作。您需要在类级别或派生控制器类中的操作上应用它。这似乎不应该是这种方式，但没有人提供有效的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T21:37:30.700

首先，基本 ActionFilterAttribute 类已经实现了 IActionFilter 和 IResultFilter 接口，并且继承自 Filter 类。IActionFilter 我们是多余的。

现在，要回答您的问题，正在执行的操作以及应用过滤器的操作是索引。IndexBase 只是 ActionResult 类型的方法，而不是 Action。因此不会触发任何 ActionFilter。

只需将您的过滤器应用于索引。如果你想要一个全局过滤器，在 FilterConfig 中注册它：

```
public class FilterConfig
{
    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new HandleErrorAttribute());
        filters.Add(new SetAreaControllerFilter());
    }
} 
```

# javascript - VB.net WebBrowser1 从 javascript on call 中获取价值

> ID：14285943
> 
> 赞同：0
> 
> 时间：2013-01-11T20:14:22.793
> 
> 标签：javascript, dom, browser, webbrowser-control, domdocument

嘿，我在我的 VB 代码中有这个 javascript，用于检查播放器是否暂停或运行：

```
Dim isPlaying As String = WebBrowser1.Document.Window.DomWindow.execscript("player.states.isPlaying", "JavaScript") 
```

它执行时没有任何错误，但**usPlaying**的值为**Nothing**。

如果我这样做：

```
Dim isPlaying As String = WebBrowser1.Document.Window.DomWindow.execscript("alert(player.states.isPlaying)", "JavaScript") 
```

我得到一个弹窗说**假**或**真**，所以我知道它实际上调用了 javascript 并返回了正确的值。

我的问题是我需要能够将该返回值保存到我的**isPlaying**变量中，以便检查我的 VB 程序中的内容。

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T20:27:15.237

哇！我知道了 ：）

```
Dim isPlaying As Boolean = WebBrowser1.Document.InvokeScript("eval", {"player.states.isPlaying;"}) 
```

# java - Java - TableModelListeners 和 DataModelEvents

> ID：14285944
> 
> 赞同：1
> 
> 时间：2013-01-11T20:14:24.170
> 
> 标签：java, swing, tablemodel, abstracttablemodel, defaulttablemodel

我应该什么时候创建自己的 TableModelListeners 和 DataModelEvents？

我知道 a 和 的区别和`DefaultTableModel`用法 。`AbstractTableModel``TableModel`

我在许多在线 Java 示例中看到，在创建扩展 DefaultTableModel 和 AbstractTableModel 类的类（自定义模型）时，显式创建了 TableModelListeners 和 DataModelEvents。

这是我的理解：

1.  如果我正在扩展一个，`DefaultTableModel`那么这个模型已经知道如何创建 DataModelEvents 和 TableModelListeners（这样我就不必添加它们）监听/观察这些事件并且还知道通知 TableModelListeners。

2.  如果我正在扩展 AbstractTableModel，那么这个模型已经知道如何创建 DataModelEvents 和 TableModelListeners（这样我就不必添加它们）来监听/观察这些事件。但我必须显式调用 firetablechanged() 或类似方法来通知 TableModelListeners 事件。

3.  如果我正在实现一个 TableModel，那么这个模型已经知道如何创建 DataModelEvents，但**没有**任何 TableModelListeners（所以我必须添加它们）来监听/观察这些事件。而且我还必须显式调用 firetablechanged() 或类似方法来通知 TableModelListeners 事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T03:18:59.233

I defer to @mKorbel on `DefaultTableModel`, which is well suited to cases that can rely on its straightforward mutators. It is limited by the internal use of `Vector`, a supported but obsolescent `Collection` that carries (possibly) needless synchronization overhead.

`AbstractTableModel` offers much more [flexibility](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data) in exposing your application's data model to a `JTable` view. It should be used in cases for which `DefaultTableModel` is unsuitable.

Focusing on your question, `JTable` implements `TableModelListener`, and it listens to its own `TableModel`. An arbitrary number of *other* views can also listens to the same model; [`DisplayPanel`](https://stackoverflow.com/a/13919878/230513) is an example that listens to an `AbstractTableModel` named `CheckModel`. Your `TableModel` should fire a suitable `TableModelEvent` if it contains the data needed by your view(s) to update themselves. If not, you can define your own event *types* using the same `EventListenerList` mechanism used by `JTable`, described [here](http://docs.oracle.com/javase/7/docs/api/javax/swing/event/EventListenerList.html), and mentioned [here](https://stackoverflow.com/q/2159803/230513).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T21:51:46.743

1.  `DefaultTableModel`( `extends AbstractTableModel`)，默认情况下，所有通知程序 ( `DataModelEvents`) 都已正确实施，默认情况下必须仅覆盖可编辑的（`TableCellEditor`如果需要）和`Column Class`（在大多数情况下不需要）

2.  `AbstractTableModel`, 必须覆盖 all `required methods`，否则它们与 相比不起作用`DefaultTableModel`，并且仅适用于这些方法的实现方式，默认情况下，所有通知器 ( `DataModelEvents`) 也需要覆盖，否则`JTables view`不会显示正确或预期的值

3.  `DefaultTableModel`基于早熟（即使我在 中`Arrays`看到，也没有问题），允许实现各种没有任何限制（在具体数组 API 中实现）`HashMap``DefaultTableModel``AbstractTableModel``arrays types`

4.  通过 using`DefaultTableModel`是允许的一切，一切都是可访问的（在 API 中实现的方法），相比之下`AbstractTableModel`，

5.  `AbstractTableModel`是关于限制、修改、添加或覆盖方法，

6.  for`JTable`没有任何`XxxTableModel`定义 `DefaultTableModel`

# django - 为什么 django haystack spelling_suggestion() 总是 None

> ID：14285945
> 
> 赞同：1
> 
> 时间：2013-01-11T20:14:27.167
> 
> 标签：django, solr, django-haystack

我需要在 Django 应用程序中集成拼写检查机制。我发现 Haystack 有“拼写建议”的方法来使用它。所以我用 Django(1.4.1) 安装了 haysatck 的最新开发版本(2.0.0 beta)。

我已经下载了 apache-solr-3.6.0 并按照[doc](http://django-haystack.readthedocs.org/en/latest/installing_search_engines.html)中的方式进行了配置。

架构.xml

> ./manage.py build_solr_schema > solr-3.6.0/example/solr/conf/schema.xml

myapps/mysearch_index.py

```
from haystack import indexes

class MovieIndex(indexes.SearchIndex, indexes.Indexable):
    text = indexes.CharField(document=True,use_template=True)
    # other field definition
    suggestions = indexes.FacetCharField()

    def prepare(self, obj):
        prepared_data = super(NoteIndex, self).prepare(obj)
        prepared_data['suggestions'] = prepared_data['text']
        return prepared_data 
```

solrconfig.xml

```
<searchComponent name="spellcheck" class="solr.SpellCheckComponent">
    <str name="queryAnalyzerFieldType">textSpell</str>
    <lst name="spellchecker">
        <str name="name">default</str>
        <str name="field">suggestions</str>
        <str name="spellcheckIndexDir">./spellchecker</str>
        <str name="accuracy">0.7</str>
        <str name="buildOnCommit">true</str>
    </lst>
</searchComponent>
<requestHandler name="/spell" class="solr.SearchHandler">
    <lst name="defaults">
        <str name="spellcheck.dictionary">default</str>
        <str name="spellcheck.onlyMorePopular">false</str>
        <str name="spellcheck.extendedResults">false</str>
        <str name="spellcheck.count">1</str>
    </lst>
    <arr name="last-components">
        <str>spellcheck</str>
    </arr>
</requestHandler> 
```

设置.py

```
HAYSTACK_CONNECTIONS = {
  'default': {
    'ENGINE': 'haystack.backends.solr_backend.SolrEngine',
    'URL': 'http://127.0.0.1:8983/solr',
    'TIMEOUT': 60 * 5,
    'INCLUDE_SPELLING': True,
  },
} 
```

重启 solr 搜索引擎

```
cd examples/solr
java -jar start.jar 
```

重建索引

```
python manage.py rebuild_index
# 9905 entries indexed 
```

通过 django shell 进行测试

```
In [1]: from haystack.query import SearchQuerySet
In [2]: len(SearchQuerySet())
Out[3]: 9905
In [4]: sqs = SearchQuerySet().auto_query('spider')
In [5]: suggestion = sqs.spelling_suggestion()
In [6]: print suggestion
None
In [7]: 
```

我已经浏览了几个bolgs和论坛并尝试了很多设置，但是spelling_suggestion总是None。

谁能帮我？

感谢您阅读这篇文章

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:02:12.823

您必须在 solr 配置中为您的默认请求处理程序启用拼写检查。您在问题中提到的 haystack 文档中也提到了该步骤。

```
<requestHandler name="standard" class="solr.StandardRequestHandler" default="true">
    <arr name="last-components">
        <str>spellcheck</str>
    </arr>
</requestHandler> 
```

如果没有这样做，那么这应该解决它。如果您仍然遇到问题或此步骤也已完成，那么我认为您应该尝试直接在浏览器中查询 solr 以检查建议是否在那里工作，因为这将确保您的 solr 设置正确。

如果您仍然遇到问题，请告诉我，我会亲自尝试。

# powershell - 如何使用 Powershell 批量复制文件名中带括号的文件

> ID：14285947
> 
> 赞同：1
> 
> 时间：2013-01-11T20:14:41.910
> 
> 标签：powershell, brackets, copying

$基本上我想做的是：

我正在从包含我需要的文件列表的 .csv 电子表格中提取信息。问题是，他们所在的目录包含 16,000 多个文件！我只需要大约 4600 个（因为电子表格列只包含那么多）。我实际上已经弄清楚了代码的所有部分......但是我遇到问题的地方是当它到达我的代码的“复制项”部分时。它运行良好，直到它遇到文件名中包含括号的文件，所以它当然会抛出错误并且没有给我我需要的东西。我怎样才能解决这个问题？请注意，需要/正在复制的文件不能重命名。如果这是一个解决方案，我不确定如何在这里使用“-LiteralPath”。:( 下面是我的代码：

```
$Directory = gci D:\Documents\15075_32\
$Destination = "D:\CleanReview"
$ReviewSheet = import-csv 'C:\Users\7cm\Desktop\Internal Review - Emails Removed per Attorney Request.csv'
$BaseItem = foreach($li in $ReviewSheet){$li.Base}
foreach($File in $Directory){
    $File.BaseName
foreach($Item in $BaseItem){
    if($Item -like $File.BaseName){
        $Item
            Copy-Item $File.FullName $Destination -Force
}
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T20:54:55.807

如果您想通过重试文件的能力进行批量复制，我会考虑使用`robocopy`。如果您仍想使用 Copy-Item，请使用其`-LiteralPath`参数作为源路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:51:06.183

好的......经过谷歌的大量研究后，我发现即使在 PS V3 中进行了更正，即使使用 -LiteralPath 运算符，它仍然会在副本中使用通配符解释文件名。通过我自己的多次尝试，我发现 IF 语句中的操作员导致了这个错误。即使使用 -LiteralPath，它也在 IF 语句中，并且在条件为真时被遗忘。所以为了解决这个问题，然后让它在没有通配符解释的情况下读取文件名，我不得不将我的 -like 切换为 -eq 因为 -eq 不支持通配符。我遇到的下一个问题是 PS 一直报告它在 C 驱动器中查找时找不到文件！即使我这样做，它仍然会这样做 已经声明了目录，甚至在我在复制命令中使用速记声明之后！PS 似乎对此非常敏感，结果我发现完全按照脚本拼写出来才能达到我需要的结果！因此，回顾一下，我正在使用 csv 并读取其中一列，因为该列是不带扩展名的文件名列表。我将该列表与目录列表进行比较，当名称的列列表与目录中的基本名称匹配时...我需要将这些目录文件复制到 D 驱动器上的另一个文件夹中。这是我的工作代码！感谢 Keith Hill（上图），我开始以不同的方式看待它！谢谢你的帮助！结果，我发现从字面上完全拼出脚本才能达到我需要的结果！因此，回顾一下，我正在使用 csv 并读取其中一列，因为该列是不带扩展名的文件名列表。我将该列表与目录列表进行比较，当名称的列列表与目录中的基本名称匹配时...我需要将这些目录文件复制到 D 驱动器上的另一个文件夹中。这是我的工作代码！感谢 Keith Hill（上图），我开始以不同的方式看待它！谢谢你的帮助！结果，我发现从字面上完全拼出脚本才能达到我需要的结果！因此，回顾一下，我正在使用 csv 并读取其中一列，因为该列是不带扩展名的文件名列表。我将该列表与目录列表进行比较，当名称的列列表与目录中的基本名称匹配时...我需要将这些目录文件复制到 D 驱动器上的另一个文件夹中。这是我的工作代码！感谢 Keith Hill（上图），我开始以不同的方式看待它！谢谢你的帮助！并且当名称的列列表与目录中的基本名称匹配时...我需要它将这些目录文件复制到 D 驱动器上的另一个文件夹中。这是我的工作代码！感谢 Keith Hill（上图），我开始以不同的方式看待它！谢谢你的帮助！并且当名称的列列表与目录中的基本名称匹配时...我需要它将这些目录文件复制到 D 驱动器上的另一个文件夹中。这是我的工作代码！感谢 Keith Hill（上图），我开始以不同的方式看待它！谢谢你的帮助！

```
$Directory = gci -LiteralPath D:\Documents\15075_32\
$Destination = "D:\CleanReview\"
$ReviewSheet = import-csv 'C:\Users\7cm\Desktop\Internal Review - Emails Removed per Attorney Request.csv'
$BaseItem = foreach($li in $ReviewSheet){$li.Base}
foreach($File in $Directory){
foreach($Item in $BaseItem){
    if($Item -eq $File.BaseName){
        $Item
            Copy-Item -LiteralPath D:\Documents\15075_32\$File -Destination $Destination -Force
}
}
} 
```

# multithreading - perl 中的临界区

> ID：14285954
> 
> 赞同：0
> 
> 时间：2013-01-11T20:14:53.227
> 
> 标签：multithreading, perl, critical-section

是否可以在 perl 中进入临界区，以容纳其他线程并在单线程中进行一些计算？就像在 .NET 中一样：

```
lock(_syncRoot)
{
   // Single-threaded zone
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T20:27:49.700

是的，Perl 有锁和信号量。有关详细信息和示例，请参阅[有关线程的文档。](http://perldoc.perl.org/perlthrtut.html#Synchronization-and-control "影响力")

您的代码的 Perl 版本：

```
{
    lock($_syncRoot);
    # Single-threaded zone
} 
```

# jquery - 限制一组选择框以仅允许一个为特定值

> ID：14285957
> 
> 赞同：1
> 
> 时间：2013-01-11T20:14:54.323
> 
> 标签：jquery

使用 jQuery，我想以一种只有一个可以是“是”的方式制作一组选择框。因此，如果用户选择“是”，则所有其他都设置为“否”。

我以为我有有效的代码。不幸的是，我发现如果用户专门使用键盘进行导航，则代码在 Firefox 中不起作用。如果用户使用鼠标更改字段，它可以正常工作。澄清一下，0 是“否”的值。

这是功能：

```
function f_one(cls)
{
    $('.'+cls).filter('select').not('.'+cls+':focus').val('0');
} 
```

它在类似于以下内容的一组选择框的 onchange 事件中调用：

```
<select name="crrnt" id="crrnt" class="cAgo" onchange="f_one('cAgo')"> 
```

我还尝试让 onkeyup 事件模仿 onchange 事件。它也没有工作。当焦点丢失时，它实际上将字段设置回 0。

因此，任何有关修补代码或替换的建议都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T20:29:50.877

这对你有什么作用？[http://jsfiddle.net/s3QEK/2/](http://jsfiddle.net/s3QEK/2/)

```
$('select').on('change', function(){
  if(this.value === 'yes'){
    $('select[data-group="'+$(this).data('group')+'"]:not([name="'+this.name+'"])').filter(function(){
      return this.value === 'yes';
    }).val('no');
  }
}); 
```

# sql - SQL - 查询 - max(count())

> ID：14285958
> 
> 赞同：15
> 
> 时间：2013-01-11T20:14:54.347
> 
> 标签：sql, erd

我正在准备我的数据库系统考试（明天），但在要求我编写查询的练习中遇到了麻烦。这是一个例子：

![在此处输入图像描述](../Images/9ff8e7556d177c9ccd347a1ef84b28b8.png)

我被要求写一个查询来回答以下问题：在年龄最小的作者中，谁写的书最多？

问题是***我的老师禁止我在 FROM 子句中使用子查询，并使用 TOP***。

我已经写了一个答案，但我知道一个答案是不正确的：

```
SELECT W.AName, COUNT(W.ID_B) AS NBooks
FROM Write W, Author A1
WHERE (A1.AName = W.AName) AND
      (A1.AAge = (SELECT MIN(A2.Age)
                  FROM Author A2))
GROUP BY W.AName
ORDER BY NBooks DESC 
```

这个给出了所有年龄较小的作者，以及他们各自写的书数量（我希望..）。正确答案应该只是这一行的第一行。

让我说清楚：

```
Table Author
AName    | AAge
---------------
John     | 25
Rick     | 30
Sean     | 26
Lena     | 25

Table Writes
AName    | ID_B
---------------
John     | 2
Lena     | 1
John     | 3
Lena     | 4
Rick     | 5
Rick     | 6
Lena     | 6
Rick     | 7
Rick     | 8 
```

（注意 Sean 没有写任何书，第 6 本书有 2 个作者，而 Rick 是拥有最多书籍的作者 (4) ）

现在，我上面写的代码给出了这个结果（我猜）：

```
AName    | NBooks
-----------------
Lena     | 3
John     | 2 
```

（最低年龄是 25 岁，莉娜和约翰都是 25 岁）

问的是：

```
AName    | NBooks
-----------------
Lena     | 3 
```

（Lena 是作者，在所有年龄最小的作者中（25 岁），着书最多）

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T21:23:26.443

因为你是学生，所以我会回答部分问题。这是一个答案，忽略了最年轻的部分：

```
select a.AName, COUNT(*) as NumBooks
from Author a join
     Write w
     on a.AName = w.AName
group by a.AName
having count(*) >= all(select COUNT(*) as NumBooks
                       from write w
                       group by w.AName
                      ) 
```

我想你可以弄清楚如何修改它。

顺便说一句，我希望对`limit`and的限制`top`仅适用于这个例子。否则，你应该找另一位老师，因为这些都是非常重要的结构。

此外，您需要学习常规的连接语法，而不是`,`在`from`子句中。再一次，如果你的老师没有教现代语法（大约从 1988 年开始），那就换一个新老师。而且，我假设对子查询的限制也适用于 CTE。

我还想指出查询的“正确”版本：

```
select top 1 a.aname, count(*) as NumBooks
from Author a join
     Write w
     on a.AName = w.AName
group by author.name, author.Aage
order by author.Age asc, count(*) desc 
```

这个查询几乎在任何维度上都比上面的查询好。它做一个`join`，一个`group by`和一个排序。我的查询的完整版本`join`显式执行两个 s，`join`隐式执行两个 s（age 子句），以及两个`group by`s。前者将比后者有更好的性能。

从可读性的角度来看，这个版本更短更简洁。我还认为教它在做什么比第一个版本中的“不寻常”构造要容易得多。大多数学生会理解`top`和`order by`正在做什么，并且可以效仿。模仿该条款中发生的事情`having`需要一些心理体操。

如果要获取最大计数的所有作者，首先要意识到前面的查询相当于：

```
select aname, NumBooks
from (select a.aname, count(*) as NumBooks,
             row_number() over (partition by author.Name order by a.aAge, count(*) desc) as seqnum
      from Author a join
           Write w
           on a.AName = w.AName
      group by author.name, author.Aage
     ) aw
where seqnum = 1 
```

切换它以获取所有作者很容易：

```
select aname, NumBooks
from (select a.aname, count(*) as NumBooks,
             dense_rank() over (partition by author.Name order by a.aAge, count(*) desc) as seqnum
      from Author a join
           Write w
           on a.AName = w.AName
      group by author.name, author.Aage
     ) aw
where seqnum = 1 
```

这也比回答问题的查询更有效。不能`top`在子句中使用或子查询`from`就像在进行三足赛跑。是的，你可能会到达那里，但你会用自己的两条腿跑得更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T21:50:06.950

这是一些限制，但它可以利用它的创造力。

因此，您需要一位最年轻的作者，他所写的书籍数量高于（或等于）另一位最年轻作者所写的任何其他书籍数量……

```
SELECT
  [a1].[AName],
  [a1].[AAge],
  COUNT(*) AS [NBooks]
FROM [Author] [a1], [Writes] [w1]
WHERE 
  [a1].[AName] = [w1].[AName]
  AND [a1].[AAge] = (SELECT MIN([a2].[AAge]) FROM [Author] [a2])
GROUP BY 
  [a1].[AName],
  [a1].[AAge]
HAVING COUNT(*) >= ALL
  (SELECT
    COUNT(*) AS [NBooks]
  FROM [Author] [a3], [Writes] [w2]
  WHERE 
    [a3].[AName] = [w2].[AName]
    AND [a3].[AAge] = (SELECT MIN([a4].[AAge]) FROM [Author] [a4])
    AND [a3].[AName] <> [a1].[AName]
  GROUP BY 
    [a3].[AName],
    [a3].[AAge]) 
```

PS：不得不承认，我是`ALL`从[Gordon Linoff](https://stackoverflow.com/users/1144035/gordon-linoff)那里了解到的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T20:40:22.170

如果您只想要一个结果，请选择前一个结果，其余的应该由排序完成。我个人会做一个排名函数来使用 Aggregate() Over() 窗口函数显式地获得排名。但是，由于您正在学习，他们可能还不想提出这个问题并向您展示“顶部”是如何工作的。

```
declare @Person Table ( personID int identity, person varchar(8), age int);

insert into @Person values ('Brett', 34),('John', 34),('Peter', 52);

declare @Books Table ( BookID int identity, personID int);

insert into @Books values (1),(1),(1),(2),(2),(3)

Select top 1 -- TOP WILL LIMIT TO CHOICE YOU WANT BASED ON ORDER BY CLAUSE
    p.person
,   p.age
,   count(b.BookID) as cnts
from @Person p, @Books b
where p.personID = b.personID
group by p.person, p.age
order by age, cnts desc 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T21:03:26.540

如果您被允许使用 CTE 并对其进行排名，则很简单。

```
WITH cte 
     AS (SELECT a.aname, 
                A.aage, 
                Count(id_b)                             Book_Count, 
                RANK() 
                  OVER( 
                    ORDER BY a.aage, Count(id_b) DESC ) rn 
         FROM   author a 
                INNER JOIN writes w 
                        ON a.aname = w.aname 
         GROUP  BY a.aname, 
                   a.aage) 
SELECT aname, 
       Book_Count
FROM   cte 
WHERE  rn = 1 
```

[SQL小提琴](http://sqlfiddle.com/#!6/78dd9/75)

[演示约翰写另一本书的地方](http://sqlfiddle.com/#!6/52eb4/1)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-11T20:59:45.273

我知道您只想要 1 行结果；

您可以先限制作者，然后通过使用内部连接，您可以从 Write 表中检索他的姓名和书籍数量。

```
SELECT W.AName, COUNT(W.ID_B) AS NBooks
FROM Write W INNER JOIN Author A1 ON A1.AName = W.AName
WHERE 
A1.AName = (SELECT AName FROM Write GROUP BY AName ORDER BY COUNT(ID_B) DESC)
AND A1.AAge = (SELECT MIN(A2.Age) FROM Author A2)
GROUP BY W.AName
ORDER BY NBooks DESC 
```

# ruby - 使用 join/each ruby 连接变量

> ID：14285960
> 
> 赞同：0
> 
> 时间：2013-01-11T20:15:02.317
> 
> 标签：ruby, nokogiri

我试图弄清楚如何将一些 XML 变成一个很好的可读语句。我目前正在使用 Nokogiri，并在尝试执行以下操作时陷入困境：

我想转换以下内容：

```
<baz>
    <option id="foo">Hello</option>
    <option id="bar">World</option>
</baz> 
```

进入以下：

```
baz has options: 'Foo' = 'Hello', 'Bar' = 'World' 
```

我目前正在使用以下代码来实现这一点，但我觉得必须有更好的方式使用 join，我似乎无法弄清楚。

```
optText = "baz has options:"
baznode.xpath("option").each { |opt| 
   optText << "'#{opt.xpath("@id").text}' = '#{opt.text}', "
}
optText << args[0..-3] << "\n" 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T20:24:50.040

除了可能使用`collect`/之外，`join`我认为使用它并没有太大的好处。

```
opts = baznode.xpath("option").collect do |opt|
         "'#{opt.xpath("@id").text}' = '#{opt.text}'" }
       end.join(", ")
optText = "baz has options: #{opts} #{args[0..-3]}\n" 
```

我可能会将输出更改为更像：

```
baz has options:
  foo = bar
  plugh = xyzzy 
```

但这当然完全取决于您的需求。如果有很多选项，扫描一条线可能会有点困难，但如果不是，那么原件可能更容易在心理上解析。

如果您在整个地方都使用多个“事物”进行此操作，那么将其全部转换为 JSON/YAML 并转储它可能是有意义的，除非您想要*真正*人类可读的文本。

# mod-rewrite - 重写.htaccess

> ID：14285961
> 
> 赞同：0
> 
> 时间：2013-01-11T20:15:02.393
> 
> 标签：mod-rewrite

我想改变

/index.php?do=/pages/

到

/index.html?do=/pages/

我的代码不起作用

```
 RewriteCond %{THE_REQUEST} ^[A-Z]+\s([^\s]+)\.php?do=\s
      RewriteRule .* %1.html [R=301,L]
      RewriteRule ^(.*)\.html$ $1.php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T20:34:13.620

你可以这样做：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteCond %{REQUEST_URI} ^/([A-Za-z0-9_-.]*).php?do=(.*)
    RewriteRule .* /%1.html?do=%2 [R=301,L]
</IfModule> 
```

这应该匹配

```
everything.php?do=anything 
```

将其重写为

```
everything.html?do=anything 
```

# javascript - 获取视口两侧的纬度和经度

> ID：14285963
> 
> 赞同：22
> 
> 时间：2013-01-11T20:15:08.827
> 
> 标签：javascript, google-maps

> **可能重复：**
> [获取当前纬度边界？](https://stackoverflow.com/questions/7983234/get-current-latlng-bounds)

我正在寻找使用 Google 地图 API 获取地图视口的纬度和经度的最佳方式。理想情况下，我希望能够使用地图上下边界的纬度和两侧的经度。这个想法是找出可见地图的区域，并根据地图上当前可见的内容调整页面上的一些相关元素。地图的 API 中是否有处理此问题的函数？

谢谢，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-01-11T20:20:43.153

[`Map.getBounds()`](https://developers.google.com/maps/documentation/javascript/reference/3/map#Map.getBounds)给你[`LatLngBounds`](https://developers.google.com/maps/documentation/javascript/reference/3/coordinates#LatLngBounds)当前视口的。然后，您可以使用`LatLngBounds.getNorthEast()`和`LatLngBounds.getSouthWest()`获取东北（右上）和西南（左下）坐标[`LatLng`](https://developers.google.com/maps/documentation/javascript/reference/3/coordinates#LatLng)。进一步来说：

```
var lat0 = map.getBounds().getNorthEast().lat();
var lng0 = map.getBounds().getNorthEast().lng();
var lat1 = map.getBounds().getSouthWest().lat();
var lng1 = map.getBounds().getSouthWest().lng(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T20:21:03.203

[Map](https://developers.google.com/maps/documentation/javascript/reference?hl=pt-BR#Map)类`getBounds`的使用方法。

# javascript - 数据表sInfo在表为空时更改文本

> ID：14285966
> 
> 赞同：4
> 
> 时间：2013-01-11T20:15:19.767
> 
> 标签：javascript, jquery, datatables

好吧，我知道我可以这样更改文本：

```
"oLanguage": {
                "sInfo": 'Showing _END_ Sources.',
                "sEmptyTable": "No Sources found currently, please add at least one.",
} 
```

sInfo 属性更改了默认行为，并且工作正常。但是，当表为空时，sInfo 变为。

> 显示 0 到 0 个条目，共 0 个条目

这是不希望的，我希望对我的`sEmptyTable`属性有类似的消息，但特定于 sInfo，当它到达没有行时，它不会改变。我一直在阅读API，到目前为止我找不到任何参考资料，我想知道是否有其他人知道正确的方法。因为我能想到的唯一方法是在数据表 API 之外手动执行它，我很确定那只会给我某种形式的其他冲突。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-11T20:22:08.153

datatables 也有 oLanguage.sInfoEmpty 它将为您提供所需的内容。

[http://datatables.net/ref](http://datatables.net/ref)

```
"oLanguage": {
    "sInfo": 'Showing _END_ Sources.',
    "sInfoEmpty": 'No entries to show',
    "sEmptyTable": "No Sources found currently, please add at least one.",
} 
```

# batch-file - FOR /F 没有分配最后一个值

> ID：14285967
> 
> 赞同：1
> 
> 时间：2013-01-11T20:15:42.323
> 
> 标签：batch-file, cmd

今天是 11/01/2013

我有以下 .bat 文件：

```
@ECHO OFF
:: Take the output from DATE and assign it to variable today
FOR /F "tokens=* delims=/" %%i IN ('DATE /T') do SET /A today=%%i

ECHO %today%
PAUSE 
```

它输出：11

如果我告诉 FOR 遍历 3 个标记，然后输出结果变量：它不应该给我 '2013' 值，因为它是分配给 %%i 的最后一个标记吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T20:18:19.963

您将获得三个令牌。试试这个，它只会提取第三个令牌。

```
FOR /F "tokens=3 delims=/" %%i IN ('DATE /T') do SET /A today=%%i 
```

请参阅[/f 参考](http://ss64.com/nt/for_f.html)以了解其工作原理。循环一次在一行上工作，并按指定的分隔符将其拆分。

> FOR /F 文本文件的处理包括读取文件，一次一行文本，然后将行分解为称为“令牌”的单独数据项。

在这种情况下，您正在执行一个命令，但这被视为读取文件：

> 文本字符串将被视为文件中的单行输入，该字符串必须用双引号括起来（或使用 usebackq 的单引号）。

`DATE /T' 命令是一个单独的行，分为三个元素。

# hibernate - JPA 2.0 + 一对一 + 未设置共享主键

> ID：14285968
> 
> 赞同：1
> 
> 时间：2013-01-11T20:16:07.507
> 
> 标签：hibernate, jpa-2.0, one-to-one, hibernate-4.x

必须有两个表 Customer 和 Upload，我在其中跟踪客户上传的项目数量。它与共享主键是一对一的关系，共享主键`CustomerID`是唯一标识符。我正在努力让保存工作。我正在使用 Hibernates uuid2 策略来处理唯一标识符的创建/保存。在我包含上传实体之前，客户将使用 uuid 正确保存。基本上，我希望在有人制作客户对象时创建上传。

**顾客：**

```
@Entity
public class Upload implements Serializable {
    @Column(name="UPLOADCOUNT",    nullable=true,  unique=false)
    private Integer uploadCount = new Integer(0); 

    @MapsId ("CUSTOMERID")
    @OneToOne (optional=false)
    @JoinColumn(name="CUSTOMERID", referencedColumnName = "CUSTOMERID", nullable=false,  unique=true ) 
    private Customer customer;  

    @Id 
    @Column(name="CUSTOMERID", length=36, nullable=false, unique=true, insertable=false, updatable=false)
    private String customerId_;

     public Upload(Customer customer) {    
         this.customer = customer;
     }
} 
```

**上传：**

```
@Entity
public class Customer implements Serializable {

    @Id
    @Column(name = "CUSTOMERID", unique = true)
    @GeneratedValue(generator = "uuid")
    @GenericGenerator(name = "uuid", strategy = "uuid2")
    private String customerId;

    @OneToOne(mappedBy = "customer", optional = false, cascade = CascadeType.ALL)
    private Upload upload ; 

    public Customer() {
        this.upload = new Upload(this);        
    }
} 
```

**要保存的代码：**

```
Customer customer = new Customer();
EntityManager em = EntityManagerUtil.getEntityManager();
EntityTransaction trans = em.getTransaction();

trans.begin();
em.persist(customer);
trans.commit(); 
```

**例外：**

```
 javax.persistence.PersistenceException: org.hibernate.id.IdentifierGenerationException: ids for this class must be manually assigned before calling save(): Upload 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T20:24:43.267

而不是`@JoinColumn`你可以试试这个：

```
@PrimaryKeyJoinColumn(name="CUSTOMERID", referencedColumnName="CUSTOMERID") 
```

更多细节[在这里](http://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#Example_OneToOne_id_annotation)

或另一种可能的解决方案：像这样更新您的`Upload`课程。

```
@Id 
@Column(name="CUSTOMERID", length=36, nullable=false, unique=true, insertable=false, updatable=false)
@GeneratedValue(generator=”foreign”) 
@GenericGenerator(name=”foreign”, strategy = “foreign”, parameters =    {@Parameter(name=”property”, value=”customer”)})
private String customerId_; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-28T06:26:00.237

## 创建自生成 UUID 相关实体的重要一点是将 UUID 设置为 null 值。

如果我们对 uuid 进行硬编码，例如，一个 UUID.randomUUID ()，我们将得到一个类似于以下的 fk 错误`PSQLException: null value in column "second_table_uuid" violates not-null constraint`

创建对象时，请确保相关实体的构造函数的默认值为 null。如果它是包含 B 的实体 A，则只需要 B 的 uuid 中的空值，而不是 A 的空值。但以防万一，除非您已经知道 fk，否则您可以将空值放入所有 UUID。

另一个重要的事情是使用`@JoinColumn`而不是`@PrimaryKeyJoinColumn`，这也会产生错误。

我附上了我制作的代码片段。

```
@Entity
@Table(name = "parent")
data class Parent(
        @Id
        @GeneratedValue
        @Column(name = "parent_uuid")
        val parentUUID: UUID? = null,

        @OneToOne(cascade = [CascadeType.ALL])
        @JoinColumn(name = "child_uuid", referencedColumnName = "child_uuid")
        var child: Child
) {
        constructor() : this(child = Child())
}

@Entity
@Table(name = "child")
data class Child(
        @Id 
        @GeneratedValue 
        @Column(name = "child_uuid") 
        val childUUID: UUID? = null,

        @Column(name = "name") 
        val name: String,
) {
        constructor() : this(name = "")
} 
```

并且组合将在 UUID 中留下隐含的空值。

```
val child = Child(name = "test")
val parent = Parent(child = child) 
```

总帐

# php - 对数组中找到的每个 ID 运行单独的查询

> ID：14285972
> 
> 赞同：0
> 
> 时间：2013-01-11T20:16:43.507
> 
> 标签：php, mysql, arrays

尝试对数组中的项目运行第二个查询。首先，我创建了一组用户信息，然后对于每个用户，我需要在答案表中查询他们的答案。

这个想法是让数组拥有来自第一个查询的数据，然后简单地将来自答案的数据添加到相关的用户元素。下面的代码仅列出第一个系统。

我一直很不愿意在这里发布我的问题，但是我的一整天都被这个消耗了，而且我没有得到任何快速的地方。提前为我明显有缺陷的方法道歉。

```
 Array
(
    [0] => Array
        (
            [fname] => asdf
            [lname] => asdf
            [minitial] => a
            [rank] => MAJ
            [uniq] => !s5$qn

            [sysName] = System 1 Name
            [choice] = The choice for This named system
            [priority] = The priority 
            [termcom] = The termcom

            [sysName] = System 2 Name
            [choice] = The choice for This named system
            [priority] = The priority 
            [termcom] = The termcom

            [sysName] = System 3 Name
            [choice] = The choice for This named system
            [priority] = The priority 
            [termcom] = The termcom

   [1] => Array
        (
            [fname] => asdf
            [lname] => lkjlkj
            [minitial] => i
            [rank] => oiuoi
            [uniq] => @z26dr

            [sysName] = System 1 Name
            [choice] = The choice for This named system
            [priority] = The priority 
            [termcom] = The termcom

            [sysName] = System 2 Name
            [choice] = The choice for This named system
            [priority] = The priority 
            [termcom] = The termcom

            [sysName] = System 3 Name
            [choice] = The choice for This named system
            [priority] = The priority 
            [termcom] = The termcom

        ) 
```

//代码

```
$sql = "SELECT fname, lname, minitial, rank, uniq FROM `user` join answers on answers.uniqid = user.uniq";
$data = mysqli_query($con, $sql) or die("MySQL ERROR: ". mysqli_error($con));

$users = array();
$i = 0;

while ($row = mysqli_fetch_array($data, MYSQL_ASSOC))
{
    $users['answers'][$i] = array (
        "fname" => $row['fname'], 
        "lname" => $row['lname'], 
        "minitial" => $row['minitial'], 
        "rank" => $row['rank'], 
        "uniq" => $row['uniq']
     );

    $query2 = "SELECT a.sysid, s.sysName, uniqid, choice, priority, termcom FROM answers a LEFT JOIN systems s ON s.sysID = a.sysid WHERE a.uniqid = '" . $row['uniq'] . "'";
    $data2 = mysqli_query($con, $query2);

    while ($row2 = mysqli_fetch_array($data2, MYSQL_NUM))
    {       
        $users['answers'][$i]['sysName'] = $row2[1];
        $users['answers'][$i]['choice'] = $row2[3];     
    }

    $i++;
} 
```

提前感谢您提供的任何见解。

编辑：这是返回的阵列，每个用户只列出第一个系统。

```
[2] => Array
        (
            [fname] => asdf
            [lname] => lkjlkj
            [minitial] => i
            [rank] => oiuoi
            [uniq] => @z26dr
            [sysName] => Super Terminate System
        )

    [3] => Array
        (
            [fname] => Juuu
            [lname] => kjuuu
            [minitial] => k
            [rank] => LTC
            [uniq] => gthdz%
            [sysName] => Super Terminate System
        ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T21:12:57.113

好的，您并没有确切地知道运行脚本时会发生什么（问题是什么）。但是当我看到你的 coude 时，我可以假设出了什么问题。

首先，我认为你也可以通过查询来做到这一点：

```
$sql = "SELECT * FROM `user` 
        join answers on answers.uniqid = user.uniq
        LEFT JOIN systems s ON s.sysID = a.sysid"; 
```

希望这会有所帮助。除此以外：

在您的第二个查询中存在问题。我认为你应该改变：

```
$query2 = "SELECT a.sysid, s.sysName, uniqid, choice, priority, termcom FROM answers a LEFT JOIN systems s ON s.sysID = a.sysid WHERE a.uniqid = '" . $row['uniq'] . "'"; 
```

到

```
$query2 = "SELECT a.sysid, s.sysName, s.uniqid, s.choice, s.priority, s.termcom FROM answers a LEFT JOIN systems s ON s.sysID = a.sysid WHERE a.uniqid = '" . $row['uniq'] . "'"; 
```

S。选择之前 = s.choice

# java - 带线程的异步函数

> ID：14285973
> 
> 赞同：1
> 
> 时间：2013-01-11T20:16:48.433
> 
> 标签：java, multithreading, jvm, java-5

我偶然发现了一个我不清楚的问题。

> A. 使用 Java 1.4，将以下函数包装在一个线程中，以便可以异步调用它，并提供一种稍后检索返回值的方法：
> 
> B. 在 Java 5 中如何做同样的事情

```
int someMethod(int i) { return i++; } 
```

我认为是解决方案之一：编写一个具有两个公共方法的类`void synchronized calculate(int i)`和`int getValue()`. `calculate`启动线程并设置一个私有变量。

在 java 1.5 中，我可以使用 AtomincInteger。这是一个答案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T20:21:00.820

在 Java 1.5 中，我很确定您会使用 a[`Future`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Future.html)返回结果。我不确定 1.4 的等价物，但看起来[这个问题](https://stackoverflow.com/q/4473784/4794)涵盖了相同的领域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:16:53.280

让`calculate()`方法将结果放入 a 中`BlockingQueue queue`，然后`getValue()`方法调用`queue.take()`，从而等待结果尚未计算的情况。

`getValue()`如果可以多次调用该方法，请注意额外的编程工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T07:50:24.040

Mybe您可以使用双重检查锁定`1.5 or later`：

```
private volatile int privateValue = 0;

public void calculate(int i) {
    int result = getValue(i);
    if (privateValue != result) {
        synchronized (this) {
            if (privateValue != result) {
                privateValue = result;
            }
        }
    }

}

public int getValue(){
    return privateValue;
} 
```

确保您的 privateValue 必须声明为`volatile`.

[有关双重检查锁定](https://stackoverflow.com/questions/1625118/java-double-checked-locking)的更多信息。

[“双重检查锁定被破坏”声明](http://www.cs.umd.edu/~pugh/java/memoryModel/DoubleCheckedLocking.html)。

# ios5 - 在上下文之间移动对象时 iOS coredata objectWithID 中的错误

> ID：14285974
> 
> 赞同：1
> 
> 时间：2013-01-11T20:16:49.603
> 
> 标签：ios5, core-data, nsmanagedobject, nsmanagedobjectcontext

我正在使用核心数据观察 iOS 中的一个奇怪错误。基本上，我的设置如下 - 有 2 个 NSManagedObjectContexts`tempContext`和`mainContext`. 我将`tempContext`其用作创建和编辑实体的临时“便签本”，当我想保存它们时，我将其移至`mainContext`保存。请注意，`mainContext`它不是 的父级`tempContext`。

移动发生如下 -

```
[1] newEntity.property1 = @"SomeProperty";
    newEntity.managedObjectContext // this is tempContext currently
[2] saveEntityInTempContext
[3] newEntity = (Entity *)[mainContext objectWithID:newEntity.objectID];
[4] [mainContext insertObject:newEntity]; 
```

现在，在插入 [4] 之后，如果我检查`newEntity.property1`，它被设置为`nil`。但是，如果我在 [3] 之后检查属性，然后在 [4] 之后检查该属性，它会正确显示为“SomeProperty”。我不明白强制故障在这里应该如何产生影响。

我的目标只是将实体从一个上下文移动到另一个上下文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T00:25:38.073

我不确定直接原因是什么，但几乎可以肯定这是一个不必要的步骤的奇怪副作用，实际上没有任何意义。我有点惊讶你在最后一步没有得到异常。

具体来说，步骤#4 是完全没有必要的。完成第 3 步后，您将拥有一个从`mainContext`. 那时你不需要做更多的事情。`insertObject`调用您刚刚从同一托管对象上下文中查找的对象是没有意义的。

假设`tempContext`并`mainContext`使用相同的持久存储协调器，则此对象的生命周期在您的步骤中按如下方式进行：

1.  `newEntity`已创建但未保存。`tempContext`知道`newEntity`但数据存储不知道（当然`mainContext`也不知道）。
2.  保存后，数据存储有一条记录`newEntity`。`newEntity`的对象 ID 更改为永久值。
3.  由于您的`objectWithID:`调用， 的实例`newEntity`被替换为通过`mainContext`. 它的属性与您在步骤 1 中创建并在步骤 2 中保存到数据存储区的属性相匹配，因为它们是从数据存储区加载的。
4.  调用`insertObject`没有任何目的 - 因为`newEntity`您在第 3 步中获得的新内容是从 查找的`mainContext`，这意味着`mainContext`已经知道它。这是我预期的例外。没有异常发生，但调用仍然没有意义。

所以，我会放弃第 4 步并完成它。

# iphone - 实例化子控制器

> ID：14285981
> 
> 赞同：0
> 
> 时间：2013-01-11T20:17:14.710
> 
> 标签：iphone, ios, xcode

我有 1 个父控制器和 1 个视图控制器。我已经成功地执行了`addChildViewController`和`transitionFromViewController`函数来利用 iPhone SDK 提供的 Containment API。然而，在我真正将视图控制器传递给这些函数之前，我有几个问题

**问题 1**：在 ParentVC`ViewDidLoad`方法中，我必须使用以下方法实例化所有 4 个子视图控制器

`UIViewController* child = [self.storyboard instantiateViewControllerWithIdentifier:identifier];`

**或者** `self.myViewController = [[MyViewController alloc] init];`

**问题 2**：假设我最初没有在我的`ViewDidLoad`...中实例化所有 4 个子视图，每次我在使用`addChildViewController`执行转换之前添加一个新的子视图`transitionFromViewController`时，我是否需要实例化我想要添加的子 VC？

**问题 3 ：在问题 1 和/或问题 2 的答案为“是”的情况下，关于****内存管理**必须做些什么。对于问题 1，当从子 VC 导航回父 VC 时，似乎意味着将创建 4 个子视图控制器的新对象，对吗？在查看问题 2 时，当进行转换时，通常情况下，似乎每次都会创建子视图控制器对象的新副本。从本质上讲，在父子视图之间以及子视图和子视图之间的一些转换之后，这个应用程序可能会变得非常臃肿。

**问题4**：什么时候`transitionFromViewController`被调用，内存中发生了什么？在父子转换中父 VC 会发生什么？在子-子转换中子 VC 会发生什么？

[更新：此特定教程](http://seanquinlan.com/2012/05/25/creating-a-container.html)中的以下引用似乎涉及我的一些担忧（强调添加）：

> 请注意，这`self.storyboard`不是通过`init`电话设置的。目前，还没有放置此初始化代码的好地方。一种选择是覆盖`setStoryboard:`，另一种是`viewDidLoad`. 这两个选项的问题是您**应该保护`addChildViewController:` 调用以确保视图控制器不会被实例化两次。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T20:30:40.287

1.  不，如果您不想，您不需要实例化自定义容器视图控制器中的所有子项`viewDidLoad`。如果你愿意，你可以，但你不必。如果您愿意，可以以即时的方式实例化它们。

2.  您不仅需要实例化 before `transitionFromViewController`，而且显然也需要 before `addChildController`。

3.  如果您选择预先实例化所有视图控制器，则各个控制器创建的成员对象取决于您在这些控制器中如何处理它，因此无法抽象地回答这个问题。但这可能是学术性的，因为您知道您不必一次实例化所有潜在的孩子。

4.  `transitionFromViewController`不会影响控制器消耗的内存。哪些控件将是控制器的实例化（并将其添加到`addChildViewController`）以及`removeFromParentViewController`您可能与`transitionFromViewController`.

# c# - 如何为我的每个项目程序集维护一个共享的 AssemblyFileVersion 和单独的 AssemblyVersions？

> ID：14285985
> 
> 赞同：0
> 
> 时间：2013-01-11T20:17:37.123
> 
> 标签：c#

我正在使用链接的 AssemblyInfo.cs 文件为我的所有类库设置 AssemblyFileVersion。

```
[assembly: AssemblyFileVersion("6.60.3.4")] 
```

我将本地/默认 AssemblyInfo.cs 文件用于其他所有内容。

```
//example of AssemblyVersion set in project AssemblyInfo.cs    
[assembly: AssemblyVersion("6.60.3.1")] 
```

我的结果是 AssemblyFileVersion 和 AssemblyVersion 都设置为 AssemblyFileVersion 值。

如何为我的每个项目程序集维护一个共享的 AssemblyFileVersion 和单独的 AssemblyVersions？

**编辑**

我的印象是我可以/应该使用 AssemblyFileVersion 来跟踪我项目中所有 dll 程序集的发布版本。我们的想法是让 exe 和 dll 都具有相同的 AssemblyFileVersion。仅当对该特定 dll 进行修改时，AssemblyVersion 才会增加。这个逻辑对我来说很有意义。请告知是否有更合乎逻辑的方法来处理大型项目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T04:00:57.370

以下帖子，[AssemblyVersion、AssemblyFileVersion 和 AssemblyInformationalVersion 有什么区别？](https://stackoverflow.com/q/64602/299327), 建议您反其道而行之。

[这个答案](https://stackoverflow.com/a/14835/299327)提供了一个可以适应您的需求的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T20:26:09.250

据我所知，没有简单的解决方案。我认为最简单的解决方案是首先单独构建您的类库，然后让其他构建依赖于此。一般来说，试图操纵 AssemblyInfo 文件中的值是徒劳的。

你可以模仿像 TeamCity 这样的系统。他们通过提取所有源代码，然后在实际构建之前使用 Web UI 中提供的版本号编辑 AssemblyInfo 文件来做到这一点。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-15T17:26:43.123

我的问题是正确的，但我想知道我是否被误导了一点。我正在使用 Windows 文件属性对话框来确认我的 ProductVersion 和 FileVersion 设置是否正确。

我将以下内容添加到我的共享 AssemblyInfo.cs 文件中，它开始按预期工作。

```
[assembly: AssemblyVersion("6.60.0.0")]    
[assembly: AssemblyInformationalVersion("6.60.0.0")] 
```

任何想法为什么这会更新 AssemblyVersion 而不仅仅是这个

```
[assembly: AssemblyVersion("6.60.0.0")] 
```

# azure - 在 Azure 网站中设置自定义页面“站点不可用”？

> ID：14285987
> 
> 赞同：4
> 
> 时间：2013-01-11T20:17:47.947
> 
> 标签：azure, azure-web-app-service

有没有办法在站点离线时定义自定义 HTML 页面或重定向到另一个站点，而不是使用通用的[站点不可用页面](http://www.azurewebsites.net/SiteUnavailable.htm)？

我看到网站离线的两个原因：

*   管理员在 Azure 门户中将其停止
*   或：站点已达到其资源配额（例如在“免费”或“共享”模式下）。

首先，我~~理解~~接受可能性是有限的。但对于第二个，我想为我的用户设置一个特定的消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T20:24:37.613

您可以在故障转移模式下使用[Azure 流量管理器](https://azure.microsoft.com/documentation/articles/traffic-manager-overview/)，但这仅适用于云服务，不适用于网站。还有其他 DNS 服务提供商，如 DynDNS，提供类似的功能。

当然，这在免费模式下不起作用，因为无论如何您都不能拥有自定义域。

# grails - Grails 数据库在每次重新编译时都会被清除

> ID：14285991
> 
> 赞同：0
> 
> 时间：2013-01-11T20:18:09.113
> 
> 标签：grails, grails-orm, h2

我有一个 Grails 项目，其中开发环境使用内存 H2 数据库：

```
dataSource {
    dbCreate = "create"
    url = "jdbc:h2:mem:devDb;MVCC=TRUE;LOCK_TIMEOUT=10000"
} 
```

我可以运行应用程序（使用 run-app）并将一些东西放入数据库中（例如，使用脚手架控制器）。现在，如果我对源文件进行更改，Grails 会检测到更改，重新编译类，然后……清除数据库！

我尝试在 JDBC URL 中使用`file`而不是`mem`，但行为是相同的。我发现避免这种情况的唯一方法是设置`dbCreate`为`"update"`而不是`"create"`，但这也不是我想要的，因为我在应用程序的 中加载了一个夹具`BootStrap`，所以当应用程序重新启动时，我最终得到了我的夹具的多个副本。

所以问题是：如何防止 Grails 在重新编译类时重新创建数据库——或者，当它清除数据库时重新加载我的固件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T20:35:16.880

[这里](https://stackoverflow.com/questions/12138815/how-to-avoid-loss-of-db-when-changing-grails-domain-class-in-development)有一个类似的“问题” 。

每当您对域类进行更改时，Grails 都会重置数据库。

通常你的域类不应该经常改变，所以这不是一个大问题。只需按照 MVC 模式将逻辑放入控制器和服务中即可。然后尝试一次性完成所有待处理的域类更改。

# entity-framework - EF5 代码优先 Azure 部署后现场出错

> ID：14285994
> 
> 赞同：0
> 
> 时间：2013-01-11T20:18:29.453
> 
> 标签：entity-framework, azure, asp.net-mvc-4, entity-framework-5, web-deployment

我正在尝试在 Azure 上部署 MVC4 EF5 代码优先应用程序。发布后，我在网站上收到此错误：

> 错误。处理您的请求时发生错误。

我猜那是因为没有在数据库中创建表？

我的连接字符串：

```
Data Source=tcp:6666666.database.windows.net,1433;Initial Catalog=eatart_db;User Id=kasperskov@6666666;Password=yourmother 
```

我在配置中启用了自动迁移，并在部署时执行它：

```
internal sealed class Configuration : DbMigrationsConfiguration<EatArt.Models.EatArtDb>
{
        public Configuration()
        {
            AutomaticMigrationsEnabled = true;
        }
} 
```

在我的 Application_Start (global.asax) 中：

```
Database.SetInitializer(new DropCreateDatabaseIfModelChanges<EatArtDb>()); 
```

还。此通知在我的 azure 门户上弹出：

> 服务器在检索指标时遇到错误。重试操作。

我在这里想念什么？我做错什么了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T20:49:47.743

我对 EF 也有类似的问题。我的方法是从`DropCreateDatabaseIfModelChanges`使用迁移转向使用迁移。[这是一篇关于代码优先迁移](http://msdn.microsoft.com/en-us/data/jj591621.aspx)的有用文章

将您的行更改`DropCreate`为：

```
Database.SetInitializer(new MigrateDatabaseToLatestVersion<EatArtDb, Configuration>()); 
```

您已经启用了自动迁移，但没有在初始化程序中使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T15:39:33.333

正如 Ben Tidman 建议的那样，我在包管理器控制台中将 Update-Database 命令运行到 Azure 数据库上。这触发了表的创建，我能够立即部署页面视图。

附言。当然必须添加`Trusted_Connection=false`和`encrypt=true`连接字符串..

# asp.net - 防止 ASP.NET 中的浏览器缓存问题和测试

> ID：14285995
> 
> 赞同：1
> 
> 时间：2013-01-11T20:18:40.237
> 
> 标签：asp.net, internet-explorer, caching

一些使用 IE8 的用户正在获取缓存内容，我将以下代码段添加到我的 global.asax.cs 以强制他们的浏览器获取新内容：

```
 HttpContext.Current.Response.Cache.SetAllowResponseInBrowserHistory(false);
  HttpContext.Current.Response.Cache.SetCacheability(HttpCacheability.NoCache);
  HttpContext.Current.Response.Cache.SetNoStore();
  Response.Cache.SetExpires(DateTime.Now);
  Response.Cache.SetValidUntilExpires(true); 
```

假设普通用户对修改 IE 中的缓存设置一无所知，我如何测试我的更改是否有效？

当我在我的计算机上运行同一个浏览器时，我不确定为什么他们会遇到缓存问题（获取过时的内容）？（作为一个天真的程序员我是呵呵）

**另外，我想确保我没有清除他们的 cookie 或阻止他们的 cookie 被存储等。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T20:21:38.943

强制重新下载文件（防止缓存）的最安全、最可靠的方法是将唯一标识符、时间戳或版本号附加到 URL。

事实上，对于我的项目，我通常会指示客户端缓存*大多数*资源（某些异步/数据请求和/或包含敏感信息的内容除外），除非“指示”重新下载，这是通过增加版本号来完成的。

# android - Android 共享首选项未保存

> ID：14285996
> 
> 赞同：0
> 
> 时间：2013-01-11T20:18:56.137
> 
> 标签：android, sharedpreferences, preferenceactivity

我的应用程序中有非常简单的首选项页面：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
   <CheckBoxPreference
       android:key="autoCheck"
       android:title="@string/autoCheckLbl"
       android:defaultValue="true"
       android:summary="@string/autoCheckDesc" 
    />   
</PreferenceScreen> 
```

此设置文件由自定义 PreferenceActivity 管理，它只执行以下操作：

```
public class SettingsActivity extends PreferenceActivity
{
    protected void onCreate(Bundle savedState) 
    {
        super.onCreate(savedState);

        addPreferencesFromResource(R.xml.settings);
    }
} 
```

问题是，当用户进行一些更改时，即选中/取消选中该设置，似乎该更改没有保存。例如，当用户导航回主要活动时，我正在其中检索*autoCheck*设置的当前值，这样：

```
boolean autoCheck = PreferenceManager.getDefaultSharedPreferences(this).getBoolean("autoCheck", true); 
```

...检索到的值不是用户先前设置的值。只有在重新启动 Android 模拟器后，才能正确设置新值。

# php - 用 PHP 选择 MySQL 表的最后一行

> ID：14285998
> 
> 赞同：-4
> 
> 时间：2013-01-11T20:18:57.257
> 
> 标签：php, mysql

下面的代码从我的表中选择最后 10 行，但以相反的顺序输出它们，因为它是降序的。我该如何扭转呢？我需要在 PHP 中交换数组还是可以通过 SQL 语句来完成？

```
$result = mysql_query("SELECT * FROM chat ORDER BY ID DESC LIMIT 10") ; 
```

那么我该如何交换它，以便从我选择的 10 行中首先获得最近的行？这更像是交换结果而不是获取最后 10 行的情况，我的代码就是这样做的......

固定的：

```
mysql_query("SELECT * FROM (SELECT * FROM chat ORDER BY ID DESC LIMIT 10) chat ORDER BY ID"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T20:20:36.270

```
SELECT * FROM (SELECT * FROM table_name ORDER BY ID DESC LIMIT 10) t ORDER BY ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T20:22:33.360

您可以使用 PHP 函数`array_reverse`，如下所述：http: [//de3.php.net/manual/de/function.array-reverse.php](http://de3.php.net/manual/de/function.array-reverse.php)