# StackOverflow 问答 13582000-13582999

# mysql - 选择所有部门中薪水最高的所有员工

> ID：13582000
> 
> 赞同：1
> 
> 时间：2012-11-27T10:18:44.443
> 
> 标签：mysql

在其中一次采访中，有人问我以下问题

“写一个查询，找出所有部门的所有员工，该部门的工资最高的部门名称，员工姓名和他的工资”

也就是说，employee 表有 100 条记录，department 表有 10 条记录。所以它需要从查询中给我 10 条记录，加上如果任何部门都没有员工，它仍然需要显示该部门名称。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T10:41:41.153

在没有看到表结构的情况下，我会说您可能可以通过几种不同的方式来做到这一点。

使用`IN`子句：

```
select e.name e_name,
  d.name d_name,
  e.salary
from employee e
inner join department d
  on e.deptid = d.id
where e.salary in (select max(salary)
                   from employee
                   group by deptid); 
```

或使用子查询：

```
select e1.name e_name,
  d.name d_name,
  e1.salary
from employee e1
inner join
(
  select max(salary) salary, deptid
  from employee
  group by deptid
) e2
  on e1.salary = e2.salary
  and e1.deptid = e2.deptid
inner join department d
  on e1.deptid = d.id 
```

参见SQL Fiddle [with Demo](http://sqlfiddle.com/#!2/40cc1/10)

现在，MySQL 允许您应用聚合函数，而不是将 a 应用`GROUP BY`到选择列表中的非聚合字段（这不能在 sql server、oracle 等中完成）。所以你可以用来得到相同的结果：

```
select e.name e_name,
  d.name d_name,
  max(e.salary) salary
from employee e
inner join department d
  on e.deptid = d.id
group by d.name 
```

参见[SQL fiddle with Demo](http://sqlfiddle.com/#!2/40cc1/12)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T10:46:53.827

```
Table "emp" has 
id, name,d_id,salary
and Table "department" has 
id, dname 
```

字段。

下面的查询将输出带有部门名称的最高薪水

```
 SELECT  E.id,
            E.name,
            D.dname,
            max(E.salary) as higest_salary 
    FROM `emp` as E 
            left join department as D 
    on D.id=E.d_id 
    group by E.d_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T10:44:14.603

此查询为您提供部门列表，如果存在，则具有该部门的最高薪水，否则为 null。在这种情况下，选择员工姓名不会为您提供正确的姓名，而只会返回链接部门中的第一个员工！

```
SELECT 
  d.name, 
  MAX(e.salary)
FROM 
  department d 
LEFT OUTER JOIN employee e ON (e.department_id = d.id)
GROUP BY d.id 
```

参见[SQL Fiddle](http://sqlfiddle.com/#!9/c18e7/51)

如果您想要一份薪水最高的部门列表和员工姓名：

```
SELECT 
  d.name, 
  e.name, e.salary
FROM 
  department d 
LEFT OUTER JOIN employee e ON (e.department_id = d.id)
WHERE e.salary IN (
  SELECT MAX(em.salary) FROM employee em 
  WHERE em.department_id = d.id
); 
```

参见[SQL Fiddle](http://sqlfiddle.com/#!9/c18e7/15)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-04T09:06:04.283

对于 SQL Server 2008 不是最佳解决方案……但完全可以处理从 Oracle 10G 迁移的 HR 数据库

![以下代码结果的屏幕截图](../Images/3782ab3e081cf37cbd617405e6d08475.png)

```
select e.DEPARTMENT_ID,d.MaxSalary,es.FIRST_NAME,dm.MinSalary,esd.FIRST_NAME
from EMPLOYEES e
 join (select department_id,MAX(salary) MaxSalary from EMPLOYEES group by DEPARTMENT_ID) d
on e.DEPARTMENT_ID=d.DEPARTMENT_ID
 join (select first_name,DEPARTMENT_ID from EMPLOYEES ess where SALARY in (select MAX(salary) from EMPLOYEES where DEPARTMENT_ID=ess.DEPARTMENT_ID)) es
on e.DEPARTMENT_ID=es.DEPARTMENT_ID
 join (select department_id,min(salary) MinSalary from EMPLOYEES group by DEPARTMENT_ID) dm
on e.DEPARTMENT_ID=dm.DEPARTMENT_ID
 join (select first_name,DEPARTMENT_ID from EMPLOYEES ess where SALARY in (select min(salary) from EMPLOYEES where DEPARTMENT_ID=ess.DEPARTMENT_ID )) esd
on e.DEPARTMENT_ID=esd.DEPARTMENT_ID
group by e.DEPARTMENT_ID,d.MaxSalary,es.FIRST_NAME,dm.MinSalary,esd.FIRST_NAME 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-08-11T06:47:57.233

从分组中选择`empname`,MAX( `salary`)`employee``dep_id`

以上查询将生成准确的结果。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-02-16T17:40:32.653

从emp中选择ename，其中薪水在（按部门从emp组中选择max（salary））；

# tridion - 内容管理器中的 Tridion 模板不可访问

> ID：13582003
> 
> 赞同：0
> 
> 时间：2012-11-27T10:18:51.100
> 
> 标签：tridion, tridion-2011

当尝试访问 Tridion 内容管理器中的模板时，它显示错误

`“Unable to get template types with id:#number”.`

内容管理器中的模板也无法访问

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T13:55:34.030

看起来您在 Tridion.ContentManager.config 文件中定义了无法加载的模板类型。也许您卸载了某些东西并且配置文件尚未更新 - 或者您恢复了旧配置，该配置引用了不再安装的模板类型。

无论哪种方式，在配置中查找确切的 ID 都会告诉您它是哪种类型 - 您可能可以从那里弄清楚。如果它不在默认的 Tridion 安装中并且您不需要它们，请随意删除该行或将其注释掉。那应该摆脱错误。

# amazon-s3 - Lucene.Net 自定义目录实现的最佳实践和测试用例

> ID：13582005
> 
> 赞同：1
> 
> 时间：2012-11-27T10:18:55.480
> 
> 标签：amazon-s3, lucene.net, azure-storage

我对 Lucene.Net 比较陌生，对于什么是可靠的生产级可扩展性实现仍然缺乏良好的判断，特别是对于自定义目录。目前，我正在考虑实现 Azure 和 S3 自定义目录。尽管有人可能会建议采用[现有的 AzureDirectory](http://azuredirectory.codeplex.com/ "现有的 AzureDirectory")实现，[但建议](https://stackoverflow.com/questions/13222479/how-to-implement-lucene-net-search-on-azure-webrole/13223048#13223048)它不具备生产质量。另外，它没有任何单元测试，所以当 Lucene 或 Azure Storage Library 更新时，没有可靠的方法来调整和测试 API。我试图从 Lucene.Net 代码库中辨别出一个测试套件，但似乎目录测试分散在整个测试项目中，并且没有简单的方法可以做到这一点。

话虽如此，您能否就以下问题提出建议：

1.  实现自定义目录的最佳实践是什么？
2.  确保实施的生产质量的基本测试用例是什么？
3.  为了在索引增长和搜索请求数量增加时实现扩展，必须满足任何性能指标？

# android - ArrayAdapter 在滚动时丢失了一些信息

> ID：13582008
> 
> 赞同：0
> 
> 时间：2012-11-27T10:19:00.037
> 
> 标签：android, android-arrayadapter

我在这里真的很困惑。我在创建活动时填写了我的 ArrayAdapter。它充满了简单的物体。在对象的参数中，我在适配器的 getView() 方法中使用了一个布尔值。这是有关的部分：

```
MedicalExamination object = getItem(position); //object is acquired at the begining of getView()

if (!object.isResultAvalible()) 
  viewHolder.attachment.setVisibility(View.GONE); 
```

当我上下滚动列表几次时，resultAvalible 布尔值开始变化（？！）。关于对象的其他信息没有变化，我在那里保存了几个字符串，这些字符串显示在列表单元格的 TextViews 上。列表保持原样......除了这个布尔参数会改变并使我的 ImageView（附件）消失。

我的 bolean 参数是私有的，甚至没有设置它的方法。唯一的方法是它的蜜蜂集在构造函数中。

我不知道发生了什么，请对此有所帮助。

由于请求，我的自定义适配器代码：

```
private class ExaminationsAdapter extends ArrayAdapter<MedicalExamination> {
    private int resource;

    public ExaminationsAdapter(Context context,
            List<MedicalExamination> objects) {
        super(context, R.layout.examinations_list_item, objects);
        resource = R.layout.examinations_list_item;
    }

    class ViewHolder {
        public TextView examinationsNames;
        public TextView date;
        public ImageView attachment;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = convertView;
        ViewHolder viewHolder;
        MedicalExamination object = getItem(position);

        if (view == null) {
            LayoutInflater inflater = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = inflater.inflate(resource, null, true);
            viewHolder = new ViewHolder();
            viewHolder.examinationsNames = (TextView) view.findViewById(R.id.examinations_item_title);
            viewHolder.date = (TextView) view.findViewById(R.id.examinations_item_date);
            viewHolder.attachment = (ImageView) view.findViewById(R.id.examinations_item_attachment);

            view.setTag(viewHolder);
        } else {
            viewHolder = (ViewHolder) view.getTag();
        }

        if (object == null) {
            return view;
        }

        viewHolder.examinationsNames.setText(object.getExaminationsNames());
        viewHolder.date.setText(object.getDate());

        if (!object.isResultAvalible()) 
            viewHolder.attachment.setVisibility(View.GONE);

        setOnListTouchListener(view);
        return view;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:28:56.817

You need to take in consideration that you could have a recycled view on your hands(one for which the view may be hidden from where this row was used), so:

```
if (!object.isResultAvalible()) {
    viewHolder.attachment.setVisibility(View.GONE);
} else {
    // revert the image status to the default
    viewHolder.attachment.setVisibility(View.VISIBLE);
} 
```

# c# - 在 C# 中打开声音控制 (OSC)

> ID：13582013
> 
> 赞同：3
> 
> 时间：2012-11-27T10:19:12.003
> 
> 标签：c#, libraries, osc

我为我的 iPod Touch 购买了 TouchOSC 应用程序，因为我认为在 c# 中找到一个使用 osc 协议的库会很容易。我想使用 c# 开发一个应用程序，但还没有找到。有人会知道在 c# 中做 osc 的任何好的库吗？我发现了一些提到 c++ 库的主题。如果不存在 c# 库，我可以使用 c++ 库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:59:06.333

试试这个，我不知道你是否会在这个库中找到你需要的东西。 [http://opensoundcontrol.org/implementation/osc-net-v1-2](http://opensoundcontrol.org/implementation/osc-net-v1-2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T20:48:44.917

luvtechno.net 有一个 osc 开源实现（这个网站现在似乎关闭了）。

[你可以在这里](https://github.com/vvvv/vvvv-sdk/tree/develop/common/src/core/Utils/OSC)找到源代码

广泛使用它并且效果非常好（如果您需要一个示例，请告诉我，但它应该非常易于使用）。

# installshield-le - 在 Visual Studio 2012 中生成单个 exe InstallShield 2012 限量版

> ID：13582017
> 
> 赞同：13
> 
> 时间：2012-11-27T10:19:26.230
> 
> 标签：installshield-le

我在 Visual Studio 2012 中使用 InstallShield Wizard 春季限量版。我想知道如何在 installshield 中生成一个 .EXE 安装程序文件，我现在得到两个 ini 文件、一个 cab 文件、一个 msi 文件和一个 exe文件。

谢谢你

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-13T06:47:22.037

右键单击解决方案并选择“配置管理器...”。比针对安装项目设置“SingleImage”配置选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-31T08:59:52.527

对于其他阅读此具有多个版本且没有“SingleImage”配置的人。

进入 Releases，选择 Release(s) 并将“Compression”设置为“Compressed”，这会将版本压缩为单个 exe

# c# - 从拆分字符串中删除数组中的重复元素

> ID：13582022
> 
> 赞同：0
> 
> 时间：2012-11-27T10:19:30.410
> 
> 标签：c#, arrays, string, list

我有一个关于从数组列表中删除重复项的问题。我想连接两个表中的两个字符串，然后拆分它。将一个表中的字符串与其他表进行比较，如果存在重复，则将其删除。我用这段代码做到了，但我问是否有另一种更快更短的方法来做到这一点？

表格1：`String a = "abc"`

表2：`String b = "def,abc,okl"`

结果：`"abc,def,okl"`

我的代码：

```
foreach(DataRow tr in transM.Rows)
{
    foreach(DataRow tb in tableDGV1.Rows)
    {
        if (tr["ID"].ToString() == tb["ID"].ToString())
        {
            string trMitter = tr["Tr"].ToString() + "," + tb["Tr"].ToString();
            string[] trSplit = trMitter.Split(new char[] {','}, StringSplitOptions.RemoveEmptyEntries);
            List<string> listTr = new List<string>(trSplit);

            for (int k = 0; k < listTr.Count; k++)
            {
                for (int g = k + 1; g < listTr.Count; g++)
                {
                    if (listTr[g].ToString() == listTr[k].ToString()) listTr.RemoveAt(g);
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:25:00.090

我您使用的是 .Net V 3.5 或更高版本，您可以简单地使用

```
var firstSource = firstString.Split(','); 
var secondeSource = secondString.Split(',');
var result = firstSource.Union(secondSource);` 
```

或使用`.Distinct()`：

```
foreach(DataRow tr in transM.Rows)
{
    foreach(DataRow tb in tableDGV1.Rows)
    {
        if (tr["ID"].ToString() == tb["ID"].ToString())
        {
            string trMitter = tr["Tr"].ToString() + "," + tb["Tr"].ToString();
            string[] trSplit = trMitter.Split(new char[] {','}, StringSplitOptions.RemoveEmptyEntries);

            IEnumerable<string> noDuplicate = trSplit.Distinct();              

        }
    }
} 
```

或者更多的 Linqish 风格：

```
var noDuplicate = from DataRow row1 in transM.Rows
                  from DataRow row2 in tableDGV1.Rows
                  where row1["ID"].Equals(row2["ID"])
                  let array1 = row1["tr"].ToString().Split(',', StringSplitOptions.RemoveEmptyEntries)
                  let array2 = row2["tr"].ToString().Split(',', StringSplitOptions.RemoveEmptyEntries)
                  select array1.Union(array2).Distinct(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:51:55.620

您可以使用：[Enumerable.Union](http://msdn.microsoft.com/en-us/library/bb341731.aspx)，它使用默认的相等比较器生成两个序列的集合并集。

```
 string[] id1 = { "abc" };
        string[] id2 = { "def", "abc", "okl" };

        IEnumerable<string> both = id2.Union(id1);

        foreach (string id in both)
            Console.WriteLine(id); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T10:34:25.623

您可以首先创建一个包含所有元素的列表，对列表进行排序并删除重复项。这里有一个相关的问题：[Remove duplicates from array](https://stackoverflow.com/questions/9673/remove-duplicates-from-array)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T10:31:23.873

我怀疑最大的性能损失是在表行的循环上。
您可以使用此优化查询（如果 ID 列是主键）

```
foreach(DataRow tr in transM.Rows)
{
    string idValue = tr["ID"].ToString();
    DataRow[] foundRows = tableDGV1.Select("ID = " + idValue);
    if(foundRows.Length == 1)
    {
       // Here you have the internal row to join with the external one
        string joinedString = tr["Tr"].ToString() + "," + foundRows[0]["Tr"].ToString();
        string[] trSplit = joinedString.Split(new char[] {','}, 
                           StringSplitOptions.RemoveEmptyEntries);
        List<string> listTr = trSplit.Distinct().ToList();                        
        .........
    }
} 
```

这将删除内部表上不必要的循环

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T10:45:18.663

[`Enumerable.Union()`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.union.aspx)方法删除重复项：

```
var items1 = new[] { "abc" };
var items2 =  "def,abc,okl";

var splitItems2 = items2.Split(',');

var result = 
    items1.Union(splitItems2) // Removes duplicates
    .ToArray(); 
```

# css - 为什么 Firefox 在我的 CSS 形状下方显示阴影？

> ID：13582026
> 
> 赞同：1
> 
> 时间：2012-11-27T10:19:38.513
> 
> 标签：css, firefox, stylesheet, css-shapes

我在我的网站上使用了一个三角形，如[http://css-tricks.com/examples/ShapesOfCSS/所示](http://css-tricks.com/examples/ShapesOfCSS/)

可悲的是，当有点拉伸时，这不能在浏览器中正确显示。

我的代码

```
div.triangle {
    width:0px;
    height:0px;
    border-left: 55px solid transparent;
    border-right: 55px solid transparent;
    border-top: 15px solid #D5CDBA;
} 
```

[http://jsfiddle.net/mPSj9/5/](http://jsfiddle.net/mPSj9/5/)

使 Firefox 在形状下方产生一些较暗的线条。为什么会这样，我可以摆脱它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T10:23:13.557

不是阴影，是颜色，是因为`border-left, border-right`颜色

[**演示**](http://jsfiddle.net/mPSj9/6/)

CSS

```
div.main-link-active-triangle {
    position:absolute;
    top:50px;
    left:50px;
    width:0px;
    height:0px;
    border-left: 55px solid transparent;
    border-right: 55px solid transparent;
    border-top: 55px solid #D5CDBA;
} 
```

[**宽度 背景颜色**](http://jsfiddle.net/mPSj9/11/)

几个例子：[CSS三角形自定义边框颜色](https://stackoverflow.com/questions/9450733/css-triangle-custom-border-color)

正如@Aleks Dorohovich 所说，您可以使用[**rgba()**](http://jsfiddle.net/mPSj9/12/) CSS3 属性并使边框不透明，但是（注意：不适用于 <= IE8）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T10:28:26.387

尝试将*透明*属性更改为不透明度为 0的*rgba*

例如：

```
border-left: 55px solid rgba(255,255,255,0);
border-right: 55px solid rgba(255,255,255,0); 
```

# wpf - WPF-MVVM：从 viewModel 显示模态窗口

> ID：13582034
> 
> 赞同：0
> 
> 时间：2012-11-27T10:20:14.067
> 
> 标签：wpf, mvvm, unity-container, mvvm-light

我（仍然）通过一个小项目学习 MVVM，我有一个问题：

我的窗户上有一个按钮，这个按钮在 ViewModel 上启动一个命令。viewModel 必须使用“OpenFileDialog”来知道必须打开哪个文件。我正在为 DI 使用 Unity。

问题是我应该在参数中给出“Windows”以确保打开文件对话框是模态的（打开openFile时用户无法使用该界面）。

但是在 viewModel 中，我无权访问“Windows”对象，那么正确的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:24:58.003

只需传递`bool`给指示窗口是否为模态的接口方法，并根据该变量在视图侧打开模态或非模态对话框

# iphone - 无法添加或升级 iAd.framework

> ID：13582043
> 
> 赞同：0
> 
> 时间：2012-11-27T10:20:40.807
> 
> 标签：iphone, xcode4, frameworks, iad, adwhirl

我已经为 Iphone 应用升级了 AdWhirl。到目前为止一切都很好，除了 AdWhirl 适配器与 iAd 有问题。我推断这是因为我链接了一个太旧的 iAd 框架。自 XCode 3.x 以来，我没有在应用程序中升级 iAd.framework。

我从 Build Phases/Link Libraries with Binary 中删除了 iAd.framework，希望能够从 XCode 4 链接新框架。

但它不在列表中，如果我选择其他... 在硬盘上找不到该框架。我打开 XCode .mpkg 看看它是否存在，但它不存在。

我发现了类似的问题，但它们要么适用于其他框架，要么建议将其设为可选。当然，这并不能保证将 iAd 广告放入我的应用程序中，而且无论如何我不能将其设为可选，因为我一开始就无法将其添加到列表中。

就像我升级了其他广告框架一样，我想升级 iAd 框架。我从哪里获得 iAd 框架？

# jquery - jquery ui自动完成打开事件未触发

> ID：13582044
> 
> 赞同：0
> 
> 时间：2012-11-27T10:20:42.490
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

我正在使用 jQuery UI 自动完成插件。

一切正常，但我想在最后添加一个框，上面写着“查找更多结果”。

我正在尝试使用内置`open`事件将框附加到`<ul>`opens 中，但该事件永远不会触发（自动完成列表打开并且功能齐全，唯一的问题是 open 事件永远不会触发。）

我的代码如下所示：

```
 $( "#q" ).autocomplete({
            source: function(request, response) {
                var results = $.ui.autocomplete.filter(userFriends, request.term);
                response(results.slice(0, 4));
            },
            minLength: 2,
            appendTo: '.searchbox',
            select: function (event, ui){
                window.location.href = '/u/'+ ui.item.value;
                return false;
            },
            focus: function (event, ui) {
                return false;
            },
            open: function (event, ui){
                console.log("AutoComplete Opened");
            }
        })

        .data('autocomplete')._renderItem = function(ul, item) {
            return $('<li>')
                .data('item.autocomplete', item)
                .append(
                '<a>' +
                    '<div>' +
                    '<div><img src="' + item.img + '" alt="" width="50" onerror="onErrorFixProfileImage(this)"/></div>' +
                    '<div>' + item.label + '</div>' +
                    '</div>' +
                    '</a>'
            )
            .appendTo(ul);
        }; 
```

有谁知道这个事件不会触发的原因？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:42:01.107

作为测试，您是否尝试过在插件初始化之外绑定事件？例如：

```
$( "#q" ).on( "autocompleteopen", function( event, ui ) {
    console.log("AutoComplete Opened");
} ); 
```

# 编辑

您可以尝试在其他事件中阻止默认值，而不是返回 false：

```
select: function (event, ui){
    window.location.href = '/u/'+ ui.item.value;
    event.preventDefault();
},
focus: function (event, ui) {
    event.preventDefault();
}, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T09:58:40.703

更新较晚，我安装了一个名为 jquery.dimensions 的插件，它导致 jquery-ui 方法出现许多问题。删除它解决了问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T10:52:52.317

我已经测试了一个简化的自动完成添加你的`open`方法。它工作正常，并且消息在控制台中正确写入：

```
(function(){
    var aTags = ['java', 'javascript', 'actionscript', 'typescript', 'jscript', 'vbscript'];
    $('#tags').autocomplete({
        delay: 50
        , source:aTags
        , select: function(event, data){
            var $p = $('<p></p>').html(data.item.value).css({'display': 'inline-block', 'background-color': '#a0a0a0', 'color': '#ff0000'});
            $(event.target).after($p);
        }
        , open: function (event, ui){
            console.log("AutoComplete Opened");
        }
    });
})()​ 
```

[演示](http://jsfiddle.net/xG7nR/1/)。

# java - 在 Java 中读取几列 Excel(.xls) 文件

> ID：13582046
> 
> 赞同：0
> 
> 时间：2012-11-27T10:20:46.267
> 
> 标签：java, excel, xls, xlsx

我有一个要阅读的多列 xls 文件。是否有任何Java代码从任何两列读取数据（两列的名称是“名称”和“GUID”）并在控制台上打印（我想从这两列的数据中执行一些操作。过程应该继续，直到读取这些列的所有行。请帮助我。

读取 XLXS 文件的代码也会有所不同吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:22:24.007

您应该查看[Apache POI](http://poi.apache.org/)库。

> 对于 .xls 文件，有 org.apache.poi.hssf.extractor.ExcelExtractor，它将返回文本，可选择使用公式而不是其内容。那些使用 POI 3.5 的人也可以使用 org.apache.poi.xssf.extractor.XSSFExcelExtractor，对 .xlsx 文件执行类似的任务。

请参阅[此示例](http://svn.apache.org/repos/asf/poi/trunk/src/examples/src/org/apache/poi/hssf/usermodel/examples/HSSFReadWrite.java)了解如何读取 Excel 文件

# php - 在单个 Excel 文件中创建 100 多个工作簿。代码运行良好。有什么办法可以在不到一分钟的时间内实现这一目标？

> ID：13582047
> 
> 赞同：1
> 
> 时间：2012-11-27T10:20:46.487
> 
> 标签：php, api, google-analytics-api

这是我创建的一个函数，用于在单个文件中创建 100 多个工作簿。代码工作正常，但完成整个过程需要更长的时间。我想知道如何让这些事情变得更快。感谢大家阅读这篇文章。

```
function allStats() {

    $data['total'] = $this->poster_model->numberTotalPiosters();
    $data['allPosters'] = $this->poster_model->getAllPosters(); 

    require(APPPATH.'third_party/gapi.php');
    $ga = new gapi('xxx@xxxx', 'xxxxx');

    require(APPPATH.'third_party/PHPExcel.php');
    require(APPPATH.'third_party/PHPExcel/Writer/Excel2007.php');

    $objPHPExcel = new PHPExcel();
    $objPHPExcel->getProperties()->setCreator("xxxxxx");
    $objPHPExcel->getProperties()->setLastModifiedBy("xxxxxx");
    $objPHPExcel->getProperties()->setTitle("xxxxxxx");
    $objPHPExcel->getProperties()->setSubject("xxxxxx");
    $objPHPExcel->getProperties()->setDescription("xxxxx (".$data['allPosters'][$i]['PDF_Name'].")");

    $i=0;

    while ($i < 150) 
    {

        if($data['allPosters'][$i]['Translations']==0)
        {

        if(time() < strtotime($data['allPosters'][$i]['Expiry_Date'])){
            $expiry = date('Y-m-d');
            $limit = round((strtotime($data['allPosters'][$i]['Expiry_Date']) - time()) / 86400);
        }else if(strtotime($data['allPosters'][$i]['Expiry_Date']) == strtotime($data['allPosters'][$i]['Presentation_Date'])){
            $expiry = strtotime($data['allPosters'][$i]['Presentation_Date']) + 86400;
            $limit = 1;
        }else{
            $expiry = date('Y-m-d', strtotime($data['allPosters'][$i]['Expiry_Date']));
            $limit = round((strtotime($data['allPosters'][$i]['Expiry_Date']) - strtotime($data['allPosters'][$i]['Presentation_Date'])) / 86400);

        }

        $ga->requestReportData(
            xxxxxxxx,
            array('date','eventAction'),
            array('uniqueEvents'), 
            array('eventAction'),
            'eventAction=='.base_url().'uploads/'.$data['allPosters'][$i]['PDF_Name'], 
            date('Y-m-d', strtotime($data['allPosters'][$i]['Presentation_Date'])), 
            $expiry, 
            1,
            $limit
        );
        $download_stats = array();
        foreach($ga->getResults() as $result){
            $download_stats[$result->getDate()] = array(
                'pageviews' => $result->getUniqueEvents()
            );
        }
        $data['downloads'] = $ga->getUniqueEvents(); 
        $ga->requestReportData(
            xxxxxxx,
            array('date'),
            array('pageviews','uniquepageviews','visitors'), 
            array('date'), 
            'pagePath==/test/'.$data['allPosters'][$i]['Path'], 
            date('Y-m-d', strtotime($data['allPosters'][$i]['Presentation_Date'])), 
            $expiry, 
            1,
            $limit
        );
    $stats = array();
        foreach($ga->getResults() as $result){
        $stats[] = array(
                'origdate' => $result->getDate(),
                'date' => date('j F Y', strtotime($result->getDate())),
                'pageviews' => $result->getPageviews(),
                'uniquepageviews' => $result->getUniquePageviews(),
                'visitors' => $result->getVisitors()
            );
        }
        $data['page_views'] = number_format($ga->getPageviews());
        $data['unique_page_views'] = number_format($ga->getUniquePageviews());
        $data['visitors'] = number_format($ga->getVisitors());
        $ga->requestReportData(
            xxxxxxxx,
            array('date'),
            array('pageviews'), 
            array('date'),
            'pagePath==/test/'.$data['allPosters'][$i]['Path'].'/pdf-emailed.php', 
            date('Y-m-d', strtotime($data['allPosters'][$i]['Presentation_Date'])), 
            $expiry, 
            1,
            $limit
        );
        $email_stats = array();
        foreach($ga->getResults() as $result){
            $email_stats[] = array(
                'origdate' => $result->getDate(),
                'date' => date('j F Y', strtotime($result->getDate())),
                'pageviews' => $result->getPageviews()
            );
        }
        $data['email_views'] = number_format($ga->getPageviews());
        $data['stats'] = $stats;
        $data['email_stats'] = $email_stats;
        $data['download_stats'] = $download_stats;

        $objWorkSheet = $objPHPExcel->createSheet($data['allPosters'][$i]['Identifier']);

        $objWorkSheet->SetCellValue('A1', 'Date');
        $objWorkSheet->SetCellValue('B1', 'Unique page views');
        $objWorkSheet->SetCellValue('C1', 'Page views');
        $objWorkSheet->SetCellValue('D1', 'Visitors');
        $objWorkSheet->SetCellValue('E1', 'Downloads');
        $objWorkSheet->SetCellValue('F1', 'e-mails');
        $objWorkSheet->SetCellValue('G1', 'SMS');

        $a = 2;
        foreach($stats as $stat){

            $objWorkSheet->SetCellValue('A'.$a, $stat['date']);
            $objWorkSheet->SetCellValue('B'.$a, intval($stat['uniquepageviews']));
            $objWorkSheet->SetCellValue('C'.$a, intval($stat['pageviews']));
            $objWorkSheet->SetCellValue('D'.$a, intval($stat['visitors']));

            $dd=$a;

        for($j=0;$j<=$total;$j++)
        {
                //$data['sms'][$j]['from_number']
                //$data['sms'][$j]['date'];
                $datetocompare=date('d-m-Y', strtotime($stat['date']));
                if((strtotime($datetocompare))==(strtotime($data['sms'][$j]['date'])) ){
                if(isset($data['sms'][$j]['numbers_of_sms'])){
                $objWorkSheet->SetCellValue('G'.$a, ($data['sms'][$j]['numbers_of_sms'] ));
                }else{
                $objWorkSheet->SetCellValue('G'.$a, 0);
                }
                }
        $dd++;
        }
            if(isset($download_stats[$stat['origdate']])){
                $objWorkSheet->SetCellValue('E'.$a, intval($download_stats[$stat['origdate']]['pageviews']));
            }else{
                $objWorkSheet->SetCellValue('E'.$a, 0);
            }
            if(isset($email_stats[$a-2])){
                $objWorkSheet->SetCellValue('F'.$a, intval($email_stats[$a-2]['pageviews']));
            }else{
                $objWorkSheet->SetCellValue('F'.$a, 0);
            }

            $a++;
        }

        $objWorkSheet->setTitle($data['allPosters'][$i]['Identifier']);

    $i++;
    }

}
    $objWriter = new PHPExcel_Writer_Excel2007($objPHPExcel);
    $objWriter->save('uploads/allposters/'.md5($i).'.xlsx');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:59:26.293

1.用这个for循环替换你在$i上的while循环

```
for($i = 0; $i < 150; ++$i){
...Preincrement is faster on php, dont ask me why. Do this on your other for loops as well.
} 
```

2.您在循环链中多次调用此函数：

```
strtotime($data['allPosters'][$i]['Expiry_Date']) 
```

只调用一次并将结果存储在变量中，例如

```
$strt = strtotime($data['allPosters'][$i]['Expiry_Date']); 
```

然后用变量替换所有出现的情况。对类似的冗余函数调用执行相同的操作。

3.我不知道你的 ga-Object 是如何工作的，但你有循环：

```
foreach($ga->getResults() as $result){
...
} 
```

两次几乎在彼此的正后方。第一次为数组`$download_stats`，第二次为数组，`$stats`第三次为数组`$email_stats`。

检查您是否可以联合这两个循环，或者您是否可以修改您的代码，以便您只需获取一次 gesults。

另外，调用函数

```
$ga->getResults() 
```

仅一次并将结果存储在变量中，然后遍历数组，例如

```
$results = $ga->getResults();
foreach($results as $result){
...
} 
```

尽可能减少函数调用。

至今。我希望我能帮忙:)

# javascript - 如何在名称中引用带有 $（美元）符号的 javascript 对象

> ID：13582048
> 
> 赞同：2
> 
> 时间：2012-11-27T10:20:49.660
> 
> 标签：javascript, json, jquery

我正在尝试从 gdata json 中提取数据。然而，对象的名称有美元符号：

```
{
   "id":{
      "$t":"tag:youtube.com,2008:video:xedvi0LiZDA"
   },
   "media$group":{
      "media$category":[
         {
            "$t":"Shows",
            "label":"Shows",
            "scheme":"http:\/\/gdata.youtube.com\/schemas\/2007\/categories.cat"
         },
         {
            "$t":"6",
            "scheme":"http:\/\/gdata.youtube.com\/schemas\/2007\/releasemediums.cat"
         },
         {
            "$t":"3",
            "scheme":"http:\/\/gdata.youtube.com\/schemas\/2007\/mediatypes.cat"
         }
      ],
      "media$content":[
         {
            "url":"http:\/\/www.youtube.com\/v\/xedvi0LiZDA?version=3&f=user_uploads&app=youtube_gdata",
            "type":"application\/x-shockwave-flash",
            "medium":"video",
            "isDefault":"true",
            "expression":"full",
            "duration":204,
            "yt$format":5
         },
         {
            "url":"rtsp:\/\/v8.cache5.c.youtube.com\/CigLENy73wIaHwkwZOJCi2_nxRMYDSANFEgGUgx1c2VyX3VwbG9hZHMM\/0\/0\/0\/video.3gp",
            "type":"video\/3gpp",
            "medium":"video",
            "expression":"full",
            "duration":204,
            "yt$format":1
         },
         {
            "url":"rtsp:\/\/v6.cache7.c.youtube.com\/CigLENy73wIaHwkwZOJCi2_nxRMYESARFEgGUgx1c2VyX3VwbG9hZHMM\/0\/0\/0\/video.3gp",
            "type":"video\/3gpp",
            "medium":"video",
            "expression":"full",
            "duration":204,
            "yt$format":6
         }
      ],
      "media$credit":[
         {
            "$t":"epicnetworkmusic",
            "role":"uploader",
            "scheme":"urn:youtube",
            "yt$display":"EpicNetworkMusic",
            "yt$type":"partner"
         }
      ],
      "media$description":{
         "$t":"Our Facebook: http:\/\/on.fb.me\/oW4u8e & T-Shirts: http:\/\/bit.ly\/JSJebo\n---------------------------------------------------------------------------------------------------------------\nComing out on the 'Believe in Music Foundation' album on the 15th October\nhttp:\/\/www.facebook.com\/pages\/Believe-in-Music-Foundation\/130288053775923\n\nSystem\nFacebook: https:\/\/www.facebook.com\/systemdance\nSoundcloud: http:\/\/soundcloud.com\/systemdance\nYouTube: http:\/\/www.youtube.com\/user\/officialsystemuk\n---------------------------------------------------------------------------------------------------------------\nAll the artwork & design is owned by Mike Nesbitt\n\nDeviantArt: http:\/\/vashperado.deviantart.com\/\nTumblr: http:\/\/vashito.tumblr.com\/\nTwitter: https:\/\/twitter.com\/vashperado \n\nWallpaper Download: \nhttp:\/\/vashperado.deviantart.com\/art\/s-p-a-c-e-o-u-t-264782890\n---------------------------------------------------------------------------------------------------------------\nEpic Network:\nFacebook FanPage: http:\/\/on.fb.me\/h2ubeH\nTwitter: http:\/\/bit.ly\/i4iqZa\nGoogle+ http:\/\/goo.gl\/uO7n1\nSoundcloud: http:\/\/bit.ly\/e1Xukr\n\nTrack's title: System - Circles\n---------------------------------------------------------------------------------------------------------------\nSend demos to demo@epicnetworkrecords.com\nfor a possible release or get your track featured on ENR!\n\nWe'll get back to you if we like what we hear!\n---------------------------------------------------------------------------------------------------------------",
         "type":"plain"
      },
      "media$keywords":[

      ],
      "media$license":{
         "$t":"youtube",
         "type":"text\/html",
         "href":"http:\/\/www.youtube.com\/t\/terms"
      },
      "media$player":{
         "url":"http:\/\/www.youtube.com\/watch?v=xedvi0LiZDA&feature=youtube_gdata_player"
      },
      "media$thumbnail":[
         {
            "url":"http:\/\/i.ytimg.com\/vi\/xedvi0LiZDA\/default.jpg",
            "height":90,
            "width":120,
            "time":"00:01:42",
            "yt$name":"default"
         },
         {
            "url":"http:\/\/i.ytimg.com\/vi\/xedvi0LiZDA\/mqdefault.jpg",
            "height":180,
            "width":320,
            "yt$name":"mqdefault"
         },
         {
            "url":"http:\/\/i.ytimg.com\/vi\/xedvi0LiZDA\/hqdefault.jpg",
            "height":360,
            "width":480,
            "yt$name":"hqdefault"
         },
         {
            "url":"http:\/\/i.ytimg.com\/vi\/xedvi0LiZDA\/1.jpg",
            "height":90,
            "width":120,
            "time":"00:00:51",
            "yt$name":"start"
         },
         {
            "url":"http:\/\/i.ytimg.com\/vi\/xedvi0LiZDA\/2.jpg",
            "height":90,
            "width":120,
            "time":"00:01:42",
            "yt$name":"middle"
         },
         {
            "url":"http:\/\/i.ytimg.com\/vi\/xedvi0LiZDA\/3.jpg",
            "height":90,
            "width":120,
            "time":"00:02:33",
            "yt$name":"end"
         }
      ],
      "media$title":{
         "$t":"Drum & Bass - System - Circles",
         "type":"plain"
      },
      "yt$aspectRatio":{
         "$t":"widescreen"
      },
      "yt$duration":{
         "seconds":"204"
      },
      "yt$uploaded":{
         "$t":"2012-09-24T22:47:33.000Z"
      },
      "yt$uploaderId":{
         "$t":"UCvOGElQWhX8tyTxwzv1rKzg"
      },
      "yt$videoid":{
         "$t":"xedvi0LiZDA"
      }
   },
} 
```

我使用的Javascript如下：

```
 $.ajax({
    url: 'api/video.php',
    success: function(data) {
      //$('.result').html(data);
      alert(data.media$group.yt$videoid.$t); 
    }
  }); 
```

我得到的错误是：*Uncaught TypeError: Cannot read property 'yt$videoid' of undefined*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:30:06.747

我需要将 json 响应解析为一个对象：

```
 var video = jQuery.parseJSON(data);
  alert(video['media$group']['yt$videoid']['$t']);  //media$group.yt$videoid.$t 
```

# java - s:select struts2 标签问题

> ID：13582049
> 
> 赞同：0
> 
> 时间：2012-11-27T10:20:54.643
> 
> 标签：java, html, struts2, struts

`ArrayList`我在of 中有用户`UserDetails`。`UserDetails`有 2 个字段：`id`和`name`.

我想要一个填充用户名的 Struts2 选择标签，但是在单击提交按钮时它应该发布用户`id`。

```
s:select list="users.userName" value="users.userId" size="0" 
```

这就是我所做的......但它对我不起作用。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:46:20.990

就像@AleksandrM 说的，在这里查看[文档](http://struts.apache.org/2.x/docs/select.html)

它应该如下所示：

```
<s:select list="users" listKey="userName" listValue="userId"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:59:51.453

```
<s:select list="UserDetails" listKey="name" listValue="id"/> 
```

# apache-flex - 如何在没有循环的情况下从flex中的arraycollection中获取特定项目的数量

> ID：13582050
> 
> 赞同：0
> 
> 时间：2012-11-27T10:20:53.427
> 
> 标签：apache-flex, arraycollection

例如：我有一个数组集合，其中包含姓名、标准、年龄等。我只想要标准“x”中的学生人数。在没有循环的情况下如何在 flex ArrayCollection 中实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:55:03.003

下面的代码可以帮助你： - 你可以使用 ArrayCollection 的 filterFunction。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600" xmlns:local="*">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;

            private var filterValue:String = "X"; 
            private var myArrayCollection:ArrayCollection = new ArrayCollection(
                   [{label:"I", data:"first std"},
                    {label:"II", data:"Second  std"},
                    {label:"III", data:"Third  std"},
                    {label:"V", data:"Fifth  std"},
                    {label:"VI", data:"Sixth  std"},
                    {label:"IX", data:"Ninth  std 1"},
                    {label:"X", data:"Tenth  std 1"},
                    {label:"IX", data:"Ninth  std 2"},
                    {label:"X", data:"Tenth  std 2"},
                    {label:"X", data:"Tenth  std 3"}]
            );

            private function getLengthOfArrayCollection():void
            {
                myArrayCollection.filterFunction = filterFunctionHandler;
                myArrayCollection.refresh();
                trace(myArrayCollection.length+" --")
            }

            private function filterFunctionHandler(item:Object):Boolean 
            {
                var value:Boolean = false;
                if(item.label == filterValue)
                {
                    value = true;
                }
                return value;
            }
        ]]>
    </fx:Script>
    <s:layout>
        <s:HorizontalLayout />
    </s:layout>
    <s:Button label="Click for Filter" click="getLengthOfArrayCollection()" skinClass="MyButtonSkinClass"/>
</s:Application> 
```

# css - 仅使用 CSS，裁剪 .img 保持外观不失真

> ID：13582051
> 
> 赞同：4
> 
> 时间：2012-11-27T10:20:58.963
> 
> 标签：css, image, crop, aspect-ratio

我有一个已放置在 div 中的图像。div 的宽度为 600，高度可变。

我希望我的图像位于 div 的顶部。如果我将宽度设为 590，则问题是图像在设计方面太高了，并且在页面上看起来太占优势（因为它的比例大约为 4:3 等）。

所以我想把图像变成 590 到 200。如果我使用......

```
.img { 
width: 590px;
max-height: 200px;
} 
```

...然后图像完全按照我想要的方式位于 div 内。但是，照片本身被压扁并变形为 590 x 200。如何确保图像仅在该尺寸范围内裁剪并且没有变形？

不幸的是，我无法访问 html，因此也无法在其周围添加包装器...这仅需要通过编辑 CSS 类 .img 来完成。

编辑 - 安迪是对的，负边距是我能让它发挥作用的唯一方法。谢谢安迪。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T10:36:37.683

你不能简单地通过编辑 css 来做到这一点。您需要将图像作为背景图像放入 HTML

```
<div class="cover">
    <div style="background-image: url(http://img.youtube.com/vi/6WNyczNYsc0/0.jpg); " class="video-thumbnail"></div>
</div> 
```

并`background-size: cover;`在 css 中使用

**CSS**

```
​.cover {
    width: 590px;
    height: 200px;
}
.video-thumbnail {
    height: 100%;
    background-size: cover;
    -moz-background-size: cover;
    -webkit-background-size: cover;
    background-position: center;
} 
```

[**在这里演示**](http://jsfiddle.net/libinvbabu/q4qEG/)

在演示中，我将背景位置设置为中心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T10:37:18.843

尝试这个：

```
.img { 
width: auto;
max-height: 200px;
} 
```

警告：自动宽度在 IE7 中不起作用（我不确定 IE8）。您可能必须使用 js 解决方案来实现向后兼容性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T10:23:04.337

你可以把这张图片放到div background-image 样式中，然后使用CSS3 style - background-size:cover

# autocomplete - 加载建议时 XPages Type Ahead 失败

> ID：13582052
> 
> 赞同：5
> 
> 时间：2012-11-27T10:21:00.943
> 
> 标签：autocomplete, lotus-notes, xpages, type-ahead

我们正在使用带有 Type Ahead 的 inputText XPages 控件来自动完成。在搜索字段中输入时，不会出现任何建议。我们在 Type Ahead 属性窗格中设置了一个逗号分隔的建议列表，建议分隔符是“，”。我们还尝试使用“新行”分隔的建议。最小字符为“1”。这是 inputText 的 xml：

```
<xp:inputText id="inputText2">
<xp:typeAhead mode="partial" minChars="1" ignoreCase="true" valueListSeparator=",">
    <xp:this.valueList><![CDATA[Homer,Marge,Bart,Lisa,Maggie]]></xp:this.valueList>
</xp:typeAhead>
</xp:inputText> 
```

使用模式“full”和“partial”都失败了，但有不同的错误。使用“full”时，对于在搜索字段中键入的每个字母，浏览器控制台中都会出现以下错误（是的，所有这些都是由单次按键引起的）：

```
Error: Unable to load undefined status:404
dijit.form.ComboBox: Error: Unable to load undefined status:404
Error: Unable to load undefined status:404
Error: Unable to load undefined status:404
Error: Unable to load undefined status:404 
```

类似地，对于“部分”模式，每个键入的字母都会出现以下错误消息：

```
'url' is null or not an object 
```

最后一个错误源于 dojo.js（与 Lotus Notes 8.5.3 一起使用的缩小版本，第 14 行，字符 84996）。我们不确定这是哪个版本的道场，因为缩小的脚本中没有说明，但我们认为[版本 1.6.1](http://download.dojotoolkit.org/release-1.6.1/dojo.js.uncompressed.js)大约是正确的版本。我们已经隔离了导致错误的代码：

```
dojo._ioAddQueryToUrl = function(/*dojo.__IoCallbackArgs*/ioArgs){
    //summary: Adds query params discovered by the io deferred construction to the URL.
    //Only use this for operations which are fundamentally GET-type operations.
    if(ioArgs.query.length){
        ioArgs.url += (ioArgs.url.indexOf("?") == -1 ? "?" : "&") + ioArgs.query;
        ioArgs.query = null;
    }
}; 
```

这就是`ioArgs.url += ...`导致错误的原因。

为 inputText 生成的标记如下所示：

```
<span id="view:_id36:_id38:_id119" dojotype="ibm.xsp.widget.layout.data.TypeAheadReadStore" jsid="view__id36__id38__id119" mode="full"></span>
<div class="dijit dijitReset dijitInlineTable dijitLeft xspInputFieldEditBox dijitTextBox dijitComboBox" id="widget_view:_id36:_id38:inputText2" role="combobox" widgetid="view:_id36:_id38:inputText2">
<div class="dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer" dojoattachpoint="_buttonNode, _popupStateNode" role="presentation" style="display: none;">
    <input class="dijitReset dijitInputField dijitArrowButtonInner" value="? " type="text" tabindex="-1" readonly="readonly" role="presentation">
</div>
<div class="dijitReset dijitValidationContainer">
    <input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="? " type="text" tabindex="-1" readonly="readonly" role="presentation">
</div>
<div class="dijitReset dijitInputField dijitInputContainer">
    <input class="dijitReset dijitInputInner" name="view:_id36:_id38:inputText2" type="text" autocomplete="off" dojoattachpoint="textbox,focusNode" role="textbox" aria-haspopup="true" id="view:_id36:_id38:inputText2" tabindex="0" value="">
</div>
</div> 
```

任何建议（双关语）将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T14:31:35.010

请检查 XPages 属性*createForm*。如果设置为*false*，请将其删除或更改为*true*。

```
<xp:view xmlns:xp="http://www.ibm.com/xsp/core" createForm="true"> 
```

Type Ahead 功能根据HTML 表单的*action属性计算目标 URL。*如果此表单不可用，则前面的类型将失败。如果需要禁用自动生成的表单，则必须手动将表单添加到 XPage。

**编辑：**

或者，您可以覆盖 Typeahead 数据存储的 CSJS 代码并操纵*fetch*方法来注入您的 XPage 的 URL。

**编辑2：**

这是一个修复预输入的脚本块：

```
<xp:scriptBlock id="scriptBlockFixTypeAhead">
    <xp:this.value>
        <![CDATA[dojo.addOnLoad(function(){
            ibm.xsp.widget.layout.data.TypeAheadReadStore.prototype.fetch = function tars_f(_5) {
            var _6 = _5.query.name;
            if (_6.length < this.minChars) {
                _5.onComplete([], _5);
                return;
            }
            this.content.$$value = _6;
            var _7 = {url: '#{javascript:context.getUrl().getPath()}', 
               handleAs: "text", timeout: XSP.submitLatency, content: this.content,
               form: this.sendForm ? this.formId : null, 
               load: dojo.hitch(this, this.retrieved, _5),
               error: dojo.hitch(_5, _5.onError)};
            dojo.xhr(this.method, _7, !this.contentInUrl);
            return _5;
        }})
    ]]></xp:this.value>
</xp:scriptBlock> 
```

# testing - WebTestCase 不会自动加载 @Route 注释

> ID：13582055
> 
> 赞同：1
> 
> 时间：2012-11-27T10:21:18.777
> 
> 标签：testing, symfony, annotations, routes

在使用类进行功能测试时，`@Route`注释不起作用`WebTestCase`。

我的控制器如下所示：

```
<?php
namespace Foo\ShopBundle\Controller;

use Foo\ShopBundle\Entity\Cart;
use Foo\ShopBundle\Entity\ProductInterface;

use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Template;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;

/**
 * @Route("cart")
 */
class CartController extends Controller
{
    const CART_ID = 'cart_id';

    /**
     * @Route("/")
     * @Template()
     */
    public function indexAction()
    {
        return array('cart' => $this->getCart($this->getCurrentUserName(), $this->getCurrentSessionId()));
    }

    ...

?> 
```

如果我从浏览器调用控制器，这工作正常。但是在 a 中调用相同的 URL 会`WebTestCase`产生以下异常：

```
Doctrine\Common\Annotations\AnnotationException : [Semantical Error] The annotation "@Sensio\Bundle\FrameworkExtraBundle\Configuration\Route" in class Foo\ShopBundle\Controller\CartController does not exist, or could not be auto-loaded.
#0 /Users/ernst/Source/php/cinergy/shop/vendor/doctrine/common/lib/Doctrine/Common/Annotations/DocParser.php(597): Doctrine\Common\Annotations\AnnotationException::semanticalError('The annotation ...')
#1 /Users/ernst/Source/php/cinergy/shop/vendor/doctrine/common/lib/Doctrine/Common/Annotations/DocParser.php(533): Doctrine\Common\Annotations\DocParser->Annotation()
#2 /Users/ernst/Source/php/cinergy/shop/vendor/doctrine/common/lib/Doctrine/Common/Annotations/DocParser.php(297): Doctrine\Common\Annotations\DocParser->Annotations()
#3 /Users/ernst/Source/php/cinergy/shop/vendor/doctrine/common/lib/Doctrine/Common/Annotations/AnnotationReader.php(151): Doctrine\Common\Annotations\DocParser->parse('/**? * @Route("...', 'class Foo\S...')
#4 /Users/ernst/Source/php/cinergy/shop/vendor/doctrine/common/lib/Doctrine/Common/Annotations/FileCacheReader.php(90): Doctrine\Common\Annotations\AnnotationReader->getClassAnnotations(Object(ReflectionClass))
#5 /Users/ernst/Source/php/cinergy/shop/vendor/jms/di-extra-bundle/JMS/DiExtraBundle/Metadata/Driver/AnnotationDriver.php(65): Doctrine\Common\Annotations\FileCacheReader->getClassAnnotations(Object(ReflectionClass))
#6 /Users/ernst/Source/php/cinergy/shop/vendor/jms/metadata/src/Metadata/Driver/LazyLoadingDriver.php(20): JMS\DiExtraBundle\Metadata\Driver\AnnotationDriver->loadMetadataForClass(Object(ReflectionClass))
#7 /Users/ernst/Source/php/cinergy/shop/vendor/jms/metadata/src/Metadata/MetadataFactory.php(77): Metadata\Driver\LazyLoadingDriver->loadMetadataForClass(Object(ReflectionClass))
#8 /Users/ernst/Source/php/cinergy/shop/vendor/jms/di-extra-bundle/JMS/DiExtraBundle/HttpKernel/ControllerResolver.php(84): Metadata\MetadataFactory->getMetadataForClass('Foo\ShopBun...')
#9 /Users/ernst/Source/php/cinergy/shop/vendor/jms/di-extra-bundle/JMS/DiExtraBundle/HttpKernel/ControllerInjectorsWarmer.php(31): JMS\DiExtraBundle\HttpKernel\ControllerResolver->createInjector('Foo\ShopBun...')
#10 /Users/ernst/Source/php/cinergy/shop/vendor/symfony/symfony/src/Symfony/Component/HttpKernel/CacheWarmer/CacheWarmerAggregate.php(47): JMS\DiExtraBundle\HttpKernel\ControllerInjectorsWarmer->warmUp('/Users/ernst/So...')
#11 /Users/ernst/Source/php/cinergy/shop/vendor/symfony/symfony/src/Symfony/Component/HttpKernel/Kernel.php(595): Symfony\Component\HttpKernel\CacheWarmer\CacheWarmerAggregate->warmUp('/Users/ernst/So...')
#12 /Users/ernst/Source/php/cinergy/shop/vendor/symfony/symfony/src/Symfony/Component/HttpKernel/Kernel.php(133): Symfony\Component\HttpKernel\Kernel->initializeContainer()
#13 /Users/ernst/Source/php/cinergy/shop/vendor/symfony/symfony/src/Symfony/Bundle/FrameworkBundle/Test/WebTestCase.php(43): Symfony\Component\HttpKernel\Kernel->boot()
#14 /Users/ernst/Source/php/cinergy/shop/src/Foo/ShopBundle/Tests/Controller/CartControllerFunctionalTest.php(19): Symfony\Bundle\FrameworkBundle\Test\WebTestCase::createClient()
#15 [internal function]: Foo\ShopBundle\Tests\Controller\CartControllerFunctionalTest->testIndexAction()
#16 /Applications/MAMP/bin/php/php5.3.14/lib/php/PHPUnit/Framework/TestCase.php(967): ReflectionMethod->invokeArgs(Object(Foo\ShopBundle\Tests\Controller\CartControllerFunctionalTest), Array)
#17 /Applications/MAMP/bin/php/php5.3.14/lib/php/PHPUnit/Framework/TestCase.php(825): PHPUnit_Framework_TestCase->runTest()
#18 /Applications/MAMP/bin/php/php5.3.14/lib/php/PHPUnit/Framework/TestResult.php(649): PHPUnit_Framework_TestCase->runBare()
#19 /Applications/MAMP/bin/php/php5.3.14/lib/php/PHPUnit/Framework/TestCase.php(770): PHPUnit_Framework_TestResult->run(Object(Foo\ShopBundle\Tests\Controller\CartControllerFunctionalTest))
#20 /Applications/MAMP/bin/php/php5.3.14/lib/php/PHPUnit/Framework/TestSuite.php(776): PHPUnit_Framework_TestCase->run(Object(PHPUnit_Framework_TestResult))
#21 /Applications/MAMP/bin/php/php5.3.14/lib/php/PHPUnit/Framework/TestSuite.php(746): PHPUnit_Framework_TestSuite->runTest(Object(Foo\ShopBundle\Tests\Controller\CartControllerFunctionalTest), Object(PHPUnit_Framework_TestResult))
#22 /Applications/MAMP/bin/php/php5.3.14/lib/php/PHPUnit/Framework/TestSuite.php(706): PHPUnit_Framework_TestSuite->run(Object(PHPUnit_Framework_TestResult), false, Array, Array, false)
#23 /Applications/MAMP/bin/php/php5.3.14/lib/php/PHPUnit/TextUI/TestRunner.php(325): PHPUnit_Framework_TestSuite->run(Object(PHPUnit_Framework_TestResult), false, Array, Array, false)
#24 /Applications/MAMP/bin/php/php5.3.14/lib/php/PHPUnit/TextUI/Command.php(177): PHPUnit_TextUI_TestRunner->doRun(Object(PHPUnit_Framework_TestSuite), Array)
#25 /private/var/folders/kc/ylyxk45170z_g5h6c2_vr0_00000gp/T/ide-phpunit.php(102): PHPUnit_TextUI_Command->run(Array, true)
#26 /private/var/folders/kc/ylyxk45170z_g5h6c2_vr0_00000gp/T/ide-phpunit.php(442): IDE_PHPUnit_TextUI_Command::main()
#27 {main} 
```

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:04:27.597

尝试将此添加到您的 setUp() 方法中（不要忘记定义 $vendorDir）

```
use Doctrine\Common\Annotations\AnnotationRegistry;
....
public function setUp()
{
    /** To make annotations work here */
    AnnotationRegistry::registerAutoloadNamespaces(array('Sensio\\Bundle\\FrameworkExtraBundle' => $vendorDir . '/sensio/framework-extra-bundle/'));
.... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-28T14:30:53.660

虽然这个问题已经很老了，但我想补充一点：

请确保您在测试期间始终指向您的 phpunit.xml(.dist) 文件。

这意味着：

```
# OK
phpunit -c app/ src/MyNamespace/Bundlee/MyBundle/Controller/MyControllerTest.php 
```

将工作。

然而`-c app`，由于 Symfony 无法正常启动，因此添加该命令会破坏测试运行程序：

```
# ERROR
phpunit src/MyNamespace/Bundlee/MyBundle/Controller/MyControllerTest.php 
```

在后一种情况下，自动加载无法正常初始化，因此 Doctrine Annotations 也无法正确注册。

不再需要 setUp 方法中提到的“调整”！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-25T11:58:27.650

检查您的 phpunit.xml.dist 文件。您的引导参数应该指向该文件`./autoload.php`（假设该文件位于 Symfony 应用程序目录中）。如果您的引导值是`../vendor/autoload.php`您没有注册“loadClass”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-14T10:34:45.197

我遇到了同样的问题。原来我的 phpunit.xml 中有以下内容：

```
<phpunit backupGlobals="false"
         ...
         bootstrap="vendor/autoload.php"> 
```

更改的值为我`bootstrap`解决`app/bootstrap.php.cache`了问题。注释加载器现在已正确注册。

如果你看一下[https://github.com/symfony/symfony-standard/blob/2.8/app/phpunit.xml.dist#L8](https://github.com/symfony/symfony-standard/blob/2.8/app/phpunit.xml.dist#L8)，你会看到默认的 Symfony 应用程序使用这个文件，因为它是 PHPUnit 引导程序也是。

请注意，我的 phpunit.xml 在我的项目的根目录中，而不是在`app`目录中。如果 phpunit.xml 文件在`app`目录中，您可以简单地使用`bootstrap.php.cache`.

# regex - eregi_replace 替换

> ID：13582056
> 
> 赞同：1
> 
> 时间：2012-11-27T10:21:22.723
> 
> 标签：regex, preg-replace, eregi

我对正则表达式很不满意:(而且我从以前的开发人员那里继承了一堆代码，他已经放置了很多现在在 PHP 5.3 上已弃用的 eregi_replace

代码中的函数如下：

```
eregi_replace("[\]","",$text); 
```

我知道我必须用 preg_replace 替换这个函数，但我不确定如何处理“[]”以使其与 perl 兼容。

我试过“/[]/”，但在 PHP 错误日志中出现编译错误。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:51:30.793

不要使用`eregi_replace`，从 PHP 5.3.0 开始，该功能已被**弃用**。
强烈建议不要依赖此功能。

* * *

  [`str_replace()`](http://www.php.net/manual/en/function.str-replace.php)- 用替换字符串替换所有出现的搜索字符串
[`preg_replace()`](http://www.php.net/manual/en/function.preg-replace.php)- 执行正则表达式搜索和替换

* * *

```
str_replace("\", "", $text); 
```

# python - 如何将子图与指定大小对齐？

> ID：13582059
> 
> 赞同：1
> 
> 时间：2012-11-27T10:21:28.357
> 
> 标签：python, matplotlib

我有很多不同的地块，必须明确指定大小。每个文件一个图。问题是，当尺寸太大时，我在左侧的子图中有一些空闲空间，我想裁剪这些空间。我不能使用`subplots_adjust`，因为小尺寸的地块也会被裁剪。`tight`我打电话时也不能使用选项`savefig`。那么，如何将我的所有绘图与所有文件中的固定缩进对齐到左侧？

```
import sys, os
import matplotlib.pyplot as plt

path = sys.path[0]
sizes = [(12,3,), (4,3,)]
x =  range(20)

for i, size in enumerate(sizes):
    fig = plt.figure(figsize = size, dpi = 80, facecolor='white', edgecolor=None, linewidth=0.0, frameon=True, subplotpars=None)
    ax = fig.add_subplot(111)
    ax.plot(x)
    plt.ylabel ('Some label')

    fig.savefig(os.path.join(path, 'size_'+str(i)+'.png'), dpi=80, facecolor=fig.get_facecolor(), edgecolor=None, papertype=None, format='png' ,transparent=False) 
```

![大尺寸图像](../Images/45763c95ae0b918a56b25a5d0fe19940.png)![小尺寸图像](../Images/0f1c0b69c7e5436f2f134b064ea879eb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:42:11.013

我认为你可以使用[tight_layout()](http://matplotlib.org/users/tight_layout_guide.html)：

```
import sys, os
import matplotlib.pyplot as plt

path = sys.path[0]
sizes = [(12,3,), (4,3,)]
x =  range(20)

for i, size in enumerate(sizes):
    fig = plt.figure(figsize = size, dpi = 80, facecolor='white', edgecolor=None,linewidth=0.0, frameon=True, subplotpars=None)
    ax = fig.add_subplot(111)
    ax.plot(x)
    plt.ylabel ('Some label')

    plt.tight_layout()

    fig.savefig(os.path.join(path, 'size_'+str(i)+'.png'), dpi=80,facecolor=fig.get_facecolor(), edgecolor=None, papertype=None, format='png',transparent=False) 
```

你也可以使用类似的东西

```
fig.subplots_adjust(right=0.9, left=0.1, top=0.9, bottom=0.1, wspace=0.2) 
```

而不是`plt.tight_layout()`. 如果你想。

请告诉我这是否不是您需要的。

# php - 如何在课堂上多次使用 trait？

> ID：13582061
> 
> 赞同：8
> 
> 时间：2012-11-27T10:21:31.487
> 
> 标签：php, traits

以下代码：

```
trait T {
    function foo() {}
}

class C {
    use T { T::foo as bar; }
    use T { T::foo as baz; }
} 
```

产生以下错误：

> trait 方法 bar 没有应用，因为在 C 上和其他 trait 方法有冲突

是否可以在课堂上使用两次特质？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T10:29:34.157

要使用不同的名称多次“导入”在特征中定义的方法，请执行以下操作：

```
class C {
  use T {
    foo as bar;
    foo as baz;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:10:56.640

是的，你可以使用一个 trait 两次：

```
trait T {
    function foo() {}
}

class C {
    use T { T::foo as bar; T::foo as baz; }
} 
```

# php - php preg_match 没有给出预期的结果

> ID：13582071
> 
> 赞同：0
> 
> 时间：2012-11-27T10:22:19.870
> 
> 标签：php, preg-match

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

我希望这个返回 (bool)True 或 int(1)

```
echo var_dump(preg_match('/(<[tT][eE][xX][tT][aA][rR][eE][aA][^<>]*>)(.*?)(<\/[tT][eE][xX][tT][aA][rR][eE][aA]>)/', 
    "<textarea id='field-static_content' name='static_content' class='texteditor' ><p>
any content<p></textarea>")); 
```

但我得到 int(0) 结果。我尝试匹配任何带有“ `<textarea`”（不区分大小写）的字符串，后跟除“<”和“>”之外的任何其他字符，然后是“>”，然后是任何其他字符，然后以“ `</textarea>`”结尾，不区分大小写

有人知道我的正则表达式模式有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:27:38.427

是断线。检查[模式修饰符](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)，'s' 和 'i'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:27:46.927

你错过了[`/s`](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)国旗。您的输入文本包含换行符，这就是`.*?`默认情况下找不到它的原因。

更重要的是，您缺少`/i`不区分大小写的标志。没必要写`[aA][bB]`...

# php - 无法使用 drupal 模块创建块

> ID：13582086
> 
> 赞同：3
> 
> 时间：2012-11-27T10:22:51.290
> 
> 标签：php, drupal, drupal-7, drupal-modules

我正在尝试创建一个带有 drupal 模块的块。我无法让它显示在我的阻止列表中。我尝试了很多不同的教程，即使只是复制粘贴，它仍然没有出现。可能是我的drupal设置中的任何东西阻止我的模块块出现吗？或者代码有什么问题吗？

模块显示并被激活。

这是我现在的代码：

**hidden_** ​​contest_form.info 我正在尝试创建一个带有 drupal 模块的块。我无法让它显示在我的阻止列表中。我尝试了很多不同的教程，即使只是复制粘贴，它仍然没有出现。可能是我的drupal设置中的任何东西阻止我的模块块出现吗？或者代码有什么问题吗？

模块显示并被激活。

这是我现在的代码：

**直升机竞赛表格信息**

> ```
> ;$Id$
> name = Helicopter contest form
> description = Block module with a contest form
> core = 7.x
> package = My modules
> files[] = helicopter_contest_form.module 
> ```

**直升机竞赛表格模块**

```
 /**
* Implements hook_block_info().
*/
function membercount_block_info() {
 $blocks = array ();

$blocks['count_members'] = array (
'info' => t('Count Members'),
'cache' => DRUPAL_NO_CACHE,
);

return $blocks;
}

/**
* Implements hook_block_view().
*/
function membercount_block_view($name) {

if ($name == 'count_members') {
$count = db_query('SELECT COUNT(uid) - 1 FROM {users}')->fetchField();

$content = format_plural($count, 'This site has 1 user.', 'This site has @count users.');

$block = array (
  'subject' => t('Members'),
  'content' => $content,
);

return $block;
 }
 } 
```

在旁注中，我如何一次将所有代码缩进 4 个空格？我必须手工完成每一行，这也破坏了我的缩进......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T11:04:11.697

在实现钩子时，您应该将钩子名称中的“hook”替换为模块的短名称，因此只需将函数的名称从更改`membercount_block_info`为`helicopter_contest_form_block_info`（与“hook_block_view”相同）。

此外，实际上不需要`files[] = helicopter_contest_form.module`在 .info 文件中提及，因为无论如何都需要 .module 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T10:41:02.433

尝试将代码调整为：

```
/**
 * Implements hook_block_info().
 * This hook declares what blocks are provided by the module.
 */
function helicopter_form_info() {
    $blocks = array(); // the added line.
    $blocks['helicopter_form'] = array(
        'info' => t('Helicopter'),
        'cache' => DRUPAL_CACHE_PER_ROLE,
    );
    return $blocks;
} 
```

我知道这很奇怪，但是我曾经遇到过同样的问题，并且在添加该行后它就起作用了。

# ubuntu - 启动 PHP5-FPM 失败

> ID：13582088
> 
> 赞同：1
> 
> 时间：2012-11-27T10:22:57.303
> 
> 标签：ubuntu, php

我已经从 12.04 升级到 Ubuntu 12.10，现在 PHP5-FPM 无法启动。运行 /etc/init.d/php5-fpm start 时出现的错误是失败。没有任何内容写入日志文件以指示我出了什么问题。

尽管我很想解决这个问题，但在这个阶段，我真的只想将一些东西打印到日志文件中给我一个线索。这是我在 /etc/php5/fpm/pool.d/www.conf 中配置的：

```
php_admin_value[error_log] = /var/log/fpm-php.www.log
php_admin_flag[log_errors] = on 
```

但是，永远不会写入此日志文件。

我正在运行 PHP5-fpm 版本 5.4.9。

谁能给我一些建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T17:42:57.883

与其尝试使用您的 INIT 脚本启动 FPM，不如尝试手动启动它。通常，FPM 会吐出您正在寻找的错误以查找并解决问题。

**编辑 1**

要手动启动 FPM，请查找并打开您的 INIT 脚本，然后在该文件中找到启动命令。例如，我的是这样的：

`/usr/local/sbin/php-fpm --nodaemonize --fpm-config /usr/local/etc/php-fpm.conf`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-02T04:57:09.280

我注意到在某些版本的 Ubuntu 中调用 '/etc/init.d/php5-fpm start' 不起作用，而 'service start php5-fpm' 起作用。这可能就是您在日志中看不到任何内容的原因。

# css - 使用绝对位置时，页脚未与屏幕底部对齐

> ID：13582092
> 
> 赞同：0
> 
> 时间：2012-11-27T10:23:11.823
> 
> 标签：css

当主容器中有绝对位置元素时，我无法让页脚粘在页面底部。这是一个要演示的[小提琴。](http://jsfiddle.net/ymVgj/)

```
<div class="content-wraper">
    <div class="side-nav"></div>
</div>

<div class="footer"></div>​ 
```

```
.content-wraper {
    background-color:blue;
    min-height:100px;
    position:relative;
    width:500px;
}

.side-nav {
    background-color:red;
    height:3000px;
    position:absolute;
    top:0px;
    left:0px;
    width:200px;
}

.footer {
    background-color:black;
    position:absolute;
    bottom:0px;
    width:200px;
    height:50px;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T10:25:55.427

更改为`position: absolute;`_`.footer``position: fixed;`

[**更新的小提琴**](http://jsfiddle.net/ymVgj/2/)

* * *

**更新**

`side-nav`要使用 jQuery将页脚始终低于绝对定位，请尝试以下操作：

```
$(".footer").css("top", $(".side-nav").height()); 
```

[**示例小提琴**](http://jsfiddle.net/ymVgj/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T10:26:25.930

绝对定位是指窗口大小，而不是内容大小，所以如果内容高于窗口，就不会得到你想要的效果。

尝试不同的方法：

[粘性页脚](http://ryanfait.com/sticky-footer/)

# android - 支持通过 Wifi、蓝牙或 USB 传输 Android 和 PC 数据的框架？

> ID：13582100
> 
> 赞同：1
> 
> 时间：2012-11-27T10:23:37.173
> 
> 标签：android, windows, controls, wireless, transfer

我正在编写一个无线控制 Android 手机的 Windows 应用程序，例如发送短信、拨打电话、查看文件、检索传感器数据等。我只是通过 WiFi 使用 IP 套接字，但客户端必须知道要连接的 IP 地址服务器。我想知道是否有一个框架/API 可以通过 wifi、蓝牙或任何其他连接方法启用此类数据传输，并且还具有某种自动发现机制？我听说过 Intel CCF（通用连接框架），但找不到有效的参考资料。你认识其他人吗？中期计划？

谢谢，狮子座

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:12:44.727

[我编写了一个名为交叉复制](http://cross-copy.net)的小型开源实用程序来执行此类操作。虽然有一个 Web 应用程序可以让您进行跨设备复制和粘贴，但下面的 RESTful API 可能是您需要的。基本概念是您通过共享一个公共代码字通过服务器连接设备。

我建议你在你的应用程序中显示一个简短的生成代码字（如'a9b3c'）并在后台打开一个监听请求（长轮询）：

```
GET   http://cross-copy.net/api/a9b3c 
```

然后，您的 Windows 应用程序应该有一个“设备链接”文本字段，可以在其中输入代码字。您可以通过调用验证是否有设备在监听

```
GET   http://cross-copy.net/api/a9b3c?watch=listeners&count=0 
```

如果您想从 Windows 应用程序发送短信，您只需使用应用程序可以理解的某种数据结构（例如 json、xml、...）对代码字执行 PUT 请求：

```
PUT http://cross-copy.net/api/a9b3c
    { 'command' : 'send sms', 'number' : '0913342133', 'msg' : 'the message which has been typed on the pc' } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:39:44.570

有 3 种 WiFi 模式/协议可以帮助您：

1.  [SoftAP](http://en.wikipedia.org/wiki/SoftAP)模式 - 您的桌面 WiFi 设备充当热点，您的 android 设备连接到它就像连接到普通 AP。如果设备驱动程序支持，则在 Win7/8 上支持。
2.  [WiFi Direct](http://en.wikipedia.org/wiki/Wi-Fi_Direct) - 允许 2 个 WiFi 设备在 P2P 网络中连接而无需 AP 中介的协议，它是 SoftAP 模式的自然扩展。如果设备驱动程序支持，则在 Win7/8 上支持。
3.  WiFi [IBSS](http://en.wikipedia.org/wiki/Independent_Basic_Service_Set)模式 - 用于两个设备之间数据交换的旧协议。支持任何符合 802.11 的 (WiFi) 系统。

# asp.net - 检索注册用户信息 - asp 网站

> ID：13582101
> 
> 赞同：0
> 
> 时间：2012-11-27T10:23:43.367
> 
> 标签：asp.net

我已经使用 Visual Studio(C#) 创建了一个 Intranet 网站，我也发布了它，它运行良好。该网站有一个注册页面并允许用户创建帐户，我的问题是每当有人在网站上注册时，我想查看注册用户列表并为他们分配权限（会员、访客、管理员等），这样不是每个注册的人可以看到受保护的内容

我该怎么做，我是否为此使用 Visual Studio 的 ASP.NET CONFIGURATION PAGE？

我是一个完整的asp初学者，请有人指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T00:03:30.647

您可以通过使用 .Net 中的角色来完成此操作。创建新用户时，只需让他们具有默认的来宾角色。然后，您可以创建由新用户注册（例如电子邮件）触发的通知，然后您可以查看用户列表并编辑用户以具有特定角色。

可以在此处找到文档 - [http://msdn.microsoft.com/en-us/library/5k850zwb(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/5k850zwb(v=vs.100).aspx)

# mysql - MySQL错误未知排序规则

> ID：13582105
> 
> 赞同：1
> 
> 时间：2012-11-27T10:24:04.757
> 
> 标签：mysql, laravel

尝试在 Laravel 4 中运行迁移后，我收到以下错误：

```
[PDOException]                                              
SQLSTATE[HY000]: General error: 1273 Unknown collation: '' 
```

这是我的数据库连接配置；

```
'mysql' => array(
    'driver'   => 'mysql',
    'host'     => 'localhost',
    'unix_socket'   => '/Applications/MAMP/tmp/mysql/mysql.sock',
    'database' => 'database',
    'username' => 'root',
    'password' => 'root',
    'charset'  => 'utf8',
    'prefix'   => '',
), 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T20:56:32.423

通过从安装的根文件夹运行 composer update 来获取最新的源代码。否则更新您的数组，如下所示。

```
'mysql' => array(
    'driver'   => 'mysql',
    'host'     => 'localhost',
    'unix_socket'   => '/Applications/MAMP/tmp/mysql/mysql.sock',
    'database' => 'database',
    'username' => 'root',
    'password' => 'root',
    'charset'  => 'utf8',
    'collation' => 'utf8_unicode_ci',
    'prefix'   => '',
 ), 
```

# knockout.js - Breeze 不会生成 ko observables

> ID：13582107
> 
> 赞同：3
> 
> 时间：2012-11-27T10:24:10.590
> 
> 标签：knockout.js, breeze

我对一个简单的 MVC4 + ko + 微风 webapp 有以下问题：查询返回的微风实体是简单的 javascript 对象，没有 ko 可观察对象。我检查了 todo 样本（它正确返回了 ko 可观察对象），但我没有找到将微风配置为与 ko 一起使用（并生成可观察对象）的地方。我尝试添加以下几行，但没有任何改变：

```
var core = breeze.core;
var entityModel = breeze.entityModel;

core.config.setProperties({
    trackingImplementation:     entityModel.entityTracking_ko,
    remoteAccessImplementation: entityModel.remoteAccess_webApi
}); 
```

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T19:27:39.563

@frenchfraso - 自从您编写代码以来，Breeze 的一些改进可能值得了解。

`entityModel`名称空间已弃用，其上的所有内容都已升级为`breeze`. 命名空间仍然有效......但你想在`entityModel`有时间的时候摆脱它。以下是您今天创建 EntityManager 的方法：

```
  var manager = 新微风.EntityManager(serviceName);

```

Knockout 现在是默认的“modelLibrary”适配器，Web API 是默认的“dataservice”适配器，因此您不再需要配置微风核心。

这意味着您可以***简单地删除问题中的每一行代码***:)

有一种新语法可以指定非默认的 Breeze 适配器。下面是一个将 Breeze 配置为使用 Backbone 模型库而不是 Knockout 的示例：

```
  微风.core.config.initializeAdapterInstances({modelLibrary: "backbone"});

```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-25T08:45:14.120

我的问题是我在微风之后加载了淘汰赛，因此微风返回了我的 POJO 对象。

```
<script src="Scripts/jquery-1.9.1.js"></script>
<script src="Scripts/q.js"></script>
<script src="Scripts/breeze.debug.js"></script>    
<script src="Scripts/knockout-2.1.0.debug.js"></script>
<script src="Scripts/toastr.js"></script>
<script src="Scripts/require.js" data-main="App/main"></script> 
```

更改加载顺序后，微风返回 KO observables：

```
<script src="Scripts/jquery-1.9.1.js"></script>
<script src="Scripts/q.js"></script>
<script src="Scripts/knockout-2.1.0.debug.js"></script>
<script src="Scripts/breeze.debug.js"></script>    
<script src="Scripts/toastr.js"></script>
<script src="Scripts/require.js" data-main="App/main"></script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T14:52:24.727

明白了！问题在于 WebApi 控制器中缺少几个属性：

```
[JsonFormatter, ODataActionFilter]
public class MyController : ApiController
{
    // my methods...
} 
```

添加 [JsonFormatter, ODataActionFilter] 后，返回的实体具有预期的 ko observables！

# c++ - 重置“静态”类的函数的命名约定

> ID：13582110
> 
> 赞同：0
> 
> 时间：2012-11-27T10:24:16.583
> 
> 标签：c++

我需要在我的单元测试中模拟一个自由函数接口。出于这个原因，我将模拟函数作为静态成员包含在类中。我可以在静态类成员中保存这个模拟的状态。我`free`在这个类中包含了释放与静态成员相关的内存的函数，在每个测试用例结束时都会调用它。这个函数实际上是一个析构函数。这个函数的构造函数等价物的好名字是什么？也就是说，为每个测试用例构建测试夹具时调用的函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:02:51.280

如果函数只分配数据结构而不初始化它们，`allocate`或者它的变体似乎合适（这也是 C++ STL 分配器使用的名称）。

如果函数只初始化分配在其他地方的数据结构（例如在堆栈上或作为另一个对象的直接成员），`initialize`或者它的变体似乎是合适的。

如果函数既进行分配又进行初始化，`create`是 C 中用于此类函数的通用名称（前缀）。

# python - 获取 SQLalchemy 检测属性的值

> ID：13582111
> 
> 赞同：5
> 
> 时间：2012-11-27T10:24:21.620
> 
> 标签：python, sqlalchemy

如何`InstrumentedAttribute`在 SQLalchemy 中获取对象的值：

```
(Pdb) ResultLine.item_reference_1
<sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x793dc90> 
```

上面的语句打印了我的 sqlalchemy 对象。

我真正需要的是与之相关的价值。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T11:00:16.313

没有与`InstrumentedAttribute`;关联的值 您正在查看表*声明*，而不是结果集。`InstrumentedAttribute`例如，用于定义与另一个表的关系。

查询数据库以获取结果，结果对象将为您填写参考：

```
 for res in session.query(ResultLine).filter(somefilter):
     print res.item_reference_1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-15T14:12:25.933

if you have a specific item, you can get the value like this:

```
line = session.query(ResultLine).first()

column = ResultLine.item_reference_1  # this is InstrumentedAttribute

key = column.key  # "item_reference_1"

value = getattr(line, key) 
```

# java - HttpAsyncClient 没有收到多个请求

> ID：13582121
> 
> 赞同：0
> 
> 时间：2012-11-27T10:24:57.193
> 
> 标签：java, http, jsp, servlets, apache-httpclient-4.x

我是 Zone 面板 JFrame 的构造函数。我必须从服务器获取区域列表和运营商列表。我正在使用 HttpAsyncClient 库来转发我的请求。问题是在开始时我发送请求我的 1 个列表（即区域列表）它正在工作但是当我发送请求以获取 2 个列表时它给了我

```
Exception in thread "AWT-EventQueue-0"    
java.lang.NoSuchMethodError:org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.  
<init>(Lorg/apache/http/impl/nio/reactor/IOReactorConfig;)at     
org.apache.http.impl.nio.client.AbstractHttpAsyncClient.<init>
(AbstractHttpAsyncClient.java:133)
at org.apache.http.impl.nio.client.DefaultHttpAsyncClient.<init>  
(DefaultHttpAsyncClient.java:64) 
```

同样，如果我只发送请求（运营商列表）它工作正常但是......当我发送两个请求时它不起作用..这是我的请求发件人类...... public JSONArray sendRequest（List postPairs）{

```
try {
      //At this line code gives me exception i do't know why..?
      HttpAsyncClient httpclient = new DefaultHttpAsyncClient();
      httpclient.start();
      System.out.println(postPairs.get(0).getValue());
      HttpPost post = new   HttpPost("http://10.0.0.62:8080/IDocWS/"+postPairs.get(0).getValue());
      //HttpPost post = new HttpPost("http://www.google.com");
      Future<HttpResponse> future = httpclient.execute(post, null);
      HttpResponse resp = future.get();
      HttpEntity entity = resp.getEntity();
      JSONArray jArray = CovnertToJson(entity);
      return jArray; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:39:14.630

尝试在您的项目中使用最新版本的 HttpComponents - [http://hc.apache.org/downloads.cgi](http://hc.apache.org/downloads.cgi)。构造函数

```
DefaultConnnectingIOReactor(IOReactorConfig) 
```

4.0 版中不存在，只有 4.2+。Apache HttpClient 正在尝试调用它，因此看起来 HttpClient 的版本需要 4.2+ 的 HttpComponents 版本。

# php - 如何使用多个单词 php-sdk 搜索 Facebook Graph API

> ID：13582134
> 
> 赞同：1
> 
> 时间：2012-11-27T10:25:36.303
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我正在使用 Facebook php sdk v3.2.0，并且在使用 AND 查询（如西瓜+香蕉）搜索帖子时只返回一个空数据集。我目前正在从命令行运行这个脚本，如果这有什么不同的话：

```
$facebook = new Facebook(array(
 'appId' => 'MY_APP_ID',
 'secret' => 'MY_SECRET',
));

$q = "watermelon+banana" ;

$search = $facebook->api('/search?q='.$q.'&type=post&limit=10');

foreach ($search as $key=>$value) {
  foreach ($value as $fkey=>$fvalue) {
    print_r ($fvalue);
 }
} 
```

当我在浏览器中访问[http://graph.facebook.com/search?q=watermelon+banana&type=post](http://graph.facebook.com/search?q=watermelon+banana&type=post)时，我可以看到结果。此外，在查询 $q="watermelon" 时它确实有效。我在不同的机器上试过这个，但也没有骰子。有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:40:56.317

当您不需要这样做时，您正在编码 + 。

所以你在 PHP 中的查询实际上是`http://graph.facebook.com/search?q=watermelon%2Bbanana&type=post&limit=10`

省略`urlencode`函数

```
$q = "watermelon+banana" ;

$search = $facebook->api('/search?q='.$q.'&type=post&limit=10'); 
```

所以完整的代码看起来像

```
<?php

require 'facebook.php';

$facebook = new Facebook(array(
    'appId' => 'YOUR_APP_ID',
    'secret' => 'YOUR_SECRET',
));

$q = "watermelon+banana" ;

$search = $facebook->api('/search?q='.$q.'&type=post&limit=10');

foreach ($search as $key=>$value) {
    foreach ($value as $fkey=>$fvalue) {
        print_r ($fvalue);
    }
}

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-22T10:49:38.430

```
require '../src/facebook.php';

// Create our Application instance (replace this with your appId and secret).
$config = array(
  'appId'  => 'xxxxxxxxxxxx',
  'secret' => 'xxxxxxxxxxxxxxxxxx',
  'allowSignedRequest' => false // opt`enter code here`ional but should be set to false for non-canvas apps
);
  $facebook = new Facebook($config);
  $user_id = $facebook->getUser();

  $query = urlencode('india+China');
$type = 'post';
$retrive = $facebook->api('/search?q='.$query.'&type='.$type.'&limit=10');

$string= json_encode($retrive );
$json_a = json_decode($string, true);
$json_o = json_decode($string);

foreach($json_o->data as $p)
{
 $text = $p->message;
        $username=$p->from->name;
        $id=$p->from->id;
        echo "<table border=1px>
<tr>
<td>
<td>$id</td>
<td>$username</td>
<td>$text</td>
</tr>
</table>";

}`enter code here` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:36:14.207

您的代码现在应该可以正常工作（已进行所有必要的更改）：

```
$facebook = new Facebook(array(
  'appId'  => 'xxxxx',
  'secret' => 'xxxxx',
));

$q = "watermelon banana"; // dont need to urlencode the string

$q = str_replace(" ","+",$q); // this will replace all occurances of spaces with +

$search = $facebook->api('/search?q='.$q.'&type=post&limit=10');

foreach ($search as $key=>$value) {
  foreach ($value as $fkey=>$fvalue) {
    print_r ($fvalue);
  }
} 
```

# c# - Winforms ComboBox 仅在项目更改时触发事件

> ID：13582140
> 
> 赞同：0
> 
> 时间：2012-11-27T10:26:03.823
> 
> 标签：c#, .net, winforms

我有`ComboBox`几个项目。我已经为事件添加了一个事件处理程序`SelectedIndexChanged`。假设列表有两个项目，A 和 B。如果当前选择的项目是 A，而用户将其更改为 B，则触发事件，这没关系。但是，如果用户单击`ComboBox`并再次单击 A（意味着该项目实际上并未更改），则仍会触发该事件。我希望仅在项目确实发生变化或允许我完成此操作的情况下才触发该事件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T10:35:55.170

如果您不打算`ComboBox`以图表方式更改选择，请尝试使用`SelectionChangeComitted`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T10:44:40.817

最好将此逻辑封装在派生自 ComboBox 的类中（在我的示例中为 ComboBoxEx）

```
private class ComboBoxEx : System.Windows.Forms.ComboBox
    {
        Int32 _lastIndex = -1;
        protected override void OnSelectedIndexChanged(System.EventArgs e)
        {
            if (_lastIndex == -1)
            {
                _lastIndex = this.SelectedIndex;
                base.OnSelectedIndexChanged(e);
            }
            else
                if (_lastIndex != this.SelectedIndex)
                {
                    base.OnSelectedIndexChanged(e);
                    _lastIndex = this.SelectedIndex;
                }
        }
    } 
```

并像这样使用它：

```
public Form1()
    {
        var combobox = new ComboBoxEx() { DropDownStyle = ComboBoxStyle.DropDownList };
        combobox.Items.Add("Item 1");
        combobox.Items.Add("Item 2");
        combobox.Items.Add("Item 3");
        this.Controls.Add(combobox);
        combobox.SelectedIndexChanged += OnIndexChanged;

        InitializeComponent();
    }

    private void OnIndexChanged(object sender, EventArgs e)
    {
        MessageBox.Show("Index changed");
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T10:32:55.403

我想这就是你的意思：

```
int intIndex; //Global Variable
//In your ComboBox_SelectedIndex Changed event
if(myComboBox.SelectedIndex != intIndex) 
{
   //your code
   intIndex = myComboBox.SelectedIndex;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-27T10:36:33.273

只需将事件处理程序添加到 TextChanged 事件而不是 SelectedIndexChanged 即可解决我的问题。这适用于我的情况，因为我可以确定 ComboBox（这是一个下拉列表）中没有两个项目将具有相同的文本。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-27T10:33:28.180

一种解决方案是将组合框数据绑定到模型类中的属性。然后模型应该实现接口 INotifyPropertyChanged （并正确触发它，因此仅在值更改时）。然后，您可以使用 PropertyChanged 事件来处理控件选择的更改，并且仅在发生实际更改时才会触发此事件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-27T10:35:34.637

您可以使用 ComboBox 的 SelectedIndex 定义一个 int 变量，然后您可以检查该变量是否与索引具有相同的值。如果是，不要做任何事情，否则做这些事情。

```
int lastIndex = myComboBox.SelectedIndex; 
```

然后在 SelectedIndexChangedEvent 中：

```
if(lastIndex != myComboBox.SelectedIndex){
     //do something
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-15T17:11:40.907

在您的**InitializeComponent()**中，将其放入您的组合框中

```
private void InitializeComponent()
{
   ///combobox
   ///This line will triger if the combobox has changed
   this.combobox.SelectedIndexChanged += System.EventHandler(this.comboboxChanged);
} 
```

然后在您的主要方法中创建组合框方法，例如

```
private string previousValue;

Private void comboboxChanged(object sender, EventArgs e)
{
    if (combobox.Text == "A" && previousValue == "A")
        {
            //Do nothing
            previousValue = "A";
        }
    else if (combobox.Text == "B" && previousValue == "B")
        {
            //Do Nothing
            previousValue = "B";
        }
    else if (combobox.Text == "A")
        {
            //Do Something
            previousValue = "A";
        }
    else if (combobox.Text == "B")
        {
            //Do Something
            previousValue = "B";
        }
} 
```

# python - 推断字符串中的数据类型

> ID：13582142
> 
> 赞同：4
> 
> 时间：2012-11-27T10:26:05.160
> 
> 标签：python, type-conversion

我想尝试推断字符串中的数据类型。

**场景：**
我有一个包含数据行的 CSV 文件，我想将这些数据存储在数据库中。
我不想将所有字段都存储为字符串。
由于 CSV 中的字段可能会更改，因此我无法假设它们的类型。

**示例（CSV 文件）：**

```
[Row 1 - column names] --> "name", "age" , "children"
[Row 2 - data row    ] --> "John", "45.5", "3"
...
[Row n - data row    ] --> ... 
```

在这种情况下，通过查看行中的数据，我想推断这`name`是一列字符串，`age`一列浮点数，`children`一列整数。

**我的尝试：**
最简单的方法是尝试转换，并在某个转换成功时决定类型。
我为此目的编写了一个方法，如下所示：

```
def deduceType(str):
    try:
        #first try to convert to int:
        int(str)
        return 0 #integer
    except ValueError:
        try:
            #not integer, try float:
            float(str)
            return 1 #float
        except ValueError:
            #not float, so deduct string
            return 2 #string 
```

**我的问题：**
问题是，如果我希望能够推导出更多数据类型（布尔值、长整数、无符号数字类型等），那么这种方法会变得麻烦且不准确。

有没有更整洁、更高效、更严谨的方法来做到这一点？

**答案（编辑）：**
基于 Martijn Pieters 的回答，我正在这样做：

```
def deduceType(str):
    try:
        return type(ast.literal_eval(str))
    except ValueError:
        return type('') #string 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T10:29:32.893

使用价值[`ast.literal_eval()`](http://docs.python.org/2/library/ast.html#ast.literal_eval)；它会将其解释为 python 文字。如果失败，你有一个字符串代替。

```
>>> import ast
>>> ast.literal_eval("45.5")
45.5
>>> ast.literal_eval("3")
3
>>> ast.literal_eval("John")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/ast.py", line 68, in literal_eval
    return _convert(node_or_string)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/ast.py", line 67, in _convert
    raise ValueError('malformed string')
ValueError: malformed string 
```

# ruby-on-rails - 带有选择的 Rails 编辑表单

> ID：13582148
> 
> 赞同：0
> 
> 时间：2012-11-27T10:26:30.063
> 
> 标签：ruby-on-rails, ruby, forms, select

我用脚手架在我的 Rails 项目中创建了一个表单。所有字段都是字符串或文本，其中一些我已在视图中声明为选择字段，例如：

```
<div class="field">
    <%= f.label :device %><br />
    <%= f.select :device, options_for_select([["iPhone", "iPhone"], ["iPad", "iPad"], ["All", "All"]]) %>
</div> 
```

创建和查看元素没有问题。但是当我编辑字段时，表单中加载的值是默认值，而不是保存的值。

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:35:09.203

您错误地使用了 options_for_select，它返回 HTML 选项文本，而实际上 f.select 调用只需要数组。

这将为您工作：

```
<div class="field">
    <%= f.label :device %><br />
    <%= f.select :device, [["iPhone", "iPhone"], ["iPad", "iPad"], ["All", "All"]] %>
</div> 
```

# c++ - Itanium ABI 在多大程度上真正指定了填充和对齐？

> ID：13582153
> 
> 赞同：12
> 
> 时间：2012-11-27T10:26:36.687
> 
> 标签：c++, gcc, abi

我已被告知了：

> [ABI] 保证结构的精确布局、每个成员的字节偏移、哪些位用于位字段、填充的位置和数量等......

但我一直认为填充和对齐是未指定且不可靠的。

[Itanium ABI](http://mentorembedded.github.com/cxx-abi/abi.html)（GCC 使用）实际上是否指定了这些东西（据*我*所知，[它似乎没有](http://mentorembedded.github.com/cxx-abi/abi.html#layout)超出指定范围）？

如果确实如此，那么诸如此类的选项如何`__attribute__ ((packed))`适应呢？他们最终会通过改变事物的对齐方式来破坏 ABI 吗？

或者，正如引用者所暗示的那样，只是在工具链之间进行未指定的打包，但实际上是可靠且*可预测的*在使用某个 ABI然后，再一次，像这样的东西是如何`__attribute__ ((packed))`适应的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:47:12.170

ISO 标准 C++ 规范未指定填充和对齐，因此不可靠。

在引文中使用“精确”一词是夸大其词。Itanium ABI（GCC 使用）可以根据需要指定这些内容（如在指定范围内），而不是*总是和**精确**地*。

假设预先确定的目标架构和环境，即使用工具链，打包实际上是可靠和可预测的。ABI。当适用于工具链的所有目标特定细节都`__attribute__ ((packed))`像任何其他构造一样预先确定时，将为工具链正确工作生成可预测的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T10:39:28.900

您需要遵循通过引用并入的标准的文档。

大多数类型的大小和对齐方式都在 Intel *System V ABI*规范中指定；例如，`long long`类型`long double`的大小和对齐方式记录在*Unix System V Application Binary Interface, Itanium Processor Supplement* (no. 245370-001), table 3-1 *Additional Fundamental Data Types*中。

找到标准的权威副本有点困难，尤其是在没有真正的标准流程的情况下。[http://www.x86-64.org/documentation/abi.pdf](http://www.x86-64.org/documentation/abi.pdf)包含了 LP64 ABI 中所有类型的大小和对齐方式的一个很好的参考，尽管它不包括 ILP32 ABI。

`__attribute__((packed))`当然是 gcc 特定的，`#pragma pack`对于 MSVC 也是如此。您也许可以使用编译器兼容性特性来获得跨编译器的结构的一致布局，但是仅仅因为实现了兼容性特性就假设行为是相同的并不是一个好主意；您应该测试大小和键偏移是否相同。

# php - 如何通过简单的 html dom 解析器在 php 中解析它

> ID：13582156
> 
> 赞同：1
> 
> 时间：2012-11-27T10:26:44.213
> 
> 标签：php, dom, html-parsing

```
<div id="productDetails" class="tabContent active details">
<span>
<b>Case Size:</b>
</span>
44mm
<br>

<span>
<b>Case Thickness:</b>
</span>
13mm
<br>

<span>
<b>Water Resistant:</b>
</span>
5 ATM
<br>

<span>
<b>Brand:</b>
</span>
Fossil
<br>

<span>
<b>Warranty:</b>
</span>
11-year limited
<br>

<span>
<b>Origin:</b>
</span>
Imported
<br>

</div> 
```

如何通过 PHP 中的 DOM 解析器获取 44mm、化石等数据？

我可以轻松获得的数据

`$data=$html->find('div#productDetails',0)->innertext;`

`var_dump($data);`

但我想在我的 sql 表的 meta_key 和 meta_value 中打破它......我可以`meta_key`通过

`$meta_key=$html->find('div#productDetails span',0)->innertext;`

但是与之相关的元值？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:32:35.863

这并不难，真的……[只要谷歌，然后点击这个链接](http://www.php.net/manual/en/domdocument.loadhtml.php)，你现在知道如何解析一个 DOM，[在这里](http://php.net/manual/en/class.domdocument.php)你可以看到你可以使用哪些方法来选择所有感兴趣的元素，迭代 DOM，获取它的内容和你有什么...

```
$DOM = new DOMDocument();
$DOM->loadHTML($htmlString);
$spans = $DOM->getElementsByTagName('span');
for ($i=0, $j = count($spans); $i < $j; $i++)
{
    echo $spans[$i]->childNodes[0]->nodeValue.' - '.$spans[$i]->parentNode->nodeValue."\n";
} 
```

如果我没记错的话，这似乎就是你所追求的。这只是我的想法，但我认为这应该输出如下内容：

```
Case Size: - 44mm
Case Thickness: - 13mm 
```

**更新：**
这是一个经过测试的解决方案，如果我没记错的话，它会返回所需的结果：

```
$str = "<div id='productDetails' class='tabContent active details'>
            <span>
                <b>Case Size:</b>
            </span>
            44mm
                        <br>

            <span>
                <b>Case Thickness:</b>
            </span>
            13mm
                        <br>

            <span>
                <b>Water Resistant:</b>
            </span>
            5 ATM
                        <br>

            <span>
                <b>Brand:</b>
            </span>
            Fossil
                        <br>

            <span>
                <b>Warranty:</b>
            </span>
            11-year limited
                        <br>

            <span>
                <b>Origin:</b>
            </span>
            Imported
                        <br>
    </div>";
$DOM = new DOMDocument();
$DOM->loadHTML($str);
$txt = implode('',explode("\n",$DOM->textContent));
preg_match_all('/([a-z0-9].*?\:).*?([0-9a-z]+)/im',$txt,$matches);
//or if you don't want to include the colon in your match:
preg_match_all('/([a-z0-9][^:]*).*?([0-9a-z]+)/im',$txt,$matches);
for($i = 0, $j = count($matches[1]);$i<$j;$i++)
{
    $matches[1][$i] = preg_replace('/\s+/',' ',$matches[1][$i]);
    $matches[2][$i] = preg_replace('/\s+/',' ',$matches[2][$i]);
}
$result = array_combine($matches[1],$matches[2]);
var_dump($result);
//result:
array(6) {
    ["Case Size:"]=> "44mm"
    ["Case Thickness:"]=> "13mm"
    ["Water Resistant:"]=> "5"
    ["ATM Brand:"]=> "Fossil"
    ["Warranty:"]=> "11"
    ["year limited Origin:"]=> "Imported"
} 
```

要将其插入您的数据库：

```
foreach($result as $key => $value)
{
    $stmt = $pdo->prepare('INSERT INTO your_db.your_table (meta_key, meta_value) VALUES (:key, :value)');
    $stmt->execute(array('key' => $key, 'value' => $value);
} 
```

*编辑*
要完全捕获`11-year limit`子字符串，您需要像这样编辑上面的代码：

```
//replace $txt = implode('',explode("\n",$DOM->textContent));etc... by:
$txt = $DOM->textContent;//leave line-feeds
preg_match_all('/([a-z0-9][^:]*)[^a-z0-9]*([a-z0-9][^\n]+)/im',$txt,$matches);
for($i = 0, $j = count($matches[1]);$i<$j;$i++)
{
    $matches[1][$i] = preg_replace('/\s+/',' ',$matches[1][$i]);
    $matches[2][$i] = preg_replace('/\s+/',' ',$matches[2][$i]);
}
$matches[2] = array_map('trim',$matches[2]);//remove trailing spaces
$result = array_combine($matches[1],$matches[2]);
var_dump($result); 
```

输出是：

```
array(6) {
  ["Case Size"]=> "44mm"
  ["Case Thickness"]=> "13mm"
  ["Water Resistant"]=> "5 ATM"
  ["Brand"]=> "Fossil"
  ["Warranty"]=> "11-year limited"
  ["Origin"]=> "Imported"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:34:10.500

您可以使用 set_callback Api 删除 span 标签

试试这个

```
$url = "";

$html = new simple_html_dom();
$html->load_file($url);
$html->set_callback('my_callback');

$elem = $html->find('div[id=productDetails]');

$product_details = array();
$attrib = array( 1 => 'size', 2 => 'thickness', 3 => 'wr', 4 => 'brand', 5 => 'warranty', 6 => 'orgin' );

$attrib_string = strip_tags($elem[0]->innertext);
$attrib_arr = explode('        ',$attrib_string); // hope this can help you for every product 
// Remove Empty Values
$attrib_arr = array_filter($attrib_arr);

$i = 1;
foreach($attrib_arr as $temp)
{
   $product_details[$attrib[$i]] = $temp;
$i++;
}

print_r($product_details);

// remove span tag inside div
function my_callback($element) {
if($element->tag == 'span'){  $element->outertext = ""; }
} 
```

# yii - 在 yii 中如何包含 php 文件并访问其输入

> ID：13582159
> 
> 赞同：0
> 
> 时间：2012-11-27T10:26:50.773
> 
> 标签：yii

在 yii 中，我想创建简单的 password.php 文件，并且只想提供一个用于输入电子邮件 ID 和提交按钮的文本字段。该文件不属于任何模型。在 actionpassword 方法中，我想访问此电子邮件 ID 以进行进一步处理。那么在哪里创建这个文件，在哪里写actionpassword方法。我对 yii 框架很陌生。所以请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:58:50.977

如果你使用 Yii - 使用 Yii。你需要行动和观点。
在您的控制器中：

```
public function actionPassword() {
    if (isset($_POST['email'])) {
       $email = $_POST['email'];
       //process email....
       //....
    }
    $this->render('_emailForm');
} 
```

查看'./views/yuorControllerId/_emailForm.php'

```
<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'email-form',
    'enableClientValidation'=>true,
    ));
echo CHtml::textField('email');
echo CHtml::submitButton('Send');
$this->endWidget(); 
```

# eclipse - 我们在 Eclipse 中指定放置已构建类的位置？

> ID：13582161
> 
> 赞同：0
> 
> 时间：2012-11-27T10:27:04.910
> 
> 标签：eclipse, tomcat

我正在查看以下位置

```
/media/public_/workspaces/workspacemy/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/ 
```

即使在干净的构建之后也什么都没有。

只有在清理 Tomcat 之后才会出现一个类。

我想知道 Eclipse 是否构建了我的类并尝试放置一些错误的地方？

如果是这样，我可以在哪里配置那个地方。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:31:37.110

右键单击项目名称，单击属性。选择构建路径（在左窗格中），然后转到源文件夹选项卡。在底部，您可以指定默认目标位置，也可以通过单击每个源文件夹分别为每个源文件夹指定目标位置。

# web-applications - 如果使用 webdeploy 发布，如何自动运行 app_start 文件夹下的文件

> ID：13582162
> 
> 赞同：1
> 
> 时间：2012-11-27T10:27:03.980
> 
> 标签：web-applications, asp.net-mvc-4, web-deployment, webdeploy, app-startup

在我的 asp.net MVC4 项目中，我在 app_start 文件夹下有几个 .cs 文件需要初始化或执行每个授权任务等。当您访问该网站时，他们需要花费大量时间在应用程序启动时执行所有这些任务第一次。部署时是否可以自动运行 app_start 文件夹下的所有文件。因此，当有人第一次访问该网站时，它不会花费太多时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:41:16.880

看看[自动启动您的应用程序](http://weblogs.asp.net/scottgu/archive/2009/09/15/auto-start-asp-net-applications-vs-2010-and-net-4-0-series.aspx)

将此添加到您的 applicationHost.config

```
<sites>    
     <site name="MySite" id="1">    
          <application path="/" 
                       serviceAutoStartEnabled="true" 
                       serviceAutoStartProvider="PreWarmMyCache" />    
     </site>    
</sites>
<serviceAutoStartProviders>
     <add name="PreWarmMyCache" type="PreWarmCache, MyAssembly" />
</serviceAutoStartProviders> 
```

以及以下内容以预加载您的工作

```
public class PreWarmCache : System.Web.Hosting.IProcessHostPreloadClient {

    public void Preload(string[] parameters) {

        // Perform initialization and cache loading logic here...

    }

} 
```

# android - 更新gridview时如何避免闪烁？

> ID：13582165
> 
> 赞同：7
> 
> 时间：2012-11-27T10:27:10.913
> 
> 标签：android, android-imageview, android-gridview

我有一个网格视图。我正在显示 10 个图像阵列中的图像。1 分钟后，我又添加了 5 张图片。要更新 gridview，我使用以下代码。

```
aImgAdapterL.notifyDataSetChanged(); 
```

**aImgAdapterL**是我的 ImgaeAdapter。新图像正在显示。
我的问题是在更新图像更新期间发生闪烁或闪烁的网格视图时。是否可以隐藏闪烁？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-07-17T12:10:11.407

我有同样的问题并且能够像这样解决它：

事实上，这是由于我`ListAdapter`在刷新整个列表时没有正确处理这种情况。如果是这样，您要做的是保持屏幕上已显示的项目原样。

为此，在`getView`Adapter 的方法中，当您获得回收物品时，您必须检查它是否已经不是您要显示的物品。如果是这种情况，直接退货就行了。

```
@Override
public View getView(int position, View convertView, ViewGroup container) {
    ImageView imageView;
    String src = this.getItem(position).getSrcThumbnail();
    if (convertView == null) {
        imageView = new ImageView(getContext());
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);

        int height = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 120, getResources().getDisplayMetrics());

        imageView.setLayoutParams(new GridView.LayoutParams(GridView.LayoutParams.MATCH_PARENT, height));

    } else {
        imageView = (ImageView) convertView;

        // When you get a recycled item, check if it's not already the one you want to display.
        String newSrc = (String) imageView.getTag();

        if(newSrc.equals(src)){
            // If so, return it directly.
            return imageView;
        }
    }

    loadBitmap(this.getItem(position).getSrcThumbnail(), imageView);

    // Here you set the unique tag that allow to identify this item.
    imageView.setTag(src);

    return imageView;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-17T03:03:02.247

如果您的适配器具有稳定的 ID，请覆盖`hasStableIds`以返回`true`。

Grep[此处](http://goo.gl/Nq4kpQ)`android.GridView`的源代码，它允许网格视图重用相同数据的视图，而不是进行完全重绘。这可能对 OP 的情况有所帮助，因为默认情况下返回.`hasStableIds``false`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-19T10:15:13.057

解决方案是在图像未更改时不重新加载图像。

在你的适配器 getView() 做：

```
// schedule rendering:
final String path = ... (get path here);
if (holder.lastImageUrl == null || !holder.lastImageUrl.equals(path)
                || holder.headerImageView.getDrawable() == null) {
    // refresh image
    imageLoader.displayImage(imageUri, imageAware);
} else {
    // do nothing, image did not change and does not need to be updated
} 
```

成功时（添加 ImageLoadingListener）设置 holder.lastImageUrl = path，失败并取消设置 holder.lastImageUrl 为 null，以便下次重新加载。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-18T13:04:51.820

闪烁是因为更新 UI 很繁重。请检查天气，您正在执行 cpu 密集型功能，例如适配器的 getview() 中的图像裁剪。想法是保持 getview() 函数简单，并单独执行处理密集型逻辑线程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-04T05:37:14.947

在显示图像时使用[nostra13 的通用图像加载器](https://github.com/nostra13/Android-Universal-Image-Loader)，在显示时设置一些动画。

```
...DisplayImageOptions.displayer(FadeInBitmapDisplayer)... 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-02T07:26:15.887

## 在这里，我写了一个详细的示例，如何使用 viewholder 模式：

> [使用这种方法，您可以避免闪烁。](https://codereview.stackexchange.com/questions/95225/custom-listadapter-with-viewholder-pattern/95543#95543)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-14T06:52:24.440

不考虑实际视图大小的通过`ImageViewAware`（而不是 ImageView）：而不是：

```
imageLoader.displayImage(imageUri, imageView); 
```

执行以下操作：

```
ImageAware imageAware = new ImageViewAware(imageView, false)
imageLoader.displayImage(imageUri, imageAware); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-09-29T22:51:32.547

您应该启用 OpenGL 和硬件加速：

```
<application android:hardwareAccelerated="true" ...>

<uses-feature
  android:name="string"
  android:required=["true" | "false"]
  android:glEsVersion="integer" /> 
```

您还可以对 gridview 的项目使用硬件缓存：

```
view.setLayerType(View.LAYER_TYPE_SOFTWARE, null); 
```

最后，您可以在更新期间覆盖您的网格视图并使用透明度。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-08-16T19:48:21.950

简单的解决方案是 1) 在您的适配器中有一个方法，它将您的新数据列表附加/重置到旧数组列表中，而不是调用`notifyDataSetChanged()` 当用户滚动时，getview 将被调用，因此列表将被更新。它不应该闪烁。

例如 `// Have a method in adapter class public void updateList(ArrayList<ABC> list) { /`在此处输入代码`/添加到旧的 oldList.addAll(list); }

就是这样`

# c++ - Win32：删除应用程序选项卡时将最小化的窗口返回到顶部

> ID：13582167
> 
> 赞同：1
> 
> 时间：2012-11-27T10:27:13.080
> 
> 标签：c++, c, windows, winapi

我需要您的帮助：从任务栏中删除窗口选项卡后，我无法恢复/激活最小化窗口。

通常我使用：

```
if (IsIconic(hwnd)) {
    ShowWindow(hwnd, SW_RESTORE);
} 
```

这很好用。

但。

[当使用ITaskbarList 接口](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774648%28v=vs.85%29.aspx)从任务栏中删除应用程序选项卡时，调用`ShowWindow(SW_RESTORE)`失败。

谢谢！

# css - 层被另一层隐藏

> ID：13582168
> 
> 赞同：-1
> 
> 时间：2012-11-27T10:27:25.187
> 
> 标签：css

我想，z-index 有问题。我设置了 z-index:999999 ...

```
z-Index:9999999!important; 
```

非常大的价值，但层不断被覆盖。要复制此问题，请访问[http://copy.barchick.com/calendar/](http://copy.barchick.com/calendar/)并尝试`...`在 THU 1 上按红色按钮展开，然后按 SUN 4 red '...' 或其他按钮，其他按钮将正确显示但不显示THU 1 即使所有盒子都相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:29:12.457

`I`z-index 属性中的 是小写的。还要确保在元素上设置相对位置或绝对位置。

```
z-index:9999999 !important; 
```

# perl - 嵌套哈希/数组中的 Perl Grep 问题

> ID：13582170
> 
> 赞同：0
> 
> 时间：2012-11-27T10:27:29.850
> 
> 标签：perl

我想删除其值中包含“本地”字符串的值。这是我的哈希输出（`print Dumper ($hash)`）：

```
$VAR1 = {
          'FARM_03' => [
                           'nfs01',
                           'nfs02',
                           'nfs03',
                           'localvmfs',
                           'localvmfs'
                           ],
          'FARM_07' => [
                           'nfs01',
                           'localvmfs',
                           'localvmfs'
                           ],
          'FARM_11' => [
                           'nfs01',
                           'localvmfs',
                           'localvmfs'
                           ]
        }; 
```

因此，我在脚本中编写了以下代码以省略“本地”条目：

```
foreach my $key ( keys %$hash )
{
    @{ $hash->{key} } = grep { !/local/i } @{ $hash->{key} };
} 
```

这是运行以上 grep 命令后的输出：

```
$VAR1 = {
          'FARM_03' => [
                           'nfs01',
                           'nfs02',
                           'nfs03',
                           'localvmfs',
                           'localvmfs'
                           ],
          'FARM_07' => [
                           'nfs01',
                           'localvmfs',
                           'localvmfs'
                           ],
          'FARM_11' => [
                           'nfs01',
                           'localvmfs',
                           'localvmfs'
                           ]
          'key' => []
    }; 
```

它没有删除“本地”条目，而是添加了一个新字段`'key' => []`。

你能告诉我我的 grep 语句有什么问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T10:30:39.477

你有`{key}`你的意思`{$key}`（两次）。

# android - 在 TextView 中自动滚动文本

> ID：13582171
> 
> 赞同：0
> 
> 时间：2012-11-27T10:27:35.023
> 
> 标签：android, autoscroll, android-scrollview, android-scroll, android-scrollbar

我有特定高度的文本视图，并且该文本视图中有很多句子。我已经在该文本视图中实现了滚动条以查看全部内容。但我想实现自动滚动，但我没有办法实现这种自动滚动。

这是我的 xml 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="wrap_content"
  android:layout_height="fill_parent"
  android:orientation="vertical"
  android:weightSum="1"  
  >

  <TextView 
        android:id="@+id/lyricView"
        android:layout_width="fill_parent"
        android:layout_height="250dp"       
        android:width="200dp"
        android:textStyle="bold"
        android:textColor="#ffffff"
        android:gravity="center"
        android:maxLines="16"
        android:scrollbars = "vertical"
        android:paddingTop="8dp"
        android:paddingBottom="5dp"
        android:layout_marginTop="67dp"
        android:background="#80000000"
        />

</LinearLayout> 
```

请帮我解决我的问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:26:54.997

我做了这样的事情

```
android:text="                                     Please take your belongings after check out."
    android:singleLine="true"
    android:textColor="#000000"

    android:ellipsize="marquee"
    android:marqueeRepeatLimit="marquee_forever"
    android:layout_marginTop="150dp"
    android:scrollHorizontally="true"
    android:id="@+id/TextView03"
    android:padding="5dip" 
    android:textSize="55dp"
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" /> 
```

我认为缺少“选框”基础......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:33:33.653

一个例子 ：

```
public class TextViewMarquee extends Activity {
    private TextView tv;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        tv = (TextView) this.findViewById(R.id.tv);  
        tv.setSelected(true);  // Set focus to the textview
    }
} 
```

在 XML 中：

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TextView
        android:id="@+id/mywidget"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:lines="1"
        android:ellipsize="marquee"
        android:fadingEdge="horizontal"
        android:marqueeRepeatLimit="marquee_forever"
        android:scrollHorizontally="true"
        android:textColor="#ff4500"
        android:text="this is a very long piece of text that will move" />
</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:35:14.450

根据您的需要，这对我有用。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout01"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ScrollView
        android:layout_width="wrap_content"
        android:layout_height="fill_parent" >

        <TextView
            android:id="@+id/lyricView"
            android:layout_width="200dp"
            android:layout_height="250dp"
            android:layout_marginTop="67dp"
            android:background="#80000000"
            android:scrollbars="vertical"
            android:text="@string/extra"
            android:textColor="#ffffff"
            android:textStyle="bold" />
    </ScrollView>

</LinearLayout> 
```

如果你想隐藏滚动然后使用这个 `android:scrollbars="none"`。

# jquery - 带有 facebook api 的 Ajax jquery

> ID：13582175
> 
> 赞同：0
> 
> 时间：2012-11-27T10:27:45.313
> 
> 标签：jquery, ajax, facebook-graph-api

我正在尝试使用 jquery 解析用户喜欢的所有 id。这就是我所做的，但它不起作用。

```
 $("#demo").live("click", function () {   

       var url="https://graph.facebook.com/facebookid/likes?access_token=XXXX?callback=?";

        $.getJSON(url, function(item){
         $.each(item.data, function(i,like) {
           var name = like.id;
           $("#dv").append(name);
           });
        });

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:13:22.940

您不能使用简单的 AJAX（$.get、$.post、$.ajax）请求其他域。你会读到关于 JSONP... 或关于 FB JA \S \

# ios - iPad 第三代无法显示视网膜图像

> ID：13582176
> 
> 赞同：0
> 
> 时间：2012-11-27T10:27:45.813
> 
> 标签：ios, xcode, xcode4.5

我开发了一个通用应用程序。我有四种类型的图像

*   iphone - 简单.png
*   iphone视网膜-simple@2x.png
*   ipad - 简单@3x.png
*   ipad 视网膜 - simple@3x@2x.png

当我尝试运行该应用程序时，它在 ipad（非视网膜）中运行良好，但在 ipad 视网膜中出现黑屏（无图像）。

在这里，放置函数代码，它为我提供了 iphone 和 ipad 的相关名称。

```
#define SHImageString(str, ext) ({ UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone ? ([NSString stringWithFormat:@"%@.%@", (str), (ext)]) : ([NSString stringWithFormat:@"%@@3x.%@", (str), (ext)]); }) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:33:53.973

它应该是这样的：

*   iphone-simple.png
*   iphone视网膜-simple@2x.png
*   ipad - simple_iPad.png
*   ipad 视网膜 - simple_iPad@2x.png

在您的代码（或 XIB）中，您只能使用没有`@2x`. 如果应用程序在视网膜显示器上运行，它将自动使用该`@2x`版本。这个我用过很多次了，完美。

# objective-c - UIAlertView 和内存泄漏

> ID：13582180
> 
> 赞同：0
> 
> 时间：2012-11-27T10:27:52.200
> 
> 标签：objective-c, ios

```
UIAlertView* av = [UIAlertView alloc];

int a = [self somefunc];
if (a == 1) 
{
    [[av initWithTitle:nil message:@"test msg 1" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil] show];
} 
else if (a == 2) 
{
    [[av initWithTitle:nil message:@"test msg 2" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil] show];
} 

[av release]; 
```

当我在此代码上运行分析时，我在行收到错误“引用计数的对象在它被释放后被使用”`[av release];`

我能知道，在哪里发布了 av，UIAlertView 的显示功能是否发布了 av？

**奇怪的是，下面的代码在使用分析工具时没有显示任何错误**

```
if (a == 1) 
{

    UIAlertView* av = [[UIAlertView alloc] initWithTitle:nil message:@"test msg 1" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [av show];
    [av release];
} 

else if (a == 2) 
{
    UIAlertView* av = [[UIAlertView alloc] initWithTitle:nil message:@"test msg 1" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [av show];
    [av release];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:45:13.233

在您的第一个代码中，对象“av”不确定是否被初始化，如果 a 的值不是 1 0r 2 怎么办？av 不会被初始化，所以当你发布它时会有一些问题。

在您的第二个代码中，av 的范围对于 if 和 else 的条件变得更加具体或本地化。这就是为什么 xcode 确定 av 将被初始化并且释放 av 是安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T10:57:11.700

您必须始终使用任何`init`调用的返回值，因为`init`函数可以返回不同的值。因此，如果你真的想分开`alloc`，`init`那么你必须这样做：

```
UIAlertView *av = [UIAlertView alloc];
// ...
av = [av initWithTitle:...]; // Might change the value of av !!
[av show];
[av release]; 
```

您的代码中的“虚假发布”发生在这里：

```
[av initWithTitle:...] 
```

因为这可能（如上所述）释放`av`并返回不同的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T10:46:40.130

`show`函数没有释放`UIAlertView`if 它是这里的问题（在第二个代码中）。

# jakarta-ee - 无状态 bean 不工作

> ID：13582183
> 
> 赞同：2
> 
> 时间：2012-11-27T10:28:13.317
> 
> 标签：jakarta-ee, ejb

我写了一个无状态会话 bean。然后还包括一个将余额加到实例变量中的业务方法。因为它是一个无状态的bean，它不应该保持之前的平衡。

但它正在维护它。

IE，

首先我添加 100 作为余额，我再次添加 100 作为余额。

根据理论，它应该给出 100 作为结果，因为它不保持状态。但它给了200。

为什么？

我正在使用带有 Glassfish Server 3.0 的 Netbeans IDE

例如：

```
 @Stateless
public class CalculatorBean implements CalculatorBeanRemote {
    double bal = 0.0;

    @Override
    public double Deposit(double parameter)
    {
        bal += parameter;
        return bal;
    }

} 

```

在 Servlet 中，我添加了，

```
@EJB
private CalculatorBeanRemote calculatorBean; 
```

在服务方法内部， `out.println ("<br/><br/><br/>Deposit : " + calculatorBean.Deposit(100.0));`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T11:06:16.663

您期望获得 EJB 的不同实例，但情况并非总是如此。

EJB 通常是池化的，这意味着当您使用完 EJB 后，它会返回到池中，并且另一个调用可能会获得相同的对象。

容器不会清理你的成员，所以你得到 200 而不是 100。

您可以使用 PostContrsuct 和 PreDestroy 来设置和清理您获得的 EJB。

一般来说，您不应该在无状态 bean 中使用任何成员（正是因为您所看到的）

# c - sscanf() 是否支持“递归”缓冲区？

> ID：13582185
> 
> 赞同：5
> 
> 时间：2012-11-27T10:28:39.103
> 
> 标签：c, scanf

我做了一些研究以寻找`sscanf()`源代码。但我找不到我的问题的答案。

当我们这样使用时`sscanf()`：

```
char str[50] = "5,10,15";
int x;
sscanf(str,"%d,%s",&x,str); 
```

sscanf() 是否支持“递归”缓冲区`str`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T10:52:18.573

scanf 系列函数读取格式说明符并逐一进行转换。在您的示例代码中：

```
char str[50] = "5,10,15";
int x;
sscanf(str,"%d,%s",&x,str); 
```

它可能会起作用，因为它首先读取一个整数和另一个 c 字符串。这里没有问题，因为原始`str`值被新值覆盖。

但请考虑以下几点：

```
char str[50] = "5 10 15";
int x;
sscanf(str,"%s %d",str, &x); 
```

它首先`5`从原始值读取并覆盖`str`，随后的格式说明符`%d`将没有任何可读取的内容，因为由于先前读取的 nul 终止已经到达`str`末尾。`str``%s`

这只是一个反例，表明这是一个坏主意并且行不通。所以你可以说这会在某个时候调用未定义的行为或导致其他问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T10:44:42.947

它不会脱离自修改缓冲区。但是要使其（尾）递归，您必须阅读到字符串的末尾。
代码片段：

```
char str[]="5,10,15";
int a[10]={0},x = 0; 
while (sscanf(str,"%d,%s",a+ x++,str)>1); 
```

读取所有整数。

由于这不是真正的递归并且要读取的字符串不会覆盖字符串中的 asciiz，我相信这在含义上是“安全的”：只在家里尝试一下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T10:51:57.233

一般来说，我会建议不要这样做。如果它一旦起作用并不意味着它在所有极端情况下都会起作用。确实，您必须检查您正在使用的实现的来源。如果您希望它是可移植的，请立即忘记它，除非您在 libc 规范中看到它是一种有保证的行为。用于`strchr()`查找下一个分隔符并更新字符串指针以指向下一个字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-03T22:56:00.193

的使用`strtok()`解决了我遇到的几乎相同的问题，即递归地使用将 a （由空格分隔的双精度列表，例如）`sscanf()`的内容提取到双精度数组（例如，...）中。`char*``"1.00 2.01 ..."``array[1]=1.00``array[2]=2.01`

如果我相信我理解您的问题，以下内容可能会有所帮助：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int main(int argc, char** argv)
{
    char str[]= "5,10,15";
    char* token;

    int x[3];

    token = strtok(str, ",");

    for(int i=0; i<3; i++){

            sscanf(token, "%d", &x[i]);

            token = strtok(NULL, ",");

    }

    for(int i=0; i<3; i++) printf("%d\n", x[i]);

    return 0;
} 
```

在运行时，它会产生：

```
5
10
15 
```

有关. [_](http://www.cplusplus.com/reference/cstring/strtok/) _`strtok()`

# javascript - 带有Phonegap Build的Childbrowser插件 - 错误或不一致？

> ID：13582195
> 
> 赞同：1
> 
> 时间：2012-11-27T10:29:15.180
> 
> 标签：javascript, cordova, phonegap-plugins, childbrowser

我正在尝试在 Phonegap Build 中使用 Childbrowser 插件。我有几个问题：

1.  对于 iOS，我只能使用 PG2.0 让它工作。切换到 PG2.1 使其失效。
2.  对于 Android，适用于 iOS 和 PG2.0 的相同代码根本不起作用。

从 config.xml：

```
<preference name="phonegap-version" value="2.0.0" />
<gap:plugin name="ChildBrowser" /> <!-- latest release --> 
```

我使用了[https://github.com/alunny/ChildBrowser/blob/master/README.md中描述的 Javascript API](https://github.com/alunny/ChildBrowser/blob/master/README.md)

参考：[https ://build.phonegap.com/docs/plugins](https://build.phonegap.com/docs/plugins)

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:47:37.343

我认为您可能正在查看子浏览器插件的错误版本 - phonegap build 更有可能使用[https://github.com/phonegap/phonegap-plugins/tree/master/iOS/ChildBrowser](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/ChildBrowser)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T14:28:13.083

总结一下：

与 Phonegap Build 捆绑的 Childbrowser 插件需要 Phonegap 2.1 版才能与 Android 一起使用。2.0 和 2.1 版本都适用于 iOS。请记住在 config.xml 和 index.html 中设置 Phonegap 版本！

[https://github.com/alunny/ChildBrowser/blob/master/README.md](https://github.com/alunny/ChildBrowser/blob/master/README.md)是这个插件的正确存储库，至少在使用 Phonegap Build 时是这样。

# php - 删除服务器上的“锁定”文件夹

> ID：13582203
> 
> 赞同：0
> 
> 时间：2012-11-27T10:29:44.493
> 
> 标签：php, apache, file

我的服务器上有一个 opencart 文件夹，我想删除它，但是我不能，因为我的 FTP 客户端只是说：

> 550 shop_Opencart：不允许操作

我了解某些文件具有不同的权限等，但是为什么作为服务器管理员，我不能删除这些文件或更改文件权限？除了文件权限之外，还有什么可以阻止这些文件被删除或修改的吗？

即使使用控制面板（在这种情况下为 PLESK）我也无法删除它们，我收到`Permission denied`错误消息。

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:00:00.263

尝试使用您的 ftp 客户端对文件夹进行 chmod，然后将其删除。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-27T10:53:44.810

使用 Putty 作为 root 用户通过 SSH 连接并通过它进行更改。

# java - 在 Android 中的 TextView 上设置文本时出错

> ID：13582204
> 
> 赞同：0
> 
> 时间：2012-11-27T10:29:44.467
> 
> 标签：java, android, textview

我不断收到空指针错误，但我不知道为什么。有什么非常明显的我想念的吗？

```
final Dialog d = new Dialog(Start.this);
        // dialog.requestWindowFeature((int) Window.FEATURE_NO_TITLE);
        d.requestWindowFeature((int) android.view.Window.FEATURE_NO_TITLE);

        d.setContentView(R.layout.popuptwo);
        WindowManager.LayoutParams lp = new WindowManager.LayoutParams();
        lp.copyFrom(d.getWindow().getAttributes());
        lp.width = WindowManager.LayoutParams.MATCH_PARENT;
        lp.height = WindowManager.LayoutParams.MATCH_PARENT;
        d.show();

        d.getWindow().setAttributes(lp);
        TextView totaltxt = (TextView) findViewById(R.id.totaltxt);
            totaltxt.setText("Test text"); 
```

如果我删除`totaltxt.setText("Test text");`，那么程序不会崩溃。想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T10:32:04.077

文本视图属于对话框..所以你应该使用对话框的视图..

```
TextView totaltxt = (TextView) d.findViewById(R.id.totaltxt); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:34:00.393

做就是了..`TextView totaltxt = (TextView) d.findViewById(R.id.totaltxt); totaltxt.setText("Test text");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T10:34:18.263

因为它无法获得对话框的视图，所以，

替换这一行——

```
 TextView totaltxt = (TextView) findViewById(R.id.totaltxt); 
```

这样 -

```
 TextView totaltxt = (TextView) d.findViewById(R.id.totaltxt); 
```

这里 d 是你的对话对象。

# c# - protobuf-net 不序列化列表

> ID：13582208
> 
> 赞同：2
> 
> 时间：2012-11-27T10:29:53.690
> 
> 标签：c#, protobuf-net

我正在尝试序列化`List<T>`但得到空文件并且`List<T>`不会序列化。我没有得到任何异常并阅读 protobuf-net 手册，我要序列化的所有成员都标有`[ProtoContract]`和`[ProtoMember]`属性

```
public void Save()
{
    using (var outputStream = File.Create(SettingsModel.QueueListDataFile))
    {      
        Serializer.Serialize(outputStream, QueueList);
    }
}

[Serializable]
[ProtoContract]
public class QueueList : SafeList<QueueItem>
{

}

[Serializable]    
[ProtoContract]
public class SafeList<T> : SafeLock
{
    [ProtoMember(1)]
    private static readonly List<T> ItemsList = new List<T>();
}

[Serializable]
[ProtoContract]
public class QueueItem
{
    [ProtoMember(1)]
    public string SessionId { get; set; }
    [ProtoMember(2)]
    public string Email { get; set; }
    [ProtoMember(3)]
    public string Ip { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:51:11.783

protobuf-net 不查看静态数据；您的主要数据是：

```
private static readonly List<T> ItemsList = new List<T>(); 
```

AFAIK，**没有**序列化程序会看这个。序列化器是基于对象的；他们只对对象实例上的值感兴趣。除此之外，还有一个继承问题——你还没有为模型定义它，所以它会分别查看每一个。

以下工作正常，但坦率地说，我怀疑在这里简化 DTO 模型是明智的；像项目列表这样简单的东西不应该涉及 3 个层次结构......事实上，它不应该涉及**任何**-`List<T>`工作*得很好*。

* * *

```
using ProtoBuf;
using System;
using System.Collections.Generic;
using System.IO;
static class Program
{
    public static void Main()
    {
        using (var outputStream = File.Create("foo.bin"))
        {
            var obj = new QueueList { };
            obj.ItemsList.Add(new QueueItem { Email = "hi@world.com" });
            Serializer.Serialize(outputStream, obj);
        }
        using (var inputStream = File.OpenRead("foo.bin"))
        {
            var obj = Serializer.Deserialize<QueueList>(inputStream);
            Console.WriteLine(obj.ItemsList.Count); // 1
            Console.WriteLine(obj.ItemsList[0].Email); // hi@world.com
        }
    }
}
[Serializable]
[ProtoContract]
public class QueueList : SafeList<QueueItem>
{

}

[ProtoContract]
[ProtoInclude(1, typeof(SafeList<QueueItem>))]
public class SafeLock {}

[Serializable]
[ProtoContract]
[ProtoInclude(2, typeof(QueueList))]
public class SafeList<T> : SafeLock
{
    [ProtoMember(1)]
    public readonly List<T> ItemsList = new List<T>();
}

[Serializable]
[ProtoContract]
public class QueueItem
{
    [ProtoMember(1)]
    public string SessionId { get; set; }
    [ProtoMember(2)]
    public string Email { get; set; }
    [ProtoMember(3)]
    public string Ip { get; set; }
} 
```

# xaml - Visual Studio 2012 中没有 xaml 颜色格式

> ID：13582209
> 
> 赞同：10
> 
> 时间：2012-11-27T10:29:54.547
> 
> 标签：xaml, visual-studio-2012

这是我第二次安装 VS 2012，也是第一次为 xaml 设置颜色格式，但现在不行了。如果我可以更改工具中的某些元素-> 字体和颜色，但我无法用蓝色 | 恢复正常的默认方案。红色 | 黄色的外观，即使我改回默认值。

你能帮忙的话，我会很高兴。谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-16T16:11:11.757

我有这个完全相同的问题。解决方案是：

*   关闭所有正在运行的 Visual Studio 实例
*   打开“运行”窗口并输入`devenv /resetuserdata`

就是这样。再次打开您的项目，一切正常。请注意：您的个人设置将会丢失。最近打开的项目列表也。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-04T10:29:34.413

右键单击 .xaml 文件 -> 打开选项从列表中选择 HTML Editor With Encoding

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T12:17:12.437

您可以尝试工具->选项->环境->字体和颜色并将项目显示为使用默认值..正如gerdi建议的那样...另外确保在工具->选项->文本编辑器->常规下勾选所有选项。 .

# database - 为什么 oracle 每张表只允许一个 LONG 列？

> ID：13582213
> 
> 赞同：5
> 
> 时间：2012-11-27T10:30:20.740
> 
> 标签：database, oracle, blob

谁能告诉为什么 oracle 只允许每个表有一个“LONG”数据类型列。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T10:34:39.163

LONG 与表数据内联存储，因此 Oracle 可能因此将其限制为每个表一个（因为您将扫描大量块，因此性能受到影响），而 LOB 仅在前几 k 内内联存储，然后进入其余部分的 LOB 段。

由于 LONG 已完全贬值，而且处理起来非常痛苦，因此请尽可能远离它们。

# coq - 不能对归纳谓词使用倒置

> ID：13582215
> 
> 赞同：1
> 
> 时间：2012-11-27T10:30:30.880
> 
> 标签：coq, dependent-type

我被困在一个关于归纳谓词的简单证明上。我必须证明自然 0 不是正数，其中自然是位列表，而 0 是任何只有位为 0 的列表。

```
H1: pos Empt
____________ (1/1)
Nat 
```

[Certified Programming with Dependents Types](http://adam.chlipala.net/cpdt/)[这一](http://adam.chlipala.net/cpdt/html/Predicates.html)章似乎建议我使用`inversion`，但我收到一条错误消息。

```
Require Import Coq.Program.Program.

Inductive Bit: Type :=
  | Zer: Bit
  | One: Bit.

Inductive List (type1: Type): Type :=
  | Empt: List type1
  | Fill: type1 -> List type1 -> List type1.

Implicit Arguments Empt [[type1]].

Implicit Arguments Fill [[type1]].

Definition Nat: Type := List Bit.

Inductive pos: Nat -> Prop :=
  | pos_1: forall nat1: Nat, pos (Fill One nat1)
  | pos_2: forall nat1: Nat, pos nat1 -> forall bit1: Bit, pos (Fill bit1 nat1).

Program Fixpoint pred (nat1: Nat) (H1: pos nat1): Nat :=
  match nat1 with
  | Empt => _
  | Fill Zer nat2 => Fill One (pred nat2 H1)
  | Fill One nat2 => Fill Zer nat2
  end.

Next Obligation.
inversion H1. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:13:33.563

你`Theorem T1`的不等同于`Obligation`. 在后者中，您应该构建一个 的元素`Nat`，它本身就是 a `Type`（顺便说一句，您为什么不在这里使用`Set`？您似乎没有在此开发中操纵高阶类型）。

正如错误消息所说，您不能`inversion`对 for that 的元素执行案例分析（基于此）`Prop`（具体参见[Coq 手册](http://coq.inria.fr/distrib/V8.4/refman/)的第 4.5.4 节）。但是，在这种情况下，您对构建一个实际的 不感兴趣`Nat`，您只是想证明这种情况是不可能的。为此，您可以`apply False_rect`（或者`False_rec`如果您选择使用`Set`而不是`Type`），这将让您证明`False`. `False`作为一个`Prop`，你就可以使用`inversion H1`.

请注意，您的定义的第二个分支存在问题`pred`：您不能使用`(pred nat2 H1)`，因为`H1`不是`pos nat2`. 最简单的方法可能也是在这里留下一个洞：`(pred nat2 _)`，这可以用 an 轻松解决`inversion`（这一次，你必须建立一个类型的术语`pos nat2`，即存在于 中的东西`Prop`）。

# mysql - 如何使用 INNER JOIN 和 ORDER BY 优化 MySQL 查询

> ID：13582216
> 
> 赞同：6
> 
> 时间：2012-11-27T10:30:31.893
> 
> 标签：mysql, sql

鉴于此查询：

```
EXPLAIN
SELECT mi.*, i1.sizes as tile_photo_sizes,
       i1.filename as tile_photo_filename,
       v.title_cached as venue_title,
       v.subtitle_cached as venue_subtitle,
       v.slug as venue_slug
FROM menuitems mi
INNER JOIN images i1 ON i1.id = mi.tile_photo_id
INNER JOIN menus m ON m.id = mi.menu_id
INNER JOIN venues v ON v.id = m.venue_id
WHERE NOT m.is_deleted AND v.slug="teplo" AND
      m.is_published AND v.is_published
ORDER BY mi.number ASC 
```

我看到以下结果：

![在此处输入图像描述](../Images/57b62fee04d444bba454309a43c952c2.png)

我尝试为 , 和 中使用的每一列添加单独的索引`join`，`where`但`order by`它仍然使用临时文件。

我不想优化它，但有时这会导致只能由托管服务提供商修复的错误： `Can't create/write to file '/mysql-temp/#sql_64e0_0.MYD' (Errcode: 17)`

最大的表是 menuitems (6,867)，然后是图像 (944)、菜单 (85)、场所 (79)。

UPD：删除 ORDER BY 不使用临时文件

![在此处输入图像描述](../Images/1c752998d61ee0d0531f700581c386b9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:35:11.857

尝试更改您的查询，将主要的 JOIN 逻辑放在子查询中，看看 EXPLAIN 的性能是否更好：

```
EXPLAIN
SELECT * FROM (
    SELECT mi.*, i1.sizes as tile_photo_sizes,
       i1.filename as tile_photo_filename,
       v.title_cached as venue_title,
       v.subtitle_cached as venue_subtitle,
       v.slug as venue_slug
    FROM menuitems mi
    INNER JOIN images i1 ON i1.id = mi.tile_photo_id
    INNER JOIN menus m ON m.id = mi.menu_id
    INNER JOIN venues v ON v.id = m.venue_id
    WHERE NOT m.is_deleted AND v.slug="teplo" AND
        m.is_published AND v.is_published
) as t
ORDER BY t.number ASC 
```

这可能会执行另一种临时情况，但我对您的 EXPLAIN 结果感到好奇。

# c++ - 如何使诺基亚应用程序兼容？

> ID：13582217
> 
> 赞同：-1
> 
> 时间：2012-11-27T10:30:34.890
> 
> 标签：c++, qt, compatibility

我使用 Symbian SDK C++ 在 Qt 中开发了一个应用程序，我可以将 sis 文件安装到某些手机上，例如诺基亚 500。我认为我使用的 SDK 是 S60 SDK。

无论如何，我尝试将此应用程序安装到诺基亚 2700 Classic，但它给了我类似“不支持文件格式”的错误。

我该如何解决这个问题，如何将我的应用程序安装到很多诺基亚手机上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:46:36.773

恐怕你不能。

诺基亚 7200 不使用 S60 和 Symbian，因此您无法在其上运行 Symbian 应用程序，并且它不支持 SIS 安装文件。

在诺基亚手机和具有自定义操作系统的手机中，最便携的应用程序是那些用微型版 Java （即 J2ME）编写的应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T17:12:50.003

请注意您正在开发的操作系统：

*   诺基亚 500：操作系统是 Symbian^3，它是 Symbian 的主要版本，就像 S60v3 和 S60v5（又名 Symbian^1）。而 S^3、S60v5 和 S60v3 也不完全相同。
*   诺基亚 2700：它的操作系统是 S40。S40 不是 S60/Symbian，它使用不同的方式开发应用程序。S40 上也没有 Qt 端口。

您可以在此处获得有关诺基亚手机及其操作系统的更多信息：http: [//www.developer.nokia.com/Devices/Device_specifications/](http://www.developer.nokia.com/Devices/Device_specifications/)

您所做的就像尝试在 Linux 上安装 Windows 程序一样。这是胡说八道。

# entity-framework - 在使用 Entity Framework 进行更新操作期间设置 EntityState.Modified

> ID：13582218
> 
> 赞同：2
> 
> 时间：2012-11-27T10:30:38.510
> 
> 标签：entity-framework, entity-framework-5, dbcontext

假设我有以下使用 Entity Framework 5 的小控制台应用程序：

```
class Program {

    static void Main(string[] args) {

        using (var ctx = new ConfContext()) {

            var personBefore = ctx.People.First();
            Console.WriteLine(personBefore.Name);

            personBefore.Name = "Foo2";
            ctx.SaveChanges();

            var personAfter = ctx.People.First();
            Console.WriteLine(personAfter.Name);
        }

        Console.ReadLine();
    }
}

public class ConfContext : DbContext {

    public IDbSet<Person> People { get; set; }
    public IDbSet<Session> Sessions { get; set; }
}

public class Person {

    [Key]
    public int Key { get; set; }

    public string Name { get; set; }
    public string Surname { get; set; }
    public DateTime? BirthDate { get; set; }

    public ICollection<Session> Sessions { get; set; }
}

public class Session {

    [Key]
    public int Key { get; set; }
    public int PersonKey { get; set; }

    public string RoomName { get; set; }
    public string SessionName { get; set; }

    public Person Person { get; set; }
} 
```

如您所见，我正在更改记录的名称并保存它。它有效，但对我来说就像魔术一样。我在所有应用程序中所做的是以下一个（更准确地说，在我的通用存储库的 Edit 方法中）：

```
static void Main(string[] args) {

    using (var ctx = new ConfContext()) {

        var personBefore = ctx.People.First();
        Console.WriteLine(personBefore.Name);

        personBefore.Name = "Foo2";
        var entity = ctx.Entry<Person>(personBefore);
        entity.State = EntityState.Modified;
        ctx.SaveChanges();

        var personAfter = ctx.People.First();
        Console.WriteLine(personAfter.Name);
    }

    Console.ReadLine();
} 
```

毫无疑问，第二个更语义化，但还有其他明显的区别吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T10:39:41.900

好吧，您显式设置实体状态的第二个代码块是多余的，因为更改跟踪器已经知道实体已被修改，因为上下文知道实体（当您查询上下文以检索实体时）。

在处理断开连接的实体时，设置（或绘制）实体的状态会更有用，例如在 n 层环境中，在不同的上下文中检索实体并发送到客户端进行修改，并且您希望标记使用不同的上下文将这些更改返回到服务器上。

否则，我认为第一个代码块更干净。

# iphone - 找不到财产声明？

> ID：13582223
> 
> 赞同：0
> 
> 时间：2012-11-27T10:30:43.483
> 
> 标签：iphone, objective-c, ios, xcode, ios6

是`Unable to find property declaration 'someProperty'`崩溃吗？

我们的服务器中有关于此崩溃的日志，但我无法重现崩溃。所以，我在问这是否真的是一个崩溃或只是一个错误日志？如果它崩溃了，设备真的会崩溃吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:37:37.483

你在使用*异议框架*吗？如果是这样，则很可能存在依赖注入问题。异议是没有找到应该注册或需要的财产。

我认为您只会在日志中看到它（而不是作为构建错误），因为 Objection 懒惰地实例化了依赖项。

...是的，物理设备上的 iOS 应用程序确实会崩溃 :(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:47:46.610

您的“someProperty”在主故事板右侧的 Connection Inspector 中不可用。请正确检查并删除此。这可能是崩溃的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T06:11:50.863

我发现这是一个运行时崩溃。我在 Xcode 上模拟了这个。感谢大家！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T01:22:56.033

如果您使用的是*异议框架*，

`objection_requires`必须用于声明您的依赖项。确保依赖项列表与您声明和综合的属性相匹配。

# objective-c - 如何创建自定义 NSStepper 和 NSTabView

> ID：13582224
> 
> 赞同：2
> 
> 时间：2012-11-27T10:30:46.167
> 
> 标签：objective-c, cocoa, nstabview

我想重新绘制这两个控件，但是我找不到这样做的方法，任何人都可以给我一个想法吗？

我发现一些应用程序已经重新绘制了这些控件，你可以看截图。第一个是`NSStepper`，第二个是`NSTabView`，`NSTabViewItem`也是重画。

![在此处输入图像描述](../Images/4b78aedfaa69b88cbb461aaea404006b.png)

![在此处输入图像描述](../Images/7993e5d42926fe6ea6881787685fdcde.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:28:27.687

如果您需要自定义，您必须对大多数 GUI 类进行子类化。

对于 NSTabView，这是您必须自己做很多事情的课程之一。

你必须自己画（使用贝塞尔路径）

需要实现很多 NSView & NSResponder 的方法来进行绘图和事件处理。

请检查这些链接：

[带有背景颜色的 NSTabView](https://stackoverflow.com/questions/8090641/nstabview-with-background-color)

[http://www.positivespinmedia.com/dev/PSMTabBarControl.html](http://www.positivespinmedia.com/dev/PSMTabBarControl.html)

[https://github.com/aaroncrespo/WILLTabView/](https://github.com/aaroncrespo/WILLTabView/)

# jquery - 数据表多选列过滤器

> ID：13582225
> 
> 赞同：2
> 
> 时间：2012-11-27T10:30:48.373
> 
> 标签：jquery, datatables, html-table

我想在列过滤器中选择多个项目。以下示例允许您使用下拉列表过滤列：

[http://datatables.net/release-datatables/examples/api/multi_filter_select.html](http://datatables.net/release-datatables/examples/api/multi_filter_select.html)

但是，我希望能够在列过滤器中选择多个项目，可能在下拉列表中的每个项目旁边都有一个复选框。例如，在示例中，我会为“CSS 等级”打勾“A”和“C”，这样表格中只会显示这些等级。

如何使用 DataTables 插件或其他方式获得多选列过滤器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:44:58.207

您可以使用选择列表、复选框等构建自己的过滤器 div，并使用[fnFilter](http://datatables.net/ref#fnFilter)从服务器请求过滤后的数据。例如：

```
$("#mycheckbox").click(function () {
     var dt = $('#mytable').dataTable({ "bRetrieve": true });
     dt.fnFilter($("#mycheckbox").is(':checked'), 1);
}); 
```

帖子：

```
sSearch_1 : true/false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-28T05:30:38.753

这真的很容易，以各种方式多次询问 - 但令人惊讶的是我找不到完全匹配的。如果您有一个对应于您的列的：

```
<select class="form-control" id="ddlSearch">
    <option value="0">Name</option>
    <option value="1">Position</option>
    <option value="2">Office</option>
    <option value="3">Age</option>
    <option value="4">Start date</option>
    <option value="5">Salary</option>
</select> 
```

然后实现这个 javascript 在单独的列中获取 seacrh

```
var table;
$(document).ready(function() {
    table = $('#example').DataTable({
        pageLength: 100,
        dom: 'lrtip',
    });
    var column_no = 0;
    $('#ddlSearch').on('change',function(){
        column_no = Number($(this).val());
    });

    $( '#txtSearch' ).on( 'input', function () {
        if ( table.columns([column_no]).search() !== $( '#txtSearch' ).val() ) {
            table.columns([column_no]).search( $( '#txtSearch' ).val() ).draw();
        }
    } );
}); 
```

例如试试这个[https://jsfiddle.net/07rnpgs1/](https://jsfiddle.net/07rnpgs1/)

一切顺利

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-08T14:26:24.193

您可以查看[这个](https://github.com/ygorbunkov/datatables-multiple-criteria-filter)DataTables 插件。它为每列提供多个标准选择，以及跨多个列的联合选择。

这是简短的工作**演示**：

```
$(document).ready(function () {
	//Source data definition	
	var tableData = [{
			name: 'Clark Kent',
			city: 'Metropolis',
			race: 'cryptonian'
		}, {
			name: 'Bruce Wayne',
			city: 'Gotham',
			race: 'human'
		}, {
			name: 'Steve Rogers',
			city: 'New York',
			race: 'superhuman'
		}, {
			name: 'Peter Parker',
			city: 'New York',
			race: 'superhuman'
		}, {
			name: 'Thor Odinson',
			city: 'Asgard',
			race: 'god'
		}, {
			name: 'Jonathan Osterman',
			city: 'New York',
			race: 'superhuman'
		}, {
			name: 'Walter Kovacs',
			city: 'New Jersey',
			race: 'human'
		}, {
			name: 'Arthur Curry',
			city: 'Atlantis',
			race: 'superhuman'
		}, {
			name: 'Tony Stark',
			city: 'New York',
			race: 'human'
		}, {
			name: 'Scott Lang',
			city: 'Coral Gables',
			race: 'human'
		}, {
			name: 'Bruce Banner',
			city: 'New York',
			race: 'superhuman'
		}
	];
	//DataTable definition	
	window.dataTable = $('#mytable').DataTable({
			sDom: 'tF',
			data: tableData,
			columns: [{
					data: 'name',
					title: 'Name'
				}, {
					data: 'city',
					title: 'City'
				}, {
					data: 'race',
					title: 'Race'

			}]
	});

});
```

```
<!doctype html>
<html>
<head>
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.mfilter.tk/js/mfilter.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css">
  <link rel="stylesheet" type="text/css" href="https://cdn.mfilter.tk/css/mfilter.min.css">
</head>
<body>
  <table id="mytable"></table>
</body>
</html>
```

# c# - 将每个用户输入作为纯文本处理

> ID：13582226
> 
> 赞同：3
> 
> 时间：2012-11-27T10:30:48.213
> 
> 标签：c#, javascript, asp.net, .net, html

我们有一个非常大的网络应用程序。
总共大约 120.000 行。

在这个应用程序中，用户有很多输入文本的可能性。
在用户信息、文件夹、组等。

一些用户想要命名不同的对象，例如`Age < 20`.
出现问题是因为 ASP.NET 会因为“<”而阻止此类输入以防止 javascript 注入。

我们找到了关闭这些安全机制的方法，但现在我们的应用程序不安全。

所以问题是：
是否有任何设置或属性或任何可以设置为全局的（在整个应用程序的某一点）应用程序将此类输入作为纯文本处理？

因此，例如，当用户想要命名一个文件夹`<script>alert("ALERT");</script>`时，它应该以这种方式命名并显示为`<script>alert("ALERT");</script>`但脚本不会执行。

HTML 也是如此：如果它的名称`Folder<br>One`应该看起来像：`Folder<br>One`而不像：
`Folder
One`

当然，我可以使用 HTML-Encode/-Decode，但我不想遍历整个项目并在输入或显示输入的任何地方添加编码/解码......
也将在未来的开发中伪装错误的全局解决方案。

那么问题又来了：有没有办法像处理文本一样处理每个*文本*？所有这些都尽可能全球化？

希望您能理解我的问题并知道任何可能性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:33:34.893

如果您使用的是 JQuery，每当您将值设置为任何 span 或 div 时，

利用：

```
$('#myDiv').text('<script>alert("a")</script>'); 
```

并且不要使用：

```
 $('#myDiv').html('<script>alert("a")</script>'); 
```

或者

```
 $('#myDiv').innerHTML='<script>alert("a")</script>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:56:10.780

如果您不想使用 HTML 编码解码而不是尝试`ValidateRequest="false"`您可以在下面的代码中执行此操作：

```
<%@ Page Language="VB" AutoEventWireup="false" CodeFile="Default.aspx.vb" ValidateRequest="false" Inherits="_Default" %> 
```

您可能想要使用的另一种技术如下..

```
<script>
      function Encode() {
       var value = (document.getElementById('TextBox1').value);
       value = value.replace('<', "&lt;");
       value = value.replace('>', "&gt;");
       document.getElementById('TextBox1').value = value;
      }
 </script>

</head>
<body>
 <form id="form1" runat="server">
 <asp:TextBox ID="TextBox1"  runat="server"></asp:TextBox>
 <asp:Button ID="Button1" runat="server" Text="Button" OnClientClick="Encode()" />
 </form> 
```

服务器端

```
protected void Page_Load(object sender, EventArgs e)
 {
  this.TextBox1.Text = Server.HtmlDecode(this.TextBox1.Text);
 } 
```

# android - 新类扩展 FrameLayout 无法实例化

> ID：13582233
> 
> 赞同：0
> 
> 时间：2012-11-27T10:31:21.940
> 
> 标签：android, android-layout

我写了一个类扩展FrameLayout。

```
public class ReaderFrameLayout extends FrameLayout
{
    public ReaderFrameLayout(Context context)
    {
        this(context, null);
    }

    public ReaderFrameLayout(Context context, AttributeSet attrs)
    {
        this(context, attrs, 0);
    }

    public ReaderFrameLayout(Context context, AttributeSet attrs, int defaultStyle)
    {
        super(context, attrs, defaultStyle);
        WebView readerWebView = (WebView) findViewById(R.id.fragment_reader_webview);
        readerWebView.setOnTouchListener(new OnTouchListener()
        {
            @Override
            public boolean onTouch(View v, MotionEvent event)
            {
                Log.d("ReaderFrameLayout", "setOnTouchListener");
                return true;
            }
        });
    }
} 
```

并将其添加到片段中。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <com.mbs.helpers.ReaderFrameLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginTop="83dp" >

        <WebView
            android:id="@+id/fragment_reader_webview"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" />

    </com.mbs.helpers.ReaderFrameLayout>

</RelativeLayout> 
```

Eclipse 中的错误：

**com.android.layoutlib.bridge.MockView 无法转换为 android.view.ViewGroup 异常详细信息记录在 Window > Show View > Error Log 无法实例化以下类： - com.mbs.helpers.ReaderFrameLayout（开放类，显示错误日志）有关详细信息，请参阅错误日志（窗口 > 显示视图）。提示：当在 Eclipse 中显示时，在自定义视图中使用 View.isInEditMode() 以跳过代码**

当然，该应用程序不起作用。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:41:30.860

只需以编程方式创建 Web 视图：

```
public ReaderFrameLayout(Context context, AttributeSet attrs, int defaultStyle)
{
    super(context, attrs, defaultStyle);
    WebView readerWebView = new WebView(context);
    addView(readerWebView);
    readerWebView.setOnTouchListener(new OnTouchListener()
    {
        @Override
        public boolean onTouch(View v, MotionEvent event)
        {
            Log.d("ReaderFrameLayout", "setOnTouchListener");
            return true;
        }
    });
} 
```

并将其从 XML 布局中删除

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <com.mbs.helpers.ReaderFrameLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginTop="83dp" />

</RelativeLayout> 
```

如果您真的想从 XML 布局创建自定义视图，那么您需要在单独的 XML 文件中执行此操作并在自定义类中对其进行扩充。

例如，`res/layout/reader.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <WebView
        android:id="@+id/fragment_reader_webview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

</FrameLayout> 
```

在您的代码中：

```
 public ReaderFrameLayout(Context context, AttributeSet attrs,
            int defaultStyle) {
        super(context, attrs, defaultStyle);
        LayoutInflater.from(context).inflate(R.layout.reader, this);
        WebView readerWebView = (WebView) findViewById(R.id.fragment_reader_webview);
        readerWebView.setOnTouchListener(new OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                Log.d("ReaderFrameLayout", "setOnTouchListener");
                return true;
            }
        });
    } 
```

# python - 如何使用 python thrift 客户端使用 maxversions 扫描 hbase 表？

> ID：13582235
> 
> 赞同：4
> 
> 时间：2012-11-27T10:31:30.987
> 
> 标签：python, hbase, thrift

全部

我现在正在尝试使用 python thrift 客户端扫描 hbase 表。**我想要的是获得所有版本的扫描行。**但是在阅读了 HBase.py 文件（可以描述为 API 规范文件）之后，我找不到合适的扫描仪 API 来执行此操作。
我发现的只有：

```
def scannerOpenWithScan(self, tableName, scan, attributes)
def scannerOpen(self, tableName, startRow, columns, attributes)
def scannerOpenWithStop(self, tableName, startRow, stopRow, columns, attributes)
def scannerOpenWithPrefix(self, tableName, startAndPrefix, columns, attributes)
def scannerOpenTs(self, tableName, startRow, columns, timestamp, attributes)
def scannerOpenWithStopTs(self, tableName, startRow, stopRow, columns, timestamp, attributes)
def scannerOpenWithTimeRange(self, tableName, startRow, stopRow, columns, startTime, endTime) 
```

上面提到的所有 API 都不包含任何与版本相关的参数。也许“属性”可以做一些事情，但我不知道如何使用它。
*你对我有什么建议吗？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T23:24:06.450

不幸的是，Thrift API 不支持扫描仪为同一行返回多个版本。您只能获取指定单元格的多个值。

顺便说一句，你真的应该使用[HappyBase](http://happybase.readthedocs.org/en/latest/)而不是直接使用 Thrift。HappyBase 使从 Python 中使用 HBase 变得更加容易。

Happybase 也可以在[Github](https://github.com/wbolster/happybase)上找到。

# qt - 链接到 Qt SDK？

> ID：13582237
> 
> 赞同：1
> 
> 时间：2012-11-27T10:31:34.130
> 
> 标签：qt

> **可能重复：**
> [获取 Qt 4.8 SDK](https://stackoverflow.com/questions/13426144/obtaining-the-qt-4-8-sdk)

我需要重新安装Qt SDK，我在任何地方都找不到下载链接。我说的是安装在“C:\QtSDK”中的那个，它带有一个包管理器，“Maintain Qt SDK”和“Update Qt SDK”。

所有链接似乎都已失效，并且在[http://qt-project.org/downloads](http://qt-project.org/downloads)仅提供库和 Qt Creator，但作为单独的下载，并且没有指向 QtSDK 的链接。

它不再可用了吗？

# c++ - gsl_vector 是否有 count_if 函数？C/C++

> ID：13582243
> 
> 赞同：4
> 
> 时间：2012-11-27T10:31:55.690
> 
> 标签：c++, arrays, vector, gsl, countif

我正在使用 gnu 科学库 (GSL)。假设我有`gsl_vector`这样的：7 0 -6 5 8 0 10 -2

这是一个包含正数、负数和零作为元素的向量。

我想计算 this 中非零元素或零元素的数量`gsl_vector`。我知道有一个调用`count_if`C++ Vector 的函数。但是我通过`gsl_vector.h`and搜索`gsl_blas.h`，没有与之相等的功能。我可以通过评估它们来了解所有元素`gsl_vector_get()`，然后问 if 问题。

```
int counter = 0;

for(int i = 0;i<length_of_the_gsl_vector;++i){ 
  if(fabs(gsl_vector_get(y,i))<0.5) ++counter;
}

return counter; 
```

但是我一直想知道 GSL 中是否已经有这样一个效率更高的功能。

或者也许有一个`count_if`功能`gsl_array`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:51:25.803

您可以通过使用来获取数据指针`gsl_vector_ptr`，然后`std::count_if`在指针上使用：

```
struct Predicate{
    inline bool operator()(double x) const {
        return fabs(x) < 0.5 ;
    }
} ;

int res = std::count_if( 
    gsl_vector_ptr(y,0), gsl_vector_ptr(y,0) + size, 
    Predicate()
) ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:35:43.493

他们[声明](http://www.gnu.org/software/gsl/manual/html_node/Vector-and-Matrix-References-and-Further-Reading.html)GSL 实现了 std:: [valarray](http://en.cppreference.com/w/cpp/numeric/valarray/valarray)模型，我读到了这样的声明，授权我使用类似的东西：

```
gsl_block vec;
/* initialize ... */
std::valarray<double> a(vec.data, vec.size);
/* use std:: galore */ 
```

# iphone - 如何使用 pushViewController 和 popViewController

> ID：13582244
> 
> 赞同：1
> 
> 时间：2012-11-27T10:32:01.753
> 
> 标签：iphone, xcode

我想A视图控制器切换另一个B视图控制器，第一次，我推（按下GuestBook按钮）和TableView获取信息ok，然后按下返回按钮ok，再次推（按下GuestBook按钮），JSON数据`NSLog`有消息，但tableview数据没有出现！发生了什么？

PS：我使用故事板！有一个自定义单元格xib！

是

```
- (IBAction)toHostGuestBook:(id)sender {
    hgbvc = [self.storyboard instantiateViewControllerWithIdentifier:@"ToHostGuestBookSegue"];
    hgbvc.eventidStr = eventidStr;
    NSLog(@"hgbvc.eventidStr:%@",hgbvc.eventidStr);
    [self.navigationController pushViewController:hgbvc animated:YES];

} 
```

BM

```
- (IBAction)backToHostMainEventDetail:(id)sender {
    [self.navigationController popViewControllerAnimated:YES]; 
} 
```

BM

```
// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *GuestBookCellIdentifier = @"GuestBookCellIdentifier";

    static BOOL nibsRegistered = NO;
    if (!nibsRegistered) {
        UINib *nib = [UINib nibWithNibName:@"GuestBookCell" bundle:nil];
        [tableView registerNib:nib forCellReuseIdentifier:GuestBookCellIdentifier];
        nibsRegistered = YES;
    }

    gbcell = [tableView dequeueReusableCellWithIdentifier:GuestBookCellIdentifier];
    if (gbcell == nil) {
        gbcell = [[GuestBookCell alloc]
                   initWithStyle:UITableViewCellStyleDefault
                   reuseIdentifier:GuestBookCellIdentifier];
    }

    NSDictionary *dict = [messageRows objectAtIndex: indexPath.row];

    gbcell.nicknameStr = [dict objectForKey:@"vusr"];
    gbcell.dateStr = [dict objectForKey:@"date"];
    gbcell.messageStr = [dict objectForKey:@"message"];

    return gbcell;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:21:36.583

添加这个并尝试

```
-(void)viewWillAppear:(BOOL)animated

{

[super viewWillAppear:animated];

[self.tableView reloadData]; //your table view name

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:37:25.867

hgbvc B 控制器由 A 控制器保留。所以，当B控制器弹出时它不会释放。当 B 控制器再次推送时，没有调用 viewDidLoad 方法。

解决方法：提取tableview加载数据的方法。按下 B 时调用此方法。

在 B 控制器中：

```
- (void)showDataWithEventId:(NSString *)eventId
{
    //retrive data 
    //table view reload
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:57:35.157

尝试在 popViewController 代码下方重新加载表格视图数据，这是您想要的工作

# linux - Crontab 权限被拒绝

> ID：13582252
> 
> 赞同：4
> 
> 时间：2012-11-27T10:32:12.890
> 
> 标签：linux, ubuntu, permissions, crontab, minecraft

我在运行脚本时遇到了 crontab 问题。

我的*sudo crontab -e*看起来像这样：

```
05 00 * * * /opt/mcserver/backup.sh
10 00 * * * /opt/mcserver/suspend.sh
05 08 * * * /sbin/shutdown -r +1
11 11 * * * /opt/mcserver/start.sh  <--- This isn't working 
```

*start.sh*看起来像这样：

```
#!/bin/sh
screen java -d64 -Xincgc -Xmx2048M -jar craftbukkit.jar nogui 
```

并拥有这些权限（ls -l 输出）

```
-rwxr-xr-x 1 eve eve  72 Nov 24 14:17 start.sh 
```

我可以从终端运行命令，无论是否使用 sudo

```
./start.sh 
```

但它不会从 crontab 开始。如果我做

```
grep -iR "start.sh" /var/log 
```

我得到以下输出

```
/var/log/syslog:Nov 27 11:11:01 eve-desk CRON[5204]: (root) CMD (eve /opt/mcserver/start.sh)
grep: /var/log/btmp: Permission denied
grep: /var/log/lightdm/x-0-greeter.log: Permission denied
grep: /var/log/lightdm/lightdm.log: Permission denied
grep: /var/log/lightdm/x-0.log: Permission denied 
```

所以我的问题是，为什么它不起作用？而且由于我的脚本在不使用 sudo 的情况下运行，我不一定需要将它放在 sudo crontab 中？

*（我使用的是 Ubuntu 12.10）*

在此先感谢，菲利普

* * *

*回答特瓦尔伯格的回应*

**1.**将craftbukkit的所有者更改为root，看看是否解决了问题。

```
-rw-r--r-- 1 root root 12084211 Nov 21 02:14 craftbukkit.jar 
```

并且还在我的 start.sh 脚本中添加了一个明确的 cd ：

```
#!/bin/sh
cd /opt/mcserver/
screen java -d64 -Xincgc -Xmx2048M -jar craftbukkit.jar nogui 
```

**2.**我不太清楚你在这里的意思。启动 java 时是否应该在 start.sh 文件中使用以下路径？（*从哪个java输出*）

```
/usr/bin/java 
```

**3.**当我的服务器关闭时，屏幕被终止。无论如何以“分离模式”启动屏幕是个好主意吗？

仍然得到相同的“权限被拒绝”错误。

* * *

**问题解决了**！通过在屏幕上使用正确的标志，如下所示，它现在可以正常工作了！

```
screen -d -m java -d64 -Xincgc -Xmx2048M -jar craftbukkit.jar nogui 
```

*非常感谢那些回答的人，尤其是 twalberg！*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:37:55.413

`start.sh`归“eve:eve”所有，您的 crontab 以 root 身份运行。

您可以通过运行以下命令来解决此问题

```
chown root:root /opt/craftbukkit/start.sh 
```

不过，您的 crontab 将以 root 身份运行。

**提示：**在 crontab 中运行 bash 时，始终使用绝对路径（这将使调试更容易）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T17:55:18.057

以下是一些需要检查的事项：

1.  `root`显然对 具有读取/执行权限`start.sh`，但是什么是权限`craftbukkit.jar`- 可以`root`读取它？您可能还想`cd /path/to/where/craftbukkit.jar/is`在`start.sh`脚本中添加显式。
2.  是`java`在`root`的默认路径内`cron`吗？请注意，此路径不一定与您通过`sudo`或`su`直接以 root 登录的路径相同 - 它通常受到更多限制。使用完整的路径名来`java`解决`craftbukkit.jar`这个问题。
3.  由于`screen`不会从可用的终端开始，您可能需要`screen -d -m ...`。希望您打算最终附加到每个`screen`实例并稍后终止它，或者您已安排它在脚本完成时自动终止......
4.  该`/var/log/syslog`条目显示`cron`实际上确实执行了脚本，因此它一定是由于上述原因之一而失败（或者我还没有注意到的其他原因）
5.  其他错误`grep`仅仅是因为您的非`root`用户没有读取这些特定文件的权限（这是正常的，而且是件好事）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T10:43:09.330

日志显示用户无权访问目录“/var/log/”，您应该为 cron 的所有者设置日志文件的许可。

# hyperlink - opencart 在第三级类别中添加更多品牌链接

> ID：13582256
> 
> 赞同：0
> 
> 时间：2012-11-27T10:32:24.063
> 
> 标签：hyperlink, opencart, categories

使用此代码

`$sisters = array_slice($sisters, 0, 5);`

在`catalog/controller/module/category.php`

我只显示 5 个姊妹类别。我在添加一个链接时遇到问题，该链接`View More`应将其父类别链接到所有包含超过 5 个条目的姐妹类别下方。

有什么建议可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T04:29:58.107

```
 <?php if ($child['children1']) { $j=0; ?>
                                <?php  foreach ($child['children1'] as $child1) { $j++; ?>
                             <?php if($j>2) { ?><li class="level-2-cat-list-sub-cat"><a href="<?php echo $child['href']; ?>">More...</a></li><?php break; } else { ?>
                                  <li class="level-2-cat-list-sub-cat" id="<?php echo $i; ?>">
                                     <a href="<?php echo $child1['href1']; ?>"><?php echo strtolower(ucwords($child1['name1'])); ?></a> 
                                  </li>
                                <?php } ?>
                                <?php } ?>
                            <?php } ?> 
```

使上面的 .tpl 文件不存在 $j 被声明，如果它大于 2 More... 被打印和锚标记并以“break;”结尾 陈述

# android - proguardFile 问题，返回 null：1

> ID：13582261
> 
> 赞同：9
> 
> 时间：2012-11-27T10:32:41.660
> 
> 标签：android, ant, proguard

您好我正在尝试在 cmd 上运行“ant clean debug”命令。但我得到 null 返回：1 错误。

```
BUILD FAILED
C:\Program Files (x86)\Android\android-sdk\tools\ant\build.xml:622: The following error    occurred while executing this line:
 C:\Program Files (x86)\Android\android-sdk\tools\ant\build.xml:658: null returned: 1

 <aapt executable="${aapt}"
                 command="package"
                 verbose="${verbose}"
                 manifest="${out.manifest.abs.file}"
                 androidjar="${project.target.android.jar}"
                 rfolder="${gen.absolute.dir}"
                 nonConstantId="${android.library}"
                 libraryResFolderPathRefid="project.library.res.folder.path"
                 libraryPackagesRefid="project.library.packages"
                 ignoreAssets="${aapt.ignore.assets}"
                 proguardFile="${out.absolute.dir}/proguard.txt">
             <res path="${out.res.absolute.dir}" />
             <res path="${resource.absolute.dir}" />
         </aapt> 
```

第 658 行：

```
 proguardFile="${out.absolute.dir}/proguard.txt"> 
```

第 622 行：

```
 elseText="hasCode = false. Skipping aidl/renderscript/R.java"> 
```

他们是谁知道这个问题的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-10T06:49:28.613

就我而言，日志中早些时候也有错误报告，很难找到。据我了解，任何类型的错误都会导致该消息。

所以这个疯狂的消息`null returned: 1`实际上意味着***请阅读上面的日志***。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-28T08:03:02.657

从我的主项目中引用外部遗留库时，我遇到了同样的问题 - 引用后，我的主项目将无法构建，尽管在不引用外部项目时两者都构建得很好。

解决方案，尽管很愚蠢，是创建一个新的空 Android 应用程序项目，并从新项目的外部库中复制所有源和资源文件。之后，引用工作，一切正常。

我相信这与[ADT 17 之后 Proguard 的变化](http://tools.android.com/recent/proguardimprovements)有关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T10:35:00.903

`C:\Program Files (x86)\Android\android-sdk\tools\ant\`此路径包含空格。从 sdk 路径中删除空格。

您可以将 like `c:\Android\android-sdk`.. 用于不包含任何空格的 sdk 路径。

# perl - Perl 有运行时流程图吗？

> ID：13582265
> 
> 赞同：8
> 
> 时间：2012-11-27T10:32:50.317
> 
> 标签：perl, runtime

我试图更好地理解异常的逻辑和流程。所以我必须声明，我真的觉得缺乏理解 Perl 如何解释和运行程序、涉及哪些阶段以及每个阶段会发生什么。

例如，我想了解，何时绑定 STD* IO 以及何时释放，$SIG{*} 事物发生了什么，它们如何依赖于 execepions，程序如何死亡等。我想拥有更好地了解内部机制。

我正在寻找链接或书籍。我更喜欢一些包含视觉图表的材料，但这不是强制性的。我想看看整个过程的一些“大图”，如果我觉得有必要，我已经有可能进一步挖掘。

我发现[Perl 编程](http://oreilly.com/catalog/pperl3/chapter/ch18.html)的第 18 章概述了编译阶段，我尝试通过它来完成它，但我也欣赏其他好的资源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T02:04:52.333

一些替代来源（不是很多）：

*   Mannning 的[Extending and Embedding Perl](http://www.manning.com/jenness/)，这是 Perl 在源代码之外的内部结构的首选参考
*   [高级 Perl 编程中关于 Perl 内部](http://docstore.mik.ua/orelly/perl/advprog/ch20_01.htm)的章节，这可能正是你想要的
*   Simon Cozens 的[Perl 内部常见问题解答](http://www.faqs.org/docs/perl5int/)

那些可能更专注于您正在寻找的东西。不过，我不确定它们中的任何一个都明确说明了解释器的运行时执行顺序。第一个是更好的“我想用这些东西工作”的书；后两个可能是很好的介绍性参考。

据我所知，您提出的一些问题并没有明确记录——I/O 问题是我想不出的特别好的来源。[异常处理在Try::Tiny](http://search.cpan.org/~doy/Try-Tiny-0.11/lib/Try/Tiny.pm)的文档中有很好的记录，这就是我们用于异常的方法。信号处理很混乱，但是[perlipc](http://search.cpan.org/~dom/perl-5.12.5/pod/perlipc.pod)很好地记录了它。使用线程，您可能会遇到不安全的信号——除非我必须拥有共享内存，否则我通常会避免使用线程来支持多个进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T22:43:41.310

您可以从通过**perldoc**程序访问的这些主题开始：

```
 Internals and C Language Interface
        perlembed           Perl ways to embed perl in your C or C++ application
        perldebguts         Perl debugging guts and tips
        perlxstut           Perl XS tutorial
        perlxs              Perl XS application programming interface
        perlxstypemap       Perl XS C/Perl type conversion tools
        perlclib            Internal replacements for standard C library functions
        perlguts            Perl internal functions for those doing extensions
        perlcall            Perl calling conventions from C
        perlmroapi          Perl method resolution plugin interface
        perlreapi           Perl regular expression plugin interface
        perlreguts          Perl regular expression engine internals

        perlapi             Perl API listing (autogenerated)
        perlintern          Perl internal functions (autogenerated)
        perliol             C API for Perl's implementation of IO in Layers
        perlapio            Perl internal IO abstraction interface

        perlhack            Perl hackers guide
        perlsource          Guide to the Perl source tree
        perlinterp          Overview of the Perl interpreter source and how it works
        perlhacktut         Walk through the creation of a simple C code patch
        perlhacktips        Tips for Perl core C code hacking
        perlpolicy          Perl development policies
        perlgit             Using git with the Perl repository 
```

# java - 使用 Core Java 1.4 api 调用 Web 服务

> ID：13582275
> 
> 赞同：0
> 
> 时间：2012-11-27T10:33:22.440
> 
> 标签：java, web-services, java1.4

是否可以使用核心 java 1.4 api 调用 Web 服务。现在我只能使用 java 1.4 的限制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:40:21.723

不，不能仅使用核心 Java 1.4 调用 Web 服务。您必须使用像[Apache Axis](http://ws.apache.org/axis/)这样的附加框架才能使其与 Java 1.4 一起使用。

# wpf - XAML 文本框在换行时不显示内容的结尾

> ID：13582276
> 
> 赞同：0
> 
> 时间：2012-11-27T10:33:23.557
> 
> 标签：wpf, xaml

我使用了一个与浏览按钮冲突的文本框来浏览一些文件

因为我无法为此文本框启用换行。即使我单击文本框并按“结束”以转到它不起作用的确切文件名，我也无法看到全部内容。

我想使用箭头键或 home/end 导航整个文本，如上所示。谁能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:55:39.307

可能是您的末端部分`TextBox`在按钮后面增长。尝试使用布局控件`StackPanel`来水平排列控件，如下所示：

```
<StackPanel Orientation="Horizontal">
<TextBox/>
<Button/>
</StackPanel> 
```

希望能帮助到你

# php - 对字符串数字进行排序

> ID：13582279
> 
> 赞同：0
> 
> 时间：2012-11-27T10:33:28.450
> 
> 标签：php, mysql, string, sorting, numbers

我有一列 varchar 类型的列，其中存储了许多不同的数字。比如说看图![在此处输入图像描述](../Images/5b489e5c6e07cc80c12d42180977ee87.png)

它应该短为

`12-1`

`12-13`

`12-105`

`12-127`

`12-168`

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T10:42:12.543

1你可以试试这样的：

```
SELECT *, SUBSTRING_INDEX(row_name, '-', 1) as some_sort
FROM table_name
ORDER BY some_sort 
```

所以我猜（未经测试，但以这种方式想法）：
`12-34`，，，`12-46`...`12-95`等`12-135`

但是问题质量很低，所以我只能猜测你想做什么。

# java - 如何快速匹配长字符串和正则表达式？

> ID：13582281
> 
> 赞同：3
> 
> 时间：2012-11-27T10:33:36.553
> 
> 标签：java, regex

我有这个正则表达式`"((\\-)?[0-9]+(.([0-9])+)? )+"`，它应该匹配由单个空格分隔的数字序列。例如“5 4 1 2 2.4 3 7.8”或“5 4 1 2 2.4 8.001 7.8”。

为了检查字符串是否与我做的正则表达式匹配：

```
if((value+" ").matches("((\\-)?[0-9]+(.([0-9])+)? )+")){
    // anything
} 
```

问题是，当我像上面的例子一样给出这个小字符串时，它很完美。但是对于较长的字符串，例如：“2000000 2000000 2000000 2000000 2000000 2000000 2000000 2000000”，如果匹配则完美，但如果不匹配则最多需要 5 秒。检查这个：

```
String value = "2000000 2000000 2000000 2000000 2000000 2000000 2000000 2000000 h";

System.out.println("Start: "+System.currentTimeMillis());
if((value+" ").matches("((\\-)?[0-9]+(.([0-9])+)? )+")){
    System.out.println("OK");
}else{
    System.out.println("NOK");
}
System.out.println("End: "+System.currentTimeMillis()); 
```

这需要长达 5 秒！而如果您从字符串末尾删除“h”，则需要不到 1 毫秒。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T10:36:42.087

我怀疑如果将上述内容拆分为一系列数字（通过在空格上拆分），然后将更简单的正则表达式应用于每个子字符串，您将获得更快的性能*。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T10:40:08.643

首先你需要修复你的正则表达式：

```
"((\\-)?[0-9]+(\\.([0-9])+)? )+" 
```

因为您的版本匹配两个数字之间的任何符号，包括空格。也许这会降低性能。

之后，您可以先尝试查找任何字符，如果找到，请不要检查您的正则表达式或像之前所说的那样拆分成更小的部分。

# cmake - CMake：${} 和“${}”之间的区别

> ID：13582282
> 
> 赞同：12
> 
> 时间：2012-11-27T10:33:40.623
> 
> 标签：cmake

在 cmake 中，类似以下内容有什么区别：

```
set(any_new_var ${old_var}) 
```

和

```
set(any_new_var "${old_var}") 
```

有什么重要的区别吗？我什么时候必须使用一种或另一种形式？

例如，我尝试下一个迷你测试

```
# test.cmake

# Variable 'a' isn't defined.
set(hola "${a}")

# message(${hola})
message("${hola}") 
```

这个小测试（cmake -P test.cmake）的输出是一个空行（因为没有定义'a'）。如果我取消注释第一条消息，cmake 会抛出消息错误：

```
CMake Error at prueba.cmake:6 (message):
  message called with incorrect number of arguments 
```

为什么在第二种情况下它不会抛出错误而是空行？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-27T11:43:34.803

在 CMake 中，字符串可以解释为列表。规则很简单：形成列表以分号拆分字符串。例如，字符串值`one;two;three`可以被认为是三个元素的列表：`one`、`two`和`three`。

要调用命令，您需要在括号中写入命令名称和一些单词。但是，这些词与命令以一对一方式接收的参数*不对应。*每个单词变成零个或多个参数，并且所有参数连接在一起。 **除非一个词被引用，否则它被视为一个列表并被扩展为多个参数。**引用的单词总是成为一个参数。

例如，假设`X`绑定到`one;two;three`，`Y`绑定到空字符串，并且`Z`绑定到`foo`。以下命令调用包含三个单词，但该命令接收四个参数：

```
some_command(${X} ${Y} ${Z})
# The command receives four arguments:
# 1\. one
# 2\. two
# 3\. three
# 4\. foo 
```

如果我们引用这些词，该命令将收到三个参数：

```
some_command("${X}" "${Y}" "${Z}")
# The command receives three arguments:
# 1\. one;two;three
# 2\. (the empty list)
# 3\. foo 
```

回到你原来的问题：`message`命令可以接收不同数量的参数。它接受所有参数，将它们连接成一个字符串，然后打印该字符串。但是，由于某些未知原因，它不接受零参数。

`message`具有多个参数的行为不是很有用，因此您倾向于使用单引号参数：

```
set(SOURCES foo.c hoo.h)
message(${SOURCES})   # prints foo.cfoo.h
message("${SOURCES}") # prints foo.c;foo.h 
```

此外，当`set`接收到多个参数时，它会构建一个由分号分隔的参数字符串。然后将变量设置为该字符串。

# java - Spring 依赖注入停止工作

> ID：13582285
> 
> 赞同：1
> 
> 时间：2012-11-27T10:33:49.703
> 
> 标签：java, spring, dependencies, inversion-of-control, code-injection

我正在与一个由 10 多名 Java 开发人员组成的团队合作开发一个 Web 应用程序。这是一个大项目（2 岁），从昨晚开始我们就遇到了一个问题：一些 bean（2 个 bean）在使用时会导致 NullPointerException（好像 IoC 不再工作一样）。

问题是，两天前一切正常，这两天我阅读了每一个提交，但 Spring Configuration 文件没有任何变化。

我知道有时如果你通过 Spring 动态注入一个 bean 并通过新的操作数实例化它，它会给出一个 NPE，但在项目中没有任何迹象。

所有开发人员在他们的本地机器上都没有这个问题，但是在 CI 服务器上，它可以正常工作一段时间然后停止，直到我们重新启动机器（而不是服务器）。有谁知道如何处理这个问题？服务器启动根本没有显示任何错误。

**更新：**

*   服务器上下文初始化绝对没有错误（也没有警告），并以成功消息结束。

*   我检查了对 bean setter 的所有调用：没有使用。

*   bean 是通过配置文件获取的，没有 @Autowired。

*   实际上，我已经在整个项目中搜索了新的操作数，花了我将近两个小时来检查每个，但是没有一个 bean 实例化了一个新的操作数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:38:04.567

我的猜测是有人叫“new”来创建一个bean，这意味着它不再受Spring bean工厂的控制，但不知何故它依赖于DI。如果您使用注释来连接资源，则更有可能。

您自己说过：多年来一直运行良好。春天并没有突然消失。更有可能的是，这 10 多位 Java 开发人员中的一位是新手，或者并不像他们认为的那样理解 Spring。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:04:39.070

问题是由于 JavaMelody 和 Spring AOP 之间的冲突造成的。为了解决这个问题，我们不得不暂时禁用 JavaMelody，直到我们知道问题的根源。

**来自 JavaMelody FAQ（更多信息）**

*如果您的应用程序在一体式监控spring.xml 和AOP 或@Autowired 之间存在冲突，那么您可以使用monitoring-spring-datasource.xml 文件，而不是monitoring-spring.xml。该文件仅包含数据源后处理器和 SpringDataSourceFactoryBean 的示例。*

# java - 不同类之间的通信（Eclipse Forms 部分之间的通信）

> ID：13582286
> 
> 赞同：1
> 
> 时间：2012-11-27T10:33:51.317
> 
> 标签：java, swt, eclipse-rcp

这个问题可以概括为一个类通信问题，也许有解决这个特定问题的解决方案/模式。

我在 RCP 应用程序中使用 eclipse 表单，每个表单都有很多部分。

大多数部分都是依赖的，即如果用户修改部分 AI 中的某些内容，则希望立即在部分 B 中进行一些更改。我使用侦听器执行此操作，并且我将所有部分代码都放在同一个类中，但是有什么方法可以在没有的情况下传达这些更改将所有代码放在一起，以便我可以编写更清晰的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:48:06.543

您应该使用 Eclipse 数据绑定来实现控件之间的依赖关系。

例如，以下代码段将复选框的选择状态绑定到文本字段的启用状态

```
ctx = new DataBindingContext();
ISWTObservableValue observe = WidgetProperties.selection().observe(myCheckBox);
ISWTObservableValue observe2 =  WidgetProperties.enabled().observe(myTextField);
ctx.bindValue(observe, observe2) 
```

# date - kendo ui 网格数据源过滤器日期格式

> ID：13582287
> 
> 赞同：8
> 
> 时间：2012-11-27T10:33:53.187
> 
> 标签：date, filter, format, datasource, kendo-ui

我在数据源中有一个带有日期字段的剑道网格。显示字段时，我使用模板以英国日期格式“dd/MM/yyyy”显示日期。问题是过滤时，我不知道如何以英国格式显示日期过滤器。

我遇到的另一个问题是没有日期时间类型，只有日期，所以只能按日期而不是日期时间过滤。

任何帮助或想法将不胜感激。

这是局部视图（cshtml）

```
<script type="text/javascript">
$(document).ready(function() {
    var date = new Date();
    var dateString = date.getMonth()+1 + "/" + date.getDate() + "/" + date.getFullYear();
    var url = '@Url.Action(AccountTypeController.GetAllocationGridData, new {id = Model.Id})';

    var dataSource = new kendo.data.DataSource({
        serverPaging: true,
        serverSorting: true,
        serverFiltering: true,
        pageSize: 10,
        transport: {
            read: {
                type: 'post',
                dataType: 'json',
                url: url
            },
            parameterMap: function(options) {
                if (options.filter) {
                    for (var i = 0; i < options.filter.filters.length; i++) {
                        if (options.filter.filters[i].field == 'Start' || options.filter.filters[i].field == 'End') {
                            options.filter.filters[i].value = kendo.toString(options.filter.filters[i].value, "MM/dd/yyyy");
                        }
                    }
                }
                return options;
            }
        },
        schema: {
            data: 'Data',
            total: 'Count',
            model: {
                id: 'Id',
                fields: {
                    Id: { type: 'number' },
                    Start: { type: 'date' },
                    End: { type: 'date' },
                    Allocation: { type: 'number' }
                }
            }
        },
        sort: {
            field: "Start",
            dir: "asc"
        },
        filter:{
            logic: "and",
            filters: [
                {
                    field: "End",
                    operator: "gt",
                    value: dateString
                }
            ]
        }
    });

    $('#account-allocation').kendoGrid({
        height: 383,
        dataSource: dataSource,
        columns: [
            {
                field: 'Start',
                title: 'Start Date',
                template: '#= kendo.toString(Start,"dd/MM/yyyy HH:mm") #'
            },
            {
                field: 'End',
                title: 'End Date',
                template: '#= kendo.toString(End,"dd/MM/yyyy HH:mm") #'
            },
            {
                field: 'NoSpaces',
                title: 'Number of Spaces',
                filterable: false
            },
            {
                field: 'Id',
                filterable: false,
                title: 'Actions',
                template: '<a class="link-lightbox" href="@Url.Action(AccountTypeController.UpdateAllocationAction1, AccountTypeController.Name)/#= Id #"><img src="@Url.Content("~/Content/img/grid-update.png")" alt="Update"/></a>',
                width: 75
            }
        ],
        filterable: true,
        sortable: false,
        scrollable: false,
        pageable: true          
    });
</script>

<div class="panel panel-w">
    <h2>@Model.Name Allocations
            <a href="@Url.Action(AccountTypeController.SetAllocationAction1, new { id = Model.Id })" class="button link-lightbox"><span class="edit">Set Account Type Allocation</span></a>
    </h2>
    <div id="account-allocation"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T08:34:37.147

首先包含对应英语文化的JavaScript文件：

```
<script src="http://cdn.kendostatic.com/2012.2.710/js/cultures/kendo.culture.en-GB.min.js"></script> 
```

然后调用[kendo.culture](http://docs.kendoui.com/api/framework/kendo#culture)设置当前文化：

```
kendo.culture("en-GB"); 
```

然后，Kendo Grid 将自动使用“dd/MM/yyyy”格式。

有关 Kendo UI 如何处理全球化的更多信息，请参阅[文档](http://docs.kendoui.com/getting-started/framework/globalization/overview)。

这是一个现场演示：http: [//jsbin.com/onetol/1/edit](http://jsbin.com/onetol/1/edit)

# iphone - 将 UIImagePickerController 中的图像存储在 iPhone 中？

> ID：13582300
> 
> 赞同：1
> 
> 时间：2012-11-27T10:34:24.637
> 
> 标签：iphone, ios, image, uiimagepickercontroller, direction

我试图从iPhone中存储图像 ( `NSUserDefault`) 。`UIImagePickerController`

这种存储图像的方式：

![在此处输入图像描述](../Images/660206c683389e6b7301e0eace502934.png)

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    UIImage *originalImage=[info objectForKey:UIImagePickerControllerOriginalImage];
    NSData * imageData = UIImagePNGRepresentation(originalImage);
    NSUserDefaults *user = [NSUserDefaults standardUserDefaults];
    [user setValue:imageData forKey:@"pictureData"];
} 
```

这种检索图像的方式：

```
NSUserDefaults *user = [NSUserDefaults standardUserDefaults];
UIImage *myImage = [UIImage imageWithData:[user valueForKey:@"pictureData"]];
[btn2 setImage:myImage forState:UIControlStateNormal]; 
```

![在此处输入图像描述](../Images/f45fe77473b8b5eaffee9163bb520a28.png)

当我从`NSUserDefaults`设置中检索图像时`UIButton`，最后显示图像，但方向从下到右改变，如何解决这个问题？请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:39:03.023

A`UIImage`有一个属性`imageOrientation`，它指示`UIImageView`和其他`UIImage`消费者旋转原始图像数据。这个标志很有可能被保存到上传的 jpeg 图像中的 exif 数据中，但是您用来查看它的程序不支持该标志。

要在上传时旋转`UIImage`以正确显示，您可以使用如下类别：

**UIImage+fixOrientation.h**

```
@interface UIImage (fixOrientation)

 - (UIImage *)fixOrientation;

@end 
```

**UIImage+fixOrientation.m**

```
@implementation UIImage (fixOrientation)

 - (UIImage *)fixOrientation {

// No-op if the orientation is already correct
if (self.imageOrientation == UIImageOrientationUp) return self;

// We need to calculate the proper transformation to make the image upright.
// We do it in 2 steps: Rotate if Left/Right/Down, and then flip if Mirrored.
CGAffineTransform transform = CGAffineTransformIdentity;

switch (self.imageOrientation) {
    case UIImageOrientationDown:
    case UIImageOrientationDownMirrored:
        transform = CGAffineTransformTranslate(transform, self.size.width, self.size.height);
        transform = CGAffineTransformRotate(transform, M_PI);
        break;

    case UIImageOrientationLeft:
    case UIImageOrientationLeftMirrored:
        transform = CGAffineTransformTranslate(transform, self.size.width, 0);
        transform = CGAffineTransformRotate(transform, M_PI_2);
        break;

    case UIImageOrientationRight:
    case UIImageOrientationRightMirrored:
        transform = CGAffineTransformTranslate(transform, 0, self.size.height);
        transform = CGAffineTransformRotate(transform, -M_PI_2);
        break;
    case UIImageOrientationUp:
    case UIImageOrientationUpMirrored:
        break;
}

switch (self.imageOrientation) {
    case UIImageOrientationUpMirrored:
    case UIImageOrientationDownMirrored:
        transform = CGAffineTransformTranslate(transform, self.size.width, 0);
        transform = CGAffineTransformScale(transform, -1, 1);
        break;

    case UIImageOrientationLeftMirrored:
    case UIImageOrientationRightMirrored:
        transform = CGAffineTransformTranslate(transform, self.size.height, 0);
        transform = CGAffineTransformScale(transform, -1, 1);
        break;
    case UIImageOrientationUp:
    case UIImageOrientationDown:
    case UIImageOrientationLeft:
    case UIImageOrientationRight:
        break;
}

// Now we draw the underlying CGImage into a new context, applying the transform
// calculated above.
CGContextRef ctx = CGBitmapContextCreate(NULL, self.size.width, self.size.height,
                                         CGImageGetBitsPerComponent(self.CGImage), 0,
                                         CGImageGetColorSpace(self.CGImage),
                                         CGImageGetBitmapInfo(self.CGImage));
CGContextConcatCTM(ctx, transform);
switch (self.imageOrientation) {
    case UIImageOrientationLeft:
    case UIImageOrientationLeftMirrored:
    case UIImageOrientationRight:
    case UIImageOrientationRightMirrored:
        // Grr...
        CGContextDrawImage(ctx, CGRectMake(0,0,self.size.height,self.size.width), self.CGImage);
        break;

    default:
        CGContextDrawImage(ctx, CGRectMake(0,0,self.size.width,self.size.height), self.CGImage);
        break;
}

// And now we just create a new UIImage from the drawing context
CGImageRef cgimg = CGBitmapContextCreateImage(ctx);
UIImage *img = [UIImage imageWithCGImage:cgimg];
CGContextRelease(ctx);
CGImageRelease(cgimg);
return img;
}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:27:56.027

用于`UIImageJPEGRepresentation`以`NSUserDefaults`这种方式存储图像：

```
NSData * imageData = UIImageJPEGRepresentation(originalImage, 90);
NSUserDefaults *user = [NSUserDefaults standardUserDefaults];
[user setValue:imageData forKey:@"pictureData"]; 
```

# php - 散列哈希是否使其更安全？

> ID：13582301
> 
> 赞同：5
> 
> 时间：2012-11-27T10:34:26.883
> 
> 标签：php, encryption, passwords, cryptography, sha1

> **可能重复：**
> [“双重哈希”密码是否比仅哈希一次更安全？](https://stackoverflow.com/questions/348109/is-double-hashing-a-password-less-secure-than-just-hashing-it-once)

我在 PHP 中使用 sha1 加密密码，但我想知道散列散列是否比仅散列密码更安全。

例如：

是

```
$hash = sha1($pwd); 
```

安全性低于

```
$hash = sha1(sha1($pwd)); 
```

我不明白为什么它不会，因为反向查找站点将无法找到哈希值的匹配项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:37:09.450

双重哈希并没有真正帮助。[盐腌](http://crackstation.net/hashing-security.htm)可以。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T14:14:42.487

为了使您的密码存储安全，您不应使用`sha1`或任何其他快速哈希算法，而应使用**BCrypt 之**类的*密钥派生函数*。

 **[快速算法的问题在于，您可以使用普通硬件（ 2012 年](http://hashcat.net/oclhashcat-lite/#performance)）每秒计算 3 Giga sha1-hashes 。这使得在不到一毫秒的时间内暴力破解大约 500000 个单词的整个英语词典成为可能！

您示例中的第二个问题是缺少盐。如果您不为每个密码使用唯一的盐，攻击者可以构建一个彩虹表来获取所有密码。

BCrypt 专门设计用于散列密码，因此**速度很慢**（需要一些计算时间）。通过成本因素，您可以将所需的时间调整到未来（因此更快）的硬件上。在内部，它会按照您的建议执行类似的操作，它会重复散列很多次，但以安全的方式进行。

使用 BCrypt 就像使用 sha1 哈希一样简单。PHP 5.5 将拥有自己的功能`password_hash()`并`password_verify()`准备就绪，以简化此任务。还有一个适用于 PHP 5.3/5.4 的[兼容包](https://wiki.php.net/rfc/password_hash)，可在[password_compat](https://github.com/ircmaxell/password_compat)下载。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-27T11:12:21.133

首先，与单独的 sha1 一样弱的是它比明文存储的密码更好。任何加密、散列或其他混淆都比明文好得多！

sha1 的问题在于它的速度很快，因此它可以快速生成要破解的哈希值。加盐有很大帮助，但是如果您的服务器受到损害并且您将盐哈希存储为某个字符串，那么就会有这个优势......

如果您不想使用 mcrypt 或其他加密方法，您可以像这样混合您的 sha1 哈希：

```
$my_super_sha1_hash = 
sha1(
    sha1(
        substr(
            sha1($username)
            , 0
            , strlen($password) 
        )
    )
    .sha1(
        substr(
            sha1($password)
            , 0
            , 40-strlen($password)
        )
    )
); 
```

通过将用户名和密码混合在一起，并使用（未知）密码的长度来确定每个密码的哪些位在刺痛中使用，然后再次进行散列，每个盐都是唯一的但不是随机的，因此结果是一致的用户和很多更难破解，因为必须考虑密码和用户名的字符串长度。**

# internationalization - 国际化：基于模式映射和填充单个错误代码的错误消息

> ID：13582302
> 
> 赞同：1
> 
> 时间：2012-11-27T10:34:28.257
> 
> 标签：internationalization, mapping, error-code

我要为我的应用程序设计以下场景：

我将为异常/失败生成错误代码。我想创建一个错误对象（默认 bean），如下所示：

```
ErrorInfo
{
    String code;
    List<String> causes;
    List<String> remedies;
} 
```

我的属性文件将包含以下内容：

```
ERROR_NAME_CODE = 1001
ERROR_NAME_CAUSES_1 = First cause
ERROR_NAME_CAUSES_2 = Second cause
ERROR_NAME_REMEDIES_1 = First remedies{0}, test
ERROR_NAME_REMEDIES_2 = Second remedy
ERROR_NAME_REMEDIES_3= Third remedy 
```

在上述情况下，我已在属性文件中映射了错误代码“ERROR_NAME”的所有相关消息。

解决方案应该能够满足以下要求：

1.  映射应该是可定制的。可以扩展 ErrorInfo 类并添加更多属性。
2.  基于错误代码对错误消息进行分组的模式也应该是动态的，例如传递 FilterCriteria 并调用自定义实现。
3.  错误消息可以使用参数值进行格式化。

我想了解是否有支持这些要求的标准设计模式或框架（可能是可定制的）

谢谢

# unit-testing - Angular 服务测试有什么问题？

> ID：13582308
> 
> 赞同：4
> 
> 时间：2012-11-27T10:34:57.190
> 
> 标签：unit-testing, service, mocking, angularjs, jasmine

我有一个调用外部 Web 服务的服务：

```
angular.module('myApp.services', [])
.service('autoCmpltDataSvc', function ($http) {
    var innerMatch = function (data) {
        return $.map(data, function (item) {
            return {
                fullName: item.name + (item.adminName1 ? ", " + item.adminName1 : "") + ", " + item.countryName,
                shortName: item.name,
                itemId: item.geonameId
            };
        });
    };

    this.fetchFromGeonamesDb = function (request, response, matcher) {
        $http({
            method: 'jsonp',
            url: 'http://ws.geonames.org/searchJSON?callback=JSON_CALLBACK',
            params: {
                featureClass: "P",
                style: "full",
                maxRows: 12,
                name_startsWith: request.destName
            }
        }).success(function (data, status) {
            console.log(data);
            response($.map(innerMatch(data.geonames), matcher));
        });
    };
}); 
```

我正在尝试测试它是否正确形成了输出，所以我模拟了对真实 Web 服务的调用。这是我的单元测试。

```
describe('Services', function () {

    beforeEach(module('myApp.services'));

    describe('autoCompleteService', function () {
        var $httpBackend, svc;
        var results = [];
        var matcher = function (item) {
            return item;
        };
        var response = function (arr) {
            results = arr;
        };

        beforeEach(inject(function ($injector, autoCmpltDataSvc) {
            svc = autoCmpltDataSvc;
            $httpBackend = $injector.get('$httpBackend');
            $httpBackend.whenJSONP(/searchJSON/).
              respond([
              { name: 'City1', adminName1: 'Region1', countryName: 'Country1', geonameId: 1 },
              { name: 'City2', countryName: 'Country2', geonameId: 2}]);
        }));

        afterEach(function () {
            $httpBackend.verifyNoOutstandingExpectation();
            $httpBackend.verifyNoOutstandingRequest();
        });

        it('should return values', function () {
            $httpBackend.expectJSONP(/searchJSON/);
            svc.fetchFromGeonamesDb({ 'destName': 'fra' }, response, matcher);
            $httpBackend.flush();
            expect(results.length).toBe(2);
        });
    });
}); 
```

但是测试会产生错误。

```
 TypeError: Cannot read property 'length' of undefined
            at Function.v.extend.map (C:/Users/kmukhort/Documents/_files/TMate/A
ngularTest/app/lib/jquery-1.8.3.min.js:2:15334)
            at innerMatch (C:/Users/kmukhort/Documents/_files/TMate/AngularTest/
app/js/services.js:8:18) 
```

我想模拟响应有问题，因为它似乎没有返回数组。但我不明白为什么它不返回数组。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:55:18.020

由于彼得培根达尔文，我发现了我的愚蠢错误。

> 好的，所以您的成功函数期望您的 http 调用返回一个带有名为 geonames 的字段的对象，目前您的模拟正在返回一个直接数组。
> 
> 也许您应该将模拟更改为此？

```
> $httpBackend.whenJSONP(/searchJSON/).
>               respond( { geonames: [
>                 { name: 'City1', adminName1: 'Region1', countryName: 'Country1', geonameId: 1 },
>                 { name: 'City2', countryName: 'Country2', geonameId: 2}]
>               }); 
```

[https://groups.google.com/forum/#!topic/angular/u-fYR-AC8Ec](https://groups.google.com/forum/#!topic/angular/u-fYR-AC8Ec)

# c++ - 在 STL 集中使用结构和自定义比较函数时避免复制

> ID：13582310
> 
> 赞同：3
> 
> 时间：2012-11-27T10:35:06.130
> 
> 标签：c++, stl, set

想象一下，您有一个包含一堆成员的结构，并且您想使用通过其中一个成员引用的特定值作为集合中的键，如下所示：

```
class ComplexClass {
 public:
  const string& name() const;
  // tons of other stuff
};
struct MyStruct {
  ComplexClass* c;
  MoreStuff* x;
};
struct CmpMyStruct {
  bool operator()(const MyStruct& lhs, const MyStruct& rhs) {
    return lhs.c->name() < rhs.c->name();
  }
};
typedef set<MyStruct, CmpMyStruct> MySet;
MySet my_set; 
```

这工作得很好，但是现在我想通过*字符串名称*进行查找，但是 my_set.find() 现在当然需要一个“const MyStruct&”。如果名称不是从该 ComplexClass 中取出，而是 MyStruct 的成员，我可以快速伪造 MyStruct 的一个实例并使用它：

```
MyStruct tmp_for_lookup;
tmp_for_lookup.name = "name_to_search";  // Doesn't work of course
MySet::iterator iter =  my_set.find(tmp_for_lookup); 
```

但是，如前所述，它不是这样工作的，名称在 ComplexClass 中，所以我必须至少在其中放一个模拟或其他东西。

所以我真正想要的是 STL 集不会比较 MyStructs，而是首先从 MyStruct（具有字符串类型）中“投影”出密钥，然后对其进行操作，包括 find()。我开始深入研究 gcc 中 set/map 的实现，看看他们是如何为地图解决这个问题的，很遗憾地看到他们实际上在内部 _Rb_tree 中解决了它，但没有公开它，因为它不是标准。来自 gcc 的 stl_tree.h：

```
template<typename _Key, typename _Val, typename _KeyOfValue,
         typename _Compare, typename _Alloc = allocator<_Val> >
  class _Rb_tree
  {
....
template<typename _Key, typename _Val, typename _KeyOfValue,
         typename _Compare, typename _Alloc>
  typename _Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::iterator
  _Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::
  find(const _Key& __k) 
```

然后在 stl_map.h 中：

```
 typedef _Rb_tree<key_type, value_type, _Select1st<value_type>,
             key_compare, _Pair_alloc_type> _Rep_type; 
```

请注意它如何使用 '_Select1st' 将键从 value_type 中投影出来，因此 find() 实际上可以只使用该键。另一方面， stl_set.h 在这种情况下只使用身份，正如预期的那样。

所以我想知道，有没有一种方法是我目前缺少的，因为我可以使用普通的 STL 集/地图实现相同的美感和效率（即我绝对不想直接使用 GCC 特定的 _Rb_tree），这样我真的可以做到

```
MySet::iterator iter = my_set.find("somestring"); 
```

请注意，我特别不想将 my_set 更改为从字符串到 MyStructs 的映射，即我不想将字符串（或对它的引用）从 ComplexClass 中复制出来，这样我就可以做`map<string, MyStruct>`或`map<const string&, MyStruct>`代替。

在这一点上，这几乎更像是一种思想练习，但看起来很有趣:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:51:49.553

> 现在我想通过字符串名称进行查找，但是 my_set.find() 现在当然需要一个“const MyStruct&”。

这是一个众所周知的界面缺陷`std::set`。

`boost::multi_index`with `ordered_unique`index 提供了带有可比较键而不是整个集合元素的`std::set`额外函数的接口。`find()`

```
#include <boost/multi_index_container.hpp>
#include <boost/multi_index/ordered_index.hpp>

struct ComplexClass {
    std::string name() const;

    struct KeyName {
        typedef std::string result_type;
        std::string const& operator()(ComplexClass const& c) const {
            return c.name();
        }
    };
};

namespace mi = boost::multi_index;

typedef mi::multi_index_container<
      ComplexClass
    , mi::indexed_by<
            mi::ordered_unique<ComplexClass::KeyName>
          >
    > ComplexClassSet;

int main() {
    ComplexClassSet s;
    // fill the set
    // ...
    // now search by name
    ComplexClassSet::iterator found = s.find("abc");
    if(found != s.end()) {
        // found an element whose name() == "abc"
    }
} 
```

有关详细信息，请参阅[http://www.boost.org/doc/libs/1_52_0/libs/multi_index/doc/tutorial/key_extraction.html 。](http://www.boost.org/doc/libs/1_52_0/libs/multi_index/doc/tutorial/key_extraction.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:24:27.183

如果您可以处理比较虚拟调用的开销，则可以使用如下技巧：

```
class ComplexClass {
 public:
  const string& name() const;
  // tons of other stuff
};
struct MyStruct {
  ComplexClass* c;
  MoreStuff* x;
  virtual const string& key() const { return c->name(); } /* change */
};
struct CmpMyStruct {
  bool operator()(const MyStruct& lhs, const MyStruct& rhs) {
    return lhs.key() < rhs.key(); /* change */
  }
};
typedef set<MyStruct, CmpMyStruct> MySet;
MySet my_set; 
```

然后，为了查找，添加以下结构：

```
struct MyLookupStruct : MyStruct {
  string search_key;
  explicit MyLookupStruct(const string& key) : search_key(key) {}
  virtual const string& key() const { return search_key; }
};
/* .... */
MySet::iterator iter =  my_set.find(MyLookupStruct("name to find")); 
```

这取决于`std::set<>::find`不复制论点，这似乎是一个合理的假设（但据我所知，没有明确保证）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T05:10:58.300

请记住，关联容器（`set`或`map`）中的键是`const`，因为它们在插入时已排序，以后无法重新排序。因此，任何实际引用插入对象的解决方案都容易受到插入后更改密钥成员的可能性的影响。

因此，最通用的解决方案是使用 a`map`并复制密钥成员。

如果键不会改变，那么您可以使用指针作为键。使用临时查找将需要获取指向临时的指针，但这没关系，因为`find`不会`operator[]`保留其参数的副本。

```
#include <map>
#include <string>

/* Comparison functor for maps that don't own keys. */
struct referent_compare {
    template< typename t >
    bool operator () ( t *lhs, t *rhs )
        { return * lhs < * rhs; }
};

/* Convenience function to get a const pointer to a temporary. */
template< typename t >
t const *temp_ptr( t const &o ) { return &o; }

struct s {
    std::string name;
    long birthdate;
    double score;
};

/* Maps that don't own keys.
   Generalizing this to a template adapter left as an exercise. */
std::map< std::string const *, s, referent_compare > byname;
std::map< double const *, s, referent_compare > byscore;

int main() {
    s bob = { "bob", 12000000, 96.3 };
    byname.insert( std::make_pair( & bob.name, bob ) );
    byscore.insert( std::make_pair( & bob.score, bob ) );

    byname[ temp_ptr< std::string >( "bob" ) ].score = 33.1;
} 
```

当然，另一种解决方案是使用 a `set`of 指针并定义比较函数来访问成员。指向成员的指针可用于概括这一点，因此关键成员只是比较函子的模板参数。

[http://ideone.com/GB2jfn](http://ideone.com/GB2jfn)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T10:41:37.037

AFAIK，没有办法`std::set`只使用 C++ 标准库，但你可以使用[`std::find_if`](http://www.cplusplus.com/reference/algorithm/find_if/)谓词

```
struct cmp_for_lookup {
    std::string search_for;
    cmp_for_lookup(const std::string &s) : search_for(s) {}
    bool operator()(const MyStruct &elem) { return elem.c->name() == search_for; }
};

std::find_if(my_set.begin(), my_set.end(), cmp_for_lookup("name_to_search")); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T11:34:59.247

显然，由于 boost 是不可能的，并且`std::set`不打算提供多个索引，因此您必须构建自己的额外索引。

```
std::string name_of_struct(const MyStruct* s){
   return s->c->name();
}

...
std::map<std::string, MyStruct*> indexByName;
std::transform( my_set.begin(), my_set.end(), 
                std::inserter(indexByName,indexByName.begin()),
                &name_of_struct );

 ...
 MyStruct* theFoundStruct=indexByName("theKey"); 
```

（注意：这个想法会起作用，但编译器仍然会抱怨，因为这是我的头等大事）。

# jquery - 由于滚动条和滚动页面，ColorBox 定位不正确

> ID：13582313
> 
> 赞同：2
> 
> 时间：2012-11-27T10:35:13.223
> 
> 标签：jquery, jquery-plugins, colorbox

[如果我保持整个页面可见（没有滚动条）](http://graham-russell.co.uk/colorbox/)，ColorBox 会按预期运行。

当滚动条在右侧可见时，页面内容会发生变化，但颜色框不会。

尝试使用 html {overflow-y: scroll;} 解决此问题，但这似乎不起作用。页面内容已正确固定，但 ColorBox 不尊重滚动条宽度。

如果滚动条可见，并且在单击链接时页面向下滚动，则 ColorBox 在错误的位置初始化，从可见页面的顶部而不是实际页面顶部对齐。

编辑：

在第 492 行，有以下代码 `// remove the modal so that it doesn't influence the document width/height $box.css({top: -9e4, left: -9e4});`

我似乎模态 IS 影响文档的宽度/高度，因为注释掉第 503 行会产生所需的效果`//top = scrollTop;`。这告诉我模态框引起了问题。这仍然不能纠正水平对齐的行为，弹出窗口仍然从主体偏移，因为它没有考虑滚动条。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:36:57.683

这是 ColorBox 的默认行为。要处理它，您需要将 ColorBox 初始化更改为（摘自您的页面）：

```
.colorbox({iframe:true, width:"800px", height:"600px", top:"137px", opacity:"0", scrolling:"false", position:fixed}); 
```

注意`position:fixed`属性 - 它强制浏览器根据`top`需要处理您的参数，即它将始终为 137 像素，而不是 137 像素 + 页面的滚动高度。

也请将此[问题](https://stackoverflow.com/questions/2712036/colorbox-make-the-light-box-fixed-when-scrolling)视为与您的问题相似。

# rest - RESTful Web 服务的 CAS 身份验证

> ID：13582315
> 
> 赞同：7
> 
> 时间：2012-11-27T10:35:28.977
> 
> 标签：rest, authentication, service, web, cas

我的应用程序需要访问在不同服务器上运行的 RESTful Web 服务。此 Web 服务使用 CAS 身份验证，当通过浏览器使用它时，如果用户尚未通过身份验证，它将重定向到 CAS 登录。没有通过 CAS 实际登录的方法。我的应用程序也使用 CAS，因此用户将通过身份验证

我想通过 JQuery/Ajax 访问它，但似乎没有为 JSONP 配置服务器，我理解这是必不可少的，因为跨域问题。

现在，我可以改为通过我的服务器发出 Ajax 请求，这导致了我的问题：没有可供我的服务器调用的 CAS 登录方法，我如何“告诉”Web 服务用户已通过身份验证？

所以我想首先我想弄清楚浏览器、CAS 和 RESTful 服务之间发生了什么，以及如何在没有任何显式传递凭据的情况下处理授权。其次，我想看看在从我的服务器调用服务时如何/是否可以复制它 - 它与来自浏览器的请求不同，因此没有 CAS 授权令牌，但我没有看看如何获​​得或提供它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-16T08:04:16.993

**对于关于身份验证/单点登录如何工作的问题 1：**
当您登录 CAS 服务器（例如 security.example.com）时，会在您的浏览器中为域 security.example.com 设置一个 cookie。当您使用标准 CAS 身份验证和验证过滤器通过应用程序上的浏览器访问受保护文件时，典型流程如下所示：

1.  为应用程序配置的 CAS 身份验证过滤器检查用户对象是否在会话中。如果是，则允许用户通过
2.  如果没有，CAS 身份验证过滤器会将浏览器重定向到 CAS 登录页面。在单点登录场景中，CAS 服务器识别自己的 cookie，检查应用程序是否已注册并参与单点登录 - 如果是，则使用服务票证将浏览器重定向回应用程序。
3.  应用程序上配置的 CAS 验证过滤器识别服务票证并联系 CAS 服务器以验证票证并创建断言对象

要使整个流程正常工作，您需要使用 cookie 和会话处理。

**对于关于如何在服务器端处理身份验证的问题 2：**
我们在应用程序中遇到了类似的问题，并使用了 2 种不同的方法来解决它：

1.  使用内部系统用户并使用基本身份验证标头通过此用户的凭据进行服务器到服务器访问。当然，您需要配置适当的过滤器来处理使用基本身份验证令牌的非交互式登录。这很容易实现，但是有明显的缺点，比如有这个特殊的系统用户，你的应用程序看到用户密码等。
2.  使用[代理身份验证](https://wiki.jasig.org/display/CAS/Proxy+CAS+Walkthrough)。在这种方法中，当您的用户针对 application1 进行身份验证时，它还会生成一个代理票证以供 application2 使用（服务器到服务器调用）。此代理票证可以在服务器到服务器通信中传递，以便 application1 代表用户访问 application2

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-22T20:42:25.730

我在我的一个项目中使用了这样的设置。一些 CAS 实现通过 rest 调用启用授权。尝试添加基本授权标头（用户名和密码的 Base 64 编码）。它看起来像这样

Header("授权","基本")

也尝试使用 Mozilla 上的 REST 客户端访问 REST API 以进行调试。它将真正帮助您理解各种标题等。

# mysql - 如何编写子句：WHERE num =... for a statement SELECT COUNT(*) as num...？

> ID：13582320
> 
> 赞同：0
> 
> 时间：2012-11-27T10:36:00.213
> 
> 标签：mysql

我有声明

```
SELECT COUNT(*) as num_requests, ip_address FROM requests
GROUP BY ip_address
ORDER BY num_requests DESC; 
```

当我使用以下子句时`WHERE num_requests = 3`，出现语法错误

```
SELECT COUNT(*) as num_requests, ip_address 
FROM requests
WHERE num_requests = 3
GROUP BY ip_address
ORDER BY num_requests DESC; 
```

**“where 子句”中的未知列“num_requests”**

有没有什么方法可以使用这个`WHERE`子句，而无需在上面返回的整个结果集上编写嵌套查询或连接语句？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T10:36:48.823

```
SELECT COUNT(*) as num_requests, ip_address 
FROM requests
GROUP BY ip_address
HAVING num_requests = 3
ORDER BY num_requests DESC 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T10:40:38.093

你需要`having`:)

```
SELECT COUNT(*) as num_requests, ip_address FROM requests
GROUP BY ip_address
HAVING COUNT(*) = 3
ORDER BY num_requests DESC; 
```

添加关于为什么`WHERE`不能使用的注释但是`HAVING`：使用诸如`SUM, MIN,MAX,AVG,COUNT`etc之类的`WHERE`聚合不起作用。所以你必须使用后者。

# .htaccess - .htaccess 将文件夹重定向到文件夹完全匹配

> ID：13582324
> 
> 赞同：0
> 
> 时间：2012-11-27T10:36:25.467
> 
> 标签：.htaccess

好的，我正在尝试重定向一种编写为文件夹的语言，如下所示：

```
RedirectMatch 301 ^index.php/es$ index.php/en 
```

如您所见，我只希望它与 index.php/es 完全匹配时重定向，因此 index.php/es/inicio 不会重定向。

它对我不起作用，我尝试了几种变化。

这必须独立于域名，因为我有多个指向该站点的域都需要使用此规则。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:47:06.810

您缺少一些前导斜杠：

```
RedirectMatch 301 ^/index.php/es$ /index.php/en 
```

通过重定向/重定向匹配语句放置的 URI 有一个前导斜杠，因此`^index.php/es$`永远不会匹配。

# photoshop - 无法检索系统字体

> ID：13582337
> 
> 赞同：0
> 
> 时间：2012-11-27T10:37:06.003
> 
> 标签：photoshop

我正在创建一个显示系统字体列表的弹性面板（myextension）。我正在使用代码“Photoshop.app.fonts”来检索所有已安装的系统字体。除了在一种情况下，一切正常，如下所示。- 打开 Photoshop。- 单击文件 > 新建。不要关闭“新建”对话框。- 从 Window>Extensions>myextension 打开扩展。

在这种情况下，扩展程序打开，但 API“Photoshop.app.fonts”返回 null，因此我的面板什么也不显示。

谁能帮我理解为什么 API 在这种情况下什么都不返回？我该如何克服这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:41:18.277

我不知道 API 或弹性面板，但在 Photoshop 中

```
alert(app.fonts.length) 
```

应该返回安装的字体数量。

# asp.net - 如何处理 MVC 中的 Click 按钮事件

> ID：13582340
> 
> 赞同：1
> 
> 时间：2012-11-27T10:37:11.180
> 
> 标签：asp.net, asp.net-mvc

我是 Asp.net MVC 的新手，正在开发一个应用程序，该应用程序有一个表单，其中有 2 个文本框用于输入，1 个文本框用于输出。我也在表单中添加了按钮。现在我想在单击按钮的输出文本框中显示输出事件。请让我知道如何在 MVC4 中做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:08:21.110

ASP.NET MVC 与 ASP.NET WebForms 的工作方式不同。或者更确切地说，我应该说 ASP.NET WebForms 的工作方式与 Web 的其他部分不同（！）。

当你创建一个 HTML 表单时，它有一个`action`属性来指定应该处理表单提交的 URL。当用户通过`input`或`button`with提交表单时`type="submit"`，浏览器会`POST`向该 URL 发出请求，包括`application/x-www-form-urlencoded`默认使用 MIME 类型包含在表单中的数据（如果表单应该包含文件上传则不同）。

您的服务器端代码不应响应单个 UI 事件，因为这不是 Web 的工作方式，WebForms 只是为您提供了对 HTTP 的抽象，以引诱您进入 Web 上不存在的控制感。

下面是处理表单的`GET`和`POST`请求的两个示例操作方法：

```
public ActionResult Index()
{
    var model = new MyFormFields();
    return View(model);
}

[HttpPost]
public ActionResult Index(MyFormFields fields)
{
    if (!ModelState.IsValid)
    {
        return View(fields);
    }

    // do stuff with form data

    var model = new MyResultModel
    {
         Output = fields.Input // for e.g.
    };

    return View("Results", model);
} 
```

这会响应表单提交并使用结果视图模型呈现不同的视图。最佳实践建议在这里进行 HTTP 重定向，这样浏览器就不会`POST`意外地重新提交请求，但我们稍后再做。

# php - 谷歌地理位置，有这么简单吗？

> ID：13582342
> 
> 赞同：0
> 
> 时间：2012-11-27T10:37:15.500
> 
> 标签：php, url, geolocation, maps

你看，当我在谷歌地图上输入地理位置时，我最终得到的是 url

[https://maps.google.com/maps?q=55.403755999999994,+10.40237](https://maps.google.com/maps?q=55.403755999999994,+10.40237)

我需要找到它附近的所有加油站，所以我当然会按“附近”并输入加油站，但最后我会得到一个变形的 URL

[https://maps.google.com/maps?q=gas+station&sll=55.403756,10.40237&sspn=0.010027,0.01929&near=Kochsgade+47B,+5000+Odense,+Danmark&geocode=CVvcdG1J0vHwFbstationllTQMdv&LmeAClgasir+-4PAiBNR=hhhq= 13](https://maps.google.com/maps?q=gas+station&sll=55.403756,10.40237&sspn=0.010027,0.01929&near=Kochsgade+47B,+5000+Odense,+Danmark&geocode=CVvcdG1J0vHwFbllTQMdvLmeAClLHi4PAiBNRjGyrpFlhkir-w&t=h&hq=gas+station&z=13)

我的问题是，我能否拥有一个干净的网址，以便我可以轻松地将其链接到网站上的用户并向他展示他附近的加油站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:42:43.977

[https://maps.google.com/maps?q=gas+station&sll=55.403756,10.40237](https://maps.google.com/maps?q=gas+station&sll=55.403756,10.40237)

```
q=gas+station          //What
sll=55.403756,10.40237 //Where 
```

其余参数不是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:43:22.793

只需使用 URL 缩短器。有许多

[bitly.com](http://bitly.com)

或者试试[这个](http://yourls.org/)

# installation - NSIS：以兼容模式运行安装的子文件

> ID：13582343
> 
> 赞同：1
> 
> 时间：2012-11-27T10:37:14.793
> 
> 标签：installation, compatibility, nsis

我正在使用 NSIS 创建一个应用程序安装程序，其中包含多个程序安装文件，主要是 .exe 和 .msi 文件。

现在我有一个问题，我有一个非常旧的安装文件，只有当我将兼容性设置为 Windows ME/98 时才能正常工作。通常将运行安装的用户没有能力在兼容模式下运行整个安装包。

NSIS 中是否有在特定兼容模式下执行此类子设置的命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:01:39.117

您可以将[__COMPAT_LAYER](http://support.microsoft.com/kb/286705)设置为 Win98：

```
System::Call 'Kernel32::SetEnvironmentVariable(t "__COMPAT_LAYER", t "Win98")'
ExecWait '"$instdir\foo.exe"'
System::Call 'Kernel32::SetEnvironmentVariable(t "__COMPAT_LAYER", i 0)' 
```

# javascript - 隐藏 URL 中 id 参数大于某个数字的所有页面上的项目

> ID：13582344
> 
> 赞同：0
> 
> 时间：2012-11-27T10:37:15.530
> 
> 标签：javascript, jquery

我们有以下javascript：

```
<script type="text/javascript">
    try {
        if (typeof jQuery === 'function') {
            jQuery(document).ready(function() {
                if (document.URL.indexOf('http://test.com/browse/ID-2007') === 0) {
                    jQuery('#test').hide();
                }
            });
    }
    } catch(err) {}
</script> 
```

如何修复脚本以便`jQuery('#test').Hide();`在任何地方执行`ID > 2007`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:41:34.367

如果指向 ID 的 URL 部分始终相同，您可以删除该部分，将剩余部分解析为一个数字并检查它：

```
var id = parseInt(document.URL.replace('http://test.com/browse/ID-', ''), 10);

if (id > 2007) {
   // Do your thing
} 
```

如果需要更复杂的匹配，该[`string.replace()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)方法也可以使用正则表达式进行匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:47:20.793

使用 JavaScript 正则表达式查找您的 id ：

```
var regex = new RegExp("ID-([\d]+)", "g");
var id = regex.exec(document.URL);
if (id[1] > 2007) jQuery('#test').hide(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T10:42:39.173

```
var urlchunks = window.location.href.split('/');
var id = urlchunks[urlchunks.length-1].split('-');
if(parseInt(id[1]) > 2007) {
        jQuery('#test').hide();
      } 
```

# wix - wix 站点未在 IIS7 中创建

> ID：13582353
> 
> 赞同：0
> 
> 时间：2012-11-27T10:37:43.507
> 
> 标签：wix, wix3.6

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"
 xmlns:iis="http://schemas.microsoft.com/wix/IIsExtension">
  <Product Id="e6c96829-cb0e-443c-843d-50f9c497f0b6" Name="Sample"
       Language="1033" Version="1.0.0.0" Manufacturer="Me"
       UpgradeCode="b3b0a43f-5a27-4974-b9d4-87364345aec0">
<Package InstallerVersion="200" Compressed="yes" />
<Media Id="1" Cabinet="WixSample.cab" EmbedCab="yes" />
<iis:WebSite Id='DefaultWebSite' Description='Default Web Site'>
  <iis:WebAddress Id='AllUnassigned' Port='80' />
</iis:WebSite>
<Directory Id="TARGETDIR" Name="SourceDir">
  <Directory Id="INSTALLDIR" Name="Sample">
    <Directory Id="MyWebSiteDir" Name="MyWebSite" />        
  </Directory>
</Directory>
<Feature Id="SampleFeature" Title="Sample" Level="1">
</Feature>
</Product>
</Wix> 
```

这是我运行的代码。它没有显示任何错误。但是当我运行 MSI 时，站点并没有在 IIS 中创建。IIS 版本是 7。WIX 版本是 3.6。即使我尝试了[http://www.wintellect.com/cs/blogs/jrobbins/archive/2011/01/25/install-a-new-virtual-directory-to-default-web-site-with-中的代码wix.aspx](http://www.wintellect.com/cs/blogs/jrobbins/archive/2011/01/25/install-a-new-virtual-directory-to-default-web-site-with-wix.aspx)仍然无法正常工作

# sql - DENSE_RANK 和 IN 的奇怪行为

> ID：13582355
> 
> 赞同：0
> 
> 时间：2012-11-27T10:37:49.900
> 
> 标签：sql, oracle, oracle11g, dense-rank

当我组合查询包含`DENSE_RANK()`以生成`IN`子句的输入时，我遇到了一些奇怪的结果。

为了证明我已经把它们分开了；

这个查询

```
select *
from ALL_QUOTE
where ID in ('G002WMLS') 
```

返回 1 个结果：

```
ID        LongID  StartDate  EndDate
G002WMLS  67888   01/10/2011 30/11/2011 
```

这个查询

```
select ID
from (

select LongId, ID, DENSE_RANK() over (partition by LongId order by end_date desc, substr(ID, 2, 7) desc, start_date desc) d
from WithoutPD
)

where d = 1 and LongId = '67888' 
```

还返回 1 个结果：

```
ID
G002WMLS 
```

但是，当我将它们结合在一起时：

```
select *
from ALL_QUOTE
where ID in (

select ID
from (

select LongId, ID, DENSE_RANK() over (partition by LongId order by end_date desc, substr(ID, 2, 7) desc, start_date desc) d
from WithoutPD
)

where d = 1

)
and LongId = '67888'; 
```

我最终得到两个结果：

```
ID        LongID StartDate   EndDate 
G002MIMQ  67888  01/10/2010  30/09/2011 
G002WMLS  67888  01/10/2011  30/11/2011 
```

我根本无法理解如何`G002MIMQ`包含在结果中。我使用的是 Oracle 11.2.0.1.0，但是我知道这可能是我误解的通用 SQL 功能。

希望你能对这个奇怪的问题有所了解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:40:45.947

您已经移动`and LongID='67888'`了子查询的 where 子句的外部。

试试这个查询...

```
select *
from ALL_QUOTE
where ID in (    
    select ID
    from (        
        select LongId, ID, DENSE_RANK() over (partition by LongId order by end_date desc, substr(ID, 2, 7) desc, start_date desc) d
        from WithoutPD        
    )        
    where d = 1
    and LongId = '67888'
); 
```

**编辑**

```
select
    AllQuote.*
from
    AllQuote
        inner join
    (
        select ID
        from (
            select LongId, ID, DENSE_RANK() over (partition by LongId order by end_date desc, substring(ID, 2, 7) desc, start_date desc) d
            from WithoutPD
        ) t
        where d = 1
        and LongId = '67888'
    ) v
        on AllQuote.ID = v.ID 
```

# c++ - 用于比特流 I/O 的 Boost.Iostreams 与 iostream/streambuf 重载

> ID：13582358
> 
> 赞同：1
> 
> 时间：2012-11-27T10:37:58.453
> 
> 标签：c++, stl, iostream, boost-iostreams

对于我当前的任务，我需要有可能读/写（主要是基于文件的）比特流。虽然如果用标准 C/C++ 编码，这或多或少是一项微不足道的任务，但我想通过重载和使用标准 STL iostream 或类似方法，使用更通用的方法重写代码，这样我就可以编写类似的东西

```
writeHeader();
{
    ofstream outfile ("test.bin");
    outfile << true; // Write 1 bit
    outfile << false; // Write 1 bit
    outfile << (char)0x42; // Write 8 bits
} 
```

但是我不确定要走哪条路：

1.  使用 Boost.IOStream 或
2.  直接从 streambuf 或 iostream 派生。

到目前为止，我从来不需要派生/提供自己的流类，但我想提高我的知识......

也许有人可以提供一些指针或提示，更喜欢哪种方式以及为什么！？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:58:53.487

您最好的选择可能是创建*一个*新的流类和一个流缓冲区类。使用自定义流类重载输出运算符，以将单个位放入自定义流缓冲区。

原因是 C++ 不支持比单个字节 ( `char`) 更小的实体。甚至`bool`类型也不是一个位，因为它必须是可寻址的。

# java - 我对输出感到困惑，因为它不会让我重新创建对象

> ID：13582359
> 
> 赞同：0
> 
> 时间：2012-11-27T10:38:00.587
> 
> 标签：java, logic, reset, blackjack, auto-renewing

我正在尝试解决一个问题，即我在抽完所有牌后尝试重置我的牌组。当我到达牌组的尽头时，我确实应该收到消息`Deck is empty! You must recreate and reshuffle deck of cards!`，但是一旦牌组被重新创建并重新洗牌，它仍然会不断显示此消息。

所以我将 Card 对象传递给以堆栈方式存储在数组中的 Deck 类。

为什么我会在确实重置纸牌的地方得到这样的输出？

```
deal, bet, hit, stay, split, leave: deal

Drawing Player's card... 9 ♥
Drawing Dealer's card... A ♣
Drawing Player's card... 7 ♦
Drawing Dealer's card... K ♦

Dealers Hand: K_♦ A_♣ = 21
Players Hand: 7_♦ 9_♥ = 16

Dealer has BLACKJACK!

deal, bet, hit, stay, split, leave: deal

Deck is empty! You must recreate and reshuffle deck of cards!
Creating deck...
Shuffling deck...
Drawing Player's card... 7 ♥
Drawing Dealer's card... 5 ♥
Drawing Player's card... K ♠
Drawing Dealer's card... 6 ♦

Dealers Hand: 6_♦ 5_♥ = 11
Players Hand: K_♠ 7_♥ = 17

deal, bet, hit, stay, split, leave: deal

Deck is empty! You must recreate and reshuffle deck of cards!
Creating deck...
Shuffling deck...
Drawing Player's card... Q ♦
Drawing Dealer's card... 9 ♥
Drawing Player's card... 8 ♥
Drawing Dealer's card... 10 ♠

Dealers Hand: 10_♠ 9_♥ = 19
Players Hand: 8_♥ Q_♦ = 18

deal, bet, hit, stay, split, leave: deal

Deck is empty! You must recreate and reshuffle deck of cards!
Creating deck...
Shuffling deck...
Drawing Player's card... 3 ♣
Drawing Dealer's card... 6 ♠
Drawing Player's card... 4 ♠
Drawing Dealer's card... K ♠

Dealers Hand: K_♠ 6_♠ = 16
Players Hand: 4_♠ 3_♣ = 7

deal, bet, hit, stay, split, leave: 
```

这就是我重置牌组的方式：

```
private static Deck createDeck(Deck deck)
{
    System.out.println("Creating deck...");
    deck = new Deck(DECKSIZE);
    deck.createDeck();

    System.out.println("Shuffling deck...");
    deck.shuffleDeck();

    return deck;
} 
```

这就是我检查甲板是否为空的方式：

```
private static Deck checkDeck(Deck deck)
{
    if(deck == null)
        return createDeck(deck);
    if(deck.isEmpty())
    {
        deck = new Deck(DECKSIZE);
        System.out.print("Deck is empty! You must recreate and reshuffle deck of cards!\n");
        return createDeck(deck);
    }
    else
        return deck;
} 
```

我每次抽牌前都会检查牌组：

```
public static void drawFromDeck(Deck deck, Hand hand)
{
    deck = checkDeck(deck);

    Card temp = new Card(deck.pop());
    System.out.println("Drawing " + hand.getName() + "'s card... " + temp.toString());
    hand.insert(temp);

    System.out.print("\n");
} 
```

初始绘制（）

```
private static void initialDraw(Deck deck, Hand player, Hand dealer)
{
    deck = checkDeck(deck);
    drawFromDeck(deck, player); // drawing players card
    deck = checkDeck(deck);
    drawFromDeck(deck, dealer); // drawing dealers card
    deck = checkDeck(deck);
    drawFromDeck(deck, player); // drawing players card
    deck = checkDeck(deck);
    drawFromDeck(deck, dealer); // drawing dealers card

    System.out.print("Dealers Hand:");
    dealer.displayHand();
    System.out.print(" = " + dealer.getHandTotal() + "\n");
    System.out.print("Players Hand:");
    player.displayHand();
    System.out.print(" = " + player.getHandTotal() + "\n");

    checkInitialDraw(player, dealer);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:43:22.833

有几个范围问题（对于 Deck 变量）。

总而言之，这是错误的类型：

```
void createObj(MyObject objt)
{
    objt = new MyObject(); //Local Scope
}
//Caller
MyObject obj = null;
createObj(obj); // <-- New object will be created only within the function, obj will remain unaffected.
// obj is still null; 
```

我建议进行这些更改（wrt [http://ideone.com/S4Yv3l](http://ideone.com/S4Yv3l)）以使代码正常工作，但是，您可以改进您的代码。

**i)**更改 createDeck 的签名。

```
 private static Deck createDeck()
    {
        System.out.println("Creating deck...");
        Deck deck = new Deck(DECKSIZE);
        deck.createDeck();

        System.out.println("Shuffling deck...");
        deck.shuffleDeck();

        return deck;
    } 
```

**ii)**检查甲板

```
 private static Deck checkDeck(Deck deck)
    {
        if(deck == null)
            return createDeck();

        if(deck.isEmpty())
        {
            System.out.print("Deck is empty! You must recreate and reshuffle deck of cards!\n");
            return createDeck();
        }

        return deck;
    } 
```

**iii)** InitialDraw

```
private static Deck initialDraw(Deck deck, Hand player, Hand dealer)
{
    deck = checkDeck(deck);
    drawFromDeck(deck, player); // drawing players card
    deck = checkDeck(deck);
    drawFromDeck(deck, dealer); // drawing dealers card
    deck = checkDeck(deck);
    drawFromDeck(deck, player); // drawing players card
    deck = checkDeck(deck);
    drawFromDeck(deck, dealer); // drawing dealers card

    System.out.print("Dealers Hand:");
    dealer.displayHand();
    System.out.print(" = " + dealer.getHandTotal() + "\n");
    System.out.print("Players Hand:");
    player.displayHand();
    System.out.print(" = " + player.getHandTotal() + "\n");

    checkInitialDraw(player, dealer);
    return deck;
} 
```

**iv）**在主要：

```
deck = initialDraw(deck, playersHand, dealersHand); 
```

我建议只针对一组事物进行更改，您可以使用相同的原理来组织其他功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:47:47.303

```
 if(deck == null)
    return createDeck(deck);
else if(deck.isEmpty())
{
    deck = new Deck(DECKSIZE);
    System.out.print("Deck is empty! You must recreate and reshuffle deck of cards!\n");
    return createDeck(deck);
}
else
    return deck; 
```

}

试试这个

# javascript - Kendo UI Treeview 附加功能性能

> ID：13582363
> 
> 赞同：1
> 
> 时间：2012-11-27T10:38:04.137
> 
> 标签：javascript, performance, telerik, kendo-ui, kendo-treeview

看起来下面函数的性能真的很糟糕。

```
treeView.append(children, parent); 
```

这里的*treeView*是 Kendo UI Treeview，*父*节点是子节点的容器节点，子节点*是*大约 150 个新节点的数组（我的场景）。

而这段代码执行时间超过 7 秒。

我猜想*附加*功能对于项目集合没有很好的实现，所以也许有一些通过 jQuery 生成 html 的变通方法，但是 Kendo UI Treeview 也应该知道新节点以正确处理新节点的未来扩展事件。有什么办法可以提高上面代码的性能吗？

谢谢你，伊霍尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T14:30:59.393

对于遇到此问题的人：

最终，我调查了 Kendo UI 源代码，而不是原始帖子中的行，我使用了以下代码：

```
 treeView.dataItem(parent).children.data(children) 
```

在我的场景中效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T16:32:42.993

性能是一个相当相对的术语。如果需要 7 秒，那当然不是很好的表现。在我的计算机`append`中，150 个新节点大约需要一秒钟，但无论如何我可能会建议您进行一些改进。

你是如何`append`逐个节点的？

```
for (var i = 0; i < 150; i++) {
    var added = { text:"node" + i };
    tree.append(added, parent);
} 
```

试试这个（构建一个包含所有要添加的节点的数组，然后调用`append`）：

```
var added = [];
for (var i = 0; i < 150; i++) {
    added.push({ text: "node" + i });
}
tree.append(added, parent); 
```

在我的电脑中，它从 1105 毫秒变为 787 毫秒。没那么多，但是......

**但是**，这是插入节点的时间，而不是渲染所需的时间。是您的问题`append`还是在屏幕上呈现？

# ios - 当用户更新内容时，通过 segue 传递的字典类失败

> ID：13582373
> 
> 赞同：0
> 
> 时间：2012-11-27T10:38:58.653
> 
> 标签：ios, segue

我的 iOS 应用程序通过几个表视图将数据添加到基于字典的配置文件类中。当用户完成配置文件时，下一次登录他们可以跳过配置文件构建（以及那些表格视图），但如果他们选择，他们可以重建他们的配置文件。我使用 segues 一步一步地向前传递配置文件类。在重建时，应用程序会跳回到开头。问题：在重建时，配置文件在传递到第一个表视图（国籍）时消失。这是一些代码：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    NSMutableArray *sendArray = [[NSMutableArray alloc] initWithObjects:user0, nil];
NSLog(@"send array = %@", sendArray );
    if( buildPf ) {     //  to Nationality VC
        if ([[segue identifier] isEqualToString:@"getNationality"]) {
            Nationality_TableVC *vc = [segue destinationViewController];
            vc.profiles0 = sendArray;
        }
    } else {        //  to Profile VC
        if( [[segue identifier] isEqualToString:@"directToProfile"] ) {
            YourProfile_VC *vc = [segue destinationViewController];
            vc.profiles10 = sendArray;
            [vc setPushID:[user0.userID integerValue]];
            [vc setPushedPf:profileSum];
        }
    }
} 
```

在 Nationality_VC 中，.h：

@property（强，非原子）NSMutableArray *profiles0;

在他们中：

```
@implementation Nationality_TableVC {
    NSUInteger  selectedIndex;
    NSUInteger  selectedRow;
    Profile     *user0;
}

- (void)viewDidLoad {
    [super viewDidLoad];
    user0 = [[Profile alloc] init];
    user0 = [self.profiles0 objectAtIndex:0];
    NSLog(@"(Nationality) user0 is %@", user0);
    selectedRow = -1;
    [self makeTableIndex];
} 
```

通过调试，可以看到跳转回来后类被正确填充了。sendArray 总是正确的。通过与初始构建期间相同的 segue，配置文件消失了。为什么？应用程序崩溃。在国籍表视图中，我有一个 NSLog。在初始构建期间，消息是：

```
(Nationality) user0 is <Profile: 0x7152330> 
```

在重建期间，消息是：

```
(Nationality) user0 is (null) 
```

然后尝试将国籍选择添加到（空）配置文件，当然会导致崩溃。如果用户选择重建然后改变主意，他们可以再次直接跳转到完成的配置文件。如果他们这样做，则 segue 正确地通过了配置文件类。没问题。什么可能导致失踪？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T23:56:44.037

我的朋友 Nop 再次救了我。他的调试技巧比我好很多。他向我展示了我的**buildPf** bool 实际上阻止了我的 prepareForSegue 到 Nationality_TableVC。当调用 segue 时，它​​跳过了准备。事实上，在prepareForSegue 中根本不需要**buildPf条件。**在这个愚蠢的错误上浪费了好几个小时。

# java - 使用哪个 Java XML RPC 库

> ID：13582375
> 
> 赞同：9
> 
> 时间：2012-11-27T10:39:00.540
> 
> 标签：java中使用, xml-rpc, , java, xml, xml-rpc, rpc

在普通[java中使用](/questions/tagged/java "show questions tagged 'java'")[xml-rpc](/questions/tagged/xml-rpc "显示标记为“xml-rpc”的问题")似乎有两种选择：

*   [javax.xml.rpc](http://docs.oracle.com/javaee/5/api/javax/xml/rpc/package-summary.html) - 看起来更复杂，但它是标准 jdk 的一部分（或者是吗？）
*   [org.apache.xmlrpc](http://ws.apache.org/xmlrpc/apidocs/org/apache/xmlrpc/package-summary.html) - 似乎更容易使用，但我必须将库附加到我的 jar 中（或者我可以吗？）

我应该将哪一个用于 dektop Java 应用程序？或者也许还有另一个非常好的我不知道它存在？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T11:06:45.170

我最终选择了`org.apache.xmlrpc`，主要是因为我的服务器根本不发送 WSDL 文件。这并不是说 JAX-WS 不可能。实际上，我很确定 JAX-WS 是一种比 Apache XMLRPC 具有更多功能的更强大的解决方案。然而，简单的事实是，我花了大约 4 个小时尝试通过 JAX-WS 实现用户登录 Drupal，但没有结果，之后我转向 Apache XMLRPC，并在 10 分钟内完成了一个工作案例。

# java - JRebel 和动态类加载

> ID：13582377
> 
> 赞同：0
> 
> 时间：2012-11-27T10:39:12.257
> 
> 标签：java, jrebel

我有几个关于 JRebel 和 Java 的 Dynamic Class Laoding 的问题。

例如，在一个 servlet 中，我可以在 WEB-INF 目录的 classes 目录中重新加载 servlet 类，这样每当我更改类的内容并且在编译后我可以看到更改直接反映在我的 web 应用程序中，而无需重新构建我的网络应用程序。

除了上面提到的之外，JRebel 还提供什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:59:43.480

除了 Java 类重载，JRebel 还为 Java 生态系统中的各种技术提供了集成。我的意思是与所有类型的容器和框架集成。

为了能够在 Java EE 世界中工作，需要与容器集成。例如，如果您想动态添加一个新的 EJB。为了支持特定于框架的更改，JRebel 包含了一些特殊的插件。例如，如果您想在 Spring 上下文中添加一个新 bean 并将其注入其他地方......或者动态添加新的 Struts 操作......或者在 JSP scriplet 中查看对 Java 类的更改。有很多[功能](http://zeroturnaround.com/software/jrebel/features/)要列出

[网站](http://zeroturnaround.com/software/jrebel/features/frameworks/)上提供了特定框架集成的完整列表

# jquery - 使用 jquery 访问 twitter bootstrap modal-body 内容

> ID：13582386
> 
> 赞同：2
> 
> 时间：2012-11-27T10:39:44.630
> 
> 标签：jquery, asp.net-mvc, twitter-bootstrap, modal-dialog

我是 jquery 和 twitter 引导程序的新手，所以请原谅这个愚蠢的问题。

我有一个 MVC 视图，它设置了一个 twitter 引导模式，它由一个链接激活，该链接也输出在这个视图中。

我想将数据远程与模态一起使用来加载具有 MVC 局部视图内容的模态。

我让所有这些工作都很好。

但是我随后想做的是能够通过 jquery 从主视图访问元素（从部分视图），即使我确定选择器正确，它也不能按预期工作。

例如，我有一个 href 链接，我尝试将其分配给 click 事件，但这不会触发。

但是，如果我移动脚本以使其在部分视图中输出为拉入模态体，那么脚本确实可以工作并且单击事件得到处理。

我宁愿在局部视图中不必有脚本（即使被引用），我宁愿在主视图中引用一个脚本。

无论如何都能够访问远程加载到模态体中的元素，而不必将脚本放在远程部分视图中？

另外，我只是模拟了一个测试，其中模态不使用数据远程并且锚点 href 直接插入模态体中，这样做我仍然无法从主页。非常感谢任何建议。

做更多研究我在以下帖子中找到了答案 [如何在模态对话中设置输入值？](https://stackoverflow.com/questions/7845866/how-to-set-the-input-value-in-a-modal-dialogue?rq=1)

这似乎表明 jquery 选择器也应该包括 .modal-body 所以我已经从以下更改了我的选择器：

```
 $("#TestButton").click(function (ev) {
        ev.preventDefault()

        alert('Test Button Clicked'); 
    }) 
```

对此

```
 $(".modal-body #TestButton").click(function (ev) {
        ev.preventDefault()

        alert('Test Button Clicked'); 
    }) 
```

现在点击事件正如我最初预期的那样触发。

但是我现在不确定为什么我需要 .modal-body 作为 jquery 选择器的一部分。？有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:57:50.973

当新的动态内容被加载到 DOM 中时，您需要将点击事件连接到 href。

当页面加载时，JQuery 将在 DOM 中查找您的 $("#TestButton") 并没有发现任何内容，因为此时动态内容尚未注入。

有几种处理方法……首先，您可以使用 JQuery 延迟点击事件的连接，直到注入新内容，或者您​​可以使用 JQuery 的 .live 函数。

您的代码将是：

```
$("#TestButton").live('click', function (ev) {
        ev.preventDefault()

        alert('Test Button Clicked'); 
    }); 
```

实际上......从 JQuery 1.7 开始，Live 似乎已经贬值了

这是...

```
$("#TestButton").on('click', function (ev) {
            ev.preventDefault()

            alert('Test Button Clicked'); 
        }); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-13T07:43:51.333

`show`您可以在 Bootstrap 3 中通过在 clicked 元素上使用 HTML 5 数据属性并侦听模式事件来操作远程内容模式的内容。

[http://jsfiddle.net/dbasch/UbpS6/](http://jsfiddle.net/dbasch/UbpS6/)

* * *

/main.html

```
<a data-toggle="modal" href="/remote.html" data-target="#myModal" data-merchant-name="Bob's House of Pancakes">Click me !</a>

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                 <h4 class="modal-title">Modal title</h4>

            </div>
            <div class="modal-body">
                <div class="te"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<script type="text/javascript">

// we can't use the show.bs.modal or loaded.bs.modal events
// because the remote modal content is not accessable in the DOM
// when those events trigger

// when the remote modal content is shown  
$('#myModal').on('shown.bs.modal', function (e) {

    // get a data attribute value from the clicked element
    var merchantName = $(e.relatedTarget).data('merchant-name');

    // and set the content of the shown remote modal
    $('#myModalLabel').text(merchantName);

});

// cleanup the content of the hidden remote modal because it is cached
$('#reservationModal').on('hide.bs.modal', function (e) {

    $(this).removeData('bs.modal');

});

</script> 
```

* * *

/remote.html

```
<div class="modal-content">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span>

        </button>
         <h4 class="modal-title" id="myModalLabel">Modal title</h4>

    </div>
    <div class="modal-body">
        <!-- start slipsum code -->
        <p>The path of the righteous man is beset on all sides by the iniquities of the selfish and the tyranny of evil men. Blessed is he who, in the name of charity and good will, shepherds the weak through the valley of darkness, for he is truly his brother's keeper and the finder of lost children. And I will strike down upon thee with great vengeance and furious anger those who would attempt to poison and destroy My brothers. And you will know My name is the Lord when I lay My vengeance upon thee.</p>
        <!-- please do not remove this line -->
        <div style="display:none;">
<a href="http://slipsum.com">lorem ipsum</a>
        </div>
        <!-- end slipsum code -->
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
    </div>
</div> 
```

# php - 尝试重写样式表的路径

> ID：13582389
> 
> 赞同：3
> 
> 时间：2012-11-27T10:39:58.703
> 
> 标签：php, .htaccess

基本上我想要我的 CSS 文件位于：

```
http://localhost/crm/Websites/crm/css/style.css 
```

可通过以下方式访问：

```
http://localhost/crm/css/style.css 
```

我已经尝试了几件事，但它不起作用，例如

```
RewriteRule ^/crm/css/style.css$ /crm/Websites/crm/css/style.css
RewriteRule ^(.+)/css/style.css$ $1/Websites/crm/css/style.css 
```

有人可以指出我做错了什么吗？

编辑：工作重写：

```
RewriteEngine On

RewriteCond %{REQUEST_URI} !=/favicon.ico
RewriteCond %{REQUEST_URI} !\.css$
RewriteRule ^(.*)$ index.php [PT,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:41:50.453

```
RewriteRule ^crm/css/style.css$ /crm/Websites/crm/css/style.css [L]
RewriteRule ^(.*)/css/style.css$ $1/Websites/crm/css/style.css [L] 
```

试试这个，不要忘记它运行的条件：

```
RewriteCond %{HTTP_HOST} ^domain.com 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:43:25.497

尝试这个

```
RewriteRule ^crm/css/style.css$ crm/Websites/crm/css/style.css 
```

您的 htaccess 文件必须位于您网站的根目录中。

# sql-server-2008-r2 - 数据库工作完成后，如何释放数据库使用的 RAM？

> ID：13582390
> 
> 赞同：0
> 
> 时间：2012-11-27T10:40:01.363
> 
> 标签：sql-server-2008-r2

数据库工作完成后，如何释放数据库使用的 RAM？（运行 SP 之前的 RAM 使用量为 1.57，之后，SP 运行并完成，RAM 使用量为 2.24 - 重新启动[SQL Server](http://en.wikipedia.org/wiki/Microsoft_SQL_Server)时就可以了）。

我们只有一台多功能服务器。这台服务器是 SQL Server Host，我们也在这台服务器上运行其他企业应用程序，这些应用程序也需要空闲的 RAM 空间。

如何确保这些应用程序有足够的 RAM 运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:44:52.840

更改“最大服务器内存”设置。如果您需要更多帮助，请阅读*[SQL BULK insert / BCP export 后未释放的已用内存一](https://dba.stackexchange.com/questions/21319)*文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:58:56.047

我之前遇到过这样的问题，我找到了解决这个问题的方法。您可以按如下所述创建[存储过程](http://en.wikipedia.org/wiki/Stored_procedure)： 在启动应用程序之前，您应该在模式 1 中调用此存储过程，因为您需要足够的内存。

对于 SQL 操作，在关闭应用程序之前，您必须在模式 0 中再次调用此存储过程：

```
Create Proc  [dbo].[MP_Rpt_ConfigureMemory]
(  @Mode  bit  )
as
declare @RAM as integer
declare @MAX as integer
declare @MIN as integer

set @RAM =
(SELECT

      [physical_memory_in_bytes]/1048576 AS [RAM (MB)]

FROM  [sys].[dm_os_sys_info] )

Set @MAX = ((@RAM / 4) * 3)
Set @MIN = ((@RAM / 4) * 1)

if @Mode=0
begin
      exec SP_Configure 'min server memory', 1
      RECONFIGURE
      exec SP_Configure 'max server memory', 100
      RECONFIGURE
end
else
if @Mode = 1
begin
      exec SP_Configure 'max server memory', @MAX
      RECONFIGURE
      exec SP_Configure 'min server memory', @MIN
      RECONFIGURE
end 
```

# jsf - 如何在 PrettyFaces 的帮助下将长的 Liferay URL 映射到友好的 URL？

> ID：13582394
> 
> 赞同：2
> 
> 时间：2012-11-27T10:40:27.127
> 
> 标签：jsf, liferay, friendly-url, prettyfaces

我想使用 Liferay URL 映射，但目前 JSF 2 和 URL 映射存在错误，所以它不起作用（[http://issues.liferay.com/browse/FACES-257](http://issues.liferay.com/browse/FACES-257)）。所以我切换到 PrettyFaces。

我的问题是，您如何在 PrettyFaces 中映射一个链接，例如

```
localhost:8080/web/guest/wsw?p_auth=oPRD7ELs&p_p_id=KonakardPotrlets_WAR_KonakardPotrletsportlet&p_p_lifecycle=1&p_p_state=normal&p_p_mode=view&p_p_col_id=column-1&p_p_col_count=1&_KonakardPotrlets_WAR_KonakardPotrletsportlet__facesViewIdRender=%2Fviews%2Fwizard.xhtml 
```

像这样的事情？

```
localhost:8080/web/guest/wsw/views/wizard/id=2 
```

注意：我还需要生成一个`id`在 bean 中设置的新参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-10-04T03:41:30.160

[FACES-257](https://issues.liferay.com/browse/FACES-257)很久以前就已经修复了。您应该使用[Liferay 友好的 URL](https://dev.liferay.com/develop/tutorials/-/knowledge_base/7-1/making-urls-friendlier)。

在下面创建一个**`friendly-url-routes.xml`**文件**`src/main/resources/`**：

```
<?xml version="1.0"?>
<!DOCTYPE routes PUBLIC "-//Liferay//DTD Friendly URL Routes 7.0.0//EN" "http://www.liferay.com/dtd/liferay-friendly-url-routes_7_0_0.dtd">

<routes>
    <route>
    <pattern>/views/{viewName}/id={my_id}</pattern>
        <generated-parameter name="_facesViewIdRender">/WEB-INF/views/{viewName}.xhtml</generated-parameter>
        <implicit-parameter name="p_p_lifecycle">0</implicit-parameter>
        <implicit-parameter name="p_p_mode">view</implicit-parameter>
        <implicit-parameter name="p_p_state">normal</implicit-parameter>
    </route>
</routes> 
```

您还需要将以下配置添加到`<portlet>`您的部分**`liferay-portlet.xml`**：

```
<friendly-url-mapper-class>com.liferay.portal.kernel.portlet.DefaultFriendlyURLMapper</friendly-url-mapper-class>
<friendly-url-mapping>my-portlet</friendly-url-mapping>
<friendly-url-routes>friendly-url-routes.xml</friendly-url-routes> 
```

URL 将是：

```
localhost:8080/web/guest/wsw/-/my-portlet/views/wizard/id=2 
```

# java - 在多个不同线程之间共享一个变量

> ID：13582395
> 
> 赞同：34
> 
> 时间：2012-11-27T10:40:32.180
> 
> 标签：java, multithreading, synchronization, shared

我想在多个线程之间共享一个变量，如下所示：

```
boolean flag = true;
T1 main = new T1();
T2 help = new T2();
main.start();
help.start(); 
```

我想`flag`在主线程和帮助线程之间共享这是我创建的两个不同的 Java 类。有什么办法吗？谢谢！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-27T10:41:55.917

两者`T1`和`T2`都可以引用包含此变量的类。
然后，您可以将此变量设置为***volatile***，这意味着对该
*变量的更改在两个线程中都立即可见。*

有关更多信息，请参阅[本文](http://www.ibm.com/developerworks/java/library/j-jtp06197/index.html)。

> **易失性变量**具有同步的可见性特征，但没有原子性特征。这意味着线程将自动*查看 volatile variables 的最新值*。它们可用于提供线程安全，但仅限于非常有限的一组情况：那些不会在多个变量之间或变量的当前值与其未来值之间施加约束的情况。

`volatile`并注意使用与更复杂的共享状态方式的优缺点。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-11-27T11:14:41.117

除了其他建议之外 - 您还可以将标志包装在控件类中并在父类中创建它的最终实例：

```
public class Test {
  class Control {
    public volatile boolean flag = false;
  }
  final Control control = new Control();

  class T1 implements Runnable {
    @Override
    public void run() {
      while ( !control.flag ) {

      }
    }
  }

  class T2 implements Runnable {
    @Override
    public void run() {
      while ( !control.flag ) {

      }
    }
  }

  private void test() {
    T1 main = new T1();
    T2 help = new T2();

    new Thread(main).start();
    new Thread(help).start();
  }

  public static void main(String[] args) throws InterruptedException {
    try {
      Test test = new Test();
      test.test();
    } catch (Exception e) {
      e.printStackTrace();
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-10-15T08:47:10.680

使用`static`不会帮助你的情况。

`synchronize`当变量被另一个线程使用时，Using会锁定一个变量。

您应该使用`volatile`关键字来保持变量在所有线程之间更新。

> 使用 volatile 是使类线程安全的另一种方式（如同步的原子包装器）。线程安全意味着一个方法或类实例可以被多个线程同时使用而没有任何问题。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-11-27T10:43:33.250

要使其在 和 的实例之间可见`T1`，`T2`您可以使两个类包含对包含变量的对象的引用。

如果要在线程运行时修改变量，则需要考虑同步。最佳方法取决于您的确切要求，但主要选项如下：

*   制作变量`volatile`；
*   把它变成一个[`AtomicBoolean`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/atomic/AtomicBoolean.html)；
*   围绕使用它的代码使用全面同步。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-11-27T10:42:46.150

1.  将其设为静态可以解决此问题。
2.  引用其他线程中的主线程并使该变量可见

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-12-30T16:08:49.140

您可以使用锁定变量“a”和“b”并同步它们以以相反的顺序锁定“关键部分”。例如。通知“a”然后锁定“b”，“PRINT”，通知“b”然后锁定“a”。

请参考以下代码：

```
public class EvenOdd {

    static int a = 0;

    public static void main(String[] args) {

        EvenOdd eo = new EvenOdd();

        A aobj = eo.new A();
        B bobj = eo.new B();

        aobj.a = Lock.lock1;
        aobj.b = Lock.lock2;

        bobj.a = Lock.lock2;
        bobj.b = Lock.lock1;

        Thread t1 = new Thread(aobj);
        Thread t2 = new Thread(bobj);

        t1.start();
        t2.start();
    }

    static class Lock {
        final static Object lock1 = new Object();
        final static Object lock2 = new Object();
    }

    class A implements Runnable {

        Object a;
        Object b;

        public void run() {
            while (EvenOdd.a < 10) {
                try {
                    System.out.println(++EvenOdd.a + " A ");
                    synchronized (a) {
                        a.notify();
                    }
                    synchronized (b) {
                        b.wait();
                    }
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }
    }

    class B implements Runnable {

        Object a;
        Object b;

        public void run() {
            while (EvenOdd.a < 10) {

                try {
                    synchronized (b) {
                        b.wait();
                        System.out.println(++EvenOdd.a + " B ");
                    }
                    synchronized (a) {
                        a.notify();
                    }
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }
    }
} 
```

输出 ：

```
1 A 
2 B 
3 A 
4 B 
5 A 
6 B 
7 A 
8 B 
9 A 
10 B 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-05T06:49:22.600

# java - 无法将 JSF ViewScoped bean 作为 ManagedProperty 注入 Validator

> ID：13582400
> 
> 赞同：11
> 
> 时间：2012-11-27T10:40:52.217
> 
> 标签：java, jsf-2

我正在尝试将 JSF ViewScoped bean 作为 ManagedProperty 注入到实现 javax.faces.validator.Validator 的 RequestScoped bean 中。但是总是注入一个新的 ViewScoped bean 副本。

ViewScoped Bean

```
@ViewScoped
@ManagedBean
public class Bean {

     private Integer count = 1;     

     private String field2;      

     public String action(){
          ++count;
          return null;
     }

     public String anotherAction(){
          return null;
     }

     //getter and setter

} 
```

验证器

```
@RequestScoped
@ManagedBean
public class SomeValidator implements Validator {

     public void validate(FacesContext context, UIComponent comp, Object value)
        throws ValidatorException {

           //logging bean.getCount() is always one here. Even after calling ajax action a few times

     }
     @ManagedProperty(value = "#{bean}")
     private Bean bean;
} 
```

xhtml页面

```
<!DOCTYPE html>
 <html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html">
<h:head>

</h:head>

<h:body>
   <h:form>

    <h:panelGroup layout="block" id="panel1">

        <h:commandButton type="submit" value="Action" action="#{bean.action}">
            <f:ajax render="panel1"></f:ajax>
        </h:commandButton>

        <h:outputText value="#{bean.count}"></h:outputText>

    </h:panelGroup>

    <h:panelGroup layout="block" id="panel2">

        <h:inputText type="text" value="#{bean.field1}">
            <f:validator binding="#{someValidator}" />
        </h:inputText>

    </h:panelGroup>

    <h:commandButton type="submit" value="Another Action" action="#{bean.anotherAction}">
        <f:ajax execute="panel2" render="panel2"></f:ajax>
    </h:commandButton>

 </h:form>

</h:body>

</html> 
```

正如代码中提到的，即使在调用 ajax 操作几次之后，当记录 bean.getCount() 时总是显示一个。

但是，如果我将 ViewScoped 更改为 SessionScoped，同样的情况也适用。此外，如果我删除 RequestScoped bean 的 Validator 实现并在 PostConstruct 中使用记录器，则每个 ajax 请求的计数都会按预期增加。

难道我做错了什么？或者这应该如何工作？提前致谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-27T13:26:22.127

那是因为在视图构建期间评估`binding`了 of 的属性。`<f:validator>`在那一刻，视图范围还不可用（这是有道理的，它仍在忙于构建......），因此将创建一个全新的视图范围 bean，它与请求范围 bean 具有相同的效果。在即将到来的 JSF 2.2 中，这个先有鸡还是先有蛋的问题将得到解决。

在那之前，如果您绝对肯定需要在`validate()`方法中使用视图范围的 bean（我宁愿寻找其他方法，例如`<f:attribute>`EJB、多字段验证器等），那么唯一的方法就是在`#{bean}`内部以编程方式进行评估`validate()`方法本身，而不是通过`@ManagedProperty`.

您可以[`Application#evaluateExpressionGet()`](http://docs.oracle.com/javaee/6/api/javax/faces/application/Application.html#evaluateExpressionGet%28javax.faces.context.FacesContext,%20java.lang.String,%20java.lang.Class%29)为此使用：

```
Bean bean = context.getApplication().evaluateExpressionGet(context, "#{bean}", Bean.class); 
```

### 也可以看看：

*   [JSF2 Facelets 中的 JSTL...有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)- 更好地理解“查看构建时间”与“查看渲染时间”。

# objective-c - CodeSign 错误：SDK“iOS 6.0”中的产品类型“应用程序”需要代码签名

> ID：13582401
> 
> 赞同：7
> 
> 时间：2012-11-27T10:40:50.750
> 
> 标签：objective-c, ios, xcode, ipad, core-plot

我已经下载了一个名为 Plot_Gallery _ios 的项目名称，主要用于绘制图形。这是从 core_plot 下载的，主要目标项目是 Plot_Gallery_IOS，它还有一个名为 CorePlot-CocoaTouch.xcodeProj 的子项目文件，其中包含所有库文件主要用于本项目的运行。

我面临的问题是，当我在编译后尝试在我的 ipad 中加载这个应用程序时会出现一个错误，即

**CodeSign 错误：SDK“iOS 6.0”中的产品类型“应用程序”需要代码签名**

我试图从很长时间内解决这个问题我无法......我尝试构建设置并将**代码签名身份**更改为不**代码签名**，并且还通过选择**调试**作为**Ios SDK**我正在尝试所有可能的方法来修复它但我我无法将此应用程序加载到我的 ipad 中。

我也尝试将 Ios SDK 选择为**iphoneDeveloper**，但我得到**链接器错误**，所以问题出在哪里？它是否包含 2 个目标项目，其中 Plot_Gallery_IOS 是主要的，子项目中有 CorePot_cocoatouch.xcodeProject，其余所有其他文件..

所以任何人都可以请告诉我如何解决这个问题。我很长时间以来都坚持这个问题。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-10T11:06:59.650

嘿，我设法修复它，更改构建设置中的代码设计值。我附上一张图片，以便您查看：

![解决方案](../Images/bcb790e66e82a790dff445dc78a4ee0b.png)

我希望这会帮助你！让我知道！

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-15T11:56:53.820

1.  转到此文件夹：`/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk`。
2.  您需要复制此文件：`SDKSettings.plist`并将其粘贴到您的桌面。
3.  使用 Xcode 打开刚刚复制的文件。`DefaultProperties`您将在其中找到以下字符串：`CODE_SIGNING_REQUIRED`.
4.  您需要将其值从“YES”更改为“NO”。
5.  保存它，将其移回原始文件夹（将其替换为原始文件），然后就可以了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-17T04:58:27.787

![](../Images/c75913db8e6f06a864a2618494840c5a.png)

对于 Xcode5，Maybe Provisioning Profile 部分您选择了错误的“Any iOS SDK”项，只需更改为您自己的配置文件而不是您下载的配置文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-02T05:55:50.903

要发布/临时应用程序，我的解决方案是设置为不对所有代码签名身份字段进行签名，并对配置文件执行相同操作。

之后，我将 Release-> Any iOS SDK 设置为正确的配置文件，Xcode 自动将 Code Signing Identity-> Any iOS SDK 设置为正确的 Identity，然后我执行正常的 Archive-> 发布过程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-03T16:03:51.907

要解决这个问题，您必须注册 Don´t Code Sign，编译您的代码，然后放置相应的配置文件。

请参阅Apple 开发人员网站上此页面中的**为构建配置分配配置文件**部分：

[https://developer.apple.com/legacy/library/technotes/tn2250/_index.html](https://developer.apple.com/legacy/library/technotes/tn2250/_index.html)

# http - HTTP客户端超时和服务器超时

> ID：13582409
> 
> 赞同：27
> 
> 时间：2012-11-27T10:41:25.867
> 
> 标签：http, request

根据这个问题：[我在哪里可以找到所有浏览器的默认超时设置？](https://stackoverflow.com/questions/1342310/where-can-i-find-the-default-timeout-settings-for-all-browsers)每个浏览器都有一个默认的超时设置

Firefox17默认超时时间，检查后`about:config`是115s。但是我已经测试过运行一些我计时的请求，它在 >150~ 秒后返回了一个请求。

所以我想知道它是如何工作的，Firefox 之前不应该超时吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-27T10:57:55.220

超时的形式有很多种，你是在连接超时之后、请求超时还是生存时间（TCP 连接停止之前的时间）。

Firefox 上的默认**TimeToLive**是 115s (network.http.keep-alive.timeout)

Firefox 上的默认**连接超时**为 250 秒（network.http.connection-retry-timeout）

Firefox的默认**请求超时**为 30 秒（network.http.pipelining.read-timeout）。

执行 HttpRequest 所需的时间取决于是否已建立连接，这必须在 250 秒内，我猜你不是在追求。您可能在我认为是 30,000 毫秒（30 秒）的请求超时之后，所以总结一下，我会说连接超时，这就是为什么您在大约 150 秒后得到响应，尽管我还没有真正测试过这个.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-04T22:53:24.307

根据[https://bugzilla.mozilla.org/show_bug.cgi?id=592284](https://bugzilla.mozilla.org/show_bug.cgi?id=592284)，pref network.http.connection-retry-timeout 控制以毫秒（毫秒！）为单位等待初始连接成功的时间在开始第二个之前。将其设置为 0 将禁用并行连接。

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2013-08-29T00:35:11.780

go to the url `about:config` and paste each line:

```
network.http.keep-alive.timeout;10
network.http.connection-retry-timeout;10
network.http.pipelining.read-timeout;5
network.http.connection-timeout;10 
```

# android - 将片段 A 更改为片段 B 时保存片段状态

> ID：13582410
> 
> 赞同：0
> 
> 时间：2012-11-27T10:41:26.160
> 
> 标签：android, views, android-fragments, savestate

我有一个片段 A 和一个片段 B。

在片段 A 中，我对容器内部的一些视图进行了膨胀。然后我切换到片段 B，当我转向片段 A 时，膨胀的视图消失了，我丢失了该视图中的数据。

有谁知道是什么问题？感谢您的时间和帮助

![在此处输入图像描述](../Images/caa49416e5a95e5383d1885e8af5e690.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:45:20.813

查看 Fragment 的生命周期：`http://developer.android.com/guide/components/fragments.html#Lifecycle`

您可以使用这些方法`onSaveInstanceState()`来保存数据和`onCreateView()`重新加载重要数据。

您应该在`onCreateView()`而不是 Fragment 构造函数中创建所有 UI 数据，然后每次重新创建视图时都会调用它。

# collision-detection - KineticJS - 形状之间的碰撞检测

> ID：13582412
> 
> 赞同：1
> 
> 时间：2012-11-27T10:41:29.233
> 
> 标签：collision-detection, kineticjs, shapes

我想知道如何检测形状之间的碰撞，而不是获取具有相交对象或路径点的列表。只有 2 个（或更多）形状碰撞检测。

蒂亚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:49:19.107

我不知道 kineticjs 框架内有任何方法可以进行碰撞检测（请证明我错了）。

所以你回来用标准技术找到 [维基百科](http://en.wikipedia.org/wiki/Collision_detection) [stackoverflow](https://stackoverflow.com/questions/31158/resources-of-techniques-use-for-collision-detection-in-2d)

# r - 查找和替换特定模式

> ID：13582416
> 
> 赞同：1
> 
> 时间：2012-11-27T10:41:36.273
> 
> 标签：r

我有一个大的data.frame，其中第一列看起来像：

> “COL”
> ELOVL6
> ELOVL7
> ELP2
> EMC1（包括 EG:23065）
> EPT1（包括 EG:28042）
> ZEB1（包括 EG:29009）

我想删除所有（包括 EG:...）以获得以下输出：

> “COL”
> ELOVL6
> ELOVL7
> ELP2
> EMC1
> EPT1
> ZEB1

有什么建议吗？

非常感谢提前

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T10:54:16.247

```
 I suppose y your column of the data.frame

 sapply(as.list(y),function(x){gsub("(.*)\\(.*\\)", "\\1", x)}) 
```

**编辑**

更简单

```
 gsub("(.*)\\(.*\\)", "\\1", x) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T10:54:28.650

你的意思是这样的......

```
COL <- c("ELOVL7",
         "ELP2",
         "EMC1 (includes EG:23065)",
         "EPT1 (includes EG:28042)",
         "ZEB1 (includes EG:29009)")

COL <- data.frame(COL)
data.frame(COL=sapply(strsplit(as.character(COL[,1]), split=" "), '[', 1))
     COL
1 ELOVL7
2   ELP2
3   EMC1
4   EPT1
5   ZEB1 
```

# ivy - ivy 依赖部分中的小箭头 -> 做什么？

> ID：13582419
> 
> 赞同：2
> 
> 时间：2012-11-27T10:41:42.713
> 
> 标签：ivy

我正在使用常春藤，我工作的公司有一些有趣的小常春藤和蚂蚁教程。

当在依赖项部分使用时，每个教程都有助于*完全*绕过箭头在 ivy 构建 xml 文件中的作用。

因此，鉴于此设置：

```
<configurations>
      <conf name = "runtime" />
      <conf name = "build-tests" extends="runtime" />
   </configurations>
   ...
   <dependencies>
        ...
        <dependency org="blah" name="junit" rev="default" conf="build-tests->runtime"/>
        <dependency org="blahblah" name="xmlutil" rev="default" conf="build-tests->testing"/>
        <dependency org="blahblahblah" name="slf4j" rev="default" conf="build-tests->simple"/>
    </dependencies> 
```

每个依赖项声明了什么？我认为 build-tests 已经在扩展运行时（来自配置声明），那么为什么依赖项 conf 重新声明了这一点？是需要吗？

`testing`and没有在我拥有的`simple`ivy.xml 中声明，它们是魔法并且存在于正式声明之外吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T04:18:33.663

配置映射旨在将本地声明的配置与远程模块中声明的配置相关联。

```
 mylocalconf->remotemoduleconf 
```

什么是配置？它们是文件的逻辑分组，通常用于填充类路径或目录。

“简单”和“测试”不是[为远程 maven 模块生成的标准配置](https://stackoverflow.com/questions/7104364/how-are-maven-scopes-mapped-to-ivy-configurations-by-ivy/7116577#7116577)的一部分，这表明您是从常春藤仓库下载的？检查依赖项的 ivy 文件，您会在那里找到缺少的配置。

# android - 使用自定义适配器过滤带有图像和文本视图的列表视图

> ID：13582420
> 
> 赞同：0
> 
> 时间：2012-11-27T10:41:46.707
> 
> 标签：android, android-listview, action-filter, searchview

我的应用程序中有一个列表视图，如下所示：

--img-- --ArrayListItems(names)--- ---TextView----

我正在使用带有搜索视图的操作栏 sherlock 来使应用程序反向兼容。我正在使用扩展基本适配器并实现可过滤的自定义适配器。我真正需要的是，当用户在搜索栏中输入文本时，我应该能够根据 ArrayListItems(names) 过滤列表视图。我在stackoverflow上引用了几篇文章，尝试了所有代码片段。但我仍然无法搜索。当我运行代码时，搜索栏什么也不做。

在我的活动中，我做了：

```
public class SearchViewActionBar extends SherlockActivity implements SearchView.OnQueryTextListener 
{
    public SearchView mSearchView;
    private TextView mStatusView;
    int mSortMode = -1;

    protected CharSequence[] _options = { "Wild Life", "River", "Hill Station", "Temple", "Bird Sanctuary", "Hill", "Amusement Park"};
    protected boolean[] _selections =  new boolean[ _options.length ];

    private final String[] mStrings = Cheeses.sCheeseStrings;

    ListView lv1; 

    ItemListBaseAdapter adapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        getWindow().requestFeature(Window.FEATURE_ACTION_BAR);

        setContentView(R.layout.activity_main);

       ArrayList<ItemDetails> image_details = GetSearchResults();
       lv1= (ListView) findViewById(R.id.list_view);

       adapter=new ItemListBaseAdapter(this, image_details);

        lv1.setAdapter(adapter);
        lv1.setTextFilterEnabled(true);

        mSearchView = (SearchView) findViewById(R.id.action_search);

        /*lv1.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> a, View v, int position, long id) { 
                Object o = lv1.getItemAtPosition(position);
                ItemDetails obj_itemDetails = (ItemDetails)o;
                //Toast.makeText(ListViewImagesActivity.this, "You have chosen : " + " " + obj_itemDetails.getName(), Toast.LENGTH_LONG).show();
            }  
        });*/

    }

    private ArrayList<ItemDetails> GetSearchResults()
    {
        ArrayList<ItemDetails> results = new ArrayList<ItemDetails>();

        for(int i=0;i<mStrings.length;i++)
        {

        ItemDetails item_details = new ItemDetails();
        item_details.setName(mStrings[i]);
        item_details.setItemDescription("200");
        results.add(item_details);
        }

        return results;
    }

    private void setupSearchView() {
        mSearchView.setIconifiedByDefault(true);
        mSearchView.setOnQueryTextListener(this);
        mSearchView.setSubmitButtonEnabled(false);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) 
    {
        super.onCreateOptionsMenu(menu);

        MenuInflater inflater = getSupportMenuInflater();
        inflater.inflate(R.menu.searchview_in_menu, menu);
        MenuItem searchItem = menu.findItem(R.id.action_search);
        mSearchView = (SearchView) searchItem.getActionView();

       setupSearchView();

        return true;
    }

    @Override
    public boolean onPrepareOptionsMenu(Menu menu) 
    {
        if (mSortMode != -1) 
        {
            //Drawable icon = menu.findItem(mSortMode).getIcon();
            //menu.findItem(R.id.action_sort).setIcon(icon);
        }
        return super.onPrepareOptionsMenu(menu);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) 
    {

    switch (item.getItemId()) {
        //case R.id.action_search:
            //finish();
            //getSupportActionBar().setDisplayShowHomeEnabled(false);
            //getSupportActionBar().setDisplayShowTitleEnabled(false);
            //System.out.println("search pressed");
            //break;
        case R.id.action_edit:
            System.out.println("category pressed");
            showDialog( 0 );
            //finish();
            break;
        default:
            //return super.onOptionsItemSelected(item);
            break;
        }

        /*
        String c="Category";
        if(s.equals(c))
        {
            System.out.println("same");
            ;
        }*/

        //Toast.makeText(this, "Selected Item: " + item.getTitle(), Toast.LENGTH_SHORT).show();
        return true;
    }

    protected Dialog onCreateDialog( int id ) 
    {
        return 
        new AlertDialog.Builder( this )
            .setTitle( "Category" )
            .setMultiChoiceItems( _options, _selections, new DialogSelectionClickHandler() )
            .setPositiveButton( "SAVE", new DialogButtonClickHandler() )
            .create();
    }

    public class DialogSelectionClickHandler implements DialogInterface.OnMultiChoiceClickListener
    {
        public void onClick( DialogInterface dialog, int clicked, boolean selected )
        {
            Log.i( "ME", _options[ clicked ] + " selected: " + selected );
        }
    }

    public class DialogButtonClickHandler implements DialogInterface.OnClickListener
    {
        public void onClick( DialogInterface dialog, int clicked )
        {
            switch( clicked )
            {
                case DialogInterface.BUTTON_POSITIVE:
                    printSelectedPlanets();
                    break;
            }
        }
    }

    protected void printSelectedPlanets()
    {
        for( int i = 0; i < _options.length; i++ ){
            Log.i( "ME", _options[ i ] + " selected: " + _selections[i] );
        }
    }

    public void onSort(MenuItem item) 
    {
        mSortMode = item.getItemId();
        invalidateOptionsMenu();
    }

    public boolean onQueryTextChange(String newText) 
    {

        /*ActionBar ab = getSupportActionBar(); 
        ab.setDisplayShowTitleEnabled(false); 
        ab.setDisplayShowHomeEnabled(false);*/

        //getSupportActionBar().setDisplayShowHomeEnabled(false);
        //getSupportActionBar().setDisplayShowTitleEnabled(false);

        if (TextUtils.isEmpty(newText)) 
        {
            System.out.println("empty query");
            lv1.clearTextFilter();
        } 
        else 
        {
            //System.out.println(newText.toString());

            adapter.getFilter().filter(newText);
            //adapter.getFilter().filter(s);

            //lv1.setFilterText(newText.toString());
        }
        return true;
    }

    public boolean onQueryTextSubmit(String query) 
    {
        mStatusView.setText("Query = " + query + " : submitted");
        return false;
    }

    public boolean onClose() 
    {
        mStatusView.setText("Closed!");
        return false;
    }

    protected boolean isAlwaysExpanded() 
    {
        return false;
    }
} 
```

我的适配器类：

```
public class ItemListBaseAdapter extends BaseAdapter implements Filterable
{
    private static ArrayList<ItemDetails> itemDetailsrrayList,list;

    private Integer[] imgid = {
            //R.drawable.p1,
            R.drawable.bb2,
            /*R.drawable.p2,
            R.drawable.bb5,
            R.drawable.bb6,
            R.drawable.d1*/
            };

    private LayoutInflater l_Inflater;

    public ItemListBaseAdapter(Context context, ArrayList<ItemDetails> results) {
        itemDetailsrrayList = results;
        l_Inflater = LayoutInflater.from(context);
    }

    public int getCount() {
        return itemDetailsrrayList.size();
    }

    public Object getItem(int position) {
        return itemDetailsrrayList.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) 
    {
        ViewHolder holder;
        if (convertView == null) {
            convertView = l_Inflater.inflate(R.layout.item_details_view, null);
            holder = new ViewHolder();
            holder.txt_itemName = (TextView) convertView.findViewById(R.id.textView1);
            holder.txt_itemDescription = (TextView) convertView.findViewById(R.id.textView2);
            //holder.txt_itemPrice = (TextView) convertView.findViewById(R.id.phone);
            holder.itemImage = (ImageView) convertView.findViewById(R.id.imageView1);

            convertView.setTag(holder);
        } else 
        {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.txt_itemName.setText(itemDetailsrrayList.get(position).getName());
        //holder.txt_itemDescription.setText(itemDetailsrrayList.get(position).getItemDescription());
        holder.txt_itemDescription.setText("200");

        //holder.txt_itemPrice.setText(itemDetailsrrayList.get(position).getPrice());
        //holder.itemImage.setImageResource(imgid[itemDetailsrrayList.get(position).getImageNumber() - 1]);

        holder.itemImage.setImageResource(imgid[0]);

        return convertView;
    }

    static class ViewHolder 
    {
        TextView txt_itemName;
        TextView txt_itemDescription;
        //TextView txt_itemPrice;
        ImageView itemImage;
    }

    public Filter getFilter() 
    {
        Filter filter = new Filter() {

            @SuppressWarnings("unchecked")
            @Override
            protected void publishResults(CharSequence constraint,FilterResults results) {

                list = (ArrayList<ItemDetails>) results.values; // has the filtered values
                notifyDataSetChanged();  // notifies the data with new filtered values
            }

            @Override
            protected FilterResults performFiltering(CharSequence constraint) {
                FilterResults results = new FilterResults();        // Holds the results of a filtering operation in values
                List<String> FilteredArrList = new ArrayList<String>();

                if (list == null) {
                    list = new ArrayList<ItemDetails>(list); // saves the original data in mOriginalValues
                }

                /********
                 * 
                 *  If constraint(CharSequence that is received) is null returns the mOriginalValues(Original) values
                 *  else does the Filtering and returns FilteredArrList(Filtered)  
                 *
                 ********/
                if (constraint == null || constraint.length() == 0) {

                    // set the Original result to return  
                    results.count = list.size();
                    results.values = list;
                } else {
                    constraint = constraint.toString().toLowerCase();
                    for (int i = 0; i < list.size(); i++) 
                    {
                        String data="b";
                        //= list.getName(i);
                        if (data.toLowerCase().startsWith(constraint.toString())) {
                            FilteredArrList.add(data);
                        }
                    }
                    // set the Filtered result to return
                    results.count = FilteredArrList.size();
                    results.values = FilteredArrList;
                }
                return results;
            }
        };
        return filter;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:07:59.983

您必须将 TextWatcher 添加到您的 searchView 中，如下所示：

```
mSearchView.addTextChangedListener(new TextWatcher() {
@Override
public void onTextChanged(CharSequence s, int start, int before, int count) {
    adapter.getFilter().filter(s);
}} 
```

笔记：

Filter 使用 ItemDetails 类的 toString 方法。您必须覆盖 toString 进行过滤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T07:46:53.487

我在这里发布了一个答案：[https](https://stackoverflow.com/a/12363961/450534) ://stackoverflow.com/a/12363961/450534这是基于我几天前的一个问题：[Filtering a ListView with Baseadapter filters text not images](https://stackoverflow.com/q/10764675/450534)。

我在问题中面临的问题是文本会被图像过滤，不匹配。发布的答案解决了这个问题。正如答案中提到的那样，该解决方案适用于 a`GridView`但也适用于 a `ListView`。

这是一个非常冗长的答案，所以我只是链接而不是在这里重新发布。顺便说一句，它拥有完整的解决方案，应该可以帮助您。

# c# - jquery Ajax 调用只触发一次

> ID：13582421
> 
> 赞同：2
> 
> 时间：2012-11-27T10:41:48.657
> 
> 标签：c#, javascript, jquery, asp.net, ajax

如果我点击按钮，Jquery Ajax 调用只会触发一次，它会返回最后返回的响应，但不会去 c# 中的 ajax 函数这是我的 aspx 代码

```
 <asp:ImageButton ID="iBtnSaveUser" runat="server" OnClientClick="return ValidateForm();" /> 
```

这是我的 jquery Ajax 函数

```
 function ValidateForm() {
    if ($(txtName).val() == "") {
        alert('Name Required');
        return false;
    }
    else if ($(txtUserName).val() == "") {
        alert('UserName Required');
        return false;
    }
    else if ($(txtPassword).val() == "") {
        alert('Password Required');
        return false;
    }
    else if ($(txtEmail).val() == "") {
        alert('Email Required');
        return false;
    }
    else if ($(txtPhone).val() == "") {
        alert('Phone Number Required');
        return false;
    }
    else if ($(ddlProfile).val() == "") {
        alert('Profile Required');
        return false;
    }
    AddUser();
    return false;
}

    function AddUser() {
        var name = $(txtName).val();
        var userName = $(txtUserName).val();
        var password = $(txtPassword).val();
        var email = $(txtEmail).val();
        var phone = $(txtPhone).val();
        var profile = $(ddlProfile).val();
        $.ajax({
            type: "GET",
            url: ajaxCallHandlerUrl,
            data: { OpCode: "AddUser", Params: "Name^" + name + "~UserName^" + userName + "~Email^" + email + "~Phone^" + phone + "~Profile^" + profile +"~Password^"+password },
            dataType: "",
            success: function (responseString) {
                alert(responseString);
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T10:44:31.890

尝试关闭缓存：

```
$.ajax({
    cache: false,
    type: "GET",
    /* other params... */
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:04:08.100

试试下面的代码：

对于@Rory McCrossan 输入的代码不起作用。

```
$(document).ready(function() {
  $.ajaxSetup({ cache: false });
}); 
```

# android - 使用 AsyncTask 加载图库

> ID：13582425
> 
> 赞同：1
> 
> 时间：2012-11-27T10:41:53.043
> 
> 标签：android, android-asynctask, image-gallery, viewswitcher

我正在尝试使用 asynctask 加载全屏图库菜单。我看过很多关于 asynctask 的代码来加载图像列表，但不是以画廊的形式。我希望用户在查看 main.xml 之前先查看 loadingscreen.xml。但据我了解，Asynctask 不是这样工作的。

所以：（如果我错了，请纠正我）
当画廊类文件启动时，它开始异步并在后台执行操作。
视图切换器允许用户切换视图。

部分代码取自 hello world 站点和其他参考资料。目前，我必须为加载屏幕和画廊编写单独的代码（能够运行良好）。我认为它以某种方式工作，但我错了。

**GalleryLoop.java**

```
public class GalleryLoop extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
   // startDownload();
    // Reference the Gallery view
    Gallery g = (Gallery) findViewById(R.id.gallery);
    g.setSpacing(2);

    // Set the adapter to our custom adapter (below)
    g.setAdapter(new ImageAdapter(this));
    g.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
                  int position, long id) {
                switch( position )
                {
                case 0:
                     Intent newActivity0 = new Intent(GalleryLoop.this, bo_seng.class);     
                     startActivity(newActivity0);
                    break;
                case 1:  Intent newActivity = new Intent(GalleryLoop.this, war_memorial.class);     
                startActivity(newActivity);
                break;
                }
            }
    }); 

}

//    private void startDownload() {
    // TODO Auto-generated method stub
 //     new Intent(GalleryLoop.this, LoadingScreenActivity.class);
//  }

public class ImageAdapter extends BaseAdapter {
    int  mGalleryItemBackground;

    public ImageAdapter(Context c) {
        mContext = c;
    }

    public int getCount() {
        return mImageIds.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView = new ImageView(mContext);

        imageView.setImageResource(mImageIds[position]);
        imageView.setBackgroundResource(mGalleryItemBackground);
        imageView.setLayoutParams(new Gallery.LayoutParams(Gallery.LayoutParams.FILL_PARENT, Gallery.LayoutParams.FILL_PARENT));
        imageView.setScaleType(ImageView.ScaleType.FIT_XY);

        return imageView;

    }

    private Context mContext;

    private Integer[] mImageIds = {
            R.drawable.gallery_photo_1,
            R.drawable.gallery_photo_2,
            R.drawable.gallery_photo_3,
            R.drawable.gallery_photo_4,
            R.drawable.gallery_photo_5,
            R.drawable.gallery_photo_6,
            R.drawable.gallery_photo_7,
            R.drawable.gallery_photo_8
    };

}
} 
```

**LoadingScreenActivity.java**

```
public class LoadingScreenActivity extends Activity 
{
//creates a ViewSwitcher object, to switch between Views
private ViewSwitcher viewSwitcher;
public View ImageView;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);

    //Initialize a LoadViewTask object and call the execute() method
    new LoadViewTask().execute();
}

//To use the AsyncTask, it must be subclassed
private class LoadViewTask extends AsyncTask<Void, Integer, Void>
{
    //A TextView object and a ProgressBar object
    private TextView tv_progress;
    private ProgressBar pb_progressBar;

    //Before running code in the separate thread
    @Override
    protected void onPreExecute() 
    {
        //Initialize the ViewSwitcher object
        viewSwitcher = new ViewSwitcher(LoadingScreenActivity.this);
        /* Initialize the loading screen with data from the 'loadingscreen.xml' layout xml file. 
         * Add the initialized View to the viewSwitcher.*/
        viewSwitcher.addView(ViewSwitcher.inflate(LoadingScreenActivity.this, R.layout.loadingscreen, null));

        //Initialize the TextView and ProgressBar instances - IMPORTANT: call findViewById() from viewSwitcher.
        tv_progress = (TextView) viewSwitcher.findViewById(R.id.tv_progress);
        pb_progressBar = (ProgressBar) viewSwitcher.findViewById(R.id.pb_progressbar);
        //Sets the maximum value of the progress bar to 100             
        pb_progressBar.setMax(100);

        //Set ViewSwitcher instance as the current View.
        setContentView(viewSwitcher);
    }

    //The code to be executed in a background thread.
    @Override
    protected Void doInBackground(Void... params) 
    {
        /* This is just a code that delays the thread execution 4 times, 
         * during 850 milliseconds and updates the current progress. This 
         * is where the code that is going to be executed on a background
         * thread must be placed. 
         */
        try 
        {
            //Get the current thread's token
            synchronized (this) 
            {
                //Initialize an integer (that will act as a counter) to zero
                int counter = 0;
                //While the counter is smaller than four
                while(counter <= 4)
                {
                    //Wait 850 milliseconds
                    this.wait(850);
                    //Increment the counter 
                    counter++;
                    //Set the current progress. 
                    //This value is going to be passed to the onProgressUpdate() method.
                    publishProgress(counter*25);
                }
            }
        } 
        catch (InterruptedException e) 
        {
            e.printStackTrace();
        }
        return null;
    }

    //Update the TextView and the progress at progress bar
    @Override
    protected void onProgressUpdate(Integer... values) 
    {
        //Update the progress at the UI if progress value is smaller than 100
        if(values[0] <= 100)
        {
            tv_progress.setText("Progress: " + Integer.toString(values[0]) + "%");
            pb_progressBar.setProgress(values[0]);
        }
    }

    //After executing the code in the thread
    @Override
    protected void onPostExecute(Void result) 
    {
        /* Initialize the application's main interface from the 'main.xml' layout xml file. 
         * Add the initialized View to the viewSwitcher.*/
        viewSwitcher.addView(ViewSwitcher.inflate(LoadingScreenActivity.this, R.layout.main, null));
        //Switch the Views
        viewSwitcher.showNext();
        //ImageView = viewSwitcher.findViewById(R.id.imageView1);
        setContentView(R.layout.main);
    }
}

//Override the default back key behavior
@Override
public void onBackPressed() 
{
    //Emulate the progressDialog.setCancelable(false) behavior
    //If the first view is being shown
    if(viewSwitcher.getDisplayedChild() == 0)
    {
        //Do nothing
        return;
    }
    else
    {
        //Finishes the current Activity
        super.onBackPressed();
    }
}
} 
```

# sql - 在连接表达式中使用列而不在 group by 语句中使用它

> ID：13582433
> 
> 赞同：0
> 
> 时间：2012-11-27T10:42:14.057
> 
> 标签：sql, oracle, oracle11g

```
select c.id, c.fname, c.lname, d.phoneList
  from customers c
  left outer join
       (
        select listagg(telNo, ',') within group (order by telNo) as phoneList
          from customerPhones 
         group by p.telNo
       ) d 
   on (c.id = d.id) 
```

在上述查询中，我在语句中收到以下错误`c.id = d.id`

```
ORA-00904 "d.id" invalid identifier. 
```

它仅在我将其包含在 select 语句中并且需要将其包含在 group by 语句中的含义中才有效。有什么方法可以使用 d.id 而不必将其包含在 group by 语句中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:54:12.757

只是简化到这个？

```
SQL> select * from customers;

        ID FNAME                LNAME
---------- -------------------- --------------------
         1 John                 Smith
         2 Joe                  Bloggs

SQL> select * from customerphones;

        ID TELNO
---------- --------------------
         1 0123456789
         1 0207983498
         2 0124339848
         2 09348374834
         2 02387694364

SQL> select c.id, c.fname, c.lname, listagg(telNo, ',') within group (order by telNo) as phoneList
  2    from customers c left outer join customerphones p on p.id = c.id
  3   group by c.id, c.fname, c.lname
  4  /

        ID FNAME                LNAME                PHONELIST
---------- -------------------- -------------------- ------------------------------
         1 John                 Smith                0123456789,0207983498
         2 Joe                  Bloggs               0124339848,02387694364,0934837
                                                     4834 
```

# mysql - 我可以在 MySQL 查询中使用 preg_replace 或 regex 吗？

> ID：13582436
> 
> 赞同：0
> 
> 时间：2012-11-27T10:42:20.560
> 
> 标签：mysql, sql, inner-join

我有两个要加入的表。问题是，数据需要一些修整。

```
== Product Description

id              sku                 price

1               674_orange          45.99
2               645_black           59.99
5               592_rubyred         69.99

== Product Attributes

id          sku     description

11          674     lorem ipsum long text description of 674
22          645     lorem ipsum keywords for this item
33          592     lorem ipsum colours on this item 
```

我想在 SKU 上加入这些表。但是我需要进行替换，因为我认为 a`LIKE`或`%`不够准确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:47:47.697

采用

```
select *
from description d
join attributes a on a.sku = substring(sku, 1, locate('_', sku)-1) 
```

`locate('_', sku)`获取`_`字符串中的位置

`substring(sku, 1, locate('_', sku)+1)`从 中提取子字符串`sku`。子字符串将从 position 开始`1`并在 before 结束`_`。这就是为什么`-1`使用。

[SQLFiddle 演示](http://sqlfiddle.com/#!2/d41d8/4258)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T10:54:56.140

试试这个：

```
SELECT * FROM ProductDescription pd 
INNER JOIN ProductAttributes pa ON SUBSTRING_INDEX(pd.sku, '_', 1) = pa.sku ; 
```

# java - android - 将 ToggleButton 转换为子类

> ID：13582439
> 
> 赞同：1
> 
> 时间：2012-11-27T10:42:30.173
> 
> 标签：java, android, casting

我可能会误解类型转换，但这是我的问题。

我有一个带有 ToggleButton 的 Android 视图：

```
<LinearLayout
    ... >
    <ToggleButton
        android:id="@+id/btnRec"
        android:layout_width="125dp"
        android:layout_height="wrap_content"
        android:textOff="Start TEST"
        android:textOn="Stop TEST" />
    ...
</LinearLayout> 
```

然后在我的活动中，我声明了一个 ToggleButton 变量：

```
private ToggleButton mRecordButton = null; 
```

现在，我实现了一个 ToggleButton 的子类，称为 RecordButton：

```
class RecordButton extends ToggleButton {

    OnCheckedChangeListener clicker = new OnCheckedChangeListener() {
        ...
    };

    public RecordButton(Context ctx) {
        super(ctx);
        setOnCheckedChangeListener(clicker);
    }
} 
```

最后`onCreate`我通过它的 id 找到按钮：

```
mRecordButton = (RecordButton) findViewById(R.id.btnRec); 
```

这会抛出一个`ClassCastException`.

为什么？如何将它`RecordButton`从`ToggleButton`（超类）转换为（子类）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T10:44:37.100

在您的 XML 中，将常规替换`ToogleButton`为自定义的..

```
<LinearLayout
... >
<package.class.RecordButton
    android:id="@+id/btnRec"
    android:layout_width="125dp"
    android:layout_height="wrap_content"
    android:textOff="Start TEST"
    android:textOn="Stop TEST" />
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T10:47:17.913

您可以在布局中使用您的视图：

```
<LinearLayout
    ... >
    <com.project.RecordButton
        android:id="@+id/btnRec"
        android:layout_width="125dp"
        android:layout_height="wrap_content"
        android:textOff="Start TEST"
        android:textOn="Stop TEST" />
    ...
</LinearLayout> 
```

带有 android SDK 的 Eclipse 可以自动确定您的视图：

![](../Images/8214e8a5206d59170d388a7487e02ee8.png)

# java - 无法用ant构建android测试项目

> ID：13582445
> 
> 赞同：2
> 
> 时间：2012-11-27T10:42:56.713
> 
> 标签：java, android, ant

我有一个使用 Eclipse 创建的示例 Android 应用程序，它有一个 Activity。我运行了这个命令来为这个项目构建 ant 构建文件：

```
android create project --target 8 --name SampleApp --path ./SampleApp --activity MainActivity --package com.example.sampleapp 
```

运行“ant debug”成功构建项目并创建 apk 文件：

```
-post-build:

debug:

BUILD SUCCESSFUL
Total time: 1 second 
```

现在，我想创建一个 Android 测试项目。我运行这个命令：

```
android create test-project -m ../SampleApp -n SampleAppTest -p SampleAppTest 
```

这成功地创建了包含构建文件的 SampleAppTest 目录。我有一个类，src/com/example/sampleapp/MainActivityTest.java：

```
package com.example.sampleapp;

import android.test.ActivityInstrumentationTestCase2;

public class MainActivityTest extends ActivityInstrumentationTestCase2<MainActivity> {

    public MainActivityTest() {
        super("com.example.sampleapp", MainActivity.class);
    }

} 
```

我想建立这个项目。在这里找到的教程[http://developer.android.com/tools/testing/testing_otheride.html#RunTestsAnt](http://developer.android.com/tools/testing/testing_otheride.html#RunTestsAnt)它说我应该能够做“蚂蚁运行测试”。不幸的是，这个目标不存在：

```
$ ant run-tests
Buildfile: /Users/cmuraru/Work/androidtest/SampleAppTest/build.xml

BUILD FAILED
Target "run-tests" does not exist in the project "SampleAppTest". 

Total time: 0 seconds 
```

如果我尝试“ant debug”，我会在编译时收到错误消息，指出无法找到 MainActivity 类（来自 SampleApp）。

```
-compile:
    [javac] Compiling 2 source files to /Users/cmuraru/Work/androidtest/build/test/classes
    [javac] /Users/cmuraru/Work/androidtest/SampleAppTest/src/com/example/sampleapp/MainActivityTest.java:15: cannot find symbol
    [javac] symbol: class MainActivity
    [javac] public class MainActivityTest extends ActivityInstrumentationTestCase2<MainActivity> {
    [javac]                                                                        ^
    [javac] /Users/cmuraru/Work/androidtest/SampleAppTest/src/com/example/sampleapp/MainActivityTest.java:18: cannot find symbol
    [javac] symbol  : class MainActivity
    [javac] location: class com.example.sampleapp.MainActivityTest
    [javac]         super("com.example.sampleapp", MainActivity.class);
    [javac]                                        ^
    [javac] 2 errors

BUILD FAILED
/Users/cmuraru/Work/android-sdk-macosx/tools/ant/build.xml:705: The following error occurred while executing this line:
/Users/cmuraru/Work/android-sdk-macosx/tools/ant/build.xml:718: Compile failed; see the compiler error output for details.

Total time: 1 second 
```

尝试“ant test”时，它也失败了：

```
test:
     [echo] Running tests ...
     [exec] INSTRUMENTATION_STATUS: id=ActivityManagerService
     [exec] INSTRUMENTATION_STATUS: Error=Unable to find instrumentation info for: ComponentInfo{com.example.sampleapp.tests/android.test.InstrumentationTestRunner}
     [exec] INSTRUMENTATION_STATUS_CODE: -1
     [exec] android.util.AndroidException: INSTRUMENTATION_FAILED: com.example.sampleapp.tests/android.test.InstrumentationTestRunner
     [exec]     at com.android.commands.am.Am.runInstrument(Am.java:616)
     [exec]     at com.android.commands.am.Am.run(Am.java:118)
     [exec]     at com.android.commands.am.Am.main(Am.java:81)
     [exec]     at com.android.internal.os.RuntimeInit.nativeFinishInit(Native Method)
     [exec]     at com.android.internal.os.RuntimeInit.main(RuntimeInit.java:237)
     [exec]     at dalvik.system.NativeStart.main(Native Method) 
```

我在这里错过了什么/做错了什么？任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:30:40.340

好的，我发现了问题。我没有提到在 ant.properties 中，我已将 out.dir 位置更改为“../build”。因此，编译器在构建 SampleAppTest 时不知道从哪里获取 SampleApp 的类文件。所以一种解决方案是删除 ant.properties 中的 out.dir 条目，但我不想这样做。我必须找到一种方法来告诉编译器从哪里获取这些类。我找到的解决方案是覆盖 build.xml 中的“-compile”目标，如下所示：

```
<property name="SampleApp.build.location" value="../build"/>
    <target name="-compile" depends="-build-setup, -pre-build, -code-gen, -pre-compile">
        <do-only-if-manifest-hasCode elseText="hasCode = false. Skipping...">
            <!-- merge the project's own classpath and the tested project's classpath -->
            <path id="project.javac.classpath">
                <path refid="project.all.jars.path" />
                <path refid="tested.project.classpath" />
            </path>
            <javac encoding="${java.encoding}"
                    source="${java.source}" target="${java.target}"
                    debug="true" extdirs="" includeantruntime="false"
                    destdir="${out.classes.absolute.dir}"
                    bootclasspathref="project.target.class.path"
                    verbose="${verbose}"
                    classpathref="project.javac.classpath"
                    fork="${need.javac.fork}">
                <src path="${source.absolute.dir}" />
                <src path="${gen.absolute.dir}" />
                <compilerarg line="${java.compilerargs}" />
                <classpath>
                    <!-- steff: we changed one line here !-->
                    <fileset dir="${SampleApp.build.location}/classes" includes="*"/>
                </classpath>
            </javac>

            <!-- if the project is instrumented, intrument the classes -->
            <if condition="${build.is.instrumented}">
                <then>
                    <echo level="info">Instrumenting classes from ${out.absolute.dir}/classes...</echo>

                    <!-- build the filter to remove R, Manifest, BuildConfig -->
                    <getemmafilter
                            appPackage="${project.app.package}"
                            libraryPackagesRefId="project.library.packages"
                            filterOut="emma.default.filter"/>

                    <!-- define where the .em file is going. This may have been
                         setup already if this is a library -->
                    <property name="emma.coverage.absolute.file" location="${out.absolute.dir}/coverage.em" />

                    <!-- It only instruments class files, not any external libs -->
                    <emma enabled="true">
                        <instr verbosity="${verbosity}"
                               mode="overwrite"
                               instrpath="${out.absolute.dir}/classes"
                               outdir="${out.absolute.dir}/classes"
                               metadatafile="${emma.coverage.absolute.file}">
                            <filter excludes="${emma.default.filter}" />
                            <filter value="${emma.filter}" />
                        </instr>
                    </emma>
                </then>
            </if>

            <!-- if the project is a library then we generate a jar file -->
            <if condition="${project.is.library}">
                <then>
                    <echo level="info">Creating library output jar file...</echo>
                    <property name="out.library.jar.file" location="${out.absolute.dir}/classes.jar" />
                    <if>
                        <condition>
                            <length string="${android.package.excludes}" trim="true" when="greater" length="0" />
                        </condition>
                        <then>
                            <echo level="info">Custom jar packaging exclusion: ${android.package.excludes}</echo>
                        </then>
                    </if>

                    <propertybyreplace name="project.app.package.path" input="${project.app.package}" replace="." with="/" />

                    <jar destfile="${out.library.jar.file}">
                        <fileset dir="${out.classes.absolute.dir}"
                                includes="**/*.class"
                                excludes="${project.app.package.path}/R.class ${project.app.package.path}/R$*.class ${project.app.package.path}/BuildConfig.class"/>
                        <fileset dir="${source.absolute.dir}" excludes="**/*.java ${android.package.excludes}" />
                    </jar>
                </then>
            </if>

        </do-only-if-manifest-hasCode>
    </target> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-16T03:49:17.083

除了手动更新 ant.properties 之外，还有一种方法可以做到这一点。从命令行，运行以下命令：

```
android update test-project -m <project path> -p <test project path> 
```

运行此命令后，您可以直接从测试项目运行 ant debug。注意：如果出现 JUnit 相关错误，请在测试项目 libs 文件夹中添加 Junit jar 文件。

# python - 将 DataFrameGroupBy 对象转换为 DataFrame 熊猫

> ID：13582449
> 
> 赞同：45
> 
> 时间：2012-11-27T10:43:07.473
> 
> 标签：python, pandas

我有一个数据框，并在 FIPS 中进行了 groupby，并对运行良好的组进行了汇总。

```
kl = ks.groupby('FIPS')

kl.aggregate(np.sum) 
```

我只想要一个普通的数据框，但我有一个`pandas.core.groupby.DataFrameGroupBy`对象。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-27T11:16:51.217

结果**是**一个普通的`kl.aggregate(np.sum)`DataFrame，您只需将其分配给一个变量即可进一步使用它。使用一些随机数据：

```
>>> df = DataFrame({'A' : ['foo', 'bar', 'foo', 'bar',
>>>                         'foo', 'bar', 'foo', 'foo'],
...                  'B' : ['one', 'one', 'two', 'three',
...                         'two', 'two', 'one', 'three'],
...                  'C' : randn(8), 'D' : randn(8)})
>>> grouped = df.groupby('A')
>>> grouped
<pandas.core.groupby.DataFrameGroupBy object at 0x04E2F630>
>>> test = grouped.aggregate(np.sum)
>>> test
            C         D
A                      
bar -1.852376  2.204224
foo -3.398196 -0.045082 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2018-03-10T09:55:23.853

```
 df_g.apply(lambda x: x) 
```

将返回原始数据框。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-28T08:02:36.003

使用`pd.concat`，就像这样：

```
 pd.concat(map(lambda x: x[1], groups)) 
```

或者也保持`index`对齐：

```
 pd.concat(map(lambda x: x[1], groups)).sort_index() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-30T21:15:29.030

您可以将`groupby`带有 .head('# of rows') 的结果输出到变量。

前任：`df2 = grouped.head(100)`

现在您有了一个包含所有分组数据的 Pandas 数据框“df2”。

# java - Java泛型语法问题

> ID：13582453
> 
> 赞同：0
> 
> 时间：2012-11-27T10:43:12.560
> 
> 标签：java, generics

我想编写一个获取 2 个参数的方法：

1.  一个界面。
2.  实现该接口的类。

我希望它是通用的（编译时类型安全）。

有办法吗？如果没有，还有什么选择？

是否可以选择获取作为接口的通用参数？我该如何申报？?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T10:47:25.893

像这样的东西？？

```
public <I, K extends I> void method(I i, K k){

    } 
```

在上述方法中，第一个参数将是一个接口，第二个参数将是实现该接口的任何类。

```
 Interface1 i1;
    method(i1, class1); //class1 implements Interface1 
```

在泛型中，接口实现和类扩展使用 extends 关键字表示。在泛型世界中没有 implements 关键字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T10:47:43.520

```
public <T extends Interface> T myMethod(Interface I, Class<T> myClass) () {...} 
```

如果您的方法返回 T

# hsqldb - DBUnit 无法将数据导入 HSQLDB

> ID：13582454
> 
> 赞同：3
> 
> 时间：2012-11-27T10:43:13.140
> 
> 标签：hsqldb, dbunit, unitils

**我在创建删除**模式下使用 Hibernate 在启动时创建表。（表是在 hsqlDB的**公共模式中创建的）。**

出于某种原因，DBunit 无法将数据添加到我的表中：

```
ERROR org.dbunit.database.DatabaseDataSet - 
Table 'MY_TABLE' not found in tableMap=org.dbunit.dataset.OrderedTableNameMap[_tableNames=[], _tableMap={}, _caseSensitiveTableNames=false] 
```

...

```
Caused by: org.dbunit.dataset.NoSuchTableException: MY_TABLE 
```

我正在使用 unitils 注释 @DataSet。

我怀疑 DBunit 没有使用正确的架构，但无法找到解决此问题的方法。

*注意：休眠工作正常，我在启动时看到成功的请求*。

有没有人遇到过同样的问题？我错过了什么吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:39:49.600

解决方案在 unitils.properties 中：

> database.schemaNames=公共

# jquery - asp.net mvc jquery 加载函数和加载图像？

> ID：13582455
> 
> 赞同：0
> 
> 时间：2012-11-27T10:43:13.607
> 
> 标签：jquery, asp.net-mvc, jquery-load

我有以下代码来加载 partialView ：

```
$(document).ready(function () {
    $("#customer_operations_container").load('/Customer/_AddCustomer');
} 
```

我可以显示加载图像吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T10:45:51.677

做类似的事情

```
$(document).ready(function () {

    // show loading animation        
    $("#loading-animation").show();

    $("#customer_operations_container").load('/Customer/_AddCustomer', function() {
         // this function is the callback of the 'load' method
         // hide loading animation
         $("#loading-animation").hide();
    });
} 
```

# javascript - 使用 Phantomjs/Pjscrape 抓取多个页面

> ID：13582461
> 
> 赞同：2
> 
> 时间：2012-11-27T10:43:24.477
> 
> 标签：javascript, screen-scraping, web-scraping, phantomjs

试图抓取多个页面，但无法让 urlid 数组在 pjscrape .js 文件中工作。

我很确定我可能会犯一个新手错误，但我会很感激一些帮助。谢谢 ：）

```
pjs.config({

    timeoutInterval: 6000,
    timeoutLimit: 10000,

})

pjs.addSuite({
    // single URL or array
    url: abolaURLs,
    scraper: function(){
        var abolaURLs = [366762,366764,366763];
        for (var i = 0; i<abolaURLs.length; i++) {
            abolaURLs[i] = 'http://abola.pt/nnh/ver.aspx?id=' + abolaURLs[i];
        };
        var results[];
        var cenas1 = $('div#a5g2').text();
        var cenas2 = $('span#noticiatext').text();
        var cenas3 = $('div#a5x').text();
        results.push(cenas1, cenas2, cenas3);
        return results;
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T23:03:31.933

这对你有用：

```
var abolaURLs = [366762,366764,366763];

for (var i = 0; i < abolaURLs.length; i++) {
    abolaURLs[i] = 'http://abola.pt/nnh/ver.aspx?id=' + abolaURLs[i];
};

pjs.addSuite({
    url: abolaURLs,
    scraper: function() {
            var results = []; // !! you have the wrong array declaration result[]
            var cenas1 = $('div#a5g2').text();
            var cenas2 = $('span#noticiatext').text();
            var cenas3 = $('div#a5x').text();
            results.push(cenas1, cenas2, cenas3);
            return results;
    }
});

pjs.config({
    timeoutInterval: 6000,
    timeoutLimit: 10000,
}); 
```

# c++ - 在 Xcode 中编译此基本 C++ 代码时出现线程异常

> ID：13582463
> 
> 赞同：0
> 
> 时间：2012-11-27T10:43:26.040
> 
> 标签：c++, xcode, thread-exceptions

每次我编译这个 C++ 代码时，我都会得到一个我无法理解的线程异常。这里有什么问题？

```
#include <iostream>
#include <string>
using namespace std;

int main(int argc, char* argv[]) {
    string arg = argv[1];

    if (arg == "-r")
        cout << "First arg is -r" << endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:54:45.250

`argc>=2`在将 argv[1] 分配给 string 之前，您忘记检查了`arg`。
你确定你正在运行这个程序并传递一个参数吗？

可能的更正：

```
#include <iostream>
#include <string>
using namespace std;

int main(int argc, char* argv[]) 
{
    if(argc<2)
    {
      cerr << "Not enough parameters" << endl;
      abort();
    }

    string arg = argv[1];

    if (arg == "-r")
        cout << "First arg is -r" << endl;

    return 0;
} 
```

# iphone - Webapp主屏幕标题建议和jquery mobile

> ID：13582465
> 
> 赞同：0
> 
> 时间：2012-11-27T10:43:39.300
> 
> 标签：iphone, web-applications, jquery-mobile, mobile-safari

当用户从移动 Safari 中选择“添加到主屏幕”选项时，她会看到一个对话框，她可以在其中输入该快捷方式的标题。文本字段已经填充了一些默认标题。

问题是：这个标题是从哪里取来的？

在我的代码中，我的一个页面（单个 html 文件中的所有页面）有以下标题：

```
<div data-role="header" class="toolbar">
    <h1 id="someHeader" class="exampleHeader">Example Header</h1>
    <a href="#" onclick="loadOtherStuff()">Other</a>
</div> 
```

我正在使用动态更改此标题

```
var someDifferentTitle = ...
$('.exampleHeader').html(someDifferentTitle).trigger('create'); 
```

标题更新得很好，但是当我点击“添加到主屏幕”时，系统仍然使用原始的“示例标题”提示！

如何解决这个问题？有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T11:12:27.037

在这里回答：[https ://stackoverflow.com/a/11569043/275754](https://stackoverflow.com/a/11569043/275754)

简短的回答：

```
<meta name="apple-mobile-web-app-title" content="Short name"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:14:31.317

好的，结果很简单，只需要更改文档的标题：

```
document.title = someDifferentTitle 
```

我仍然不知道为什么提示在几个字符后被截断，但这对我来说已经足够了。

然而，我认为 jQM 的实现存在轻微的不一致。如果使用代码在 h1 中设置工具栏的标题会更改文档标题，那么通过 .html() 方法动态更改标题也应该会更改标题。

# ruby - 从heroku克隆的应用程序，现在我收到一个错误未知属性

> ID：13582473
> 
> 赞同：1
> 
> 时间：2012-11-27T10:44:06.847
> 
> 标签：ruby, ruby-on-rails-3, git, heroku, migrate

上周我的 Ubuntu 崩溃了。我确实在heroku上有我的应用程序。

所以我重新安装了 Ubuntu 12.04 并克隆了 heroku 应用程序。

之后我迁移了数据库等。

但是当我启动服务器时，我得到一个未知属性错误。

```
ActiveRecord::UnknownAttributeError in SurveysController#new
unknown attribute: survey_id 
```

有人知道解决方案吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:01:41.413

我通过删除 PG 数据库并运行解决了这个问题

> 耙分贝：创建

和

> 耙分贝：迁移

再次。

我不知道它为什么起作用。但它现在工作。可能是第一次创建 PG 数据库时出了点问题。

# xml - 如何更新 XML 标记的内容？

> ID：13582476
> 
> 赞同：-3
> 
> 时间：2012-11-27T10:44:17.100
> 
> 标签：xml, perl

我想编写一个 perl 代码来替换 XML 中标记的内容。例如`<A>Hello<A>`。

我想在我的 XML 中搜索标签`<A>`，然后将值“Hello”替换为“Hi”。

我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:21:57.507

该[`XML::Twig`](https://metacpan.org/module/XML%3a%3aTwig)模块非常适合这一点，因为它允许您指定在解析 XML 时遇到给定标记时执行的处理程序。

如果您提供了一些真实的 XML 数据作为示例，那将会有所帮助，但是我使用了您问题的摘要。

```
use strict;
use warnings;

use XML::Twig;

my $twig = XML::Twig->new(
  twig_handlers => { A => sub { $_->subs_text(qr/Hello/, 'Hi') } },
);

$twig->parse(*DATA);
$twig->print;

__DATA__
<root>
I want to replace the content of a tag in XML. e.g. In
<A>Hello</A> I want to replace the value "Hello" with "Hi".
</root> 
```

**输出**

```
<root>
I want to replace the content of a tag in XML. e.g. In
<A>Hi</A> I want to replace the value "Hello" with "Hi".
</root> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:51:54.817

使用[XML::XSH2](http://p3rl.org/XML%3a%3aXSH2)，一个围绕[XML::LibXML](http://p3rl.org/XML%3a%3aLibXML)的包装器：

```
open file.xml ;
for //A[text()='Hello'] set text() 'Hi' ;
save :b ; 
```

# jquery - 网站预览

> ID：13582481
> 
> 赞同：0
> 
> 时间：2012-11-27T10:44:37.367
> 
> 标签：jquery, asp.net-mvc, entity-framework

我正在开发一个项目，其中我有像 facebook 这样的 Stream Posting，用户也可以发布任何网站的链接，我想像 facebook 一样实现它，即当用户发布链接时，它会在文本框下方显示网站预览，我不知道我怎么能做到这一点 我怎样才能实现这个功能，我正在使用 Ajax 调用在流上发布

```
$.ajax({
                url: "My Controller ActionResult",
                type: "POST",
                data: JSON.stringify({ objResourceModel: objResource, objTagList: TagTypeList, sendEmail: $("#chkbxSendEmail")[0].checked, groupId: ResourceVariable.GroupId, isblog: isblog, isquest: isquest }),
                dataType: "html",
                contentType: "application/json; charset-utf-8",
                beforeSend: function () {
                    $("#btnPost").attr("disabled", "disabled");
                    loading = setTimeout("$('#load').show()", 200);
                },
                complete: function () {
                    clearTimeout(loading);
                    $("#load").hide();
                    $("#btnPost").removeAttr("disabled");
                },
                success: function (Result) {
                    if (Result == "false") {
                        alert("Video must be of Youtube or vimeo");
                    }
                    else {
                        $('#divResourceDetails').html(Result);
                        ClearPostSectionData(); //function call
                        SetUpCommentSectionEvent(); //function call set up events
                        GetLatestAnnouncements();
                        $('#tagOutput').html("");
                        outputTagHtml = '';
                        TagTypeList = [];
                        //GetBrowseByInstructor(); //function call
                        //GetBrowseByTagType(); //function call
                        GetBrowseByResource(); //function call
                        GetBrowseByMonth(); //function call
                    }
                },
                error: function (msg) {
                    alert("Unable to save uploaded post details: " + msg.responseText);
                }
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:44:18.953

我会在页面中使用指向正在共享的 url 的 iframe 快速完成。这是为了以防您只需要页面预览，而不是像 Facebook 那样从该页面解析 html 来提取元数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:24:13.500

由于您需要有效地解析远程站点上的 HTML（例如头部中的元信息），您需要检索 HTML 来处理它。

虽然 jQuery 不会让您跨来源发送/接收（不同的域 - 请参阅[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)） - 除了“填充 JSON”（jsonp - [http://en.wikipedia.org/wiki /JSONP](http://en.wikipedia.org/wiki/JSONP) ) - 你的服务器代码可以！

您可以为 URL 创建一个 HttpWebRequest (http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)，然后由您决定是否将 HTML 发送到您的要在客户端解析的 JavaScript 代码，或者您可以在服务器上解析它并将结构化对象发送到客户端代码以简单地推入 div。

通过解析 HTML 服务器端，它使您有机会将其缓存在数据库中（以防其他人共享相同的 url），也许分析它并记录错误（您不希望您的服务器继续访问一个返回 404！）。

最终，您可能只想返回一个 Partial View（当您使用 ASP.NET MVC 时），但您可以很聪明并根据内容类型返回一个专门的 View。例如，Facebook 让您可以在 News Feed 上原位观看 YouTube 视频，也可以在线显示图片。如果您共享一个网站，它通常允许您从它在您共享的页面中找到的一系列图像中进行选择。

# html - 以特定格式显示 arraylist 数据

> ID：13582493
> 
> 赞同：0
> 
> 时间：2012-11-27T10:45:13.140
> 
> 标签：html, jsp, arraylist

我在像 = 的 JSP 页面上获取请求属性`ArrayList arr= [a,b,c[e,f,g[j,k,l]]]`。列表可能很长。我应该如何以这样的方式显示它 a,b,c 是 e,f,g 的父级是 j,k,l 的父级？

我想要这样或更好的东西

```
<tr onclick=showchild()>
<td> a </td> <td> b </td> <td> c </td>
</tr> 
```

`tr`当我点击它的孩子上方时，`tr`应该显示下面。

```
< tr onclick=showchild()>
<td> e </td  <td> f </td>  <td> g </td> 
</tr> 
```

# c++ - 在编译时计算迭代器返回类型

> ID：13582497
> 
> 赞同：0
> 
> 时间：2012-11-27T10:45:23.293
> 
> 标签：c++, templates

`arg1`我需要一个带有两个参数的函数`arg2`

```
template<class T1, class T2>
SomeReturnType Foo(T1 arg1, T2 arg2); 
```

参数可以是指针或`std::iterator`，或者是 random_access_iterator 的双向迭代器。`Foo`对这些迭代器进行一些操作，需要将迭代器返回给另一个对象，但返回的迭代器属于以下类型

```
ptr, T   -> iterator< iterator_traits<T>::iterator_category >
T,   ptr -> iterator< iterator_traits<T>::iterator_category >
ptr, ptr -> iterator< random_access_iterator_tag >

random_access_iterator, random_access_iterator -> iterator< random_access_iterator_tag >

random_access_iterator, T -> iterator< iterator_traits<T>::iterator_category >
T, random_access_iterator -> iterator< iterator_traits<T>::iterator_category >
T, T                      -> iterator< bidirectional_iterator_tag> > 
```

我计划`Foo`根据参数的 iterator_category_tags 调用辅助函数，使用函数重载来处理调度。但我不知道如何计算`Foo`.

编辑：我现在看到了问题。的返回类型`Foo`派生自 std::iterator，并且可以是`Foo`函数的参数。这是一个问题，因为我一直在使用的特征类不是专门针对这些返回类型的，而是专门针对返回类型的基类的。我认为解决方案是使用`is derived_from`元函数。

EDIT2：标题显然不反映问题的内容。为了使它对其他人有用，我正在征求更好的标题的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:56:31.047

您可以为此使用 boost 函数特征。看这里[http://www.boost.org/doc/libs/1_52_0/libs/type_traits/doc/html/boost_typetraits/reference/function_traits.html](http://www.boost.org/doc/libs/1_52_0/libs/type_traits/doc/html/boost_typetraits/reference/function_traits.html)

你可以像这样使用它：

```
boost::function_traits<FunctionSignature>::result_type 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:25:57.250

如果我正确理解您正在寻找一种从参数类型派生返回类型的方法，则可以以经典方式进行，如下所示（对于前几种情况）：

```
#include <iterator>

template<typename T1, typename T2>
struct ret_iterator {};

// ptr, T   -> iterator< iterator_traits<T>::iterator_category >
template<typename P, typename T>
struct ret_iterator<P *, T>
{
  typedef std::iterator<typename std::iterator_traits<T>::iterator_category, P> iter;
};

// T,   ptr -> iterator< iterator_traits<T>::iterator_category >
template<typename T, typename P>
struct ret_iterator<T, P *>
{
  typedef std::iterator<typename std::iterator_traits<T>::iterator_category, P> iter;
};

// ptr, ptr -> iterator< random_access_iterator_tag >
template<typename P>
struct ret_iterator<P *, P *>
{
  typedef std::iterator<std::random_access_iterator_tag, P> iter;
};

// random_access_iterator, T -> iterator< iterator_traits<T>::iterator_category >
template<typename T>
struct ret_iterator<std::random_access_iterator_tag, T>
{
  typedef std::iterator<typename std::iterator_traits<T>::iterator_category, T> iter;
};

template<typename P, typename T>
struct ret_iterator<std::iterator<std::random_access_iterator_tag, P>, T>
{
  typedef typename ret_iterator<std::random_access_iterator_tag, T>::iter iter;
}; 
```

# jquery - Jquery从django对象构造数组

> ID：13582498
> 
> 赞同：1
> 
> 时间：2012-11-27T10:45:23.343
> 
> 标签：jquery, django, jquery-ui, django-views, jqplot

我的表中有 20 百万行。我正在尝试使用[http://www.jqplot.com/tests/date-axes.php](http://www.jqplot.com/tests/date-axes.php)（日期与时间）绘制时间戳图 jquery 如何处理这么多要绘制的数据它。两个问题：

1.如何从下面的代码构造一个数组：

```
line1=[['2008-09-30',4], ['2008-10-30',6], ['2008-11-30',5], ['2008-12-30',9], ['2009-01-30',8]];` 
```

2.在这种情况下我该如何即兴创作代码：

```
def get_data(request):
 cdr = Cdr.objects.values_list('start_of_call',flat=True)
 context_instance=RequestContext(request, {})) 
 return render_to_response('cdr/get_data.html', context_instance=RequestContext(request, {'cdr':cdr})) 
```

模板：

```
<script class="code" type="text/javascript">
$(document).ready(function(){

{% for c in cdr %}
  {{ c|date:"d M Y"}}
{% endfor %}
 How to construct the below array line from for loop or using jquery methods
//var line1=[['2008-09-30',4], ['2008-10-30',6], ['2008-11-30',5], ['2008-12-30',9], ['2009-01-30',8]];

var plot1 = $.jqplot('chart1', [line1], {
title:'Default Date Axis',
axes:{xaxis:{renderer:$.jqplot.DateAxisRenderer}},
series:[{lineWidth:4, markerOptions:{style:'square'}}]
});
});
 </script> 
```

`EDIT`

```
 line1=[['2008-09-30',4], ['2008-10-30',6], ['2008-11-30',5], ['2008-12-30',9], ['2009-01-30',8]];` 
```

在上面的行 4,6,5,9,8 是小时

`EDIT2`

CDR 值：

```
 [datetime.datetime(2012, 9, 13, 15, 54, 52, tzinfo=<UTC>), datetime.datetime(2012, 9, 22, 18, 24, 18, tzinfo=<UTC>), datetime.datetime(2012, 9, 6, 7, 42, 50, tzinfo=<UTC>), datetime.datetime(2012, 9, 7, 21, 27, 13, tzinfo=<UTC>), datetime.datetime(2012, 9, 3, 11, 57, 9, tzinfo=<UTC>), datetime.datetime(2012, 9, 1, 17, 23, 41, tzinfo=<UTC>), datetime.datetime(2012, 9, 15, 6, 14, 33, tzinfo=<UTC>), datetime.datetime(2012, 9, 4, 5, 36, 30, tzinfo=<UTC>), datetime.datetime(2012, 9, 17, 10, 45, 6, tzinfo=<UTC>), datetime.datetime(2012, 10, 1, 3, 1, 17, tzinfo=<UTC>), datetime.datetime(2012, 9, 27, 8, 36, 41, tzinfo=<UTC>), datetime.datetime(2012, 9, 30, 3, 12, 18, tzinfo=<UTC>), datetime.datetime(2012, 9, 18, 4, 8, 49, tzinfo=<UTC>), datetime.datetime(2012, 9, 2, 7, 21, tzinfo=<UTC>), datetime.datetime(2012, 9, 19, 16, 57, 34, tzinfo=<UTC>), datetime.datetime(2012, 9, 17, 17, 14, 49, tzinfo=<UTC>), datetime.datetime(2012, 9, 1, 22, 40, 33, tzinfo=<UTC>), datetime.datetime(2012, 9, 15, 1, 7, 39, tzinfo=<UTC>), datetime.datetime(2012, 9, 22, 17, 11, 45, tzinfo=<UTC>), datetime.datetime(2012, 9, 10, 3, 16, 21, tzinfo=<UTC>), '...(remaining elements truncated)...'] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T12:12:27.207

像这样的东西：

```
from django.utils import simplejson

def get_data(request):
    cdr = [(x.strftime('%Y-%M-%D'), x.hour) for x in \
            Cdr.objects.values_list('start_of_call',flat=True)]
    return render_to_response('cdr/get_data.html',
                              {'cdr': simplejson.dumps(cdr)},
                              context_instance=RequestContext(request)) 
```

格式字符串`strftime`可能有点偏离 - 在此处查看：http: [//docs.python.org/2.7/library/datetime.html#strftime-strptime-behavior](http://docs.python.org/2.7/library/datetime.html#strftime-strptime-behavior)

顺便说一句，您的视图使用 RequestContext 做了一些奇怪的事情 - 以上是更常见的风格。

模板：

```
line1 = jQuery.parseJSON({{ cdr }}) 
```

至于样本量的问题——没有明确的答案——这将取决于你的网络连接、浏览器和机器。siad 20M 非常大 - 考虑对数据集进行采样以将其降低到更易于管理的大小 - 实验将是最好的方法。

# javascript - 单击后退按钮重新加载上一页

> ID：13582507
> 
> 赞同：1
> 
> 时间：2012-11-27T10:46:09.367
> 
> 标签：javascript, jquery, html, google-maps, jquery-mobile

我的主页如下所示：

```
<body>
    <div id="MainPage" data-role="page">
        <script>
            $("#MainPage").live("pageinit", function () { ... });
        </script>
        ...//I have a map and when I walk to the next page I delete the map.
    </div>
</body> 
```

我的下一页如下所示：

```
<body>
  <div id="NextPage" data-role="page">
    <script>
      $("#NextPage").live("pageinit", function () {... });
    </script>
 <a data-res="btnBack" data-role="button" data-theme="b" href="MainPage.html"
                data-icon="back" data-iconpos="left" onclick="document.MainPage.reload(true);">
            </a>
    ...//I have a map and when I walk to the Main page I delete the map.
  </div>
</body> 
```

因为我删除了地图，所以我必须重新加载主页并且它不起作用，所以主页不会被识别为页面，因此没有重新加载功能。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T10:54:43.177

从主页转到下一页时，请尝试保存主页的网址。

例如：您使用链接或按钮从一个页面遍历到另一个页面，使用此代码保存当前页面的 url，然后使用查询字符串或其他内容将其发送到其他页面。

```
$(document).ready(function(){
var url =$(location).attr("href");
}); 
```

变量 'url' 包含主页的 url，现在 reload 函数重新加载它。作为：

```
 $(document).ready(function(){
 window.reload(url);
 }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:58:01.133

要跳转到任何其他页面，请使用以下代码：

```
$.mobile.changePage("#page", {transition: "none", reloadPage : false}); 
```

如果需要，请设置过渡效果，如果要重新加载该页面，请设置 reloadPage true。

使用此代码重新加载当前页面：

```
function refreshPage() {
  $.mobile.changePage(
    window.location.href,
    {
      allowSamePageTransition : true,
      transition              : 'none',
      showLoadMsg             : false,
      reloadPage              : true
    }
 ); 
```

}

# android - 通过服务模块将文件从 Android 上传到 Drupal

> ID：13582508
> 
> 赞同：1
> 
> 时间：2012-11-27T10:46:09.893
> 
> 标签：android, drupal, service, upload

我试图将图像从 Android 设备上传到 Drupal 网站

我在 Drupal 端使用了 Service 模块和方法 file.create。

问题是下载后文件已损坏。

文件更小。

filemime 设置有 n 效果。

爪哇：

```
public Map saveFile(String localFilePath, String serverpath) throws XmlRpcException, IOException{

        HashMap<String, Object> account = new HashMap<String, Object>();

    File localFile = new File(localFilePath);

    Log.w("XMLRPC", "FILENAME "+localFile.getName() + " original "+localFile.length());

        String fileAsString = readFile(localFilePath);

        // Sending side
        byte[] data =  fileAsString.getBytes("UTF-8");
        byte[] base64 =  Base64.encode(data,Base64.URL_SAFE);

        account.put("file", base64);
        account.put("filename", localFile.getName());
        account.put("filepath", serverpath +"/"+ localFile.getName());
       // account.put("filemime", "application/x-compressed");
        account.put("filesize", Integer.parseInt(localFile.length()+""));//String.valueOf(localFile.length()));

        Vector<Object> params = new Vector<Object>();
        params.add(account);

        return (Map) xmlRpcClient.execute(METHOD_FILE_CREATE, params);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T04:28:15.270

好吧，如果您的 Drupal 站点没有使用原生 android 应用程序，则不需要任何其他“接口”来上传文件！它应该像您从桌面上传文件一样工作！

# installation - Installscript 项目如何挂钩到安装过程

> ID：13582510
> 
> 赞同：0
> 
> 时间：2012-11-27T10:46:13.970
> 
> 标签：installation, installshield, installscript

我使用 InstallShield 2010 创建了一个 installscript 项目。我在安装过程中使用“OnFirstUIBefore()”方法收集信息。但是当软件的实际安装发生时（即当你看到一个进度条并且它正在复制安装文件时）我想根据用户输入做一些操作。

我的两个问题是：

1 - 我如何挂钩到安装过程的实际部分？

2 - 如果出现任何问题，我将如何撤消我所做的事情？

注意：- 这是一个纯 installscript 项目，而不是 installscript MSI 项目等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:35:21.070

您是否尝试在自定义操作和序列中添加自定义操作...

# stl - CodeBlocks step into 出现意外错误

> ID：13582511
> 
> 赞同：0
> 
> 时间：2012-11-27T10:46:19.740
> 
> 标签：stl, segmentation-fault, runtime-error, codeblocks

我对代码块有一个奇怪的问题，问题是当我运行我的程序时，它可以工作，但是如果我尝试进入程序并逐步运行它，则会出现`segmentation fault`错误。

**只有**当我使用 STL 容器时才会发生这种情况。如果我使用数组做**完全相同的事情**，就没有问题。

有没有人有同样的问题或者有谁知道我应该如何解决这个问题？

编辑：分段错误是在我进入之后立即给出的，而不是在某个特定点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:32:29.000

你已经破坏了你的记忆，导致了未定义的行为。

我会使用像 valgrind 这样的内存调试工具来定位问题。

# android - myNodeList.item(0).getNodeValue() 不返回任何值。安卓

> ID：13582514
> 
> 赞同：0
> 
> 时间：2012-11-27T10:46:39.280
> 
> 标签：android, nodelist

我有这个 xml 文件，并且我获得了一个`NodeList`包含所有模型的文件，当我调用时`myNodeList.getLength()`，它给了我正确的数字 2。但是当我调用`myNodeList.item(0).getNodeValue()`应该返回的`url1`时，它不显示任何值。有什么问题？？

```
 <?xml version="1.0" encoding="UTF-8"?>
    <results>
     <object id="1">
        <title>back parking lot</title>
         <assets3d>
          <model>
             url1
          </model>
          <model>
             url2 
          </model>
         </assets3d>
    </object>
   </results> 
```

解析器类，我`NodeList models = myParser.getValue(e, "model",0);`用来获取模型

```
public class XMLParser {

    // constructor
    public XMLParser() {

    }

    /**
     * Getting XML from URL making HTTP request
     * @param url string
     * */
    public String getXmlFromUrl(String url) {
        String xml = null;

        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            xml = EntityUtils.toString(httpEntity);

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        // return XML
        return xml;
    }

    /**
     * Getting XML DOM element
     * @param XML string
     * */
    public Document getDomElement(String xml){
        Document doc = null;
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        try {

            DocumentBuilder db = dbf.newDocumentBuilder();

            InputSource is = new InputSource();
                is.setCharacterStream(new StringReader(xml));
                doc = db.parse(is); 

            } catch (ParserConfigurationException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (SAXException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (IOException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            }

            return doc;
    }

    /** Getting node value
      * @param elem element
      */
     public final String getElementValue( Node elem ) {
         Node child;
         if( elem != null){
             if (elem.hasChildNodes()){
                 for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                     if( child.getNodeType() == Node.TEXT_NODE  ){
                         Log.d("child.getNodeValue() ", "child.getNodeValue() "+child.getNodeValue());
                         return child.getNodeValue();
                     }
                 }
             }
         }
         return "0000";
     }

     /**
      * Getting node value
      * @param Element node
      * @param key string
      * */
     public String getValue(Element item, String str) {     
            NodeList n = item.getElementsByTagName(str);    
            Log.d("this.getElementValue(n.item(0))", "this.getElementValue(n.item(0)) "+this.getElementValue(n.item(0)));
            return this.getElementValue(n.item(0));
        }

     public NodeList getValue(Element item, String str,int a) {     
            NodeList n = item.getElementsByTagName(str);    
            Log.d("item.getElementsByTagName", "item.getElementsByTagName "+ n.getLength());
            //return this.getElementValue(n.item(0));
            return n;
        }
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:07:57.317

利用

```
myNodeList.item(0).getTextContent() 
```

或者

```
myNodeList.item(0).getChildNodes().item(0).getNodeValue() 
```

“url1”是模型节点的子节点。

# jquery - 使用 jQuery .css() 和 em 更改宽度

> ID：13582518
> 
> 赞同：10
> 
> 时间：2012-11-27T10:46:47.253
> 
> 标签：jquery, width

我需要使用 jQuery 更改 div 的宽度。

当我使用以下内容时，它可以工作：

```
$('#footer').css('width', '100%');
$('#footer').css('width', '-=239'); 
```

当我使用它时，它可以工作：

```
$('#footer').css('width', '100%');
$('#footer').css('width', '-=239px'); 
```

但是当我使用它时，它什么也没做：

```
$('#footer').css('width', '100%');
$('#footer').css('width', '-=21em'); 
```

有没有办法让 jQuery 工作`em`？或者例如计算`em`并`px`设置一个变量并减去该值？

编辑：感谢大家纠正我的拼写和代码！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-27T11:29:40.587

我试过了，它工作正常我认为你应该检查你的代码我已经在所有浏览器中检查过它工作正常 px 和 em 都工作得很好你可以使用这个代码把这个代码放在一个虚拟页面中你可以看到这个工作

```
<style>
#footer{
background: black;
height:50px;
}
</style>
<script type="text/javascript">
$(function(){
    $('#footer').css('width', '100%');
    $('#footer').css('width', '-=210em');
});
</script>
<div id="footer"></div> 
```

# hash - 如何在 Go 中生成字符串的哈希数？

> ID：13582519
> 
> 赞同：57
> 
> 时间：2012-11-27T10:46:51.643
> 
> 标签：hash, go

例如：

```
hash("HelloWorld") = 1234567 
```

有没有内置函数可以做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-11-27T11:09:37.460

[哈希](http://golang.org/pkg/hash/)包对此很有帮助。请注意，它是对特定哈希实现的抽象。[在包子目录](http://golang.org/pkg/hash/#pkg-subdirectories)中可以找到一些现成的。

例子：

```
package main

import (
        "fmt"
        "hash/fnv"
)

func hash(s string) uint32 {
        h := fnv.New32a()
        h.Write([]byte(s))
        return h.Sum32()
}

func main() {
        fmt.Println(hash("HelloWorld"))
        fmt.Println(hash("HelloWorld."))
} 
```

（也在[这里](http://play.golang.org/p/_J2YysdEqE)）

* * *

输出：

```
926844193
107706013 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-11-12T00:37:53.900

这是一个可用于生成哈希数的函数：

```
// FNV32a hashes using fnv32a algorithm
func FNV32a(text string) uint32 {
    algorithm := fnv.New32a()
    algorithm.Write([]byte(text))
    return algorithm.Sum32()
} 
```

我在这里汇总了一组这些实用程序哈希函数：[https ://github.com/shomali11/util](https://github.com/shomali11/util)

你会发现`FNV32`, `FNV32a`, `FNV64`, `FNV64a`, `MD5`, `SHA1`,`SHA256`和`SHA512`

# java - 创建一个清除按钮

> ID：13582521
> 
> 赞同：0
> 
> 时间：2012-11-27T10:46:55.247
> 
> 标签：java, awt

> **可能重复：**
> [如何重新启动 Java 应用程序？](https://stackoverflow.com/questions/4159802/how-can-i-restart-a-java-application)

我正在开发一个 java 程序，它从用户那里接收一堆值并返回一个答案。我有一个“清除”按钮，它使应用程序准备好接受一组新的输入。所以我想要的是这个按钮应该关闭当前正在查看的框架（创建一个窗口关闭事件等等），然后调用 main() 函数来创建我的应用程序的一个新实例。我该怎么做？我试过了，但它关闭了所有东西并且新框架没有出现：

```
WindowEvent wev = new WindowEvent(this, WindowEvent.WINDOW_CLOSING);
Toolkit.getDefaultToolkit().getSystemEventQueue().postEvent(wev);
main(newInstance); 
```

以及 Toolkit 的作用是什么？建议一些读数。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:55:24.080

根据我的评论，我认为这不是最佳做法，但这是可能的。

这已经在这里得到了回答： [如何重新启动 Java 应用程序？](https://stackoverflow.com/questions/4159802/how-can-i-restart-a-java-application)

我希望这有帮助，

# wix - 使用 WIX 安装/配置 MS 环回适配器

> ID：13582522
> 
> 赞同：3
> 
> 时间：2012-11-27T10:46:58.827
> 
> 标签：wix, windows-installer, wix3.5, wix3.6, wix-extension

是否可以使用 MSI 在 XP/WIN7 上安装和或配置（如果已安装）Microsoft 环回适配器。是否可以使用 WiX 3.5 或更高版本执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:09:00.280

我发现这些链接可能有助于集成 MS Loop Back 的安装和配置。

[手动安装](http://www.webxpert.ro/andrei/2008/01/02/microsoft-loopback-adapter-manual-install-on-2000-xp-2003-vista/)
[自动安装](http://www.webxpert.ro/andrei/2008/01/10/microsoft-loopback-adapter-automated-install/)
[自动配置](http://www.webxpert.ro/andrei/2008/01/10/microsoft-loopback-adapter-automated-configure/)

在 Wix 安装的用户界面中创建一个对话框，它将传递要在机器上配置的值。

# java - 在同一个 Jfreechart Piedataset 上使用不同的数据集

> ID：13582523
> 
> 赞同：0
> 
> 时间：2012-11-27T10:47:02.563
> 
> 标签：java, jfreechart, jlist, jcheckbox

嗨朋友我有一个 DefaultPieDataset 正在以这种方式创建：

```
package business.intelligence.system;

import java.awt.Color;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.Rectangle;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.JInternalFrame;

import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import javax.swing.*;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.ArrayList;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;
import org.jfree.chart.plot.PiePlot3D;
import org.jfree.data.general.DefaultPieDataset;
import org.jfree.data.general.PieDataset;
import org.jfree.data.jdbc.JDBCPieDataset;

public class DepositBase extends JInternalFrame {

private JPanel jpAcc = new JPanel();
private JList checkBoxesJList;
private JLabel lScheme;
private String schm = "";

DepositBase() throws SQLException, ClassNotFoundException {
    super("Deposit base", false, true, false, true);
    setSize(1300, 600);
    jpAcc.setLayout(null);
    jpAcc.setBackground(Color.LIGHT_GRAY);
    JScrollPane scrollPane = new JScrollPane(checkBoxesJList);
    lScheme = new JLabel("<html><u>SCHEME CODE</u></html>");
    lScheme.setBounds(10, 5, 100, 25);
    lScheme.setForeground(Color.BLACK);
    Connection conn = null;
    try {
        Class.forName("oracle.jdbc.driver.OracleDriver");
        conn = DriverManager.getConnection("jdbc:oracle:thin:@192.168.1.80:1521:simba9i", "SYSTEM", "system123");
        Statement st = conn.createStatement();
        String combo = "select distinct SCHM_CODE from DLY_DEP_VIEW";
        ResultSet res = st.executeQuery(combo);
        String ids = "";
        ArrayList<String> v = new ArrayList<>();
        v.add("All");
        while (res.next()) {
            ids = res.getString("SCHM_CODE");
            v.add(ids);
            checkBoxesJList = new JList(createData(v));

        }

        checkBoxesJList.setBounds(10, 30, 80, 600);
        checkBoxesJList.setBackground(Color.LIGHT_GRAY);
        checkBoxesJList.setCellRenderer(new CheckListRenderer());
        checkBoxesJList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
    } catch (Exception as) {
    }

    checkBoxesJList.addListSelectionListener(new ListSelectionListener() {
        public void valueChanged(ListSelectionEvent evt) {
            if (evt.getValueIsAdjusting()) {
                return;
            }
            Object[] temp = checkBoxesJList.getSelectedValues();
            for (int i = 0; i < temp.length; i++) {
                // System.out.println(temp[i]);
                Connection conn = null;
                schm = temp[i].toString();
               // System.out.println(schm);
                try {

                    createDataset(schm);
                } catch (Exception ae) {
                }

            }
        }
    });

    checkBoxesJList.addMouseListener(new MouseAdapter() {
        public void mouseClicked(MouseEvent e) {
            int index = checkBoxesJList.locationToIndex(e.getPoint());
            CheckableItem item = (CheckableItem) checkBoxesJList.getModel().getElementAt(index);
            item.setSelected(!item.isSelected());
            Rectangle rect = checkBoxesJList.getCellBounds(index, index);
            checkBoxesJList.repaint(rect);
        }
    });

    final PieDataset dataset = createDataset(schm);
    final JFreeChart chart = createChart(dataset);
    final ChartPanel chartPanel = new ChartPanel(chart);
    chartPanel.setPreferredSize(new Dimension(900, 900));
    chartPanel.setBounds(550, 30, 700, 500);
    // setContentPane(chartPanel);
    jpAcc.add(chartPanel);
    jpAcc.add(checkBoxesJList);
    jpAcc.add(scrollPane);
    jpAcc.add(lScheme);

    getContentPane().add(jpAcc);
    setVisible(true);

}

private PieDataset createDataset(String schm) throws SQLException, ClassNotFoundException {

    // create the dataset...
    Connection conn = null;
    Class.forName("oracle.jdbc.driver.OracleDriver");
    conn = DriverManager.getConnection("jdbc:oracle:thin:@192.168.1.80:1521:simba9i", "SYSTEM", "system123");
    final DefaultPieDataset dataset = new JDBCPieDataset(conn,
            "select distinct SCHM_CODE, sum(DEP_AMT) as AMOUNT from DLY_DEP_VIEW  where schm_code = '" + schm + "' group by schm_code");
    System.out.println(schm);
    try {
    } catch (Exception ad) {
        JOptionPane.showMessageDialog(this, ad,
                "Error", JOptionPane.ERROR_MESSAGE);
    }

    return dataset;

}

private CheckableItem[] createData(ArrayList<String> strs) {
    int n = strs.size();
    CheckableItem[] items = new CheckableItem[n];
    for (int i = 0; i < n; i++) {
        items[i] = new CheckableItem(strs.get(i));
    }
    return items;
}

private JFreeChart createChart(final PieDataset dataset) {

    // create the chart...
    final JFreeChart chart = ChartFactory.createPieChart3D(
            "Deposit Base", dataset, true, true, false);

    // set the background color for the chart...
    chart.setBackgroundPaint(Color.white);

    // get a reference to the plot for further customisation...
    final PiePlot3D plot = (PiePlot3D) chart.getPlot();     
    plot.setLabelGenerator(null);
    //plot.setLabelGenerator(new StandardPieSectionLabelGenerator(" {2}", NumberFormat.getNumberInstance(), NumberFormat.getPercentInstance()));

    plot.setForegroundAlpha(1f);
    plot.setNoDataMessage("No data to display");
    return chart;

}
}

class CheckableItem {

private String str;
private boolean isSelected;

public CheckableItem(String str) {
    this.str = str;
    isSelected = false;
}

public void setSelected(boolean b) {
    isSelected = b;
}

public boolean isSelected() {
    return isSelected;
}

@Override
public String toString() {
    return str;
}
}

class CheckListRenderer extends JCheckBox implements ListCellRenderer {

public CheckListRenderer() {
    setBackground(UIManager.getColor("List.textBackground"));
    setForeground(UIManager.getColor("List.textForeground"));
}

@Override
public Component getListCellRendererComponent(JList list, Object value,
        int index, boolean isSelected, boolean hasFocus) {
    setEnabled(list.isEnabled());
    setSelected(((CheckableItem) value).isSelected());
    setFont(list.getFont());
    setText(value.toString());
    return this;
}
} 
```

我需要我的图表根据我单击的 JList 组件进行更改但我没有看到任何更改。我该怎么办。我是初学者。我将欣赏示例和示例的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:15:07.860

您的代码不起作用，因为虽然里面的代码`ListSelectionListener`执行 `createDataset()`它什么都不做，但您第一次调用时创建的日期集`createDataset()`是未实际的/未更新的。

而不是`DefaultPieDataset`每次列表框更改时都创建一个新的数据集（第一次调用该方法时），然后在随后的更改中只调用`JDBCPieDataset#executeQuery()`您的新查询，这将执行新查询，然后调用`fireDatasetChanged()`.

让你的数据集成为一个属性

私有 JDBCPieDataset 数据集；私人连接连接；

修改你的监听器）

```
 scheamaList.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent evt) {
    try {
      dataset.executeQuery( (String) scheamaList.getSelectedItem());
    } catch (Exception ae) {
      ae.printStackTrace();
     }
  }
  }); 
```

以便刷新数据集：

![在此处输入图像描述](../Images/c41106cab703c39c6a7d0de7781834c3.png)

# java-me - RecordControl 与 platformRequest 他们可以工作吗？

> ID：13582524
> 
> 赞同：1
> 
> 时间：2012-11-27T10:47:03.913
> 
> 标签：java-me, midp, mmapi

我的目标是制作一个可以拨打电话号码然后记录保存情况的应用程序。

我已经测试了这段代码，它可以录制语音，然后在我的 5310 上正确播放。

```
import java.io.*;
import javax.microedition.midlet.*;
import javax.microedition.lcdui.*;
import javax.microedition.media.*;
import javax.microedition.media.control.*;

public class VoiceRecordMidlet extends MIDlet {
      private Display display;

      public void startApp() {
            display = Display.getDisplay(this);
            display.setCurrent(new VoiceRecordForm());
      }

      public void pauseApp() {
      }

      public void destroyApp(boolean unconditional) {
            notifyDestroyed();
      }
}

class VoiceRecordForm extends Form implements CommandListener {
      private StringItem message;
      private StringItem errormessage;
      private final Command record, play;
      private Player player;
      private byte[] recordedAudioArray = null;
      public VoiceRecordForm() {
            super("Recording Audio");
            message = new StringItem("", "Select Record to start recording.");
            this.append(message);
            errormessage = new StringItem("", "");
            this.append(errormessage);
            record = new Command("Record", Command.OK, 0);
            this.addCommand(record);
            play = new Command("Play", Command.BACK, 0);
            this.addCommand(play);
            this.setCommandListener(this);
      }

  public void commandAction(Command comm, Displayable disp) {
            if (comm == record) {

              System.getProperty("audio.encodings");
                System.getProperty("supports.audio.capture");
              System.getProperty("supports.recording");
                  t.start();

            }
            else if (comm == play) {
                  try {

                        ByteArrayInputStream recordedInputStream = new ByteArrayInputStream(recordedAudioArray);
                        Player p2 = Manager.createPlayer(recordedInputStream, "audio/amr");
                        p2.prefetch();
                        p2.start();
                  }
                  catch (Exception e) {
                        errormessage.setLabel("Error");
                        errormessage.setText(e.toString());
                  }
            }
             }

         Thread t = new Thread() {
                        public void run() {
                              try {

                                 System.getProperty("audio.encodings");

                                    player = Manager.createPlayer("capture://audio");
                                    player.realize();
                                    RecordControl rc = (RecordControl) player.getControl("RecordControl");
                                    ByteArrayOutputStream output = new ByteArrayOutputStream();
                                    rc.setRecordStream(output);
                                    rc.startRecord();
                                    player.start();
                                    message.setText("Recording...");
                                    Thread.sleep(5000);
                                    message.setText("Recording Done!");
                                    rc.commit();
                                    recordedAudioArray = output.toByteArray();
                                    player.close();
                              } catch (Exception e) {
                                    errormessage.setLabel("Error");
                                    errormessage.setText(e.toString());
                              }
             };

};
} 
```

然后我对我的代码进行了一些更改以记录保护

```
import java.io.*;
import javax.microedition.midlet.*;
import javax.microedition.lcdui.*;
import javax.microedition.media.*;
import javax.microedition.media.control.*;

public class VoiceRecordMidlet extends MIDlet {
      private Display display;

Form f = new VoiceRecordForm();

      public void startApp() {

            display = Display.getDisplay(this);
            display.setCurrent(f);
      }

      public void pauseApp() {
      }

      public void destroyApp(boolean unconditional) {
            notifyDestroyed();
      }

class VoiceRecordForm extends Form implements CommandListener {
    private MIDlet m;
      private StringItem message;
      private StringItem errormessage;
      private final Command record, play;
      private Player player;
      private byte[] recordedAudioArray = null;
              private TextField phoneField;
           private String n;
      public VoiceRecordForm() {
            super("Recording Audio");
            message = new StringItem("", "Select Record to start recording.");
            this.append(message);

            errormessage = new StringItem("", "");
            this.append(errormessage);
            record = new Command("Record", Command.SCREEN, 0);
            this.addCommand(record);
            play = new Command("Play", Command.BACK, 0);
            this.addCommand(play);
            this.phoneField =new TextField("number","",20,phoneField.PHONENUMBER);
            append(phoneField);
            this.setCommandListener(this);
      }

  public void commandAction(Command comm, Displayable disp) {
            if (comm == record) {

              System.getProperty("audio.encodings");
                System.getProperty("supports.audio.capture");
              System.getProperty("supports.recording");
 t.start();
                   try
   {
       n=phoneField.getString().trim();

       platformRequest("tel:"+n);

   }
  catch(javax.microedition.io.ConnectionNotFoundException e)

  {
      e.printStackTrace();
  }

 }
  else if (comm == play) {

  try {

               ByteArrayInputStream recordedInputStream = new ByteArrayInputStream(recordedAudioArray);
                        Player p2 = Manager.createPlayer(recordedInputStream, "audio/amr");

                        p2.prefetch();
                        p2.start();

                  }
                  catch (Exception e) {
                        errormessage.setLabel("Error");
                        errormessage.setText(e.toString());
                  }
            }
             }

         Thread t = new Thread() {
                        public void run() {
                              try {

                                 System.getProperty("audio.encodings");

                                    player = Manager.createPlayer("capture://audio");
                                    player.realize();
                                    RecordControl rc = (RecordControl) player.getControl("RecordControl");
                                    ByteArrayOutputStream output = new ByteArrayOutputStream();
                                    rc.setRecordStream(output);
                                    rc.startRecord();
                                    player.start();
                                    message.setText("Recording...");
                                    Thread.sleep(5000);
                                    message.setText("Recording Done!");
                                    rc.commit();
                                    recordedAudioArray = output.toByteArray();
                                    player.close();
                              } catch (Exception e) {
                                    errormessage.setLabel("Error");
                                    errormessage.setText(e.toString());
                              }
             };

};
}} 
```

但是当按下记录命令时出现以下错误

```
**Error:    javax.microedition.media.MediaException: RecordControl** 
```

请问有什么帮助吗？

# json - 获取 JSON 对象以绑定 Asp.net 的 Gridview 插入/编辑/更新与分组

> ID：13582525
> 
> 赞同：2
> 
> 时间：2012-11-27T10:47:04.757
> 
> 标签：json, json.net

我是 JSON 新手。需要帮忙。

1.  如何将对象绑定到`GridView`并继续进行 DML 操作`GridView`？我有一个具有`TextBox`和`DropDownList`和分组功能的自定义网格。

2.  如果使用 JSON，我们是否需要一个 Web 服务来与数据库（Sql）插入/更新/删除进行交互？我们可以直接从 UI 读取数据并将其发送到 DB 吗？

3.  它会支持像 : 的内部函数`ISNULL(SubString(FieldName,Param1,Param2))`吗？

在我当前的原型中，我已经用普通的 ASP 控件实现了它，比如 UI 等`GridView`。`TextBox`我有一个`Gridview`带有`TextBox`和`DropDowList`处于编辑模式的自定义。

# android - 固定页眉和页脚在 JqueryMobile 中不起作用

> ID：13582528
> 
> 赞同：0
> 
> 时间：2012-11-27T10:47:08.663
> 
> 标签：android, html

我正在为 Android 开发一个混合移动应用程序。我使用 jquerymobile 1.2.0 作为框架。我想固定我的页眉和页脚，而正文段中的内容将垂直滚动，为此使用 data-role="listview"。

但问题是页眉和页脚也随着正文滚动而向上滚动。

*   我的笔记
*   我的查询
*   在线学习
*   任务
*   媒体
*   播送

```
<div data-role="content">
    <ul data-role="listview" class="ui-listview">
        <li>
        <img src="images/noprofileimg.jpg" />
                    <h3>Indraneel Roy <small>says</small></h3>
        <p >Friday, October 8, 2010 <span class="ui-li-count">2</span></p>
        <p>@abir kab h freshears ???</p>
        </li>
    </ul>
</div><!--end of body container--> 
```

版权所有 © 公司名称 2012-2013。
版权所有。

你能告诉我我在哪里或做错了什么吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T22:08:06.533

您是否禁用了视口缩放？这是 Android 中最常见的问题之一，导致 position:fixed 不起作用......例如

```
 <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1,user-scalable=no" /> 
```

还可以查看这篇关于 android HTML5 滚动问题的优秀但已有 8 年历史的帖子： [https ://bradfrost.com/blog/mobile/fixed-position/](https://bradfrost.com/blog/mobile/fixed-position/)

但首先将正确的视口元标记添加到 html 的 head 部分，看看这是否有帮助..

# apache - 为什么匹配的重写不起作用？

> ID：13582529
> 
> 赞同：1
> 
> 时间：2012-11-27T10:47:16.953
> 
> 标签：apache, mod-rewrite

我有以下.htaccess：

```
<IfModule mod_rewrite.c>
   RewriteEngine on

   RewriteRule    ^a/(.*)$ api.php?params=$1 [L,QSA]
   RewriteRule    ^$ app/webroot/    [L]
   RewriteRule    (.*) app/webroot/$1 [L]
</IfModule> 
```

我希望当我去`/a/test`那个服务器返回`/api.php?params=test`

而是匹配第三条规则。

如果我注释掉第三条规则，则第一条规则有效。

这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:17:47.483

即使你有一个`L`标志，它会*为当前的重写迭代*停止重写，结果（重写的 URI）将被放回重写引擎，并将继续这样做，直到进入重写引擎的 URI 保持不变。所以发生的事情是第一个规则被应用，然后`api.php?params=test`被放回重写引擎，第三个规则被应用。

您可以关闭所有循环，如果进行了内部重定向，则通过 URI 传递，方法是在*下面`RewriteEngine On`*添加：

```
RewriteCond %{ENV:REDIRECT_STATUS} 200
RewriteRule ^ - [L] 
```

或者向第三条规则添加一个条件，使其忽略对现有资源的请求：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule    (.*) app/webroot/$1 [L] 
```

或者添加一个明确的条件来忽略`api.php`：

```
RewriteCond %{REQUEST_URI} !^/api\.php
RewriteRule    (.*) app/webroot/$1 [L] 
```

# ios - iphone5 兼容性标签栏位于屏幕底线上方 88 点

> ID：13582531
> 
> 赞同：2
> 
> 时间：2012-11-27T10:47:17.827
> 
> 标签：ios, iphone, iphone-5, screen-size

我通过添加 default-568h@2x.png 添加了 iPhone 5 兼容性但是，我的应用程序中的标签栏没有像预期的那样位于底部。

这个标签栏是通过 mainWindow.xib 中的 tabbarController 添加的。

![截屏](../Images/0f7e52b57fb131274a048153af5b47ca.png)

注意：底部黑色部分是可点击的，但我的视图不会自行拉伸以适应屏幕。我已经尝试过以下方法：1）[window setFrame：[[UIScreen mainScreen] bounds]]; 2) 在 xib 中设置 freeform/retina 4 英寸显示 3) 在启动时为窗口形式 xib 设置全屏 4) 删除 mainwindow.xib 和编码 tabbarcontroller 作为窗口的 rootviewcontroller

编辑： appDidFinishLaunching 中的代码：

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:    (NSDictionary *)launchOptions {
    //self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    [self.window setFrame:[[UIScreen mainScreen] bounds]];
   // [self tabbar];
    self.tabBarController.view.backgroundColor = [UIColor blackColor];
   // self.tabBarController.view.autoresizingMask = UIViewAutoresizingFlexibleBottomMargin;
    self.window.rootViewController = self.tabBarController;
[self.window makeKeyAndVisible];
return YES;
} 
```

MainWindow.xib 看起来像：![在此处输入图像描述](../Images/0d4353690147a75e5801e471466e2533.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:37:47.240

您的启动图像有错误的名称：而不是`default-568h@2x.png`它应该是`Default-568h@2x.png`（注意大写的 D）。文件名区分大小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T08:21:13.760

我的坏！..我正在使用一些 API 来显示/隐藏标签栏。这些 API 已硬编码为 y 指定的 480。哎呀！

# android - 在对话框中的共享选项中，我想添加我的自定义意图选项

> ID：13582537
> 
> 赞同：0
> 
> 时间：2012-11-27T10:47:34.247
> 
> 标签：android

我正在使用此代码在 android 应用程序中共享链接。

```
Intent i=new Intent(android.content.Intent.ACTION_SEND);
i.setType("text/plain");
i.putExtra(android.content.Intent.EXTRA_SUBJECT,"Subject test");
i.putExtra(android.content.Intent.EXTRA_TEXT, "extra text that you want to put");
startActivity(Intent.createChooser(i,"Share via")); 
```

但我想在对话框中添加自定义意图选项。

如果我的手机中有 twitter 和 facebook 应用程序，那么上面的代码给我分享选项 1) Twitter 2) Facebook 3) 蓝牙（如果支持 phn）

还有这个我想添加

4）Commnets（评论点击用户将进入我的评论活动）

我想做这样的分享。任何人都可以帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:43:38.703

您正在创建一个选择器。它包含回复 ACTION_SEND text/plain 的所有意图。

要将您的评论活动包含在该列表中，您需要在清单中创建一个意图过滤器，以匹配您的评论活动的操作。

或者（也更容易），如果您不希望您的评论活动响应外部 ACTION_SEND 文本/纯文本，您可以使用对该问题的响应：[基于已安装的 Android 包名称的意图选择器的自定义过滤](https://stackoverflow.com/questions/5734678/custom-filtering-of-intent-chooser-based-on-installed-android-package-name)：添加Intent.EXTRA_INITIAL_INTENTS 额外的意图。

# .net - 如何检测基类中更改的属性

> ID：13582542
> 
> 赞同：1
> 
> 时间：2012-11-27T10:47:44.723
> 
> 标签：.net, propertychanged

我创建了一个继承自的自定义控件`Label`，我添加了一个字符串属性`SecondLanguageText`。

我想检测`RightToLeft`基类 ( `Label`) 的属性何时更改为用新属性替换文本属性`SecondLanguageText`，我想通过添加属性更改`OnRightToLeftChanged`时触发的事件来做到这一点`RightToLeft`

# visual-c++ - DirectX 10 着色器通道描述符损坏

> ID：13582548
> 
> 赞同：0
> 
> 时间：2012-11-27T10:48:11.090
> 
> 标签：visual-c++, visual-studio-2012, directx-10

大家下午好。

我有一个奇怪的问题，我似乎无法弄清楚。

在以下代码段中

```
m_technique->GetPassByIndex(0)->GetDesc(&passDesc);

result = device->CreateInputLayout(polygonLayout,numElements,passDesc.pIAInputSignature,passDesc.IAInputSignatureSize,&m_layout); 
```

Direct X 调试输出提供以下信息：

```
First-chance exception at 0x753D37C3 (kernel32.dll) in GameTest.exe: 0xC0000005: Access     violation reading location 0xCCCCCCCC.
First-chance exception at 0x75B44B32 (KernelBase.dll) in GameTest.exe: 0x0000087A (parameters: 0x00000000, 0x0083E214, 0x0083D64C).
D3D11 CORRUPTION: ID3D10Device::CreateInputLayout: Third parameter is corrupt. [ MISCELLANEOUS CORRUPTION #15: CORRUPTED_PARAMETER3] 
```

一些我不确定的事情。在最后一行中，我看到了 D3D11 CORRUPTION，但我只使用了 D3D10 头文件和库。我在 Visual Studio 2012 中工作，并且安装了 Windows 8 SDK，因此可能会导致问题。

我不知道如何进行，任何建议将不胜感激。

# php - 将多个删除查询修改为尽可能少的更新查询？

> ID：13582552
> 
> 赞同：0
> 
> 时间：2012-11-27T10:48:28.467
> 
> 标签：php, mysql, codeigniter, query-optimization

我们目前有这个代码片段：

```
$this->db->where('id', $id)->delete($this->table);
$this->db->where('product_id', $id)->delete($this->clink);
$this->db->where('product_id', $id)->delete($this->tlink);

$variants = $this->db->select('id')->from($this->vlink)->where('product_id', $id)->get();
if ($variants->num_rows() !== 0) {

    //turns array(array('id' => 1), array('id' => 2)) into array(1,2)
    $variants = $variants->result_array();
    foreach ($variants as &$v) {
        $v = $v['id'];
    }

    $this->db->where('product_id', $id)->delete($this->vlink);
    $this->db->where_in('variant_id', $variants)->delete('cart_variant_values');
    $this->db->where_in('variant_id', $variants)->delete('cart_variant_images');
    $this->db->where_in('variant_id', $variants)->delete('cart_variant_documents');
} 
```

这转化为：

```
delete from $this->table where id = $id
delete from $this->clink where product_id = $id
delete from $this->tlink where product_id = $id

$variants = select id from $this->vlink where product_id = $id //e.g. (1,2) 

delete from $this->vlink where product_id = $id
delete from cart_variant_values where variant_id in $variants
delete from cart_variant_images where variant_id in $variants
delete from cart_variant_documents where variant_id in $variants 
```

现在我需要修改代码，而不是删除所有行，而是在所有行上设置`end_date`列。

我知道我可以修改它。留下相同数量的查询，但我希望作为更新而不是删除我可以将其缩小为更少的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:59:36.963

如果您担心删除查询的数量，您可以使用多表删除查询，通过它您可以将其减少为单个查询
[DELETE 语法](http://dev.mysql.com/doc/refman/5.0/en/delete.html)

`UPDATE`您也可以在[UPDATE 语法](http://dev.mysql.com/doc/refman/5.0/en/update.html)中实现多个表查询

# c# - 交易和事件在一起

> ID：13582553
> 
> 赞同：0
> 
> 时间：2012-11-27T10:48:30.753
> 
> 标签：c#, events

这更像是一个概念问题。我正在使用 ORM 编写一个基于事务的服务器-客户端应用程序。基本上这意味着每一层都知道如何使用事务块，例如这里是一个 Web 服务层实现：

```
public HandleTransaction<TReturn>(Action<TReturn>)
{
    bool opendByMe = false;

    // Some static transaction manager
    var transactionMgr = GetTransactionManager();

    try
    {
       // If not opened before me
       if(!transactionMgr.IsActive)
       {
           transactionMgr.BeginTransaction();
           opendByMe = true;
       }    

       // Run the action
       var returnValue = action();

       // If we opened the transaction then we should close it
       if(opendByMe)
       {
           transactionMgr.Commit();
       }

       return returnValue;
    }

    catch
    {
       if(opendByMe)
       {
          if(transactionMgr.IsActive)
          {
              // Rollback only if i opened the transaction
              transactionMgr.Rollback();  
          }  
       }

       // Else, bubble exception
       throw;
    }
}

public void ServiceWork1()  
{  
    // Subscribe to person event
    PersonBL.PersonChanged += HandlePersonChanged(Person pers);

    HandleTransaction(() =>  
          {  
                // BL actions are made in a bulk.. If one of them fails the transaction  
                // should be rolled back  
                PersonBL.CreatePerson("Jeff");  
                PersonBL.CreatePerson("John");  
                PersonBL.CreatePerson("Peter");  
              };)  
    }   

public void HandlePersonChanged(Person pers)
{
    // Notify some one
} 
```

这很好用，但现在我想向我的应用程序添加一些事件，即 PersonCreatedEvent。问题是将冒泡事件与事务集成。在上面的示例中，假设 PersonBL.CreatePerson() 方法会触发“PersonChanged”事件服务层..然后服务层处理这个事件并向客户端触发一个事件..但我不想在我确定事务已提交之前触发这些事件。BL 层不知道我的业务事务逻辑，因此它会在 CreatePerson 方法中触发事件。
是否有任何设计解决方案用于仅在我完成事务后堆叠/处理我订阅的事件？

为了简化我的问题：我只想在提交后批量执行 HandlePersonChanged ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:01:45.187

> 我只想在提交后批量执行 HandlePersonChanged。

根据理论，应在数据更改后触发事件。

第二种解决方案：

你可以实现一些队列结构。保存事件直到完成交易。在事务完成事件上，处理队列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:13:29.400

我最终构建了一个动作队列，它存储了在事务期间从不同组件触发的所有事件。
然后，在 ORM 中提交事务时（我有一个 OnCommit 事件），队列将一一触发它存储的所有事件。当然，如果触发 OnRollback 事件，则清除并重新启动操作队列。
这个“动作队列”在所有层都知道的基础设施层中。

# xml - 处理 xsl 中的特殊字符

> ID：13582556
> 
> 赞同：2
> 
> 时间：2012-11-27T10:48:39.120
> 
> 标签：xml, xslt, special-characters

我有一个 xml，其中包含一些特殊字符，例如`&`和`whitespaces`。
我想在 xsl 中处理这些特殊字符。
如何处理 xsl 中的特殊字符？

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="cpdhtml.xsl"?>
<pmd-cpd>
    <duplication lines="72" tokens="75">
        <file line="632" path="M:\PBA0039 & Code\Common\ssc\src\Main.c"/>
        <file line="1802" path="M:\PBA0039 & Code\Common\ssc\src\link1.c"/>
    </duplication>
</pmd-cpd> 
```

在这里你可以看到`&`。`path`转换 xml 时出错。
请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:51:44.777

您需要对[它们进行转义](https://stackoverflow.com/questions/1091945/where-can-i-get-a-list-of-the-xml-document-escape-characters)，就像在任何 XML 文档中一样。

的逃避`&`是`&amp;`。

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="cpdhtml.xsl"?>
<pmd-cpd>
    <duplication lines="72" tokens="75">
        <file line="632" path="M:\PBA0039 &amp; Code\Common\ssc\src\Main.c"/>
        <file line="1802" path="M:\PBA0039 &amp; Code\Common\ssc\src\link1.c"/>
    </duplication>
</pmd-cpd> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:51:45.757

我猜这些 XML 文件是由字符串连接生成的 .. 否则你不可能得到未编码的 XML。

摆脱特殊字符的唯一方法是使用任何编程语言，如 C#、VB.NET 并将文件作为字符串加载..
使用字符串操作操作..

```
string.Replace("&","&amp;"); 
```

**根据 Flynn1179 的评论更新：**

如果您害怕遇到问题，您的 XML 已经编码了一些字符.. 然后再添加一行：

```
string.Replace("&amp;amp;","&amp;"); 
```

那么更好的解决方案是修改生成此类 XML 文件的代码..

示例：使用 XML DOM 代替 String-concat

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T18:13:05.867

如果 XML 文件无效，则不能使用 XSLT 转换它。要在 xml 中保留 excaping 字符，可以在 XML 中使用 CDATA 部分。然后您可以安全地使用 XSLT 来选择那些 CDATA。查看以下关于如何使用 CDATA 来保持转义字符的帖子。

[http://vvratha.blogspot.com/2012/11/extracting-cdata-section-using-xslt.html](http://vvratha.blogspot.com/2012/11/extracting-cdata-section-using-xslt.html)

# flash - Flash AS2 加载文本问题

> ID：13582560
> 
> 赞同：0
> 
> 时间：2012-11-27T10:48:51.713
> 
> 标签：flash, actionscript

我正在尝试从 URL 加载一些文本，分解文本，然后将结果保存到变量中。这是我的 AS2 动作脚本的样子：

```
// Create the empty variables
var user_title = '';
var user_message = '';
var user_author = '';

// Load the string
var loadText = new LoadVars();
loadText.load("http://www.example.com/html_feed.php?md5=15d89cac6e77c8e3a592c05aee13bcb7");

// Save values to variables
loadText.onLoad = function(success) {
    if (success) {
        user_title = this.thetitle;
        user_message = this.theMessage;
        user_author = this.theAuthor;
    }
}; 
```

这就是它试图获取的页面的样子：

```
thetitle=Greetings&theMessage=Hello everyone!&theAuthor=Steve 
```

当我跟踪变量`user_title`时，`user_message`我`user_author`得到空白输出。这会让我怀疑我的`onLoad`部分脚本不起作用。

任何指针将不胜感激。CS5 上的 AS2 和 Flash Player 10。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:11:35.193

解决它。事实证明，该`crossdomain.xml`文件阻止我访问任何其他网站。代码很完美。

这就是文件的样子。它被放在我网站的根目录中。

```
<?xml version="1.0" ?>
<cross-domain-policy>
<allow-access-from domain="requestfromthisdomain.com" />
</cross-domain-policy> 
```

希望这可以帮助某人。

# javascript - JQM：在对话框中选择的行为不像它应该的那样？

> ID：13582561
> 
> 赞同：0
> 
> 时间：2012-11-27T10:48:53.000
> 
> 标签：javascript, jquery, jquery-mobile, select, dialog

我的对话框中的选择有这个问题。该对话框按预期工作，但当涉及到选择时，它会上升。

我选择的选项始终可见。单击它时在选择上方。并且在选择选项时或默认情况下位于页面底部。我尝试了几件事，但似乎只有一件有效：将菜单设置为默认值。由于此标记会根据操作系统而变化，因此我宁愿不使用它。JQM版本也很漂亮！至于库：我正在使用 JQuery 1.7 和 JQM 1.2 我也使用 JQM 样式表。

这是我的代码的概述：

```
<div data-role="page" id="preDialogPage" data-add-back-btn="true">
    <a href="#dialoog" data-role="button" id="btn" data-rel="dialog" data-theme="a">dialog</a>
</div>
<div data-role="dialog" id="dialoog" class="dialogPage">
    <div data-role="header" data-theme="a" class="ui-corner-top ui-header ui-bar-d">
        <h1 class="ui-title">Report an issue</h1>
    </div>
    <div data-role="content" data-theme="a" class="ui-corner-bottom ui-content ui-body-d">
        <select id="issueSelect" data-native-menu="false"> 
            <option value="carIssue">A car issue</option> 
            <option value="parkingIssue" >A parking problem</option> 
            <option value="appIssue">A app issue</option> 
            <option value="otherIssue">Other</option> 
        </select>
    </div>
</div>​ 
```

如果你们需要更多信息，请询问！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:03:20.050

您的问题似乎来自使用不正确的 CSS 样式表。例如，更换您使用 byt htis 的那个`http://jquerymobile.com/test/css/themes/default/jquery.mobile.css`将解决您的问题

# serial-port - 串口速度

> ID：13582562
> 
> 赞同：0
> 
> 时间：2012-11-27T10:48:56.150
> 
> 标签：serial-port, ppp

我尝试使用 ppp 通过串行端口将设备连接到我的 windows CE 设备，我发现另一个设备（arm-linux）不断改变其端口速度。

它应该是 38400 波特，但不是恒定的。

速度应该是恒定的？

我正在做的事情是

```
stty -F /dev/ttyS3 
```

和输出

```
speed 9600 baud;
intr = ^C; quit = ^\; erase = ^?; kill = ^U; eof = ^D; eol = <undef>;
eol2 = <undef>; start = ^Q; stop = ^S; susp = ^Z; rprnt = ^R; werase = ^W;
lnext = ^V; flush = ^O; min = 1; time = 0;
-brkint -imaxbel
-echo 
```

[一段时间以后]

```
speed 38400 baud; 
```

[一段时间以后]

```
speed 0 baud; 
```

在 Windows CE 设备中，我得到：

```
Error: 679 (Incorrect connection profile) 
```

关键是我的linux设备中的速度应该是恒定的吗？还是我应该检查其他想法。

# java - 多个继承的类，它们必须在单独的文件中吗？

> ID：13582563
> 
> 赞同：3
> 
> 时间：2012-11-27T10:48:56.590
> 
> 标签：java, oop, inheritance, methods

我正在实现一个系统，其中我有一个名为“MyMethod”的接口（名称是任意的），并且许多小类正在实现此方法（特别是为了覆盖它的“调用”方法），并且我正在使用多态性来创建这些实例到一个列表中。

问题是，因为我有很多实现该方法的小类，所以将这些类放在同一个 java 文件 (MyMethod.java) 中更容易，如下所示：

```
public interface MyMethod {
    public String call(foo param1, bar param2) throws SQLException, IOException;
}

class FooMethod1 implements MyMethod {
    @Override
    public String call(foo param1, bar param2) throws SQLException, IOException {
        //Do Something
    }
}

class FooMethod2 implements MyMethod {
    @Override
    public String call(foo param1, bar param2) throws SQLException, IOException {
        //Do Something Different
    }
} 
```

然而，将这些类放在同一个文件中，虽然更整洁，但似乎我违背了在 Java 中应该做的事情。

可以将这些类放在同一个文件中吗？还是应该将它们分别移动到单独的文件中？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T10:51:59.363

是的，可以将多个包私有类放在同一个文件中。

JLS 的相关部分是[§7.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-7.html#jls-7.3)

```
CompilationUnit:
    PackageDeclaration[opt] ImportDeclarations[opt] TypeDeclarations[opt]

TypeDeclarations:
    TypeDeclaration
    TypeDeclarations TypeDeclaration 
```

如您所见，一个编译单元可能有多个类型声明（或零个）。JLS 的另一个相关部分是[§7.6](http://docs.oracle.com/javase/specs/jls/se7/html/jls-7.html#jls-7.6)。它解释了从编译单元外部访问的那些类型声明与编译单元的文件名之间的相关性：

> 当且仅当包存储在文件系统中（[第 7.2 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-7.html#jls-7.2)）时，如果在由类型名称组成的名称下的文件中未找到类型，主机系统可能会选择强制限制它是编译时错误如果满足以下任一条件，则加上扩展名（例如 .java 或 .jav）：
> 
> *   该类型由声明该类型的包的其他编译单元中的代码引用。
>     
>     
> *   该类型被声明为公共的（因此可以从其他包中的代码中访问）。
>     
>     
> 
> *这个限制意味着每个编译单元最多只能有一个这样的类型。此限制使 Java 编译器可以轻松地在包中找到命名类。在实践中，许多程序员选择将每个类或接口类型放在自己的编译单元中，无论它是公共的还是被其他编译单元中的代码引用。*

显然，您的方法并不反对 Java，而且完全可以。但是，请注意，您的`MyMethod`实现可能在编译单元之外不可用`MyMethod.java`，具体取决于编译器实现。虽然，*javac*和*Eclipse 编译器*似乎都没有这个问题......

# vim - 从 `-c` 命令行参数调用命令在 Vim 中不起作用

> ID：13582565
> 
> 赞同：2
> 
> 时间：2012-11-27T10:49:03.520
> 
> 标签：vim, vim-fugitive

我正在使用[逃犯](https://github.com/tpope/vim-fugitive)插件。

它有一个命令（？）`Git!`，它执行一个命令并在一个新的缓冲区中打开结果。

例子：

```
:Git! diff --cached 
```

我有一个调用它的函数，然后做一些其他的事情。

我有这个命令声明：

```
command! Hello execute ":Git! diff" 
```

如果我`:Hello`从 vim 中运行，它应该可以正常工作。但是当我运行时`vim -c Hello`，它会抛出这个错误：

```
Not an editor command :Git! diff 
```

我怎样才能做到这一点？

（PS：我怎样才能让这个错误信息一直保持到我按下？它会出现大约一秒钟然后消失。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:15:39.657

原因是 Fugitive 只为文件受 Git 版本控制的缓冲区定义命令。准确地说，中的代码`plugin/fugitive.vim`只设置了检测 Git 控制下的文件的自动命令，然后才定义缓冲区本地命令。

所以至少你需要将一个 Git 控制的文件传递给你的 Vim 调用。如果这仍然不起作用，请尝试通过显式触发检测

```
:doautocmd User Fugitive 
```

# jquery - 如何使用 jQuery "onClick" 钩子和 event.preventDefault();

> ID：13582568
> 
> 赞同：2
> 
> 时间：2012-11-27T10:49:10.533
> 
> 标签：jquery, html, function, onclick

我正在尝试通过 id 在网页上导航到 div 标签，而页面不会自动滚动到 div。这是我所拥有的：

```
<a id="submission" href='#Home' class="bannerLink">Home</a> 
```

我有一个 jQuery 脚本：`behaviour.js`在 HTML 文件的头部导入，出现警告框，所以我知道它进入了函数。

在这个脚本中，我有：

```
$(function(){
    $("#submission").on("click", function(event){
        alert('HI');
        event.preventDefault();
        submitComment();
    });
}); 
```

我已经向 HTML 源添加了一个 onClick 事件，命名了一个要执行的特定函数，因为我已经在其中放置了一个警报，但是`event.preventDefault();`没有触发。

这是HTML：

```
<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" type="text/css" media="screen, projection" href="text.css"/>
    <link rel="stylesheet" type="text/css" media="screen, projection" href="page.css"/>
    <link rel="stylesheet" type="text/css" media="screen, projection" href="refineslide/refineslide.css"/>
    <link rel="stylesheet" href="refineslide/refineslide-theme-dark.css" />
    <link rel="stylesheet" href="reveal/reveal.css">
    <script src="jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="behaviour.js"></script>

    <!--
        *
        * ANIMTED BUTTNONS SRC HERE
        * NOT BY ME
        *
    -->

    <link rel="stylesheet" href="animatedbuttons/buttons.css">

    <!--
        *
        * KWICKS SRC HERE
        * NOT BY ME
        *
    -->

    <link rel='stylesheet' type='text/css' href="kwicks/jquery.kwicks.css" />
        <style type='text/css'>
            .kwicks {
                width: 515px;
                height: 100px;
            }
            .kwicks > li {
                width: 125px;
                height: 100px;
                /* overridden by kwicks but good for when JavaScript is disabled */
                margin-left: 5px;
                float: left;
            }
        </style>

    <!-- Including the Lobster, Arvo, Allan & PT Sans fonts from Google's Font Directory -->
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Lobster" />
    <link rel="stylesheet" href='http://fonts.googleapis.com/css?family=Arvo' />
    <link rel="stylesheet" href='http://fonts.googleapis.com/css?family=PT+Sans' />
    <link rel="stylesheet" href='http://fonts.googleapis.com/css?family=Allan:bold' />

</head>

<body>

    <!-- START BANNER DIV -->

    <div class="divBanner">

            <a href="updatelog/index.php" class="bannerLink">Update Log!</a>
            <a id="submission" href='#Home' onClick="test();" class="bannerLink">Home</a>

    </div>

    <!-- END BANNER DIV -->

    <!-- START Center page container -->
    <div class="divCenter">

        <!-- KWICKS SET -->
        <div class="kwicksOutsideContainer">
            <div class="kwicksInsideContainer nudge">
                <ul class='kwicks kwicks-horizontal'>
                        <li id='panel-1'>
                            <div class="outerPanelDiv">
                                <div class="innerPanelDiv">
                                    <a href='#Events' class="menuLink">Events</a>
                                </div>
                            </div>
                        </li>
                        <li id='panel-2'>
                            <div class="outerPanelDiv">
                                <div class="innerPanelDiv">
                                    <a href='#Committee' class="menuLink">Committee</a>
                                </div>
                            </div>
                        </li>
                        <li id='panel-3'>
                            <div class="outerPanelDiv">
                                <div class="innerPanelDiv">
                                    <a href='#Sponsors' class="menuLink">Sponsors</a>
                                </div>
                            </div>
                        </li>
                        <li id='panel-4'>
                            <div class="outerPanelDiv">
                                <div class="innerPanelDiv">
                                    <a href='#About' class="menuLink">About</a>
                                </div>
                            </div>
                        </li>
                </ul>
            </div>
        </div>
        <!-- END KWICKS SET -->

        <!-- SLIDER SET -->
        <div class="sliderContainer">
            <br /><br />
            <ul class="rs-slider">
                <li><img src="slide_img/img1.jpg" alt="" /></li>
                <li><img src="slide_img/img2.jpg" alt="" /></li>
                <li><img src="slide_img/img3.jpg" alt="" /></li>
            </ul>

        </div>
        <!-- END SLIDER SET -->

        <div class="divHead">
            <div class="welcomeMessage"></div>
            <div class="bookmarkRibbon"></div>
            <div class="welcomeBox nudge">
                <a href="#" data-animationspeed="650" data-reveal-id="myModal" class="welcomeW">W</a>
            </div>
            <div class="kccLogo"></div>
        </div>

        <!-- START DIV BODY -->

        <div class="divBody">

            <!-- START DIV HOME -->

            <div id='Home'>

            <!-- START LEFT SIDE -->

            <div class="rightContainer">

                <div class="rightContainerHead">
                    <ul class="webHeading">
                        <li>KCC Events!</li>
                    </ul>
                </div>

                <div class="rightSliderContainer">
                    <ul class="rs-slider2">
                        <li><img src="slide_img_event/img1.jpg" alt="" /></li>
                        <li><img src="slide_img_event/img2.jpg" alt="" /></li>
                    </ul>
                </div>
            </div>  

            <!-- END LEFT SIDE -->  

            <!-- START RIGHT SIDE -->

            <div class="leftContainer">

                <!-- START TOP -->
                <div class="topLeft">

                    <ul class="webHeadingQuestion">
                        <li>What Is KCC?</li>
                    </ul>

                    <div class="tucked-corners">
                        <div class="top-corners"></div>

                        <p class="webText">

                                KCC, or Korean Cultural Club, is a club formed during 2011 at UWA. With a passionate interest in Korean culture you can expect a full Korean experience with us. Our aim is to spread Korean culture and immerse other students in it. We do this through our events, chill sessions and activities.

                            <br><br>

                            KCC is rapidly growing, so jump right in and join!

                        </p>

                        <div class="bottom-corners"></div>
                    </div>

                    <!--

                    <div class="topLeftTextContainer">

                        <p class="webText">

                            KCC, or Korean Cultural Club, is a club formed during 2011 at UWA. With a passionate interest in Korean culture you can expect a full Korean experience with us. Our aim is to spread Korean culture and immerse other students in it. We do this through our events, chill sessions and activities.

                        <br><br>

                        KCC is rapidly growing, so jump right in and join!

                        </p>

                    </div>

                    -->

                </div>
                <!-- END TOP -->

                 <!-- START MIDDLE -->

                <div class="middleLeft">
                    <a href="#" class="button kcc medium">Find Out More</a>
                </div> 

                 <!-- END MIDDLE -->

                <div class="bottomLeft"></div> 

            </div>

            <!-- END RIGHT SIDE -->

            </div>

            <!-- END DIV HOME -->

            <!-- START DIV EVENTS -->

            <div id='Events'>

            </div>

            <!-- END DIV EVENTS -->

        </div>

        <!-- END DIV BODY -->

    </div>
    <!-- END Center page container -->

    <!-- MODAL HERE -->
        <div id="myModal" class="reveal-modal">

            <!-- START NOTEPAD HERE -->
            <div class="notepadTop">
                <p class="notepadTitle">Hey There!</p>
            </div>

            <div class="notepadMiddle">
                <div class="notepadMargin"></div>
                <p class="notepadText">

                    We need to sort some things out before we start.

                    <br><br>

                    This site uses the Webkit layout engine and will <span class="notepadHighlight">only work with the following browsers:</span>

                </p>

                <ul class="notepadList">
                    <li>Google Chrome</li>
                    <li>Safari</li>
                </ul>

                <p class="notepadTextTwo">

                    No, Firefox is not 100% supported because it doesn't use Webkit. Internet Explorer doesn't work at all.

                    <br><br>

                     <span class="notepadHighlight">The menu is above the image slider</span> and you can show this item again by clicking the blue "W", next to the red ribbon.

                </p>
            </div>

            <div class="notepadBottom">

                <p class="notepadTextFooter">Enjoy!</p>

            </div>
            <!-- END NOTEPAD HERE -->

             <a class="close-reveal-modal">&#215;</a>
        </div>
    <!-- END MODAL -->

    <!-- 
        *
        * SLIDER CALLS
        *
     -->

    <script src="refineslide/jquery.refineslide.min.js"></script>

    <script>
    $(document).ready(function () {
        $('.rs-slider').refineSlide({
            transition         : 'random',
            transitionDuration : 1000,
            autoPlay           : true,
            keyNav             : false,
            delay              : 3000,
            controls           : null
        });
    });
    </script>

    <script>
    $(document).ready(function () {
        $('.rs-slider2').refineSlide({
            transition         : 'cubeV',
            transitionDuration : 1000,
            autoPlay           : false,
            keyNav             : false,
            delay              : 4000,
            controls           : 'arrows'
        });
    });
    </script>

    <!-- 
        *
        * KWICKS CALLS
        *
     -->

    <script src='kwicks/jquery.kwicks.js' type='text/javascript'></script>
        <script type='text/javascript'>
            $(function() {
                $('.kwicks').kwicks({
                    size: 125,
                    maxSize : 250,
                    spacing : 5,
                    behavior: 'menu'
                });
            });
    </script>

    <!-- 
        *
        * REVEAL CALLS
        *
     -->

    <script src="reveal/jquery.reveal.js" type="text/javascript"></script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T08:51:40.897

删除`onClick="test();"`并添加此脚本

```
<script>
$(document).ready(function() {
    $("#submission").on("click", function(event){
        alert('HI');
        event.preventDefault();
    }); 
});
</script> 
```

# c++ - 提升 shared_ptr 复制问题

> ID：13582570
> 
> 赞同：0
> 
> 时间：2012-11-27T10:49:19.613
> 
> 标签：c++, boost-asio, shared-ptr

我的问题是如何将智能指针分配给另一个？我也不确定如何绕过临时变量？

```
typedef boost::asio::ip::tcp::socket            TBoostSocket;
typedef boost::shared_ptr<TBoostSocket>        TSocket;

TSocket createSocket(const IpcNode::TPath& a_path) {

    TSocket socket(new TBoostSocket(*this->getIoservice()));
    return socket;

} 
```

//在另一个函数中

```
TSocket result();

result= createSocket(a_path); 
```

// 编译器输出
错误：获取临时地址 [-fpermissive]

41：错误：分配函数 'IPC::TcpServices::TSocket IPC::result() 无法将 'TSocket* {aka boost::shared_ptr >*}' 转换为 'TSocket() {aka boost::shared_ptr >() }' 在赋值

我知道我遗漏了一些明显的东西，我现在就可以看到

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:52:12.363

以下声明了一个函数（不带参数并返回`TSocket`）：

```
TSocket result(); 
```

将其更改为：

```
TSocket result; 
```

# bash - 运行 tethereal 的 BASH 脚本

> ID：13582573
> 
> 赞同：1
> 
> 时间：2012-11-27T10:49:30.877
> 
> 标签：bash

我正在寻找一个 bash 脚本的想法，该脚本运行 tethereal -w /path/to/file1.pcap 在有限或指定的时间内结束并使用稍微不同的输出文件名重新启动 cmd，所以第二个文件它写入类似于 file2.pcap

我正在考虑某种循环，但由于我的脚本编写经验有限，我不确定如何最好地做到这一点。

感谢所有帮助非常感谢

农家乐

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:58:36.390

```
timeout_const=10
for i in {1..5}
do
    timeout $timeout_const tethereal -w /path/to/file${i}.pcap
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:11:22.517

```
timeout=10 
for i in `seq 1 N` # notice that N we'll be your upper bound
do
  tethereal -w /path/to/file${i}.pcap &
  sleep $timeout;
  PID=`ps aux | grep tethereal | awk '{print $1}'`;
  kill -9 $PID;
done 
```

# .htaccess - 是否可以根据静态文件 URL 中的日期使用 .htaccess 进行重定向？

> ID：13582574
> 
> 赞同：0
> 
> 时间：2012-11-27T10:49:30.927
> 
> 标签：.htaccess, date, static-files

我有一组图像应该在未来的特定日期逐步提供，直到整个图像都可见。图像具有它们应该作为文件名可见的日期。任何对互联网运作有一些了解的人都可以找出文件名中的模式，并在预定日期之前查看“未来”图像。

我希望用 .htaccess 解决这个问题，以防止每次访问图像时都启动脚本。你认为有可能吗？

服务器的语言环境是我唯一关心的。

谢谢 ：）

**编辑：**

例如，在发布此消息时，我希望此图像能够正确投放：

```
http://domain.com/images/2012-11-20.jpg 
```

但我希望这个返回一个 404、401 或其他任何东西，就像它在未来一样：

```
http://domain.com/images/2012-12-06.jpg 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:54:18.167

`src`您可以动态地将固定的图像源重写为正确的日常位置，而不是让代码更改图像的位置：

```
RewriteCond %{REQUEST_URI} /my/image.jpg
RewriteRule (.*) /images/date/%{TIME_YEAR}-%{TIME_MON}-%{TIME_DAY}.jpg [L] 
```

这有点隐蔽的安全性，并且您失去了长期缓存图像的能力（因为第二天，您会希望浏览器从旧路径加载新图像），但它可能适合您的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:59:22.287

我似乎没有完全理解你的问题，但是这个关于依赖于时间的重写的链接可能会让你朝着正确的方向前进。

[http://www.askapache.com/htaccess/time_hour-rewritecond-time.html](http://www.askapache.com/htaccess/time_hour-rewritecond-time.html)

（我绝不隶属于这个网站！）

# ruby-on-rails - 带有关联的 Ruby on Rails Activemodel

> ID：13582575
> 
> 赞同：3
> 
> 时间：2012-11-27T10:49:33.703
> 
> 标签：ruby-on-rails, associations, activemodel

实际上，我在计算机科学方面面临一些艰巨的练习（我认为对我来说很难，哈哈）。

我们正在用 Ruby on Rails 做一些基本的事情，我必须打开一个 csv 文件来获取关于我的“用户”模型的更多信息，这是一个普通的 rails 脚手架。

所以目前我在 users_controller.rb 文件中打开 csv 文件并搜索正确的行并将它们添加到实例变量中。

但我想知道我是否可以编写一个类似于 ActiveRecord 模型的类。所以我将代码更改为使用 ActiveModel。但正如我在一些谷歌搜索结果中看到的，ActiveModel 不能使用 ActiveRecord 之类的关联。但拥有它们会很棒。

所以我希望你能帮助我。如何为我的模型提供 ActiveRecors 之类的关联？

问候梅兰妮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:03:43.230

将 CSV 文件表示为模型是绝对正确的，因为它是数据。

然而，尝试合并 Active Model 听起来很棘手，几乎可以肯定需要大量的黑客攻击或猴子补丁。

除非你真的需要与其他模型的关联，否则我会`ActiveRecord::Base`在模型目录中创建一个独立的类（即不继承自 ），并将解析 CSV 的逻辑放在那里：

```
class User
    attr_accessor :name, :email, ...

    def initialize(name,email,...)
        # set data
    end

    def self.find(param_for_search)
        # Parse CSV file, find line you want
        # return a User instance
        self.new(name, email)
    end
end 
```

我不确切知道您的系统是如何工作的，但是通过这种方式，您可以使其行为方式类似于 Active Model 的东西。您可以添加类似的类方法，每个实例方法代表一个 CSV 文件行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:57:55.537

每次，当您创建自己的模型时，它都是 ActiveRecord 的继承：

```
class Project < ActiveRecord::Base
 attr_accessible :content, :name, :user
end 
```

然后你可以告诉你的模型有很多（比方说）项目的任务，这会创建一个关联。请提供您应用程序逻辑的示例。

这是来自[RailsCasts.com](http://railscasts.com/episodes/219-active-model)的引述：

“在 Rails 3 中，Active Record 的非数据库功能被提取到 Active Model 中。这使您可以清晰地向无表模型添加验证和其他功能。” 还有一个很好的描述如何通过添加模块在模型中添加功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T16:01:44.480

我知道，使用 ActiveRecord 来使用非数据库源是很困难的，但我认为如果我能写出这样的东西会非常迷人：

```
user.worktimes.first.value 
```

在我看来，获取信息就像它是一个数据库表。我访问 railscast.com 并找到了讨论这个问题的一集。但我想更深入地挖掘这一点。我可以阅读更多资源吗？

据我了解，ActiveModel 不支持关联？我想知道为什么没有将关联转移到 ActiveModel，因为它是一个非常有用的东西。:)

所以这是我的代码，我正在处理：

用户模型：

```
class User < ActiveRecord::Base
   attr_accessible :department_id, :name
   belongs_to :department 
end 
```

部门型号：

```
class Department < ActiveRecord::Base
  attr_accessible :name
  has_many :users
end 
```

这是我创建的 CSV 模型：

```
class Worktime
    attr_accessor :user_id,:date,:value

    def initialize(params)
        dir = Rails.root.join('app', 'models', 'worktimes.csv').to_s
        source = File.open(dir,'r')
        while(line=source.gets)
            data = line.split(';')

            if data[0] = params[:user_id] && data[1] = params[:date]
                @value = data[2]    
            end
        end
    end
end 
```

我非常感谢您的帮助，因为这是我第一次使用 Rails。

# asp.net-mvc - 使用 $.post 在 MVC 中调用操作方法，然后返回一个对象以进行编辑不起作用

> ID：13582578
> 
> 赞同：0
> 
> 时间：2012-11-27T10:49:35.143
> 
> 标签：asp.net-mvc, jquery

我正在尝试使用 jQuery 在 MVC4 应用程序中调用操作方法。我正在使用fancybox中显示的编辑表单上的按钮：

```
<input type="button" value="Approve" id="Approve" /> 
```

我`$.post`在这个按钮上使用 jquery 点击

```
$("#Approve").click(function () {
    debugger;
    var ID = $("#AjaxGrid tbody tr:first").attr("data-pkey");
    debugger;
    var postParams = { Id: ID }
    $.post('@Html.Raw(Url.Action("Approve"))', postParams)
        .fail(function () {
            alert("error occured while Approving");
        }); 
}); 
```

在控制器中，以下是我的操作方法：

```
[HttpPost]
public ActionResult Approve(long id)
{
    Evaluation evaluation = db.EvaluationRepository.GetByID(id);
    evaluation.EvaluationStatusID = Convert.ToInt32(EvaluationStatusType.Approved);
    return PartialView(evaluation);
} 
```

但我总是得到相同的结果，即`error occured while Approving`

谁能帮我找出问题所在？

**在浏览器上使用 F12 出现此错误**

```
Failed to load resource: the server responded with a status of 500 (Internal Server Error) 
```

* * *

**还有这个烦人的细节**

“/”应用程序中的服务器错误。

参数字典包含“CubicHRMWeb.Areas.Employees.Controllers.EvaluationController”中方法“System.Web.Mvc.ActionResult Approve(Int64)”的不可为空类型“System.Int64”的参数“id”的空条目。可选参数必须是引用类型、可空类型或声明为可选参数。参数名称：参数

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.ArgumentException：参数字典包含“CubicHRMWeb.Areas”中方法“System.Web.Mvc.ActionResult Approve(Int64)”的不可为空类型“System.Int64”的参数“id”的空条目。员工.控制器.评估控制器'。可选参数必须是引用类型、可空类型或声明为可选参数。参数名称：参数

源错误：

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：

[ArgumentException：参数字典包含“CubicHRMWeb.Areas.Employees.Controllers”中方法“System.Web.Mvc.ActionResult Approve(Int64)”的不可为空类型“System.Int64”的参数“id”的空条目。评估控制器”。可选参数必须是引用类型、可空类型或声明为可选参数。参数名称：parameters] System.Web.Mvc.ActionDescriptor.ExtractParameterFromDictionary(ParameterInfo parameterInfo, IDictionary `2 parameters, MethodInfo methodInfo) +654635 System.Web.Mvc.<>c__DisplayClass1.<Execute>b__0(ParameterInfo parameterInfo) +18 System.Linq.WhereSelectArrayIterator`2.MoveNext() +85 System.Linq.Buffer `1..ctor(IEnumerable`1 source) +217 System.Linq.Enumerable.ToArray(IEnumerable `1 source) +78 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +133 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod（ControllerContext controllerContext，ActionDescriptor actionDescriptor，IDictionary `2 parameters) +27 System.Web.Mvc.Async.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41() +28 System.Web.Mvc.Async.<>c__DisplayClass8`1.b__7（IAsyncResult*) +12 System.Web.Mvc.Async.WrappedAsyncResult `1.End() +57 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult) +50 System.Web.Mvc.Async.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33() +58 System.Web.Mvc.Async.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49() +237 System.Web.Mvc.Async.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult) +12 System.Web.Mvc.Async.WrappedAsyncResult`1.End() +57 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult) +50 System.Web.Mvc.Async.<>c* _DisplayClass2a.b_ *20() +24 System.Web.Mvc.Async.<>c* _DisplayClass25.b_ *22(IAsyncResult asyncResult) +126 System.Web.Mvc.Async.WrappedAsyncResult `1.End() +57 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeAction(IAsyncResult asyncResult) +45 System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__18(IAsyncResult asyncResult) +14 System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +25 System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62 System.Web.Mvc.Controller。 EndExecuteCore(IAsyncResult asyncResult) +61 System.Web.Mvc.Async.<>c* _DisplayClass4.b__3(IAsyncResult ar) +25 System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62 System.Web.Mvc.Controller.EndExecute(IAsyncResult asyncResult) +49 System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.EndExecute(IAsyncResult asyncResult) +10 System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__3(IAsyncResult asyncResult) +28 System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +25 System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62 System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +49 System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult 结果) +9 System.Web.CallHandlerExecutionStep.System .Web.HttpApplication.IExecutionStep.Execute() +8862381 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184

版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.225

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:11:16.857

HTML：

```
<input type="button" value="Approve" id="Approve" data-action="@Url.Action("Approve")" /> 
```

JS：

```
Number.tryParseInt = function(value) {
    return value.toString().match(/^(\d)/) != null;
}

Number.tryParseFloat = function(value) {
    return value.toString().match(/^(\d|\d\.|\.\d)/) != null;
}

$("#Approve").click(function () {

    var 
        id = $("#AjaxGrid tbody tr:first").data('pkey'),
        postParams = { id: 0 };

    if (!Number.tryParseFloat(id)) { 
        alert('id "' + id + '" is not a number');
        return false;
    }

    postParams.id = parseInt(id);

    $.post($(this).data('action'), postParams)
        .done(function(data) {
            alert('ok Approving: ' + data.EvaluationStatusID);
        })
        .fail(function () {
            alert('error occured while Approving');
        }); 

    return false;
}); 
```

C＃：

如果不使用返回，为什么要使用 ActionResult？

```
[HttpPost]
public JsonResult Approve(long id)
{
    Evaluation evaluation = db.EvaluationRepository.GetByID(id);
    evaluation.EvaluationStatusID = Convert.ToInt32(EvaluationStatusType.Approved);

    return Json(evaluation);
} 
```

需要更多的 '2.147.483.647'？，如果继续出现错误，请尝试使用 int：

```
[HttpPost]
public JsonResult Approve(int id)
{
    Evaluation evaluation = db.EvaluationRepository.GetByID(id);
    evaluation.EvaluationStatusID = Convert.ToInt32(EvaluationStatusType.Approved);

    return Json(evaluation);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:13:50.023

从您的堆栈跟踪看来`id`，您的 AJAX 调用的参数为`data-pkey`空，对于所选元素为空。

如果没有看到您的 HTML，我无法告诉您为什么会这样，但您需要查看并更改`$("#AjaxGrid tbody tr:first")`选择器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T08:55:57.503

我认为存在循环引用问题

我的模特班

```
 public class Evaluation
{ 
   [Key]
   public int ID {get; set;} 
   public int UserID {get; set;} //whose evaluation is due 
   public DateTime EvaluationDueOn {get; set;} 
   public DateTime EvaluatedOn {get; set;}
   public decimal evaluationAmount {get; set;} 
   public string  comments {get; set;}
   public string  ApproverID {get; set;} //(userid of staff doing approval) 
   public int EvaluationStatusID { get; set; }

   public virtual Users EvaluatedUser { get; set; }

   public virtual Users ApprovingUser { get; set; }
} 
```

使用导航属性，如

```
public virtual Users EvaluatedUser { get; set; 

public virtual Users ApprovingUser { get; set; } 
```

并且由于此循环引用而发生序列化问题

# php - 用mysql填充的多动态组合框

> ID：13582580
> 
> 赞同：0
> 
> 时间：2012-11-27T10:49:41.730
> 
> 标签：php, javascript, jquery, combobox

数据库

```
$mySql = "SELECT field FROM fields";
$result = mysql_query($mySql); 
```

html:

```
<select id="combo1" class="combo" data-index="1">
<option></option>
<?php
while($r = mysql_fetch_array($result))
{
echo "<option value=" .$r['field '] . ">".$r['field '] ."</option>";
}
?>
</select>
<div id="combos"></div> 
```

jQuery

```
<script type="text/javascript">
$('body').on('change', '.combo', function() {
var selectedValue = $(this).val();
if (selectedValue !== '' && $(this).find('option').size() > 8) {
var newComboBox = $(this).clone();
var thisComboBoxIndex = parseInt($(this).attr('data-index'), 10);
var newComboBoxIndex = thisComboBoxIndex + 1;
$('.parentCombo' + thisComboBoxIndex).remove();
newComboBox.attr('data-index', newComboBoxIndex);
newComboBox.attr('id', 'combo' + newComboBoxIndex);
newComboBox.addClass('parentCombo' + thisComboBoxIndex);
newComboBox.find('option[val="' + selectedValue + '"]').remove();
$('#combos').append(newComboBox);
}
});
</script> 
```

问题：此代码使用我的数据库表字段创建组合框。我的问题是一旦选择一次就不能重复字段。代码中的错误在哪里？或者我在想什么？

它应该是这样的：http: [//jsfiddle.net/JaVVe/1/](http://jsfiddle.net/JaVVe/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:01:21.053

问题是您正在检查`size() > 8`，因此必须有 8 个以上的选项才能正常工作。将其更改为`size() > 2`. 除此之外，您的代码将起作用。

另一个问题是您没有将选项值用引号括起来。添加引号：

```
echo "<option value=\"" .$r['field'] . "\">".$r['field'] ."</option>"; 
```

字段后还有一个空格：

```
 $r['field ']
 //       ^ here, remove that 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:16:25.273

现场示例是

```
<option val="Opt1"> 
```

在您的 html 中，它是`value`属性，而不是`val`您需要更改

```
newComboBox.find('option[val="' + selectedValue + '"]').remove(); 
```

到

```
newComboBox.find('option[value="' + selectedValue + '"]').remove(); 
```

# asp.net - 报告已加载但显示空白页

> ID：13582582
> 
> 赞同：1
> 
> 时间：2012-11-27T10:50:14.037
> 
> 标签：asp.net, vb.net, iis-7, reportviewer

我在[这里](http://social.msdn.microsoft.com/Forums/en-IE/sqlreportingservices/thread/517c42dd-afad-4f65-be86-f7900a6c9fcc)报告了确切的问题，一切似乎都很好。这是我的 web.config 部分：

```
<httpHandlers>
  <remove verb="*" path="*.asmx" />
  <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  <add verb="*" path="Reserved.ReportViewerWebControl.axd" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
  <add verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" validate="false" />
  <add verb="*" path="Reserved.ReportViewerWebControl.axd" type ="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
</httpHandlers>
<handlers>
  <remove name="WebServiceHandlerFactory-Integrated" />
  <remove name="ScriptHandlerFactory" />
  <remove name="ScriptHandlerFactoryAppServices" />
  <remove name="ScriptResource" />
  <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  <add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  <add name="ScriptResource" preCondition="integratedMode" verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  <add name="ReportViewerWebControlHandler" preCondition="integratedMode" verb="*" path="Reserved.ReportViewerWebControl.axd" type="Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
</handlers> 
```

我得到一个空白页面，当我查找页面的源代码时看到此错误消息：

```
<h2>
        Report Viewer Configuration Error
</h2><p>The Report Viewer Web Control HTTP Handler has not been registered in the application's web.config file.  Add &lt;add verb=&quot;*&quot; path=&quot;Reserved.ReportViewerWebControl.axd&quot; type = &quot;Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&quot; /&gt; to the system.web/httpHandlers section of the web.config file, or add &lt;add name=&quot;ReportViewerWebControlHandler&quot; preCondition=&quot;integratedMode&quot; verb=&quot;*&quot; path=&quot;Reserved.ReportViewerWebControl.axd&quot; type=&quot;Microsoft.Reporting.WebForms.HttpHandler, Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&quot; /&gt; to the system.webServer/handlers section for Internet Information Services 7 or later.</p> 
```

任何人？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:55:00.723

当我遇到这个问题时，我卸载了我安装的每个版本的 ReportViewer，然后重新安装了 ReportViewer-2010 并重新配置了 web.config。你试过这个吗？

另外，您是否在 UserControl 中加载 ReportViewer？像这样，

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<NMBSReportViewer.Models.SelectedReport>" %>
<%@ Register Assembly="Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" Namespace="Microsoft.Reporting.WebForms" TagPrefix="rsweb" %>
<form id="Form1" runat="server">
<asp:ScriptManager ID="ScriptManager1" runat="server" />
<rsweb:ReportViewer ID="ReportViewer1" runat="server" AsyncRendering="false" Height="480px" Width="100%" />
</form>
<script runat="server">
    /* Prepare the ReportViewer Control to be Displayed */
    private void Page_Load(object sender, System.EventArgs e)
    {
        //Create/Get the Connection String
        String ConnectionString = @"Data Source = localhost\SQLEXPRESS; Initial Catalog = School; Trusted_Connection=True;";

        //Create the Connection
        System.Data.SqlClient.SqlConnection DbConn = new System.Data.SqlClient.SqlConnection(ConnectionString);

        //Open the Connection
        DbConn.Open();

        //Reset Control.
        ReportViewer1.Reset();

        //Load Report Definition. 
        //Mine is from a string to load from a file do the following:
        //ReportViewer1.LocalReport.ReportPath = "FilePath";
        System.IO.StringReader reader = new System.IO.StringReader(this.Model.ReportDefinition);
        ReportViewer1.LocalReport.LoadReportDefinition(reader);

        //Query String
        String QueryString = this.Model.Query[i];

        //Create the SqlCommand Object
        System.Data.SqlClient.SqlCommand QueryCommand = new System.Data.SqlClient.SqlCommand(QueryString, DbConn);

        //Use the SqlCommand to create the DataReader Object.
        System.Data.SqlClient.SqlDataReader QueryCommandReader = QueryCommand.ExecuteReader();

         //Create the Datatable.
         System.Data.DataTable DataT = new System.Data.DataTable();

         //Load the Data into the Table.
         DataT.Load(QueryCommandReader);

         //Load Report Data.
         ReportViewer1.LocalReport.DataSources.Add(new ReportDataSource(dataSet.DataSetName, DataT));

        //Refresh Control.
        ReportViewer1.LocalReport.Refresh();
}
</script> 
```

# android - ToyVpn：无法设置 vpn 服务器并连接到它，也没有规则出现 nat 表

> ID：13582584
> 
> 赞同：1
> 
> 时间：2012-11-27T10:50:25.163
> 
> 标签：android, linux, vpn, iptables, nat

我正在尝试在我的 PC 上设置 VPN 服务器。我给出了在 ToyVpnServer 文件中给出的命令，但是在给出最后一个命令后终端看起来卡住了，从 Android 手机我使用 ToyVpn 连接到它，但它没有连接......

命令如下：

```
echo 1 > /proc/sys/net/ipv4/ip_forward
iptables -t nat -A POSTROUTING -s 10.0.0.0/8 -o eth0 -j MASQUERADE #I tried this command with both "-A" and "-I" but nothing appears in the nat table :(
ip tuntap add dev tun0 mode tun
ifconfig tun0 10.0.0.1 dstaddr 10.0.0.2 up
./a.out tun0 8000 test -m 1400 -a 10.0.0.2 32 -d 8.8.8.8 -r 0.0.0.0 0 
```

在 ToyVpnClient 中，我给出了我的 PC 的 IP 地址，例如 192.168.2.xxx/24。并且手机的IP地址也是192.168.2.xxx/24。

我刚刚在 nat 表中输入的规则也没有出现在那里。我尝试了“-I”和“-A”。

我对linux、iptable和服务器不太熟悉。这里出了什么问题？

（我也尝试通过本教程设置服务器， [http://cviorel.easyblog.ro/2009/02/09/how-to-set-up-a-vpn-server-on-ubuntu/](http://cviorel.easyblog.ro/2009/02/09/how-to-set-up-a-vpn-server-on-ubuntu/)，但我得到了以下错误（[https://askubuntu.com/questions/222495/firewall-stopped-and-disabled-on-system-startup-error-problem-running-ufw-init](https://askubuntu.com/questions/222495/firewall-stopped-and-disabled-on-system-startup-error-problem-running-ufw-init)）：

```
Firewall stopped and disabled on system startup
ERROR: problem running ufw-init 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T10:05:52.907

简单地说，由于 ToyVpn 使用 PPTP VPN，我猜你的防火墙阻止了初始化连接所需的 TCP 通道或 GRE 通道。为了保护连接和您的服务器机器，我建议打开端口 TCP:1723 。

如果问题解决，请尝试打开此端口并启用防火墙。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T14:57:43.080

这个问题就解决了。

我试图在这个答案的帮助下设置 VPN 服务器，[https://askubuntu.com/questions/56559/how-do-i-set-up-a-pptp-vpn-on-my-own-ubuntu-服务器/58558#58558](https://askubuntu.com/questions/56559/how-do-i-set-up-a-pptp-vpn-on-my-own-ubuntu-server/58558#58558)。

为了遵循这个过程，我禁用了 UFW 防火墙。

我不知道具体发生了什么变化，但最终 VPN 服务器已设置完毕，并且通过 Ubuntu 的 VPN 客户端我能够连接到它。所以，我重新打开了 TOyVpnServer 文件并给出了命令，这次它们起作用了。我能够在 nat 表中看到新规则（以前没有出现......），当我从手机连接到服务器时，它连接成功。

我对防火墙等不太了解......所以，根据我的理解，禁用 ufw 解决了这个问题。

我将不胜感激，如果有人可以更好地描述禁用 ufw 后发生的变化，或者如果 ufw 不是真正的原因，那么欢迎进行任何更正。

# database - 在 yii 中如何创建检索字段输入并将其与数据库字段进行比较

> ID：13582585
> 
> 赞同：-1
> 
> 时间：2012-11-27T10:50:23.757
> 
> 标签：database, yii

在 yii 中，我正在创建忘记密码功能。单击忘记密码按钮后，服务器将提供一个带有空白文本字段的 php paga 用于输入主电子邮件 ID。现在如何在控制器的方法中检索此电子邮件 ID，以及如何检查此电子邮件 ID 是否存在于数据库中。请帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:11:06.950

这将帮助您入门，您可以在控制器中放置一个类似的方法并创建一个带有密码字段的视图。

```
public function actionForgotPassword(){

  if(isset($_POST['email']{
    $record=User::model()->find(array(
      'select'=>'email',
      'condition'=>'email=:email',
      'params'=>array(':email'=>$_POST['email']))
    );

    if($record===null) {
      $error = 'Email invalid';
    } else {
      $newpassword = 'newrandomgeneratedpassword';
      $record->password = md5($newpassword );
      $record->save(); //you might have some issues with the user model when the password is protected for security
      //Email new password to user
    }
  }else{
    $this->render('forgetPassword'); //show the view with the password field
  }

} 
```

# c# - 将服务器端事件发送到网页的模式

> ID：13582587
> 
> 赞同：0
> 
> 时间：2012-11-27T10:50:37.560
> 
> 标签：c#, asp.net-mvc, event-handling

我想知道是否有任何设计模式允许将服务器端事件传递到网站？

我能想到的最好的办法是在触发事件时更新服务器上的某些状态，然后可能每隔一段时间通过 ajax 回调服务器以检查状态，并返回我需要的内容。这合适吗？有没有更好的方法来做到这一点？

我的应用程序是用 ASP.NET MVC4 编写的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:00:05.783

有几种方法可以处理这个问题，具体取决于您希望如何处理它以及您希望将哪些技术引入您的堆栈。

首先，定期对服务器上的控制器方法进行 ajax 调用以报告服务器的当前状态是非常好的，例如：如果在您的服务器上启动了一个长时间运行的任务，则通过控制器方法并定期轮询该方法是完全合理的。

另一种方法是使用一种称为 SignalR 的技术，它本质上允许您的服务器在您的客户端上调用 javascript 函数，我当然建议您研究一下。

小例子：

服务器：

```
 public class Chat : Hub 
  {
       public void Send(string message)
      {
          // Call the addMessage method on all clients            
          Clients.All.addMessage(message);
      }
  } 
```

客户：

```
<script src="http://code.jquery.com/jquery-1.8.2.min.js" type="text/javascript"></script>
<script src="Scripts/jquery.signalR-1.0.0-alpha2.min.js" type="text/javascript"></script>
<!--  If this is an MVC project then use the following -->
<!--  <script src="~/signalr/hubs" type="text/javascript"></script> -->
<script src="/signalr/hubs" type="text/javascript"></script>
<script type="text/javascript">
    $(function () {
        // Proxy created on the fly          
        var chat = $.connection.chat;

        // Declare a function on the chat hub so the server can invoke it          
        chat.client.addMessage = function (message) {
            $('#messages').append('<li>' + message + '</li>');
        };

        $("#broadcast").click(function () {
            // Call the chat method on the server
            chat.server.send($('#msg').val());
        });

        // Start the connection
        $.connection.hub.start();
    });
</script>

  <div>
    <input type="text" id="msg" />
<input type="button" id="broadcast" value="broadcast" />

<ul id="messages">
</ul>
  </div> 
```

上面的例子取自这里： [https ://github.com/SignalR/SignalR/wiki/QuickStart-Hubs](https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs)

SignalR 网站可以在这里找到： [http ://signalr.net/](http://signalr.net/)

我真的很喜欢 SignalR……它可能也会为你的程序员和用户提供最好的体验。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T10:54:42.567

听起来你应该看看[SignalR Project](http://signalr.net/)。这允许双向服务器通信。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T12:10:41.157

您可以使用长轮询/彗星等待服务器事件，这意味着您应该向服务器发送 ajax 请求并且 ajax 请求不立即执行，请求将等待服务器事件，直到超时到期。

或者，您可以使用这样的 ajax 调用服务器事件来侦听服务器的事件，而无需 signalR 框架，例如：

```
[SessionState(SessionStateBehavior.ReadOnly)]
    public class HomeController : Controller
    {
        static readonly ManualResetEvent Starter = new ManualResetEvent(false);
        public ActionResult Index()
        {
            return View();
        }

        public String RiseServerEvent()
        {
            Starter.Set();
            return "";
        }

        public async Task<String> WaitForServerEvent()
        {
            string contents = null;
            var result = Task.Factory.StartNew(() =>
            {
                var reg = ThreadPool.RegisterWaitForSingleObject
                             (Starter, (state, @out) =>
                             {
                                 contents = DateTime.Now.TimeOfDay.ToString();
                             }, "Some Data", -1, true);

                Starter.WaitOne(10000);   
                contents = DateTime.Now.TimeOfDay.ToString();
            });
            await result;
            return contents;
        }

    } 
```

# android - Android SDK(jar)中的数据保存

> ID：13582588
> 
> 赞同：0
> 
> 时间：2012-11-27T10:50:40.873
> 
> 标签：android

我正在为 GCM 创建 sdk（单个 jar 文件）。如何将数据保存在 jar 文件中？

我正在设置要在用户按下通知时启动的活动类，但是在调用意图服务时，我在启动活动中设置的活动类未定义。

CustomIntentService.java

```
public class CustomIntentService extends GCMBaseIntentService {

    @Override
    protected void onMessage(Context context, Intent intent) {
        long when = System.currentTimeMillis();
        NotificationManager notificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(R.id.icon, message, when);
        Intent notificationIntent = new Intent(context, PushManager.getActivity());
        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
        PendingIntent intent = PendingIntent.getActivity(context, 0, notificationIntent, 0);
        notification.setLatestEventInfo(context, title, message, intent);
        notificationManager.notify(0, notification);
    }
} 
```

PushManager.java

```
public final class PushManager {
    private Activity startupActivity;

    public void setActivity(Activity activity) {
        startupActivity = activity;
    }

    public Activity getActivity() {
        return startupActivity;
    }
} 
```

MainActivity.java

```
PushManager.setActivity(this); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T06:37:58.643

使用首选项解决了这个问题。

# javascript - 用javascript在浏览器中打开excel文件

> ID：13582589
> 
> 赞同：0
> 
> 时间：2012-11-27T10:50:50.020
> 
> 标签：javascript, html, excel, vbscript

我使用 Vbscript，我想在浏览器中打开 excel 文件，而不是将它们作为外部文件下载。有没有办法做到这一点？可以用javascript吗？它们可以在当前窗口的新幻灯片中打开

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:59:49.463

有两种方法可以在浏览器中打开 Excel 文档。

1.  有一个可以处理 Excel 的浏览器插件
2.  将数据转换为 HTML

后者需要 Excel 解析器。我不知道有任何现有的 JavaScript，因此您必须找到一个或编写一个。如果您查看另一种语言的开源实现并移植它，编写一个可能会更容易。

# ruby-on-rails-3 - @import 在子文件夹中的 SASS 文件中不起作用

> ID：13582597
> 
> 赞同：6
> 
> 时间：2012-11-27T10:51:31.273
> 
> 标签：ruby-on-rails-3, gem, sass

## 设置舞台

我有以下样式表结构：

```
/stylesheets   
 |
 |-- /subfolder
 |    |
 |    + styles.css.scss
 |
 + application.css.scss 
```

**应用程序.html.haml**

```
 = stylesheet_link_tag "application", media: "all"
  = stylesheet_link_tag "subfolder/styles", media: "all" 
```

**应用程序.css.scss**

```
@import "styleguide";
@import "styleguide/base/_all";
@import "styleguide/modules/_all-no-grid";
// Omitting rules not relevant to the problem 
```

**样式.css.scss**

```
@import "styleguide";
@import "styleguide/grid/_grid";
@import "styleguide/modules/_all-grid";
// Omitting rules not relevant to the problem 
```

样式指南文件存在于一个 gem 中，它在`vendor/stylesheets`RoR 引擎的帮助下为资产提供服务。

## 问题

当我使用预编译的资产在生产中运行我的应用程序时，我遇到了指向`@import`样式指南的问题。

```
File to import not found or unreadable: styleguide.
Load path: 
 Sass::Rails::Importer([omitted]/app/assets/stylesheets/local/styles.css.scss)
 (in [omitted]/app/assets/stylesheets/local/styles.css.scss) 
```

## 解决方法

样式指南本身没有问题，因为只要我`subfolder/styles.css.sccs`从`application.css.scss`文件中导入文件，一切都会按预期工作。

**应用程序.html.haml**

```
 = stylesheet_link_tag "application", media: "all" 
```

**应用程序.css.scss**

```
@import "styleguide";
@import "styleguide/base/_all";
@import "styleguide/modules/_all-no-grid";
@import "subfolder/styles"
// Omitting rules not relevant to the problem 
```

**样式.css.scss**

```
// Same as above, included for completeness
@import "styleguide";
@import "styleguide/grid/_grid";
@import "styleguide/modules/_all-grid";
// Omitting rules not relevant to the problem 
```

## 解决方案

有没有人遇到过这样的事情？是否有任何已知问题可能导致这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-19T21:30:48.287

我猜这是在你的styles.css.scss 文件中修改你的路径的一个简单问题。如果您的 styleguide 目录不在您的子文件夹中（它看起来不像），您将不得不在 styles.css.scss 中将您的导入路径指向上一层。如果是这种情况，请尝试：

```
@import "../styleguide";
... 
```

因为 application.css.scss 位于上一级，所以它在导入期间会识别这些路径，而 styles.css.scss 则不会。

# sharepoint - Sharepoint WebPart 不出现

> ID：13582599
> 
> 赞同：2
> 
> 时间：2012-11-27T10:51:32.950
> 
> 标签：sharepoint, gridview, web-parts

我有一个 SharePoint VisualWebPart，我想在上面放一个 GridView。问题是 GridView 没有出现在页面上的我的 WebPart 中。

这是网格：

```
<asp:Gridview ID="timeSheetGridView" runat="server" EnableModelValidation="True" AutoGenerateColumns="False">
    <Columns>
        <asp:TemplateField HeaderText="Proiect"></asp:TemplateField>
        <asp:TemplateField HeaderText="User"></asp:TemplateField>
        <asp:TemplateField HeaderText="Task"></asp:TemplateField>
        <asp:TemplateField HeaderText="Ore"></asp:TemplateField>
        <asp:TemplateField HeaderText="Data Start"></asp:TemplateField>
    </Columns>
</asp:Gridview> 
```

在这里我创建了 DataBinding

```
if (timeSheet != null)
{
    foreach (TimeSheetActualValue actualValue in timeSheet.ActualValues)
    {
        actualValuesList.Add(new InitialReportEntity
                             {
                                 ProjectName = proiect.Name,
                                 ResourceName = currentUser,
                                 TaskName = task.Name,
                                 Hours = (int)actualValue.ActualValue / 60000, 
                                 Date = actualValue.StartDate
                              });
    }
}

if (actualValuesList.Count > 0)
{
    timeSheetGridView.DataSource = actualValuesList;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:57:19.670

尝试调用 timeSheetGridView.DataBind();

# java - 在消息中发送类字段元数据

> ID：13582600
> 
> 赞同：0
> 
> 时间：2012-11-27T10:51:38.043
> 
> 标签：java, json, reflection, jackson, meta

有没有人遇到过这个问题`jackson JSON`- 不知何故，`JSON`包括我班级的每个字段类型，以及我不感兴趣的其他元数据，因此发送的数据非常庞大！

例如，这是一个记录：

```
{
    "queue": "H",
    "internalStatus": "New",
    "id": "50030386",
    "screenDescription": "Test Case 1",

}
},
"fields": [
{
    "name": "id",
    "type": "java.lang.Integer",
    "modifiers": 2,
    "annotations": [

    ],
    "declaredAnnotations": [

    ],
    "declaringClass": "com.me.Charge",
    "synthetic": false,
    "genericType": "java.lang.Integer",
    "enumConstant": false,
    "accessible": false
},
{
    "name": "screenDescription",
    "type": "java.lang.String",
    "modifiers": 2,
    "annotations": [

    ],
    "declaredAnnotations": [

    ],
    "declaringClass": "com.me.Charge",
    "synthetic": false,
    "genericType": "java.lang.String",
    "enumConstant": false,
    "accessible": false
},
{
    "name": "internalStatus",
    "type": "java.lang.String",
    "modifiers": 2,
    "annotations": [

    ],
    "declaredAnnotations": [

    ],
    "declaringClass": "com.me.Charge",
    "synthetic": false,
    "genericType": "java.lang.String",
    "enumConstant": false,
    "accessible": false
},
{
    "name": "queue",
    "type": "java.lang.String",
    "modifiers": 2,
    "annotations": [

    ],
    "declaredAnnotations": [

    ],
    "declaringClass": "com.me.Charge",
    "synthetic": false,
    "genericType": "java.lang.String",
    "enumConstant": false,
    "accessible": false
}, 
```

任何帮助表示赞赏。

谢谢，斯蒂芬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:42:00.713

检查您的代码以进行设置

```
objectMapper.enableDefaultTyping(...) 
```

以某种价值...

# javascript - 使用 Internet Explorer 从计算机名称访问加载某些 CSS 样式时出现问题

> ID：13582601
> 
> 赞同：1
> 
> 时间：2012-11-27T10:51:38.167
> 
> 标签：javascript, css, internet-explorer, iis-7, web

我只有 Internet Explorer 有一个非常奇怪的问题（我使用的是 9.0.8 版本）

我在运行 IIS 7 的计算机（Windows 7）上安装了一个 Web 服务器。我为该站点使用了 CakePHP 框架。

当我从我的 IP 地址访问它时，一切正常，但另一方面，当我从计算机名称访问它时，一些 CSS 样式以及一些 JS 脚本都没有应用。

文件加载正确是因为应用了大多数 CSS 样式并且所有这些样式都从同一个文件加载。但是其中一些，不要问我为什么，没有应用。

在这里，您可以查看从两个 URL 加载站点的 Internet Explorer 检查器：http: [//s9.postimage.org/vjhg6ytsd/problem.png](http://s9.postimage.org/vjhg6ytsd/problem.png) ![在此处输入图像描述](../Images/bd42e7228343ac00787adc5d22de89a0.png)

使用 Javascript，发生的事情是某些功能似乎会中断其余功能的流程。如果我删除这个“冲突”的功能，那么它工作得很好。（但它总是可以很好地从本地主机或直接使用 IP 加载它......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:06:10.470

请参阅：[当站点位于 networkdrive 时，IE 无法正确呈现 CSS](https://stackoverflow.com/questions/4966952/ie-not-rendering-css-properly-when-the-site-is-located-at-networkdrive/4967594#4967594)

添加这个：

```
<meta http-equiv="X-UA-Compatible" content="IE=Edge" /> 
```

# c# - C#- 在一个应用程序中检查不同形式的两个字段

> ID：13582610
> 
> 赞同：-1
> 
> 时间：2012-11-27T10:52:07.073
> 
> 标签：c#, visual-studio-2010, c#-4.0, itextsharp

我的字段名称为

```
List<string> names = af.GetSignatureNames(); 
```

当我在组合框中输入为

```
comboBox1.Items.Add(new combodata("Signature 1"));
comboBox1.Items.Add(new combodata("Signature 2"));
comboBox1.Items.Add(new combodata("Signature 3")); 
```

并在函数中检索相同的内容

```
comboBox1.SelectedItem.ToString();//combobox value taken 
```

问题是我在 pdf 文件中有表单 2 上的组合框和表单 1 上的字符串名称列表我想比较这两个字段，因为我有一些数据要通过单击按钮添加到相应的签名字典中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:04:43.553

在一个或另一个上使用公共静态变量以从另一种形式访问它。

```
class myForm1
{    
   public static List<string> myList;

   //code here
}

class myForm2
{
   myForm1.myList //do something with it
} 
```

# iphone - 一次同时使用多种功能

> ID：13582611
> 
> 赞同：1
> 
> 时间：2012-11-27T10:52:11.647
> 
> 标签：iphone, ios, ipad

如果我想在没有太多负载的情况下一次执行多个功能，那么哪个选项是最好的（为了减少负载、快速执行和崩溃问题）......

1）。NSThread

2）。performSelectorInBackground

3）。NSOperationQueue

还是除上述之外的任何其他？请建议我最好的和适当的解决方案。提前获取所有链接和指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:57:04.080

我认为 Grand Central Dispatch 是最好的。

```
// Job 1
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{

    // Heavy work here...

});

// Job 2
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{

    // Heavy work here...

}); 
```

如果你想在主线程中做一些事情（例如更新 UI），请使用：

```
dispatch_sync(dispatch_get_main_queue(), ^{

    // Update UI...

}); 
```

# vba - 宏中的变量

> ID：13582615
> 
> 赞同：0
> 
> 时间：2012-11-27T10:52:18.170
> 
> 标签：vba, excel

嗨，我有一个宏来插入来自特定驱动器的特定文本文件的数据，（来自 K:...等的browleft.txt）但是我希望能够从驱动器和文件夹中读取宏，Excel 工作表是在，也来自一个具有变量名但结尾相同的文本文件，例如 alexbrowleft.txt 或 grahambrowright.txt 等...这可能吗，任何人都可以帮助我...这是下面的宏.. ..

```
Sub insert()
'
' insert Macro
' insert
'
' Keyboard Shortcut: Ctrl+i
'
    Range("A4").Select
    ActiveCell.FormulaR1C1 = "left brow"
    Range("B4").Select
    With ActiveSheet.QueryTables.Add(Connection:="TEXT;K:\browleft.txt", _
        Destination:=Range("$B$4"))
        .Name = "browleft_8"
        .FieldNames = True
        .RowNumbers = False
        .FillAdjacentFormulas = False
        .PreserveFormatting = True
        .RefreshOnFileOpen = False
        .RefreshStyle = xlInsertDeleteCells
        .SavePassword = False
        .SaveData = True
        .AdjustColumnWidth = True
        .RefreshPeriod = 0
        .TextFilePromptOnRefresh = False
        .TextFilePlatform = 850
        .TextFileStartRow = 1
        .TextFileParseType = xlDelimited
        .TextFileTextQualifier = xlTextQualifierDoubleQuote
        .TextFileConsecutiveDelimiter = True
        .TextFileTabDelimiter = False
        .TextFileSemicolonDelimiter = False
        .TextFileCommaDelimiter = False
        .TextFileSpaceDelimiter = True
        .TextFileColumnDataTypes = Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, _
        1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 _
        , 1, 1, 1, 1, 1, 1, 1, 1, 1)
        .TextFileTrailingMinusNumbers = True
        .refresh BackgroundQuery:=False
    End With
    Range("A6").Select
    ActiveCell.FormulaR1C1 = "right brow"
    Range("B6").Select
    With ActiveSheet.QueryTables.Add(Connection:="TEXT;K:\browright.txt", _
        Destination:=Range("$B$6"))
        .Name = "browright_8"
        .FieldNames = True
        .RowNumbers = False
        .FillAdjacentFormulas = False
        .PreserveFormatting = True
        .RefreshOnFileOpen = False
        .RefreshStyle = xlInsertDeleteCells
        .SavePassword = False
        .SaveData = True
        .AdjustColumnWidth = True
        .RefreshPeriod = 0
        .TextFilePromptOnRefresh = False
        .TextFilePlatform = 850
        .TextFileStartRow = 1
        .TextFileParseType = xlDelimited
        .TextFileTextQualifier = xlTextQualifierDoubleQuote
        .TextFileConsecutiveDelimiter = True
        .TextFileTabDelimiter = False
        .TextFileSemicolonDelimiter = False
        .TextFileCommaDelimiter = False
        .TextFileSpaceDelimiter = True
        .TextFileColumnDataTypes = Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, _
        1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 _
        , 1, 1, 1, 1, 1, 1, 1, 1, 1)
        .TextFileTrailingMinusNumbers = True
        .refresh BackgroundQuery:=False
    End With
    Range("A8").Select
    ActiveCell.FormulaR1C1 = "eye left"
    Range("B8").Select
    With ActiveSheet.QueryTables.Add(Connection:="TEXT;K:\eyeleft.txt", _
        Destination:=Range("$B$8"))
        .Name = "eyeleft_8"
        .FieldNames = True
        .RowNumbers = False
        .FillAdjacentFormulas = False
        .PreserveFormatting = True
        .RefreshOnFileOpen = False
        .RefreshStyle = xlInsertDeleteCells
        .SavePassword = False
        .SaveData = True
        .AdjustColumnWidth = True
        .RefreshPeriod = 0
        .TextFilePromptOnRefresh = False
        .TextFilePlatform = 850
        .TextFileStartRow = 1
        .TextFileParseType = xlDelimited
        .TextFileTextQualifier = xlTextQualifierDoubleQuote
        .TextFileConsecutiveDelimiter = True
        .TextFileTabDelimiter = False
        .TextFileSemicolonDelimiter = False
        .TextFileCommaDelimiter = False
        .TextFileSpaceDelimiter = True
        .TextFileColumnDataTypes = Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, _
        1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 _
        , 1, 1, 1, 1, 1, 1, 1, 1, 1)
        .TextFileTrailingMinusNumbers = True
        .refresh BackgroundQuery:=False
    End With
    Range("A10").Select
    ActiveCell.FormulaR1C1 = "right eye"
    Range("B10").Select
    With ActiveSheet.QueryTables.Add(Connection:="TEXT;K:\eyeright.txt", _
        Destination:=Range("$B$10"))
        .Name = "eyeright_8"
        .FieldNames = True
        .RowNumbers = False
        .FillAdjacentFormulas = False
        .PreserveFormatting = True
        .RefreshOnFileOpen = False
        .RefreshStyle = xlInsertDeleteCells
        .SavePassword = False
        .SaveData = True
        .AdjustColumnWidth = True
        .RefreshPeriod = 0
        .TextFilePromptOnRefresh = False
        .TextFilePlatform = 850
        .TextFileStartRow = 1
        .TextFileParseType = xlDelimited
        .TextFileTextQualifier = xlTextQualifierDoubleQuote
        .TextFileConsecutiveDelimiter = True
        .TextFileTabDelimiter = False
        .TextFileSemicolonDelimiter = False
        .TextFileCommaDelimiter = False
        .TextFileSpaceDelimiter = True
        .TextFileColumnDataTypes = Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, _
        1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 _
        , 1, 1, 1, 1, 1, 1, 1, 1, 1)
        .TextFileTrailingMinusNumbers = True
        .refresh BackgroundQuery:=False
    End With
    Range("A12").Select
    ActiveCell.FormulaR1C1 = "jaw"
    Range("B12").Select
    With ActiveSheet.QueryTables.Add(Connection:="TEXT;K:\jaw.txt", Destination _
        :=Range("$B$12"))
        .Name = "jaw_8"
        .FieldNames = True
        .RowNumbers = False
        .FillAdjacentFormulas = False
        .PreserveFormatting = True
        .RefreshOnFileOpen = False
        .RefreshStyle = xlInsertDeleteCells
        .SavePassword = False
        .SaveData = True
        .AdjustColumnWidth = True
        .RefreshPeriod = 0
        .TextFilePromptOnRefresh = False
        .TextFilePlatform = 850
        .TextFileStartRow = 1
        .TextFileParseType = xlDelimited
        .TextFileTextQualifier = xlTextQualifierDoubleQuote
        .TextFileConsecutiveDelimiter = True
        .TextFileTabDelimiter = True
        .TextFileSemicolonDelimiter = False
        .TextFileCommaDelimiter = False
        .TextFileSpaceDelimiter = True
        .TextFileColumnDataTypes = Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, _
        1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 _
        , 1, 1, 1, 1, 1, 1, 1, 1, 1)
        .TextFileTrailingMinusNumbers = True
        .refresh BackgroundQuery:=False
    End With
    Range("A14").Select
    ActiveCell.FormulaR1C1 = "mouth height"
    Range("B14").Select
    With ActiveSheet.QueryTables.Add(Connection:="TEXT;K:\mouthheight.txt", _
        Destination:=Range("$B$14"))
        .Name = "mouthheight_8"
        .FieldNames = True
        .RowNumbers = False
        .FillAdjacentFormulas = False
        .PreserveFormatting = True
        .RefreshOnFileOpen = False
        .RefreshStyle = xlInsertDeleteCells
        .SavePassword = False
        .SaveData = True
        .AdjustColumnWidth = True
        .RefreshPeriod = 0
        .TextFilePromptOnRefresh = False
        .TextFilePlatform = 850
        .TextFileStartRow = 1
        .TextFileParseType = xlDelimited
        .TextFileTextQualifier = xlTextQualifierDoubleQuote
        .TextFileConsecutiveDelimiter = True
        .TextFileTabDelimiter = False
        .TextFileSemicolonDelimiter = False
        .TextFileCommaDelimiter = False
        .TextFileSpaceDelimiter = True
        .TextFileColumnDataTypes = Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, _
        1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 _
        , 1, 1, 1, 1, 1, 1, 1, 1, 1)
        .TextFileTrailingMinusNumbers = True
        .refresh BackgroundQuery:=False
    End With
    Range("A16").Select
    ActiveCell.FormulaR1C1 = "mouth width"
    Range("B16").Select
    With ActiveSheet.QueryTables.Add(Connection:="TEXT;K:\mouthwidth.txt", _
        Destination:=Range("$B$16"))
        .Name = "mouthwidth_8"
        .FieldNames = True
        .RowNumbers = False
        .FillAdjacentFormulas = False
        .PreserveFormatting = True
        .RefreshOnFileOpen = False
        .RefreshStyle = xlInsertDeleteCells
        .SavePassword = False
        .SaveData = True
        .AdjustColumnWidth = True
        .RefreshPeriod = 0
        .TextFilePromptOnRefresh = False
        .TextFilePlatform = 850
        .TextFileStartRow = 1
        .TextFileParseType = xlDelimited
        .TextFileTextQualifier = xlTextQualifierDoubleQuote
        .TextFileConsecutiveDelimiter = True
        .TextFileTabDelimiter = False
        .TextFileSemicolonDelimiter = False
        .TextFileCommaDelimiter = False
        .TextFileSpaceDelimiter = True
        .TextFileColumnDataTypes = Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, _
        1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 _
        , 1, 1, 1, 1, 1, 1, 1, 1, 1)
        .TextFileTrailingMinusNumbers = True
        .refresh BackgroundQuery:=False
    End With
    Range("A18").Select
    ActiveCell.FormulaR1C1 = "nostrils"
    Range("B18").Select
    With ActiveSheet.QueryTables.Add(Connection:="TEXT;K:\nostrils.txt", _
        Destination:=Range("$B$18"))
        .Name = "nostrils_9"
        .FieldNames = True
        .RowNumbers = False
        .FillAdjacentFormulas = False
        .PreserveFormatting = True
        .RefreshOnFileOpen = False
        .RefreshStyle = xlInsertDeleteCells
        .SavePassword = False
        .SaveData = True
        .AdjustColumnWidth = True
        .RefreshPeriod = 0
        .TextFilePromptOnRefresh = False
        .TextFilePlatform = 850
        .TextFileStartRow = 1
        .TextFileParseType = xlDelimited
        .TextFileTextQualifier = xlTextQualifierDoubleQuote
        .TextFileConsecutiveDelimiter = True
        .TextFileTabDelimiter = False
        .TextFileSemicolonDelimiter = False
        .TextFileCommaDelimiter = False
        .TextFileSpaceDelimiter = True
        .TextFileColumnDataTypes = Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, _
        1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 _
        , 1, 1, 1, 1, 1, 1, 1, 1, 1)
        .TextFileTrailingMinusNumbers = True
        .refresh BackgroundQuery:=False
    End With
    Range("17:17,15:15,13:13,11:11,9:9,7:7,5:5").Select
    Range("A5").Activate
    Selection.Delete Shift:=xlUp
    Range("A4").Select
    ActiveCell.FormulaR1C1 = "Left Brow"
    Range("A5").Select
    ActiveCell.FormulaR1C1 = "Right Brow"
    Range("A6").Select
    ActiveCell.FormulaR1C1 = "Eye Left"
    Range("A7").Select
    ActiveCell.FormulaR1C1 = "Eye Right"
    Range("A8").Select
    ActiveCell.FormulaR1C1 = "Jaw"
    Range("A9").Select
    ActiveCell.FormulaR1C1 = "Mouth Height"
    Range("A10").Select
    ActiveCell.FormulaR1C1 = "Mouth Width"
    Range("A11").Select
    ActiveCell.FormulaR1C1 = "Nostrils"
    Range("A12").Select
End Sub
Sub deletedata()
'
' deletedata Macro
'
' Keyboard Shortcut: Ctrl+d
'
    Range("B4").Select
    ActiveWindow.ScrollColumn = 3
    ActiveWindow.ScrollColumn = 15
    ActiveWindow.ScrollColumn = 23
    ActiveWindow.ScrollColumn = 30
    ActiveWindow.ScrollColumn = 35
    ActiveWindow.ScrollColumn = 40
    ActiveWindow.ScrollColumn = 46
    ActiveWindow.ScrollColumn = 52
    ActiveWindow.ScrollColumn = 58
    ActiveWindow.ScrollColumn = 62
    ActiveWindow.ScrollColumn = 67
    ActiveWindow.ScrollColumn = 71
    ActiveWindow.ScrollColumn = 75
    ActiveWindow.ScrollColumn = 79
    ActiveWindow.ScrollColumn = 83
    ActiveWindow.ScrollColumn = 86
    ActiveWindow.ScrollColumn = 90
    ActiveWindow.ScrollColumn = 94
    ActiveWindow.ScrollColumn = 98
    ActiveWindow.ScrollColumn = 103
    ActiveWindow.ScrollColumn = 107
    ActiveWindow.ScrollColumn = 111
    ActiveWindow.ScrollColumn = 116
    ActiveWindow.ScrollColumn = 120
    ActiveWindow.ScrollColumn = 124
    ActiveWindow.ScrollColumn = 129
    ActiveWindow.ScrollColumn = 133
    ActiveWindow.ScrollColumn = 138
    ActiveWindow.ScrollColumn = 142
    ActiveWindow.ScrollColumn = 146
    ActiveWindow.ScrollColumn = 149
    ActiveWindow.ScrollColumn = 153
    ActiveWindow.ScrollColumn = 156
    ActiveWindow.ScrollColumn = 163
    ActiveWindow.ScrollColumn = 170
    ActiveWindow.ScrollColumn = 176
    ActiveWindow.ScrollColumn = 181
    ActiveWindow.ScrollColumn = 187
    ActiveWindow.ScrollColumn = 193
    ActiveWindow.ScrollColumn = 199
    ActiveWindow.ScrollColumn = 204
    ActiveWindow.ScrollColumn = 208
    ActiveWindow.ScrollColumn = 211
    ActiveWindow.ScrollColumn = 214
    ActiveWindow.ScrollColumn = 216
    ActiveWindow.ScrollColumn = 218
    ActiveWindow.ScrollColumn = 219
    ActiveWindow.ScrollColumn = 221
    ActiveWindow.ScrollColumn = 222
    ActiveWindow.ScrollColumn = 223
    ActiveWindow.ScrollColumn = 224
    ActiveWindow.ScrollColumn = 225
    ActiveWindow.ScrollColumn = 226
    ActiveWindow.ScrollColumn = 227
    ActiveWindow.ScrollColumn = 228
    ActiveWindow.ScrollColumn = 229
    ActiveWindow.ScrollColumn = 230
    ActiveWindow.ScrollColumn = 231
    ActiveWindow.ScrollColumn = 233
    ActiveWindow.ScrollColumn = 234
    ActiveWindow.ScrollColumn = 236
    ActiveWindow.ScrollColumn = 238
    ActiveWindow.ScrollColumn = 240
    ActiveWindow.ScrollColumn = 243
    ActiveWindow.ScrollColumn = 244
    ActiveWindow.ScrollColumn = 247
    ActiveWindow.ScrollColumn = 248
    ActiveWindow.ScrollColumn = 250
    ActiveWindow.ScrollColumn = 252
    ActiveWindow.ScrollColumn = 253
    ActiveWindow.ScrollColumn = 254
    ActiveWindow.ScrollColumn = 255
    ActiveWindow.ScrollColumn = 256
    ActiveWindow.ScrollColumn = 257
    ActiveWindow.ScrollColumn = 258
    ActiveWindow.ScrollColumn = 256
    ActiveWindow.ScrollColumn = 252
    ActiveWindow.ScrollColumn = 232
    ActiveWindow.ScrollColumn = 223
    ActiveWindow.ScrollColumn = 214
    ActiveWindow.ScrollColumn = 204
    ActiveWindow.ScrollColumn = 196
    ActiveWindow.ScrollColumn = 186
    ActiveWindow.ScrollColumn = 176
    ActiveWindow.ScrollColumn = 166
    ActiveWindow.ScrollColumn = 157
    ActiveWindow.ScrollColumn = 148
    ActiveWindow.ScrollColumn = 141
    ActiveWindow.ScrollColumn = 135
    ActiveWindow.ScrollColumn = 130
    ActiveWindow.ScrollColumn = 125
    ActiveWindow.ScrollColumn = 120
    ActiveWindow.ScrollColumn = 116
    ActiveWindow.ScrollColumn = 112
    ActiveWindow.ScrollColumn = 109
    ActiveWindow.ScrollColumn = 108
    ActiveWindow.ScrollColumn = 107
    ActiveWindow.ScrollColumn = 105
    ActiveWindow.ScrollColumn = 103
    ActiveWindow.ScrollColumn = 101
    ActiveWindow.ScrollColumn = 99
    ActiveWindow.ScrollColumn = 97
    ActiveWindow.ScrollColumn = 94
    ActiveWindow.ScrollColumn = 91
    ActiveWindow.ScrollColumn = 88
    ActiveWindow.ScrollColumn = 86
    ActiveWindow.ScrollColumn = 83
    ActiveWindow.ScrollColumn = 81
    ActiveWindow.ScrollColumn = 79
    ActiveWindow.ScrollColumn = 78
    ActiveWindow.ScrollColumn = 77
    ActiveWindow.ScrollColumn = 76
    ActiveWindow.ScrollColumn = 75
    ActiveWindow.ScrollColumn = 74
    ActiveWindow.ScrollColumn = 72
    ActiveWindow.ScrollColumn = 71
    ActiveWindow.ScrollColumn = 70
    ActiveWindow.ScrollColumn = 69
    ActiveWindow.ScrollColumn = 68
    ActiveWindow.ScrollColumn = 67
    ActiveWindow.ScrollColumn = 66
    ActiveWindow.ScrollColumn = 65
    ActiveWindow.ScrollColumn = 64
    ActiveWindow.ScrollColumn = 63
    ActiveWindow.ScrollColumn = 62
    ActiveWindow.ScrollColumn = 60
    ActiveWindow.ScrollColumn = 58
    ActiveWindow.ScrollColumn = 56
    ActiveWindow.ScrollColumn = 52
    ActiveWindow.ScrollColumn = 50
    ActiveWindow.ScrollColumn = 46
    ActiveWindow.ScrollColumn = 43
    ActiveWindow.ScrollColumn = 40
    ActiveWindow.ScrollColumn = 38
    ActiveWindow.ScrollColumn = 37
    ActiveWindow.ScrollColumn = 36
    ActiveWindow.ScrollColumn = 35
    ActiveWindow.ScrollColumn = 34
    ActiveWindow.ScrollColumn = 35
    ActiveWindow.ScrollColumn = 41
    ActiveWindow.ScrollColumn = 44
    ActiveWindow.ScrollColumn = 47
    ActiveWindow.ScrollColumn = 52
    ActiveWindow.ScrollColumn = 58
    ActiveWindow.ScrollColumn = 64
    ActiveWindow.ScrollColumn = 70
    ActiveWindow.ScrollColumn = 77
    ActiveWindow.ScrollColumn = 86
    ActiveWindow.ScrollColumn = 97
    ActiveWindow.ScrollColumn = 106
    ActiveWindow.ScrollColumn = 116
    ActiveWindow.ScrollColumn = 124
    ActiveWindow.ScrollColumn = 131
    ActiveWindow.ScrollColumn = 138
    ActiveWindow.ScrollColumn = 144
    ActiveWindow.ScrollColumn = 150
    ActiveWindow.ScrollColumn = 156
    ActiveWindow.ScrollColumn = 161
    ActiveWindow.ScrollColumn = 167
    ActiveWindow.ScrollColumn = 173
    ActiveWindow.ScrollColumn = 180
    ActiveWindow.ScrollColumn = 188
    ActiveWindow.ScrollColumn = 195
    ActiveWindow.ScrollColumn = 202
    ActiveWindow.ScrollColumn = 209
    ActiveWindow.ScrollColumn = 215
    ActiveWindow.ScrollColumn = 221
    ActiveWindow.ScrollColumn = 227
    ActiveWindow.ScrollColumn = 233
    ActiveWindow.ScrollColumn = 239
    ActiveWindow.ScrollColumn = 245
    ActiveWindow.ScrollColumn = 250
    ActiveWindow.ScrollColumn = 254
    ActiveWindow.ScrollColumn = 258
    Range("B4:JZ11").Select
    ActiveWindow.ScrollColumn = 257
    ActiveWindow.ScrollColumn = 252
    ActiveWindow.ScrollColumn = 242
    ActiveWindow.ScrollColumn = 237
    ActiveWindow.ScrollColumn = 232
    ActiveWindow.ScrollColumn = 227
    ActiveWindow.ScrollColumn = 221
    ActiveWindow.ScrollColumn = 214
    ActiveWindow.ScrollColumn = 207
    ActiveWindow.ScrollColumn = 200
    ActiveWindow.ScrollColumn = 182
    ActiveWindow.ScrollColumn = 172
    ActiveWindow.ScrollColumn = 162
    ActiveWindow.ScrollColumn = 152
    ActiveWindow.ScrollColumn = 144
    ActiveWindow.ScrollColumn = 134
    ActiveWindow.ScrollColumn = 125
    ActiveWindow.ScrollColumn = 118
    ActiveWindow.ScrollColumn = 111
    ActiveWindow.ScrollColumn = 105
    ActiveWindow.ScrollColumn = 99
    ActiveWindow.ScrollColumn = 92
    ActiveWindow.ScrollColumn = 86
    ActiveWindow.ScrollColumn = 80
    ActiveWindow.ScrollColumn = 75
    ActiveWindow.ScrollColumn = 70
    ActiveWindow.ScrollColumn = 65
    ActiveWindow.ScrollColumn = 60
    ActiveWindow.ScrollColumn = 56
    ActiveWindow.ScrollColumn = 52
    ActiveWindow.ScrollColumn = 48
    ActiveWindow.ScrollColumn = 44
    ActiveWindow.ScrollColumn = 41
    ActiveWindow.ScrollColumn = 38
    ActiveWindow.ScrollColumn = 34
    ActiveWindow.ScrollColumn = 30
    ActiveWindow.ScrollColumn = 26
    ActiveWindow.ScrollColumn = 23
    ActiveWindow.ScrollColumn = 17
    ActiveWindow.ScrollColumn = 12
    ActiveWindow.ScrollColumn = 7
    ActiveWindow.ScrollColumn = 1
    Rows("4:11").Select
    Selection.ClearContents
End Sub
Sub refresh()
'
' refresh Macro
' refresh values
'
' Keyboard Shortcut: Ctrl+r
'
    Range("E4").Select
    ActiveCell.FormulaR1C1 = "='OSC '!RC[-3]"
    Range("E4").Select
    Selection.AutoFill Destination:=Range("E4:JZ4"), Type:=xlFillDefault
    Range("E4:JZ4").Select
    Selection.AutoFill Destination:=Range("E4:JZ11"), Type:=xlFillDefault
    Range("E4:JZ11").Select
    ActiveWindow.ScrollColumn = 258
    ActiveWindow.ScrollColumn = 253
    ActiveWindow.ScrollColumn = 246
    ActiveWindow.ScrollColumn = 235
    ActiveWindow.ScrollColumn = 227
    ActiveWindow.ScrollColumn = 218
    ActiveWindow.ScrollColumn = 200
    ActiveWindow.ScrollColumn = 193
    ActiveWindow.ScrollColumn = 186
    ActiveWindow.ScrollColumn = 180
    ActiveWindow.ScrollColumn = 174
    ActiveWindow.ScrollColumn = 169
    ActiveWindow.ScrollColumn = 163
    ActiveWindow.ScrollColumn = 157
    ActiveWindow.ScrollColumn = 152
    ActiveWindow.ScrollColumn = 146
    ActiveWindow.ScrollColumn = 141
    ActiveWindow.ScrollColumn = 135
    ActiveWindow.ScrollColumn = 131
    ActiveWindow.ScrollColumn = 125
    ActiveWindow.ScrollColumn = 120
    ActiveWindow.ScrollColumn = 114
    ActiveWindow.ScrollColumn = 103
    ActiveWindow.ScrollColumn = 98
    ActiveWindow.ScrollColumn = 92
    ActiveWindow.ScrollColumn = 86
    ActiveWindow.ScrollColumn = 81
    ActiveWindow.ScrollColumn = 75
    ActiveWindow.ScrollColumn = 71
    ActiveWindow.ScrollColumn = 66
    ActiveWindow.ScrollColumn = 61
    ActiveWindow.ScrollColumn = 57
    ActiveWindow.ScrollColumn = 54
    ActiveWindow.ScrollColumn = 52
    ActiveWindow.ScrollColumn = 49
    ActiveWindow.ScrollColumn = 48
    ActiveWindow.ScrollColumn = 46
    ActiveWindow.ScrollColumn = 44
    ActiveWindow.ScrollColumn = 41
    ActiveWindow.ScrollColumn = 39
    ActiveWindow.ScrollColumn = 36
    ActiveWindow.ScrollColumn = 32
    ActiveWindow.ScrollColumn = 28
    ActiveWindow.ScrollColumn = 24
    ActiveWindow.ScrollColumn = 21
    ActiveWindow.ScrollColumn = 18
    ActiveWindow.ScrollColumn = 15
    ActiveWindow.ScrollColumn = 13
    ActiveWindow.ScrollColumn = 10
    ActiveWindow.ScrollColumn = 7
    ActiveWindow.ScrollColumn = 5
    ActiveWindow.ScrollColumn = 3
    ActiveWindow.ScrollColumn = 1
    Range("A2").Select
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:57:54.367

假设您的意思是包含`insert()`宏的工作簿的路径，您可以使用以下内容并将其与文件名结合使用。

要获取文件所在目录的路径，请使用：

```
ThisWorkbook.Path 
```

要获取包含文件名的完整路径，请使用：

```
ThisWorkbook.FullName 
```

例子：

```
Dim sFilePath as String
Dim sName as String

sName = "alex"
sFilePath = ThisWorkbook.Path & "\" & sName & "browleft.txt"

With ActiveSheet.QueryTables.Add(Connection:="TEXT;" & sFilePath, _ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:31:09.857

对使事物充满活力有*一点启发。*

如果你想让这个过程*有点*动态，你实际上可以有一个包含文件路径/名称的单元格并指向你的宏从那个单元格中读取:) 所以你不必总是进入宏来更改文件名.

另外，在这种情况下，您可以从硬盘驱动器中的任何位置读取输入文本文件 - 无需记住，只需将该完整路径/文件名复制粘贴到单元格中即可：)

**其次，您可以使用regex**让另一个单元格指定应该是`LIKE`xyz 或 yzx...的文件名。这可能会增加更多的复杂性，所以我把它放在一边，因为简单是这里的关键。

 **请查看以下示例。

文件名为`browleft.txt`. 假设您的文件完整路径位于单元格“A2”中。例如`K:\` ，如果您希望在与您的应用程序文件相同的文件夹中搜索文本文件，您可以将此“A2”单元格留空。（此 Excel 工作文件）将您的文件名放在“A3”中 =`brownleft.txt` 名称应该看起来的通配符字符串`LIKE`=`alex` 将其放在单元格“A4”中

```
Dim strFilePath as String
Dim strFileName as String
Dim strWildCard as String
Dim rngPath as Range
Dim rngName as Range

set rngPath = Range("A2")
set rngName = Range("A3")
set rngWild = Range("A4")

'--- Validate your inputs before processing

If Trim(rngWild.value) <> "" Then
  strWildCard = Trim(rngWild.value)
Else
  strWildCard = "alex" '--- the default wildcard string
End If

If Trim(rngName.value) <> "" Then
  strFileName = Trim(rngName.value)
Else
  strFileName = "brownleft.txt" '--- the default file name
End If

If Trim(rngPath.value) <> "" Then
  strFilePath = Trim(rngPath.value) & strWildCard & strFileName
Else
  strFilePath = ThisWorkbook.Path & "\" & strWildCard & strFileName
    End If

    With ActiveSheet.QueryTables.Add(Connection:="TEXT;strFilePath, _
    ...
.. 
```

休息如下:)**

# c# - 根据返回类型接口限制Web API序列化的模型数据字段

> ID：13582617
> 
> 赞同：2
> 
> 时间：2012-11-27T10:52:20.253
> 
> 标签：c#, mvvm, asp.net-web-api, json.net

我们正在更新我们的架构，以使用可用于 MVVM 模式的桌面、Web 和移动设备的单一对象模型。我希望能够通过使用控制器上的接口来限制通过 Web API 序列化的数据字段。这是必需的，因为移动设备的模型对象存储在 HTML5 本地存储中，因此不携带可选数据，而瘦桌面客户端将能够存储（和使用）更多数据。

为了实现这一点，模型将实现不同的接口，这些接口定义了哪些数据字段应该被序列化，并且会有一个特定于接口的控制器。

问题是 Web API 总是序列化模型中的每个字段，即使它不是返回的接口的一部分。我们怎样才能只序列化返回接口中的字段呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-28T12:42:50.837

我知道如何自动化特定接口而不是整个对象的序列化过程。
我编写了包含这样代码的库（现在这段代码由 github gist 共享）。它公开了名为[ToDynamic](https://gist.github.com/hardhub/7f1fbc1ba236bdf6fbb4/)的扩展方法。

```
public static dynamic ToDynamic<T>(this T value, bool deep = true); 
```

使用特定的 T 来提取该 T 类型中可用的字段。
在以下示例中，T 将自动确定。
所以只有 IClub 成员会被提取和序列化：

```
IReadOnlyList<IClub> clubs = retrieving.GetClubs(page, size, criteria);

return this.Request.CreateResponse(HttpStatusCode.OK, clubs.Select(item => item.ToDynamic())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T12:13:19.547

我认为您可以使用 JsonConverter 或使用 ContractResolver 来做到这一点

创建`JsonConverter`并覆盖`WriteJson`并编写您的逻辑以仅序列化那些需要的数据。记住要覆盖`CanConvert`and `CanWrite`。您可以查看[JSON.NET 中特定对象的自定义转换](https://stackoverflow.com/questions/6404881/custom-conversion-of-specific-objects-in-json-net)链接以获得一个想法

对于 ContractResolver，请参阅链接[http://quickduck.com/blog/2011/08/08/overriding-the-default-serialization-behavior-in-json-net/](http://quickduck.com/blog/2011/08/08/overriding-the-default-serialization-behavior-in-json-net/)。在此而不是使用`base.CreateObjectContract( objectType );`use`new JsonObjectContract( objectType );`

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:02:16.843

创建一个仅实现接口的新类（创建“视图模型”），使用所需字段初始化该类并返回对象是一种解决方案。

或者，如果可能，将字段标记为私有。私有字段不会被序列化。（限制字段的可见性总是一件好事）

# javascript - date 和 replace 方法仅更改第一个找到的值

> ID：13582618
> 
> 赞同：3
> 
> 时间：2012-11-27T10:52:22.240
> 
> 标签：javascript, replace

我正在尝试从日期替换一些值，但它只会更改第一个找到的值。

```
var date= cars.getAttribute("myLastDate");
var dateChanged= date.replace("/", ",");
alert (dateChanged); 
```

最好的祝福。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T10:58:00.793

如果您不需要任何正则表达式，那么我建议使用更简单的拆分/连接方法来进行搜索和替换。

```
var dateChanged = date.split("/").join(","); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T10:54:26.623

您需要使用*正则表达式调用**全局*标志：

 *```
var dateChanged= date.replace(/\//g, ","); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T10:55:31.197

在javascript中替换使用正则表达式，你必须在最后添加/g

```
date.replace(text/g,' ') 
```*

# jquery - jQuery DataTable - 删除 cookie

> ID：13582619
> 
> 赞同：1
> 
> 时间：2012-11-27T10:52:27.400
> 
> 标签：jquery

我有代码：

```
function DataTable() {
    $('#displayData').dataTable( {
        "bProcessing": true,
        "bServerSide": true,
        "bStateSave": true,
        "bSort": false,
        "bFilter": false,
        "aoColumns": [
                      { "mDataProp": "name" }
        ],
        "fnServerData": function ( sSource, aoData, fnCallback, oSettings ) {
            oSettings.jqXHR = req.query('GET', url, aoData, function(responseServer, status, xhr) {
                json = responseServer.dataListCustomer;
                fnCallback( json );
//HERE
              }, function(jqXHR, textStatus, errorThrown) {
                  return showError(exception);
                });
        }
      } );
} 
```

在哪里我想删除 dataTable 保存的 cookie，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:57:12.357

如果您不希望 dataTables 保留表的状态，请`bStateSave`在初始化时使用参数：

```
$('#displayData').dataTable( {
    "bProcessing": true,
    "bStateSave": false, // <--
    /* ... rest of your settings .. */
}); 
```

在内部，dataTables 使用了很多 cookie，手动删除它们将变得难以维护，并且可能会导致您出现一些奇怪的行为。

# java - java中的字符串复制

> ID：13582621
> 
> 赞同：-2
> 
> 时间：2012-11-27T10:52:43.270
> 
> 标签：java, string, copy

> **可能重复：**
> [Java 字符串池对象创建](https://stackoverflow.com/questions/7144059/java-string-pool-object-creation)

如果我做

```
String one = "hai";
String Two = "hai"; 
```

字符串二是仅指字符串一（与“存储hai”相同的内存位置）还是在其他地方创建了“hai”的新副本并指向它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-27T10:55:24.423

```
String one = "hai";
String two = "hai"; 
```

在 Java 中，字符串存储在**常量池中**，因此即使您按上述方式分配它们，它们仍将引用同一个对象。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-27T10:53:48.307

这是同一个例子。您只是在创建对同一对象的另一个引用

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T10:54:21.503

字符串二只是指内存中的同一个对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T10:57:50.000

指向堆内存中相同数据的两个字符串变量。因此，在堆内存中将字符串 1 和 2 指向 hai。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T11:05:12.657

现在即使你这样做

```
one=null; 
```

然后“hai”也将保留在内存中，变量 2 将引用该位置。我希望它清除了这个概念。:)

# google-maps - 每天计算和存储大量行驶距离（PHP JavaScript）

> ID：13582624
> 
> 赞同：0
> 
> 时间：2012-11-27T10:52:54.390
> 
> 标签：google-maps, google-maps-api-3, driving-directions, driving-distance

第一次来这里，所以我会尽量准确和详细。

我正在开发一个项目，用户可以通过行驶距离对当地景点进行分类。起点将是他们的家庭地址，终点将是存储在数据库中的（许多）景点之一：湖泊、公园、商店、博物馆等。

注册用户需要指定他/她的地址，该站点将运行一个服务器端脚本，该脚本将慢慢找到该地址与存储的景点之间的距离。

在以下情况下会自动触发行驶距离计算：

1)**新用户注册**到网站

或者

2) 一个**新的景点**被添加到数据库中

假设我有 400 个景点和 1500 个用户。如果我添加一个新景点，该网站将获取距离 1500 次（*每个用户一个*）。如果我添加一个新用户，该网站将执行相同的工作 400 次（*每个景点一个*）。

我目前正在使用 Goolge API，它们非常好。唯一的问题是……我每天最多有 2500 个查询。因此，如果我添加 2 个新景点（*总共需要 3000 距离*），我将被锁定到第二天。

在更大的情况下，检索行驶距离可能会很长。如果我有 5000 个注册用户，那么每当我添加一个新景点时，我必须获取 5000 个距离。那需要2天时间。

有什么更好的方法？我也在评估 Google Business API（10.000 美元/年），但这仅适用于巨大的现实，需要大量现金和他们的处置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:07:49.300

改用直线。不要使用行驶距离。或者将它们存储在数据库中并使用空间索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:24:14.653

为什么要从服务器端执行此操作？路线请求计入 IP 地址（每个 IP 每天 2500 次查询），因此您可以在每次访问者访问站点时在后台执行少量请求，这些请求将计入​​访问者的 IP，而不是服务器的 IP。你只需要擅长 AJAX。;-)

# mysql - 在mysql中选择不同的列字段和总和

> ID：13582626
> 
> 赞同：7
> 
> 时间：2012-11-27T10:52:57.903
> 
> 标签：mysql, sql

我有下表：

```
topic_id(unique)  forum_id   forum_views

1002                1885         5
1003                1893         2
1004                1885         3
1005                1892         6 
```

我怎样才能得到这样的输出：（唯一的 forum_id 来自上表的总论坛视图）

```
forum_id    forum_views
1885           8
1893           2
1892           6 
```

感谢任何帮助。

这就是我正在尝试的：

> 从 table_name 中选择不同的 forum_id, sum(topic_views)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T10:54:28.027

```
select forum_id, 
       sum(forum_views) as forum_views
from jforum_topics
group by forum_id 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-05-16T10:21:06.073

使用此查询`select forum_id, sum(distinct forum_views) from table group by forum_id;`

在此查询中， **sum distinct**将对不同值求和，并按所需列进行分组。

如果您想要所有值的总和而不考虑区别，那么只需使用 `sum(forum_views)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T10:59:23.440

```
select forum_id, sum(forum_views) as sum from table_name group by forum_id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T10:55:00.103

您只需要`GROUP BY`指定您希望`SUM`应用于哪些行；

```
select forum_id, sum(topic_views) from jforum_topics 
group by forum_id 
order by forum_id 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T10:55:02.413

尝试这个：

```
select forum_id, sum(topic_views) 
from jforum_topics
group by forum_id 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-27T10:55:13.840

```
select forum_id, sum(topic_views) from jforum_topics group by forum_id 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-27T11:00:26.267

试试这个，它会将你的 forum_views 与 forum_id 相加。

```
SELECT forum_id
     , SUM(forum_views)
FROM TABLE_NAME
GROUP BY forum_id
ORDER BY 1 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-27T11:03:26.637

这将是

```
 select id2,sum(id3) from supportContacts group by id2 
```

请参阅此 SQL Fiddle [http://sqlfiddle.com/#!2/7b9e7/3](http://sqlfiddle.com/#!2/7b9e7/3)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-03-02T09:22:27.513

您也可以尝试：

```
select distinct forum_id, sum(topic_views) 
from jforum_topics
group by forum_id 
```

# git - 忽略 Git 文件夹；现在无法在其他站点拉

> ID：13582628
> 
> 赞同：0
> 
> 时间：2012-11-27T10:53:06.853
> 
> 标签：git, gitignore

我有一个提交了 foo/ 目录的 git repo。提交后我再次忽略了*foo/*目录，但最近取消了它（从站点 1 的 gitignore 文件中删除条目，提交内容）。我只是试图在站点 2 上取消此更改，但有人告诉我：

`error: The following untracked working tree files would be overwritten by the merge:`

*然后是foo/*中的文件列表。我猜这些文件是在 gitignoring 之后在*foo中制作的。*我已尝试重置文件夹状态，但这不起作用 - 这是因为重置不会取消创建文件吗？我是在这里纠结还是有一种简单的方法可以让自己在站点 2 再次获取/合并？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:26:17.937

试试这个

```
$ git checkout -f another-branch 
```

这将迫使 git 继续并覆盖文件。切换到另一个分支，然后修复问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T14:01:35.390

如果当前忽略的文件`foo/`不重要，您可以`rm -rf foo/`然后`git pull`.

# c++ - 按值搜索地图

> ID：13582629
> 
> 赞同：2
> 
> 时间：2012-11-27T10:53:10.427
> 
> 标签：c++, map

我有 2 个元素（目前）地图：

```
#define IDI_OBJECT_5001 5001
#define IDI_OBJECT_5002 5002
    /.../

ResourcesMap[IDI_OBJECT_5001] = "path_to_png_file1";
ResourcesMap[IDI_OBJECT_5002] = "path_to_png_file2"; 
```

我正在尝试实现搜索此地图的方法。我正在传递字符串参数（文件路径）和方法返回 int（地图的键值）

```
int ResFiles::findResForBrew(string filePath)
{
string value = filePath;
int key = -1;
for (it = ResourcesMap.begin(); it != ResourcesMap.end(); ++it)
{
    if (/*checking if it->second == value */)
    {
        key = it->first;
        break;
    }
}
return key;
} 
```

类 ResFiles { public: ResFiles(); ~ResFiles();

```
map <int, string> ResourcesMap;
map <int, string>::const_iterator it;
void filenamesForBrew();
int findResForBrew(string filePath);

    private: 
```

};

我如何检查它何时->秒-> ==值，然后返回该键？我将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:00:27.530

这是一个基本的实现

```
 template <typename K, typename V>
     K keyFor(std::map<K, V> const& map, V const& target)
     {
         for (typename std::map<K, V>::const_iterator it=map.begin(); it!=map.end(); ++it)
             if (it->second == target)
                return it->first;

         return K(); // or throw?
     } 
```

或者，使用 C++11 支持：

```
 for (auto& pair : map)
             if (pair.second == target)
                return pair.first; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:02:36.153

你正在做的应该工作，（只是`it->second ==value`）虽然如果你想要一个“有效的”查找键值，你应该创建第二个映射。

有些算法`std::find`需要一个特殊的谓词，但它们只是在下面使用一个循环并且不会更有效，因为搜索仍然是线性的。

如果你想这样做很多（如果你是……质疑你的设计）并且想要一个特殊的模板，你可以：

```
template< typename K, typename V >
bool findByValue( std::map<K,V> const& theMap, K& key, const V& value )
{
    typename std::map<K,V>::const_iterator iter;
    for( iter it = theMap.begin(), itEnd = theMap.end(); it != itEnd; ++it )
    {
        if( it->second == value )
        {
            key = iter->first;
            return true;
        }
    }
    return false;
} 
```

或者 std::find_if 的自定义谓词

```
template< typename P > 
class Match2nd
{
   typedef typename P::second_type value_type;
   value_type val;

  public:

   explicit Match2nd( value_type const& v ) : val( v )
   {
   }

   bool operator()( P const& p ) const
   {
      return p.second == val;
   }
};

template< typename M > 
Match2nd< typename M::value_type >
makeMatch2nd( const M& map, typename M::mapped_type const& v )
{
    return Match2nd< M::value_type >( v );
} 
```

然后在您的代码中，您可以：

```
std::map< int, std::string >::const_iterator iter =
  std::find_if( ResourcesMap.begin(), ResourcesMap.end(), makeMatch2nd( value ) );

// if iter is end() the key doesn't exist, 
//if it does then iter->first is your key 
```

你当然可以把它变成一个函数..

使用 C++0x，您还可以将 Match2nd 放入 lambda 并放入 std::find。然而...

所有这些东西仍然是线性搜索。如果您的地图很大，请以其他方式或 boost::multi_index 或类似方式放入地图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:49:00.557

首先，如果您的 Key 是路径，为什么要按 ID 索引？

如果您将按文件路径查找，将其用作 Key，它会比迭代映射的每个键查找某个值更快。

第二个，恕我直言，我建议使用 const 值而不是`#define`s，`#define`s 没有类型，因此如果执行一些意外的数据转换可能会很麻烦，我是强值类型的忠实粉丝。

尝试这个：

```
// The type of the ID of the Resources.
typedef int ObjectID;

// Current resources.
const ObjectID IDI_OBJECT_5001 = 5001;
const ObjectID IDI_OBJECT_5002 = 5002;

// The type of a map containing resources, you can assure that 
// a Resource ID would be stored, as you can see at the mapped type.
typedef std::map<const std::string, const ObjectID> idpath;

idpath ResourcesMap; 
```

第三，我不鼓励使用`map::operator[]`插入值，调用这个操作符你正在创建一个*空*对象，然后通过`operator=`映射类型的 分配新值；更不用说如果对象已经存在，就会被覆盖。因此，使用此运算符我认为您执行的操作比使用该`map::insert`方法要多：

```
ResourcesMap.insert(idpath::value_type("path_to_png_file1", IDI_OBJECT_5001));
ResourcesMap.insert(idpath::value_type("path_to_png_file2", IDI_OBJECT_5002)); 
```

所以，最后，在你的代码中做什么：

```
const ObjectID ID_NULL = 0;

ObjectID ResFiles::findResForBrew(string filePath) const // note the const ;)
{
    ObjectID Result = ID_NULL;
    // Perform the built-in map find, better than iterate the whole map.
    idpath::const_iterator Found = ResourcesMap.find(filePath);

    if (Found != ResourcesMap.end())
    {
        Result = Found->second;
    }

    return Result;
} 
```

请记住，此算法假设您可以交换您的 Key-Map 对，如果您不这样做，则需要迭代整个映射。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T11:35:18.143

好的，我找到了：

```
int ResFiles::findResForBrew(string filePath)
{
string value = filePath;
int key = -1;
for (it = ResourcesMap.begin(); it != ResourcesMap.end(); ++it)
{
    if(it->second.compare(filePath) == 0)
    {
        key = it->first;
        break;
    }
}
return key;
} 
```

# shell - cakephp 设置控制台路径

> ID：13582630
> 
> 赞同：1
> 
> 时间：2012-11-27T10:53:14.173
> 
> 标签：shell, cakephp, cron

我希望通过使用 cakephp shell 控制台脚本在 cakephp 2.0 中通过 cron 作业发送批量电子邮件。为此，我需要在 linux 的 .bashrc 中设置 PATH。我参考了[http://book.cakephp.org/2.0/en/console-and-shells.html](http://book.cakephp.org/2.0/en/console-and-shells.html) 我`export PATH="$PATH:/directory_name/web/cakephp/lib/Cake/Console"`在 .bashrc 的链接中写的。当我在控制台中写蛋糕时，它说：

```
The program 'cake' is currently not installed.  To run 'cake' please ask your administrator to install the package 'cakephp-scripts' 
```

我哪里错了？我该如何开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:54:29.390

您可以使用绝对路径来运行 Cake 的控制台：

```
$ /directory_name/web/cakephp/lib/Cake/Console/cake 
```

# wordpress - 在 WP 循环中显示某个帖子的所有分类

> ID：13582633
> 
> 赞同：0
> 
> 时间：2012-11-27T10:53:48.430
> 
> 标签：wordpress, taxonomy, custom-post-type

这可能是一个简单的问题，但我无法解决它。

我在 wordpress 中有一个自定义帖子类型的 WP_query 列表，我需要为列表中的每个项目显示一个适当的分类法（类别）。

我尝试使用谷歌搜索并通过 stackoverflow 进行搜索，但未能成功。

此外，这是我用来显示存在于某个帖子类型的所有分类 slug 的内容：

```
function get_taxonomy_classes($theID) {

        $post_type  = get_post_type($theID);
        $taxonomies = get_object_taxonomies($post_type, 'objects');

        $terms = get_terms($taxonomies, array(
            'orderby' => 'name',
            'order' => 'ASC',
            'hide_empty' => TRUE
        ));
        foreach($terms as $term) {
            echo $term->slug . " ";
        }

    } 
```

仍然没有找到将这些术语与上述分类法一起使用的方法:(

请帮忙，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:10:20.550

没关系，伙计们。我自己找到了答案。

这很简单，你只需要 wp_get_object_terms() 函数

```
 $termss = wp_get_object_terms(get_the_ID(), 'portfolio_category');
   foreach ($termss as $term) {
      echo $term->slug;
   } 
```

# asp.net - 通过 .net 应用程序使用的 URL 列表/数据源

> ID：13582634
> 
> 赞同：1
> 
> 时间：2012-11-27T10:53:54.747
> 
> 标签：asp.net, .net, c#-4.0

我想要一个 URL 列表，这样我就可以有常用 url 的建议，并将文本框绑定到它作为数据源。

我假设世界上每个isp都有它，google +goolechrome +firefox可以使用它，我怎样才能掌握这种常见的信息资源？

我会很感激任何线索至少从哪里开始......所以最终我可以在`.net`环境中使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:36:24.837

您可以访问此站点并尝试获取数据表中显示这些信息的所有详细信息。

[http://www.google.com/adplanner/static/top1000](http://www.google.com/adplanner/static/top1000)

搜索此表并尝试编写 C# 代码可能会擦除此表之前和之后的 HTML。

```
<table id="data-table"> 
```

我对此进行了分析，他们正在使用显示/隐藏功能在此表中显示整个数据。

所以只是一个想法，这里有一些提示：

*   阅读本网站的整个 HTML。将其存储在文本文件中。
*   在此之前和之后执行子字符串并擦除所有 HTML `<table>`
*   使用一些正则表达式提取此表中存在的必要数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:12:52.643

因此，您似乎有两种选择：

*   [http://www.alexa.com](http://www.alexa.com) =>[他们由亚马逊管理并有一个 API。](http://aws.amazon.com/alexatopsites/)成本：每个返回的 URL 0.0025 美元。
*   [Compete.com](https://www.compete.com/plans/) => 以每月 199 美元的价格为您提供前 20000 个站点以及其他内容。

# javascript - 如何使用 JS 打印 HTML 部分？

> ID：13582641
> 
> 赞同：1
> 
> 时间：2012-11-27T10:54:15.420
> 
> 标签：javascript, html, css, printing, html5-canvas

我正在使用 html2Canvas.js 将 HTML 元素转换为画布，然后将画布转换为图像使其浏览器兼容打印，这是打印 HTML 的正确方法吗？我发现图像是在任何打印机中获得类似打印的最佳方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:22:05.857

如果将此代码添加到您的 CSS：

```
.toPrint {
  display:none;
  width: 100%;
  position: fixed;
  top: 0;
  left: 0;
}

@media print {
   * {
    display: none !important;
  }

  .toPrint {
    display: block !important;
  }

} 
```

并在您希望更新打印视图时使用此代码：

```
/** code borrowed from @MicrosoftGoogle */
var canvas = document.getElementById("mycanvas");
var img    = canvas.toDataURL("image/png");

if (document.getElementsByClassName("toPrint")) {
  document.getElementsByClassName("toPrint")[0].src = img;
else
  document.write('<img class="toPrint" src="'+img+'"/>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:59:40.930

您可以使用 javascript 功能进行打印

```
<div onlick='window.print()'>Print</div> 
```

# excel - ＃姓名？重命名我的所有“ThisWorksheet”模块后出错

> ID：13582644
> 
> 赞同：3
> 
> 时间：2012-11-27T10:54:22.643
> 
> 标签：excel, vba, macos, rename

我有一个包含许多工作表和大量数据的 Excel 工作簿。我的 VBA 函数之一如下。它一直运行良好。

```
Function TextResult(Name As String) As String
  Select Case Name
    Case Is = "Text1"
      Name = "Result1"
    Case Is = "Text2"
      Name = "Result2"
    Case Is = "Text3"
      Name = "Result"
  End Select
End Function 
```

然后我添加了一个重命名我的模块的 Sub：

```
Sub Whats_In_A_Name()
    ThisWorkbook.VBProject.VBComponents("Module1").name = "TextResult"
    ThisWorkbook.VBProject.VBComponents("Module2").name = "Name2"
End Sub 
```

这个给出了一个错误，但将它们全部重命名，包括它自己。

但现在我得到一个#NAME？使用这些模块的所有单元格都出现错误，这些模块与上述模块类似，因此所有 Case 函数。而且我不知道如何纠正这个问题。任何人的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T11:56:09.743

如上：

为您的 UDF 使用不同的名称，而不是包含该函数的模块的确切名称。

# php - php $_SESSION 未通过 login.php 文件发送

> ID：13582650
> 
> 赞同：7
> 
> 时间：2012-11-27T10:54:28.463
> 
> 标签：php, session, windows-xp, xampp

我在 windows xp32 和几天前创建了我的网站。然后重新安装同类型的windows（专业xp 32bit）。

现在我的网站无法正常工作。`$_SESSIONS`没有发送，我想知道 Windows 是否与此有关（因为我关闭了一些启动服务`msconfig->services`）。我怀疑的另一件事是`XAMPP`. 在我发现问题后，我`php.ini`在 Apache 中编辑了 1000 次，但并没有解决问题。在谷歌，很多人抱怨常见问题。他们说他们改变了服务器，现在没有发送会话。

我是 php 新手，不知道到底发生了什么。

有人可以帮我提供一些关于问题可能出在哪里的提示，而且我想知道使用会话替代方案是否是一种好习惯，例如，如果用户是`logged_in()->send`数据`mysql-> SET logged_in = 1;`，如果 l `ogout() -> SET logged_in = 0`。或者别的什么。关于这个问题的每一个信息都会有所帮助。谢谢！

这是确切的代码情况：项目链接：[http](http://dox.bg/files/dw?a=e2f056d0f2) ://dox.bg/files/dw?a=e2f056d0f2 我有这个登录表单：

```
 <form action="login.php" method="post">
            <ul>
                <li>
                    <input type="text" name="username">
                </li>
                <li>
                    <input type="password" name="password">
                </li>
                <li>
                    <input type="submit" value="login">
                </li>
                <li>
                    <a href="register.php">register</a>
                </li>
            </ul>    
        </form> 
```

在 login.php 我有这个：

```
...
    else 
                    {  
                    $_SESSION['user_id'] = $login;
                    //... $_SESSION['user_id'] works here and outputs the correct data - user_id
                    header('Location: index.php');
                    exit();
... 
```

在 int.php（它包含在`index.php`）中我有这个：

```
session_start();

print_r(session_get_cookie_params()); echo '<br>'; // outputs: Array ( [lifetime] => 0 [path] => / [domain] => [secure] => [httponly] => ) 
print_r(session_status());  echo '<br>'; // output: 2

var_dump($_SESSION); // output: array(0) { } 
print_r($_SESSION);
print_r($_SESSION['user_id']); // outputs: "Notice: Undefined index: user_id in C:\xampp\htdocs\orderfood\Core\int.php on line 10"

require 'database/connect.php';
require 'functions/general.php';
require 'functions/users.php';
require 'functions/options.php';

if(logged_in() === true)//this is ok.
{

$session_user_id = $_SESSION['user_id'];  // <-------- not working... 
```

...脚本继续

**固定的。**我无法准确解释出了什么问题，但我删除`session_start()`了`core/int.php`（顺便说一下，路径是在没有'core/'的情况下编写的），我`session_start()`在我的`index.php`和需要登录用户的文件中添加了。

这为我解决了这个问题。实际上，这似乎是一个愚蠢的错误。我在以前的窗口中运行了该网站，但我不小心删除了它，并且我在墨水中提供的文件来自旧备份，我相信它一直在工作，但事实并非如此.. 抱歉，新手发帖，谢谢请注意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T02:55:59.320

一个解决方案是`ini_set(' session.save_path','SOME WRITABLE PATH');`在所有脚本文件中声明，但这会很痛苦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:15:09.333

您需要将 包含`session_start()`在所有文件中。此外，不要使用`session_close()`or `session_destroy()`，因为它会清除所有会话变量。

当您重定向时，问题就来了。因此，请在开始时检查两者`login.php`并`index.php`拥有`session_start()`。

如果您提供 PHP 文件的完整源代码，它将很容易调试。

* * *

### 看到文件后：

您已添加此行：

```
include '/core/int.php'; 
```

在所有文件中，应将其替换为：

```
include 'core/int.php'; 
```

这是因为，这不是一台 linux 机器，而且，你在这里给出了相对路径或绝对路径`C:\XAMPP\`等。希望这能解决这个问题。

# php - 当用户在 wordpress 中按注销时重定向到登录页面

> ID：13582651
> 
> 赞同：0
> 
> 时间：2012-11-27T10:54:35.853
> 
> 标签：php, wordpress

当用户单击注销时我遇到问题，他被重定向到 wordpress 的登录页面，而我希望他被重定向到网站的登录页面。

这是我正在尝试的标题链接，但它不起作用：

```
header("Location:http://".$_SERVER['HTTP_HOST']."/ngo/wp-login.php?action=logout".
           "&redirect_to=http://".$_SERVER['HTTP_HOST']."/ngo/?page_id=56");

get_header(); 
```

`ngo/?page_id=56`是登录页面的永久链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T10:58:50.073

像这样的东西：

```
add_action( 'wp_logout', 'my_redirect' );

function my_redirect() {
    wp_redirect( 'http://whatever_you_like.com' );
} 
```

WordPress 有一个挂钩系统，您可以在其中挂钩最重要的时刻。使用上面的代码，我们只是说我们想在注销时处理一些事情，我们的处理程序回调在哪里。

如果你有课，我也可以给你 OOP 风格。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T11:26:21.963

尝试为此目的使用 WP[功能。](http://codex.wordpress.org/Function_Reference/wp_logout_url)参数是注销时重定向到的 URL。：

```
<?php echo wp_logout_url( $redirect ); ?> 
```

# vtiger - 更改 vtiger 中的图形颜色

> ID：13582652
> 
> 赞同：0
> 
> 时间：2012-11-27T10:54:37.903
> 
> 标签：vtiger

我正在使用 Vtiger CRM。我想更改仪表板中的水平和垂直图形颜色。我试着做`modules/dashboard/horizontal_bargraph.php`，`modules/dashboard/vertical_bargraph.php`但它正在改变。

我从 1 周开始就一直在尝试解决这个问题。请帮助我

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:16:09.630

您需要更改的行在“/modules/Dashboard/vertical_bargraph.php”中

```
if($theme == 'bluelagoon')
    $fill =& Image_Graph::factory('gradient', array(IMAGE_GRAPH_GRAD_HORIZONTAL_MIRRORED, 'blue', 'white'));

elseif($theme == 'softed')
    $fill =& Image_Graph::factory('gradient', array(IMAGE_GRAPH_GRAD_HORIZONTAL_MIRRORED, 'blue', 'white'));

else
    $fill =& Image_Graph::factory('gradient', array(IMAGE_GRAPH_GRAD_HORIZONTAL_MIRRORED, 'black', 'white')); 
```

我尝试改变价值观，它奏效了。只需阅读 if 语句并找出您的 vTiger 设置的主题

# events - 在 GWT 应用程序中，我应该使用不同的事件（和事件处理程序）来切换到每个视图吗？

> ID：13582662
> 
> 赞同：3
> 
> 时间：2012-11-27T10:55:02.437
> 
> 标签：events, gwt, mvp

我正在 GWT 中编写一个菜单，该菜单根据单击的条目打开一个视图。问题是我有很多不同的观点（~20）。

现在的设计是：菜单使用 eventBus 触发一个事件，AppController 捕获它，将它添加到 History 并打开正确的 Presenter（传递给它正确的 View）。

我不确定创建很多事件，如 "GoToXXX1" 、 "GoToXXX2" 等是正确的方法，我应该使用带有参数的单个事件吗？我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:44:15.577

是的，我不太确定这是正确的方法：

我会做以下事情：

1.  使用键“#-url”创建一个哈希图，如#view1、#page1 等，并为视图赋值 HashMap mapView = new hashMap(); 如果您的视图不是 Composite 使用 Widget 或任何基类。

2.  在菜单上，使用 Anchor 类并执行 .setHref("view1")、.setHref("page1") 等。

3.  添加一个 History.addValueChangeHandler(yourAppController);

4.  当您捕获历史事件时，获取值然后执行 mapView.get(historyEvent);

5.  绘制从哈希图中获得的视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T16:09:12.310

将 iframe 嵌入 html 后，您可以使用`History.newItem()`and ：`History.addValueChangeHandler()`

```
<iframe src="javascript:''"
          id="__gwt_historyFrame"
          style="width:0;height:0;border:0"></iframe> 
```

[https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsHistory](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsHistory)

# javascript-events - 获取日历中任何日期的事件或 HTML 对象

> ID：13582668
> 
> 赞同：3
> 
> 时间：2012-11-27T10:55:23.567
> 
> 标签：javascript-events

我正在尝试为日历中的某些现有日期设置颜色。我知道如何设置日期的背景颜色。

如果我手动选择日期，我将使用此代码`onclick= 'fSetSelectedDayShow(this)'`。

```
function fSetSelectedDayShow(evnt){
    var selectedDate=evnt.firstChild.innerHTML; 
    evnt.style.backgroundColor = '#66FF66';
} 
```

如果我从日历中手动选择任何日期，这一切正常。

现在我想反过来。我有日期，我想在日历中设置颜色。

例如，我想在加载屏幕时为日历的 9 日、11 日和 13 日着色。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:35:48.133

您的问题与 JavaScript 事件无关。你的例子

```
onclick='fSetSelectedDayShow(this)' 
```

不是真正的 JavaScript 事件处理程序，而是当 onlclick 事件触发时被包装到匿名事件处理程序中的用户函数

```
function(evt) {
  return fSetSelectedDayShow(evt.originalTarget);
} 
```

为了实现日历中特定日期的着色，我只需使用 CSS。很可能您使用某种服务器端代码或 JavaScript 来呈现您的页面，因此您可以有条件地为`class`您希望着色的那些日子的标签添加一些价值。

使用 PHP 呈现 HTML 的示例可能是：

```
<div class="calendarDay <?php echo in_array(date('d', $timestamp), array(9, 11, 13)) ? 'colorThis' : '' ?>">
  <?php echo date('d', $timestamp) ?>
</div> 
```

那么显然你需要一个 CSS 类，比如：

```
.colorThis {
  background-color: #66FF66;
} 
```

# sql - SELECT CASE 语法错误

> ID：13582671
> 
> 赞同：0
> 
> 时间：2012-11-27T10:55:30.313
> 
> 标签：sql, tsql, select-case

我有以下@temp 表：

```
------------------------------------
|Condition_ID   Operator   Order    |
|     1            ==        1      |
|     2            <>        3      |
|     3            ==        2      |
------------------------------------ 
```

我想实现一个 SELECT CASE，它将根据 Operator 输出特定消息

然而，这给我一个`Incorrect syntax near the keyword 'PRINT'.`错误。

```
SELECT CASE
    WHEN Operator LIKE '=='
        THEN PRINT 'EQUALS'
    WHEN Operator LIKE '<>'
        THEN PRINT 'NOT EQUALS'
END AS Operator
FROM @temp 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:56:27.247

你不能混合`PRINT`和`SELECT`

```
SELECT CASE WHEN Operator LIKE '=='
            THEN 'EQUALS'
            WHEN Operator LIKE '<>'
            THEN 'NOT EQUALS'
       END AS Operator
FROM @temp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:00:35.750

你只需要删除`PRINT`

```
SELECT CASE
    WHEN Operator LIKE '=='
        THEN 'EQUALS'
    WHEN Operator LIKE '<>'
        THEN 'NOT EQUALS'
END AS Operator
FROM @temp 
```

您不能在 a 中使用 a `PRINT`，`SELECT`也不需要 -`SELECT`将为您检索适当的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:05:12.673

这工作::

```
 SELECT CASE
    WHEN opr LIKE '=='
        THEN 'EQUALS'
    WHEN opr LIKE '<>'
        then 'NOT EQUALS'
    else
        'wrong i/p'
    end
as operator
FROM tbl1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T11:07:05.117

试试这个，没有打印选项

```
SELECT CASE 
        WHEN Operator LIKE '=='
        THEN 'EQUALS'
        WHEN Operator LIKE '<>'
        THEN 'NOT EQUALS'
   END AS Operator
   FROM @temp 
```

# indexing - 索引非键列上的 CQL SELECT 大于查询

> ID：13582673
> 
> 赞同：8
> 
> 时间：2012-11-27T10:55:37.787
> 
> 标签：indexing, cassandra

EDIT1：在原始问题之后添加了一个案例来描述问题。

我希望查询不属于我的键的列。如果我理解正确，我需要在该列上定义一个二级索引。但是，我希望使用大于条件（不仅仅是相等条件），这似乎仍然不受支持。

我错过了什么吗？你会如何解决这个问题？

我想要的设置：

```
Cassandra 1.1.6
CQL3

CREATE TABLE Table1(
             KeyA int,
             KeyB int,
             ValueA int,
             PRIMARY KEY (KeyA, KeyB)
           );

CREATE INDEX ON Table1 (ValueA);

SELECT * FROM Table1 WHERE ValueA > 3000; 
```

由于 Cassandra 1.1.6 仍然不支持使用复合键在 ColumnFamilies 上定义二级索引，因此我必须解决删除其中一个键的临时解决方案，但我仍然遇到不相等条件的相同问题。

有没有另一种方法来解决这个问题？

感谢您的时间。

相关来源： [http ://cassandra.apache.org/doc/cql3/CQL.html#selectStmt](http://cassandra.apache.org/doc/cql3/CQL.html#selectStmt) [http://www.datastax.com/docs/1.1/ddl/indexes](http://www.datastax.com/docs/1.1/ddl/indexes)

* * *

编辑1

这是一个可以解释问题的案例。正如 rs-atl 所指出的，这可能是一个数据模型问题。假设我在 stackoverflow 上保留了所有用户的列族。对于每个用户，我保留了一批统计数据（Reputation、NumOfAnswers、NumOfVotes ......它们都是整数）。我想查询这些统计信息以获取相关用户。

```
CREATE TABLE UserStats(
             UserID int,
             Reputation int,
             NumOfAnswers int,
             .
             .
             .
             A lot of stats...
             .
             .
             .
             NumOfVotes int,
             PRIMARY KEY (UserID)
           ); 
```

现在我有兴趣根据这些统计数据对 UserID 进行切片。我想要所有信誉超过 10K 的用户，我想要所有答案少于 5 个的用户，等等。

我希望这会有所帮助。再次感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-09T22:29:47.727

在 CQL 中，`WHERE`一旦为所有列创建了索引（即二级索引），就可以在所有列上应用该子句。否则，您将收到以下错误：

```
Bad Request: No indexed columns present in by-columns clause with Equal operator 
```

[不幸的是，即使使用二级索引，由于性能问题](http://wiki.apache.org/cassandra/SecondaryIndexes)，CQL 要求 WHERE 子句在二级索引上至少有一个 EQ 。

> **问：为什么二级指标上总是需要至少进行一次 EQ 比较？**
> 
> 答：二级索引的不等式总是在内存中完成，因此如果另一个二级索引上没有至少一个 EQ，您将加载数据库中的每一行，这对于庞大的数据库不是一个好主意。因此，通过在（辅助）索引上要求至少一个 EQ，您希望将需要读入内存的行集限制在可管理的大小。（虽然显然你仍然会遇到麻烦）。

因此，基本上，如果除了 EQ 比较之外还有任何其他内容，它会加载所有“否则匹配”查询的行，并检查它们是否匹配，一次一个。默认情况下不允许这样做，因为它“可能很慢”。（本质上，索引只索引“平等”而不是像关系数据库上索引的 < 和 > 之类的其他任何东西）。

需要注意的一件事是，如果您在二级索引上有多个非 EQ 条件，您还需要`ALLOW FILTERING`在查询中包含关键字，否则您将得到

`Cannot execute this query as it might involve data filtering and thus may have unpredictable performance. If you want to execute this query despite the performance unpredictability, use ALLOW FILTERING`

一种简单的解决方法是将虚拟列附加到表中，其中所有行在该列上具有相同的值。因此，在这种情况下，您可以仅对所需列执行范围查询。请务必意识到 NoSQL 数据库上的此类查询可能会很慢/使系统陷入困境。

* * *

**例子**

```
cqlsh:demo> desc table table1;

CREATE TABLE table1 (
  keya int,
  keyb int,
  dummyvalue int,
  valuea int,
  PRIMARY KEY (keya, keyb)
) ....

cqlsh:demo> select * from Table1;

 keya | keyb | dummyvalue | valuea
------+------+------------+--------
    1 |    2 |          0 |      3
    4 |    5 |          0 |      6
    7 |    8 |          0 |      9 
```

在 ValueA 和 DummyValue 上创建二级索引：

```
cqlsh:demo> create index table1_valuea on table1 (valuea);
cqlsh:demo> create index table1_valueb on table1 (dummyvalue); 
```

`ValueA`使用执行范围查询`DummyValue=0`：

```
cqlsh:demo> select * from table1 where dummyvalue = 0 and valuea > 5 allow filtering;

 keya | keyb | dummyvalue | valuea
------+------+------------+--------
    4 |    5 |          0 |      6
    7 |    8 |          0 |      9 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T17:30:49.280

在 Cassandra 中处理这种情况的最灵活的方法可能是为每个 stat 设置一个单独的 CF，将 sentinel 值作为键，将 stat 值作为列名，如下所示：

```
CF: StatName {
  Key: SomeSentinelValue {
    [Value]:[UserID] = ""
  }
} 
```

因此，假设您的统计数据是 NumAnswers，而您的用户 ID 是字符串：

```
CF: NumAnswers {
  Key: 0 {
    150:Joe = ""
    200:Bob = ""
    500:Sue = ""
  }
  Key: 1000 {
    1020:George = ""
    1300:Ringo = ""
    1300:Mary = ""
  }
} 
```

因此，您可以看到您的键本质上是值的桶，可以根据您的数据需要粗粒度或细粒度，并且您的列是值 + 用户 ID 的组合。您现在可以为您需要的粗略范围（相等性）向 Cassandra 提供一个已知键（或一组键），然后对列名的第一个组件进行范围查询。请注意，您*不能*将用户 ID 写为值，因为这会阻止两个用户具有相同的计数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-12T21:47:07.350

主键 (KeyA, KeyB) );

在 Table1 (ValueA) 上创建索引；

SELECT * FROM Table1 WHERE ValueA > 3000;

`Cassandra way`就是要有一些分区键并始终使用它，可能有一个集群列，`ValueA`然后`PRIMARY KEY ((KeyA, KeyB), ValueA)`使用如下：

`select * from Table1 where KeyA='xx' and ValueA > 3000`

# java - java HashMap 包含 Set 作为键和 arraylist 作为值

> ID：13582678
> 
> 赞同：-1
> 
> 时间：2012-11-27T10:56:03.783
> 
> 标签：java

嗨，我的代码有问题。

```
String[] vArr = new String[4];
vArr[0] = "329~abc-2~PACKET_DATA_GATEWAY_IP_ADDRESS~1.2.3.4";
vArr[1] = "328~abc-1~PACKET_DATA_GATEWAY_IP_ADDRESS~1.1.1.1";
vArr[2] = "329~abc-2~PACKET_DATA_GATEWAY_PORT_NUMBER~123";
vArr[3] = "328~abc-1~PACKET_DATA_GATEWAY_PORT_NUMBER~123";

if(vArr != null && vArr.length > 0) {
    System.out.println("vArr.length ::" + vArr.length);                 
    ArrayList<VehicleTO> aprogList = new ArrayList<VehicleTO>();            

    for(int i = 0;i < vArr.length; i++) {
        System.out.println("Inside for loop ::" + vArr.length);
        String[] iData = vArr[i].split("~");
        System.out.println("value retrieved :" + Arrays.toString(iData));
        HashMap<Set, ArrayList<VehicleTO>> programValues = 
                             new HashMap<Set, ArrayList<VehicleTO>>();

        String programName = null;
        programName = iData[1];

        HashSet<String> listnerOutputArgList = new HashSet<String>();
        listnerOutputArgList.add(programName);
        Collections.unmodifiableSet(listnerOutputArgList);

        String progId = null;
        String paramName = null;
        String paramvalue = null;
        progId = iData[0];
        paramName = iData[2];
        paramvalue = iData[3];                  

        VehicleTO vehTO = new VehicleTO();                      
        vehTO.setProgramName(programName);

        if(paramName.equals("PACKET_DATA_GATEWAY_IP_ADDRESS")) {    
            vehTO.setIpAddress(paramvalue);         
        }
        System.out.println("Setting Values ip ::" + vehTO.getIpAddress());

        if(paramName.equals("PACKET_DATA_GATEWAY_PORT_NUMBER")) {   
            vehTO.setPortNumber(paramvalue);                
        }
        System.out.println("Setting Values port ::" + vehTO.getPortNumber());

        if(listnerOutputArgList.contains(vehTO.getProgramName())) {
            aprogList.add(vehTO);
        }
        int progDet = aprogList.size();

        System.out.println("The list value:"+ progDet);         

        programValues.put(listnerOutputArgList,aprogList);

        for (Iterator<Set> it = programValues.keySet().iterator(); it.hasNext()) {
            Set key = it.next();
            if(programValues.containsKey(key)) {
                programValues.get(key).add(vehTO);
                ArrayList<VehicleTO> value = programValues.get(key);

                for (int nCount = 0; nCount < value.size(); nCount++) {
                         System.out.println((String)value.get(nCount).getIpAddress());
                         System.out.println((String)value.get(nCount).getPortNumber());
                }
        } 
    }       
} 
```

输出需要显示为：

```
abc-1   1.2.3.4  123
abc-2   1.1.1.1  123 
```

但我的问题是列表值显示为：4 而不是 2，因为输出是错误的。

如何解决这个问题：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:12:06.250

我没有试图找到答案；最好先简化，使其更具可读性。我看到您对 java 7 仍然不太有信心，因此重写了一些代码：

使用`Set<String>`.

```
 for (Set<String> key : programValues.keySet()) {
             ArrayList<VehicleTO> value = programValues.get(key);
             value.add(vehTO);
             for (VehicleTO vTO : value) {
                 System.out.println((String)vTO.getIpAddress());
                 System.out.println((String)vTO.getPortNumber());
             }
         } 
```

# asp.net - 避免复制大型应用程序

> ID：13582687
> 
> 赞同：4
> 
> 时间：2012-11-27T10:56:36.413
> 
> 标签：asp.net, visual-studio, version-control, alm

我管理一个非常大的网络/数据库应用程序（目前大约 80 个 ASPX 页面）。这在我们的客户之间共享（例如，他们都通过相同的 URL 访问相同的应用程序）。

我还将单个 ASPX 页面上传到实时服务器，而不是编译版本，以允许我在不同时间处理站点的不​​同部分。

我现在面临一个挑战，新客户希望自己在自己的服务器上托管应用程序。这将涉及在上传之前修改大约 3 个页面。

我以前从来没有遇到过这个挑战，但是有没有办法避免仅仅为了那些微小的变化而复制整个应用程序？以后我需要管理原始应用，加上客户自己托管的版本，但不一定要每个新版本上传两次，还要管理修改后的3个页面的不同版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:29:51.137

我以前做过这种事情，我认为只有 3 页一个全新的“叉子”是矫枉过正的。并不是说我是说“不要使用源代码控制”。（你*最好*使用某种源代码控制）但是对于三个页面，我认为最简单的解决方案是一些简单的重定向逻辑。

我假设当这些特定用户登录到您的系统时，您有某种“全局变量”，表明他们是相关公司的成员。在您尝试替换的 3 个页面中，只需放置类似`if (companyName == "specialCompany") Server.Transfer("specialCompanyDirectory/anotherPage.aspx");` 或其他内容。出于理智考虑，我建议将所有三个被替换的页面都放在一个单独的目录中。然后在“specialCompanyDirectory”中每个页面的顶部确保检查当前用户确实是“specialCompany”的成员。

根据您的应用程序和页面的逻辑，您可能需要执行重定向以外的操作；就像使用单独的 Web 用户控件一样。

无论哪种方式，为 3 页更改创建一个完全独立的应用程序似乎都是错误的方法。如果您要更改一大堆页面，请查看 TFS 分支、[SVN 分支](http://subversion.apache.org/)或其他软件。

**编辑：**

通常，分支被设计为保持独立，直到您最终合并它们。如果你让它们永远不同，而各个分支正在发展，它们彼此之间没有任何关系；因此，如果您要对“主”分支中的这 3 个页面之一进行小幅更改，那么您也必须在“specialCompany”分支中再次进行更改。

我建议你使用我上面最初描述的方法，因为你的编辑很少。我建议您使用某种全局方法来决定何时使用特殊方法，以便您可以跟踪在哪里进行这些特殊更改。例如，在 App_Code 中的某处添加一个方法，如下所示：

```
public String companySpecialMethod()
    {
        if (Request.ServerVariables["HTTP_HOST"].ToString().ToLower().Contains("somespecialdomain.com"))
        {
            return "somespecialdomain";
        }
        else if (Request.ServerVariables["HTTP_HOST"].ToString().ToLower().Contains("anotherspecialdomain.com"))
        {
            return "anotherspecialdomain";
        }
        else
            return "";
    } 
```

然后在您的代码中，您可以执行以下操作：

```
if (companySpecialMethod() == "")
{
    //run a normal method
    normalMethod();
}
else if (companySpecialMethod() == "somespecialdomain")
{
    //run a special method, just for somespecialdomain
    somespecialdomainMethod();
}
else if (companySpecialMethod() == "anotherspecialdomain")
{
    //run a special method, just for anotherspecialdomain
    anotherspecialdomainMethod();
} 
```

**然而**

如果你真的想为这个解决方案使用源代码控制（如果你认为你会做很多这种类型的事情，这可能是最好的主意），那么你可以试试这个：

![在此处输入图像描述](../Images/7da93abb379e7843019a385acf5aad56.png)

假设您希望所有代码都在一个存储库中：您基本上创建一个存储库（主存储库），其中仅包含所有项目中完全相同的代码。这样，您的所有基本代码都将保持最新；您在正常项目中所做的任何更改也将传播到您的特殊项目。

（您不必在下一部分执行此操作*，*但最佳实践是将所有代码放在某种源代码控制中）然后为每个“特殊”目录创建一个新存储库。

此方法将确保您将所有代码都保存在源代码管理中，并且您不必复制对“基本”代码的更改。

至于源代码管理软件，我更喜欢[SVN](http://subversion.apache.org/)，但这只是我。:) TFS 也是一个很好的产品，它的工作原理与 SVN 类似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T11:52:18.793

首先，80页很小。

其次，源代码控制将是一件好事。

有 MSDN 许可证吗？最多五个用户可以免费访问 TFS 服务。

# javascript - 选择时更改网格行颜色

> ID：13582689
> 
> 赞同：0
> 
> 时间：2012-11-27T10:56:40.447
> 
> 标签：javascript, jquery, asp.net

我想在选择一行时更改行颜色，但在那之后，我无法重置另一行的先前颜色。我正在使用 jQuery 函数。

注意：此网格中的所有行都有一个交替的颜色系统。

**Javascript代码：**

```
function ChangeRowColor(rowID) {
    $('#' + rowID).removeClass('DataRow');
    $('#' + rowID).addClass('DataRow1');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:10:41.407

不要删除原来的类

```
function ChangeRowColor(rowID) {
    $('tr').removeClass('highlighted');
    $('tr#' + rowID).addClass('highlighted');
} 
```

对类进行`.highlighted`所有更改，将其从所有行中删除并将其添加到您想要的单行中。

# sql - ORA-30036: 无法在撤消表空间 'UNDO' 中将段扩展 8

> ID：13582692
> 
> 赞同：1
> 
> 时间：2012-11-27T10:56:51.523
> 
> 标签：sql, oracle, batch-file

我正在尝试更新具有数百万条记录的表。但是，我的更新查询将更新大约 2-3 百万条记录。

我在执行更新查询时遇到以下错误。我用谷歌搜索，发现我需要将表空间更新为 DBA

但是是否有任何解决方法可以在不实际扩展 UNDO 表空间或不需要 dba 的情况下执行更新

> > UPDATESERVICE SET CREATION_TIME = LAST_UPDATE_TIME 其中 CREATION_TIME 为空

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T11:02:03.207

我希望添加 rownum < 1000000 （或其他数字）并在执行之间发出提交可以解决它，但是您应该适当地调整撤消表空间的大小。

# c++ - 在这种情况下如何解耦

> ID：13582702
> 
> 赞同：2
> 
> 时间：2012-11-27T10:57:30.273
> 
> 标签：c++, qt, decouple

例如，下面的代码片段做了这些事情：首先从数据库中读取数据，然后转换数据，最后将结果写回数据库。进一步来说：

1.  从数据库中读取数据并将它们逐条记录存储到A类中。
2.  逐条转换存储在 A 类中的数据，B 类完成这项工作。
3.  将所有结果存储在 QVariantList 中并批量写入 ihe 数据库。

问题是 A 类、B 类和 ReadTransWrite 类之间的紧密耦合如果我想在 A 类中添加一个成员变量 A4，则需要更改 3 个类。查看以“//-->”开头的评论

如何解耦？有什么模式可以推荐吗？有什么建议吗？

片段：

```
class A {
public: 
    void trans(QSqlQuery query){
        A1 = query.record().field("A1").value().toString();
        A2 = query.record().field("A2").value().toDate();
        A3 = query.record().field("A3").value().toInt();
        //--> A4 = query.record().field("A4").value().toDouble();
    }
public:
    QString A1;
    QDate A2;
    int A3;
    //--> double A4;
};

class B {
public:
    void trans(const A& a){
        B1 = A1;
        B2 = A2;
        B3 = A3;
        //--> B4 = A4;
    }
public:
    QString B1;
    QDate B2;
    int B3;
    //--> double B4;
};

class ReadTransWrite {
.....
    void do();
.....
}

void ReadTransWrite::do(){
    ....
    // prepare for batch insert into the database
    QVariantList B1s;
    QVariantList B2s;
    QVariantList B3s;
    //--> QVariantList B4s;

    A a;  // read record by record from data base
    B b;  // transform the results record by record

    QString sql_read = "select A1, A2, A3 from table0";
    //--> QString sql_read = "select A1, A2, A3, A4 from table0";
    QSqlQuery query_read;
    query_read.exec(sql_read);
    while(query_read.next()){
        a.trans(query_read);    // read record by record from data base
        b.trans(a);             // transform the results record by record
        B1s.push_back(b.B1);
        B2s.push_back(b.B2);
        B3s.push_back(b.B3);
        //--> B4s.push_back(b.B4);
    }

    QSqlQuery query_write;
    QString sql_write = "insert into table (B1, B2, B3) values (:B1, :B2, :B3)";
    //--> QString sql_write = "insert into table (B1, B2, B3, B4) values (:B1, :B2, :B3, :B4)";
    query_write.prepare(sql_write);

    query_write.bindValue(":B1",B1s);
    query_write.bindValue(":B2",B2s);
    query_write.bindValue(":B3",B3s);
    //--> query_write.bindValue(":B4",B4s);

    query_write.execBatch();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:26:20.803

你可以像这样制作A类：

```
#include <QtCore/QVariant>
#include <QtSql/QSqlRecord>

class A 
{
public: 
    void fillFromRecord( const QSqlRecord& record )
    {
        for( int iColumn = 0; iColumn < record.count(); iColumn++ )
        {
            _contentMap.insert( 
                record.fieldName( iColumn ), 
                record.value( iColumn )
                );
        }
    }

    inline QVariantMap getContentMap() const { return _contentMap; }

private:
    QVariantMap _contentMap;
}; 
```

*注意：我没有测试该代码的编译错误，但它至少应该给你一个大致的想法。*

这样，每当数据库更改时，A 类就永远不会更改。

另请注意，您如何只要求`QSqlRecord`而不是`QSqlQuery`更多地致力于`sehe`评论中链接的得墨忒耳法则。

您可以根据需要更改地图的类型，例如 QHash< int, QVariant > 仅存储列索引而不是名称并且不需要额外的 QMap 功能（基本上是排序）也可能就足够了。

# database - 如何限制插入数据库

> ID：13582708
> 
> 赞同：2
> 
> 时间：2012-11-27T10:57:58.717
> 
> 标签：database, constraints, informix

向数据库的插入操作添加约束的最佳方法是什么？我有一个小表，其中一列是版本号。我想验证版本号是否只会随着插入的每一行而增加。我目前正在通过从表中获取最新版本号并在“代码端”（而不是“数据库端”）上进行条件检查来做到这一点。我想知道是否有更优雅的方法来做到这一点？（例如，添加不会使表的其余部分无效的约束）。顺便说一句，我正在使用informix。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:33:28.773

您可以使用触发器。有`INSERT`语句示例：

```
create trigger check_ver_trg insert on my_small_table
referencing new as new
for each row (execute procedure check_version(new.version)); 
```

`check_version()`您可以按照以下说明使用： http `RAISE EXCEPTION`: [//publib.boulder.ibm.com/infocenter/idshelp/v10/index.jsp ?topic=/com.ibm.sqls.doc/sqls949.htm](http://publib.boulder.ibm.com/infocenter/idshelp/v10/index.jsp?topic=/com.ibm.sqls.doc/sqls949.htm)

# sharepoint - SharePoint 将网站徽标链接重定向到根网站集主页

> ID：13582710
> 
> 赞同：19
> 
> 时间：2012-11-27T10:57:59.670
> 
> 标签：sharepoint, sharepoint-2013

我希望母版页中的网站徽标链接始终重定向到根网站集主页。默认行为是重定向到当前网站 (spweb) 的主页。

回到 SharePoint 2010，我可以通过将 NavigateUrl 属性添加到母版页中的 SPLinkBut​​ton 控件来完成此操作，其值为 ~sitecollection，如下所示：

```
<SharePoint:SPLinkButton runat="server" NavigateUrl="~sitecollection/" id="onetidProjectPropertyTitleGraphic">
<SharePoint:SiteLogoImage name="onetidHeadbnnr0" id="onetidHeadbnnr2" LogoImageUrl="/_layouts/images/siteIcon.png" runat="server"/>
</SharePoint:SPLinkButton> 
```

但是，在 SharePoint 2013 中，网站徽标链接的控件已在母版页中更改为 SPSimpleSiteLink。我尝试以相同的方式为此控件设置 NavigateUrl 属性，但它似乎不再起作用。

```
<div id="siteIcon" class="ms-tableCell ms-verticalAlignTop">
  <SharePoint:AjaxDelta id="DeltaSiteLogo" BlockElement="true" runat="server">
    <SharePoint:SPSimpleSiteLink NavigateUrl="~sitecollection/" CssClass="ms-siteicon-a" runat="server" id="onetidProjectPropertyTitleGraphic" >
      <SharePoint:SiteLogoImage CssClass="ms-siteicon-img" name="onetidHeadbnnr0" id="onetidHeadbnnr2" LogoImageUrl="/_layouts/15/images/siteIcon.png?rev=23" runat="server"/>
    </SharePoint:SPSimpleSiteLink>
  </SharePoint:AjaxDelta>
</div> 
```

作为一种解决方法，我现在删除了 AjaxDelta 包装控件，并将 SPSimpleSiteLink 更改为旧的 SPLinkBut​​ton，并添加了 NavigateUrl 属性。这似乎有效。

有没有更好的方法？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-30T09:17:02.507

关于 MSDN **SharePoint：SPSimpleSiteLink**是一个“非常简单的控件，它提供指向当前站点的链接此控件与启用 MDS 的母版页中的部件版式控件兼容”

如果您希望网站徽标链接始终重定向到网站集根网站，请使用**SharePoint:SiteLogoImage**（我们在 SP 2010 中使用过）

```
<SharePoint:AjaxDelta id="DeltaSiteLogo" BlockElement="true" runat="server">
<SharePoint:SPLinkButton runat="server" NavigateUrl="~sitecollection/" id="onetidProjectPropertyTitleGraphic">
                    <SharePoint:SiteLogoImage  name="onetidHeadbnnr0" id="onetidHeadbnnr2" LogoImageUrl="images/logo.png" runat="server">
                                </SharePoint:SiteLogoImage>
              </SharePoint:SPLinkButton> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-05T09:37:50.707

正如[Muawiyah Shannak](https://stackoverflow.com/users/2335221/muawiyah-shannak)提到的，您只需将**SharePoint:SPSimpleSiteLink**替换为 SharePoint:SPLinkBut **​​ton**控件。

如果您使用的是**SharePoint Design-Manager** Snippet Tool，则必须编辑以下两行（开始和结束标记）

```
<!--MS:<SharePoint:SPSimpleSiteLink runat="server" CssClass="ms-siteicon-a" ID="x7917ecc8c38d4bd69f58e338eab54c8c">-->
[...]
<!--ME:</SharePoint:SPSimpleSiteLink>--> 
```

对此

```
<!--MS:<SharePoint:SPLinkButton runat="server" NavigateUrl="~sitecollection/" CssClass="ms-siteicon-a" ID="x7917ecc8c38d4bd69f58e338eab54c8c">-->
[...]
<!--ME:</SharePoint:SPLinkButton>--> 
```

最好使用动态控件，然后将其设置为永久链接，这样您就可以在其他站点集合上重复使用您的模板，而无需更改静态根链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T15:41:04.260

如果您需要永久链接，为什么要使用一些 SharePoint/ASP.NET 控件 - 只需在母版页中设置此链接 :))) 认为这是最简单的方式，适用于任何版本的 SharePoint。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-28T08:41:15.160

我也一样，`NavigateUrl`不工作。因此，即使您尝试`href`使用 JQuery 更改属性，稍后的一些脚本也会用当前站点 url 覆盖 href。唯一的方法是更改​​“a”元素的 id 以防止覆盖。ID 更改会导致 Sharepoint javascript 错误，因此您必须使用与徽标元素相同的旧 ID 创建一个虚拟隐藏`a`元素。所有这些工作都使用“*西雅图*”母版页。

所以在**$(document).ready**中执行以下操作：

```
//read old link id
var oldLogoId = $("#DeltaSiteLogo > a").attr('id');
//change the id
$("#" + oldLogoId).attr('id','CustomSiteLogo');
//create dummy hidden element
$("#DeltaSiteLogo > a").after("<a id='tmpDeltaSiteLogo' href='#' style='display:none'>Dummy</a>");
//set the dummy id with old id value
$("#tmpDeltaSiteLogo").attr("id",oldLogoId );
//alter the link to point to the webroot 
$("#CustomSiteLogo").attr('href', window.location.protocol + "//" + window.location.host); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-03T17:10:32.837

在 NavigateUrl 中使用 ../。这将到达父站点。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-18T12:10:13.233

如果您需要动态链接，您可以在母版页中使用 UserControl。例如，如果您希望始终指向根地址，但该根地址在多个环境中是不同的，您可以在用户控件中执行以下操作：

```
<asp:HyperLink CssClass="ms-siteicon-a" runat="server" ID="TG_CustomSiteLink" ToolTip="Home">
        <SharePoint:SiteLogoImage CssClass="ms-siteicon-img" name="onetidHeadbnnr0" id="onetidHeadbnnr2" LogoImageUrl="/_layouts/15/images/siteIcon.png?rev=23" runat="server" AlternateText="Home"/>
</asp:HyperLink> 
```

在您的代码隐藏中：

```
public partial class CustomSiteLogoLink : UserControl
{
    protected void Page_Load(object sender, EventArgs e)
    {
        var uri = HttpContext.Current.Request.Url;
        var url = uri.ToString();
        var rootUrl = url.Replace(HttpUtility.UrlDecode(uri.PathAndQuery), String.Empty);
        this.TG_CustomSiteLink.NavigateUrl = rootUrl;
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-10-30T03:20:52.477

对于站点集合重定向选项，将属性添加`NavigateUrl`到此标记并将其值设置为“~sitecollection”对于站点当前站点重定向选项，将属性添加`NavigateUrl`到此标记并将其值设置为`"~site"`

```
NavigateUrl="~sitecollection/"
NavigateUrl="~site/" 
```

[点击这里查看更多详情](http://peakfinders.blogspot.in/2015/10/when-click-subsite-logo-to-redirect-to.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-01-16T09:34:57.337

这是我能找到的最简单的 sln，用于链接到主页的简单徽标

```
<SharePoint:SPLinkButton id="index" ClientIDMode="Static"  CssClass="page-logo" runat="server" NavigateUrl="~sitecollection/">
<img src="<asp:Literal runat='server' Text='<%$SPUrl:~sitecollection/Style Library/images/logo.png%>' />" alt="Logo" />
</SharePoint:SPLinkButton> 
```

PS是的，试图在`<%$SPUrl:~sitecollection...`外面做`<asp:Literal`抛出异常。

# android - FTP 上传 Ftp 获取错误：553 无法打开该文件

> ID：13582715
> 
> 赞同：1
> 
> 时间：2012-11-27T10:58:20.607
> 
> 标签：android, ftp

当我通过 AndFtp 上传我的图像文件时没有收到任何错误，但是当我通过我自己的 SimpleFTP 上传我的文件时，我收到了 Ftp 错误：553 无法打开该文件：权限被拒绝。为什么它会发生。这是快速高效的为安卓上传图片的方法。

# autohotkey - 映射 AppsKey+Up 以启用 Page up？（自动热键脚本）

> ID：13582716
> 
> 赞同：2
> 
> 时间：2012-11-27T10:58:28.050
> 
> 标签：autohotkey

我已经尝试了以下所有方法，但我无法让它工作。

AppsKey & Up::PgUp

*AppsKey & Up::PgUp

AppsKeyUp::{PgUp}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:56:00.453

```
AppsKey & Up::Send, {PGUP} 
```

使用热键需要使用发送。

# c# - 键盘事件无法正常工作

> ID：13582717
> 
> 赞同：0
> 
> 时间：2012-11-27T10:58:27.107
> 
> 标签：c#, windows-8, winrt-xaml

我创建了一个运行良好的游戏，但我在键盘命令部分遇到了问题。当我单击屏幕上的某个位置时，我的 KeyDown 事件不起作用。我猜想具有 KeyDown 事件处理程序的控件失去了焦点，我的应用程序没有收到消息。我花了一周的时间试图解决这个问题。

我试图为更多控件设置 KeyDown 事件。我还尝试设置处理事件但未成功的控件的焦点。

如果有人告诉我在我的游戏中处理按键集合的正确方法是什么，我将不胜感激，这将在我的应用程序中发生任何事情。我只想知道用户何时按下箭头键以更改内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T07:39:06.657

我刚刚遇到了类似的问题，但我随后在 LayoutAwarePage.CoreDispatcher_AcceleratorKeyActivated 中了解了他们是如何做到的，并且似乎一切都按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T18:59:59.720

我没有早点回答，因为系统不允许我做，因为我没有10个声望点，所以我不得不等待8个小时。

这是我输入的，但似乎它需要在那里声明一些我不知道如何制作的东西。

```
this.AddHandler(UIElement.KeyUpEvent, new RoutedEventHandler(KeyUp), true); 
```

错误信息是

**委托 Windows.UI.Xaml.RoutedEventHandler 表示将处理路由事件的方法。错误：“KeyUp”没有重载与委托“Windows.UI.Xaml.RoutedEventHandler”匹配。**

将用作事件处理程序的函数具有以下格式：

```
private void KeyUp(object sender, KeyRoutedEventArgs e)
{
} 
```

我找到了一种绕过我的问题的方法，我想与你分享它以防万一其他人需要它，但如果其他人知道更好的方法让我知道。

我在页面的可见区域放置了一个按钮，并使用了它的 KeyUp 事件，并编写了代码以确保它始终处于活动状态。您可以在下面找到我的代码。

```
public frmMain()
{
    this.InitializeComponent();

    btnKeboardCollector.Loaded += MyBoard_Loaded;
    btnKeboardCollector.LostFocus += btnKeboardCollector_LostFocus;
    btnKeboardCollector.KeyUp += KeyUpHandler;
}

void MyBoard_Loaded(object sender, RoutedEventArgs e)
{
    // I do other initialization here

    btnKeboardCollector.Focus(Windows.UI.Xaml.FocusState.Programmatic);
}

void btnKeboardCollector_LostFocus(object sender, RoutedEventArgs e)
{
    btnKeboardCollector.Focus(Windows.UI.Xaml.FocusState.Programmatic);
}

private void KeyUpHandler(object sender, KeyRoutedEventArgs e)
{
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:10:25.580

我不确定 WinRT，但在 WPF 中，您可以通过添加这样的处理程序来捕获所有子控件的路由事件。

```
this.AddHandler(UIElement.PreviewKeyDownEvent, new RoutedEventHandler(OnKeyDown), true); 
```

这是父控件。它也适用于 WinRT，请尝试

**编辑**

替换`UIElement.PreviewKeyDownEvent`为`UIElement.KeyDownEvent`如果`UIElement.PreviewKeyDownEvent`WinRT 中不存在

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-02T16:42:37.847

我刚刚找到了一个非常直接的解决方案。无论元素是否聚焦，它总是有效。

**一：功能**

```
private void onAcceleratorKey(object sender, AcceleratorKeyEventArgs e)
{
    CoreVirtualKeyStates ctrl = Window.Current.CoreWindow.GetAsyncKeyState(VirtualKey.Control);

    if (ctrl == CoreVirtualKeyStates.Down)
    {
        switch (e.VirtualKey)
        {
            case VirtualKey.F:
                // CTRL + F pressed.
                break;
        }
    }
} 
```

**二：事件**

```
Window.Current.CoreWindow.Dispatcher.AcceleratorKeyActivated += onAcceleratorKey; 
```

# vb.net - DateDiff 计算问题 - 月

> ID：13582722
> 
> 赞同：0
> 
> 时间：2012-11-27T10:58:40.217
> 
> 标签：vb.net, winforms, datediff

请任何人都可以为我阐明这一点，并可能提出解决方案。

我正在创建一个自定义日历，用于安排活动。

在构造函数中，我传入 2 个日期（*startDate*和*endDate*）

该表单有一个 FlowLayoutPanel，然后填充了月份的 UserControls。

我遇到的问题是，当我`DateDiff(DateInterval.Month, startDate, endDate)`使用以下日期执行 a 时：*startDate = 22/11/2012, endDate = 28/02/2013*结果是*3*。

但是，实际上，在日历上，我需要显示 4 个月——11 月、12 月、1 月和 2 月。

尽管如此，对于*startDate = 12/11/2012, endDate = 01/03/2012 ，逻辑工作正常*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:17:13.740

[来自DateDiff](http://msdn.microsoft.com/en-us/library/b5xbyt6f%28v=VS.80%29.aspx)上的 MSDN 文档

> 如果 Interval 设置为 DateInterval.Year，则返回值仅根据 Date1 和 Date2 的年份部分计算。类似地， **DateInterval.Month 的返回值纯粹根据参数的年份和月份部分计算，而 DateInterval.Quarter 的返回值则根据**包含两个日期的季度计算。
> 
> **例如，当比较 12 月 31 日和下一年的 1 月 1 日时，DateDiff 为 DateInterval.Year、DateInterval.Quarter 或 DateInterval.Month 返回 1，即使最多只过去了一天。**

这意味着计算不考虑剩余的“天”，

可能您应该构建您的自定义日历，而不是使用 DateDiff 来查找所涉及的月份。
相反，您应该使用这样的伪代码：

```
 Dim curMonth = startDate.Month
 Dim curYear = startDate.Year
 while curMonth <= endDate.Month andalso curYear <= endDate.Year
     AddCalendar(curMonth, curYear)
     curMonth = curMonth + 1
     if curMonth > 12 then 
         curMonth = 1
         curYear = curYear + 1
     end if
 end while 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:19:30.420

如果我理解正确，即使日期之间的实际差异小于 3 个月，您也会希望显示 4 个月。一种解决方案是这样的：

```
Dim startDate = #11/22/2012# 'Nov 22nd
Dim endDate = #2/2/2013# 'Feb 2nd

Dim startMonth = new DateTime (startDate.Year, startDate.Month, 1)
Dim endMonth = new DateTime (endDate.Year, endDate.Month, 1).AddMonths (1)
Dim diff = DateDiff (DateInterval.Month, startMonth, endMonth) 
```

# c# - 从不同的线程清空一个txt文件？

> ID：13582723
> 
> 赞同：0
> 
> 时间：2012-11-27T10:58:48.627
> 
> 标签：c#, io

我使用以下内容来清空 txt 文件：

```
System.IO.File.WriteAllText(path, string.Empty); 
```

当我一次运行多个线程并且他们尝试同时访问文件时，问题就出现了。

关于简单修复的任何想法？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:10:06.417

多线程来拯救！

您应该使用`Monitor`,`AutoResetEvent`或`lock`块（实际上它是一个监视器）以同步对整个文件的访问。

```
public class SomeClass
{
     private readonly static object _sync = new object(); 

     public void WriteAllText()
     {
          lock(_sync)
          {
               File.WriteAllText("myfile.txt", "Hello world from a synchronized file access!!!");
          }
     }
} 
```

}

这样你就可以防止多个线程同时访问同一个文件。

在此处了解`lock`块：

[http://msdn.microsoft.com/en-us/library/c5kehkcz(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/c5kehkcz(v=vs.110).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:04:18.443

你可能应该调查一下`FileStream`。有一个很好的例子说明你在[这里](http://blogs.msdn.com/b/csharpfaq/archive/2012/01/23/using-async-for-file-access-alan-berman.aspx)尝试做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:15:35.603

我会考虑的另一种方法是让一个队列为单个编写器线程提供服务。想要写入文件的所有其他线程通过将文本项添加到队列末尾来执行此操作。writer 线程从队列的前面删除文本项并将它们写入文件。您可以使用 lock 语句来同步对队列对象的访问，并使用 AutoResetEvent 对象在向队列中添加内容时向编写者线程发出信号，让其知道队列中有需要处理的内容。

# ruby-on-rails-3 - 表单帖子中缺少参数 [：id]

> ID：13582729
> 
> 赞同：0
> 
> 时间：2012-11-27T10:59:14.657
> 
> 标签：ruby-on-rails-3, forms, routing, params

我知道我错过了一些东西..我不知道如何解决它。

我有一个具有`body`属性的消息模型。

控制器位于`users/messages_controller.rb`

我的路线

```
 namespace :users do
    resources :messages
  end 
```

这给

```
users_messages     GET    /users/messages(.:format)           users/messages#index
                   POST   /users/messages(.:format)           users/messages#create
new_users_message  GET    /users/messages/new(.:format)       users/messages#new
edit_users_message GET    /users/messages/:id/edit(.:format)  users/messages#edit
users_message      GET    /users/messages/:id(.:format)       users/messages#show
                   PUT    /users/messages/:id(.:format)       users/messages#update
                   DELETE /users/messages/:id(.:format)       users/messages#destroy 
```

我创建了一个部分，我通过它在用户/显示上呈现

```
 <%= render :partial => 'users/messages/sendme' %> 
```

_sendme.html.erb

```
<%= form_tag(users_messages_path) do %>
         <%= text_area_tag "Message" %>
         <%= submit_tag 'Submit' %>
<% end %> 
```

但是当我提交一条消息时，它会进入 messages_controller 中的创建操作，我无法提取发送消息的用户的 ID。我得到的参数是

```
pry(#<Users::MessagesController>)> params
=> {"utf8"=>"Γ£ף",
 "authenticity_token"=>"IrcPBHgBp/BI...mBbOQx7gcJc5xNtAFs=",
 "Message"=>"test",
 "commit"=>"Submit",
 "action"=>"create",
 "controller"=>"users/messages"} 
```

users/show 的 URL 是`http://localhost:3000/users/24` 我需要添加什么才能在参数中获取用户的 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:15:24.850

如果您`@user`的表单中有可用的，请在其中创建一个`hidden_field_tag`，如下所示：

```
<%= hidden_field_tag :id, @user.id %> 
```

然后，当您提交表单时，`params[:id]`将填充为`@user.id`.

# iphone - 在 json Parsing 为 ios 中的变量分配特殊的 carecter

> ID：13582740
> 
> 赞同：0
> 
> 时间：2012-11-27T10:59:37.090
> 
> 标签：iphone, objective-c, ios

当我在执行此行时解析我的 Json 文件时

```
model.userProfileObj.userFirstName = [NSString stringWithFormat:@"%@",[[responseDict valueForKey:@"Profile"] valueForKey:@"first_name"]]; 
```

Profile 是我的字典， first_name 是它的内部变量。像：

```
[
    {
        "Profile": {
            "id": "13",
            "user_id": "13",
            "first_name": "Myname",
            "profile_image": "13-IMG_169.png",
        }
    }
] 
```

将以下字符串分配给 model.userProfileObj.userFirstName 但我只需要 MyName 而不是 ( 和 " 在变量中。

```
(
    "Myname"
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:08:01.953

```
-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSString *returnString=[[NSString alloc]initWithData:dataReceivedG encoding:NSASCIIStringEncoding];
    SBJSON *jsonParser=[[SBJSON alloc]init];
    NSDictionary *_dict=(NSDictionary *)[jsonParser objectWithString:returnString error:nil];
    NSLog(@"----%@",_dict);
    NSArray *_arrData=(NSArray *)[_dict ob
    //NSDictionary *_dictResponse=(NSDictionary *)[_objectForKey:@"profile"];
    NSLog(@"===%@",_arrData);
    for (int j=0; j<[_arrData count]; j++) 
    {
        [arrayListG addObject:[[_arrData objectAtIndex:j]valueForKey:@"first_name"]];
    }
} 
```

检查这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:22:49.003

如果你有一个带有 JSON 内容的字符串，你可以使用一个正则表达式

```
 NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"Myname:\\\"([^\\\"]*)\\\"" options:0 error:NULL];
    NSTextCheckingResult *match = [regex firstMatchInString:apiResponse options:0 range:NSMakeRange(0, [apiResponse length])];

    NSString *encodedPoints = [jsonAsString substringWithRange:[match rangeAtIndex:1]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T13:39:04.047

您的结果`responseDict`是数组格式，您将它用作字典，这就是为什么您会得到这样的结果

```
(
    "Myname"
) 
```

所以只需在你的代码中做一件事..`[responseDict objectAtIndex:0]`

**你的代码**

```
model.userProfileObj.userFirstName = [NSString stringWithFormat:@"%@",[[[responseDict objectAtIndex:0] valueForKey:@"Profile"] valueForKey:@"first_name"]]; 
```

# javascript - 使用 RequireJS 时包含在所有页面上的通用 JavaScript 代码

> ID：13582743
> 
> 赞同：0
> 
> 时间：2012-11-27T10:59:47.547
> 
> 标签：javascript, requirejs

如何使用 RequireJS，并为所有页面提供一些通用的 JavaScript 代码？如果我在模板中有一个带有 datamain 的脚本标签（在所有页面上使用），那么我可以在需要他们需要的其他页面上使用 require(...) 吗？这会导致加载顺序出现问题吗？对吗？我还想在模板中有第二个脚本标签，它有所有的公共代码（在 RequireJS 之外）。这是唯一的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:47:49.173

**strong text** > 你如何使用 RequireJS，并有一些通用的 JavaScript 代码

> 所有页面？

这个问题的答案会有所帮助 - [RequireJS 如何处理多个页面和部分视图？](https://stackoverflow.com/questions/10815454/how-does-requirejs-work-with-multiple-pages-and-partial-views/10816983#10816983)

> 然后我可以在需要他们需要的其他页面上有一个 require(...) 吗？这会导致加载顺序出现问题吗？对吗？

不，这很好。如果你愿意，你可以调用同一个模块，它只会被加载一次。一个常见的例子是多个 require 调用都需要`jquery`。您每次都需要它来确保它的存在，但没有任何惩罚，因为 RequireJS 足够聪明，可以只获取一次。

编辑以回答评论：请求 jQuery 和/或 jQuery UI 作为定义或要求的依赖项，然后回调将执行：

```
require(['jquery', 'jquery-ui'], function($) {
    // jQuery is passed in as first argument but as jquery-ui
    // merely augments jQuery we don't need it as the second argument
}); 
```

这是 RequireJS 的真正基础（需要依赖项并在它们准备好时执行代码），因此可能值得[详细阅读文档（非常棒）](http://requirejs.org/docs/api.html)。

最后要注意的是，您需要在`paths`配置中设置 jQuery 的路径，我不确定 jQuery UI 是否将自身注册为模块。如果没有，您将需要使用`shim`config 选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:10:07.447

创建您的文件并将代码放入其中，如下所示

```
 define(function () {
            this.myProp = '';
    }) 
```

在 requirejs.conf 中设置文件的路径

```
 path { myfile: 'js/myfile'} 
```

您现在可以像这样加载它

```
require([myfile], function (myfile) {
    console.log(myfile.myProp)
}) 
```

# jsf - JSF/ Facelets 针对不同用户的不同视图

> ID：13582745
> 
> 赞同：0
> 
> 时间：2012-11-27T10:59:49.757
> 
> 标签：jsf, facelets

我必须实现一种机制，通过基于登录用户加载正确的 facelet 视图。通过调用服务动态构建加载视图的根路径，并将其存储在会话中。此外，视图可以放在war包外的文件夹中。在我的 facelet 视图中，我使用占位符“皮肤视图”来识别将被替换的部分。

例如：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets" 
xmlns:h="http://java.sun.com/jsf/html"
xmlns:c="http://java.sun.com/jstl/core"     
template="/facelets/template.xml">

    ...
    <ui:define name="content">
       <ui:include src="skin-views/content.xhtml">
    </ui:define>
    ...

</ui:composition> 
```

在上面的代码片段中，页面模板包含在 war 包中，而占位符“skin-view”由构建正确查找路径的自定义 ResourceResolver 替换。

例如：

```
skin-views => /home/user/skins/customSkin/
skin-views/content.xhtml => /home/user/skins/customSkin/content.xhtml 
```

在 web.xml 中，我设置了以下参数：

```
<context-param>
    <param-name>facelets.REFRESH_PERIOD</param-name>
    <param-value>2</param-value>
</context-param>

<context-param>
    <param-name>facelets.VIEW_MAPPINGS</param-name>
    <param-value>*.xhtml</param-value>
</context-param>

<context-param>
    <param-name>facelets.DEVELOPMENT</param-name>
    <param-value>false</param-value>
</context-param>

<!-- Added just for removing an annoying error message on startup -->
<context-param>
    <param-name>facelets.RECREATE_VALUE_EXPRESSION_ON_BUILD_BEFORE_RESTORE</param-name>
    <param-value>false</param-value>
</context-param>

<context-param>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>client</param-value>
</context-param> 
```

总之，我第一次登录时视图加载正确，但如果我注销并使用不同皮肤的不同用户登录，则包含的片段与 previuos 用户相同。我想我对 facelets 缓存机制的理解是错误的。我试过 facelets.REFRESH_PERIOD 等于 0 但没有任何改变。

在此先感谢您的帮助

# php - 如何将变量设为特征私有？

> ID：13582747
> 
> 赞同：17
> 
> 时间：2012-11-27T10:59:57.033
> 
> 标签：php, oop, traits

我想在一个类中多次重用一个功能。此功能依赖于私有变量：

```
trait Address {
    private $address;

    public function getAddress() {
        return $this->address;
    }

    public function setAddress($address) {
        $this->address = $address;
    }
} 
```

我发现[使用 trait 两次](https://stackoverflow.com/questions/13582061/how-to-use-a-trait-several-times-in-a-class)的唯一方法是：

```
class User  {
    use Address {
        getAddress as getHomeAddress;
        setAddress as setHomeAddress;

        getAddress as getWorkAddress;            
        setAddress as setWorkAddress;
    }
} 
```

问题是，通过这样做，私有变量`$address`在不同的方法之间共享，并且代码将无法按预期工作：

```
$user = new User();
$user->setHomeAddress('21 Jump Street');
echo $user->getWorkAddress(); // 21 Jump Street 
```

有没有真正使用该特征两次而不共享其私有变量的解决方案？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-27T11:29:13.330

声明一个 trait`use`不会创建该 trait 的实例。特征基本上只是复制并粘贴到使用类中的代码。`as`只会为该方法创建一个别名，例如它会添加类似

```
public function getHomeAddress()
{
    return $this->getAddress();
} 
```

到您的用户类。但它仍然只是那一个特征。不会有两种不同的`$address`属性，而只有一种。

您可以将方法设为私有，然后`__call`通过切换/封装方法名称并使用数组作为地址，将任何公共调用委托给它，例如

```
trait Address {
    private $address = array();

    private function getAddress($type) {
        return $this->address[$type];
    }

    private function setAddress($type, $address) {
        $this->address[$type] = $address;
    }

    public function __call($method, $args) {
        switch ($method) {
            case 'setHomeAddress':
                return $this->setAddress('home', $args[0]);
            // more cases …
        }
    }
} 
```

但这只是一罐蠕虫。

换句话说，你不能理智地做你试图用特质做的事情。要么使用两个不同的特征。或者使用好的旧聚合并添加具体的代理方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-14T10:22:22.007

我参加聚会可能有点晚了，但是您尝试创建的行为不应该由特征所涵盖，而是由简单的对象组合所涵盖。

```
<?php
class Adddress {
    private $street;
    private $number;
    public function __construct(string $street, ?string $number) {}
    public function street() : string {}
    public function number() : string {}
}
class User {
    private $homeAddress;
    private $workAddress;
    public function getHomeAddress() : Address {}
    public function setHomeAddress(Address $homeAddress) : self {}
    public function getWorkAddress() : Address {}
    public function setWorkAddress(Address $workAddress) : self {}
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T18:54:35.380

我确认你可以多次使用同一个函数的别名，这让我很惊讶。尽管 ZendStudio 似乎只对函数的最后一个别名进行“代码辅助”。

如果 Trait 函数可以确定它被称为什么名称，那么能够多次为同一个函数命名可能会产生一些有趣的行为。但似乎我们无法确定特征函数中的“别名”函数。

这是我的测试代码：

```
<?php
trait TestTrait
{
    public function test() { print __CLASS__ . ', ' . __TRAIT__ . ', ' . __METHOD__ . ', ' . __FUNCTION__  . "\n"; }
}
class TestClass
{
    use TestTrait { test as test1; test as test2; }
}
$c = new TestClass();
$c->test1();
$c->test2(); 
```

输出：

```
TestClass, TestTrait, TestTrait::test, test
TestClass, TestTrait, TestTrait::test, test 
```

也许`__ALIAS__`为特征函数添加一个新常量来确定它们被称为什么别名会很好。

事实上，我为此创建了 PHP 功能请求：

[https://bugs.php.net/bug.php?id=63629](https://bugs.php.net/bug.php?id=63629)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-07-29T12:43:47.583

几年后，我跟进了[错误 63629](https://bugs.php.net/bug.php?id=63629)中的评论并产生了以下内容：

```
<?php
trait TestTrait
{
    private $addresses = [];
    public function getAddress() {
        $calledAs = debug_backtrace(DEBUG_BACKTRACE_IGNORE_ARGS, 1)[0]['function'];
        return $this->addresses[substr($calledAs, 3)];
    }

    public function setAddress($address) {
        $calledAs = debug_backtrace(DEBUG_BACKTRACE_IGNORE_ARGS, 1)[0]['function'];
        $this->addresses[substr($calledAs, 3)] = $address;
    }
}
class TestClass
{
    use TestTrait { getAddress as getHomeAddress; setAddress as setHomeAddress; }
    use TestTrait { getAddress as getWorkAddress; setAddress as setWorkAddress; }
}
$c = new TestClass();

$c->setHomeAddress("High Street, Luton");
echo $c->getHomeAddress();
echo "\n";
$c->setWorkAddress("Business Name, London");
echo $c->getWorkAddress();
echo "\n"; 
```

哪个输出

```
High Street, Luton
Business Name, London 
```

可以办到！（感谢 Dave Farrell，他的回答启发了这一点。）[debug_backtrace](https://www.php.net/manual/en/function.debug-backtrace.php)的论点是为了尽量减少内存使用，我不确定这对性能有多大影响。

# wpf - 当父类型可以不同时，如何在 wpf 中访问父的 DataContext？

> ID：13582753
> 
> 赞同：2
> 
> 时间：2012-11-27T11:00:19.137
> 
> 标签：wpf, xaml, binding, datacontext

我需要在 wpf xaml 中访问父级的 DataContext。整个 xaml 页面代码是动态的。所以不知道父母的类型。

我正在写这个

```
<Grid DataContext={Binding Path=.}> 
```

它是否正确？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T11:05:29.270

请记住，如果`DataContext`未显式设置，它将继承其父级的`DataContext`. 如果由于某种原因这不起作用，你应该看看 binding with [`RelativeSource`](http://msdn.microsoft.com/en-us/library/ms743599.aspx)。

像这样的东西可能会起作用：

```
<Grid DataContext="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}, Path=DataContext}}" 
```

鉴于`Grid`有一个类型的祖先`Window`（我认为所有控件都应该有）。

# javascript - Node.js 接收外部静态文件

> ID：13582758
> 
> 赞同：0
> 
> 时间：2012-11-27T11:00:32.960
> 
> 标签：javascript, node.js, express

假设我目前在`www.random1.com`和有两台服务器`www.random2.com`。如果我当前的node.js服务器运行`www.random1.com`并需要从`www.random2.com`（ex.www.random2.com/static/javascript/script.js）获取静态文件（html，js，css），有什么方法可以做到这一点?

我实现这一目标的主要目标如下：

1.  重用来自不同服务器的静态文件
2.  稍微修改从另一台服务器接收到的静态文件，然后在当前服务器中呈现它们（例如删除/添加一些 html，替换 html 文件中的 .css 等）

例子：

*   请求`www.random1.com/index.html`
*   `www.random1.com`获取服务器`www.random2.com/index.html`（连同引用的 .js、.css 文件）
*   服务器 at`www.random1.com`对收到的文件进行轻微修改
*   服务器渲染到`www.random.com/index.html`（使用所需的 javascript，还加载了原始 html 文件中的 css 文件，因此我也必须获取这些文件）

我目前正在尝试通过 Express 来完成这项工作，但也非常欢迎一般的 Node.js 实现。

笔记：

这是我要求将来参考的一个问题，以防出现某些我对静态文件服务器的访问受限的情况（例如，仅允许在工作时访问服务器等）。我知道实现一种方法实际上会更容易，我可以只保留相同资源的两个副本，或者我可以从中分支并合并的源管理系统。

欢迎所有答案。

请告诉我你的智力和经验的广度。

# sql - 带有更新的 IBM DB2 9.7 公用表表达式

> ID：13582765
> 
> 赞同：0
> 
> 时间：2012-11-27T11:01:08.620
> 
> 标签：sql, db2, common-table-expression

我在尝试着：

1.  选择一行并将其命名为 CTE
2.  更新该表 CTE 的一些列

我正在使用公用表表达式来实现它，但我无法让它工作。

```
Begin
With CTE AS
(select * from MyTable where Column1 is null order by Column2 desc
(Update CTE
Set Column3= 1, Column4 = 1, Column5 = 1))
Commit; 
```

我尝试遵循 DB2 规范，但仍然遇到问题 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:56:25.913

通常，CTE 的语法看起来更像这样。注意括号。

```
With CTE AS
(
  select * from MyTable where Column1 is null order by Column2 desc
)
Update CTE
Set Column3= 1, Column4 = 1, Column5 = 1; 
```

但是[此文档](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=/com.ibm.db2z10.doc.apsg/src/tpc/db2z_createcte.htm)建议您不能将 UPDATE 语句与 CTE 一起使用。

> 只要有全查询语句，您就可以定义公用表表达式。例如，您可以在 SELECT、INSERT、SELECT INTO 或 CREATE VIEW 语句中包含公用表表达式。

* * *

**可能的解决方法**

如果 CTE 不可更新，只需删除 CTE，然后编写 UPDATE 语句。您在这里根本不需要 ORDER BY。这看起来像一个等效的 UPDATE 语句。

```
update MyTable
set ...
where Column1 is null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-19T21:34:39.920

这个怎么样

```
UPDATE (
  SELECT * FROM MYTABLE WHERE COLUMN1 IS NULL ORDER BY COLUMN2 DESC
  FETCH FIRST 1 ROW ONLY
)
SET COLUMN3= 1, COLUMN4 = 1, COLUMN5 = 1; 
```

或者，如果您想要更多的灵活性，也许我对这个 [如何在 DB2 中以优化方式更新多个查询的回答](https://stackoverflow.com/questions/32562728/how-to-update-multiple-queries-in-optimized-way-in-db2/51432004#51432004)

# c# - 另一个窗体关闭后主窗体上的更新

> ID：13582770
> 
> 赞同：2
> 
> 时间：2012-11-27T11:01:33.687
> 
> 标签：c#, wpf, winforms, visual-studio-2010

我正在使用 Visual Studio 2010 创建 C# Windows 窗体应用程序。在主表单中，我有一个按钮，可以打开辅助表单，使用`ShowDialog()`它对数据库进行一些更新。当用户保存数据并关闭该表单时，我需要`ListView`从数据库更新我的主表单。关闭辅助表单时如何触发 ListView 上的更新？我尝试了鼠标事件来进行更新，`ListView`但这有点晚了。有什么事件可以用来实现这一目标吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T11:04:14.783

如果您使用 ShowDialog() ，则在表单关闭后从下一个字符串继续执行：

```
var updateForm = new UpdateForm();
updateForm.ShowDialog();

// Here it was closed
UpdateMainForm(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:11:38.930

看起来您想在用户完成子表单的更改并关闭它后立即更新主表单上的列表视图。

如果这是真的，主窗体可以订阅处理程序到 subform.closure 事件。在事件处理程序中，您可以从数据库更新列表视图。

不要忘记从 subform.closing 取消订阅处理程序。

# asp.net - 远程调试 ASP.Net 网站

> ID：13582782
> 
> 赞同：1
> 
> 时间：2012-11-27T11:02:23.250
> 
> 标签：asp.net, visual-studio-2010, iis, remote-debugging

有没有办法远程调试 ASP.Net 网站（不是 Web 应用程序）。我看到的一个问题是即使在调试中也没有创建 pdb 文件。

我知道远程调试器，并且在 Web 应用程序和 Windows 服务中使用它没有问题，但似乎无法让它在网站上工作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-06T13:54:11.810

您必须使用 visualstudio 进行调试，然后将这些 .pdb 文件部署到远程 iis bin 文件夹。

还要检查远程 web.config：

```
<system.web>
   <compilation debug="true" />
</system.web> 
```

# macos - OS X - 拦截手势

> ID：13582785
> 
> 赞同：3
> 
> 时间：2012-11-27T11:02:30.617
> 
> 标签：macos, cocoa

有人可以告诉我 BetterTouchTool 等应用程序如何拦截系统范围的鼠标和触控板手势吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:08:28.113

事实证明，在 EventTap API 的帮助下，BTT 等应用程序正在使用私有的 MultiTouch API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:11:18.160

这个答案也应该适用于手势：
**[How to emulate the cmd-shift-4 screen capture interface?](https://stackoverflow.com/questions/6288772/how-to-emulate-the-cmd-shift-4-screen-capture-interface)**

除非您想在自定义视图/窗口中覆盖*“触摸和手势事件”*方法，例如`NSResponder`

*   `magnifyWithEvent:`

*   `rotateWithEvent:`

*   `swipeWithEvent:`

# mysql - MySQL：当 WHERE 找到相似条目时选择最高列值

> ID：13582789
> 
> 赞同：3
> 
> 时间：2012-11-27T11:02:35.160
> 
> 标签：mysql, sql, select, max, where

我的问题与[此](https://stackoverflow.com/questions/612231/how-can-i-select-rows-with-maxcolumn-value-distinct-by-another-column-in-sql)类似，但不完全相同。

我有一个包含大量书籍的数据库，其中一些相同书名的不同版本。我正在寻找一条 SQL 语句，它为我使用 WHERE 子句（以查找特定的丛书）提供我选择的每个标题的最高版本号。表格如下所示：

```
|id|title                    |edition|year|
|--|-------------------------|-------|----|
|01|Serie One Title One      |1      |2007|
|02|Serie One Title One      |2      |2008|
|03|Serie One Title One      |3      |2009|
|04|Serie One Title Two      |1      |2001|
|05|Serie One Title Three    |1      |2008|
|06|Serie One Title Three    |2      |2009|
|07|Serie One Title Three    |3      |2010|
|08|Serie One Title Three    |4      |2011|
|--|-------------------------|-------|----| 
```

我正在寻找的结果是这样的：

```
|id|title                    |edition|year|
|--|-------------------------|-------|----|
|03|Serie One Title One      |3      |2009|
|04|Serie One Title Two      |1      |2001|
|08|Serie One Title Three    |4      |2011|
|--|-------------------------|-------|----| 
```

我得到的最接近的是使用这个语句：

```
select id, title, max(edition), max(year) from books where title like "serie one%" group by title; 
```

但它返回最高版本和年份，并包括它找到的第一个 id：

```
|--|-----------------------|-------|----|
|01|Serie One Title One    |3      |2009|
|04|Serie One Title Two    |1      |2001|
|05|Serie One Title Three  |4      |2011|
|--|-----------------------|-------|----| 
```

这个花哨的连接也很接近，但没有给出正确的结果：

```
select b.id, b.title, b.edition, b.year from books b inner join (select name, max(edition) as maxedition from books group by title) g on b.edition = g.maxedition where b.title like "serie one%" group by title; 
```

使用它，我得到了独特的标题，但大多是旧版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:06:59.980

您可以使用子查询：

```
select b1.id, 
  b1.title,
  b1.edition,
  b1.year
from books b1
inner join
(
  select max(edition) edition, title
  from books
  group by title
) b2
  on b1.edition = b2.edition
  and b1.title = b2.title 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/e4bbc/2)

或者你可以使用一个`IN`子句：

```
select id, title, edition, year
from books b
where edition in (select max(edition)
                  from books b1
                  where b.title = b1.title
                  group by title); 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/e4bbc/7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:27:28.227

这是一个[SQLFiddle 示例](http://sqlfiddle.com/#!2/37429/20)：

在 MySql 中，您可以这样做：

```
select id,title,edition,year from
(
      select id,title,edition,year,
      @i:=if(@title=title,@i+1,1) rn,
      @title:=title 
      from t, (select @i:=0,@title:='') d 
      order by title,edition Desc,year desc
) d where rn=1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-31T05:24:11.100

最简单的方法：

`select * from (select id, title, edition, year from books order by title, edition desc) group by title;`

# asp.net - 如何使用 XDocument 获取 xml 节点元素值？

> ID：13582791
> 
> 赞同：1
> 
> 时间：2012-11-27T11:02:42.023
> 
> 标签：asp.net, xml

在这里，我列出了一个 xml。

```
<?xml version="1.0" encoding="utf-8" ?>
<data>
    <dataitem>
        qqqqqqq
    </dataitem>
    <templatedata>
        <Year>2001</Year>
    </templatedata>
    <mailmergedata>
        <row>
            <facilityname>ABC Corporation</facilityname>
            <dueamount>200.00</dueamount>
        </row>
        <row>
            <facilityname>XYZ Corporation</facilityname>
            <DueAmount>50.00</DueAmount>
        </row>
    </mailmergedata>
</data> 
```

我想检索节点设施名称的值任何人请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:07:27.960

尝试这个：

```
XDocument xmlFile = XDocument.Load("xml file path");
var query = from c in xmlFile.Descendants("facilityname ") select c; 
```

然后

```
foreach (XElement element in query)
{
    Console.WriteLine(element); // get your value here
} 
```

请参阅 Job Skeet 的[答案](https://stackoverflow.com/a/566180/770710)，这可能会对您有所帮助..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:08:30.903

您还可以使用[XPathSelectElements](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.xpathselectelements%28v=vs.90%29.aspx)然后使用 XPath 进行导航：

```
xdoc.XPathSelectElements("/data/mailmergedata/row/facilityname") 
```

# android - 如何从可绘制文件夹而不是从 url 添加图像？

> ID：13582792
> 
> 赞同：0
> 
> 时间：2012-11-27T11:02:44.780
> 
> 标签：android

我在我的应用程序中使用 URL [https://github.com/jgilfelt/android-mapviewballoons](https://github.com/jgilfelt/android-mapviewballoons)提供的源代码。它使用 url 显示图像。但是如何让它从我的应用程序的可绘制文件夹中加载图像？

我找到了这个`MapView`url，它在气球中显示图像。但它显示来自 url 的图像，因为我想从文件夹中显示我自己的图像。我该如何做到这一点？

代码：

```
 public class CustomMap extends MapActivity {

MapView mapView;
List<Overlay> mapOverlays;
Drawable drawable;
Drawable drawable2;
CustomItemizedOverlay<CustomOverlayItem> itemizedOverlay;
CustomItemizedOverlay<CustomOverlayItem> itemizedOverlay2;

@Override
    public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);

    mapOverlays = mapView.getOverlays();

    // first overlay
    drawable = getResources().getDrawable(R.drawable.marker);
    itemizedOverlay = new CustomItemizedOverlay<CustomOverlayItem>(drawable,  
   mapView);

    GeoPoint point = new GeoPoint((int)(51.5174723*1E6),(int)(-0.0899537*1E6));
    CustomOverlayItem overlayItem = new CustomOverlayItem(point,  
   "Tomorrow      Never Dies (1997)", 
            "(M gives Bond his mission in Daimler car)", 
            "http://ia.media-imdb.com/images 
  /M/MV5BMTM1MTk2ODQxNV5BMl5BanBnXkFtZTcwOTY5MDg0NA@@._V1._SX40_CR0,0,40,54_.jpg");
    itemizedOverlay.addOverlay(overlayItem);

    GeoPoint point2 = new GeoPoint((int)(51.515259*1E6),(int)(-0.086623*1E6));
    CustomOverlayItem overlayItem2 = new CustomOverlayItem(point2, 
   "GoldenEye   (1995)", 
            "(Interiors Russian defence ministry council chambers in 
  St Petersburg)", 
            "http://ia.media-imdb.com/images   

  M/MV5BMzk2OTg
  4MTk1NF5BMl5BanBnXkFtZTcwNjExNTgzNA@@._V1._SX40_CR0,0,40,54_.jpg");

    itemizedOverlay.addOverlay(overlayItem2);

    mapOverlays.add(itemizedOverlay);

    // second overlay
    drawable2 = getResources().getDrawable(R.drawable.marker2);
    itemizedOverlay2 = new CustomItemizedOverlay<CustomOverlayItem>
    (drawable2,   mapView);

    GeoPoint point3 = new GeoPoint((int)(51.513329*1E6),(int)(-0.08896*1E6));
    CustomOverlayItem overlayItem3 = new CustomOverlayItem(point3, "Sliding 
  Doors (1998)", 
            "(interiors)", null);
    itemizedOverlay2.addOverlay(overlayItem3);

    GeoPoint point4 = new GeoPoint((int)(51.51738*1E6),(int)(-0.08186*1E6));
    CustomOverlayItem overlayItem4 = new CustomOverlayItem(point4, "Mission: 
  Impossible (1996)", 
            "(Ethan & Jim cafe meeting)", 
            "http://ia.media-imdb.com/images 
    /M/MV5BMjAyNjk5Njk0MV
      5BMl5BanBnXkFtZTcwOTA4MjIyMQ@@._V1._SX40_CR0,0,40,54_.jpg");      
    itemizedOverlay2.addOverlay(overlayItem4);

    mapOverlays.add(itemizedOverlay2);

    final MapController mc = mapView.getController();
    mc.animateTo(point2);
    mc.setZoom(16);

}

@Override
protected boolean isRouteDisplayed() {
    return false;
}

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:07:55.217

这就是您将图像添加为地图叠加层的方式

```
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Point;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;

public class DrawableMapOverlay extends Overlay {

  private static final double MAX_TAP_DISTANCE_KM = 3;
  // Rough approximation - one degree = 50 nautical miles
  private static final double MAX_TAP_DISTANCE_DEGREES = MAX_TAP_DISTANCE_KM * 0.5399568 * 50;
  private final GeoPoint geoPoint;
  private final Context context;
  private final int drawable;

  /**
   * @param context the context in which to display the overlay
   * @param geoPoint the geographical point where the overlay is located
   * @param drawable the ID of the desired drawable
   */
  public CamerasMapOverlay(Context context, GeoPoint geoPoint, int drawable) {
    this.context = context;
    this.geoPoint = geoPoint;
    this.drawable = drawable;
  }

  @Override
  public boolean draw(Canvas canvas, MapView mapView, boolean shadow, long when) {
    super.draw(canvas, mapView, shadow);

    // Convert geo coordinates to screen pixels
    Point screenPoint = new Point();
    mapView.getProjection().toPixels(geoPoint, screenPoint);

    // Read the image
    Bitmap markerImage = BitmapFactory.decodeResource(context.getResources(), drawable);

    // Draw it, centered around the given coordinates
    canvas.drawBitmap(markerImage,
        screenPoint.x - markerImage.getWidth() / 2,
        screenPoint.y - markerImage.getHeight() / 2, null);
    return true;
  }

  @Override
  public boolean onTap(GeoPoint p, MapView mapView) {
    // Handle tapping on the overlay here
    return true;
  }
} 
```

在具有您的 MapView 的活动中：

```
 MapView map = (MapView) findViewById(R.id.mapview);
    MapController mapController = map.getController();
    List<Overlay> overlays = map.getOverlays();
    overlays.add(new DrawableMapOverlay(this, point, R.drawable.my_drawable);
    map.invalidate();
Editors 
```

看看[这个](http://www.androidsnippets.com/drawing-an-image-as-a-map-overlay2)教程..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:09:55.530

你不能。因为这个 R.drawable。***值由 android sdk 在您将新图像添加到文件夹时创建。这意味着，它们不是在您的应用程序运行时创建的，您无法添加新的。

取而代之的是，您可以将图像保存到 forlder 并将它们的方式和名称保存到您的数据库中。

# android - 在用户看到任何东西之前，警报对话框就消失了

> ID：13582793
> 
> 赞同：0
> 
> 时间：2012-11-27T11:02:53.447
> 
> 标签：android, timer, listener, android-alertdialog, period

```
@Override
    public void onBackPressed() {
    // TODO Auto-generated method stub            
      PopIt("Exit Application", "Are you sure you want to exit?");

        super.onBackPressed();

    }

    public void PopIt( String title, String message ){
            new AlertDialog.Builder(this)
            .setTitle( title )
            .setMessage( message )
            .setPositiveButton("YES", new OnClickListener() 
            {
                public void onClick(DialogInterface arg0, int arg1) {
                    //do stuff onclick of YES
                    finish();
                }
            }).setNegativeButton("NO", new OnClickListener() {
                public void onClick(DialogInterface arg0, int arg1) {
                    //do stuff onclick of CANCEL
                    Toast.makeText(getBaseContext(), "You touched CANCEL", Toast.LENGTH_SHORT).show();
                }
            }).show();
        } 
```

***此警报对话框消失得如此之快，以至于我无法阅读或单击它！这是为什么 ？***

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T11:06:23.983

问题是你在调用 super.onBackPressed(); 之前抛出了 Popit。删除它 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T11:06:00.747

```
super.onBackPressed(); 
```

删除此行。

如果您不删除它，将触发默认功能，这将关闭当前活动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T11:06:05.353

试试这个

```
 public void onBackPressed() {
    // TODO Auto-generated method stub     

 super.onBackPressed();       
      PopIt("Exit Application", "Are you sure you want to exit?");

    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T11:07:47.177

试试这个

```
@Override
public void onBackPressed() {
new AlertDialog.Builder(this)
    .setTitle("Really Exit?")
    .setMessage("Are you sure you want to exit?")
    .setNegativeButton(android.R.string.no, null)
    .setPositiveButton(android.R.string.yes, new OnClickListener() {

        public void onClick(DialogInterface arg0, int arg1) {
            youractivity.super.onBackPressed();
        }
    }).create().show();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-27T11:10:28.900

删除此行`super.onBackPressed();`

您正在 onBackPressed() 中显示对话框

所以它就像你是 onBackPressed(); 的压倒一切的行为;

所以不要调用超类方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-27T11:11:37.607

去除那个`super.onBackPressed();`

这将起作用：

```
public void onBackPressed() {
    // TODO Auto-generated method stub          
      PopIt("Exit Application", "Are you sure you want to exit?");
    } 
```

# hibernate - 休眠 sybase db 电源功能

> ID：13582795
> 
> 赞同：0
> 
> 时间：2012-11-27T11:02:56.130
> 
> 标签：hibernate, sybase

我们正在尝试使用 sybase 函数“power”对 DB 列之一进行数学计算。

休眠状态正在生成功率函数

> pow(?, xyzo0_.AmtScale)

而 sybase 支持 power 函数作为语法

> POWER（数字表达式 1，数字表达式 2）

我们已经尝试修改 hibernate.dialect。试过

> org.hibernate.dialect.SybaseASE15方言 org.hibernate.dialect.Sybase11方言 org.hibernate.dialect.SybaseAnywhere方言

但所有方言都会产生幂函数

> pow(?, xyzo0_.AmtScale)。

这是休眠问题还是我们遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:20:23.457

修复了这个。我们通过扩展 Sybase Dialect 类添加了自定义实现。

在此类构造函数中，我们调用了 registerFunction 来指定幂函数的替代方法。

> public class XyzDialect extends Sybase11Dialect {
> 
> ```
> //constructor   
> XyzDialect() {
> 
>   registerFunction("pow", 
>     new StandardSQLFunction("power",  FloatType.INSTANCE));
> } 
> ```
> 
> }

# eclipse-plugin - 日食编辑器插件

> ID：13582798
> 
> 赞同：0
> 
> 时间：2012-11-27T11:03:08.900
> 
> 标签：eclipse-plugin

如何从我的自定义编辑器插件中摆脱调试、运行、验证。我正在自定义编辑器中扩展结构化文本编辑器。

在编辑器的右键单击它显示许多不可用的上下文菜单选项。

```
@Override
public void editorContextMenuAboutToShow(IMenuManager menu) {
    ISelectionProvider arg1=super.getSelectionProvider();
    MenuManager menuMgr = new MenuManager("#PopupMenu");

    getEditorPart().getEditorSite().registerContextMenu(menuMgr, arg1);

    menu.removeAll();
    menu.update(true);
    menu.setVisible(false);
} 
```

并删除所有贡献，但仍显示一些上下文菜单选项，例如运行方式、调试方式、验证方式、配置方式方式、团队方式等。

我将如何摆脱它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:46:02.873

当您启动 Eclipse 的调试实例时，您可以将它们从您的启动配置中排除。这些菜单项是由其他插件提供的，因此如果看不到它们，您不应该激活这些插件。

如果您的插件的用户在他的 Eclipse 实例中安装了这些插件，那么他将*始终*看到这些菜单项。您对此无能为力，因为 Eclipse 安装基本上是松散耦合的随机插件集合。而且您甚至不应该尝试从代码中隐藏这些菜单项。您也不希望任何其他插件开发人员试图隐藏您对工作台的贡献（菜单项、工具栏按钮...）。

# linux - Linux中的密码

> ID：13582799
> 
> 赞同：-1
> 
> 时间：2012-11-27T11:03:11.300
> 
> 标签：linux

我需要逻辑。我们将使用命令“passwd”来更改当前用户的密码。或者将使用“passwd user_name”来更改相应用户的密码。与密码相关的详细信息存储在 /etc/shadow 文件中。我想我是对的。

我的疑问是 1\. 每当更改用户密码时，/etc/shadow 文件是否会更新？2\. 密码创建是否遵循任何加密方法？3\. 如果有任何算法遵循，我们可以将算法反转并找到用户的原始密码吗？4\. 是否有其他文件包含有关 linux 密码的详细信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:12:36.390

> 1) 每当更改用户密码时，/etc/shadow 文件是否会更新？

是的，该`/bin/passwd`程序是 root 的 suid，因此运行它的人将以 root 的权限运行它，因此能够编辑影子文件。

> 2）密码创建是否遵循任何加密方法？

如果您的意思是影子文件中的密码是否以某种方式被混淆，那么是的，它是散列的。可能是 MD5 或 SHA（或可能是河豚），具体取决于您的 Linux 系统的发行版和年龄。

> 3）如果有任何算法遵循，我们可以反转算法并找到用户的原始密码吗？

Tha算法是尝试猜测密码，对其进行哈希处理，并将其与影子文件中的内容进行比较。这是蛮力，可能需要很长时间（参见“开膛手约翰”）。尽管有某些可利用的哈希值可以利用，但可能仅在非常特定的情况下而不是您通常可以做的事情。

> 4) 是否有任何其他文件包含有关 linux 密码的详细信息？

有`/etc/passwd`，但不包含哈希。除非 PAM 使用 LDAP 之类的其他东西，否则不应有任何其他地方存储密码。但是大多数发行版的默认安装使用影子文件。

# gps - GPS 第三方（免费或付费许可）组件

> ID：13582800
> 
> 赞同：1
> 
> 时间：2012-11-27T11:03:12.813
> 
> 标签：gps, serial-port, gis

我正在寻找第三方软件组件（在 SDK 或 DLL 中）来构建现有的商业 GIS 软件。

我正在寻找的功能之一是根据 GPS 地图投影将 gps 位置（蓝牙 GPS 接收器）转换为 X、Y 值。

我查看了不同的产品，但仍然找不到至少可以的 dll 或 sdk：

检测现有的蓝牙 GPS 接收器，例如（Global-Sat BT-368）并读取（侦听）正确的 COM 串行端口，例如 COM10，BaudRate:4800，并根据 GPS 地图投影以 X、Y 值返回当前 GPS 位置.

如果有人知道可以做到这一点的产品或如何在 .NET 中对此进行编码，我将非常感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T01:02:49.033

如果您想获得一些有用的反馈，我认为您需要在这里将您的请求分解为更小的部分。您在这里至少有三个不同的要求，可能最好用不同的产品来解决。

*   信号采集（您不能使用 System.IO.Ports 的任何原因？）
*   对于给定的地图投影，将纬度/经度转换为 X、Y（这是基本的三角学。谷歌经度到 xy）
*   在地图上显示结果（为此有许多开源应用程序[。MapWindow 浮现](http://www.mapwindow.org/)在脑海中，但请自行选择）

# variables - 如何查看单独文件中的较少变量？

> ID：13582801
> 
> 赞同：0
> 
> 时间：2012-11-27T11:03:11.550
> 
> 标签：variables, import, less, phpstorm

phpStorm

我有一个非常大的 .less 文件，我将其分成较小的文件。而且我正在使用一个 .less 文件，其中包括其他文件的导入。一切正常，编译良好。但是编辑小文件真的很尴尬，因为我看不到里面其他文件的变量。

有没有办法强制 IDE 将变量与其他变量区分开来？只知道我在每个单独的文件中都有它，从带有变量的文件中写入文件导入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-06T08:57:10.870

`@import`应该用来制作别名

# php - 我的脚本只读取它首先读取的第一个 .txt 文件

> ID：13582802
> 
> 赞同：-2
> 
> 时间：2012-11-27T11:03:16.190
> 
> 标签：php, file-get-contents

我有这个脚本，它需要一个带有不同链接和 url 的 txt 文件。并且此脚本会检查 .txt 文件中的链接上存在的反向链接。我的脚本是这样的

```
<?php
$needle = $_GET['utext'];
$file = $_GET['ufile'];
$source = file_get_contents($file);
$new = explode("\n",$source);
foreach ($new as $check){
    $a = file_get_contents(trim($check));
    if (strpos($a,$needle)){
        $found[] = $check;
    }
    else{
        $notfound[] = $check;
    }
}

echo "Matches that were found: \n ".implode("\n","\n".$found)."\n";
echo "<br> <br> <br> <br>";
echo "Matches that were not found \n". implode("\n","\n".$notfound);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:33:01.533

添加更多调试输出。printf/echo-debugging 不是抽屉里最锋利的勺子，但它会让你开始。

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', true);

$needle = $_GET['utext'];
$file = $_GET['ufile']; // that's ok regarding security?
$new = file($file, FILE_IGNORE_NEW_LINES|FILE_SKIP_EMPTY_LINES);
$new = array_map('trim', $new);
echo '#entries: ', count($new), "\n";
$found = array(); $notfound=array();

foreach ( $new as $check ) {
    echo 'processing: ', $check;
    $a = file_get_contents($check);
    echo ', length: ', strlen($a);
    if (strpos($a,$needle)) {
        echo ", found\n";
        $found[] = $check;
    }
    else {
        echo ", not found\n";
        $notfound[] = $check;
    }
}

echo '#Matches: ', count($found), "\n";
echo '#No-Matches: ', count($notfound), "\n";
echo "Matches that were found:\n ", implode("\n", $found), "\n";
echo "Matches that were not found:\n", implode("\n", $notfound), "\n"; 
```

# c++ - 为什么 Windows 不能读取 0x1A (EOF) 字符以外的字符，而 Unix 可以？

> ID：13582804
> 
> 赞同：1
> 
> 时间：2012-11-27T11:03:21.900
> 
> 标签：c++, memory, error-handling, fstream, eof

> **可能重复：**
> [为什么在读取 eof 时设置故障位？有出路吗？](https://stackoverflow.com/questions/6781545/why-failbit-set-when-eof-on-read-is-there-a-way-out)

我正在编写一个小程序，它在 Mac OS 和 Ubuntu (Unix ...) 上运行良好。程序必须读取数据文件并将字节（`char`s / `unsigned char`s）和`memcpy()`它们分离成浮点数。这将包括获取以下四个值的过程，读取并将它们左移到 32 位`int`，然后将`int`s 内存复制到`float`. 像这样：

```
0x43 0x66 0x1A 0x79 -> 将 int32 和 memcpy() 读入 float -> val = 230.103
```

正如我所说，这适用于 Unix，但 Windows 似乎将其解释`char` `0x1A`为文件结尾 (EOF) 错误并停止读取数据。为什么 Windows 做这样的事情而不是 Unix？我怎么能把它关掉？

我什至通过查看`ifstream`自身并检查是否设置了 EOL 标志来尝试错误处理。然后我会`clear()`'`ifstream`的错误标志并继续阅读（使用`get()`），但该死的东西总是返回相同的 EOF /`0x1A`字符并且不会读取下一个字符。

**编辑：**添加了一些代码

```
 ifstream input (PATH, ios::in);
if (input.is_open()) {
  unsigned int counter = 0;
  while (input.good()) {
    BYTE byte;
    byte = input.get();
    printf("%i, ", byte);
    counter++;
  }
  printf("\r%i, ", counter);
  input.close();
} else {
  printf("Can't open file!");
} 
```

很感谢任何形式的帮助。

最大限度

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T11:52:59.190

使用`ifstream input (PATH, ios::in);`，您以（默认）文本模式打开文件。当以文本模式打开文件时，标准库对从文件读取的数据执行特定于平台的转换，以将平台的文本文件本机格式映射到 C（和 C++）对文本文件的视图。

对于类 unix 系统（包括 Mac OSX 和 Linux），本机文本格式与 C 和 C++ 查看文本的方式相同，因此不需要转换。

在 Windows 平台上，必须转换行尾（`'\n'`转换为字符序列和从字符序列转换），并且必须解释`CR LF`Windows 定义的 EOF 字符 ( )。`1A`

在其他系统上，可能需要更广泛的转换（例如，如果将文本文件指定为正好 80 个字符的空格填充行，则实现必须`'\n'`在读取 80 个字符后自己生成一个字符，并且它可能会抑制一行中的尾随空格字符）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:36:42.450

带有 ios::binary 标志：

```
#include <iostream>
#include <fstream>
#include <windows.h>

int main()
{

    std::ifstream input ("msg.txt",  std::ios::binary );
    if (input.is_open())
    {
        unsigned int counter = 0;
        while (input.good()) 
        {
            BYTE byte;
            byte = input.get();
            printf("%d : %d \n", counter,  byte);
            counter++;
        }

        input.close();
    }
} 
```

输入数据 ：`0x43 0x66 0x1A 0x79 0x68 0xAc`

输出 ：

```
0 : 48 
1 : 120 
2 : 52 
3 : 51 
4 : 32 
5 : 48 
6 : 120 
7 : 54 
8 : 54 
9 : 32 
10 : 48 
11 : 120 
12 : 49 
13 : 65 
14 : 32 
15 : 48 
16 : 120 
17 : 55 
18 : 57 
19 : 32 
20 : 48 
21 : 120 
22 : 54 
23 : 56 
24 : 32 
25 : 48 
26 : 120 
27 : 65 
28 : 99 
29 : 32 
30 : 255 
```

在此示例中，数据是按字符读取的，但您可以使用`ifstream.read(buffer, buffersize)`.

顺便说一下，这个程序是在Windows7上用gcc编译的

# sql - JDBC/JDBCTemplate 批量操作

> ID：13582806
> 
> 赞同：0
> 
> 时间：2012-11-27T11:03:28.207
> 
> 标签：sql, jdbc, batch-processing, jdbctemplate

有许多使用 JDBC 或 JDBCTemplate 进行批量插入查询的示例。

我想做一个包含选择、插入和删除的批处理 sql 操作。例如，我需要在与数据库的单次连接中发出以下 sql 操作。

1.  多选（对不同表的 4 个查询）
2.  多次插入（对不同表的 4 个查询）
3.  多次删除（对不同表的 4 次查询）

JDBC 或 JDBCTemplate 支持吗？

编辑问题：

```
TicketServiceEnforce ticketDao = TicketServiceEnforceImpl.Factory.getInstance();

        // ================================ SELECT ================================
        if (unknownTicketId > ZERO) {
            unknownTicketList = ticketDao.selectUnknownTicket(unknownTicketId);
            if (!unknownTicketList.isEmpty()) {
                attachmentList = ticketDao.selectAttachment(QueryString.SELECT_UNKNOWN_TICKET_ATTACHMENT_BY_ID.toString(), unknownTicketId);
                ticketCodeList = ticketDao.selectTicketCode(QueryString.SELECT_UNKNOWN_TICKET_CODE_BY_ID.toString(), unknownTicketId);
                ticketCommentList = ticketDao.selectComment(QueryString.SELECT_UNKNOWN_TICKET_COMMENT_BY_ID.toString(), unknownTicketId);
            }
        }
        // ================================ INSERT ================================
        // Retrieve customer_id
        if (!unknownTicketList.isEmpty()) {
            // Just display all customers's name in UI
            customerId = ticketDao.selectCustomerIdByName(genericTicket.getCustomerName());

            genericTicket.setCustomerId(customerId);
            genericTicket.setSubject(unknownTicketList.get(ZERO).getSubject());
            genericTicket.setDetails(unknownTicketList.get(ZERO).getDetails());
            genericTicket.setCreationDate(unknownTicketList.get(ZERO).getCreationDate());

            // =====================================================================
            ticketId = ticketDao.createTicket(genericTicket);
            if (ticketId > ZERO) {

                if (!attachmentList.isEmpty()) {
                    ticketDao.createTicketAttachment(ticketId, attachmentList);
                }

                /*
                 * Insert new ticket code
                */
                newTicketCode = generateTicketCode(ticketId);
                if (!ticketCodeList.isEmpty()) {
                    oldTicketCode = ticketCodeList.get(ZERO);

                    ticketDao.createTicketCode(ticketId, newTicketCode);
                }

                /* Insert old unknown ticket code into ticket_email_mapping
                 * This table used to identify the parent child ticket from email - unknown_ticket
                 * by using two queries
                 * 
                 * 1\. Select ticket code - select ticket code from ticket_email_mapping using id  
                 * 2\. Select ticket id that has previous ticket code - Select id from ticket_email_mapping tem where tem. 
                 * 
                 */
                if (oldTicketCode != null) {
                    String from_sender = null;
                    if (unknownTicketList.size() > ZERO) {
                        from_sender = unknownTicketList.get(ZERO).getFrom();
                    }

                    ticketDao.createTicketEmailMapping(ticketId, oldTicketCode, from_sender);
                }

                if (!ticketCommentList.isEmpty()) {
                    for (GenericTicketComment comment : ticketCommentList) {
                        comment.setTicketId(ticketId);
                    }

                    ticketDao.createTicketComment(QueryString.INSERT_TICKET_COMMENT.toString(), ticketCommentList);
                }

                if (genericTicket.getAssigneeName() != null) {
                    int assigneeId = -1;
                    String firstName = "";
                    TicketAssignee assignee = new TicketAssignee();

                    firstName = genericTicket.getAssigneeName();
                    assigneeId = ticketDao.selectUserId(firstName);

                    assignee.setTicketId(ticketId);
                    assignee.setAssigneeId(assigneeId);

                    ticketDao.createTicketAssignee(assignee);
                }

                // If all successfull
                ticketCreationSuccessful = true;
            }
        }

        // ================================ DELETE ================================
        if (ticketCreationSuccessful) {
            if (!attachmentList.isEmpty()) {
                affectedRow = ticketDao.removeUnknownTicket(QueryString.DELETE_UNKNOWN_TICKET_ATTACHMENT_BY_ID.toString(), unknownTicketId);
            }

            if (!ticketCommentList.isEmpty()) {
                affectedRow = ticketDao.removeUnknownTicket(QueryString.DELETE_UNKNOWN_TICKET_COMMENT_BY_ID.toString(), unknownTicketId);
            }

            affectedRow = ticketDao.removeUnknownTicket(QueryString.DELETE_UNKNOWN_TICKET_CODE_BY_ID.toString(), unknownTicketId);
            affectedRow = ticketDao.removeUnknownTicket(QueryString.DELETE_UNKNOWN_TICKET_BY_ID.toString(), unknownTicketId);
        } 
```

这是使用正常查询操作的 DAO。是否可以在存储过程或批量操作中重写它。

谢谢。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T04:52:50.247

顾名思义，`jdbcTemplate.batchUpdate`您不能在批处理操作中进行选择。如果你想一次性完成所有操作，只需创建一个大 SQL 实现你的逻辑和使用`JdbcTemplate.#execute(java.lang.String)`方法。

# oracle - 使用 sql for 循环分配多个变量

> ID：13582808
> 
> 赞同：0
> 
> 时间：2012-11-27T11:03:34.170
> 
> 标签：oracle, oracle10g

我需要通过增加日期来基于一个日期值分配多个日期值。

以下代码是一个示例。但它会引发错误。我错了请指教。

```
 DECLARE
     issuedate date:='27-JAN-12';
     issuedate_1 date;
     issuedate_2 date;
     issuedate_3 date;
   BEGIN
     for cnt in 1..5
     loop
       issuedate_||cnt := issuedate+cnt;
       DBMS_OUTPUT.PUT_LINE(cnt);
       DBMS_OUTPUT.PUT_LINE( issuedate_1);
       DBMS_OUTPUT.PUT_LINE( issuedate_2);
       DBMS_OUTPUT.PUT_LINE( issuedate_3);
     end loop;
   END; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:10:15.090

您可以使用 plsql 集合来分配日期值而不是 100 个变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:22:26.107

试试这个

```
DECLARE
 issuedate date  ; 
 l_issuedate date;
 BEGIN
 issuedate := TO_DATE('27-JAN-12') ;
 for cnt in 0..5
 loop
   SELECT issuedate+cnt
     INTO l_issuedate
     FROM DUAL ;

   DBMS_OUTPUT.PUT_LINE(l_issuedate);

 end loop;
END; 
```

输出 ：

```
27-JAN-12
28-JAN-12
29-JAN-12
30-JAN-12
31-JAN-12
01-FEB-12 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:33:09.003

您不能动态形成变量名称，创建日期数组并递增和分配值。 [试试这个链接](http://psoug.org/reference/arrays.html)

**issueate_||cnt :=** **issueate** +cnt;--问题在粗体部分

样本 ：

```
SQL>   declare
  2  
  3        type date_aa is table of date index by pls_integer;
  4        l_date_aa date_aa;
  5        temp date:= to_date('27-mar-2012');
  6        buckets number:=5;
  7     begin
  8      for elem in 1 .. buckets loop
  9    select temp+1 into temp from dual;
 10    l_date_aa(elem) := temp;
 11    dbms_output.put_line(l_date_aa(elem));
 12    end loop;
 13    end;
 14  / 
```

输出：

```
28-MAR-12
29-MAR-12
30-MAR-12
31-MAR-12
01-APR-12

PL/SQL procedure successfully completed 
```

# wcf - 使用存储过程修改数据库后更新上下文

> ID：13582815
> 
> 赞同：3
> 
> 时间：2012-11-27T11:04:34.967
> 
> 标签：wcf, c#-4.0, silverlight-4.0, wcf-ria-services

在 Silverlight 应用程序中，我使用存储过程来更新我的数据库表。

```
ALTER PROCEDURE  [dbo].[SP_ADD_MIS_MISSION] 
(
    @IdMission as int,
    @IdVersion as smallint,
    @LibMission as varchar (50)
)
AS
BEGIN
DECLARE @IDNEWVERSION as int = 1,
        @IDNEWMISSION as int = @IdMission,
        @supp as bit = 1
BEGIN
        IF @IdMission != 0 AND @IdMission is not NULL
        BEGIN
            SELECT @IDNEWVERSION = MAX(IDVERSION)+1 FROM MIS_Mission where MIS_Mission.IdMission=@IdMission

            Update MIS_Mission SET Suppression = @supp WHERE MIS_Mission.IdMission=@IdMission AND MIS_Mission.IdVersion=(@IDNEWVERSION-1)
        END
        ELSE
        BEGIN
            SET @IDNEWVERSION = 1
            select @IDNEWMISSION = MAX(MIS_Mission.IdMission)+1 from MIS_Mission

            if @IDNEWMISSION is NULL SET @IDNEWMISSION=1
        END

        Insert MIS_Mission ( IdMission,
                             IdVersion,
                             LibMission,
                             Suppression
                           )

                    values ( @IDNEWMISSION,
                             @IDNEWVERSION,
                             @LibMission,
                             @Suppression
                           )
        SELECT @IDNEWMISSION
END 
```

我在我的 WCF RIA 服务中添加了这段代码来启动存储过程：

```
public void SetMission(MIS_Mission mis)
{
    _entity.ADD_MIS_MISSION(mis.IdMission,mis.IdVersion,mis.LibMission);
} 
```

我在我的 Silverlight 应用程序中添加了这段代码，以更新我的数据库，并在我的 datagrid 中输入值：

```
private void UpdateMission_Click(object sender, RoutedEventArgs e)
{

    foreach(MIS_Mission mis in dG_Mission.ItemsSource)
    {
        var operation = _Context.SetMission(mis);

        operation.Completed += (se, ev) =>
        {
        };
    }
} 
```

但是当我完成数据库更新时，我的上下文并没有更新 IdVersion 的新值，并且我的数据网格显示了我的任务的旧版本。

如何在不重新加载数据网格的情况下更新上下文？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:18:01.627

我在这个网站上找到了一个解决方案：[http ://weblogs.asp.net/fredriknormen/archive/2009/11/24/refresh-the-cached-entityset-after-a-submitchanges-wcf-ria-services.aspx](http://weblogs.asp.net/fredriknormen/archive/2009/11/24/refresh-the-cached-entityset-after-a-submitchanges-wcf-ria-services.aspx)

我的解决方案是这样的：

```
private void UpdateMission_Click(object sender, RoutedEventArgs e)
{
    int countenr = itemsSource.Count;

    foreach(MIS_Mission mis in dG_Mission.ItemsSource)
    {
        var operation = _Context.SetMission(mis);

        operation.Completed += (se, ev) =>
        {
            countenr--;
            if (countenr == 0)
            {
                _Context.Load<MIS_Mission>(
                    _Context.ListMissionQuery(),
                    LoadBehavior.RefreshCurrent,
                    loadOperation =>
                    {
                       if (loadOperation.HasError)
                       {
                           MessageBox.Show(loadOperation.Error.Message);
                           loadOperation.MarkErrorAsHandled();
                       }
                       else
                       {
                           List<MIS_Mission> itemsource = dG_Mission.ItemsSource as List<MIS_Mission>;
                           var results = itemsource.Where(entity => !loadOperation.Entities.Contains(entity)).ToList();

                           results.ForEach(entity => itemsource.Remove(entity));

                           results = loadOperation.Entities.Where(entity => !itemsource.Contains(entity)).ToList();

                           results.ForEach(entity => itemsource.Add(entity));

                       }
                   }
                   ,null
               );
            }
        };
    }
} 
```

这个解决方案对我来说很好，但数据网格的刷新有点慢。

Thanks for your help bye

# wordpress - Wordpress - 使用查询字符串值更新标题中的所有菜单链接

> ID：13582817
> 
> 赞同：0
> 
> 时间：2012-11-27T11:04:43.467
> 
> 标签：wordpress, url, menu, query-string, hyperlink

我正在尝试使用 wordpress 复制网站...因此，当查看者访问[http://www.wpsite.com/1005](http://www.wpsite.com/1005)时，我会（通过 API）进行检查以查看 id 是否有效/active rep，然后为常用的东西（姓名、电子邮件、repid）设置一个 cookie 并重定向到主页：

[http://www.wpsite.com/wp/?page_id=34&id=1005](http://www.wpsite.com/wp/?page_id=34&id=1005)

我目前拥有所有这些功能。

所以此时，我想将“id=1005”传递给页面顶部的所有菜单链接。我的网站正在使用 wordpress 中的 Appearance -> Menus 功能来构建菜单...

因此，当查看者悬停/单击网站上的任何链接时，我希望将“&id=1005”添加到其中。那可能吗？如果用户无效并且没有“&id=1005”怎么办？谢谢。

亚当

更新：好的，我创建了一个 walker 类，但我仍然很困惑将查询字符串“id”值放在哪里，所以它显示在每个类中：

```
// Walker Nav Menu
class description_walker extends Walker_Nav_Menu
{
     function start_el(&$output, $item, $depth, $args)
 {
       global $wp_query;
       $indent = ( $depth ) ? str_repeat( "\t", $depth ) : '';
       $class_names = $value = '';
       $classes = empty( $item->classes ) ? array() : (array) $item->classes;
       $class_names = join( ' ', apply_filters( 'nav_menu_css_class', array_filter( $classes ), $item ) );
       $class_names = ' class="'. esc_attr( $class_names ) . '"';
       $output .= $indent . '<li id="menu-item-'. $item->ID . '"' . $value . $class_names .'>';
       $attributes  = ! empty( $item->attr_title ) ? ' title="'  . esc_attr( $item->attr_title ) .'"' : '';
       $attributes .= ! empty( $item->target )     ? ' target="' . esc_attr( $item->target     ) .'"' : '';
       $attributes .= ! empty( $item->xfn )        ? ' rel="'    . esc_attr( $item->xfn        ) .'"' : '';
       $attributes .= ! empty( $item->url )        ? ' href="'   . esc_attr( $item->url        ) .'"' : '';
       $prepend = '<b>';
       $append = '</b>';
       $description  = ! empty( $item->description ) ? '<span>'.esc_attr( $item->description ).'</span>' : '';
       if($depth != 0)
       {
                 $description = $append = $prepend = "";
       }
        $item_output = $args->before;
        $item_output .= '<a'. $attributes .'>';
        $item_output .= $args->link_before .$prepend.apply_filters( 'the_title', $item->title, $item->ID ).$append;
        $item_output .= $description.$args->link_after;
        $item_output .= '</a>';
        $item_output .= $args->after;

        $output .= apply_filters( 'walker_nav_menu_start_el', $item_output, $item, $depth, $args );
 }
} 
```

我有一种感觉，它在“属性”部分......带有那些三级表达的东西......就像“如果id不是''”添加这个......但我错过了......

任何帮助表示赞赏。

亚当

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:05:07.787

没有可用于修改属性的过滤器`href`。为此，您需要创建一个[自定义 walker](http://codex.wordpress.org/Function_Reference/Walker_Class)。并建立自己的菜单。这并不难做到。

更多信息：

*   [例子](http://shinraholdings.com/62/custom-nav-menu-walker-function/#example-code)
*   [教程](http://wp.tutsplus.com/tutorials/creative-coding/understanding-the-walker-class/)

# compiler-errors - VS 2005 编译错误 - 将元数据写入文件时出现意外错误

> ID：13582819
> 
> 赞同：2
> 
> 时间：2012-11-27T11:04:56.323
> 
> 标签：compiler-errors, visual-studio-2005

尝试构建/运行我的应用程序时出现以下错误：

错误 30 - 将元数据写入文件 '' 出现意外错误 - '没有足够的存储空间来完成此操作。'

我尝试了“/3GB boot.ini”解决方案，但它给我的电脑带来了更多问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T11:14:17.977

您可以删除 .suo（与 .sln 文件位于同一文件夹中）。当然，您会丢失一些有关解决方案的信息，例如上次打开的文件等，但这可能会有所帮助，直到该文件再次增长。此外，在我试图避免同时在 VS 中打开大量文件的情况下，Windows 窗体非常有用。

这两个步骤都有助于减少错误的发生，但不能解决问题本身。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-16T01:38:39.067

清理解决方案 -> 关闭 Visual Studio -> 删除 obj\Debug\ 目录下的所有文件 -> 启动 Visual Studio 2010 并构建解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-21T10:31:38.130

当我重命名一个项目然后添加一个名称为第一个项目的新项目时，偶然发现了同样的错误。然后将重命名项目的引用添加到新项目。问题出在他们现在共享的默认命名空间中。

更改重命名项目的默认命名空间为我解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-05T17:18:49.457

就我而言，我实际上使用的是 Visual Studio 2013。错误发生在使用 NMock3 的测试项目中。为了解决这个问题，我必须在解决方案中引用另一个项目，其中包含一个对象类型定义，该对象类型定义用作使用 NMock 模拟的操作中的参数！

例子：

myMock.Expects.One.Method(p => p.SomeMethod( **null** )).WithAnyArguments().WillReturn("1234")

上面的空值是在另一个项目中定义的特定类型，需要在测试项目中引用......

# asp.net - 代码无效或过期。使用 API 调用显式使会话无效

> ID：13582820
> 
> 赞同：4
> 
> 时间：2012-11-27T11:05:01.797
> 
> 标签：asp.net, facebook-graph-api, azure

有`ASP.NET 4.0`使用的应用程序`Facebook API`。它工作正常，直到上周。当我尝试为我的应用程序获取访问令牌时

```
public static string GetWebResponse_HttpWebRequest(string url)
{
        HttpWebRequest request = WebRequest.Create(url) as HttpWebRequest;
        request.Method = "GET";
        WebResponse webResponse;
        string response = "";

        webResponse = request.GetResponse();
        io.Stream stream = webResponse.GetResponseStream();
        io.StreamReader str = new io.StreamReader(stream);
        response = str.ReadToEnd();

        return response;
}

url: https://graph.facebook.com/oauth/access_token?client_id=117260348353246&client_secret=7b8734d7f36bf007d0d40bec728b57d9&code=AQD5xcdQiE2Ab9RpmexVUdP-i_2Nm5V52SVhxBVXkeq7WlJoOQ-xB4wYgbs3yeejLFHmR-lKLj0cwg6FeMWKGvHwT4akAlN7uMLxqu9YaqFumup3SPkuTjuQYETTCqQ1n2MAQjzexqiv8WV3UEcO4Qy5lObQ13qdYlKoYdKUacT42oJ0vhVuopH2WNkk3QRCq6DeAl02YU-sD8X8PTZgu52e&redirect_uri=http://www.opinere.com 
```

有一个错误：

```
{"error":{"message":"Code was invalid or expired. The session was invalidated explicitly using an API call.","type":"OAuthException","code":100}} 
```

在我的本地机器上，应用程序正常工作。`Windows Azure`有时它会起作用，但大多数情况下不会。
怎么了？

**更新：**有两个请求：1）[没有错误](http://www.opinere.com/Trace.axd?id=11) 2）一分钟[后有错误](http://www.opinere.com/Trace.axd?id=34)- Code2（访问令牌）是空的，似乎不同之处在于标题“HTTP_REFERER”。在第二个请求中不存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T14:30:55.330

让我向你解释发生了什么。此问题与多个 Web 角色有关。

**azure 中的 Web 角色是什么？**

Web 角色是 VHD，即虚拟运行的系统映像，您的数据/网站复制到它们。它的结构的工作是分配、初始化和复制。

**Web 角色如何协同工作？**

负载平衡器在角色之间平均平衡传入流量。这意味着在一个 Web 角色中创建的会话将在另一个 Web 角色中失效。它不仅仅是会话，甚至表单身份验证都不起作用。

**为什么？**

因为 session/forms 身份验证使用 machineKey 来加密/散列。每个 Web 角色/虚拟机都有不同的 machineKey。现在你明白为什么它有时有效，有时无效。当请求到达创建会话的同一角色 VM 时，它会起作用，否则不会。一般来说，它只适用于每个创建的会话（大约）的 1:no 角色时间。

**解决方案？**

就像您在网络农场中托管您的网站一样。所以你应该看看如何让你的网站在网络农场中运行。或者您可以只使用一个 Web 角色，如果您使用 2 个小型虚拟机/角色，则可以只使用一个大型虚拟机，但这一切都取决于您的应用程序的行为方式，因此您应该首先测试最有效的方式，多个虚拟机或一个大虚拟机。此外，如果使用单个 VM，您会失去可靠性，如果您的角色出现故障，您的网站也会出现故障。

在此处查看使用表存储的解决方案 [http://www.intertech.com/Blog/Post/Session-State-in-Windows-Azure.aspx](http://www.intertech.com/Blog/Post/Session-State-in-Windows-Azure.aspx)

**编辑** 不是将令牌保存到会话中，而是使用 cookie，但是您并没有解决根本问题，如果您不对核心问题采取任何措施，您将遇到很多问题。

# node.js - 如果文件已打开/正在写入，如何检查 Node.js？

> ID：13582827
> 
> 赞同：5
> 
> 时间：2012-11-27T11:05:38.237
> 
> 标签：node.js, filesystemwatcher, fs

我找到了很多 C++、C# 等的答案，但还没有找到 Node.js 的答案。这是我的情况。

我创建了一个模块，用于监视我的 FTP 服务器中的文件/目录更改（新的或更新的，不关心已删除的文件）。一旦我注意到一个新文件或现有文件发生更改，我就会收到通知并通知我的模块 B 将此文件同步到 Sourceforge.net。该模块工作正常，可立即对更改做出反应。

但我还不满意的是，当添加新文件时，该文件会根据文件大小多次接收“修改”事件：大小越大，它将接收的“修改”事件越多。这是因为在上传文件时，操作系统会定期将上传的缓冲区刷新到文件系统，从而导致多个“修改”`fs.watch`事件。

**问题**

如何检查文件是否仍然打开，以便我知道“修改”事件实际上是因为剩余数据被刷新，而不是因为文件已被多次更改，所以我可以忽略它？”

一旦文件关闭或写入停止，我就可以通知我的模块 B 同步到 SF.net。

我会很感激任何想法。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T17:04:37.160

您可以考虑设置超时，然后重新检查文件以确保大小和修改时间没有改变，如果它们没有改变，则假设上传已完成并将文件传输到 SF.net。

另一种选择是根据您找到的 c 解决方案创建本机节点模块；

一些信息;

[Node.js 原生模块入门](http://seanmcgary.com/2012/10/28/getting-started-with-native-nodejs-modules/)

但是使用 node-gyp 而不是 node-waf

[https://github.com/TooTallNate/node-gyp](https://github.com/TooTallNate/node-gyp)

# svn - 使用 svnserve 协议在两个 SVN 存储库之间同步

> ID：13582828
> 
> 赞同：0
> 
> 时间：2012-11-27T11:05:41.297
> 
> 标签：svn, synchronization, svnserve

我们有两个使用 svnserve（不是 Apache httpd）的 SVN 存储库，一个在岸，另一个在离岸。

是否可以在两个存储库之间创建合理的同步？可以有主/从配置。还是我们被迫转向更复杂的 Apache 服务器做事方式？我问的原因是因为改变当前的基础设施需要时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:08:37.223

对于单向同步，您可以尝试 svnsync（它带有命令行 SVN 客户端）。

我已经将它用于本地存储库并通过 Apache，因此它很可能也可以通过 svnserve 工作。

[http://svnbook.red-bean.com/en/1.7/svn.reposadmin.maint.html#svn.reposadmin.maint.tk.svnsync](http://svnbook.red-bean.com/en/1.7/svn.reposadmin.maint.html#svn.reposadmin.maint.tk.svnsync)

# sql - Oracle系统表选择优化

> ID：13582830
> 
> 赞同：-1
> 
> 时间：2012-11-27T11:05:54.437
> 
> 标签：sql, oracle, optimization

我在 Oracle 上有这个声明，但是速度很慢。是否可以对其进行优化？

```
SELECT col2.column_name 
FROM all_constraints cons, all_cons_columns col, all_cons_columns col2, all_constraints cons2
WHERE cons.owner = 'OWNER' 
AND cons.table_name = 'TABLE'
AND col.constraint_name = cons.constraint_name 
AND cons.constraint_type  = 'P'
AND col2.column_name  = col.column_name 
AND col2.table_name = col.table_name 
AND col2.owner = col.owner 
AND cons2.constraint_name = col2.constraint_name 
AND cons2.constraint_type = 'R'
AND cons2.r_constraint_name 
IN (SELECT parentcol.constraint_name FROM all_cons_columns parentCol WHERE parentcol.owner = 'OWNER2' AND parentcol.table_name = 'TABLE2') 
```

我试过这个（返回相同的结果），但它仍然很慢

```
SELECT *
FROM all_constraints cons, all_cons_columns col
WHERE col.table_name = 'TABLE2' AND col.Owner = 'OWNER2'
AND col.constraint_name = cons.constraint_name AND cons.constraint_type = 'P' AND 
col.column_name IN 
(
  SELECT col2.column_name
  FROM all_constraints cons2, all_cons_columns col2
  WHERE col2.table_name = 'TABLE2' AND col2.Owner = 'OWNER2'
  AND col2.constraint_name = cons2.constraint_name AND cons2.constraint_type = 'R'
  AND cons2.r_constraint_name IN
  (
    SELECT cons3.constraint_name
    FROM all_constraints cons3, all_cons_columns col3
    WHERE col3.table_name = 'TABLE' AND col3.Owner = 'OWNER'
    AND col3.constraint_name = cons3.constraint_name AND cons3.constraint_type = 'P' 
  )
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:44:04.910

您如何尝试重写它以避免重复命中字典（all_ 视图有时性能不佳，因为它们会进行大量权限检查）。

例如试试这个：

```
with tab as (select cons.owner, cons.constraint_name, cons.r_constraint_name, 
                    cons.constraint_type, cons.table_name, col.column_name 
               from all_constraints cons
                    inner join all_cons_columns col 
                            on col.constraint_name = cons.constraint_name
                           and col.owner = cons.owner
              where col.table_name in ('<CHILD TAB>', '<PARENT TAB>')
                and col.owner = '<OWNER>'
                and cons.constraint_type in ( 'P', 'R' ))
select col.owner, col.constraint_name, col.table_name, col.column_name
  from tab col
       inner join tab col2
               on col.column_name = col2.column_name 
              and col.table_name = col2.table_name
              and col.owner = col2.owner
       inner join tab col3
               on col2.r_constraint_name = col3.constraint_name
 where col2.constraint_type = 'R'
   and col.table_name = '<CHILD TAB>'
   and col2.table_name = '<CHILD TAB>'
   and col.constraint_type = 'P'
   and col3.table_name = '<PARENT TAB>'
   and col3.constraint_type = 'P'; 
```

# c# - 如何从文本区域保存 SQL Server 2008 中的多行？

> ID：13582831
> 
> 赞同：0
> 
> 时间：2012-11-27T11:05:57.040
> 
> 标签：c#, html, sql-server

如何从文本区域保存 SQL Server 2008 中的多行？

```
<textarea runat="server" rows="5" cols="70"  id="commentarea"  
          name="commentarea"  style="margin-left: 197px" ></textarea>

<asp:Button ID="Button1" runat="server" style="margin-left: 287px" 
            Text="Comment" onclick="Button1_Click" /> 
```

C#代码：

```
ConnectionStringSettings pubs = ConfigurationManager.ConnectionStrings["RegConnectionString"];

SqlConnection connection = new SqlConnection(pubs.ConnectionString);

SqlCommand cmd = connection.CreateCommand();
cmd.CommandType = CommandType.Text;
cmd.CommandText = "INSERT INTO CommentTable (Comment) values( '" + commentarea.InnerText+"')";

connection.Open();
cmd.ExecuteNonQuery();
connection.Close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:11:28.463

不要这样做，使用参数化查询

```
ConnectionStringSettings pubs = ConfigurationManager.ConnectionStrings["RegConnectionString"];
    SqlConnection connection = new SqlConnection(pubs.ConnectionString);
    SqlCommand cmd = connection.CreateCommand();
    cmd.CommandType = CommandType.Text;
    cmd.CommandText = "INSERT INTO CommentTable (Comment) values(@Text )";
cmd.Parameters.AddWithValue("@Text", acommentarea.InnerText);
    connection.Open();
    cmd.ExecuteNonQuery();
    connection.Close(); 
```

# ruby - 比较 MongoDB 数据和 Xml 数据

> ID：13582833
> 
> 赞同：1
> 
> 时间：2012-11-27T11:06:04.257
> 
> 标签：ruby, xml, mongodb, mongoid, compare

我需要在以下场景中编写测试

```
- I have a ruby script to read xml data and store the resultant data in MongoDB.
- I want to write a test, which compares the xml and the imported content in the db and make sure the data in xml and imported data are similar. 
```

考虑以下示例 xml 文件：

```
<employees>
    <employee>
        <name>xxx</name>
    </employee>
    <employee>
        <name>yyy</name>
    </employee>
</employees>

employees (table)
-----------------
name
xxx
yyy

how do i write test for this case? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:33:39.763

如果您使用 Java，您可以确保您的 MongoDB 文档与您的 Java 对象匹配，然后使用 JAXB 转换为 XML。

# excel - Excel：根据单独的列计算持续时间 hh:mm:ss

> ID：13582840
> 
> 赞同：0
> 
> 时间：2012-11-27T11:06:24.073
> 
> 标签：excel

我有两列具有不同的数据，我需要根据 A 列中的数据计算 hh:mm:ss 中的持续时间（下面的示例），目前我必须使用过滤器手动执行此操作，是否有更简单的方法？

```
A   B
2   00:00:04
2   00:00:07
4   00:06:23
4   00:02:07
1   00:07:07
1   00:01:08

total of 2 would equal 00:00:11
total of 4 would equal 00:08:30
total of 2 would equal 00:08:15 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:08:54.687

试试 SUMIF 函数：

```
=SUMIF(A2:A7, 2, B2:B7) 
```

`B2:B7`这将对 in中的相应值`A2:A7`等于中间参数 2的值求和。

# java - 将文本文件读入列表或数组，然后能够在 Java 中进行搜索

> ID：13582841
> 
> 赞同：-4
> 
> 时间：2012-11-27T11:06:33.403
> 
> 标签：java, arrays, list

这就是我在我的 java 程序中为我正在上的一门课所尝试的。

我有一个文本文件，其中包含我朋友的姓名、电话号码和电子邮件地址。我应该建立一个类，它将获取文本文件并存储有关我朋友的信息，然后询问朋友的姓名。使用该名称，它将显示该朋友的电话号码和电子邮件地址。我怎样才能做到这一点？此外，我必须创建另一个类，以便稍后将朋友添加到列表中。

我知道使用列表是必要的。

只是不确定，如何制作Java

*   读取文件
*   将其拆分为姓名、电话等“类别”，
*   然后能够搜索名称并返回正确的信息。

文本文件的结构如下：

```
Name
Phone
Email
Name
..etc 
```

请帮我提供链接/示例代码....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:15:45.363

从 pojo 开始。

```
public class Friend {
 private String name;
 private String phoneNo;
 private String email;

 /* getters & setters ommited */
} 
```

然后以下将为您的文件生成一个列表作为列表。

```
BufferedReader in = null;
FileReader fr = null;
List<Friend> friends = new ArrayList<Friend>();
List<String> list = new ArrayList<String>();

try {
    fr = new FileReader("yourfile.txt");
    in = new BufferedReader(fr);
    String str;
    while ((str = in.readLine()) != null) {
        list.add(str);

        //If 3 rows then thats our data for this Friend
        if(list.size() == 3) {
           Friend f = new Friend();
           f.setName(list.get(0));
           f.setPhoneNo(list.get(1));
           f.setEmail(list.get(2));

           friends.add(f);
           list.removeAll();
        }
    }
} catch (Exception e) {
    e.printStackTrace();
} finally {
    in.close();
    fr.close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:17:26.800

> 我知道使用列表是必要的。只是不确定如何让 Java 读取文件

有关文件 IO 的信息，请参阅[Java 教程](http://docs.oracle.com/javase/tutorial/essential/io/)。

您可以使用 line reader 从文件中[读取每一行](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/BufferedReader.html)，并使用 regex 或用逗号拆分来获取姓名、电话等。

剩下的就是简单的算法

1.  读取文件
2.  遍历文件的每一行
3.  拆分电话等的线路值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:15:56.567

按照教程

[http://www.roseindia.net/java/beginners/java-read-file-line-by-line.shtml](http://www.roseindia.net/java/beginners/java-read-file-line-by-line.shtml)

然后根据文件的结构将您输入的行拆分为名称/电话。然后使用该信息生成一个新的 Friend 对象并将其存储在您的列表中

编辑：你能发布你的文件结构吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T11:13:12.393

用 Json 试试。

检查此链接，您将看到从 json 文件中读取是多么简单：

[http://answers.oreilly.com/topic/257-how-to-parse-json-in-java/](http://answers.oreilly.com/topic/257-how-to-parse-json-in-java/)

如果您选中此项，则必须为您的朋友创建一个类：

```
 public class Friend {

        String name;
        String surname;
        String phone;

         public Friend(String name, String surname, String phone){
              this.name = name;
              this.surname = surname;
              this.phone = phone;
         }

        public String getName() {
            return name;
        }
        public void setName(String name) {
            this.name = name;
        }
        public String getSurname() {
            return surname;
        }
        public void setSurname(String surname) {
            this.surname = surname;
        }
        public String getPhone() {
            return phone;
        }
        public void setPhone(String phone) {
            this.phone = phone;
        }

    }

In the class where you parsing the file you can do it like this:

ArrayList<Fried> friends = new ArrayList<Friends>();

// her json parsing

Friend fr = new Friend("Name you parst from Json", .... , ....);
friends.add(fr); 
```

循环执行此操作，您将获得包含 json-file 内容的 ArrayList

# android - android webview顶栏

> ID：13582856
> 
> 赞同：0
> 
> 时间：2012-11-27T11:07:57.970
> 
> 标签：android, webview

我的问题：当我将手指放在屏幕上几秒钟时，会出现顶部栏。它会导致错误，因为它被删除了？

附言`android:theme="@android:style/Theme.NoTitleBar.Fullscreen"`

[我的截图](http://dilibrary.com.ua/device-2012-11-26-195402.png)

[第二张截图](http://saveimg.ru/show-image.php?id=30d3f3b036b3b9cc4a1a2c504fa069fc)

这是我的清单， android:theme="@android:style/Theme.Holo.NoActionBar.Fullscreen" - 给出一个错误

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.dred.mytest_2"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/icon_72"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
    android:screenOrientation="landscape"> 
    <activity
        android:name=".MainActivity"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
        android:label="@string/title_activity_main" 
        android:screenOrientation="landscape"> 
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application> 
```

我似乎找到了问题的根源，我打开webview swf文件，他调用了这个菜单（当我打开这个html菜单时没有出现）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:48:12.913

我想这可以解决你的问题。我无法看到附加的图像，因为我的访问权限有问题。

```
webview.setOnLongClickListener(new OnLongClickListener() {
            @Override
            public boolean onLongClick(View v) {
                return true;
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:21:36.990

尝试将清单的应用程序部分更新为以下内容：

```
<application
    android:icon="@drawable/icon_72"
    android:label="@string/app_name"> 
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" 
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.NoTitleBar" > 
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application> 
```

# android - 软键盘打开时如何移动线性布局

> ID：13582859
> 
> 赞同：2
> 
> 时间：2012-11-27T11:08:07.507
> 
> 标签：android

我制作了一个类似的对话框（xml 布局），它存在于线性布局中。我希望在打开软键盘时改变这种线性布局。

![当软键盘打开时，LinearLayout 移动](../Images/5618f3725df64a083d22f22595e03faf.png) 编辑：我希望它看起来就像图像中出现的 WhatsApp 对话框一样。

解决了：

问题是因为 PARENT 是RelativeLayout （它占据了整个屏幕），因此，在清单文件中添加@Enigma 建议的内容后，删除作为相对布局的父布局并使LinearLayout 仅包含对话框，父母。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T11:11:40.290

在该特定 Activity 的 AndroidManifest.xml 中，添加此属性`android:windowSoftInputMode="stateVisible|adjustResize"`

那一定行得通。

# node.js - Mongoose pre.save() 异步中间件未按预期工作

> ID：13582862
> 
> 赞同：23
> 
> 时间：2012-11-27T11:08:28.817
> 
> 标签：node.js, validation, mongodb, mongoose

跟进：[Mongoose 唯一验证错误类型](https://stackoverflow.com/questions/13580589/mongoose-unique-validation-error-type/13581906#13581906)

我正在使用`mongoose 3.0.3`来自 npm 的这个模式：

```
var schema = new Schema({

    _id: Schema.ObjectId,
    email: {type: String, required: true, unique: true}

}); 
```

使用此中间件从 unique:true 获取validationError

```
schema.pre("save", function(next, done) {
    var self = this;

    model.findOne({email : this.email}, 'email', function(err, results) {
        if(err) {
            done(err);
        } else if(results) {
            console.warn('results', results);
            self.invalidate("email", "email must be unique");
            done(new Error("email must be unique"));
        } else {
            done();
        }
    });

    next();
}); 
```

但是，它不起作用！

`Users.create()`仍将返回 aa`MongoError: E11000 duplicate key error index`并且`console.warn()`仅在此之后调用。

在根据文档调用所有中间件之前，不应调用保存操作`done()`，并且我应该返回验证错误。

看起来`done()`行为没有按预期工作，

知道为什么吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-11-27T13:40:37.687

您正在使用并行中间件回调函数（同时使用`next`and `done`），但您没有在`schema.pre`参数中设置并行标志，因此它使用的是串行规则。

所以要么在你的调用中包含并行标志：

```
schema.pre("save", true, function(next, done) { ... 
```

或者如果您只需要这样，就切换到串行中间件回调样式：

```
schema.pre("save", function(next) {
    var self = this;

    model.findOne({email : this.email}, 'email', function(err, results) {
        if(err) {
            next(err);
        } else if(results) {
            console.warn('results', results);
            self.invalidate("email", "email must be unique");
            next(new Error("email must be unique"));
        } else {
            next();
        }
    });
}); 
```

# hyperlink - Yii：使用 Chtml:link 而不更改浏览器 URL

> ID：13582864
> 
> 赞同：0
> 
> 时间：2012-11-27T11:08:34.260
> 
> 标签：hyperlink, yii, url-routing

我的页面上有“删除”链接（就在每个用户的名称旁边），这些链接重定向到“删除用户”操作。

一切正常，但是当我单击链接时，浏览器中的 URL 会发生变化。

删除前：

```
 http://localhost/forsys/person/ 
```

之后：

```
 http://localhost/forsys/person/deletePerson/20 
```

这很烦人。

我尝试了几种不同的方法，例如重定向和转发我的索引操作或类似的事情，但我没有做任何工作：/

因此，如果您有解决此问题的想法，欢迎您:)

这是我的链接：

> echo CHtml::link('delete',"#", array('submit' => array('deletePerson','id'=>$people['person']->id)));

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:26:16.010

您是否尝试过删除操作：

```
$this->redirect(Yii::app()->user->returnUrl); 
```

或者

```
$this->redirect(Yii::app()->request->urlReferrer); 
```

# windows-8 - 检测其他进程是否运行 Metro 应用程序

> ID：13582866
> 
> 赞同：2
> 
> 时间：2012-11-27T11:08:34.217
> 
> 标签：windows-8, microsoft-metro

是否可以从用户空间检测到是否有外部进程（我只知道它的 PID）运行 Metro 应用程序？

**更新：**不幸的是，没有其他方法可以解决我的问题。我非常需要知道是否允许进程在 Metro 环境中绘制窗口。常见的 Windows Store 应用程序需要在 AppContainers 中运行，但这不是一个可靠的指标，因为任何桌面应用程序都可以自愿进入 AppContainer 以将其用作沙箱。例如，如果您在高级设置中启用增强保护模式，桌面 Internet Explorer 会执行此操作。此外，如果桌面应用程序符合某些标准，则可能允许在 Metro 中显示（请参阅[http://msdn.microsoft.com/en-us/library/windows/apps/hh465413 上的“开发支持新体验的桌面浏览器”。 .aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465413.aspx)）。例如 Chrome 就是这样做的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:51:26.263

原来有一个 API 函数：[IsImmersiveProcess](http://msdn.microsoft.com/en-us/library/windows/desktop/hh448383%28v=vs.85%29.aspx)。警告包括：

*   explorer.exe、taskmgr.exe 和其他可能出于某种原因被认为是沉浸式的
*   您只能查询在同一[桌面上运行的进程](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682573%28v=vs.85%29.aspx)
*   一些进程（例如 bing 地图的 map.exe）以非沉浸式开始，并在几秒钟后切换到沉浸式

# scala - Scala GADT Skolem Playframework 2.1 编译错误。

> ID：13582868
> 
> 赞同：1
> 
> 时间：2012-11-27T11:08:43.053
> 
> 标签：scala, playframework, playframework-2.1

有没有人有处理这些类型的编译错误的经验？

```
case class BasicAuthRequest[A](account: Account, request: Request[A]) extends WrappedRequest(request) {
    def asOpt[T](implicit fjs: Reads[T]): Option[T] = {
        catching(classOf[RuntimeException]).opt(fjs.reads(JsNull)).filter {
        case JsUndefined(_) => false
        case _ => true
    } }
} 
```

尝试编译此 playframework 方法时，我从 scala 编译器得到此响应

```
[error]  found   : play.api.libs.json.JsUndefined
[error]  required: play.api.libs.json.JsResult[?T1] where type ?T1 <: T (this is a GADT skolem)
[error]         case JsUndefined(_) => false
[error]              ^
[error] one error found
[error] (compile:compile) Compilation failed
[error] Total time: 23 s, completed Nov 27, 2012 3:01:20 AM 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:26:25.020

fjs.reads(JsNull) 返回 JsResult[T] 然后由 opt 包装到 Option

所以这段代码有几个问题：

*   返回类型应该是 Option[JsResult[T]]
*   JsUndefined 不是 JsResult 的子类，所以不能在 match 中使用
*   编译器错误消息确实很神秘，您介意向 scala tracker 提交问题吗？

这是我认为你试图实现的代码

```
 case class Account()

  case class BasicAuthRequest[A](account: Account, request: Request[A]) extends WrappedRequest(request) {
    def asOpt[T](implicit fjs: Reads[T]): Option[T] =
      scala.util.control.Exception.catching(classOf[RuntimeException]).opt(fjs.reads(JsNull)).flatMap(_.asOpt)
  } 
```

# android - Lucky Patcher 是否会辞去它修补的应用程序并且 Google API 是否验证 SHA1？

> ID：13582869
> 
> 赞同：1
> 
> 时间：2012-11-27T11:08:44.667
> 
> 标签：android, key, google-drive-api, sha1, cracking

我目前正在开发一个与 Google Drive 交互的应用程序。当您使用 Drive 注册应用程序时，它会要求您提供用于对其进行签名的密钥的 SHA1。在我以前的应用程序中，我没有实现许可库，因为它似乎需要更多的工作，然后它是值得的，而且总是会被修补，我的理论是，如果人们不想付钱，他们就不会付钱，我可以在其他地方更有建设性地利用我的时间。

然而，Drive 要求密钥的 SHA1 的事实让我想知道，当发出请求以确保它来自使用正确密钥签名的应用程序时，它是否会对此进行验证？

如果是这样，那么像lucky patcher 这样的修补应用程序是否会退出该应用程序，这实际上会使该应用程序发出的任何请求无效，从而使其无法在云端硬盘中使用？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T14:31:12.143

如果有人感兴趣，我最终从 Lucky Patcher 的作者那里找到了答案。他说 LP 不会放弃 APK。它修补 odex 文件或修补 Dalvik 缓存中的应用程序，因此不会更改签名并且 APK 保持不变。

他还提供了一些建议来防止幸运的修补程序以这种方式工作，即将 LVL 代码放在其他地方的 jar 文件中，例如资产文件夹或资源文件夹，然后从那里调用代码。这只是意味着要破解 LVL 代码，破解者必须修补 jar，然后重新签名代码。

因此，对于我们这些在您的代码中使用 Google API 来验证应用程序签名的人来说，我们似乎拥有一种相当可靠的复制保护方法。当然，直到他们找到解决方法。毫无疑问，他们会的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T21:47:40.060

我不知道如何修补像 Lucky Patcher 这样的应用程序，但 API 控制台要求密钥的 SHA1 的原因正是您所说的：能够确保 API 请求来自特定应用程序。

这是 Google Play 服务引入的新要求：[https ://developers.google.com/android/google-play-services/authentication](https://developers.google.com/android/google-play-services/authentication)

# gwt - （自动）调整 SmartGWT 垂直选项卡的大小以适应文本

> ID：13582870
> 
> 赞同：1
> 
> 时间：2012-11-27T11:08:44.957
> 
> 标签：gwt, tabs, smartgwt

我希望 UI 选项卡显示完整的文本。我尝试手动调整选项卡的大小，但没有奏效。我通过 FireBug 进行了检查，这表明选项卡实际上正在重新调整大小，但方式不正确。看到这张图片。

![在此处输入图像描述](../Images/4e45accfdcb4d0220ea585c74069641a.png)

以下是相关代码：

```
// Left  tab starts here
    final TabSet companyDetailsLeftTabSet = new TabSet();  
    //companyDetailsLeftTabSet.setAutoWidth();
    //companyDetailsLeftTabSet.setOverflow(Overflow.VISIBLE);
    companyDetailsLeftTabSet.setMargin(20);
    companyDetailsLeftTabSet.setTabBarPosition(Side.TOP);  
    //companyDetailsLeftTabSet.setTabBarThickness(25);
    companyDetailsLeftTabSet.setWidth(940);  
    companyDetailsLeftTabSet.setHeight(550);  

    companyDetailsLeftTabSet.setStyleName("text");
    Tab companyInformationsTab = new Tab(AnisConstants.COMPANYINFO);
    Tab relationTab = new Tab(AnisConstants.RELATIONS); 
    Tab legalInformationsTab = new Tab(AnisConstants.LEGALINFORMATIONS); 
    Tab loanTab = new Tab(AnisConstants.LOANS); 
    Tab assetTab = new Tab(AnisConstants.ASSETS); 
    Tab scoringTab = new Tab(AnisConstants.SCORING); 
    companyInformationsTab.setWidth(150);
    relationTab.setWidth(150);
    legalInformationsTab.setWidth(150);
    loanTab.setWidth(150);
    assetTab.setWidth(150);
    scoringTab.setWidth(150);

    companyDetailsLeftTabSet.addTab(companyInformationsTab);  
    companyDetailsLeftTabSet.addTab(relationTab); 
    companyDetailsLeftTabSet.addTab(legalInformationsTab); 
    companyDetailsLeftTabSet.addTab(loanTab);
    companyDetailsLeftTabSet.addTab(assetTab);
    companyDetailsLeftTabSet.addTab(scoringTab);
    VLayout vpnlCompany = new VLayout();
    vpnlCompany.addMember(btnSave);
    vpnlCompany.addMember(companyDetailsLeftTabSet); 
```

这是另外一张图片，问题选项卡以红色突出显示。

![在此处输入图像描述](../Images/f7ca5ffad37a1b5d386e83d148024d6b.png)

如果您需要更多信息，请发表评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T02:57:36.947

如评论中所述。可以通过添加：

```
tabset.setTabBarThickness(int tabBarThickness); 
```

有关更多详细信息和选项，该链接很有帮助。它解决了我的问题。

# git - GitConfig：shell命令的错误配置

> ID：13582872
> 
> 赞同：3
> 
> 时间：2012-11-27T11:08:54.687
> 
> 标签：git, git-config, git-alias

我正在尝试设置一个别名，因为我有很多。

由于某种原因，这个不起作用。任何想法？

```
[alias]
t = "!git log --decorate --oneline | egrep '^[0-9a-f]+ \(tag: ' | sed -r 's/^.+tag: ([^ ]+)[,\)].+$/\1/g'" 
```

命令本身可以正常工作：

```
$ git log --decorate --oneline | egrep '^[0-9a-f]+ \(tag: ' | sed -r 's/^.+tag: ([^ ]+)[,\)].+$/\1/g'
1.0.0
0.9.0
...
$ git t
fatal: bad config file line 28 in /Users/alanschneider/.gitconfig 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T11:20:00.763

反斜杠 (" `\`") 字符由 git 本身在您的配置中读取。只需用第二个反斜杠再次转义它们，它就会起作用：

```
t = "!git log --decorate --oneline | egrep '^[0-9a-f]+ \\(tag: ' | sed -r 's/^.+tag: ([^ ]+)[,\\)].+$/\\1/g'" 
```

# c# - 将GridView中TextBox中的值存储到数据库？

> ID：13582873
> 
> 赞同：2
> 
> 时间：2012-11-27T11:08:56.043
> 
> 标签：c#, asp.net, sql-server, ado.net

我有一个`GridView`我在每列的项目模板中放置文本框的地方。我想在单击按钮时将我将在文本框中输入的值存储到数据库中。

```
protected void Button1_Click(object sender, EventArgs e)
{
    GridView1.Visible = true;
    DataTable dt = new DataTable();
    DataRow row = dt.NewRow();
    for (int i = 0; i < GridView1.Rows.Count; i++)
    {
        string UserID = GridView1.Rows[i].Cells[1].Text;
        string q="insert into details (name) values('"+UserID+"')";

        SqlCommand cmd = new SqlCommand(q, con);
        SqlDataAdapter da = new SqlDataAdapter(cmd);
        da.Fill(dt);
    }
} 
```

问题是当我运行页面时文本框甚至不可见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:37:00.723

您不能直接从网格中获取文本框的引用。所以首先你需要从每一行网格中找到文本框。代码应该是这样的..

```
protected void Button1_Click(object sender, EventArgs e)
{
GridView1.Visible = true;
DataTable dt = new DataTable();
DataRow row = dt.NewRow();
for (int i = 0; i < GridView1.Rows.Count; i++)
{
   ## add below code ##
    TextBox txtUsrId=(TextBox)GridView1.Rows[i].FindControl("Your textbox id");
    string UserID = txtUsrId.Text;

    string q="insert into details (name) values('"+UserID+"')";

    SqlCommand cmd = new SqlCommand(q, con);
    SqlDataAdapter da = new SqlDataAdapter(cmd);
    da.Fill(dt);
} 
```

}

让我知道..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:13:37.527

它应该是这样的。

```
protected void Button1_Click(object sender, EventArgs e)
{
    Int32 TotalRecords = 0;
    SqlConnection con = new SqlConnection("data source=.\; Integrated Security=SSPI; initial catalog=Testdb;User ID=sa;password=abc123;");            

    foreach (GridViewRow gvRow in GridView1.Rows)
    {            
        TextBox textBox1 = (TextBox)gvRow.FindControl("textBox1");

        String q = "INSERT INTO details ([name]) VALUES('" + textBox1.Text.Trim() + "')";
        SqlCommand cmd = new SqlCommand(q, con);

        con.Open();
        TotalRecords += cmd.ExecuteNonQuery();
        con.Close();
    }

    lblMessage.Text = "Total " + TotalRecords + " inserted successfully.";

} 
```

关于未在页面上显示的文本框，请检查GridView、TemplateField 或其自身的 TextBox的**Visible属性是否未设置为****false**。（当您使 gridview 在按钮单击事件中可见时。）

另外我不建议以这种方式插入记录。相反，我会创建一个存储过程并传递参数，以避免[SQL INJECTION](https://stackoverflow.com/questions/601300/what-is-sql-injection)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:57:34.967

这个说法是错误的——

```
 string UserID = GridView1.Rows[i].Cells[1].Text; 
```

您不能直接访问子控件的值。像这样做-

```
TextBox tt = (TextBox)GridView1.Rows[i].FindControl("your text box");
string UserId= tt.Text; 
```

谈到你的问题，你应该展示你的 Gridview 源以获得帮助。

# javascript - 在自动填充的字段上附加一个值

> ID：13582876
> 
> 赞同：0
> 
> 时间：2012-11-27T11:09:15.977
> 
> 标签：javascript, jquery, javascript-events

下面的函数让我使用从 Field1 输入的任何值自动填充 Field2。Field1 是一个选择列表。

```
$("#Field1").change(function(){
    $("#Field2").val(this.value);
}); 
```

我设法想出了ff。它附加了字符串 abc。

```
$("#Field1").change(function(){
    $("#Field2").val(this.value += "abc");
});

Output:
Field 1: Option1
Field 2: Option2abc 
```

问题。提交表单时未保存 Field1 上的值，忽略在 Field1 上输入的值。

帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:11:29.220

如果您想在提交表单之间在客户端上的 Field1 上保存值，您可以通过将值保存在 cookie 中来实现，并在表单加载后恢复它：

cookie保存功能：http: [//www.w3schools.com/js/js_cookies.asp](http://www.w3schools.com/js/js_cookies.asp)

用法：

```
 //save
    $("#Field1").change(function(){
        $("#Field2").val(this.value += "abc");
        setCookie("Field2",this.value += "abc",10);
    });

   //restore
    $(function(){
       var Field2=getCookie("Field2");
       if (Field2!=null && Field2!=""){
       $("#Field2").val(Field2);
    }
    }); 
```

否则，您应该在服务器端跟踪汇总表单的值，并在表单提交到字段后写入新值。

# gzip - gzip 压缩时服务器会忽略 gzip 压缩的 js 文件吗？

> ID：13582880
> 
> 赞同：1
> 
> 时间：2012-11-27T11:09:32.063
> 
> 标签：gzip

吉日

我在我的服务器上设置了 mod_deflate，它运行良好。

我正在使用在线压缩器缩小我的 js 文件，并且它可以选择将它们保存为 gzip 格式。

我想知道这是否值得 - 它是否通过保存 gzip 压缩的静态文件来节省服务器 cpu - 服务器是否只是忽略 gzip 压缩它们并在保存时提供 gzip 压缩文件？

干杯

# javascript - 用掩码更改类名？(jQuery)

> ID：13582882
> 
> 赞同：3
> 
> 时间：2012-11-27T11:09:49.870
> 
> 标签：javascript, jquery, class, object, addclass

问题是关于 jQuery 的。

找到所有看起来像的类的最佳方法是什么，页面上的数字（任何整数）在`superclass-XXXXX`哪里`XXXXX`改变每个这样的类`superclass-XXXXX-finished`？

例如，如果页面上有`superclass-12345`和`superclass-34`类，则它们变为`superclass-12345-finished`and `superclass-34-finished`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:18:13.260

这有效：

```
function f() {
    $("[class]").each(function() {
        this.className = this.className.replace(/(super-\d+)(-finished)?/, function(a, b, c) {
            if (c == "") {
                return a + "-finished";
            }
            return a;
        });
    });
}

f();
f();
f();

console.log($("[class]").map(function() {
    return this.className;
})); 
```

这将替换*每次*出现的`super-<some digits>`to `super-<same digits>-finished`，即使您在单个元素上有许多这样的类。

输入：

```
<div class="super-11"></div>
<div class="super-not-11"></div>
<div class="yes-super-111"></div> 
```

输出：

```
<div class="super-11-finished"></div>
<div class="super-not-11"></div>
<div class="yes-super-111-finished"></div> 
```

[http://jsfiddle.net/9RFn4/1](http://jsfiddle.net/9RFn4/1)

编辑：更新以过滤掉以`-finished`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:12:03.347

找到所有以超类开头的，如下所示：

```
$('*[class^="superclass"]') 
```

然后将所有以超类开头的类更改为新的类名：

```
$('*[class^="superclass"]').attr('class', 'newClass'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T11:17:07.677

假设您的元素只有一个类`superclass-*`：

```
$('*[class^="superclass"]').prop('class', $(this).prop('class') + '-finished'); 
```

# android - 通过小部件启动的应用程序通过手机的后退按钮关闭，该按钮正在通过快捷方式启动应用程序的活动

> ID：13582887
> 
> 赞同：0
> 
> 时间：2012-11-27T11:10:05.877
> 
> 标签：android, service, android-widget, android-camera, onpause

我在关闭和重新启动我的应用程序时遇到问题。我`widget`在主屏幕上有一个，并且我在`shortcut`主屏幕上为应用程序创建了一个。我通过快捷方式进入应用程序并`Activity B`通过按手机的主页按钮将其关闭。现在我通过小部件启动应用程序并通过`Activity A`-> `Activity B`-> `Activity C`，然后我回来通过手机的后退按钮退出应用程序，类似于 from `Activity C`-> `Activity B`-> `Activity A`。在`Activity A`中，当我单击后退按钮时，它应该关闭应用程序，但尽管如此，它仍显示我通过应用程序快捷方式启动的在后台运行的 Activity B。

我尝试通过杀死应用程序`onPause()`，它工作正常。但后来我有了一个`Camera`功能，所以只要我点击一张图片并点击保存，它就会退出应用程序。我认为从手机的相机返回活动时，它会进入`onPause()`导致应用退出的活动。

任何人都可以为此提供解决方案。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:16:37.110

不是在 onPause 中杀死应用程序，而是使用意图标志从快捷方式或小部件启动活动：

```
FLAG_ACTIVITY_CLEAR_TOP or 
FLAG_ACTIVITY_CLEAR_TASK 
```

请参考：[这个](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP "这个")

# embedded - 芯片（SoC）中的不同类型的复位

> ID：13582892
> 
> 赞同：3
> 
> 时间：2012-11-27T11:10:21.820
> 
> 标签：embedded, fpga, reset

我想知道不同类型的复位和芯片中的定义。最好是冷、暖、系统、应用程序、开机复位。

也非常感谢他们每个人的一个简单示例。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T03:33:13.123

不确定您到底想了解什么。重置可以并且以多种不同的方式和位置使用。一般来说，没有规定可以在何时何地使用它们的规则。

相对于电流流过电路的速度，从电源“打开”到电压和电流稳定在可用且稳定的状态以使逻辑可以启动需要相当长的时间。一旦通电，驱动逻辑本身的时钟或振荡器将需要时间来稳定。使用某种时钟倍频器的芯片。例如，您的多千兆赫处理器通常会使用 100Mhz 振荡器，然后从芯片内部的振荡器中倍增。该电路需要一段时间才能锁定振荡器时钟，然后生成其倍频时钟。因此，您经常会看到全局复位，启动和运行芯片不需要的逻辑将希望保持在复位状态，直到事情足够稳定以便它们可以运行。这可以并且称为上电复位。某些电路用于在上电后将芯片的其余部分保持在复位状态一段时间。有很多不同的方法可以做到这一点。

通常，您的上电复位用于板上的所有逻辑，有时每个芯片都有自己独立的上电复位电路，当然有些系统是这两个极端的混合。您可以将与板上大部分逻辑相关的复位称为系统复位。导致整个系统不仅仅是它的一部分，被重置和/或释放。

有时你会看到允许软件选通全局复位的芯片，同样有很多不同的方法可以做到这一点。你必须避免明显的鸡和蛋问题。如果软件通过断言复位而对复位线进行开关控制，则会导致处理器以及软件本身进入复位状态，从而防止它导致复位被释放。因此，要么某些硬件未被相关重置重置，要么被给予命令以保持重置一段时间然后释放它。或者有时系统的工作方式软件可能会导致在第一个到达之前发送两个写入，一个断言重置另一个以释放它（这将是一个糟糕的硬件设计的软件破解）。由于电源已稳定，​​振荡器已稳定等，因此可以将其称为热复位，

系统设计可以为软件提供执行系统范围复位的能力，或者只提供系统的一部分，或者可能只提供运行软件的处理器或其芯片。例如，您可以想象系统已启动并运行，软件已对外围设备进行编程以执行某些操作，或者至少将其从上电复位状态更改，然后仅复位处理器，但外围设备没有。这可能对软件来说是可取的，也可能是不可取的，因为它必须从复位中恢复，并且可能必须确定外围设备是否也刚刚复位或处于未知状态。当软件启动时，软件设计可能无法假设外设处于已知的复位后状态。

这可以而且确实会被带到各种极端。时钟逻辑会消耗电力，如果您的 SOC 有您不使用的外围设备，那么它可能会明显浪费该系统不会使用的电源时钟逻辑。因此，一些系统设计为系统的各个部分，甚至每个单独的外围设备都具有复位和时钟，使软件能够精确控制功耗，并能够轻松地将芯片的部分复位到已知状态，从而使使用或重新使用这些外围设备更容易。通常用于以已知方式启动（嵌入式）系统。

冷与暖相反，冷复位可以是“电源循环”的另一种说法。关闭电源（意味着电路/系统变冷），然后打开电源，以便一切都可以从寒冷中恢复并再次稳定下来。热重置不会影响整个系统但只有部分系统会使用术语“暖”和“冷”的系统。热复位解决了一些崩溃，冷复位在理论上解决了更多问题，因为冷复位理论上会复位整个系统。但很自然，例如，如果您有一台扫描仪或打印机或其他一些有自己的电源的外围设备，不一定会从主计算机的冷重置中重置，您需要关闭所有设备并将其重新启动。

它真的没有什么魔力，设计人员认为需要重置的任何逻辑块都会有重置，重置是本地还是全局，是设计的一部分。可以认为芯片与由单独的函数调用和库调用组成的软件项目没有什么不同。用于创建现代逻辑的编程语言非常类似于具有软件函数和函数调用函数等的软件项目。主要区别在于逻辑确实并行运行，其次逻辑函数可以有时会有几十到几百个参数，其中软件代码段线性执行并且函数往往具有适度数量的调用。看起来像使用全局变量的项目一样可取或不可取，这些全局变量被编程语言假定为在程序启动时具有一定的状态。在 C 中，当 main() 发生时，有一些语言规则会告诉您所有全局变量的状态是什么，同样当输入一个函数时您的所有本地变量的状态也是如此。你可以想象在你的代码中个别全局变量被重置为已知状态的地方，x=0; y=7；等等。后来它们的使用是根据先前的状态 x++ 确定的；y-=z；当您希望将某物恢复到已知状态时，逻辑没有什么不同，您提供了一种机制来做到这一点。如果您的代码希望将大量变量恢复为已知状态，以便任务可以重新开始，例如图形程序完成了一个文件，而不退出该程序希望释放它为该文件分配的所有内存先前的图像，当没有打开的图像文件等时，灰色的菜单和按钮没有意义。您可能有一个函数调用其他导致重大清理发生的函数。这与热复位没有什么不同。退出程序并再次启动程序与冷复位没有什么不同。进入 main() 时的变量状态和/或调用函数时的局部变量状态是这些变量的上电复位状态。

# javascript - 我有一个“n”个数组，如何使用 jQuery 将所有数组连接到一个数组中

> ID：13582895
> 
> 赞同：0
> 
> 时间：2012-11-27T11:10:32.643
> 
> 标签：javascript, jquery

如何使用 jQuery 将“n”个数组合并到一个数组中。

```
 a1 = [a,b,c,d,f];
     a2 = [h,g,f,r];
     ...............
     an = [r,e,c,g,s,g]; 
```

我需要变得像

```
 A = [a,b,c,d,f,h,g,f,r,.....,r,e,c,g,s,g]; 
```

请帮忙。预先感谢您的所有重播

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T11:13:34.813

你在找`array concat`方法

[jsBin 演示](http://jsbin.com/oxusap/1/edit)

```
var arr1 = ["a", "b"];
var arr2 = ["c", "d"];

var arr3 = arr1.concat(arr2);

console.log(arr3);  // ["a", "b", "c", "d"] 
```

您可以在此处找到更多信息：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/concat](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/concat)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:13:45.940

```
var A=a1.concat(a2,a3,a4,....,an); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T11:14:05.577

假设您的数组都是 named`a<x>`和全局变量，您可以在 window 对象上循环它们，如下所示：

```
var output = [];
for(var i = 1; window['a'+i]; i++){
    output = output.concat(window['a'+i]);
} 
```

[工作示例](http://jsfiddle.net/r2DcT/)

然后，在循环结束时，输出将是所有数组的串联。

`window['a'+i]`将引用`a1 - aX`数组，因为全局变量是`window`对象的属性。因此，这些都是相同的：

```
var output = "Some content"

console.log(output);
console.log(window.output);
console.log(window['output']);
// These will all return "Some content" 
```

如果你知道你有多少，你也可以像这样手动连接它们：

```
output = a1.concat(a2,a3,a<x>...); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T11:13:45.177

```
Array.prototype.concat([1,2,3],[4,5]) 
```

或者

```
[1,2,3].concat([4,5]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T11:13:46.593

尝试使用 $.merge; 例子：

```
var new = $.merge( [0,1,2], [2,3,4] ); // new = [0,1,2,2,3,4] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-27T11:14:12.097

使用`concat()`方法。

```
var a1 = ["a","b","c","d","f"]; 
var a2 = ["h","g","f","r"]

var a3 = a1.concat(a2);

console.log(a3);  // Outputs: ["a", "b", "c", "d", "f", "h", "g", "f", "r"] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-27T11:14:14.693

您可以使用标准功能`concat`。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-11-27T11:15:57.297

类似于：

```
for(a2...an){
    a1 = $.merge(a1,next);
} 
```

# php - 禁用会话修改 (php)

> ID：13582896
> 
> 赞同：-2
> 
> 时间：2012-11-27T11:10:37.870
> 
> 标签：php, session, protection

我正在与其他一些开发人员一起编写应用程序。我想保护一些有用的“会话”密钥不被更改。

例如，如果连接时：

```
$_SESSION['can_access_to_all'] = '0'; 
```

例如，一些开发人员可以更改`$_SESSION['can_access_to_all'] = '1';`。但是我怎样才能防止`$_SESSION['can_access_to_all']`被改变呢？有解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:26:12.803

您可以加密或签署会话值。但是您的 crypt 算法在代码中，因此如果开发人员可以完全访问它（或者只知道哪些类/方法适用于秘密会话），它将无法工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:15:40.607

或者您可以创建一个类来操作会话。制作一个 getter 和一个 setter，当你想设置检查是否是 can_access_to_all 时，你不会修改它。

```
<?php
class Session {
   public function __set($name, $value) {
      if ( $name != 'can_access_to_all' ) 
          $_SESSION[$name] = $value;
   }

   public function __get($name) {
       if ( isset($_SESSION[$name]) ) 
          return $_SESSION[$name];
       return null;
   }
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:23:49.350

迈克尔说的是正确的。你无法完全阻止它。如果只是为了防止错误，您确实可以使用包装器来防止更改某些变量。例如：

```
function setSession($k, $v) {
  if ($k!='can_access_to_all')
    $_SESSION[$k] = $v;
} 
```

但这并不妨碍开发人员在不使用包装器的情况下直接更改会话。

您可以做的另一件事是在末尾添加一个包含，您可以将所有固定会话设置回其原始会话。

```
//do stuff
//include restoresession.inc 
```

在 restoresession.inc 中

```
$_SESSION['can_access_to_all'] = 0 
```

现在他们仍然可以为当前页面更改它，但是在重定向时它将被重置为应有的状态。

但主要问题是，您为什么要让您不信任的开发人员掌握某些文件/设置？

//UPDATE FOR SESSION WITH CLASS，最好能阻止对实际类及其设置器的访问

```
class MySettings
{   
    private $can_access_to_all;

    /**
     * Construct 
     */
    final public function __construct()
    {
        //remove if not needed, or use it to make   
        $this->can_access_to_all = 0;
    }

    /**
     * handle requests
     */
    final public function __get($prop) {
        return $this->$prop;
    }

    /**
     * Prevent setting of properties
     */
    final public function __set($prop, $val) {
        trigger_error("Property cannot be set directly");
    }   
}

$_SESSION['MySettings'] = new MySettings(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-27T11:13:40.247

你不能做这样的事情。而且真的没有任何理由你应该这样做。

# javascript - 为什么 Dojo DOM 函数在 IE 上会得到不同的结果？

> ID：13582897
> 
> 赞同：2
> 
> 时间：2012-11-27T11:10:38.260
> 
> 标签：javascript, dojo, cross-browser

简而言之，使用 Dojo 框架的脚本最终会在 IE 上得到不同的结果。

这是一个演示该问题的示例页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<script src="http://ajax.googleapis.com/ajax/libs/dojo/1.7.3/dojo/dojo.js"></script>
<script type="text/javascript">

dojo.connect(document.body, "onload", function () {

    var d = dojo.query("div");
    var s = dojo.query("span");
    dojo.empty(d[0]);
    dojo.create("span", {innerHTML: s[0].innerHTML}, d[0]);

});

</script>
</head>
<body>
<div><span>foobar</span></div>
</body>
</html> 
```

[不要费心在 jsFiddle 上尝试，这种特殊情况不会在那里重现。]

样本应该输出`foobar`，但在 IE 上却没有。

为什么会发生这种情况，有没有办法解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:10:38.260

经过一些挖掘和调试后，我设法将问题追溯到 Dojo 的内部：

```
397.empty = has("ie") ? function(node) {
    node = dom.byId(node);
    for (var c; c = node.lastChild; ) {
        _397.destroy(c);
    }
} : function(node) {
    dom.byId(node).innerHTML = "";
};

_397.destroy = function destroy(node) {
    node = dom.byId(node);
    try {
        var doc = node.ownerDocument;
        if (!_3a2 || _3a3 != doc) {
            _3a2 = doc.createElement("div");
            _3a3 = doc;
        }
        _3a2.appendChild(node.parentNode ? node.parentNode.removeChild(node) : node);
        _3a2.innerHTML = "";
    } catch (e) {
    }
}; 
```

从上面的代码可以看出，IE 有一个特殊情况，但不幸的是它在功能上并不等同——事情最终会有所不同。

不确定这是否是一个错误，但肯定是一个值得怀疑的功能。一种解决方法是`dojo.clone()`在`innerHTML`调用之前运行`dojo.empty()`：

```
var d = dojo.query("div");
var s = dojo.query("span");
var i = dojo.clone(s[0].innerHTML);
dojo.empty(d[0]);
dojo.create("span", {innerHTML: i}, d[0]); 
```

# python - 通过python终端运行外部程序

> ID：13582904
> 
> 赞同：0
> 
> 时间：2012-11-27T11:11:00.393
> 
> 标签：python, operating-system, system, external, execute

我尝试运行一个程序（带有 tcl 文件的词干分析器）来读取一个 txt 文件并将结果保存到另一个 txt 文件中。当我通过dos-windows终端运行命令时它工作正常，但是当我通过python终端运行它时`os.system()`它返回`1`值并且没有任何反应..这是代码：

```
>>>import os
>>>os.system('C:\Python27\Lib\site-packages\tclsh.exe -encoding utf-8     C:\Python27\Lib\site-packages\GreekStemmer.tcl in.txt out.txt')
>>>1 
```

我猜'1'意味着命令没有成功执行？？当我在 dos-terminal 中运行它时，它会创建带有结果的 out.txt 文件。但这里不是..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:15:33.993

是否`in.txt`在您运行 python 脚本的同一目录中？您可能会误解当前工作目录来自函数调用的位置。如果没有，而不是`in.txt`给出更具体的路径。

此外，python 中有一个`subprocess`用于外部可执行调用的模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:21:15.383

在我的机器上，以下内容不起作用，因为反斜杠没有被解释。它们表示特殊字符。

```
import os
os.system('C:\bin\Tcl\bin\tclsh.exe') 
```

您可以在字符串之前添加一个 r

```
import os
os.system(r'C:\bin\Tcl\bin\tclsh.exe') 
```

或使用双反斜杠

```
import os
os.system('C:\\bin\\Tcl\\bin\\tclsh.exe') 
```

# c# - Web 部署 API - 部署 .NET 4.5 应用程序

> ID：13582906
> 
> 赞同：12
> 
> 时间：2012-11-27T11:11:06.093
> 
> 标签：c#, asp.net-mvc, msbuild, microsoft-web-deploy

我们使用 Web Deploy 3 的（几乎完全未记录的）“公共 API”来创建我们网站的 .zip 包，然后将其同步到服务器：

```
DeploymentBaseOptions destinationOptions = new DeploymentBaseOptions()
{
       UserName = //username,
       Password = //password,
       ComputerName = //a server
};

using (var deploymentObject = DeploymentManager.CreateObject(DeploymentWellKnownProvider.Package, "C:/MyWebsitePackage.zip"))
{
       deploymentObject.SyncParameters.Load(packageParametersFile); \\ contains some connection string information and nothing more.
       DeploymentSyncOptions syncOptions = new DeploymentSyncOptions();

       syncOptions.WhatIf = false;

       deploymentObject.SyncTo(destinationOptions, syncOptions);
} 
```

在我们在生产和构建服务器上安装 .NET 4.5 并将我们正在部署的项目也升级到 4.5 之前，此代码运行良好。现在我们收到以下错误：

> 您尝试使用的应用程序池将“managedRuntimeVersion”属性设置为“v4.0”。此应用程序需要“v4.5”。了解更多信息：http: [//go.microsoft.com/fwlink/](http://go.microsoft.com/fwlink/?LinkId=221672#ERROR_APPPOOL_VERSION_MISMATCH) ?LinkId=221672#ERROR_APPPOOL_VERSION_MISMATCH 。

我们的服务器肯定安装了 .Net 4.5，并且 IIS 网站应用程序池版本是“.NET Framework v4.0.30319”（我知道它说的是 v4，但 .NET 4.5 是“就地”升级并将 4.0 DLL 替换为新版本号 .30319）。

通过添加**/p:VisualStudioVersion=11.0标志（这***会*导致不同的 Web 应用程序目标文件成为使用它以某种方式允许部署 .NET 4.5 应用程序）。

有谁知道为什么 Web Deploy API 会这样抱怨以及如何以与 MSBuild 解决方案相同的方式解决此错误？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-30T16:15:50.397

最简单的可能只是将 Microsoft.Web.Publishing.targets 中的 IgnoreDeployManagedRuntimeVersion 属性包含到 .csproj 中，或者在 /t:package 步骤中作为 MSBuild 的参数。其他选项可能是项目根目录中的 parameters.xml 以使 managedRuntimeVersion 可被 MSDeploy 参数覆盖，或者直接在 archive.xml 中的 .zip 中设置它作为预部署步骤。

更新（太长无法回复评论）：

好吧，它比 VS 2012 本身所做的要少。从 VS 发布到 IIS（Web 部署选项），它将生成的包将是临时文件夹的内容和参数 xml，而不是您在进行通用打包时获得的 zip，并且运行时版本将被设置到 4 即使项目是 4.5。IgnoreDeployManagedRuntimeVersion 将完全忽略它。如果您从 VS 执行 Web Deploy Package 选项，您将在 archive.xml 中获得 4.5 的 zip，如果您尝试将 VS 输出的 zip 直接手动导入 IIS，您将收到 4.0 vs 4.5 应用程序池的错误弹出窗口错误，与从命令行运行 msbuild /t:package 和 msdeploy :sync 得到的错误相同。VS (devenv) 没有做到“正确”，它悄悄地覆盖了项目设置，它不是 MSDeploy'

顺便说一句，重新 API 文档，是的，它们实际上不存在，但我发现命令行文档是可以容忍的（称为 Web Deploy 而不是 MSDeploy，例如[http://technet.microsoft.com/en-us/library/dd569089.aspx](http://technet.microsoft.com/en-us/library/dd569089.aspx)和其他）并将这些映射到 dotPeek 输出会有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-20T20:39:22.777

您可以尝试将其添加到您的项目中：

```
<IgnoreDeployManagedRuntimeVersion>True</IgnoreDeployManagedRuntimeVersion> 
```

# c++ - 如何使用winsock (c++) 发送\recv 非字符数据？

> ID：13582915
> 
> 赞同：3
> 
> 时间：2012-11-27T11:11:30.860
> 
> 标签：c++, windows, networking, winsock

我正在使用**sendto**和**recvfrom**函数通过 winsock 交换数据，但每个函数中的第二个参数是**char* buf**。我想发送一个像**MyStruct***这样的自定义数据，但我找不到这些函数的类似物来使用**void***。我只是担心，以字符串格式发送数据然后解析它可能会很慢且无效。但是，也许有充分的理由强迫程序员以这种方式发送数据？欢迎任何有关情况的信息和任何建议。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T11:13:50.443

无论如何，它`char*`或`void*`套接字是否与原始字节一起工作都没有关系。所以只需将你的缓冲区投射到`(char*)`就可以了

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T12:23:58.163

如果您`struct`不包含*任何*指针或句柄并且接收器是由您使用相同的编译器和编译标志编写的，并且您不关心可移植性（例如大端架构），那么您可以将您的`MyStruct*`转换为`char*`并且它将起作用.

在任何其他情况下，你都会死得很惨。不，认真的。它行不通。指针和句柄在另一台机器上没有意义，使用不同的编译器或编译标志可能会导致`struct`布局或填充略有不同，使其无用。

[通过网络发送结构通常需要序列化](http://en.wikipedia.org/wiki/Serialization)，极少数例外。

# c++ - 为什么 sscanf 会忽略指定的宽度？

> ID：13582916
> 
> 赞同：3
> 
> 时间：2012-11-27T11:11:32.863
> 
> 标签：c++, hex, scanf

我正在使用此代码将固定大小为 32 的十六进制字符串转换为 16 字节的 uint8 数组。

```
const uint8_t* c = "0123456789abcdef0123456789abcdef";
uint8_t Bytes[16];
for (int i = 0; i < 16; i++) {
    sscanf (&c[2*i], "%2hhx", &(Bytes[i]));
} 
```

尽管`hh`指定了 1 个字节的目标宽度，但每步写入 4 个字节。因此，代码在缓冲区末尾写入 3 个字节。这是为什么？

（现在，我使用临时 int 修复它，该临时 int 在每一步都被复制到数组中。）

重现：

```
#include <stdint.h>
#include <string>

void main (int argc, char* argv[])
{
    const char* c = "0123456789abcdef0123456789abcdef";
    uint8_t b[20];
    for (int i = 0; i < 20; i++) {
        b[i] = i;
    }
    for (int i = 0; i < 16; i++) {
        sscanf (&c[2*i], "%2hhx", &(b[i]));
    }
    for (int i = 0; i < 20; i++) {
        fprintf(stdout,  "%02x\n", (int)(b[i]));
    }
} 
```

预期输出为 01 23 45 67 89 ab cd ef 01 23 45 67 89 ab cd ef 10 11 12 13

但是，使用 Visual Studio 2010 的实际输出是：

01 23 ... cd ef 00 00 00 13

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T11:48:54.767

您的代码一开始就有一个小问题。

```
const uint8_t* c = "0123456789abcdef0123456789abcdef"; 
```

在 C++ 中，没有指定 a`char`是`signed`还是`unsigned`。更准确地说，类型 `char`, `signed char`,`unsigned char`是不同的，实际上在重载函数和专门化模板时必须考虑到这一点。

现在的代码是：

```
const char* c = "0123456789abcdef0123456789abcdef";
uint8_t Bytes[16];
for (int i = 0; i < 16; i++) {
    sscanf (&c[2*i], "%2hhx", &(Bytes[i]));
} 
```

让我们分析您的格式字符串：

```
2  : maximum field witdh to be read
hh : expecting a pointer to signed or unsigned char
x  : means unsigned hex-input

(http://linux.die.net/man/3/scanf) 
```

有了这个信息，到目前为止它看起来是正确的。

据我所知，**符合 C99 的库** ^*没有问题。

* * *

^*：在这方面，MSVC 库不支持说明`hh`符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:29:47.270

我在 Mac OS X 上使用 gcc 4.2.1 构建并运行了以下代码：

```
#include <stdio.h>
#include <stdint.h>

int main(void)
{
    const char *c = "0123456789abcdef0123456789abcdef";
    uint8_t b[20] = { 0 };
    int i;

    for (i = 0; i < 20; i++) {
        b[i] = i;
    }

    for (i = 0; i < 16; i++) {
        sscanf (&c[2*i], "%2hhx", &b[i]);
    }

    for (i = 0; i < 20; i++) {
        printf("%02x", b[i]);
    }
    printf("\n");

    return 0;
} 
```

它似乎表现得如预期：

```
$ gcc -v
...
gcc version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00)
$ gcc -Wall scanf_hex.c
$ ./a.out 
0123456789abcdef0123456789abcdef10111213
$ 
```

请尝试使用您的编译器等构建和运行上述代码，以便我们查看它是否可能是编译器/库错误，或者是否是您的代码中的其他问题。（您可能想尝试调试和发布版本。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T11:50:02.380

非常适合我：

```
#include <stdio.h>
#include <stdint.h>
int main()
{
    const char* c = "0123456789abcdef0123456789abcdef";
    unsigned char Bytes[16];
    int i;
    for (i = 0; i < 16; i++)
    {   
            sscanf (&c[2*i], "%2hhx", &(Bytes[i]));
    }   
    for (i=0; i < 16; ++i)
    {   
        fprintf(stdout,  "%02x\n", (int)(Bytes[i]));
    }   
} 
```

使用：

```
> gcc gh.c 
> ./a.out
01
23
45
67
89
ab
cd
ef
01
23
45
67
89
ab
cd
ef 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T14:35:56.130

**带有 iostream**的 c++ 解决方案可能如下：

```
 #include<iostream>
  #include<sstream>
  #include<iomanip>      
  using namespace std;

  //...

  const char* c = "0123456789abcdef0123456789abcdef";
  unsigned char Bytes[16];
  stringstream s_in(c);
  for (int i = 0; i < 16; i++) 
  {
      string s;
      s_in >> setw(2) >> s;
      unsigned int t;
      stringstream(s) >> hex >> t;
      Bytes[i] = t;
  } 
```

请注意，如果变量类型不是字符串，s_in 不想服从 setw(2)。如果变量是 char 类型，宽度也一定是 1 *，*因此从 int 转换。

要测试它：

```
 for (int i = 0; i < 16; i++) 
  {
    cout << setfill('0') << setw(2) << hex << (int) Bytes[i] << " ";
  } 
```

# iphone - 如何在基于视图的应用程序的所有视图中获取不同的选项卡？

> ID：13582923
> 
> 赞同：0
> 
> 时间：2012-11-27T11:11:49.597
> 
> 标签：iphone, objective-c, ios, xcode, uitabbarcontroller

我正在尝试在基于视图的应用程序中实现选项卡栏。现在我想要的是每个视图都包含基于该视图的不同选项卡。我将如何在所有视图中添加选项卡栏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:45:13.287

Purva，您可以使用以下技巧来实现此目的：-

当您的选项卡单击时，控件应该转到 Rahul 指出的所需委托。现在，在那个地方，您需要从 tabController 获取视图控制器数组并将它们替换为新的视图控制器数组你想成为标签。

有任何顾虑，请对我大喊大叫。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:47:13.473

在这个其他[问题](https://stackoverflow.com/questions/8502071/creating-uitabbarcontroller-programmatically)及其答案中，您将找到有关如何完成此任务的示例

# c# - 如何避免更新List元素

> ID：13582924
> 
> 赞同：-1
> 
> 时间：2012-11-27T11:11:50.587
> 
> 标签：c#, linq

我有以下代码可以根据 Id 从以前的记录中复制新记录。

```
 //selecting the employee to be copied.
 Employee emp=employeeList.Where(p=>p.Id==2).Single();

 //Increasing the Employee Id.
 Employee NewEmp=new Employee();
 NewEmp=emp;
 NewEmp.Id=employeeList.Max(p=>p.Id)+1;

 //Adding to the List.
 employeeList.Add(NewEmp); 
```

但是新记录已成功添加。现有的 Record Id 也已更改为 New Max Id 3，因为它是上下文。

请有人帮我停止更新现有的记录对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:17:57.440

当你写这个：

```
Employee NewEmp=new Employee();
NewEmp=emp; 
```

您创建新对象（第一行），然后（第二行）在变量 NewEmp 中分配“emp”，现在它们都引用同一个对象，因此实际上您使用的是一个对象。您实际创建的新员工将被 GC 收集。

你可以从值类型和引用类型之间的差异中学到更多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:18:44.290

你在这里做的分配：

```
Employee NewEmp=new Employee(); 
```

完全无效，新实例被以下行放弃：

```
NewEmp=emp; 
```

您必须`emp`逐个字段（逐个属性）复制内容。在您的情况下，我建议您`ICloneable`在`Employee`-[参见 MSDN](http://msdn.microsoft.com/en-us/library/system.icloneable.aspx)以获取文档。

另一个选项包括：

*   声明`Employee`为结构；
*   使用[Object.MemberwiseClone()](http://msdn.microsoft.com/en-us/library/system.object.memberwiseclone.aspx)。

但是，对于您预期的技能水平，我不推荐任何一种方式。

* * *

注意：通常的做法是局部变量的名称以小写字母开头，例如'newEmp'。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:18:44.693

您将旧分配给`Employee`变量`NewEmp`并将其更新`NewEmp.Id`为 3。然后您`Employee`再次将其添加到列表中。所以你在列表中有两个相同`Employee`的 s `Id = 3`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T11:25:25.283

这条线

```
newEmp = emp; 
```

不复制`emp`。它只是创建对内存中相同位置的新引用。如此有效`emp`，并且`newEmp`是一个相同的，但不是两个单独的内存块。阅读“参考类型”，例如：[http ://www.albahari.com/valuevsreftypes.aspx](http://www.albahari.com/valuevsreftypes.aspx)

# c# - 时间：2019-06-01 标签：c#regexmatchvarvalue

> ID：13582926
> 
> 赞同：1
> 
> 时间：2012-11-27T11:12:03.323
> 
> 标签：c#, regex, match

我想匹配引号之间的 var 值。这是输入：

```
bunch of other text, html tags, css 
var SECURITYTOKEN = "1354010802-f407561a1503fa33e8e316f058c0f0598ce5adad";
bunch of other text, html tags, css 
```

结果应该是 1354010802-f407561a1503fa33e8e316f058c0f0598ce5adad

我正在尝试这样的事情： Match m = Regex.Match(input, @"var\sSECURITYTOKEN\s="); 但我完全糊涂了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T11:30:14.703

您的变体仅找到部分`var SECURITYTOKEN =`

使用积极的前瞻`(?=...)`和积极的后瞻`(?<=...)`

```
String regexPattern = "(?<=var SECURITYTOKEN = \")(.*?)(?=\")";
Match m = Regex.Match(input, regexPattern); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:17:33.717

试试这个正则表达式 `(?<=")(.*?)(?=")`

所以它会是这样的

```
var regexPattern = "(?<=\")(.*?)(?=\")";
Match m = Regex.Match(input, regexPattern); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T12:35:21.770

这与 og Grand answer 几乎相同，但如果您的输入看起来像

```
var foo = "bar";
var SECURITYTOKEN = "1354010802-f407561a1503fa33e8e316f058c0f0598ce5adad";
var tata = "titi"; 
```

以下会更好：

```
var regexPattern = "(?<=var SECURITYTOKEN\s*=\s*\")(.*?)(?=\";)";
Match m = Regex.Match(input, regexPattern); 
```

# c# - 如何发送预定的电子邮件？

> ID：13582928
> 
> 赞同：-4
> 
> 时间：2012-11-27T11:12:05.077
> 
> 标签：c#, asp.net, html, email

> **可能重复：**
> [通过 C# ASP.NET 发送 html 电子邮件](https://stackoverflow.com/questions/1329922/send-html-email-via-c-sharp-asp-net)

任何人都可以为我提供发送包含html格式正文的电子邮件的示例代码吗？我对这个概念完全陌生，并且努力做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:28:29.357

试试这个

```
 public void SendErrorMail(string commaSeparatedEmails, string errorDate, string pageName, string errorMessage, string errorSource, string errorInnerException, string errorData, string errorTarget, string errorStack)
    {
        try
        {
            MailMessage mail = new MailMessage();
            SmtpClient SmtpServer = new SmtpClient("smtp.gmail.com");
            SmtpServer.Port = 587;
            SmtpServer.Credentials = new System.Net.NetworkCredential("yourgmailid@gmail.com", "yourPass");
            SmtpServer.EnableSsl = true;
            mail.From = new MailAddress("yourmail@gmail.com");
            mail.To.Add(functionToGetValueFromDB());

            mail.Bcc.Add("oyurbccmail@gmail.com");
            mail.Subject = "Error Details";
            string mailtable =
                "<html><table style= 'width: 352px' id='Mail' runat='server'>" +
                                          "<tr><td style='width: 100px; height: 25px'>" +
                                                  "  </td>" +
                                              "  <td style='width: 100px; height: 25px'>" +
                                                 "   </td> " +
                                          "  </tr>" +
                                           " <tr>" +
                                             "   <td style='width: 100px; height: 25px'>" +
                                                   " Error Date</td> " +
                                               " <td style='width: 100px; height: 25px'> " +
                                                  errorDate + "</td> " +
                                           " </tr> " +
                                           "  <tr>" +
                                                "<td style='width: 100px; height: 25px'>" +
                                                   "Error Page </td>" +
                                               " <td style='width: 100px; height: 25px'>" +
                                                  pageName + "</td>" +
                                           " </tr>" +
                                           "  <tr>" +
                                                "<td style='width: 100px; height: 25px'>" +
                                                   "Error Message </td>" +
                                               " <td style='width: 100px; height: 25px'>" +
                                                  errorMessage + "</td>" +
                                           " </tr>" +
                                           " <tr>" +
                                               " <td style='width: 100px; height: 25px'>" +
                                                  " Error Source</td>" +
                                              "  <td style='width: 100px; height: 25px'>" +
                                                  errorSource + "</td>" +
                                           " </tr>" +

                                            " <tr>" +
                                               " <td style='width: 100px; height: 25px'>" +
                                                  " Error InnerException</td>" +
                                              "  <td style='width: 100px; height: 25px'>" +
                                                  errorInnerException + "</td>" +
                                           " </tr>" +

                                            " <tr>" +
                                               " <td style='width: 100px; height: 25px'>" +
                                                  " Error Data</td>" +
                                              "  <td style='width: 100px; height: 25px'>" +
                                                  errorData + "</td>" +
                                           " </tr>" +

                                            " <tr>" +
                                               " <td style='width: 100px; height: 25px'>" +
                                                  " Error Target</td>" +
                                              "  <td style='width: 100px; height: 25px'>" +
                                                  errorTarget + "</td>" +
                                           " </tr>" +

                                            " <tr>" +
                                               " <td style='width: 100px; height: 25px'>" +
                                                  " Error Stack  </td>" +
                                              "  <td style='width: 100px; height: 25px'>" +
                                                  errorStack + "</td>" +
                                           " </tr>" +

                                            "<tr>" +
                                               " <td style='width: 100px; height: 24px'>" +
                                               " </td>" +
                                                "<td style='width: 100px; height: 24px'>" +
                                                  "  </td>" +
                                           " </tr>" +
                                      "  </table></html>";
            mail.IsBodyHtml = true;
            mail.Body = mailtable;
            SmtpServer.Send(mail);
        }
        catch (Exception ex)
        {
        }
    } 
```

**从数据库中获取价值的函数**

```
public string functionToGetValueFromDB()
{
 //your sp codes here

 return to_mail;
} 
```

# javascript - Photoshop 的切片工具可以交换网页上的图像吗？

> ID：13582929
> 
> 赞同：-1
> 
> 时间：2012-11-27T11:12:07.210
> 
> 标签：javascript, .net, flash, photoshop, photoshop-script

我有一张为 12 月 1 日创建的 Photoshop 图像。此图像将用作 Intranet 站点的日历。像任何普通日历一样，它有一个我希望用户按下的门。我有一份原始文档的副本，当用户按下它时，我想显示新图像来代替门，这样看起来用户已经陶醉在门后面的东西了。

我想我可以使用 Photoshop 的切片工具来完成这项任务。如果我的日历门链接到一个 URL，而不是另一个 .jpg 文件，我可以实现这一点。

我还认为我可以通过导入我的 .jpg 文件并创建一个链接在 Flash 中完成此操作，但我再次认为这仅适用于 URL。

我知道有更好的方法可以做到这一点，但我时间不够。Flash 中的 ActionScript 是否能让我完成这项任务？

我将包含此图像的原始网站是 Visual Studio 2005。它有一些非常基本的 JavaScript 可以自动为每一天加载正确的图像（因为我需要 25 个在 12 月份 [Day1.jpg、Day2.jpg 等ETC]）。这工作正常。我只需要为每一天和门后的内容创建日历图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:03:59.450

Yes, a simple actionscript using flash will help you. You can create a document with a button (the button will be the door, you can fill up the background of the button with the door image). Your flash movie may contain 2 keyframes (1 with the default background including the image-button and another keyframe with the image to be displayed when button-pressed). Add some actionscript for the button (basically a GoToAndPlay(# of keyframe with the image) and also a "stop()" action on the image keyframe. Here is a basic example on [YouTube **Click here**](http://www.youtube.com/watch?v=3HoLUMVtOVw). By the kind of thing I guess you want, a little bit of flash animation will make it look better i.e. (door opening clip, 2nd image slide, etc)

As Chris said, a simple JavaScript image swapping code will work too. Here are a couple of examples in StackOverFlow [**Click Here.**](https://stackoverflow.com/questions/7312553/change-image-source-with-javascript)

Also you can try some CSS, for example a DIV with the background door and a Hover action that sprite the background to the calendar (click would not be necessary, just hover). [**Here is a video**](http://www.youtube.com/watch?v=d-O5rYbJjr4&feature=g-user)

I hope any of those solution will work for you, I recommend the CSS one, because it can work with mobile devices, don't require javascript to be enabled, and it's fast and easy.

# php - json_decode 返回 NULL , UTF-8 BOM

> ID：13582930
> 
> 赞同：5
> 
> 时间：2012-11-27T11:12:07.303
> 
> 标签：php, json, utf-8, byte-order-mark

我想解码 JSON 数据并使用 json_decode 函数将其存储到数组中，但它返回 NULL 值。我认为这是因为 UTF-8 BOM。任何解决方案？我使用带有 xampp 的 Windows7 操作系统。我将我的编码设置为

```
header('Content-type:application/json; charset=utf-8'); 
```

JSON数据

```
{"command":"E101","user_id":"someuser","movie_id":"1","link_id":"2"} 
```

JSON 错误：控制字符错误，可能编码不正确

```
 $json_errors = array(
     JSON_ERROR_NONE => 'No error has occurred',
     JSON_ERROR_DEPTH => 'The maximum stack depth has been exceeded',
     JSON_ERROR_CTRL_CHAR => 'Control character error, possibly incorrectly encoded',
     JSON_ERROR_SYNTAX => 'Syntax error',
    );
    echo 'Last error : ', $json_errors[json_last_error()], PHP_EOL, PHP_EOL; 
```

如果我解析这个 JSON，没有发生错误

```
 {"command":"E101","user_id":"someuser","movie_id":"movie_id","link_id":"link_id"} 
```

唯一的区别是我将字符串数据存储到 movie_id 和 link_id 中。为什么会这样？

JSON 数据 Bin2Hex() 7b22636f6d6d616e64223a2245313031222c226d6f7669655f6964223a226d6f7669655f6964222c226c696e6b5f6964223a226c696e005f69604227

我加密 JSON 数据并通过客户端，我在服务器端解密。

这是我的加密功能

```
 public function ajax_enc($data){

    $vector = "myvector";
    $filter = new Zend_Filter_Encrypt(array('adapter' => 'mcrypt', 'key' => $this->_AJAXKEY));
    $filter->setVector($vector);
    $encrypted = $filter->filter($data);
    // bin2hex for user use case     
    return bin2hex($encrypted); // rawurlencode(..) works

    } 
```

解密

```
public function ajax_dec($data)
{
$vector = "myvector";
$filter = new Zend_Filter_Decrypt(array('adapter' => 'mcrypt', 'key' => $this->_AJAXKEY ));
$filter->setVector($vector);
$decoded = pack('H*', $data);
$decrypted = $filter->filter($decoded);
return $decrypted;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T13:50:52.677

您的解密显然在字符串末尾留下了一堆填充 NUL 字节。

修复您的解密机制或修剪它们：`trim($json, "\x0")`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-02T23:09:50.593

要删除`ï»¿`：

```
$json_raw_str = ltrim($json_raw_str, chr(239).chr(187).chr(191)); 
```

为什么？因为[Byte_order_mark](https://en.wikipedia.org/wiki/Byte_order_mark) `239 187 191`是十进制表示`ï»¿`并`ltrim`从字符串的开头删除它们。

在此之后：

```
$data = json_decode($json_raw_str);
// be fun :) 
```

# pagination - 使用 cakephp 模型处理自定义查询中的分页

> ID：13582933
> 
> 赞同：2
> 
> 时间：2012-11-27T11:12:20.007
> 
> 标签：pagination, cakephp-2.0

我有 10 个订阅者表，从订阅者_0 到订阅者_9，我通过订阅者模型中的自定义查询通过联合从它们获取所有数据，在函数 getAllSubscribers 中，该表执行查询并将结果返回给订阅者控制器，我设置了 $useTable = false 因为没有订阅者表，我的问题是如何在控制器中对这些数据进行分页？

作为参考，我在这里写我的查询，结果返回查询：

```
 $query = 'SELECT * FROM (
            SELECT * FROM subscriber_1
            UNION 
            SELECT * FROM subscriber_2
            UNION 
            SELECT * FROM subscriber_3
            UNION 
            SELECT * FROM subscriber_4
            UNION 
            SELECT * FROM subscriber_5
            UNION 
            SELECT * FROM subscriber_6
            UNION 
            SELECT * FROM subscriber_7
            UNION 
            SELECT * FROM subscriber_8
            UNION 
            SELECT * FROM subscriber_9
            UNION 
            SELECT * FROM subscriber_0
            ) AS subscriber WHERE created > \'' . $startDate . '\' AND created < \'' . $endDate . '\''; 
```

结果：

```
array(
(int) 0 => array(
    'subscriber' => array(
        'a_party' => '923003210861',
        'subtype' => '0',
        'stat' => '0',
        'created' => '2012-11-26 06:53:31',
        'updated' => null
    )
),
(int) 1 => array(
    'subscriber' => array(
        'a_party' => '923005264511',
        'subtype' => '0',
        'stat' => '0',
        'created' => '2012-11-26 06:53:31',
        'updated' => null
    )
)
,
.
.
.
.(int) 50 => ... 
```

我在订阅者控制器中添加了这个

```
 public $paginate = array(
    'limit' => 10
); 
```

我还需要添加什么？

我见过这个但没有帮助

# [CakePHP 将自定义查询从控制器传递到模型 paginate()](https://stackoverflow.com/questions/8829373/cakephp-pass-custom-query-from-controller-into-model-paginate)

编辑：在下面添加控制器代码

```
 $data = $this->Subscriber->getAllSubscribers();//This model method returns custom data from query
        $this->paginate = array('fields' => $selectedField);
        $paginatedData = $this->paginate($data);
        //debug($paginatedData);

        $this->set('subslist', $paginatedData); 
```

上面的代码不起作用，我做错了什么，谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T14:55:30.963

这是我实现它的方法： **模型代码**

```
/**
 * Overridden paginate method - group by week, away_team_id and home_team_id
 */
public function paginate($conditions, 
    $fields, 
    $order, 
    $limit, 
    $page = 1, 
    $recursive = null, 
    $extra = array()) {

    $recursive = -1;
    $sql = "SELECT * FROM (
        SELECT * FROM blacklist_0
        UNION
        SELECT * FROM blacklist_1
        UNION 
        SELECT * FROM blacklist_2
        UNION 
        SELECT * FROM blacklist_3
        UNION 
        SELECT * FROM blacklist_4
        UNION 
        SELECT * FROM blacklist_5
        UNION 
        SELECT * FROM blacklist_6
        UNION 
        SELECT * FROM blacklist_7
        UNION 
        SELECT * FROM blacklist_8
        UNION 
        SELECT * FROM blacklist_9
        UNION 
        SELECT * FROM blacklist_0
    ) AS Blacklist LIMIT " . (($page - 1) * $limit) . ', ' . $limit;

    $results = $this->query($sql);
    return $results;
}

/**
 * Overridden paginateCount method
 */
public function paginateCount($conditions = null, 
    $recursive = 0, 
    $extra = array()) {

    $sql = "SELECT * FROM (
        SELECT * FROM blacklist_1
        UNION 
        SELECT * FROM blacklist_2
        UNION 
        SELECT * FROM blacklist_3
        UNION 
        SELECT * FROM blacklist_4
        UNION 
        SELECT * FROM blacklist_5
        UNION 
        SELECT * FROM blacklist_6
        UNION 
        SELECT * FROM blacklist_7
        UNION 
        SELECT * FROM blacklist_8
        UNION 
        SELECT * FROM blacklist_9
        UNION 
        SELECT * FROM blacklist_0
    ) AS Blacklist";

    if ($conditions['Blacklist.b_party'] <> null) {
        $sql = $sql . ' WHERE Blacklist.b_party = \'' . $conditions['Blacklist.b_party'] . '\'';
    } else if ($conditions['Blacklist.a_party'] <> null) {
        $sql = $sql . ' WHERE Blacklist.a_party = \'' . $conditions['Blacklist.a_party'] . '\'';
    }

    $this->recursive = $recursive;
    $results = $this->query($sql);

    return count($results);
} 
```

不要忘记我用过

```
public $useTable = false; 
```

在模型中，但关键是如何覆盖方法，我在同事的帮助下终于想通了，控制器代码很简单。这是： **控制器代码：**

```
public function index() {
    $this->set('msisdn', "");
    $this->Blacklist->recursive = 0;
    $this->set('blacklists', $this->paginate());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T20:49:12.640

您不能在自定义查询上使用标准分页，您必须自己创建。

[自定义查询分页](http://book.cakephp.org/2.0/en/core-libraries/components/pagination.html#custom-query-pagination)

# nancy - 从 NancyFX 返回 HTTP 子状态错误代码？

> ID：13582936
> 
> 赞同：0
> 
> 时间：2012-11-27T11:12:32.257
> 
> 标签：nancy

我想从 Nancy返回“ [403.4 ：需要 SSL”子状态。](http://en.wikipedia.org/wiki/HTTP_403)我怎样才能做到这一点？我正在使用 ASP.NET 托管。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:45:13.367

不幸的是，您不能，Nancy 托管不可知论者，因此仅支持状态代码，而不支持仅 IIS 使用的编造子状态代码 :-)

OWASP 建议您只删除不使用 HTTPS 的连接，尽管 IETF 似乎建议使用 426 [https://www.rfc-editor.org/rfc/rfc2817#section-4.2](https://www.rfc-editor.org/rfc/rfc2817#section-4.2)（来自[What is the proper HTTP response to send对于需要 SSL/TLS 的请求](https://stackoverflow.com/questions/2554778/what-is-the-proper-http-response-to-send-for-requests-that-require-ssl)）

# mongodb - 了解子文档数组的索引

> ID：13582939
> 
> 赞同：9
> 
> 时间：2012-11-27T11:12:41.177
> 
> 标签：mongodb, mongodb-indexes

我一直在研究 MongoDB 上的数组（多键）索引，并且我有以下问题，我无法找到很多文档：

**子文档数组上的索引**

因此，如果我有一个看起来像这样的数组字段：

```
{field : [
  {a : "1"}, 
  {b : "2"}, 
  {c : "3"}
  ]
} 
```

我只是单独查询（不是一起查询） `field.a`，`field.c`我相信我可以在以下选项之间进行选择：

1.  `db.Collection.ensureIndex({field : 1});`
2.  `db.Collection.ensureIndex({field.a : 1}); db.Collection.ensureIndex({field.c : 1});`

即：对整个数组的索引；或嵌入字段上的两个索引。现在我的问题是：

*   ***您如何在选项 1 中可视化整个数组的索引（它甚至有用）？这样的索引对哪些查询有用？***
*   ***鉴于我描述的查询情况，以上两个选项哪个更好，为什么？***

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T13:34:51.433

您是正确的，如果您只查询字段数组中的 a 的值，那么从某种意义上说，这两个索引都会帮助您提高查询的性能。

但是，请查看以下 3 个查询：

```
> db.zaid.save({field : [{a: 1}, {b: 2}, {c: 3}] });
> db.zaid.ensureIndex({field:1});
> db.zaid.ensureIndex({"field.a":1});

#Query 1
> db.zaid.find({"field.a":1})
{ "_id" : ObjectId("50b4be3403634cff61158dd0"), "field" : [ { "a" : 1 }, { "b" : 2 }, { "c" : 3 } ] }
> db.zaid.find({"field.a":1}).explain();
{
    "cursor" : "BtreeCursor field.a_1",
    "nscanned" : 1,
    "nscannedObjects" : 1,
    "n" : 1,
    "millis" : 0,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "isMultiKey" : true,
    "indexOnly" : false,
    "indexBounds" : {
        "field.a" : [
            [
                1,
                1
            ]
        ]
    }
}

#Query 2
> db.zaid.find({"field.b":1}).explain();
{
    "cursor" : "BasicCursor",
    "nscanned" : 1,
    "nscannedObjects" : 1,
    "n" : 0,
    "millis" : 0,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "isMultiKey" : false,
    "indexOnly" : false,
    "indexBounds" : {

    }
}

#Query 3
> db.zaid.find({"field":{b:1}}).explain();
{
    "cursor" : "BtreeCursor field_1",
    "nscanned" : 0,
    "nscannedObjects" : 0,
    "n" : 0,
    "millis" : 0,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "isMultiKey" : true,
    "indexOnly" : false,
    "indexBounds" : {
        "field" : [
            [
                {
                    "b" : 1
                },
                {
                    "b" : 1
                }
            ]
        ]
    }
} 
```

请注意，即使您为数组编制了索引，第二个查询也没有索引，但第三个查询却有。根据您打算如何查询数据来选择索引与考虑索引本身是否是您需要的一样重要。在 Mongo 中，如果您不小心，您的索引结构可以并且确实会对查询的性能产生非常大的影响。我认为这解释了你的第一个问题。

您的第二个问题有点开放式，但我认为答案再次在于您期望如何查询数据。如果您只对匹配“fields.a”的值感兴趣，那么您应该为将来可能需要的其他索引节省内存空间。但是，如果您同样可能查询数组中的任何这些项目，并且您有理由确定数组不会无限增长（永远不要对可能会随着时间增长到无限大小的数组进行索引。索引一旦数组在 BSON 中达到 1024 个字节，将无法索引文档。），那么您应该索引整个数组。这方面的一个例子可能是一手扑克牌的文档，其中包含描述用户手中每张牌的数组。

# iphone - 文字字体没有设置？

> ID：13582940
> 
> 赞同：0
> 
> 时间：2012-11-27T11:12:45.367
> 
> 标签：iphone, objective-c, ios, ipad

我想为我的标签文本设置字体类型，但它没有设置.....

我的代码....

```
CGRect imageFrame = CGRectMake(10, 10, 150, 80);
    labelResizableView = [[UserResizableView alloc] initWithFrame:imageFrame];
    alabel = [[UILabel alloc] initWithFrame:CGRectMake(10, 35, 100, 100)];

alabel.font = [UIFont fontWithName:@"AmericanTypewriter-Bold" size:18]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:16:43.140

使用这个代码伙伴..

```
 [alabel setFont:[UIFont fontWithName:@"American Typewriter-Bold" size:18]]; 
```

# php - 使用空数组值作为掩码拆分数组

> ID：13582941
> 
> 赞同：0
> 
> 时间：2012-11-27T11:12:48.293
> 
> 标签：php

我有一个包含空值的数组。有没有办法使用空值作为掩码将数组拆分为块？谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:19:11.293

在没有看到您的数组结构的情况下，我认为一个简单的 foreach 可以完成这项工作：

```
$a = array(
    1 => 'test',
    2 => 'test',
    3 => '',
    4 => 'test',
    5 => 'test',
    6 => '',
    7 => 'test'
);

$new_array = array();
$i = 0;

foreach ($a as $k => $v)
{
    if ( ! empty($v))
    {
        $new_array[$i][] = $v;
        continue;
    }
    $i++;
}

print_r($new_array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:24:07.807

尝试这个，

如果 $values 是数组，那么

```
$i = 0;
foreach($values as $value)
{
  if($value != "")
  {
     $new[$i][] = $value;
  }
  else
  {
    $i++;
  }
} 
```

希望，这会有所帮助。

# javascript - 如果有空格，则无法使用 D3 js 引用 json 数据

> ID：13582948
> 
> 赞同：0
> 
> 时间：2012-11-27T11:13:03.690
> 
> 标签：javascript, d3.js, whitespace, space

我得到了一个带有值的 JSON 文件，其中有一个空格。像这样：

```
"Project 3":6 
```

我如果尝试在 D3.js 中使用这样的数据做某事

```
var meanProject3 = d3.mean(data, function(d) {return d.project 3 });
console.log(meanProject3); 
```

我收到以下错误：

```
Uncaught SyntaxError: Unexpected token } 
```

如果我用没有空格的节点尝试它，它工作正常。我无法编辑 json 文件。有没有其他方法可以使这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:15:51.117

当属性名称包含空格等特殊字符时，不能使用点表示法。尝试：

```
return d['Project 3'] 
```

请注意，属性名称区分大小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:16:46.633

在这种情况下，您应该使用括号表示法，请参阅此[示例](http://jsfiddle.net/MUh6g/)

```
var test = {
    "Project 3":"found it"
};

alert(test["Project 3"]); 
```

# asp.net - 与 DropDownList 项目连接 ASP.Net

> ID：13582955
> 
> 赞同：1
> 
> 时间：2012-11-27T11:13:31.523
> 
> 标签：asp.net

我的 asp.net 页面上有一个数据绑定下拉列表。

```
<asp:DropDownList ID="ddlCases" runat="server"></asp:DropDownList> 
```

我将 ddlCases 填充为

```
ddlCases.DataSourse = SelectItems();
ddlCases.DataValueField = "itemid";
ddlCases.DataTextField = "itemname";
ddlCases.SelectedIndex = 0;
ddlCases.DataBind(); 
```

SelectItems() 返回一个数据表。我想要做的是将每个项目与序列号（1,2,3..）连接起来，它们出现在下拉列表中的顺序类似于 1\. itemname1 2\. itemname2 3\. itemname3

我有什么选择来实现这一目标？问候， ZB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T12:15:42.197

您可以处理数据绑定事件并编辑列表中的项目，请尝试以下代码：

```
 protected void ddlCases_DataBound(object sender, EventArgs e)
    {
        for (int i = 0; i < ddlCases.Items.Count; i++)
        {
            ddlCases.Items[i].Text = i + 1 + ". " + ddlCases.Items[i].Text;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:17:49.610

你可以用 linq 来做，这样的东西应该可以

```
ddlCases.DataSourse = SelectItems().Select((item, index) 
                                             => new{
                                                     index = index, 
                                                     itemid = item.itemid, 
                                                     itemname = index.ToString() + "." + item.itemname
                                                    });
ddlCases.DataValueField = "itemid";
ddlCases.DataTextField = "itemname";
ddlCases.SelectedIndex = 0;
ddlCases.DataBind(); 
```

**编辑**

Select 方法创建另一个`IEnumerable`（集合），其中包含新的[匿名类型](http://msdn.microsoft.com/en-us/library/bb397696.aspx)，其中 index 属性是第一个数组中的索引，itemid 是 itemid 和 itemname index + itenmane

所以很快我们用 LINQ 语句创建了另一个临时类，它包含我们想要的属性

希望这是有道理的

**编辑**

如果 SelectItems 方法返回无类型的数据表，正如@VinayC 在评论中建议的那样，你应该写

```
ddlCases.DataSourse = SelectItems()
.AsEnumerable().Select((r, i) => new { itemid = r["itemid"], itemname = i.ToString() + r["itemname"] }) 
```

# java - 在android应用程序中读取文件需要太多时间

> ID：13582958
> 
> 赞同：2
> 
> 时间：2012-11-27T11:13:35.530
> 
> 标签：java, android, file-io

我正在为 Android 编写一个 Hangman 应用程序，但遇到了一些加载问题。当我的应用程序启动时，我会生成一个从 txt 文件中挑选的随机单词。问题是这个文件很重：它几乎有 360'000 个单词（4000 kB），因此选择一个单词需要 10 到 20 秒的时间，我知道这是因为我每次读取文件并选择一个单词我点击生成。

如果我在应用程序启动后读取文件并将其内容放入字符串数组中会是一件好事吗？我真的不知道数组是否可以处理这么多。否则什么是好的模式？

谢谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:26:04.917

将其存储为 CSV，（逗号分隔值）。打开一个读取流，寻找一个随机位置并读取一小块字符，直到你点击`','`两次。现在，从你读过的字符串中提取逗号之间的那个词。您也可以使用自定义分隔符，例如“#”或“|” 而不是逗号。

更新：使用[`RandomAccessFile`](http://docs.oracle.com/javase/6/docs/api/java/io/RandomAccessFile.html).

Update2：[`readLine()`](http://docs.oracle.com/javase/6/docs/api/java/io/RandomAccessFile.html#readLine%28%29)如果您每行存储一个单词，这会更容易。即由`\n`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:17:40.527

您可以（并且可能最好）创建一个单词数据库并在其中查询随机单词。您可以从阅读[在 SQL 数据库中保存数据开始](http://developer.android.com/training/basics/data-storage/databases.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:18:43.633

将整个文件读入字符串数组不是一个好策略，因为这会消耗大量内存。一个简单的解决方案是将您的大文件拆分为几个单独的文件（使用文件名的模式，如 word1.txt、words2.txt 等）。绘制单词时，您将首先选择文件，然后从文件中选择实际单词。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T11:20:01.900

文件读取是一项昂贵的操作，花费这么长时间是正常的。您可能应该创建一组文件而不是一个文件，并且每次启动应用程序时，您都可以从中选择一个随机文件和一个随机单词。这应该会减少所需的时间。

此外，您可以将单词名称作为应用程序资源存储在 XML 文件中，该资源将进入 /res/values/ 文件夹。您可以创建字符串数组资源并轻松地从代码中获取它，而不必担心打开/关闭/读取文件。这非常简单。但是在这里将所有单词拆分为不同的 xml 文件（或至少是字符串数组组）对您来说再次很重要。在这里阅读更多。[http://developer.android.com/guide/topics/resources/string-resource.html#StringArray](http://developer.android.com/guide/topics/resources/string-resource.html#StringArray)

或者另一种方法是通过从文件中读取所有内容来将其存储到您的数据库中。这样，应用程序的首次启动只需要时间。您可以在使用时显示诸如“正在准备 DB...”之类的消息或类似的内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T11:24:38.227

执行代码以在 AsyncTask 中解析/加载 json/db 格式的内容以提高速度。我加载 5000 行，每行约 400 个字符。没有 AsyncTask 需要更长的时间。

```
 private class YourTask extends AsyncTask<String, Void, String> {
        @Override
        protected String doInBackground(String... s) {

            //Here you have to make the loading / parsing tasks
            //Don't call any UI actions here. For example a Toast.show() this will couse Exceptions
            // UI stuff you have to make in onPostExecute method

        }

        @Override
        protected void onPreExecute() {
            // This method will called during doInBackground is in process
            // Here you can for example show a ProgressDialog
        }

        @Override
        protected void onPostExecute(Long result) {
            // onPostExecute is called when doInBackground finished
            // Here you can for example fill your Listview with the content loaded in doInBackground method

        }

} 
```

要执行你只需要调用：

```
new YourTask().execute(""); 
```

在这里您可以了解有关 AsyncTasks 的更多信息：

[AsyncTask 开发者指南](http://www.google.de/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CDQQFjAA&url=http://developer.android.com/reference/android/os/AsyncTask.html&ei=XXWvUJivB8XIswajxIDABg&usg=AFQjCNE8gLVXz1Hwq4rI8oxRkZNHjhRzpQ&sig2=CmICU1zanbO_qVgO4V9uEg)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-27T12:03:47.493

这里需要注意的一些事项：

1.  如果您的应用程序从 SD 卡读取，SD 卡的质量实际上是一个因素 - 根据您使用的 SD 卡的类别，有不同的读/写速度 - 查一下。

2.  您提到每次单击“生成”时都会在文件中随机选择一行 - 因为您可以确定用户将多次单击“生成”，所以读取该文件一次并将内容存储在某处是一个不错的主意（ sqlite)，下次需要获取随机词时，从存储的数据中获取。这样，您将从外部存储（在移动标准中，一项繁重的任务）中读取的次数限制为每次应用程序启动一次。

3.  您甚至可以在文件上放置一个标记，让您知道内容是否已更改。从随机字符串到当前日期到 md5 校验和的任何内容都应该让您知道您不需要再次读取该文件，因为您之前已经阅读过它并将内容存储在您的 sqlite 数据库中。你想把它放在文件的第一行。

4.  现在其他人都在告诉您考虑写入 sqlite db 甚至复制 .db 文件本身（您可以单独生成），选择一个随机项目将是微不足道的。我宁愿警告你在你的数据库中写入 360,000 个条目。使用默认的 ContentProvider`insert(Uri, ContentValues)`方法会起作用，但如果这比实际解析文件本身花费的时间更长，我不会感到惊讶。`bulkInsert(Uri, ContentValues[])`这里的技巧是使用编译语句来覆盖 ContentProvider 的实现。默认实现仅`insert`多次调用该方法，因此每次插入都会打开和关闭 SqliteDatabase 对象。你想要做的是`beginTransaction`在顶部调用，有一个 for 循环，它`insert`是 ContentValues 中的每个项目`setTransactionSuccessful`，然后调用`endTransaction`.

# vb.net - vb.net，标签或文本框右对齐

> ID：13582964
> 
> 赞同：1
> 
> 时间：2012-11-27T11:13:47.153
> 
> 标签：vb.net, text, right-align

好的，这是我遇到的一个问题。搜索网络并没有太大帮助。

在 VB.net 中，您可以右对齐标签上的文本。然而，标签具有自动换行功能，因此似乎不可能在标签中显示文本（恒定大小）并始终查看文本的最后部分。

我在标签中放置了一个文件夹名称，并且我总是对查看文本的最后部分感兴趣。现在，如果路径名太大，我会一直看到“C:\Documents and Settings”部分，我不想看到。在 VB6 中，当您右对齐标签中的文本时，它会显示最后一部分，如果文本不适合，它只会在开头剪切文本。在 VB.NET 中，如果文本太大而无法放入标签中，则会启动自动换行，因此您最终只能看到文本的第一部分。

使用文本框时，即使它是右对齐的，如果文本不适合它，它只会从文本的 START 尽可能多地显示（而不是从 END 开始，因为它是右对齐的。）

有没有办法在 VB.NET 中实现与 VB6 标签中类似的行为？

# javascript - Javascript关联数组在变量声明上有所不同

> ID：13582969
> 
> 赞同：1
> 
> 时间：2012-11-27T11:14:02.043
> 
> 标签：javascript

当我将变量声明为数组或对象然后向其中添加元素时，我注意到了不同之处。

当我如下声明我的变量时：

```
var my_array = [];
my_array["a"] = 'first';
my_array["b"] = 'second';
console.log(my_array); 
```

我得到以下结果：

```
[a: "first", b: "second"] 
```

但是，当我执行以下操作时：

```
var my_array = {};
my_array["a"] = 'first';
my_array["b"] = 'second';
console.log(my_array); 
```

这是我得到的结果：

```
Object {a: "first", b: "second"} 
```

这里到底发生了什么？！一种方式是标准的，另一种不是？！兼容性有什么缺点？！

提前致谢。

PS我正在使用谷歌浏览器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:19:22.120

第一个是数组，第二个是对象，使用哪个对象取决于您的目标，如果您需要数组，则该数组将比使用“数组”对象更有用和更有效。

此外，可以像这样使用对象： `myObject.a`

虽然数组***只能***像这样使用：`myArray["a"]`

另一个不同之处在于`toString`方法。对于数组，它返回`Banana,Orange,Apple,Mango`（例如），对于一个对象，它返回`[object Object]`（例如）。

进一步阅读：[数组和对象有什么区别？](https://stackoverflow.com/questions/874205/what-is-the-difference-between-an-array-and-an-object)

检查是否为数组：

```
function isArray(obj) {
    return Object.prototype.toString.call(obj) === "[object Array]";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:20:12.367

它们是两个不同的对象。我将第二个用于 JSON 响应，第一个用于代码中的正常使用。

# backbone.js - Backbone.js 路由器事件绑定未触发

> ID：13582974
> 
> 赞同：6
> 
> 时间：2012-11-27T11:14:07.370
> 
> 标签：backbone.js

我正在尝试[使用 Modules 组织您的应用程序（require.js](http://backbonetutorials.com/organizing-backbone-using-modules/)我正在努力理解路由的工作原理。

我无法获得简单的绑定来为索引工作：

```
// Filename: router.js
define([
  'jquery',
  'underscore',
  'backbone',
  'views/projects/list'
], function ($, _, Backbone, ProjectListView) {
    var AppRouter = Backbone.Router.extend({
        routes: {
            // Define some URL routes
            '': 'index'
        }
    });

    var initialize = function () {
        var app_router = new AppRouter();

        app_router.on('index', function () {
            alert("index"); // this never gets called
        });

        Backbone.history.start();

        return app_router;
    };
    return {
        initialize: initialize
    };
});
```

加载页面时没有任何反应。然而，这有效：

```
// Filename: router.js
define([
  'jquery',
  'underscore',
  'backbone',
  'views/projects/list'
], function ($, _, Backbone, ProjectListView) {
    var AppRouter = Backbone.Router.extend({
        routes: {
            // Define some URL routes
            '': 'index'
        },
        index: function() { alert("works"); }
    });

    var initialize = function () {
        var app_router = new AppRouter;

        Backbone.history.start();

        return app_router;
    };
    return {
        initialize: initialize
    };
}); 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-27T11:28:22.883

好的，这就是它的完成方式：

```
 var initialize = function () {
        var app_router = new AppRouter();

        app_router.on("route:index", function () {
            alert("hello world");
        });

        Backbone.history.start();

        return app_router;
    }; 
```

# jquery - 需要用于绘制签名的插件

> ID：13582980
> 
> 赞同：1
> 
> 时间：2012-11-27T11:14:21.707
> 
> 标签：jquery, canvas

![签名](../Images/c7875673772bd599af2ed5d58fb0e493.png)

需要一个 jquery 插件或任何其他可以帮助我绘制类似类型签名的插件。谁能告诉我在哪里可以找到这样的插件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T12:52:08.707

[^([*使用MDN*])](https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/quadraticCurveTo)可以实现更*平滑自然的“曲线”线*[`context.quadraticCurveTo()`](https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/quadraticCurveTo)

 *[![在此处输入图像描述](../Images/c0d7013dbd8dd640d6f29f3e1415e3ba.png)](https://i.stack.imgur.com/CSy75.png)

只是，quadraticCurveTo 只能有一个恒定的厚度，所以，通过使用下面的你不能轻易地改变线来制作阴影笔角和压力效果。

```
var board = {
  width: 560,
  height: 190
};
var pen = {
  color: "rgb(0, 0, 0)",
  size: 2
};
var pts = [];
var isDown = false;
var isTouch = false;
var cvs = document.getElementById('canvas');
var ctx = cvs.getContext('2d');
var cvs2 = document.createElement('canvas');
var ctx2 = cvs2.getContext('2d');

cvs.width = cvs2.width = board.width;
cvs.height = cvs2.height = board.height;

function penDown(ev) {
  ev.preventDefault();
  isTouch = ev.type === "touchstart";
  ev = isTouch ? ev.touches[0] : ev;
  isDown = true;
  pts.push({
    x: ev.clientX,
    y: ev.clientY
  });
  drawPoints();
}

function penMove(ev) {
  ev.preventDefault();
  ev = isTouch ? ev.touches[0] : ev;
  if (isDown) {
    ctx.clearRect(0, 0, board.width, board.height);
    ctx.drawImage(cvs2, 0, 0); // Draw to inmemory cvs2
    pts.push({
      x: ev.clientX,
      y: ev.clientY
    });
    drawPoints();
  }
}

function penUp(ev) {
  ev.preventDefault();
  isDown = isTouch = false;
  pts = [];
  // Save state to in-memory cvs2
  ctx2.clearRect(0, 0, board.width, board.height);
  ctx2.drawImage(cvs, 0, 0);
}

function clear() {
  ctx.clearRect(0, 0, board.width, board.height);
  ctx2.clearRect(0, 0, board.width, board.height);
}

function drawPoints() {
  var i = 0;
  var i2 = pts.length > 1 ? 1 : 0;
  ctx.beginPath();
  ctx.lineWidth = pen.size;
  ctx.lineJoin = 'round';
  ctx.lineCap = 'round';
  ctx.moveTo(pts[0].x, pts[0].y);
  for (; i < pts.length - i2; i++) {
    ctx.quadraticCurveTo(
      pts[i].x,
      pts[i].y,
      (pts[i].x + pts[i + i2].x) / 2,
      (pts[i].y + pts[i + i2].y) / 2
    );
  }
  ctx.strokeStyle = pen.color;
  ctx.stroke();
  ctx.closePath();
}

// EVENTS

cvs.addEventListener('touchstart', penDown);
cvs.addEventListener('touchmove', penMove);
cvs.addEventListener('touchend', penUp);
cvs.addEventListener('mousedown', penDown);
cvs.addEventListener('mousemove', penMove);
cvs.addEventListener('mouseup', penUp);
document.getElementById("clear").addEventListener("click", clear);
```

```
body {margin:0;}
#canvas{display: block; box-shadow: inset 0 0 0 2px #ccc;}
#clear {position: absolute; top:0; left: 0;}
```

```
<canvas id='canvas'></canvas>
<button id="clear">CLEAR</button>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T12:16:53.250

这是您正在寻找的 jquery 插件。

[结帐 JSignature](http://willowsystems.github.com/jSignature/#/about/)

下载 jsignature 插件并添加到您的页面。*

# c - C 中的局部变量和静态变量（续）

> ID：13582981
> 
> 赞同：2
> 
> 时间：2012-11-27T11:14:28.940
> 
> 标签：c, gcc, assembly, static

在我的[最后一个问题](https://stackoverflow.com/questions/13580950/local-and-static-variables-in-c)的基础上，我试图弄清楚指令如何准确地工作，特别是它们如何影响 C 中的链接和持续时间`.local`。`.comm`

所以我进行了以下实验：

```
static int value; 
```

生成以下汇编代码（使用 gcc）：

```
.local  value
.comm   value,4,4 
```

当初始化为零时产生相同的汇编代码（使用 gcc）：

```
.local  value
.comm   value,4,4 
```

这听起来合乎逻辑，因为在这两种情况下，我都希望变量将存储在 bss 段中。此外，在调查使用后`ld --verbose`，看起来所有`.comm`变量确实都放在了 bss 段中：

```
 .bss            :
  {
   *(.dynbss)
   *(.bss .bss.* .gnu.linkonce.b.*)
   *(COMMON)
   // ...
  } 
```

但是，当我将变量初始化为非零值时，编译器会按照我的预期在数据段中定义变量，但会产生以下输出：

```
 .data
        .align 4
        .type   value, @object
        .size   value, 4
value:
        .long   1 
```

除了之前我现在理解的不同部分（分别为 bss 和数据）之外，我的变量在第一个示例中被定义为`.local`和 而`.comm`在第二个示例中没有。谁能解释每个案例产生的两个输出之间的差异？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:23:42.113

该`.local`指令将符号标记为本地的、外部不可见的符号，如果它不存在则创建它。对于 0 初始化的局部符号，它是必需的，因为`.comm`声明但不定义符号。对于 1 初始化的变体，符号本身 ( `value:`) 声明了该符号。

使用`.local`and`.comm`本质上是一种技巧（或至少是一种速记）；另一种方法是将符号`.bss`显式放入：

```
 .bss
        .align 4
        .type   value, @object
        .size   value, 4
value:
        .zero   4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:25:16.250

由于安全原因，Linux 内核在分配后将进程的虚拟内存归零。因此，编译器已经知道内存将用零填充并进行优化：如果某个变量初始化为 0，则无需在可执行文件中为其保留空间（`.data`在 ELF 可执行文件中，section 实际上占用了一些空间，而`.bss`部分仅存储其长度，假设其初始内容为零）。

# android - DDMS 堆 - 1 字节数组（字节 []，布尔 []）

> ID：13582983
> 
> 赞同：24
> 
> 时间：2012-11-27T11:14:42.853
> 
> 标签：android, ddms

我在我的 android 应用程序中遇到了一些内存泄漏。我已经使用[MAT](http://www.eclipse.org/mat/)来分析内存使用情况。但是我从 Eclipse 中的 DDMS 角度提出了一个问题，1-byte array[byte[], boolean[]) 是什么意思？

![在此处输入图像描述](../Images/9343e22fca90a7086d14637b23dd808e.png)

这是否特定于我的应用程序？你可以看到这是大内存泄漏的问题，这个大小总是增加，其余的会随机增加和减少。我的猜测是 GC 没有捕捉到这种类型。任何人都可以解释为什么会发生这种情况，只有这么少的信息？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-27T11:48:48.840

一个字节数组是对组织为单字节数组的任何数据结构的名称。在你的情况和那个尺寸下，我会赌位图或 Drawble。

内存泄漏的最常见原因是未正确管理静态对象并持有对以下内容的引用：

*   语境
*   视图（包含对上下文的引用（也可能对位图）
*   线程（GC不容易收集）
*   处理程序（保存对上下文的引用）

大多数问题都可以解决，确保在不再需要时将对象设置为 null。

问候。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-27T12:00:05.967

A`byte`和 a`boolean`各为 1 个字节。如果你有一个数组，你就有一个“1字节数组”。

例如， A`ByteBuffer`应该在内部持有其中一个。

您总共有 614 个，其中最小的一个是 a `byte[24]`（或`boolean[24]`），最大的一个是 3MB。它们一起使用 104MB。

如果不再引用它们，GC 将删除它们。

例如，当你放

```
private static byte myArray[] = new byte[3 * 1024 * 1024]; 
```

在你的一个类中并且永远不会将它设置回 null ( `myArray = null`) 那么这个不能被垃圾收集，因为另一个 Object 有对它的引用。对象将是类本身（如 中`String.class`）。类对象不能被垃圾回收，因为类永远不会被卸载。（它们被它们引用，而它们`ClassLoader`本身可能被另一个引用/加载，`ClassLoader`没有它们就不能创建对象和使用类——它们需要保留并且需要保留对它们的类​​的引用）

它通常不是那么简单，但通常从`static`某个地方开始。

在 MAT 中（在您强制 GC 之后）查看不再打算保持活动状态的对象的引用链，并确定持有该引用的一个 Object。在你的代码中设置那个`null`，你的泄漏就消失了。在这里更详细地解释：

[http://android-developers.blogspot.de/2011/03/memory-analysis-for-android.html](http://android-developers.blogspot.de/2011/03/memory-analysis-for-android.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-19T02:13:49.523

今晚我遇到了这个问题，几乎我检查了每一段代码，但我找不到任何东西。

我所做的是从 intelij 启动应用程序，然后按主页按钮并再次打开应用程序。每次应用程序堆增加一倍。

最后我发现当我从 ADB 启动应用程序并按下主页按钮并再次打开应用程序时，它并没有带回旧的活动，它只是开始一个新的活动。当我按下完成时，它开始循环遍历所有这些。就像他们被视为两种不同的意图一样。所以我把`android:launchMode="singleTop"`主要活动放在清单中，它解决了这个问题。

虽然这不是此问题的主要原因，但如果您遇到此问题，请先检查一下。浪费了我三四个小时。

# node.js - 使用 javascript 在 HTML5 游戏中添加局域网支持

> ID：13582984
> 
> 赞同：0
> 
> 时间：2012-11-27T11:14:54.627
> 
> 标签：node.js, html5-canvas

我想为基于 HTML5 画布的井字游戏添加局域网支持，以便两个玩家可以轻松玩。我如何使用 javascript/node.js 来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:02:54.353

好的，我假设您的所有 HTML5 游戏都已完成，并且您正在通过托管它的服务器分发它。（否则你只能使用浏览器，它不能做所有很棒的 node.js`net`东西，我正在描述。）

注意：您需要在两个客户端上运行 node.js。否则，如果没有中央服务器的参与，您将无法仅进行 LAN。

1.  您的一位客户决定要举办一场局域网游戏
2.  在该客户端上运行的 node.js 服务器[开始侦听端口](http://nodejs.org/api/net.html#net_net_createserver_options_connectionlistener)
3.  该服务器找出它的本地 IP[在 node.js 中获取本地 IP 地址](https://stackoverflow.com/questions/3653065/get-local-ip-address-in-node-js)
4.  选项：
    *   您的玩家可以手动告诉对方托管服务器的 IP
    *   您的托管服务器向其本地子网发送广播消息，通知他们它正在托管游戏
    *   您的其他客户端服务器扫描其本地子网中的 IP 以查找任何托管游戏服务器（尝试打开您的托管服务器正在侦听的预定端口。）
5.  另一个 node.js 客户端[打开与托管服务器的连接](http://nodejs.org/api/net.html#net_net_createconnection_options_connectionlistener)。

完毕。

# java - 检查类型是否为接口

> ID：13582985
> 
> 赞同：12
> 
> 时间：2012-11-27T11:14:56.957
> 
> 标签：java, class, validation, if-statement, interface

我想验证发送给方法的参数，它必须是接口类型。要问什么？

```
void (Class<I> interfaceType){
  if (thisisnotaninterface){
    throw...
  }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-27T11:16:45.823

您有一种[`Class#isInterface()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#isInterface%28%29)方法可以完全满足您的要求：-

```
if (!interfaceType.isInterface()) {
    throw...
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-27T11:17:14.883

只是[`Class#isInterface()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#isInterface%28%29)用来检查

说真的，您应该先阅读 Javadocs，然后再在这里提问。

# java - 如何使用飞碟将大表格转换为 PDF？

> ID：13582987
> 
> 赞同：3
> 
> 时间：2012-11-27T11:15:03.993
> 
> 标签：java, itext, flying-saucer, html-to-pdf

我有一个包含大量列的 html（您可以在此[链接](https://dl.dropbox.com/u/99923120/stackoverflow/test.html)中找到示例）

现在，当我尝试使用[飞碟](http://code.google.com/p/flying-saucer/)将其转换为 PDF 时（重新编译[jar 链接](https://dl.dropbox.com/u/99923120/flying%20saurcer%20jars.rar)以使用 iText 2.1.X），[生成的 PDF](https://dl.dropbox.com/u/99923120/stackoverflow/test.pdf)已截断列

有没有办法让飞碟根据html内容打破桌子或增加页面的宽度？

这是我正在使用的代码

```
String doc = file.toURI().toURL().toString();
ITextRenderer renderer = new ITextRenderer();
renderer.setDocument(doc);
String outputFile = "test.pdf";
OutputStream os = new FileOutputStream(outputFile);
renderer.layout();
renderer.createPDF(os);
os.flush();
os.close(); 
```

其中**file**是我要转换的 html。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T03:03:51.200

使用[YAHP](http://www.allcolor.org/YaHPConverter/)库。这是我迄今为止将 HTML 转换为 PDF 的最佳库。这是写在飞碟顶部的，与它的受欢迎程度相比，这是一个很大的失望。它甚至不会呈现简单的输入文本框。所以，我求助于`YAHP`非常适合你的情况的库。

在获得与此库相关的所有 jar 后尝试此代码。

```
import java.io.File;
import java.io.FileOutputStream;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import org.allcolor.yahp.converter.CYaHPConverter;
import org.allcolor.yahp.converter.IHtmlToPdfTransformer;
import org.htmlcleaner.CleanerProperties;
import org.htmlcleaner.HtmlCleaner;
import org.htmlcleaner.PrettyHtmlSerializer;
import org.htmlcleaner.TagNode;

public class YahpHtmlToPdf {

    @SuppressWarnings({ "unchecked", "rawtypes" })
    public static void main(String[] args) {
        try{
            CleanerProperties props = new CleanerProperties();
            props.setTranslateSpecialEntities(true);
            props.setTransResCharsToNCR(true);
            props.setOmitComments(true);
            TagNode tagNode = new HtmlCleaner(props).clean(new File("C:\\Users\\MyComputer\\Desktop\\aspose.html"));
            String newString=new PrettyHtmlSerializer(props).getAsString(tagNode, "ISO-8859-1");
            CYaHPConverter converter = new CYaHPConverter();
            File fout = new File("C:\\sample\\aspose.pdf");
            FileOutputStream out = new FileOutputStream(fout);
            Map properties = new HashMap();
            List headerFooterList = new ArrayList();
            properties.put(IHtmlToPdfTransformer.PDF_RENDERER_CLASS,IHtmlToPdfTransformer.FLYINGSAUCER_PDF_RENDERER);
            converter.convertToPdf(newString,IHtmlToPdfTransformer.A1P,headerFooterList, "file:///temp/",out,properties);
            out.flush();
            out.close();
        }catch(Exception e){
            e.printStackTrace();
        }
    }   

} 
```

![在此处输入图像描述](../Images/caab0548ba29a6538d96cad64d678fe4.png)这是使用您的 html 生成的 pdf 的屏幕截图。.您可以像这样指定页面大小`IHtmlToPdfTransformer.A1P`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T19:46:18.847

如果您知道所需的大小，则可以更改页面大小。

为此使用`@page`规则：
*请注意：在此示例中，我正在使用[Jsoup](http://jsoup.org)处理 html （请参阅评论）。*

```
/*
 * This part is optional - Jsoup is used for cleaning the html and inserting the style tag into the head.
 * You can use everything else for doing this.
 * 
 * If you will use Jsoup, make shure you set proper charset (2nd parameter).
 * 
 * Note: this is NOT a W3C Document but a Jsoup one.
 */
Document doc = Jsoup.parse(file, null);

/*
 * Here you specify the pagesize you need (size: with height).
 * Inserting this html is the key part!
 */
doc.head().append("<style type=\"text/css\"><!--@page { size:50.0cm 20.0cm; }--></style>");

ITextRenderer renderer = new ITextRenderer();

/*
 * This part ist jsoup related. 'doc.toString()' does nothing else than
 * returning the Html of 'doc' as a string.
 * 
 * You can set it like in your code too.
 */
renderer.setDocumentFromString(doc.toString());

final String outputFile = "test.pdf";
OutputStream os = new FileOutputStream(outputFile);
renderer.layout();
renderer.createPDF(os);
os.flush();
os.close(); 
```

使用此代码，您将获得一个 Pdf，其中整个表格位于横向页面上（也许您必须根据需要更改宽度/高度。

# .net - 失去对 .net 项目的引用

> ID：13582991
> 
> 赞同：0
> 
> 时间：2012-11-27T11:15:10.000
> 
> 标签：.net, axapta, dynamics-ax-2012

在过去的几个月里，我正在开发一个使用 C# 代码的项目，但今天早上它已经停止工作。

该项目仍在AOT中

```
VisualStudio Projects/C Sharp Projects/AFD.AxIntegration 
```

AFD.AxIntegration 也是命名空间。但是，当我在 X++ 编辑器中时，没有参考（到现在键入 AFD，该项目将列在 Intellisence 列表中）。事实上，我似乎无法引用列出的任何项目。

服务器在 Oracle VM VirturalBox 上运行。当我昨晚完成时，我保存了服务器，所以理论上它最初处于与昨天相同的状态。

我努力了：

*   删除项目并将其重新附加并部署到 AOT
*   重新启动服务器
*   重启了 AOT 服务

我完全不知道为什么它今天早上突然停止工作。是否有我可能意外更改的设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:11:22.217

我发现如果 .net 代码编译为 64 位 (x64)，则无法在 X++ 中引用它。将其编译为**任何 CPU**或**x86**都可以正常工作。

# scala - 为什么 sbt 在成功解析 scalacheck 后给出“object scalacheck 不是包 org 的成员”？

> ID：13582995
> 
> 赞同：7
> 
> 时间：2012-11-27T11:15:26.653
> 
> 标签：scala, sbt, scalacheck

我在中添加了以下内容`build.sbt`：

```
libraryDependencies <<= scalaVersion { scala_version => Seq(
 <other entries>
  "org.scalacheck" %% "scalacheck" % "1.10.0" % "test",
  <other entries>
  )
} 
```

在`compile`sbt 中的项目上，依赖关系已成功解决，如日志中所示：

```
[info] Resolving org.scalacheck#scalacheck_2.9.1;1.10.0 ...
...
Done updating 
```

但是，在编译一个文件时出现以下错误。

```
object scalacheck is not a member of package org
import org.scalacheck.Gen
      ^ 
```

这可能是什么原因？

有没有办法查看 sbt 在`compile`任务期间使用的类路径？

```
Sbt version: 0.11.2
OS: Windows 7
Scala version: 2.9.1 
```

请注意，该项目在 ScalaIDE 中构建良好。（我使用 sbteclipse 生成 eclipse`.classpath`文件。生成的`.classpath`有正确的 scalacheck 条目。）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-27T12:59:34.250

导入依赖项的方式使 Scalacheck 仅可用于命令`test`：

```
"org.scalacheck" %% "scalacheck" % "1.10.0" % "test" 
```

你应该使用：

```
"org.scalacheck" %% "scalacheck" % "1.10.0" 
```

但是你为什么在测试以外的地方使用 Scalacheck 呢？有关在 sbt 中进行测试的更多说明，请参阅[此链接。](http://www.scala-sbt.org/release/docs/Detailed-Topics/Testing)

# php - 必须减少亚马逊 ec2 服务器中的 /dev/xvda1 内存

> ID：13582999
> 
> 赞同：2
> 
> 时间：2012-11-27T11:15:37.547
> 
> 标签：php, amazon-s3, amazon-ec2

我是亚马逊服务器的新手。在亚马逊 ec2 服务器中，由于 /dev/xva1 内存，我多次无法执行任何操作。我已经使用以下命令检查了它。即，

```
df -h 
```

它显示了`/dev/xvda1 7.9G 7.9G 0 100% /`

我已将亚马逊 ec2 实例类型从 m1.medium 更改为 m2.xlarge 仍然没有得到解决。任何人都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T07:08:10.177

我通过增加我的亚马逊实例的根分区大小解决了这个问题。请参考以下网址以增加亚马逊实例的分区大小

[http://tuts.pinehead.tv/2012/05/07/resizing-root-partition-on-linux-in-amazon-ec2/](http://tuts.pinehead.tv/2012/05/07/resizing-root-partition-on-linux-in-amazon-ec2/)