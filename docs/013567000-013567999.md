# StackOverflow 问答 13567000-13567999

# compiler-construction - 哪些语言是上下文相关的？

> ID：13567001
> 
> 赞同：2
> 
> 时间：2012-11-26T14:35:33.363
> 
> 标签：compiler-construction, context-free-grammar, context-sensitive-grammar

我正在学习“编译器理论”，它说大多数语言都使用“确定性上下文无关语法”。我想知道是否有任何语言使用“上下文相关语法”？

* * *

**更新**：

我问了一个人，他说c++和ruby有*一些*上下文相关的语法。

例如，在 c++ 中，此代码：

```
abc(); 
```

如果有一个名为 的方法`abc`，则`abc()`表示“调用此方法”。如果有 class `class abc{ }`，则表示“创建 abc 类的实例”。

而在 ruby​​ 中，由于它具有元编程，因此它具有更多上下文敏感的语法。

他是对的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T14:50:25.697

上下文相关文法的符号会根据它们在上下文中使用的各种非终结符改变其含义。在计算机世界中，它们非常少见，因为它使解析器的编写变得相当复杂——判断一个字符串是否属于某个上下文相关的语法是 PSPACE 完全的。

# facebook - Facebook 应用程序 - 安装了我的应用程序的页面

> ID：13567008
> 
> 赞同：1
> 
> 时间：2012-11-26T14:36:04.287
> 
> 标签：facebook, facebook-graph-api

如何使用 Graph API Explorer 或 FQL 来确定哪些页面安装了我的应用程序？

# shopify - 使用 cookie 跟踪购物车停止工作

> ID：13567010
> 
> 赞同：1
> 
> 时间：2012-11-26T14:36:06.813
> 
> 标签：shopify

使用 cookie 跟踪用户的购物车`cart`不再适合我了。

我已经在多个站点上对此进行了测试，将产品添加到购物车时不再创建 cookie。

例如：[http ://www.fourcornerstore.com/](http://www.fourcornerstore.com/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T14:51:59.287

由于错误，它必须暂时禁用，但会尽快重新启用。如果你在 Twitter 上观看 @shopifyapi（我想你可能也在那里问过），我会确保在部署修复程序时通知你们。

# c++ - __m128, SSE4 中最大绝对值的符号

> ID：13567011
> 
> 赞同：3
> 
> 时间：2012-11-26T14:36:10.827
> 
> 标签：c++, sse, simd

我需要知道具有存储在 __m128 中的最大绝对值的值的符号。这是我现在的解决方案：

```
int getMaxSign(__m128 const& vec) {
    static const __m128 SIGN_BIT_MASK = 
      _mm_castsi128_ps(_mm_set1_epi32(0x80000000));

    // This creates an int, where sign(a) is 1 if a is negative, 0 o.w.:
    // sign(a3)<<3 | sign(a2)<<2 | sign(a1)<<1 | sign(a0)
    const int signMask = _mm_movemask_ps(vec);

    // Get the absolute value of the vector;
    __m128 absValsMMX = _mm_andnot_ps(SIGN_BIT_MASK, vec);

    // Figure out the horizontal max
    __declspec(align(16)) float absVals[4];
    _mm_store_ps(absVals, absValsMMX);

    const float maxVal = std::max(std::max(absVals[0], absVals[1]), absVals[2]);

    return (maxVal == absVals[0] ? signMask & 0x1 : 
      (maxVal == absVals[1] ? signMask & 0x2 : signMask & 0x4));
} 
```

在这种情况下，如果具有最大绝对值的值为负数，则符号将为 1，否则为 0，但我实际上并不关心约定是什么。另一件事是我使用这些 __m128s 表示同质向量，所以我知道最后一个值将始终为 0。

对于一个相对简单的任务，这似乎需要做很多工作。我怎样才能更快地做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T15:56:31.943

这是一种可能的实现（在 C 中）：

```
int getMaxSign(const __m128 v)
{
    __m128 v1, vmax, vmin, vsign;
    float sign;

    v1 = (__m128)_mm_alignr_epi8((__m128i)v, (__m128i)v, 4); // v1 = v rotated by 1 element
    vmax = _mm_max_ps(v, v1);           // generate horizontal max/min
    vmin = _mm_min_ps(v, v1);
    vmax = _mm_max_ps(vmax, (__m128)_mm_alignr_epi8((__m128i)vmax, (__m128i)vmax, 8));
    vmin = _mm_min_ps(vmin, (__m128)_mm_alignr_epi8((__m128i)vmin, (__m128i)vmin, 8));
    vsign = _mm_add_ps(vmax, vmin);     // add max and min to get sign of abs max
    sign = _mm_extract_ps(vsign, 0);
    return (int)(sign < 0.0f);          // return 1 for negative
} 
```

尽管这看起来像很多代码，但它只有大约 9 条 SSE 指令，并且没有内存访问、没有分支和很少的标量代码。

请注意，上面同时使用了 SSSE3 和 SSE4.1 指令。

这是仅需要 SSSE3 的第二个版本：

```
int getMaxSign(const __m128 v)
{
    __m128 v1, vmax, vmin, vsign;
    int mask;

    v1 = (__m128)_mm_alignr_epi8((__m128i)v, (__m128i)v, 4); // v1 = v rotated by 1 element
    vmax = _mm_max_ps(v, v1);           // generate horizontal max/min
    vmin = _mm_min_ps(v, v1);
    vmax = _mm_max_ps(vmax, (__m128)_mm_alignr_epi8((__m128i)vmax, (__m128i)vmax, 8));
    vmin = _mm_min_ps(vmin, (__m128)_mm_alignr_epi8((__m128i)vmin, (__m128i)vmin, 8));
    vsign = _mm_add_ps(vmax, vmin);     // add max and min to get sign of abs max
    mask = _mm_movemask_epi8((__m128i)vsign);
    return (mask & 8) != 0;             // return 1 for negative
} 
```

这会生成 12 条指令：

```
pshufd  $57, %xmm0, %xmm1
movdqa  %xmm0, %xmm2
minps   %xmm1, %xmm2
pshufd  $78, %xmm2, %xmm3
minps   %xmm3, %xmm2
maxps   %xmm1, %xmm0
pshufd  $78, %xmm0, %xmm1
maxps   %xmm1, %xmm0
addps   %xmm2, %xmm0
pmovmskb    %xmm0, %eax
shrl    $3, %eax
andl    $1, %eax 
```

请注意编译器如何巧妙地更改`palignr`并仅使用 a和 an`pshufd`实现最终的标量测试。`shrl``andl`

* * *

Visual Studio C/C++ 的注意事项：在 and 之间进行转换`__m128`，`__m128i`您需要使用`_mm_castps_si128`and `_mm_castsi128_ps`，例如

```
 mask = _mm_movemask_epi8((__m128i)vsign); 
```

将需要更改为：

```
 mask = _mm_movemask_epi8(_mm_castps_si128(vsign)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:40:25.293

如果您的数字是离散的，并且间隔适当，并且来自有限的子集，那么还有其他可能性。

例如，如果您保证 a、b 和 c 是整数，那么您可以将向量自身相乘以获得奇次幂，然后用 <1, 1, 1> 点它。例如，如果我们将它自身相乘 4 次，它会得到 < a^5, b^5, c^5 >。如果 |a| 是最大的并且|a|=2，那么我们知道b和c将为1或0，所以a^3的值将占主导地位，点积将有其符号。例如，如果 X= < a=-2, b=1, c=0 > ，则 X^5 = <-32, 1, 0>。当你用 <1, 1, 1> 点它时，你得到 -31，它的符号反映了最大绝对值的符号。随着最大数的绝对值增加，它与其他项之间的差异将趋于收敛——例如，如果我们有 <-8, 7, 7>，那么上面的算法给出 X^5=<-32768 , 16807, 16807>，你用 <1 来点缀它，1, 1> 并得到 846，因此算法以指数 5 失败。如果我们将指数提高到 7，我们得到 <-2097152, 823543, 823543>，点缀着 <1, 1, 1> 给我们 -450066，这是正确的答案。最终舍入错误也会破坏这种方法。但是，如果您知道数据集的限制，我希望它可以对其他替代方案提供一些见解。

作为脚注，请记住 X^5 = (X*X) * (X*X) * X，因此您进行一次乘以得到 X^2，将其乘以自身得到 X^4，然后乘以 X - 总共三倍。您需要一个奇数指数来保留符号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T15:03:39.743

```
m = min(a,b,c);  
M = max(a,b,c);  

// return abs(m)>abs(M) ? sign(m): sign(M);   // was
return sign(m+M); 
```

正如 Paul_R 正确注意到的那样，符号仅来自最小值和最大值的总和。具有较大（相反符号）绝对值的，获胜。

但是这个想法可以被更多地利用：min/max 的总和是相同的，作为所有元素的总和，减去中间的那个，可以通过 max 3 比较找到。

```
return sign(a+b+c - middle(a,b,c));  // or
return sign(a*aw + b*bw + c*cw);     // where aw,bw,cw = [0,1] 
```

aw,bw,cw 可以从赢得比较的次数中得出（我认为必须为这种情况仔细计划，当有 2 或 3 个相等的值时。）

并进一步：

```
x = abs(b)>abs(a)?b:a;
return sign(x+c); 
```

可能更进一步：

```
s = sign(a + b);  // store the sign of larger of a or b  
a = abs(a); b=abs(b);  
a = max(a,b) | s;   // somehow copy the sign.  
return sign(a+c); 
```

# elasticsearch - ElasticSearch：按与日期的接近程度排名

> ID：13567015
> 
> 赞同：1
> 
> 时间：2012-11-26T14:36:32.947
> 
> 标签：elasticsearch, ranking

在 ElasticSearch 中，有没有办法通过接近给定日期（或数字）对搜索结果进行排名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:24:43.643

您可以使用[基于脚本的排序](http://www.elasticsearch.org/guide/reference/api/search/sort.html)来计算接近度。但是，如果您有大量结果，则可能需要切换到本机脚本才能获得良好的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-27T05:00:49.430

试试这个例子：

```
"DECAY_FUNCTION": {
    "FIELD_NAME": {
          "origin": "2013-09-17",
          "scale": "10d",
          "offset": "5d",
          "decay" : 0.5
    }
} 
```

DECAY_FUNCTION 可以是“linear”、“exp”和“gauss”。如果您的字段是日期字段，您可以将比例和偏移设置为天、周等。

参考：[http ://www.elastic.co/guide/en/elasticsearch/reference/1.5/query-dsl-function-score-query.html](http://www.elastic.co/guide/en/elasticsearch/reference/1.5/query-dsl-function-score-query.html)

# rubygems - 在 RubyGems 和/或 Homebrew 上发布 gem？

> ID：13567017
> 
> 赞同：0
> 
> 时间：2012-11-26T14:36:35.793
> 
> 标签：rubygems, homebrew

`git-pulls`是我维护的第一个宝石，我负责，它被我以外的真实人使用。这使我陷入了我从未遇到过的境地。

例如，有人要求在[此处](https://github.com/schacon/git-pulls/issues/15)创建一个 brew 包。对于[有人回答](https://github.com/schacon/git-pulls/issues/15#issuecomment-753502)的内容：

> Homebrew 特别不想替换像 Rubygems 这样的系统，因为它只会导致重复。

然而，我在 RubyGems 文档中找到[了这个条目](http://docs.rubygems.org/read/chapter/6#page19)，它解释了如何在 RubyGems 和 Homebrew 上分发 gem。

这个问题是在几年前创建的。而且我不知道 RubyGems 社区的意见是否从那时起演变。我没有找到答案。

我现在没有这个职位，所以作为一个新手宝石出版商，我寻找有见地的提示:)

那么，重复与否？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T20:23:25.397

Ruby gem 通常不被 Homebrew 接受；相反，预计用户将安装 Ruby（可能通过 Homebrew），然后使用 RubyGems 安装/管理 gems。

# java - 通过代码关闭 fxml 窗口，javafx

> ID：13567019
> 
> 赞同：65
> 
> 时间：2012-11-26T14:36:40.880
> 
> 标签：java, user-interface, javafx, fxml

我需要通过控制器中的代码关闭当前的 fxml 窗口

> 我知道 stage.close() 或 stage.hide() 在 fx 中这样做

如何在 fxml 中实现这一点？我试过了

```
private void on_btnClose_clicked(ActionEvent actionEvent) {
        Parent root = FXMLLoader.load(getClass().getResource("currentWindow.fxml"));    
        Scene scene = new Scene(root);

        Stage stage = new Stage();            
        stage.setScene(scene);
        stage.show();
} 
```

但它不起作用！

所有帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：176
> 
> 时间：2012-11-28T09:55:25.153

1.  给你的关闭按钮一个 fx:id，如果你还没有：`<Button fx:id="closeButton" onAction="#closeButtonAction">`
2.  在您的控制器类中：

    ```
    @FXML private javafx.scene.control.Button closeButton;

    @FXML
    private void closeButtonAction(){
        // get a handle to the stage
        Stage stage = (Stage) closeButton.getScene().getWindow();
        // do what you have to do
        stage.close();
    } 
    ```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-08-21T16:15:35.033

如果您有一个扩展的窗口，`javafx.application.Application;`您可以使用以下方法。（这将关闭整个应用程序，而不仅仅是窗口。我误解了 OP，感谢评论者指出）。

```
Platform.exit(); 
```

例子：

```
public class MainGUI extends Application {
.........

Button exitButton = new Button("Exit");
exitButton.setOnAction(new ExitButtonListener());
.........

public class ExitButtonListener implements EventHandler<ActionEvent> {

  @Override
  public void handle(ActionEvent arg0) {
    Platform.exit();
  }
} 
```

**编辑 Java 8 的美感：**

```
 public class MainGUI extends Application {
    .........

    Button exitButton = new Button("Exit");
    exitButton.setOnAction(actionEvent -> Platform.exit());
 } 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-02-11T05:18:13.610

`NullPointerException`在收到接受的答案后，我以以下方式实现了这一点。

在我的 FXML 中：

```
<Button onMouseClicked="#onMouseClickedCancelBtn" text="Cancel"> 
```

在我的`Controller`课堂上：

```
@FXML public void onMouseClickedCancelBtn(InputEvent e) {
    final Node source = (Node) e.getSource();
    final Stage stage = (Stage) source.getScene().getWindow();
    stage.close();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-12-14T10:29:50.207

如果您不想使用 fxml 链接方法过度扩展您的控制器，您可以执行以下操作：

你必须给它一个 fx:id。例如“closeButton”。在您的 FXML 文件中应该如下所示：

```
<Button fx:id="closeButton" layoutX="876.0" layoutY="74.0" mnemonicParsing="false" textAlignment="CENTER"> 
```

然后你可以在你的初始化方法或任何你想要的地方编写按钮：

```
@FXML
Button closeButton

public initialize(){
    closeButton.setOnAction(new EventHandler<ActionEvent>(){
        @Override
        public void handle(ActionEvent e){
            ((Stage) closeButton.getScence().getWindow()).close();
        }
    });
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-27T17:56:51.243

我不确定这是否是最好的方法（或者它是否有效），但你可以尝试：

```
private void on_btnClose_clicked(ActionEvent actionEvent) {

        Window window = getScene().getWindow();   

        if (window instanceof Stage){
            ((Stage) window).close();
        }
} 
```

（假设你的控制器是一个Node。否则你必须先获取节点（getScene() 是Node的一个方法）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-07-09T06:15:05.480

```
stage.setOnCloseRequest(new EventHandler<WindowEvent>() {
    public void handle(WindowEvent we) {                        
        Platform.setImplicitExit(false);
        stage.close();
    }
}); 
```

它相当于`hide`。所以当你下次要打开它时，你只需检查`stage`对象是否退出。如果退出，您只需`show()`调用`(stage.show())`。否则，你必须开始这个阶段。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-11-25T13:29:48.097

最后，我找到了解决方案

```
 Window window =   ((Node)(event.getSource())).getScene().getWindow(); 
            if (window instanceof Stage){
                ((Stage) window).close();
            } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-05-03T13:44:12.130

隐藏不会关闭窗口，只是置于可见模式。最好的解决方案是：

```
@FXML
private void exitButtonOnAction(ActionEvent event){
        ((Stage)(((Button)event.getSource()).getScene().getWindow())).close();      
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-04-25T08:57:57.943

我找到了一个不需要触发事件的不错的解决方案：

```
@FXML
private Button cancelButton;

close(new Event(cancelButton, stage, null));

@FXML
private void close(Event event) {
    ((Node)(event.getSource())).getScene().getWindow().hide();                      
} 
```

# c# - C# WMI：向 NIC 添加/删除多个 IP 地址

> ID：13567025
> 
> 赞同：0
> 
> 时间：2012-11-26T14:36:53.557
> 
> 标签：c#, network-programming, wmi, ip-address

我的应用程序是 C# .net Framework 3.5。

该应用程序的主要功能是：

1.  让用户选择网络接口卡（NIC）
2.  为用户选择的 NIC 分配一个 IP 地址（和子网掩码） - 我使用 WMI - [Win32_NetworkAdapterConfiguration](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394217%28v=vs.85%29.aspx)类的 EnableStatic 方法。
3.  通过一个[进程](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)启动一个第 3 方 C++ exe 组件，它的行为就像一个服务器，它将监听给定的 IP 地址 - 绑定功能由服务器实现，所以在进程启动时我只是传递正确的 IP 地址和它开始听那个。

操作 2 和 3 可以无限次重复，因此可以为同一个 NIC 分配多个 IP 地址并拥有多个服务器，每个服务器都侦听自己的 IP 地址。

要将 IP 地址分配给给定的 NIC，我使用 WMI，尤其是这段代码，其中 adapterGUID 是用户选择的 NIC 的 GUID，而 newSettings 它是一个包含 IP 和子网掩码列表的类：

```
public static bool ChangeNetworkInterfaceIPs(string adapterGUID, IpSettings newSettings)
    {
        try
        {
            if (String.IsNullOrEmpty(adapterGUID))
                    throw new ArgumentException("adapterGUID");

                ManagementBaseObject inPar = null;

                ManagementClass mc = new ManagementClass("Win32_NetworkAdapterConfiguration");
                ManagementObjectCollection moc = mc.GetInstances();
                ManagementObject moTarget = null;

                //Look for the correct network interface
                foreach (ManagementObject mo in moc)
                {
                    //find the target management object
                    if ((string) mo["SettingID"] == adapterGUID)
                    {
                        moTarget = mo;
                        break;
                    }
                }
                if (moTarget == null)
                {
                    mc = null;
                    return false;
                }

                //we found the correct NIC. Save the current gateways, dns and wins
                object winsSecondary = moTarget.GetPropertyValue("WINSSecondaryServer");
                object gateways = moTarget.GetPropertyValue("DefaultIPGateway");
                object dnsDomain = moTarget.GetPropertyValue("DNSDomain");
                object dnsServers = moTarget.GetPropertyValue("DNSServerSearchOrder");
                object winsPrimary = moTarget.GetPropertyValue("WINSPrimaryServer");

                if (newSettings.DHCP)
                {
                    inPar = moTarget.GetMethodParameters("EnableDHCP");
                    moTarget.InvokeMethod("EnableDHCP", inPar, null);
                }
                else
                {
                    inPar = moTarget.GetMethodParameters("EnableStatic");
                    inPar["IPAddress"] = newSettings.Ips;
                    inPar["SubnetMask"] = newSettings.Netmasks;
                    moTarget.InvokeMethod("EnableStatic", inPar, null);
                }

                //restore the gateways, dns and wins
                if (gateways != null && !newSettings.DHCP)
                {
                    inPar = moTarget.GetMethodParameters("SetGateways");
                    inPar["DefaultIPGateway"] = gateways;
                    outPar = moTarget.InvokeMethod("SetGateways", inPar, null);
                }
                if (dnsDomain != null && !newSettings.DHCP)
                {
                    inPar = moTarget.GetMethodParameters("SetDNSDomain");
                    inPar["DNSDomain"] = dnsDomain;
                    outPar = moTarget.InvokeMethod("SetDNSDomain", inPar, null);
                }
                if (dnsServers != null && !newSettings.DHCP)
                {
                    //Do not restore DNS Servers in case of DHCP. Will be retrieved from DHCP Server
                    inPar = moTarget.GetMethodParameters("SetDNSServerSearchOrder");
                    inPar["DNSServerSearchOrder"] = dnsServers;
                    outPar = moTarget.InvokeMethod("SetDNSServerSearchOrder", inPar, null);
                }
                if (winsPrimary != null && !newSettings.DHCP)
                {
                    inPar = moTarget.GetMethodParameters("SetWINSServer");
                    inPar["WINSPrimaryServer"] = winsPrimary;
                    if (winsSecondary != null)
                    {
                        inPar["WINSSecondaryServer"] = winsSecondary;
                    }
                    outPar = moTarget.InvokeMethod("SetWINSServer", inPar, null);
                }

                return true;
        }
        catch
        {
            return false;
        }
    } 
```

现在，当用户想要杀死一个活动服务器时，我的问题就出现了。在服务器关闭时，我必须从 NIC 中删除服务器正在侦听的 IP 地址。

杀死进程这不是问题，但是当我调用我的 ChangeNetworkInterfaceIPs 以使用新的 IP 地址列表（即：没有 IP 地址的旧列表）更新分配给 NIC 的 IP（删除不再使用的服务器）时被杀死的服务器）发生了一些非常奇怪的事情：随机一些其他正在运行的服务器得到一个 SOCKET_ERROR 并且它们的连接已关闭。

知道发生了什么吗？为什么当我从 NIC中删除**未使用的 IP 地址时，正在运行的服务器会随机获取 SOCKET_ERRORs？**此外，我知道可能设置一个完整的 IP 地址列表只是为了删除一个它并不是一个最佳实践：有没有办法只删除一个给定的 IP 地址？

我希望这个问题足够清楚。感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-06T11:22:26.210

我没有回答帖子中提出的所有问题，但发布这可能对像我这样的初学者有所帮助。

问题：有没有办法只删除给定的 IP 地址？
答：`netsh`在c#中将命令作为进程运行

```
Process p = new Process();
p.StartInfo.UseShellExecute = false;
p.StartInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
p.StartInfo.RedirectStandardOutput = true;
p.StartInfo.FileName = "netsh";
p.StartInfo.Arguments = "netsh interface ipv4 delete address \"my NIC Name\" addr=192.168.1.1";
p.Start();
string response = p.StandardOutput.ReadToEnd();
p.Close(); 
```

注意：此命令必须以管理员身份运行。

# c# - 单元测试 - 扩展 Visual Studio 单元测试类型 - 不工作

> ID：13567028
> 
> 赞同：12
> 
> 时间：2012-11-26T14:36:55.660
> 
> 标签：c#, visual-studio-2010, visual-studio, unit-testing, vs-unit-testing-framework

我们被要求从 NUnit 迁移到 MSTest，现在必须将所有现有测试转换到新平台。其中大部分转换得很好，但我们在参数化测试方面遇到了问题。我们找到了以下网站，展示了如何编写扩展程序并下载了代码。

[http://blogs.msdn.com/b/vstsqualitytools/archive/2009/09/04/extending-the-visual-studio-unit-test-type-part-2.aspx](http://blogs.msdn.com/b/vstsqualitytools/archive/2009/09/04/extending-the-visual-studio-unit-test-type-part-2.aspx)

然而，尽管它编译得很好，但 RowTestClass 测试都无法运行，并出现以下错误消息：

> “无法初始化单元测试扩展‘urn:RunAsTestClassAttribute’：未为以下属性注册单元测试扩展：Microsoft.VisualStudio.Test.Sample.UnitTestTypeExtension.RunAsSample.RunAsTestClassAttribute。”

我们正在使用 VS2010 (10.0.40219.1 SP1Rel) (Microsoft .NET Framework 版本 4.0.30319 SP1Rel)

我想知道它是否与以下库有关：

```
Microsoft.VisualStudio.QualityTools.Common.dll
Runtime Version: v2.0.50727

C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\ReferenceAssemblies\v2.0\Microsoft.VisualStudio.QualityTools.Common.dll

Microsoft.VisualStudio.QualityTools.UnitTestFramework.dll
Runtime Version: v4.0.30319

C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\PublicAssemblies\Microsoft.VisualStudio.QualityTools.UnitTestFramework.dll

Microsoft.VisualStudio.QualityTools.Vsip.dll
v4.0.30319

C:\Windows\Microsoft.Net\assembly\GAC_MSIL\Microsoft.VisualStudio.QualityTools.Vsip\v4.0_10.0.0.0__b03f5f7f11d50a3a\Microsoft.VisualStudio.QualityTools.Vsip.dll 
```

任何帮助使这项工作非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-23T08:36:14.277

您是否注册了新类型（在[Windows 注册表](http://en.wikipedia.org/wiki/Windows_Registry)中）？[教程](http://blogs.msdn.com/b/vstsqualitytools/archive/2009/09/04/extending-the-visual-studio-unit-test-type-part-2.aspx)中有一个关于如何做到这一点的部分- 看看***Row Test Test Type Extension: Registering your test type extension***。

如果您遇到问题，请尝试从[MSDN 代码库](http://archive.msdn.microsoft.com/UnitTestExtendSample)下载完整的代码 + 注册表项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-19T16:30:28.213

您可能想考虑使用[SpecFlow](http://www.specflow.org/)使您的测试更加参数化。它传统上是一个 BDD 工具，但它允许您进行可重用的带有参数的步骤。

例如，您可以创建一个步骤说

```
"Given the user 'admin' exists." 
```

在 c# 方面，您会得到这样的方法：

```
[Given(@"the user '(.*)' exists"]
public void GivenTheUserExists(string name)
{
    //create the user
} 
```

展望未来，您可以在任何“功能文件”中重复使用该步骤，而无需重写该步骤的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-28T07:49:40.080

请参阅博文*[Extending Unit Tests in Visual Studio](http://blogs.msdn.com/b/tilovell/archive/2010/04/28/extending-unit-tests-in-visual-studio.aspx)*。看看你可能错过了什么。我尝试了同样的方法，它对我来说效果很好。

# c++ - 既不复制也不移动构造函数调用

> ID：13567029
> 
> 赞同：0
> 
> 时间：2012-11-26T14:36:57.753
> 
> 标签：c++, copy-constructor, move-constructor

> **可能重复：**
> [为什么在这种情况下不调用复制构造函数？](https://stackoverflow.com/questions/1758142/why-copy-constructor-is-not-called-in-this-case)
> [什么是复制省略和返回值优化？](https://stackoverflow.com/questions/12953127/what-are-copy-elision-and-return-value-optimization)

谁能向我解释为什么以下程序会产生输出“cpy：0”（至少在使用 g++ 4.5.2 编译时）：

```
#include<iostream>

struct A {

    bool cpy;

    A() : cpy (false) {
    }

    A (const A & a) : cpy (true) {
    }

    A (A && a) : cpy (true) {
    };

};

A returnA () { return A (); }

int main() {

    A a ( returnA () );
    std::cerr << "cpy: " << a.cpy << "\n";
} 
```

当我试图弄清楚这个例子看似奇怪的结果时，问题就出现了：[用常量数据成员或引用成员移动类的ctor](https://stackoverflow.com/questions/13565594/move-ctor-of-class-with-constant-data-member-of-reference-member/13565811#comment18587907_13565811)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T14:41:42.373

对于它自己创建的对象，编译器可以自由地省略复制和移动构造，即使它们有副作用。临时对象和返回值通常直接在正确的位置构造，省略复制或移动它们。但是，对于返回值，您需要小心一点，以使省略号生效。

如果要防止复制省略，则基本上需要有条件地返回两个候选对象：

```
bool flag(false);
A f() {
    A a;
    return flag? A(): a;
} 
```

假设您不更改`flag`这将始终创建一个副本`a`（除非编译器自我上次尝试后变得更聪明）。

# javascript - 如何将哈希模式映射到字符串值？

> ID：13567033
> 
> 赞同：-1
> 
> 时间：2012-11-26T14:37:25.077
> 
> 标签：javascript, regex

我想将位置哈希中的内容映射到字符串。映射必须基于以下模式（：Placeholder 可以是任意数字，也许是 RegEx？）。在函数中处理这个问题的最佳方法是什么？

```
 'news/:NewsID/dup' => 'newsDuplicate',
    'news/:NewsID' => 'newsDetail',
    'news/:NewsID/authors' => 'authorsList',
    'news/:NewsID/authors/' => 'authorsList',
    'news/:NewsID/authors/create' => 'authorsCreate',
    'news/:NewsID/authors/:AuthorID' => 'authorDetail',
    'news/:NewsID/authors/:AuthorID/orders' => 'orders',
    'news/:NewsID/authors/:AuthorID/workflow' => 'workflow',
    'news/:NewsID/authors/:AuthorID/tags' => 'tags' 
```

我试图在导航中突出显示正确的按钮，并想要一个像 handleNav() 这样的函数，它会根据模式突出显示正确的按钮。

例如，当在[http://mydomain.com#!news/123/authors/987](http://mydomain.com#!news/123/authors/987)时，我可以这样做：

```
function handleNav() {
  var current = ?? //get mapped string above
  $('button.' + current).addClass('active').siblings().removeClass('active');
} 
```

如何根据映射获得上面的“当前”变量？不确定一堆 if-else 语句是否是最好的方法，而且我不太了解正则表达式。感谢您的任何帮助或见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:55:58.223

也许在读取映射之前规范化字符串？像这样的东西：

```
var map = {
  'news/ID/dup' : 'newsDuplicate',
  'news/ID' : 'newsDetail',
  'news/ID/authors' : 'authorsList',
  'news/ID/authors/' : 'authorsList',
  'news/ID/authors/create' : 'authorsCreate',
  'news/ID/authors/:AuthorID' : 'authorDetail',
  'news/ID/authors/:AuthorID/orders' : 'orders',
  'news/ID/authors/:AuthorID/workflow' : 'workflow',
  'news/ID/authors/:AuthorID/tags' : 'tags'
}

function normalize(str) {
    return str.replace(/news\/\d+/,'news/ID')
}

var current = map[normalize(url)]; 
```

# c# - 检查单词的长度，然后在 C# 中长度大于 7 个字符时输出

> ID：13567035
> 
> 赞同：-5
> 
> 时间：2012-11-26T14:37:33.803
> 
> 标签：c#

我对自己有点生气，因为我知道这不是最难解决的事情之一，但是..

我有一个文本文件，我的程序正在从文本文件中读取分析结果然后输出它们并做一些其他事情，我正在努力的是我需要我的程序读取文本文件中的单词检查它们是否是大于 7 个字符，如果是这样，请创建一个单独的文本文件来存储结果...

我尝试了各种方法，例如 foreach 循环并尝试创建和数组来存储文本文件中的数据，但我一直卡住。

人们可以帮助我的任何建议或代码示例？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T14:50:23.790

```
string myTextFile = File.ReadAllText("inputFile.txt");
var longWordsFile = File.CreateText("outputFile.txt");

myTextFile.Split(' ')
    .Where(s => s.Length > 7)
    .ToList()
    .ForEach(longWordsFile.WriteLine);

longWordsFile.Flush(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T14:43:51.110

```
 static void Main()
    {
        foreach (string line in File.ReadAllLines("text.txt"))
        {
            string[] words = line.Split(' ');
            foreach (var word in words)
            {
                 Console.WriteLine(word.Length > 7 ? ">7": "<=7");
            }
        }
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T14:47:56.663

您的问题可以分解为许多较小的问题：

1.  从文本文件中获取所有行。
2.  从检索到的内容中，将其拆分为单个单词。
3.  遍历每个单词并检查长度。
4.  将大词放入单独的集合中。

* * *

就像是：

```
List<string> words = FetchAllWords();
List<string> bigWords = new List<string>();

foreach (var word in words)
{
    if (word.Length > 7)
        bigWords.Add(word);
}

// Do something with bigWords.
SaveBigWords(bigWords); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T14:51:44.700

**检索长文本**

```
string[] content = File.ReadAllLines("text.txt");
string longTexts="";
var words=content.SelectMany(line=>line.Split(' ', StringSplitOptions.RemoveEmptyEntries));
foreach(string word in words)
{
 longTexts=longTexts+",";
} 
```

**将长文本字符串写入新文本文件**

```
System.IO.StreamWriter file = new System.IO.StreamWriter("c:\\test.txt");
file.WriteLine(longTexts);
file.Close(); 
```

# windows-runtime - 加载完整的网站 WinRT

> ID：13567037
> 
> 赞同：0
> 
> 时间：2012-11-26T14:37:36.417
> 
> 标签：windows-runtime, httpclient

我想像这样使用 HttpClient 加载 Kepler 参考页面：

```
string resourceAddress = _url;
            HttpRequestMessage request = new HttpRequestMessage(HttpMethod.Get, resourceAddress);
            HttpClient httpClient = new HttpClient();
            // Do not buffer the response:
            HttpResponseMessage response = new HttpResponseMessage();
            response = await httpClient.SendAsync(request,
                 HttpCompletionOption.ResponseContentRead);

            using (Stream responseStream = await response.Content.ReadAsStreamAsync())
            {
                int read = 0;
                byte[] responseBytes = new byte[(Int32)responseStream.Length];
                do
                {
                    read = await responseStream.ReadAsync(responseBytes, 0, responseBytes.Length);
                } while (read != 0);
            } 
```

但我认为，页面不会完整加载，就像没有所有图像和 iframe 等...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:30:03.457

仅下载第一段 html 很少足以为您提供页面的所有元素，即使您对其进行解析并包含所有链接的图像等。还有 css 和 javascript 可以在查看时带来新内容您在浏览器中打开一个页面并自己获取所有这些内容将类似于实现您自己的浏览器。您最好的选择是在 WebView 控件中加载页面一次并让它缓存其内容，或者使用 WebView 并扫描 DOM 以尝试获取所有元素。您还可以编写一个 Web 服务，为您下载该页面并为您提供整个软件包……假设该页面不需要身份验证。

# c# - 如何强制抽象类子实现静态方法？

> ID：13567042
> 
> 赞同：6
> 
> 时间：2012-11-26T14:37:52.330
> 
> 标签：c#, oop

> **可能重复：**
> [如何强制继承类在 C# 中实现静态方法？](https://stackoverflow.com/questions/1906053/how-can-i-force-inheriting-classes-to-implement-a-static-method-in-c)

我理解抽象和静态是相反的，但我想强制派生类实现静态方法。我怎样才能做到这一点？

在 SimonC 之后编辑：在尝试描述我想要做的事情时，我意识到超类的静态方法将无法调用被覆盖的子类版本。

但是 olivier 的替代解决方案看起来不错。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-26T14:53:29.093

将静态行为与继承或接口实现相结合的一种可能方法是使用单例模式。对单例对象的访问是静态的，但是该对象是使用`new`“普通”对象创建的

```
public interface ISomeInterface { ... }

public class SomeClass : ISomeInterface
{ 
    public static readonly SomeClass Instance = new SomeClass();

    private SomeClass()
    { 
    }

    // TODO: Implement ISomeInterface
    // and/or override members from a base class.
} 
```

* * *

访问单例的方法

```
ISomeInterface obj = SomeClass.Instance; // Static access to interface.
var y = obj.SomeMethod(x); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T14:42:41.300

你不能。静态方法不受多态行为的影响。你甚至不能自愿重写静态方法，更不用说强制一个类重写它们了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-26T14:44:36.057

对不起，但这是不可能的。抽象类和/或基类都是关于对象继承的。

`static`方法特定于一个且仅一个类，并且**不可**继承。

# javascript - 从 jQuery 获取上一个和下一个兄弟姐妹

> ID：13567047
> 
> 赞同：0
> 
> 时间：2012-11-26T14:38:31.570
> 
> 标签：javascript, jquery

```
<ul>
  <li>
    <img src="a">
  </li>
  <li>
    <img src="b">
  </li>
  <li>
    <img src="c">
  </li>
  <li>
    <img src="d">
  </li>
</ul> 
```

这只是一个例子，上述结构属于轮播，IMG“b”聚焦在屏幕上。我只想知道如何获取上一张图像的高度（即“a”）和下一张图像的高度（即“c”）。

我试过了`.closest`，`.siblings()`但没有奏效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T14:40:08.413

您的尝试没有考虑到您应该先向上移动一位父母，然后才能找到任何兄弟姐妹：

```
var $prevItem = $(this).parent().prev('li').children('img'), // <-- "a"
$nextItem = $(this).parent().next('li').children('img'); // <-- "c" 
```

# jquery - Bassistance 表单验证中的错误

> ID：13567050
> 
> 赞同：3
> 
> 时间：2012-11-26T14:38:41.170
> 
> 标签：jquery

我正在尝试使用 bassistance 表单验证插件

我想使用[这个演示](http://jquery.bassistance.de/validate/demo/custom-methods-demo.html)中演示的代码。

首先`textbox`，它显示错误，直到我输入 3 位数的值，然后显示 OK，当我删除一些字符并使其再次小于 3 位数时，错误开始显示，它显示带有*ok*图标的错误消息

我用 firebug 检查了生成的元素，我注意到它同时具有`error`和`sucess`css 类，它一次应该有一个

我尝试在demo源码中修改成功函数如下：

```
success: function(label) {
    label.text("ok!").addClass("success");
    label.removeClass("error");
} 
```

但它没有用。我发现这个例子真的很强大，我希望修复它并在我的工作中使用它。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:30:44.837

### 修复此问题：

```
errorPlacement: function(error, element) {
    error.appendTo( element.parent("td").next("td") );
    element.parent("success").removeClass("success");
}, 
```

# mysql - 从数据库中获取条目并使用 Joomla 显示列表

> ID：13567053
> 
> 赞同：0
> 
> 时间：2012-11-26T14:39:01.577
> 
> 标签：mysql, database, joomla, content-management-system

我需要为 Joomla 网站制作一些自定义页面。

需要从 MySQL 数据库中通过查询获取一些非常基本的信息，并将获取的条目列为分页列表。

另一种是需要对 API 运行一些查询以获得确认的表单。

你会建议我如何建造这个？我目前正在查看文档，但我有点迷茫，不知道从哪里开始。

任何建议都非常感谢和欢迎！

感谢，并有一个愉快的一天！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:59:00.723

我不确定您需要集成什么 API，但[Joomla 扩展目录](http://extensions.joomla.org/)中可能有一些扩展可能适合您的需要。

如果您想编写自己的查询，可以使用[Sourcerer](http://extensions.joomla.org/extensions/core-enhancements/coding-a-scripts-integration/custom-code-in-content/5051)等插件，它允许您在文章中编写自定义 PHP。或者您可以创建自己的模块或组件。为了帮助您入门，您可能还需要考虑使用[模块生成器](http://joomjunk.co.uk/extras/module-generator.html)或[组件生成器](http://extensions.joomla.org/extensions/tools/webbased-tools/7627)。

希望这可以帮助。

# jquery - 如何通过数字位置选择CSS中的某个元素

> ID：13567064
> 
> 赞同：2
> 
> 时间：2012-11-26T14:39:33.433
> 
> 标签：jquery, iphone, html, css, web

例如：

```
 <ul id="list">
   <li>Item1</li>
   <li>Item2</li>
   <li>Item3</li>
 </ul> 
```

我想选择第二个li。以 jQuery 为例：

```
$("#list li[num='2']")...... 
```

显然“num=2”不是真的，但希望你能理解我想要达到的目标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T14:40:57.977

你想要第[n 个子（n）](http://api.jquery.com/nth-child-selector/)选择器。

基本上你把你想要的数字放在 n 的位置，它就会得到那个元素。

```
$('#list li:nth-child(2)')...... 
```

这将获得`li`#list 中的第二个元素

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T14:41:35.340

也可以这样做：

```
$("#list li:eq(1)") 
```

:eq() 是从零开始的索引

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T14:40:48.897

```
#list li:nth-child(2) {
   ...
} 
```

[有关选择器的更多信息`nth-child`（作为 CSS3 选择器）](https://developer.mozilla.org/en-US/docs/CSS/%3anth-child)。

[用于`nth-child`](http://api.jquery.com/nth-child-selector/).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T14:41:34.780

你可以试试：

```
var second_li= $("#list li:nth-child(2)"); 
```

但是 nth-child 不能在 IE < v9 中工作

# android - Android OpenGL 多个纹理不显示

> ID：13567069
> 
> 赞同：0
> 
> 时间：2012-11-26T14:40:01.813
> 
> 标签：android, opengl-es, textures

我已经成功地在所有 6 个面（例如一个板条箱）上展示了一个具有相同纹理的立方体，但我现在正在尝试制作一个天空盒（每面 6 个不同的纹理 1）。天空盒仅在所有侧面显示白色。每个纹理都适用于板条箱立方体，因此纹理很好（我认为。）这是我的代码和一些屏幕截图。

TexturedCube 类（用于板条箱等的类）

```
package com.dissertation.dnativeapp;

import java.io.IOException;
import java.io.InputStream;
import java.nio.ByteBuffer;
import java.nio.ByteOrder;
import java.nio.FloatBuffer;
import javax.microedition.khronos.opengles.GL10;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.opengl.GLUtils;
import android.util.Log;
/*
 * A cube with texture. 
 * Define the vertices for only one representative face.
 * Render the cube by translating and rotating the face.
 */
public class TexturedCube {
    private static final String TAG = "texcube";
   private FloatBuffer vertexBuffer; // Buffer for vertex-array
   private FloatBuffer texBuffer;    // Buffer for texture-coords-array (NEW)

   private float[] vertices = { // Vertices for a face
      -1.0f, -1.0f, 0.0f,  // 0\. left-bottom-front
       1.0f, -1.0f, 0.0f,  // 1\. right-bottom-front
      -1.0f,  1.0f, 0.0f,  // 2\. left-top-front
       1.0f,  1.0f, 0.0f   // 3\. right-top-front
   };

   float[] texCoords = { // Texture coords for the above face (NEW)
      0.0f, 1.0f,  // A. left-bottom (NEW)
      1.0f, 1.0f,  // B. right-bottom (NEW)
      0.0f, 0.0f,  // C. left-top (NEW)
      1.0f, 0.0f   // D. right-top (NEW)
   };
   int[] textureIDs = new int[1];   // Array for 1 texture-ID (NEW)

   // Constructor - Set up the buffers
   public TexturedCube() {
      // Setup vertex-array buffer. Vertices in float. An float has 4 bytes
      ByteBuffer vbb = ByteBuffer.allocateDirect(vertices.length * 4);
      vbb.order(ByteOrder.nativeOrder()); // Use native byte order
      vertexBuffer = vbb.asFloatBuffer(); // Convert from byte to float
      vertexBuffer.put(vertices);         // Copy data into buffer
      vertexBuffer.position(0);           // Rewind

      // Setup texture-coords-array buffer, in float. An float has 4 bytes (NEW)
      ByteBuffer tbb = ByteBuffer.allocateDirect(texCoords.length * 4);
      tbb.order(ByteOrder.nativeOrder());
      texBuffer = tbb.asFloatBuffer();
      texBuffer.put(texCoords);
      texBuffer.position(0);
   }

   // Draw the shape
   public void draw(GL10 gl) {
      gl.glFrontFace(GL10.GL_CCW);    // Front face in counter-clockwise orientation
      gl.glEnable(GL10.GL_CULL_FACE); // Enable cull face
      gl.glCullFace(GL10.GL_BACK);    // Cull the back face (don't display) 

      gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
      gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertexBuffer);
      gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);  // Enable texture-coords-array (NEW)
      gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, texBuffer); // Define texture-coords buffer (NEW)

      // front
      gl.glPushMatrix();
      gl.glTranslatef(0.0f, 0.0f, 1.0f);
      gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, 4);
      gl.glPopMatrix();

      // left
      gl.glPushMatrix();
      gl.glRotatef(270.0f, 0.0f, 1.0f, 0.0f);
      gl.glTranslatef(0.0f, 0.0f, 1.0f);
      gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, 4);
      gl.glPopMatrix();

      // back
      gl.glPushMatrix();
      gl.glRotatef(180.0f, 0.0f, 1.0f, 0.0f);
      gl.glTranslatef(0.0f, 0.0f, 1.0f);
      gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, 4);
      gl.glPopMatrix();

      // right
      gl.glPushMatrix();
      gl.glRotatef(90.0f, 0.0f, 1.0f, 0.0f);
      gl.glTranslatef(0.0f, 0.0f, 1.0f);
      gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, 4);
      gl.glPopMatrix();

      // top
      gl.glPushMatrix();
      gl.glRotatef(270.0f, 1.0f, 0.0f, 0.0f);
      gl.glTranslatef(0.0f, 0.0f, 1.0f);
      gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, 4);
      gl.glPopMatrix();

      // bottom
      gl.glPushMatrix();
      gl.glRotatef(90.0f, 1.0f, 0.0f, 0.0f);
      gl.glTranslatef(0.0f, 0.0f, 1.0f);
      gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, 4);
      gl.glPopMatrix();

      gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY);  // Disable texture-coords-array (NEW)
      gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
      gl.glDisable(GL10.GL_CULL_FACE);
   }

   // Load an image into GL texture
   public void loadTexture(GL10 gl, Context context) {
      gl.glGenTextures(1, textureIDs, 0); // Generate texture-ID array
      Log.d(TAG, "gen number = " + textureIDs[0]);
      gl.glBindTexture(GL10.GL_TEXTURE_2D, textureIDs[0]);   // Bind to texture ID
      // Set up texture filters
      gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_NEAREST);
      gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);

      // Construct an input stream to texture image "res\drawable\nehe.png"
      InputStream istream = context.getResources().openRawResource(R.drawable.crate);
      Bitmap bitmap;
      try {
         // Read and decode input as bitmap
         bitmap = BitmapFactory.decodeStream(istream);
      } finally {
         try {
            istream.close();
         } catch(IOException e) { }
      }

      // Build Texture from loaded bitmap for the currently-bind texture ID
      GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, bitmap, 0);
      bitmap.recycle();
   }
} 
```

天空盒类

```
package com.dissertation.dnativeapp;

import java.nio.ByteBuffer;
import java.nio.ByteOrder;
import java.nio.FloatBuffer;
import javax.microedition.khronos.opengles.GL10;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.opengl.GLUtils;
import android.util.Log;
/*
 * A photo cube with 6 pictures (textures) on its 6 faces.
 */
public class SkyBox {
    private static final String TAG = "skybox";
    private FloatBuffer vertexBuffer;  // Vertex Buffer
   private FloatBuffer texBuffer;     // Texture Coords Buffer

   private int numFaces = 6;
   private int[] imageFileIDs = {  // Image file IDs
      R.drawable.front3,
      R.drawable.left3,
      R.drawable.back3,
      R.drawable.right3,
      R.drawable.top3,
      R.drawable.bot3
   };
   private int[] textureIDs = new int[numFaces];
   private Bitmap[] bitmap = new Bitmap[numFaces];
   private float cubeHalfSize = 1.2f;

   // Constructor - Set up the vertex buffer
   public SkyBox(Context context) {
      // Allocate vertex buffer. An float has 4 bytes
      ByteBuffer vbb = ByteBuffer.allocateDirect(12 * 4 * numFaces);
      vbb.order(ByteOrder.nativeOrder());
      vertexBuffer = vbb.asFloatBuffer();

      // Read images. Find the aspect ratio and adjust the vertices accordingly.
      for (int face = 0; face < numFaces; face++) {
         bitmap[face] = BitmapFactory.decodeStream(
               context.getResources().openRawResource(imageFileIDs[face]));
         int imgWidth = bitmap[face].getWidth();
         int imgHeight = bitmap[face].getHeight();
         float faceWidth = 2.0f;
         float faceHeight = 2.0f;
         // Adjust for aspect ratio
         if (imgWidth > imgHeight) {
            faceHeight = faceHeight * imgHeight / imgWidth; 
         } else {
            faceWidth = faceWidth * imgWidth / imgHeight;
         }
         float faceLeft = -faceWidth / 2;
         float faceRight = -faceLeft;
         float faceTop = faceHeight / 2;
         float faceBottom = -faceTop;

         // Define the vertices for this face
         float[] vertices = {
            faceLeft,  faceBottom, 0.0f,  // 0\. left-bottom-front
            faceRight, faceBottom, 0.0f,  // 1\. right-bottom-front
            faceLeft,  faceTop,    0.0f,  // 2\. left-top-front
            faceRight, faceTop,    0.0f,  // 3\. right-top-front
         };
         vertexBuffer.put(vertices);  // Populate
      }
      vertexBuffer.position(0);    // Rewind

      // Allocate texture buffer. An float has 4 bytes. Repeat for 6 faces.
      float[] texCoords = {
         0.0f, 1.0f,  // A. left-bottom
         1.0f, 1.0f,  // B. right-bottom
         0.0f, 0.0f,  // C. left-top
         1.0f, 0.0f   // D. right-top
      };
      ByteBuffer tbb = ByteBuffer.allocateDirect(texCoords.length * 4 * numFaces);
      tbb.order(ByteOrder.nativeOrder());
      texBuffer = tbb.asFloatBuffer();
      for (int face = 0; face < numFaces; face++) {
         texBuffer.put(texCoords);
      }
      texBuffer.position(0);   // Rewind
   }

   // Render the shape
   public void draw(GL10 gl) {
      gl.glFrontFace(GL10.GL_CCW);

      gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
      gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
      gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertexBuffer);
      gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, texBuffer);

      // front
      gl.glPushMatrix();
      gl.glTranslatef(0f, 0f, cubeHalfSize);
      gl.glBindTexture(GL10.GL_TEXTURE_2D, textureIDs[0]);
      gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, 4);
      gl.glPopMatrix();

      // left
      gl.glPushMatrix();
      gl.glRotatef(270.0f, 0f, 1f, 0f);
      gl.glTranslatef(0f, 0f, cubeHalfSize);
      gl.glBindTexture(GL10.GL_TEXTURE_2D, textureIDs[1]);
      gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 4, 4);
      gl.glPopMatrix();

      // back
      gl.glPushMatrix();
      gl.glRotatef(180.0f, 0f, 1f, 0f);
      gl.glTranslatef(0f, 0f, cubeHalfSize);
      gl.glBindTexture(GL10.GL_TEXTURE_2D, textureIDs[2]);
      gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 8, 4);
      gl.glPopMatrix();

      // right
      gl.glPushMatrix();
      gl.glRotatef(90.0f, 0f, 1f, 0f);
      gl.glTranslatef(0f, 0f, cubeHalfSize);
      gl.glBindTexture(GL10.GL_TEXTURE_2D, textureIDs[3]);
      gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 12, 4);
      gl.glPopMatrix();

      // top
      gl.glPushMatrix();
      gl.glRotatef(270.0f, 1f, 0f, 0f);
      gl.glTranslatef(0f, 0f, cubeHalfSize);
      gl.glBindTexture(GL10.GL_TEXTURE_2D, textureIDs[4]);
      gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 16, 4);
      gl.glPopMatrix();

      // bottom
      gl.glPushMatrix();
      gl.glRotatef(90.0f, 1f, 0f, 0f);
      gl.glTranslatef(0f, 0f, cubeHalfSize);
      gl.glBindTexture(GL10.GL_TEXTURE_2D, textureIDs[5]);
      gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 20, 4);
      gl.glPopMatrix();

      gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
      gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
   }

   // Load images into 6 GL textures
   public void loadTexture(GL10 gl) {
      gl.glGenTextures(6, textureIDs, 0); // Generate texture-ID array for 6 IDs

      Log.d(TAG, "gen number = " + textureIDs[0]);
      // Generate OpenGL texture images
      for (int face = 0; face < numFaces; face++) {
          Log.d(TAG, "gen number " + face + " = " + textureIDs[face]);
         gl.glBindTexture(GL10.GL_TEXTURE_2D, textureIDs[face]);
         // Build Texture from loaded bitmap for the currently-bind texture ID
         GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, bitmap[face], 0);
         bitmap[face].recycle();
      }
   }
} 
```

我的 GLR 渲染器

```
package com.dissertation.dnativeapp;

import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.opengles.GL10;
import android.content.Context;
import android.opengl.GLSurfaceView;
import android.opengl.GLU;
import android.util.Log;

import com.dissertation.dnativeapp.GVariables;

public class MyGLRenderer implements GLSurfaceView.Renderer {

   private static final String TAG = "render";
   private Context context;   // Application context needed to read image (NEW)
   private TexturedCube cube;
   private Cube cube1;
   private SkyBox skybox;
   private int scene;
   private int number;

// For controlling cube's z-position, x and y angles and speeds (NEW)
   float angleX = 0;   
   float angleY = 0;  
   float speedX = 0;   
   float speedY = 0;   
   float z = -6.0f;    

   // Constructor
   public MyGLRenderer(Context context) {
      this.context = context;   // Get the application context (NEW)
      cube = new TexturedCube();
      cube1 = new Cube();
      skybox = new SkyBox(context);
      //get scene value
      scene = GVariables.getScene();
   }

   // Call back when the surface is first created or re-created.

   public void onSurfaceCreated(GL10 gl, EGLConfig config) {
      gl.glClearColor(0.0f, 0.0f, 0.0f, 1.0f);  // Set color's clear-value to black
      gl.glClearDepthf(1.0f);            // Set depth's clear-value to farthest
      gl.glEnable(GL10.GL_DEPTH_TEST);   // Enables depth-buffer for hidden surface removal
      gl.glDepthFunc(GL10.GL_LEQUAL);    // The type of depth testing to do
      gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_NICEST);  // nice perspective view
      gl.glShadeModel(GL10.GL_SMOOTH);   // Enable smooth shading of color
      gl.glDisable(GL10.GL_DITHER);      // Disable dithering for better performance

      if(scene == 1)
      {
          // Setup Texture, each time the surface is created (NEW)
          cube.loadTexture(gl, context);    // Load image into Texture (NEW)
      }
      if(scene == 2)
      {
          skybox.loadTexture(gl);
      }
          gl.glEnable(GL10.GL_TEXTURE_2D);  // Enable texture (NEW)

   }

   // Call back after onSurfaceCreated() or whenever the window's size changes.

   public void onSurfaceChanged(GL10 gl, int width, int height) {
          if (height == 0) height = 1;   // To prevent divide by zero
          float aspect = (float)width / height;

          // Set the viewport (display area) to cover the entire window
          gl.glViewport(0, 0, width, height);

          // Setup perspective projection, with aspect ratio matches viewport
          gl.glMatrixMode(GL10.GL_PROJECTION); // Select projection matrix
          gl.glLoadIdentity();                 // Reset projection matrix
          // Use perspective projection
          GLU.gluPerspective(gl, 45, aspect, 0.1f, 100.f);

          gl.glMatrixMode(GL10.GL_MODELVIEW);  // Select model-view matrix
          gl.glLoadIdentity();                 // Reset

          // You OpenGL|ES display re-sizing code here
          // ......
       }

   // Call back to draw the current frame.

   public void onDrawFrame(GL10 gl) {

      //get number of objects
      Log.d(TAG, "getting number");
      number = GVariables.getNumberOfObjects();
      Log.d(TAG, "number got");
      // Clear color and depth buffers
      gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

      if(scene == 1)
      {
         for(int i = 0; i < number; i++)
         {
              // ----- Render the Cube -----
              gl.glLoadIdentity();                  // Reset the current model-view matrix
              gl.glTranslatef((-3 + (3*i)), 0.0f, z);   // Translate into the screen
              gl.glRotatef(angleX, 1.0f, 0.0f, 0.0f); // Rotate (NEW)
              gl.glRotatef(angleY, 0.0f, 1.0f, 0.0f); // Rotate (NEW)
              gl.glScalef(0.8f, 0.8f, 0.8f);
              cube.draw(gl);
          }
      }
      if(scene == 0)
      {
          for(int i = 0; i < number; i++)
          {
              gl.glLoadIdentity();
              gl.glTranslatef((-3 + (3*i)), 0.0f, z);
              gl.glRotatef(angleX, 1.0f, 0.0f, 0.0f); // Rotate (NEW)
              gl.glRotatef(angleY, 0.0f, 1.0f, 0.0f); // Rotate (NEW)
              gl.glScalef(0.8f, 0.8f, 0.8f);
              cube1.draw(gl);
          }
      }
      if(scene == 2)
      {
          gl.glLoadIdentity();
          gl.glTranslatef(0.0f, 0.0f, z);
          gl.glRotatef(angleX, 1.0f, 0.0f, 0.0f); // Rotate (NEW)
          gl.glRotatef(angleY, 0.0f, 1.0f, 0.0f); // Rotate (NEW)
          gl.glScalef(1.0f, 1.0f, 1.0f);
          skybox.draw(gl);
      }

      // Update the rotational angle after each refresh (NEW)
      angleX += speedX;  
      angleY += speedY;  
   }
} 
```

如果你需要它 MainActivity

```
package com.dissertation.dnativeapp;

import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.util.Log;

public class MainActivity extends Activity {
    private static final String TAG = MainActivity.class.getSimpleName();
    int scene;
    int number;
     /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        scene = 0;
        Button basic = (Button) findViewById(R.id.Basic_Button);
        Button textured = (Button) findViewById(R.id.Textured_Button);
        Button complicated = (Button) findViewById(R.id.Complicated_Button);
        final CheckBox cb1 = (CheckBox) findViewById(R.id.checkBox1);
        final CheckBox cb2 = (CheckBox) findViewById(R.id.checkBox2);
        final CheckBox cb3 = (CheckBox) findViewById(R.id.checkBox3);

        cb1.setOnCheckedChangeListener(new OnCheckedChangeListener()
        {

            public void onCheckedChanged(CompoundButton buttonView,
                    boolean isChecked) 
            {
                cb2.setChecked(false);
                cb3.setChecked(false);

            }

        });

        cb2.setOnCheckedChangeListener(new OnCheckedChangeListener()
        {
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
            {
                cb1.setChecked(false);
                cb3.setChecked(false);
            }
        });

        cb3.setOnCheckedChangeListener(new OnCheckedChangeListener()
        {
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
            {
                cb1.setChecked(false);
                cb2.setChecked(false);
            }
        });

        basic.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                if(cb1.isChecked())
                {
                    GVariables.setNumberOfObjects(1);
                }
                else if(cb2.isChecked())
                {
                    GVariables.setNumberOfObjects(2);
                }
                else if(cb3.isChecked())
                {
                    GVariables.setNumberOfObjects(3);
                }
                else
                {
                    GVariables.setNumberOfObjects(1);
                }
                scene = 0;
                GVariables.setScene(scene);
                Intent myIntent = new Intent(view.getContext(), MyGLActivity.class);

                startActivityForResult(myIntent, 0);
            }

        });

        textured.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                if(cb1.isChecked())
                {
                    GVariables.setNumberOfObjects(1);
                }
                else if(cb2.isChecked())
                {
                    GVariables.setNumberOfObjects(2);
                }
                else if(cb3.isChecked())
                {
                    GVariables.setNumberOfObjects(3);
                }
                else
                {
                    GVariables.setNumberOfObjects(1);
                }
                scene = 1;
                GVariables.setScene(scene);
                Intent myIntent = new Intent(v.getContext(), MyGLActivity.class);

                startActivityForResult(myIntent, 0);
            }
        });

        complicated.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                scene = 2;
                GVariables.setScene(scene);
                Intent myIntent = new Intent(v.getContext(), MyGLActivity.class);
                startActivityForResult(myIntent, 0);
            }
        });

    }
} 
```

- 编辑我不能发布图像，但天空盒的白脸

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T10:59:35.873

我不太确定，但可能是您缺少纹理的设置参数：

```
gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_NEAREST);
gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR); 
```

在创建纹理时（在每次“绑定”调用之后）在“for”循环中。

无论如何，你发布了太多代码来阅读这个......

# javascript - 使用的智能替代方案 Web Worker 中的方法？

> ID：13567070
> 
> 赞同：1
> 
> 时间：2012-11-26T14:40:03.363
> 
> 标签：javascript, canvas, web, web-worker

我正在尝试提高这个 JS 热图库的绘制速度：

[http://www.patrick-wied.at/static/heatmapjs/](http://www.patrick-wied.at/static/heatmapjs/)

为了让动画发挥作用。其工作原理的简化版本——它将所有数据点（在`<canvas>`从未插入 DOM 的数据点上）绘制为圆——所有的半径都相同，但 alpha 值不同：

```
ctx.shadowColor = ('rgba(255,0,0,'+((count)?(count/me.store.max):'0.1')+')');
ctx.beginPath();
ctx.arc(x - 1000, y - 1000, radius, 0, Math.PI * 2, true);
ctx.closePath();
ctx.fill(); 
```

一旦它们全部绘制完毕，它就会`getImageData()`在该画布上运行，根据 alpha 为每个像素着色，然后在页面`putImageData()`上显示的最终`<canvas>`结果上对其进行处理。

毫不奇怪，该操作中最密集的部分是绘图部分。我希望能够将该责任委托给网络工作者，这样我就可以提前渲染未来的帧，而不会影响浏览器中的 FPS。但是网络工作者没有 DOM 访问权限，也不能创建`<canvas>`标签。有人对解决这个问题有什么好主意吗？有没有什么方法可以在没有画布标签的情况下计算这些像素阿尔法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T00:16:02.403

~~不幸的是，目前不可能将任何 DOM 或其他不可转移的对象（例如画布）传递给 Web Worker。~~

但是，您可以将图像数据传递给工作人员。工作人员可以操作数据以模拟使用渐变等生成阴影，然后将其传递回 putImageData()-ing。不过，我不确定那会有多有趣。我知道我在模仿当前产品时遇到了困难。但是，如果您打算委派给工作人员，这是我目前的建议。

编辑：在一段艰难的时期，我的意思是[这个](http://crzyman.byethost8.com/heatmap/)。

再次编辑：我知道这确实落后了，但您也可以通过仅抓住可能受到影响的区域来节省一些时间，而不是抓住并更换整个画布。

~~再次编辑：没试过，但如果你可以在工作人员中制作画布，你可以向它发送指令，让它绘制，然后发回图像~~

编辑 2022-02-15：[你现在可以这样做](https://stackoverflow.com/questions/1864756/web-workers-and-canvas)

# json - Facebook 提要 - 限制退回的金额

> ID：13567071
> 
> 赞同：2
> 
> 时间：2012-11-26T14:40:07.710
> 
> 标签：json, facebook, rss

我正在使用链接[https://www.facebook.com/feeds/page.php?format=json&id=](https://www.facebook.com/feeds/page.php?format=json&id=)返回 Facebook 页面上最新更新的 JSON 对象。我只对最新的更新感兴趣。有没有办法我只能检索最新的而不检索 N 旧的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T22:11:28.417

您最好使用 Graph API 上的[Page](https://developers.facebook.com/docs/reference/api/page/)对象来提取此类数据。

如果您只想通过页面本身发布帖子，那么您想要

[https://graph.facebook.com/PAGE_ID/posts?limit=1&access_token=ACCESS_TOKEN_HERE](https://graph.facebook.com/PAGE_ID/posts?limit=1&access_token=ACCESS_TOKEN_HERE)

如果您想要最新的帖子，无论是页面还是粉丝，那么您想要

[https://graph.facebook.com/PAGE_ID/feed?limit=1&access_token=ACCESS_TOKEN_HERE](https://graph.facebook.com/PAGE_ID/feed?limit=1&access_token=ACCESS_TOKEN_HERE)

# android - ffmpeg 给 vcodec 两个参数

> ID：13567074
> 
> 赞同：-2
> 
> 时间：2012-11-26T14:40:17.060
> 
> 标签：android, iphone, ffmpeg, command, codec

下面是 ffmpeg 命令将静止图像转换为视频，每张图像延迟 5 秒。

```
ffmpeg -f image2 -r 1/5 -i img%03d.png -vcodec libx264 out.mp4 
```

这个命令工作正常。我只是想知道，是否可以为*-vcodec*加上两个参数，以及*libx264*，我还想使用*H264*，以使该视频即使在 i-phone 上也能正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T22:22:55.913

除非您想要两个不同的输出，否则添加另一个`-vcodec`没有意义。其次，`h264`是ffmpeg中H.264解码器的名称。如果您构建的 ffmpeg 支持`libx264`，那么`h264`用作编码器只是 ; 的别名`libx264`。否则 ffmpeg 将报告`Unknown encoder 'h264'`。

Apple 设备支持不同的 H.264 配置文件，具体取决于型号。为了广泛的兼容性，只需添加以下作为输出选项：

`-profile:v baseline -level 30`

* * *

请注意，ffmpeg 使用问题更适合 superuser.com。Stack Overflow 仅限于编程讨论。

# menu - IE 中的 Wordpress 主菜单颜色不同，带有石墨烯主题

> ID：13567075
> 
> 赞同：0
> 
> 时间：2012-11-26T14:39:07.143
> 
> 标签：menu, themes, css

与 IE 相比，我的网站在 firefox/chrome 中看起来不同

![Chrome 和 Firefox 都很好](../Images/bd12d65d3d6acad2d23c9c965d8cd1c2.png)

即看起来像这样，在悬停/活动状态上应用了一些奇怪而丑陋的蓝色黑色渐变。

![IE正在拾取一些神秘的渐变](../Images/6f4606bca097ef70ee08f0c137181c76.png)

如何消除跨浏览器不一致？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:16:03.713

wp-content/theme-head.php

从顶部菜单颜色数组中删除了以下行

```
-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorStr=\'%1$s\', EndColorStr=\'%2$s\')"; 
```

# javascript - 如何仅从一个输入字段添加？

> ID：13567077
> 
> 赞同：0
> 
> 时间：2012-11-26T14:40:23.967
> 
> 标签：javascript, jquery, html

我希望能够只添加您单击的文章，而不是每个。我可以用什么代替`.each`它来工作？

这些是功能：

*计算总价*：

```
var quantity, price, sum = 0;
function calculatePrice() {
    //loop through product "blocks"
    $('.articel').each(function() {
        price = $(this).children('.price').val();
        quantity = $(this).children('.quantity').val();
        //Add price to sum if number
        if (!isNaN(price) && !isNaN(quantity)) {
            sum += price * quantity;                                
        }
    });
    //Update Price
    $('#totalprice').html('<h4>Total price: ' + sum + '$</h4>');
} 
```

*加入购物车：*

```
$(document).ready(function(){                                                                   
    $(".articel input[type='button']").click(function(){ //sätter klickfunktion på klassen artikels knapp
        var price = $(this).siblings('.price').attr("value");
        var quantity = $(this).siblings('.quantity').attr("value");
        if(quantity % 1 != 0)
        {
            alert("You must add a whole number");
        }
        else if(quantity <= 0)
        {
            alert("You must att a whole number");
        }
        else
        {
            var name = $(this).siblings("input[name='prodname']").attr("value");
            var ul = document.getElementById("buylist"); 
            var totalprice = quantity * price;
            var prod = name + " x " + quantity + "= " + totalprice + "$";

            var el = document.createElement("li"); //skapar ett nytt element
            el.innerHTML = prod; //variabeln prod läggs IN i nya elementet
            ul.appendChild(el); //sätt IN el i ul
            calculatePrice();
        }
    });
}); 
```

这是我的表格：

```
<div id="moviescat_view" style="display:none">
    <h2>Movies</h2>
    <br><button onclick="backButton(moviescat_view);" class="btn">Go back</button><br>
    <img border="0" id="img/hoverover.jpg" src="img/1_1.jpg" alt="The walking dead" onmouseover="mouseOverImage(this)" onmouseout="mouseOutImage(this)" onClick="addtoCart()">
    </form>
    <br><button onclick="showInfo(set1);" class="btn">Show info</button><br>
    <h4>The walking dead</h4>
    <p>Price : 30$</p>
    <div id="set1" style="display:none">
        <p>A serie about zombies</p>
    </div>
    <form class="articel">
    Quantity: <input type="number" style="width:30px;" class="quantity"><br>
    Add to cart: <input type="button" class="btn">
    <input type="hidden" value="30" name="price" class="price">
    <input type="hidden" value="The walking dead" name="prodname">
    </form>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T14:45:29.757

您应该将属性传递给

```
calculatePrice(); 
```

即价格和数量，然后在函数内执行完全相同的操作：

```
 function calculatePrice(price, quantity) {
         //Add price to sum if number
         if (!isNaN(price) && !isNaN(quantity)) {
             sum += price * quantity;
         }
         $('#totalprice').html('<h4>Total price: ' + sum + '$</h4>');
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T14:57:08.250

就像乔恩说的......传入你需要的属性或对象。

```
$(document).ready(function(){                                                                   
    $(".articel input[type='button']").click(function(){ 
        //...
        calculatePrice($(this)); //$(this) would be the clicked DOM element
    });
});
function calculatePrice(element) {

        price = element.children('.price').val();
        quantity = element.children('.quantity').val();
        //Add price to sum if number
        if (!isNaN(price) && !isNaN(quantity)) {
            sum += price * quantity;                                
        }
    //Update Price
    $('#totalprice').html('<h4>Total price: ' + sum + '$</h4>');
} 
```

# clojure - 单段命名空间有什么问题？

> ID：13567078
> 
> 赞同：24
> 
> 时间：2012-11-26T14:40:40.017
> 
> 标签：clojure, namespaces

我在几个地方读到了 clojure 中不鼓励使用单段命名空间。

事实上，我见过的几乎每个库都有 (require 'lib.core) 而不是 (require 'lib)。

为什么？

* * *

编辑：我有点傻。对于单个段命名空间可能是一件坏事的简明示例，将给予额外的奖励。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-26T15:42:40.930

Java 不鼓励使用默认包，因为您不能从任何其他包中引用其中的任何内容。如果您预编译一个单段 Clojure 命名空间，您将在默认包中获得一个 Java 类。如果任何人在任何时候都想从 Java 中使用你的库，他会被这种琐碎的事情阻止得死去活来。由于没有充分的理由支持使用单段命名空间，并且有一个明确的理由不这样做，因此可以公平地说，在 Clojure 中不鼓励使用单段命名空间。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-26T14:44:46.820

单段命名空间存在 Java 互操作问题。有些事情可能会以意想不到的方式破裂。另请参阅[https://groups.google.com/forum/?fromgroups=#!topic/clojure/gOffhotk25Y](https://groups.google.com/forum/?fromgroups=#!topic/clojure/gOffhotk25Y)

# list - 在 F# 中创建具有多个浮点测量单位的列表

> ID：13567081
> 
> 赞同：1
> 
> 时间：2012-11-26T14:40:45.720
> 
> 标签：list, f#, units-of-measurement

所以，我试图以各种方式解决这个问题，但我就是无法做到这一点。

有没有办法制作一个包含不同测量单位值的列表（全部基于浮点数）？例如：

```
let myList = [0.07<ms>; 0.9; 7.2<mm>;] 
```

由于它们被视为不同的类型，因此您不能将它们放在同一个列表中。我尝试将列表声明为`let myList : float<_> list = ...`，并为无量纲数字提供一个度量单位，但我仍然遇到输入错误：期待 float<'u> 但得到了浮动。

我无法使用元组/n-ple，因为我不知道列表中的值的数量。

我对 F# 很陌生，并且花了很长时间在存储上搜索文档和 Web，但还没有找到解决方案。如果有人能指出我正确的方向，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T15:17:44.043

我认为你需要给出一个更长的例子来说明你想如何使用这个列表。否则很难给出一个好的答案，因为这取决于用途。

如果您只想创建一个代表不同事物的数字列表，那么您可以考虑使用有区别的联合来区分它们：

```
type Numeric =
  | Length of float<mm>
  | Time of float<ms>
  | Unitless of float

let myList = [ Time 0.07<ms>; Unitless 0.9; Length 7.2<mm>;] 
```

然后您可以创建一个包含不同数字（具有不同物理含义）的列表。遍历列表时，您需要使用模式匹配来提取值。

或者，您可以在创建列表时删除所有单位，但随后您将失去计量单位提供的保证（这意味着当您从列表中获得一些值时，您将不知道它有什么单位并且您可以解释它错）：

```
let myList = [ float 0.07<ms>; 0.9; float 7.2<mm>;] 
```

您还可以使用[F# 库，让您在运行时跟踪单元](http://trelford.com/blog/post/Runtime-Units-of-Measure-for-F.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T15:01:22.257

列表的所有成员[必须具有相同的类型](http://msdn.microsoft.com/en-us/library/dd233224.aspx)。A`float<ms>`与 a 不同`float<mm>`。

# iphone - 按钮的层次结构使 UITableViewCells 变白

> ID：13567084
> 
> 赞同：0
> 
> 时间：2012-11-26T14:40:57.463
> 
> 标签：iphone, objective-c, ipad

我正在为在线应用程序构建后端。它由一个`UITableView`带有单元格的大单元格组成，每个单元格显示一本书的标题、作者和两个按钮，一个“确认交付”按钮和一个“问题”按钮。当用户单击确认交付时，它会显示`UIAlertView`确认/取消。如果得到确认，它会发出一个 POST`HTTP`请求（告诉 Web 应用程序已成功找到该书并将其提供给用户），并从`TableView`. 如果他们点击问题按钮，同样的事情会发生，但会告诉网络应用程序一些错误（'没有库存'、'用户没有收到书就离开了'、'其他人'）。

我的问题是正确分配职责。我创建了一个“单元”子类，`UITableViewCell`其中包含一个`order_id`属性、作者和标题标签的出口以及两个`IBActions`（来自确认和错误按钮）。让单元格负责包含每个订单的数据，执行`HTTPRequest`然后从 中删除自己是否正确`UITableView`？这对我来说听起来不对，因为我将模型内容放入视图中。

然后我考虑使用协议，但那时我对责任、谁应该遵守协议等感到困惑。

那么，你们怎么看？我是否应该让`UITableViewCell`模型工作，`MVC`为了保持简单而打破？谁应该遵守点击确认/取消按钮时触发的协议？

# c++ - 损坏的双链表错误

> ID：13567087
> 
> 赞同：2
> 
> 时间：2012-11-26T14:40:59.947
> 
> 标签：c++, qt, constructor, datamember

我正在研究制作物理动画的 Qt/OpenGL gui。我尝试使用`mousePressEvent`和`mouseMoveEvent`功能进行旋转。

为此，我尝试`QPoint lasPos`为鼠标位置添加数据成员。但我不知道为什么我在执行时收到以下错误：

```
*** glibc detected *** ./YourGalaxy: corrupted double-linked list: 0x0000000001682a00 ***
======= Backtrace: =========
/lib/libc.so.6(+0x71bd6)[0x7f665940ebd6]
... 
```

这是 GLWidget.hpp ：

```
#ifndef GLWIDGET_H
#define GLWIDGET_H

#include <QGLShaderProgram>
#include <QGLWidget>
#include <QPoint>
#include <QTimer>
#include "NBody.hpp"
#include "Timer.h"

 class GLWidget : public QGLWidget
 {
     Q_OBJECT

 public:

     GLWidget(QWidget *parent = NULL);

     ~GLWidget();

     NBody *Galaxy;
     float m_particleRadius;
     float m_pointScale;
     QPoint lastPos;
     GLubyte *textureImage;
     GLuint texture;
     Timer timer;
     GLuint m_program;
     QTimer *m_timer;
     int count;
     double n_fps;

     GLuint _compileProgram(const char *source);
     void LoadGLTextures();
     void createVBO(uint size);
     void draw();
     void printStats();
     void zoom_scale(double factor);

 protected :

     void initializeGL();
     void mousePressEvent(QMouseEvent *event);
     void mouseMoveEvent(QMouseEvent *event);

 private slots:

     void processCurrent();

 private:

     int w_width;
     int w_height;
     GLfloat g_nearPlane;
     GLfloat g_farPlane;
     char** stats;

 };

 #endif 
```

和 GLWidget.cpp 中的构造函数：

```
GLWidget::GLWidget(QWidget *parent) : QGLWidget(parent) {

    char *my_argv[] = { "NBody", NULL };
    int   my_argc = 1;
    int status;
    m_particleRadius = 0.5f;
    m_pointScale = 100.0f;
    w_width = 600;
    w_height = 600;
    g_nearPlane = 0.1f;
    g_farPlane = 1000.0f;
    count = 0;
    n_fps = 0.0;

    stats = new char* [3] ;
    for( int i = 0 ; i < 3 ; i++ )
        stats[i] = new char[10];

   Galaxy = new NBody("OpenCL NBody");

   if (Galaxy->initialize() != SDK_SUCCESS)
      cout << "NBody initialize error" << endl;

   if (Galaxy->parseCommandLine(my_argc, my_argv) != SDK_SUCCESS)
      cout << "NBody parseCommand error" << endl;

   status = Galaxy->setup();
   if (status != SDK_SUCCESS)
      cout << "NBody setup error" << endl;

   status = Galaxy->run();  
   if(status != SDK_SUCCESS)
      cout << "Sample Run Program Failed" << endl; 

    setFormat(QGLFormat(QGL::DoubleBuffer | QGL::DepthBuffer));

    timer.start();
    m_timer = new QTimer(this);
    connect(m_timer, SIGNAL(timeout()), this, SLOT(processCurrent()));
    m_timer->start(0);  
 } 
```

但是，当我分配一个新`GLWidget`对象时，因为`lastPos`是一个“静态”变量，所以应该没有动态内存错误。

我尝试放入`lastPos`私有数据成员，但问题仍然存在。

谁能解释我怎么了？

编辑1：回溯给出：

```
(gdb) bt
#0  0x00007ffff53501b5 in raise () from /lib/libc.so.6
#1  0x00007ffff5352fc0 in abort () from /lib/libc.so.6
#2  0x00007ffff538637b in ?? () from /lib/libc.so.6
#3  0x00007ffff538fbd6 in ?? () from /lib/libc.so.6
#4  0x00007ffff539004d in ?? () from /lib/libc.so.6
#5  0x00007ffff5392354 in ?? () from /lib/libc.so.6
#6  0x00007ffff5394a30 in malloc () from /lib/libc.so.6
#7  0x00007fffee75edec in ?? () from /usr/lib/dri/fglrx_dri.so
#8  0x00007fffee876c2f in ?? () from /usr/lib/dri/fglrx_dri.so
#9  0x00007fffee8e4e2b in ?? () from /usr/lib/dri/fglrx_dri.so
#10 0x00007fffee8e5436 in ?? () from /usr/lib/dri/fglrx_dri.so
#11 0x00007fffee879ff2 in ?? () from /usr/lib/dri/fglrx_dri.so
#12 0x00007fffee87cf94 in ?? () from /usr/lib/dri/fglrx_dri.so
#13 0x00007fffee87d0d6 in ?? () from /usr/lib/dri/fglrx_dri.so
#14 0x00007fffee614610 in ?? () from /usr/lib/dri/fglrx_dri.so
#15 0x00007fffee620783 in ?? () from /usr/lib/dri/fglrx_dri.so
#16 0x00007fffee621477 in ?? () from /usr/lib/dri/fglrx_dri.so
#17 0x00007fffee621825 in ?? () from /usr/lib/dri/fglrx_dri.so
#18 0x00007fffed98d07e in ?? () from /usr/lib/dri/fglrx_dri.so
#19 0x0000000000409164 in GLWidget::draw() ()
#20 0x0000000000409d15 in GLWidget::processCurrent() ()
#21 0x00000000004209b0 in GLWidget::qt_metacall(QMetaObject::Call, int, void**) ()
#22 0x00007ffff6d9e1f7 in QMetaObject::activate(QObject*, QMetaObject const*, int, void**) () from /usr/lib/libQtCore.so.4
#23 0x00007ffff6d97889 in QObject::event(QEvent*) () from /usr/lib/libQtCore.so.4
#24 0x00007ffff72bf4ac in QApplicationPrivate::notify_helper(QObject*, QEvent*) () from /usr/lib/libQtGui.so.4
#25 0x00007ffff72c5e4d in QApplication::notify(QObject*, QEvent*) () from /usr/lib/libQtGui.so.4
#26 0x00007ffff6d864fc in QCoreApplication::notifyInternal(QObject*, QEvent*) () from /usr/lib/libQtCore.so.4
#27 0x00007ffff6db588e in ?? () from /usr/lib/libQtCore.so.4
#28 0x00007ffff6db28f4 in ?? () from /usr/lib/libQtCore.so.4
#29 0x00007ffff47bd6f2 in g_main_context_dispatch () from /lib/libglib-2.0.so.0
#30 0x00007ffff47c1568 in ?? () from /lib/libglib-2.0.so.0
#31 0x00007ffff47c171c in g_main_context_iteration () from /lib/libglib-2.0.so.0
#32 0x00007ffff6db25e3 in QEventDispatcherGlib::processEvents(QFlags<QEventLoop::ProcessEventsFlag>) () from /usr/lib/libQtCore.so.4
#33 0x00007ffff73721fe in ?? () from /usr/lib/libQtGui.so.4
#34 0x00007ffff6d85222 in QEventLoop::processEvents(QFlags<QEventLoop::ProcessEventsFlag>) () from /usr/lib/libQtCore.so.4
#35 0x00007ffff6d8560c in QEventLoop::exec(QFlags<QEventLoop::ProcessEventsFlag>) () from /usr/lib/libQtCore.so.4
#36 0x00007ffff6d896db in QCoreApplication::exec() () from /usr/lib/libQtCore.so.4
#37 0x000000000040b311 in main () 
```

编辑2：这是绘图功能：

```
 void GLWidget::draw()
{
   glClearColor(0.0 ,0.0, 0.0, 0.0);
   glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    if (Galaxy->isFirstLaunch)
        {
        glViewport(0, 0, w_width, w_height);
        glMatrixMode(GL_PROJECTION);
        glLoadIdentity();
        gluPerspective(45.0f, (float)w_width / w_height, g_nearPlane, g_farPlane);
        glMatrixMode(GL_MODELVIEW);
        gluLookAt (0.0, 0.0, 3.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0);
    glScalef(0.03f, 0.03f, 0.03f);
    }
    glEnable(GL_POINT_SPRITE);
    glTexEnvi(GL_POINT_SPRITE, GL_COORD_REPLACE, GL_TRUE);
    glEnable(GL_VERTEX_PROGRAM_POINT_SIZE_NV);

    glEnable(GL_BLEND);
    glBlendFunc (GL_SRC_ALPHA, GL_ONE);    

        glUseProgram(m_program);
        glUniform1f( glGetUniformLocation(m_program, "pointRadius"), m_particleRadius );
        glUniform1f( glGetUniformLocation(m_program, "pointScale"),m_pointScale);  

        GLuint vbo_disk;

        glBindBuffer(GL_ARRAY_BUFFER, vbo_disk);
        glVertexPointer(4, GL_DOUBLE, 4*sizeof(double), Galaxy->pos);
        glEnableClientState(GL_VERTEX_ARRAY);

        glColor4f(1.0f, 1.0f, 1.0f, 0.2f);
        glDrawArrays(GL_POINTS, 0, Galaxy->getNumParticles_disk());

       glBindBuffer(GL_ARRAY_BUFFER, 0);
        glDisableClientState(GL_VERTEX_ARRAY);

    GLuint vbo_halo;

        glBindBuffer(GL_ARRAY_BUFFER, vbo_halo);
        glVertexPointer(4, GL_DOUBLE, 4*sizeof(double), &Galaxy->pos[Galaxy->getNumParticles_disk()]);
        glEnableClientState(GL_VERTEX_ARRAY);

        glColor4f(0.0f, 0.0f, 1.0f, 0.2f);
        glDrawArrays(GL_POINTS, 0, Galaxy->getNumParticles_halo());

        glBindBuffer(GL_ARRAY_BUFFER, 0);
        glDisableClientState(GL_VERTEX_ARRAY); 

        glDisable(GL_BLEND);        
    glDisable(GL_POINT_SPRITE);
} 
```

# python - 缩放复杂的numpy数组的实部

> ID：13567089
> 
> 赞同：4
> 
> 时间：2012-11-26T14:41:11.533
> 
> 标签：python, numpy, complex-numbers

我有一个复数向量（FFT 的结果），我想通过另一个向量中的因子仅缩放复数的实部。

### 例子

```
cplxarr= np.array([1+2j, 3+1j, 7-2j])
factarr= np.array([.5, .6, .2])
# desired result of cplxarr * factarr :
# np.array([.5+2j 1.8+1j 1.4-2j]) 
```

（是的，这是关于人类听觉频率响应在一个非常特定的设置。）
显然，与上述向量的乘法也缩放了虚部。

我该如何设置`factarr`以及我必须执行哪些操作才能达到预期的结果？如果可能的话，也就是说，无需分离实部和虚部，缩放实部并重新组装为新的复数向量。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T14:44:02.673

这会做到：

```
>>> factarr*cplxarr.real + (1j)*cplxarr.imag
array([ 0.5+2.j,  1.8+1.j,  1.4-2.j]) 
```

不确定这是否是最好的方法。

* * *

事实证明，至少对我来说（OS-X 10.5.8，python 2.7.3，numpy 1.6.2）这个版本大约是另一个版本的两倍，它使用`np.vectorize`：

```
>>> from timeit import timeit
>>> timeit('factarr*cplxarr.real+(1j)*cplxarr.imag',setup='from __main__ import factarr,cplxarr')
21.008132934570312
>>> timeit('f(cplxarr.real * factarr, cplxarr.imag)',setup='from __main__ import factarr,cplxarr; import numpy as np; f=np.vectorize(np.complex)')
46.52931499481201 
```

`np.complex`python使用和`complex`提供之间似乎没有太大区别：

```
>>> timeit('f(cplxarr.real * factarr, cplxarr.imag)',setup='from __main__ import  factarr,cplxarr; import numpy as np; f=np.vectorize(complex)')
44.87726283073425 
```

* * *

**时序表中的当前领导者**（由 eryksun 在下面的评论中提出）

```
>>> timeit.timeit('a = cplxarr.copy(); a.real *= factarr ',setup='from __main__ import factarr,cplxarr')
8.336654901504517 
```

并证明它有效：

```
>>> a = cplxarr.copy()
>>> a.real *= factarr 
>>> a
array([ 0.5+2.j,  1.8+1.j,  1.4-2.j]) 
```

如果您想就地执行操作，这显然会更快（因此可以关闭副本）。

# objective-c - 当我尝试在 NSTableView 上注册双击事件时出现延迟

> ID：13567092
> 
> 赞同：1
> 
> 时间：2012-11-26T14:41:15.967
> 
> 标签：objective-c, macos, cocoa, double-click

我在此表中有 NSTableView 和 NSView 使用作为单元格。这个 NSView 有 3 个 NSTextFields。

当我尝试选择其中一个 NSTextFields 时，它们的响应速度非常快。但是如果我添加一些代码来注册 NSTableView 上的双击事件，就会出现延迟。因此，当我单击文本字段时，它会思考半秒钟然后激活它。但是没有注册双击事件就没有这样的延迟。

我的代码：

```
-(void)awakeFromNib{
    [tasksList setDoubleAction:@selector(doubleClickInTable:)];
    [tasksList setTarget:self];

}

-(void)doubleClickInTable:(id)sender
{
    //Don't matter, it can be empty.

} 
```

# java - 使用 SourceMethod 确定方法的签名

> ID：13567097
> 
> 赞同：1
> 
> 时间：2012-11-26T14:41:24.730
> 
> 标签：java, eclipse-plugin

在我的 Eclipse 插件中，我想从 SourceMethod 对象中获取方法的签名。SourceMethod 有一个名为 getSignature 的方法，它返回以下形式的字符串：

(一)五

使用这个链接 [http://www.rgagnon.com/javadetails/java-0286.html](http://www.rgagnon.com/javadetails/java-0286.html) 我知道如何解析这个字符串。它是一个以 Integer 作为参数并以 void 作为返回类型的方法。但是，我问自己是否没有更好的方法来获取方法签名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:05:54.107

看看 org.eclipse.jdt.core.Signature 类，它提供了编码/解码方法签名字符串的方法。

# java - 如何正确链接？

> ID：13567098
> 
> 赞同：0
> 
> 时间：2012-11-26T14:41:24.780
> 
> 标签：java, jsp, spring-mvc

在我的网页中，我在这样的菜单中有一个链接

```
<a href="system/home">Home</a> 
```

正确的页面是`localhost:8080/mySite/system/home`

现在的问题是当我在其他页面上时 `localhost:8080/mySite/system/users/create`

并尝试单击它指向我的主页链接

```
localhost:8080/system/users/system/home 
```

这是错误的。我可以始终正确地将其指向当前打开页面的位置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:44:02.763

使用 url 标签

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>

<c:url var="home" value="/system/home"/>

<a href="${home}"> 
```

# c# - System.Web.HttpServer 是否适用于 ASP.Net WebAPI 单元测试？

> ID：13567100
> 
> 赞同：2
> 
> 时间：2012-11-26T14:41:30.240
> 
> 标签：c#, .net, asp.net-mvc, asp.net-web-api

我一直在研究对 ASP.Net WebAPI 项目进行单元测试。显然，我可以根据它返回的数据轻松测试控制器 Get 方法，但是我正在测试诸如标头之类的东西。

我以前使用过 NancyFX，它提供了一个很好的干净测试功能，即使没有设置客户端/服务器，也可以返回正确的 HTTP 响应。

我在 WebAPI 中看到的替代方法是使用 HttpServer 和 HttpConfiguration 在内存中运行服务器。

如果我这样做，我想知道是否有人知道它的性能。如果它不是那么好，那么不幸的是它变成了一个集成测试。

简单的场景，我想测试响应头内容类型。如果没有内存配置，我不确定您如何在 WebAPI 中进行测试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:51:42.753

我在 1 秒内运行了 80 个测试。我认为性能是足够的。

注意：如果您没有将 api 测试托管在与控制器本身相同的项目中，您将需要覆盖控制器的创建。我使用 StructureMap 依赖解析器来执行此操作，该解析器也实现了`IHttpControllerActivator`接口，因此控制器是从容器中解析出来的，而不是默认的激活器。

# opencv - OpenCV + Linux + 严重支持的相机 = 错误的像素格式

> ID：13567104
> 
> 赞同：0
> 
> 时间：2012-11-26T14:41:36.740
> 
> 标签：opencv, webcam

我正在尝试使用 OpenCV 从网络摄像头中抓取帧。我也试过“奶酪”。两者都给了我一个非常奇怪的画面：扭曲的、错误的颜色。使用 mplayer 我能够找出正确的编解码器“yuy2”。甚至 mplayer 有时也会选择错误的编解码器（“yuv”），这使得它看起来就像使用 OpenCV / cheese 捕获图像一样。

我可以以某种方式告诉 OpenCV 使用哪个编解码器吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:37:53.463

在最新版本的opencv中，您可以使用与视频相同的fourcc样式代码设置相机的捕获格式。见[http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html#videocapture](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html#videocapture)

它可能仍然需要一些试错，像 YUV、YUYV、YUY2 这样的术语在相机制造商、驱动程序制造商、操作系统、directshow 层和 opencv 中使用得有点松散！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-14T12:17:07.260

OpenCV 自动选择第一个可用的捕获后端[（参见此处）](https://docs.opencv.org/3.3.0/d0/da7/videoio_overview.html)。可能是它没有自动使用 V4L2。

如果从源代码构建，`-D WITH_V4L=ON`也设置两者。`-D WITH_LIBV4L=ON`

为了设置要使用的像素格式，请设置`CAP_PROP_FOURCC`捕获的属性：

```
 capture = cv2.VideoCapture(self.cam_id, cv2.CAP_V4L2)
  scapture.set(cv2.CAP_PROP_FOURCC, cv2.VideoWriter_fourcc('M', 'J', 'P', 'G'))
  width = 1920
  height = 1080
  capture.set(cv2.CAP_PROP_FRAME_WIDTH, width)
  capture.set(cv2.CAP_PROP_FRAME_HEIGHT, height) 
```

# entity-framework - 返回要使用的 EntityObject

> ID：13567106
> 
> 赞同：0
> 
> 时间：2012-11-26T14:41:40.240
> 
> 标签：entity-framework

我不确定是否应该直接使用`EntityObject`，或者是否应该使用 som 包装器方法来选择、更新和删除 EntityObjects？我想使用最后一个选项，但我真的不知道如何返回 an `EntityObject`（所以我仍然可以调用`context.SaveChanges();`）而不是例如 a `List<Worker>`（这很愚蠢，因为我无法更改列表中的 Workers然后轻松地将更改提交到数据库。

例如，我有一张`Worker`桌子。我可以通过使用我的上下文得到一个工人：

```
var worker = context.Worker.Where(w => w.WorkerID == 1).FirstOrDefault(); 
```

或者，我可以创建一个包装器方法：

```
public static RETURNTYPE GetWorkerByID(int id, context)
{
    var worker = context.Worker.Where(w => w.WorkerID == 1).FirstOrDefault();
    return worker;
} 
```

如果我仍然希望使用上下文（允许我更改数据），我应该使用哪种返回类型？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:38:08.763

如果您制作包装类型，您将无法再将其与上下文一起使用。使用包装器意味着您的返回类型将表示从实体对象填充的新实例，当您将该实例推回时，您将再次需要创建/填充实体对象以使用。

您是否考虑过使用 POCO（仅限 EF 4.0 和更新版本）？这将解决您的问题，因为有`EntityObject`基类。

# git - 在 master 和 branch 上工作

> ID：13567108
> 
> 赞同：-1
> 
> 时间：2012-11-26T14:41:54.107
> 
> 标签：git, git-branch

我创建了一个分支，但似乎它取代了主人。我在我的文件夹中看不到分支的文件。基本上，master 和 branch 似乎是同一个文件，就像一行一样。但是我想创建一个分支，然后我想在分支和主控上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:46:46.867

用于`git checkout`在两个分支之间切换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T21:48:18.840

当您创建一个新分支时，您实际上会创建一个 master 分支的克隆以单独工作。如果你运行“git branch”，你可以看到你所有的分支，带星号的是你当前的分支。因此，您可以使用“git checkout BRANCHNAME”在不同的分支之间移动并独立工作。

# c#-4.0 - Replace numbers in a string

> ID：13567112
> 
> 赞同：0
> 
> 时间：2012-11-26T14:42:05.577
> 
> 标签：c#-4.0

I Have some text file. theses texts contain a string like this(a part of text):

```
<abbr class="word p1"">dd</abbr>
<img src"D:\Images\1.png">
<abbr class="word p1">dd</abbr>
<img src"D:\ticket\t\1.png"> 
```

In each text file,(`D:\Images\1.png) png` name is different but it is always numbers(from 1 to 114)for example(1,2,3,10,...)

I want to replace this text `D:\Images\[number].png` with a specific text for expample:

```
string newtext=Replace("D:\Images\[number].png","Something"); 
```

How can i do this? thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T14:46:35.287

Use a regular expression:

```
string newtext = Regex.Replace(text, @"(D:\\Images\\)\d+(.png)","$1Something$2"); 
```

It will replace the full match, including `D:\Images\` and `.png`, so `$1` and `$2` puts back what's caught by the parentheses, so that `Somthing` only replaces the digits.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T14:45:12.353

Use regular expressions that are represented mostly be the *Regex* class. See these links:

[http://www.codeproject.com/Articles/93804/Using-Regular-Expressions-in-C-NET](http://www.codeproject.com/Articles/93804/Using-Regular-Expressions-in-C-NET)

[http://msdn.microsoft.com/en-us/library/ms228595%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms228595%28v=vs.80%29.aspx)

# ruby-on-rails - Omniauth “与” STI 并设计

> ID：13567113
> 
> 赞同：2
> 
> 时间：2012-11-26T14:42:08.787
> 
> 标签：ruby-on-rails, devise, omniauth

我想通了，没有结果。我有一个名为 User 的模型和带有 STI 粉丝和艺术家的模型，如下所示：

```
class User < ActiveRecord::Base
    devise :database_authenticatable, :registerable, :confirmable, :lockable,
     :recoverable, :rememberable, :trackable, :validatable, **:omniauthable**
end 
```

和我的其他模特

```
Class Artist < User end
Class Fan < User end 
```

我的路线

```
devise_for :users
devise_for :artists
devise_for :fans 
```

我在尝试运行我的服务器或其他任何东西时遇到了这个错误

```
Wrong OmniAuth configuration. If you are getting this exception, it means that either:

1) You are manually setting OmniAuth.config.path_prefix and it doesn't match the Devise one
2) You are setting :omniauthable in more than one model
3) You changed your Devise routes/OmniAuth setting and haven't restarted your server 
```

我的应用程序很先进，不想回去重构它，任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T19:41:57.177

答案可以在[这里](https://github.com/plataformatec/devise/issues/1927#issuecomment-6392174)找到。

由于您需要`devise_for`三种不同的模型，而其中一种正在使用该`omniauthable`模块，因此设计变得混乱了。

任何一个：

1.  删除`devise_for`除`:users`.

2.  或者`omniauthable`从用户模型中删除模块，创建自己的omniauth 路由并通过将omniauth 配置移动到新文件中来停止使用devise 的中间件。所以，而不是在`devise.rb`：

    ```
    Devise.setup do |config|
      config.omniauth :twitter, ENV['TWITTER_KEY'], ENV['TWITTER_SECRET']
    end 
    ```

    你现在在你的新文件中有这个`omniauth.rb`：

    ```
    Rails.application.config.middleware.use OmniAuth::Builder do
      provider :twitter, ENV['TWITTER_KEY'], ENV['TWITTER_SECRET']
    end 
    ```

    [简单 OmniAuth 上的 Railscast](http://railscasts.com/episodes/241-simple-omniauth)应该可以帮助您进行设置。

# python - 从 twitter 数据转储中解析 json

> ID：13567116
> 
> 赞同：0
> 
> 时间：2012-11-26T14:42:18.180
> 
> 标签：python, json, twitter

我收到了我想解析的 Twitter 数据转储，最好使用 Python（开始）。我没有创建 JSON，也不熟悉`StatusJSONImpl`,`UserJSONImpl`和`UserMentionEntityJSONImpl`指令。我该如何解析它？我必须先“清理”它还是可以`json`（或类似的模块）弄清楚它？

使用`json.loads(s)`下面的字符串 as `s`，我得到`ValueError: No JSON object could be decoded`

```
StatusJSONImpl {
    createdAt = Tue Sep 20 08: 31: 28 CST 2011,
    id = 115946140620435456,
    text = 'RT @williamsanches: 4? Dica: Sonhe sempre. Deus acredita no cora??o que sonha!',
    source = 'web',
    isTruncated = false,
    inReplyToStatusId = -1,
    inReplyToUserId = -1,
    isFavorited = false,
    inReplyToScreenName = 'null',
    geoLocation = null,
    place = null,
    retweetCount = 3,
    wasRetweetedByMe = false,
    contributors = null,
    annotations = null,
    retweetedStatus = StatusJSONImpl {
        createdAt = Tue Sep 20 08: 29: 50 CST 2011,
        id = 115945729465401344,
        text = '4? Dica: Sonhe sempre. Deus acredita no cora??o que sonha!',
        source = 'web',
        isTruncated = false,
        inReplyToStatusId = -1,
        inReplyToUserId = -1,
        isFavorited = false,
        inReplyToScreenName = 'null',
        geoLocation = null,
        place = null,
        retweetCount = 3,
        wasRetweetedByMe = false,
        contributors = null,
        annotations = null,
        retweetedStatus = null,
        userMentionEntities = [],
        urlEntities = [],
        hashtagEntities = [],
        user = UserJSONImpl {
            id = 54728012, name = 'William_Sanches', screenName = 'williamsanches', location = '', description = 'Professor Universitário, escritor e palestrante.', isContributorsEnabled = false, profileImageUrl = 'http://a1.twimg.com/profile_images/1533016174/msn_normal.jpg', profileImageUrlHttps = 'https://si0.twimg.com/profile_images/1533016174/msn_normal.jpg', url = 'http://www.williamsanches.com.br', isProtected = false, followersCount = 10905, status = null, profileBackgroundColor = 'EDECE9', profileTextColor = '634047', profileLinkColor = '088253', profileSidebarFillColor = 'c7c7c7', profileSidebarBorderColor = 'D3D2CF', profileUseBackgroundImage = true, showAllInlineMedia = false, friendsCount = 232, createdAt = Wed Jul 08 07: 56: 17 CST 2009,
            favouritesCount = 1,
            utcOffset = -14400,
            timeZone = 'Santiago',
            profileBackgroundImageUrl = 'http://a3.twimg.com/profile_background_images/125874404/tela-william-sanches.jpg',
            profileBackgroundImageUrlHttps = 'https://si0.twimg.com/profile_background_images/125874404/tela-william-sanches.jpg',
            profileBackgroundTiled = false,
            lang = 'es',
            statusesCount = 7499,
            isGeoEnabled = false,
            isVerified = false,
            translator = false,
            listedCount = 130,
            isFollowRequestSent = false
        }
    },
    userMentionEntities = [UserMentionEntityJSONImpl {
        start = 3, end = 18, name = 'William_Sanches', screenName = 'williamsanches', id = 54728012}],
    urlEntities = [],
    hashtagEntities = [],
    user = UserJSONImpl {
        id = 170132028, name = 'Andrezza Santiago', screenName = 'andrezzasancar', location = '', description = 'Uma pessoa que ama a vida e vive pra ser amada.Ama acima de tudo a DEUS,sua familia e seus amigos! Alguém alegre e de bem com a vida.', isContributorsEnabled = false, profileImageUrl = 'http://a1.twimg.com/profile_images/1505208968/DSC_0414_normal.JPG', profileImageUrlHttps = 'https://si0.twimg.com/profile_images/1505208968/DSC_0414_normal.JPG', url = 'null', isProtected = false, followersCount = 64, status = null, profileBackgroundColor = '642D8B', profileTextColor = '3D1957', profileLinkColor = 'FF0000', profileSidebarFillColor = '7AC3EE', profileSidebarBorderColor = '65B0DA', profileUseBackgroundImage = true, showAllInlineMedia = false, friendsCount = 330, createdAt = Sat Jul 24 09: 02: 05 CST 2010,
        favouritesCount = 0,
        utcOffset = -14400,
        timeZone = 'Santiago',
        profileBackgroundImageUrl = 'http://a0.twimg.com/profile_background_images/321379737/images__2_.jpg',
        profileBackgroundImageUrlHttps = 'https://si0.twimg.com/profile_background_images/321379737/images__2_.jpg',
        profileBackgroundTiled = true,
        lang = 'pt',
        statusesCount = 3129,
        isGeoEnabled = true,
        isVerified = false,
        translator = false,
        listedCount = 20,
        isFollowRequestSent = false
    }
}​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:33:13.390

假设您有一个格式正确的 JSON 对象，这可以解决问题：

```
import json

data = json.loads(json_object)
data.get('ids') 
```

其中 'json_object' 是 Twitter API 输出的 JSON。'data' 现在是 json_object 的字典表示。

# url - 自定义 URL 协议的 Inno Setup 注册表项

> ID：13567119
> 
> 赞同：9
> 
> 时间：2012-11-26T14:42:22.483
> 
> 标签：url, protocols, inno-setup

我希望有人可以帮助我将以下内容翻译成格式正确的 InnoSetup [Registry] 条目，以便在我的 InnoSetup 安装程序中使用？这里的目标是在用户的机器上创建一个新的自定义 URL 协议。

```
HKEY_CLASSES_ROOT      
       ctp
          (Default) = "URL:Alert Protocol"
          URL Protocol = ""
          DefaultIcon
               (Default) = "myapp.exe"
          shell
               open
                    command
                         (Default) = "C:\Program Files\MyApp\myapp.exe" 
```

我通读了 InnoSetup 帮助文档，但无法弄清楚如何将上述内容转换为适当的 InnoSetup Registry 部分：

```
[Registry]
Root: HKCR; Subkey: ".....etc. 
```

安装程序运行后的最终结果是用户单击格式为“ctp://myapp.exe”的网站上的链接，本地应用程序将在用户计算机上启动。我正确地接近这个吗？非常感谢您的任何回复。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-26T14:58:45.223

试试这种方式：

```
[Registry]
Root: HKCR; Subkey: "ctp"; ValueType: "string"; ValueData: "URL:Custom Protocol"; Flags: uninsdeletekey
Root: HKCR; Subkey: "ctp"; ValueType: "string"; ValueName: "URL Protocol"; ValueData: ""
Root: HKCR; Subkey: "ctp\DefaultIcon"; ValueType: "string"; ValueData: "{app}\YourApp.exe,0"
Root: HKCR; Subkey: "ctp\shell\open\command"; ValueType: "string"; ValueData: """{app}\YourApp.exe"" ""%1""" 
```

# c++ - 多重继承冲突

> ID：13567120
> 
> 赞同：2
> 
> 时间：2012-11-26T14:42:24.730
> 
> 标签：c++, polymorphism, virtual, multiple-inheritance, abstract

我有以下代码：

```
class Interface
{
  virtual void method()=0;
};

class Base : public Interface
{
  virtual void method()
  {
    //implementation here
  }
};

class Parent: public Interface
{

};

class Child : public Base, public Parent
{

};

int main()
{
  Child c;//ERROR: cannot instantiate abstract class
} 
```

现在我知道为什么会这样了，因为我继承了 Parent 然后我必须再次实现方法。但它已经在基类中定义了，我不想为每个子类覆盖该定义。我认为在 C++ 中有一些标准的方法可以摆脱它（告诉编译器应该使用哪个接口副本）我只是不记得它是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T14:58:18.570

你所说的叫做[支配](http://en.wikipedia.org/wiki/Dominance_%28C++%29)。

从链接的文章：

```
class Parent
{
public:
    virtual void function();
};

class Child1 : public virtual Parent
{
public:
    void function();
};

class Child2 : public virtual Parent
{
};

class Grandchild : public Child1, public Child2
{
public:
    Grandchild()
    {
        function();
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T14:59:35.380

您有一个菱形的层次结构，但没有使用虚拟继承。

结果，您最终在您的类中得到了两个不同的虚`method()`函数。`Child`

解决它的一种方法是转向使用虚拟继承。这样你就只有一个`Child::method()`，不需要两个实现。

# parsing - 如何在 Groovy 中解析文本

> ID：13567122
> 
> 赞同：0
> 
> 时间：2012-11-26T14:42:28.147
> 
> 标签：parsing, text, groovy, functional-programming

我需要解析文本（svn 命令的输出）以检索数字（svn 修订版）。这是我的代码。请注意，我需要将所有输出流作为文本检索以执行其他操作。

```
def proc = cmdLine.execute()                 // Call *execute* on the strin
proc.waitFor()                               // Wait for the command to finish
def output = proc.in.text 
```

//这里发生的其他事情

```
output.eachLine {
    line ->
    def revisionPrefix = "Last Changed Rev: "
    if (line.startsWith(revisionPrefix)) res = new Integer(line.substring(revisionPrefix.length()).trim())
} 
```

这段代码运行良好，但由于我还是 Groovy 的新手，我想知道是否有更好的惯用方法来避免丑陋的 if...

svn 输出示例（当然问题更普遍）

```
Path: .
Working Copy Root Path: /svn
URL: svn+ssh://svn.company.com/opt/svnserve/repos/project/trunk
Repository Root: svn+ssh://svn.company.com/opt/svnserve/repos
Repository UUID: 516c549e-805d-4d3d-bafa-98aea39579ae
Revision: 25447
Node Kind: directory
Schedule: normal
Last Changed Author: ubi
Last Changed Rev: 25362
Last Changed Date: 2012-11-22 10:27:00 +0000 (Thu, 22 Nov 2012) 
```

我从下面的答案中得到灵感，我使用 find() 解决了。我的解决方案是：

```
def revisionPrefix = "Last Changed Rev: "
def line = output.readLines().find { line -> line.startsWith(revisionPrefix) }
def res = new Integer(line?.substring(revisionPrefix.length())?.trim()?:"0") 
```

3行，没有如果，很干净

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:54:30.427

一种可能的选择是：

```
def output = cmdLine.execute().text
Integer res = output.readLines().findResult { line ->
  (line =~ /^Last Changed Rev: (\d+)$/).with { m ->
    if( m.matches() ) {
      m[ 0 ][ 1 ] as Integer
    }
  }
} 
```

不确定它好还是不好。我相信其他人会有不同的选择

### 编辑：

另外，请注意使用`proc.text`. 如果你的 proc 输出了很多东西，那么当输入流变满时你最终可能会阻塞......

这是一个被大量评论的替代方案，使用`consumeProcessOutput`：

```
// Run the command
String output = cmdLine.execute().with { proc ->

  // Then, with a StringWriter
  new StringWriter().with { sw ->

    // Consume the output of the process
    proc.consumeProcessOutput( sw, System.err )

    // Make sure we worked
    assert proc.waitFor() == 0

    // Return the output (goes into `output` var)
    sw.toString()
  }
}

// Extract the version from by looking through all the lines
Integer version = output.readLines().findResult { line ->

  // Pass the line through a regular expression
  (line =~ /Last Changed Rev: (\d+)/).with { m ->

    // And if it matches
    if( m.matches() ) {

      // Return the \d+ part as an Integer
      m[ 0 ][ 1 ] as Integer
    }
  }
} 
```

# cuda - 是否可以对 CUDA 内核进行即时 (jit) 编译？

> ID：13567123
> 
> 赞同：5
> 
> 时间：2012-11-26T14:42:33.500
> 
> 标签：cuda, jit

CUDA 是否支持 CUDA 内核的 JIT 编译？

我知道 OpenCL 提供了这个功能。

我有一些在运行时不会更改的变量（即仅取决于输入文件），因此我想在内核编译时（即在运行时）用宏定义这些值。

如果我在编译时手动定义这些值，我的寄存器使用量会从 53 下降到 46，这大大提高了性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-12T11:01:10.713

它随 cuda 7.0 的 nvrtc 库提供。通过这个库，您可以在运行时编译您的 cuda 代码。

[http://devblogs.nvidia.com/parallelforall/cuda-7-release-candidate-feature-overview/](http://devblogs.nvidia.com/parallelforall/cuda-7-release-candidate-feature-overview/)

但是你可以获得什么样的优势？在我看来，我找不到动态编译的这么多显着优势。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T17:29:29.440

如果您使用 Python 可行，您可以使用出色的[pycuda](http://mathema.tician.de/software/pycuda)模块在运行时编译您的内核。结合诸如[Mako](http://www.makotemplates.org/)之类的模板引擎，您将拥有一个非常强大的元编程环境，它允许您动态调整内核以适应您可以使用的任何架构和特定设备属性（显然有些事情很难做到完全动态和自动）。

您还可以考虑只维护几个具有不同参数的不同版本的内核，您的程序可以在运行时根据您提供给它的任何输入在它们之间进行选择。

# selenium - 硒框架

> ID：13567128
> 
> 赞同：1
> 
> 时间：2012-11-26T14:42:57.447
> 
> 标签：selenium, webdriver

我在选择框架中的项目时遇到问题。我到达了某个点，然后它失败了。我尝试了很多选项，但无济于事，下面是代码。我进入第一帧，然后：

```
selenium.open("http://localhost/Clockwise/Main.htm");
// grabs back to driver
WebDriver driver = ((WebDriverBackedSelenium) selenium).getWrappedDriver(); 
driver.switchTo().frame("MainFrame");
//selenium.selectFrame("MainFrame");
driver.findElement(By.xpath("//li[contains(.,'Reports')]")).click();
//selenium.click("//li[contains(.,'Reports')]")  

driver.findElement(By.xpath("//li[contains(.,'Reports')]")).click();
driver.findElement(By.xpath("//li[contains(.,'Reports')]"));

Thread.sleep(3000);

//FAILS HERE
driver.findElement(By.id("SELECTALL2")).click(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T15:16:11.440

在 iframe 中完成操作/操作后，您需要切换回主窗口或默认内容

```
driver.switchTo().frame("frame");
driver.findElement(By.id("test")).click();
driver.switchTo().defaultContent();
driver.findElement(By.id("SELECTALL2")).click(); 
```

您错过了上述代码中的第三条语句。

# testing - 是否可以在 EasyMock 中使用 andStubReturn 而无需 replay()

> ID：13567142
> 
> 赞同：0
> 
> 时间：2012-11-26T14:43:33.233
> 
> 标签：testing, easymock

好吧，问题与标题相同。

我的目标示例，

```
Order order = createNiceMock(Order.class);
Products products = createNiceMock(Products.class);
expect(myDomain.getOrder()).andStubReturn(order);
replay(myDomain);
expect(myDomain.getOrder().getProducts()).andSubReturn(products); 
```

我认为这是处理我的测试域的好方法。问题是我不想使用重播来执行`myDomain.getOrder()`. 是否可以在没有重播的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T21:04:09.170

我认为你想要做的是：

```
Order order = createNiceMock(Order.class);
Products products = createNiceMock(Products.class);
expect(myDomain.getOrder()).andStubReturn(order);
expect(order.getProducts()).andSubReturn(products);
replay(myDomain, order); 
```

# mongodb - 在 MongoDB 中的 MapReduce 中计算行

> ID：13567143
> 
> 赞同：0
> 
> 时间：2012-11-26T14:43:36.337
> 
> 标签：mongodb

我创建了以下 Map Reduce 并遇到了一些奇怪的事情。我以两种不同的方式计算每个日期的文档数量并得出不同的值。这是我的功能：

```
map : function Map() {
    emit(
        this.cDate,//Holds a date value
        {
        count: 1, 
        }
    );
}

reduce : function Reduce(key, values) {
    var reduced = {count:0,count1:0};
    values.forEach(function(val) {
        reduced.count += val.count; 
        reduced.count1++;
    });

return reduced;
}

finalize : function Finalize(key, reduced) {
    return reduced;
}

query : { "cDate" : { "$gte" : ISODate("2012-11-20T00:00:00Z") } }

out : { inline : 1 } 
```

所以基本上奇怪的是最后“count”和“count1”返回不同的值。“count”具有正确的值，即该日期的文档数，而“count1”的值要低得多。谁能解释一下（我是 MongoDB 新手，所以使用简单的术语 :-) 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:49:28.283

两个问题（实际上是同一个问题）：

*   您的发出格式*必须*与您在发出函数中返回的结果相同。

*   您的 reduce 必须准备好为同一个键多次调用（即，如果您为一个键减少五个值，然后为一个键减少三个值，则可能会再次调用 reduce 函数以减少前两个 reduce 操作的结果.

您的示例只是演示了如果您假设您将始终减少结果“1”而不是实际先前发出*或*减少的结果会发生什么。

参考： [http ://www.mongodb.org/display/DOCS/MapReduce#MapReduce-ReduceFunction](http://www.mongodb.org/display/DOCS/MapReduce#MapReduce-ReduceFunction)

# objective-c - 如何知道另一个界面中的网络活动是否完整？

> ID：13567146
> 
> 赞同：0
> 
> 时间：2012-11-26T14:43:45.390
> 
> 标签：objective-c, ios, xcode

我有一些带有实现和头文件的 Objective-C 类。一个类，它的子类`AppDelegate`，有一个方法，如下所示，使用 API 调用获取数据：

```
@implementation API
    - (NSMutableData *)set:(NSString *) API
    {     
    NSURLRequest *request = [NSURLRequest requestWithURL:
                                 [NSURL URLWithString:GETString]];
    self.connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    } 
```

我还有一些类，它们是 的子类`UIViewController`，我从这里调用如下：

```
- (void)viewWillAppear:(BOOL)animated
{
API *theInstance = [[API alloc] init];
    [theInstance set:@"&get=different&call=getAPIMethods"];
} 
```

现在我想从扩展类方法中获取**响应数据**`- (void)connectionDidFinishLoading:(NSURLConnection *)connection``UIViewController``- (void)viewDidAppear:(BOOL)animated`

我怎样才能得到回报**`NSMutableData`**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:26:08.293

作为委托的对象`NSURLConnection`将需要采用该`NSURLConnectionDelegate`协议。委托对象将需要实现协议方法`connection:didReceiveData:`以保存接收到的数据。当连接完成时，`connectionDidFinishLoading:`会被调用。此时，您将需要与`UIViewController`数据进行通信。最简单的方法是发送一个`NSNotification`.

# javascript - 如何独立于父可见性检查元素可见性（jQuery 与否）

> ID：13567154
> 
> 赞同：4
> 
> 时间：2012-11-26T14:44:14.393
> 
> 标签：javascript, jquery

我的第一个问题，所以请耐心等待。我有一个容器，其中包含不同数量的子元素，如下所示：

```
<div class="parent">
    <div class="element">content</div>
    <div class="element">content</div>
    <div class="element">content</div>
</div> 
```

**快速问题：** 是否有 jQuery 或纯 JS 方法来检查`element`容器是否可见，而与可见性无关`parent`？

单纯求

```
jQuery('.parent .element:visible').length 
```

不起作用。**_**

**背景：**容器`parent`可以切换，子`element`s的内容通过ajax请求获取并在响应到达时填充。在我收到的每个响应中，子容器都会获得指示响应类型的特定类，例如`available`，`unavailable`等等。所以生成的 DOM 可能如下所示：

```
<div class="parent">
    <div class="element available">content</div>
    <div class="element unavailable">content</div>
    <div class="element unavailable">content</div>
</div> 
```

这是一个模块，多次与不同的 CSS 文件一起使用。所以我不控制 CSS 实现是否真的隐藏`unavailable`元素，因为这仅在 CSS 中完成。而且容器可以打开，但不是必须的。但是我必须知道容器内部是否会有可见元素而不打开它。这可能吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T15:00:59.997

如果您有可用或不可用的课程，我不确定为什么需要这样做。但这就是我的做法（因此实际能见度不会干扰孩子的能见度）：

```
if (
    $('.element').css('display') != 'none' && 
    $('.element').css('visibility') != 'hidden'
) {
    // ...
} 
```

在行动：

[http://jsfiddle.net/EbaMY/2/](http://jsfiddle.net/EbaMY/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T14:56:42.487

这不是最好的答案，但我认为它应该有效

```
 if ($('.parent').is(':visible')) {
        $('.element:visible')....//what you want to do
    }else{
       $('.parent').show()
       $('.element:visible')...//what you want to do again
       $('.parent').hide()
    } 
```

# java - com.mysql.jdbc.MysqlDataTruncation：数据截断：列“column_name”的数据太长

> ID：13567155
> 
> 赞同：22
> 
> 时间：2012-11-26T14:44:17.040
> 
> 标签：java, mysql, truncation

我将 Java JDBC 与 MySQL 一起使用，但出现此错误：

```
com.mysql.jdbc.MysqlDataTruncation: Data truncation: 
Data too long for column 'column_name' 
```

我该如何纠正这个错误？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2017-06-04T13:16:20.647

当我将图像文件作为字节插入数据库中时，我在 Spring Boot Data JPA 应用程序中遇到了同样的问题，它给了我同样的错误。

经过多次研发，我找到了如下解决方案。

我在 application.properties 文件中添加了以下行并解决了该问题

```
spring.datasource.url=jdbc:mysql://localhost:3306/conweb?sessionVariables=sql_mode='NO_ENGINE_SUBSTITUTION'&jdbcCompliantTruncation=false 
```

希望它对某人有帮助。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-08-08T20:29:58.243

**如何在 mysql 终端中重现此错误：**

```
mysql> create table penguins(val CHAR(2));
Query OK, 0 rows affected (0.08 sec)

mysql> insert into penguins values("AB");
Query OK, 1 row affected (0.00 sec)

mysql> insert into penguins values("ABC");
Query OK, 1 row affected, 1 warning (0.01 sec)

mysql> show warnings;
+---------+------+------------------------------------------+
| Level   | Code | Message                                  |
+---------+------+------------------------------------------+
| Warning | 1265 | Data truncated for column 'val' at row 1 |
+---------+------+------------------------------------------+
1 row in set (0.00 sec) 
```

这是您遇到的错误，但是在 MySQL 终端中将其显示为警告并仍然插入您的行，只是默默地截断它。

MySQL JDBC 没有那么宽容，并且会吐出一个硬错误并且不会插入该行。

**2 解决方案**

要么增加您要插入的数据类型的容量，要么减少您放入其中的内容的大小。

**增加列大小的图例：**

```
If you are using   then use this
-----------------  --------------
smallint           int
int                long
TEXT               LONGTEXT
LONGTEXT           CLOB
CLOB               Store the content to disk, and save the filename in the db. 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-26T15:03:14.363

这似乎很明显，而且确实如此。您显然试图插入或更新行，其“column_name”列的值大于该列的值。

例如，如果它是 CHAR 或 VARCHAR，则您的字符串可能比定义的列大小长。

您解决此问题的选择也有些明显 - 要么确保您存储的数据不大于列（可能通过在存储它们之前截断更长的字符串），或者增加数据库列的大小。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-02-16T10:47:30.383

在上传 Image/Word/PDF 文件时，我在 Spring Boot 应用程序中遇到了同样的问题，并通过以下步骤修复了它：

**解决方案**

1.  请查看您尝试上传的文件的大小。
2.  然后将该文件大小与映射的数据库字段类型允许的最大大小进行比较。
3.  例如对于 LOB：
    TINYBLOB ≈ 255 字节，BLOB ≈ 64KB，MEDIUMBLOB ≈ 16MB 和 LONGBLOB ≈ 4GB 运行
4.  根据您的空间要求使用 Alter table 命令：

    *ALTER TABLE 'TABLE_NAME' MODIFY 'FIELD_NAME' MEDIUMBLOB;*

    **注意：**始终建议在数据库中保存链接而不是实际文件（具有大尺寸）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-11-29T06:29:32.550

在我的情况下，上传的数据包含引号（'和“）。这就是为什么我得到你上面提到的同样的异常。删除数据中的引号后成功插入到表中。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-04-21T20:47:29.933

我建议你使用 Spring Boot 和 Hibernate。我遇到了同样的问题，解决方案非常明显：

```
 @Column(length = 65555)
    @NotNull
    private String content; 
```

我也尝试了以下行，但这不知何故没有显示出任何效果：

```
@Size(min = 5, max = 65555) 
```

我认为这可能会发生，因为 MySQL 表大小有默认约束，`@Size`如果输入的值不在定义的范围内，Annotation 仅用于向用户反馈。我希望这可以解决您的问题！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-06-06T13:01:55.207

出现此错误是因为您尝试插入列的数据大小太大。

解决方案 - 将列大小更改为最大。假设您的列是 VARCHAR 类型，然后在 mySQL

```
ALTER TABLE table_name CHANGE COLUMN col_name col_name  VARCHAR(1000);  //assuming 1000 is enough 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-07-04T07:52:19.937

对于那些偶然发现这里的人来说，类似错误可能还有另一个原因：

**存储过程参数的类型可能是一个限制因素。**

例如：您具有相应的列数据类型，并且将数据作为 LONGTEXT 发送到 MySQL 服务器，而您发送 LONGTEXT 数据的存储过程的参数可能具有 TEXT 类型。在这种情况下，您需要更新参数数据类型

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-02-26T10:55:32.720

在 JPA 实体中，使用带有长度的注释 @Column。那应该可以解决问题。

示例代码：

```
@Entity
public class SampleEntity{

    @Column(length = 1200)
    private String column_name;

    // ...

} 
```

根据您的喜好设置长度，它将在表中变为**VARCHAR(length)**。如果您提供更大的值，它将被创建为**longtext**。

久经考验 - 创建 sql 脚本显示如下：

```
CREATE TABLE `SampleEntity` (
  `id` bigint(20) NOT NULL,
  `dateCreated` datetime DEFAULT NULL,
  `dateModified` datetime DEFAULT NULL,
  `column_name` longtext,
  `userName` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

参考 - [https://www.baeldung.com/jpa-size-length-column-differences](https://www.baeldung.com/jpa-size-length-column-differences)

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2021-02-03T05:45:48.683

在我们的例子中，只需重新启动应用程序即可解决问题，重新启动是指重新启动 tomcat。任何想法是否可能由于其他原因而发生此问题，但会像这样抛出错误。

# c# - 如何在 Windows 8 Metro 应用程序中打开托管的 PDF？

> ID：13567156
> 
> 赞同：2
> 
> 时间：2012-11-26T14:44:19.207
> 
> 标签：c#, .net, xaml, webview, windows-8

我在服务器上托管了一个 PDF。我需要在应用程序内部打开而不必离开它并转到网络浏览器并且永远无法返回到我的上一个页面。它在 webview 控件中可行吗？webview 中的链接正常打开，但无法打开如下链接： [http ://www.interstatecontainer.com/x/example.pdf！](http://www.interstatecontainer.com/x/example.pdf)那么有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:17:01.680

您可以使用文件存储和启动在 Windows 8 媒体查看器中打开它，这是唯一的方法，在应用程序内没有可用的功能！

# java - 从属于同一类的另一个对象访问对象的属性

> ID：13567158
> 
> 赞同：0
> 
> 时间：2012-11-26T14:44:33.937
> 
> 标签：java, oop

嗨，我在 OOP 方面不是很好，对不起，如果有人问过同样的问题。现在我在从另一个对象访问一个对象的属性时遇到问题，其中两个对象都属于一个对象

```
public abstract class GameClient (){  
protected ClientRegistry registry;  
..   
}

public class MarketClient extends GameClient {   
public Auctioneer auctioneer = null;  
public Specialist specialist;  
...  
((GenericDoubleAuctioneer) auctioneer).setRegistry((MarketRegistry) registry);
specialist = registry.addSpecialist(clientId);  
}

public class Specialist extends AccountHolder() {  
public Specialist(final String id) {
        this(id, null);  
...   
}

public interface Auctioneer extends QuoteProvider (){  
public MarketRegistry getRegistry();  
public List configuration  
...  }

  public class DailyAssessmentReport(){  
protected void calculateProfits() {  
final Specialist specialists[] = GameController.getInstance().getRegistry().getSpecialists();  
//later, I'll get the ID of each specialist from specialists[];  
...  
...  
public Map< specialistID, List, Score> Result;  
//this Map contains specialistID , auctioneer.configuration, score  
} 
```

我想做的是制作一个包含（specialistID、auctioneer.configuration、profit）的MAP。我的问题是如何访问/ `Auctioneer.configuration`从`DailyAssessmentReport`类中获取价值？

我真的很感谢你的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:17:09.723

您可以使用地图，例如 HashMap 来达到您的目的。请注意，映射从一个对象映射到另一个对象。它们不会像您在示例中尝试做的那样从一个对象映射到其他两个对象。但是，您仍然可以通过将两个目标对象存储在一个公共容器对象（例如 ArrayList 或 2 元素数组）中然后映射到容器对象来实现您的目标。例子：

```
HashMap<String, Object[]> specialistIdToContainerObjectMap = new HashMap<String, Object[]>();

// get two objects which should be looked up later through the map, based on specialist ID
Specialist specialist = ...;
Auctioneer auctioneer = ...;

// create container object to hold the two objects to which we want to map
Object[] containerObject = new Object[2];
containerObject[0] = specialist;
containerObject[1] = auctioneer;

// store the container object in the map
specialistIdToContainerObjectMap.put(specialist.getId(), containerObject); 
```

然后，您可以稍后查找容器对象并从中提取两个引用的对象：

```
// get a specialist id from somewhere, e.g. by doing someSpecialist.getId()
String specialistId = ...;

// look up the container object from the map
Object[] containerObject = specialistIdToContainerObjectMap.get(specialistId);

// extract the specialist and the auctioneer from the container object
Specialist specialist = (Specialist) containerObject[0];
Auctioneer auctioneer = (Auctioneer) containerObject[1]; 
```

我希望这可以帮助你。如果不是，例如因为我误解了您的问题，请提供反馈，以便我们尝试为您找到正确的解决方案。

# django - Django：在后台发送电子邮件的最佳方式？

> ID：13567160
> 
> 赞同：6
> 
> 时间：2012-11-26T14:44:38.343
> 
> 标签：django, multithreading, background-process

我正在从 Django 发送电子邮件（使用 Webfaction）。但是，这很慢，所以我想在后台发送电子邮件，即使电子邮件尚未发送，也会向用户返回响应。

有什么想法是最好的方法吗？

我读过关于芹菜的文章，但设置它似乎有很多步骤：http: [//markliu.me/2011/sep/29/django-celery-on-webfaction-using-rabbitmq/](http://markliu.me/2011/sep/29/django-celery-on-webfaction-using-rabbitmq/)没关系，但我想知道这是在尝试之前要走的路。

线程呢？[http://www.artfulcode.net/articles/threading-django/](http://www.artfulcode.net/articles/threading-django/)

还是cron作业？[http://docs.webfaction.com/software/general.html](http://docs.webfaction.com/software/general.html)

其他你有经验吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T15:53:40.543

让我们对可能的解决方案做一个简单的概述：

1.  线程是不好的解决方案 - 因为它们仅在您的响应未发送之前才有效。

2.  Celery - 是标准方式，很容易添加到 django（只需查看有关 django-celery 的大量教程之一，对于您使用数据库作为代理的任务就足够了）

3.  Cron 工作 - 不是真正好的程序员方式，因为您的代码将存储在您的 repo 和系统 crontab 中。所以每次你都应该考虑一下。

4.  另一种方法是使用 Eventlet 或 Gevent 之类的东西。绿色线程将在空闲状态下工作，并且对于您的标准任务 - 很容易添加。缺点： - 你应该对greenlet了解很多，你应该小心greenlet中的错误捕获。

我推荐使用 Celery，因为它现在很容易添加，有很多教程和文档。此外，它会随着您的应用程序轻松成长。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T16:45:11.393

我可能会选择[Python RQ](http://python-rq.org/)。这是 Celery 的一个更简单的替代品，并且非常易于设置和使用。不过，您需要 redis。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T16:00:15.783

取决于您的应用程序的规模。如果计划保持最小和小，线程工作正常，cronjobs 也可以。但是您很快就会想将大量工作委托给后台以加快请求/响应时间。所以，是的，在 webfaction 上设置 celery+rabbit 是一项半复杂的任务（去过那里），但从长远来看，你会节省时间和精力。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T17:08:46.627

我会强烈考虑使用芹菜。它并不像看起来那么复杂，是执行任意异步任务的好工具。但是，有一种简单的方法可以使用 Django 和标准的 cron 作业来处理后台电子邮件。

首先，创建一个 Django 模型来保存要发送的电子邮件。

```
class EmailsToSend(models.Model):
  email = models.Email...
  .
  . 
  . 
```

接下来，创建一个 Django 管理命令来发送未发送的电子邮件。有关如何执行此操作的更多详细信息，请参阅[Django 文档。](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/)此代码为您提供了基本概念。

```
class Command(BaseCommand):

    def handle(self, *args, **options):
        emails = EmailsToSend.objects.all()
        for email in emails:
           send_my_email(email)
           email.delete() 
```

然后，您可以使用 cron 作业安排此命令。但是，我个人更愿意使用 Celery 或类似的东西。前期工作要多一些，但从长远来看是有回报的。

# excel - 多行多列的 Excel 电子表格转换为单列，将 A 列作为键

> ID：13567161
> 
> 赞同：0
> 
> 时间：2012-11-26T14:44:43.327
> 
> 标签：excel, vba

考虑一个表：

```
a       b        c       d
key1   value1   value2   value3
key2   value1a           value3a 
```

我需要把它转换成

```
Key1 Value1
Key1 Value2
Key1 Value3
Key2 Value1a
Key2 
key2 Value3a 
```

此代码用于将所有数据放入单个列中，包括所需的空格，但我需要将第一列保留为键，而且我是 Excel 中的 VBA 新手。

```
 Sub MultiColsToA() 
Dim rCell As Range 
Dim lRows As Long 
Dim lCols As Long 
Dim lCol As Long 
Dim ws As Worksheet 
Dim wsNew As Worksheet 

lCols = Columns.Count 
lRows = Rows.Count 
Set wsNew = Sheets.Add() 

For Each ws In Worksheets 
    With ws 
        For Each rCell In .Range("B1", .Cells(1, lCols).End(xlToLeft)) 
            .Range(rCell, .Cells(lRows, rCell.Column).End(xlUp)).Copy _ 
            wsNew.Cells(lRows, 1).End(xlUp)(2, 1) 
        Next rCell 
    End With 
Next ws 

End Sub 
```

这些表大约有 55 行，12 到 30 列。理想情况下，我还需要以相同的方式转换 20 张左右的表格，因此以编程方式执行此操作将是理想的，可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T15:24:16.823

这是一个基本示例，说明如何使类似的东西正常工作。希望这作为一个概念会有所帮助，您可以进行调整以最适合您的需求：

```
Sub MultiColsToA()

    Dim rCell As Range
    Dim cCell As Range
    Dim iCounter As Integer
    Dim iInner As Integer
    Dim ws As Worksheet
    Dim wsNew As Worksheet

    ' Find the full range of the original sheet (assumes each row
    ' in column A will have a value)
    Set rCell = Range("A1:A" & Range("A1").End(xlDown).Row)
    Set wsNew = Sheets.Add()

    For Each ws In Worksheets
        ' Set our sentinel counter to track the row
        iCounter = 1

        ' Iterate through each cell in the original sheet
        For Each cCell In rCell

          ' This will likely need to be adjusted for you, but
          ' here we set a counter = 1 to the number of columns
          ' the original sheet contains (here 3, but can be changed)
          For iInner = 1 To 3
              With wsNew
                  ' Set the first column = the key and the second the
                  ' proper value from the first sheet
                  .Cells(iCounter, 1).Value = cCell.Value
                  .Cells(iCounter, 2).Value = cCell.Offset(0, iInner).Value
              End With

              ' Increment the sentinel counter
              iCounter = iCounter + 1
          Next iInner
        Next cCell
    Next ws

End Sub 
```

# jquery - Jquery on for future 元素不起作用？

> ID：13567162
> 
> 赞同：6
> 
> 时间：2012-11-26T14:44:44.427
> 
> 标签：jquery, future

我有一个点击功能...

```
$('.rx').children().on('click',function(){alert('got here');}); 
```

我的 div（页面上有 50 个 div 集）...

```
<div class="rx"><div id="'.$data_string.'" class="'.$button_image_class.'"><a  href="#" ></a></div></div> 
```

（每个都是一个 css sprite 图像按钮，它将 id 中的 $data_string 发送到函数“process_me”。对于这个问题，我已经用 alert('got here'); 替换了对 process_me 的调用。仅供参考 $button_image_class是可变的，因为特定图像的加载取决于会员的帐户）

一切都很顺利，直到我使用分页加载更多上述 div（另外 50 个，完全相同的栏 $data_string，无论如何在所有 div 中都不同）。

前 50 个 div 中的精灵图像按钮链接按应有的方式工作 - 单击它们会提示“到达这里”。但是，新加载的 div 集中的链接不起作用。

我首先猜测是因为 DOM 没有拾取新元素，但是 .on('click',function()... 应该拾取未来的元素。所以现在我认为它在

```
$('.rx').children().on('click',function(){alert('got here');}); 
```

我做错了。

有什么突出的地方吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-26T14:50:14.633

不，[`.on`](http://api.jquery.com/on/)只会绑定到现有元素，除非您使用[委托事件](http://api.jquery.com/on/#direct-and-delegated-events)。

**选项1**

`click`在回调中为新添加的元素绑定到事件（**在**元素被添加到 DOM 之后）：

```
$.ajax({
    ...
}).done(function(){
    $('.rx').children().on('click', function() { 
        alert('got here');
    });
}); 
```

**选项 #2**

使用绑定到容器的委托事件：

```
$(document).on('click', '.rx > *', function() { 
    alert('got here');
}); 
```

*注意：您可能希望将选择器中的星号替换为与子元素匹配的实际元素类型或类。应尽可能避免在选择器中使用星号。上面的另一个改进是使用更接近的父`.rx`级而不是直接绑定到`document`*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T14:50:05.043

on() 不是 live() 的别名。它说“将这个未来事件绑定到我指定的元素上我指定的现在存在的这些孩子”

```
$('.rx').on('click', '*', function(){alert('got here');}); 
```

但如果它`<div class="rx...>`是动态创建的整体而不是其中的元素

```
$(document).on('click', '.rx > *', function(){alert('got here');}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T14:50:19.017

您需要使用委托事件。简而言之，您需要为 jquery 指定一个容器元素来“监视”对 DOM 的更改，这意味着 on() 函数的语法略有不同：

```
$('body').children().on('click', '.rx',function(){alert('got here');}); 
```

这意味着它将观察主体（您应该在现实中使用更具体的元素），并找到任何具有“rx”类的元素。现在，当 body 有由 javascript 动态插入的新元素时，它们也会被提醒。

在此处查看[jQuery 文档](http://api.jquery.com/on/#direct-and-delegated-events)以获取完整的详细信息。

# c# - .html 文件扩展名即使设置为重定向也能正常加载

> ID：13567163
> 
> 赞同：0
> 
> 时间：2012-11-26T14:44:44.433
> 
> 标签：c#, asp.net-mvc, file-extension

我的 global.asax 中有以下两行

```
routes.MapRoute("myTest1", "test", new { 
   controller = "Home", action = "Page", id = "Home" 
});
routes.MapRoute("myTest2", "test.html", new {
   controller = "Home", action = "Page", id = "Home" }); 
```

上面的第一行完美运行，并且在本地测试时两行都有效。将它放在我的实时服务器上时出现问题。第二行是 404，其他以 .html 结尾的行也是如此

我真的不明白为什么它在本地工作，而不是在线。

任何建议都会很棒。谢谢

- - 编辑 - -

我查看了 IIS，但我不确定问题出在哪里。我尝试上传一个 html 文件“test.html”并且页面加载完美，即使它设置为重定向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:51:26.780

问题在于一般处理点的方式。看看这两个相关的帖子。

[ASP.NET MVC Url Route 支持（点）](https://stackoverflow.com/questions/9273987/asp-net-mvc-url-route-supporting-dot)

[在 IIS6 上使用十进制路由进行路由](https://stackoverflow.com/questions/7530827/routing-on-iis6-with-decimal-in-route)

# gwt - 将 GWT-RPC-Applicaton 部署到 JBoss AS 7.1.1 时出现 ClassNotFoundException

> ID：13567166
> 
> 赞同：2
> 
> 时间：2012-11-26T14:44:50.877
> 
> 标签：gwt, jboss, gwt-rpc

我有一个 Maven 基础 GWT 应用程序。

当我通过 Maven 编译、构建并将其部署到 JBoss AS 7.1.1 时，我的 GWT-RPC-Service 会出现 ClassNotFoundException。在我包括我部署之前，我可以显示 GWT-Widgets，所以 GWT-Jars 应该在那里......

我的 Maven 依赖项如下所示：

```
<dependency>
  <groupId>com.google.gwt</groupId>
  <artifactId>gwt-dev</artifactId>
  <version>2.5.0</version>
  <scope>compile</scope>
</dependency>
<dependency>
  <groupId>com.google.gwt</groupId>
  <artifactId>gwt-user</artifactId>
  <version>2.5.0</version>
  <scope>compile</scope>
</dependency>
<dependency>
  <groupId>com.google.gwt</groupId>
  <artifactId>gwt-servlet</artifactId>
  <version>2.5.0</version>
  <scope>compile</scope>
</dependency> 
```

我的 EAR 看起来像这样：

```
-myEar.ear
|  |
|  |- core.jar
|
|--|- gwt-ui.war
|  |
|  |-- gwt-ui
|  |   |--  gwt
|  |   |--  sc
|  |   |--  wgt-ui.nocache.js
|  |
|  |-- META-INF
|  |   | (is Empty)
|  |
|  |-- WEB-INF
|  |   |-- classes
|  |   |     |
|  |   |     |- mygwtProj.client
|  |   |     |   |- services
|  |   |     |   |   | - MyService.class
|  |   |     |   |   | - MyServiceAsync.class
|  |   |     |   |- dto
|  |   |     |   |   | - DTO.class
|  |   |     |
|  |   |     |- mygwtProj.server
|  |   |     |   |- MyServiceImpl.class
|  |   |-- deploy
|  |   |-- lib
|  |   |     | (all gwt-jars-files)
|  |   |-- beans.xml
|  |   |-- web.xml 
```

我的服务：

```
import java.util.List;
import com.google.gwt.user.client.rpc.RemoteService;
import com.google.gwt.user.client.rpc.RemoteServiceRelativePath;
import mygwtProj.client.dto.DTO;

@RemoteServiceRelativePath("myService")
public interface ShopService extends RemoteService{
    List<DTO> getAircrafts();
} 
```

我的服务异步

```
import java.util.List;
import com.google.gwt.user.client.rpc.AsyncCallback;
import mygwtProj.client.dto.DTO;

@RemoteServiceRelativePath("myService")
public interface ShopService extends RemoteService{
    void getAircrafts(AsyncCallback<List<DTO>> callback); 
} 
```

我的服务实现

```
import java.util.ArrayList;
import java.util.List;
import com.google.gwt.user.server.rpc.RemoteServiceServlet;
import mygwtProj.client.dto.DTO;
import mygwtProj.client.services.MyService;

public class MyServiceImpl extends RemoteServiceServlet implements MyService {
    private static final long serialVersionUID = 1L;

@Override
public List<DTO> getAircrafts() {

    List<DTO> list = new ArrayList<DTO>(1);
    list.add(new ShopItemDTO(1, "man", "typ", 1.0));
    return list;
}
} 
```

堆栈跟踪：

```
15:28:24,684 WARN  [org.jboss.modules] (MSC service thread 1-6) Failed to define class mygwtProj.server.MyServiceImpl in Module "deployment.myEar.ear.gwt-UI.war:main" from Service Module Loader: java.lang.LinkageError: Failed to link mygwtProj/server/MyServiceImpl (Module "deployment.myEar.ear.gwt-UI.war:main" from Service Module Loader)
at org.jboss.modules.ModuleClassLoader.defineClass(ModuleClassLoader.java:396)
at org.jboss.modules.ModuleClassLoader.loadClassLocal(ModuleClassLoader.java:243)
at org.jboss.modules.ModuleClassLoader$1.loadClassLocal(ModuleClassLoader.java:73)
at org.jboss.modules.Module.loadModuleClass(Module.java:517)
at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:182)
at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
at org.jboss.as.weld.WeldModuleResourceLoader.classForName(WeldModuleResourceLoader.java:68) [jboss-as-weld-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.weld.bootstrap.BeanDeployer.loadClass(BeanDeployer.java:107) [weld-core-1.1.5.AS71.Final.jar:2012-10-12 10:00]
at org.jboss.weld.bootstrap.BeanDeployer.addClass(BeanDeployer.java:77) [weld-core-1.1.5.AS71.Final.jar:2012-10-12 10:00]
at org.jboss.weld.bootstrap.BeanDeployer.addClasses(BeanDeployer.java:135) [weld-core-1.1.5.AS71.Final.jar:2012-10-12 10:00]
at org.jboss.weld.bootstrap.BeanDeployment.createBeans(BeanDeployment.java:184) [weld-core-1.1.5.AS71.Final.jar:2012-10-12 10:00]
at org.jboss.weld.bootstrap.WeldBootstrap.deployBeans(WeldBootstrap.java:349) [weld-core-1.1.5.AS71.Final.jar:2012-10-12 10:00]
at org.jboss.as.weld.WeldContainer.start(WeldContainer.java:82) [jboss-as-weld-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.weld.services.WeldService.start(WeldService.java:76) [jboss-as-weld-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_03]
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_03]
at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_03]
Caused by: java.lang.NoClassDefFoundError: myProj/client/services/MyService
at java.lang.ClassLoader.defineClass1(Native Method) [rt.jar:1.7.0_03]
at java.lang.ClassLoader.defineClass(ClassLoader.java:791) [rt.jar:1.7.0_03]
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142) [rt.jar:1.7.0_03]
at org.jboss.modules.ModuleClassLoader.doDefineOrLoadClass(ModuleClassLoader.java:327)
at org.jboss.modules.ModuleClassLoader.defineClass(ModuleClassLoader.java:391)
... 21 more
Caused by: java.lang.ClassNotFoundException: myProj.client.services.MyService from [Module "deployment.myEar.ear.gwt-UI.war:main" from Service Module Loader]
at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
... 26 more

15:28:24,700 INFO  [org.jboss.weld.ClassLoading] (MSC service thread 1-6) WELD-000119 Not generating any bean definitions from myProj.server.MyServiceImpl because of underlying class loading error
15:28:24,700 INFO  [org.jboss.weld.ClassLoading] (MSC service thread 1-6) catching: org.jboss.weld.resources.spi.ResourceLoadingException: java.lang.ClassNotFoundException: myProj.server.MyServiceImpl from [Module "deployment.myEar.ear.gwt-UI.war:main" from Service Module Loader]
at org.jboss.as.weld.WeldModuleResourceLoader.classForName(WeldModuleResourceLoader.java:74) [jboss-as-weld-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.weld.bootstrap.BeanDeployer.loadClass(BeanDeployer.java:107) [weld-core-1.1.5.AS71.Final.jar:2012-10-12 10:00]
at org.jboss.weld.bootstrap.BeanDeployer.addClass(BeanDeployer.java:77) [weld-core-1.1.5.AS71.Final.jar:2012-10-12 10:00]
at org.jboss.weld.bootstrap.BeanDeployer.addClasses(BeanDeployer.java:135) [weld-core-1.1.5.AS71.Final.jar:2012-10-12 10:00]
at org.jboss.weld.bootstrap.BeanDeployment.createBeans(BeanDeployment.java:184) [weld-core-1.1.5.AS71.Final.jar:2012-10-12 10:00]
at org.jboss.weld.bootstrap.WeldBootstrap.deployBeans(WeldBootstrap.java:349) [weld-core-1.1.5.AS71.Final.jar:2012-10-12 10:00]
at org.jboss.as.weld.WeldContainer.start(WeldContainer.java:82) [jboss-as-weld-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.weld.services.WeldService.start(WeldService.java:76) [jboss-as-weld-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_03]
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_03]
at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_03]
Caused by: java.lang.ClassNotFoundException: myProj.server.MyServiceImpl from [Module "deployment.myEar.ear.gwt-UI.war:main" from Service Module Loader]
at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
at org.jboss.as.weld.WeldModuleResourceLoader.classForName(WeldModuleResourceLoader.java:68) [jboss-as-weld-7.1.1.Final.jar:7.1.1.Final]
... 12 more 
```

有人知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:57:01.053

感谢您的输入。我现在找出问题所在。

是一个愚蠢的错误。在 maven 配置中，我设置 client-Package 中的所有类都不应该包含在包装中，因为它们被编译为 JS。所以这包括我的服务接口......我将它移动到一个新的包共享并将其包含在 gwt.xml 中。

还将 gwt-user 和 gwt-dev 更改为提供的 maven 范围，并将 gwt-servlet 更改为运行时。

使用此配置它可以工作:-)

# php - 警告：dbx：未加载模块“mssql”

> ID：13567167
> 
> 赞同：5
> 
> 时间：2012-11-26T14:44:52.810
> 
> 标签：php, sql-server, database

我正在尝试使用带有 DBX 的 PHP 连接到 MS SQL Server。使用 phpinf()，我可以注意到 dbx 已启用：

```
dbx

dbx support enabled
dbx version 1.0.0
supported databases MySQL ODBC PostgreSQL Microsoft SQL Server FrontBase Oracle 8 (oci8) Sybase-CT. 
```

但是当我尝试连接时，出现此错误：

```
Warning: dbx: module 'mssql' not loaded. 
```

这是代码：

```
dbx_connect("mssql","host","database","user","password"); 
```

有什么办法解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T09:18:58.477

我的建议是*不要*使用 DBX。它是一个死模块，不应该被现代代码使用。

DBX[在版本 5.1](http://php.net/intro.dbx)[**中从标准 PHP**](http://php.net/intro.dbx)中删除。如果您安装了它，这意味着有人不遗余力地将其安装为 PECL 模块，或者您使用的是*非常*旧的 PHP 版本。

在[需求页面上](http://php.net/dbx.requirements)，它指出：

> 为了能够通过 dbx-module 使用数据库，该模块必须链接或加载到 PHP

DBX 支持与 MS SQL Server 通信的唯一模块是*old* [`mssql_`family](http://php.net/ref.mssql)。该扩展[在 Windows PHP 5.3 或更高版本中不再可用](http://php.net/intro.mssql)。

如果您在 Linux 上，并且正在使用操作系统提供的 PHP 版本，您可能能够安装它。寻找`php-mssql`或`php53-mssql`。当您搜索“FreeTDS”的包描述时，它也可能会出现。如果没有可用的软件包，您可能会陷入痛苦的世界。 [编译`mssql_`和安装是一件很麻烦的事](http://php.net/mssql.requirements)。

但是，还有*更好的*选择。

DBX 的目标是提供一组统一的函数，让您可以与大量现有的 PHP 数据库适配器对话。该角色现在由[PDO](http://php.net/book.pdo)担任。如果你在 Windows 上，你应该使用[PDO_SQLSRV](http://php.net/ref.pdo-sqlsrv)。如果您不在 Windows 上，您可以使用[PDO_DBLIB](http://php.net/ref.pdo-dblib)（它使用与家庭相同的后端`mssql_`）或[PDO_ODBC](http://php.net/ref.pdo-odbc)。如果您以前从未使用过 PDO，这里有一些很好的[教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。那个是针对 MySQL 用户的，但它仍然适用于其他数据库。

如果您编写的代码只打算在 MS SQL Server 上运行，并且您在 Windows 上运行 PHP，那么您也可以考虑使用[`sqlsrv_`函数系列](http://php.net/book.sqlsrv)来编写它。

# r - R中的GLM函数，日志链接不起作用

> ID：13567169
> 
> 赞同：6
> 
> 时间：2012-11-26T14:44:59.630
> 
> 标签：r, stata

我目前正在使用 Hardin 和 Hilbe 的“广义线性模型和扩展”一书（第二版，2007 年）。作者建议，“日志链接通常用于响应数据，而不是 OLS 模型，这些数据在连续尺度上只取正值”。当然，他们还建议使用残差图来检查是否仍然可以使用使用身份链接的“正常”线性模型。

我试图在 R 中复制他们在 STATA 书中所做的事情。事实上，我在 STATA 中的日志链接没有问题。但是，当使用 R 的 glm-function 调用相同的模型，但指定`family=gaussian(link="log")`我被要求提供起始值时。当我将它们都设置为零时，我总是得到算法没有收敛的消息。选择其他值，消息有时是相同的，但更多时候我得到：

```
Error in glm.fit(x = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,  :
     NA/NaN/Inf in 'x' 
```

正如我所说，在 STATA 中，我可以运行这些模型而无需设置起始值且不会出现错误。我尝试了许多不同的模型和不同的数据集，但问题总是相同的（除非我只包含一个自变量）。谁能告诉我为什么会这样，或者我做错了什么，或者为什么书中建议的模型可能不合适？我会很感激任何帮助，谢谢！

编辑：作为重现错误的示例，请考虑可以在[此处](http://lib.stat.cmu.edu/datasets/Plasma_Retinol)下载的数据集。加载此数据集后，我运行以下模型：

`mod <- glm(betaplasma ~ age + vituse, family=gaussian(link="log"), data=data2, start=c(0,0,0))`

这会产生算法未收敛的警告消息。

Edit2：我还被要求提供该模型的 STATA 输出。这里是：

```
. glm betaplasma age vituse, link(log)

Iteration 0:   log likelihood = -2162.1385  
Iteration 1:   log likelihood = -2096.4765  
Iteration 2:   log likelihood = -2076.2465  
Iteration 3:   log likelihood = -2076.2244  
Iteration 4:   log likelihood = -2076.2244  

Generalized linear models                          No. of obs      =       315
Optimization     : ML                              Residual df     =       312
                                                   Scale parameter =  31384.51
Deviance         =  9791967.359                    (1/df) Deviance =  31384.51
Pearson          =  9791967.359                    (1/df) Pearson  =  31384.51

Variance function: V(u) = 1                        [Gaussian]
Link function    : g(u) = ln(u)                    [Log]

                                                   AIC             =  13.20142
Log likelihood   = -2076.224437                    BIC             =   9790173

------------------------------------------------------------------------------
             |                 OIM
  betaplasma |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         age |   .0056809   .0032737     1.74   0.083    -.0007354    .0120972
      vituse |   -.273027   .0650773    -4.20   0.000    -.4005762   -.1454779
       _cons |   5.467577   .2131874    25.65   0.000     5.049738    5.885417
------------------------------------------------------------------------------ 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-27T14:16:56.150

正如我在评论中所说，Stata 的 GLM 拟合可能比 R 更稳健（在数值上，而不是统计意义上）。也就是说，拟合这个*特定*的数据集似乎并不难。

读取数据：

```
data2 <- read.table("http://lib.stat.cmu.edu/datasets/Plasma_Retinol",
         skip=30,nrows=315)
dnames <- c("age","sex","smokstat","quetelet","vituse","calories","fat","fiber",
           "alcohol","cholesterol","betadiet","retdiet","betaplasma","retplasma")
names(data2) <- dnames 
```

绘制数据：

```
par(mfrow=c(1,2),las=1,bty="l")
with(data2,plot(betaplasma~age))
with(data2,boxplot(betaplasma~vituse)) 
```

![在此处输入图像描述](../Images/5543985367c360752e951a46032955e8.png)

通过将截距参数的起始值设置为合理的值（即接近对数刻度上数据的平均值的值：这两种方法中的任何一种都可以），这很容易使它们适合

```
mod <- glm(betaplasma ~ age + vituse, family=gaussian(link="log"), data=data2,
           start=c(10,0,0))
mod <- glm(betaplasma ~ age + vituse, family=gaussian(link="log"), data=data2,
           start=c(log(mean(data2$betaplasma)),0,0)) 
```

后一种情况可能是启动日志链接拟合的合理默认策略。结果（略略）与 Stata 非常接近：

```
summary(mod)
## 
## Coefficients:
##              Estimate Std. Error t value Pr(>|t|)    
## (Intercept)  5.467575   0.218360  25.039  < 2e-16 ***
## age          0.005681   0.003377   1.682   0.0935 .  
## vituse      -0.273027   0.065552  -4.165 4.03e-05 ***
## ---
## Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 
## 
## (Dispersion parameter for gaussian family taken to be 31385.26)
## 
##     Null deviance: 10515638  on 314  degrees of freedom
## Residual deviance:  9791967  on 312  degrees of freedom
## AIC: 4160.4
## 
## Number of Fisher Scoring iterations: 9

confint(mod)
##                     2.5 %      97.5 %
## (Intercept)  5.0364648709  5.87600710
## age         -0.0007913795  0.01211007
## vituse      -0.4075213916 -0.14995759 
```

（R 对 p 值和 (?) 置信区间使用 t 而不是 Z 统计量）

*然而*，有几个原因我可能不适合这些数据的这个模型。特别是，恒定方差的假设（与高斯模型相关）不是很合理——这些数据似乎更适合对数正态模型（或等效地，仅适用于使用标准高斯模型进行对数转换和分析）。

按比例绘制`log(1+x)`（数据中的条目为零）：

```
with(data2,plot(log(1+betaplasma)~age))
with(data2,boxplot(log(1+betaplasma)~vituse)) 
```

![在此处输入图像描述](../Images/e15d9f7369ce9c7113ecee3e4c1673a1.png)

绘图`ggplot`（这适合每个值的单独线，`vituse`而不是适合加性模型）

```
library(ggplot)
theme_set(theme_bw())
(g1 <- qplot(age,1+betaplasma,colour=factor(vituse),data=data2)+
    geom_smooth(method="lm")+
    scale_y_log10()) 
```

![在此处输入图像描述](../Images/8c7e28dc57331b0234525ebd9a7a3557.png)

查看没有“异常值”：

```
g1 %+% subset(data2,betaplasma>0) 
```

![在此处输入图像描述](../Images/607b40a2bb7db21c976e4824bc8be2d7.png)

另外两点：（1）在这个数据集中有一个值为 0 的响应有点奇怪——不是不可能，但很奇怪；(2) 它看起来`vituse`应该被视为一个因素而不是数字（“1=是，相当频繁，2=是，不经常，3=否”）——可能是序数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-26T16:36:52.033

我想建议可能是不正常的错误。如果您同意（或者更确切地说，如果数据同意），请考虑以下结构：

```
?family
?glm
?binomial
lfit <- glm( dep <- indep1 + indep2, data=dat, family=binomial(link="probit") 
```

这应该提供围绕身份关联模型的二项式错误。这样做的好处是您的估计更容易在变量的原始尺度上解释。对于之前使用`family = poisson`概率链接的不正确建议，我们深表歉意。请记住，您从未提供过任何数据甚至是对分布的描述。显然，二项式错误不适用于@BenBolker 提供的数据集。

如果您有具有对数正态分布错误的非整数值，则应考虑准泊松模型。如果您在 Ben Bolker 提供的数据上运行此模型并比较 gaussian(link="log) 模型a，它们几乎无法区分，并且不需要起始值。

```
> mod2 <- glm(betaplasma ~ age + vituse, family=quasipoisson, data=data2         )
> mod2

Call:  glm(formula = betaplasma ~ age + vituse, family = quasipoisson, 
    data = data2)

Coefficients:
(Intercept)          age       vituse  
   5.452014     0.006096    -0.276679  

Degrees of Freedom: 314 Total (i.e. Null);  312 Residual
Null Deviance:      37270 
Residual Deviance: 33420    AIC: NA 

> glm(betaplasma ~ age + vituse, family=gaussian(link="log"), data=data2,
+            start=c(10,0,0))

Call:  glm(formula = betaplasma ~ age + vituse, family = gaussian(link = "log"), 
    data = data2, start = c(10, 0, 0))

Coefficients:
(Intercept)          age       vituse  
   5.467575     0.005681    -0.273027  

Degrees of Freedom: 314 Total (i.e. Null);  312 Residual
Null Deviance:      10520000 
Residual Deviance: 9792000  AIC: 4160 
```

您可能应该使用稍微复杂一点的模型，因为 vituse 显然是一个三级因子：

```
> mod2 <- glm(betaplasma ~ age + factor(vituse), family=quasipoisson, data=data2         )
> mod2

Call:  glm(formula = betaplasma ~ age + factor(vituse), family = quasipoisson, 
    data = data2)

Coefficients:
    (Intercept)              age  factor(vituse)2  factor(vituse)3  
       5.151076         0.006359        -0.224107        -0.562727  

Degrees of Freedom: 314 Total (i.e. Null);  311 Residual
Null Deviance:      37270 
Residual Deviance: 33380    AIC: NA 
```

# jquery - heightStyle：“填充”不适用于 Jquery 中的手风琴

> ID：13567171
> 
> 赞同：4
> 
> 时间：2012-11-26T14:45:06.207
> 
> 标签：jquery, css, jquery-ui, jquery-ui-accordion

![在此处输入图像描述](../Images/fd9552241c7c864a139d582827ec2db7.png)- 随着容器尺寸的变化，我可以自
定义 #backlogEpic 中定义的宽度，即 526px，但高度没有
自定义。为了填充其容器分配的垂直空间，我将 heightStyle 选项设置为“填充”，但仍然无法正常工作
。它的采用是使用“自动”的默认高度。我如何自定义
我的高度。如果您在图像中看到，扩展面板将超出容器。

```
 html:-  
        <div id="backlogEpic" class="ui-widget-content">
        <div id="backlogAccordion">  
        <--- accordian code---->   
        </div> 
        </div>

    css :-  
      #backlogEpic{  
      padding: 10px;    height: 200px;    width: 526px;    right: 25px;    }  

   javascript:-  

    $(function() {

      $( "#backlogEpic" ).resizable({
         minHeight:140,
          minWidth: 150,
          resize: function() {
              $( "#backlogAccordion" ).accordion( "refresh" );
          }
      });
      $( "#backlogAccordion" ).accordion({
          heightStyle: "fill"
      });    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T18:03:31.367

我一直在和你解决同样的问题。我的网站使用的是 jQuery 1.9.1 和 jQueryUI 1.10.2。我所有的努力都在父 div 上，但文档或讨论中没有任何效果。昨天我发现了 SO 主题[jquery 1.9 手风琴高度问题](https://stackoverflow.com/questions/15035117/jquery-1-9-accordion-height-issue)，其中 Mottie 建议修改每个手风琴面板而不是父面板的 CSS：

```
#accordion .ui-accordion-content {    
    max-height: 400px;
    overflow-y: auto;
} 
```

在我从昨天开始进行的有限测试中，这解决了我的手风琴溢出容器的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-02T06:14:52.817

尝试这个。在创建事件时：

1.  计算手风琴头 --> c
2.  计算内容高度：父母的高度 (#content) - (c * 手风琴高度)
3.  设置内容（.ui-accordion-content）外部高度；

你应该知道jquery的height vs innerheight vs outerheight

```
$( "#accordion" ).accordion({
    heightStyle: "fill",
    collapsible:true,
    active:false,
    animate:300,
    create: function( event, ui ) {
        var c=$(".ui-accordion-header").length;
        var h=$("#content").height() - (c* $(".ui-accordion-header").outerHeight(true));
        $(".ui-accordion-content").outerHeight(h);
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T16:23:05.250

外观表明有一个尚未清除的浮动，导致包装容器看起来像它一样。尝试在手风琴后添加“清晰”元素：

```
.clearer{
clear:both:
height:1px;
margin-bottom:-1px;
}

<div id="backlogEpic" class="ui-widget-content">
    <div id="backlogAccordion">  
    <--- accordian code---->   
    </div> 
    <div class='clearer'></div>
</div> 
```

# c# - 使用 Quartz .NET 创建 Cron 表达式

> ID：13567180
> 
> 赞同：5
> 
> 时间：2012-11-26T14:45:33.717
> 
> 标签：c#, .net, cron, quartz-scheduler, quartz.net

是否可以使用 Quartz .NET 程序集生成 cron 表达式？我看到这个`CronScheduleBuilder`类有一个私人成员`cronExpression`，这基本上是我正在寻找的。有没有其他方法可以获取 cron 表达式本身？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T14:56:43.787

可能使用`ICronTrigger.CronExpressionString`

```
CronScheduleBuilder csb = CronScheduleBuilder
    .WeeklyOnDayAndHourAndMinute(DayOfWeek.Monday, 12, 0);

ICronTrigger trigger = (ICronTrigger)TriggerBuilder
    .Create()
    .WithSchedule(csb)
    .Build();

string cronExpression = trigger.CronExpressionString; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-26T14:32:20.223

使用 Ian 的答案，我创建了一个小的扩展方法。希望它对其他人有用...

```
public static class QuartzExtensionMethods
{
    public static string ToCronString(this CronScheduleBuilder cronSchedule)
    {
        ICronTrigger trigger = (ICronTrigger)TriggerBuilder
        .Create()
        .WithSchedule(cronSchedule)
        .Build();

        return trigger.CronExpressionString;
    }
} 
```

# linux - 如何在 bash 中创建一个附加到另一个文件的伪文件

> ID：13567183
> 
> 赞同：1
> 
> 时间：2012-11-26T14:45:35.333
> 
> 标签：linux, bash, shell

我有一个封闭的程序（即 Intersystems 'csession' Cachédb 终端），它将写入作为参数给出的文件。它这样做了几次，然后返回。每次，给定的文件都会被覆盖，所以最后，我只得到最后一个结果......

我的想法是，可以欺骗并提供一个特殊的伪文件作为参数，该伪文件将充当代理并将写入其中的内容附加到另一个文件中。

```
create proxyfile as >> realfile
cat "Hello" > proxyfile
cat "Bye" > proxyfile
cat realfile
Hello
Bye 
```

有没有人认为这可能是可行的，可能使用一个小实用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T14:48:39.050

为此，您可以使用 FIFO 文件（命名管道）。要查看它们是如何工作的，请打开两个终端窗口。在一个，做

```
cd /tmp
mkfifo pipe
tail -f pipe 
```

而在另一个

```
cd /tmp
echo "Hello" > pipe
echo "Bye" > pipe 
```

对于实际问题，让您的应用程序写入 FIFO 并`tail -f pipe > outputfile`在后台使用将结果收集到`outputfile`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T14:48:59.027

您可以将`/dev/stdout`其用作输出文件，将其通过管道传输到 cat 并将标准输出附加到文件中`>>`

```
csession /dev/stdout | cat >>realfile 
```

这不会覆盖，而是附加到现有文件。

# java - 多重选择对话框

> ID：13567186
> 
> 赞同：0
> 
> 时间：2012-11-26T14:45:44.827
> 
> 标签：java, android, dialog

我的多选对话框正在运行并弹出正确的值。但是，当单击保存按钮时，我很难理解如何设置和检索值。

我的代码如下：

```
 public void addCondition(View view){

        SQLiteDatabase db = SQLiteDatabase.openOrCreateDatabase(dbfile, null);
        Cursor f = db.rawQuery("select * from assetobservationtypes", null);  
        Log.e("Asset Helper Types:", "Cursor run");
         List<CharSequence> mHelperNames = new ArrayList<CharSequence>();
         final ArrayList<String> mHelperNamesID= new ArrayList<String>();  

        if(f.getCount() > 0) {
            f.moveToFirst();
               while(!f.isAfterLast()) {
                   mHelperNames.add(f.getString(f.getColumnIndex("Observation")));
                   mHelperNamesID.add(f.getString(f.getColumnIndex("AssetObsID")));

                    f.moveToNext();
               }
        }

        f.close();

        final List<Integer> mSelectedItems = new ArrayList<Integer>();

            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setTitle("My Title")
                    .setMultiChoiceItems(mHelperNames.toArray(new CharSequence[mHelperNames.size()]), null,
                            new DialogInterface.OnMultiChoiceClickListener() {
                                @Override
                                public void onClick(DialogInterface dialog,
                                        int which, boolean isChecked) {
                                    if (isChecked) {

                                        mSelectedItems.add(which);
                                    } else if (mSelectedItems.contains(which)) {

                                        mSelectedItems.remove(Integer
                                                .valueOf(which));
                                    }
                                }
                            })

                   .setPositiveButton("Save", new DialogInterface.OnClickListener() {
                       @Override
                       public void onClick(DialogInterface dialog, int id) {                      
                           txtCondition.setText("set");
                           txtCondition.setTextColor(Color.parseColor("#4c9226"));
                           count++;
                       }
                   })
                   .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                       @Override
                       public void onClick(DialogInterface dialog, int id) {
                           dialog.dismiss();
                       }
                   });
            builder.show();
    } 
```

我知道该列表在数组 mSelectedItems 中，但是当我尝试在 setPositiveButton 的 onclick 上记录 mSelectedItems.get(0) 以测试它是否包含应用程序刚刚崩溃的任何内容时。

如何检索/存储这些值？然后下次预填充列表

汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:12:04.707

我猜想通过在下次您想在`AlertDialog`再次显示对话框时显示选中的项目时预先填充列表。在这种情况下，`mSelectedItems`在您的`Activity`（最初将是一个空列表）中创建 a 字段：

```
final List<Integer> mSelectedItems = new ArrayList<Integer>(); 
```

和你的调用方法：

```
public void addCondition(View view) {
    SQLiteDatabase db = SQLiteDatabase.openOrCreateDatabase(dbfile, null);
    Cursor f = db.rawQuery("select * from assetobservationtypes", null);  
    Log.e("Asset Helper Types:", "Cursor run");
    List<CharSequence> mHelperNames = new ArrayList<CharSequence>();
    final ArrayList<String> mHelperNamesID= new ArrayList<String>();  
    while(f.moveToNext()) {
        mHelperNames.add(f.getString(f.getColumnIndex("Observation")));
        mHelperNamesID.add(f.getString(f.getColumnIndex("AssetObsID")));
    }
    f.close();
    boolean[] checkedItems = new boolean[mHelperNames.size()];
    for (int  i = 0; i < checkedItems.length; i++) {
        checkedItems[i] = false;
    }
    for (int i = 0; i < mSelectedItems.size(); i++) {
        checkedItems[mSelectedItems.get(i).intValue()] = true;
    }
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle("My Title").setMultiChoiceItems(mHelperNames.toArray(new CharSequence[mHelperNames.size()]), checkedItems,
                        new DialogInterface.OnMultiChoiceClickListener() {
                            @Override
                            public void onClick(DialogInterface dialog,
                                    int which, boolean isChecked) {
                                if (isChecked) {

                                    mSelectedItems.add(which);
                                } else if (mSelectedItems.contains(which)) {

                                    mSelectedItems.remove(Integer
                                            .valueOf(which));
                                }
                            }
                        })

               .setPositiveButton("Save", new DialogInterface.OnClickListener() {
                   @Override
                   public void onClick(DialogInterface dialog, int id) {                      
                       txtCondition.setText("set");
                       txtCondition.setTextColor(Color.parseColor("#4c9226"));
                       count++;
                   }
               })
               .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                   @Override
                   public void onClick(DialogInterface dialog, int id) {
                       dialog.dismiss();
                   }
               });
        builder.show();
} 
```

请记住，`mHelperNames`列表应该是相同的（您不能更改 中的值`Cursor`），否则您可能会在选中/未选中的项目甚至异常之间存在一些不一致的风险。我希望代码是正确的，我没有测试过。

# vba - 宏覆盖受保护和共享的工作表excel

> ID：13567193
> 
> 赞同：0
> 
> 时间：2012-11-26T14:46:33.870
> 
> 标签：vba, excel, excel-2002

我在 excel 2012 中有一个共享和受保护的工作表。（受保护但没有密码）我写了这个宏：

```
Private Sub CommandButton1_Click()
    ActiveSheet.Unprotect
    Range("B4:K38").Select
    Selection.Sort Key1:=Range("D4"), Order1:=xlAscending, Header:=xlGuess, _
        OrderCustom:=1, MatchCase:=False, Orientation:=xlTopToBottom, _
        DataOption1:=xlSortNormal
   'cells I don't want to be protect (to be user-editable)
    Range("B4:K38").Locked = False
   'protecting the sheet, and all the other cells will be protected
    Protect UserInterfaceOnly:=True
End Sub 
```

但是每次我使用这个宏时，我都会收到一条消息，告诉我方法保护存在错误。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:55:36.573

试试这个，因为在手机上没有测试过

而不是使用`protect userinterfaceonly:=true`

```
 with activesheet
         .EnableSelection = xlUnlockedCells 
         .Protect UserInterfaceOnly:=True 
    End With 
```

同样使用 UserInterfaceOnly 您不需要取消保护工作表即可使用 vba 对其进行编辑。

# java - 在浏览器选项中不允许它运行 ActiveX 对象

> ID：13567200
> 
> 赞同：1
> 
> 时间：2012-11-26T14:46:51.220
> 
> 标签：java, security, internet-explorer, applet, activex

如何在 Internet Explorer 中运行 ActiveX 对象而不允许 Internet Explorer 选项？

出于安全原因，我们的客户不允许使用 ActiveX。但是我们需要使用第三方程序，它有一个 ActiveX 接口。

我可以将 ActiveX 对象包装在小程序中（或任何其他想法吗？），因此 Internet Explorer 不知道有关在小程序中运行的 ActiveX 对象的任何信息（因此 IE 不显示任何安全警告）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:01:10.900

> ..ActiveX 对象在小程序内运行（所以 IE 不显示任何安全警告）？

只有受信任的小程序才能使用 ActiveX 对象。[信任](https://stackoverflow.com/a/12986334/418556)Java 小程序 的提示是安全警告。

![](../Images/81d22010148df7139940c0d093c2a1b1.png)

所以不行。沙盒（无提示）Java 小程序根本无法调用 ActiveX 控件。

但即使是受信任的小程序也仍然受到浏览器或操作系统的安全保护。例如，如果 ActiveX 被*禁用*，即使是受信任的小程序也无法启用它。或者如果可以，那将是一个安全漏洞。让我们知道，我们会尽快修复它。

# h2 - “尝试锁定表超时”更改表

> ID：13567206
> 
> 赞同：2
> 
> 时间：2012-11-26T14:47:22.777
> 
> 标签：h2

当我尝试更改表时，得到以下响应：

```
Timeout trying to lock table ; SQL statement:
ALTER TABLE FOO ADD COLUMN NAME VARCHAR(200) [50200-169] HYT00/50200 (Help) 
```

H2网址：`jdbc:h2:file:C:\h2\test;WRITE_DELAY=300;MVCC=TRUE;LOCK_MODE=0;FILE_LOCK=SOCKET`

运行以下命令：

```
CREATE TABLE FOO (ID BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY, CODE INTEGER NOT NULL)
@LOOP 6000 INSERT INTO FOO (CODE) VALUES (1)
ALTER TABLE FOO ADD COLUMN NAME VARCHAR(200) <== Here the problem happens 
```

我的 H2 版本是 H2 1.3.169 (2012-09-09)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T05:03:19.963

[LOCK_MODE 0 表示没有锁定。](http://h2database.com/html/grammar.html#set_lock_mode)使用 MVCC 时使用此模式没有意义。

根据我的测试，如果您将 LOCK_MODE 设置为 1，则不会发生这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:25:46.250

它看起来像一个错误......有趣的是，当我使用的记录少于问题中提到的记录时，提到的错误不会出现......例如，以下序列有效：

1.  创建表：`CREATE TABLE FOO (ID BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY, CODE INTEGER NOT NULL)`
2.  插入一堆记录：`@LOOP 2000 INSERT INTO FOO (CODE) VALUES (1)`
3.  执行变更表：`ALTER TABLE FOO ADD COLUMN NAME VARCHAR(200)`

另一方面，将其更改为插入 2001 条记录足以触发`HYT00/50200`错误。表本身不需要很复杂。下表也重现了此类错误：`CREATE TABLE FOO (ID BIGINT NOT NULL, CODE INTEGER NOT NULL)`

我会尝试获取更多详细信息...

关于它的一些细节：

*   H2 错误表示锁定，但所有命令都是通过 H2 Web 控制台输入的，这是唯一使用的连接。
*   选择`INFORMATION_SCHEMA.LOCKS`不返回任何记录。

# html - 不同行的不同边框间距

> ID：13567208
> 
> 赞同：3
> 
> 时间：2012-11-26T14:47:28.300
> 
> 标签：html, css, html-table, semantic-markup

**概要：**我需要显示如下表：

![头部和身体间距不同的桌子](../Images/ad73d51b14d75480cbe29d1cd7dcf767.png)

**必需品：**

*   语义 HTML 编码
*   没有脚本

**HTML：**

```
<table>
<thead>
    <tr>
        <th colspan=2>
            One
        </th>
        <th colspan=2>
            Two
        </th>
    </tr>
</thead>
<tbody>
    <tr>
        <td>
            One
        </td>
        <td>
            Two
        </td>
        <td>
            Three
        </td>
        <td>
            Four
        </td>
    </tr>
    <tr>
        <td>
            One
        </td>
        <td>
            Two
        </td>
        <td>
            Three
        </td>
        <td>
            Four
        </td>
    </tr>
<tbody>
</table> 
```

* * *

**第一次尝试：**

*“边框折叠属性”*

我试`border-collapse: separate;`了`thead`又试`border-collapse: collapse;`，`tbody`但这根本行不通。

```
table {
    border-collapse: collapse;
    border-spacing: 1em;
}

table thead {
    border-collapse: separate;
}

table tbody tr {
    border-bottom: 1px solid black;
}

table thead tr th{
    border-bottom: 1px solid black;
    padding: 10px;
    text-align: center;
}

table tbody tr td {
    border-bottom: 1px solid black;
    padding: 10px;
}​ 
```

[在 JSFIDDLE 上](http://jsfiddle.net/Tw5Vb/2/ "在 JSFIDDLE 上")

* * *

**第二次尝试：**

*“添加空白单元格”*

我可以通过在 HTML 代码中添加空白单元格来获得表格的首选外观。但这种方法存在语义结构缺陷。

```
table {
    border-collapse: collapse;
    border-spacing: 1em;
}

table tbody tr {
    border-bottom: 1px solid black;
}

table thead tr th[colspan="2"]{
    border-bottom: 1px solid black;
    padding: 10px;
    text-align: center;
}

table tbody tr td {
    border-bottom: 1px solid black;
    padding: 10px;
}​ 
```

[在 JSFIDDLE 上](http://jsfiddle.net/Tw5Vb/1/ "在 JSFIDDLE 上")

* * *

**其他各种尝试**

我还尝试`-webkit-border-image: -webkit-linear-gradient(left, black 95%, white 5%);`了标题边框，但无法使其正常工作。

* * *

毕竟我愿意接受新的建议。

**注意：** 这将在电子书文件中。因此，一般背景颜色在不同的阅读器应用程序中可能会有所不同。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T14:56:48.140

[这是我的尝试](http://jsfiddle.net/6YSTH/)。

基本上我只是做了：

```
table thead tr th[colspan="2"]:first-child {
    border-right: 20px solid white;
}
table thead tr th[colspan="2"]:nth-child(2) {
    border-left: 20px solid white;
} 
```

**注意：**我个人不会使用如此复杂的选择器，但这应该会给你这个想法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T14:54:56.967

根据您的兼容性要求，您可以选择使用 CSS 生成内容：

```
th {
    /* other CSS */
    position: relative;
}

thead th::before,
thead th::after {
    content: '';
    position: absolute;
    bottom: -1px;
    width: 0.5em;
    border-bottom: 1px solid #fff;
}

thead th::before {
    left: 0;
}

thead th::after {
    right: 0;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Tw5Vb/7/)。

为了简单起见，我将*两个* `th`元素都赋予了`::before`和`::after`，但是如果总是只有两个`th`元素，则可以更改选择器：

```
th {
    /* other CSS */
    position: relative;
}

thead th:first-child::after,
thead th:last-child::before {
    content: '';
    position: absolute;
    bottom: -1px;
    width: 0.5em;
    border-bottom: 1px solid #fff;
}

thead th:last-child::before {
    left: 0;
}

thead th:first-child::after {
    right: 0;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Tw5Vb/10/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T14:59:03.657

您可以通过添加白色边框来做到这一点。然后，您需要从第一个和最后一个单元格中关闭它们。

```
table thead tr th{
    border-left: solid 10px white;
    border-right: solid 10px white;
    border-bottom: 1px solid black;
    padding: 10px;
    text-align: center;
}
table thead tr th:first-child {
    border-left: none;
}
table thead tr th:last-child {
    border-right: none;
} 
```

这是一个更新的 js fiddle [http://jsfiddle.net/davetayls/Tw5Vb/9/](http://jsfiddle.net/davetayls/Tw5Vb/9/)

# substring - 使用 XQuery 中的 substring 函数计算获得的值

> ID：13567209
> 
> 赞同：1
> 
> 时间：2012-11-26T14:47:29.017
> 
> 标签：substring, xquery

我有一个包含以下条目的 XML 文件：

```
<file>
 <unit id="u-1.01"/>
 <unit id="u-1.02"/>
 <unit id="u-1.03"/>
 <unit id="u-1.04"/>
 <unit id="u-1.05"/>
 <unit id="u-1.06"/>
 <unit id="u-1.07"/>
 <unit id="u-2.01"/>
 <unit id="u-2.02"/>
 <unit id="u-2.03"/>
 <unit id="u-2.04"/>
 <unit id="u-2.05"/>
 <unit id="u-2.06"/>
</file> 
```

假设我使用 substring 函数选择**id**属性的第三个字符并将其分配给变量*id*：

```
 for $identifiers in file/unit/@id
    let $id := substring($identifiers, 3, 1)
    return ($id) 
```

它返回以下内容：

```
1 1 1 1 1 1 1 2 2 2 2 2 2 
```

我需要的是每个唯一值的计数：在这种情况下，“1”为 7，“2”为 6。我如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:00:35.160

如果您使用与 XQuery 3.0 兼容的处理器（我使用[BaseX](http://www.basex.org)进行了测试，请使用`group by`and `count()`：

```
for $identifiers in file/unit/@id
let $id := substring($identifiers, 3, 1)
group by $id
return element { "count" } {
  attribute { "id" } { $id },
  count($identifiers)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T18:16:45.513

如果您的 XQuery 处理器不支持`group by`，请获取所有唯一 ID 并自行计算它们。

```
let $ids := file/unit/@id/substring(., 3, 1)
return
  for $uniqueID in distinct-values($ids)
  return element { "count" } {
    attribute { "id" } { $uniqueID },
      count($ids[.=$uniqueID])
    } 
```

# python - 将 Python 编译为静态库并使用 pythoncore.lib

> ID：13567210
> 
> 赞同：11
> 
> 时间：2012-11-26T14:47:30.887
> 
> 标签：python, static, compilation, python-2.7, static-libraries

我正在尝试将 Python 2.7 构建为静态单个 .lib 文件。

我已经对 Python 源代码进行了以下更改：

1.  更改为“发布”模式。
2.  将所有 DLL 项目更改为静态库 (.lib) 并将运行时库设置为 /MT
3.  将预处理器定义 Py_NO_ENABLE_SHARED 添加到 python 和 pythoncore

我已经设法将 pythoncore 项目编译为 pythoncore.lib（大约 11mb 大小），但是在尝试编译 python 项目时，我得到以下链接错误：

> 错误 LNK2019：函数 __PyImport_GetDynLoadFunc C:\Python-2.7.3_Source\PCbuild\pythoncore.lib(dynload_win.obj) 中引用的未解析的外部符号 __Py_ActivateActCtx 错误 LNK2019：函数 __PyImport_GetDynLoadFunc C:\Python-2_7 中引用的未解析的外部符号 __Py_DeactivateActCtx。 PCbuild\pythoncore.lib(dynload_win.obj) 错误 LNK2019：无法解析的外部符号 __Py_hgidentifier 在函数 __PySys_Init C:\Python-2.7.3_Source\PCbuild\pythoncore.lib(sysmodule.obj) 中引用 错误 LNK2019：无法解析的外部符号 __Py_hgversion 在函数中引用__PySys_Init C:\Python-2.7.3_Source\PCbuild\pythoncore.lib(sysmodule.obj) 错误 LNK2019：未解析的外部符号 _Py_GetBuildInfo 在函数 _Py_GetVersion C:\Python-2.7.3_Source\PCbuild\pythoncore.lib(getversion.obj) 中引用

谁能帮我？

谢谢，

伊丹

- - - - - - - - - - 更新 - - - - - - - - - - - - - - - --------

我只是设法使它工作..如果它可以帮助任何人，这些是我所做的更改：

1.  添加`Modules\getbuildinfo.c`到 pythoncore 项目。
2.  `PC\dl_nt.c`将此行从`#ifdef Py_ENABLE_SHARED`第 14 行移动到第 79 行（就在 DllMain 上方）。

……就是这样！

您现在可以链接到 pythoncore.lib :)

伊丹

# r - 折叠数据框，为因子添加值

> ID：13567212
> 
> 赞同：1
> 
> 时间：2012-11-26T14:47:31.857
> 
> 标签：r

> **可能重复：**
> [聚合 R 总和](https://stackoverflow.com/questions/7615922/aggregate-r-sum)

我有一个看起来像这样的数据框：

```
 sample value
1      a     1
2      a     2
3      b     3
4      b     4
5      b     5
6      c     6 
```

我需要在`sample`（可能是字符向量或因子）的级别上折叠数据框，添加所有`value`s，所以我的结果数据框如下所示：

```
 sample sum
1      a   3
2      b  12
3      c   6 
```

现在是星期一早上，我能想到的就是写一个复杂的`for`循环。我如何使用 apply、plyr 等对其进行矢量化？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T14:54:36.450

如果您不想加载包：

```
df <- read.table(text="  sample value
1      a     1
2      a     2
3      b     3
4      b     4
5      b     5
6      c     6",header=TRUE)

aggregate(df$value,by=list(sample=df$sample),sum)

  sample  x
1      a  3
2      b 12
3      c  6 
```

或者，如果您更喜欢公式语法：

```
aggregate(value ~ sample, df, sum)

  sample value
1      a     3
2      b    12
3      c     6 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T14:52:37.870

对于这些类型的问题，我喜欢 cast，因为它快速且直观：

```
library(reshape2)
dcast(your_df, sample ~ ., sum) # or just cast with the original reshape 
```

对于这类问题，我也喜欢总结。

```
library(plyr) 
ddply(df,.(sample),summarise, sum=sum(value)) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-26T16:08:01.240

本着分享的精神，你也可以很容易地使用`sqldf`和`data.table`包：

您的数据：

```
df <- read.table(text="  sample value
1      a     1
2      a     2
3      b     3
4      b     4
5      b     5
6      c     6",header=TRUE) 
```

`sqldf`替代方案：

```
library(sqldf)
sqldf("select sample, sum(value) `value` from df group by sample")
#   sample value
# 1      a     3
# 2      b    12
# 3      c     6 
```

`data.table`替代方案：

```
library(data.table)
DT <- data.table(df, key="sample")
DT[, list(value = sum(value)), by=key(DT)]
#    sample value
# 1:      a     3
# 2:      b    12
# 3:      c     6 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-26T15:08:39.423

“经典” R 命令是***tapply***

```
n <- 17; fac <- factor(rep(1:3, length = n), levels = 1:5)
df=data.frame(target=1:n, factor=fac)
with(df, tapply(target, fac, sum)) 
```

***by***和***aggregate两者都可以工作，但是作为列表或******按***对象的输入输出是愚蠢的。来自 plyr 的ddply***也***可以工作，但在语法上不太清楚，尽管它在更复杂的示例中发挥作用***。***

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-26T14:58:38.123

使用 R 基函数的一种解决方案是

```
aggregate(x = df$value, by = list(df$sample), FUN = sum) 
```

您也可以使用`ddply`from plyr package

```
ddply(df,.(sample),numcolwise(sum)) 
```

这`df`是你的data.frame

# java - 大量表和 Hibernate 内存消耗

> ID：13567217
> 
> 赞同：12
> 
> 时间：2012-11-26T14:47:48.830
> 
> 标签：java, spring, hibernate, jpa, memory

我正在开发一个大型 ERP 项目，该项目具有大约 2100 个表的数据库模型。使用 Hibernate 映射的“仅”500 个表，部署在 Web 服务器上的应用程序需要大约 3GB 的工作内存。

在一个持久性单元中使用这么多表时，有什么方法可以减少 Hibernate 的元模型内存占用？还是我应该放弃 ORM 并使用普通的旧 JDBC（甚至[jOOQ](http://www.jooq.org)）？

现在我正在使用 Hibernate 4.1.8、Spring 3.1.3、JBoss AS 7.1 并使用 MSSQL 数据库。

编辑：

[JavaMelody 内存直方图输出](http://pastebin.com/raw.php?i=cYr9ttTN)- 生成了 2000 个测试表，这些测试表的范围比原始 db 模型小一些（因此“仅”使用了 1.3GB 的内存）

编辑2：

Java MAT 堆分析：

*   [泄漏嫌疑人](https://docs.google.com/open?id=0BxIzMpeayz9nOERlbmlYQ0pkNzA)
*   [顶级消费者](https://docs.google.com/open?id=0BxIzMpeayz9nN0E1emJjSnJZOW8)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T01:53:51.817

一个打开的休眠会话将倾向于在使用时累积对象。这不是内存泄漏；休眠会话被设计为一次请求使用，它缓存持久的对象（即在会话中活动），以及查询和其他数据。如果您调用`session.toString()`，您将看到会话中存在的对象的洗衣清单。

如果您处理大量对象，请考虑批量处理这些对象。您可以`session.clear()`在每个批次之后调用以从会话中逐出缓存数据和持久对象，并减少会话的内存占用（有时非常显着）。

调用之后`session.clear()`，请注意在此调用之前加载的对象将恢复为*分离*状态，并且对于当前会话不再处于活动状态。

您还可以使用*延迟获取*来优化 hibernate 为了处理给定操作而必须加载的数据量。您可以在 hibernate 文档中阅读更多相关信息。我建议启用 hibernate 的 SQL 日志记录功能，并检查 hibernate 是否正在拉回它不需要的数据。

您还可以配置休眠以收集可以帮助您的统计信息：

```
sessionFactory.getStatistics().setStatisticsEnabled(true); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T14:54:25.067

我建议使用[java melody](https://code.google.com/p/javamelody/)对生产或登台应用程序进行分析，以找出消耗最大内存的位置或人员，并根据分析结果决定应在应用程序中进行哪些更改。

Java melody 非常易于集成和配置，在生产中您只需更新 web.xml 即可启用或禁用

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-04T08:55:34.877

我遇到了同样的问题，我成功地将内存消耗从 xGB 减少到 30M，buildSessionFactory 从 2 分钟到 7 秒。

解决方案的重要部分发布在这里

[postInstantiate buildSessionFactory 慢/内存巨大的数据库](https://stackoverflow.com/questions/23867296/postinstantiate-buildsessionfactory-slow-memory-huge-database/23870757#23870757)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T05:24:33.933

你的休眠对象的目的是什么，休眠只适用于CURD（创建、更新、读取、删除），但不适合计算。对于任何计算目的（特别是交叉表），将存储过程和 ibatis 一起使用会更好。

# webbrowser-control - WP7 添加 Ipad（复制、粘贴、剪切），如 Windows phone 7.1 中的菜单

> ID：13567221
> 
> 赞同：0
> 
> 时间：2012-11-26T14:48:02.207
> 
> 标签：webbrowser-control, windows-phone-7.1

我正在开发一个 Windows 手机应用程序，我需要选择 Ipad 文本之类的菜单（剪切、复制、粘贴），还需要一些自定义菜单。当我在 windows phone 中选择文本时，只有一个选项复制文本可见。

建议我解决我的问题。

谢谢

**编辑**

```
<Border BorderThickness="3" Padding="6">
    <toolkit:GestureService.GestureListener>
        <toolkit:GestureListener Tap="GestureListener_Tap" />
    </toolkit:GestureService.GestureListener>
    <toolkit:ContextMenuService.ContextMenu>
        <toolkit:ContextMenu>
            <toolkit:MenuItem Header="item1" Click="Item1_Click" />
            <toolkit:MenuItem Header="item2" Click="Item2_Click" />
            <toolkit:MenuItem Header="item3" Click="Item3_Click" />
        </toolkit:ContextMenu>
    </toolkit:ContextMenuService.ContextMenu>
    <TextBlock Text="Tap" />
</Border>

private void GestureListener_Tap(object sender, GestureEventArgs e)
{
    Border border = sender as Border;
    ContextMenu contextMenu = ContextMenuService.GetContextMenu(border);
    if (contextMenu.Parent == null)
    {
        contextMenu.IsOpen = true;
    }
} 
```

我已经使用了此代码，但它会生成一个上下文菜单，如我不需要的列表项我需要一个圆角图像图标，如复制和粘贴，或者它想要 ipad 或 iphone 选择文本菜单。

我想要菜单

![文本选择](../Images/38492860aba3f429df174f4aefaf02db.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:27:18.097

[在此处](https://stackoverflow.com/questions/13679387/link-within-a-page-not-working-in-windows-phone-webbrowser)查看我的问题和答案

然后像下面的代码一样添加手势事件列表器还请注意，您必须包含 Microsoft.Phone.Controls.Toolkit 参考。

```
GestureListener listener = new GestureListener();
        listener.Hold += (sender, args) =>
        {
            // some logic here
            textSelectionMenu.Tag = args;
            textSelectionMenu.SelectedItem = null;
            textSelectionMenuPopup.IsOpen = true;
            activePopup = textSelectionMenuPopup;
            textSelectionMenu.Measure(new Size(double.PositiveInfinity, double.PositiveInfinity));
            Size selectionMenuSize = textSelectionMenu.DesiredSize;
            System.Windows.Point pt = args.GetPosition(textSelectionMenu);
            double offsetX = 50;
            double offsetY = pt.Y;

            // Finally, make sure it's on the screen
            //offsetX = Math.Max(0, Math.Min(offsetX, selectionMenuSize.Width));
            //offsetY = Math.Max(0, Math.Min(offsetY, selectionMenuSize.Height));

            textSelectionMenuPopup.HorizontalOffset = offsetX;
            textSelectionMenuPopup.VerticalOffset = offsetY;
        };
        this.Browser.SetValue(GestureService.GestureListenerProperty, listener); 
```

# eclipse - Crystal Reports - 设计器中的图表轴 0.04、0.08、0.12 在 JSP 查看器中呈现为 0、0、0.1、0.1

> ID：13567222
> 
> 赞同：0
> 
> 时间：2012-11-26T14:48:04.977
> 
> 标签：eclipse, jsp, crystal-reports, charts

因此问题是：

在设计师中我看到了这个......（好） ![不良规模](../Images/6147415f3c454bcf17112ea6e8780609.png)

在 JSP 查看器（为 Eclipse 内置 CR4E Crystal 报告）中，我看到了 tis（坏） ![良好的规模](../Images/709fb1939b7608b010a0f181e3868947.png)

主要问题是 x 轴上的刻度，其中 0.04 已向下舍入为 0，0.08 已向上舍入为 0.1。

我尝试通过右键单击标签并单击“设置轴标签格式”-> 数字并在此处指定小数位来修改报告，但舍入不变。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:45:29.233

最后我找到了一个解决方法，也是我犯的一个错误。选择格式轴标签时，我是在打印预览中这样做的，但最终报告没有体现出来。我的解决方法是在正确的设计视图上执行此操作。

然而，我担心的是，如果所有图表在打印预览中看起来都很好时都需要我以这种方式进行干预，那么 Java 渲染器肯定存在某种问题。

# xamarin.ios - 在转到下一个视图之前显示 UIAlertView

> ID：13567223
> 
> 赞同：1
> 
> 时间：2012-11-26T14:48:09.690
> 
> 标签：xamarin.ios, ios6

我在 ViewController 中有一个 UITableView，它对另一个 ViewController 中的详细视图执行 segue。部分详细视图是从异步 Web 服务填充的，这可能需要一些时间。
我希望我的 UIAlertView 在 tableView 收到 RowSelected 事件时显示并在 web 服务调用完成后隐藏。

现在的序列：
1\. 填充 UITableView（工作正常）
2\. 接收 RowSelected 事件（工作正常）
3\. 显示带有 msg“正在加载”的 UIAlertView（显示为时已晚）
4\. 执行 segue 到详细视图（工作正常）
5 . 将全局变量中的值加载到文本字段中。（工作正常） 6\. 执行异步 Web 服务以获取附加详细信息（工作正常）
7\. 隐藏 UIAlertView（工作正常）

问题是 UIAlertView 只显示在第 4 步和第 5 步之间。

RowSelected 事件的来源：

```
public override void RowSelected (UITableView tableView, NSIndexPath indexPath)
        {
            ActivityThread.Start ("Loading Quote list"); //shows UIAlertView
            var quoteList = service.GetQuoteList(Globals.UserName,Globals.Password,Globals.CompanyId,Globals.SelectedCustomer.CustomerId);      
            Globals.QuoteSelected = quoteList[indexPath.Row];
            ViewQuote viewQuote = new ViewQuote(QuoteViewController.handle);
            viewQuote.PerformSegue("quoteSegue",this);          
            tableView.DeselectRow (indexPath, true);
        } 
```

详细视图的来源负载：

```
 public override void ViewDidLoad ()
    {
        base.ViewDidLoad ();
        handle = Handle;

        //ActivityThread.Start("Retrieving Quote Data"); //shows UIAlertView too late
        LoadGlobalVariables();
        //hook up async websvc call
        service.GetQuoteLineListCompleted += new GetQuoteLineListCompletedEventHandler(OnGetQuoteLineListCompleted);  
        service.GetQuoteLineListAsync(Globals.UserName,Globals.Password,Globals.CompanyId,Globals.SelectedCustomer.CustomerId,Globals.QuoteSelected.DocumentHeaderId);

    } 
```

asyncCompleted 事件的来源：

```
void OnGetQuoteLineListCompleted (object sender, GetQuoteLineListCompletedEventArgs args)
        {               
            var QuoteLineList = args.Result;

            QuoteItemTableView.Source = new QuoteItemTableSource(LoadLineData (QuoteLineList.ToList ()));

            ActivityThread.Stop (); //hide UIAlertview
        } 
```

活动线程的来源：

```
public static class ActivityThread
    {
        private static Thread AcThread { get; set; }

        private static UILoadingView _loadView
        { get; set;}

        public static void Start(string title)
        {
            AcThread = new Thread(NewThreadMethod as ThreadStart);
            _loadView = new UILoadingView("", title);                   
            AcThread.Start();
            _loadView.BeginInvokeOnMainThread (delegate{_loadView.Show();});
        }

        public static void Stop()
        {
            AcThread.Abort();
            _loadView.BeginInvokeOnMainThread (delegate{_loadView.Hide ();});
        }

        [Export("NewThreadMethod")]
        static void NewThreadMethod()       
        {       
            using(var pool = new NSAutoreleasePool()) {}        
        }

    } 
```

如何让 UIAlertView 转到执行堆栈的顶部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:00:41.970

您的代码有点难以理解（只是想提供帮助）。我几乎建议完全摆脱那个类，它的用处对我来说并不是那么明显——在你需要的地方直接`ActivityThread`使用你的类可能更容易。`loadingView`不过，这一切都不是重点。

您是否尝试过`BeginInvokeOnMainThread`在某些情况下不使用显示加载视图？

您可以通过执行以下操作来检查它是否已经在主线程上：

`if (NSThread.CurrentThread.IsMainThread)`

这不在我的脑海中，但应该很接近。您还可能需要一个布尔标志，指示它是否应该调用`BeginInvoke`。

# javascript - 如何将自定义 jQuery 函数应用于匹配 > 1 个元素的选择器

> ID：13567227
> 
> 赞同：4
> 
> 时间：2012-11-26T14:48:34.497
> 
> 标签：javascript, jquery

我有几个要应用自定义 jquery 函数的文本框：

```
jQuery.fn.setReadOnly = function () {
    var o = $(this[0]);
    o.prop('readonly', true)
    .css('background-color', '#F0F0F0');
}; 
```

现在我需要做：

```
$('#txt1').setReadOnly();
$('#txt2').setReadOnly();
$('#txt3').setReadOnly();
$('#txt4').setReadOnly();
$('#txt5').setReadOnly(); 
```

我想实现以下目标：

```
$('#txt1, #txt2, #txt3, #txt4, #txt5').setReadOnly(); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T14:51:18.213

在您的情况下，您可以使用`this`- 它已经是一个匹配每个提供的元素的 jQuery 对象：

```
jQuery.fn.setReadOnly = function() {
    return this.prop('readonly', true).css('background-color', '#f0f0f0');
} 
```

在更一般的情况下，除了在整个集合上调用 jQuery 函数之外，您希望对每个 DOM 元素显式执行某些操作，您可以这样做：

```
jQuery.fn.myFunc = function() {
     return this.each(function() {
         ...
     });
}); 
```

这在您的特定情况下是不必要的，因为`.prop`and`.css`调用`.each`隐式执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T14:50:41.403

您当前正在明确设置`$(this[0])`，它只访问第一个元素。

你想用`o = $(this);`

[演示](http://jsfiddle.net/8dY5R/)

编辑：正如 Alnitak 指出的那样，`this`它将是一个 jQuery 集合，您可以继续进行`this.prop(...)`而无需额外的`$()`包装。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T14:51:23.543

通常，将其应用于所有匹配元素的语法是这样的：

```
jQuery.fn.setReadOnly = function () {
    return this.each(function () {
        $(this).prop("readonly", true).css("background-color", "F0F0F0");
    });
}; 
```

虽然没有必要使用`.each`on 方法`this`来遍历每个匹配的项目，但如果您曾经扩展此插件以执行更多操作并且需要将事物应用于 jQuery 方法之外的每个元素（`prop`和`css`部分） ，这将是正确的使用方法.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T14:52:03.610

请参阅我的赞成票：使用 this.each - 它更好并且返回对象链接。

您要从中获取第一项的“this”对象 - 只需使用以下命令循环：

```
for(var i = 0, len = this.length; i<len; i++){
    var o = $(this[i]);
    o.prop('readonly', true)
    .css('background-color', '#F0F0F0');
} 
```

未经测试，但我很确定它有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T14:53:39.490

## 这就是你写它的方式

不要忘记锁链。

```
jQuery.fn.setReadOnly = function () {
    // return 'this' for chaining purposes
    return this.prop("readonly", true)
               .css("background-color", "#f0f0f0");
    });
}; 
```

# ruby - 在控制器文件夹中包含一个非 Rails 类

> ID：13567228
> 
> 赞同：0
> 
> 时间：2012-11-26T14:48:37.880
> 
> 标签：ruby, ruby-on-rails-3

我的模型目录中有一个“狗”类。这只是一个简单的 ruby​​ 程序。不从 active_record 继承。现在我需要在我的用户控制器中的控制器文件夹中创建一个 Dog 对象。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T02:40:23.077

将 Dog 类保存在 /lib/dog.rb 中，然后在 UserController 中需要该文件可能会更容易。这样，您就可以将所有 ActiveRecord 类放在一起，并保持对 Dog 类的访问。

应用程序/控制器/users_controller.rb

```
require "#{Rails.root}/lib/dog.rb"

class UsersController < ApplicationController
  ...
  # code that uses the Dog class
  ...
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T14:59:15.060

您只需在用户控制器中创建一个 Dog 实例。

模型中的类

```
class Dog

    def hi
        puts "HI"
    end

end 
```

控制器

```
class MainController < ApplicationController
  def index
    dog = Dog.new
    dog.hi
  end
end 
```

# java - 模块之间的 Java Netbeans 拖放

> ID：13567230
> 
> 赞同：1
> 
> 时间：2012-11-26T14:48:48.580
> 
> 标签：java, netbeans, drag-and-drop, widget, netbeans-platform

**嗨，互联网！**

如何使用 NetBeans 平台将一个小部件或对象从一个模块移动（拖放）到另一个模块？

**编辑：**

我需要将 Image/JLabel 从一个 TopComponent 移动（DragAndDrop）到另一个 TopComponent。我可以成功移动一个图像，但我需要该图像的 ID，作为 JLabel 中的文本。我未能为 JLabel 实现拖放，也未能为 JLabel 内部的 JLabel 实现拖放。

如果有人可以提供提示和代码片段，任何东西都是受欢迎的。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T21:26:19.700

请看一下

*   [http://forums.netbeans.org/topic39500.html](http://forums.netbeans.org/topic39500.html)或
*   [https://blogs.oracle.com/geertjan/entry/drag_a_node_from_a](https://blogs.oracle.com/geertjan/entry/drag_a_node_from_a)或
*   [https://blogs.oracle.com/geertjan/entry/drag_a_node_from_a1](https://blogs.oracle.com/geertjan/entry/drag_a_node_from_a1)

# c# - 如何将接口传递给 vb.net 中的构造函数

> ID：13567233
> 
> 赞同：0
> 
> 时间：2012-11-26T14:48:53.983
> 
> 标签：c#, vb.net, interface, constructor

我正在尝试将一些代码从 c# 转换为 vb.net。整个代码在[http://www.codeproject.com/Articles/474418/DataGridViewplus-e2-80-93plusStackedplusHeader](http://www.codeproject.com/Articles/474418/DataGridViewplus-e2-80-93plusStackedplusHeader)中。我几乎拥有它，但我遇到了构造函数的问题。在 C# 中，它传递一个接口。像下面这样

```
 public StackedHeaderDecorator(IStackedHeaderGenerator objStackedHeaderGenerator, DataGridView objDataGrid)
        : this(objDataGrid)
    {
        this.objStackedHeaderGenerator = objStackedHeaderGenerator;
    } 
```

我不确定如何将其转换为 vb.net。如果有人能告诉我如何编写代码以将整数面传递给构造函数，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T14:52:12.037

你传递一个接口引用就像你传递任何类型一样：

```
Sub New(objStackedHeaderGenerator As IStackedHeaderGenerator, objDataGrid As DataGridView)

    Me.New(objDataGrid)

    Me.objStackedHeaderGenerator = objStackedHeaderGenerator

End Sub 
```

# javascript - 使用复选框和 AngularJS 必需

> ID：13567235
> 
> 赞同：37
> 
> 时间：2012-11-26T14:49:20.937
> 
> 标签：javascript, angularjs

我尝试`required`为我的复选框组使用 html5 属性，但我没有找到使用 ng-form 实现它的好方法。

选中Checkbox时，我希望将该输入元素的值推送到值数组。

angular required 验证器似乎监视与输入元素关联的 ng-model，但是如何将多个复选框链接到同一模型并使用输入字段的值更新它的值？

现在的实现就像[这个小提琴](http://jsfiddle.net/tryggve/thbkA/)。

```
<div ng-controller="myCtrl">
  <ng-form name="myForm">
    <span ng-repeat="choice in choices">
      <label class="checkbox" for="{{choice.id}}">
        <input type="checkbox" required="required" value="{{choice.id}}" ng-click="updateQuestionValue(choice)" ng-model="choice.checked" name="group-one" id="{{choice.id}}" />
        {{choice.label}}
      </label>
    </span>
    <input type="submit" value="Send" ng-click="submitSurvey(survey)" ng-disabled="myForm.$invalid" />
  </ng-form>
</div>​ 
```

updateQuestionValue 函数处理值数组的添加或删除，但每个复选框都有自己的模型，这就是为什么需要检查每个复选框以使表单有效的原因。

我已经让它在一组单选按钮上工作，但它们都在同一个模型上工作，因为只能选择一个。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-27T01:15:36.010

如果您希望在未选择任何选项的情况下禁用提交按钮，最简单的方法是检查 ng-disabled 属性中的数组长度，而不设置所需的属性

```
<input type="submit" value="Send" ng-click="submitSurvey(survey)" 
 ng-disabled="value.length==0" /> 
```

[请参阅此处以获取更新的小提琴](http://jsfiddle.net/thbkA/2/)

另一种方法是检查复选框的 ng-required 属性中的数组长度

```
<input type="checkbox" value="{{choice.id}}" ng-click="updateQuestionValue(choice)"
  ng-model="choice.checked" name="group-one" id="{{choice.id}}" 
  ng-required="value.length==0" /> 
```

[第二小提琴](http://jsfiddle.net/thbkA/4/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-26T21:37:45.937

一些东西：

*   在这种情况下，我会采用一种只更新整个数组的方法，因为它会稍微简化代码。（如果您对 $scope.value 数组内容做任何有状态的事情，您可能不想这样做，但它看起来不像您）。
*   你可以只使用`<form>`而不是`<ng-form>`.
*   将提交功能从按钮`ng-click`移到表单的`ng-submit`. 使用 Angular 的内置验证（如果您关心的话），这使验证管理变得更加容易
*   如果你的`<label>`包装你`<input>`不需要这个`for=""`属性。

[这是一个更新的小提琴给你](http://jsfiddle.net/tjP8S/2/)

这是代码：

```
<div ng-controller="myCtrl">
    <form name="myForm" ng-submit="submitSurvey(survey)">
        <span ng-repeat="choice in choices">
            <label class="checkbox">
            <input type="checkbox" required="required" value="{{choice.id}}" ng-change="updateQuestionValues()" ng-model="choice.checked" name="group-one" />
                {{choice.label}}
            </label>
        </span>
        <input type="submit" value="Send" ng-disabled="myForm.$invalid" />
    </form>
    {{value}}
</div>​ 
```

JS

```
function myCtrl($scope) {

    $scope.choices = [{
        "id": 1,
        "value": "1",
        "label": "Good"},
    {
        "id": 2,
        "value": "2",
        "label": "Ok"},
    {
        "id": 3,
        "value": "3",
        "label": "Bad"}];

    $scope.value = [];

    $scope.updateQuestionValues = function() {
        $scope.value = _.filter($scope.choices, function(c) {
            return c.checked;
        });
    };
}​ 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-15T17:08:03.453

我刚刚使用 ng-model 添加了一个隐藏输入，与单选按钮的 ng-model 相同：

```
 <div class="radio" ng-repeat="option in item.AnswerChoices | orderBy: DisplayOrder">
        <input type="radio" ng-model="item.Answer" name="mulchoice" value="{{option.DisplayName}}" />
        <span>{{option.DisplayName}}</span>
    <input type="hidden" ng-model="item.Answer" name="hiddenradiobuttoninput" required/>
 </div> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-26T21:49:03.847

为什么不让你的复选框为数组建模

```
<input type="checkbox" ng-model="value[$index]" value="{{choice.id}}/> 
```

小提琴：http: [//jsfiddle.net/thbkA/1/](http://jsfiddle.net/thbkA/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-22T21:24:37.883

```
<ul  class="list-group">
  <li ng-repeat='animal in animals' class="list-group-item">
    <label>
      <input type="checkbox"
        ng-model="xyx"
        ng-click="toggleAnimal(animal)"
        ng-checked="selectedAnimals.indexOf(animal) > -1"
        ng-required="selectedAnimals.length == 0" /> 
        {{animal}}</label>
  </li>                  
</ul>

$scope.toggleAnimal = function(animal){
    var index = $scope.selectedAnimals.indexOf(animal);
    if(index == -1) {
      $scope.selectedAnimals.push(animal);
    }
    else{
      $scope.selectedAnimals.splice(index, 1);
    }
} 
```

查看完整的详细信息和[演示以及其他相关示例](http://www.advancesharp.com/blog/1222/angularjs-checkboxlist-required-validation-with-demo)

# php - 基于行中所有字段的值的脚本

> ID：13567241
> 
> 赞同：1
> 
> 时间：2012-11-26T14:49:29.023
> 
> 标签：php, mysql

我认为这可能是一个简单的问题，但我只是在想最有效的方法来做我想做的事。

我所拥有的是一个允许经理在他们自己的部门内编辑用户的页面。这在最基本的情况下工作得很好，我运行一个查询来返回所有用户 WHERE Department= *manager department*。

这将返回同一部门内的所有用户。我想做的是扩展它，因为一些经理负责多个部门，并希望能够编辑来自各个部门的用户。

我的想法是有一个部门表，其中包含用户条目。然后每个部门都会有一个列，我会将经理负责的每个部门的值设置为 Yes。

然后，棘手的部分是根据该信息调整查询。你们都认为查询该行的最佳方式是什么，对于每个值为 Yes 的字段，在查询中添加部门作为选项

我可以：

```
$row = mysql_fetch_assoc($result);
If($row['dept1'] == 'Yes') {
    $query. = " OR Department=dept1";
}
if($row['dept2'] == 'Yes') {
    $query. = " OR Department=dept2";
} 
```

我想这会起作用，但这意味着如果我们要添加或删除一个部门等，我需要手动进入并硬编码一个部门。

有没有更优雅的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T14:57:35.630

我认为没有更好的解决方案，但更清洁的解决方案如下：

```
 WHERE department IN (dept1,dept2,dept3...) 
```

然后创建一个要包含的部门数组，然后将数组 implode() 转换为查询的“IN()”短语，如下所示：

```
 ... IN (implode(",", $array)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T14:58:23.990

更好的方法是创建一个包含部门、经理映射的表。

然后您可以将查询更改为

```
WHERE department in (SELECT dept_id FROM table WHERE manager_id = 'something') 
```

# mysql - sql中的orderby单词

> ID：13567243
> 
> 赞同：4
> 
> 时间：2012-11-26T14:49:51.483
> 
> 标签：mysql, sql, sql-order-by

我有一张桌子

```
id  name   status
---------------------
1   John   Approved
2   Kelly  Pending
3   Iva    Pending
5   Denis  Rejected
6   Michael Approved 
```

我想以这样一种方式进行分组和排序，它首先显示待处理记录，第二个批准并最后拒绝

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T14:51:03.253

```
SELECT *
FROM tableName
ORDER BY FIELD(`status`, 'Pending','Approved','Rejected') 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/2c342/2)
*   [SQLFiddle Demo（*添加了另一个案例*）](http://sqlfiddle.com/#!2/5ac23/2)

**资源**

*   [场地](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_field)

# wpf - 在 UserControl 中修改按钮的背景和边框

> ID：13567247
> 
> 赞同：0
> 
> 时间：2012-11-26T14:50:07.723
> 
> 标签：wpf, button, user-controls, border

我有一个定制的用户控件，里面有一个按钮。我有各种使用此控件的 XAML，但在其中一个 XAML 中，我希望按钮上有一个图像。这很好用，但我似乎无法让按钮的边框消失。我可以设置背景颜色、边框粗细和其他各种属性，但无论我做什么我都无法摆脱边框。我已经查看了有关如何使用样式覆盖模板的各种 SO 主题，但这似乎也对我没有帮助。下面是我尝试无济于事的最后一段片段。

```
<Style TargetType="{x:Type CustomButton}" x:Key="btnnoborder">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type CustomButton}">
                <Border Background="Transparent">
                    <ContentPresenter/>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

**编辑**

我附上了我在测试任何这些片段时看到的小图像

![默认图片](../Images/c2a7b1a17aa2dba2a291592c28977612.png)（常用按钮）

![维克多·拉克鲁瓦](../Images/ccccef0973a59f46b0563553c827eceb.png)（使用 Viktor La Croix 的 XAML 后的按钮）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:36:06.700

我不打算回答这个问题，但你运行了吗？你确定它不仅在设计时吗？我用了你的风格，效果很好。运行时没有边框。在设计时，我看到按钮本身的边框和该按钮内的图像。

![在此处输入图像描述](../Images/4d06401742b593b2fbe7195d3d9b98c4.png)

我的自定义样式：

```
 <UserControl.Resources>
    <Style x:Key="ButtonStyle2" TargetType="{x:Type Button}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Button}">
                    <Grid>
                        <Rectangle/>
                        <ContentPresenter HorizontalAlignment="Left" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" Margin="11,7,0,9"/>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsFocused" Value="True"/>
                        <Trigger Property="IsDefaulted" Value="True"/>
                        <Trigger Property="IsMouseOver" Value="True"/>
                        <Trigger Property="IsPressed" Value="True"/>
                        <Trigger Property="IsEnabled" Value="False"/>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</UserControl.Resources>

    <Button Style="{StaticResource ButtonStyle2}" Height="30" HorizontalAlignment="Left" Margin="782,211,0,0" Name="button5" VerticalAlignment="Top" Width="129">
        <Image Source="image.png"/>
    </Button> 
```

使用您的自定义样式，它看起来像这样：

![在此处输入图像描述](../Images/ff48bc8c0c9b9aedf0a366c2d86e4f29.png)

但这只是在设计时。在运行时没有边界。

**编辑**

如果有任何边框刷。它不在那个按钮样式中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:25:37.810

为了改进我发布的评论，将`BorderBrush`and`BorderThickness`属性设置为一个`TemplateBinding`值：

```
<Style TargetType="{x:Type CustomButton}" x:Key="btnnoborder">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type CustomButton}">
                <Border Background="Transparent" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}">
                    <ContentPresenter/>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

这将允许您的按钮从声明它的实例继承值：

```
<local:CustomButton BorderBrush="Transparent" BorderThickness="0" Content="Click Me!"/> 
```

# android - 等待 asynchTask 完成

> ID：13567248
> 
> 赞同：1
> 
> 时间：2012-11-26T14:50:10.510
> 
> 标签：android, drupal, android-asynctask

我正在做我的第一个安卓应用程序。在其中一个页面上，我需要使用 REST 服务连接到 Drupal 站点，检索一些数据（视频 url 列表、标题、描述等）并将其显示在列表中。当我单击列表时，我会转到视频的详细信息。

这就是我想继续的方式。1° 从 drupal 站点获取所有数据。2° 单击列表中的某个项目时，将该视频的详细信息传递给下一个活动。

问题是：在 android 3+ 中连接到互联网时，您无法在主线程上执行此操作，因此我不得不使用 AsyncTask 来获取数据。这行得通，但是我想将视频保存在 ArrayList 中，然后使用 getVideos() 或 getVideo(index) 函数访问该列表。第一个填充列表，第二个在进入详细信息活动之前检索数据。问题是当我尝试访问视频列表时该列表尚未填充。

从技术上讲，我真的不需要/不想使用异步任务，但是在主线程上连接到互联网会引发错误，说明这不是正确的做事方式。

这是我如何获取视频的简化版本：

```
 public class VideoDaoImpl {
        private List<Video> videos ;

        public VideoDaoImpl (){
            videos = new ArrayList<Video>();
            new VideoTask(...).execute(); //fetch the videos in json format and 
            //call function onRemoteVideoCallComplete using a handler 
            //in the onPostExecute() function of the asyncTask
        }

        public List<Video> getVideos() {
            return videos;
        }

        public Video getVideo(int index){
            return videos.get(index);
        }

        public onRemoteVideoCallComplete(JSONObject json) {
            //transform Json into videos and add them to the videos arraylist
        }

    } 
```

这就是我想在我的活动中填写视频列表的方式：

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_videos_list);
        //get all videos (not yet filled since faster than second thread)
        List<Video> videos = videoDao.getVideos();
        //get a list of all the titles to display as the list
        List<String> formattedVideos = VideoHelper.formatVideosList(videos);

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, formattedVideos);

        ListView listView = (ListView) findViewById(R.id.videos_list);
        listView.setAdapter(adapter);
        listView.setOnItemClickListener(new VideosListItemClickListener(this));
    } 
```

所以问题真的是这个。有没有更好的方法来解决这个问题，或者有没有办法等待列表被填满。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:47:01.103

我会保持 AsyncTask 的原样，但是我会考虑使用 onPostExecute()。在 onPostExecute() 内部，我会将您的 Json 转换为视频对象列表，然后从中创建格式化视频列表。然后，您可以调用一个方法，将格式化视频列表传递回您的活动，然后设置该列表。

例如在你的异步中：

```
protected void onPostExecute(Json result) {
     //Create list of videos from json
     //Create formatted list
     //call method in activity to set list e.g activity.setList(formatted List)
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:29:00.890

使用您的方法会使预期的行为成为您面临的行为，即视频列表尚未填充。您正在使用异步方法处理问题，但同步思考，并且您知道这一点，基于您的评论*“尚未填充，因为比第二个线程快”*

```
videoDao.getVideos(); 
```

应该在您的 onPostExecute 方法上或之后调用。我会做类似的事情，将其视为草稿，而不是完整的解决方案。

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_videos_list);
    new VideoTask(...).execute(); // you should a use a something on your onPreExecute() inside this task showing a ProgressDialog so the user knows that something is "loading videos, please wait"

    List<Video> videos = videoDao.getVideos();
    if (!videos.isEmtpy()) {
      //get a list of all the titles to display as the list
      List<String> formattedVideos = VideoHelper.formatVideosList(videos);

      ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, formattedVideos);

      ListView listView = (ListView) findViewById(R.id.videos_list);
      listView.setAdapter(adapter);
      listView.setOnItemClickListener(new VideosListItemClickListener(this));
    }
} 
```

基本上，它显示的不同之处在于您可以从 VideoDAO 中提取 AsyncTask。使用 ProgressDialog 执行它以告知正在发生的事情，然后检查视频列表是否已填满。如果是，请在您的视频列表中显示视频。当然这只是一个粗略的草稿，但我想你可以理解。

# facebook - 脸书公开相册

> ID：13567253
> 
> 赞同：5
> 
> 时间：2012-11-26T14:50:22.620
> 
> 标签：facebook, facebook-c#-sdk, photos

我正在尝试在桌面上使用 C# 开发一个应用程序，其中一个用户正在通过电子邮件或姓名搜索一个人。然后它会列出用户的信息和公共相册或图片。然后程序的用户会看照片，如果能找到合适的搜索人会添加朋友。

我的问题是我无法列出和显示公共相册。我尝试使用 FQL 和图形 API，但都返回了空数据。我为此编写的代码：

```
ArrayList  pictureLink;
public void userPhotos(string userID)
        {
            var fb2 = new FacebookClient(_accessToken);

//result1 and result2 aren't using in code only for looking for with breakpoint
            dynamic result1 = fb2.Get("fql", new { q = "SELECT aid,cover_pid FROM album WHERE owner=" + kisiID });
            dynamic result2 = fb2.Get("fql", new { q = "SELECT pid,aid FROM photo WHERE owner=" + kisiID });

            ArrayList imageSize; //for gettig highest pixell of picture
            pictureLink = new ArrayList();
            var fb = new FacebookClient(_accessToken);

            //dynamic albums = fb.Get("me/albums"); // THİS code is rigth runnig
        dynamic albums = fb.Get(userID + "/albums");

            foreach (dynamic albumInfo in albums.data)
            {
                //Get the Pictures inside the album this gives JASON objects list that has photo attributes 
                // described here http://developers.facebook.com/docs/reference/api/photo/
                dynamic albumsPhotos = fb.Get(albumInfo.id + "/photos");
                foreach (dynamic rs in albumsPhotos.data)
                {
                    imageSize= new ArrayList();
                    foreach (dynamic rsa in rs.images)
                    {
                        imageSize.Add(rsa.height);
                    }
                    int highestImage = Convert.ToInt32(imageSize[0]);
                    foreach (dynamic rsa in rs.images)
                    {
                        if (rsa.height == highestImage )
                        {
                            string link= rsa.source;
                            pictureLink.Add(link);
                        }
                    }
                }  
        }              
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:15:48.293

> 要阅读专辑，您需要：
> 
> *   任何有效的访问令牌（如果它是公开的并且属于页面）
> *   user_photos 权限（如果属于用户）
> *   属于用户朋友的friend_photos权限

*来源：[https ://developers.facebook.com/docs/reference/api/album/](https://developers.facebook.com/docs/reference/api/album/)*

您需要的是以下语句，它*不在*列表中。

> *   任何有效的访问令牌（如果它是公开的并且属于用户）

这意味着 API 根本不允许您访问公共相册。[事件](https://stackoverflow.com/a/13963873/1515819)也是如此。

# c# - 保存 webrequest 返回的流对象

> ID：13567254
> 
> 赞同：1
> 
> 时间：2012-11-26T14:50:23.330
> 
> 标签：c#

我有一个从站点检索 XML 文件的代码，所以我执行以下操作：

```
WebRequest request = WebRequest.Create(url);
request.Method = "GET";
request.ContentType = "text/xml";

using (WebResponse webResponse = request.GetResponse())
{
    using (Stream responseStream = webResponse.GetResponseStream())
    {
       if (responseStream != null)
        {
            reportXML = XDocument.Load(responseStream.ToString());
        }
    }
    using (XmlWriter writer = XmlWriter.Create(@"C:\Retrieved.xml"))
    {
        reportXML.Save(writer);
    }
 } 
```

但是我调试了应用程序，似乎我失去了这行代码的所有内容，所以我没有什么可保存的了。

```
Stream responseStream = webResponse.GetResponseStream()) 
```

知道为什么会这样吗？

如果我调查该对象，我会看到：

> Length = 'responseStream.Length' 引发了“System.NotSupportedException”类型的异常

错误如下：

> 找不到文件“C:\Documents and Settings\user\My Documents\Visual Studio 2010\Projects\Proto\App\bin\Debug\System.Net.ConnectStream”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T14:52:25.810

这就是问题：

```
reportXML = XDocument.Load(responseStream.ToString()); 
```

像这样调用`ToString()`流几乎*不会*给你任何有用的东西。如果您只想加载流的*内容*，请摆脱`ToString`调用：

```
reportXML = XDocument.Load(responseStream); 
```

或者，如果您*真的*只是想将它保存到磁盘，只需使用它，[`Stream.CopyTo`](http://msdn.microsoft.com/en-us/library/system.io.stream.copyto.aspx)而不必首先将其解析为 XML。

# iolanguage - Io（语言）启动错误 - .io_history

> ID：13567257
> 
> 赞同：1
> 
> 时间：2012-11-26T14:50:33.730
> 
> 标签：iolanguage, startup-error

我在 OSX 中安装并运行了 Io（语言）命令行界面，但现在我在启动时收到此错误：

```
Exception: while loading history file '/Users/andrew/.io_history', reason: No such file or directory 
```

有人知道如何解决吗？我已经请求了文件（但我不知道该放什么。）谷歌搜索这个错误并没有帮助（只是要爱 Io 的非谷歌能力...... :-)）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T23:59:16.503

我在 OSX 上遇到了同样的问题。只需删除 .io_history 文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-01T21:37:07.347

在终端中尝试以下操作：

```
touch ~/.io_history 
```

或者只是创建一个空的纯 txt 文件并将其保存到 ~/.io_history。

如果你的用户名不是 andrew，那么我猜你只需要重新安装 Io 二进制文件。

# mfc - 使用 Direct2D 的透明窗口

> ID：13567272
> 
> 赞同：0
> 
> 时间：2012-11-26T14:51:25.047
> 
> 标签：mfc, controls, transparent, direct2d

我有一个 MFC 应用程序，我想使用 Direct2D 来绘制我的自定义控件。

我需要我的控件是透明的。我曾经通过欺骗 OnEraseBkgnd 并调用`afxGlobalData.DrawParentBackground`.

使用 Direct2D，我使用 ID2D1HwndRenderTarget 并`BeginDraw/EndDraw`从 OnPaing 方法调用。问题是即使不调用任何绘图/清除函数，此方法也会将整个区域清除为黑色。

有没有办法在 Direct2D 中绘制透明图像？？？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:52:20.403

我最终最终实施了一种解决方法。我找到了两个解决方案：

1.  使用 Direct2D/GDI 互操作性：在 OnPaint 中我得到一个`CPaintDC`，然后我创建一个`D2D1DCRenderTarget`并绑定它们。这个解决方案非常简单，但即使在我的情况下性能不是限制时，我的性能也很差。

2.  我调用`afxGlobalData.DrawParentBackground`CDC im memory 以便我在 CBitmap 对象中获得控制背景。然后我从 CBitmap 创建一个 D2D1Bitmap 并使用它来清除控件的背景，而不是调用渲染目标对象的 Clear 方法。这意味着更多的代码，但性能更好（至少在我的情况下，但我没有花太多时间进行分析 - 再次性能不是必须的，但我喜欢尽可能以最好的方式做事）。

当然，能够绘制透明的 CWnd 会更好。此解决方法的缺点是您需要将控件完全放在父窗口上，否则您将只获得控件背景的一部分。所以，如果有人设法用 D2D1HwndRenderTarget 实现这一点，而无需调用，请`afxGlobalData.DrawParentBackground`让 mw 知道！

# asp.net-mvc - 为什么默认的 Razor 视图模板使用 h2 标签而不是 h1 作为标题？

> ID：13567275
> 
> 赞同：3
> 
> 时间：2012-11-26T14:51:30.937
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4

当我在 ASP.NET MVC4 中创建一个新的 razor 视图时，标题会自动包含在`h2`标签中：

```
@{
   ViewBag.Title = "ViewPage1";
}

<h2>ViewPage1</h2> 
```

我遵循一个页面应该有一个`h1`标签并且应该尊重标题标签的层次结构的规则。我假设 ASP.NET MVC 团队对此进行了一些思考，所以我想知道他们为什么选择使用`h2`而不是`h1`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T14:54:17.480

他们没有考虑那么多。这是我在创建新视图时更改/删除的第一件事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T14:54:52.603

可能假设`<h1>`您的**布局**中有一个.

当然，他们没有投入`h1`，但这可能是某种遗留的宿醉

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T15:07:19.130

我想他们认为您的页面中可能已经有一个。您可以更改生成这些视图的脚手架模板以忘记该问题。

我修改了所有脚手架视图模板，以便尽可能少地更改它们。

# regex - 提取标签之间的文本

> ID：13567284
> 
> 赞同：-1
> 
> 时间：2012-11-26T14:51:48.610
> 
> 标签：regex, perl

我一直在编写一个脚本以从一些文档中提取有用的命令，并且在在线搜索并使用一些示例之后，似乎仍然无法让正则表达式正常工作。输入文件将是一个word doc，我需要提取一些我可以正常工作的基本标题信息以及两组开始和结束标签之间的所有文本，这些标签可以跨越多行并出现多次。下面是我拥有的代码，它正确地提取了标题详细信息，但似乎不匹配，以及通过文档的命令标题。

```
open(DAT,'<input') or die "$!";
$file  = do{local $/; <DAT>};
close(DAT);
open (FH2, '>>', 'out.txt') or die "$!";
my @matches = $file =~ m/(\[$source\]|\[$target\]|\[admin\]|<IA%COMMAND>.*?       <\/IA%COMMAND>|<IA%UICOMMAND>.*?<\/IA%UICOMMAND>)/g;
print FH2 @matches;
close (DAT);
close (FH2); 
```

输入文件是一个 word doc，其格式类似于：

```
random overhead
[source]
<IA%COMMAND>stuff to print </IA%COMMAND>
stuff that should be ignored
[target]
<IA%UICOMMAND>other stuff to print</IA%UICOMMAND>
stuff to be ignored
[target]
<IA%COMMAND>print out this too
and this as well </IA%COMMAND> 
```

这应该导致输出：

```
[source]
<IA%COMMAND>stuff to print </IA%COMMAND>
[target]
<IA%UICOMMAND>other stuff to print</IA%UICOMMAND>
[target]
<IA%COMMAND>print out this too
and this as well </IA%COMMAND> 
```

我将其分解为仅搜索匹配良好但似乎对 .* 不满意的打开和关闭标签 对标签之间的内容进行非贪婪匹配。任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:58:55.513

使用这个正则表达式`(?<=<[^/]+?>)(.+?)(?=</.+?>)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:21:23.760

```
s/(?:\A.*?(?=^\[[^[\]]*\](?:\n|\z)|\z)|(?<=[>\]]\n)(?!\[[^[\]]*\]*(?:\n|\z)|<[^>]*COMMAND>).*?(?=^\[[^[\]]*\](?:\n|\z)|^<[^>]*COMMAND>|\z))//gms; 
```

请参阅**[此演示](http://ideone.com/Ot81cT)**。

# java - 如何从字符数组中创建单词

> ID：13567292
> 
> 赞同：2
> 
> 时间：2012-11-26T14:52:22.623
> 
> 标签：java, arrays

我有一个程序会提示用户输入 9 个字符。一旦这些字符出现在程序中，程序应该通过将它们与字典文件进行比较来使用这些字母创建可能的最长单词。

该程序当前存储 9 个字母并在字典文件中读取，但我不知道从哪里开始创建单词。

我需要帮助的只是单词创建者。如果有人知道如何从数组中的字符创建单词，你能帮帮我吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T14:55:25.540

您应该采用另一种方式：遍历您的字典文件并检查每个单词是否完全由指定的字母组成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:09:19.903

假设用户 Allrdy 输入了 9 个字符，字典存储在一个数组中：

我猜你正在使用一个char数组？我猜字典通常是排序的，所以数组要么在我的条件下。

您应该使用 for 循环扫描数组

```
// these are the scanned chars
char[] char = new chars[];
// has to be loaded from somewhere.
String[] dic = new String[100];
String found = "";
//.....reading chars
String longest = "";
for(int i = 0 : i<9;++i) {
    // look if an element exists, matching the letter a at the beginning
    if(exists) {
         // you found a word? nice safe it in a variable called found otherise compare longest and found, to check which once length is greater
         found = foundWordBefore;
         for(int j = (i+1)%10;j!=i+9%10;++j) {
         // look if there is another word matching the first letter and the second one
             if(exists) {
                 for(int k = (i+2)%10;k!=i+9%10;++k) {
                     //same again as before, continue until you reached last (i+8)%9                  

                 }
             }
         }
    }
    else {
        // if you found the nothing, compare the longest you found yet, to the longest you found before 
        if(longest.length < found.length) {
            longest = found;
        }
    }
} 
```

希望这个伪帮助和工作：D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T10:22:27.827

因为您似乎没有得到解决方案，这是我的，它应该可以工作

```
import java.util.ArrayList;

public class Test{
public String[] dict = new String[] {"hi","das","bad","fenster","esel","bahi","tfshi"};
public char[] input = new char[]{'a','b','d','h','i','s','f','t'};
public String longestString = dict[0];

public Test() {
    System.out.println(longestString);
    ArrayList<String> convert = new ArrayList<String>();
    for(String counter : dict)
        convert.add(counter);
    getInstance(convert, 0, input.length, 0, 0);
    System.out.println("\n\n\n" + longestString);

}

private void getInstance(ArrayList<String> searching, int pos, int length, int starter, int currentI) {
        int i = starter;
        do{

            ArrayList<String> matched = new ArrayList<String>();
            for(String counter : searching) {
                if(counter.length() > pos) {
                    if(counter.charAt(pos) == input[i]){
                        matched.add(counter);
                    }
                }
            }
            if(matched.size() > 0) {
                getInstance(matched, pos+1,length,(i+1)%length, i%length);
            }
            else if(currentI != i && matched.size() > 0) {
                getInstance(searching,pos,length,(i+1)%length, i%length);
            }
            if(matched.size() > 0 && longestString.length() < matched.get(0).length()){
                longestString = searching.get(0);
            }
            ++i;
            i %= length;
        }while(i != currentI);
}

public static void main(String[] args) {
    new Test();

}
} 
```

编辑：你应该修复一下，我只是在那里发现了一个错误

# c# - Rhino Mock：模拟私有方法调用 c#

> ID：13567304
> 
> 赞同：1
> 
> 时间：2012-11-26T14:52:56.917
> 
> 标签：c#, .net, unit-testing, rhino-mocks

可以模拟一个私有方法调用。

例子

```
 Public void StartProcess(string valueFound)
    {
        if(this.value == valuefound)
        {
            MockThisPriavteMethodCall();
        }

        AnotherPrivateMethodCallIDontNotWantToMockOut();
    } 
```

这种情况是我想测试一个私有方法，但我想模拟另一个的结果。

在上面的示例中，我希望能够模拟方法调用“MockThisPriavteMethodCall()”，但我希望运行第二个“AnotherPrivateMethodCallIDontNotWantToMockOut()”。

我可以使用某种形式的期望吗？

这可以在Rhino Mock中完成，这是正确的想法吗？

另外：我正在尝试测试 ViewModel 类中的代码。

上面的例子也表明它是少数公共方法之一。这些方法调用了许多不同的私有方法。这再次调用了许多私有方法。

我应该测试允许代码流过几个分支的某些路径和情况，还是应该只测试它们自己的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T14:55:07.210

模拟用于从被测对象到*依赖*项 - 在您想要模拟您正在测试的同一对象中的部分代码时，有些事情是不正确的。

从你的伪代码中很难看出太多，但听起来你*可能*想要为你想要伪造的代码引入一个新的依赖项。如果你能给我们提供更具体的上下文细节，那真的很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T14:55:44.207

真的没有一种干净的方法可以彻底做到这一点。

您可以通过更改方法调用`protected`并创建一个从您的类继承的可测试类并以这种方式为其创建期望来做到这一点。

话虽如此，[Jon Skeet 是正确](https://stackoverflow.com/a/13567346/16587)的，你可能在这里错误地使用了 Mocking。您显然希望从方法中返回一个虚拟值，并且一旦您创建了该方法`protected`，您就可以按如下方式执行此操作：

```
myclass.Stub(s => s.MockThisMethodCall()).Return("WhateverValueYouExpect"); 
```

# backbone.js - 如果尚未获取模型的模型，如何防止 Backbone.Marionette 渲染视图？

> ID：13567305
> 
> 赞同：12
> 
> 时间：2012-11-26T14:53:03.100
> 
> 标签：backbone.js, marionette

在我的backbone.Marionette 应用程序中，我有一个模型，它需要一个Id 属性来构造它的url。因此，我通过将 Id 传递给模型来创建模型，将其添加到视图中，然后获取模型：

```
 model = new Model({_id:id})               
   view = new View({model:model})                               
   app.content.show(view)                                                    
   model.fetch() 
```

我希望视图仅在获取模型后才开始渲染，但 Marionette 会立即渲染模型，导致我的模板渲染失败，因为预期的属性不存在。任何解决方法？

我正在尝试做类似于此处接受的答案的事情： [Binding a Backbone Model to a Marionette ItemView - blocking .fetch()?](https://stackoverflow.com/questions/10643474/binding-a-backbone-model-to-a-marionette-itemview-blocking-fetch)

但是，正如答案中所述，虽然这适用于主干，但 Marionette 会自动渲染视图。

另请参阅： [Backbone Marionette Displaying before fetch complete](https://stackoverflow.com/questions/11317691/backbone-marionette-displaying-before-fetch-complete)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-27T09:06:21.773

以上两个答案都有效。
这是我更喜欢使用的另一种方式（感觉更有*骨气*）。

**将视图直接绑定到模型**
获取模型完成后，您指定的函数将运行。这可以通过模型*或*集合来完成。

```
var Model = Backbone.Model.extend({});
var model = new Model();
model.fetch();

var View = Marionette.ItemView.extend({
    model:model,
    initialize: function(){
        this.model.bind("sync", this.render, this);// this.render can be replaced
    }                                              // with your own function
});                               

app.region.show(new View); 
```

这也使您可以随时获取。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-26T21:55:54.650

如果您真的想在获取模型之前阻止渲染，您应该像这样重新排序调用：

```
model = new Model({_id:id});
view = new View({model:model});
model.fetch({success: function () {
  app.content.show(view);
}); 
```

或者，您应该考虑立即渲染并利用 Marionette 的空白状态支持。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T08:46:22.507

基于 Derick Bailey 的一个例子：

```
 model = new Model({_id:id})               
   var fetched = model.fetch();

  // wait for the model to be fetched
  $.when(fetched).then(function(){

     view = new View({model:model})                               
     app.content.show(view)     
  }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-15T01:02:44.203

我最近遇到了同样的问题，并决定使用 Marionette 的事件系统让视图在触发 show() 之前传达它们的状态。我也在使用 requireJS，它增加了一些额外的复杂性——但这种模式有帮助！

我将有一个带有 UI 元素的视图，当单击该元素时，会触发一个事件以加载新视图。这可能是子视图或导航视图 - 没关系。

```
App.execute('loadmodule:start', { module: 'home', transition: 'left', someOption: 'foo' }); 
```

该事件被 Wreqr 'setHandlers' 捕获并触发视图加载序列（在我的情况下，我正在执行一堆逻辑来处理状态转换）。“开始”序列初始化新视图并传入必要的选项。

```
var self = this;
App.commands.setHandlers({'loadmodule:start': function( options ) { self.start( options ); 
```

然后正在加载的视图处理集合/模型并在初始化时获取。视图监听模型/集合的变化，然后使用 wreqr 的 executre 命令触发一个新的“就绪”事件。

```
this.listenTo( this.model, 'change', function(){
    App.execute('loadmodule:ready', { view: this, options: this.options });
}); 
```

我有一个不同的处理程序来捕获该就绪事件（和选项，包括视图对象引用）并触发 show()。

```
ready: function( options ) {

// catch a 'loadmodule:ready' event before proceeding with the render / transition - add loader here as well

var self = this;
var module = options.options.module;
var view = options.view;
var transition = options.options.transition;
var type = options.options.type;

if (type === 'replace') {
    self.pushView(view, module, transition, true);
} else if (type === 'add') {
    self.pushView(view, module, transition);
} else if (type === 'reveal') {
    self.pushView(view, module, transition, true);
}   

},

pushView: function(view, module, transition, clearStack) {

var currentView = _.last(this.subViews);
var nextView = App.main.currentView[module];
var self = this;

var windowheight = $(window).height()+'px';
var windowwidth = $(window).width()+'px';
var speed = 400;

switch(transition) {
case 'left':

    nextView.show( view );

    nextView.$el.css({width:windowwidth,left:windowwidth});
    currentView.$el.css({position:'absolute',width:windowwidth,left:'0px'});

    nextView.$el.animate({translate: '-'+windowwidth+',0px'}, speed, RF.Easing.quickO);
    currentView.$el.animate({translate: '-'+windowwidth+',0px'}, speed, RF.Easing.quickO, function(){

        if (clearStack) {
            _.each(_.initial(self.subViews), function( view ){
                 view.close();
            });
            self.subViews.length = 0;
            self.subViews.push(nextView);
        }

    });

break; 
```

我将尝试写下整个系统的体面要点，并在下周左右发布到这里。

# asp.net-mvc-3 - 如何转换 ObjectResult 到 IQueryable ?

> ID：13567307
> 
> 赞同：5
> 
> 时间：2012-11-26T14:53:19.247
> 
> 标签：asp.net-mvc-3, linq-to-entities, ado.net-entity-data-model

我在 asp.net mvc 3.0 应用程序中使用实体框架。我正在使用表值函数对我的一个数据库表进行全文搜索。我已将返回类型设置为 Request 类型的对象。然后，我将结果输入到表达式构建器中，该构建器对来自用户有权访问的实体列表中的请求执行包含操作。这是代码。

```
List<int> UserEntities = db.UserEntities
                              .Where(x => x.UserID.Equals(usr.ID))
                              .Select(x => x.EntityID).ToList();

var requests = db.SearchRequest(keyword)
    .Where(BuildContainsExpression<Request, int>(x => x.EntityID, UserEntities));

//Expression Builder for Contains SQL functionality
static Expression<Func<TElement, bool>> BuildContainsExpression<TElement, TValue>(
     Expression<Func<TElement, TValue>> valueSelector, IEnumerable<TValue> values)
{
    if (null == valueSelector) { throw new ArgumentNullException("valueSelector"); }
    if (null == values) { throw new ArgumentNullException("values"); }
    ParameterExpression p = valueSelector.Parameters.Single();
    // p => valueSelector(p) == values[0] || valueSelector(p) == ...
    if (!values.Any())
    {
        return e => false;
    }
    var equals = values.Select(
            value => (Expression)Expression.Equal(
                                      valueSelector.Body, 
                                      Expression.Constant(value, typeof(TValue))));
    var body = equals.Aggregate<Expression>(
                   (accumulate, equal) => Expression.Or(accumulate, equal));
    return Expression.Lambda<Func<TElement, bool>>(body, p);
} 
```

第二行将不会构建。编译器告诉我 SearchRequest 过程正在返回 ObjectResult 但需要 IQueryable。如何将 ObjectResult 转换为 IQueryable？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T15:56:17.260

只需使用扩展方法[`Queryable.AsQueryable<T>()`](http://msdn.microsoft.com/en-us/library/vstudio/bb507003.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-01T02:54:00.957

添加行

```
using System.Linq 
```

并且扩展方法将可用。

# modx - MODX Revo getChildIds 选项

> ID：13567308
> 
> 赞同：1
> 
> 时间：2012-11-26T14:53:24.500
> 
> 标签：modx, modx-revolution

`$options`此方法可用的参数是什么？

```
array getChildIds ([integer $id = null], [integer $depth = 10], [array $options = array()]) 
```

我正在寻找一种方法来获取孩子的别名不是“f”的所有孩子（深度 = 3）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T19:56:21.043

用这个：

```
<?php
$id = 123;
$depth = 3;

$ids = $modx->getChildIds($id, $depth);
$docs = $modx->getCollection('modResource', array(
    'id:IN' => $ids
    ,'alias:!=' => 'f'
));
$output = '';
foreach ($docs as $doc) {
    $output .= $doc->get('pagetitle') . '<br/>';
}

return $output; 
```

# objective-c - 在运行时对 ObjectiveC 字符串进行字符串化

> ID：13567311
> 
> 赞同：0
> 
> 时间：2012-11-26T14:53:32.603
> 
> 标签：objective-c, cocoa

我正在尝试在运行时对 Objective C 字符串进行字符串化。

是否可以使用字符串化运算符来执行此操作？我意识到这是一个预处理宏，但我可以将它与返回 char* 的函数结合起来吗？

这是我想做的是..

```
#define strthis(x) #x
char *itsstringized = strthis([@"my string" UTF8String]);
printf("%s", itsstringized); 
```

结果：

`"my string"`

不是

`my string`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:45:22.410

你想要这样的东西吗？

将字符串传递给方法，它将返回用引号括起来的字符串。

```
-(NSString *)stringizedString(NSString *)str{
   return [NSString stringWithFormat:@"\"%@\"", str];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T16:47:53.163

你一定可以！试试这个宏：

```
#define QUOTEIFY(input) @("\"" #input "\"")
#define QUOTEIFY_STRING(input) @("\"" input "\"") 
```

用法：

```
NSLog(QUOTEIFY(Hello World!)); // notice I didn't quote what's inside the brackets.
// or, if you prefer:
NSLog(QUOTEIFY_STRING("Hello, World!")); 
```

# javascript - 使用 grunt.js 使用 RequireJS 组合 JavaScript 文件的工作项目结构？

> ID：13567312
> 
> 赞同：38
> 
> 时间：2012-11-26T14:53:32.080
> 
> 标签：javascript, build, requirejs, gruntjs

我有一些项目使用[RequireJS](http://requirejs.org/)在浏览器中加载单个 JavaScript 模块，但我还没有优化它们。在开发和生产中，应用程序对每个 JavaScript 文件都发出单独的请求，现在我想使用[Grunt](http://gruntjs.com/)来解决这个问题。

我试图组合一个简单的项目结构无济于事，所以我想知道是否有人可以为我提供一个工作示例。我的目标如下：

1.  在开发模式下，通过为每个所需模块发出单独的请求，一切都在浏览器中运行。**在开发模式下不需要繁琐的任务或连接。**
2.  当我准备好时，我可以运行一个 grunt 任务来优化（组合）所有使用[r.js](http://requirejs.org/docs/optimization.html)的 JavaScript 文件并在本地进行测试。一旦我确信优化的应用程序可以正确运行，我就可以部署它。

以下是本次对话的示例结构：

```
grunt-requirejs-example/
  grunt.js
  main.js (application entry point)
  index.html (references main.js)
  lib/ (stuff that main.js depends on)
    a.js
    b.js
    requirejs/
      require.js
      text.js
  build/ (optimized app goes here)
  node_modules/ (necessary grunt tasks live here) 
```

具体来说，我正在寻找一个可以开始的**工作**项目结构。我的主要问题是：

1.  如果这个项目结构有缺陷，你有什么建议？
2.  我的文件中究竟需要什么`grunt.js`，尤其是要让 r.js 优化器正常工作？
3.  如果所有这些都不值得，并且有一种方法可以`watch`在每次保存文件时使用 grunt 任务在开发模式下自动构建所有内容，那么我全都听好了。我想避免任何会减慢循环从进行更改到在浏览器中看到它的事情。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-12-30T00:16:35.673

我使用[grunt-contrib-requirejs](https://github.com/gruntjs/grunt-contrib-requirejs)任务来构建基于 require.js 的项目。将其安装在您的项目目录中：

```
npm install grunt-contrib-requirejs --save-dev 
```

顺便说一句：`--save-dev`将包添加到您的 package.json 中的开发依赖项中。如果您没有在项目中使用 package.json，请忽略它。

使用以下命令将任务加载到您的 grunt 文件中：

```
grunt.loadNpmTasks('grunt-contrib-requirejs'); 
```

并将配置添加到您的 grunt.initConfig

```
requirejs: {
  production: {
    options: {
      baseUrl: "path/to/base",
      mainConfigFile: "path/to/config.js",
      out: "path/to/optimized.js"
    }
  }
} 
```

现在您可以将您的 require.js 内容构建到一个文件中，该文件将通过运行 uglifyjs 最小化`grunt requirejs`

您可以将一组不同的任务捆绑到某种主要任务中，方法是将其添加到您的 grunt 文件中

```
grunt.registerTask('default', ['lint', 'requirejs']); 
```

有了这个，你可以简单地输入`grunt`，grunt 会自动运行带有两个“子任务”的默认任务：lint 和 requirejs。

如果你需要一个特殊的生产任务：像上面那样定义它

```
grunt.registerTask('production', ['lint', 'requirejs', 'less', 'copy']); 
```

并运行它

```
grunt production 
```

如果您需要在 requirejs 任务中进行“生产”和“开发”的不同行为，您可以使用所谓的目标。在上面的配置示例中，它已经定义为`production`. 如果需要，您可以添加另一个目标（顺便说一句，您可以通过在同一级别添加选项对象来为所有目标定义全局配置）

```
requirejs: {
  // global config
  options: {
    baseUrl: "path/to/base",
    mainConfigFile: "path/to/config.js"
  },
  production: {
    // overwrites the default config above
    options: {
      out: "path/to/production.js"
    }
  },
  development: {
    // overwrites the default config above
    options: {
      out: "path/to/development.js",
      optimize: none // no minification
    }
  }
} 
```

`grunt requirejs`现在，您可以使用或单独运行它们`grunt requirejs:production`，或者在不同的任务中定义它们：

```
grunt.registerTask('production', ['lint', 'requirejs:production']);
grunt.registerTask('development', ['lint', 'requirejs:development']); 
```

现在回答你的问题：

1.  我肯定会在您的项目中使用子文件夹。在我的例子中，我使用一个“src”文件夹进行开发，该文件夹构建到一个用于生产的“htdocs”文件夹中。我喜欢的项目布局是：

    ```
    project/
      src/
        js/
          libs/
            jquery.js
            ...
          appname/
            a.js
            b.js
            ...
          main.js // require.js starter
        index.html
        ...
      build/
        ... //some tmp folder for the build process
      htdocs/
        ... // production build
      node_modules/
        ...
      .gitignore
      grunt.js
      package.json 
    ```

2.  看上面

3.  你可以这样做，但我不建议将 requirejs 添加到 watch 任务中，这是一项资源消耗的任务，它会显着降低你的机器速度。

最后但同样重要的是：在玩 r.js 时要非常小心。`modules`尤其是当您想通过在配置中添加指令来使用 r.js 优化整个项目时。R.js 将在不询问的情况下删除输出目录。如果碰巧它被意外配置为您的系统根目录，r.js 将擦除您的硬盘。请注意，前段时间我在设置我的 grunt 任务时永久删除了我的整个 htdocs 文件夹......`keepBuildDir:true`在使用 r.js 配置时，请始终添加到您的选项中。

# php - 分页没有传递总页值

> ID：13567321
> 
> 赞同：0
> 
> 时间：2012-11-26T14:53:58.447
> 
> 标签：php, mysql, pagination

我有一个带有简单分页插件的 MySql 查询，它只显示下一个和上一个。

我遇到的问题是，当它在下一页滚动时，它只显示更多按钮但没有数据。如果我检查页面总页数的值，它没有值。下面是我的代码。这并不完美，但我只是想自己构建它，所以任何指针都将不胜感激。

谢谢

```
$tableName="data";
$targetpage = "exact.php";
$limit = 5;
$type = $_GET['type'];
$man = $_GET['manufacturer'];
$model_group = $_GET['model_group'];
$year = $_GET['year'];
$query = "SELECT COUNT(*) as num FROM $tableName where engine='$type' AND 
manufacturer='$man' and model_group='$model_group' and '$year' BETWEEN start_year AND 
end_year;";
$total_pages = mysql_fetch_array(mysql_query($query));
$total_pages = $total_pages['num'];
$stages = 3;
$page = mysql_escape_string($_GET['page']);
if($page){
  $start = ($page - 1) * $limit;
}else{
  $start = 0;
}
// Get page data
$query1 = "SELECT * from $tableName where engine='$type' AND manufacturer='$man' and model_group='$model_group' and '$year' BETWEEN start_year AND end_year LIMIT $start, $limit";
$result = mysql_query($query1);
// Initial page num setup
if ($page == 0){$page = 1;}
$prev = $page - 1;
$next = $page + 1;
$lastpage = ceil($total_pages/$limit);
$LastPagem1 = $lastpage - 1;
if ($page > 1){
  echo "<a href='$targetpage?page=$prev&type=$type&manufacturer=$manufacturer&year=$year'><div class='previous'><img src='images/PrevButton1.fw.png' width='108' height='58' style='border: none;'/></span></a>";
}else{}
if ($page < $lastpage){
  echo "<a href='$targetpage?page=$next&type=$type&manufacturer=$manufacturer&year=$year&model_group=$model_group'><div class='next'><img src='images/MoreButton1.fw.png' width='108' height='58' style='border: none;'/></span></a>";
}else{} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:10:08.890

您将制造商保存到变量 $man：

```
$man = $_GET['manufacturer']; 
```

但在您使用（空）变量 $manufacturer 的链接中

```
echo "<a href='$targetpage?page=$prev&type=$type&manufacturer=$manufacturer&year=$year'><div class='previous'><img src='images/PrevButton1.fw.png' width='108' height='58' style='border: none;'/></span></a>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:11:40.213

分页工作正常，我只是注意到下一个和上一个按钮中的制造商变量拼写错误，这导致了问题，因此上面的代码适用于基本的分页脚本。

# php - 如何使用 php 或 javascript 获取选定日期后的第二天？

> ID：13567325
> 
> 赞同：1
> 
> 时间：2012-11-26T14:54:14.013
> 
> 标签：php, jquery, datepicker

我正在使用 JQuery datepicker 来允许用户选择一天并预订一些东西。然后我将日期保存在数据库中，稍后我从数据库中获取日期并在数据选择器中禁用这些日期，以便下一个用户无法选择预订的日期。到目前为止，一切都很好。

当用户选择他们想要预订的日期时，我也需要禁用后天。我正在使用 php 将所选日期与有关用户的其他一些信息一起保存在数据库中。然后我使用 ajax 再次通过 php 加载日期并禁用它们。

之后我该如何禁用它们？我用 php 还是 javascript 来做呢？我不知道如何获得选定日期后的第二天以及如何保存它？或者我应该保存它还是稍后在我从 ajax 调用中取回第一个日期时添加它，然后循环遍历这些日期并使用某些函数获取第二天？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:57:30.493

如果可以的话，我会使用 PHP，只需将日期列表返回给`beforeShowDay`DatePicker 的方法。

当您将数据库中的日期添加到列表中时，也可以使用`strtotime($Date, '1 day')`添加第二天。

编辑：

```
$mysqli = new mysqli("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT distinct Date, DATE_ADD(Date, INTERVAL 31 DAY) as Tomorrow from Table";
$result = $mysqli->query($query);

$Dates = array();

/* numeric array */
while(($row = $result->fetch_array(MYSQLI_NUM)) !== null)
{
    //$Tomorrow = strtotime('1 day', $row['Date']);
    $Tomorrow = $row['Tomorrow'];
    if(!in_array($row['Date'], $Dates)) $Dates[] = $row['Date'];
    if(!in_array($Tomorrow, $Dates)) $Dates[] = $Tomorrow;
}
/* free result set */
$result->free();

/* close connection */
$mysqli->close();

header('content-type: application/json');
die(json_encode(array('Dates' => $Dates))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T14:58:57.307

您可以使用 PHP[`strtotime()`](http://php.net/manual/en/function.strtotime.php)函数：

`strtotime("+1 day", $reservationDate)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T15:00:38.203

您可以调用`onSelect`datepicker 的任何 javascript 函数

举个例子

`onSelect: function(dateText, inst){ //dateFormat: 'DD, MM d, yy' var theDate = $(inst).datepicker.formatDate('DD, MM d, yy', $(inst).datepicker.('getDate')); $("#temp_date_start").text(theDate); }`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T15:01:58.527

如果我必须解决这个问题。我会通过将一个日期发送到 PHP（来自 JavaScript）然后使用 PHP 将两个日期添加到数据库来做到这一点。所以我会使用 PHP 日期功能来获取第二天（例如使用[http://www.php.net/manual/en/datetime.add.php](http://www.php.net/manual/en/datetime.add.php)）。这是因为在 JQuery 中处理日期不像在 PHP 中那么容易，但这并不是因为它不容易，当然不可能:-)

但是，如果您想实时使用该功能。例如，如果您在单击所选日期和禁用这些日期之间没有刷新页面。在这种情况下，我建议您的 PHP 后台调用返回要禁用的日期（或元素的 id 或类似的东西）。

tl;dr：向 PHP 发送一个日期，使用 PHP 日期函数获取第二天，将两个日期保存在数据库中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T15:02:33.300

```
$("#elementID").datepicker({
       onSelect: function(selectedDate) {
          var minDate = $(this).datepicker('getDate');  //get selectedDate
              minDate.setDate(minDate.getDate()+1);     //adds one day to minDate
          //do whatever you do to disable the date using "minDate"
       }
}); 
```

# sql-server-2008 - 增加数据类型大小有什么缺陷吗？

> ID：13567326
> 
> 赞同：0
> 
> 时间：2012-11-26T14:54:14.983
> 
> 标签：sql-server-2008, tsql

在创建表的时候我们现在创建了一个小的int数据类型的表，根据我们的要求我们必须增加数据类型大小或者我们必须将数据类型从samll int更改为int。这种数据类型在许多程序中使用，并且还引用了另一个表。

现在通过增加/改变数据类型，是否有任何缺陷？如果有任何影响，那么我该如何克服它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:04:28.867

在这种情况下，对现有数据没有任何影响：只要您增加数据大小（即从 smallint 到 int，从 varchar(50) 到 varchar(100) 等）。

请参阅[http://msdn.microsoft.com/en-us/library/ms190273.aspx#alter_column](http://msdn.microsoft.com/en-us/library/ms190273.aspx#alter_column)

# excel - 允许用户在 Excel 多页用户表单中复制页面

> ID：13567329
> 
> 赞同：3
> 
> 时间：2012-11-26T14:54:22.080
> 
> 标签：excel, vba, userform

我在这里发布这个问题是因为我实际上发现了另一个与此类似的问题，“使用 Excel 中的 VBA 在多页中将元素从一页复制到另一页”我仍然有疑问，因为我不确定这将如何工作。不过，我仍然需要将我的数据字段放入一个框架中。

我需要允许用户根据需要添加尽可能多的页面，而一些用户的内容会随之移动，而有些则不会。

有一个字段让用户告诉系统他们需要复制多少次会更好吗？或者我应该只有一个按钮，上面写着“复制此页面”

此外，除了为用户输入复制 UserForm 页面之外，我还需要复制 Excel 工作表以与 Userform 中的每个复制页面相关联的过程。

对此的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T07:58:04.620

设置上限。即用户不能添加超过特定数量的页面。这将确保您不会遇到不可预见的错误。例如，用户不能添加超过 25 页（只是一个示例）请记住，在添加无限工作表时，Excel 在内存方面非常饥饿，因此定义上限是必要的。还想象一下多页中有 100 页。会太乱。

> 有一个字段让用户告诉系统他们需要复制多少次会更好吗？或者我应该只有一个按钮，上面写着“复制此页面”

我相信你可以同时拥有这两种选择。这将确保

1.  如果用户想一次性添加 6 个页面，则用户不必按下按钮 6 次。
2.  如果用户只想添加一个页面，那么用户可以简单地单击该按钮，而不是在文本框中输入“1”，然后单击复制按钮。

> 此外，除了为用户输入复制 UserForm 页面之外，我还需要复制 Excel 工作表以与 Userform 中的每个复制页面相关联的过程。

1.  这又不是问题。您可以随时使用`Worksheets.Add`方法添加更多工作表
2.  然后，您可以将页面上每个控件的源设置为相应的工作表。

这是一个简单的例子

这将创建页面的副本并将现有文本框复制到新页面并设置它的`ControlSource`属性。

**截屏**

***前***

![在此处输入图像描述](../Images/48d47b06822d2e80047421c1e486d7a0.png)

***后***

![在此处输入图像描述](../Images/45deeec2f631503755a79cf69684b5d4.png)

**代码**

```
Option Explicit

Private Sub CommandButton1_Click()
    Dim pgCount As Long
    Dim wsNew As Worksheet
    Dim ctl As Control

    '~~> Get the current count of the pages
    pgCount = MultiPage1.Pages.Count

    '~~> Add a new page
    MultiPage1.Pages.Add

    '~~> Change '0' to whatever page you want to copy from
    MultiPage1.Pages(0).Controls.Copy

    '~~> Paste it in the newly created multipage
    MultiPage1.Pages(pgCount).Paste

    '~~> Add a new sheet
    Set wsNew = ThisWorkbook.Sheets.Add

    '~~> Give the new sheet a name
    wsNew.Name = "Erika"

    '~~> Adding a test value in Range A1 so that it reflects
    '~~> When we set the ControlSource of the textbox
    wsNew.Range("A1").Value = "Hello World"

    For Each ctl In MultiPage1.Pages(pgCount).Controls
        If TypeOf ctl Is MSForms.TextBox Then
            ctl.ControlSource = wsNew.Range("A1").Address
            Exit For
        End If
    Next
End Sub 
```

这是另一个示例，您实际上可以创建一个新控件并设置它的`ControlSource`属性，而不是复制控件。

**截屏**

（同上）

**代码**

```
Option Explicit

Private Sub CommandButton1_Click()
    Dim pgCount As Long
    Dim wsNew As Worksheet
    Dim ctl As Control

    '~~> Get the current count of the pages
    pgCount = MultiPage1.Pages.Count

    '~~> Add a new page
    MultiPage1.Pages.Add

    '~~> Add a new textbox
    Set ctl = MultiPage1.Pages(pgCount).Controls.Add("Forms.TextBox.1", _
    "TextBox" & pgCount)

    '~~> Add a new sheet
    Set wsNew = ThisWorkbook.Sheets.Add

    '~~> Give the new sheet a name
    wsNew.Name = "Erika"

    '~~> Adding a test value in Range A1 so that it reflects
    '~~> When we set the ControlSource of the textbox
    wsNew.Range("A1").Value = "Hello World"

    ctl.ControlSource = wsNew.Range("A1").Address
End Sub 
```

希望这能让你开始......

# jquery - css 和 jquery 直子选择器

> ID：13567333
> 
> 赞同：0
> 
> 时间：2012-11-26T14:54:28.073
> 
> 标签：jquery, css

给出的敌人例子

```
 <div id="my_div">
        <div>aaa</div>
        <div>sss 
            <div id="this_is_not_straight_for_my_div">not straight</div> 
        </div>
        <div>ddd</div>
     </div> 
```

如何只为`my_div`元素选择直子？请告诉这个 for`css`和 for `jquery`also。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T14:56:03.150

`#my_div > div`将仅针对`#my_div`（因此不是具有长 id 的那个）的直接子级

这使用了没有[IE 6 支持的](http://www.quirksmode.org/css/contents.html)[直接子选择器](http://www.w3.org/TR/selectors/#child-combinators)

`$('#my_div > div')`是[jQuery 等价物](http://api.jquery.com/child-selector/)

jQuery 选择器将在 IE6 上工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T14:55:52.917

可以这样做：

```
$('#my_div > *') 
```

# c++ - 如何访问 Opencv 中的 RGB 值？

> ID：13567336
> 
> 赞同：7
> 
> 时间：2012-11-26T14:54:30.543
> 
> 标签：c++, opencv

我对频道数量的使用感到困惑。以下哪一项是正确的？

```
// roi is the image matrix

for(int i = 0; i < roi.rows; i++)
{
    for(int j = 0; j < roi.cols; j+=roi.channels())
    {
        int b = roi.at<cv::Vec3b>(i,j)[0];
        int g = roi.at<cv::Vec3b>(i,j)[1];
        int r = roi.at<cv::Vec3b>(i,j)[2];
        cout << r << " " << g << " " << b << endl ;
    }
} 
```

或者，

```
for(int i = 0; i < roi.rows; i++)
{
    for(int j = 0; j < roi.cols; j++)
    {
        int b = roi.at<cv::Vec3b>(i,j)[0];
        int g = roi.at<cv::Vec3b>(i,j)[1];
        int r = roi.at<cv::Vec3b>(i,j)[2];
        cout << r << " " << g << " " << b << endl ;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-20T11:25:04.747

第二个是正确的，Mat里面的rows和cols代表像素的个数，而channel跟rows和cols的个数无关。而CV默认使用BGR，所以假设Mat没有转换为RGB那么代码是正确的

参考，个人经验，[OpenCV 文档](http://docs.opencv.org/doc/user_guide/ug_mat.html#accessing-pixel-intensity-values)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T11:14:56.333

从图像中获取颜色分量的更快方法是将图像表示为`IplImage`结构，然后利用像素大小和通道数使用指针算法对其进行迭代。

例如，如果您知道您的图像是每像素 1 个字节的 3 通道图像，并且其格式为 BGR（OpenCV 中的默认值），则以下代码将访问其组件：

（在下面的代码`img`中，类型为`IplImage`。）

```
for (int y = 0; y < img->height; y++) {
    for(int x = 0; x < img->width; x++) {
        uchar *blue = ((uchar*)(img->imageData + img->widthStep*y))[x*3];
        uchar *green = ((uchar*)(img->imageData + img->widthStep*y))[x*3+1];
        uchar *red = ((uchar*)(img->imageData + img->widthStep*y))[x*3+2];
    }
} 
```

对于更灵活的方法，您可以使用以下`CV_IMAGE_ELEM`定义的宏`types_c.h`：

```
/* get reference to pixel at (col,row),
   for multi-channel images (col) should be multiplied by number of channels */
#define CV_IMAGE_ELEM( image, elemtype, row, col )       \
    (((elemtype*)((image)->imageData + (image)->widthStep*(row)))[(col)]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T10:21:25.783

我猜第二个是正确的，但是获取这样的数据非常耗时。

一种更快的方法是使用 IplImage* 数据结构并使用 roi 中包含的数据大小来增加指向的地址...

# javascript - Javascript 显示/隐藏在 IE8 中不起作用

> ID：13567341
> 
> 赞同：4
> 
> 时间：2012-11-26T14:54:49.307
> 
> 标签：javascript, show-hide

我有这段代码可以在 FF、Chrome、Safari 甚至 IE9 中运行。自然，它在 IE8 中不起作用。这是使用 Javascript 在两个 div 上显示/隐藏。我对JS不是很精通，所以任何帮助都将不胜感激。

**Javascript函数：**

```
function showonlyone(thechosenone) {
  var subscriberinfo = document.getElementsByTagName("div");
  for(var x=0; x<subscriberinfo.length; x++) {
    name = subscriberinfo[x].getAttribute("class");
    if (name == 'subscriberinfo') {
      if (subscriberinfo[x].id == thechosenone) {
        subscriberinfo[x].style.display = 'block';
      } else {
        subscriberinfo[x].style.display = 'none';
      }
    }
  }
} 
```

**HTML 代码：**

```
<ul class="options">
  <div class="subscriber-options">
    <a href="javascript:showonlyone('subscriberinfo1');" >Account</a>
  </div>
  <div class="subscriber-options">
    <a href="javascript:showonlyone('subscriberinfo2');" >Subscriber Options</a>
  </div>
</ul>
<!-- options -->
<div class="subscriberinfo" id="subscriberinfo1">Div #1</div>
<!-- subscriberinfo1 -->
<div class="subscriberinfo" id="subscriberinfo2" style="display: none;">Div #2</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T15:05:16.640

而不是`getAttribute("class")`你试过`className`吗？

```
function showonlyone(thechosenone) {
  var subscriberinfo = document.getElementsByTagName("div");

  for(var x=0; x<subscriberinfo.length; x++) {
    name = subscriberinfo[x].className;  // <-- Here is the change
    if (name == 'subscriberinfo') {
      subscriberinfo[x].style.display = 
          (subscriberinfo[x].id == thechosenone) ? 'block' : 'none';
    }
  }
} 
```

# java - 从 array.xml 检索值并在主要活动中检查它

> ID：13567344
> 
> 赞同：0
> 
> 时间：2012-11-26T14:54:56.587
> 
> 标签：java, android

我对从 XML 文件中检索值以及如何有效地使用它没有明确的工作知识。有人可以帮我理解，怎么做？

这是我的文件和我的主要活动。我需要做的是，我将从设置中选择一个运算符，然后我将检查确切的运算符名称，并从名为 CallManager 的类中检索几个所需的字符串，并由另一个调用代码分段。我是为单个操作员做的，其中 preString 和内部数字大小是固定的。所以没问题。但我需要为其中几个做，从首选项中取名字。请帮助。谢谢-Piyal

```
<string-array name="operatormodes">
    <item >Airtel</item>
    <item >Banglalink</item>
    <item >Grameen Phone</item>
    <item >Robi</item>
    <item >TeleTalk</item>
</string-array>

prefs = PreferenceManager.getDefaultSharedPreferences(this);

  // Operator
  prefs.edit().putString(PreferencesActivity.KEY_OPERATOR_MODE, CaptureActivity.DEFAULT_OPERATOR_MODE).commit();

  // Retrieve from preferences, and set in this Activity, the Operator mode
  String[] operatorModes = getResources().getStringArray(R.array.operatormodes);
  String operatorModeName = prefs.getString(PreferencesActivity.KEY_OPERATOR_MODE, operatorModes[0]);
  Log.w("im changed", "Airtel");
  if (operatorModeName.equals(operatorModes[0])) 
  {
      callManager.setOperatorName("Airtel");
      callManager.setOperatorBasedInternalDigit("Airtel");
      callManager.setOperatorBasedInternalPreString("Airtel");
      callManager.setPreString(callManager.internalPreString);
  }
  else if (operatorModeName.equals(operatorModes[1])) 
  {
      callManager.setOperatorName("Banglalink");
      callManager.setOperatorBasedInternalDigit("Banglalink");
      callManager.setOperatorBasedInternalPreString("Banglalink");
      callManager.setPreString(callManager.internalPreString);
  }
  else if (operatorModeName.equals(operatorModes[2])) 
  {
      callManager.setOperatorName("Grameen Phone");
      callManager.setOperatorBasedInternalDigit("Grameen Phone");
      callManager.setOperatorBasedInternalPreString("Grameen Phone");
      callManager.setPreString(callManager.internalPreString);
  }

  else if (operatorModeName.equals(operatorModes[3])) 
  {
      callManager.setOperatorName("Robi");
      callManager.setOperatorBasedInternalDigit("Robi");
      callManager.setOperatorBasedInternalPreString("Robi");
      callManager.setPreString(callManager.internalPreString);
  }

  else if (operatorModeName.equals(operatorModes[4])) 
  {
      callManager.setOperatorName("TeleTalk");
      callManager.setOperatorBasedInternalDigit("TeleTalk");
      callManager.setOperatorBasedInternalPreString("TeleTalk");
      callManager.setPreString(callManager.internalPreString);
  }

  prefs.registerOnSharedPreferenceChangeListener(listener); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:19:37.080

这个问题不是很清楚，但我希望这个片段可以帮助你：

```
 String[] operatorModes = getResources().getStringArray(R.array.operatormodes);
  String operatorModeName = prefs.getString(PreferencesActivity.KEY_OPERATOR_MODE, operatorModes[0]);
  Log.w("im changed", operatorModeName);
  for(int i = 0; i < operatorModes.length; i++) {
      if (operatorModeName.equals(operatorModes[i])) 
      {
          callManager.setOperatorName(operatorModeName);
          callManager.setOperatorBasedInternalDigit(operatorModeName);
          callManager.setOperatorBasedInternalPreString(operatorModeName);
          callManager.setPreString(callManager.internalPreString);
      }
  }    

  prefs.registerOnSharedPreferenceChangeListener(listener); 
```

# python - 如何计算 2D numpy 数组的所有列的总和（有效）

> ID：13567345
> 
> 赞同：81
> 
> 时间：2012-11-26T14:55:05.183
> 
> 标签：python, numpy

假设我有以下由四行三列组成的二维 numpy 数组：

```
>>> a = numpy.arange(12).reshape(4,3)
>>> print(a)
[[ 0  1  2]
 [ 3  4  5]
 [ 6  7  8]
 [ 9 10 11]] 
```

生成包含所有列的总和（如`[18, 22, 26]`）的一维数组的有效方法是什么？这可以在不需要遍历所有列的情况下完成吗？

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2012-11-26T14:58:17.930

查看 的文档[`numpy.sum`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.sum.html)，特别注意`axis`参数。总结列：

```
>>> import numpy as np
>>> a = np.arange(12).reshape(4,3)
>>> a.sum(axis=0)
array([18, 22, 26]) 
```

或者，总结行：

```
>>> a.sum(axis=1)
array([ 3, 12, 21, 30]) 
```

其他聚合函数，例如和[`numpy.mean`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.mean.html)，也采用参数。[`numpy.cumsum`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.cumsum.html)[`numpy.std`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.std.html)`axis`

来自[暂定的 Numpy 教程](https://scipy.github.io/old-wiki/pages/Tentative_NumPy_Tutorial#Basic_Operations)：

> 许多一元运算，例如计算数组中所有元素的总和，都是作为`ndarray`类的方法实现的。默认情况下，这些操作适用于数组，就好像它是一个数字列表一样，无论其形状如何。但是，通过指定`axis` 参数，您可以沿数组的指定轴应用操作：

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-08-29T11:19:59.327

对列求和的其他替代方法是

```
numpy.einsum('ij->j', a) 
```

和

```
numpy.dot(a.T, numpy.ones(a.shape[0])) 
```

如果行数和列数处于同一数量级，则所有可能性大致相同：

[![在此处输入图像描述](../Images/1dd156fb8f5c942d9cae78395c353db6.png)](https://i.stack.imgur.com/z79y2.png)

但是，如果只有几列，则`einsum`和`dot`解决方案都显着优于 numpy 的`sum`（注意对数刻度）：

[![在此处输入图像描述](../Images/f450e7dd0796dbda397532afb005d8b5.png)](https://i.stack.imgur.com/rGxgt.png)

* * *

重现绘图的代码：

```
import numpy
import perfplot

def numpy_sum(a):
    return numpy.sum(a, axis=1)

def einsum(a):
    return numpy.einsum('ij->i', a)

def dot_ones(a):
    return numpy.dot(a, numpy.ones(a.shape[1]))

perfplot.save(
    "out1.png",
    # setup=lambda n: numpy.random.rand(n, n),
    setup=lambda n: numpy.random.rand(n, 3),
    n_range=[2**k for k in range(15)],
    kernels=[numpy_sum, einsum, dot_ones],
    logx=True,
    logy=True,
    xlabel='len(a)',
    ) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-26T15:00:03.350

使用`axis`参数：

```
>> numpy.sum(a, axis=0)
  array([18, 22, 26]) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-26T14:58:37.093

使用[`numpy.sum`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.sum.html). 对于你的情况，它是

```
sum = a.sum(axis=0) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-26T15:00:33.133

然后 NumPy`sum`函数接受一个可选的轴参数，该参数指定您希望沿哪个轴执行总和：

```
>>> a = numpy.arange(12).reshape(4,3)
>>> a.sum(0)
array([18, 22, 26]) 
```

或者，等效地：

```
>>> numpy.sum(a, 0)
array([18, 22, 26]) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-08-24T05:43:04.473

```
a.sum(0) 
```

应该解决问题。这是一个 2d `np.array`，您将获得所有列的总和。`axis=0`是指向下方的维度和`axis=1`指向右侧的维度。

# caching - Zend 框架缓存

> ID：13567348
> 
> 赞同：0
> 
> 时间：2012-11-26T14:55:15.230
> 
> 标签：caching, serialization, zend-cache

我正在尝试制作一个 ajax 自动完成搜索框，它当然使用 SQL，最少 3 个字符，并且已经在数据库中设置并索引了相关字段的 SQL 视图。搜索时 CPU 仍然会出现峰值，这是我预期的，因为它正在为每个字符运行查询。我想使用 Zend shm 缓存来加快结果并减少 CPU 使用率。结果存储在一个数组中，该数组将像这样被缓存：

```
while($row = db2_fetch_row($stmt)) {
  $fSearch[trim($row[0]).trim($row[1])] = array(/*array built here*/);
}
if (zend_shm_cache_store('fSearch', $fSearch, 10 * 60) === false) {
  error_log('Failed to store search cache!');
} 
```

当然，数组中包含实际数据而不是注释，为了简单起见，我只是缩短了代码。第 0 行和第 1 行形成 PK，并且经过测试可以正常工作。是 zend_shm_cache_store 失败，因为错误日志被“无法存储搜索缓存！”淹没。我读到 zend_shm_cache_store 可以存储任何可以序列化的数组 - 我如何判断我的数据是序列化的还是可以序列化的？还有其他潜在原因吗？我确实制作了一个只存储一个字符串并且成功的测试页面，所以我知道缓存已打开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:52:42.637

已解决：缓存大小对于数组来说太小 - 增加缓存大小并且工作正常。抱歉，添麻烦了。

# php - PHP / MySQL - 查询循环？

> ID：13567353
> 
> 赞同：0
> 
> 时间：2012-11-26T14:55:35.907
> 
> 标签：php, mysql

我有以下功能：

```
private static function getFixedFare($FixedFareId) {

    $pdo = new SQL();
    $dbh = $pdo->connect(Database::$serverIP, Database::$serverPort, Database::$dbName, Database::$user, Database::$pass);

    try {

        $query =   "SELECT Fare FROM tblfixedfare
                    WHERE FixedFareId = :fixed_fare_id
                    AND DayHalf = :day_half";

        $stmt = $dbh->prepare($query);

        $stmt->bindParam(':fixed_fare_id', $FixedFareId, PDO::PARAM_INT);
        $stmt->bindParam(':day_half', self::$day_half, PDO::PARAM_STR);

        $stmt->execute();

        $result = $stmt->fetch(PDO::FETCH_COLUMN);

        $stmt->closeCursor();

        $dbh = null;

        return $result;

    }

    catch (PDOException $pe) {
        die("Error: " .$pe->getMessage(). " Query: ".$stmt->queryString);
    }

} 
```

基本上我想更改查询以进行九种不同的选择，如下所示：

```
 $query =   "SELECT Fare FROM tblfixedfare
                    WHERE FixedFareId = :fixed_fare_id
                    AND DayHalf = :day_half
                    AND CarType = 'Car'"; 
```

和

```
 $query =   "SELECT Fare FROM tblfixedfare
                    WHERE FixedFareId = :fixed_fare_id
                    AND DayHalf = :day_half
                    AND CarType = 'Est'"; 
```

对于所有其他车型，“Exec”、“ExecEst”、“6B”、“7B”、“7W”、“8B”和“Bus”也是如此，它们只会是这些车型。

我希望我可以将这些查询结果中的每一个存储到不同的变量中，而不必执行 9 次不同的查询（减少代码）。比如一个循环然后将结果存储到$resultcar、$resulttest等等...

不知道我会如何做到这一点，所以任何帮助将不胜感激！:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:15:14.577

你可以做一个 IN

```
SELECT CarType, Fare FROM tblfixedfare
WHERE FixedFareId = :fixed_fare_id
AND DayHalf = :day_half
AND CarType IN ('Car', 'Est' ...); 
```

请注意，您必须在 Select 中包含 CarType，以便在查询后过滤它们。

**更新：**您可以像这样按 CarType 对结果进行分组：

```
 $results = $stmt->fetchAll(PDO::FETCH_ASSOC|PDO::FETCH_GROUP); 
```

上面的代码应该给你类似的东西：

```
array(
    'Car' => array(
        // data
    ),
    'Est' => array(
         // data
    )
) 
```

如果您不介意更改变量，则可以立即将它们放入变量中，而无需遍历[extract(...)](http://php.net/manual/en/function.extract.php)

所以喂

```
$results = $stmt->fetchAll(PDO::FETCH_COLUMN|PDO::FETCH_GROUP); 
```

这是上面提到的要提取的数组：

```
extract($results, EXTR_PREFIX_ALL, 'result'); 
```

将使您已经在变量中拥有结果集：

```
var_dump($result_Car);
array(2) {
    [0]=> array(1) {
        ["Fare"]=> string(1) "100"
    }
    [1]=>
    array(1) {
        ["Fare"]=> string(1) "200"
    }
} 
```

总而言之，一行：

```
extract($q->fetchAll(PDO::FETCH_ASSOC|PDO::FETCH_GROUP), EXTR_PREFIX_ALL, 'result'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T15:18:57.100

为了对九种不同的汽车类型重复查询，您可以将每个汽车名称存储到一个数组中，并循环遍历数组，每次插入新名称：

```
$cars = array();
array_push($cars, "Car", "Est", "Exec", "ExecEst", "6B", "7B", "8B","Bus");

for($i=0; $i < sizeof($cars); $i++)
{
         try {

            $query =   "SELECT Fare FROM tblfixedfare
                        WHERE FixedFareId = :fixed_fare_id
                        AND DayHalf = :day_half
                        AND CarType = '".$cars[i]."'";

            //.....rest of your code    
         }

         catch (PDOException $pe) {
             die("Error: " .$pe->getMessage(). " Query: ".$stmt->queryString);
         }
} 
```

然后，您可以使用汽车名称（即 $cars[i] ）作为键将每个查询的结果存储在一个新数组中。

# python - 需要帮助正确使用变量，python

> ID：13567354
> 
> 赞同：1
> 
> 时间：2012-11-26T14:55:40.793
> 
> 标签：python, variables

所以我在一个名为 definitions.py 的文件中有很多函数

我的主文件 main.py 可以访问这些定义，并且使用这些函数也有自己的功能。

现在在 main.py 我有'从定义导入 *'

这两个文件都依赖于一组 15 个初始变量，我将这些变量放在了 definitions.py 中，这一切都很好，我的所有功能都可以正常工作，当我想将我的应用程序用作模型时，问题就出现了，其中我将想要更改一些变量以查看输出有何不同。

本质上，我希望我的初始变量位于一种碗中，每次调用函数时都会访问该碗，并且我可以交换和更改该碗中的值，这意味着调用的下一个函数使用更新的变量。

我现在遇到的问题是，我认为，因为变量是写在 definitions.py 中的，我无法更改它们。

即使在python shell中，我也可以将n1等于别的东西，执行一个使用n1的函数，但它将使用旧的n1，而不是新的n1，我认为是因为变量在definition.py文件中没有改变。

是否有某种方法可以让我不知道实时访问变量？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T15:01:18.717

你应该使用一个类。例如，如果您的`definitions.py`文件有：

```
variable1 = 3
variable2 = 'stuff'

def spam(arg1):
    return 'spam' + arg1

def eggs(arg1,arg2):
    return 'eggs' + arg1 + arg2 
```

将其更改为

```
class Definitions():
    def __init__():
        self.variable1 = 3
        self.variable2 = 'stuff'

    def spam(self,arg1):
        return 'spam' + arg1

    def eggs(self,arg1,arg2):
        return 'eggs' + arg1 + arg2 
```

现在，从您的`main.py`文件中，您可以以稍微不同的方式导入并扫描多个参数值：

```
import definitions

for parameter in xrange(0,10):
    defs = definitions.Definitions()
    defs.variable1 = parameter

    # do some stuff and store the result

# compare the various results 
```

请记住，现在您的函数在一个类中，因此`spam('mail')`您应该调用而不是调用，`defs.spam('mail')`等等。

# memory-management - 启用 PAE 的进程的虚拟地址空间

> ID：13567357
> 
> 赞同：0
> 
> 时间：2012-11-26T14:55:52.333
> 
> 标签：memory-management, x86, kernel

我有一个启用了 PAE 的 32 位 Intel 处理器。

地址总线 -> 36 位（启用 PAE）

数据总线 -> 32 位

这个系统（windows或linux）中进程的虚拟地址空间范围是多少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T14:57:17.133

在 32 位 CPU 上，虚拟地址指针是 32 位的。因此，每个虚拟地址空间（通常在现代操作系统上每个进程一个）的范围为 4GB。PAE 只影响物理内存的处理方式，它对虚拟地址没有影响。

单个进程在任何时候最多可以映射到 4GB 的虚拟内存。通常，32 位操作系统将其限制为 3GB 或 2GB，因为它们使用一些地址空间进行内核映射。

# java - 同一端口上的多个 TCP 服务器

> ID：13567361
> 
> 赞同：6
> 
> 时间：2012-11-26T14:55:59.150
> 
> 标签：java, tcp, apache-mina

这对我来说看起来很奇怪。我可以在同一个端口上运行多个 TCP 服务器。

我使用带有以下代码的 Apache MINA 库：

```
IoAcceptor acceptor = new NioSocketAcceptor();
acceptor.bind(new InetSocketAddress(80)); 
```

端口 80 已被另一个程序使用。但我没有收到异常“地址已在使用中”。使用 netstat 我可以看到以下内容：

```
C:\>netstat -oan |find /i "LIST"
  TCP    0.0.0.0:80             0.0.0.0:0              LISTENING       2220
  TCP    0.0.0.0:80             0.0.0.0:0              LISTENING       904
  TCP    0.0.0.0:135            0.0.0.0:0              LISTENING       840 
```

有人可以向我解释这种行为吗？

操作系统：Windows 7。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T01:23:52.257

通常只有一个进程可以侦听 TCP 端口、Windows 或任何其他操作系统（至少是主要操作系统）。在 Windows 上，如果两个进程共享端口，您可能会收到错误代码 10048。如果进程绑定到不同的接口地址，这将不适用（即使一个绑定到`INADDR_ANY`并且另一个绑定到特定地址，它们也不会发生冲突）。[`SO_REUSEADDR`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740621%28v=vs.85%29.aspx)此外，如果已在第二个套接字上设置，则这不适用。

由于这两个进程都绑定到`INADDR_ANY`并且您声称您的进程尚未`SO_REUSEADDR`设置，因此这是一个难题。据我所知，有三种可能：

1.  底层库中的某些内容是`SO_REUSEADDR`默认设置的。
2.  第二个套接字实际上是稍后打开的，它是指定`SO_REUSEADDR`.
3.  Windows 套接字层中存在允许此操作的错误。

我意识到没有软件是完美的，但我真的很犹豫选择第三个选项，特别是如果你可以轻松地复制它。我建议`netstat`在开始您的流程之前和之后仔细观察输出，并查看在此之前是否存在其他侦听器。此外，尝试识别其他进程并查看它是否相关（您可以为此启用任务管理器中的 PID 列）。

**编辑**

下面的评论者提醒我，我应该指出，`SO_REUSEADDR`跨平台的行为确实不同。Windows 允许使用选项强制绑定到与其他侦听套接字相同的端口的新套接字，如果两个套接字都是 TCP，则具有未确定的行为，如此[处](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740621%28v=vs.85%29.aspx)所述。在实践中，第二个套接字可能会“窃取”地址，但官方的说法似乎是行为未定义：

> 一旦第二个套接字成功绑定，绑定到该端口的所有套接字的行为都是不确定的。例如，如果同一端口上的所有套接字都提供 TCP 服务，则无法保证通过该端口传入的任何 TCP 连接请求都由正确的套接字处理——这种行为是不确定的。

如果旧的 TCP 套接字仍在侦听，Linux（和其他 Unix 变体）将不允许两个 TCP 套接字共享同一个端口。在这种情况下，`SO_REUSEADDR`仅当旧套接字处于 TIME_WAIT 时才允许新套接字绑定（也许是 FIN_WAIT 和 CLOSE_WAIT 状态，我必须检查一下）。

顺便说一句，当我第一次在 Windows 中遇到它时，我发现行为上的差异非常令人惊讶，但我自己测试过，当然如果你`SO_REUSEADDR`在两个套接字上都设置它很可能同时成功绑定到完全相同的地址和端口. 但是，我还没有对这种情况下的确切行为进行广泛的测试，因为在我的情况下它并不重要。

我不打算进入哪个平台是“正确的”，但 Windows 行为肯定会导致安全问题，这就是为什么他们想出`SO_EXCLUSIVEADDRUSE`防止其他套接字强制绑定的选项的原因。我似乎也有人认为 Windows 版本应该被视为一个完全不同的选项，具有不同的行为，只是恰好具有相同的名称。

# linux - Mutt 命令的多个标头

> ID：13567367
> 
> 赞同：4
> 
> 时间：2012-11-26T14:56:27.787
> 
> 标签：linux, email, mutt

我想为 mutt 命令设置两个标头。这是我正在使用的。

```
mutt -s "Subject" -e "my_hdr From:abc@gmail.com Content-Type: text/html" xyz@gmail.com < body.html 
```

但它不起作用。如何使用`-e`选项设置多个标题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-26T15:28:17.863

使用多个`-e`选项：

```
mutt -s "Subject" \
  -e "my_hdr From: abc@gmail.com" \
  -e "my_hdr Content-Type: text/html" \
  xyz@gmail.com < body.html 
```

# c++ - 可选地支持模板的 initializer_list 构造可能包装容器

> ID：13567370
> 
> 赞同：10
> 
> 时间：2012-11-26T14:56:36.590
> 
> 标签：c++, templates, c++11, initializer-list, enable-if

如果我有一个包装标准容器的模板，我似乎可以相当容易地委托 initializer_list 构造函数：

```
template<typename T>
struct holder {
    T t_;

    holder() :
        t_() {}

    holder(std::initializer_list<typename T::value_type> values)
        : t_(values) {}

}; 
```

例如，这可以很好地与 std::vector 一起使用。

```
int main(int argc, char* argv[]) {

    holder<std::vector<int>> y{1,2,3};
    return EXIT_SUCCESS;
} 
```

但它显然不适用于 T as 'int'，或任何其他没有嵌套 value_type typedef 的类型。所以，我想使用某种 enable_if 或类似的技巧来使 initializer_list 构造函数不被发出，除非 T 都定义了嵌套的 value_type typedef，并且可以从 std::initializer_list 构造。

我尝试了以下方法，但它仍然不起作用，因为编译器（在我的情况下是 clang++ 3.1）在 T 为 int 时仍然会绊倒无效的 T::value_type：

```
holder(typename std::enable_if<std::is_constructible<T, std::initializer_list<typename T::value_type>>::value, std::initializer_list<typename T::value_type>>::type values)
    : t_(values) {} 
```

关于如何表达概念的任何想法“给 T 上的这个模板一个基于 T 的 value_type 的初始化列表构造函数，当且仅当 T 具有 value_type typedef 并且可以从 T::value_type 的 initializer_list 构造”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T15:00:31.697

SFINAE 仅适用于模板参数替换（因此 SFINAE 中的 S）。以下作品：

```
template<typename T>
struct holder {
    T t_;

    holder() :
        t_() {}

    template<typename U = T>
    holder(typename std::enable_if<std::is_constructible<U, std::initializer_list<typename U::value_type>>::value, 
    std::initializer_list<typename U::value_type>>::type values)
    : t_(values) {}

}; 
```

如果您没有使用模板函数，那么整个类将被实例化为该类型`int`（在您的示例中），从而导致编译器错误。

请注意，如果您使用额外的模板参数，您可以使函数签名更好：

```
template<typename U = T, class = typename std::enable_if<std::is_constructible<U, std::initializer_list<typename U::value_type>>::value, bool>::type>
    holder(std::initializer_list<typename U::value_type> values)
    : t_(values) {} 
```

# python - 使用 Mayavi 绘制不规则间隔数据的等值面

> ID：13567379
> 
> 赞同：1
> 
> 时间：2012-11-26T14:57:25.280
> 
> 标签：python, plot, mayavi

我有位于极坐标点网格上的标量值。虽然我可以自由选择 theta 和 phi 角度，但 r 值是由我的数据评估中的另一个步骤给出的。如何使用 mayavi 绘制等值面和一些切割数据？

此刻，我正在尝试使用 scipy.interpolate.griddata 来获取欧几里德网格，但它已经工作了几个小时而没有结果......

```
from scipy import *
from enthought.mayavi import mlab

r_val = [0.5, 1.0, 1.5, 2.0] # externally given
r, theta, phi = mgrid[ \
        r_val[0]:r_val[-1]:len(r_val)*1.j, \
        0:pi:len(r_val)*1.j, \
        0:2.*pi:len(r_val)*1.j ]
x = r*sin(theta)*cos(phi)
y = r*sin(theta)*sin(phi)
z = r*cos(theta)
# here would be the data
s = ones_like(x)
s *= r*r
# the x,y,z axes of this plot are r,theta,phi
mlab.contour3d(s)
# but I want them to be x,y,z!
# this does not work
#mlab.contour3d(x,y,z,s) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T22:20:19.190

见[http://permalink.gmane.org/gmane.comp.python.enthought.devel/20667](http://permalink.gmane.org/gmane.comp.python.enthought.devel/20667)

```
src = mlab.pipeline.scalar_scatter(x,y,z,s)
iso=mlab.pipeline.iso_surface(gs) 
```

# objective-c - 计算“$”在字符串中出现的次数（目标 C）

> ID：13567382
> 
> 赞同：4
> 
> 时间：2012-11-26T14:57:39.130
> 
> 标签：objective-c, arrays, string, int

我想知道是否有一种简单的方法可以找到诸如“$”之类的字符在objective-c语言的字符串中出现的次数。

我使用的真实世界示例是一个字符串，如下所示：

```
542$764$231$DataEntry 
```

我需要做的是首先：

1）计算'$'出现的次数，以了解DataEntry在我的数据库中的哪一层（我的数据库结构是我编造的）

2）然后我需要获取所有数字，因为它们是索引号。这些数字需要存储在 NSArray 中。我将遍历它们以获得不同的索引。我不会解释我的数据库结构是如何工作的，因为这无关紧要。

基本上从那个 NSString，我需要，'$' 出现的次数。以及美元符号之间的所有数字。在 PHP 中这将是一件轻而易举的事，但我很想知道如何在 Objective-C 中实现这一点。

谢谢，

迈克尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T15:03:21.177

```
[[@"542$764$231$DataEntry" componentsSeparatedByString:@"$"] count]-1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T15:20:06.113

@Parag `componentsSeparatedByString`Bafna 和 @J Shapiro 建议的或`NSRegularExpression`例如：

```
#import <Foundation/Foundation.h>

int main(int argc, char *argv[]) {
    @autoreleasepool {
        NSError *error = NULL;
        NSString *searchText = @"542$764$231$DataEntry";
        NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"(\\d{3})\\$" options:NSRegularExpressionCaseInsensitive error:&error];
        NSUInteger numberOfMatches = [regex numberOfMatchesInString:searchText options:0 range:NSMakeRange(0, [searchText length]) ];

        printf("match count = %ld\n",numberOfMatches);
        [regex enumerateMatchesInString:searchText 
                                options:0 
                                  range:NSMakeRange(0,[searchText length]) 
                             usingBlock:^(NSTextCheckingResult *match, NSMatchingFlags flags, BOOL *stop){
            NSRange range = [match rangeAtIndex:1];
            printf("match = %s\n",[[searchText substringWithRange:range] UTF8String]);
        }];     
    }
} 
```

在模式具有简单的重复定界符的情况下，这`componentsSeparatedByString`可能是首选方法并且性能更高；但为了完整起见，我包括了这种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T15:36:07.743

试试这个代码：

```
 NSMutableArray* substrings=[NSMutableArray new];
    // This will contain all the substrings
    NSMutableArray* numbers=[NSMutableArray new];
    // This will contain all the numbers
    NSNumberFormatter* formatter=[NSNumberFormatter new];
    // The formatter will scan all the strings and estabilish if they're
    // valid numbers, if so it will produce a NSNumber object
    [formatter setNumberStyle: NSNumberFormatterDecimalStyle];
    NSString* entry= @"542$764$231$DataEntry";
    NSUInteger count=0,last=0;
    // count will contain the number of '$' characters found
    NSRange range=NSMakeRange(0, entry.length);
    // range is the range where to check
    do
    {
        range= [entry rangeOfString: @"$" options: NSLiteralSearch range: range];
        // Check for a substring
        if(range.location!=NSNotFound)
        {
            // If there's not a further substring range.location will be NSNotFound
            NSRange substringRange= NSMakeRange(last, range.location-last);
            // Get the range of the substring
            NSString* substring=[entry substringWithRange: substringRange];
            [substrings addObject: substring];
            // Get the substring and add it to the substrings mutable array
            last=range.location+1;
            range= NSMakeRange(range.location+range.length, entry.length-range.length-range.location);
            // Calculate the new range where to check for the next substring
            count++;
            // Increase the count
        }
    }while( range.location!=NSNotFound);
    // Now count contains the number of '$' characters found, and substrings
    // contains all the substrings separated by '$'
    for(NSString* substring in substrings)
    {
        // Check all the substrings found
        NSNumber* number;
        if([formatter getObjectValue: &number forString: substring range: nil error: nil])
        {
            // If the substring is a valid number, the method returns YES and we go
            // inside this scope, so we can add the number to the numbers array
            [numbers addObject: number];
        }
    }
    // Now numbers contains all the numbers found 
```

# google-analytics - 谷歌分析事件跟踪不工作

> ID：13567383
> 
> 赞同：3
> 
> 时间：2012-11-26T14:57:43.440
> 
> 标签：google-analytics

我`_trackEvent()`在 Google Analytics 中为文件下载添加了一个跟踪事件，但它不起作用。我已经等了 24 小时，等待 Google Analytics 上的事件跟踪更新。我的代码是：

```
<a class="buttonstyle" href="/DownloadDocuments/WINTER_2012_Magazine_visual.pdf" target="_blank"     onclick="return documentDownload(this, 'WINTER_2012_Magazine_visual.pdf');">Download</a>

<script>
function documentDownload(link, downloadFileName) {
_gaq.push(['_trackEvent', 'Downloads', 'Click', downloadFileName]);
setTimeout('document.location = "' + link.href + '"', 500);

return false;
}
</script> 
```

我已经检查了控制台，这对我来说看起来不错：

```
_gaq.push processing "_trackEvent" for args: "[Downloads,Click,WINTER_2012_Magazine_visual.pdf]":    ga_debug.js:18
Track Event ga_debug.js:18
Tracking beacon sent!
utmwv=5.3.8d&utms=15&utmn=1916071374&utmhn=www.testmarketingstore.co.uk&utmt=event&utme=5(Downloads*Click*WINTER_2012_Magazine_visual.pdf)&utmcs=UTF-8&utmsr=1920x1080&utmvp=1903x955&utmsc=32-bit&utmul=en-gb&utmje=1&utmfl=11.5%20r31&utmdt=Test%20Marketing%20Store&utmhid=972203903&utmr=-&utmp=%2Fasp%2Fca%2Fced.asp%3FdisplayType%3Ddocs%26searchCriteria%3Duseful&utmac=UA-XXXXX-X&utmcc=__utma%3D231962136.231857795.1353415477.1353932330.1353939554.6%3B%2B__utmz%3D231962136.1353415477.1.1.utmcsr%3D(direct)%7Cutmccn%3D(direct)%7Cutmcmd%3D(none)%3B&utmu=yAAAAAAAAC~ ga_debug.js:18
Account ID               : UA-XXXXX-X
Page Title               : Test Marketing Store
Host Name                : www.testmarketingstore.co.uk
Page                         : /asp/ca/ced.asp?displayType=docs&searchCriteria=useful
Referring URL            : -
Hit ID                   : 972203903
Hit Type                 : event
Event Name               : Downloads
Event Type               : Click
Event Label              : WINTER_2012_Magazine_visual.pdf
Visitor ID               : 231857795
Session Count            : 6
Session Time - First     : Tue Nov 20 2012 12:44:37 GMT 0000 (GMT Standard Time)
Session Time - Last      : Mon Nov 26 2012 12:18:50 GMT 0000 (GMT Standard Time)
Session Time - Current   : Mon Nov 26 2012 14:19:14 GMT 0000 (GMT Standard Time)
Campaign Time            : Tue Nov 20 2012 12:44:37 GMT 0000 (GMT Standard Time)
Campaign Session         : 1
Campaign Count           : 1
Campaign Source          : (direct)
Campaign Medium          : (none);
Campaign Name            : (direct)
Language                 : en-gb
Encoding                 : UTF-8
Flash Version            : 11.5 r31
Java Enabled             : true
Screen Resolution        : 1920x1080
Browser Size             : 1903x955
Color Depth              : 32-bit
Ga.js Version            : 5.3.8d
Cachebuster              : 1916071374 
```

谁能给我一些关于如何追踪问题的建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T16:07:54.533

您将旧式同步分析代码（在您的分析代码片段中）与新式异步代码（在您的事件跟踪中）混合在一起。因此，`_trackEvent`呼叫使用具有默认 UA-XXXXX-X UID 的分析跟踪器。

两个选项：将事件跟踪代码更改为同步代码：

```
function documentDownload(link, downloadFileName) {
  pageTracker._trackEvent('Downloads', 'Click', downloadFileName);
  setTimeout('document.location = "' + link.href + '"', 500);
  return false;
} 
```

或将 Google 分析代码更新为异步样式：

```
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-464435-4']);
_gaq.push(['_trackPageview']);
(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-09T14:07:32.603

您还应该发送 _gaq.push(['_setAccount', 'UA-XXXXXX-1']); 在跟踪事件之前并为 chrome 安装此扩展程序以调试 [https://chrome.google.com/webstore/detail/google-analytics-debugger/jnkmfdileelhofjcijamephohjechhna](https://chrome.google.com/webstore/detail/google-analytics-debugger/jnkmfdileelhofjcijamephohjechhna)

它对我们有用

# java-ee-6 - Java EE 6 表单身份验证和 FacesContext.isUserInRole

> ID：13567386
> 
> 赞同：1
> 
> 时间：2012-11-26T14:58:04.300
> 
> 标签：java-ee-6, facelets, form-authentication

我正在使用基于表单的身份验证（使用 JDBC 领域）来验证我的 EE 应用程序中的用户。我创建了一个`/home/*`部分，只有当用户处于角色 USER 或 ADMIN 时才能访问该部分。

一切正常，但问题是当我使用`FacesContext.getCurrentInstance().getExternalContext().isUserInRole(role)`-Method 时（例如决定是否在 gui 上显示某些 UI 组件），返回值始终为 false。

我完全不知道为什么该方法总是返回 false。我错过了什么？

最令人困惑的是，我在另一个项目中（在同一个 glassfish-server-instance 上）实现了完全相同的行为，并且它在那里工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:19:17.903

我刚刚发现了问题：我忘记添加`@DeclareRoles()`注释了。

您必须声明要在应用程序中某处使用的角色。例如，我使用一个 SingletonEJB，在其中声明我正在使用的角色（使用 DeclareRoles-Annotation）。

例子：

```
@Singleton
@LocalBean
@DeclareRoles({ "ADMIN", "USER" })
public class Application {
} 
```

# ravendb - 不使用工作室界面查询 RavenDB

> ID：13567387
> 
> 赞同：1
> 
> 时间：2012-11-26T14:58:13.203
> 
> 标签：ravendb, nservicebus

我试图在 RavenDB 管理工作室中查看我的 sagas，甚至加载初始页面，我看到的只是这个“查询文档...”框，带有一个连续移动的进度条。我似乎无法超越它，从一页到另一页它不会消失。有没有办法将所有 saga 数据拉到一个列表中以便我查看它？看来问题在于不断添加传奇文档。

我已经研究了 HTTP API 和 Linq 适配器，但我想我正在寻找已经存在的东西，可以像 silverlight 工作室一样轻松地窥视服务器，除了不那么痛苦。我或多或少只是想将所有文档的快照拉到某种可读列表中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T15:21:51.627

我发现 LINQPad 4 很方便，可以在这里找到 LINQPad 的 RavenDB 驱动程序：

[https://github.com/ronnieoverby/RavenDB-Linqpad-Driver](https://github.com/ronnieoverby/RavenDB-Linqpad-Driver)

对于命令行 - 使用动态索引的 cURL，如下所述：

[http://ravendb.net/docs/http-api/indexes/dynamic-indexes](http://ravendb.net/docs/http-api/indexes/dynamic-indexes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T13:11:45.620

在浏览器中，转到`http://localhost:8080/docs` 您可能需要安装 JsonView，但这应该可以满足您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-30T00:52:42.040

如果有人想知道如何通过 REST 调用浏览数据，

“本地主机：8080/databases/{database-name}/docs/{dataset-name}/id”

例子：

“localhost:8080/databases/testDB/docs/Sites/1”将为“站点”文档提供 json 数据

"localhost:8080/databases/testDB/docs/" 将为 testDB 中的所有文档提供 json 数据。

# rpm - RPM Spec 文件已安装但在 %doc 指令中未打包文件

> ID：13567391
> 
> 赞同：2
> 
> 时间：2012-11-26T14:58:21.683
> 
> 标签：rpm, specifications

我正在尝试创建一个 .spec 文件，并将 ChangeLog、README、INSTALL、COPYING、NEWS、AUTHORS 放在 %file 指令下的 %doc 指令中。包 tarname 是 recafoh-prealpha，版本是 svn73。rpmbuild -ba recafoh.spec 说

```
RPM build errors:
    Installed (but unpackaged) file(s) found:
   /usr/share/doc/recafoh-prealpha/COPYING
   /usr/share/doc/recafoh-prealpha/ChangeLog
   /usr/share/doc/recafoh-prealpha/INSTALL
   /usr/share/doc/recafoh-prealpha/NEWS
   /usr/share/doc/recafoh-prealpha/README
   /usr/share/doc/recafoh-prealpha/TODO 
```

但是它们安装在 BUILDROOT/usr/share/doc/recafoh-prealpha-svn73/{ChangeLog, README, INSTALL, COPYING, NEWS, AUTHORS} 中，还有一件奇怪的事情：README 也安装在 BUILDROOT/usr/share/ doc/recafoh-prealpha-svn73。

那么，任何人都可以解释 1）如何解决 rpmbuild 错误，以及 2）为什么 README 安装在 recafoh-prealpha-svn73 和 README 中，其余的安装在 recafoh-prealpha 中？

非常感谢

编辑：

这是 recafoh.spec 文件的相关部分：

```
%files
%doc AUTHORS ChangeLog COPYING NEWS README TODO
%{_sbindir}/recafohd
%{_bindir}/recafoh 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T04:08:39.007

根据[Fedora 构建文档](http://fedoraproject.org/wiki/How_to_create_an_RPM_package#.25files_prefixes)：“通常，“%doc”用于列出 %{_builddir} 中未复制到 %{buildroot} 的文档文件。通常包括一个 README 和 INSTALL 文件。它们将被放置在目录 /usr/share/doc/%{name}-%{version} 中，不需要声明其所有权。

所以你两个问题的答案都与这一点有关。我假设您的 bzip2 文件中有这些文档，包含在 /usr/share/doc/recafoh-prealpha/ 目录中，对吗？因此，如果您查看文档，这是最重要的一点：**通常，“%doc”用于列出 %{_builddir} 中未复制到 %{buildroot} 的文档文件。**

如果您希望它们位于该特定目录（以及特定于版本的目录）中，请将您的 %file 部分修改为如下所示：

```
%files
%doc AUTHORS ChangeLog COPYING NEWS README TODO
/usr/share/doc/recafoh-prealpha/COPYING
/usr/share/doc/recafoh-prealpha/ChangeLog
/usr/share/doc/recafoh-prealpha/INSTALL
/usr/share/doc/recafoh-prealpha/NEWS
/usr/share/doc/recafoh-prealpha/README
/usr/share/doc/recafoh-prealpha/TODO
%{_sbindir}/recafohd
%{_bindir}/recafoh 
```

如果您只希望它们位于 /usr/share/doc 中，请使用以下 %files 部分：

```
%files
/usr/share/doc/recafoh-prealpha/COPYING
/usr/share/doc/recafoh-prealpha/ChangeLog
/usr/share/doc/recafoh-prealpha/INSTALL
/usr/share/doc/recafoh-prealpha/NEWS
/usr/share/doc/recafoh-prealpha/README
/usr/share/doc/recafoh-prealpha/TODO
%{_sbindir}/recafohd
%{_bindir}/recafoh 
```

如果您只想将文档放在版本特定的目录中，您应该修改您的 bzip2 文件，以便文档文件是顶级的，然后它们应该与您最初提供的规范文件一起正确移动。

有关 %doc 指令的更详细信息，请查看：[rpm.org](http://www.rpm.org/max-rpm/s1-rpm-inside-files-list-directives.html#S3-RPM-INSIDE-FLIST-DOC-DIRECTIVE)。

# wkhtmltopdf - wkhtmltopdf 没有给出谷歌搜索的确切结果

> ID：13567402
> 
> 赞同：4
> 
> 时间：2012-11-26T14:58:45.003
> 
> 标签：wkhtmltopdf, google-search

**wkhtmltopdf**没有给出谷歌搜索
wkhtmltopdf 命令的准确 pdf

```
wkhtmltopdf toc --javascript-delay 5000 --load-error-handling ignore "https://www.google.co.in/search?hl=en&safe=off&client=firefox-beta&hs=1re&tbo=d&rls=org.mozilla%3Aen-US%3Aofficial&channel=fflb&q=height+of+lionel+messi&oq=height+of+lionell&gs_l=serp.3.0.0i13l2j0i13i30.3477969.3479300.0.3480775.7.7.0.0.0.0.233.1161.2j1j4.7.0.les%3B..0.0...1c.1.8wCY6CBhpqY" google.pdf 
```

试试[**谷歌搜索**](http://www.google.co.in/search?hl=en&safe=off&client=firefox-beta&hs=1re&tbo=d&rls=org.mozilla%3aen-US%3aofficial&channel=fflb&q=height%20of%20lionel%20messi&oq=height%20of%20lionell&gs_l=serp.3.0.0i13l2j0i13i30.3477969.3479300.0.3480775.7.7.0.0.0.0.233.1161.2j1j4.7.0.les;..0.0...1c.1.8wCY6CBhpqY)

在那个**1.69m**里面没有显示 google 搜索框

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T04:37:42.623

我自己得到了答案，以防将来有人遇到同样的问题
问题是我没有发送“用户代理”

**试试这个**

```
wkhtmltopdf --custom-header "User-Agent" "Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:14.0) Gecko/20100101 Firefox/14.0.1" --custom-header-propagation "https://www.google.co.in/search?hl=en&safe=off&client=firefox-beta&hs=1re&tbo=d&rls=org.mozilla%3Aen-US%3Aofficial&channel=fflb&q=height+of+lionel+messi&oq=height+of+lionell&gs_l=serp.3.0.0i13l2j0i13i30.3477969.3479300.0.3480775.7.7.0.0.0.0.233.1161.2j1j4.7.0.les%3B..0.0...1c.1.8wCY6CBhpqY" google.pdf 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-03T11:46:27.230

试试下面的命令，它会生成桌面版本：

```
wkhtmltopdf --viewport-size 1280x1024 --orientation Landscape http://site_name.com file_name.pdf 
```

# c++ - 无法显示应用程序的新图标

> ID：13567403
> 
> 赞同：0
> 
> 时间：2012-11-26T14:58:45.127
> 
> 标签：c++, mfc

我正在尝试更改应用程序的图标，并且我已经更改了它并且项目构建完全正常。

但是当应用程序启动时，我仍然在任务栏上看到默认图标。另一方面，当我单击关于时，我可以看到新图标。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:06:20.177

您需要确保图标的资源 ID 是资源中所有图标中最低的。Windows 将显示具有*最低*ID 的图标。

# android - 为什么我的标题可以在 ListFragment 上点击

> ID：13567406
> 
> 赞同：0
> 
> 时间：2012-11-26T14:58:55.737
> 
> 标签：android

我有一个 ListFragment 并且在 ListFragment.onViewCreated 我有这个代码：

```
super.onViewCreated(view, savedInstanceState);
View header = getActivity().getLayoutInflater().inflate(R.layout.rowheader, null);
this.getListView().addHeaderView(header); 
```

我的布局只有一个 LinearLayout（水平），里面有四个 TextView。

现在我不明白的是，标题接收点击事件，当它被点击时，它还会在标题上显示蓝色覆盖/颜色/事物。那怎么可能，我可以以某种方式禁用它吗？

谢谢索伦_

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:05:18.637

用这个

```
this.getListView().addHeaderView(header, null, false) 
```

代替

```
this.getListView().addHeaderView(header); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:03:58.357

什么样的对象是标题视图？

您可能想查看视图是否有`setEnabled()`方法，`setClickable()`或者`setSelectable()`. 您可以在将标题视图添加到列表视图之前进行设置

# java - Java中的复制算法

> ID：13567413
> 
> 赞同：1
> 
> 时间：2012-11-26T14:59:18.280
> 
> 标签：java, algorithm, deduplication

我在 Java 中寻找一些重复的匹配算法。我有 senario 即

我有两个表。表 1 在一个列中包含 25,000 个记录字符串，同样，表 2 包含 20,000 个记录字符串。我想检查表 1 和表 2 中的重复记录。记录类似于这种格式，例如：

**表格1**

约翰·沃尔特拉

布鲁斯·威利斯

**表 2**

伏打

布鲁斯·威利斯

寻找可以从两个不同文件中的这两个表中找到这种类型的重复字符串匹配的算法。有人能帮我介绍两个或更多可以在 Java 中执行此类查询的算法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T15:03:19.480

[将这两个文件读](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#readAllLines%28java.nio.file.Path,%20java.nio.charset.Charset%29)入[规范化](http://en.wikipedia.org/wiki/Normalization_%28statistics%29)形式，以便进行比较。使用这些条目的[集合](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html)[`retainAll()`](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html#retainAll%28java.util.Collection%29)并找到这两个集合的[交集](http://en.wikipedia.org/wiki/Intersection_%28set_theory%29)。这些是重复的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:06:09.520

您可以使用`Map<String, Integer>`（例如`HashMap`）并逐行读取文件并将字符串插入映射中，每次找到现有条目时都会增加值。

然后，您可以搜索您的地图并找到计数 > 1 的所有条目。

# vb.net - 如何在 vb.net 自动化脚本中调用 JavaScript

> ID：13567415
> 
> 赞同：1
> 
> 时间：2012-11-26T14:59:23.610
> 
> 标签：vb.net

我正在尝试创建一个自动化脚本，该脚本使用 vb.net 对网页上的元素执行单击。我在 java 中使用 selenium 创建了类似的东西来查找元素，然后单击：

```
WebElement test = driver.findElement(By.xpath("//div[@id='divMenu20100608192545780709']/div[3]"));
    String js = "arguments[0].style.height='auto'; arguments[0].style.visibility='visible';";

    ((JavascriptExecutor) driver).executeScript(js, test);
    if( test.isDisplayed()){
        jscript.executeScript("myonclick=window.parent.location.href='/smcfs/console/po.detail?CurrentDetailViewID=SPRYOMD3290';");
        Thread.sleep(3000);
        driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
    } 
```

我将如何使用 vb.net 创建它

# php - 如何在 Windows 7 上为 PHP 配置 Apache？

> ID：13567416
> 
> 赞同：2
> 
> 时间：2012-11-26T14:59:30.433
> 
> 标签：php, apache

我已经安装了 Apache 2.0(httpd-2.0.64-win32-x86-no_ssl) 并且它可以工作，然后我安装了 Php5.3 并且它指向 Apache 配置文件夹。

> > 失败的场景： 1- 创建简单的 test.php，放在 C:\Apache\Apache2\htdocs 下 2- call "http://localhost:8080/test.php" --> "Bad Request..Your browser sent a请求此服务器无法理解。”
> > 
> > NetBeans 博客提出的解决方案（失败） 1-将这两行添加到 httpd.conf AddType Application/x-httpd-php .php LoadModule php5_module "c:/php/sapi/php5apache2_2.dll" 它不起作用，因为没有 " php5apache2_2.dll”在我的 PHP 安装文件夹下？？我有这样的 .dll：php5ts.dll、ssleay32.dll、..

为了成功运行 PHP 脚本，有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:09:56.050

[下载WAMP](http://www.wampserver.com/en/)或[类似的多合一 Web 服务器](http://en.wikipedia.org/wiki/Comparison_of_WAMPs)可能是最简单的，特别是因为您的环境很可能不是生产环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:17:07.333

我知道这不是您要求的，但为什么要使用 WAMP？首先，将桌面与 DEV 环境集成不是一个好主意（它很快就会变得混乱）。Windows 不是 Web 应用程序的自然环境。

给自己一个[VMWare 播放器](http://www.vmware.com/uk/products/desktop_virtualization/player/overview.html)（它是免费的）并在上面安装 Ubuntu Server。现在，您可以在 Linux 服务器上从 Windows 工作。如果需要，您还可以将您的 VMWare 环境带回家。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T15:03:36.200

只需`php5apache2_4.dll-php-5.3-win32.zip`从[http://www.apachelounge.com/download/下载](http://www.apachelounge.com/download/)

[以下](http://lifeofageekadmin.com/how-install-apache-2-4-php-5-4-and-mysql-5-5-21-on-windows-7/)是如何配置您的 apache 以使用 PHP 5.4 的指南

# php - How to deploy a Yii app to appFog

> ID：13567418
> 
> 赞同：1
> 
> 时间：2012-11-26T14:59:36.593
> 
> 标签：php, yii, cloud-hosting, appfog

I wanted to try the appFog free plan to tryout my application I developed in Yii,I checked the jumpstart on [appFog](http://appfog.com) section that says that Yii applications are now supported by appFog

However I have checked all the documentations about framework, only drupal and wordpress were available, I searched all over the internet but I couldn't find the best docs for it

Then I decided to try to upload both Yii framework folder and my application and include an index.php file that includes the myapplication/index.php file, which seemed to be a nice try but some assest and other classes in yii are configured to look for yii framework in the root directory causing my application to crash with Yii error but not php error

If anyone has already tried or know where I can find a nice tutorial about Yii on appfog, I would really appreciate that.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T23:20:42.337

I was able to deploy a test app without doing anything tricky:

1.  Create a new php APP on AWS US East infrastruture from the appfog console

2.  Download the latest [Yii tarball](http://www.yiiframework.com/download/) and extract it to a FOLDER

3.  Create test application:

    ```
    $ cd FOLDER/framework
    $ ./yiic webapp ../testdrive 
    ```

4.  Push the changes:

    ```
    $ af update APP

    Uploading Application:
    Checking for available resources: OK
    Processing resources: OK
    Packing application: OK
    Uploading (71K): OK
    Push Status: OK
    Stopping Application 'APP': OK
    Staging Application 'APP': OK
    Starting Application 'APP': OK 
    ```

5.  Open [http://APP.aws.af.cm/testdrive/](http://APP.aws.af.cm/testdrive/) in browser:

    ```
    Welcome to My Web Application

    Congratulations! You have successfully created your Yii application. 
    ```

# java - Spring MVC 在尝试使用 mvc:resources 或 mvc:default-servlet-handler 时返回 XmlBeanDefinitionStoreException

> ID：13567420
> 
> 赞同：0
> 
> 时间：2012-11-26T14:59:46.173
> 
> 标签：java, spring, model-view-controller, spring-mvc

我刚开始使用 3.0.0 RELEASE 版本学习 Spring，当我声明标签**mvc:resources**或**mvc:default-servlet-handler**时，服务器返回 XmlBeanDefinitionStoreException，告诉我找不到标签的引用。

有人知道如何解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T00:38:19.450

好吧，经过一些工作，我发现了我的问题的答案。在 spring-context.xml 的标头中，我打开了 url 链接[http://www.springframework.org/schema/mvc](http://www.springframework.org/schema/mvc)然后选择了**spring-mvc-3.0.xsd**文件，在本例中为[这个链接](http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd)。

在使用浏览器搜索**default-servlet-handler**后，我在文件中找到了它的声明，并看到该标记所需的类是**org.springframework.web.servlet.resource.DefaultServletHttpRequestHandler**。

我在网上找了一些参考资料，说这个类是在Spring 3.0.5中实现的，我用的是3.0.0。所以，我已经下载了正确版本的框架，在我的类路径中替换它，一切正常。

# macos - 如何在 Mac OS X 中自动化 MXMLC 编译

> ID：13567421
> 
> 赞同：0
> 
> 时间：2012-11-26T14:59:56.207
> 
> 标签：macos, actionscript-3, apache-flex, automation, mxmlc

我目前正在使用终端与 MXMLC 进行编译。每次要编译都需要引入文件名，第一次打开Terminal还需要指定文件的路径。

我确信有一种更快的方法可以做到这一点。我对编程完全陌生，我还没有探索过 Mac OS X 中命令行和可执行文件的可能性。

我想知道是否有一种方法可以自动执行此任务，例如自动打开终端并输入编译所需行的可执行文件。我双击它并部署编译的文件。是否可以？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:23:19.987

编译 Flex 应用程序的方法有很多，但基本上应该归结为以下选项：

*   让您的 IDE 为您完成；当然没有办法自动化这个过程
*   使用命令行界面（CLI）（这就是你正在做的）；我想您可以编写一个批处理文件或一个 shell 脚本或任何可能存在的 Mac 等效项来使该过程更加自动化
*   使用SDK 附带的[ANT和 Flex ANT 任务：http://livedocs.adobe.com/flex/3/html/help.html?content=](http://ant.apache.org/) [anttasks_1.html](http://livedocs.adobe.com/flex/3/html/help.html?content=anttasks_1.html)；这基本上只是 CLI 的一个包装器，但它允许您执行其他任务，例如复制文件、打包等。
*   使用[Maven](http://maven.apache.org/)或[Gradle 之](http://gradle.org/)类的构建和依赖管理工具来自动化**一切**。这两个工具主要针对 Java 构建，但它们都有一个用于构建 Flex 应用程序的插件：
    *   Maven > [FlexMojos](http://flexmojos.sonatype.org/)
    *   Gradle > [GradleFx](http://gradlefx.org/)

当然，选择取决于您，但我个人更喜欢 GradleFx，因为它的简单性和全面性。（免责声明：我实际上非常喜欢它，以至于我成为了该项目的贡献者，所以我可能不再是公正的；））

# python - 将表格刮成字典并将每一行写入CSV

> ID：13567423
> 
> 赞同：0
> 
> 时间：2012-11-26T15:00:00.290
> 
> 标签：python, csv, collections, dictionary

我有一个项目正在使用 Scraperwiki 写入他们的 sqlite 商店，但我只需要编写一个[CSV](http://docs.python.org/2/library/csv.html)。问题是所有数据都存储在一个字典中，它可以很好地写入 sqlite：

```
scraperwiki.sqlite.save(unique_keys = ['somekey'], data = data, table_name='fancy') 
```

我在刮完每一行后运行它。字典没有顺序，所以我不能只将值写入 CSV。我一直在查看[csv.DictWriter](http://docs.python.org/2/library/csv.html#csv.DictWriter)和[collections.defaultdict](http://docs.python.org/2/library/collections.html#defaultdict-objects)，但我仍然在思考如何重构我的代码以便我可以写入数据，而数据是 CSV 的字典。这是我现在结构化的代码示例：

```
def store_exception(exception, line_number, some_string):
    data = {
        'timestamp'  : datetime.now(),
        'line_number': line_number,
        'message'    : exception,
        'string'     : some_string
    }
    scraperwiki.sqlite.save(unique_keys = ['timestamp'], data = data, table_name='error_log') 
```

我想我想要这样的东西：

```
def store_exception(exception, line_number, some_string):
    data = {
        'timestamp'  : datetime.now(),
        'line_number': line_number,
        'message'    : exception,
        'string'     : some_string
    }
    d = defaultdict(lambda: "")
    d_order = d['timestamp'],d['line_number'],d['message'],d['string']

    with open('some/path.csv', 'w') as csvfile:
        linewriter = csv.DictWriter(csvfile, d_order, delimiter='|',
                            quotechar='"', quoting=csv.QUOTE_MINIMAL)
        linewriter.writerow(data) 
```

不过，这似乎效率低下。我需要 collections.defaultdict 和 csv.DictWriter 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:18:22.030

这应该这样做。你根本不需要 default_dict，`d_order`只需要一个字段名称列表，或者在这种情况下是 dict 键：

```
def store_exception(exception, line_number, some_string):
    data = {
        'timestamp'  : datetime.now(),
        'line_number': line_number,
        'message'    : exception,
        'string'     : some_string
    }

    d_order = ['timestamp', 'line_number', 'message', 'string']

    with open('some/path.csv', 'w') as csvfile:
        linewriter = csv.DictWriter(csvfile, d_order, delimiter='|',
                            quotechar='"', quoting=csv.QUOTE_MINIMAL)
        linewriter.writerow(data) 
```

# shell - jabber - 创建房间

> ID：13567427
> 
> 赞同：0
> 
> 时间：2012-11-26T15:00:10.540
> 
> 标签：shell, centos, xmpp, ejabberd, centos6

我有以下设置：

*   一台装有 CentOS 6 的服务器
*   XMPP 服务器（使用 ejabber）
*   浏览器客户端（使用 Candy-chat）
*   聊天正在工作，用户有权限等。

我需要做的是在用户 X 想要的时候创建一个房间。如果用户使用独立客户端（如 Pidgin），一切正常，但我需要使用基于浏览器的客户端创建房间。

问题是我该怎么做？

注意：试图找到支持该功能的客户端 - 失败。

注意 2：如果我可以从服务器命令行（shell 脚本）执行它是可以的，因为我可以将 ajax 请求发送到运行该行的 php 脚本。- 我尝试为此使用 ejabberdctl，但我找不到任何功能（找到关于用户、服务器等的 9999 个功能，但没有关于房间的功能。我想我必须编辑 mod_muc 选项然后重新启动服务器但我m 不确定并且不适合所有用户重新启动服务器）。

感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T04:41:30.050

见[http://xmpp.org/extensions/xep-0045.html#createroom](http://xmpp.org/extensions/xep-0045.html#createroom)

XEP-0045 定义了 XMPP 中的多用户聊天协议。您不需要使用命令行或任何其他带外通信，该协议已经定义并在用户 XMPP 会话中带内工作。这是任何支持聊天室的 Jabber 客户端所实现的。

请注意，协议本身很长、很复杂，并且有许多选项和备选方案（用于配置房间参数、隶属关系、执行管理工作等），但您不必使用所有这些，参见示例 153，只需

```
<presence from='crone1@shakespeare.lit/desktop'to='coven@chat.shakespeare.lit/firstwitch'>
   <x xmlns='http://jabber.org/protocol/muc'/>
</presence> 
```

将足以创建房间“coven”。之后，用户“crone1”将成为该房间的所有者，并将以昵称“firstwitch”登录该房间。

# sql-server - 从随机字符串中分离实词

> ID：13567430
> 
> 赞同：2
> 
> 时间：2012-11-26T15:00:20.543
> 
> 标签：sql-server, coldfusion

我正在存储一个在网站上的所有搜索中都使用过的关键字列表，并且在关键字字段中得到了很多随机字符串。这是我要返回的数据示例：

```
fRNPRXiPtjDrfTDKH
boom
Mule deer
gVXOFEzRWi
cbFXZcCoSiKcmrvs
Owner Financed ,owner Financed 
```

我试图在 SQL 或 ColdFusion 中找到一种方法来确定某些内容是否具有有效的英文单词，或者它是否是一组随机字符。我已经尝试对 n-gram 分析进行一些挖掘，但似乎无法提出任何可以直接在我的服务器上运行的有用解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T15:51:10.440

更新：代码现在在 jsFiddle 上：http: [//jsfiddle.net/ybanrab/s6Bs5/1/](http://jsfiddle.net/ybanrab/s6Bs5/1/)复制并粘贴一页新闻复制并粘贴到您的测试数据中可能会很有趣

我建议尝试分析各个角色相互跟随的概率。下面是一个我用 JavaScript 编写的示例，但应该很容易转换为 T-SQL 或 ColdFusion。

这个想法是你输入好的短语（语料库）并分析字母跟随其他字母的频率。如果你喂它“这么薄”，你会得到这样的东西：

```
{
 t:{h:3},
 h:{i:2,e:1},
 i:{s:1,n:1},
 s:{},
 n:{}
} 
```

通过从您正在分析的数据中提供精心挑选的已知良好输入，您将获得最大的准确性，但您也可以通过简单的英语提供良好的结果。在下面的示例中，我正在计算它，但是一旦您对它感到满意，您显然可以存储它。

然后，您根据概率运行示例字符串以对其进行评分。此版本忽略大小写、单词首字母、长度等，但您也可以根据需要使用它们。然后，您只需要确定一个阈值分数并像这样进行过滤。

我相当肯定这种分析有一个名字，但我的 google-fu 今天很弱。您可以将下面的代码粘贴到脚本块中，以了解它的工作情况（或不工作）。

```
var corpus=["boom","Mule Deer", "Owner Financed ,owner Financed", "This is a valid String","The quick brown fox jumped over the lazy dog"];

var probs={};
var previous=undefined;

//Compute the probability of one letter following another
corpus.forEach(function(phrase){
    phrase.split(" ").forEach(function(word){
        word.toLowerCase().split("").forEach(function(chr){
            //set up an entry in the probabilities table
            if(!probs[chr]){
                probs[chr]={};
            }
            //If this isn't the first letter in the word, record this letter as following the previous one
            if(previous){
                if(!probs[previous][chr]){
                    probs[previous][chr]=0; 
                }
                probs[previous][chr]++;
            }
            //keep track of the previous character
            previous=chr;

        });
        //reset previous as we're moving onto a different word
        previous=undefined;
    })
});

function calculateProbability(suspect){
    var score=0;
    var previous=undefined;
    suspect.toLowerCase().split("").forEach(function(chr){
        if(previous && probs[previous] && probs[previous][chr]){
            //Add the score if there is one, otherwise zero
            score+=probs[previous][chr];
        }
        previous=chr;
    });
    return score/suspect.length;
}

console.log(calculateProbability("boom"));
console.log(calculateProbability("Mood"));
console.log(calculateProbability("Broom"));
console.log(calculateProbability("sajkdkas dak")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T16:26:06.097

最好的办法是对照频率列表检查你的单词：字典不起作用，因为它们不包含语法变形、专有名词、复合词和一大堆其他有效的东西。

对 n-gram 数据进行简单检查的问题是低频词中有很多噪音。在绝大多数情况下应该给你正确答案的最简单的事情是从前 50,000 或 100,000 个单词的适当大的地方（Google n-gram、Wikipedia 等）截断频率计数单词列表。根据需要调整阈值以获得您正在寻找的结果，但随后您可以检查是否有任何/所有查询词出现在此列表中。

如果您想知道查询是否符合语法，或者作为一个单元而不是其组成部分是否合理，那当然是另一个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T15:07:59.657

有一些非字典词可以是有效搜索（例如`gethostbyname`，在 SO 上是有效且有意义的搜索，但不是字典词）。另一方面，有些字典单词与您的网站完全无关。

您可以简单地检查搜索查询是否产生非空结果，而不是试图猜测什么是单词，什么不是。那些结果为空的必须完全偏离主题或胡言乱语。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T15:53:12.180

听起来你正在寻找一个

[贝叶斯滤波器](http://en.wikipedia.org/wiki/Bayesian_spam_filtering)

# scala - specs2 中的最终清理

> ID：13567431
> 
> 赞同：8
> 
> 时间：2012-11-26T15:00:27.420
> 
> 标签：scala, specs2

我正在为我的 scala 软件编写一个 specs2 Unittest。执行工作良好。我唯一的问题是，在所有测试完成后我需要清理。我只是找不到任何解决方案。有没有办法在所有测试完成后执行一些功能？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-26T21:06:11.937

您需要在规范末尾添加一个[步骤：](http://etorreborre.github.com/specs2/guide/org.specs2.guide.Structure.html#Steps/Actions)

```
import org.specs2.mutable._

class MySpec extends Specification {

  // lots of examples here

  // cleanup there
  step(cleanUp())
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:58:39.187

您可以尝试使用 After`with After`并实现`def after`功能。

例子：

```
class Context extends Specification {
....
}

trait trees extends mutable.After {
  def after = cleanupDB
} 
```

# r - R在哪里存储临时文件

> ID：13567436
> 
> 赞同：6
> 
> 时间：2012-11-26T15:00:44.270
> 
> 标签：r, memory

我在 Macbook Air 上运行一些基本的数据操作（4GB 内存，120GB HD，8GB 可用）。我的输入文件大约是 40 MB，直到过程结束我才向磁盘写入任何内容。但是，在我的过程中，我的 Mac 说没有内存可以运行。我检查了硬盘，发现还剩下大约 500MB。所以这是我的问题：

1.  R怎么可能这么快就填满了我的磁盘？我的理解是 R 将所有内容都存储在内存中（除非我明确地将某些内容写入磁盘）。
2.  如果 R 确实在磁盘上写入临时文件，我怎样才能找到这些文件来删除它们？

非常感谢。

更新 1：我收到的错误消息：

```
Force Quit Applications: Your Mac OS X startup disk has no more space available for 
application memory 
```

更新 2：我检查了 tempdir()，它显示“var/folders/k_xxxxxxx/T//Rtmpdp9GCo”。但我无法从我的 Finder 中找到该导演

更新 3：在 R 中 unlink(tempdir(),recursive=TRUE) 并重新启动计算机后，我恢复了磁盘空间。我仍然想知道 R 是否在我的硬盘上写入以避免将来出现类似情况。

更新 4：我的主要对象大约是 1GB。我使用活动监视器来跟踪进程，虽然内存使用量约为 2GB，但磁盘活动非常高：数据读取：14GB，数据写入，44GB。我不知道 R 在写什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T15:02:20.917

R 写入一个临时的每个会话目录，它也在退出时清理它。

它遵循约定并尊重 TMP 和相关的环境变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T15:12:01.323

是什么让您认为磁盘空间与此有关？R 需要将所有对象保存在内存中，而不是磁盘之外（默认情况下；有附加包允许对磁盘上存储的文件进行操作的子集，该文件太大而无法放入 RAM）。

“过程”中的一个步骤是导致 R 从操作系统请求一块 RAM 以使其能够继续。操作系统无法遵守，因此 R 终止了您正在运行的“进程”，并显示您未能提供给我们的错误消息。[提示，如果您显示实际错误而不是您的释义，这将有所帮助。您正在运行的代码的一些暗示也会有所帮助。40MB 的磁盘空间听起来像是一个相当大的文件；多少行/列等？R中的对象有多大；`object.size()`?

# php - 从 php scipt 创建 xml 不起作用

> ID：13567438
> 
> 赞同：0
> 
> 时间：2012-11-26T15:00:49.247
> 
> 标签：php, xml

我正在尝试从 php 创建一个 xml 页面

```
$xml = new DOMDocument();
$xml->load("recv.xml") or exit("not loaded");
$xml_album = $xml->createElement("Album");
$xml_track = $xml->createElement("Track");
$xml_album->appendChild( $xml_track );
$xml->appendChild( $xml_album );
$doc->save('recv.xml'); 
```

这是我的脚本，但它不起作用我需要包含到任何文件中吗？帮我

编辑，根据评论错误描述；

```
DOMDocument::load() [function.DOMDocument-load]:
Start tag expected, '<' not found 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:28:58.453

您可能应该创建一个全新的文档，而不是加载现有的格式不正确的文档。

```
$xml = new DOMDocument();
//$xml->load("recv.xml") or exit("not loaded"); - do not load the existing document!!!!
$xml_album = $xml->createElement("Album");
$xml_track = $xml->createElement("Track");
$xml_album->appendChild( $xml_track );
$xml->appendChild( $xml_album );
$xml->save('recv.xml'); 
```

XML 不允许有多个根节点，所以如果你`<Album>`作为根使用，打开现有文档再添加一个根节点也会产生错误。

# python - 使用 Python 脚本在 sybase 表中插入值时出错

> ID：13567441
> 
> 赞同：0
> 
> 时间：2012-11-26T15:01:01.100
> 
> 标签：python, sybase

```
cursor = db.cursor()
query = """create table tempdb..fi_kundan(firstname varchar(9),symbol
varchar(9),lastname varchar(12))"""
cursor.execute(query)
f = open("./extractS1","r")
lines = f.readlines()
for line in lines:
  word = line.split('|')
  a = word[0]
  b = word[1]
  c = word[2]
  cursor.execute("insert into tempdb..fi_kundan values (?,?,?)",(a,b,c)) 
```

我已连接到 Informix 数据库，并尝试将值插入到使用此 Python 脚本创建的表中。要插入的值来自文件。但是在运行此脚本时出现以下错误。

有人可以建议这里有什么问题。

错误信息：

```
for name, value in params.items(): 
```

> AttributeError: 'tuple' object has no attribute 'items'
> 
> Exception Sybase.DatabaseError: DatabaseError('Layer: 1, Origin: 1\nct_cmd_drop(): user api layer: external error: 只有当命令结构为idle.',) 在 <Sybase.Cursor instance at 0x12bb20>> 的 <bound method Cursor.__del__ 中被忽略

谢谢 ！

# css - 如何根据 ul 列表拉伸包装器 div？

> ID：13567447
> 
> 赞同：1
> 
> 时间：2012-11-26T15:01:25.487
> 
> 标签：css, list, html, html-lists

我的包装器 div css;

```
.post-wrapper{
  width:200px;
   min-height:50px;
  } 
```

.post-wrapper 的 ul 列表 css；

```
.post-wrapper ul{
   margin:0;
   padding:0;
   width:200px;
 }

.post-wrapper ul li{
   margin-bottom:2px;
   padding:0;
   list-style:none;
   text-align:center;
   width:200px; 
   float:left;   
 } 
```

HTML

```
<div class="post-wrapper">
 <ul>
   <li>Item-1</li>
   <li>Item-2</li>
   <li>Item-3</li>
   <li>Item-4</li>
   <li>Item-5</li>
   <li>Item-6</li>
   <li>Item-7</li>
 </ul>
</div> 
```

5 个列表项 (li) 没有问题，但 5 个后包装器不会拉伸。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:12:47.250

您可以在无序列表元素上使用 clearfix 技术。请注意，此技术依赖于 CSS 生成的内容 ( `:before`, `:after`)，因此仅适用于 IE8+。其他现代浏览器会很好。

根据包装器的上下文，浮动包装器可能会也可能不会破坏您的设计。这种技术将允许您在`div`不浮动的情况下拉伸包装器。

```
.post-wrapper ul {
     margin:   0;
     padding:  0;
     width:    200px;
 }

 .post-wrapper ul:after {
    content:      ".";
    overflow:     hidden;
    display:      block;
    text-indent:  -9999px;
    height:       0;
    clear:        both;
    visibility:   hidden;
 } 
```

[这是一个工作示例的jsfiddle](http://jsfiddle.net/remibreton/DajuR/)。红色背景是故意添加的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:13:04.763

当你`float: left`在内部元素上使用时，你需要做一些事情，这会导致 OUTER 元素清除浮动元素。

虽然有几种方法可以实现这一点，但在这种情况下，最简单的方法是`overflow: hidden`在`.post-wrapper ul`元素上使用：

```
.post-wrapper ul{
   margin:0;
   padding:0;
   width:200px;
   overflow: hidden;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T15:14:16.070

浮动你`ul`和你的`div`左边，这应该可以解决问题。

这是一个演示：http: [//jsfiddle.net/sCAdj/](http://jsfiddle.net/sCAdj/)

另一种方法是添加一个清除浮动的虚拟列表项：

```
<li style="float:none;clear:left"></li> 
```

演示：http: [//jsfiddle.net/sCAdj/1/](http://jsfiddle.net/sCAdj/1/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-26T15:14:09.083

您的问题可能是`float:left`关于 li 元素尝试：1.添加`position:relative`到包装容器 2.在包装底部添加一个清除 div

```
<div class="post-wrapper">
 <ul>
   <li>Item-1</li>
   <li>Item-2</li>
   <li>Item-3</li>
   <li>Item-4</li>
   <li>Item-5</li>
   <li>Item-6</li>
   <li>Item-7</li>
 <div style="clear:both; width:100%"></div>
 </ul>
</div> 
```

1.  从 li 中删除浮动

# sql - EXECUTE @Var 字符限制 SQL Server 2008 R2

> ID：13567448
> 
> 赞同：3
> 
> 时间：2012-11-26T15:01:32.150
> 
> 标签：sql, tsql, sql-server-2008-r2

我一直在寻找这个问题的答案，但没有什么是明确的，所以希望有人知道他们的头脑。

`EXECUTE`与变量一起使用时`VARCHAR(MAX)`，是否有字符限制？我做了一些实验，似乎在加载变量然后调用`EXECUTE @var`时，实际传递给服务器的内容有字符限制。当在没有变量的情况下调用`EXECUTE`并且只是在那里构建字符串时，一切似乎都正常工作....有这个原因吗？返回的错误信息是：

> *名称“（在此处插入我的 SQL 语句变量的 881 个字符中的大约 643 个）”不是有效标识符*

有人知道为什么会发生这种情况吗？`EXECUTE @var`失败，`EXECUTE 'string'`工作...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T22:53:13.340

我认为是： exec @mystr --assumes 该字符串是一个过程名称，并且限制为 8000 字节

exec (@mystr) -- 有 2 GB 的限制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T15:18:00.977

根据 msdn，在 SQL Server 2008 中，限制似乎是最多 2 GB 的字符串：

> **对字符串使用 EXECUTE**
> 
> 在 SQL Server 的早期版本中，字符串被限制为 8,000 个字节。这需要连接大字符串以进行动态执行。在 SQL Server 中，可以指定 varchar(max) 和 nvarchar(max) 数据类型，允许字符串最大为 2 GB 的数据。

[这是](http://msdn.microsoft.com/en-us/library/ms188332%28v=sql.105%29.aspx)包含所有信息的链接。

如果您遇到问题，可能是您在变量上连接字符串的方式。

# r - 如何在网上搜索 R 发布日期列表？

> ID：13567453
> 
> 赞同：28
> 
> 时间：2012-11-26T15:01:43.510
> 
> 标签：r标签的问题，请帮助我从, r

为了庆祝Stack Overflow上第 20,000 个带有[r标签的问题，请帮助我从](/questions/tagged/r "显示标记为“r”的问题")[Wikipedia 页面](http://en.wikipedia.org/wiki/R_%28programming_language%29)中提取 R 发布日期。

我的尝试：

```
library(XML)
x <- readHTMLTable("http://en.wikipedia.org/wiki/R_(programming_language)") 
```

这不起作用，因为该表实际上是一个列表，而不是 HTML 表。

```
library(httr)
x <- GET("http://en.wikipedia.org/wiki/R_(programming_language)")
text <- content(x, "parsed") 
```

这提取了文本，但我`xpath`的生锈了，所以我无法提取相关的发布日期。

我怎样才能做到这一点？

* * *

PS。维基百科页面是我能找到的唯一来源，但如果有，请随时使用规范来源发布解决方案。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-26T15:03:15.640

为什么不使用维也纳规范 ftp 档案中的文件日期？

编辑：例如

```
 lynx -dump http://cran.r-project.org/src/base/R-0/ | grep tgz | grep -v http 
```

为您提供一个可以从 R 解析的表格。为您提供文件大小作为好处。冲洗并重复 R-1 和 R-2 目录。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-26T16:10:57.763

**编辑为包括 R 版本 3.0.0 及更高版本**

Dirk Eddelbuettel 提供了 R 的 .0 版本的规范链接。

下面是一些代码，它从三个单独的 URL 中整理表格，每个主要版本一个，然后绘制它：

```
library(XML)
library(lattice)

getRdates <- function(){
  url <- paste0("http://cran.r-project.org/src/base/R-", 0:3)
  x <- lapply(url, function(x)readHTMLTable(x, stringsAsFactors=FALSE)[[1]])
  x <- do.call(rbind, x)
  x <- x[grep("R-(.*)(\\.tar\\.gz|\\.tgz)", x$Name), c(-1, -5)]
  x$Release <- gsub("(R-.*)\\.(tar\\.gz|tgz)", "\\1", x$Name)
  x$Date <- as.POSIXct(x[["Last modified"]], format="%d-%b-%Y %H:%M")
  x$Release <- reorder(x$Release, x$Date)
  x
}

x <- getRdates()
dotplot(Release~Date, data=x) 
```

![在此处输入图像描述](../Images/d5d7b551838034b89b66ceaf76dcf1d5.png)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-11-26T15:23:22.550

有点作弊，既然 Dirk 给了我们一张容易刮的桌子：

```
library(XML)
theurl <- "http://cran.r-project.org/src/base/R-0/"
h <- htmlParse(theurl)
h <- readHTMLTable(h)
h <- h[[1]]
h <- droplevels(h[-c(1,2,30),])
levels(h$Name) <- gsub(".tgz","",levels(h$Name),fixed=TRUE)

h 
```

给我们：

```
 Name     Last modified Size Description
3      R-0.49 23-Apr-1997 14:53 959K            
4   R-0.50-a1 22-Jul-1997 16:44 1.0M            
5   R-0.50-a4 10-Sep-1997 14:31 1.0M            
6    R-0.60.0 04-Dec-1997 09:58 1.1M            
7    R-0.60.1 07-Dec-1997 02:59 1.1M            
8    R-0.61.0 22-Dec-1997 00:00 1.1M            
9    R-0.61.1 13-Jan-1998 00:00 1.1M            
10   R-0.61.2 18-Mar-1998 00:00 1.1M            
11   R-0.61.3 03-May-1998 00:00 1.1M            
12   R-0.62.0 15-Jun-1998 00:00 1.2M            
13   R-0.62.1 15-Jun-1998 00:00 1.2M            
14   R-0.62.2 10-Jul-1998 11:59 1.3M            
15   R-0.62.3 28-Aug-1998 11:01 1.3M            
16   R-0.62.4 24-Oct-1998 00:00 1.3M            
17   R-0.63.0 14-Nov-1998 04:57 1.5M            
18   R-0.63.1 05-Dec-1998 02:25 1.5M            
19   R-0.63.2 12-Jan-1999 02:21 1.5M            
20   R-0.63.3 06-Mar-1999 04:27 1.5M            
21   R-0.64.0 08-Apr-1999 01:48 1.5M            
22   R-0.64.1 08-May-1999 02:55 1.9M            
23   R-0.64.2 05-Jul-1999 21:15 1.9M            
24   R-0.65.0 28-Aug-1999 00:18 2.1M            
25   R-0.65.1 07-Oct-1999 01:46 2.2M            
26   R-0.90.0 22-Nov-1999 18:07 2.3M            
27   R-0.90.1 15-Dec-1999 14:05 2.4M            
28   R-0.99.0 07-Feb-2000 13:09 2.8M            
29  R-0.99.0a 09-Feb-2000 12:28 2.8M 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-11-26T16:42:30.557

在已经完成的工作的基础上：

```
h <- getRdates()
# Find version release rate
library(plyr)
h <- subset(h,select=c(-Description))
Version <- sub("^R-([0-9a-z.-]+)\\.t.*","\\1",h$Name)
h$bigVersion <- as.numeric(sub("^([0-9])\\..+","\\1",Version))
h$smallVersion <- as.numeric(sub("^[0-9]\\.([0-9]+).+","\\1",Version))
h$majorVersion <- as.numeric(paste(h$bigVersion,sprintf( "%02.0f", h$smallVersion ),sep="."))
h <- ddply( h, .(bigVersion,majorVersion), function(x) {
    x$tinyVersion <- seq(nrow(x))
    x
})

# Plot
plot( majorVersion~Date, data=h, pch=".",cex=3)
abline(h=seq(1,2),col="red") 
```

![费率](../Images/be3d0d5199fb88c91205b7fafcf31183.png)

```
library(lattice)
print(xyplot( smallVersion~Date|bigVersion, data=h, pch=".",cex=3)) 
```

![格子](../Images/299201eaa90a10d1e603342ee134b531.png)

并一起比较：

```
h <- ddply( h, .(bigVersion), function(x) {
   x$bigElapsedTime <- x$Date - min(x$Date)
   x
})

png("c:/temp/Rplot3.png")
plot( smallVersion~bigElapsedTime, data=h, pch=".",cex=3,col=h$bigVersion+1)
dev.off() 
```

![都在一个情节上](../Images/8c0cf293c752b5b1f3a3882efd6501ee.png)

```
# How many minor releases per major release

> table(rle(h$majorVersion)$lengths, substring(rle(h$majorVersion)$values,1,1))

    0 1 2
  1 1 0 0
  2 5 5 9
  3 1 1 6
  4 2 4 1
  5 1 0 0 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-02-03T21:38:23.620

不再需要为此抓取维基百科。

```
library(rversions)
r_versions() 
```

# objective-c - 在 lldb 中的“NSMutableArray *”PO 命令类型的对象上找不到属性“计数”

> ID：13567455
> 
> 赞同：5
> 
> 时间：2012-11-26T15:01:48.340
> 
> 标签：objective-c, ios, xcode

我正在使用控制台来处理`po`一些变量，在这种情况下，我有一个`NSMutableArray`，我想查看它的计数。我得到了一个很棒的错误。

有任何想法吗？

我知道我可以在变量列表中看到计数（它说@“1 个对象”），但是在使用`po`.

更新：似乎方括号符号是关键，转换为 int 使其可读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:08:25.397

利用 `(gdb) p (int)[array count]`

# mathjax - 显示尺寸/宽度调整

> ID：13567456
> 
> 赞同：0
> 
> 时间：2012-11-26T15:01:51.493
> 
> 标签：mathjax

如果有办法调整数学 mathjax 渲染的宽度，我正在徘徊。我拥有的一些数学表达式更长，不适合我创建的盒子。有没有办法通过改变尺寸或宽度来挤压它并使其适合？我尝试过使用换行符，但这不是我想要的。一个例子是这样的 mathjax：

```
2x+3+4 - /intcos(x) dx   

234567897+sin(2x)+34567890987654\. 
```

显示最后一行将是一个问题，因为它不适合盒子。它溢出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T23:13:54.620

好吧，您可以在数学中使用`\small`或`\scriptsize`或`\Tiny`（非标准）或`\tiny`使其显示为更小的尺寸。

或者，您可以`<span style="font-size:70%">...</span>`在数学周围放置 a 以将数学缩放到您需要的任何大小。例如，

```
<span style="font-size:70%">\(234567897+sin(2x)+34567890987654\)</span> 
```

请注意，数学分隔符必须在`<span>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-13T21:23:06.330

我找到了一个不需要添加元素或 css 代码的解决方案：

```
// resize all LaTeX Display elements to they fit in on screen
function cvonk_ResizeMathJax() {
    jQuery('.MathJax_Display').each(function(ii, obj) {
        var latex = obj.children[0];
        var w = latex.offsetWidth;
        var h = latex.offsetHeight;    
        var W = obj.offsetWidth;
        if (w > W) {
            obj.style.fontSize = 95 * W / w + "%";
        }
    });
}
window.MathJax = {
    AuthorInit: function() {
    MathJax.Hub.Register.StartupHook("Begin", function() {
        MathJax.Hub.Queue(function() {
        cvonk_ResizeMathJax();
        });
    });
    },
    jax: ["input/TeX", "output/HTML-CSS", "output/NativeMML"],
    extensions: ["tex2jax.js"]
};
window.addEventListener("resize", function() {
    cvonk_ResizeMathJax();  
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-01T20:31:24.667

从上面链接的[Google Groups 讨论](https://groups.google.com/forum/#!topic/mathjax-users/ems8PNage-0/discussion)中：

```
function changeSize(button) {
    var myeqn = document.getElementById('myeqn');
    myeqn.style.fontSize = button.textContent;
    MathJax.Hub.Queue(
    ['Rerender', MathJax.Hub, 'myeqn'],

    function () {
        document.getElementById('mylabel').innerHTML =
            'width: ' + myeqn.offsetWidth + ", height: " + myeqn.offsetHeight;
    });
} 
```

请参阅[http://jsfiddle.net/nLyraL1f/](http://jsfiddle.net/nLyraL1f/)或[http://jsfiddle.net/s2bjepk6/](http://jsfiddle.net/s2bjepk6/)。

这也很好，因为它可以获取渲染乳胶的宽度和高度，这对于将其渲染为位于画布上的元素很有用，因为您可以在它周围的画布上绘制东西。

# converter - 将托管 VB.NET 项目转换为 Windows Phone 8 项目

> ID：13567459
> 
> 赞同：0
> 
> 时间：2012-11-26T15:01:59.073
> 
> 标签：converter, managed, windows-phone-8

所以，我对 Windows Phone 完全陌生。我的询问很笼统。例如，CodePlex 上有很多很好的 API。我似乎必须为 Windows Phone 8 创建一个特定的类库才能引用它。那么我的问题是是否可以轻松转换项目（从 ANYCPU 类库到 Windows Phone）或以某种方式维护两个分支。

任何信息或见解将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:09:33.930

这真的完全取决于你的图书馆做什么。必须根据具体情况回答“如何转换项目”的问题。当然，一般的“是的，您可以做到”适用，但这完全取决于您管理的代码正在调用什么。就像 Silverlight 是您可以在 WPF 中执行的功能的一个子集一样，Windows Phone 上可用的 API 是其他平台上可用功能的一个子集。（您没有指定）。我很乐意通过更多的澄清来提供更多帮助。

# javascript - 正确更新 bootstrap-typeahead.js 中的源选项

> ID：13567464
> 
> 赞同：4
> 
> 时间：2012-11-26T15:02:20.040
> 
> 标签：javascript, jquery, twitter-bootstrap, underscore.js, typeahead

在下面的[演示](http://jsfiddle.net/BwDmM/70/)中，插入“Alaska”值后，源会更新，以便自动完成不再显示 Alaska 值。

```
var newSource = this.source
                    .slice(0,pos)
                    .concat(this.source.slice(pos+1));
this.source = newSource; 
```

无论如何，如果我从文本区域中删除阿拉斯加，该值`Alaska`应该再次显示在源中。
如果用户从 textarea 中删除数据，任何提示如何恢复源数据？

我的想法是从

```
$('.typeahead').on('change', function () { }) 
```

有什么提示吗？

PS：
我正在使用 jquery 和下划线

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:55:25.767

您可能应该更改您的`matcher`功能以测试已选择的状态：

```
var tabPresentStates = this.query.split(','),
    nbPresentStates = tabPresentStates.length;
for(var iState = 0; iState < nbPresentStates; iState++) {
   if(item === tabPresentStates[iState].trim())
       return false;
} 
```

看到这个[小提琴](http://jsfiddle.net/scaillerie/DCUyT/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T15:49:59.103

您可以使用排序器排除您已经选择的值，而不是更改源。

[http://jsfiddle.net/BwDmM/71/](http://jsfiddle.net/BwDmM/71/)

*PS 我可能会将您的代码包含在 Jasny 的扩展 Bootstrap [http://jasny.github.com/bootstrap](http://jasny.github.com/bootstrap)的下一个版本中:)*

```
!function(source) {
    function extractor(query) {
        var result = /([^,]+)$/.exec(query);
        if(result && result[1])
            return result[1].trim();
        return '';
    }

    $('.typeahead').typeahead({
        source: source,
        updater: function(item) {
            return this.$element.val().replace(/[^,]*$/,'')+item+',';
        },
        matcher: function (item) {
          var tquery = extractor(this.query);
          if(!tquery) return false;
          return ~item.toLowerCase().indexOf(tquery)
        },
        highlighter: function (item) {

          var query = extractor(this.query).replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, '\\$&')
          return item.replace(new RegExp('(' + query + ')', 'ig'), function ($1, match) {
            return '<strong>' + match + '</strong>'
          })
        },
        sorter: function(items) {
          var beginswith = []
            , caseSensitive = []
            , caseInsensitive = []
            , existing = $.each(this.$element.val().split(','), function(i, val) { return val.trim() })
            , item

          while (item = items.shift()) {
            if ($.inArray(item, existing) >= 0) continue;

            if (!item.toLowerCase().indexOf(this.query.toLowerCase())) beginswith.push(item)
            else if (~item.indexOf(this.query)) caseSensitive.push(item)
            else caseInsensitive.push(item)
          }

          return beginswith.concat(caseSensitive, caseInsensitive)              
        }
    });

}(["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Dakota","North Carolina","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T16:09:45.207

同意@SamuelCaillerie 的使用方法`matcher`- 这只是使用您的提取器功能。所以：

```
 updater: function(item) {
        return this.$element.val().replace(/[^,]*$/,'')+item+',';
    },
    matcher: function (item) {
      var previouslySelected = (this.query.indexOf(item) != -1); 
      var tquery = (previouslySelected ? "" : extractor(this.query));
      if(!tquery) return false;
      return ~item.toLowerCase().indexOf(tquery)
    }, 
```

# php - 带有 cURL 的 php twitter 流 api 中的错误...

> ID：13567466
> 
> 赞同：1
> 
> 时间：2012-11-26T15:02:24.317
> 
> 标签：php, curl

这是代码：

```
<?php
class curlWrap {

    protected $buffer;
    function stream_open($path, $mode, $options, &$opened_path) {
        return true;
    }

    public function stream_write($data) {
        // Extract the lines ; on y tests, data was 8192 bytes long ; never more
        $lines = explode("\n", $data);

        // The buffer contains the end of the last line from previous time
        // => Is goes at the beginning of the first line we are getting this time
        $lines[0] = $this->buffer . $lines[0];

        // And the last line os only partial
        // => save it for next time, and remove it from the list this time
        $nb_lines = count($lines);
        $this->buffer = $lines[$nb_lines-1];
        unset($lines[$nb_lines-1]);

        for ($i=0; $i<count($lines); $i++) {
            $curDecodedTweet = json_decode($lines[$i]);
            if (property_exists($curDecodedTweet,"text")) {
                $tweetText = $curDecodedTweet->text;
                echo "$tweetText\n";
            }
        }

        return strlen($data);
    }
}
{
stream_wrapper_register("curlWrap","curlWrap") or die("Failed to register protocol");
$fp = fopen("curlWrap://tweetStream.txt","r+");

set_time_limit(60);
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "https://stream.twitter.com/1/statuses/sample.json");
curl_setopt($ch, CURLOPT_USERPWD, "myusername:mypass");
curl_setopt($ch, CURLOPT_HEADER,0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, 60);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Host: api.twitter.com'));
curl_exec($ch);
curl_close($ch);
fclose($fp);
}
?> 
```

但如果我执行这个......会出现这个错误：

警告：curl_setopt() [function.curl-setopt]: curlWrap::stream_cast 未实现！在 C:\Program Files\Apache Software Foundation\Apache2.2\htdocs\catturaTweets\riproviamo.php 第 44 行

警告：curl_setopt() [function.curl-setopt]: curlWrap::stream_cast 未实现！在 C:\Program Files\Apache Software Foundation\Apache2.2\htdocs\catturaTweets\riproviamo.php 第 44 行

警告：curl_setopt() [function.curl-setopt]：不能将用户空间类型的流表示为 C:\Program Files\Apache Software Foundation\Apache2.2\htdocs\catturaTweets\riproviamo.php 中的 STDIO 文件*第 44 行这是什么原因？很抱歉给您带来麻烦，谢谢

# c# - 如何避免在 web.config 中添加程序集版本？

> ID：13567469
> 
> 赞同：5
> 
> 时间：2012-11-26T15:02:37.000
> 
> 标签：c#, .net, wcf, configuration, web-config

我正在向我的 WCF 服务添加一个自定义端点行为，其中包含一个扩展的类`BehaviorExtensionElement`来初始化它。在我的`web.config`中，我添加以下内容来注册行为扩展：

```
<system.serviceModel>
    <services>
      <service name="Service.MyService">
        <endpoint address=""
                  behaviorConfiguration="endpointBehavior"
                  binding="basicHttpBinding"
                  contract="Contracts.IMyService"/>
      </service>
    </services>

    <behaviors>
      <endpointBehaviors>
        <behavior name="endpointBehavior">
          <logBehavior />
        </behavior>
      </endpointBehaviors>
    </behaviors>

    <extensions>
      <behaviorExtensions>
        <add name="logBehavior"
             type="MyNamespace.MyBehaviorExtensionElement, MyAssembly, Version=0.0.0.1, Culture=neutral, PublicKeyToken=null" />
      </behaviorExtensions>
    </extensions>
</system.serviceModel> 
```

这工作得很好，但我必须指定程序集的版本才能加载它。如果我将程序集引用更改为`MyNamespace.MyBehaviorExtensionElement, MyAssembly`没有版本/文化/令牌，则服务无法启动并出现错误：

> 说明：处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。
> 
> 解析器错误消息：为 system.serviceModel/behaviors 创建配置节处理程序时发生错误：无法将扩展元素“logBehavior”添加到此元素。验证扩展是否已在 system.serviceModel/extensions/behaviorExtensions 的扩展集合中注册。参数名称：元素

作为我的构建过程的一部分，我的程序集版本的最后部分会经常更改。如何避免`web.config`每次构建版本增加（可能是数百次）时都必须使用新版本号更新？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T15:09:47.347

我认为在 .net 4 或更高版本中已经取消了对完全指定的类名的限制。你有没有尝试过：

```
 <behaviorExtensions>
     <add name="logBehavior"
         type="MyNamespace.MyBehaviorExtensionElement, MyAssembly" />
  </behaviorExtensions> 
```

我可能错了！

# jquery - 如何确保是否为多选 jQuery 插件选择了至少一个复选框

> ID：13567471
> 
> 赞同：0
> 
> 时间：2012-11-26T15:02:43.503
> 
> 标签：jquery

我正在使用 jquery 多选[插件](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)。现在我正在检查用户是否使用下面的代码选择了任何复选框。

```
function fntemp()
{
var values = $("select").val();
alert(values);
if(!values){
alert("Please select atleast one value from the dropdown.");    
 }
} 
```

但是当我们点击“Check All”链接时这不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T15:04:57.793

应该管用：

```
var test = $("select option:selected").length; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T15:06:37.030

查看文档，您可以使用以下方法获取所有选中复选框的数组

```
$("select").multiselect("getChecked"); 
```

我假设您因此可以执行以下操作：

```
if ($("select").multiselect("getChecked").length == 0)
{
   alert("Please select atleast one value from the dropdown.");
} 
```

# haskell - 如何用 Haskell 读取以指数形式写入的整数？

> ID：13567472
> 
> 赞同：5
> 
> 时间：2012-11-26T15:02:47.700
> 
> 标签：haskell, ghci

读取以十进制形式写入的整数非常简单：

```
Prelude> read "1000000000" :: Int
1000000000 
```

但是如何读取以指数形式写的整数呢？

```
Prelude> read "10e+9" :: Int
*** Exception: Prelude.read: no parse 
```

中是否有一个函数`Prelude`可以做到这一点，还是我们需要解析表达式？

感谢您的回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T11:35:47.130

这是一个解析器

```
readI xs = let (m,e) = break (=='e') xs in 
     read m * 10 ^ case e of
       "" -> 1
       ('e':'+':p) -> read p
       ('e':p) -> read p 
```

给予

```
Main> readI "3e5"
300000
Main> readI "3e+500"
300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
Main> readI "3e+500" :: Int
0
Main> readI "3e+500" :: Integer
300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 
```

并且

```
Main> readI "32e-5" 
Program error: Prelude.^: negative exponent 
```

我们可以尝试让它处理给出整数答案的负指数，但这对于读取函数来说太过分了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T15:18:33.137

根据字符串的确切格式，您可以将`read`其转换为浮点类型：

```
> read "10e+9" :: Double
1.0e10 
```

[然后转换为整数类型](http://www.haskell.org/haskellwiki/Converting_numbers#Converting_to_Integral)——我建议`Integer`不要`Int`：

```
> floor (read "10e+9" :: Double) :: Integer
10000000000 
```

# mysql - 获取给定期间内分组项目的最新值，包括。零和空值

> ID：13567474
> 
> 赞同：3
> 
> 时间：2012-11-26T15:02:58.637
> 
> 标签：mysql, sql, left-join

请你帮我看看我是否走对了路？我是 SQL 新手，所以有很多东西对我来说并不明显。

假设我有两张桌子。
第一个是订阅者列表：

```
 subscribers
+--------+------------+
|subscID |    name    |
+--------+------------+
|   123  | SomeName00 |
|   456  | SomeName01 |
|   789  | SomeName02 |
|   012  | SomeName03 |
|   345  | SomeName04 |
+--------+------------+ 
```

第二个是通话记录（或类似的东西），包括订阅者的收入和支出以及交易 ID 和他们账户的当前状态：

```
 transactions
+--------+---------------------+--------+-----------+----------+
| trnID  | date                |subscID | amount    | balance  |
+--------+---------------------+-------+------------+----------+
| 321456 | 2012-03-13 11:10:00 |   456  |   70.0000 |  90.0000 |
| 234567 | 2012-03-16 15:05:00 |   456  |  -45.0000 |  45.0000 |
| 345678 | 2012-03-19 17:27:00 |   456  |   15.0000 |  60.0000 |
| 654321 | 2012-04-22 17:34:00 |   456  |  -10.0000 |  50.0000 |
| 543210 | 2012-04-15 15:45:00 |   789  |   20.0000 |  30.0000 |
| 567890 | 2012-05-16 13:30:00 |   789  |  -10.0000 |  20.0000 |
| 876543 | 2012-02-29 11:00:00 |   012  |   20.0000 |   5.0000 |
| 678901 | 2012-03-31 09:40:00 |   012  |   10.0000 |  15.0000 |
| 456789 | 2012-03-31 21:09:00 |   012  |  -13.0000 |   2.0000 |
| 432109 | 2012-02-23 14:01:00 |   345  |  -30.0000 |  27.0000 |
| 012345 | 2012-03-24 19:57:00 |   345  |   40.0000 |  67.0000 |
| 765432 | 2012-03-27 13:28:00 |   345  |  -14.0000 |  53.0000 |
+--------+---------------------+--------+-----------+----------+ 
```

* * *

最初我有两个**任务**：

**1.**统计2012年3月每个订阅者的交易次数（包括第一个表中不在第二个表中的，如`123 SomeName00`，以及2012年3月没有任何交易的，如`789 SomeName02`）。

**2.**统计2012 年3 月每个订阅者的期末余额（再次，包括第一个表中未在第二个表中的用户和2012 年3 月没有任何交易的用户）。

* * *

我以这种方式处理了第一个：

```
SELECT name, COUNT(transactions.subscID) AS num_of_trns
FROM subscribers
LEFT JOIN transactions
ON subscribers.subscID = transactions.subscID 
    AND transactions.date LIKE "2012-03%"
GROUP BY subscribers.subscID 
```

它似乎工作，给出以下结果：

```
+------------+------------+
|    name    |num_of_trns |
+------------+------------+
| SomeName00 |     0      |
| SomeName01 |     3      |
| SomeName02 |     0      |
| SomeName03 |     2      |
| SomeName04 |     2      |
+------------+------------+ 
```

然后我尝试重用代码，以便通过更改`COUNT(transactions.subscID)`为`transactions.balance`并向 LEFT JOIN ( `transactions.date = MAX(transactions.date)`) 添加一个条件来解决第二个任务，如下所示：

```
SELECT name, transactions.balance AS trns_blnc
FROM subscribers
LEFT JOIN transactions
ON subscribers.subscID = transactions.subscID 
    AND transactions.date LIKE "2012-03%"
    AND transactions.date = MAX(transactions.date) --this is incorrect
GROUP BY subscribers.subscID 
```

但是这种方法被证明是绝对错误的（我想，MySQL 只是不明白我试图比较哪些值）。

然后我决定使用第一个任务结果，再次左连接另一个实例`transactions`（对不起，如果我使用了错误的术语），条件是实例的日期 = 旧表的日期：

```
SELECT march_trns.name, balance FROM (
    SELECT name, date
    FROM subscribers
    LEFT JOIN transactions
    ON subscribers.subscID = transactions.subscID 
        AND transactions.date LIKE "2012-03%"
        GROUP BY subscribers.subscID
) AS march_trns
LEFT JOIN transactions AS transactions2
ON march_trns.date = transactions2.date 
```

但是很快就知道了`march_trns.date`，结果`balance`是在值中随机选择（或者我只是没能找出它的选择中的任何模式），满足`LIKE "2012-03%"`条件。此外，我的结果表中有 NULL（我猜，这是因为我不再使用`COUNT`它来计算所有行，包括 NULL）：

```
 Have:                          Want:
+------------+----------+      +------------+----------+
| name       | balance  |      | name       | balance  |
+------------+----------+      +------------+----------+
| SomeName00 |     NULL |      | SomeName00 |   0.0000 |
| SomeName01 |  90.0000 |      | SomeName01 |  60.0000 |
| SomeName02 |     NULL |      | SomeName02 |   0.0000 |
| SomeName03 |   2.0000 |      | SomeName03 |   2.0000 |
| SomeName04 |  67.0000 |      | SomeName04 |  53.0000 |
+------------+----------+      +------------+----------+ 
```

所以，我有两个问题：

*   我需要检索月末余额值
*   并将 NULL 值打印为`0`s。

如果你告诉我正确的方向，我会非常感激你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:14:49.303

```
SELECT  name, 
        COALESCE(COUNT(transactions.subscID), 0) AS num_of_trns,
        COALESCE(d.balance,0)
FROM    subscribers
        LEFT JOIN transactions
            ON subscribers.subscID = transactions.subscID 
                AND transactions.date LIKE "2012-03%"
        LEFT JOIN
        (
            SELECT  a.subscID, a.balance
            FROM    transactions a
                    INNER JOIN
                    (
                        SELECT subscID, MAX(date) maxDate
                        FROM transactions
                        WHERE transactions.date LIKE "2012-03%"
                        GROUP BY subscID
                    ) b ON a.subscID = b.subscID AND
                            a.date = b.maxDate

        ) d ON subscribers.subscID = d.subscID
GROUP BY subscribers.subscID
ORDER BY Name 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/18c77/3)

或通过使用`YEAR`和`MONTH`

```
SELECT  name, 
        COALESCE(COUNT(transactions.subscID), 0) AS num_of_trns,
        COALESCE(d.balance,0)
FROM    subscribers
        LEFT JOIN transactions
            ON subscribers.subscID = transactions.subscID 
                AND YEAR(transactions.date) = 2012 AND
                    MONTH(transactions.date) = 3
        LEFT JOIN
        (
            SELECT  a.subscID, a.balance
            FROM    transactions a
                    INNER JOIN
                    (
                        SELECT subscID, MAX(date) maxDate
                        FROM transactions
                        WHERE YEAR(transactions.date) = 2012 AND
                              MONTH(transactions.date) = 3
                        GROUP BY subscID
                    ) b ON a.subscID = b.subscID AND
                            a.date = b.maxDate

        ) d ON subscribers.subscID = d.subscID
GROUP BY subscribers.subscID
ORDER BY Name 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/18c77/4)

**来源**

*   [合并](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)
*   [月](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_month)
*   [年](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_year)

# mysql - 查询MYSQL时如何将特定规则应用于数字搜索？

> ID：13567475
> 
> 赞同：0
> 
> 时间：2012-11-26T15:02:57.780
> 
> 标签：mysql

好的，所以我正在尝试使用包含会议日期列表的 MYSQL 查询我的数据库。每个会议的代码都有一个预定义的模式：

前两位数字是年份 EG '12' for 2012' 接下来的两位数字是 01 到 12 以涵盖月份 接下来两位数字是 01 到 31 以涵盖月份中的日子

我需要应用这些规则，因为在测试数据库期间，人们在会议代码中输入了无效数字。这是在查询数据库时消除虚假会议的最简单方法。

我的问题是，应用这些规则最有效的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:13:42.310

```
delete from your_table
where substring(code, 3, 2) not between 1 and 12 /* month */
  and substring(code, 5, 2) not between 1 and 31  /* day */
  and code not regexp '^[0-9]{6}$';  /* general check */ 
```

# c# - (413) WCF 请求实体太大错误

> ID：13567477
> 
> 赞同：3
> 
> 时间：2012-11-26T15:03:04.167
> 
> 标签：c#, wcf, iis

我正在尝试构建一个允许用户上传文件的 WCF 服务，文件将被限制为最大 2mb 大小。我将 byte[] 传递给服务，但不断收到以下错误：System.Net.WebException：远程服务器返回错误：（413）请求实体太大。

我可以发送 1kb 和 10kb 的文件，但是当我尝试 82kb 等较大的文件时，我得到了那个错误。我浏览了一些以前的帖子，但似乎无法找到我做错了什么，我也尝试调整我的配置中的设置，设置最大值以查看是否有帮助，但没有任何效果至今。有人可以看看我有什么，看看我是否遗漏了什么，或者这与 IIS (7.5) 相关，而不是我的 web.config？

这也不使用 SSL。

WCF 配置：

```
  <services>
    <service name="DSLDService.DSLDService">
    <endpoint binding="basicHttpBinding" bindingConfiguration=""
    contract="DSLDService.IDocument" />
    </service>
    </services> 

```

网络应用程序配置：

```
  <endpoint address="http://xxx/DSLDService/DSLDService.svc"
    binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IDocument"
    contract="DSLDServiceReference.IDocument" name="" /> 

```

和

```
  <binding name="BasicHttpBinding_IDocument" closeTimeout="00:01:00"
    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
    allowCookies="false" bypassProxyOnLocal="false" maxBufferPoolSize="2147483647"    maxBufferSize="2147483647"
    maxReceivedMessageSize="2147483647" useDefaultWebProxy="true">
    <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" />
    </binding> 

```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:13:43.313

您需要为您的服务和客户端（这是您现在得到的）绑定配置，您可以在其中定义最大大小，否则默认为 64 kb。

# iphone - 在初始加载时快速重置核心数据属性标志？

> ID：13567486
> 
> 赞同：0
> 
> 时间：2012-11-26T15:03:21.367
> 
> 标签：iphone, objective-c, cocoa-touch, core-data

我希望在打开数据库后立即重置 Core Data 数据库中每个实体的标志属性。有没有办法在不执行 NSFetchRequest、更新标志并再次保存所有内容的情况下为所有对象快速设置此标志（设置为相同的值）。我只是好奇，因为当应用程序加载时我正在这样做，所以我想确保我使用最有效的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:08:08.260

是否必须在应用加载之前完成此更新？

如果加载完成后需要几秒钟，它会影响应用程序吗？

如果是这样，您可以将其丢给后台线程。这意味着应用程序加载速度很快，但您的核心数据会在 BG 中更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T15:08:21.010

不，确实没有明显的方法可以避免获取-更改-保存。当然，建议在后台线程上执行此操作，以免阻塞 UI。

但是，您可能想考虑一下您的整体设计，并提出这个问题是否真的有必要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T18:16:10.170

不，这是 Core Data 的限制之一——它在设计时并没有考虑到批量更新。

如果某些对象已经具有新值，则可以通过使用 fetch 谓词将它们过滤掉来加快速度。例如，如果您将布尔标志设置为 NO，则仅获取当前设置为 YES 的对象。

此外，使用 GCD 并`dispatch_apply()`并行进行更新可能会有所帮助。通过使用多个内核而不是一个内核，您将获得一些提升。托管对象不是线程安全的，但只要（a）在尝试保存更改之前确保所有更新都已完成，并且（b）您不会弄乱来自其他线程的托管对象或托管对象上下文，这应该可以工作在更新过程中。

# c# - 使用 craxdrt 循环浏览水晶子报告

> ID：13567488
> 
> 赞同：2
> 
> 时间：2012-11-26T15:03:26.373
> 
> 标签：c#, vb6-migration, crystal-reports-8.5

我正在尝试在 C#2010 中使用 CRAXDDRT 遍历水晶子报告，但遇到了问题。我发现很多看起来像这样的VB6代码......

```
Dim crxDatabaseTables As CRAXDRT.DatabaseTables
Dim crxDatabaseTable As CRAXDRT.DatabaseTable
Dim crxSections As CRAXDRT.Sections
Dim crxSection As CRAXDRT.Section
Dim CRXReportObject As Object

For Each crxSection In crxSections
    For Each CRXReportObject In crxSection.ReportObjects
       If CRXReportObject.Kind = crSubreportObject Then
           ' loop code here
       End If
    Next
Next 
```

虽然这在 VB6 中看起来和工作得很好，但这在 c# 中不起作用，因为 CRXReportObject 是一个对象，所以这条线......

```
 If CRXReportObject.Kind = crSubreportObject Then 
```

...不起作用，因为 'Kind' 不是对象上的方法。有没有人有任何建议来解决这个问题？在有人建议不使用 Crystal Report ActiveX 对象之前，我们不能。我们被困住了......这是到目前为止的代码......

```
foreach (CRAXDDRT.Section section in crystalReport.Sections)
{
    foreach (object item in section.ReportObjects)
    {
        //If item.Kind = crSubreportObject Then
            //loop code here
        //}
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:48:04.920

我可以说这个解决方案并不理想，但如果我找不到更好的解决方案，这就是我要采用的......

```
CRAXDDRT.SubreportObject subReport = null;

foreach (CRAXDDRT.Section section in crystalReport.Sections)
{
    foreach (object item in section.ReportObjects)
    {
        subReport = item as CRAXDDRT.SubreportObject;
        if (subReport != null)
        {
            //loop code here
        }
    }
} 
```

虽然这可行，但我欢迎更好的解决方案......

# database - WebSphere 6.1 使用 OracleConnection 对象，同时仍然要求对 WAS 的连接管理

> ID：13567489
> 
> 赞同：0
> 
> 时间：2012-11-26T15:03:34.707
> 
> 标签：database, oracle, connection, websphere

我们正在使用 WebSphere 6.1 应用服务器和 Oracle 10g 数据库。

我们被要求要求对 WAS 进行数据库连接管理，但我们还必须使用 OracleConnection 对象才能正确使用我们的数据库。

详细地说，如果我们坚持使用 WebSphere 的连接对象，我们会得到**com.ibm.ws.rsadapter.jdbc.wsjdbcconnection incompatible with oracle.jdbc.oracleconnection错误。**

谷歌搜索建议我们使用*getNativeConnection*方法，如下所示：

```
WSJdbcConnection conn = (WSJdbcConnection) ds.getConnection();
con = (OracleConnection) WSJdbcUtil.getNativeConnection((WSJdbcConnection) conn); 
```

但随后连接将不再由 WebSphere 管理。

有什么方法可以在仍然让 WebSphere 管理数据库连接的同时使用 Oracle 连接对象？

谢谢，

此致

编辑：我什至被要求不要使用 WSCallHelper 类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:41:58.677

也许[WSCallHelper API](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.express.doc/info/exp/ae/rdat_levport.html)是您正在寻找的。

# javascript - 用于 ie 上聊天用户错误的 ajax 脚本

> ID：13567494
> 
> 赞同：0
> 
> 时间：2012-11-26T15:03:48.997
> 
> 标签：javascript, ajax, internet-explorer, chat

我有以下 AJAX 脚本（包括 chat.php 和index.php） `onload=online()`，`<body>`它显示了在线用户并在 Firefox 和 Chrome 中运行良好，但是当我尝试使用 IE8 登录时，该脚本不起作用。

谁能帮我解决这个问题？也许 AJAX 脚本错误或与 IE 不兼容？

```
function online(){
    if (window.XMLHttpRequest){
        // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp = new XMLHttpRequest();
    }
    else{
        // code for IE6, IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange = function(){
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200){
            document.getElementById("online").innerHTML = xmlhttp.responseText;
        }
    }

    xmlhttp.open("GET","proses-chat.php");
    xmlhttp.send();
    setTimeout("online()", 8000);
}

function autofocus(){
    document.form_login.elements['username'].focus();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:23:34.933

1 天内解决：D，问题不在于 ajax 脚本，而在于 setcookies()

```
setcookie('username',$username,time()+36000,'http://$domain');
setcookie('password',$password,time()+36000,'http://$domain');
//$domain as define as $_SERVER['HTTP_HOST'] = localhost 
```

那是我之前在 check_login.php 的 cookie，最后 IE 和 Safari 没有读取本地主机，我替换为：

```
setcookie('username',$username,time()+3600,'/');
setcookie('password',$password,time()+3600,'/'); 
```

这意味着 cookie 接受所有会话和地址及其在 IE 和 Safari 上的工作：D，不要忘记销毁 cookie

```
setcookie('username', '',time()-3600, '/');
setcookie('password', '',time()-3600, '/'); 
```

thx 之前的所有回复和建议，也许解决方案可以帮助像我这样有问题的人 thx

# java - ClassNotFoundException : fuseki-server.jar

> ID：13567497
> 
> 赞同：0
> 
> 时间：2012-11-26T15:04:01.273
> 
> 标签：java, classnotfoundexception, jena, fuseki

我正在尝试使用带有以下代码的 fuseki-server.jar 执行 SPARQL 更新查询：

```
UpdateRequest ur = UpdateFactory.create();
ur.add(update);
UpdateProcessRemote r = new UpdateProcessRemote(ur,address);
r.execute(); 
```

但是，它失败了，但有以下例外：

```
SEVERE: Servlet.service() for servlet [QualityAssessment] in context with path [/GTQuality] threw exception [Servlet execution threw an exception] with root cause java.lang.ClassNotFoundException: com.hp.hpl.jena.sparql.modify.UpdateProcessRemote 
```

最初的反应是这是一个类路径问题，但 fuseki-server.jar 既包含在构建路径中，也包含在 WEB-INF/lib 中，所以我有点卡住了。完全相同的代码可以完美地作为一个独立的 Java 项目工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:41:19.557

在别处询问： http: [//answers.semanticweb.com/questions/19840/jenasparqlmodifyupdateprocessremote-class-not-found](https://web.archive.org/web/20130924132439/http://answers.semanticweb.com:80/questions/19840/jenasparqlmodifyupdateprocessremote-class-not-found)

如果它独立工作，而不是在其他地方工作，那么这是一个设置问题。

0.2.5 的 fuseki-server.jar 确实包含 UpdateProcessRemote：

解压-v fuseki-server.jar | grep UpdateProcessRemote.class ==>

```
1498  Defl:N      739  51% 2012-10-20 17:05 1517e336  com/hp/hpl/jena/sparql/modify/UpdateProcessRemote.class 
```

寻找其他（旧）ARQ 副本。

# batch-file - delims 和 goto 不工作（批量）

> ID：13567498
> 
> 赞同：1
> 
> 时间：2012-11-26T15:04:08.820
> 
> 标签：batch-file

有人可以告诉我为什么以下不起作用...

```
:PHASE_ONE
SET /P input_text=   ENTER PASSWORD:

for /f "delims=1234567890" %%A in ("%input_text%") GOTO PHASE_ONE 
```

我试图避免数值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:12:50.017

你的语法是错误的。你`DO`在你的`GOTO`.

但是，您的逻辑也是错误的方式-您实际上是在确保密码只能是数字。

以下将其限制为字母，例如：

```
@ECHO OFF

:PHASE_ONE
SET /P input_text=   ENTER PASSWORD:

for /f "delims=abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ" %%A in ("%input_text%") DO GOTO PHASE_ONE

ECHO. 
```

但是，您最好使用以下`FINDSTR`命令，例如：

```
@ECHO OFF

:PHASE_ONE
SET /P input_text=   ENTER PASSWORD:

ECHO %input_text% | FINDSTR /I /R [0-9][0-9]*

REM If Errorlevel is 1, then no matching string has been found,
REM so we have a valid password (i.e. non-numeric).
IF ERRORLEVEL 1 GOTO Passed
GOTO PHASE_ONE

:Passed
ECHO Hooray - your password is fine. 
```

# php - Magento 多商店 - 显示所有商店的产品

> ID：13567502
> 
> 赞同：3
> 
> 时间：2012-11-26T15:04:21.367
> 
> 标签：php, magento

我刚刚建立了一个 Magento 多商店，我正试图弄清楚如何在我的主页上展示这 3 家商店的产品。问题是我的代码只显示当前商店的帖子。例如：商店（1）显示商店（1）的产品商店（2）显示商店（2）的产品，但我不需要那样。我需要所有商店的所有产品

到目前为止，这是我的代码。有人可以帮我吗？

```
<?php 
$_productCollection = Mage::getResourceModel('reports/product_collection')
->addAttributeToSelect('*')
->setVisibility(array(2,3,4))                   
->setOrder('created_at', 'desc')
->setPage(1, 20)
->setStoreId('1');
?>

<?php foreach($_productCollection as $_product) : ?>

<img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(250, 150); ?>" alt="" />
<a href="<?php echo $_product->getProductUrl(); ?>"> <?php echo $_product->getName(); ?> </a>
<div class="grddescription"><?php echo $_product->getDescription(); ?>

<?php endforeach; ?> 
```

谢谢你们，伙计们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T16:17:02.220

Magento 对产品使用平面表，因此您将拥有每个商店的数据库表，其中仅包含为该商店启用的产品。按照这个原则，不可能使用默认的 Magento 获得所有产品。

为了让您走上正轨：您需要根据 catalog_product 表（不是平面表）进行自己的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:41:58.047

我找到了让它工作的方法！

在一个与 magento 无关的外部文件中（我将它放在 root 中）我调用 magento（在外部，所以我可以使用它的所有功能而不必担心限制），就像这样；

```
<?php 
    define('MAGENTOO', realpath('/var/wwweb/magento/'));
    require_once(MAGENTOO . '/app/Mage.php');
    $app = Mage::app();
?> 
```

比这个;

```
<?php
    $products = Mage::getResourceModel('catalog/product_collection')
    ->addAttributeToSelect('*')
    ->addAttributeToFilter('status', 1);

    $block = Mage::getSingleton('core/layout')->createBlock('catalog/product_list')
    ->setTemplate('/catalog/product/glist.phtml')
    ->setCollection($products);

    echo $block->toHtml();
?> 
```

我能够从所有站点获得所有产品！

注意：所有产品都通过 glist.phtml 显示，这是一个简单的 list.phtml 文件，可以根据我的需要进行编辑。

哟！

# html - HTML 内联块布局

> ID：13567504
> 
> 赞同：0
> 
> 时间：2012-11-26T15:04:24.627
> 
> 标签：html, css, layout

我无法理解 HTML 中的内联、内联块和块显示选项之间的区别。尤其是 inline-block 如何适合。块项目似乎总是出现在自己的行上。内联项目似乎不能很好地处理宽度和高度设置。Inline-block 似乎是两者之间的混合，但会导致一些古怪的布局情况。这是一个例子：

```
<style type="text/css">
#container {
    height: 100px;
    background: tan;
}

#container p {
    height: 100px;
    background: yellow;
    text-align: center;
    padding: 0px;
    margin: 0px;
    width: 29%;
    display: inline-block;
}

#container div:first-child {
    height: 100px;
    display: inline-block;
    width: 35%;
    padding: 0px;
    margin: 0px;
    border-top: 2px solid #888;
    border-right: 2px solid #888;
}

#container div:last-child {
    height: 100px;
    display: inline-block;
    width: 35%;
    padding: 0px;
    margin: 0px;
    border-left: 2px solid #888;
    border-bottom: 2px solid #888;
}
</style>
<body>
    <div id="container">
        <div class="decorator"></div>
        <p>A very long test paragraph like</p>
        <div class="decorator"></div>
    </div>
</body> 
```

我的期望是“p”元素和两个“div”元素都将在高度为 100px 的外部 div 内内联。我无法弄清楚为什么“p”元素显示在父 div 下方。垂直对齐没有影响，将“高度”切换为“行高”也没有影响。谁能解释这里发生了什么？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T15:07:18.273

未指定的元素`vertical-align`（例如 `p`）与`baseline`. 如果您设置 它`p`，`vertical-align:top`它将与其父级的顶部对齐（从而与您的示例中的其他元素对齐）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T15:19:50.487

首先，您已将其用作`inline`显示器。这意味着将考虑空格。

看[这里](http://jsfiddle.net/Tefvf/)：这是您当前的布局。

然后[在这里](http://jsfiddle.net/Tefvf/2/)：这是你没有空格的布局，注意区别吗？

由于这个空白，在某些情况下你的布局很可能会被扭曲。

现在解决`<p>`问题：默认情况下，`vertical-align`设置为`baseline`表示段落元素的基线将与其父元素的基线对齐。给它一种风格`vertical-align:top`来解决这个问题。

# c# - 混淆 SqlDataAdapter 和 SqlCommand

> ID：13567505
> 
> 赞同：1
> 
> 时间：2012-11-26T15:04:26.523
> 
> 标签：c#, sql-server, ado.net

我有这个调用方法：

```
public string RunReportSteps(int _reportKey) {
    DataTable fStepsTable;
    fStepsTable =  GetStepsTable("xxx.console.pr_xxx");
    return (string)fStepsTable.Rows[1][3];
} 
```

它调用这个私有方法：

```
private DataTable GetStepsTable(string procName) {
    var connectionString = ConfigurationManager.ConnectionStrings["xxx"].ConnectionString;
    using(var conn = new SqlConnection(connectionString))
    using(var adapt = new SqlDataAdapter())
    using(var cmd = new SqlCommand(procName, conn)) {

        conn.Open();

        SqlParameter p = new SqlParameter("@ReportKey", this.ReportKey);
        p.Direction = ParameterDirection.Input;
        cmd.Parameters.Add(p);
        adapt.SelectCommand = cmd;

        DataSet mySet = new DataSet();
        adapt.Fill(mySet);     //<<<<<<<<<<<<<<<<<<<errors here
        return mySet.Tables[0];
    }
} 
```

为什么我会收到以下错误消息？

> 过程或函数“pr_xxx”需要未提供的参数“@ReportKey”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T15:08:25.157

我假设这`procName`是存储过程的名称。您尚未将[`CommandType`](http://msdn.microsoft.com/en-us/library/system.data.commandtype.aspx)SqlCommand 设置为`StoredProcedure`：

```
using(var conn = new SqlConnection(connectionString))
using(var cmd = new SqlCommand(procName, conn))
using(var adapt = new SqlDataAdapter(cmd)) {
    cmd.CommandType = CommandType.StoredProcedure; // <<< this was missing

    SqlParameter p = new SqlParameter("@ReportKey", this.ReportKey);
    p.Direction = ParameterDirection.Input;
    cmd.Parameters.Add(p);

    DataTable table = new DataTable();
    adapt.Fill(table);     
    return table;
} 
```

# python - 使用 python 请求传递 csrftoken

> ID：13567507
> 
> 赞同：59
> 
> 时间：2012-11-26T15:04:28.583
> 
> 标签：python, csrf, python-requests

如何通过 python 模块请求传递 csrftoken？这就是我所拥有的，但它不起作用，我不确定将它传递给哪个参数（数据、标题、身份验证......）

```
import requests
from bs4 import BeautifulSoup

URL = 'https://portal.bitcasa.com/login'

client = requests.session(config={'verbose': sys.stderr})

# Retrieve the CSRF token first
soup = BeautifulSoup(client.get('https://portal.bitcasa.com/login').content)
csrftoken = soup.find('input', dict(name='csrfmiddlewaretoken'))['value']

login_data = dict(username=EMAIL, password=PASSWORD, csrfmiddlewaretoken=csrftoken)
r = client.post(URL, data=login_data, headers={"Referer": "foo"}) 
```

每次都出现同样的错误信息。

```
<h1>Forbidden <span>(403)</span></h1>
<p>CSRF verification failed. Request aborted.</p> 
```

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-11-26T17:15:40.397

If you are going to set the referrer header, then for that specific site you need to set the referrer to the same URL as the login page:

```
import sys
import requests

URL = 'https://portal.bitcasa.com/login'

client = requests.session()

# Retrieve the CSRF token first
client.get(URL)  # sets cookie
if 'csrftoken' in client.cookies:
    # Django 1.6 and up
    csrftoken = client.cookies['csrftoken']
else:
    # older versions
    csrftoken = client.cookies['csrf']

login_data = dict(username=EMAIL, password=PASSWORD, csrfmiddlewaretoken=csrftoken, next='/')
r = client.post(URL, data=login_data, headers=dict(Referer=URL)) 
```

When using unsecured `http`, the `Referer` header is often filtered out and otherwise easily spoofable anyway, so most sites no longer require the header to be set. However, when using an SSL connection and if it is set, it does make sense for the site to validate that it at least references something that could logically have initiated the request. Django does this when the connection is encrypted (uses `https://`), and actively requires it then.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-08-04T22:54:52.297

同样，使用**django**的 csrf_client**注意主要区别是**在 login_data中使用 csrftoken.value。用 Django 1.10.5 测试——

```
import sys

import django
from django.middleware.csrf import CsrfViewMiddleware, get_token
from django.test import Client

django.setup()
csrf_client = Client(enforce_csrf_checks=True)

URL = 'http://127.0.0.1/auth/login'
EMAIL= 'test-user@test.com'
PASSWORD= 'XXXX'

# Retrieve the CSRF token first
csrf_client.get(URL)  # sets cookie
csrftoken = csrf_client.cookies['csrftoken']

login_data = dict(username=EMAIL, password=PASSWORD, csrfmiddlewaretoken=csrftoken.value, next='/')
r = csrf_client.post(URL, data=login_data, headers=dict(Referer=URL)) 
```

# html - localStorage 满了怎么办？

> ID：13567509
> 
> 赞同：80
> 
> 时间：2012-11-26T15:04:33.377
> 
> 标签：html, firefox, google-chrome, safari, local-storage

我找到了有关缓存行为的[文章](http://code.google.com/speed/page-speed/docs/caching.html)，所以我只能假设它没有太大不同，但我想确定一下。

我读过大多数浏览器都有 5MB（给予或接受）用于 localStorage，我对浏览器的行为很感兴趣？

我了解每个浏览器的行为都不同，但我主要对 Safari、Chrome 和 Firefox 感兴趣（因为我认为这些是浏览器）。

*   上面提到的浏览器会从我的网站上删除数据还是会选择“最旧的”或类似的东西？
*   在这种情况下我的物品会被保存吗？

**最重要的是：**

*   假设我“滥用”了我网站上的 localStorage，试图将其全部用完，而在同一页面中，我正在填充它并试图节省更多。我会收到警告吗？发生这种情况时会`getItem`返回`null`还是以某种方式保存在内存中？

*   如果我尝试保存大于`localStorage`尺寸的项目会怎样？

**已回答：** 可以在[这里找到答案](https://stackoverflow.com/questions/12508274/does-amplify-store-return-error-or-catch-exception-when-local-storage-limit-exce)

*   sessionStorage 是否可以预期相同的行为，据称应该是相同的？

我知道这是很多问题，但我试图了解与该主题相关的所有内容，我会感谢您能回答的问题的任何部分。

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-01-07T06:49:32.370

首先，一些有用的资源：

*   [Web Storage Support Test](http://dev-test.nemikor.com/web-storage/support-test/) - 有一个表格比较浏览器之间的数据存储配额。
*   [简单的 localStorage 配额测试](http://arty.name/localstorage.html)
*   [localStorage 浏览器行为总结](http://diveintohtml5.info/storage.html#limitations)
*   [W3C 规范](http://www.w3.org/TR/webstorage/#storage)- 指示用户代理（例如浏览器）的行为方式（localStorage 和 sessionStorage）。

在回答您的问题时，桌面浏览器的初始最大 localStorage 配额往往为每个域 5MB。在某些情况下，这可以由用户调整：

*   Opera：opera:config -> 本地存储的域配额
*   火狐：about:config -> dom.storage.default_quota

在 Chrome 中，用户似乎无法调整此设置，尽管与 Opera 一样，可以使用开发人员工具直接按域编辑 localStorage 数据。

当您尝试在 localStorage 中存储数据时，浏览器会检查当前域是否有足够的剩余空间。如果是：

*   存储数据，如果已存在相同的键，则覆盖值。

如果不：

*   不存储数据并且不覆盖现有数据。
*   `QUOTA_EXCEEDED_ERR`抛出异常。

在这种情况下，`getItem(key)`将返回成功存储的最后一个值（如果有）。

（Opera 稍有不同，它会显示一个对话框，让用户选择增加当前域的存储空间。）

请注意， sessionStorage 和 localStorage 都是同一个 Storage 对象的实现，因此它们的行为相似，错误处理也相同。

# c# - Excel 互操作加载 XLL 和 DLL

> ID：13567512
> 
> 赞同：8
> 
> 时间：2012-11-26T15:04:41.653
> 
> 标签：c#, .net, excel, com-interop, bloomberg

我在 Bloomberg API 方面表现出色（它使用像 =BDP("MSEquipment","ask") 这样的简单调用）。我还有一个 C# 应用程序，它打开一个使用 Bloomberg API 的 excel 文件（通过互操作）。我在[这里](https://stackoverflow.com/questions/1154558/how-to-load-an-excel-addin-using-interop)读到，当您通过互操作加载 excel 时，不会加载插件。我什至尝试过使用那里建议的代码。但是，这似乎只适用于 XLL 和 XLAM 文件，而且 Bloomberg 似乎也使用了未加载的 DLL 文件。有没有办法让所有这些插件通过互操作加载？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-27T16:23:24.733

我假设，如果您手动启动 excel，加载项会正确加载。

`Process p = Process.Start("excel.exe");`如果是这样，您可以通过调用然后使用获取 Interop Object 的`AccessibleObjectFromWindow`方法来获取加载了 BB-Addins 的 Excel Interop Object。

可以在[此处](http://blogs.officezealot.com/whitechapel/archive/2005/04/10/4514.aspx)找到有关如何执行此操作的示例。

* * *

## 快速演练

我决定展示我通过**加载**的bloomberg插件获取`Excel.Interop.Application`实例的步骤。也许有人看到这个并发现它很有用，或者知道我在哪里遗漏了一些东西以获得更优雅的解决方案。

 **> 我假设您的客户端上安装了彭博终端，并且您可以从 excel 中请求参考和历史数据（BDP 和 BDH）。否则这可能不适合你......

### 最简单的方法行不通

```
var excel = new Microsoft.Office.Interop.Excel.Application();
excel.Workbooks.Open(filePath);
excel.Run("RefreshAllStaticData"); 
```

`Run()`会抛出一个`COMException`：

> 无法运行宏“RefreshAllStaticData”。该工作簿中的宏可能不可用，或者所有宏都可能被禁用。

### 手动加载插件不起作用

```
var excel = new Microsoft.Office.Interop.Excel.Application();
var addIn = ex.AddIns.Add(filename);
addIn.Installed = true;
Console.WriteLine(addIn.IsOpen); 
```

> 错误的

但是，如果通过单击 Windows 任务栏来启动 Excel，则加载项会很好地加载......所以我尝试通过启动可执行文件“excel.exe”来启动 excel。

### 使用 Process.Start("excel.exe") 有效！！

使用该类启动 excel`System.Diagnostics.Process`会加载bloomberg 插件。（我可以看到`Bloomberg-RibbonTab`。）

现在我需要的是那个 excel 进程的互操作对象。我可以使用[上面的例子得到它](http://blogs.officezealot.com/whitechapel/archive/2005/04/10/4514.aspx)

### 我的实现

```
//From http://blogs.officezealot.com/whitechapel/archive/2005/04/10/4514.aspx
public class ExcelInteropService
{
    private const string EXCEL_CLASS_NAME = "EXCEL7";

    private const uint DW_OBJECTID = 0xFFFFFFF0;

    private static Guid rrid = new Guid("{00020400-0000-0000-C000-000000000046}");

    public delegate bool EnumChildCallback(int hwnd, ref int lParam);

    [DllImport("Oleacc.dll")]
    public static extern int AccessibleObjectFromWindow(int hwnd, uint dwObjectID, byte[] riid, ref Microsoft.Office.Interop.Excel.Window ptr);

    [DllImport("User32.dll")]
    public static extern bool EnumChildWindows(int hWndParent, EnumChildCallback lpEnumFunc, ref int lParam);

    [DllImport("User32.dll")]
    public static extern int GetClassName(int hWnd, StringBuilder lpClassName, int nMaxCount);

    public static Microsoft.Office.Interop.Excel.Application GetExcelInterop(int? processId = null)
    {
        var p = processId.HasValue ? Process.GetProcessById(processId.Value) : Process.Start("excel.exe");
        try
        {
            return new ExcelInteropService().SearchExcelInterop(p);
        }
        catch (Exception)
        {
            Debug.Assert(p != null, "p != null");
            return GetExcelInterop(p.Id);
        }
    }

    private bool EnumChildFunc(int hwndChild, ref int lParam)
    {
        var buf = new StringBuilder(128);
        GetClassName(hwndChild, buf, 128);
        if (buf.ToString() == EXCEL_CLASS_NAME) { lParam = hwndChild; return false; }
        return true;
    }

    private Microsoft.Office.Interop.Excel.Application SearchExcelInterop(Process p)
    {
        Microsoft.Office.Interop.Excel.Window ptr = null;
        int hwnd = 0;

        int hWndParent = (int)p.MainWindowHandle;
        if (hWndParent == 0) throw new ExcelMainWindowNotFoundException();

        EnumChildWindows(hWndParent, EnumChildFunc, ref hwnd);
        if (hwnd == 0) throw new ExcelChildWindowNotFoundException();

        int hr = AccessibleObjectFromWindow(hwnd, DW_OBJECTID, rrid.ToByteArray(), ref ptr);
        if (hr < 0) throw new AccessibleObjectNotFoundException();

        return ptr.Application;
    }
} 
```

现在我可以使用下面的代码行来获取一个`Excel.Interop.Application`加载了bloomberg插件的实例！

```
var excel = ExcelInteropService.GetExcelInterop();
excel.Workbooks.Open(filename);
excel.Run("RefreshAllStaticData");
// works "like a charm" 
```

我希望这可以节省我浪费的时间，如果有人有更优雅的解决方案并想要分享它，将不胜感激。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-04T07:11:48.857

我意识到自从提出这个问题以来已经有一段时间了。不过，我想分享我的经验，因为我遇到了同样的问题。一个简单的解决方案是按照[https://blogs.msdn.microsoft.com/accelerating_things/2010/09/16/loading-excel-add-ins-at-runtime/](https://blogs.msdn.microsoft.com/accelerating_things/2010/09/16/loading-excel-add-ins-at-runtime/)中的建议进行操作，首先将 .Installed 设置为 false，然后为真：

```
this._application = new Application
                {
                    EnableEvents = true,
                    Visible = true
                };

                //Load Bloomberg Add-In
                for (var i = 1; i <= this._application.AddIns.Count; i++)
                {
                    var currentAddIn = this._application.AddIns.Item[i];

                    if (currentAddIn.Name != "BloombergUI.xla") continue;

                    currentAddIn.Installed = false;
                    currentAddIn.Installed = true;
                } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-03T15:40:31.877

我能够使用[NetOffice](https://netoffice.codeplex.com/)获得类似的结果。此特定功能将检索最后启动的 excel 进程实例，如果确实存在，则创建一个新实例。从那里你可以自由地打开/创建一个新的工作簿。

使用 netoffice 和这种方法的好处是它不依赖于特定于版本的互操作 DLL，如果您处理 NetOffice 对象，那么所有 excel COM 对象都会被正确清理。

```
using Xl = NetOffice.ExcelApi;    
private static Xl.Application GetOrStartExcel(bool started = false)
{
    Xl.Application application = null;

    try
    {
        object nativeProxy = System.Runtime.InteropServices.Marshal.GetActiveObject("Excel.Application");
        application = new Xl.Application(null, nativeProxy);
        return application;
    }
    catch (Exception ex)
    {
        if (!started) Process.Start("excel.exe");
        Thread.Sleep((int) TimeSpan.FromSeconds(1).TotalMilliseconds);
        return GetOrStartExcel(true);
    }
} 
```

用法：

```
using (var excel = GetOrStartExcel())
{
    //Do work with excel object
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T01:13:17.037

如果要将 DLL 加载到 Excel 插件中，则必须使用 RegAsm 注册此 DLL 文件。并检查`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Office\Excel\AddIns`是否注册成功。**

# android - 禁用软键盘检测？

> ID：13567514
> 
> 赞同：0
> 
> 时间：2012-11-26T15:04:49.150
> 
> 标签：android, cordova, sencha-touch

我有一个在 Chrome 中运行良好的 Sencha Touch 应用程序。但是，当使用 eclipse 和 Applaud 捆绑包打包为 Android 应用程序时，它会产生一种相当奇怪的行为，这可能与 SoftKeyboardDetect 相关。

用户可以点击复选框以输入关于所显示信息的评论。这将取消隐藏他们可以写评论的文本区域。然后他们点击一个按钮继续。显示的信息被新信息替换，他们可以再次选中复选框以输入评论。点击继续按钮会取消选中复选框并隐藏文本区域。

我发现如果用户在第一个信息上输入评论然后点击继续按钮，继续按钮保持“按下”状态并且必须再次点击才能继续。

我注意到点击继续按钮会导致 SoftKeyboardDetect 事件被触发，我想知道这是否是导致问题的原因？

如果我更改代码，以便当用户按下继续时，文本区域保持显示（即未隐藏），问题就消失了，这导致我假设响应高度变化的 phonegap 类 LinearLayoutSoftKeyboardDetect 落后问题。有谁知道我可以如何禁用该 phonegap 行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T23:43:36.110

好吧，我不知道到底发生了什么。一旦我确保可以在 logcat 中看到有关 SoftKeyboardDetect 的详细输出，我就可以看到 phonegap 似乎在做一些非常明智的事情。

每次我点击一个文本区域时，它都会检查屏幕区域是否发生了变化。如果没有，那么它会忽略该事件。当 textarea 失去焦点时也是如此，即当我单击按钮继续时。

我最终发现，如果我在其中输入文本的任何文本区域在我单击继续按钮之前仍然具有焦点，那么事情就会出错，如上所述。但是，如果我确保将焦点从我可能输入任何文本的任何文本区域中移除（通过使用 Sencha 的“模糊”方法），那么一切都会顺利进行。

我真的不明白。它可能与 SoftKeyboardDetect 有关，因为这是 phonegap 引入的唯一东西，并且该应用程序在 Chrome 中运行平稳，只有 Sencha Touch 代码。然而，如上所述，SoftKeyboardDetect 似乎在做相当明智的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:15:47.477

在你的 CSS 中添加这一行

```
* {
     -webkit-touch-callout: none;
 } 
```

来源：https://groups.google.com/forum/?fromgroups=#!topic/phonegap/_bgNkb19C_M

# java - jsp中不止一个preparestatement

> ID：13567516
> 
> 赞同：-1
> 
> 时间：2012-11-26T15:04:52.397
> 
> 标签：java, mysql, jsp, insert

我可以在一个.jsp 文件中有多个preparestatement 吗？我正在尝试执行此“jsp 文件”，但此代码对我不起作用。像这样的东西：

```
<%
    String login = request.getParameter("login");
    String pwd = request.getParameter("password");
    String name = request.getParameter("name");

    Connection connection = null;
    PreparedStatement pstatement = null;
    Class.forName("com.mysql.jdbc.Driver").newInstance();
    int updateQuery = 0;
    if (login != null && password != null && full_name != null && ulevel != null && team_id != null) {
        if (login != "" && password != "" && full_name != "" && ulevel != "" && team_id != "") {
            try {
                connection = DriverManager.getConnection("jdbc:mysql://localhost:3306/<mydatabase>", "<mylogin>", "<mypwd>");
                String queryString_1 = "INSERT INTO users (login,password) VALUES (?, ?)";
                pstatement = connection.prepareStatement(queryString_1);
                pstatement.setString(1, login);
                pstatement.setString(2, password);
                updateQuery = pstatement.executeUpdate();
                String queryString_2 = "INSERT INTO members (name) VALUES (?)";
                pstatement = connection.prepareStatement(queryString_2);
                pstatement.setString(1, name);
                updateQuery = pstatement.executeUpdate();
                if(updateQuery_1 != 0 && updateQuery_2 != 0) {
                   response.sendRedirect("index.jsp");
                }
            } catch (Exception ex) {
                out.println("Unable to connect to database.");
                } finally {
                pstatement.close();
                connection.close();
            }
        } 
    } 
%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:25:44.150

您可以根据`PreparedStatement`需要拥有任意数量的 s。

要改进您的代码：
1\. 您必须声明 int updateQuery_1 = 0 和 updateQuery_2 = 0。
2\. 您必须在两个不同的 sql 语句上使用`updateQuery_1 = pstatement.executeUpdate();`和。`updateQuery_2 = pstatement.executeUpdate();`

# java - 根据运行时属性对对象列表进行排序

> ID：13567526
> 
> 赞同：7
> 
> 时间：2012-11-26T15:05:36.963
> 
> 标签：java, list, sorting, reflection, comparator

我有一个`List`值[对象](https://stackoverflow.com/questions/1612334/difference-between-dto-vo-pojo-javabeans)[VO]。这些对象有许多属性和相应的 get/set 方法。我想`List`根据我将在运行时获得的属性对其进行排序。让我详细解释一下...

我的VO是这样的：

```
public class Employee {
    String name;
    String id;

    private String getName() {
        return name;
    }

    private String getId() {
        return id;
    }
} 
```

我将`sortType`在运行时得到一个字符串，它可以是`"id"`或`"name"`。我想根据`String`.

我曾尝试同时使用`Comparator`和反射，但没有运气。可能是我没有正确使用它。我不想使用条件`if`块分支来创建`Comparator`需要的任何新的特定[匿名内部类]（在运行时）。还有其他想法吗？

* * *

try catch 应该在新类中。这是工作代码。如果您想为 使用单独的类`Comparator`，请在下面的@Bohemian 评论中找到它。

```
 String sortType = "name"; // determined at runtime
        Collections.sort(results, new Comparator<Employee>() {
        public int compare(Employee c1, Employee c2) {
            try{
            Method m = c1.getClass().getMethod("get" + StringUtils.capitalize(sortType));
            String s1 = (String)m.invoke(c1);
            String s2 = (String)m.invoke(c2);
            return s1.compareTo(s2);
            }
            catch (Exception e) {
                return 0;
            }
        }
       }); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-27T05:13:21.470

为作业创建一个`Comparator`：

```
public class EmployeeComparator implements Comparator<Employee> {

    private final String type;

    public EmployeeComparator (String type) {
        this.type = type;
    }

    public int compare(Employee e1, Employee e2) {
        if (type.equals("name")) {
             return e1.getName().compareTo(e2.getName());
        }
        return e1.getId().compareTo(e2.getId());
    }

} 
```

然后使用它

```
String type = "name"; // determined at runtime
Collections.sort(list, new EmployeeComparator(type)); 
```

反射版本将是相似的，除了你会在“get”+类型（大写）的对象上寻找一个方法并调用它并将其硬转换为 Comparable 并使用 compareTo（我将尝试显示代码，但我我正在使用我的 iPhone，这有点牵强，但这里）

```
public class DynamicComparator implements Comparator<Object> {
    private final String type;
    // pass in type capitalised, eg "Name" 
    // ie the getter method name minus the "get"
    public DynamicComparator (String type) {
        this.type = type;
    }
    public int compare(Object o1, Object o2) {
        // try-catch omitted 
        Method m = o1.getClass().getMethod("get" + type);
        String s1 = (String)m.invoke(o1);
        String s2 = (String)m.invoke(o2);
        return s1.compareTo(s2);
    }
} 
```

* * *

好的......这是在*不*创建类的情况下使用匿名类（具有异常处理以便代码编译）的方法：

```
List<?> list;
final String attribute = "Name"; // for example. Also, this is case-sensitive
Collections.sort(list, new Comparator<Object>() {
    public int compare(Object o1, Object o2) {
        try {
            Method m = o1.getClass().getMethod("get" + attribute);
            // Assume String type. If different, you must handle each type
            String s1 = (String) m.invoke(o1);
            String s2 = (String) m.invoke(o2);
            return s1.compareTo(s2);
        // simply re-throw checked exceptions wrapped in an unchecked exception
        } catch (SecurityException e) {
            throw new RuntimeException(e); 
        } catch (NoSuchMethodException e) {
            throw new RuntimeException(e);
        } catch (IllegalAccessException e) {
            throw new RuntimeException(e);
        } catch (InvocationTargetException e) {
            throw new RuntimeException(e);
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T05:10:54.927

请执行下列操作：

*   从客户端获取字段名称
*   构建 getter 的名称 -> "get" + 字段名称（在第一个字符大写之后）
*   尝试使用[Class.getDeclaredMethod()找到具有反射的方法](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getDeclaredMethod%28java.lang.String,%20java.lang.Class...%29)
*   *如果找到，在您的VO*类的两个实例上调用返回的 Method 对象
*   使用调用的 getter 方法的结果进行排序

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T05:02:41.443

[把事情简单化！](http://c2.com/cgi/wiki?KeepItSimple)

如果选择只有`id`或`name`——使用 if 语句。

在两个选择之间进行选择。这就是如果被发明的目的。

或者，如果它有很多属性，那么使用反射，或者`Map`首先将数据存储在 a 中。有时`Map`比一堂课更好。特别是如果您的 VO 没有除 getter 和 setter 之外的方法。

但请注意，在这种情况下使用反射可能是不安全的，因为您的客户端可能会在类似于 SQL 注入的攻击中在 CGI 参数中注入任何术语。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-20T07:04:32.740

*无论出于何种原因，您都不想使用`if`语句*......**利用 using[`java.lang.reflect.Field`](https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getField-java.lang.String-)**：

```
String sortType = "name"; // determined at runtime
Comparator<Employee> comparator = new Comparator<Employee>(){
    public int compare(Employee e0, Employee e1){
        try {
            Field sortField = e0.getClass().getField(sortType);
            return sortField.get(e0).toString()
                       .compareTo(sortField.get(e1).toString()));

        } catch(Exception e) {
            throw new RuntimeException(
                "Couldn't get field with name " + sortType, e);
        }
    };
} 
```

*但这仅适用于字符串字段*-**下面处理任何类型的字段（或至少，`Comparable`字段）**：

```
String sortType = "name"; // determined at runtime
Comparator<Employee> comparator = new Comparator<Employee>(){
    public int compare(Employee e0, Employee e1){
        try {
            Field sortField = e0.getClass().getField(sortType);
            Comparable<Object> comparable0
                = (Comparable<Object>) sortField.get(e0);
            Comparable<Object> comparable1
                = (Comparable<Object>) sortField.get(e1);

            return comparable0.compareTo(comparable1);

        } catch(Exception e) {
            throw new RuntimeException(
                          "Couldn't get field with name " + sortType, e);
        }
    };
} 
```

** 但是请注意，它*不会忽略`String`/ `Character`/`char`*的大小写（尽管它*会考虑负数*） - 例如，它将`"Z"`在小写之前排序大写`"a"`。如果您想考虑*这两种*情况，我看不到解决方法（等待它......）`if`声明！

[`JavaSortAnyTopLevelValueObject`](https://github.com/cellepo/JavaSortAnyTopLevelValueObject)您可以在我的Github 项目中看到处理所有这些情况的完整实现，以及以下情况（在依赖项 JAR 中也可用）：

*   处理*多个*sort-tie*优先级*字段（即：首先按优先级 0 排序，按优先级 1 排序第二个 [如果有关联]，按...排序第三个）
*   按每个排序参数处理*升序/降序排序*
*   处理 { 、或}的任何顶级`public`（或调用位置中可见的修饰符）字段类型`primitive``Boxed Primitive``String`
*   忽略字符大小写

# jquery - 使用 jQuery 添加带有文本框的新 tr

> ID：13567527
> 
> 赞同：0
> 
> 时间：2012-11-26T15:05:42.373
> 
> 标签：jquery

我正在使用 jQuery 添加一行新的文本框。

即使我打开开发者工具时没有错误，代码也不会工作。

[单击此处](http://jsfiddle.net/FNABg/1/)查看我所做的示例。

我正在使用：

```
$(document.createElement('tr')).attr('id', 'textbox_holder_' + family_rel_counter); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T15:07:49.597

您的选择器错误

```
$('add_new_line_fam_rel') 
```

应该

```
$('#add_new_line_fam_rel') 
```

因为是身份证

[http://jsfiddle.net/sEQXu/](http://jsfiddle.net/sEQXu/)

# vb.net - 创建图像的内存大小

> ID：13567533
> 
> 赞同：0
> 
> 时间：2012-11-26T15:06:13.303
> 
> 标签：vb.net, visual-studio-2010, iis-7

我有一个网站，除其他外，它根据数据库中的值创建图像。问题是图像高超过 40000 像素，宽略低于 2000 像素。

图像在创建后保存，然后显示在页面上。我使用 70% 的 jpg 压缩来稍微减小文件大小，但问题是，如果我在 VS2010 中本地运行网站，则会创建图像，但在服务器上运行时，图像有 0 字节。

我的猜测是，服务器（IIS7）没有足够的内存来处理它。我该怎么做才能让网络服务器创建这个图像？

# android - 动态获取（设置）listView 行高

> ID：13567537
> 
> 赞同：0
> 
> 时间：2012-11-26T15:06:30.300
> 
> 标签：android, listview, android-arrayadapter, row-height

我有 listView ，其中每一行看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:padding="5dip" 
    android:background="#FFFFFF">
    <LinearLayout
        android:id="@+id/thumbnail"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_marginRight="5dip"
        android:padding="3dip" >

        <TextView
            android:id="@+id/altOrderId"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="ID"
            android:gravity="center|center"
            android:textColor="#040404"
            android:textSize="15dp"
            android:textStyle="bold"
            android:typeface="sans" />
    </LinearLayout>

    <TextView
        android:id="@+id/altOrderTitle"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="1dip"
        android:textStyle="bold"
        android:layout_toRightOf="@+id/thumbnail"
        android:text="Just gona stand there and ..."
        android:textColor="#000000"
        android:textSize="14dp" />

    <TextView
        android:id="@+id/altOrderStatus"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/altOrderTitle"
        android:layout_alignParentBottom="true"
        android:layout_marginRight="5dip"
        android:layout_toRightOf="@+id/thumbnail"
        android:textColor="#838B8B"
        android:textSize="14dp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/altOrderPrice"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@+id/thumbnail"
        android:text="Rihanna Love the way lie"
        android:textColor="#458B74"
        android:textSize="15dp"
        android:textStyle="bold"
        android:typeface="sans" />

</RelativeLayout> 
```

我的适配器类是：

```
public class OrderAdapter extends ArrayAdapter<Order>{

    Context context; 
    int layoutResourceId;    
    public static int rowHeight = 0;
    List<Order> orders = null;
    private Activity activity;
    public OrderAdapter(Context context,  int layoutResourceId,List<Order> orders) {
        super(context, layoutResourceId, orders);
        this.layoutResourceId = layoutResourceId;
        this.context = context;
        this.orders = orders;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        OrderHolder holder = null;

        if(row == null)
        {

            LayoutInflater inflater = (LayoutInflater)this.context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            row = inflater.inflate(R.layout.dash_alt_item, parent, false);
            row.setBackgroundColor(Color.WHITE);
            //row.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT,30));
            holder = new OrderHolder();
            holder.orderId = (TextView)row.findViewById(R.id.altOrderId);
            holder.orderTitle = (TextView)row.findViewById(R.id.altOrderTitle);
            holder.orderStatus = (TextView)row.findViewById(R.id.altOrderStatus);
            holder.orderPrice = (TextView)row.findViewById(R.id.altOrderPrice);

            row.setTag(holder);
        }
        else
        {
            holder = (OrderHolder)row.getTag();
        }

        Order order = orders.get(position);
        holder.orderId.setText(Integer.toString(order.getOrderid()));
        holder.orderTitle.setText(order.getTitle());
        holder.orderStatus.setText(order.getProcess_status().getProccessStatusTitle());
        holder.orderPrice.setText(Float.toString(order.getPrice()));

        return row;
    }

    static class OrderHolder
    {
        TextView orderId;
        TextView orderTitle;
        TextView orderStatus;
        TextView orderPrice;
    }
} 
```

我需要检测（或设置）每个列表视图行的高度，并将相应数量的项目显示到设备屏幕高度。我该如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:20:29.853

使用gridview而不是listview，并设置这个`android:numColumns="auto_fit" >`

```
<GridView
        android:id="@+id/gridView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:numColumns="auto_fit" >
    </GridView> 
```

获取屏幕高度

```
Display display = getWindowManager().getDefaultDisplay();
Point size = new Point();
display.getSize(size);
int width = size.x;
int height = size.y; 
```

# c# - 如何将类型传递给方法？

> ID：13567538
> 
> 赞同：5
> 
> 时间：2012-11-26T15:06:34.830
> 
> 标签：c#

我怎样才能调用这个构造函数？

```
public class DataField
{
    public String Name;
    public Type TheType;
    public DataField(string name, Type T)
    {
        Name = name;
        TheType = T;
    }
} 
```

我想到了

```
f = new DataField("Name",typeof(new String())); 
```

但我想避免创建对象。那么这个可以吗？

```
f = new DataField("Name",String); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T15:08:27.843

你应该可以简单地使用`typeof(string)`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T15:08:31.740

您可以使用类型名称`typeof`：

```
f = new DataField("Name", typeof(string)); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-26T15:11:25.003

通过`String.class`应该工作。它是 的一个实例`Class`，它实现`Type`：

```
new DataField("Name", String.class); 
```

# reporting-services - 使用存储过程创建“数据源视图”？

> ID：13567540
> 
> 赞同：1
> 
> 时间：2012-11-26T15:06:36.000
> 
> 标签：reporting-services, reporting, adhoc

我正在尝试创建一个数据源视图，以与 Adhoc SSRS 报告一起使用。

这些是制作即席报告的步骤。

数据源 > 数据源视图 > 数据源模型 > 报表生成器 > 报表。

当我尝试创建数据源视图时，它只允许我从选定的数据源的表/视图中进行选择。存储过程没有选项。有没有办法用存储过程创建数据源视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T18:30:30.790

根据这个来自 Microsoft *Stored processes are not supported by Report Builder 的*[回答](http://social.msdn.microsoft.com/forums/en-US/sqlreportingservices/thread/6aea5c68-939e-4203-ba41-288e4bfc6eb6)。尽管这是一个旧响应，但 Report Builder 1.0 是 Report Builder 支持模型的最后一个版本，因此不再添加来自 Microsoft 的 DataSourceView/Model，所以我相信这仍然是准确的。我还查看[了与报表生成器和报表模型相关的最新文档](http://msdn.microsoft.com/en-us/library/ms156272%28v=sql.105%29.aspx)，但没有看到任何提及存储过程的内容。

 *如果存储过程和最终用户报告对您很重要，我们的[ActiveReports Server 产品](http://www.activereportsserver.com/)包括一个“逻辑数据模型”，它大致相当于 Report Builder 1.0 / SQL Server 2005 中的报告模型，但我们在它之上添加了很多内容，包括支持用于[从存储过程创建实体](http://community.activereportsserver.com/knowledgebase/articles/167389-reporting-on-a-stored-procedure)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T00:14:14.717

这篇关于代码项目的文章似乎是您正在寻找的内容：http: [//www.codeproject.com/Articles/20540/Using-StoredProcs-with-Parameters-in-SQL-Reporting](http://www.codeproject.com/Articles/20540/Using-StoredProcs-with-Parameters-in-SQL-Reporting)*

# scala - scala中任意数量列表的叉积

> ID：13567543
> 
> 赞同：5
> 
> 时间：2012-11-26T15:06:54.547
> 
> 标签：scala

我在 Scala 中有一个列表，如下所示。

```
val inputList:List[List[Int]] = List(List(1, 2), List(3, 4, 5), List(1, 9)) 
```

我想要所有子列表的交叉产品列表。

```
val desiredOutput: List[List[Int]] = List( 
        List(1, 3, 1), List(1, 3, 9),
        List(1, 4, 1), List(1, 4, 9),
        List(1, 5, 1), List(1, 5, 9),
        List(2, 3, 1), List(2, 3, 9),
        List(2, 4, 1), List(2, 4, 9),
        List(2, 5, 1), List(2, 5, 9)) 
```

inputList 和子列表中的元素数量不固定。Scala 的做法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T15:28:35.557

这是一种使用递归的方法。但是它不是尾递归的，所以要小心 stackoverflows。然而，它可以通过使用辅助函数转换为尾递归函数。

```
def getProduct(input:List[List[Int]]):List[List[Int]] = input match{
  case Nil => Nil // just in case you input an empty list
  case head::Nil => head.map(_::Nil) 
  case head::tail => for(elem<- head; sub <- getProduct(tail)) yield elem::sub
} 
```

测试：

```
scala> getProduct(inputList)
res32: List[List[Int]] = List(List(1, 3, 1), List(1, 3, 9), List(1, 4, 1), List(1, 4, 9), List(1, 5, 1), List(1, 5, 9), List(2, 3, 1), List(2, 3, 9), List(2, 4, 1), List(2, 4, 9), List(2, 5, 1), List(2, 5, 9)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T16:04:13.637

如果您使用`scalaz`，这可能是一个适合的情况`Applicative Builder`：

```
import scalaz._
import Scalaz._

def desiredOutput(input: List[List[Int]]) = 
  input.foldLeft(List(List.empty[Int]))((l, r) => (l |@| r)(_ :+ _))

desiredOutput(List(List(1, 2), List(3, 4, 5), List(1, 9))) 
```

我自己对 scalaz 不是很熟悉，我希望它有一些更强大的魔法来做到这一点。

**编辑**

正如特拉维斯布朗建议的那样，我们只是写

```
def desiredOutput(input: List[List[Int]]) = input.sequence 
```

我发现[这个问题](https://stackoverflow.com/questions/5299295/why-does-application-of-sequence-on-list-of-lists-lead-to-computation-of-its-c)的答案对于理解什么非常有帮助`sequence`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-12T09:42:08.667

如果你不介意一点函数式编程：

```
def cross[T](inputs: List[List[T]]) : List[List[T]] = 
    inputs.foldRight(List[List[T]](Nil))((el, rest) => el.flatMap(p => rest.map(p :: _))) 
```

发现它是如何工作的很有趣。:-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T16:22:54.953

经过几次尝试，我得出了这个解决方案。

```
val inputList: List[List[Int]] = List(List(1, 2), List(3, 4, 5), List(1, 9))
val zss: List[List[Int]] = List(List())
def fun(xs: List[Int], zss: List[List[Int]]): List[List[Int]] = {
    for {
        x <- xs
        zs <- zss
    } yield {
        x :: zs
    }
}
val crossProd: List[List[Int]] = inputList.foldRight(zss)(fun _)
println(crossProd) 
```

# c++ - 如何从新的自定义 FIX 字典生成消息类

> ID：13567544
> 
> 赞同：2
> 
> 时间：2012-11-26T15:06:56.040
> 
> 标签：c++, quickfix

在 QuickFIX/j 中有[一种方法](http://www.quickfixj.org/confluence/display/qfj/Custom+Message+Generation+-+Packaging)可以做到这一点。

有没有办法在 QuickFIX c++ 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:20:57.897

我自己从未尝试过，但是如果您下载源代码，您会`generate.sh`在“spec”目录中找到一个文件，其中包含以下内容：

```
./generate_c++.sh
./generate_net.sh
ruby Generator.rb 
```

第一个脚本只是调用一堆`xsltproc`命令来生成值和消息调度逻辑（又名破解程序）。但是大部分生成都是使用`Generator.rb`脚本完成的（C++ 的主要逻辑在 中`GeneratorCPP.rb`）。因此，您需要做的是修改现有的 XML 规范文件`FIX42.xml`，例如运行生成器并构建源代码。

# string - 在 URL 中将十六进制转换为 Ascii（在 Scala 中）

> ID：13567545
> 
> 赞同：1
> 
> 时间：2012-11-26T15:07:02.443
> 
> 标签：string, scala, ascii, hex

我从 WebService 得到了这个字符串“ `&TOKEN=EC%2d1NK66318YB717835M`”，我需要用它来完成我的处理，但问题是我需要转换`%2d`为它的 Ascii 值，即`-`. 所以我的字符串将是结束“ `&TOKEN=EC-1NK66318YB717835M`”

我如何使用 scala 执行此操作？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T15:18:49.747

这种编码称为[URL 编码](http://en.wikipedia.org/wiki/Percent-encoding)。在 Scala 中，您可以只使用 Java 类`java.net.URLDecoder`对其进行解码。

```
val url = "...&TOKEN=EC%2d1NK66318YB717835M..."
val s = java.net.URLDecoder.decode(url, "UTF-8") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T15:18:23.887

你需要的是懂一点java。用于`java.net.URLDecoder`解码您的字符串。 `java.net.URLDecoder.decode("&TOKEN=EC%2d1NK66318YB717835M")`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T15:22:58.540

您可以使用[URLDecoder.decode](http://docs.oracle.com/javase/7/docs/api/java/net/URLDecoder.html#decode%28java.lang.String,%20java.lang.String%29)，如下所示：

```
import java.net.URLDecoder

object Main extends App {
    val s = "&TOKEN=EC%2d1NK66318YB717835M"
    val converted = URLDecoder.decode (s, "UTF-8")
    System.out.println (converted)
} 
```

和它的[小提琴](http://ideone.com/o2bF0o)

# iphone - 谁能告诉我如何在 UITextView 中画线

> ID：13567546
> 
> 赞同：1
> 
> 时间：2012-11-26T15:07:04.293
> 
> 标签：iphone, uitextview, xcode4.3

请任何人都可以告诉我如何在 iPhone 中的笔记应用程序中添加 UITextView 中的行。我遵循了一些教程，但无法理解..我正在寻找一种简单的方法来在 textView 中绘制线条..请帮助我..

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:14:08.997

只需为包含行的 textView 制作背景图像，然后将其设置为 textView。

```
[yourTextView setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"yourImage.png"]]]; 
```

或者也按照这个答案[链接](https://stackoverflow.com/questions/5375350/uitextview-ruled-line-background-but-wrong-line-height/5453189#5453189)

# asp.net-mvc - 验证消息文化

> ID：13567547
> 
> 赞同：1
> 
> 时间：2012-11-26T15:07:08.817
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我正在尝试在 jquery 验证器显示的错误中以葡萄牙语显示消息。我的 web.config 是：

```
<globalization culture="pt-BR" uiCulture="pt-BR" /> 
```

所以为什么我 asp.net mvc 一直显示英文消息，例如：

```
The field Data must be a date. 
```

全球化是否足以让 asp.net mvc 理解我想要葡萄牙语消息？

* * *

更新

我在两台不同的计算机上测试了我的项目，一台可以翻译，另一台不能。那么，我需要在我的服务器中安装一些东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:41:04.577

我只是玩弄了一些，它肯定正确设置了线程文化和线程 UI 文化。我还查看了 MVC 源代码，其中存在默认消息的资源文件 (WebPageResources.resx)。貌似项目中只有英文版的资源文件（其实是在System.Web.WebPages项目中）。我不确定他们是否为 MVC 发布了本地化资源，但这将是最好的起点。

或者，您可以创建自己的资源文件，并在属性中指定它，这对我来说是正确的。虽然渗透整个项目有点冗长。

```
[Required(ErrorMessageResourceType = typeof(MyResourcesClass), ErrorMessageResourceName = "My_Required_Error_Message")] 
```

# java - 使用 Java 和 LDAP 的登录页面

> ID：13567548
> 
> 赞同：3
> 
> 时间：2012-11-26T15:07:09.880
> 
> 标签：java, ldap

我必须在java中做一个登录页面，它必须使用来自LDAP的凭据登录，有没有人有任何教程或示例我可以使用，因为我不知道从哪里开始

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:08:55.997

您应该使用具有许多实用程序和教程的 spring-security。

这是官方文档的链接：http: [//forum.springsource.org/showthread.php?124263 -Basic-LDAP-Example-For-Spring-Security-3-1](http://forum.springsource.org/showthread.php?124263-Basic-LDAP-Example-For-Spring-Security-3-1)

顺便说一句，这是在纯 JNDI 中绑定到 ldap 服务器的代码：

```
/**
 * Returns the ldap context.
 * 
 * @param user the user name
 * @param password the password
 * @return the prepared context
 * @throws NamingException in case of...
 */
protected LdapContext buildContext(final String user, final String password) throws NamingException {
    String providerURL = new StringBuffer(getLdapScheme()) //
            .append("://") //
            .append(getLdapHost()) //
            .append(":") //
            .append(getLdapPort()) //
            .append("/") //
            .append(getLdapRootDN()).toString();

    Hashtable<String, String> properties = new Hashtable<>();
    properties.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");

    properties.put(Context.PROVIDER_URL, providerURL);

    if (!isEmpty(user)) {
        // basic authentication
        properties.put(Context.SECURITY_AUTHENTICATION, "simple");
        properties.put(Context.SECURITY_PRINCIPAL, user);
        properties.put(Context.SECURITY_CREDENTIALS, defaultIfEmpty(password, ""));
    } else {
        // anonymous connection
        properties.put(Context.SECURITY_AUTHENTICATION, "none");
    }

    Control[] controls = null;

    LOGGER.info("creating new ldap context [url:{}, user: {}]", providerURL, user);

    return new InitialLdapContext(properties, controls);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:46:35.513

你应该看看[OpenLdap Java Library](http://www.openldap.org/jldap/overview.html)。他们有各种关于如何使用他们的工具包的代码示例。

# c# - 添加将飞行模式切换到 Windows 8 应用程序的选项

> ID：13567549
> 
> 赞同：0
> 
> 时间：2012-11-26T15:07:10.690
> 
> 标签：c#, windows-8, airplane, charms-bar

我想问一下是否可以在“设置”超级按钮中添加一个选项来切换 Windows 8 应用程序中的飞行模式。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:15:54.997

请参阅我的回答[如何在 Windows 8 中以编程方式检查/切换飞行模式？](https://stackoverflow.com/questions/11671557/how-to-check-switch-the-airplane-mode-programmatically-in-windows-8/11672915#11672915)：

不幸的是，Metro 应用程序没有一种编程方式来更改 Windows 8 中的飞行模式。如果应用程序超出其沙箱并在未经用户许可的情况下修改系统设置，这违反了 Metro 指南（请参阅[http上的讨论://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/1ad10725-b1b8-4723-b2c3-861900809e02](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/1ad10725-b1b8-4723-b2c3-861900809e02)）。

现在，您可以通过使用[Windows.Networking.NetworkOperators 命名空间](http://msdn.microsoft.com/en-us/library/windows/apps/br241148.aspx)中的一些功能来确定状态。具体来说，查看[MobileBroadbandRadioState](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.networkoperators.mobilebroadbandradiostate)和[NetworkDeviceStatus](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.networkoperators.networkdevicestatus.aspx)枚举。

或者，您可以通过解释如何使用 Windows 键 + I、更改 PC 设置、无线、飞行模式访问设置来提示用户进行更改。

# database - 为什么我的存储过程只能在 SSMS 中运行，而不能在 Reporting Services(SSRS) 中运行？

> ID：13567552
> 
> 赞同：1
> 
> 时间：2012-11-26T15:07:19.573
> 
> 标签：database, reporting-services, ssrs-2008, ssms, sql-server-2008

我正在努力将许多存储过程放入 SSRS 中，然后您可以在网站界面上查看它。但是，它给了我一些问题。主要是，它仅在我`exec`手动运行但“报告管理器”网站空白时才有效。

这可能与我从 SPROC 中删除这些行（给我的方向）有关吗？：

```
@DBStatus INT OUTPUT,
..and...
SELECT @DBStatus = @@ERROR 
```

我问的原因是，当我手动运行 SPROC 时，如下所示：

```
exec prc_Report_DataAnalysis 1, '20120818', '20120819', 16226 
```

我只是为@DBStatus 部分输入了“1”。

还是与`GRANT`命令有关？我为含糊而道歉，我在黑暗中有点摸不着头脑..任何提示/指针表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T00:29:58.463

在同事的帮助下，我想通了。问题出在我的 SSRS 设置中（在 MS vis 工作室中）。我在“报告数据”左侧窗格中没有正确的设置。所以，我需要：

双击 DataSets 文件夹，然后双击 Rt。单击“DataSet1”并选择“DataSet proerties”..从这里我得到[这个框](https://i.imgur.com/ILiXp.png)：

![在此处输入图像描述](../Images/21702d912ee9719571ca81ca22a90958.png)

好吧..在我*没有*选择“存储过程”之前，我*应该*选择。原因是，我认为我在开始时使用的向导就足够了。但是，在那里我只输入了一个虚拟 SPROC 来让它运行.. 看起来像这样：

```
exec [dbo].[prc_RPT_Account_Summary]
@AccountID = 1,
@dtStart = '19001010',
@dtEnd = '19001010' 
```

因此，我开始稍微学习 SSRS。谢谢

# android - Android Media Codec 视频解码

> ID：13567556
> 
> 赞同：9
> 
> 时间：2012-11-26T15:07:41.380
> 
> 标签：android, video, media, codec, decoding

这是我的第一个问题，所以如果我错过了什么，请告诉我！

使用 Android API 16 的新媒体编解码器实现尝试解码视频，以便我可以发送要作为纹理应用的帧（纹理部分已经完成）。因此，我在堆栈外提供了一些帮助，但在`runOutputBuffer()`我`outputBufIndex`回来时`-1`（或在我提供的无限循环中作为`-1`超时），任何人都可以帮助解决这个问题，和/或提供关于去哪里的任何建议从那里？

感谢您的帮助，这是我的代码：

```
public MediaDecoder( BPRenderView bpview )
{

    surface = bpview;
    extractor = new MediaExtractor( );
    extractor.setDataSource( filePath );
    format = extractor.getTrackFormat( 0 );
    mime = format.getString( MediaFormat.KEY_MIME );
    createDecoder( );
    runInputBuffer( );

}

public void createDecoder( )
{

    codec = MediaCodec.createDecoderByType( "video/avc" );
    // format =extractor.getTrackFormat( 0 );
    Log.d( LOG_TAG, "Track Format: " + mime );
    // format.setInteger( MediaFormat.KEY_BIT_RATE, 125000 );
    // format.setInteger( MediaFormat.KEY_FRAME_RATE, 15 );
    // format.setInteger( MediaFormat.KEY_COLOR_FORMAT, MediaCodecInfo.CodecCapabilities.COLOR_FormatYUV420Planar );
    // format.setInteger( MediaFormat.KEY_I_FRAME_INTERVAL, 5 );
    codec.configure( format, null, null, 0 );
    codec.start( );

    codecInputBuffers = codec.getInputBuffers( );
    codecOutputBuffers = codec.getOutputBuffers( );
    extractor.selectTrack( 0 );
}

public void runInputBuffer( )
{
    // This should take in the entire video and put it in the input buffer
    int inputBufIndex = codec.dequeueInputBuffer( -1 );
    if( inputBufIndex >= 0 )
    {
        ByteBuffer dstBuf = codecInputBuffers[ inputBufIndex ];

        int sampleSize = extractor.readSampleData( dstBuf, 0 );
        Log.d( "Sample Size", String.valueOf( sampleSize ) );
        long presentationTimeUs = 0;
        if( sampleSize < 0 )
        {
            sawInputEOS = true;
            sampleSize = 0;
        }
        else
        {
            presentationTimeUs = extractor.getSampleTime( );
        }
        Log.d( LOG_TAG, "Input Buffer" );
        Log.d( "InputBufIndex:", String.valueOf( inputBufIndex ) );
        Log.d( "PresentationTimeUS", String.valueOf( presentationTimeUs ) );
        codec.queueInputBuffer( inputBufIndex, 0, // offset
                sampleSize, presentationTimeUs, sawInputEOS ? MediaCodec.BUFFER_FLAG_END_OF_STREAM : 0 );
        if( !sawInputEOS )
        {
            Log.d( "Extractor", " Advancing" );
            extractor.advance( );

        }
    }
    runOutputBuffer( );
}

public void runOutputBuffer( )
{
    BufferInfo info = new BufferInfo( );

    final int res = codec.dequeueOutputBuffer( info, -1 );

    Log.d( "RES: ", String.valueOf( res ) );
    if( res >= 0 )
    {
        int outputBufIndex = res;
        ByteBuffer buf = codecOutputBuffers[ outputBufIndex ];
        final byte[ ] chunk = new byte[ info.size ];
        buf.get( chunk ); // Read the buffer all at once
        buf.clear( ); // ** MUST DO!!! OTHERWISE THE NEXT TIME YOU GET THIS SAME BUFFER BAD THINGS WILL HAPPEN

        if( chunk.length > 0 )
        {
            Log.d( "Chunk: ", String.valueOf( chunk.length ) );

            surface.setTexture( chunk, 320, 240 );

            // mAudioTrack.write( chunk, 0, chunk.length );
            // do the things
        }
        codec.releaseOutputBuffer( outputBufIndex, false /* render */);

        if( ( info.flags & MediaCodec.BUFFER_FLAG_END_OF_STREAM ) != 0 )
        {
            sawOutputEOS = true;
        }
    }
    else if( res == MediaCodec.INFO_OUTPUT_BUFFERS_CHANGED )
    {
        codecOutputBuffers = codec.getOutputBuffers( );
    }
    else if( res == MediaCodec.INFO_OUTPUT_FORMAT_CHANGED )
    {
        final MediaFormat oformat = codec.getOutputFormat( );
        Log.d( LOG_TAG, "Output format has changed to " + oformat );
        // mAudioTrack.setPlaybackRate( oformat.getInteger( MediaFormat.KEY_SAMPLE_RATE ) );
    }

} 
```

}

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T21:10:49.087

詹姆斯，欢迎来到 Stack Overflow（作为提问者）！

我试图玩弄 MediaCodec 类，它非常有限并且记录不充分。但是，请查看 Cedric Fung 的这篇非常[可靠的帖子](http://vec.io/posts/android-hardware-decoding-with-mediacodec)（以及他链接的 github）。他的 github 项目应该可以在 API-17 (JellyBean 4.2)+ 设备上开箱即用。

我确信您可以从那里确定您需要更改的内容，尽管正如我之前提到的，您在 API 的当前级别上的灵活性有限。

关于您的具体问题，我认为您正在使用媒体解码器调用锁定 UI，不建议这样做，您应该采用线程方法，而不是将 -1 设置为超时，超时设置为 10000 并允许它被多次调用，直到它被激活。

希望这会有所帮助（尽管您问这个问题已经有几个月了）！

# jquery - 如何告诉事件处理程序指向动态加载的内容

> ID：13567559
> 
> 赞同：2
> 
> 时间：2012-11-26T15:07:47.133
> 
> 标签：jquery

我正在寻找以下问题的解决方案：

1）我正在加载几个文本行，其中一些包含指向如下脚注的链接：1）。这些行嵌入在 <a> 元素中（见下文）

2）当用户点击这样一行时，相应的脚注文本应该会显示几秒钟

3）在静态上下文中，完成此行为没有问题。但是，我的问题是在 1) 下加载的行因呼叫而异，连接的脚注文本也是如此。因此，我试图找到一种方法将（不同数量的）javascript 事件处理函数动态连接到它们相应的脚注文本。

到目前为止，我已经设法提出以下代码 - 但是它不能按预期工作：

```
function displayData(data) {
  $('#statisticTable').html(data);  // coming from a datapage.php
  for (i = 0; i < 15; i++) {        // max. 15 footnotes per page
    // The lines containing a hint are looking as follows: 
    // <a href="" id="nt1" class="ui-link">Any Title <sup>1)</sup></a>
    $('#nt' + i).click(function() {
      if (!notesAlreadyLoaded) {
        $.get('notes.php', 'some params', processNotes);
        // a footnote looks like this:
        // <div class="reg_footnote" id="note1">Comment on Any Title: ... </div>
        notesAlreadyLoaded = true;
      }
      else
        // Where can I get the number 'note_index' from?
        // Trying to read the 'id' attribute from the <a> element doesn't work?
        $("#note"+note_index).fadeIn(800).delay(3000).fadeOut(800);
    });
  }
  $.mobile.changePage('#data');
}

function processNotes(notes) {
  $('#footnotes').html(notes);
  // where can I get the number 'note_index' from?
  $("#note"+note_index).fadeIn(800).delay(3000).fadeOut(800);
} 
```

显然，事件处理函数是正确创建的，并且它们也会在正确的时刻被调用。但是，我找不到一种方法来告诉他们应该淡入哪个脚注。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:11:48.137

使用事件委托。不要将事件绑定到元素本身，而是绑定到永远不会被删除或替换的祖先元素：

```
<ul id="mylist">
    <li><a href="#" class="foo">Foolink</a></li>
</ul> 
```

在上面的代码中，我们可以直接绑定到锚点：

```
$(".foo").on("click", doSomething); 
```

但正如您所指出的，这不适用于以后可能会放入 DOM 的新链接。因此，我们应该将作业委托给父元素：

```
$("#mylist").on("click", ".foo", doSomething); 
```

现在该事件被绑定到祖先元素，这让我们能够响应应该在其中发生的任何锚点点击。

当点击事件冒泡到`#mylist`元素时，来自与我们的`.foo`选择器匹配的项目，我们的`doSomething`函数将被触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:27:59.263

您要使用的是 .live 功能。

[http://api.jquery.com/live/](http://api.jquery.com/live/)

您无需在每个对象上设置此功能。在你的 displaydata 函数之外，你会想要这样的东西：

```
$(document).ready(function () {
    $(".reg_footnote").live('click', function() {
        //click event code
    });
}); 
```

# iphone - 客户向我发送了他的分发证书和私钥，以便我可以推送到 Appstore，但他们不与自己关联

> ID：13567562
> 
> 赞同：0
> 
> 时间：2012-11-26T15:07:54.100
> 
> 标签：iphone, objective-c, ios, xcode, certificate

整个上午都在为此烦恼，我们有一个客户拥有自己的分销凭证。我在他的配置门户中下载了与 appID 关联的 AppStore 配置文件，并从那里下载了他的分发证书。

由于在我拥有有效的证书/私钥对之前我无法签名，所以我要求他导出他的，以便我可以将其导入我的钥匙串。但是，当我导入生成的 p12 时，它并没有将自己与证书关联，而是继续并创建了一个新的自签名根证书以及与之关联的私钥。

困惑，我试图导出我自己未使用的私钥之一，删除它并导入它，它正确地进入了相关证书（推送通知证书）。所以我问他是否导出了正确的私钥。他向我保证他做到了，甚至继续为我导出证书和密钥。

他颁发给我的证书是我在他的门户中下载的证书，但是 p12 仍然没有与证书关联！我不知道我做错了什么......有人对此有线索/线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:07:01.313

让他们按照此处的说明进行操作：http:
[//developer.apple.com/library/ios/#recipes/xcode_help-devices_organizer/articles/export_signing_assets.html](http://developer.apple.com/library/ios/#recipes/xcode_help-devices_organizer/articles/export_signing_assets.html)

*   在“设备”组织器的“团队”部分中选择您的团队。
*   单击导出。
*   指定文件名和密码，然后单击保存。

自己，请按照此处的说明进行操作：http:
[//developer.apple.com/library/ios/#recipes/xcode_help-devices_organizer/articles/import_signing_assets.html#//apple_ref/doc/uid/TP40010392-CH9-SW1](http://developer.apple.com/library/ios/#recipes/xcode_help-devices_organizer/articles/import_signing_assets.html#//apple_ref/doc/uid/TP40010392-CH9-SW1)

*   在“设备”组织器的“团队”部分中选择您的团队。
*   单击导入。
*   选择包含您的代码签名资产的文件。
*   输入文件的密码，然后单击打开。

现在，无论如何，这就是*理论。*执行此操作时，iOS 中会在导入文件时出错。我自己遇到了这个。显然它自 2009 年以来就被破坏了。解决方案是从命令行手动导入。您需要之前从客户端导出的 .p12 和 .pem 文件。

要导出 .p12（私钥）和 .pem（公钥）：

*   打开钥匙串访问
*   选择“登录”钥匙串（或任何合适的）
*   选择底部的“Keys”类别
*   选择私钥“iOS Developer: name here”（或者在分发配置文件的情况下，以分发证书上出现的名称为准）
*   右键单击并选择导出（这是您的 .p12 文件）
*   选择公钥“iOS Developer: name here”（或者在分发配置文件的情况下，以分发证书上出现的名称为准）
*   右键单击并选择导出（这是您的 .pem 文件）

然后您需要手动将它们导入您的钥匙串：
[http ://www.arlt.eu/blog/2009/12/01/importing-iphone-keys-p12-and-pem-into-snow-leopards-keychain/](http://www.arlt.eu/blog/2009/12/01/importing-iphone-keys-p12-and-pem-into-snow-leopards-keychain/)

```
security import priv_key.p12 -k ~/Library/Keychains/login.keychain
security import pub_key.pem -k ~/Library/Keychains/login.keychain 
```

完成后，您将拥有使用他们的分发证书签署应用程序所需的一切（您可以从开发者中心下载）

# linux - 运行 Puppet 代理时出现“无法分配内存”

> ID：13567568
> 
> 赞同：2
> 
> 时间：2012-11-26T15:08:08.493
> 
> 标签：linux, automation, puppet

运行“puppet agent -t”时出现以下错误：

```
Cannot allocate memory - /bin/uname -s
...
Cannot allocate memory - /sbin/arp -an
...
Cannot allocate memory - /bin/uname -s
...
Could not retrieve kernelversion: private method `split' called for nil:NilClass
Could not retrieve kernelmajversion: private method `split' called for nil:NilClass
... 
```

完整的错误在这里： http: [//pastebin.com/fhjqrgBn](http://pastebin.com/fhjqrgBn)

当我`/bin/uname -s`手动运行命令时，我得到的结果没有任何错误。

免费命令显示了这一点：

```
 total       used       free     shared    buffers     cached
Mem:        609600     160688     448912          0       5716      35432
-/+ buffers/cache:     119540     490060
Swap:            0          0          0 
```

傀儡虫？你怎么看 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-21T16:33:21.460

听起来您的系统内存不足。使用 free 检查您的内存使用情况，-m 以 MB 为单位显示值：

```
$ free -m
             total       used       free     shared    buffers     cached
Mem:           590        412        177          0         22        314
-/+ buffers/cache:         75        514
Swap:            0          0          0 
```

在 puppet 代理运行时，您可以在不同的 shell 中使用 free 检查内存使用情况，或者使用其他实用程序，如 top 或 dstat。

尝试查看您的服务状态，确保没有运行您不需要的服务：

```
service --status-all 
```

# jquery-selectors - jquery：在偶数tr中更改表格行背景颜色

> ID：13567579
> 
> 赞同：0
> 
> 时间：2012-11-26T15:08:38.040
> 
> 标签：jquery-selectors

我在 php 文件中有以下代码（部分）：

```
<script type="text/javascript">
$(document).ready(function() {
    $(".MyYable tr:even").addClass("alt");
    jQuery("table tr").click(function(){
       var row = jQuery(this);
       var hasClass = row.hasClass("highlight");
       jQuery("table tr").removeClass("highlight");
       if(!hasClass){
         row.addClass("highlight");
       }
    });
    });
</script>

<style type="text/css">

.highlight{
background-color:#00FF00;
}
tr.alt td {
background:#CCCCCC;
}
tr.over td {
background-color:#00FF00;   
}
</style>

        <table id="Tabela_lista_empresas" width="751">
          <thead>
          <tr>
            <th width="300"><strong>Descrição</strong></th>
            <th width="100" align="center"><strong>Qtd</strong></th>
            <th width="100" align="center"><strong>Refª cliente</strong></th>
          </tr>
          </thead>

          <?php do {?>

          <tr <?php echo $i++ % 2 ? 'class="odd"' : ''; ?> onClick="get(<?php echo $row_rs_listaequipamentos['id_equipamento']; ?>, this)">
            <td width="300"><?php echo $row_rs_listaequipamentos['descricao_curta']; ?></td>
            <td width="100" align="center"><?php echo $row_rs_listaequipamentos['quantidade']; ?> <?php echo $row_rs_listaequipamentos['unidades']; ?></td>
            <td width="100" align="center"><?php echo $row_rs_listaequipamentos['referenciacliente']; ?></td>
          </tr>
          <?php } while ($row_rs_listaequipamentos = mysql_fetch_assoc($rs_listaequipamentos)); ?>
        </table> 
```

就我而言，当我单击奇数行时，它会将类更改为“突出显示”，但如果我单击偶数行，则不会发生任何事情。任何帮助表示赞赏。注意：我正在尝试“自学”，所以我不是编程专家。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:10:16.940

为什么不使用 css`:hover`选择器？

```
tr.over td {
background-color:#00FF00;   
}
tr.over td:hover {
background-color:#FFFF00;   
} 
```

# jquery - 将鼠标悬停在元素上时防止下拉列表折叠

> ID：13567588
> 
> 赞同：2
> 
> 时间：2012-11-26T15:09:09.033
> 
> 标签：jquery, html, css, menu, submenu

这个问题不是很清楚，因为我不知道如何正确地问它。

看看这个[JSFiddle](http://jsfiddle.net/Vyd3a/1/)。

当您将鼠标悬停在“关于我们”上时，会显示一个带有绿色小指针的下拉菜单。当鼠标移过该指针时，菜单会折叠。

我想知道，是否可以防止该指针折叠菜单。

我已经尝试将带有指针的 div 放在`<li>`标签中，但是 jQuery 变得很棘手。

还有什么我可以尝试的可能有用的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T15:24:16.363

我会使用指针的边框来解决它，并将它与悬停元素的伪类一起放置。

这将适用于 IE7 及更高版本。

```
.menu > ul > li:hover > a:before {
    content: '';
    display:block;
    position: absolute;
    width: 0;
    height: 0;
    border-color: transparent;
    border-style: solid;
    bottom: -7px;
    left: 10px;
    margin-left: -5px;
    border-top-color: #445921;
    border-width: 7px 7px 0px 7px;
    z-index:9;
} 
```

小提琴：http: [//jsfiddle.net/mx877/](http://jsfiddle.net/mx877/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T15:23:48.680

您的指针不在`.menu > ul > li`您尝试使用悬停功能选择的元素中：

```
 $(document).ready(function(e) {
    $('.menu > ul > li').hover(function(e) { 
```

你可以：

1.  将 .pointer div 替换为 .pointer 中的背景图像`.menu > ul > li`。
2.  您可以将 .pointer div 移动到相应的`.menu > ul > li`元素中：

    ```
    $('.pointer').appendTo($(this)); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T15:34:54.217

发生这种情况是因为当您将鼠标悬停在旋转的小方块上时，光标实际上从菜单中失去了焦点。展开顶层元素的填充以包含正方形，它工作正常。

```
 <li style="padding-bottom:10px;"><a href="index.html">ABOUT US</a>
            <ul> 
```

[http://jsfiddle.net/calder12/Vyd3a/3/](http://jsfiddle.net/calder12/Vyd3a/3/)

# java - 如何在 Mac OS X 上获取 jdk 源代码

> ID：13567590
> 
> 赞同：0
> 
> 时间：2012-11-26T15:09:14.943
> 
> 标签：java, macos

似乎 Mac OS 在任何地方都没有附带 Java 源代码。我正在运行 OS X 10.8.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:15:00.573

您需要在[https://developer.apple.com](https://developer.apple.com)上下载 javadeveloper_for_os_x 。它是一个dmg安装文件，只需单击几下即可安装，然后您将在/Library/Java/JavaVirtualMachines/1.6.0_XX.jdk/Contents/Home/中找到src

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T15:15:39.147

OpenJDK 源代码可以在以下位置找到：

[http://download.java.net/openjdk/jdk7/](http://download.java.net/openjdk/jdk7/)

# c# - 在 Visual Studio 中自动将区域添加到代码中

> ID：13567594
> 
> 赞同：12
> 
> 时间：2012-11-26T15:09:28.487
> 
> 标签：c#, visual-studio-2010, region, visual-studio-macros

我的团队绝对喜欢使用区域，考虑到这一点，它几乎已成为我们代码中的事实标准。我最近意识到，每次创建类、测试方法等时，我都厌倦了编写或 ctrl+c / ctrl+v'ing 这些...

我想知道是否有可能（通过宏或其他一些功能）让 Visual Studio 自动将这些添加到您的代码中。

例如，如果我在我的项目中添加一个新的类文件，你可以执行某种魔法让 Visual Studio 将文件生成为：

```
namespace Test
{
    class MyClass
    {
        #region ------------ members --------------
        #endregion

        #region ------------ properties --------------
        #endregion

        #region ------------ methods --------------
        #endregion
    }
} 
```

我真正对目前不知道如何做到这一点感到恼火的地方是我编写单元测试的时候。这可能有点棘手，但我试图找到一种方法来自动添加`--set up--`和`--run test--`区域来测试方法，因为我们的团队坚持使用它们。

所以，当我去创建一个新的测试方法时

```
[TestMethod]
public void WhenCondition_WillProduceExpectedResult()
{
} 
```

Visual Studio 会自动将这两个区域添加到方法中，例如：

```
[TestMethod]
public void WhenCondition_WillProduceExpectedResult()
{
   #region ------------- set up -------------
   #endregion 

   #region ------------- run test -------------
   #endregion 
} 
```

不确定这是否可以完成，如果可以，是否可以通过 vs-macro 或扩展。任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-26T15:40:06.200

您可以创建一个简单的代码片段，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<CodeSnippets
    xmlns="http://schemas.microsoft.com/VisualStudio/2005/CodeSnippet">
  <CodeSnippet Format="1.0.0">
    <Header>
      <Title>Simple</Title>
      <Shortcut>simple</Shortcut>
      <SnippetTypes>
        <SnippetType>Expansion</SnippetType>
      </SnippetTypes>
    </Header>
    <Snippet>
      <Declarations>
        <Literal>
          <ID>name</ID>
          <ToolTip>Replace with the name of the action</ToolTip>
          <Default>Action</Default>
        </Literal>
      </Declarations>
      <Code Language="csharp">
        <![CDATA[
        public void $name$()
        {
            #region ------------- set up -------------
            #endregion 

            #region ------------- run test -------------
            #endregion 
        }
        ]]>
      </Code>
    </Snippet>
  </CodeSnippet>
</CodeSnippets> 
```

将该文件保存到`C:\Users\<your_user>\Documents\Visual Studio 2010\Code Snippets\Visual C#\My Code Snippets`.

现在你只需要重新打开 Visual Studio，在一个类中输入“simple”，然后按两次 Tab 键。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T15:22:26.117

我知道的两种方法：

根据此[MSDN 指南](http://msdn.microsoft.com/en-us/library/ms165394.aspx)创建一个片段。

下载具有“环绕声”功能的 Visual Studio Extension [Productivity Power Tools 。](http://visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef)这围绕着用户使用所选片段进行的选择，例如`#region #endregion`或 if 语句。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-26T21:07:22.313

不知道为什么这么多人反对地区；他们帮助我很容易地对我的代码进行分类。我使用的是放置在我的一个键盘按钮上的宏，它会自动为我插入区域。我可以给你的一个提示是，如果可能的话，在每次按键之间放一点延迟，因为 VS 有时会错过字符。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-05T13:45:48.877

使用以下代码段

```
<?xml version="1.0" encoding="utf-8" ?>
<CodeSnippets  xmlns="http://schemas.microsoft.com/VisualStudio/2005/CodeSnippet">
  <CodeSnippet Format="1.0.0">
    <Header>
      <Title>#Classregion</Title>
      <Shortcut>#Classregion</Shortcut>
      <Description>Code snippet for #Classregion</Description>
      <Author>Author Name</Author>
      <SnippetTypes>
        <SnippetType>Expansion</SnippetType>
        <SnippetType>SurroundsWith</SnippetType>
      </SnippetTypes>
    </Header>
    <Snippet>
      <Declarations>
        <Literal>
          <ID>name</ID>
          <ToolTip>Region name</ToolTip>
          <Default>MyRegion</Default>
        </Literal>
      </Declarations>
      <Code Language="csharp">
        <![CDATA[
        #region ------------- Members ---------------
        $selected$ $end$
    #endregion

  #region --------------- Properties ---------------
        $selected$ $end$
    #endregion

  #region --------------- Methods ---------------
        $selected$ $end$
    #endregion
    ]]>
      </Code>
    </Snippet>
  </CodeSnippet>
</CodeSnippets> 
```

将其保存在 C:\Users\\Documents\Visual Studio 2010\Code Snippets\Visual C#\My Code Snippets 下

稍后它将可以在 C# 代码中访问，方法是右键单击 > 插入片段 > 我的代码片段 > #Classregion

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-05-29T14:46:52.127

如果你有 Resharper，那么 File Structure 窗口对于管理区域非常方便，允许简单的拖放来移动方法/属性块等。它显示您的区域（可折叠）并与主代码视图同步：

[https://www.jetbrains.com/help/resharper/Reference__Windows__File_Structure_Window.html](https://www.jetbrains.com/help/resharper/Reference__Windows__File_Structure_Window.html)

例如此处显示的称为**预览**的区域：

![这里](../Images/7acbc3fa467776f0b49a2189773f7a45.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-11-01T13:40:56.983

我更喜欢按照 Sam Harwell 的回答中的描述编辑类模板：

[https://stackoverflow.com/a/2072717](https://stackoverflow.com/a/2072717)

您可以在 Visual Studio 版本的类模板位置打开 class.cs 文件。例如，Visual Studio 2017 Enterprise 的位置是：

> C:\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise\Common7\IDE\ItemTemplates\CSharp\Code\1033\Class\Class.cs

我使用文本编辑器打开该文件并向其中添加区域。然后将使用区域创建所有新类。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-26T15:23:20.717

我同意区域 a 是一个坏主意，但对每个人来说都是他自己的。

您可能想看看[NArrange](http://www.narrange.net/)。

# bash - Bash 脚本 mv 并使用日志恢复到原始位置

> ID：13567599
> 
> 赞同：0
> 
> 时间：2012-11-26T15:09:55.350
> 
> 标签：bash

我对 bash 脚本很陌生，所以这可能是个很愚蠢的问题，但它就在这里。想法如下：将文件的基本名称保存*在*日志中->移动文件->使用日志移回原始位置。

```
basename $filename >> /directory/log
mv $filename /directory 
```

到目前为止一切顺利，但我对如何使用该日志文件取回文件感到很困惑。*basename*甚至是正确的使用方法吗？我的想法是使用*grep*在日志中查找文件名，但是如何在*mv*末尾获取该输出？

```
mv $filename ??? 
```

我在正确的轨道上吗？搞砸了一些非常基本的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:23:16.323

如果您需要从文件中获取字符串并在某些命令中使用它，那么`grep`就可以了

```
mv $filename `grep <your-grep-pattern> <you-logfile>` 
```

如果日志文件包含匹配的正确数据，这将执行适当的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:23:16.533

像这样的东西？

```
#set a variable saving the filename but not path of a file. 
MY_FILENAME=$(basename $filename)
echo $MY_FILENAME >> /directory/log
mv $MY_FILENAME /diectroy/.

# DO STUFF HERE
# to your file here 

#Move the file to the PWD. 
mv /directory/${MY_FILENAME} .
unset $MY_FILENAME 
      #unseting variable when you are done with them, while not always 
      #not always necessary, i think is a good practice. 
```

相反，如果要将文件移回 orgianl 位置而不是 PWD，则第二个 mv 语句将如下所示。

```
mv /directory/${MY_FILENAME} $filename 
```

此外，如果由于某些范围问题，当您向后移动时您没有可用的本地 var，并且确实需要从文件中读取它，您应该这样做：

```
 #set a variable saving the filename but not path of a file. 
MY_FILENAME=$(basename $filename)
echo "MY_FILENAME = " $MY_FILENAME >> /directory/log
# I'm tagging my var with some useful title so it is easier to grep for it later
mv $MY_FILENAME /diectroy/.

# DO STUFF HERE
# to your file here 

#Ive somehow forgotten my local var and need to get it back.
MY_FILENAME=$(cat /directory/log | grep "^MY_FILENAME = .*" | awk '{print $3}');
#inside the $() a cat the file to read it
# grep on "^MY_FILENAME = .*" to get the line that starts with the header i gave my filename
# and awk to give me the third token ( I always use awk over cut out of preference, cut would work also. 
# This assumes you only write ONE filename to the log, 
# writing more makes things more complicated

mv /directory/${MY_FILENAME} $filename
unset $MY_FILENAME 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T15:23:51.160

让我们以文件`httpd.conf`为例，它的位置在目录中`/etc/httpd/conf/`

```
$ ls /etc/httpd/conf/httpd.conf
/etc/httpd/conf/httpd.conf 
```

该命令`basename`去除文件的路径，只返回文件名*（和扩展名）*。

```
$ basename /etc/httpd/conf/httpd.conf
httpd.conf 
```

所以当你这样做时：

```
basename $filename >> /directory/log 
```

您正在创建一个仅包含文件名的日志文件，您将无法使用`/directory/log`该文件将文件移回其原始位置，因为您使用该`basename`命令剥离了该信息。

你会想做这样的事情：

```
echo $filename >> /directory/log
mv $filename /directory 
```

所以现在`/directory`是文件的新位置并`/directory/log`包含文件的原始位置。

# jquery - 如何在 Ipad 上流畅地进行一页导航？

> ID：13567601
> 
> 赞同：0
> 
> 时间：2012-11-26T15:10:01.650
> 
> 标签：jquery, html, css

一页导航网站是一种趋势，我想做一个但是我总是遇到ipad的问题。网页在我的 macbook 上通常可以流畅地滚动，但在 ipad 上就很糟糕，即使只有一些图片和 css。这是一个示例，[http://jsfiddle.net/fatdogmark/YxH8r/](http://jsfiddle.net/fatdogmark/YxH8r/)，在 ipad 上移动时非常不稳定。我认为 Ipad 4 已经是所有平板电脑中性能最高的了，但性能仍然很糟糕。是不是Ipad不适合一页导航网站？我希望我能在这里得到一些建议。是否有任何技巧或技术可以提高 ipad 的性能？喜欢不要使用`overflow`，不要嵌入很多css或js`<script src=''></script>`全部在标题中（这是我通常做的），将它们放在 html 内联或将它们全部放在同一个文件中？还是使用一些类似 translate3D(0,0,0) 的代码？或者避免使用过渡、jquery 动画或缓动？还是有性能更好的导航插件？

此外，我意外地发现在 Ipad 上缩放实际上会被激活`$(window).resize(function(){//});`......所以我禁用了我的脚本上的所有 window.resize 以节省性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:15:27.900

您应该使用它
`$btn1.style.webkitTransform = "translate3d(0px, " + anchor1_pos + "px, 0px)";` ，它比任何其他转换都要好得多。

显然你也必须设置它`webkitTransition`，例如`"all ease-in-out 2s"`

另外，根据我的经验，你应该确保你的 DOM 不会增长太多。如果您打算拥有大量内容，则应考虑使用`"display: none"`. 但是由于您只想滚动一页，这让我认为您的信息量有限，我认为您应该没问题。这在 iPad1 和 2 上对我有用；）

# jquery - jquery悬停显示菜单问题

> ID：13567603
> 
> 赞同：1
> 
> 时间：2012-11-26T15:10:09.070
> 
> 标签：jquery

我正在尝试添加悬停效果来显示/隐藏下拉菜单。问题是当我将鼠标悬停在菜单显示但又消失的链接上时。

```
$(".hoverli").hover(
  function () {
     $('ul.file_menu').slideDown('medium');
  }, 
  function () {
     $('ul.file_menu').slideUp('medium');
  }
); 
```

请在此处查看演示：[fiddle](http://jsfiddle.net/4jxph/912/)。

你能告诉我我在代码中缺少什么吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T15:11:52.553

原因是，当你在上面时，`.file_menu`它就不再存在了`hover`。所以，一个小的改变就可以解决。

```
$(document).ready(function () {
    $("#button").hover(
  function () {
     $('ul.file_menu').slideDown('medium');
  }, 
  function () {
     $('ul.file_menu').slideUp('medium');
  }
);

});​ 
```

### 小提琴：http: [//jsfiddle.net/4jxph/915/](http://jsfiddle.net/4jxph/915/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T15:28:36.773

试试这个：

```
 $(".hoverli").hover(function () {
      $('ul.file_menu').slideDown('medium');
  });
  $('ul.file_menu').bind('mouseleave', function(){
     $('ul.file_menu').slideUp('medium'); 
  }); 
```

[jsfiddle](http://jsfiddle.net/4jxph/929/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T15:15:35.417

发生这种情况是因为 ul 不在您的锚标记内，所以当您悬停 ul 时，您实际上是在触发锚的“out”事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T15:17:41.360

这是我的做法：

```
$(document).ready(function() {
    var tim;
    $(".hoverli, .file_menu").on({
        mouseenter: function() {
            clearTimeout(tim);
            $('ul.file_menu').slideDown('medium');
        },
        mouseleave: function() {
            tim = setTimeout(function() {
                $('ul.file_menu').slideUp('medium');
            }, 300);
        }
    });
});​ 
```

[**小提琴**](http://jsfiddle.net/4jxph/928/)

# knockout.js - knockoutjs ko.toJs (ko.toJSON) 不起作用

> ID：13567604
> 
> 赞同：1
> 
> 时间：2012-11-26T15:10:11.323
> 
> 标签：knockout.js

我正在使用 knockoutjs 版本 2.2.0 并遇到以下情况：
**Javasript 代码**
这是我的 javascript 代码，其中包含 3 个模型：“Tab1”、“Tab2”和“viewModel”

```
var CustomExport = {
    Tab1: function () {
        this.tab1Array = ko.observableArray([
            {name: "Tab1 Item1"},
            {name: "Tab1 Item2"},
            {name: "Tab1 Item3"}
        ]);
    },
    Tab2: function () {
        this.tab2Array = ko.observableArray([
            {name: "Tab2 Item1"},
            {name: "Tab2 Item2"},
            {name: "Tab2 Item3"}
        ]);
    },
    viewModel: function () {
        this.myTab1 = new CustomExport.Tab1();
        this.myTab2 = new CustomExport.Tab2();
        this.grabData = function(){
            alert(ko.toJS(CustomExport.viewModel));
        };
    }    
}

ko.applyBindings(new CustomExport.viewModel()); 
```

所以，一般来说，我有 2 个模型，我想将这些模型中的所有数据作为 json 对象抓取到一个“viewModel”模型中，*grabData*函数应该提醒我模型数据。

这是我的**HTML 代码**

```
<div data-bind="with: myTab1">
    <ul data-bind="template: {name: 'tabTmpl', foreach: tab1Array}"></ul>
</div>
<br/>
<div>------------------------------------------</div>
<br/>
<div data-bind="with: myTab2">
    <ul data-bind="template: {name: 'tabTmpl', foreach: tab2Array}"></ul>
</div>
<br/>
<input type="button" data-bind="click: grabData" value="Grab all data from Models" />

<script id="tabTmpl" type="text/html">
    <li>
        <div data-bind="text: name"></div>
    </li>
</script> 
```

问题如下：
单击“ `Grab all data from the models`”按钮我应该得到一个警报，其中必须包含来自 2 个模型（“Tab1”、“Tab2”）的数据作为**json 对象**，但目前我收到以下警报消息：

```
function () {
    this.myTab1 = new CustomExport.Tab1();
    this.myTab2 = new CustomExport.Tab2();
    this.grabData = function(){
        alert(ko.toJS(CustomExport.viewModel));
    };
} 
```

另外，我在我的 jsFiddle 中创建了它[点击这里查看示例](http://jsfiddle.net/pkysylevych/4qKhE/)

知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T15:19:14.600

您应该使用`this`而不是`CustomExport.viewModel`：

```
this.grabData = function(){
    console.log(ko.toJS(this));
}; 
```

但最好为以下创建闭包`this`：

```
function () {
    var self = this;
    self.myTab1 = new CustomExport.Tab1();
    self.myTab2 = new CustomExport.Tab2();
    self.grabData = function(){
        alert(ko.toJS(self));
    };
} 
```

# delphi - Delphi XE3，如何设置 MSXML MaxElementDepth 以允许读取深度 XML 文档

> ID：13567607
> 
> 赞同：2
> 
> 时间：2012-11-26T15:10:14.583
> 
> 标签：delphi, msxml

我有一个 SVG 文件，由于某种原因，它有超过 256 个深度嵌套元素，这会阻止 Delphi 加载 SVG 文件，因为它违反了 MSXML 的 MaxElementDepth 约束（默认为 256）。

有谁知道从正在运行的程序中将 MSXML 中的 MaxElementDepth 值设置得更高以便我可以读取 SVG 文件的方法？

我尝试了替代 CoDOMDocument40，它有一个方法 (setProperty) 用于设置属性，但是当我尝试设置 MaxElementDepth 时它报告无效的属性名称。

我能想到的其他替代方法是运行命令行工具来展平层次结构，但我宁愿不这样做......

非常感谢您的帮助:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T16:25:54.863

看来您应该使用`CoDOMDocument60`而不是`CoDOMDocument40`：

[MaxElementDepth 属性](http://msdn.microsoft.com/en-us/library/windows/desktop/ms762248%28v=vs.85%29.aspx)

> MSXML 3.0 和 6.0 支持此属性。3.0 的默认值为 0。6.0 的默认值为 256。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T21:46:52.210

在XE2中，实现一个自定义函数，赋值给单元`MSXMLDOMDocumentCreate`中的全局变量`Xml.Win.msxmldom`：

```
uses
  ..., Xml.Win.msxmldom;

function MyCreateDOMDocument: IXMLDOMDocument;
begin
  Result := CreateDOMDocument;
  //...
end;

initialization
  MSXMLDOMDocumentCreate := MyCreateDOMDocument; 
```

在 XE3 中，从虚拟方法派生一个新类`TMSXMLDOMDocumentFactory`并覆盖其虚拟`CreateDOMDocument()`方法，然后将您的自定义类分配给单元中的全局`TMSXMLDOMDocumentFactoryClass`变量`Xml.Win.msxmldom`：

```
uses
  ..., Xml.Win.msxmldom;

type
  MyFactory = class(TMSXMLDOMDocumentFactory)
  public
    class function CreateDOMDocument: IXMLDOMDocument; override;
  end;

class function MyFactory.CreateDOMDocument: IXMLDOMDocument;
begin
  Result := inherited CreateDOMDocument;
  //...
end;

initialization
  TMSXMLDOMDocumentFactoryClass := MyFactory; 
```

无论哪种情况，一旦您有权访问`IXMLDOMDocument`，您就可以根据需要自定义其属性和设置。

# android - 在Android中将密钥库文件放在哪里？

> ID：13567611
> 
> 赞同：2
> 
> 时间：2012-11-26T15:10:24.827
> 
> 标签：android, ssl, keystore, android-keystore

我目前正在从事一个涉及 ssl 通信的项目。所以，我想将我的 bks 文件复制到设备的*内存*中，然后再访问它。我正在使用特定的库进行通信，我必须提供 bks 文件的完整路径作为该库的参数。我应该把这个 bks 文件放在哪里？进入 raw 或 assets 文件夹或其他地方？我可以从哪个 uri 访问这个文件？（在 Windows 中，我给它 C:\keys\blah.bks，所以我必须给它一个类似的 uri，如 /data/data/com.example.exampleapplication/my_app/blah.bks 或类似的东西。）这是怎么回事在Android系统中实现？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:13:59.987

将其存储在`assets`您的应用程序的文件夹中。

但考虑加密它并让你的程序解密它，因为资产文件夹中的文件是用户可以访问的

# magento - Magento，替换自定义主题产品视图上的块

> ID：13567614
> 
> 赞同：0
> 
> 时间：2012-11-26T15:10:37.110
> 
> 标签：magento, layout, themes, block, magento-1.7

我们有来自第三个提供商的自定义主题。提供者留下了一些空白，可以添加更多信息。我已经建立了一个自定义布局，它读取需要的块并绘制我需要的任何东西，但只在`content`或`head`参考块上。我找不到需要引用的块来添加所需的信息。我想它应该在`catalog_product_view`组内。我怎样才能找到它？我在[这里](https://stackoverflow.com/q/5759010/1297603)和[这里](https://stackoverflow.com/q/6043387/1297603)在 StackOverflow 上找到了一些有用的信息，但无法得到正确的答案。

这是我现在所拥有的：

我的布局文件*banners.xml*：

```
<?xml version="1.0" encoding="UTF-8"?>
<layout version="0.1.0">
    <catalog_product_view>
        <reference name="content">
            <block type="banners/front" name="banners.front" as="banners_front"
                   template="banners/product.phtml" before="-"/>
        </reference>
    </catalog_product_view>
</layout> 
```

我的*product.phtml*文件：

```
<div>
    <h3>Hello...</h3>
    <p>This is my custom block</p>
</div> 
```

这是在第 3 部分主题`catalog_product_view`的布局文件*catalog.xml中找到的组：*

```
<catalog_product_view translate="label">
        <label>Catalog Product View (Any)</label>
        <!-- Mage_Catalog -->
        <reference name="root">
            <action method="setTemplate"><template>page/1column.phtml</template></action>
        </reference>
        <reference name="head">
            <action method="addJs"><script>varien/product.js</script></action>
            <action method="addJs"><script>varien/configurable.js</script></action>

            <action method="addItem"><type>js_css</type><name>calendar/calendar-win2k-1.css</name><params/><!--<if/><condition>can_load_calendar_js</condition>--></action>
            <action method="addCss"><stylesheet>css/jquery.lightbox-0.5.css</stylesheet></action>
            <action method="addCss"><stylesheet>css/slider.css</stylesheet></action>
            <action method="addItem"><type>js</type><name>calendar/calendar.js</name><!--<params/><if/><condition>can_load_calendar_js</condition>--></action>
            <action method="addItem"><type>js</type><name>calendar/calendar-setup.js</name><!--<params/><if/><condition>can_load_calendar_js</condition>--></action>
            <action method="addItem"><type>js</type><name>lightbox/jquery.lightbox-0.5.min.js</name></action>
            <action method="addJs"><script>slideshow/jquery.slider.js</script></action>
        </reference>
        <reference name="content">
            <block type="catalog/product_view" name="product.info" template="catalog/product/view.phtml">
                <!--
                <action method="addReviewSummaryTemplate"><type>default</type><template>review/helper/summary.phtml</template></action>
                <action method="addReviewSummaryTemplate"><type>short</type><template>review/helper/summary_short.phtml</template></action>
                <action method="addReviewSummaryTemplate"><type>...</type><template>...</template></action>
                -->
                <block type="catalog/product_view_media" name="product.info.media" as="media" template="catalog/product/view/media.phtml"/>
                <block type="core/text_list" name="alert.urls" as="alert_urls" translate="label">
                    <label>Alert Urls</label>
                </block>

                <action method="setTierPriceTemplate"><template>catalog/product/view/tierprices.phtml</template></action>

                <block type="catalog/product_view_tabs" name="product.info.tabs" as="info_tabs" template="catalog/product/view/tabs.phtml" >
                    <action method="addTab" translate="title" module="catalog"><alias>description</alias><title>Product Description</title><block>catalog/product_view_description</block><template>catalog/product/view/description.phtml</template></action>
                    <action method="addTab" translate="title" module="catalog"><alias>additional</alias><title>Additional Information</title><block>catalog/product_view_attributes</block><template>catalog/product/view/attributes.phtml</template></action>
                    <action method="addTab" translate="title" module="review"><alias>product_review</alias><title>Reviews</title><block>review/product_view_list</block><template>review/product/view/list.phtml</template></action>                
                    <block type="cms/block" name="product_custom_tab">
                        <action method="setBlockId"><block_id>product_custom_tab</block_id></action>
                    </block>                
                </block>
                <block type="catalog/product_view_additional" name="product.info.additional" as="product_additional_data" />
                <block type="catalog/product_view" name="product.info.addto" as="addto" template="catalog/product/view/addto.phtml"/>
                <block type="catalog/product_view" name="product.info.addtocart" as="addtocart" template="catalog/product/view/addtocart.phtml"/>

                <block type="core/text_list" name="product.info.extrahint" as="extrahint" translate="label">
                    <label>Product View Extra Hint</label>
                </block>   
                <block type="catalog/product_list_related" name="related_products" as="related_products" translate="label" template="catalog/product/list/related.phtml">
                    <label>Related Products</label>
                </block>                

                <block type="catalog/product_view" name="product.info.options.wrapper" as="product_options_wrapper" template="catalog/product/view/options/wrapper.phtml" translate="label">
                    <label>Info Column Options Wrapper</label>
                    <block type="core/template" name="options_js" template="catalog/product/view/options/js.phtml"/>
                    <block type="catalog/product_view_options" name="product.info.options" as="product_options" template="catalog/product/view/options.phtml">
                        <action method="addOptionRenderer"><type>text</type><block>catalog/product_view_options_type_text</block><template>catalog/product/view/options/type/text.phtml</template></action>
                        <action method="addOptionRenderer"><type>file</type><block>catalog/product_view_options_type_file</block><template>catalog/product/view/options/type/file.phtml</template></action>
                        <action method="addOptionRenderer"><type>select</type><block>catalog/product_view_options_type_select</block><template>catalog/product/view/options/type/select.phtml</template></action>
                        <action method="addOptionRenderer"><type>date</type><block>catalog/product_view_options_type_date</block><template>catalog/product/view/options/type/date.phtml</template></action>
                    </block>
                    <block type="core/html_calendar" name="html_calendar" as="html_calendar" template="page/js/calendar.phtml"/>
                </block>
                <block type="catalog/product_view" name="product.info.options.wrapper.bottom" as="product_options_wrapper_bottom" template="catalog/product/view/options/wrapper/bottom.phtml" translate="label">
                    <label>Bottom Block Options Wrapper</label>
                    <action method="insert"><block>product.tierprices</block></action>
                    <block type="catalog/product_view" name="product.clone_prices" as="prices" template="catalog/product/view/price_clone.phtml"/>
                    <action method="append"><block>product.info.addtocart</block></action>
                    <action method="append"><block>product.info.addto</block></action>
                </block>

                <block type="catalog/product_view" name="product.info.options.wrapper.bottom2" as="product_options_wrapper_bottom2" template="catalog/product/view/options/wrapper/bottom.phtml" translate="label">
                    <label>Bottom Block Options Wrapper</label>
                    <action method="insert"><block>product.tierprices</block></action>
                    <action method="append"><block>product.info.addtocart</block></action>
                    <action method="append"><block>product.info.addto</block></action>
                </block>

                <block type="core/template_facade" name="product.info.container1" as="container1">
                    <action method="setDataByKey"><key>alias_in_layout</key><value>container1</value></action>
                    <action method="setDataByKeyFromRegistry"><key>options_container</key><key_in_registry>product</key_in_registry></action>
                    <action method="append"><block>product.info.options.wrapper</block></action>
                    <action method="append"><block>product.info.options.wrapper.bottom2</block></action>
                </block>
                <block type="core/template_facade" name="product.info.container2" as="container2">
                    <action method="setDataByKey"><key>alias_in_layout</key><value>container2</value></action>
                    <action method="setDataByKeyFromRegistry"><key>options_container</key><key_in_registry>product</key_in_registry></action>
                    <action method="append"><block>product.info.options.wrapper</block></action>
                    <action method="append"><block>product.info.options.wrapper.bottom</block></action>
                </block>

                <block type="catalog/product_list_upsell" name="upsell_products" template="catalog/product/list/upsell.phtml">
                    <action method="setColumnCount"><columns>5</columns></action>
                    <action method="setItemLimit"><type>upsell</type><limit>5</limit></action>                
                </block>

                <action method="unsetCallChild"><child>container1</child><call>ifEquals</call><if>0</if><key>alias_in_layout</key><key>options_container</key></action>
                <action method="unsetCallChild"><child>container2</child><call>ifEquals</call><if>0</if><key>alias_in_layout</key><key>options_container</key></action>

            </block>
        </reference>
        <reference name="product_review">
            <block type="review/form" name="product.review.form" as="review_form">
                <block type="page/html_wrapper" name="product.review.form.fields.before" as="form_fields_before" translate="label">
                    <label>Review Form Fields Before</label>
                    <action method="setMayBeInvisible"><value>1</value></action>
                </block>
            </block>
        </reference>
        <reference name="left">
            <block type="catalog/product_list_related" name="catalog.product.related" before="-" template="catalog/product/list/related.phtml"/>
        </reference>
    </catalog_product_view> 
```

# python - 从数据存储中删除列

> ID：13567616
> 
> 赞同：3
> 
> 时间：2012-11-26T15:10:48.713
> 
> 标签：python, google-app-engine, app-engine-ndb

我更新了一个模型，其中一些实例已经存储在数据存储中。我删除了它的一些属性。
是否可以从数据存储中完全删除这些属性？
（我的意思不是将其设置为无）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T15:18:46.897

更改模型后，添加的新行将没有该列。现有行将继续具有该列。您应该能够使用下面给出的文章对现有数据运行更新以删除该列。

文档文章：[https ://developers.google.com/appengine/articles/update_schema](https://developers.google.com/appengine/articles/update_schema)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-26T14:45:45.263

@abel 的答案中的文章包括一些重要的相邻概念，但对于如何实际删除一列并不是很清楚。（有一些高级描述，没有代码示例。）

这里答案中的策略对我有用：[https ://stackoverflow.com/a/12701172/7470370](https://stackoverflow.com/a/12701172/7470370)

一个更完整的例子......

```
from google.appengine.ext import ndb

class Model_1(ndb.Model):
    propToKeep = ndb.StringProperty()
    propToDelete = ndb.StringProperty()

entities = Model_1.query().fetch() # get all records
    for entity in entities:
        if 'propToDelete' in entity._properties:
            del entity._properties['propToDelete']
            entity.put() 
```

# css - 如何在 div.span 中为段落创建一个新行

> ID：13567620
> 
> 赞同：0
> 
> 时间：2012-11-26T15:11:10.433
> 
> 标签：css, twitter-bootstrap

我只是在学习 css，所以请耐心等待，因为这可能是一个简单的问题：

我有一个这样的 HTML：

```
<div class="span2">
    <p>Some long text</p>
</div> 
```

我想要的是，当文本的宽度超过 div 的宽度时，它会像这样换行：

```
Some
Long
Text 
```

但即使文本宽度超过 div 的宽度，它也不会换行。请帮忙，谢谢。请注意，我正在使用 twitter 引导程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:21:19.690

```
.span2 {
  word-wrap: break-word;
} 
```

或者

```
.span2 {
  word-wrap: normal;
} 
```

无论哪种方式，我认为您正在寻找 word-wrap 属性。

# c++ - 在 win32 中对 WM_PAINT 的调用之间保留绘制的客户区

> ID：13567628
> 
> 赞同：1
> 
> 时间：2012-11-26T15:11:36.637
> 
> 标签：c++, winapi

我正在尝试在窗口的客户区上绘制（绘制）文本以响应某些事件（不在`WM_PAINT`消息中），那么如何在调用之间保留客户区的状态`WM_PAINT`？我知道每次有`WM_PAINT`消息（或窗口刷新）时，窗口都会重新绘制，外面的一切都`WM_PAINT`不再重要了。我认为我将能够更好地使用代码进行交流，所以这就是我现在所拥有的。

```
HDC mdc;

int WINAPI WinMain (HINSTANCE hThisInstance, HINSTANCE hPrevInstance, 
                    LPSTR lpszArgument, int nFunsterStil)
{   
    LoadBitmap(...); // for skinning the app.
    stuff.. 
}

LRESULT CALLBACK WindowProcedure (HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)
{
     case WM_PAINT:
         PAINTSTRUCT ps;

             HDC hdc = BeginPaint(hwnd, &ps);
             BITMAP bm;

             HDC dcSkin = CreateCompatibleDC(hdc);
             GetObject(hSkinBmp, sizeof(bm), &bm);
             SelectObject(dcSkin, hSkinBmp);

             BitBlt(dcSkin, 0, 0, wWidth, wHeight, mdc, 0, 0, SRCCOPY);
             BitBlt(hdc, 0, 0, wWidth, wHeight, dcSkin, 0, 0, SRCCOPY);

             DeleteDC(dcSkin);

             EndPaint(hwnd, &ps);
     break;

     case WM_LBUTTONDOWN;

          HDC hdc = GetDC( hwnd );

          mdc = CreateCompatibleDC( hdc );

          LPRECT rect;
          GetClientRect( hwnd, rect);

          SelectObject( mdc, CreateCompatibleBitmap( hdc, rect->right, rect->bottom ) );

          BitBlt( mdc,0,0,rect->right,rect->bottom,hdc,0,0,SRCCOPY );

          HFONT hfont = CreateFont( 0, 0, 0, 0, FW_NORMAL, FALSE, FALSE, FALSE, 
                          DEFAULT_CHARSET, OUT_DEFAULT_PRECIS, CLIP_DEFAULT_PRECIS, 
                          PROOF_QUALITY, DEFAULT_PITCH | FF_SWISS   , 0 );

          HFONT hOldFont = (HFONT)SelectObject( mdc, hfont );

          SetTextColor( mdc, RGB(255,0,0) );
          SetBkColor( mdc, RGB(255,255,0) );
          TextOut( mdc, 50, 150, logintext.c_str(), strlen( logintext.c_str() ) );

          SelectObject( mdc, hOldFont );
          ReleaseDC( hwnd, hdc);
          InvalidateRect( hwnd, 0, TRUE );

     break;
} 
```

如您所见，我必须用 bmp 绘制窗口的客户区，然后当鼠标按钮按下消息出现时，我必须在蒙皮的客户区顶部输出一些文本。我正在做的是保存在`WM_LBUTTONDOWN`消息中创建的内存 dc，并尝试首先使用 dc 为皮肤绘制窗口 dc，然后使用 dc 为文本（在 中创建的内存 dc `WM_LBUTTONDOWN`）。

皮肤位图按预期显示，但文本没有。

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:25:07.050

如果我对您的理解正确，您想在 WM_PAINT 之外绘制东西并让它们持续存在。不幸的是，这不是 Windows 的工作方式。

您需要能够重绘WM_PAINT 处理程序中的*所有*内容，因为窗口的内容可以随时销毁并重绘，因此您必须构建程序才能做到这一点。不要在 WM_PAINT 处理程序之外绘制任何东西，而是设置一些标志或其他状态来告诉程序应该在屏幕上显示什么，然后使屏幕区域无效，以便发出 WM_PAINT 来绘制该区域。

对您来说可能更容易的一种替代方法是在需要更新时将所有内容绘制到屏幕外位图，并让 WM_PAINT 函数仅在屏幕上绘制该位图，以便它始终是最新的。

# c# - 两种类型的迭代器

> ID：13567629
> 
> 赞同：0
> 
> 时间：2012-11-26T15:11:37.153
> 
> 标签：c#, .net, ienumerable, ienumerator

我为所有代码道歉，但我很难描述我想要做什么。我正在为瓦片地图创建一个 2D 网格。瓷砖（块）被分解成一个 10x10 的方块，称为一个块，这些块形成 10x10 的方块以形成区域，一个 10x10 的方块形成一个世界。正方形的边尺寸是blockSize。

所有坐标都是[X,Y]，0,0是左上角，都是从左到右再从上到下扫描。

从最大到最小：世界 -> 区域 -> 块 -> 块。

这张图片显示了一个 2x2 块大小的世界将如何布局：

![在此处输入图像描述](../Images/19e0e008d758d9ae8a1603f11842c0d3.png)

“大”地址显示每个块的地址如果它位于单个巨型阵列中而不是分解为子单元时。

在这篇文章的最后，我给出了我已经工作的代码的悬崖笔记版本。我可以创建所有的结构。我设置了迭代器（参见最后的代码），以便每个级别只能迭代低于它的级别。我的代码可以执行以下操作：

```
// Create a world of 10x10 regions, each made up of 10x10 chunks, each made up of 10x10 tiles
World world = new World(blockSize);

// Address the upper left hand corner of the world. The first region's first chunk's first block.
Block block = World.Regions[0,0].Chunks[0,0].Blocks[0,0];

// Address a random chunk
Chunk chunk = World.Regions[1,2].Chunks[6,2];

// Iterate over the Block[,] grid of the given chunk from left to right, up to down
// This will give us every block in Region 1,2 Chunk 6,2
foreach (Block block in chunk) {}

// Address a random region
Region region = World.Regions[4,5];

// Iterate over the Chunk[,] grid of the given region from left to right, up to down
// This will give us every Chunk in Region 4,5
foreach (Chunk chunk in region) {}

// In World, iterate over the Region[,] grid from left to right, up to down
// This will give us every Region in the World
foreach (Region region in World.regions) {} 
```

...

我想要的是让我的迭代器能够遍历我的数据的两个级别。例如，给定一个区域，扫描该区域中的所有块，并为我提供整个区域中所有块的列表。或者给定一个世界，得到世界上所有的块。或者是整个世界中所有方块的巨大列表。

...

```
// Given a region, return all chunks in that region
foreach (Chunk chunk in region) {}

// Given a region, return all blocks in all chunks in that region
foreach (Block block in region.GetAllBlocks)
{
    // Scan the chunks from left to right.
    // In each chunk, scan the blocks from left to right.
    // Cover every block in the region.
}

// Given a world, return all the regions
Region regionArray = World.region;     // For clarity
foreach (Region region in regionArray ) {}

// Given a world, return all the chunks in all the regions
Region regionArray = World.region;     // For clarity
foreach (Chunk chunk in regionArray.GetAllChunks)
{
   // Scan the regions from left to right, up to down.
   // In each region, scan the chunks from left to right, up to down.
}

// Given a world, return all the blocks in all the chunks in all the regions
Region regionArray = World.region;     // For clarity
foreach (Block block in regionArray.GetAllBlocks)
{
   // Scan the regions from left to right, up to down.
   // In each region, scan the chunks from left to right, up to down.
   // In each chunk, scan the blocks from left to right, up to down.
} 
```

...

如何编写我的迭代器代码以便生成我想要的列表？这是我第一次用迭代器做任何复杂的事情，我在弄清楚如何去做时遇到了很多麻烦。尝试这种事情是个好主意吗？它是高效/低效的吗？

这是我的代码的精简版本，以显示我的工作：

```
/* **************************************** */
class Block
{
   int blockX, blockY;           // Grid X/Y of this block in it's chunk
   public Block(blockX, blockY)
   {
      this.blockX = blockX;
      this.blockY = blockY;
   }
} // Block Class

/* **************************************** */
class Chunk : IEnumerator, IENumerable
{
    int chunkX, chunkY;       // X/Y of the chunk in it's region
    int blockSize;
    int containsBlocks;
    public Block[,] blocks;
    int enumeratorIndex = -1;

    public Chunk(int chunkX, int chunkY, int blockSize)
    {
        this.chunkX = chunkX;
        this.chunkY = chunkY;
        this.blockSize = blockSize;
        this.containsBlocks = blockSize * blockSize;

        blocks = new Block[blockSize, blockSize];

        for (int x = 0; x < blockSize; ++x)
        {
            for (int y = 0; y < blockSize; ++y)
            {
                blocks[x, y] = new Block(x, y);
            }
        }
    } // constructor

    public IEnumerator GetEnumerator()
    {
        return (IEnumerator)this;
    }

    public bool MoveNext()
    {
        enumeratorIndex++;
        return (enumeratorIndex < this.containsBlocks);
    }

    public void Reset() { enumeratorIndex = 0; }

    public object Current
    {
        get 
        {
            int y = enumeratorIndex / blockSize;
            int x = enumeratorIndex % blockSize;
            return blocks[x, y];
        }
    }
} // Chunk Class

/* **************************************** */
class Region : IEnumerator, IENumerable
{
   int regionX, int regionY;     // X/Y of region in the world
   int blockSize;
   int containsBlocks;
   public Chunks[,] chunks;
   int enumeratorIndex = -1;

   ...
   Same kind of constructor to setup the Chunks[,] array, but this time the iterator is
   ...

    public object Current
    {
        get 
        {
            int y = enumeratorIndex / blockSize;
            int x = enumeratorIndex % blockSize;
            return Chunks[x, y];
        }
    }
} // Region Class

/* **************************************** */
class World : IEnumerator, IENumerable
{
    public Region[,] regions;       // There is only one world, here are it's regions
    int blockSize;

    ...
    etc
    ...

    public object Current
    {
        get 
        {
            int y = enumeratorIndex / blockSize;
            int x = enumeratorIndex % blockSize;
            return Region[x, y];
        }
    }
} 
```

# php - 敏捷工具包：如何 自动重新加载网格

> ID：13567634
> 
> 赞同：2
> 
> 时间：2012-11-26T15:11:48.033
> 
> 标签：php, javascript, jquery, atk4

使用敏捷工具包生成网格，我试图自动重新加载网格，但我不知道如何：/

我挖掘了 js() 函数，看到第一个参数是 $when 但是，如何设置间隔？

像按钮点击这样的事件重新加载是可以的，但我需要设置每 x 秒重新加载一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T23:53:01.607

好的，这里是完整的测试示例，你应该怎么做。

首先我必须承认，ATK4 没有在 univ() 库中添加 setInterval 和 clearInterval 函数，但已经有了 setTimeout。我添加了 setInterval 和 clearInterval 并在 Github (https://github.com/atk4/atk4/pull/173) 中提出了拉取请求。我希望 Romans 会接受这一点，但如果没有，那么您可以随时将这些函数添加到您自己的 JS 库中。

所以这里是代码：

```
$g = $this->add('Grid');
$this->js(true)->univ()->setInterval(
    $g->js()->reload()->_enclose()
,3000); 
```

或者你甚至可以像这样执行多个独立的函数：

```
$this->js(true)->univ()->setInterval(
    $g->js(null,array(
        $g->js()->reload(),
        $g->js()->univ()->successMessage('Reloaded...')
    ))->_enclose()
,3000); 
```

这里的关键部分是 ->_enclose() 方法，它将您的 JS 链转换为匿名 JS 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:16:35.803

Javascript代码：

```
setInterval("func()",1000); 
```

这将`func()`每 1000 毫秒调用一次函数

# jquery - JQuery 验证插件：自定义验证方法的自定义消息

> ID：13567635
> 
> 赞同：1
> 
> 时间：2012-11-26T15:11:51.647
> 
> 标签：jquery, jquery-validate

我创建了这个用于管理正则表达式的自定义方法：

```
$.validator.addMethod(
    "regex",
    function(value, element, regexp) {
        var re = new RegExp(regexp);
        return this.optional(element) || re.test(value);
    },
    "Text not valid" 
```

);

然后我使用了我的方法：

```
$(function() {
  $("#registerform").validate({
    rules: { password: {required: true, regex: "^[a-zA-Z09]+$"} },
    messages: {
    password: {regex: "A password can contain only letters or digits"}
    }
  });
}); 
```

问题是，虽然我可以在 validate() 调用中覆盖标准验证方法（如必需）的默认消息，但我不能为自定义方法执行此操作。因此，我的页面将显示“文本无效”而不是“密码只能包含字母或数字”。如何提供默认消息并允许覆盖它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T01:54:21.053

如果您想始终在`.validate()`选项中设置自定义消息，只需将消息从自定义方法中删除即可。

```
$.validator.addMethod(
    "regex",
    function(value, element, regexp) {
        var re = new RegExp(regexp);
        return this.optional(element) || re.test(value);
    }
); 
```

> 如何提供默认消息并允许覆盖它？

我不相信这是可能的。毕竟，可以合理地假设，既然已经在使用他们自己的自定义方法，那么他们为什么还要覆盖它。

您唯一的选择是在自定义方法中使用消息或在您的`.validate()`选项中设置消息，但不能同时使用两者。

# c++ - 如何在 KDevelop 中向以调试模式启动的程序发送信号

> ID：13567637
> 
> 赞同：0
> 
> 时间：2012-11-26T15:11:55.737
> 
> 标签：c++, signals, kdevelop

我想分析一个我用 KDevelop 编写的程序。我编译程序并启动它

> *右键单击 CMake 项目 -> 调试为... -> 本机应用程序*

现在程序在 KDevelop 中运行，我可以在控制台上看到嵌入到 KDevelop 中的输出。当我按下`Ctrl`+ `C`" (SIGTERM) 时，我的程序停止运行。当我在 KDevelop 之外的控制台中运行程序时，我可以按下它。

如何将信号“SIGTERM”发送到 KDevelop 内的嵌入式控制台？

作为一种解决方法，我可以启动**htop**，选择程序并从那里发送一个 SIGTERM ，它工作正常，尽管在 KDevelop 本身中拥有所有功能会更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:21:46.377

一种可能的解决方案是：

*   右键单击 CMake 项目 -> 调试为... -> 本机应用程序。
*   更改为 KDevelop 中的“gdb”-Tab。
*   点击右上角的“暂停”-图标以启用“gdb”-Tab的输入字段
*   类型`signal <Signal>`，例如`signal SIGTERM`
*   程序继续并捕获发送的信号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T06:56:52.707

您可以从 KDevelop 内部发送 SIGINT：

运行 -> 中断

但是，您不能发送任何其他信号。

如果您认为这是一个有用的功能，请在 bugs.kde.org 上创建一个愿望请求 - 最终包括一个附加补丁：D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T15:39:48.073

使用 kill 命令向进程发送信号。`kill -l`应该为您提供信号及其 ID 的列表。

例如，在 FreeBSD 上，SIGTERM 信号是 #15，如下输出所示：

```
$ kill -l
 1) SIGHUP       2) SIGINT       3) SIGQUIT      4) SIGILL       5) SIGTRAP
 6) SIGABRT      7) SIGEMT       8) SIGFPE       9) SIGKILL     10) SIGBUS
11) SIGSEGV     12) SIGSYS      13) SIGPIPE     14) SIGALRM     15) SIGTERM
16) SIGURG      17) SIGSTOP     18) SIGTSTP     19) SIGCONT     20) SIGCHLD
21) SIGTTIN     22) SIGTTOU     23) SIGIO       24) SIGXCPU     25) SIGXFSZ
26) SIGVTALRM   27) SIGPROF     28) SIGWINCH    29) SIGINFO     30) SIGUSR1
31) SIGUSR2 
```

因此，要将 SIGTERM 发送到我的进程，我会查找进程 ID，然后向它发送一个 kill 命令，如下所示：

```
kill -15 <process ID> 
```

# haskell - 枚举 AppMessage 构造函数

> ID：13567645
> 
> 赞同：1
> 
> 时间：2012-11-26T15:12:14.780
> 
> 标签：haskell, internationalization, yesod

让`message/en.msg`文件像：

```
Category1: some text 1
Category2: some text 2
    ...
CategoryN: some text N 
```

并让下一个有效代码：

```
getHomeR :: Handler RepHtml
getHomeR = do

    (msg :: AppMessage -> Text) <- getMessageRender

    let list = T.concat $ map msg [MsgCategory1, MsgCategory7]

    defaultLayout $ do
        $(widgetFile "homepage") -- <p>List: #{list} 
```

然后，`list`包含`MsgCategory1`和`MsgCategory7`翻译。

我想做一些像：

```
 let list = T.concat $ map msg [MsgCategory1 .. MsgCategory7] 
```

但`AppMessage`不是`Enum`派生的。

我的另一种选择也无效（也不是`Read`派生的）

```
 let list = T.concat $ map (\n -> msg $ read "MsgCategory" ++ show n) [1 .. 7] 
```

一般来说，如何投射“实时”`AppMessage`元素？

非常感谢你！

（我爱Yesod！:)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:29:17.890

我发现的一种方法是[here](http://www.haskell.org/ghc/docs/7.6.1/html/users_guide/deriving.html)

```
deriving instance Enum AppMessage
deriving instance Eq AppMessage
deriving instance Read AppMessage
deriving instance Show AppMessage
... 
```

（需要 -XStandaloneDeriving）

解释：

改变`Foundation.hs`：

```
-- Set up i18n messages. See the message folder.
mkMessage "App" "messages" "en"

-- Require extension: StandaloneDeriving
deriving instance Enum AppMessage 
```

开`site.cabal`：

```
extensions: TemplateHaskell
            QuasiQuotes
            OverloadedStrings
            NoImplicitPrelude
            CPP
            MultiParamTypeClasses
            TypeFamilies
            GADTs
            GeneralizedNewtypeDeriving
            FlexibleContexts
            EmptyDataDecls
            NoMonomorphismRestriction
            StandaloneDeriving 
```

# jquery - Tag-It 自动完成不会触发焦点列表

> ID：13567650
> 
> 赞同：0
> 
> 时间：2012-11-26T15:12:34.550
> 
> 标签：jquery, jquery-ui-autocomplete, tag-it

我已经启动并运行了这个 Tag-it 插件，但我必须纠正一个缺陷。

当鼠标进入输入字段时，它不显示标签列表，即使有`showAutocompleteOnFocus:true,`属性。

到目前为止我有这个代码

```
<script type="text/javascript">
        $(document).ready(function() {
            $("#categories").tagit({
                fieldName: "categories[]",
                availableTags: <?php echo $categories; ?>,
                showAutocompleteOnFocus:true,
                allowSpaces:true

            });
        });
</script>

<ul id="categories"><ul> 
```

类别回声呈现如下

```
["Categoria","Categoria 2","Categoria 3","Promoção"] 
```

任何帮助将非常感激！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:02:27.467

我在github上的插件页面打开了一个issue，作者解决了

对于有相同问题的任何人，[这里](https://github.com/aehlke/tag-it/issues/123)是问题页面

# selenium - 我是否需要为每次测试重新创建驱动程序？

> ID：13567653
> 
> 赞同：0
> 
> 时间：2012-11-26T15:12:46.037
> 
> 标签：selenium

我刚刚开始使用 Selenium - 目前我只对 IE 感兴趣，因为它是一个内部网站，而不是供公众使用的。我`IEDriverServer.exe`用来设置我的浏览器会话，但我不确定是否需要为每个测试重新创建它，或者它是否会自动保持浏览器会话/测试的原子性。我无法找到有关此的任何信息，因为大多数示例都是针对单个测试而不是一批单元测试。

所以目前我有

```
[TestInitialize]
public void SetUp()
{              
   _driver = new InternetExplorerDriver();
} 
```

和

```
[TestCleanup]
public void TearDown()
{
   _driver.Close();
   _driver.Quit();
} 
```

这是正确的还是我为每个测试做额外的不必要的工作？我应该在声明时对其进行初始化吗？如果是这样，我如何管理它的生命周期？我想我可以调用`.Close()`每个测试来杀死浏览器窗口，但是呢`.Quit()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:25:28.160

我将 Selenium 与 NUnit 一起使用，但您不需要每次都重新创建它。由于您使用的是 MSTest，我会这样做：

```
[ClassInitialize]
public void SetUp()
{              
   _driver = new InternetExplorerDriver();
}

[ClassCleanup]
public void TearDown()
{
   _driver.Close();
   _driver.Quit();
} 
```

`ClassInitialize`每次测试类初始化`ClassCleanup`都会调用一次代码，每次测试类拆解/处置都会调用一次代码。

虽然这仍然不能保证，因为测试运行器可能会创建多个测试线程：

[http://blogs.msdn.com/b/nnaderi/archive/2007/02/17/explaining-execution-order.aspx](http://blogs.msdn.com/b/nnaderi/archive/2007/02/17/explaining-execution-order.aspx)

您还必须考虑每次要测试哪种状态。每次关闭并启动新的浏览器会话的最常见原因是您可以有一个干净的工作状态。

正如您所指出的，有时这是不必要的工作，但是您的测试起点是什么？

对我来说，每个测试类都有一个浏览器，有一种方法可以退出我的 Web 应用程序并在每次测试结束时保留在登录页面。

# c# - 从 Expando /dynamic 对象中动态删除成员

> ID：13567663
> 
> 赞同：12
> 
> 时间：2012-11-26T15:13:45.533
> 
> 标签：c#, dynamic, expandoobject, dynamicobject

我正在寻找一种从动态对象中动态删除成员的方法（也许我们可以在这里使用 Expando 对象吗？）。

好的，我想需要澄清一下...

当你这样做时：

```
dynamic foo = new ExpandoObject();
foo.Bar = 42;
foo.Jar = 25; 
```

, `Bar`'jar' 属性将在运行时动态添加。我正在向用户显示这个，他可以进一步添加他自己的属性（表单可用选项），这可以通过将成员添加到动态对象来完成。

但他也可以从 Foo 对象中删除成员（比如“Jar”），我们如何从动态对象中删除成员？我们可以在这里使用 Expando 对象吗？

# c# - C# 列表框集合语法

> ID：13567672
> 
> 赞同：17
> 
> 时间：2012-11-26T15:14:23.640
> 
> 标签：c#, linq, collections, listbox, ienumerable

在快速学习 C# 的同时，我偶然发现了这个 Collection 语法问题。

我将一些我自己的 MyItem 类型的对象添加到列表框 lstData。现在我需要在这个列表框中进行搜索，并考虑使用优雅的 LINQ 表示法，例如：

```
lstData.Items.Where(x => x.Text == SearchString) 
```

但是列表框的项目没有 .Where()，尽管我确实包含了“使用 System.Linq;” 命名空间。

所以我尝试了：

```
foreach (MyItem item in (MyItem)lstData.Items) 
```

但这会产生构建错误：无法将类型“System.Windows.Forms.ListBox.ObjectCollection”转换为“MySandbox.frmListboxDemo.MyItem”。

我确实设法写了一些可行的东西：

```
 for (int i = 0; i < lstData.Items.Count; i++)
        {
            MyItem item = (MyItem)lstData.Items[i];
            if (item.Text == SearchString)
            {
                lstData.SetSelected(i, true);
                break;
            }
        } 
```

和类似的版本：

```
 var item_enum = lstData.Items.GetEnumerator();
        while (item_enum.MoveNext()) { etc etc... } 
```

结果是 2 行更长，并且没有弄清楚什么可以代替“var”。

我不确定我是否了解如何使用 Collections、ObjectCollections、Enumerators 等，但我渴望学习。特别是如果 .Where() 版本是可能的和/或更好的。

* * *

感谢您的所有回答。我最终得到了这个解决方案：

```
 var item_iter = lstData.Items.Cast<MyItem>()
                          .Where(x => x.Text.Trim().ToLower() == txtItemName.Text);
        foreach (MyItem item in item_iter)
        {
            int i = lstData.Items.IndexOf(item);
            lstData.SetSelected(i, true);
            break;
        } 
```

我不知道这是否真的比“fortran”方式好得多（见上文），但它确实教会了我可以在其他 C# 查询中使用的方法。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-26T15:19:13.337

items 集合不是强类型集合。您可以使用`IEnumerable<T>.OfType()`or`IEnumerable<T>.Cast()`扩展方法获取 LINQ 世界的条目，您可以在其中过滤条目：

```
var filteredItems = lstData.Items.OfType<MyItem>().Where(i => i.Prop == val); 
```

Cast 和 OfType 的区别在于：

*   `OfType<T>`只会返回可转换为 Type T 的项目
*   `Cast<T>`当集合中至少有一项不可转换为 T 时，将失败

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-26T15:16:13.680

尝试使用第`Cast<T>`一个执行转换为您期望的类型。那是：

`lstData.Items.Cast<MyItem>().Where(x => x.Text == SearchString)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T15:19:28.817

`ListBox.ObjectCollection`implements `IEnumerable`，但不是 generic `IEnumerable<T>`，这是大多数 Linq 方法所需要的。

一步`IEnumerable<T>`解决您的选角问题的一种方法是使用`Cast<T>`：

```
lstData.Items.Cast<MyItem>().Where(x => x.Text == SearchString) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T15:21:04.087

尝试从项目中列出一个列表：

```
(new ListBox()).Items.OfType<ListViewItem>().Where(......); 
```

可能是因为它最初是用早期版本的 .net 构建的

# email - 从 Shell 创建电子邮件帐户

> ID：13567673
> 
> 赞同：0
> 
> 时间：2012-11-26T15:14:24.713
> 
> 标签：email, shell

事情是这样的：

*   我对远程主机有 shell/ssh 访问权限
*   我没有 cPanel 或类似的东西
*   可以说，域是 mydomain.com
*   我想要的是创建新的电子邮件帐户，例如bounced@mydomain.com。这需要通过 shell 来完成，因为我那里没有 cPanel。

我搜索并搜索并找到了大量的 cPanel 解决方案，但不包括外壳。

需要明确的是：问题不是如何发送/接收电子邮件，而是使用用户名和密码创建新的电子邮件帐户。

任何建议将不胜感激！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:22:37.593

那么这真的取决于邮件服务器，不是吗？

通过快速的谷歌搜索，我找到了 sendmail： http: [//mohammednv.wordpress.com/2008/01/07/how-to-create-a-new-mail-account-in-sendmail/](http://mohammednv.wordpress.com/2008/01/07/how-to-create-a-new-mail-account-in-sendmail/)

您需要编辑文件并调用程序 (useradd)。我猜两者都是root。

您必须找出您正在运行的电子邮件服务器以及如何配置它/添加用户。从 shell（或远程 shell，没关系）执行此操作确实是执行此操作的正常方式。所以这根本不是关于编程的问题。您可能想查看超级用户或服务器故障堆栈交换站点。

# xpages - 如何在 xp:fileUpload 控件上隐藏“未选择文件”文本？

> ID：13567674
> 
> 赞同：1
> 
> 时间：2012-11-26T15:14:24.667
> 
> 标签：xpages

如何删除/隐藏文件上传按钮旁边的“未选择文件”文本？ ![上传文件](../Images/0c0dc3f25fb1f7390112039099ea2b9a.png)

我的 fileUpload 控件的代码：

```
 <xp:fileUpload id="fileUpload1"
                            value="#{document1.Picture}"
                            rendered="#{javascript:document1.isEditable()}"
                            mimetype="image/jpeg" useUploadname="true"
                            accept="image/jpeg,image/gif,image/png">
                            <xp:eventHandler event="onchange"
                                submit="true" refreshMode="complete"
                                disableValidators="true">
                            </xp:eventHandler>
                        </xp:fileUpload> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-29T07:31:13.810

仅适用于 Chrome：只需将文件上传控件的宽度自动设置为 40% “未选择文件”文本将消失

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T16:39:37.260

使用这个答案，它基本上创建了一个隐藏底层输入文件按钮的样式跨度：[https ://stackoverflow.com/a/9164004/785061](https://stackoverflow.com/a/9164004/785061)

# android - listfragment 上的项目点击

> ID：13567675
> 
> 赞同：1
> 
> 时间：2012-11-26T15:14:30.600
> 
> 标签：android, listadapter, android-listfragment

我的应用程序是一个简单的记事本类型的应用程序，在这个片段中，我想从数据库中检索笔记并将它们放入列表片段中。它工作得很好，直到我想选择一个列表项，我必须单击列表的文本，而不是像其他列表片段一样单击列表项。

这是代码

```
 public void fillData() {

        mDbHelper = new NotesDbAdapter(getActivity());
        mDbHelper.open();

        Cursor c = mDbHelper.fetchAllNotes();

        String[] from = new String[]{NotesDbAdapter.KEY_TITLE};

       int[] to = new int[] { R.id.text1};        

        // Now create an array adapter and set it to display using row
        @SuppressWarnings("deprecation")
        ListAdapter adapter = new  SimpleCursorAdapter(getActivity(),    R.layout.notes_row, c, from, to);
        this.setListAdapter(adapter);
    } 
```

这是监听器方法

```
@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);
    Intent N = new Intent(getActivity(), NoteEdit.class);
    N.putExtra(NotesDbAdapter.KEY_ROWID, id);
    startActivityForResult(N, ACTIVITY_EDIT);
} 
```

notes_row.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TextView android:id="@+id/text1" xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:gravity="center_vertical"
    android:paddingLeft="5dip"
    android:singleLine="true"/> 
```

# django - 在视图中导入代码。姜戈

> ID：13567677
> 
> 赞同：0
> 
> 时间：2012-11-26T15:14:33.743
> 
> 标签：django, django-views

我有简单的代码，我想在我的每个视图中导入：

```
 form = DocumentForm()
           user= request.user
           test1 = request.session.get('test1')
           ....
           context += {'form': form, 'test1':test1 ...} 
```

我想知道是否有一种简单的方法可以做到这一点。我看到了文档：[https ://docs.djangoproject.com/en/1.2/ref/generic-views/](https://docs.djangoproject.com/en/1.2/ref/generic-views/)

但我不确定它是如何工作的。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:42:23.720

这正是[上下文处理器](https://docs.djangoproject.com/en/1.4/ref/templates/api/#subclassing-context-requestcontext)的用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:37:34.117

这将是最简单的方法之一：

```
def run_this_in_every_view(request) :
    form = DocumentForm()
    user= request.user
    test1 = request.session.get('test1')
    ....
    return {'form': form, 'test1':test1 ...}

def my_view(request) :
    context = {}

    ...

    context += run_this_in_every_view(request)
    return render_to_response('template.html', context) 
```

基于类的视图可能是更好的方法。这个问题有一个很好的答案：[Django 中的类视图](https://stackoverflow.com/questions/742/class-views-in-django)

# c# - LdapConnection SearchRequest 为“超出大小限制”引发异常

> ID：13567685
> 
> 赞同：6
> 
> 时间：2012-11-26T15:15:06.197
> 
> 标签：c#, .net, ldap

因为我们需要使用 LDAPS 连接到 LDAP 服务器，所以我们必须使用 LdapConnection 而不是 DirectoryEntry。

这是源代码：

```
 SearchResponse response;
        using (LdapConnection con = new LdapConnection(new LdapDirectoryIdentifier(Host, Port)))
        {
            if (IsSSL)
            {
                con.SessionOptions.SecureSocketLayer = true;
                con.SessionOptions.VerifyServerCertificate =
                    (connection, certificate)
                    => true;
            }
            con.Credential = new NetworkCredential(_username, _password);
            con.AuthType = AuthType.Basic;
            con.Bind();

            if (logMessage != null)
                logMessage("Connected to LDAP");

            string sFilter = String.Format(
                "(&(objectcategory=person)(objectclass=user){0}(!(userAccountControl:1.2.840.113556.1.4.803:=2)))",
                filter
                );

            SearchRequest request = new SearchRequest("OU=Corp,DC=mydc,DC=com", sFilter, SearchScope.Subtree);
            request.Attributes.Add(Resources.objectguid);
            request.Attributes.Add(Resources.givenname);
            request.Attributes.Add(Resources.sn);
            request.Attributes.Add(Resources.initials);
            request.Attributes.Add(Resources.samaccountname);
            request.Attributes.Add(Resources.userprincipalname);
            request.Attributes.Add(Resources.mail);
            request.Attributes.Add(Resources.objectsid);
            request.Attributes.Add(Resources.department);
            request.Attributes.Add(Resources.company);
            request.SizeLimit = 10;

            response = (SearchResponse) con.SendRequest(request);
        } 
```

执行源代码后（我们已经验证了凭据、主机、端口等 - 使用外部 3rd 方软件），我们得到以下异常：

# 超出大小限制

**说明：**执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

**异常详细信息：** System.DirectoryServices.Protocols.DirectoryOperationException：超出大小限制

**源错误：**

```
response = (SearchResponse) con.SendRequest(request); 
```

> ```
> [DirectoryOperationException: The size limit was exceeded]
>    System.DirectoryServices.Protocols.LdapConnection.ConstructResponse(Int32 
> ```
> 
> messageId, LdapOperation 操作, ResultAll resultType, TimeSpan requestTimeOut, Boolean exceptionOnTimeOut) +2385 System.DirectoryServices.Protocols.LdapConnection.SendRequest(DirectoryRequest request, TimeSpan requestTimeout) +499 System.DirectoryServices.Protocols.LdapConnection.SendRequest(DirectoryRequest request) +50 UserSearchProvider `1 logMessage) in c:\Users\stemarie\Documents\Visual Studio 2012\Projects\Idealink.Modules\UserSearchProvider\UserSearchProvider\ADUserSearchProvider.cs:298 UserSearchProvider.UserSearchProvider.QueryAndSort(UserSearchCriteriaCollection criterias, Action`c:\Users\stemarie\Documents\Visual Studio 2012\Projects\Idealink.Modules\UserSearchProvider\UserSearchProvider\UserSearchProvider.cs:77 UserSearchProvider.UserSearchProvider.Search(UserSearchCriteriaCollection 标准中的.ADUserSearchProvider.QueryStore(UserSearchCriteriaCollection 标准，操作1 logMessage)，行动`1 logMessage) in c:\Users\stemarie\Documents\Visual Studio 2012\Projects\Idealink.Modules\UserSearchProvider\UserSearchProvider\UserSearchProvider.cs:33 UserSearchProvider.UserSearchService.Search(UserSearchCriteriaCollection criterias, Action`1 logMessage) 在 c:\Users\stemarie\Documents\Visual Studio 2012\Projects\Idealink.Modules\UserSearchProvider\UserSearchProvider\UserSearchService.cs:44 UserSearchProviderTest._Default.Page_Load(Object sender, EventArgs e) 在 c:\Users\ stemarie\Documents\Visual Studio 2012\Projects\Idealink.Modules\UserSearchProvider\UserSearchProviderTest\Default.aspx.cs:28

让我困惑的部分是我们确实指定了最大大小限制，我们不想要超过 100 个条目 - 我们想要限制它。但是，即使我们将 SizeLimit 指定为 1，该库也会始终抛出错误。

有人对此问题有任何见解/建议吗？我们非常接近完成这项工作，只需要解决最后一个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-07-14T19:30:59.337

您应该在与此类似的功能中使用 cookie。该函数返回一个 SearchResponse 对象的集合，调用者应该循环这些对象。

```
private List<SearchResponse> SearchDirectory(string distinguishedName, string searchFilter, System.DirectoryServices.Protocols.SearchScope searchScope, params string[] attributeList)
{
    List<SearchResponse> result = new List<SearchResponse>();
    SearchResponse response = null;
    int maxResultsToRequest = 100;
    try
    {
        PageResultRequestControl pageRequestControl = new PageResultRequestControl(maxResultsToRequest);

        // used to retrieve the cookie to send for the subsequent request
        PageResultResponseControl pageResponseControl;
        SearchRequest searchRequest = new SearchRequest(distinguishedName, searchFilter, searchScope, attributeList);
        searchRequest.Controls.Add(pageRequestControl);

        while (true)
        {
            response = (SearchResponse)connection.SendRequest(searchRequest);
            result.Add(response);
            pageResponseControl = (PageResultResponseControl)response.Controls[0];
            if (pageResponseControl.Cookie.Length == 0)
                break;
            pageRequestControl.Cookie = pageResponseControl.Cookie;
        }
    }
    catch (Exception e)
    {
        // do something with the error

    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T18:48:19.327

事实证明，这是有效的：

```
 try
            {
                response = (SearchResponse)con.SendRequest(request);

                return response.Entries.Cast<SearchResultEntry>()
                    .Select(entry => entry.Attributes)
                    .Select(x => GetADUserSearchItemFromADProperties(x, logMessage))
                    .Where(user => user.HasName)
                    .Cast<IUserSearchItem>();
            }
            catch (DirectoryOperationException ex)
            {
                response = (SearchResponse) ex.Response;
                return response.Entries.Cast<SearchResultEntry>()
                    .Select(entry => entry.Attributes)
                    .Select(x => GetADUserSearchItemFromADProperties(x, logMessage))
                    .Where(user => user.HasName)
                    .Cast<IUserSearchItem>();
            } 
```

MSDN 文档声明您将[DirectoryResponse](http://msdn.microsoft.com/en-us/library/system.directoryservices.protocols.directoryresponse.aspx)类作为 DirectoryOperationException.Response 属性。但是，您可以将此属性强制转换为[SearchResponse](http://msdn.microsoft.com/en-us/library/system.directoryservices.protocols.searchresponse.aspx)类型，然后使用 SearchResponse.Entries 属性来获取在达到指定 SizeLimit 之前收到的条目。

我已经尝试过了，我得到了预期的结果，我只是有点沮丧，我必须处理异常才能执行操作。

# c# - XAML DataTemplate 数据绑定

> ID：13567687
> 
> 赞同：2
> 
> 时间：2012-11-26T15:15:09.380
> 
> 标签：c#, xaml, data-binding, datatemplate

我正在尝试为 WP8 制作应用程序，但我一生都无法弄清楚数据绑定是如何工作的。我已经尝试了一个又一个示例，看起来他们所做的与我几乎完全相同，但似乎没有任何效果。基本上，配置文件类包含配置文件的名称和图标。我想在屏幕上显示这些配置文件的列表，名称在图标的右侧。

当我在 WP8 手机模拟器中运行该项目时，什么也没有出现。如果我将 DataTemplate 中元素的属性（即源和文本）更改为绝对字符串，它可以正常工作。

MainPage.xaml：

```
<phone:PhoneApplicationPage ..>

<Grid x:Name="LayoutRoot" Background="Transparent">
    <Grid.Resources>
        <DataTemplate x:Name="ProfileListTemplate">
            <StackPanel Margin="10">
                <Image Grid.Column="0" Width="50" Height="50" Source="{Binding ImageSource}" Stretch="Fill"/>
            <TextBlock Grid.Column="1" Text="{Binding ProfileName}" Margin="10" HorizontalAlignment="Left" FontSize="36"/>
            </StackPanel>
        </DataTemplate>
    </Grid.Resources>
    <phone:LongListSelector x:Name="ProfilesList" Grid.Row="1" VerticalAlignment="Top" FontSize="36" Height="535" Margin="10,0,0,0" ItemTemplate="{StaticResource ProfileListTemplate}"/>
</Grid>

</phone:PhoneApplicationPage> 
```

MainPage.xaml.cs：

```
namespace Profiles
{
    public partial class MainPage : PhoneApplicationPage
    {
        public MainPage()
        {
            InitializeComponent();

            ObservableCollection<Profile> ProfilesCollection = new ObservableCollection<Profile>();
            ProfilesCollection.Add(new Profile("Nighttime"));
            ProfilesCollection.Add(new Profile("Work"));
            ProfilesCollection.Add(new Profile("Home"));
            ProfilesList.ItemsSource = ProfilesCollection;
        }
    }
} 
```

“个人资料”类：

```
namespace Profiles
{
    class Profile
    {
        public string ProfileName = "";
        public string ImageSource = "/Resources/Delete.png";

        public Profile(string name)
        {
            ProfileName = name;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:48:23.540

尝试从字段更改`ProfileName`为`ImageSource`属性。

```
class Profile
{
    private const string DefaultImageSource = "/Resources/Delete.png";

    public string ProfileName { get; set; }
    public string ImageSource {get; set; }

    public Profile(string name)
    {
        ProfileName = name;
        ImageSource = DefaultImageSource;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:49:46.933

将您的 Profile 类更改为属性，如下所示...

```
public class Profile
{
    string profileName = "";
    string imageSource = "/Resources/Delete.png";

    public string ProfileName
    {
        get
        {
            return profileName;
        }
        set
        {
            profileName = value;
        }
    }
    public string ImageSource
    {
        get
        {
            return imageSource;
        }
        set
        {
            imageSource = value;
        }
    }

    public Profile(string name)
    {
        ProfileName = name;
    }
} 
```

随着您的逻辑越来越多，添加更多行为并实现 INotifyPropertyChanged 如果您需要跟踪单个对象内的更改，则相对简单。

# mysql - MySQL：使用 Where AND 和 OR 进行登录查询不起作用

> ID：13567691
> 
> 赞同：0
> 
> 时间：2012-11-26T15:15:13.460
> 
> 标签：mysql, login, where

我正在实现一个系统登录，在数据库中我有这个表：

**cat_clients**

```
Id    Name    Rfc        Email            P_Name          P_Email          S_Name          S_Email          T_Name          T_Email
_______________________________________________________________________________________________________________________________________
1     Rick    RFC2345    rick@email.com    George      george@email.com    Daniel     daniel@email.com      Fred        fre@email.com
2     Mary    RFC2212    mary@email.com    Brad        brad@email.com      Allan      allan@email.com       Edward      edward@email.com
......
.....
.... more 
```

因此，要成功登录，用户必须输入“Rfc”和任何电子邮件（Email、P_Email、S_Email 和 T_Email）。用户拥有这些电子邮件是因为它们是替代联系人。

**询问**

```
SELECT * 
FROM cat_clients
WHERE (Email = 'george@email.com' OR P_Email = 'george@email.com' OR S_Email = 'george@email.net' OR T_Email = 'george@email.com') AND Rfc = 'RFC2345'; 
```

但我的查询不起作用。我希望我解释了。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:17:38.450

尝试

```
SELECT * 
FROM cat_clients
WHERE 'george@email.com' IN (Email, P_Email, S_Email, T_Email) AND
      Rfc = 'RFC2345'; 
```

# c# - 将事件分配给事件处理程序的两种不同类型之间的区别

> ID：13567692
> 
> 赞同：3
> 
> 时间：2012-11-26T15:15:17.937
> 
> 标签：c#, events, com

我在 SO 中看到了这个示例代码，它说一种做法不好，另一种做法很好。但我不明白为什么？事实上，我得到了那个著名的 RCW COM 对象错误，而那个帖子说这可能是一个原因。

```
public class SomeClass
{
    private Interop.ComObjectWrapper comObject;
    private event ComEventHandler comEventHandler;

    public SomeClass()
    {
        comObject = new Interop.ComObjectWrapper();

        // NO - BAD!
        comObject.SomeEvent += new ComEventHandler(EventCallback);

        // YES - GOOD!
        comEventHandler = new ComEventHandler(EventCallback);
        comObject.SomeEvent += comEventHandler
    }

    public void EventCallback()
    {
        // DO WORK
    } 
```

}

编辑：这里是源的链接：[不能使用已与其底层 RCW 分离的 COM 对象](https://stackoverflow.com/questions/1567017/com-object-that-has-been-separated-from-its-underlying-rcw-cannot-be-used)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T10:16:00.310

我认为这两个代码片段是相同的，我们在这里没有任何强/弱引用的问题。

### 背景

首先，如果我们`Interop.ComObjectWrapper`提供 CLR 事件（即在委托中存储事件处理程序的事件），我们肯定会从`ComObjectWrapper`我们的对象中获得强引用。

任何委托都包含两部分：`Target`类型`object`和指向特定方法的方法指针。If `Target`is `null`than 回调指向静态方法。

不可能有`Target`类型为[WeakReference](http://msdn.microsoft.com/en-us/library/system.weakreference.aspx)的委托。有所谓的[弱事件模式，但它是在](http://msdn.microsoft.com/en-us/library/aa970850.aspx)[EventManager](http://msdn.microsoft.com/en-us/library/hh199438.aspx)之上实现的，而不是普通的委托。

## 在现场存储事件处理程序将无济于事。第1部分

内部事件实现是指订阅事件后：

```
comObject.SomeEvent += EventCallback; 
```

`comObject`object 隐含地持有对该`SomeClass`对象的强引用。**无论您使用哪种订阅技术**以及 ComObject 是否是 COM 对象包装器，这都是正确的。

订阅事件会在生命周期方面增加两个对象之间的隐式依赖关系。这就是为什么 .NET 世界中最常见的内存泄漏是由订阅长生命周期对象的事件引起的。**在应用程序中可访问事件持有者之前，事件订阅者不会死亡。**

## 在现场存储事件处理程序将无济于事。第2部分

但是如果我的假设不正确并且`ComObjectWrapper`提供了一些弱事件模式的概念，那么在现场保存事件处理程序将无济于事。

让我们回顾一下 event 关键字的含义：

```
private event ComEventHandler comEventHandler;
... 
comEventHandler = new ComEventHandler(EventCallback); 
```

在当前字段中保存回调（基本上我们可以将私有事件视为简单的委托字段）不会改变现有行为。

我们已经知道delegate 是一个简单的对象，它存储了对Target 对象（即`SomeClass`对象）和一个方法（即`public void EventCallBack()`）的引用。这意味着在字段中存储额外的委托会增加对`SomeClass`自身的额外引用`SomeClass`。

基本上，将事件处理程序存储在语义上等同于在 SomeClass 中存储附加引用：

私人 SomeClass someClass;

public SomeClaas() { // 这与在 comEventHandler 字段中存储委托 // 基本相同 someClass = this; }

**在 中存储强引用`SomeClass`不会延长当前对象的生命周期。**这意味着 if`ComObjectWrapper`不会持有对`SomeClass`存储事件处理程序的对象的强引用，`comEventHandler`不会延长 SomeClass 的生命周期，也不会阻止`SomeClass`垃圾收集。

### 结论

在私有字段中存储事件处理程序不会延长对象的生命周期，也不会阻止它进行垃圾回收。

这就是为什么以下代码片段在对象生命周期方面没有区别的原因：

```
 // GOOD!
    comObject.SomeEvent += new ComEventHandler(EventCallback);

    // EVEN BETTER!
    comObject.SomeEvent += EventCallback;

    // NOT GOOD, BECAUSE WAN'T HELP!
    comEventHandler = new ComEventHandler(EventCallback);
    comObject.SomeEvent += comEventHandler 
```

# php - 显示基于另一行值的金额总和

> ID：13567694
> 
> 赞同：1
> 
> 时间：2012-11-26T15:15:23.093
> 
> 标签：php, mysql, sql, database

我有 SQL 表：

```
id_details
year-month
type (only have 2 values , income and outcome)
amount 
```

和表有这样的行：

```
(year-month)      (type)     (amount)
 November-2012    income      50000
 November-2012    income      30000
 December-2012    income      20000
 November-2012    outcome     10000
 December-2012    outcome     50000
 December-2012    income      10000 
```

我想要的是，显示一个结果如下的查询：

```
 (year-month)    (sum income)     (sum-outcome)   (sub-total balance)
 November-2012    80000             10000          70000
 December-2012    30000             50000          -20000 
```

最后

```
 total-balance = 50000 
```

我怎样才能做到这一点？或者你能推荐我更好的桌子设计吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:21:32.170

```
SELECT `year-month`,
       SUM(CASE WHEN type = 'income' THEN amount ELSE 0 END) `sum-income`,
       SUM(CASE WHEN type = 'outcome' THEN amount  ELSE 0 END) `sum-outcome`,
       SUM(amount) `sum-total balance`
FROM <JOINS>
GROUP BY `year-month` 
```

# php - 在 cakephp 2.2 中重新排列多维数组

> ID：13567695
> 
> 赞同：2
> 
> 时间：2012-11-26T15:15:23.343
> 
> 标签：php, arrays, cakephp, multidimensional-array

我在 cakephp 2.2.3 中有这个多维 assoc $modules 数组：

```
大批（
    'type1' => 数组（
        (int) 0 => 数组(
            '名称' => 'name16',
            '类型' => '1',
            '类别' => '类别C'，
            '区域' => '区域1'
        ),
        (int) 1 => 数组(
            '名称' => 'name17',
            '类型' => '1',
            '类别' => '类别B'，
            '区域' => '区域1'
        ),
        (int) 2 => 数组(
            '名字' => 'name18',
            '类型' => '1',
            '类别' => '类别A'，
            '区域' => '区域3'
        ),
        (int) 3 => 数组(
            '名字' => 'name19',
            '类型' => '1',
            '类别' => '类别C'，
            '区域' => '区域3'
        ),
        (int) 4 => 数组(
            'name' => 'name22',
            '类型' => '1',
            '类别' => '类别A'，
            '区域' => '区域2'
        )
    ),
    'type2' => 数组（
        (int) 0 => 数组(
            '名称' => '名称1',
            '类型' => '2',
            '类别' => '类别B'，
            '区域' => '区域2'
        ),
        (int) 1 => 数组(
            '名称' => '名称2',
            '类型' => '2',
            '类别' => '类别B'，
            '区域' => '区域2'
        ),
        (int) 2 => 数组(
            '名称' => '名称3',
            '类型' => '2',
            '类别' => '类别A'，
            '区域' => '区域1'
        ),
        (int) 3 => 数组(
            '名称' => '名称4',
            '类型' => '2',
            '类别' => '类别C'，
            '区域' => '区域3'
        ),
        (int) 4 => 数组(
            '名称' => '名称5',
            '类型' => '2',
            '类别' => '类别A'，
            '区域' => '区域3'
        )
    )
)

```

我想重新排列它

```
大批（
    'zone1' => 数组（
        'type1' => 数组（
            (int) 0 => 数组(
                '名称' => 'name17',
                '类型' => '1',
                '类别' => '类别B'
            ),
            (int) 1 => 数组(
                '名称' => 'name16',
                '类型' => '1',
                '类别' => '类别C'
            )
        ),
        'type2' => 数组（
            (int) 0 => 数组(
                '名称' => '名称3',
                '类型' => '2',
                '类别' => '类别A'
            )
        )
    ),
    'zone2' => 数组（
        'type1' => 数组（
            (int) 0 => 数组(
                'name' => 'name22',
                '类型' => '1',
                '类别' => '类别A'
            )
        ),
        'type2' => 数组（
            (int) 0 => 数组(
                '名称' => '名称1',
                '类型' => '2',
                '类别' => '类别B'
            ),
            (int) 1 => 数组(
                '名称' => '名称2',
                '类型' => '2',
                '类别' => '类别B'
            )
        )
    ),
    'zone3' => 数组（
        'type1' => 数组（
            (int) 0 => 数组(
                '名字' => 'name18',
                '类型' => '1',
                '类别' => '类别A'
            ),
            (int) 0 => 数组(
                '名字' => 'name19',
                '类型' => '1',
                '类别' => '类别C'
            )
        ),
        'type2' => 数组（
            (int) 0 => 数组(
                '名称' => '名称5',
                '类型' => '2',
                '类别' => '类别A'
            ),
            (int) 1 => 数组(
                '名称' => '名称4',
                '类型' => '2',
                '类别' => '类别C'
            )
        )
    )   
)

```

其中“类别”应在每个父“类型”中按字母顺序排序

我试过了

```
$modules = Hash::combine($modules, '{n}', '{n}.{n}', '{s}.{s}.{n}.zone');
```

但没有成功。我想我没有像我应该使用的那样使用 Hash::combine ......
谢谢，Marius

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:17:19.160

只需在 foreach 中使用 foreach 遍历您的数组并根据您的偏好构建一个新数组。

# python - 获取指向我在长类型值中具有虚拟地址的内存的指针

> ID：13567697
> 
> 赞同：1
> 
> 时间：2012-11-26T15:15:27.620
> 
> 标签：python, ctypes, virtual-address-space

我使用函数调用分配了一个内存，它返回了 64 位物理地址。我已经使用函数调用映射了该地址，该函数调用返回了 64 位虚拟地址。

现在，我需要一个指针来访问这个内存，我在 Python 中有一个长类型值的虚拟地址，我尝试使用 ctypes 模块指针（）强制转换，但最终访问了一些令人难以置信的内存

我是这样访问的：

```
VA = Virtual address I got
VA = ctypes.c_uint64(VA)
pVA = pointer(VA)

for i in range(size):
    print pVA[i] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T23:59:25.370

下面的代码从指定地址构建一个*大小*元素的无符号 64 位整数数组：

```
arr = (ctypes.c_uint64*size).from_address(VA)
for i in arr:
    print i 
```

参考：[from_address](http://docs.python.org/3/library/ctypes.html?highlight=from_address#ctypes._CData.from_address)

# excel - 基于组合框值的自动过滤器？

> ID：13567701
> 
> 赞同：0
> 
> 时间：2012-11-26T15:15:42.620
> 
> 标签：excel, vba

我想在“问题状态”列上方放置一个组合框，以根据从该列中选择的值过滤整个工作表。理想情况下，组合框将具有三个选项——“打开”、“关闭”和“任何”。

我该怎么做呢？

我尝试了以下代码：

```
Private Sub ComboBox1_Change()
    Dim sFilter As String
    sFilter = ActiveSheet.DropDowns(Application.Caller).List(ActiveSheet.DropDowns(Application.Caller).Value)
    On Error Resume Next
    ActiveSheet.AutoFilterMode = False
    ActiveSheet.UsedRange.AutoFilter 1, sFilter
End Sub 
```

但是，这会引发错误： `Run-time error 1004: Unable to get the DropDowns property of the worksheet class.`

此外，它在组合框中多次列出值。例如，组合框的索引 1 =“Open”，索引 2 也 =“Open”，等等。我只想显示不同的值并根据它进行过滤。

有更好的方法吗？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:20:12.043

只需使用过滤器，数据>过滤器。

![在此处输入图像描述](../Images/82f16d3bec284ac49c88c97023fc9731.png)

# android - 如何使用 Robotium 单击自定义 ActionbarSherlock 视图

> ID：13567707
> 
> 赞同：2
> 
> 时间：2012-11-26T15:16:03.203
> 
> 标签：android, actionbarsherlock, robotium

我正在使用 Robotium 为我的应用程序编写测试用例。该应用程序使用 ActionbarSherlock 将 Actionbar 移植到 4.0 之前的版本上。然而，ActionBar 项目似乎总是难以捉摸。我尝试使用这个项目 - [https://github.com/atermenji/robotium-actionbarsherlock](https://github.com/atermenji/robotium-actionbarsherlock)但自定义操作栏没有太多运气。我尝试了以下代码：

```
solo.clickOnVisibleActionbarItem(com.vtcreator.android360.R.id.notification_icon); 
```

R.id.notification_icon 是自定义操作栏布局中定义的按钮。

任何有Robotium和ABS经验的人？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T09:00:40.247

由于无论如何您都可以访问源代码，因此您可以选择在视图级别访问 ActionBar 项。

```
View actionbarItem1 = solo.getView(R.id.notification_icon);
solo.clickOnView(actionbarItem1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T20:00:46.937

在我当前使用操作栏将返回键和三个操作菜单项作为图像按钮放置的项目中，以下代码运行良好 -

```
// Selecting Back function button on Action Bar
// com.main.myapp is the package name of the main application which is under test.
ActionBarView actionBar = (ActionBarView)solo.getView(com.main.myapp.R.id.abs__action_bar);
ImageView backUpKey = (ImageView)actionBar.findViewById(com.main.myapp.R.id.abs__home);
solo.clickOnView(backUpKey);

// Click on Tools Icon on Action Bar Menu
solo.clickOnImageButton(2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-27T11:35:12.453

这是更好的处理方式：

这应该与 lib robotium-actionbarsherlock @ [https://github.com/atermenji/robotium-actionbarsherlock一起使用](https://github.com/atermenji/robotium-actionbarsherlock)

```
if (Build.VERSION.SDK_INT < 11) 
 solo.clickOnActionBarHomeButtonCompat();
else 
 solo.clickOnActionBarHomeButton(); 
```

# html - 背景视频高清质量html5

> ID：13567711
> 
> 赞同：1
> 
> 时间：2012-11-26T15:16:20.330
> 
> 标签：html, video, background

我在使用 html 或任何其他方式播放高清质量的视频时遇到问题..

[http://www.baked.ag](http://www.baked.ag)

问题是当您压缩到 .ogg .mp4 时，视频质量会下降..

有没有人找到以这种方式播放高清视频的解决方案？

任何帮助表示赞赏

# jsf-2 - 背景图像：CSS h:outputStylesheet 中的 url("") 未加载

> ID：13567714
> 
> 赞同：24
> 
> 时间：2012-11-26T15:16:44.293
> 
> 标签：jsf-2, resources, background-image, outputstylesheet

抱歉，如果没有正确提出问题。图像在 struts 项目中显示良好，但在 JSF2 项目中却没有。所有的 CSS 和按钮都渲染得很好`except image that has url in css`。

**文件夹结构**

```
resources -> css -> bootstrap.min.css
resources -> img -> glyphicons-halflings.png 
```

**bootstrap.min.css**

```
background-image: url("../img/glyphicons-halflings.png"); 
```

**1 -** 如果我使用`<h:outputStylesheet library="css" name="bootstrap.min.css"/>`生成的背景图像 url，则`http://localhost:8000/img/glyphicons-halflings.png`图像未加载。它应该是`http://localhost:8000/resources/img/glyphicons-halflings.png`

**2 -**如果我使用`<link href="#{request.contextPath}/resources/css/bootstrap.min.css" rel="styleSheet" type="text/css"/>`比

*Firefox -> Firebug -> 网络标签 {资源添加多次}*

```
http://localhost:8000/resources/resources/img/glyphicons-halflings.png 
```

不知道如何加载 css 中并应用于类的图像。

***将编辑图标显示为链接以单击下一页。***

```
 <h:outputLink value="edit.xhtml" >
                            <i class="icon-edit" ></i>
                            <f:param name="id" value="#{person.id}"/>
                        </h:outputLink> 
```

![图像](../Images/019624145a5e6b21c6e8f9431a71e9a8.png)

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-26T19:28:25.783

您应该`#{resource}`在 CSS 中使用 EL 变量来指定图像资源。

```
background-image: url("#{resource['img/glyphicons-halflings.png']}"); 
```

### 也可以看看：

*   [如何将 JSF 图像资源引用为 CSS 背景图像 url](https://stackoverflow.com/questions/6925733/changing-the-image-of-a-hcommandbutton-using-css/6926193#6926193)

# objective-c - Objective C 实例中指针的位置

> ID：13567717
> 
> 赞同：2
> 
> 时间：2012-11-26T15:16:50.237
> 
> 标签：objective-c, reflection, decomposition

我正在设计自动持久对象，为此我需要（a）定位指针成员，（b）找到它们的位置。编译器有这些信息，我希望反射会提供它，但我不知道该怎么做。例如，如果一个对象从地址 505060 开始

```
@interface MyClass : NSObject {

  NSString *name; // class offset 4B,  member address 505064
  int code;
  MyClass *next;  // class offset 12B, member address 505072
}
@end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T15:22:35.290

ivar 相对于其拥有对象地址的位置是一个实现细节。虽然它是一个*定义明确的*实现细节，但知道 ivar 的偏移量的实际理由很少。

如果您*真的*需要知道 ivar 在哪里，请查看 Objective-C 运行时函数`class_getInstanceVariable()`和`ivar_getOffset()`. 但是，如果您告诉我们您正在尝试做什么，我们可能会建议一种更聪明的方法来解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:20:24.757

您可以通过获取对字段的引用轻松获取字段的地址：

```
@interface MyClass : NSObject
{    
  NSString *name; // class offset 4B,  member address 50564
  int code;
  MyClass *next;  // class offset 12B, member address 50572 
} 
@end

void *pointer = &name; 
```

或者您可以直接使用 ObjectiveC 运行时（请参阅 Jonhatan 答案）

但这**不是在 ObjectiveC 中应该如何实现持久性**，因为你有这个`NSCoding`和这样的东西。对具有 vtables 等的 ObjectiveC 实例进行低级处理并不是一个好主意。如果你真的想在低级别实现持久性，我建议你使用类似[备忘录](http://en.wikipedia.org/wiki/Memento_pattern)模式的东西来拥有一个与实现分离的内部状态，并且可以纯粹在 C 中实现。

# php - Magento模板中当前对象的PHP Docblock类型提示？

> ID：13567725
> 
> 赞同：1
> 
> 时间：2012-11-26T15:17:25.610
> 
> 标签：php, magento, netbeans, docblocks

我如何`$this`使用 DocBlock 暗示 Magento 模板的上下文中的内容？

例如，`head.phtml`目录`template/page/html/`中有一个`Mage_Page_Block_Html_Head`. 我尝试的方法是：

```
<?php
/**
 * @var $this Mage_Page_Block_Html_Head
 */
?> 
```

*不幸的是，我的 IDE ( NetBeans* )似乎没有收到提示。所以我的问题是，是否有正确的方法可以让 NetBeans 识别提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T16:27:08.187

Netbeans 应该接受它，至少我的 6.9 版

```
/* @var $this Bar */ 
```

做这个：

![在此处输入图像描述](../Images/5503bbb8529cebc08b2308bf2545a505.png)

这是包含场景的示例（周围没有类）。

注意使用单行 - 单星号 - 类型 - 注释。

还要注意 Netbeans 更新了索引。与您的情况一样：

> 在这种情况下，NetBeans 必须扫描更改，我原以为它会自动完成。[...]。就我而言，它只会定期扫描。

* * *

Docblock 变量提示相关：

*   [如何让我的 PHP IDE 理解依赖注入容器？](https://stackoverflow.com/questions/6395737/how-do-i-make-my-php-ide-understand-dependency-injection-containers)

# joomla - Joomla 2.5：错误 500：内部服务器错误

> ID：13567726
> 
> 赞同：3
> 
> 时间：2012-11-26T15:17:31.777
> 
> 标签：joomla, error-handling, joomla2.5, internal-server-error

我已经有网站，想在网站上做很多改变。所以我进行了akeeba备份并在本地创建了站点。

当我创建网站时，我收到错误为`Internal Server Error`. 为了解决该错误，我删除了 .htaccess 文件中的所有内容。现在网站在本地工作，但管理员不工作。

我遵循了[相同问题的答案](https://stackoverflow.com/questions/8225027/500-internal-server-error-at-back-end-joomla)，但是它不起作用。

***谁能指出，我哪里出错了？无论如何，我需要这样做。***

* * *

## 编辑 1

下面是我所拥有的`apache_error.log`

```
[Thu Nov 29 10:22:34 2012] [notice] Digest: generating secret for digest authentication ...
[Thu Nov 29 10:22:34 2012] [notice] Digest: done
[Thu Nov 29 10:22:34 2012] [notice] Apache/2.2.21 (Unix) mod_ssl/2.2.21 OpenSSL/0.9.8r DAV/2 PHP/5.3.6 configured -- resuming normal operations
[Thu Nov 29 10:23:29 2012] [error] [client ::1] (2)No such file or directory: Could not open password file: /home5/smartkwc/public_html/administrator/.htpasswd
[Thu Nov 29 11:02:33 2012] [error] [client ::1] (2)No such file or directory: Could not open password file: /home5/smartkwc/public_html/administrator/.htpasswd
[Thu Nov 29 11:03:28 2012] [error] [client ::1] (2)No such file or directory: Could not open password file: /home5/smartkwc/public_html/administrator/.htpasswd 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:09:47.120

我解决了问题！！！

早些时候我`.htaccess`只从根文件夹中删除了内容。现在，当我`.htaccess`从管理员文件夹中删除所有内容时，一切正常。:) :) :)

嘻嘻！！！

# php - 将 prestashop 订单保存为文本文件

> ID：13567730
> 
> 赞同：0
> 
> 时间：2012-11-26T15:17:40.253
> 
> 标签：php, printing, sms, prestashop

客户订购后，有什么方法可以将订单保存为文本（txt）文件？因为我正在为短信打印机制作一个系统，需要在订单打印出来之后打印出来，但只有两种方式..在一个像这样的混乱字符串中：

```
#55*2*27*Quantity,Order name%%%%,*;;39.00;;Firstname lastname;;;;7;;12232255*# 
```

像这样，或者订单可以保存为 txt 格式，打印机可以从中读取。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:02:36.987

您将需要使用包含对象 objOrder 的钩子“hookOrderConfirmation”。

问候

# ios - 如何在两个单独的图层上绘制iOS，coregraphics

> ID：13567733
> 
> 赞同：0
> 
> 时间：2012-11-26T15:17:40.680
> 
> 标签：ios, cocoa-touch, core-graphics, quartz-graphics

我需要帮助绘制这样的东西： ![在此处输入图像描述](../Images/b650e2bb517e2740e7c9681f842896ad.png)

有人告诉我灰色背景条和紫色条应该绘制在不同的图层上。然后那里的点表示一本书的章节（这个滑块是关于）将在这两个之上的一层。

我已经完成了在活动栏上创建渐变并绘制它的任务，如下所示：

```
- (void)drawRect:(CGRect)rect{
    self.opaque=NO;

    CGRect viewRect = self.bounds;
    //NSLog(@"innerRect width is: %f", innerRect.size.width);
    CGFloat perPageWidth =  viewRect.size.width/[self.model.book.totalPages floatValue];
    NSLog(@"perpage width is: %f", perPageWidth);
    CGContextRef context = UIGraphicsGetCurrentContext();

    UIBezierPath *beizerPathForSegment= [UIBezierPath bezierPath];

    NSArray *arrayFromReadingSessionsSet =[self.model.readingSessions allObjects];
    NSArray *arrayFromAssesmentSet = [self.model.studentAssessments allObjects];
    NSLog(@"array is : %@", self.model.readingSessions);

    CGGradientRef gradient = [self gradient];

    for (int i=0;i<[arrayFromReadingSessionsSet count]; i++) {

        ReadingSession *tempRSObj= [arrayFromReadingSessionsSet objectAtIndex:i];
        CGFloat pageDifference = [tempRSObj.endPage floatValue]-[tempRSObj.startPage floatValue];
        NSLog(@"startpage is: %@, end page is: %@, total pages are: %@", tempRSObj.startPage, tempRSObj.endPage, self.model.book.totalPages) ;

        CGRect ProgressIndicator = CGRectMake(perPageWidth*[tempRSObj.startPage floatValue], viewRect.origin.y, perPageWidth*pageDifference, viewRect.size.height);

       [beizerPathForSegment appendPath:[UIBezierPath bezierPathWithRoundedRect:ProgressIndicator cornerRadius:13.0]];
}
[beizerPathForSegment addClip];

    CGContextDrawLinearGradient(context, gradient, CGPointMake(CGRectGetMidX([beizerPathForSegment bounds]), CGRectGetMaxY([beizerPathForSegment bounds])),CGPointMake(CGRectGetMidX([beizerPathForSegment bounds]), 0), (CGGradientDrawingOptions)NULL);
} 
```

我如何将它转移到一个图层上，然后创建另一个图层和另一个图层，然后将它们相互叠加？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:41:30.547

我猜与您交谈的人指的是[CALayer](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CALayer_class/Introduction/Introduction.html)。在 iOS 中，每个视图都有一个 CALayer 支持它。`-drawRect:`不要在您的视图中实施，而是执行以下操作：

1.  [与 QuartzCore 链接](https://stackoverflow.com/a/10343287/255489)
2.  `#import <QuartzCore/QuartzCore.h>`任何你想使用它的地方。
3.  用于您的视图的[`layer`](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instp/UIView/layer)属性。

图层的行为很像视图，因为您可以拥有子图层和超级图层，并且图层具有背景颜色等属性，并且可以设置动画。可能对您的目的有用的几个子类是[`CAGradientLayer`](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CAGradientLayer_class/Reference/Reference.html)和[`CAShapeLayer`](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CAShapeLayer_class/Reference/Reference.html)。有关如何使用图层的更多信息，请参阅[核心动画编程指南](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Introduction/Introduction.html)。

# apache-flex - 在flex中调用win32 API来访问网络上的文件

> ID：13567740
> 
> 赞同：1
> 
> 时间：2012-11-26T15:18:04.837
> 
> 标签：apache-flex, winapi, air, flash-builder

我正在使用 Adob​​e Air3.5。在 Flex 上创建我的桌面应用程序。
我的目的是访问我在网络上的文件夹并且需要身份验证才能访问。但是找不到任何解决此问题的方法。
对此有何看法？作为解决方案，如何在 flex 中使用 win API？

提前致谢

# mysql - 将多列查询转换为行

> ID：13567743
> 
> 赞同：2
> 
> 时间：2012-11-26T15:18:31.377
> 
> 标签：mysql, sql, database

我有两个要合并的查询，但我不知道如何合并。

`Select father, mother, guardian from students where user_id = '201209291';`

我得到 3 个 ID 的结果。

现在，我需要使用这三个 ID 来获取他们的个人信息；

`Select * from system_users where user_id = (The 3 IDs from the previous query);`

我将如何解决这个问题？我认为第一个查询的结果为 3 行，但我也不知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T15:22:21.793

```
Select * from system_users where user_id IN
(
Select father from students where user_id = '201209291'
UNION
Select mother from students where user_id = '201209291'
UNION
Select guardian from students where user_id = '201209291'
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T15:27:48.677

好吧，您可以直接使用连接谓词中的一系列`OR`s 进行连接，只要system_users 中的`father`、`mother`和`guardian`列实际上是s 即可。`user_id`

```
select usrs.*
from students s 
join system_users usrs on 
    s.father=usrs.user_id OR
    s.mother=usrs.user_id OR
    s.guardian=usrs.user_id
where s.user_id = '201209291'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T15:22:16.850

你为什么不使用加入？

```
Select father, mother, guardian from students as s
join system_users usrs
on s.user_id=usrs.user_id
where s.user_id = '201209291'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T15:59:16.563

从第一个查询开始，您将没有 ID，而是 3 列。

`Select father, mother, guardian from students where user_id = '201209291'`.

大概你的意思

`Select distinct some_id from students where user_id = '201209291'`

我建议简单：

`Select * from system_users where user_id in (Select distinct some_id from students where user_id = '201209291');`

*   我是否正确理解了这个问题？

# r - 将列表转换为一行 data.frame

> ID：13567754
> 
> 赞同：7
> 
> 时间：2012-11-26T15:19:10.620
> 
> 标签：r, list, dataframe

我有一个这样的列表：

```
arg0 <- list(code = "a", n = rep(10, 3)) 
```

列表中的对象数量是可变的。列表的对象是向量——只有一维对象。

我想制作一个程序将列表转换为单行 data.frame，如下所示：

```
> data.frame(code = "a", n.1 = 10, n.2 = 10, n.3 = 10)
  code n.1 n.2 n.3
1    a  10  10  10 
```

我目前有这个解决方案：

```
a <- stack(arg0)
b <- data.frame(t(a[,1]))
names(b) <- a[,2]
b <- data.frame(b) 
```

`b`我想要达到的结果几乎在哪里：

```
> b
  code  n n.1 n.2
1    a 10  10  10 
```

两个问题：

1.  有没有更优雅的方法来实现结果？
2.  你知道如何获得重复的 colnames 的编号`c(n.1, n.2, n.3)`吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-26T15:27:38.593

这是一种方式：

```
data.frame(t(unlist(arg0)))
#   code n1 n2 n3
# 1    a 10 10 10 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-26T15:43:45.603

如果要保留列表对象的不同数据类型，可以使用以下命令：

```
data.frame(lapply(arg0, function(x) t(data.frame(x)))) 
```

输出：

```
 code n.1 n.2 n.3
x    a  10  10  10 
```

第二到第四列中的值仍然是数字。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-26T15:27:12.883

您可以在转置的未列出数据上使用`write.table`和的组合。`read.table`我已将剪贴板用作固定表格的中间步骤。

```
write.table(t(unlist(arg0)),"clipboard")
read.table("clipboard")
  code n1 n2 n3
1    a 10 10 10 
```

# c# - 接受与代理服务器异步的连接

> ID：13567757
> 
> 赞同：0
> 
> 时间：2012-11-26T15:19:14.387
> 
> 标签：c#, sockets, asynchronous

当我想为每个传入请求打开一个新线程时。这是一个好方法吗？每个接受的请求都会有一个新线程吗？在这段代码末尾调用的 BeginReceive 方法也可以异步工作。

```
public void Listen(IPEndPoint EndPoint)
    {
        try
        {
            ListeningSocket.Bind(EndPoint);
            ListeningSocket.Listen(BACKLOG);
            BeginAccept();
        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message + "\nfrom Source: " + e.Source + "\nand Stack Trace: " + e.StackTrace);
        }
    }

    public void BeginAccept()
    {
        try
        {
            ListeningSocket.BeginAccept(new AsyncCallback(Accept_Callback), new ServerSocket());
        }
        catch (SocketException e)
        {
            Console.WriteLine("Listening Socket Error:" + e.ErrorCode);
        }
        catch (ObjectDisposedException e)
        {
            Console.WriteLine("The Listening Socket has been closed");
        }
    }

    private void Accept_Callback(IAsyncResult asyncResult)
    {
        BeginAccept();
        try
        {
            if (asyncResult.AsyncState != null)
            {
                ServerSocket serverSocket = asyncResult.AsyncState as ServerSocket;
                if ((serverSocket.CommunicationSocket = ListeningSocket.EndAccept(asyncResult)) != null)
                {

                    BeginReceive(serverSocket);
                }
            }
        }
        catch (SocketException e)
        {
            Console.WriteLine("Listening Socket Error:" + e.ErrorCode);
        }
        catch (ObjectDisposedException e)
        {
            Console.WriteLine("The Listening Socket has been closed");
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:29:02.483

这种方法使用来自 ThreadPool 的线程，这是一件好事。在等待新客户端被接受或数据到达时，不使用线程，因此当您连接了 1000 个客户端时，您的代码不会跨越 1000 个线程。

就在数据到达一个套接字时，将从线程池中取出一个空闲线程并处理您的回调。当您的方法完成时，线程将返回到池中，以供下一次数据到达或客户端连接使用。

# actionscript-3 - 在另一个开关动作中切换 3

> ID：13567759
> 
> 赞同：0
> 
> 时间：2012-11-26T15:19:24.887
> 
> 标签：actionscript-3, flash

我有这行代码很长，我想知道这些代码是否可以从中转换

```
if(BtnInteracted == "New"){
        if(sample_1.SaveSlotNumber == "1"){
            if(){

            }
            else{

            }
        }
        else if(sample_1.SaveSlotNumber == "2"){
            if(){

            }
            else{

            }
        }
        else if(sample_1.SaveSlotNumber == "3"){
            if(){

            }
            else{

            }
        }
    }

    else if (BtnInteracted == "Con"){
        if(sample_1.SaveSlotNumber == "1"){
            if(){

            }
            else{

            }
        }
        else if(sample_1.SaveSlotNumber == "2"){
            if(){

            }
            else{

            }
        }
        else if(sample_1.SaveSlotNumber == "3"){
            if(){

            }
            else{

            }
        }
    } 
```

对此。

```
switch(BtnInteracted){
    case "New": switch (sample_1.SaveSlotNumber){
                    case "1": //if() else() statement;
                    case "2": //if() else() statement;
                    case "3": //if() else() statement;
                } break;

    case "Con": switch (sample_1.SaveSlotNumber){
                    case "1": //if() else() statement;
                    case "2": //if() else() statement;
                    case "3": //if() else() statement;
                } break;
} 
```

甚至可以制作此代码还是我的原始代码是我唯一的选择？感谢您的回复！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T21:52:28.550

你必须小心这些`break`陈述，但它会起作用。您可以嵌套开关，但我个人认为内部开关不是更具可读性；我更喜欢将东西传递给函数：

```
switch(BtnInteracted)
{
    case "New": 
    {
       startFrom(sample_1.SaveSlotNumber);
       break;
    }
    case "Con": 
    {
       continueFrom(sample_1.SaveSlotNumber);
       break;
    }
} 
```

然后在按钮中使用一个新的开关

```
function startFrom(index:int):void
{
  trace("start from ", index);
  switch(index)
  {
    case 1: 
    {
       // do something
       break;
    }
    case 2: 
    {
       // do something
       break;
    }
  }
}

function continueFrom(index:int):void
{
  trace("continue from", index);
  switch(index)
  {
    case 1: 
    {
       // do something
       break;
    }
    case 2: 
    {
       // do something
       break;
    }
  }
} 
```

在很多情况下，您需要多次使用该功能和其他输入，这样您就不必重复自己，并且清楚地知道特定*情况下*会发生什么。

# python - Python中的半双工串行通信

> ID：13567761
> 
> 赞同：6
> 
> 时间：2012-11-26T15:19:29.613
> 
> 标签：python, linux, serial-port, usbserial

我有一个带有内置 USB/串行适配器的设备（显示为 Prolific PL2303）。设备文档提供了有关如何与其通信的完整详细信息，并提供了一个示例 Windows 应用程序。但是，我需要在 Linux 上使用它——最好是使用 Python，但我对此并不太重视。

设备文档声明该设备以 9600、8N1 半双工运行。Windows 应用程序运行良好 - 设备运行良好（所以我知道这不是设备问题）。但是，我无法在 Linux 上使用 Python 与它进行通信。我正在使用 pySerial，并且我尝试了一个类似的（全双工，也是 PL2303）设备，它工作正常。

我尝试了设置 xonxoff、rtscts 等的几种组合。我还尝试使用 setRTS(True) 切换 RTS 并检查 CTS 和 DSR 等 - 全部返回 False。我可以使用 pySerial 成功打开设备（我可以看到活动指示灯闪烁 - 简单但有效的测试）如果您在读/写期间拔下它，pySerial 会抱怨。

我设置什么标志/行或发送什么数据似乎并不重要，总是得到相同的结果。

```
>>> s=serial.Serial()
>>> s.port('/dev/ttyUSB1')
>>> s.open()
>>> s
Serial<id=0x7fe94b533b50, open=True>(port='/dev/ttyUSB1', baudrate=9600, bytesize=8, parity='N', stopbits=1, timeout=3, xonxoff=0, rtscts=0, dsrdtr=0)
>>> s.write('\2CMD2292\r')  
>>> s.inWaiting()
0
>>> s.setRTS(True)
>>> s.getCTS()
False
(several iterations of above with different flags). 
```

忽略写命令中的数据——这只是一个状态检查命令。不管那里有什么，设备应该以答案或错误响应。

我什至在设置各种 ctsrts 标志等之间关闭并重新打开设备，然后拔下/重新插入它以强制重置。如上所述，它继续使用 Windows 测试应用程序正常工作。我不能使用 Portmon 等来嗅探 Windows 端口流量，因为它是 64 位 Win7 安装，而且我目前没有时间构建 XP 机器。

有什么想法吗？

更新：我还在演示应用程序所在的同一个 Windows 机器上使用 Python 尝试了上述所有方法。它肯定会打开端口并进行通信，但无论写入什么内容，都不会返回任何信息。

UPDATE2：看起来它可能与设备驱动程序相关。一些额外的背景研究表明，一些 PL2303 芯片具有支持半双工的功能，但这不受 Linux 驱动程序的支持。Windows 演示应用程序附带一个专用设备驱动程序，并且该应用程序无法在使用默认 Windows 驱动程序的干净测试机器上运行。这让我觉得虽然我可以通过 Python 成功连接到它，但我无法控制双工通信（例如，即使以 STX/ETX 方式），因此这可能是一个绝望的案例。 *叹息*。

UPDATE3：感谢以下评论。但是，我找不到任何解决方法。我尝试了 USB 协议分析器，并尝试拆卸驱动程序，但它变得相当耗时，所以最后我将设备拆开，经过一些修补后，我设法用合适的 PL2303 部件替换了现有的 USB 串行适配器- 在设备方面，它只是一个基本的 2 线串行接口，所以它不关心与它交谈的内容。我似乎无法结束这个问题，所以我会保持原样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:03:07.007

尝试

```
s.flush() 
```

就在您的 s.write 通话之后

# ruby-on-rails-3 - 尝试将 thumbshooter 作为 gem 安装后不是 Gem::Specification 错误

> ID：13567763
> 
> 赞同：2
> 
> 时间：2012-11-26T15:19:37.627
> 
> 标签：ruby-on-rails-3, gem, rvm

每次我运行 rake 或 bundle 时，我都会收到以下错误消息：

```
.rvm/gems/ruby-1.9.2-p290/specifications/thumbshooter-0.1.5.gemspec] isn't a Gem::Specification (NilClass instead). 
```

这在我尝试将 thumbshooter 安装为 gem 之后开始发生。

我试图卸载 gem，但这似乎没有任何效果。无论如何似乎都没有安装thumbshooter。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T17:46:15.737

尝试：

```
rm $rvm_path/gems/ruby-1.9.2-p290/specifications/thumbshooter-0.1.5.gemspec 
```

# javascript - 在meteor.js 中使用继承

> ID：13567764
> 
> 赞同：13
> 
> 时间：2012-11-26T15:19:41.210
> 
> 标签：javascript, model-view-controller, inheritance, meteor

我一直希望在 Meteor 中使用继承，但我在文档或 Stack Overflow 上找不到任何关于它的信息。

是否可以让模板从另一个抽象模板或类继承属性和方法？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-14T00:25:47.087

我认为简短的答案是否定的，但这里有一个更长的答案：

我为在模板之间共享功能所做的一件事是定义一个助手对象，然后将其分配给多个模板，如下所示：

```
var helpers = {
    displayName: function() {
        return Meteor.user().profile.name;
    },
};

Template.header.helpers(helpers);
Template.content.helpers(helpers);

var events = {
    'click #me': function(event, template) {
        // handle event
    },
    'click #you': function(event, template) {
        // handle event
    },
};

Template.header.events(events);
Template.content.events(events); 
```

确切地说，它不是继承，但它确实使您能够在模板之间共享功能。

如果您希望所有模板都可以访问帮助程序，您可以像这样定义一个全局帮助程序（请参阅[https://github.com/meteor/meteor/wiki/Handlebars](https://github.com/meteor/meteor/wiki/Handlebars)）：

```
Handlebars.registerHelper('displayName',function(){return Meteor.user().profile.name;}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T17:34:37.670

我已经[在这里](https://stackoverflow.com/a/15601657/32495)回答了这个问题。虽然该解决方案不使用`inheritance`，但它允许您轻松地跨模板共享事件和帮助程序。

简而言之，我定义了一个`extendTemplate`函数，它接收一个模板和一个带有帮助器和事件作为参数的对象：

```
extendTemplate = (template, mixin) ->
  helpers = ({name, method} for name, method of mixin when name isnt "events")
  template[obj.name] = obj.method for obj in helpers

  if mixin.events?
    template.events?.call(template, mixin.events)

  template 
```

有关更多详细信息和示例，请参阅我的[其他答案](https://stackoverflow.com/a/15601657/32495)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-09T20:27:48.057

Recently, I needed the same functionality in my app so I've decided to create my own package that will do that job out of the box. Although it's still work in progress, you can give it a go.

Basically, the entire method is as follows:

```
// Defines new method /extend
Template.prototype.copyAs = function (newTemplateName) {
    var self = this;

    // Creating new mirror template
    // Copying old template render method to keep its template
    var newTemplate = Template.__define__(newTemplateName, self.__render);
    newTemplate.__initView = self.__initView;

    // Copying helpers
    for (var h in self) {
        if (self.hasOwnProperty(h) && (h.slice(0, 2) !== "__")) {
            newTemplate[h] = self[h];
        }
    }

    // Copying events
    newTemplate.__eventMaps = self.__eventMaps;

    // Assignment
    Template[newTemplateName] = newTemplate;
}; 
```

In your new template (new_template.js) in which you want to extend your abstract one, write following:

```
// this copies your abstract template to your new one
Template.<your_abstract_template_name>.copyAs('<your_new_template_name>'); 
```

Now, you can simply either overwrite your helpers or events (in my case it's `photos` helper), by doing following:

```
Template.<your_new_template_name>.photos = function () {
    return [];
}; 
```

Your will refer to overwritten helper methods and to abstract ones that are not overwritten.

Note that HTML file for new template is not necessary as we refer to abstract one all the time.

Source code is available on Github [here](https://github.com/grabbou/meteor-template-extend)!

# java - 文本用户界面，无法获得工作方法

> ID：13567765
> 
> 赞同：1
> 
> 时间：2012-11-26T15:19:40.860
> 
> 标签：java, text, interface

我有一个使用 BlueJ 执行的任务，我得到了一个名为 HW4CustomerList 的类，我必须为它创建一个基于文本的 UI。我必须创建的类名为 CustomerTUI，它包含一个名为 addCustomer 的方法，该方法将我的新客户对象添加到 ArrayList。这种方法尤其是我所坚持的。类规范说我不能接受任何参数（即无参数方法）。在之前的工作中，我们使用了 BlueJ 的“方法框”来与对象交互并将它们添加到 ArrayLists，但是我不知道这是否可以在这个特定的实例中使用。请在下面找到我的 CustomerTUI 代码以及 Customer 类和 HW4CustomerList 类的代码。提前谢谢了。

CustomerTUI 类：

```
import java.util.Scanner;

public class CustomerTUI
{
private HW4CustomerList customerList;
private Scanner myScanner;

public CustomerTUI()
{
    customerList = new HW4CustomerList();
    myScanner = new Scanner(System.in);
}

public void menu()
{
    int command;
    boolean running = true;

    while(running)
    {
        displayMenu();
        command = getCommand();
        execute(command);
    }
}

private void addCustomer()
{
    customerList.addCustomer();
}

private void displayMenu()
{
    System.out.println("            CustomerList program         ");
    System.out.println("=========================================");
    System.out.println("|Add a customer to the list..........[1]|");
    System.out.println("|Get number of customers.............[2]|");
    System.out.println("|Remove a customer from the list.....[3]|");
    System.out.println("|Show all customer details...........[4]|");
    System.out.println("|Show a specific customers details...[5]|");
    System.out.println("|Quit................................[6]|");
    System.out.println("=========================================");
}

private void execute(int command)
{
    if(command == 1)
    {
        addCustomer();
    }

    else if(command == 2)
    {
        getNumberOfCustomers();
    }

    else if(command == 3)
    {
        removeCustomer();
    }

    else if(command == 4)
    {
        showAllCustomers();
    }

    else if(command == 5)
    {
        showCustomer();
    }

    else if(command == 6)
    {
        quitCommand();
    }

    else
    {
        unknownCommand(command);
    }
}

private int getCommand()
{
    System.out.println("Enter the command of the function you wish to use: ");
    int command = myScanner.nextInt();
    return command;
}

private void getNumberOfCustomers()
{
    if(customerList.getNumberOfCustomers() == 1)
    {
        System.out.println("We have " + customerList.getNumberOfCustomers() + " customer.");
    }
    else
    {
        System.out.println("We have " + customerList.getNumberOfCustomers() + " customers.");
    }
}

private void quitCommand()
{
    System.out.println("The program is now closing down...");
    System.exit(0);
}

private void removeCustomer()
{
    String accNo;

    System.out.println("Enter the account number of the customer you wish to remove: ");
    accNo = myScanner.next();
    if (customerList.removeCustomer(accNo) == true)
    {
        System.out.println("Customer with account number " + accNo + " was successfully removed.");
    }
    else
    {
        System.out.println("Customer with account number " + accNo + " was NOT successfully removed.");
        System.out.println("Please try again.");
    }
}

private void showAllCustomers()
{
    customerList.getAllCustomers();
}

private void showCustomer()
{
    String accNo;

    System.out.println("Enter the account number of the customer you wish to view: ");
    accNo = myScanner.next();
    if(customerList.getCustomer(accNo) == false)
    {
        System.out.println("Could not find customer with account number " + accNo + ".");
    }
    else
    {
        return;
    }
}

private void unknownCommand(int command)
{
    System.out.println("Command number " + command + " is not valid. Please try again.");
}
} 
```

HW4CustomerList 类：

```
import java.util.*;

public class HW4CustomerList
{
private ArrayList<Customer> customers;    

public HW4CustomerList()
{
   customers = new ArrayList<Customer>();
}

public void addCustomer(Customer customer)
{
    customers.add(customer);
}

public int getNumberOfCustomers()
{
    return customers.size();
}

public boolean getCustomer(String accountNumber)
{
   for(Customer customer : customers)
   {
       if(accountNumber.equals(customer.getAccountNumber()))
       {
          customer.printCustomerDetails();
          return true;
      }
  }
  return false;
}

public void getAllCustomers()
{
    for(Customer customer : customers)
    {
        customer.printCustomerDetails();
        System.out.println("\n");
    }
}

public boolean removeCustomer(String accountNumber)
{
     int index = 0;
     for (Customer customer: customers)
     {
          if (accountNumber.equals(customer.getAccountNumber()))
        {
            customers.remove(index);
            return true;
        }
        index++;
    }
    return false;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:26:22.537

我认为您需要做的就是在您的 addCustomer() 方法中创建一个新的 Customer 对象。这可能需要获取更多详细信息：

```
public void addCustomer()
{
    Scanner scanner = new Scanner(System.in);
    System.out.println("Enter customer name: ");
    String name = scanner.nextLine();
    //any additional details
    Customer customer = new Customer(name, otherParams);
    customers.add(customer);
} 
```

希望有帮助！

# background - 背景显示清晰，内容显示模糊后。

> ID：13567766
> 
> 赞同：1
> 
> 时间：2012-11-26T15:19:47.920
> 
> 标签：background

我正在尝试做一个背景，起初它看起来很清晰，在内容出现之后，我希望它变得模糊。我希望这是在带有 Javascript 的 CSS 中，而不是 Flash。举个例子：[http](http://www.lanvin.com) ://www.lanvin.com （例子是flash）。这个有可能 ？如何 ？谢谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-10T19:33:16.970

`css`当所有内容加载用于`javascript`在顶部放置半透明但隐藏的图像时，您可以设置背景。

# jquery - 检查复选框是否被单击？

> ID：13567769
> 
> 赞同：0
> 
> 时间：2012-11-26T15:20:00.813
> 
> 标签：jquery

比如说我有以下内容：

```
<input type="checkbox" id="chk-box1" name="chk-box1" value="Check 1">Check 1

<input type="text" id="textbox1" name="textbox1" value=""> 
```

当单击“chk-box1”时，我可以设置文本框的值：

```
$('#chk-box1').change(function(){
    var chk = $(this);
    $('#textbox1').val("Textbox 1 is checked")('selected', chk.attr('checked'));
}) 
```

但是当未选中该框时，如何将文本框的值设置为空？`$('#textbox1').val("")`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T15:21:47.250

尝试使用`this.checked`属性

```
$('#chk-box1').change(function(){
    if (this.checked) {
       $('#textbox1').val("Textbox 1 is checked"); //('selected', chk.attr('checked'));
    } else {
       $('#textbox1').val("");
    }
}) 
```

或者简单地说，

```
$('#chk-box1').change(function(){
   $('#textbox1').val(this.checked?"Textbox 1 is checked":""); //('selected',     
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T15:21:07.550

试试这个，

**[现场演示](http://jsfiddle.net/yPQ55/1/)**

如果您想显示消息而不是 true 或 false。

```
$('#chk-box1').change(function(){      
    if(this.checked)
         $('#textbox1').val("Textbox 1 is checked");
    else
         $('#textbox1').val("");
}) 
```

# sql - 是否可以在 Access 的连接条件中使用子查询？

> ID：13567772
> 
> 赞同：11
> 
> 时间：2012-11-26T15:20:08.443
> 
> 标签：sql, ms-access, join, ms-access-2007, left-join

在 postgresql 中，我可以在连接条件下使用子查询

```
SELECT * 
FROM table1 LEFT JOIN table2
     ON table1.id1 = (SELECT id2 FROM table2 LIMIT 1); 
```

但是当我尝试在 Access 中使用它时

```
SELECT *
FROM table1 LEFT JOIN table2 
     ON table1.id1 = (SELECT TOP 1 id2 FROM table2); 
```

我收到语法错误。在 Access 中实际上是不可能的还是只是我的错误？

*我知道我可以得到相同的结果`WHERE`，但我的问题是关于`JOIN`Access 的可能性。*

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-26T15:29:46.317

[根据MSDN 文档](http://msdn.microsoft.com/en-us/library/office/bb208894%28v=office.12%29.aspx)，这是不可能的：

> 句法
> 
> 从表 1 [ 左 | RIGHT ] JOIN table2 ON table1.field1 compopr table2.field2

并且（强调我的）：

> field1, field2： **连接的字段的名称。**字段必须具有相同的数据类型并包含相同类型的数据，但它们不需要具有相同的名称。

看来您甚至不能在联接中使用硬编码值；您必须指定要加入的列名。

在你的情况下，你会想要：

```
SELECT *
FROM Table1
LEFT JOIN (
    SELECT DISTINCT TOP 1 ID 
    FROM Table2
    ORDER BY ID
) Table2Derived ON Table1.ID = Table2Derived.ID 
```

# android - Android：为什么如果我创建一个位图，将在一个进程中覆盖以前的位图，占用的内存会增加？我怎样才能避免它？

> ID：13567775
> 
> 赞同：0
> 
> 时间：2012-11-26T15:20:22.633
> 
> 标签：android, service, process, bitmap, ram

我有一个大问题。

我创建了一个以编程方式更新位图的服务。当创建一个新的位图时，以前的位图会保留在 RAM 内存中，因此经过一段时间后，此过程会占用大量 RAM。

我怎样才能保持相同的占用RAM？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:03:50.827

像这样的东西

```
if (mBitmap != null){
    mBitmap.recycle();
    mBitmap = null;
}

mBitmap = newBitmap; 
```

# javascript - 我如何使用 UglifyJs 来“编译”我的 Javascript 代码，而不仅仅是缩小它

> ID：13567779
> 
> 赞同：0
> 
> 时间：2012-11-26T15:20:29.440
> 
> 标签：javascript

首先，我知道 javascript 没有编译。Uglifyjs 作为一个编译器来发现可能的错误......现在我的问题

我刚刚下载/安装了 uglifyjs [https://github.com/mishoo/UglifyJS](https://github.com/mishoo/UglifyJS)。我想在缩小之前编译我的 javascript 代码。我有一个名为 badjs.js 的文件，它是：

```
 var a=10  //notice no semicolon
    a = b + 3;   // b is not declared
    alert('the value of a is ' + a); 
```

badjs.js 的前 2 行应该会导致 uglifyjs 对我吠叫，但事实并非如此。我运行这个：

```
 uglifyjs badjs.js 
```

它所做的只是输出缩小版。我如何告诉 uglifyjs 通知我错误？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-08T10:09:49.600

我知道这个线程已经过时了，但是当谷歌返回它时，我不得不提到现在我们有一个“--lint”选项：

```
uglifyjs main.js -o main.min.js --lint 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T22:04:51.867

它不应该对你“吠叫”。Uglify 遵循 js 规范，该规范说分号在行尾是可选的。Uglify 会在压缩时为你添加分号：

```
> uglifyjs --version
uglify-js 2.2.3
> uglifyjs ~/Desktop/test.js -c
var a=10;a=b+3,alert("the value of a is "+a); 
```

# internet-explorer - 用多个标签打开 IE

> ID：13567780
> 
> 赞同：1
> 
> 时间：2012-11-26T15:20:41.167
> 
> 标签：internet-explorer, autohotkey

我正在尝试创建一个可以添加到启动文件夹的 AutoHotkey 脚本，以使用多个预定选项卡打开 IE。我有几个我经常使用的工作网站，我希望在我第一次登录并加载这些页面时自动打开 IE。我已经搜索并找到了一些我尝试根据需要更改的 AHK，但我收到了错误。这是我尝试使用的代码：

```
Pwb :=  COM_CreateObject ("InternetExplorer.Application")
Pwb.Visible:=True
Pwb.Navigate("https://*****.org/***/") 
Pwb.Navigate2("https://*****", 2048)
Pwb.Navigate3("http://*****", 2048)
Pwb.Navigate4("http://*****", 2048)
Pwb.Navigate5("*****", 2048)
Pwb.Navigate6("*****", 2048)
Return 
```

当我启动它时，我收到错误“以下变量名包含非法字符：”Pwb.Visible“程序将退出。” 如果我尝试只删除那部分代码，则会在我的网站上收到错误消息：“错误：调用不存在的函数。具体而言：Pwb.Navigate("https://**.org/* **/") 程序将退出。"*

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:09:06.573

尝试这个。确保您拥有最新版本的 AutoHotkey (v1.1+)。`COM_CreateObject()`应该是`ComObjCreate()`，并且该对象中没有可用的 Navigate3、Navigate4 或 Navigate5... 方法。

```
Pwb :=  ComObjCreate("InternetExplorer.Application")
Pwb.Visible:=True
Pwb.Navigate("http://www.google.com") 
Pwb.Navigate("http://stackoverflow.com", 2048)
Pwb.Navigate("http://news.google.com", 2048)
Pwb.Navigate("https://www.quora.com/", 2048)
Return 
```*

# jquery - 将 li 添加到数组并使用 console.log 查看

> ID：13567784
> 
> 赞同：0
> 
> 时间：2012-11-26T15:20:52.840
> 
> 标签：jquery, arrays, console

我有一个简单的 ul 列表

```
 <ul id="gallery">
    <li><a href=""><img src="images/01.jpg" /></a></li>
    <li><a href=""><img src="images/02.jpg" /></a></li>
    <li><a href=""><img src="images/03.jpg" /></a></li>
    <li><a href=""><img src="images/04.jpg" /></a></li>
  </ul> 
```

我想将 li（及其内容）添加到数组中，然后删除 li，然后使用我正在使用的 console.log 查看数组。

```
 $(function(){

    var imgArr=[];

    $('#gallery li').each(function(){
      imgArr.push($(this));
      $(this).remove();
    })

    console.log(imgArr);

  }) 
```

我以为 console.log 会显示一个 li 包含的列表

```
 <a href=""><img src="images/01.jpg" /></a> 
```

相反，我得到了一个 Object[1] 的列表

这是添加 li 和内容的正确方法吗？

如何查看数组的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T15:22:37.547

您正在将 jQuery 对象推送到数组中。使用`imgArr.push(this)`而`imgArr.push($(this))`不是推送 DOM 节点。

演示：http: [//jsfiddle.net/5rAeH/](http://jsfiddle.net/5rAeH/)

在演示中，我删除了您的`.each`，而是使用了

```
var imgArr = $.makeArray($('#gallery li'));
console.log(imgArr);

$("#gallery li").remove();
console.log(imgArr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T15:23:07.620

将您的推送更改为

```
imgArr.push($(this).html()); 
```

现在您将 html 推送到数组而不是 Jquery 对象中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T15:28:58.640

您的代码需要修改，您只需在数组中添加“this”。

```
$(document).ready(function(){
  var imgArr=[];
  $('#gallery li').each(function(){
    imgArr.push(this);
    $(this).remove();
  })
  console.log(imgArr);
});​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T15:29:36.743

要将数组的内容打印为**html**（而不是 javascript 对象），请执行

```
$('#gallery li').each(function() {
    console.log(index + ': ' + $(this).html());
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T15:32:35.677

```
$(function(){
    var imgArr=[];

    $('#gallery li').each(function(i,elm){
        imgArr[i] = elm.outerHTML;
        $(elm).remove();
    });
    console.log(imgArr);
}); 
```

[**小提琴**](http://jsfiddle.net/J5rMN/)

# java - 将方法添加到Java中的生成类

> ID：13567785
> 
> 赞同：2
> 
> 时间：2012-11-26T15:20:54.273
> 
> 标签：java, methods, categories, auto-generate

我有在 Java 中自动生成的类。我想向该类添加一个方法（在另一个文件中），这样我就可以在不更改生成文件的情况下添加其他功能。这个想法是，如果我必须重新创建生成的文件，我不会失去我的新功能。

在 Objective-c 中我知道这称为类别，在 JavaScript 中您可以附加对象的原型，但我不知道如何在 Java 中执行此操作或它被称为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T15:25:19.477

这在 java 中不受支持。

[部分类/部分类文件](https://stackoverflow.com/questions/2764234/partial-classes-partial-class-file)

您可以做的一件事是继承生成的类（如果它不是最终类）并添加您的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T15:27:10.517

你可以只使用组合，即：

```
public class JasonString {
   String wrapped;

   public JasonString() {
      wrapped = new String();
   }

   public String toString() {
      return wrapped.toLowerCase().toString();
   }

   // other methods of wrapped class you're using should just call the corresponding method in wrapped.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T16:08:35.420

我同意@Itay 我曾经从 Ibatis 自动生成的类，解决您的问题的最佳方法是扩展所有生成的类并添加您想要的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T15:25:54.120

如果您无权访问生成的类，您可以尝试扩展它（如果生成的类不是最终类）并向子类添加新方法……Java 不支持动态属性作为 JavaScript。

# php - 为什么我不能插入用户名但可以插入ID

> ID：13567790
> 
> 赞同：-4
> 
> 时间：2012-11-26T15:21:06.227
> 
> 标签：php, mysql

在下面，我有代码并对其进行了很多编辑，除了数据库中的用户名字段没有更新之外，一切正常，数据库设置正确，我也尝试使用 session 而不是 vars。

请不要插入我在这里缺少的任何想法？

```
<?php
session_start();
?>
<?php 
//session_start();
$id = $_SESSION['user_id'];
$_SESSION['user_id']= $id;  
//$_SESSION['user_name'] = $full_name;
// $username = $_SESSION['user_name'];
//$username = $user_name;
$_SESSION['user_level'] = $user_level;
$_SESSION['HTTP_USER_AGENT'] = md5($_SERVER['HTTP_USER_AGENT']);
$_SESSION['session_name'] = $user_name;
/****************************************************************************** 
 * Copyright (C) 2012 J~Net                                                   *
 *                                                                            *
 * This script gathers information from the user, including, but not limited  *
 * to their IP, and how long they viewed the page.  It then records it to a   *
 * MySQL database for our records / to monitor traffic to a site.             *
 * Usage : require("tracker.php");             Last modified : Nov 24th, 2012 *
 ******************************************************************************
 * This source and program come as is, WITHOUT ANY WARRANTY and/or WITHOUT    *
 * ANY IMPLIED WARRANTY.                                                      *
 *                                                                            *
 * Users of said software should realize that they cannot and will not hold   *
 * bombthebox.com reliable or responsible for any purpose WHAT SO EVER.       *
 * Please read all documentation and use said software responsibly.           *
 *                                                                            *
\******************************************************************************/

/* Add the static code from the include file */
require("include.php");

/* Obtain and format the current date & time */
$date_time = date("Y-m-d H:i:s");

/* SQL Statement to find out if the visitor is new or existing */
$SQL = "SELECT COUNT(*) AS previous_visitor FROM $db_tabl WHERE ip_address='$REMOTE_ADDR';";

/* Execute the SQL statement */
$results = mysql_db_query($db_name, "$SQL", $connection);

/* Error trapping on SQL */
if (!$results)
  echo("ERROR: " . mysql_error() . "\n$SQL\n");

/* Obtain the data from the record set */
while ($row = mysql_fetch_array($results))
 $previous_visitor = $row["previous_visitor"];

/* If the user is existing, then do this stuff */
if ($previous_visitor > 0)
  {
    /* SQL Statement to pull the information on the user's last visit */
    $SQL = "SELECT * FROM $db_tabl WHERE ip_address='$REMOTE_ADDR' ORDER BY id ASC;"; //AND page_viewed='$HTTP_REFERER' 

    /* Execute the SQL statement */
    $results = mysql_db_query($db_name, "$SQL", $connection);

    /* Error trapping on SQL */
    if (!$results)
      echo("ERROR: " . mysql_error() . "\n$SQL\n");

    /* Pull the data from the record set */
    while ($row = mysql_fetch_array($results))
      {
        $last_id = $row["id"];
        $last_time = $row["date_time"];
      }

    /* Split up the last timestamp for this user */
    $year   = substr($last_time, 0, 4);
    $month  = substr($last_time, 5, 2);
    $day    = substr($last_time, 8, 2);
    $hour   = substr($last_time, 11, 2);
    $minute = substr($last_time, 14, 2);
    $second = substr($last_time, 17, 2);

    /* Convert the user's last timestamp into seconds */
    $previous_time = mktime($hour, $minute, $second, $month, $day, $year);

// session_start();
$user = $_SESSION['user_name'];
// $user_name = $data['user_name'];
$id = $_SESSION['user_id'];
$_SESSION['user_name'] = $full_name;
$user_ip = $_SERVER['REMOTE_ADDR'];
$rq= $_SERVER['REQUEST_URI'];
$_SESSION['session_name'] = $user_name = $un;
$un = $user_name = $_SESSION['user_name'];

//$username = $_SESSION['logged_username'];
$_SESSION['user_name'] = $full_name;
// $user = $full_name;
$username = $_SESSION['user_name'] = $yourname;
$info["user_name"] =  $yourname;
$yourname = $_SESSION['user_name'] = $username;

    /* Split up the current timestamp for this user */
    $year   = substr($date_time, 0, 4);
    $month  = substr($date_time, 5, 2);
    $day    = substr($date_time, 8, 2);
    $hour   = substr($date_time, 11, 2);
    $minute = substr($date_time, 14, 2);
    $second = substr($date_time, 17, 2);

    /* Convert the user's current timestamp into seconds */
    $current_time = mktime($hour, $minute, $second, $month, $day, $year);

    /* Calculate how much time as elapsed since their last visit */
    $time_difference = $current_time - $previous_time;
  }

/* Update the last record with the elapsed time, assuming the value is less than an hour. */
if ($time_difference != "" && $time_difference < 3600)
  {
    /* SQL Statement to update an existing record */
    $SQL = "UPDATE $db_tabl SET time_spent=$time_difference WHERE id='$last_id';";

    /* Execute the SQL statement */
    $results = mysql_db_query($db_name, "$SQL", $connection);

    /* Error trapping on SQL */
    if (!$results)
      echo("ERROR: " . mysql_error() . "\n$SQL\n");
  }

/* SQL Statement to insert the data */
$SQL = "INSERT INTO $db_tabl (ip_address, page_viewed, date_time, username, user_id) VALUES ('$user_ip', '$rq', '$date_time','$yourname','$id') ;";

/* Execute the SQL statement */
$results = mysql_db_query($db_name, "$SQL", $connection);

/* Error trapping on SQL */
if (!$results)
  echo("ERROR: " . mysql_error() . "\n$SQL\n");

/* Close off the database */
mysql_close($connection);

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T15:25:52.683

```
$username = $_SESSION['user_name'] = $yourname;
$info["user_name"] =  $yourname;
$yourname = $_SESSION['user_name'] = $username; 
```

$yourname 在此之前没有定义；所以你要为 $username 分配一个不存在的变量的值，然后第 3 行从第 1 行为空的 $username 重新分配 $yourname .... 那么你会期待什么？

# c# - 如何禁止选择交互式 ListBox 项？

> ID：13567794
> 
> 赞同：1
> 
> 时间：2012-11-26T15:21:12.467
> 
> 标签：c#, wpf, button, listbox

我的 ListBox 中的某些项目使用包含按钮和文本框的模板。我怎样才能使它不可能从列表中选择这些项目，但仍然可以与按钮交互？

编辑：

我仍然需要能够选择此列表中的其他项目，而不是使用此模板的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:00:53.367

我们可以使用 ListBoxItem 的附加属性（在我实现之后，我发现[有人做了几乎相同的事情](http://coderelief.net/2011/01/04/non-selectable-listboxitem-or-listviewitem-using-attached-properties/)）：

```
public class ListBoxItemEx
{
    public static bool GetCanSelect(DependencyObject obj)
    {
        return (bool)obj.GetValue(CanSelectProperty);
    }
    public static void SetCanSelect(DependencyObject obj, bool value)
    {
        obj.SetValue(CanSelectProperty, value);
    }
    public static readonly DependencyProperty CanSelectProperty =
        DependencyProperty.RegisterAttached("CanSelect", typeof(bool), typeof(ListBoxItemEx), new UIPropertyMetadata(true, OnCanSelectChanged));

    private static void OnCanSelectChanged(DependencyObject sender, DependencyPropertyChangedEventArgs args)
    {
        var item = sender as ListBoxItem;
        if (item == null)
            return;

        if ((bool)args.NewValue)
        {
            item.Selected -= ListBoxItemSelected;
        }
        else
        {
            item.Selected += ListBoxItemSelected;
            item.IsSelected = false;
        }
    }

    private static void ListBoxItemSelected(object sender, RoutedEventArgs e)
    {
        var item = sender as ListBoxItem;
        if (item == null)
            return;
        item.IsSelected = false;
    }
} 
```

xml:

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
    xmlns:local="clr-namespace:WpfApplication1"
    Title="MainWindow"
    Width="525"
    Height="350">
<Window.Resources>
    <Style x:Key="ListBoxItemStyle" TargetType="{x:Type ListBoxItem}">
        <Setter Property="local:ListBoxItemEx.CanSelect" Value="{Binding CanSelect}"/>
    </Style>
</Window.Resources>     
<Window.DataContext>
    <local:ViewModel />
</Window.DataContext>
<Grid Name="LayoutRoot">
    <ListBox ItemsSource="{Binding Elements}" ItemContainerStyle="{DynamicResource ListBoxItemStyle}" SelectionMode="Multiple" />
</Grid> 
```

视图模型：

```
public class ViewModel : INotifyPropertyChanged
{
    #region INotifyPropertyChanged values

    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnPropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
        {
            this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
    #endregion

    public List<Dummy> Elements { get; set; }

    public ViewModel()
    {
        this.Elements = new List<Dummy>(){
            new Dummy() { CanSelect =true, MyProperty = "Element1"},
            new Dummy() { CanSelect =false, MyProperty = "Element2"},
            new Dummy() { CanSelect =true, MyProperty = "Element3"},
            new Dummy() { CanSelect =false, MyProperty = "Element4"},
            new Dummy() { CanSelect =true, MyProperty = "Element5"},
            new Dummy() { CanSelect =true, MyProperty = "Element6"},
            new Dummy() { CanSelect =true, MyProperty = "Element7"},
            new Dummy() { CanSelect =true, MyProperty = "Element8"},
            new Dummy() { CanSelect =false, MyProperty = "Element9"},
        };
    }
}

public class Dummy
{
    public bool CanSelect { get; set; }

    public string MyProperty { get; set; }

    public override string ToString()
    {
        return this.MyProperty;
    }
} 
```

这种方法的唯一警告是，如果 ListBox 具有单个选择，则尝试选择一个不可选择的项目会取消选择当前选定的项目，或者如果 ListBox 具有扩展选择，则取消选择所有项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T15:25:04.767

使用[ItemsControl](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.aspx)而不是 ListBox

# android - 如何清除Android中的通话记录？

> ID：13567795
> 
> 赞同：0
> 
> 时间：2012-11-26T15:21:12.540
> 
> 标签：android

我想以编程方式清除我的 Android 手机中的所有通话记录，我已经尝试为此开发一个简单的应用程序。但它不起作用，我希望有人能帮我检查一下。

```
public class ClearLogActivity extends Activity implements OnClickListener{
/** Called when the activity is first created. */
Button clear;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    clear = (Button)findViewById(R.id.button1);
    clear.setOnClickListener(this);
}

public void onClick(View view){

    Cursor cursor = getContentResolver().query(CallLog.Calls.CONTENT_URI, null, null, null, null);
    while(cursor.moveToNext()){
        getContentResolver().delete(CallLog.Calls.CONTENT_URI, null, null);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T15:23:25.130

```
Uri uri = Uri.parse("content://call_log/calls");

int d  = getContentResolver().delete(uri, null, null); 
```

或检查删除了多少

```
int res = Call_logs.this.getContentResolver().delete(android.provider.CallLog.Calls.CONTENT_URI,"_ID = "+ calls_id_list.get(i),null);
        if (res == 1) {
            // Log delete

        } else {
            // Log not Delete

        } 
```

# java - 常春藤依赖（拉入文件目录）

> ID：13567799
> 
> 赞同：1
> 
> 时间：2012-11-26T15:21:26.490
> 
> 标签：java, ant, build, dependencies, ivy

对问题进行极端编辑以使其更有意义：

假设我需要使用本地版本的 httpclient 而不是我可以从在线仓库中提取的版本（由于签名原因）。我想处理这个的方式是这样的......

**常春藤.xml**

* * *

```
<dependencies>  
    ...Other dependencies here
    <dependency org="com.apache" name="httpclient" rev="4.2.2" conf="compile->default" ext="jar" />
</dependencies> 
```

* * *

**常春藤设置.xml**

* * *

```
<settings defaultResolver="central"/>

<resolvers>
<url name="repo">
    <ivy pattern="http://myServer:8080/Repo/[organisation]/[artifact]/[revision]/ivy.xml" />
    <artifact pattern="http://myServer:8080/Repo/[organisation]/[artifact]/[revision]/[artifact].[ext]"/>
</url>

<url name="httpclient">
    <artifact pattern="http://myServer:8080/Repo/com.apache/httpclient/4.2.2/[artifact].[ext]"/>
</url>

<modules>
    <module organisation="com.apache" resolver="repo" />
    <module organisation="com.httpclient" resolver="httpclient" />
</modules> 
```

* * *

现在我在这里希望（并且运气不佳）是 com.apache 解析器正在寻找 myServer:8080/Repo/com.apache/httpclient/4.2.2/ivy.xml 并阅读它，这是该文件的内容：

**ivy.xml（在 myServer:8080/repo/... 目录中）**

* * *

```
 <dependency org="com.httpclient" name="commons-codec" rev="1.6" />
    <dependency org="com.httpclient" name="commons-logging" rev="1.1.1" />
    <dependency org="com.httpclient" name="fluent-hc" rev="4.2.2" />
    <dependency org="com.httpclient" name="httpclient" rev="4.2.2" />
    <dependency org="com.httpclient" name="httpclient-cache" rev="4.2.2" />
    <dependency org="com.httpclient" name="httpcore" rev="4.2.2" />
    <dependency org="com.httpclient" name="httpmime" rev="4.2.2"/> 
```

* * *

**当您考虑到有多少 LOC 会添加到我们经常包含的内容中时，想要读取第二个 xml 文件而不是在我的第一个文件中包含标记的原因非常明显。它还使所有未来包括更容易。**

**现在我得到的错误是：**

部分项目无法解析 无法解析 com.myCompany#myProgramt;working@CompName 的依赖 未解析的依赖：com.apache#httpclient;4.2.2: not found

* * *

感谢您对此事的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:35:05.193

Ivy 期望在同一个解析器中找到给定工件的所有依赖项。因此，它会`com.apache`在您的`repo`解析器中找到工件，并希望也能`com.httpclient`在其中找到。

Ivy 还将在同一个解析器声明中按顺序遍历您的`<ivy pattern.../>`and语句。`<artifact pattern.../>`您可以利用它来创建一个解析器，该解析器按您想要的顺序访问两个存储库：

```
<url name="amalgamation">
    <ivy pattern="http://myServer:8080/Repo/[organisation]/[artifact]/[revision]/ivy.xml" />
    <artifact pattern="http://myServer:8080/Repo/[organisation]/[artifact]/[revision]/[artifact].[ext]"/>
    <artifact pattern="http://myServer:8080/Repo/com.apache/httpclient/4.2.2/[artifact].[ext]"/>
</url> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T06:13:29.503

当您将构建配置为使用以下解析器时

```
 <ibiblio name="central" m2compatible="true"/> 
```

你告诉 ivy 从[Maven Central下载它的依赖](http://search.maven.org/)

你在这里的目标是什么？要创建一个功能类似于 Maven Central 的本地 ivy 存储库？在这种情况下，最简单的解决方案是设置一个 Maven 存储库管理器，例如：[Nexus](http://www.sonatype.org/nexus/)、[Artifactory](http://www.jfrog.com/home/v_artifactory_opensource_overview)或[Archiva](http://archiva.apache.org/)。maven 存储库管理器可以充当存储在 Central Maven 存储库中的智能缓存和“代理”jar。

将构建配置为使用本地 Maven 存储库很容易：

```
 <ibiblio name="central" m2compatible="true" root="http://hostname:portnum/MavenRepo/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T19:34:07.347

What server are you using for your remote JAR repository?

Both Nexus and Artifactory can be setup to pull jars stored locally on themselves before puling ones from the remote repository. This way, you don't have to munge your `ivysettings.xml`. Instead, you simply download your preferred versions of the jars on Artifactory/Nexus. And, both are free, open source, downloads. It's way easier to do what you want with Artifactory/Nexus than futzing with your Ivy settings.

By the way, I have a [Ivy project](https://github.com/qazwart/ivy.dir) in Github you might want to look at. You simply attach this project to your Ant project, and it has everything automatically configured for Ivy. This way, an entire site can use Ivy for all of their projects, and everything is centrally controlled.

# list - JavaFX getChildren() 列表行为

> ID：13567802
> 
> 赞同：2
> 
> 时间：2012-11-26T15:21:36.943
> 
> 标签：list, parent, javafx

看下面的代码：

```
public static void main(String[] args) {
        Group group1 = new Group();
        Group group2 = new Group();

        Label label = new Label("test");

        group1.getChildren().add(label);
        group2.getChildren().add(label);

        System.out.println("Size group1: " +group1.getChildren().size());
        System.out.println("Size group2: " +group2.getChildren().size());
    } 
```

如果标签被添加到 group2，它会自动从 group1 中删除。有谁知道这是为什么？

到目前为止，我不需要额外的功能，例如来自组类的边界，而是使用简单的 ArrayList 来存储对标签对象的引用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T19:32:58.370

从[`Node`文档](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html)中：

> 一个节点在场景图中的任何地方最多可能出现一次。具体来说，一个节点必须在以下所有情况中出现不超过一次：作为场景的根节点、父节点的子 ObservableList 或节点的剪辑。
> 
> ...
> 
> 如果程序将子节点添加到父节点（包括组、区域等）并且该节点已经是不同父节点的子节点或场景的根节点，则该节点会自动（并且无声地）从其前父节点中删除。
> 
> ...
> 
> 可以重新排列场景图的结构，例如，将子树从场景图中的一个位置移动到另一个位置。为了做到这一点，通常会在将子树插入新位置之前从其旧位置删除子树。但是，如果应用程序没有显式删除子树，则会如上所述自动删除子树。

当 a`Node`添加到 a`Scene`时，JavaFX 系统会在场景图中的该位置设置和管理特定于该节点的属性。一个示例是由父布局管理器确定的节点位置及其约束。另一种是继承自父节点的css样式集。这两种类型的数据可能会根据节点在场景图中的位置而有所不同。

如果系统允许您将同一节点也放置在场景图中的另一个位置，它将覆盖为第一个位置确定的系统计算属性。一切都会变得非常混乱 - 导致程序难以推理并拥有微妙的错误。

# json - .NET 中的字符串 XML 到 JSON 转换，而不使用 XmlDocument

> ID：13567809
> 
> 赞同：0
> 
> 时间：2012-11-26T15:22:04.037
> 
> 标签：json, multithreading, performance, xmldocument, domparser

**我正在尝试找到一种内存效率更高的解决方案，用于在不使用XmlDocument**的情况下将 XML 字符串转换为 JSON 字符串（反之亦然）。

目前，我尝试过的所有 3rd 方库都期望 XmlDocument 作为输入。

在我使用**XmlReader**编写自己的解析器之前，我想知道是否有人知道开箱即用的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:33:24.800

您到底想做什么：直接从 XML 生成 JSON 或将 XML 字符串反序列化为对象，然后将其序列化为 JSON？

如果您需要`XmlSerializer`查看我创建的这个（它在`XmlReader`内部使用），您可以在此处找到代码以及如何使用它：

[使用泛型的 XML 序列化](http://www.codeproject.com/Articles/233908/Xml-serialization-using-generics)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:41:15.283

我最终编写了自己的瘦**LightXmlDocument**，它包含代表 xml 元素的对象树。

****使用XmlReader实现的****LoadXml**方法，我正在读取 xml 字符串并构建树。**

 **测试了 10 个线程，每个线程在不同的 xml 大小上迭代 900 次：

![在此处输入图像描述](../Images/829ee0055ef904bec95b749b7953aefb.png)**

# javascript - HTML5/Javascript 多文件上传

> ID：13567811
> 
> 赞同：0
> 
> 时间：2012-11-26T15:22:09.860
> 
> 标签：javascript, html, file-upload, coffeescript

我正在开发一个使用拖放文件处理将文件附加到表单的项目。

表格非常简单：

```
<form accept-charset="UTF-8" action="..." enctype="multipart/form-data" method="post">
  <input multiple="multiple" name="files[]" type="file" />
  <div id="download-drop"></div>
</form> 
```

*   我可以在 FilBrowser 窗口中选择多个文件，它们都会发布到服务器
*   我**无法** *将*多个文件拖入放置区 - 它们未发布到表单

当我查看服务器日志时，我可以看到文件数组已发布，但我放到 dropzone 上的文件不包括在内。

这是我的javascript（实际上是coffeescript）：

```
class Uploader
  constructor: (drop_zone, upload_button) ->
    @attachments = []

    @$upload_button = $(upload_button)
    @$upload_button.bind 'change', @manual

    @$drop_zone = $(drop_zone)
    @$drop_zone.bind 'dragenter', @noop
    @$drop_zone.bind 'dragexit', @noop
    @$drop_zone.bind 'dragover', @noop
    @$drop_zone.bind 'drop', @drop

    @render()

  # Perform a noop by preventing the default behavior and stopping
  # event propagation.
  noop: (e) ->
    e.stopPropagation()
    e.preventDefault()

  # Handler for when a file is dropped.
  drop: (e) =>
    @noop e

    for file in e.dataTransfer.files
      @attachments.push file

    @render()

  # Handle a manual file upload (using the HTML element)
  manual: (e) =>
    @noop e

    for file in e.currentTarget.files
      @attachments.push file

    @render()

  # Render helper function that redraws the HTML element
  render: =>
    @$drop_zone.html ''

    html = []
    if @attachments?.length > 0
      for attachment, i in @attachments
        html.push attachment.name

    @$drop_zone.html html.join('')

@Uploader = Uploader 
```

我已经研究过的几件事：

1.  类已创建，两个选择器均已找到并存在
2.  `noop`按预期工作
3.  范围都是正确的
4.  Drop 按预期工作

有人可以解释一下吗？我想我需要将每个附件添加到文件数组中，但我不知道如何。

# android - Android-NDK：信号 11 (SIGSEGV)，代码 2 (SEGV_ACCERR)，如何查找错误

> ID：13567819
> 
> 赞同：1
> 
> 时间：2012-11-26T15:22:35.857
> 
> 标签：android, c, android-ndk, signals, logcat

小伙子们好日子。我的 Android 应用程序出现了一些问题。我一直在构建和使用 C 库（libcurl 和我的来自 tje JNI 接口的 C 文件）有起有落，但直到今天它是一帆风顺的：虽然它有时工作得很好，但有时它只是崩溃——但完成了 C 系列微积分它的任务。

基本上我正在使用 libcurl 进行一系列 URL 调用并分析它们的结果。LogCat 不时向我显示以下内容（我省略了一些无聊的行）：

```
11-26 15:47:04.930: I/DEBUG(4492): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
11-26 15:47:04.930: I/DEBUG(4492): Build fingerprint: 'samsung/GT-I9100P/GT-I9100P:2.3.6/GINGERBREAD/BVKL2:user/release-keys'
11-26 15:47:04.935: I/DEBUG(4492): pid: 9556, tid: 9568  >>> XX.XX.XX <<<
11-26 15:47:04.935: I/DEBUG(4492): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 00000034
11-26 15:47:04.935: I/DEBUG(4492):  r0 00000000  r1 47378718  r2 00000000  r3 00000000
11-26 15:47:04.935: I/DEBUG(4492):  r4 0000002c  r5 afd41544  r6 47523008  r7 00000000
11-26 15:47:04.935: I/DEBUG(4492):  r8 00010000  r9 0000002f  10 473787b4  fp 47378710
11-26 15:47:04.935: I/DEBUG(4492):  ip 47378698  sp 473786d0  lr afd17b77  pc afd2ea7e  cpsr 40000030
11-26 15:47:04.935: I/DEBUG(4492):  d0  0000000200000009  d1  3ff8000000000000
11-26 15:47:05.080: I/DEBUG(4492):          #00  pc 0002ea7e  /system/lib/libc.so
11-26 15:47:05.080: I/DEBUG(4492):          #01  pc 0002f456  /system/lib/libc.so
11-26 15:47:05.080: I/DEBUG(4492):          #02  pc 00030974  /system/lib/libc.so
11-26 15:47:05.080: I/DEBUG(4492): code around pc:
11-26 15:47:05.080: I/DEBUG(4492): afd2ea5c f8c40504 e69351c8 050268a0 9b03d417 
11-26 15:47:05.085: I/DEBUG(4492): afd2ea6c 98039a05 eb071899 463a0309 fcfaf7ff 
11-26 15:47:05.085: I/DEBUG(4492): code around lr:
11-26 15:47:05.085: I/DEBUG(4492): afd17b54 2074f5a0 0301f10a 7010f5a0 bfc89303 
11-26 15:47:05.085: I/DEBUG(4492): afd17b64 462a9004 46314638 f8cd464b f7f38000 
11-26 15:47:05.085: I/DEBUG(4492): stack:
11-26 15:47:05.085: I/DEBUG(4492):     47378690  47378718  
11-26 15:47:05.085: I/DEBUG(4492):     47378694  00000030  
11-26 15:47:05.085: I/DEBUG(4492):     47378698  473786a4  
11-26 15:47:05.085: I/DEBUG(4492):     4737869c  00000000  
11-26 15:47:05.085: I/DEBUG(4492):     473786a0  00000000 
```

我知道这是一个非常普遍的问题，并且一直在尝试找出问题所在。我不明白如何使用**ndk-stack**工具，因为**libc**不是我实现的共享库的一部分，而是通用库的一部分。

如果引用的 .so 文件是我的，那就很简单了，但是怎么会弹出这样的错误呢？如果您对我将如何调试它有任何想法，非常欢迎您！

# ios - 如何解决sdk错误

> ID：13567822
> 
> 赞同：0
> 
> 时间：2012-11-26T15:22:38.960
> 
> 标签：ios, xcode

我在我的应用程序中添加了一个 swiper sdk。当我运行它的测试应用程序时它工作正常但是当我将我的文件导入它时.get错误

```
ld: library not found for -lCardAnalyLib1
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我搜索了错误，但不知道如何解决。有时会出现armv错误

> (null): 找不到 -lCardAnalyLib1 的库，它是**.a 类型文件**

```
 #import <UIKit/UIKit.h>
 #import "AudioAnalyLib.h"
 #import <QuartzCore/QuartzCore.h
these are pre imported file but if i import any other file get above error 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:46:29.147

您需要将 .a 文件添加到您的目标。在 Xcode 中选择目标的 Build Phases 选项卡，打开 Link Binary With Libraries 部分，然后添加您的库文件。

# ruby-on-rails - 如何在heroku中有长时间运行的线程来监听rails内的多个aws sqs队列？

> ID：13567823
> 
> 赞同：1
> 
> 时间：2012-11-26T15:22:41.633
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, amazon-web-services, amazon-sqs

我有两个名为`task "sqs:listen_converted"`和的任务`task "sqs:listen_failed"`。

第一个监听转换后的文件并在 postgres 中为其创建记录。

第二个在文件记录中设置一个标志，表示转换失败。

这些任务必须永远监听一个 SQS 队列并读取发布到它的消息。他们的代码很简单：

```
 task "sqs:listen_converted" => :environment do
      queue = AWS::SQS::Queue.new(SQSADDR['converted'])

      queue.poll do |msg|
      begin
         ...
      end
  end

  task "sqs:listen_failed" => :environment do
      queue = AWS::SQS::Queue.new(SQSADDR['failed'])

      queue.poll do |msg|
      begin
         ...
      end
  end 
```

好吧，在heroku中，我可以让这两个进程运行执行命令：

```
ps:scale sqs_converted=1 sqs_failed=1 
```

不幸的是，这样做我将不得不为每个支付 36 美元。

如何让它在后台 heroku 上的单个测功机上运行？

也许通过heroku-api gem运行分离的耙子进程？

```
heroku = Heroku::API.new(:api_key => 'api_key')
heroku.post_ps('myapp', "rake sqs:listen_converted", { :attach => false })
heroku.post_ps('myapp', "rake sqs:listen_failed", { :attach => false }) 
```

谢谢！

# asp.net - 如何使用会话在 ASP 中将数据从一个页面传递到另一个页面？

> ID：13567826
> 
> 赞同：0
> 
> 时间：2012-11-26T15:22:45.447
> 
> 标签：asp.net, c#-4.0

在这里，我正在尝试使用会话将字符串变量从一个页面传递到另一个页面..但它给出了一个错误..请帮助...这是我的编码

```
//this is for sending
Session["themeColor"] = "Sky Blue";

//this is for retriving    
String themeColor = Session["themeColor"].ToString(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:41:51.893

如果您使用的是网站，请尝试这样的 enableSessionState：

```
<pages enableSessionState="true">
      <controls> 
        <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add tagPrefix="asp" namespace="System.Web.UI.WebControls" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      </controls>
</pages> 
```

# google-app-engine - 物化过滤空值

> ID：13567830
> 
> 赞同：2
> 
> 时间：2012-11-26T15:23:00.410
> 
> 标签：google-app-engine, google-cloud-datastore, objectify

考虑到其中一些参数可能为空，我如何使用 Objectify 4 通过几个参数正确过滤，这意味着我不想通过这些参数进行过滤？示例：请考虑我想过滤如下内容：

```
 releases = ofy().load().type(Release.class)
                .filter("user.name", searchCriteria.getName())
                .filter("category", searchCriteria.getCategory())
                .filter("city", searchCriteria.getCity()).list(); 
```

为了与我上面所说的相匹配，我现在有以下代码，每次我的哪些参数为空时检查，所以在这种情况下我不会将它们放在过滤器上：

```
 if (!nameEmpty && !categoryEmpty && !cityEmpty) {
        releases = ofy().load().type(Release.class)
                .filter("user.name", searchCriteria.getName())
                .filter("category", searchCriteria.getCategory())
                .filter("city", searchCriteria.getCity()).list();
    } else if (!nameEmpty && !categoryEmpty) {
        releases = ofy().load().type(Release.class)
                .filter("user.name", searchCriteria.getName())
                .filter("category", searchCriteria.getCategory()).list();
    } else if (!nameEmpty && !cityEmpty) {
        releases = ofy().load().type(Release.class)
                .filter("user.name", searchCriteria.getName())
                .filter("city", searchCriteria.getCity()).list();
    } else if ...

       ... 
```

如何避免这种糟糕的过滤方式，并使用 Objectify 4 只用一行（或几行）实现它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T16:57:30.303

```
Query<Release> query = ofy().load().type(Release.class);

if (!nameEmpty)
    query = query.filter("user.name", searchCriteria.getName());

if (!categoryEmpty)
    query = query.filter("category", searchCriteria.getCategory())

if (!cityEmpty)
    query = query.filter("city", searchCriteria.getCity());

releases = query.list(); 
```

# android - 为什么堆栈跟踪行号与源代码行号不匹配？

> ID：13567831
> 
> 赞同：3
> 
> 时间：2012-11-26T15:23:03.853
> 
> 标签：android, sql, sqlite, debugging

我的应用因设备上的 NPE 而崩溃。在 ACRA 收到的堆栈跟踪中，行号指的是两个源代码类，`SQLiteStatement`和`SQLiteDatabase`. 对于`SQLiteDatabase`，没有任何行号与任何源代码版本中的行号匹配。我的设备没有自定义 ROM。这是运行 Android 4.03 的 Galaxy S2。

这是堆栈跟踪：

```
java.lang.NullPointerException
at android.database.sqlite.SQLiteStatement.releaseAndUnlock(SQLiteStatement.java:290)
at android.database.sqlite.SQLiteStatement.executeUpdateDelete(SQLiteStatement.java:96)
at android.database.sqlite.SQLiteDatabase.executeSql(SQLiteDatabase.java:2025)
at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1965)
at android.database.sqlite.SQLiteDatabase.beginTransaction(SQLiteDatabase.java:690)
at android.database.sqlite.SQLiteDatabase.beginTransactionNonExclusive(SQLiteDatabase.java:605)
at android.database.sqlite.SQLiteStatement.acquireAndLock(SQLiteStatement.java:247)
at android.database.sqlite.SQLiteStatement.executeInsert(SQLiteStatement.java:112)
at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1844)
at com.mydomain.myapp.albums.AlbumsData.insertOrIgnore(AlbumsData.java:89) 
```

如果您查看[其不同版本](http://grepcode.com/search?query=sqlitedatabase&n=)`SQLiteDataBase`的来源，您可以自己检查数字不匹配。

例如，在 Android 4.03 的[`SQLiteDataBase`source](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/database/sqlite/SQLiteDatabase.java#SQLiteDatabase)中，`executesql(...)`位于第 1892 行，而我的堆栈跟踪显示它位于第 2025 行。

这怎么可能？

[（请注意，我*不是*在询问 NPE 的来源）]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:36:22.940

所有内部错误都是由代码中的这一行引起的：

```
com.mydomain.myapp.albums.AlbumsData.insertOrIgnore(AlbumsData.java:89) 
```

你需要去看看它发生了什么。我同意@323go，您可能正在向它传递某种空值。一旦你得到照顾，内部的东西就应该消失了。

至于为什么行号不同。您正在查看基本的库存系统源代码。当它进入设备并进入消费者手中时，它可能已经发生了相当大的变化，我不知道具体为什么或他们会在`SQLiteDatabase`课堂上改变什么，但似乎他们已经改变了一些东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T15:45:21.533

我不确定官方的 android 资源是否与您手机上的 android 版本匹配。我认为三星可能会出于自己的目的改变 android：三星人采用了 android 4.0.3 源，对其进行了修改，向不同的类添加了一些东西（`SQLiteDatabase`似乎是其中之一），然后构建它并获得了他们自己的 android 版本。他们没有修改显示 android 版本的常量，因此您可以看到它“仍然”是 4.0.3。

# python - Python：按值查找与输入列表值最接近的列表

> ID：13567833
> 
> 赞同：0
> 
> 时间：2012-11-26T15:23:08.260
> 
> 标签：python, numpy

我有一个给定的值列表和一组具有相似值的列表（列表`A`、、`B`和）。`C`我正在尝试找到一种方法来返回与列表最匹配的`given`列表。我想使用最小二乘拟合作为距离度量。

```
given = [0, 1, 2, 3, 4, 5]
A = [0.1, 0.9, 2, 3.3, 3.6, 5.1]
B = [-0.1, 0.9, 2.1, 3.1, 3.9, 5]
C = [0, 1.1, 2, 2.9, 4, 5.1] 
```

所以在这种情况下，它将`C`作为最接近的匹配返回`given`。

我想我可以加入类似的东西：

```
match = [min([val[idx] for val in [A,B,C]], key=lambda x: abs(x-given[idx])) for idx in range(len(given))] 
```

但这只会返回每个列表元素的最接近的值。我不确定如何将列表 C 识别为最接近的逐点匹配。

另外，如果列表的长度不同，如果我不逐个索引比较它们，我真的不知道该怎么办。例如：

```
given = [0, 1, 2, 3, 4, 5]
A = [0.1, 0.9, 2, 3.3, 3.6, 2, 5.1, 3, 6.8, 7.1, 8.2, 9]
B = [-0.1, 0.9, 2.1, 3.1, 3.9]
C = [-1.7, -1, 0, 1.1, 2, 2.9, 4, 5.1, 6, 7.1, 8] 
```

仍将`C`作为最接近的匹配返回。

我也在使用 Numpy，但没有发现任何有用的东西。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:28:37.117

纯 python 解决方案不是最有效的，但这是使用最小二乘法作为距离度量的一种实现。

```
def distance(x,y):
    return sum( (a-b)**2 for a,b in zip(x,y) )

given = [0, 1, 2, 3, 4, 5]
A = [0.1, 0.9, 2, 3.3, 3.6, 5.1]
B = [-0.1, 0.9, 2.1, 3.1, 3.9, 5]
C = [0, 1.1, 2, 2.9, 4, 5.1]

min((A,B,C),key=lambda x:distance(x,given)) 
```

* * *

假设`np.ndarrays`大小相同，`distance`可以写成：

```
def distance(x,y):
    return ((x-y)**2).sum() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T15:42:20.350

您可以使用平方误差的总和。我做了一个简单的例子：

```
from copy import copy

def squaredError(a, b):
    r = copy(a)

    for i in range(len(a)):
        r[i] -= b[i]
        r[i] *= r[i]

    return sum(r)

given = [0, 1, 2, 3, 4, 5]
A = [0.1, 0.9, 2, 3.3, 3.6, 5.1]
B = [-0.1, 0.9, 2.1, 3.1, 3.9, 5]
C = [0, 1.1, 2, 2.9, 4, 5.1]

print squaredError(given, A)
print squaredError(given, B)
print squaredError(given, C)

match = min(map(lambda x: (squaredError(given, x), x), [A,B,C]))[1]
print match 
```

# java - 是否有 java 库来调用具有给定注释的方法？

> ID：13567841
> 
> 赞同：1
> 
> 时间：2012-11-26T15:23:23.000
> 
> 标签：java, annotations, persistence

在我们的应用程序中，我们使用不实现 JPA 实体侦听器行为的图形持久性库。换句话说，`@PrePersist`永远不会调用带有注释的方法。

当我们发现需要这种行为时，我想知道是否有一个 java 库可以让事情变得更简单……例如，通过返回一个需要作为`@PrePersist`元素调用的对象/方法的列表给我。你知道这样的图书馆吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:29:07.553

你可以试试[反射](http://code.google.com/p/reflections/)

> Reflections 扫描您的类路径，索引元数据，允许您在运行时查询它，并且可以为项目中的许多模块保存和收集该信息。
> 
> 使用反射，您可以查询元数据，例如：
> 
> *   获取某种类型的所有子类型
>     
>     
> *   获取所有带有一些注释的类型/**方法/字段，没有注释参数匹配**
>     
>     
> *   获取匹配正则表达式的所有资源

# php - 将中间证书添加到 openssl_pkcs7_sign

> ID：13567843
> 
> 赞同：3
> 
> 时间：2012-11-26T15:23:26.657
> 
> 标签：php, encryption, openssl

我正在使用此代码签署文件：

```
openssl_pkcs7_sign($in,$out,
     cert.crt,
     cert.key,
     array(),
     PKCS7_NOATTR
); 
```

但是，它在打开时仍然显示为未验证。

相反，这个 openssl 命令可以正常工作：

```
openssl smime -sign -in in -out out -signer cert.crt -inkey cert.key -certfile ca-bundle -outform der -nodetach 
```

为什么 PHP 代码不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T16:11:47.900

好的，

```
openssl_pkcs7_sign($in,$out,
     cert.crt,
     cert.key,
     array(),
     PKCS7_NOATTR,
     "/real/path/of/ca/intermeidate/cert/file.pem"
        ); 
```

成功了。最后一个 $extracerts arg 使用真实路径而不是 file://

# ios - 设置自定义 UITextField 最大长度

> ID：13567844
> 
> 赞同：0
> 
> 时间：2012-11-26T15:23:27.813
> 
> 标签：ios, xcode, uitextfield

我找不到我的问题的解决方案，因为[stackOverflow](https://stackoverflow.com/questions/2523501/set-uitextfield-maximum-length)上的所有其他帖子都引用了使用 IDE 而不是以编程方式创建的 UITextField。

我`UITextField`在里面创建 了一个自定义`(void)viewDidLoad`。我以编程方式创建了这个，所以我可以访问该`leftView`属性。

```
 UITextField *textField = [[UITextField alloc] initWithFrame:CGRectMake(10, 66, screenAdj, 30)];
    textField.borderStyle = UITextBorderStyleRoundedRect;
    textField.font=[UIFont fontWithName:@"Helvetica" size:14];
    textField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
    textField.returnKeyType = UIReturnKeyDone;
    textField.clearButtonMode = UITextFieldViewModeWhileEditing;
    [textField addTarget:self action:@selector(textFieldShouldReturn:)forControlEvents:UIControlEventEditingDidEndOnExit];
    textField.text=[defaults stringForKey:@"username"];

    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 100, 40)];
    label.font=[UIFont fontWithName:@"Helvetica" size:14];
    label.text = @"Your name";
    label.backgroundColor = [UIColor colorWithWhite:0.0 alpha:0.0];
    textField.leftViewMode = UITextFieldViewModeAlways;
    textField.leftView = label; 
```

我还想限制 TextField 实现中的最大字符数：

```
- (BOOL)textField:(UITextField *) textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

    NSUInteger oldLength = [textField.text length];
    NSUInteger replacementLength = [string length];
    NSUInteger rangeLength = range.length;

    NSUInteger newLength = oldLength - rangeLength + replacementLength;

    BOOL returnKey = [string rangeOfString: @"\n"].location != NSNotFound;

    return newLength <= MAX_LENGTH_USERNAME || returnKey;
} 
```

但我意识到我的 textField 没有“看到”上述功能。尝试过

```
[textField addTarget:self action:@selector(... 
```

但没有运气。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:30:22.700

您必须告诉您的视图控制器符合 UITextFields 委托协议。在您的 (.h) 中添加`<UITextFieldDelegate>`“UIViewController”之后，当您设置文本字段时，将其委托设置为`self`：

```
[textField setDelegate:self]; 
```

然后你可以继续删除这条线

```
[textField addTarget:self action:@selector(... 
```

假设您使用它来调用`shouldChangeCharactersInRange`. 现在您已经设置了委托，该方法将被自动调用。

# php - PHP时间&日期解析和区别

> ID：13567845
> 
> 赞同：0
> 
> 时间：2012-11-26T15:23:46.857
> 
> 标签：php, date

我有以下形式的 PHP 字符串：*“[Fri, 23 Nov 2012 20:00:18 +0000]”*

我想问一下从那以后过去了多少时间，如果是1天5小时等。我怎样才能有效地做到这一点？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:24:58.767

有效的方法是将字符串转换为 unix 时间戳并根据它执行您的逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T15:27:21.593

你可以做

```
<?php
$datetime1 = new DateTime('2009-10-11');
$datetime2 = new DateTime('2009-10-13');
$interval = $datetime1->diff($datetime2);
echo $interval->d;
?> 
```

[PHP中的日期时间](http://www.php.net/manual/ro/datetime.diff.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T15:47:23.823

```
$date = str_replace(array('[',']'),'',"[Fri, 23 Nov 2012 20:00:18 +0000]");

$diff = date_diff(date_create() , date_create($date));

echo $diff->format("Difference: %Y-%M-%d %H:%i:%s"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T15:35:40.023

函数**strtotime**为您的字符串返回 unixtime 函数**time**返回当前时间的 unixtime。两个函数都以秒为单位返回时间。你猫减去它并以秒为单位获得间隔

```
<?php
$logtime = strtotime("Fri, 23 Nov 2012 20:00:18 +0000");
$interval = time() - $logtime;
printf("Interval is: %d hours, %d minutes, %d sec.", 
        $interval/3600, ($interval%3600)/60, $interval%60);
?> 
```

# upgrade - 将 EPI5 升级到 EPI6 程序集更新错误

> ID：13567850
> 
> 赞同：0
> 
> 时间：2012-11-26T15:23:52.910
> 
> 标签：upgrade, episerver

将 EPI 5.2 升级到 EPI 6.0 时出现错误。错误消息是瑞典语，但它输入它就像程序集比安装程序更新，所以我下载了安装程序的新版本（部署中心），但我得到了相同的消息。

```
” An unhandled error has occured:
Det går inte att läsa in filen eller sammansättningen C:\EPiServer\Sites\Uppgra
deraSiteName\SiteName.Web\bin\Sitename.Web.dll eller ett av dess beroenden. Den hä
r sammansättningen har skapats med ett program av en senare version än det aktu
ella inlästa programmet och kan därför inte läsas in.
When executing

At C:\Program Files (x86)\EPiServer\Framework\6.0.318.113\Install\System Script
s\Install Site (SqlServer).ps1:147 char:27
+           Add-EPiAssemblyRedirect <<<<  -TargetFilePath $targetWebConfigPath -Source
AssemblyPath  $file.FullName

=
Get-EPiIsBulkInstalling

At C:\Program Files (x86)\EPiServer\Framework\6.0.318.113\Install\System Scripts\Install Site (SqlServer).ps1:147 char:27
+           Add-EPiAssemblyRedirect <<<<  -TargetFilePath $targetWebConfigPath -SourceAssemblyPath  $file.FullName
System.BadImageFormatException: Det går inte att läsa in filen eller sammansättningen C:\EPiServer\Sites\UppgraderaSiteName\SiteName.Web\bin\SiteName.Web.dll eller ett av dess beroenden. Den här sammansättningen har skapats med ett program av en senare version än det aktuella inlästa programmet och kan därför inte läsas in.
Filnamn: C:\EPiServer\Sites\SiteName\SiteName.Web\bin\SiteName.Web.dll
   vid System.Reflection.AssemblyName.nGetFileInformation(String s)
   vid System.Reflection.AssemblyName.GetAssemblyName(String assemblyFile)
   vid EPiServer.Install.Xml.Installers.AddAssemblyRedirectInstaller.Install(IDictionary savedState)
   vid EPiServer.Install.InstallationManager.Install(Installer installer)
   vid EPiServer.Install.Xml.XmlInstallationManager.AddAssemblyRedirect(String targetFilePath, String assemblyFilePath, String oldVersion)
   vid EPiServer.Install.Xml.Cmdlets.AddAssemblyRedirectCmdlet.ProcessRecord()
   vid System.Management.Automation.Cmdlet.DoProcessRecord()
   vid System.Management.Automation.CommandProcessor.ProcessRecord()” 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T22:41:06.157

您可能在错误的 .NET Framework 版本上运行部署中心。

如果站点是针对 4.0 构建的，请检查此链接： [http ://world.episerver.com/Blogs/Paul-Smith/Dates1/2011/3/Upgrading-CMS-6-R1-sites-compiled-against-NET-40/](http://world.episerver.com/Blogs/Paul-Smith/Dates1/2011/3/Upgrading-CMS-6-R1-sites-compiled-against-NET-40/)

为了记录，将其添加到您的部署中心配置中：

```
<configuration>
   <startup>
      <supportedRuntime version="v4.0"/>
   </startup>
</configuration> 
```

部署中心配置文件可以在目标机器上的以下路径中找到：

{程序文件}\EPiServer\Shared\Install\EPiServerInstall.exe.config

# java - 如何更改菜单栏中子菜单的标签颜色？

> ID：13567851
> 
> 赞同：3
> 
> 时间：2012-11-26T15:24:04.373
> 
> 标签：java, netbeans, primefaces

我想使用菜单栏更改子菜单的标签颜色。我正在使用的代码如下：

```
 <?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui">

    <h:form>

                <h:panelGrid columns="1" style="font: 12px sans-serif;width:800px;height: 19px">
                    <p:menubar autoDisplay="false" style="padding: 0px">  
                        <p:menuitem value="Tableau de bord" action="#{liens.lienTableauDeBord()}" ajax="false" icon="ui-icon-home" style="padding-top: 0px;padding-bottom: 0px;color: white;background-color:#333367"/>
                        <p:menuitem value="|" disabled="true" style="padding-top: 0px;padding-bottom: 0px;color: white;background-color:#333367"/>
                        <p:submenu label="Affaires" style="margin-top: -4px; height: 22px;color: white;background-color:#333367"> 
                            <p:menuitem value="Création" action="#{liens.lienCreerAffaire()}" ajax="false" icon="ui-icon-document"/>  
                            <p:menuitem value="Consultation" action="#{liens.lienConsultationAffaire()}" ajax="false" icon="ui-icon-search"/>  
                        </p:submenu>  
                        <p:menuitem value="|" disabled="true" style="padding: 0px"/>
                        <p:submenu label="Outillages" style="margin-top: -4px;height: 19px"> 
                            <p:menuitem value="Création" action="#{liens.lienNumOutil()}" ajax="false" icon="ui-icon-document" style="padding: 0px"/>  
                            <p:menuitem value="Consultation" url="#" icon="ui-icon-search" style="padding: 0px"/>  
                        </p:submenu> 
                        <p:menuitem value="|" disabled="true" style="padding: 0px"/>
                        <p:menuitem value="Recherche et consultation DT" url="#" icon="ui-icon-search" style="padding: 0px"/>  
                        <p:menuitem value="|" disabled="true" style="padding: 0px"/>
                        <p:menuitem value="Paramètres" url="#" icon="ui-icon-wrench"  style="padding: 0px"/>
                        <p:menuitem value="|" disabled="true" style="padding: 0px"/>
                        <p:menuitem value="Déconnexion" url="#" icon="ui-icon-closethick" style="padding: 0px" /> 
                    </p:menubar>  
                </h:panelGrid>

    </h:form>

</ui:composition> 
```

我正在使用 PrimeFaces 的主题，它在每个菜单上都有白色字体，一个 CSS 样式表将每个文本的颜色设置为白色，但标签*Affaires*和*Outillages*不会变为白色。我也尝试用属性来改变它。它适用于*菜单项*，但不适用于*子菜单*。

文本颜色必须为白色，背景为深蓝色（在 CSS 样式表中定义），但我不必不惜一切代价使用 PrimeFaces。

我正在使用 Netbeans 7.2 和 PrimeFaces 3.4.2

如果有人可以帮助我，我会奖励他一个饼干

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T04:24:10.907

你的问题背后的原因是

```
.ui-widget-content a 
```

用 primefaces 编写的 CSS 规则覆盖了您的内联样式

在此处阅读有关 css 规则优先级的更多信息，[在](https://stackoverflow.com/questions/1120174/css-class-priorities)[此处](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)参考 SO 问题

将样式类属性添加到您的子菜单。

例如：

```
<p:submenu styleClass="affaires" label="Affaires" style="margin-top: -4px; height: 22px;color: white;background-color:#333367"> 
   <p:menuitem value="Création" ajax="false" icon="ui-icon-document"/>  
   <p:menuitem value="Consultation" ajax="false" icon="ui-icon-search"/>  
</p:submenu> 
```

并将css添加到您的页面

```
<style>
    .affaires .ui-menuitem-text{color:white;}
</style> 
```

您也可以使用下面的 css 设置子菜单（弹出）背景，

```
.affaires .ui-menu-child{background: blue;} 
```

另外我建议你使用 firebug（firefox 插件）来检查 css，这在大多数情况下可以解决问题。

希望这可以帮助。

# html - 网格图片库 - 宽度是响应式的，但高度也需要响应式

> ID：13567852
> 
> 赞同：0
> 
> 时间：2012-11-26T15:24:13.790
> 
> 标签：html, css, image, gallery, responsive-design

我的网格图像库每行有四个图像。CSS 中的 width:25% 使宽度响应，但我需要高度也响应。目前我的高度为180px。我可以将其设置为百分比以使其像宽度一样响应吗？我已经尝试过，但是当我将其设置为百分比时，它不起作用。它仅在我将 height:x% 移动到 line1 img/line2 img 时才有效，但随后图像被压扁。

```
<div class="line1">
<img src="image1.jpg" alt="image1.jpg" />
<img src="image2.jpg" alt="image2.jpg" />
<img src="image3.jpg" alt="image3.jpg" />
<img src="image4.jpg" alt="image4.jpg" /></div>

<div class="line2">
<img src="image5.jpg" alt="image5.jpg" />
<img src="image6.jpg" alt="image6.jpg" />
<img src="image7.jpg" alt="image7.jpg" />
<img src="image8.jpg" alt="image8.jpg" /></div>

.line1{
overflow:hidden;    
height:180px;
}
.line1 img{
width:25%;
}
.line2{
overflow:hidden;    
height:180px;
}
.line2 img{
width:25%;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:24:47.760

设置两者`.line1{ height: auto;}`，`.line1{ height: auto;`这将保持响应。检查[jsfiddle](http://jsfiddle.net/YeecL/)示例。

# php - 高级自动完成列表

> ID：13567855
> 
> 赞同：0
> 
> 时间：2012-11-26T15:24:17.377
> 
> 标签：php, jquery, mysql

我创建了这个查询来使用 jQuery 显示我的自动完成框。它运行良好。

```
<?php

require_once('database.php');

if(isset($_POST['queryString'])) {

    $queryString = $dbc->real_escape_string($_POST['queryString']);

    if(strlen($queryString) >0) {
        $q = "SELECT keyword 
                FROM (
                    SELECT tname AS keyword FROM t
                    UNION
                    SELECT sname AS keyword FROM sub
                    UNION
                    SELECT cname AS keyword FROM c
                    UNION
                    SELECT iname AS keyword FROM i
                ) s
              WHERE keyword LIKE '%$queryString%' 
              LIMIT 10";

        $r = mysqli_query ( $dbc, $q);

        if($q) {
            while ($row = mysqli_fetch_array($r, MYSQL_ASSOC)) {
                echo '<li onClick="fill(\''.$row['keyword'].'\');">'.$row['keyword'].'</li>';
            }
        } else {
            echo 'ERROR: There was a problem with the query.';
        }
    } else {

    }
} else {
    echo 'There should be no direct access to this script!';
}

?> 
```

使用此查询根据关键字显示带有主题、导师姓名、城市的自动完整列表。现在我需要用更多值修改自动完成列表。例如，列表中有一个导师姓名，我想显示他/她的当前城市、他/她的个人资料图片等。这类似于 Facebook 搜索。

这是我的城市和地址表

```
# --------------
# Address Table
# --------------

CREATE TABLE address (
address_id INT(4) UNSIGNED NOT NULL AUTO_INCREMENT,
address_one VARCHAR(40) NOT NULL, 
address_two VARCHAR(40) DEFAULT NULL, 
city_id INT(4) UNSIGNED NOT NULL,
PRIMARY KEY (address_id),
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

# --------------
# City Table
# --------------

CREATE TABLE city(
city_id INT(4) UNSIGNED NOT NULL AUTO_INCREMENT,
city_name VARCHAR(30) NOT NULL, 
district_id INT(2) UNSIGNED NOT NULL,
PRIMARY KEY (city_id),
UNIQUE (city_name)
) ENGINE=MyISAM; 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:41:02.997

我认为有2个选择。

我相信你应该调整你的查询，因为现在你在 t 表和子表中检查搜索词是否出现。但是，您的查询很短，以至于您没有可用的匹配个人资料信息，只有您执行搜索的列。

当然，您不想从甚至不符合您的条件的行中查询大量数据。另一方面，在您执行搜索后进行大量查询并不那么方便。但是，由于您的限制为 10，所以应该没问题。

将您的查询更改为`select name, birthday, gender, imgdata from t`等。

# css - Magento，从媒体文件夹添加 Css 文件

> ID：13567857
> 
> 赞同：1
> 
> 时间：2012-11-26T15:24:44.400
> 
> 标签：css, magento, media

是否可以从“媒体”文件夹中添加一个 Css 文件！？通常我们将 css 文件放入“skin”文件夹，然后使用“addCss()”！但我需要它在“媒体”文件夹中！感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:25:08.790

```
$path = Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_MEDIA).'my_folder/';
$file=$this->getTypeCss();
$param='rel="stylesheet" type="text/css"';
$this->getLayout()->getBlock('head')->addItem('link_rel', $path.$file, $param);

return parent::_prepareLayout(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:42:31.323

这不仅可以通过使用`<link>`head.phtml 中的标签来完成吗？

# asp.net - gridview 突出显示当前行

> ID：13567859
> 
> 赞同：2
> 
> 时间：2012-11-26T15:24:55.250
> 
> 标签：asp.net, .net, vb.net

是否有在gridview 中突出显示当前选定行的内置方法？

我的gridview 中的每一行都有一个按钮（通过buttonField）。当用户按下此按钮时，背景颜色会发生变化......我这样做是这样的：

```
Protected Sub gvTransferOwner_RowCommand(sender As Object, e As System.Web.UI.WebControls.GridViewCommandEventArgs) Handles gvTransferOwner.RowCommand
    If e.CommandName = "Select" Then
        Dim index As Integer = Convert.ToInt32(e.CommandArgument)
        Dim selectedRow As GridViewRow = gvTransferOwner.Rows(index)
        selectedRow.Style.Add("background-color", "#ffcccc")
    End If
End Sub 
```

这会突出显示该行，但是一旦用户按下另一行中的按钮，它仍会在所有先前按下的行中保留该颜色。

有没有办法一次只突出显示一行（当前选定的行）？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T15:59:54.310

gridview 有一个 SelectedIndexChanged 事件以及一个[GridView.SelectedRow 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selectedrow.aspx)，您可以将其与@jonhopkins 的答案结合使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T15:42:11.263

如果您使用全局变量来存储正在选择的行的索引，则可以在选择新行时将该行更改回原始颜色。

```
Dim previousSelected As Integer 'global variable to store the last selected index
Protected Sub gvTransferOwner_RowCommand(sender As Object, e As System.Web.UI.WebControls.GridViewCommandEventArgs) Handles gvTransferOwner.RowCommand
    If e.CommandName = "Select" Then
        Dim index As Integer = Convert.ToInt32(e.CommandArgument)
        Dim selectedRow As GridViewRow = gvTransferOwner.Rows(previousSelected)
        selectedRow.Style.Add("background-color", "#ffffff") 'change it back to original color
        selectedRow = gvTransferOwner.Rows(index)
        selectedRow.Style.Add("background-color", "#ffcccc") 'change the color of the new row
        previousSelected = index
    End If
End Sub 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T10:00:14.533

I do it in the `SelectedIndexChanged` event and it works for me.

```
GridView1.Rows[GridView1.SelectedIndex].BackColor = Color.Yellow; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-24T04:52:17.937

> Dim previousSelected As Integer

```
 If e.CommandName = "Select" Then
            previousSelected = GetVal(ViewState("previousSelected"))
            Dim index As Integer = Convert.ToInt32(e.CommandArgument)
            Dim selectedRow As GridViewRow = grvOptionset.Rows(previousSelected)
            selectedRow.Style.Add("background-color", "#ffffff") 'change it back to original color
            selectedRow = grvOptionset.Rows(index)
            selectedRow.Style.Add("background-color", "#ffcccc") 'change the color of the new row
            ViewState("previousSelected") = index
        End If 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-24T04:48:27.530

```
Dim previousSelected As Integer 'global variable to store the last selected index
Protected Sub gvTransferOwner_RowCommand(sender As Object, e As System.Web.UI.WebControls.GridViewCommandEventArgs) Handles gvTransferOwner.RowCommand
    If e.CommandName = "Select" Then
         previousSelected = ViewState("previousSelected")
        Dim index As Integer = Convert.ToInt32(e.CommandArgument)
        Dim selectedRow As GridViewRow = gvTransferOwner.Rows(previousSelected)
        selectedRow.Style.Add("background-color", "#ffffff") 'change it back to original color
        selectedRow = gvTransferOwner.Rows(index)
        selectedRow.Style.Add("background-color", "#ffcccc") 'change the color of the new row
         ViewState("previousSelected") = index
    End If
End Sub 
```

# c# - 获取控件类型为 T 的子控件

> ID：13567875
> 
> 赞同：3
> 
> 时间：2012-11-26T15:25:44.720
> 
> 标签：c#

我有以下函数来获取所有类型的子控件。

```
 private IEnumerable<Control> GetControlsOfType(Control control, Type type)
    {
        var controls = control.Controls.Cast<Control>();

        return controls.SelectMany(ctrl => GetControlsOfType(ctrl, type))
                                  .Concat(controls)
                                  .Where(c => c.GetType() == type);
    } 
```

我正在尝试使用泛型类型参数对其进行转换。

```
 private IEnumerable<T> GetControlsOfType<T>(Control control) where T: Control
    {
        var controls = control.Controls.Cast<Control>();

        return controls.SelectMany(ctrl => GetControlsOfType<T>(ctrl))
                                  .Concat(controls)
                                  .Where(c => c.GetType() == T);
    } 
```

代码上有错误`.Concat`。

> 错误 6 'System.Collections.Generic.IEnumerable `<T`>' 不包含 'Concat' 的定义和最佳扩展方法重载 'System.Linq.Queryable.Concat `<TSource`>(System.Linq.IQueryable `<TSource`>, System.Collections.Generic. IEnumerable `<TSource`>)' 有一些无效参数

如何解决问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T15:29:25.413

尝试添加`.OfType<Control>()`之后`GetControlsOfType<T>(ctrl)`，而不是你的`Where`

所以你的代码如下：

```
return controls.SelectMany(ctrl => GetControlsOfType<T>(ctrl).OfType<Control>())
                                  .Concat(controls)
                                  .OfType<T>(); 
```

# javascript - 使用 YUI3 防止滚动视图中的滚动

> ID：13567877
> 
> 赞同：0
> 
> 时间：2012-11-26T15:25:50.370
> 
> 标签：javascript, yui

我正在使用滚动视图来包含一组 div 小部件。因此，许多小部件可能包含在一个小区域中但仍然可用。但是，表单下拉输入似乎有问题/完全搞砸了，因为它想用它滚动。在 Firefox 中，我必须右键单击然后选择它才能选择任何东西，而在 chrome 中，它只会使 div 变黑，直到我选择某些东西并且它全部飞回来。有没有办法让我告诉 YUI 在选择表单时不要滚动？

谢谢。

# php - 在 Internet Explorer 上创建 PHP 图像

> ID：13567881
> 
> 赞同：0
> 
> 时间：2012-11-26T15:25:58.847
> 
> 标签：php, image, internet-explorer

我对 PHP 图像和 Web 浏览器有一个奇怪的问题。

首先，我知道 PHP 是一种服务器端语言，它与浏览器无关，但是为什么我的脚本可以在 Firefox、Safari 或 Chrome 上运行，而不是在 Internet Explorer 上运行？

```
 function image_effect_negative($counter,$file,$layer){

$image = "../images/tmp/$file/layer_$layer.png";

$img = imagecreatefrompng($image);

if($layer == 0){
    $path = "../images/tmp/$file/$counter".".jpg";
}else{
    $path = "../images/tmp/$file/layer_$layer.png";
    $path2 = "../images/tmp/$file/tmp_layer_$layer.png";
}

if($img && imagefilter($img, IMG_FILTER_NEGATE)){
    //imagepng($img, $path);

    if($layer > 0)
        imagepng($img, $path2);
    else
        imagejpeg($img,$path);

    imagedestroy($img);

    return $img;
} 
```

}

我使用上面的代码，加载 layer_0.png （例如）并在其上使用图像过滤器。使用其他所有浏览器都会创建具有效果的图像，但不是在 IE 中！

怎么了？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:34:30.007

您使用的是哪个版本的 Internet Explorer？众所周知，旧版本的 IE 不适用于 png 等透明度类型。尝试将 PNG 修复程序添加到您的 IE 页面，看看是否可以修复它。您可以在此处找到 PNG 修复程序：

[http://jquery.andreaseberhard.de/pngFix/](http://jquery.andreaseberhard.de/pngFix/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:30:45.773

在此之前销毁图像时，您期望返回什么？

```
 imagedestroy($img);    // why are you destroying the image?

  return $img;
} 
```

另外，您是否设置了正确的标题以将图像返回给浏览器？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T15:35:04.233

我的猜测是您没有生成 HTTP 标头。一些浏览器能够检测是否`http://example.com/foo.php`包含 PNG 或 JPEG 文件，而其他浏览器则不能。它很简单：

```
if($layer > 0){
    header('Content-Type: image/png');
    imagepng($img, $path2);
}
else{
    header('Content-Type: image/jpeg');
    imagejpeg($img,$path);
} 
```

# php - 调用 wsdl 函数时出现 UNEXPECTED_ERROR

> ID：13567884
> 
> 赞同：0
> 
> 时间：2012-11-26T15:26:22.677
> 
> 标签：php, parameters, wsdl

我正在尝试从 php 调用一些 wsdl 函数。

假设我有这两个功能：

```
**listStyleCategories**
Input:
<xs:complexType name="listStyleCategories">
<xs:sequence>
<xs:element name="arg0" type="xs:string" minOccurs="0"/>
</xs:sequence>
Output:
<xs:complexType name="listStyleCategoriesResponse">
<xs:sequence>
<xs:element name="return" type="tns:listStyleCategoriesOutputBean" minOccurs="0"/>
</xs:sequence>
</xs:complexType>
<xs:complexType name="listStyleCategoriesOutputBean">
<xs:sequence>
<xs:element name="categories" type="xs:string" nillable="true" minOccurs="0" maxOccurs="unbounded"/>
<xs:element name="statusInfo" type="xs:int" minOccurs="0"/>
</xs:sequence>
</xs:complexType>

**listStyleTypes**
Input:
<xs:complexType name="listStyleTypes">
<xs:sequence>
<xs:element name="arg0" type="tns:listStyleTypesInputBean" minOccurs="0"/>
</xs:sequence>
</xs:complexType>
<xs:complexType name="listStyleTypesInputBean">
<xs:sequence>
<xs:element name="category" type="xs:string" minOccurs="0"/>
<xs:element name="language" type="xs:string" minOccurs="0"/>
</xs:sequence>
</xs:complexType>
Output:
<xs:complexType name="listStyleTypesResponse">
<xs:sequence>
<xs:element name="return" type="tns:listStyleTypesOutputBean" minOccurs="0"/>
</xs:sequence>
</xs:complexType>
<xs:complexType name="listStyleTypesOutputBean">
<xs:sequence>
<xs:element name="detail" type="tns:listStyleTypesOutputDetailBean" nillable="true"    minOccurs="0" maxOccurs="unbounded"/>
<xs:element name="statusInfo" type="xs:int" minOccurs="0"/>
</xs:sequence>
</xs:complexType>
<xs:complexType name="listStyleTypesOutputDetailBean">
<xs:sequence>
<xs:element name="icon" type="xs:base64Binary" minOccurs="0"/>
<xs:element name="styleId" type="xs:int" minOccurs="0"/>
<xs:element name="type" type="xs:string" minOccurs="0"/>
</xs:sequence>
</xs:complexType> 
```

当我调用第一个参数时，一切正常：

```
$param = array('arg0' =>$language);
$result = $client->listStyleCategories($param);
$result_arr = objectToArray($result);
echo "<pre>";print_r($result_arr);echo "</pre>"; 
```

但是当我用两个参数调用第二个函数时，我得到一个 UNEXPECTED_ERROR：

```
$param = array('category' =>'Woman','language'=>$language);
$result = $client->listStyleTypes($param);
$result_arr = objectToArray($result);   
echo "<pre>";print_r($result_arr);echo "</pre>"; 
```

我很清楚“女性”类别和定义的语言是正确的。也许我正在构建错误的参数？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T22:45:24.233

我会尝试这样的事情：

```
$params = array('arg0' => array('category' =>'Woman','language'=>$language));
$result = $client->listStyleTypes($param); 
```

您的`listStyleTypes`函数就像`listStyleCategories`是`arg0`两个值的复杂类型（散列）。

# iphone - trigger.io 和音频

> ID：13567885
> 
> 赞同：1
> 
> 时间：2012-11-26T15:26:25.830
> 
> 标签：iphone, ios, trigger.io

我正在尝试在使用 trigger.io 构建的 iOS 应用中播放音频文件。由于触发器 API 中没有播放声音的方法，我使用的是 HTML 音频元素。它在 iOS 6 上运行良好，并且按预期播放 mp3，但在 iOS 5 上没有任何反应，并且控制台中没有记录错误消息。

知道为什么吗？

# java - 在 GWT 中展开 TreeItem

> ID：13567886
> 
> 赞同：3
> 
> 时间：2012-11-26T15:26:26.870
> 
> 标签：java, gwt

我希望当您单击它而不是“+”时它会转动 TreeItem。我添加了以下代码：

```
Tree.addSelectionHandler(new SelectionHandler<TreeItem>() {

        @Override
        public void onSelection(SelectionEvent<TreeItem> event) {
            event.getSelectedItem().setState(!event.getSelectedItem().getState());
        }
    }); 
```

TreeItem 展开但未折叠，因为 onSelection 激活了两次。
这可能是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:48:26.830

GWT 问题跟踪器中存在问题：

[http://code.google.com/p/google-web-toolkit/issues/detail?id=3660&q=Tree%20selection&colspec=ID%20Type%20Status%20Owner%20Milestone%20Summary%20Stars](http://code.google.com/p/google-web-toolkit/issues/detail?id=3660&q=Tree%20selection&colspec=ID%20Type%20Status%20Owner%20Milestone%20Summary%20Stars)

# iphone - uiscrollview 的缩放不起作用

> ID：13567887
> 
> 赞同：0
> 
> 时间：2012-11-26T15:26:27.377
> 
> 标签：iphone, uiscrollview, zooming

我不明白为什么滚动视图不起作用，因为我遵循了教程中的建议。

我创建了`UIScrollView`包含一个`UIImageView`并且我还添加了方法

```
 - (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView
 {
   return imgv;
 } 
```

和`UIScrollViewDelegate`在界面中，但它不起作用。

这是代码`UIScrollView`：

```
 imgv = [[UIImageView alloc]
                     initWithFrame:CGRectMake(0, 0, 1000, 500)];
 imgv.image = [UIImage imageWithData:retrievedData];

 scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 800, 800)];
 scrollView setContentSize:CGSizeMake(imgv.image.size.width, imgv.image.size.height)];
 scrollView.maximumZoomScale = 4;
 scrollView.minimumZoomScale = 1;
 [scrollView setScrollEnabled:YES];
 scrollView.clipsToBounds = YES;
 scrollView.delegate = self;

self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(hideImageView)];

 [scrollView addSubview:imgv];
 [view addSubview:scrollView]; 
```

如果有人能找出问题所在，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:28:49.503

您需要`imgv`在委托方法[viewForZoomingInScrollView:](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiscrollviewdelegate_protocol/Reference/UIScrollViewDelegate.html)中返回：

```
- (UIView *) viewForZoomingInScrollView:(UIScrollView *) view {
    return imgv;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T01:36:04.720

我相信您忘记正确设置 imageView 的框架

```
self.imageView.frame=CGRectMake(0, 0, self.imageView.image.size.width, self.imageView.image.size.height); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T15:33:00.393

您必须将 imageView 作为子视图添加到滚动视图

```
[scrollView addSubview:imgv]; 
```

# file - 在文件中查找字符串，替换“=”之后的所有内容？

> ID：13567892
> 
> 赞同：0
> 
> 时间：2012-11-26T15:26:46.333
> 
> 标签：file, scala, io, replace

我想读取一个文件，找到一些字符串并替换此行中符号“=”之后的所有内容。

假设我有一个这样的文本文件：

```
name=whatever
age=150
id.from.system=10298092_42_42

path=D:\name\somewhere
whatever_A= WHATEVER 
```

可以说我想改变路径。起初我必须找到字符串“path”，然后以某种方式替换“=”之后的所有内容。有任何想法吗？我知道我可以轻松地逐行读取文件，如下所示：

```
val source = io.Source.fromFile("C:/myfile.txt)
val lines = source.mkString
source.close() 
```

但这可能不是最好的主意，因为读取整个文件的性能并不好（可能文件有 10000000 行，并且字符串已经在第 2 行，但我的程序会读取整个文件。那是不必要的） .

并且可能还有另一个问题：如果我搜索特定的字符串，比如这里的“名称”，但这些字符串存在多次。我想确保它唯一有效的是字符串后面有一个“=”。也许我总是可以搜索最后带有“=”的东西，这可以解决问题。但我不知道如何用一个不错的 scala 代码来编写它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T16:04:43.030

您可以使用迭代器进行迭代，直到找到您要查找的行。

```
val source = io.Source.fromFile("somePath").getLines
val line = source.find(_.startsWith("path=")) 
```

line 将包含以“path =”开头的第一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T16:21:44.100

如果您的 C:/myfile.txt 包含该行`path=D:\name\somewhere`，则可以替换`D:\name\somewhere`为以下代码：

```
val lines = fromString("path=D:\\name\\somewhere").getLines // use fromFile here 
for { in <- lines
      out <- if (in startsWith("path=")) "path=D:\\my\\path" else in
} yield out 
```

此示例将返回字符串

```
path=D:\my\path 
```

您需要使用`fromFile`来获取这些行并将这些行写入一个新文件。

这是完成同样事情的另一种方法：

```
val lines = fromString("path=D:\\name\\somewhere").getLines
lines.map(in => if (in startsWith("path=")) "path=D:\\my\\path" else in) 
```

# autohotkey - 我如何编写一个从剪贴板复制和粘贴的循环

> ID：13567893
> 
> 赞同：2
> 
> 时间：2012-11-26T15:26:47.707
> 
> 标签：autohotkey

我试图编写一个循环，从名为 InitialWords.txt 的剪贴板复制和粘贴，我真正想要的是它逐行复制单词并在每个单词后按 F2 键。这是我尝试过的-

```
Loop , read C:\InitialWords.txt
 { 
    Loop , parse , A_LoopReadLine , %A_Tab%
    {
     clipboard= %A_LoopField%
   send ^v
   send {F2}
    }   
 } 
```

谢谢我感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:58:53.630

看来您在 . 之后缺少逗号`Loop, Read`。您也可以完全绕过剪贴板。

```
Loop, Read, C:\InitialWords.txt 
{ 
    Loop, Parse, A_LoopReadLine, %A_Tab% 
    { 
        Send %A_LoopField%
        send {F2} 
    }

} 
```

# javascript - JavaScript encodeURIComponent 带反斜杠

> ID：13567894
> 
> 赞同：6
> 
> 时间：2012-11-26T15:26:50.307
> 
> 标签：javascript, encoding

[w3schools](http://www.w3schools.com/jsref/jsref_encodeuricomponent.asp)对功能有以下说明`encodeURIComponent`：

> 此函数对特殊字符进行编码。此外，它还对以下字符进行编码：`, / ? : @ & = + $ #`.

这是否意味着它不能对反斜杠 ( `\`) 进行编码？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-26T15:34:41.150

> 此函数对特殊字符进行编码。此外，它还对以下字符进行编码：`, / ? : @ & = + $ # .`

这个定义对于什么是“特殊字符”是模糊的。`encodeURI`这听起来像是和之间的比较`encodeURIComponent`。两者都将正确转义`\`为`%5C`，因此您不必担心反斜杠。

`encodeURI`将保留列出的字符，因为假定整个 URI 正在被编码：

```
encodeURI('http://example.com/foo bar/baz.html');
//produces "http://example.com/foo%20bar/baz.html" 
```

`encodeURIComponent`将转义*所有内容*，因为假定该字符串将用作查询字符串的一部分：

```
'http://example.com?foo=' + encodeURIComponent('http://example.com/fizz/buzz.html');
//produces "http://example.com?foo=http%3A%2F%2Fexample.com%2Ffizz%2Fbuzz.html" 
```

# mysql - Rails - 如何在 Rails 3 中显示带有特定代码的产品

> ID：13567905
> 
> 赞同：0
> 
> 时间：2012-11-26T15:27:21.487
> 
> 标签：mysql, ruby, ruby-on-rails-3, activerecord

我有一个带有产品代码的 mysql 表，有些产品有不同的颜色，即红色、蓝色等。它们具有不同的代码，因此红色笔将是 REDPEN，蓝色笔将是 BLUEPEN，但在我表的另一列中，它们将具有相同的代码以按即 Colouredpen 对它们进行分组

当单击笔查看详细信息时，我想显示该笔的所有不同颜色。我如何使用rails做到这一点？

我当前的代码：

产品控制器

```
class ProductController < ApplicationController
  def index
  end

  def prod
    @products = Product.uniq.pluck(:index_code)
  end

end 
```

看法

```
<% @products.each do |product| %>
    <tr class="mouse">
        <td><%= product.product %></td>
        <td>
            <% if product.stock < 1 %>
                <p class="outstock">Out of Stock</p>
            <% else %>
                <p class="instock">In Stock</p>
            <% end %>
        </td>
        <td><%= product.size + ' - ' + product.colour %></td>
        <td>&pound<%= product.price %></td>
        <td><%= text_field_tag :Quantity, 1, :size => 2, :class => "qtybox" %></td>
        <td><%= image_tag("buy.png", :alt => "buy") %></td>
    </tr>
    <tr>
    <td colspan="6">
        <table class="divider" width="100%" cellpadding="0" cellspacing="0">
            <tr>
                <td style="height: 1px;"></td>
            </tr>
        </table>
    </td>
</tr>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:15:23.203

要获得不同的代码，您可以编写：

```
Pen.select(:code).map(&:code).uniq 
```

或者

```
Pen.uniq.pluck(:code) 
```

# python - 解析一行上的选项卡式数字

> ID：13567909
> 
> 赞同：0
> 
> 时间：2012-11-26T15:27:39.780
> 
> 标签：python

我有一个包含一系列数字的文本文件，类似于这种格式：

```
1   80,982  163,8164    170,2620    145,648 200,8021    173,2069    92,647  26,4122 140,546 11,1913 160,6461    27,7905 40,9047 150,2183    61,9146 159,7420    198,1724    114,508 104,6647    30,4612 99,2367 138,7896    169,8700    49,2437 125,2909    117,2597    55,6399 
```

我想创建一个嵌套字典，将两个数字集中的第一个数字映射到第二个数字，并将所有这些数字映射到行号。因此，对于本示例中的前几个条目（第 1 行），它看起来像这样：

```
{1: {80: 982}, {163: 8164}, {170: 2620}} 
```

我不确定如何用我有限的文本解析能力来实现这一点。我会使用使用制表符和逗号作为分隔符的拆分方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T15:33:04.280

```
In [32]: line = '1   80,982  163,8164    170,2620    145,648 200,8021    173,2069    92,647  26,4122 140,546 11,1913 160,6461    27,7905 40,9047 150,2183    61,9146 159,7420    198,1724    114,508 104,6647    30,4612 99,2367 138,7896    169,8700    49,2437 125,2909    117,2597    55,6399'

In [33]: tok = line.split()

In [34]: {int(tok[0]): dict(map(int, t.split(',')) for t in tok[1:])}
Out[34]: 
{1: {11: 1913,
  26: 4122,
  27: 7905,
  30: 4612,
  40: 9047,
  49: 2437,
  55: 6399,
  61: 9146,
  ... 
```

这里：

*   `int(tok[0])`是行号；
*   `(... for t in tok[1:])`遍历数字对，将每对数字分配`t`为字符串；
*   `t.split(',')`将每一对拆分为一个 2 元组的字符串；
*   `map(int, ...)`将每个 2 元组字符串转换为 2 元组整数；
*   `(map(int, t.split(',')) for t in tok[1:])`是一个生成器表达式，它一个一个地产生 2 个整数元组；
*   最后，`dict(...)`将生成器的输出转换为字典。

如果您发现其中有任何令人困惑的地方，我建议您在交互式 shell 中试验代码，将复杂程度逐层剥离。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T15:43:15.423

内部部件可以通过以下方式轻松转换：

```
dict([(int(i),int(j)) for (i,j) in [k.split(',') for k in a.split()[1:]]]) 
```

为了

```
a = '1   80,982  163,8164    170,2620    145,648 200,8021    173,2069' 
```

输出将是

```
{163: 8164, 200: 8021, 170: 2620, 173: 2069, 80: 982, 145: 648} 
```

不确定第一个元素（请参阅上面的评论）

# javascript - 出现在数组中的窗口对象

> ID：13567915
> 
> 赞同：-1
> 
> 时间：2012-11-26T15:28:06.520
> 
> 标签：javascript, jquery, arrays, window, raphael

当我运行下面的代码时，jQuery 反复将一个 Window 对象放入我的数组中（我确信 JSON 不包含对 Window 对象的任何引用）。有什么方法可以运行它并将 Window 对象排除在我的数组之外？

谢谢

```
$.getJSON("../php/return_network_data.php",
function(fetch_data){
    $.each(fetch_data, function(){
    var index = this.id;
    node_array[index] = paper.circle(this.xpos_init, this.ypos_init, 10).attr({"fill" : "#ff0000"})

    $.each(node_array, function(){
            console.log(this);
      });
  });
}
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:31:29.037

这应该可以工作..必须在每个函数中添加索引、值

```
$.getJSON("../php/return_network_data.php",
function(fetch_data){
    $.each(fetch_data, function(index,value){
    var index2 = value.id;
    node_array[index] = paper.circle(this.xpos_init, this.ypos_init, 10).attr({"fill" : "#ff0000"})

    $.each(node_array, function(index,value){
            console.log(value);
      });
  });
}
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:34:54.610

我不确定 paper.circle 到底做了什么（这是拉斐尔吗？），但我认为这可能是两件事之一：

1.  从 paper 命令中删除 attr 函数并稍后添加。

    ```
    node_array[index] = paper.circle(this.xpos_init, this.ypos_init, 10); 
    ```

2.  在每个函数中添加键、值：

    ```
    $.getJSON("../php/return_network_data.php", function(fetch_data){
        $.each(fetch_data, function(key, value){
            var index = value.id;
            node_array[index] = paper.circle(value.xpos_init, value.ypos_init, 10).attr({"fill" : "#ff0000"})

            $.each(node_array, function(){
                console.log(this);
            });
        });
    }); 
    ```

或者可能两者兼而有之？

# sharepoint - Sharepoint：检索有关分配的用户策略的信息

> ID：13567916
> 
> 赞同：0
> 
> 时间：2012-11-26T15:28:11.200
> 
> 标签：sharepoint

案子：

*   在 SharePoint 2010 Web 应用程序管理中创建用户策略：为网站 YYY 分配“完整阅读”给用户 XXX；
*   为站点 YYY 调用 SiteData.asmx/GetContent 并检查“权限”节点。

根据 WS 调用结果，没有为用户 XXX 分配站点 YYY 的任何权限。

1.  我应该如何通过 Web 服务为 YYY 检索 XXX 的权限？
2.  分配的用户策略存储在 SharePoint 内容数据库中的哪个表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-01T12:27:58.613

我不相信它存储在任何内容数据库中。一个 Web 应用程序可以有多个内容数据库。我认为 webapplication 范围的设置将存储在 Config 数据库中的某个位置。我在那里快速浏览了一下，但不确定要寻找哪张桌子。

正如史蒂夫 P 所说，微软不支持直接对数据库执行任何操作（我相信使用分析除外），因此请注意这一点。

# ios - 通用应用程序是否有可能具有仅适用于 iPad 的应用程序内购买？

> ID：13567920
> 
> 赞同：2
> 
> 时间：2012-11-26T15:28:19.063
> 
> 标签：ios, app-store

就像它在锡上所说的那样。我正在考虑发布一个通用（iPhone 和 iPad）应用程序，并且我也在考虑进行应用内购买以添加功能，但我认为该功能仅适用于应用程序的 iPad 版本。提供仅适用于某些设备的应用内购买是否符合 Apple 的指导方针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T15:30:42.933

是的，没关系。您的通用应用程序可以在每个平台上具有不同的功能，这不违反任何规则。只要您不将 IAP 限制在特定设备本身，那就没问题（即它应该在整个**平台上**都可用）

您有责任确保 IAP 仅发生在 iPad 上。一个简单的`[UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPad`检查就足够了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-26T15:30:59.457

应用内[购买指南](http://developer.apple.com/news/pdf/in_app_purchase.pdf)指定：

> 您必须使您的应用内购买项目可供用户注册的所有设备使用。

# c# - 如何在 Excel 中保留 Excel 功能区插件的数据

> ID：13567921
> 
> 赞同：1
> 
> 时间：2012-11-26T15:28:19.593
> 
> 标签：c#, excel, vsto

我创建了一个 Excel 功能区插件，它需要在 Excel 会话之间保留用户选择。使用自定义 XML 部件似乎是最好的选择。但是，如果没有获得 COMExceptions，我将无法使其正常工作。

MSDN 文档不是很有用（http://msdn.microsoft.com/en-us/library/bb608612.aspx）。有人可以给我一个在 Excel 功能区插件中进行这项工作的例子吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T19:26:17.277

我知道三种不同的方法：

**自定义 XML 部件** 对于应用程序级别的插件，这是我存储任何需要保存在已保存的 xls 文件中的任何应用程序数据的首选方法，而用户永远不会看到这些数据。

[http://msdn.microsoft.com/en-us/library/bb608612.aspx](http://msdn.microsoft.com/en-us/library/bb608612.aspx)

**缓存数据孤岛** 这仅适用于文档级插件。如果您尝试在应用程序级插件中使用它，您将遇到异常。

[http://blogs.msdn.com/b/eric_carter/archive/2004/04/23/119294.aspx](http://blogs.msdn.com/b/eric_carter/archive/2004/04/23/119294.aspx)

**隐藏的工作表** 使用 VSTO，您可以创建用户看不到的不可见工作表。这很好用，但会导致很多笨拙的编码来转换您的数据以适合 Excel 工作表。

**更新（2014 年）：** 所以最终使用自定义 XML 部件变成了性能问题，所以我的应用程序必须改回使用隐藏的工作表。显然，一旦 XML 达到一定大小，Excel 就会变得非常缓慢。我的加载项使自定义部件达到数千个节点，并且 XML 增长得越大，Excel 中的*所有内容都变得越慢。*例如，简单地单击任何单元格会导致非常明显的延迟。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T12:33:16.437

如果您想将来自应用程序级插件的任何类型的元数据与特定文档一起存储，您可以将数据序列化为某种字符串（base64、xml 等），并将其保存在“非常隐藏”的工作表中。可见性设置为“非常隐藏”的工作表只能通过编程 API 访问，因此即使用户发现隐藏的工作表，他们仍然无法访问它，甚至无法知道它的存在。

```
 // create sheet for this save
        workbook.Sheets.Add();
        newSettingsWorksheet = workbook.ActiveSheet;
        newSettingsWorksheet.Name = hiddenSheetName;
        newSettingsWorksheet.Visible = Excel.XlSheetVisibility.xlSheetVeryHidden; 
```

需要注意的一件重要事情是，如果您存储的字符串长度超过 32767 个字符（一个单元格中的最大字符数），那么您必须将其切成块并将其分布在多个单元格中。

关于您遇到的 COM 异常，您应该知道，如果 Excel 正忙于处理另一个 COM 对象（例如工作表、单元格或属于 Excel 的任何东西），则 Excel 可以随时为任何触及 COM 对象（例如工作表、单元格或任何属于 Excel）的请求引发 COM 异常请求（例如用户正在输入，它正在重新计算公式）。您可以预期的例外情况是：

HRESULT：0x800AC472（忽略）

HRESULT：0x8000101A（稍后重试）

我猜 Excel 应用程序开发人员会这样做，因此加载项不会使 Excel 本身看起来很糟糕/无响应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T19:13:28.167

您应该使用注册表来存储一些信息，例如用户偏好和历史记录，这些信息在应用程序关闭后需要保留或需要在多个实例之间共享。

用户的配置单元 (HKEY_CURRENT_USER) 永远不会出现权限问题。只需参考 .NET 注册表类：http: [//msdn.microsoft.com/en-us/library/microsoft.win32.registry.aspx](http://msdn.microsoft.com/en-us/library/microsoft.win32.registry.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-30T18:18:22.383

考虑使用自定义属性。每个 Excel 工作表都在后台维护程序员易于使用的属性列表。例如，我使用自定义属性来“记住”功能区下拉列表中的哪些项目是为特定工作表选择的；当工作表更改时，拉起该工作表的自定义属性，以找出上次活动时选择了哪些下拉项目。

每个工作表和文档都保留自定义属性。

```
using System;
using Microsoft.Office.Interop.Excel;

public partial class CustPropExample
{
  /// <summary>
  /// delete and then store the custom property by passed key and value
  /// </summary>
  bool bExcelCustProp_Replace(Worksheet wkSheet,
    string custPropKey,
    string custPropVal)
  {
    if (!ExcelCustProp_DeleteByKey(wkSheet, custPropKey))
      return (false);

    if (!ExcelCustProp_Add(wkSheet, custPropKey, custPropVal))
      return (false);

    return (true);
  }

  /// <summary>
  /// return the custom property value of passed key
  /// </summary>
  string ExcelCustProp_Get(Worksheet wkSheet,
    string key)
  {
    try
    {
      for (int i = 1; i <= wkSheet.CustomProperties.Count; i++) // NOTE: 1-based !!!!!!!!
      {
        if (wkSheet.CustomProperties.get_Item(i).Name == key)
          return (wkSheet.CustomProperties.get_Item(i).Value);
      }
    }
    catch (Exception ex)
    {
      ShowErrorMsg("Error with getting cust prop; key [" + key + "], exc: " + ex.Message, false);
    }

    return (string.Empty);
  }

  /// <summary>
  /// add cust prop
  /// </summary>
  bool ExcelCustProp_Add(Worksheet wkSheet,
    string key,
    string custPropVal)
  {
    try
    {
      wkSheet.CustomProperties.Add(key, custPropVal);
    }
    catch (Exception ex)
    {
      return(ShowErrorMsg("Error in adding cust prop: " + ex.Message, false));
    }
    return (true);
  }

  /// <summary>
  /// if passed key exists, delete it
  /// </summary>
  bool ExcelCustProp_DeleteByKey(Worksheet wkSheet,
    string key)
  {
    try
    {
      for (int i = 1; i <= wkSheet.CustomProperties.Count; i++) // NOTE: 1-based !!!!!!!!
      {
        if (wkSheet.CustomProperties.Item[i].Name == key)
        {
          wkSheet.CustomProperties.Item[i].Delete();
          break;
        }
      }
    }
    catch (Exception ex)
    {
      return(ShowErrorMsg("Error deleting cust prop (key='" + key + "') - " + ex.Message, false));
    }

    return (true);
  }

  /// <summary>
  /// stub for error handling
  /// </summary>
  bool ShowErrorMsg(string msg,
    bool retval)
  {
    System.Windows.Forms.MessageBox.Show(msg);
    return (retval);
  }

} 
```

# macos - 如何按标题杀死应用程序或窗口？

> ID：13567926
> 
> 赞同：2
> 
> 时间：2012-11-26T15:28:41.013
> 
> 标签：macos

我大部分时间都是 Windows 开发人员，但现在混合了 Mac，我需要支持我们公司认为不适合在他们的系统上运行的所有被阻止的应用程序。在 Windows 中，我使用了我编写的一个在后台运行的小应用程序，它只会杀死任何包含指定标题的窗口。有人可以帮忙写一些在 OS X 中能做同样事情的脚本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:59:51.307

无法为您制作脚本，但将其包含[`killall`](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/killall.1.html "全杀")在您的搜索中可能会有所帮助。“killall 实用程序会杀死按名称选择的进程......”

# java - 在 Ant 中使用 Java 1.4 进行编译

> ID：13567927
> 
> 赞同：0
> 
> 时间：2012-11-26T15:28:42.057
> 
> 标签：java, ant

我有一些旧的 Java 源代码会在 ant 中引发错误。

```
[javac]             Enumeration enum = props.propertyNames();
[javac]                         ^
[javac]   (use -source 1.4 or lower to use 'enum' as an identifier) 
```

我怎样才能教 ANT 使用`-source 1.4`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T15:32:08.273

该`Javac`任务具有指定JVM版本的属性`source`...`target`

[http://ant.apache.org/manual/Tasks/javac.html](http://ant.apache.org/manual/Tasks/javac.html)

就像您的`build.xml`...中的以下内容一样

```
<javac source="1.4" target="1.4" ...> 
```

# firefox-addon - 如何在单个 xul 中使用多个 dtd 文件？

> ID：13567930
> 
> 赞同：2
> 
> 时间：2012-11-26T15:28:46.223
> 
> 标签：firefox-addon, dtd

在我的 firefox 插件中，我有几个`!ENTITIY`要放入“global.dtd”文件的 s。然后，在我的所有 .xul 文件中，我想访问该 global.dtd 以及该 .xul 文件的特定 .dtd 文件。

因此，对于 code1.xul，我将加载 code1.dtd 和 global.dtd。然后，对于 code2.xul，我将加载 code2.dtd 和 global.dtd。

因此，我可以保证在 global.dtd 中使用相同的字符串。

我可以这样做吗？如何写定义？你不能放两个文档类型。

```
<!DOCTYPE overlay SYSTEM "chrome://myaddon/locale/global.dtd">
<!DOCTYPE overlay SYSTEM "chrome://myaddon/locale/code1.dtd"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T17:33:58.727

在要使用的任何 DTD 中使用参数实体`global.dtd`。

例如，您可以将此添加到`code1.dtd`and `code2.dtd`：

```
<!ENTITY % global SYSTEM "global.dtd">
%global; 
```

您必须调整 SYSTEM 标识符以指向`global.dtd`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T13:51:55.623

您还可以在同一个 XUL 文件中导入多个 DTD。它看起来像这样：

```
<!DOCTYPE some_name [
  <!ENTITY % firstDTD SYSTEM "chrome://extension/locale/first.dtd">
  %firstDTD;
  <!ENTITY % secondDTD SYSTEM "chrome://extension/locale/pref/second.dtd">
  %secondDTD;
]> 
```

# javascript - JQuery Sheet - 创建一个小而简单的表格

> ID：13567935
> 
> 赞同：3
> 
> 时间：2012-11-26T15:29:01.250
> 
> 标签：javascript, jquery

我试图弄清楚如何使用 jQuery.sheet，可在此处获得：

[http://visop-dev.com/Project+jQuery.sheet](http://visop-dev.com/Project+jQuery.sheet)

这个电子表格组件的演示看起来不错，我正在整理一个在本地运行的非常简单的概念证明。它应该很简单，我只需要在 div 中创建一个表并将其传递给 sheet() 函数。但是，我什至无法将简单的表格转换为电子表格。我有这个 Javascript 代码：

```
$(function() {
  $("#jqsheet1").sheet(
    {
      title: 'Spreadsheet 1',
      buildSheet: '5x5',
      editable: true
    }
}); 
```

在 HTML 正文中，我有这个：

```
<div id="jqsheet1" class="jQuerySheet" style="height: 450px;">
  <table title="Spreadsheet 1">
    <tbody>
      <tr>
        <td>
          1
        </td>
        <td>
          2
        </td> 
```

... 以此类推，五行五列。JS 文件 jquery.js、jquery.sheet.js 和 parser.js 都存在于本地目录中，并加载到文档的头部。

当我加载 HTML 文件时，我实际上得到的是一个普通的无聊表格，没有电子表格控件。显然我做错了什么。它是什么？

有没有人有一个简单教程的链接？我正在尝试关注下载中包含的 jquery.sheet.html，但没有取得多大成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T15:40:32.400

您的 js 代码中有错误，这应该可以：

```
$(function() {
  $("#jqsheet1").sheet(
  {
    title: 'Spreadsheet 1',
    buildSheet: '5x5',
    editable: true
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-27T14:07:30.550

从 3.x 开始，试试这个：

```
<script>
  $(function(){
    $('#sheetParent').sheet({
      minSize: {rows: 5, cols: 5}
    });
  });
</script>
<div id="sheetParent"><table/></div> 
```

# zend-framework - Zend Framework 1 中控制器内部的切换控制器和动作

> ID：13567937
> 
> 赞同：0
> 
> 时间：2012-11-26T15:29:04.853
> 
> 标签：zend-framework

我正在使用 Zend Framework 1 开发一个网站，该网站需要登录才能访问，并创建了一个控制器名称 UserController 和一个名为 loginAction 的操作以方便登录。目前，我有系统设置，因此如果用户尝试访问该站点并且他们没有登录，它会将用户重定向到 /user/login，但这会更改 URL，我们不希望这种情况发生。如果用户尚未登录，这使我达到了尝试在控制器内部切换控制器的地步。到目前为止，我有这个：

```
require_once(APPLICATION_PATH . '/controllers/UserController.php');
$this->_helper->viewRenderer->renderBySpec('login', array('controller'=>'user'));
$controller = new UserController($this->getRequest(),$this->getResponse());
return $controller->loginAction(); 
```

这仍然呈现我试图隐藏的页面，但它似乎正在调用 loginAction。有没有人有更好的方法来做到这一点，或者我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T15:46:07.757

您可以尝试在控制器内部调用 preDispatch 方法：_forward()。

```
public function preDispatch()
{
    parent::preDispatch();
    if (!is_user_logged) {
        $this->_forward('login','user');
    }
} 
```

参考： http: [//framework.zend.com/manual/1.12/en/zend.controller.action.html#zend.controller.action.utilmethods](http://framework.zend.com/manual/1.12/en/zend.controller.action.html#zend.controller.action.utilmethods)

# php - 将多维对象转换为数组

> ID：13567939
> 
> 赞同：26
> 
> 时间：2012-11-26T15:29:08.720
> 
> 标签：php, arrays, multidimensional-array

我正在使用亚马逊产品广告 API。值作为多维对象返回。

它看起来像这样：

```
object(AmazonProduct_Result)#222 (5) {
  ["_code":protected]=>
  int(200)
  ["_data":protected]=>
  string(16538) 
array(2) {
    ["IsValid"]=>
    string(4) "True"
    ["Items"]=>
    array(1) {
      [0]=>
      object(AmazonProduct_Item)#19 (1) {
        ["_values":protected]=>
        array(11) {
          ["ASIN"]=>
          string(10) "B005HNF01O"
          ["ParentASIN"]=>
          string(10) "B008RKEIZ8"
          ["DetailPageURL"]=>
          string(120) "http://www.amazon.com/Case-Logic-TBC-302-FFP-Compact/dp/B005HNF01O?SubscriptionId=AKIAJNFRQCIJLTY6LDTA&tag=*********-20"
          ["ItemLinks"]=>
          array(7) {
            [0]=>
            object(AmazonProduct_ItemLink)#18 (1) {
              ["_values":protected]=>
              array(2) {
                ["Description"]=>
                string(17) "Technical Details"
                ["URL"]=>
                string(217) "http://www.amazon.com/Case-Logic-TBC-302-FFP-Compact/dp/tech-data/B005HNF01O%3FSubscriptionId%3DAKIAJNFRQCIJLTY6LDTA%26tag%*******-20%26linkCode%3Dxm2%26camp%3D2025%26creative%3D386001%26creativeASIN%3DB005HNF01O"
              }
            }
            [1]=>
            object(AmazonProduct_ItemLink)#17 (1) {
              ["_values":protected]=>
              array(2) { 
```

我的意思是它在对象内部也有数组。我想将它们全部转换为多维数组。

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2013-08-07T14:52:57.873

我知道这很旧，但您可以尝试以下代码：

> $array = json_decode(json_encode($object), true);

其中 $object 是 API 的响应。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-11-26T15:41:46.920

您可以使用如下递归函数：

```
function object_to_array($obj, &$arr)
{
 if (!is_object($obj) && !is_array($obj))
 {
  $arr = $obj;
  return $arr;
 }

 foreach ($obj as $key => $value)
 {
  if (!empty($value))
  {
   $arr[$key] = array();
   objToArray($value, $arr[$key]);
  }
  else {$arr[$key] = $value;}
 }

 return $arr;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-12-11T15:06:53.447

```
function convertObjectToArray($data) {
    if (is_object($data)) {
        $data = get_object_vars($data);
    }

    if (is_array($data)) {
        return array_map(__FUNCTION__, $data);
    }

    return $data;
} 
```

归功于凯文奥普登坎普。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-31T07:18:24.753

我编写了一个函数来完成这项工作，并将所有 json 字符串也转换为数组。这对我来说很好。

```
function is_json($string) {
    // php 5.3 or newer needed;
    json_decode($string);
    return (json_last_error() == JSON_ERROR_NONE);
}

function objectToArray($objectOrArray) {
    // if is_json -> decode :
    if (is_string($objectOrArray)  &&  is_json($objectOrArray)) $objectOrArray = json_decode($objectOrArray);

    // if object -> convert to array :
    if (is_object($objectOrArray)) $objectOrArray = (array) $objectOrArray;

    // if not array -> just return it (probably string or number) :
    if (!is_array($objectOrArray)) return $objectOrArray;

    // if empty array -> return [] :
    if (count($objectOrArray) == 0) return [];

    // repeat tasks for each item :
    $output = [];
    foreach ($objectOrArray as $key => $o_a) {
        $output[$key] = objectToArray($o_a);
    }
    return $output;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-12-14T22:10:39.957

这是一个老问题，但我最近遇到了这个问题并提出了自己的解决方案。

```
array_walk_recursive($array, function(&$item){
    if(is_object($item)) $item = (array)$item;
}); 
```

现在如果`$array`是一个对象本身，您可以在将其放入之前将其转换为数组`array_walk_recursive`：

```
$array = (array)$object;
array_walk_recursive($array, function(&$item){
    if(is_object($item)) $item = (array)$item;
}); 
```

还有一个小例子：

```
array_walk_recursive($array,function(&$item){if(is_object($item))$item=(array)$item;}); 
```

在我的情况下，我有一个来自第 3 方源的 stdClass 对象数组，该数组具有一个字段/属性，我需要将其值用作参考以查找其包含的 stdClass，以便我可以访问该元素中的其他数据。基本上比较 2 个数据集中的嵌套键。

我必须这样做很多次，所以我不想为我需要找到的每个项目都进行搜索。该问题的解决方案通常是`array_column`，但这不适用于对象。所以我先做了上面的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-24T18:27:28.420

以防万一您像我一样来到这里并且没有找到适合您情况的正确答案，这个先前答案之一的修改版本最终对我有用：

```
protected function objToArray($obj)
{
    // Not an object or array
    if (!is_object($obj) && !is_array($obj)) {
        return $obj;
    }

    // Parse array
    foreach ($obj as $key => $value) {
        $arr[$key] = $this->objToArray($value);
    }

    // Return parsed array
    return $arr;
} 
```

原始值是一个 JSON 字符串。方法调用如下所示：

```
$array = $this->objToArray(json_decode($json, true)); 
```

# linux - 从 txt 文件运行 bash 命令

> ID：13567947
> 
> 赞同：72
> 
> 时间：2012-11-26T15:29:35.987
> 
> 标签：linux, file, bash

我在 txt 文件中有一些命令，我​​需要逐行执行所有命令。我怎么能做到？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-11-26T15:33:50.867

只需这样做`bash file`：

```
$ cat file 
date
echo '12*12' | bc

$ bash file
Mon Nov 26 15:34:00 GMT 2012
144 
```

如果有别名，只需运行`bash -i file`

*无需担心文件扩展名或执行权限。*

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-11-26T15:32:55.403

在终端中只需键入：

```
bash path/to/my/file.txt 
```

您将执行每一行。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-26T15:33:57.873

只需将文件的扩展名更改为 .sh

在文件开头添加 /bin/bash

将文件的权限更改为可执行

而不是简单地在命令行中运行 ./filename.sh 命令。文件中的所有命令都将被执行

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-11-26T15:34:22.537

将扩展名更改为 .sh 和第一行`#!/usr/bin/env bash`，正如其他人所说`chmod +x`

# eclipse - 将库导入 Android 项目（与 SVN 共享）

> ID：13567948
> 
> 赞同：2
> 
> 时间：2012-11-26T15:29:39.890
> 
> 标签：eclipse, svn, android-library

我想在我的项目中使用库。我有库的项目文件夹，所以我按照以下步骤将其添加到我的项目中：

1.  执行“jar cf NameOfTheLibrary.jar *NameOfTheProjectFolder”

2.  在我的 Eclipse/Android 项目中创建一个名为 libs 的新文件夹。

3.  右键单击库并选择导入 -> 常规 -> 文件系统，然后单击下一步。

4.  浏览文件系统以找到库的父目录（我保存生成的 jar 文件的位置）。

5.  单击确定，然后单击左窗格中的目录名称（不是复选框）并检查右窗格中的相关 JAR。

6.  右键单击我的项目，选择 Build Path -> Configure Build Path，然后单击 Libraries 选项卡，然后单击 Add JARs...

7.  导航到 libs 目录中我的新 JAR 并添加它。

即使 Eclipse 在运行前没有发现任何问题，当我在日志上启动应用程序时（我使用 logcat）也会出现：

> “找不到从方法'path.of.the.method'引用的'pathOf.classOf.myImported.Library'”

如何以可以通过 SVN 与项目共享的方式导入此库？我以为我所做的已经足够了，但事实并非如此。

# html - Microsoft RDP 客户端控件未在 IE10 中的兼容模式之外加载

> ID：13567950
> 
> 赞同：0
> 
> 时间：2012-11-26T15:29:46.320
> 
> 标签：html, vbscript, activex

我有一个在网页上实现上述 ActiveX 控件的站点，但是它在 IE 10 中不起作用我必须在兼容模式下运行该站点并将该站点添加到受信任的站点。

下面的 ActiveX 控件代码...

```
<object language="vbscript" 
        ID="MsRdpClient" 
        CLASSID="CLSID:4eb89ff4-7f78-4a0f-8b8d-2bf02e94e4b2"  
        onreadystatechange="OnControlLoad" 
        onerror="OnControlError" 
        height="0" 
        width="0">
</object> 
```

关于如何在不强制用户使用兼容模式的情况下支持 IE 10 的任何想法？

我希望将此迁移到 HTML5 版本，因此正在寻找短期修复。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T13:18:19.183

以防万一其他人偶然发现这一点 - 没有办法（我能找到）执行上述操作，我使用 Ericom 名为 AccessNow 的产品实现了 HTML5 版本。

# c# - 比较标志枚举的更好方法是什么？

> ID：13567951
> 
> 赞同：9
> 
> 时间：2012-11-26T15:29:52.373
> 
> 标签：c#

通常在比较标志枚举时，我使用以下格式：

```
(value & flag) == flag; 
```

但有时我会遇到这样的情况：

```
(value & flag) != 0; 
```

只是想知道哪个更好用，还是归结为个人喜好？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-26T15:32:28.890

如果您使用的是 .net 4 或更高版本，请改用[Enum.HasFlag](http://msdn.microsoft.com/en-us/library/system.enum.hasflag.aspx)

事实上，这种方法使用第一种检查方式，但提供了更清晰的方式来检查标志

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-26T15:35:01.503

只要`flag`是一位标志，它们是等价的。如果`flag`有多个位，

```
(value & flag) == flag; 
```

是逻辑与（所有位必须匹配），而

```
(value & flag) != 0; 
```

是逻辑或（任何位都必须匹配）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-26T15:32:02.477

这只是个人喜好。

两者的性能将大致相同，结果将始终相同。（假设是单线程环境。）

我猜第二个示例复制/粘贴更容易一些。

第二个示例对于跨线程问题的影响也较小（如果`flag`在表达式中间发生突变，则第一个示例中可能会发生奇怪的事情）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-26T15:35:03.377

如果您要根据复合标志检查值，例如 value: `0x0111`， flags:`0x0101`则`(value & flags) == flags`表示“设置了所有标志”，并`(value & flags) != 0`表示“设置了任何标志”。

# javascript - mongoose/mongodb 查询多重排序

> ID：13567953
> 
> 赞同：27
> 
> 时间：2012-11-26T15:30:08.533
> 
> 标签：javascript, mongodb, mongoose

我对 mongodb 很陌生。我设法获得了仅基于 1 个参数的简单排序的基本概念。如果有超过 2 个排序参数怎么办。例如，在由具有属性`totalCuttingTime`和`favorited`.

以下是正确的 mongoose/mongodb 函数，用于查找具有`least`totalCuttingTime 和 order in 根据 `highest`最喜爱的Counts 到最低的项目列表。

`var ProjectModel= mongoose.model('Project', schema);`

```
exports.getMinCuttingTime = function(number, callback){ 
    var leastCutTimeResult = ProjectModel.find().sort({totalCuttingTime: 1}).select({_id: 1}).limit(number).exec(
            function(err, projects) {
                callback(null, projects)
            }
        );

    var result = leastCutTimeResult.find().sort({favoriteCount: -1}).select({_id: 1}).limit(number).exec(
            function(err, projects) {
                callback(null, projects)
            }
        ); 

    return result;
} 
```

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-11-27T15:20:43.433

您需要将这两个`sort`术语放在一个对象中：

```
exports.getMinCuttingTime = function(number, callback){ 
    ProjectModel.find()
        .sort({totalCuttingTime: 1, favoriteCount: -1})
        .select({_id: 1})
        .limit(number)
        .exec(
            function(err, projects) {
                callback(null, projects)
            }
        );
}; 
```

值得注意的是，Node.js 所基于的 ECMA-262 标准并没有指定维护对象的属性顺序，它只是匹配插入顺序的事实标准。为了消除任何疑问，您可以改用数组：

```
.sort([['totalCuttingTime', 1], ['favoriteCount', -1]]) 
```

# ubuntu - Ubuntu 远程桌面密码中的安全漏洞

> ID：13567954
> 
> 赞同：0
> 
> 时间：2012-11-26T15:30:12.857
> 
> 标签：ubuntu, passwords, vnc

我希望其他人可以为我确认这一点，然后我可以将其传递给 Canonical 或 TightVNC

我通过使用 SSH 隧道远程进入 ubuntu 12.10 桌面 - 即从我正在使用 putty 的桌面通过 ssh 进入远程桌面。Putty 配置为为远程桌面端口打开 ssh 隧道 - 例如 5900

然后我使用 TightVNC 查看器到 VNC 到 localhost:5900，然后通过 ssh 隧道连接我 - 这是 SSH 隧道的一个小教训，但不是问题。另外我不使用端口 5900 - 隧道很方便避免打开防火墙上的端口，但我离题了......

远程 ubuntu 桌面配置为允许使用密码进行远程连接。TightVNC 提示我输入密码。Ubuntu 接受任何密码，只要我输入的密码以实际密码开头。意思是，如果我的密码是 FOO - FOOBAR 有效，FOO1234 有效等。

这是设计使然吗？这不会显着降低密码的有效性。

其他人可以重现这个吗？我认为隧道与此无关。如果其他人可以使用 VNC 和密码远程进入 ubuntu 桌面并尝试这个，我想听听。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:44:42.907

密码限制为 8 个字符，因此查看器会将其截断为该长度。

> 尽管 TightVNC 对通过网络发送的 VNC 密码进行加密，但其余流量按原样发送，未加密（对于密码加密，VNC 使用 DES 加密的质询-响应方案，**密码限制为 8 个字符**，有效的 DES密钥长度为 56 位）。[加粗]

来自[http://www.tightvnc.com/faq.php](http://www.tightvnc.com/faq.php)

# maven - 如何构建子项目？

> ID：13567960
> 
> 赞同：8
> 
> 时间：2012-11-26T15:30:49.293
> 
> 标签：maven, aggregation

我有聚合，我使用`<modules>`元素链接父 Pom，然后`<parent>`在每个子 pom 中指定。

有没有办法我可以只从父 pom 构建子模块的一个子集......即

```
cd parent-dir
mvn install subproj1 subproj2 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-26T15:50:18.173

你可以像这样运行 Maven：`mvn install -pl subproj1,subproj2`

PS：另一个不错的 Maven 命令可以尝试：`mvn -?`

# ios - 在目标 C 中填充字符串数组的最佳方法

> ID：13567961
> 
> 赞同：2
> 
> 时间：2012-11-26T15:30:56.817
> 
> 标签：ios, objective-c, nsarray, uipickerview

在 Objective-C 中，我正在寻找一种更简洁的方式来填充字符串数组。

我想填充一个数组，最简单的解决方案似乎是硬编码

```
NSArray *arr =  [[NSArray alloc] initWithObjects:@"First",@"Second",@"Third",nil]; 
```

我正在将此数组中的对象（字符串）用于我能够做到的 UIPicker。现在，一旦用户从选择器中选择了一个选项（第一个/第二个/第三个），我需要为每个选项设置一个相应的值。

就像在 html 中一样，我们拥有`<option value="1">First</option>`非常明确的名称值对之间的直接对应关系。

因此，一种选择是创建另一个数组，当用户在选择器中选择一个项目时，从相应位置的第二个数组中获取值并使用它。

我想知道我们是如何做到的，或者有更好的方法。在 xml（或其他东西）中有这样的静态数据并能够轻松地从那里读取，这样代码就不会被弄乱会更好吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T15:35:00.713

拥有多个并行访问的数组通常是一个坏主意。简单的替代方法是拥有一个字典数组，其中每个字典都有一个名称键和一个值键。如果它变得更复杂，您可以创建一个自定义对象而不是字典并拥有一个数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T15:38:48.650

您可以使用 NSDictionary，并且语法可以很容易地声明：

```
NSDictionary* dict= @{ @"First" : @1  , @"Second" : @2 , @"Third" : @3 }; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T15:35:27.310

最好的方法是使用 NSDictionary（如果内容会改变，可能是 NSMutableDictionary）。您可以将键设为字符串值，并将值设为您想要的任何值。像这样的东西：

```
NSMutableDictionary *dictionary = [[NSMutableDictionary alloc]initWithObjectsAndKeys:firstValue, "firstString", secondValue, "secondString", etc, "etc...", nil]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T17:44:26.957

如果您使用 a`UIPickerView`可以定义您的数组，就像您拥有的一样，或者使用数组文字语法：

```
NSArray *array = @[@"First", @"Second", @"Third"]; 
```

当您检查用户选择的内容时，您可能只是在获取`UIPickerView`方法 selectedRowInComponent ，它返回一个从零开始的索引。如果需要，您可以使用它来查找索引中的字符串

```
NSInteger index = [self.pickerView selectedRowInComponent:0];
NSString *selectedString = array[index]; 
```

如果您想进行反向查找，您可以使用`indexOfObject`检索从零开始的索引：

```
NSInteger index = [array indexOfObject:@"Third"];
NSLog(@"%d", index); 
```

但我个人将数组用于表格视图、选择器视图等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T15:35:10.273

正是阿图尔，你说得对。

去找一个 XML 文件，解析它，它会更容易处理。

编辑：

解析后的 xml 内容可以存储在字典中以便更好地访问。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-26T15:42:21.053

这是创建数组的简单方法。

```
NSString* string = @"first/second/third/fourth";
NSArray* arr = [[string componentsSeparatedByString:@"/"] retain]; 
```

但是为了更好地回答您的问题，我会使用一系列字典，因为您可以使用简单的 NSPredicate 轻松过滤它以提取值。这是一个例子。首先通过为每个字符串/值对制作一个字典并将它们放入一个数组中来创建你的字典数组......

```
NSDictionary* d1 = [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:@"first", [NSNumber numberWithInteger:1], nil] forKeys:[NSArray arrayWithObjects:@"string", @"value", nil]];
NSDictionary* d2 = [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:@"second", [NSNumber numberWithInteger:2], nil] forKeys:[NSArray arrayWithObjects:@"string", @"value", nil]];
NSDictionary* d3 = [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:@"third", [NSNumber numberWithInteger:3], nil] forKeys:[NSArray arrayWithObjects:@"string", @"value", nil]];
NSArray* stringsAndValues = [[NSArray alloc] initWithObjects:d1, d2, d3, nil]; 
```

在您的 UIPicker 的某个时刻，您将返回字符串值。以下是 NSPredicate 如何轻松获得价值。在这种情况下，我会假设“第二”是选择......

```
NSString* stringValue = @"second";
NSPredicate* thePred = [NSPredicate predicateWithFormat:@"string == %@", stringValue];
NSArray* a = [stringsAndValues filteredArrayUsingPredicate:thePred];
NSInteger value = [[[a objectAtIndex:0] valueForKey:@"value"] integerValue]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-26T16:45:03.907

我会用字典数组创建 plist 文件：

```
<plist version="1.0">
<array>
    <dict>
        <key>title</key>
        <string>first</string>
        <key>value</key>
        <string>first_value</string>
    </dict>
    <dict>
        <key>title</key>
        <string>second</string>
        <key>value</key>
        <string>second_value</string>
    </dict>
</array>
</plist> 
```

加载它：

```
NSString *filename = @"pickerData.plist";
NSString *pathToFile = [[NSBundle mainBundle].bundlePath stringByAppendingPathComponent:filename];
self.items = [NSArray arrayWithContentsOfFile:pathToFile]; 
```

然后通过选择器轻松使用数据：

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView {
    return 1;
}
- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component {
    return [self.items count];
}
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
    return [[self.items objectAtIndex:row] objectForKey:@"title"];
}

- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
    [self doSomethingWithValue:[[self.items objectAtIndex:row] objectForKey:@"value"]];
} 
```

# google-provisioning-api - 是否有稳定的用户 ID？

> ID：13567966
> 
> 赞同：3
> 
> 时间：2012-11-26T15:31:07.673
> 
> 标签：google-provisioning-api, google-admin-sdk

我想知道使用 Google 配置 API 时是否有稳定的 uuid（唯一用户 ID）。用例是，用户正在结婚并更改他们的姓氏和用户名，但我们仍然希望找到相同的用户。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T15:41:46.450

Provisioning API 不会公开用户的唯一 Google ID。官方的 Google Apps Directory Sync 工具通过将电子邮件地址映射到源 LDAP 服务器上的 UID 来处理通过重命名来跟踪用户。您可以实现类似的东西，但这并不能解决重命名由另一个管理员在 CPanel 中以交互方式完成的情况。

帐户的 Google 唯一 ID 通过 Google+ API 公开： [https ://developers.google.com/+/api/latest/people/get](https://developers.google.com/+/api/latest/people/get)

您可以尝试通过 Google+ API 通过电子邮件地址搜索用户以确定他们的 UID，但这可能有问题且不可靠。

**更新：**新的 Admin SDK Directory API 允许[检索用户的唯一 Google ID](https://developers.google.com/admin-sdk/directory/v1/reference/users)（它是 id 属性）。

# c - printf 输出垃圾而不是特定字符

> ID：13567969
> 
> 赞同：-1
> 
> 时间：2012-11-26T15:31:12.213
> 
> 标签：c, memory, printf

好吧，我有一个奇怪的问题`printf()`。它在屏幕上输出垃圾。我猜这与记忆有关。看一看：

```
char string1[] = "SAMPLE STRING";
char string2[20]; // some garbage in it

/* let's clear this madness*/
int i = 0;
for (i; i < 20; i++) string2[i] = ' ';   // Space, why not.

printf("output: %s", string2); 
```

输出

```
output:      ╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠SAMPLE STRING
// ten spaces and random characters, why? 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T15:33:05.067

因为 C 字符串需要 NUL 终止。这意味着您的字符串的最后一个字符必须是`'\0'`. 这就是`printf`（以及所有其他 C 字符串函数）知道字符串何时完成的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T15:32:34.520

`string2`用空字符完成你的`'\0'`

```
string2[19] = '\0'; 
```

或者你可以这样做：

```
for (i; i < 19; i++) string2[i] = ' ';
string2[i] = '\0'; // after the end of the loop i= 19 here 
```

# google-app-engine - 带有 Eclipse 插件的 Google 应用引擎和 JPA

> ID：13567973
> 
> 赞同：0
> 
> 时间：2012-11-26T15:31:24.527
> 
> 标签：google-app-engine, jpa, datanucleus, google-plugin-eclipse

我用 JSF（Primefaces）和 JPA 创建了一个应用程序，我正在尝试将它部署在 GAE 上。首先，我尝试使用本地应用引擎 sdk。尝试将 JPA 与 CloudSQL 一起使用时遇到问题。我正在按照有关如何在此处使用 Eclipse 进行操作的说明进行操作：

[https://developers.google.com/eclipse/docs/cloudsql-jpatools](https://developers.google.com/eclipse/docs/cloudsql-jpatools)

但是我收到以下错误：

```
Caused by: javax.persistence.PersistenceException: Provider error. Provider: org.datanucleus.store.appengine.jpa.DatastorePersistenceProvider
    at javax.persistence.Persistence.createFactory(Persistence.java:176)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:112)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:66)
    at org.Handlers.EMFService.<clinit>(EMFService.java:8)
    ... 51 more
Caused by: java.lang.NullPointerException
    at org.datanucleus.jpa.EntityManagerFactoryImpl.initialisePMF(EntityManagerFactoryImpl.java:452)
    at org.datanucleus.jpa.EntityManagerFactoryImpl.<init>(EntityManagerFactoryImpl.java:355)
    at org.datanucleus.store.appengine.jpa.DatastoreEntityManagerFactory.<init>(DatastoreEntityManagerFactory.java:63)
    at org.datanucleus.store.appengine.jpa.DatastorePersistenceProvider.createEntityManagerFactory(DatastorePersistenceProvider.java:35)
    at javax.persistence.Persistence.createFactory(Persistence.java:172)
    ... 54 more 
```

更重要的是我认为datanucleus是用来访问App引擎Datastore的。但是我正在尝试连接到关系云 sql 数据库（它已启动并正在运行）。所以我不明白数据核与此有什么关系。

我正在使用 Eclipselink 来实现 GAE 以下指南中提出的 JPA 规范： [https ://developers.google.com/eclipse/docs/cloudsql-jpatools](https://developers.google.com/eclipse/docs/cloudsql-jpatools)

下面还可以看到persistence.xml：

```
<persistence version="2.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="googleeclipselink"
        transaction-type="RESOURCE_LOCAL">

        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>

        <class>org.entities.Department</class>
        <class>org.entities.Employee</class>
        <class>org.entities.Partner</class>
        <class>org.entities.Project</class>
        <class>org.entities.User</class>

        <properties>
            <!-- <property name="datanucleus.NontransactionalRead" value="true" /> 
                <property name="datanucleus.NontransactionalWrite" value="true" /> <property 
                name="datanucleus.ConnectionURL" value="appengine" /> -->
            <property name="javax.persistence.jdbc.driver"
                value="com.google.appengine.api.rdbms.AppEngineDriver" />
            <property name="javax.persistence.jdbc.url"
                value="jdbc:google:rdbms://fotisgonidisseerc:googlecloudsql/researchprojects" />
            <property name="javax.persistence.jdbc.user" value="" />
            <property name="javax.persistence.jdbc.password" value="" />
        </properties>
    </persistence-unit>
</persistence> 
```

任何人都可以给我一个提示如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:36:58.060

在这个问题上花了一些时间后，我发现我必须从 WEB-INF/lib 中删除 DataNucleus 库。我还需要在我的类路径中添加 EclipseLink 库。这是因为我使用 EclipseLink 作为 JPA 实现。因此 DataNucleus 引起了冲突，因此需要删除。我猜 Google Plug-in for Eclipse 会自动执行此操作，但显然有时它会失败。

# php - 创建 MySQL 函数来替换 PHP 代码

> ID：13567974
> 
> 赞同：2
> 
> 时间：2012-11-26T15:31:24.740
> 
> 标签：php, mysql, function

我想在数据库端而不是客户端有这样的循环：

```
while($result = mysql_fetch_array($exec)) {
    $pitagoras = sqrt(($result['driverpoint_lat']-$lat1)*($result['driverpoint_lat']-$lat1)+($result['driverpoint_lng']-$lng1)*($result['driverpoint_lng']-$lng1));

    if($pitagoras < $distance_least) {
        $distance_least = $pitagoras;
        $closest_driver = $result['iddriver'];
    }
} 
```

`mysql_fetch_array()`如果我想从行中获取一些数据，或者可能以完全不同的方式在 mysql 端实现这样的功能，有什么方法可以替换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:46:01.890

在我看来，您希望将其放入数据库中的函数或存储过程中，而不是在应用程序端进行。我不建议这样做。数据库并不意味着完成应用程序的工作。无论如何，既然您的导师要求这样做，请查看 MySQL 的[数学函数](http://dev.mysql.com/doc/refman/5.1/en/mathematical-functions.html)。

查看您发布的代码，您有位于应用程序端的变量 ( `$lat1`& `$lng1`)。你会把这些传递给函数吗？

这个[答案](https://stackoverflow.com/a/7208908/679449)是一个很好的起点，它展示了如何在 MySQL 函数中使用数学函数，然后由 PHP 调用。请注意，这是使用[已弃用](http://www.deprecatedphp.com/mysql)`mysql_`的函数编写的。你应该使用or函数。`mysqli_``PDO`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:42:30.393

这是您可以开始的地方。它不是存储过程，但我认为没有问题：

构建查询，使其返回一个距离，然后按所述距离排序：

```
SELECT iddriver, ..., 
(driver_lat - $lat) * (driver_lat - $lat) + 
(driver_lng - $lng) * (driver_lng - $lng) as dxd
FROM ... WHERE ...
ORDER BY dxd ASC 
```

我将结果 dxd 命名为距离乘以距离，因为结果是相同的，并且您没有在每一行上运行 SQRT。

结果是一个司机列表，其中距离最短的司机在前。您也可以在其上使用 LIMIT。

注意：将其放入准备好的语句和/或通过 PDO 运行它并不难。底线要注意 SQL 注入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T17:54:50.170

谢谢@andreshernandez，这是我以前没有想到的，但效果很好！我写在这里是因为我不能用''格式化文本

这是我使用您的代码存储的函数：

```
 DELIMITER $$ 
  CREATE FUNCTION sampleFunc9( lat DOUBLE, lng DOUBLE ) 
  RETURNS INT 
  DETERMINISTIC 
  BEGIN 
  DECLARE result DOUBLE; 
  SET result = (SELECT iddriver FROM driver ORDER BY (driverpoint_lat - lat) * (driverpoint_lat - lat) + (driverpoint_lng - lng) * (driverpoint_lng - lng) ASC LIMIT 1); 
  return result; 
  END $$ 
```

# assembly - TASM和MASM的装配区别

> ID：13567977
> 
> 赞同：5
> 
> 时间：2012-11-26T15:31:36.773
> 
> 标签：assembly, masm, tasm

我正在大学学习 TASM，但网络上有关 TASM 的信息似乎非常有限。我找到了有关 MASM 的更多信息。

我的问题是，MASM 和 TASM 有什么区别？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T15:39:15.500

差别不大，但还是有的。查看这篇文章： http: [//faqs.cs.uu.nl/na-dir/assembly-language/x86/borland.html](http://faqs.cs.uu.nl/na-dir/assembly-language/x86/borland.html) 寻找“理想”模式；顺便说一句，TASM 可以使用 MASM 语法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-26T15:53:56.067

> TASM = **Turbo Assembler**（Borland 产品）
> 
> MASM = **Macro Assembler**（Microsoft 产品）*...经常被误认为“Microsoft Assembler”*

就原始汇编语言而言，它们应该几乎相同，因为它们都使用 x86 操作码指令。差异“应该”是语法糖。

**使用 TASM 的组装教程：**

[http://www.petesqbsite.com/sections/tutorials/tuts/doorknob/asm_tutorial1.html](http://www.petesqbsite.com/sections/tutorials/tuts/doorknob/asm_tutorial1.html)

**ArtOfASM 参考：**

[http://cs.smith.edu/~thiebaut/ArtOfAssembly/artofasm.html](http://cs.smith.edu/%7Ethiebaut/ArtOfAssembly/artofasm.html)

我可以举的一个例子是，两个汇编器都允许使用“宏”，这在某些方面类似于在高级语言中使用方法。所以你可以写一段汇编代码，它接受一些参数（通常这些是在调用你的宏之前在寄存器中设置的。宏可能是几行之间的任何东西，到一百万行汇编程序......但是你可能只用一行调用你的宏...基本上 MASM 和 TASM 有非常小的差异，但大部分是相同的目标，其中代码可重用性很重要。

可以理解的是，您再也找不到关于这些的太多信息了……它们正在迅速减少。如今，汇编是一个利基市场，许多老帽子已经转向 C、C++ 和其他更高级别的语言。

您应该尝试在 YouTube 上查看...我可以在那里看到许多 TASM 教程...

...A86 汇编器...非常简单的语法，但会编译 64K “command.com” 类型的文件。

# lapack - LAPACK 中的 DGESVD 实现了哪种算法？

> ID：13567980
> 
> 赞同：2
> 
> 时间：2012-11-26T15:31:59.903
> 
> 标签：lapack, svd

我很好奇 MATLAB 中用于计算 SVD 的 DGESVD 函数。据我从 Gene H. Golub 和 Charles F. Van Loan 的“矩阵计算”中可以看出，使用了两种可能的双对角化方案——Householder Bidiagonalization 和 R-Bidiagonalization。但是，我无法从正在使用的 LAPACK 文档中确定。有人有想法么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T15:41:01.133

根据[LAPACK User's Guide](http://www.netlib.org/lapack/lug/)，减少为双对角形式是通过使用 Householder 反射的例程 DGEBRD 完成的。

2.4.6“奇异值分解”：

> > 例程 xGEBRD 以因子形式将 U1 和 V1 表示为基本反射器的乘积，如第 5.4 节所述。

5.4“正交或酉矩阵的表示”：

> > 实正交或复酉矩阵（通常表示为 Q）在 LAPACK 中通常表示为基本反射器的乘积——也称为基本 Householder 矩阵

# c# - 查找 POST 参数

> ID：13567983
> 
> 赞同：1
> 
> 时间：2012-11-26T15:32:08.060
> 
> 标签：c#, javascript, html, parameters, http-post

我正在通过分析 Firebug 中的 GET/POST 请求来实现网站自动化。我无法解决的问题是我找不到在 POST 请求中发送的某些特定参数。它在 HTML 中不存在，我在 *.JS 文件中找不到它。它可以在哪里？

或者给我一些关于如何在源中正确查找参数的提示？我发现 Firebug 在这项任务上非常有用。

更新：我在 POST 请求中看到了这个参数。我只是在生成它的 HTML 源代码中找不到代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T15:34:02.813

您可能使用的一种工具是[Fiddler](http://www.fiddler2.com/fiddler2/)，它可以让您捕获发送到网站的数据并对其进行分析。

> 更新：我在 POST 请求中看到了这个参数。我只是在生成它的 HTML 源代码中找不到代码

我懂了。您是否尝试过使用调试器来单步执行 javascript？这可能会帮助您找到创建 POST 的点。POST 也有可能是由服务器端生成的 javascript 生成的——我认为这是绕过跨域`httpxmlrequest`限制（也称为[“同源策略”](http://en.wikipedia.org/wiki/Same_origin_policy)）的一种方式。该模式称为[JSONP](http://en.wikipedia.org/wiki/JSONP)，如果您认为这可能是罪魁祸首。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:33:43.187

POST 参数在请求的正文中提交。如果为空，则表示未提交任何参数。

# image - 将图像的垂直位置作为链接移动而不移动链接本身

> ID：13567984
> 
> 赞同：0
> 
> 时间：2012-11-26T15:32:09.850
> 
> 标签：image, css, hyperlink

我有两个使用图像作为链接的链接。奇怪的是，这些图像的位置比异常位置高一点，如下图所示：

![在此处输入图像描述](../Images/c8881a698670aaf34bf35f96c30de1df.png)

我想将这些图像移动一些像素，使其与文本的其余部分对齐。我已经使用`margin-top`并`padding-top`使用此路径寻址`#foot-content a img`。但是当我移动它们时，它们只是将所有其余的文本向下移动。如果方便的话，我把我的页脚的 html 放在下面。你能告诉我有什么解决方案吗？

```
<footer>    
            <div id="footer-bg-left">
                <div id="foot-content">
                    <p>Diseñado por <a href="mailto:hola@escuderodesign.com">Daniel. R-Escudero</a> <span>|</span> Todos los derechos reservados <span>|</span> <a href="mailto:info@rosasusaeta.com">info@rosasusaeta.com</a> <span>|</span><a href="http://www.linkedin.com/pub/rosa-susaeta/50/1aa/134"><img src="./_img/footer/logo.linked.png"></a> <a href="https://www.facebook.com/rosa.susaetasalichs"><img src="./_img/footer/logo.facebook.png"></a></p>
                </div>
            </div>  
</footer> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:38:51.220

严格来说，我不确定这是否是最佳实践，但我会在 CSS 中做一些相对定位的事情。例如

```
img {
     position: relative;
     top: 10px; /* tweak until correct */
} 
```

# installation - 如何为 SSRS 2012 安装 BIDS？

> ID：13567989
> 
> 赞同：0
> 
> 时间：2012-11-26T15:32:24.280
> 
> 标签：installation, bids, ssrs-2012

我尝试了以下方法：

*   安装 VS 2012 + [Data Tools for 2012](http://msdn.microsoft.com/en-us/jj650015) - 不支持 BIDS 项目。
*   从 SQL Server 2012 媒体安装 VS 2010 + Data Tools - 在安装过程中，它会提示`vs_setup.msi`并在定向到 VS 2010 媒体时 - 安装失败。安装执行回滚，安装了一些东西但不完全。VS 2010 现在可以转换旧版本 (2008 R2) 的项目，但这些项目无法使用。
*   为 VS 2010安装[数据工具，](http://msdn.microsoft.com/en-us/jj650014)项目转换后得到这个：

![在此处输入图像描述](../Images/1dd0022628203a78cdc5d2915b0ef5c1.png)

有谁知道为 SSRS 2012 安装 BIDS 的正确、坚如磐石的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:36:29.200

我在干净的 Windows 2008 R2 服务器上安装了 SQL Server 2012 Data Tools（来自 SQL Server 2012 DVD）。它自动安装了 VS 2010 Shell + SP1，其余安装没有问题 - 我能够将我的 2008 R2 SSRS 项目转换为 2012。

有趣的是，只有解决方案文件被转换，实际的 RDL 文件在转换过程中不会改变。即使对于 2005 (v8) 报告项目也是如此。更有趣的是，内部`*.sln`文件只是标记新的 VS 版本，因此执行转换没有意义——出于兼容性原因，它可能会保留旧格式。

# php - 比较php中两个不均匀的json数组

> ID：13567991
> 
> 赞同：0
> 
> 时间：2012-11-26T15:32:31.970
> 
> 标签：php, arrays, json

嗨，我有两个不均匀的 JSON 数组，我在 php 中解码。第一个数组有 2 个值，其他有 3 个值现在我想从第一个数组到第二个数组搜索一个“id”号并显示名称。有什么办法吗？我会很感激你的帮助。谢谢

这是我的第一个数组的示例

```
[
{
    "id": 5,
    "pb_first_name": "Respect",
    "pb_last_name": "Respect"
},
{
    "id": 41,
    "pb_first_name": "Master",
    "pb_last_name": "Master"
} 
```

]

这是第二个 JSON 数组

```
[
{
    "id": 5,
    "type": "Suite",
    "description": "",
    "number": "105",
    "floor": 1
},
{
   "id": 23,
    "type": "Suite",
    "description": "",
    "number": "220",
    "floor": 2
},
{
   "id": 41,
    "type": "Penthouse",
    "description": "",
    "number": "410",
    "floor": 4
} 
```

]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:39:40.393

您可以使用`array_diff`、`array_intersect`或。由于您没有提到任何代码，我不知道哪一个最适合您的需要。`in_array``array_search`

手册： [array_diff](http://php.net/manual/en/function.array-diff.php)， [array_intersect](http://php.net/manual/en/function.array-intersect.php)， [in_array](http://php.net/manual/en/function.in-array.php)， [array_search](http://php.net/manual/en/function.array-search.php)

**编辑：**

```
$arr1 = array(...); // 1st array
$arr2 = array(...); //2nd array
foreach($arr2 as $v) {
  foreach($arr1 as $m) {
   if ($v['id'] == $m['id'])
    echo $m[pb_first_name'] . " " . $m['pb_last_name'];
 }
} 
```

# jquery - 将变量传递给 jquery load() 函数语法

> ID：13567992
> 
> 赞同：1
> 
> 时间：2012-11-26T15:32:32.883
> 
> 标签：jquery, load

我试图找出如何将变量字符串 staffID 传递给 load() 函数中的 id 选择器。这是一段代码：

```
 $('li.staffAsset').click(function () {
    var staffID = $(this).attr("id");
    openDialog('#descrDialog');
    $('#staffDescr p').load('/staffDescr.html $("#" + staffID)');
    }); 
```

这行不通。基本上在 staffDescr.html 中有 id="staffID" 的 div。我似乎无法找到正确的语法将该变量字符串作为正确的 id 传递给 load() 函数。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T15:34:43.847

您不会将美元函数传递到字符串中。只需使用这个：

```
$('#staffDescr p').load('/staffDescr.html #' + staffID); 
```

请参阅文档：**[加载页面片段](http://api.jquery.com/load/#loading-page-fragments)**。

* * *

另外，也不需要`$(this).attr("id")`. 只需使用`this.id`：

```
$('li.staffAsset').click(function () {
    openDialog('#descrDialog');
    $('#staffDescr p').load('/staffDescr.html #' + this.id);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T15:33:39.403

你把引号弄乱了。只需将 id 放入您的字符串中，您可以替换

```
$('#staffDescr p').load('/staffDescr.html $("#" + staffID)'); 
```

和

```
$('#staffDescr p').load('/staffDescr.html $("#"' + staffID+')'); 
```

但你可能想要

```
$('#staffDescr p').load('/staffDescr.html #' + staffID); 
```

如果您尝试[加载页面片段](http://api.jquery.com/load/)。

# postgresql - 在 PostgreSQL 中为临时变量分配特定的数据类型

> ID：13567999
> 
> 赞同：3
> 
> 时间：2012-11-26T15:32:51.073
> 
> 标签：postgresql, integer, sqldatatypes

我有一个查询，我需要在其他查询中使用查询结果。所以，我使用了“WITH .. As”。问题是临时变量应该是整数，而它是自动以文本数据类型创建的。我如何更改或修改代码以具有整数数据类型的变量。

```
WITH A as (
SELECT ambtemp,
       date_trunc('hour', dt)+
       CASE WHEN date_part('minute', dt) >= 30
            THEN interval '30 minutes'
            ELSE interval '0 minutes'
       END as t
FROM temm),

B as(
SELECT ambtemp,t,

       max(ambtemp) OVER (PARTITION BY t) as max_temp,
       min(ambtemp) OVER (PARTITION BY t) as min_temp
FROM A)
SELECT *

FROM B
WHERE (max_temp - min_temp) <= 0.2 
```

max_temp 和 min_temp 应该以整数数据类型构建，而它们是文本格式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T18:32:08.100

谢谢，@Igor Romanchenko

```
WITH A as (
SELECT ambtemp,
       date_trunc('hour', dt)+
       CASE WHEN date_part('minute', dt) >= 30
            THEN interval '30 minutes'
            ELSE interval '0 minutes'
       END as t
FROM temm),

B as(
SELECT ambtemp,t,

       max(ambtemp::float(23)) OVER (PARTITION BY t) as max_temp,
       min(ambtemp::float(23)) OVER (PARTITION BY t) as min_temp
FROM A)
SELECT *

FROM B
WHERE (max_temp - min_temp) <= 0.2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T15:48:30.567

为了更改类型，您需要使用`::`运算符对其进行转换。因此，要将整数转换为字符串，您可以这样做`myCol::Text`。

在您的特定情况下，您正在做相反的事情：

```
 max(ambtemp) OVER (PARTITION BY t) as max_temp::int,
 min(ambtemp) OVER (PARTITION BY t) as min_temp::int 
```

您可能想通过以下方式检查空值：

```
NULLIF(your_value, '')::int 
```

我也会对不可转换为整数的值持谨慎态度。

有关强制转换和类型的更多信息，请参阅[PostgreSQL 文档](http://www.postgresql.org/docs/9.1/static/sql-expressions.html)。