# StackOverflow 问答 13835000-13835999

# asp.net-mvc - 每个系列的Highcharts工具提示格式？

> ID：13835000
> 
> 赞同：0
> 
> 时间：2012-12-12T07:38:58.413
> 
> 标签：asp.net-mvc, highcharts, dotnethighcharts

我正在使用 dotnetHightcharts

基本柱形图

```
public static Highcharts BasicColumnChart(Series[] Series, string[] Categories, string Title = "", string SubTitle = "", string XAxisTitle = "", string YAxisTitle = "", string ToolTipFormat = "", string YAxisLabel = "")
{
    Highcharts chart = new Highcharts("chart")
        .InitChart(new Chart { DefaultSeriesType = ChartTypes.Column, Height = 300 })
        .SetTitle(new Title { Text = Title })
        .SetSubtitle(new Subtitle { Text = SubTitle })
        .SetXAxis(new XAxis { Categories = Categories })
        .SetYAxis(new YAxis
        {
            Min = 0,
            Title = new YAxisTitle { Text = YAxisTitle },
            Labels = new YAxisLabels
            {
                 Formatter = @"function() { return this.value +' " + YAxisLabel + "';}"
            }
        })
        .SetLegend(new Legend
        {
            Layout = Layouts.Vertical,
            VerticalAlign = VerticalAligns.Top,
            Align = HorizontalAligns.Right,
            Shadow = true,
            BackgroundColor = ColorTranslator.FromHtml("#FFFFFF"),
            Floating = true
        })
        .SetTooltip(new Tooltip { Formatter = @"function() { return ''+ this.x +' - '+ this.y +' " + ToolTipFormat + "'; }" })
        .SetPlotOptions(new PlotOptions
        {
            Column = new PlotOptionsColumn
            {
                PointPadding = 0.2,
                BorderWidth = 0
            }
        })
        .SetSeries(Series);

    return chart;
} 
```

我可以使用以下行为每个系列设置相同的 tooltipFormat：

```
.SetTooltip(new Tooltip { Formatter = @"function() { return ''+ this.x +' - '+ this.y +' " + ToolTipFormat + "'; }" }) 
```

以上代码输出：`date - value tooltipFormat`

但我想为每个系列展示不同的格式。我为什么要这个，因为我想显示具有不同单位的不同数据，例如：

```
value[0] = 220 V    //Volt
value[1] = 5 A      //Ampere
...
value[15] = 1200 kW //Kilowatt 
```

关于这个主题有很多例子，但是这些例子只改变文本。我的数据视图是这样的：

```
NAME     VALUE    UNIT

Volt     220      V
Ampere     5      A
.... 
```

我想动态更改每个系列的 tooltipFormat。我想`UNIT`动态添加字段。我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T07:42:58.810

您可以在系列对象中添加自定义属性：

```
series:{name:'series1',unit:'%'} 
```

并且可以在工具提示格式化程序功能中访问它：

```
this.series.options.unit 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-12T05:12:17.817

您可以在系列中直接执行此操作：

[http://api.highcharts.com/highcharts#plotOptions.series.tooltip.valueSuffix](http://api.highcharts.com/highcharts#plotOptions.series.tooltip.valueSuffix)

例如，这是一个系列：

```
series: [{
       data: [10, 20, 30],
       type: "line",
       name: "Percentage",
       tooltip: { valueSuffix: "%", }
     },] 
```

# algorithm - DFS 算法在计算后边时是否区分祖先和父项？

> ID：13835006
> 
> 赞同：0
> 
> 时间：2012-12-12T07:39:27.793
> 
> 标签：algorithm, graph-algorithm

下面是 DFS 的通用代码，带有用于标记后边缘和树边缘的逻辑。我的疑问是来自顶点的后边返回并指向祖先，而指向父节点的后边不是后边（让我们假设无向图）。在无向图中，我们在 2 个顶点 x 和 y 之间来回有一条边。因此，在我处理 y 时访问 x 后，y 将 x 作为相邻顶点，但由于它已经被访问过，代码会将其标记为后边缘。

我这样说对吗？如果我的假设有效，我们是否应该添加任何额外的逻辑来避免这种情况？

```
DFS(G)
for v in vertices[G] do
    color[v] = white    
    parent[v]= nil
    time = 0        

for v in vertices[G] do
    if color[v] = white then
    DFS-Visit(v)

Induce a depth-rst tree on a graph starting at v.

DFS-Visit(v)
    color[v]=gray
    time=time + 1
    discovery[v]=time
    for a in Adj[v] do
       if color[a] = white then
        parent[a] = v
        DFS-Visit(a)
        v->a is a tree edge
       elseif color[a] = grey then  
        v->a is a back edge
    color[v] = black
    time = time + 1 
```

白色表示`unexplored`，灰色表示`frontier`，黑色表示`processed`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:53:32.533

是的，此实现`frontier`仅通过颜色（已访问，未访问）确定节点，因此不分离父节点和祖先节点。因此，DFS 搜索树中的每条边都将被标记为后边。

为了分离树边缘和后边缘，您需要将边缘与父节点和祖先节点分开。简单的方法是将父节点作为参数提供给 DFS-Visit ( `p`)。例如：

```
DFS-Visit(v, p)
 color[v]=gray
 time=time + 1
 discovery[v]=time
 for a in Adj[v] do
   if color[a] = white then
       parent[a] = v
       DFS-Visit(a,v)
       v->a is a tree edge
   elseif color[a] = grey and (a is not p) then
       v->a is a back edge
 color[v] = black 
 time = time + 1 
```

**更新：**我没有注意到您已经存储了父节点。因此，无需引入参数：

```
DFS-Visit(v)
 color[v]=gray
 time=time + 1
 discovery[v]=time
 for a in Adj[v] do
   if color[a] = white then
       parent[a] = v
       DFS-Visit(a)
       v->a is a tree edge
   elseif color[a] = grey and (a is not parent[v]) then
       v->a is a back edge
 color[v] = black 
 time = time + 1 
```

# mysql - 插入选择其中 col = col

> ID：13835010
> 
> 赞同：1
> 
> 时间：2012-12-12T07:39:44.123
> 
> 标签：mysql, sql

请有人帮助我，我有一个用户表和另一个包含用户和日期时间的表（这是一个日志文件，每个用户存在多个日期）。我需要从日志表中获取最近的日期并将其插入到同一用户旁边的第一个表中。

这就是我所拥有的，但它不起作用：

```
INSERT INTO tb1 n (DT) 
SELECT w.DT 
FROM tb2 w
WHERE w.User = n.User
ORDER BY w.DT DESC
limit 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T07:48:24.703

您不需要`INSERT`在此处使用语句，因为您的表上已经存在记录。但取而代之`UPDATE`的是`JOIN`

```
UPDATE  tb1 a
        INNER JOIN
        (
            SELECT  user, MAX(DT) maxDT
            FROM    tb2
            GROUP by user
        ) b ON a.user = b.user
SET     a.DT = b.maxDT 
```

# apache - XAMPP Apache 无法启动

> ID：13835011
> 
> 赞同：9
> 
> 时间：2012-12-12T07:39:49.353
> 
> 标签：apache, xampp, port80

我正在使用 Windows 8 专业版。我刚刚安装了 XAMPP Windows 1.8.1。我试图从 XAMPP 控制面板启动 Apache，但它不会启动。它给出了以下错误。

![在此处输入图像描述](../Images/576fbb410edb1b5ba1e538b816fd5924.png)

我也没有运行 IIS 服务，Web 部署代理服务也没有运行，万维网发布服务也没有运行..

可能是什么问题呢？有人可以帮忙吗？

**[错误日志](http://pastebin.com/uC04MCvP)**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-09T15:19:37.103

正如前面在评论中提到的 - 并测试了我自己：

这个错误比较模糊。因此，您应该检查位于`\xampp\apache\logs`

当我遇到这个问题时，是因为 Skype 已经在侦听端口 80 和 445。我能够通过退出 Skype、启动 Apache 服务，然后重新启动 Skype 来解决这个问题。您可以通过打开命令提示符并键入来检查当前端口侦听器`Netstat -a`

还建议关闭用户帐户控制，因为它可能会阻止 xxamp 内置的某些功能。

不过在此之前，我在修改我的 Apache httpd.conf 文件后遇到了一个问题。恢复这些更改（或在用户的情况下重新安装）将解决该问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-05-17T13:34:09.027

致 Windows 用户：

您可以通过直接调用 apache httpd-service 轻松“调试”此错误。

1.  去`XAMPP\apache\bin`
2.  在此处打开 cmd-shell 或 Powershell（从资源管理器中：“Shift”+“右键单击”文件夹中的空白区域）
3.  进入`httpd.exe`
4.  读取输出

它通常位于文件夹中众多 *.conf 文件之一中`XAMPP\apache\conf\extra`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-24T06:04:14.527

我在 Windows 8 64 位的 XAMPP [XAMPP 控制面板 v3.2.1] 中也遇到了这个问题。

我做的第一件事是使用“Take Ownership”命令（参见下面的链接），这会产生更好的错误消息。

从上面的错误消息更改为：5:49:08 pm [Apache] 检测到问题！下午 5:49:08 [Apache] 端口 80 被“C:\Program Files (x86)\Skype\Phone\Skype.exe”使用，PID 为 4968！下午 5:49:08 [Apache] Apache 不会在没有配置的免费端口的情况下启动！下午 5:49:08 [Apache] 您需要卸载/禁用/重新配置阻塞应用程序 下午 5:49:08 [Apache] 或重新配置 Apache 和控制面板以侦听不同的端口

关闭 skype 解决了这个问题，重新打开 skype 允许它自己更改端口号。

添加这个只是因为谷歌发现这个错误是“xampp apache wont start”的最佳结果。很抱歉在较旧的问题上发帖。

取得所有权命令： [http ://www.eightforums.com/tutorials/2814-take-ownership-add-context-menu-windows-8-a.html](http://www.eightforums.com/tutorials/2814-take-ownership-add-context-menu-windows-8-a.html)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-07-09T05:16:19.470

我正在使用 Window 7，我也遇到了同样的问题，我正在使用 Skype 并且没有启动 Apache，但最终解决了这个问题，现在它正在工作

检查连接设置 在 Skype 中单击工具 -> 单击选项 -> 单击高级 -> 单击连接 未选中的端口号，然后单击保存。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-03-07T16:46:47.303

在控制面板中查看：服务尚未安装！

单击 (X) 按钮在 Windows 服务中安装 apache 并重新启动，它现在应该可以工作了。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-09-02T23:45:22.527

我遇到了同样的错误，错误日志为空，我最终通过 XAMPP 将 Apache 安装为服务。

现在，当我尝试启动 Apache 时，我至少在 Windows 事件查看器中得到了一些信息性错误。

原来是一个缺少的虚拟主机目录，很容易修复，但是我只能在尝试将 Apache 作为服务启动时看到这个错误。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-06-03T03:36:50.537

首先，安装后重启windows。尽管可能很奇怪，但这确实很重要。此外，检查占用端口 80 的所有应用程序（例如 Skype）。

最后，什么解决了我的情况 - 端口 443。VMWare 一直在使用这个端口。杀死 VMWare 进程后，Apache 工作得很好。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-05-25T10:22:18.613

我将它重新安装在另一个驱动器中并修复了它。但我不知道是什么导致了这个问题。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-03-17T22:49:49.507

我在位于 C:\xampp\apache\conf\extra 的 httpd-ssl.conf 中评论了 Listen 443 指令，这对我有用。下次重启 Apache 是绿色的

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-11-06T15:55:57.103

我有同样的问题。我以管理员身份启动了 Xampp 控制面板。那行得通。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-06-26T18:17:40.417

对于 Linux 用户：

解决方案：在终端：sudo /etc/init.d/apache2 stop

编辑：如果您在下一台计算机启动时仍然遇到这种错误，那么您可能在计算机启动时启动了 apache2 进程。

要防止 apache2 在启动时自动启动： cd /etc/init.d/ sudo update-rc.d -f apache2 remove

重新启动您的计算机，现在希望您可以从 XAMPP 控制面板打开 Apache！

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-02-27T07:00:39.497

某些进程正在使用端口 443，因此您可以更改 xampp 使用的端口，以便能够使用它。对于这项工作，你必须这样做：

1- 在 xampp\apache\conf\extra 中打开 httpd-ssl.conf

2- 查找包含 Listen 443 的行

3-将端口号更改为您想要的任何内容。我使用 4430。例如。听 4430。

4-将该文件中的每 443 个字符串替换为 4430 并保存文件。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-11-12T13:14:51.463

我遇到了这个问题，我更愿意释放端口 .80 并且我的 XAMPP/Apache 再次重新启动。这就是我免费使用 .80 端口的方式。首先： - 打开命令提示符并输入：

```
netstat -aon | findstr :80 
```

你会得到这个显示：[![在此处输入图像描述](../Images/d13ba2c728cc47966f61fbc14378666e.png)](https://i.stack.imgur.com/Tfobo.png)

然后键入以下命令：

```
tasklist /fi "pid eq 4" 
```

您将获得使用显示的进程的名称。现在，在邀请中按：Win+R services.msc，然后按确定。现在您可以开始停止所有可以使用端口 .80 的服务。

在这里找到其中一些：W3SVC、WAS、SSRS、PeerDistSvc、NcbService。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-10-12T22:31:32.860

在尝试了上面给出的所有建议之后。禁用这个，安装那个。我从一开始就打开了 xampp-control 管理器，但这是以管理员身份打开的。我打开后。MySQL 被禁用。我禁用所有程序并先启用 apache，然后再启用 MySQL。突然开始工作没有问题。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-12-02T18:30:09.007

我授予所有用户对 xampp 文件夹（包括子目录）的完全访问权限。之后它起作用了。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-05-27T07:12:29.883

直接从命令提示符打开 services.msc 并禁用 SQL Server 报告服务

& SQL Server 分析服务。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-11-14T13:08:23.257

我有同样的情况。原因是我已将 htdocs 文件夹位置更改为另一个驱动器，尽管出于物理原因进行了适当的配置，但在启动 apache 时驱动器无法访问：使其可访问后问题已解决。一般来说，当 apache 没有找到所有组件时，它不会启动似乎是合乎逻辑的。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-12-08T17:34:38.370

我遇到了同样的问题，但在阅读自述文件后，我意识到我没有安装 Microsoft Visual C++ 2008 Redistributable。我安装后，一切正常

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2014-12-22T00:06:31.507

虽然这个人的问题似乎已经得到解答，但我只是想补充一下，我收到了这个错误，因为我的 httpd-vhosts.conf 文件中有错字（赶时间，没有在 VirtualHost 标签上指定端口） .

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2015-04-06T06:56:28.310

如果您已关闭 Skype 并且问题仍然存在。试试这个。可能是apache在重新启动时设置为自动。这意味着 apache 已经在使用该端口。转到 XAMPP 控件中的服务并查找 apache（无论您拥有什么版本）。查找启动类型并双击它以将其设置为手动。

希望这有效！

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2015-09-30T22:07:04.517

如果它对任何人都有帮助，我目前在我的计算机中使用 VMWare Workstation，它还阻止 Apache 启动，因为 VMWare Workstation 侦听端口 443 上的请求。

您可以在“httpd-ssl.config”中注释掉“listen 443”，也可以从 VMWare Workstation General Preferences 中禁用“Shared VMs”。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2015-11-06T23:42:30.077

这很简单，如果你们有并使用你的Skype端口，从Skype设置->连接中关闭它们的端口，并取消标记端口，如它在端口80到443的位置。

问题解决了！！！

# android - 点击广告图片打开另一个网页视图

> ID：13835012
> 
> 赞同：0
> 
> 时间：2012-12-12T07:39:50.040
> 
> 标签：android, webview

我正在开发一个应用程序，我必须在其中显示一个广告，设置它的位置并且广告正在显示，但是当我们点击广告图片时，它会在同一个 webview 中打开。但是我想当我们点击另一个 webbview 时应该打开显示。可以任何请帮助我。谢谢

**代码：**

```
WebView ad = (WebView) findViewById(R.id.ad);
ad.loadUrl(url);
ad.setWebViewClient(new MyWebViewClient());
class MyWebViewClient extends WebViewClient {
    @Override
    // show the web page in webview but not in web browser
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        view.loadUrl(url);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:47:32.517

尝试切换第二行和第三行，我认为问题是您在设置 webviewclient 之前加载了 url：

```
 WebView ad = (WebView) findViewById(R.id.ad);
 ad.setWebViewClient(new MyWebViewClient());
 ad.loadUrl(url);

 class MyWebViewClient extends WebViewClient {
   @Override
    // show the web page in webview but not in web browser
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        getApplicationContext().startActivity(
        new Intent(Intent.ACTION_VIEW, Uri.parse(url)));
            return true;
     }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:31:14.543

最后使用.......以下代码完成了这个

```
private class MyClient extends WebViewClient {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
            startActivity(intent);
            return true;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-05T17:40:09.527

我承认，当您注释掉您的 . 时`ad.setWebViewClient(new MyWebViewClient());`，webview 中的横幅广告确实会启动一个新视图。

我只用一个锚标签来包装`img`标签，这完全适用于我使用 Android 4.4 的开发

# css - Selenium 单击具有相同类名的 CSS elmenents

> ID：13835013
> 
> 赞同：0
> 
> 时间：2012-12-12T07:39:53.147
> 
> 标签：css, selenium, selenium-ide

我正在尝试单击“class=uiComposerAttachment photoAttachment”的第二个元素

![用于 Firefox 的 Selnium IDE](../Images/d6666196f7ed2b2951acb1ad1f869ebf.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:03:29.423

与 XPath 不同的是`nth-child`在 CSS 中使用定位器。请注意，IE8 及更低版本不支持此功能，但其他现代浏览器会很好。获取第二个元素的示例：

```
css=*.uiComposerAttachment:nth-child(2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T08:30:34.713

您必须找到该类的 Xpath 并使用 Xpath 然后尝试。

```
 click | //*[@class='uiComposerAttachment photoAttachment'] 
```

在 selenium IDE 中使用它

您能否提供快照，如何找到该类的 Xpath

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T09:14:05.207

如果有多个元素具有相同的 xpath，您可以尝试以下 xpath 格式来单击所需的元素。

根据您的应用程序，您有 2 个具有相同 xpath 的元素。因此，您可以使用下面的 xpath 来单击第二个元素。

xpath=(//select[@name='listPartition'])[position()=2]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T08:04:58.350

尝试这个

```
//*[@class='uiComposerAttachment photoAttachment'][2] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T05:43:29.550

As class is same, you need to identify element as per position. This is second element that you mentioned, so you can use

```
xpath=(//*[@class="uiComposerAttachment photoAttachment"])[2] 
```

# android - 搜索项目位置

> ID：13835014
> 
> 赞同：0
> 
> 时间：2012-12-12T07:39:54.420
> 
> 标签：android, search

我正在开发一个使用列表视图和搜索栏的 Android 应用程序。当我点击任何搜索过的项目时，它将显示起始项目，而不是点击的项目。

谁能帮助我如何获得所选项目的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:44:37.223

您可以使用它来获取所选项目的位置

```
YourList.setOnItemClickListener(new OnItemClickListener(){

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            SelectedId = YourList.getItemIdAtPosition(arg2);}}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T07:48:23.923

**-**使用`getItemIdAtPosition()`方法。

**例如：**

```
ListView lv = (ListView) findViewById(R.id.listView_ProductList);
lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {

                i = new Intent(ProductActivity.this, ProductDetails.class);
                // i.putExtra("keyAapo", arg2 );

                i.putExtra("keyAapo", (int) lv.getItemIdAtPosition(arg2));

                startActivity(i);

            }

        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T07:51:29.037

首先，在单击`listview`项目时，

1.  得到`position`那个项目的`listview`
2.  `strings`如果有的话，将/传递`values`给那个`intent`。
3.  导航到下一个的意图`class`如下：

    ```
     YourListView.setOnItemClickListener(new OnItemClickListener(){
      public void onItemClick(AdapterView<?> parent, View view,
              int position, long id) {
            Cursor listItem = (Cursor)<YourListView>.getItemAtPosition(position);
                    String lID = listItem.getString(1); 
            Intent i= new Intent(<ClassName>.this, <Navigate to Class>.class)
                    i.putExtra("lID", lID); // key-value pair
        startActivity(i);
        }}); 
    ```

# php - 如何使用多个连接从不同的表中选择总和和计数

> ID：13835015
> 
> 赞同：1
> 
> 时间：2012-12-12T07:40:04.627
> 
> 标签：php, mysql, sql

我需要从许多表中生成一些关于过滤器的大数据，在那里我还需要获取一些列的总和，以及像示例这样的行数

我有 5 条记录

身份证 | 姓名 | 已删除

1 | 一个 | 1
2 | 一个 | 0
3 | 一个 | 1
4 | 乙| 1
5 | C | 1

我有疑问，

```
SELECT  p.name, sum(p.deleted) as del, count(p.id) as numbers from products as p
join other AS b ON p.id=b.id 
```

我需要的输出是，

```
The sum of deleted records 
```

姓名 | 删除 | 数数

一个 | 2 | 3
乙 | 1 | 1
℃ | 1 | 1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T07:44:32.007

试试这个 ：：

```
SELECT  
p.name, 
sum(p.deleted) as del, 
count(id)  as numbers
from products as p
join other AS b ON p.id=b.id 
group by p.name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T07:44:39.173

您无需加入即可获得结果。这应该有效：

```
SELECT name, sum(deleted), count(1)
FROM products
GROUP BY name 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T07:44:56.257

```
SELECT  name,
        SUM(CASE WHEN deleted = 1 THEN 1 ELSE 0 END) Deletion,
        COUNT(*) `COunt`
FROM    products 
GROUP BY name 
```

或者

```
SELECT  name,
        SUM(deleted) Deletion,
        COUNT(*) `COunt`
FROM    products 
GROUP BY name; 
```

*   [SQLFiddle 演示（*两个查询*）](http://sqlfiddle.com/#!2/2d3a3/2)

# jboss - JBoss jar 库文件

> ID：13835016
> 
> 赞同：0
> 
> 时间：2012-12-12T07:40:22.630
> 
> 标签：jboss, jar

在 JBoss 中，如果你有一个 ear 归档文件，那么告诉环境 lib 文件夹的位置（它可以在哪里找到库文件）的方法是 application.xml 文件。

现在我将 ear 文件拆分为单独的 .war 和 .jar 文件。我没有ear文件夹了，所以我直接在JBoss中部署war和jar。

在战争档案中，我有 html 和 servlet 文件。在 jar 档案中，我有 bean 文件。现在这些库文件只需要 java bean，而不是 servlet。

所以我需要.jar 文件中的一个文件夹来放置 lib 文件，并需要一种方法来告诉系统这个文件夹的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:07:42.477

如果您想将 jar 库放在 ejb-jar 中：您不能，标准规范不允许您将 jar 放在另一个 jar 中。也许一些供应商为此提供了特定的解决方案，但这些不是标准的。标准解决方案是将所有相关的罐子放在耳朵内。你可以做的，这是标准的，将库 jar 放在战争的 WEB-INF/lib 目录中；但 ejb-jar 不提供类似的结构。

# asp.net - 自定义 Web 配置部分类中的验证

> ID：13835018
> 
> 赞同：0
> 
> 时间：2012-12-12T07:40:27.593
> 
> 标签：asp.net, regex, web-config

我有一个自定义 Web 配置类。我想将 RegexStringValidator 作为属性添加到 Web 配置属性，例如：

```
[ConfigurationProperty("siteDomainName", DefaultValue = "")]
        [RegexStringValidator(@"^([a-zA-Z0-9_-]*(?:\.[a-zA-Z0-9_-]*)+):?([0-9]+)?/?")]
        public string SiteDomainName
        {
            get
            {
                return (string) this["siteDomainName"];
            }
            set 
            { 
                this["siteDomainName"] = value;
            }
        } 
```

我得到的错误是：

> 该值不符合验证正则表达式字符串 '^([a-zA-Z0-9_-]*(?:.[a-zA-Z0-9_-]*)+):?([0-9] +)?/?'。

即使提供的值是正确的并且与正则表达式匹配。这是什么问题？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:57:45.940

就像 ronen 在他的评论中所说，您的默认值也应该与正则表达式匹配。例如，请参阅此答案：[https](https://stackoverflow.com/a/5313223/4830) ://stackoverflow.com/a/5313223/4830 。原因是默认值也会被评估**和**验证，即使您在 web.config 文件中设置了一个值。

像这样的东西应该可以工作（默认值验证，并且属性是必需的，因此在实践中它不应该实际使用默认值）：

```
[ConfigurationProperty("siteDomainName", DefaultValue="www.example.com", IsRequired=True)]
[RegexStringValidator(@"^([a-zA-Z0-9_-]*(?:\.[a-zA-Z0-9_-]*)+):?([0-9]+)?/?")]
public string SiteDomainName
... 
```

如果您不想要默认值，您可以更改正则表达式以接受空字符串，方法是使整个值基本上是可选的：

```
[ConfigurationProperty("siteDomainName", IsRequired=False)]
[RegexStringValidator(@"^(([a-zA-Z0-9_-]*(?:\.[a-zA-Z0-9_-]*)+):?([0-9]+)?/?)?$")]
public string SiteDomainName
... 
```

请注意，`IsRequired`在这两个代码示例中，使用最适合您需求的那个。请注意，默认值始终会被验证。

# javascript - JavaScript / 不区分大小写

> ID：13835023
> 
> 赞同：1
> 
> 时间：2012-12-12T07:41:00.820
> 
> 标签：javascript, case-sensitive, case-insensitive

我有这个功能来过滤值以实现自动完成功能：

```
 store.filter(new Ext.util.Filter({
    filterFn: function (object) {
        var match = false;
        Ext.Object.each(object.data, function (property, value) {
        match = match || value.match(Ext.getCmp('search_input_text').getValue());

        });
        return match;
      } 
```

我需要它不区分大小写，以便大小写相同。

```
value.match(Ext.getCmp('search_input_text').getValue()); 
```

类似于`LIKE`sql 中的东西。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:47:46.927

```
var a = "ABC"
a = a.toLowerCase();
//a == "abc" 
```

将两个值都转换为小写，然后比较它们。如果它们是相同的字母，无论大小写如何，它都会返回 true：

假设你`value`是一个`String`：

```
var input = Ext.getCmp('search_input_text').getValue();
match = value.toLowerCase().match(input.toLowerCase()) ? input : match; 
```

这使用临时变量以原始大写返回值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T07:53:53.513

如果你想要一个不区分大小写的搜索，你可以写

```
match = (match.toLowerCase().indexOf("search_input_text") >= 0) ? "search_input_text" : match; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T07:57:50.953

1.  正则表达式有一个使用字符串参数的构造函数。
2.  如果您需要布尔结果，请不要使用**match**，而是使用**test**。

    ```
    store.filter(new Ext.util.Filter({
        filterFn: function (object) {
            var match = false;
            Ext.Object.each(object.data, function (property, value) {
                var filterValue = Ext.getCmp('search_input_text').getValue();  
                var r = new RegExp(filterValue, 'i'); 
                match = match || r.test(value);  
            });
            return match;
        }
     ...
     } 
    ```

# printing - 如何仅打印选定的图表元素 (EA)

> ID：13835030
> 
> 赞同：0
> 
> 时间：2012-12-12T07:41:23.583
> 
> 标签：printing, diagram, enterprise-architect

我在版本 9.2 (OS Windows7) 中使用 Enterprise Architect。我试图只打印一个选定的类图。但无论出于何种原因，无法在打印机对话框中选择此选项。我确实看到了该选项，但它是灰色的。

那么有什么技巧可以让我只打印标记/选定的类吗？

感谢您的帮助基督徒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:57:13.280

似乎无法打印选定的类。

你可以做的是：

*   从图中选择类
*   复制剪贴板 - ctrl-c
*   向模型添加一个新的类图（将其命名为“仅用于打印”:)）
*   粘贴类 - ctrl-v
*   打印它

对原始类关系和属性的任何更新都会在图表之间保留

# macros - 双 Clojure/ClojureScript 库设计和宏

> ID：13835031
> 
> 赞同：4
> 
> 时间：2012-12-12T07:41:26.080
> 
> 标签：macros, clojure, leiningen, clojurescript

假设我有一个带有 namespace 的库 xx `xx.core`，我正在用纯 Clojure 编写它，打算同时针对 Clojure 和 ClojureScript。~~这样做的实际方法似乎是使用[lein-cljsbuild 的交叉和条件注释](https://github.com/emezeske/lein-cljsbuild/blob/0.2.9/doc/CROSSOVERS.md)。到现在为止还挺好。~~ **这个前提现在已经过时了。lein-cljsbuild 已被弃用，取而代之的是[reader conditionals](https://clojure.org/guides/reader_conditionals)，并且还有许多其他命名空间/宏 ClojureScript 增强功能。请参阅下面的[更新答案](https://stackoverflow.com/a/46986345/644104)。**

假设 xx 有一堆变量，我希望它的用户（无论是在 Clojure 还是 ClojureScript 中）都能够使用。这些可以分为三种类型的变量。

*   宏
*   不依赖 xx 中的宏的函数/其他变量（我将这些称为 type-1 变量）
*   恰好发生的函数/其他变量依赖于 xx 中的宏（我将称这些类型为 2 变量*）*

`.cljs`但是，由于 ClojureScript 要求宏在它们自己的特殊命名空间中与常规命名空间分开`.clj`，因此所有宏都必须与`xx.core`.

但是其中一些其他 var（type-2 var）的实现偶然地依赖于这些宏！

（可以肯定的是，似乎只有宏可以使用ClojureScript`use-macro`或`require-macro`.`xx/core.clj`在 ClojureScript 测试文件中使用`(:use-macro xx.core :only […])`. 编译器然后为ClojureScript 文件引用`WARNING: Use of undeclared Var`的每个非宏变量发出一条消息。）`xx.core`

在这种情况下，人们倾向于做什么？在我看来，我唯一能做的就是……将库的公共 API 拆分为*三个*命名空间：一个用于类型 1 变量，一个用于宏，一个用于类型 2 变量。类似...<code>xx.core, `xx.macro`, and `xx.util`?...</p>

当然，这很糟糕，因为现在 xx 的任何用户（无论是在 Clojure 还是 ClojureScript 中）都必须*知道*每个 var（可能有几十个）是否在其实现中碰巧依赖于一个宏，以及它因此而依赖于哪个命名空间属于。如果我只针对 Clojure，这将是不必要的。如果我想同时针对 Clojure 和 ClojureScript，这真的是现在的情况吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-10-28T04:46:47.623

这个问题的前提在几年前基本上已经过时了。通过此更新，我正在尽自己的一份力量，不要让过时的信息污染网络。

与 Clojure 不同，ClojureScript 通常在与运行时分开的编译阶段编译宏。还有很多附带的复杂性。但是，由于多项改进，情况已大大改善。

从[2015 年的 1.7 版开始](http://blog.cognitect.com/blog/2015/6/30/clojure-17)，Clojure 和 ClojureScript 现在支持[读取器条件](https://clojure.org/guides/reader_conditionals)`.cljc`，这使得可以在同一个文件中为 Clojure、ClojureScript、Clojure CLR 或所有三个定义宏和函数： `#?(:clj …, :cljs …, :cljr …, :default …)`. 仅此一项就可以缓解大部分问题。

此外，ClojureScript 本身现在已经进行了一些增强，`ns`从而消除了命名空间用户的许多其他附带的复杂性。它们现在记录在[与 Clojure 的区别，§ 命名空间](https://www.clojurescript.org/about/differences#_namespaces)中。它们包括隐式宏加载、内联宏规范和自动别名`clojure`命名空间：

> **隐式宏加载**：如果需要或使用名称空间，并且该名称空间本身需要或使用其自己的名称空间中的宏，则将隐式需要或使用相同规范的宏。此外，在这种情况下，宏变量可能包含在 :refer 或 :only 规范中。这通常会导致简化库的使用，因此使用命名空间不需要关注明确区分某些变量是函数还是宏。例如：
> 
> `(ns testme.core (:require [cljs.test :as test :refer [test-var deftest]]))`将导致 test/is 正确解析，以及 test-var 函数和 deftest 宏不合格。
> 
> **内联宏规范**：为方便起见， :require 可以指定为 :include-macros true 或 :refer-macros [syms...​]。两者都脱糖成显式加载包含宏的匹配 Clojure 文件的表单。（这与内部需要的命名空间是否需要或使用自己的宏无关。）例如：
> 
> ```
> (ns testme.core
>   (:require [foo.core :as foo :refer [foo-fn] :include-macros true]
>             [woz.core :as woz :refer [woz-fn] :refer-macros [apple jax]])) 
> ```
> 
> 是糖
> 
> ```
> (ns testme.core
>   (:require [foo.core :as foo :refer [foo-fn]]
>             [woz.core :as woz :refer [woz-fn]])
>   (:require-macros [foo.core :as foo]
>                    [woz.core :as woz :refer [apple jax]])) 
> ```
> 
> **自动别名`clojure`命名空间**：如果`clojure.*`需要或使用不存在的命名空间，并且存在匹配的 cljs.* 命名空间，则将加载命名空间并从命名空间到命名空间`cljs.*`自动建立别名。例如：`clojure.*``cljs.*`
> 
> ```
> (ns testme.core (:require [clojure.test])) 
> ```
> 
> 会自动转换为
> 
> ```
> (ns testme.core (:require [cljs.test :as clojure.test]))` 
> ```

最后，ClojureScript 现在有了第二个目标：引导的、自托管的 ClojureScript，也就是 CLJS-in-CLJS。与 CLJS-on-JVM 编译器相比，引导的 ClojureScript 编译器实际上可以编译宏！分离仍然在源文件中强制执行，但它的 REPL 可以将它们与函数混合运行。

Mike Fikes 就 Clojure–ClojureScript 可移植性的这些和其他问题撰写了一系列有价值的文章，同时这些功能正在开发中。这些包括：

*   [《便携微距沉思》，2015](http://blog.fikesfarm.com/posts/2015-06-19-portable-macro-musing.html)
*   [“在 2015 年 REPL 上搞砸宏](http://blog.fikesfarm.com/posts/2015-09-07-messing-with-macros-at-the-repl.html)
*   [“ClojureScript 宏函数”，2015](http://blog.fikesfarm.com/posts/2015-12-12-clojurescript-macro-functions.html)
*   [“ClojureScript 宏塔和循环”，2015](http://blog.fikesfarm.com/posts/2015-12-18-clojurescript-macro-tower-and-loop.html)
*   [“ClojureScript 宏调用函数”，2016](http://blog.fikesfarm.com/posts/2016-01-05-clojurescript-macros-calling-functions.html)
*   [“ClojureScript 宏糖”，2016](http://blog.fikesfarm.com/posts/2016-03-01-clojurescript-macro-sugar.html)
*   [《倒塌的宏塔》，2016](http://blog.fikesfarm.com/posts/2016-03-04-collapsing-macro-tower.html)

即使在 2017 年，看到 ClojureScript 继续成熟也是令人兴奋的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T19:03:44.193

看来您正确理解了情况:)

关于：“xx 的任何用户（无论是在 Clojure 还是 ClojureScript 中）都必须知道每个 var（可能有几十个）是否在其实现中碰巧依赖于一个宏，以及它因此属于哪个命名空间。”

您可以再添加两个命名空间，api.clj 和 api.cljs，其中包括该 api 的每个 var 的正确命名空间，并从该决定中消除一些痛苦。不过，这个领域似乎仍然很新。

# datepicker - jQuery Datepicker 仅在我第一次单击另一个输入字段时触发

> ID：13835037
> 
> 赞同：0
> 
> 时间：2012-12-12T07:41:53.020
> 
> 标签：datepicker, jquery

使用日期选择器时我有一些奇怪的行为。当我加载页面并直接单击日期选择器输入时，没有任何反应。当我再次单击时，没有任何反应。但是当我单击另一个输入字段然后再试一次 datepicker 字段时，它会显示出来。

在我将 datepicker 触发器放入实时函数后，问题出现了，因为我有将动态生成的输入。

这是我的代码：

```
$(".date").on('click', function() {
    $(this).datepicker({
        dateFormat: "dd.mm.yy",
        altField: $(this).closest("td").find(".dateFormated"),
        altFormat: "yy-mm-dd"
    })
}) 
```

编辑：我已经看到`live()`从 1.7 开始已弃用。因此，我切换`live()`到`on()`. 虽然没有解决问题。

整个 HTML

```
<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="content-type" content="text/html" />
    <meta name="author" content="gencyolcu" />

    <title>Untitled 1</title>
    <link rel="stylesheet" href="http://localhost:8082/ivy/page/designer/ZWM$1/css/cupertino/jquery-ui-1.9.2.custom.css" />
    <script type="text/javascript" src="http://localhost:8082/ivy/page/designer/ZWM$1/jquery.min.js"></script>
    <script type="text/javascript" src="http://localhost:8082/ivy/page/designer/ZWM$1/js/jquery-ui-1.9.2.custom.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            counter = 0;

            $("#addRow").click(function() {
                counter++;

                rowHtml = '\
                <tr class="datarow" id="row' + counter + '">\
                    <td><input type="text" class="date" /><input type="text" class="dateFormated" /></td>\
                    <td><input type="text" class="from" /></td>\
                    <td><input type="text" class="to" /></td>\
                    <td>\
                        <select class="type">\
                            <option value="1">Typ 1</option>\
                            <option value="2">Typ 2</option>\
                        </select>\
                    </td>\
                    <td class="removeRow" id=' + counter + '>X</td>\
                </tr>';

                $('#submitButton').before(rowHtml);
            })

            $(".removeRow").live("click", function() {
                id = $(this).attr("id");
                $("#row" + id).remove();
            })

            $("[name=formZeitdaten]").submit(function(i) {
                values = "";
                $(".datarow").each(function(j) {
                    tr = $(this);
                    date = tr.find('td').find('.date').val();
                    from = tr.find('td').find('.from').val();
                    to = tr.find('td').find('.to').val();
                    type = tr.find('td').find('.type').val();
                    values = values + date + ',' + from + ',' + to + ',' + type + ';';
                })
                console.log(values);
                $("[name=dataset]").val(values);
            })

            $("#slider").slider({
                range: true,
                min: 0,
                max: 1440,
                step: 15,
                values: [30, 210],
                slide: function(event, ui) {
                    $(".date").val(ui.values[0] + ":" + ui.values[1]);
                }
            });

            $(".date").on('click', function() {
                $(this).datepicker({
                    dateFormat: "dd.mm.yy",
                    altField: $(this).closest("td").find(".dateFormated"),
                    altFormat: "yy-mm-dd"
                })
            })
        });
    </script>
</head>

<body>
<span id="test"></span>
<form name="formZeitdaten" method="post">
    <table id="zeitdaten">
        <tr>
            <td>Datum</td>
            <td>Von</td>
            <td>Bis</td>
            <td>Typ</td>
            <td id="addRow"><input type="button" value="Hinzufügen" /></td>
        </tr>

        <tr class="datarow">
            <td><input type="text" class="date" /><input type="text" class="dateFormated" /></td>
            <td><input type="text" class="from" /></td>
            <td><input type="text" class="to" /></td>
            <td>
                <select class="type">
                    <option value="1">Typ 1</option>
                    <option value="2">Typ 2</option>
                </select>
            </td>
            <td></td>
        </tr>

        <tr id="submitButton">
            <td><input type="submit" /></td>
        </tr>
    </table>
</form>
<div id="slider"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:43:26.253

在您的 addRow 函数中，添加：

```
$("#row"+counter+" .date").datepicker({
    dateFormat: 'dd-mm-yy',
    minDate: 0,
    showButtonPanel: true,
    showAnim: 'show'
}); 
```

将元素添加到 DOM 之后。然后，您可以稍后摆脱该`$(".date").on('click',...)`语句。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-12T07:52:55.557

这应该适合你

```
$('.date').datepicker({ 
            dateFormat: 'dd-mm-yy',
            minDate: 0, 
            showButtonPanel: true, 
            showAnim: 'show' 
        }); 
```

# php - 跟踪单选按钮被选中的次数并存储在 PHP 的文本文件中

> ID：13835043
> 
> 赞同：0
> 
> 时间：2012-12-12T07:42:17.387
> 
> 标签：php

嘿，这是我的第一篇文章，所以我希望我能正确处理这个问题，但无论如何，我有一个调查，其中向用户提出了 8 个问题，他们应该通过单击值从 1 的单选按钮来评估他们对每个问题的感受（非常不同意）-5（非常同意）。所以我需要做的是记录每个单选按钮被选中的频率。像这样的东西：

```
$filename = "Results.txt";
$lines = file($filename); 
$q1 = $_POST['q1'];
$q2 = $_POST['q2'];
$q3 = $_POST['q3'];
$q4 = $_POST['q4'];
$q5 = $_POST['q5'];
$q6 = $_POST['q6'];
$q7 = $_POST['q7'];
$q8 = $_POST['q8'];

foreach($lines as $line) {  
        echo $line;
        if (isset($q1)){
            echo $line[$q1];
            echo $lines;
        }
    } 
```

其中 q 代表问题#。最后，这需要保持一个正在运行的 calc，results.txt 应该看起来像这样：
0,0,5,0,0
0,0,0,0,0
0,0,0,0,0
0,0, 0,0,0
0,0,0,0,0
0,0,0,0,0
0,0,0,0,0
0,0,0,0,0
第一行的 5 表示 5 个用户提交中性单选按钮选项（值 3）。每条线代表每个问题的总数。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:12:01.803

像这样的东西应该回答你手头的“问题”，但是你应该移动这个应用程序来使用数据库。

```
$filename = "Results.txt";
$lines = file($filename);

$q1 = $_POST['q1']; //stored value between 1-5
$q2 = $_POST['q2'];
$q3 = $_POST['q3'];
$q4 = $_POST['q4'];
$q5 = $_POST['q5'];
$q6 = $_POST['q6'];
$q7 = $_POST['q7'];
$q8 = $_POST['q8'];

$qN = 1;  //question number
$newLines = '';
foreach($lines as $line) {

    echo $line;

    $line = trim($line);  //remove excess newlines etc.
    $lineArr = explode(',',$line);  //split line into array by commas
    $index = ${'q'.$qN}-1; //zero based
    if (isset($lineArr[$index])){
        $lineArr[$index]++;  //add to position by one vote.
    }
    $qN++;
    $newLines .= implode(',',$lineArr) . "\n";
}

//write contents back to file.
file_put_contents($filename, $newLines); 
```

# javascript - 需要对电话和国家/地区进行 jquery 验证

> ID：13835047
> 
> 赞同：1
> 
> 时间：2012-12-12T07:42:39.560
> 
> 标签：javascript, jquery, html

我正在研究 JQuery 验证..

我面临电话验证问题，并且我不了解如何添加另一个验证，如下所示：

**这是我要实现的目标：**

```
- telephone number in all UK formats (4 digit area code, a space, 7 digit local code), The 'telephone' number field (4 digit area code, a space, 7 digit local code)

- visitor location from a drop-down list which includes the items: South Yorkshire, Rest of England, Wales, Scotland, Northern Ireland, European Union, Rest of World, Other, and which includes an appropriate default, 
```

请在这里查看我的代码：http: [//jsfiddle.net/B5sd8/18/](http://jsfiddle.net/B5sd8/18/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:48:56.233

你为什么不使用这样的[屏蔽输入](http://digitalbush.com/projects/masked-input-plugin/)？看看演示，我很确定你可以格式化你的面具以适应你在世界上需要的任何电话号码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T07:53:47.643

您可能对允许您搜索地址（或简单的国家/地区）以进行检查的现有网络服务（例如[GeoNames ）感兴趣。](http://www.geonames.org/export/geonames-search.html)

我强烈建议使用[jQuery validate](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)而不是重新发明轮子

使用 jquery validate 快速谷歌搜索英国号码

[过滤器](https://github.com/johnantoni/jquery.validate.filters)

看起来像这样

```
jQuery.validator.addMethod('phoneUK', function(phone_number, element) {
  return this.optional(element) || phone_number.length > 9 &&
  phone_number.match(/^(\(?(0|\+44)[1-9]{1}\d{1,4}?\)?\s?\d{3,4}\s?\d{3,4})$/);
  }, 'Please specify a valid phone number'
); 
```

# python - Python 子进程 check_output 比调用慢得多

> ID：13835055
> 
> 赞同：9
> 
> 时间：2012-12-12T07:43:29.913
> 
> 标签：python, performance, subprocess

我试图理解为什么会这样。我正在调用命令以在 Ubuntu 服务器 12.04 上重新启动网络。

**快速执行**

当我使用以下三种方式之一调用命令时，执行大约需要 0.1 秒：

1.  直接在终端
2.  python脚本使用`os.system`
3.  python脚本使用`subprocess.call`

终端会话：

```
root@ubuntu:~# time /etc/init.d/networking restart
 * Running /etc/init.d/networking restart
 * Reconfiguring network interfaces...
real    0m0.105s

root@ubuntu:~# time python -c "import os;
> os.system('/etc/init.d/networking restart')"
 * Running /etc/init.d/networking restart
 * Reconfiguring network interfaces...
real    0m0.111s

root@ubuntu:~# time python -c "import subprocess;
> subprocess.call(['/etc/init.d/networking', 'restart'])"
 * Running /etc/init.d/networking restart
 * Reconfiguring network interfaces...
real    0m0.111s 
```

**执行缓慢**

但是，如果我使用`subprocess.check_output`或 Popen 并尝试读取输出，则需要 23 秒。慢得多。似乎只有当我尝试使用将返回命令输出的函数时才会发生这种巨大的差异。我想了解为什么会发生这种情况，并找到一个解决方案来执行这个命令并获得它的输出而不需要这么长时间。

终端会话：

```
root@ubuntu:~# time python -c "import subprocess;
> print subprocess.check_output(['/etc/init.d/networking', 'restart'])"
 * Running /etc/init.d/networking restart
 * Reconfiguring network interfaces...
real    0m23.201s

root@ubuntu:~# time python -c "from subprocess import Popen, PIPE;
> print Popen(['/etc/init.d/networking', 'restart'], stdout=PIPE).stdout.read()"
 * Running /etc/init.d/networking restart
 * Reconfiguring network interfaces...
real    0m23.201s 
```

**更新**

其中一条评论建议尝试使用 tee 命令。结果非常有趣。如果使用 tee，则在没有任何 python 参与的终端中，它需要相同的 23 秒。我仍然很好奇为什么，但至少这可能会为正在发生的事情提供更多线索。

```
root@ubuntu:~# time /etc/init.d/networking restart | tee out.txt
 * Running /etc/init.d/networking restart
 * Reconfiguring network interfaces...
real    0m23.181s 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T10:21:25.460

下面的代码基于 JF Sebastian 的出色评论。下面的代码按预期在 0.1 秒内运行，并将命令的输出返回到字符串。

```
from subprocess import check_call, STDOUT
from tempfile import NamedTemporaryFile

with NamedTemporaryFile() as f:
    check_call(['/etc/init.d/networking', 'restart'], stdout=f, stderr=STDOUT)
    f.seek(0)
    output = f.read() 
```

# iphone - 从自定义表格视图单元格类加载时如何调整单元格的高度？

> ID：13835063
> 
> 赞同：2
> 
> 时间：2012-12-12T07:44:42.830
> 
> 标签：iphone, ios, ipad, uitableview, custom-cell

我有一个应用程序，我在两种设计中添加了两种类型的单元格。所以我正在使用自定义`UITableViewCell`对象类。但我的问题是我在这个单元格中使用文本视图。我需要根据其内容大小调整行高。这就是我的代码的样子：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier1 = @"CellIdentifier";
    static NSString *CellIdentifier2 = @"Cell";

    if(messagesarray==nil||[messagesarray count]==0)
    {

    }
    else
    {
        NSMutableDictionary *dicttable=[messagesarray objectAtIndex:indexPath.row];
        NSString *head=[dicttable objectForKey:@"gfgfg"];
        NSString *head1=[dicttable objectForKey:@"gfgfgf"];
        if([type isEqualToString:@"m"])    
        {
            if([head isEqualToString:@"NA"])
            {

                CustomCell *cell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier1];
                if (cell == nil)
                {
                    cell = [[[CustomCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier1] autorelease];
                    cell.backgroundView = [ [[UIImageView alloc] initWithImage:[ [UIImage imageNamed:@"white_top_portion.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0] ]autorelease];
                }
                cell.selectionStyle = UITableViewCellSelectionStyleNone;
                cell.nameLabel.text=head;
                cell.msg.text=head1;
                [cell.button addTarget:self action:@selector(callAction:) forControlEvents:UIControlEventTouchUpInside];     

                if(icon!=nil)
                {
                    if(![[ImageCache sharedImageCache] hasImageWithKey:icon])
                    {
                        cell.myImageView.image = [UIImage imageNamed:@"fggtgf.png"];
                        NSArray *myArray = [NSArray arrayWithObjects:cell.myImageView,icon,@"fgfgfg.png",[NSNumber numberWithBool:NO],nil];
                        AppDelegate *appDelegate = (AppDelegate  *)[[UIApplication sharedApplication] delegate];
                        [appDelegate performSelectorInBackground:@selector(updateImageViewInBackground:) withObject:myArray];   
                    }
                    else 
                    {
                        cell.myImageView.image = [[ImageCache sharedImageCache] getImagefromCacheOrUrl:icon];
                    }
                }
                else
                {
                    cell.myImageView.image = [UIImage imageNamed:@"fgfgfg.png"];  

                } 

                cell.label.text=sub;   
                return cell;
            }
            else
            {
                Customcellwithimage *cell = (Customcellwithimage *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier2];

                if (cell == nil)
                {
                    cell = [[[Customcellwithimage alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier2] autorelease];
                    cell.backgroundView = [ [[UIImageView alloc] initWithImage:[ [UIImage imageNamed:@"white_deal_bg.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0] ]autorelease];
                }

                cell.selectionStyle = UITableViewCellSelectionStyleNone;
                cell.datelabel1.text=subtitle;
                cell.nameLabel1.text=head;
                cell.msg1.text=head1;
                if(icon!=nil)
                {
                    if(![[ImageCache sharedImageCache] hasImageWithKey:icon])
                    {
                        cell.myImageView1.image = [UIImage imageNamed:@"fgfgfgf.png"];
                        NSArray *myArray = [NSArray arrayWithObjects:cell.myImageView1,icon,@"fgfgfgf.png",[NSNumber numberWithBool:NO],nil];
                        MFAppDelegate *appDelegate = (MFAppDelegate  *)[[UIApplication sharedApplication] delegate];
                        [appDelegate performSelectorInBackground:@selector(updateImageViewInBackground:) withObject:myArray];   

                    }
                    else 
                    {
                        cell.myImageView1.image = [[ImageCache sharedImageCache] getImagefromCacheOrUrl:icon];
                    }
                }
                else
                {
                    cell.myImageView1.image = [UIImage imageNamed:@"fgfgfgf.png"];  
                } 

                cell.cellview1.image=[UIImage imageNamed:@"vf.png"];
                cell.label1.text=sub;
                [cell.button1 addTarget:self action:@selector(callAction:) forControlEvents:UIControlEventTouchUpInside]; 
                cell.bannerview1.image=[UIImage imageNamed:@"vfgf.png"];
                return cell;
            }   
        }                 
    }  
} 
```

 任何人都可以帮助我实现不同单元格的不同行高吗？我必须找出高度`- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath`，我尝试了一种方法需要找出当前行的单元格对象。但没有成功。谁能指导我朝着正确的方向

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:53:18.567

我认为您正在寻找`- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath`- 在这里您可以计算每一行的高度。

*请注意*，如果计算工作量很大，您可能会看到性能下降。如果是这种情况，您可以预先计算值并存储它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T07:55:06.367

您可以使用此方法为您的应用程序提供可变高度支持。

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath; 
```

每当您想动态设置高度时，请使用您的 tableview 对象调用此方法。

更多信息请[点击这里](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)

或将此方法与其他 tableview 委托方法一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T08:24:25.110

调整单元格大小会变得相当复杂，尤其是在涉及 UITextViews 时。我建议您简单地使用表格视图框架，例如*Sensible TableView*，其中所有单元格都会自动调整大小以适应内容。我相信他们现在也有免费版本。

# xml - 这将是什么正则表达式？

> ID：13835065
> 
> 赞同：1
> 
> 时间：2012-12-12T07:44:46.020
> 
> 标签：xml, regex, vim

我有一个手动编辑的 xml 文件。xml文件结构如下：

```
<order>
    <id>1</field>
    <current_execution_status>REGENERATED</field>
    <generated_time>2012-12-01 17:55:00</field>
    <generation_status>UNKNOWN</field>
    <priority>0</field>
    <type>NORMAL</field>
    <assigned_vehicle>1</field>
    <assigned_drop_location>1</field>
    <assigned_pick_location>1</field>
    <generation_by_user_name>ABC</field>
    <material>1</field>
    <order_cancel_detail />
    <order_drop_detail />
    <order_pick_detail />
</order> 
```

我想用`field`值前面的相应“字段名称”替换每次出现的 。例如`<id>1</field>`应该像这样变成`<id>1</id>`,等。`<current_execution_status>REGENERATED</current_execution_status>`但没有得到我应该在`vim`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T07:49:56.143

```
:%s/<\([^<>]*\)>\([^<>]*\)<\/field>/<\1>\2<\/\1>/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T07:48:19.630

这个怎么样：

```
:%s/<\(.*\)>\(.*\)<\/field>$/<\1>\2<\/\1>/ 
```

关于 Vim 正则表达式的注意事项：

1.  捕获/分组使用`\(`and ')' 而不是 '(', ')'。('(', ')') 仅表示打开/关闭括号的实际字符。
2.  捕获内存`\1`等`\2`。
3.  `/`需要像往常一样逃脱`\/`

# android - Android：隐藏标题栏的问题

> ID：13835071
> 
> 赞同：5
> 
> 时间：2012-12-12T07:45:27.443
> 
> 标签：android, android-manifest, titlebar, android-titlebar

我想在我的应用程序的所有活动中隐藏标题栏。为此，我在标签中添加了以下属性：

```
android:theme="@android:style/Theme.NoTitleBar" 
```

标题栏现在被隐藏了，但**我的问题是**我的应用程序看起来很奇怪。

前：

[http://imageshack.us/a/img831/6905/screenshot1355296053406.png](http://imageshack.us/a/img831/6905/screenshot1355296053406.png)

使用 noTitleBar 属性：

[http://imageshack.us/a/img211/581/screenshot1355295921669.png](http://imageshack.us/a/img211/581/screenshot1355295921669.png)

好像反差比较小。。

如果`noTitleBar`属性是在应用程序标签中还是在每个活动标签中，这没有区别。

希望你能帮我解决我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T07:51:02.890

在`onCreate()`活动中写下：

```
this.requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T10:05:47.163

这可能是因为您还删除了应用程序的主题以及标题栏。

我不确定你以前的主题是什么，但你应该扩展现有的主题。在您的样式文件中是这样的：

```
<style name="MyTheme" parent="android:Theme.Light.NoTitleBar.">

</style> 
```

也许你的父主题应该是`android:Theme.Black.NoTitleBar`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T19:25:02.527

你没有接受任何答案，所以我要在这里扔掉我的 2 美分：

添加这段代码可能会有所帮助：

```
 getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                            WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

# sql - 有没有办法使用 t-sql 解密加密文本？

> ID：13835072
> 
> 赞同：1
> 
> 时间：2012-12-12T07:45:36.097
> 
> 标签：sql, tsql, encryption, cryptography, rsa

我使用应用程序上的公钥使用 1024 位 RSA 加密来加密文本。

我想要做的是使用`@encryptedText`将返回解密文本的参数调用存储过程（私钥在 SQL Server 中，但我不想将私钥发送到应用程序）

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T23:29:25.367

你可以看到这个[http://www.4guysfromrolla.com/articles/022807-1.aspx#postadlink](http://www.4guysfromrolla.com/articles/022807-1.aspx#postadlink) 似乎他们从 SQL 服务器中处理 rsa 加密。希望有帮助！

# html - “jquery.min.css”和“jquery.css”有什么区别？

> ID：13835079
> 
> 赞同：10
> 
> 时间：2012-12-12T07:46:29.407
> 
> 标签：html, css, jquery-mobile

这是一个简单的疑问。

和有什么区别

> [http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.css](http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.css)

和

> [http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0](http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0)。**最小**.css

如果我在实时站点中将它们中的任何一个替换为其他，会发生什么问题？如果两者都没有改变（以前没有编辑过）？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-12T07:50:00.393

您可以互换替换它们。

常规的用于检查和（如有必要）编辑。缩小版本通过删除所有可以删除的空格使文件尽可能小。这使得它为用户加载更快。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-12T07:48:51.853

该`min`版本被*缩小*、压缩。在功能上它们应该是相同的。缩小版更小，下载速度更快，应该在生产中使用，但不可读，因此在开发过程中很糟糕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T07:48:25.430

一个`min`简单的意味着它是[缩小](http://en.wikipedia.org/wiki/Minification_%28programming%29)的，一个没有`min`是人类可读的。

引用维基百科：

> 在计算机编程语言，尤其是 JavaScript 中，缩小（也称为最小化或最小化）是在不改变其功能的情况下从源代码中删除所有不必要字符的过程。这些不必要的字符通常包括空白字符、换行符、注释，有时还包括块分隔符，这些字符用于增加代码的可读性，但不是执行代码所必需的。

一旦你比较了它们的大小，在 web 中缩小代码的目的就很明显了：删除不必要的字符会显着减少需要传输的文件的大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T07:48:34.883

该`min`版本是“cegular”CSS 文件的缩小版本。最终结果完全相同（应用相同的样式）。最小版本更小，因为不必要的空格等会从文件中删除。

这样做的原因是为了节省带宽并加快页面加载时间，因为浏览器必须下载更少的内容才能呈现页面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-03T10:57:05.127

`min`表示 cegular css 文件的缩小版本。结果将是相同的，尽管`min`加载速度会更快。如果您的网站很大，您可能不应该删除该文件，但如果它是一个小网站，您可能可以删除它。- 燃烧土豆

# html - 社交媒体图标的位置在页面中不一致

> ID：13835080
> 
> 赞同：0
> 
> 时间：2012-12-12T07:46:30.973
> 
> 标签：html, css, icons, social

我正在努力使图像保持在与页面更改相同的位置，我知道这很简单，但我似乎无法弄清楚。谢谢，亚当。

[http://aginther14.interactivedesignlab.com/index.html](http://aginther14.interactivedesignlab.com/index.html)

```
<div id="socialnetworks">
<a href="http://www.linkedin.com/profile/view?id=215921152" target="_blank"><img src="images/linkedin.png" width="40px" height="40px" alt="linkedin"></a>
<a href="http://www.facebook.com/whoisthecoolestpersonalive" target="_blank"><img src="images/facebook.png" width="40px" height="40px" alt="facebook" ></a>
<a href="https://twitter.com/GintherTheGreat" target="_blank" alt="twitter"><img src="images/twitter.png" width="40px" height="40px"></a>
</div>

#socialnetworks {
    padding-left: 16px;
}
} 
```

[http://aginther14.interactivedesignlab.com/index.html](http://aginther14.interactivedesignlab.com/index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:58:03.383

Use position:absolute or position:fixed

**Absolute**

```
<div id="socialnetworks">
<a href="http://www.linkedin.com/profile/view?id=215921152" target="_blank"><img src="images/linkedin.png" width="40px" height="40px" alt="linkedin"></a>
<a href="http://www.facebook.com/whoisthecoolestpersonalive" target="_blank"><img src="images/facebook.png" width="40px" height="40px" alt="facebook" ></a>
<a href="https://twitter.com/GintherTheGreat" target="_blank" alt="twitter"><img src="images/twitter.png" width="40px" height="40px"></a>
</div>

#socialnetworks {
    position:absolute; bottom:5px; left:16px;
} 
```

This will place it in the bottom left corner and stays there unless the content on the left gets larger.

If you with to keep it in the bottom left at all time use `fixed`.

**Fixed**

```
<div id="socialnetworks">
<a href="http://www.linkedin.com/profile/view?id=215921152" target="_blank"><img src="images/linkedin.png" width="40px" height="40px" alt="linkedin"></a>
<a href="http://www.facebook.com/whoisthecoolestpersonalive" target="_blank"><img src="images/facebook.png" width="40px" height="40px" alt="facebook" ></a>
<a href="https://twitter.com/GintherTheGreat" target="_blank" alt="twitter"><img src="images/twitter.png" width="40px" height="40px"></a>
</div>

#socialnetworks {
    position:fixed;
    bottom:5px;
    left:16px;
} 
```

# c# - 如何触发当前班级无法触及的事件？

> ID：13835089
> 
> 赞同：1
> 
> 时间：2012-12-12T07:47:23.557
> 
> 标签：c#, winforms, events, eventtrigger

在 C# WinForms 中，我创建了一个用户控件，为了这个示例，假设在其中我创建了一个按钮，当我单击它时它会触发一个事件。

我在当前表单中实时添加了这个自定义用户控件。问题。当我单击按钮（位于用户控件内）时，我不知道如何更新当前表单中的事件。有人知道如何实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T07:55:36.403

如果通过*实时添加此自定义用户控件*意味着您是在运行时添加它而不是在设计时添加它并且*我不知道如何更新事件*您的意思是如何订阅此事件：

`Event`在您的用户控件中创建一个新的公共（例如`YourEvent`），并通过 raise 来处理按钮单击`YourEvent`。

用于`+=`订阅您的`Form`.

```
yourControl.YourEvent += YourEventHandler; 
```

我猜你使用的是 Visual Studio，所以只需键入`yourControl.YourEvent +=`并按`TAB`两次，Visual Studio 就会为你创建一个适当的事件处理程序方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T07:50:56.227

您不需要引发事件（至少根据提供的问题），您需要将在事件引发时执行的所有代码放入一个`public`函数中，然后从“外部”调用该函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T07:55:25.743

在用户控件上添加一个名为 ButtonClicked 的自定义事件，在单击按钮时触发它，并在表单中添加一个事件处理程序来处理用户控件的 ButtonClicked 事件。

基本上，您是从用户控件的角度将事件暴露给外界。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T18:29:48.690

这是我第一次提供答案，所以我希望我做得对。您所有其他答案都得到了帮助，但我觉得它们含糊不清（可能是一个含糊的问题）。我试图尽可能清楚地提供解决方案。如果出现问题，请随时改进它，并告诉我是否应该将其标记为“已接受”。感谢大家的支持！

首先，在 UserControl 中，我创建了一个按钮，并将 Button1Click 委托给它：

```
this.button1.Location = new System.Drawing.Point(25, 17);
this.button1.Name = "button1";
this.button1.Size = new System.Drawing.Size(95, 23);
this.button1.TabIndex = 0;
this.button1.Text = "Click";
this.button1.UseVisualStyleBackColor = true;
this.button1.Click += new System.EventHandler(this.Button1Click); 
```

后面在UserControl的源码中：

```
void Button1Click(object sender, EventArgs e)
{
} 
```

现在，在 MainForm 设计器中，我添加了一个 TextBox（用于测试结果）和我的自定义 UserControl。在最后一行，我从 UserControl 观察事件，当它被触发时，它从 MainForm 内部调用 Button1Click：

```
this.textBox1.Location = new System.Drawing.Point(12, 151);
this.textBox1.Name = "textBox1";
this.textBox1.Size = new System.Drawing.Size(202, 20);
this.textBox1.TabIndex = 1;

this.uControl1.Location = new System.Drawing.Point(12, 12);
this.uControl1.Name = "uControl1";
this.uControl1.Size = new System.Drawing.Size(304, 95);
this.uControl1.TabIndex = 0;
this.uControl1.button1.Click += new System.EventHandler(this.Button1Click); 
```

因此 Text 属性已更改。

```
void Button1Click(object sender, EventArgs e)
{
   this.textBox1.Text = "Hurrah!";
} 
```

# jquery - (document).click 不在移动设备上隐藏 div

> ID：13835090
> 
> 赞同：0
> 
> 时间：2012-12-12T07:47:29.867
> 
> 标签：jquery, css, mobile, onclicklistener

我有一个二级菜单，它在悬停时完美地在桌面上运行，当没有悬停在主菜单项上时隐藏 div。

因此，对于移动/触摸设备，我需要从下拉菜单中单击以将其关闭，但我正在尝试的不是隐藏 UL，当我在桌面上单击时，悬停不再显示下拉菜单 UL

这是**html**

```
<body>
    <div id="top">
            <div id="menu" class="wrap">
                <ul id="nav">
                    <li><a href="#">My Lists</a>
                        <ul class="drop">
                            <li><a href="#">List 1</a></li>
                            <li><a href="#">List 2</a></li>
                            <li><a href="#">List 3</a></li>
                            <li><a href="#">View all Lists</a></li>
                        </ul>
                    </li>
                    <li><a href="#">Following</a>
                        <ul class="drop">
                            <li><a href="#">Follow 1</a></li>
                            <li><a href="#">Follow 2</a></li>
                            <li><a href="#">Follow 3</a></li>
                            <li><a href="#">View all Follows</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
</body> 
```

和**JQUERY**

```
 $(document).click(function() {
        $('.drop').hide();
    });
    $(".drop, #nav").click(function(e) {
        e.stopPropagation();
        return false;
    }); 
```

这是一个小提琴，更容易展示这种方式加上所有 css：[小提琴](http://jsfiddle.net/5mtJr/12/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:02:24.180

那是因为移动设备没有点击。尝试绑定“touchstart”事件以使移动设备正常工作。

像这样：

```
$(document).on("click touchstart", function() {
    $('.drop').hide();
});
$(".drop, #nav").on("click touchstart", function(e) {
    e.stopPropagation();
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T08:30:51.680

如果您使用的是 jqm，请为您的移动应用程序或移动网络尝试 vclick 事件，即

```
$(document).vclick(function() {
        $('.drop').hide();
    });
    $(".drop, #nav").vclick(function(e) {
        e.stopPropagation();
        return false;
    }); 
```

[我刚刚单独修改了您的事件。也许您必须使用本](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)文档中的标准 jqm 事件以获得更好的性能。

# c - 为什么在服务器代码中打印垃圾值

> ID：13835096
> 
> 赞同：-2
> 
> 时间：2012-12-12T07:47:41.580
> 
> 标签：c, sockets, client-server

我实际上尝试了使用 TCP Select 的客户端服务器代码。我不知道为什么在客户端的每个请求都打印在服务器上之后会打印垃圾值

这是服务器代码 [https://www.dropbox.com/s/qgd87fby6tif9q6/server.c](https://www.dropbox.com/s/qgd87fby6tif9q6/server.c)

这是客户端代码 [https://www.dropbox.com/s/qlv1im06gfw5i1w/client.c](https://www.dropbox.com/s/qlv1im06gfw5i1w/client.c)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:57:17.387

您将服务器上收到的消息视为字符串，但没有从客户端发送 nul 终止符。这会导致旧内容显示在堆栈中，`recv_buf`并且可能会在堆栈的更下方显示，因为 printf 扫描内存以查找值为 0 的下一个字节。您可以通过从客户端发送一个 nul 终止符来解决这个问题，方法是更改​​您的`send`调用以在您的信息

```
send(sockfd, send_buf, strlen(send_buf) + 1, 0); 
```

或者在服务器中通过在接收到消息后添加一个 nul 终止符

```
recv_buf[nbytes_recvd] = '\0'; 
```

[下面保留原始答案，以防您还想从消息中删除换行符。因为那会无意中解决了你的问题。]

“垃圾价值”并没有给我们太多的继续......

猜测一下，这些字符可能是换行符（值为 0x0D 的单个字符）。从[fgets 手册页](http://linux.die.net/man/3/fgets)（我的重点）

fgets() 从流中最多读入一个小于 size 的字符并将它们存储到 s 指向的缓冲区中。在 EOF 或换行符后停止读取。***如果读取了换行符，则将其存储到缓冲区***中。终止空字节 (aq\0aq) 存储在缓冲区中的最后一个字符之后。

您的客户端读取的字符串可能以换行符结尾。如果您不想将其发送到服务器，可以通过添加将其删除

```
size_t len = strlen(send_buf);
if (len > 0 && send_buf[len-1] == '\n') {
    send_buf[len-1] = '\0';
} 
```

`fgets`到您的客户，在其对和的调用之间`send`。

# objective-c - Objective-C - 使用回调参数存储块

> ID：13835099
> 
> 赞同：2
> 
> 时间：2012-12-12T07:47:47.973
> 
> 标签：objective-c, ios, callback

我有一个通用例程，它需要一些参数。就像是：

```
-(id) doStuff:(int)A:(int)B:(int)C {
    //doStuff
    return object;
} 
```

我有一个`UITableViewController`，其中包含许多自定义单元格，每个单元格都有自己的 ID。当点击“保存”时，这些单元格会被迭代，并且某些单元格在被保存时需要“附加行为”。

到目前为止，我已经创建了一个“回调”对象，它`NSString *`在自定义单元格中存储了一个和一个委托。在“保存”后，单元格会查看是否有任何回调要应用和使用

```
SEL sel = NSSelectorFromString(Sel);
if([Del respondsToSelector:sel])
    [Del performSelector:sel withObject:Cell]; 
```

现在效果不错……但是，它需要我传递的方法来对传递的 Cell 的 ID 进行 switch/case，我想避免这种情况。

这就是为什么我想改用块，但我真的不知道如何将参数化块存储在变量中。

我正在尝试做的事情：

声明一个功能块`doStuff`。

```
id (^doStuff) (int, int, int) = ^(int A, int B, int C) {
    //does Stuff
}; 
```

并将之前创建的块添加为回调

```
[Cell addCallback:(^doStuff)(1, 2, 3)]; 
```

该块不能在那个时候被调用，而是存储在单元格中，并且只有在合适的时候才调用它。我将如何正确地解决这个问题？

非常感谢你。

编辑：我还想避免将块的参数存储在单元格中并在调用时传递它们，因为这将需要我进一步不必要地专门化单元格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:56:30.670

听起来您想要的是一个调用您的块的块，如下所示：

```
[cell addCallback:^{ doStuff(1, 2, 3); }]; 
```

但这是一个相当奇怪和令人费解的设计。似乎有一种方法可以只用一个块来编写它，但是如果没有更好地了解你在做什么，就很难给出一个具体的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:10:45.923

最直接的方法是创建一个 typedef，其中包含块参数的外观，然后使用它来声明一个新的属性/ivar。以下示例代码复制自*Sensible TableView*框架 SCCellActions 类：

```
typedef void(^SCCellAction_Block)(SCTableViewCell *cell, NSIndexPath *indexPath);

@interface SCCellActions : NSObject
...
@property (nonatomic, copy) SCCellAction_Block willDisplay;
...
@end 
```

然后，您可以按如下方式设置属性：

```
cellActions.willDisplay = ^(SCTableViewCell *cell, NSIndexPath *indexPath)
{
    cell.backgroundColor = [UIColor yellowColor];
}; 
```

同样，您可以声明一个参数，如下所示：

```
...
- (void)callActionBlock:(SCCellAction_Block actionBlock)
{
    if(actionBlock)
    {
        actionBlock(self.cell, self.cellIndexPath);
    }
}
... 
```

在这种情况下，应该像这样调用该方法：

```
[myObject callActionBlock:^(SCTableViewCell *cell, NSIndexPath *indexPath {cell.backgroundColor = [UIColor yellowColor];}]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T09:58:51.867

这个答案基于 Chuck 的建议，并描述了我在实现它时遇到的陷阱。

创建：

```
Cell = [self CreateCell];
[Cell addCallback:^{ return doStuff(Cell, 1, 2, 3, 4) } At:ON_SAVE]; 
```

doStuff 是一个本地块，在单元格之前声明。我无法将它直接添加到单元格中，因为我还需要引用块中的调用单元格。

此时的陷阱：类变量。一个块只会保留……或者更确切地说是“复制”……局部变量，而不是类变量。假设“Cell”是一个类变量并由“CreateCell”设置，则该块将在执行该块时使用 Cell 的值。

因此，重要的是要记住声明一个局部变量，如果需要，它会假定类变量的值。

贮存：

```
- (void) addCallback:(CallBlock_t)B At:(int)at {
    //Creates a Callback-Object and passes it the block and adds it to an Array.
}

- (id) initWithBlock:(CallBlock_t)B At:(int)at {
    self = [super init];
    if(self) {
        Block = [B copy];    //Yes, Copy. Not retain.
        When = at;
    }
    return self;
} 
```

此时的陷阱：如果仅保留该块，则来自调用函数的本地块将超出范围，并且程序将因“错误访问”而失败。复制解决了这个问题。

Of course you need to release the Block once you're done using it (in the dealloc of the callback class), but that's a given.

I hope this little explanation will save someone some grief.

# android - 接听电话以退出应用程序

> ID：13835100
> 
> 赞同：2
> 
> 时间：2012-12-12T07:47:50.390
> 
> 标签：android, cordova

我有一个扩展 phonegap 的活动，并且在一个 js 文件中有一个`navigator.app.exitApp`结束活动的调用。我想在我的活动中捕获此调用以显示退出对话框。我不熟悉 PhoneGap 和 JS。

我怎样才能接到 exitApp 的电话？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:33:40.263

鉴于@CommonsWare 评论，我还建议不要实施退出对话框。但是，如果您无法说服您的客户更改此请求，这里有几个链接可能会有所帮助。

[应用程序关闭要捕获哪个事件？](https://stackoverflow.com/questions/4677507/which-event-to-catch-for-application-shut-down)

[http://docs.phonegap.com/en/1.0.0/phonegap_events_events.md.html#backbutton](http://docs.phonegap.com/en/1.0.0/phonegap_events_events.md.html#backbutton)

本质上，您将有一个暂停、卸载或后退按钮事件的侦听器。使用哪一个可能在一定程度上取决于此退出功能如何适应其他所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T20:57:27.963

放弃尝试。决定写一个插件，调用方法退出，去掉 js 到`navigator.app.exitApp`. 不确定这是否可以作为自己的答案，但这是我对问题的解决方案。

# php - php preg_match 可选子模式

> ID：13835105
> 
> 赞同：2
> 
> 时间：2012-12-12T07:48:15.163
> 
> 标签：php, regex, preg-match-all

我尝试构建一个从 html 模板中捕获变量的小系统。

定义为@XXX@ 的变量可能（但不是必需的）具有以冒号(:) 发送的额外参数，即@XXX@:j 以json 编码发送数据。

我设法做的是创建一个 preg_match_all 来捕获变量和那些额外的参数。所以我想出了这个preg：

```
preg_match_all("/(@.*@(?:(j|n|x|z))?)/imU", $string,$this->localVariables,PREG_PATTERN_ORDER); 
```

j|n|x|z 是可能的可用额外参数。

我发送给 $string 的字符串是：@geterr@ @domain@:j @jhon@:n

我从 preg_match_all 得到的结果是：

```
Array
(
[0] => Array
    (
        [0] => @geterr@
        [1] => @domain@
        [2] => @jhon@
    )

[1] => Array
    (
        [0] => @geterr@
        [1] => @domain@
        [2] => @jhon@
    )

[2] => Array
    (
        [0] => 
        [1] => 
        [2] => 
    )

) 
```

我知道（或认为我知道） ?: 用于可选子模式 iv'e 使用的修改是：i 用于不区分大小写 m 用于允许我的字符串为多行 U - 非贪婪

我不知道我做错了什么。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T08:12:17.013

你的模式有一些问题`/(@.*@(?:(j|n|x|z))?)/imU`

1.  您不需要围绕整个模式的捕获组。

2.  `?:`正在创建一个非捕获组，它不限于可选组。

3.  修饰符`m`被称为`multiline`，但这有点误导，它只影响锚点`^`，并且`$`还匹配行的开始和结束，而不仅仅是字符串。

    你想要的是修饰符`s`，`singleline`修饰符。它将整个字符串视为一行，并影响`.`匹配换行符。

4.  修饰符`U`使您的整个正则表达式变得不贪婪。这不是您想要的，因为它也会影响您的可选组，并且因为它位于模式的末尾，所以它永远不会匹配。

5.  您需要匹配`:`字符串中的

    所以我会删除`U`并只使第一个量词变得不贪婪，方法是`?`在它之后添加一个。

**所以我认为你的正则表达式应该是：**

```
/@(.*?)@(?::(j|n|x|z))?/is 
```

这会将第一部分放在第`@`一个捕获组中的 和第二组中的参数之间。

[在 Regexr 上](http://regexr.com?3342a)查看

# blackberry - 黑莓中的自动展开文本框

> ID：13835106
> 
> 赞同：0
> 
> 时间：2012-12-12T07:48:18.207
> 
> 标签：blackberry, textbox, blackberry-jde

我已经在我的应用程序中实现了自定义文本框，它运行良好，但现在客户需要在键入（BBM 聊天文本框）时自动扩展文本框。有什么方法可以覆盖默认的 Editfield 以自动扩展。请给我建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T08:19:53.397

这可能会做你想做的事；自动增加 EditField 的高度：

```
class MyEditField extends EditField
{
    public MyEditField (long style)
    {
        super (style);
        setBorder (BorderFactory.createSimpleBorder(new XYEdges (1, 1, 1, 1)));
    }

    public int getPreferredHeight()
    {
        return Font.getDefault.getHeight() * 3; //setting the height of edit field as 3 rows
    }

    public void layout (int width, int height)
    {
        super.layout (width, height);
        if (getExtent().height < getPreferredHeight())
            setExtent (width, getPreferredHeight());
    }
} 
```

# jruby - JRuby 1.7.1 和 PsychParser 解析 UTF-8 YAML 文件时出错 (Rails 3.2.8)

> ID：13835114
> 
> 赞同：10
> 
> 时间：2012-12-12T07:48:34.997
> 
> 标签：jruby, yaml, jrubyonrails, psychparser

在我们的 JRuby/Rails 项目中，我们使用`i18n`gem，并且支持日语和英语。我们的`config/locales.ja.yml`文件是 UTF-8 格式，没有任何 BOM。

在 上运行`Rails 3.2.9`时`JRuby 1.7.1`，我们现在看到以下错误：

```
% jruby -S rake spec:models

 Psych::SyntaxError: (C:/Projects/foobar/trunk/config/locales/ja.yml): 
   expected <block end>, but found Scalar while parsing a block 
   mapping at line 7 column 33

   parse at org/jruby/ext/psych/PsychParser.java:213
   ... 
```

YAML 解析`ja.yml`文件的这个错误现在在我们的 Windows XP 和 Linux 开发环境中都发生了，并且*只有当我们为 JVM 显式设置以下系统参数时才会消失*：

```
-Dfile.encoding=utf-8 
```

**谁能告诉我为什么会这样`JRuby 1.7.1`？**
我没有在`1.6.8`or中看到这个`1.7.0`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-15T10:35:35.220

现在已经一岁多了，但这里是答案：

[http://jruby.org/2012/12/03/jruby-1-7-1.html](http://jruby.org/2012/12/03/jruby-1-7-1.html)

在那个版本中，发生了这样的事情：

*   Psych YAML 引擎更新到最新版本

# ruby-on-rails - Rails App 根文件夹中 boot.rb 文件中的 Ruby bundler 语句

> ID：13835116
> 
> 赞同：2
> 
> 时间：2012-12-12T07:48:40.113
> 
> 标签：ruby-on-rails, ruby, bundler, boot

我在 Rails 应用程序的根文件夹内的 boot.rb 文件中找到了以下给定语句。

```
ENV['BUNDLE_GEMFILE'] ||= File.expand_path('../../Gemfile', __FILE__) 
```

任何人都可以帮助我了解`ENV['BUNDLE_GEMFILE']`和`||=`在这种情况下的用法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T07:55:33.907

`ENV`是一个哈希。`BUNDLE_GEMFILE`是该哈希中的一个项目。`||=`称为“或等于”运算符，它所做的是检查是否`ENV['BUNDLE_GEMFILE']`已设置，如果已设置，则采用相同的操作。但如果不是，则它将函数`File.expand_path()`返回的任何内容分配给`ENV['BUNDLE_GEMFILE']`.

# java - 为什么 * 作为“java”的命令行参数不能按预期工作？

> ID：13835118
> 
> 赞同：1
> 
> 时间：2012-12-12T07:48:54.750
> 
> 标签：java

我有一个程序将字符串作为参数并在文本文件中搜索字符串。

除非我`*`作为参数输入，否则一切正常。它打印出我目录中的所有文件名。`*`当我作为参数输入时，似乎它没有通过代码。

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T07:50:32.477

您很可能会从命令行传递大量文件。这个链接可能很有趣： [http ://en.wikipedia.org/wiki/Glob_(programming)#Syntax](http://en.wikipedia.org/wiki/Glob_(programming)#Syntax)

基本上，当你说

```
java ... * 
```

该`*`字符（由您的 shell）扩展为当前目录中的文件列表。这发生在 java 甚至看到`*`字符之前，而 java 看到“file1 file2 ...”。

`*`在命令行中用单引号将字符括起来可能会有所帮助，如下所示：

```
'*' 
```

或通过转义它：

```
\* 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T07:50:16.303

你的 shell`*`在它进入你的程序之前正在扩展它。尝试像这样逃避它

```
bash$ java MyClass \* 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T07:52:12.243

**-在** **正则表达式**`*`中有特殊含义。

 ****-**所以你必须`\\`在它之前使用。

**例如：**

```
\\* 
```**

# java - 从同一台机器通过 SMACK API 建立两个连接

> ID：13835120
> 
> 赞同：0
> 
> 时间：2012-12-12T07:49:08.603
> 
> 标签：java, smack

我正在本地主机上使用 OpenFire 3.7.1 和 SMACK 3.2.2 制作一个简单的聊天客户端。我想知道是否可以从同一台机器建立到服务器的 2 个连接。

**插图**：我制作了一个用于简单交换消息的工作客户端。我将运行客户端的两个 jar 文件（包含登录提示），我将为两个不同的用户进行两次不同的登录。

现在我尝试这样做，但得到了 Stream:error 我知道是指连接太多次或 2 个用户或类似的东西。我不知道有关该错误的确切细节。您的帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:54:34.617

是的，您甚至可以从同一个应用程序中执行此操作。从 Smack 运行的集成测试一直在执行此操作。

您只需确保使用不同的 JID 登录。

# sqlite - sqlite中的外键

> ID：13835122
> 
> 赞同：0
> 
> 时间：2012-12-12T07:49:22.200
> 
> 标签：sqlite

我正在尝试转换从 mysql 转储的表。以下是我从 mysql 获得的用于创建表的代码：

```
CREATE TABLE "tbl_profession_attributes" (
"id" bigint(20) NOT NULL,
"tbl_profession_attribute_id" bigint(20) DEFAULT '0',
"code" varchar(10) NOT NULL,
"name" varchar(100) NOT NULL,
"keyword" text NOT NULL,
"tbl_profession_list_id" bigint(20) NOT NULL,
PRIMARY KEY ("id"),
KEY "tbl_passion_attribute_id" ("tbl_profession_attribute_id"),
KEY "tbl_passion_list_id" ("tbl_profession_list_id")
); 
```

当我对 sqlite 运行此查询时，我收到以下错误：

```
Query Error: near "KEY": syntax error Unable to execute statement 
```

有人可以帮我解决这个问题。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:00:27.670

首先，MySQL 关键字`KEY`是`INDEX`. 所以这根本与外键无关。

其次，SQLite 不支持在 CREATE TABLE 语句中创建非主索引。您应该为创建索引指定单独的语句，例如：

```
CREATE INDEX tbl_passion_attribute_id_idx
ON tbl_profession_attributes(tbl_profession_attribute_id) 
```

# c# - 从asp web应用程序下载文件

> ID：13835126
> 
> 赞同：-2
> 
> 时间：2012-12-12T07:49:54.490
> 
> 标签：c#, asp.net, .net

我正在开发一个 ASP Web 应用程序，我希望用户能够从页面下载文件。因此，当用户单击“下载模板文件”按钮时，它将开始将文件的副本下载到计算机上。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:49:26.637

要在按钮单击时直接将文件下载到您的计算机，只需在按钮的单击事件上编写此代码。

```
string filename = "~/File/yourFolder/"+ FileName;
string path = MapPath(filename);
byte[] bts = System.IO.File.ReadAllBytes(path);
Response.Clear();
Response.ClearHeaders();
Response.AddHeader("Content-Type", "Application/octet-stream");
Response.AddHeader("Content-Length", bts.Length.ToString());
Response.AddHeader("Content-Disposition", "attachment; filename=" + filename);
Response.BinaryWrite(bts);
Response.Flush();
Response.End(); 
```

否则，如果您有超链接，只需在导航 url 中提供文件路径

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T09:06:49.683

> > 用户必须下载模板文件。

正如您在评论中提到的，用户只需要下载文件。因此，您必须已经拥有放置在服务器上的模板文件的 url。喜欢

www.testwebsite.com/templatefile.xls

在网站中添加一个简单的链接按钮，然后在 href/Navigate URL 添加您的模板 url。每当用户单击它时，该文件将被自动下载。

# xslt - Xpath 不适用于具有 xml 字符串的变量

> ID：13835132
> 
> 赞同：3
> 
> 时间：2012-12-12T07:50:09.067
> 
> 标签：xslt, xpath, xslt-2.0

我在写 xapth 时遇到问题。让我解释一下这个问题。

我正在编写 xslt 来转换一些 xml。xslt 还将一个 xml 文件从磁盘加载到 xslt 变量中。

**PeopleXml.xml**：

```
 <TestXml>     
     <People>  
       <Person id="MSA1" name="Sachin">
         <Profession>  
           <Role>Developer</Role>
         </Profession>  
       </Person>
       <Person id="ZAG4" name="Rahul">              
         <Profession>  
           <Role>Tester</Role>
          </Profession> 
       </Person>
     </People>  
   </TestXml> 
```

**XSLT**：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"  
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
xmlns="http://MyNamespace"  
version="2.0"> 

<xsl:variable name="PeopleXml" select ="document('PeopleXml.xml')"/>

<xsl:variable name="peopleList" select="$PeopleXml/TestXml/People/Person"/>  
<xsl:variable name="person1" select="MSA1"/>  

<xsl:variable name="person" select="$peopleList/Person[@id=$person1]/@name"/>  

<xsl:template match="/">
   <xsl:value-of select="$person"/>
</xsl:template>

</xsl:stylesheet> 
```

**问题**：xpath "$peopleList/Person[@id=$person1]/@name" 没有返回任何内容。事实上， $peopleList/Person 也不起作用。但是，当我调试代码时，我可以在 $peopleList 变量中看到两个人员节点。

谁能帮助我，我在 xpath 中做错了什么？

**编辑** 应用丹尼尔的解决方案后，上面的 xapth 问题已得到解决。现在，唯一剩下的问题是根据某些条件访问人的子节点。

以下测试不起作用。

```
<xsl:variable name="roleDev" select="'Developer'"/>
<xsl:when test="$peopleList/Profession/Role=$roleDev">
   <xsl:value-of select="We have atleast one Developer"/>
</xsl:when> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T08:22:06.063

由于变量`peopleList`已经是`Person`节点，您应该像这样访问它们：

```
<xsl:variable name="person" select="$peopleList[@id=$person1]/@name"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T13:23:14.620

**你的问题在这里**：

```
<xsl:variable name="person1" select="MSA1"/> 
```

**这导致`$person1`变量为*空*。为什么？**

因为*表达式* `MSA1`已被计算——当前节点没有任何名为“MSA1”的子节点，因此没有选择任何内容。

**解决方案**：

将所需字符串指定为字符串文字：

```
<xsl:variable name="person1" select="'MSA1'"/> 
```

* * *

**你的第二个问题**：

> 现在，唯一剩下的问题是根据某些条件访问人的子节点。

**使用**：

```
boolean($peopleList[Profession/Role = 'Developer']) 
```

这`true()`恰好在有一个节点时产生`$peopleList`，它至少有一个`Profession/Role`字符串值是字符串的 crand-child`"Developer"`

# iphone - UIButton在iOS6中不显示文本

> ID：13835134
> 
> 赞同：3
> 
> 时间：2012-12-12T07:50:14.197
> 
> 标签：iphone, objective-c, ios, xcode

我正在使用 iOS6 和 Xcode 4.5，我遇到了一些 UI 问题，`UIButton`一些按钮标题没有显示在我的视图中。

在旧版本的 iOS 中，一切都按预期工作。

请看下图。在模拟器上执行时不显示文本“按钮”

![在此处输入图像描述](../Images/349bb2e5362aa38b6e5011a738de4ef6.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-14T23:42:38.023

我有一个类似的案例，我刚刚解决了。我想我知道是什么触发了自动布局的问题。

我假设您已经创建了一个按钮，然后跨行复制，然后向下复制行。当您这样做时，设置的自动布局约束之一是按钮之间的“基线对齐”。

问题是，如果此约束（它不必是用户级别的）保留在不在同一水平位置的按钮之间，即不同行中的按钮之间。所以选择有问题的按钮并检查你是否有这个约束。这是我的情况：

![在此处输入图像描述](../Images/dfe22339ef9c5c476842a60a0b059949.png)

如果这样做，请选择它，升级到用户定义并删除它。之后一切都神奇地起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T09:22:51.410

[1](https://i.stack.imgur.com/Lmzoj.png)最后我解决了我的问题，实际上iOS6为视图控制器创建了一个默认的自动布局，通过它它将对齐视图中的每个组件。而我不需要自动布局。所以我只是取消选中属性中的自动布局来解决我的问题。

![在此处输入图像描述](../Images/745c63cd37ee4cf221ffbe8e2886f008.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T07:58:10.357

清理您的项目并再次构建，如果不起作用，则重新启动 xcode 并从模拟器中删除旧应用程序。

还有一件事，如果对您不起作用，请删除该按钮并添加新按钮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T07:59:48.690

尝试将按钮的“换行符”属性更改为除中间截断之外的任何内容。看起来它被截断为省略号。

# jquery - 如何使用 jquery 替换单击事件上的链接按钮的图像

> ID：13835136
> 
> 赞同：0
> 
> 时间：2012-12-12T07:50:21.977
> 
> 标签：jquery, jquery-ui

我是 jquery 的新手。我在视图页面中有以下链接按钮

```
<div id = 'image'>
<%= link_to_function image_tag("play_images.jpeg",:width => 30, :height => 30,:align => 'left', :title => 'Play'),:id => 'play'%>
</div> 
```

这将是什么jquery ..

```
jQuery("#play").click(function() {
       //What to write here to replace image of button 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:58:46.500

```
jQuery("#play").click(function() {
       //What to write here to replace image of button
   jQuery(this).css('background-image','your_image_url');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:20:55.893

```
link_to_function image_tag 
```

将生成一个图像标签。您只需要更改图像的 src 属性。

```
$("#play").click(function() {
   this.src = 'path_to_your_image.jpg';
}); 
```

希望这可以帮助。

# file - 通过 input=file 上的 onChange 激活 Sencha 功能

> ID：13835137
> 
> 赞同：1
> 
> 时间：2012-12-12T07:50:27.793
> 
> 标签：file, extjs, controller, touch, onchange

Sencha Touch 不支持输入类型文件，所以我尝试使用一些 html 来执行此操作

```
config: {
    html: '<input type="file" onchange="readURL(this);">', 
```

但我只能在我的应用程序之外调用函数..

有人知道我如何调用控制器功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T12:45:25.037

它不是很漂亮，但在 Sencha Touch 框架中实现此功能之前，它是一种解决方法。这是我在视图文件中使用的代码

```
config: {
    html: '<input type="file" onchange="readURL(this);">', 
```

一旦选择了文件，就会调用函数 readURL。从这个函数中，我使用以下代码调用我的应用程序\控制器\函数\

```
function readURL(input) { 
    window['myAppName'].app.getController('myControllerName').photoToStore(photo);
} 
```

在 photoToStore 函数中，我得到了照片的 base64

```
photoToStore: function(photo) {
    var reader = new FileReader();      
    var img    = new Image();
    reader.readAsDataURL(photo.files[0]);                       

    reader.onload = function(e) {   
        img.src = e.target.result;                  
    }
} 
```

在最后一步中，我将 base64 刺痛发送到后端，我可以将照片保存为文件。

# javascript - 如何将模型值和 javascript 值都传递给控制器

> ID：13835146
> 
> 赞同：-1
> 
> 时间：2012-12-12T07:51:01.500
> 
> 标签：javascript, jquery, ajax, asp.net-mvc-3

我正在提交具有 CSS 性别下拉列表的表单 如何将性别选择值提交给控制器 我得到的值为 null

```
<div class="regi-field-set">

            <div id="ddlgender" class='selectBox' tabindex="7">

                      <span class='selected' id="gender">gender</span> 
        <span class='selectArrow'>&#9660</span>
                     <div id="disableasterisk5" style="padding-bottom:8px"><span class="required">*</span></div>
                  <div class="selectOptions" id="genderSelectOptions">

                <span class="selectOption" id="ddlgen">male</span>
                      <span class="selectOption" id="ddlgen1">female</span>

        </div>
                 </div>

<div class="regi-field-set">
                   @Html.TextBoxFor(model => model.DOB, new { @class = "jq_watermark", placeholder = "date of birth", tabindex = "8",id = "DOB",title = "please enter date of birth" })
                   <div id="disableasterisk7"><span class="required">*</span></div>
                  <div class="clear"></div>
                  @Html.ValidationMessageFor(model => model.DOB)
              </div> 
```

如何将这两个值传递给控制器​​表单中的所有其他字段都使用 html.helper 字段只有性别字段是 css 实现的

有没有办法将整个模型和性别选择值传递给控制器

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:17:25.363

如果我理解您的问题，将“模型”和要在下拉列表中使用的其他内容列表传递给视图的答案可以通过以下代码完成：

控制器

```
 ....
         var model = service.GetMyThing(id);
         var genderList= service.GetGenders().Select(p => 
                   new SelectListItem { Value = p.Id.ToString(), Text = p.Name }).ToList();
         ViewBag.GenderList = genderList; 
         return View(model); 
```

看法

```
 ....
         @Html.DropDownList("GenderId",(IEnumerable<SelectListItem>)ViewBag.GenderList)
         ....
          <div class="regi-field-set">
               @Html.TextBoxFor(model => model.DOB, new { @class = "jq_watermark", placeholder = "date of birth", tabindex = "8",id = "DOB",title = "please enter date of birth" })
               <div id="disableasterisk7"><span class="required">*</span></div>
              <div class="clear"></div>
              @Html.ValidationMessageFor(model => model.DOB)
          </div> 
```

**注意**：这不是唯一的解决方案，自定义 HTMLHelpers 可用于绘制组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:19:14.477

使用 ajax 你可以做到这一点：不要使用表单并在标签中声明你的属性：

```
<a href="someLink">@Model.idText</a>
<input type="text" id="textValue"/>
<input type="submit" id="btnSubmit"/> 
```

jQuery：

```
 $(function (e) {
        //    Insert
        $("#btnSubmit").click(function () {

            $.ajax({
                url: "some url path",
                type: 'POST',
                data: { textField: $('#textValue').val(), idField: '@Model.idText' },
                success: function (result) {
                    //some code if success
                },
                error: function () {
                    //some code if failed
                }
            });
            return false;
        });
      }); 
```

希望它会帮助你

# xcode - 缓存文本/字典的 NSArray 并使其在整个应用程序中可用的最佳方法？

> ID：13835149
> 
> 赞同：2
> 
> 时间：2012-12-12T07:51:16.657
> 
> 标签：xcode, json, caching, core-data, nscache

我正在请求一个可能包含 10-100 个对象的数组，所有这些对象都是我解析为 NSDictionary 的 JSON 对象。我想缓存它并在整个应用程序中使用这些数据。NSCache 对此有用还是使用 NSUserDefaults 更好，或者实际上是在整个应用程序中持久化数据的最可接受的方式？核心数据？我是iOS新手，在这方面没有太多经验。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T08:15:26.617

您正在寻找的是一种在您的应用程序中访问数据的方法。这通常是[模型在 MVC 中扮演](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/MVC.html)的角色。

CoreData 和`NSUserDefaults`是保存数据的方法，因此当您的应用程序关闭或退出时它不会丢失。它们可以是模型的一部分，但无助于在整个应用程序中访问该数据。

如果您想要一个存储数据并且可以在代码中的任何位置访问的对象，**您可能正在寻找一个 Singleton。**

正如[这个出色的 Stack Overflow 答案所解释的](https://stackoverflow.com/questions/5043201/objective-c-store-variables-accessible-in-all-views)：

> 使用单例类，我一直将它们用于需要从应用程序内部的任何位置访问的全局数据管理器类。

作者提供了[一些示例代码，您可能会觉得有帮助](https://stackoverflow.com/questions/5043201/objective-c-store-variables-accessible-in-all-views)。

这将允许您创建一个简单的对象，该对象可在您的具有 NSDictionaries 的程序中访问。因为它是一个单例，所以程序中的其他类可以轻松访问它——这意味着它们也可以轻松访问您存储在其中的 NSDictionaries。

如果您确实决定要保存数据，那么该单例对象也将是编写任何加载和保存代码的理想位置。

祝你好运！

其他好的资源是：

*   [维基百科关于单格顿的条目](http://en.wikipedia.org/wiki/Singleton_pattern)
*   [我的 Objective C Singleton 应该是什么样的？](https://stackoverflow.com/questions/145154/what-should-my-objective-c-singleton-look-like)
*   [单格顿和 ARC/GCD](http://lukeredpath.co.uk/blog/a-note-on-objective-c-singletons.html)

# javascript - 如何在html中调用javascript文件

> ID：13835150
> 
> 赞同：3
> 
> 时间：2012-12-12T07:51:20.790
> 
> 标签：javascript, html, innerhtml

我试图`innerHtml`在 JavaScript 中调用它在同一个文件中的工作，而不是在单独的 JavaScript JS 文件中。我的工作代码是

```
<script type="text/javascript">
   function my()
    document.getElementById("abc").innerHTML="hello";
    } 
    </script>
<div id="abc" onmouseover ="my()"> hi hw ru  </div> 
```

但是，如果我在单独的 JavaScript 文件中调用此方法，即使我给出 JavaScript 文件的源路径，它也不起作用

```
<script type="text/javascript" src="js/framemrq.js"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T07:54:18.037

缺少`function`关键字

```
<script type="text/javascript">
  function my(){

        // Your code here
   }
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T07:54:40.007

请像这样正确定义您的我的功能：

```
function my() {
    document.getElementById("abc").innerHTML="hello";
} 
```

# android - 清除选项卡布局中的所有视图？

> ID：13835156
> 
> 赞同：2
> 
> 时间：2012-12-12T07:51:42.123
> 
> 标签：android, view, android-tablelayout

我正在创建一个 android 应用程序，其中我使用了选项卡。有六个选项卡显示不同的活动。选项卡中的最后一个活动有一个按钮（清除）。当我们单击按钮时，我想清除选项卡中的所有视图。可能吗。请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:00:22.110

只需在按钮的 onclick 事件中调用另一个空白活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T07:59:11.290

Try use Fragments instead of Activity for every tab, this way you could clear the tab much more quickly with `FragmentManager`

# windows - 哪个 Windows API 可以从证书（本地计算机）中的一个证书中获取详细信息？

> ID：13835159
> 
> 赞同：0
> 
> 时间：2012-12-12T07:51:52.517
> 
> 标签：windows, certificate

我想以编程方式（c/c++）获取“证书（本地计算机）”mmc 中列出的指定证书中的“指纹”值。

是否有任何 API 可以帮助我实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:01:19.490

使用 CertOpenSystemStore、CertEnumCertificatesInStore 和 CertGetCertificateContextProperty API 可以解决问题。

# performance - 如何在 PerformanceCounter 中解析 Hyper-V 虚拟网络适配器的虚拟网络适配器实例名称

> ID：13835160
> 
> 赞同：1
> 
> 时间：2012-12-12T07:51:52.763
> 
> 标签：performance, wmi, hyper-v

我想为 Hyper-V 的每个分区构建一个网络使用情况报告。为此，我尝试通过 wmi 从 PerformanceCounter 转储所有网络指标（Hyper-V 虚拟网络适配器）。

但是当我看到数据时，性能数据的实例名称类似于'virtweb1_Network Adapter_db2bd5a6-d1fb-47d3-9856-905f6097a733--9da63530-a976-4a80-8c22-d798498a9d3d'。我想做的是，从中提取分区名称并按分区汇总所有实例并报告汇总的网络使用情况。

我查找了这些实例名称的命名模式，但找不到。有人告诉我这些实例名称的命名模式吗？

# jquery - jquery：输入验证的错误消息位置

> ID：13835162
> 
> 赞同：0
> 
> 时间：2012-12-12T07:52:15.557
> 
> 标签：jquery, position, validation

我想验证名为“验证”的无线电组的输入。如果在表单提交期间没有选择单选按钮，我希望它的错误消息显示在表格下方。以下代码不起作用。我不知道哪里出了问题。有人可以帮忙吗？

```
$("#form").validate({
        rules: {
            verify: "required",
        } }); 
```

* * *

```
<style type="text/css">
.block { display: block; }
form.form label.error { display: none; }    
</style> 
```

* * *

```
<form id="form" name="form" class="form">
<table><tr>
<td><input type="radio" name="verify" id="verify" value="Verified" />
     Verified</td>
<td>
<input type="radio" name="verify" id="not_verify" value="Not verified" />Not verified</td></tr></table>
<label for="verify" class="error">Please select verification status.</label>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:16:40.787

像这样在单选按钮中使用 validate 属性`validate="required:true"`，

```
<form id="form" name="form" class="form">
<table><tr>
<td><input type="radio" name="verify" id="verify" value="Verified" validate="required:true"/>
     Verified</td>
<td>
<input type="radio" name="verify" id="not_verify" value="Not verified" validate="required:true"/>Not verified</td></tr></table>
<input type="submit" name="form" id="Submit" value="Submit" />
<label for="verify" class="error">Please select verification status.</label>
</form> 
```

# android - 网站未在 webview 中打开

> ID：13835167
> 
> 赞同：1
> 
> 时间：2012-12-12T07:52:34.513
> 
> 标签：android, webview

我正在尝试在我的 webview 中打开一个 url，但问题是 url 没有加载到我的 webview 中，它显示了选择浏览器的弹出窗口，一旦我点击一个选项，它就会在该浏览器中打开 url . 有人可以帮我解决这个问题吗，我希望 url 在 webview 本身而不是在浏览器中打开。

我的 webview xml 是：-

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/bg_new" >

    <RelativeLayout
        android:id="@+id/upBar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <ImageView
            android:id="@+id/header"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />

        <ImageView
            android:id="@+id/wbview_bckbtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/back_btn_chng" />

    </RelativeLayout>

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/upBar" >

        <WebView
            android:id="@+id/linkwebview"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:padding="10dp"
            android:scrollbars="none" />
    </RelativeLayout>

</RelativeLayout> 
```

这是我的 webview 代码：-

```
public class FbTwtrLink extends Activity {

    WebView web;
    ImageView img,bckimg,share_btn; 

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_fb_twtr_link);

        img = (ImageView)findViewById(R.id.header);
        bckimg = (ImageView) findViewById(R.id.wbview_bckbtn);

        web=(WebView)findViewById(R.id.linkwebview);
        web.getSettings().setJavaScriptEnabled(true);

        web.loadUrl("http://www.google.com");

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_fb_twtr_link, menu);
        return true;
    }

} 
```

我像这样调用webview：-

```
fbicon.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                Intent intent=new Intent(context,FbTwtrLink.class);
                //intent.putExtra("fb_link", 1);
                startActivity(intent);
            }
        }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T08:02:06.287

您应该覆盖`WebViewClient`及其方法`shouldOverrideUrlLoading`

```
 web.setWebViewClient(new MyWebClient()); 
 web.loadUrl("http://www.google.com");

class MyWebViewClient extends WebViewClient {
  @Override
  // show the web page in webview but not in web browser
   public boolean shouldOverrideUrlLoading(WebView view, String url) {
    //1 option 
    // getApplicationContext().startActivity(
    // new Intent(Intent.ACTION_VIEW, Uri.parse(url)));
    // 2 option
    //view.loadUrl(url);
        return true;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T07:57:15.927

添加此行可能会有所帮助：

```
webView.getSettings().setPluginState(PluginState.ON); 
```

还在清单中添加互联网权限

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

此外，如果使用大于等于 11 的 API 杠杆，那么您可以在应用程序级别的清单中使用它

```
 android:hardwareAccelerated="true" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T09:28:08.240

您可以添加以下语句以在 webview 中打开：

```
mweb.setWebViewClient(new WebViewClient()); 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-12-12T07:58:32.960

你可以使用直接这个>

```
 fbicon.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
Intent intent = new Intent (android.content.Intent.ACTION_VIEW, Uri.parse ("http://www,google.com")); // Prepare intent
        startActivity(intent);  
            }
        }); 
```

# jquery - 如何使用 jQuery 获取 Bootsramp btn-group 的值

> ID：13835168
> 
> 赞同：2
> 
> 时间：2012-12-12T07:52:36.467
> 
> 标签：jquery, twitter-bootstrap

嗨，你能帮我弄清楚如何使用 jQuery 在 Bootsramp 中获取所选 btn-group 的值吗？

这是一个[演示](http://jsfiddle.net/Behseini/QXvHz/)，这是代码`class="btn-group" data-toggle="buttons-radio":`

```
<div class="btn-group" data-toggle="buttons-radio">
<button type="button" class="btn btn-primary">Left</button>
<button type="button" class="btn btn-primary">Middle</button>
<button type="button" class="btn btn-primary">Right</button>
</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T07:55:34.730

你可以这样做 [`text()`](http://api.jquery.com/text/)

```
$('.btn-group .btn').on("click",function(){

   alert($(this).text())
}) 
```

[[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/4Ypjr/)]]]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T07:56:17.260

一些像这样的 jQuery 可以解决问题：

```
​$(document).ready(function(){
    $(".btn-group .btn").on('click', function(){
        console.log($(this).text());
    });        
});​ 
```

# javascript - 使用 JQuery 在单击链接 Rails 时呈现表单

> ID：13835173
> 
> 赞同：0
> 
> 时间：2012-12-12T07:52:56.337
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, jquery

我试图让 Jquery 在单击链接时呈现表单。

这是要点击的链接。

```
<%= link_to 'Try Link', new_user_path, :remote=>true, :class=>'create_user' %> 
```

我在这里有一个呈现表单的类。我想将其更改为仅在单击按钮后才显示。

```
<div class = "TestClass"><%= render 'form'%></div> 
```

javascript：现在我可以更改 div 类中的文本，但我不确定应该如何将渲染表单放入 javascript 中。

```
$('.create_user').bind('ajax:success', function() { 
    //alert("Clicked");
    $(".TestClass").text("Ajax success");
}); 
```

如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:32:01.723

在您的控制器中，确保您在没有布局的情况下渲染您的视图。然后您可以轻松地执行以下操作：

```
$('.create_user').bind('ajax:success', function(evt, data) { 
    $(".TestClass").html(data);
}); 
```

# asp.net - 如何创建具有值和每个值的图标的 asp 下拉列表？

> ID：13835174
> 
> 赞同：0
> 
> 时间：2012-12-12T07:53:01.083
> 
> 标签：asp.net, html, drop-down-menu

我需要一个应该有正常值的 asp 下拉列表。它必须包含一个图标或链接..我应该能够单独单击值或图标/链接..两者都应该相互独立..

请帮帮我。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:56:36.603

You cannot do this with plain html or asp.net, but [this](http://www.marghoobsuleman.com/jquery-image-dropdown) jQuery solution might be what you are looking for. However, it does not come with icon/link separate, so you might have to play with that yourself.

Good luck!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:35:20.877

为此使用 Devexpress dll。请检查以下链接。它会帮助你。 [下拉编辑器](http://demos.devexpress.com/aspxeditorsdemos/ASPxDropDownEdit/DropDownEdit.aspx)

如果您对此有任何疑问，请告诉我。

# asp.net - 从asp.net MVC4 Razor视图中的表中选择多个数据

> ID：13835175
> 
> 赞同：3
> 
> 时间：2012-12-12T07:53:01.143
> 
> 标签：asp.net, asp.net-mvc-4

我有以下视图，其中用户有一个产品表，我需要选择“数量 > 0”默认值为 0 的所有数据。但我不知道如何从表中获取数据集合。感谢您的回复。

```
@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
<fieldset>
    <legend>Produkty</legend>
    <table>
    @foreach (var item in Model) {
        <tr>
            <td>
                @Html.DisplayFor(model => item.Product.Name)
            </td>

            <td>
                @Html.DisplayFor(model => item.Product.Price)
            </td>
            <td>
                @Html.EditorFor(model => item.Quantity)
            </td>
        </tr>
    }
        <p>
            <input type="submit" value="Orders" />
        </p>

    </table>
</fieldset>
} 
```

//控制器

```
 public ActionResult Index()
    {
        List<ProductListViewModel> productList = new List<ProductListViewModel>();

        foreach (var item in db.Products.ToList())
        {
            ProductListViewModel model = new ProductListViewModel();
            model.Product = item;
            model.Quantity = 0;
            productList.Add(model);
        }

        return View(productList);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T08:04:25.653

由于您使用的是 Html.EditorFor，所以事情很简单。将 productList 作为参数放入您的 Index Action(for Post)，MVC 将自动将表单数据组合到 productList 对象中，因此您只需使用循环过滤服务器端的数量。当然，要识别产品对象，您最好还在视图中添加一个隐藏 ID。

```
<table>
@for(int i = 0; i<Model.Count; i++) {
    <tr>
        <td>
            @Html.HiddenFor(model => Model[i].Product.ID)
            @Html.DisplayFor(model => Model[i].Product.Name)
        </td>
        <td>
            @Html.EditorFor(model => Model[i].Quantity)
        </td>
    </tr>
}

[HttpPost]
public ActionResult Index(List<ProductListViewModel> productList)
    {
        \\...
    } 
```

# facebook - 使用 htaccess 时 Facebook 评论插件的问题

> ID：13835176
> 
> 赞同：4
> 
> 时间：2012-12-12T07:53:12.500
> 
> 标签：facebook, mod-rewrite, facebook-javascript-sdk

我的 PHP 站点中的 facebook 评论插件不理解 href 属性中的 URL，并显示`Warning: Link us unreachable.` 我已经使用不使用 .htaccess 的文件进行了测试，该文件运行良好并且不会引发任何错误或警告，但是当我放href 上的虚拟 URL。Facebook 不理解该网址。

这是我网站的代码：

```
 <script>(function(d, s, id) {

      var js, fjs = d.getElementsByTagName(s)[0];

      if (d.getElementById(id)) {return;}

      js = d.createElement(s); js.id = id;

      js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";

      fjs.parentNode.insertBefore(js, fjs);

    }(document, 'script', 'facebook-jssdk'));</script><fb:comments href="<?php echo $commenturl; ?>"  num_posts="10" width="700"></fb:comments> 
```

这是我网站上的信息：

$commenturl = [http://smashlix.com/battle/Ipad-or-Windows-8](http://smashlix.com/battle/Ipad-or-Windows-8)

.htaccess 内容：RewriteRule ^battle/(.*)$ ./index.php?view=bd&title=$1

请帮我 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:06:25.857

您的服务器使用 302 和 Location 标头进行响应，并且该标头无效，因为它不包含完全限定的 URL：[http ://web-sniffer.net/?url=http://smashlix.com/battle /Ipad 或 Windows-8](http://web-sniffer.net/?url=http://smashlix.com/battle/Ipad-or-Windows-8)

```
RewriteRule ^battle/(.*)$ ./index.php?view=bd&title=$1 
```

为什么文件名前有./？那个 .htaccess 文件在哪里，什么是 RewriteBase？

# vb.net - 将参数值从 JQuery 传递到 VB.Net 函数

> ID：13835186
> 
> 赞同：0
> 
> 时间：2012-12-12T07:54:05.293
> 
> 标签：vb.net, jquery

我这里有一个 vb.net 函数，它接受 2 个参数，并且将在此处传递的值将来自我的 jquery 代码。是否可以将值从 jquery 传递到 vb.net？我已经阅读了一些解决方案，但他们指出 vb.net 方法应该是 web 方法。就我而言， vb 函数不是一种网络方法，因此可以解决这个问题。下面是我的一些代码片段。希望你能在这方面帮助我。

**jQuery代码**

```
$('#TextBox_PRVNo').keypress(function (event) {
    if (event.keyCode == '13') {
        //basically, pass values from textbox 1 and textbox 2 to VoucherNotClaimed() method
    }
}); 
```

**VB.Net 代码**

```
 Private Function VoucherNotClaimed(ByVal strVoucherType, ByVal strPRVNo) As Boolean
        ' TODO: Search in database
        Return True
    End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T08:22:04.457

您不需要 Web 服务来使用`WebMethod`属性来装饰您的方法。如果您在常规页面上执行此操作，则会创建一个所谓的**页面方法**。简而言之：

1.  在您的页面中创建一个**公共静态**`WebMethod`方法，并使用以下属性进行修饰：

    ```
    <WebMethod()> _
    Public Shared Function VoucherNotClaimed(ByVal strVoucherType, ByVal strPRVNo) As Boolean
        ' TODO: Search in database
        Return True
    End Function 
    ```

2.  将 ScriptManager 添加到您的 ASPX 页面并将[其`EnablePageMethods`属性设置为`True`](http://msdn.microsoft.com/en-us/library/system.web.ui.scriptmanager.enablepagemethods.aspx). 另外，请确保[您的 web.config 设置正确](https://stackoverflow.com/q/583116/87698)。

3.  用 JavaScript 调用你的方法：

    ```
    var claimed = PageMethods.VoucherNotClaimed(voucherType, prvNo); 
    ```

您可以在以下 MSDN 文章中找到更详细的解释：

*   [向客户端脚本公开 Web 服务](http://msdn.microsoft.com/en-us/library/bb398998.aspx)（*在 ASP.NET 网页中调用静态方法*部分）

* * *

请注意，这是执行此操作的*经典*方法。使用 JQuery，也可以在*没有*ScriptManager 的情况下调用页面方法；快速的谷歌搜索`page method jquery`会产生大量的博客条目，涉及每一个可能的细节。

# android - android 应用程序在创建动态表格布局时崩溃

> ID：13835187
> 
> 赞同：5
> 
> 时间：2012-12-12T07:54:12.703
> 
> 标签：android, tablelayout

似乎我不是第一个遇到动态创建 TableLayOut 问题的人。问题是，当我将 TableRow 对象添加到 TableLayout 中时，我的 android 应用程序崩溃并以意外错误结束。

我想做的事？我想用下一个项目布局创建对话框

```
-------------------
|Custom |____|____| <-- Something like property grid
|graphic|____|____|
|view   |____|____|
|       |____|____|
------------------- 
```

## 关闭按钮

为了做到这一点，我正在使用下一个方法。

**1.** DialogLayout 类的创建
**2.** Dialog 类的创建

```
public class DialogLayout extends LinearLayout
{
   private CustomView m_view;
   private TableLayout m_layout;
   private TableRow m_row0;
   private TextView m_propName;
   private EditText m_propValue;

   public DialogLayout(Context context)
   {
        super(context);
        Init(context);
   }

   private void Init(Context context)
   {
      setOrientation(LinearLayout.HORIZONTAL);

      m_layout = new TableLayout(context);
      m_layout.setLayoutParams(new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
      m_layout.setStretchAllColumns(true);

      m_propName= new TextView(context);
      m_propName.setText("PropName:");

      m_propValue = new EditText(context);
      m_propValue.setText("--");

      m_row0 = new TableRow(context);
      m_row0.addView(m_propName);
      m_row0.addView(m_propValue);      
      m_layout.addView(m_row0, new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

m_view= new CustomView(context);
        int h = (int) Math.min(m_layout.getHeight(), 600);
        if (h < 600)
            h = 600;
        LinearLayout.LayoutParams adapt = new LayoutParams(300, h);
        m_view.setLayoutParams(adapt);

        addView(m_view);
        addView(m_layout);

        setFocusable(true);
        setFocusableInTouchMode(true);
   }

} 
```

**`Dialog class :`**

```
public class Dialog
{
        private Builder m_dialog = null;
        private DialogLayout m_layout = null;

        public Dialog(Context context)
        {
            m_layout = new DialogLayout(context);
            m_dialog = new AlertDialog.Builder(context);
            m_dialog.setTitle("My dialog");
            m_dialog.setView(m_layout);
            m_dialog.setNegativeButton("Close button", null);
        }

        public void show()
        {
        m_dialog.show(); // Seems to be it does not correctly calls m_dialog.show()!!!
        }
} 
```

我检查了应用程序崩溃的下一个原因

1.  如果我的自定义视图没问题？- 是的，没关系。它对应用程序行为没有任何影响
2.  如果还有其他原因？- 是的。这很奇怪，但只有当我尝试`m_row0`放入`m_layout`. 但是当我评论代码行时

    `m_layout.addView(m_row0, new TableLayout. LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));`

一切都开始正常工作，但没有桌子。

预先感谢您的任何帮助。

**日志猫：**

```
12-12 15:00:45.899: W/dalvikvm(26467): threadid=1: thread exiting with uncaught exception (group=0x40e56930)
12-12 15:00:45.909: E/AndroidRuntime(26467): FATAL EXCEPTION: main
12-12 15:00:45.909: E/AndroidRuntime(26467): java.lang.ArithmeticException: divide by zero
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.widget.TableLayout.mutateColumnsWidth(TableLayout.java:587)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.widget.TableLayout.shrinkAndStretchColumns(TableLayout.java:576)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.widget.TableLayout.measureVertical(TableLayout.java:474)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.widget.TableLayout.onMeasure(TableLayout.java:439)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.view.View.measure(View.java:15513)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1404)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.widget.LinearLayout.measureHorizontal(LinearLayout.java:1052)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:590)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.view.View.measure(View.java:15513)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.view.View.measure(View.java:15513)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.view.View.measure(View.java:15513)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1404)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:695)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.view.View.measure(View.java:15513)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.view.View.measure(View.java:15513)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.view.View.measure(View.java:15513)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2176)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.view.View.measure(View.java:15513)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1874)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1064)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1265)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.view.Choreographer.doCallbacks(Choreographer.java:562)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.view.Choreographer.doFrame(Choreographer.java:532)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.os.Handler.handleCallback(Handler.java:725)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.os.Looper.loop(Looper.java:137)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at android.app.ActivityThread.main(ActivityThread.java:5039)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at java.lang.reflect.Method.invokeNative(Native Method)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at java.lang.reflect.Method.invoke(Method.java:511)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-12 15:00:45.909: E/AndroidRuntime(26467):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T08:08:12.050

您应该使用`TableRow.LayoutParams`而不是`TableLayout.LayoutParams`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T08:13:50.693

你有一个数学问题：

```
12-12 15:00:45.909: E/AndroidRuntime(26467): FATAL EXCEPTION: main
12-12 15:00:45.909: E/AndroidRuntime(26467): java.lang.ArithmeticException: divide by zero 
```

这说明了一些你被零除的地方。

由于您不需要进行很多数学运算，我猜这个问题来自这里：

```
int h = (int) Math.min(m_layout.getHeight(), 600); 
```

所以我的猜测是`m_layout.getHeight()`返回零。

# javascript - 动态选择要下载的js文件

> ID：13835189
> 
> 赞同：0
> 
> 时间：2012-12-12T07:54:22.233
> 
> 标签：javascript

我有一个js客户端。目前我有一个*app.js*文件，它是我所有*js*文件的串联。因此，在我的 html 文件中，我只引用了一个*js*文件：

```
<script type="text/javascript" src="js/app.js"></script> 
```

但是，出于调试目的，我希望我的客户端下载所有原始*js*文件并改用它们。但是，由于我有很多文件，我不想手动添加它们。我想：

1.  迭代文件夹中的所有文件。
2.  选择*js*文件。
3.  仅下载这些文件。

关于第三项——我想我知道该怎么做——所以我的主要问题是如何迭代文件以选择有趣的文件。

# r - R中的套接字不稳定

> ID：13835190
> 
> 赞同：2
> 
> 时间：2012-12-12T07:54:32.533
> 
> 标签：r, sockets

我试图让两个 R 程序通过套接字进行通信。这是代码：

程序A

```
con <- tryCatch(socketConnection(port=10170),error=function(e) return(FALSE))
repeat
{
  x <- tryCatch(unserialize(con),error=function(e) return(NULL))
  if(!is.null(x))
  {
    print(x)
    break
  }
  Sys.sleep(.01)
} 
```

方案 B

```
con <- tryCatch(socketConnection(port=10170,server=T),error=function(e) return(FALSE))
Sys.sleep(3)
serialize("account and trader disconnected",con)
close(con) 
```

这是问题所在。似乎程序B在写入时程序A可能会读取套接字，因此A只是获取字符串的一部分。结果是这样的：

> accou\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\ xff\xff

有人有想法吗？非常感谢！

# google-apps-script - 使用 google apss 脚本将文件上传到驱动器

> ID：13835191
> 
> 赞同：0
> 
> 时间：2012-12-12T07:54:32.687
> 
> 标签：google-apps-script, google-drive-api

我正在尝试将图像文件上传到谷歌驱动器...代码;

```
function upload() {
  var url= // url for image
  var contents=UrlFetchApp.fetch(url).getContent()   // trying to get image content
  var base = 'https://docs.google.com/feeds' 
  var fetchArgs = googleOAuth_('docs', base);
  fetchArgs.method='POST'
  fetchArgs.contentType='image/jpeg'
  var xml={title :"image",content:contents}
  fetchArgs.payload=xml
  var fileURL='https://www.googleapis.com/upload/drive/v2/files?uploadType=media'
  UrlFetchApp.fetch(fileURL, fetchArgs)
}

function googleOAuth_(name,scope) {
  var oAuthConfig = UrlFetchApp.addOAuthService(name);
  oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken?scope="+scope);
  oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
  oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
  oAuthConfig.setConsumerKey(consumerKey);
  oAuthConfig.setConsumerSecret(consumerSecret);
  return {oAuthServiceName:name, oAuthUseToken:"always"};
} 
```

当我运行此代码时，我收到此错误：

返回代码 403 的请求失败。服务器响应：{“错误”：{“错误”：[{“域”：“usageLimits”，“原因”：“dailyLimitExceededUnreg”，“消息”：“未验证使用的每日限制已超过。继续使用需要注册。", "extendedHelp": " [https://code.google.com/apis/console](https://code.google.com/apis/console) " } ], "code": 403, "message": "Daily Limit for Unauthenticated Use Exceeded. 继续使用需要报名。” } }

我做错了什么，我没有得到这个....请给我一些可行的解决方案

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T22:13:47.983

这有什么问题：

```
DocsList.createFile(UrlFetchApp.fetch(fileURL, fetchArgs)); 
```

作为整个代码的替代品？

# c++ - 在 Qt 中序列化我的自定义类

> ID：13835197
> 
> 赞同：18
> 
> 时间：2012-12-12T07:54:49.800
> 
> 标签：c++, qt, serialization, qobject

我使用[读/写 QObjects](https://stackoverflow.com/questions/1419099/reading-writing-qobjects) 是真的吗？我用它序列化一个类，但是反序列化它不是原始类！

我能做些什么？

这是我的基类标题：

```
class Base : public QObject
{
    Q_OBJECT
public:
    explicit Base(QObject *parent = 0);

};
QDataStream &operator<<(QDataStream &ds, const Base &obj);
QDataStream &operator>>(QDataStream &ds, Base &obj) ; 
```

.cpp 是：

```
Base::Base(QObject *parent) :
    QObject(parent)
{
}
QDataStream &operator<<(QDataStream &ds, const Base &obj) {
    for(int i=0; i<obj.metaObject()->propertyCount(); ++i) {
        if(obj.metaObject()->property(i).isStored(&obj)) {
            ds << obj.metaObject()->property(i).read(&obj);

        }
    }
    return ds;
}
QDataStream &operator>>(QDataStream &ds, Base &obj) {
    QVariant var;
    for(int i=0; i<obj.metaObject()->propertyCount(); ++i) {
        if(obj.metaObject()->property(i).isStored(&obj)) {
            ds >> var;
            obj.metaObject()->property(i).write(&obj, var);
        }
    }
    return ds;
} 
```

我有一个从 base 继承的学生类：

```
class student : public Base
{
public:
    student();
    int id;
    QString Name;
}; 
```

这是我的主要内容：

```
int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    Widget w;
    w.show();
    student G;
    student G2;
    G.id=30;
    G.Name="erfan";
    qDebug()<<G.id<<G.Name;
    QFile file("file.dat");
    file.open(QIODevice::WriteOnly);

    QDataStream out(&file);   // we will serialize the data into the file
    out <<G;
    qDebug()<<G2.id<<G2.Name;
    file.close();
    file.open(QIODevice::ReadOnly);
    out>>G2;
    qDebug()<<G2.id<<G2.Name;

    return a.exec();
} 
```

这是我的输出：

```
30 "erfan" 
1498018562 "" 
1498018562 "" 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-12T08:12:52.093

您必须将`id`and`Name`作为 Q_PROPERTY 来使用 metaObject 属性系统处理它：

```
class student : public Base
{
    Q_OBJECT // Q_OBJECT macro will take care of generating proper metaObject for your class
    Q_PROPERTY(int id READ getId WRITE setId)
    Q_PROPERTY(QString Name READ getName WRITE setName)
public:
    student();
    int getId() const { return id; }
    void setId(int newId) { id = newId; }
    QString getName() const { return Name; }
    void setName(const QString &newName) { Name = newName; }

private:
    int id;
    QString Name;
}; 
```

现在应该以适当的方式处理属性。

有关详细信息，请参阅[http://doc.qt.io/qt-5/properties.html](http://doc.qt.io/qt-5/properties.html)。

# c# - 使用 AddManipulator 进行触摸操作

> ID：13835198
> 
> 赞同：0
> 
> 时间：2012-12-12T07:54:51.437
> 
> 标签：c#, wpf

使用 AddManipulator 时，触摸是否路由到新的 Manipulation？当我执行以下操作时，一切正常，但在 TouchLeave 事件之后留下了触摸。因此，例如，如果我进行单指旋转，离开触摸的元素并再次触摸它，它就变成了两指缩放。

```
private void HV3DTouchDown(object sender, TouchEventArgs e)
{
    Canvas canvas = sender as Canvas
    Manipulation.AddManipulator(canvas, e.TouchDevice.AsManipulator());
    e.Handled = true;
    CaptureTouch(e.TouchDevice);
}

private void HV3DTouchLeave(object sender, TouchEventArgs e)
{
    Canvas canvas = sender as Canvas
    Manipulation.RemoveManipulator(canvas, e.TouchDevice.AsManipulator());
    e.Handled = true;
    ReleaseTouchCapture(e.TouchDevice);
} 
```

# python - 绑定到光标移动不会改变 INSERT 标记

> ID：13835207
> 
> 赞同：2
> 
> 时间：2012-12-12T07:55:16.743
> 
> 标签：python, user-interface, tkinter

每次用户通过箭头、鼠标单击等更改插入点时，我都需要执行快速检查...所以我将其绑定：

```
text.bind("<Button-1>", insertchanged)

def insertchanged(event):
    pos=text.index(INSERT)
    n=text.tag_names(INSERT)
        ... 
```

但我发现 pos 仍然是用户更改*之前的位置！*我如何找到新位置（如果可能的话，一个通用的解决方案：我必须将它绑定到 home、end、pgup、pgdown、...）

谢谢你！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T13:19:02.457

你的方法有几个问题。一方面，您需要绑定到几乎所有内容以跟踪插入点（请记住：每次插入或删除任何内容时它都会更改）。

其次，基于类绑定的小部件发生更改，默认情况下，您创建的任何绑定都将在类绑定*之前*触发。您可以解决这些问题，但这很棘手。例如，要解决事件处理顺序，请在此站点和其他站点中搜索“绑定标签”或“绑定标签”。

然而，有一个几乎万无一失的解决方案。缺点是它需要一些严重的 Tcl 巫术：您必须用代理替换内部小部件，该代理在插入点更改时调用回调。我在下面包含了一个完整的工作示例。

```
import Tkinter as tk

class Example(tk.Frame):
  def __init__(self, parent):
      tk.Frame.__init__(self, parent)
      self.text = CustomText(self, wrap="word")
      self.text.pack(side="top", fill="both", expand=True)
      self.label = tk.Label(self, anchor="w")
      self.label.pack(side="bottom", fill="x")

      # this is where we tell the custom widget what to call
      self.text.set_callback(self.callback)

  def callback(self, result, *args):
      '''Updates the label with the current cursor position'''
      index = self.text.index("insert")
      self.label.configure(text="index: %s" % index)

class CustomText(tk.Text):
    def __init__(self, *args, **kwargs):
        tk.Text.__init__(self, *args, **kwargs)

        # Danger Will Robinson!
        # Heavy voodoo here. All widget changes happen via
        # an internal Tcl command with the same name as the 
        # widget:  all inserts, deletes, cursor changes, etc
        #
        # The beauty of Tcl is that we can replace that command
        # with our own command. The following code does just
        # that: replace the code with a proxy that calls the
        # original command and then calls a callback. We
        # can then do whatever we want in the callback. 
        private_callback = self.register(self._callback)
        self.tk.eval('''
            proc widget_proxy {actual_widget callback args} {

                # this prevents recursion if the widget is called
                # during the callback
                set flag ::dont_recurse(actual_widget)

                # call the real tk widget with the real args
                set result [uplevel [linsert $args 0 $actual_widget]]

                # call the callback and ignore errors, but only
                # do so on inserts, deletes, and changes in the 
                # mark. Otherwise we'll call the callback way too 
                # often.
                if {! [info exists $flag]} {
                    if {([lindex $args 0] in {insert replace delete}) ||
                        ([lrange $args 0 2] == {mark set insert})} {
                        # the flag makes sure that whatever happens in the
                        # callback doesn't cause the callbacks to be called again.
                        set $flag 1
                        catch {$callback $result {*}$args } callback_result
                        unset -nocomplain $flag
                    }
                }

                # return the result from the real widget command
                return $result
            }
            ''')
        self.tk.eval('''
            rename {widget} _{widget}
            interp alias {{}} ::{widget} {{}} widget_proxy _{widget} {callback}
        '''.format(widget=str(self), callback=private_callback))

    def _callback(self, result, *args):
        self.callback(result, *args)

    def set_callback(self, callable):
        self.callback = callable

if __name__ == "__main__":
  root = tk.Tk()
  frame = Example(root)
  frame.pack(side="top", fill="both", expand=True)
  root.mainloop() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-17T12:30:26.483

您可以使用`WidgetRedirector`标准库`idlelib`（[https://github.com/python/cpython/blob/master/Lib/idlelib/redirector.py](https://github.com/python/cpython/blob/master/Lib/idlelib/redirector.py)），这似乎符合 Bryan 的建议：

```
import tkinter as tk
from idlelib.WidgetRedirector import WidgetRedirector

root = tk.Tk()
text = tk.Text(root)
text.grid()

def on_mark(*args):
    print("mark", args)
    return original_mark(*args)

def on_insert(*args):
    print("insert", args)
    return original_insert(*args)

def on_delete(*args):
    print("delete", args)
    return original_delete(*args)

redirector = WidgetRedirector(text)
original_mark = redirector.register("mark", on_mark)
original_insert = redirector.register("insert", on_insert)
original_delete = redirector.register("delete", on_delete)

root.mainloop() 
```

# c# - 通过代理连接不包括我的标题

> ID：13835209
> 
> 赞同：0
> 
> 时间：2012-12-12T07:55:28.503
> 
> 标签：c#, http, webclient

好的，简单的问题，但在我开始之前需要一些解释。

我正在尝试使用 System.Net.WebClient （或 WebRequest，相同的结果）通过代理服务器下载 https 页面。

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Net;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApplication3
{
    static class Program
    {
        static void Main(string[] args)
        {
             var wc = new WebClient();
             wc.Proxy = new WebProxy("MyProxyAddress") { UseDefaultCredentials = true };
             wc.Headers.Add("xyz", "abc");

            try
            {
                 Console.WriteLine(wc.DownloadString("https://www.google.co.nz"));
            }
            catch (WebException wex)
            {
                if (wex.Response != null)
                    using (var reader = new StreamReader(wex.Response.GetResponseStream()))
                        Console.WriteLine(reader.ReadToEnd());
            }
        }
    }
} 
```

如果我此时启动 Fiddler，我可以看到请求如下所示。请注意，我已将 Fiddler 设置为需要代理身份验证。

```
CONNECT www.google.co.nz:443 HTTP/1.1
Host: www.google.co.nz
Proxy-Connection: Keep-Alive 
```

回应将是

```
HTTP/1.1 407 Proxy Auth Required
Connection: close 
```

，正如预期的那样。如果我将地址从 https://... 更改为 http://...，我会得到这个。请注意，现在显示 xyz 标头

```
GET http://www.google.co.nz/ HTTP/1.1
xyz: abc
Host: www.google.co.nz
Proxy-Connection: Keep-Alive 
```

一切都很好，除非我正在通过的代理需要用户代理。包括我的 User-Agent 在内的所有标头都从请求中删除，因此代理拒绝了该请求。如果我将 Fiddler 配置为强制将 User-Agent 标头放入请求中，则一切正常。

那么，为什么我的标头没有包含在 CONNECT 请求中？这是一个 MS 错误，还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:38:19.033

通过 Web 代理的 HTTPS 的工作方式如下：

1.  客户端向代理发送`CONNECT`请求 - 这就是您在 Fiddler 中看到的内容。
2.  Proxy 同意连接、返回`200 CONNECTED`，现在充当无逻辑数据泵
    *   如果代理需要身份验证，它将返回`407 Proxy Auth Required`，并且客户端将使用正确的代理身份验证发出相同的`CONNECT`请求。
3.  客户端现在可以通过盲目地抽取数据的代理与真实服务器直接通信。
    *   通常，客户端会执行 HTTPS 会话协商，然后通过加密会话发送“真正的”HTTP 请求。

我不是 100% 熟悉`WebClient`，但我假设添加的标头仅适用于“真实”HTTP 请求（上面的 3）。您也许可以对您的`WebProxy`实例做一些事情，尽管我在那里也没有找到任何解决方案。

# ios - 核心数据应用程序的 NSRangeException 异常

> ID：13835216
> 
> 赞同：0
> 
> 时间：2012-12-12T07:55:36.320
> 
> 标签：ios, xcode, uitableview, core-data

我正在使用 Core Data 存储联系人的某些详细信息，例如`RecordID`，`Modificationtimestamp`等。

我的应用程序崩溃并显示以下消息；

```
CoreData: error: Serious application error.  Exception was caught during Core Data change processing.  This is usually a bug within an observer of NSManagedObjectContextObjectsDidChangeNotification.  *** -[_PFBatchFaultingArray objectAtIndex:]: index (68) beyond bounds (57) with userInfo (null)
2012-12-12 13:10:11.585 SalesPro[351:907] *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[_PFBatchFaultingArray objectAtIndex:]: index (68) beyond bounds (57)' 
```

这是崩溃日志：

```
Last Exception Backtrace:
0   CoreFoundation                  0x389c029e __exceptionPreprocess + 158
1   libobjc.A.dylib                 0x3519797a objc_exception_throw + 26
2   CoreFoundation                  0x389c01c0 +[NSException raise:format:] + 100
3   CoreData                        0x36f656ce -[_PFBatchFaultingArray objectAtIndex:] +   142
4   CoreData                        0x3701e5ec +[NSFetchedResultsController(PrivateMethods) _insertIndexForObject:inArray:lowIdx:highIdx:sortDescriptors:] + 224
5   CoreData                        0x3701adf2 -[NSFetchedResultsController(PrivateMethods) _postprocessInsertedObjects:] + 510
6   CoreData                        0x3701ca82 -[NSFetchedResultsController(PrivateMethods) _managedObjectContextDidChange:] + 2402
7   CoreFoundation                  0x38911032 _CFXNotificationPost + 1422
8   Foundation                      0x3a073d8c -[NSNotificationCenter postNotificationName:object:userInfo:] + 68
9   CoreData                        0x36faa302 -[NSManagedObjectContext(_NSInternalNotificationHandling) _postObjectsDidChangeNotificationWithUserInfo:] + 74
10  CoreData                        0x36fa9862 -[NSManagedObjectContext(_NSInternalChangeProcessing) _createAndPostChangeNotification:withDeletions:withUpdates:withRefreshes:] + 294
11  CoreData                        0x36f2bc06 -[NSManagedObjectContext(_NSInternalChangeProcessing) _processRecentChanges:] + 2694
12  CoreData                        0x36f2b10a _performRunLoopAction + 266
13  CoreFoundation                  0x389956c8 __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 16
14  CoreFoundation                  0x389939bc __CFRunLoopDoObservers + 272
15  CoreFoundation                  0x38993d12 __CFRunLoopRun + 738
16  CoreFoundation                  0x38906eb8 CFRunLoopRunSpecific + 352
17  CoreFoundation                  0x38906d44 CFRunLoopRunInMode + 100
18  GraphicsServices                0x346df2e6 GSEventRunModal + 70
19  UIKit                           0x3910e2f4 UIApplicationMain + 1116
20  SalesPro                        0x000a4c0c 0xa3000 + 7180
21  libdyld.dylib                   0x39ac7b1c start + 0 
```

方法没有矛盾`numberOfRowsInSection`。

编辑

更新表格视图的代码

```
- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath {

    UITableView *tableView = self.table;

    switch(type) {

        case NSFetchedResultsChangeInsert:
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            [tableView cellForRowAtIndexPath:indexPath];
            break;

        case NSFetchedResultsChangeDelete:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeUpdate:
            [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];

            break;

        case NSFetchedResultsChangeMove:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation: UITableViewRowAnimationFade];
            break;
        }

    [self.table reloadData];
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller {
    // The fetch controller has sent all current change notifications, so tell the table view to process all updates.
    [self.table endUpdates];

    [table reloadData];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:29:55.877

没有更多细节，很难说发生了什么，但你应该实施

```
- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller {
    [self.tableView beginUpdates];
} 
```

该方法为更改设置表。

最后，你应该打电话

```
- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller {
    [self.tableView endUpdates];
} 
```

通知更改完成。

`reloadData`如果您正确实现了方法，则方法不是必需的`- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath`。

此外，正如@Mundi 建议的那样，您还应该调用`- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id <NSFetchedResultsSectionInfo>)sectionInfo`来设置对您的部分的更改。

我真的建议阅读 Apple 在[NSFetchedResultsControllerDelegate Protocol Reference](http://developer.apple.com/library/ios/#documentation/CoreData/Reference/NSFetchedResultsControllerDelegate_Protocol/Reference/Reference.html)提供的模板。

此外，您可以查看[iOS 5 上的 Core Data 教程：如何使用 NSFetchedResultsController](http://www.raywenderlich.com/999/core-data-tutorial-how-to-use-nsfetchedresultscontroller)。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:46:40.667

确保您还实现了处理更全面的部分更改的`NSFetchedResultsControllerDelegate`方法。`controller:didChangeSection:atIndex:forChangeType:`

# spring - Quartz：永远不会执行的 Cron 表达式

> ID：13835221
> 
> 赞同：93
> 
> 时间：2012-12-12T07:56:12.487
> 
> 标签：spring, quartz-scheduler

我知道这里有一个重复[，](https://stackoverflow.com/questions/8324306/cron-job-that-will-never-execute)这可能正是我的情况，尽管它应该得到一些更好的解释，我将在这里尝试提供。

我使用 Spring 应用程序上下文处理 Java Web 应用程序。在这种情况下，我使用 Quartz 定义了计划作业。这些作业由 .properties 文件中定义的 cron 触发。

Spring 上下文嵌入在 war 中，而 .properties 文件位于应用程序服务器上（在本例中为 Tomcat）。

这很好，允许根据环境（开发、集成、生产......）定义不同的 crons。

现在，当在我自己的计算机上本地运行此应用程序时，我不希望执行这些作业。有没有办法编写一个永远不会触发的 cron 表达式？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-12-12T09:43:47.020

# TL;博士

在 Quartz 1 中，您可以使用这个 cron：（`59 59 23 31 12 ? 2099`最后有效日期）。
在 Quartz 2 中，你可以使用这个 cron：`0 0 0 1 1 ? 2200`

# 使用远在未来的表达

使用`org.quartz.CronExpression`.

```
String exp = "0 0 0 1 1 ? 3000";
boolean valid = CronExpression.isValidExpression(exp);
System.out.println(valid);
if (valid) {
    CronExpression cronExpression = new CronExpression(exp);
    System.out.println(cronExpression.getNextValidTimeAfter(new Date()));
} 
```

当我这样做`String exp = "# 0 0 0 1 1 ?";`时，`isValid`测试返回`false`。

使用上面给出的示例，输出如下：

```
true
null 
```

意义：

*   表达式有效；
*   没有与此表达式匹配的即将到来的日期。

但是，为了让调度程序接受 cron 触发器，后者*必须*匹配未来的日期。

我尝试了几年，发现一旦年份超过 2300，Quartz 似乎不再打扰（尽管我[在 Quartz 2 的文档中](http://quartz-scheduler.org/documentation/quartz-2.x/tutorials/tutorial-lesson-06)没有找到该年份的最大值）。可能有一种更清洁的方法可以做到这一点，但这将满足我现在的需求。

**所以，最后，我建议的 cron 是`0 0 0 1 1 ? 2200`.**

### 石英 1 变体

请注意，在 Quartz 1 中，[2099 是最后一个有效年份](http://www.quartz-scheduler.org/documentation/quartz-1.x/tutorials/crontrigger)。因此，您可以调整您的 cron 表达式以使用[Maciej Matys 的建议](https://stackoverflow.com/a/14732997/1734119)：`59 59 23 31 12 ? 2099`

# 替代方案：使用过去的日期

[Arnaud Denoyelle](https://stackoverflow.com/users/2192903/arnaud-denoyelle)提出了一些更优雅的建议，我上面的测试验证了它是一个正确的表达方式：与其选择遥远的未来，不如选择遥远的过去：

`0 0 0 1 1 ? 1970`（根据 Quartz 文档的第一个有效表达式）。

**这个解决方案虽然不起作用。**

[hippofluff](https://stackoverflow.com/users/3311840/hippofluff)强调 Quartz 会检测到一个过去的表达式将永远不会再次执行，因此会抛出异常。

```
org.quartz.SchedulerException: Based on configured schedule, the given trigger will never fire. 
```

这似乎在 Quartz[中已经存在很长时间了](https://www.google.com/search?q=Quartz+Based+on+configured+schedule%2C+the+given+trigger+will+never+fire)。

### 经验教训：测试并非万无一失

这突出了我的测试的一个弱点：如果你想测试 a `CronExpression`，请记住**它必须有一个`nextValidTime`**¹。否则，您将其传递给的调度程序将简单地拒绝它，并出现上述异常。

我建议按如下方式调整测试代码：

```
String exp = "0 0 0 1 1 ? 3000";
boolean valid = CronExpression.isValidExpression(exp);
if (valid) {
    CronExpression cronExpression = new CronExpression(exp);
    valid = cronExpression.getNextValidTimeAfter(new Date()) != null;
}
System.out.println("Can I use <" + exp + ">? " + (valid ? "Go ahead!" : "This shall fail.")); 
```

你去：不需要思考，只需阅读输出。

* * *

[¹这是我在测试 Arnaud 的解决方案时忘记的部分，使我成为傻瓜并证明我的测试不是我的证明。]

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-12-18T17:12:44.660

从技术上讲，可选 Quartz 年份字段的有效值为 1970-2099，因此 2300 不是预期值。我假设您*确实*需要这样做，并且您的 Quartz 版本尝试强制执行有效的 cron 语法（第 1-31 天、第 1-12 个月等）。

我目前在 Resque-scheduler for Rails 中使用以下代码，它接受经过验证的 crontab 格式的调度信息，以创建仅手动运行的测试作业：

```
cron: "0 5 31 2 *" 
```

[该作业将耐心等待2 月 31](http://en.wikipedia.org/wiki/February_31)日凌晨，然后再运行。对于[Quartz crontrigger](http://quartz-scheduler.org/documentation/quartz-2.1.x/tutorials/crontrigger)中的等效项，请尝试此行或其一些变体：

```
0 0 5 31 2 ? 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-02-06T15:45:46.853

试试这个：`59 59 23 31 12 ? 2099`

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2019-07-24T09:39:13.717

如果您在表达式中使用`@Scheduled(cron="")`表达式（技术上不使用石英，但在那些日子里很常见），您不能使用 7-field year-in-the-future 解决方案，但这些选项：

*   如果您使用的是 spring 5.1+ (springBoot 2.1+)，只需使用`"${your.cron.prop:-}`并且不要将属性设置为禁用执行 - 请参阅[@Scheduled](https://docs.spring.io/spring/docs/5.1.0.RELEASE/javadoc-api/org/springframework/scheduling/annotation/Scheduled.html#cron--)。或者将属性本身设置为“-”（如果您使用的是 yml，请确保使用引号）。
*   使用该方法完全禁用 bean/服务`@Scheduled`，例如通过使用`@ConditionalOnProperty("my.scheduleproperty.active")`注释而不设置属性（或将其设置为`false`）

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-01-10T08:56:57.493

我在尝试解决类似问题时发现了这一点 - 禁用 cron 表达式 - 但遇到了同样的问题，即需要有效的未来计划日期。

我也遇到了使用 7 值语法的问题 - 无法在 cron 计划中指定年份。

所以我用了这个：0 0 3 ? 2 星期一#5

下一次将执行的是：

1.  2044 年 2 月 29 日星期一凌晨 3:00
2.  2072 年 2 月 29 日星期一凌晨 3:00
3.  2112 年 2 月 29 日星期一凌晨 3:00
4.  2140 年 2 月 29 日星期一凌晨 3:00
5.  2168 年 2 月 29 日星期一凌晨 3:00

因此，从本质上讲，就所有意图和目的而言，它已被禁用。:)

啊。诅咒，这仅适用于 Quartz 调度程序语法 - Spring CronTrigger 语法不允许第五个星期一的 MON#5

所以下一个最好的事情是 0 0 3 29 2 ？仅在 2 月 29 日（闰年）凌晨 3 点执行

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-05-27T09:35:37.147

嗨，你可以试试这个它永远不会执行你的计划，就像`-`在 cron 中一样通过

```
 @Scheduled(cron = "${schedular.cron.expression}")

schedular.cron.expression=- 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-08-08T09:42:37.290

> 现在，当在我自己的计算机上本地运行此应用程序时，我不希望执行这些作业。有没有办法编写一个永远不会触发的 cron 表达式？

如果您想在您的计算机上禁用计划，您有几种方法可以做到这一点。

首先，您可以将 Quartz 的配置移动到`@Profile`基于 - 的配置，并且不在本地启用此配置文件。如果配置文件未激活，Quartz 根本不会启动。

另一种方法是将 Quartz 配置为不自动启动。`SchedulerFactoryBean#setAutoStartup()`您可以在`BeanPostProcessor`开发配置文件中注册一个。虽然这个线程很老了，但 Spring Boot 通过注册一个`SchedulerFactoryBeanCustomizer`bean 来做同样的事情提供了一个替代方案。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2021-06-29T12:45:50.367

对任何天数少于此天数的月份使用 31。因此，`0 0 31 2 * for February`或 `0 0 31 5 * for May` `0 0 31 6 for June` `* 0 0 31 9 * for September` `0 0 31 11 * for November`

应该这样做以防止 cron 执行。这些是有效的 cron 表达式，可以在 [https://crontab.guru/#0_0_31_2_](https://crontab.guru/#0_0_31_2_)上进行验证*

# jquery - 在创建之前验证正则表达式和存在

> ID：13835225
> 
> 赞同：0
> 
> 时间：2012-12-12T07:56:29.693
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

所以我试图在创建记录之前验证我通过的参数。我正在模型中尝试这个。

**模型**

```
 def self.create_hashtag_signed_in(hashtag)
  hashtag _regex = /[A-Za-z][A-Za-z0-9]*(?:_[A-Za-z0-9]+)*$/i

  validates hashtag :presence   => true,
                    :format     => { :with => hashtag_regex },
                    :uniqueness => { :case_sensitive => false }    

  dash = "#"
  # @view_count_init = "0"
  @hashtag_scrubbed = [dash, hashtag].join
  User.current_user.twitter.search("%#{@hashtag_scrubbed}", :lang => "en", :count => 20, :result_type => "mixed").results.map do |tweet|
    unless exists?(tweet_id: tweet.id)
        create!(
            tweet_id: tweet.id,
            text: tweet.text,
            profile_image_url: tweet.user.profile_image_url,
            from_user: tweet.from_user,
        from_user_name: tweet.user.name, 
            created_at: tweet.created_at,
        hashtag: @hashtag_scrubbed,
        view_count: "0",
        wins: "0"
          ) 
        end     
    end
  end 
```

**控制器**

```
def create 
            @stats_total = Hashtag.count 
    @stats_wins = Hashtag.sum(:wins)
    @stats_views = Hashtag.sum(:view_count)

    @stats_losers = (@stats_views - @stats_wins) 
        @vote_history = Hashlog.vote_history
        if signed_in?
            Hashtag.create_hashtag_signed_in(params[:hashtag])
        else
            Hashtag.create_hashtag_guest(params[:hashtag])
        end
        Hashlog.create_hashlog(params[:hashtag])
        @random_hashtag_pull = Hashtag.random_hashtags_pull
        @leaderboard = Hashtag.leaderboard_history_current
        respond_to do |format|
        format.html { redirect_to root_path }
        format.js
    end
     end 
```

它正在抛出错误

```
Started GET "/" for 127.0.0.1 at 2012-12-11 23:52:57 -0800

NoMethodError (undefined method `key?' for nil:NilClass): 
```

然后，如果它抛出不存在，我希望能够通过 jQuery 将其返回给提交是如何工作的。

更改为 :hashtag 错误

```
/Users/user/Development/tweetvstweet/app/models/hashtag.rb:34: syntax error, unexpected ':', expecting keyword_end
validates :hashtag :presence => true, 
                    ^
/Users/user/Development/tweetvstweet/app/models/hashtag.rb:34: Can't assign to true
validates :hashtag :presence => true, 
                                     ^
/Users/user/Development/tweetvstweet/app/models/hashtag.rb:35: syntax error, unexpected tASSOC, expecting tCOLON2 or '[' or '.'
          :format => { :with => hashtag_regex }, 
                    ^
/Users/user/Development/tweetvstweet/app/models/hashtag.rb:35: syntax error, unexpected ',', expecting keyword_end
          :format => { :with => hashtag_regex }, 
                                                ^ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:18:29.093

在你的模型中添加这样的然后尝试它可能会起作用

```
 def self.create_hashtag_signed_in(hashtag_value)
     hashtag _regex = /[A-Za-z][A-Za-z0-9]*(?:_[A-Za-z0-9]+)*$/i

     validates :hashtag , :presence   => true,
                  :format     => { :with => hashtag_regex },
                  :uniqueness => { :case_sensitive => false }    

dash = "#"
# @view_count_init = "0"
@hashtag_scrubbed = [dash, hashtag_value].join
User.current_user.twitter.search("%#{@hashtag_scrubbed}", :lang => "en", :count => 20, :result_type => "mixed").results.map do |tweet|
  unless exists?(tweet_id: tweet.id)
      self.create!(
          tweet_id: tweet.id,
          text: tweet.text,
          profile_image_url: tweet.user.profile_image_url,
          from_user: tweet.from_user,
      from_user_name: tweet.user.name, 
          created_at: tweet.created_at,
      hashtag: @hashtag_scrubbed,
      view_count: "0",
      wins: "0"
        ) 
   end     
 end 
```

结尾

试试可能是......

# java - Serializing no more possible of OpenJPA Entity throws UnsupportedOperationException, DetachedStateManager.isProvisional(DetachedStateManager.java:760)

> ID：13835227
> 
> 赞同：0
> 
> 时间：2012-12-12T07:56:30.377
> 
> 标签：java, serialization, jpa, red5, openjpa

My framework seems to have issues with a special entity that constantly fails to get serialized with an exception.

Entity: [http://svn.apache.org/viewvc/incubator/openmeetings/trunk/singlewebapp/src/org/apache/openmeetings/persistence/beans/basic/Server.java?view=markup](http://svn.apache.org/viewvc/incubator/openmeetings/trunk/singlewebapp/src/org/apache/openmeetings/persistence/beans/basic/Server.java?view=markup)

My theory: The serializer uses the enhanced class from OpenJPA, and it cannot serialize it.
But I have no idea how this can only happen with this entity and all other work fine.

Exception:

```
WARN: Exception: java.lang.reflect.InvocationTargetException
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.commons.beanutils.BeanMap.get(BeanMap.java:390)
    at org.red5.io.amf.Output.writeObject(Output.java:348)
    at org.red5.io.object.Serializer.writeObjectType(Serializer.java:332)
    at org.red5.io.object.Serializer.writeComplex(Serializer.java:173)
    at org.red5.io.object.Serializer.serialize(Serializer.java:119)
    at org.red5.io.amf.Output.writeObject(Output.java:348)
    at org.red5.io.object.Serializer.writeObjectType(Serializer.java:332)
    at org.red5.io.object.Serializer.writeComplex(Serializer.java:173)
    at org.red5.io.object.Serializer.serialize(Serializer.java:119)
    at org.red5.io.amf.Output.writeObject(Output.java:348)
    at org.red5.io.object.Serializer.writeObjectType(Serializer.java:332)
    at org.red5.io.object.Serializer.writeComplex(Serializer.java:173)
    at org.red5.io.object.Serializer.serialize(Serializer.java:119)
    at org.red5.io.object.Serializer.serialize(Serializer.java:60)
    at org.red5.server.net.rtmp.codec.RTMPProtocolEncoder.encodeNotifyOrInvoke(RTMPProtocolEncoder.java:800)
    at org.red5.server.net.rtmp.codec.RTMPProtocolEncoder.encodeNotifyOrInvoke(RTMPProtocolEncoder.java:747)
    at org.red5.server.net.rtmp.codec.RTMPProtocolEncoder.encodeInvoke(RTMPProtocolEncoder.java:735)
    at org.red5.server.net.rtmp.codec.RTMPProtocolEncoder.encodeMessage(RTMPProtocolEncoder.java:514)
    at org.red5.server.net.rtmp.codec.RTMPProtocolEncoder.encodePacket(RTMPProtocolEncoder.java:147)
    at org.red5.server.net.rtmp.codec.RTMPProtocolEncoder.encode(RTMPProtocolEncoder.java:119)
    at org.red5.server.net.rtmp.codec.RTMPMinaProtocolEncoder.encode(RTMPMinaProtocolEncoder.java:48)
    at org.apache.mina.filter.codec.ProtocolCodecFilter.filterWrite(ProtocolCodecFilter.java:322)
    at org.apache.mina.core.filterchain.DefaultIoFilterChain.callPreviousFilterWrite(DefaultIoFilterChain.java:509)
    at org.apache.mina.core.filterchain.DefaultIoFilterChain.access$1400(DefaultIoFilterChain.java:46)
    at org.apache.mina.core.filterchain.DefaultIoFilterChain$EntryImpl$1.filterWrite(DefaultIoFilterChain.java:808)
    at org.apache.mina.core.filterchain.DefaultIoFilterChain$TailFilter.filterWrite(DefaultIoFilterChain.java:734)
    at org.apache.mina.core.filterchain.DefaultIoFilterChain.callPreviousFilterWrite(DefaultIoFilterChain.java:509)
    at org.apache.mina.core.filterchain.DefaultIoFilterChain.fireFilterWrite(DefaultIoFilterChain.java:501)
    at org.apache.mina.core.session.AbstractIoSession.write(AbstractIoSession.java:494)
    at org.apache.mina.core.session.AbstractIoSession.write(AbstractIoSession.java:439)
    at org.red5.server.net.rtmp.RTMPMinaConnection.write(RTMPMinaConnection.java:308)
    at org.red5.server.net.rtmp.Channel.write(Channel.java:136)
    at org.red5.server.net.rtmp.Channel.write(Channel.java:105)
    at org.red5.server.net.rtmp.RTMPHandler.onInvoke(RTMPHandler.java:428)
    at org.red5.server.net.rtmp.BaseRTMPHandler.messageReceived(BaseRTMPHandler.java:132)
    at org.red5.server.net.rtmp.RTMPMinaIoHandler.messageReceived(RTMPMinaIoHandler.java:164)
    at org.apache.mina.core.filterchain.DefaultIoFilterChain$TailFilter.messageReceived(DefaultIoFilterChain.java:716)
    at org.apache.mina.core.filterchain.DefaultIoFilterChain.callNextMessageReceived(DefaultIoFilterChain.java:434)
    at org.apache.mina.core.filterchain.DefaultIoFilterChain.access$1200(DefaultIoFilterChain.java:46)
    at org.apache.mina.core.filterchain.DefaultIoFilterChain$EntryImpl$1.messageReceived(DefaultIoFilterChain.java:796)
    at org.apache.mina.filter.codec.ProtocolCodecFilter$ProtocolDecoderOutputImpl.flush(ProtocolCodecFilter.java:427)
    at org.apache.mina.filter.codec.ProtocolCodecFilter.messageReceived(ProtocolCodecFilter.java:245)
    at org.apache.mina.core.filterchain.DefaultIoFilterChain.callNextMessageReceived(DefaultIoFilterChain.java:434)
    at org.apache.mina.core.filterchain.DefaultIoFilterChain.access$1200(DefaultIoFilterChain.java:46)
    at org.apache.mina.core.filterchain.DefaultIoFilterChain$EntryImpl$1.messageReceived(DefaultIoFilterChain.java:796)
    at org.apache.mina.core.filterchain.IoFilterEvent.fire(IoFilterEvent.java:75)
    at org.apache.mina.core.session.IoEvent.run(IoEvent.java:63)
    at org.apache.mina.filter.executor.OrderedThreadPoolExecutor$Worker.runTask(OrderedThreadPoolExecutor.java:780)
    at org.apache.mina.filter.executor.OrderedThreadPoolExecutor$Worker.runTasks(OrderedThreadPoolExecutor.java:772)
    at org.apache.mina.filter.executor.OrderedThreadPoolExecutor$Worker.run(OrderedThreadPoolExecutor.java:714)
    at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.UnsupportedOperationException
    at org.apache.openjpa.kernel.DetachedStateManager.isProvisional(DetachedStateManager.java:760)
    ... 55 more 
```

# google-apps-script - (Google Docs) Is it possible to protect certain cells from moving?

> ID：13835229
> 
> 赞同：3
> 
> 时间：2012-12-12T07:56:32.877
> 
> 标签：google-apps-script, google-docs

I own a handful of spreadsheets with dropdown menus. Sometimes people, who are responsible for filling these spreadsheets with data, accidentally move cell with dropdown menus from one column to adjacent column. This breaks the whole process of gathering data. Can I somehow protect certain cells from moving?

Spreadsheet example: [https://docs.google.com/spreadsheet/ccc?key=0AvHOD-oqzP4MdHNsSGxLaHVYZGNKUmVTaVNGS1lMVEE&pli=1#gid=0](https://docs.google.com/spreadsheet/ccc?key=0AvHOD-oqzP4MdHNsSGxLaHVYZGNKUmVTaVNGS1lMVEE&pli=1#gid=0)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:07:37.553

您可以编写一个事件来检查修改后的列并用其他电子表格中的原始下拉菜单替换，例如，

```
function onEdit(e) {
 if (e.range.getColumnIndex() == 1)
  e.range.setValues(SpreadsheetApp.getActiveSpreadsheet.getSheetByName('menu').getRange(e.range.getRowIndex(), e.range.getColumnIndex(), e.range.getNumRows(), e.range.getNumColumns() ).getValues());
} 
```

[https://developers.google.com/apps-script/understanding_events](https://developers.google.com/apps-script/understanding_events)

# backbone.js - 需要依赖项（加载以防止错误）

> ID：13835233
> 
> 赞同：0
> 
> 时间：2012-12-12T07:57:10.543
> 
> 标签：backbone.js, requirejs

我在我的应用程序和某些 android 设备上使用 require，并且在网络上时不时地出现错误，例如 jQuery 未定义或 Backbone 未定义]

我的索引页面很简单，并且有一个指向我的要求的链接

```
<script data-main="js/main" src="js/vendor/require/require.js"></script> 
```

在这里我设置所有路径和呼叫路由器以及关闭 JQM 的路由

```
require.config({

paths: {
    jquery:     'vendor/jqm/jquery_1.7_min',
    jqm:     'vendor/jqm/jquery.mobile-1.1.0', 
    underscore: 'vendor/underscore/underscore_amd',
    backbone:   'vendor/backbone/backbone_amd',
    text:       'vendor/require/text',
    templates:  '../templates',
    views:    '../views',
    models:       '../models'
}

});

define(['router','jqm-config'], function(app) {
}); 
```

然后在我的路由器页面上，我定义了那里需要的东西..

```
define(['jquery', 'underscore', 'backbone','views/home/home',
        'models/products/productCollection',
        'views/products/productTypes',   
        'jqm'], 
function($, _, Backbone,HomeView,ProductsType,ProductListView ) {

       var AppRouter = Backbone.Router.extend({
        //code here
        });

$(document).ready(function () {
    console.log('App Loaded');
    app = new AppRouter();
    Backbone.history.start();
    });

    return AppRouter;
}); 
```

我如何阻止这些错误的发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:05:51.457

在您的 require.config 中，您可以添加一个 shim 部分来定义这些依赖项：

```
require.config({
  // The shim config allows us to configure dependencies for
  // scripts that do not call define() to register a module
  shim : {
    'underscore' : {
      exports : '_'
    },
    'backbone' : {
      deps : [ 'underscore', 'jquery' ],
      exports : 'Backbone'
    },
    'dataTables' : {
      deps : [ 'jquery' ],
      exports : 'dataTables'
    }
  },
  paths : {
... 
```

# c# - The input is not a valid Base-64 string as it contains a non-base 64 character?

> ID：13835237
> 
> 赞同：0
> 
> 时间：2012-12-12T07:57:34.377
> 
> 标签：c#, base64

Here I am trying to decrpyt a string using private key and getting an error like:

> The input is not a valid Base-64 string as it contains a non-base 64 character, more than two padding characters, or a non-white space character among the padding characters.

The string(i.e string authenticationString) which i am trying to decrpyt is:

> Z7W7ja7G+NB3+QsbNnsz7zCkt1xeZ1PQC606wZzQG2McjExT6WjFPDWNpVSqcw1X+K6TERZUK4677m5Z6x9TuxLxyA8h8LmB4dwcJsQZGoVg0mOLsxO6GZmdThLyQOxQgnA7sk4KHLv6DrVswtVzjM/gJouvDKHTC7+NZmjhWwA=

and my code is:

```
 internal virtual Credentials Extract(string basicAuthenticationCredentials)
      {
         string authenticationString = RemoveBasicFromAuthenticationString(basicAuthenticationCredentials);
         string privateKeyPath = @"D:\Bala\MVC\RestService\RestClient\Scripts\PrivateKey.xml";
         myRsa.LoadPrivateFromXml(privateKeyPath);  // Loading the Private key
         RSACryptoServiceProvider localRsa = new RSACryptoServiceProvider();
         localRsa.FromXmlString(File.ReadAllText(privateKeyPath));
         byte[] decMessage = Convert.FromBase64String(authenticationString);
         byte[] message = null;
         // Calling the right decryption method according to the user selection
         message = myRsa.PrivateDecryption(decMessage);
         string au = Encoding.UTF8.GetString(message);
         return extractor.Extract(decoder.Decode(au));
      } 
```

and in string `au` I am geting a value like:

> d��!���u�I|�3��iaȴ{ȱ��q��A��z��ta �i8?�-�[�#�*&��Y^l,�v������ā�\�f�$R�V����&g;�</p>

and am getting this error for a particular username password only. Others are working fine. Any suggestion?

EDIT: The error is throwing in this line byte[] decodedStringInBytes = Convert.FromBase64String(encodedValue);

```
internal virtual string Decode(string encodedValue)
      {
         byte[] decodedStringInBytes = Convert.FromBase64String(encodedValue);
         return Encoding.ASCII.GetString(decodedStringInBytes);
      } 
```

EDIT 2:

```
internal class DecodedCredentialsExtractor
   {
      internal virtual Credentials Extract(string credentials)
      {
         if (!string.IsNullOrEmpty(credentials))
         {
            string[] credentialTokens = credentials.Split(':');
            //string securityToken = string.Empty;
            if (credentialTokens.Length == 2)
            {
               return new Credentials(credentialTokens[0], credentialTokens[1]);
            }
         }

         throw new ArgumentException("The supplied credential string is invalid, it should comply to [username:password]", "credentials");
      }
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T08:04:31.090

您获得值的事实`au`表明，错误不是问题中的 base-64 解码。我将假设实际上是最后一行失败，并且期望 base-64 - 而您使用的是 UTF-8（我怀疑是向后，这是无效的）。尝试：

```
 message = myRsa.PrivateDecryption(decMessage);
     string au = Convert.ToBase64String(message);
     return extractor.Extract(decoder.Decode(au)); 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-07-23T14:17:51.043

卸载 64 位 c++ 重新分发并安装 x84，你应该没有问题。祝你好运！

# google-app-engine - With threadsafe off, Appengine still routes more than one request to an instance

> ID：13835240
> 
> 赞同：1
> 
> 时间：2012-12-12T07:57:42.543
> 
> 标签：google-app-engine

The GAE doc says "By default, App Engine sends requests serially to a given web server. If you are using the Python 2.7 runtime, you can configure App Engine to send multiple, parallel requests by adding the threadsafe: true element to the header of app.yaml."

Now I set the 'threadsafe: false' in my app.yaml. But seems it doesn't work. I can still see two requests are routed into two handlers of my instance. I suppose with threadsafe off, only one request would be passed to my server at a time, no matter to which handler. Is that true? Is this a GAE bug or something I do wrong in my codes?

BTW: my codes locate at : [https://code.google.com/p/webrtc-samples/source/browse/trunk/apprtc/](https://code.google.com/p/webrtc-samples/source/browse/trunk/apprtc/)

# java - Adding a native libary to eclipse project which has further dependencies

> ID：13835248
> 
> 赞同：2
> 
> 时间：2012-12-12T07:58:08.397
> 
> 标签：java, eclipse, java.library.path

My goal is to add a native library to an eclipse project which has further dependencies on DLLs which are usually part of Windows OS or the MS Visual Studio redistributables (e.g., MSVCR110.dll and others...).

Putting my native library foo.dll in a Java-Project A source folder works for Project A alone (w/o any build-path adjustments).

But as soon as another Java-Project B references and uses project A, I get for Project B the error "UnsatisfiedLinkError: no foo.dll in java.library.path".

I get past this error by adding the location to foo.dll in the eclipse java build path of Project B --> tab "source --> edit "Native library location: ".

This however, results in the error "UnsatisfiedLinkError: Project A/foo.dll: Can't find dependent libraries" - which I guess are the above mentioned system-libraries, which are obviously not located in the folder of Project A, but in some system-folder...

Any solution to that?

# python-2.7 - 子进程中的 Python 用户输入

> ID：13835250
> 
> 赞同：3
> 
> 时间：2012-12-12T07:58:13.333
> 
> 标签：python-2.7, multiprocessing, user-input

我正在尝试创建一个可以通过 raw_input() 或 input() 获取输入的子进程，但是在要求输入时出现了线性错误*EOFError: EOF的结尾。*

我这样做是为了在 python 中试验多处理，我记得这很容易在 C 中工作。是否有一种解决方法，而不使用从主进程到子进程的管道或队列？我真的很想让孩子处理用户输入。

```
def child():
    print 'test' 
    message = raw_input() #this is where this process fails
    print message

def main():
    p =  Process(target = child)
    p.start()
    p.join()

if __name__ == '__main__':
    main() 
```

我写了一些测试代码，希望能显示我想要实现的目标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T09:11:25.757

我的答案取自这里：[有没有办法将“stdin”作为参数传递给 python 中的另一个进程？](https://stackoverflow.com/questions/8976962/is-there-any-way-to-pass-stdin-as-an-argument-to-another-process-in-python)

我修改了你的例子，它似乎工作：

```
from multiprocessing.process import Process
import sys
import os

def child(newstdin):
    sys.stdin = newstdin
    print 'test' 
    message = raw_input() #this is where this process doesn't fail anymore
    print message

def main():
    newstdin = os.fdopen(os.dup(sys.stdin.fileno()))
    p =  Process(target = child, args=(newstdin,))
    p.start()
    p.join()

if __name__ == '__main__':
    main() 
```

# openoffice-calc - 如何防止 OpenOffice/LibreOffice Calc 更改您输入的内容（数据、数字等）

> ID：13835264
> 
> 赞同：42
> 
> 时间：2012-12-12T07:59:12.937
> 
> 标签：openoffice-calc

基本上，我希望 LibreOffice Calc 做我告诉它的事情，而不是它想要的。

例如：

*   当我输入 1.1.12 时，我想在那个单元格中有 1.1.12，而不是 01.01.2012 或其他。
*   当我输入 001 时，我想在那个单元格中有 001，而不是 1
*   等等等等

在我明确告诉它之前，我希望它永远不会触碰我的数据。这有可能吗？

我知道我可以将单元格的格式设置为文本。它根本没有帮助。例子：

*   输入1.1.12，显示为01.01.12，格式为文本，变为“40909”，原来的输入丢失
*   将空单元格格式化为文本。粘贴“000 001 002 ...”，用换行符分隔。显示“0 1 2 ...”

我知道我可以在任何东西的前面写上 ' 来强制文本。再次它没有帮助，因为当我粘贴文本时，我不能自动附加到它。

我希望这是可能的。我尝试用谷歌搜索不同的问题，但从未找到一个好的答案。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-05T09:52:51.787

如果您希望您的输入被解释为文本并防止 Calc 对您的输入进行花哨（和烦人）的事情，您必须在输入任何值**之前更改格式。**

*   选择单元格/列/行。
*   右键单击“设置单元格格式...”
*   选择标签“数字”
*   在“类别”列表中，选择“文本”（最后一个选项）
*   选择格式“@”（这是该类别中唯一的一种）
*   点击“确定”

您可能还需要调整“自动更正”选项。转到“工具 > 自动更正选项...”。这是一个可能有帮助的链接：[https ://help.libreoffice.org/Calc/Deactivating_Automatic_Changes](https://help.libreoffice.org/Calc/Deactivating_Automatic_Changes)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-14T10:06:39.050

我了解您在粘贴纯无格式文本时遇到的问题。这可能比您喜欢的要多（我们可以稍后尝试自动化）但是当我从记事本粘贴数据时，会提示我导入屏幕，如下所示。选择列标题，然后选择列类型：文本。这应该可以解决您的粘贴/导入问题。另一种方法是使用 AutoHotKey 脚本来处理这个问题。![在此处输入图像描述](../Images/f9cbfceeb6cb8111edb88a563f6d7333.png)

哦，顺便说一句，@ 是文本的格式类型，就像你有 24 小时的 HH 或工作日的 ddd ...

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-06-14T22:14:37.943

导入时，您有很多选项。选择“引用字段作为文本”，这样引号内的任何文本都被视为`text`被 LibreOffice 解释为神圣的文本，并且他们不会像修改他们识别为的内容那样修改它`number`

[![在此处输入图像描述](../Images/fecf375ad29a5c9e4ab36faefb00b213.png)](https://i.stack.imgur.com/h2Otv.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-28T07:47:21.137

当您在剪贴板中有数据时，单击主菜单中的**编辑**->**粘贴为...。**在下一个窗口中选择“**粘贴为文本**”。您的所有数据都将按原样粘贴。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-19T02:49:59.653

我最初到达这个页面时遇到了一个非常相似（但不相同）的问题。我在这里发布解决方案是为了那些可能遇到相同问题的人的利益。

每次我在 OpenOffice 中保存、关闭然后重新打开我的 .XSLX 电子表格时，它都会删除我在文本之间输入的空格。例如：

*   “未参加”将变为“未参加”。
*   “John DOE”会变成“JohnDOE”等等。

不幸的是，将“文本”（@）指定为格式（如上所述）对我没有帮助。

最终解决它的方法*是*将其保存为 .ODS 文件而不是 .XSLX 。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-12T21:47:37.640

只需简单地将字符 ' 放在文本之前， '0.1.16 和 calc 会将其解释为文本数据

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-27T17:35:49.330

我的问题是货币，如果输入的数字可以代表一个日期，那么正确格式化会变成一个更大的数字；例如 4.22 变为 42,482 美元。我发现添加尾随零解决了这个问题。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-01-22T23:48:28.117

我从另一个站点粘贴了数字，它不断地提出日期。我只是乱七八糟地点击粘贴板上的箭头，让我可以选择未格式化的文本或 HTML 格式。我选择了未格式化，打开了一个窗口显示我想要的文本，所以我按下了确定

# python - 为什么 Python 没有原生的链表实现？

> ID：13835267
> 
> 赞同：13
> 
> 时间：2012-12-12T07:59:28.927
> 
> 标签：python, arrays, algorithm, linked-list

我尝试了一些快速实验，比较原生 Python 列表的性能与链表实现，例如[this](https://stackoverflow.com/questions/280243/python-linked-list)。

在不应该的情况下（根据理论），本机 Python 列表总是比非本机链表快。

```
from linkedlist import *
import time
a = LinkedList()
b = []
for i in range(1000000):
    b.append(i)
    a.add_first(i)
t0 = time.clock()
a.remove(10)
t1 = time.clock()
b.remove(10)
t2 = time.clock()
print t1-t0
print t2-t1 
```

我在上面的测试中得到的结果是：

*   本机链表 = 2.00000000001e-05

*   蟒蛇列表= 0.005576

*   非本地链表 = 3.90000000001e-05

所以，我想知道为什么 Python 没有原生的链表数据结构。在 Python 的情况下，在我看来，从算法上讲，使用链接列表而不是标准列表来加速标准库的某些方面可能很有用。

我的理解是，List 数据结构是该语言的关键构建块，它使代码更易于维护和优化，以专注于该数据结构。

还有其他原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-02-01T16:13:45.560

事实上，Python 没有本地链表实现，我也很想知道为什么。

您可能要考虑的一种替代方法是[`collections.deque`](https://docs.python.org/3/library/collections.html#collections.deque)(= "double-ended queue")，它在两端提供非常快速的恒定时间 O(1) 插入。实际上，对于您的具体示例，双端队列是比链表更好的选择，因为您不需要在中间插入。

但是，一般来说，重要的是要记住，双端队列是与​​链表不同的数据结构。链表还在中间提供恒定时间 O(1) 插入，而双端队列仅在中间提供线性时间 O(n) 插入。换句话说，在双端队列中间插入一个元素所花费的时间与双端队列的当前长度 n 成正比，对于足够大的 n，它会比使用链表慢。

# collections.deque 和真正的链表之间的比较

在内部，collections.deque 实际上是使用链表实现的。然而，这是一个实现细节，更重要的是，它被实现为*固定大小的元素块的*链表，而不是*单个元素*的链表。

这就是为什么在 collections.deque 中间插入是 O(n) 而不是 O(1)：您仍然需要修改整个双端队列大约一半的内存以容纳新元素 N：

```
before inserting N: [ABCDE]⇄[FGHIJ]⇄[KLM__]
after inserting N:  [ABCDE]⇄[FGNHI]⇄[JKLM_]
changed memory:                ^^^   ^^^^ 
```

相反，对于一个真正的链表（= 单个元素），在中间插入一个新元素 N 只需分配一个新节点并更新四个指针的值，这是一个性能与当前大小无关的操作链表：

```
before inserting N: [A]⇄[B]⇄[C]⇄[D]⇄[E]⇄[F]⇄[G]⇄    [H]⇄[I]⇄[J]⇄[K]⇄[L]⇄[M]
after inserting N:  [A]⇄[B]⇄[C]⇄[D]⇄[E]⇄[F]⇄[G]⇄[N]⇄[H]⇄[I]⇄[J]⇄[K]⇄[L]⇄[M]
changed memory:                                ^ ^ ^ 
```

权衡是双端队列具有更好的内存局部性并且需要更少的独立内存分配。例如，在上面的双端队列中插入新元素 N 根本不需要任何新的内存分配。这就是为什么在实践中，特别是如果你经常在末端而不是中间插入，双端队列实际上是比链表更好的选择。

请注意，虽然在双端队列中间插入元素是 O(n)，但在开头或结尾插入新元素是 O(1)：

```
before:                [ABCDE]⇄[FGNHI]⇄[JKLM_]

prepending P:  [____P]⇄[ABCDE]⇄[FGNHI]⇄[JKLM_]
                    ^ ^

prepending Q:  [___QP]⇄[ABCDE]⇄[FGNHI]⇄[JKLM_]
                   ^

appending R:   [___QP]⇄[ABCDE]⇄[FGNHI]⇄[JKLMR]
                                            ^

appending S:   [___QP]⇄[ABCDE]⇄[FGNHI]⇄[JKLMR]⇄[S____]
                                              ^ ^ 
```

# 注意事项

当然，对于链表插入实际上是 O(1)，这假设您已经有一个`h`指向要插入新节点之前或之后的节点的句柄`n`。在 LinkedList 的假设实现中，这可能如下所示：

```
n = linkedlist.insertbefore(h, "some value") 
```

在哪里：

```
type(h)     # => <class 'Node'>
type(n)     # => <class 'Node'>
n.value     # => "some value"
n.next == h # => True 
```

如果你没有这样的句柄，那么类似的函数`insert(i, x)`仍然是 O(n)，因为找到第 i 个元素是 O(n)，即使插入操作本身是 O(1)。以下是`insert(i, x)`我们假设的 LinkedList 的一些假设实现：

```
def insert(self, i, x):
    node = self.node_from_index(i)       # Find the i-th node: O(n)
    return self.insertbefore(node, x)    # Insert and return new node: O(1) 
```

这意味着当您确实保留这些节点句柄时，链表仅在某些问题上才值得。它还使 API 不太方便，尽管如果你小心的话，每个操作都是 O(1)，但常数通常要大得多。所以在实践中，它们并不是那么有用，这可能就是为什么它们不是 Python 中的内置链表。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2017-04-29T04:17:03.050

这只是因为构建列表需要大部分时间而不是附加方法。因此，当它不是您展示的线性时间操作时，（例如：n^2 操作）追加方法将比构建更重要，这将导致您想要看到的结果。

# canvas - Canvas 2d 每渲染一帧都会变慢

> ID：13835272
> 
> 赞同：0
> 
> 时间：2012-12-12T08:00:10.180
> 
> 标签：canvas, render

看例子：

1.  jsfiddle.net/Kky6J/5/
2.  jsfiddle.net/8t3Nq/2/

唯一的区别是在 window.render 函数中清除画布的方式：

1.  ctx.clearRect(0, 0, 宽度, 高度);
2.  图表宽度 = 图表宽度；

在谷歌浏览器“23.0.1271.97m”（和firefox 17.0.1）中，我在（1.）中的每一帧都出现了性能下降（红色条右侧的数字 - 以毫秒为单位绘制帧的时间）

我认为这是我的错误，因为在流行的手册中（1.）在示例中更快。(http://www.html5rocks.com/en/tutorials/canvas/performance/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:43:02.250

jsfiddle.net/Kky6J/21/

解决方案 - 在使用 ctx.rect(10, 10, 5, 20) 之前使用 ctx.beginPath()

# knockout.js - Knockout observables 中的多个 ViewModel

> ID：13835276
> 
> 赞同：1
> 
> 时间：2012-12-12T08:00:34.617
> 
> 标签：knockout.js

我在 Knockout.js 中遇到了多个 ViewModel 的问题。绑定有效，但是当出现应该显示用户可观察文本的消息框时，它总是写“未定义”。

有谁知道我的问题是什么？

```
<!-- ko template: { 'if': loginVM, data: loginVM } -->
    <h3>This is the login</h3>

    User <input type="value: user" type="text"><br/>
    Password <input type="value: password" type="text"><br/>
    <button data-bind="click: showDetails">Show Details</button>
<!-- /ko -->

<!-- ko template: { 'if': detailsVM, data: detailsVM } -->
    <h1>These are the details</h1>
    <button data-bind="click: showLogin">Show Login</button>
<!-- /ko -->

    var masterViewModel = {
        loginVM: ko.observable(),
        detailsVM: ko.observable()
    };

    var LoginVM = function () {
        this.user=ko.observable();
        this.password= ko.observable();
        this.showDetails = function () {
            alert(this.user());
            if(this.user() == "Gregor")
            {
                 masterViewModel.loginVM(null);
                 masterViewModel.detailsVM(new DetailsVM());
            }

        };
    };

    var DetailsVM = function () {
        this.showLogin = function () {
            masterViewModel.loginVM(new LoginVM());
            masterViewModel.detailsVM(null);
        };
    };

    masterViewModel.loginVM(new LoginVM()); 

    ko.applyBindings(masterViewModel);​ 
```

这里还有一个 js.fiddle：http: [//jsfiddle.net/4A87x/1/](http://jsfiddle.net/4A87x/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:05:36.237

您在绑定中有错字。应该：

```
User <input data-bind="value: user" type="text"><br/>
Password <input data-bind="value: password" type="text"><br/> 
```

工作小提琴：

[http://jsfiddle.net/4A87x/3/](http://jsfiddle.net/4A87x/3/)

# android - 让我的 Android Activity 看起来像一个 ViewPager

> ID：13835284
> 
> 赞同：0
> 
> 时间：2012-12-12T08:01:02.063
> 
> 标签：android

我在我的 Android 应用程序中使用 ViewPager。单击 ViewPager 中的某些页面时，将显示一些详细信息，我将其显示在 Activity 中。我希望活动看起来与我的 viewpager 相似，以便为我的应用程序提供一致的外观（在 pagerstrip 中使用活动名称）。有没有可能做到这一点。请帮忙。

# android - 更新后依赖项目中的R.java不完整

> ID：13835285
> 
> 赞同：1
> 
> 时间：2012-12-12T08:01:18.377
> 
> 标签：android, eclipse, r.java-file

我有一个使用库项目 A 的 android 项目 B。由于我使用 Android SDK 管理器（2012 年 12 月 12 日）安装了 API17 并在 Eclipse 中进行了检查更新，它下载了最新版本的 android 插件自动生成的 R.Java依赖项目 B 的文件不再包含项目 B 中定义的 id 的 R.xxx.identifiers。例如：在源中找不到添加到项目 B 的 R.layout：未定义的 ident 错误，R.id 在这些布局中定义找不到。我做了一个“清洁项目”并多次重新启动 Eclipse 都无济于事。有任何想法吗？

哪个插件自动生成 R.java 文件，有没有办法恢复到该工具的先前版本？

# apache-camel - 如何提取 Apache Camel URI 参数

> ID：13835288
> 
> 赞同：4
> 
> 时间：2012-12-12T08:01:23.337
> 
> 标签：apache-camel

有谁知道如何从骆驼URI中提取参数？我有这样定义的路线

```
from("SOME_URI")
.to("SOME_URI")
.to("bean:myBean?method=myMethod&myParameter1=val1&myParameter2=val2") 
```

我想像这样在“myMethod”中提取参数1和参数2（我在Grails中实现骆驼）

```
def myMethod(def inBody, Exchange exchange){
 String parameter1 = extractParameter('myParameter1')
 String parameter2 = extractParameter('myParameter2')

 ...//rest of code

 return something
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T21:08:23.427

## 主要答案

你可以从交易所中得到你想要的东西：

```
exchange.getFromEndpoint() 
```

将返回由“SOME_URI”定义的*端点，并且：*

```
exchange.getFromEndpoint().getEndpointUri() 
```

将返回“SOME_URI”的*字符串*值

这意味着您的代码可能变为：

```
def myMethod(def inBody, Exchange exchange){
    def uri = exchange?.fromEndpoint?.endpointUri

    if(uri) {
        String parameter1 = extractParameter(uri, 'myParameter1')
        String parameter2 = extractParameter(uri, 'myParameter2')

       //...rest of code
    }

    return something
}

/*
 * do any kind of processing you want here to manipulate the string
 * and return the parameter. This code should work just fine in grails
 */
def extractParameter(String uri, String parameterName) {
    def m = uri =~ "${parameterName}=([^&]+)"
    return m.find() ? m[0][1] : null
} 
```

如果首选 Java 等效项，则应该这样做：

```
private static String extractParameter(String uri, String parameterName) {
    Matcher m = Pattern.compile(parameterName + "=([^&]+)").matcher(uri);
    return m.find() ? m.group(1) : null
} 
```

* * *

## 选择

另请注意，根据您要完成的具体工作，更好的方法可能是使用*fromF* DSL 直接为您的路线提供参数。这样一来，您就可以在代码中使用这些参数，之后您就不必担心提取它们了。

下面的代码片段取自[FromF 的 Camel 文档](http://camel.apache.org/routes.html)。

```
fromF("file://%s?include=%s", path, pattern).toF("mock:%s", result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T13:32:48.173

如果我理解正确，您正在尝试将参数传递给将要调用的方法。执行此操作的常用方法是在`Exchange`对象流经路由时对其进行修改。

```
from("SOME_URI")
.to("SOME_URI")
.setHeader("myParameter1", constant("val1"))
.setHeader("myParameter2", constant("val2"))
.to("bean:myBean?method=myMethod") 
```

在您的方法中，您只需访问`Exchange`.

```
def myMethod(Exchange exchange) {
    String parameter1 = exchange.getHeader("myParameter1", String.class)
    String parameter2 = exchange.getHeader("myParameter2", String.class)
    //...rest of code
} 
```

或者，如果您想花哨并使用 Camel 的 bean 绑定，

```
def myMethod(Exchange exchange, 
        @Header("myParameter1") String parameter1,
        @Header("myParameter2") String parameter2) {
    //...rest of code
} 
```

如果这有帮助，请记得投票。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T08:26:00.413

val1 和 val2 是硬编码的值，还是应该是某种动态值，可能来自消息本身？

Camel bean 组件允许您定义绑定，并从消息中传入值或固定值。在以下位置查看更多详细信息：[http ://camel.apache.org/bean-binding.html](http://camel.apache.org/bean-binding.html)

您还需要查看方法签名中的参数数量，以及在 Camel bean 绑定 uri 中定义的参数数量。他们应该匹配。

# java - 刷新前修改实体

> ID：13835290
> 
> 赞同：4
> 
> 时间：2012-12-12T08:01:34.210
> 
> 标签：java, jpa, triggers, entitylisteners

是否可以在每次刷新到数据库之前更新某些列？我有`modifiedOn`和`modifiedBy`列，并希望在每次数据库更新时更新它们，类似于数据库触发器。JPA可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:16:42.210

**免责声明：**以下仅适用于 Hibernate / JPA。

您可以`modifiedOn`使用 JPA 像这样更新属性：

```
public class Entity {

     private Date modifiedOn;

     @PreUpdate 
     @PrePersist
     public void updateModified() {
         modifiedOn = new Date();
     }
} 
```

至于`modifiedBy`，它有点棘手，因为 JPA 规范不鼓励在生命周期回调方法中引用其他实体。此外，您需要了解当前用户，这可能属于服务层。

您可以使用`EntityListener`这样的（但是，这仍然使用回调方法）

```
@Entity
@EntityListeners({MyListener.class})
public class MyEntity {
    Date modifiedOn;
    User modifiedBy;
    ...
} 
```

EntityListener 中的一个：

```
public class MyListener {

    CurrentUserProvider provider; // Implement this and make sure it is set

    @PreUpdate
    @PrePersist
    public void updateModifier(MyEntity entity) {
         entity.setModifiedOn(new Date());
         entity.setModifiedBy(provider.getCurrentUser());
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-12T08:12:37.150

显然，JPA 在规范中定义了实体回调，例如@PrePersist、@PreUpdate。规范的简单修订会给你更多的细节

# jquery - 在 Google 地图中悬停标记时显示内容 Div

> ID：13835293
> 
> 赞同：1
> 
> 时间：2012-12-12T08:01:44.673
> 
> 标签：jquery, google-maps

我在我的谷歌地图上设置了标记，并且在该特定标记的悬停上我想显示一个窗口，其中包含与该特定地点相关的一些图像。

如果它们不能容纳在 div 空间中，我还需要对这些图像进行轮播效果..

我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:01:44.547

让我告诉你如何做到这一点-

请参阅 Infowindow 文档中的此示例-

[https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows](https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows)

该示例使用`click`标记上的事件来打开信息窗口

```
google.maps.event.addListener(marker, 'click', function() {
  infowindow.open(map,marker);
}); 
```

既然您想要 a `mouse over`，更改事件名称就足够了

```
google.maps.event.addListener(marker, 'mouseover', function() {
      infowindow.open(map,marker);
    }); 
```

要将图像放置在信息窗口中，请将信息窗口的内容设置为`<IMG> tag`-

```
content: '<IMG ID="imgHolder" BORDER="1" SRC="myimage.jpg"> 
```

# c# - ASP.net MVC 4 - 温莎城堡 - 找不到方法：'System.Web.Http.Services.DependencyResolver

> ID：13835298
> 
> 赞同：3
> 
> 时间：2012-12-12T08:02:12.067
> 
> 标签：c#, asp.net, asp.net-mvc-4, castle-windsor

我在带有 Castle Windsor 的 ASP.net MVC 4 RC 中收到以下错误。当我使用 WebApi (APIController) 时会发生这种情况。在我的本地机器（托管在 IIS 中）中也可以正常工作，但在托管环境中却不行。

找不到方法：'System.Web.Http.Services.DependencyResolver

我关注了以下关于温莎城堡整合的文章。 [http://blog.ploeh.dk/2012/10/03/DependencyInjectionInASPNETWebAPIWithCastleWindsor.aspx](http://blog.ploeh.dk/2012/10/03/DependencyInjectionInASPNETWebAPIWithCastleWindsor.aspx)

任何帮助是极大的赞赏。

**编辑 1**

当我部署默认的 asp.net mvc4 互联网应用程序时，我遇到了同样的错误。以下行会引发错误。这在构建机器和几乎所有其他机器上都可以正常工作，但在托管环境中却不行。

```
 config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T16:22:43.067

您的主机没有正确的软件包。

1.  卸载

2.  重新安装。

查看[移动到 Web API RC，获取：找不到方法：'System.Web.Http.Services.DependencyResolver System.Web.Http.HttpConfiguration.get_ServiceResolver()'](https://stackoverflow.com/questions/10994619/move-to-web-api-rc-get-method-not-found-system-web-http-services-dependencyr)

# scala - NullPointerException...无法找出原因

> ID：13835303
> 
> 赞同：0
> 
> 时间：2012-12-12T08:02:30.030
> 
> 标签：scala, nullpointerexception

我正在尝试使用类 A 中的对象为示例类中的变量“文件”为每个参与者分配不同的值。

```
 class A{

  var a1=new Array[example](2) 

  def starting()= {

    for(i <- 0 to 3){

      if(i==0){
        a1(i).file="L1.txt"; 
      }
      else if(i==1){
        a1(i).file="L2.txt";
      }

      a1(i).start

    }
  }
}

class example extends Actor {

  var file="default.txt"

  var Handle = new A

  def act()= {
    loop{
      var count=0
      react{
        //remaining code
    }
  }
 } 
```

这是抛出对应于行的空指针异常：

```
for(i <- 0 to 3){

          if(i==0){
            a1(i).file="L1.txt"; 
          } 
```

我是scala的初学者..我不知何故无法弄清楚这个异常的原因。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T08:08:39.623

`var a1=new Array[example](2)`创建具有 2 个空值的新数组，空值`a1(i)`也是如此。

利用`var a1 = IndexedSeq.fill(2){ new example }`

无关：

此类事情有[代码审查](https://codereview.stackexchange.com/)，但您的代码不是 scala 方式。尝试重写它。

例如：

```
scala> import actors.Actor._
import actors.Actor._

scala> val as = for ( fileName <- Seq("L1.txt", "L2.txt") )
     |   yield actor {
     |     var count = 0
     |     loop {
     |       receive {
     |         case t =>
     |           count += 1
     |           println(fileName + " " + count + " " + t)
     |       }
     |     }
     |   }
as: Seq[scala.actors.Actor] = List(scala.actors.Actor$$anon$1@ef82188, scala.actors.Actor$$anon$1@44616f65)

scala> as.foreach{ _ ! 's }
L2.txt 1 's
L1.txt 1 's 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T08:35:23.830

除了@senia 已经诊断的内容之外，您还分配了一个包含 2 个元素的数组，然后尝试遍历其中的 4 个元素：

```
for(i <- 0 to 3){ 
```

这肯定会产生`ArrayIndexOutOfBoundsException`一次`i`变成 2\. 循环条件应该是`for(i <- 0 to 1)`或`for(i <- 0 until 2)`为此工作。尽管确实有更好、更 Scala-ish 的方式来实现这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T08:06:01.993

可能找不到文件“L1.txt”！

阅读此 URL[阅读 Scala 中的整个文件？](https://stackoverflow.com/questions/1284423/read-entire-file-in-scala)

# python - 关于在 Amazon EMR 上使用 mrjob 运行 Mapreduce 程序的一些基本疑问

> ID：13835308
> 
> 赞同：0
> 
> 时间：2012-12-12T08:03:08.873
> 
> 标签：python, hadoop, mapreduce, elastic-map-reduce, mrjob

我是 mrjob 的新手，在 Amazon EMR 上运行作业时遇到问题。我将按顺序编写它们。

1.  我可以在本地机器上运行 mrjob。但是，当我在 /home/ankit/.mrjob.conf 和 /etc/mrjob.conf 中有 mrjob.conf 时，该作业不会在我的本地计算机上执行。这就是我得到的。[https://s3-ap-southeast-1.amazonaws.com/imagna.sample/local.txt](https://s3-ap-southeast-1.amazonaws.com/imagna.sample/local.txt)
2.  文档中“MR_CONF指定的位置”中的MRJOB_CONF是什么？
3.  'base_tmp_directory' 有什么用？另外，我是否需要在开始作业之前在 S3 中上传输入数据，或者它会在开始执行时从我的本地计算机加载？
4.  如果我使用一些库，如 numpy、scikit 等，我需要做一些引导吗？如果是，如何？
5.  这就是我在 EMR [https://s3-ap-southeast-1.amazonaws.com/imagna.sample/emr.txt上执行运行作业的命令时得到的](https://s3-ap-southeast-1.amazonaws.com/imagna.sample/emr.txt)

有什么解决办法吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T00:31:26.653

1.  您的 URL 无效（我收到“拒绝访问”错误）。
2.  `mrjob.conf`是一个配置文件。它可以位于多个位置，请参阅[http://pythonhosted.org/mrjob/configs-conf.html](http://pythonhosted.org/mrjob/configs-conf.html)
3.  您只需在命令行上指定输入文件的路径，就可以使用来自本地计算机的输入数据。MRJob 将为您将数据上传到 S3。如果您指定 s3://... URL，MRJob 将使用该 S3 路径中的数据。
4.  要使用非标准包，请参阅[http://pythonhosted.org/mrjob/writing-and-running.html#custom-python-packages](http://pythonhosted.org/mrjob/writing-and-running.html#custom-python-packages)
5.  您的 URL 无效（我收到“拒绝访问”错误）。

# c++ - OpenCV FREAK 返回太多异常值

> ID：13835309
> 
> 赞同：7
> 
> 时间：2012-12-12T08:03:12.067
> 
> 标签：c++, opencv, freak

我正在尝试最新版本的 OpenCV 中的全新描述符 FREAK，遵循**freak_demo.cpp** [示例](https://github.com/kikohs/freak/blob/master/demo/freak_demo.cpp)。我没有使用 SURF，而是使用 FAST。我的基本代码是这样的：

```
std::vector<KeyPoint> keypointsA, keypointsB;
Mat descriptorsA, descriptorsB;
std::vector<DMatch> matches;

FREAK extractor;
BruteForceMatcher<Hamming> matcher;

FAST(imgA,keypointsA,100);
FAST(imgB,keypointsB,20);

extractor.compute( imgA, keypointsA, descriptorsA );
extractor.compute( imgB, keypointsB, descriptorsB );

matcher.match(descriptorsA, descriptorsB, matches); 
```

*   该算法找到很多匹配项，但存在很多异常值。我做的事情对吗？有没有办法调整算法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-12T08:14:49.630

在进行**匹配**时，总会有一些细化步骤来消除异常值。

我通常做的是丢弃**距离超过阈值**的匹配，例如：

```
for (int i = 0; i < matches.size(); i++ )
{
    if(matches[i].distance > 200)
    {
        matches.erase(matches.begin()+i-1);
    }
} 
```

然后，我使用**RANSAC**来查看哪些匹配符合单应性模型。OpenCV 有一个功能：

```
for( int i = 0; i < matches.size(); i++ )
    {            
        trainMatches.push_back( cv::Point2f(keypointsB[ matches[i].trainIdx ].pt.x/500.0f, keypointsB[ matches[i].trainIdx ].pt.y/500.0f) );
        queryMatches.push_back( cv::Point2f(keypointsA[ matches[i].queryIdx ].pt.x/500.0f, keypointsA[ matches[i].queryIdx ].pt.y/500.0f) );
    }

Mat h = cv::findHomography(trainMatches,queryMatches,CV_RANSAC,0.005, status); 
```

我只是画了内线：

```
for(size_t i = 0; i < queryMatches.size(); i++) 
{
    if(status.at<char>(i) != 0) 
    {
        inliers.push_back(matches[i]);
    }
}

Mat imgMatch;
drawMatches(imgA, keypointsA, imgB, keypointsB, inliers, imgMatch); 
```

只需尝试不同的阈值和距离，直到获得所需的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T09:27:44.420

您还可以通过提供自己选择的对来训练描述符。并调整构造函数中的参数。

```
explicit FREAK( bool orientationNormalized = true
       , bool scaleNormalized = true
       , float patternScale = 22.0f
       , int nbOctave = 4
       , const vector<int>& selectedPairs = vector<int>()
     ); 
```

顺便说一句，更高效的 FREAK 版本即将推出 :-)

# algorithm - 如何标准化图像颜色？

> ID：13835311
> 
> 赞同：8
> 
> 时间：2012-12-12T08:03:17.417
> 
> 标签：algorithm, image-processing, machine-learning, face-detection, adaboost

在他们描述[Viola-Jones 对象检测](http://en.wikipedia.org/wiki/Viola%E2%80%93Jones_object_detection_framework)框架（Viola 和 Jones 的 Robust Real-Time Face Detection）的论文中，据说：

> 用于训练的所有示例子窗口都进行了方差归一化，以最大限度地减少不同照明条件的影响。

**我的问题是**“他们使用什么样的工具来标准化图像？”

我不是在寻找 Viola & Jones 使用的特定工具，而是在寻找产生几乎相同输出的类似工具。我一直在关注很多 haar 培训教程（试图检测手），但还不能输出一个好的检测器（xml）。

我已经尝试联系作者，但仍然没有回复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T08:41:57.367

一种可能的方法是应用简单而简单的归一化，假设所有元素均呈正态分布。

首先求平均值 (Mu) 和[标准差](http://en.wikipedia.org/wiki/Standard_deviation#Sample_standard_deviation)(S)：

```
Mu = 1/N * Sum(a[i][j]) for each i,j 
S  =  sqrt(1/(N-1) *  Sum((a[i][j] - Mu)^2)) for each i,j
       (in here N is the number of pixels, 20*20 in the viola jones case) 
```

由此，我们可以使用标准正态分布公式对每个像素的值进行归一化（通过对[所有值进行标准化](http://en.wikipedia.org/wiki/Normal_distribution#Standardizing_normal_random_variables)）：

```
a'[i][j] = (a[i][j] - Mu) / S 
```

* * *

另一种方法是[向量归一化](http://www.fundza.com/vectors/normalize/index.html)，它基本上说：

*   求向量的*长度*：`|a| = sqrt(sum (a[i][j]*a[i][j])) for each i,j`
*   分配：`a'[i][j] = a[i][j] / |a|`

# java - 使用 for 循环和 if 语句将字符串添加到 2D Arraylist

> ID：13835314
> 
> 赞同：2
> 
> 时间：2012-12-12T08:03:42.227
> 
> 标签：java, arraylist

遇到了一个小问题，我不完全确定为什么这段代码不起作用。

我有一个二维数组列表：

```
List<List<String>> matrix = new ArrayList<List<String>>(); 
```

我有一个按钮，可以根据用户输入将数组列表添加到矩阵中。但是在添加用户输入之前，我需要该按钮来搜索该字符串是否已经存在。我拥有的代码不会产生任何错误，但除了第一个元素之外，它不会区分现有字符串和不存在字符串。它添加了用户放入的所有内容，无论它是否存在。此外，仅当矩阵数组中已经包含一些元素时，代码才会起作用，如果矩阵为空，则代码根本不起作用。我究竟做错了什么？

```
 String name = NameTXT.getText(); 
   String amount = CountTXT.getText();

   for (int i = 0; i < matrix.size(); i ++){
     String search = matrix.get(i).get(0);
     if (name.equals(search)){
         OutputTXT.setText("Item already exists");
         break;
     } else {
         List<String> col = new ArrayList<String>();
         col.add(name);
         col.add(amount);
         matrix.add(col);
         OutputTXT.setText(amount +" "+ name +" added");
         break;
     }
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T08:07:55.020

休息; 意味着您完全停止了 for 循环。如果您只想转到矩阵中的下一项，可以使用 continue。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:11:20.273

嗯...如果我是你，我会尝试 foreach 语法而不是经典语法。我想这就是为什么当矩阵为空时您的代码不起作用的原因：您不能使用空的 arraylist 执行此操作：

```
matrix.get(i).get(0); 
```

此外，else 子句嵌入在 if 子句中，所以我不确定代码是如何编译的。

你应该尝试类似的东西：

```
for(List<String> elem : matrix){
     if(elem.get(0).equals(name)){
     // do stuff
     }
     else{ //do other stuff }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T08:34:40.133

为什么要遍历列表中的每个项目而不只是使用包含：

```
for(List<String> list : matrix){
 if(!list.contains(name){
   //add element to matrix
 }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T09:13:37.243

单独搜索项目和项目插入：

```
String name = NameTXT.getText(); 
String amount = CountTXT.getText();

// searching for product
boolean isNewItem = true;

for (int i = 0; i < matrix.size(); i++){
    String search = matrix.get(i).get(0);

    if (name.equals(search)){
        OutputTXT.setText("Item already exists");
        isNewItem = false;
        break;
    } 
}

// insert if new item 
if ( isNewItem ) {
    List<String> col = new ArrayList<String>();
    col.add(name);
    col.add(amount);
    matrix.add(col);
    OutputTXT.setText(amount +" "+ name +" added");
} 
```

实际上，最好以抽象的方式设计并使用语言工具来解决您的问题，例如，如果列表项列表：

```
class Item {
    private String name;
    private String amount;

    public Item(String name, String amount) {
        this.name = name;
        this.amount = amount;
    }

    public String getName() { 
        return this.name;
    }

    public String getAmount() {
        return this.amount;
    }

    @Override
    public boolean equals(Object other) {
        if ( other == this )
            return true;

        if ( other == null )
            return false;

        if ( other.getClass() != this.getClass() )
            return false;

        Item otherItem = (Item) other;
        return otherItem.getName().equals(this.name);
    }
} 
```

那么列表将是：

```
List<Item> items = new ArrayList<Item>(); 
```

当您需要搜索时：

```
Item item = new Item(NameTXT.getText(), CountTXT.getText());

if ( !items.contains(item) ) {
   items.add(item);
} 
```

# java - Java 程序不是从头开始的，尽管我试图告诉它

> ID：13835315
> 
> 赞同：1
> 
> 时间：2012-12-12T08:03:42.103
> 
> 标签：java, loops, while-loop

基本上，我正在尝试使用 main 方法创建一个测试类。根据用户输入，程序应该遵循一定的步骤顺序，然后在最后，我试图让程序再次从头开始（即，在程序开始时问第一个问题，而实际上不必退出程序并重新启动它）。

我过去做过类似的事情，我正在尝试以与以前相同的方式进行操作，但是由于某种原因这次它不起作用。

这是我正在尝试做的基本要点：

```
public class Payroll {
    public static void main(String[] args) {
        int steps = 0;

        while(steps == 0) {
        <Execute this code>
        steps = 1;
        }

        while(steps == 1) {
        <Execute this code>
        steps = 2;
        }

        while(steps == 2) {
        <Execute this code>
        steps = 0; //go back to the beginning
        }
    }
} 
```

问题是，当程序到达“steps = 0”的步骤时，它会完全退出，而不是像我预期的那样回到开头。

有人知道如何做我想做的事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:05:22.227

将三个 while 循环包含在另一个 while 循环中，从`while(steps == 0)`到 的右大括号之后`}`延伸`while(steps == 2)`。

`steps == 0`如果您希望`steps == 2`循环控制流程，则新的 while 循环可以具有条件。然后，您可以将步骤设置为 -1 以逃避封闭循环以及`steps == 2`循环。像这样：

```
while(steps == 0) {
    while(steps == 0) { /* ... */ }
    while(steps == 1) { /* ... */ }
    while(steps == 2) { /* ... */ } // this loop sets steps back to 0 to keep
                                    // looping, or it sets steps to -1 to quit
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T08:11:08.357

显然它不会从一开始就开始。您正在做的是在三个独立且独立的 while 循环中检查条件。如果其中三个失败，它应该退出。功能没有任何问题。正如@irrelephant 所说，您可以将三个while 循环包含在另一个while 循环中。
我建议在单个 while 循环中使用三个案例的开关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T08:16:18.283

您的代码与以下内容有何不同：

```
public static void main(String[] args) {
        <Execute step == 0 code>
        <Execute step == 1 code>
        <Execute step == 2 code>
} 
```

在这种情况下，基本上不是：

```
public static void main(String[] args) {
        boolean done = false;

        while(!(done)) {
            <Execute step == 0 code>
            <Execute step == 1 code>
            <Execute step == 2 code>

            if(some condition) {
                done = true;
            }
        }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T08:38:41.420

但是不建议使用嵌套循环。尝试递归。使用循环这就是我的做法。只要 step=0，代码就会不断重复。

```
public class Payroll {
    public static void main(String[] args) {
        int steps = 0;
        while (steps == 0) {

            while (steps == 0) {
                <Execute this code>
                steps = 1;

            }

            while (steps == 1) {
                <Execute this code>
                steps = 2;

            }

            while (steps == 2) {
                 <Execute this code>
                steps = 0; //go back to the beginning
            }
        }
    }
} 
```

# javascript - 为什么 google places 的 location 对象使用方法返回经度和纬度？

> ID：13835317
> 
> 赞同：1
> 
> 时间：2012-12-12T08:03:55.660
> 
> 标签：javascript, google-places-api

我正在制作一个使用 Google Places API 的应用程序。查询后，您得到一个`places`对象。`places.geometry.location`包含该地点的经度和纬度。您可以看到它们每个都存储在随机变量名称下，例如`$a`和`yY`。

访问这些值的官方方法是通过`location.lat()`和`location.lng()`。我很好奇他们为什么使用方法，而不是固定值。此外，他们是否使用随机变量名称来阻止人们直接访问它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T08:09:37.450

谷歌代码被[混淆](http://en.wikipedia.org/wiki/Obfuscation_%28software%29)/最小化，并使用短变量名，可以从一天到另一天。

所以这就是你使用方法来检索它们的值的原因。

# ios - [exportSession exportAsynchronouslyWithCompletionHandler: ^(void) {} 给出导出错误？

> ID：13835318
> 
> 赞同：1
> 
> 时间：2012-12-12T08:04:06.013
> 
> 标签：ios, avassetexportsession

我制作了一个示例应用程序，通过从相机胶卷中获取视频来修剪视频。编写代码如下：

```
-(IBAction)cutVideo
{
 NSString *path=[NSSearchPathForDirectoriesInDomains(NSDocumentationDirectory, NSUserDomainMask, YES) objectAtIndex:0];
 path=[path stringByAppendingPathComponent:@"new.mov"];
 [self splitVideo:path];
}

- (void)splitVideo:(NSString *)outputURL
{
 @try
 {
  NSURL *fileURL=[[NSURL alloc] init];
  fileURL=[NSURL fileURLWithPath:outputURL];
  fileURL=[NSURL URLWithString:outputURL];
//  NSString *videoBundleURL = [[NSBundle mainBundle] pathForResource:@"samp" ofType:@"mov"];
  AVAsset *asset = [[AVURLAsset alloc] initWithURL:fileURL options:nil];
  NSArray *compatiblePresets = [AVAssetExportSession exportPresetsCompatibleWithAsset:asset];

  if ([compatiblePresets containsObject:AVAssetExportPresetLowQuality])
  {
   [self trimVideo:outputURL assetObject:asset];
  }
//  videoBundleURL = nil;
  asset = nil;
  compatiblePresets = nil;
 }
 @catch (NSException * e)
 {
  NSLog(@"Exception Name:%@ Reason:%@",[e name],[e reason]);
 }
}

- (void)trimVideo:(NSString *)outputURL assetObject:(AVAsset *)asset
{
 @try
 {
  AVAssetExportSession *exportSession = [[AVAssetExportSession alloc]initWithAsset:asset presetName:AVAssetExportPresetLowQuality];
  exportSession.outputURL = [NSURL fileURLWithPath:outputURL];
  exportSession.outputFileType = AVFileTypeQuickTimeMovie;

  CMTime start = CMTimeMakeWithSeconds(startTime, 1);
  CMTime duration = CMTimeMakeWithSeconds((endTime - startTime), 1);
  CMTimeRange range = CMTimeRangeMake(start, duration);

  exportSession.timeRange = range;
  exportSession.outputFileType = AVFileTypeQuickTimeMovie;

  if ([[NSFileManager defaultManager] fileExistsAtPath:outputURL])
  {
   [[NSFileManager defaultManager] removeItemAtPath:outputURL error:nil];
  }

  [exportSession exportAsynchronouslyWithCompletionHandler: ^(void) {
   NSLog(@"Export Status %d %@", exportSession.status, [exportSession.error description]);
  }];

  exportSession = nil;
 }
 @catch (NSException * e)
 {
  NSLog(@"Exception Name:%@ Reason:%@",[e name],[e reason]);
 }
} 
```

一切正常，但导出文件中出现错误..错误如下

```
2012-12-12 13:27:27.896 RecordVideo[1472:907] Export Status 4 Error 
Domain=NSURLErrorDomain Code=-1 "unknown error" UserInfo=0x1e577ad0 
{NSErrorFailingURLStringKey=/var/mobile/Applications/A38CC8B9-A8CB-4A65-8308-
24A9BEB27626/Library/Documentation/new.mov, 
NSErrorFailingURLKey=/var/mobile/Applications/A38CC8B9-A8CB-4A65-8308-
24A9BEB27626/Library/Documentation/new.mov, NSLocalizedDescription=unknown error, 
NSUnderlyingError=0x1e537da0 "The operation couldn’t be completed. (OSStatus error 
 -12935.)", NSURL=/var/mobile/Applications/A38CC8B9-A8CB-4A65-8308-
24A9BEB27626/Library/Documentation/new.mov} 
```

任何帮助将不胜感激，谢谢

# java - IllegalStateException 的原因：提交响应后无法转发

> ID：13835324
> 
> 赞同：0
> 
> 时间：2012-12-12T08:04:46.603
> 
> 标签：java, jsp, servlets

> **可能重复：**
> [java.lang.IllegalStateException：提交响应后无法转发](https://stackoverflow.com/questions/2123514/java-lang-illegalstateexception-cannot-forward-after-response-has-been-committe)

这种错误的通常原因是什么：

```
com.mycompany.myapp.servlet.TxnDetailsServlet doRequest
ERROR: View failed
java.lang.IllegalStateException: Cannot forward after response has been committed
 at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:312)
 at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)
 at com.mycompany.myapp.servlet.TxnDetailsServlet.doRequest(TxnDetailsServlet.java:82)
 at com.mycompany.myapp.servlet.TxnDetailsServlet.doGet(TxnDetailsServlet.java:131) 
```

servlet 处理请求（即设置属性）然后调用：

```
 private void doRequest(HttpServletRequest request) throws IOException, ServletException     {
        // Code omitted
        getServletContext().getRequestDispatcher("/Some.jsp").forward(this.request, this.response);
        // Code omitted
    }
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        super.doGet(request, response);
        doRequest(request);
    }

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        super.doPost(request, response);
        doRequest(request);
    } 
```

servlet 不做任何响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:08:31.323

如果您转发到另一个 servlet/jsp，请不要写入响应输出流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:21:42.057

添加到其他人所说的，响应不需要一次转移到客户端（浏览器）。相反，每当您调用 response.flushBuffer 时，它都可以在多个镜头中传输到客户端。一旦响应开始向客户端传输数据，您就不能做任何改变响应状态的事情（setStatus、forward 等）

# wpf - 无法从对象投射到 Treeviewitem

> ID：13835326
> 
> 赞同：0
> 
> 时间：2012-12-12T08:04:49.810
> 
> 标签：wpf, treeview, populate, treeviewitem

我试图从一个对象投射到一个 TreeviewItem 并得到下一个错误：

```
"unable to cast object of type 'system.string' to type 'system.windows.controls.treeviewitem'." 
```

两天来，我正在寻找解决方案，我看到了许多显式转换为 treeviewitem 的示例，所以我认为它是合法的，但它不起作用。

```
foreach (Req ObjReq in reqFilter.NewList())
 {
    index = PM_TreeView.Items.Add(ObjReq.Name);
    TreeViewItem ParentNode = new TreeViewItem();

    //this is the Cast I try to do 
    ParentNode = (TreeViewItem)PM_TreeView.Items[index];

    ParentNode.Tag = ObjReq.ID;
    reqFilter["RQ_FATHER_ID"] = (ObjReq.ID.ToString());
    reqFilter.KeepHierarchical = true;
    if (reqFilter.NewList().Count > 0)
        FillReqTreeView(reqFilter, ObjReq);
  } 
```

主要思想是将 reqFilter 中的 List 填充到 Treeview 中。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-12T08:23:51.247

该消息说您正在尝试将 STRING 强制转换为 TreeViewItem。

代码中的第三行

```
index = PM_TreeView.Items.Add(ObjReq.Name); 
```

将 STRING 添加到 Items 集合，但第七个尝试将相同的字符串强制转换为 TreeViewItem

```
ParentNode = (TreeViewItem)PM_TreeView.Items[index]; 
```

而不是添加一个字符串，添加一个新的 TreeViewItem 与您想要的 Header 值

# css - 半透明的 IE 解决方法

> ID：13835327
> 
> 赞同：0
> 
> 时间：2012-12-12T08:04:56.877
> 
> 标签：css

为了在 IE9 之前的版本中显示以下 CSS，应该采取什么解决方法：

```
background-color: hsla(182, 44%,76%,.5); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T08:28:20.093

对于透明元素，您有更多方法。

对于 IE ->

```
filter: alpha(opacity=40);  
filter: progid:DXImageTransform.Microsoft.Alpha(opacity=40);  
/* above line works in IE6, IE7, and IE8 */  
-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(opacity=40)";  
/* above line is IE8 only */ 
```

对于所有浏览器：

```
opacity: .7; 
```

但它们对所有元素都是透明的，如果您只需要透明任何颜色，例如背景，您必须使用 2 个函数`rgba` 或`hsla`它们的示例：

支持：（Firefox 3+、Opera 10.1+、Chrome 2+、Safari 3.1+）

```
#rgba {  
    background: rgba(98, 135, 167, .4);  
} 
```

但是 IE9 只支持所有版本的 IE 并且所有浏览器都支持 css3

```
#hsla {  
    background: hsla(207, 38%, 47%, .4);  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T08:18:02.020

您可以使用 Microsoft 专有的“过滤器”之一来执行此操作：

```
background:transparent;
filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#7FA7DBDD,endColorstr=#7FA7DBDD); 
zoom: 1; 
```

十六进制值按 ARGB 顺序排列。因此，将您的颜色转换为 RGB 十六进制值，（`#A7DBDD`在这种情况下）并将不透明度放在前面（0.5 是 7F 十六进制），如下所示：`#7FA7DBDD`

当然，这最好在 IE 特定样式表中完成，可能使用条件注释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T08:08:36.487

使用具有纯色的单独 dom 元素并设置不透明度......它会工作得很好:)

.bg { 背景：#000; 过滤器：阿尔法（不透明度= 50）；不透明度：0.5；}

# solr - Apache Solr 指数基准测试

> ID：13835334
> 
> 赞同：1
> 
> 时间：2012-12-12T08:05:24.647
> 
> 标签：solr

我最近开始使用 Apache Solr，目前正试图找出对 XML 文档语料库的索引进行基准测试的最佳方法。我基本上对磁盘上的吞吐量（索引的文档/秒）和索引大小感兴趣。

我在 Ubuntu 上做这一切。

基准技术

***** 运行以下 5 次并获得平均总时间*******

 ***   索引文件 [ `curl http://localhost:8983/solr/core/dataimport?command=full-import`]
    *   当状态为“空闲”时，从 XML 响应中获取“所用时间”名称属性 [curl http://localhost:8983/solr/core/dataimport]
    *   获取“数据/索引”目录的大小
*   删除索引 [ `curl http://localhost:8983/solr/core/update --data '<delete><query>*:*</query></delete>' -H 'Content-type:text/xml; charset=utf-8'`]
*   提交 [ `curl http://localhost:8983/solr/w5/update --data '<commit/>' -H 'Content-type:text/xml; charset=utf-8'`]
*   重新索引文档

问题

1.  我打算通过将索引的文档数除以平均总时间来计算我的吞吐量；这样好吗？
2.  是否有可用的工具（例如用于查询基准测试的 SolrMeter）或标准脚本可以用来实现我的目标？我不想重新发明轮子...
3.  我的方法好吗？
4.  与在 data/index/ 目录上执行“du”相比，是否有更简单的方法来获取索引大小？
5.  在哪里可以找到有关如何解释 XML 响应属性的信息（请参阅下面的示例输出）。例如，我想知道`QTime`和`Time taken`值之间的区别。

***** 用于获取吞吐量的 XML 响应*******

 **```
<?xml version="1.0" encoding="UTF-8"?>
<response>
<lst name="responseHeader">
  <int name="status">0</int>
    <int name="QTime">0</int>
  </lst>
  <lst name="initArgs">
    <lst name="defaults">
      <str name="config">w5-data-config.xml</str>
    </lst>
  </lst>
  <str name="status">idle</str>
  <str name="importResponse"/>
  <lst name="statusMessages">
    <str name="Total Requests made to DataSource">0</str>
    <str name="Total Rows Fetched">3200</str>
    <str name="Total Documents Skipped">0</str>
    <str name="Full Dump Started">2012-12-11 14:06:19</str>
    <str name="">Indexing completed. Added/Updated: 1600 documents. Deleted 0 documents.</str>
    <str name="Total Documents Processed">1600</str>
    <str name="Time taken">0:0:10.233</str>
  </lst>
  <str name="WARNING">This response format is experimental.  It is likely to change in the future.</str>
</response> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:52:42.313

问题1：

我建议您应该尝试索引超过 1 个 XML（具有不同的数据集）文件并比较给定的结果。这样您就可以知道是否可以简单地将花费的时间除以您的文档数量。

对于问题 2：

我没有找到任何这些工具，我自己开发了一个简短的 Java 应用程序

对于问题 3：

你的意思是哪种方法？我会链接到我对问题1的回答...

对于问题 4：

索引文件夹的大小为您提供了整个索引的正确大小，您为什么不想使用它？

对于问题 5：

您在发布的 XML 中获得的结果通过 XSL 文件传输。您可以在 /bin/solr/conf/xslt 文件夹中找到它。您可以查看这些术语的确切含义，并且可以编写自己的 XSL 来显示结果和信息。注意：如果创建新的 XSL 文件，则必须更改 solrconfig.xml 中的设置。如果您不想进行任何更改，请编辑现有文件。

编辑：我认为不同之处在于，Qtime 是所用时间值的四舍五入值。Qtime中只有偶数。

最好的祝福****

# wordpress - 如何获取当前帖子页面上的其他帖子

> ID：13835335
> 
> 赞同：0
> 
> 时间：2012-12-12T08:05:24.507
> 
> 标签：wordpress, post, custom-post-type, sidebar

我有称为服务的自定义帖子类型，它具有名为服务类别的分类法。

假设我添加了一个名为 A 的分类法，其中有帖子 x,y,z 。单个 CPT 页面必须有一个侧边栏，显示该类别中的其他帖子。

例如：如果我们在帖子 X 页面上，侧边栏需要显示 Y,Z 的内容。如果我们是 Post Y 页面，侧边栏需要显示 X 和 Z 等内容。

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:13:48.153

您需要使用`wp_reset_query()`- 所以在您的侧边栏中：

```
query_posts('your_query_here');

if(have_posts()) : while(have_posts()) : the_post();

  // Your code

endwhile; endif;

wp_reset_query(); 
```

该函数重置页面的查询。查看[wp_reset_query() 法典页面](http://codex.wordpress.org/Function_Reference/wp_reset_query)了解更多信息。

# java - 使用 Spring 表单标签时在 HTML 中添加数据属性

> ID：13835338
> 
> 赞同：1
> 
> 时间：2012-12-12T08:05:38.973
> 
> 标签：java, html, spring, jakarta-ee

如何将数据属性添加到 Spring 表单标签？

IDE 抱怨：**Attribute data-attribute invalid for tag textarea 根据 TLD**
这是我正在使用的命名空间：xmlns:form="http://www.springframework.org/tags/form"

# ruby-on-rails-3 - Rails + Unicorn 问题 - DalliError：无法解组值：未定义的类/模块

> ID：13835339
> 
> 赞同：2
> 
> 时间：2012-12-12T08:05:39.887
> 
> 标签：ruby-on-rails-3, heroku, shopify, unicorn, dalli

我有一个 Rails 3.1 应用程序，它利用 Shopify API gem 通过 ActiveResource 获取一些外部数据。我们通过 Dalli 将这些 ActiveRecord 模型对象存储在 Memcached 中，然后在需要时再次读取。

我们可以在运行 Thin webserver 时成功读取这些数据，并且一切正常。但是，一旦我将 Unicorn 设置为网络服务器，从 Memcached 读取模型对象时，我会继续收到以下错误：

```
Cache read: shopcache_987102
DalliError: Unable to unmarshal value: undefined class/module ShopifyAPI::Order::ClientDetails
Completed 500 Internal Server Error in 395ms 
```

这不会在每次阅读时都发生，但经常会成为一个大问题。只有当我们产生超过 1 个 Unicorn 工作进程时才会发生这种情况。

下面是我的 unicorn.rb 文件：

```
worker_processes 3
timeout 30
preload_app true

after_fork do |server, worker|
  #Re-connect to ActiveRecord
  if defined?(ActiveRecord::Base)
    ActiveRecord::Base.establish_connection
    Rails.logger.info('Connected to ActiveRecord')
  end
end 
```

我们还激活了以下功能：

```
config.cache_classes = true 
```

如果我只生成一个 Unicorn worker_process (worker_processes 1)，那么一切正常。我试过设置 config.threadsafe！在 application.rb 中，这对多个工人没有帮助。

似乎不需要所需的类/模块，我不知道为什么。

编辑：我还在我的 applicaton.rb 文件中添加了以下内容，以尝试将 gem 添加到 rails 的自动加载路径，但没有成功：

```
# Custom directories with classes and modules you want to be autoloadable.
# config.autoload_paths += %W(#{config.root}/extras)
config.autoload_paths += %W(#{config.root}/lib)
config.autoload_paths += Dir["#{config.root}/lib/**/"] 
```

我还像这样添加到 application_controller.rb require_dependency 'shopify_api' ：

```
require 'current_shop_detail'

class ApplicationController < ActionController::Base
  protect_from_forgery
  include CurrentShopDetail
  require_dependency 'shopify_api'

end 
```

但我不确定这是否是执行 require_dependency 的正确方法，因为缺少的类是：ShopifyAPI::Order::ClientDetails

有任何想法吗？谢谢 ：）

# jquery - 无法将可排序属性应用于我页面中的小部件

> ID：13835340
> 
> 赞同：0
> 
> 时间：2012-12-12T08:05:42.893
> 
> 标签：jquery, jquery-ui-sortable

我在运行我的页面时收到以下错误

```
$(".column").sortable is not a function 
```

以下是我用来调用可排序函数的代码。

```
function makeSortable() {
    var $sortableItems = $('> li', settings.columns);

    $('.column').sortable({
        items: $sortableItems,
        connectWith: $(settings.columns),
        handle: settings.handleSelector,
        placeholder: 'widget-placeholder',
        forcePlaceholderSize: true,
        revert: 300,
        delay: 100,
        opacity: 0.8,
        containment: 'document',
        start: function (e, ui) {
            $(ui.helper).addClass('dragging');
        },
        stop: function (e, ui) {
            $(ui.item).css({ width: '' }).removeClass('dragging');
            $(settings.columns).sortable('enable');
        }
    });
    $sortableItems.find(settings.handleSelector).css({
        cursor: 'move'
    }).mousedown(function (e) {
        $sortableItems.css({ width: '' });
        $(this).parent().css({
            width: $(this).parent().width() + 'px'
        });
    }).mouseup(function () {
        if (!$(this).parent().hasClass('dragging')) {
            $(this).parent().css({
                width: $(".widget-placeholder").width() + 'px'
            });
        } else {
            $(settings.columns).sortable('disable');
        }
    });
} 
```

我在我的 ASPX 页面中包含以下内容：

```
<script src="../../Scripts/Management/jquery-1.8.2.js" type="text/javascript"></script>
<script src="../../Scripts/Management/jquery-ui.min.js" type="text/javascript"></script>
<script src="../../Scripts/Management/Widgets.js" type="text/javascript"></script>
<link href="../../Scripts/Management/jquery-ui.css" rel="stylesheet" type="text/css" /> 
```

我仍然收到错误消息。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:09:01.973

这也发生在我身上，我发现由于某些原因

```
 $('.column').sortable({
        items: $sortableItems,
        connectWith: $(settings.columns),
        handle: settings.handleSelector,
        placeholder: 'widget-placeholder',
        forcePlaceholderSize: true,
        revert: 300,..... 
```

});

不能正常工作。所以我所做的是创建了一个如下所示的新函数并在其中定义了所有关联

```
function makeSortable() {
    $('.column').sortable();
    $(".column").sortable("option", "connectWith", ".column");
    $(".column").sortable("option", "handle", ".moveHeader");
} 
```

当您的控件准备就绪并且一切顺利时调用此函数。

# android - Android：如何将 budle 属性调用到文本视图

> ID：13835341
> 
> 赞同：-1
> 
> 时间：2012-12-12T08:05:48.470
> 
> 标签：android

嗨，我有以下捆绑参数

```
final Bundle parameters = new Bundle();

        parameters.putString("link", Url);
        parameters.putString("properties", "{"+city+": {\"text\":\"Reply / Recommend\",  \"href\": \""+url+"\"}}");
        parameters.putString("caption", "");
        parameters.putString("name", ""); 
```

我如何将这些参数转换为文本视图，任何建议表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:38:42.720

textView.setText(parameters.getString("link")); 是我需要的

# jsf-2 - 通过 JavaScript 函数刷新对话框内的内容

> ID：13835350
> 
> 赞同：0
> 
> 时间：2012-12-12T08:06:15.670
> 
> 标签：jsf-2, primefaces, jqplot

在处理 primefaces 图表时，我遇到了一个问题。

**问题**

当我点击一个折线图时，应该会出现一个包含另一个折线图的对话框。

示例代码

```
<p:lineChart id="chartOne" rendered="cond1"/>

<p:dialog widgetVar="dialogOne">
     <p:lineChart id="chartTwo" rendered="cond1"/>
</p:dialog>

<script>
   $('#chartOne').bind('jqplotClick',
        function (ev, seriesIndex, pointIndex, data) {
            dialogOne.show();
        }
   );
</script> 
```

现在我可以在图表点击时显示对话，但对话中的图表不刷新。我不太了解通过 JavaScript 函数刷新内容。

**更新1：**

条件是：**chartOne**应该在其整个画布上提供点击（不仅是数据点或系列）。**仅当dialogOne.show** **()**发生时才应呈现chartTwo 。

任何帮助......非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:00:01.287

使用动态对话框可能是一种解决方案。

从文档中：

> 动态模式允许对话框在显示之前而不是在页面加载时获取其内容，这有助于减少初始页面加载时间。默认为假。

只需像这样定义您的对话框：

```
<p:dialog widgetVar="dialogOne" dynamic="true"> 
```

* * *

**更新：**

要从 Javascript 刷新对话框，您可以使用`p:remoteCommand`. 例子：

```
<h:form id="formId">
    <p:dialog id="dialog" />
</h:form>
<p:remoteCommand name="updateDialog" update=":formId:dialog"/> 
```

**第二次更新：**

使用来自 Javascript的`p:remoteCommand`调用。`updateDialog()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:08:22.650

尝试这个：

```
<p:lineChart id="chartOne" rendered="cond1" >
    <p:ajax event="itemSelect" listener="#{bean.action}" update="chartTwo" oncomplete="dialogOne.show()" />
</p:lineChart>

<p:dialog widgetVar="dialogOne">
     <p:lineChart id="chartTwo" rendered="cond1"/>
</p:dialog> 
```

在您的支持 bean 的方法`action()`上，您应该为 chartTwo 准备好数据。

根据用户手册，图表的可点击部分将是系列，而不是整个图表。查看

[http://www.primefaces.org/showcase-labs/ui/interactiveCharts.jsf](http://www.primefaces.org/showcase-labs/ui/interactiveCharts.jsf)

了解更多信息和工作示例。

# java - 用 Java 读取更新时的 SQL 时间戳

> ID：13835351
> 
> 赞同：0
> 
> 时间：2012-12-12T08:06:16.777
> 
> 标签：java, sql, client, timestamp, database-server

我现在正在编写一个客户端服务器应用程序，当客户端向服务器发送命令时，SQL 数据库中的记录被更新，并且在更新时在字段上设置了时间戳。但现在我想用时间戳读取 SQL 数据库中过去一小时内在线的所有用户。

所以这就是我的距离：

```
SELECT username FROM users WHERE lastonline... 
```

lastonline 是带有用户上次更新时间戳的字段。我现在不知道如何检查他在过去一小时内是否在线。

我感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:14:46.017

选择用户名 FROM user WHERE lastoinline>"date now - 1 hour" AND lastoinline<="date now"

```
Date dеNow = new Date();
Date веBefore = tdNow; tdBefore.setHours(tdBefore.getHours()-1);
String query = "SELECT username FROM user WHERE lastonline>='"+(dtBefore.getTime/1000)+"' AND lastonline<='"+(dtNow.getTime/1000)+"' 
```

"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:08:53.800

将当前小时与时间戳记录中的小时进行比较。

如果您使用的是 sql 服务器：

`SELECT DATEPART(hh, GETDATE())`--当前时间

`SELECT DATEOART(hh, ColumnStoredInDB)`--存储小时

**剧透：**只需从当前小时获取 ColumnStoredInDB，如果差异小于 1，则该用户在过去一小时内一直在系统中。如果差异 >=1，您可以跳过该记录

# grails - 如何为 submitToRemote 的 value 属性添加样式？

> ID：13835353
> 
> 赞同：0
> 
> 时间：2012-12-12T08:06:25.847
> 
> 标签：grails, twitter-bootstrap, gsp

在我的应用程序中，我使用 twitter bootstrap 为按钮等添加漂亮​​的图标。使用普通按钮和链接，我可以通过这样做来实现这一点。

```
<g:remoteLink .. code omitted .. class="btn">
    <i class="icon icon-warning-sign"></i> <g:message code="default.button.add.label"/>
</g:remoteLink> 
```

这会产生一个漂亮的按钮，在文本前面有一个图标..

现在我想使用 submitToRemote：

```
<g:submitToRemote .. code omitted .. value="${message(code: 'default.button.add.label')}" class="btn"/> 
```

但我似乎未能添加

```
<i class="icon icon-warning-sign"></i> 
```

价值..关于如何实现这一目标的任何提示或技巧？

我尝试了几种方法，例如将这种样式放在类属性中，但这也失败了。

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:33:15.937

`submitToRemote`生成一个`<input type="sbumit" ... />`标签（[源代码](https://github.com/grails/grails-core/blob/master/grails-plugin-gsp/src/main/groovy/org/codehaus/groovy/grails/plugins/web/taglib/JavascriptTagLib.groovy#L378)），它不容易适合您希望做的事情（`value`预计是一个纯字符串，而不是标记）。

一种替代方法可能是使用`formRemote`而不是`submitToRemote`，以及`<button>`包含您的图标标记的 a ：

```
<g:formRemote action="..." update="...">
   ...
   <button type="submit" ...><i class="icon icon-warning-sign"></i> Text...</button>
</g:formRemote> 
```

# knockout.js - 从外部修改 knockout.js 模型

> ID：13835354
> 
> 赞同：1
> 
> 时间：2012-12-12T08:06:32.403
> 
> 标签：knockout.js

我有一个简单的模型来保存我的文件夹：

```
var FolderModel = {
    folders: ko.observableArray([
        {id:'Global', uid: 'Global', name: 'Global', count:0}, 
        {id:'New', uid: 'New', name: 'New', count:0}, 
        {id:'Important', uid: 'Important', name: 'Important', count:0} 
    ]); 
```

该模型绑定到：

```
<ul class="folder-tree" data-bind="foreach: FolderModel.folders">
    <li>
        <span data-bind="text: $data.name"></span>
        <span class="count" data-bind="text: $data.count"></span>
    </li>
</ul> 
```

所以初始视图将是这样的：

*   全球 (0)
*   新 (0)
*   重要 (0)

然后我在另一个脚本中做一些请求轮询：等待计数改变和更新模型。然而，我所做的一切都没有奏效。我试过了：

```
var match = ko.utils.arrayFirst(FolderModel.folders(), function (item) {
    return c == item.uid;
});

if (match) {
    match.count = counts[c];
} 
```

c - 这是文件夹的 uid。所以，我使用arrayFirst，获取可观察数组中的项目并更新它。

我尝试的下一件事：

```
 $.each(FolderModel.folders(), function (index, folder) {
        var newFolder = FolderModel.folders()[index];
        newFolder.count = counts[folder.uid];
        FolderModel.folders.replace(FolderModel.folders()[index], newFolder);
    }); 
```

这也让我无处可去，而且看起来也很傻，但我在另一个 SO 问题上发现了这个[如何在 knockoutjs 中替换给定的索引元素](https://stackoverflow.com/questions/6425409/how-to-replace-a-given-index-element-in-knockoutjs)

我做错了什么，在 knockout.js 中没有得到什么？我在想，当可观察数组元素被修改时，如果它被数据绑定到某些东西，那么某些东西也会被修改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T08:19:03.703

ko.observableArray**仅跟踪是否从集合中添加或删除项目。**但是，如果您更改可观察数组中的项目，则 UI 不会自动更新。

[从文档中：](http://knockoutjs.com/documentation/observableArrays.html)

> 关键点：一个 observableArray 跟踪数组中有哪些对象，而不是那些对象的状态

所以你需要使集合`count`内的属性`folders`可观察

```
var FolderModel = {
    folders: ko.observableArray([
        {id:'Global', uid: 'Global', name: 'Global', count: ko.observable(0) }, 
        {id:'New', uid: 'New', name: 'New', count: ko.observable(0) }, 
        {id:'Important', uid: 'Important', name: 'Important', count: ko.observable(0) } 
    ]); 
```

最终，如果您需要更新所有属性，则必须使所有属性都可观察。有一个名为[KO 映射](http://knockoutjs.com/documentation/plugins-mapping.html)的 KO 插件可以帮助您。

您的更新代码应如下所示：

```
var match = ko.utils.arrayFirst(FolderModel.folders(), function (item) {
    return c == item.uid;
});

if (match) {
    match.count(counts[c]); // because count is now observable
} 
```

这是一个[JSFiddle](http://jsfiddle.net/zwM5M/)，您可以在其中使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T08:19:41.137

如果我对您的理解正确 - 您无法更新 a 中元素的属性`ko.observableArray`并触发对数组的更新。你需要这样做：

```
folders: ko.observableArray([
    { id: ko.observable('Global'), uid: ko.observable('Global'), name: ko.observable('Global'), count: ko.observable(0)}
]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T08:20:56.993

您只需要一个文件夹作为 Knockout 的视图模型来捕获更改或使用`observableArray`方法来更改数组：

```
var Folder = function (id, uid, name, count) {
    // things that don't change don't need observables
    this.id = ko.observable(id);
    this.uid = ko.observable(uid);
    this.name = ko.observable(name);
    this.count = ko.observable(count);
};

var FolderModel = {
    folders: ko.observableArray([
        {id:'Global', uid: 'Global', name: 'Global', count:0}, 
        {id:'New', uid: 'New', name: 'New', count:0}, 
        {id:'Important', uid: 'Important', name: 'Important', count:0} 
    ])
};

var FolderModelNew = {
    folders: ko.observableArray([
        new Folder('Global', 'Global', 'Global', 0),
        new Folder('New', 'New', 'New', 0),
        new Folder('Important', 'Important', 'Important', 0)
    ])
};

var vm = {
    folderModel: FolderModel,
    folderModelNew: FolderModelNew
};

ko.applyBindings(vm);

vm.folderModel.folders()[1].name = '111'; // nothing
vm.folderModel.folders.splice(0, 1, {id:'Global', uid: 'Global', name: '000', count:0}); // updated
vm.folderModelNew.folders()[1].name('111'); // updated
​ 
```

小提琴：http: [//jsfiddle.net/Sgc5J/](http://jsfiddle.net/Sgc5J/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T08:13:02.793

如果您想从另一个脚本中获取更改事件，我认为您最好[在淘汰赛中使用订阅者](http://knockoutjs.com/documentation/observables.html)

# delphi-xe2 - Delphi 表单不会显示 - 怀疑加载停止

> ID：13835355
> 
> 赞同：0
> 
> 时间：2012-12-12T08:06:42.693
> 
> 标签：delphi-xe2, vcl

我的 Delphi 项目 (MyProject) 遇到问题。在没有我参与的情况下（一如既往）出现的问题基本上归结为未显示的表格。我检查了 .dpr 文件，它看起来像这样：

```
// Removed code above for brevity
begin
  Application.Initialize;
  Application.MainFormOnTaskbar := True;
  Application.CreateForm(TfrmMain, frmMain);
  Application.Run;
end. 
```

我检查了.dfm，表单对我来说看起来不错（我之前从未意识到表单的可见性默认设置是假的，所以我认为就是这样 - 只是发现设置为真可见并没有解决我的问题问题）。

换句话说，我已经检查了我所知道的所有相关设置。所以我创建了一个新的、新鲜的项目（NewProject）。新项目的事件日志如下所示：

```
Thread Start: Thread ID: 6460\. Process NewProject.exe (1776)
Process Start: C:\code\NewProject.exe. Base Address: $00400000\. Process NewProject.exe (1776)
Module Load: NewProject.exe. Has Debug Info. Base Address: $00400000\. Process NewProject.exe (1776)
Module Load: ntdll.dll. No Debug Info. Base Address: $778A0000\. Process NewProject.exe (1776)
Module Load: KERNEL32.dll. No Debug Info. Base Address: $76470000\. Process NewProject.exe (1776)
Module Load: KERNELBASE.dll. No Debug Info. Base Address: $765C0000\. Process NewProject.exe (1776)
Module Load: OLEAUT32.dll. No Debug Info. Base Address: $76830000\. Process NewProject.exe (1776)
Module Load: ole32.dll. No Debug Info. Base Address: $752C0000\. Process NewProject.exe (1776)
Module Load: msvcrt.dll. No Debug Info. Base Address: $76E70000\. Process NewProject.exe (1776)
Module Load: GDI32.dll. No Debug Info. Base Address: $76DE0000\. Process NewProject.exe (1776)
Module Load: USER32.dll. No Debug Info. Base Address: $76730000\. Process NewProject.exe (1776)
Module Load: ADVAPI32.dll. No Debug Info. Base Address: $768C0000\. Process NewProject.exe (1776)
Module Load: SECHOST.dll. No Debug Info. Base Address: $752A0000\. Process NewProject.exe (1776)
Module Load: RPCRT4.dll. No Debug Info. Base Address: $754F0000\. Process NewProject.exe (1776)
Module Load: SspiCli.dll. No Debug Info. Base Address: $74F80000\. Process NewProject.exe (1776)
Module Load: CRYPTBASE.dll. No Debug Info. Base Address: $74F70000\. Process NewProject.exe (1776)
Module Load: LPK.dll. No Debug Info. Base Address: $77870000\. Process NewProject.exe (1776)
Module Load: USP10.dll. No Debug Info. Base Address: $76BE0000\. Process NewProject.exe (1776)
Module Load: MSIMG32.dll. No Debug Info. Base Address: $74320000\. Process NewProject.exe (1776)
Module Load: VERSION.dll. No Debug Info. Base Address: $74310000\. Process NewProject.exe (1776)
Module Load: COMCTL32.dll. No Debug Info. Base Address: $74170000\. Process NewProject.exe (1776)
Module Load: SHLWAPI.dll. No Debug Info. Base Address: $76D00000\. Process NewProject.exe (1776)
Module Load: SHELL32.dll. No Debug Info. Base Address: $75740000\. Process NewProject.exe (1776)
Module Load: WINSPOOL.DRV. No Debug Info. Base Address: $74110000\. Process NewProject.exe (1776)
Module Load: IMM32.dll. No Debug Info. Base Address: $76960000\. Process NewProject.exe (1776)
Module Load: MSCTF.dll. No Debug Info. Base Address: $75420000\. Process NewProject.exe (1776)
Module Load: UxTheme.dll. No Debug Info. Base Address: $74040000\. Process NewProject.exe (1776)
Module Load: dwmapi.dll. No Debug Info. Base Address: $706E0000\. Process NewProject.exe (1776)
Module Load: WTSAPI32.dll. No Debug Info. Base Address: $740F0000\. Process NewProject.exe (1776)
Module Load: WINSTA.dll. No Debug Info. Base Address: $740C0000\. Process NewProject.exe (1776)
Thread Start: Thread ID: 6928\. Process NewProject.exe (1776)
Thread Start: Thread ID: 484\. Process NewProject.exe (1776)
Module Load: BtMmHook.dll. No Debug Info. Base Address: $10000000\. Process NewProject.exe (1776)
Module Load: PSAPI.DLL. No Debug Info. Base Address: $755E0000\. Process NewProject.exe (1776)
Module Load: ole32.dll. No Debug Info. Base Address: $04150000\. Process NewProject.exe (1776)
Module Unload: ole32.dll. Process NewProject.exe (1776)
Module Load: ole32.dll. No Debug Info. Base Address: $04150000\. Process NewProject.exe (1776)
Module Unload: ole32.dll. Process NewProject.exe (1776)
Module Load: CLBCatQ.DLL. No Debug Info. Base Address: $76F20000\. Process NewProject.exe (1776) 
```

而行为不端的项目输出以下事件日志：

```
Thread Start: Thread ID: 6880\. Process MyProject.exe (7296)
Process Start: C:\code\MyProject\MyProject.exe. Base Address: $00400000\. Process MyProject.exe (7296)
Module Load: MyProject.exe. Has Debug Info. Base Address: $00400000\. Process MyProject.exe (7296)
Module Load: ntdll.dll. No Debug Info. Base Address: $778A0000\. Process MyProject.exe (7296)
Module Load: KERNEL32.dll. No Debug Info. Base Address: $76470000\. Process MyProject.exe (7296)
Module Load: KERNELBASE.dll. No Debug Info. Base Address: $765C0000\. Process MyProject.exe (7296)
Module Load: OLEAUT32.dll. No Debug Info. Base Address: $76830000\. Process MyProject.exe (7296)
Module Load: ole32.dll. No Debug Info. Base Address: $752C0000\. Process MyProject.exe (7296)
Module Load: msvcrt.dll. No Debug Info. Base Address: $76E70000\. Process MyProject.exe (7296)
Module Load: GDI32.dll. No Debug Info. Base Address: $76DE0000\. Process MyProject.exe (7296)
Module Load: USER32.dll. No Debug Info. Base Address: $76730000\. Process MyProject.exe (7296)
Module Load: ADVAPI32.dll. No Debug Info. Base Address: $768C0000\. Process MyProject.exe (7296)
Module Load: SECHOST.dll. No Debug Info. Base Address: $752A0000\. Process MyProject.exe (7296)
Module Load: RPCRT4.dll. No Debug Info. Base Address: $754F0000\. Process MyProject.exe (7296)
Module Load: SspiCli.dll. No Debug Info. Base Address: $74F80000\. Process MyProject.exe (7296)
Module Load: CRYPTBASE.dll. No Debug Info. Base Address: $74F70000\. Process MyProject.exe (7296)
Module Load: LPK.dll. No Debug Info. Base Address: $77870000\. Process MyProject.exe (7296)
Module Load: USP10.dll. No Debug Info. Base Address: $76BE0000\. Process MyProject.exe (7296)
Module Load: MSIMG32.dll. No Debug Info. Base Address: $74320000\. Process MyProject.exe (7296)
Module Load: VERSION.dll. No Debug Info. Base Address: $74310000\. Process MyProject.exe (7296)
Module Load: SHFOLDER.dll. No Debug Info. Base Address: $70A10000\. Process MyProject.exe (7296)
Module Load: SHELL32.dll. No Debug Info. Base Address: $75740000\. Process MyProject.exe (7296)
Module Load: SHLWAPI.dll. No Debug Info. Base Address: $76D00000\. Process MyProject.exe (7296)
Module Load: COMCTL32.dll. No Debug Info. Base Address: $74170000\. Process MyProject.exe (7296)
Module Load: WININET.dll. No Debug Info. Base Address: $75180000\. Process MyProject.exe (7296)
Module Load: Normaliz.dll. No Debug Info. Base Address: $76CF0000\. Process MyProject.exe (7296)
Module Load: iertutil.dll. No Debug Info. Base Address: $769C0000\. Process MyProject.exe (7296)
Module Load: urlmon.dll. No Debug Info. Base Address: $76610000\. Process MyProject.exe (7296)
Module Load: COMDLG32.dll. No Debug Info. Base Address: $76D60000\. Process MyProject.exe (7296)
Module Load: WINSPOOL.DRV. No Debug Info. Base Address: $74110000\. Process MyProject.exe (7296)
Module Load: IMM32.dll. No Debug Info. Base Address: $76960000\. Process MyProject.exe (7296)
Module Load: MSCTF.dll. No Debug Info. Base Address: $75420000\. Process MyProject.exe (7296)
Module Load: UxTheme.dll. No Debug Info. Base Address: $74040000\. Process MyProject.exe (7296)
Module Load: dwmapi.dll. No Debug Info. Base Address: $706E0000\. Process MyProject.exe (7296)
Module Load: WTSAPI32.dll. No Debug Info. Base Address: $740F0000\. Process MyProject.exe (7296)
Module Load: WINSTA.dll. No Debug Info. Base Address: $740C0000\. Process MyProject.exe (7296)
Thread Start: Thread ID: 7888\. Process MyProject.exe (7296)
Thread Start: Thread ID: 6236\. Process MyProject.exe (7296)
Module Load: BtMmHook.dll. No Debug Info. Base Address: $10000000\. Process MyProject.exe (7296)
Module Load: PSAPI.DLL. No Debug Info. Base Address: $755E0000\. Process MyProject.exe (7296) 
```

我意识到这两个事件日志看起来不一样是有充分理由的，因此这可能充其量是朝着正确方向发展的一点。具体来说，失败的项目 (MyProject) 包含更多库，这会导致加载更多 DLL。

不过，有一件事让我想到：失败的项目在加载 PSAPI.DLL 后停止加载，而工作项目在显示表单之前所做的最后一件事是加载 CLBCatQ.DLL。

这对任何人都意味着什么？我还能做些什么来进一步挖掘问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:09:21.747

经典的 PEBKAC。主表单构造函数有问题，因此没有显示表单。

带回家的信息：不要把一个简单的问题变成一个复杂的问题。

# c# - c#\Generic\在函数体内的变量上使用泛型

> ID：13835356
> 
> 赞同：0
> 
> 时间：2012-12-12T08:06:44.017
> 
> 标签：c#, variables, generics

是否可以在函数体内使用通用机制？

例如

```
if (!(someClass is IClass<T, G> where T : someInterface, G : anotherInterface))
{
    return;
 } 
```

或像这样进行铸造：

```
var v = (IClass <T, G> where T : someInterface, G: anotherInterface)something; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:09:50.370

对于第一个示例，是的 - 您只需要指定类型：

```
if (!(someClass is IClass<ISomeInterface, IAnotherInterface>))
{
    return;
 } 
```

另一个大同小异：

```
var v = (IClass <ISomeInterface, IAnotherInterface>)something; 
```

虽然它可能更好用`as`

```
var v = something as IClass <ISomeInterface, IAnotherInterface>;
if(v != null)
{
    // Do something.
} 
```

上面的第二行很重要 - 通过使用`as`代替直接强制转换，`InvalidCastException`如果失败，您将不会得到，但`v`如果使用强制转换失败，则会为空`as`。如果您的施法尝试无效，此技术可让您更好地控制失败。（考虑一下*为什么*转换会无效：如果这代表一种情况，您知道更久知道世界是什么样子，那么`InvalidCastException`这可能是正确的方法。如果对象*不是*接口的实例是合理的，那么`as`您的朋友。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T08:36:18.377

你可以这样做，但你必须确保你的界面是*协变*的：

```
interface IClass<out T, out S>
{
    // Methods that can return a T or S but not accept one as input
} 
```

通过将类型参数标记为`out`，您基本上是在说“我只会*从*这个接口中得到 a`T`或 a ”。例如，因为您只能从中取出 a，但仅仅是因为您可以将 a放入列表中并取出一个。`S` *`IEnumerable<out T>``T``List<T>``T`*

 *已经这样定义了你的接口， an`IClass<string, string>` *是*an `IClass<object, object>`：你知道你`IClass<string, string>`只会给你 a `string`，但是既然 a`string`是 an`object`那么那很好，如果你将它分配给 an`IClass<object, object>`你知道它只会给你一个`object`.

（如果您的接口允许您将 a或 an*放入某物，则您**不能*这样做。如果是这种情况，并且您将您分配给 an ，您可以尝试将 an放入其中，但它会失败，因为基础类只真正接受 a 。）`T``S` *`IClass<string, string>``IClass<object, object>``int``string`*

 *这让你做的是

```
if (!(something is IClass<object, object>))
{
    return;
} 
```

或者

```
var v = (IClass<object, object>)something; 
```

`something`如果实际上*是*一个实现的对象，例如，两者都将起作用`IClass<string, string>`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T08:12:08.490

你可以试试这个：

```
if (!(someClass is IClass<someInterface, anotherInterface>)
{
    return;
} 
```

或通过反射：

```
var t = someClass.GetType()
Type[] typeParameters = t.GetGenericArguments();
if (!typeParameters[0].IsSubclassOf(typeof(someInterface)) || 
    !typeParameters[1].IsSubclassOf(typeof(anotherInterface)))
{
    return;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T08:14:55.720

`where`约束将应用于泛型方法本身。您可以毫无问题地使用所需的类型。

附带说明：不要检查*false*，从长远来看会更加混乱。

```
if (someClass is IClass<someInterface, anotherInterface>)
{
    // your code
}
// else { return; } // no longer needed! 
```

在一个通用方法中扩展和封装代码，它看起来像这样：

```
void myMethod<T, U>()
    where T : someInterface
    where U : anotherInterface
{
    if (someClass is IClass<T, U>)
    {
        // your code
    }
    // else { return; } // no longer needed!
} 
```**

# qml - 如何在qml中将透明图像背景颜色设置为主题颜色

> ID：13835358
> 
> 赞同：1
> 
> 时间：2012-12-12T08:06:55.850
> 
> 标签：qml, qt-quick

是否可以在 QML 中为透明图像设置背景颜色，以便图像将主题颜色作为背景颜色。

谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T08:24:51.517

将透明物品放在`Image`有色物品（如`Rectangle`）上。

您只需要设置大于的`z`属性。`Image``Rectangle`

# maven - 如何将工件安装到本地 gradle 文件存储中

> ID：13835359
> 
> 赞同：5
> 
> 时间：2012-12-12T08:07:06.223
> 
> 标签：maven, gradle

谁能告诉我如何将工件/项目安装到本地 gradle 文件存储中？

```
gradle install 
```

将其安装到本地 maven 存储库，但我需要将其放入

```
~/.gradle/caches/artifacts-15/filestore 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T08:29:43.500

这是一个纯粹的缓存，你不能安装到它里面（按设计）。如果可以的话，可重复性会受到影响（在一台机器上构建工作，但在另一台机器上不行）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-07T11:30:04.440

如果您将其安装到本地 maven 存储库并在 gradle 构建文件中引用该存储库，您将解决您的问题。

看

[有没有办法安装 jar 本地 gradle 存储库，就像它在 mave (maven install:install-file](https://stackoverflow.com/questions/14460253/is-there-a-way-to-install-jar-local-gradle-repository-as-it-in-mave-maven-inst)

编辑：您甚至不必将 jar 安装到您的 maven 存储库中：

[https://stackoverflow.com/a/13531958/260122](https://stackoverflow.com/a/13531958/260122)

# mongoose - Mongoosejs：将 query.or() 与地理空间查询一起使用

> ID：13835360
> 
> 赞同：0
> 
> 时间：2012-12-12T08:07:08.783
> 
> 标签：mongoose, geospatial, mongodb-query

我有一个查询应该执行以下操作：获取两组坐标并返回任何坐标附近的位置。

我正在使用 Mongoose.js 开发 Node.js。

原始查询代码如下（在我尝试使用`query.or()`语法之前：

```
query.or([{geoNear: "loc", near: start, spherical: true},{geoNear: "loc", near: end}]); 
```

问题似乎正在使用，`$or`因为我最初尝试将代码设置为：

```
 that.count({
                _cat: _cat ,
                $or: [
                    {
                        loc: { $nearSphere: start }
                    },
                    {
                        loc: { $nearSphere: end }
                    }
                ]}, function(err, c) {
                    // do something
                }); 
```

当我使用没有`$or`（即`start`或`end`）的位置进行搜索时，我能够获得结果。这就是我确定问题出在`$or`.

**mongoDB/mongoose 是否支持使用`$or`地理空间搜索，还是我做错了什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:01:15.163

似乎这`$or`不起作用，所以我现在选择运行 2 个查询，然后评估每个查询的结果以返回计数。它对我有用，因为我不需要实际计数，但我需要知道在每个点的一定距离内是否有任何可用位置。

如果有人遇到类似问题，并使用此方法作为解决方法，请记住将第二个查询嵌套在第一个查询的回调中。当您要查询的位置超过 2 个时，这显然会更成问题。

# jquery - 使用点击修改渲染页面

> ID：13835363
> 
> 赞同：0
> 
> 时间：2012-12-12T08:07:17.917
> 
> 标签：jquery, confluence

我在 Confluence 中遇到了某个 jquery 的问题。我有这个代码：

```
## @param pmname:title=Name(select)|required=true|type=string

<script> 
AJS.toInit(function() {

$(".sectionMacroWithBorder").not(":contains('$parampmname')").addClass("hidden");

});

</script> 
```

效果很好 - 隐藏所有不包含给定文本的部分。但是，当我尝试创建一个按钮以在单击时激活相同的代码

```
 ## @param pmname:title=Name(select)|required=true|type=string

 <script>
 AJS.toInit(function() {

 $('.wiki-content').append('<button id="addnew" type="button">$parampmname</button> ');

 $('addnew').on('click', 'button', function() {

 $(".sectionMacroWithBorder").not(":contains('$parampmname')").addClass("hidden");
  }); 

 });

 </script> 
```

jquery 可以在页面底部创建按钮，但是单击与第一个示例中给出的相同变量没有任何反应。我也尝试`.addnew`过`#addnew``.on .`

这是一个类似按钮的小提琴（感谢 Mark Schultheiss！）：http: [//jsfiddle.net/Cecfu/1/](http://jsfiddle.net/Cecfu/1/)

我做错了什么还是 Confluence jquery 的特殊性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:31:08.620

尝试 #addnew 作为点击监听器

```
AJS.toInit(function() {

$('.wiki-content').append('<button id="addnew" type="button">$parampmname</button> ');

$('#addnew').on('click', 'button', function() {

$(".sectionMacroWithBorder").not(":contains('$parampmname')").addClass("hidden");
 }); 

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:29:44.920

这个 ：

```
$('addnew').on('click', 'button', function() { ... 
```

应该 ：

```
$('#addnew').on('click', function() { .... 
```

因为`button`有`id="addnew"`和不是的孩子`#addnew`

或者，如果您愿意，您最终可以这样做：

```
$('.wiki-content').on('click', '#addnew', function() { ... 
```

...将`click`事件委托给当前或将来的子元素`id="addnew"`

# android - 当 Activity 显示为 Dialog 时，Web View 不会显示从 SD 卡加载的本地图像。

> ID：13835371
> 
> 赞同：2
> 
> 时间：2012-12-12T08:07:44.210
> 
> 标签：android, android-webview

我是 Android 新手，在我的项目中，每当用户单击预览按钮时，我都需要在 Web 视图中显示图像预览。我使用该方法也达到了同样的效果`loadDataWithBaseURL()`，但现在我需要将该 Activity 显示为 Dialog，它无法显示图像。我也覆盖了该`onResume()`方法，但我无法显示图像。

提前致谢

# javascript - 在backbone.js 中使用setTimeout 时的范围问题

> ID：13835383
> 
> 赞同：0
> 
> 时间：2012-12-12T08:08:49.797
> 
> 标签：javascript, backbone.js, closures

我试图在一段时间后（从视图中调用）切换我的 Backbone 集合（“帖子”）中的状态变量，并尝试使用 setTimeout。但是，我认为我搞砸了我的范围，因为我的切换功能不起作用（它被调用，但它没有正确改变）。

如果我使用

```
setTimeout(this.model.collection.toggleReadyToPreloadNewPost, 1000); 
```

，代码不起作用，而如果我使用

```
this.model.collection.toggleReadyToPreloadNewPost(); 
```

它正确切换它。我想知道我该如何解决这个问题？

骨干视图

```
//ensures namespace is not already taken yet
wedding.views = wedding.views || {};

//each PostView corresponds to a single post container 
//which contains the user name, user comment, and a photo
wedding.views.PostView = Backbone.View.extend({

  tagName: "li",
  template: "#item-template",
  className: "hideInitially post",

  initialize: function() {
    _.bindAll(this);
    this.template = _.template($(this.template).html());
  },

  render: function() {
    this.preload();
    return this;
  },

  //preloads an image and only after it is done, then append
  preload: function() {
    var image = new Image(); 
    image.src = this.model.get("src");
    this.model.incrementTimesSeen();

    //hides the element initially, waits for it to finish preloading, then slides it down
    //updates lastSeen only after the image is displayed
    image.onload = $.proxy(function() {
      var html = this.template( {model: this.model.toJSON()} );

      this.model.setLastSeen();

      //shows the image by sliding down; once done, remove the hideInitially class
      this.$el.hide().append(html).slideDown();
      this.$el.removeClass("hideInitially");

      setTimeout(this.model.collection.toggleReadyToPreloadNewPost, 1000);
    }, this);
  }

}); 
```

骨干集合

```
//check if namespace is already occupied
wedding.collections = wedding.collections || {}; 

wedding.collections.Posts = Backbone.Collection.extend({
  model: wedding.models.Post,

  initialize: function() {
    this.readyToPreloadNewPost = 1;
  },

  //toggles "readyToPreloadNewPost" between 1 and 0 
  toggleReadyToPreloadNewPost: function() {

    this.readyToPreloadNewPost = this.readyToPreloadNewPost ? 0 : 1;
  }    
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T08:35:46.333

当你这样做时：

```
setTimeout(this.model.collection.toggleReadyToPreloadNewPost, 1000); 
```

您只是在处理`setTimeout`普通的未绑定`toggleReadyToPreloadNewPost`函数，`setTimeout`并将其作为简单函数调用。结果是调用函数时`this`会在`window`里面。`toggleReadyToPreloadNewPost``setTimeout`

您可以`this`通过将方法调用包装在匿名函数中来获得正确的权利：

```
var _this = this;
setTimeout(function() {
    _this.model.collection.toggleReadyToPreloadNewPost();
}, 1000); 
```

您还可以使用[`_.bind`](http://underscorejs.org/#bind)：

```
setTimeout(
    _(this.model.collection.toggleReadyToPreloadNewPost).bind(this.model.collection),
    1000
); 
```

您还可以[`_.bindAll`](http://underscorejs.org/#bindAll)在集合内部使用`initialize`以始终将该方法绑定到适当的`this`：

```
wedding.collections.Posts = Backbone.Collection.extend({
    initialize: function() {
        _.bindAll(this, 'toggleReadyToPreloadNewPost');
        //...
    } 
```

然后你原来的

```
setTimeout(this.model.collection.toggleReadyToPreloadNewPost, 1000); 
```

应该做正确的事。如果你总是想被束缚，你只会想走这条路`toggleReadyToPreloadNewPost`，我可能会选择第一个。

# ios - 无法在我的应用中启用位置

> ID：13835387
> 
> 赞同：0
> 
> 时间：2012-12-12T08:09:02.213
> 
> 标签：ios

我想在我的应用程序中找到我的位置。而且我`use CoreLocationManager`要获取坐标，但是当我启动应用程序时，它会提醒我天气以授权位置隐私，然后单击确定按钮后，什么也没发生。

然后我在我的 iPhone 中打开设置-隐私-位置，我发现我的应用程序没有启用位置。我打开它，然后我重新启动应用程序，仍然没有任何反应？

这是我的代码：

```
CLLocationManager *locationManager = [[CLLocationManager alloc] init];
[locationManager setDelegate:self];
[locationManager setDesiredAccuracy:kCLLocationAccuracyBest];
[locationManager startUpdatingLocation];

-(void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray   *)locations
{

} 
```

设置断点后该方法`-(void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations`无法运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:17:21.743

输入以下代码以在您的设备中获取您当前的纬度和经度（不在模拟器中）。

```
CLLocationManager *locationManager = [[CLLocationManager alloc] init];
[locationManager setDelegate:self];
[locationManager setDesiredAccuracy:kCLLocationAccuracyBest];
[locationManager startUpdatingLocation];
CLLocation *location = [locationManager location];
CLLocationCoordinate2D coordinate = [location coordinate];
latitude = [[NSString alloc] initWithFormat:@"%f", coordinate.latitude];
longitude = [[NSString alloc] initWithFormat:@"%f", coordinate.longitude];
NSLog(@"dLatitude : %@", latitude);
NSLog(@"dLongitude : %@",longitude); 
```

# php - 致命错误：未捕获的 OAuthException：（＃100）无效参数

> ID：13835388
> 
> 赞同：-2
> 
> 时间：2012-12-12T08:09:04.850
> 
> 标签：php, facebook

您好，我正在尝试代表我的用户举办活动。这是我用来向 API 发出请求的代码。我/饲料工作正常。但是当我将它更改为我/事件并更改键和内容时。它搞砸了。甚至直接从 Facebook 开发人员部分复制并粘贴参数。

```
 $ret_obj = $facebook->api('/me/events', 'POST',
                            array(
                                'name' => 'hill Billy',
                                'start_time' => '10pm',
                                'end_time' => '3am',
                                'description' => 'Basic Info',
                                'location' => 'street address',
                                'privacy_type' => 'OPEN'
                              )); 
```

当它被调用时，我得到这个致命错误：

```
Fatal error: Uncaught OAuthException: (#100) Invalid parameter thrown in base_facebook.php on line 1238 
```

我更改了代码以添加会话令牌，即使提要调用不需要它，但它仍然显示相同的错误消息......

```
 $ret = $facebook->api('/me/events', 'POST',
                                    array(
                                      'access_token' => $_SESSION['fb_00000000000000_access_token'],
                                      'name' => 'hill Billy',
                                      'start_time' => '10pm',
                                      'end_time' => '3am',
                                      'description' => 'Basic Info',
                                      'location' => 'street address',
                                      'privacy_type' => 'OPEN' 
```

但是没有 Evail 它仍然不起作用

然后我现在把它改成

```
 $ret_obj = $facebook->api('/'.$_SESSION['fb_000000000000000_user_id'].'/events?access_token='.$_SESSION['fb_000000000000000_access_token'], 'POST',
                                    array(

                                      'name' => 'hill Billy',
                                      'start_time' => '10pm',
                                      'end_time' => '3am',
                                      'description' => 'Basic Info',
                                      'location' => 'street address',
                                      'privacy_type' => 'OPEN'
                                 )); 
```

这不是指定的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T08:14:48.650

在 FB Apps 中代表 ON .. 你应该去 Open Graph API with AUTH AU THEENTICATION .. 在第一次你会要求允许/允许选项来代表.. 所以如果你允许你将获得 Auth TOKEN/AUTHENTICATION ID... 之后，只有您可以代表...发布/做某事

传递您的访问令牌，如下所示，

```
$ret_obj = $facebook->api('/me/events?access_token=ACCESS_TOKEN', 'POST', array( 'name' => 'hill Billy', 'start_time' => '10pm', 'end_time' => '3am', 'description' => 'Basic Info', 'location' => 'street address', 'privacy_type' => 'OPEN' )); 
```

参考以下...

[http://blog.awpny.com/kaiawpny/2011/how-to-facebook-access-token.html](http://blog.awpny.com/kaiawpny/2011/how-to-facebook-access-token.html)

[http://developers.facebook.com/docs/opengraphprotocol/](http://developers.facebook.com/docs/opengraphprotocol/)

您需要传递 Auth Token ...这就是您的错误的原因，

**FACEBOOK PHP API FATAL ERROR: Fatal error: Uncaught OAuthException: (#100) Invalid parameter**

# javascript - 将对象的方法传递给 ajax - 仅限 javascript

> ID：13835390
> 
> 赞同：0
> 
> 时间：2012-12-12T08:09:12.617
> 
> 标签：javascript, ajax

我有一个具有两种方法的对象，如图所示：

```
function PendingRequests(){
    this.count;
    this.id = [];
    this.event = [];
}
PendingRequests.prototype.get = function(){
    var request_parameter = 'cont=pr';
    Ajax(url,request_parameter,this.get2);
}
PendingRequests.prototype.get2 = function(pr){
    this.count = pr.length;
    for(var i=0;i<this.count;i++){
        this.id[i]          = pr[i]['id'];
        this.event[i]       = pr[i]['event'];
    }
}
var pendingrequests = new PendingRequests(); 
```

和ajax函数

`Ajax(url,parameter,funct){...}`

在得到响应后调用传递的函数

```
funct(JSON.parse(XMLHttpRequestObject.responseText)); 
```

脚本一直执行，直到在 ajax 响应后调用该方法，但随后我收到**“this.id is undefined”错误**

请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:15:29.790

您必须为函数分配上下文，否则它将在全局上下文中调用，您必须在 ajax 函数中接受另一个参数：

```
Ajax(url,parameter,funct, context){...} 
```

然后使用调用触发函数：

```
funct.call(context, JSON.parse(XMLHttpRequestObject.responseText)); 
```

那么get函数中的调用将是：

```
Ajax(url,request_parameter,this.get2, this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:21:23.570

嘿，我尝试了这两个建议，但仍然遇到同样的错误。

最后我解决了这个问题。

我做了伊恩建议的改变。（即使 ajax 函数也会处理其他对象，但对于所有这些对象，我可以定义一个 get2 方法）

由于它仍然给出错误，我定义了所有属性：

```
this.count;
this.id = [];
this.event = []; 
```

以不同的方式：

```
PendingRequests.prototype.count = 0;
PendingRequests.prototype.id = [];
PendingRequests.prototype.event = []; 
```

现在它正在工作......我将只有一个 PendingRequests 对象，所以希望原型设计以后不会给我任何错误。

# java - 如何使用 java 运行和执行 putty 命令？

> ID：13835403
> 
> 赞同：-2
> 
> 时间：2012-12-12T08:10:07.567
> 
> 标签：java, putty

如何使用 java 运行和执行 putty 命令。我希望结果显示在控制台中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:13:59.630

使用[Putty 命令](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)并使用 java 中的 run.execute 选项运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:16:11.523

您可以使用 Runtime.getRuntime().exec(... 虽然我不确定输出控制台

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T08:18:03.640

我假设您的意思是调用 SSH 命令而不是直接运行 putty。查看[JSch](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CC0QFjAA&url=http://www.jcraft.com/jsch/&ei=jj3IUMSyGtHasgad6oDYAQ&usg=AFQjCNFEETFDy_PvFq6a3L_sqnj_u5o-ZQ&bvm=bv.1354675689,d.Yms)和更简单的[sshj](http://schmizz.net/sshj/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T09:01:30.967

这是从命令行使用的[链接。](http://the.earth.li/~sgtatham/putty/0.53b/htmldoc/Chapter3.html)`putty`

检查第**3.7 节 PuTTY 命令行**

并像在 java 中一样使用它

```
Runtime rt = Runtime.getRuntime();
Process pr = rt.exec("putty.exe <options>"); 
```

# php - 读取前 10 行的行并使用 PHP 在每行 10 行中显示单词

> ID：13835405
> 
> 赞同：-1
> 
> 时间：2012-12-12T08:10:30.900
> 
> 标签：php, file

我的PHP代码如下：

```
<?php
    $path = "files/stats_pmta.affinitead.net.2012-12-12.txt";
    $num = 10;
    $fh = @fopen($path, 'r');
    if ($fh){
    for ($i=0;$i<$num;$i++){
    $newfile = fgets($fh,1024);     
    $t = explode(";", $newfile);
    echo $t;
    echo "<br>";
    }

    } else {
        echo 1;
    } 
```

?>

我想读取文件`stats_pmta.affinitead.net.2012-12-12.txt`中仅读取以下文件前 10 行的所有数据：

```
2012-12-12-0551;affinitead.net;1221588;106346;8.70;gmail.com;123577;7780;6.29
2012-12-12-0551;affinitead.net;1221588;106346;8.70;wanadoo.fr;123562;9227;7.46
2012-12-12-0551;affinitead.net;1221588;106346;8.70;yahoo.fr;104819;1685;1.60
2012-12-12-0551;affinitead.net;1221588;106346;8.70;orange.fr;87132;7341;8.42
2012-12-12-0551;affinitead.net;1221588;106346;8.70;laposte.net;79597;1040;1.30
2012-12-12-0551;affinitead.net;1221588;106346;8.70;hotmail.fr;77601;14107;18.17
2012-12-12-0551;affinitead.net;1221588;106346;8.70;neuf.fr;67392;1793;2.66
2012-12-12-0551;affinitead.net;1221588;106346;8.70;hotmail.com;55300;10494;18.97
2012-12-12-0551;affinitead.net;1221588;106346;8.70;free.fr;43422;1706;3.92
2012-12-12-0551;affinitead.net;1221588;106346;8.70;sfr.fr;39063;251;.64
2012-12-12-0551;affinitead.net;1221588;106346;8.70;aol.com;32061;9859;30.75
2012-12-12-0551;affinitead.net;1221588;106346;8.70;club-internet.fr;22424;233;1.03
2012-12-12-0551;affinitead.net;1221588;106346;8.70;yahoo.com;18646;1365;7.32
2012-12-12-0551;affinitead.net;1221588;106346;8.70;voila.fr;18513;3650 
```

在我阅读前 10 行后，我想在每一行中显示单词，例如：

```
2012-12-12-0551;affinitead.net;1221588;106346;8.70;gmail.com;123577;7780;6.29 
```

我要显示`gmail.com` `123577` `7780` `6.29`

但是上面的PHP代码我刚刚得到了输出`array`。我不知道如何解决这个问题。请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:17:46.190

你可以这样做：

```
$path = 'path/to/file'
$fp = fopen($path, 'r');
$count = 0;
while($columns = fgetcsv($fp, 256, ';', '"')
{
    if(++$count > 10)
        break;

    echo implode("\t", $colums);
} 
```

如果您不知道 implode 是如何工作的，请看这里：[http ://de1.php.net/manual/de/function.implode.php](http://de1.php.net/manual/de/function.implode.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:23:29.520

这是一种您可以通过使用 PHP 函数爆炸来实现的方法。

```
$textFile = file_get_contents("test.txt");

                $lineFromText = explode("\n", $textFile);

                $row = 0;
                foreach($lineFromText as $line)
                {
                        if($row <= 10)
                        {
                        $words = explode(";",$line);
                        echo $words[5] . ' ' . $words[6] . ' ' . $words[7] . ' ' . $words[8];
                        $row++;
                        }   
                } 
```

编辑代码以便您可以替换自己的代码，您可能需要在尝试执行任何操作之前检查文件是否为空等。

# android - 无法从 SDCard 检索图像

> ID：13835406
> 
> 赞同：0
> 
> 时间：2012-12-12T08:10:35.400
> 
> 标签：android, android-layout, android-sdcard, android-image

```
Drawable image = Drawable.createFromPath(newImagepath);
defective_image.setBackgroundDrawable(image); 
```

图像存储在 newImagePath 变量中，该变量是一个字符串。上面抛出了一个 outOfMemory 异常。

我还尝试将图像检索到 Bitmap 对象中。

```
Bitmap bitmapImg= BitmapFactory.decodeFile(newImagepath); 
```

在上述情况下，bitmapImg 为 Null。（无一例外）

但是，如果将其作为文件检索，则它是成功的。这不符合我的目的，因为我希望这张图片成为 RelativeLayout 的背景。

```
File imageFile = new File(newImagepath);
String imgPath = imageFile.getAbsolutePath(); 
```

imgPath和newImagePath一样，结论是路径没有错。我还验证了图像在 SDCard 中的存在。

此图像是从设备的相机中捕获的。此代码在模拟器上成功运行。在设备上调试时，注意到上述故障。我也试过： -

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inJustDecodeBounds = true; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:12:47.777

我宁愿使用[BitmapFactory](http://developer.android.com/reference/android/graphics/BitmapFactory.html#decodeFile%28java.lang.String%29)从文件路径解码图像：

```
Bitmap bitmap = BitmapFactory.decodeFile(imageFile.getAbsolutePath());
jpgView.setImageDrawable(bitmap); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:55:27.930

这似乎是一个内存问题。所以我建议使用选项解码位图大小

```
options.inJustDecodeBounds = true; 
```

然后通过查看字段来获取此位图的大小（不要尝试使用位图：它将为空）：

```
options.outWidth;
options.outHeight; 
```

然后创建一个缩放位图（取决于屏幕尺寸）。为此，您可以查看

```
BitmapFactory.Options.inSampleSize 
```

# android - Android RenderScript 不显示纹理

> ID：13835407
> 
> 赞同：1
> 
> 时间：2012-12-12T08:10:39.563
> 
> 标签：android, renderscript

我对 RenderScript 有疑问。我绑定的纹理不会显示在 Surface 上。我在 LogCat 或控制台中没有收到任何错误或相关说明。我使用 WallPaperService.Engine。我在 ProgramFragments 中绑定位图让它显示在 rsgBindProgramFragment 中。我在几个教程中也遇到了这个问题。Bitmap、ProgramFragments 等永远不会为空。当我阻止将位图绑定到 RenderScript 时，将显示点而不是纹理。我已经尝试了几种解码位图的方法，而不是以非常小的分辨率压缩位图。我认为在这里发布整个代码是没有意义的。请索取片段。我在这个问题上工作了大约一周。我非常感谢解决问题的每一个建议。我在 Galaxy S3 上测试该解决方案。

# xpages - 高级 javascript 脚本 xpages

> ID：13835411
> 
> 赞同：0
> 
> 时间：2012-12-12T08:10:51.260
> 
> 标签：xpages

购买 mastering xpages、XPages Portable Command Guide 和 xpages 扩展库后。我从哪里开始感到困惑我看了那些电子书，我从官方网站下载了他们的应用程序，但我从哪里开始感到困惑。我开始开发一些面具、视图和 xpages。我的问题是如何将这些面具联系在一起？示例：我有带有 5 个字段的 mask1，其中 field1 与 mask2 中的 field1.1 相关。我如何将它们联系在一起以及如何使它们在同一个视图中？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T01:46:07.563

Matux 使用[我](http://www.wissel.net/blog/d6plinks/learning-xpages)的备忘单作为入门。它提供了许多指向教程和信息的链接。然后放下关系/uml 思维。在 RDBMS 中，您需要在 Notes 中可以存储在单个文档中的主/明细表（取决于手头的任务）。最大的学习步骤是多值字段，因此请注意它们。每个文档的声明性读取和读/写访问权限非常安全，但需要仔细规划才能获得正确的性能。

# xpages - xpage中的重复控制错误

> ID：13835413
> 
> 赞同：-3
> 
> 时间：2012-12-12T08:10:58.153
> 
> 标签：xpages, xpages-ssjs

JavaScript 代码

```
1: db=database;
2: theView=db.getView(compositeData.PDviewname); 
```

执行 JavaScript 计算表达式时出错脚本解释器错误，line=2，col=12：[TypeError] 调用方法 NotesDatabase.getView(null) 时发生异常 null

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T01:37:05.363

您不会捕获空值。一种可能的方式：

```
 var viewName = compositeDate.PDViewName == null ? 'someDefaultName' | compositeDate.PDViewName;
    var theView = database.getView(viewName); 
```

当然，如果 viewName 为空，您也可以停止代码。您不应该在此处使用 sessionScope -> 如果用户有在您的应用程序中打开 2 个浏览器选项卡的前所未闻的想法，您的代码将会中断。

# php - 仅更新非空记录

> ID：13835415
> 
> 赞同：-1
> 
> 时间：2012-12-12T08:11:16.203
> 
> 标签：php, mysql

我有这个查询，我用它来更新一个表。问题是，我只需要更新与“未定义”不同的值

在这里有人的帮助下，我得到了这个查询：

```
$sqlStart="UPDATE forma SET ";
$sql="";
if (!empty($postDyqani_pergjegjes)) $sql += " dyqani_pergjegjes='$postDyqani_pergjegjes',";
if (!empty($postEmri)) $sql += "  emri='$postEmri',";
if (!empty($postKlienti)) $sql += "  klienti='$postKlienti',";
if (!empty($postTelefoni)) $sql += "  telefoni='$postTelefoni,'";
if (!empty($postMontim)) $sql += "  montim='$postMontim',";
if (!empty($postAdresa)) $sql += "  adresa='$postAdresa',";
if (!empty($postData_e_shitjes)) $sql += "  data_e_shitjes='$postData_e_shitjes',";
if (!empty($postDifekti)) $sql += "  difekti='$postDifekti',";
if (!empty($postTekniku_emer)) $sql += "  tekniku_emer='$postTekniku_emer',";
if (!empty($postTekniku_mesazh)) $sql += "  tekniku_mesazh='$postTekniku_mesazh',";
if (!empty($postData_fillim)) $sql += "  data_fillim='$postData_fillim',";
if (!empty($postData_mbarim)) $sql += "  data_mbarim='$postData_mbarim',";
if (!empty($postData)) $sql += "  data='$postData',";
if (!empty($postStatus)) $sql += "  status='$postStatus',";
// replace the last `,` for `;`
if ($sql != "") {
$sql = substr($sql, 0, -1) . ";";

    // replace the last `,` for `;`
    // run sql command
    echo $sqlCommand = $sqlStart.$sql;
    $result=mysql_query($sqlCommand) or die(mysql_error()) ;

} else {
} 
```

虽然它不会执行..请帮我解决这个问题..如果我打印变量大多数结果是`undefined` 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:14:00.720

您的方法有很多问题；首先， += 不会做你认为它对 PHP 字符串所做的事情，并且可能会使所有内容最终成为值 0。使用 .= 将字符串连接到现有字符串：

```
$foo = '123';
$foo .= 'abc';

// $foo == '123abc' 
```

其次，如果没有更多关于变量来自何处的信息，很难说哪里出了问题。如果您有一个名为“Dyqani_pergjegjes”的字段，则引用它的正确方法是使用`$_POST['Dyqani_pergjegjes']`.

此外，您需要转义要在 SQL 查询中使用的字符串，以避免 SQL 注入漏洞和其他可能的错误（或在 mysqli 中使用准备好的语句或使用 PDO），如果您想正确解决它）：

```
difekti='". mysql_real_escape_string($postDifekti) . "' 
```

您还缺少 UPDATE 语句的条件，因此在当前形式下，它将更改数据库中的所有行。可能不是你想要的。而且您不需要添加“；” 在语句的末尾 - 这在执行查询时是隐含的，通常不建议这样做。

# c# - 从 .c#.net 中的一堆复选框中选择的复选框

> ID：13835416
> 
> 赞同：9
> 
> 时间：2012-12-12T08:11:17.927
> 
> 标签：c#, .net, winforms

问题在**c#.NET、Visual Studio、Windows Form Application下面临**

我有一堆复选框随机放置在一个表单和一个面板中。因此，如果`checkbox`在表单中选择了任何一个，则应该将其值相加。

底线：而不是使用大量的“If-else 循环”来评估它是否被检查过。我想使用“for循环”来简化它。

有没有`Checkbox group name`我可以使用的类型功能？？？

我想编写这样的代码：

```
for(int i=0;i<checkboxes.length;i++)
{
    string str;
    if(chkbox.checked)
    {
        str+=chkbox.value;
    }
} 
```

`checkboxes`组名在哪里。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T08:28:43.840

您可以使用简单的 LINQ 查询

```
var checked_boxes = yourControl.Controls.OfType<CheckBox>().Where(c => c.Checked); 
```

`yourControl`包含复选框的控件在哪里。

* * *

`checked_boxes`现在是一个实现`IEnumerable<CheckBox>`表示查询的对象。通常你想用一个循环来迭代这个查询`foreach`：

```
foreach(CheckBox cbx in checked_boxes) 
{
} 
```

您还可以`List<Checkbox>`通过`.ToList()`在checked_boxes 上或直接在`Where(...)`.

* * *

由于您想`Text`将复选框连接到单个字符串，您可以使用`String.Join`.

```
var checked_texts = yourControl.Controls.OfType<CheckBox>()
                                        .Where(c => c.Checked)
                                        .OrderBy(c => c.Text)
                                        .Select(c => c.Text);

var allCheckedAsString = String.Join("", checked_texts); 
```

我还添加了一个`OrderBy`子句以确保复选框按它们的`Text`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T08:30:02.727

```
CheckBox[] box = new CheckBox[4];  

box[0] = checkBox1;  
box[1] = checkBox2;  
box[2] = checkBox3;  
box[3] = checkBox4;

for(int i=0; i<box.length; i++)
{
      string str;
      if(box[i].checked== true)
      {
           str += i.value;
      }
} 
```

我认为这段代码适用于 DotNet4.0。请让我知道发生任何错误。将“盒子”视为常规数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T08:22:54.327

将所有复选框订阅到一个 CheckedChanged 事件处理程序，并在选中或取消选中任何复选框时构建您的字符串。以下查询将构建字符串，其中包含所有表单选中复选框的名称：

```
private void Checkbox_CheckedChanged(object sender, EventArgs e)
{
    // this will use all checkboxes on Form
    string str = Controls.OfType<CheckBox>()
                         .Where(ch => ch.Checked)
                         .Aggregate(new StringBuilder(),
                                    (sb, ch) => sb.Append(ch.Name),
                                    sb => sb.ToString());
    // use string
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T08:23:23.137

如果所有复选框都在一个 groupbox 中，您可以这样做：

```
foreach(Control c in myGroupBox.Controls)
  {
   if (c is CheckBox)
    {
    //do something
     CheckBox temp = (CheckBox)c;
     if(temp.Checked)
        //its checked
    }  
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T08:34:42.853

I suppose other than subscribing to event CheckedChanged there is no alternative even if it is contained in some panel or form, You have to use if else,

if it would have been web base eg asp.net or php we could use jquery because it gives us the option to loop through each particular event using .each and getting its value

# opengl - 如何获得一个操作的 4x4 变换矩阵

> ID：13835420
> 
> 赞同：0
> 
> 时间：2012-12-12T08:11:37.897
> 
> 标签：opengl, transformation, projection

我有这些数据，我需要想出转换矩阵：

```
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glOrtho(-1.0, 1.0, -1.0, 1.0, -1.0, 1.0); 
```

假设有一个以原点为中心的单位立方体，我们想通过直接查看它的一个角（即三个轴）来查看它。需要什么 4X4 变换矩阵？

我知道这是翻译+缩放，但我不知道如何把它放在矩阵形式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:08:57.783

查看 OpenGL glOrtho 手册页：

[glOrtho](http://www.opengl.org/sdk/docs/man2/xhtml/glOrtho.xml)

它告诉您如何计算矩阵。

以下是格式更适合 Web 使用的手册页副本：

[glOrtho](http://www.manpagez.com/man/3/glOrtho/)

# iphone - 二维码集成

> ID：13835422
> 
> 赞同：1
> 
> 时间：2012-12-12T08:11:41.483
> 
> 标签：iphone, objective-c, zbar-sdk

在我的应用程序上集成`ZBar`扫描框架后，我遇到了一些问题`QRCodeRead`。我的客户想要，QRCode Scanner 将在一个固定的框架中，并且不能是`PresentModalView`. 所以我为固定框架 QRCode Scanner 编写代码并添加了`reader.view`on `self.view`，但它不能作为`presentModalViewController:reader`. 我不知道出了什么问题。我无法解决这个问题。我在下面提供了我的代码，很抱歉我的英语不好。

*此代码正在运行...*

```
- (IBAction) scanButtonTapped
{
    ZBarReaderViewController *reader = [ZBarReaderViewController new];
    reader.readerDelegate = self;
    reader.supportedOrientationsMask = ZBarOrientationMaskAll;

    ZBarImageScanner *scanner = reader.scanner;
    // TODO: (optional) additional reader configuration here

    // EXAMPLE: disable rarely used I2/5 to improve performance
    [scanner setSymbology:ZBAR_I25 config:ZBAR_CFG_ENABLE to:0];

    // present and release the controller
    [self presentModalViewController:reader animated:YES];
    [reader release];
} 
```

*但是此代码不起作用...*

```
- (IBAction) scanButtonTapped
{
    // Create new reader
    ZBarReaderViewController *reader = [ZBarReaderViewController new];
    reader.readerDelegate = self;
    [reader.scanner setSymbology:ZBAR_I25 config:ZBAR_CFG_ENABLE to:0];
    reader.showsCameraControls = NO;
    reader.showsZBarControls = NO;
    [reader setWantsFullScreenLayout:NO];
    reader.showsHelpOnFail = NO;
    reader.showsZBarControls = NO;
    [reader.view setFrame:CGRectMake(20, 134, 280, 202)];

    [self.view addSubview:reader.view];
    [reader release];
} 
```

请帮助我并提供解决方案。在此先感谢。

# emacs - 如何强制字节编译elisp中的目录

> ID：13835436
> 
> 赞同：1
> 
> 时间：2012-12-12T08:12:24.050
> 
> 标签：emacs, elisp

如何在不关心 elisp 源代码中的任何内容的情况下强制对目录进行字节编译（与交互式目录相同：`C-u 0 M-x byte-recompile-directory`但在源代码中）？

需要我写一些类似的东西：

```
(defun byte-compile-directory-recursively (directory)
  (dolist (file (directory-files directory t "\\w+"))
    (if (file-directory-p file)
        (byte-compile-directory-recursively file)
      (if (string-match "\\.el$" file)
          (byte-compile-file file))))) 
```

? 任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T08:52:15.693

相信你正在寻找`(byte-recompile-directory directory 0)`。

# javascript - 用于检查字符串数组中的重复的更好的代码

> ID：13835437
> 
> 赞同：0
> 
> 时间：2012-12-12T08:12:25.580
> 
> 标签：javascript, jquery

我有以下代码用于检查数组中是否存在重复项。代码工作正常。但它使用了一个名为 newUniqueArray 的新数组。在不使用新数组的情况下，是否有更好的代码用于此目的？这段代码是否有任何优化可能？

注意：我使用了 jQuery中的`inArray`和关键字`in`

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.4.1.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('#btnSave').click(function (e) {
            var reportRecipients = "A, a , b,";
            reportRecipients = reportRecipients.toLowerCase();
            checkDuplicate(reportRecipients);
        });

        function checkDuplicate(reportRecipients) {
            if (reportRecipients.length > 1) {
                var recipientsArray = reportRecipients.split(',');
                var newUniqueArray = [];

                for (a in recipientsArray) {
                    var email = $.trim(recipientsArray[a]);

                    if ($.inArray(email, newUniqueArray) == -1) {
                        newUniqueArray.push(email);
                    }
                }

                if (newUniqueArray.length < recipientsArray.length) {
                    alert('Duplicate Exists');
                }

                return false;
            }
        }
    });
</script>
</head>
<body>
<input name="txtName" type="text" id="txtName" />
<input type="submit" name="btnSave" value="Save" id="btnSave" />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T08:47:57.713

如果只想测试字符串数组，可以使用 JavaScript 对象的属性进行测试。它使用哈希表来查找属性，这比数组迭代要快。

例如：http: [//jsfiddle.net/jmDEZ/8/](http://jsfiddle.net/jmDEZ/8/)

```
function checkDuplicate(reportRecipients) {
    var recipientsArray = reportRecipients.split(','),
        textHash = {};
    for(var i=0; i<recipientsArray.length;i++){
        var key = $.trim(recipientsArray[i].toLowerCase());
        console.log("lower:" + key);
        if(textHash[key]){
            alert("duplicated:" + key);
            return true;
        }else{
            textHash[key] = true;
        }
    }
    alert("no duplicate");
    return false;
}​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T08:37:35.350

我看不出有任何理由为此目的使用 jQuery：

```
checkDuplicate = function (reportRecipients) {
    if (reportRecipients.length > 1) {
        var recipientsArray = reportRecipients.split(',');
        for (a in recipientsArray) {
            if(reportRecipients.indexOf(a) != reportRecipients.lastIndexOf(a)){
                return true;
            }
        }
    }
    return false;
}

$('#btnSave').click(function (e) {
            var reportRecipients = "A, a , b,";
            reportRecipients = reportRecipients.toLowerCase();
            if(checkDuplicate(reportRecipients)) alert('Duplicate Exists');
        }); 
```

# jquery - Jquery选择div元素内的复选框

> ID：13835440
> 
> 赞同：0
> 
> 时间：2012-12-12T08:12:41.897
> 
> 标签：jquery

我在 div 元素中有一个复选框。每当我单击按钮时，我都想将复选框标记为已选中。. div 元素标记如下

```
<div class ="test123" style ="width:90px;">
<input id = "chk1" type = "checkbox" value="on"/>
</div> 
```

我正在做这样的事情，但它不适合我

```
$(".test123 ").find("input:checked").each(function() {
    //code to check the checkbox
});​ 
```

请建议..

导航。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:18:39.350

```
$('.btn').click(function(){
 $('#chk1').attr('checked','checked'); // $('#chk1').attr("checked","true");
}) 
```

两者都应该适合您。

HTML

```
<div class ="test123" style ="width:90px;">
<input id = "chk1" type = "checkbox" value="on"/>
</div>
<input type="button" class="btn" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T12:02:36.760

```
$('#btn').click(function(){

    $('.test123').find('input[type=checkbox]').attr('checked','true');

    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T12:20:30.137

解决方案的最佳方法是使用标签而不是像这样的 div

```
<label class ="test123" style ="width:90px;">
    <input id="chk1" type="checkbox" value="on"/>
</label> 
```

所以你不需要javascript代码！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T08:15:07.060

你可以这样做

```
$('#btn').click(function(){
 $('#chk1').attr("checked","true");
})

<input type="button" id="btn" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T08:40:56.767

```
$(".test123 ").find("input:checked").each(function() { 
```

而不是上面那个..尝试使用

```
 $("#button").click(function() {
        $(".test123").find("input:checkbox").each(function() {
            if($(this).attr('checked')) {
            } else {
                $(this).attr('checked','checked');
            }
        });
    }); 
```

# webserver - 在 iPlanet 6.0 中停用/更改默认图标

> ID：13835441
> 
> 赞同：2
> 
> 时间：2012-12-12T08:12:46.250
> 
> 标签：webserver, favicon, sunone, iplanet

虽然这里有很多关于网站图标未显示的问题，但我有一个突然出现的问题......

如果我在浏览器中输入`http://localhost`，我会看到 web 目录的根目录，并且没有 favicon.ico。然而，浏览器选项卡上会显示一个图标。如果我输入`http://localhost/favicon.ico`，浏览器会显示图标！

如何`http://localhost/favicon.ico`返回不存在的东西？我正在使用链接到 weblogic 应用程序容器的 iPlanet 服务器。

我在我的整个 web 目录和 weblogic 域中搜索了 favicon.ico，但没有找到任何（或者更确切地说：其他一些躺在周围，但不是我看到的那个）。我什至在域、web 目录和 iPlanet 目录中搜索了字符串“favicon.ico”，以防它在某个配置文件中，但没有找到任何东西。

有什么提示吗？

编辑：正如下面 Sacha 所指出的，这是服务器的默认图标。我想知道它在配置中的位置，以及如何停用它。我在 iPlanet 7.0 的文档中找到了如何做到这一点，但我使用的是 iPlanet 6.0，但在文档中找不到任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:24:00.477

如果没有 favicon.ico 服务器显示一个默认的。它可能是一个 xampp 或 wamp 标志。如果你想自定义将你的放在你的项目根目录中。例如：- 如果您的项目名称是 saas，请将其放在 saas 文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:18:12.567

如果转到 localhost/favicon.ico 会显示图标，那么它就在那里。我不确定为什么它不在目录中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-16T10:36:56.747

我在我的 jsp 项目的 jBoss 服务器中也遇到了同样的问题，其中浏览器默认显示服务器图标，并且我的整个项目目录中没有 favicon.ico 然后我在服务器上搜索了 favicon，它就在那里我已从服务器中删除该文件，以从我的项目中删除任何默认的 favicon。

# jqgrid - jqgrid过滤器工具栏搜索输入对齐中心

> ID：13835452
> 
> 赞同：1
> 
> 时间：2012-12-12T08:14:04.313
> 
> 标签：jqgrid

我在网格中添加了一个 filterToolbar 搜索框，并更改了它的高度样式，就像在[这个](https://stackoverflow.com/questions/5967028/jqgrid-filtertoolbar-search-input-size)问题中一样。

我想将此输入定位在中心，（我试过了`text-align:center`，但没有用）。如何在列标题内居中输入框？

**更新：** 这是我的 colModel 代码：

```
{width:10,name:'Code1',index:'Code1', jsonmap:'Code1',searchoptions:{dataInit: function(elem){$(elem).css('font','15px'); $(elem).height(18);}}},
{width:40,name:'DescriptionHe1',index:'DescriptionHe1', jsonmap:'DescriptionHe1',searchoptions:{dataInit: function(elem){$(elem).css('font','15px');$(elem).height(18);}}, hidden:(language == "he")?false:true},
{width:40,name:'DescriptionEn1',index:'DescriptionEn1', jsonmap:'DescriptionEn1',searchoptions:{dataInit: function(elem){$(elem).css('font','15px');$(elem).height(18);}}, hidden:(language == "en")?false:true},                                                    
{width:10,name:'Code2',index:'Code2', jsonmap:'Code2',searchoptions:{dataInit: function(elem){$(elem).css('font','15px'); $(elem).height(18);}}},
{width:40,name:'DescriptionHe2',index:'DescriptionHe2', jsonmap:'DescriptionHe2',searchoptions:{dataInit: function(elem){$(elem).css('font','15px');$(elem).height(18);}}, hidden:(language == "he")?false:true},
{width:40,name:'DescriptionEn2',index:'DescriptionEn2', jsonmap:'DescriptionEn2',searchoptions:{dataInit: function(elem){$(elem).css('font','15px');$(elem).height(18);}}, hidden:(language == "en")?false:true} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T12:00:50.060

我想您使用的附加 CSS 会更改 jqGrid 的默认行为。**jqGrid默认将搜索工具栏中的所有输入字段*居中***。

要从搜索栏中更改元素的样式，您可以`attr`使用[searchoptions](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:search_config#colmodel_options)。

[该演示](http://www.ok-soft-gmbh.com/jqGrid/CenterInputInSearchingBar.htm)显示以下内容：

![在此处输入图像描述](../Images/8e11c4aa776b2a9608d511b7d9ccf5bd.png)

演示使用

```
cmTemplate: {
    searchoptions: {
        attr: {
            style: "width:auto;padding:0;max-width:100%"
        }
    }
} 
```

为搜索栏的所有元素设置通用样式。此外，我为不同的列设置`maxlength`和`size`属性。例如

```
searchoptions: { attr: { maxlength: 6, size: 6 }} 
```

[另一个演示](http://www.ok-soft-gmbh.com/jqGrid/CenterInputInSearchingBar1.htm)展示了如何为搜索工具栏的不同元素设置不同的对齐方式：

![在此处输入图像描述](../Images/54cdfececda348100afe6e18538141c4.png)

在我用于左对齐字段的演示中，属性

```
searchoptions: {
    attr: {
        maxlength: 6,
        size: 6,
        style: "width:auto;padding:0;max-width:100%;float:left"
    }
} 
```

和

```
searchoptions: {
    attr: {
        maxlength: 6,
        size: 6,
        style: "width:auto;padding:0;max-width:100%;float:right"
    }
} 
```

对于右对齐字段。

`height`要设置我在内部使用的输入字段的高度`searchoptions.attr.style`：

```
style: "width:auto;padding:0;max-width:100%;height:5em;float:left" 
```

PS我另外使用了CSS

```
.ui-jqgrid .ui-jqgrid-htable .ui-search-toolbar th {
    height: auto; padding-bottom: 1px
} 
```

提高搜索工具栏的一些可见性。

# network-programming - 数据在自制 SKB 中显示为以太网拖车

> ID：13835458
> 
> 赞同：2
> 
> 时间：2012-12-12T08:14:48.387
> 
> 标签：network-programming, linux-kernel, packet

我试图在 linux 内核模块中制作一个自定义 skb，然后通过网络发送它。我成功地制作了一个 SKB，但是当我通过网络发送它时，它没有到达目的地。

如果我在通过网络发送我的 SBK 的本地机器上运行 wireshark，它会显示我的数据包。但是，如果我检查数据包的内容，则表明数据被放置为“以太网拖车”

此外，如果我从我的 SKB 中删除所有数据并仅发送一个仅包含标头的 SKB，它仍然无法到达其目的地

这是代码：

```
u_int32_t local_ip;
u_int32_t remote_ip;
struct udphdr *udph;
struct iphdr *iph;
struct ethhdr *eth;
unsigned short udp_len;
char remote_mac[6];
char local_mac[6]; 
```

分配一个skb：

```
int header_len = sizeof(*iph) + sizeof(*udph) + sizeof(*eth);
skb = sock_wmalloc(sock->sk, /*payload len*/ len + header_len + LL_RESERVED_SPACE(pfr->ring_netdev->dev), 0, GFP_KERNEL); 
```

由于我使用的是 skb_push，因此我将数据向下移动并一直向下移动：

```
skb_reserve(skb,
            len + header_len + LL_RESERVED_SPACE(pfr->ring_netdev->dev)); 
```

推送 UDP 标头：

```
skb_push(skb, sizeof(*udph)); 
```

相应地重置 transport_pointer：

```
skb_reset_transport_header(skb); 
```

设置并填充 udp 标头：

```
udph = udp_hdr(skb);

udph->source = htons(5123);
udph->dest = htons(5123);
udp_len = 14;
udph->len = htons(udp_len);
udph->check = 0;
local_ip = htonl(0xCB873F2A);  /*203.135.63.42*/
remote_ip = htonl(0xCB873F29); /*203.135.61.41*/
udph->check = csum_tcpudp_magic(local_ip,
                                remote_ip,
                                udp_len, IPPROTO_UDP,
                                csum_partial(udph, udp_len, 0));

if (udph->check == 0) {
    printk("mangled checksum\n");
    udph->check = CSUM_MANGLED_0;
} 
```

现在推送 IP 标头：

```
skb_push(skb, sizeof(*iph)); 
```

重置network_pointer：

```
skb_reset_network_header(skb); 
```

设置并填充网络标头：

```
iph = ip_hdr(skb);

put_unaligned(0x45, (unsigned char *)iph);
iph->tos      = 0;
ip_len        = 40;
put_unaligned(htons(ip_len), &(iph->tot_len));
//iph->id     = htons(atomic_inc_return(&ip_ident));                                                                                                                                                  
iph->frag_off = 0;
iph->ttl      = 64;
iph->protocol = IPPROTO_UDP;
iph->check    = 0;
put_unaligned(local_ip   /*"\xC0\xA8\x00\x01"*/, &(iph->saddr));
put_unaligned(remote_ip  /*"\xC0\xA8\x00\x01"*/, &(iph->daddr));
iph->check    = ip_fast_csum((unsigned char *)iph, iph->ihl); 
```

推送以太网报头：

```
eth = (struct ethhdr *) skb_push(skb, ETH_HLEN); 
```

相应地重置 mac_pointer：

```
skb_reset_mac_header(skb); 
```

设置并填充 mac_header：

```
skb->protocol = eth->h_proto = htons(ETH_P_IP);

remote_mac[0] = 0x4C;
remote_mac[1] = 0x72;
remote_mac[2] = 0xB9;
remote_mac[3] = 0x24;
remote_mac[4] = 0x14;
remote_mac[5] = 0x1E;

local_mac[0] = 0x00;
local_mac[1] = 0x1E;
local_mac[2] = 0xE3;
local_mac[3] = 0xED;
local_mac[4] = 0xD4;
local_mac[5] = 0xA9;

memcpy(eth->h_source, remote_mac, ETH_ALEN);
memcpy(eth->h_dest, remote_mac, ETH_ALEN); 
```

设置设备和协议：

```
skb->protocol = htons(ETH_P_IP);
skb->dev = pfr->ring_netdev->dev;
skb->priority = sock->sk->sk_priority;

 if(!err)
    goto out_free; 
```

现在发送

```
if (dev_queue_xmit(skb) != NETDEV_TX_OK) {
    err = -ENETDOWN; /* Probably we need a better error here */
    goto out;
} 
```

# ruby-on-rails-3 - Ruby on Rails 中的渲染变量不正确

> ID：13835461
> 
> 赞同：1
> 
> 时间：2012-12-12T08:14:58.257
> 
> 标签：ruby-on-rails-3, rendering

我正在尝试从我的控制器操作中渲染一些东西。

```
def show

@bookmark = Bookmark.all
respond_to do |format|
  format.html # index.html.erb
  format.json { render json: @bookmark }
end
end 
```

以上是控制器中的操作。

show 的 html erb 文件是：

```
<p>
<b>Url:</b>
<%= @bookmark.each do |book| %>
<li><%= book.url%>
<b>Title:</b>
<li><%= book.title%>
<% end %>
</p> 
```

我也得到了输出，但除此之外，我得到了额外的东西。输出是：

```
Url:

www.google.com Title:
h
www.gmail.com Title:
hiw
asd Title:
as
sd Title:
ad
asd Title:
as
asd Title:
as
asfa Title:
ada
www.mrabhiram.github.com Title:
abhi
www.mrabhiram.github.com Title:
abhi 
www.mrabhiram.github.com Title:
abhi 

[#<Bookmark id: 1, title: "h", url: "www.google.com", tags: "php,python", created_at:    "2012-12-12 06:02:21", updated_at: "2012-12-12 06:02:21">, #<Bookmark id: 2, title: "hiw", url: "www.gmail.com", tags: "mail", created_at: "2012-12-12 06:02:41", updated_at: "2012-12-12 06:02:41">, #<Bookmark id: 3, title: "as", url: "asd", tags: "asd", created_at: "2012-12-12 06:07:41", updated_at: "2012-12-12 06:07:41">, #<Bookmark id: 4, title: "ad", url: "sd", tags: "dsfsd", created_at: "2012-12-12 06:11:04", updated_at: "2012-12-12 06:11:04">, #<Bookmark id: 5, title: "as", url: "asd", tags: "asd", created_at: "2012-12-12 06:22:36", updated_at: "2012-12-12 06:22:36">, #<Bookmark id: 6, title: "as", url: "asd", tags: "asda", created_at: "2012-12-12 06:25:33", updated_at: "2012-12-12 06:25:33">, #<Bookmark id: 7, title: "ada", url: "asfa", tags: "fa", created_at: "2012-12-12 07:41:16", updated_at: "2012-12-12 07:41:16">, #<Bookmark id: 8, title: "abhi", url: "www.mrabhiram.github.com", tags: "abhiram,php", created_at: "2012-12-12 07:45:29", updated_at: "2012-12-12 07:45:29">, #<Bookmark id: 9, title: "abhi", url: "www.mrabhiram.github.com", tags: "abhiram,php", created_at: "2012-12-12 07:46:19", updated_at: "2012-12-12 07:46:19">, #<Bookmark id: 10, title: "abhi", url: "www.mrabhiram.github.com", tags: "abhiram,php", created_at: "2012-12-12 07:48:28", updated_at: "2012-12-12 07:48:28">] 
```

我最后应该摆脱数组打印。我只想打印记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:19:50.543

使用`<% ... %>`代替`<%= ... %>`：

```
<% @bookmark.each do |book| %> 
```

参见：[eRB <%=](http://www.ruby-forum.com/topic/81219)

**更新（回应评论）：**

如果只有一个书签，为避免出现错误，请将实例变量包装在`Array()`：

```
<% Array(@bookmark).each do |book| %> 
```

顺便说一句，我建议将您的实例变量从 重命名`@bookmark`为`@bookmarks`。

# vba - 在 Excel 公式中查找所有使用过的引用

> ID：13835466
> 
> 赞同：6
> 
> 时间：2012-12-12T08:15:12.817
> 
> 标签：vba, excel

下面是在 Excel 中设置的示例，

```
[column1] [column2]

A1  =C3-C5

A2  =((C4-C6)/C6)

A3  =C4*C3

A4  =C6/C7

A5  =C6*C4*C3 
```

我需要提取公式中使用的引用

例如，

```
for "A1", I simply need to get the C3 and C5.
for A2, I need to get the C4 and C6. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-10-15T11:07:35.123

这是对以下内容的更新：

> 适用于本地工作表参考，但不适用于表外参考。– brettdj 2014 年 5 月 14 日 11:55

通过使用 Larrys 方法，只需将 objRegEx.Pattern 更改为：

```
(['].*?['!])?([[A-Z0-9_]+[!])?(\$?[A-Z]+\$?(\d)+(:\$?[A-Z]+\$?(\d)+)?|\$?[A-Z]+:\$?[A-Z]+|(\$?[A-Z]+\$?(\d)+)) 
```

这将：

1.  搜索可选的外部链接：`(['].*?['!])?`
2.  搜索可选的工作表参考：`([[A-Z0-9_]+[!])?`
3.  按优先顺序执行以下步骤：
4.  搜索具有行号的范围（以及可选的 $）：`\$?[A-Z]+\$?(\d)+(:\$?[A-Z]+\$?(\d)+)?`
5.  搜索没有行号的范围（和可选的 $）：`\$?[A-Z]+:\$?[A-Z]+`
6.  搜索 1 单元格引用（和可选的 $）：`(\$?[A-Z]+\$?(\d)+)`

结果是：

```
Sub testing()
Dim result As Object
Dim r As Range
Dim testExpression As String
Dim objRegEx As Object

Set r = Cells(1, 2)  ' INPUT THE CELL HERE , e.g.    RANGE("A1")
Set objRegEx = CreateObject("VBScript.RegExp")
objRegEx.IgnoreCase = True
objRegEx.Global = True
objRegEx.Pattern = """.*?"""  ' remove expressions
testExpression = CStr(r.Formula)
testExpression = objRegEx.Replace(testExpression, "")
objRegEx.Pattern = "(([A-Z])+(\d)+)"  'grab the address

objRegEx.Pattern = "(['].*?['!])?([[A-Z0-9_]+[!])?(\$?[A-Z]+\$?(\d)+(:\$?[A-Z]+\$?(\d)+)?|\$?[A-Z]+:\$?[A-Z]+|(\$?[A-Z]+\$?(\d)+))"
If objRegEx.test(testExpression) Then
    Set result = objRegEx.Execute(testExpression)
    If result.Count > 0 Then
        For Each Match In result
            Debug.Print Match.Value
        Next Match
    End If
End If
End Sub 
```

这样做，会给你所有可能的参考值，我能想到的。（更新了这篇文章，因为我需要解决问题）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T09:32:10.530

此函数返回一个逗号分隔的源单元格列表（先例）：

```
函数引用（rngSource 作为范围）作为变体
    Dim rngRef As Range
    将 strTemp 调暗为字符串
    出错时继续下一步
    对于 rngSource.Precedents.Cells 中的每个 rngRef
        strTemp = strTemp & ", " & rngRef.Address(False, False)
    下一个
    如果 Len(strTemp) 0 那么 strTemp = Mid(strTemp, 3)
    参考文献 = strTemp
结束功能

```

但是，请注意，您不能将其用作工作表中的 UDF，因为`rngRef.Address`不幸的是会导致循环引用。但是，您可以在一个小过程中使用它来填充另一列，例如

```
子 ShowPrecedents()
    调暗为范围
    '将 A1:A6 的先例粘贴到 D1:D6
    对于范围内的每个 rng("D1:D6")
        rng.Value = 参考（rng.Offset(, -3))
    下一个
结束子

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T09:46:39.137

只是为您提供一种替代方法...注意，如果多次调用单元格，这将返回重复的结果

```
Sub testing()
Dim result As Object
Dim r As Range
Dim testExpression As String
Dim objRegEx As Object

Set r = Cells(1, 2)  ' INPUT THE CELL HERE , e.g.    cells("A1")
Set objRegEx = CreateObject("VBScript.RegExp")
objRegEx.IgnoreCase = True
objRegEx.Global = True
objRegEx.Pattern = """.*"""  ' remove expressions
testExpression = CStr(r.Formula)
testExpression = objRegEx.Replace(testExpression, "")
objRegEx.Pattern = "(([A-Z])+(\d)+)"  'grab the address

If objRegEx.test(testExpression) Then
    Set result = objRegEx.Execute(testExpression)
    If result.Count > 0 Then
        For Each Match In result
            Debug.Print Match.Value
        Next Match
    End If
End If
End Sub 
```

结果存储在“Match.Value”中

# android - 没有得到输出

> ID：13835469
> 
> 赞同：2
> 
> 时间：2012-12-12T08:15:23.270
> 
> 标签：android

我正在尝试从创建 php 文件的数据库中获取数据。它返回名称作为对调用的回复。它的网站[Ensignweb](http://www.http://ensignweb.com/sandbox/app/comment11.php)

程序代码是这样的。

php文件是这样的

```
<?php
$connect = mysql_connect("localhost","databasename","password");

mysql_select_db("ews_app");

$query = mysql_query("select name from comment");
if(!empty($query)){
    if(mysql_num_rows($query)>0){

WHILE($row=mysql_fetch_array($query)):

$comment = array();
$comment["name"] = $row['name'];
echo "$comment<br>";
echo json_encode($comment);
echo "<br>";
endwhile;
    }
}
?> 
```

java代码是这样的：

```
import java.io.IOException;
import java.io.Reader;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.Menu;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {

    TextView httpStuff;
    HttpClient client;
    JSONObject json;
    final static String URL = "http://www.ensignweb.com/sandbox/app/comment11.php";
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
         httpStuff = (TextView) findViewById(R.id.data);
        client = new DefaultHttpClient();
        new Read().execute("name");
    }

    public JSONObject lastTweet() throws ClientProtocolException,IOException,JSONException{
        StringBuilder url = new StringBuilder(URL); 

        HttpGet get = new HttpGet(url.toString());
        HttpResponse r = client.execute(get);
        int status = r.getStatusLine().getStatusCode();//return 200 if execution is success
        if(status==200){
            HttpEntity e = r.getEntity();
            String data = EntityUtils.toString(e);
            JSONArray timeline = new JSONArray(data);
            JSONObject last = timeline.getJSONObject(0);
            return last;
        }else{
            Toast.makeText(MainActivity.this, "error", Toast.LENGTH_LONG);
            return null;
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public class Read extends AsyncTask<String, Integer, String>{

        @Override
        protected String doInBackground(String... params) {
            // TODO Auto-generated method stub
            try {
                json = lastTweet();
                return json.toString();
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return null;
        }

        @Override
        protected void onPostExecute(String result) {
            // TODO Auto-generated method stub
            httpStuff.setText(result);
        }

    }
} 
```

但它没有显示 json 回复。从过去的几天开始，我就陷入了困境。请帮我摆脱它。我真的需要它。

# asp.net-mvc - kenodui 网格 WebApi CRUD

> ID：13835472
> 
> 赞同：1
> 
> 时间：2012-12-12T08:15:35.720
> 
> 标签：asp.net-mvc, grid, kendo-ui

在 KendoUI 站点上，我找到了一个带有 MVC 包装器的 KendoUI 网格的工作示例。我不使用那些包装纸。

WebApi 是否已经支持 json(p)？

我已经尝试过使用 JsonPMediaTypeFormatter，但没有像样的结果。我只能阅读 ApiController，但 put、post 和 delete 不起作用。

有什么例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:18:32.413

您不能通过 JSONP 进行 POST。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T11:57:35.430

是的，在 github.com 网站上有一个例子，看看这个：

[https://github.com/telerik/kendo-examples-asp-net/](https://github.com/telerik/kendo-examples-asp-net/)

或者

[https://github.com/telerik/kendo-examples-asp-net/tree/master/grid-webapi-crud](https://github.com/telerik/kendo-examples-asp-net/tree/master/grid-webapi-crud)

这是 web api，您可以下载它 az zip 文件，然后将 web-api 程序集添加到它，它与 web-api 一起使用非常好。

你可以搜索一下你到底需要什么：

[https://github.com/telerik/kendo-examples-asp-net/commit/b6d70769fc226340e16a7fdb6da4329331f7927b](https://github.com/telerik/kendo-examples-asp-net/commit/b6d70769fc226340e16a7fdb6da4329331f7927b)

# ios - 创建第一个启动视图控制器

> ID：13835475
> 
> 赞同：0
> 
> 时间：2012-12-12T08:15:54.970
> 
> 标签：ios, objective-c, cocoa-touch, uiviewcontroller

我正在尝试创建一个“初始设置页面”，如果应用程序首次在设备上启动，则会显示该页面。

我是这样设计的：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    if ([[NSUserDefaults standardUserDefaults] boolForKey:@"HasLaunchedOnce"])
    {
        NSLog(@"not first launch");
        self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
        self.window.rootViewController = self.viewController;
        [self.window makeKeyAndVisible];
        return YES;

    }
    else
    {
        [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"HasLaunchedOnce"];
        [[NSUserDefaults standardUserDefaults] synchronize];

        NSLog(@"first launch");

    }
} 
```

现在，如果这是第一次启动应用程序，我想创建一个视图控制器并推送到该视图控制器。

我需要做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T08:22:02.253

创建一个新的视图控制器。导入文件中的头`appDelegate.h`文件还创建该类的实例变量 name `initialViewController`。

更改您的 else 条件，例如：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
   self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
   if ([[NSUserDefaults standardUserDefaults] boolForKey:@"HasLaunchedOnce"])
   {
       NSLog(@"not first launch");
       self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
       self.window.rootViewController = self.viewController;
   }
   else
   {
       [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"HasLaunchedOnce"];
       [[NSUserDefaults standardUserDefaults] synchronize];

       self.initialViewController = [[InitialViewController alloc] initWithNibName:@"InitialViewController" bundle:nil];
       self.window.rootViewController = self.InitialViewController;
       NSLog(@"first launch");
   }
   [self.window makeKeyAndVisible];
   return YES;
} 
```

# android - 如何在 Edittext 中显示默认键盘编号？

> ID：13835477
> 
> 赞同：0
> 
> 时间：2012-12-12T08:16:05.580
> 
> 标签：android

我想输入 EditText som 字符：android:digits="1234567890-_@#." 如果我不设置`inputType`键盘输入文本是默认的。

我想显示数字键盘显示默认值。但：

如果在 EditText 设计中，我设置：

```
 android:inputType="number" 
```

或者

```
android:inputType="phone" 
```

EditText 不显示键 (@,_) 如何`digits="1234567890-_@#."`在 Edittext 中显示默认键盘编号（允许输入）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T08:24:53.577

用这个 ：

```
 <EditText
            android:id="@+id/ed1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="" 
            android:inputType="number"
            android:digits="1234567890-_@#."/> 
```

它对我有用，并允许我插入这个字符“1234567890-_@#”。只要。

希望这会帮助你。

谢谢。

# jquery - 请求标头（接受）是否在请求之间保持不变？

> ID：13835479
> 
> 赞同：1
> 
> 时间：2012-12-12T08:16:09.283
> 
> 标签：jquery, request-headers

我知道“请求”组件应仅在该请求期间有效。因此，我的令人费解的问题。

考虑以下形式：

```
<form action="${requestUri}" id="someform">
    <!-- Leave out some really boring stuff that doesn't affect the question -->
    <input type="submit" id="ButtonA" value="Button A - Not AJAX"/>
    <input type="submit" id="ButtonB" value="Button B - AJAX" />
</form> 
```

它附加了以下jQuery`ButtonB`

```
<script type="text/javascript">
$(document).ready(function() {
    $("#ButtonB").click(function(){
        var options = {
            type: 'POST',
            async: false,
            dataType: 'json',
            success: function(data){
                //Do some Work
            },
            error: function(xhr, status, error) {
            }
        };
        $('#someform').ajaxForm(options);
    })
    }
</script> 
```

如果我按下`ButtonA`表单已成功提交并重新加载页面。如果我按下`ButtonB`AJAX 命令成功执行并且正确的更新反映在页面上。

然而。如果我按`ButtonB`然后按`ButtonA`，即使没有绑定到此按钮的“JSON”操作，`Accept Header`仍然会发送第二个请求。`application/json, text/javascript, */*; q=0.01`

`dataType`完成该功能后是否需要重置？

任何建议表示赞赏。

# ssas - 如何在 SSAS 2012（Sql Server 数据工具）的多维数据集浏览器中显示小计？

> ID：13835491
> 
> 赞同：0
> 
> 时间：2012-12-12T08:16:43.117
> 
> 标签：ssas, sql-server-2012, business-intelligence, cube, olap-cube

显然，此功能在以前的版本中可用，但现在已被删除。

有哪些替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:01:08.460

使用 excel 或 powerpivot 浏览多维数据集。在那里你可以更好地操纵它。

# xml - 想要使用 XSL/XML 创建表

> ID：13835502
> 
> 赞同：2
> 
> 时间：2012-12-12T08:18:02.247
> 
> 标签：xml, xslt

我正在尝试使用 XSL/XML 创建一个表。我是 XSL 和 XML 的新手，所以请放轻松我在一些事情上遇到了一些麻烦。这是我的 XML 文件：

```
<List>
<Classification>
    <Class>
        <Label>Milk</Label>
        <NumberZone>1</NumberZone>

        <Zone>
            <Label>Milk1</Label>
            <Frontier>500</Frontier>
        </Zone>

        <Zone>
            <Label>Milk2</Label>
            <Frontier>600</Frontier>
        </Zone>

        <Zone>
            <Label>Milk3</Label>
            <Frontier>600</Frontier>
        </Zone>

        <Zone>
            <Label>Milk4</Label>
            <Frontier>700</Frontier>
        </Zone>

        <image>
            <File>milk.jpg</File>
        </image>
    </Class>

    <Class>
        <Label>Water</Label>
        <NumberZone>2</NumberZone>

        <Zone>
            <Label>Water1</Label>
            <Frontier>800</Frontier>
        </Zone>

        <Zone>
            <Label>Water2</Label>
            <Frontier>900</Frontier>
        </Zone>

        <image>
            <File>water.jpg</File>
        </image>
    </Class>

    <Class>
        <Label>Juice</Label>
        <NumberZone>3</NumberZone>

        <Zone>
            <Label>Juice1</Label>
            <Frontier>950</Frontier>
        </Zone>

        <Zone>
            <Label>Juice2</Label>
            <Frontier>990</Frontier>
        </Zone>

        <image>
            <File>juice.jpg</File>
        </image>
    </Class>

</Classification>
</List> 
```

它通常更长，但我剪掉了一些部分。

我希望我的桌子看起来像这样：

*   第一栏：牛奶、水、果汁……
*   第二栏：我想要图片。
*   第三列：Milk1、Water1、Juice1。
*   第四列：Milk2、Water2、Juice2。
*   （等等）。

到目前为止，我有这个：

```
<table border="1">

 <tr><th>Column 1</th><th>Image</th><th>Column 3</th></tr>

        <xsl:for-each select="Classification/Class">
        <tr>
            <td><em><xsl:value-of select="Label" /></em></td>

            <td>
            <xsl:attribute name="src">
            <xsl:value-of select="image/File"/>
            </xsl:attribute>
            </td>

            <td><xsl:value-of select="Zone/Label"/></td>
            <td colspan="1"><xsl:value-of select="Zone/Label"/></td>
            <td colspan="1"><xsl:value-of select="Zone/Label"/></td>
            </tr>
        </xsl:for-each>
</table> 
```

*   这完美地显示了第一列与牛奶、水和果汁。
*   第二列不起作用，它只是空白。该图像不会出现在表格中，您知道如何解决这个问题吗？*
*   第三列也可以完美地显示 Milk1、Water1、Juice1。
*   显然，第四列不起作用，因为我使用的 value-of 与第三列中的相同。我不知道如何让 Milk2、Water2 和 Juice2 显示在该列中，因为它使用相同的元素名称（即区域/标签）

**所以我需要修复两件事：我需要修复第二列以实际显示每个框中的图像。我还需要修复第四列以显示 Milk2、Water2 和 Juice2。我现在的主要问题是让第四列工作，我真的不明白如何显示 Milk2、Water2 等。**

我还想稍后在每个单元格中添加单选按钮或复选框，以便我可以在我的网页中使用 JavaScript。我觉得每个框都需要不同的 ID，所以我不确定如何使用 XSL 来实现，因为它只是通过 XML 文件进行“循环”，所以我不确定如何添加单选按钮，或每个单元格中的复选框。* 这目前不那么重要，我会在我希望对我之前提到的内容有所帮助之后继续努力，但这也会有所帮助。

编辑：

我有两个问题。我设法通过执行以下操作添加复选框：

```
<td colspan="1"><input type="checkbox" name="Zone1" id="Zone1" /><xsl:value-of select="Zone[1]/Label"/></td>
<td colspan="1"><input type="checkbox" name="Zone2" id="Zone1" /><xsl:value-of select="Zone[2]/Label"/></td>
<td colspan="1"><input type="checkbox" name="Zone3" id="Zone1"/> <xsl:value-of select="Zone[3]/Label"/></td>
<td colspan="1"><input type="checkbox" name="Zone4" id="Zone1" /><xsl:value-of select="Zone[4]/Label"/></td> 
```

问题是，我认为每列中的每个元素都有相同的 ID，对吗？我如何更改它，以便他们都有不同的 ID？

此外，在我的问题中无法从 XML 文件中看到它，但稍后将只有例如 Milk4。这意味着我希望 Water4 和 Juice4 的单元格完全消失，但它仍然存在，并带有一个复选框。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T08:57:50.923

对于您的第二列，您正在执行此操作

```
<td>
   <xsl:attribute name="src">
   <xsl:value-of select="image/File"/>
   </xsl:attribute>
</td> 
```

但这会导致以下 HTML

```
<td src="milk.jpg" /> 
```

但是，您确实需要使用**img**标签来显示图像，因此请改用此方法。

```
<td>
   <img src="{image/File}" />
</td> 
```

至于第三列和第四列，可以添加一个xpath表达式来指定位置。

```
<xsl:value-of select="Zone[1]/Label"/>
<xsl:value-of select="Zone[2]/Label"/> 
```

实际上，为了避免一些代码重复，这里使用模板匹配可能会更好

```
 <xsl:apply-templates select="Zone[position() &lt; 3]" />

 <xsl:template match="Zone">
     <xsl:value-of select="Label"/>
 </xsl:template> 
```

如果你想扩展它来显示你的复选框，你可以做这样的事情

```
<xsl:template match="Zone">
   <xsl:variable name="index">
      <xsl:number />
   </xsl:variable>
   <input type="checkbox" name="Zone{$index}" id="Zone{$index}" />
   <xsl:value-of select="Label"/>
</xsl:template> 
```

请注意这是如何使用“属性值模板”来输出 id 的。花括号 { } 表示它是要计算的表达式，而不是字面输出。

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="/List">
      <table border="1">
         <tr>
            <th>Column 1</th>
            <th>Image</th>
            <th>Column 3</th>
         </tr>
         <xsl:for-each select="Classification/Class">
            <tr>
               <td>
                  <em>
                     <xsl:value-of select="Label"/>
                  </em>
               </td>
               <td>
                  <img src="{image/File}"/>
               </td>
               <td colspan="1"><xsl:apply-templates select="Zone[1]" /></td>
               <td colspan="1"><xsl:apply-templates select="Zone[2]" /></td>
               <td colspan="1"><xsl:apply-templates select="Zone[3]" /></td>
               <td colspan="1"><xsl:apply-templates select="Zone[4]" /></td>
            </tr>
         </xsl:for-each>
      </table>
   </xsl:template>

   <xsl:template match="Zone">
      <xsl:variable name="index">
         <xsl:number />
      </xsl:variable>
      <input type="checkbox" name="Zone{$index}" id="Zone{$index}" />
      <xsl:value-of select="Label"/>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容

```
<table border="1">
   <tr>
      <th>Column 1</th>
      <th>Image</th>
      <th>Column 3</th>
   </tr>
   <tr>
      <td>
         <em>Milk</em>
      </td>
      <td>
         <img src="milk.jpg"/>
      </td>
      <td colspan="1">
         <input type="checkbox" name="Zone1" id="Zone1"/>Milk1</td>
      <td colspan="1">
         <input type="checkbox" name="Zone2" id="Zone2"/>Milk2</td>
      <td colspan="1">
         <input type="checkbox" name="Zone3" id="Zone3"/>Milk3</td>
      <td colspan="1">
         <input type="checkbox" name="Zone4" id="Zone4"/>Milk4</td>
   </tr>
   <tr>
      <td>
         <em>Water</em>
      </td>
      <td>
         <img src="water.jpg"/>
      </td>
      <td colspan="1">
         <input type="checkbox" name="Zone1" id="Zone1"/>Water1</td>
      <td colspan="1">
         <input type="checkbox" name="Zone2" id="Zone2"/>Water2</td>
      <td colspan="1"/>
      <td colspan="1"/>
   </tr>
   <tr>
      <td>
         <em>Juice</em>
      </td>
      <td>
         <img src="juice.jpg"/>
      </td>
      <td colspan="1">
         <input type="checkbox" name="Zone1" id="Zone1"/>Juice1</td>
      <td colspan="1">
         <input type="checkbox" name="Zone2" id="Zone2"/>Juice2</td>
      <td colspan="1"/>
      <td colspan="1"/>
   </tr>
</table> 
```

# javascript - 如何将两个功能放在一个 onclick 属性中？XSLT

> ID：13835505
> 
> 赞同：1
> 
> 时间：2012-12-12T08:18:04.943
> 
> 标签：javascript

XML:

```
<CONTROLS>
        <BUTTON>
               <input name="myButton" onclick="existingFunction();"/>
        </BUTTON>
        <LABEL>
               Text ME
        </LABEL>

  </CONTROLS> 
```

XSLT：

```
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="input">
   <input onclick="{@onclick}newFunction();">
      <xsl:copy-of select="@*[not(name()='onclick')]"/>
   </input>
 </xsl:template>

</xsl:stylesheet> 
```

如何将两个函数放在一个 onclick 属性中？

结果：

```
<input onclick="existingFunction();newFunction();" name="myButton"/> 
```

它不工作。有没有其他方法可以合并这两个功能？

我不想将函数 2 放在函数 1 中。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:56:37.307

替代答案：

在 onClick 事件上调用 function3() .. 看起来像

```
function function3()
{
  function1();
  function2();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:23:16.277

像这样的东西对你有用吗？

```
onclick="function baz(){foo(); bar();} baz();"
// or
onclick="(foo(); bar(); baz(); derp(); ... )()"; 
```

# c# - 使用带格式的 ITextSharp 将 Gridview 导出为 PDF

> ID：13835506
> 
> 赞同：0
> 
> 时间：2012-12-12T08:18:07.837
> 
> 标签：c#, gridview, itext

我正在尝试使用 itextsharp 将设计精美的 gridview 导出为 pdf。导出工作正常，但它只导出单元格的内容。没有行来显示它的表格，没有背景颜色等。请我如何导出以便它带有在 C# 中查看的 gridview

# iphone - 无法使用 iOS 版 Facebook Graph API 获取公共事件

> ID：13835508
> 
> 赞同：0
> 
> 时间：2012-12-12T08:18:15.553
> 
> 标签：iphone, ios, facebook, facebook-graph-api

我可以登录、获取用户个人资料数据，甚至可以从公共页面的照片库中提取照片。问题是当我尝试使用以下方式访问页面的事件列表时：

```
graph.facebook.com/PAGE_ID/events 
```

返回的只是一个空白数组。

在`http://www.facebook.com/BeerLovesSouthside/events`您可以看到完整的事件列表。即使使用图形资源管理器工具，我也没有收到有关访问令牌或任何内容的任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:46:16.633

> 在[http://www.facebook.com/BeerLovesSouthside/events](http://www.facebook.com/BeerLovesSouthside/events)您可以看到完整的活动列表。

那是该页面*创建的事件。*

[https://developers.facebook.com/docs/reference/api/page/#connections](https://developers.facebook.com/docs/reference/api/page/#connections)说，

> events：主页**参加**的活动。

所以我想如果你想要页面*创建*的事件，你必须按类型从他们的提要中阅读相应的帖子。

# iphone - 如何在 ios uitableview（组表）中执行验证？

> ID：13835518
> 
> 赞同：0
> 
> 时间：2012-12-12T08:19:22.213
> 
> 标签：iphone, objective-c, ios, xcode, ios5

在我的应用程序中，我使用了 UItableview 组表。其中有两个部分，我想对其进行验证。

例如：在第 1 节中有两行，如果用户选择第一个用户必须从第 2 节中选择一些值，如果用户在第 1 节中选择了第二行，则不需要在第 2 节中选择。

以下是我的代码：

```
- (void)viewDidLoad
{
    NSArray *arr_data1 =[[NSArray alloc]initWithObjects:@"Yes",@"No",nil];
    NSArray *arr_data2 =[[NSArray alloc] initWithObjects:@"Monotherapy",@"Adjunctive",nil];

    NSDictionary *temp =[[NSDictionary alloc]
                         initWithObjectsAndKeys:arr_data1,@"",arr_data2,
                         @"Was it monotherapy or adjunctive",nil];
    self.tableContents =temp;
    self.arr_data =[[self.tableContents allKeys]
                      sortedArrayUsingSelector:@selector(compare:)];

    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [self.arr_data count];
}

-(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    return [self.arr_data objectAtIndex:section];
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSArray *listData =[self.tableContents objectForKey:
                        [self.arr_data objectAtIndex:section]];
    return [listData count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *SimpleTableIdentifier = @"SimpleTableIdentifier";

    NSArray *listData =[self.tableContents objectForKey:
                        [self.arr_data objectAtIndex:[indexPath section]]];

    UITableViewCell * cell = [tableView
                              dequeueReusableCellWithIdentifier: SimpleTableIdentifier];

    if(cell == nil) {

cell = [[UITableViewCell alloc]
             initWithStyle:UITableViewCellStyleDefault
             reuseIdentifier:SimpleTableIdentifier];

    }

NSUInteger row = [indexPath row];

cell.textLabel.text = [listData objectAtIndex:row];

return cell;

}

- (void)tableView:(UITableView *)tableView
didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    NSArray *listData =[self.tableContents objectForKey:
                        [self.arr_data objectAtIndex:[indexPath section]]];
    NSUInteger row = [indexPath row];
    NSLog(@"fdfdfdf=%d",[indexPath row]);
    NSString *rowValue = [listData objectAtIndex:row];

    if ([rowValue isEqualToString:@"Yes"])
    {
        NSString *message = [[NSString alloc] initWithFormat:@"%@",rowValue];
        UIAlertView *alert = [[UIAlertView alloc]
                              initWithTitle:@"You selected"
                              message:message delegate:nil
                              cancelButtonTitle:@"OK"
                              otherButtonTitles:nil];
        [alert show];
    }

    [tableView deselectRowAtIndexPath:indexPath animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T08:58:45.903

在 的`didselect`方法中`UITableView`，您需要检查节号然后检查从该节中单击了哪一行

```
 - (void)tableView:(UITableView *)tableView
    didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

       if (indexPath.section == 0)
    {
        if (indexPath.row == 0)
        {
         //do this
        }
        else if (indexPath.row == 1)
        {
         //do this
        }
    }
    else
    {
    //do this
    }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:39:50.200

您可以首先声明一个变量`count`来跟踪在第 2 节中选择了多少项目，并将`isItemRequired`其作为标志变量和`sythesize`它们，然后使用这些委托：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath

-(void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath 
```

一个示例代码开始：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    if(indexPath.section == 0)
    {
        if(indexPath.row == 0)
        {
            isItemRequired = YES;

            if(isItemRequired && count==0)
            {
                UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Item Required" message:@"You must have to select one or more item in section 2" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil ];

                [alert show];
            }

        }
        else
        {
            isItemRequired = NO;
        }

    }
    else if(indexPath.section == 1)
    {
        count = 0;

        for (int i=0; i < [tableView numberOfRowsInSection:1]; i++)
        {
          UITableViewCell *cell =  [tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:i inSection:1]];
          if(cell.selected==YES)
          {
              count++;
          }
        }

    }

}

-(void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath
{

    if(indexPath.section == 1)
    {
        count = 0;

        for (int i=0; i < [tableView numberOfRowsInSection:1]; i++)
        {
            UITableViewCell *cell =  [tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:i inSection:1]];
            if(cell.selected==YES)
            {
                count++;
            }
        }

        if(isItemRequired && count==0)
        {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Item Required" message:@"Atleast one item should be selected in section 2" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil ];

            [alert show];
        }

    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T08:56:15.840

```
In - (void)tableView:(UITableView *)tableView 
didSelectRowAtIndexPath:(NSIndexPath *)indexPath ,
you can check the section you need by using the following code:

- (void)tableView:(UITableView *)tableView 
  didSelectRowAtIndexPath:(NSIndexPath *)indexPath
 {
  if(indexPath.section == 0)
  {
   //do as per you requirement

  }
  else if(indexPath.section == 1)
  {
   //do as per you requirement

  }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T09:13:10.373

首先在文件中取一个`BOOL`变量，如下所示...`isYes``.h`

```
BOOL isYes; 
```

在`viewDidLoad:`方法之后只需将其分配给`NO`如下所示..

```
isYes = NO; 
```

之后在`didSelectRowAtIndexPath`委托方法中使用如下...

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
         if(indexPath.section == 0 && indexPath.row == 0)
         {
             isYes = YES;   
         }
         else if(indexPath.section == 0 && indexPath.row == 1)
         {
             isYes = NO;
         }
         if(isYes){
            if(indexPath.section == 1 )
            {
              //here user can select the section 2  
            }
         }
} 
```

我希望这对你有帮助....

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T09:00:06.943

在以下委托中

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

在委托返回的 indexPath 的帮助下添加一个检查，它会告诉你选择了哪个部分的哪一行：

```
if(indexPath.section == 0 && indexPath.row == 0)
{
 // Select something from the another section also
}
else if(indexPath.section == 0 && indexPath.row == 1)
{
 // No need to select from another section.
} 
```

# php - PHP 5 中的 java“super”关键字的等价物是什么？

> ID：13835520
> 
> 赞同：2
> 
> 时间：2012-12-12T08:19:25.130
> 
> 标签：php

我想要`extend`一个`class`: `class figure extends model_base { ... }`，并在类子类的构造函数中（这里是图）

我想打电话给它的父母`constructor`：在java中我们通过写来做到这一点`super(arguments);`

那么如何在 PHP 中调用父级的构造函数呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T08:21:11.867

所有你需要的是

```
<?php
class BaseClass {
   function __construct() {
       print "In BaseClass constructor\n";
   }
}

class SubClass extends BaseClass {
   function __construct() {
       parent::__construct(); // this will call your parent constructor
       print "In SubClass constructor\n";
   }
}

$obj = new BaseClass();
$obj = new SubClass();
?> 
```

请阅读：[构造函数和析构函数](http://php.net/manual/en/language.oop5.decon.php)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T08:21:22.600

```
parent::__construct($argument); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-12T08:22:05.747

它是PHP中的**父级**

```
Java - Super

PHP  - Parent 
```

# html - 页面顶部区域不可点击

> ID：13835524
> 
> 赞同：0
> 
> 时间：2012-12-12T08:19:34.703
> 
> 标签：html, css, hyperlink

这里有一个奇怪的问题......我网站标题的前 80 像素左右不可点击。前 80 像素中的任何元素都不会响应悬停事件或点击等。将链接放在该区域下方并带有顶部边缘或其他东西使其可点击。即使是徽标图像的上半部分也不能点击，而下半部分是。实在想不通为什么会这样。

网址位于[http://www.vapetropolis.ca](http://www.vapetropolis.ca)。

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:26:46.680

将来尝试发布带有特定代码示例的问题，以便将来的用户可以轻松查看发生了什么。

话虽这么说，看起来`<div class="cms-links">`覆盖了你所说的 80px。我使用检查器将其删除，问题就消失了。

# c++ - 在中间插入一个元素到向量中

> ID：13835525
> 
> 赞同：3
> 
> 时间：2012-12-12T08:19:37.900
> 
> 标签：c++, vector

有没有一种方法可以从向量中插入/删除元素，而不是以下..

1.  使用'push_back'的正式方法
2.  以这种方式使用 'find()'... find(v.begin(), v.end(), int)

我读过一些可以通过包容性插入/删除来实现中间插入的地方。

那么，真的有可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T08:22:44.033

您可以使用[std::vector::insert](http://www.cplusplus.com/reference/vector/vector/insert/)；但是，请注意，此操作是 O( [.size()](http://www.cplusplus.com/reference/vector/vector/size) )。如果您的代码需要经常在中间执行插入操作，您可能需要切换到链表结构。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T08:29:59.473

```
Is there an way of inserting/deleting an element from the vectors other than the following 
```

是的，您可以使用[std::vector::insert()](http://en.cppreference.com/w/cpp/container/vector/insert)在指定位置插入元素。

因为向量使用数组作为其底层存储，所以在向量末端以外的位置插入元素会导致容器将位置之后的所有元素移动到它们的新位置。与其他类型的序列容器（例如 std::list）为相同操作执行的操作相比，这通常是一种低效的操作。

`std::vector`是标准容器，您可以`STL algorithms`在其上应用标准。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T08:24:19.687

[vector::insert](http://www.cplusplus.com/reference/vector/vector/insert/)似乎是你想要的。

# html - 我的网站在 IE 中的定位是完全错误的

> ID：13835531
> 
> 赞同：0
> 
> 时间：2012-12-12T08:20:04.303
> 
> 标签：html, css, internet-explorer, positioning

有谁知道我的问题的解决方案或我应该在哪里寻找它的工作？我在一个网站（[http://www.awww.nl](http://www.awww.nl)）上工作，我按照我想要的方式获得了所有元素的定位......但是当我在 IE 中检查时，大部分定位都完全关闭了！

特别是在帖子页面上（例如：[http](http://awww.nl/superlieve-luiaard/) ://awww.nl/superlieve-luiaard/ ），设计在 IE 中一直向右移动（在我的 Imac 上的 chrome 中，一切都是正确的）和主页上的按钮添加图片消失。

我试图通过使用不同的 Doctypes 来修复它，但这没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:31:02.097

[您的网站正在以Quirks 模式](http://en.wikipedia.org/wiki/Quirks_mode)呈现，可能是因为文档类型错误。

我不认识您当前的文档类型：

```
<!DOCTYPE XHTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> 
```

您可以尝试将您的文档类型更改为：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

如果这不能解决它，然后添加到`<head>`标签：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

这应该将其呈现为可用的最高版本。但是，我建议您查找文档类型错误并修复它，因为它是原因的根源。

# ios - CGContextDrawImage 内存未释放

> ID：13835534
> 
> 赞同：2
> 
> 时间：2012-12-12T08:20:18.560
> 
> 标签：ios, memory, cgcontext

我正在使用[PhotoScrollerNetwork 项目](https://github.com/dhoerl/PhotoScrollerNetwork)为我的项目中的视图提供单个高分辨率图像并自动平铺它，因此可以正确管理内存。它使用此代码块将完整的高分辨率图像绘制到内存中，以便可以从中计算出图块。

```
-(void)drawImage:(CGImageRef)image {
       madvise(ims[0].map.addr, ims[0].map.mappedSize - ims[0].map.emptyTileRowSize, MADV_SEQUENTIAL);

       unsigned char *addr = ims[0].map.addr + ims[0].map.col0offset + ims[0].map.row0offset * ims[0].map.bytesPerRow;
       CGContextRef context = CGBitmapContextCreate(addr, ims[0].map.width, ims[0].map.height, bitsPerComponent, ims[0].map.bytesPerRow, colorSpace, kCGImageAlphaNoneSkipFirst | kCGBitmapByteOrder32Little);
       assert(context);
       CGContextSetBlendMode(context, kCGBlendModeCopy); // Apple uses this in QA1708
       CGRect rect = CGRectMake(0, 0, ims[0].map.width, ims[0].map.height);
       CGContextDrawImage(context, rect, image);
       CGContextRelease(context);

       madvise(ims[0].map.addr, ims[0].map.mappedSize - ims[0].map.emptyTileRowSize, MADV_FREE);
 } 
```

在`dealloc`类的方法中，ims被释放了（'free(ims)'），所以应该妥善处理。但是，如果我反复创建一个新视图（并因此调用 drawImage），我的记忆就会被填满。我发现如果我评论`CGContextDrawImage(context, rect, image);`，内存是好的，所以我认为内存中保留了一些东西，但我无法得到什么......总是调用dealloc方法，所以这不是问题。

编辑：我的图像也正确发布，这是完整的流程：

```
- (void)myFunc {
        CFDictionaryRef options = [self createOptions];
        CGImageRef image = CGImageSourceCreateImageAtIndex(imageSourcRef, 0, options);
        CFRelease(options);
        CFRelease(imageSourcRef);
        if (image) {
            [self decodeImage:image];
            CGImageRelease(image);
        }
}

- (void)decodeImage:(CGImageRef)image {
    assert(decoder == cgimageDecoder);

    size_t width = CGImageGetWidth(image);
    size_t height = CGImageGetHeight(image);

#if LEVELS_INIT == 0
    zoomLevels = [self zoomLevelsForSize:CGSizeMake(width, height)];
    ims = calloc(zoomLevels, sizeof(imageMemory));
#endif

    [self mapMemoryForIndex:0 width:width height:height];

    [self drawImage:image];
    [self createLevelsAndTile];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T13:44:08.960

运行本地 from-bundle 图像和网络图像，似乎任何重大泄漏都消失了。这适用于 iOS7 和 Xcode 5。

# asp.net-mvc-3 - 如何在 ActionLink 中包含书签/片段？

> ID：13835536
> 
> 赞同：12
> 
> 时间：2012-12-12T08:20:24.590
> 
> 标签：asp.net-mvc-3, razor, bookmarks, actionlink

> **可能重复：**
> [在 asp.net mvc Html.ActionLink 中包含锚标记](https://stackoverflow.com/questions/274586/including-an-anchor-tag-in-an-asp-net-mvc-html-actionlink)

编码 ：`@Html.ActionLink("Link", "Action", "Controller", new { id = Id } )`

目前我可以生成这样的链接：

> *[http://mywebsite/Controller/Action/Id](http://mywebsite/Controller/Action/Id)*

我想生成这样的链接：

> *[http://mywebsite/Controller/Action/Id#divId](http://mywebsite/Controller/Action/Id#divId)*

但我无法编辑路线/创建另一条路线。

什么是最好的解决方案？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-12T08:52:31.347

只需使用[`proper overload`](http://msdn.microsoft.com/en-us/library/dd460522%28v=vs.108%29.aspx)ActionLink 助手：

```
@Html.ActionLink(
    linkText: "Link",
    actionName: "Action",
    controllerName: "Controller",
    protocol: null,
    hostName: null,
    fragment: "divId",
    routeValues: new { id = Id },
    htmlAttributes: null
) 
```

将产生：

```
<a href="/Controller/Action/123#divId">Link</a> 
```

# spring - OPEN JPA find() 无法从我的数据库中检索实体的值

> ID：13835538
> 
> 赞同：0
> 
> 时间：2012-12-12T08:20:27.557
> 
> 标签：spring, jakarta-ee, openjpa, openjpa-maven-plugin

我在用户登录程序中遇到了一个奇怪的场景。

1.  插入记录..用户名密码等。
2.  使用merge()插入记录；
3.  然后关闭 IDE (Netbeans)
4.  打开 IDE Netbeans 然后启动服务器，启动数据库连接。
5.  打开登录浏览器。
6.  使用插入的记录登录。
7.  我的程序无法检测到桌子上的记录。

调试时，在 find() 之后它不会填充我的实体。也许还有另一个步骤来填充实体？

登录动作

```
package lotmovement.action;

import com.opensymphony.xwork2.ActionSupport;
import lotmovement.business.crud.RecordExistUserProfile;
import org.apache.commons.lang3.StringUtils;

public class LoginAction extends ActionSupport{

    private String userName;
    private RecordExistUserProfile recordExistUserProfile;

    private String password;

    @Override
    public void validate(){

        if(StringUtils.isEmpty(getUserName())){
            addFieldError("userName","Username must not be blanks.");

                }

        else{

            if(!recordExistUserProfile.checkrecordexist(getUserName())){
                addFieldError("userName","Username don't exist.");
            }

        }        

        if(StringUtils.isEmpty(getPassword())){
            addFieldError("password","Password must not be blanks.");
        }
        else{

         if(!recordExistUserProfile.CheckPasswordCorrect(getUserName(), getPassword())){
                addFieldError("userName","Password not correct");
            }

        }

    }

    public String execute(){

       return SUCCESS;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

      public String getUserName() {
        return userName;
    }

    public void setUserName(String userName) {
        this.userName = userName;
    }   

     public RecordExistUserProfile getRecordExistUserProfile() {
        return recordExistUserProfile;
    }

    public void setRecordExistUserProfile(RecordExistUserProfile recordExistUserProfile) {
        this.recordExistUserProfile = recordExistUserProfile;
    }

} 
```

验证程序

/* * 要更改此模板，请选择工具 | 模板 * 并在编辑器中打开模板。*/ 包 lotmovement.business.crud;

导入lotmovement.business.entity.UserProfile；

/** * * @author god-gavedmework */ public class RecordExistUserProfile {

```
private EntityStart entityStart;
private UserProfile userProfile;

public boolean checkrecordexist(String userId) {
    entityStart.StartDbaseConnection();
    entityStart.em.find(UserProfile.class, userId);

    if (userId.equals(userProfile.getUserId())) {
        return true;
    } else {
        return false;
    }
}

public boolean CheckPasswordCorrect(String userId, String password) {
    entityStart.StartDbaseConnection();

    entityStart.em.find(UserProfile.class, userId);

    if (password.equals(userProfile.getPassword())) {
        return true;
    } else {
        return false; ---> It will step here.
    }

}

public UserProfile getUserProfile() {
    return userProfile;
}

public void setUserProfile(UserProfile userProfile) {
    this.userProfile = userProfile;
}

public EntityStart getEntityStart() {
    return entityStart;
}

public void setEntityStart(EntityStart entityStart) {
    this.entityStart = entityStart;
} 
```

}

实体

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package lotmovement.business.entity;
import java.io.Serializable;
import javax.persistence.*;

/**
 *
 * @author god-gavedmework
 */

@Entity(name = "USERPROFILE") //Name of the entity
public class UserProfile implements Serializable{

    @Id //signifies the primary key
    @Column(name = "USER_ID", nullable = false,length = 20)

    private String userId;

    @Column(name = "PASSWORD", nullable = false,length = 20)
    private String password;

    @Column(name = "FIRST_NAME", nullable = false,length = 20)

    private String firstName;
    @Column(name = "LAST_NAME", nullable = false,length = 50)

    private String lastName;

    @Column(name = "SECURITY_LEVEL", nullable = false,length = 4)
    private int securityLevel; 

    @Version
    @Column(name = "LAST_UPDATED_TIME")
    private java.sql.Timestamp updatedTime;

    public String getUserId() {
        return userId;
    }

    public void setUserId(String userId) {
        this.userId = userId;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    public int getSecurityLevel() {
        return securityLevel;
    }

    public void setSecurityLevel(int securityLevel) {
        this.securityLevel = securityLevel;
    }

    public java.sql.Timestamp getUpdatedTime() {
        return updatedTime;
    }

    public void setUpdatedTime(java.sql.Timestamp updatedTime) {
        this.updatedTime = updatedTime;
    }

}

*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package lotmovement.business.crud;

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.EntityTransaction;
import javax.persistence.Persistence;
import lotmovement.business.entity.UserProfile;
import org.apache.openjpa.persistence.OpenJPAEntityManager;
import org.apache.openjpa.persistence.OpenJPAPersistence;

public class EntityStart {
     EntityManagerFactory factory;
     EntityManager em;

    public void StartDbaseConnection()
    {

        factory = Persistence.createEntityManagerFactory("LotMovementPU");
        em = factory.createEntityManager();

    }

    public void StartPopulateTransaction(Object entity){

        EntityTransaction userTransaction = em.getTransaction();

        userTransaction.begin();

        em.merge(entity);
        userTransaction.commit();

        em.close();

    }

    public void CloseDbaseConnection(){
        factory.close();
    }

} 
```

按照建议使用 Trace，这是 SQL 的日志

```
SELECT t0.LAST_UPDATED_TIME, t0.FIRST_NAME, t0.LAST_NAME, t0.PASSWORD, t0.SECURITY_LEVEL FROM USERPROFILE t0 WHERE t0.USER_ID = ? [params=(String) tok] 
```

这是记录：

```
USER_ID FIRST_NAME  LAST_NAME   PASSWORD    SECURITY_LEVEL  LAST_UPDATED_TIME
tok           1      1          1           1                  2012-12-13 08:46:48.802 
```

添加了 Persistence.XML

```
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="LotMovementPU" transaction-type="RESOURCE_LOCAL">
    <provider>org.apache.openjpa.persistence.PersistenceProviderImpl</provider>
    <non-jta-data-source/>
    <class>lotmovement.business.entity.UserProfile</class>
    <properties>
      <property name="openjpa.ConnectionURL" value="jdbc:derby://localhost:1527/LotMovementDBase"/>
      <property name="openjpa.ConnectionDriverName" value="org.apache.derby.jdbc.ClientDriver"/>
      <property name="openjpa.ConnectionUserName" value="toksis"/>
      <property name="openjpa.ConnectionPassword" value="bitoytoksis"/>
      <property name="openjpa.Log" value="SQL=TRACE"/>
      <property name="openjpa.ConnectionFactoryProperties" value="PrintParameters=true" />
    </properties>
  </persistence-unit>
</persistence> 
```

我发现了问题的根本原因。这是关于我如何在 Spring Plugin 中实例化类。

当我将 find() 语句更改为下面时，它现在可以工作了。

```
 UserProfile up = entityStart.em.find(UserProfile.class, "tok"); 
```

但是我怎样才能使用 Spring 初始化这个呢？下面的代码不起作用？

```
private UserProfile userProfile;

...... some codes here.

entityStart.em.find(UserProfile.class, userId);

  ..... getter setter 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T23:33:08.227

问题的根本原因。

entityStart.em.find(UserProfile.class, userId); --> 应该是

userProfile = entityStart.em.find(UserProfile.class, userId);

# jsf-2 - 带有richfaces 4的动态列

> ID：13835552
> 
> 赞同：5
> 
> 时间：2012-12-12T08:21:43.047
> 
> 标签：jsf-2, richfaces, servlet-3.0

我需要动态列数。Richfaces 在 Richfaces 3.3.3-final 中为其提供了它，`<rich:columns>`但对于 Richfaces 4，他们似乎推荐使用`<c:forEach>`.

**c:forEach**

我无法让它正常工作。由于我不能依赖数据表中的 var，所以我无法弄清楚如何`<c:forEach>`使用正确的列列表来提供数据。（每一行都有自己的值，但标题相同）

基本上我要显示的数据是一个 x 大小的行列表，每一行都有一个 y 大小的列值列表。但是如何`<c:forEach>`告诉支持 bean 它在哪一行，以便我可以提供正确的列？

**ui/a4j：重复**

我不想重新发明轮子，因为我需要冻结列和许多其他功能。已经考虑过以这种方式创建表格 html 并使用 jQuery 来实现其他功能。然而，这将是无望的维持和大量的工作。

我还研究了从支持 bean 动态创建子项来构建它，但我根本不喜欢那样。这必须是最后的手段。

使用：Tomcat 7、servlet 3.0、JSF 2.1x - Mojarra、Richfaces 4.x

**更新**

好的，所以我终于得到了一些结果。但是我的标题没有显示。这些值显示完美，但不显示标题。用迭代或其他东西做它们有什么问题吗？

```
 <rich:dataTable value="#{controller.rows}"
        var="row">
        <c:forEach items="#{controller.columns}" var="column">
            <rd:column id="name" width="250">
                <f:facet name="header">
                    <h:outputText value="#{row.myArrayList[column].header}" />
                </f:facet>
                <h:inputText value="#{row.myArrayList[column].value}"  disabled="#{row.myArrayList[column].open}"/>
            </rd:column>
        </c:forEach>
    </rich:dataTable> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T12:12:48.853

这`<c:forEach>`确实是你能得到的最好的。`<ui/a4j:repeat>`不会工作，因为它在视图渲染期间运行，而组件`UIData`确实需要`UIColumn`孩子，而不是`UIRepeat`孩子。

为了`<c:forEach>`让它工作，您需要向它提供所有属性名称的列表/映射（如果是映射，可能还有标题标签）。这是一个具体的启动示例，假设它`Item`具有 properties `id`，`name`并且返回 a具有这些属性名称。`value``#{bean.itemPropertyNames}``List<String>`

```
<rich:dataTable value="#{bean.items}" var="item">
    <c:forEach items="#{bean.itemPropertyNames}" var="itemPropertyName">
        <rich:column>
            #{item[itemPropertyName]}
        </rich:column> 
    </c:forEach>
</rich:dataTable> 
```

如果您还需要显示列标题，那么最好有一个`Map<String, String>`键代表属性名称，值代表标题值的位置。

```
<rich:dataTable value="#{bean.items}" var="item">
    <c:forEach items="#{bean.itemProperties}" var="itemProperty">
        <rich:column>
            <f:facet name="header">#{itemProperty.value}</f:facet>
            #{item[itemProperty.key]}
        </rich:column> 
    </c:forEach>
</rich:dataTable> 
```

无论哪种方式，唯一的缺点是此构造中的`#{bean}`of`<c:forEach items>`不能是视图范围的。除非您关闭部分状态保存，否则它将在每次请求时重新创建。它需要是一个请求范围的请求（或会话或应用程序）。请注意，它不一定需要与`<rich:dataTable value>`.

### 也可以看看：

*   [根据 hashmap 列表动态生成 h:column](https://stackoverflow.com/questions/13176842/dynamically-generate-hcolumn-based-on-list-of-hashmaps/13177299#13177299)

# pointers - Pascal 将递归更改为带指针的 while 循环

> ID：13835565
> 
> 赞同：0
> 
> 时间：2012-12-12T08:22:23.000
> 
> 标签：pointers, recursion, while-loop, pascal

嗨，我正在学习帕斯卡并测试一些函数
，我做了一个这样的递归插入过程。如果节点存在比较两个键，如果不存在，则为新节点腾出空间。

```
procedure INSERT (KEY : integer; var NODE : NODEPTR);
begin 
    if NODE = Nil then  
    begin
        New (NODE); 
        NODE^.KEY := KEY; 
        NODE^.LEFT  := Nil;
        NODE^.RIGHT  := Nil
    end
    else            
        if KEY < NODE^.KEY then
            INSERT (KEY, NODE^.LEFT)
        else
            INSERT (KEY, NODE^.RIGHT)   
end; 
```

我想要做的是将递归函数更改为while循环。所以我做了这样的过程，
如果节点存在做while循环，直到节点为空。在while循环结束后，创建一个新节点

```
procedure INSERT (KEY : integer; var NODE : NODEPTR);
begin 
    while NODE <> nil do
    begin
        if KEY < NODE^.KEY then
            NODE:=NODE^.LEFT
        else
            NODE:=NODE^.RIGHT
    end;

    New (NODE); 
    NODE^.KEY := KEY; 
    NODE^.LEFT  := Nil;
    NODE^.RIGHT  := Nil

end; 
```

当第一个节点是根节点时，while 循环为 true 并执行此代码，但此后，while 循环变为 false 并创建一个新节点。

```
 if KEY < NODE^.KEY then
            NODE:=NODE^.LEFT
        else
            NODE:=NODE^.RIGHT 
```

最终没有节点连接，这个程序只是不断地创建新节点。
有什么我错过的吗？或者关于第二个代码的任何即兴创作？提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:50:30.340

您错过的事情是您永远不会链接节点（并且在当前设置中，您实际上无法链接节点）。您的记录中有节点的左右节点的字段，但您没有分配它们。因此，您最终只是创建节点而没有将它们链接起来；您有一个缺少链接的链接列表。

在某一时刻，您将需要类似于`NODE^.RIGHT := NEWNODE`（或`NODE^.LEFT := NEWNODE`，当然）的东西。

你需要一些东西（我的 Pascal 有点生疏，所以要小心语法错误；））：

```
 procedure INSERT(key: Integer; var NODE: NODEPTR)
    begin
        NODEPTR root := NODE;
        if (key < root^.KEY) then begin
            while (root^.LEFT <> nil) do begin
                root := root^.LEFT;
            end;
            new(NODE);
            NODE^.KEY := key;
            root^.LEFT := NODE;
            node^.RIGHT := root;
        end else begin
            while (root^.Right <> nil) do begin
                root^ := root^.RIGHT;
            end;
            new(NODE);
            NODE^.KEY := key;
            root^.RIGHT := NODE;
            NODE^.LEFT := root;
        end;
    end; 
```

上面的例子有很多改进和美化，但我认为它显示了总体思路。

# php - HTML/PHP 将值存储在表中，保存到数据库并稍后显示

> ID：13835567
> 
> 赞同：0
> 
> 时间：2012-12-12T08:22:26.187
> 
> 标签：php, html, mysql, database

我是新手，正在尝试为一个项目制作一个简单的网站。我必须翻页、添加和查看爱好。用户需要能够添加 1 个或多个爱好并将其存储在数据库中并在另一个页面中检索它，我在下面列出了我计划做的事情。

***如何使我能够在数据库中存储用户的多个爱好？***

使用 MySQL、HTML、PHP、Dreamweaver

假设：用户已创建，用户已登录，所有用户相关的数据库编码已完成。存在超过 1 个用户，所有用户每个人都有一些爱好。

**数据库**
用户表：UserId、用户名、HobbyId
爱好表：HobbyId、HobbyName、HobbyDaysAWeek

1 个用户可以有 0 个或多个爱好。

**添加爱好页面** 

*   下拉列表（从爱好表绑定爱好列表）
*   文本框（供用户输入他每周花多少天从事该爱好）
*   添加按钮（在下拉列表和表格中的文本框中显示值）
*   表（Hobby 和 daysAWeek 将显示在这里，带有删除图标用于删除它）
*   提交按钮（将爱好和每周的天数和用户名保存到数据库中）

**查看爱好页面** 

*   在表格中显示用户的爱好和每周的天数。

感谢您的帮助！并且请提供简单且最低限度的编码，因为我是新手！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:37:04.013

好吧，没有人发布答案，但我的问题在评论中得到了回答，所以..

首先添加带有 UserId 和 HobbyId 的第三个表 – Dagon

您正在存储之间的关系，而不是关系。所以把它想象成你有两件事，你想记住它们是相关的。因此，一个包含两列的表，一列具有一个部分的标识符，另一列具有另一部分的标识符 (ID)。将它们与每个部分的数据结合在一起，您就有了信息。因此，您已经存储了关系。这就像元数据，真的。它通常非常有效。- 贾里德法瑞什

多谢你们！

# ios - 背景图像在 cocos2d 中无法正确滚动

> ID：13835568
> 
> 赞同：1
> 
> 时间：2012-12-12T08:22:27.717
> 
> 标签：ios, cocos2d-iphone, xcode4.5

我编写了在游戏背景中滚动图像的代码。只需定义两个精灵并设置它们的位置。

```
CGSize screenSize=[[CCDirector sharedDirector]winSize];

sky1 = [CCSprite spriteWithFile:@"sky1.png"];

sky1.position=ccp(screenSize.width/2, screenSize.height/2);
[self addChild:sky1];
CCLOG(@"sky1 position  width=%f    height=%f",sky1.position.x,sky1.position.y);
sky2=[CCSprite spriteWithFile:@"sky2.png"];
sky2.position=ccp(screenSize.width/2, sky1.position.y+sky1.contentSize.height/2+sky2.contentSize.height/2);
[self addChild:sky2];
[self schedule:@selector(scroll:) interval:0.01f]; 
```

并在 scroll 方法中编写滚动代码：

```
-(void)scroll:(ccTime)delta{
    CGSize screen=[[CCDirector sharedDirector] winSize];
    CCLOG(@"come from schedule method    pos.y=%f",sky1.position.y);
    sky1.position=ccp(sky1.position.x, sky1.position.y-1);
    sky2.position=ccp(sky2.position.x, sky2.position.y-1);
    if(sky1.position.y <= -([sky1 boundingBox].size.height));
    {
         sky1.position=ccp(sky1.position.x, sky2.position.y+[sky2 boundingBox].size.height);

        CCLOG(@"COMING IN first ifin scroll mwthod  position width=%f  pos.y=%f",sky1.position.x,sky1.position.y);
    }
    if(sky2.position.y<= -[sky2 boundingBox].size.height);
    {
        sky2.position=ccp(sky2.position.x, sky1.position.y+[sky1 boundingBox].size.height);
        CCLOG(@"coming in secnond if ");
    }
} 
```

当我删除`if`条件时，它会正常工作一次。我不知道我的情况有什么问题，也不知道我的代码到底发生了什么。谁能解释一下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:00:05.690

我不太确定为什么您的代码无法正常工作。我脑海中闪现的一个想法是你的间隔可能太短了。换句话说，0.01f (1/100) 比你的游戏更新速度更短，很可能是 0.016 (1/60)。所以我要尝试的第一件事是将你的间隔调整到 0.02f。您还可以从调度调用中删除间隔参数，以便它每帧只运行一次。我也会尝试删除 ccTime 参数，因为它没有被使用。

```
[self schedule:@selector(scroll)];

-(void)scroll {} 
```

但除此之外，这可能最好使用 CCActions 处理。这看起来像是一对简单的 CCMoveTo 动作与 CCRepeatForever 组合以获得您想要的效果。这就是我要走的路。

编辑：这里有更多关于使用 CCActions 来完成这个的细节。有多种方法可以做同样的事情，但您可以尝试以下一种方法：

```
float moveDuration = 3; // or however fast you want it to scroll
CGPoint initialPosition = ccp(screenSize.width/2, screenSize.height/2);
CGPoint dp = ccp(0, -1*sky1.contentSize.height); // how far you want it to scroll down
CCMoveBy *scrollSky1 = [CCMoveBy actionWithDuration:moveDuration position:dp];
CCMoveTo *resetSky1 = [CCMoveTo actionWithDuration:0 position:initialPosition];
CCSequence *sequence = [CCSequence actionOne:scrollSky1 two:resetSky1];
CCRepeatForever *repeat = [CCRepeatForever actionWithAction:sequence];
[sky1 runAction:repeat]; 
```

# java - 有没有办法从 .properties 文件设置休眠目录？

> ID：13835573
> 
> 赞同：0
> 
> 时间：2012-12-12T08:22:51.480
> 
> 标签：java, spring, hibernate

我有一个 java/spring/hibernate 项目，它在同一数据库服务器上使用两个不同的模式（第二个模式是只读的）。我设置了一个定义两个模式名称的 database.properties 文件：

```
default.catalog=testdb1
db2.catalog=testdb2 
```

在 ApplicationContext.xml 中，我可以从属性文件中设置默认模式，如下所示：

```
<property name="hibernateProperties"><props>
        <prop key="hibernate.dialect">org.hibernate.dialect.MySQLInnoDBDialect</prop>
        <prop key="hibernate.default_catalog">${default.catalog}</prop>
        <prop key="hibernate.jdbc.batch_size">50</prop>
    </props> 
```

但问题是我目前有一些需要访问这两种模式的休眠对象。为了实现这一点，我使用了“目录”属性将第二个模式定义为休眠映射，如下所示：

DBObjectXX.hbm.xml

```
<class name="fi.company.project.object.DBObjectXX" table="TestTableFromDB1">
    <id name="id" type="int">
        <column name="ID"/>
        <generator class="native"/>
    </id>
<join table="TestTableFromDB2" catalog="testdb2"> <-- Change this ..
            <key column="ID" not-null="true" unique="true"/>
            <property name="propertyYY" type="string">
                <column name="PropertyYY" not-null="true"/>
            </property>
</join>
</class> 
```

这工作正常。但是我时不时需要更改模式名称（例如在测试中），我必须通过搜索和替换每个映射文件来做到这一点。我想做的是让模式名称来自 database.properties 文件，如下所示：

```
<class name="fi.company.project.object.DBObjectXX" table="TestTableFromDB1">
    <id name="id" type="int">
        <column name="ID"/>
        <generator class="native"/>
    </id>
<join table="TestTableFromDB2" catalog="${db2.catalog}"> <-- .. to this or something similar
            <key column="ID" not-null="true" unique="true"/>
            <property name="propertyYY" type="string">
                <column name="PropertyYY" not-null="true"/>
            </property>
</join>
</class> 
```

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T02:38:05.790

不幸的是，您不能拥有具有两个不同模式的相同 SessionFactory。在其他选项中，您必须使用两个 SessionFactories。

我也不明白为什么你不能使用两个不同的 SessionFactories 如果你可以有两个不同的模式。

如果这是真的，那么伙计，你需要认真重新考虑你的应用程序设计和架构......

# objective-c - 不能无效，停止倒计时 NSTimer - Objective C

> ID：13835575
> 
> 赞同：0
> 
> 时间：2012-12-12T08:23:05.577
> 
> 标签：objective-c, ios, nstimer, xcode4.5, invalidation

问题是停止 NSTimer，由于某种原因 [Timer invalidate] 只是不工作......

可能我的眼睛里全是肥皂，但是不明白为什么定时器没有停在0，而是倒数-1、-2、-3等等……(((

我使用纪元数字作为目的地日期。还有一件事-我的带有[Timer invalidate]的按钮“IBAction stop”工作得很好-当我在模拟器中按下它时计时器停止...

```
@implementation ViewController

- (void)viewDidLoad
{
[super viewDidLoad];

Timer = [NSTimer  scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(updateLabel) userInfo:nil repeats:YES];

}

- (IBAction) start {

Timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(updateLabel) userInfo:nil repeats:YES];

}
- (IBAction) stop {

[Timer invalidate];
Timer = nil;

}

-(void)updateLabel {

NSCalendar *calender = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
int units = NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit;
NSDateComponents *components = [calender components:units fromDate:[NSDate date] toDate:destinationDate options:0];
[dateLabel setText:[NSString stringWithFormat:@"%d%c  %d%c  %d%c  %d%c", [components day], 'd', [components hour], 'h', [components minute], 'm', [components second], 's']];

destinationDate = [NSDate dateWithTimeIntervalSince1970:1355299710];

if (!destinationDate) {

    [Timer invalidate];
    Timer = nil;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:37:59.640

正如 Totumus 所指出的，您的`if`语句条件`!destinationDate`始终评估为 false，因此您的`updateLabel`方法永远不会使您的计时器无效。

您还有另一个错误：

您正在创建一个计时器`viewDidLoad`并将对它的引用存储在您的`Timer`实例变量中。

然后，您将在其中创建*另一个*计时器`start`并将对它的引用存储在您的`Timer`实例变量中，覆盖对您创建的计时器的引用，`viewDidLoad`而不会使旧计时器无效。

因此，现在您有两个计时器正在运行，但您没有对旧计时器的引用，因此您永远不能使其无效。

请注意，运行循环对计划（运行）计时器有强引用，因此即使您删除了对它的所有强引用，计时器也会继续运行。这就是`invalidate`消息存在的原因：告诉运行循环删除其对计时器的强引用。

# ios - 是否允许在 UILabel 的下拉列表中列出自定义字体？

> ID：13835576
> 
> 赞同：1
> 
> 时间：2012-12-12T08:23:07.707
> 
> 标签：ios, fonts, uilabel

我加载了 2 个自定义字体 (.otf) 并将它们放在应用程序的 plist 文件中，检查以确保它们在摘要 | 构建阶段 | 复制捆绑资源部分。

在情节提要中添加 UILabel 时，我在下拉菜单中看不到该字体。

所有的标签是否***只***需要以编程方式完成？例如：

```
UILabel *myLabel;
[myLabel setText:@"Some Text"];
[myLabel setFont:[UIFont fontWithName:@"Gloucester MT Extra Condensed" size:24.0]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:37:14.710

到目前为止，是的，就是这样。如果您在标签上使用富文本而不是纯文本，它们会显示出来，但它们不会在旅途中幸存下来。

# symfony - 在 Symfony2 的删除表单中添加“确认选项”的最佳方法是什么？

> ID：13835579
> 
> 赞同：5
> 
> 时间：2012-12-12T08:23:15.767
> 
> 标签：symfony, controller, crud, confirm

如果您使用控制台为 Symfony2 中的实体创建 CRUD 代码，您最终将得到一个非常基本的删除功能。

此功能简洁高效，但不提供“您确定吗？”-确认。如果要删除的实体存在，将立即删除。

有人对添加用户确认的最简单方法有建议吗？

到目前为止，我一直在使用：

*   额外的控制器功能
*   jQuery

虽然 Symfony2 没有内置选项，但这似乎有点奇怪。有更好的想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-08-11T12:44:49.890

您还可以使用附加属性呈现表单的基本删除字段：

*在你的树枝模板里面：*

```
{{ form(delete_form, {'attr': {'onclick': 'return confirm("Are you sure?")'}}) }} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-14T02:52:55.270

只需在删除链接上使用确认 javascript 功能

```
<a href="{{ path('delete_route', {csrf:...}) }}" onclick="return confirm('are u sure?')">delete</a> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-10-16T17:45:16.850

一个问题：

`{{ form(delete_form, {'attr': {'onclick': 'return confirm("Are you sure?")'}}) }}`

是否会导致弹出双重确认框。更好的解决方案是将它放在deleteForm上的控制器内......

```
private function createDeleteForm($id)
{
    return $this->createFormBuilder()
        ->setAction($this->generateUrl('my_controller_delete', array('id' => $id)))
        ->setMethod('DELETE')
        ->add('submit', 'submit', array('label' => 'Delete',
                'attr' => array(
                        'onclick' => 'return confirm("Are you sure?")'
                )))
        ->getForm();
} 
```

然后onclick功能在按钮而不是表单上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-30T16:34:09.083

一个轻量级的解决方案是实际显示您的表单两次：首先，用户填写所有字段。然后我们认识到它还没有被确认，所以我们重新渲染它。这次 javascript 立即显示确认对话框。

为此，我们`confirmed`在表单中添加了一个隐藏字段，并在树枝渲染中添加了一个参数：

```
$builder = $this->createFormBuilder(...);
$builder->add('confirmed', HiddenType::class, ['mapped' => false]);

$form = $builder->getForm();
$form->handleRequest($request);
if ($form->isSubmitted() && $form->isValid()) {

    if($form->get('confirmed')->getData() != true) { 
        // re-render with confirmation flag set
        return $this->render('default/form.html.twig', [
             'form' => $form->createView(),
             'confirm' => true]);
    }
} else {
    return $this->render('default/form.html.twig', [
         'form' => $form->createView(),
         'confirm' => false]);
} 
```

并在您的模板中添加一个 javascript，例如：

```
{{ form_start(form) }}
{{ form_widget(form) }}
{{ form_end(form) }}

<script>
$(document).ready(function () {
    var c = confirm('Really sure?');
    if(c) {
        $('#form_confirmed').val(true);
        $('form')[0].submit();

    }
});
</script> 
```

# playframework - 为 SBT 和 Play Framework 2.1 编译的 Javascript 类文件在哪里找到它们？

> ID：13835581
> 
> 赞同：1
> 
> 时间：2012-12-12T08:23:21.880
> 
> 标签：playframework, sbt, rhino, playframework-2.1

我应该将我编译的（通过 Rhino）Javascript 类放在哪里，以便在编译期间将它们包含在类路径中，并包含在生成的 `dist`包中？

Play Framework 2.1-RC1 + SBT 会忽略它们，有时在编译期间，有时在生成 dist 包时。

### 1\. 将生成的文件放入`classes/`或`classes_managed/`

如果我将生成的 .class 文件放在此处或此处：
`target/scala-2.10/classes/` `target/scala-2.10/classes_managed/`

然后`compile`工作`run`正常。但是一些奇怪的编译步骤（什么？！）期间`stage`失败`dist`了：它不会找到编译的类。

### 2\. 将类放在专用目录中

如果我将生成的 .class 文件放在这里： `target/scala-2.10/compiledjs-classes/`

并在 SBT 的配置中添加一个类路径条目：

```
object ApplicationBuild extends Build {
  ...
  def mainSettings = List(
    ...,
    unmanagedClasspath in Compile <+= (baseDirectory) map { bd =>
      Attributed.blank(bd / "target/scala-2.10/compiledjs-classes")
    },
    ...) 
```

然后`compile`, `run`,`stage`并且`dist`工作正常。然而！当我解压缩并启动生成的 .zip 文件（通过 生成`dist`）时，应用程序在运行时失败，因为已编译的 Javascript 类不包含在 .zip 中。

### 3\. 将类放在 lib/ 文件夹中

然后`compile`就找不到类文件了。（我放置了例如类`compiledjs.HtmlSanitizerJs`。 `lib/compiledjs/HtmlSanitizerJs.class`）

* * *

我应该做些什么？我的意思是，什么是有效的，什么是最佳实践？

无论如何，现在我正在将生成的类复制到
`target/scala-2.10/compiledjs-classes/`（因此编译工作）和
`target/scala-2.10/classes/`（因此它们包含在生成的.zip 中）
这工作，但感觉非常错误。

（（奇怪的是，在旧版本的 Play Framework（早于 RC-1）*和*当我使用 PlayProject 而不是 play.Project 时，一切正常。然后我将生成的类保存在`target/scala-2.10/classes/`, 中。））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:45:04.187

我找不到将类文件放入舞台任务中的罐子的方法。作为一种解决方法，我在舞台上生成一个 JAR 文件，并在运行时将类路径设置为基本文件夹中的“rhino”文件夹。

我为您创建了一个要点，因此您可以查看并尝试：[https](https://gist.github.com/4321216) : //gist.github.com/4321216 rhino/so/Example.class 表示一个 Rhino 类，但它只是一个返回字符串的 Java 类。

添加你的 Build.scala：

```
 val rhinoJarName = "rhino.jar"
  val folderForRhinoJar = unmanagedBase
  val rhinoClasspath = (baseDirectory) map { base => Attributed.blank(base / "rhino")}
  val rhinoClassesToJar = TaskKey[Unit]("rhino-classes-to-jar")
  val rhinoClassesToJarInitializer = (base: File, folderForJar: File) => {
    val rhinoFolder = new File(base, "rhino")
    val isClassFile = (file: File) => file.getName.endsWith("class")
    val classFiles =  rhinoFolder.***.filter(isClassFile).get
    val sources = classFiles map { file =>
      file -> file.getCanonicalPath.drop(rhinoFolder.getCanonicalPath.length + 1)
    }
    IO.jar(sources, folderForJar / rhinoJarName, new java.util.jar.Manifest())
  }

  val main = play.Project(appName, appVersion, appDependencies).settings(
    unmanagedClasspath in Compile <+= rhinoClasspath,
    unmanagedClasspath in Runtime <+= rhinoClasspath,
    rhinoClassesToJar <<= (baseDirectory, folderForRhinoJar) map rhinoClassesToJarInitializer,
    playStage <<= playStage.dependsOn(rhinoClassesToJar),
    playStage <<= (playStage, folderForRhinoJar) map {(unused, folder) =>
      IO.delete(folder / rhinoJarName)
    },
    cleanFiles <+= folderForRhinoJar { _ / rhinoJarName } //make sure jar will be deleted if play stage does not finish and cleanup jar
  ) 
```

# objective-c - 在 Objective-C 中封装 C API

> ID：13835584
> 
> 赞同：0
> 
> 时间：2012-12-12T08:23:35.517
> 
> 标签：objective-c, c, memory-management

我试图在 Objective-C 中包装一个 C API，但在 objc_release 中得到 EXC_BAD_ACCESS。

字段.h：

```
#ifdef __cplusplus
extern "C" {
#endif

struct sc_field
{
    char *title;
};

typedef struct sc_field sc_field_t;

sc_field_t* sc_create_field();
void sc_destroy_field(sc_field_t *field);
const char* sc_get_title(const sc_field_t *field);
void sc_set_title(sc_field_t *field, const char *title);

#ifdef __cplusplus
}

#include <string>

class Field
{
public:
    explicit Field();
    virtual ~Field();

    std::string title() const;
    void setTitle(const std::string &title);

private:
    class Private;
    Private *d;
}; 
```

字段.c：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "Field.h"

sc_field_t* sc_create_field()
{
    sc_field_t *field = (sc_field_t*)malloc(sizeof(sc_field_t));
    field->title = (char*)calloc(1, sizeof(char));
    return field;
}

void sc_destroy_field(sc_field_t *field)
{
    if (field)
    {
        free(field->title);
        free(field);
    }
}

const char* sc_get_title(const sc_field_t *field)
{
    if (!field)
    {
        fprintf(stderr, "%s: fatal error, field is NULL\n", __FUNCTION__);
        return NULL;
    }

    return field->title;
}

void sc_set_title(sc_field_t *field, const char *title)
{
    if (!field)
    {
        fprintf(stderr, "%s: fatal error, field is NULL\n", __FUNCTION__);
        return;
    }

    field->title = (char*)realloc(field->title, sizeof(char) * sizeof(title));
    strcpy(field->title, title);
} 
```

SCField.h：

```
#import "Field.h"
#import <Foundation/Foundation.h>

@interface SCField : NSObject
{
@private
    sc_field_t *field;
}

@property (nonatomic, copy) NSString *title;

- (id)init;
- (id)initWithTitle:(NSString *)title;
- (void)dealloc;

@end 
```

SCField.m:

```
#import "SCField.h"

@implementation SCField

@synthesize title;

- (id)init
{
    self = [super init];
    if (self)
    {
        field = sc_create_field();
    }

    return self;
}

- (id)initWithTitle:(NSString *)aTitle
{
    self = [self init];
    if (self)
    {
        [self setTitle:aTitle];
    }

    return self;
}

- (void)dealloc
{
    sc_destroy_field(field);
    [super dealloc];
}

- (NSString *)title
{
    return [NSString stringWithUTF8String:sc_get_title(field)];
}

- (void)setTitle:(NSString *)aTitle
{
    sc_set_title(field, [aTitle UTF8String]);
}

@end 
```

测试：

```
SCField *field = [[SCField alloc] initWithTitle:@"Hello world!"];
NSLog(@"%@\n", [field title]);
[field release]; 
```

在我发布我的 SCField 实例之前，代码似乎工作正常。如果我删除标题和 setTitle: 实现，就好像我直接在 SCField 中存储一个 NSString* 代码工作正常（我也尝试在 @property 中分配而不是复制 - 不走运）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T09:08:49.407

我认为问题在于调用[UTF8String](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/UTF8String)会给你自动释放的内存（根据文档）。

而不是使用`realloc()`in `sc_set_title()`，只是`malloc()`一个新的缓冲区并复制它。此外，`realloc()`无论如何，您的参数都不正确，因此它可能最终成为无操作。你需要分配`strlen(title) + 1`；sizeof 不会为您做任何事情，因为您只是要求编译器给您 1 ( `sizeof(char)`) * 4 个字节（`sizeof(title)`- 一个指针）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:16:00.057

使用`getCString:maxLength:encoding:`. 要获取缓冲区的字符串长度（以字节为单位），请使用`lengthOfBytesUsingEncoding:`(takes *O(n)* time) 或`maximumLengthOfBytesUsingEncoding:`(takes *O(1)* time)。

# ios - 自定义 UIStoryboardPopoverSegue 在 iOS 5.1 下无法工作

> ID：13835585
> 
> 赞同：0
> 
> 时间：2012-12-12T08:23:42.157
> 
> 标签：ios, uistoryboardsegue

我已经实现了一个自定义故事板 segue，它在 iOS 6 下运行良好，但在 iOS 5.1 下的模拟器中没有任何反应。问题是在iOS 5.1下popoverController总是nil？！

```
@implementation PopoverFromRectSegue  

-(id)initWithIdentifier:(NSString *)identifier
             source:(UIViewController *)source
        destination:(UIViewController *)destination {

  if(self = [super initWithIdentifier:identifier
                             source:source
                        destination:destination]) {
  }

  return self;
}

- (void)perform {
    UIPopoverController *popCtrl = ((UIStoryboardPopoverSegue *)self).popoverController;

    id controller = [self sourceViewController];
    if ([controller isKindOfClass:[UIViewController class]] && [controller respondsToSelector:@selector(popoverRect)]) {
    [popCtrl presentPopoverFromRect:[[controller performSelector:@selector(popoverRect)] CGRectValue] inView:[controller view] permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
  }
}
@end 
```

任何帮助/提示表示赞赏。

编辑：刚刚制作了新的示例项目。似乎在 iOS5.1 下没有为自定义 UIStoryBoardSegues 设置 popoverController。我还可以做些什么。正常的弹出框需要一个锚点，但不接受原型 tableView 单元格（编译期间失败），我找不到修改弹出框所在的矩形的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:04:57.230

这是我的解决方法。
**PopoverFromRectSegue.h**

```
@interface PopoverFromRectSegue : UIStoryboardPopoverSegue
  @property (strong, nonatomic) UIPopoverController *popoverCtrl;
@end 
```

**PopoverRectFromSegue.m**

```
#import "PopoverFromRectSegue.h"
@implementation PopoverFromRectSegue

- (void)perform
{
  UIPopoverController *popCtrl = ((UIStoryboardPopoverSegue *)self).popoverController;

  // under iOS 5.1 the popoverController iVar is not set
  // so we have to use our own one
  if (nil == popCtrl) {
    popCtrl = self.popoverCtrl;
  }

  id controller = [self sourceViewController];
  if ([controller isKindOfClass:[UIViewController class]] && [controller respondsToSelector:@selector(popoverRect)]) {
    [popCtrl presentPopoverFromRect:[[controller performSelector:@selector(popoverRect)] CGRectValue] inView:[controller view] permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
  }
}

@end 
```

在我的 prepareForSegue 方法中，我执行以下操作。

```
 if (isPad) {
      self.popoverCtrl = [(UIStoryboardPopoverSegue *)segue popoverController];
      if (nil == _popoverCtrl) {
        self.popoverCtrl = [[UIPopoverController alloc] initWithContentViewController:[segue destinationViewController]];
        ((PopoverFromRectSegue *)segue).popoverCtrl = _popoverCtrl;
      }
      self.popoverRect = [NSValue valueWithCGRect:[self.myTableView rectForRowAtIndexPath:indexPath]];
  } 
```

# java - 将数据从 java 发送到 JasperReports 子数据集

> ID：13835589
> 
> 赞同：0
> 
> 时间：2012-12-12T08:24:09.750
> 
> 标签：java, dataset, jasper-reports

我正在尝试使用Java调用许多用jasper制作的报告，我可以调用jasper并将数据提供给主数据集但是当我需要制作一些不同的数据集以在报告中有不同的表时，我不知道如何可以将数据发送到那里。它可以为这些数据集提供数据吗？如果可能的话。为什么我可以使用 java 将数据提供给 jasper 的子数据集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:24:57.673

如果要将数据从主报表发送到数据集/子报表，您已经发送到主报表作为数据源的数据，为什么不使用`REPORT_DATA_SOURCE`主报表通过数据集/子报表的连接表达式发送呢？范围？

# c++ - Xcode 中的单元测试 C++ 代码

> ID：13835591
> 
> 赞同：2
> 
> 时间：2012-12-12T08:24:15.227
> 
> 标签：c++, ios, xcode, unit-testing, octest

我正在为 Objective-C 代码使用 OCTest。OCTest 是否支持 C++？如何为 C++ 类编写测试？

# git - git 如何放弃 .git 目录中的更改？

> ID：13835594
> 
> 赞同：1
> 
> 时间：2012-12-12T08:24:25.890
> 
> 标签：git, version-control, githooks

我对 .git/hooks 目录进行了一些更改。现在我希望放弃这些更改并将 .git/hooks 恢复到其初始状态。我可以这样做吗？怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:29:29.363

Git 目录`.git`没有版本控制。Git 不会在`.git/hooks`目录中保存文件的副本。您必须自己进行备份。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T08:42:31.647

Git 只跟踪工作目录中的内容并省略 .git 文件夹。

但是，您可以通过创建一个单独的分支，然后告诉 git 工作树存在于 git 文件夹中来跟踪您喜欢的任何内容。我展示了如何使用 rerere 和它创建的 rr-cache 来做到这一点。示例语法是：

```
git --work-tree=.git/hooks --git-dir=.git add -A 
```

您还必须为提交重复这些选项。

这是关于如何共享 rerere 缓存的帖子：[共享 rerere 缓存](https://stackoverflow.com/questions/12566023/sharing-rerere-cache)

如果你想分享你的钩子，那应该让你开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T15:14:56.883

获取初始挂钩的最简单方法可能是删除当前挂钩，使用 创建一个临时存储库`git init`，然后将挂钩脚本从那里复制到现有存储库的挂钩目录中。

您还可以尝试查找 git 在您的系统上存储其默认挂钩模板的位置，并直接从那里复制它们。

# jquery - JQuery：如何从href中提取锚点

> ID：13835598
> 
> 赞同：6
> 
> 时间：2012-12-12T08:24:38.133
> 
> 标签：jquery

我对 JQuery 很陌生。

我想从带有 JQuery 的 href 中获取锚点的值。

如果我有以下示例，我如何使用 JQuery 从 href 中获取值“5”？

```
<a href="user/showUsers#5">User 5</a> 
```

提前致谢

-詹姆士

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T08:27:36.947

使用以下内容：

```
var id = $('a').attr('href').split('#');
id = id[id.length - 1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T08:32:09.417

这些被称为“哈希”。假设你的链接有一个 id，你可以像这样得到它：

```
document.getElementById("link").hash; 
```

这仍然会给您“#”，但您可以轻松替换它：

```
document.getElementById("link").hash.replace("#",""); 
```

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T08:44:26.547

如果你想得到数字，因为 URL 总是遵循相同的结构，试试这个，

```
$(document).ready(function() 
{
    var number = $("a").attr("href").match(/#([0-9]+)/)[1];
    alert(number);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T08:28:40.033

首先你得到`href`，然后你得到第一个之后的*部分* `#`：

```
var href = $("selector_for_the_link").attr('href'),
    index = href.indexOf('#'),
    anchor = href.substring(index + 1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T08:43:11.287

这将为所有锚标签带来一些链接的 href 值

```
$('a[href*="#"]').each(function(){
       if(this.href.split('#').length>1 && this.href.split('#')[1] != ""){                                                
           console.log(this.href.split('#')[1]);
       }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-12T08:47:48.627

如果您打算在多个地方使用它，或者您只是想要更简洁的代码，我建议您看看这个[URL parser](https://github.com/allmarkedup/jQuery-URL-Parser)。

安装后，您只需像这样使用它：

```
var anchor = $.url('http://yoursite.com/user/showUsers#5').attr('anchor'); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-12T08:28:02.840

```
 var id =  $(this).attr("href").split("#");
id = id[id.length - 1]; 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-12-12T08:34:25.550

假设不会再出现“#”。

```
<script type="text/javascript" language="javascript">
function GetAnchorValue(CurrCtrl)
{
    var hrefText = $(CurrCtrl).attr("href");
    var RequiredValue;
    if(hrefText.indexOf("#") != -1)
    {
        RequiredValue = hrefText.split("#")[1];
    }
}
</script> 
```

html标签将是

```
<a href="user/showUsers#5" onclick="return GetAnchorValue(this);">Test Anchor</a> 
```

# javascript - Javascript中的一些模板

> ID：13835601
> 
> 赞同：0
> 
> 时间：2012-12-12T08:24:53.527
> 
> 标签：javascript, html

如何使用 Javascript 创建第二个逻辑结构。

是一个网页，当它加载时（DOM 还没有准备好）正在执行 javascipt 代码，其中：

```
<script>
if(window.innerWidth>900){

 /* show huge HTML with javascript stuff here */

} else {

 /* show huge HTML with javascript stuff here */

}
</script> 
```

我想要与 PHP 语言中的第二个代码示例类似的东西：

```
<? if(true){ ?>
/* show huge HTML with javascript stuff here */
<? } else { ?>
/* show huge HTML with javascript stuff here */
<? } ?> 
```

当页面加载时，我需要在初始化窗口宽度时使用不同的 html javascript 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:28:24.370

不幸的是，Vanilla Javascript 不会为您提供那种模板功能。但是，有许多为此目的而存在的库。您可能想查看[此](http://www.quora.com/JavaScript/What-is-the-best-JavaScript-templating-framework-and-why)页面以获取一些链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T08:46:10.570

这不是 JS 的工作方式。您当然可以在这里打印 html 内联，但这会在您的代码中造成一团糟。我强烈反对这种做法。如果您需要这种模板功能，最好使用一些模板引擎。

例如，有 EJS，它允许您编写包含 JS 的单独的 html 模板。基本上，您加载模板，将数据传递给它，渲染 html 并将其插入 DOM 树。这使您可以保持代码非常干净。

[http://embeddedjs.com/](http://embeddedjs.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T09:03:35.057

按照我的直觉，我猜您想根据屏幕/窗口大小对页面进行模板化。根据屏幕的大小显示不同的布局......你希望这是“动态的”（我讨厌这个词），我的意思*是实时更新*。

这通常称为“[响应式设计](http://en.wikipedia.org/wiki/Responsive_design)”，并以某种不同的方式完成。您依赖（如果可能的话）特定于不同窗口大小的不同 CSS 样式表。将样式表 A 用于屏幕尺寸 X，将样式表 B 用于屏幕尺寸 Y，等等...

这是通过使用**[媒体查询](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)**来实现的。

当然，这需要您拥有干净且语义化的 HTML 代码（您知道...没有表格布局等...）。

一些使用响应式设计的网站示例： [链接](https://www.google.com/search?q=example%20responsive%20design)（访问这些网站并调整浏览器窗口的大小）

# spring - 春天 和 我的应用程序的文件夹结构如下。 web/WEB-INF/templates/ -home.ftl web/resources/css/Home_files -test.css 当同时使用<mvc:annotatio 2="" 2894="" 问问题="" 2012-12-12t08:25:20.343="" 次="" this="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" does="" not="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" 我的应用程序的文件夹结构如下。="" web="" web-inf="" templates="" -home.ftl="" resources="" css="" home_files="" -test.css="" 当同时使用<mvc:annotation-driven="">和 <mvc:resources mapping="/resources/**" location="/resources/css/Home_files">标签时，它无法解析视图（http://localhost:8080/info/home/index.html）。 没有 <mvc:resources mapping="/resources/**" location="/resources/css/Home_files">标签视图已解决，但图像和 css 无法解决。 没有 <mvc:annotation-driven>标签视图无法解析，但图像和 css 可以解析。 如何同时加载视图和静态内容？ 这是我的配置 xml 文件和 homeController。 info-servlet.xml（配置文件） <beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context" xmlns:mvc="http://www.springframework.org/schema/mvc" xsi:schemalocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/cache http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd "><bean id="freemarkerConfig" class="org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer"></bean><bean id="viewResolver" class="org.springframework.web.servlet.view.freemarker.FreeMarkerViewResolver"></bean><context:component-scan base-package="com.test.web.controllers"><context:component-scan base-package="com.test"><mvc:annotation-driven></mvc:annotation-driven></context:component-scan></context:component-scan></beans>控制器 @Controller @RequestMapping("/home") public class HomeController { @RequestMapping(value = "/index.html") public String getHome(@ModelAttribute("model") ModelMap model) { return "home"; } } web.xml <web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemalocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"><context-param><param-name>contextConfigLocation</param-name> <param-value>/WEB-INF/spring/info-servlet.xml</param-value></context-param> <listener><listener-class>org.springframework.web.context.ContextLoaderListener</listener-class></listener> <servlet><servlet-name>info</servlet-name> <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class> <init-param><param-name>contextConfigLocation</param-name> <param-value>/WEB-INF/spring/info-servlet.xml</param-value></init-param> <load-on-startup>1</load-on-startup></servlet> <servlet-mapping><servlet-name>info</servlet-name> <url-pattern>/</url-pattern></servlet-mapping> <mvc:resources>标签中的路径似乎不正确。在位置末尾添加正斜杠 (/)。 代替 <mvc:resources mapping="/resources/**" location="/resources/css/Home_files">用这个： <mvc:resources mapping="/resources/**" location="/resources/css/Home_files/">springmodel-view-controllerfreemarker 4 1 回答 1 This answer is useful 4 <mvc:resources>标签中的路径似乎不正确。在位置末尾添加正斜杠 (/)。 代替 <mvc:resources mapping="/resources/**" location="/resources/css/Home_files">用这个： <mvc:resources mapping="/resources/**" location="/resources/css/Home_files/">于 2012-12-12T08:57:17.480 回答 Related 3 iphone - 如何将 UIScrollView 添加到 iOS 应用程序中的视图？ 1 java - 使用 InputStreamReader 仅获取部分文本 1 c# - 如何使用 AjaxFileUpload 将图像文件流式传输到 SQL 数据源？ 4 c# - 如何使用会话制作登录页面 1 java - AMQP - 兔子 MQ 使用 2 c++ - 忽略返回值（返回对象）会发生什么情况？ 1 c# - 处理所有错误 0 jquery - Internet Explorer 10 - jQuery Script 1014：使用 JSON 时出现无效字符 - 正确解决它 1 php - PHP 本地设置/仅实时编码 1 asp.net - 以提升的权限运行 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</mvc:resources></mvc:resources></mvc:resources></mvc:resources></mvc:resources></mvc:resources></web-app></mvc:annotation-driven></mvc:resources></mvc:resources></mvc:annotatio>

> ID：13835604
> 
> 赞同：2
> 
> 时间：
> 
> 标签：spring, model-view-controller, freemarker

我的应用程序的文件夹结构如下。

```
web/WEB-INF/templates/
    -home.ftl

web/resources/css/Home_files
    -test.css 
```

当同时使用`<mvc:annotation-driven />`和`<mvc:resources mapping="/resources/**" location="/resources/css/Home_files" />` 标签时，它无法解析视图（http://localhost:8080/info/home/index.html）。

*   没有`<mvc:resources mapping="/resources/**" location="/resources/css/Home_files" />` 标签视图已解决，但图像和 css 无法解决。
*   没有`<mvc:annotation-driven />` 标签视图无法解析，但图像和 css 可以解析。

如何同时加载视图和静态内容？

这是我的配置 xml 文件和 homeController。

# info-servlet.xml（配置文件）

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:mvc="http://www.springframework.org/schema/mvc"

       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context.xsd
       http://www.springframework.org/schema/cache
       http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        ">

<bean id="freemarkerConfig" class="org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer">
    <property name="templateLoaderPath" value="/WEB-INF/templates/"/>
</bean>

<bean id="viewResolver" class="org.springframework.web.servlet.view.freemarker.FreeMarkerViewResolver">
    <property name="cache" value="true"/>
    <property name="prefix" value=""/>
    <property name="suffix" value=".ftl"/>
</bean>

<context:component-scan base-package="com.test.web.controllers"/>

<context:component-scan base-package="com.test"/>

<mvc:annotation-driven />
<mvc:resources mapping="/resources/**" location="/resources/css/Home_files" />

</beans> 
```

# 控制器

```
@Controller

@RequestMapping("/home")

public class HomeController {

    @RequestMapping(value = "/index.html")

    public String getHome(@ModelAttribute("model") ModelMap model) {

        return "home";

    }

} 
```

# web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
          http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" >

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/spring/info-servlet.xml
        </param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>info</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/spring/info-servlet.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <!-- The mapping for the default servlet -->
    <servlet-mapping>
        <servlet-name>info</servlet-name>
        <url-pattern>/</url-pattern>

    </servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T08:57:17.480

`<mvc:resources>`标签中的路径似乎不正确。在位置末尾添加正斜杠 (/)。

代替

```
<mvc:resources mapping="/resources/**" location="/resources/css/Home_files" /> 
```

用这个：

```
<mvc:resources mapping="/resources/**" location="/resources/css/Home_files/" /> 
```

# c# - 在运行我的应用程序的机器上获取 SQL 版本

> ID：13835606
> 
> 赞同：1
> 
> 时间：2012-12-12T08:25:44.823
> 
> 标签：c#, sql, version, local

我正在用 c# (.Net 3.5) 编写，我想获得安装在本地机器上的 SQL 版本。这意味着我没有包含地址\用户名\密码的连接字符串，我只需要本地机器上的 SQL 版本，而不需要从数据库等中检索数据。

我尝试使用“Microsoft.SqlServer.Management.Smo.Wmi **”**，但它似乎**取决于 SQL 版本**。

有任何想法吗？谢谢，公里

编辑：一些笔记，

*   我不想尝试/捕获每个 DLL “Microsoft.SqlServer.Management.Smo.Wmi”（不同的 SQL 版本有不同的 DLL）
*   我需要的唯一细节是我正在运行的机器的 SQL 版本。
*   我没有连接字符串/用户名/密码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T09:37:24.753

在 powershell 中试试这个：

```
Get-WmiObject -Namespace "root\Microsoft\SqlServer\ComputerManagement10" -Class SqlServiceAdvancedProperty -ComputerName <SERVERNAME> | Format-Table ServiceName, PropertyName, PropertyNumValue, PropertyStrValue -AutoSize 
```

`root\Microsoft\SqlServer\ComputerManagement10`对 sql server 2008 及更高版本以及`root\Microsoft\SqlServer\ComputerManagement`2005使用命名空间。

您可以使用命名空间从 .net 实现此结果`System.Management`。

**更新**

您可以使用它来检测安装了哪种 SQL Server WMI 提供程序。

```
public static IEnumerable<string> EnumCorrectWmiNameSpace()
{
    const string WMI_NAMESPACE_TO_USE = @"root\Microsoft\sqlserver";
    try
    {
        ManagementClass nsClass =
            new ManagementClass(
                new ManagementScope(WMI_NAMESPACE_TO_USE),
                new ManagementPath("__namespace"),
                null);

        return nsClass
            .GetInstances()
            .Cast<ManagementObject>()
            .Where(m => m["Name"].ToString().StartsWith("ComputerManagement"))
            .Select(ns => WMI_NAMESPACE_TO_USE + "\\" + ns["Name"].ToString());
    }
    catch (ManagementException e)
    {
        Console.WriteLine("Exception = " + e.Message);
    }

    return null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:29:39.520

如果您想获得安装在您机器上的 SQL Server Insance，您可以使用以下代码：

```
using Microsoft.SqlServer.Management.Smo.Wmi;
....

ManagedComputer mc = new ManagedComputer();

foreach (ServerInstance si in mc.ServerInstances)
{
     Console.WriteLine("The installed instance name is " + si.Name);
} 
```

或者如果您想获得 SQL Server 版本，您可以使用以下代码：

```
try
{
    SqlConnection sqlConnection = new SqlConnection(connectionString);
    Microsoft.SqlServer.Management.Smo.Server server = new Microsoft.SqlServer.Management.Smo.Server(new Microsoft.SqlServer.Management.Common.ServerConnection(sqlConnection));

    switch (server.Information.Version.Major)
    {
      case 8:
        MessageBox.Show("SQL Server 2000");
        break;
      case 9:
        MessageBox.Show("SQL Server 2005");
        break;
      case 10:
        MessageBox.Show("SQL Server 2008");
                break;
      default:
        MessageBox.Show(string.Format("SQL Server {0}", server.Information.Version.Major.ToString())); 
        break;   
    }
}
catch (Microsoft.SqlServer.Management.Common.ConnectionFailureException)
{
    MessageBox.Show("Unable to connect to server",
        "Invalid Server", MessageBoxButtons.OK, MessageBoxIcon.Error);

} 
```

# c# - 使用 NHibernate 的子类；得到 NHibernate.WrongClassException （有时）

> ID：13835608
> 
> 赞同：0
> 
> 时间：2012-12-12T08:25:54.540
> 
> 标签：c#, nhibernate, nhibernate-mapping

WinForms 应用程序、NHibernate v3.3.x、.Net 4、Windows 7（32 位）、Oracle 10g 后端

我们正在使用带有`AuditTrail`表的遗留数据库，其中列操作类型 (AKTIONSCODE) 控制附加（可选）参数 (Para1-Para4) 的含义

我创建了一个相应的类`AuditTrail`；以及派生的子类`AuditTrailAsmRuleSetState`，`AuditTrailTestSpecSetState`其唯一目的是为公共参数获取一些不错的 getter 和 setter。

插入条目工作正常。

读取`AuditTrailAsmRuleSetState`条目和其他派生类也可以正常工作。

**但有时我会收到 NHibernate.WrongClassException 读取 AuditTrailTestSpecSetState 条目；** 关闭应用程序（也许关闭会话？）并再次阅读相同的条目将再次起作用！？

非常感谢您的建议。

**AuditTrail 表和 nHibernate 映射文件**如下所示：

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="MeCIS_DAL"
    namespace="Com.XY.App.DAL.Entities" >
<class name="AuditTrail" 
     table="AUDITTRAIL"  schema="MECIS_OWNER"
     dynamic-update="true" dynamic-insert="true" rowid="rowid">
<id name="AID" column="AID" unsaved-value="0">
  <generator class="native">
    <param name="sequence">mecis_owner.seq_audittrail</param>
  </generator>
</id>
<discriminator formula="case when aktionscode=20005 then '1' 
when aktionscode=20010 then '2' 
when aktionscode=20020 then '3' 
else '10' end" />

<property name="AuditTime" column="DATUM" not-null="true" />
<many-to-one name="User" class="Bearbeiter"
             fetch="join" cascade="none" not-null="true" >
  <column name="BEARBEITER_ID" />
</many-to-one>
<property name="HostName" column="RECHNER" length="15" />
<many-to-one name="AuditTrailDefObj" class="AuditTrailDef"
             fetch="join" cascade="none" not-null="true" >
  <column name="AKTIONSCODE" />
</many-to-one>
<property name="Para1" column="PARAMETER1" length="40" />
<property name="Para2" column="PARAMETER2" length="40" />
<property name="Para3" column="PARAMETER3" length="40" />
<property name="Para4" column="PARAMETER4" length="250" />

<subclass name="AuditTrailAsmRuleSetState" discriminator-value="1" entity-name="SetStateAsmRule">
  <!-- subclass specific properties -->
</subclass>

<subclass name="AuditTrailTestSpecObjSetState" discriminator-value="2" entity-name="SetStateTestSpecObj">
  <!-- subclass specific properties -->
</subclass>

<subclass name="AuditTrailTestSpecSetState" discriminator-value="3" entity-name="SetStateTestSpec">
  <!-- subclass specific properties -->
</subclass>

<subclass name="AuditTrail" discriminator-value="10" entity-name="BaseStd">
  <!-- subclass specific properties -->
</subclass>

      </class>
  <!--
 TABLE AUDITTRAIL
 Name                                      Null?    Type                        
 ===================================================================
 AID                                       NOT NULL NUMBER(11)
 DATUM                                     NOT NULL DATE
 BEARBEITER_ID                             NOT NULL NUMBER(5)
 RECHNER                                            VARCHAR2(15)
 AKTIONSCODE                               NOT NULL NUMBER(5)
 PARAMETER1                                         VARCHAR2(40)
 PARAMETER2                                         VARCHAR2(40)
 PARAMETER3                                         VARCHAR2(40)
 PARAMETER4                                         VARCHAR2(250)             
  -->
</hibernate-mapping> 
```

**类 AuditTrail 和派生类 AuditTrailTestSpecSetState 像这样：（** 派生类`AuditTrailTestSpecObjSetState`和`AuditTrailAsmRuleSetState`相当相似`AuditTrailTestSpecSetState`）

```
public class AuditTrail : EntityBase
{
..constants, remarks, etc. omitted

    public AuditTrail(AuditTrailType type)
    {
        this.Init();
        this.SetAuditTrailType(type);
    }

    public AuditTrail(AuditTrailType type, string para1 = null, string para2 = null, string para3 = null, string para4 = null)
    {
        this.Init();
        this.SetAuditTrailType(type);
        this.Para1 = StringHelper.Truncate(para1, this.para1MaxLength);
        this.Para2 = StringHelper.Truncate(para2, this.para2MaxLength);
        this.Para3 = StringHelper.Truncate(para3, this.para3MaxLength);
        this.Para4 = StringHelper.Truncate(para4, this.para4MaxLength);
    }

    public AuditTrail(AuditTrailType type, params string[] parameters)
    {
        this.Init();
        this.SetAuditTrailType(type);

        if (parameters.Length > MAXPARAMETERS)
        {
            throw new ArgumentException("AuditTrail: to many parameters passed.  " + parameters.ToString());
        }
... some code omitted
    }

    protected AuditTrail()
    {
        this.Init();
    }

    public virtual int AID { get; set; }
    public virtual DateTime AuditTime { get; set; }
    public virtual Bearbeiter User { get; set; }
    public virtual int Bearbeiter_ID
    {
        get
        {
            return (this.User != null) ? this.User.Bearbeiter_Id : -1;
        }
        set
        {
            this.SetUser(value);
        }
    }
    public virtual string Benutzername
    {
        get
        {
            if (this.User == null)
            {
                return string.Empty;
            }
            return this.User.Benutzername ?? string.Empty;
        }
        protected set
        {
        }
    }
    public virtual string HostName { get; set; }
    public virtual AuditTrailDef AuditTrailDefObj { get; set; }
    public virtual int Type
    {
        get
        {
            return this.AuditTrailDefObj != null ? (int)this.AuditTrailDefObj.Type : -1;
        }
        set
        {
            this.SetAuditTrailType((AuditTrailType)value);
        }
    }
    public virtual string Name
    {
        get
        {
            return this.AuditTrailDefObj != null ? this.AuditTrailDefObj.Name : null;
        }
    }
    public virtual string Para1 { get; set; }
    public virtual string Para2 { get; set; }
    public virtual string Para3 { get; set; }
    public virtual string Para4 { get; set; }

    /// <summary>Initialize this AuditTrail instance</summary>
    protected void Init()
    {
        try
        {
            this.AuditTime = DateTime.Now;
            this.HostName = Environment.MachineName;
            this.Bearbeiter_ID = DAL.CurrentMeCISUser_Bearbeiter_Id;
        }
        catch (Exception ex)
        {
            log.Warn("Init failed but ignored", ex);
        }
    }

    protected void SetAuditTrailType(AuditTrailType type)
    {
        AuditTrailDef atd = DAL.Repository.GetById<AuditTrailDef>((int)type);
        if (atd == null)
        {
            throw new ArgumentException("SetAuditTrailType: type" + type.ToString() + " not found");
        }
        this.AuditTrailDefObj = atd;
    }

    /// <summary>set a reference to an user (BEARBEITER) instance</summary>
    /// <param name="bearbeiter_ID">id of user to set (BEARBEITER.BEARBEITER_ID)</param>
    protected void SetUser(int bearbeiter_ID)
    {
        Bearbeiter user = DAL.Repository.GetById<Bearbeiter>(bearbeiter_ID);
        if (user == null)
        {
            throw new ArgumentException("SetUser: invalud bearbeiter_id" + bearbeiter_ID.ToString());
        }
        this.User = user;
    }
}
} 
```

**AuditTrailTestSpecSetState：**

```
public class AuditTrailTestSpecSetState : AuditTrail
{

    public virtual int Id
    {
        get
        {
            int n = int.Parse(this.Para1);
            return n;
        }
        protected set
        {
        }
    }

    public virtual TestSpecStates State
    {
        get
        {
            int n = int.Parse(this.Para2);
            return (TestSpecStates)n;
        }
    }

    public virtual string StateDesc
    {
        get
        {
            TestSpecStates rs = this.State;
            string s = rs.ToString();
            try 
            {
                s = DAL.RscMgr.GetString("TestSpecState_" + s, CultureInfo.CurrentCulture);
            }
            catch (Exception)
            {
                log.Error("StateDesc: no rsc for state " + this.State.ToString());
            }                
            return s;
        }
    }

    public virtual int StatusVal
    {
        get
        {
            return (int)this.State;
        }
    }
} 
```

**Stacktrace/logging：** SQL 语句对我来说似乎没问题。

```
...Com.XY.App.MgmtTool.TestSpecMgmtForm: ShowHistoryDataGrid
Com.XY.App.DAL.GenericDAOHibernate`2: GetTestSpecHistory id:1479

**NHibernate.SQL: 2012-12-12 08:26:42,488 DEBUG NHibernate.SQL: select setstatete0_.AID as AID6_, setstatete0_.DATUM as DATUM6_, setstatete0_.BEARBEITER_ID as BEARBEITER3_6_, setstatete0_.RECHNER as RECHNER6_, setstatete0_.AKTIONSCODE as AKTIONSC5_6_, setstatete0_.PARAMETER1 as PARAMETER6_6_, setstatete0_.PARAMETER2 as PARAMETER7_6_, setstatete0_.PARAMETER3 as PARAMETER8_6_, setstatete0_.PARAMETER4 as PARAMETER9_6_ from App_OWNER.AUDITTRAIL setstatete0_ where case when setstatete0_.aktionscode=20005 then '1' when setstatete0_.aktionscode=20010 then '2' when setstatete0_.aktionscode=20020 then '3' else '10' end='3' and setstatete0_.PARAMETER1=:p0 and setstatete0_.AKTIONSCODE=:p1 order by setstatete0_.AID desc;:p0 = '1479' [Type: String (0)], :p1 = 20020 [Type: Int32 (0)]**

Eine Ausnahme (erste Chance) des Typs "NHibernate.WrongClassException" ist in NHibernate.dll aufgetreten.
Eine Ausnahme (erste Chance) des Typs "NHibernate.WrongClassException" ist in NHibernate.dll aufgetreten.
Eine Ausnahme (erste Chance) des Typs "NHibernate.WrongClassException" ist in NHibernate.dll aufgetreten.
Eine Ausnahme (erste Chance) des Typs "NHibernate.WrongClassException" ist in NHibernate.dll aufgetreten.
Com.XY.App.MgmtTool.TestSpecModel: 2012-12-12 08:26:42,754 DEBUG Com.XY.App.MgmtTool.TestSpecModel: GetTestSpecHistory failed!

**NHibernate.WrongClassException: Object with id: 5436 was not of the specified subclass:** SetStateTestSpec (loading object was of wrong class [Com.XY.App.DAL.Entities.AuditTrail])
   bei NHibernate.Loader.Loader.InstanceAlreadyLoaded(IDataReader rs, Int32 i, IEntityPersister persister, EntityKey key, Object obj, LockMode lockMode, ISessionImplementor session) in p:\nhibernate-core\src\NHibernate\Loader\Loader.cs:Zeile 896.

   bei NHibernate.Loader.Loader.GetRow(IDataReader rs, ILoadable[] persisters, EntityKey[] keys, Object optionalObject, EntityKey optionalObjectKey, LockMode[] lockModes, IList hydratedObjects, ISessionImplementor session) in p:\nhibernate-core\src\NHibernate\Loader\Loader.cs:Zeile 872.
   bei NHibernate.Loader.Loader.GetRowFromResultSet(IDataReader resultSet, ISessionImplementor session, QueryParameters queryParameters, LockMode[] lockModeArray, EntityKey optionalObjectKey, IList hydratedObjects, EntityKey[] keys, Boolean returnProxies) in p:\nhibernate-core\src\NHibernate\Loader\Loader.cs:Zeile 342.
   bei NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies) in p:\nhibernate-core\src\NHibernate\Loader\Loader.cs:Zeile 473.
   bei NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies) in p:\nhibernate-core\src\NHibernate\Loader\Loader.cs:Zeile 251.
   bei NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters) in p:\nhibernate-core\src\NHibernate\Loader\Loader.cs:Zeile 1569.
   bei NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters) in p:\nhibernate-core\src\NHibernate\Loader\Loader.cs:Zeile 1472.
   bei NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces, IType[] resultTypes) in p:\nhibernate-core\src\NHibernate\Loader\Loader.cs:Zeile 1467.
   bei NHibernate.Hql.Ast.ANTLR.Loader.QueryLoader.List(ISessionImplementor session, QueryParameters queryParameters) in p:\nhibernate-core\src\NHibernate\Hql\Ast\ANTLR\Loader\QueryLoader.cs:Zeile 288.
   bei NHibernate.Hql.Ast.ANTLR.QueryTranslatorImpl.List(ISessionImplementor session, QueryParameters queryParameters) in p:\nhibernate-core\src\NHibernate\Hql\Ast\ANTLR\QueryTranslatorImpl.cs:Zeile 112.
   bei NHibernate.Engine.Query.HQLQueryPlan.PerformList(QueryParameters queryParameters, ISessionImplementor session, IList results) in p:\nhibernate-core\src\NHibernate\Engine\Query\HQLQueryPlan.cs:Zeile 105.
   bei NHibernate.Impl.SessionImpl.List(String query, QueryParameters queryParameters, IList results) in p:\nhibernate-core\src\NHibernate\Impl\SessionImpl.cs:Zeile 626.
   bei NHibernate.Impl.SessionImpl.List(String query, QueryParameters parameters) in p:\nhibernate-core\src\NHibernate\Impl\SessionImpl.cs:Zeile 592.
   bei NHibernate.Impl.QueryImpl.List() in p:\nhibernate-core\src\NHibernate\Impl\QueryImpl.cs:Zeile 64.
   bei Com.XY.App.DAL.TestSpecDAOHibernate.GetTestSpecHistory(Int32 id) in L:\App\DAL\DAOHibernate\TestSpecDAOHibernate.cs:Zeile 55.
   bei Com.XY.App.MgmtTool.TestSpecModel.GetTestSpecHistory(Int32 id) in L:\App\MgmtTool\Model\TestSpecModel_Mgmt.cs:Zeile 221.

Com.XY.App.MgmtTool.FrmHelper: 2012-12-12 08:26:42,760 DEBUG Com.XY.App.MgmtTool.FrmHelper: ColorizeZRDataGrid 6 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:54:14.573

插入 AuditTrail 条目并立即读取审计跟踪列表（包含新条目）后出现问题

为了插入，我创建了一个 AuditTrail 对象（不是特定的 AuditTrailTestSpecSetState 实例）

从数据库的角度来看，这无关紧要；

从 nHibernate 的角度来看，它有所不同，将新创建的对象保存在 RAM 中具有“错误”的类类型。

（这就是为什么在重新启动应用程序后一切都可以正常工作而缓存中没有错误对象的原因）

# selenium - 测试用例结构

> ID：13835614
> 
> 赞同：1
> 
> 时间：2012-12-12T08:26:43.153
> 
> 标签：selenium, web, webdriver, driver, testng

我正在从事一个 Selenium 项目，并且对将手动测试用例转换为 Selenium 测试脚本有一定的疑问。

假设我有 2 个测试用例，如下所示，第一种情况： 1\. 导航到 GMAIL 2\. 使用有效的用户名和密码登录到 Gmail 3\. 检查收件箱中的新电子邮件。4\. 阅读电子邮件 5\. 退出

第二种情况： 1\. 导航到 GMAIL 2\. 使用有效的用户名和密码登录到 Gmail 3\. 撰写电子邮件 4\. 发送电子邮件 5\. 退出

**我的疑惑**

1.  每个测试用例都是 Java 中的一个类吗？
2.  每个测试步骤都是java中的方法吗？

谢谢，一些输入会帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:32:37.643

它基于您的要求。

例子

```
public class gmailTest()
{

   @BeforeClass
   public void beforeClass()
   {
       1\. Navigate to Gmail
       2\. sign in
   }

   @BeforeMethod
   public void beforeMethod()
   {

   }
   @Test
   public void testInbox()
   {
        Check Inbox for New Emails , Read the email 
   }
   @Test
   public void testInbox()
   {
        Compose an email , send the email
   }
    @AfterMethod
   public void afterMethod()
   {

   }
   @BeforeClass
   public void afterClass()
   {
      signout
   }

} 
```

**@BeforeClass：**被注解的方法会在当前类的第一个测试方法被调用之前运行。

**@AfterClass：**被注解的方法会在当前类的所有测试方法都运行完之后运行。

**@BeforeMethod：**注解的方法将在每个测试方法之前运行。

**@AfterMethod：**注解的方法将在每个测试方法之后运行。

有关 testng 的更多信息，请单击[此处](http://testng.org/doc/documentation-main.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:27:11.770

它取决于您的 java-selenium 代码的复杂性和可用性。

**每个测试用例都是 Java 中的一个类吗？**

---> 在这种情况下，您可以编写一个用于登录功能的方法，您将在其中将用户名和密码作为参数传递给该方法。只要您需要登录，就可以在任何类（您正在编写的任何类也可以测试任何其他测试用例）内部调用此方法。

所以，一个测试用例可以是一个类。如果是单个类，将有助于调试和维护目的。如果测试用例过于复杂，您可以将功能拆分为两个或更多类。

**每个测试步骤都是java中的方法吗？**

---> 是的，可以。当您检查登录或注销功能时，您将分别调用登录方法或注销方法。有时，如果该方法不能被重用并且它只特定于一个应用程序，那么它就不是一个方法。您需要显式编写所有逻辑，而不是调用已经存在的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T13:57:31.373

我曾经遇到过完全相同的问题（但我使用的是 Python）。
所以这就是我所做的：

1）每个`class`都是**测试用例**
2）每个`method`都是**测试步骤**
3）在`class` *设置*内并完全*拆除*到初始点。（所以以后可以用来分发）
4）创建“如果一个方法失败->类中其余方法不运行（自动失败）”的逻辑

5）（！！）创建“如果方法更改*状态*，则为其添加'tear down'”的逻辑

# android - Android RegExp第一点

> ID：13835616
> 
> 赞同：-2
> 
> 时间：2012-12-12T08:26:46.040
> 
> 标签：android, regex

我想为第一点获取图像和 substr 的描述如何在 android 中执行此操作？

示例我有一些文字

> 文本这是文本，文本。teeext wrwerwr bla bla

你好，给我一个

> 文本这是文本，文本。

这该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:38:46.537

假设您知道您的描述中只有一点：

```
public static void main(String[] args) {
        // TODO Auto-generated method stub
        String str = "Text this is text, texxt. teeext wrwerwr bla bla";
        String newstr="";

        if(null!=str && str.length() > 0 ){
             int endIndex = str.lastIndexOf(".");
            if(endIndex != -1)  {
                newstr = str.substring(0, endIndex); // not forgot to put check if( endIndex != -1)
        }
        }
        System.out.println(newstr);
    } 
```

如果有多个点：

```
public static void main(String[] args) {
        // TODO Auto-generated method stub
        String str = "Text this is text, texxt. teeext wrwerwr bla bla";
        if(null!=str && str.length() > 0 ){
             String [] strings = str.split("\\.");
        System.out.println(strings[0]);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:33:24.037

您不需要正则表达式，只需看看这个：[String.subSequence](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#subSequence%28int,%20int%29)

# modx - MODX - 用户个人资料照片上传

> ID：13835620
> 
> 赞同：0
> 
> 时间：2012-12-12T08:27:06.697
> 
> 标签：modx

我正在尝试允许用户将照片上传到他们的个人资料。我确定我做错了什么......

**我目前的配置：**

更新个人资料表格

```
[[!UpdateProfile? &useExtended=`1` &preHooks=`user_profile_image` &postHooks=`redirect_profile_update`]]

<div class="update-profile">
    <div class="updprof-error">[[+error.message]]</div>
    [[+login.update_success:if=`[[+login.update_success]]`:is=`1`:then=`[[%login.profile_updated? &namespace=`login` &topic=`updateprofile`]]`]]

    <form class="form" enctype="multipart/form-data" action="[[~[[*id]]]]" method="post">
        <input type="hidden" name="nospam:blank" value="" />

        <label for="fullname"><i class="icon-user"></i> <strong>[[!%login.fullname? &namespace=`login` &topic=`updateprofile`]]</strong>
            <span class="error">[[+error.fullname]]</span>
        </label>
        <input type="text" name="fullname" id="fullname" value="[[+fullname]]" />

        <label for="email"><i class="icon-envelope"></i> <strong>[[!%login.email]]</strong>
            <span class="error">[[+error.email]]</span>
        </label>
        <input type="text" name="email:required:email" id="email" value="[[+email]]" />
         <label for="test_field">Test Field
            <span class="error">[[+error.custom_field]]</span>
        </label>
        <input type="text" name="test_field" id="test_field" value="[[+test_field]]" /><br/>

       <div class="row clearfix">
        <div class="label">Photo<span class="error">[[+fi.error.nomination_file]]</span></div> 
        <div class="input"><input id="nomination_file" name="nomination_file:required" type="file" value="[[+fi.nomination_file]]" maxlength="100000" /></div>
    </div>

        <br class="clear" />

       <button class="btn-info btn btn-large" type="submit" name="login-updprof-btn">Update Profile</button>
    </form>
</div> 
```

User_profile_image 片段

```
<?php
// initialize output;
$output = true;
  // get the current user name to create the file name as  
$userName = $modx->user->get('username');

// valid extensions
$ext_array = array(`jpg', 'jpeg', 'gif', 'png');

// create unique path for this form submission
$uploadpath = 'assets/uploads/';

// you can create some logic to automatically
// generate some type of folder structure here.
// the path that you specify will automatically
// be created by the script if it doesn't already
// exist.

// EXAMPLE:
// this would put all file uploads into a new,
// unique folder every day.
// $uploadpath = 'assets/'uploads/'.date('Y-m-d').'/';

// get full path to unique folder
$target_path = $modx->config['base_path'] . $uploadpath;

// get uploaded file names:
$submittedfiles = array_keys($_FILES);

// loop through files
foreach ($submittedfiles as $sf) {

  // Get Filename and make sure its good.
  $filename = basename( $_FILES[$sf]['name'] );

  // Get file's extension
  $ext = pathinfo($filename, PATHINFO_EXTENSION);
  $ext = mb_strtolower($ext); // case insensitive

  // is the file name empty (no file uploaded)
  if($filename != '') {

    // is this the right type of file?
    if(in_array($ext, $ext_array)) {

      //create file called the user name + pic
      $filename = $userName . "pic".'.'.$ext  ;

      // full path to new file
      $myTarget = $target_path . $filename;

      // create directory to move file into if it doesn't exist
      mkdir($target_path, 0755, true);

      // is the file moved to the proper folder successfully?
      if(move_uploaded_file($_FILES[$sf]['tmp_name'], $myTarget)) {
        // set a new placeholder with the new full path (if you need it in subsequent hooks)
        $modx->setPlaceholder('fi.'.$sf.'_new', $myTarget);
        // set the permissions on the file
        if (!chmod($myTarget, 0644)) { /*some debug function*/ }

          } else {
        // File not uploaded
        $errorMsg = 'There was a problem uploading the file.';
        $hook->addError($sf, $errorMsg);
        $output = false; // generate submission error
      }

      } else {
      // File type not allowed
          $errorMsg = 'Type of file not allowed.';
      $hook->addError($sf, $errorMsg);
      $output = false; // generate submission error
        }

  // if no file, don't error, but return blank
  } else {
      $hook->setValue($sf, '');
  }

}

return $output; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:11:53.410

1）修复此行中的报价

```
$ext_array = array(`jpg', 'jpeg', 'gif', 'png'); 
```

2）删除所有`:required`名称字段。

3）改为

```
 $modx->setPlaceholder('fi.'.$sf.'_new', $myTarget); 
```

类型

```
 $hook->setValue($sf, $uploadpath . $filename); 
```

4)`mkdir($target_path, 0755, true);`添加后

```
 if(file_exists($myTarget) {
      chmod($myTarget,0755); //Change the file permissions if allowed
      unlink($myTarget); //remove the file
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T17:53:23.573

对于任何参考这篇文章的人：

将 user_profile_image 移回 prehook，如下所示：

```
&preHooks=`user_profile_image` 
```

并在第 59 行添加缺少的“）”，如下所示：

```
if(file_exists($myTarget)) { 
```

# ruby-on-rails - 您如何将博客系统的存档菜单实现到 rails3 应用程序？

> ID：13835631
> 
> 赞同：2
> 
> 时间：2012-12-12T08:28:17.973
> 
> 标签：ruby-on-rails, ruby-on-rails-3, blogs

当您进入博客页面时，您将在菜单上看到存档列表。在大多数情况下，它会显示类似这样的内容

```
'Archive'

2012(78)
 -December(1)
 -November(5)
 -October(10)
 ...
2011(215)
2010(365) 
```

我有信心使用脚手架制作博客发布系统。但我不知道如何制作这个存档:(任何人都想出好主意来轻松地将它实现到应用程序？？？

需要你的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T20:14:50.153

```
<h3>Archives </h3>
<% if @posts.to_a.empty? %>
<div class="post">
    <p>No articles found...</p>
</div>
<% else %>
<% current_month = 0 %>  
<% current_year = 0 %>
<% for article in @posts %> 
  <% if (article.created_at.year != current_year)
     current_year = article.created_at.year
   %>
      <h3 class="archiveyear"><%= article.created_at.year%></h3>
<% end %>
<% if (article.created_at.month != current_month || article.created_at.year != current_year) 
 current_month = article.created_at.month 
 current_year = article.created_at.year
%>  

<h4 class="archivemonth"><%= (Date::MONTHNAMES[article.created_at.month]) %></h4>
<% end %>
<div class="archivepost">
<%= link_to article.title, article_path(article), :remote => true %> on <%= article.created_at.strftime('%A')%> - <%= article.created_at.strftime('%d') + "th"%>
</div>
<% end -%>
<%end %> 
```

这可能会对您有所帮助。我没有在此代码中包含计数的数量。其实我在想怎么做。如果你能告诉我。

我也在控制器中做到了这一点。

```
@posts = Article.order("created_at DESC") 
```

这`@posts`是一个`array`所以里面的项目会被订购，然后我可以根据它的顺序来获取记录。

谢谢。

# vb.net - 如何枚举或索引结构的属性

> ID：13835633
> 
> 赞同：1
> 
> 时间：2012-12-12T08:28:19.860
> 
> 标签：vb.net, loops, indexing, structure, enumeration

一段时间以来，我一直想知道是否可以枚举、设置和索引对象或结构的属性。

我目前有一组用于不同报告的自定义图形生成器类，但它们都接受相同的结构作为参数。

结构的属性值从 SQL 读取器中设置，该读取器读取在数据库表中设置的列。现在理想情况下希望依次循环这些列值并将它们写入结构的属性。

我的结构如下：

```
Public Structure MyStructure
    Dim GraphName As String
    Dim GraphValue As Integer
    Dim Red As Integer
    Dim Green As Integer
    Dim Blue As Integer
End Structure 
```

现在我希望能够遍历这些属性并为每个属性分配值。例如：

```
 Dim Struct as MyStructure
 For i as integer = 0 to 4
      Struct.i = "A value retrieved from database"
 Next i 
```

主要思想是我想避免使用 case 语句：

```
 Dim Struct as MyStruct
 For i as integer = 0 to 4
      Select Case i
          Case 0
          Struct.GraphName  = "A value retrieved from database"
          Case 1
          Struct.GraphValue = "A value retrieved from database"
          'Etc.
      End Select
 Next i 
```

对此的任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:51:54.867

要“动态”访问字段，您将使用反射：

```
Private Structure foo
    Public i As Integer
    Public s As String
End Structure

Private Sub bar()

    Dim f As foo
    Dim fields = GetType(foo).GetFields(BindingFlags.Public Or BindingFlags.Instance)
    For Each fi As FieldInfo In fields
        fi.SetValue(f, GetValueFromDBForName(fi.Name))
    Next

End Sub 
```

请注意，反射并不快。“FasterFlect”（通过 NuGet）或其他“快速”替代品可能是一种替代方案。或者您考虑使用“开箱即用”的 ORM（对象关系映射）

# google-drive-api - 确定某个文件是否由使用 Google Drive API 的项目处理

> ID：13835637
> 
> 赞同：1
> 
> 时间：2012-12-12T08:28:33.997
> 
> 标签：google-drive-api

再会！我目前正在使用 Google Drive API 开发一个网站。但是，我想知道是否有可能知道某个文件是否由项目使用 App Id 创建/上传/共享。我在想它是否属于文件的属性。但是，当我检查时，似乎没有这样的事情。

我正在尝试做的是过滤其他用户使用我的网站共享给帐户所有者的文件。可能吗？关于如何做的任何建议？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:22:19.810

File metadata doesn't contain this information unfortunatelly, therefore you can't know if some file was created by your app or not. But FYI Google store it somewhere, if you will try to upload somefile without providing its content type (*** / ***) and after that try to open this file through browser you will see the message:

*No preview available This item was created with YourAppName, a Google Drive app. Download this file or use one of the apps you have installed to open it.*

# c# - System.Decimal 是否一致？

> ID：13835640
> 
> 赞同：4
> 
> 时间：2012-12-12T08:28:44.857
> 
> 标签：c#, .net, floating-point, ieee-754

使用浮点数或双精度的浮点计算是在硬件上执行的，这可能会在不同的架构或优化设置上给出不同的结果，如此[处](https://stackoverflow.com/questions/6683059/are-floating-point-numbers-consistent-in-c-can-they-be)所述。

在该线程上简要提到但未完全回答的一件事是 System.Decimal 的情况。有人提到 System.Decimal*可能*用作一致的浮点类型，它会非常慢，并且 .NET (System.Math) 提供的数学函数没有为 System.Decimal 实现。

我能找到的关于这种类型的唯一其他信息是 Marc Gravell[说它](https://stackoverflow.com/a/6992711/154766)是在软件中实现的，这强烈暗示它确实是一致的。

因此，我的问题是：System.Decimal 能否用于在所有硬件平台上获得一致的结果，还是容易出现与 System.Single 和 System.Double 相同的问题？

如果 System.Decimal 是一致的，是否有任何免费库为其实现超越函数（cos、sin、tan、sqrt、log 等）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T08:36:13.077

以某种方式一致，它将在所有 .NET 实现上产生相同的结果是的。

以始终表示操作的正确结果的方式保持一致。任何浮点数在表示某些值时都会遇到麻烦。`System.Decimal`只能准确表示那些可以准确表示为十进制值的数字，例如 1/3 将不准确地表示为 0.33333……而 cos、sin、tan、sqrt 和 log 的许多结果将是近似值，因为事实上，对于任何数字系统（例如十进制或二进制）来说，很多值只能表示为最接近的近似值。

C# 规范说： `The result of an operation on values of type decimal is that which would result from calculating an exact result (preserving scale, as defined for each operator) and then rounding to fit the representation. Results are rounded to the nearest representable value, and, when a result is equally close to two representable values, to the value that has an even number in the least significant digit position.`

# c++ - 在 C++ 中使用 libcurl 的 curl 调用的默认超时

> ID：13835644
> 
> 赞同：5
> 
> 时间：2012-12-12T08:29:18.197
> 
> 标签：c++, libcurl

我在 c++ 中的应用程序（A）对另一台机器进行 curl 调用以启动另一个应用程序（B）。当 A 进行 curl 调用时，它会等到 B 完成它的工作。所以我只想问一下，应用程序 A 的默认超时是多少，或者默认情况下它是禁用的，即无限超时？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-12T08:33:36.450

来自[http://curl.haxx.se/libcurl/c/curl_easy_setopt.html](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html)

> [CURLOPT_CONNECTTIMEOUT](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTCONNECTTIMEOUT)
> 
> 传了很久。它应该包含允许连接到服务器的最长时间（以秒为单位）。这只限制了连接阶段，一旦连接，这个选项就不再有用了。设置为零以切换到默认的内置连接超时 - 300 秒。另请参阅 CURLOPT_TIMEOUT 选项。

.

> [CURLOPT_TIMEOUT](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTTIMEOUT)
> 
> 传递一个 long as 参数，其中包含您允许 libcurl 传输操作执行的最长时间（以秒为单位）。通常，名称查找可能需要相当长的时间，并且将操作限制在不到几分钟的时间内可能会中止完全正常的操作。此选项将导致 curl 使用 SIGALRM 来启用超时系统调用。
> 
> 在类 unix 系统中，这可能会导致使用信号，除非设置了 CURLOPT_NOSIGNAL。
> 
> **默认超时为 0（零），这意味着它永远不会超时。**

# linux - 在 shell 命令中格式化十进制

> ID：13835646
> 
> 赞同：0
> 
> 时间：2012-12-12T08:29:20.970
> 
> 标签：linux, shell

输入

```
 CTCF_1276       4.006055058150985e-03
  CTCF_1274       1.726979566495019e-02 
```

输出

```
 CTCF_1276       4.00606e-03
  CTCF_1274       1.72698e-02 
```

我知道`awk`可以很容易地做到这一点，但我不喜欢它，因为`%.5e`如果我想从 python 调用它，我需要转义字符串中的 。有没有人有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:58:33.697

*   重击：

    ```
    printf '%.5e' 4.006055058150985e-03 
    ```

*   Python：

    ```
    print('{:.5e}'.format(4.006055058150985e-03)) 
    ```

*   perl:

    ```
    printf '%.5e', 4.006055058150985e-03 
    ```

*   awk：

    ```
    printf '%.5e', 4.006055058150985e-03 
    ```

# java - 临时阵列

> ID：13835647
> 
> 赞同：1
> 
> 时间：2012-12-12T08:29:21.690
> 
> 标签：java, arrays, conways-game-of-life

我正在编写一个基于 John Conway 的生命游戏的程序。经过几天的不间断工作，我得到了编译甚至运行。但是，它打印出来的结果是错误的......

这是我的代码（不包括主要方法）

```
 //clears the grid
public static void clearGrid ( boolean[][] grid )
{

    for(int row = 0; row < 18; row++){
       for(int col = 0; col < 18; col++){
          grid[row][col]= false;
       }
    }
    //set all index in array to false
}

//generate the next generation
public static void genNextGrid ( boolean[][] grid )
{
    int n; //number of neighbors

    boolean[][] TempGrid = grid;// a temporary array
    for(int row = 0; row < 18; row++)
    {
        for(int col = 0; col < 18; col++)
        {
            TempGrid[row][col] = grid[row][col];
            n = countNeighbors(grid, row, col);

            if(grid[row][col] == true)
            {
                if(n != 2 && n != 3)
                {
                    TempGrid[row][col] = false;
                }
                else
                    TempGrid[row][col] = true;
            }

            else
            {
                if(n == 3)
                {
                    TempGrid[row][col] = true;
                }
                else
                    TempGrid[row][col] = false;
            }
            grid[row][col] = TempGrid[row][col];
        }
    }
}

 //count how many neighbors surrounding any speicific cell
public static int countNeighbors ( final boolean[][] grid, final int row, final int col )
{
    int n = 0;
    for (int TempRow = row - 1; TempRow <= row + 1; TempRow++)
    {
        if (TempRow >= 0 && TempRow < 18)
        {
            for (int TempCol = col - 1; TempCol <= col + 1; TempCol++)
            {
                if (TempCol >= 0 && TempCol < 18 && (TempRow != row || TempCol != col))
                {
                    if (grid[TempRow][TempCol])
                    {
                        n++;
                    }
                }
            }
        }
    }
    return n;
 } 
```

我很确定问题出现在我的`genNextGrid`方法中。

包括作业表

```
public static void genNextGrid (boolean[][] grid); 
```

> 这种方法实际上将生成下一代模拟。它应该使用作为“当前”代传递给它的二维数组网格。它应该创建一个第二个临时二维数组来保存“下一代”。您将需要创建这个临时矩阵来使用，因为您无法更改当前矩阵，因为您可能会丢失成功创建下一代所需的所有信息。”

1.  我创建了一个临时数组
2.  我将当前数组复制到临时数组
3.  我后来像指令所说的那样将临时复制回当前数组。

所以我不确定我做错了什么。

快凌晨 3 点了，从中午开始一直盯着我的 Vim 屏幕。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T08:31:41.970

```
boolean[][] TempGrid = grid; 
```

将使用相同的数组，只是名称不同。您必须分配一些新内存。查看您的代码，这应该可以解决问题：

```
boolean TempGrid = new boolean[18][18]; 
```

`18`（如果你用常数替换那些 s 会好得多）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T08:32:41.130

最明显的问题在这里：

```
 boolean[][] TempGrid = grid;// a temporary array 
```

`TempGrid`只是指向`grid`. 您需要创建一个单独的数组：

```
 boolean[][] TempGrid = new boolean[18][18]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-12T08:36:24.793

除了没有真正创建一个新的临时数组，而只是获取对旧临时数组的引用，正如其他答案中所说：您将`tempGrid`单元格复制到`grid`您计算它的同一循环中的单元格中。所以下一次循环迭代将使用新的计算值，而不是网格中当前的“旧”值。

你需要先计算出整个`tempGrid`，然后把它复制过来`grid`。或者比复制更好，将网格设置为指向 tempGrid 的数组，但这可能超出您的作业范围（您必须返回并将其分配`tempGrid`给`genNextGrid()`原始网格参考）。

`tempGrid`需要一个而不是单个临时单元的全部要点是，`grid`在计算下一代时需要上一代。

# sql - SQL Server 2008 使用另一个表中的值更新表

> ID：13835656
> 
> 赞同：2
> 
> 时间：2012-12-12T08:29:53.870
> 
> 标签：sql, sql-server, sql-server-2008, join, sql-update

下面你可以看到我的简化数据库模型：

![在此处输入图像描述](../Images/0714806f762a1e96f4674a1a77fe054e.png)

由于错误，**Job.location**列中只有空值，其中条目属于某个P **​​lan**。因此，我想更新与此计划关联的所有作业，将**Job.location**设置为拥有此计划的**User的****Location.name 。**

 **我试过这个 SQL 查询：

```
 update dbo.Job set location =

        (select name from dbo.Location as loc where

           loc.objectid = objectid  and loc.user_id in 

           (select userid from dbo.[Plan] as p where p.planid = 20))

        where planid = 20 
```

但是，结果总是：*0 rows affected*。子查询本身可以正常工作。

我怎样才能实现具有特定计划的所有工作都受到影响？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T08:36:55.040

我认为您的错误可能是您`objectid`在 subquery 中没有列的别名`loc.objectid = objectid`，因此当您自己运行子查询时，它就像`loc.objectid = loc.objectid`在更新中运行它时一样`loc.objectid = dbo.Job.objectid`

在您的架构中，用户可以有多个位置，但假设每个用户和对象只有一个位置，您可以尝试以下查询：

```
update dbo.Job set
    location = L.Name
from dbo.Job as J
    inner join dbo.[Plan] as P on P.planid = J.planid
    inner join dbo.Location as L on L.user_id = P.userid and L.objectid = J.objectid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T08:40:35.113

```
UPDATE
j
SET Job.location = loc.name
FROM
Job j
INNER JOIN Plan p ON j.planid = p.planid
INNER JOIN aspnet_Users u ON p.userid = u.UserId
INNER JOIN Location loc ON u.UserId = loc.user_id
WHERE j.planid = 20 
AND p.planid = 20 
```**

# objective-c - 如何使用核心数据选择有条件的子对象？

> ID：13835657
> 
> 赞同：2
> 
> 时间：2012-12-12T08:29:54.873
> 
> 标签：objective-c, ios, core-data

[数据库结构图像。](https://habrastorage.org/storage2/e12/150/cff/e12150cff4f22e553436ecf1553992e8.png)![数据库结构图像。](../Images/30c55ce67d2efccf3a19dbdde402a291.png)

在调试器监视条件下`country`使用谓词就可以了。在下一个视图控制器中获取子对象，但调试器中的请求仅得到关系条件。如何发送子对象的条件？和同样的方式。`active = 1``where zactive = 1``country.regions``active = 1``region.items`

有一些想法：

1.  过滤结果，`country.regions`但查询将保持不变
2.  自己建立关系

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:04:13.410

您可以使用谓词创建获取请求，并且可以在谓词中使用国家对象。例子：

```
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Region"];
request.predicate = [NSPredicate predicateWithFormat:
    @"country = %@ AND active = 1", country];
NSError *error;
NSArray *activeRegions = [managedObjectContext executeFetchRequest:request
    error:&error]; 
```

# solr - Solr 拼写检查

> ID：13835659
> 
> 赞同：2
> 
> 时间：2012-12-12T08:30:02.083
> 
> 标签：solr, spell-checking

我正在使用 Solr Spell Check 。启动并运行。但是对于某些拼写错误，它没有给出预期的结果：

正确的词：癌症

拼写错误：Cacner、cacnar、cancar、cancre、cancere。

我没有得到“癌症”作为“cacnar”的建议，而是显示“inner”，虽然听起来更像是 cacner 不是正确的建议。对于 cacnar，我再次收到“肺”的建议。

有什么方法可以将其配置为显示癌症而不是其他结果？

或者，在向用户展示之前可以参考的建议是否有任何分数？

根据请求，这里是配置：用于字典的字段（在 schema.xml 中）：

```
<copyField source="procname"  dest="dtextspell" />
 <field name = "dtextspell" stored="false" type="text_small" multiValued="true" indexed="true"/> 
```

“text_small”的定义（同样在 schema.xml 中）：

```
<fieldType name="text_small" class="solr.TextField" positionIncrementGap="100" omitNorms="true">
      <analyzer type="index">
              <tokenizer class="solr.StandardTokenizerFactory"/>
            <filter class="solr.LowerCaseFilterFactory"/>
            <filter class="solr.StandardFilterFactory"/>
      </analyzer>
     <analyzer type ="query">
              <tokenizer class="solr.StandardTokenizerFactory"/>    

     <filter class="solr.LowerCaseFilterFactory"/>
     <filter class="solr.StandardFilterFactory"/>
     </analyzer>
</fieldType> 
```

在 solrconfig.xml 中：

```
<searchComponent name="spellcheck" class="solr.SpellCheckComponent">

<str name="queryAnalyzerFieldType">text_small</str>
<lst name="spellchecker">
  <str name="name">default</str>
   <str name="classname">solr.IndexBasedSpellChecker</str>
    <str name="field">dtextspell</str>
    <float name="thresholdTokenFrequency">.0001</float>

  <str name="spellcheckIndexDir">./spellchecker</str>
   <str name="field">name</str>
    <str name="buildOnCommit">true</str>

</lst></searchComponent> 
```

像这样将它附加到选择请求处理程序：

```
<requestHandler name="/select" class="solr.SearchHandler">

 <lst name="defaults">
   <str name="echoParams">explicit</str>

   <int name="rows">10</int>
   <str name="spellcheck.count">10</str>
   <str name="df">text</str>
 </lst>
 <arr name="last-components">
   <str>spellcheck</str>
 </arr>   </requestHandler> 
```

要构建拼写检查：

```
http://localhost:8080/solr/select?q=*:*&spellcheck=true&spellcheck.build=true 
```

要搜索术语：

```
http://localhost:8080/solr/select?q=procname:%22cacner%22&spellcheck=true&defType=edismax 
```

响应 XML：

```
<lst name="spellcheck"><lst name="suggestions">
     <lst name="cacner">
     <int name="numFound">1</int>
     <int name="startOffset">10</int>
     <int name="endOffset">16</int>
      <arr name="suggestion">
     <str>inner</str> <end tags start from here> 
```

希望能帮助到你 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:01:19.490

听起来您最近没有重建拼写检查器的索引。通过附加到查询字符串的查询来请求手动更新`spellcheck=true&spellcheck.build=true`（不要在每个请求上都这样做，因为构建过程可能需要一些时间）。您还应该确保使用正确的字段来构建拼写检查器的索引。

您还可以配置拼写检查器组件以[在每次提交](http://wiki.apache.org/solr/SpellCheckComponent#Building_on_Commits)或[每次优化](http://wiki.apache.org/solr/SpellCheckComponent#Building_on_Optimize)时重建索引，方法是添加：

```
<str name="buildOnCommit">true</str> 
```

或者

```
<str name="buildOnOptimize">true</str> 
```

到您的拼写检查器配置。

# grid - 刷新网格时 Dojo 网格隐藏

> ID：13835663
> 
> 赞同：0
> 
> 时间：2012-12-12T08:30:03.523
> 
> 标签：grid, dojo, invisible

我每秒都在刷新`dojox.grid.EnhancedGrid`。`dojo.data.ItemFileWriteStore`我在其中一个选项卡中有一个`dijit.layout.TabContainer`位置`EnhancedGrid`。当我切换选项卡并返回网格选项卡时，整个`grid`消失了。

有什么解决办法？

```
var store = new dojo.data.ItemFileWriteStore({
    url: '',
    data: result,
    urlPreventCache: false
});
grid.setStore(store); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:41:46.883

我不确定是否使用`EnhancedGrid`，但是当我用来`DataGrid`创建动态和变化的矩阵时遇到了同样的错误，这就是我能够修复它的方法。

您的问题出现是因为：

1.  您在网格中的旧结构属性不支持新存储（不同的字段名等）。如果你没有得到正确的结构，Dojo 会抱怨并且你看不到网格。

2.  我很确定就是这个。`grid.setStore(newStore)`第二次不起作用可能是因为`grid`它适应了商店的第一次声明。我尝试了`grid.setStore()`and`grid.setStructure()`方法，但在第一次“刷新”后它没有出现。

我的解决方案：

`dojo.empty()`每次刷新新商店时，清空容器并在该容器中创建一个新网格

# exception - 使用 play 在文件中记录异常

> ID：13835665
> 
> 赞同：1
> 
> 时间：2012-12-12T08:30:09.300
> 
> 标签：exception, logging, playframework

我想使用 play 1 在日志文件中记录异常。谁能告诉我如何配置它？如果是重复的问题，请指出。

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:20:51.300

`log4j.properties`您可以使用在`conf/`目录中创建自定义：

有关详细信息，请参阅[生产日志](http://www.playframework.org/documentation/1.2.4/production#logging)。

# openerp - 进货 OpenERP ，新用户的访问权限？

> ID：13835667
> 
> 赞同：0
> 
> 时间：2012-12-12T08:30:18.333
> 
> 标签：openerp, stock

我试图在 openerp 中创建新用户并为他创建一个公司，并给他这些权限访问
**销售管理？：经理
仓库管理？: 经理
会计和财务？
:人力资源经理？: 员工
管理？: 配置**
但他无法创建进货订单，此引发出现
**AccessError
操作被访问规则禁止，或对已删除的文档执行（操作：读取，文档类型：位置）。**
然后我在位置对象的记录规则中删除了域，提升消失了，但是如果跳过它，合作伙伴对象会出现一个新的域，这个提升出现
**未知错误
，列“account_id”中的空值违反非空约束**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T07:45:42.630

在这个问题下面要考虑的可能性。

*   您没有为新创建的用户授予对库存位置的访问权限。

*   而且您还没有创建新公司的会计科目表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:13:39.457

我不知道为什么会出现访问错误，但是您在此处指定的“未知错误”可能是因为您没有在产品中指定费用帐户，或者您没有为合作伙伴指定应收帐款和应付帐款。

# c++ - 无法在表单的文本框中更新（或连续写入）计数器

> ID：13835672
> 
> 赞同：1
> 
> 时间：2012-12-12T08:30:37.250
> 
> 标签：c++, winforms, visual-studio, c++-cli

我是中级 C++ 程序员。但对 Visual Studio GUI 编程来说是新的。请相信我，我真的搜索了其他用户也得到的以前的错误，但真的不能再继续下去了。非常感谢您的进一步帮助。

我只想在小屏幕上看到一个连续的计数器。当我按下开始按钮时，计数器必须开始，直到按下停止按钮。

我调试表单项目，显示窗口，但是当我按下“开始”按钮时出现错误：

```
An unhandled exception of type 'System.InvalidOperationException' occurred in System.Windows.Forms.dll

Additional information: Cross-thread operation not valid: Control 'textBox1' accessed from a thread other than the thread it was created on. 
```

我也尝试了 /* */ 中代码部分的选择，但我又不能做我想做的事。

```
#include <windows.h>

using namespace System;
using namespace System::Threading;

int formcounter, xx;

#pragma once

namespace denemeform {

    using namespace System;
    using namespace System::ComponentModel;
    using namespace System::Collections;
    using namespace System::Windows::Forms;
    using namespace System::Data;
    using namespace System::Drawing;

    public ref class Form1 : public System::Windows::Forms::Form
    {

    public:
        Form1(void)
        {
            InitializeComponent();
            formcounter=0;
        }

    protected:
        ~Form1()
        {
            if (components)
            {
                delete components;
            }
        }
    private: System::Windows::Forms::Button^  button1;
    protected: 
    private: System::Windows::Forms::Button^  button2;
    private: System::Windows::Forms::TextBox^  textBox1;

    private:
        System::ComponentModel::Container ^components;

#pragma region Windows Form Designer generated code
        void InitializeComponent(void)
        {
            this->button1 = (gcnew System::Windows::Forms::Button());
            this->button2 = (gcnew System::Windows::Forms::Button());
            this->textBox1 = (gcnew System::Windows::Forms::TextBox());
            this->SuspendLayout();

            this->button1->Location = System::Drawing::Point(27, 24);
            this->button1->Name = L"button1";
            this->button1->Size = System::Drawing::Size(75, 23);
            this->button1->TabIndex = 0;
            this->button1->Text = L"&Start";
            this->button1->UseVisualStyleBackColor = true;
            this->button1->Click += gcnew System::EventHandler(this, &Form1::button1_Click);

            this->button2->Location = System::Drawing::Point(166, 24);
            this->button2->Name = L"button2";
            this->button2->Size = System::Drawing::Size(75, 23);
            this->button2->TabIndex = 1;
            this->button2->Text = L"Sto&p";
            this->button2->UseVisualStyleBackColor = true;
            this->button2->Click += gcnew System::EventHandler(this, &Form1::button2_Click);

            this->textBox1->Location = System::Drawing::Point(82, 71);
            this->textBox1->Name = L"textBox1";
            this->textBox1->Size = System::Drawing::Size(100, 20);
            this->textBox1->TabIndex = 2;

            this->AutoScaleDimensions = System::Drawing::SizeF(6, 13);
            this->AutoScaleMode = System::Windows::Forms::AutoScaleMode::Font;
            this->ClientSize = System::Drawing::Size(269, 139);
            this->Controls->Add(this->textBox1);
            this->Controls->Add(this->button2);
            this->Controls->Add(this->button1);
            this->Name = L"Form1";
            this->Text = L"Form1";
            this->ResumeLayout(false);
            this->PerformLayout();
        }
#pragma endregion

        void Test() //test code:: when "Start" is pushed, this code is what executes
        {
            int formcounter=0; //test variable

            while(xx) 
            {
                formcounter++;
                this->textBox1->Text = formcounter.ToString(); //sets first textbox to 'a'
                Sleep(100); //pause for 1 second before continuing
            }
                /*formcounter++;
                if (this->InvokeRequired)
                this->Invoke(gcnew MethodInvoker(this, &Form1::Test));
            else
                this->textBox1->Text = formcounter.ToString();
                Sleep(1000);*/
        }

    private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) 
    {
        xx=1;
        /*Thread^ oThread = gcnew Thread( gcnew ThreadStart( this, &Form1::Test ) );
        oThread->Start();*/
        Thread^ tThread = gcnew Thread(gcnew ThreadStart(this, &Form1::Test));
        tThread->Start();
    }
    private: System::Void button2_Click(System::Object^  sender, System::EventArgs^  e) 
    {
        xx=0;
    }
};
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T00:03:47.330

代码现在可以正确执行。

```
void SetTextBoxOnce()
{
    this->textBox1->Text = formcounter.ToString(); 
}

void Test()  
{
    formcounter=0; //test variable

    while(xx) 
    {
        formcounter++;
    this->Invoke(gcnew MethodInvoker(this, &Form1::SetTextBoxOnce));
        Sleep(100);  
        }
    }

private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) 
{
    xx=1;
    Thread^ tThread = gcnew Thread(gcnew ThreadStart(this, &Form1::Test));
    tThread->Start();
}
private: System::Void button2_Click(System::Object^  sender, System::EventArgs^  e) 
{
    xx=0;
} 
```

代码现在可以正确执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T16:46:58.667

你没有说当你使用注释掉的代码时会发生什么，但我相信我知道发生了什么。

您确实需要使用 InvokeRequired & `this->Invoke`，但是您将错误的东西传递给`this->Invoke`. 您正在传递一个带有循环的方法（Form1::Test），但它没有返回。您应该传递一个只设置文本框一次的委托。

尝试`formcounter`成为类字段而不是局部变量，并执行以下操作：

```
bool xx;
int formcounter;

void SetTextBoxOnce()
{
    this->textBox1->Text = formcounter->ToString();
}

void TestThread()
{
    this->formcounter = 0;
    while(xx)
    {
        this->formcounter++;
        // We're running on a newly created thread, we know that we ALWAYS need to Invoke.
        this->Invoke(gcnew MethodInvoker(this, &Form1::SetTextBoxOnce));
        Thread::Sleep(1000);
    }
} 
```

# android - Google Cloud Messaging - 有时直到网络状态发生变化才会收到消息

> ID：13835676
> 
> 赞同：40
> 
> 时间：2012-12-12T08:30:56.687
> 
> 标签：android, google-cloud-messaging, android-networking

在处理一个与 GCM 集成的小项目时，我偶然发现了一个奇怪的问题。

有时当我开始查看日志以查看是否收到消息时，消息似乎没有通过，直到我更改了网络状态（IE 最初在 WiFi 上，如果我关闭 WiFi 并移动到移动数据，则消息到达美好的）。在我更改网络状态后，消息开始完全正常地到达，一旦我将网络状态更改回之前的状态（在本例中为 WiFi），消息将继续被接收。

该项目本身包括启动时启动的能力（启动时启动 GCMBaseIntentService），它再次运行良好，我确信应用程序/服务正在运行，因为我在发生此问题时手动启动了应用程序（其中还检查服务是否正在运行，如果不是，则运行它并检查它是否已注册）。

有没有其他人遇到过这个问题，或者有任何关于我如何解决这个问题的指示？在未收到消息的时间和收到消息的时间（更改网络状态之后）之间，我在日志中没有看到任何帮助。我浏览了 GCM 文档，看不到由于超时（在设备本身上）或任何可能影响此的配置选项而未收到消息的任何提及。

感谢任何帮助 - 如果需要，我可以提供源代码，尽管它几乎不偏离 android-sdk 中提供的演示应用程序。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-13T18:49:28.693

我也注意到了这一点。虽然我没有深入研究实际代码，但这是我对为什么会发生这种情况的理解。

GCM（和大多数推送消息服务）通过保持对 Google 推送通知服务器开放的长期套接字来工作。通过在电话和服务器之间发送“心跳”消息，套接字保持打开状态。

有时，网络状态可能会发生变化，这个套接字会被破坏（因为设备的 IP 地址发生了变化，例如从 3g 变为 wifi）。如果消息在套接字重新建立之前进来，那么设备将不会立即得到消息。

仅当电话注意到套接字损坏时才会重新连接，这仅在它尝试发送心跳消息时才会发生。

同样，这只是我对它如何工作以及为什么会发生的基本理解，我可能是错的。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-12-16T20:14:43.157

GCM 消息延迟的原因有很多。如果在您更改网络状态或打开/关闭飞行模式后消息开始到达 - 最可能的原因是网络关闭连接而不发送 FIN/RST。

GCM 保持长期连接 - 如果它知道连接已断开，则重新连接。路由器/AP/NAT 应该发送一个 FIN 或 RST 来终止 TCP 连接 - 所以 GCM 和服务器将知道连接已死。

然而，一些路由器和移动运营商不这样做，然后 GCM 需要依靠心跳，在 Wifi 上大约 15 分钟，在移动设备上更多。电池寿命/网络使用和心跳频率之间存在权衡。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T16:44:23.987

根据您在上述答案中的评论以及我对 GCM 推送通知的经验，没有任何理由表明如果网络（互联网连接）可用，您不应该收到推送通知，我总是在运行推送通知应用程序之前检查互联网连接可用性像这样尝试检查如果这是真的你应该收到推送通知

```
 private boolean isNetworkAvailable() {
    ConnectivityManager connectivityManager 
          = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo activeNetworkInfo = connectivityManager.getActiveNetworkInfo();
    return activeNetworkInfo != null;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-07T17:37:30.510

所以，如果@theelfismike 的想法是正确的，我可以使用类似的东西：

```
 ConnectivityManager cm = (ConnectivityManager) context
            .getSystemService(Context.CONNECTIVITY_SERVICE);

    NetworkInfo activeNetwork = cm.getActiveNetworkInfo();
    if (null != activeNetwork) {
        if(activeNetwork.getType() == ConnectivityManager.TYPE_WIFI)
           // here the network changed to Wifi so I can send a heartbeat to GCM to keep connection

        if(activeNetwork.getType() == ConnectivityManager.TYPE_MOBILE)
          //here the network changed to mobileData so I can send a heartbeat to GCM to keep connection
    } 
```

我的解决方案好吗？

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2013-02-09T08:43:56.017

在 GCMIntentSevice 类中，当您收到来自服务器的消息时，onMessage 方法会被调用，因此此时您可以执行类似...

```
PowerManager pm = (PowerManager) getApplicationContext()
                .getSystemService(Context.POWER_SERVICE);
        WakeLock wakeLock = pm.newWakeLock(
                        (PowerManager.SCREEN_BRIGHT_WAKE_LOCK
                                | PowerManager.FULL_WAKE_LOCK | PowerManager.ACQUIRE_CAUSES_WAKEUP),"TAG");
        wakeLock.acquire(); 
```

你必须添加

> `<uses-permission android:name="android.permission.WAKE_LOCK" />` 您清单文件中的权限..

这应该可以解决问题...

# c# - 计算非空矩阵元素的数量

> ID：13835682
> 
> 赞同：2
> 
> 时间：2012-12-12T08:31:17.957
> 
> 标签：c#, arrays, multidimensional-array

我有一个数组数组，类似于`arr[26,20]`每个数组的第一个位置的字母表。

所以以矩阵形式排列它会像这样。

*   ABCDEFGHIJKLMNOPQRSTUVWXYZ
*   ///////////////////////
*   ///////////////////////
*   ///////////////////////
*   ///////////////////////

表示空值的正斜杠。

我正在尝试在单个列中获取非空元素的数量。

所以我可以在普通数组上使用的代码是

```
int number = arr[0].Count(s => s != null); 
```

但是，我将如何为描述的矩阵执行此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T08:37:27.850

您可以使用`Enumerable.Range()`生成行索引：

```
int colIdx = 0; // column index to check
int num = Enumerable.Range(0,arr.GetLength(0)).Count(i => arr[i,colIdx] != null); 
```

其中`GetLength(dim)`给出沿维度的元素数量`dim`（0 - 第一维度，1 - 第二维度等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T08:37:41.173

您可以简单地使用：

```
int columnIndex = 1;// column index to check
arr.Count(s => s[columnIndex] != null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T09:05:47.403

您可以使用

```
arr.Cast<YourArrayElementType>().Count(s => s != null); 
```

原因是多维数组是非泛型的`IEnumerable`，但不幸的是不是`IEnumerable<YourArrayElementType>`。

糟糕，这会计算整个矩阵中的非空元素，而不仅仅是一列/行。因此，请改用 digEmAll 的答案。或者为什么不使用一个好的旧`for`循环？

# delphi - Delphi TGridPanel - 动态隐藏一些行

> ID：13835683
> 
> 赞同：4
> 
> 时间：2012-12-12T08:31:23.593
> 
> 标签：delphi, layout, tgridpanel

我有像这样的 16 x 4 网格面板：

![在此处输入图像描述](../Images/455d1f41b2dbf00f5221df6d452c73fa.png)

有时我想隐藏一些行并将底行向上移动。当我将组件可见属性设置为 false 时，布局不会更新：

![在此处输入图像描述](../Images/14cfa3190e63d6fba16129b543dfde8c.png)

然而，行大小类型设置为自动：

![在此处输入图像描述](../Images/31e4dfd16b823aa41708f3e8437957e9.png)

为什么在没有可显示的内容时组件不将行高设置为零？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:46:42.443

***为什么在没有可显示的内容时组件不将行高设置为零？***

因为仅当该行的所有列中都没有组件时，该行才被视为空，而不是它们是否可见。所以同样返回[`IsRowEmpty`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.ExtCtrls.TCustomGridPanel.IsRowEmpty)方法。要解决此问题，单元格组件需要通知您其可见性更改。生成此通知后，您可以像[`IsRowEmpty`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.ExtCtrls.TCustomGridPanel.IsRowEmpty)方法一样检查该行，但您将检查控件是否可见，而不是检查它们是否已分配。根据这种方法的结果，您可以将 的大小设置[`Value`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.ExtCtrls.TCellItem.Value)为 0 以隐藏该行。

在 interposed 类的帮助下，检查行或列中的所有控件是否可见的方法，您可以编写类似这样的内容。当某个行或列中的所有现有控件都可见时，这些方法返回 True，否则返回 False：

```
uses
  ExtCtrls, Consts;

type
  TGridPanel = class(ExtCtrls.TGridPanel)
  public
    function IsColContentVisible(ACol: Integer): Boolean;
    function IsRowContentVisible(ARow: Integer): Boolean;
  end;

implementation

function TGridPanel.IsColContentVisible(ACol: Integer): Boolean;
var
  I: Integer;
  Control: TControl;
begin
  Result := False;
  if (ACol > -1) and (ACol < ColumnCollection.Count) then
  begin
    for I := 0 to ColumnCollection.Count -1 do
    begin
      Control := ControlCollection.Controls[I, ACol];
      if Assigned(Control) and not Control.Visible then
        Exit;
    end;
    Result := True;
  end
  else
    raise EGridPanelException.CreateFmt(sInvalidColumnIndex, [ACol]);
end;

function TGridPanel.IsRowContentVisible(ARow: Integer): Boolean;
var
  I: Integer;
  Control: TControl;
begin
  Result := False;
  if (ARow > -1) and (ARow < RowCollection.Count) then
  begin
    for I := 0 to ColumnCollection.Count -1 do
    begin
      Control := ControlCollection.Controls[I, ARow];
      if Assigned(Control) and not Control.Visible then
        Exit;
    end;
    Result := True;
  end
  else
    raise EGridPanelException.CreateFmt(sInvalidRowIndex, [ARow]);
end; 
```

第一行显示的用法：

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  // after you update visibility of controls in the first row...
  // if any of the controls in the first row is not visible, change the 
  // row's height to 0, what makes it hidden, otherwise set certain height
  if not GridPanel1.IsRowContentVisible(0) then
    GridPanel1.RowCollection[0].Value := 0
  else
    GridPanel1.RowCollection[0].Value := 50;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:25:23.700

我有一个 hacky 解决方案...保持 Autosizing

```
Procedure ShowHideControlFromGrid(C:TControl);
begin
  if C.Parent = nil then
    begin
      c.Parent := TWinControl(c.Tag)
    end
  else
    begin
    c.Tag := NativeInt(C.Parent);
    c.Parent := nil;
    end;
end;

procedure TForm4.Button1Click(Sender: TObject);
begin   // e.g. Call
 ShowHideControlFromGrid(Edit5);
 ShowHideControlFromGrid(Edit6);
 ShowHideControlFromGrid(Edit7);
 ShowHideControlFromGrid(Label1);
end; 
```

# java - 番石榴表替代品

> ID：13835685
> 
> 赞同：0
> 
> 时间：2012-12-12T08:31:37.643
> 
> 标签：java, guava

我们有分区数据库，每个用户的数据都存储在特定的服务器上。

我的用例相当简单：

*   用户有对话。
*   对于一个对话，数据库中有两个代表记录（每个用户都有自己的对话记录）。

如果对用户进行删除操作，我想删除每个用户之间的所有对话。也就是说，我需要删除每个服务器中与用户相关的所有对话。我迫切需要每台服务器的分组数据。

```
Table<Integer, Integer, Set<Integer>> setPerUser = HashBasedTable.create();

for(Conversation conversation : conversations) {
   Integer serverIndex = getServerForUser(conversation);
   Integer userId = conversation.getUserId();
   Set<Integer> uci = setPerUser.get(serverIndex, userId);
   if(uci == null) {
      uci = Sets.newHashSet();
      setPerUser.put(serverIndex, userId, uci);
   }
   uci.add(conversation.id);
} 
```

一开始我以为每一行都可以代表服务器和列用户。似乎 Table 数据结构不适合这种情况。在这种情况下，表表示的是太稀疏的数据。虽然 Table 可以表示`M x N`数据，但我只有`M + N`数据。

表示这些数据的正确数据结构是什么？

编辑：

当然 Table 可以处理这种情况，但我不确定它是否适合这个问题。让我想到 Table 的是具有行和列方法，这意味着复杂的算法。在我的用例中，列有一个值，这意味着每个用户只有一个对应的服务器，但每一行有多个值意味着每个服务器有多个用户。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T09:50:53.863

我认为使用现有的数据结构不适用于您的用例。

相反，您应该设计与您的数据相对应的对象：

```
public Class User{
  int id;
  Set<Conversation> conversations;
}

public class Conversation{
  int id;
  Set<User> parcipitants;
} 
```

（Getters, Setters, equals() / hashCode() 在这两种情况下都省略了）

现在保留两张地图来查找用户和对话：

```
private Map<Integer, Conversation> conversationsById;
private Map<Integer, User> usersById; 
```

写方法之类`getOrCreateConversation(Integer id)`的`getOrCreateUser(Integer id)`。

此外，您应该考虑使用 JPA 或 Hibernate 之类的持久性技术，因为它们在维护此类关系方面非常出色。

# javascript - Javascript 表单元素输入验证处理

> ID：13835687
> 
> 赞同：0
> 
> 时间：2012-12-12T08:31:55.507
> 
> 标签：javascript, validation

我有 2 个无线电组：电子邮件和系统。我希望它在没有为它们两个选择单选按钮时显示错误消息。这意味着，我希望从其中一个单选组中选择至少 1 个单选按钮。

如果选择了带有 Create 值的 radio_system 按钮，我希望系统和部门的复选框都被启用。如果在电子邮件或系统组中选择了具有更改或终止值的单选按钮，我希望启用备注文本区域。

我知道这听起来很复杂。但是我怎样才能让它工作呢？请帮忙...

```
<script type="text/javascript">
$(document).ready(function() 
{
    $("#form").validate(
    {
        rules: {
                    radio_email: "required",
                    radio_system: "required",
        remark: "required",
        system: "required",
        dept: "required",
}
    });  
});
</script>

<style type="text/css">
.block { display: block; }
form.form_class label.error { display: none; }  
</style>

<form id="form" name="form" class="form_class">
<input type="radio"  name="radio_email" value="Create" id="radio_email_0" />New
<input type="radio" name="radio_email" value="Change" id="radio_email_1" />Change
<input type="radio" name="radio_email" value="Terminate" id="radio_email_2" />Termination

<input type="radio" name="radio_system" value="Create" id="radio_system_0" />New
<input type="radio" name="radio_system" value="Change" id="radio_system_1"/>Change
<input type="radio" name="radio_system" value="Terminate" id="radio_system_2" />Termination

<label for="radio_system" class="error">Please select under either Email or System.</label>

<textarea name="remark" id="remark" cols="79" rows="3"></textarea>

<input type="checkbox" name="system[]" value="A" id="app_0" />A
<input type="checkbox" name="system[]" value="B" id="app_0" />B
<input type="checkbox" name="system[]" value="C" id="app_0" />C

<input type="checkbox" name="dept[]" value="A" id="app_0" />A
<input type="checkbox" name="dept[]" value="B" id="app_0" />B
<input type="checkbox" name="dept[]" value="C" id="app_0" />C

<input type="submit" name="submitted_form" id="Submit" value="Submit"/>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:47:49.970

将 onClick() 处理程序添加到所有单选按钮。编写一个 javascript 函数，该函数将从所有单选按钮的 onclick() 方法中调用。访问您在 GUI 上拥有的所有其他元素的 javascript id，然后您可以决定要采取的操作。希望对你来说足够清楚。

# .net - 如何在窗口显示之前计算 ActualWidth ActualHeight

> ID：13835690
> 
> 赞同：3
> 
> 时间：2012-12-12T08:32:07.713
> 
> 标签：.net, wpf, window, measure, actualwidth

我试图在窗口显示之前计算`StackPanel` `width`, `height`（位于网格的中间单元格）（例如在窗口构造函数中）。如何实现？

```
<Window x:Class="WpfApplication2.TestWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="TestWindow" Height="300" Width="300">
<Grid Name="grid">
    <Grid.ColumnDefinitions>
        <ColumnDefinition></ColumnDefinition>
        <ColumnDefinition></ColumnDefinition>
        <ColumnDefinition></ColumnDefinition>
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition></RowDefinition>
        <RowDefinition></RowDefinition>
        <RowDefinition></RowDefinition>
    </Grid.RowDefinitions>

    <StackPanel Grid.Row="1" Grid.Column="1" Name="stackPanel"></StackPanel>

</Grid> 
```

测量 Window 也为 stackPanel 设置`DesiredSize`为`{0;0}`

```
public partial class TestWindow : Window
{
    public TestWindow()
    {
        InitializeComponent();

        this.Measure(new Size(this.Width, this.Height)); // -> this.DesiredSize = {0;0}

        ...

    }
} 
```

编辑1

以下适用于 FixedPage：

```
fixedPage.Measure(new Size(double.PositiveInfinity, double.PositiveInfinity)); 
fixedPage.Arrange(new Rect(0, 0, fixedPage.DesiredSize.Width, fixedPage.DesiredSize.Height)); 
```

然后我们可以访问`stackPanel.ActualWidth`和`stackpanel.ActualHeight`。

但是对于Window，它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T08:43:21.133

试试这个`Loaded`事件：

```
public TestWindow()
{
    InitializeComponent();
    this.Loaded += new RoutedEventHandler(TestWindow_Loaded);
}

void TestWindow_Loaded(object sender, RoutedEventArgs e)
{
    //this.DesiredSize shouldnt be {0,0} now
} 
```

**编辑：**由于事实上 a`StackPanel`已经占用了 maximum `Size`，即使其中没​​有项目，它的`SizeChanged`事件也只会在你添加很多项目时被触发，所以你可以使用这样的`SizeChanged`事件`StackPanel`：

```
private void spTest_SizeChanged(object sender, SizeChangedEventArgs e)
{
    if (!(e.PreviousSize.Height == 0 && e.PreviousSize.Width == 0)) //will also be fired after loading
    {
        //Create another Page
    }
} 
```

**EDIT2：**另一种可能的解决方案：

```
public MainWindow()
{
    InitializeComponent();
    yourStackPanelName.Loaded += new RoutedEventHandler(yourStackPanelName_Loaded);
}

void yourStackPanelName_Loaded(object sender, RoutedEventArgs e)
{
    double height = ((StackPanel)sender).ActualHeight;
    double width = ((StackPanel)sender).ActualWidth;
} 
```

# c# - cs 页面中的会话超时以在我的整个 asp 应用程序中使用

> ID：13835691
> 
> 赞同：0
> 
> 时间：2012-12-12T08:32:08.383
> 
> 标签：c#, asp.net, session-state

我需要为我的 Web 应用程序设置会话时间。我已将会话状态放在应用程序的 webconfig 文件中

```
 <sessionState mode="InProc" cookieless="false" timeout="1"></sessionState> 
```

在cs页面中，我是否需要调用任何方法来运行此会话状态，并且我需要将此会话状态应用于我的整个应用程序。请帮助我在cs页面中放入什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:36:42.623

如果您不想，则无需在页面中执行任何操作。将`Global.asax`文件添加到您的项目（如果您还没有文件）并查找`Session_End`方法。它应该如下所示：

```
void Session_End(object sender, EventArgs e) 
{
    // Code that runs when a session ends. 
    // Note: The Session_End event is raised only when the sessionstate mode
    // is set to InProc in the Web.config file. If session mode is set to StateServer 
    // or SQLServer, the event is not raised.

} 
```

您可以在此处使用所需的任何逻辑来重定向，向用户发送消息，进行一些数据库更改等...

注意：这将适用于您的整个 Asp.Net 应用程序！

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:39:59.773

文件中不需要特殊功能`cs`。一旦配置，`web.config`它适用于整个应用程序，如果需要，可以在`cs`文件中覆盖。

# apache - .htaccess 子域上特定页面的重写条件

> ID：13835694
> 
> 赞同：0
> 
> 时间：2012-12-12T08:32:13.237
> 
> 标签：apache, .htaccess, mod-rewrite

我不确定如何做到这一点，并且到目前为止找不到合适的问题/答案（可能是因为我不完全知道要寻找什么，所以一个相关问题的链接就可以了）。我想要的是将子域上特定页面的 URL 重定向到主域上的其他特定页面。它应该像这样工作。

每当参数。“类别”在 URL 中： http: [//blog.website.com/category/categoryname](http://blog.website.com/category/categoryname) 到 [http://www.website.com/categorie/categoryname](http://www.website.com/categorie/categoryname) （注意类别和类别之间的区别）

当 URL 中没有“类别”时 [http://blog.website.com/post-name](http://blog.website.com/post-name) 到 [http://www.website.com/posts/post-name](http://www.website.com/posts/post-name)

这些重写规则应该如何构建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:05:21.483

以下 RewriteRules 应该可以解决问题。

```
RewriteEngine On
RewriteRule ^/category/(.*)$ http://www.website.com/categorie/$1 [L]
RewriteRule ^/(.*)$ http://www.website.com/posts/$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:56:42.700

这些特定规则使它起作用：

```
RewriteCond %{HTTP_HOST} ^blog\.website\.com$ [NC]
RewriteRule ^category/(.*)$ http://www.website.com/posts/categorie/$1 [L,R=301]

RewriteCond %{HTTP_HOST} ^blog\.website\.com$ [NC]
RewriteRule ^(.*) http://www.website.com/posts/$1 [L,R=301] 
```

# youtube - 为什么即使评论确实有评分，getRating() 总是返回 null？

> ID：13835699
> 
> 赞同：1
> 
> 时间：2012-12-12T08:32:33.740
> 
> 标签：youtube, youtube-api

所以我有这个代码

```
$yt->setMajorProtocolVersion(2);

$activityFeed = $yt->getActivityForUser("google");
printActivityFeed($activityFeed);

function printActivityFeed($activityFeed) {
  foreach($activityFeed as $activityEntry) {
    $author = $activityEntry->getAuthorName();
    $gr = $activityEntry->getRating();
  }
} 
```

为什么即使评论竖起大拇指/不赞成，`$gr`总是/不存在？`null`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:37:01.233

您的 PHP 代码将转换为此 API 调用：

[https://gdata.youtube.com/feeds/api/users/google/events?v=2&prettyprint=true&key=AI39si6ZOCQQ0oBM_xkRpAO_sbowfEDoXQ10opTm62ZFj_2qjJtCI6GXGHCCz2bD2XObbV6uNPUx1EdbFXhwgN9-baWcKASXJg](https://gdata.youtube.com/feeds/api/users/google/events?v=2&prettyprint=true&key=AI39si6ZOCQQ0oBM_xkRpAO_sbowfEDoXQ10opTm62ZFj_2qjJtCI6GXGHCCz2bD2XObbV6uNPUx1EdbFXhwgN9-baWcKASXJg)

如果您查看该提要中的活动，它们都与评论评分无关。按理说，YouTube 用户名“Google”最近没有对任何评论进行评分。

# c# - 从 WebRequest 返回流

> ID：13835701
> 
> 赞同：0
> 
> 时间：2012-12-12T08:32:44.190
> 
> 标签：c#, stream, httpwebrequest

当我从 WebRequest 返回 Stream 时遇到问题，它说流已关闭，当我在同一方法中拥有所有内容时，它的工作原理是代码示例：

```
public static Stream MethodOne()
{
            Uri uri = new Uri(url, true);
            WebRequest request = WebRequest.Create(uri);
            request.Method = "GET";

            Stream responseStream = null;
            using (WebResponse webResponse = request.GetResponse())
            {
                responseStream = webResponse.GetResponseStream();
            }
} 
```

另一种方法是：

```
public static XDocument MethodTwo()
        {
            Stream stream = MethodOne();
            if (stream == null)
            {
                return null;
            }

            XmlReader xmlReader = XmlReader.Create(stream);
            return XDocument.Load(xmlReader);
        } 
```

我得到的错误是我尝试从流中创建 xmlReader 并显示以下消息：**请求被中止：连接意外关闭。**

知道如何解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:34:25.567

在读取流之前，您的 using 语句会在响应上调用 Dispose。

我会从方法一返回 WebResponse。

```
 public static XDocument MethodTwo()
    {

        WebResponse response = MethodOne();
        if (response == null)
        {
            response null;
        }

        try
        {
            var stream = response.GetResponseStream();
            XmlReader xmlReader = XmlReader.Create(stream);
            return XDocument.Load(xmlReader);
        }
        finally
        {
            response.Dispose();
        }

    } 
```

更新：更好的解决方案

```
 public static XDocument MethodTwo()
    {

        using (var response = MethodOne())
        using (var stream = response.GetResponseStream())
        {
            var stream = response.GetResponseStream();
            XmlReader xmlReader = XmlReader.Create(stream);
            return XDocument.Load(xmlReader);
        }

    }

    public static Stream MethodOne()
    {
        Uri uri = new Uri(url, true);
        WebRequest request = WebRequest.Create(uri);
        request.Method = "GET";
        return request;
    } 
```

这将确保您的资源被释放（即使发生异常）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:36:41.187

正如 SchlaWiener 指出的那样，您面临的问题是该`using`语句`Dispose()`在您可以读取流之前调用流。你应该重构你的代码如下：

```
public static Stream GetResponseStream() 
{
    var uri = new Uri(url, true);
    WebRequest request = WebRequest.Create(uri);
    request.Method = WebRequestMethods.Http.Get;
    WebResponse response = request.GetResponse();
    return response.GetResponseStream();
}

public static XDocument GetXDocument()
{
    using(Stream stream = GetResponseStream())
    {
        XmlReader xmlReader = XmlReader.Create(stream);
        return XDocument.Load(xmlReader);
    }
} 
```

这样，您将确保流仅在读取后关闭。

# python - 在 Python 中使用多播时 CPU 使用率高

> ID：13835702
> 
> 赞同：0
> 
> 时间：2012-12-12T08:32:49.103
> 
> 标签：python, performance, network-programming

我正在编写一个小的多协议图像流服务器（在 Python 中），所有协议都运行良好，除了让我的 CPU 使用率高达 150% 的多播协议！

这是多播代码：

```
 delay = 1./self.flux.ips
    imgid = 0
    lastSent = 0

    while self.connected:

        #self.printLog("Getting ready to fragment {}".format(imgid))
        fragments = fragmentImage(self.flux.imageFiles[imgid], self.fragmentSize)
        #self.printLog("Fragmented {} ! ".format(imgid))

        # Checking if the delay has passed, to respected the framerate
        while (time.time() - lastSent) < delay:
            pass

        # Sending the fragments
        for fragmentid in range(len(fragments)):
            formatedFragment = formatFragment(fragments[fragmentid], fragmentid*self.fragmentSize, len(self.flux.imageFiles[imgid]), imgid)
            self.sendto(formatedFragment, (self.groupAddress, self.groupPort))

        lastSent = time.time()

        imgid = (imgid + 1) % len(self.flux.images) 
```

UDP 协议也将图像作为片段发送，我没有任何 CPU 使用问题。请注意，客户端也有一些延迟来获取这些图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:19:58.707

使用`time.sleep(delay)`而不是（繁重的）忙碌等待，您应该会很好（请参阅这个问题[Python: Pass or Sleep for long running processes?](https://stackoverflow.com/q/529034/851737)）。

为了获得更好的性能，您应该考虑使用 I/O 事件反应器，如[`PyUV`](http://pyuv.readthedocs.org)、或.`gevent``tornado``twisted`

# android - ndk-build Platinum-jni 失败：arm-linux-androideabi/bin/ld：错误：找不到 -laxTls

> ID：13835708
> 
> 赞同：0
> 
> 时间：2012-12-12T08:33:09.230
> 
> 标签：android, android-ndk

要构建**`JNI`**共享库，您需要安装 Android NDK 并设置适当的环境变量，例如**`ANDROID_NDK_ROOT`**.

cd /Platinum scons target=arm-android-linux build_config=Release

cd /Platinum/Source/Platform/Android/modules/platinum/jni ndk-build NDK_DEBUG=0

导入位于@/Platinum/Source/Platform/Android/modules/platinum/ 的eclipse Android .project 这将创建jar 文件@/Platinum/Source/Platform/Android/modules/platinum/bin/platinum.jar

自述文件是使用 ndk-build 构建铂金的上面。第一步，命令：“ `scons target=arm-android-linux build_config=Release`”，已经成功了。第二步，命令：“ `ndk-build NDK_DEBUG=0`”，失败。失败的日志如下。

```
wingyip@ubuntu:~/Desktop/PlatinumKit-1-0-3-0_a71192_66de97/Platinum/Source/Platform/Android/module/platinum/jni$ ndk-buildStaticLibrary  : libstdc++.aSharedLibrary  : libplatinum-jni.so/home/wingyip/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/linux-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: error: cannot find -laxTls/home/wingyip/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/linux-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: /home/wingyip/Desktop/PlatinumKit-1-0-3-0_a71192_66de97/Platinum/Source/Platform/Android/module/platinum/jni/../../../../../../Build/Targets/arm-android-linux/Release/libNeptune.a(NptTls.o): in function NPT_TlsContext::~NPT_TlsContext():NptTls.cpp(.text._ZN14NPT_TlsContextD1Ev+0x18): error: undefined reference to 'ssl_ctx_free' 
```

系统：ubuntu NDK 版本：android-ndk-r8c

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:32:51.723

我也发现了这个问题。这只是一个错字，打开 Android.mk 然后将
LOCAL_LDLIBS += -laxTls更改
为：
LOCAL_LDLIBS += -laxTLS
可以看到 lib 的名称是 libaxTLS.a。

# javascript - jQuery GeoComplete - 拖动标记时获取位置

> ID：13835711
> 
> 赞同：3
> 
> 时间：2012-12-12T08:33:19.070
> 
> 标签：javascript, jquery

以[http://ubilabs.github.com/geocomplete/examples/draggable.html](http://ubilabs.github.com/geocomplete/examples/draggable.html)为例。

```
jQuery("#geocomplete").bind("geocode:dragged", function(event, latLng){
        jQuery("input[name=lat]").val(latLng.lat());
        jQuery("input[name=lng]").val(latLng.lng());            
    }); 
```

拖动标记后，我能够以 lat lng 的形式获取标记位置。但是在被拖动后我无法获得标记的当前位置。

我想在拖动后在标记的当前位置更新我的位置文本框。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-08T08:54:53.000

我设法找到了更好的工作！

Nadeeshani 发布的您周围的工作不是很精确，它会将地图集中到最近的地址。

我设法通过使用谷歌地理编码来解决这个问题，测试以下代码。

```
var options = {
  map: "#mapnew",
  country: 'uk',
  mapOptions: {
    streetViewControl: false,
    mapTypeId : google.maps.MapTypeId.HYBRID
  },
  markerOptions: {
    draggable: true
  }
};

$("#address").geocomplete(options).bind("geocode:result", function(event, result){
  $('#logs').html(result.formatted_address);
  var map = $("#address").geocomplete("map");
  map.setZoom(18);
  map.setCenter(result.geometry.location);
});

$("#address").bind("geocode:dragged", function(event, latLng){
  console.log('Dragged Lat: '+latLng.lat());
  console.log('Dragged Lng: '+latLng.lng());
  var map = $("#address").geocomplete("map");
  map.panTo(latLng);
  var geocoder = new google.maps.Geocoder();

  geocoder.geocode({'latLng': latLng }, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
      if (results[0]) {
        var road = results[0].address_components[1].long_name;
        var town = results[0].address_components[2].long_name;
        var county = results[0].address_components[3].long_name;
        var country = results[0].address_components[4].long_name;
        $('#logs').html(road+' '+town+' '+county+' '+country);
      }
    }
  });
}); 
```

请参阅我的[JSFiddle 示例](http://jsfiddle.net/EcPdP/21/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T13:45:50.027

这可能不是一个 100% 完美的解决方案，但我也遇到了同样的问题，这就是我解决问题的方法。这是一种解决方法。

```
$("#geocomplete").bind("geocode:dragged", function(event, latLng){          
$("input[name=lat]").val(latLng.lat());
$("input[name=lng]").val(latLng.lng()); 
$("#geocomplete").geocomplete("find", latLng.toString());
}); 
```

这里唯一的问题是地图设置为其默认的 zomm 大小，因为自动完成在这里有点重新初始化。

希望这会有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-03T11:56:04.753

我不确定这是否是同一个问题，但我的“查找”在执行多个“查找”时也返回了不正确的结果。似乎是因为在后续查找中设置了“界限”，并且返回了错误的结果。

作为一种解决方法，我通过添加以下行更改了“jquery.geocomplete.js”文件如下：

```
request.bounds = this.options.bounds; 
```

就在这一行之前（352）：

```
this.geocoder.geocode(request, $.proxy(this.handleGeocode, this)); 
```

那么 find 应该正常工作：

```
$("#geocomplete").geocomplete("find", latLng.toString()); 
```

# google-chrome - Chrome 或 FF 作为 IE 组件的替代品？

> ID：13835716
> 
> 赞同：0
> 
> 时间：2012-12-12T08:33:49.517
> 
> 标签：google-chrome, web-applications, integration

我目前正在从 NAV 启动不带工具栏/url 的 IE，以获得更干净的体验。

IE 存在渲染问题（与不透明度等有关），因此：

我可以在没有工具栏的情况下启动 FF 或 chrome 并设置宽度/高度。我正在浏览命令开关，但找不到关闭选项卡等的方法。

感谢您的任何建议。IE 一如既往地让我发疯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T16:21:14.260

FF 上的所有项目目前似乎都死了，

Chrome 本身具有该功能， [http://support.google.com/chrome/bin/answer.py ?hl=en&answer=95710](http://support.google.com/chrome/bin/answer.py?hl=en&answer=95710)

完了，走吧。

# shell - 在我的 tcl 脚本运行时在屏幕上打印完成的百分比？

> ID：13835717
> 
> 赞同：2
> 
> 时间：2012-12-12T08:33:50.047
> 
> 标签：shell, io, tcl

我有一个需要几分钟才能运行的 tcl 脚本（执行时间因配置不同而异）。

我希望用户对它是否仍在执行以及脚本执行时完成需要多长时间有所了解。

到目前为止我的一些想法：

1）使用 ... 表示它随着每个内部命令运行左右而不断增加。但同样，它并没有真正让第一次使用的用户知道还有多少。

2）使用我在很多地方看到的旋转斜线。

3) 在屏幕上显示实际完成百分比输出。不知道这是否可行或如何去做。

有没有人对可以做什么有任何想法，以便脚本的用户了解正在发生的事情以及如何做到这一点？

此外，如果我使用 ... 来实现它，我如何让他们打印 . 每次都在同一行。如果我在 tcl 脚本中使用 puts 来执行此操作，则 . 只是打印在下一行。

对于旋转斜线，我需要替换已经打印在屏幕上的东西。我怎么能用 tcl 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:07:02.017

首先，您在打印点时遇到问题的原因是 Tcl 正在缓冲其输出，等待新行。这通常是一种有用的行为（通常足以使其成为默认行为）但在这种情况下不需要它，因此您可以使用以下命令将其关闭：

```
fconfigure stdout -buffering none 
```

（其他缓冲选项是`line`和`full`，它们提供逐渐更高级别的缓冲以提高性能但降低响应能力。）或者，`flush stdout`在打印一个点之后执行。（或者将点打印到`stderr`，默认情况下是无缓冲的，因为主要用于错误消息。）

做一个微调器并不比打印点难多少。关键技巧是使用回车（一个不可打印的字符，有时可视为`^M`）将光标位置移回行首。将微调器代码分解为一个小过程很好：

```
proc spinner {} {
    global spinnerIdx
    if {[incr spinnerIdx] > 3} {
        set spinnerIdx 0
    }
    set spinnerChars {/ - \\ |}
    puts -nonewline "\r[lindex $spinnerChars $spinnerIdx]"
    flush stdout
} 
```

然后你需要做的就是`spinner`定期打电话。简单的！（另外，完成后在微调器上打印一些东西；只需这样做`puts "\r$theOrdinaryMessage"`。）

一直到一个实际的进度表是很好的，它建立在这些技术的基础上，但它需要你计算出有多少处理要做等等。微调器更容易实现！（特别是如果你还没有确定有多少工作要做。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:10:56.980

标准输出流最初是行缓冲的，因此在您写入换行符、调用[刷新](http://www.tcl.tk/man/tcl8.5/TclCmd/flush.htm)或关闭它（当您的脚本退出时自动完成）之前，您不会看到新的输出。您可以使用...关闭此缓冲

```
fconfigure stdout -buffering none 
```

...但是诊断、错误、消息、进度等确实应该写入[stderr](http://en.wikipedia.org/wiki/Standard_streams#Standard_error_.28stderr.29)流。它默认将缓冲设置为无，因此您不需要 fconfigure。

# objective-c - 在 appDelegate 中使用 Navigation 编程 TabBarController

> ID：13835724
> 
> 赞同：0
> 
> 时间：2012-12-12T08:34:29.467
> 
> 标签：objective-c, xcode, uitableview, uinavigationcontroller, uitabbarcontroller

我试图在我的 tabbarcontroller 的第三个选项卡中包含一个导航控制器。我有一些反馈，但我只能做到这一点。下面的代码不会产生任何错误，但似乎无法正常工作，因为应用程序刚刚退出。有人对我可能做错的事情有任何意见吗？

```
UIViewController *viewController1 = [[FirstViewController alloc] 
initWithNibName:@"PDCFirstViewController" bundle:nil];

UIViewController *viewController2 = [[SecondViewController alloc] 
initWithNibName:@"SecondViewController" bundle:nil];

viewController3 = [[UIViewController alloc] initWithNibName:@"ThirdViewController" 
bundle:nil];
UINavigationController *navigationcontroller = [[UINavigationController alloc] 
initWithRootViewController:viewController3];

self.tabBarController = [[UITabBarController alloc] init];
self.tabBarController.viewControllers = [NSArray 
arrayWithObjects:viewController1,viewController2,navigationcontroller, nil]; 
```

谢谢你们！

```
int main(int argc, char *argv[])
{
@autoreleasepool {
    return UIApplicationMain(argc, argv, nil, NSStringFromClass([PDCAppDelegate class]));
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:31:33.083

这是解决方案

```
UIViewController *courseView = [[[CoursesView alloc] initWithNibName:@"CoursesView" bundle:nil] autorelease];
UIViewController *subjectViewController = [[[SubjectViewController alloc] initWithNibName:@"SubjectViewController" bundle:nil] autorelease];
UIViewController *videoViewController = [[[VideoViewController alloc] initWithNibName:@"VideoViewController" bundle:nil] autorelease];
UIViewController *quizViewController = [[[QuizViewController alloc] initWithNibName:@"QuizViewController" bundle:nil] autorelease];
UIViewController *proifileViewController = [[[Profile2ViewController alloc] initWithNibName:@"Profile2ViewController" bundle:nil] autorelease];

UINavigationController *coursNav = [[UINavigationController alloc] initWithRootViewController:courseView];
UINavigationController *subjectNav = [[UINavigationController alloc] initWithRootViewController:subjectViewController];
UINavigationController *videoNav = [[UINavigationController alloc] initWithRootViewController:videoViewController];
UINavigationController *quizNav = [[UINavigationController alloc] initWithRootViewController:quizViewController];
UINavigationController *profileNav = [[UINavigationController alloc] initWithRootViewController:proifileViewController];

self.tabBarController = [[[UITabBarController alloc] init] autorelease];
self.tabBarController.viewControllers = @[coursNav, subjectNav,videoNav,quizNav,profileNav];
self.tabBarController.navigationController.navigationBarHidden=YES;
self.tabBarController.delegate=self;
[self.window addSubview:self.tabBarController.view];
[self.window makeKeyAndVisible]; 
```

这个对我有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:44:10.810

确保您使用的所有 nib 名称以及类名称，即如果您的 UIViewController 的类名称是 FirstViewController，则 nib 名称应该相同。您已经使用“PDCFirstViewController”作为笔尖名称。与 ThirdViewController 和 SecondViewController 相同。

试试下面的代码...

```
FirstViewController *viewController1 = [[FirstViewController 分配]
initWithNibName:@"FirstViewController" bundle:nil];

SecondViewController *viewController2 = [[SecondViewController 分配]
initWithNibName:@"SecondViewController" bundle:nil];

ThirdViewController *viewController3 = [[ThirdViewController alloc] initWithNibName:@"ThirdViewController"
捆绑：无]；
UINavigationController *navigationcontroller = [[UINavigationController alloc]
initWithRootViewController:viewController3];

self.tabBarController = [[UITabBarController alloc] init];
self.tabBarController.viewControllers = [NSArray
arrayWithObjects:viewController1,viewController2,navigationcontroller, nil];

```

# python - 模板中 url 标记上的 Django SyntaxError

> ID：13835736
> 
> 赞同：0
> 
> 时间：2012-12-12T08:35:04.090
> 
> 标签：python, django, url, tags, templating

我有一个 Django 应用程序，它仍然对`{% url ... %}`模板标签很挑剔。我之前已经解决了这个问题，但现在它给了我一个`SyntaxError`加载模板的方法。

## 向后工作

从相关的模板行开始：

```
<a href="{% url 'project-index' %}">
    <img src="{{ STATIC_URL }}images/logo.png" alt="Logo">
</a> 
```

我正在尝试的`reverse()`功能[`views.py`](https://gist.github.com/010edeae92ef1da1b1e8)：

```
def index (request):
    return render(request, "project/index.html", { "user" : request.user }) 
```

网址模式 ( `urls.py`)：

```
urlpatterns = patterns("project.views",
    url(r'^$', "index", name="project-index"),
    url(r'^login/?$', "login", name="project-login"),
    url(r'^logout/?$', "logout", name="project-logout"),
) 
```

主要应用包括网址（`urls.py`）：

```
urlpatterns = patterns('',
    url('', include('project.urls')),
) 
```

这是[追溯的要点](https://gist.github.com/502ff8b6ed19e415f2b8)。

回溯没有显示模板错误的确切行号，所以这就是它给我的：

```
Error during template rendering
In template /Users/josh/Dropbox/Projects/app/sc/templates/layouts/base.html, error at line 47 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:47:36.937

“旧” url 标签不接受引号，但这将被弃用。`{% load url from future %}`在 Django <1.5 中使用。检查文档中的转发兼容性部分[https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#url](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#url)

# javascript - 如何将json值解析为javascript

> ID：13835738
> 
> 赞同：-6
> 
> 时间：2012-12-12T08:35:11.267
> 
> 标签：javascript

如何获取json值并在javascript中解析并输出到html

```
$.getJSON(
{
  "current_observation": {
    "credit": "Weather Underground NOAA Weather Station",
    "credit_URL": "wunderground.com/",
    "termsofservice": {
      "-link": "wunderground.com/weather/api/d/terms.html",
          "#text": "

This feed will be deprecated. Please switch to wunderground.com/weather/api/
"
    },
    "image": {
      "url": "
http://icons-ak.wxug.com/graphics/wu2/logo_130x80.png
",
      "title": "Weather Underground",
      "link": "http://wunderground.com/"
    },

    "display_location": {
      "full": "Chetput, India",
      "city": "Chetput",
      "state_name": "India",
      "country": "IN",
      "country_iso3166": "IN",
      "zip": "00000",
      "latitude": "13.060420",
      "longitude": "80.249580",
      "elevation": "11.00000000 ft"
    },
    "observation_location": {
      "full": "Chennai,",
      "city": "Chennai",
      "country": "IN",
      "country_iso3166": "IN",
      "latitude": "13.00000000",
      "longitude": "80.18000031",
      "elevation": "52 ft"
    },
    "station_id": "VOMM",
    "observation_time": "Last Updated on December 11, 4:10 PM IST",
    "observation_time_rfc822": "Tue, 11 Dec 2012 10:40:00 GMT",
    "observation_epoch": "1355222400",
    "local_time": "December 11, 4:43 PM IST",
    "local_time_rfc822": "Tue, 11 Dec 2012 11:13:29 GMT",
    "local_epoch": "1355224409",
    "weather": "Partly Cloudy",
    "temperature_string": "84 F (29 C)",
    "temp_f": "84",
    "temp_c": "29",
    "relative_humidity": "62%",
    "wind_string": "From the ESE at 7 MPH",
    "wind_dir": "ESE",
    "wind_degrees": "110",
    "wind_mph": "7",
    "pressure_string": "29.83 in (1010 mb)",
    "pressure_mb": "1010",
    "pressure_in": "29.83",
    "dewpoint_string": "70 F (21 C)",
    "dewpoint_f": "70",
    "dewpoint_c": "21",
    "heat_index_string": "88 F (31 C)",
    "heat_index_f": "88",
    "heat_index_c": "31",
    "windchill_string": "NA",
    "windchill_f": "NA",
    "windchill_c": "NA",
    "visibility_mi": "5.0",
    "visibility_km": "8.0",
    "icons": {
      "icon_set": [
        {
          "-name": "Default",
          "icon_url": "http://icons-ak.wxug.com/i/c/a/partlycloudy.gif"
        },
        {
          "-name": "Smiley",
          "icon_url": "http://icons-ak.wxug.com/i/c/b/partlycloudy.gif"
        },
        {
          "-name": "Generic",
          "icon_url": "http://icons-ak.wxug.com/i/c/c/partlycloudy.gif"
        },
        {
          "-name": "Old School",
          "icon_url": "http://icons-ak.wxug.com/i/c/d/partlycloudy.gif"
        },
        {
          "-name": "Cartoon",
          "icon_url": "http://icons-ak.wxug.com/i/c/e/partlycloudy.gif"
        },
        {
          "-name": "Mobile",
          "icon_url": "http://icons-ak.wxug.com/i/c/f/partlycloudy.gif"
        },
        {
          "-name": "Simple",
          "icon_url": "http://icons-ak.wxug.com/i/c/g/partlycloudy.gif"
        },
        {
          "-name": "Contemporary",
          "icon_url": "http://icons-ak.wxug.com/i/c/h/partlycloudy.gif"
        },
        {
          "-name": "Helen",
          "icon_url": "http://icons-ak.wxug.com/i/c/i/partlycloudy.gif"
        },
        {
          "-name": "Incredible",
          "icon_url": "http://icons-ak.wxug.com/i/c/k/partlycloudy.gif"
        }
      ]
    },
    "icon_url_base": "http://icons-ak.wxug.com/graphics/conds/",
    "icon_url_name": ".GIF",
    "icon": "partlycloudy",
    "forecast_url": "
http://www.wunderground.com/global/stations/43278.html
",
    "history_url": "
wunderground.com/history/airport/VOMM/2012/12/11/DailyHistory.html
",
    "ob_url": "
wunderground.com/cgi-bin/findweather/getForecast?query=13.00000000,80.18000031"

  }
      }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T08:42:24.877

JSON 是一个对象，您可以使用 JSON.parse() 对其进行解析，也可以遍历节点以获取所需的数据。

例如：current_observation.credit，它将为您提供“Weather Underground NOAA Weather Station”

请尝试发布确切的查询以获得更好的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T08:49:51.930

如果您尝试将 JavaScript 对象正确插入 HTML（我从您使用 $.getJSON(<-- 此函数仅用于获取“类似字符串”的数组/文字对象中了解到），请尝试使用 JSON。 stringify({dasdas:'fadfds'});

如果您想解析（将字符串解释为 JavaScript 代码中的对象），请按照下面的说明进行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T08:38:52.840

[大多数浏览器都支持](http://caniuse.com/json) `JSON.parse()`解析 JSON。由于您使用的是 jQuery，因此您还可以使用[jQuery.parseJSON()](http://api.jquery.com/jQuery.parseJSON/)作为`JSON.parse()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T08:41:49.573

使用**JSON.parse()**获取对象。此外，如果您有字符串格式的数据，那么您也可以执行 eval()。[http://www.w3schools.com/jsref/jsref_eval.asp]

# java - JPA 与 @ManyToOne

> ID：13835742
> 
> 赞同：1
> 
> 时间：2012-12-12T08:35:33.790
> 
> 标签：java, jpa

我有两个这样的课程

```
package models;
import java.util.*;
import javax.persistence.*;
import play.db.jpa.*;

@Entity
@Table(name = "commitment_type_value")
public class CommittmentTypeValue extends Model{    
    @Id
    @Column(name = "id", nullable = false)
    public Long id;    
    @Column(name = "value", nullable = true)
    public String type;    
    @ManyToOne
    @JoinColumn(name="commitment_type_id")
    public CommitementType commitmentType;    
    public CommittmentTypeValue(){

    }
}

-------------

package models;

import java.util.*;

import javax.persistence.*;

import play.db.jpa.*;

/**
 *
 * @author hatem
 */
@Entity
@Table(name = "commitment_type")
public class CommitementType extends Model{

    @Id
    @Column(name = "id", nullable = false)
    public Long id;

    @Column(name = "type", nullable = true)
    public String type;

    @OneToMany(fetch=FetchType.LAZY, cascade = CascadeType.ALL, mappedBy="commitmentType")
    public List<CommittmentTypeValue> commitmentTypeValues;

    public CommitementType(){

    }
} 
```

当我执行我的应用程序时，会出现此问题：

> 发生 JPA 错误（无法构建 EntityManagerFactory）：从 models.CommittmentTypeValue 引用 models.CommitementType 的外键具有错误的列数。应该是 2

拜托，谁能告诉我怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T08:42:34.050

请检查您的外键列名，它应该与列名完全匹配。

* * *

**编辑** 如果您的问题仍未解决，请检查您的 persistence.xml 是否有

```
<property name="generateDdl" value="true" /> 
```

如果它已经存在，请检查您是否在生成表时遇到任何错误。

如果是，则清除表中的数据或在配置文件中添加 drop-and-create-tables 选项或更改代码如下

```
@ManyToOne(optional=true)
@JoinColumn(name="commitment_type_id", nullable = true)
public CommitementType commitmentType; 
```

因为您可能在表中有旧数据，这可能会停止创建新表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:51:06.507

该错误听起来像您在 CommitementType 中的 Id 是复合的，因此您的外键必须包含两列。

包括 CommitementType 的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T08:59:06.430

您的多对一加入课堂中缺少参考列名称`CommittmentTypeValue`

```
@ManyToOne
@JoinColumn(name="commitment_type_id" referencedColumnName="id" )
public CommitementType commitmentType; 
```

同时指定目标实体

```
@OneToMany(fetch=FetchType.LAZY, cascade = CascadeType.ALL, targetEntity=CommittmentTypeValue.class, mappedBy="commitmentType")
public List<CommittmentTypeValue> commitmentTypeValues; 
```

# asp.net - 贝宝 expresscheckout 中的 Token Null

> ID：13835744
> 
> 赞同：3
> 
> 时间：2012-12-12T08:35:41.283
> 
> 标签：asp.net, soap, paypal

我正在使用网站模板在 asp.net（3.5 或 4.0）中使用支付快速结帐。我已经从下面提到的 URL 中添加了它的 SOAP API 参考：

[https://www.sandbox.paypal.com/wsdl/PayPalSvc.wsdl](https://www.sandbox.paypal.com/wsdl/PayPalSvc.wsdl)。当我调用 setexpresscheckout 方法来获取令牌值时，它总是返回 null 作为令牌值并在任何对我无用的变量中发送令牌值。

如果有人可以帮助我在令牌属性而不是任何属性中获取令牌值。那么请......快点做

# svn - SVN 不会从命令行工具更新

> ID：13835747
> 
> 赞同：-1
> 
> 时间：2012-12-12T08:35:58.750
> 
> 标签：svn, svn-update

我正在尝试使用`svn update`命令行工具更新我的仓库。

但它不会下载新添加或丢失的文件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:18:45.177

阅读[文档](http://svnbook.red-bean.com/)！

为什么你假设你[`svn update`](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.update.html)是一个存储库？

> **`svn update`**将存储库中的更改带入您的工作副本。

所以你更新你的[工作副本](http://svnbook.red-bean.com/en/1.7/svn.basic.version-control-basics.html#svn.basic.working-copy)，而不是[存储库](http://svnbook.red-bean.com/en/1.7/svn.basic.version-control-basics.html#svn.basic.repository)。

**工作副本？**

工作副本是特定存储库位置（例如分支、主干等）的本地签出。因此，即使您知道其他开发人员已提交到存储库，也可能是他们提交到了另一个位置。您可以随时发出[“svn log”](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.log.html)命令来检查存储库中的新内容。

> 从字面上看，工作副本是用户可以自由工作的用户 VCS 管理数据的特定版本的本地副本。工作副本对其他软件来说就像任何其他充满文件的本地目录一样，因此这些程序不必“具有版本控制意识”即可读取和写入该数据。管理工作副本并将对其内容所做的更改与存储库通信的任务完全落在版本控制系统的客户端软件上。

**存储库？**

存储库是保存所有版本化数据和历史记录的地方。

> 版本控制系统的核心是存储库，它是该系统数据的中央存储。

# java - 最后在哪里放置嵌套的try/catch？

> ID：13835749
> 
> 赞同：9
> 
> 时间：2012-12-12T08:36:09.200
> 
> 标签：java, exception, coding-style, try-catch

如何`finally`在嵌套中工作`try/catch`？
例如：

```
try{  
//code

}  
catch(SomeException e){  
   //code  
   try{  
      //code  
   }  
   catch(OtherException e){  
     //code  
   }  
}  
catch(SomeOtherException e){    
  //code  
} 
```

最好的放置位置在哪里`finally`？或者我应该把它放在嵌套和外部`try`？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-12T08:37:51.590

如果您希望块中的代码`finally`无论在任一块中发生什么都运行，请将其放在外部`try`. 如果您只希望它运行，无论第一个块*内*`try`发生什么，请将其放在那里：

```
try{  // try/catch #1
  //code block #1

}  
catch(SomeException e){  

   //code block #2

   try{  // try/catch #2
      //code block #3
   }  
   catch(OtherException e){  
     //code block #4
   }  
   finally {
     // This code runs no matter what happens with try/catch #2 (so
     // after code block #3 and/or #4, depending on whether there's
     // an exception). It does NOT run after code block #1 if that
     // block doesn't throw, does NOT run after code block #2 if
     // that block DOES throw), and does not run if code block #1
     // throws SomeOtherException (code block #5).
   }
}  
catch(SomeOtherException e){    
  //code block #5
} 
finally {
  // This code runs no matter what happens with EITHER
  // try/catch #1 or try/catch #2, no matter what happens
  // with any of the code blocks above, 1-5
} 
```

更简单地说：

```
try {
   // covered by "outer" finally
}
catch (Exception1 ex) {
   // covered by "outer" finally

   try {
     // Covered by both "inner" and "outer" finallys
   }
   catch (Exception2 ex) {
     // Covered by both "inner" and "outer" finallys
   }
   catch (Exception3 ex) {
     // Covered by both "inner" and "outer" finallys
   }
   finally { // "inner" finally
   }
}
catch (Exception4 ex) {
   // covered by "outer" finally
}
finally { // "outer" finally
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T08:41:20.097

这取决于您希望 finally 块中的代码执行的位置。

```
try{  //Try ROOT
//code

}  
catch(SomeException e){  //Catch ROOT ONE
   //code  
   try{  //Try NEST
      //code  
   }  
   catch(OtherException e){  //Catch NEST
     //code  
   }
   finally{
     //This will execute after Try NEST and Catch NEST
   }
}  
catch(SomeOtherException e){    //Catch ROOT TWO
  //code  
}
finally{
  //This will execute after try ROOT and Catch ROOT ONE and Catch ROOT TWO
} 
```

没有最好的地方取决于您想要的功能。但是，如果您希望 finally 块仅在所有 try catch 块之后运行，那么您应该将它放在最终根 catch 块之后。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T08:41:06.020

来自[文档](http://docs.oracle.com/javase/tutorial/essential/exceptions/finally.html)

> finally 块总是在 try 块退出时执行。这样可以确保即使发生意外异常也会执行 finally 块。但 finally 不仅仅对异常处理有用——它允许程序员避免清理代码意外地被 return、continue 或 break 绕过。将清理代码放在 finally 块中始终是一个好习惯，即使没有预料到异常也是如此。

最好将您的 finally 放在需要的地方。

```
try{  
  //code

 }    
 catch(SomeException e){  // 1
     try{  //Try Block 
       //code  
      }  
     catch(OtherException e){  //2
       //code  
      }
     finally{
       //This will execute after Try Block and Catch Block 
      }
 }  
catch(SomeOtherException e){  //3
  //code  
 }
finally{
   //This will execute after 1 and 2 and 3
 } 
```

有关更多详细信息，请查看以下链接。

1.  [最终块](http://docs.oracle.com/javase/tutorial/essential/exceptions/finally.html)
2.  [finally 块是否总是运行？](https://stackoverflow.com/questions/464098/does-a-finally-block-always-run)

# jquery - 在移动版中查看网站时如何禁用 Wordpress 功能？

> ID：13835751
> 
> 赞同：0
> 
> 时间：2012-12-12T08:36:13.240
> 
> 标签：jquery, wordpress, gallery, jquery-isotope

我有一个自定义画廊简码，因为我在我的画廊页面中使用同位素。所以基本上，我有一页画廊，我只是把我所有的图片拖放到这里，然后让 dessandro 的同位素布局完成剩下的工作。此外，我使用 Fancybox 作为我的灯箱，以便在单击时获得完整版本的图像。这些都在我创建的 functions.php 自定义库中。

它看起来不错，但是，在移动设备中，我想禁用这个功能，fancybox，因为在这么小的设备中安装灯箱有点尴尬。

我的解决方案是，禁用我在 functions.php 中创建的自定义图库功能，以便 wordpress 的本机图库（在新的更新 3.5 中很酷）将生效，因此也可以使用 fancybox 禁用同位素。

如果用户在移动版上点击图片，它将链接到 attachment.php 模板而不是 fancybox，因为自定义功能现在已禁用。

一个很好的例子是 [http://thereason.us/](http://thereason.us/)

这个网站在 wordpress 中，所以我知道它是可能的。有人有想法吗？

我的谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:55:10.113

好吧，他们正在做的是他们正在检查屏幕宽度是否超​​过`500`像素，如果是，那么他们打开灯箱，否则他们保留链接的默认操作并打开附件页面。

因此，我建议您更改函数以向`data-attachment`链接到将保存附件页面 URL 的图像的锚点添加一个或不同的属性。

然后在您的 JS 中，首先将点击事件绑定到您的灯箱链接，例如：

```
(function($){
    $(".gallery a[href$='.jpg'], .gallery a[href$='.png'], .gallery a[href$='.jpeg'], .gallery a[href$='.gif']").on('click', function(){
        if ( parseInt($(window).width()) < 500 ) {
            window.location.href = $(this).attr('data-attachment');
            return false;
        }
    });
    // Initialize Fancybox
    $(".gallery a[href$='.jpg'], .gallery a[href$='.png'], .gallery a[href$='.jpeg'], .gallery a[href$='.gif']").attr('rel','gallery').attr('class','fancybox').fancybox();
})(jQuery); 
```

然后实例化灯箱。理论上，这应该在灯箱之前绑定您以前的功能，但我不是 100% 确定。

# excel - 父子进程隔离和子列表

> ID：13835758
> 
> 赞同：0
> 
> 时间：2012-12-12T08:36:46.523
> 
> 标签：excel, vbscript

请阅读以下模板：

```
PID     Status      LPID

10       Closed      25
11       Open        25
31       Open        31
25       Closed      25
54       Open        31
17       Open        17
20       Closed      31
88       closed      77
77       closed      77 
```

现在当 PID!= LPID 时，该 PID 被定义为 CPID（子进程 ID），否则它是一个 PPID（父进程 ID）

现在我正在寻找一个代码，它将告诉哪个是父级，哪个是子级 - 意味着在另一张表中标记它们。同时我想列出所有 CPID，PPID 在同一行，如果任何 PPID 有子进程他们自己。输出如下所示

```
PID   Type Of Process?    Child List
10       Child
11       Child
31       Parent              54 20
25       Parent              10 11
54       Child
17       Parent
20       Child
88       Child
77       Parent              88 
```

我已经使用 VBScript 编写了一个代码，但是使用实际工作表太慢了。对于 2500 个数据，它需要将近 1 小时。所以我想要一个比我的更快的过程。

您能在这里使用 VBscript 帮忙吗？

***代码1：***

```
 Set objExcel1 = CreateObject("Excel.Application")'Object for W2W Report Dump

  strPathExcel1 = "D:\VA\CopyofGEWingtoWing_latest_dump_21112012.xls"
  objExcel1.Workbooks.open strPathExcel1

  Set objSheet1 = objExcel1.ActiveWorkbook.Worksheets(2)
  Set objSheet2 = objExcel1.ActiveWorkbook.Worksheets(1)

    IntRow1=1
 Do While objSheet1.Cells(IntRow1, 1).Value <> ""

    IntRow2=4
    IntChildListColumn=3

    If objSheet1.Cells(IntRow1,2).Value="Parent" Then

        Do While objSheet2.Cells(IntRow2, 1).Value <> ""

             If objSheet2.Cells(IntRow2,11).Value=objSheet1.Cells(IntRow1,1).Value And objSheet2.Cells(IntRow2,11).Value <> objSheet2.Cells(IntRow2,1).Value Then

                 objSheet1.Cells(IntRow1,IntChildListColumn).Value=objSheet2.Cells(IntRow2,1).Value
                 IntChildListColumn=IntChildListColumn+1

             End If

      IntRow2=IntRow2+1

      Loop

   End If

 IntRow1=IntRow1+1

Loop 
```

***代码2：***

```
 Flag=0
 IntColTemp=1
 IntRowTemp=3

 Set objExcel1 = CreateObject("Excel.Application")'Object for Condition Dump

 strPathExcel1 = "D:\VA\CopyofGEWingtoWing_latest_dump_21112012.xls"
 objExcel1.Workbooks.open strPathExcel1

 Set objSheet1 = objExcel1.ActiveWorkbook.Worksheets(1)
 Set objSheet2 = objExcel1.ActiveWorkbook.Worksheets(2)

 IntRow1=4
 IntRow2=1

Do While objSheet1.Cells(IntRow1, 1).Value <> ""

  objSheet2.Cells(IntRow2, 1).Value = objSheet1.Cells(IntRow1, 1).Value

   IntColTemp=1
   Flag=0
  'This will travarse to the Parent Business Process ID column horizantally in the excel.
  Do While Flag=0

  If objSheet1.Cells(IntRowTemp,IntColTemp).Value="Parent Business Process ID" Then

      Flag=1       

  End If

      IntColTemp=IntColTemp+1

Loop
      IntColTemp=IntColTemp-1
      'MsgBox(IntColTemp)

  Strcmp1=trim(objSheet1.Cells(IntRow1, 1).Value)
  Strcmp2=trim(objSheet1.Cells(IntRow1,IntColTemp).Value)

  If Strcmp1=Strcmp2 Then

      objSheet2.Cells(IntRow2, 2).Value="Parent" 

  Else

      objSheet2.Cells(IntRow2, 2).Value="child"

  End If

   IntRow1=IntRow1+1
   IntRow2=IntRow2+1

  Loop 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:09:24.957

一些建议的改进：

如果你真的让屏幕打开了 excel：`Application.ScreenUpdating = False`在代码的开头设置（和`True`结尾）

将 Application.Calculation 设置为手动。在您的代码开始时： `Application.Calculation = xlCalculationManual`并在最后回到自动：`Application.Calculation = xlCalculationAutomatic`。如果这本身不是自动的，您还可以先将原始设置存储到局部变量中，然后在最后恢复该值。

使用 VBA 看看那里的性能是否更好（如果 VBA 对您来说是一个有效的选择）

使用`Value2`代替`Value`，此属性查询起来更快。

减少循环次数，尤其是当您在某个范围内查找特定值时。您也可以使用 Excel 查找和引用函数（例如 VLookup），这些函数可能运行得更高效、更快。

# javascript - 验证日期模式

> ID：13835763
> 
> 赞同：2
> 
> 时间：2012-12-12T08:36:56.817
> 
> 标签：javascript

我需要一个 javascript 方法来验证日期模式，如下所示 2012 年 1 月 14 日

到目前为止，我不确定该模式使用哪个正则表达式，因为它不是标准日期，例如 14/01/2012 或 01/14/2012 或 01-04-2012 ..我试图为早期开始做这样的事情把它们分开，但最后我得到了一个完全的分裂。

这是我的拆分代码

```
 function validateDate(date){
   var test = date.replace(",","");
   alert(test);
  var split = test.split("");
  for(i=0;i<split.length;i++){
      alert(split[i]);
   }
  alert("total length "+split.length);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T08:48:27.377

您可以使用[momentjs](http://momentjs.com/)和特别是它的[解析功能](http://momentjs.com/docs/#/parsing/string-format/)。就像是 ：

```
moment("Jan 14, 2012", "MMM DD YYYY").isValid(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:44:35.467

使用正则表达式：

```
^[a-zA-Z]{3}\s[0-9]{1,2},\s[0-9]{4}$ 
```

这将适用于任何日期，月份为三个字符，日后有逗号，年份为 4 位数，按此顺序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T08:49:03.363

你可以使用这样的东西：

```
(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec), [0-3]?\d (\d\d)?\d\d 
```

请随意填写以使用此表达式进行调整

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T08:50:32.853

您可以将该格式转换为您想要的格式。您需要做的就是提取零件：

```
function formatDate( dateStr ) {
  var date = new Date( dateStr ),
      m = date.getMonth() + 1,
      d = date.getDate(),
      y = date.getFullYear();
  return m +'/'+ d +'/'+ y; // you can use any format here
}

console.log( formatDate( 'Jan 14, 2012' ) ); //=> '1/14/2012' 
```

然后你可以使用这个函数的新字符串：[Best way to validate date string format via jQuery](https://stackoverflow.com/questions/11218181/best-way-to-validate-date-string-format-via-jquery/11218271#11218271)。这将有效地验证日期，因此例如 mplungjan 指出的“2011 年 2 月 29 日”将无法验证。

用法：

```
if ( isValidDate( formatDate( 'Jan 14, 2012' ) ) ) {
  // valid
} else {
  // not valid
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T08:59:15.517

它是传递给日期对象的有效字符串

[演示](http://jsfiddle.net/mplungjan/K6bca/)

```
var monthNames = "Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(",");
function isvalid(str) {
  var d = new Date(str);
  var dateParts = str.split(" ");
  return monthNames[d.getMonth()]===dateParts[0] &&
         d.getDate()===parseInt(dateParts[1],10) &&
         d.getFullYear()===parseInt(dateParts[2],10);
}      
alert(isvalid("Jan 14, 2012"));
alert(isvalid("Feb 29, 2011")); 
```

​</p>

# javascript - 用 asp.net 在第二台显示器（屏幕）上打开一个窗口

> ID：13835768
> 
> 赞同：1
> 
> 时间：2012-12-12T08:37:18.957
> 
> 标签：javascript, asp.net, multiple-monitors

我想在第二台显示器上自动打开一个弹出窗口。我尝试使用 javascript 打开它，但弹出窗口倾斜到我的第一个屏幕的右上角。当我使用鼠标时，它可以适合第二个屏幕，但我不想使用鼠标，我想自动执行我的 javascript 代码：

```
window.open("Pop.aspx", "Pop.aspx", "width=10,height=10,screenX=1800,screenY=0"); 
```

我多次更改 screenX 属性，但没有成功。

任何想法？

# c++ - 在运算符之间添加间距的目的是什么？

> ID：13835769
> 
> 赞同：6
> 
> 时间：2012-12-12T08:37:20.783
> 
> 标签：c++, c, spacing

我基本上是自学C/C++编程，所以对良好的编程习惯了解不多。一件事总是让我想知道为什么人们总是喜欢在他们的代码中添加运算符之间的间距，例如：

```
 if(x > 0) 
```

代替

```
 if(x>0) 
```

有什么特别的原因吗？我们知道编译器只是忽略了这样的间距，我不认为后一个表达式的可读性较差。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-12T08:45:41.053

有时空间是**必要**的，因为 C/C++ 词法分析器的**最大咀嚼原则**。考虑`x`和`y`都是指向 int, 表达式的指针

```
*x/*y 
```

是非法的，因为词法分析器会将`/*`其视为注释。所以在这种情况下，一个空格是必要的：

```
*x / *y 
```

（摘自《专家 C 编程》一书）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-12T08:41:11.463

正如你所说，我怀疑这种情况*总是会发生。*通常，在处理大型项目时，对于是否添加空间存在约定。

我会根据具体情况应用空格：

```
a+b+c+d 
```

比 IMO 更具可读性

```
a + b + c + d 
```

然而

```
a+b*c+d 
```

可读性低于

```
a + b*c + d 
```

我会说先遵循约定，然后再考虑可读性。一致的代码更漂亮。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-12T08:40:12.190

这简直是​​好方式。您可以根据需要编写代码，但这是一种“标准”方式。

也使代码更具可读性。

举两个例子让你明白。

1) 空间更小

```
 if(x<0.3&&y>2||!std::rand(x-y)&&!condition){
 std::cout<<++x?0:1<<std::endln;
 } 
```

2）具有良好的格式：

```
 if (x < 0.3 && y > 2 || !std::rand(x - y) && !condition) {
    std::cout << ++x ? 0 : 1 << std::endln;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-12T08:40:30.007

编译器不关心空格。这只是关于可读性。

有些人喜欢运算符周围的空格，有些人则不喜欢。这是个人喜好的问题。

唯一重要的是，当你在一个团队中工作时，你们都同意遵循统一的风格（不仅仅是关于这一点，还有很多其他细节），因为两者的混合更难阅读比统一的方式，即使它是你最不喜欢的方式。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-12T08:42:24.927

我认为主要原因是**代码可读性**（而且，对我来说，这是一个非常重要的原因）。

对我来说，更多的空间代码打开并且变得更易读（并且更容易理解和修改）

我的风格是这样的：

```
if (x > 0) 
{
  ....
} 
```

注意`if`和左括号之间的空格`(`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-12T08:46:34.330

我同意其他人所说的代码对大多数人来说更具可读性。有些人不会认为它更具可读性，但您必须假设其他人将来会查看代码并且会从更具可读性的样式中受益。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-12T08:41:07.453

编码风格通常是由使源代码更易于阅读的愿望驱动的。然而，就哪种风格比另一种更具可读性而言，存在一定程度的主观性。不过，我想大多数人都会同意，在同一个文件中混合使用两种样式将是一个糟糕的选择。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-12-12T08:46:54.313

可读性。相比：

```
// C++

if (x > 0)
{
    // some
    // code
}

# Python

if x > 0:
    # some
    # code 
```

# php - php 简单的 xml，循环遍历对象，将字符串放入数组中

> ID：13835772
> 
> 赞同：1
> 
> 时间：2012-12-12T08:37:32.827
> 
> 标签：php, xml-parsing

由于某种原因，我收到了一个 XML 错误，即使这个（初学者）代码做了我想要它做的事情。它将字符串提取到数组中。

第 11 行导致“注意：尝试在第 11 行获取 D:\pam\w\www\mp\p\lasxml.php 中非对象的属性”

```
 <?php           
    $xml = new DOMDocument( "1.0", "ISO-8859-1" );                                                          
    $xml = simplexml_load_file('http://www.myepisodes.com/rss.php?feed=mylist&showignored=0&sort=asc&uid=Demerzel&pwdmd5=c6ed54b98a82b1----ac58147cedbde5'); 

    $allaFullStringfranxml = array();                                           
    $i = 0;                                                                 
        do{                                                                 
            $allaFullStringfranxml[] = $xml->channel->item[$i]->title;          
            ++$i;                                                               
        }while(($xml->channel->item[$i]->title) != null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:47:00.523

我不确定你为什么使用 do-while 循环，我认为在这种情况下 foreach 会更好 - do while 循环至少运行一次（即使没有项目）。此外，您正在增加`$i`变量，然后检查`title`带有`$i`索引的项目的标题是否`null`- 如果不检查该项目是否真的存在，您不应该这样做。这应该对你更好：

```
foreach ($xml->channel->item as $item) {
    $allaFullStringfranxml[] = (string)$item->title;
} 
```

您还可以在此处注意到我正在做`(string)$item->title`的 - 这会将标题节点转换为字符串，在其他情况下您将存储节点对象。

# facebook - Facebook API - 从打开的图表中获取带有 APP 密码的好友列表

> ID：13835776
> 
> 赞同：-1
> 
> 时间：2012-12-12T08:37:40.497
> 
> 标签：facebook, api, facebook-fql, facebook-opengraph

是否可以通过使用开放图从具有 APP 机密（而不是访问令牌）的用户那里获取朋友列表？

用户已经安装了APP。

提前致谢。

PS：
如果我理解正确...
-> 图形 API = 仅适用于访问令牌
-> FQL = 适用于访问令牌和应用程序机密

对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:50:06.050

我从未听说您可以将应用程序机密与 FQL 一起使用。从理论上讲，仅使用应用程序密码从用户那里获取好友列表是不可能的，因为应用程序密码对所有用户都是相同的。只有不同的访问令牌（页面令牌、应用令牌、用户令牌），但要获得用户的朋友，您总是需要用户访问令牌。

顺便说一句，如果您使用的是其中一种 SDK（PHP SDK、JS SDK ......），您真的不需要担心这一点。此外，如果有可能，最好使用 Graph API，只有在 Graph API 没有（好的）方式时才使用 FQL。

# c# - 捕获 OutOfMemoryException 是如何工作的？

> ID：13835778
> 
> 赞同：26
> 
> 时间：2012-12-12T08:37:44.007
> 
> 标签：c#, .net, clr, out-of-memory

`OutOfMemoryException`我对我们可以使用 try/catch 块捕获一个事实感到有点困惑。

给定以下代码：

```
Console.WriteLine("Starting");

for (int i = 0; i < 10; i++)
{
    try
    {
        OutOfMemory();
    }
    catch (Exception exception)
    {
        Console.WriteLine(exception.ToString());
    } 
}

try
{
    StackOverflow();
}
catch (Exception exception)
{
    Console.WriteLine(exception.ToString());
}

Console.WriteLine("Done"); 
```

我用来创建 OutOfMemory + StackOverflowException 的方法：

```
public static void OutOfMemory()
{
    List<byte[]> data = new List<byte[]>(1500);

    while (true)
    {
        byte[] buffer = new byte[int.MaxValue / 2];

        for (int i = 0; i < buffer.Length; i++)
        {
            buffer[i] = 255;
        }

        data.Add(buffer);
    }
}

static void StackOverflow()
{
    StackOverflow();
} 
```

它打印出`OutOfMemoryException`10 次，然后由于`StackOverflowException`无法处理而终止。

RAM 图在执行程序时如下所示： ![显示内存被分配和释放 10 次的图表](../Images/1f41be868f6f7991677aec353bb3bd36.png)

我现在的问题是为什么我们能够赶上`OutOfMemoryException`？捕捉到它之后，我们可以继续执行我们想要的任何代码。正如 RAM 图所证明的，有内存被释放。运行时如何知道它可以 GC 哪些对象以及进一步执行仍需要哪些对象？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-12T08:51:06.200

GC 对程序中使用的引用进行分析，并且可以丢弃任何未在任何地方使用的对象。

An`OutOfMemoryException`并不意味着内存完全耗尽，它只是意味着内存分配失败。如果你试图一次分配一个大的内存区域，可能仍然有足够的空闲内存。

当没有足够的空闲内存进行分配时，系统会进行垃圾回收以尝试释放内存。如果仍然没有足够的内存来分配，它会抛出异常。

A`StackOverflowException`无法处理，因为这意味着堆栈已满，并且无法像使用堆一样从中删除任何内容。您将需要更多的堆栈空间来继续运行处理异常的代码，但没有更多的了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-12T08:48:34.663

OutOfMemoryException 很可能会被抛出，因为您正在运行一个 32 位程序，内存图您没有指示系统有多少内存，所以也许尝试将其构建为 64 位，并且可能使用[MemoryFailPoint](http://msdn.microsoft.com/en-us/library/system.runtime.memoryfailpoint.aspx)来防止这种情况发生。

您也可以让我们知道 OutOfMemory() 函数中有什么以获得更清晰的画面。

PS StackOverFlow 是唯一无法处理的错误。

编辑：如上所述，我认为这只是合乎逻辑的，因此之前没有提到它，例如，如果您尝试分配比“备用”更多的内存，那么就不可能这样做并且会发生异常。当您使用 data.Add() 分配大型数组时，它会在最终的“非法”添加发生之前倒下，因此仍有可用内存。

所以我会假设它在这一点上 data.Add(buffer); 当您通过向“数据”添加一个 400MB 字节数组来突破 2GB 进程限制时，就会出现问题，例如，一个包含大约 10 亿个对象的数组，每个 4 字节，我预计大约 400MB。

PS 直到 .net 4.5 最大进程内存分配为 2GB，在 4.5 之后可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T08:49:47.783

不确定这是否回答了您的问题，但关于它如何决定要清理哪些对象的（简化）解释是这样的：

垃圾收集器获取程序中每个正在运行的线程并标记所有顶级对象，这意味着可以从堆栈帧访问的所有对象（即，在当前执行点处由局部变量指向的所有对象）以及所有静态字段指向的对象。

然后，它标记下一级对象，即之前标记的对象的所有字段所指向的所有对象。重复此步骤，直到没有新对象被标记。

因为 C# 不允许在普通上下文中使用指针，所以一旦上一步完成，就可以保证后续代码无法访问未标记的对象，因此可以安全地清理。

在您的情况下，如果您分配给内存管理器增加压力的对象没有通过引用保存，这意味着 GC 将有机会清理它们。另外，请记住，OutOfMemoryException 指的是 CLR 程序的托管内存，而 GC 在那个“盒子”之外工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T08:50:31.887

您可以捕获 OutOfMemoryException 的原因是语言设计器决定让您这样做。这有时（但通常不是）实用的原因是因为在某些情况下它是可恢复的情况。

如果您尝试分配一个巨大的数组，您可能会得到一个 OutOfMemoryException，但该巨大数组的内存实际上并没有被分配 - 因此其他代码仍然能够毫无问题地运行。此外，由于异常而展开的堆栈可能会导致其他对象有资格进行垃圾回收，从而进一步增加可用内存量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T09:06:48.573

您的方法创建了该方法范围内的本地`OutOfMemory()`数据结构 (the )。`List<byte[]>`虽然您的执行线程在`OutOfMemory`方法内部，但当前堆栈帧被视为列表的 GC 根。一旦您的线程结束在 catch 块中，堆栈帧就会被弹出并且列表实际上变得无法访问。因此，垃圾收集器确定它可以安全地收集列表（正如您在内存图中观察到的那样）。

# c++ - 为什么要使用两个“！” 布尔值的运算符？

> ID：13835786
> 
> 赞同：12
> 
> 时间：2012-12-12T08:38:20.627
> 
> 标签：c++, boolean

> **可能重复：**
> [C++ 代码中的双重否定](https://stackoverflow.com/questions/248693/double-negation-in-c-code)

当我扫描 Webkit 源代码时，我发现布尔“非”运算符的一个奇怪用法`!`：

```
BOOL enabled;
if (SUCCEEDED(sharedPreferences->continuousSpellCheckingEnabled(&enabled)))
    continuousSpellCheckingEnabled = !!enabled;
if (SUCCEEDED(sharedPreferences->grammarCheckingEnabled(&enabled)))
    grammarCheckingEnabled = !!enabled; 
```

他们为什么不`enabled`直接使用而不是使用`!!enabled`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-12T08:42:29.620

`1`将任何内容转换为或是一个 C++ 技巧`0`。

例如，`42`逻辑上是`true`，但不是`1`，所以应用`!!`到它，你把它变成`1`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T08:39:29.440

这意味着将值强制为布尔值。因此，如果该值正在评估某些东西，那么您将得到正确的结果。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-12T08:42:44.677

它强制真值恰好为 1。

在布尔上下文 ( `if (x)`, `while (x)`, `x ? a : b`, `for (; x; )`) 中，一个值`0`表示假，而任何其他值都表示真。

如果你的函数接受一个真值，但你需要正好 1，那`!!`很好。

换句话说，`!!x`与 相同`x ? 1 : 0`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T08:41:49.997

很可能 ContinuousSpellCheckingEnabled 是 bool 类型。BOOL 被定义为 int，所以：

```
continuousSpellCheckingEnabled = enabled; 
```

发出警告，同时：

```
continuousSpellCheckingEnabled = !!enabled; 
```

才不是。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-12T08:42:15.330

> 他们为什么不直接使用“启用”

双重否定仅取消布尔值（0和1），因此`!!(0) == 0`对于非布尔值，该值将转换为布尔值`!!(100) == 1`

# html - 滚动过去后使两个 div 粘在页面顶部

> ID：13835787
> 
> 赞同：1
> 
> 时间：2012-12-12T08:38:32.483
> 
> 标签：html, css-position

在用户滚动过去这些 div 后，我一直试图让两个 div 粘在页面顶部。两个 div 位于相同的高度。这是我从其他stackoverflow答案中一直使用的：

html:

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript">
 function sticky_relocate() {
  var window_top = $(window).scrollTop();
  var div_top = $('#sticky-anchor').offset().top;
  if (window_top > div_top)
    $('#blockleft').addClass('sticky')
  else
    $('#blockleft').removeClass('sticky');
  }
 $(function() {
  $(window).scroll(sticky_relocate);
  sticky_relocate();
  });
</script>
</head>

<body>
<div id="header"></div>
<div id="sticky-anchor"></div>
<div class="container">
<div id="blockleft"></div>
<div id="blockright"></div>
<div id="content"></div>
</div>
</body> 
```

CSS：

```
body  {
 margin: 0; 
 padding: 0; 
}
#header {
 height:200px;
 background-color:#666;
}
#blockleft {
 width:100px;
 height:500px;
 margin-top:10px;
 background-color:#090;
 float:left;
}
#blockright {
 width:100px;
 height:500px;
 margin-top:10px;
 background-color:#0F3;
 float:right;
}
#content {
 width:500px;
 height:2000px;
 background-color:#0CF;
 margin:auto;
}
.container {
 width:800px;
 margin:auto;
}
.sticky {
 position: fixed;
 top: 0;
} 
```

该脚本在一个 div 上运行良好，但是当使用该脚本两次时，它会自动将右侧 div 移动到左侧，而这个不会粘在页面顶部。

我希望有人能帮我解决这个问题。

**编辑：在新文档中重新创建问题**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:51:21.243

由于s在我们制作时`div`失去了属性，因此它们都相互重叠。为了使它们处于它们的位置，我们需要为 right 应用距离。要解决此问题，请按如下方式替换您的脚本代码。`float``position:fixed``right``div`

```
<script type="text/javascript">
 function sticky_relocate() {
  var containerWidth = $(".container").outerWidth(true);
  var window_top = $(window).scrollTop();
  var div_top = $('#sticky-anchor').offset().top;
  if (window_top > div_top)
  {
    $('#blockleft').addClass('sticky');
    $('#blockright').addClass('sticky');
    $('#blockright').css("right", (containerWidth-800)/2 + "px");
    }
  else
  {
    $('#blockleft').removeClass('sticky');
    $('#blockright').removeClass('sticky');
    }
  }
 $(function() {
  $(window).scroll(sticky_relocate);
  sticky_relocate();
  });
</script> 
```

该代码`$('#blockright').css("right", (containerWidth-800)/2 + "px");`计算右侧的正确距离值，并在滚动时为其`div`添加 css 属性。代码用它的值来获取容器的宽度（由于是 made ，我们需要确定的数字来计算）`right:XXXpx``div``var containerWidth = $(".container").outerWidth(true);``div``margin``margin``auto`

# c# - 显示加载窗口

> ID：13835790
> 
> 赞同：5
> 
> 时间：2012-12-12T08:38:45.180
> 
> 标签：c#, .net, wpf, window, loading

我在 WPF 中的应用程序加载外部资源，所以我想在程序加载时显示加载表单。

我尝试创建表单，并在加载代码之前显示，并在加载结束时关闭。

```
private void Window_Loaded(object sender, RoutedEventArgs e)
{
     LoadForm lf = new LoadForm();
     lf.Visibility = Visibility.Visible;

     // Al code that delays application loading

     lf.Close();
} 
```

但我唯一得到的是加载进度完成并立即关闭时显示表单。

我认为我需要使用 System.Threading 但不确定。

谢谢。

**注意**我在 Window_Loaded() 方法中加载所有应用程序外部资源，而不是在主类方法中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T08:50:50.183

您应该查看这篇关于在 WPF中创建[SplashScreen的 MSDN 文章。](http://msdn.microsoft.com/en-us/library/cc656886.aspx)本质上，您将要显示的图像添加到项目中，并将构建操作设置为 SplashScreen，它将在程序启动时显示，并在显示主应用程序窗口时消失。

* * *

您也可以尝试导入`System.ComponentModel`类并使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)来显示您的加载表单，它可以让您保持 UI 的响应性。

```
public partial class MainWindow : Window
{
    Window1 splash;
    BackgroundWorker bg;
    public MainWindow()
    {

        InitializeComponent();

        bg = new BackgroundWorker();
        bg.DoWork += new DoWorkEventHandler(bg_DoWork);
        bg.RunWorkerCompleted += new RunWorkerCompletedEventHandler(bg_RunWorkerCompleted);

    }

    void bg_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        splash.Hide();
    }

    void bg_DoWork(object sender, DoWorkEventArgs e)
    {
        System.Threading.Thread.Sleep(10000);
    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        splash = new Window1();
        splash.Show();
        bg.RunWorkerAsync();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T08:48:09.767

您应该将耗时的代码放在后台线程中（为此您可以使用 BackgroundWorker、Task 或 Async Await，具体取决于您的 dot net 框架版本）

```
private void Window_Loaded(object sender, RoutedEventArgs e)
{
    LoadForm lf = new LoadForm();
    lf.Visibility = Visibility.Visible;
    //start the time consuming task in another thread
}

HeavyTaskCompleteEvent()
{
     lf.Close();
} 
```

还要寻找显示加载屏幕的最佳方式。您也可以在主窗口中显示一些动画。我不认为显示表格是最好的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T08:47:49.330

不久前我做了一个 Loader 类，你可以使用。它在执行加载方法时显示一个窗口，完成后将其关闭并为您提供该方法的输出：

```
public class Loader<TActionResult>:FrameworkElement
{
    private Func<TActionResult> _execute;
    public TActionResult Result { get; private set; }
    public delegate void OnJobFinished(object sender, TActionResult result);
    public event OnJobFinished JobFinished;

    public Loader(Func<TActionResult> execute)
    {
        if (execute == null)
            throw new ArgumentNullException("execute");

        _execute = execute;
    }

    private Window GetWaitWindow()
    {
        Window waitWindow = new Window { Height = 100, Width = 200, WindowStartupLocation = WindowStartupLocation.CenterScreen, WindowStyle = WindowStyle.None };
        waitWindow.Content = new TextBlock { Text = "Please Wait", FontSize = 30, FontWeight = FontWeights.Bold, HorizontalAlignment = HorizontalAlignment.Center, VerticalAlignment = VerticalAlignment.Center };

        return waitWindow;
    }

    public void Load(Window waitWindow = null)
    {
        if (waitWindow == null)
        {
            waitWindow = GetWaitWindow();
        }
        BackgroundWorker worker = new BackgroundWorker();
        worker.DoWork += delegate
        {
            Dispatcher.BeginInvoke(new Action(delegate { waitWindow.ShowDialog(); }));
            Result = _execute();
            Dispatcher.BeginInvoke(new Action(delegate() { waitWindow.Close(); }));
        };
        worker.RunWorkerCompleted += delegate
        {
            worker.Dispose();
            if (JobFinished != null)
            {
                JobFinished(this, Result);
            }
        };
        worker.RunWorkerAsync();
    }
} 
```

如何使用它：

```
Loader<TResult> loader = new Loader<TResult>(MethodName);
loader.JobFinished += new Loader<TResult>.OnJobFinished(loader_JobFinished);
loader.Load();

void loader_JobFinished(object sender, TResult result)
{
    // do whatever you want with your result here
} 
```

# android - 如何在主 UI 上显示“查看图表”？

> ID：13835794
> 
> 赞同：0
> 
> 时间：2012-12-12T08:39:01.767
> 
> 标签：android

在我的 Android 程序中，在主要活动 (ReadLog) 中，我将调用另一个活动 (History)，如下所示。

```
Intent intent = new Intent();
intent.setClass(ReadLog.this, History.class);
startActivity(intent); 
```

在历史活动中，我将完成一个名为的视图`chart`并开始显示它，如下所示。

```
View chart = ...;
setContentView(chart); 
```

但现在我希望在主 UI 上显示它。所以我在主 UI 上添加了一个视图（在一些按钮下面），并希望显示`chart`主 UI 视图的内部。我该怎么做？

# sql - 如何根据另一张表中支付的最大税款获取一张表中的姓名？

> ID：13835797
> 
> 赞同：4
> 
> 时间：2012-12-12T08:39:34.267
> 
> 标签：sql, postgresql

我有这两张桌子，

```
 employeeid | firstname  | lastname |   address   | pan  |  joindate  | lastupdatedate | annualincome | taxrate | currentgrade 
------------+------------+----------+-------------+------+------------+----------------+--------------+---------+--------------
          1 | tushar     | mishra   | bommanhalli | ab7c | 2012-10-15 |                |       300000 |    0.05 |            2
          2 | puneet     | purohit  | j.p         | ab5c | 2012-10-15 |                |       300000 |    0.05 |            2
          3 | vishwanath | b.s      | btm         | ab6c | 2012-10-15 |                |       300000 |    0.05 |            1
          4 | xavier     | d'souza  | btm         | ab8c | 2012-10-15 |                |       300000 |    0.05 |            1
          5 | deepak     | kumar    | hebbal      |      | 2012-10-15 |                |       300000 |    0.05 |            1 
```

还有一个。。

```
employeeid | salarydate | income | tax  
------------+------------+--------+------
          2 | 2012-11-01 |  25000 | 1250
          3 | 2012-11-01 |  25000 | 1250
          4 | 2012-11-01 |  25000 | 1250
          5 | 2012-11-01 |  25000 | 1250
          2 | 2012-12-01 |  25000 | 1250
          3 | 2012-12-01 |  25000 | 1250
          4 | 2012-12-01 |  25000 | 1250
          5 | 2012-12-01 |  25000 | 1250
          2 | 2013-01-01 |  25000 | 1250
          3 | 2013-01-01 |  25000 | 1250
          4 | 2013-01-01 |  25000 | 1250
          5 | 2013-01-01 |  25000 | 1250
          1 | 2012-11-01 |  25000 | 1500
          1 | 2012-12-01 |  25000 | 1500
          1 | 2013-01-01 |  25000 | 1500 
```

这里第二个表中的税列是一个月。我想获取去年缴纳最高税的员工的姓名。这里第二个表中的员工 ID 引用了第一个表中的员工 ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:03:01.193

使用此代码。

```
select salary.employeeid,firstname,lastname, sum(tax) 
 from salary
left join employee 
   on salary.employeeid=employee.employeeid
group by salary.employeeid,firstname,lastname
order by sum(tax) DESC LIMIT 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:44:36.403

（刚刚注意到 Postgres 标签……这是给 Oracle 的，但无论如何我都会留下它）

```
select first_name,
       last_name
from   employees
where  employee_id = (
         select   employee_id
         from     (
                  select   employee_id
                  from     salaries
                  where    salarydate >= add_months(trunc(sysdate,'YYYY'),-12) and
                           salarydate <  trunc(sysdate,'YYYY')
                  group by employee_id
                  order by sum(tax_paid) desc)
         where    rownum = 1) 
```

# java - Java Arraylist 删除对象

> ID：13835799
> 
> 赞同：0
> 
> 时间：2012-12-12T08:39:45.413
> 
> 标签：java, object, arraylist, lwjgl

每次来自 arraylist 形状的框到达指定位置时，都必须从 arraylist 中删除它。但它似乎不起作用，我做错了什么？

```
if(!box.removing && box.y == MoveY - 50 && MoveX != box.x) {
                    box.removing = true;
                    score += 10;

                    System.out.println(shapes.indexOf(box));

                    shapes.remove(shapes.indexOf(box));

                } else {
                    // Gravity loop, if not reached the position. This work.
                    box.update(1);
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T08:44:21.643

List 类型支持“.remove()”的变体，它将对象本身作为参数，因此您不需要先找到它的索引，然后再按索引删除。话虽如此，这个操作对于 ArrayList 类型来说是相对昂贵的；如果您在任意位置插入/删除，请使用 LinkedList。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T08:48:46.113

```
//data = your Array list
for (Iterator i = data.iterator(); i.hasNext(); ) {
    Object element = i.next();

    if ((..your conition..)) {
       i.remove();
    }
} 
```

如果要检查每个对象的条件，请使用上面的代码。但是，如果您只有要删除的对象，而不是简单地调用 .

```
yourList.remove(your-object); 
```

看看[这个](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#remove%28java.lang.Object%29)。

# sql - Excel工作表上SQL选择查询中的连接

> ID：13835803
> 
> 赞同：1
> 
> 时间：2012-12-12T08:40:05.180
> 
> 标签：sql, excel

我已经上传了一个 Excel 文件现在我想通过`select`查询从该工作表中读取数据，并且我想将 4 列与分隔符连接`_`为 Type_name

我使用的查询是

```
select 
   *, '1' as fileid, 'Size' + '_' + 'Material' +'_' & 'Finishing' + '_' + 'Sides' as Type_Name  
from [sheet1$] 
where [Current Code] is not null or [Current Code] <> '' 
```

查询正确返回所有数据，除了`Type_Name`

此查询返回`Type_Name`为`Size_Material_Finishing_Sides`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:14:14.390

这取决于您使用的 SQL 类型。

我假设您是从 Excel 或 MS Access 中查询。在这种情况下，您应该使用`String1 & String2 & ...`.

但是，这里有其他选项：

SQL Server 使用`String1 + String2 + ...`.

Oracle、DB2 和某些版本的 MySQL 使用`String1 || String2 || ...`.

大多数 MySQL 版本支持的方法是`CONCAT(String1, String2, ...)`.

`CONCAT()`存在于大多数 SQL 版本中，但请注意：您不能总是使用它来组合任意数量的字符串。例如，在 Oracle 和 DB2 中，此函数只能组合两个字符串。

您发布的示例包含 and 的混合`+`，`&`这绝对行不通。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-12T09:24:39.643

您正在使用 & 和 + 连接？你为什么首先连接？为什么不直接使用：

```
'Size_Material_Finishing_Sides' as Type_Name 
```

如果这不是您期望的结果，您期望什么结果？

# flash - Actionscript 2.0：每个班级都需要一个影片剪辑吗？

> ID：13835808
> 
> 赞同：0
> 
> 时间：2012-12-12T08:40:22.113
> 
> 标签：flash, actionscript-2

我对 Flash 中基于类的编程还是很陌生，我在让我的 swf “找到”我想要包含在其中的类时遇到了一些麻烦。

一切都与 Flash 文件位于同一目录中，并且所有其他类都正确加载（它们都根据相同的模式命名，并且都位于同一目录中）。我找不到这个类的唯一不同之处在于它没有对应的 MovieClip 而其他的有。

这是 Flash 中的工作方式吗？我是否必须创建一个虚拟影片剪辑来为 Flash 提供一些可以抓取的内容？或者也许在 IDE 中除了类路径之外设置一些东西，以便给它一个定义的链接？

对不起！党卫军

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:44:09.453

不，它不应该需要一个虚拟电影剪辑或任何东西。我认为它本身不是与显示相关的对象（不扩展 Movieclip 或类似的东西）？我建议检查类路径，但似乎你已经这样做了。你得到什么样的错误？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T03:13:21.027

对不起大家（特别是mitim）-

事实证明，这是 Flash 非常简洁的错误报告而不是缺少影片剪辑的情况。我不知道 Flash 会拒绝查找其中有其他错误的类。我发现并修复了错误，这使 Flash 能够找到该类。

不管怎么说，还是要谢谢你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-21T13:44:49.120

首先，ActionScript 要求类的包（例如 mylib.io.socket）必须与从任何项目源目录（当前目录“。 " 默认情况下，但可以在 Flash IDE 的 ActionScript 设置窗口中的源路径选项卡中进行扩展）。

其次，如果不使用 Flash IDE，则不会包含类。您应该在代码中使用“干净的类”（不从库中扩展任何符号）或将“库类”放到舞台上。

# php - mysql如何按年龄选择条件的记录

> ID：13835809
> 
> 赞同：2
> 
> 时间：2012-12-12T08:40:22.603
> 
> 标签：php, mysql, sql

我正在使用一个查询，我需要从年龄介于（多个年龄）的用户中选择行

就像我在具有 3 个字段的表用户中有 3 个用户：

身份证 | 姓名 | 出生日期

1 | 一个 | 12-06-1980
2 | 乙| 12-06-1970
3 | C | 1990年 12
月 6 日 4 | D | 1995年 12
月 6 日 5 | E | 1985 年 12 月 6 日

现在如果我想要 25 岁以下的用户列表输出

姓名 | 出生日期

C | 1990 年 12 月 6
日 1995 年 12 月 6 日

对于这个有什么想法的查询应该是什么？

```
SELECT * FROM users WHERE DOB 
```

? 任何的想法

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T08:42:37.757

试试这个 ：：

```
SELECT * FROM users WHERE DATEDIFF(CURDATE(), DOB)/365<25 
```

要获得年龄：

```
SELECT 
FLOOR(tempUsers.t/365) as `years`
tempUsers.t%365 as `months`
from
(
 SELECT DATEDIFF(CURDATE(), DOB) t FROM users 
) tempUsers 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T08:43:32.750

```
select *
from users
where DOB >= ADDDATE(CURRENT_DATE(), INTERVAL -25 YEAR); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T08:45:24.967

你可以这样做：

```
SELECT * FROM users WHERE DOB >= (CURDATE() - INTERVAL 25 YEAR) 
```

要从`dateofbirth`日期字段计算上述查询中的 25，如下所示：

```
SELECT * FROM users 
WHERE DOB >= (CURDATE() - INTERVAL FLOOR(DATEDIFF(CURDATE(),dateofbirth)/365) YEAR) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T09:44:41.557

我会用这个：

```
select id, name, dob,
  date_format(curdate(), '%Y') - date_format(dob, '%Y') - 
  (date_format(curdate(), '00-%m-%d') < date_format(dob, '00-%m-%d')) as age
from users 
```

它比除以 365 更精确，例如。这给出了错误的 2001：

```
SELECT floor(DATEDIFF('4012-12-12', '2012-12-12')/365) 
```

虽然这给出了 2000 这是正确的：

```
select
  date_format('4012-12-12', '%Y') - date_format('2012-12-12', '%Y') - 
  (date_format('4012-12-12', '00-%m-%d') < date_format('2012-12-12', '00-%m-%d')) 
```

但是，如果您只需要计算年龄，那么两种解决方案都应该有效。

# php - PHP计算总时间

> ID：13835816
> 
> 赞同：-1
> 
> 时间：2012-12-12T08:40:56.413
> 
> 标签：php, time

如何编写计算总工作时间的 PHP 代码？

例如：

工作开始时间：`$starttime = 10:20`
工作结束时间："`$stoptime = 12:59`

所以总工作时间：`$totaltime`应该是：`02:39`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T08:46:32.640

用这个

```
<?php
$start = strtotime("12/12/2012 10:20:00"); 

$end = strtotime("12/12/2012 12:59:00"); 

$totaltime = ($end - $start)  ; 

$hours = intval($totaltime / 3600);   
$seconds_remain = ($totaltime - ($hours * 3600)); 

$minutes = intval($seconds_remain / 60);   
$seconds = ($seconds_remain - ($minutes * 60)); 

echo "$hours:$minutes:$seconds"; 
?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T09:07:10.610

试试这个代码。

```
 $starttime = '10:20';
    $stoptime = '12:59';
    $diff = (strtotime($stoptime) - strtotime($starttime));
    $total = $diff/60;
    echo sprintf("%02dh %02dm", floor($total/60), $total%60); 
```

# c++ - C ++中的异常真的很慢吗

> ID：13835817
> 
> 赞同：113
> 
> 时间：2012-12-12T08:41:00.220
> 
> 标签：c++, c++98

我在看[C++ 中的系统错误处理——Andrei Alexandrescu](http://isocpp.org/blog/2012/12/systematic-error-handling-in-c-andrei-alexandrescu)他声称 C++ 中的异常非常非常慢。

这对于 C++98 仍然适用吗？

* * *

## 回答 #1

> 赞同：184
> 
> 时间：2012-12-12T09:11:27.770

今天用于异常的主要模型（Itanium ABI，VC++ 64 位）是零成本模型异常。

这个想法是，编译器不会通过设置警卫和显式检查是否存在异常来浪费时间，而是生成一个侧表，将任何可能引发异常的点（程序计数器）映射到处理程序列表。当抛出异常时，将参考此列表以选择正确的处理程序（如果有）并展开堆栈。

与典型`if (error)`策略相比：

*   顾名思义，零成本模型在没有异常发生时是免费的
*   `if`发生异常时，它的成本约为 10 倍/20 倍

然而，成本并不是微不足道的：

*   边桌通常*很冷*，因此从内存中获取它需要很长时间
*   确定正确的处理程序涉及 RTTI：要获取的许多 RTTI 描述符，分散在内存中，以及要运行的复杂操作（基本上是`dynamic_cast`对每个处理程序的测试）

因此，主要是缓存未命中，因此与纯 CPU 代码相比并非微不足道。

*注意：有关更多详细信息，请阅读[TR18015 报告，第 5.4 章异常处理 (pdf)](http://www.open-std.org/jtc1/sc22/wg21/docs/TR18015.pdf)*

**所以，是的，异常路径上的**异常很慢，但它们通常比显式检查（`if`策略）更快。

*注意：Andrei Alexandrescu 似乎对这个“更快”提出了质疑。我个人看到事情是双向的，有些程序在异常情况下更快，而另一些程序在分支上更快，因此在某些情况下似乎确实失去了可优化性。*

* * *

有关系吗 ？

我会声称它没有。编写程序时应该考虑到**可读性**，而不是性能（至少，不是作为首要标准）。当人们期望调用者不能或不希望当场处理故障并将其传递到堆栈时，将使用异常。*奖励：在 C++11 中，可以使用标准库在线程之间编组异常。*

虽然这很微妙，但我声称不`map::find`应该抛出，但如果尝试取消引用它失败，我可以`map::find`返回`checked_ptr`抛出，因为它是 null：在后一种情况下，就像 Alexandrescu 引入的类一样，**调用者选择**在显式检查和依赖异常之间。在不赋予呼叫者更多责任的情况下赋予呼叫者权力通常是良好设计的标志。

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2012-12-12T12:49:27.720

当问题发布时，我正在去看医生的路上，出租车在等着，所以我只有时间来做一个简短的评论。但是现在已经评论和赞成和反对，我最好添加我自己的答案。即使[马蒂厄的回答](https://stackoverflow.com/a/13836329/464581)已经很不错了。

* * *

## 与其他语言相比，C++ 中的异常是否特别慢？

重新索赔

> “我在看[C++ 中的系统错误处理——Andrei Alexandrescu](http://isocpp.org/blog/2012/12/systematic-error-handling-in-c-andrei-alexandrescu)他声称 C++ 中的异常非常慢。”

如果这确实是安德烈所声称的，那么这一次他是非常具有误导性的，如果不是完全错误的话。对于引发/抛出的异常，与该语言中的其他基本操作相比总是很慢，*无论编程语言如何*。正如声称的声明所表明的那样，不仅在 C++ 中，或者在 C++ 中比在其他语言中更是如此。

一般来说，无论语言如何，两个基本语言特性比其他语言慢几个数量级，因为它们转换为处理复杂数据结构的例程调用，是

*   异常抛出，和

*   动态内存分配。

令人高兴的是，在 C++ 中，人们通常可以在时间关键的代码中避免这两种情况。

不幸*的是，没有免费午餐这样的东西*，即使 C++ 的默认效率非常接近。:-) 对于通过避免异常抛出和动态内存分配而获得的效率通常是通过在较低抽象级别进行编码来实现的，将 C++ 用作“更好的 C”。较低的抽象意味着更大的“复杂性”。

更大的复杂性意味着更多的时间花在维护上，而代码重用的好处很少或没有，这是真正的金钱成本，即使难以估计或衡量。即，如果需要，使用 C++ 可以用一些程序员效率换取执行效率。是否这样做在很大程度上是一个工程和直觉决定，因为在实践中，只有收益，而不是成本，可以很容易地估计和衡量。

* * *

## 是否有 C++ 异常抛出性能的客观衡量标准？

是的，国际 C++ 标准化委员会发布了[一份关于 C++ 性能的技术报告，TR18015](http://www.open-std.org/jtc1/sc22/wg21/docs/TR18015.pdf)。

* * *

## 异常“慢”是什么*意思？*

这主要意味着，由于搜索处理程序，与分配`throw`相比，a 可能需要很长时间。`int`

正如 TR18015 在其第 5.4 节“异常”中所讨论的，有两种主要的异常处理实现策略，

*   每个`try`块动态设置异常捕获的方法，以便在抛出异常时执行处理程序的动态链的搜索，以及

*   编译器生成静态查找表的方法，这些查找表用于确定抛出异常的处理程序。

第一种非常灵活和通用的方法几乎在 32 位 Windows 中强制使用，而在 64 位域和 *nix 域中，通常使用第二种更有效的方法。

此外，正如该报告所讨论的，对于每种方法，异常处理都会影响效率的三个主要领域：

*   `try`-块，

*   常规功能（优化机会），以及

*   `throw`-表达式。

主要是，动态处理程序方法（32 位 Windows）异常处理对`try`块有影响，主要与语言无关（因为这是由 Windows 的*结构化异常处理*方案强制执行的），而静态表方法的成本大致为零`try`-块。与 SO 答案相比，讨论这一点需要更多的空间和研究。因此，请参阅报告了解详情。

不幸的是，从 2006 年开始，到 2012 年底，这份报告已经有点过时了，据我所知，没有任何可比的更新。

另一个重要的观点是，*使用异常*对性能的影响与支持语言功能的孤立效率有很大不同，因为正如报告所指出的，

> “在考虑异常处理时，必须将其与处理错误的替代方法进行对比。”

例如：

*   不同编程风格导致的维护成本（正确性）

*   冗余呼叫站点`if`故障检查与集中式`try`

*   缓存问题（例如较短的代码可能适合缓存）

该报告有不同的方面需要考虑，但无论如何，获得关于执行效率的确凿事实的唯一实用方法可能是在确定的开发时间上限内，并与开发人员一起使用异常而不使用异常来实现相同的程序熟悉每种方式，然后**MEASURE**。

* * *

## 什么是避免异常开销的好方法？

**正确性**几乎总是胜过效率。

没有例外，以下情况很容易发生：

1.  某些代码 P 旨在获取资源或计算某些信息。

2.  调用代码 C 应该检查成功/失败，但没有。

3.  在 C 之后的代码中使用了不存在的资源或无效信息，从而导致普遍的混乱。

主要问题是第 (2) 点，在通常的*返回代码*方案中，调用代码 C 不会被强制检查。

有两种主要方法可以强制进行此类检查：

*   其中P失败时直接抛出异常。

*   其中 P 返回一个对象，C 在使用其主值之前必须*检查*该对象（否则为异常或终止）。

第二种方法是 AFAIK，首先由 Barton 和 Nackman 在他们的书 * [Scientific and Engineering C++: An Introduction with Advanced Techniques and Examples](https://rads.stackoverflow.com/amzn/click/com/0201533936)中描述，他们在其中引入了一个名为**`Fallow`**“可能”函数结果的类。**`optional`**Boost 库现在提供了一个类似的类。并且您可以轻松地`Optional`自己实现一个类，`std::vector`在非 POD 结果的情况下使用作为值载体。

对于第一种方法，调用代码 C 没有选择，只能使用异常处理技术。然而，使用第二种方法，调用代码 C 可以自己决定是进行`if`基于检查还是进行一般异常处理。因此，第二种方法支持在程序员与执行时间效率之间进行权衡。

* * *

## 各种 C++ 标准对异常性能有何影响？

> “我想知道这对于 C++98 是否仍然适用”

C++98 是第一个 C++ 标准。对于异常，它引入了异常类的标准层次结构（不幸的是相当不完善）。对性能的主要影响是*异常规范*（在 C++11 中被删除）的可能性，但是它从未被主要的 Windows C++ 编译器完全实现 Visual C++：Visual C++ 接受 C++98 异常规范语法，但只是忽略异常规范。

C++03 只是 C++98 的技术勘误。C++03 中唯一真正的新功能是*值初始化*。这与异常无关。

随着 C++11 标准的一般异常规范被删除，并替换为`noexcept`关键字。

C++11 标准还增加了对存储和重新抛出异常的支持，这对于在 C 语言回调中传播 C++ 异常非常有用。这种支持有效地限制了当前异常的存储方式。但是，据我所知，这不会影响性能，除非在较新的代码中，异常处理可能更容易在 C 语言回调的两侧使用。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2018-09-26T08:53:59.967

除非您将代码转换为程序集或对其进行基准测试，否则您永远不能声称性能。

这是您所看到的：（[快速工作台）](http://quick-bench.com/6uk5MBaVaIulNiE5IJncPrl0ShI)

错误代码对出现的百分比不敏感。只要它们从未被抛出，异常就会有一点开销。一旦你扔掉它们，痛苦就开始了。在这个例子中，它在 0%、1%、10%、50% 和 90% 的情况下被抛出。当 90% 的时间抛出异常时，代码比 10% 的时间抛出异常的情况慢 8 倍。如您所见，异常非常缓慢。如果经常抛出，请勿使用它们。如果您的应用程序没有实时要求，如果它们很少发生，请随意丢弃它们。

你会看到很多关于他们的矛盾意见。但最后，异常是否缓慢？我不评判。只看基准。

[![C++ 异常性能基准](../Images/28c48aa26898c9fb0b035bef5a26db68.png)](https://i.stack.imgur.com/pgKow.png)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-12-12T08:52:21.310

这取决于编译器。

例如，GCC 以在处理异常时性能非常差而闻名，但在过去几年中，这种情况变得相当好。

但请注意，处理异常应该——正如其名称所说——是软件设计中的例外而不是规则。当您的应用程序每秒抛出如此多的异常以影响性能并且这仍然被认为是正常操作时，那么您应该考虑以不同的方式做事。

异常是一种很好的方法，可以通过消除所有笨拙的错误处理代码来使代码更具可读性，但是一旦它们成为正常程序流程的一部分，它们就变得非常难以遵循。请记住，a`throw`几乎是`goto catch`变相的 a。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-18T11:33:52.183

是的，但这没关系。为什么？
阅读：
[https ://blogs.msdn.com/b/ericlippert/archive/2008/09/10/vexing-exceptions.aspx](https://blogs.msdn.com/b/ericlippert/archive/2008/09/10/vexing-exceptions.aspx)

基本上这说明使用 Alexandrescu 所描述的异常（50 倍减速，因为它们使用`catch`as `else`）是错误的。对于喜欢这样做的人来说，我希望 C++22 :) 会添加如下内容：（
请注意，这必须是核心语言，因为它基本上是编译器从现有语言生成代码）

```
result = attempt<lexical_cast<int>>("12345");  //lexical_cast is boost function, 'attempt'
//... is the language construct that pretty much generates function from lexical_cast, generated function is the same as the original one except that fact that throws are replaced by return(and exception type that was in place of the return is placed in a result, but NO exception is thrown)...     
//... By default std::exception is replaced, ofc precise configuration is possible
if (result)
{
     int x = result.get(); // or result.result;
}
else 
{
     // even possible to see what is the exception that would have happened in original function
     switch (result.exception_type())
     //...

} 
```

PS还请注意，即使异常很慢...如果您在执行期间不在该部分代码上花费大量时间，那也不是问题...例如，如果浮点除法很慢并且您将其设为4x如果您花费 0.3% 的时间进行 FP 除法，那么更快也没关系...

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-12T08:46:57.527

就像 in silico 所说的它的实现依赖，但一般来说，任何实现都认为异常很慢，不应该在性能密集型代码中使用。

编辑：我并不是说根本不使用它们，但对于性能密集型代码，最好避免使用它们。

# wordpress - 如何在上线之前自定义 Wordpress 主题

> ID：13835830
> 
> 赞同：4
> 
> 时间：2012-12-12T08:41:55.800
> 
> 标签：wordpress, wordpress-theming

昨天我在自托管网站上的 Wordpress 上安装了一个新主题。我知道允许您预览主题并使用它来选择我要安装的新主题的功能。

**问题** 我不想中断我网站的正常运行，但是这个新主题需要大量定制才能准备就绪。我该怎么做呢？

**我糟糕的解决方案** 是在我的桌面上运行虚拟服务器的唯一方法吗？这似乎很乏味，更不用说我在切换到“真实”服务器时通常会遇到的所有错误。

**更好的方法？** 我一直在搜索 SO 以及[WordPress](http://en.forums.wordpress.com/forum/themes)论坛以获取有关如何执行此操作的答案，但没有找到答案。我会认为这是一个常见的问题。也许我使用了错误的搜索词`[themes, customization, before installing]`？？？

任何帮助是极大的赞赏！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T09:52:16.233

好的，因为您的问题是一个非常好的问题，并且可能不少人在决定更新他们的网站时会经历相同的过程，所以我决定尝试使用`get_stylesheet`and`get_template`过滤器钩子。事实证明，使用一个非常小的插件，您可以根据特定规则轻松实施特定主题（在这种情况下，任何登录的访问者，但您可以更改它以使用您想要的任何逻辑）。

这是您需要放入插件目录中的文件的代码：

```
<?php 
/*
Plugin Name: Switch Theme
Description: Switches the theme for logged-in visitors, while keeping the current theme for everyone else. !!!NOTE!!! Please back-up your database prior using this plugin - I can't guarantee that it will work with any theme, nor that it won't break your site's set-up - USE AT YOUR OWN RISK(I did a quick test and it seemed to be fine, but haven't done extensive testing).

You don't need to switch to the desired theme before that - you want to keep active the theme that you will display to your visitors - the one that you will see will be used programatically.

Before activating the plugin, change the line that says `private $admin_theme = '';` to `private $admin_theme = 'theme-directory-name';` where "theme-directory-name" is obviously the name of the directory in which the desired theme resides in.
*/

class MyThemeSwitcher {
    private $admin_theme = '';

    function MyThemeSwitcher() {
        add_filter( 'stylesheet', array( &$this, 'get_stylesheet' ) );
        add_filter( 'template', array( &$this, 'get_template' ) );
    }

    function get_stylesheet($stylesheet = '') {
        if ( is_user_logged_in() && $this->admin_theme ) {
            return $this->admin_theme;
        }
        return $stylesheet;
    }

    function get_template( $template ) {
        if ( is_user_logged_in() && $this->admin_theme ) {
            return $this->admin_theme;
        }
        return $template;
    }
}

$theme_switcher = new MyThemeSwitcher(); 
```

所以 - 首先**备份您的数据库！**我在本地进行了测试，默认主题为 21，自定义主题为基本框架主题 - 主题选项和导航菜单已正确保存。

然后，您需要做的就是更新文件（将表示要使用的主题所在目录的名称更改为 where 的`private $admin_theme = '';`行`private $admin_theme = 'theme-slug';`）`theme-slug`。

此外 - 您将无法更改`Front page`和`Posts page`选项，而这不会影响实时站点，也无法更改两个主题使用的任何共享组件（站点名称、首页、帖子页面、每页帖子，等选项，内容等）。

因此，如果您不知道此解决方案是否适合您 - 好吧，这取决于。

如果两个主题都不是相对复杂，那么您很可能应该能够使用此 hack。如果他们是，也许您应该按照其他人的建议对您的网站进行第二次安装 - 我认为在子域或子目录中进行第二次安装将是您的最佳选择（仅仅是因为移动多站点数据库是比移动普通的 WP 数据库更复杂）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T08:46:00.347

我会设置安装了 wordpress 的本地 apache 服务器来自定义和测试新主题。完成自定义后，您可以将主题上传到您的实时站点并激活它。如果您需要在仪表板中设置一些设置，那么您可能需要再次调整它们。这是在上线之前测试/自定义主题的一种方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T09:19:18.503

您可以创建一个网络（使用 WordPress 创建多站点`define('WP_ALLOW_MULTISITE', true);`，请参阅：[http](http://codex.wordpress.org/Create_A_Network) ://codex.wordpress.org/Create_A_Network ），然后创建一个子站点，然后使用维护插件将其“关闭”，这样用户就无法访问未以管理员身份登录，从主博客导出您的帖子和数据，使用 WordPress 默认导入器将它们导入子博客，然后将您的新主题应用到该子博客并进行处理。当一切都让您满意时，将主题应用到主站点并停用子站点。

# android - android：通过菜单移动的异常

> ID：13835834
> 
> 赞同：0
> 
> 时间：2012-12-12T08:42:15.883
> 
> 标签：android, exception, random

在我的活动中，我使用 inflate 加载了一个底部菜单（该菜单`horizontalScrollView`带有一些按钮（每个活动一个被选中，一个被取消选中））。

快速浏览此菜单，有时我会遇到异常（该点是随机的），并且似乎由于某种原因，android 杀死了某些东西，因此无法用于我的活动。

错误日志：

```
12-12 09:24:24.389: I/Process(480): Sending signal. PID: 480 SIG: 9
12-12 09:24:24.430: I/ActivityManager(81): Process com.apia.selfnettest (pid 480) has died.
12-12 09:24:24.439: I/WindowManager(81): WIN DEATH: Window{405b6c28 com.apia.selfnettest/com.apia.selfnettest.MainClass paused=false}
12-12 09:24:24.459: E/InputDispatcher(81): channel '407da4a8 com.apia.selfnettest/com.apia.selfnettest.MainClass (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
12-12 09:24:24.459: E/InputDispatcher(81): channel '407da4a8 com.apia.selfnettest/com.apia.selfnettest.MainClass (server)' ~ Channel is unrecoverably broken and will be disposed!
12-12 09:24:24.609: I/WindowManager(81): WIN DEATH: Window{40613eb8 com.apia.selfnettest/com.apia.selfnettest.MainClass paused=false}
12-12 09:24:24.769: I/WindowManager(81): WIN DEATH: Window{405fc890 com.apia.selfnettest/com.apia.selfnettest.MainClass paused=false}
12-12 09:24:24.960: I/WindowManager(81): WIN DEATH: Window{409d4d48 com.apia.selfnettest/com.apia.selfnettest.MainClass paused=false}
12-12 09:24:25.030: I/WindowManager(81): WIN DEATH: Window{408c5d58 com.apia.selfnettest/com.apia.selfnettest.ContactOffline paused=false}
12-12 09:24:25.189: I/WindowManager(81): WIN DEATH: Window{408f4090 com.apia.selfnettest/com.apia.selfnettest.InformationOffline paused=false}
12-12 09:24:25.289: I/WindowManager(81): WIN DEATH: Window{406f0470 com.apia.selfnettest/com.apia.selfnettest.MainClass paused=false}
12-12 09:24:25.459: I/WindowManager(81): WIN DEATH: Window{4054e0b8 com.apia.selfnettest/com.apia.selfnettest.MainClass paused=false}
12-12 09:24:25.579: I/WindowManager(81): WIN DEATH: Window{406f7be0 com.apia.selfnettest/com.apia.selfnettest.MainClass paused=false}
12-12 09:24:25.679: I/WindowManager(81): WIN DEATH: Window{409eb980 com.apia.selfnettest/com.apia.selfnettest.MainClass paused=false}
12-12 09:24:25.819: I/ActivityManager(81): Start proc com.apia.selfnettest for activity com.apia.selfnettest/.MainClass: pid=520 uid=10034 gids={3003, 1006, 1015}
12-12 09:24:25.829: I/WindowManager(81): WINDOW DIED Window{407da4a8 com.apia.selfnettest/com.apia.selfnettest.MainClass paused=false}
12-12 09:24:25.859: I/WindowManager(81): WIN DEATH: Window{40774410 com.apia.selfnettest/com.apia.selfnettest.MainClass paused=false}
12-12 09:24:25.899: E/InputDispatcher(81): Received spurious receive callback for unknown input channel.  fd=160, events=0x8
12-12 09:24:25.899: E/InputDispatcher(81): Received spurious receive callback for unknown input channel.  fd=163, events=0x8
12-12 09:24:25.899: E/InputDispatcher(81): Received spurious receive callback for unknown input channel.  fd=166, events=0x8
12-12 09:24:25.899: E/InputDispatcher(81): Received spurious receive callback for unknown input channel.  fd=171, events=0x8
12-12 09:24:25.899: E/InputDispatcher(81): Received spurious receive callback for unknown input channel.  fd=174, events=0x8
12-12 09:24:25.899: E/InputDispatcher(81): Received spurious receive callback for unknown input channel.  fd=175, events=0x8
12-12 09:24:25.899: E/InputDispatcher(81): channel '406dfd88 com.apia.selfnettest/com.apia.selfnettest.MainClass (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
12-12 09:24:25.899: E/InputDispatcher(81): channel '406dfd88 com.apia.selfnettest/com.apia.selfnettest.MainClass (server)' ~ Channel is unrecoverably broken and will be disposed!
12-12 09:24:25.961: I/WindowManager(81): WIN DEATH: Window{407713a0 com.apia.selfnettest/com.apia.selfnettest.MainClass paused=false}
12-12 09:24:25.979: I/WindowManager(81): WIN DEATH: Window{409345c0 com.apia.selfnettest/com.apia.selfnettest.MainClass paused=false}
12-12 09:24:26.090: I/WindowManager(81): WIN DEATH: Window{408ab168 com.apia.selfnettest/com.apia.selfnettest.MainClass paused=false}
12-12 09:24:26.130: I/WindowManager(81): WIN DEATH: Window{40892f20 com.apia.selfnettest/com.apia.selfnettest.MainClass paused=false}
12-12 09:24:26.171: I/WindowManager(81): WIN DEATH: Window{406dfd88 com.apia.selfnettest/com.apia.selfnettest.MainClass paused=false}
12-12 09:24:26.199: W/WindowManager(81): Failed looking up window
12-12 09:24:26.199: W/WindowManager(81): java.lang.IllegalArgumentException: Requested window android.os.BinderProxy@407da2c8 does not exist
12-12 09:24:26.199: W/WindowManager(81):    at com.android.server.WindowManagerService.windowForClientLocked(WindowManagerService.java:8174)
12-12 09:24:26.199: W/WindowManager(81):    at com.android.server.WindowManagerService.windowForClientLocked(WindowManagerService.java:8165)
12-12 09:24:26.199: W/WindowManager(81):    at com.android.server.WindowManagerService$WindowState$DeathRecipient.binderDied(WindowManagerService.java:7024)
12-12 09:24:26.199: W/WindowManager(81):    at android.os.BinderProxy.sendDeathNotice(Binder.java:381)
12-12 09:24:26.199: W/WindowManager(81):    at dalvik.system.NativeStart.run(Native Method)
12-12 09:24:26.199: I/WindowManager(81): WIN DEATH: null
12-12 09:24:26.199: I/WindowManager(81): WIN DEATH: Window{4093bfb0 com.apia.selfnettest/com.apia.selfnettest.MainClass paused=false}
12-12 09:24:26.260: I/WindowManager(81): WIN DEATH: Window{408d2a28 com.apia.selfnettest/com.apia.selfnettest.MainClass paused=false}
12-12 09:24:26.300: I/WindowManager(81): WIN DEATH: Window{408a49e8 com.apia.selfnettest/com.apia.selfnettest.MainClass paused=false}
12-12 09:24:26.311: I/WindowManager(81): WIN DEATH: Window{40884570 com.apia.selfnettest/com.apia.selfnettest.MainClass paused=false}
12-12 09:24:26.319: E/InputDispatcher(81): Received spurious receive callback for unknown input channel.  fd=181, events=0x8
12-12 09:24:26.330: E/InputDispatcher(81): Received spurious receive callback for unknown input channel.  fd=184, events=0x8
12-12 09:24:26.330: E/InputDispatcher(81): Received spurious receive callback for unknown input channel.  fd=187, events=0x8
12-12 09:24:26.330: E/InputDispatcher(81): Received spurious receive callback for unknown input channel.  fd=190, events=0x8
12-12 09:24:26.330: E/InputDispatcher(81): Received spurious receive callback for unknown input channel.  fd=195, events=0x8
12-12 09:24:26.330: E/InputDispatcher(81): Received spurious receive callback for unknown input channel.  fd=196, events=0x8
12-12 09:24:26.330: E/InputDispatcher(81): Received spurious receive callback for unknown input channel.  fd=198, events=0x8
12-12 09:24:26.330: E/InputDispatcher(81): Received spurious receive callback for unknown input channel.  fd=202, events=0x8
12-12 09:24:26.330: I/InputDispatcher(81): Dropping event because there is no touched window or focused application.
12-12 09:24:26.330: I/InputDispatcher(81): Dropping event because there is no touched window or focused application.
12-12 09:24:26.340: I/InputDispatcher(81): Dropping event because there is no touched window or focused application.
12-12 09:24:26.340: I/InputDispatcher(81): Dropping event because there is no touched window or focused application.
12-12 09:24:26.340: I/InputDispatcher(81): Dropping event because there is no touched window or focused application.
12-12 09:24:26.340: I/InputDispatcher(81): Dropping event because there is no touched window or focused application.
12-12 09:24:26.340: I/InputDispatcher(81): Dropping event because there is no touched window or focused application.
12-12 09:24:26.349: I/InputDispatcher(81): Dropping event because there is no touched window or focused application.
12-12 09:24:26.349: I/InputDispatcher(81): Dropping event because there is no touched window or focused application.
12-12 09:24:26.349: I/InputDispatcher(81): Dropping event because there is no touched window or focused application.
12-12 09:24:26.349: I/InputDispatcher(81): Dropping event because there is no touched window or focused application.
12-12 09:24:26.349: I/InputDispatcher(81): Dropping event because there is no touched window or focused application.
12-12 09:24:26.349: I/InputDispatcher(81): Dropping event because there is no touched window or focused application.
12-12 09:24:26.359: I/InputDispatcher(81): Dropping event because there is no touched window or focused application.
12-12 09:24:26.359: I/InputDispatcher(81): Dropping event because there is no touched window or focused application.
12-12 09:24:26.359: I/InputDispatcher(81): Dropping event because there is no touched window or focused application.
12-12 09:24:26.359: I/InputDispatcher(81): Dropping event because there is no touched window or focused application.
12-12 09:24:26.380: I/InputDispatcher(81): Dropping event because there is no touched window or focused application.
12-12 09:24:26.380: I/InputDispatcher(81): Dropping event because there is no touched window or focused application.
12-12 09:24:26.380: I/InputDispatcher(81): Dropping event because there is no touched window or focused application.
12-12 09:24:26.539: I/InputDispatcher(81): Dropping event because there is no touched window or focused application.
12-12 09:24:26.630: I/jdwp(520): Ignoring second debugger -- accepting and dropping
12-12 09:24:27.030: D/AndroidRuntime(520): Shutting down VM
12-12 09:24:27.030: W/dalvikvm(520): threadid=1: thread exiting with uncaught exception (group=0x40015560)
12-12 09:24:27.050: E/AndroidRuntime(520): FATAL EXCEPTION: main
12-12 09:24:27.050: E/AndroidRuntime(520): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.apia.selfnettest/com.apia.selfnettest.MainClass}: java.lang.NullPointerException
12-12 09:24:27.050: E/AndroidRuntime(520):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
12-12 09:24:27.050: E/AndroidRuntime(520):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
12-12 09:24:27.050: E/AndroidRuntime(520):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
12-12 09:24:27.050: E/AndroidRuntime(520):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
12-12 09:24:27.050: E/AndroidRuntime(520):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-12 09:24:27.050: E/AndroidRuntime(520):  at android.os.Looper.loop(Looper.java:130)
12-12 09:24:27.050: E/AndroidRuntime(520):  at android.app.ActivityThread.main(ActivityThread.java:3683)
12-12 09:24:27.050: E/AndroidRuntime(520):  at java.lang.reflect.Method.invokeNative(Native Method)
12-12 09:24:27.050: E/AndroidRuntime(520):  at java.lang.reflect.Method.invoke(Method.java:507)
12-12 09:24:27.050: E/AndroidRuntime(520):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-12 09:24:27.050: E/AndroidRuntime(520):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-12 09:24:27.050: E/AndroidRuntime(520):  at dalvik.system.NativeStart.main(Native Method)
12-12 09:24:27.050: E/AndroidRuntime(520): Caused by: java.lang.NullPointerException
12-12 09:24:27.050: E/AndroidRuntime(520):  at com.apia.utils.LibLayout.determineScreenDensity(LibLayout.java:1273)
12-12 09:24:27.050: E/AndroidRuntime(520):  at com.apia.utils.LibLayout.isXLargeLayout(LibLayout.java:1310)
12-12 09:24:27.050: E/AndroidRuntime(520):  at com.apia.selfnettest.MainClass.onCreate(MainClass.java:191)
12-12 09:24:27.050: E/AndroidRuntime(520):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-12 09:24:27.050: E/AndroidRuntime(520):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
12-12 09:24:27.050: E/AndroidRuntime(520):  ... 11 more
12-12 09:24:27.059: W/ActivityManager(81):   Force finishing activity com.apia.selfnettest/.MainClass
12-12 09:24:27.580: W/ActivityManager(81): Activity pause timeout for HistoryRecord{4071c7f0 com.apia.selfnettest/.MainClass}
12-12 09:24:30.865: W/ActivityManager(81): Launch timeout has expired, giving up wake lock! 
```

这是产生错误的函数：

```
 public static int determineScreenDensity() {
        //0: low density
        //1: medium density
        //2: high density
        DisplayMetrics metrics = new DisplayMetrics();
        ((Activity) LibBanking.AppContext).getWindowManager().getDefaultDisplay().getMetrics(metrics);
        int density = metrics.densityDpi;

        if (density==DisplayMetrics.DENSITY_XHIGH) {
            return 3;
        }
        else if (density==DisplayMetrics.DENSITY_HIGH) {
            return 2;
        }
        else if (density==DisplayMetrics.DENSITY_MEDIUM) {
            return 1;
        }
        else if (density==DisplayMetrics.DENSITY_LOW) {
            return 0;
        }
        else {
            return 1;
        }

    } 
```

* * *

并注意以这种方式`LibBanking.AppContext`在每个`activity`中设置：

```
LibBanking.AppContext = this; 
```

先感谢您....

# oracle11g - 自动化 Oracle 11g 数据库备份步骤

> ID：13835835
> 
> 赞同：1
> 
> 时间：2012-12-12T08:42:18.460
> 
> 标签：oracle11g, command-line-arguments

我必须自动化 Oracle 11g 数据库备份。我正在使用通过 windows 命令提示符运行的 followng synatx。

```
rman.exe  target sys/Logility_123@newdb  @'C:\cmdfile.txt' 
```

我的文本文件有以下命令

```
RUN
{
 Shutdown immediate;
 Startup mount;
 Backup Database;
 ALTER DATABASE OPEN;

} 
```

我在下面的快照中收到以下错误。 ![在此处输入图像描述](../Images/5012e30ab8652c8a5e842cb58db663b3.png)

请告知如何解决此问题。

# exception - VS2012 不会因新项目的异常而中断

> ID：13835840
> 
> 赞同：4
> 
> 时间：2012-12-12T08:42:29.380
> 
> 标签：exception, visual-studio-2012, breakpoints

我在我的 VS2012 解决方案中添加了一个新的控制台应用程序项目。

当它遇到异常时，我得到一个错误对话框，并且 VS2012 不会中断并转到引发异常的源代码行。

与解决方案一起创建的原始项目确实会正确中断异常，因此我认为问题在于新创建的可执行文件未标记为与异常中断相关。（调试器“未附加”？我不确定这是否正确）

如何让 VS2012 在项目中开始出现异常？

我正在使用调试配置，正在生成 pdb。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T08:51:37.753

当函数调用跨内核边界时，最近的 x64 Windows 系统没有将异常正确地传播回 x64 应用程序时存在问题。SO 和整个互联网上有很多关于它的帖子，例如[the-case-of-the-disappearing-onload-exception-user-mode-callback-exceptions-in-x64](http://blog.paulbetts.org/index.php/2010/07/20/the-case-of-the-disappearing-onload-exception-user-mode-callback-exceptions-in-x64/)

您可以通过转到 Debug->Exceptions 并标记 CLR exceptions Throw 列来在一定程度上与之抗争。但请注意，VS 会在您处理的异常上收支平衡。

# c# - 以编程方式在水晶报表c#中创建公式字段

> ID：13835845
> 
> 赞同：2
> 
> 时间：2012-12-12T08:42:34.050
> 
> 标签：c#, crystal-reports

我想以编程方式 (C#) 添加以报告新的公式字段。但我只发现现有字段的正确性。任务是在大量报告中添加特定字段。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-11T05:52:48.627

这是一个示例：

```
FormulaFieldDefinitions definitions = MyReport.FormulaFields;
string formulaText = "IF " + MyReport.Database.Tables[1].Fields[1].Name 
+ " < 10 THEN" + MyReport.Database.Tables[1].Fields[2].Name;
definitions.Add("Test", formulaText);
MyReport.Sections[1].AddFieldObject(definitions[1], 0, 0); 
```

# c# - C# 中没有 DirectX/XNA 的点到平面的距离？

> ID：13835850
> 
> 赞同：0
> 
> 时间：2012-12-12T08:42:40.207
> 
> 标签：c#, .net, geometry

有没有一种简单的方法可以在没有大型图形库的情况下进行这种数学/几何计算？出于我的兴趣，那些库只会是一个大臃肿，因为我只需要一些数学，不需要渲染，什么都不需要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T08:45:40.613

你去： http: [//mathworld.wolfram.com/Point-PlaneDistance.html](http://mathworld.wolfram.com/Point-PlaneDistance.html)或[http://mathinsight.org/distance_point_plane#distance_formula_2](http://mathinsight.org/distance_point_plane#distance_formula_2)

你只需要实现这个简单的公式。

# llvm - 如何使用 LLVM API 找出函数之间的共享变量？

> ID：13835851
> 
> 赞同：0
> 
> 时间：2012-12-12T08:42:41.780
> 
> 标签：llvm

最近我使用 LLVM API 来测试 C++ 程序。现在我想找出不同函数之间的共享变量，有什么办法吗？[AliasAnalysis](http://llvm.org/docs/AliasAnalysis.html)似乎不起作用！

我编写了一个函数传递如下：

```
bool EscapeAnalysis::runOnFunction(Function& F) {
    EscapePoints.clear();

    TargetData& TD = getAnalysis<TargetData>();
    AliasAnalysis& AA = getAnalysis<AliasAnalysis>();
    Module* M = F.getParent();
 // errs() << *M << "\n";
 // Walk through all instructions in the function, identifying those that
 // may allow their inputs to escape.
    for(inst_iterator II = inst_begin(F), IE = inst_end(F); II != IE; ++II) {
        Instruction* I = &*II;

     // The most obvious case is stores.  Any store that may write to global
     // memory or to a function argument potentially allows its input to escape.
        if (StoreInst* S = dyn_cast<StoreInst>(I)) {
             Type* StoreType = S->getOperand(0)->getType();
             unsigned StoreSize = TD.getTypeStoreSize(StoreType);
             Value* Pointer = S->getPointerOperand();

             bool inserted = false;
             for (Function::arg_iterator AI = F.arg_begin(), AE = F.arg_end(); 
                  AI != AE; ++AI) {
                 if (!isa<PointerType>(AI->getType())) continue;
                 AliasAnalysis::AliasResult R = AA.alias(Pointer, StoreSize, AI, ~0UL);
                 if (R != AliasAnalysis::NoAlias) {
                     EscapePoints.insert(S);
                     inserted = true;
                     break;
                 }
            }

            if (inserted)
                continue;

            for (Module::global_iterator GI = M->global_begin(), GE = M->global_end();
                 GI != GE; ++GI) {
                errs() << *GI << "\n";
                AliasAnalysis::AliasResult R = AA.alias(Pointer, StoreSize, GI, ~0UL);
                errs() << "R: " << R << " , NoAlias: " << AliasAnalysis::NoAlias << "\n";

                if (R != AliasAnalysis::NoAlias) {
                    EscapePoints.insert(S);
                    break;
                }
            }

      // Calls and invokes potentially allow their parameters to escape.
      // FIXME: This can and should be refined.  Intrinsics have known escape
      // behavior, and alias analysis may be able to tell us more about callees.
        } else if (isa<CallInst>(I) || isa<InvokeInst>(I)) {
            EscapePoints.insert(I);

            // Returns allow the return value to escape.  This is mostly important
            // for malloc to alloca promotion.
        } else if (isa<ReturnInst>(I)) {
            EscapePoints.insert(I);

            // Branching on the value of a pointer may allow the value to escape through
            // methods not discoverable via def-use chaining.
        } else if(isa<BranchInst>(I) || isa<SwitchInst>(I)) {
            EscapePoints.insert(I);
        }

     // FIXME: Are there any other possible escape points?
    }

     return false;
} 
```

* * *

测试 main.cpp 如下：#include

```
using namespace std;

int X = 0;

int foo() {
X = 1;
int b = 1;
return 0;
}

int bar(int param) {
int y = X;
int z = 9;
int a = z;

++a;
return 0;
}

int main(int argc, char *argv[])
{
    cout << "Hello world!" << endl;
    return 0;
} 
```

* * *

全局变量 X 是函数 bar 和函数 foo 之间的共享变量。但是当我使用如下命令运行传球时：

```
opt -load ./EscapeAnalysis.so -escape-analysis main.o | llc > main.ss 
```

我得到结果：

```
R: 1 , NoAlias: 0 
```

所有结果都是一样的。我打印出 escapePoint 中的变量，发现函数 bar 中的变量 a、z、y 在 escapePoint 中。这是不对的！

注意：我写了一个 opt pass 来测试程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:51:06.103

如果要确定两个不同变量何时可能指向同一内存，则需要进行别名分析。如果您只想检查哪些变量与同一模块中的其他函数共享，您可以：

1.  遍历所有指令，并为每个指令：
2.  遍历它的所有操作数，并且对于每个：
3.  检查它是否是`GlobalVariable`（`isa`例如，通过），如果是：
4.  迭代所有全局的使用（通过`use_begin`和`use_end`），并且对于每个：
5.  检查它是否是`Instruction`，如果是：
6.  检索封闭函数（通过`getParent()->getParent()`），并为该函数：
7.  检查是否是当前正在处理的函数。如果不是，则意味着您找到了一个在当前函数和另一个函数之间共享的变量。

还有其他检查方法，例如检查当前模块中的所有全局变量。

# sms - 如何在 kannel sendms 中添加更多参数？

> ID：13835853
> 
> 赞同：1
> 
> 时间：2012-12-12T08:42:46.250
> 
> 标签：sms, sms-gateway, kannel, smpp

我想在 sendms HTTP URL 中添加更多参数，仅用于创建 kannel-access.log 和 kannel.log。

例子

```
http://<IP>:port/cgi-bin/sendsms?to=1234567890&from=Test&user=foo&password=bar&text=Test+msg
&param1=value1&param2=value2&param3=value3 
```

这里 param1、param2 和 param3 是额外的 http 参数，我也想在日志中添加。kannel-access.log 示例：

```
2012-12-12 14:08:01 Sent SMS [SMSC:SMSC1] 
[SVC:SMSC1] [ACT:] [BINF:] [FID:1812121214063308550] 
[META:] [from:ABC] [to:1234567890] [flags:-1:0:-1:-1:7] 
[msg:107:Test+sms] [udh:0:]
[param1=param1][param2=param2][param3=param3] 
```

请帮助我更改 sendms 命令和日志记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:16:32.857

您可以使用 binfo 或/和帐户参数，其值将记录在您的访问日志中，然后您可以使用该日志文件做任何您想做的事情。

来自 kannel 的用户指南：

*   **帐户**：可选。结转用于计费目的的帐户名称或号码。此字段在日志文件中记录为 ACT，因此如果您的前端对所有服务使用相同的用户名但想在日志中区分它们，它允许您对其进行一些记帐。在 HTTP SMSC 类型的情况下，帐户名称前面带有服务名称（用户名）和冒号 (:)，并转发到 Kannel 的下一个实例。这允许分层记帐。
*   **binfo**：可选。计费标识符/信息代理字段，用于将任意计费交易 ID 或信息传递给特定的 SMSC 模块。对于 EMI2，这被封装到 XSer 0c 字段中，对于 SMPP，这被封装到 submit_sm PDU 的 service_type 中。

# android - Android中的音频播放器

> ID：13835856
> 
> 赞同：3
> 
> 时间：2012-12-12T08:43:01.367
> 
> 标签：android, android-emulator, android-mediaplayer, android-audiomanager, android-notification-bar

我设计了一个应用程序，它根据服务器列表视图中选择的项目播放 12 个不同的音频文件。当音频正在播放并且我在模拟器中点击主页按钮时，我可以在通知栏中看到通知，但是当我点击它时，音频播放器正在重新启动，但之前的音频仍在播放。

单击通知图标时，我需要音频播放器向我显示音频播放器的当前状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:52:45.990

当您的活动被带到前台时，您可以使用 onResume 覆盖。

我假设您使用 ProgressBar 来显示进度。因此，您可以使用媒体播放器的 getCurrentPosition 方法将进度条设置为当前位置。（在 onResume 中执行此操作）

那应该将其设置为适当的位置。然后重新启动任何 CountDown 或操作以更新 ProgressBar，它应该可以工作

# javascript - 这可以将 ColdFusion 脚本转换为 javascript 吗？

> ID：13835860
> 
> 赞同：-5
> 
> 时间：2012-12-12T08:43:12.210
> 
> 标签：javascript, web-applications, coldfusion

我有带有 ColdFusion 和 javascript 的 Web 应用程序代码。我需要将 ColdFusion 脚本转换为 javascript。这可能吗？任何工具都可用？请分享代码或示例，如果你有..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T09:37:34.593

任何编程代码都只是表示逻辑的一种方式，因此 - 一般来说 - 可以用一种语言完成的任何事情也可以用另一种语言完成（尽管用各种语言实现相同目标所需的努力程度会有所不同）。

然而，您在这里遇到的问题 - 正如评论者引起您注意的那样 - 是 CFML 和 JS 在生成和执行网页的过程中扮演不同的角色，因此虽然*逻辑*和最终游戏可以在任何一种语言上实现，但它的完成方式和解决方案的适当性仍然是一个考虑因素。

你需要在这里做两件事。

1.  让您的问题更清楚，包括您需要在 CFML 中执行的 JS 正在做什么。然后我将删除我的反对票；
2.  阅读我在[ColdFusion 请求/响应过程中](http://adamcameroncoldfusion.blogspot.co.uk/2012/10/the-coldfusion-requestresponse-process.html)写的这篇博客文章，因为它可能会澄清您在这里所问的内容的脱节。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T11:18:59.767

这将取决于你想要做什么。正如每个人到目前为止所说的那样，在您使用相关代码更新它之前，这是一个很难回答的问题。

如果您正在执行用户提供的表单验证或字符串操作等操作，那么可以确定（如果您尝试将表单验证移至客户端，我建议在这两个地方都这样做，以防 javascript 被禁用或您正在受到机器人攻击。鼓励在两个地方都这样做，但永远不要删除您的服务器端验证以支持客户端验证）。

如果您正在做一些必须在服务器上完成的事情，例如连接到数据库或文件管理，那么就没有那么多了（是的，您可以使用 javascript 连接到数据库......但不要）

如果您尝试在服务器上做某事但让它看起来对用户不可见，您将需要查看 AJAX，它是您的 CF 脚本和 javaScript 的组合。

我不会标记或否决这个问题，因为我认为如果有机会它是可以挽救的。

# linux - 授予用户权限以使用 netlink 套接字设置 qdisc

> ID：13835870
> 
> 赞同：3
> 
> 时间：2012-12-12T08:44:05.207
> 
> 标签：linux, privileges, netlink

我有一个使用 Libnl 并尝试通过 netlink 套接字设置一些 qdisc 的程序。

我如何管理程序以获得设置 qdisc 的权限？

我知道我可以运行它，`sudo`但这不是我的选择。是否有任何配置文件`limits.conf`可以授予特定用户的权限？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-14T18:57:30.613

在广泛搜索并查看手册页之后，这似乎是不可能的。

Qdiscs 由以下类型的套接字（AF_NETLINK）控制。Qdiscs 使用 netlink 套接字与内核通信。例如，如果您使用 socket(RAW) 打开一个套接字，您可以将 linux“功能”CAP_NET_RAW 设置为您希望能够使用原始套接字的用户。

如果您阅读 netlink 手册页，您会发现它们需要 CAP_NET_ADMIN 进行其他类型的操作，但如果您使用具有此功能的“setcap”命令，然后尝试以该用户身份操作 Qdisc，它似乎不起作用。

如果有人知道更好的方法（包括 linux 内核的补丁），请发布。

# ruby-on-rails - 无法在具有计算列的表中插入行？

> ID：13835875
> 
> 赞同：0
> 
> 时间：2012-12-12T08:44:22.910
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有一个 Rails 3 应用程序在 SQL Server 上针对带有一些计算列的旧数据库运行。当我尝试保存新记录时，出现错误“无法修改“ContractPendingDays”列，因为它是计算列或 UNION 运算符的结果

我没有更新此列，它似乎只是在向数据库中添加新记录时 activerecord 尝试写入的列之一。

有什么方法可以阻止这种行为吗？我什至尝试更改架构 rb 但这没有帮助。（无论如何都是次优的，因为我每次更改数据库时都必须这样做。）

有什么方法可以将列标记为不可更新，以便 activerecord 不会尝试写入它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:30:04.223

在这里找到答案：

[防止活动记录插入为 NULL？](https://stackoverflow.com/questions/7799626/dont-try-to-specify-certain-columns-on-activerecord-generated-insert-into)

（在 before_create 过滤器中使用 attributes.delete）

# java - 未报告的异常.....必须被捕获或声明被抛出

> ID：13835876
> 
> 赞同：1
> 
> 时间：2012-12-12T08:44:24.747
> 
> 标签：java, try-catch, netbeans-7

我不明白为什么我在这一行收到此错误：

```
Vehicle v = new Vehicle("Opel",10,"HTG-454"); 
```

当我把这条线放在 a 中`try/catch`时，我通常不会收到任何错误，但这次 try/catch 块不起作用。

```
public static void main(String[] args)  {
  Vehicle v = new Vehicle("Opel",10,"HTG-454");

  Vector<Vehicle> vc =new Vector<Vehicle>();
  vc.add(v);

  Scanner sc = new Scanner(System.in);
  boolean test=false;
  while(!test) 
    try {
      String name;
      int i = 0;
      int say;
      int age;
      String ID;

      System.out.println("Araba Adeti Giriniz...");
      say = Integer.parseInt(sc.nextLine());

      for(i = 0; i<say; i++) {
        System.out.println("Araba markası...");
        name = sc.nextLine();

        System.out.println("araba yası...");
        age = Integer.parseInt(sc.nextLine());

        System.out.println("araba modeli...");
        ID = sc.nextLine();
        test = true;   

        vc.add(new Vehicle(name, age, ID));
      } 
      System.out.println(vc);
    } catch (InvalidAgeException ex) {
      test=false;
      System.out.println("Hata Mesajı: " + ex.getMessage());
    }           
  }     
} 
```

这是我在 Vehicle 类中的构造函数；

```
public Vehicle(String name, int age,String ID )throws InvalidAgeException{
        this.name=name;
        this.age=age;
        this.ID=ID; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T08:49:11.787

~~一定是~~构造`Vehicle`函数声明了一个检查异常。您调用它的代码`main`既没有声明检查的异常也没有处理它，因此编译器会抱怨它。

现在您已经发布了`Vehicle`构造函数，我们可以看到它声明它会抛出`InvalidAgeException`：

```
public Vehicle(String name, int age,String ID )throws InvalidAgeException{
// here ---------------------------------------^------^ 
```

你`main`没有声明它会抛出`InvalidAgeException`，并且你`try/catch`周围没有`new Vehicle`，所以编译器不会编译它。

这就是检查异常的用途：确保调用某些东西的代码要么处理异常条件（`try/catch`），要么记录它传递它的文件（通过`throws`子句）。

在您的情况下，您需要添加 a`try/catch`因为您不应该`main`声明已检查的异常，例如：

```
public static void main(String[] args)  {
  try {
    Vehicle v = new Vehicle("Opel",10,"HTG-454");
    // ...as much of the other code as appropriate (usually most or all of it)...
  }
  catch (InvalidAgeException ex) {
    // ...do something about it and/or report it...
  }
} 
```

# c# - 如何在列表框中选择索引

> ID：13835880
> 
> 赞同：1
> 
> 时间：2012-12-12T08:44:28.260
> 
> 标签：c#, winforms, listbox, propertygrid, typeconverter

我使用**类型转换器**在**属性网格中将****字符串数组**显示为**列表框**，代码如下。 如何选择列表框的索引以初始化第一次加载的程序？我想要 SelectedIndex = 0，首先显示 arrData = "one"。任何想法？

 ****```
public partial class Form1 : Form
{
    string[] arrData = new string[] { "one", "two", "three" };
    PropertyGrid pGrid = new PropertyGrid();

    public Form1()
    {
        InitializeComponent();

        FirstClass fClass = new FirstClass(arrData);
        pGrid.SelectedObject = fClass;
        pGrid.Dock = DockStyle.Fill;
        this.Controls.Add(pGrid);
    }

    public class FirstClass
    {
        public FirstClass(string[] arrData)
        {
            this.DataSource = arrData;
        }

        [Browsable(true)]
        [DefaultValue("one")]
        [TypeConverter(typeof(SecondClass))]
        public string Counter { get; set; }

        [Browsable(false)]
        public string[] DataSource { get; set; }

    }

    public class SecondClass : StringConverter
    {
        public override bool GetStandardValuesSupported(ITypeDescriptorContext context)
        {
            return true;
        }

        public override StandardValuesCollection GetStandardValues(ITypeDescriptorContext context)
        {
            FirstClass fClass = (FirstClass)context.Instance;
            if (fClass == null || fClass.DataSource == null)
            {
                return new StandardValuesCollection(new string[0]);
            }
            else
            {
                return new StandardValuesCollection(fClass.DataSource);
            }
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:00:13.043

如果我理解正确，如果您只想将列表框中所选项目的索引设置为 0，则应该像下面的代码一样简单。

```
ListBox.SelectedIndex = 0; 
```

有关详细信息，请查看 MSDN 页面。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.selectedindex.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.selectedindex.aspx)****

# html - 在 html 文件选择器对话框上创建过滤器

> ID：13835883
> 
> 赞同：21
> 
> 时间：2012-12-12T08:44:52.527
> 
> 标签：html, openfiledialog

有没有办法在默认文件选择器对话框中只显示 .xxx 文件。xxx 可能是未知的文件类型，例如 abc、efg 等。

我使用的是 html5，所以它可能对这类东西有新的支持。

谢谢！

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-12-12T08:54:08.763

输入元素的[HTML 5`accept`属性](http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#attr-input-accept)就是`file`为此目的。例如：

```
<input type="file" accept=".doc,.docx,.xml,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-09-22T12:29:21.570

对于其他到达这里的人，这些是一些非常方便的预定义集：

```
<input type="file" accept="image/*"/>
<input type="file" accept="video/*"/>
<input type="file" accept="audio/*"/> 
```

# c# - ASP.NET 中是否有从 IP 地址解析 MAC 地址的内置函数

> ID：13835884
> 
> 赞同：0
> 
> 时间：2012-12-12T08:44:54.040
> 
> 标签：c#, asp.net, vb.net, mac-address, arp

我即将开始开发一个简单的内部 Web 应用程序来记录我办公室的访客。基本上，他们将阅读 AUP，然后输入他们的姓名以表示确认。该应用程序还将使用 Request.UserHostAddress() 记录访问者的 IP。除了记录 IP 之外，我还想运行一个脚本来使用从应用程序获得的 IP 进行 DHCP 保留，但我还需要拥有 MAC 地址。这个应用程序只能在一个子网中使用，我计划为访问者使用一个小的 DHCP 范围。

我可以使用任何内置功能通过 ARP 从 IP 解析 MAC 地址吗？如果有现有功能，我宁愿不必使用解决方法。

* * *

好的，作为参考，这就是我所做的：

```
Private Function get_MAC(ByVal ip As String) As String
    Dim proc As New System.Diagnostics.Process
    Try
        proc.StartInfo.UseShellExecute = False
        proc.StartInfo.RedirectStandardOutput = True
        proc.StartInfo.CreateNoWindow = True
        proc.StartInfo.FileName = Environment.ExpandEnvironmentVariables("%WINDIR%\system32\ping.exe")
        proc.StartInfo.Arguments = ip
        proc.Start()
        proc.StartInfo.Arguments = "-a " & ip
        proc.StartInfo.FileName = Environment.ExpandEnvironmentVariables("%WINDIR%\system32\arp.exe")
        proc.Start()
        Dim output As String = proc.StandardOutput.ReadToEnd
        Dim rgx As New Regex("\w{2}-\w{2}-\w{2}-\w{2}-\w{2}-\w{2}")
        If rgx.IsMatch(output) Then
            Return rgx.Match(output).Value
        Else
            Return "ERROR No MAC address found."
        End If
    Catch ex As Exception
        Return "ERROR " & ex.Message
    End Try
End Function 
```

然后我用

```
get_MAC(Request.UserHostAddress()) 
```

请注意，这仅适用于 Web 服务器保证与主机位于同一子网中。此外，如果您决定使用 Visual Web Developer 进行测试，请注意测试服务器将返回 UserHostAddress 作为 ::1（IPv6 环回地址）。

但回到主要问题：还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:56:55.887

[http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/3435b288-a48f-46cc-b247-0f4c3deb5f89/](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/3435b288-a48f-46cc-b247-0f4c3deb5f89/)

“如何使用 C# 从 DHCP 服务器检索 IP 和 MAC 地址”

# android - Android 模板引擎 - 像 Mustache

> ID：13835889
> 
> 赞同：1
> 
> 时间：2012-12-12T08:45:17.027
> 
> 标签：android

我正在寻找适用于 Android 的模板引擎，就像 Mustache 一样。我有一个包含大量信息的 JSON 对象，并且我有一个包含大量 Textview 的线性布局。现在，我希望能够填写所有这些内容，而无需在代码中手动分配它们。这是一个文本视图的示例：

```
<TextView
        android:id="@+id/computer_processor_clock_speed"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="4dp"
        android:text="{{computer.clock_speed}}"
        android:textAppearance="?android:attr/textAppearanceSmall" /> 
```

我知道有一个 Android 版本的 Mustache，但它所做的只是输入和输出字符串，我想基本上将我的线性布局和我的 JSON 对象传递给它，它会为我完成这项工作。

那么这存在吗？

# java - 使用注解有条件地执行方法

> ID：13835893
> 
> 赞同：1
> 
> 时间：2012-12-12T08:45:31.300
> 
> 标签：java, annotations, conditional-execution

在java中，我可以使用注释有条件地执行方法吗？

我希望设置一些系统属性，并基于该系统属性，我希望在运行时执行或不执行方法（特别是基于 ant 脚本的 JUnit）。

请让我知道是否可以使用注释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:51:39.493

我认为你可以用 Java 实现它，但我建议你看看[Spring AOP——](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/aop.html)我相信这就是你要找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T08:52:45.523

您可以按@Category 对测试进行分组，并告诉运行包含此类别。

来自[http://alexruiz.developerblogs.com/?p=1711](http://alexruiz.developerblogs.com/?p=1711)

```
public interface FastTests { /* category marker */ }
public interface SlowTests { /* category marker */ }

public class A {
    @Category(SlowTests.class)
    @Test public void a() {}
}

@Category(FastTests.class})
public class B {
    @Test public void b() {}
}

@RunWith(Categories.class)
@IncludeCategory(SlowTests.class)
@ExcludeCategory(FastTests.class)
@SuiteClasses({ A.class, B.class })
public class SlowTestSuite {} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T08:51:30.500

您可以为此实现自己的[TestRunner](http://junit.sourceforge.net/javadoc/org/junit/runners/BlockJUnit4ClassRunner.html)或用户[AOP](http://www.eclipse.org/aspectj/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T08:51:35.190

在 Java 计算机编程语言中，注解是一种可以添加到 Java 源代码中的句法元数据。类、方法、变量、参数和包可以被注释。

看看[这个](http://isagoksu.com/2009/development/java/creating-custom-annotations-and-making-use-of-them/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T09:07:38.973

我会通过扩展来编写一个简单的自定义测试运行器[`BlockJUnit4ClassRunner`](http://junit.sourceforge.net/javadoc/org/junit/runners/BlockJUnit4ClassRunner.html)。该运行程序将从系统属性或配置文件中读取配置以仅运行定义的测试。最简单的解决方案是排除选定方法的黑名单，因为此（默认！）运行器的默认行为是运行每个测试。

然后就说

```
@RunWith(MyTestRunner.class)
public void TestClass {

// ...

} 
```

对于实现，只需覆盖该`getChildren()`方法就足够了：

```
@Overwrite
List<FrameworkMethod> getChildren() {
    List<FrameworkMethod> fromParent = super.getChildren();
    List<FrameworkMethod> filteredList = new ArrayList(filter(fromParent));
    return filteredList;
} 
```

其中过滤器根据基于属性创建的“黑名单”检查`FrameworkMethod`是否应该执行。

# android - 在android中添加两个数字

> ID：13835899
> 
> 赞同：-2
> 
> 时间：2012-12-12T08:45:44.887
> 
> 标签：android

我试图在android中创建一个计算器类型的加法。为此，我使用了以下代码。

但是 ans 总是一个 0..

```
public class Main extends Activity {

    EditText num1,num2;
    TextView resu;
    int res;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button add=(Button) findViewById(R.id.add);
        num1=(EditText) findViewById(R.id.etnum1);
        num2=(EditText) findViewById(R.id.etnum2);
        resu=(TextView) findViewById(R.id.textView4);

        String mynum1=num1.getText().toString();
        final int mnum1=Integer.parseInt(mynum1);

        String mynum2=num2.getText().toString();
        final int mnum2=Integer.parseInt(mynum2);

        add.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                res=mnum1+mnum2;
                resu.setText(Integer.toString(res));
            }
        });
    }
} 
```

我也试过

```
resu.setText(String.valueOf(res)); 
```

但答案总是零！

我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T09:08:54.647

包括在点击侦听器中获取数字的语句，如下所示：

```
public class Main extends Activity {

EditText num1,num2;
TextView resu;
int res;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button add=(Button) findViewById(R.id.add);
    num1=(EditText) findViewById(R.id.etnum1);
    num2=(EditText) findViewById(R.id.etnum2);
    resu=(TextView) findViewById(R.id.textView4);

    add.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            String mynum1=num1.getText().toString();
            String mynum2=num2.getText().toString();

            res=Integer.parseInt(mynum1)+Integer.parseInt(mynum2);
            resu.setText(Integer.toString(res));
        }
    });
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-08T04:39:20.710

*您在创建*活动时获得了用户输入（在 中`onCreate`）。

您需要在单击按钮时接收用户输入，而不仅仅是在单击按钮时添加它。将您的代码更改为：

```
public class Main extends Activity {

    EditText num1,num2;
    TextView resu;
    int res;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button add=(Button) findViewById(R.id.add);
        num1=(EditText) findViewById(R.id.etnum1);
        num2=(EditText) findViewById(R.id.etnum2);
        resu=(TextView) findViewById(R.id.textView4); 

        add.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                String mynum1=num1.getText().toString();
                int mnum1=Integer.parseInt(mynum1);

                String mynum2=num2.getText().toString();
                int mnum2=Integer.parseInt(mynum2);

                res=mnum1+mnum2;
                resu.setText(Integer.toString(res));
            }
        });
    }
} 
```

您应该使用[try](http://docs.oracle.com/javase/tutorial/essential/exceptions/try.html) - [catch](http://docs.oracle.com/javase/tutorial/essential/exceptions/catch.html)，因为如果用户按下带有空白文本的按钮，此应用程序将崩溃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T08:47:26.053

更改您的按钮 setOnClickListener 代码，并在解析为 Integer 之前检查 edittext 值是否为 NULL 或空：：

```
 add.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
           int mnum1,mnum2;
         if(isNotNullNotEmptyNotWhiteSpaceOnlyByJava(num1.getText().toString())){

              mnum1=Integer.parseInt(num1.getText().toString());
         } 
         else{
                  mnum1=0;
          }  
         if(isNotNullNotEmptyNotWhiteSpaceOnlyByJava(num2.getText().toString())){

          mnum2=Integer.parseInt(num2.getText().toString());
         } 
         else{
               mnum2=0;
          }  

            res=mnum1+mnum2;
            resu.setText(Integer.toString(res));
        }
public  boolean isNotNullNotEmptyNotWhiteSpaceOnlyByJava(  
    String string)  
{  
   return string != null && !string.isEmpty() && !string.trim().isEmpty();  
} 
```

目前，您没有从 EditText 的按钮单击获得用户输入的最新值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-27T00:51:54.123

```
add.setOnClickListener(v -> 
{
    int mynum1 = Integer.parseInt(num1.getText().toString());

    int mynum2 = Integer.parseInt(num2.getText().toString());

    res = mynum1 + mynum2;
    resu.setText(String.toInteger(res));
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-08T10:40:43.390

要添加，您可以使用：

```
 flot a=(flot)(((EditText)findViewById(R.id.et1)).getText().toString());
     flot b=(flot)(((EditText)findViewById(R.id.et2)).getText().toString());
     flot out=a+b 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-14T05:01:24.083

```
public void onButtonClick(View v) {

    EditText e1 = (EditText) findViewById(R.id.editText);

    EditText e2 = (EditText) findViewById(R.id.editText2);
    TextView t1 = (TextView) findViewById(R.id.textView2);

    double num1=Double.parseDouble(e1.getText().toString());
    double num2=Double.parseDouble(e2.getText().toString());
    double sum= num1 + num2;
    t1.setText(Double.toString(sum));
} 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2016-02-20T02:57:00.797

完全披露：来自我的个人博客

[android中的加法程序](http://stackentry.blogspot.in/2016/01/addition-of-two-numbers-in-android.html)

android中两个数字相加的XML和Java代码

Mainactivity.java

```
public class MainActivity extends AppCompatActivity implements View.OnClickListener{
private EditText editText,editText2,editText4;
    int v1,v2,v3;
    String s="ans";
private Button button;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        button=(Button)findViewById(R.id.button);
        button.setOnClickListener(this);
    }
    @Override
    public void onClick(View v)
    {
        editText=(EditText)findViewById(R.id.editText);
        editText2=(EditText)findViewById(R.id.editText2);
        editText4=(EditText)findViewById(R.id.editText4);
         v1=Integer.parseInt(editText.getText().toString());
         v2=Integer.parseInt(editText2.getText().toString());
         v3=v1+v2;

         s=String.valueOf(v3);
        editText4.setText(s);
    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.menu_main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // Handle action bar item clicks here. The action bar will
        // automatically handle clicks on the Home/Up button, so long
        // as you specify a parent activity in AndroidManifest.xml.
        int id = item.getItemId();

        //noinspection SimplifiableIfStatement
        if (id == R.id.action_settings) {
            return true;
        }

        return super.onOptionsItemSelected(item);
    } 
```

活动主.xml

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools" android:layout_width="match_parent"
    android:layout_height="match_parent" android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    android:paddingBottom="@dimen/activity_vertical_margin" tools:context=".MainActivity">

    <EditText
        android:layout_width="500dp"
        android:layout_height="40dp"
        android:id="@+id/editText2"
        android:layout_alignParentLeft="true"
        android:layout_alignParentStart="true"
        android:layout_marginTop="60dp" />

    <EditText
        android:layout_width="500dp"
        android:layout_height="40dp"
        android:id="@+id/editText"
        android:layout_alignParentLeft="true"
        android:layout_alignParentStart="true"
        android:layout_below="@+id/editText2" />
    <EditText
        android:layout_width="800dp"
        android:layout_height="40dp"
        android:id="@+id/editText4"
        android:layout_alignParentRight="true"
        android:layout_alignParentEnd="true"
        android:layout_below="@+id/editText" />
    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="OK"
        android:id="@+id/button"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true" />

</RelativeLayout> 
```

# django - 基于模式的猫鼬哲学

> ID：13835900
> 
> 赞同：0
> 
> 时间：2012-12-12T08:45:47.820
> 
> 标签：django, node.js, mongodb, mongoose, mongoengine

我目前正在从 Django 切换到 Node.js。在我的 django 应用程序中，我使用了 MongoDB，但仍想继续使用它，原因是 mongo 提供的灵活性（它的无模式）。

我正在通过 mongoosejs。在[mongoose](http://mongoosejs.com)网站上，他们使用了 mongoose 的三个形容词，分别是`flexible` `schema-based`和`feature-rich`。在更广泛地查看文档之后，我毫不怀疑它功能丰富（功能确实令人印象深刻）。但另外两个形容词似乎与 Mongodb 哲学相矛盾。Mongodb 引用其动态模式提供了灵活性。另一方面，Mongoose 是基于模式的。那么实际上 Mongoose 有多灵活？我真的很喜欢 mongodb 动态模式并希望拥有它。**简而言之**，使用 Mongoose 和预填充集合对我的模式进行细微更改是多么可行。

同样出于好奇，我有两个疑问（仅与此问题有关）

1.  `field`我可以`undefined`在猫鼬模式中设置任何内容吗
2.  我可以将任何字段设置`optional`为 mongoengine（用于 mongo 的 Python ORM）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:30:29.347

即使在非结构化数据中也有一些结构，即使它是无模式的也有一些模式:)

尝试找到可以与 mongoose 一起使用的所有模式。如果你的大部分数据都有固定的模式，你应该使用它！

如果您的大部分数据都是无模式的，请不要为猫鼬烦恼！

是的，这是矛盾的，但归根结底，快速原型设计，性能很重要！:-)

# c# - C# 从加载的 Dll 调用主 exe 中静态类的 GetType

> ID：13835902
> 
> 赞同：3
> 
> 时间：2012-12-12T08:45:50.163
> 
> 标签：c#, exception, reflection

我已经`main.exe`加载了一个 dll，从加载的 dll 中，我尝试获取主 exe 中定义的静态类，因此 dll 项目中的代码将是：

```
static class DllClass
{
    static DllClass()
    {
        Assembly assembly = Assembly.GetEntryAssembly(); // line 1
        Type type = assembly.GetType("StaticClass");    //line 2
    }
} 
```

但是，第 2 行给了我以下异常

> *System.Reflection.TargetInvocationException：调用的目标已引发异常。---> System.TypeInitializationException：“DllClass”的类型初始化程序引发了异常。---> System.TypeInitializationException：“DllClass”的类型初始化程序引发了异常。---> System.NullReferenceException：对象引用未设置为对象的实例。*

我认为这里的问题是在运行时找不到静态类 StatisClass 并返回 null。

任何想法如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T08:56:49.710

使用上面的代码只能有一个原因：您的`assembly`变量是`NULL`. 那么什么时候会发生这种情况呢？根据[MSDN](http://msdn.microsoft.com/en-en/library/system.reflection.assembly.getentryassembly.aspx)，只有一种情况：

> 从非托管应用程序加载托管程序集时，GetEntryAssembly 方法可以返回 NULL。例如，如果非托管应用程序创建用 C# 编写的 COM 组件的实例，则从 C# 组件调用 GetEntryAssembly 方法将返回 NULL，因为进程的入口点是非托管代码而不是托管程序集。

在这种情况下，@Beachwalker 的答案也不起作用。此外，如果您动态加载类型，代码甚至不会编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T09:13:11.567

使用反射时，只能使用全名检索类型。即，包括“命名空间”以及类名。

因此，如下更改第 2 行，它将起作用：

```
Type type = assembly.GetType("NamespaceName.StaticClass");    //line 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T08:54:47.447

仅使用以下内容怎么样：

```
Type t = typeof(StaticClass) 
```

也许你会因为这个而得到 NullReferenceException：

“从非托管应用程序加载托管程序集时，GetEntryAssembly 方法可以返回空引用（在 Visual Basic 中为无）。例如，如果非托管应用程序创建了一个用 C# 编写的 COM 组件的实例，则调用 GetEntryAssembly C# 组件中的方法返回 null，因为进程的入口点是非托管代码而不是托管程序集。”

（MSDN， http: [//msdn.microsoft.com/library/system.reflection.assembly.getentryassembly](http://msdn.microsoft.com/library/system.reflection.assembly.getentryassembly(v=vs.80).aspx) (v=vs.80).aspx ）

=> 需要测试：

```
if (assembly != null)
{
 ...
} 
```

# java - 右边的菜单？

> ID：13835903
> 
> 赞同：9
> 
> 时间：2012-12-12T08:45:54.847
> 
> 标签：java, layout, swt, toolbar

是否可以在应用程序窗口的右侧添加`MenuItem`（或第二个）（如下图所示）？`Menu`

![在此处输入图像描述](../Images/6032b7d81ca71aacd221d13d3aeeab7d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T16:01:30.017

您的问题的部分答案是无法添加第二个菜单栏。参考[这里](http://www2.sys-con.com/itsg/virtualcd/java/archives/0805/northover/index.html)。

> 每个 shell 都可以选择使用 Shell 的 setMenuBar(Menu menuBar) 方法显示单个菜单栏。可以在 shell 中创建许多菜单栏，但一次只能在 shell 中看到一个。

也许您可以尝试创建第二个 shell 窗口，将鼠标悬停在您想要第二个（右对齐）菜单的位置。您需要确保此外壳始终保持连接到窗口的特定角落。如果主外壳的大小减小，您可能会遇到问题，这可能会显示一个菜单与另一个重叠。虽然不是一个好的解决方案。也许使用工具栏而不是填充 ( `SWT#SEPARATOR_FILL`) 项？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:53:22.340

如果您使用的是`org.eclipse.ui.menus`扩展点，则可以将其设置`toolbar:org.eclipse.ui.trim.command2`为（有关其他位置的列表，`locationURI`请参阅[此答案）。](https://stackoverflow.com/questions/3969715/eclipse-rcp-right-aligned-search-field-in-toolbar)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T00:24:21.117

似乎没有明显的方法可以做到这一点。您可以指定从左到右或从右到左的方向，但不能同时指定两者。此外，没有任何填充元素可以放在菜单项之间，就像在 Swing 中一样。

# c - 将文件中的整数数组存储在结构C中

> ID：13835904
> 
> 赞同：2
> 
> 时间：2012-12-12T08:45:55.220
> 
> 标签：c, arrays, io, structure

我正在从文件读入结构并遇到问题。我有测试文件，其中第一个字母定义结构的名称，第二个数字告诉我它有多少个节点，其余数字是节点。文件示例：

```
A 4 1 2 3 4
B 5 1 2 3 9 8 
C 3 1 2 3 
```

所以例如结构应该是这样的：name->A; numberOfNodes->4; 节点-> {1,2,3,4}。我保存每一行的结构是这样的：

```
struct mystruct{
char name[1];
int numberOfNodes;
int nodes[];
}; 
```

到目前为止我的功能：

```
lines = lineCount(courses); //calculates how many rows file has
struct courses course[lines];
co = fopen(courses, mode);
if(co == NULL){
    printf("Can't find the files.");
    exit(1);
}else{
    for(i = 0; i < lines; i++){
        fscanf(co, "%1s %d \n", &current, &id1); //Doesnt have any problems reading these two parameters;
        for(j = 0 ; j < id1; j++){ 
            fscanf(co, "%d", &course[i].nodes[j]); //Have no idea how to store array =/
        }
        strcpy(course[i].courseName, current);
        course[i].numberOfNodes = id1;
    }
} 
```

编辑：我很抱歉让你们困惑，它分配整数很好，但不是输出相同的东西，而是输出如下内容：

```
A 4 69 72 1 2
B 5 20 45 7 3 1 
C 3 2 45 1 
```

我认为这段代码没有做我想做的事情：

```
 for(j = 0 ; j < id1; j++){ 
            fscanf(co, "%d", &course[i].nodes[j]); //Have no idea how to store array =/
        } 
```

将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T08:52:42.673

您的代码不会为整数数组分配任何内存，它`int nodes[]`被称为*灵活数组成员*，它有自己的用途并且它不会自行*保留*任何内存，您需要为数组分配*动态*内存：`nodes`

```
struct mystruct {
    char name[1];
    int numberOfNodes;
    int *nodes;
};
...
fscanf(co, "%c %d \n", &current, &id1);   
course[i].nodes = malloc(sizeof(int)*id1); 
```

请注意，`%1s`格式说明符会扫描一个 1 字符的字符串，之后会添加一个以空值结尾的字节，因此您应该`%c`改为只读取一个字符。

注意1：完成后不要忘记`free()`分配的所有内存，例如

```
free(course[i].nodes); 
```

注意 2：在 C 中分配内存的惯用方式是：

```
malloc(num_of_elements * sizeof *ptr_to_type); 
```

我没有在这里介绍以避免混淆，还要注意我*个人*不喜欢转换结果`malloc()`，有一些很好的理由： [我是否转换了 malloc 的结果？](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T09:52:48.083

```
#include <stdio.h>
#include <stdlib.h>

struct mystruct {
    struct mystruct *next;
    char name; /* No need to dim array as name[1] */
    int numberOfNodes;
    int nodes[];
};

int main(void)
{
    /* Don't like VLA's, I used a list */
    struct mystruct *curr, *first = NULL, *prior = NULL;
    char s[256], *p;
    FILE *f;
    int i;

    /* Open (No need to count lines before) */
    f = fopen("data", "r");
    if (f == NULL) {
        perror("fopen");
        exit(EXIT_FAILURE);
    }
    /* Fill */
    while (fgets(s, sizeof(s), f) != NULL) {
        i = (int)strtol(&s[1], &p, 10);
        if (i == 0) continue; /* Skip blank or 0 node */
        /* Flexible array must be alloced with parent */
        curr = malloc((sizeof *curr) + (sizeof(int) * (size_t)i));
        curr->next = NULL;
        curr->name = s[0];
        curr->numberOfNodes = i;
        for (i = 0; i < curr->numberOfNodes; i++) {
            curr->nodes[i] = (int)strtol(p, &p, 10);
        }
        if (prior) {
            prior->next = curr;
        } else {
            first = curr;
        }
        prior = curr;
    }
    fclose(f);
    /* Print */
    curr = first;
    while (curr) {
        printf("%c %d", curr->name, curr->numberOfNodes);
        for (i = 0; i < curr->numberOfNodes; i++) {
            printf(" %d", curr->nodes[i]);
        }
        printf("\n");
        curr = curr->next;
    }
    /* Free */
    while (first) {
        curr = first->next;
        free(first);
        first = curr;
    }
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T08:57:35.807

你的问题是你不知道字母后面有多少个数字。因此，您可以说不超过 1000 或您认为“足够”的任何内容。或者您将这个数字一个接一个地存储在一种链接结构中。如果您使用例如提供链接列表的库，那么稍后会更容易完成。一个例子就是油嘴滑舌。

如果你想存储在数组中，你必须使用一些东西来为数组动态分配空间。您将需要一些 malloc/realloc/free 的组合。

存储数组的项目可以像打印 &course[i].nodes[j] 那样完成，但当然你需要足够的空间来真正访问节点[j]

问候

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-12T08:58:03.873

如果您使用标准 C/C++，则需要在分配值之前初始化数组，并确保在 fscanf() 时获得正确的指针！

```
struct mystruct{
char name[1];
int numberOfNodes;
int* nodes;
}; 
```

然后在 if 的 else 部分：

```
else{
    for(i = 0; i < lines; i++){
        fscanf(co, "%1s %d \n", &current, &id1); //Doesnt have any problems reading these two parameters;
        course[i].nodes = new int[id1]; //init array length of id1 value
        for(j = 0 ; j < id1; j++){ 
            int tempNode;
            fscanf(co, "%d", &tempNode); 
            course[i].nodes[j] = tempNode; //allocate the node value to the correct location. 
        }
        strcpy(course[i].courseName, current);
        course[i].numberOfNodes = id1;
    } 
```

或者，您应该能够使用以下方法绕过临时值：

```
fscanf(co, "%d", &(course[i].nodes[j])); 
```

但我认为一些编译器可能无法将其视为正确的。由于数据的结构，使用临时值更好 - 我的意见。

最后不要忘记遍历 course[] 向量和`delete (course[i].nodes)`

如果你想要纯 C，你将需要使用 malloc() 处理起来很痛苦 - 不如新的漂亮，删除。

无论如何，我建议使用 STL 向量来进行更轻松的内存管理，减轻指针分配的压力，并通过使用预定义的运算符函数 - push_back、pop_back、insert、erase 来使用优雅的数据管理（迭代、添加、删除）。

[http://www.cplusplus.com/reference/vector/vector/](http://www.cplusplus.com/reference/vector/vector/)

* * *

我在一些代码中添加了 '()' 以强调操作员的优先级。

# javascript - 用 django 模板语言实现 javascript

> ID：13835906
> 
> 赞同：0
> 
> 时间：2012-12-12T08:46:09.410
> 
> 标签：javascript, python, django, json, django-templates

```
{% with JSONContent as object %}{% include "_comments.html" %}{% endwith %} 
```

JSONContent 是我通过`$.get()`方法获得的 django 模型实例。“_comments.html”是一个未渲染的评论模板。我想渲染该模板，并通过 AJAX 将其发送到客户端（因此，revieved 数据是模板中渲染的 HTML）我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:46:08.307

听起来您正在从 ajax 请求到服务器获取模型实例，并且您想在“_comments.html”模板中使用该实例。那正确吗？如果是这样，您可以改为在服务器上呈现模板并在 ajax 请求中获取呈现的 HTML。

因此，假设您有一个`fetch_new_comments`处理 ajax 请求的视图。视图可能看起来像这样，而不是获取评论模型并将其转储到 JSON 并返回它：

```
def fetch_new_comments(request):
  comments = ... # get whatever data you're using
  return render_to_response("_comments.html", {"comments": comments}) 
```

因此，这意味着您的 ajax 请求将收到一大块 HTML（而不是 JSON 对象），并将其插入页面。如果你使用 jQuery，你可以这样做：

```
$.get("http://yoursite.com/fetch_new_comments/", function (resp) {
  $("#new_comments_container").html(resp);
}); 
```

# ios - iTunes App 更改卖家信息

> ID：13835909
> 
> 赞同：0
> 
> 时间：2012-12-12T08:46:30.440
> 
> 标签：ios, itunes-store

这`Seller Information`取决于我们使用的信用卡，因为如果我们想以`App`公司名义发布，我们怎么能这样做。发布后是否有可能更改`seller`信息和`copyright`在 iTunes 商店中`App`的方法。我在这里阅读了一些信息，有人可以在这里给我完整的[细节](https://stackoverflow.com/questions/5707675/seller-name-on-ios-app-store-same-as-credit-card)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T08:52:59.453

卖家名称是您信用卡上提到的名称，现在对于个人帐户，Apple 实施了一项政策，即显示带有应用程序标题的真实姓名。“金珍珠 - 穆罕默德·沙希德的每日行情”。

如果您想使用公司名称发布，那么您可以将您的帐户更新为公司帐户，但您需要通过出示文件来证明该公司是您的。

您可以编辑任何已发布应用的版权信息并写下公司名称。

# python - 使用 NCBIXML 仅解析 BLAST 输出中的前 3 个命中

> ID：13835912
> 
> 赞同：2
> 
> 时间：2012-12-12T08:46:41.720
> 
> 标签：python, xml-parsing, biopython, blast

我修改了如下的一段代码来解析来自 BLAST XML 输出的所需信息。

```
import csv
from Bio.Blast import NCBIXML
blast_records = NCBIXML.parse(open('PGblast.xml', 'rU'))

output = csv.writer(open('PGhit.csv','w'), delimiter =',',
                    quoting=csv.QUOTE_NONNUMERIC)
output.writerow(["Query","Hit ID", "Hit Def", "E-Value"])

E_VALUE_THRESH = 0.00000000000000001

for blast_record in blast_records:
    for alignment in blast_record.alignments:
        for hsp in alignment.hsps:
            if hsp.expect < E_VALUE_THRESH:
                output.writerow([blast_record.query[:8],
                                 alignment.hit_id, alignment.hit_def,hsp.expect])

blast_records.close() 
```

该代码允许我解析 E 值被截断的命中。但是，我希望仅解析 BLAST XML 输出中的最佳命中或前 3 个命中，因为 BLAST 输出文件的大小很大。

解析每个命中结果将花费大量时间来处理，实际上我不希望所有命中结果。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T03:59:58.910

仅解析每个 Hit 的前 3 个 HSP，而不解析整个文件，需要您编写自己的自定义 XML 解析器。Biopython 的 NCBIXML 不这样做。

但是，如果您正在寻找速度改进，您可以尝试新的 SearchIO 子模块 (http://biopython.org/wiki/SearchIO)。它有一个新的 BLAST XML 解析器，它应该比旧的 NCBIXML 解析器更快。旧的解析器依赖于纯 Python XML 解析器，而 SearchIO 中的新解析器则`cElementTree`尽可能使用。

该子模块仍然是新的和实验性的，因此在正式发布之前可能还会有一些变化。如果您有兴趣，这里还有一个草稿教程：http: [//bow.web.id/biopython/Tutorial.html#htoc96](http://bow.web.id/biopython/Tutorial.html#htoc96)。

# logging - GlassFish 服务器日志的位置

> ID：13835913
> 
> 赞同：46
> 
> 时间：2012-12-12T08:46:48.650
> 
> 标签：logging, netbeans, glassfish

我在 Windows 7 64 位机器上安装了 NetBeans IDE。显然，NetBeans 附带 GlassFish 服务器。

我目前有一个项目问题，想检查服务器日志。请问这些存储在哪里？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-12-12T09:36:01.693

一般来说，日志在`/YOUR_GLASSFISH_INSTALL/glassfish/domains/domain1/logs/`.

在 NetBeans 中，转到“服务”选项卡，打开“服务器”，右键单击您的 Glassfish 实例，然后单击“查看域服务器日志”。

如果这不起作用，请右键单击 Glassfish 实例并单击“属性”，您可以在“域文件夹”下看到包含域的文件夹。转到此文件夹->您的域->日志

如果服务器已经在运行，您应该`Output`在 NetBeans 中看到一个选项卡，其名称类似于`GlassFish Server x.x.x`

您也可以使用`cat`或`tail -F`。`/YOUR_GLASSFISH_INSTALL/glassfish/domains/domain1/logs/server.log`如果您使用的是不同的域，那么`domain1`您必须为此调整路径。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-12-12T09:34:53.943

找到 GlassFish 的安装路径。然后移动到`domains/domain-dir/logs/` ，您会在那里找到日志文件。如果您使用 NetBeans 创建了域，则 domain-dir 很可能称为`domain1`.

有关日志记录的官方 GlassFish 文档，请参阅此[链接](http://docs.oracle.com/cd/E18930_01/html/821-2416/abluk.html)。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2014-08-18T11:04:35.353

```
tail -f /path/to/glassfish/domains/YOURDOMAIN/logs/server.log 
```

您还可以从管理控制台上传日志：`http://yoururl:4848`

![在此处输入图像描述](../Images/5eda86614b085dfe77f4b750d101f7f0.png)

# ios - 有人解释一些代码吗？

> ID：13835922
> 
> 赞同：-2
> 
> 时间：2012-12-12T08:47:17.433
> 
> 标签：ios

我看到了来自 iOS 开发人员的一些代码。它有一些代码如下：

```
void (^block)(NSUInteger buttonIndex, UIAlertView *alertView) = objc_getAssociatedObject(self, "blockCallback"); 
```

但。我不明白为什么将对象 self 分配给块代码。该方法的完整代码为：

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
    void (^block)(NSUInteger buttonIndex, UIAlertView *alertView) = objc_getAssociatedObject(self, "blockCallback"); 
    if (block) { 
        block(buttonIndex, self); 
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:27:00.910

一个类别用于向 UIAlertView 添加基于块的功能。这意味着您不必为警报视图实现委托方法，您可以在创建时为其设置块。

但是，类别不允许您向对象添加实例变量。在这种情况下，需要存储这些块，以便稍后在用户点击警报视图上的按钮时执行它们。

为了解决这个问题，程序员使用了关联对象，它允许您在编写类别代码时添加伪变量。搜索与objective-c 相关的对象以获取更多信息。

# time-series - 时间序列分析中趋势的相似性

> ID：13835924
> 
> 赞同：15
> 
> 时间：2012-12-12T08:47:22.360
> 
> 标签：time-series, matching, trend

我是时间序列分析的新手。我试图找到短（1 天）温度时间序列的趋势并尝试不同的近似值。此外，采样频率为 2 分钟。数据被并置用于不同的站点。我会比较不同的趋势，看看它们是否相似。

在此过程中，我面临三个挑战：

Q1 - 我如何提取模式？

Q2 - 由于我会比较属于两个不同地方的趋势，我如何量化趋势？

Q3 - 我什么时候可以说两种趋势相似或不相似？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T20:58:29.223

**Q1 - 如何提取模式？**

您将从对两个数据集执行时间序列分析开始。您将需要一个统计库来进行测试和比较。

如果可以使用 Python，`pandas`是一个不错的选择。

在 R 中，这个[`forecast`](http://cran.r-project.org/web/packages/forecast/forecast.pdf)包很棒。首先`ets`在两个数据集上运行。

**Q2 - 由于我会比较属于两个不同地方的趋势，我如何量化趋势？**

量化趋势背后的想法是从寻找（线性）*趋势线开始。*所有统计数据包都可以帮助解决这个问题。例如，如果您假设一个线性趋势，那么最小化与您的数据点的平方偏差的线。

[关于趋势估计](http://en.wikipedia.org/wiki/Trend_estimation)的维基百科文章很容易获得。此外，请记住，趋势可以是线性的、指数的或阻尼的。可以尝试不同的趋势参数来处理这些问题。

**Q3 - 我什么时候可以说两种趋势相似或不相似？**

1.  在两个数据集上运行 ARIMA。（这里的基本思想是查看相同的参数集（构成 ARIMA 模型）是否可以描述您的临时时间序列。如果您`auto.arima()`在`forecast`(R) 中运行，那么它将选择参数 p,d,q您的数据，极大的方便。

2.  另一个想法是对您的两个系列进行 2 样本 t 检验并检查 p 值的显着性。（警告：我不是统计学家，所以我不确定是否有任何理论反对对时间序列这样做。）

3.  在研究过程中，我遇到了[格兰杰检验](http://en.wikipedia.org/wiki/Granger_causality)——其基本思想是查看一个时间序列是否有助于预测另一个时间序列。似乎非常适用于您的情况。

所以这些只是让你开始的几件事。希望有帮助。

# android - 在 AbsoluteLayout 上的 DragEvent.ACTION_DROP 上的触摸点中心充气按钮

> ID：13835926
> 
> 赞同：0
> 
> 时间：2012-12-12T08:47:30.610
> 
> 标签：android, drag-and-drop, android-view, layout-inflater, absolutelayout

我希望按钮的中心点=触摸点膨胀。在充气时，m 做如下：

```
control = inflater.inflate(R.layout.button,
                    (ViewGroup) target_layout, false);
targetContainer.addView(control);

    x = x - (control.getWidth()/2);   // control not inflating exactly @ center of 
    y = y - (control.getHeight()/2); //  the touch left.
    absoluteLayoutParams = new AbsoluteLayout.LayoutParams(LayoutParams.WRAP_CONTENT,
                    LayoutParams.WRAP_CONTENT, x, y);
    control.setLayoutParams(absoluteLayoutParams); 
```

**button.xml**包含具有高度和宽度的按钮 = Wrap Content。 **这里的x** & **y**是释放拖动时的触摸坐标。

* * *

![这就是它膨胀的方式](../Images/08684a0d524cb95846feb37f05bc5ddd.png)这就是它从接触点膨胀的方式。

![我希望它会像这样膨胀](../Images/7613ade23926ef695fb08ff712cb63cb.png)我希望它从接触点开始像这样膨胀。

在此先感谢，卡皮尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:56:27.727

试着打电话

```
targetContainer.addView(control); 
```

为它设置 layoutParams 后，如下所示：

```
control = inflater.inflate(R.layout.button,
                (ViewGroup) target_layout, false);

x = x - (control.getWidth()/2);   // control not inflating exactly @ center of 
y = y - (control.getHeight()/2); //  the touch left.
absoluteLayoutParams = new AbsoluteLayout.LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT, x, y);
control.setLayoutParams(absoluteLayoutParams);

targetContainer.addView(control); 
```

也许这就是问题所在。

# android - Android：是否可以通过命令将文件夹添加到 APK

> ID：13835940
> 
> 赞同：0
> 
> 时间：2012-12-12T08:48:48.393
> 
> 标签：android, ant

我有一个 android 源，我正在构建该源并手动生成 apk。手动使用 ant release jarsigner 和 zipalign。我得到了 singed APK 工作。现在我正在尝试在签名之前将文件夹添加到 apk，或者可以在 ant 构建过程中添加它。如果可以的话，是否可以共享命令。我看到 aapt 命令用于添加文件而不是文件夹..

提前致谢

问候，

迪帕克

# python - Boto：将生成的 html 字符串上传到 Amazon s3

> ID：13835948
> 
> 赞同：4
> 
> 时间：2012-12-12T08:49:15.360
> 
> 标签：python, boto

我需要即时生成 HTML 文件并将它们保存到存储桶的选定文件夹并收到 url。

我已经看到[上传文件 boto](http://ferrouswheel.me/2009/12/upload-a-file-to-s3-with-boto/)但是我想在 amazon s3 上动态生成 HTML 字符串文件而不实际将文件保存到我的本地计算机。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T12:41:18.207

您引用的示例使用`set_contents_from_filename`Key 对象的方法将内容从本地文件上传到 S3。或者，您可以使用`set_contents_from_string`Key 对象的方法从生成的 HTML 字符串上传内容。第一个参数是要上传的字符串，而不是文件的路径。

# css - 样式化 Twitter Bootstrap 搜索表单

> ID：13835949
> 
> 赞同：0
> 
> 时间：2012-12-12T08:49:20.493
> 
> 标签：css, twitter-bootstrap

我正在尝试使用 Bootstrap 构建搜索表单。这是HTML：

```
<form class="form-search search-bar">
  <div class="input-append">
    <input type="text" class="search-query" placeholder="Enter your address here...">
    <button type="submit" class="btn btn-primary">
    Search <i class="icon-search icon-white"></i></button>
  </div>
</form> 
```

我是 CSS 新手 - 如何设置样式以使搜索元素在整个块中水平居中？另外，如何增加搜索元素的高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:56:10.560

你应该添加一个ID

```
.search-bar {
    text-align: center; /* centers inline and inline-block children */
}
.search-bar .search-query,
.search-bar .btn-primary {
    display: inline-block; /* allows for heights to be set */
}
.search-bar .search-query {
    height: 30px;
}
.search-bar .btn-primary {
    height: 40px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:52:45.627

要将它们彼此相邻放置，您可以使用 float 命令

```
.search-query {
  float:left;
}
.btn-primary {
  float:left;
} 
```

确保 的宽度`input-append`足够大，可以将它们彼此相邻放置。

增加那里`height`只是放置高度：[数量]; `float`在与 CSS相同的块中

# ruby-on-rails-3.2 - 由于 unf_ext (0.0.5) gem，捆绑安装失败

> ID：13835950
> 
> 赞同：11
> 
> 时间：2012-12-12T08:49:20.700
> 
> 标签：ruby-on-rails-3.2, bundle-install

我已经在 centos 6.3 上使用 rvm 安装了 ruby​​ 1.9.3p327 和 rails 3.2.8。但是在为特定项目文件夹进行捆绑安装时，该过程在尝试安装 gem unf_ext 0.0.5 并引发以下错误之间失败，

使用原生扩展安装 unf_ext (0.0.5) Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension。

```
/home/rradmin/.rvm/rubies/ruby-1.9.3-p327/bin/ruby extconf.rb -fPIC
checking for main() in -lstdc++... yes
checking for ruby/encoding.h... yes
creating Makefile

make
compiling unf.cc
cc1plus: warning: command line option "-Wdeclaration-after-statement" is valid for C/ObjC but not for C++
cc1plus: warning: command line option "-Wimplicit-function-declaration" is valid for C/ObjC but not for C++
In file included from /usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/vector:61,
from unf/normalizer.hh:4,
from unf.cc:1:
.....
....
... 
```

Gem 文件将继续安装在 /home/rradmin/.rvm/gems/ruby-1.9.3-p327@r32/gems/unf_ext-0.0.5 以供检查。结果记录到 /home/rradmin/.rvm/gems/ruby-1.9.3-p327@r32/gems/unf_ext-0.0.5/ext/unf_ext/gem_make.out

> 安装 unf_ext (0.0.5) 时出错，Bundler 无法继续。`gem install unf_ext -v '0.0.5'`在捆绑之前确保成功。

如上所述，我还尝试单独安装 unf_ext，但遇到了同样的错误。我已经提到了[https://github.com/cowboyd/therubyracer/issues/135](https://github.com/cowboyd/therubyracer/issues/135)，但仍然无法解决问题。请让我知道解决此问题的正确方法。

谢谢你。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-24T13:47:30.490

在 Ubuntu 上我只需要做

```
sudo apt-get install build-essential 
```

解决这个问题。

（作为记录，我使用的是新构建的 Ubuntu 12.10 Server X64）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T08:58:20.033

当您没有支持库来编译 gem 时会出现此错误尝试安装以下软件包

```
sudo apt-get install build-essential openssl libreadline6 libreadline6-dev curl git-core     zlib1g zlib1g-dev libssl-dev libyaml-dev libsqlite3-0 libsqlite3-dev sqlite3 libxml2-dev libxslt-dev autoconf libc6-dev ncurses-dev automake libtool bison 
```

然后进行捆绑安装

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-21T20:25:57.060

我通过安装**libstdc++-devel**解决了这个问题`yum install gcc-c++ libstdc++-devel`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T11:38:38.037

谢谢苏曼。但是我通过使用 yum install gcc-g++ libstdc++-devel安装**libstdc++-devel**解决了这个问题。

# c# - 带有 Ninject 的 Azure 数据库

> ID：13835954
> 
> 赞同：2
> 
> 时间：2012-12-12T08:49:48.713
> 
> 标签：c#, sql-server, azure, ninject

已使用 Ninject 和 .Net 4（已测试 4.0 和 4.5）为 Azure 创建了一个 Web 应用程序。在向其添加数据库支持之前，该应用程序已在 Azure 上进行了测试。在本地，它在 SQL Express 上的数据库支持下运行良好。但是在将连接字符串更改为 Azure 并进行部署时，我收到以下错误消息。

我在控制器中没有无参数构造函数，因为我知道 Ninject 需要一个参数化才能工作。

Azure 管理控制台指示与数据库的成功连接。

谁能给我一个提示可能是什么问题？我不得不承认我对 Azure 和 Ninject 都是新手，这是我的培训项目 :-)

```
[NotSupportedException: Model compatibility cannot be checked because the database does not contain model metadata. Model compatibility can only be checked for databases created using Code First or Code First Migrations.]

System.Data.Entity.Internal.ModelCompatibilityChecker.CompatibleWithModel(InternalContext internalContext, ModelHashCalculator modelHashCalculator, Boolean throwIfNoMetadata) +221
System.Data.Entity.DropCreateDatabaseIfModelChanges`1.InitializeDatabase(TContext context) +218
System.Data.Entity.Internal.InternalContext.PerformInitializationAction(Action action) +66
System.Data.Entity.Internal.InternalContext.PerformDatabaseInitialization() +225
System.Data.Entity.Internal.RetryAction`1.PerformAction(TInput input) +208
System.Data.Entity.Internal.LazyInternalContext.InitializeDatabaseAction(Action`1 action) +235
System.Data.Entity.Internal.InternalContext.ForceOSpaceLoadingForKnownEntityTypes() +65

System.Data.Entity.DbContext.System.Data.Entity.Infrastructure.IObjectContextAdapter.get_ObjectContext() +36
STT.data.Repository.UnitOfWork..ctor(IDatabaseFactory databaseFactory) +88
DynamicInjector34635b924a6c4e6ab03c67010341a739(Object[] ) +92
Ninject.Activation.Context.Resolve() +294
System.Linq.WhereSelectEnumerableIterator`2.MoveNext() +248
System.Linq.Enumerable.SingleOrDefault(IEnumerable`1 source) +300
System.Linq.WhereSelectArrayIterator`2.MoveNext() +82
System.Linq.Buffer`1..ctor(IEnumerable`1 source) +520
System.Linq.Enumerable.ToArray(IEnumerable`1 source) +103
Ninject.Activation.Providers.StandardProvider.Create(IContext context) +480
Ninject.Activation.Context.Resolve() +294
System.Linq.WhereSelectEnumerableIterator`2.MoveNext() +248
System.Linq.Enumerable.SingleOrDefault(IEnumerable`1 source) +300
System.Linq.WhereSelectArrayIterator`2.MoveNext() +82
System.Linq.Buffer`1..ctor(IEnumerable`1 source) +520
System.Linq.Enumerable.ToArray(IEnumerable`1 source) +103
Ninject.Activation.Providers.StandardProvider.Create(IContext context) +480
Ninject.Activation.Context.Resolve() +294
System.Linq.WhereSelectEnumerableIterator`2.MoveNext() +248
System.Linq.Enumerable.SingleOrDefault(IEnumerable`1 source) +300
System.Web.Mvc.DefaultControllerActivator.Create(RequestContext requestContext, Type controllerType) +78

[InvalidOperationException: An error occurred when trying to create a controller of type 'STT.web.Controllers.HomeController'. Make sure that the controller has a parameterless public constructor.]
System.Web.Mvc.DefaultControllerActivator.Create(RequestContext requestContext, Type controllerType) +256
System.Web.Mvc.DefaultControllerFactory.CreateController(RequestContext requestContext, String controllerName) +81
System.Web.Mvc.MvcHandler.ProcessRequestInit(HttpContextBase httpContext, IController& controller, IControllerFactory& factory) +270
System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state) +86

System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +12551795
System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +288 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:38:00.547

谢谢，雅库布。你的链接帮助了我。事实证明，数据库的初始化与 Azure SQL Server 和 SQL Express 不同。我改成`Database.SetInitializer(new DropCreateDatabaseIfModelChanges<DataContext>());` 然后`Database.SetInitializer(new DropCreateDatabaseAlways<DataContext>());` 重新部署。然后它也可以在 Azure 中运行。然后我回到前一个并再次重新部署。问题似乎是除了我的数据表之外创建的表“_MigrationHistory”。

现在它似乎工作了，但我觉得有点麻烦。

再次感谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:54:10.417

看来是 EF 的问题。

`NotSupportedException: Model compatibility cannot be checked because the database does not contain model metadata. Model compatibility can only be checked for databases created using Code First or Code First Migrations.`

[EF 4 Code First：无法检查模型兼容性，因为模型中未包含 EdmMetadata 类型](https://stackoverflow.com/questions/8630755/ef-4-code-first-model-compatibility-cannot-be-checked-because-the-edmmetadata-t)

# html - Css 无法应用于子 div

> ID：13835955
> 
> 赞同：0
> 
> 时间：2012-12-12T08:49:49.543
> 
> 标签：html, css

我正在创建一个简单的页面。当我在父 div 中创建子 div 时，它会继承背景，但是当我尝试将子 div 向右浮动时，它会丢失继承的背景并变成白色。我可能会错过什么？我的小提琴在[这里](http://jsfiddle.net/njueukavi/Jsj4u/1/)

我的 CSS 代码在这里

```
#fullwidth{
   width: 100%;
   /* background: url(../images/bg.jpg);*/
   background-color: black;
   background-repeat: repeat;
   position: relative;
   top: 0;
}

#fullwidth .container{
   width: 994px;
   position: relative;
   margin-top: 0px;
   margin-left: auto;
   margin-right: auto;
   text-align: left;
   background: transparent;
}

#fullwidth .test{
   float: right;
} 
```

我的 div 在这里

```
<div id="fullwidth">
        <div class="container">
            <div class="test">
                <ul id='header_nav'>
                    <!--li><img src="images/home-icon.png" /></li-->
                    <li><a href="../design.php">Design</a>
                        <ul>
                            <li><a href="../designproducts.php">Products</a></li>
                        </ul>
                    </li>
                    <li><a href="../events.php">Events</a>
                        <ul>
                            <li><a href="../eventsservices.php">Services</a></li>
                            <li><a href="../eventsgallery.php">Gallery</a></li>
                        </ul>
                    </li>
                    <li><a href="../pr.php">Public Relations</a>
                    </li>
                    <li><a href="../outdoor.php">Media and Outdoor</a>
                        <ul>
                            <li><a href="../outdoorservices.php">Services</a></li>
                            <li><a href="../outdoorgallery.php">Gallery</a></li>
                        </ul>
                    </li>
                    <li><a href="../production.php">Production</a>
                        <ul>
                            <li><a href="../productionservices.php">Services</a></li>
                            <li><a href="../productiongallery.php">Gallery</a></li>
                        </ul>
                    </li>
                    <li><a href="../login.php">Login</a>
                        <ul>
                            <!--li>Register</li-->
                        </ul>
                    </li>
                </ul>

            </div>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:52:18.357

添加这个

**HTML**

```
<html>
<head>

</head>
<body>
    <div id="fullwidth">
        <div class="container">
            <div class="test">
                <ul id='header_nav'>
                    <!--li><img src="images/home-icon.png" /></li-->
                    <li><a href="../design.php">Design</a>
                        <ul>
                            <li><a href="../designproducts.php">Products</a></li>
                        </ul>
                    </li>
                    <li><a href="../events.php">Events</a>
                        <ul>
                            <li><a href="../eventsservices.php">Services</a></li>
                            <li><a href="../eventsgallery.php">Gallery</a></li>
                        </ul>
                    </li>
                    <li><a href="../pr.php">Public Relations</a>
                    </li>
                    <li><a href="../outdoor.php">Media and Outdoor</a>
                        <ul>
                            <li><a href="../outdoorservices.php">Services</a></li>
                            <li><a href="../outdoorgallery.php">Gallery</a></li>
                        </ul>
                    </li>
                    <li><a href="../production.php">Production</a>
                        <ul>
                            <li><a href="../productionservices.php">Services</a></li>
                            <li><a href="../productiongallery.php">Gallery</a></li>
                        </ul>
                    </li>
                    <li><a href="../login.php">Login</a>
                        <ul>
                            <!--li>Register</li-->
                        </ul>
                    </li>
                </ul>

            </div>
        </div>

        <div class="cler"></div>
    </div>

</body> 
```

**CSS**

```
.cler{
    clear:both;
} 
```

在你的最后一个 div 子端

**[演示](http://jsfiddle.net/Jsj4u/8/)**

* * *

**---------- 第二个选项是**

写这个 CSS

```
#fullwidth:after{
content:'';
    clear:both;
    overflow:hidden;
    display:table;
} 
```

**[演示-2](http://jsfiddle.net/Jsj4u/10/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:57:24.013

```
it loses the inherited background and turn white 
```

它不会失败，它只是浮​​动，所以你只需要在`div`with class之后清除浮动`test`。

这是一篇关于它的好文章[http://www.quirksmode.org/css/clearing.html](http://www.quirksmode.org/css/clearing.html)

# android - 设计布局给出运行时异常

> ID：13835958
> 
> 赞同：1
> 
> 时间：2012-12-12T08:50:06.347
> 
> 标签：android, eclipse, layout

我正在为我的 android 应用程序设计一个简单的布局，但是当我在我的活动 II 的 xml 文件中编写下面的代码时收到运行时异常，我的意思是“不幸的是 [我的项目名称] 已停止”。请您指导我完成这？

非常感谢这是我的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"

    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <Textview 
        android:id="@+id/txtFName"
        android:text="FirstName"
        android:layout_width="70dp"
        android:layout_height="45dp"
        android:layout_alignParentTop="true" 
        android:layout_alignParentLeft="true"
        android:background="#E6CDFE"
                    />

    <EditText 
        android:id="@+id/lblFName"
        android:hint="Please Enter Your FirstName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_alignParentRight="true"/>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:59:57.990

用这个 ：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"

    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView 
        android:id="@+id/txtFName"
        android:text="FirstName"
        android:layout_width="70dp"
        android:layout_height="45dp"
        android:layout_alignParentTop="true" 
        android:layout_alignParentLeft="true"
        android:background="#E6CDFE"
                    />

    <EditText 
        android:id="@+id/lblFName"
        android:hint="Please Enter Your FirstName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_alignParentRight="true"/>

</RelativeLayout> 
```

这将非常适合您。

希望这对您有所帮助。

谢谢。

# java - 具有任务队列问题的 Spring 安全性

> ID：13835960
> 
> 赞同：2
> 
> 时间：2012-12-12T08:50:24.000
> 
> 标签：java, google-app-engine, jakarta-ee, spring-mvc, spring-security

在 GAE 中，我有 cron 作业，它查找电子邮件表并开始通过每封电子邮件的推送队列工作人员发送这些电子邮件。

```
// Worker method body
MailService m = MailServiceFactory.getMailService();
m.sendToAdmins(new MailService.Message(fromAddress, "", subject, content)); 
```

首先我想问一下关于发送电子邮件的问题，我在 GAE 文档中读到发送电子邮件是排队工作：

> 邮件服务将消息排队，然后尝试发送它，如果目标邮件服务器不可用，可能会重试。错误和退回邮件将发送到电子邮件的发件人地址。

如果以前的工作方式与队列相同，这是否让我可以选择不使用推送队列？

但是我仍然想将推送队列用于任何未来的功能，所以主要问题是：外部团队负责人使用弹簧安全性完成了安全部分，并且任务不起作用。每个任务的输出：

```
Dec 12, 2012 8:44:2 AM com.google.apphosting.utils.jetty.AppEngineAuthentication$AppEngineAuthenticator authenticate
INFO: Returning NOBODY because of SkipAdminCheck. 
```

请注意，当我评论以下内容时，它们确实工作得很好：

```
<filter>
  <filter-name>springSecurityFilterChain</filter-name>
  <filter-class> org.springframework.web.filter.DelegatingFilterProxy</filterclass>
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

那么您认为这是什么原因呢？有没有办法在不影响安全性的情况下使任务队列工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:12:24.207

通过将以下内容添加到 spring-security.xml（spring 安全层）与同事一起修复它

```
<http use-expressions="true" entry-point-ref="authenticationEntryPoint">
<intercept-url pattern="/queuecontroller/**" access="permitAll" /> 
```

并在 web.xml 中添加约束（应用引擎安全层）

```
<security-constraint>
    <web-resource-collection>
      <web-resource-name>any-resource</web-resource-name>
      <url-pattern>/emailcontroller</url-pattern>
    </web-resource-collection>
    <auth-constraint>
      <role-name>admin</role-name>
    </auth-constraint>
    <user-data-constraint>
      <transport-guarantee>CONFIDENTIAL</transport-guarantee>
    </user-data-constraint>
  </security-constraint> 
```

# amazon-web-services - 亚马逊云前

> ID：13835962
> 
> 赞同：-2
> 
> 时间：2012-12-12T08:50:30.437
> 
> 标签：amazon-web-services, amazon-s3, amazon-cloudfront

哪个是亚马逊网络服务的最佳 PHP 类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:28:01.470

欢迎登船！这是[适用于 PHP 的 AWS 开发工具包](http://aws.amazon.com/sdkforphp/)

# c++ - 最新版本的 boost 和 boost 几何库 (GGL) 之间的冲突

> ID：13835967
> 
> 赞同：2
> 
> 时间：2012-12-12T08:50:33.770
> 
> 标签：c++, eclipse, boost, boost-geometry

过去，我使用库 GGL 编写一些程序。例如，以下代码适用于 GGL 和旧版本的 gcc。现在我将 gcc 更新到 gcc4.7.1。我的程序在编译过程中出现错误。因此，我更新到最新版本的 boost 1.52.1。仍然存在与 point_2d、polygon_2d 等相关的错误。我发现在最新的 vesion boost 中缺少一些文件，如 'cartesian2d.hpp'、'c_array_cartesian.hpp'。

有人可以帮我分析以下代码并告诉我有什么问题吗？非常感谢。

```
#include <iostream>

#include <boost/geometry.hpp>
#include <boost/geometry/geometries/point_xy.hpp>
#include <boost/geometry/geometries/polygon.hpp>
#include <boost/geometry/algorithms/distance.hpp>
#include <boost/geometry/geometry.hpp>

#include <algorithm> // for reverse, unique
#include <iostream>
#include <string>

typedef boost::geometry::model::d2::point_xy<double,        
boost::geometry::cs::cartesian> point_2d;
typedef boost::geometry::model::polygon<point_2d> polygon_2d;
using namespace boost::geometry;

int main() {
         std::cout << "!!!Hello World!!!" << std::endl; // prints !!!Hello World!!!
         model::d2::point_xy<int> p1(1.0, 1.0), p2(2.0, 2.0);
         point_2d x(3.0,3.0);
         std::cout << x.x();
         std::cout << "Distance p1-p2 is: " << distance(p1, p2) <<std::endl;

         float width = 100;
         float length = 100;

         polygon_2d poly;
         {
            const float coor[][2] = {
            {-350.0,-500.0}, {350,-500}, {350, 0}, {width/2.0, 0}, {width/2.0, length},
            {350, length}, {350, 1000}, {-350, 1000}, {-350, length}, {-1*width/2.0, length}, {-1*width/2.0,0},
            {-350, 0}, {-350.0,-500.0} // closing point is opening point
            };
            assign(poly, coor);
         }
            correct(poly);

         return 0;
} 
```

错误如下：

```
c:\program files\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.1/
../../../../include/boost/geometry/core/point_order.hpp:1
57:12:   required from 'const boost::geometry::order_selector  
boost::geometry::point_order<float [13][2]>::value'
c:\program files\mingw64\bin\../lib/gcc/x86_64-w64-
mingw32/4.7.1/../../../../include/boost/geometry/algorithms/
assign.hpp:148:70:   required from 'void  
boost::geometry::assign(Geometry1&, const Geometry2&) [with   
Geometry1 =boost::geometry::model::polygon<boost::geometry::model
::d2::point_xy<double, boost::geometry::cs::cartesian> >; 
Geometry2 = float [13][2]]'
..\src\test.cpp:47:44:   required from here
c:\program files\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.1/
../../../../include/boost/geometry/core/point_order.hpp:95:5:  
error: no matching function for call to   
'assertion_failed(mpl_::failed************   
(boost::geometry::core_dispatch::point_order<void, float [13]
[2]>::NOT_IMPLEMENTED_FOR_THIS_GEOMETRY_TYPE::************)
(mpl_::assert_::types<float [13][2], mpl_::na, mpl_::na, 
mpl_::na>))' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T21:39:53.363

有两个改变是必要的：

1) 包含 c_array.hpp，以使 2D 浮点数组（在 const float[][2] 内部使用）适应 Boost.Geometry 点概念：

```
#include <boost/geometry/geometries/adapted/c_array.hpp> 
```

2) 使用assign_points 而不是assign。

```
assign_points(poly, coor); 
```

然后编译您的代码。背景：您使用的是预发布版本（当然允许），在发布时对界面进行了一些小改动。分配（带有范围）现在称为分配点。

# javascript - 更新 html 中的范围

> ID：13835971
> 
> 赞同：0
> 
> 时间：2012-12-12T08:50:55.970
> 
> 标签：javascript, html, range

> **可能重复：**
> [使用 Javascript 更改所选文本的 CSS](https://stackoverflow.com/questions/3223682/change-css-of-selected-text-using-javascript)

突出显示跨越多个元素的文本

```
if (window.getSelection) {
    userSelection = window.getSelection();
    if (userSelection.getRangeAt) {
        var range = userSelection.getRangeAt(0);
    } else {
        var range = document.createRange();
        range.setStart(userSelection.anchorNode, userSelection.anchorOffset);
        range.setEnd(userSelection.focusNode, userSelection.focusOffset);
    }
}

var newNode = document.createElement("span");
newNode.setAttribute('style', 'background-color:yellow');

range.surroundContents(newNode); 
```

这适用于同一标签内的文本情况，例如

![在同一个标​​签中](../Images/b5f57a52f359a22770a2c7f94d662e4f.png)

由于 span 是围绕所选文本的内联块元素，但我无法找到任何可行的解决方案，其中包括其他标签也在所选文本中，例如..

![在此处输入图像描述](../Images/86576d5f0001b31a77d73e6d40c22eaa.png)

我正在尝试为 ipad 中的 safari 浏览器执行此操作。

我是否需要解析 DOM 元素，但我认为它会包含几种情况。

# spring - 在生产中使用 RequestContextHolder.currentRequestAttributes().request 可以吗？

> ID：13835972
> 
> 赞同：2
> 
> 时间：2012-12-12T08:50:57.390
> 
> 标签：spring, grails, request

`RequestContextHolder.currentRequestAttributes().request`对性能有影响吗？我知道在服务方法中访问请求并不好，但我真的需要它。因此，如果我`RequestContextHolder.currentRequestAttributes().request`每个请求调用 20-30 次，它会降低性能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:12:29.447

该问题与性能无关。可以在请求之外调用服务方法（例如在石英计划作业中）。可能在这种情况下 RequestContextHolder.currentRequestAttributes().request 会抛出异常。我认为最好的方法是将请求作为参数传递给需要它的服务方法。

```
class MyService{

def method(def request){
    //do what you want with the request
}

} 
```

从控制器

```
class MyController{

def myService

def index = { 

   myService.method(request)

}

} 
```

# asp.net - 为什么这些 ASP 变量显示不正确？

> ID：13835975
> 
> 赞同：0
> 
> 时间：2012-12-12T08:51:14.657
> 
> 标签：asp.net

```
<% 
Dim myNext
Dim myPrev
myNext = cat.QSPage+1
myPrev = cat.QSPage-1
%>
<% if cat.QSPage=1 then %>
    <link rel='next' href="/example_<%=myNext%>.htm" />
<% else %>
    <link rel='prev' href="/example_<%=myPrev%>.htm" />
    <link rel='next' href="/example_<%=myNext%>.htm" />
<% end if %> 
```

以上将 ASP <%= 更改为 <%= 并且我已经尝试了我能想到的所有变体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:02:09.470

而不是这样做

```
<link rel='next' href="/logo-design-example_<%=myNext%>.htm" /> 
```

尝试这个

```
<link rel='next' href="<%= '/logo-design-example_' & myNext & '.htm' %>" /> 
```

如果上述方法不起作用，请尝试以下方法

```
sub getUrl()
  response.write('/logo-design-example_' & myNext & '.htm')
end sub

<link rel='next' href="<% call getUrl()%>" /> 
```

我忘记了大部分 ASP，但我认为它应该可以工作。

编辑:: 现在试试这个。它正在为我工​​作。如果您发现任何其他问题，请告诉我。

```
<link rel='next' href="<%= "/logo-design-example_" & myNext & ".htm" %>" /> 
```

# asp.net-mvc - 当系统在asp.net mvc3中处于空闲状态时如何使会话过期

> ID：13835976
> 
> 赞同：2
> 
> 时间：2012-12-12T08:51:14.193
> 
> 标签：asp.net-mvc, asp.net-mvc-3, c#-4.0, session, dns

当系统闲置一段时间时，我如何使会话过期。完成该时间后，它应该被重定向到登录页面。我需要做这个控制器端。我正在使用 asp.net mvc3 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:01:43.823

会话超时时将在服务器上过期。

如果您希望浏览器同时重定向，您必须在客户端上有一个计数器，在 JavaScript 中，它在 0 上会重定向到您的登录页面。

如果没有客户端的某些操作，控制器无法强制重定向浏览器。您还可以考虑使用诸如[SignalR](http://signalr.net/)之类的持久连接，但这可能超出您的需要。

另一种解决方案是在此答案中使用刷新标题

[会话超时时的 ASP.NET 推送重定向](https://stackoverflow.com/questions/484964/asp-net-push-redirect-on-session-timeout)

# spring-mvc - 在spring MVC中将jsp内容保存为pdf文件

> ID：13835978
> 
> 赞同：0
> 
> 时间：2012-12-12T08:51:20.247
> 
> 标签：spring-mvc, pdf-generation, itext

我正在查看来自 jsp i spring MVC 上的 db 的一些数据。我需要添加一个功能作为“另存为 PDF”，以便我们可以将 jsp 文件的输出保存为 pdf。我怎么能做到这一点。plz,,,如果有人有代码，把它贴在这里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:53:34.863

你需要这个库[http://itextpdf.com/](http://itextpdf.com/)然后设置响应的内容类型。

[之前回答过](https://stackoverflow.com/a/10959264/106261)

# java - 有没有办法将分离的对象传递给 JPA 持久化？（分离的实体传递给坚持）

> ID：13835980
> 
> 赞同：11
> 
> 时间：2012-12-12T08:51:22.180
> 
> 标签：java, hibernate, jpa, entitymanager

我有 2 个实体：`Account`和`AccountRole`。

```
public class Account {
   private AccountRole accountRole;

   @ManyToOne(cascade = CascadeType.PERSIST, fetch = FetchType.EAGER)
   public AccountRole getAccountRole() {
      return accountRole;
   } 
```

.

```
public class AccountRole {
    private Collection<Account> accounts = new ArrayList<Account>();

    @OneToMany(mappedBy = "accountRole", fetch = FetchType.EAGER)
    public Collection<Account> getAccounts() {
         return accounts;
    } 
```

当我从数据库中获取 accountRole 并尝试持久化我的`Account`. **此时我刚刚创建了我的帐户，并且角色已经存在于 db 中。**

```
AccountRole role = accountService.getRoleFromDatabase(AccountRoles.ROLE_USER);
account.setAccountRole(role);

//setting both ways, as suggested
public void setAccountRole(AccountRole accountRole) {
    accountRole.addAccount(this);
    this.accountRole = accountRole;
}

entityManager.persist(account); // finally in my DAO 
```

我读到了这个：[JPA/Hibernate: detached entity pass to persist](https://stackoverflow.com/questions/13370221/jpa-hibernate-detached-entity-passed-to-persist) **而我的理解是，我必须从两个方向设置实体值，这样我在我的设置器中所做的事情。**

仍然出现错误。

```
 org.hibernate.PersistentObjectException: detached entity passed to persist: foo.bar.pojo.AccountRole 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-12T10:16:35.340

只需更换

```
entityManager.persist(account); 
```

和：

```
entityManager.merge(account); 
```

并允许合并级联：

```
@ManyToOne(cascade = { CascadeType.PERSIST, CascadeType.MERGE }, fetch = FetchType.EAGER)
public AccountRole getAccountRole() {
    return accountRole;
} 
```

因为合并是这样做的：

> 如果您的实体是新实体，则它与persist() 相同。但是，如果您的实体已经存在，它将对其进行更新。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T09:12:14.257

看起来您在处理过程中离开了事务，因此`accountRole`被分离，或者由于其他原因它已经被分离。

在调用`entityManager.merge(accountRole)`之前调用`entityManager.persist(account)`应该修复它。

编辑：不幸的是，如果您不能确定`accountRole`数据库中是否已经存在，您将不得不通过查询来检查它。如果存在 - 合并，如果不存在 - 坚持。这确实很麻烦，但我还没有看到更好的解决方法。

EDIT2：您传递给该`merge`方法的实体将保持分离 - 托管实体将由 . 返回`merge`，因此您需要先合并，然后将 上的引用设置`account`为`merge`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-19T22:28:49.130

你不能传递一个数据实体来持久化，没有办法。但你不需要。

您想`Account`独立于`AccountRole`（已经持久化）持久化一个。为了实现这一点，只需从**子实体中****删除级联`@ManyToOne`**（`Account`在这种情况下）：

```
public class Account {
    private AccountRole accountRole;

    @ManyToOne // no cascading here!
    public AccountRole getAccountRole() {
        return accountRole;
    } 
```

在这里查看我的解释，为什么：[https ://stackoverflow.com/a/54271569/522578](https://stackoverflow.com/a/54271569/522578)

# java - 泛型方法，泛型返回类型不匹配

> ID：13835982
> 
> 赞同：0
> 
> 时间：2012-12-12T08:51:32.580
> 
> 标签：java, generics

以下 Java 代码将无法编译。

```
public <DO extends ServerDataObject> ProxyDataObject<DO> convertToProxy(Class<DO>   doClass) throws Exception{
    if(getId()==0)return null;
    ProxyDataObject<DO> proxy = (ProxyDataObject<DO>) doClass.newInstance();
    proxy.setID(getId());
    return proxy;
}

public interface ProxyDataObject<DO extends ServerDataObject> extends ServerDataObject, DataTransferInterface {

public void setID(int id);

@Ignore
public String getIDName();
} 
```

给出以下消息：

> 绑定不匹配：DO 类型不是绑定参数 DO 扩展 ProxyDataObject 类型的 ServerDataObject 的有效替代品

这对我来说没有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:56:05.930

`doClass`是类型`Class<DO>`，所以`doClass.newInstance()`也是类型`DO`。你怎么可能把它投射到`ProxyDataObject<DO>`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T22:31:09.237

奇怪的。它用 Java 1.6.0_26 对我来说编译得很好，尽管有一个警告。

第一个问题是您的方法签名应该是：

```
public <DO extends ServerDataObject> ProxyDataObject<DO> convertToProxy(
        Class<? extends ProxyDataObject<DO>> doClass
    ) throws Exception {
    if(getId()==0)return null;
    ProxyDataObject<DO> proxy = doClass.newInstance();
    proxy.setID(getId());
    return proxy;
} 
```

或者：

```
public <DO extends ProxyDataObject<?>> DO convertToProxy(Class<DO> doClass) throws Exception{
    if(getId()==0)return null;
    DO proxy = doClass.newInstance();
    proxy.setID(getId());
    return proxy;
} 
```

取决于你的实际意思。

其次，DO 扩展了 ServerDataObject，而不是 ProxyDataObject。使用您定义的继承，ServerDataObject 的实例可能不是 ProxyDataObject。因此，您会收到您所看到的错误。

# php - 在 echo 中正确使用 If 语句？

> ID：13835987
> 
> 赞同：0
> 
> 时间：2012-12-12T08:51:44.987
> 
> 标签：php, html, mysql

我有一个名为的变量`$position`，它有一个从数据库中选择的值。我在将`$position`下拉菜单中的值显示为页面加载时的选定值时遇到问题。该`$position`变量确实在此代码之外回显出正确的值。

我阅读了三元运算符方法，所以我在这里使用它而不是普通的 IF 语句，但它仍然不起作用。我的代码正确吗？我应该使用另一种方法吗？

谢谢

我的代码

```
$number = $_GET['id'];
$number = mysqli_real_escape_string($connect,$number);

$stmt = $connect->prepare("SELECT s_code, s_type, s_position, s_idno, s_firstnames, s_email, s_cellno FROM smco WHERE s_ainumber = ?") or die(mysqli_error());

$stmt->bind_param('s', $number);

$stmt->execute();

$stmt->bind_result($code, $type, $position, $idno, $name, $email, $cell);

$stmt->fetch();

$stmt->close();

echo "<td width=\"62%\" align=\"left\">
<p><b>Position:</b></p>
<select name=\"position\">
<option value=\"AQ\" (($position == 'AQ') ? \"selected='selected'\")>Account Queries</option>
<option value=\"KM\" (($position == 'KM') ? \"selected='selected'\")>Key Account Manager</option>
<option value=\"MD\" (($position == 'MD') ? \"selected='selected'\")>Managing Director</option>
<option value=\"RB\" (($position == 'RB') ? \"selected='selected'\")>Rebates</option>
<option value=\"BY\" (($position == 'BY') ? \"selected='selected'\")>Store Buyer</option>
<option value=\"OW\" (($position == 'OW') ? \"selected='selected'\")>Store Owner</option>
</select>
</td>"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T08:55:35.020

```
echo '<option value="">' . (true ? 'true' : 'false') . '</option>'; 
```

在你的情况下：

```
echo "<option value=\"AQ\"" . (($position == 'AQ') ? ' selected="selected"' : '') . ">Account Queries</option>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T08:57:55.650

你必须像这样连接字符串：

```
echo "foo is " . ($foo == true ? "true" : "false") . " whatever echo"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T09:00:29.533

我不确定我的问题是否正确，但您可以简化这一点。

只需编写一个这样的函数：

```
function is_postion($value, $position){

    if($value == $position) echo 'selected="selected"';

    return;

} 
```

然后简单地将它放在 HTML 中，而不是使用 echo 来处理整个事情。所以：

```
<option value="AQ" <?php is_position('AQ', $position); ?> >Account Queries</option> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T09:03:09.197

首先，您不需要将所有 HTML 包装到 echo 中。仅将 PHP 用于动态部分就足够了。其次，您将 PHP 代码放在字符串中。所以，它没有奏效。三、什么时候使用*(expr) ？：（*三元运算符）你错过了错误的分支。

尝试使用这个。

```
 <td width="62%" align="left">
        <p><b>Position:</b></p>
        <select name="position">
        <option value="AQ"<?=$position == 'AQ' ? "selected='selected'" : ""?>>Account Queries</option>
        <option value="KM"<?=$position == 'KM' ? "selected='selected'" : ""?>>Key Account Manager</option>
        <option value="MD"<?=$position == 'MD' ? "selected='selected'" : ""?>>Managing Director</option>
        <option value="RB"<?=$position == 'RB' ? "selected='selected'" : ""?>>Rebates</option>
        <option value="BY"<?=$position == 'BY' ? "selected='selected'" : ""?>>Store Buyer</option>
        <option value="OW"<?=$position == 'OW' ? "selected='selected'" : ""?>>Store Owner</option>
        </select>
</td> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-12T09:14:14.303

```
<td width='62%' align='left'>
    <p><b>Position:</b></p>

    <select name='position'>
        <option value='AQ' <?php echo $position == 'AQ' ? 'selected' : '' ?>>Account Queries</option>
        <option value='KM' <?php echo $position == 'KM' ? 'selected' : '' ?>>Key Account Manager</option>
        <option value='MD' <?php echo $position == 'MD' ? 'selected' : '' ?>>Managing Director</option>
        <option value='RB' <?php echo $position == 'RB' ? 'selected' : '' ?>>Rebates</option>
        <option value='BY' <?php echo $position == 'BY' ? 'selected' : '' ?>>Store Buyer</option>
        <option value='OW' <?php echo $position == 'OW' ? 'selected' : '' ?>>Store Owner</option>
    </select>
</td> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-12T09:14:21.607

这将为您工作：

```
 echo "<td width=\"62%\" align=\"left\">
<p><b>Position:</b></p>
<select name=\"position\">
<option value=\"AQ\"  ".(($position == "AQ") ? "Selected=selected" : "")." >Account Queries</option>
<option value=\"KM\" ".(($position == "KM") ? "Selected='selected'" : "")." >Key Account Manager</option>
<option value=\"MD\" ".(($position == "MD") ? "Selected='selected'" : "")." >Managing Director</option>
<option value=\"RB\" ".(($position == "RB") ? "Selected='selected'" : "")." >Rebates</option>
<option value=\"BY\" ".(($position == "BY") ? "Selected='selected'" : "")." >Store Buyer</option>
<option value=\"OW\" ".(($position == "OW") ? "Selected='selected'" : "").">Store Owner</option>
</select>
</td>"; 
```

# c++ - 在 Qt 中获取本地 IP 地址

> ID：13835989
> 
> 赞同：36
> 
> 时间：2012-12-12T08:51:49.390
> 
> 标签：c++, qt, ip, symbian

`192.168.1.49`有没有一种跨平台的方式来获取使用 Qt 的计算机的本地 IP 地址（即看起来像的东西）？

我想为 Symbian 手机制作一个 FTP 服务器，并且我想显示 FTP 客户端应该连接的 IP 地址。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-12-12T09:52:55.390

使用[QNetworkInterface::allAddresses()](http://doc.qt.io/qt-5/qnetworkinterface.html#allAddresses)

```
const QHostAddress &localhost = QHostAddress(QHostAddress::LocalHost);
for (const QHostAddress &address: QNetworkInterface::allAddresses()) {
    if (address.protocol() == QAbstractSocket::IPv4Protocol && address != localhost)
         qDebug() << address.toString();
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-12-11T07:00:18.190

`QNetworkInterface::allAddresses()`会给你网络地址。然后，您可以将结果过滤到不是环回地址的 IPv4 地址：

```
QList<QHostAddress> list = QNetworkInterface::allAddresses();

 for(int nIter=0; nIter<list.count(); nIter++)

  {
      if(!list[nIter].isLoopback())
          if (list[nIter].protocol() == QAbstractSocket::IPv4Protocol )
        qDebug() << list[nIter].toString();

  } 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-06-09T02:28:03.383

如果您需要的信息不仅仅是 IP 地址（如子网），则必须遍历所有接口。

```
QList<QNetworkInterface> allInterfaces = QNetworkInterface::allInterfaces();
QNetworkInterface eth;

foreach(eth, allInterfaces) {
    QList<QNetworkAddressEntry> allEntries = eth.addressEntries();
    QNetworkAddressEntry entry;
    foreach (entry, allEntries) {
        qDebug() << entry.ip().toString() << "/" << entry.netmask().toString();
    }
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-08-17T07:11:17.007

QNetworkInterface 返回很多地址。您必须过滤它们，以获得理想的结果：

```
foreach (const QNetworkInterface &netInterface, QNetworkInterface::allInterfaces()) {
    QNetworkInterface::InterfaceFlags flags = netInterface.flags();
    if( (bool)(flags & QNetworkInterface::IsRunning) && !(bool)(flags & QNetworkInterface::IsLoopBack)){
        foreach (const QNetworkAddressEntry &address, netInterface.addressEntries()) {
            if(address.ip().protocol() == QAbstractSocket::IPv4Protocol)
                qDebug() << address.ip().toString();
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-08-14T19:57:58.760

这是我实现获取的代码：本地主机的名称、IP、网络掩码和 MAC 地址。

```
 QString localhostname =  QHostInfo::localHostName();
   QString localhostIP;
   QList<QHostAddress> hostList = QHostInfo::fromName(localhostname).addresses();
   foreach (const QHostAddress& address, hostList) {
       if (address.protocol() == QAbstractSocket::IPv4Protocol && address.isLoopback() == false) {
            localhostIP = address.toString();
       }
   }
   QString localMacAddress;
   QString localNetmask;
   foreach (const QNetworkInterface& networkInterface, QNetworkInterface::allInterfaces()) {
       foreach (const QNetworkAddressEntry& entry, networkInterface.addressEntries()) {
           if (entry.ip().toString() == localhostIP) {
               localMacAddress = networkInterface.hardwareAddress();
               localNetmask = entry.netmask().toString();
               break;
           }
       }
   }
   qDebug() << "Localhost name: " << localhostname;
   qDebug() << "IP = " << localhostIP;
   qDebug() << "MAC = " << localMacAddress;
   qDebug() << "Netmask = " << localNetmask; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-01-25T12:54:54.637

我想获取`eth1`目标机器的 IP 地址。上面提供的答案帮助我得到了我想要的：这就是我编写函数来获取网络接口名称的 IP 地址的方式`eth1`。

```
QNetworkInterface eth1Ip = QNetworkInterface::interfaceFromName("eth1");
QList<QNetworkAddressEntry> entries = eth1Ip.addressEntries();
if (!entries.isEmpty()) {
    QNetworkAddressEntry entry = entries.first();
    qDebug() << entry.ip();
} 
```

# python - 如何在网络上显示 txt，通过 gae、谷歌应用引擎、python

> ID：13835990
> 
> 赞同：-1
> 
> 时间：2012-12-12T08:51:48.773
> 
> 标签：python, html, google-app-engine

我想上传 txt 文件并显示这个 txt。

我有上传txt到gae的代码，但是如何显示呢？？？

我想上传 txt 文件并显示这个 txt。

我有上传txt到gae的代码，但是如何显示呢？？？

我想上传 txt 文件并显示这个 txt。

我有上传txt到gae的代码，但是如何显示呢？？？

```
 import os
    import urllib

    from google.appengine.ext import blobstore
    from google.appengine.ext import webapp
    from google.appengine.ext.webapp import blobstore_handlers
    from google.appengine.ext.webapp import template
    from google.appengine.ext.webapp.util import run_wsgi_app

    class MainHandler(webapp.RequestHandler):
        def get(self):
            upload_url = blobstore.create_upload_url('/upload')
            self.response.out.write('<html><body>')
            self.response.out.write('<form action="%s" method="POST" enctype="multipart/form-data">' % upload_url)
            self.response.out.write("""Upload File: <input type="file" name="file"><br> <input type="submit" name="submit" value="Submit"> </form></body></html>""")

            for b in blobstore.BlobInfo.all():
                self.response.out.write('<li><a href="/serve/%s' % str(b.key()) + '">' + str(b.filename) + '</a>')

   class UploadHandler(blobstore_handlers.BlobstoreUploadHandler):
        def post(self):
            upload_files = self.get_uploads('file')
            blob_info = upload_files[0]
            self.redirect('/')

   class ServeHandler(blobstore_handlers.BlobstoreDownloadHandler):
        def get(self, blob_key):
            blob_key = str(urllib.unquote(blob_key))
            if not blobstore.get(blob_key):
                self.error(404)
            else:
                self.send_blob(blobstore.BlobInfo.get(blob_key), save_as=True)

        def main():
            application = webapp.WSGIApplication(
                  [('/', MainHandler),
                   ('/upload', UploadHandler),
                   ('/serve/([^/]+)?', ServeHandler),
                  ], debug=True)
            run_wsgi_app(application)

     if __name__ == '__main__':
        main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T09:20:18.753

您应该稍微更改上传处理程序的重定向功能，最后您应该重定向到上传的文件：

```
self.redirect('/serve/%s/' % blob_info.key()) 
```

另外，您的servehandler（我不确定您是否可以使用它，如果您创建自己的serve_txt函数可能会更好，无论如何我都会尝试）

```
class ServeHandler(webapp.RequestHandler): 
  #we want to render a page, not a download, that's why it extends RequestHandler
  def get(self, resource):
    resource = str(urllib.unquote(resource))
    blob_info = blobstore.BlobInfo.get(resource) #this should be your file
    self.response.headers['Content-Type'] = 'text/html'
    self.response.out.write(blob_info) 
```

模板现在完全取决于你，这应该在你的页面上显示一个纯文本（作为一个 txt，你可能想在 python 使用[BlobReader 类](https://developers.google.com/appengine/docs/python/blobstore/blobreaderclass)之前阅读它，然后返回正确格式的页面。我的只是一个你应该如何做的例子继续）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:25:56.093

thanks －－－－－－－－－like it

```
import os
import urllib

from google.appengine.ext import blobstore
from google.appengine.ext import webapp
from google.appengine.ext.webapp import blobstore_handlers
from google.appengine.ext.webapp import template
from google.appengine.ext.webapp.util import run_wsgi_app

class MainHandler(webapp.RequestHandler):
    def get(self):
        upload_url = blobstore.create_upload_url('/upload')
        self.response.out.write('<html><body>')
        self.response.out.write('<form action="%s" method="POST" enctype="multipart/form-data">' % upload_url)
        self.response.out.write("""Upload File: <input type="file" name="file"><br> <input type="submit" name="submit" value="Submit"> </form></body></html>""")

        for b in blobstore.BlobInfo.all():
            #self.response.out.write('<li><a href="/serve/%s' % str(b.key()) + '">' + str(b.filename) + '</a>')
            self.response.out.write(u'<li><a href="/serve/%s">%s</a>[%s]</li>' % (b.key(),b.filename, blobstore.BlobReader(b.key()).read())) 

class UploadHandler(blobstore_handlers.BlobstoreUploadHandler):
    def post(self):
        upload_files = self.get_uploads('file')
        blob_info = upload_files[0]
        self.redirect('/')
       #contents = open(filename).read()

class ServeHandler(blobstore_handlers.BlobstoreDownloadHandler):
        def get(self, blob_key):
            blob_key = str(urllib.unquote(blob_key))
            if not blobstore.get(blob_key):
                self.error(404)
            else:
                self.send_blob(blobstore.BlobInfo.get(blob_key))

def main():
    application = webapp.WSGIApplication(
          [('/', MainHandler),
           ('/upload', UploadHandler),
           ('/serve/([^/]+)?', ServeHandler),
          ], debug=True)
    run_wsgi_app(application)
    print "Hello, world!1"

if __name__ == '__main__':
  main() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T09:27:31.100

如果您想在浏览器中显示而不是保存 - 删除

> save_as=真

```
 class ServeHandler(blobstore_handlers.BlobstoreDownloadHandler):
        def get(self, blob_key):
            blob_key = str(urllib.unquote(blob_key))
            if not blobstore.get(blob_key):
                self.error(404)
            else:
                self.send_blob(blobstore.BlobInfo.get(blob_key)) 
```

# java - 使用 sun/security/x509/X500Name 启动 Android 应用程序失败

> ID：13835994
> 
> 赞同：1
> 
> 时间：2012-12-12T08:51:58.793
> 
> 标签：java, android, eclipse, sun, ibm-mobilefirst

我无法启动我的 Android 应用程序（在升级我正在使用的 Worklight 版本之前它运行良好）并且它不断给出 sun/security/x509/X500Name 的错误。现在，我已经多次使用 Sun 的 Java 设置 Android，所以我完全感到困惑。这是我的设置方法：

项目 >> 属性 >> Java 构建路径 >> 库 >> 添加库 - 这是我放置 Sun Java 的地方。

Window >> Preferences >> Java >> Installed JREs - My Sun Java 被打勾并且是默认的。

我什至编辑了我的 eclipse.ini，但无论有没有以下行都没有区别：-vm C:\Program Files (x86)\Java\jdk1.6.0_27\bin\javaw.exe

我似乎记得我不能有空格，这是真的吗？如果是这样，我该如何替换空格？即便如此，它应该可以在我的 Eclipse 应用程序中工作，而无需以这种方式定义我的 VM（或者我相信如此）。

我不知道我需要在其他任何地方定义我正在使用的 Java。如果我错过了什么，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:31:47.663

问题是由于 Eclipse 在任务管理器中作为 eclipse.exe 启动的。它需要是任务管理器中的 javaw.exe，否则 Android 启动将失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-30T07:37:30.510

请检查你的 eclipse.ini 你需要添加这一行 -vm C:\Program Files (x86)\your_jdk_path\jre\bin\javaw.exe

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-08T16:32:24.607

日食.ini

我添加了 Oracle Java 的路由（[http://java.com/en/download/index.jsp](http://java.com/en/download/index.jsp)）：

-vm C:\Program Files (x86)\Java\jre7\bin\javaw.exe

它终于起作用了......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-27T11:47:24.880

我解决了，因为我使用的是 64 位 Eclipse 代码（安装在 Program Files 中）和 32 位 JDK 代码（安装在 Program Files (x86) 中）。自从我安装了 64 位 JDK 套件后，它就停止了。

# java - XMLUnit 中的 setIgnoreWhitespace 问题

> ID：13835996
> 
> 赞同：1
> 
> 时间：2012-12-12T08:52:06.613
> 
> 标签：java, xml, xmlunit

我无法让 xmlunit 使用 setIgnoreWhitespace 忽略我的 XML 中的空格...知道可能有什么问题或我可以检查什么吗？

JVM：1.6，XMLUnit 1.3，IDE：JDeveloper 11.1.1.6

例如，下面返回“预期的子节点数 '2' 但为 '1'”。如果我取出多余的空间，它就会通过。

```
@Test
public void testExample()  {
    String inputXML = "<test><innertest>data</innertest></test>";
    String expectedResultXml = "<test> <innertest>data</innertest></test>";

    XMLUnit.setIgnoreWhitespace(true);
    XMLUnit.setIgnoreComments(true);
    XMLUnit.setIgnoreDiffBetweenTextAndCDATA(true);

    try {
        assertXMLEqual("Did not match!!", expectedResultXml, inputXML);
    } catch(Exception e) {}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:21:15.703

我的类路径中必须有一些不兼容的 XML 库。如下覆盖 JAXP 库解决了该问题（还添加了 xerces 和 xalan jars）。

```
 XMLUnit.setControlParser("org.apache.xerces.jaxp.DocumentBuilderFactoryImpl");
    XMLUnit.setTestParser("org.apache.xerces.jaxp.DocumentBuilderFactoryImpl");
    XMLUnit.setSAXParserFactory("org.apache.xerces.jaxp.SAXParserFactoryImpl");
    XMLUnit.setTransformerFactory("org.apache.xalan.processor.TransformerFactoryImpl"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T12:45:16.393

您似乎有点期望忽略任何空白字符，但该设置并非如此。

见[`XMLUnit.setIgnoreWhitespace`](http://xmlunit.sourceforge.net/api/org/custommonkey/xmlunit/XMLUnit.html#setIgnoreWhitespace(boolean))：

> 比较节点值时是否忽略空格。
> 
> [...]
> 
> 设置此参数对文本内的空白没有影响。

此设置并不意味着将删除仅包含空格的文本节点（并且不检查）。这仅意味着在比较`<test>`元素的节点值时忽略空格。但是那个测试并没有引起这个消息。在您的情况下，检查子节点的数量确实会引发消息。

见[3.8.1。空白处理](http://xmlunit.sourceforge.net/userguide/html/ar01s03.html#Comparing:%20Configuration)以获得更详细的描述和更多配置选项（例如`XMLUnit.setNormalizeWhitespace`）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-09-24T13:43:42.133

像@user392909 那样覆盖 JAXP 库对我来说没有成功。

但是与我项目中的另一个库发生冲突是根本原因。首先，我更改了一些库的导入顺序，最终修复了测试。所以我能够识别出冲突的库。它是 j2ee.jar。

我删除了它（并且不得不用 tomcat-catalina.jar、tomcat-juli.jar 和 javamail.jar 替换它以解决即将出现的编译错误）。

导入顺序不再重要，因为 j2ee.jar 已被删除/替换并且 xml 差异现在按预期工作。