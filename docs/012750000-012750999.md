# StackOverflow 问答 12750000-12750999

# c# - 内联 SQL 查询的最佳实践

> ID：12750000
> 
> 赞同：9
> 
> 时间：2012-10-05T16:04:01.967
> 
> 标签：c#, asp.net, sql-server, visual-studio

我正在使用一个使用大量内联 SQL 查询的 asp.net 网站......我想知道是否最好动态创建内联查询：

```
int i = 500;

    using (SqlConnection conn = new SqlConnection(connStr))
    {
        SqlCommand com = new SqlCommand(conn);
        ...
        com.CommandText = "select from table where column < @parameter";
        ...
    } 
```

或者有一个类来保存应用程序所需的所有查询。像这样的东西：

```
class SqlQueries
{
    private string query1 = 
          "select * from tblEmployees where EmployeeName = @EmployeeName";

    private string query2 = 
          "select * from tblVacation where EmployeeName = @EmployeeName";

    public string Query(string s) 
    { 
        string str = string.Empty;

            switch (s) 
            {
                case "query1":
                    str = query1; 
                    break; 
                case "query2":
                    str = query2; 
                    break;
            }     

    return str;    

    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T16:11:09.393

我在一天中使用了很多 ADO.NET 查询，而且我一直使用第一种方法。第二种方法是一个有趣的想法，但如果您在使用它的代码中的另一个位置，编辑这些查询可能会很麻烦。这也使得在代码中的特定位置查看查询正在做什么变得更加困难。例子：

```
string sql = "Update User set age = @age where UserId = @UserId"; 
```

告诉开发人员发生了什么，同时：

```
string sql = SqlQueries.Query("updateAge"); 
```

留下有关正在更新哪些表/列的问题。此外，对于第一个，您确切知道需要添加哪些参数。

如果您在几个可能会改变事情的地方编写此查询

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-05T16:08:57.337

将文字直接放在方法中并不可怕，只要每次要运行该查询时始终调用相同的方法即可。但是，如果您要将字符串文字复制到代码中的多个位置，那么绝对首选常量。但是，在第二个示例中，不应将字符串作为 Query 方法的参数，而应采用枚举值。

但是，如果您使用的是您描述的第二种方法，我会问您为什么不直接开始使用存储过程呢？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-05T16:22:45.907

我建议使用存储过程作为比硬编码内联查询更好的解决方案。如果您以后必须更改查询，则不必重新构建应用程序，因此可以修复查询中的错误，而无需部署整个应用程序。您拥有的第二个选项是等待发生的维护噩梦。当你有一个或两个查询时，这一切看起来都很好，但是当你有几十个或几百个查询时，它开始看起来有点难看。您的代码看起来像是 c#，所以我建议您查看 Microsoft Enterprise Library，

[http://msdn.microsoft.com/en-us/library/ff632023.aspx](http://msdn.microsoft.com/en-us/library/ff632023.aspx)

您可能需要下载不同的版本，具体取决于您正在开发的 .NET 框架的版本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T16:27:36.867

如果您绝对必须拥有“内联” sql 而不是存储过程（我已经为仅与数据库*交互而不是**拥有*它的实用程序类型的应用程序这样做了），我建议将您的 SQL 放入[嵌入式资源文件](http://support.microsoft.com/kb/319292)中。这将使您的查询更易于维护（尽管您仍然需要重新编译您的应用程序以进行更改）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T16:21:18.547

如果您打算使用内联 SQL，至少不要将它放在网页代码中，因为当您更改数据库以了解它会影响什么时会很痛苦。将所有查询放在一个类中可能有点杂乱无章，但如果您按功能类（如业务对象的管理器类）对它们进行分组，则可能更容易处理。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-05T16:08:30.623

我认为只要不在几个地方重复查询，就可以将查询“内联”。如果这种情况开始发生，那么您可能需要开始创建查询类。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-05T16:11:28.487

在这两种情况下，您最终都会构建/获取`String`您将传递给`CommandText`. 所以不会有这样的区别。在您的情况下，您唯一需要考虑的是您将如何维护代码或其他人将如何理解您的代码。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-30T12:48:19.017

如果您的查询超过一两行，您应该考虑将它们放在自己的 .sql 文件中。将文件上的构建操作设置为嵌入资源，并通过调用 GetManifestResourceStream() 来访问它。这样，您将 sql 提升到适当语言的状态，并具有语法突出显示、验证和智能感知（当您将 VS 连接到数据库时）。不用说，这极大地方便了维护。

如果这一切看起来很麻烦，请使用我的 VS 扩展[QueryFirst](https://visualstudiogallery.msdn.microsoft.com/eaf390af-afc1-4994-a442-ec95923dafcb)。使用提供的模板创建您的 .sql 文件，它们将自动连接以进行编译。但是您不会在意，因为您只需通过生成的类访问查询。

Sql 是我能想到的唯一一种计算机语言，我们可以接受在字符串文字中被切碎。这应该是个丑闻。

# gnuplot - gnuplot：数据矩阵的 3D 图

> ID：12750005
> 
> 赞同：8
> 
> 时间：2012-10-05T16:04:21.210
> 
> 标签：gnuplot

如何在 Gnuplot 中绘制（3D 图）具有这种数据结构的矩阵，使用第一行和第一列作为 ax 和 y 刻度（第一行的第一个数字是列数）？

```
4 0.5 0.6 0.7 0.8
1 -6.20 -6.35 -6.59 -6.02
2 -6.39 -6.52 -6.31 -6.00
3 -6.36 -6.48 -6.15 -5.90
4 -5.79 -5.91 -5.87 -5.46 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-02T13:22:29.363

正是这种数据格式可以读入`matrix nonuniform`：

```
set view 50,20
set ticslevel 0
splot 'data.txt' matrix nonuniform with lines t '' 
```

这会生成正确的抽动，就像在数据文件中指定的那样：

![在此处输入图像描述](../Images/8b9cf92eaee19cf2202078662c67837c.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T16:31:06.230

要绘制 4D 图，使用颜色作为第 4 维，您可以使用

```
splot  '1.txt' using 2:3:4:5  every ::1  palette
#  |                              |
#  |                              |
# used for 3d plots            skip the header line 
```

或者你想画一张不同的图，x 和 y 是第一列和第一行，矩阵中的数字只是代表 z？然后使用以下内容：

```
splot '1.txt' every ::1:1 matrix 
```

要添加一些效果，您可以将其更改为

```
set dgrid3d 4,4
splot '1.txt' every ::1:1 matrix with lines 
```

# generics - VHDL：使用整数泛型的长度来确定选择行的数量

> ID：12750007
> 
> 赞同：14
> 
> 时间：2012-10-05T16:04:26.127
> 
> 标签：generics, vhdl

我正在尝试创建一个可重复使用的桶形移位器；它需要一个输入位数组并将它们移动一定数量的位置（由另一个输入确定）。我想对模块进行参数化，使其适用于任何`n`.

所需的选择行数由`n`--> 确定，即`SHIFT_CNT = log2(NUMBITS-1)+1`在下面的代码中。`std_logic_vector`在我的组织中（我认为总体而言），拥有不属于or的端口被认为是一种不好的形式`std_logic`，因此我使用 a`std_logic_vector`作为选择行的数量。我需要`std_logic_vector`根据输入通用调整长度。有没有办法在不使用第二个泛型的情况下做到这一点？我看过[这篇](https://stackoverflow.com/questions/5195242/vhdl-finding-out-reporting-bit-width-length-of-integer-vs-std-logic-vector)文章，但它不涉及泛型。[这篇](https://stackoverflow.com/questions/5891700/use-a-generic-to-determine-demux-size-in-vhdl)文章完全消除了泛型或使用 log 值作为泛型，这对未来的用户来说不是那么直观（如果`INPUT`不是 2 的幂，可能会导致问题）。

下面的声明`SHIFT_CNT`肯定是不正确的；有没有办法在不使用第二个泛型的情况下自动生成实体声明中的长度？

```
entity BarrelShifter is

generic ( NUMBITS : integer :=8);                                                   
Port    ( INPUT     : in   std_logic_vector (NUMBITS-1 downto 0);                
          OUTPUT    : out  std_logic_vector (NUMBITS-1 downto 0);                
          SHIFT_CNT : in   std_logic_vector ((NUMBITS-1)'length downto 0)                 
        );                                                               
end BarrelShifter; 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-06T07:18:38.397

您可以使用数学库计算对数结果的 log2 和 ceil 来声明 SHIFT_CNT 的大小。

```
use IEEE.math_real.all; 
```

或特定功能

```
use IEEE.math_real."ceil";
use IEEE.math_real."log2"; 
```

例如，您要计算值 a 的 clog2

```
result := integer(ceil(log2(real(a)))); 
```

**如果你只是使用这些函数来计算参数**，你的代码是可**综合的** *（我做到了）*。

如果您不想在实体中使用它，您可以在库中声明它们或使用这些函数进行泛型。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-05T17:38:45.153

您可以在库中创建 log2 函数，如下所示：

```
 function f_log2 (x : positive) return natural is
      variable i : natural;
   begin
      i := 0;  
      while (2**i < x) and i < 31 loop
         i := i + 1;
      end loop;
      return i;
   end function; 
```

如果库被导入，您可以像这样指定端口：

```
shift_cnt : in std_logic_vector(f_log2(NUMBITS)-1 downto 0) 
```

这是一个有点丑陋的解决方案，但它不使用任何资源（因为该函数是纯函数并且所有输入在编译时都是已知的）。

我通常这样做，但您可能更喜欢将日志值指定为您提到的通用值。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-08T12:51:33.367

两种替代方法：

您可以向后工作并使用`generic`as `shift_bits`- 然后从中计算输入和输出向量的宽度：

```
generic ( shift_bits: integer :=3);                                                   
Port    ( INPUT     : in   std_logic_vector ((2**shift_bits)-1 downto 0);                
          OUTPUT    : out  std_logic_vector ((2**shift_bits)-1 downto 0);                
          SHIFT_CNT : in   std_logic_vector (shift_bits-1 downto 0)                 
        ); 
```

或将计数视为一个数字：

```
generic ( NUMBITS : integer :=8);                                                   
Port    ( INPUT     : in   std_logic_vector (NUMBITS-1 downto 0);                
          OUTPUT    : out  std_logic_vector (NUMBITS-1 downto 0);                
          SHIFT_CNT : in   integer range 0 to numbits-1                 
        ); 
```

并让工具为您解决问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-21T13:10:29.180

您可以不将 NUMBITS 值输入为 8，而是将其输入为 2 (log2(8))，然后按如下方式重新键入以解决该问题，您的泛型不会那么干净，但它是可扩展的。

```
entity BarrelShifter is

generic ( NUMBITS : integer :=2);                                                   
Port    ( INPUT     : in   std_logic_vector (((2**Nbits)-1) downto 0);                
          OUTPUT    : out  std_logic_vector (((2**Nbits)-1) downto 0);                
          SHIFT_CNT : in   std_logic_vector ((NUMBITS-1) downto 0)                 
        );                                                               
end BarrelShifter; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-19T15:55:45.347

当我使用Khan提到的方法时，我遇到了舍入错误。所以我写了我自己的版本，它不受舍入错误的影响，原则上可以处理超过 32 位。您可以将 L 的类型替换为具有逻辑左移运算符的任何类型。

大多数情况下，您希望使用 log2ceil，它是存储给定数字所需的位数，而 log2floor 可以更多地描述为最高位集。

在大多数情况下，这些函数很适合合成，因为它们用于生成常量。因此没有为它们推断硬件。

```
function log2ceil (L: POSITIVE) return NATURAL is
    variable i, bitCount : natural;
begin
    i := L-1;
    bitCount:=0;
    while (i > 0) loop
        bitCount := bitCount + 1;
        i:=srlInteger(i,1);
    end loop;
    return bitCount;
end log2ceil;

function log2floor (L: POSITIVE) return NATURAL is
    variable i, bitCount : natural;
begin
    i := L;
    bitCount:=0;
    while (i > 1) loop
        bitCount := bitCount + 1;
        i:=srlInteger(i,1);
    end loop;
    return bitCount;
end log2floor;

function srlInteger(arg: integer; s:natural) return integer is
begin
    return to_integer(SHIFT_RIGHT(to_UNSIGNED(ARG,32), s));
end srlInteger; 
```

# c++ - 如何制作一个数组来存储可变大小的char数组？

> ID：12750012
> 
> 赞同：-2
> 
> 时间：2012-10-05T16:05:05.770
> 
> 标签：c++, arrays, variables, multidimensional-array, size

我需要一个数组来存储可变大小的 char 数组。我可以使用向量或其他任何东西，但不幸的是，这是针对 MPI 项目的，我被迫使用数组，所以我可以使用`MPI::COMM_WORLD.Send(...)`函数发送它。

我的想法来自[这个链接](https://stackoverflow.com/questions/5901476/sending-and-receiving-2d-array-over-mpi)。

这是我遇到的问题的简化示例：

```
char* arrayStorage[3]; //I want to store 3 char arrays of variable size!
int index = 0;

char array_1[RANDOM_SIZE] = {.....};
char array_2[RANDOM_SIZE] = {.....};
char array_3[RANDOM_SIZE] = {.....};

arraySorage[index] = array_1;
index++;    
arraySorage[index] = array_2;
index++;
arraySorage[index] = array_3;
index++; 
```

我也看到人们谈论`malloc`类似的东西，但我对指针知之甚少。我有`malloc`，我必须打电话`free`，我不知道在哪里，所以我现在避免这样做。

这段代码显然不起作用，`array_1`, `array_2`,`array_3`都可以，但是当我尝试访问它们时，我得到了垃圾。问题似乎在索引变量内部。也许我不应该做 index++，也许我应该做 index += RANDOM_SIZE，但这也失败了。

如何将可变大小的 char 数组存储在数组中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:12:16.957

使用 malloc 和 free（或 C++ 中的 new 和 delete）。你也可以用向量来做——因为向量可以被视为数组。

```
 char *str = "hello world";
 // need the +1 for null character
 arraySorage[0] = (char *)malloc (strlen(str) + 1); 
 strcpy(arraySorage[0], str);
 ...
 free(arraySorage[0]); 
```

新/删除

```
arraySorage[0] = new char[strlen(str)+1];

strcpy(arraySorage[0], str);
...
delete arraySorage[0]; 
```

使用 vector 和 std::string 是正确的 C++ 方式，原因有很多，包括不泄漏内存和正确处理异常。

# android - ActionBar 徽标居中，Action 项目位于两侧

> ID：12750013
> 
> 赞同：35
> 
> 时间：2012-10-05T16:05:15.947
> 
> 标签：android, android-actionbar, center, graphical-logo

我怎样才能让一个动作栏在中心有徽标，在这样的侧面有两个动作项？

![在此处输入图像描述](../Images/46d3067f838b2aee278a02564927f49a.png)

我将使用 ActionBar Sherlock。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-05T17:10:20.960

正如我在评论中指出的那样，我不确定这是否会随着 ABS 改变（我相信不会改变太多），但使用标准操作栏，您可以为操作栏标题加载自定义布局 .xml。例如，您可以有 action_bar_title.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/your_desired_background" >

<TextView
        android:id="@+id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:maxLines="1"
            android:ellipsize="end"
            android:text="@string/app_name"
            android:textAppearance="?android:attr/textAppearanceMedium"/>

</RelativeLayout> 
```

然后，在您的 Activity 中，您可能希望在 onCreate() 中调用这样的方法：

```
private void setupActionBar() {
        ActionBar ab = getActionBar();
        ab.setDisplayShowCustomEnabled(true);
        ab.setDisplayShowTitleEnabled(false);
        ab.setIcon(R.drawable.your_left_action_icon);
        LayoutInflater inflator = (LayoutInflater) this
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View v = inflator.inflate(R.layout.action_bar_title, null);

        TextView titleTV = (TextView) v.findViewById(R.id.title);
        Typeface font = Typeface.createFromAsset(getAssets(),
                "fonts/your_custom_font.ttf");
        titleTV.setTypeface(font);

        ab.setCustomView(v);

            ab.setHomeAsUpEnabled(true);
    } 
```

要控制左侧操作项，您可以在 Activity 中执行此操作：

```
@Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.yourRightActionItem:
                        //do something
                        return true;
        case android.R.id.home: //<-- this will be your left action item
            // do something
            return true;
        default:
            return super.onOptionsItemSelected(item);
        }
    } 
```

当然，请确保您还为菜单 xml 中的操作项进行了其他必要的设置。这将适用于任何右侧的操作项。

编辑：刚刚在另一条评论中看到您说标题将是一张图片。如果是这种情况，只需将我在示例中使用的 TextView 替换为您的 ImageView，并忽略 setupActionBar() 方法中的字体自定义代码。

Edit2：我更新了我的 Java 代码。您将需要执行 ab.setHomeAsUpEnabled(true)，然后有一个自定义主题来实现一个不可见的（或者可能是 @null，尽管我不知道 Android 是否会接受）可绘制的主页作为向上指示器。见这里（取自[这里](https://stackoverflow.com/questions/9252354/how-to-customize-the-back-button-on-actionbar)的答案:)

```
<style name="Theme.MyFancyTheme" parent="android:Theme.Holo">
    <item name="android:homeAsUpIndicator">@drawable/my_fancy_up_indicator</item>
    <!-- or you could try @null -->
</style> 
```

# 3d - 用于样条拟合的 RANSAC

> ID：12750017
> 
> 赞同：6
> 
> 时间：2012-10-05T16:05:19.657
> 
> 标签：3d, point-clouds, ransac

我想知道是否有任何方法可以创建可用于 RANSAC 方案的模型，其中可以从嘈杂的 3D 点云中确定样条线或折线。

我所拥有的是一个在每个 XY 平面中包含一组点的体积，在 Z 方向上有 400 个点，并且在简单地查看 3D 空间中的绘图数据时，样条形状会在视觉上出现。我已经有一个线拟合 RANSAC 方案，其中误差由简单的距离测量确定，但我不知道如何确定样条/折线的模型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-01T18:15:20.283

这是一个非常有趣的优化方法的链接，给定一个点云，计算一个覆盖它的 3D 样条曲面。首先，查看视频：

[http://users.acin.tuwien.ac.at/tmoerwald/?site=5](http://users.acin.tuwien.ac.at/tmoerwald/?site=5)

这是该项目的主页（我认为）：

[http://www.acin.tuwien.ac.at/?id=316](http://www.acin.tuwien.ac.at/?id=316)

PCL（PointClouds Library）项目中也提供了源代码。

我自己一直在阅读这个主题，似乎 nurbs/spline 拟合的一般问题倾向于找出最好的节点向量是什么。大多数方法在优化节点向量（假设控制点是固定的）和优化控制点（假设节点向量是固定的）之间交替使用，并使用从云到近似样条的点的总距离作为误差度量。我认为 RANSAC 不太适合这些方法，因为它会将样条曲线“拖向异常点”，但这只是我的猜测。

# c# - 可从事件观察

> ID：12750027
> 
> 赞同：2
> 
> 时间：2012-10-05T16:05:58.580
> 
> 标签：c#, system.reactive

我是 Rx 的新手，正在浏览一些样本并遇到以下情况：

```
 Observable.FromEventPattern<RoutedEventHandler, RoutedEventArgs>(
            h => new RoutedEventHandler(h),
            h => Loaded += h,
            h => Loaded -= h)
            .Select(_ => true)
            .StartWith(IsLoaded)
            .Where(l => l)
            .Take(1)
            .Subscribe(_ => Console.WriteLine("loaded"); 
```

我试图解构这个陈述以弄清楚它在做什么，但我并不是 100% 清楚。

我了解**FromEventPattern**如何将**Loaded**事件转换为可观察的序列。现在，**Select**将在**IsLoaded**为真时触发（这就是我的假设）。**Select**是否只是从 RoutedEventArgs 获取信息？

现在，我不确定为什么**StartsWith**在那里。 **StartsWith**会将一系列值添加到可观察序列中。那么它只是将**IsLoaded**的值添加到列表的开头吗？**Select**发生后它不是已经存在了吗？

**.Where**没有应用任何类型的过滤器，因此**.Take**将只取序列的第一个值（在这种情况下不再使用）。然后它**订阅**并仅在加载控件时写入控制台。

这种分析大部分正确吗？

此外，关于调试此类事情的任何提示（意思是，在链的不同阶段，序列是什么样的）？我可以通过附加调试器来获取信息，但我想知道是否还有其他可能常用的技巧/提示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T16:26:28.427

大多数 Observable 运算符的工作方式与同名的 Enumerable 运算符相同。如果您有使用这些的经验，它将在这里很有用。

因此，为了解决这个问题，让我们暂时使用一个整数数组而不是 observable。

```
int[] data = {1, 2, 3, 4}; 
```

这将表达式更改为

```
var results = data.Select(_ => true) 
                  .StartWith(IsLoaded)
                  .Where(l => l)
                  .Take(1);
foreach (var r in results)
{
    Console.WriteLine("loaded");
} 
```

如果您在表达式的每个阶段都创建了一个数组，您将得到：

```
Select - {true, true, true, true}
StartWith - {value of IsLoaded, true, true, true, true}
Where - (if IsLoaded is true)  {true, true, true, true, true}
        (if IsLoaded is false) {true, true, true, true}
Take - {true} 
```

使用 IEnumerables，做这种事情没有多大意义，因为您总是会得到一个为真的值（除非源数组为空且 IsLoaded 为假）。

将 this 与 IObservable 一起使用是为了在加载对象时生成一个信号。

*   `StartWith`如果对象在订阅时已经加载，则提供信号。
*   但是，如果对象未加载，则为`IsLoaded`false，`Where`会将其过滤掉，当事件触发时，会触发通知。
    *   将`Select`忽略事件产生的实际数据，并简单地传递一个 true，它将继续通过`Where`过滤器。
*   用于仅触发一次通知，`Take`无论它来自`StartWith`，因为对象已经加载，或者`Select`加载完成时的事件（通过 ）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T05:57:01.780

如果您是 Rx 新手，并且需要了解每个操作员的工作内容，您可以尝试[Rx Sandbox](http://mnajder.blogspot.in/2010/03/rxsandbox-v1.html) - 它使用旧版本的 Rx，但您可能可以先从 v1 学习，然后再转到 v2。它允许您可视化并尝试流上的组合器，将结果显示为[大理石图](http://rxwiki.wikidot.com/marble-diagrams)。

这是`Zip`运算符的表示。

![Rx Marble 图表查看器](../Images/3fa3a216ad1a06adb9570e03a155bcdf.png)

很容易看出它将两个流中的两个值配对。

调试序列的一种简单方法是`Do`在两者之间使用运算符，如下所示：

```
 static IObservable<T> Log<T>(this IObservable<T> stream, string name)
    {
        return stream.Materialize()
                     .Do(n => Console.WriteLine("{0} - {1}",name, n))
                     .Dematerialize();
    } 
```

例子：

```
 Observable.Interval(TimeSpan.FromSeconds(0.5))
                  .Log("Timer")
                  .Where(i => i % 2 == 0)
                  .Log("Where")
                  .Sample(TimeSpan.FromSeconds(2))
                  .Log("Sample")
                  .Take(1)
                  .Log("Take")
                  .Subscribe(); 
```

您可以看到沿管道传播的每个值：

```
Timer - OnNext(0)
Where - OnNext(0)
Timer - OnNext(1)
Timer - OnNext(2)
Where - OnNext(2)
Timer - OnNext(3)
Sample - OnNext(2)
Take - OnNext(2)
Take - OnCompleted() 
```

# java - 如何在文本字段中设置下一行

> ID：12750032
> 
> 赞同：2
> 
> 时间：2012-10-05T16:06:12.950
> 
> 标签：java, user-interface, javafx

所以我创建了一个与 Gui 的聊天，其中包含一些男人的图片，这些男人的上方有一个文本字段，其中包含该人聊天的文本。

这是迄今为止我创建的最困难的项目，我为我的成就感到非常自豪我已经为我的聊天客户端创建了一个多线程服务器和协议比文本字段的大小 :) 但是现在我有另一个问题，当文本字段调整大小时，它只调整宽度，因为我的文本字段没有改变行

我创建了以下代码来尝试更改行，但它似乎不起作用任何人都可以帮助我吗？

```
Send.setOnAction(new EventHandler<ActionEvent>() {

        @Override
        public void handle(ActionEvent event) {

            String x = textField_chat.getText();
            if (x.length() > 10) {
                String oldLine = x.substring(0,5);

             String newLineString = x.substring(5,x.length());
             txt_ChatPerson1.setText(oldLine+"\n"+newLineString);
            }else {

            textField_chat.setText("");
            txt_ChatPerson1.setVisible(true);
            txt_ChatPerson1.setText(x);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T06:23:15.610

请改用[TextArea](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TextArea.html)。

来自它的 javadoc 的 TextArea 描述：

> 文本输入组件，允许用户输入多行纯文本。与以前的 JavaFX 版本不同，TextArea 控件不支持单行输入，但这是 TextField 控件的唯一用途。此外，如果您想要一种形式的富文本编辑，还有 HTMLEditor 控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:11:44.680

我在这里在黑暗中拍摄，但如果您在 Windows 上运行它，则换行符是“\r\n”。

试试这个：

```
txt_ChatPerson1.setText(oldLine+"\r\n"+newLineString); 
```

# javascript - 在每个浏览器中加载 html5shiv 是否有任何不利的副作用？

> ID：12750035
> 
> 赞同：6
> 
> 时间：2012-10-05T14:47:14.423
> 
> 标签：javascript, html, browser

在[*html5shiv* Google 代码页面上](http://code.google.com/p/html5shiv/)，示例用法包括一个 IE 条件：

```
<!--[if lt IE 9]>
    <script src="dist/html5shiv.js"></script>
<![endif]--> 
```

但是在[*html5shiv* github 页面上](https://github.com/aFarkas/html5shiv)，描述解释了：

> 该脚本是在旧版 Internet Explorer 中启用 HTML5 分段元素的事实上的方式，以及在 Internet Explorer 6-9、**Safari 4.x**（和**iPhone 3.x**）和**Firefox 3.x**中启用默认 HTML5 样式。

明显的矛盾。所以为了满足我的好奇心，对于任何研究过代码的人来说，在每个浏览器中加载*html5shiv*是否有任何不利影响（没有 IE 条件）？

编辑：显然，我的目标是在没有 IE 条件的情况下使用 shiv。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T16:36:27.537

我认为 googlecode 页面上的条件注释（可能在一年多前更新）是因为 IE8 及以下版本需要一个[javascript 技巧](http://ejohn.org/blog/html5-shiv/)来允许HTML5 元素的*css 样式*。

FF4、Safari 4、Opera 11 及更低版本默认不适`display:block`用于“未知”元素，但您只需[重置 CSS](http://meyerweb.com/eric/tools/css/reset/)即可更改此行为。

html5shiv 在这些浏览器上所做的只是`<style>`在 的开头添加一个`<head>`，类似于这个：

```
article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section {
    display: block;
} 
```

来源： http: [//meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

所以，它***不应该***产生任何副作用，因为这些规则可以被连续的声明覆盖。

只要您在主 CSS 文件顶部添加该规则，就可以有条件地仅在 IE 中包含 html5shiv，您将保存一个 http 请求。

~~如果您希望您的 html5 网站也与 FF2 兼容（如果是这样，您就是个疯子），[请查看本教程](http://html5doctor.com/how-to-get-html5-working-in-ie-and-firefox-2/)。~~

OP 发现 html5shiv 已经为 FF2 提供了一个后备！

# c# - 仅从字符串的开头和结尾删除非字母数字字符

> ID：12750038
> 
> 赞同：4
> 
> 时间：2012-10-05T16:06:23.900
> 
> 标签：c#, regex

我正在尝试使用帮助程序 exe (C#) 清理一些数据。

我遍历每个字符串，我想从字符串的开头和结尾删除无效字符，即从`$$$helloworld$$$`.

使用这个正则表达式可以正常工作：`\W`.

但是，中间包含无效字符的字符串应该单独保留，即`hello$$$$world`很好，我的正则表达式不应该匹配这个特定的字符串。

所以本质上，我试图找出匹配字符串开头和结尾的无效字符的语法，但将包含无效字符的字符串留在其正文中。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T16:09:23.870

这样做！

```
(^[\W_]*)|([\W_]*$) 
```

这`regex`表示在 start() 处匹配零个或多个非单词字符`^`或`|`在 end() 处匹配 ( `$`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:09:44.960

以下应该有效：

```
^\W+|\W+$ 
```

`^`并且`$`分别是字符串开头和结尾的锚点。中间`|`是 OR，所以这个正则表达式的意思是“要么匹配字符串开头的一个或多个非单词字符，要么匹配字符串末尾的一个或多个非单词字符”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T16:10:59.670

使用 ^ 匹配字符串的开头，使用 $ 匹配字符串的结尾。[C# 正则表达式备忘单](http://www.mikesdotnetting.com/Article/46/CSharp-Regular-Expressions-Cheat-Sheet)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T16:11:01.807

试试这个，

```
 (^[^\w]*)|([^\w]*$) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T16:11:41.410

使用 ^ 匹配 'beginning of line' 和 $ 匹配 'end of line'，即你的代码应该匹配并删除 ^\W* 和 \W*$

# php - 如何在textarea中显示新行？

> ID：12750040
> 
> 赞同：0
> 
> 时间：2012-10-05T16:06:26.273
> 
> 标签：php, textarea

我正在从 textarea 向 MySQL 数据库添加文本。所有换行符都转换为 \r\n 我可以使用以下 scipt 在 html 中正确显示新行：

```
function solver_nl2br($e){
  $output = str_replace("\\r\\n", "<br/>", $e);
  return $output;
} 
```

但是当我试图在 textarea 中编辑文本时，我所能看到的只是`\r\n`新行。

我可以使用什么功能在 textarea 中显示换行符而不是换行符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:54:02.357

试试这个，

```
 $output = nl2br(htmlenitites($e)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T16:08:38.543

使用本机功能`nl2br()`。它将捕获更多情况：（\r\n、\n\r、\n 和 \r）。仅供参考：新行 PHP_EOL 也有常量。您希望您的代码尽可能在 Windows 或 Linux 上运行良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T16:08:08.040

试试这个：

```
$output = str_replace("\\r\\n", "\n", $e); 
```

# powershell - Powershell 为所有应用程序池设置 ManagedPipeline

> ID：12750043
> 
> 赞同：8
> 
> 时间：2012-10-05T16:06:43.507
> 
> 标签：powershell, iis-7

我有一个可以列出机器上所有应用程序池的命令：

```
 Get-WmiObject -namespace "root/MicrosoftIISv2" -class IIsApplicationPool |Select-Object -property @{N="Name";E={$name = $_.Name; $name.Split("/")[2] }} | Format-Table 
```

我想在盒子上设置每个应用程序池的托管管道。我试过这个：

```
Get-WmiObject -namespace "root/MicrosoftIISv2" -class IIsApplicationPool |Select-Object -property @{N="Name";E={$name = $_.Name; $name.Split("/")[2] }} | ForEach-Object {cmd /c "c:\windows\system32\inetsvr\appcmd.exe set apppool $name /managedPipleineMode:"Classic"'} 
```

这给了我一个“找不到指定的路径”错误。有什么想法我可以如何工作吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-06-06T20:56:31.787

为了设置 Managed Pipeline 模式（或 AppPool 的任何属性），您需要使用 Set-ItemProperty。但它比这更有趣：

1.  Set-ItemProperty 将 Path 作为其输入。Get-ChildItem 将返回一个`ConfigurationElement`对象集合，而不是路径字符串。
2.  ManagedPipelineMode 在内部存储为整数，因此您必须知道要传入的正确“魔术”数字。幸运的是，这在[此处](http://msdn.microsoft.com/en-us/library/ms690608)的“备注”部分中有记录。

这对我有用：

```
Import-Module WebAdministration
Get-ChildItem IIS:\AppPools |
    Select-Object -ExpandProperty PSPath |
    ForEach-Object { Set-ItemProperty $_ ManagedPipelineMode 1 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-25T19:49:29.297

遵循[文档](https://docs.microsoft.com/en-us/iis/manage/powershell/powershell-snap-in-making-simple-configuration-changes-to-web-sites-and-application-pools#changing-site-and-apppool-settings)：

```
$iisAppPoolName = "MyPool"
$appPool = New-WebAppPool -Name $iisAppPoolName  
$appPool.managedPipelineMode = "Classic"
$appPool |Set-Item 
```

我测试过，IIS 8.0，Windows server 2012，它可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T16:20:49.090

如果您使用的是 Powershell V2，我会使用 WebAdministration 模块，例如从提升的提示符中：

```
Import-Module WebAdministration
Get-ChildItem IIS:\AppPools | Foreach {$_.ManagedPipelineMode = 'Classic'} 
```

# php - 如何从 symfony2/php 中的字符串创建 DateTime 对象

> ID：12750050
> 
> 赞同：15
> 
> 时间：2012-10-05T16:07:19.390
> 
> 标签：php, datetime, symfony

在数据库表中，我有几个字段`datetime`类型为字段。所以我只需要将数据保存为日期时间对象。

从表格中我得到日期时间作为字符串

```
2012-10-05 17:45:54 
```

现在，当我坚持我的实体时，我会收到以下错误：

> 致命错误：在第 44 行的 ..\DateTimeType.php 中对非对象调用成员函数 format()

我试过了

```
$protocol->setStartedAt(strtotime($post['started_at'])); 
```

或者

```
$from = \DateTime::createFromFormat('yy-mm-dd hh:mm:ss', $post['started_at']);
$protocol->setStartedAt($from); 
```

要不就

```
$from = new \DateTime($post['started_at']);
$protocol->setStartedAt($from); 
```

最后一个代码有效，但它不使用作为参数传递的时间戳，而只是获取当前时间。

有任何想法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-06T15:07:44.690

我总是`DateTime`用它的构造函数创建一个对象，在你的情况下它是：

```
$protocol->setStartedAt(new \DateTime($post['started_at'])); 
```

如果这有效但不使用发布的时间戳，您可能没有`$post['started_at']`. 尝试调试它或只是做肮脏的把戏：

```
die($post['started_at']); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-06-18T09:12:27.747

为了将来**肯定**有一天会遇到这个问题的读者（这是第一篇，如果你用谷歌搜索“symfony 2 datetime from string”），请记住，在 Symfony 2 中，DateTime 对象不接受具有该格式的字符串：`"d/m/Y H:i:s"`，并且可能也不支持许多其他人。

为了不**生气**，我实际上发现避免此类错误的最简单和最安全的解决方案是：

首先，从您正在执行的任何类型的请求中获取您的日期**字符串**（在我的情况下是一个通用 AJAX 请求）并将其转换为**DateTime 对象**，此示例假设我们需要创建一个 dateTime 对象`25/04/2015 15:00`，这是jQuery UI 意大利语 DateTimePicker（这只是一个例子）：

```
$literalTime    =   \DateTime::createFromFormat("d/m/Y H:i","25/04/2015 15:00"); 
```

（注意：使用`\`php 的 DateTime 对象，否则你将使用 Symfony 的 datetime 对象，这会抛出异常）

然后，一旦你这样做了，使用舒适**格式函数创建一个****日期字符串**，方法是为第一个参数提供预期的输出格式（）：**`Y-m-d H:i:s`**

 **```
$expire_date =  $literalTime->format("Y-m-d H:i:s"); 
```

通过这种方式，您可以 100% 确定您传递或接收的任何格式都将被正确转换，并且您不会从 DateTime symfony 对象中获得任何类型的异常，**只要您提供您所期望的作为输入**。

知道这篇文章实际上已经很老了，所以我才决定发布它，因为我没有找到任何其他有价值的来源，除了这个来了解问题可能出在哪里。

请注意，最好的解决方案仍然是以正确的格式发送日期时间字符串，但如果您确实无法做到这一点，那么转换此类字符串的最安全方法就是上述方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T16:14:39.763

createFromFormat 怎么样？

[http://uk.php.net/manual/en/datetime.createfromformat.php](http://uk.php.net/manual/en/datetime.createfromformat.php)

```
$from = DateTime::createFromFormat($post['started_at'], 'Y-m-d H:i:s'); 
```**

# ios - 将属性分配给 ALAsset 的最佳方法？

> ID：12750051
> 
> 赞同：0
> 
> 时间：2012-10-05T16:07:24.383
> 
> 标签：ios, macos, properties, alasset

将属性分配给现有类的最佳方法是什么？

我有一个现有的 ALAssets 数组，并且想为每个资产分配一个布尔值作为属性。我可以子类化，但是我必须将每个 ALAsset 复制到一个新的（？）我不能创建一个类别，因为我需要将该布尔值存储在某个地方。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:48:21.243

> 从 OS X v10.6 开始可用的关联引用模拟将对象实例变量添加到现有类。使用关联引用，您可以在不修改类声明的情况下向对象添加存储。

[关联参考文档 (developer.apple.com)](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocAssociativeReferences.html)

# php - 为什么 jquery ajax 去 url 而不是加载它？

> ID：12750054
> 
> 赞同：1
> 
> 时间：2012-10-05T16:07:26.767
> 
> 标签：php, jquery, ajax

这段代码到底是怎么回事？

```
 $(".submit").click(function(){
    alert("clicked");
    var name = $(".name").val();
    var email = $(".email").val();
    var comment = $(".comment").val();
    var articleId = $(".articleId").val(); 
    var dataString = 'name='+ name + '&email=' + email + '&comment=' + comment+ '&articleId=' + articleId;
    if(name=='' || comment==''){
        alert('Please Give Valid Details');
    }
    else{
        alert('so far so good');
        $.ajax({
            type: "POST",
            url: "../_includes/process.php",
            data: dataString,
            cache: false,
            success: function(){
                alert("succes");
                $(".updating").fadeIn(400);
            }
        });
    }
}); 
```

一切正常，直到`$.ajax`找到 process.php，而不是读取和执行代码，而是实际转到浏览器中的该页面。我尝试`return false`在 ajax 调用之后使用，但是 process.php 中的代码永远不会发生。

这是process.php

```
 <?php 
    // code to establish connection first

    if($_POST){
    $name=$_POST['name'];
    $name=mysql_real_escape_string($name);

    $email=$_POST['email'];
    $email=mysql_real_escape_string($email);

    $comment=$_POST['comment'];
    $comment=mysql_real_escape_string($comment);

    $articleId=$_POST['articleId']; 
    $articleId=mysql_real_escape_string($articleId);

    if(!empty($email)){
            $lowercase = strtolower($email);
    }

    $result = mysql_query("INSERT INTO comments(name,email,comment,articleId) VALUES ('$name','$email','$comment','$articleId')");

    if($result){
            echo "success";
    } else {
            echo "there were erros" . mysql_error();
    }
    exit;

    ?> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T16:10:15.733

您必须阻止提交按钮的默认操作：

```
$(".submit").click(function(e) {
    e.preventDefault();
    alert("clicked");
    ...
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T16:35:57.210

如果你想知道它工作正常，你需要从 process.php 中回显一些东西。

例如

```
echo 'success';
exit; // just incase 
```

然后在你的ajax请求中

```
success: function(response){
            if (response == 'success') {
                alert("success");
                $(".updating").fadeIn(400);
            }
            else {
                alert('error');
            }
        } 
```

即使您没有回显，process.php 应该仍然可以工作。

如果仍然无法正常工作，请尝试打开错误报告：

```
error_reporting(E_ALL);
ini_set('display_errors', 'On'); 
```

# javascript - Escape 键停止加载 Web 应用程序

> ID：12750058
> 
> 赞同：0
> 
> 时间：2012-10-05T16:07:39.053
> 
> 标签：javascript, internet-explorer, internet-explorer-8

嗨，我们在 Web 应用程序中遇到了转义键的问题。如果用户按下退出键，Web 应用程序将停止加载。我尝试使用所有这些（onkeydown 和 onkeyup）

```
document.attachEvent("onkeydown", win_onkeydown_handler);
window.attachEvent("onkeydown", win_onkeydown_handler);
window.document.attachEvent("onkeydown", win_onkeydown_handler); 
```

我无法在我的 Web 应用程序中检测到转义（**KeyCode=27**）.. 但我能够检测到刷新、f5 和所有其他键

**注意：我在 IE 中遇到这个问题**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:57:16.860

这有助于我防止在 iframe 中转义

```
function disableEscapeAndRefresh(){
try{
    if(window.frames && window.frames[0]){
        window.frames[0].focus();
        for (var i_tem = 0; i_tem < window.frames.length; i_tem++){
            if(document.all && document.body.filters)
                window.frames[i_tem].document.onkeydown = new Function("var e=window.frames["+i_tem+"].event; if(e.keyCode==116){e.keyCode=0;alert('Refresh Not Allowed');return false;}if(e.keyCode==27){e.keyCode=0;alert('Escape Not Allowed');return false;};");
        }
    }
}catch(e){

}
} 
```

**在 iframe onload 中调用此方法**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:43:49.950

假设您的目标是已`attachEvent`启用的 IE 版本，您可以使用它来检测正在按下的转义键。事件的处理是防止默认事件行为的常用代码，尽管这可能不适用于取消页面下载，因为这可能被视为安全漏洞（想象一下想要阻止用户取消恶意下载的不道德的开发人员):

```
document.attachEvent('onkeydown', function(){
  if(window.event.keyCode == 27) {
    window.event.returnValue = false; 
    window.event.cancelBubble = true;
  }
}); 
```

[http://jsfiddle.net/steveukx/LJHs8/](http://jsfiddle.net/steveukx/LJHs8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T16:12:33.850

我不认为有任何方法可以捕获它......这相当于单击 X 停止页面加载。

# java - Java 覆盖 equals 和 hashCode 建议

> ID：12750059
> 
> 赞同：1
> 
> 时间：2012-10-05T16:07:41.087
> 
> 标签：java

我想尝试在我正在创建的大量对象上覆盖 equals/hashCode，并使用 Java 1.7 开发一个接口/实用程序类来执行此操作。由于我不确定这种方法将如何执行，我将不胜感激任何反馈。我主要关心的是使用原始类型的自动装箱以及我将采取什么样的性能影响。

界面：

```
public interface Hashable {

/**
 * Return the base offset for the {@link Object#hashCode()}, this number
 * should be unique and odd;
 * 
 * @return int
 */
public int getBaseOffset();

/**
 * Return the base offset for the class fields{@link Object#hashCode()},
 * this number should be unique and odd;
 * 
 * @return int
 */
public int getFieldOffset();

/**
 * Return an {@link Object} array of the fields to use for
 * {@link Object#equals(Object)} and {@link Object#hashCode()}
 * 
 * @return {@link Object} array
 */
public Object[] getHashFields();
} 
```

实用程序类：

```
public class HashUtil {

    /**
     * This method will create a hash code based on the
     * {@link Hashable#getHashFields()}. If the object is immutable this method
     * only needs to be called once through lazy initialization, otherwise the
     * class can call out to it through the {@link Object#hashCode()} override.
     * <p>
     * <b>Example:</b>
     * 
     * <pre>
     * public int hashCode() {
     *     return HashUtil.createHash(this);
     * }
     * <p>
     * @param hashable
     *            {@link Object} implementing {@link Hashable} interface
     * @return int
     * to use for hash code
     */
    public static int createHash(Hashable hashable) {
        HashCodeBuilder builder = new HashCodeBuilder(hashable.getBaseOffset(), hashable.getFieldOffset());

        for (Object o : hashable.getHashFields()) {
            if (o != null) {
            builder.append(o);
            }
        }
        return builder.toHashCode();
    }

    /**
     * Evaluates whether two {@link Hashable} objects are equal. This method is
     * intended for use when overriding {@link Object#equals(Object)}.
     * <p>
     * <b>Example:</b>
     * 
     * <pre>
     * public boolean equals(Object o) {
     *     return HashUtil.equals(this, o);
     * }
     * <p>
     * @param h1 first {@link Hashable} to compare
     * @param h2 second {@link Hashable} to compare
     * @return true if they are equal
     */
    public static boolean equals(Hashable h1, Hashable h2) {
        if (h1.getHashFields() == null || h2.getHashFields() == null) {
            if (!(h1.getHashFields() == null && h2.getHashFields() == null)) {
            return false;
            }
            return true;
        }
        if (h1.getHashFields().length != h2.getHashFields().length) {
            return false;
        }
        EqualsBuilder builder = new EqualsBuilder();
        for (int x = 0; x < h1.getHashFields().length; x++) {
            Object o1 = h1.getHashFields()[x];
            Object o2 = h2.getHashFields()[x];
            builder.append(o1, o2);
        }
        return builder.isEquals();
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T16:10:44.787

相信我。不要写你自己的散列/等于逻辑。

使用已经可用且经过测试的代码，例如 Apache [EqualsBuilder](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/builder/EqualsBuilder.html)和[HashCodeBuilder](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/builder/HashCodeBuilder.html)

例如：

```
public int hashCode() {
     // you pick a hard-coded, randomly chosen, non-zero, odd number
     // ideally different for each class
     return new HashCodeBuilder(17, 37).
       append(name).
       append(age).
       toHashCode();
   }

public boolean equals(Object obj) {
   // do you basic object check first
   // then delegate to equalsbuilder
   MyClass rhs = (MyClass) obj;
   return new EqualsBuilder()
                 .append(name, rhs.name)
                 .append(age, rhs.age)
                 .isEquals();
  } 
```

# api - 亚马逊 s3 存储桶策略中的主体无效

> ID：12750065
> 
> 赞同：20
> 
> 时间：2012-10-05T16:07:55.457
> 
> 标签：api, amazon-s3, amazon-web-services

我正在尝试在 Amazon S3 控制台中创建新的存储桶策略并收到错误

> 策略中的委托人无效 - “AWS”：“my_username”

我主要使用的用户名是我的默认存储桶受让人。

我的政策

```
{
  "Id": "Policy14343243265",
  "Statement": [
    {
      "Sid": "SSdgfgf432432432435",
      "Action": [
        "s3:DeleteObject",
        "s3:DeleteObjectVersion",
        "s3:GetObject",
        "s3:GetObjectVersion",
        "s3:GetObjectVersionAcl",
        "s3:PutObject",
        "s3:PutObjectAcl",
        "s3:PutObjectVersionAcl"
      ],
      "Effect": "Allow",
      "Resource": "arn:aws:s3:::my_bucket/*",
      "Principal": {
        "AWS": [
          "my_username"
        ]
      }
    }
  ]
} 
```

我不明白为什么我会收到错误消息。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-05T16:14:08.023

如错误消息所述，您的委托人不正确。查看[有关指定主体的 S3 文档](http://docs.amazonwebservices.com/AmazonS3/latest/dev/UsingResOpsConditions.html#specifyingPrincipals)以了解如何修复它。从[示例策略](http://docs.amazonwebservices.com/AmazonS3/latest/dev/AccessPolicyLanguage_UseCases_s3_a.html)中可以看出，它需要类似于`arn:aws:iam::111122223333:root`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2020-05-21T23:52:30.250

我在 S3 Bucket 策略生成器中也遇到了同样的错误。事实证明，现有策略之一的主体已被删除。问题不在于正在添加的策略。

在这种情况下，要发现错误的策略，您可以查找在 ARN 中没有账户或角色的委托人。

所以，而不是看起来像这样：

```
"Principal": {
    "AWS": "arn:aws:iam::123456789101:role/MyCoolRole"
} 
```

它看起来像这样：

```
"Principal": {
    "AWS": "ABCDEFGHIJKLMNOP"
} 
```

因此，它不是正确的 ARN，而是像**ABCDEFGHIJKLMNOP**这样的字母数字键。在这种情况下，您将需要确定错误主体存在的原因，并且很可能会修改或删除它。希望这会对某人有所帮助，因为我很难找到它，而且我没有找到任何文件来表明这一点。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-11-08T21:53:50.270

更好的解决方案：

1.  创建允许访问存储桶的 IAM 策略
2.  将其分配给一个组
3.  将用户放入该组

您可以定义“这些是可以触摸这个的人”，而不是说“允许此用户触摸此存储桶”。

现在听起来很傻，但是等到您再添加 42 个存储桶和 60 个用户。拥有一个管理所有资源访问的中心点将节省一天的时间。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-06-04T18:46:26.940

Principal 的值应该是 user arn，您可以通过单击 IAM 中的用户名在 Summary 部分中找到它。这是因为特定用户可以绑定 S3 Bucket Policy 在我的情况下，它是 arn:aws:iam::332490955950:user/sample ==> sample 是用户名

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-21T10:03:16.860

当我尝试在同一个**CloudFormation**堆栈中创建存储桶、存储桶策略和委托人（IAM 用户）时，我收到了相同的错误消息。虽然我可以看到 CF 在开始创建存储桶策略之前就完成了 IAM 用户的创建，但堆栈部署失败了。向 BucketPolicy 资源添加一个`DependsOn: MyIamUser`为我修复了它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-13T00:41:49.357

## 为什么我在尝试更新我的 Amazon S3 存储桶策略时收到错误“策略中的委托人无效”？

### 问题

我正在尝试使用 Web 控制台、awscli 或 terraform（等）添加或编辑我的 Amazon Simple Storage Service (Amazon S3) 存储桶的存储桶策略。但是，我收到错误消息`"Error: Invalid principal in policy."`如何解决此问题？

### 解析度

当您的**存储桶策略**中的**[Principal](https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements_principal.html)****值无效**`"Error: Invalid principal in policy"`时，您会收到。要修复此错误，请查看存储桶策略中的 Principal 元素。检查他们是否使用以下受支持的值之一：

 *****   **AWS Identity and Access Management (IAM) 用户或角色的 Amazon 资源名称 (ARN)** -- **注意：**要查找 IAM 用户的 ARN，请运行`[aws iam get-user][2]`命令。要查找 IAM 角色的 ARN，`[aws iam get-role][2]`请运行命令或直接从您的账户 Web 控制台 UI 中的 IAM 服务中检查它。
*   **AWS[账户 ID](https://docs.aws.amazon.com/IAM/latest/UserGuide/console_account-alias.html#FindingYourAWSId)**
*   **`"*"`代表所有用户的字符串**

此外，请查看策略中的 Principal 元素并检查它们的格式是否正确。如果 Principal 是一个用户，则元素必须采用以下格式：

```
"Principal": {
    "AWS": "arn:aws:iam::AWS-account-ID:user/user-name1"
  } 
```

如果 Principal 是多个用户但不是所有用户，则元素必须采用以下格式：

```
"Principal": {
                "AWS": [
                  "arn:aws:iam::AWS-account-ID:user/user-name1",
                  "arn:aws:iam::AWS-account-ID:user/user-name2"
                ]
            } 
```

如果 Principal 是所有用户，则元素必须采用以下格式：

```
{
  "Principal": "*"
} 
```

如果您发现无效的 Principal 值，则必须更正它们，以便您可以保存对存储桶策略的更改。

### 加分！

*   [AWS 策略生成器](https://awspolicygen.s3.amazonaws.com/policygen.html)
*   [存储桶策略示例](https://docs.aws.amazon.com/AmazonS3/latest/dev/example-bucket-policies.html)

* * *

**参考链接：** [https ://aws.amazon.com/premiumsupport/knowledge-center/s3-invalid-principal-in-policy-error/](https://aws.amazon.com/premiumsupport/knowledge-center/s3-invalid-principal-in-policy-error/)****

# jquery - Jquery DataTables 过滤器插件 - 如何填充过滤器从数据库动态获取数据

> ID：12750067
> 
> 赞同：0
> 
> 时间：2012-10-05T16:07:57.213
> 
> 标签：jquery, asp.net-mvc-3, datatables

我下载了 Jquery 数据表和 Jquery DataTable.Filter 插件。

这是我正在处理的代码。

```
var oTable = $('#myDataTable').dataTable({
        "bServerSide": true,
        "sAjaxSource": "/User/DataProviderAction",
        "bJQueryUI": true
    });

    oTable.columnFilter({ sPlaceHolder: "head:before",
        aoColumns: [{ type: "select", values: ["Box Office", "Concessions"] },
                    { type: "select",values: ["Administrator","Sales People"]},
                    {type: "text"}

                    ]
    }); 
```

问题：我将如何让它从数据库中加载值，而不是硬编码 aoColumns 中的值。我正在使用 MVC。如果有帮助，我确实在我的存储库中设置了返回字符串值的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T08:11:20.697

您可以通过执行 jquery ajax 调用然后将 Javascript 变量设置为可在数据表中使用的响应值，从控制器中检索数据库值。我在下面有一个伪示例。你的控制器会返回一个 Json 响应，它可能是一个模型：

```
YourModel model = new YourModel();
model.DBList1 = SomeValue;
model.DBList2 = SomeOtherValue;
return Json(model); // Use return Json(model, JsonRequestBehavior.DenyGet); if you want to limit access to post only. 
```

如果您从 ajax 调用执行 Post，请记住在 Controller Action 中包含 [HttpPost] 属性。

```
$(document).ready(function () {

var List1;
var List2;

$.ajax({
    type: "POST",
    url: "Controller URL",
    contentType: "application/json; charset=utf-8",
    ...
    ...
    success: function(response) {
    List1 = response.DBList1;
    List2 = response.DBList2;
    }
});

var oTable = $('#myDataTable').dataTable({ 
    "bServerSide": true, 
    "sAjaxSource": "/User/DataProviderAction", 
    "bJQueryUI": true 
    }); 

    oTable.columnFilter({ sPlaceHolder: "head:before", 
    aoColumns: [{ type: "select", values: List1 }, 
                { type: "select",values: List2 }, 
                {type: "text"} 

                ] 
    }); 

}); 
```

# linux - 使用 bash 脚本重命名 xml 文件扩展名

> ID：12750069
> 
> 赞同：0
> 
> 时间：2012-10-05T16:08:02.323
> 
> 标签：linux, bash, shell

我有一个包含许多文件夹的目录，每个文件夹都包含一个 XML 文件列表。如果文件大小大于 65Mb，我正在编写一个遍历文件并将文件的扩展名重命名为“手动”的 bash 脚本。这是我第一次编写 shell 脚本，我能够编写遍历文件的代码，但我在重命名部分遇到了困难。

```
for file in $dir
do
   size=$(stat -c%s "$file")
   if test "$size" -gt "68157440"; then
      echo "Before Renaming...."
      echo $file
      echo "After renaming"
      mv *.manual `basename $file`.xml
      echo $file
   else 
      echo $file >> outlog.log
   fi
done 
```

$file 的一个例子是，

```
/apps/jAS/dev/products-app/BConverter/data/supplier-data/TF/output/Fiber Optics and Fiber Management Solutions/Fiber Optic Cable Assemblies.xml 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:12:34.990

你到底遇到了什么*困难*？

如果文件名中有空格，请尝试

```
mv *.manual `basename "$file"`.xml 
```

`*.manual`请注意，如果扩展为多个文件名，您的脚本将不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T16:14:00.287

```
mv *.manual `basename $file`.xml 
```

如果要更改`$file`from的扩展名`xml`to `manual`，请改为

```
mv "$file" "${file%.xml}".manual 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T16:14:41.923

不需要为此编写脚本，结合`find`并`xargs`应该可以解决问题：

```
find . -size +65M  | xargs -IQ mv Q Q.manual 
```

`-I`Xargs很少使用的选项：

1.  将每个输入作为单独的命令运行，并且
2.  允许您替换文件名，因此您可以多次使用它，非常适合 mv

# jquery - jQuery 工具验证器和不适用的选择选项

> ID：12750074
> 
> 赞同：0
> 
> 时间：2012-10-05T16:08:15.703
> 
> 标签：jquery, validation, jquery-tools

我正在使用 jquery 工具验证器插件来验证表单输入。我在 for m 中有一个需要验证的选择框，但如果选择了“不适用”选项，我需要忽略验证。

```
<select id="state" required="required">
<option value="">Select One</option>
<option value="">*Not applicable</option> 
```

如果值为空，它将很好地验证，但我将如何设置规则以从验证中排除 Not Applibale 选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T16:14:32.843

您应该以编程方式进行验证工作：

```
if(jQuery("#state option:selected").text() !== "*Not applicable") {
    // validate
} 
```

# wordpress - 关于主题更改的 Wordpress HTTP 500

> ID：12750076
> 
> 赞同：0
> 
> 时间：2012-10-05T16:08:25.563
> 
> 标签：wordpress, themes, init

我只是：

1.  将远程 wp 网络安装移动到本地（mamp）。一切都很好。
2.  安装了一个新主题。一切都很好。
3.  激活新主题。哦！

我开始浏览代码，我发现它没有修复它，但至少我得到了一个不错的放松空白白页，如果我从**wp-settings中删除 *do_action('init');* .php** _

我用谷歌搜索了一会儿，我发现“*您的问题可能是 wp_cron 被 init 调用。在 2.1 及更高版本中，cron 进程是从外部调用的，所以可能是您的问题的一件事是 DNS 解析无法在您的网络服务器上运行找到它自己的地址。*”……我不知道这是否是我问题的正确答案，我应该怎么做才能解决这一切？

泰！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:41:20.437

要确定实际错误是什么，您需要打开调试。为此，将以下行添加到您的`wp-config.php`文件中：

```
define('WP_DEBUG', true); 
```

然后它应该开始吐出大量关于错误是什么的文本数据。这很可能是由于新主题中的编码问题（错误的函数调用、缺少结束标记等）或您的实时站点与 MAMP 设置之间的配置差异导致的 PHP 错误。

有关 WordPress 调试的更多信息，请参阅[http://codex.wordpress.org/Debugging_in_WordPress](http://codex.wordpress.org/Debugging_in_WordPress)。

# html - 点击后如何使用phonegap缓存页面？

> ID：12750085
> 
> 赞同：0
> 
> 时间：2012-10-05T16:09:14.383
> 
> 标签：html, cordova

我开始使用 PhoneGap 开发移动应用程序。首先，我制作了 2 个名为 index.html 和 place.html 的 .html 文件

在 index.html 中，我使用 $.get() 方法从 Web 服务获取 json 数据，然后显示在 HTML 标记上。

当用户单击 index.html 页面中的链接时，它将转到 place.html。在 place.html 我放了后退按钮

```
<a href="index.html">Back</a> 
```

返回 index.html 页面。

一个问题是当我单击返回按钮到 index.html 页面时，它会在页面加载时运行 $.get() 方法。

如何缓存 index.html 页面？当我单击后退按钮时，它使用与第一次相同的数据。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:55:35.210

你试过 jQuery 手机吗？

您不必实际合并整个库，而只需使用

```
<div class="home-page" data-role="page" data-dom-cache="true" > 
```

主页容器上的属性。要注意的另一件事是，您的所有页面都需要 data-role="page" 属性才能使 jQM 工作。

默认情况下，jQM 已禁用缓存，您可以在 JavaScript 中启用它，如下所示

```
$.mobile.page.prototype.options.domCache = true; 
```

参考：[关于缓存页面的 jQM 文档](http://jquerymobile.com/demos/1.0rc1/docs/pages/page-cache.html)

# wpf - 如何在 WPF 中将初始化参数传递给 UserControl（使用 MVVM）

> ID：12750086
> 
> 赞同：0
> 
> 时间：2012-10-05T16:09:15.350
> 
> 标签：wpf, mvvm, user-controls, propertychanged

我有一个名为 ActionsTreeView 的 UserControl，我使用 MVVM 实践构建了其中我有一个 IPluginsProvider 接口，用于填充我的 UserControl 中的数据。我希望能够提供一个实现此`IContentProvider`接口的对象作为参数来初始化我的 UserControl 的 ViewModel。

到目前为止，这是我的方法，这是行不通的。我想知道我是否走在正确的道路上？我在我的用户控件中声明了一个`DependencyProperty`对我想要实例化此 UserControl 的 mainWindow 可见的用户控件。此代码只是尝试将 PluginsProvider 对象传递给需要它来构建其 ViewModel 的我的 UserControl。

我的 UserControl 中的 PluginProvider`DependencyProperty`设置器永远不会被击中，因为我的`PropertyChanged`处理程序在 MainWindow.xaml.cs 中始终为空联系？

ActionsTreeView.xaml.cs

```
public partial class ActionsTreeView: UserControl
{
    public static readonly DependencyProperty PluginProviderProperty = DependencyProperty.Register("PluginProvider", typeof(Models.IPluginsProvider), typeof(ActionsTreeView), new FrameworkPropertyMetadata(null, OnPluginProviderChanged));

    private ViewModels.ActionsTreeViewModel vm;

    public ActionsTreeView()
    {
        //Wire-up our ViewModel with the data provider and bind it to DataContext for our user control
        //This is a Mock-up until I figure out a way to get the real provider here

        Models.IPluginProvider pluginSource = new Models.MockPluginProvider();

        vm = new ViewModels.ActionsTreeViewModel(pluginSource );
        this.DataContext = vm;

        InitializeComponent();
    }

    private static void OnPluginProviderChanged(DependencyObject source, DependencyPropertyChangedEventArgs e)
    {
        ((ActionsTreeView)source).PluginProvider = (Models.IPluginsProvider)e.NewValue;
    }

    public Models.IPluginsProvider PluginProvider 
    {
        get
        { 
            return (Models.IPluginsProvider)GetValue(PluginProviderProperty);
        }

        set 
        { 
            SetValue(PluginProviderProperty, value); 
            vm.SetPluginSource(PluginProvider);
        } 
    }... 
```

主窗口.xaml.cs

```
public partial class MainWindow : Window, INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    public MainWindow()
    {
        InitializeComponent();

        this.ActionProvider = new Models.PluginsProvider(Library.Action.AvailableActions);
    }

    private Models.IPluginsProvider _actionProvider;
    public Models.IPluginsProvider ActionProvider
    {
        get { return _actionProvider; }
        set 
        { 
            _actionProvider = value;
            OnPropertyChanged("ActionProvider");
        }
    }
    protected void OnPropertyChanged(string property)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)  //HANDLER IS ALWAYS NULL
        {
            handler(this, new PropertyChangedEventArgs(property));
        }
    }
} 
```

在 MainWindow.xaml 中使用我的 UserControl

```
<Grid>

    <UserControls:ActionsTreeView PluginProvider="{Binding ActionProvider}" />

</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:39:54.367

我认为您不能在 xaml 的 ctor 中传递参数。

如果您在后面的代码中创建控件，则可以在 ctor(Param param) 中传递参数

不确定这是否适合 MVVM 模型，但我在常规代码中经常使用它

在 XAML 中使用框架作为放置 UserControl 的位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-02T09:19:39.787

好像您缺少绑定源

```
<Grid>
    <UserControls:ActionsTreeView PluginProvider="{Binding ActionProvider, RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}" />
</Grid> 
```

由于您的属性`ActionProvider`是在其中声明的，`MainWindow`因此在绑定期间您需要引用相同的源，除非您已将其设置为窗口的数据上下文

如果在 MainWindow 中没有使用其他数据上下文，您也可以执行以下操作，那么您可以使用您拥有的原始绑定`PluginProvider="{Binding ActionProvider}"`

```
public MainWindow()
{
    InitializeComponent();

    this.ActionProvider = new Models.PluginsProvider(Library.Action.AvailableActions);
    DataContext = this;
} 
```

我已经设置了`DataContext`to `this`which 将有效地解决`ActionProvider`来自实例的绑定值`this`

**额外的**

您也可以选择删除`INotifyPropertyChanged`，`MainWindow`因为它已经`DependencyObject`并且能够进行财产通知并声明`DependencyProperty`为 `ActionProvider`

例如

```
 public Models.IPluginsProvider ActionProvider
    {
        get { return (Models.IPluginsProvider)GetValue(ActionProviderProperty); }
        set { SetValue(ActionProviderProperty, value); }
    }

    // Using a DependencyProperty as the backing store for ActionProvider.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty ActionProviderProperty =
        DependencyProperty.Register("ActionProvider", typeof(Models.IPluginsProvider), typeof(MainWindow), new PropertyMetadata(null)); 
```

因此您无需担心手动更改通知，如果上述解决方案不适合您，您可能需要使用它，否则最好拥有。

# objective-c - UIImageView 在 UICollectionViewCell 子类中显示超出范围的图像

> ID：12750094
> 
> 赞同：8
> 
> 时间：2012-10-05T16:09:41.090
> 
> 标签：objective-c, uiimageview, uiimage, ios6, uicollectionview

我必须创建一个自定义 UICollectionViewCell 来显示图像和图像名称，并且在图像顶部，有一个帧图像，其宽度和高度比图像大 2 个像素。但是，无论我做什么，图像似乎都比框架图像大。我对表格视图做了同样的事情，而且效果很好。

这是代码：

```
//GridCell.h

@interface GridCell : UICollectionViewCell
@property(nonatomic, strong) UILabel *lblName;
@property(nonatomic, strong) UIImageView *image;
@end

//GridCell.m

#import "GridCell.h"

@implementation GridCell

@synthesize image, lblName;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code

        UIImage *bg = [UIImage imageNamed:@"borderUIimgLg.png"];

        UIImageView *bgImage = [[UIImageView alloc] initWithFrame:CGRectMake(0.0, 0.0, frame.size.width, frame.size.width)];
        [bgImage setImage:bg];
        [bgImage setContentMode:UIViewContentModeScaleAspectFill];
         NSLog(@"BG Image size %f, %f", bgImage.frame.size.width, bgImage.frame.size.height);

        UIImageView *contentImage = [[UIImageView alloc] initWithFrame:CGRectMake(2.0, 2.0, frame.size.width-4.0, frame.size.width-4.0)];
        [contentImage setContentMode:UIViewContentModeScaleAspectFill];
        [contentImage setClipsToBounds:YES];
        self.image = contentImage;

        [self.contentView addSubview:self.image];

        [self.contentView addSubview:bgImage];

        UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(2.0, frame.size.width, frame.size.width - 4.0, 21.0)];
        [label setFont:[UIFont fontWithName:@"HelveticaNeue-Bold" size:11.0]];
        [label setTextAlignment:NSTextAlignmentCenter];
        [label setBackgroundColor:[UIColor clearColor]];
        self.lblName = label;
        [self.contentView addSubview:self.lblName];
    }
    return self;
} 
```

UICollectionViewCell 的大小为 67 x 100，因此在代码中，bgImage 应始终为 67 x 67，其原点为 (0,0)，而 contentImage 的帧应为 (0,0,63 ,63)。通过调试，它似乎是正确的。但是，conentimage 总是比 bgImage 大。图像的原始尺寸为 80 x 80。我在 cell.ContentView 或 imageView 上尝试了 setClipToBounds、setContentViewMode，但没有一个有效。

附上有关该问题的屏幕截图。![UIImage 视图中的图像超出范围](../Images/9cd0b6e95e11ec4bb201333cc6817572.png)

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-05-30T04:41:27.677

现在可能已经找到答案了，试试：

```
contentImage.clipsToBounds = YES; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T22:33:28.283

您使用的是 frame.size.width 的 2 倍，而不是另一倍的 frame.size.height

编辑，试试这个：

在单元格中，使用 initWithFrame 方法时，使用单元格的 self.bounds 属性。如果您在边框内初始化图像视图，请使用 CGRectInset 方法以较小的边界初始化图像视图并将图像视图中心设置为与单元格的内容视图相同

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T16:57:44.330

尝试将 UIViewContentModeScaleAspectFill 更改为 UIViewContentModeScaleAspectFit。

# c# - 非空属性的空值异常

> ID：12750100
> 
> 赞同：0
> 
> 时间：2012-10-05T16:09:54.420
> 
> 标签：c#, xaml

在不为空的属性上获取 NullValueException

这是 ViewModel 开头的代码，以及创建 ViewModel 对象并打开我正在使用 ViewModelt 的窗口的方法。在 SwitchName 属性上引发了异常。_ciscoswitch.SwitchName 出现为空，因为 SwitchVewModel 中的 _ciscoswitch 为空。在 SwitchBrowser 构造函数中的 InitializeComponent() 处引发异常。查看调试器中的 SwitchVewModel 实例，_ciscoswitch 不为空。我尝试将 SwitchName 访问器更改为使用 CiscoSwitch.switchName 而不是 _ciscoswitch.SwitchName，但仍然失败。

```
class SwitchViewModel : INotifyPropertyChanged
{
      #region Construction
    /// Constructs the default instance of a SwitchViewModel
    public SwitchViewModel()
    {

    }

    public SwitchViewModel(CiscoSwitch cs)
    {
       _ciscoswitch = cs;
    }
      #endregion
    #region Members

    CiscoSwitch _ciscoswitch;
    #endregion

    #region Properties
    public CiscoSwitch CiscoSwitch
    {
        get
        {
            return _ciscoswitch;
        }
        set
        {
            _ciscoswitch = value;
        }
    }

    public string SwitchName
    {
        get { return _ciscoswitch.switchName; }
        set
        {
            if (_ciscoswitch.switchName != value)
            {
               _ciscoswitch.switchName = value;
                RaisePropertyChanged("switchName");
            }
        }
    }
    #endregion

    #region INotifyPropertyChanged Members

    public event PropertyChangedEventHandler PropertyChanged;

    #endregion

    #region Methods

    private void RaisePropertyChanged(string propertyName)
    {
        // take a copy to prevent thread issues
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
    #endregion

}
} 
```

SwitchBrowserWindow 的 XAML 我现在使用的唯一属性是 SwitchName 来尝试使其正常工作

```
<Window x:Class="CiscoDecodeWPF.SwitchBrowser"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:CiscoDecodeWPF="clr-namespace:CiscoDecodeWPF" IsEnabled="{Binding Enabled}"
    Title="SwitchBrowser" Height="500" Width="500" Background="GhostWhite">

<Window.Resources>
    <Style TargetType="{x:Type TreeViewItem}" x:Key="ModuleStyle">
        <Setter Property="Foreground" Value="Blue"/>
        <Setter Property="FontSize" Value="12"/>
    </Style>

    <Style TargetType="{x:Type TreeViewItem}" x:Key="RedModuleStyle" BasedOn="{StaticResource ModuleStyle}">
        <Setter Property="Foreground" Value="Red"/>
    </Style>
</Window.Resources>

<Window.DataContext>
    <CiscoDecodeWPF:SwitchViewModel/>
</Window.DataContext>
<Grid Margin="0,0,-211.4,-168">
    <StackPanel HorizontalAlignment="Stretch" Name="StackPanel1" VerticalAlignment="Stretch" Width="Auto" Margin="0,0,188.6,114">

        <StackPanel.Resources> 
            <Style TargetType="{x:Type Label}" x:Key="LabelStyle">
                <Setter Property="Foreground" Value="Blue"/>
                <Setter Property="FontSize" Value="12"/>
                <Setter Property="FontWeight" Value="Bold"/>
            </Style>
        </StackPanel.Resources>
        <Label Content="Switch Name:" Name="Label1" Height="25" HorizontalAlignment="Left"/>
        <Label Content="Software Version:" Name="Label2" HorizontalAlignment="Left" />
        <Label Content="Model Number:" Name="Label3" HorizontalAlignment="left"/>
        <Label Content="IP Address:" Name="Label4" HorizontalAlignment="left"></Label>
        <Label Content="Serial Number:" Name="Label5" HorizontalAlignment="Left"></Label>
        <Label Content="Show Tech Taken:" Name="Label6" HorizontalAlignment="left"/>
    </StackPanel>
    <StackPanel Margin="105,0,218,489">
        <StackPanel.Resources>
            <Style TargetType="{x:Type Label}" x:Key="LabelStyle">
                <Setter Property="FontSize" Value="12"/>
                <Setter Property="FontWeight" Value="Bold"/>
            </Style>
        </StackPanel.Resources>
        <Label Content="{Binding Path=SwitchName}" Name="SwitchNameLabel" HorizontalAlignment="left"/>
        <Label Content="Version" Name="VersionLabel" HorizontalAlignment="left"/>
        <Label Content="Model" Name="ModelNumberLabel" HorizontalAlignment="Left"/>
        <Label Content="IP" Name="IPAddressLabel" HorizontalAlignment="Left"/>
        <Label Content="Serial" Name="SerialLabel" HorizontalAlignment="Left"/>
            <Label Content="ST" Name="ShowTechLabel" HorizontalAlignment="Left"/>

    </StackPanel> 
```

异常、堆栈跟踪和调用堆栈

```
System.NullReferenceException was unhandled by user code
  HResult=-2147467261
 Message=Object reference not set to an instance of an object.
  Source=CiscoDecodeWPF
StackTrace:
   at CiscoDecodeWPF.SwitchViewModel.get_SwitchName() in 

d:\Projects\CiscoDecodeWPF\CiscoDecodeWPF\SwitchViewModel.cs:line 50 
```

内部异常：

> CiscoDecodeWPF.exe!CiscoDecodeWPF.SwitchViewModel.SwitchName.get() 第 50 行 + 0xf 字节 C# [外部代码] CiscoDecodeWPF.exe!CiscoDecodeWPF.SwitchBrowser.SwitchBrowser(CiscoDecodeWPF.CiscoSwitch cs) 第 35 行 + 0x8 字节 C# CiscoDecodeWPF.exe!CiscoDecodeWPF。 MainWindow.BrowseSwitchMenuItem_Click(object sender, System.Windows.RoutedEventArgs e) Line 1050 + 0x34 bytes C# [外部代码]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T16:17:08.660

试试下面的代码`SwitchName`：

```
 public string SwitchName
{
    get {
         if (_ciscoswitch != null)
         {   
           return _ciscoswitch.switchName;
         }
         else
         {
            return string.empty;
         }
      }
    set
    {
      if (_ciscoswitch != null)
      {
        if (_ciscoswitch.switchName != value)
        {
           _ciscoswitch.switchName = value;
            RaisePropertyChanged("switchName");
        }
      }
    }
} 
```

如果您不想签`_ciscoswitch != null`入，请`SwitchName`放在`DataContext = svm`InitizlizeComponent() 之前

**代码：**

```
public SwitchBrowser(CiscoSwitch cs)
{
    SwitchViewModel svm = new SwitchViewModel(cs);
    DataContext = svm;
    InitializeComponent();
 } 
```

并从中删除以下代码`XAML`。

```
<Window.DataContext>
<CiscoDecodeWPF:SwitchViewModel/>
</Window.DataContext> 
```

希望它应该工作。

# php - php随机mysql数据

> ID：12750102
> 
> 赞同：2
> 
> 时间：2012-10-05T16:10:02.073
> 
> 标签：php, mysql, random

我有一个表中有 6 列的 MySQL 数据库。最终会有大约 100 行，现在我有 3 行。

列标题：FirstName、SecondName、Sentence1、Sentence2、Sentence3、Sentence4

所有表都设置为 VARCHAR

**我想在网页上使用 php 从每一行调用随机数据，例如混合和匹配 row1 FirstName 与 row3 SecondName 和 row2 Sentence1 等。**

我读到使用 php 随机化更快，但尽管搜索，我真的无法掌握如何做到这一点。

我可以连接到我的 MySQL 数据库并使用以下代码获取返回的结果：

```
 <?php
    // Connect to database server
    mysql_connect("localhost", "xxx", "yyy") or die (mysql_error ());
    // Select database
    mysql_select_db("zzz") or die(mysql_error());
    // SQL query
    $strSQL = "SELECT * FROM Users";
    // Execute the query (the recordset $rs contains the result)
    $rs = mysql_query($strSQL);
    // Loop the recordset $rs
    // Each row will be made into an array ($row) using mysql_fetch_array
    while($row = mysql_fetch_array($rs)) {
    // Write the value of the column FirstName (which is now in the array $row)
    echo $row['FirstName'] . "<br />";
      }
    // Close the database connection
    mysql_close();
    ?> 
```

但这只是返回一列数据。我需要使用以下内容在网页中返回随机代码：

```
echo $firstname . $lastname . $sentence1 . $sentence2 . $sentence3 . $sentence4; 
```

请注意，这将在之后再重复 3 或 4 行

```
echo $firstname_2 . $lastname_2 . $sentence1_2 . $sentence2_2 . $sentence3_2 . $sentence4_2; 
```

我对阵列不太感兴趣，但如果有人能让我开始，那就太好了，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T16:18:15.057

所有告诉您在 SQL 查询中使用 rand 的人都没有阅读过这个问题。对于那些人：提问者想要随机组合的行中的数据，而不是随机的行。

像这样的东西。它将从数据库中获取所有结果并回显一个完全随机的组合。我无法避免使用数组，因为它们非常有用。

```
<?php
// Connect to database server
mysql_connect("localhost", "xxx", "yyy") or die (mysql_error ());
// Select database
mysql_select_db("zzz") or die(mysql_error());
// SQL query
$strSQL = "SELECT * FROM Users";
// Execute the query (the recordset $rs contains the result)
$rs = mysql_query($strSQL);
// Array to hold all data
$rows = array();
// Loop the recordset $rs
// Each row will be made into an array ($row) using mysql_fetch_array
while($row = mysql_fetch_array($rs)) {
// add row to array.
$rows[] = $row;
  }
// Close the database connection
mysql_close();

// Max rand number
$max = count($rows) - 1;

// print out random combination of data.
echo $rows[rand(0, $max)][0] . " " . $rows[rand(0, $max)][1] . " " . $rows[rand(0, $max)][2] . " " . $rows[rand(0, $max)][3] . " " . $rows[rand(0, $max)][4] . " " . $rows[rand(0, $max)][5];

?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T16:16:36.610

将要随机显示的所有值存储在变量中，使用 rand() [http://php.net/manual/en/function.rand.php](http://php.net/manual/en/function.rand.php)和 shuffle() [http://php.net/manual/ en/function.shuffle.php](http://php.net/manual/en/function.shuffle.php)制作随机数据并显示它们

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T16:19:42.713

有几种方法可以从 php 中的 db 获取随机数据

```
SELECT * FROM `table` ORDER BY RAND() LIMIT 0,1; 
```

另一种方法：-

```
$range_result = mysql_query( " SELECT MAX(`id`) AS max_id , MIN(`id`) AS min_id FROM    `table` ");
$range_row = mysql_fetch_object( $range_result ); 
$random = mt_rand( $range_row->min_id , $range_row->max_id );
$result = mysql_query( " SELECT * FROM `table` WHERE `id` >= $random LIMIT 0,1 "); 
```

另一种方法：-

```
$offset_result = mysql_query( " SELECT FLOOR(RAND() * COUNT(*)) AS `offset` FROM `table` ");
$offset_row = mysql_fetch_object( $offset_result ); 
$offset = $offset_row->offset;
$result = mysql_query( " SELECT * FROM `table` LIMIT $offset, 1 " ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T16:14:01.917

```
SELECT * FROM `Users` ORDER BY RAND() LIMIT 0,1; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-05T16:15:42.337

用于`ORDER BY RAND()`随机记录选择。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-05T16:17:27.483

把它分成两张表，一张给用户

用户：id | 名字 | 姓

句子：id | 用户名 | 句子

在“id / userId”处加入并执行 ORDER BY RAND() 可能后跟 LIMIT 20

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-07-10T02:43:45.447

试图实现这一点，但从每一列（目前为 14 个）中获取一个条目，而不是一个小的随机数。很想听听 Matthew McGovern 的意见，因为他的代码适合我，只是它只调用了几个条目......

这里：[使用 PHP 和 MySQL 的随机句子](https://stackoverflow.com/questions/17561543/random-sentence-using-php-mysql)

# mysql - IN 参数的 MySQL 操作顺序

> ID：12750104
> 
> 赞同：-1
> 
> 时间：2012-10-05T16:10:11.750
> 
> 标签：mysql, query-parameters

> **可能重复：**
> [Mysql 或/和优先级？](https://stackoverflow.com/questions/12345569/mysql-or-and-precedence)

如果我有一个如下所示的查询：

```
SELECT * 
  FROM `users`
 WHERE 'gen'='0' OR `gen`='1' AND `id` IN ('405','406','407',...), 
```

`id`它会从 (gen='0' 或 gen='1') 和 ( IN (...) 或其他结果的用户那里返回结果吗？如果是这样，我可以在子句周围加上括号来分隔吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T16:14:51.150

尝试，

```
SELECT * 
FROM `users`
WHERE `gen` IN (0, 1) AND 
      `id` IN ('405','406','407',...) 
```

是相同的

```
SELECT * 
  FROM `users`
 WHERE (`gen`='0' OR `gen`='1') AND 
        `id` IN ('405','406','407',...) 
```

# sql - 在 MS Access 中组合字段

> ID：12750109
> 
> 赞同：1
> 
> 时间：2012-10-05T16:10:22.480
> 
> 标签：sql, database, ms-access, ms-access-2010

我有两个字段，tblIT.Person_Name 和 tblEng.Full_Name。我想创建一个新列，其中包含第一个表中的所有名称并将它们添加到第二列并将其全部放入一个主列

```
Person_name
-------------
John Smith  |
-------------
Gary Porter |

Full_name
-------------
Gary Porter |
-------------
Nancy Becker| 
```

我正在寻找这个：

```
People
-------------
Gary Porter |
-------------
Nancy Becker|
-------------
John Smith  | 
```

它不是连接，很多人一直告诉我，它只是连接两个表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:14:21.557

创建 2 个表的 UNION。这将清除重复值。

```
SELECT Person_name AS People FROM tblIT
UNION
SELECT Full_Name FROM tblEng 
```

如果您想要两个表中的所有行，包括重复行，您将使用 UNION ALL。但看起来你不想重复。

结果集将不可编辑。

如果要将它们存储在另一个表的列中，可以插入 UNION 查询的结果。UNION 关键字可能会导致简单的 INSERT 语句出现语法错误，因此请将 UNION 作为子查询包含在 INSERT 中。

```
INSERT INTO YourTable (People)
SELECT sub.People
FROM
    (
        SELECT Person_name AS People FROM tblIT
        UNION
        SELECT Full_Name FROM tblEng
    ) AS sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:12:17.593

使用`UNION`（*没有 ALL，因为它会允许重复*）合并所有结果。

```
SELECT col1 FROM Person_name
UNION
SELECT col1 FROM Full_name 
```

它结合了结果，而不是加入结果:)

# java - 无法让 Spring 将注释导出到 JMX

> ID：12750110
> 
> 赞同：1
> 
> 时间：2012-10-05T16:10:23.650
> 
> 标签：java, spring, jmx

我一辈子都无法让 Spring 导出有关我的 JMX bean 的元数据。

我将 Spring 配置如下：

```
<bean id="attributeSource" class="org.springframework.jmx.export.annotation.AnnotationJmxAttributeSource"/>

<bean id="namingStrategy" class="org.springframework.jmx.export.naming.MetadataNamingStrategy">
    <property name="attributeSource" ref="attributeSource"/>
</bean>

<bean id="assembler" class="org.springframework.jmx.export.assembler.MetadataMBeanInfoAssembler">
    <property name="attributeSource" ref="attributeSource"/>
</bean>

<bean id="exporter" class="org.springframework.jmx.export.MBeanExporter">
    <property name="autodetect" value="true"/>
    <property name="namingStrategy" ref="namingStrategy"/>
    <property name="assembler" ref="assembler"/>
</bean> 
```

我有一个这样定义的 MXBean 接口：

```
@ManagedResource
public interface MyMXBean {
    @ManagedOperation(description="My description.")
    @ManagedOperationParameters({
        @ManagedOperationParameter(name = "myParam", description = "My param description.")
    })
    public void foo(String someParameter);
} 
```

我的 bean 出现在 jconsole 中，但它没有显示关联的元数据，所以我没有得到操作描述或正确的参数名称/描述。

谁能告诉我我做错了什么？

# php - Web 服务器和 Cron 作业——使用相同的通用文件？

> ID：12750116
> 
> 赞同：0
> 
> 时间：2012-10-05T16:10:50.843
> 
> 标签：php, cron

我有一个网站。就是这样设置的：

```
/public_html
    index.php
    common.php
    db.php
    /dev
      index.php
      common.php
      db.php 
```

`common.php`包含重复的功能。 `Db.php`包含数据库连接信息。

`common.php`还包含确定当前正在访问的页面处于“开发”或“生产”状态的功能。然后它使用此信息相应地调用包含文件。

问题是，我也有一些 Cron Jobs 设置，它调用位于外部的 Php 脚本`public_html`。但是没有一个包含工作，因为确定路径的函数，使用`$_SERVER`变量，并依赖于 URL 的片段（比如单词“/dev”的存在）。

那么，我是否最好为我的 Cron 作业（数据库连接和函数）提供一组单独的文件，即使它们可能在站点的其他部分复制相同的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T16:16:06.073

您可以确定相对于 common.php 的路径，`dirname(__FILE__)`用于获取 common.php 的完整路径，然后相对于该路径确定所有其他路径。以我的经验，这是确定路径的最便携的方式，因为它不需要服务器或操作系统的合作。

从 PHP 5.3 开始，您可以使用`__DIR__`而不是`dirname(__FILE__)`获取当前文件所在的目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:17:43.373

您可以使用操作系统环境变量来设置脚本的执行环境。

crontab：

```
MYAPP_ENV=production
# min hr dom mon dow command
  0   *  *   *   *   php /var/www/myapp/scripts/cron.php 
```

你的脚本：

```
$environment = env('MYAPP_ENV'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T16:17:56.893

我会改变你为初学者确定环境的方式。服务器（环境）[变量](http://httpd.apache.org/docs/2.4/env.html)是一种很好的方法。您可以使用 apache 在 vhost 级别轻松设置它们，甚至可以在 htaccess 文件中进行设置。

相对路径和 chdir(dirname(__FILE__)); 可以解决您的路径问题。

似乎你理解这个问题并且你在这里请求允许做一些让你感到肮脏​​的事情:) 不要不必要地重复事情。而是重构您的代码。

# ruby-on-rails - 如何将参数的默认反序列化覆盖为模型对象？

> ID：12750125
> 
> 赞同：1
> 
> 时间：2012-10-05T16:11:12.847
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

如何将参数的默认反序列化覆盖为模型对象？换句话说，如何让 Rails 用蛇案例数据库理解骆驼案例 JSON？

示例：我收到`Foo`带有字段的 params 对象，`fooBar`我希望我的`Foo`模型理解`fooBar`实际上是数据库字段`foo_bar`。

```
"Foo": {
  "fooBar": "hello" /* fooBar is database field foo_bar */
} 
```

```
class Foo < ActiveRecord::Base
  attr_accessible :foo_bar
end

class FoosController < ApplicationController
  def new
    @foo = Foo.new(params[:foo])
  end 
```

`Foo.new(params[:foo])`假设`params[:foo]`包含`foo_bar`. 而是`params[:foo]`包含`fooBar`（在我的情况下`params`包含 JSON 数据）。

我想要一种干净的方式来处理这种情况，就像模型可以覆盖一样`as_json`：

```
class Foo < ActiveRecord::Base
  attr_accessible :foo_bar, :another_field

  def as_json(options = nil)
    {
      fooBar: foo_bar,
      anotherField: another_field
    }
  end
end 
```

[`from_json`ActiveModel 内部](http://apidock.com/rails/ActiveModel/Serializers/JSON/from_json)有一个方法，但在`Foo.new(params[:foo])`运行时不会调用它。

我已经读过好几次了，`initialize`从模型对象中覆盖是一个糟糕的主意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:26:28.097

你给它的 params 散列所做的所有`Foo.new`事情就是迭代该散列中的键和值。如果键是，`foo_bar`那么它会尝试`foo_bar=`使用该值调用。

如果您定义了一个`fooBar=`设置方法，`self.foo_bar`那么您将能够将带有键的哈希传递`:fooBar`给`Foo.new`.

少手动，你可以做到

```
class Foo < ActiveRecord::Base
  alias_attribute :fooBar, :foo_bar
end 
```

它会为您生成所有额外的访问器。

我不会说压倒一切`initialize`是一件可怕的事情，但做正确的事情可能很棘手，而且几乎总是有一种更简单的方法或一种让你的意图更清晰的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T13:19:51.923

我检查了 active_model_serializers、RABL 和 JBuilder。它们都不允许自定义接收到的 JSON 格式。

对于必须处理 wrap_parameters 的那个，请参阅[http://edgeapi.rubyonrails.org/classes/ActionController/ParamsWrapper.html](http://edgeapi.rubyonrails.org/classes/ActionController/ParamsWrapper.html) 它可以工作，但代码仍然很难看：我在控制器中得到 JSON 内容 + 序列化器/模型而不是一个地方。

wrap_parameters 的使用示例：

```
class EventsController < ApplicationController
  wrap_parameters :event, include: [:title, :start, :end, :allDay, :description, :location, :color]

  def create
    respond_with Event.create(params[:event])
  end
end 
```

然后在我的模型中（Frederick Cheung 在这部分是正确的）：

```
class Event < ActiveRecord::Base
  attr_accessible :title, :start, :end, :allDay, :description, :location, :color

  # JSON input allDay is all_day
  alias_attribute :allDay, :all_day

  # JSON input start is starts_at
  # +datetime+:: UNIX time
  def start=(datetime)
    self.starts_at = Time.at(datetime)
  end

  # JSON input end is starts_at
  # +datetime+:: UNIX time
  def end=(datetime)
    self.ends_at = Time.at(datetime)
  end

  # Override the JSON that is returned
  def as_json(options = nil)
    {
      id: id,
      title: title,
      start: starts_at, # ISO 8601, ex: "2011-10-28T01:22:00Z"
      end: ends_at,
      allDay: all_day,
      description: description, # Not rendered by FullCalendar
      location: location,
      color: color
    }
  end
end 
```

有关信息 ASP.NET MVC（带有 Json.NET）使用非常优雅的 C# 装饰器属性来完成它：

```
class Post
{
    [JsonPropertyAttribute("title")]
    public string Title;
} 
```

我创建了一个要点，展示了如何实现序列化/反序列化：[https ://gist.github.com/3858908](https://gist.github.com/3858908)

# html - 如何在非输入元素上设置焦点

> ID：12750127
> 
> 赞同：8
> 
> 时间：2012-10-05T16:11:27.053
> 
> 标签：html, scroll, focus

我有一个显示弹出窗口的脚本，而且内容通常比窗口高，需要滚动。弹出框位于具有溢出的容器 div 中，因此可以滚动弹出框，而不会干扰页面其余部分的滚动位置。

问题是当显示弹出框时，当按下向上和向下箭头时，没有任何反应，因为支架中的弹出框没有聚焦。只有当我单击容器中的元素时，箭头才会开始工作。是否可以执行与前面描述的“单击元素”方法类似的功能，除了在 javascript 中。我尝试了`.focus`其他类似的命令，但没有一个有效。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T18:13:11.320

啊哈，整理好了。将持有人设置`tabIndex`为`-1`，然后`.focus()`选择它

# wpf - 模拟 Outlook 附件视图的 WPF 控件

> ID：12750137
> 
> 赞同：1
> 
> 时间：2012-10-05T16:12:01.457
> 
> 标签：wpf, xaml

我试图让 ListView 看起来像 MS Outlook 附件控件。我已经进行了水平滚动，但它仍然只显示一行中的一项。

我怎样才能让它看起来像这样？ ![在此处输入图像描述](../Images/2b7e3a92083e76cfdc5f969dc0776ea8.png)

到目前为止我所取得的成就：

```
<Grid x:Name="grdAttachments"
      Grid.Row="4"
      Grid.Column="1"
      Grid.ColumnSpan="3">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" MaxHeight="45" />
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="65" />
        <ColumnDefinition Width="15" />
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>

    <TextBlock Grid.Column="0"
               Margin="3,0,0,0"
               HorizontalAlignment="Left"
               VerticalAlignment="Center"
               Cursor="Hand"
               Text="Angefügt:" />

    <ScrollViewer Grid.Row="0" Grid.Column="2">
        <ListBox x:Name="libAttachments"
                 Background="Transparent"
                 ItemsSource="{Binding Attachments}"
                 MouseDoubleClick="lvAttachments_MouseDoubleClick">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapPanel />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Margin="0,0,10,0" Orientation="Horizontal">
                        <Image Source="{Binding MimeTypeIcon}" Stretch="None" />
                        <TextBlock Margin="5,0,0,0" Text="{Binding File.Name}" />
                        <StackPanel.ContextMenu>
                            <ContextMenu>
                                <ContextMenu.Items>
                                    <MenuItem Click="btnOpenAttachment_Click" Header="Öffnen">
                                        <MenuItem.Icon>
                                            <Image Source="/Images/magnifier.png" Stretch="None" />
                                        </MenuItem.Icon>
                                    </MenuItem>
                                    <MenuItem Click="btnSaveAttachment_Click" Header="Speichern unter">
                                        <MenuItem.Icon>
                                            <Image Source="/Images/disk-black.png" Stretch="None" />
                                        </MenuItem.Icon>
                                    </MenuItem>
                                </ContextMenu.Items>
                            </ContextMenu>
                        </StackPanel.ContextMenu>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </ScrollViewer>
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:22:47.270

听起来您想要的是一个带有自定义 ItemsPanel的[ListBox 。](http://wpftutorial.net/ListBox.html)

```
 <ListBox>
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <WrapPanel/>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
    </ListBox> 
```

上面的代码片段将 ListBox 配置为使用[WrapPanel](http://wpftutorial.net/WrapPanel.html)作为布局提供程序或将“ItemsPanel”用于要呈现的项目。从那里实现自定义项目容器样式和/或自定义数据模板可能是有意义的。如果您使用 MVVM 模式和数据绑定到集合（最好是可观察的），您可以像上面那样轻松应用 DataTemplate

```
 <DataTemplate>
        <StackPanel Margin="0,0,10,0" Orientation="Horizontal">
            <Image Source="{Binding MimeTypeIcon}" Stretch="None" />
            <TextBlock Margin="5,0,0,0" Text="{Binding File.Name}" />
        </StackPanel>
    </DataTemplate> 
```

为了完成这张图片，可以使用滚动查看器，只要它的高度受父布局控件（Grid.Row = 1，其中 RowDefinition Height="constant"）或我在 ScrollViewer 上设置的显式高度限制。

我基于您的最终解决方案如下所示：

```
 <ScrollViewer HorizontalScrollBarVisibility="Disabled">
        <ListBox
        ItemsSource="{Binding Attachments}"
        MouseDoubleClick="lvAttachments_MouseDoubleClick"
        SelectionMode="Single">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapPanel/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>

            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Margin="0,0,10,0" Orientation="Horizontal">
                        <Image Source="{Binding MimeTypeIcon}" Stretch="None" />
                        <TextBlock Margin="5,0,0,0" Text="{Binding File.Name}" />
                        <StackPanel.ContextMenu>
                            <ContextMenu>
                                <ContextMenu.Items>
                                    <MenuItem Click="btnOpenAttachment_Click" Header="Öffnen">
                                        <MenuItem.Icon>
                                            <Image Source="/Images/magnifier.png" Stretch="None" />
                                        </MenuItem.Icon>
                                    </MenuItem>
                                    <MenuItem Click="btnSaveAttachment_Click" Header="Speichern unter">
                                        <MenuItem.Icon>
                                            <Image Source="/Images/disk-black.png" Stretch="None" />
                                        </MenuItem.Icon>
                                    </MenuItem>
                                </ContextMenu.Items>
                            </ContextMenu>
                        </StackPanel.ContextMenu>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </ScrollViewer> 
```

需要注意的几点：如果可能，请考虑使用[命令](http://wpftutorial.net/DelegateCommand.html)而不是事件，它们会导致更松散的耦合。如果行为本身是您在项目中可能有其他地方的行为，或者可重用性是理想的，那么引入[行为甚至可能是有意义的。](http://wpftutorial.net/Behaviors.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T19:44:28.130

好的，所以看起来你被卡住的地方是你的 ListBox 仍然以单列方式推送东西，并且缺乏给你一些东西来触发比如点击事件的能力。所以我想到的是更像这样的东西；

```
<ScrollViewer HorizontalScrollBarVisibility="Disabled" Height="300" HorizontalContentAlignment="Stretch">

   <ItemsControl ItemsSource="{Binding Collection}">
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <WrapPanel IsItemsHost="True"/>
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <ItemsControl.ItemTemplate>
        <DataTemplate>
           <StackPanel Margin="5,0" Orientation="Horizontal">
                       <Image Source="{Binding MimeTypeIcon}" Stretch="None" />
                       <HyperlinkButton Margin="5,0,0,0" Text="{Binding File.Name}" />
                   </StackPanel>          
        </DataTemplate>
    </ItemsControl.ItemTemplate>
   </ItemsControl>
</ScrollViewer> 
```

尽管我看到了您的点击次数，但我不确定您试图用放大镜和磁盘做什么，但是您可以根据需要将它们添加到此布局中，不过​​只是一个注释，我只是在会议之间随意处理所以从来没有建造它，但应该可以正常工作。如果没有，我们将再次插入它。主要区别在于更改为超链接按钮，以便您单击以及与 Firoso 的其他一些细微差别，但他在技术上仍然是合理的，或者无论如何应该是:)

# java - Java 正则表达式 - 匹配模式的第一次出现

> ID：12750139
> 
> 赞同：0
> 
> 时间：2012-10-05T16:12:05.497
> 
> 标签：java, regex

我正在将 URL 与正则表达式进行匹配，测试它们是否反映了“关闭”命令。

这是一个执行关闭的 URL：

```
/exec?debug=true&command=shutdown&f=0 
```

这是另一个执行关闭的合法但令人困惑的 URL：

```
/exec?commando=yes&zcommand=34&command=shutdown&p 
```

现在，我必须确保只有一个**command=...**参数，它是**command=shutdown**。或者，我可以确保第*一个* **command=...**参数是**command=shutdown**。

这是我对请求的正则表达式的测试：

```
/exec?version=0.4&command=shutdown&out=JSON&zcommand=1 
```

应该匹配

```
/exec?version=0.4&command=startup&out=JSON&zcommand=1&commando=shutdown 
```

应该不匹配

```
/exec?command=shutdown&out=JSON 
```

应该匹配

```
/exec?version=0.4&command=admin&out=JSON&zcommand=1&command=shutdown 
```

应该不匹配

这是我的基线——一个通过上述测试的正则表达式——除了最后一个：

```
^/exec?(.*\&)*command=shutdown(\&.*)*$ 
```

问题在于出现多个命令=...，其中第一个命令未关闭。

我尝试使用lookbehind：

```
^/exec?(.*\&)*(?<!(\&|\?)command=.*)command=shutdown(\&.*)*$ 
```

但我得到：

```
Look-behind group does not have an obvious maximum length near index 31 
```

我什至尝试过原子分组。无济于事。我不能使以下表达式不匹配：

```
/exec?version=0.4&command=admin&out=JSON&zcommand=1&command=shutdown 
```

任何人都可以帮助通过所有测试的正则表达式吗？

## 澄清

我知道我欠你一些背景信息。

我的任务是配置一个过滤器来保护我们系统的所有 servlet 的入口，并验证是否有一个打开的 HTTP 会话（换句话说：成功登录）。该过滤器还允许配置哪些 URL 不需要登录。

有些例外很简单：/login 不需要登录。调用 localhost 不需要登录。

但有时它会变得复杂。就像关闭命令不需要登录，而其他命令可以而且应该（奇怪的原因超出了我的问题范围）。

由于这是一个安全问题，我不能允许用户仅将 &command=shutdown 附加到 URL 并绕过过滤器。

所以我真的需要一个正则表达式，否则我需要重新定义配置规范。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:27:12.157

您需要分***多个***步骤执行此操作：

***(1)***找到匹配的`^(?=\/exec\?).*?(?<=[?&])command=([^&]+)`

***(2)***检查是否匹配`shutdown`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T23:24:58.360

行。我感谢大家的精彩回答！我尝试了一些建议，与其他建议进行了斗争，总而言之，我不得不同意，即使存在正确的正则表达式，它看起来也很糟糕，不可维护，并且可以很好地作为一个令人讨厌的大学练习，但不是在真实的系统中配置。

我也意识到，由于这里涉及到一个过滤器，并且过滤器已经解析了它自己的 URI，所以将所有 URI 部分粘贴到一个字符串中并将其与正则表达式匹配是绝对荒谬的。我在想什么？？

因此，我将重新设计过滤器及其配置。

非常感谢，人们！我很感激帮助:)

诺姆·罗特姆。

PS - 为什么我得到一个 userXXXX 昵称？很奇怪...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T16:40:44.167

如果您可以接受第一场比赛，您可以使用`'\\Wcommand=([^&]+)`并获取第一组。

否则，您可以只调用`Matcher.find`两次来测试后续匹配，并最终使用第一个匹配，为什么要使用单个复杂的正则表达式来执行此操作？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T16:46:31.230

如果这可以用一个正则表达式来完成，那很可能；它将非常复杂以至于无法阅读，因此无法维护，因为逻辑的**意图**将丢失。即使它被“记录在案”，对于只了解 Java 的人来说，它仍然不太明显。

> 解决这样的问题是对正则表达式的滥用，就像用锤子驱动螺丝一样，是在滥用锤子和螺丝。

更好的方法是使用`URI`对象解析整个事物、域和所有内容并提取查询参数，然后编写一个简单的循环遍历它们并根据您的业务逻辑决定什么是关闭，什么不是. 然后它将是简单的、自我记录的并且可能更有效（这不应该是一个问题）。

> 有些人在遇到问题时会想“我知道，我会使用正则表达式”。现在他们有两个问题。——杰米·扎温斯基

随心所欲地投反对票，但这个特定示例的*最佳*解决方案不是正则表达式；鉴于“澄清”更是如此。

尤其是在您必须与人共享代码的商业环境中，不仅现在与您合作，而且在未来与未知的人才库合作。“接受”的答案永远不应该通过公司代码审查。Zawinski 的引述正好适用于这种情况！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T16:50:48.563

我不是 Java 编码员，但试试这个（在 Perl 中工作）>>

```
^(?=\/exec\?)(?:[^&]+(?<![?&]command)=[^&]+&)*(?<=[?&])command=shutdown(?:&|$) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-05T17:32:18.837

要匹配 command=shutdown 的第一次出现，请使用：

```
Pattern.compile("^((?!command=).)+command=shutdown.*$"); 
```

结果将如下所示：

```
"/exec?version=0.4&command=shutdown&out=JSON&zcommand=1" => false
"/exec?command=shutdown&out=JSON" => true
"/exec?version=0.4&command=startup&out=JSON&zcommand=1&commando=shutdown" => false
"/exec?commando=yes&zcommand=34&command=shutdown&p" => false 
```

如果你想匹配只包含一个 'command=' 的字符串，使用这个：

```
Pattern.compile("^((?!command=).)+command=shutdown((?!command=).)+$"); 
```

请注意，在正则表达式中使用“not”限定符不是它们的目的，性能可能不是最好的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-06T00:37:51.800

这个经过测试（并经过充分评论）的正则表达式解决方案满足您的所有要求：

```
import java.util.regex.*;
public class TEST {
    public static void main(String[] args) {
        Pattern re = Pattern.compile(
            "  # Match URI having command=shutdown query variable value. \n" +
            "  ^                          # Anchor to start of string.   \n" +
            "  (?:[^:/?\\#\\s]+:)?        # URI scheme (Optional).       \n" +
            "  (?://[^/?\\#\\s]*)?        # URI authority (Optional).    \n" +
            "  [^?\\#\\s]*                # URI path.                    \n" +
            "  \\?                        # Literal start of URI query.  \n" +
            "    # Match var=value pairs preceding 'command=xxx'.        \n" +
            "  (?:                        # Zero or more 'var=values'    \n" +
            "    (?!command=)             # only if not-'command=xxx'.   \n" +
            "    [^&\\#\\s]*              # Next var=value.              \n" +
            "    &                        # var=value separator.         \n" +
            "  )*                         # Zero or more 'var=values'    \n" +
            "  command=shutdown           # variable and value to match. \n" +
            "    # Match var=value pairs following 'command=shutdown'.   \n" +
            "  (?:                        # Zero or more 'var=values'    \n" +
            "    &                        # var=value separator.         \n" +
            "    (?!command=)             # only if not-'command=xxx'.   \n" +
            "    [^&\\#\\s]*              # Next var=value.              \n" +
            "  )*                         # Zero or more 'var=values'    \n" +
            "  (?:\\#\\S*)?               # URI fragment (Optional).     \n" +
            "  $                          # Anchor to end of string.", 
            Pattern.CASE_INSENSITIVE | Pattern.UNICODE_CASE | Pattern.COMMENTS);
        String s = "/exec?version=0.4&command=shutdown&out=JSON&zcommand=1";
            // Should match
//      String s = "/exec?version=0.4&command=startup&out=JSON&zcommand=1&commando=shutdown";
            // Should fail to match 
//      String s = "/exec?command=shutdown&out=JSON";
            // Should match
//      String s = "/exec?version=0.4&command=admin&out=JSON&zcommand=1&command=shutdown";
        // Should fail to match";
        Matcher m = re.matcher(s);
        if (m.find()) {
            // Successful match
            System.out.print("Match found.\n");
        } else {
            // Match attempt failed
            System.out.print("No match found.\n");
        } 
    }
} 
```

上面的正则表达式匹配任何具有任何方案、权限、路径、查询或片段组件的任何 RFC3986 有效 URI，但它必须有一个（且只有一个）查询`"command"`变量，其值必须完全正确，但不区分大小写：`"shutdown"`.

当使用适当的缩进和注释步骤（如上所示）编写时，精心制作的复杂正则表达式非常好（且可维护）。（有关使用正则表达式验证 URI 的更多信息，请参阅我的文章：[正则表达式 URI 验证](http://jmrware.com/articles/2009/uri_regexp/URI_regex.html "您可以双击任何正则表达式来获取源代码片段！")）

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-10-05T20:47:03.643

试试这个：

```
Pattern p = Pattern.compile(
    "^/exec\\?(?:(?:(?!\\1)command=shutdown()|(?!command=)\\w+(?:=[^&]+)?)(?:&|$))+$\\1"); 
```

或者更具可读性：

```
^/exec\?
(?:
  (?:
    (?!\1)command=shutdown()
    |
    (?!command=)\w+(?:=[^&]+)?
  )
  (?:&|$)
)+$
\1 
```

正则表达式的主体是与关闭命令或名称为 not 的参数匹配的替代`command`。如果它确实与关闭命令匹配，则该分支中的空组“捕获”一个空字符串。它不需要消耗任何东西，因为我们只是将它用作一个复选框，以确认*其中*一个参数是关闭命令。

负前瞻 - `(?!\1)`- 阻止它匹配两个或多个关闭命令。我不知道这是否真的有必要，但这是一个很好的机会来演示（1）如何否定“反向断言”，以及（2）在某些情况下，反向引用可以出现在它所指的组之前（什么是称为*前向参考*）。

当整个 URL 被使用时，反向引用 ( `\1`) 就像一个零宽度断言。如果其中一个参数是`command=shutdown`，则反向引用将成功。否则即使它只是试图匹配一个空字符串也会失败，因为它引用的组没有参与匹配。

但我必须同意其他响应者的观点：当你的正则表达式变得如此复杂时，你应该认真考虑切换到不同的方法。

* * *

**编辑：** 它对我有用。这是**[演示](http://ideone.com/tJddy)**。

# java - 如何防止多个bean实例？

> ID：12750149
> 
> 赞同：3
> 
> 时间：2012-10-05T16:12:34.057
> 
> 标签：java, spring, glassfish

我有一个基于 Spring 的 Web 应用程序，有两个 servlet——一个用于 MVC，一个用于 spring-ws。应用程序中使用了几个 bean，它们使用注释自动装配。每次应用程序启动时，它都会为每种 bean 类型创建 3 个实例——即使它们是单例范围的。@PostConstruct 方法也被调用了 3 次。

我知道有 3 个应用程序上下文 = 1 个通用 + 2 个 servlet，但是每个 bean、控制器、端点等都被创建了 3 次。至少在父应用程序上下文中加载的公共 bean 应该只实例化一次。

component-scan 的 base-package 属性指向不相交的包。

我使用了一个类来转储上下文信息（https://gist.github.com/1347171），并且似乎存在三个具有相同结构（相同 bean）的不同上下文。他们的 id 是“/project/”、“/project/rest”、“/project/soap”。

我尝试注释掉 ContextLoaderListener，删除soap servlet 及其关联的XML 文件（applicationContext 和soap-servlet）并将常见的东西移动到rest servlet（这样只有一个配置xml 和一个组件扫描），并且我仍然得到每个 bean 的 3 个实例。在这种情况下，应用程序上下文 ID 是“/Project/”（精确大小写）、“/project/”和“/project/”。

**web.xml**

```
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext.xml</param-value>
</context-param>

<servlet>
    <servlet-name>rest</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>rest</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping>

<servlet>
    <servlet-name>soap</servlet-name>
    <servlet-class>org.springframework.ws.transport.http.MessageDispatcherServlet</servlet-class>
    <init-param>
        <param-name>transformWsdlLocations</param-name>
        <param-value>true</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>soap</servlet-name>
    <url-pattern>/soap/*</url-pattern>
</servlet-mapping> 
```

**应用程序上下文.xml**

```
<context:annotation-config/>
<context:component-scan base-package="test.common"/>

<task:annotation-driven/>

rest-servlet.xml

<mvc:annotation-driven/>
<context:component-scan base-package="test.rest"/>

<bean class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter">
    <property name="messageConverters">
        <util:list id="beanList">
            <ref bean="formHttpMessageConverter"/>
        </util:list>
    </property>
</bean>

<bean id="formHttpMessageConverter"
      class="org.springframework.http.converter.FormHttpMessageConverter"/>

<mvc:interceptors>
    <bean class="test.rest.Interceptor"/>
</mvc:interceptors> 
```

**肥皂-servlet.xml**

```
<sws:annotation-driven/>
<context:component-scan base-package="test.soap"/>

<sws:dynamic-wsdl
        id="service"
        portTypeName="service"
        locationUri="/soap/service"
        targetNamespace="http://server/soap">

    <sws:xsd location="/WEB-INF/SoapService.xsd"/>
</sws:dynamic-wsdl>

<sws:interceptors>
    <bean id="validatingInterceptor"
          class="org.springframework.ws.soap.server.endpoint.interceptor.PayloadValidatingInterceptor">
        <property name="schema" value="/WEB-INF/SoapService.xsd"/>
        <property name="validateRequest" value="true"/>
        <property name="validateResponse" value="true"/>
    </bean>
</sws:interceptors> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T06:02:13.223

在您的 bean 上使用 javax.ejb.Singleton 注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-19T01:39:12.370

好吧，原因是关于 spring mvc 上下文初始化和这些神奇的注释默认值的文档有点混乱:(。

由于以下原因，您可能拥有三个副本：

1.  您的 contextConfigLocation 定义创建了一个在所有 servlet 之间共享的根 webapp 上下文加载（每个应用程序只有一个）。您的每个 -servlet-config.xml 文件都可以访问这些 bean，但反之则不行。 [Spring Framework中applicationContext.xml和spring-servlet.xml的区别](https://stackoverflow.com/questions/3652090/difference-between-applicationcontext-xml-and-spring-servlet-xml-in-spring)
2.  所以第二个实例来自您的 -servlet 应用程序上下文，因为您再次明确定义了注释驱动。
3.  不确定您使用的是哪个 spring 框架版本，但是通过定义注释驱动和自定义请求映射适配器，您几乎创建了两个。 [https://jira.spring.io/browse/SPR-8648](https://jira.spring.io/browse/SPR-8648)

事实上，`<mvc:annotation-driven>`有所有标签来定制你的适配器，检查你想要的架构。然而，解决这个问题的另一种方法是在跟踪模式下进行痛苦的调试并查看哪个 bean 实际创建了您的适配器。在适配器构造函数中放置一个断点，然后查看 DispatcherServlet->mapperHandler->interceptor->mapping->context->configFileLocation 中的堆栈以查看哪个文件正在创建此 bean

如果您确实想自定义消息转换器，您应该这样做：

```
<mvc:annotation-driven
        content-negotiation-manager="contentNegotiationManager">
            <mvc:message-converters register-defaults="false">
                <bean class="org.springframework.http.converter.json.MappingJackson2HttpMessageConverter">
                    <property name="objectMapper" ref="afterBurnerObjectMapper"/>
                </bean>
                <bean class="org.springframework.http.converter.ByteArrayHttpMessageConverter"/>
                <bean class="org.springframework.http.converter.xml.SourceHttpMessageConverter"/>
                <bean class="org.springframework.http.converter.FormHttpMessageConverter"/>
                <bean class="org.springframework.http.converter.StringHttpMessageConverter"/>
            </mvc:message-converters>
    </mvc:annotation-driven> 
```

# ruby - 带代理的 HTTParty

> ID：12750161
> 
> 赞同：7
> 
> 时间：2012-10-05T16:13:34.973
> 
> 标签：ruby, heroku, proxy, httparty

我在 heroku 上试图访问需要将我的应用程序 ip 列入白名单的 API。因此，我使用 heroku 附加组件 proximo 来获取 api 白名单的主机/IP。

我设置的使用 HTTParty 测试连接性的快速测试失败了。

```
class FakeRequest
 include HTTParty
 http_proxy 'XX.XXX.XX.XX', 80, 'user', 'pass'

 def set_defaults
   {:api_key=>"BLARG_BLARG",
    :login_name=>"user",
    :method => "do_something",
    :response_format => "json", 
    :v => "1.0",
    :login_password=>"pass"}
end

 def make_post
  HTTParty.post "https://test.com", :query => set_defaults 
 end
end 
```

像这样： req = FakeRequest.new req.make_post

从 api 返回一条错误消息，抱怨源 IP 未列入白名单。我查看了源 IP，它没有使用代理。如何使用代理而不是我的 ISP 的 IP 进行 HTTParty 发布。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T22:28:04.203

这是我为此构建的模块：

```
module ProximoParty

  PROXIMO = URI.parse(ENV['PROXIMO_URL'])

  def self.included(base)
    base.send(:include, HTTParty)
    base.http_proxy(PROXIMO.host, 80, PROXIMO.user, PROXIMO.password)
  end

end 
```

这将使用 PROXIMO URL，因为它在您安装插件时添加到您的 heroku 应用程序中。因此，您可以将此文件放入您的应用程序和`include ProximoParty`您的 FakeRequest 类而不是 HTTParty 中，它应该“正常工作”。

看起来我的代码正在做你的代码正在做的同样的事情，所以我猜你可能没有手动为 proximo 正确传递凭据。

我遇到了一个类似的问题，它对我来说并不是很有效。我相信问题是我被绊倒了，在 proximo URL 中看起来有一个“代理：”协议，但这只是 URL 的用户名部分。

无论如何，这可能有帮助，也可能没有帮助，但请告诉我是否有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-08-16T00:41:12.670

让我大吃一惊的是，在这个问题上你能得到多少不起作用的答案。这是我如何让它工作的：

```
HTTParty::Basement.http_proxy('localhost', 8000, nil, nil) 
```

将此作为全局覆盖放在您的 env.rb 文件中。而已。完毕。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-23T15:53:44.810

[HTTParty 可以通过以下代理选项](https://github.com/jnunemaker/httparty/blob/6f4d6ea4a2707a4f1466f45bf5c67556cdbed2b7/lib/httparty.rb)使用代理服务器地址。

```
[:+http_proxyaddr+:] Address of proxy server to use
[:+http_proxyport+:] Port of proxy server to use.
[:+http_proxyuser+:] User for proxy server authentication
[:+http_proxypass+:] Password for proxy server authentication. 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-08-16T07:54:09.923

使用最新版本的 HTTParty 就像使用以下 [`http_proxy`方法](https://github.com/jnunemaker/httparty/blob/v0.18.1/lib/httparty.rb#L90-L101)一样简单：

```
class Foo
  include HTTParty
  http_proxy 'http://example.com', 80, 'user', 'pass'
end 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-23T14:06:40.610

当您将 HTTParty 配置为包含在您的模块中时，您必须通过您的类调用 HTTParty 方法，因此：

```
def make_post
  self.class.post "https://test.com", :query => set_defaults
end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-05T01:12:45.553

我包含了一个链接，因为它包含冗长的设置步骤。但是关于链接更改和页面变得无效的观点。我们在 EC2 AMI 上使用了 squid 代理服务器，并称它为一天。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-11-29T20:44:31.177

我认为您需要调用本地 httparty，如下所示：

```
def make_post
  self.post "https://test.com", :query => set_defaults 
end 
```

# tomcat - 如何摆脱 tomcat-users.xml 权限被拒绝错误

> ID：12750164
> 
> 赞同：0
> 
> 时间：2012-10-05T16:13:44.490
> 
> 标签：tomcat, tomcat7

服务器工作得很好。但是，当我启动服务器时，我不断收到此错误。我该如何解决？

![在此处输入图像描述](../Images/06377cd121223d0a5b27b93713f8f146.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:18:41.343

试试这个命令：

```
sudo chmod 777 /Library/apache-tomcat-7.0.30/conf/ 
```

# java - 更改最终整数变量的值

> ID：12750165
> 
> 赞同：4
> 
> 时间：2012-10-05T16:13:50.863
> 
> 标签：java, class, integer, final

`final`对象无法更改，但我们可以设置其属性：

```
final MyClass object = new MyClass();
object.setAttr("something");              //<-- OK
object = someOtherObject;                 //<-- NOT OK 
```

是否可以对 a 做同样的事情`final Integer`并改变它的`int`值？

我问是因为我打电话给工人：

```
public SomeClass myFunction(final String val1, final Integer myInt) {

    session.doWork(new Work() {
    @Override
    public void execute(...) {
        //Use and change value of myInt here
        //Using it requires it to be declared final (same reference)
    }
} 
```

我需要设置`myInt`它里面的值。

我可以`int`在另一个类中声明我的，这会起作用。但我想知道这是否有必要。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-05T16:14:54.693

否：an`Integer`是不可变的，就像 example 一样`String`。

但是您可以设计自己的类来嵌入整数并使用它而不是 Integer ：

```
public class MutableInteger {
    private int value;
    public MutableInteger(int value) {
        this.value = value;
    }
    public int getValue() {
        return value;
    }
    public void setValue(int value) {
        this.value = value;
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-05T16:15:57.827

你不能因为它在设计上是不可变的。

您可以设置`int[]`或`Integer[]`或的值`AtomicInteger`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-05T16:14:53.483

分配后，您无法更改`final`整数的值。但是，您可以延迟分配。，即：-您只能分配一次`final`整数。您可以在声明时，或在初始化程序块中，或在构造函数..

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-05T16:16:25.317

您可以将 Integer 包装在另一个最终的对象中，然后将该包装器对象中的 Integer '替换'为另一个。

# coldfusion - 从列表中转储变量 ColdFusion 9

> ID：12750166
> 
> 赞同：1
> 
> 时间：2012-10-05T16:13:51.870
> 
> 标签：coldfusion, coldfusion-9, cfdump

在我像这样转储它之后，我有了这个结构：

`<cfdump var="#currentInfo.answers#">`

我怎样才能访问里面的值`LIST`？

我需要在将来将该值与另一个变量进行比较，以允许我进行某些操作。

![结构](../Images/6db2a5959cf1c2c644f3c8660d9be2ab.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T16:20:26.623

下面的代码应该做到这一点：

```
currentInfo.answers["F0FF5FDC-D2C3-4D0F-D7D2D2886D5B430d"].LIST 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T17:35:07.353

由于该值是动态的，因此您需要以下内容：

```
currentKey="F0FF5FDC-D2C3-4D0F-D7D2D2886D5B430d";
currentInfo.answers[currentKey].LIST; 
```

# nginx - Nginx 重写规则以替换“？” 与 %3f

> ID：12750167
> 
> 赞同：2
> 
> 时间：2012-10-05T16:13:53.383
> 
> 标签：nginx

Nginx 只提供静态文件，但是，一些文件名包含“？”。是的，问号。

所有包含“？”的 URL 即使文件实际存在，也会产生 404。例如

```
> GET /foo?lang=ar.html HTTP/1.1
...
...
< HTTP/1.1 404 Not Found 
```

虽然名为**foo?lang=ar.html**的文件确实存在于预期位置。

```
> GET /foo%3flang=ar.html HTTP/1.1
...
...
< HTTP/1.1 200 OK 
```

我如何编写一个重写指令，所以所有“？” 将被重定向到 %3f？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:17:32.133

您应该对查询字符串进行[**url 编码**](http://en.wikipedia.org/wiki/URL_encoding)以转义特殊字符，例如`?`和`=`

具体来说，您必须请求的文件的名称，一旦编码，是这样的：

```
foo%3Flang%3Dar.html 
```

在 Javascript 中，您可以使用`encodeURIComponent()`函数对文件名进行 url 编码，在 PHP 中，您可以使用`urlencode()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T17:31:27.120

`?`您必须像`%3F`在对 nginx 的 http 调用之前一样编码。

原因是[url rfc](http://www.faqs.org/rfcs/rfc1738.html)将字符保留`?`为特殊字符（具体见 3.3 节）。因此，nginx 将正确地将未转义`?`字符解释为 url 路径部分的结尾

# csv - CSV 文件中空行的含义

> ID：12750171
> 
> 赞同：8
> 
> 时间：2012-10-05T16:14:14.770
> 
> 标签：csv

起初这似乎很明显，但现在我不太确定。

如果 CSV 文件具有以下行：

```
a, 
```

我会将其解释为具有值“a”和“”的两个字段。但是然后看一个空行，我可以很容易地争辩说它表示一个具有值“”的字段。

我接受文件末尾的空行应被解释为文件的结尾（无字段）。但是有人知道文件中的空行应该是什么意思吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T23:09:38.670

查看 Excel 在读取 CSV 文件时如何处理空行，我可以看到 Excel 不会*忽略*它们。

不幸的是，无法判断空行是被视为空字段还是根本没有字段，因为 Excel 始终具有相同的列数。

我看到了 CSV 格式的一些专有用途，其中可以选择如何处理空白行。最后，这是我采取的方法。我的 CSV 阅读器类有四个用于处理空行的选项：

1.  忽略并跳过它们
2.  将它们视为具有零字段的行
3.  将它们视为具有一个空字段的行
4.  将它们视为输入文件的结尾

如果有人感兴趣，我将发布新的源代码来替换现有文章[Read and Writing CSV Files in C#](http://www.blackbeltcoder.com/Articles/files/reading-and-writing-csv-files-in-c)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-05T16:22:12.733

请注意，空行可能是多行引用字段的一部分：

```
1,2,"this
is
field number

3",4,5 
```

是有效的 CSV。

在我见过的大多数 CSV 文件中，每行的字段数是恒定的（尽管不一定如此），所以除非 CSV 文件只有一列，否则我希望空行（引用字段之外）是一个错误。

我刚刚检查过：Python 的 CSV 解析器会忽略空行。我想这是合理的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T16:17:17.727

就我的理解和经验而言，它代表缺失的记录，应该被忽略。不要将其视为EOF。

# asp.net-mvc-3 - 使用 subGridrowExpanded 的 MVC3 jqGrid 子网格

> ID：12750172
> 
> 赞同：0
> 
> 时间：2012-10-05T16:14:16.293
> 
> 标签：asp.net-mvc-3, razor, jqgrid, parameter-passing

我正在开发一个 MVC3/razor 应用程序，我正在尝试使用 subGridRowExpanded 将 jqGrid 嵌套在另一个内部（因此我可以使用格式化程序等），如何将父网格的 id 值传递给子网格网格？

下面的代码运行主网格，并使用“搜索/客户”URL 中的数据填充它，但我不知道如何选择我在“搜索/银行链接”URL 控制器中选择的记录

谁能告诉我该怎么做？

在此先感谢安德鲁。

**我的索引.cshtml**

```
@{
    ViewBag.Title = "Index";
}

<h2>@ViewBag.Message</h2>
<div id="content">
    <div id="content-left">
        @Html.Partial("SearchPanel")
    </div>
    <div id="content-main">
        <table id="jpgCustomers" cellpadding="0" cellspacing="0"></table>
        <div id="jpgpCustomers" style="text-align:center;"></div>
    </div>
</div>
@section JavaScript
{
<script type="text/javascript">
    $(document).ready(function ()
    {
        $('#jpgCustomers').jqGrid({
            //url from wich data should be requested
            url: '@Url.Action("Customers")',
            datatype: 'json',
            mtype: 'POST',
            colNames: ['Name', 'FullName', 'SFTP Enabled', 'IsTranbase'],
            colModel: [
                { name: 'LogonName', index: 'LogonName', align: 'left' },
                { name: 'FullName', index: 'FullName', align: 'left' },
                { name: 'Enabled', index: 'Enabled', align: 'left' },
                { name: 'IsTran', index: 'IsTranbase', align: 'left' }
            ],
            pager: $('#jpgpCustomers'),
            rowNum: 10,
            sortname: 'FullName',
            sortorder: 'asc',
            viewrecords: true,
            height: '100%',
            subGrid: true,
            subGridRowExpanded: function(subgrid_id, row_id) {
                var subgrid_table_id, pager_id;
                subgrid_table_id = subgrid_id+"_t";
                pager_id = "p_"+subgrid_table_id;
                $("#"+subgrid_id).html("<table id='"+subgrid_table_id+"'class='scroll'></table><div id='"+pager_id+"'class='scroll'></div>");
                $("#"+subgrid_table_id).jqGrid({
                    url: '@Url.Action("BankLinks")',
                    datatype: 'json',
                    mtype: 'POST',
                    colNames: ['Bank', 'Folder', 'Enabled'],
                    colModel:[
                        {name:"Bank",index:"Bank",width:80,key:true},
                        {name:"Folder",index:"Folder",width:130},
                        {name:"Enabled",index:"Enabled",width:70,align:"left"}
                    ],
                    rowNum:20,
                    pager: pager_id,
                    sortname: 'Bank',
                    sortorder: "asc",
                    viewrecords: true,
                    height: '100%'
                });
                $("#"+subgrid_table_id).jqGrid('navGrid',"#"+pager_id,{edit:false,add:false,del:false})
            },
        });
    });
</script>
} 
```

**我的控制器操作：**

*顾客*

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult Customers(JqGridRequest request)
{
    ISession session = NHibernateHelper.GetCurrentSession();
    IEnumerable<Customer> customers = session.QueryOver<Customer>().List().Skip<Customer>(0).Take<Customer>(request.RecordsCount);

    int totalRecords = customers.Count();

    //Prepare JqGridData instance
    JqGridResponse response = new JqGridResponse()
    {
        //Total pages count
        TotalPagesCount = (int)Math.Ceiling((float)totalRecords / (float)request.RecordsCount),
        //Page number
        PageIndex = request.PageIndex,
        //Total records count
        TotalRecordsCount = totalRecords
    };
    //Table with rows data
    foreach (Customer customer in customers)
    {
        response.Records.Add(new JqGridRecord(Convert.ToString(customer.Id), new List<object>()
        {
            customer.FtpDetails.LogonName,
            customer.FtpDetails.FullName,
            customer.FtpDetails.Enabled,
            customer.IsTran
        }));
    }

    //Return data as json
    return new JqGridJsonResult() { Data = response };
} 
```

*银行链接*

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult BankLinks(JqGridRequest request)
{
    ISession session = NHibernateHelper.GetCurrentSession();

    //IN THIS LINE I HAVE HARDCODED value 14 - I need this value to be passed from the 
    //Parent Grid!
    Customer customer = session.Get<Customer>(14);

    int totalRecords = customer.Banks.Count();

    //Prepare JqGridData instance
    JqGridResponse response = new JqGridResponse()
    {
        //Total pages count
        TotalPagesCount = (int)Math.Ceiling((float)totalRecords / (float)request.RecordsCount),
        //Page number
        PageIndex = request.PageIndex,
        //Total records count
        TotalRecordsCount = totalRecords
    };

    foreach (Bank bank in customer.Banks.ToList<Bank>())
    {
        CustomerBank bankLink = session.QueryOver<CustomerBank>().Where(x => x.BankId == bank.Id).Where(y => y.CustomerId == customer.Id).List<CustomerBank>().FirstOrDefault();

        response.Records.Add(new JqGridRecord(null, new List<object>()
        {
            bank.BankCode,
            bank.Folder,
            bankLink.Enabled 
        }));
    }
     return new JqGridJsonResult() { Data = response };
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:29:49.817

首先你应该`subGridRowExpanded`像这样修改你的回调：

```
subGridRowExpanded: function(subgrid_id, row_id) {
    var subgrid_table_id, pager_id;
    subgrid_table_id = subgrid_id + '_t';
    pager_id = "p_"+subgrid_table_id;
    $('#' + subgrid_id).html('<table id="' + subgrid_table_id + '" class="scroll"></table><div id="' + pager_id + '" class="scroll"></div>');
    $('#' + subgrid_table_id).jqGrid({
        url: encodeURI('@Url.Action("BankLinks")' + '?id=' + row_id),
        datatype: 'json',
        mtype: 'POST',
        colNames: ['Bank', 'Folder', 'Enabled'],
        colModel: [
            {name: 'Bank', index: 'Bank', width:80, key:true },
            {name: 'Folder', index:'Folder', width:130 },
            {name: 'Enabled', index: 'Enabled', width:70, align: 'left' }
        ],
        rowNum: 20,
        pager: pager_id,
        sortname: 'Bank',
        sortorder: 'asc',
        viewrecords: true,
        height: '100%'
    });
    $('#' + subgrid_table_id).jqGrid('navGrid', '#' + pager_id, {edit: false, add: false, del: false })
} 
```

请注意使用`encodeURI`以确保生成的 URL 有效。

现在您可以像这样修改您的操作方法：

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult BankLinks(int id, JqGridRequest request)
{
    //You can sue id parameter to get the data for selected client.
    ...
} 
```

这应该可以解决问题。

# iphone - 链接到谷歌 iOS 网络应用的新街景功能

> ID：12750187
> 
> 赞同：0
> 
> 时间：2012-10-05T16:14:59.300
> 
> 标签：iphone, google-street-view

正如 Walt Mossberg von AllthingsD 所写，谷歌本周四将街景功能添加到谷歌地图的网络版本中。

我玩过，它在 Safari 中运行良好。我的计划是将其集成到我的应用程序中，并直接链接到街景。在我的情况下，有一些已知的 lat 和 lng 值。这可以通过非 iOS 设备进行，如下所述： [https ://stackoverflow.com/a/542965/956433](https://stackoverflow.com/a/542965/956433)

遗憾的是，这不适用于 iOS。有没有人更好的运气，并且能够为谷歌街景的一些经纬度值建立一个可靠工作的链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T08:54:10.050

这个问题现在已经过时了，随着适用于 iOS 的谷歌地图应用程序的发布，可以打开应用程序并直接显示街景图像。一切都在这里描述：[https ://developers.google.com/maps/documentation/ios/urlscheme](https://developers.google.com/maps/documentation/ios/urlscheme)

谢谢谷歌:-)

# java - 如何对创建新对象的类进行单元测试

> ID：12750193
> 
> 赞同：6
> 
> 时间：2012-10-05T16:15:36.620
> 
> 标签：java, unit-testing, junit, mockito

我正在使用 JUnit 和 Mockito 来测试一些类。类本身从另一个类创建一个对象。一个名为 testList 的列表。这是我的代码：

```
public class A {
       private List<B> bList;

       //returns the bList
       public List<B> getBList() {
          return bList;
       }

       //checks the status by calling getStatus in class B
       public Status getStatus() {
          //status is an enum consists of PASSED and FAILED
          Status finalStatus = Status.PASSED;
          for (B be : this.getTestList()) {
             if (be.getStatus() != Status.PASSED) {
                finalStatus = Status.FAILED;
                break;
             }
          }
          return status;
       }
    }

    public Class B {
       private Status status = Status.FAILED;   

       public getStatus() {
          return status;
       }

       public void setStatus(Status status) {
          this.status = status;
       }
    } 
```

在名为 Test 的类中测试 getStatus 和 getTestList 方法的最佳方法是什么？

非常感谢你....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T18:17:10.803

我看着你的`ClassA`，我想知道如何`bList`设置任何东西。现在，除了 null 之外没有其他办法，这意味着`getStatus`每次都会抛出一个空指针异常。

您的问题是您正在考虑如何测试**方法**而不是考虑如何测试**行为**。这是一个问题的一个原因是你的类必须以某种方式适应你的应用程序的其余部分。为了确保它做到这一点，它需要某些行为，而不是每个方法中的某些细节。所以唯一有意义的测试是检查行为。

**也许更阴险的是，测试单个方法会使**您专注于您实际编写的代码。如果您在编写测试时正在查看代码，那么您的测试将成为一个自我实现的预言。你可能错过了你的班级需要提供的一整套行为；但是如果你只测试你的班级**确实**提供的行为，你永远不会知道。

所以，回到手头的问题。我看到了你的班级可能会实现的四种，也许是五种行为。也许还有更多 - 很难判断您是否只向我们展示代码而不是规范。你应该为每一个写一个测试。我坚信每个测试的名称应该描述行为，而不是反映测试使用的方法的名称。在这种情况下，我可能会选择这样的名称。

```
public void statusIsPassedWhenEveryTestPassed()
public void statusIsFailedWhenEveryTestFailed()
public void statusIsFailedWhenSomeTestsPassedSomeFailed()
public void statusIsPassedWhenNoTests()
public void statusIsPassedWhenTestsNotSet() // this one currently fails 
```

在每个测试中，我会创建一个 的对象`ClassA`，然后做任何必须做的事情来设置`bList`对象内的 。最后，我会调用`getStatus`并断言返回值是我想要的。但重要的一点是，每个测试（最后一个除外）都使用不止一种方法`ClassA`，因此这些不是单独方法的测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:37:35.463

您可以为受保护的对象提供设置器（或构造函数注入），然后在测试用例中扩展类以模拟对象，或者您可以尝试使用类似[powermock](http://code.google.com/p/powermock/)的东西。您仍然需要提供一种方法来设置这些对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T16:48:25.567

我想这取决于你如何`testList`在单元测试中填充。如果你有一个 setter，那么你就不需要任何模拟框架

```
class TestTest {

  Test test = new Test();

  @Test void should_return_failed_if_a_single_test_failed() {
     givenTestListWithOneFailedTest();
     assertThat(test.getStatus(), is(Status.FAILED))
  }

  void givenTestListWithOneFailedTest() {
     test.setTestList(createSomeTestListWithOnlyOneFailedTest());
  }

  @Test void should_return_passed_if_all_tests_passed() {
     // ...
  }

} 
```

# android - 我们如何找到android apk发送请求的url？

> ID：12750200
> 
> 赞同：1
> 
> 时间：2012-10-05T16:16:18.423
> 
> 标签：android, security, apk

我想检查一个应用程序是否是垃圾邮件应用程序。为此，我需要找出它发送请求的 url。我怎样才能知道？

我已经使用 apktool 反编译了该应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:21:57.850

我的建议是嗅探流量，它更容易更快。将 apk 加载到模拟器而不是设备上，然后启动 Wireshark 或 tcpdump 的副本并观察从模拟器发出的数据包。根据您的配置，您可以应用过滤器来缩小您捕获的数据包的范围。

# c# - 是否存在抽象意义上表示当前位置的 URI？

> ID：12750205
> 
> 赞同：1
> 
> 时间：2012-10-05T16:16:35.783
> 
> 标签：c#, uri, relative-path

我很好奇是否有代表当前位置*概念的 URI。*

我在 C# 中尝试了这段代码

```
[Test]
public void TestUri()
{
    Uri a = new Uri(".", UriKind.Relative);
    Console.WriteLine(a);
} 
```

它抛出`System.UriFormatException : Invalid URI: The format of the URI could not be determined.`

所以我有两个问题：

1.  此构造是否定义为 URI 规范的一部分？
2.  如果是这样，我如何在 C# 中构造一个符合要求的实例？

（我意识到我可以检查 URI 引用是否为 null 来实现这个......）

# c# - 使用 NetworkStream 发送数据

> ID：12750209
> 
> 赞同：2
> 
> 时间：2012-10-05T16:16:38.397
> 
> 标签：c#, tcpclient, networkstream

在我的 Windows 服务中，我需要将数据流式传输到 tcp 服务器。我声明了一个全局 TcpClient 和 NetworkStream 并在服务启动时启动它们。每 30 秒，我会通过大约 30-40 个字符串的数组发送到 tcp 服务器。

发送方法如下所示：

```
 private void sendMessage(string message)
    {
            Byte[] data = System.Text.Encoding.ASCII.GetBytes(message);
            Globals._stream.Write(data, 0, data.Length);

            if (Globals._responseEnabled)
            {
                data = new Byte[256];
                String responseData = String.Empty;

                Int32 bytes = Globals._stream.Read(data, 0, data.Length);
                responseData = System.Text.Encoding.ASCII.GetString(data, 0, bytes);

                if (Globals._logStream)
                    Globals._el.writeEventToWindowsLog("Received: " + responseData, "Info");
            }
    } 
```

问题是每 30 秒只发送几个数据包，其中包含所有字符串，我希望每个字符串在一个数据包中发送。

那么如何让 NetworkStream.write 方法立即发送数据包呢？如果我每次调用 send 方法（大约每分钟 60 次）时都声明一个新的 TCPClient 和 NetworkStream，则数据是单独发送的，但这不是一个很好的解决方案。我试过 NetworkStream.flush 但那不起作用..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T16:25:31.973

您应该将TcpClient 上的[NoDelay 属性](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.nodelay.aspx)`true`设置为;

> 当 NoDelay 为 false 时，TcpClient 在收集到大量传出数据之前不会通过网络发送数据包。由于 TCP 段中的开销量很大，发送少量数据是低效的。但是，确实存在您需要发送非常少量的数据或期望您发送的每个数据包立即响应的情况。

由于您将其包装在流中，因此您可能仍需要刷新流以立即发送。

# jquery - 用于图像和描述的 jQuery 滑块

> ID：12750210
> 
> 赞同：3
> 
> 时间：2012-10-05T16:16:38.890
> 
> 标签：jquery, html, css

我正在尝试为我的投资组合网站创建一个滑块。

为了帮助表达我想要实现的目标，这是我希望它看起来像的图像...... ![在此处输入图像描述](../Images/c3bdd43472d0c5a593c213cd0a11a466.png)

基本上，当您点击下一个或上一个箭头时，屏幕截图和描述性文本都会单独滑动（如轮播效果），显示下一个屏幕截图和描述。我猜这是在 jQuery 中完成的，但是我看过并尝试过的其他 jQuery 滑块一次全部滑过。

有谁知道如何实现我想要做的事情，或者知道一个有教程的网站？

提前谢谢了

汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:33:48.020

@tom 每当我需要使用轮播时，我都会使用[this](http://twitter.github.io/bootstrap/examples/carousel.html)。希望这会帮助你。它最好的部分是，它是响应式的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:26:55.697

首先标签 jquery-ui-slider 是指一个滑块，它会根据手在滑块上的位置来改变值，完全不同的 jquery 部分，

但无论如何，你需要一个允许你滑动内容 div 的滑块插件，[这里](http://www.aakashweb.com/jquery-plugins/lite-content-slider/#docs)是一个例子

然后在 div 中，您将放置图像和描述并将其样式设置为使用 css 看起来很漂亮

像这样

```
<div class="sliderWrap">
     <div class="sliderContent">
          <img src="..." />
          Content 1 goes here
     </div>

     <div class="sliderContent">
          <img src="..." />
          Content 2 goes here
     </div>  
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T16:34:09.800

这是一个非常高级的问题，所以我只能给你一个类似的答案。以下是我将如何处理您的设计。脚步：

1) 在 UL 中布置幻灯片和说明。每个 IL 包含相同的布局，但具有不同的图像和描述。

2) 使用 CSS，设置 UL 样式以将所有 LI 元素显示为固定宽度的内联块。

3）将你的 UL 放在一个包装器 DIV 中，溢出设置为隐藏

4) 使用 JQuery 或简单的 javascript 简单地增加或减少 UL 的相对位置，增量等于您的 LI 的固定宽度。JQuery 将帮助您更轻松地为运动设置动画（请参阅 JQuery Animate()）。

您的基本结构如下所示：

```
<div id="slider">
    <ul>
        <li><img src="slide1.png">Slide 1 description text Slide 1 description text Slide 1 description text Slide 1 description text </li>
        <li><img src="slide2.png">Slide 2 description text Slide 2 description text Slide 2 description text Slide 2 description text </li>
        <li><img src="slide3.png">Slide 3 description text Slide 3 description text Slide 3 description text Slide 3 description text </li>
        <li><img src="slide4.png">Slide 4 description text Slide 4 description text Slide 4 description text Slide 4 description text </li>
        <li><img src="slide5.png">Slide 5 description text Slide 5 description text Slide 5 description text Slide 5 description text </li>
        <li><img src="slide6.png">Slide 6 description text Slide 6 description text Slide 6 description text Slide 6 description text </li>
    </ul>
</div>

<input type="button" id="slide_left" value="LEFT"> 
<input type="button" id="slide_right" value="RIGHT"> 
```

这是一个非常基本的骨架，但应该是一个好的开始。您的 CSS 可以完成其余的工作。

这是CSS：

```
#slider { width:600px; height:250px; background:url('slider_laptop_bg.png'); background-color:#eee; overflow:hidden; }
#slider ul { position:relative; left:0px; list-style-type:none; width:5000px; hieight:100%; padding:0; margin:0; }
#slider ul li { float:left; width:600px; height:250px; display:inline; padding:0px; margin:0; }
#slider ul li img { float:left; width:250px; height:200px; } 
```

这是启用它的 JQuery。查看 Animate() 以获得更高级的东西。您还需要添加幻灯片结束检查和其他一些细节。

```
$(document).ready(function () {

    $('#slide_left').on('click', function () {
        $('#slider ul').css('left', $('#slider ul').position().left - 608);
    });

    $('#slide_right').on('click', function () {
        $('#slider ul').css('left', $('#slider ul').position().left + 608);
    });

}); 
```

希望这可以帮助。

# c# - 无法写入 HKEY_CURRENT_USER

> ID：12750211
> 
> 赞同：2
> 
> 时间：2012-10-05T16:16:45.020
> 
> 标签：c#, windows, registry

我有一个`C#`程序（VS2010）将值写入`HKEY_CURRENT_USER`我们创建的几个注册表项。通常这工作正常，在`Win XP, Vista, and 7, x86 and x64`. 但是在某些机器上，密钥只是没有被写入。没有抛出异常，之后键和值就不存在了。

我们正在拔头发，试图弄清楚为什么会发生这种情况。这真的是零星的......在一台机器上它不起作用 - 但在同一个办公室或域中的所有其他机器上都可以工作。

我们应该寻找什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T22:37:00.807

你所描述的听起来很像微软的[Registry Virtualization](http://msdn.microsoft.com/en-us/library/windows/desktop/aa965884%28v=vs.85%29.aspx)。

但是，据我了解，这仅适用于 32 位应用程序的 HKEY_LOCAL_MACHINE\Software。

注册表虚拟化是在 Windows Vista 中引入的，作为一种提供向后兼容的方式，这些应用程序不是使用 Vista 的 UAC 编写的。这个想法是，它将通常会影响注册表敏感区域（如 HKLM）的注册表操作重定向到特殊位置，唯一的影响将是当前用户。它应该也可以向后工作 - 当访问注册表的这些部分之一时，它会在失败之前检查重定向的位置，然后再查找不存在的密钥。

# vba - 围绕#error 编码

> ID：12750212
> 
> 赞同：0
> 
> 时间：2012-10-05T16:16:46.960
> 
> 标签：vba, reporting-services

嗨，我有 2 个带有日期的单元格（比如单元格 A 和单元格 B）。我想看看单元格 A < 单元格 B。但是，单元格 A 有时可能是空白的。我想忽略计算。

似乎 SSRS 会评估所有内容，即使它不在函数的逻辑步骤中，因为我编码的任何安全防护都被忽略了。因此，当单元格 A 为空白时，我总是会收到 #error。

我尝试编写一些 VB 代码来进行此计算，因为我认为这可以缓解问题。但是，以下函数也会出现同样的问题：

```
Public Function CheckForError(ByVal Baseline as String, ByVal Current As String) As Boolean

If IsError(DateValue(Baseline)) Then
    Return False
Else 
    Return True
    End If
End Function 
```

我的表达是这样的：

```
=Code.CheckForSlip(ReportItems("Milestone_Baseline_Date").Value, ReportItems("Milestone_Current_Date").Value) 
```

我显然希望该函数返回 false 而不是 #error，但这种努力不起作用。

谁能帮我这个？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:46:31.577

检查字符串长度不返回 null

```
Public Function CheckForError(ByVal Baseline as String, ByVal Current As String) As Boolean

If Len(Baseline) < 1 Then
    Return False
Else 
    Return True
    End If
End Function 
```

# asp.net - 在服务器上解压文件 (Windows , plesk)

> ID：12750216
> 
> 赞同：-1
> 
> 时间：2012-10-05T16:17:00.557
> 
> 标签：asp.net, plesk

我有一个上传到我的主机的文件，该文件有密码，如何在服务器上解压缩文件？

我知道密码！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:20:23.050

您可以使用[SharpZipLib](http://www.icsharpcode.net/OpenSource/SharpZipLib/)压缩和解压缩文件。

# sql - PostgreSQL 中的最新表修改时间

> ID：12750222
> 
> 赞同：6
> 
> 时间：2012-10-05T16:17:32.457
> 
> 标签：sql, postgresql

我需要获取表格的最新修改时间，所以遇到了

```
select relfilenode from pg_class where relname = 'test'; 
```

这给了我 relfilenode id，这似乎是一个目录名

```
L:\Databases\PostgresSQL\data\base\inodenumber 
```

我后来提取了最新的修改时间。

这是正确的方法还是有更好的方法可以做到这一点

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T00:04:43.737

测试表的 relfilenode 的 mtime 将无法正常工作。正如 Eelke`VACUUM`在其他操作中指出的那样，将修改时间戳。提示位设置也会修改表，使其看起来被`SELECT`. 此外，有时一张表与其磁盘关系（1GB 块）有多个分支，您必须检查所有这些分支才能找到最新的。

如果要保留表的最后修改时间，请添加一个`AFTER INSERT OR UPDATE OR DELETE OR TRUNCATE ... FOR EACH STATEMENT`触发器来更新用于跟踪修改时间的表中的时间戳行。

触发器的缺点是它会竞争表上的单行锁，因此它会序列化所有事务。它还会大大增加出现死锁的机会。您真正想要的可能是非事务性的，在事务发生时不必回滚，如果多个事务更新一个计数器，则最高值获胜。没有类似的内置功能，尽管它可能不像 C 扩展那样难。

一个稍微复杂一点的选项是创建一个触发器，[用于`dblink`](http://www.postgresql.org/docs/current/static/dblink.html)更新最后​​更新的计数器。这将避免大多数争用问题，但实际上会使死锁变得更糟，因为 PostgreSQL 的死锁检测将无法“看到”两个会话通过中介死锁的事实。您需要一种`SELECT ... FOR UPDATE`超时方法以使其可靠，而不会过于频繁地中止事务。

不过，无论如何，触发器都不会捕获 DDL。DDL 触发器（“事件触发器”）将出现在 Pg 9.3 中。

也可以看看：

*   [如何找到最后一次更新 PostgreSQL 数据库的时间？](https://stackoverflow.com/questions/899203/how-do-i-find-the-last-time-that-a-postgresql-database-has-been-updated)
*   [如何在 postgres 中获取表的“最后修改时间”？](http://database.ittoolbox.com/groups/technical-functional/postgresql-l/how-to-get-last-modified-time-of-the-table-in-postgres-2285265)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T16:25:02.963

我认为这不是完全可靠的，因为真空也会修改包含表格的文件，但表格的逻辑内容在真空期间不会改变。

您可以为 INSERT、UPDATE 和 DELETE 创建触发器，以维护另一个表中每个表的最后修改时间戳。此方法对性能有轻微影响，但会提供准确的信息。

# javascript - 如何将 jsp 带入现有的模态窗口？

> ID：12750224
> 
> 赞同：1
> 
> 时间：2012-10-05T16:17:34.613
> 
> 标签：javascript, jquery, jsp, modal-dialog

我有一个名为 kmodal 的模态窗口，其中包含一些链接。当我单击一个链接时，它为我提供了一个接受按钮。现在，当我单击此按钮时，我必须将我的 jsp 带入此模式而不关闭它，并且我必须在不影响布局的情况下摆脱其他链接。我怎样才能做到这一点？

我试过这个：

```
 jQuery('#button').load('myJSP', function() {
        jQuery(this).show(); 
```

但这不起作用。有人可以在这里提出任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:22:12.707

您只需要在没有回调函数的情况下进行加载 - 而且您不想在按钮内加载 jsp。您希望它在模式中。您可以在此处阅读有关[.load()的更多信息](http://api.jquery.com/load/)

```
jQuery('yourmodalcontainer').on('click','#button',function(){
    jQuery('yourmodalcontainer').load('myJSP');
    // this will load your jsp into the modal
}); 
```

我的示例使用委托，因为我不知道如何/何时创建您的按钮

当绑定时dom中不存在您的元素时，您需要使用委托。所以我实际上不确定您的模态或它是如何创建的..最好绑定到最近的父元素静态且在 dom 就绪时可用.. 但为了安全起见，您可以将其绑定到身体

```
jQuery('body').on('click','#button',function(){ 
```

# javascript - JQuery Mobile、Querystrings 和多个页面 ID

> ID：12750227
> 
> 赞同：2
> 
> 时间：2012-10-05T16:17:45.307
> 
> 标签：javascript, jquery, jquery-mobile

我无法弄清楚我的 JQuery Mobile 网站哪里出了问题。我有一个指向另一个使用查询字符串的 JQuery Mobile 页面的链接。链接看起来像这样。

```
<li><a href="section.php?d=sb&s=1">News</a></li> 
```

所有正常的内部 JQuery Mobile 链接都不会产生问题。只有通过查询字符串转到另一个 JQuery Mobile 页面的链接才会产生此问题。问题是当点击上面的链接时，我的 dom 看起来像这样。

![在此处输入图像描述](../Images/3bf1823376fcdacc017b160902a49d93.png)

要长成这样。

![在此处输入图像描述](../Images/e3d347f752a0cdeaaa126a320ebedd98.png)

在 SO 上很难看到图像，所以它们在 imgur 上。 [http://imgur.com/a/2Z1Ss](http://imgur.com/a/2Z1Ss)

这些是初始页面和第二页的外观的萤火虫 DOM 视图。我的问题是为什么现在有两个具有相同 ID 的 DOM 元素？这是，如果我错了，请纠正我，一旦单击此链接，它就不是有效的 HTML 页面。如果我在 JQuery Mobile 中使用查询字符串，那么我错过了什么导致此问题的最佳实践？

我需要做些什么来避免在同一页面上出现多个 ID，因为它们会导致我的 javascript 函数出现问题。我对这个问题感到困惑，但希望一些 JQM 专业人士可以向我解释我做错了什么。我敢肯定这很傻。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T16:41:46.517

当我以为我在做一些愚蠢的事情时。我的 index.php 有一个 id="frontpage" 的页面，而我的 section.php 有一个 id="frontpage" 的页面。我刚刚给 section.php 页面一个新的 id，页面现在有效，我的功能正常工作。

# c# - 在 ac# Web 服务中通过 https 进行通信

> ID：12750229
> 
> 赞同：0
> 
> 时间：2012-10-05T16:18:00.923
> 
> 标签：c#, .net, web-services, https

我有一个客户需要通过 HTTPS 进行安全交易。他们不提供任何可使用的 Web 服务，因此他们通过带有 SSL 的 HTTPS 发布了一个简单的帖子。我有两个应用程序需要使用此服务，一个是网站，一个是 iOS 应用程序，所以我想节省一些时间和精力，我会编写一个代理 Web 服务，这两个应用程序都可以用来传回数据在客户端系统之间来回切换。

因此，我将 Web 服务放在服务器上，并带有一个被应用程序使用的暴露的 Web 方法。变量在方法中，有人可以帮我通过 https POST 将数据发送到所需的 URL 吗？我以前从来没有做过这样的事情，我有点迷茫。Web 服务是用 C# 编写的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:25:51.100

如果您使用的是 .NET 4.5，则可以使用 System.Net.Http.HttpClient

[http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.aspx](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.aspx)

或者，如果您使用的是旧版本的框架，则 System.Net.HttpWebRequest。

这是一个例子

[C# 中带有 https 的 HttpWebRequest](https://stackoverflow.com/questions/542024/httpwebrequest-with-https-in-c-sharp)

# html - 将 CSS 存储在 mysql 数据库中

> ID：12750231
> 
> 赞同：4
> 
> 时间：2012-10-05T16:18:05.523
> 
> 标签：html, mysql, css, stylesheet

我将 CSS（样式表）存储在 MySQL 数据库中，所以当我调用它时，我只有一种方法，即在页面本身中回显它。无论如何，我基本上可以将数据库数据视为 .css 文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:23:25.077

您可能需要在启动期间读取一次 CSS 并将其保存到部署文件夹中的某个文件中，然后在代码中使用`<link rel="stylesheet" type="text/css" href="style.css">`. 具体如何执行将取决于您的环境和特定的 Web 服务器。

在任何情况下，出于各种原因，总是首选将 CSS 作为外部资源，例如，因为 CSS 资源由 Web 浏览器缓存，而不是动态页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:31:27.917

决定只从 .css 文件中加载它自己，感谢您的帮助。

# ruby-on-rails - 在使用 RSpec 测试控制器时模拟 CanCan 授权

> ID：12750232
> 
> 赞同：5
> 
> 时间：2012-10-05T16:18:11.513
> 
> 标签：ruby-on-rails, ruby, testing, rspec, cancan

这是我要测试的控制器：

```
class UsersController < ApplicationController
  load_and_authorize_resource

  def index
    @users = User.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @users }
    end
  end

  def show
    @user = User.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @user }
    end
  end

  #other actions here

end 
```

如您所见，我使用 CanCan 方法`load_and_authorize_resource`，因此我为 RSpec 编写了一个 ControllerHelper：

```
# spec/support/controller_spec.rb
module ControllerHelper
  def should_authorize(action, subject)
    controller.should_receive(:authorize!).with(action, subject).and_return('passed!')
  end
end 
```

然后我编写了 UserController 规范：

```
# spec/controllers/users_controller_spec.rb
require 'spec_helper'

describe UsersController do

  describe "GET #index" do
    before do
      @user = mock_model(User)
      should_authorize(:index, @user)
      User.stub!(:find).and_return(@user)
    end

    context "if the user passes all the authorizations" do
      it "populates an array of users" do
        User.should_receive(:find).and_return(@user)
        get :index
      end
      it "renders the :index view" do
        get :index
        response.should render_template :index
      end
    end
  end
end 
```

但我得到这个错误

```
Failures:

1) UsersController GET #index if the user passes all the authorizations populates an array of users
       Failure/Error: get :index
         #<UsersController:0x000000037ee750> received :authorize! with unexpected arguments
            expected: (:index, #<User:0x1bf597c @name="User_1001">)
            got: (:index, User(id: integer, email: string, encrypted_password: string, reset_password_token: string, reset_password_sent_at: datetime, remember_created_at: datetime, sign_in_count: integer, current_sign_in_at: datetime, last_sign_in_at: datetime, current_sign_in_ip: string, last_sign_in_ip: string, created_at: datetime, updated_at: datetime, phone: string, address: string, city: string, cap: string, partitaiva: string, ragionesociale: string))
         # ./spec/controllers/users_controller_spec.rb:16:in `block (4 levels) in <top (required)>'

2) UsersController GET #index if the user passes all the authorizations renders the :index view
       Failure/Error: get :index
         #<UsersController:0x00000003802f98> received :authorize! with unexpected arguments
            expected: (:index, #<User:0x1bb0048 @name="User_1002">)
            got: (:index, User(id: integer, email: string, encrypted_password: string, reset_password_token: string, reset_password_sent_at: datetime, remember_created_at: datetime, sign_in_count: integer, current_sign_in_at: datetime, last_sign_in_at: datetime, current_sign_in_ip: string, last_sign_in_ip: string, created_at: datetime, updated_at: datetime, phone: string, address: string, city: string, cap: string, partitaiva: string, ragionesociale: string))
         # ./spec/controllers/users_controller_spec.rb:19:in `block (4 levels) in <top (required)>' 
```

编辑

现在我的规格是这样的，它的工作原理！

```
# spec/controllers/users_controller_spec.rb
require 'spec_helper'

describe UsersController do

  describe "GET #index" do
    before do
      @user = mock_model(User)
      should_authorize(:index, User)
      User.stub!(:all).and_return(@user)
    end

    context "if the user passes all the authorizations" do
      it "populates an array of users" do
        User.should_receive(:all).and_return(@user)
        get :index
      end
      it "renders the :index view" do
        get :index
        response.should render_template :index
      end
    end
  end
end 
```

谢谢，

恩里科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:42:37.457

当您在 cancan 中使用 load_and_authorize_resource 时，它​​仅在操作为 、 或（我认为）时将用户实例传递`update`给`show`授权`edit`方法`destroy`。当操作是`index`它时，它会传递 User 类。

这就是为什么你内心的期望`should_authorize`失败了

你可以在这里看到 cancan 是如何加载的：

[https://github.com/ryanb/cancan/blob/master/lib/cancan/controller_resource.rb#L76](https://github.com/ryanb/cancan/blob/master/lib/cancan/controller_resource.rb#L76)

# c# - 填充 WriteableBitmap 更高效

> ID：12750239
> 
> 赞同：0
> 
> 时间：2012-10-05T16:18:28.177
> 
> 标签：c#, microsoft-metro, flood-fill

我即时创建 WriteableBitmaps。这是最有效和最好的方法吗？

```
var image = new WriteableBitmap(128, 128);
var colorBuffer = Enumerable.Repeat(
    new[] {this.ImageColor.B, this.ImageColor.G, this.ImageColor.R, this.ImageColor.A},
    image.PixelHeight*image.PixelWidth).SelectMany(b => b).ToArray();

using(var stream = image.PixelBuffer.AsStream())                    
    stream.Write(colorBuffer, 0, colorBuffer.Length); 
```

最后，我将图像作为`ImageSource`对象返回。所以也许还有另一种方法可以创建`ImageSource`具有统一颜色的颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T16:26:19.843

也许是的，WritableBitmap 最强大的方面是允许将 UIElement 渲染到位图的 Render() 方法。这可用于转换图像（缩放等）或渲染叠加层等。使用 WriteableBitmap，您还可以将用户控件或任何自定义控件转换为图像。

# objective-c - 添加注释时 MapView 平移

> ID：12750248
> 
> 赞同：0
> 
> 时间：2012-10-05T16:19:02.050
> 
> 标签：objective-c, ios, mkmapview, mkannotation

当我添加新注释时，有没有办法阻止我的 MKMapView 动画？

我的地图上有许多注释，我希望通过在线 API 定期更新这些注释。到目前为止，我只是删除了所有注释并添加回新的 API 结果。但是，每当添加任何注释时，地图都会自动平移到它们，这会让人迷失方向。地图应该停留在用户当前放置的任何位置。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:35:29.367

我在添加注释功能中设置区域。面掌。

# php - 关于isset($_POST['submit'])的简单Q

> ID：12750249
> 
> 赞同：0
> 
> 时间：2012-10-05T16:19:06.610
> 
> 标签：php, forms, if-statement, submit, isset

```
if(isset($_POST['submit'])){
//code here
} 
```

如果我错了，请纠正我，但我相信如果用户使用“输入”键提交表单，上面的代码将不起作用。

这是真的？如果是这样，我是否可以使用另一个 if 语句来代替使用提交按钮和按下回车键的用户？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T16:21:24.373

要检查表单是否已发布到服务器，请使用：

```
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    // …
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T16:20:31.580

如果您不确定是否`submit`会在 POST 中，您可以使用 overkill 方法：使用一些唯一名称`<input>`在其中创建 hidden 并验证它是否在 POST 数据中：`<form>`

```
<input type="hidden" name="some_name" value="OK" /> 
```

在 PHP 代码中：

```
if (isset($_POST['some_name']) && $_POST['some_name'] == "OK") {
    // ...
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-05T16:20:17.150

这不是真的，如果`submit`是默认提交按钮。

另外，如果我理解您的意图，我认为`$_SERVER['REQUEST_METHOD']`您`POST`提交表单或其他方式时会这样做。`GET`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T16:22:13.637

我将扩展其他答案：如果`submit`是`input type=submit`并且输入键触发该按钮，则可能不是真的。如果它是`type=img`或 a `<button>`，则输入键的行为可能会有所不同（并且可能不会设置该`_POST`值）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T16:22:32.753

如果提交是页面上唯一的提交按钮，或者页面上的第一个提交按钮（如果有多个），那么提交应该没问题，这可能不太可能。

另一种方法是使用隐藏输入。

例如

```
<input type="hidden" id="processed" name="processed" value="1" /> 
```

然后在您的提交脚本中

```
if(isset($_POST['processed'])){
    //code here
} 
```

# ruby-on-rails - Rails：“inverse_friendships”从何而来？

> ID：12750250
> 
> 赞同：0
> 
> 时间：2012-10-05T16:19:20.213
> 
> 标签：ruby-on-rails

我正在尝试在我的网站上实现一个朋友系统，刚刚完成了一个关于自引用关联的 railscast (#163) (http://railscasts.com/episodes/163-self-referential-association)。在视频中的某一时刻，他创建了与`inverse_friendships`表的新关系，但我从未见过他生成`inverse_friendships`模型或迁移。`inverse_`这与 Rails 魔法有关还是我错过了什么？

模型/用户.rb

```
has_many :friendships
has_many :friends, :through => :friendships
has_many :inverse_friendships, :class_name => "Friendship", :foreign_key => "friend_id"
has_many :inverse_friends, :through => :inverse_friendships, :source => :user 
```

另外，他`friends`从哪里得到专栏？当他为 生成脚手架时`friendship`，他创建了两列`user_id:integer friend_id:integer`，但在实际的朋友表上没有任何内容。

生成脚手架

`script/generate nifty_scaffold friendship user_id:integer friend_id:integer create destroy rake db:migrate`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:19:53.163

没有这样的表。`:class_name => "Friendship"`表示它正在使用`Friendship`模型，该模型使用表`friendships`。

# mysql - Drupal 7 手动查询 webforms 数据库表

> ID：12750253
> 
> 赞同：3
> 
> 时间：2012-10-05T16:19:37.810
> 
> 标签：mysql, drupal-7, drupal-webform

**任何人都可以让我深入了解我做错了什么吗？**

我有一个包含 32 个组件的网络表单，我正在尝试创建提交数据的 XML。该表格已填写并提交一次。

```
$query  =   db_select('webform_submitted_data', 'wsd');
$query->join('webform_component', 'wc', 'wsd.cid = wc.cid');

$query->fields('wsd', array('nid', 'cid', 'data', 'sid'));
$query->fields('wc', array('form_key', 'name'));

$results    =   $query->execute()->fetchAll(); 
```

如您所见，我在 2 个表之间执行连接，以便为每个填充的 webform 组件获取 form_key。

问题是我得到的结果多于 32 个 - 不知何故，结果出现了严重错误。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-05T17:12:29.580

如果您尝试获取提交数据，您可以使用 webforms api 通过[webform_get_submissions](http://api.drupalize.me/api/drupal/function/webform_get_submissions/7)函数检索特定 webform 的所有提交。然后，您可以解析每次提交的数据以构建您的 XML。

```
module_load_include('inc','webform','includes/webform.submissions');
$submissions = webform_get_submissions(array('nid'=>$webform_nid));

foreach ($submissions as $submission){
    foreach ($submission->data as $row=>$data){
        ...
    }
} 
```

# reporting-services - SSRS 2008 R2 / 2012 宽度属性测量单位默认设置

> ID：12750257
> 
> 赞同：3
> 
> 时间：2012-10-05T16:19:47.483
> 
> 标签：reporting-services, ssrs-2008-r2, ssrs-2012

有没有办法为用于调整单元格/行大小的宽度/高度属性配置默认测量单位？

如果我添加一个表格并将列的宽度配置为“pt”而不是“cm”中指定的值，我必须在指定宽度时将它们全部更改（我使用 pt 来克服 SSRS 莫名其妙的无法导出到 Excel 时正确对齐列）。

有没有办法可以从 cm 更改为 pt 作为报告中所有度量的默认值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T16:42:43.637

据我了解，英制或公制只是基于 Windows 区域设置。目前无法进一步自定义默认过去。

我见过一种[修改报告模板的](http://blogs.msdn.com/b/bimusings/archive/2005/12/06/500462.aspx)解决方法，它可能会使您的生活更轻松，但这种方法也有局限性。

通过 Microsoft 连接查看，我还没有看到此作为功能请求发布。在我看来，这将是一个很好的建议。

# scala - 在 Scala 案例类中更新时转换值（例如覆盖设置器）

> ID：12750259
> 
> 赞同：0
> 
> 时间：2012-10-05T16:20:05.703
> 
> 标签：scala

假设我有一个 Scala 案例类，如下所示：

```
case class Item(
  roundedValue: Double = 0.00) 
```

每次更新变量时，我都想对 roundedValue 执行以下舍入操作：

```
roundedValue = math.round(roundedValue*100)*0.01 
```

在其他语言中，我只会覆盖 roundedValue 的设置器，但似乎我无法覆盖案例类变量的设置器，否则它不会编译。

我见过的一种解决方案是将 roundedValue 重命名为 _roundedValue 并将其设为私有，然后添加公共方法来模拟 getter 和 setter（使用舍入逻辑）：[Overriding setter on var](https://stackoverflow.com/questions/4986345/overriding-setter-on-var)

然而，当使用命名参数时，这使得案例类的构造函数使用非常尴尬。有没有其他方法可以做到这一点，或者这是 Scala 中案例类的限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:10:41.287

如果你能让它工作，我建议保持你的案例类不可变，但制作一个“复制”方法，在新实例上执行你的突变。

```
case class Item(roundedValue: Double = 0.0) {
  def withValue(newValue: Double) = Item(math.round(newValue*100)*0.01)
} 
```

您可能还/相反希望在伴随对象中具有类似的方法：

```
object Item {
  def withValue(value: Double) = Item(math.round(roundedValue*100)*0.01)
} 
```

# lua - 使用 lua 5.1.5 调用 'require ("lsqlite3")' 时得到 SIGSEGV

> ID：12750264
> 
> 赞同：1
> 
> 时间：2012-10-05T16:20:43.567
> 
> 标签：lua

我已经构建了 lua 5.1.5 和 lsqlite3-0.8.1。它们都在我的 RedHat Linux 上运行良好。

然后我将它们移植到我的 MIPS 开发板上。lua 和其他模块（如 luafilesystem、md5、cgilua 和 wsapi）运行良好。但 lsqlite3 不起作用。

当我在 lua 命令行中执行 require("lsqlite3") 时，它会返回以下错误消息：

# lua

Lua 5.1.5 版权所有 (C) 1994-2012 Lua.org, PUC-Rio

> require("lsqlite3") do_page_fault() #2: 从 00000000 (epc == 00000000, ra == 2ac36144) 发送 SIGSEGV 到 lua 进行无效读取访问

任何人都可以帮我解决它吗？谢谢！

我在解决这个问题方面进展甚微，我用 gcc 编译选项“-Wl,-E”重建了 LUA，后来又重建了 lsqlite3。我在 lua 命令行中执行了 require ("lsqlite3") ，它没有打印任何消息。我继续运行其他一些数据库操作命令，发现它们都被成功执行了。看来问题已经解决了，我应该很高兴。但又提出了一个更奇怪的问题。

如果我将语句 require("lsqlite3") 放入一个文件中，然后以这种方式执行该文件：

> lua 文件

它仍然打印这样的错误消息：

> do_page_fault() #2: 向 lua 发送 SIGSEGV 以获取来自 2ada054c 的无效读取访问（epc == 2ada054c，ra == 2abdceac）

如果我把更多的数据库操作语句放到一个文件中，然后通过lua运行这个文件。Lua 可以给出正确的查询操作结果并将值正确插入到表中，但总是打印上面显示的错误消息。

如果我在 lua 命令行界面中逐个运行文件中的句子，它永远不会打印此错误消息。

执行“require”函数时似乎给出了错误消息。但是，如果我将 require("lfs") 放入一个文件并通过 lua 运行该文件，它永远不会打印错误消息。

我很困惑 lua 命令行执行和 lua 脚本之间的区别是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T15:59:16.783

`lsqlite3.c`where有三个地方`sqlite_int64`使用（从不`long long`直接使用）。当您构建 sqlite3 时，某些类型将用于 64 位整数；lsqlite3 将通过包含类型`sqlite3.h`的定义来使用相同的类型。

# c - C中char数组成员的默认值是多少？

> ID：12750265
> 
> 赞同：10
> 
> 时间：2012-10-05T16:20:44.347
> 
> 标签：c, arrays, char, default

假设我创建了一个`char`数组，并且假设 char 数组为空。如果我检查数组 ( `arr[0]`) 中第一个元素的值，这个表达式的结果是什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-05T16:40:16.500

这取决于声明数组的位置和方式。

如果数组是在文件范围内声明的（在任何函数之外），或者是声明`static`的，并且没有显式的初始化器，那么数组的内容将被初始化为 0。

如果数组在块范围内（在函数或块内）声明并且未声明`static`，并且没有显式初始化程序，则数组的内容是*不确定*的（本质上是垃圾值，其中一些可能是陷阱表示） .

如果数组已被显式初始化，则它包含初始化程序中的任何内容。

**编辑**

针对下面的评论，请注意您不应该依赖于块范围变量的隐式初始化。如果您需要在创建时将块范围数组清零，请使用初始化程序：

```
char foo[N] = {0}; 
```

当初始化器中的元素少于数组中的元素时，数组中与初始化器中的元素对应的元素将被设置为指定的值；所有剩余的条目将被隐式初始化，就像它们被声明一样`static`。

在上面的示例中，这意味着 的第一个元素`foo`显式设置为`0`，而所有其余元素都隐式设置为`0`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T16:21:47.850

如果它是一个`auto`变量，除非你显式初始化它，否则它将被垃圾填充，因此没有默认值。`arr[0]`可能会包含一个看似随机的值，直到明确更改为包含其他内容。

当然，如果您初始化了数组（这意味着您使用循环或函数调用或任何其他方式显式地用初始值填充数组`memset()`）`for`，您将得到您所期望的：您初始化的值它。

请注意声明和初始化之间的区别。

```
void f(void) {
    int x;  // (1)
    x = 10; // (2)
} 
```

在**(1)**处，您声明了一个`auto`整数变量。它现在有一个未定义的值（垃圾）。在**(2)**处，您正在初始化变量。它现在的值为`10`。

当然，声明和初始化都可以同时完成：

```
void f(void) {
    int x = 10;
} 
```

数组也是如此：

```
void f(void) {
    int x[2];  // x contains 2 junk values, so x[0] == junk
    x[0] = 1;  // x contains { 1, junk },   so x[0] == 1
    x[1] = 2;  // x contains { 1, 2 },      so x[0] == 1
} 
```

或者，声明和初始化它：

```
void f(void) {
    int x[2] = { 1, 2 };
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-05T16:24:28.057

除非您明确指定，否则不要期望任何变量在首次初始化时具有任何特定值。除非您自己设置，否则它将充满随机的东西。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-10-05T16:23:06.067

启动阵列时。你正在分配一个静态内存。然后你会得到分配内存的值，所以它是随机值

如果你想将整个数组设置为 0 则（根据**Hunter McMillen** Remark）

```
char arr[size] = { 0 } 
```

或使用`memset()`功能

```
memset(arr,0,sizeof_your_arr); 
```

# microsoft-metro - Metro应用程序中可以进行Windows身份验证吗？

> ID：12750267
> 
> 赞同：4
> 
> 时间：2012-10-05T16:20:50.487
> 
> 标签：microsoft-metro

我想检索登录用户的用户名。可能吗？该应用程序仅适用于 Intranet。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T16:26:06.870

要将 Windows 身份验证添加到应用程序，请在清单中声明[“企业身份验证”功能](http://msdn.microsoft.com/en-us/library/windows/apps/br211423.aspx)。

有关更多详细信息，请参阅[此相关问题](https://stackoverflow.com/questions/11181821/providing-domain-user-credentials-to-webview-control)中的信息。

编辑：

要检索用户的域名，相信可以使用[`Windows.System.UserProfile.UserInformation.GetDomainNameAsync`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.system.userprofile.userinformation.getdomainnameasync). MSDN 上还有[用户域名示例](http://code.msdn.microsoft.com/windowsapps/User-domain-name-sample-85ce3e49)。

# nant - NANT 脚本检查目录是否为空然后删除

> ID：12750275
> 
> 赞同：1
> 
> 时间：2012-10-05T16:21:37.837
> 
> 标签：nant

我正在尝试做以下事情。我有一个根文件夹，在这 4 个子文件夹下。

1.  检查根目录下的目录是否为空。
2.  如果是，请删除该目录。

你能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:52:55.097

NAnt 的[`delete`](http://nant.sourceforge.net/release/latest/help/tasks/delete.html)任务加上 NAntContrib 的[`fileset::has-files`](http://nantcontrib.sourceforge.net/release/latest/help/functions/fileset.has-files%28System.String%29.html)功能就可以解决问题。

**更新：**这是一个示例，假设您有一个名为的根文件夹和名为的`foo`子文件夹：`bar1``bar4`

```
<target name="go">
  <loadtasks assembly="C:\YourPathToNAntContrib\bin\NAnt.Contrib.Tasks.dll" />
  <property
    name="root"
    value="C:\foo" />
  <property
    name="subfolders"
    value="bar1,bar2,bar3,bar4" />
  <foreach
    item="String"
    in="${subfolders}"
    delim=","
    property="subfolder">
    <property
      name="basedir"
      value="${path::combine(root, subfolder)}" />
    <fileset
      id="files"
      basedir="${basedir}">
      <include name="**/*" />
    </fileset>
    <if test="${not fileset::has-files('files')}">
      <delete dir="${basedir}" />
    </if>
  </foreach>
</target> 
```

# linux - 在文本文件中查找行号 - 无需打开文件

> ID：12750293
> 
> 赞同：7
> 
> 时间：2012-10-05T16:22:33.670
> 
> 标签：linux

在一个非常大的文件中，我需要找到一个字符串的位置（行号），然后提取该字符串上方和下方的 2 行。

立即执行此操作 - 我启动 vi，找到字符串，记下它的行号，退出 vi，然后使用 sed 提取该字符串周围的行。

有没有办法简化这个过程......理想情况下根本不需要运行 vi。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T16:26:44.733

也许像这样使用grep：

```
grep -n -2 your_searched_for_string  your_large_text_file 
```

会给你几乎你所期望的

-n ：告诉 grep 打印行号

-2 ：打印 2 附加行（当然还有想要的字符串）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-05T16:26:49.990

你可以做

```
grep -C 2 yourSearch yourFile 
```

要将其发送到文件中，请执行

```
grep -C 2 yourSearch yourFile > result.txt 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-05T16:26:42.510

用于`grep -n string file`在不打开文件的情况下查找行号。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-05T16:26:37.407

您可以使用`cat -n`显示行号，然后用于`awk`获取 a 之后的行号`grep`以提取行号：

```
cat -n FILE | grep WORD | awk '{print $1;}' 
```

虽然`grep`已经做了你提到的，如果你给`-C 2`（高于/低于2行）：

```
grep -C 2 WORD FILE 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-05T16:29:42.050

您可以使用 grep`-A`和`-B`选项来执行此操作，如下所示：

```
grep -B 2 -A 2 "searchstring" | sed 3d 
```

grep 将找到该行并显示前后两行上下文，稍后用 sed 删除第三行。

# ios5 - [PointInfoController endAppearanceTransition]：发送到已释放实例 0x74d5e90 的消息

> ID：12750295
> 
> 赞同：0
> 
> 时间：2012-10-05T16:22:37.397
> 
> 标签：ios5, view, xcode4.2, presentmodalviewcontroller, dismiss

我在这里需要一点帮助，我已经通过模态加载了一个视图，基本上我现在正试图关闭这个视图，但是在视图消失后它一直在崩溃。

它说*** -[PointInfoController endAppearanceTransition]: message sent to deallocated instance 0x74d5e90

## 下面是 .H 文件：

```
#import <UIKit/UIKit.h>
#import "AppDelegate.h"

@class PointInfoController;

@protocol PointInfoDelegate
- (void)PointInfoDidFinish:(PointInfoController*)PointInfoController;
@end

@interface PointInfoController : UIViewController <UIScrollViewDelegate>
{
IBOutlet UIScrollView *scrollView;

IBOutlet UIImageView *thumbnailView;

IBOutlet UIButton *Dismiss;

id<PointInfoDelegate> delegate;

}

@property (retain) id<PointInfoDelegate> delegate;

@property (retain, nonatomic) IBOutlet UITextView *description;

@property (retain, nonatomic) IBOutlet UIScrollView *scrollView;

@property (retain, nonatomic) IBOutlet UIImageView *thumbnailView;

- (IBAction)DismissView:(id)sender;

@end 
```

## 下面是 .M 文件：

```
#import "PointInfoController.h"
#import "LockOnLocation.h"

@implementation UIScrollView (AutoContentSize)

- (void) setAutosizeContent:(BOOL)autosizeContent {

if (autosizeContent) {
    CGFloat contentWidth =
    self.frame.size.width == self.superview.frame.size.width ?
    self.superview.frame.size.width :
    self.frame.size.width + 10;
    CGFloat contentHeight = 
    self.frame.size.height == self.superview.frame.size.height ?
    self.superview.frame.size.height :
    self.frame.size.height + 164;
    self.contentSize = CGSizeMake(contentWidth, contentHeight);
}
}

@end

@implementation PointInfoController
@synthesize description;
@synthesize scrollView;
@synthesize thumbnailView;
@synthesize delegate;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

- (void)didReceiveMemoryWarning
{
// Releases the view if it doesn't have a superview.
[super didReceiveMemoryWarning];

// Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

/*
// Implement loadView to create a view hierarchy programmatically, without using a nib.
- (void)loadView
{
}
*/

// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
- (void)viewDidLoad
{
self.scrollView.delegate = self;

[super viewDidLoad];
}

- (void)viewDidUnload
{
[self setDescription:nil];
[scrollView release];
scrollView = nil;
[self setScrollView:nil];
[self setThumbnailView:nil];
[thumbnailView release];
thumbnailView = nil;
[Dismiss release];
Dismiss = nil;

[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
}

- (IBAction)DismissView:(id)sender
{
[self dismissModalViewControllerAnimated:YES];
[self release];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
// Return YES for supported orientations
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (void)dealloc {
[description release];
[scrollView release];
[thumbnailView release];
[Dismiss release];
[super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T01:41:55.290

我对这一切都很陌生，我在同一个问题上花了很多天。责备一切，只怪我自己！我发现我无意中释放了引用的实例。就我而言，我已将实例放入 SSLConnectionRef 并 CFRelease 将其放入。我不确定为什么您在查看代码时遇到问题。无论如何，我认为您的编译器会抱怨您的 [instance release] 方法，因为这些方法不再被允许。您遇到问题是因为您和系统都在释放实例。你需要摆脱你的释放，一切都会好起来的。

# jquery - Jquery 附加 html 并在单击附加项目时使用以删除

> ID：12750301
> 
> 赞同：1
> 
> 时间：2012-10-05T16:22:57.030
> 
> 标签：jquery, button, append

我有一个函数可以获取一些数据并生成各种叠加窗口。这会附加一个按钮来关闭窗口。我不知道为什么，关闭按钮的 .click 永远不会被触发（警报甚至不会发生）。以下是相关功能。

```
 //This is what gets appended
function createOpponentMenu(item1, item2) {
    $('<div id="matchMenu"><div id="vs">VS</div><div id="opponent1">' + item1.media + '<div id="vote1">VOTE</div><div class="desciption-container"><h2 class="match-hed">' + item1.name + ' | <span style="font-family:SupriaSans-Regular">' + item1.when + '</span></h2><p class="match-text"><span style="color:red;font-family:SupriaSans-Bold">OFFENSE:</span> ' + item1.offense + '</p><p class="match-text"><span style="color:green;font-family:SupriaSans-Bold">OUTCOME:</span> ' + item1.outcome + '</p></div></div><div id="opponent2">' + item2.media + '<div id="vote2">VOTE</div><div class="desciption-container"><h2 class="match-hed">' + item2.name + ' | <span style="font-family:SupriaSans-Regular">' + item2.when + '</span></h2><p class="match-text"><span style="color:red;font-family:SupriaSans-Bold">OFFENSE:</span> ' + item2.offense + '</p><p class="match-text"><span style="color:green;font-family:SupriaSans-Bold">OUTCOME:</span> ' + item2.outcome + '</p></div></div><div id="matchup-close">Close X</div></div>').appendTo('#bracket-container').fadeIn("slow");
}

// This decides what to append
$(".matchup-container").click(function() {
    for(var i=0; i<matchups.length; i++) {
        if(this.id == "matchup" + (matchups[i].match).toString()){
            createOpponentMenu(matchups[i].id1, matchups[i].id2);
        }
    }
});

    //now I just want to kill the whole thing on close click
$('#matchup-close').click(function() {
    alert("wtf");
    $('#matchMenu').fadeOut("slow").remove();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:27:08.820

您需要在动态创建元素时使用委托 - 元素在绑定时必须存在，否则事件处理程序将永远不会附加到元素。

您正在单击创建元素 - 我假设您在单击另一个元素时绑定事件处理程序

```
$('#bracket-container').on('click','#matchup-close',function(){

}); 
```

通过委派您将事件处理程序附加到静态父元素 - 它会侦听元素上的事件并在它冒泡时处理它

还取决于您使用的 jQuery 版本

> $(选择器).live(事件、数据、处理程序); // jQuery 1.3+
> 
> $(document).delegate(selector, events, data, handler); // jQuery 1.4.3+
> 
> $(document).on(事件、选择器、数据、处理程序); // jQuery 1.7+

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T17:04:33.997

通用代码：

```
##### JQuery Part #####
 $(document).ready(function(){
 function createOpponentMenu() {
   $('<div id="matchMenu"></div>').append($('<div id="matchup-close">Close X</div></div>').click(function(){
       $(this).parent("#matchMenu").fadeOut("slow").remove();  
     })).appendTo('#bracket-container').fadeIn("slow");
}

$(".matchup-container").click(function() {
  createOpponentMenu();
 });
});

####### HTML PART ####
<body>
<a href="#" class="matchup-container">Click Me !! </a><div id="bracket-container"></div>
</body> 
```

对于这个问题，请试试这个。

```
function createOpponentMenu(item1, item2) {
  $('<div id="matchMenu"><div id="vs">VS</div><div id="opponent1">' + item1.media + '<div id="vote1">VOTE</div><div class="desciption-container"><h2 class="match-hed">' + item1.name + ' | <span style="font-family:SupriaSans-Regular">' + item1.when + '</span></h2><p class="match-text"><span style="color:red;font-family:SupriaSans-Bold">OFFENSE:</span> ' + item1.offense + '</p><p class="match-text"><span style="color:green;font-family:SupriaSans-Bold">OUTCOME:</span> ' + item1.outcome + '</p></div></div><div id="opponent2">' + item2.media + '<div id="vote2">VOTE</div><div class="desciption-container"><h2 class="match-hed">' + item2.name + ' | <span style="font-family:SupriaSans-Regular">' + item2.when + '</span></h2><p class="match-text"><span style="color:red;font-family:SupriaSans-Bold">OFFENSE:</span> ' + item2.offense + '</p><p class="match-text"><span style="color:green;font-family:SupriaSans-Bold">OUTCOME:</span> ' + item2.outcome + '</p></div></div></div>').append($('<div id="matchup-close">Close X</div>').click(function(){
     alert("Here");
     $(this).parent("#matchMenu").fadeOut("slow").remove();  
})).appendTo('#bracket-container').fadeIn("slow");
}

// This decides what to append
$(".matchup-container").click(function() {
for(var i=0; i<matchups.length; i++) {
    if(this.id == "matchup" + (matchups[i].match).toString()){
        createOpponentMenu(matchups[i].id1, matchups[i].id2);
    }
}
}); 
```

# c# - 如何使用 azure 存储表实现每秒 10 次以上的插入

> ID：12750302
> 
> 赞同：11
> 
> 时间：2012-10-05T16:22:57.527
> 
> 标签：c#, azure, azure-table-storage

我编写了简单的 WorkerRole，将测试数据添加到表中。插入的代码是这样的。

```
var TableClient = this.StorageAccount.CreateCloudTableClient();
TableClient.CreateTableIfNotExist(TableName);
var Context = TableClient.GetDataServiceContext();

this.Context.AddObject(TableName, obj);
this.Context.SaveChanges(); 
```

此代码针对每个客户端请求运行。我使用 1-30 个客户端线程进行测试。我对各种大小的实例进行了多次尝试。我不知道我做错了什么，但我无法达到每秒 10 次以上的插入。如果有人知道如何提高速度，请告诉我。谢谢

**更新**

*   删除 CreateTableIfNotExist 对我的插入测试没有影响。
*   切换模式为 expect100Continue="false" useNagleAlgorithm="false" 当插入速率跳到 30-40 ips 时会产生短时间效果。但是，在 30 秒后，插入率下降到 6 ips，超时时间为 50%。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-05T16:41:09.997

为了加快速度，您应该使用批处理事务（实体组事务），允许您在单个请求中提交多达 100 个项目：

```
foreach (var item in myItemsToAdd)
{
    this.Context.AddObject(TableName, item);
}
this.Context.SaveChanges(SaveChangesOptions.Batch); 
```

您可以将其与[Partitioner.Create](http://msdn.microsoft.com/en-us/library/system.collections.concurrent.partitioner.create.aspx) (+ AsParallel) 结合使用，以在每批 100 个项目的不同线程/内核上发送多个请求，从而使事情变得非常快。

但在做所有这些之前，[请阅读](http://msdn.microsoft.com/en-us/library/windowsazure/dd894038.aspx)使用批处理事务的限制（100 个项目，每个事务 1 个分区，...）。

**更新：**

由于您不能在此处使用事务，因此还有一些其他提示。看看[这个 MSDN 线程](http://social.msdn.microsoft.com/Forums/en-US/windowsazuredata/thread/d84ba34b-b0e0-4961-a167-bbe7618beb83)，了解使用表存储时提高性能。我写了一些代码来告诉你区别：

```
 private static void SequentialInserts(CloudTableClient client)
    {
        var context = client.GetDataServiceContext();
        Trace.WriteLine("Starting sequential inserts.");

        var stopwatch = new Stopwatch();
        stopwatch.Start();

        for (int i = 0; i < 1000; i++)
        {
            Trace.WriteLine(String.Format("Adding item {0}. Thread ID: {1}", i, Thread.CurrentThread.ManagedThreadId));
            context.AddObject(TABLENAME, new MyEntity()
            {
                Date = DateTime.UtcNow,
                PartitionKey = "Test",
                RowKey = Guid.NewGuid().ToString(),
                Text = String.Format("Item {0} - {1}", i, Guid.NewGuid().ToString())
            });
            context.SaveChanges();
        }

        stopwatch.Stop();
        Trace.WriteLine("Done in: " + stopwatch.Elapsed.ToString());
    } 
```

因此，第一次运行时，我得到以下输出：

```
Starting sequential inserts.
Adding item 0\. Thread ID: 10
Adding item 1\. Thread ID: 10
..
Adding item 999\. Thread ID: 10
Done in: 00:03:39.9675521 
```

添加1000个项目需要3分钟以上。现在，我根据 MSDN 论坛上的提示更改了 app.config（最大连接数应为 12 * CPU 内核数）：

```
 <system.net>
    <settings>
      <servicePointManager expect100Continue="false" useNagleAlgorithm="false"/>
    </settings>
    <connectionManagement>
      <add address = "*" maxconnection = "48" />
    </connectionManagement>
  </system.net> 
```

再次运行应用程序后，我得到以下输出：

```
Starting sequential inserts.
Adding item 0\. Thread ID: 10
Adding item 1\. Thread ID: 10
..
Adding item 999\. Thread ID: 10
Done in: 00:00:18.9342480 
```

从超过 3 分钟到 18 秒。有什么不同！但我们可以做得更好。这是一些使用分区器插入所有项目的代码（插入将并行发生）：

```
 private static void ParallelInserts(CloudTableClient client)
    {            
        Trace.WriteLine("Starting parallel inserts.");

        var stopwatch = new Stopwatch();
        stopwatch.Start();

        var partitioner = Partitioner.Create(0, 1000, 10);
        var options = new ParallelOptions { MaxDegreeOfParallelism = 8 };

        Parallel.ForEach(partitioner, options, range =>
        {
            var context = client.GetDataServiceContext();
            for (int i = range.Item1; i < range.Item2; i++)
            {
                Trace.WriteLine(String.Format("Adding item {0}. Thread ID: {1}", i, Thread.CurrentThread.ManagedThreadId));
                context.AddObject(TABLENAME, new MyEntity()
                {
                    Date = DateTime.UtcNow,
                    PartitionKey = "Test",
                    RowKey = Guid.NewGuid().ToString(),
                    Text = String.Format("Item {0} - {1}", i, Guid.NewGuid().ToString())
                });
                context.SaveChanges();
            }
        });

        stopwatch.Stop();
        Trace.WriteLine("Done in: " + stopwatch.Elapsed.ToString());
    } 
```

结果：

```
Starting parallel inserts.
Adding item 0\. Thread ID: 10
Adding item 10\. Thread ID: 18
Adding item 999\. Thread ID: 16
..
Done in: 00:00:04.6041978 
```

瞧，从 3 分 39 秒我们下降到 18 秒，现在我们甚至下降到**4 秒**。

# java - 基本测试类中的@Value 注释不从属性文件中注入值

> ID：12750303
> 
> 赞同：5
> 
> 时间：2012-10-05T16:22:58.793
> 
> 标签：java, spring, spring-annotations

出于某种原因，`@Value`注释没有被注入到我用作其他测试类的基础的类中。我是 Spring 新手，我对 Java 的了解还不是最好的。我相信这对于有更多经验的人来说会更加明显，但我无法弄清楚。

如果我注释掉该`setDbProperties()`方法，则会填充字段，但`@Value`仅使用注释，我会在字段中获得空值。

这是我的基本测试类：

```
package com.blah;

import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.Properties;

import org.dbunit.DBTestCase;
import org.dbunit.PropertiesBasedJdbcDatabaseTester;
import org.dbunit.dataset.IDataSet;
import org.dbunit.dataset.xml.FlatXmlDataSetBuilder;
import org.dbunit.operation.DatabaseOperation;
import org.junit.After;
import org.junit.Before;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.test.context.ActiveProfiles;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {
        "classpath:/WEB-INF/application-context.xml",
        "classpath:/WEB-INF/application-context-test.xml" })
@ActiveProfiles("test")
public abstract class BaseDbTestCase extends DBTestCase {

    @Value("${test.db.connection.url}")
    private String connectionUrl;

    @Value("${test.db.driver.class}")
    private String driverClass;

    @Value("${test.db.username}")
    private String dbUserName;

    @Value("${test.db.password}")
    private String dbPassword;

    @Value("${test.db.datasource.path}")
    private String dataSource;

    public BaseDbTestCase(String name) throws IOException {

        super(name);

        // setDbProperties();

        System.setProperty(
                PropertiesBasedJdbcDatabaseTester.DBUNIT_DRIVER_CLASS,
                driverClass);
        System.setProperty(
                PropertiesBasedJdbcDatabaseTester.DBUNIT_CONNECTION_URL,
                connectionUrl);
        System.setProperty(PropertiesBasedJdbcDatabaseTester.DBUNIT_USERNAME,
                dbUserName);
        System.setProperty(PropertiesBasedJdbcDatabaseTester.DBUNIT_PASSWORD,
                dbPassword);
    }

    @After
    public void after() throws Exception {
        DatabaseOperation.DELETE_ALL.execute(getConnection(), getDataSet());
    }

    @Override
    protected IDataSet getDataSet() throws Exception {
        return new FlatXmlDataSetBuilder()
                .build(new FileInputStream(dataSource));
    }

    private void setDbProperties() throws IOException, FileNotFoundException {

        Properties properties = new Properties();

        properties.load(new FileInputStream(
                "src/main/java/resources/application.properties"));

        connectionUrl = properties.getProperty("test.db.connection.url");
        driverClass = properties.getProperty("test.db.driver.class");
        dbUserName = properties.getProperty("test.db.username");
        dbPassword = properties.getProperty("test.db.password");
        dataSource = properties.getProperty("test.db.datasource.path");
    }

    @Override
    protected DatabaseOperation getSetUpOperation() throws Exception {
        return DatabaseOperation.REFRESH;
    }

    @Override
    protected DatabaseOperation getTearDownOperation() throws Exception {
        return DatabaseOperation.NONE;
    }

    @Before
    public void init() throws Exception {
        DatabaseOperation.REFRESH.execute(getConnection(), getDataSet());
    }

} 
```

如您所见，其他 Spring（和非 Spring）注释在这个类中工作。

我`<context:property-placeholder location="classpath:/resources/application.properties" />`在我的应用程序上下文中。

此外，`@Value`注释在扩展`BaseDbTestCase`类的类中工作正常。

TIA

**更新：** 在接受@Biju 的建议将系统属性的设置移动到 init() 方法（用 注释`@Before`）之后，我现在得到以下堆栈跟踪。基于调试，在抛出错误之前似乎没有通过构造函数。

```
org.dbunit.assertion.DbAssertionFailedError: driverClass is null
    at org.dbunit.assertion.DefaultFailureHandler$DefaultFailureFactory.createFailure(DefaultFailureHandler.java:265)
    at org.dbunit.assertion.DefaultFailureHandler.createFailure(DefaultFailureHandler.java:110)
    at org.dbunit.assertion.SimpleAssert.fail(SimpleAssert.java:90)
    at org.dbunit.assertion.SimpleAssert.assertTrue(SimpleAssert.java:77)
    at org.dbunit.assertion.SimpleAssert.assertNotNullNorEmpty(SimpleAssert.java:61)
    at org.dbunit.JdbcDatabaseTester.<init>(JdbcDatabaseTester.java:103)
    at org.dbunit.PropertiesBasedJdbcDatabaseTester.<init>(PropertiesBasedJdbcDatabaseTester.java:68)
    at org.dbunit.DBTestCase.newDatabaseTester(DBTestCase.java:70)
    at org.dbunit.DatabaseTestCase.getDatabaseTester(DatabaseTestCase.java:109)
    at org.dbunit.DatabaseTestCase.setUp(DatabaseTestCase.java:151)
    at junit.framework.TestCase.runBare(TestCase.java:132)
    at junit.framework.TestResult$1.protect(TestResult.java:110)
    at junit.framework.TestResult.runProtected(TestResult.java:128)
    at junit.framework.TestResult.run(TestResult.java:113)
    at junit.framework.TestCase.run(TestCase.java:124)
    at junit.framework.TestSuite.runTest(TestSuite.java:243)
    at junit.framework.TestSuite.run(TestSuite.java:238)
    at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:83)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:32:46.153

有一个扩展 BaseDbTestCase 的具体类并将 @ContextConfiguration 放在具体类中。让你的其他测试类扩展这个具体的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:55:51.663

`BaseDbTestCase`我认为的原因是因为当您根据 BaseDbTestCase 中的派生一个新的测试用例时，在派生的`@ContextConfiguration`测试用例中并不真正可见 -`@ContextConfiguration`必须在您的最终测试用例中。

**更新：**

我上面所说的不正确，我测试过一次，看起来`@ContextConfiguration`甚至`@RunWith`在基类中就足够了，并且它正确地注入`@Value`了基类中的字段。

现在您遇到的问题是因为您希望变量在构造函数中可用 - 它们不会，因为在`@Value`创建实例后解决 - 所以在您的情况下，因为您希望它出现在构造函数它将失败。您应该能够在`@Before`Junit 的带注释的方法中设置属性

# mysql - 显示查询以及文件中的结果

> ID：12750304
> 
> 赞同：1
> 
> 时间：2012-10-05T16:22:58.307
> 
> 标签：mysql

MySQL 版本：5.58 MySQL 社区服务器

我正在尝试为每个开发版本组织我们拥有的脚本，以便我们的生产 dba 在发布期间更容易执行脚本。我有一些具有更新、插入、删除语句的脚本，然后是一个调用这些脚本的主脚本，因此 dba 只需在发布期间调用主脚本。

master.sql 包含： 源文件1.sql 源文件2.sql 源文件2.sql

在调试这些脚本的过程中，我使用“tee”记录到一个文件中，对于在每个单独的 sql 文件中运行的每个查询，我都会得到类似的结果：

查询正常，1 行受影响（0.01 秒）匹配行：0 更改：0 警告：0

在上面的示例中，它无法更新行，因为它在 where 子句中找不到匹配项，因此我需要查看该查询以了解原因。但是我看不到查询，因为它没有与结果一起显示，所以我必须尝试计算结果，然后查看原始文件以确定哪个查询有问题。这对每个文件中的少数查询没什么大不了的，但是如果我在一个文件中有数百个查询，那就很痛苦了。

我的问题是：有没有办法让 mysql 显示实际查询及其产生的结果，而不必在文件中的每个查询之后都有某种打印语句（即选择“我的查询”）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T16:38:21.123

如果您正在使用`tee`，听起来您有一个 bash 脚本。在执行每个查询之前尝试回显查询（或查询的名称）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:41:15.477

您可以启用 0 秒的慢查询日志记录，这样每个查询都会被记录，这样您将获得结果以及 SQL 语句本身。我不确定它是否为您提供了足够的信息。

```
# Time: 121005 11:39:51
# User@Host: user[user] @ localhost []
# Query_time: 0.003103  Lock_time: 0.000077 Rows_sent: 0  Rows_examined: 3
SET timestamp=1349455191;
update test set end = Null; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T16:41:54.337

您可以使用 mysql 客户端的详细选项。例如：

```
mysql -u xxxx -pxxxx -h xxxxx -P XXXX -vvv --show-warnings --line-numbers < x.sql 
```

将生成包含查询文本的详细日志。

# c# - 如何在 32 个二元期权之间进行迭代？

> ID：12750305
> 
> 赞同：7
> 
> 时间：2012-10-05T16:22:59.923
> 
> 标签：c#, algorithm

我有一个优化问题，其中有 5 个变量：A、B1、B2、C1、C2。我正在尝试优化这 5 个变量以获得最小的和平方根值。我有一些工作正常的优化技术，但这个特别给我带来了一些麻烦。

我想探索所有 32 个更改变量的选项并选择最小的 RSS 值。我的意思是每个变量都可以是 +/- 一个增量。每个选择都会导致另外 2 个选择，有 5 个变量，即 32 个选择。( 2^5 )

为了澄清，我没有将我的变量：A、B1、B2 等相互添加，我将它们增加/减少任意数量。A +/- X、B1+/- X2 等。我试图找出我的 5 个变量的递增/递减组合将返回最低的平方根值。

```
 A
                                 +/ \-
                                B1   B1
                               +/\- +/\-
                              B2 B2 B2 B2 
```

以此类推，直到所有 5 个级别都完成。我什至不确定从哪里开始尝试解决这个问题。什么样的数据结构最适合存储它？它是迭代解决方案还是递归解决方案。我不需要问题的答案，而是需要寻找的地方或开始的地方。再次感谢您花时间看这个。

为了澄清进一步的混淆，这是我的优化方法。我有 5 个变量和 5 个增量，每个增量都匹配一个变量。(a,b,c,d,e,f) ---> (incA, incB, incC, indD, incE, incF)

我想找到 +/- incX 到 X 的最佳组合（x 是 5 个变量之一）即：解决方案可能类似于：a+incA、B-incB、c+incC、d+incD、e+ INCE，F-INCF。有 32 种组合的可能性，在阅读了下面的所有答案后，我已经确定了这种可能的算法。（请参阅下面的答案）根据需要进行编辑和提问。这不是一个完美的算法，它是为了澄清和易于理解，我知道它可以被浓缩。

```
//Settign all possible solutions to be iterated through later.
double[] levelA = new double[2];
double[] levelB = new double[2];
double[] levelC = new double[2];
double[] levelD = new double[2];
double[] levelE = new double[2];

levelA[0] = a + incA;
levelA[1] = a - incA;
levelB[0] = b + incB;
levelB[1] = b - incB;
levelC[0] = c + incC;
levelC[1] = c - incC;
levelD[0] = d + incD;
levelD[1] = d - incD;
levelE[0] = e + incE;
levelE[1] = e - incE;

double[] rootSumAnswers = new double[32];
int count = 0;

for(int i = 0; i < 2; i ++)
{
    for(int k = 0; k < 2; k++)
    {
        for(int j = 0; j < 2; j ++)
        {
            for(int n = 0; n < 2; n++)
            {
                for(int m = 0; m < 2; m++)
                {
                    rootSumAnswers[count++] = calcRootSum(levelA[i], levelB[k], levelC[j], levelD[n], levelE[m]);

                }
            }
        }
    }
}

//Finally, i find the minimum of my root sum squares and make that change permanent, and do this again. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T16:51:44.710

您可以使用以下函数生成包含所有可能操作集的集合（例如 {-,-,-,-}, {-,-,-,+}, {-,-,+,-} 等）将输出一个布尔数组列表，其中 true 和 false 代表 + 和 -。该`vars`参数表示要组合的变量的数量。请注意，对于 5 个变量，只有 16 个组合（不是您所说的 32 个），因为组合 5 个变量时只有 4 个运算符（假设第一个变量不能被否定）：

```
public List<bool[]> GetOperators(int vars)
{
    var result = new List<bool[]>();

    for (var i = 0; i < 1 << vars-1; i++)
    {
        var item = new bool[vars - 1];
        for (var j = 0; j < vars-1; j++)
        {
            item[j] = ((i >> j) & 1) != 0;
        }
        result.Add(item);
    }
    return result;
} 
```

获得此列表后，您可以使用它以所有可能的方式组合变量。首先，我们定义一个辅助函数来获取一组变量和单个`bool[]`组合并应用它（它假设组合中的元素数量对于传递的变量数量是正确的）：

```
private double Combine(double[] vars, bool[] combination)
{
    var sum = vars[0];
    for (var i = 1; i< vars.Length; i++)
    {
        sum = combination[i - 1] ? sum + vars[i] : sum - vars[i];
    }
    return sum;
} 
```

您还可以使用以下方法很好地格式化组合：

```
private string FormatCombination(double[] vars, bool[] combination)
{
    var result = vars[0].ToString("0.00##");
    for (var i = 1; i < vars.Length; i++)
    {
        result = string.Format("{0} {1} {2:0.00##}", result, combination[i - 1] ? "+" : "-", vars[i]);
    }
    return result;
} 
```

将它们放在一起以测试所有可能的组合：

```
var vars = new []
{
    1.23, // A
    0.02, // B1
    0.11, // B2
    0.05, // C1
    1.26  // C2
};

foreach (var combination in GetOperators(vars.Length))
{
    var combined = Combine(vars, combination);

    // Perform your operations on "combined" here...

    Console.WriteLine("{0} = {1}", FormatCombination(vars, combination), combined);
} 
```

这将输出：

```
1.23 - 0.02 - 0.11 - 0.05 - 1.26 = -0.21
1.23 + 0.02 - 0.11 - 0.05 - 1.26 = -0.17
1.23 - 0.02 + 0.11 - 0.05 - 1.26 = 0.01
1.23 + 0.02 + 0.11 - 0.05 - 1.26 = 0.05
1.23 - 0.02 - 0.11 + 0.05 - 1.26 = -0.11
1.23 + 0.02 - 0.11 + 0.05 - 1.26 = -0.07
1.23 - 0.02 + 0.11 + 0.05 - 1.26 = 0.11
1.23 + 0.02 + 0.11 + 0.05 - 1.26 = 0.15
1.23 - 0.02 - 0.11 - 0.05 + 1.26 = 2.31
1.23 + 0.02 - 0.11 - 0.05 + 1.26 = 2.35
1.23 - 0.02 + 0.11 - 0.05 + 1.26 = 2.53
1.23 + 0.02 + 0.11 - 0.05 + 1.26 = 2.57
1.23 - 0.02 - 0.11 + 0.05 + 1.26 = 2.41
1.23 + 0.02 - 0.11 + 0.05 + 1.26 = 2.45
1.23 - 0.02 + 0.11 + 0.05 + 1.26 = 2.63
1.23 + 0.02 + 0.11 + 0.05 + 1.26 = 2.67
```

* * *

**编辑：**

根据您对问题的更改，我已经更新了我的答案。正如其他人所提到的，可能没有必要使用这样的完整搜索，但无论如何您可能会发现该方法很有用。

`GetOperators()`稍微改变以返回 2 ^(n 个)组合（而不是像以前那样的 2 ^(n-1)）：

```
public List<bool[]> GetOperators(int vars)
{
    var result = new List<bool[]>();

    for (var i = 0; i < 1 << vars; i++)
    {
        var item = new bool[vars];
        for (var j = 0; j < vars; j++)
        {
            item[j] = ((i >> j) & 1) != 0;
        }
        result.Add(item);
    }
    return result;
} 
```

除了要使用的变量和组合之外，该`Combine()`方法已更改为采用一组增量。对于组合的每个元素，如果是`true`，则将增量添加到变量中，如果为假，则减去：

```
private double[] Combine(double[] vars, double[] increments, bool[] combination)
{
    // Assuming here that vars, increments and combination all have the same number of elements
    var result = new double[vars.Length];
    for (var i = 0; i < vars.Length; i++)
    {
        result[i] = combination[i] ? vars[i] + increments[i] : vars[i] - increments[i];
    }

    // Returns an array of the vars and increments combined per the given combination
    // E.g. if there are 5 vars and the combination is: {true, false, true, true, false}
    // The result will be {var1 + inc1, var2 - inc2, var3 + inc3, var4 + inc4, var 5 - inc5}
    return result;
} 
```

并且`FormatCombination()`还更新为显示新的组合样式：

```
private string FormatCombination(double[] vars, double[] increments, bool[] combination)
{
    var result = new List<string>(vars.Length);

    var combined = Combine(vars, increments, combination);

    for (var i = 0; i < vars.Length; i++)
    {
        result.Add(string.Format("{0:0.00##} {1} {2:0.00##} = {3:0.00##}", vars[i], combination[i] ? "+" : "-", increments[i], combined[i]));
    }
    return string.Join(", ", result.ToArray());
} 
```

把它们放在一起：

```
var vars = new[]
{
    1.23, // A
    0.02, // B
    0.11, // C
    0.05, // D
    1.26, // E
};

var increments = new[]
{
    0.04, // incA
    0.11, // incB
    0.01, // incC
    0.37, // incD
    0.85, // incD
};

foreach (var combination in GetOperators(vars.Length))
{
    var combined = Combine(vars, increments, combination);

    // Perform operation on combined here...

    Console.WriteLine(FormatCombination(vars, increments, combination));
} 
```

输出（删节）：

```
1.23 - 0.04 = 1.19, 0.02 - 0.11 = -0.09, 0.11 - 0.01 = 0.10, 0.05 - 0.37 = -0.32, 1.26 - 0.85 = 0.41
1.23 + 0.04 = 1.27, 0.02 - 0.11 = -0.09, 0.11 - 0.01 = 0.10, 0.05 - 0.37 = -0.32, 1.26 - 0.85 = 0.41
1.23 - 0.04 = 1.19, 0.02 + 0.11 = 0.13, 0.11 - 0.01 = 0.10, 0.05 - 0.37 = -0.32, 1.26 - 0.85 = 0.41
1.23 + 0.04 = 1.27, 0.02 + 0.11 = 0.13, 0.11 - 0.01 = 0.10, 0.05 - 0.37 = -0.32, 1.26 - 0.85 = 0.41
...

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T16:51:13.320

## 回答当前版本的问题

您根本不需要在这里进行任何搜索。对于每个变量，选择`A +/- incA`绝对值最小的符号（+ 或 -）（换句话说，产生最小*平方*的符号`A +/- inc A`）。这最小化了平方和中的所有项，因此最小化了整个总和。

## 上一个答案

假设您想`sqrt(A*A +/- B1*B1 +/- B2*B2 +/- C1*C1 +/- C2*C2)`通过选择合适的符号`+`或来最小化`-`，只需遍历 32 种可能的组合，然后选择产生最小结果的组合。要遍历所有组合，请注意如果您遍历整数 0 到 31，并查看它们的二进制表示，您会发现5 个 0 和 1 的*所有*组合。进一步观察，您可以找出特定整数 n 在二进制数 k 处是否包含 1，您只需要检查 n 和 2 的 k 次方的按位与是否非零。因此，在伪代码中，您会这样做

```
min_sign_a = 1
min_sign_b1 = 1
min_sign_b2 = 1
min_sign_c1 = 1
min_sign_c2 = 1
min_sum = a*a + b1*b1 + b2*b2 + c1*c1 + c2*c2
for(i in 1,...,31)
  sign_a = (i & 1) ? -1 : 1
  sign_b1 = (i & 2) ? -1 : 1
  sign_b2 = (i & 4) ? -1 : 1
  sign_c1 = (i & 8) ? -1 : 1
  sign_c2 = (i & 16) ? -1 : 1
  sum = sign_a*a*a + sign_b1*b1*b1 + sign_b2*b2*b2 + sign_c1*c1*c1 + sign_c2*c2*c2
  if (sum < min_sum)
    min_sign_a = sign_a
    min_sign_b1 = sign_b1
    min_sign_b2 = sign_b2
    min_sign_c1 = sign_c1
    min_sign_c2 = sign_c2
  end
end 
```

这里，“&”代表按位与。i 的第 k 位中的 1 给第 k 个变量一个负号，一个零给它一个正号。情况“i = 0”，即循环开始之前处理的所有符号都是正数，以避免在循环的第一次运行中必须处理`min_sum`未初始化的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T17:36:13.063

由于我的第一个答案被删除，因为它是伪代码而不是 c#...我将抽象集更改为堆栈...

我认为一个很好的递归方法有效：

```
int FindBest(int increment, Stack<int> decided_vars, Stack<int> free_vars)
{
  if free_vars.size() == 0
  {
     return PerformCalculation(decided_vars);
  }

  int new_element = free_vars.Pop()
  new_element += increment;

  //check one case
  decided_vars.Push(new_element)
  int result1 = FindBest(increment, decided_vars, free_vars)

  //reset sets for second case
  decided_vars.Pop();
  new_element -= 2 * increment;
  decicded_vars.Push(new_element);
  int result2 = FindBest(increment, decided_vars, free_vars);

  //reset sets as they were to give back to parent
  decided_vars.Pop()
  free_vars.Push( new_element + increment )

  return max(result1, result2);
} 
```

您可以将 PerformCalculation 定义为要最大化/最小化的函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T17:55:42.333

优化多个参数的一个好方法是[Nelder-Mead 方法或 Downhill Simplex 方法](http://en.wikipedia.org/wiki/Nelder%E2%80%93Mead_method)。它以一种非常自然的方式“遍历”参数空间，而无需测试每个排列。另见[下坡单纯形法](http://www.is.doshisha.ac.jp/report/2006/9/25/20060806006/index.html)（用良好的图形显示原理）。

我还在[C# 中找到了一个代码](http://www.koders.com/csharp/fid218B2E3946027CB5037676EA50CE549B6FC26CF7.aspx?s=search)；但是，我没有测试它。

# android - Android AsyncTask 退出异常

> ID：12750306
> 
> 赞同：3
> 
> 时间：2012-10-05T16:23:01.507
> 
> 标签：android, android-asynctask

我的 Asynctask 有问题。每当我使用 BACK 按钮退出我的应用程序时，它都会捕获一个异常。请看一下我的代码。请帮我纠正它。谢谢。

AndroidFragment.java

```
 public class AndroidFragment extends SherlockListFragment  implements ActionBar.TabListener{

    private ProgressDialog pDialog;
    static final String URL = "https://dl.dropbox.com/s/86p8y5y2birua9n/test1.xml";
    // XML node keys
    static final String KEY_ITEM = "item"; // parent node
    static final String KEY_ID = "id";
    static final String KEY_NAME = "name";
    static final String KEY_COST = "cost";
    static final String KEY_DESC = "description";
    ArrayList<HashMap<String, String>> menuItems;
    ListAdapter adapter;
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
        new loadListView().execute();   
    return super.onCreateView(inflater, container, savedInstanceState);

    }

    public class loadListView extends AsyncTask<Integer, String, String> {

        @Override
        protected void onPreExecute() {
            super.onPreExecute();

        }

        @Override
        protected String doInBackground(Integer... args) {
            // updating UI from Background Thread
            menuItems = new ArrayList<HashMap<String, String>>();

            XMLParser parser = new XMLParser();
            String xml = parser.getXmlFromUrl(URL); // getting XML
            Document doc = parser.getDomElement(xml); // getting DOM element

            NodeList nl = doc.getElementsByTagName(KEY_ITEM);
            // looping through all item nodes <item>
            for (int i = 0; i < nl.getLength(); i++) {
                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();
                Element e = (Element) nl.item(i);
                // adding each child node to HashMap key => value
                map.put(KEY_ID, parser.getValue(e, KEY_ID));
                map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
                map.put(KEY_COST, "Rs." + parser.getValue(e, KEY_COST));
                map.put(KEY_DESC, parser.getValue(e, KEY_DESC));

                // adding HashList to ArrayList
                menuItems.add(map);
            }

                    return null;
                }   

        @Override
        protected void onPostExecute(String args) {

            adapter = new SimpleAdapter(getActivity(), menuItems,
                    R.layout.list_item,
                    new String[] { KEY_NAME, KEY_DESC, KEY_COST }, new int[] {
                            R.id.name, R.id.desciption, R.id.cost });

            setListAdapter(adapter);
            //pDialog.dismiss();
            }
        }

     @Override
     public void onDestroy() {
         if (adapter  != null) {
         setListAdapter(null);
         }
         super.onDestroy();
     }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        ft.add(android.R.id.content, this);

        ft.attach(this);
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        ft.detach(this);
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    }

} 
```

日志猫：

```
10-06 00:17:55.750: E/AndroidRuntime(8780): FATAL EXCEPTION: main
10-06 00:17:55.750: E/AndroidRuntime(8780): java.lang.NullPointerException
10-06 00:17:55.750: E/AndroidRuntime(8780):     at android.widget.SimpleAdapter.<init>(SimpleAdapter.java:85)
10-06 00:17:55.750: E/AndroidRuntime(8780):     at in.wptrafficanalyzer.actionbarsherlocknavtab.AndroidFragment$loadListView.onPostExecute(AndroidFragment.java:96)
10-06 00:17:55.750: E/AndroidRuntime(8780):     at in.wptrafficanalyzer.actionbarsherlocknavtab.AndroidFragment$loadListView.onPostExecute(AndroidFragment.java:1)
10-06 00:17:55.750: E/AndroidRuntime(8780):     at android.os.AsyncTask.finish(AsyncTask.java:602)
10-06 00:17:55.750: E/AndroidRuntime(8780):     at android.os.AsyncTask.access$600(AsyncTask.java:156)
10-06 00:17:55.750: E/AndroidRuntime(8780):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
10-06 00:17:55.750: E/AndroidRuntime(8780):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-06 00:17:55.750: E/AndroidRuntime(8780):     at android.os.Looper.loop(Looper.java:137)
10-06 00:17:55.750: E/AndroidRuntime(8780):     at android.app.ActivityThread.main(ActivityThread.java:4512)
10-06 00:17:55.750: E/AndroidRuntime(8780):     at java.lang.reflect.Method.invokeNative(Native Method)
10-06 00:17:55.750: E/AndroidRuntime(8780):     at java.lang.reflect.Method.invoke(Method.java:511)
10-06 00:17:55.750: E/AndroidRuntime(8780):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:982)
10-06 00:17:55.750: E/AndroidRuntime(8780):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:749)
10-06 00:17:55.750: E/AndroidRuntime(8780):     at dalvik.system.NativeStart.main(Native Method) 
```

新的 LOGCAT：

```
10-06 00:49:26.094: E/AndroidRuntime(10780): FATAL EXCEPTION: main
10-06 00:49:26.094: E/AndroidRuntime(10780): java.lang.NullPointerException
10-06 00:49:26.094: E/AndroidRuntime(10780):    at android.widget.SimpleAdapter.<init>(SimpleAdapter.java:85)
10-06 00:49:26.094: E/AndroidRuntime(10780):    at in.wptrafficanalyzer.actionbarsherlocknavtab.AppleFragment$loadListView.onPostExecute(AppleFragment.java:97)
10-06 00:49:26.094: E/AndroidRuntime(10780):    at in.wptrafficanalyzer.actionbarsherlocknavtab.AppleFragment$loadListView.onPostExecute(AppleFragment.java:1)
10-06 00:49:26.094: E/AndroidRuntime(10780):    at android.os.AsyncTask.finish(AsyncTask.java:602)
10-06 00:49:26.094: E/AndroidRuntime(10780):    at android.os.AsyncTask.access$600(AsyncTask.java:156)
10-06 00:49:26.094: E/AndroidRuntime(10780):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
10-06 00:49:26.094: E/AndroidRuntime(10780):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-06 00:49:26.094: E/AndroidRuntime(10780):    at android.os.Looper.loop(Looper.java:137)
10-06 00:49:26.094: E/AndroidRuntime(10780):    at android.app.ActivityThread.main(ActivityThread.java:4512)
10-06 00:49:26.094: E/AndroidRuntime(10780):    at java.lang.reflect.Method.invokeNative(Native Method)
10-06 00:49:26.094: E/AndroidRuntime(10780):    at java.lang.reflect.Method.invoke(Method.java:511)
10-06 00:49:26.094: E/AndroidRuntime(10780):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:982)
10-06 00:49:26.094: E/AndroidRuntime(10780):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:749)
10-06 00:49:26.094: E/AndroidRuntime(10780):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:14:27.590

问题是您的列表需要很长时间来加载和解析。您的活动已经被破坏了

```
protected void onPostExecute(String args) 
```

叫做。

但是如果活动已经被销毁，那么你不需要更新 UI。最简单的解决方案是：

@Override protected void onPostExecute(String args) {

```
 if (getActivity() != null) {
            ListAdapter adapter = new SimpleAdapter(getActivity(), menuItems,
                R.layout.list_item,
                new String[] { KEY_NAME, KEY_DESC, KEY_COST }, new int[] {
                        R.id.name, R.id.desciption, R.id.cost });

            setListAdapter(adapter);
               //pDialog.dismiss();

        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:31:25.087

我的猜测是，在创建简单适配器时，该片段未附加到活动。这是您的新 SimpleAdapter 调用中唯一可以返回 null 的内容。将 asynctask 请求移至 onViewCreated 并查看会发生什么。

更新：我检查了 SimpleAdapter 文件中的源代码。抛出错误的行试图从您传入的上下文（活动）中创建一个 LayoutInflater。即返回 null，因此您的 getactivity() 调用返回 null。

解答： 由于如果片段未附加，getActivity() 将返回 null，因此请使用应用程序上下文创建 SimpleAdapter。您可以从传递给 onCreateView 的 LayoutInflater 中获取应用程序上下文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T16:33:38.350

在类级别声明 Listadapter 适配器

```
 @Override
        public void onDestroy() {
            if (adapter  != null) {
            setListAdapter(null);
            }
            super.onDestroy();
        } 
```

# jquery - jQuery选择更改事件获取选择的选项

> ID：12750307
> 
> 赞同：261
> 
> 时间：2012-10-05T16:23:04.417
> 
> 标签：jquery, events

我在我的选择元素的更改事件上绑定了一个事件：

```
$('select').on('change', '', function (e) {

}); 
```

如何访问发生更改事件时选择的元素？

* * *

## 回答 #1

> 赞同：521
> 
> 时间：2012-10-05T16:24:34.047

```
$('select').on('change', function (e) {
    var optionSelected = $("option:selected", this);
    var valueSelected = this.value;
    ....
}); 
```

* * *

## 回答 #2

> 赞同：87
> 
> 时间：2013-11-17T12:43:12.163

您可以使用[jQuery 查找](http://api.jquery.com/find/)方法

```
 $('select').change(function () {
     var optionSelected = $(this).find("option:selected");
     var valueSelected  = optionSelected.val();
     var textSelected   = optionSelected.text();
 }); 
```

上述解决方案完美运行，但我选择为愿意获得点击选项的他们添加以下代码。即使此选择值未更改，它也允许您获取所选选项。（仅使用 Mozilla 测试）

```
 $('select').find('option').click(function () {
     var optionSelected = $(this);
     var valueSelected  = optionSelected.val();
     var textSelected   = optionSelected.text();
   }); 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2015-05-08T19:27:20.460

### 委托替代

如果有人为他们的侦听器使用[委托方法](http://api.jquery.com/on/#direct-and-delegated-events)`e.target`，请使用（它将引用 select 元素）。

```
$('#myform').on('change', 'select', function (e) {
    var val = $(e.target).val();
    var text = $(e.target).find("option:selected").text(); //only time the find is required
    var name = $(e.target).attr('name');
} 
```

**[JSFiddle 演示](http://fiddle.jshell.net/slicedtoad/mepn038v/1/)**

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-04-29T10:21:25.017

```
<select id="selectId">
    <option value="A">A</option>
    <option value="B">B</option>
    <option value="C">C</option>
</select>

$('#selectId').on('change', function () {
     var selectVal = $("#selectId option:selected").val();
}); 
```

首先创建一个`select option`. 之后使用`jquery`您可以在用户更改值时获取当前选择的`select option`值。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-06-05T21:45:06.547

我觉得这个更短更干净。此外，如果有多个，您可以遍历选定的项目；

```
$('select').on('change', function () {
     var selectedValue = this.selectedOptions[0].value;
     var selectedText  = this.selectedOptions[0].text;
}); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-10-17T17:22:10.023

```
$('#_SelectID').change(function () {
        var SelectedText = $('option:selected',this).text();
        var SelectedValue = $('option:selected',this).val();
}); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-09-05T14:33:54.273

另一种获取选定值的值的简短方法，

```
$('#selectElement').on('change',function(){
   var selectedVal = $(this).val();
                       ^^^^  ^^^^ -> presents #selectElement selected value 
                         |
                         v
               presents #selectElement, 
}); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-06-25T18:32:52.263

这也可以正常工作

```
(function(jQuery) {
  $(document).ready(function() {
    $("#select_menu").change(function() {
      var selectedOption = $("#select_menu").val()
    });
  });
})(jQuery);
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-03-26T16:12:26.730

参见官方 API 文档 [https://api.jquery.com/selected-selector/](https://api.jquery.com/selected-selector/)

这个好作品：

```
$( "select" ).on('change',function() {
  var str = "";
  // For multiple choice
  $( "select option:selected" ).each(function() {
    str += $( this ).val() + " "; 
  });
}); 
```

和

```
$( "select" ).on('change',function() {
  // For unique choice
  var selVal = $( "select option:selected" ).val(); 
}); 
```

并容易做出独特的选择

```
var SelVal = $( "#idSelect option:selected" ).val(); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-04-22T17:05:08.623

您可以使用此 jquery 选择更改事件来获取选定的选项值

[演示](https://www.tutsmake.com/jquery-val-method-set-get-html-elements-val/)

```
$(document).ready(function () {   
    $('body').on('change','#select', function() {
         $('#show_selected').val(this.value);
    });
}); 
```

```
<!DOCTYPE html>  
<html>  
<title>Learn Jquery value Method</title>
<head> 
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script> 
</head>  
<body>  
<select id="select">
 <option value="">Select One</option>
    <option value="PHP">PHP</option>
    <option value="jAVA">JAVA</option>
    <option value="Jquery">jQuery</option>
    <option value="Python">Python</option>
    <option value="Mysql">Mysql</option>
</select>
<br><br>  
<input type="text" id="show_selected">
</body>  
</html> 
```

# java - 在 Java 1.5 中使用 SOAP 信封包装和解包 XML

> ID：12750311
> 
> 赞同：1
> 
> 时间：2012-10-05T16:23:22.387
> 
> 标签：java, xml, soap, java-5

我有一个 XML 文档作为字符串，它是一个没有 SOAP 信封的 SOAP 请求。我现在需要执行以下操作：

*   将请求发布到包装在 SOAP 信封中的 Web 服务
*   返回未包装的 SOAP 信封的响应

实际的 HTTP 连接内容很好，但我真的在包装和展开方面苦苦挣扎。我试图弄清楚如何在 Java 中进行这种 XML 操作，但无法真正弄清楚。以`javax.xml`包装为例，但发现大多数情况下它只是一团糟。不幸的是，我仅限于 Java 1.5 并且没有外部库，否则我可能会使用一些 apache commons 之类的东西。

基本上我正在寻找的是一对这样的方法：

```
/* Wraps the xml in a standard soap envelope */
String wrap(String xml)

/* Removes soap envelope from the xml */
String unwrap(String xml) 
```

我想的`wrap`方法可能很简单`soapStart + xml + soapEnd`，尽管如果不小心，xml 标头可能会搞砸。但是解包对我来说太棘手了，因为您需要实际提取其中的内容`<soapenv:Body>` *并*确保您获得所需的命名空间声明等。

我已经在这里坐了几个小时了，但我仍然不知道......希望你们中的一些人这样做:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:48:19.470

您可以尝试使用正则表达式。要查找信封内容：

```
String regex = "^<(soapenv:Envelope).*?>(.*?)</\\1>$";
Pattern pattern = Pattern.compile(regex, Pattern.DOTALL);
Matcher matcher = pattern.matcher(xml);
matcher.matches();
String body = matcher.group(2); 
```

像这样的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:32:20.270

消息的 SOAP 部分包含一个信封，该信封包含一个正文（可以包含数据或故障信息）和一个可选的标头。当您使用 JAXM 创建 SOAP 消息时，会为您创建 SOAP 部分、信封和正文：您只需创建正文元素。为此，您需要访问 body 元素的父元素，即 SOAP 主体。

为了到达 SOAPMessage 树中的任何对象，您必须从根开始遍历树，如以下代码行所示。例如，假设 SOAPMessage 是 MyMsg，以下是您必须进行的调用才能获取 SOAP 正文：

```
SOAPPart MyPart = MyMsg.getSOAPPart();

SOAPEnvelope MyEnv = MyPart.getEnvelope();

SOAPBody MyBody = envelope.getBody(); 
```

此时，您可以为 body 元素创建一个名称（如命名空间中所述）并将 body 元素添加到 SOAPMessage。

例如，以下代码行为 body 元素创建一个名称（XML 标记的表示）：

```
Name bodyName = envelope.createName("Temperature"); 
```

下一个代码行将 body 元素添加到 body：

```
SOAPBodyElement myTemp = MyBody.addBodyElement(bodyName); 
```

最后，此代码行为 body 元素 bodyName 定义了一些数据：

```
myTemp.addTextNode("98.6"); 
```

参考：[http ://docs.oracle.com/cd/E19263-01/817-6026/SOAP.html](http://docs.oracle.com/cd/E19263-01/817-6026/SOAP.html)

# vb.net - Enter 上未调用 ComboBox 的 SelectedIndexChanged 事件

> ID：12750315
> 
> 赞同：7
> 
> 时间：2012-10-05T16:23:38.073
> 
> 标签：vb.net

我正在使用 .NET Framework 4.0 使用 VB 开发 VS 2010

我有一个`combobox`. 它里面有一些项目，显示得很好。这里有点奇怪：

如果我单击下拉箭头`combobox`并单击我想要的项目，`SelectedIndexChanged`则称为 - 好。

如果我在文本区域内单击`combobox`并开始输入我想要选择的内容并通过按向上（或向下）键完成它，`SelectedIndexChanged`则称为 - 也很好。

如果我单击下拉箭头`combobox`并开始输入我想要选择的内容并按 ENTER 完成它，`SelectedIndexChanged`则不会被称为 - 问题。

是否存在由最后一种情况引起的不同事件`ENTER`？我尝试使用`TextChanged`and`TextUpdate`事件，但这些似乎不起作用：

```
Private Sub cmbStatus_TextChanged(sender As System.Object, e As System.EventArgs) Handles cmbStatus.TextChanged
If e.Equals(Keys.Enter) Then
    Call SomeMethod()
End If 
```

我应该使用其他东西`e.Equals(Keys.Enter)`吗？

还有其他我应该寻找的事件吗？

**编辑：** 项目的一个例子`ComboBox`是：

*   10 - 新条目和完整性检查 `---> this is the most common type`
*   13 - 分配给 TRB/HRB `---> there are a few with '/'`
*   60 - 外部（保留至另行通知） `---> there are a few with '(' and ')'`

基本上，每个列表的类型都是“## - SOME TEXT”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T07:49:49.543

免责声明：这是用 C# 编写的 - 如果您需要将其翻译成 VB，请告诉我。

```
private void comboBox1_PreviewKeyDown(object sender, PreviewKeyDownEventArgs e)
{
    //It's important to also check that the Combo Box is displaying its Drop Down. If
    //you want this to execute even when it is not displayed, remove the check for
    //comboBox1.DroppedDown.
    if (e.KeyCode == Keys.Enter && comboBox1.DroppedDown &&
        !string.IsNullOrEmpty(comboBox1.Text))
    {
        int index;
        //Attempt to locate the string typed in by the user. An index of -1
        //means it was not found.
        if ((index = comboBox1.FindStringExact(comboBox1.Text)) != -1)
        {
            //Update the SelectedIndex.
            comboBox1.SelectedIndex = index;
        }
    }
} 
```

有趣的是，[文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selectionchangecommitted.aspx)说在处理用户所做的选择更改时，我们应该使用`SelectionChangeCommitted`事件而不是事件。`SelectedIndexChanged`在这种情况下有必要这样做，因为`SelectedIndexChanged`事件使用我的方法触发了两次。

**编辑：**

为防止用户不得不键入整个字符串，请使用 Adi 答案中的建议：转到组合框的属性并设置`AutoCompleteMode`为`SuggestAppend`和`AutoCompleteSource`设置`ListItems`- 我在创建答案时实际上使用了这些设置，所以它应该适合你.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-15T08:24:09.200

```
Private Sub ComboBox1_KeyUp(sender As System.Object, e As System.Windows.Forms.KeyEventArgs) Handles ComboBox1.KeyUp
    If e.KeyCode = Keys.Enter Then
        MessageBox.Show(ComboBox1.SelectedText)
        Call SomeMethod()
    End If
End Sub 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-19T03:14:27.663

```
Option Strict On
Public Class Form1
    Friend WithEvents ComboBox1 As New ComboBox With {.Parent = Me}
    Private Sub Form1_Load(ByVal sender As Object, ByVal e As EventArgs) Handles MyBase.Load
        ComboBox1.Items.AddRange({"hello", "tes1ted", "word", "item", "tes2ted"})
        ComboBox1.Text = ComboBox1.Items(0).ToString
    End Sub
    Private Sub ComboBox1_KeyUp(ByVal sender As Object, ByVal e As KeyEventArgs) Handles ComboBox1.KeyUp
        'You can put this in the keydown event, or adapt it a small bit and put it in the keypress event
        'putting it in the textchanged event is problematic and not recommended.
        Dim OriginalText As String = ComboBox1.Text
        If e.KeyCode = Keys.Enter Then
            If ComboBox1.SelectionLength > 0 Then
                ComboBox1.Text = ComboBox1.Text
                ComboBox1.SelectionLength = 0
                ComboBox1.SelectionStart = ComboBox1.Text.Length
            End If
        End If
        If Not IsTextKey(e.KeyCode) Then Exit Sub
        Dim Filter As String = ComboBox1.Text & "*"
        If Filter.Length = 1 Then Exit Sub
        For I = 0 To ComboBox1.Items.Count - 1
            If LCase(ComboBox1.Items(I).ToString) Like LCase(Filter) Then
                ComboBox1.SelectedItem = ComboBox1.Items(I)
                ComboBox1.Select(OriginalText.Length, (ComboBox1.Text.Length - OriginalText.Length))
                Exit Sub
            End If
        Next
    End Sub
    Function IsTextKey(ByVal Key As Integer) As Boolean
        Select Case True
            Case Key = Keys.Up : Return False
            Case Key = Keys.Down : Return False
            Case Key = Keys.Left : Return False
            Case Key = Keys.Right : Return False
            Case Key = Keys.Back : Return False
            Case Key = Keys.Delete : Return False
            Case Key = Keys.LWin : Return False
            Case Key = Keys.RWin : Return False
                'add whatever I missed
                'return false if the key either removes text from the textbox 
                'or does not produce a character
            Case Else
                'return true if the key produces a visible character(including space)
                Return True
        End Select
    End Function
End Class 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-18T08:53:32.977

我相信你应该设置`AutoCompleteMode`to**`SuggestAppend`**和`AutoCompleteSource`to **`ListItems`**。这样，如果您输入的内容对于 ComboBox 中加载的项目是可持续的，通过写下来并找到该项目，当按下时`Enter`，`SelectedIndexChanged`将被触发（即使找不到匹配项 - 列表中的第一个将被选中）

我已经准备[了一些东西](http://www13.zippyshare.com/v/27418550/file.html)来向你指出这一点。

问候，

阿迪康斯坦丁

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-05T17:05:03.913

订阅 KeyPressed 事件：

```
Private Sub yourComboBox_KeyPressed(sender As System.Object, e As System.KeyPressedEventArgs) Handles yourComboBox.KeyPressed
    If e.KeyChar.Equals((char)Keys.Enter) Then
        Call SomeMethod()
End If 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-09T04:24:09.140

这将帮助您解决问题

```
 Private Sub ComboBox1_KeyDown(ByVal sender As System.Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles ComboBox1.KeyDown
    If e.KeyCode = Keys.Enter Then
        MsgBox("hello")'call some functions
    End If
End Sub 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-12-17T01:13:09.670

你能告诉我这对你有用吗？

```
 Private Sub ComboBox1_KeyPress(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles ComboBox1.KeyPress
      If e.KeyChar = Chr(13) Then
        ComboBox1_SelectedIndexChanged(sender, e)
      End If
    End Sub

    Private Sub ComboBox1_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ComboBox1.SelectedIndexChanged
      MsgBox(ComboBox1.Text)
      'Your code here
    End Sub 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-11-30T06:52:48.803

当组合框下拉样式设置为简单且自动完成设置为附加时，我遇到了类似的问题，从我的列表项中获取。我的解决方法是让字符串变量在每个 textchanged 事件时保存组合框文本。这样，当按下 ENTER 时，您可以检索已删除的文本并将其重新分配给组合框文本。

'全球宣言

```
'Global declaraion
dim selected_text as string = ""

 Private Sub combobox_textchanged(sender As Object, e As EventArgs) Handles combobox.TextChanged
        If combobox.Text IsNot Nothing And combobox.Text <> "" Then
            selected_text = combobox.Text
        End If
 End Sub

Private Sub combobox_keydown(sender As Object, e As KeyEventArgs) Handles combobox.KeyDown
        If e.KeyCode = Keys.Enter Then
            combobox.Text = selected_text
            'put logic here
        End If
End Sub 
```

上面有一些很好的答案，但我喜欢我不需要整理所有的命令键和箭头等。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-03-28T11:18:05.530

在 PreviewKeyDown 事件上手动关闭列表：

```
Private Sub cmbStatus_PreviewKeyDown(sender As ComboBox, e As PreviewKeyDownEventArgs) Handles cmbStatus.PreviewKeyDown
    If e.KeyCode = Keys.Enter Then sender.DroppedDown = False
End Sub 
```

# jenkins - 如何通过 CLI 添加 Jenkins 从节点？

> ID：12750326
> 
> 赞同：12
> 
> 时间：2012-10-05T16:24:31.880
> 
> 标签：jenkins, build-automation, command-line-interface

根据标题，在 Jenkins 中，我如何使用 CLI 将新的从节点添加到我的构建集群，或者如果没有 CLI 选项，是否可以使用另一种可编写脚本的方法？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-06-09T11:59:52.303

可以在[此处](https://wiki.jenkins-ci.org/display/JENKINS/Jenkins+CLI)找到基本 CLI 指令。

以下 CLI 命令应获取新的节点配置 XML 作为标准输入：

```
java -jar jenkins-cli.jar -s [JENKINS_URL] create-node [NewNodeName] 
```

例如，如果要复制现有节点，可以使用：

```
java -jar jenkins-cli.jar -s [JENKINS_URL] get-node [NodeToCopyFrom] | java -jar jenkins-cli.jar -s [JENKINS_URL] create-node [NewNodeName] 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-05T16:46:26.600

许多人使用[Swarm 插件](https://wiki.jenkins-ci.org/display/JENKINS/Swarm+Plugin)来消除手动添加从属服务器的需要。当然，您需要编写 swarm 代理的安装脚本，但这应该非常简单。

# .htaccess - CFM 重定向 301

> ID：12750333
> 
> 赞同：0
> 
> 时间：2012-10-05T16:25:27.623
> 
> 标签：.htaccess, redirect, coldfusion, http-status-code-301

在谷歌上，我有一个网站有一堆旧链接到它的页面，它们是这样的链接。

```
 /mainpage.cfm?linkId=84&LinkType=mainlink 
```

我想用 htaccess 301 重定向它们，但我没有尝试任何工作。

```
RewriteEngine On

RewriteCond %{REQUEST_URI} ^/architectural
RewriteRule .* /mainpage.cfm?linkId=84&LinkType=mainlink 
```

任何想法，我已经尝试了很多这种方法，看来问题出在 .cfm 文件上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:59:54.970

你的问题有点模糊。你说你想从 重写*，* `/mainpage.cfm?linkId=84&LinkType=mainlink`但是你也把它作为你的 RewriteRule 的*目标*。所以我认为有些电线在某处交叉。您能否更新您的问题以包括“我想将 [此当前 URL 示例] 重写为 [您希望第一个结束的 URL]”。还有可能需要 RewriteCond 的任何其他注意事项，以及模式中的任何变化。

*然后*我们可以整理出您的规则/条件。

要按要求回答您的确切问题，您的 RewriteCond 将拒绝`/mainpage.cfm?linkId=84&LinkType=mainlink`，因为它不匹配`^/architectural`。

但是我怀疑这*不是*您要问的问题...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T10:26:21.513

在 mod_rewrite RewriteRule 中只能看到 URI 的目录和文件部分，而不能看到查询字符串。因此，要匹配查询字符串，您需要使用 RewriteCond。

例如

```
RewriteCond %{QUERY_STRING}            linkId=(\d+)&LinkType=mainlink [NC]
RewiteRule ^mainpage\.cfm              newpage.php?linkid=%1 [NC,L] 
```

我已经匹配了 RewriteCond 中的 linkId，然后我在 RewriteRule 中通过 %1 引用它，因为这是在 RewriteCond 中匹配组的语法。

正如@AdamCameron 指出的那样，您没有说明要重定向到的位置，但这应该为您提供解决它的工具。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-05T16:53:01.127

您可以改为在 ColdFusion 页面中执行重定向。只需将以下行添加到 mainpage.cfm 文件的顶部（假设您希望重定向该页面的每个请求）。如果您只想重定向特定`linkId`和/或`LinkType`基于 URL 参数，则可以添加一些条件逻辑。

同样，如果您希望对 mainpage.cfm 的每个请求都进行重定向，只需将其添加到该文件的顶部（**注意**，您需要更改重定向页面的 url）：

```
<cflocation url="http://host/architetural" statusCode="301" addtoken="no"> 
```

*在 ColdFusion 8 中添加了 statusCode 属性 - 因此您必须运行该属性或更新版本*

# ruby-on-rails - RoR、Capistrano、Unicorn、Nginx、Cap deploy 给我“捆绑安装”错误

> ID：12750337
> 
> 赞同：1
> 
> 时间：2012-10-05T16:25:33.073
> 
> 标签：ruby-on-rails, deployment, capistrano, bundler, unicorn

我已经运行了 cap deploy:setup 和 cap deploy:check，一切看起来都很好而且花花公子......但是当我运行 cap deploy 时，我得到了这个错误，不知道它为什么会出现？

错误：

```
failed: "sh -c 'cd /home/deployer/apps/blog/releases/20121005162132 && bundle install --gemfile /home/deployer/apps/blog/releases/20121005162132/Gemfile --path /home/deployer/apps/blog/shared/bundle --deployment --quiet --without development test'" on 192.168.1.121 
```

部署.rb

```
require "bundler/capistrano"

server "192.168.1.121", :web, :app, :db, primary: true

set :application, "blog"
set :user, "deployer"
set :deploy_to, "/home/#{user}/apps/#{application}"
set :deploy_via, :remote_cache
set :use_sudo, false

set :scm, "git"
set :repository, "git@github.com:Preen/blog.git"
set :branch, "master"

default_run_options[:pty] = true
ssh_options[:forward_agent] = true

after "deploy", "deploy:cleanup" # keep only the last 5 releases

namespace :deploy do
  %w[start stop restart].each do |command|
    desc "#{command} unicorn server"
    task command, roles: :app, except: {no_release: true} do
      run "/etc/init.d/unicorn_#{application} #{command}"
    end
  end

  task :setup_config, roles: :app do
    sudo "ln -nfs #{current_path}/config/nginx.conf /usr/local/nginx/sites-enabled/#{application}"
    sudo "ln -nfs #{current_path}/config/unicorn_init.sh /etc/init.d/unicorn_#{application}"
    run "mkdir -p #{shared_path}/config"
    put File.read("config/database.yml"), "#{shared_path}/config/database.yml"
    puts "Now edit the config files in #{shared_path}."
  end
  after "deploy:setup", "deploy:setup_config"

  task :symlink_config, roles: :app do
    run "ln -nfs #{shared_path}/config/database.yml #{release_path}/config/database.yml"
  end
  after "deploy:finalize_update", "deploy:symlink_config"

  desc "Make sure local git is in sync with remote."
  task :check_revision, roles: :web do
    unless `git rev-parse HEAD` == `git rev-parse origin/master`
      puts "WARNING: HEAD is not the same as origin/master"
      puts "Run `git push` to sync changes."
      exit
    end
  end
  before "deploy", "deploy:check_revision"
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T07:16:43.883

在您的服务器上安装捆绑程序，它将工作。

# json - 在 Play 框架中使用读、写和格式

> ID：12750339
> 
> 赞同：1
> 
> 时间：2012-10-05T16:25:35.243
> 
> 标签：json, scala, validation, playframework, playframework-json

我在 Play 中有一些模型！我想从 JSON 序列化/反序列化的应用程序。我曾经有单独的方法，但我已经看到首选的方法是给出`Formats[T]`or的隐式实例`Reads[T]`，比如

```
import play.api.libs.json.{ JsValue, Reads } 

case class Foo(bar: Int, ...)

object Foo {
  implicit object FooReads extends Reads[Foo] {
    def reads(json: JsValue): Foo = //whatever
  }
} 
```

现在，模型可能在 JSON 中有正确的字段，但它没有验证。在这种情况下，我无法反序列化 - 在使用`json.as[Foo]`或`None`使用`json.asOpt[Foo]`.

如果我在发现未验证的字段时抛出异常，则一切似乎都按预期工作。但是我小心翼翼地试图找出我应该抛出什么异常，并且在源代码中`JsValue`我发现了这个

```
def asOpt[T](implicit fjs: Reads[T]): Option[T] = fjs.reads(this).fold(
    valid = v => Some(v),
    invalid = _ => None
  ).filter {
  case JsUndefined(_) => false
  case _ => true
} 
```

现在，我无法理解这应该如何工作。的隐式实例`fjs`由我自己在伴生对象中提供，所以我知道`fjs.reads(this)`要么返回 a`Foo`要么抛出异常。

这是`fold`从哪里来的？它当然不是一种方法`Foo`。我想一个人可能有一个隐式转换，但它应该是从`Any`某种`fold`方法到某物，所以它不会引起太大兴趣。更糟糕的是，如果`fjs.reads(this)`抛出异常，则没有任何东西可以捕获它！

> 那么，应该如何处理 JSON 中的无效输入`Reads[T]`？上面的机制实际上是如何工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T12:39:52.127

查看Play 2.0.x中的[JsonValue.scala ：](https://github.com/playframework/Play20/blob/2.0.x/framework/src/play/src/main/scala/play/api/libs/json/JsValue.scala)

```
def asOpt[T](implicit fjs: Reads[T]): Option[T] = catching(classOf[RuntimeException]).opt(fjs.reads(this)).filter {
  case JsUndefined(_) => false
  case _ => true
} 
```

事实上，代码正在使用[scala.util.control.Exception. catch[T](exceptions: Class[_]*): Catch[T]](http://www.scala-lang.org/api/current/index.html#scala.util.control.Exception%24)，它返回一个`Catch[T]`. 然后它调用 opt(...) 。如果抛出异常，那么它将返回 None 而不是`T`.

因此，当您在反序列化时遇到错误时，您可以安全地抛出异常。

# c# - 两个文件夹中的数据库，bin->debug，release

> ID：12750340
> 
> 赞同：0
> 
> 时间：2012-10-05T16:25:40.877
> 
> 标签：c#, sqlite

我将我的数据库添加到 bin->Debug 和 bin->Release 文件夹中。当我创建一个安装文件时，我从配置管理器-> 发布中获取主要输出。有没有办法让我只在一个地方设置数据库（不是调试和发布文件夹）这是连接字符串：

```
 <add name="myConnString" connectionString="Data Source=Test.sqlite; InitialCatalog = Test.sqlite;Compress=True;Version=3"
      providerName="System.Data.Sqlite" /> 
```

感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T16:29:02.267

为什么不创建与 bin 文件夹相同级别的“数据”文件夹？这样数据库位置永远不会改变，您可以使用**InitialCatalog =../../data/Test.sqlite**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:30:11.617

将其放在主项目路径中：

```
<add name="myConnString" connectionString="Data Source=Test.sqlite; InitialCatalog = ..\..\Test.sqlite;Compress=True;Version=3"
  providerName="System.Data.Sqlite" /> 
```

# webgl - 三个JS通过id选择几何

> ID：12750344
> 
> 赞同：2
> 
> 时间：2012-10-05T16:26:16.777
> 
> 标签：webgl, three.js

背景：我是一个懂 JS 的开发者，但是对 Three JS 比较陌生。我做过一些涉及带有基本重复动画的静态场景的小项目。

我目前正在研究 Google Globe 项目[http://workshop.chromeexperiments.com/globe/](http://workshop.chromeexperiments.com/globe/)的修改版本。回想起来，我可能应该从头开始，但这是一个很好的工具，可以看到他们的开发人员采取的方法。我只是希望我现在可以更新 ThreeJS 而不让整个事情崩溃（有太多不受支持的方法和一些我永远无法修复的错误，至少在我尝试它的那个小时内没有）。

在最初，他们将所有几何点合并到一个对象中以加快 FPS。出于我的目的，我正在使用 JSON 更新地球上的点，并且永远不会超过 100 个（实际上可能不超过 60 个），因此它们需要保持独立。我已经删除了“组合”阶段，因此我现在可以单独将数据分配给点，然后调整高度变化动画。

我的问题是，如何手动选择一个点（这是一个立方体几何），以便我可以修改高度值？我在 GitHub 上浏览了 Stack Overflow 和 Three JS，但我不确定我是否理解这个过程。我正在分配一个 ID 以使其与传递给它的数据直接相关（我知道 WebGL 为粒子添加了一个单独的名称/ID，但我需要一些与我正在做的事情更直接相关的东西为简单起见）。这似乎工作正常。但同样，作为一名 JS 开发人员，我在 jQuery 中尝试过 .getElementById(id) 和 $('#'+id) ，但都不起作用。我意识到 Geometry 对象的行为方式与 HTML DOM 对象不同，所以我想这就是我遇到困难的地方。

将数据点添加到地球的代码：

```
function addPoint(lat, lng, size, color, server) {
    geometry = new THREE.Cube(0.75, 0.75, 1, 1, 1, 1, null, false, { px: true,
    nx: true, py: true, ny: true, pz: false, nz: true});

    for (var i = 0; i < geometry.vertices.length; i++) {
        var vertex = geometry.vertices[i];
        vertex.position.z += 0.5;
    }

    var point = new THREE.Mesh(geometry, new THREE.MeshBasicMaterial ({
        vertexColors: THREE.FaceColors
    }));

    var phi = (90 - lat) * Math.PI / 180;
    var theta = (180 - lng) * Math.PI / 180;

    point.position.x = 200 * Math.sin(phi) * Math.cos(theta);
    point.position.y = 200 * Math.cos(phi);
    point.position.z = 200 * Math.sin(phi) * Math.sin(theta);

    if($('#'+server).length > 0) {
        server = server+'b';
    }

    point.id = server;

    point.lookAt(mesh.position);

    point.scale.z = -size;
    point.updateMatrix();

    for (var i = 0; i < point.geometry.faces.length; i++) {
        point.geometry.faces[i].color = color;
    }

console.log(point.id);

    scene.addObject(point);
} 
```

所以现在回去，我知道我不能使用 point.id 因为显然那只会在函数内部引用。但我尝试了“Globe.id”、“Globe.object.id”、“object.id”，但似乎没有任何效果。我知道这是可能的，但我似乎找不到有效的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:04:43.750

好的，我通过玩结构找到了一种适用于此的方法。

本质上，场景被标记为“地球”，所有对象都是它的子对象。因此，将场景视为一个数组，我们可以使用以下结构成功地将一个对象传递给一个 var：

地球 > 场景 > 儿童 > [对象]

使用匹配函数，我们遍历每个项目并找到所需的几何对象并将其分配给临时变量以进行动画/调整：

```
function updatePoints(server){
    var p, lineObject;

    $.getJSON('/JSON/'+server+'.json', function(serverdata) {

        /* script that sets p to either 0 or 1 depending on dataset */

        var pointId = server+p;

        //Cycle through all of the child objects and find a patch in 
        for(var t = 3; t < globe.scene.children.length; t++) {
            if(globe.scene.children[t].name === pointId) {
                //set temp var "lineObject" to the matched object
                lineObject = globe.scene.children[t];
            }
        }

        /* Manipulation based on data here, using lineObject */
    });
} 
```

我不知道这是否是其他人对此有疑问的问题，但我希望它对其他人有帮助！:)

编辑：刚刚意识到这不是一个键控数组，所以我可以使用 .length 来获取对象的总数

# python - 使用 twiny 时 Python Matplotlib 图形标题与轴标签重叠

> ID：12750355
> 
> 赞同：163
> 
> 时间：2012-10-05T16:26:49.633
> 
> 标签：python, matplotlib, title, figure

我正在尝试使用 twiny 在同一个图表上绘制两个单独的数量，如下所示：

```
fig = figure()
ax = fig.add_subplot(111)
ax.plot(T, r, 'b-', T, R, 'r-', T, r_geo, 'g-')
ax.set_yscale('log')
ax.annotate('Approx. sea level', xy=(Planet.T_day*1.3,(Planet.R)/1000), xytext=(Planet.T_day*1.3, Planet.R/1000))
ax.annotate('Geostat. orbit', xy=(Planet.T_day*1.3, r_geo[0]), xytext=(Planet.T_day*1.3, r_geo[0]))
ax.set_xlabel('Rotational period (hrs)')
ax.set_ylabel('Orbital radius (km), logarithmic')
ax.set_title('Orbital charts for ' + Planet.N, horizontalalignment='center', verticalalignment='top')

ax2 = ax.twiny()
ax2.plot(v,r,'k-')
ax2.set_xlabel('Linear speed (ms-1)')

show() 
```

并且数据显示得很好，但我遇到的问题是图形标题与辅助 x 轴上的轴标签重叠，因此几乎无法辨认（我想在这里发布一个图片示例，但我没有足够高的代表了）。

我想知道是否有一种简单的方法可以将标题直接向上移动几十个像素，以便图表看起来更漂亮。

* * *

## 回答 #1

> 赞同：284
> 
> 时间：2014-04-28T10:14:27.430

我不确定它是否是 matplotlib 更高版本中的新功能，但至少对于 1.3.1，这很简单：

```
plt.title(figure_title, y=1.08) 
```

这也适用于`plt.suptitle()`，但（还）不适用于`plt.xlabel()`等。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-10-05T17:28:12.197

忘记使用`plt.title`，直接用 . 放置文本`plt.text`。下面给出一个过于夸张的例子：

```
import pylab as plt

fig = plt.figure(figsize=(5,10))

figure_title = "Normal title"
ax1  = plt.subplot(1,2,1)

plt.title(figure_title, fontsize = 20)
plt.plot([1,2,3],[1,4,9])

figure_title = "Raised title"
ax2  = plt.subplot(1,2,2)

plt.text(0.5, 1.08, figure_title,
         horizontalalignment='center',
         fontsize=20,
         transform = ax2.transAxes)
plt.plot([1,2,3],[1,4,9])

plt.show() 
```

![在此处输入图像描述](../Images/5463e6d6e484ebfe8255c4819c52e6a2.png)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2018-07-05T05:56:29.550

我遇到了与子图标题重叠的 x-label 问题；这对我有用：

```
import matplotlib.pyplot as plt
fig, ax = plt.subplots(2, 1)
ax[0].scatter(...)
ax[1].scatter(...)
plt.tight_layout()
.
.
.
plt.show() 
```

# 前

[![在此处输入图像描述](../Images/200021b26e7748a05f10b7bcf3c28508.png)](https://i.stack.imgur.com/mZusF.png)

# 后

[![在此处输入图像描述](../Images/e1ff12f353d3ca2d56cff0dcb60d001b.png)](https://i.stack.imgur.com/Re5SH.png)

参考：

*   [https://matplotlib.org/users/tight_layout_guide.html](https://matplotlib.org/users/tight_layout_guide.html)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-09-29T06:53:17.950

```
ax.set_title('My Title\n', fontsize="15", color="red")
plt.imshow(myfile, origin="upper") 
```

如果你把`'\n'`你的标题字符串，情节就在标题下方绘制。这也可能是一个快速的解决方案。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2020-03-27T20:13:42.207

您可以在这种情况下使用 pad：

```
ax.set_title("whatever", pad=20) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-08-24T06:10:59.793

`plt.tight_layout()`之前用过`plt.show()`。它运作良好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-06T15:10:45.857

如果您不想进入标题的`x`,位置，这是一个临时解决方案。`y`

以下为我工作。

```
plt.title('Capital Expenditure\n') # Add a next line after your title 
```

荣誉。

# jquery - 使用jquery将多个选择表单作为数组发送

> ID：12750361
> 
> 赞同：0
> 
> 时间：2012-10-05T16:27:17.763
> 
> 标签：jquery, ajax, arrays, select

目前我正在从一些多个选择框中发布单个值。如果我想将变量发布为字段活动和 yearOfBirth 上的数组而不是字符串，如何通过更改当前代码来实现这一点？

谢谢！

```
function showUser() {
    // getting the value that user typed
    var firstName = $("#firstName").val();
    var lastName = $("#lastName").val();
    var sex = $("#sex").val();
    var registrationType = $("#registrationType").val();
    var activity = $("#activity").val();
    var yearOfBirth = $("#yearOfBirth").val();

    // forming the queryString
    var data = 'search_firstName=' + firstName + '&search_lastName=' + lastName + '&search_registrationType=' + registrationType + '&search_activity=' + activity + '&search_yearOfBirth=' + yearOfBirth + '&search_sex=' + sex;

    // if searchString is not empty
    if (firstName || lastName || sex || registrationType || activity || yearOfBirth) {
        // ajax call
        $.ajax({
            type: "POST",
            url: "groupQsearchMember.php",
            data: data,
            beforeSend: function() {
                $('#whileLoading').show();
                $('#results').hide();
            },
            complete: function() {
                $('#whileLoading').hide();
            },
            success: function(html) {
                $("#results").html(html);
                $("#results").fadeIn(700);
            },

        });
    }
    return false;
};​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:05:44.267

您需要将选择字段的值拆分为一个数组，只需添加`.split(',')`，然后遍历数组以添加数组括号，例如：

```
var registrationTypeString = "";
$("#registrationType").val().split(',').each(function(item){
    registrationTypeString += '&registrationType[]=' + item;
});

//..

var data = 'search_firstName=' + firstName + '&search_lastName=' + lastName + registrationTypeString + '&search_activity=' + activity + '&search_yearOfBirth=' + yearOfBirth + '&search_sex=' + sex; 
```

使用您的选择字段执行此操作，然后您将在 PHP 中拥有数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-20T15:39:37.597

不要手动构建 POST 数据，而是确保您的表单元素具有所需的`name`属性并`data`像这样创建：

```
 var data = $("#firstName, #lastName, #sex, #registrationType, #activity, #yearOfBirth").serialize(); 
```

根据[jQuery 文档，`serialize()`](https://api.jquery.com/serialize/)其中将创建**“标准 URL 编码表示法的文本字符串”。**

# c++ - Objective-C++ 不编译

> ID：12750363
> 
> 赞同：2
> 
> 时间：2012-10-05T16:27:30.937
> 
> 标签：c++, objective-c, compilation, compiler-errors, objective-c++

我正在尝试为 ios 构建一个应用程序。我已经有一个用 C++ 编写的库，我想在我的应用程序中使用它。所以很自然地我需要写一些Objective-C++。
我从以下简单文件中得到一些奇怪的错误：
Engine.mm：

```
#import <Foundation/Foundation.h> 
```

是的...
这些是我遇到的错误：

```
CFCalendar.h:70:28: Missing ',' between enumerators
CFCalendar.h:71:28: Redefinition of enumerator '__AVAILABILITY_INTERNAL__IPHONE_5_0'
CFError.h:69:43: Expected ';' after top level declarator
fatal error: too many errors emitted, stopping now 
```

您可以猜到，这些错误还有很多。
这是我的配置：

编译器：Apple LLVM 4.1。
C 方言：GNU99
C++ 方言：GNU++98
C++ 标准库：libstdc++（GNU C++ 标准库）
编译源为：根据文件类型

，我尝试了许多其他变体，但没有一个适合我。
任何意见，将不胜感激。

谢谢， 塔尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T21:03:56.800

最后证明是一个 Xcode 错误。我只是删除了该文件并再次创建它并且它起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:27:41.997

基于错误：

```
CFCalendar.h:71:28: Redefinition of enumerator '__AVAILABILITY_INTERNAL__IPHONE_5_0' 
```

当我在 .m 和 .h 文件中导入标头时，我看到了类似的重新定义错误。不确定这是否是您的问题，您能否发布 .mm 和 .h 的导入片段？

# jakarta-ee - 在自定义反序列化器中使用 EntityManager 与 JAX-RS 和 Jackson

> ID：12750365
> 
> 赞同：4
> 
> 时间：2012-10-05T16:27:33.213
> 
> 标签：jakarta-ee, jpa, jackson, jax-rs

我有一个用 JSON 格式的客户数据：

```
{
    "name":"My Name",
    "company":{
        "id":9
    }
} 
```

我的实体看起来像：

```
@Entity
public class Customer {
    @Id
    Integer id;

    String name;

    @Reference
    Company company;

    /* getters and setters */
} 
```

我想用 Jackson 反序列化这些数据并获得`company`via的参考`EntityManager.getReference(Company.class, id)`。注解`@Reference`是一个自定义注解，表示我希望你使用我的自定义反序列化器并检索引用。目标是透明地访问`company`我的 JAX-RS 服务端点中的信息。

我的问题是：我应该如何在反序列化过程中注入或创建 EntityManager ？

这是一些代码：

```
@Provider
public class ObjectMapperContext implements ContextResolver<ObjectMapper> {

    private ObjectMapper mapper;

    public ObjectMapperContext() {
        super();
        mapper = new ObjectMapper();
        mapper.registerModule(new CustomModule());
    }

    @Override
    public ObjectMapper getContext(Class<?> type) {
        return mapper;
    }
} 
```

在`CustomModule.java`：

```
public class CustomModule extends SimpleModule {
    @Override
    public void setupModule(SetupContext context) {
        super.setupModule(context);
        AnnotationIntrospector ai = new CustomAnnotationIntrospector();
        context.appendAnnotationIntrospector(ai);
    }
    [...]
} 
```

最后，在`CustomAnnotationIntrospector.java`：

```
public class CustomAnnotationIntrospector extends AnnotationIntrospector {
    @Override
    public Object findDeserializer(Annotated am) {
        Reference reference = am.getAnnotation(Reference.class);
        if(reference == null){
            return null;
        }
        return CustomDeserializer.class;
    }
} 
```

# mysql - Capistrano 部署与 Spree commerce 到 Ubuntu 服务器

> ID：12750366
> 
> 赞同：3
> 
> 时间：2012-10-05T16:27:34.517
> 
> 标签：mysql, ruby-on-rails, spree

我成功部署了，但是在我成功之后。我无法访问“状态”和“用户”的配置部分。我不确定我应该从哪里开始解决这些问题。

我在本地机器上使用 Spree 1.2、Ruby 1.9.3、Rails 3.2.8。它工作得很好。我正在使用成功的大礼包部署过程。

关于我应该从哪里开始的任何指示？

我得到的错误：“我们很抱歉，但出了点问题。” 有没有办法在生产服务器上启用更有意义的错误？

**编辑**

错误：

> Spree::Admin::StatesController#index 作为 HTML
> 参数处理：{"country_id"=>"214"} Completed 500 Internal Server Error in 16ms
> 
> NoMethodError（未定义的方法集合'spree_core（1.2.0）app/controllers/spree/admin/states_controller.rb:21:in load_resource'activesupport（3.2.8）lib/active_support/callbacks.rb:473:in __run_callback'activesupport（ 3.2.8) lib/active_support/callbacks.rb:385:in run_callbacks' actionpack (3.2.8) lib/abstract_controller/callbacks.rb:17:in process_action' actionpack (3.2.8) lib/action_controller/metal/instrumentation。 rb:30:in块在仪器的 activesupport (3.2.8) lib/active_support/notifications/instrumenter.rb:20:in仪器的 actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:29:in`states' for nil:NilClass):
> spree_core (1.2.0) app/controllers/spree/admin/resource_controller.rb:172:in``collection'
> spree_core (1.2.0) app/controllers/spree/admin/resource_controller.rb:129:in` `_run__4032520494098752802__process_action__736043668495006995__callbacks' activesupport (3.2.8) lib/active_support/callbacks.rb:405:in` `_run_process_action_callbacks' activesupport (3.2.8) lib/active_support/callbacks.rb:81:in` `process_action'
> actionpack (3.2.8) lib/action_controller/metal/rescue.rb:29:in` `block in process_action' activesupport (3.2.8) lib/active_support/notifications.rb:123:in`
> `instrument'
> activesupport (3.2.8) lib/active_support/notifications.rb:123:in` `process_action' actionpack (3.2.8) lib/action_controller/metal/params_wrapper.rb:207:in`process_action' activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:18:in `process_action' actionpack (3.2.8) lib/abstract_controller/base.rb:121:in`process' actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process' actionpack (3.2.8) lib/action_controller/metal.rb:203:in`dispatch' actionpack (3.2.8) lib/ action_controller/metal/rack_delegation.rb:14:in `dispatch' actionpack (3.2.8) lib/action_controller/metal.rb:246:in` block in action' actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call' actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in`dispatch'
> actionpack (3.2.8) lib/action_dispatch/routing/route_set. rb:36:in `call' journey (1.0.4) lib/journey/router.rb:68:in`block in call'
> Journey (1.0.4) lib/journey/router.rb:56:in `each' journey (1.0.4) lib/journey/router.rb:56:in`call' actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call' spree_core (1.2.0) lib/spree/core/middleware/redirect_legacy_product_url.rb:13:in` call' spree_core (1.2.0) lib/spree/core/middleware/seo_assist.rb:27:in `call' railties (3.2.8) lib/rails/engine.rb:479:in`call' railties (3.2.8) lib/rails/railtie/configurable.rb:30:在`method_missing' journey (1.0.4) lib/journey/router.rb:68:in`呼叫中的阻塞之旅 (1.0.4) lib/journey/router.rb:56:in `each' journey (1.0.4) lib/journey/router.rb:56:in`call’ actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:`call' warden (1.1.1) lib/warden/manager.rb:35:in`呼叫中的阻塞’warden (1.1\. 1) lib/warden/manager.rb:34:in `catch' warden (1.1.1) lib/warden/manager.rb:34:in`call' actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call' rack (1.4.1) lib/rack/etag.rb:23:in`call' rack (1.4.1) lib/rack/conditionalget.rb: 25:in `call' actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in`call' actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in call' rack (1.4.1) lib/rack/session/abstract/id.rb:205:in call' actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in call' activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in block in call'`call'
> actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in` `context' rack (1.4.1) lib/rack/session/abstract/id.rb:200:in`
> `call' activerecord (3.2.8) lib/active_record/query_cache.rb:64:in` `call' actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in`
> activesupport (3.2.8) lib/active_support/callbacks.rb:405:in __run_callback' activesupport (3.2.8) lib/active_support/callbacks.rb:385:in run_callbacks' actionpack (3.2.8) lib/action_dispatch/middleware/ callbacks.rb:27:in call' actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in call' railties (3.2.8) lib/rails/rack/logger.rb:26:in call ' actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in call' rack (1.4.1) lib/rack/runtime.rb:17:in call' rack (1.4.1) lib/rack /lock.rb:15:in forward' rack-cache (1.2) lib/rack/cache/context.rb:245:in查找' rack-cache (1.2) lib/rack/cache/context.rb:66:in`_run__4438386178050912955__call__4341646712790791334__callbacks'
> activesupport (3.2.8) lib/active_support/callbacks.rb:405:in` `_run_call_callbacks'
> activesupport (3.2.8) lib/active_support/callbacks.rb:81:in` `call' actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in`
> `call'
> actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in`
> `call_app' railties (3.2.8) lib/rails/rack/logger.rb:16:in``call' rack (1.4.1) lib/rack/methodoverride.rb:21:in``call' activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in``call' rack-cache (1.2) lib/rack/cache/context.rb:136:in``fetch' rack-cache (1.2) lib/rack/cache/context.rb:185:in``call!' rack-cache (1.2) lib/rack/cache/context.rb:51:in`调用' railties (3.2.8) lib/rails/engine.rb:479:in `call' railties (3.2.8) lib/rails/application.rb:223:in`call' railties (3.2.8) lib/rails/railtie/configurable.rb:30:in `method_missing' unicorn (4.3.1) lib/unicorn/http_server.rb:531:in`process_client' unicorn (4.3.1) lib/ unicorn/http_server.rb:606:in `worker_loop' unicorn (4.3.1) lib/unicorn/http_server.rb:487:in`spawn_missing_workers'
> unicorn (4.3.1) lib/unicorn/http_server.rb:137:in `start' unicorn (4.3.1) bin/unicorn_rails:209:in`'
> /data/spree/shared/bundle/ruby/1.9.1/bin/unicorn_rails:23:在'`load'
> /data/spree/shared/bundle/ruby/1.9.1/bin/unicorn_rails:23:in`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:13:37.437

你给数据库播种了吗？跑`rake db:seed`

似乎您的数据库中没有预期的州/国家/地区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T22:25:05.050

您的 Gemfile.lock 是否受版本控制？如果 bundler 没有运行您在机器上使用的同一个 Gemfile.lock，您可能会遇到开发环境和生产环境之间的差异。

除非出现问题，否则我会尝试在您的开发盒上以生产模式运行，看看是否出现问题。我要追查的最令人沮丧的问题是，当在开发中运行相同的代码时，生产中没有出现问题。如果您可以将其隔离到不同的环境中，则可以更好地调试。试试`bundle exec rails s -e production`。如果出现问题，您可以安装 ruby​​ 调试器并强制它中断问题代码。您还可以编辑 config/environments/production.rb 以更紧密地匹配 development.rb，这样您就可以在不重新启动服务器、关闭类缓存等的情况下编辑代码。

我在状态代码中也有一个问题，导致我出现 406 Not Acceptable，因为请求错误地要求 HTML，而状态控制器仅使用 javascript 响应。解决的办法是在源码中找到有问题的链接，强制它请求js。你可以[在这里](https://github.com/lilleyt/spree/commit/4812c67bd48a7a584e4646f5b246097195895d22)看到它。你的问题有一些相同的特征，但不是全部，所以这是在黑暗中拍摄的。祝你好运。

# assembly - x86 程序集中的 movl，intel 语法

> ID：12750368
> 
> 赞同：0
> 
> 时间：2012-10-05T16:27:39.477
> 
> 标签：assembly, x86, att

只是一个简短的问题。任何人都知道我是否可以在装配中做到这一点？

```
movl $4, %ebx
movl (%ebx)(%esp), %eax 
```

我要做的基本上是创建一个循环，从堆栈中添加下一个参数（固定大小）。

例子：

```
int foo( int x, int y, int z, int a){
    if(x == y){
         x = z;
       if(y == z){
            printf("%d", a);
      }
    }
} 
```

只有当我确定前两个条件为真时，我才能将 a 加载到寄存器中，而不是立即将 x、y、z 和 a 加载到寄存器中。

p / s：即时编写代码，并没有真正做任何有用的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T18:28:26.473

你要这个

```
movl $1, %ebx
movl (%esp,%ebx,$4), $eax 
```

每次将 %ebx 递增 1 以获取下一个参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T18:26:51.353

```
movl (%esp,%ebx),%eax 
```

被我的编译器接受。

语法是

```
mov'suffix' (offset,base[,scale]),target 
```

括号中的比例，因为它是可选的

# facebook - OG 多对象动作：如何设置故事附件标题？

> ID：12750369
> 
> 赞同：3
> 
> 时间：2012-10-05T16:27:51.113
> 
> 标签：facebook, facebook-graph-api, action

我有一个 Open Graph 操作，可以连接到具有不同属性的多个对象。由于这些对象的性质完全不同，动作一次连接到其中一个。

现在我想为我的动作设置故事附件部分，我选择了允许 4 行标题的*项目布局。*我可以设置此部分并将其成功用于其中一个对象：

```
Caption 1: {object1.field1}
Caption 2: {object1.field2}
Caption 3: {object1.field3}
Caption 4: {object1.field4} 
```

**但这里有一个问题：**如何设置标题以同时与第二个和第三个对象一起使用？！我试图将第二个对象与第一个对象放在同一行，例如（尽管它们没有一起使用）：

```
Caption 1: {object1.field1} {object2.field1} 
```

最终结果是，上面的行既不会为*object1*也不会为*object2*显示，因为其中一个总是不存在！如果您在标题行中列出多个字段并且其中一个字段没有值，Facebook 将完全省略整行。

另一方面，Facebook 不允许我为我的其他对象添加另一个*项目布局*来单独设置它们！任何想法？

谢谢，

# facebook - Facebook页面所有者验证

> ID：12750371
> 
> 赞同：4
> 
> 时间：2012-10-05T16:27:55.970
> 
> 标签：facebook, facebook-graph-api, facebook-page

我们正在构建允许场地所有者通过 Android 应用程序向其客户发送特定消息的应用程序。一个挑战是场地所有者验证的过程（场地的数据库是众包的），我们正在寻找进行验证的最佳和最简单的方法。

所以，任务是：

1.  我们知道场地名称和地址
2.  我们知道 Facebook 上的场地 ID（场地 facebook 页面参考）

问题是：*是否有任何 FB API 可以让我们验证用户是否是特定 FB 页面的所有者？*

例如，该过程将如下：

*   场地所有者访问我们的网站
*   场地所有者搜索他的场地
*   场地所有者连接到FB
*   我们正在验证他是否管理连接到该场地的页面

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:38:44.760

当您`manage_pages`从用户那里获得许可时，您可以访问他们管理的页面列表`/<user id>/accounts`- 这是检查用户是否是特定页面的管理员的唯一方法，除非您的应用程序作为该页面上的选项卡被访问。

在这种情况下，`signed_request`带有标签加载的发送包含一个`page`元素，告诉您当前用户是否喜欢/是页面的管理员，以及页面 ID

# frameworks - 如何使用 Play 将多个表单元素绑定到单个变量！框架

> ID：12750374
> 
> 赞同：1
> 
> 时间：2012-10-05T16:28:10.723
> 
> 标签：frameworks, playframework, playframework-1.x

我正在使用游戏！框架，版本 1。我有一个表单，其中包含 3 个不同的选择元素，分别代表日、月和年。我想将这些绑定到用户的出生日期（在用户类中定义的公共日期出生日期）。我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T05:50:30.973

您可以在类中为日、月和年创建三个 setter getter，并使用这些值更新您的日期。最好的方法是使用 joda date classes

```
public class MyClass {
    public DateMidnight birthDate;

    public int getBirthDateYear() {
        return birthDate.getYear();
    }
    public void setBirthDateYear(int year) {
        birthDate = birthDate.withYear(year);
    }
} 
```

与“monthOfYear”和“dayOfMonth”相同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T01:24:08.143

我认为模型中的任何东西都不值得大惊小怪，play 可以在控制器中完成这一切，这有点逻辑，但在较小的应用程序中应该没什么大不了的。假设您的选择框在您的控制器中发布数字，并且您将按名称正确映射的其他用户内容发送到用户属性：

```
public static void save(User user, String day, String month, String year) {
    DateFormat formatter = new SimpleDateFormat("MMddyy");
    Date birthDate = formatter.parse(month + day + year);
    user.birthDate = birthDate;
    user.save();
} 
```

# ios - 导航核心数据对象图 [2]

> ID：12750377
> 
> 赞同：1
> 
> 时间：2012-10-05T16:28:21.500
> 
> 标签：ios, cocoa, core-data, nspredicate

我昨天问了一个[问题](https://stackoverflow.com/questions/12733490/navigating-the-core-data-object-graph)，我真的应该从一个更简单的例子开始。将我的问题提炼为基础知识后，我设法使用现有的 SO 问题和答案解决了我的问题。

我在这里总结我的问题（并提供我自己的解决方案），因为我认为没有任何帖子足够清楚地解释这一点。作为 Core Data 的新手并努力摆脱 SQL 概念，我欢迎就我的解决方案的适用性以及是否有更好的问题建模方法提供反馈。

***问题***

给定以下对象模型，它具有三个实体 A、B 和 C，每个实体由一对多关系链接：

![模型](../Images/68c467a04a3cb92beb81242eb2999619.png)

如何识别具有具有特定属性的孙***C实体的父******A实体？***例如，使用这些示例实体及其关系：

 *![例子](../Images/f2ad2b4ad03130080fdece5495bfb20b.png)

我怎样才能找到我们的哪个实体***A***有带有标签的子实体***C***：是？

***解决方案***

我已经能够通过使用`SUBQUERY`关键字来实现这一点`NSPredicate`。这是对我有用的代码片段（假设您已经设置了托管对象上下文等）：

```
NSError *error = nil;
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"EntityA" inManagedObjectContext:context];   
[fetchRequest setEntity:entity];
NSPredicate *predicateTemplate = [NSPredicate predicateWithFormat:@"(0 != SUBQUERY(child, $a, (0 != SUBQUERY($a.child, $child, $child.tag == %@).@count)).@count)", @"YES"]; 
[fetchRequest setPredicate:predicateTemplate];
NSArray *test = [context executeFetchRequest:fetchRequest error:&error]; 
```

将所有重要的 NSPredicate 字符串分成几行：

```
(0 != SUBQUERY(child, 
               $a, 
               (0 != SUBQUERY($a.child,
                              $child, 
                              $child.tag == %@).@count)
               ).@count
) 
```

重要的部分是我们选择`EntityA`要从中工作的对象，然后在嵌套子查询`child`中处理实体的关系。我希望这可以重复几个深度。放在一起不是最直观的东西......但它确实有效。欢迎评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T18:27:51.297

如果您遵循核心数据指南并建立了互惠关系，您可以尝试自下而上进行搜索。

获取传递您所需谓词的实体 C 对象，然后通过向上父级获取实体 A 对象。不需要嵌套子查询。

**编辑添加**

您可以从关系中获取 C 的父级（它是 B 的对象）`parent`。从那里您可以从关系中获取父级（它是 A 的对象）`parent`。

它在您的核心数据模型图中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T03:47:59.520

我以前从未尝试过使用子查询，这很酷，很高兴看到它的示例。您实际上应该添加解决方案作为问题的答案！

我可能会按照 Abizern 的建议去做，因为这是一个类似树的层次结构，并且使用一对一的关系更容易遍历树。

在代码中，这看起来像：

```
NSManagedObjectContext *moc = APPDELEGATE.managedObjectContext;
NSFetchRequest *request = [NSFetchRequest new];
[request setEntity:[NSEntityDescription entityForName:@"EntityC" inManagedObjectContext:moc]];
[request setPredicate:[NSPredicate predicateWithFormat:@"tag = YES"]];
NSError *fetchError = nil;
NSArray *children = [moc executeFetchRequest:request error:&fetchError]; 
```

`children``EntityC`是与谓词匹配的对象数组。下一步是获取一组独特的`EntityA`对象，它们是这些对象的“祖父母”。我们可以在这里利用键值编码：

```
NSArray *grandParents = [children valueForKeyPath:@"parent.@distinctUnionOfObjects.parent"]; 
```

在这种情况下，为了提高效率，我们可能希望`parent.parent`在初始获取请求期间预取密钥路径：

```
[request setRelationshipKeyPathsForPrefetching:@[@"parent.parent"]]; 
```

希望这可以帮助！*

# c++ - 模板不会在 C++ 中推断零长度数组的大小

> ID：12750378
> 
> 赞同：6
> 
> 时间：2012-10-05T16:28:25.573
> 
> 标签：c++, templates

假设我有一个模板函数来推断数组参数的长度。

```
template <size_t S>
void join(const char d[], const char *(&arr)[S]) { } 
```

如果我这样称呼它，一切都很好：

```
const char *messages[] = {
    "OK",
    "Not OK",
    "File not found"
};
join("\n", messages); 
```

但是如果我用一个空数组调用它，像这样：

```
const char *messages[] = { };
join("\n", messages); 
```

…它不能编译（使用 clang 4.0）：

```
targs.cpp:9:5: 错误：没有匹配的函数调用“加入”
    加入（“\n”，消息）；
    ^~~~
targs.cpp:4:6: 注意：候选模板被忽略：替换失败 [with S = 0]
无效连接（常量字符 d[]，常量字符 *(&arr)[S]) { }
     ^
产生 1 个错误。
```

我猜它与不喜欢零长度数组的 C++ 有关，但如果函数不是模板并将长度作为单独的参数，它不会抱怨我将消息声明为零长度大批。

这是怎么回事，有什么好的解决方法吗？

* * *

我的实际用例是定义 HTTP API 端点采用的参数，看起来像这样：

```
const api_param_t params[] = {
    { API_TYPE_STRING, "foo" },
    { API_TYPE_UINT64, "bar" },
    { API_TYPE_STRING, "baz" }
}
const api_status_t status_codes[] = { … };
const api_middleware_t middleware[] = { … };

new api_endpoint("/foo", params, status_codes, middleware); 
```

大多数端点至少采用一个参数，但许多端点不采用。看起来这确实是 GCC 和 clang 都实现的扩展（但是，看起来并不完全……）。我可以想到一些解决方法：

*   将构造函数重载`api_endpoint`到特殊情况的零长度参数（但我需要其中的 2 ³个来覆盖每个零长度参数），GCC/clang 扩展可以使用。

*   不要试图推断数组长度，将其作为单独的参数（并继续使用零长度数组）

*   对这些参数使用更高级别的数据结构，例如向量

*   使用魔法值来表示“空”

…但如果有人有更好的想法，我很想听听他们

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T16:35:51.093

这段代码首先是不合法的：

```
const char *messages[] = { }; 
```

以下是我的编译器产生的错误和警告：

```
main.cpp:6:26: warning: zero size arrays are an extension [-Wzero-length-array]
const char *messages[] = { };
                         ^
main.cpp:7:1: error: no matching function for call to 'join'
join("\n", messages);
^~~~
main:3:6: note: candidate template ignored: substitution failure [with S = 0]: zero-length arrays are not permitted in C++
void join(const char d[], const char *(&arr)[S]) { }
     ^                                       ~
1 warning and 1 error generated. 
```

所以实际上根本不允许使用零长度数组。您的编译器似乎具有零长度数组的扩展，但是，它不涵盖这种特定情况。扩展有时就是这样，因为更少的工作进入扩展以使它们与整个语言一致。

解决方法取决于您为什么需要零长度数组以及如何在其他地方使用它。一种解决方法可能是使用单个元素数组。

* * *

这是一个解决方法。由于扩展不允许将数组大小推导为零，因此添加了一个不需要此推导的重载：

```
template <size_t S>
void join(const char d[], const char *(&arr)[S]) {
    std::cout << "array length > 0\n";
}

void join(const char d[], const char *(&arr)[0]) {
    std::cout << "extension, zero length array\n";
}

int main() {
    const char *messages[] = {
        "OK",
        "Not OK",
        "File not found"
    };
    join("\n", messages);

    const char *messages2[] = { };
    join("\n", messages2);
} 
```

You should keep in mind that this is using an extension and is not portable code. You may prefer to write portable code in order to avoid being locked into any particular C++ implementation. You can see how much you rely on this extension by adding the flag `-Wzero-length-array` to your builds.

# asp.net-mvc - MvcSiteMapProvider 在页面渲染时未准备好，缓存问题？

> ID：12750382
> 
> 赞同：5
> 
> 时间：2012-10-05T16:29:04.077
> 
> 标签：asp.net-mvc, caching, mvcsitemapprovider, asp.net-mvc-sitemap

***tl;dr：*** **来自 MvcSiteMapProvider 的菜单有时无法在应用程序重新联机后呈现自身，即使代码运行并且菜单在页面刷新后呈现。**

我在 ASP.NET MVC 3 项目中使用 MvcSiteMapProvider，偶尔在将应用程序从离线切换到在线后（通过将`App_Offline.htm`文件插入服务器的根目录并删除它），在页面刷新之前，菜单不会呈现任何内容。

我正在使用自定义 DynamicNodeProvider 从数据库中查询菜单项，然后呈现菜单。在调试时，我可以看到这段代码确实在页面加载之前运行，但页面上没有呈现菜单。我将缓存设置为几个小时，并且正在使用自定义缓存键以允许在某些操作后失效。

不幸的是，我无法始终如一地重现此错误。但是，如果我在 DynamicNodeProvider 的顶部添加一个睡眠，我*可以*让它*更频繁*地重现——它会在 60-70% 的时间里失败，睡眠时间超过 30 秒。到目前为止，我最好的猜测是它与缓存机制有关，因为将我的缓存持续时间设置为 0*似乎*可以使它没有问题，并且菜单总是弹出。但是，很难确定，因为问题很难确定。由于性能拖累，将其保留为 0 将不是一个可接受的解决方案。

这个问题的根本原因可能是什么？有没有人见过这种行为或有解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T07:08:45.317

MvcSiteMapProvider 不时被 ASP.NET SiteMapProvider 的线程模型咬住，尤其是在具有较大的站点地图定义时。目前没有针对这种行为的解决方法，但我计划进行重写（并放弃 ASP.NET SiteMapProvider 依赖项）以使其在恶劣条件下更加稳定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-18T10:11:34.420

MvcSiteMapProvider v4 已发布，[可在 NuGet 上使用](http://www.nuget.org/packages?q=mvcsitemapprovider&prerelease=&sortOrder=package-download-count)。

它使用自己的缓存机制，该机制比以前[更易于配置](http://www.shiningtreasures.com/post/2013/08/11/mvcsitemapprovider-4-cache-configuration)和[扩展。](http://www.shiningtreasures.com/post/2013/08/13/mvcsitemapprovider-4-extending-the-cache)到目前为止，在 v4 中，还没有关于菜单消失或其他奇怪的仅限首次请求问题的报告。

# java - 从 Web 应用程序中的现有 SOAP Web 服务迁移到 REST Web 服务

> ID：12750390
> 
> 赞同：2
> 
> 时间：2012-10-05T16:29:44.557
> 
> 标签：java, web-services, rest, soap

我的 Web 应用程序中使用了 SOAP 服务。在我的 Web 应用程序中，每个请求-响应过程都是通过 SOAP 服务完成的。正如我所说，SOAP 被广泛使用。WSDL 中定义了非常复杂的结构。更重要的是，我们有两个不同的 SOAP 服务开发团队：一个用于 Web 服务客户端，另一个用于服务器。

现在，我的团队正在考虑从 SOAP 迁移到 REST，因为他们认为 SOAP 非常重。继续使用 REST 将是有益的，因为它是轻量级的。

没有像 SOAP 标头那样的小块字节会使 REST 更轻？

请建议我们是否真的需要转向 REST。它在我们的场景中会有用吗？

提前致谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T16:37:27.590

作为许多 Web 服务的消费者，我更喜欢**良好**的休息服务而不是 SOAP。强烈推荐阅读：[http ://martinfowler.com/articles/richardsonMaturityModel.html](http://martinfowler.com/articles/richardsonMaturityModel.html)

REST 比 SOAP 轻吗？好一点。但它通常不是使用其中一个的主要驱动力。需要注意的是，在使用 REST 时能够实现更好的读取缓存解决方案。

其他注意事项...二进制数据的传输和 WS-Security 替代品（如果需要）。

REST 有动力。越来越多的公司正在使用它，而像 Mashery 这样的商店甚至都有关于“丢肥皂”的[品牌。](http://www.flickr.com/photos/4braham/5826541958/)

# javascript - Highcharts 显示错误标记的数据点

> ID：12750391
> 
> 赞同：1
> 
> 时间：2012-10-05T16:30:00.540
> 
> 标签：javascript, jquery, highcharts

我遇到了一个问题，highcharts 显示我的一些带有重复标签的数据点，然后跳过后续标签，我不知道如何解决它。

我从阅读各种帖子中得知这是 PointInterval 选项的问题；我想将其值设置为 1 个月，但由于月份的长度不同，这并不简单。

我不确定什么是适当的解决方案。这是我的代码：

[http://jsfiddle.net/KJ3tk/](http://jsfiddle.net/KJ3tk/)

该图两次显示 1 月和 3 月，并跳过了 2 月。

该线程（[http://highslide.com/forum/viewtopic.php?f=9&t=17269](http://highslide.com/forum/viewtopic.php?f=9&t=17269)）中建议的解决方案似乎是我需要的，但我无法弄清楚如何在我的 javascript 中实现它目前有。这是他们建议将解决问题的代码：

```
var data = [3,2,5,3,5,6,2,3,1];
var month = 4; // the first month
data = $.map(data, function(value) {
    return {
        x: Date.UTC(2000, month++, 1), 
        y: value
    };
}); 
```

我真的很感激任何帮助！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:53:40.180

```
 var mydata =  [   
 7418,7386,7552,8903,8439,9356,9861,9411,10257,10169,9622,9940,
                                    /*2009*/  
  10551,10326,12817,11739,11694,12209,12132,11842,11908,11909,11884,12450,
                                    /*2010*/    
15545,14495,16195,15064,13788,14452,14908,15858,16213,15994,15213,15651,
                                    /*2011*/    
17233,15515,19629,18960,19834,19997,19358,21042,20189,20660,20034,19815,
                                    /*2012*/   
22611,21435,23327,22876,22986,23692,21581,21832,22337
            ];
   var month = 0; // the first month
  mydata = $.map(mydata, function(value) {
    return {
      x: Date.UTC(2008, month++, 1), 
    y: value
}; }); 
```

[现场演示](http://jsfiddle.net/KJ3tk/1/)

# python - Python 使用 argparse 和 cmd

> ID：12750393
> 
> 赞同：7
> 
> 时间：2012-10-05T16:30:07.010
> 
> 标签：python, argparse, python-cmd

有没有办法使用`argparse`挂钩的模块作为接口中每个提示的解释器继承自`cmd`？

我希望我的 cmd 接口以与解释`line`在运行时在 bash shell 上传递的选项和参数相同的方式解释典型参数，使用可选参数`-`以及位置参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-15T14:12:58.297

好吧，一种方法是重写`cmd`的`default`方法并使用它来解析带有 的行，因为cmd.Cmd 子类中`argparse`没有方法的所有命令都将无法使用该方法。请注意之前的附加内容，以避免将其用作' 命令。`do_``default``_``do_test``cmd`

```
import argparse
import cmd
import shlex

class TestCLI(cmd.Cmd):

    def __init__(self, **kwargs):
        cmd.Cmd.__init__(self, **kwargs)

        self.parser = argparse.ArgumentParser()
        subparsers = self.parser.add_subparsers()
        test_parser = subparsers.add_parser("test")
        test_parser.add_argument("--foo", default="Hello")
        test_parser.add_argument("--bar", default="World")
        test_parser.set_defaults(func=self._do_test)

    def _do_test(self, args):
        print args.foo, args.bar

    def default(self, line):
        args = self.parser.parse_args(shlex.split(line))
        if hasattr(args, 'func'):
            args.func(args)
        else:
            cmd.Cmd.default(self, line)

test = TestCLI()
test.cmdloop() 
```

`argparse`如果遇到未知命令，则执行 a `sys.exit`，因此您需要覆盖或修改您`ArgumentParser`的 '`error`方法以引发异常，而不是退出并在`default`方法中处理该异常，以便留在`cmd`' 的命令循环中。

我建议你研究一下[悬崖](http://cliff.readthedocs.org/en/latest/install.html)，它允许你编写可以自动用作 as`argparse`和`cmd`commands 的命令，这非常简洁。它还支持从`setuptools`入口点加载命令，这允许您将命令作为插件分发到您的应用程序。但是请注意，`cliff`使用[`cmd2`](http://pythonhosted.org/cmd2/)，它是`cmd`更强大的表亲，但您可以替换它`cmd`，因为它`cmd2`是作为`cmd`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-11T19:15:34.890

直接的方法是创建一个`argparse`解析器，并在您的函数中解析，`line.split()`以防提供无效参数（在找到无效参数时调用）。`expect``SystemExit``parse_args()``sys.exit()`

```
class TestInterface(cmd.Cmd):

    __test1_parser = argparse.ArgumentParser(prog="test1")
    __test1_parser.add_argument('--bar', help="bar help")

    def help_test1(self): self.__test1_parser.print_help()

    def do_test1(self, line):
        try:
            parsed = self.__test1_parser.parse_args(line.split())
        except SystemExit:
            return
        print("Test1...")
        print(parsed) 
```

如果传递了无效的参数，`parse_args()`将打印错误，程序将返回界面而不退出。

```
(Cmd) test1 --unk
usage: test1 [-h] [--bar BAR]
test1: error: unrecognized arguments: --unk
(Cmd) 
```

其他一切都应该与常规`argparse`用例一样工作，同时维护所有`cmd`的功能（帮助消息、功能列表等）

来源：[https ://groups.google.com/forum/#!topic/argparse-users/7QRPlG97cak](https://groups.google.com/forum/#!topic/argparse-users/7QRPlG97cak)

* * *

另一种简化上述设置的方法是使用下面的装饰器：

```
class ArgparseCmdWrapper:
    def __init__(self, parser):
        """Init decorator with an argparse parser to be used in parsing cmd-line options"""
        self.parser = parser
        self.help_msg = ""

    def __call__(self, f):
        """Decorate 'f' to parse 'line' and pass options to decorated function"""
        if not self.parser:  # If no parser was passed to the decorator, get it from 'f'
            self.parser = f(None, None, None, True)

        def wrapped_f(*args):
            line = args[1].split()
            try:
                parsed = self.parser.parse_args(line)
            except SystemExit:
                return
            f(*args, parsed=parsed)

        wrapped_f.__doc__ = self.__get_help(self.parser)
        return wrapped_f

    @staticmethod
    def __get_help(parser):
        """Get and return help message from 'parser.print_help()'"""
        f = tempfile.SpooledTemporaryFile(max_size=2048)
        parser.print_help(file=f)
        f.seek(0)
        return f.read().rstrip() 
```

它使定义附加命令变得更简单，它们采用`parsed`包含成功结果的额外参数`parse_args()`。如果有任何无效参数，则永远不会进入该函数，所有内容都由装饰器处理。

```
__test2_parser = argparse.ArgumentParser(prog="test2")
__test2_parser.add_argument('--foo', help="foo help")

@WrapperCmdLineArgParser(parser=__test2_parser)
def do_test2(self, line, parsed):
    print("Test2...")
    print(parsed) 
```

一切都像原始示例一样工作，包括`argparse`生成的帮助消息 - 无需定义`help_command()`函数。

来源：[https ://codereview.stackexchange.com/questions/134333/using-argparse-module-within-cmd-interface](https://codereview.stackexchange.com/questions/134333/using-argparse-module-within-cmd-interface)

# jquery - 在 div 中加载外部网页并调整高度

> ID：12750396
> 
> 赞同：1
> 
> 时间：2012-10-05T16:30:11.237
> 
> 标签：jquery, html, web

我正在尝试使用 Jquery 将外部网页加载到 div (#siteloader) 中，但我无法弄清楚如何调整 div 的高度，以便在没有滚动条的情况下重新调整大小以适应外部网站的内容. 我绝对不想使用 iframe。

这是代码：

```
<!doctype html>
<html>
    <meta charset="utf-8">
    <title>Load remote content into object element</title>

    <style type="text/css">
    object {
        width: 100%;
    }       
    </style>

    </head>

    <body>
        <div id="siteloader"></div>

        <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
        <script>
        $("#siteloader")
            .html('<object data="https://system.netsuite.com/pages/customerlogin.jsp?country=US">');
        </script>

    </body>

</html> 
```

对此的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:45:53.613

不是你的`div`不扩展，而是你的`object`. 尝试解决这个问题 -[**演示**](http://jsfiddle.net/SsJsL/)

```
html, body {
    height: 100%;
}

div {
    height: 99%;
}

object {
    width: 100%;
    min-height: 100%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T16:45:02.473

在 jQuery 中，有一个名为 .load() 的函数，遗憾的是它不能用于检索任何跨域 HTML。

您可以调用 AJAX GET 来检索 HTML 并将其放入您的 div 中。

或者你可以试试这个模组：http: [//james.padolsey.com/javascript/cross-domain-requests-with-jquery/](http://james.padolsey.com/javascript/cross-domain-requests-with-jquery/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T16:39:53.973

如果您不指定高度或宽度，它将自动扩展为适当的大小，但我建议您设置一个`max-height`or `max-width`and `overflow: hidden`，这只是为了让场景控制内容太大的位置，并且溢出隐藏会防止滚动条

# visual-studio-2010 - 启动 Visual Studio 2010 时，“调用目标引发了异常”

> ID：12750397
> 
> 赞同：48
> 
> 时间：2012-10-05T16:30:14.170
> 
> 标签：visual-studio-2010

当我启动 Visual Studio 2010 时，我经常收到`'exception has been thrown by a target of invocation'`阻止我打开 Visual Studio 的错误。重新启动我的计算机使错误消失，但几天后它又回来了。

是什么导致了这个错误，我该如何摆脱它？

我在 SO 上发现了很多问题，在 Visual Studio 中运行他们的代码时提到了这个错误，但在打开 Visual Studio 时却没有。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-10-05T16:49:46.813

问题似乎是我的系统路径变得太长，Windows 无法处理：它有[2087 个字符长](http://blogs.msdn.com/b/oldnewthing/archive/2010/02/03/9957320.aspx)（[本文](http://connect.microsoft.com/VisualStudio/feedback/details/501190/receiving-...Title)的提示）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-19T17:01:17.530

我今天在使用 Visual Studio 2012 时遇到了这个问题。在第一次设置期间似乎出了点问题，因此**删除**了这些注册表项有所帮助：

```
HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0
HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0_Config 
```

Visual Studio 将在您启动时再次设置。您也可以只**重命名**它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-08T19:54:55.060

我在使用 Visual Studio 2012 和 SQL Server Management Studio 时遇到了同样的问题，解决方案是**减少 SYSTEM PATH variable length**。

症状：在 Visual Studio 2012 的一个实例启动后，任何其他尝试启动另一个或一个 SQL Server Management Studio 的尝试都会失败。计算机重新启动将允许我再次启动 VS2012 的单个实例。修复 VS2012 安装没有帮助。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-03T04:23:17.513

这些解决方案都没有解决我的 Visual Studio 2012 的问题，但我终于设法通过从[Visual Studio 网站安装最新的 Update 4 来解决它](http://www.visualstudio.com/downloads/download-visual-studio-vs)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-01-12T12:13:06.687

我的路径似乎也影响了从控制面板\系统\高级系统设置访问高级系统设置，因此我无法编辑路径。

必须从 windows\system32 启动它以显示“高级系统设置”对话框，然后从那里编辑 te 环境变量。

最近安装的 MEAN 堆栈为我的用户帐户添加了路径语句。我完全删除了这个设置，然后 VS2010 和高级系统设置对话框没有问题地启动。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-09-02T21:58:09.347

[BioGeek 的](https://stackoverflow.com/a/12750664/2055187)回答解决了我的问题。就我而言，系统路径的溢出不仅会破坏 Visual Studio，还会破坏 GUI 以更改系统路径本身。

我收到错误：控制面板>系统>高级系统设置。

解决方法是运行 c:\windows\system32\SystemPropertiesAdvanced.exe。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-07-31T07:24:30.823

**我在尝试在VS2015中运行“** **Task Runner Explorer** ”时遇到了类似的问题，我收到一个错误：“**异常已被调用的目标抛出**”。

 ****我通过从此链接仅重新安装“ [Microsoft](https://visualstudiogallery.msdn.microsoft.com/c94a02e9-f2e9-4bad-a952-a63a967e3935?SRC=VSIDE) **ASP.NET 和 Web 工具**”补丁 (DotNetCore.1.0.0-VS2015Tools.Preview2.exe) 解决了这个问题。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-06-17T13:38:51.777

当我在已经有 2012 的机器上安装 SQL Server Express 2014 时收到此错误。我使用工具安装它，这显然破坏了 SSMS 2012。特别是在尝试“编辑前 200 行”时抛出错误。

使用 SSMS 2014 似乎工作正常。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-05-13T15:43:53.973

添加到 BioGeek 的答案。您不一定要删除路径中的条目，您可以通过引入更多变量来解决字符限制。

例如

```
PATH = {1800 CHARACTER LONG STRING}{500 MORE CHARACTERS} 
```

您将添加一个 EXTENDEDPATH 变量，如下所示：

```
EXTENDEDPATH = {500 MORE CHARACTERS} 
```

最后，您在 PATH 中引用此变量

```
PATH = {2000 CHARACTER LONG STRING};%EXTENDEDPATH%; 
```

我建议在您的路径中至少留出 100-200 个字符的喘息空间，这样您就不必在每次安装某些东西时都照看 PATH 环境变量。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-05-02T02:05:08.460

系统路径变量太长。将当前内容复制到记事本并删除重复的条目和不需要的条目并复制回路径变量。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-08-25T16:05:11.733

在我的情况下，此错误是由于 web.config 文件中的密钥无效。尝试恢复对文件所做的最后更改。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-06-18T01:04:36.443

我有同样的问题，但我发现“connectionStrings”必须在 web.config 中的“configSections”下

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-06-28T11:31:00.207

由于环境变量 windows 中的长路径仅支持 2048 个字符，因此会出现此问题。为了解决这个问题，您需要从系统的 PATH 中删除一些环境变量。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-08-20T23:41:04.460

我在使用 Atmel Studio 7 时遇到了同样的问题。通过删除与项目文件位于同一文件夹中的 *.componentinfo.xml 文件来解决。****

# node.js - 除了在 MongoDB 中为 Blog-Tag 系统嵌套标签数组之外，还有其他方法吗？

> ID：12750399
> 
> 赞同：1
> 
> 时间：2012-10-05T16:30:25.150
> 
> 标签：node.js, mongodb, nosql

我正在尝试使用 node.js/express/mongodb 为自己编写一个博客引擎（也是学习 node.js 的开始）。为了比 Internet 上的教程更进一步，我想为博客引擎添加标签支持。

我想用标签做以下事情：

1.  查看者可以在“标签云页面”上将所有标签视为标签云
2.  查看者可以在文章列表页面和单篇文章页面上看到文章的标签
3.  查看者可以单击单个标签来显示文章列表
4.  更重要的是，查看者可以通过 SO 方式搜索带有特定标签的文章： [tag1][tag2] --> /tags/tag1+tag2 --> 同时具有 tag1 和 tag2 的文章列表

在关系数据库中，将使用 post_tag 表。但是如何在 MongoDB 中设计呢？

我检查了[MongoDB 设计 - 标签](https://stackoverflow.com/questions/6074720/mongodb-design-tags)
但正如 efdee 评论，设计

```
db.movies.insert({
  name: "The Godfather",
  director: "Francis Ford Coppola",
  tags: [ "mafia", "wedding", "violence" ]
}) 
```

有问题：

> 这似乎并没有真正回答他的问题。您将如何获得在整个电影收藏中使用的不同标签列表？

这也是我关心的问题：在我的设计中，我需要显示所有标签的列表；我还需要知道每个标签有多少篇文章。那么有没有比上面展示的设计更好的方法呢？

**我对上述设计的关注是：如果我想显示标签列表，查询将遍历数据库中的所有文章项目。有没有更有效的方法？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T20:19:14.493

您需要在标签上创建一个多键索引才能开始。

然后您将能够使用此语法找到文档匹配标签

```
db.movies.find({ "tags": { $all : [ /^this/, /^that/ ] }}) 
```

因为您使用 reg ex mongo 的 ^ （字符串开头）仍将使用索引。

要获取关键字密度，使用聚合框架，您可以简单地获取计数。

```
db.movies.aggregate({ $project: { _id:0, tags: 1}}, 
    { $unwind: "$tags" },
    { $group : { _id : "$tags", occur : { $sum : 1 }}}) 
```

抱歉，从 iPad 格式化困难。

您最终会收集到如下所示的文档：

```
{
   _id: "mytag",
   occur: 383
},
{
   _id: "anothertag",
   occur: 23
}, 
```

使用聚合命令，您可以返回内联结果，因此如果经常使用结果，将由客户端应用程序（或服务器）来序列化或缓存结果。

让我知道你是怎么做到的。

Hth

山姆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:38:38.860

您将如何获得在整个电影收藏中使用的不同标签列表？

```
db.movies.distinct("tags") 
```

对于有效的查询，我可能会重复数据。标签不太可能被编辑，所以我将标签数组放在文章对象中，然后将标签放在标签集合中，标签有包含该标签的文章计数，或者文章数组身份证。

```
db.movies.insert({
  id: 1,
  name: "The Godfather",
  director: "Francis Ford Coppola",
  tags: [ "mafia", "wedding", "violence" ]
});

db.tags.insert([
   {name: "mafia", movie_count: 1},
   {name: "wedding", movie_count: 1},
   {name: "violence", movie_count: 1}
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-05T18:43:25.637

您可以使用 MapReduce 函数执行 4 个任务。例如，对于所有标签的列表，您将发出标签作为键，然后在 reduce 函数中将它们全部计数并返回计数。那将是我要走的路线。它可能需要更多的思考，但它绝对是强大的。

[http://cookbook.mongodb.org/patterns/count_tags/](http://cookbook.mongodb.org/patterns/count_tags/)

# c# - SetFocus 只能在 PreRender 之前和期间调用

> ID：12750403
> 
> 赞同：3
> 
> 时间：2012-10-05T16:31:02.297
> 
> 标签：c#, asp.net, page-lifecycle, setfocus, prerender

谁能告诉我为什么我会在下面的跟踪中得到错误？

“SetFocus 只能在 PreRender 之前和期间调用。”

错误消息指出，必须在 PreRender 之前或期间调用“SetFocus”，并且根据跟踪，页面与 PreRender 还没有任何关系。

那么为什么会出错呢？

复制自 Trace.axd ...

```
开始预初始化
结束预初始化
开始初始化
结束初始化
开始初始化完成
结束初始化完成
开始加载状态
结束加载状态
开始处理PostData
结束进程PostData
开始预加载
结束预加载
开始加载
最终负载
开始 ProcessPostData 第二次尝试
结束 ProcessPostData 第二次尝试
开始引发 ChangedEvents
End Raise ChangedEvents
开始提高 PostBackEvent

SetFocus 只能在 PreRender 之前和期间调用。
  在 System.Web.UI.Page.SetFocus（控制控件）
  在 System.Web.UI.Control.Focus()
  在 C:\...\RecruiterPopups.ascx.cs:line 1134 中的 ....ShowChangePasswordPopup(RecruiterClass 招聘人员，字符串 commandName)
  在 ....Default.Password_OnBeforeGo(MenuItem item, String queryString, Boolean forceRedirect) in C:\...\Default.Master.cs:line 92
  在 ....MenuItem.GoDelegate.Invoke（MenuItem 项，字符串 queryString，布尔力重定向）
  在 ....MenuItem.Go(String queryString, Boolean forceRedirect) 在 C:\...\Menu\MenuItem.cs:line 129
  在 ....MenuItem.Go() 在 C:\...\Menu\MenuItem.cs:line 115
  在 ....MainMenu.lnkMyAccountProfilePassword_Click(Object sender, EventArgs e) 在 C:\...\UserControls\MainMenu.ascx.cs:line 130
  在 System.Web.UI.WebControls.LinkBut​​ton.OnClick（EventArgs e）
  在 System.Web.UI.WebControls.LinkBut​​ton.RaisePostBackEvent（字符串 eventArgument）
  在 System.Web.UI.WebControls.LinkBut​​ton.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent（字符串 eventArgument）
  在 System.Web.UI.Page.RaisePostBackEvent（IPostBackEventHandler sourceControl，字符串 eventArgument）
  在 System.Web.UI.Page.RaisePostBackEvent（NameValueCollection postData）
  在 System.Web.UI.Page.ProcessRequestMain（布尔 includeStagesBeforeAsyncPoint，布尔 includeStagesAfterAsyncPoint）

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-03T18:40:33.770

在被回发到的页面上调用 SetFocus() 并导致重定向到另一个页面将导致此错误。如果 !Page.IsPostBack 尝试仅调用 Focus/SetFocus，您会发现该错误将不再发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-03T02:47:22.407

晚了几年，但无论谁遇到这个......

`txt.Focus()`我们在处理程序中调用了`btn.OnClick`。它工作了很多年。最近我们将处理程序转换为`async`并添加了对 API 的调用。

该更改导致`.Focus()`调用引发此异常：

```
SetFocus can only be called before and during PreRender. 
```

解决方案非常简单：

1.  为按钮的`PreRender`事件添加一个新的处理程序。
2.  `txt.Focus()`从此处理程序调用。

它可能不是适用于所有场景的可行解决方案，但它适合我们。

# java - Eclipse 中的导入问题

> ID：12750405
> 
> 赞同：2
> 
> 时间：2012-10-05T16:31:03.763
> 
> 标签：java

我在 Eclipse 项目中的 java 代码中有以下导入

```
import org.jscience.*; 
```

但是在编写代码时

```
Real r1 = new Real.valueOf(1); 
```

我收到错误

```
Real cannot be resolved to a type 
```

我很困惑为什么在我正确导入时会发生这种情况（或者我相信）

还要注意，eclipse 建议使用

```
import org.jscience.mathematics.number.Real; 
```

但我试图避免将导入用于 Jar 中的完整课程位置。

有任何想法吗？

在此先感谢马丁

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T16:35:38.830

尝试

```
import org.jscience.mathematics.number.*; 
```

因为

```
import org.jscience.*; 
```

实际上只会从`jscience`包中导入类，而不是任何子包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T16:33:35.540

如果我们假设您的导入没有引发错误，请尝试导入`g.jscience.mathematics.number.*`.

# objective-c - 使用 SenTest 测试断言

> ID：12750407
> 
> 赞同：1
> 
> 时间：2012-10-05T16:31:07.590
> 
> 标签：objective-c, unit-testing, testing, assert

我在方法中有代码，它断言（）参数落在给定范围内。我想使用 SenTest 测试用例测试非法参数。

我的第一个假设是我应该使用 STAssertThrows( ... ) 但是这会报告断言失败时不会引发异常。我可以用 STAssert... 宏捕获 assert() 失败吗？

[更新以提供示例]

在类 Foo.m

```
@interface Foo : NSObject {
    NSUInteger count;
    NSUInteger max;
}
@end

@implementation Foo
-(void) bar:(char) c {
    assert( count < max );
    ...
}
@end 
```

在类 TestFoo.m

```
@interface TestFoo : SenTestCase {
    Foo testFoo_;
}
@end

@implementation TestFoo
    -(void) testBar {
        STAssertXXX( YYY );
    }
@end 
```

我可以使用什么 XXX 和 YYY 来测试方法 bar 中断言的失败或其他情况：？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T18:08:44.970

如果您使用`NSAssert`(或`NSAssert1`,`NSAssert2`等) 而不是`assert`, 您可以捕获`NSInternalInconsistencyException`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:07:29.713

您无法捕获`assert`，因为它不是 obj-c 异常。要解决此问题，只需声明您自己的宏`MY_ASSERT(condition)`，如果条件不满足，该宏将引发异常并使用它而不是 standard `assert`。

# android - android有类似onDate监听器的东西吗？

> ID：12750410
> 
> 赞同：0
> 
> 时间：2012-10-05T16:31:30.783
> 
> 标签：android, time, listener

当到达某个日期时，Android 中有什么方法可以采取一些措施吗？诸如在到达特定日期时激活的侦听器之类的东西。

例如，当一天是数字 8 或 20/12/2012 时，我想调用一个方法或其他东西。Android是否提供类似的东西，或者如果我已经达到我想要的日期，我必须每隔“x”秒测试一次？我认为这会浪费资源，应该是一种更好的方式。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:46:19.173

最好的方法是在您观看当天的午夜设置闹钟，使用[`AlarmManager`](http://developer.android.com/reference/android/app/AlarmManager.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:35:38.893

有一个名为 ACTION_DATE_CHANGED 的意图操作。我不知道它何时被触发，但你可以制作一个广播接收器来捕捉它，看看它是否在午夜被触发。

[http://developer.android.com/reference/android/content/Intent.html#ACTION_DATE_CHANGED](http://developer.android.com/reference/android/content/Intent.html#ACTION_DATE_CHANGED)

# java - 算法的复杂性和效率：a[j]-a[i] i>=j

> ID：12750411
> 
> 赞同：0
> 
> 时间：2012-10-05T16:31:49.457
> 
> 标签：java, performance, algorithm, complexity-theory, big-o

我正在寻找更快的速度。我曾考虑使用一棵树，但我不确定这是否真的有很大帮助。

我觉得问题是在大多数情况下你不需要计算所有可能的最大值只需要一只手，但我不知道在哪里画线

非常感谢您的意见，贾斯珀

```
public class SpecialMax {

    //initialized to the lowest possible value of j; 
    public static int jdex = 0; 
    //initialized to the highest possible value of i; 
    public static int idex; 
    //will hold possible maximums 
    public static Stack<Integer> possibleMaxs = new Stack<Integer> (); 

    public static int calculate (int[] a){
        if (isPositive(a)){ 
            int size = a.length; 
            int counterJ; 
            counterJ = size-1;

            //find and return an ordered version of a

            int [] ordered = orderBySize (a);

            while (counterJ>0){
                /* The first time this function is called, the Jvalue will be 
                 * the largest it can be, similarly, the Ivalue that is found
                 * is the smallest
                 */
                int jVal  = ordered[counterJ];  
                int iVal  = test (a, jVal);
                possibleMaxs.push(jVal-iVal);
                counterJ--; 
            }

            int answer = possibleMaxs.pop(); 

            while (!possibleMaxs.empty()){
                if (answer<possibleMaxs.peek()){
                    answer = possibleMaxs.pop(); 
                } else { 
                    possibleMaxs.pop(); 
                }
            }

            System.out.println("The maximum of a[j]-a[i] with j>=i is: ");
            return answer;
        } else {
            System.out.println ("Invalid input, array must be positive"); 
            return 0; //error
        }
    }

    //Check to make sure the array contains positive numbers
    public static boolean isPositive(int[] a){ 
        boolean positive = true; 
        int size = a.length; 

        for (int i=0; i<size; i++){
            if (a[i]<0){
                positive = false; 
                break; 
            }
        }

        return positive; 
    }

    public static int[] orderBySize (int[] a){
         //orders the array into ascending order
         int [] answer = a.clone(); 
         Arrays.sort(answer);
         return answer; 
    }

         /*Test returns an Ival to match the input Jval it accounts for 
          * the fact that jdex<idex. 
          */
    public static int test (int[] a, int jVal){
        int size = a.length;
        //initialized to highest possible value
        int tempMin = jVal; 
        //keeps a running tally 
        Stack<Integer> mIndices = new Stack<Integer> (); 

        //finds the index of the jVal being tested
        for (int i=0; i<size; i++) { 
            if (jVal==a[i]){
                //finds the highest index for instance
                if (jdex<i){
                    jdex = i;
                }
            }
        }

        //look for the optimal minimal below jdex;  
        for (int i=0; i<jdex; i++){
            if (a[i]<tempMin){
                tempMin = a[i]; 
                mIndices.push(i);
            }
        }

        //returns the index of the last min
        if (!mIndices.empty()){
           idex = mIndices.pop(); 
        }

        return tempMin; 
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:47:01.777

它可以在线性时间和线性内存中完成。这个想法是：找到数组的每个后缀的最小值和每个前缀的最大值，然后找到两者之间的差异最大的点。如果您需要索引，您还必须存储达到每个前缀的最大值/最小值的索引，而不仅仅是差值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T21:42:31.167

对 a[] 进行预排序会使过程变得复杂并影响性能。这不是必需的，因此我们将 a[] 保留为未排序。

然后（已编辑，因为我在您的代码正文中阅读了 j>=i，而不是问题描述/标题中的 i>=j，我现在认为这是必需的（我没有仔细阅读您的编码细节); 无论如何，这两个品种很容易相互派生。）

```
// initialize result(indices)
int iFound = 0;
int jFound = 0;
// initialize a candidate that MAY replace jFound
int jAlternative = -1; // -1 signals: no candidate currently available

// process the (remaining) elements of the array - skip #0: we've already handled that one at the initialization
for (int i=1; i<size; i++)
{
  // if we have an alternative, see if that combines with the current element to a higher "max".
  if ((jAlternative != -1)  && (a[jAlternative]-a[i] > a[jFound]-a[iFound]))
  {
    jFound = jAlternative;
    iFound = i;
    jAlternative = -1;
  }
  else if (a[i] < a[iFound]) // then we can set a[iFound] lower, thereby increasing "max"
  {
    iFound = i;
  }
  else if (a[i] > a[jFound])
  { // we cannot directly replace jFound, because of the condition iFound>=jFound,
    // but when we later may find a lower a[i], then it can jump in:
    // set it as a waiting candidate (replacing an existing one if the new one is more promising).
    if ((jAlternative = -1) || (a[i] > a[jAlternative]))
    {
      jAlternative = i;
    }
  }
}

double result = a[jFound] - a[iFound]; 
```

# c# - 从外部解决方案使用托管在 Windows 服务中的 WCF 服务

> ID：12750413
> 
> 赞同：5
> 
> 时间：2012-10-05T16:31:59.100
> 
> 标签：c#, visual-studio-2010, wcf, windows-services

我使用以下演练设置了托管在 Windows 服务中的 WCF 库：

[http://msdn.microsoft.com/en-us/library/ff649818.aspx](http://msdn.microsoft.com/en-us/library/ff649818.aspx)

消费者 winforms 在同一个解决方案中，它位于我工作 PC 的 C: 驱动器本地。

演练工作，即winforms 按钮给了我正确的答案。

如果我在 C-Drive 上创建一个包含单个 Windows 窗体项目的新解决方案，我无法成功添加`service reference`到此正在运行的服务中，我收到以下消息：

![在此处输入图像描述](../Images/f677f11d578a77d4c347d47a4483f7a5.png)

详细信息如下：

> 无法识别 URI 前缀。元数据包含无法解析的引用：“net.tcp://localhost:8526/Service1”。无法连接到 net.tcp://localhost:8526/Service1。连接尝试持续了 00:00:02.0020000 的时间跨度。TCP 错误代码 10061：无法建立连接，因为目标机器主动拒绝了它 127.0.0.1:8526。无法建立连接，因为目标机器主动拒绝它 127.0.0.1:8526 如果在当前解决方案中定义了服务，请尝试构建解决方案并再次添加服务引用。

为什么我可以将此服务参考添加到与服务相同的解决方案中的项目中，而不是来自不同解决方案中的项目？

* * *

**编辑**

**我的同事在 MSDN 文章中发现了一个错误 - 我在[此处详细介绍了他的发现](https://stackoverflow.com/questions/12761107/an-error-in-the-msdn-walk-through-how-to-host-wcf-in-a-windows-service-using)**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-09T13:02:01.017

**不幸的是，MSDN 上的逐步演练文章在**有趣[的](http://msdn.microsoft.com/en-us/library/ff649818.aspx) 地方结束了，所以让我们在这里继续。因为有许多可能导致错误的可能性，我在下面描述了几个选项（= 可能导致问题的场景），它们应该有助于故障排除：

 ****第一个选项：**尝试指定

```
 net.tcp://localhost:8526/Service1/mex 
```

当您将服务引用添加到新客户端时 - 确保在您执行此操作*之前*已安装并运行该服务。

**说明：**后缀“mex”代表“元数据交换”，允许 Visual Studio 下载 WCF 合同的详细信息。此后缀也在演练示例中使用，它是自动添加的（如果通过右键单击“配置服务引用...”**重新打开**添加的**服务引用，您将在地址字段中看到它）。**

* * *

**第二个选项：**我在测试演练时注意到的是，有时右键单击服务参考并在上下文菜单中选择“更新服务参考”会有所帮助。

一段时间后，您可以**在系统托盘**中看到***气球消息“您的服务已被托管”。***，之后您可以在同一解决方案中启动客户端。在这种情况下，服务是临时创建的，但不是永久部署的——这意味着，如果您停止调试，它就会被删除。因此，您无法从远程 PC 使用此服务，它仅在 Visual Studio 的解决方案中可见。Visual Studio 内部调用该工具

```
WcfSvcHost.Exe /Service:<Service1Binary> /Configuration:<Service1Config> 
```

使用正确的参数支持它以正确注册服务（您可以在 Visual Studio 的`Common7\IDE`子目录中找到此工具，并且还有`WcfTestClient.Exe`可用的 - 一个充当客户端的工具，对调试 WCF 非常有用）。

例如，如果您已停止调试，并从 Visual Studio 外部的 Windows 资源管理器启动 client.exe，则它找不到该服务，并且您收到的错误消息正是您在问题中描述的。

微软有两个关于这个问题的有趣链接： [元数据交换问题](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/acd1aa76-003e-401d-9438-945bf7585960)和[发布元数据](http://msdn.microsoft.com/en-us/library/aa751951.aspx)

**请注意，这与****第三个选项**中描述的部署它不同。

 *** * *

**第三个选项：**您是否使用***InstallUtil***来部署服务？在这种情况下，您可能会意外删除`[...]/bin/Debug`子目录并且服务无法启动，因为该`.EXE`文件丢失了。

**注意：如果您使用的是*****ServiceInstaller***项目，则可以避免这种情况，该项目会在注册服务之前复制二进制文件。或者 - 如果您想简单地使用***InstallUtil*** - 您可以在注册之前将服务二进制文件复制到目标目录（包括 .config 文件和 .dll）。

* * *

**第四种选择：**如果您在***远程计算机***上运行该服务，则需要指定**正确的主机名或主机的 IP 地址**而不是*localhost*，并且您需要确保***个人防火墙***（windows 防火墙或第 3 方）***没有阻止端口 8526***（示例中使用的端口号）。指定一个例外以允许此端口用于传入和传出流量。

* * *

**第 5 个也是最后一个选项（更新）：**命名冲突 - Service1 是服务，也是 Wcf 库中的类名。**从服务中的WCF 库**中完全限定您正在使用的类名称，即`WcfServiceLibrary1.Service1`或重命名该类。Whytheq 自己和一位同事一起找到了它，并在[此处](https://stackoverflow.com/questions/12761107/an-error-in-the-msdn-walk-through-how-to-host-wcf-in-a-windows-service-using)发布。

* * *

**更多阅读：**查看我最近发现的这篇文章：“ [WCF：一些技巧](http://www.codeproject.com/Articles/27308/WCF-A-few-tips)”。它很好地解释了 WCF 故障排除。我对控制台托管示例所做的唯一更改是将语句**替换****为**`using`

 **```
ServiceHost host = new ServiceHost(typeof(Service));
try
{
    host.Open();

    Console.WriteLine("WCF Service is ready for requests." +  
    "Press any key to close the service.");
    Console.WriteLine();
    Console.Read();

    Console.WriteLine("Closing service...");
}
finally
{
    if (host!=null) {
            host.Close();
            host=null;
    }
} 
```

如果您想了解更多原因，请查看这篇文章：“[代理打开和关闭](https://stackoverflow.com/a/12475102/1016343)”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:39:02.510

您可以按以下方式解决此问题：

*   浏览服务的 WSDL URL 并将 WSDL 保存到本地文件。
*   然后对文件进行以下更改：
*   从用于 wsdl:binding 的名称中删除名称空间前缀，即将 name="wb:wsclocks-inboundSoapBinding" 更改为 **name="wsclocks-inboundSoapBinding"**
*   将 wsdl:port 属性的 binding 属性更改为匹配，并从 name 属性的值中删除名称空间前缀，因此它只是 wsclocks-inbound。

然后运行 ​​svcutil /o:Client\WBServices /noConfig******

# java - DefaultListModel.contains() 有什么作用？

> ID：12750416
> 
> 赞同：0
> 
> 时间：2012-10-05T16:32:10.797
> 
> 标签：java, eclipse, swing, collections, defaultlistmodel

我正在 Eclipse 调试器中观看以下表达式

```
downsPanel.relsListModel.elementAt(4)==oldValue 
```

和

```
downsPanel.relsListModel.contains(oldValue) 
```

第一个评估为`true`，第二个评估为`false`。

这意味着`contains()`不符合我的预期。那它有什么作用呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:15:45.927

假设两个测试在同一点完成，这可能只意味着一件事：`oldValue.equals(oldValue)`返回`false`。

所以问题出在`equals`必须解决的方法上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T17:15:49.047

`DefaultListModel.contains(Object)`代表来后盾`Vector`的`contains`。

```
public boolean contains(Object elem) {
    return delegate.contains(elem);
} 
```

也许这是一个`equals`相关的问题（不要忘记修复`hashCode`）。

# xml - Haskell 对 XML 中的 Unicode 持什么态度？

> ID：12750418
> 
> 赞同：7
> 
> 时间：2012-10-05T16:32:15.883
> 
> 标签：xml, haskell, unicode, hxt

我想知道在 Haskell 中处理 Unicode XML 的官方解决方案是什么。我注意到 HXT`String`对文本使用简单的表示（Unicode 字符列表！！！）。

[http://hackage.haskell.org/packages/archive/hxt/9.3.1.0/doc/html/Text-XML-HXT-DOM-TypeDefs.html#t:XNode](http://hackage.haskell.org/packages/archive/hxt/9.3.1.0/doc/html/Text-XML-HXT-DOM-TypeDefs.html#t:XNode)

```
Constructors
XText String    ordinary text (leaf)
XBlob Blob          text represented more space efficient as bytestring (leaf) 
```

解析时如何在两种表示之间进行选择？强制用户使用字符列表听起来并不是一个特别吸引人的功能，尤其是在 XML 文档包含大量文本内容的情况下。

另外，我在 Google 上找到了[http://hackage.haskell.org/package/hxt-unicode](http://hackage.haskell.org/package/hxt-unicode)，但不确定它是如何用于解析的。过去对 Unicode 的支持也更加明确：[http](http://hackage.haskell.org/packages/archive/hxt/8.5.2/doc/html/Text-XML-HXT-DOM-Unicode.html) ://hackage.haskell.org/packages/archive/hxt/8.5.2/doc/html/Text-XML-HXT-DOM-Unicode.html 但是这个模块已在最新版本（撰写本文时为 9.3.1.0）中删除，原因不明。这背后的动机是什么？

有人可以提供一些示例代码，以及如何使用 HXT 吗？维基页面在这方面严重缺乏。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T17:36:37.403

[xml-conduit](http://hackage.haskell.org/package/xml-conduit)包使用数据`Text`类型来存储文本数据。在过去的几年里，它已成为标准的文本数据表示。xml-conduit 是一个维护良好的包，我个人将它用于大量的开源和商业代码。

# c++ - 查找一个字符串（“AB”）是否是另一个字符串（“ABCD”）的子集？

> ID：12750420
> 
> 赞同：0
> 
> 时间：2012-10-05T16:32:23.593
> 
> 标签：c++, string, subset, substring

我今天有期中考试。这是第一个问题。我无法解决这个问题。确切的要求如下：我们必须确定一个字符串，比如说“DA”是否是另一个“ABCD”的子集。字母的数量至关重要，例如“DAD”不是“ABCD”的子集。因为“D”重复了两次，而在父字符串中“D”出现了一次。也可以假设没有。父字符串的字母数总是等于或大于另一个。

我想了很多。我对此的方法是，我会将要找到的子字符串的字符与父字符串进行比较。如果找到匹配项，我会将其索引存储在第三个数组中。所以最后我将拥有父数组的字符数组，该数组与另一个数组中的字符匹配。这就是我能够达到的程度。

```
#include <iostream>
#include <cstring>
using namespace std;

int main()
{
char array[] = "ABCD";
char array1[] = "AB";

int size = strlen(array);
int size1 = strlen(array1);

int temp[size];
int no = 0;
for (int i = 0; i< size1; i++)
        {
        for (int j = 0; j< size; j++)
                {
                if  (array1[i]==array[j])
                        {
                        for(int k = 0; k<size ; k++)
                                {
                                if (temp[k] != j)
                                        {
                                        temp[no] = j;
                                        no++;
                                        }
                                }
                        }
                }
        }

for (int i = 0; i<size; i++)
cout<<endl<<temp[i]<<" ";
return 0;
} 
```

请帮助解决这个问题，如果您有其他方法，请告诉我。此外，数组或字符串是否是解决此问题的更好方法。我正在用 C++ 编写，在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:00:44.063

*（我最近将此作为我学生的测验，但我们使用的是 Groovy 和 Java。）*

一个简单的方法`"ABCD"`：*创建*字符串（`"_BC_"`”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T00:40:01.253

您还可以计算每个字符串中每个字母的出现次数，并确保第二个字符串中每个字母的计数小于或等于第一个字符串中每个字母的计数。如果您想将多个潜在子字符串与单个字母集合进行比较（例如，将字典中的所有单词与 Boggle 中的当前字母进行比较），这可能会更好。

这段代码将做到这一点。它的主要限制是它仅适用于包含英文字母表中 26 个大写字母的字符串。但它传达了这个想法。

```
#include <iostream>
#include <cstring>
using namespace std;

void stringToArray(char *theString, int *countArray) {
    int stringLength = strlen(theString);
    for (int i=0; i<26; i++) {
        countArray[i] = 0;
    }
    for (int i=0; i<stringLength; i++) {
        countArray[theString[i] - 'A']++;
    }
}

bool arrayIsSubset(int *superCount, int *subCount) {
    //returns true if subCount is a subset of superCount
    bool isSubset = true;
    for (int i=0; i<26 && isSubset; i++) {
        isSubset = subCount[i] <= superCount[i];
    }
    return isSubset;
}

int main()
{
    char array[] = "ABCD";
    char array1[] = "AB";
    char array2[] = "ABB";

    int letterCount[26], letterCount1[26], letterCount2[26];

    stringToArray(array, letterCount);
    stringToArray(array1, letterCount1);
    stringToArray(array2, letterCount2);

    cout << "array1 is " << (arrayIsSubset(letterCount, letterCount1) ? "" : "not ") << "a subset" << endl;
    cout << "array2 is " << (arrayIsSubset(letterCount, letterCount2) ? "" : "not ") << "a subset" << endl;
} 
```

产生：

```
array1 is a subset
array2 is not a subset 
```

# c++ - 如何用 GLUtesselator 减去多边形？

> ID：12750422
> 
> 赞同：0
> 
> 时间：2012-10-05T16:32:24.420
> 
> 标签：c++, windows, opengl, glu

我正在尝试以这种方式从多边形中合并：

![在此处输入图像描述](../Images/a48d1c4d76137a908d4ae99982fff5d9.png)

您可以从箭头看到方向：顺时针表示孔，逆时针表示实体。

但正如结果所示，它不起作用。我尝试了所有 GLU_TESS_WINDING_RULE 组合，但无法使其工作。

裸露的 GLUtesselator 可以做到这一点，还是我需要其他一些库？Clipper lib可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T15:53:16.483

[General Polygon Clipper 库](http://www.cs.man.ac.uk/~toby/gpc/)可以对多边形进行布尔运算。

# sql-server - 如何确定 SSIS 转换中的错误行/列

> ID：12750423
> 
> 赞同：2
> 
> 时间：2012-10-05T16:32:24.390
> 
> 标签：sql-server, postgresql, ssis

我正在运行一个 DTSX 包，使用 PGOLEDB Native Postgres 驱动程序将数据从 SQL 移动到 Postgres，我收到一个错误（如下）。如何阅读此错误并确定导致问题的行/列？

我收到以下错误（PGNP-SE-1.4.3076）：

```
OnError,POSTGRESDEV,DOMAIN\USERNAME,Data Flow Task 9,{1EE44D97-78DD-4175-8162-2520654A750A},{F27E0BD1-8850-4497-BD9B-BDAFA7BDA401},10/4/2012 8:46:13 AM,10/4/2012 8:46:13 AM,-1071636471,0x,SSIS Error Code DTS_E_OLEDBERROR. An OLE DB error has occurred. Error code: 0x80004005.
An OLE DB record is available. Source: "PostgreSQL Native Provider" Hresult: 0x80004005 Description: "ERROR: invalid byte sequence for encoding "UTF8": 0x96
CONTEXT: COPY TransHist, line 390
".

OnError,POSTGRESDEV,DOMAIN\USERNAME,full_export_new,{79EBE819-217A-4AB2-BF58-45A6D6A3B4B8},{F27E0BD1-8850-4497-BD9B-BDAFA7BDA401},10/4/2012 8:46:13 AM,10/4/2012 8:46:13 AM,-1071636471,0x,SSIS Error Code DTS_E_OLEDBERROR. An OLE DB error has occurred. Error code: 0x80004005.
An OLE DB record is available. Source: "PostgreSQL Native Provider" Hresult: 0x80004005 Description: "ERROR: invalid byte sequence for encoding "UTF8": 0x96
CONTEXT: COPY TransHist, line 390
".

OnError,POSTGRESDEV,DOMAIN\USERNAME,Data Flow Task 9,{1EE44D97-78DD-4175-8162-2520654A750A},{F27E0BD1-8850-4497-BD9B-BDAFA7BDA401},10/4/2012 8:46:13 AM,10/4/2012 8:46:13 AM,-1071607767,0x,SSIS Error Code DTS_E_INDUCEDTRANSFORMFAILUREONERROR. The "input "Destination Input" (95)" failed because error code 0xC020907B occurred, and the error row disposition on "input "Destination Input" (95)" specifies failure on error. An error occurred on the specified object of the specified component. There may be error messages posted before this with more information about the failure.

OnError,POSTGRESDEV,DOMAIN\USERNAME,full_export_new,{79EBE819-217A-4AB2-BF58-45A6D6A3B4B8},{F27E0BD1-8850-4497-BD9B-BDAFA7BDA401},10/4/2012 8:46:13 AM,10/4/2012 8:46:13 AM,-1071607767,0x,SSIS Error Code DTS_E_INDUCEDTRANSFORMFAILUREONERROR. The "input "Destination Input" (95)" failed because error code 0xC020907B occurred, and the error row disposition on "input "Destination Input" (95)" specifies failure on error. An error occurred on the specified object of the specified component. There may be error messages posted before this with more information about the failure.

OnError,POSTGRESDEV,DOMAIN\USERNAME,Data Flow Task 9,{1EE44D97-78DD-4175-8162-2520654A750A},{F27E0BD1-8850-4497-BD9B-BDAFA7BDA401},10/4/2012 8:46:13 AM,10/4/2012 8:46:13 AM,-1073450974,0x,SSIS Error Code DTS_E_PROCESSINPUTFAILED. The ProcessInput method on component "Destination 40 - TransHist" (82) failed with error code 0xC0209029 while processing input "Destination Input" (95). The identified component returned an error from the ProcessInput method. The error is specific to the component, but the error is fatal and will cause the Data Flow task to stop running. There may be error messages posted before this with more information about the failure.

OnError,POSTGRESDEV,DOMAIN\USERNAME,full_export_new,{79EBE819-217A-4AB2-BF58-45A6D6A3B4B8},{F27E0BD1-8850-4497-BD9B-BDAFA7BDA401},10/4/2012 8:46:13 AM,10/4/2012 8:46:13 AM,-1073450974,0x,SSIS Error Code DTS_E_PROCESSINPUTFAILED. The ProcessInput method on component "Destination 40 - TransHist" (82) failed with error code 0xC0209029 while processing input "Destination Input" (95). The identified component returned an error from the ProcessInput method. The error is specific to the component, but the error is fatal and will cause the Data Flow task to stop running. There may be error messages posted before this with more information about the failure. 
```

**更新：** 我认为编码错误是一个红鲱鱼。当我运行它时，它在第 1000 行失败（成功写入 999 行）。如果我将源更改为将结果限制为少于 1000 行（例如 500 行）的视图，它会成功（但显然并非所有数据都被移动）。如果我将目标连接字符串更改为 BULK_INSERT=500...它将在第 500 行失败，如果我将视图更改为小于 500，它将成功。

**更新 2：** 将 BULK_INSERT 设置为 0 可以解决问题……我确信这会对性能产生负面影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T19:32:23.693

确定哪些行对错误负责的一种快速方法是将错误行为从默认的“失败组件”更改为“重定向行”，然后将错误输出通过管道传输到平面文件。

![在此处输入图像描述](../Images/eaf2099df8971d96cbf972b1aa6f3086.png)

对于您的特定错误，关键信息是：

> “错误：编码“UTF8”的字节序列无效：0x96

谷歌搜索这个字符串会带回一些命中，表明存在字符串编码问题。 [这是](https://stackoverflow.com/questions/4867272/invalid-byte-sequence-for-encoding-utf8)从 google-results 返回到 stackoverflow 的链接。

您可以尝试使用数据转换任务在数据流任务中指定正确的编码，或者您可以在目标系统上进行调整（*但我对 Postgres 不太熟悉，因此无法帮助您*）

# c++ - C 和 C++ 中的 const、static、extern 及其组合

> ID：12750427
> 
> 赞同：4
> 
> 时间：2012-10-05T16:32:36.900
> 
> 标签：c++, c

1) static、extern 和 const 以及它们在 C 和 C++ 中的使用有何不同？（默认联动和其他差异）

2) 在 C 中使用的头文件中允许以下声明和定义，然后将其包含在多个文件中。

```
static int testvar = 233;
extern int one;
extern int show();
int abc;
const int xyz;  // const int xyz = 123; produces error 
```

const**定义**在编译期间产生和错误（可能是由于多个定义）。但是我可以在头文件中**声明**一个 const 变量，但是因为我们可以定义它提供一个值，而且我们也不能在包含这个头文件的文件中分配一个值，所以它实际上是无用的。有没有办法在头文件中定义 const ，然后通过包含头文件在多个文件中访问它？

3) 需要进行哪些更改（如果有的话），以便此标头可以包含在**C++**中的多个文件中？

4）考虑以下

**头文件.h**

```
static int z = 23; 
```

**测试.c**

```
#include"header.h"

z = 33;  //gives error redefinition of z!!!??

void abc()
{
    z = 33;  //perfectly fine here!!??
} 
```

在标头中定义/声明的静态变量在每个文件中都有内部链接，这意味着每个文件都将具有该变量的单独副本。那么为什么在任何函数外部为该 var 赋值会产生重新定义错误，而它是函数内部的完美文件？

编辑：添加了第四个问题。这非常令人困惑。

**PS：现在我只寻找问题 1 和 4 的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T16:36:48.363

1)

static 表示不将对象放入全局符号表中。从好的方面来说，您可以毫无问题地拥有多个定义的符号。不利的一面是，不会为任何静态变量/方法生成符号，因此会使调试变得更加困难。

2&3)

在标题中：

```
extern const int xyz; 
```

在包含标头的源文件中（最好是名称与 .h 匹配的相同 .cc）：

```
const int xyz = 123; 
```

这样每个人都知道 xyz，但它只在一个源文件中定义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T17:25:21.400

> 我可以在头文件中声明一个 const 变量，但由于我们可以定义它提供一个值，而且我们也不能在包含该头文件的文件中分配一个值，所以它实际上是无用的。

*如果你想要*一个外部链接的符号，你可以在头文件中声明它，然后在你的源文件之一中定义它。你可以选择哪一个。

但是，对于 a`const int`通常来说，它具有外部联系是没有意义的。只需`static const int xyz = 123;`在标题中为其提供内部链接即可。

这适用于 C：在 C++`const`中，默认情况下全局变量具有内部链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T17:35:06.613

（OP：你问了几个问题，所以你得到了部分答案）

要回答这个

> 有没有办法在头文件中定义 const ，然后通过包含头文件在多个文件中访问它？

您可以将`const`变量的声明（包括值）放在头文件中：

```
extern const int xyz = 123; // note: extern 
```

然后将定义放在一个源文件中：

```
const int xyz; // note: no value provided 
```

这仅适用于 c++，而不适用于 C（或者更确切地说，我相信它在 C 中不起作用；但从未检查过）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T16:38:13.603

1）静态：用于将函数或变量声明为局部的。它们将仅在定义的文件中使用。如果它们是在头文件中定义的，那么它们将在包含该文件的文件中使用

extern 用于导入外部变量或函数。变量或函数应在其他文件中定义，不应使用静态定义

2）代替定义 const ，`const int X = 5`您可以使用宏来使用替代解决方案：`#define X 5`

# python - python列表的子集

> ID：12750433
> 
> 赞同：1
> 
> 时间：2012-10-05T16:32:57.867
> 
> 标签：python, search, data-structures

我需要找到一个 python 列表的子集，例如：

```
a = [[1,2,100],[1,3,2100],[2,3,200],[3,4,1600]] 
```

假设每个元素的第一个元素代表 start_time，第二个元素是 end_time，我的查询格式为（开始，结束）。结果子集应该使得子集的每个元素的 start_time 和 end_time 应该在 start 和 end 之间。

最快的方法是什么（或者我应该保存数据以获得更好的运行时间的任何结构）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:26:35.667

您可以使用*范围树*来存储点。将 (start_time, end_time) 对视为 (x, y) 坐标。然后查询 (start, end) 变成了在正方形 [start,end] x [start,end] 中找到点的问题。

二维范围树可以在 O(n log n) 时间内计算出来，对它们的查询在 O(log n) 时间内执行。

不幸的是，我不知道任何好的 Python 实现（可能[Python Quadtree](http://sgillies.net/blog/275/python-quadtree/)除外），所以你可能不得不自己动手。但是，它肯定会比任何线性搜索解决方案都快。

如果您不想使用或编写范围树，请考虑使用 NumPy 来进行更快的线性搜索：

```
arr = np.array(a)
xa, ya, val = arr.T
pts = (xa >= start) & (ya <= end)
print arr[pts] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T16:37:37.270

```
>>> start, end = 0, 5
>>> result = [i for i in a if start <= i[0] and end >= i[1]]
>>> print result
... [[1, 2, 100], [1, 3, 2100], [2, 3, 200], [3, 4, 1600]]

>>> start, end = 2, 3
>>> result = [i for i in a if start <= i[0] and end >= i[1]]
>>> print result
... [[2, 3, 200]] 
```

列表理解。`=`如果您希望它不包含，请 删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T16:38:08.237

使用[`bisect`模块](http://docs.python.org/library/bisect.html)演示的算法将为您提供最快的搜索时间，但我们必须创建一些排序索引。

您必须将开始时间和结束时间都存储在列表中，并带有列表中条目的索引`a`：

```
starttimes = [(l[0], i) for i,l in enumerate(a)]
starttimes.sort()
endtimes = [(l[1], i) for i, l in enumerate(a)]
endtimes.sort() 
```

`bisect`然后基于`bisect.bisect_left`and函数创建专门的`bisect.bisect_right`函数：

```
def bisect_timeseries_start(starttimes, start):
    while lo < hi:
        mid = (lo+hi)//2
        if starttimes[mid][0] < start: lo = mid+1
        else: hi = mid
    return starttimes[lo][1]

def bisect_timeseries_end(endtimes, end):
    while lo < hi:
        mid = (lo+hi)//2
        if end < endtimes[mid][0]: hi = mid
        else: lo = mid+1
    return endtimes[lo][1] 
```

现在您可以使用这些函数找到开始和结束索引：

```
startindex = bisect.bisect_timeseries_start(starttimes, start)
endindex = bisect.bisect_timeseries_end(endtimes, end) 
```

返回匹配范围现在很容易：

```
startendrange = a[startindex:endindex] 
```

每个搜索都有一个`O(lg n)`成本，其中`n`是列表的长度。`a`将这些操作组合成一个封装时间序列列表和索引的类很容易。

# textarea - angularjs相同的textarea来编辑多个元素

> ID：12750436
> 
> 赞同：0
> 
> 时间：2012-10-05T16:33:38.423
> 
> 标签：textarea, angularjs, keyup

我有这种情况，我从列表中设置了一个当前项目，我需要使用 textarea 来编辑该元素的值。由于某些限制，我必须使用 keyup 事件，但我认为这不是问题。

检查这个小提琴：http: [//jsfiddle.net/terebentina/Euj2C/](http://jsfiddle.net/terebentina/Euj2C/)

1.  单击第一个/第二个按钮 - 它可以工作，它将 textarea 中的文本更改为每个元素的值。
2.  将 textarea 中的文本更改为某物
3.  再次单击第一个/第二个按钮 - textarea 不再更新。如果您查看控制台，您可以看到它在元素之间切换，只是 textarea 不再更新。

有什么建议么？这让我发疯了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:39:09.970

我知道有更好的方法来修改你的指令来做到这一点，但作为一个快速修复，你现在可以尝试将你的[textarea](http://docs.angularjs.org/api/ng.directive%3atextarea)绑定到一个[ngModel](http://docs.angularjs.org/api/ng.directive%3angModel)值，该值只是所选元素中当前文本的副本：

```
<textarea keyup="" ng-model="keyupText"></textarea> 
```

将此作为您的`current`功能：

```
$scope.current = function(idx) {        
    $scope.current_element = $scope.elements[idx];
    $scope.keyupText = $scope.current_element.value;
    console.log('current is', $scope.current_element.value);
} 
```

有关示例，请参[见此小提琴。](http://jsfiddle.net/mAHST/)

# javascript - 是否有用于linkedin 的跟踪脚本

> ID：12750441
> 
> 赞同：-4
> 
> 时间：2012-10-05T16:33:56.853
> 
> 标签：javascript, linkedin

有没有办法记录使用linkedin登录我网站的人的姓名？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:44:34.513

您可以创建一个使用[LinkedIn 身份验证](https://developer.linkedin.com/documents/authentication)的应用程序，但它们似乎没有提供允许您跟踪未给予您明确许可的人的 sript。

# opengl - 同一着色器中的 GLSL 纹理映射和着色

> ID：12750444
> 
> 赞同：0
> 
> 时间：2012-10-05T16:34:07.210
> 
> 标签：opengl, glsl

我想编写一个可以进行纹理映射和顶点着色的 GLSL 片段着色器。是否可以在一个着色器中同时执行这两项操作？

目前，我可以这样做：

`gl_FragColor = texture2D(tex, gl_TexCoord[0].st);`

这会导致绘制带纹理的顶点，但不会绘制彩色顶点。（看起来像这样：[http](http://www.tiikoni.com/tis/view/?id=124eb69) ://www.tiikoni.com/tis/view/?id=124eb69 ）

我也可以这样做：

`gl_FragColor = gl_Color;`

这会导致绘制彩色顶点而不是纹理顶点。（看起来像这样：[http](http://www.tiikoni.com/tis/view/?id=5bcd838) ://www.tiikoni.com/tis/view/?id=5bcd838 ）

如果我这样做：

`gl_FragColor = texture2D(tex, gl_TexCoord[0].st) * gl_Color;`（看起来像第一个代码片段）

只绘制带纹理的顶点......这是我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:52:03.913

> 我希望看到的是在最后一个代码片段中全部显示的纹理和非纹理顶点。

你不应该期望那样。

没有“纹理顶点”或“非纹理顶点”之类的东西。只有一种*颜色*，无论那种颜色是什么。这就是着色器的全部意义：使用任意代码来计算你想要的颜色。

您通过将纹理提取的结果与每个顶点的插值颜色相乘来计算颜色。结果将是两种颜色的*组合*。即，他们的产品。因此，生成的颜色看起来有点像原始纹理。

# sql - SQL 选择所有不同值存在于另一列中的位置

> ID：12750446
> 
> 赞同：2
> 
> 时间：2012-10-05T16:34:12.937
> 
> 标签：sql, sql-server, sql-server-2008

我有一个表，其中前两行是公司，年份。每家公司都会有几年，但不一定是全部：

```
ABC | 2010
ABC | 2011
ABC | 2012
BBC | 2011 //does not have all the years, don't want to select it 
```

我想选择一个拥有所有年份的公司列表（不仅仅是其中一些），但我在编写一个选择查询来做到这一点时遇到了麻烦。我想这真的很容易，但由于某种原因我无法弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T16:37:07.473

尝试

```
select company
from your_table
group by company
having count(distinct year) = (select count(distinct year) from your_table) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T16:37:32.050

```
Select * FROM Company Where CompanyId In(
      select CompanyId From Company
      group by CompanyId
      having count(*) = (select count(distinct Year) from Company)
) 
```

[http://www.sqlfiddle.com/#!3/c2f81/11](http://www.sqlfiddle.com/#!3/c2f81/11)

请注意，如果您已经知道应该有多少年，那么显然您只会说出那个数字而不是选择不同的年份。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T16:38:56.410

```
SELECT Company
FROM Table
GROUP BY Company
HAVING COUNT(Distinct YEAR) = 3 
```

# project-management - 什么是游戏开发中 Scrum 项目管理的好而简单的工具？

> ID：12750447
> 
> 赞同：4
> 
> 时间：2012-10-05T16:34:13.543
> 
> 标签：project-management, agile, scrum

我正在寻找一种高效、易于学习的 Scrum 项目管理工具，不是为了专业用途，而是在我关于在游戏开发中使用 Scrum 的论文中使用它。基本上我想可视化一个假设游戏的制作过程。为了表达我的观点，制作过程的一些片段应该非常详细，所以基本上用户故事、任务、燃尽图等是必须的。

我正在使用 Scrum、看板和一些精益实践来消除浪费。我还想在这个生产过程中使用极限编程实践，包括 TDD 和持续集成。

我在专业项目管理方面的经验为零，所以我需要一些对于像我这样的新手来说使用起来相当简单的东西。

任何人都可以推荐这样的工具吗？现在我在考虑 TargetProcess 和 ScrumWorks。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T03:41:27.627

白板和便利贴。

不……说真的。

:-)

将 Excel 放入图表中。这种组合非常容易保持更新和使用。

布兰登

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T14:19:51.933

我会按以下顺序推荐我熟悉的这些：

如果您在同一个地方，请使用白板、便利贴和 Excel 图表，如上面的答案所示。如果你不是，你可以选择[Trello](http://www.trello.com)，它基本上是一个带有便利贴的白板。虽然没有图表。

或者[Pivotal Tracker](http://www.pivotaltracker.com)，它专门针对 Scrum 项目管理（也为看板构建一些功能）。它为您和一些图表进行所有故事点和速度计算。有时它太“规定性”了。你不是按照书本去做 Scrum，你可能会遇到一些困难来克服内置的生命周期。

两者都非常直观且易于使用。Trello 是免费的，Pivotal Tracker 仅供个人免费使用。您的合作者团队越大，每月订阅的费用就越高。

# phpexcel - Excel 2007 的背景颜色单元格始终为黑色

> ID：12750452
> 
> 赞同：2
> 
> 时间：2012-10-05T16:34:49.083
> 
> 标签：phpexcel

通过 PHPExcel 创建 Excel 5 文件时，我能够以任何颜色显示背景颜色单元格，但是一旦切换到 Excel 2007，背景颜色就会一直保持黑色，是否有任何修复方法可以解决？这是我的代码子集，目标是以黄色显示列标题，任何帮助将不胜感激，在此先感谢：

```
$styleArrayTableHeader = array(
                         'fill' => array(
                         'type' => PHPExcel_Style_Fill::FILL_SOLID,
                         'rotation' => 90,

                         'startcolor' => array(
                         'argb' => '#ffff00',    // yellow 
                          ),

                         'endcolor' => array(
                         'argb' => '#ffff00',
                         ),),);

$objPHPExcel->setActiveSheetIndex(0);
$worksheet = $objPHPExcel->getActiveSheet();
$worksheet->getStyle('B6:K6')->applyFromArray($styleArrayTableHeader);
.....
..... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-19T20:15:05.130

你需要检查单元格的填充类型

```
if ( $pStyle->getFill()->getFillType() == PHPExcel_Style_Fill::FILL_NONE ) {
    $color = 'white'
} else {
    $color = '#' . $pStyle->getStartColor()->getRGB()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T06:33:08.677

您能否使用来自 github 的最新开发分支代码重试 - Excel 2007 中的填充样式至少有一个修复...

此外，您正在尝试使用 rgb 值设置 argb。要么使用 argb 值，要么改为设置 rgb

# python - is_list_member 在 tweepy 中总是给出 false

> ID：12750454
> 
> 赞同：0
> 
> 时间：2012-10-05T16:34:58.630
> 
> 标签：python, tweepy

`is_list_member`tweepy 的方法总是给出`False`独立的成员是否属于列表。

例如：

```
print api.is_list_member('grupolibertaria',
                        'social-tech-analysis',
                        int(api.get_user('srikar67').id)) 
```

`False`即使我是列表的成员（我是`srikar67`） ，这总是会给出。

有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T00:34:04.360

您需要经过身份验证才能成功调用`api.is_list_member`：

```
>>> import tweepy
>>> auth = tweepy.OAuthHandler(consumer_key, consumer_secret)
>>> auth.set_access_token(key, secret)
>>> api = tweepy.API(auth)
>>> user = api.get_user('srikar67')
>>> result = api.is_list_member('grupolibertaria', 'social-tech-analysis', user.id)
>>> result.screen_name
>>> u'srikar67'
>>> result.name
u'Srikar Velichety' 
```

[您可以在此处](http://packages.python.org/tweepy/html/auth_tutorial.html#oauth-authentication)找到有关`tweepy` **OAuth**身份验证的更多信息，并且可以在[https://dev.twitter.com](https://dev.twitter.com)上注册您的应用程序，以便获取您的*使用者密钥*和*使用者秘密*以及*OAuth*身份验证所需的*访问令牌*和访问令牌*秘密*。

# javascript - Backbone.js - 无法从模型访问另一个模型的方法？

> ID：12750457
> 
> 赞同：0
> 
> 时间：2012-10-05T16:35:18.660
> 
> 标签：javascript, backbone.js

鉴于这些片段（希望这个问题足够完整）......

ModelA.js（有很多modelB）：

```
ModelBs = (function(_super) {
    ModelB.prototype.bWithName = function(name) {
        return this.find(function (b) {
            return b.name == name;
        });
    }
})(Backbone.Collection);

return ModelA = (function(_super) {
    ...
    ModelA.prototype.initialize = function() {
        this.modelbs = new ModelBs(this.modelbs, {});
    };

    ModelA.prototype.bWithName = function(name) {
        return this.modelbs.bWithName(name);
    };

    return modelA;
})(BaseModel); 
```

ModelC.js（有一个模型A）：

```
ModelC.prototype.toString = function(opts) {
    ...
    console.log(this.modelA); // defined...
    console.log(this.modelA.modelBs); // defined...
    console.log(this.modelA.bWithName("foo")); // undefined
    ...
} 
```

**在 ModelC.js 中，为什么是`this.modelA`和`this.modelA.modelBs`定义的，但`this.modelA.bWithName()`未定义，**我该如何解决？

这有效：`this.modelA.modelBs.first()`.

这将返回 undefined: `this.modelA.modelBs.where({name:"foo"})`。

在 Web 控制台中，这有效：`modelZ.modelAs.first().bWithName("foo").attributes`.

访问器或方法通常不能通过其他模型获得吗？

谢谢-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:07:46.670

呸。该方法实际上是可用的，但严格的等于 ( `===`) 正在扼杀搜索。在一种情况下，我试图使用错误的 typeof 名称进行搜索。

感谢您的输入！

# content-management-system - Alfresco 与 Liferay 的集成

> ID：12750460
> 
> 赞同：0
> 
> 时间：2012-10-05T16:35:29.767
> 
> 标签：content-management-system, liferay, alfresco, liferay-6, enterprise-portal

我想知道是否可以将 Alfresco Out Of the Box 配置为与 Liferay 集成。

或者，是否必须使用自定义内容类型/模型对其进行扩展，然后才能将其与 Liferay 集成。

您是否尝试过其中任何一个？你的经历如何？我们正在使用社区 Alfresco 和 Enterprise Liferay。我正在尝试在这里查看我的选择。可能是我的问题太模糊了。如果您认为我完全缺少某些方面，请提出想法。

# java - 如何在 GUI 窗口间隔开的情况下启动 Eclipse 项目？

> ID：12750462
> 
> 赞同：0
> 
> 时间：2012-10-05T16:35:36.180
> 
> 标签：java, eclipse, swing

我正在运行一个大型 Java Eclipse 项目，当它启动时，我看到 3 个弹出窗口平铺在一起，如下所示：

![在此处输入图像描述](../Images/e35de2334bab3a9ca069c111997504a1.png)

我需要让它们启动分开的位置，因为我一直在测试程序并拖动窗口。我可以以某种方式将它们全部放在更大的 GUI 窗口（窗格）中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:54:00.460

使用 setLocation() 方法

```
windowName.setLocation(location_parameters); 
```

将“null”作为参数传递将使窗口居中。

还有一种方法，

> setLocationRelatedTo(item_to_relate)

方法。这将根据现有的东西（如 JLabels、现有窗口等）定位它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T17:08:41.047

> 我可以以某种方式将它们全部放在更大的 GUI 窗口（窗格）中吗？

你现在有 3`JFrame`秒，我想。

`JPanel`您可以在一帧中将其更改为 3秒。

您将使用[布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)以您想要的方式排列 3 `JPanel`s。

# python - 什么时候调用超类的方法？

> ID：12750465
> 
> 赞同：2
> 
> 时间：2012-10-05T16:35:38.377
> 
> 标签：python, overriding

我正在扩展由一组开发人员维护的项目。我的代码涉及从现有代码覆盖类中的方法。让我感到不舒服的一点是我不知道如何准确地覆盖超类方法。

以下是说明：

```
def foo(self):
    return self.something 
```

当我扩展它时，我通常应该尝试：

**(1)**

```
def foo(self):
    old_something = super(Sub, self).foo()
    # my code
    return old_something 
```

或者

**(2)**

```
def foo(self):
    # my code
    return super(Sub, self).foo() 
```

我确定没有通用答案，但默认值是什么？例如，在 CL 中，如果您不指定此行为，则方法组合中的默认限定符为`:around`，表示 case **(2)**。但是，例如，在 Java 中，约定是在覆盖它的方法的第一行调用 super，即 case **(1)**。Python的方法是什么？

编辑：

如果我做：

```
$ find . -type f -name "*.py" | xargs grep '= super' | wc -l 
```

在我从事的项目中，我得到了更多的点击，然后如果我这样做：

```
$ find . -type f -name "*.py" | xargs grep 'return super' | wc -l 
```

只是出于好奇。这是否适用于你们中的一些人/大多数人？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:41:59.983

这不是关于惯例，而是关于什么是*正确*的。您需要查看您要覆盖的方法是做什么的，以及它的契约是什么，并编写做正确事情的代码。执行“之前”（方法末尾的超类调用）或“之后”（开头的超类调用）或“周围”（中间某处的超类调用）或“覆盖”（不超类调用）都可以*是*正确的，具体取决于方法的语义。

当然，有时候真的没关系；该代码将与多个选项一样正常工作。在这种情况下，我会倾向于“之后”（首先调用超类，然后是您自己的代码），因为它有助于调试以使操作按从通用到特定的顺序进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:38:54.573

如果您要覆盖的方法以任何方式修改了类，并且您依赖于这些更改，请参阅第一个方法，以便该方法的逻辑可以以任何方式影响该类。

如果您的逻辑与该方法在父类中可能影响的任何内容完全不同，请使用第二种方法。这实际上是一个操作顺序问题，以及 super()ed 方法是否对类做任何事情，你依赖它来解决手头的实际问题

# c# - 我可以通过提供方法本身来获取方法的名称吗？

> ID：12750468
> 
> 赞同：4
> 
> 时间：2012-10-05T16:35:46.833
> 
> 标签：c#, reflection, .net-3.5

有没有办法通过提供方法本身来获取方法的名称（作为字符串）？

```
class Person
{
    bool Eat(Food food){...}
} 
```

我想以某种方式获得字符串“Eat”。就这样！这可以来自实例，也可以来自使用反射的类声明。

我的尝试：

```
public delegate bool EatDelegate(Food f);

EatDelegate eatDel = new EatDelegate(_person1.Eat);
string methodName = eatDel.GetInvocationList()[0].Method.Name; 
```

这需要知道方法的委托，整个事情是不可读的

我想要 methodName 以便动态调用它。

笔记：

*   我要调用的每个方法都有一个委托声明
*   我想避免指定方法的名称，以避免反射等后出现错误
*   在我想得到它的名字的那一刻，该方法没有被调用。（不能使用`MethodBase.GetCurrentMethod()`）
*   我必须使用.Net 3.5

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T16:47:45.940

```
public string GetName(Expression<Action> exp)
{
    var mce = exp.Body as MethodCallExpression;
    return mce.Method.Name;
} 
```

--

一个方法

```
public int  MyMethod(int i)
{
    return 0;
} 
```

和使用

```
 var s= GetName(()=>this.MyMethod(0)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:43:16.497

```
var methods = typeof(Person).GetMethods();
foreach (var method in methods)
{
    if (method.Name.Equals("Eat"))
    {
         // do something here...
    }
} 
```

# java - 有人能解释一下这里是如何使用 LinkedList 的吗？

> ID：12750471
> 
> 赞同：-3
> 
> 时间：2012-10-05T16:36:03.823
> 
> 标签：java

我是java的初学者，我想知道`LinkedList`这里是如何使用的。

```
public LinkedList<nameofclass> getsomething(String a, int L) 
```

这是代码：

```
public LinkedList<Save> getBrightness( 
    String params, 
    Integer colors, 
    Integer[] BrightnessValue, 
    boolean clear) 
{ 
    ...
    LinkedList<Save> equal = new LinkedList<Save>(); 
```

Save 是一个位于外部的类我不明白这段代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:24:30.183

该方法`getBrightness`正在创建一个`LinkedList`包含 class 实例的实例`Save`。大概稍后在代码中你会发现一个包含

```
Save s = new Save(...);
s.set...(...);  // maybe
...
equal.add(s); 
```

这将创建多个实例`Save`并将它们添加到列表中。最后将是

```
return equal; 
```

链表被用作容器，以便`getBrightness`可以返回多个值。

# forms - Qt - 没有类的显示设计器表单

> ID：12750473
> 
> 赞同：2
> 
> 时间：2012-10-05T16:36:24.510
> 
> 标签：forms, qt, designer

在 Qt 中，我创建了一个没有类的设计器表单。所以基本上，我只有一个文件 myform.ui。我应该写什么代码来显示表单？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T17:14:36.083

如果您在该`FORMS`部分的 .pro 中包含（d）ui 文件，则在构建过程中将生成一个特殊的头文件。包括这个头文件并使用它在运行时将子小部件添加到您想要的任何 QWidget。

此示例中的 ui 文件称为**mywidget.ui**。在您的 .pro 文件中，有一行说

```
FORMS += mywidget.ui 
```

QtCreator 将在项目资源管理器中显示该文件。这一步很重要，否则构建项目时不会生成任何头文件！

然后将生成的头文件称为**ui_mywidget.h**并调用组成设计窗口的类`Ui::MyWidget`，可以按如下方式使用。

**解决方案 1 （当您创建一个新的“** *Qt Designer Form Class* ”时，QtCreator 建议的方式）：

```
namespace Ui {
class MyWidget;
}

class MyWidget : public QWidget
{
    Q_OBJECT

public:
    explicit MyWidget(QWidget *parent = 0);
    ~MyWidget();

private:
    Ui::MyWidget *ui;     // Pointer to the UI class where the child widgets are
}; 
```

```
#include "ui_mywidget.h"
MyWidget::MyWidget(QWidget *parent) :
    QWidget(parent),
    ui(new Ui::MyWidget)
{
    ui->setupUi(this);    // Create and add the child widgets to this widget
}

MyWidget::~MyWidget()
{
    delete ui;
} 
```

然后这个小部件就可以使用了，并且在实例化它时将包含您在设计器中创建的子小部件：

```
MyWidget widget;
widget.show(); 
```

**解决方案2**（不继承自QWidget）：

```
#include "ui_mywidget.h"
...
QWidget *widget = new QWidget(...);
Ui::MyWidget ui;         // Instance of the UI class where the child widgets are
ui.setupUi(widget);      // Create and add the child widgets to this widget
widget->show();
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:49:20.553

您可以使用[QUiLoader](http://qt-project.org/doc/qt-4.8/quiloader.html)加载 ui 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-05T07:48:49.793

[这里](https://doc.qt.io/archives/qt-4.8/designer-using-a-ui-file.html)解释了使用 ui 文件的官方方法。

如您所见，您有两个选项：“在编译时处理 ui 文件”或“在运行时”。

关于编译时处理，您还有其他三个子案例：“直接方法”（经典方法，在您创建新的“Qt Designer 表单类”时采用）和“单继承”/“多继承方法”。在上述文章中，您将找到所有详细信息。

# python - 嵌套列表理解python

> ID：12750474
> 
> 赞同：-6
> 
> 时间：2012-10-05T16:36:25.230
> 
> 标签：python

我正在尝试编写一个列表理解，将所有可整除的数字 2 翻倍，将所有可整除的数字 4 翻三倍并省略所有奇数（范围为 1 到 100）。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T16:39:58.720

```
[x*3 if not x%4 else x*2 for x in range(2,101,2)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T16:38:59.983

```
def silly_fun(x):
    if x%4 == 0:
        return 3*x
    else:
        return 2*x

[silly_fun(y) for y in data if y%2 == 0] 
```

# opengl - ssh opengl error: X Error of failed request BadRequest

> ID：12750476
> 
> 赞同：1
> 
> 时间：2012-10-05T16:36:32.170
> 
> 标签：opengl, ssh, x11-forwarding

远程 pc 是 Ubuntu 12.04（精确）64 位，带有 NVIDIA 显卡和驱动程序（版本当前更新），本地是带有 Intel HD graphics 3000 运行 Mac OS X Lion 10.7.5 的 macbook-air

我的目标是能够运行当前以`X Error of failed request BadRequest`. 一个（黑色）窗口在一毫秒内出现，然后关闭，终端上出现 X 错误。

glxgears 打开，但齿轮移动得很慢，一开始我以为是静态图像。

glxinfo 输出：

```
name of display: localhost:10.0
display: localhost:10  screen: 0
direct rendering: No
(etc) 
```

我已经尝试过`ssh -X`and `ssh -Y`，但无论哪种方式都失败了。任何指向我该如何解决这个问题的指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:55:12.700

您正在使用间接 OpenGL，它通过 ssh 传输 GL 命令。它只支持旧的 OpenGL 子集（iirc ~version 1.3）。

如果您想使用 Linux GPU，VirtualGL 将帮助您做到这一点。

# eclipse - JUnit 使用了错误的 Base64

> ID：12750477
> 
> 赞同：0
> 
> 时间：2012-10-05T16:36:44.400
> 
> 标签：eclipse, junit, websphere, base64

我想使用 commons-codec 1.5 中的 Base64 类，当我在服务器上运行代码时效果很好。我的应用程序在 Websphere 7.0 上运行。

但是当我运行我的 JUnit 测试时，选择了错误的 Base64 类，当我询问该类时：

```
System.out.println(Base64.class.getProtectionDomain().getCodeSource().getLocation()); 
```

输出为：file:/C:/EProg/IBM/SDP80/runtimes/base_v7/plugins/com.ibm.ws.prereq.soap.jar

那绝对是错误的版本。

并且由于版本错误而发生错误：

> java.lang.NoSuchMethodError: org/apache/commons/codec/binary/Base64.decodeBase64(Ljava/lang/String;)

疯狂的是，只有当我选择一个测试并在 Eclipse 中使用 Run As: JUnit Test 运行它时才会发生这种情况，如果我使用 Maven 运行整个测试，一切都可以正常工作。

我使用 JUnit 4.8.1 和 Eclipse Indigo Service Release 2 以及一些用于 Websphere、GWT 和 Maven 的插件。``

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T18:06:27.090

`com.ibm.ws.prereq.soap.jar`是一个 OSGi 包，并且在 WebSphere（构建在 OSGi 容器上）中，其中的类`org.apache.commons.codec.binary`对应用程序不可见，因为该包不是由 OSGi 包导出的（您可以通过查看`META-INF/MANIFEST.MF`文件来检查导出包的列表中`com.ibm.ws.prereq.soap.jar`）。这就解释了为什么在 WebSphere 中运行应用程序时不会遇到任何问题。

另一方面，当您将该 JAR 添加到 Eclipse 中的 Java 项目时，它将被视为一个简单的 JAR，而不是 OSGi 包，并且所有包都将可见。`commons-codec`在您的情况下，这会与另一个依赖项产生冲突。

我猜你在 Maven 中没有遇到这个问题的原因是这`com.ibm.ws.prereq.soap.jar`只是你的 Eclipse 项目的依赖，而不是你的 Maven 项目的依赖。

不幸的是，解决这个问题的方法并不多（简单）。一种是`com.ibm.ws.prereq.soap.jar`从您的 Java 项目中删除（我怀疑您实际上是在使用 Apache SOAP）。另一种是改变顺序，让你的其他`commons-codec`依赖在前面`com.ibm.ws.prereq.soap.jar`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:40:33.760

它看起来像一个类路径问题。更准确地说，Eclipse 与 Maven 的集成。我将调查 Eclipse 依赖项并确保它使用 Maven 进行依赖项管理。您可以通过两种方式进行操作，您可以运行 mvn eclipse:eclipse 命令或使用 M2Eclipse 插件。如果您使用后者，则在项目上下文菜单中有一个更新依赖项选项。

# jquery - 如何找到绑定到自定义事件的所有元素？

> ID：12750478
> 
> 赞同：0
> 
> 时间：2012-10-05T16:36:43.810
> 
> 标签：jquery

我想知道是否有任何方法可以自动检索已绑定到自定义事件的所有元素（或 jQuery 选择器）？

换句话说，我已将以下元素绑定到事件“something_added”：

```
$('div#slider').bind('something_added',function(){});
$('input#add').bind('something_added',function(){}); 
```

无论如何要自动检索`$('div#slider')`和`$('input#add')`使用事件名称（'something_added'）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T16:41:44.847

您可以选择所有元素并遍历它们的事件集合，寻找您感兴趣的事件：

```
jQuery.each($('#someElementId').data('events'), function(i, event){

    jQuery.each(event, function(i, handler){

        console.log( handler.toString() );

    });

}); 
```

不确定它是否适用于 jquery 1.8

* * *

**更新：**这是我放在一起的一个例子：http: [//jsfiddle.net/nicholmikey/sADZU/5/](http://jsfiddle.net/nicholmikey/sADZU/5/)

```
<html>

    <body>

        <form method="post" action="#">
            <input type="submit" value="Submit" onClick="return false">           
        </form>
    </body>

</html>​ 
```

和jQuery（1.7.2）：

```
$('input').bind('something_added', function() {});

$.each($('*'), function(i, events) {

    var events = $(this).data('events');
    if (events != null) {
        $.each(events, function(h, event) {
            alert(event[0].type);
    });
}

}); 
```

一旦找到具有您要查找的事件的元素，您可以使用 $(this) 因为它与 each($('*')) 相关，并执行您要执行的工作

# xslt - XSLT 选择问题 -

> ID：12750484
> 
> 赞同：0
> 
> 时间：2012-10-05T16:36:54.870
> 
> 标签：xslt

我有一些 XSLT 用于选择具有特定关键字的文本`<sliceXML>`这工作正常并依次抓取每个段落。我还想选择页面标签的内容`<pg>`并显示它。

但是，它会继续选择第一个`<pg>`标签的值，并且不会移动到下一个标签。任何帮助深表感谢。

**我的 XML**

```
<para>
    <sliceXML>telescope</sliceXML>
    A telescope test can be used to observe the night sky. What
    observations can you make about the universe from your own back yard?
    <pg>Page: 77</pg>
 </para>

 <para>
    <sliceXML>telescope</sliceXML>
    The scientists using the Sloan Digital Sky Survey telescope can
    gather far more information than they can review quickly. Humans are
    better at galaxy identification than computers. Why might this be a
    difficult task for computers?
    <pg>Page 78</pg>
 </para> 
```

注意：第 77 页和第 78 页

**我的 XSLT**

```
<xsl:template name="para">
    <div id="para">
        <xsl:copy-of select="text()"/>
    <span class="pagetag">
        <xsl:value-of select="//pg"/><img src="images/arrows.png" height="12px"/>
    </span>
    </div>
</xsl:template> 
```

**我目前的结果**

望远镜测试可用于观察夜空。您可以从自己的后院对宇宙进行哪些观察？**页数：77**

使用斯隆数字巡天望远镜的科学家们可以收集到比他们快速查看更多的信息。人类比计算机更擅长星系识别。为什么这对计算机来说可能是一项艰巨的任务？**页数：77**

**我想要的结果**

望远镜测试可用于观察夜空。您可以从自己的后院对宇宙进行哪些观察？**页数：77**

使用斯隆数字巡天望远镜的科学家们可以收集到比他们快速查看更多的信息。人类比计算机更擅长星系识别。为什么这对计算机来说可能是一项艰巨的任务？**页数：78**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:39:31.277

也许你应该尝试`pg`而不是`//pg`？因为你想要`pg`那个是你的孩子`para`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:46:30.037

以下对我来说很好

**XML:**

```
<form>
<para>
    <sliceXML>telescope</sliceXML>
    A telescope test can be used to observe the night sky. What
    observations can you make about the universe from your own back yard?
    <pg>Page: 77</pg>
 </para>

 <para>
    <sliceXML>telescope</sliceXML>
    The scientists using the Sloan Digital Sky Survey telescope can
    gather far more information than they can review quickly. Humans are
    better at galaxy identification than computers. Why might this be a
    difficult task for computers?
    <pg>Page 78</pg>
 </para>
 </form> 
```

**XSL：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns="http://www.w3.org/1999/xhtml"
    xmlns:date="http://exslt.org/dates-and-times" xmlns:str="http://exslt.org/strings">

    <xsl:template match="form/para">
    <div id="para">
        <xsl:copy-of select="text()"/>
    <span class="pagetag">
        <xsl:value-of select="pg"/><img src="images/arrows.png" height="12px"/>
    </span>
    </div>
</xsl:template>
</xsl:stylesheet> 
```

**输出：**

```
<?xml version="1.0" encoding="UTF-8"?>
<div xmlns="http://www.w3.org/1999/xhtml" xmlns:date="http://exslt.org/dates-and-times" xmlns:str="http://exslt.org/strings" id="para">

    A telescope test can be used to observe the night sky. What
    observations can you make about the universe from your own back yard?

 <span class="pagetag">Page: 77<img src="images/arrows.png" height="12px"/></span></div>

 <div xmlns:date="http://exslt.org/dates-and-times" xmlns:str="http://exslt.org/strings" xmlns="http://www.w3.org/1999/xhtml" id="para">

    The scientists using the Sloan Digital Sky Survey telescope can
    gather far more information than they can review quickly. Humans are
    better at galaxy identification than computers. Why might this be a
    difficult task for computers?

 <span class="pagetag">Page 78<img src="images/arrows.png" height="12px"/></span></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T16:40:59.657

已经有一段时间了，但也许是 .//pg 而不是 //pg

# windows - 在执行“EnumWindows”以在 Win32 C API 中查找窗口时，如何避免使用全局变量？

> ID：12750486
> 
> 赞同：3
> 
> 时间：2012-10-05T16:37:00.390
> 
> 标签：windows, winapi, global-variables

`EnumWindows`使用（或`FindChildWindows`）Win32 API时如何避免使用全局变量？

我大约有以下代码：

```
HWND prog_hwnd;

BOOL CALLBACK ProgEnumProc(HWND hwnd, LPARAM lParam) {
    if (...) {
        // found the right hwnd, assign it to prog_hwnd;
        prog_hwnd = hwnd;
        return FALSE;
    }
    return TRUE;
}

void FindProgHwnd()
{
    EnumWindows(ProgEnumProc, 0);
}

int main()
{ 
     FindProgHwnd();
     if (prog_hwnd) {
         // found prog_hwnd, but it's global variable
     }
} 
```

如您所见，要找到正确的 hwnd，我必须使用全局变量`prog_hwnd`。我想避免使用全局变量。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T16:38:29.803

将指向变量的指针`(LPARAM)prog_hwnd`作为`lParam`. 然后在每次调用时将其传递给回调。

在回调中，您可以通过执行分配给传递的变量`*(HWND *)lParam = ...`。

# ruby-on-rails - 在 Rails 应用程序中获取和查看常用数据的最有效方法是什么？

> ID：12750497
> 
> 赞同：1
> 
> 时间：2012-10-05T16:37:43.560
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, relational-database, rails-activerecord

`has_many :through`我有三个模型都通过方法相互关联。

```
ProgramCategory
ProgramSubcategory
Program 
```

在我的应用程序中，我需要经常使用 ProgramCategory.title、ProgramSubcategory.title 和 Program.title。可以说，会有一个动态侧边栏菜单，它看起来像这样：

```
|- Shows (ProgramCategory)
  |- Action (ProgramSubcategory)
    |- Lost (Program)
    |- Games of Thrones (Program)
    |- Dexter (Program) 
```

因为我知道`application_controller`,`application_helper`和`partials`; 我对将所有这些组合在一起以找到最合适的方式感到迷茫。

我应该在哪里以及如何调用我的模型？我应该在哪里构建我的方法以通过我的所有控制器访问它？我应该简单地创建一个部分并在`application`布局中渲染它吗？

我需要一些专家的启示，请...

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:00:35.857

如果此侧边栏显示在整个应用程序的每个视图中，您可以将其添加到您的应用程序布局中。然后在您的应用程序控制器中添加一个前置过滤器以获取数据，这将为从应用程序控制器继承的每个控制器中的每个操作执行。您还可以将其限制为特定操作，例如，仅`:index`和`:show`（对于每个控制器）。

```
class ApplicationController < ActionController::Base
  before_filter :get_side_bar, :only => [:index, :show]

  def get_side_bar
    #@sidebar = some code
  end
end 
```

然后您可以使用辅助方法（如果需要）并`@sidebar`在您的应用程序布局中呈现。

如果您需要为某些控制器跳过此操作，您也可以这样做，这将在过滤除其他控制器内的索引之外的任何内容之前跳过应用程序控制器：

```
class OtherController < ApplicationController
  skip_before_filter :get_side_bar, :except => [:index]
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T07:08:04.333

此导航栏不是您显示的数据的核心部分，所有页面都或多或少相同。因此，它不属于控制器。

使其成为辅助方法，并将其结果缓存在视图中：

`app/helpers/sidebar_helper.rb`

```
module SidebarHelper
  def sidebar_data
    # blahblah, use any tag helper (include it here if necessary)
    # just remember to 
  end
end 
```

`app/controllers/your_controller.rb`

```
class YourController < ApplicationController
  helper :sidebar
  # ... 
```

（或将辅助方法放在您的应用程序帮助程序中以使其随处可用）

`app/views/application/_sidebar.html.haml`

```
- cache do
  # well, put here whatever you need to output the sidebar
  # use the sidebar_data, which should return precooked data on 
  # which you can build your nested <ul>s.
  # just indent it two spaces, so it's inside the "cache do" block 
```

或者`app/views/application/_sidebar.html.erb`

```
<% cache do %>
  same as above, don't worry about indentation
<% end -%> 
```

并在适当的地方包括部分

```
<%= render 'sidebar' %> 
```

# c++ - C++ #include 语句

> ID：12750512
> 
> 赞同：0
> 
> 时间：2012-10-05T16:39:11.823
> 
> 标签：c++, eclipse, cascade

我是一名 Java 开发人员和 C++ 初学者。在 Java 中，我可以使用 (Ctrl + Shift + O) 轻松导入对象。`#include`然而，在 C++ 中，我每次都必须手动输入，浪费我的时间。另外，我经常不知道需要的对象在哪里。

是否有一种简单的方法可以自动导入或键入“#include”？如果没有，是否有插件或附加组件可以做到这一点？我正在为 Blackberry 10 使用 Eclipse IDE，以及 C++ Cascades。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T16:54:06.047

这就是 C++ 的工作原理。`#include`与 Java 相比，该功能是原始的`import`：每个`#include`都简单地被包含文件的文本替换（等等，递归），就好像它已被复制并粘贴在那里一样。

这有时具有优势，当然也很简单，但这确实意味着没有可靠的方法可以提前知道特定包含文件定义的内容。因此，如果您需要`vector`类型，例如，即 in `vector`; 但如果你需要`va_list`类型，那就是`stdarg.h`. 一般来说，事情是相当一致的，但并不完全如此，无论如何也没有什么可以强制执行的。这可能就是为什么大多数 IDE 没有为它提供太多帮助的原因。您只需要知道您正在使用的库的规则是什么（如果有的话）。

IDE 对 C++ 的支持通常不如对 Java 或 C# 的支持。这是一个例子（还有很多其他例子）。如果您期望获得 Java 或 C# 级别的帮助，您最终可能会感到失望。从好的方面来说，虽然整理`#include`列表很烦人，但在使用 C++ 时还会遇到很多其他困难，因此它很少会成为主要问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T16:45:46.247

看到[这个错误报告](https://bugs.eclipse.org/bugs/show_bug.cgi?id=45203)。

似乎人们已经讨论了大约 10 年，但尚未实施。

我个人认为，作为 C++ 程序员，您应该尝试消除文件中过度使用包含的情况，并改用**前向声明**，因此这不是许多程序员正在寻找的功能。如果您不想对程序进行太多控制，您可以随时在`java`或中编写代码`c#`。

# jsp - 页面未完全加载

> ID：12750514
> 
> 赞同：2
> 
> 时间：2012-10-05T16:39:21.793
> 
> 标签：jsp, tomcat7

由于我的网站位于公司网络上，因此我没有任何可发布的代码或屏幕截图，但我遇到了一些间歇性问题，即网页无法按时完全加载。发生的情况是，有时它不会加载图像，而是加载 ascii 或您在记事本中打开它时可能看到的任何内容。然后，重新加载后，它会在 favicon 中放置一个随机图标，然后再次重新加载将在文本视图中加载一个随机脚本。几次重新加载后，css 没有加载，然后终于可以正常工作了。

从来没有任何错误消息（萤火虫或浏览器）。日志中没有什么奇怪的。

我用谷歌搜索，但似乎找不到答案，不确定我在正确的地方搜索。该网站是基于 Java 的 JSP 页面。我们在 Tomcat 服务器上运行。

任何想法为什么这样的事情会继续发生？

# jquery - jqTouch返回问题

> ID：12750515
> 
> 赞同：0
> 
> 时间：2012-10-05T16:39:23.930
> 
> 标签：jquery, jqtouch

我有这个应用程序运行良好，但最近不得不更新它，但我注意到我的下一页代码似乎工作正常，但是我的后页似乎不想返回。

我不认为它是背后的东西，因为我正在为我的下一个/上一个链接使用以下 coed：

```
 <a id="prevs" class="previous slide reverse" href="#intro"></a>
   <a id="ntpg" class="next slide" href="#descpg"></a> 
```

我还注意到，当它第一次加载时，我必须使用基本上说“开始”和其他“关于”的按钮。

当我按下开始时，它可以工作，但是当我按下时，什么也没有发生。关于页面内容位于介绍页面上方，因此我将其移至下方，然后就可以使用了。

所以我开始在这里看到一种模式，每次我转到下一页它都不会返回，因为该页面在它之前并且它好像它删除了之前的那个，因此实际上没有什么可以返回？

任何想法都会很棒。

我正在使用最新的 jquery 和 jqtouch js 文件。

还：

我在页面上也有滑动效果，因为这是相同的，我可以前进，但是当我再次滑动返回时，它不会显示页面：

扫码如下：

```
 var $cp = $(this).closest('div>div').attr("id"), 
  $pp = $('#'+$cp+ ' #prevs').attr('href'), 
  $np = $('#'+$cp+ ' #ntpg').attr('href'),
  $dr=i.direction;
  if($dr=='right'){ jQT.goTo($pp,'slide', true); } else if($dr=='left'){jQT.goTo($np,'slide', false);} 
```

为了回答下面的评论，上面的滑动代码使用了 id。我已经追踪了向后滑动等，它调用了页面 ID，但出于同样的原因，它不想返回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:50:30.687

看来，当我更新内容时，我错过了最新的 jqtouch.css 文件，所以我进去了，它工作了。

现在唯一的问题是正确的滑动仍然无法正常工作，但这是另一个问题。

# c# - 禁用 DataGridView 除了滚动

> ID：12750518
> 
> 赞同：5
> 
> 时间：2012-10-05T16:39:37.563
> 
> 标签：c#, datagridview, disabled-control

我如何配置 datagridview 以便用户只能在行中移动并使用滚动，没有别的...如果我禁用网格不允许我使用滚动

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T17:29:11.320

将您的 datagridview 设置为只读，这将禁用任何编辑。

```
dataGridView1.ReadOnly = true; 
```

在您的处理程序中，执行以下操作：

```
void dataGridView1_DoubleClick(object sender, EventArgs e)
{
     if (dataGridView1.ReadOnly == true)
          return;

     // .. whatever code you have in your handler...
} 
```

即使用户双击网格，也不会发生任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T17:16:17.643

正如OP评论中所讨论的：

```
dataGridView.ReadOnly = true; 
```

在您正在处理的任何 DataGridView 事件中，检查 ReadOnly 属性，如果为 true，则不要在事件中执行任何操作。

我查看了遍历行和列并禁用它们中的每一个的另一个选项，但 Enabled 不是行或列对象的属性。无论如何，遍历大量项目会很慢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-09T16:17:40.987

T. Fabre 的回答对我不起作用。就我而言，我的数据网格的每一行都有按钮和可编辑的复选框，因此即使 DataGrid 处于只读状态，它们也不会被停用。但是，对我有用的（不禁用滚动）是禁用每一行，如下例所示：

```
<Style TargetType="{x:Type DataGridRow}" x:Key="MyDataGridRowStyle">
    <Style.Setters>
        <Setter Property="IsEnabled" Value="False"/>
    </Style.Setters>
</Style> 
```

然后在 DataGrid 中：

```
<DataGrid ... RowStyle="{StaticResource MyDataGridRowStyle}"> 
```

希望有所帮助（抱歉，如果只发布了 XAML 解决方案）！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-20T16:02:54.657

对我来说最好的解决方案是禁用除滚动和调整单元格大小之外的所有内容（恕我直言，这最适合“只读表格”）：

```
// disable editing
this.dgTabOptions.ReadOnly = true;

// disable selection        
private void myGrid_SelectionChanged(object sender, EventArgs e)
{
    dgTabOptions.ClearSelection();
}

//disable sorting
private void dgTabOptions_ColumnAdded(object sender, DataGridViewColumnEventArgs e)
{
    e.Column.SortMode = DataGridViewColumnSortMode.NotSortable;
} 
```

# search - 您是否选择不扩展节点与不将其添加到 A* 中的队列以及已探索的封闭集是否重要？（图表搜索）

> ID：12750519
> 
> 赞同：3
> 
> 时间：2012-10-05T16:39:48.253
> 
> 标签：search, graph, a-star

我目前正在 EdX 上参加伯克利 AI 课程，我们正在研究 A* 搜索。我以前使用过 A* 图形搜索，并且我实现了它，以便在向边缘/队列添加后继者时，如果它已经在边缘或探索/封闭集中，我不会添加后继者。但是，班上的教授说，对于 A* 图搜索，我们应该将节点添加到边缘，然后如果我们将它们弹出并且它们已经在探索集中，则跳过它们（即拒绝扩展它们但仍然添加重复节点到边缘）。

Wikipedia 上的伪代码[http://en.wikipedia.org/wiki/A_star#Pseudocode](http://en.wikipedia.org/wiki/A_star#Pseudocode)用于 A* 似乎是另一种方式，如果它不在探索中，我们只将它添加到边缘/队列中/已经封闭了。但是，它也有一个看起来像 Dijkstra 的部分，它确保后继者的 g-score 是最小的。

这一切都假设我们使用的是一致的、最优的启发式。有人可以帮助我更好地了解以任何一种方式实施它的后果谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T12:58:26.397

您正在谈论处理以前遇到的节点的两种方法

在您的第一种方法中，您从队列中弹出一个项目以将其添加到您的封闭集合中。这样做时，您必须将其后继者添加到队列中。如果后继者已经在队列中，那么您只需更新其值（因此它是最小的）。这将需要至少 n 个查找操作（节点的每个后继节点一个）。每次一个节点已经在您的队列中时，您必须将其值与新节点进行比较，并可能更新优先级。在最坏的情况下，您必须对队列执行 n 次查找、n 次比较和 n 次更新操作。

在您的第二种方法（来自您的教授的方法）中，所有继任者都被放入队列中，而不检查他们是否已经在那里。在评估节点时，这将只需要 n 次插入。但是，每次弹出队列的一个节点时，您都​​必须检查它是否已经在您的封闭集中，然后才能探索它。这将需要您添加到队列中的每个节点进行一次查找操作（尽管不在您的队列中）。一个节点可以多次出现在您的队列中（而在第一种方法中，队列中只有一个副本）。

正如您所看到的，这两种方法的差异将取决于您使用的队列类型（例如斐波那契堆、二进制堆……）以及相应操作的成本。如果更新操作代价高昂，那么第二种方法会更快。第二种方法确实需要更多的队列内存（因为它可以同时包含同一个节点的多个副本）。队列会更大，这将对您对其执行的操作产生影响。

您应该查看您使用的队列，并根据所需的操作和您的图表确定最佳方法。

# llvm - 链接到 llvm 库

> ID：12750526
> 
> 赞同：5
> 
> 时间：2012-10-05T16:40:25.683
> 
> 标签：llvm

我正在开发一个基于 llvm 的编译器，当我尝试生成可执行文件时，会发生以下错误：

./bin/llvmcode.s:35: 未定义对“operator new[](unsigned long)”的引用

请注意，在生成的 IR 中，调用了位于 llvm 库之一中的函数“@_Znam”。因此，我应该将生成的程序集文件与该库链接。这是我用来执行此操作的代码：

```
llvm-as ./bin/llvmcode.ll
llc ./bin/llvmcode.bc
g++ -g ./bin/llvmcode.s \`llvm-config --cppflags --ldflags --libs core jit native\` -O3 -o executable -rdynamic 
```

这段代码有什么问题？任何援助将不胜感激。

# html - 使用管理员为当前访问者实时显示/隐藏脚本

> ID：12750530
> 
> 赞同：0
> 
> 时间：2012-10-05T16:40:48.143
> 
> 标签：html, jquery, jquery-plugins

我开设了很多在线课程，我一直在寻找所有地方，我不确定它是否可以完成......但基本上我会派几百人在我的网站上观看一个特殊的视频时间 ie:7:00PM 我希望能够在幕后点击一个按钮，在演示文稿下方显示一个谢谢/提供按钮。

有什么东西可以做到这一点吗？html5 或 jQuery 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:47:25.623

我不确定您为什么要手动执行此操作，但如果您希望按下按钮以在运行视频的浏览器的所有实例上显示文本，则需要使用 websocket，尽管 IE 存在问题HTML5 websockets 仍然。

您可以使用 Flash 来规避 websockets 的任何问题，因为 flash 已经能够做到这一点已有一段时间了。您可以查看 Pusher - 它与跨浏览器兼容，可以让您通过使用 pusher 事件将数据“推送”给您的用户

有关 pusher 的更多信息 - 请查看[http://www.pusher.com](http://www.pusher.com) - 它们对有限数量的连接是免费的 - 之后，您必须开始付费

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:43:28.177

是的，您可以使用[WebSockets](http://www.websocket.org/)完成此操作。您还必须选择一个服务器来实现 WebSockets 服务器，例如 Socket.io 等...

# c++ - STL - 每个编译器都以不同的方式实现它吗？

> ID：12750531
> 
> 赞同：3
> 
> 时间：2012-10-05T16:40:48.980
> 
> 标签：c++, stl

有人对我说，每个编译器都以不同的方式实现标准模板库，这是正确的吗？

如果（例如）集合容器是用链表而不是红黑树实现的，如何观察计算复杂性（时间和空间）？

我错过了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-05T16:44:00.973

每个 C++ 编译器都带有 C++ 标准库的实现。一些实现是基于其他的，而一些是独立的。

但是，它们都*必须*执行该标准。并且该标准对各种功能都有一定的复杂性规范。A`set` *不能*纯粹作为链表实现并且仍然满足这些保证。因此，如果 C++ 标准库实现`set`为链表，则它*违反*了标准。`if`这与实现错误的 C++ 编译器没有什么不同。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-05T16:51:47.937

首先，您可能指的是*C++ 标准库*，而不是[STL](http://en.wikipedia.org/wiki/Standard_Template_Library)。STL 是在 C++ 标准化之前编写的一个库，它严重影响了 C++ 标准库。

现在，C++ 标准提供了实现应该遵循的规则和定义。特别是，标准库被描述为各种部分类定义和函数声明以及它们应具有的属性。该实现可以自由地以它选择的任何方式实现该库，只要它完全符合标准所说的。以下是标准对符合标准的实现（第 1.4 节）的说明：

> 对于类和类模板，库子句指定部分定义。未指定私有成员（第 11 条），但每个实现都应提供它们以根据库条款中的描述完成定义。
> 
> 对于函数、函数模板、对象和值，库子句指定声明。实现应提供与库条款中的描述一致的定义。

例如，为了确保`std::list`实现的复杂度与双链表的复杂度相等，对其成员函数给出了复杂度要求。例如，`std::list::insert`函数具有以下要求（第 23.3.5.4 节，强调添加）：

> 将单个元素插入列表需要**恒定的时间**，并且只需一次调用 T 的构造函数。

这并不一定意味着`std::list` *必须*作为双链表来实现。然而，这是一个常见的选择。实现只能以满足要求的方式运行（或者*看起来*已经满足要求；*as-if 规则*）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-05T16:54:02.700

[实际标准](http://www.open-std.org/jtc1/sc22/wg21/)的示例可能有助于澄清，并且`unordered_*`我认为这是一个很好的示例，因为它是专门添加的，以便将哈希表纳入标准。这句话来自[草稿](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/n3242.pdf)，但我希望最终版本大体相似：

> ### 23.5.4.4 unordered_map 修饰符
> 
> ```
> template <class P>
> pair<iterator, bool> insert(P&& obj); 
> ```
> 
> 1.  要求： value_type 可以从`std::forward<P>(obj)`.
> 2.  效果：插入转换为 value_type 的 obj 当且仅当容器中没有与 的键等效的元素时`value_type(obj)`。
> 3.  返回：`bool`返回的对对象的组件指示插入是否发生，并且迭代器组件指向与 key 的 key 等效的元素`value_type(obj)`。
> 4.  **复杂性：平均情况 O(1)，最坏情况 O(size())。**
> 5.  备注：除非 P 可隐式转换为 ，否则此签名不应参与重载决议`value_type`。

该标准的其他部分实际上也要求将其实现为哈希表，但我认为重要的部分是它们提出了复杂性要求。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-05T18:46:32.017

**简短的回答**：它不能，作者可能误解了。红黑树被实现为基于节点的容器（即节点以某种方式相互链接），就像链表一样，但是节点链接在一起的方式不同，因为它们对复杂性的要求不同他们的各种操作。

* * *

**长答案**：实际上，有一个误解。

C++ 标准中有两个（在一定程度上交错）组件：

*   C++ 语言本身
*   C++ 标准库

只需要编译器来实现 C++ 语言。事实上，编译器和标准库的实现之间不一定存在一对一的匹配。

例子：

*   Dinkumware 是一家提供自己的 C++ 标准库实现的公司。它卖给了微软，后者将它与 Visual Studio C++ 编译器和 IDE 捆绑在一起。
*   Clang 是一个 C++ 编译器，在大多数 Linux 发行版上将使用 libstdc++ 实现，它通常与 gcc 编译器捆绑在一起。LLVM 项目（托管 Clang）有自己的实现（libc++ 库），但尚未移植到许多 linux 发行版。

标准库的任何实现都必须满足许多要求，包括接口（哪些类/方法、哪些参数、哪些类型……）以及复杂性方面。但是，实现方式确实有所不同。

例子：`std::string`

*   在 libstdc++（与 gcc 一起提供）中，`std::string`该类仅包含一个指向共享类的指针，因为它实现了 Copy-On-Write 习惯用法。
*   另一方面，在 Dirkumware 实现中，`std::string`该类要胖得多，因为它实现了 Small-String-Optimization，它`new`通过重用类中的一些空间来存储小字符串而无需动态分配内存（通过）。

两者都实现相同的接口，但大不相同。

例子：`std::sort`

The sort algorithm is only required to have a N*log(N) overall complexity, in average. However good implementations will implement either IntroSort algorithms or variations of TimSort, which have lower complexity in many common cases or less disastrous worst case complexity.

It is my understanding that libc++'s implementation is currently the best out of the three libraries I cited, for example.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-05T17:58:51.160

> 如果（例如）集合容器是用链表而不是红黑树实现的，如何观察计算复杂性（时间和空间）？

圣安东尼奥海洋世界曾经归 Anheuser-Busch 所有。当 Anheuser-Busch 买下它时，得克萨斯州奇怪的酒类法律要求 Anheuser-Busch 在海洋世界只销售竞争对手的啤酒。卖芽是违法的。因此，这些酒法的布希例外。Busch 例外没有命名 Anheuser-Busch 或 SeaWorld。那未免太露骨了。但它确实允许 SeaWorld 出售 Bud，并且不适用于其他任何地方。立法者非常擅长制定针对特定组织的法律，而无需命名该组织。

这同样适用于标准编写者。该标准没有在任何地方说红黑树，但要求被严重操纵以支持它们。我怀疑即使是 AVL 树也能满足这些严格的插入要求。AVL 树在插入时放弃了一些性能，以便尽可能快地进行查找。在搜索方面，AVL 树甚至比红黑树更快。

# .net - IAsyncResult 模式的优势是什么？

> ID：12750532
> 
> 赞同：3
> 
> 时间：2012-10-05T16:40:51.180
> 
> 标签：.net, multithreading, .net-2.0, iasyncresult

我觉得如果许多类（例如`TcpClient`, `UdpClient`, `HttpListener`）是事件驱动的，它们会更容易理解和使用。而且`IAsyncResult`模式非常难以实现，因为它会为您打开各种奇怪的用例：

1.  如果调用者连续调用多个 Begin 方法怎么办？
2.  如果调用者混合了 Begin 和常规方法怎么办？

等等。尽管如此，微软还是选择在大多数地方使用它。为什么？

**编辑：**请将讨论集中在 .NET 2.0 上，因为这是我必须使用的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-05T16:43:00.810

> 等等。尽管如此，微软还是选择在大多数地方使用它。为什么？

使用的异步模式`IAsyncResult`是框架中使用的原始异步编程模式。它没有什么优势，而且随着时间的推移，复杂性导致新模式的开发。

事件异步编程 (EAP) 是稍后介绍的（您有一个带有完成事件的“开始”方法）。这解决了很多复杂性，但在许多情况下仍然难以使用，因为您仍然必须将逻辑拆分为多个方法。

但是，当前的异步模式基于 .NET 4`Task`和`Task<T>`类，并提供了巨大的优势，尤其是在与 C# 5 的 async/await 支持结合使用时。幸运的是，[TaskFactory.FromAsync](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskfactory.fromasync.aspx)可用于轻松地将`IAsyncResult`基于异步方法对包装到`Task<T>`自动中，因此可以使用新模式。.NET 4.5 添加了许多框架异步方法的新版本，这些方法返回`Task<T>`，因此新的`async`/`await`语言支持可以与框架方法一起使用。这是所有异步编程的首选方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T16:42:32.757

这种模式没有太多优势。

在 .Net 1.0 中，在泛型和 lambda 表达式之前，这是唯一可用的异步模式。

出于多种原因，更现代的基于任务的模式要好得多，包括类型安全、更简单的错误处理、延续、`When*()`方法等。

# ios - 支持横向时强制 iPad 应用以纵向启动

> ID：12750542
> 
> 赞同：2
> 
> 时间：2012-10-05T16:41:27.953
> 
> 标签：ios, ipad, ios6, device-orientation, landscape-portrait

我的 iPad 应用程序在应用程序的某处包含一个支持横向模式的视图。

为了调用该视图中的*shouldAutorotateToInterfaceOrientation* ，我必须在*info.plist*中声明支持景观。

**问题：**

启动应用程序时显示的 UITabController 不支持横向模式，我确保在所有选项卡栏的视图控制器中指定它。然而，当设备处于横向模式时启动应用程序时，tabcontroller 以横向显示并且所有选项卡看起来都扭曲了。

将*info.plist*设置为仅支持纵向模式会强制应用正确启动，但随后在可旋转视图控制器上会忽略 shouldAutorotateToInterfaceOrientation *。*

我在启动时尝试的另一个选项是：

```
[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationPortrait]; 
```

这实际上迫使应用程序以纵向显示，但也使应用程序忽略了可旋转视图控制器上的进一步设备旋转。

**更新：** 这只是 iOS6 问题，无法在模拟器上发现

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:14:59.813

检查这个[iOS 6 旋转：supportedInterfaceOrientations 不起作用？](https://stackoverflow.com/questions/12410031/ios-6-rotations-supportedinterfaceorientations-doesnt-work/12411651#12411651)

您需要继承 TabBarController 并覆盖其 shouldAutoRotateToInterfaceOrientation 以控制此 ViewController 如何定位自身。

# linq-to-sql - 如何处理必须通过 Web 服务的 Linq To Sql 插入/更新？

> ID：12750544
> 
> 赞同：0
> 
> 时间：2012-10-05T16:41:40.843
> 
> 标签：linq-to-sql

我正在编写一个位于 3rd 方应用程序之上的 Web 应用程序。我们可以将对象插入到第 3 方数据库中的唯一受支持的方式是将数据插入到通用的“临时表”中，然后调用 Web 服务以通过其业务逻辑对其进行处理。

问题是这可能很慢。

我知道在 Linq 中我可以为每个类提供一个 Insert* 方法，然后处理单个插入。问题是 Insert* 方法是为每个对象单独调用的，这意味着我们有多次调用 Web 服务的延迟。在处理关联时，这是一个更大的问题，因为我们必须确保它们以正确的顺序插入，并且每个都在插入后使用主键更新 L2SQL 对象。对于一个复杂的对象，这可能意味着使用此方法通过 Web 服务进行六次往返！:(

现在，Web 服务本身实际上将同时处理多个事情。因此，理想情况下，我可以将一个对象及其所有关联对象插入到临时表中，调用一次 Web 服务，然后在最后取回所有主键。

有谁知道在 Linq-to-Sql 中实现这一点的方法？

# ruby - Ruby 救援语句是否与 require 一起使用？

> ID：12750546
> 
> 赞同：4
> 
> 时间：2012-10-05T16:41:45.523
> 
> 标签：ruby, require, modifier, rescue

Ruby**`rescue`**语句修饰符是否与 一起使用**`require`**？

```
irb(main):001:0> require 'a' rescue nil
LoadError: no such file to load -- a
    from (irb):1:in `require'
    from (irb):1
    from :0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T16:48:31.240

`LoadError`您可以从只需要使用`begin/end`样式而不使用 inline的情况中解救出来`rescue`：

这可以按您的预期工作：

```
begin
 require 'a'
rescue LoadError => ex
 puts "Load error: #{ex.message}"
end 
```

# r - 在 R 中做戴明回归。时间敏感

> ID：12750551
> 
> 赞同：-2
> 
> 时间：2012-10-05T16:41:58.207
> 
> 标签：r, packages, statistics-bootstrap

我刚刚将 R 加载到我的 Windows 机器上，并包含引导例程和用于 Deming 回归的 mcr 例程。非常基本的问题。

1.  如何在自举采样例程中嵌入戴明回归？

2.  如何将我的数据输入到 R 中？数据在 Excel 电子表格中。

请尝试给我一个快速的方法。如果可能的话，我今天正在尝试这样做！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T17:56:04.093

从长远来看，您应该真正阅读 R 导入/导出手册和 R 简介（两者都在您安装 R 时安装）。

短期而言，一种简单的方法是：使用 Excel 打开文件并突出显示包含感兴趣数据的部分，包括具有列名的第一行（如果您从左上角的单元格开始并同时按住 ctrl 和shift 然后点击向下箭头，然后点击右箭头键，这可能有助于此过程）。然后右键单击选择并选择“复制”。

在 R 类型中：

```
mydata <- read.delim('clipboard', header=TRUE) 
```

如果一切正常，那么 mydata 现在将是一个包含您的数据的数据框。如果您键入：

```
View(mydata)
summary(mydata) 
```

然后你会得到一个电子表格，你可以检查的数据窗口（注意“视图”中的大写字母“V”）和一个快速的数据摘要，你可以检查以确保一切都有意义（不是分类的数据，计算数值数据的平均值）。如果这些摘要没有意义，那么我们将需要有关您的数据格式的更多详细信息。

然后，您可以通过执行以下操作来运行回归：

```
library("mcr")
model1 <- mcreg(mydata$xvar, mydata$yvar, error.ratio=1, method.reg="Deming",
      method.ci="bootstrap")
printSummary(model1)
getCoefficients(model1)
plot(model1) 
```

使用`xvar`并`yvar`替换为适当的变量名。

如果您需要其他选项以及如何解释结果，您将需要研究文档，但这应该可以帮助您入门。

# java - 如何使两个 Servlet 共享相同的项目列表

> ID：12750555
> 
> 赞同：3
> 
> 时间：2012-10-05T16:42:19.517
> 
> 标签：java, jsp, servlets

这是一个简单的 CRUD 网络应用程序。

我有两个 Servlet。

一个用于列出（`MyProjectListServlet.java`）页面上的**所有**项目。

另一个处理项目信息的更新（`MyPprojectEditorServlet.java`）或将**项目**添加到列表中。

目前，两个 Servlet 都创建和维护自己的相同项目列表。因此，列表 Servlet 始终显示它自己的未更改项目列表，更新 Servlet 显示更新的项目信息（如果您编辑项目，否则它将显示与列表 servlet 相同的信息）。

如何使两个 Servlet(`MyProjectListServlet`和`MyPprojectEditorServlet`) 共享同一个`itemRepo`列表。

**MyProjectListServlet.java**：

```
package com.myproject;

import java.io.IOException;

import javax.inject.Inject;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.myproject.MyProjectRepository;

@WebServlet("/project/")
public class MyProjectListServlet extends HttpServlet {

    @Inject
    private MyProjectRepositoryImpl itemsRepo = new MyProjectRepositoryImpl(); // creates brand new list of items

    public MyProjectListServlet() {
        super();
        // TODO Auto-generated constructor stub
    }

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
        request.setAttribute("items", itemsRepo.listItems());

        getServletContext().getRequestDispatcher("/WEB-INF/pages/item-list.jsp").forward(request, response);
    }

    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
    }

} 
```

**MyPprojectEditorServlet.java**：

```
package com.myproject;

import java.io.IOException;

import javax.inject.Inject;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.myproject.myitem;
import com.myproject.myprojectRepository;

@SuppressWarnings("serial")
@WebServlet("/project")
public class MyPprojectEditorServlet extends HttpServlet {

    @Inject
    private MyProjectRepositoryImpl itemRepo = new MyProjectRepositoryImpl(); //creates its own list of items

    public MyProjectEditorServlet() {
        super();
        // TODO Auto-generated constructor stub
    }

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
        String id = request.getParameter("id");

        if(id != null && !id.isEmpty()){
            MyItem item = itemRepo.lookupitemById(id);
            request.setAttribute("item", item);

        }

        request.setAttribute("items", itemRepo.listMyItems());

        getServletContext().getRequestDispatcher("/WEB-INF/pages/item-form.jsp").forward(request, response);
    }

    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub

        String str1 = request.getParameter("str1");
        String str2 = request.getParameter("str2");
        String str3 = request.getParameter("str3");
        String str4 = request.getParameter("str4");
        String str5 = request.getParameter("str5");

        String id = request.getParameter("id");
        if(id == null || id.isEmpty()){
            itemRepo.addItem(str1, str2, str3, str4, str5);
        }else{
            itemRepo.updateItem(id, str1, str2, str3, str4, str5);
        }
        response.sendRedirect(request.getContextPath() + "/project/");
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:45:04.573

你有两个选择：

1.  将列表保存为 HttpSession 对象（会话范围）的属性。
2.  将列表保存为 ServletContext 对象（应用程序范围）的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:53:35.493

JPA（Java Persistence API，[http](http://en.wikipedia.org/wiki/Java_Persistence_API) ://en.wikipedia.org/wiki/Java_Persistence_API ）允许您将运行时对象存储在数据库中，即使您重新启动容器或重新加载 servlet 也可以访问它们。要使用 JPA，您的类需要一些注释来定义对象应如何存储在数据库中。

保存对象后，可以轻松地再次从其他 servlet 访问它，并且还会在底层数据库中更新修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T16:44:56.733

您可以使用单例/应用程序或会话范围的变量，或者对于更具可扩展性的解决方案，您可以将数据存储在 JPA/Redis 之类的东西中。

# python - Python：用优雅的解决方案用另一个 numpy.ndarray 屏蔽一个 numpy.ndarray

> ID：12750560
> 
> 赞同：0
> 
> 时间：2012-10-05T16:42:51.523
> 
> 标签：python, arrays, optimization, numpy

我有两个 numpy.ndarray，我找到了一个不优雅的解决方案（使用超过 4 行代码）用 data1 屏蔽 data2。我要求**一个优雅的解决方案**，节省线路：

例子。

```
data1 = np.array([[1,2,np.nan,4,5],[np.nan,7,np.nan,9,np.nan],[11,12,13,14,np.nan],[np.nan,17,np.nan,19,20]])
data2 = np.ones((6, 4))

print data1
[[  1\.   2\.  nan   4\.   5.]
 [ nan   7\.  nan   9\.  nan]
 [ 11\.  12\.  13\.  14\.  nan]
 [ nan  17\.  nan  19\.  20.]]
>>> print data2
[[ 1\.  1\.  1\.  1.]
 [ 1\.  1\.  1\.  1.]
 [ 1\.  1\.  1\.  1.]
 [ 1\.  1\.  1\.  1.]
 [ 1\.  1\.  1\.  1.]
 [ 1\.  1\.  1\.  1.]] 
```

我希望得到的结果是：

```
[[  1\.   2\.  1   4\.   5.]
 [ 1   7\.  1   9\.  1]
 [ 11\.  12\.  13\.  14\.  1]
 [ 1  17\.  1  19\.  20.]] 
```

换句话说，其中 data1 是 nan data2 的值

提前感谢您的帮助和建议。我用超过 4 行代码做到了这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:59:56.480

假设您的意思是将 data1 和 data2 作为相同大小的数组（这会将您的示例更改为读取）：

```
data2 = np.ones((4, 5)) 
```

单线方法是：

```
data1[np.isnan(data1)] = data2[np.isnan(data1)] 
```

# ant - 对 JAXB 使用 XJC Ant 任务的 AccessType 问题

> ID：12750565
> 
> 赞同：2
> 
> 时间：2012-10-05T16:42:57.343
> 
> 标签：ant, jaxb, xjc

在使用 XJC 生成类时（使用 Sun 的 Ant com.sun.tools.xjc.XJCTask 任务）我在这里得到了提到： [JAXB Binding Exception](https://stackoverflow.com/questions/2310202/jaxb-binding-exception)

但是现在我已经省略了 jaxb-api jar，我得到： java.lang.NoClassDefFoundError: javax/xml/bind/annotation/AccessType

任何建议如何修复我的 XJC 任务的类路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:35:16.933

根据给定的信息，您似乎正在使用 jdk1.6 而您没有使用 java install dir/bin 目录下的 xjc.exe 任务。

您可能已经通过其他 jar 配置了 xjc 任务。请使用 jdk1.6 自带的 xjc/wsgen/wsimport 任务

# javascript - 在javascript中将字符串“009”解析为整数？

> ID：12750569
> 
> 赞同：8
> 
> 时间：2012-10-05T16:43:16.707
> 
> 标签：javascript, node.js

如何在 javascript中解析**009我需要返回值为****9**但它返回 0。
但是当我解析**001 时它返回 1**。

```
var tenant_id_max = '3-009';
tenant_id_split = tenant_id_max.split("-");
var tenant_id_int = tenant_id_split[1];
var tenant_id_count = parseInt(tenant_id_int); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-05T16:43:49.577

做

```
var tenant_id_count = parseInt(tenant_id_int, 10); 
```

这是因为如果您不指定基数，则以“0”开头的字符串将被解析为八进制（这对于“009”来说效果不佳，因此您会得到 0）。

来自[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)：

> 如果输入字符串以“0”开头，则基数为八（八进制）。这个特性是非标准的，一些实现故意不支持它（而是使用基数 10）。由于这个原因，在使用 parseInt 时总是指定一个基数。

要记住的最重要的事情是**始终指定基数**。

# python - 使用类时的 Python TypeError (wx.Python)

> ID：12750570
> 
> 赞同：1
> 
> 时间：2012-10-05T16:43:17.253
> 
> 标签：python, wxpython, typeerror

该程序是 wx.textctrl 在单击按钮时写为“单击”。

此代码运行没有错误。

```
import wx

class Mainwindow(wx.Frame):

    def __init__(self, parent, id, title):
        wx.Frame.__init__(self, parent, id, title, size=(300, 300))
        panel = wx.Panel(self, -1)

        vbox = wx.BoxSizer(wx.VERTICAL)

        hbox1 = wx.BoxSizer(wx.HORIZONTAL)
        btn = wx.Button(panel, -1, 'OK', size=(70, 30))
        btn.Bind(wx.EVT_BUTTON, self.click_btn) #line 12
        hbox1.Add(btn, 0)
        vbox.Add(hbox1, 0)

        hbox2 = wx.BoxSizer(wx.HORIZONTAL) 
        self.tc = wx.TextCtrl(panel, -1, style=wx.TE_MULTILINE)
        hbox2.Add(self.tc, 1, wx.EXPAND) 
        vbox.Add(hbox2, 1, wx.EXPAND)

        panel.SetSizer(vbox)

        self.Centre()
        self.Show(True)

    def click_btn(self, event): #line 27
        self.tc.WriteText("clicked\n") #line 28

if __name__=="__main__":
    app = wx.App()
    Mainwindow(None, -1, u"sample")
    app.MainLoop() 
```

但是，如果此代码以这种方式更改，则会出错。

更改为第 12 行。

```
btn.Bind(wx.EVT_BUTTON, Click_btn.click_btn) 
```

更改为第 27 和 28 行。

```
class Click_btn:
    def click_btn(self, event):
        self.tc.WriteText("clicked\n") 
```

错误是：Typeerror: unbound method click_btn() must be called with Click_btn instance as the first argument (得到了 CommandEvent 实例)

我不知道如何处理这个错误。

*后记

我读了答案，这个代码改变了。但它不运行...

更改为第 12 行。

```
button = Click_btn()
btn.Bind(wx.EVT_BUTTON, button.click_btn) 
```

更改为第 27 和 28 行。

```
class Click_btn(Mainwindow):
    def click_btn(self, event):
        Mainwindow.tc.WriteText("clicked\n") 
```

请教我应该改变的点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:46:48.123

```
class Click_btn:
    @classmethod
    def click_btn(cls, event):
        cls.tc.WriteText("clicked\n") #this will probably break now 
```

这将允许您在类而不是类的实例上调用它

班级是`Click_btn`

一个实例将是`btn = Click_btn()`（btn 是 Click_btn 的实例）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T16:47:08.307

首先，您应该从以下地方开车`object`：

```
class Click_btn:
    def click_btn(self, event):
        self.tc.WriteText("clicked\n") 
```

但这不是问题。要获得绑定方法，您必须这样编写`Bind`：

```
# create an instance
button = Click_btn()
# and now assign the click_btn method of that instance
btn.Bind(wx.EVT_BUTTON, button.click_btn) 
```

# python - 在 OS X 中将文件添加到 PYTHONPATH

> ID：12750582
> 
> 赞同：0
> 
> 时间：2012-10-05T16:44:05.747
> 
> 标签：python, pythonpath

好的，我正在努力做到这一点。我已经阅读了几十个网页，他们都给了我相互矛盾的信息，而且他们告诉我做的事情都没有奏效。

我有一个文件夹，里面装满了我下载的脚本，这些脚本只有在它们是 pythonpath 的一部分时才有效。我想将文件夹本身移动到默认路径中，或者暂时（不是永久地）将 /desktop/search 添加到路径中。

什么是默认路径，我将如何做后者？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:04:54.967

您可以将其添加到 python 文件的开头。

```
import sys    
sys.path.append("/Users/<username>/Desktop/search") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T18:02:48.930

规范的 UNIX 方法是确保每个脚本都有适当的 shebang 行，可能是：

```
#!/usr/bin/env python2.7 
```

然后`execute`在你的shell搜索目录中安装适当的权限（即包括权限）`PATH`，也许`/usr/local/bin`。然后你可以只用它的名字来调用一个脚本：

```
scriptname 
```

pythonic 方法是使用 Distutils/ `easy_install`/将脚本安装`pip`到 Python 实例的标准`site-packages`位置之一，然后能够调用类似以下内容的脚本：

```
python2.7 -m scriptname 
```

但这可能需要一些工作才能完成所有设置。第一种方法可能更容易。

底线是你不能真正按照你的要求做，也就是说，`python scriptname`当 scriptflle 可以在任意目录中时，你可以输入。

# forms - 如何将文本样式信息传递到数据库？

> ID：12750585
> 
> 赞同：-2
> 
> 时间：2012-10-05T16:44:16.100
> 
> 标签：forms, text, styles

我有一个表单，用户可以在其中编写文章并将其提交到数据库。然后使用 mysgli 在网站上发布这些文章（最终得到准备好的陈述：P）

我现在理想地想要拥有的东西；是用户能够做一些造型。就像我在写这篇文章一样，我可以选择将一些文本设置为“代码”。

但是我完全不知道如何做到这一点。谁能指出我正确的方向？

干杯，齐格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T16:53:38.643

这不是一个简单的问题。

你应该下定决心：

*   支持什么样的格式
*   如何呈现网页的格式

例如，您可以使用 Wiki 格式。在您的数据库条目中，您会将格式设置为文本的一部分（例如，代码块的 4 个空格缩进）。您还需要一个能够在您的站点上显示此文本以及格式信息的渲染器。

可以考虑的格式有 Wikitext、HTML+CSS、Richtext。

但是，您可能会问自己，使用现有的 Wiki 是否会更容易安装。不确定你的项目是什么。

# iphone - 模态 MFMailComposeViewController 不响应 iOS 6 中的触摸

> ID：12750586
> 
> 赞同：2
> 
> 时间：2012-10-05T16:44:18.177
> 
> 标签：iphone, ios6, mfmailcomposeviewcontroller

我的 iOS 应用程序包含整个应用程序的圆角（[在此处](https://stackoverflow.com/questions/8735969/applying-rounded-corners-for-the-whole-application)描述）

```
UIImage *overlayImg;

int offset;

if(IS_IPHONE_5) {
    overlayImg = [UIImage imageNamed:@"rounded4inch.png"];
    offset = 548;
} else {
    overlayImg = [UIImage imageNamed:@"rounded.png"];
    offset = 461;
}

CALayer *overlay = [CALayer layer];
overlay.frame = CGRectMake(0, 20, overlayImg.size.width,offset);
overlay.contents = (id)overlayImg.CGImage;
overlay.zPosition = 1;
[self.window.layer addSublayer:overlay]; 
```

但现在我的模态 MFMailComposeViewController 不响应触摸。我无法编辑输入字段、发送邮件或关闭它。它只是冻结，对触摸没有反应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:03:21.727

我有同样的行为。重新启动设备从来没有为我解决任何问题，但这次它解决了。奇怪的。

我安装了 iOS 6.0 GM，而不是无线安装。可能是GM的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:44:18.177

解决方案是在显示模态邮件编写器后隐藏图层

```
 [delegate.navigationController presentViewController:mfViewController animated:YES completion:^void() {
        CALayer* layer = (CALayer*)[delegate.window.layer.sublayers objectAtIndex:1];
        [layer setHidden:YES];
    }]; 
```

并在模态视图被解除后重新显示

```
[self dismissViewControllerAnimated:YES completion:^void() {
    CALayer* layer = (CALayer*)[delegate.window.layer.sublayers objectAtIndex:1];
    [layer setHidden:NO];
}]; 
```

# php - 致命错误：允许的内存大小为 134217728 字节已用尽（尝试分配 32 字节）

> ID：12750593
> 
> 赞同：7
> 
> 时间：2012-10-05T16:44:53.840
> 
> 标签：php

> **可能重复：**
> [在 php 中已用尽 33554432 字节的允许内存大小（尝试分配 43148176 字节）](https://stackoverflow.com/questions/415801/allowed-memory-size-of-33554432-bytes-exhausted-tried-to-allocate-43148176-byte)

执行代码时出现以下错误。

```
Fatal error: Allowed memory size of 134217728 bytes exhausted (tried to allocate 32 bytes) 
```

也试过了`ini_set('memory_limit', '128M');`，但没有奏效。我的 php.ini 文件中的内存限制为 128MB。请帮忙。

我正在添加代码。我是 php 新手，请帮我解决这个问题。

```
<?php
require_once 'lib/swift_required.php';
$hostname = '{imap.abc.com:993/imap/ssl}INBOX';
$username = 'username';
$password = 'password';

$connection = imap_open($hostname,$username,$password) or die('Cannot connect to Tiriyo: ' . imap_last_error());
    ini_set('memory_limit', '256M');

function Message_Parse($id)

{

global $connection;

    if (is_resource($connection))
    {
        $result = array
        (
            'text' => null,
            'html' => null,
            'attachments' => array(),
        );

                $structure = imap_fetchstructure($connection, $id, FT_UID);
        //print_r($structure);
//array_key_exists — Checks if the given key or index exists in the array
        if (is_array($structure) && array_key_exists('parts', $structure))
        {
            foreach ($structure->parts as $key => $part)
            {
                if (($part->type >= 2) || (($part->ifdisposition == 1) && ($part->disposition == 'ATTACHMENT')))
                {
                    $filename = null;

                    if ($part->ifparameters == 1)
                    {
                        $total_parameters = count($part->parameters);

                        for ($i = 0; $i < $total_parameters; $i++)
                        {
                            if (($part->parameters[$i]->attribute == 'NAME') || ($part->parameters[$i]->attribute == 'FILENAME'))
                            {
                                $filename = $part->parameters[$i]->value;

                                break;
                            }
                        }

                        if (is_null($filename))
                        {
                            if ($part->ifdparameters == 1)
                            {
                                $total_dparameters = count($part->dparameters);

                                for ($i = 0; $i < $total_dparameters; $i++)
                                {
                                    if (($part->dparameters[$i]->attribute == 'NAME') || ($part->dparameters[$i]->attribute == 'FILENAME'))
                                    {
                                        $filename = $part->dparameters[$i]->value;

                                        break;
                                    }
                                }
                            }
                        }
                    }

                    $result['attachments'][] = array
                    (
                        'filename' => $filename,
                        'content' => str_replace(array("\r", "\n"), '', trim(imap_fetchbody($connection, $id, ($key + 1), FT_UID))),
                    );
                }

                else
                {
                    if ($part->subtype == 'PLAIN')
                    {
                        $result['text'] = imap_fetchbody($connection, $id, ($key + 1), FT_UID);
                    }

                    else if ($part->subtype == 'HTML')
                    {
                        $result['html'] = imap_fetchbody($connection, $id, ($key + 1), FT_UID);
                    }

                    else
                    {
                        foreach ($part->parts as $alternative_key => $alternative_part)
                        {
                            if ($alternative_part->subtype == 'PLAIN')
                            {
                                echo '<h2>' . $alternative_part->subtype . ' ' . $alternative_part->encoding . '</h2>';

                                $result['text'] = imap_fetchbody($connection, $id, ($key + 1) . '.' . ($alternative_key + 1), FT_UID);
                            }

                            else if ($alternative_part->subtype == 'HTML')
                            {
                                echo '<h2>' . $alternative_part->subtype . ' ' . $alternative_part->encoding . '</h2>';

                                $result['html'] = imap_fetchbody($connection, $id, ($key + 1) . '.' . ($alternative_key + 1), FT_UID);
                            }
                        }
                    }
                }
            }
        }

        else
        {
            $result['text'] = imap_body($connection, $id, FT_UID);
        }

        $result['text'] = imap_qprint($result['text']);
        $result['html'] = imap_qprint(imap_8bit($result['html']));

        return $result;
        //echo $result;
    }

    return false;
}
 $emails = imap_search($connection,'ALL');
rsort($emails);

 foreach($emails as $email_number) {

$result = Message_Parse($email_number);
//print_r($structure);
   // echo $result['text'];
    //echo $result['html'];
    //echo $result['attachments'];

// Create the Transport
$transport = Swift_MailTransport::newInstance();
// Create the Mailer using your created Transport
$mailer = Swift_Mailer::newInstance($transport);

// Create a message
$message = Swift_Message::newInstance('Bismillahhirrahmanirraheem')
  ->setFrom(array('as@aaa.com' => 'jf faz'))
  ->setTo(array('acc@aa.com'))
  ->setBody($result['text'], 'Here is the message itself');

$result1 = $mailer->send($message);

?> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-05T16:46:17.097

我们会尽力的`ini_set('memory_limit', '256M');`

134217728 字节 = 128 MB

或者重写代码以消耗更少的内存。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-05T16:47:26.393

`128M == 134217728`，您看到的数字。

内存限制工作正常。当它说它试图分配 32 个字节时，即失败前最后一次操作请求的数量。

您是否在构建任何大型数组或读取大型文本文件？如果是这样，请记住释放您不再需要的任何内存，或将任务分解为更小的步骤。

# ruby - 如何在使用给定指令集更改数组中的每个字符串的同时遍历字符串数组？

> ID：12750604
> 
> 赞同：-1
> 
> 时间：2012-10-05T16:45:46.803
> 
> 标签：ruby, arrays

给定一个字符串数组，我想将每个字符串更改为由原始字符串中按字母顺序排序的原始字母组成的字符串。

所以，给定一个数组：

```
words = ["apple", "orange"] 
```

该方法应返回：

```
["aelpp", "aegnor"] 
```

* * *

使用时：

```
words[0].chars.sort(&:casecmp).join 
```

在数组中返回所需的字符串，所以我尝试使用：

```
words.each {|y| y.chars.sort(&:casecmp).join } 
```

但这会返回原始状态的数组。

我们说话时我正在学习 Ruby，但不明白为什么这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:49:50.297

我需要使用以下内容：

```
words.map {|y| y.chars.sort(&:casecmp).join } 
```

因为我想将我的原始数组转换为另一个数组。

# dynamics-crm - 带有搜索参数的可寻址 URL 表单？

> ID：12750605
> 
> 赞同：0
> 
> 时间：2012-10-05T16:45:49.343
> 
> 标签：dynamics-crm, dynamics-crm-2011, microsoft-dynamics

我正在开发一个“暂存”系统，其中有关个人的信息进入（单独的数据库），工作人员将处理数据以研究联系人是否已经存在。我试图弄清楚是否可以在我们的 Dynamics 2011 CRM 系统中创建可寻址的 URL，该系统填充了暂存应用程序中数据的搜索参数。基本上，我想为员工提供基于暂存数据库（自定义应用程序）中联系人的姓氏（示例）搜索联系人的最快方法。我想编写一个链接，上面写着“在 CRM 中搜索这个姓氏”，并让它打开一个新的 CRM 应用程序窗口。（所有员工都在 IE 和本地网络上）。

这可能吗？我知道我可以通过将 guid 作为参数传递来打开实体，但在这种情况下，guid 是未知的。这是为了帮助研究联系人以查看它是否存在。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:39:04.717

由于这是 CRM 中不存在的独立应用程序，您可能希望查看 SDK 并读取 CRM 中的记录。

另一种选择是将您的独立应用程序放入 CRM 中。您可以使用 JavaScript 搜索/打开记录。

如果你想走你所说的路线，你可以（有点）。您将使用 iFrame 和 PostMessage 功能将消息来回传递到 2011 表单。您必须在 CRM 表单内创建一个接收处理程序并将范围更改为父级。似乎很乏味。

我只是选择将 CRM 视为数据库后端，并通过 SDK 读取/写入您需要的内容。

# primefaces - Primefaces 4气泡图错误

> ID：12750614
> 
> 赞同：0
> 
> 时间：2012-10-05T16:46:20.433
> 
> 标签：primefaces, bubble-chart

我正在尝试将示例气泡图作为测试实现到我的代码中，然后再将其与所涉及的数据库连接。以下是我的 chartBean.java 代码：

```
package jsf;

import java.io.Serializable;
import javax.enterprise.context.Dependent;
import javax.faces.bean.ManagedBean;
import org.primefaces.model.chart.BubbleChartModel;
import org.primefaces.model.chart.BubbleChartSeries;

/**
 *
 * @author AOL
 */
@ManagedBean(name = "chartBean")
@Dependent

public class ChartBean implements Serializable { 

    private BubbleChartModel bubbleModel;

    public ChartBean() {
        createBubbleModel();
    }

    private void createBubbleModel() {
        bubbleModel = new BubbleChartModel();

        bubbleModel.add(new BubbleChartSeries("Acura", 70, 183,55));
        bubbleModel.add(new BubbleChartSeries("Alfa Romeo", 45, 92, 36));
        bubbleModel.add(new BubbleChartSeries("AM General", 24, 104, 40));
        bubbleModel.add(new BubbleChartSeries("Bugatti", 50, 123, 60));
        bubbleModel.add(new BubbleChartSeries("BMW", 15, 89, 25));
        bubbleModel.add(new BubbleChartSeries("Audi", 40, 180, 80));
        bubbleModel.add(new BubbleChartSeries("Aston Martin", 70, 70, 48));
    }
} 
```

然后我有一些可以正常工作的标准数据库东西，让我做通常的 CRUD 东西。

这是网页中包含的代码，用于尝试创建气泡图：

```
<h:form>
    <p:bubbleChart id="sample" value="#{chartBean.bubbleModel}" xaxisLabel="Price" yaxisLabel="Labels"
                title="Sample Bubble Chart" style="width:400px;height:300px" />
</h:form> 
```

当我尝试在没有该代码的情况下访问该页面时，它可以正常工作，但是，当我添加该行时，它会返回以下错误：

> /template.xhtml @45,84 value="#{chartBean.bubbleModel}"：类 'jsf.ChartBean' 没有属性 'bubbleModel'。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T16:05:16.703

您必须实现一个返回字段“bubbleModel”的方法。 `public BubbleChartModel getBubbleModel(){ return bubbleModel; }`

# java - EL中的Spring webflow完整查询字符串

> ID：12750618
> 
> 赞同：5
> 
> 时间：2012-10-05T16:46:31.630
> 
> 标签：java, spring, spring-mvc, spring-webflow-2

简而言之，如何在 webflow 视图 jsp 中使用 EL 获取完整的查询字符串？这就是我想要做的：

```
<span class="forgot-password">
  <a href="forgotPasswordRequest?<%=request.getQueryString() %>">
    <spring:message code="screen.welcome.link.forgotPassword" />
  </a>
</span> 
```

除了我想使用 EL 而不是 scriptlet `<%=request.getQueryString() %>`。使用 获取任何单个参数似乎很容易`${param.someParameterName}`，但我想要整个事情。更具体地说，我使用[CAS](http://www.jasig.org/cas)作为 SSO 提供程序。为了进行身份验证，应用程序将使用包含参数的查询字符串将其登录重定向到 CAS，该参数`service`是身份验证成功后要返回的 URL。像这样的东西：

```
?service=http%3A%2F%2Fmysite.com%3A9080%2Fwelcome 
```

我的 CAS 登录页面有一个忘记密码 webflow 的链接。我需要将该服务参数传播到其他网络流。所以我可以做这样的事情：

```
<span class="forgot-password">
  <a href="forgotPasswordRequest?service=${param.service}">
    <spring:message code="screen.welcome.link.forgotPassword" />
  </a>
</span> 
```

但后来我失去了所有的 URL 转义。此外，如果将来我想保留其他参数，它们也会丢失。

scriptlet 目前可以工作，但它很难看，我不喜欢在我的演示文稿中包含代码（因为这是真正的 java 代码），即使它很微不足道。EL 无疑是一个更优雅的解决方案。

我查看了[spring 文档](http://static.springsource.org/spring-webflow/docs/2.3.x/reference/html/ch04s04.html)中列出的所有*特殊 EL 变量*，但仍然无法找到获取完整 queryString 的方法。

*- - - - - - - - - - - - - - - - 更新 - - - - - - - - - ---------------*

好的，所以我正在做一些基础......原来`ExternalContext`接口有一个`getNativeRequest()`这是实际的`HttpServletRequest`对象。从那里我可以得到完整的查询字符串：

```
externalContext.getNativeRequest().getQueryString() 
```

所以现在我假设由于有一个名为 externalContext 的*特殊 EL 变量*，我会这样做：

```
${externalContext.nativeRequest.queryString} 
```

正确的？错误的！事实证明，该`externalContext`变量在 JSP 页面中不可用。有谁知道为什么？但是，还有`flowRequestScope`，它可用于 JSP 并且有一个`getExternalContext`方法，所以现在我可以这样做：

```
${flowRequestScope.externalContext.nativeRequest.queryString} 
```

酷，这行得通……但为什么有必要呢？为什么只有一些*特殊 EL 变量*被推送到 JSP 页面，为什么其中一些变量会发生变化（`viewScope`似乎它的所有值都提升到了根级别，所以 viewScope.commandName 在 JSP 中被引用为 ${commandName}艾尔）？我一定遗漏了 WebFlow 工作方式中的一些基本内容。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T18:29:30.560

在 webflow 中，范围图本质上是为了便于区分服务器上的控制逻辑。在直接的 Spring MVC 中，这将是您的控制器，但在 webflow 中，您的流程或多或少直接用于此目的。实际上，您放入范围映射中的所有内容都会汇总到请求属性中以在 JSP 上使用，但请求范围除外，该范围在流程返回时被显式销毁。这就是为什么 viewScope.commandName 在 JSP 中可用的原因——因为它与其他范围一样，被汇总到一个大型请求属性映射中，然后将其放入请求中以供您的 JSP 访问。

不同之处在于首先使用寿命较低的范围。较低的作用域总是优先于寿命较长的作用域，就像 Java 中的局部变量优先于同名的类级变量一样。因此，您需要确保使用唯一的参数名称以防万一，以免发生冲突。

如果您确实需要该值，最简单的方法是在流程中使用 set 标记将该值设置在适当的范围内，以便您更轻松地命名它，例如

```
<set name="viewScope.currentService" value="externalContext.nativeRequest.queryString" /> 
```

这样，您就可以在视图范围内使用 EL 变量“currentService”。您可能希望使用 on-render 或 on-entry 将此值存储到您的视图中。对于这个特定的值，我可能会使用 on-render，因为它可能会根据视图的呈现方式而改变，但无论哪种方式都可能无关紧要。

# spring - 为 JBOSS 容器中的一个应用程序指定外部 log4j 属性文件

> ID：12750621
> 
> 赞同：1
> 
> 时间：2012-10-05T16:46:36.627
> 
> 标签：spring, logging, jboss, log4j, classloader

我一直在这个房子周围，所以会很感激一些帮助。我试图让我的应用程序在 JBoss 中部署为一个耳朵，以使用`log4j.properties`位于应用程序外部的文件。在同一个 JBoss 容器中部署了其他应用程序，我不想影响它们。我尝试了多种方法，但无法完全发挥作用。欢迎任何建议。

以下是我尝试过的一些无效的方法：

1.  将 log4j.properties 添加到 JBoss 类路径。由于与 JBoss log4j 冲突而无法正常工作，详见[此处](http://majikshoe.blogspot.ie/2010/01/log4j-and-jboss.html)。

2.  通过添加到 JBoss 启动脚本来指定`log4j.properties`启动时的文件位置。`-Dlog4j.configuration=file:/C:\.....\log4j.properties`这是不成功的，因为它从容器中的其他应用程序中获取了日志语句。

3.  尝试在 EAR 文件中指定WAR 文件的`log4j.properties`位置，`web.xml`但我在上面第 1 步中的链接中详细说明了相同的错误。

关于如何使它工作的任何想法？JBoss EAP 5.1、Spring 3.1.1、log4j 1.2.16。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:32:35.443

这是我的做法。在 web.xml 中：

```
<context-param>
        <param-name>log4jConfigLocation</param-name>
        <param-value>classpath:log4j.applicationName.properties</param-value>
</context-param>
<context-param>
     <param-name>log4jRefreshInterval</param-name>
     <param-value>10000</param-value>
</context-param>
    <listener>
        <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
    </listener> 
```

请注意使用 log4j.properties 以外的文件名。不知道这是否会减轻您的冲突，但可能会。当然，这个配置的问题是你在启动的前 10 秒内没有日志。这可能很重要。

# android - 从列表视图或复选框中保存选定的值

> ID：12750622
> 
> 赞同：-2
> 
> 时间：2012-10-05T16:46:42.993
> 
> 标签：android, arrays, eclipse, listview, checkbox

我想知道是否有人可以在正确的方向上帮助我。我如何保存用户从列表视图项目或复选框中选择的内容？切换视图时，不会保存选定的值。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T16:54:58.450

不完全确定您想要做什么 SharedPreferences 始终是一种简单的持久化方法。请注意，这些值在应用程序的生命周期之外仍然有效，因此您可能希望在再次创建应用程序时删除它们（例如在 Application 类的 onCreate 期间）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:55:12.247

查看[SharedPreference](http://developer.android.com/reference/android/content/SharedPreferences.html)类。这是说这种话的标准方式。

# mysql - Entity Framework Linq 查询为 MySQL 数据库返回不正确的值

> ID：12750624
> 
> 赞同：1
> 
> 时间：2012-10-05T16:46:43.397
> 
> 标签：mysql, linq, entity-framework

我有一个查询：

```
 var cams = (from c in db.cameras
                        join s in db.camera_sites on c.camera_site_id equals s.id
                        join o in db.servers on s.server_id equals o.id
                        where (c.enabled == "yes"
                        && s.enabled == "yes"
                        && o.enabled == "yes" 
                        && o.type == "hosted"
                        && o.server_method == "webservices"
                        && c.account_id == accountId)
                        select new EventCamera_Named { Camera = c, SiteName = s.name, ServerName = o.name }).ToList(); 
```

问题是选择的 SiteName 与 Camera.name 相同

生成的sql是：

```
 SELECT
    `Filter1`.`id`, 
    `Filter1`.`account_id`, 
    `Filter1`.`camera_site_id`, 
    `Filter1`.`enabled`, 
    `Filter1`.`name`, 
    ...,
    `Filter1`.`name` AS `name1`, 
    `Extent3`.`name` AS `name2`

    FROM (SELECT
    `Extent1`.`id`, 
    `Extent1`.`account_id`, 
    `Extent1`.`camera_site_id`, 
    `Extent1`.`enabled`, 
    `Extent1`.`name`, 
    ..., 
    `Extent2`.`id` AS `id1`, 
    `Extent2`.`account_id` AS `account_id1`, 
    `Extent2`.`server_id`, 
    ...
    FROM `cameras` AS `Extent1` INNER JOIN `camera_sites` AS `Extent2` ON `Extent1`.`camera_site_id` = `Extent2`.`id`
    WHERE ('yes' = `Extent1`.`enabled`) AND ('yes' = `Extent2`.`enabled`)) AS `Filter1` INNER JOIN `servers` AS `Extent3` ON `Filter1`.`server_id` = `Extent3`.`id`
    WHERE ((('yes' = `Extent3`.`enabled`) AND ('hosted' = `Extent3`.`type`)) AND ('webservices' = `Extent3`.`server_method`)) AND (`Filter1`.`account_id` = 39884476) 
```

如何重写我的查询返回正确的值以及导致它混淆的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:16:10.720

当我`enabled`直接在 db 之后移动检查时，它引用了它生成的 sql 是正确的。

```
 var cams = (from c in db.cameras 
                    where c.enabled == "yes"
                    join s in db.camera_sites on c.camera_site_id equals s.id 
                    where s.enabled == "yes"
                    join o in db.servers on s.server_id equals o.id
                    where (o.enabled == "yes" 
                    && o.type == "hosted"
                    && o.server_method == "webservices"
                    && c.account_id == accountId)
                    select new EventCamera_Named { Camera = c, SiteName = s.name, ServerName = o.name }).ToList(); 
```

# ios - 从 nsdate 获取总小时数

> ID：12750626
> 
> 赞同：0
> 
> 时间：2012-10-05T16:46:49.357
> 
> 标签：ios, nsdate

我只是在寻找一种从 nsdate 计算总小时数的方法（与 .net 中的 TotalHours 方法相同）

示例：11:30:30 -> 11.5 小时

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T17:28:51.120

用 . 分隔小时和分钟`NSDateComponents`。

```
NSCalendar *calendar = [NSCalendar currentCalendar];
NSDateComponents *components = [calendar components:(NSHourCalendarUnit | NSMinuteCalendarUnit) fromDate:[NSDate date]];
NSInteger hour = [components hour];
NSInteger minute = [components minute]; 
```

然后用它来求总和。

```
double totalHours = ((double)hour + (double)minute/60); 
```

# django - Django 的 set_cookie 中的“路径”参数有什么作用？

> ID：12750628
> 
> 赞同：1
> 
> 时间：2012-10-05T16:46:59.957
> 
> 标签：django, cookies

从[djangoproject](https://docs.djangoproject.com/en/dev/ref/request-response/)， HttpResponse.set_cookie(key, value='', max_age=None, expires=None, path='/', domain=None, secure=None, httponly=True)

没有很好地描述路径变量的作用。我想知道它的作用以及是否需要设置它。它与url解析器有关系吗？

我的网址如下所示：

*   /一种
*   /a/b
*   /a/c

我没有任何根。我应该将路径设置为 '/a' 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T16:48:49.970

[http://en.wikipedia.org/wiki/HTTP_cookie#Domain_and_Path](http://en.wikipedia.org/wiki/HTTP_cookie#Domain_and_Path)

这是一种定义应该为站点的哪些部分设置 cookie 的方法（并且是 HTTP 的一部分，而不是专门的 Django）。因此，如果您希望为整个网站发回 Cookie，请将路径保留`/`为`/forum`路径。

具体到您的问题，仅仅因为您没有任何视图/网址`/`，您仍然可以设置 cookie 路径，`/`使其在站点范围内工作。如果您网站上的所有内容总是 after `/a`，那么您也可以使用它并且您不会注意到差异。

# groovy - Groovy 中的闭包

> ID：12750632
> 
> 赞同：1
> 
> 时间：2012-10-05T16:47:11.417
> 
> 标签：groovy

我是 Groovy 的新手。我执行以下 Groovy 代码：

```
myList=[234, 34, "Stackoverflow", 3.14]

myList=myList.collect {if (it instanceof Integer) it*it}     

println myList 
```

它输出：

```
[54756, 1156, null, null] 
```

在我看来，它不应该改变字符串值。当我将第二行更改为：

```
myList=myList.collect {if (it instanceof Integer) it*it else it=it} 
```

它按我的预期工作：

```
[54756, 1156, Stackoverflow, 3.14] 
```

我想知道这背后的逻辑是什么！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T16:50:47.750

由于您的第一个版本中没有`else`子句，`null`结果是。

第二个版本也应该像这样工作：

```
myList.collect {if (it instanceof Integer) it * it else it} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T16:52:40.867

我猜原因是因为您没有指定第一个闭包的结果，以防元素不是 Integer 并且默认为 null

```
​println a()

def a() {
   if (1==2) "Hello!"
}​

>> null 
```

# hibernate - Grails withNewSession 不刷新

> ID：12750637
> 
> 赞同：2
> 
> 时间：2012-10-05T16:47:28.180
> 
> 标签：hibernate, grails, grails-orm, hibernate-session

在 grails 域中实现了`beforeDelete`如下

```
class Shop {
    def beforeDelete() {
        Shop.withNewSession {
            Client.findAllByShop(this)*.shop = null                 
        }    
    }
} 
```

但是客户商店的空值不会保存到数据库中。

如果我添加手动会话刷新

```
class Shop {
    def beforeDelete() {
        Shop.withNewSession { s2->
            Client.findAllByShop(this)*.shop = null         
            s2.flush()  
            s2.clear()
        }
    }
} 
```

它有效，客户商店值在数据库中为空。

这是 Grails 错误还是我误解了文档？不是说`withNewSession`自动刷机吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-13T04:08:54.170

文档（向下滚动到[此处](http://grails.org/doc/latest/guide/GORM.html#eventsAutoTimestamping)`beforeDelete`的示例）似乎暗示不需要刷新或清除会话。

[Burt Beckwith](https://stackoverflow.com/users/160313/burt-beckwith)还在 Grails 邮件列表（请参阅[此处](http://grails.1312388.n4.nabble.com/Does-withNewSession-flush-when-done-td2287176.html)的线程）上指出手动调用`flush()`并且在闭包`clear()`中不是必需的。`withNewSession`

话虽如此，从 Grails 2.2.1 开始似乎确实有一个错误报告（请参阅[此处](http://jira.grails.org/browse/GRAILS-9946)的详细信息） 。`withNewSession`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:28:28.140

`withNewSession`为您提供一个新的 Hibernate 会话，但它不一定是事务性的。听起来您想使用`withTransaction`而不是`withNewSession`.

# java - 有向图最小割库

> ID：12750641
> 
> 赞同：0
> 
> 时间：2012-10-05T16:47:52.310
> 
> 标签：java, algorithm, scala, graph

我正在寻找一个为有向图实现最小切割的 Scala（或 Java）图形库。

有没有你推荐我使用的图书馆？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:08:01.363

[JUNG](http://jung.sourceforge.net/)有一个（用于 Java）。

检查文档 -> JUNG API Javadoc。该`edu.uci.ics.jung.algorithms.flows`包有[一个](http://jung.sourceforge.net/doc/api/index.html?edu/uci/ics/jung/algorithms/flows/EdmondsKarpMaxFlow.html)带有`getMinCutEdges()`方法的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T18:20:13.987

我建议将[Tinkerpop Blueprints](http://blueprints.tinkerpop.com/ "Tinkerpop 蓝图")与[JUNG](http://jung.sourceforge.net/ "荣格")结合使用，因为 Blueprints 具有非常好的图形界面和许多用于图形 I/O 和遍历的 Helpers，而 JUNG 已经实现了很多算法。

Tinkerpop 包含一个名为的类[`com.tinkerpop.blueprints.pgm.oupl.jung.GraphJung`](https://github.com/tinkerpop/blueprints/wiki/JUNG-Ouplementation "Tinkerpop 蓝图中的 JUNG")，以便您可以`Graph`在 JUNG 中使用任何 Tinkerpop。

例如：

```
Graph graph = ... // construct a particular Blueprints graph implementation
PageRank<Vertex,Edge> pageRank = new PageRank<Vertex, Edge>(new GraphJung(graph), 0.15d);
pageRank.evaluate(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T06:43:30.997

看看[Scala 图](https://www.assembla.com/spaces/scala-graph/wiki)。它看起来不像在 API 中提供最小切割，但您可以使用它来实现您需要的任何图形算法。

# php - 如何在下面的示例中发布隐藏的输入

> ID：12750645
> 
> 赞同：0
> 
> 时间：2012-10-05T16:48:18.147
> 
> 标签：php, mysqli

我在下面有一个表格，其中包含问题编号、回复和答案。假设该表如下所示：

```
QuestionNo   Reply         Answer

1            Single        A D
2            Multiple      B E F
3            Multiple      C
4            Single        D H 
```

我想做的是 $_POST 这些值，然后我可以将它们插入数据库。

我想将每个答案插入到他们的相关问题中，所以我创建了一个 for 循环。但我的问题是，我如何编写 switch 语句，以便为每个问题发布正确的答案？

下面是 for 循环和将插入答案值的 mysqli 代码，我只需要帮助编写 switch 语句：

```
 $i = 0;
    $c = count($_POST['gridValues']);  //count each table row

    for($i = 0;  $i < $c; $i++ ){

   //switch statement for each answer post goes here

    }

   $answersql = "INSERT INTO Answer (Answer) 
    VALUES (?)";

      if (!$insertanswer = $mysqli->prepare($answersql)) {
      // Handle errors with prepare operation here
    }  

    $insertanswer->bind_param("s", $_POST[''][$i]);

        $insertanswer->execute();

        if ($insertanswer->errno) {
          // Handle query error here
        }

        $insertanswer->close();

    } 
```

每个答案都有自己的名称属性，有 30 个不同的答案，下面是如何发布它的示例：

```
$_POST['answerAvalue']  //Answer A
$_POST['answerBvalue']  //Answer B
$_POST['answerCvalue']  //Answer C
$_POST['answerDvalue']  //Answer D

....

$_POST['answerTruevalue']  //Answer True
$_POST['answerFalsevalue'] //Answer False
$_POST['answerYesvalue']   //Answer Yes
$_POST['answerNovalue']    //Answer No 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:52:45.347

疯狂的问题，但我有一个建议给你，改变这个：

```
switch ($_POST['reply'][$i]){ 

case "single": 
$selected_reply = "Single"; 
break; 

case "multiple": 
$selected_reply = "Multiple"; 
break; 

default: 
$selected_reply = ""; 
break; 

} 
```

对此：

```
$selected_reply = "";
if (isset($_POST['reply'][$i])) {
    $selected_reply = ucfirst($_POST['reply'][$i]);
} 
```

# c - C 指针问题

> ID：12750651
> 
> 赞同：3
> 
> 时间：2012-10-05T16:48:47.223
> 
> 标签：c, sorting, pointers, struct

这是对这个问题的跟进：

[用指针对C中的结构进行排序](https://stackoverflow.com/questions/12738327/sorting-structs-in-c-with-pointers)

我已经修改了修改后的代码，我认为排序应该可以工作，但我感觉我没有正确使用指针。我的 printf 语句没有显示在控制台上，它们在评论中被标记。

我是 C 新手，所以这可能很明显，但我只是不知道如何在打印语句不打印时进行调试。

当前编译器警告：

```
Q1.c: In function 'generate':
Q1.c:28: warning: implicit declaration of function 'time'
Q1.c:35: warning: implicit declaration of function 'dupe'
Q1.c: In function 'output':
Q1.c:61: warning: implicit declaration of function 'sort'
Q1.c: At top level:
Q1.c:68: warning: conflicting types for 'sort'
Q1.c:61: warning: previous implicit declaration of 'sort' was here
Q1.c: In function 'sort':
Q1.c:82: warning: implicit declaration of function 'deallocate'
Q1.c: At top level:
Q1.c:90: warning: conflicting types for 'deallocate'
Q1.c:82: warning: previous implicit declaration of 'deallocate' was here 
```

代码是：

```
#include <stdio.h>
#include<stdlib.h>
#include<math.h>

int SIZE = 10;
static char c[] = "------------------------------\n";

struct student{
    int id;
    int score;
};

struct student* allocate(){
     /*Allocate memory for ten students*/
     struct student *s = malloc(SIZE* sizeof*s);
     /*return the pointer*/
     return s;
}

void generate(struct student* students){
    /*Generate random ID and scores for ten students, ID being between 1 and 10, scores between 0 and 100*/
    srand((unsigned int)time(NULL));
    int id[SIZE];
    int y;

    for (int i = 0; i < SIZE; i++){
        do{
        y = rand() % SIZE + 1;
        } while(dupe(id, i, y));
        id[i] = y;
    }

    for (int j = 0; j < SIZE; j++){
        students[j].id = id[j];
        students[j].score = rand() % 101;
        printf("ID: %d\tScore: %d\n", students[j].id, students[j].score);
    }
}

int dupe(int id[], int SIZE1, int i){
    for (int x = 0; x < SIZE1; x++){
        if(id[x] == i)
            return 1;
    }
    return 0;
}

void output(struct student* students){
     /*Output information about the ten students in the format:
              ID1 Score1
              ID2 score2
              ID3 score3
              ...
              ID10 score10*/
    sort(students);
    printf("post sort students.\n %s", c);
    for(int x = 0; x < SIZE; x++){
        printf("ID: %d\tScore: %d\n", students[x].id, students[x].score); //print stmt not showing
    }
}

void sort(struct student* students){
    struct student *sd = allocate();

    struct student *stud;

    for(int i = 0; i < SIZE; i++){
        stud = &students[i];
        sd[stud->id -1] = *stud;
    }
    printf("sorted SD.\n %s", c);
    for(int x = 0; x < SIZE; x++){
        printf("ID: %d\tScore: %d\n", sd[x].id, sd[x].score); //print stmt not showing
    }
    students = sd;
    deallocate(sd);
}

void summary(struct student* students){
     /*Compute and print the minimum, maximum and average scores of the ten students*/

}

void deallocate(struct student* stud){
     /*Deallocate memory from stud*/
    free(stud);
}

int main(){
    struct student* stud = NULL;
    /*call allocate*/
    stud = allocate();
    /*call generate*/
    generate(stud);
    /*call output*/
    printf("%s", c);
    output(stud);
    /*call summary*/

    /*call deallocate*/
    deallocate(stud);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-05T16:52:05.337

“我的 printf 语句没有显示在控制台上”

你确定你的程序在它到达那一步之前没有崩溃吗？

既然`stud`有类型`student*`，`&stud`就有类型`student**`，但是你将它传递给期望的函数`student*`......只是传递`stud`，而不是`&stud`。在编译器中打开警告，它会告诉你这些事情。

```
assert(s != 0); 
```

这是不恰当的做法。`assert`应该只用于测试逻辑错误，而不是用于正常故障情况，例如内存不足。

```
struct student *s = malloc(size*(sizeof(struct student))); 
```

这没关系，但我建议

```
struct student* s = malloc(size * sizeof *s); 
```

因为它不那么冗长并且不依赖于类型。

```
static int size = 10; 
```

在 C 中，这不是一个常量（并且不会通过添加`const`关键字而变为常量）。由于您使用它作为本地数组的大小，因此您调用了并非在所有 C 编译器中都可用的 VLA（可变长度数组）功能。在C中，这样做更正常

```
#define SIZE 10 
```

或者

```
enum { SIZE = 10 }; 
```

这会给你带来麻烦：

```
ID being between 1 and 10 
```

（除了它应该说“1 和 SIZE”）。您分配一个 SIZE 元素数组，然后使用您的学生 ID 作为索引，但只有 0..SIZE-1 是有效索引...... SIZE 不是。因此，您需要按 索引`student->id - 1`，或使您的 ID 为 0 索引。

```
 y = rand() % size + 1;
    while(dupe(id, i, y)){
        y = rand() % size + 1;
    } 
```

可以写成

```
do
{
    y = rand() % size + 1;
} while(dupe(id, i, y)); 
```

但是，我认为这并不能满足您的要求。您确保学生 ID 与索引不同，但没有理由这样做。您要保证的是，没有两个学生 ID 是相同的，但您并没有这样做。一种可能性是扫描所有先前分配的 ID，如果已经分配，​​则选择另一个。另一种方法是将所有 ID 1 .. SIZE 放入一个数组中，然后随机将项目从数组中拉出，将数组的顶部元素移动到该插槽中，并将数组的大小减小 1，直到你'我清空了数组并分配了所有的 ID。

```
(students + j)->id 
```

C 有一些等价规则：`*(x + y)`===`x[y]`和`x->y`=== `(*x).y`。所以，`(students + j)->id`=== `(*(students + j)).id`=== `students[j].id`，这是写它的首选方式。

```
students = &sd; 
```

这个语句没有做任何事情，因为`students`它后面没有使用，它是一个类型错误（`&sd`has type `student**`），如果你打开警告，你的编译器会再次警告你（-Wall for gcc）。

您在这里尝试做的是更改呼叫者中的学生，但这并没有这样做。您需要传递学生的地址（即，有一个`struct student** pstudents`参数，然后将其取消引用到 get `students`），或者更好`return`的是新数组（在您完成使用之前**不得释放）。**

这个问题清单不一定是详尽的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T17:13:13.200

我会指出我在程序中可以找到的关于指针使用的一些错误，

里面`main`，

你应该打电话给`generate()`，`output()`

```
generate(stud);
output(stud); 
```

在`sort`,

`students = &sd;`应该`students = sd;`改为

在`output`,

`sort(&students);`应该`sort(students);`改为

# php - 如何使用 jQuery 在 CakePHP 中使用淡入淡出效果？

> ID：12750661
> 
> 赞同：0
> 
> 时间：2012-10-05T16:49:33.213
> 
> 标签：php, jquery, cakephp, cakephp-2.0

我是 JavaScript 新手，我发现它在 CakePHP 中特别令人困惑。

我有一个 AJAX 调用，它获取另一个页面并将其放在一个 div 中。这有效，但我希望它淡入而不是仅仅出现。

这是我到目前为止的代码：

```
$this->Js->get('#load_items');
$this->Js->event('click', $this->Js->request(
    array('action' => 'plain_items'),
    array(
        'async' => true, 
        'update' => '#items',
        'complete' => 'onComplete'
    )
));
$this->Js->event('onComplete', $this->Js->effect('fadeIn'));

echo '<div id="items"></div>';
echo $this->Form->submit('Load Items', array('id' => 'load_items')); 
```

获取“plain_items”视图并将其加载到“items”div 中没有问题，但我无法让它在加载时淡化它。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:06:45.910

$this->Js this包含#load_items的对象，如果你想淡入div#items，那么你需要取这个div的oject然后淡入..见下面的例子

```
$this->Js->event('click', $this->Js->request(
    array('action' => 'plain_items'),
    array(
        'async' => true, 
        'update' => '#items',
        'before' => $this->Js->get('#items')->effect('fadeOut', array('buffer' => false)),
        'complete' => $this->Js->get('#items')->effect('fadeIn', array('buffer' => false))
    )
)); 
```

# perl - 通过 cpan 安装 perl 模块 Net::SSLeay

> ID：12750662
> 
> 赞同：12
> 
> 时间：2012-10-05T16:49:37.083
> 
> 标签：perl, email, openssl, sendmail, cpan

我试图通过 cpan 安装 Net::SSLeay 来安装 Email::Send::SMTP::TLS 但我收到以下错误。

```
cpan[5]> install Net::SSLeay
Running install for module 'Net::SSLeay'
Running make for M/MI/MIKEM/Net-SSLeay-1.49.tar.gz
  Has already been unwrapped into directory /home/ubuntu/.cpan/build/Net-SSLeay-1.49-VDZ57t
Could not make: Unknown error
Running make test
  Can't test without successful make
Running make install
  Make had returned bad status, install seems impossible 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-05T17:20:34.613

在ubuntu上，试试

```
sudo apt-get install libnet-ssleay-perl
sudo apt-get install libcrypt-ssleay-perl 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-10-01T20:13:45.467

在 Ubuntu 12.04 中

```
sudo apt-get install libssl-dev 
```

这为我解决了这个问题

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-08-19T20:27:06.210

在 Centos 上，这是我的解决方案：

```
sudo yum install perl perl-CPAN perl-Net-SSLeay perl-IO-Socket-SSL 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-05T17:15:39.127

尝试手动运行该过程。从 CPAN 提示符：

1.  键入`look Net::SSLeay`进入解压目录中的 shell
2.  `perl Makefile.PL`
3.  `make`
4.  `make test`
5.  `make install`

如果有“README”或“INSTALL”文件，也请尝试阅读这些文件。如果您遇到任何错误，您可以附加您的问题，也许有人可以提供帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-07-22T19:30:29.427

Centos 6.5：

```
yum install perl-Net-SSLeay 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-12T16:25:12.130

在 Arch Linux 上：`pacman -S perl-net-ssleay`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-02T21:05:55.837

尝试安装下面列出的两个依赖项。它应该可以解决您遇到的问题。

```
sudo apt-get install libnet-ssleay-perl
sudo apt-get install libio-socket-ssl-perl 
```

# c# - c# SOAP 客户端到具有多个命名空间的 PHP Web 服务

> ID：12750665
> 
> 赞同：0
> 
> 时间：2012-10-05T16:49:49.220
> 
> 标签：c#, php, web-services, soap

我们正在构建通过肥皂网络服务与另一个应用程序通信的应用程序。另一个应用程序是由另一家公司使用 PHP 开发的。我们的应用程序是他们网络服务的客户端。

我们有测试环境，我们连接了我们的应用程序并且一切正常。然后我们转移到生产环境。但是它们的 web 服务命名空间是根据 URL 自动生成的，因此 test 和 prod env 中的命名空间不匹配。

我再次使用 svcutil 生成 SOAP 客户端用于生产，但是当我将解决方案部署到测试环境时，我无法连接到他们的 Web 服务。他们也不愿意改变任何事情。

是否可以在运行时根据端点地址更改 Web 服务客户端的命名空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:14:07.737

据我所知，您不能在运行时更改命名空间。肯定会起作用的明显选择可能是在编译时进行，例​​如；

```
#if PRODUCTION
[ServiceContract(Namespace = "MyProduction Namespace", Name = "PhpServiceContract")]
#else
[ServiceContract(Namespace = "MyTest Namespace", Name = "PhpServiceContract")]
#endif 
```

如果您在多个地方使用它并且不想`#if`到处使用，只需将其移至常量即可；

```
[ServiceContract(Namespace=Definitions.CURRENT_NAMESPACE, Name = "PhpServiceContract")] 
```

然后在一个地方定义它；

```
public static class Definitions
{
#if PRODUCTION
    public const string CURRENT_NAMESPACE = "MyProduction Namespace";
#else
    public const string CURRENT_NAMESPACE = "MyTest Namespace";
#endif
}; 
```

# progress-4gl - 通过继承表序列索引抓取记录

> ID：12750669
> 
> 赞同：1
> 
> 时间：2012-10-05T16:49:56.817
> 
> 标签：progress-4gl, openedge

我对 Progress 有点陌生，并且发现很难查找一些现有的问题解决方案，因为关键字是如此模棱两可。

我离题了，有没有办法通过表内的序列索引访问表中的记录，而无需创建字段并手动跟踪它？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T17:12:54.727

虽然这不是您问题的直接答案，

1）每个表都有一个ROWID和RECID值，可以直接找到它，无需添加新字段。它的价值会随着时间的推移而改变，所以最好只在一个会话中使用它。因此，一旦您知道感兴趣的记录，您的程序就可以直接返回到该记录，而无需进行可能很慢的搜索。

2）Progress 还添加了“table-scan”短语，它以 db 顺序返回记录。我忘记了它添加的版本，所以它可能在您的平台上可用，也可能不可用。

3) 另一种可能的方法是创建一个 TT 并使用指向主数据库的链接填充它，然后按您想要的顺序对其进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T17:01:35.450

没有这样的能力。您需要创建一个字段来捕获您认为构成固有顺序的任何属性。

# jquery - jqTransform id 选择器不起作用

> ID：12750671
> 
> 赞同：0
> 
> 时间：2012-10-05T16:50:00.027
> 
> 标签：jquery, html, selector, jqtransform

请查看这些 html 代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Script-Type" content="text/javascript" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="gmapkey" content="" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />

    <title></title>

    <link rel="stylesheet" href="jqtransformplugin/jqtransform.css" type="text/css" media="all" />
    <link rel="stylesheet" href="demo.css" type="text/css" media="all" />

    <script type="text/javascript" src="requiered/jquery.js" ></script>
    <script type="text/javascript" src="jqtransformplugin/jquery.jqtransform.js" ></script>
    <script language="javascript">
        $(document).ready(function () {
            $('#abc').jqTransform({imgPath:'jqtransformplugin/img/'});
              });
    </script>

</head>
<body>

    <form class="formTransform" action="post.php" method="POST">
        <div class="rowElem"><label>Input Text:</label><input type="text" name="inputtext"/></div>
        <div class="rowElem"><label>Input Password:</label><input type="password" /></div>
        <div class="rowElem"><label>Checkbox: </label><input type="checkbox" name="chbox" id=""></div>
        <div class="rowElem"><label>Radio :</label> 
            <input type="radio" id="" name="question" value="oui" checked ><label>oui</label>
            <input type="radio" id="" name="question" value="non" ><label>non</label></div>
        <div class="rowElem"><label>Textarea :</label> <textarea cols="40" rows="12" name="mytext"></textarea></div>

        <div class="rowElem">
            <label>Select :</label>
            <select name="select">
                <option value="">1&nbsp;</option>
                <option value="opt1">2&nbsp;</option>
            </select>
        </div>
        <div class="rowElem">
            <label>Select Redimentionné :</label>
            <select name="select2" >
                <option class ="abc" value="opt1">Big Option test line with more wordssss</option>
                <option value="opt2">Option 2</option>
                <option value="opt3">Option 3</option>
                <option value="opt4">Option 4</option>
                <option value="opt5">Option 5</option>
                <option value="opt6">Option 6</option>
                <option value="opt7">Option 7</option>
                <option value="opt8">Option 8</option>
            </select>
        </div>

        <div class="rowElem"><label>Submit button:</label><input id="abc" type="submit" value="Envoyer" /></div>
        <div class="rowElem"><label>Reset button:</label><input type="reset" value="Annuler" /></div>
        <div class="rowElem"><label>Input button:</label><input type="button" value="bouton" /></div>

    </form>

</body>
</html> 
```

为什么

```
 $(document).ready(function () {
        $('#abc').jqTransform({imgPath:'jqtransformplugin/img/'});
          }); 
```

不工作！
但是这个

```
 $(document).ready(function () {
        $('.formTransform').jqTransform({imgPath:'jqtransformplugin/img/'});
          }); 
```

作品！

那个 jquery 选择器有什么问题？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T06:45:51.103

看插件的代码，你必须用一个不是你选择的表单来调用jqTransform。
顺便说一句，插件是：“放弃项目。说再见。” （jcamenisch 于 7 个月前创作）
插件代码：

```
$.fn.jqTransform = function (options) {
var opt = $.extend({}, defaultOptions, options);

/* each form */
return this.each(function () {
  var $form = $(this);
  if ($form.hasClass('jqtransformdone')) {
    return;
  }
  $form.addClass('jqtransformdone');

  $('input:submit, input:reset, input[type="button"]', this).jqTransInputButton(); 
```

# javascript - 覆盖缩放快捷方式 (control + / control -) 在 Internet Explorer 9 中不起作用

> ID：12750674
> 
> 赞同：3
> 
> 时间：2012-10-05T16:50:34.003
> 
> 标签：javascript, internet-explorer, internet-explorer-9, overriding, keyboard-shortcuts

我正在尝试覆盖 Internet Explorer 9 中的缩放快捷方式。使用 jquery，我有一个事件处理程序来处理文档上的 keydown 事件，如下所示：

```
$(document).keydown(function(event)
                    {
                       event.preventDefault();
                    }); 
```

这应该禁用浏览器中的所有快捷方式并适用于大多数浏览器（对于我尝试过的快捷方式）。像 ctrl-s 这样的快捷方式被禁用，即使在 Internet Explorer 9 中也是如此。但 Internet Explorer 9 的缩放 (ctrl + / ctrl -) 仍然有效。有什么办法可以禁用这个快捷方式吗？我认为 IE9 实现了更标准的处理快捷方式的方法，而不是使用旧 IE 版本中必须执行的 event.returnValue 和 window.event。

PS。我知道禁用所有快捷方式会对用户体验产生一定的影响。但是让我们假设在这种特殊情况下它并不重要。

# jquery - 如果等于这个或这个

> ID：12750676
> 
> 赞同：0
> 
> 时间：2012-10-05T16:50:39.350
> 
> 标签：jquery

我敢肯定这是一个简单的答案，我只是想不通！

我需要检查一个变量是否等于多个事物：

```
if ((dls == '10:0') && (dls == '10:3') && (dls == '11:0') && (dls == '11:3')){
    stamp = 'PM';
}; 
```

测试页面： http: [//pmf.v5.cloudsvr.com.au/-artists/axle](http://pmf.v5.cloudsvr.com.au/-artists/axle)

您会看到警报触发，并且 DLS == 11:3 在警报中，但标记仍然等于上午而不是下午。

谢谢你的帮助。

**编辑：我使用了错误的运算符！**

```
if ((dls == '10:0') || (dls == '10:3') || (dls == '11:0') || (dls == '11:3')){
        stamp = 'PM';
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T16:52:05.703

使用`||`代替`&&`

```
if ((dls == '10:0') || (dls == '10:3') || (dls == '11:0') || (dls == '11:3')){
    stamp = 'PM';
}; 
```

`dls`不能是所有这些值..它将是这些值中的任何一个..所以你需要使用`||`（或运算符）而不是`&&`（和运算符）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T16:51:47.873

您想要`||`运算符，`Your condition will not be true as using &&`带有 && 的 if 语句要求所有*给定条件都为真，这意味着 dls 应该一次在变量中具有 10:0、10:3、11:0 和 11:3 值，但变量可以具有其中之一一次*。

改变

```
if ((dls == '10:0') && (dls == '10:3') && (dls == '11:0') && (dls == '11:3')){
    stamp = 'PM';
}; 
```

至

```
if ((dls == '10:0') || (dls == '10:3') || (dls == '11:0') || (dls == '11:3')){
    stamp = 'PM';
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T16:54:51.257

我想你可能打算使用 || (OR) 而不是 && (AND)：

```
if ((dls == '10:0') || (dls == '10:3') || (dls == '11:0') || (dls == '11:3')){
    stamp = 'PM';
}; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-05T16:58:06.863

首先，您使用了错误的运算符..尝试使用`||`而不是`&&`

你也可以试试这个方法

```
var arr = ['10:0' , '10:3' , '11:0' , '11:3']
var dls = '10:1';

if ( arr.indexOf(dls) != -1){
    stamp = 'PM';
}
else{
   alert('Not PM')
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-05T17:04:04.007

尝试这个：

**现场演示：http:** [//jsfiddle.net/oscarj24/MS8V8/1/](http://jsfiddle.net/oscarj24/MS8V8/1/)

```
val = $.grep(["10:0", "10:3", "11:0", "11:3"], function(n){ if(n === dls) return n; });
if(val[0] === dls) stamp = "PM";

alert(stamp); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-12-15T14:54:24.017

Shorter version:

```
if (dls == ('10:0'||'10:3'||'11:0'||'11:3')){
    stamp = 'PM';
}; 
```

# r - 在 igraph 中重新排列顶点

> ID：12750679
> 
> 赞同：1
> 
> 时间：2012-10-05T16:50:51.153
> 
> 标签：r, igraph

```
df

network  bus_unit   outage
A        Online     4
B        Internal   5
A        Finance    6
B        IT         5
A       IT         6
A       Marketing  40 
```

我需要一个 igraph，我可以用这样的东西来做：

```
g <- graph.data.frame(df)
plot(g,  
     layout = layout.fruchterman.reingold,  
     vertex.label = V(g) $name,
     vertex.label.color= "black", 
     edge.arrow.size=1, 
     edge.curved=FALSE, 
     edge.label=df$outage) 
```

我的问题是我喜欢在图的顶部显示网络 A，因为它是罪魁祸首。无论如何组织这个igraph，移动顶点等等。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:16:22.433

当你传递`layout = layout.fruchterman.reingold`给 时`plot()`，你给它一个构建布局的函数。*但是您也可以在外部*设置布局并直接对其进行`plot()`操作 - 它是一个简单的坐标矩阵。

```
# Create an initial layout
bad.a.layout <- layout.fruchterman.reingold(g)

# ... it's really just a matrix of coordinates, with each row
# corresponding to a vertex
bad.a.layout
plot(g, layout = bad.a.layout)

# Tweak arbitrarily - e.g., bump Network A nodes up a bit on the y-axis
bad.a.layout[V(g)$network %in% "A", 2] <- bad.a.layout[V(g)$network %in% "A", 2] + 10
plot(g, layout = bad.a.layout) 
```

当然，不能保证它实际上*看起来不错*。但这是修改布局以适合您的基本方法。如果是一次性项目，手动操作可能没问题。否则，您可能想要更深入地研究算法（这对我来说有点像兔子洞，但您可能会有更好的运气）。

旁注：我几乎总是在绘图功能之外设置我的布局，即使我不想操纵它们。即使是中等大小的图表，每次运行绘图时都可以节省大量时间，无需重新计算。

# iphone - 根据条件是否满足加载不同的故事板

> ID：12750680
> 
> 赞同：1
> 
> 时间：2012-10-05T16:50:52.183
> 
> 标签：iphone, ios, xcode, cocoa-touch

就像设置一个代码来检测 iPhone 的分辨率并根据它的分辨率加载某个视图控制器。

```
CGRect screenBounds = [[UIScreen mainScreen] bounds];
if (screenBounds.size.height == 568) {
    // load ViewContollerA 
} else {
    // load ViewContollerB
} 
```

如何设置代码来加载故事板？谢谢。

我认为它可能必须连接到 IBAction，以便当您按下按钮时，它会验证分辨率是什么并根据它加载下一个情节提要（A 或 B）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:01:58.573

几天前我回答了这个问题。这里

[如何为 iPhone 5 切换到不同的 Storyboard？](https://stackoverflow.com/questions/12696242/how-to-switch-to-different-storyboard-for-iphone-5/12696370#12696370)

希望有帮助...

# java - 无法构造 - Jackson 的实例

> ID：12750681
> 
> 赞同：81
> 
> 时间：2012-10-05T16:50:57.430
> 
> 标签：java, jackson

我正在使用 Jackson 并且遇到问题，当我尝试反序列化 Object 时出现以下错误：

```
com.fasterxml.jackson.databind.JsonMappingException: 
    Can not construct instance of net.MyAbstractClass, 
    problem: abstract types either need to be mapped to concrete types, 
        have custom deserializer, or be instantiated with additional type information 
```

我在属性中遇到问题：

```
@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.WRAPPER_OBJECT, property = "@id")
@JsonSubTypes({ @JsonSubTypes.Type(value = MyAbstractClass.class, name = "MyAbstractClass") })
@ManyToOne
private MyAbstractClass object; 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-10-05T18:23:53.103

你不能实例化一个抽象类，杰克逊也一样。您应该向 Jackson 提供有关如何使用具体类型实例化 MyAbstractClass 的信息。

在stackoverflow上看到这个答案：[杰克逊JSON库：如何实例化一个包含抽象字段的类](https://stackoverflow.com/questions/5489532/jackson-json-library-how-to-instantiate-a-class-that-contains-abstract-fields)

也许还可以看到[杰克逊多态反序列化](https://github.com/FasterXML/jackson-docs/wiki/JacksonPolymorphicDeserialization)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2020-06-10T09:03:54.870

反序列化时需要使用具体类而不是抽象类。如果 Abstract 类有多个实现，那么在这种情况下，您可以按如下方式使用它 -

```
 @JsonTypeInfo( use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, property = "type")
    @JsonSubTypes({ 
      @Type(value = Bike.class, name = "bike"), 
      @Type(value = Auto.class, name = "auto"), 
      @Type(value = Car.class, name = "car")
    })
    public abstract class Vehicle {
        // fields, constructors, getters, setters
    } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-06T18:54:51.130

您的`@JsonSubTypes`声明没有意义：它需要列出实现（子）类，而不是类本身（这将毫无意义）。因此，您需要修改该条目以列出存在的子类；或使用其他一些机制来注册子类（`SimpleModule`有类似的东西`addAbstractTypeMapping`）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-01-28T19:09:38.083

对我来说，没有为我尝试使用的 POJO 定义默认构造函数。创建默认构造函数修复了它。

```
public class TeamCode {

    @Expose
    private String value;

    public String getValue() {
        return value;
    }

    **public TeamCode() {
    }**

    public TeamCode(String value) {
        this.value = value;
    }

    @Override
    public String toString() {
        return "TeamCode{" +
                "value='" + value + '\'' +
                '}';
    }

    public void setValue(String value) {
        this.value = value;
    }

} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-11-23T22:10:17.073

在您的具体示例中，问题是您没有正确使用此构造：

```
@JsonSubTypes({ @JsonSubTypes.Type(value = MyAbstractClass.class, name = "MyAbstractClass") }) 
```

`@JsonSubTypes.Type`应该包含抽象类的实际非抽象子类型。

因此，如果您有：

`abstract class Parent`和具体的子类

`Ch1 extends Parent`和 `Ch2 extends Parent`

然后您的注释应如下所示：

```
@JsonSubTypes({ 
          @JsonSubTypes.Type(value = Ch1.class, name = "ch1"),
          @JsonSubTypes.Type(value = Ch2.class, name = "ch2")
}) 
```

这里`name`应该与您的“鉴别器”的值相匹配：

```
@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, 
include = JsonTypeInfo.As.WRAPPER_OBJECT, 
property = "type") 
```

在`property`字段中，这里它等于`type`。键也是如此`type`，您设置的`name`值将是值。

因此，当json字符串出现时，如果它具有这种形式：

```
{
 "type": "ch1",
 "other":"fields"
} 
```

Jackson 会自动将其转换为一个`Ch1`类。

如果你发送这个：

```
{
 "type": "ch2",
 "other":"fields"
} 
```

你会得到一个`Ch2`实例。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-12-07T14:25:55.760

我单独使用 lombok`@Data`和`@Builder`注释时遇到了这个问题，我将其替换为：

```
@Getter
@Setter
@NoArgsConstructor
@AllArgsConstructor
@Builder 
```

它解决了我的问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-06T18:20:46.257

使用 lombok 注释。

```
@AllArgsConstructor
@NoArgsConstructor
@Builder
@JsonPropertyOrder({"name", "id"})
public class CreationUser {
    @Builder.Default
    @JsonProperty("name")
    String name = "";

    @Builder.Default
    @JsonProperty("id")
    String id = "";
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-02T13:51:02.687

采用`@JsonDeserialize(contentAs= ConcreteCLass.class)`

# jsf-2 - 为什么禁用按钮不起作用？

> ID：12750684
> 
> 赞同：1
> 
> 时间：2012-10-05T16:51:07.260
> 
> 标签：jsf-2

我看到了一个奇怪的缺陷。这是一个简单的测试用例。

托管 bean 是：

```
@ManagedBean
public class Controller {
    private int counter = 0;
    //getter and setters...
    public String next() {
        ++counter;
        return null;
    }
    public String prev() {
        --counter;
        return null;
    }
} 
```

观点是：

```
<h:form>
<p>Value: #{controller.counter}</p>
<h:inputHidden value="#{controller.counter}" />
<h:commandButton action="#{controller.prev()}" value="Previous" disabled="#{controller.counter == 0}"/>
<h:commandButton action="#{controller.next()}" value="Next"     disabled="#{controller.counter == 5}"/>
</h:form> 
```

当视图首次显示时，Previous 按钮被禁用。当我单击下一步时，将启用上一个按钮。到目前为止，一切都很好。但是，当我单击上一个按钮时，操作处理程序方法 prev() 永远不会被调用。如果我删除按钮的禁用属性，那么一切正常。我做错了什么还是 Mojarra 有缺陷？我正在使用 JBoss 7.1 和 Mojarra。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:28:36.383

如果您的 bean 是请求范围的，并且您没有`counter`在基于请求参数的（后）构造期间预初始化属性，则可能会发生这种情况。这样，当 JSF 即将应用请求值时，该按钮仍处于禁用状态。作为防止篡改/黑客请求的一部分，JSF 那时不会将操作事件排队。

将 bean 放置在视图范围内，或者确保您根据请求参数正确地预初始化（post）构造函数中的关联属性应该修复它。顺便说一句，你所`<h:inputHidden>`拥有的在这个结构中完全没有价值。如果您将 bean 视图设置为范围，只需摆脱它即可。如果您想坚持请求范围，请`<f:param>`在两个按钮中将其替换为并使用`@ManagedProperty`.

### 也可以看看：

*   [未调用 commandButton/commandLink/ajax 操作/侦听器方法或未更新输入值](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked/2120183#2120183)（第 5 点适用于您的情况）

# android - 内容提供者中的 Android 投影图的目的是什么？

> ID：12750688
> 
> 赞同：13
> 
> 时间：2012-10-05T16:51:26.520
> 
> 标签：android, android-contentprovider, android-sqlite

我正在查看 中的 Android 记事本应用程序示例代码`<path_to_SDK>/samples/android-16/NotePad/src/com/example/android/notepad`。

我想知道是否有人可以向我解释为什么需要以下代码`NotepadProvider.java`？

```
// Creates a new projection map instance. The map returns a column name
// given a string. The two are usually equal.
sNotesProjectionMap = new HashMap<String, String>();

// Maps the string "_ID" to the column name "_ID"
sNotesProjectionMap.put(NotePad.Notes._ID, NotePad.Notes._ID);

// Maps "title" to "title"
sNotesProjectionMap.put(NotePad.Notes.COLUMN_NAME_TITLE,NotePad.Notes.COLUMN_NAME_TITLE);

// Maps "note" to "note"
sNotesProjectionMap.put(NotePad.Notes.COLUMN_NAME_NOTE, NotePad.Notes.COLUMN_NAME_NOTE);

// Maps "created" to "created"
sNotesProjectionMap.put(NotePad.Notes.COLUMN_NAME_CREATE_DATE, NotePad.Notes.COLUMN_NAME_CREATE_DATE);

// Maps "modified" to "modified"
sNotesProjectionMap.put(
        NotePad.Notes.COLUMN_NAME_MODIFICATION_DATE,
        NotePad.Notes.COLUMN_NAME_MODIFICATION_DATE) 
```

我注意到投影图稍后在该`query()`方法中使用：

```
...
SQLiteQueryBuilder qb = new SQLiteQueryBuilder();
qb.setTables(NotePad.Notes.TABLE_NAME);

/**
 * Choose the projection and adjust the "where" clause based on URI pattern-matching.
 */
switch (sUriMatcher.match(uri)) {
    // If the incoming URI is for notes, chooses the Notes projection
    case NOTES:
    qb.setProjectionMap(sNotesProjectionMap);
    break;
... 
```

为什么需要这个投影图？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T12:27:36.503

演示中的`Notepad`应用`SDK`程序是一个示例应用程序，应该是 API 使用示例和使用这些 API 的良好实践，这就是他们可能使用投影图的原因。尽管该`Notepad`示例并不真正需要投影图，但在需要投影图时，使用投影图可以很好地展示更复杂的情况。例如，如果我没记错的话`Shelves`，Google 的一位工程师编写的应用程序在其中使用了投影图，`ContentProvider`并且该投影图不仅仅是具有相同键值对的简单映射。

我还添加了指向该方法文档的链接，[`SQLiteQueryBuilder.setProjectionMap`](http://developer.android.com/reference/android/database/sqlite/SQLiteQueryBuilder.html#setProjectionMap%28java.util.Map%3Cjava.lang.String,%20java.lang.String%3E%29)其中包含有关为什么需要投影图的一些详细信息。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-07-03T01:21:15.590

它的主要目的是重命名在查询产生的游标中找到的列名。

@static 声明

```
SEARCH_PROJECTION_MAP = new HashMap<String, String>();
SEARCH_PROJECTION_MAP.put( OpenHelper.NAME, OpenHelper.NAME + " as _name" );
SEARCH_PROJECTION_MAP.put( OpenHelper.ID , OpenHelper.ID + " as _id" ); 
```

@你的查询功能

```
//if you query using sqliteQueryBuilder then
    sqLiteQueryBuilder.setProjectionMap( SEARCH_PROJECTION_MAP );

//example if you just query
    Cursor cursor = sqLiteQueryBuilder.query( db, projection, selection, selectionArgs, null, null, sortOrder ); 
```

在此示例中，现在返回的列是 _name 和 _id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-25T15:18:21.343

除了如胡安所说，投影图的目的是在进行连接时重命名列名以及消除列名的歧义，投影图的重要目的是验证选择是否有恶意参数。

使用 使用`SQLiteQueryBuilder`创建语句`buildQueryString(boolean, String, String[], String, String, String, String, String)`时，如果指定了投影图，则将忽略不在该映射中的字段。

要获得针对恶意第三方应用程序（例如内容提供者消费者）的最大保护，您可以执行以下操作：

1.  放`SQLiteQueryBuilder#setStrict(true)`
2.  使用投影图。
3.  使用查询重载之一，而不是将语句作为 sql 字符串获取

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-19T14:05:01.580

也许有人需要更彻底的解释。我收集了有关投影图的重要事实：

1.  如果您不需要投影图，请不要设置它。这种方式投影名称“按原样”处理，与通过投影数组传入的完全一样。

2.  甚至投影阵列也是可选的。如果将 null 传递给查询，它会生成“SELECT *”操作。（实际上在 SQL 中不建议这样做，因为如果添加/删除或重新排序列可能会发生损坏）。

3.  提供的投影图仅适用于选择列表！因此，您可以映射“store_name”=>“bookstore.storename”，这将导致“select bookstore.storename ...”，但如果您在“order by”查询构建器参数或其中之一中提供“store_name”其他限定参数，您可能最终会遇到错误的 SQL。

4.  投影图可以否决。如果投影条目的键部分包含“as”子句，则忽略值部分并将键部分插入到生成的 SQL 中。例如 "parrot as polly" => "cracker" 将生成 "SELECT parrot as polly ..." 而没有 "cracker"。“as”可以全部大写或全部小写（不能混合大小写），并且在单词“as”之前和之后必须至少有一个空格。

阅读本文中的更多信息： [http ://www.mousetech.com/blog/android-projection-maps-explained/](http://www.mousetech.com/blog/android-projection-maps-explained/)

# jquery - 在 ASP.net Web.Config 中设置 jsonSerialization maxJsonLength 给出 500 错误

> ID：12750689
> 
> 赞同：5
> 
> 时间：2012-10-05T16:51:33.897
> 
> 标签：jquery, ajax, web-config, webmethod

因此，当我`maxJsonLength`在我的`web.config`.

我正在修改，`.config`因为即使我`MaxJsonLength = Int32.MaxValue`在我的 vb.net 上使用`JavaScriptSerializer`，我仍然得到`InvalidOperationException`一个我试图传输的大型字典，即使它远低于允许甚至假定的`4GB`默认限制。`MaxJsonLength @ Int32.MaxValue``4mb`

`toolkitscriptmanager`如果这意味着什么，我正在使用。

```
<system.web.extensions>
    <scripting>
        <webServices>
            <jsonSerialization maxJsonLength="2147483647" />
        </webServices>
    </scripting>
</system.web.extensions> 
```

这没有帮助（实际上，如果没有上述代码，它也会给出 500 错误）

```
<sectionGroup name="system.web.extensions" type="System.Web.Extensions">
    <sectionGroup name="scripting" type="System.Web.Extensions">
        <sectionGroup name="webServices" type="System.Web.Extensions">
            <section name="jsonSerialization" type="System.Web.Extensions" />
        </sectionGroup>
    </sectionGroup>
</sectionGroup> 
```

听说这应该有帮助`InvalidOperationException`，但它没有。我把它拿出来了，还是500错误。

```
<add key="aspnet:MaxJsonDeserializerMembers" value="2147483647" /> 
```

提前谢谢了！

**编辑**

同样的问题，但他的解决方案对我不起作用。他添加的最后一个代码也给出了 500 错误。 [升级到 .NET 4.0 时 <system.web.extensions> 配置组出现问题](https://stackoverflow.com/questions/3209192/problem-with-system-web-extensions-config-group-when-upgrading-to-net-4-0)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T15:03:38.843

对我来说，问题是我将代码放在 web.config 的开头。出于某种原因，把它放在最后是有效的。

不是专家，所以我不知道为什么会这样。

它在没有我试图使其工作的最后两个代码部分的情况下工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-17T06:21:32.997

我同意 Gracchus 的观点，我把这个块放在 web.config 文件的末尾

```
<system.web.extensions>
    <scripting>
        <webServices>
            <jsonSerialization maxJsonLength="2147483647"/>
        </webServices>
    </scripting>
</system.web.extensions>` 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-18T05:26:54.137

```
<system.web.extensions>
    <scripting>
      <webServices>
        <!--<jsonSerialization maxJsonLength="50000000">
        </jsonSerialization>-->
        <jsonSerialization maxJsonLength="500000000">
          <!--50000000-->
        </jsonSerialization>
      </webServices>
    </scripting>
  </system.web.extensions> 
```

以上设置对我有用。此外，我必须将网站的目标框架设置为 .Net 4.0。当目标框架设置为 .Net 2.0 时，此 Web 配置设置给了我**500 错误**

要更改框架，请转到 IIS 并选择**Application Pool**右键单击​​您的网站名称并选择**Advanced settings**。在这里，您可以通过单击下拉菜单来更改 .Net Framework 版本。

我也在网络配置的底部有这个设置。只为祝你好运:)

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-15T06:49:49.017

由于以上都不适合我，所以我使用了这个-

```
JsonResult result = Json(<your result>, JsonRequestBehavior.AllowGet);
result.MaxJsonLength = int.MaxValue;
return result; 
```

# jquery - JQuery标志不起作用

> ID：12750690
> 
> 赞同：0
> 
> 时间：2012-10-05T16:51:36.473
> 
> 标签：jquery

我确信这是一个简单的问题，并且有一个明显的答案，但事实是我无法解决它。基本上，如果单击 div 并且变量存在，则执行此操作，否则执行此操作。但这些都不起作用。

想法？

```
$("#lisea").click(
            var set = false;
            if(set) {
                function() {
                    $("body").animate({
                    opacity: 1
                    }, 500);
                    var set = false;
                }
            }
            if(!set) {
                function() {
                    $("body").animate({
                    opacity: 0.25
                    }, 500);
                    var set = true;
                }
            }
        ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T16:53:20.133

您需要在回调函数中使用您的代码 - 而不仅仅是作为参数。你也只是在你的条件下定义一个函数——你需要调用它。

无论如何，我认为这可能是你想要的：

```
var set = false;
$("#lisea").click(function(){
    $('body').stop().animate({
        opacity: (set) ? 1 : 0.25
    }, 500);
    set = !set;
}); 
```

这是一个演示：http: [//jsfiddle.net/upqTZ/](http://jsfiddle.net/upqTZ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:59:57.923

试试这个..您似乎一次又一次地声明相同的变量..将您的声明移到点击事件的范围之外..

```
var set = false;
$("#lisea").click(
            if(set) {
                function() {
                    $("body").animate({
                    opacity: 1
                    }, 500);
                    set = false;
                }
            }
            if(!set) {
                function() {
                    $("body").animate({
                    opacity: 0.25
                    }, 500);
                    set = true;
                }
            }
        ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T16:55:29.173

删除所有'var'，它应该可以工作。您在不同的范围内声明了许多变量。也不确定'set'是否是某个关键字..所以最好使用其他变量名。像'if_flag_set'

# java - 如何在 JSF 中忽略导入的外部 javascript

> ID：12750691
> 
> 赞同：0
> 
> 时间：2012-10-05T16:51:35.867
> 
> 标签：java, javascript, jsf-2, facelets

我有一个 xhtml 页面通过使用加载外部 javascript`<script src="<external url>" type="text/javascript" ></script>`

有没有办法让 JSF 不关心脚本的输出？我想知道这一点，因为 JSF SAXCompiler 正在抛出异常：

```
javax.faces.view.facelets.FaceletException: Error Parsing /pages/index.xhtml: Error Traced[line: 53] The reference to entity "c" must end with the ';' delimiter.
at com.sun.faces.facelets.compiler.SAXCompiler.doCompile(SAXCompiler.java:421)
at com.sun.faces.facelets.compiler.SAXCompiler.doMetadataCompile(SAXCompiler.java:404)
at com.sun.faces.facelets.compiler.Compiler.metadataCompile(Compiler.java:130)
at com.sun.faces.facelets.impl.DefaultFaceletFactory.createMetadataFacelet(DefaultFaceletFactory.java:326)
at com.sun.faces.facelets.impl.DefaultFaceletFactory.access$200(DefaultFaceletFactory.java:92)
at com.sun.faces.facelets.impl.DefaultFaceletFactory$2.newInstance(DefaultFaceletFactory.java:165)
at com.sun.faces.facelets.impl.DefaultFaceletFactory$2.newInstance(DefaultFaceletFactory.java:163)
at com.sun.faces.facelets.impl.DefaultFaceletCache$2.newInstance(DefaultFaceletCache.java:94)
at com.sun.faces.facelets.impl.DefaultFaceletCache$2.newInstance(DefaultFaceletCache.java:89)
at com.sun.faces.util.ExpiringConcurrentCache$1.call(ExpiringConcurrentCache.java:99)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at com.sun.faces.util.ExpiringConcurrentCache.get(ExpiringConcurrentCache.java:114)
at com.sun.faces.facelets.impl.DefaultFaceletCache.getViewMetadataFacelet(DefaultFaceletCache.java:143)
at com.sun.faces.facelets.impl.DefaultFaceletCache.getViewMetadataFacelet(DefaultFaceletCache.java:62)
at com.sun.faces.facelets.impl.DefaultFaceletFactory.getMetadataFacelet(DefaultFaceletFactory.java:259)
at com.sun.faces.facelets.impl.DefaultFaceletFactory.getMetadataFacelet(DefaultFaceletFactory.java:208)
at com.sun.faces.application.view.ViewMetadataImpl.createMetadataView(ViewMetadataImpl.java:113)
at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:233)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116)
at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T19:36:12.653

你误解了这个问题。您似乎认为 JSF 将脚本包含在网络服务器中。这不是真的。该脚本在解析检索到的 JSF 生成的 HTML 代码期间由 Web 浏览器单独下载。

如果您需要更详细的帮助来解决真正的问题，那么您需要显示第 53 行的`/pages/index.xhtml`. 该异常至少表明您正在使用某处`&c`而没有转义与号。例如

```
<p>Bla bla &c bla bla</p> 
```

Facelets 是一种基于 XML 的视图技术，您需要对XML 特殊[字符](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Predefined_entities_in_XML)`&`、`<`、`>`和`"`.

```
<p>Bla bla &amp;c bla bla</p> 
```

### 也可以看看：

*   [如何在 JSF 组件的 value 属性中插入 & 和 < 等特殊字符？](https://stackoverflow.com/questions/6883860/how-to-insert-special-characters-like-and-into-jsf-components-value-attribu/6883872#6883872)

# json - 回调函数未按定义显示

> ID：12750701
> 
> 赞同：-2
> 
> 时间：2012-10-05T16:51:51.697
> 
> 标签：json, google-maps-api-3

[http://wrestore.iupui.edu/model/mapScriptTry.html](http://wrestore.iupui.edu/model/mapScriptTry.html)（在这里不工作） [http://wrestore.iupui.edu/fusion/multipleMarkersJonOnClick.html](http://wrestore.iupui.edu/fusion/multipleMarkersJonOnClick.html)（在这里工作）

```
url.push('&callback=drawWet1') 
```

在尝试调用上面一行中的回调 drawWet1 时，我收到了一个错误，它是未定义的。我的问题是为什么会发生这种情况。这显然是一个函数。下面通过说明我需要使函数成为变量并以这种方式调用它来回答它。所以

```
function drawWet1(){ 
} 
```

变成

```
drawWet1=function(data){
} 
```

然后我可以在我的函数中访问它进行回调。

所以 geocodezip，我重做了你的脚本并让它在其他页面上工作，但现在收到一个错误，即未定义回调函数。我很困惑。url.push('&callback=drawWet1'); 当它运行时它告诉我drawWet1尚未定义！我看不出两个页面之间的调用有什么区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:40:26.957

这些函数未在全局范围内定义，目前它们仅在 initialize() 内可见（这是它们当前放置的位置）。

而不是像这样定义函数：

```
function drawWet1(data){//... 
```

这样做：

```
drawWet1=function(data){//.... 
```

...或定义 initalize() 之外的函数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T17:48:31.267

除了toggleLayers，您的所有函数都是初始化函数的本地函数。将它们移动到全局范围（在任何其他函数之外）。

# objective-c - 有没有办法阻止用户在应用程序之外更新 iCal？

> ID：12750707
> 
> 赞同：-2
> 
> 时间：2012-10-05T16:52:19.060
> 
> 标签：objective-c, xcode, icalendar

我正在编写一个使用从 iCloud 同步的 iCal 的应用程序。我希望用户能够仅从应用程序更新应用程序的 iCal，因为我必须格式化输入的数据，并且需要验证它是否正确。该应用程序的 iCal 驻留在 iPad 上；只要其他用户也有 iPad 应用程序，他们就可以更新应用程序的 iCal，但不能从应用程序外部更新。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T21:55:24.377

这是做不到的。用户是他的内容之王。如果他们不喜欢您的应用并将其删除怎么办？现在他们可能有一些物品卡在 iCal 中？怎么办？

我在这里建议的唯一一种解决方法是创建您自己的日历应用程序，而您的项目“退出”您的应用程序的唯一方法是与 iCal 共享它。这样 iCal 只能查看您的应用程序正在做什么。

但是，如果您真的想拥有应用程序中的项目（编辑、删除、添加项目），则必须创建自己的 cal 应用程序，该应用程序不会在其他地方共享项目。

# c# - RavenDB - 全文搜索的索引创建，尝试投影字段

> ID：12750708
> 
> 赞同：2
> 
> 时间：2012-10-05T16:52:25.273
> 
> 标签：c#, ravendb, projection

```
{   "BiImagePrefix": "bi",   "GrImagePrefix": "gr",   "FrameCount": 479,   "RollUid": null,   "Location": null,   "FrameList": [],  
> "Index": {
>     "DocumentType": "OFFICIAL RECORDS",
>     "RollNumber": "2865",
>     "RollTitle": ""   },   
>"IndexList": [
>>    {
>>>       "FrameNumber": 2,
>       "Index": {
>         "$type": "System.Dynamic.ExpandoObject, System.Core",
>         "Name": "2865",
>         "Title": "",
>         "Range": "2801-2900"
>       }
>     },
>>>     {
>>       "FrameNumber": 3,
      "Index": {
        "$type": "System.Dynamic.ExpandoObject, System.Core",
        "Name": "2865343",
        "Title": "",
        "Range": "233801-2943400"
      }
    }

  ]  } 
```

创建以下索引

```
>     docs.Rolls
>     .SelectMany(roll => roll
>     .Select(token => new {__document_id = roll["@metadata"]["@id"], Name = token.Key,     Value = token.Value, Query = new
> {roll.Index.DocumentType,  roll.IndexList[0].FrameNumber,
> roll.IndexList[0].Index.Name}))
>     .Select(x => new {__document_id = x.__document_id, Name = x.Name, Value = x.Value, Query = x.Query}) 
```

预计的领域是

```
 1  __document_id   (Stored)
 2  Name    (Stored)
 3  Value     (Analyzed, Stored)
 4 Query    (Stored) 
```

如果我这样引用，则投影字段“查询”内的字段可以正常工作：

```
Query = new {roll.Index.DocumentType,  roll.IndexList[0].FrameNumber, roll.IndexList[0].Index.Name} 
```

IndexList[0] 仅投影第一个数组元素的所有字段。我想为“IndexList”数组中的所有元素（即所有 FrameNumber）投影我如何指定它。

我尝试了像这样在“IndexList”中的属性“FrameNumber”之一`roll.IndexList.Select(x=>x.FrameNumber)`，但它不起作用

我该如何解决这个问题？

# oracle - 表为空时序列从 1 开始

> ID：12750713
> 
> 赞同：1
> 
> 时间：2012-10-05T16:52:38.280
> 
> 标签：oracle, sequence

> **可能重复：**
> [如何在 Oracle 中重置序列？](https://stackoverflow.com/questions/51470/how-do-i-reset-a-sequence-in-oracle)

我在 oracle db 中有一个表。该表始终包含大量行，例如几十万行。我在该表中设置了一个 id 并使用了一个序列和一个触发器，这样每次插入记录时都会自动生成并插入 id。现在在通过 java 代码遍历现有行时，有时可以截断该表中的数据并插入新行。在这种情况下，当表为空时，我希望序列从 1 重新开始。

序列看起来像

```
CREATE SEQUENCE DUMMY_DETAILS_SEQ
  START WITH 356005
  MAXVALUE 999999999999999999999999999
  MINVALUE 1
  NOCYCLE
  CACHE 20
  NOORDER; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T16:57:07.340

如果表变空并且您需要重置序列，则必须删除它，然后重新创建它。使用接收表名、表 id 字段和序列名的过程来执行此操作。

此外，您可以找到当前值并使用带负值的增量，以便将其转回零。

```
alter sequence seq increment by -inc_value minvalue 0; 
```

# asp.net - Asp.Net 导出到 Excel 错误：加载期间出现问题，缺少 .css 文件

> ID：12750717
> 
> 赞同：2
> 
> 时间：2012-10-05T16:52:47.740
> 
> 标签：asp.net, excel

从我的 asp.net 网站，我使用 Microsoft ReportViewer 将数据导出到 excel 中。当我打开excel时出现以下错误

![在此处输入图像描述](../Images/492aa3215998237de2f855c4b1c54b22.png)

当我导出几行数据时，它工作正常。但是当我导出一些巨大的数据时，它会抛出这个错误。有人可以提供一些帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T17:37:35.277

您正在导出的数据正在引用网络服务器上的 css 文件。

下载文件后，您将下载这些参考。

当您打开文件时，它试图在本地打开 css 文件，但它们在本地不存在。

我会单独下载 css 文件，并将它们放在它们应该存在的本地位置，或者阻止您的导出引用具有引用的任何行中的文件。（可能靠近顶部）

# javascript - 接受脚本中的图像

> ID：12750721
> 
> 赞同：1
> 
> 时间：2012-10-05T16:53:07.020
> 
> 标签：javascript, html

我将如何编辑它，以便在输入表单时接受图像，所有其他选项仅适用于未上传到服务器或数据库的图像。

请有人可以帮助我环顾四周，找不到任何我能理解的东西，有人可以为此添加一些代码吗？

提前致谢。

```
<script type="text/javascript">
jQuery(document).ready(function($) {

$("#Submit").click(function() {

var url = "../AdsCreate/CreateCar.php"; // the script where you handle the form input.

$.ajax({
   type: "POST",
   url: url,
   data: $("#myForm").serialize(), // serializes the form's elements.
   success: function(html){ $("#right").html(html); }
 });

return false; // avoid to execute the actual submit of the form.
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:56:22.020

那是因为在表单上`<input type="file"`执行时会被跳过。`.serialize()`

可以[使用 JavaScript 上传文件](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData/Using_FormData_Objects)，但在表单中更容易：

```
<form action="../AdsCrease/CreateCar.php" method="post" enctype="multipart/form-data">
...
<input type="file" name="myfile" ... />
...
<button type="submit">Submit</button>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T17:00:04.747

jQuery[文档](http://api.jquery.com/serialize/)上`.serialize`明确指出不支持文件上传（实际上您需要`multipart/form-data`POST 提交才能上传，它不仅仅是一个查询字符串）。

在“示例”部分之前，您可以找到：

> 来自文件选择元素的数据未序列化。

# c# - 如何在 Roslyn 中为方法创建没有 ref 或 out 的命名参数？

> ID：12750722
> 
> 赞同：2
> 
> 时间：2012-10-05T16:53:14.930
> 
> 标签：c#, roslyn

在为构造函数创建命名参数时，我遇到了一个问题，我唯一可用的构造函数要求`refOrOutKeyword` `SyntaxToken`. `null`不允许通过，而且`Syntax.ParseToken("")`失败。`Syntax.Token(SyntaxKind.RefKeyword)`并且`Syntax.Token(SyntaxKind.OutKeyword)`两者都不合适，因为它们插入了`ref`or `out`：

```
var ctorArgs = Syntax.ArgumentList();
var ctor = enclosingType.Members
                        .OfType<ConstructorDeclarationSyntax>()
                        .OrderBy(cc => cc.ParameterList.Parameters.Count)
                        .FirstOrDefault();
if (ctor != null)
{
    //
    // Summary:
    //     Creates a new ArgumentSyntax instance.
    // public static ArgumentSyntax Argument(
    //     NameColonSyntax nameColon,
    //     SyntaxToken refOrOutKeyword,
    // ExpressionSyntax expression);
    ctorArgs.AddArguments((
        from param in ctor.ParameterList.Parameters
        select Syntax.Argument(
                Syntax.NameColon(param.Identifier.ValueText),
                Syntax.ParseToken("") /* <- what to put here */, 
                Syntax.DefaultExpression(param.Type))
    ).ToArray());
} 
```

我也没有找到任何合适的文档来说明如何创建命名参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T17:15:00.293

答案一直就在我的眼皮底下，如果您想要 "null" 或 empty `SyntaxToken`，请使用`default`：

```
Syntax.Argument(
    Syntax.NameColon(param.Identifier.ValueText),
    default(SyntaxToken),
    Syntax.DefaultExpression(param.Type))
// Produces output like:
//    baseUri: default(string) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T17:20:34.113

通常，查看此类代码在运行时如何表示会有所帮助。如果我解析使用命名参数的代码并查看`RefOrOutKeyword.Kind`有`ArgumentSyntax`问题的代码，它是`None`. 所以，你需要做同样的事情：创建一个`SyntaxToken`with `None`as its `Kind`：

```
Syntax.Token(SyntaxKind.None) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T21:56:16.540

您也可以分两步完成：

```
Syntax.Argument(Syntax.DefaultExpression(param.Type))
      .WithNameColon(Syntax.NameColor(param.Identifier.ValueText)) 
```

# django - 这是文档中的错误吗？

> ID：12750723
> 
> 赞同：1
> 
> 时间：2012-10-05T16:53:16.753
> 
> 标签：django

今天我开始阅读`django.forms`. 该 API 似乎很容易使用，我开始尝试使用它。然后我开始尝试，`django.forms.ModelForm`但我真的看不出哪里出错了。

我的问题从这里开始：[使用](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/#the-save-method).`form``instance`

我的模型是

```
class Process(models.Model):
    key         = models.CharField(max_length=32, default="")
    name        = models.CharField(max_length=30)
    path        = models.CharField(max_length=215)
    author      = models.CharField(max_length=100)
    canparse    = models.NullBooleanField(default=False)
    last_exec   = models.DateTimeField(null = True)
    last_stop   = models.DateTimeField(null = True)
    last_change = models.DateTimeField(null = True, auto_now=True) 
```

我的表格是

```
class ProcessForm(ModelForm):
    class Meta:
        model  = Process
        fields = ('name', 'path', 'author') 
```

我只想要`name`,`path`和`author`字段，因为其他字段是在保存模型时自动设置的。无论如何，在我的测试数据库中，我已经有条目，并且我选择了一个字段**全部**设置且有效的条目。

在文档中，您可以阅读：

```
# Create a form to edit an existing Article.
>>> a = Article.objects.get(pk=1)
>>> f = ArticleForm(instance=a)
>>> f.save() 
```

很好，我想用我自己的代码做同样的事情：

```
>>> from remusdb.models import Process
>>> from monitor.forms import ProcessForm
>>> 
>>> proc = Process.objects.get(name="christ")
>>> pf = ProcessForm(instance=proc)
>>> pf.save()
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/home/shaoran/devpython/lib/python2.6/site-packages/django/forms/models.py", line 364, in save
    fail_message, commit, construct=False)
  File "/home/shaoran/devpython/lib/python2.6/site-packages/django/forms/models.py", line 87, in save_instance
    save_m2m()
  File "/home/shaoran/devpython/lib/python2.6/site-packages/django/forms/models.py", line 78, in save_m2m
    cleaned_data = form.cleaned_data
AttributeError: 'ProcessForm' object has no attribute 'cleaned_data'
>>> pf.is_bound
False
>>> pf.is_valid()
False 
```

即使`proc`是一个有效`Process`的对象，表单对象似乎也不同意我的看法。如果我像下一个例子那样做

```
>>> post = { "name": "blabla", "path": "/somewhere", "author": "me" }
>>> pf = ProcessForm(post, instance=proc)
>>> pf.is_bound
True
>>> pf.is_valid()
True
>>> pf.cleaned_data
{'path': u'/somewhere', 'name': u'blabla', 'author': u'me'} 
```

然后它就像文档的第三个示例一样工作。

我是否遗漏了什么或文档中有错误？还是我的`Model`代码有些错误？

这是内容`proc`

> > > 过程。**dict** {'name': u'christ', 'last_stop': datetime.datetime(2012, 10, 5, 16, 49, 13, 630040, tzinfo=), 'author': u'unkown', '_state': , 'canparse': False, 'last_exec': datetime.datetime(2012, 10, 5, 16, 49, 8, 545626, tzinfo=), 'key': u'aed72c9d46d2318b99ffba930a110610', 'path': u'/home /shaoran/projects/cascade/remusdb/test/samples/christ.cnf', 'last_change': datetime.datetime(2012, 10, 5, 16, 49, 13, 631764, tzinfo=), 'id': 5}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:22:13.460

表单类的第一个参数是一个字典，其中包含您希望表单验证的值。

由于您从不传递这些值，因此表单无法验证任何输入；这就是为什么`cleaned_data`没有。由于`.save()`触发表单*和*模型验证，表单验证失败。

您会注意到表单实际上没有数据：

`af.data`will be `{}`(empty dict) `af.is_bound`will be `False`(因为您没有将表单绑定到任何数据)

由于没有数据，验证失败。该错误有点误导。如果你传入一个空字典：

```
af = ArticleForm({},instance=a)
af.save() 
```

你会得到一个更合适的错误：

`ValueError: The Article could not be changed because the data didn't validate.`

# pdf - 在浏览器中显示 PDF 时可以隐藏 Adob e 浮动工具栏吗？

> ID：12750725
> 
> 赞同：5
> 
> 时间：2012-10-05T16:53:21.827
> 
> 标签：pdf, browser, adobe, itext

我正在生成一个 PDF 文档并在 Web 浏览器中显示它（当前版本的 IE 是最重要的目标）。我想抑制根据鼠标移动出现和消失的浮动工具栏（见下文）。

有没有办法抑制这种情况？我可以控制 PDF 文档（它是使用 itextpdf 构建的）以及 Url。

![Adobe Reader 浮动工具栏](../Images/933f2372dc431ab1573a11eead9b66af.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-05T16:59:22.353

我认为这是用户的偏好。

您可以做的是添加`#toolbar=0`到 URL 的末尾。

例如，

```
http://DOMAIN/FILE_NAME.pdf#toolbar=0 
```

您可能想要做的是：

```
<embed src="MyFile.pdf#toolbar=0&scrollbar=0&navpanes=1" width="530" height="300" /> 
```

有关参数的详细信息，请访问[PDF 打开参数](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/pdf_open_parameters.pdf)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T17:34:09.743

你正在寻找的东西是不可能的。在 iText 邮件列表中阅读 Leonard Rosenthol（Adobe 的 PDF 架构师）的答案：http: [//thread.gmane.org/gmane.comp.java.lib.itext.general/55112/focus=55120](http://thread.gmane.org/gmane.comp.java.lib.itext.general/55112/focus=55120)

从 Adob​​e Reader 的 X 版本开始，有一种称为“阅读模式”的新模式，这是您在 Web 浏览器中打开 PDF 时的默认查看模式。在“阅读模式”中，您可以找到一个半透明的浮动工具栏，其中包含基本的阅读控件，例如页面导航、打印和缩放。

取消选中“默认以阅读模式显示”可以通过 Adob​​e Reader X 中的*编辑 > 首选项 > Internet*完成 ，但无法以编程方式禁用“阅读模式”。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-10-01T10:35:06.110

这样：

myPdfView.put_src("D:\Recomendations.pdf#toolbar=0&navpanes=0&scrollbar=0");

不客气...

# android - 带有 Dojo 和 geodjango 的 Android 应用程序

> ID：12750731
> 
> 赞同：1
> 
> 时间：2012-10-05T16:53:31.153
> 
> 标签：android, python, django, dojo

我正在尝试使用 Dojo 工具包和 GeoDjango 制作一个 android 应用程序。它是一个基于 GPS 工作的项目。任何人都可以帮助解决这个问题吗？我想要凝视的步骤？我的计算机中安装了一些源代码和 SDK。但仍然对凝视感到困惑。任何人都可以帮忙吗？我将如何使创建应用程序成为可能。步骤plz？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T16:59:48.010

我建议看看PhoneGap。我使用它将 JQuery mobile 嵌入到 Android 应用程序中。PhoneGap 使在 Android 应用程序中嵌入 javascript 变得很容易。试试 PhoneGap 教程吧。

编辑：PhoneGap 让你通过 javascript 使用 GPS 传感器

# android - AsyncTask 完成后重新启动一个完整的 Android 应用程序

> ID：12750733
> 
> 赞同：4
> 
> 时间：2012-10-05T16:53:35.430
> 
> 标签：android, android-asynctask, restart

我正在编码的应用程序检查 /sdcard 下的目录中是否有特殊的 ZIP 文件，如果没有，则开始下载并解压缩它。下载和解压缩可以找到，即使是子目录。但是我需要在完成后重新启动应用程序 - 这不起作用。

起初我有一个特殊的活动“PreMainActivity.java”只是为了重启目的：

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;

public class PreMainActivity extends Activity
{

/**
 * 
 */
public static Boolean   ENABLE_RESTART  = false;

@Override
public void onCreate(final Bundle savedInstanceState)
{

    super.onCreate(savedInstanceState);
    PreMainActivity.ENABLE_RESTART = true;
    restartMain();
}

@Override
public void onRestart()
{

    super.onRestart();
    restartMain();
}

/**
 * 
 */
public void restartMain()
{

    if (PreMainActivity.ENABLE_RESTART == true)
    {
        final Intent mainIntent = new Intent(this, MainActivity.class);
        mainIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(mainIntent);
        finish();
    }
    else
    {
        finish();
    }
    PreMainActivity.ENABLE_RESTART = false;
}
} 
```

然后我在 DownloadFile.java 中得到了一些代码

```
@Override
protected void onPostExecute(final String result)
{

    MainActivity.mProgressDialogDownload.dismiss();
    PreMainActivity.ENABLE_RESTART = true;
    final Intent i = new Intent(MainActivity.this, PreMainActivity.class);
    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
    startActivity(i);
} 
```

据我研究，我需要将 MainActivity 的上下文传递给 DownloadFile.java - 但我仍然不知道如何。谁能给我一个提示，如何将上下文传递给同一包内单独文件中的 AsyncTask ？或任何其他提示如何在 AsyncTask 完成后重新启动整个应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:05:58.087

您将需要创建 AsyncTask 的构造函数以将当前活动上下文传递为：

```
 public Context ctx;

    public Your_AsyncTask_Class_Name (Context context){
        super();
        this.ctx=context;

    }
  ......
@Override
protected void onPostExecute(final String result)
{

    MainActivity.mProgressDialogDownload.dismiss();
    PreMainActivity.ENABLE_RESTART = true;
    final Intent i = new Intent(ctx, PreMainActivity.class);
    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
    startActivity(i);
} 
```

从 Activity 你可以将上下文传递为：

```
AsyncTask_Class_Name asyktaskobj=new AsyncTask_Class_Name(this);
asyktaskobj.execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T17:11:42.450

只需像这样重新启动您的 main.activity：

```
Intent intent = getIntent(); 
finish(); 
startActivity(intent); 
```

查看问题： [如何重新启动 Android Activity](https://stackoverflow.com/questions/1397361/how-do-i-restart-an-android-activity)

# ruby-on-rails - “识别”命令无法识别图像文件。(heroku)

> ID：12750737
> 
> 赞同：9
> 
> 时间：2012-10-05T16:53:55.470
> 
> 标签：ruby-on-rails, heroku, amazon-s3, imagemagick, paperclip

我正在尝试让 Paperclip 与 Heroku 和 Amazon S3 一起使用。

在本地主机（mac OS 和亚马逊）上一切正常，但是当我部署到 heroku 并尝试该功能时，我遇到了这个错误：

```
2 errors prohibited this area from being saved:
Asset /tmp/paris20121005-2-2cwxgx.jpg is not recognized by the 'identify' command.
Asset /tmp/paris20121005-2-2cwxgx.jpg is not recognized by the 'identify' command. 
```

当我删除模型中的 :styles => { } 选项时它可以工作，但文件没有被处理（我需要不同的图像大小）。

我的 gemfile 中也有 rmagick gem。

这是我的 gemfile（只有回形针部分）：

```
gem "paperclip"
gem "rmagick", :require => 'RMagick'
gem 'aws-sdk', '~> 1.3.4' 
```

我没有在我的 environment.rb 或 production.rb 中设置 Paperclip.options[:command_path] 所以这方面没有问题。

这是我的模型：

```
class Area < ActiveRecord::Base
  require 'RMagick'
  has_attached_file :asset, :styles => { :medium => "300x300>", :thumb => "180x190>" },
       :storage => :s3,
       :s3_credentials => "#{::Rails.root.to_s}/config/s3.yml",
       :url => :s3_domain_url.to_s,
       :path => "/:style/:id/:filename"
end 
```

有什么线索吗？我已经抓取了有关它的所有主题，但似乎没有任何效果......

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-06T14:58:00.300

显然 Cocaine gem (0.4.0) 的新更新打破了 Paperclip 和 ImageMagick 的文件名。尝试回滚到以前的版本（0.3.2），它对我有用。

看这里：

[https://github.com/thoughtbot/paperclip/issues/1038](https://github.com/thoughtbot/paperclip/issues/1038)

PS我相信Heroku不再需要RMagick，没有它对我来说很好

# php - 在同一界面上的 div 标签内回显内容

> ID：12750742
> 
> 赞同：-3
> 
> 时间：2012-10-05T16:54:05.600
> 
> 标签：php

我有一个这样的场景：只是一个 *.php 页面，顶部有一个 PHP 内容，然后是一个 HTML 内容。现在有了一个应用程序`PHP_SELF`，我需要在 HTML 中回显消息，而不会丢失 HTML 界面，一旦消息在“div1”标签中回显。这可能吗？

我尝试将 echo 替换为`$msg['div1'] = 'Some message'`and inside`div1`标签`<?= $msgxx['display_log'] ?>`，但似乎不是有效代码。请分享您的观点。下面的代码只是为了解释我的方法。谢谢。

```
<?php

echo 'some message';
?>

<html>
 <form .....>
 <div>
   <div id="div1"></div>
   <div><input type="submit" id="submit1"></div>
 </div>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:56:15.950

在 php 中你`$message='<b>Hello, world!</b>'`。在 html 中

```
 <div id="div1"><?php echo $message ?></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T17:00:55.870

您可以在 html 中包含内联 PHP，也许这就是混乱的来源？它并不总是必须位于页面顶部。只需用`<?php ... ?>`标签包装你的 PHP。

在您的情况下，如果您想在`some message`内部回显`div1`：

```
 <div id="div1"><?php echo 'some message'; ?></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T17:07:18.100

您是否尝试在 HTML 中回显 PHP 数据？如果是这种情况，请记住，您可以像这样混合编写 PHP 和 HTML 代码。否则，请解释更多您正在尝试做的事情并考虑发布更详细的代码，因为这对我来说不是很清楚。

```
<html>
  <head>
    ...
  </head>
  <body>
    <form>
      <div id="div1"><?php echo 'some message'; ?></div>
      <input type="submit" id="submit1">
    </form>
  </body>
</html> 
```

您也可以使用`<?= 'some message' ?>`which 等价于`<?php echo 'some message' =>`.

# python - Mountain Lion 上的 JPype 安装：“错误：命令‘gcc’失败，退出状态为 1”

> ID：12750744
> 
> 赞同：1
> 
> 时间：2012-10-05T16:54:10.680
> 
> 标签：python, gcc, sudo, jpype

我正在尝试将 JPype 安装到 Python 虚拟环境中（在安装了 Xcode 和命令行工具的 Mountain Lion 上运行；下面有更多系统详细信息），但我一直遇到 gcc 错误。

```
~: python setup.py install
running install
running build
running build_py
running build_ext
building '_jpype' extension
gcc -fno-strict-aliasing -fPIC -fno-common -dynamic -arch i386 -arch x86_64 -g -O2 -    DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -DMACOSX=1 -Isrc/native/common/include -    Isrc/native/python/include -        I/System/Library/Frameworks/JavaVM.framework/Versions/Current//Headers -I/System/Library/Frameworks/JavaVM.framework/Versions/Current//Headers/ -I/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c     
src/native/common/jp_array.cpp -o build/temp.macosx-10.5-intel-2.7/src/native/common/jp_array.o
cc1plus: warning: command line option "-Wstrict-prototypes" is valid for Ada/C/ObjC but not for C++
src/native/common/jp_array.cpp: In member function ‘void JPArray::setRange(int, int, std::vector<HostRef*, std::allocator<HostRef*> >&)’:
src/native/common/jp_array.cpp:56: warning: comparison between signed and unsigned integer expressions
src/native/common/jp_array.cpp:68: warning: deprecated conversion from string constant to ‘char*’
src/native/common/jp_array.cpp: In member function ‘void JPArray::setItem(int, HostRef*)’:
src/native/common/jp_array.cpp:80: warning: deprecated conversion from string constant to ‘char*’
src/native/common/include/jp_utility.h: At global scope:
src/native/common/include/jp_utility.h: In instantiation of ‘std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&, const std::basic_string<_CharT, _Traits, _Alloc>&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]’:
src/native/common/include/jp_utility.h:38:   instantiated from here
src/native/common/include/jp_utility.h:38: error: explicit instantiation of ‘std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&, const std::basic_string<_CharT, _Traits, _Alloc>&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]’ but no definition available
src/native/common/include/jp_utility.h: In instantiation of ‘std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&, const std::basic_string<_CharT, _Traits, _Alloc>&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]’:
src/native/common/include/jp_utility.h:38:   instantiated from here
src/native/common/include/jp_utility.h:38: error: explicit instantiation of ‘std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&, const std::basic_string<_CharT, _Traits, _Alloc>&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]’ but no definition available
src/native/common/include/jp_utility.h: In instantiation of ‘std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&, const std::basic_string<_CharT, _Traits, _Alloc>&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]’:
src/native/common/include/jp_utility.h:38:   instantiated from here
src/native/common/include/jp_utility.h:38: error: explicit instantiation of ‘std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&, const std::basic_string<_CharT, _Traits, _Alloc>&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]’ but no definition available
cc1plus: warning: command line option "-Wstrict-prototypes" is valid for Ada/C/ObjC but not for C++
src/native/common/jp_array.cpp: In member function ‘void JPArray::setRange(int, int, std::vector<HostRef*, std::allocator<HostRef*> >&)’:
src/native/common/jp_array.cpp:56: warning: comparison between signed and unsigned integer expressions
src/native/common/jp_array.cpp:68: warning: deprecated conversion from string constant to ‘char*’
src/native/common/jp_array.cpp: In member function ‘void JPArray::setItem(int, HostRef*)’:
src/native/common/jp_array.cpp:80: warning: deprecated conversion from string constant to ‘char*’
src/native/common/include/jp_utility.h: At global scope:
src/native/common/include/jp_utility.h: In instantiation of ‘std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&, const std::basic_string<_CharT, _Traits, _Alloc>&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]’:
src/native/common/include/jp_utility.h:38:   instantiated from here
src/native/common/include/jp_utility.h:38: error: explicit instantiation of ‘std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&, const std::basic_string<_CharT, _Traits, _Alloc>&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]’ but no definition available
src/native/common/include/jp_utility.h: In instantiation of ‘std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&, const std::basic_string<_CharT, _Traits, _Alloc>&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]’:
src/native/common/include/jp_utility.h:38:   instantiated from here
src/native/common/include/jp_utility.h:38: error: explicit instantiation of ‘std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&, const std::basic_string<_CharT, _Traits, _Alloc>&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]’ but no definition available
src/native/common/include/jp_utility.h: In instantiation of ‘std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&, const std::basic_string<_CharT, _Traits, _Alloc>&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]’:
src/native/common/include/jp_utility.h:38:   instantiated from here
src/native/common/include/jp_utility.h:38: error: explicit instantiation of ‘std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&, const std::basic_string<_CharT, _Traits, _Alloc>&) [with _CharT = char, _Traits = std::char_traits<char>, _Alloc = std::allocator<char>]’ but no definition available
lipo: can't figure out the architecture type of: /var/folders/v_/cvy9b4hs2_ldpkx6dnxj2bnw0000gn/T//ccKkSzrC.out
error: command 'gcc' failed with exit status 1 
```

作为我认为良好的系统卫生的一部分，我一直在尝试将安装保持在虚拟环境中（~/virtualenvs/default/bin/python），但到目前为止，我唯一的成功是当我使用 sudo 和 2.6 系统版本的 Python：

```
sudo /usr/bin/python2.6 setup.py install 
```

哪个生产包：

```
running install
running build
running build_py
running build_ext
running install_lib
copying build/lib.macosx-10.8-intel-2.6/_jpype.so -> /Library/Python/2.6/site-packages
creating /Library/Python/2.6/site-packages/jpype
copying build/lib.macosx-10.8-intel-2.6/jpype/__init__.py -> /Library/Python/2.6/site-packages/jpype
copying build/lib.macosx-10.8-intel-2.6/jpype/_core.py -> /Library/Python/2.6/site-packages/jpype
copying build/lib.macosx-10.8-intel-2.6/jpype/_darwin.py -> /Library/Python/2.6/site-packages/jpype
copying build/lib.macosx-10.8-intel-2.6/jpype/_gui.py -> /Library/Python/2.6/site-packages/jpype
copying build/lib.macosx-10.8-intel-2.6/jpype/_jarray.py -> /Library/Python/2.6/site-packages/jpype
copying build/lib.macosx-10.8-intel-2.6/jpype/_jclass.py -> /Library/Python/2.6/site-packages/jpype
copying build/lib.macosx-10.8-intel-2.6/jpype/_jcollection.py -> /Library/Python/2.6/site-packages/jpype
copying build/lib.macosx-10.8-intel-2.6/jpype/_jexception.py -> /Library/Python/2.6/site-packages/jpype
copying build/lib.macosx-10.8-intel-2.6/jpype/_jobject.py -> /Library/Python/2.6/site-packages/jpype
copying build/lib.macosx-10.8-intel-2.6/jpype/_jpackage.py -> /Library/Python/2.6/site-packages/jpype
copying build/lib.macosx-10.8-intel-2.6/jpype/_jproxy.py -> /Library/Python/2.6/site-packages/jpype
copying build/lib.macosx-10.8-intel-2.6/jpype/_jwrapper.py -> /Library/Python/2.6/site-packages/jpype
copying build/lib.macosx-10.8-intel-2.6/jpype/_linux.py -> /Library/Python/2.6/site-packages/jpype
copying build/lib.macosx-10.8-intel-2.6/jpype/_properties.py -> /Library/Python/2.6/site-packages/jpype
copying build/lib.macosx-10.8-intel-2.6/jpype/_pykeywords.py -> /Library/Python/2.6/site-packages/jpype
copying build/lib.macosx-10.8-intel-2.6/jpype/_refdaemon.py -> /Library/Python/2.6/site-packages/jpype
copying build/lib.macosx-10.8-intel-2.6/jpype/_windows.py -> /Library/Python/2.6/site-packages/jpype
creating /Library/Python/2.6/site-packages/jpype/awt
copying build/lib.macosx-10.8-intel-2.6/jpype/awt/__init__.py -> /Library/Python/2.6/site-packages/jpype/awt
creating /Library/Python/2.6/site-packages/jpype/awt/event
copying build/lib.macosx-10.8-intel-2.6/jpype/awt/event/__init__.py -> /Library/Python/2.6/site-packages/jpype/awt/event
copying build/lib.macosx-10.8-intel-2.6/jpype/awt/event/WindowAdapter.py -> /Library/Python/2.6/site-packages/jpype/awt/event
copying build/lib.macosx-10.8-intel-2.6/jpype/findjvm.py -> /Library/Python/2.6/site-packages/jpype
copying build/lib.macosx-10.8-intel-2.6/jpype/JClassUtil.py -> /Library/Python/2.6/site-packages/jpype
copying build/lib.macosx-10.8-intel-2.6/jpype/nio.py -> /Library/Python/2.6/site-packages/jpype
copying build/lib.macosx-10.8-intel-2.6/jpype/reflect.py -> /Library/Python/2.6/site-packages/jpype
creating /Library/Python/2.6/site-packages/jpypex
copying build/lib.macosx-10.8-intel-2.6/jpypex/__init__.py -> /Library/Python/2.6/site-packages/jpypex
creating /Library/Python/2.6/site-packages/jpypex/swing
copying build/lib.macosx-10.8-intel-2.6/jpypex/swing/__init__.py -> /Library/Python/2.6/site-packages/jpypex/swing
copying build/lib.macosx-10.8-intel-2.6/jpypex/swing/AbstractAction.py -> /Library/Python/2.6/site-packages/jpypex/swing
copying build/lib.macosx-10.8-intel-2.6/jpypex/swing/pyutils.py -> /Library/Python/2.6/site-packages/jpypex/swing
byte-compiling /Library/Python/2.6/site-packages/jpype/__init__.py to __init__.pyc
byte-compiling /Library/Python/2.6/site-packages/jpype/_core.py to _core.pyc
byte-compiling /Library/Python/2.6/site-packages/jpype/_darwin.py to _darwin.pyc
byte-compiling /Library/Python/2.6/site-packages/jpype/_gui.py to _gui.pyc
byte-compiling /Library/Python/2.6/site-packages/jpype/_jarray.py to _jarray.pyc
byte-compiling /Library/Python/2.6/site-packages/jpype/_jclass.py to _jclass.pyc
byte-compiling /Library/Python/2.6/site-packages/jpype/_jcollection.py to _jcollection.pyc
byte-compiling /Library/Python/2.6/site-packages/jpype/_jexception.py to _jexception.pyc
byte-compiling /Library/Python/2.6/site-packages/jpype/_jobject.py to _jobject.pyc
byte-compiling /Library/Python/2.6/site-packages/jpype/_jpackage.py to _jpackage.pyc
byte-compiling /Library/Python/2.6/site-packages/jpype/_jproxy.py to _jproxy.pyc
byte-compiling /Library/Python/2.6/site-packages/jpype/_jwrapper.py to _jwrapper.pyc
byte-compiling /Library/Python/2.6/site-packages/jpype/_linux.py to _linux.pyc
byte-compiling /Library/Python/2.6/site-packages/jpype/_properties.py to _properties.pyc
byte-compiling /Library/Python/2.6/site-packages/jpype/_pykeywords.py to _pykeywords.pyc
byte-compiling /Library/Python/2.6/site-packages/jpype/_refdaemon.py to _refdaemon.pyc
byte-compiling /Library/Python/2.6/site-packages/jpype/_windows.py to _windows.pyc
byte-compiling /Library/Python/2.6/site-packages/jpype/awt/__init__.py to __init__.pyc
byte-compiling /Library/Python/2.6/site-packages/jpype/awt/event/__init__.py to __init__.pyc
byte-compiling /Library/Python/2.6/site-packages/jpype/awt/event/WindowAdapter.py to WindowAdapter.pyc
byte-compiling /Library/Python/2.6/site-packages/jpype/findjvm.py to findjvm.pyc
byte-compiling /Library/Python/2.6/site-packages/jpype/JClassUtil.py to JClassUtil.pyc
byte-compiling /Library/Python/2.6/site-packages/jpype/nio.py to nio.pyc
byte-compiling /Library/Python/2.6/site-packages/jpype/reflect.py to reflect.pyc
byte-compiling /Library/Python/2.6/site-packages/jpypex/__init__.py to __init__.pyc
byte-compiling /Library/Python/2.6/site-packages/jpypex/swing/__init__.py to __init__.pyc
byte-compiling /Library/Python/2.6/site-packages/jpypex/swing/AbstractAction.py to AbstractAction.pyc
byte-compiling /Library/Python/2.6/site-packages/jpypex/swing/pyutils.py to pyutils.pyc
running install_egg_info
Writing /Library/Python/2.6/site-packages/JPype-0.5.4.2-py2.6.egg-info 
```

由于将在此过程中创建的站点包复制并粘贴到我的虚拟环境中似乎不起作用，我正在寻找一种解决方案，让我可以使用虚拟环境和我在计算机上使用的 ActiveState Python，但没有'不会产生 gcc 错误。

我还咨询并尝试了以下stackoverflow帖子中的建议，但无济于事：

[如何在 OS X Lion 上安装 JPype 以与 Neo4j 一起使用？](https://stackoverflow.com/questions/8525193/cannot-install-jpype-on-os-x-lion-to-use-with-neo4j)（这个直接解决了我的问题，但似乎并没有在山狮中解决）

我还确保我使用的是最新的 JPype 设置文件，该文件应该与 Mountain Lion 兼容：

[https://github.com/originell/jpype/blob/142cea8ac3924187bcde9057bab62cce15354e37/setup.py](https://github.com/originell/jpype/blob/142cea8ac3924187bcde9057bab62cce15354e37/setup.py)

但是，在尝试了目前在线提供的各种解决方案后，包括重新安装 Xcode 和使用

```
export CC=/usr/bin/g++ 
```

试图强制使用不同的编译器，到目前为止没有任何效果。

```
**Python Details:**
ActivePython 2.7.2.5 (ActiveState Software Inc.) based on
Python 2.7.2 (default, Jun 24 2011, 12:20:15) 
[GCC 4.2.1 (Apple Inc. build 5664)] on darwin

**Java Details:**
java version "1.6.0_35"
Java(TM) SE Runtime Environment (build 1.6.0_35-b10-428-11M3811)
Java HotSpot(TM) 64-Bit Server VM (build 20.10-b01-428, mixed mode) 
```

# php - Amazon S3 在删除前检查对象元数据

> ID：12750749
> 
> 赞同：0
> 
> 时间：2012-10-05T16:54:50.313
> 
> 标签：php, api, file-upload, amazon-s3, amazon-web-services

当我的应用程序用户将文件上传到 S3 时，我在对象中添加了带有用户 ID 的元数据。

例如`x-amz-meta-user_id = 9`

我允许我的用户在 php 应用程序中删除他们的文件：

```
$response = $s3->delete_objects ($bucket, array(
            'objects' => $array //objects to be deleted
)); 
```

在删除对象之前，是否可以检查 S3 中的用户 ID 元数据是否与我的应用中的用户 ID 匹配？这将增加额外的安全性，不允许用户删除其他用户的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T02:16:54.137

在 PHP SDK 中，使用该[`AmazonS3::get_object_headers()`](http://docs.amazonwebservices.com/AWSSDKforPHP/latest/#m=AmazonS3/get_object_headers)方法查找`x-amz-meta*`您选择的标头并将其与当前用户进行比较。

如果您有匹配项，请继续执行删除。

# java - 如何在 Java 中模拟 SOAP Web 服务

> ID：12750751
> 
> 赞同：13
> 
> 时间：2012-10-05T16:54:54.120
> 
> 标签：java, soap, mocking

有一个使用 SOAP Web 服务的 Web 应用程序。即使没有开发 Web 服务客户端，市场上也存在各种工具来测试 SOAP Web 服务。例如 SOAP-UI、tcpmon

但我想要它的反面。我想通过一些硬编码响应对我的应用程序执行单元测试。实际上，在我的项目中，有单独的团队来开发客户端 Web 服务和服务器端 Web 服务。我在客户端。所以，有时我无法执行我的测试，因为服务器端开发不完整。

我想开发一个应用程序，即使 Web 服务服务器还没有准备好，我也可以通过它测试我的应用程序。有没有简单的方法来设置某种虚假的 Web 服务？这样做的可能选择是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-05T16:58:24.913

您提到的 Soap UI[*正是*您想要](http://www.soapui.org/Service-Mocking/mocking-soap-services.html)的。它在指定端口上启动小型 Web 服务器并处理与给定 WSDL 匹配的请求。

您可以使用静态的、硬编码的响应并使用 Groovy 使模拟 Web 服务更加动态。它变得更好：Soap UI 可以将整个模拟包装在一个独立的 WAR 中，您可以将其部署在任何 servlet 容器上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T23:30:05.330

这是另一个 web 服务模拟工具：

[https://sourceforge.net/projects/soaprest-mocker/](https://sourceforge.net/projects/soaprest-mocker/)

您可以将它部署在服务器上并使用它的 Web 服务接口来设置响应和验证记录的请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T17:15:11.917

您还可以使用 mockey，这是一个基于服务器的解决方案。从[这里得到它。](https://github.com/clafonta/Mockey)

# c# - 将表单大小调整为水平

> ID：12750761
> 
> 赞同：3
> 
> 时间：2012-10-05T16:55:40.157
> 
> 标签：c#, windows, winforms, forms, resize

> **可能重复：**
> [在 C# 中垂直（仅）可调整大小的窗口形式](https://stackoverflow.com/questions/2140882/vertically-only-resizable-windows-form-in-c-sharp)

我有一个案例，我需要允许用户仅水平调整表单的大小。表格的最大宽度为`x`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T16:58:59.647

将您的 MaximumSize 和 MinimumSize 设置为相同的高度，但宽度可变。

为了使调整大小光标不会出现在顶部或底部：

```
protected override void WndProc(ref Message m) {
    base.WndProc(ref m);
    switch (m.Msg) {
        case 0x84: //WM_NCHITTEST
            var result = (HitTest)m.Result.ToInt32();
            if (result == HitTest.Top || result == HitTest.Bottom)
                m.Result = new IntPtr((int)HitTest.Caption);
            if (result == HitTest.TopLeft || result == HitTest.BottomLeft)
                m.Result = new IntPtr((int)HitTest.Left);
            if (result == HitTest.TopRight || result == HitTest.BottomRight)
                m.Result = new IntPtr((int)HitTest.Right);

            break;
    }
}
enum HitTest {
    Caption = 2,
    Transparent = -1,
    Nowhere = 0,
    Client = 1,
    Left = 10,
    Right = 11,
    Top = 12,
    TopLeft = 13,
    TopRight = 14,
    Bottom = 15,
    BottomLeft = 16,
    BottomRight = 17,
    Border = 18
} 
```

代码复制和修改自：[Vertically (only) resizable windows form in C#](https://stackoverflow.com/questions/2140882/vertically-only-resizable-windows-form-in-c-sharp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T17:00:57.907

Form 具有MaximumSize 和MinimumSize 属性。

将它们设置为与 Size 相同，当然 MaximumSize 的 Width 除外。

禁用 MaximizeBox 也可能是一个好主意，因为它并没有多大意义（它只会将窗口放在当前监视器的左上角）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T16:59:47.600

您可以创建一个静态变量来保存它可以拥有的 mex 值。

在表单调整大小事件中，您可以检查该值是否大于您的静态值并将其更改为该值：

```
int maxValue = 100;

    private void MainForm_ResizeEnd(object sender, EventArgs e)
            {
                 if(this.Size.Width > maxValue)
                     this.Size.Width = maxValue;
            } 
```

或者您可以在属性中设置最大值：MaximunSize

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T17:21:06.143

在表单 SizeChanged 事件中，您可以执行以下操作

```
 private void Form1_ResizeEnd(object sender, EventArgs e) {
        //this does not prevent a resize to full screen

        int i = this.Size.Height;
        //force width to 300
        this.Size = new Size(300, i);
        return;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T16:59:15.167

将窗体的最小和最大高度设置为窗体的初始高度。这应该防止表单垂直调整大小并允许用户仅水平调整表单大小。

如果要设置水平调整大小的范围，请对表单的最小或最大宽度执行相同操作。

# jsf-2 - 如果我编写@managed bean注释并在faces-config.xml中定义相同的bean，是否会有两个实例

> ID：12750771
> 
> 赞同：2
> 
> 时间：2012-10-05T16:56:39.820
> 
> 标签：jsf-2, managed-bean, faces-config

在我的应用程序中，我们在某些地方同时使用 @ManagedBean 注释来处理 Person bean 和我们在 faces-confing.xml 中定义的同一个 Person bean，如下所示。

```
@ManagedBean("name=person")
 @SessionScoped
 Public class Person{

} 
```

面孔-config.xml

```
<managed-bean>
     <managed-bean-name>person</managed-bean-name>
     <managed-bean-class>com.test.sample.Person</managed-bean-class>
     <managed-bean-scope>session</managed-bean-scope>
</managed-bean> 
```

我的问题是这种方法是否为 Person bean 创建了两个实例，或者我这样做是否重要？如果我对我的应用程序中的每个 Bean 都这样做，这对我的应用程序的性能有什么影响吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T18:36:19.273

为这种情况定义了一个优先级。`@ManagedBean`注释避免了必须在其中配置条目，`faces-config.xml`但如果两者都有，则`<managed-bean>`条目将覆盖注释。

在您的情况下，将只有一个实例像您的`faces-config.xml`条目一样配置。在您的情况下，两种方法的配置方式相同，但是，如果您将`faces-config.xml`条目更改为类似

```
<managed-bean>
     <managed-bean-name>personBean</managed-bean-name>
     <managed-bean-class>com.test.sample.Person</managed-bean-class>
     <managed-bean-scope>session</managed-bean-scope>
</managed-bean> 
```

您的 bean 将在`personBean`而不是`person`（注解定义的名称）下注册。

# python - ConfigParser 中的布尔值始终返回 True

> ID：12750778
> 
> 赞同：27
> 
> 时间：2012-10-05T16:57:23.173
> 
> 标签：python, boolean, configparser

这是我的示例脚本：

```
import ConfigParser

config = ConfigParser.ConfigParser()
config.read('conf.ini')

print bool(config.get('main', 'some_boolean'))
print bool(config.get('main', 'some_other_boolean')) 
```

这是`conf.ini`：

```
[main]
some_boolean: yes
some_other_boolean: no 
```

运行脚本时，它会打印`True`两次。为什么？应该是`False`，`some_other_boolean`设置为`no`。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-10-05T17:03:29.663

使用[`getboolean()`](http://docs.python.org/library/configparser.html#ConfigParser.RawConfigParser.getboolean)：

```
print config.getboolean('main', 'some_boolean') 
print config.getboolean('main', 'some_other_boolean') 
```

从[Python 手册](http://docs.python.org/library/configparser.html#ConfigParser.RawConfigParser.getboolean)：

> ```
> RawConfigParser.getboolean(section, option) 
> ```
> 
> 一种将指定部分中的选项强制为布尔值的便捷方法。请注意，该选项的可接受值为“1”、“yes”、“true”和“on”，这导致此方法返回 True，以及“0”、“no”、“false”和“off” "，这会导致它返回 False。以不区分大小写的方式检查这些字符串值。任何其他值都会导致它引发 ValueError。

构造`bool()`函数将空字符串转换为 False。非空字符串为 True。`bool()`对“假”、“否”等没有做任何特别的事情。

```
>>> bool('false')
True
>>> bool('no')
True
>>> bool('0')
True
>>> bool('')
False 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T17:03:03.400

它返回字符串“no”。bool("no") 为真

# wpf - 如何将 ComboBox 转换为使用绑定的 CompositeCollection？

> ID：12750784
> 
> 赞同：2
> 
> 时间：2012-10-05T16:57:45.337
> 
> 标签：wpf, xaml, binding, combobox, compositecollection

我有一个 ComboBox，它有一个绑定的项目源......我已经将我的示例剥离到关键部分：

```
<UserControl x.Class="My.Application.ClientControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"                         
             xmlns:conv="clr-namespace:My.Utilities.Converters"
             Name="ClientControl">

    <UserControl.Resources>
        <ResourceDictionary>
            <CollectionViewSource Key="x:ClientsCollection" />
        </ResourceDictionary>

        <conv:ClientOptions x:Key="ClientOptions" />

    </UserControl.Resources>

    ...

    <ComboBox Name="Options" 
              DataContext="ClientsCollection" 
              ItemsSource="{Binding [ClientNumber], Converter={StaticResource ClientOptions}" />

</UserControl> 
```

这可行，但我现在想在我的组合框中添加一个手动项目，该项目将触发名为“其他...”的替代功能，因此我不得不转向使用 CompositeCollection ...，如下所示：

```
<ComboBox Name="Options"
          DataContext="ClientsCollection">
    <ComboBox.ItemsSource>
        <CompositeCollection>

            <CollectionContainer Collection="{Binding [ClientNumber], Converter={StaticResource ClientOptions} />
            <ComboBoxItem>Other...</ComboBoxItem>
        </CompositeCollection>
</ComboBox> 
```

尽我所能，使用 CompositeCollection 时绑定的项目不会填充。它仅显示手动 ComboBoxItem“其他...”。如果我删除该项目，则列表为空。如果我将断点附加到转换器，它不会捕获任何东西，这似乎表明甚至没有尝试绑定。

我显然不了解 CompositeCollection 中的绑定功能是如何发生的。有人可以在我的 XAML 中看到错误或解释我缺少什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:32:12.787

在 ComboBox.Resources 中声明 CompositeCollection 并将其与 ItemsSource="{Binding Source={StaticResource myCompositeCollection}}" 一起使用。

```
<UserControl x.Class="My.Application.ClientControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"                         
         xmlns:conv="clr-namespace:My.Utilities.Converters"
         Name="ClientControl">

<UserControl.Resources>
    <ResourceDictionary>
        <CollectionViewSource Key="x:ClientsCollection" />
    </ResourceDictionary>

    <conv:ClientOptions x:Key="ClientOptions" />
    <CompositeCollection x:Key="myCompositeCollection">

        <CollectionContainer Collection="{Binding Source={StaticResource ClientsCollection}, Path=[ClientNumber], Converter={StaticResource ClientOptions} />
        <ComboBoxItem>Other...</ComboBoxItem>
    </CompositeCollection>

</UserControl.Resources>

...

<ComboBox Name="Options" 
          DataContext="ClientsCollection" 
          ItemsSource="{Binding Source={StaticResource myCompositeCollection}}" /> 
```

如果您在元素语法中的 ItemsSource 属性内声明 CompositeCollection，则 CollectionContainer.Collection 的绑定找不到它的 DataContext。

在 Resources 部分中，像 CompositeCollection 这样的 Freezable 继承了其声明元素的 DataContext，就好像它们是该元素的逻辑子级一样。但是，这是 Resources 属性和 ContentControl.Content 之类的属性或包含控件的逻辑子项（可能还有其他一些）的类似属性的特性。如果您使用元素语法来设置属性的值，通常您将不得不预期 DataContext 等属性的属性值继承不起作用，因此没有显式 Source 的绑定也不起作用。

# ios - CFStringTransform 线程安全且可重入吗？

> ID：12750785
> 
> 赞同：2
> 
> 时间：2012-10-05T16:57:48.977
> 
> 标签：ios, multithreading, nsmutablestring

我看到我的应用程序多次陷入死锁状态（主线程正在等待`semaphore_wait_trap`，请参阅下面的调用堆栈），同时在全局后台队列中同时调用多个实例，`CFStringTransform`如下所示：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    CFStringTransform(…);
}); 
```

调用堆栈如下所示：

```
Thread 1, Queue : com.apple.main-thread
#0  0x310bff04 in semaphore_wait_trap ()
#1  0x341c1fae in _dispatch_semaphore_wait_slow ()
#2  0x32bc5c32 in SBSProcessAssertionCreateForPID ()
#3  0x3685bca4 in -[UIApplication beginBackgroundTaskWithExpirationHandler:] ()
#4  0x0011a1c2 in -[XXX downloadPicture:]
…
#10 0x32f86a6e in __NSFireDelayedPerform ()
#11 0x354a15de in __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ ()
#12 0x354a1290 in __CFRunLoopDoTimer ()
#13 0x3549ff00 in __CFRunLoopRun ()
#14 0x35412ebc in CFRunLoopRunSpecific ()
#15 0x35412d48 in CFRunLoopRunInMode ()
#16 0x3594f2ea in GSEventRunModal ()
#17 0x367f1300 in UIApplicationMain ()
#18 0x000c3eb8 in main

Thread 3, Queue : com.apple.libdispatch-manager
#0  0x310c0648 in kevent64 ()
#1  0x341c3978 in _dispatch_mgr_invoke ()
#2  0x341c3658 in _dispatch_mgr_thread$VARIANT$mp ()

Thread 5 WebThread, Queue : (null)
#0  0x310bfeb4 in mach_msg_trap ()
#1  0x310c004c in mach_msg ()
#2  0x354a1044 in __CFRunLoopServiceMachPort ()
#3  0x3549fda2 in __CFRunLoopRun ()
#4  0x35412ebc in CFRunLoopRunSpecific ()
#5  0x35412d48 in CFRunLoopRunInMode ()
#6  0x349b6a74 in RunWebThread(void*) ()
#7  0x3925f310 in _pthread_start ()
#8  0x3925f1d8 in thread_start ()

Thread 11 com.apple.NSURLConnectionLoader, Queue : (null)
#0  0x310bfeb4 in mach_msg_trap ()
#1  0x310c004c in mach_msg ()
#2  0x354a1044 in __CFRunLoopServiceMachPort ()
#3  0x3549fda2 in __CFRunLoopRun ()
#4  0x35412ebc in CFRunLoopRunSpecific ()
#5  0x35412d48 in CFRunLoopRunInMode ()
#6  0x32f0bbcc in +[NSURLConnection(Loader) _resourceLoadLoop:] ()
#7  0x32f8f67c in __NSThread__main__ ()
#8  0x3925f310 in _pthread_start ()
#9  0x3925f1d8 in thread_start ()

Thread 14 com.apple.CFSocket.private, Queue : (null)
#0  0x310d0594 in select$DARWIN_EXTSN ()
#1  0x354a51f6 in __CFSocketManager ()
#2  0x3925f310 in _pthread_start ()
#3  0x3925f1d8 in thread_start () 
```

和 31 个线程调用`CFStringTransform`：

```
Thread 12, Queue : com.apple.root.default-priority
#0  0x310d00fc in __psynch_mutexwait ()
#1  0x3924f128 in pthread_mutex_lock ()
#2  0x31448548 in umtx_lock ()
#3  0x3144a090 in icu::UnicodeString::doReplace(int, int, unsigned short const*, int, int) ()
#4  0x314a5b3a in icu::UnicodeString::append(int) ()
#5  0x314a1510 in icu::UnicodeSet::_appendToPat(icu::UnicodeString&, int, signed char) ()
#6  0x314a168c in icu::UnicodeSet::_generatePattern(icu::UnicodeString&, signed char) const ()
#7  0x314a2e4e in icu::UnicodeSet::applyPattern(icu::RuleCharacterIterator&, icu::SymbolTable const*, icu::UnicodeString&, unsigned int, icu::UnicodeSet& (icu::UnicodeSet::*)(int), UErrorCode&) ()
#8  0x314a1e7c in icu::UnicodeSet::applyPattern(icu::UnicodeString const&, icu::ParsePosition&, unsigned int, icu::SymbolTable const*, UErrorCode&) ()
#9  0x314a1e06 in icu::UnicodeSet::UnicodeSet(icu::UnicodeString const&, icu::ParsePosition&, unsigned int, icu::SymbolTable const*, UErrorCode&) ()
#10 0x314a1d8e in icu::UnicodeSet::UnicodeSet(icu::UnicodeString const&, icu::ParsePosition&, unsigned int, icu::SymbolTable const*, UErrorCode&) ()
#11 0x314fe56c in ___lldb_unnamed_function2011$$libicucore.A.dylib ()
#12 0x314fda50 in ___lldb_unnamed_function2010$$libicucore.A.dylib ()
#13 0x314fd954 in ___lldb_unnamed_function2009$$libicucore.A.dylib ()
#14 0x314ff540 in ___lldb_unnamed_function2031$$libicucore.A.dylib ()
#15 0x314feed6 in ___lldb_unnamed_function2025$$libicucore.A.dylib ()
#16 0x314feb0c in ___lldb_unnamed_function2024$$libicucore.A.dylib ()
#17 0x31521468 in ___lldb_unnamed_function2248$$libicucore.A.dylib ()
#18 0x3152015a in icu::Transliterator::createBasicInstance(icu::UnicodeString const&, icu::UnicodeString const*) ()
#19 0x31522cd6 in ___lldb_unnamed_function2296$$libicucore.A.dylib ()
#20 0x31523c32 in ___lldb_unnamed_function2305$$libicucore.A.dylib ()
#21 0x3152003a in icu::Transliterator::createInstance(icu::UnicodeString const&, UTransDirection, UParseError&, UErrorCode&) ()
#22 0x315200d6 in icu::Transliterator::createInstance(icu::UnicodeString const&, UTransDirection, UErrorCode&) ()
#23 0x314bfc1c in ___lldb_unnamed_function1051$$libicucore.A.dylib ()
#24 0x314bfb0e in ___lldb_unnamed_function1050$$libicucore.A.dylib ()
#25 0x3151fada in icu::Transliterator::filteredTransliterate(icu::Replaceable&, UTransPosition&, signed char, signed char) const ()
#26 0x3151f724 in icu::Transliterator::transliterate(icu::Replaceable&, int, int) const ()
#27 0x3154a8da in utrans_trans ()
#28 0x354b3928 in CFStringTransform ()
#30 0x002716c8 in __18-[Foo bar]_block_invoke_0
#31 0x341bd11e in _dispatch_call_block_and_release ()
#32 0x341c1960 in _dispatch_root_queue_drain ()
#33 0x341c1ac0 in _dispatch_worker_thread2 ()
#34 0x39254a10 in _pthread_wqthread ()
#35 0x392548a4 in start_wqthread () 
```

似乎问题发生在字符串修改调用`doReplace`中。但它似乎`doReplace`也是线程安全的，因为它使用互斥锁，因此多个线程同时修改同一个可变字符串应该没问题。事实上，在我的例子中，没有一个可变字符串被多个线程修改——每个线程都`CFStringTransform`调用一个唯一的字符串。所以基本上，我不知道为什么它被卡住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:34:24.877

有趣的。

ICU 字符串转换存在于一个名为`libicucore`. Mac OS 10.8 版本的源代码[可在此处获得](http://www.opensource.apple.com/source/ICU/ICU-491.11.1/)。

该`doReplace`函数在中实现`icuSources/common/unistr.cpp`但不`umtx_lock`直接调用。iOS 可能会使用另一个版本的库，或者调用可能只是在一个内联函数（或预处理器魔法）中。所以我无法确定锁是全局共享锁还是每个字符串都有一个。

无论如何，我在 Mac OS 上做了一些测试（24k 字符串，10000 个分派的块），但没有成功重现死锁。

你确定你的代码还没有运行吗？所有线程都在同一个堆栈帧中吗？

# jquery - 使用溢出自动显示嵌套在 Div 中的所有 Div

> ID：12750786
> 
> 赞同：1
> 
> 时间：2012-10-05T16:58:00.503
> 
> 标签：jquery, css

我正在使用 hovercard 插件[http://designwithpc.com/Plugins/Hovercard](http://designwithpc.com/Plugins/Hovercard)。在我的一个 div 中，我有

```
overflow:auto; 
```

在那个 div 里面，我有几个链接，上面附有悬停卡。当我将鼠标悬停在链接上并出现悬停卡时，它仅显示在**父**div 中可见的悬停卡部分。这当然是因为溢出：自动。

如何使悬停卡出现在父 div 外部的上方，并且其可视区域不受父 div 的限制？

顺便说一句，我必须在父 div 中使用溢出：自动。这是无法改变的。

这是我正在使用的代码：

HTML

```
<div class="demo-live">
    <strong>Hover over the red text to see the hovercard in action:</strong>
    <p>
        jQuery by
        <div class="hc-preview" style="z-index: 0; ">
            <label id="demo-basic" class="hc-name" style="z-index: 0; ">John Resig</label>
            <div class="hc-details" style="width: 400px; background-color: rgb(255, 255, 255); display: none; background-position: initial initial; background-repeat: initial initial; ">
                <img class="hc-pic" src="http://ejohn.org/files/short.sm.jpg">
                <p>John Resig is an application developer at Khan Academy. He was a JavaScript tool developer for the Mozilla Corporation. He is also thecreator and lead developer of the jQuery JavaScript library.</p>
                <p></p>
            </div>
        </div>
        is a cross-browser JS library designed to simplify the client-side scripting of                         HTML. It was released in January of 2006 at BarCamp NYC. Used by over 46% of the                            10,000 most visited websites, it's the most popular JavaScript library in use today.
    </p>
</div>​ 
```

JS

```
$(document).ready(function() {

    //plugin script for demo basic---
    var hoverHTMLDemoBasic = '<p>' + 'John Resig is an application developer at Khan Academy. He was a ' + 'JavaScript tool developer for the Mozilla Corporation. He is also the' + 'creator and lead developer of the jQuery JavaScript library.<p>';

    $("#demo-basic").hovercard({
        detailsHTML: hoverHTMLDemoBasic,
        width: 400,
        cardImgSrc: 'http://ejohn.org/files/short.sm.jpg'
    });

}); 
```

CSS

```
.demo-live{
max-width:300px;
overflow:auto;    
}​ 
```

**演示**：发生了什么：[JsFiddle](http://jsfiddle.net/L7y7t/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:40:35.480

一种选择是您可以在悬停时删除溢出并在取消悬停时将其重新添加，但我不知道这是否适合您的页面

# python - Python jug（或其他）用于集群环境中具有异构任务的令人尴尬的并行作业

> ID：12750787
> 
> 赞同：3
> 
> 时间：2012-10-05T16:58:03.313
> 
> 标签：python, parallel-processing, cluster-computing

我有通常的大量依赖作业，并希望在 PBS 集群环境中有效地运行它们。我一直在使用 Ruffus 并且对它非常满意，但我也想尝试一下其他方法。

在 python 中看起来很有趣的一个是水罐。然而，jug 似乎假设这些工作的要求是同质的。我有一些工作需要 8GB RAM，而另一些只需要 100MB；有些可以消耗所有处理器，有些是单线程的。我的目标是能够快速组装管道，运行它并根据依赖关系“更新”它，并合理地记录，以便我可以看到哪些作业仍然需要运行。有没有人使用水罐或其他类似系统来满足这些类型的要求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T16:09:50.793

壶的作者在这里。

Jug 确实很好地处理了依赖关系。如果您更改任何输入或中间步骤，运行`jug status`将告诉您计算的状态。

目前无法指定某些任务（jug 称为作业）应该分配给它们的多个进程。过去，每当我有要在多个线程中运行的任务时，我都被迫采取最坏情况的方法并将所有进程分配给该`jug execute`进程。

当然，这意味着单线程任务将占用所有进程。由于大部分计算都在多线程任务中，因此可以接受。

# javascript - Dojo 1.8/RequireJS AMD 加载程序和 CoffeeScript 插件兼容性

> ID：12750789
> 
> 赞同：0
> 
> 时间：2012-10-05T16:58:14.127
> 
> 标签：javascript, dojo, coffeescript, requirejs, js-amd

Dojo 1.8 和 RequireJS 都支持 AMD 加载程序，但我在使用 [CoffeeScript 插件](https://github.com/jrburke/require-cs)时遇到了问题：

*   如果使用 Dojo AMD loader：CS 插件不兼容
*   如果使用 RequireJS：dojo/* 模块兼容但 dijit/* 不兼容（抛出错误）

是否有另一个兼容的 Dojo 加载器/CoffeeScript 插件？或任何解决方案（使用 CoffeeScript watch 命令除外）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T15:30:04.840

你在最新的 Git 提交评论中看到过这个吗？

*3 天前更新到 requirejs 2.1.0*

# c# - DNN 6 在登录页面中隐藏检索密码

> ID：12750791
> 
> 赞同：1
> 
> 时间：2012-10-05T16:58:21.887
> 
> 标签：c#, asp.net, dotnetnuke, dotnetnuke-6

我想删除/隐藏登录表单中的检索密码链接，我从 web.config 禁用了它的功能，但客户仍然希望我从表单中删除它，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T19:26:21.040

我不相信除了用样式隐藏它之外，目前没有办法删除它：

```
.dnnLoginActions {display:none;} 
```

# post - JSF 接收 POST 参数

> ID：12750794
> 
> 赞同：13
> 
> 时间：2012-10-05T16:58:37.957
> 
> 标签：post, jsf-2

今天我使用 servlet 从 HTML 页面接收 POST，然后重定向到我的 JSF 页面。

这是我的实际 Servlet：

```
 public class CommInServlet extends HttpServlet {

   private String reportKey;

      protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
         req.getSession(true).setAttribute("reportKey", req.getParameter("reportkey"));
         req.getRequestDispatcher("main.xhtml").forward(req, resp);
       }

    } 
```

HTML 帖子页面：

```
<html>
<head />
<body>
<form action="Filtro" method="post">
<input type="text" size="120" name="reportkey" value="XXXXXXXXXXXX" />
<input type="submit" value="doPost" />
</form>
</body>
</html> 
```

是否可以直接发布到我的 JSF 页面（ManagedBean）？如何？我想将 Servlet 替换为……更好的东西。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-06T04:51:13.833

你当然可以。无论如何，大多数 JSF 请求都是`POST`s，因此，如果您使用要处理`POST`请求的 JSF 页面的路径，则可以在该页面支持的托管 bean 中获取参数，或者在页面本身中获取参数.

在托管 bean 中：

```
 @PostConstruct
      public void initMyBean(){
      /**This map contains all the params you submitted from the html form */
      Map<String,String> requestParams = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap();
      requestParams.get("reportKey");
                       } 
```

**或** 在托管 bean 中有

```
 @ManagedProperty(value="#{param.reportKey}")
     String reportKey;
     //getter and setter of course! 
```

您注释的方法`@PostConstruct`将在托管 bean 被实例化后执行。以上将为您提供托管 bean 中的访问权限。

但是，如果您首先需要页面中的值，则可以在页面中使用此值（最好在顶部）

```
 <f:metadata>
      <f:viewParam name="reportKey" value="#{backingBean.reportKey}" required="true"/>
     </f:metadata> 
```

请注意如何在视图中对参数执行验证。很酷的功能。

请确保将您的 html 表单`action`属性设置为 JSF 视图的路径。

# c - 初始化元素在 C 中不是常量

> ID：12750796
> 
> 赞同：20
> 
> 时间：2012-10-05T16:58:49.263
> 
> 标签：c

我来自 javascript/php/python 可能我遗漏了一些东西，这里是代码：

```
const int a = 50;
const int c = 100;
const int d = 100;
int endX = c + a;
int endY = d;
int startX, startY, b; 
```

我明白了

> ex1.4.c:6：错误：初始化元素不是常量
> ex1.4.c:7：错误：初始化元素不是常量

有人有解释吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-05T17:25:20.263

不幸的是，在 C中，`const`变量并不是真正的 const。

以下是 c99 标准的摘录。

> **6.7.8 初始化**
> 
> 4.  **具有静态存储持续时间**的对象的初始化程序中的所有表达式都应为**常量表达式或字符串文字**。

常量定义如下：

> **6.4.4 常量**
> 
> 句法
> 
> 持续的：
> 
> ```
> integer-constant       (e.g. 4, 42L)
> floating-constant      (e.g. 0.345, .7)
> enumeration-constant   (stuff in enums)
> character-constant     (e.g. 'c', '\0') 
> ```

该标准定义常量表达式如下：

> **6.6 常量表达式**
> 
> (7) 初始化器中的常量表达式允许更大的自由度。这样的常量表达式应为或评估为以下之一：
> 
> — 算术常数表达式，
> 
> — 一个空指针常量，
> 
> — 地址常数，或
> 
> — 对象类型的地址常量加上或减去整数常量表达式。
> 
> (8) 算术常量表达式应具有算术类型，并且 **只能具有**整数常量、浮点常量、枚举常量、字符常量和 sizeof 表达式的操作数。算术常量表达式中的强制转换运算符只能将算术类型转换为算术类型，但作为结果为整数常量的 sizeof 运算符的操作数的一部分除外。

因此，`c`and`a`不是常量表达式，在您的情况下不能用作初始化程序。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-05T17:40:10.653

`const`与 C++ 不同，表达式在 C 中必须是编译时常量，因此`c+a`不能用作常量。在 C 中处理此问题的常用方法是使用**预处理器**：

```
#define A 50
#define C 100
#define D 100
int endX = C + A;
int endY = D;
int startX, startY, b; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-05T17:04:42.587

如果您将 endX 声明为全局变量，则该错误是有意义的。

原因是全局变量是在编译时初始化的，而您试图将 endX 初始化为必须在执行时完成的操作。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-05T17:04:20.987

是的，您不能将某些东西初始化为变量。编译器进行初始化，在编译时它不知道 ; 的值`c+a`。

`int x = 1;`类型初始化很好，编译器只是将 a放在目标代码中`1`的地址处。`x`

要将某些东西初始化为`c+a`，您希望在运行时，在启动代码中`c`或中的构造函数中进行`C++`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T17:22:19.450

在 C 编程语言中，具有静态存储持续时间的对象必须使用常量表达式（或包含常量表达式的聚合）进行初始化。如果`endX`具有静态存储持续时间，则其初始化`(c+a)`程序不是常量表达式（即无法在翻译阶段计算表达式）。

# jquery - 数据表隐藏一列并显示另一列

> ID：12750797
> 
> 赞同：0
> 
> 时间：2012-10-05T16:58:50.233
> 
> 标签：jquery, datatables

我确信这在某种程度上是可能的，但我正在做的事情是行不通的。

```
$('#campaign_creative_performance-table #show_thumb').change(function() {
    var show = ($(this).is(':checked')) ? true : false,
        oTable = $('#campaign_creative_performance-table table.sortable').dataTable();
    oTable.fnSetColumnVis(14, show ? false : true);
    oTable.fnSetColumnVis(15, show);
}); 
```

这应该隐藏第 14 列并显示第 15 列，反之亦然。

它所做的是交换列标题并更改列的宽度，但内容没有改变。

我尝试将重绘标志放在第一个标志上，但没有任何变化。

**附加信息：** 我通过 sAjaxSource 获取数据并通过 fnRowCallback 对其进行格式化。这两列的格式如下所示：

```
$('td:eq(14)', nRow).html('<p class="limit160" title="'+aData[14]+'">'+aData[14]+'</p>');
$('td:eq(15)', nRow).html('<img src="'+aData[15]+'" />'); 
```

**进一步调查** 问题在于 fnRowCallback 中的格式设置。隐藏第 14 列，将 15 变为 14，因此数据是从 aData 14 而不是 15 获取的。因此需要对格式化程序进行某种测试，以找出它实际在做什么......或者不要使用 $ ('td:eq(14)') 来确定列。我只是不知道该怎么做。

一个简化的示例在[http://jsfiddle.net/nbscb/](http://jsfiddle.net/NbSCb/) 请注意，当检查“单击我”时，Col3的数据是不正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:11:21.670

这应该有效。

```
$('#campaign_creative_performance-table #show_thumb').change(function() {
    table.fnSetColumnVis(14, !this.checked);
    table.fnSetColumnVis(15, this.checked);
}); 
```

[**演示**](http://jsfiddle.net/HEDvf/80/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T17:20:16.950

您不需要每次`.change`触发时都重新创建数据表。这是使用全局变量的好时机：

```
oTable = $('#campaign_creative_performance-table table.sortable').dataTable();

$('#show_thumb').change(function() {
    var show = $(this).is(':checked'); // Boolean
    oTable.fnSetColumnVis(4, !show);
    oTable.fnSetColumnVis(5, show);
});​ 
```

[http://jsfiddle.net/JPU7A/](http://jsfiddle.net/JPU7A/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-08T03:08:37.093

听起来像与此线程类似的问题：

[http://www.datatables.net/forums/discussion/16236/showinghiding-columns-with-ajax/p1][1]

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-11T17:02:17.023

问题是格式。在 fnRowCallback 中进行格式化时，必须确定格式决定。基本上，如果您隐藏第 14 列，第 15 列将变为第 14 列并采用其格式。

解决方案是使用 if 语句查看外部复选框的规则。

```
if($('#show_thumb').is(':checked')) {
    $('td:eq(14)', nRow).html('<img src="'+aData[15]+'" style="max-height:100px;" />');
} else {
    $('td:eq(14)', nRow).html('<p title="'+aData[14]+'">'+aData[14]+'</p>');
} 
```

请注意，这两个格式选项都会影响第 14 行，但分别使用数据点 15 和 14。

# java - Webview 在 Ice Cream Sandwitch 中显示白色空白页

> ID：12750798
> 
> 赞同：3
> 
> 时间：2012-10-05T16:58:56.967
> 
> 标签：java, android, webview, android-4.0-ice-cream-sandwich

在我的网络视图中，我加载了一个 URL，该 URL 具有电视频道直播的嵌入式视频播放器。它在除 ICS(4) 之外的所有 Android 操作系统版本中都能正常工作。第一次它可以很好地播放视频，但是当我返回并再次进入包含视频的页面时，视频不会加载并显示空白页。如果我从应用程序设置中强制停止应用程序并再次启动应用程序然后它运行良好然后像往常一样再次出现白屏，我已经实施了很多策略，这是最新的，我完全被困在这里：

```
public class Livetvwebview extends Activity {

    RelativeLayout a;
    WebView webtv;
    String url;
    VideoView video;
    WChromeClient chromeClient;
    WebViewClient wvClient;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        // requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        getWindow().requestFeature(Window.FEATURE_PROGRESS);
        setContentView(R.layout.livewebview);
        Toast.makeText(getApplicationContext(),
                "Channel is loading..This may take upto a minute",
                Toast.LENGTH_LONG).show();
        url = getIntent().getStringExtra("tvchannel");
        Log.i("TVURL", url);
        webtv = (WebView) findViewById(R.id.webViewlive);
        webtv.clearCache(true);
        webtv.loadUrl(url);

        webtv.getSettings().setLoadWithOverviewMode(true);
        webtv.getSettings().setUseWideViewPort(true);

        webtv.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);

        webtv.setWebChromeClient(new WChromeClient());
        webtv.setWebViewClient(new myWebClient());
        webtv.getSettings().setJavaScriptEnabled(true);

        webtv.getSettings().setPluginState(PluginState.ON);

        webtv.getSettings().setDomStorageEnabled(true);
    }

    public class myWebClient extends WebViewClient {
        @Override
        public void onPageStarted(WebView view, String url, Bitmap favicon) {
            // TODO Auto-generated method stub

            super.onPageStarted(view, url, favicon);

        }

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            // TODO Auto-generated method stub

            view.loadUrl(url);

            return true;
        }

        @Override
        public void onPageFinished(WebView view, String url) {
            // TODO Auto-generated method stub
            super.onPageFinished(view, url);

        }
    }

    @SuppressLint("NewApi")
    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        WebSettings webSettings = webtv.getSettings();
        webSettings.setCacheMode(WebSettings.LOAD_NO_CACHE);
        webtv.onPause();
        this.finish();
        super.onPause();

    }

    @SuppressLint("NewApi")
    @Override
    protected void onResume() {

        webtv.onResume();
        super.onResume();

    }

    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        // android.os.Process.killProcess(android.os.Process.myPid());
        Editor editor = getSharedPreferences("clear_cache",
                Context.MODE_PRIVATE).edit();
        editor.clear();
        editor.commit();
        trimCache(this);

        super.onDestroy();
    }

    class WChromeClient extends WebChromeClient {
        @Override
        public void onProgressChanged(WebView view, int progress) {
            Log.i("Method", "Onrogresschanged");

            Livetvwebview.this.setTitle("Loading...");
            Livetvwebview.this.setProgress(progress * 100);
            if (progress == 100)
                Livetvwebview.this.setTitle("LiveTv");

        }

        @Override
        public void onShowCustomView(View view, CustomViewCallback callback) {
            // TODO Auto-generated method stub
            super.onShowCustomView(view, callback);
            if (view instanceof FrameLayout) {
                FrameLayout frame = (FrameLayout) view;
                if (frame.getFocusedChild() instanceof VideoView) {
                    webtv.setVisibility(View.GONE);
                    video = (VideoView) frame.getFocusedChild();
                    FrameLayout.LayoutParams par = new FrameLayout.LayoutParams(
                            LayoutParams.MATCH_PARENT,
                            LayoutParams.MATCH_PARENT);
                    par.gravity = Gravity.CENTER_HORIZONTAL;
                    video.setLayoutParams(par);
                    frame.removeView(video);
                    a.addView(video);
                    video.setOnCompletionListener(new OnCompletionListener() {

                        @Override
                        public void onCompletion(MediaPlayer mp) {
                            Toast.makeText(Livetvwebview.this,
                                    "Video completed", Toast.LENGTH_LONG)
                                    .show();

                        }
                    });

                    video.setOnErrorListener(new OnErrorListener() {

                        @Override
                        public boolean onError(MediaPlayer mp, int what,
                                int extra) {
                            Toast.makeText(Livetvwebview.this,
                                    "Encountered some error", Toast.LENGTH_LONG)
                                    .show();
                            return true;
                        }
                    });
                    video.start();
                }

            }

        }
    }

    public static void trimCache(Context context) {
        try {
            File dir = context.getCacheDir();
            if (dir != null && dir.isDirectory()) {
                deleteDir(dir);

            }
        } catch (Exception e) {
            // TODO: handle exception
        }
    }

    public static boolean deleteDir(File dir) {
        if (dir != null && dir.isDirectory()) {
            String[] children = dir.list();
            for (int i = 0; i < children.length; i++) {
                boolean success = deleteDir(new File(dir, children[i]));
                if (!success) {
                    return false;
                }
            }
        }

        return dir.delete();
    }
} 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T20:45:44.687

经过很长时间的研究，我自己发现当我写在 onPause()

```
webtv.destroy(); 
```

代替

```
webtv.onPause(); 
```

解决问题:)

# iphone - CSS 过渡：在平移左边缘时修复 div 的右边缘位置

> ID：12750799
> 
> 赞同：0
> 
> 时间：2012-10-05T16:58:58.853
> 
> 标签：iphone, css, webkit, mobile-webkit

我正在尝试使用 CSS3 转换为 DIV 设置动画。示例 DIV 是：

HTML：

```
<div class="element"></div> 
```

CSS：

```
.element {
  -webkit-transform: translate3d(0,0,0);
  -webkit-transition: -webkit-transform 2s linear, width 2s linear;
  position: absolute;
  left: 100px; top: 100px;
  height: 10px; width: 50px;
  background-color: black;
} 
```

这意味着 DIV 在其容器中占据从 (100px, 100px) 到 (150px, 110px) 的区域 - 并且右边缘固定在 150px。

我希望 DIV 保持 150 像素的静态右边缘，同时我将左边缘从屏幕上移开，所以我一直在（通过 Javascript）向 DIV 应用一个转换类，如下所示：

CSS：

```
.transition {
  -webkit-transform: translate3d(-200px, 0, 0);
  width: 150px;
} 
```

我看到的问题是宽度上的过渡跟不上转换后的 DIV 的左边缘，所以不是在大小和左位置上均匀增加，而是右边缘位置随着 DIV 滑动而波动不同的速率，轻微闪烁（取决于平台闪烁的程度）。

这个问题在 Mobile Safari（iPhone 上的 Phonegap webview 是我的主要开发平台）上发生得更加生动，而不是在 Chrome 上。

我在[http://jsfiddle.net/XwuBz/](http://jsfiddle.net/XwuBz/)上放了一个 JSFiddle 来演示它（在 iPhone 上查看它以查看它的发生）。

有没有其他方法可以达到这个最终结果？

提前致谢，

担

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:55:13.210

好吧，iOS Safari 似乎在转换/变换方面存在一些奇怪的问题。

我尝试仅使用 jQuery 来实现相同的结果，并且它适用于 iPhone 4s、iOS6：

```
$('.element').animate({left:'-=200','width':'+=200'},2000); 
```

这是一个**[演示](http://jsfiddle.net/gionaf/gkBKV/)**。

# tomcat - 使用 Tomcat 进行 Solr 配置

> ID：12750801
> 
> 赞同：1
> 
> 时间：2012-10-05T16:58:59.313
> 
> 标签：tomcat, ubuntu, configuration, solr

我已经按照这些[说明](http://web.archive.org/web/20121016161949/http://www.tc.umn.edu/~brams006/solr_ubuntu.html)安装了 Solr 。

Tomcat 运行良好，因为：

```
sudo service tomcat6 status 
 * Tomcat servlet engine is running with pid 12865 
```

当我使用我的公共 DNS 和 8080 端口在浏览器上导航到 Solr 时，什么都没有。

我错过了任何步骤吗？我做错了什么？

我在 Tomcat 日志中收到此错误：

```
SEVERE: java.lang.RuntimeException: java.io.IOException: Cannot create directory: /var/lib/tomcat6/solr/data/index 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T08:40:32.073

确保您对`/var/lib/tomcat6/solr/data/`目录具有写入权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T19:24:55.517

检查其所有者是否`/var/lib/tomcat6/solr`为 Tomcat。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T12:20:05.503

在尝试访问 Solr 管理页面之前，您应该首先通过访问检查 Tomcat 是否运行正常`http://localhost:8080`

如果您看不到该页面，则意味着 Tomcat 根本没有运行，那么

1）首先检查您的Java JDK是否安装，是否使用正确的。

```
sudo bash
which java 
```

如果输出不是您要运行 tomcat 的输出，则执行

```
export PATH=/path/to/your/jdk;$PATH 
```

现在`which java`看看是否使用了正确的。

2）如果tomcat仍在运行，请关闭它

```
ps -ef | grep tomcat
/path/to/tomcat/bin/shutdown.sh 
```

然后通过做开始它

```
/path/to/tomcat/bin/startup.sh 
```

现在尝试访问`http://localhost:8080`

如果您现在可以访问 Tomcat，然后按照其他步骤从[http://www.tc.umn.edu/~brams006/solr_ubuntu.html安装 solr](http://www.tc.umn.edu/~brams006/solr_ubuntu.html)

# php - SQL：如果在另一个表中找不到给定的 ID，则在一个表中插入值（使用单个查询）

> ID：12750818
> 
> 赞同：2
> 
> 时间：2012-10-05T17:00:03.943
> 
> 标签：php, mysql, sql, insertion

我在 MySQL 服务器上有两个表：T1 和 T2。ID 是 T1 的主键，ID 是 T2 的外键。

*我的问题是*：如果我知道与它们相关的 ID（值）但只有在 T1 中找不到该 ID 的情况下，如何在 T2 中插入一些值（使用单个查询）？

```
T1
id,c1,c2,c3,many other columns
example id:'fry54632' //yes, it is not numerical if matters

T2
id,cc1,cc2,cc3,few other columns
example id:'fry54632', cc1,cc2,cc3... have nothing in common with c1,c2,c3

myDataSource:
countains id, which is same for T1 and T2 and contains some other data that should be
inserted in T2 but not in T1 
```

我想我应该使用这样的东西，但我不确定：

```
insert into t2 (col1,col2,col3)
select 'const1','const2','const3'
from t1 where not exists 
(select id from t1 t --...t1, I mean: insert 'const1'...and etc strings in t2 if
--specified ID was not found in t1}
where t.id='someID but not t2.id') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T17:16:48.627

```
INSERT INTO T1 (ID, Col1, Col2)
SELECT ISNULL(T1.ID,-1), ISNULL(T1.Col1,'Arbatory Value'), ISNULL(T1.Col2,'Arbatory Value')
FROM T2
LEFT OUTER JOIN T1
ON T2.ID = T1.ID
WHERE T1.ID IS NULL 
```

# css - 三列布局...左（固定像素）、中（50%）、右（50%）

> ID：12750826
> 
> 赞同：2
> 
> 时间：2012-10-05T17:00:38.130
> 
> 标签：css, layout, html

我希望左栏为 40px。我希望中心列是剩余视口的 50%，我希望右列是剩余视口的另外 50%。

它应该看起来像这样：

```
[LEFTCOLUMN][...CENTER COLUMN...][...RIGHT COLUMN....]
[...40px...][........50%........][........50%........] 
```

此处介绍的解决方案（[链接](https://stackoverflow.com/questions/11389588/three-column-div-layout-dynamics-left-fixed-center-fluid-right-fluid "关联")）不适用于我的情况，因为中心列在移动设备上可能变得过于折叠。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T17:19:03.803

我认为这可能对你有用：

[http://jsfiddle.net/KR9zj/](http://jsfiddle.net/KR9zj/)

本质上，诀窍是浮动 LEFTCOLUMN，并将 CENTERCOLUMN 和 RIGHTCOLUMN 包装在一个带有`overflow: hidden`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T17:30:09.990

使用`display:table;`和`display:table-cell;`。无需挣扎`float:x;`。

HTML：

```
<div id='container'>
    <div id='first'>a</div>
    <div id='second' class='fifty'>b</div>
    <div id='third' class='fifty'>c</div>
</div>​ 
```

CSS：

```
#container { display:table; width:100%; }
#container > * { display:table-cell; }
#first { width:40px; min-width:40px; }
#container .fifty { width:50%; } 
```

现场示例：http: [//jsfiddle.net/j25wK/](http://jsfiddle.net/j25wK/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T17:21:43.490

这行得通吗？

**演示**：http: [//jsfiddle.net/BVhCZ/](http://jsfiddle.net/BVhCZ/)

如您所见，左边是绝对的，“剩余”是一个包含两个 50% 浮动子级的块 div。应该适用于任何宽度 >~ 40px

代码：

```
<div class="left">LEFT</div>
<div class="content">
    <div class="content-left">CONTENT LEFT</div>
    <div class="content-right">CONTENT RIGHT</div>
</div>

.left {
    position: absolute;
    top: 0;
    left: 0;
    width: 40px;    
    background-color: #ddd;
}
.content {
    margin-left: 40px;    
}
.content .content-left {
    float: left;
    width: 50%;
    clear: none;
    background-color: #fdd;
}
.content .content-right {
    float: right;
    width: 50%;
    clear: none;   
    background-color: #ddf;
} 
```

# object - Powershell：将所有项目/属性加载到新对象中

> ID：12750827
> 
> 赞同：1
> 
> 时间：2012-10-05T17:00:38.173
> 
> 标签：object, powershell

拿这个代码：

```
$logged_on_user = get-wmiobject win32_computersystem | select username 
```

如果我想将值输出到新字符串中，我会执行以下操作：

```
$A = $logged_on_user.username 
```

但是，如果我执行以下操作：

```
$logged_on_user = get-wmiobject win32_computersystem | select * 
```

..尝试将所有值分配给一个新的“对象”，对吗？：

```
$logged_on_user.items
$logged_on_user.value
$logged_on_user.text
$logged_on_user.propertry 
```

我已经尝试了所有方法，但它们都不起作用。

有人有什么想法吗？

谢谢

PS我想我可能把这个问题的标题弄错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T17:28:51.473

在您的示例中：

```
$logged_on_user = get-wmiobject win32_computersystem | select username 
```

使用单个属性 - 用户名创建一个新的 PSCustomObject。当您执行以下操作时：

```
$A = $logged_on_user.username 
```

您将 PSCustomObject 的用户名属性的返回值分配给变量 $A。因为用户名属性的返回类型是字符串，所以 $A 也将是字符串。

执行以下操作时：

```
$cs = get-wmiobject win32_computersystem 
```

如果您将 $cs 分配给一个新变量，如下所示：

```
$newVariable = $cs 
```

然后 $newVariable 将引用与 $cs**相同**的对象，因此在 $cs 上可访问的所有属性和方法也将在 $newVariable 上访问。

**如果在将返回值分配给另一个变量时未指定对象的任何属性或调用任何方法，则返回值是对象本身，而不是对象的某个属性或方法的返回值。**

附加信息，但与问题没有直接关系：

当您将 get-wmiobject 的输出通过管道传输到 select-object 时，如下所示：

```
$cs = get-wmiobject win32_computersystem | select-object * 
```

变量 $cs 的类型是：PSCustomObject 而不是 ManagementObject（当您不通过管道传输到 Select-Object 时），它具有与通过管道传输的 ManagementObject 所做的所有相同的属性及其值。

因此，如果您只需要 ManagementObject 包含的属性值，则无需将输出通过管道传输到 Select-Object，因为这只会使用 MangementObject 中的值创建一个新对象（PSCustomObject 类型）。当您想要选择正在通过管道输入的对象的属性子集，或者想要创建具有通过表达式计算的不同属性的新 PSCustomObject 时，Select-Object 很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:22:26.833

我不确定您是否在询问`Get-WmiObject`一般复制 PowerShell 对象的结果。在前一种情况下，`Get-WmiObject`返回[`ManagementObject`类](http://msdn.microsoft.com/library/2wfhy6hw.aspx)的实例，它实现了提供[方法的](http://msdn.microsoft.com/library/system.management.managementobject.clone.aspx)[`ICloneable`接口](http://msdn.microsoft.com/library/hdf3zaf2.aspx)。你可以这样使用它...[`Clone`](http://msdn.microsoft.com/library/system.management.managementobject.clone.aspx)

```
$computerSystem = Get-WmiObject -Class 'Win32_ComputerSystem';
$computerSystemCopy = $computerSystem.Clone(); 
```

上述代码执行后，`$computerSystem`将`$computerSystemCopy`是相同但完全独立的[`ManagementObject`](http://msdn.microsoft.com/library/2wfhy6hw.aspx)实例。您可以通过运行来确认这一点...

```
$areSameValue = $computerSystem -eq $computerSystemCopy;
$areSameInstance = [Object]::ReferenceEquals($computerSystem, $computerSystemCopy); 
```

...并注意到`$areSameValue`is`$true`和`$areSameInstance`is `$false`。

# ruby - 获取对象的实例变量

> ID：12750829
> 
> 赞同：0
> 
> 时间：2012-10-05T17:00:39.173
> 
> 标签：ruby, instance-variables, accessor

我有一个带有实例变量`s`的s 数组：`Tile``@type`

```
class Tile
  Types = ["l", "w", "r"]
  def initialize(type)
    @type = type
  end
end
s = []
20.times { s << Tile.new(Tile::Types.sample)} 
```

我如何得到每个`Tile`？`@type`如何只返回具有特定对象的对象`@type`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T17:08:49.890

如果你想得到一个包含每个类型属性的数组，你首先需要创建至少一个阅读器`@type`：

```
class Tile
  attr_reader :type
  Types = ["l", "w", "r"]
  def initialize(type)
    @type = type

  end
end 
```

然后使用`Array#map`：

```
type_attribute_array = s.map(&:type)
#or, in longer form
type_attribute_array = s.map{|t| t.type) 
```

如果您想根据 Tile 对象的`@type`值过滤它们，`Array#select`是您的朋友：

```
filtered_type_array = s.select{|t| t.type == 'some_value'} 
```

这是文档`Array`：[Ruby Array](http://www.ruby-doc.org/core-1.9.3/Array.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T17:13:11.443

您可以`to_s`在您的 Tile 类中覆盖，从中返回类型，然后通过调用迭代您的数组`s`以打印类型`<tile_object>.to_s`

```
class Tile
  Types = ["l", "w", "r"]
  def initialize(type)
     @type = type
  end

  def to_s
     @type
  end
end

s = []
20.times { s << Tile.new(Tile::Types.sample)}
s.each {|tile| puts tile.to_s} 
```

# javascript - JavaScript 错误地将毫秒转换为日期？

> ID：12750830
> 
> 赞同：0
> 
> 时间：2012-10-05T17:00:39.563
> 
> 标签：javascript, date

我注意到我正在处理的一些数据（2000 多行数据）存在问题。

问题很奇怪：代码工作正常！*直到*JavaScript 无法生成正确日期时到达特定日期（在本例中为 2011 年 1 月 8 日）？

所以，解释一下：我正在使用 'dd/mm/yyyy' 格式的字符串并执行（这不起作用）：

*   `var date = '01/08/2011'.split('/');`
*   `var milliseconds = new Date(date[2], parseInt(date[1]) - 1, date[0]).getTime();`=> 1291161600000
*   `new Date(1291161600000);`=> 2010 年 12 月 1 日星期三 00:00:00 GMT+0000 (GMT)

...但是该确切的代码在 2011 年 8 月 1 日之前的任何日期都可以正常工作吗？

所以再试一次`29/07/2011`...

*   `var date = '29/07/2011'.split('/');`
*   `var milliseconds = new Date(date[2], parseInt(date[1]) - 1, date[0]).getTime();`=> 1311894000000
*   `new Date(1311894000000);`=> 2011 年 7 月 29 日星期五 00:00:00 GMT+0100 (BST)

唯一的区别是返回的 (GMT) 和 (BST) 值，这表明存在语言环境问题。但是为什么会发生这种情况，我该如何修复代码来解决这个问题？

非常感谢您能给我的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T17:01:53.133

你在做八进制！

使用基数！

```
parseInt(date[1],10) 
```

来自[MDN 文档`parseInt(string[, radix])`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)：

> 如果 radix 未定义或为 0，JavaScript 假定如下：
> 
> *   如果输入字符串以“0x”或“0X”开头，则基数为 16（十六进制）。
> *   如果输入字符串以“0”开头，则基数为八（八进制）。这个特性是非标准的，一些实现故意不支持它（而是使用基数 10）。由于这个原因，在使用 parseInt 时总是指定一个基数。
> *   如果输入字符串以任何其他值开头，则基数为 10（十进制）。

# java - 用一个替换所有连续的“\r\n 或 \n”

> ID：12750831
> 
> 赞同：2
> 
> 时间：2012-10-05T17:00:41.903
> 
> 标签：java, html, regex, string

目前，我仅使用以下两个替换显示从 DB 获得的消息：

```
text = text.replace("\r\n", "<br />");
text = text.replace("\n", "<br />"); 
```

但问题是如果有很多连续的 "\n" 我会有很多
s 或空格，我只想把它们都变成一个。那么你的建议是什么？有没有一种快速替换方法可以使所有连续的\n\n\n\n\n\n\n只有一个只有一个br？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T17:01:53.260

您可以使用量词`+`来表示 1 或更多.. 另外，`*`表示 0 或更多..

```
text = text.replaceAll("\n+", "<br />");

text = text.replaceAll("[\n\r]+", "<br />"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T17:04:48.417

如果您有多个`\r\n`或`\n`介于两者之间的其他内容，您也可以使用

```
text.replaceAll("(\r\n)+", "<br />")
    .replaceAll("\n+", "<br />"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T17:02:18.757

你有没有试过这个：

```
text = text.replace("(\r\n)+", "<br />");
text = text.replace("\n+", "<br />"); 
```

表示前一场比赛的`+`“一个或多个”。

# mysql - 具有不均匀行长的 mySQL 连接表

> ID：12750835
> 
> 赞同：1
> 
> 时间：2012-10-05T17:00:50.943
> 
> 标签：mysql

我有一场比赛的数据，其中一张表是比赛统计数据，另一张表是比赛信息，如主队、客队、比赛日期和获胜者。我正在寻找一种将游戏信息数据与统计数据相结合的方法。统计数据配置为前五名球员为主队，后五名球员为客队。

游戏信息架构：游戏日志（游戏ID，游戏日期，*主队*，客队，获胜者）游戏统计（*游戏ID*，*指数*，球员，积分，篮板，...）

我希望我的输出是：

*   家, 主队, 播放器, 积分, 反弹
*   家, 主队, 播放器, 积分, 反弹
*   家, 主队, 播放器, 积分, 反弹
*   家, 主队, 播放器, 积分, 反弹
*   家, 主队, 播放器, 积分, 反弹
*   远, awayteam, 播放器, 点, 反弹
*   远, awayteam, 播放器, 点, 反弹
*   远, awayteam, 播放器, 点, 反弹
*   远, awayteam, 播放器, 点, 反弹
*   远, awayteam, 播放器, 点, 反弹

我似乎找不到一种方法来加入，以便球队列的前五个名字作为主队，后五个名字作为客队。我设法做到这一点的唯一方法是增加两列，每列都有十个团队名称，即：

```
SELECT gamelog.hometeam, gamelog.awayteam, gamestats.player, gamestats.points, gamestats.rebounds 
    WHERE gamestats.id = 18873
    AND gamelog.id = gamestats.id; 
```

*   主队, 客队, 球员, 积分, 反弹
*   主队, 客队, 球员, 积分, 反弹
*   主队, 客队, 球员, 积分, 反弹
*   主队, 客队, 球员, 积分, 反弹
*   主队, 客队, 球员, 积分, 反弹
*   主队, 客队, 球员, 积分, 反弹
*   主队, 客队, 球员, 积分, 反弹
*   主队, 客队, 球员, 积分, 反弹
*   主队, 客队, 球员, 积分, 反弹
*   主队, 客队, 球员, 积分, 反弹

我想另一种可能性是通过 PHP 进行多个查询，然后在查询完成后组合数据，但我不确定这是否会更有效。我还可以在 gamestats 表中添加一个包含团队名称的列，但这似乎是多余的。

编辑：发布架构并清除语言

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T19:01:35.757

我想到了。必须将 gamestats 表的前五行与 gamelog 表主队名称连接，然后将 gamestats 表的后五行与 game log 表客队名称进行 UNION。

# excel - 在 Excel VBA 中，“IsNull()”和“var = Null”有什么区别？

> ID：12750839
> 
> 赞同：1
> 
> 时间：2012-10-05T17:00:56.760
> 
> 标签：excel, null, runtime-error, string, vba

考虑以下 VBA 函数：

```
Function getFirstColumn(Optional sheetName As String) As Long
    'In particular the IF statement below.
    If sheetName = "" Or sheetName = Null Then sheetName = ActiveWorkbook.ActiveSheet.Name
    With ActiveWorkbook.Worksheets(sheetName)
        getFirstColumn = .Cells.Find("*", .Cells(1), xlFormulas, xlWhole, xlByColumns, xlNext).Column
        If Err <> 0 Then getFirstColumn = 0
    End With
End Function 
```

使用此功能时，从第二张打开的工作表中使用它时没有问题。

但是，当代码更改为基于函数的等效代码时，`'If IsEmpty(sheetName) Or IsNull(sheetName) Then sheetName = ActiveWorkbook.ActiveSheet.Name`如果我尝试使用不拥有它的工作表中的函数，我会遇到问题：

> Erro em tempo de execução '9':
> Subscrito fora do intervalo。

它们之间有什么区别？为什么会准确触发这样的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:05:56.890

“sheetName”是一个变量。该变量可能是未定义的，可能是指一个对象......或者可能是 NULL。

如果它是一个对象，则该对象本身可能评估为变量值 NULL。因此，“IsNull()”函数。

其他变体包括“IsEmpty()”（您提到过）、“IsNothing()”甚至“IsMissing()”：

*   [http://social.msdn.microsoft.com/Forums/en-US/accessdev/thread/aff30d44-0a7d-435e-8f15-7edd4f7f03d1/](http://social.msdn.microsoft.com/Forums/en-US/accessdev/thread/aff30d44-0a7d-435e-8f15-7edd4f7f03d1/)

*   [http://www.tek-tips.com/faqs.cfm?fid=3710](http://www.tek-tips.com/faqs.cfm?fid=3710)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T17:29:45.130

在 VBA 中，未指定的可选字符串的计算结果为空字符串。

因此，如果在没有参数的情况下调用 getFirstColumn，则 sheetName 是空字符串，并且

```
sheetName = "" is true
isEmpty(sheetName) is false
isNull(sheetName) is false
sheetName = Null is Null btw. 
```

所以选择第一个选项。

# c# - ListView 不会显示 InsertItemTemplate

> ID：12750843
> 
> 赞同：0
> 
> 时间：2012-10-05T17:01:14.607
> 
> 标签：c#, asp.net, listview

我有一个`ListView`带有`AccordionPane`“添加记录”按钮的内部。当我单击“添加记录”按钮时，`InsertItemTemplate`不会出现。奇怪的是，如果我再次单击该按钮，它确实会出现。我已经尝试了很多事情，比如添加`CommandName="InitInsert"`或`CommandName="Insert"`到按钮，从`ListView`它`Accordion`里面取出，把“插入”按钮从里面`ListView`取出`Accordion`，都无济于事。我有什么明显的遗漏吗？我究竟做错了什么？

```
<asp:ListView runat="server" ID="List1"  
    OnItemDataBound="List1_ItemDataBound"
    OnItemCommand="List1_ItemCommand"
    OnItemEditing="List1_ItemEditing"
    OnItemUpdating="List1_ItemUpdating"
    OnItemCanceling="List1_ItemCancelling"
    OnItemDeleting="List1_ItemDeleting"
    OnItemInserting="List1_ItemInserting"
    OnSorting="List1_Sorting">
<LayoutTemplate>
    <table border="0" cellpadding="1" cellspacing="0">
    <thead>
    <tr>
        <th><asp:LinkButton runat="server" ID="BtnCmpnyId" CommandName="Sort" CommandArgument="CmpnyId" Text="Company Code" /></th>
        ... more columns ...
    </tr>
    </thead>

    <tbody>
        <tr runat="server" id="itemPlaceholder"></tr>
    </tbody>

    <tfoot>
        <tr><td colspan="7" style="text-align: center;">
            <asp:Button runat="server" ID="BtnAddRecord" Text="Add Record" OnClick="BtnAddRecord_Click" />
        </td></tr>
    </tfoot>
    </table>
</LayoutTemplate>

<InsertItemTemplate>
    <tr>
        <td>
            <asp:HiddenField runat="server" ID="HiddenID" Value="-1" />
            <asp:TextBox runat="server" ID="TextCmpnyId" Text='<%# Eval("CmpnyId") %>' MaxLength="6" Width="50" />
        </td>

        ... more fields ...
    </tr>
</InsertItemTemplate>

... other templates ...
</asp:ListView> 
```

在我后面的代码中：

```
protected void BtnAddRecord_Click(object sender, EventArgs e)
{
    List1.EditIndex = -1;
    List1.InsertItemPosition = InsertItemPosition.LastItem;
    //Button button = (Button)List1.Controls[0].FindControl("BtnAddRecord");
    //button.Visible = false;
}

// ItemCommand() is an empty shell for now...
protected void List1_ItemCommand(object sender, ListViewCommandEventArgs e)
{
    switch (e.CommandName.ToLower())
    {
        case "sort":
            break;

        case "edit":
            break;

        case "insert":
            break;

        case "update":
            break;

        case "cancel":
            break;

        case "delete":
            break;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:05:17.873

我相信您在更改位置时必须重新绑定 ListView，因为模板构建过程是脱离绑定的。不是100%确定...

# jquery - 设置 iframe 内容样式的问题

> ID：12750851
> 
> 赞同：0
> 
> 时间：2012-10-05T17:02:04.177
> 
> 标签：jquery, iframe

我尝试了很长时间使用 jquery 来设计这个简单的 soundcloud 播放器示例。

```
 <html>
<head>
    <title>test</title>
</head>

<body>
<iframe id="player" width="300px" height="50px" scrolling="no" frameborder="no" src="http://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F60778614&amp;auto_play=false&amp;show_artwork=false&amp;color=ff7733&amp;show_bpm=true"></iframe>
<script>
$('#player').contents().find('body').hide();
</script>
</body>
</html> 
```

（我只想更改 .singleTrack 和 #widget 中的背景颜色，但没有任何效果）有人可以帮我吗

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:04:40.923

您无法更改 iframe 内容。

如果您想进行一些更改，您必须直接编辑 iframe 的 CSS（如果您可以访问它）。

# php - PHP 老式函数“或”异常

> ID：12750852
> 
> 赞同：8
> 
> 时间：2012-10-05T17:02:15.570
> 
> 标签：php, function, exception, boolean, try-catch

> **可能重复：**
> [PHP：关于指令的“或”语句失败：如何抛出新异常？](https://stackoverflow.com/questions/1211237/php-or-statement-on-instruction-fail-how-to-throw-a-new-exception)

在 PHP 中，尤其是在各种 MySQL 连接教程中的新手中很受欢迎，你总是能够做这样的事情......

```
<?php
foo() or die('foo() failed!');
?> 
```

但是，如果我尝试这样的事情，它会失败......

```
<?php
foo() or throw new Exception('AHH!');
?> 
```

像这样...

> “解析错误：语法错误，意外'抛出'（T_THROW）在......”

有人知道如何做类似的事情吗？我必须在“或”之后设置一个变量吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T17:04:27.830

用不那么“聪明”的方式来做：

```
if(!foo()) {
    throw new Exception('AHH!');
} 
```

如果您想知道为什么`or throw new Exception()`不起作用，那是因为您依赖于运算[符](https://en.wikipedia.org/wiki/Logical_disjunction)[的短路](https://en.wikipedia.org/wiki/Short-circuit_evaluation)：如果第一个参数为真，则无需评估第二个参数以确定其中一个是否为真（因为您已经知道其中*至少有*一个是正确的）。[`or`](https://en.wikipedia.org/wiki/Logical_disjunction)

 *你不能这样做，`throw`因为它是一个不返回布尔值（或任何值）的表达式，所以`or`ing 没有任何意义。

如果你**真的**想这样做，@emie 删除的答案应该可以工作（创建一个只抛出异常的函数），因为即使是没有返回值的函数在布尔语句中也是有效的，但似乎是个坏主意创建一个这样的函数，这样你就可以用布尔语句做一些聪明的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T17:08:50.690

以前也有人问过类似的问题。

[PHP：关于指令的“或”语句失败：如何抛出新异常？](https://stackoverflow.com/questions/1211237/php-or-statement-on-instruction-fail-how-to-throw-a-new-exception)

> 原因
> 
> ```
> bar() or throw new Exception(); 
> ```
> 
> 是非法的，是因为
> 
> ```
> (boolean)throw new Exception(); 
> ```
> 
> 也是非法的。本质上，抛出异常的过程不会生成返回值供操作员检查。*

# vba - 将 strOld 命名为 strNew 不起作用

> ID：12750855
> 
> 赞同：0
> 
> 时间：2012-10-05T17:02:31.860
> 
> 标签：vba, zip, ms-word

`Name`我有一个宏，它在末尾重命名文件以使用以下命令将 .zip 扩展名更改回 .docx 扩展名：

```
Name strOldZip as strNewDocX 
```

如果我在调试模式下运行它，它可以工作。但是，每当我全速运行宏时，它就不能正常工作。.docx 文件已创建，但 .zip 文件图标仍保留在桌面上。Word 图标和文件名不会出现。因此，我的桌面上有一个 .zip 文件的空图标，并且我确认没有隐藏的 .docx 文件，但除非我搜索它，否则它不会出现。（一旦我在搜索中找到它，我可以将它拖到一个新文件夹中，然后返回以显示它。）

我试过在 name 命令之后让宏休眠一段时间，但这也不起作用。我认为打嗝可能是在 Windows 需要更改桌面图标并显示新名称的时候，这就是它在调试模式下工作的原因。我对吗？如果是这样，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:29:09.900

作为@GSerg 上面评论的答案发布：

“试着让它早睡，而不是睡后。”

像魅力一样工作。谢谢，GSerg！

# android - Android，删除 RoboGuice 帮助需要替换 getInjector().getInstance

> ID：12750859
> 
> 赞同：0
> 
> 时间：2012-10-05T17:03:04.790
> 
> 标签：android, roboguice

我正在开发第三方应用程序，我需要删除 RoboGuice，我需要知道我需要做什么才能用 android 代码替换各种 getInjector 方法在我有的活动中

```
private CodeView codeView;
...

this.codeView.setHelper(RoboGuice.getInjector().getInstance(Helper.class)); 
```

这只是设置 Helper 类的实例并在活动的 onCreate 中初始化它的情况吗？

我还需要知道如何/我需要做什么来更换

```
@Inject
private Configuration config; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:30:02.047

这就像创建任何对象的新实例一样。在 onCreate() 做：

```
codeView.setHelper(new Helper()); 
```

# java - 为 logback 实现 DBAppender 以将日志插入 CouchDB

> ID：12750861
> 
> 赞同：4
> 
> 时间：2012-10-05T17:03:18.430
> 
> 标签：java, logging, couchdb, slf4j, logback

我需要能够实现用于 logback 的 DBAppender 以使用 Java 将事件日志写入 CouchDB。对于传统的关系数据库，这是通过扩展 DBAppenderBase 来完成的。有谁知道如何在 CouchDB 中使用 Java 做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T09:51:59.990

您可以在 GitHub 上[查看 MongoDB 的 Logback Appender 实现。](https://github.com/exacode/logback-extensions)

# view - 将 xCode 4.5 中的默认 xib 视图更改为 3.5" 而不是 4"

> ID：12750862
> 
> 赞同：0
> 
> 时间：2012-10-05T17:03:18.460
> 
> 标签：view, size, default, xib, xcode4.5

自从更新到 xCode 4.5，并且随着带有 4" 显示屏的 iPhone 5 的发布，每次我使用 xib 文件创建新的 ViewController 时，xib 默认为 4" 显示大小。

目前我正在阅读 Aaron Hillegas 的优秀 iOS 编程文本。所有示例都假设为 3.5" Xib。如何让新视图为 3.5" 而不是更高的瘦 4" 默认 xib 视图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T17:14:47.177

在这里找到了答案：

[如何在界面生成器中制作与 4 英寸 iPhone 兼容的 uitableview](https://stackoverflow.com/questions/12406505/how-to-make-a-uitableview-in-interface-builder-compatible-with-a-4-inch-iphone)

视图的属性检查器中有一个“大小”选项，这是我以前从未见过的。选择“Retina 3.5 全屏”选项会将 xib 视图设置回旧的 3.5" 大小。

...戴尔

# android - HightLight ListView 项目以编程方式

> ID：12750863
> 
> 赞同：0
> 
> 时间：2012-10-05T17:03:20.483
> 
> 标签：android, android-listview, selection

我想选择一行`ListView`。我已经尝试了一切，但似乎没有任何效果。

*   我在`onCreate`方法中
*   我填充我的`ListView`
*   我`setSelection`通过`position`
*   我设置了 setSelected(true)

该方法`setSelection(index)`有效，但我无法选择该项目。怎么做？我也尝试过使用`requestFocus()`，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T21:26:40.203

您`ListView`需要一个带有可绘制对象的[选择器。](http://developer.android.com/reference/android/widget/AbsListView.html#setSelector%28int%29)否则，项目在选择时不会改变颜色。[`StateListDrawable`](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)`state_selected`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T21:43:02.977

您需要为此创建选择器项，您必须使用 setSelector() 调用将此项目设置为您的列表视图。

创建一个新的可绘制文件并使用类似的代码，如下所示。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="false"><shape>
        <gradient android:angle="270" android:endColor="#BB00D5FF" android:startColor="#BB00D5FF" />

        <corners android:bottomLeftRadius="9dp" android:topRightRadius="9dp" />
    </shape></item>
    <item android:state_pressed="true"><shape>
        <gradient android:angle="270" android:endColor="#BB0987CD" android:startColor="#BB0987CD" />

        <corners android:bottomLeftRadius="9dp" android:topRightRadius="9dp" />
    </shape></item>

</selector> 
```

并使用 setSelector(R.drawable.bg) 将上述可绘制对象设置为列表视图

# email - 用于集成测试的临时电子邮件帐户

> ID：12750864
> 
> 赞同：35
> 
> 时间：2012-10-05T17:03:24.763
> 
> 标签：email, testing, integration-testing

我想编写一些集成测试来验证用户是否收到注册确认电子邮件。

理想情况下，为此我想：

1.  创建临时电子邮件帐户。
2.  在注册表中传递它。
3.  检查我们是否收到电子邮件。
4.  删除电子邮件帐户。

是否有提供简单 API 的一次性电子邮件帐户？我找不到任何内容，但现有的请求相当容易解析/发出请求（例如[http://10minutemail.com/](http://10minutemail.com/)）。

这听起来是个好主意吗？另一种方法是使用一些 gmail 帐户并为此使用标签。但是，处理垃圾邮件文件夹、其他文件夹等中的 msgs 听起来有点复杂。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2016-08-10T06:07:44.920

您可以使用来自 Gmail 的电子邮件进行测试，只需附加`+something`到您的电子邮件地址：

> myemail@gmail.com

您可以拥有一个测试帐户，该帐户将发送到您的正常 Gmail 地址：

> 我的电子邮件+testuser1@gmail.com
> 
> 我的电子邮件+testusern@gmail.com

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-24T16:35:48.087

[http://mailinator.com](http://mailinator.com)支持 POP3。

使用任何用户名通过 POP3 连接到服务器并检查电子邮件。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-10-04T19:19:24.550

我知道这个问题比较老，但这很符合您的目的：

[https://www.guerrillamail.com](https://www.guerrillamail.com)

*   一次性电子邮件地址
*   60 分钟后删除电子邮件
*   可定制的临时电子邮件地址仪表板

我每天在测试电子邮件或注册我只会使用一次的服务时使用它，这些服务需要电子邮件验证。

我强烈推荐它！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-10-31T10:44:44.350

您可以使用 API 为 QA/QC 工程师提供特殊服务：

*   [https://mailtrap.io](https://mailtrap.io)
*   [http://www.emailvoid.com](http://www.emailvoid.com)
*   [https://mailcatcher.me](https://mailcatcher.me)
*   [https://mailsac.com](https://mailsac.com)

您可以在文章[http://railsware.com/blog/2012/06/18/remove-qa-headache-while-testing-email-delivery/中阅读更多内容](http://railsware.com/blog/2012/06/18/remove-qa-headache-while-testing-email-delivery/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-05T17:08:53.823

如果您在 linux 机器上运行，它已经运行了一个电子邮件服务（`username@localhost`...例如`root@localhost`），这对于测试电子邮件脚本来说非常完美。

我不知道您为什么要麻烦自动执行此操作，而最好使用依赖注入并创建一个模拟邮件类，这样您就可以充分进行集成测试-而不是传输电子邮件的最后阶段它只是将内容写入文件、数据库，或者只是在模拟对象中保持活动足够长的时间，以便在垃圾收集之前对其进行测试。

# javascript - OpenLayers：两个 GeoJSON 图层，一个在两个图层上都是透明的

> ID：12750866
> 
> 赞同：0
> 
> 时间：2012-10-05T17:03:30.687
> 
> 标签：javascript, openlayers, geojson, gpx, rectangles

我有一个转换为 GeoJSON 的 GPX Track（起点 == 终点）。
我现在想在地图上显示这条轨道，其中仅由 trac 封闭的地图显示。其余的应该是白色的。

到目前为止，我有以下内容：

```
<script type="text/javascript">
  function init() {
    map = new OpenLayers.Map("basicMap");
    var mapnik         = new OpenLayers.Layer.OSM();

    var fromProjection = new OpenLayers.Projection("EPSG:4326");
    var toProjection   = new OpenLayers.Projection("EPSG:900913");
    var position       = new OpenLayers.LonLat(13.41,52.52).transform( fromProjection, toProjection);
    var zoom           = 7; 

    map.addLayer(mapnik);
    map.setCenter(position, zoom );

    geojson_layer = new OpenLayers.Layer.Vector("GeoJSON", {
        strategies: [new OpenLayers.Strategy.Fixed()],
        protocol: new OpenLayers.Protocol.HTTP({
            url: "tracks.json",
            format: new OpenLayers.Format.GeoJSON()
        })
    });

    map.addLayer(geojson_layer);
  }
</script> 
```

track.json 是带有 trac 的 GeoJSON 文件。

基本上现在我想要一个围绕轨迹的矩形。trac 和 rectangle 之间的空间应该填充为白色。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:12:51.737

实际上它就像用两个坐标对象声明一个多边形一样简单。一个用于矩形，一个用于轨道：

```
var border = { 
"type": "Feature", 
"properties": { }, 
"geometry": { 
    "type": "Polygon", 
    "coordinates": [ 

        [
            [    
                Coordinates of Rectangle
            ]
        ],
        [
            [
                Coordinates of the track
            ]
        ]
    ]
  }
} 
```

我在我的javascript中包含了这个：

```
 <script type="text/javascript" src="border.js"></script>
 .
 .
 var geojson_format  = new OpenLayers.Format.GeoJSON({
            'internalProjection': toProjection,
            'externalProjection': fromProjection
 });

 map.addLayer(vectorLayer);
 vectorLayer.addFeatures(geojson_format.read(border)); 
```

# ajax - 在 symfony 1.4 中创建一个“喜欢/不喜欢”按钮

> ID：12750869
> 
> 赞同：1
> 
> 时间：2012-10-05T17:03:48.247
> 
> 标签：ajax, symfony-1.4, social-media-like

我想用 Symfony 1.4 在 Ajax 中创建一个“喜欢/不喜欢”按钮。

我有这些表：

```
| Song | ------- n --------------------------- n ---------- | sfGuardUser |
                               |
                          | LikeSong |                 ` 
```

我已经阅读了 symfony AJAX 文档，但它是 1.0 文档。1.4很轻。所以，这是我首先尝试做的。

在`/app/frontend/module/likesong/_voting.php`：

```
<?php
    if($song->hasVote())
    {
        jq_link_to_remote('I do not like', array('complete' => '[??? Update my link]', 'url' => 'likesong/notlike?id_song='.$song->getId()));
    }
    else
    {
        jq_link_to_remote('I like', array('complete' => '[??? Update my link]', 'url' => 'likesong/like?id_song='.$song->getId()));
    }
    echo ' - '.$song->getNbVote();
?> 
```

在`/app/frontend/config/routing.yml`：

```
song_like:
  url:      /song-like/:id
  param:    { module: song, action: like }

song_notlike:
  url:      /song-not-like/:id
  param:    { module: song, action: notLike } 
```

在`/app/frontend/module/likesong/actions.class.php`

```
public function executeLike(sfWebRequest $request)
{
  if ($request->isXmlHttpRequest())
  {                              
    if(USER HAS NOT YET VOTED)
    {
      $this->vote = new LikeSong();

      $this->vote->setSongId($this->song()->getId());
      $this->vote->setSfGuardUserId($this->getUser()->getId());
      $this->vote->save();

      return $this->renderText('notlike');
      else
      {
        // Display flash
      }
    }
 }

public function executeNotLike(sfWebRequest $request)
{
  if ($request->isXmlHttpRequest())
  {                              
     if(USER ALREADY VOTED)
     {
        // Delete form database

        return $this->renderText('like');
        else
        {
          // Display flash
        }
      }
} 
```

当用户点击时，“我喜欢这首歌”应该替换为“我不喜欢这首歌”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T16:39:40.697

首先，您的控制器中不应该有业务逻辑。

你的模板代码也很奇怪——我从来没有用过`jq_link_to_remote()`任何ajax，快速搜索这个功能，似乎有很多麻烦。如果你重新开始受孕，你可能会解决很多问题。

1.  用户喜欢或不喜欢一首歌应该写在你的`Song`课堂上。我会写这样的东西：

    ```
    class Song extends BaseSong
    {

        public function userLike($user_id)
        {
            return in_array($user_id, $this->getLikers()->getPrimaryKeys()));
        }

        public function switchLike($user_id)
        {
            if ($this->userLike($user_id))
            {
                $this->getLikers()->remove($user_id);
                $this->save();
                return 0;
            }
            else
            {
                $this->getLikers()->add(Doctrine::getTable('User')->find($user_id));
                $this->save();
                return 1;
            }
        }
    } 
    ```

2.  您应该始终编写可以使用或不使用 AJAX 调用的干净控制器。该`isXmlHttpRequest()`功能可能非常强大，但不能破坏您网站的可访问性。Javascript 必须保持可选，您的链接必须具有标准 http 调用的功能后备。我会从这样的事情开始：

    ```
    public function executeIndex(sfWebRequest $request)
    {
          // Here the code for the whole song's page, which will include your _vote partial
    }

    public function executeSwitchLike(sfWebRequest $request)
    {
          $this->song = Doctrine::getTable('Song')->find($request->getParameter('id'));
          $this->song->switchLike($this->getUser()->getId());
          $this->redirect('song/index?id='.$request->getParameter('id'));
    } 
    ```

然后，使用“喜欢”或“不喜欢”的简单 http 链接编写您的模板。您应该具有重新加载整个页面的行为，只需切换“喜欢”状态。

最后，用一个简单的调用重载这个链接`jquery.load()`，它只替换你打算替换的 HTML 元素：

```
$('#like_block').load('/switchLike?id=<?php echo $song->id ?>'); 
```

它将导致整个 PHP 执行，这是使用 AJAX 的好方法，但只会重新加载您的特定 HTML 元素。

# microsoft-ajax-minifier - 将 RES 命令行参数与 ajaxmin 任务一起使用

> ID：12750871
> 
> 赞同：0
> 
> 时间：2012-10-05T17:04:06.700
> 
> 标签：microsoft-ajax-minifier, ajaxmin

如何在*Ajaxmin* *MSBuild*任务中使用 RES 开关？我在做这件事时遇到了麻烦，即使我让它在命令行中工作。我猜我使用了错误的语法。这是我在命令行中使用的：

```
ajaxmin.exe Combined.min.js -RES:Strings Strings.resx -o test.min.js 
```

与此等效的*Ajaxmin*任务是什么？

这是我尝试过的，但它不起作用：

```
AjaxMin Switches="-RES:Strings Strings.resx" JsSourceFiles="Combined.min.js" JsCombinedFileName="test.min.js" / 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T17:53:30.380

您做对了——您在 AjaxMin 构建任务中发现了一个错误。我会在下一个版本 4.69 中修复它。

# javascript - 如果隐藏了背景图像，它还会加载吗？

> ID：12750872
> 
> 赞同：3
> 
> 时间：2012-10-05T17:04:17.353
> 
> 标签：javascript, css

[这里](https://stackoverflow.com/questions/578283/will-an-image-load-if-it-has-its-css-set-so-that-visibility-is-hidden)有一个类似的问题，但我认为这是针对`<img>`标签的。我不确定它是否与`background-image`.

我正在制作一个响应式网站，我的问题是如果通过手机访问图像（或者如果它的窗口宽度很小），我不希望加载图像。如果图像只是使用`display: none;`if using应用`@media`，我认为如果图像仍然加载，无论它是否显示在手机上，都会浪费时间和资源。

我需要的是图像（一个`<img>`或带有 a 的元素`background-image`）仅在可见时才加载。我有点担心以某种方式优化我的网站的响应能力。

如果它是用javascript（或jQuery）完成的，如果它真的很轻量级就很好了。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T17:09:48.413

引用[这篇文章](http://robertnyman.com/2010/03/11/do-hidden-elements-load-background-images/)：

> 通过 CSS 或元素内联设置的隐藏元素的图像 [背景] 每次都会加载，这与我们的想法/预期相反。

但是未加载[包含背景图像的未使用的 css 规则。](https://stackoverflow.com/questions/2396909/are-unused-css-images-downloaded)

所以你可以做的是，只有在视口大于 X 的情况下，才使用 javascript/jquery 动态添加背景图像类。

* * *

这是一个[简单的演示](http://jsfiddle.net/gionaf/9xVNR/)如何做到这一点。

HTML

```
<div id="yourdiv"></div> 
```

CSS

```
#yourdiv {
    background:yellow;
}
#yourdiv.backgrounded {
  background:url(your-image.jpg) top left no-repeat;
}​ 
```

jQuery

```
$(window).on('load resize',function(){
    var w=window,
        d=document,
        e=d.documentElement,
        g=d.getElementsByTagName('body')[0];
    var docWidth = w.innerWidth||e.clientWidth||g.clientWidth;
    if(docWidth>600){ /* replace 600 with the screen width you want to target */
      yourdiv.addClass('backgrounded');
    }
});​ 
```

（jsFiddle 不会触发`load`，所以你必须调整文档的大小才能看到它的工作）

* * *

**警告**：这可能会导致图像“延迟”加载，因此请务必测试结果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-15T19:09:03.513

您还可以使用媒体查询在较小的设备上删除对后台的调用。

因此，如果 DIV X 在桌面上加载 BG，您只需将 background-image: none 应用到相同的 DIV 以在最小-最大查询中移动 rez。对桌面执行相同的操作，但相反，以便加载更小或更大的图像。

因此，在响应式站点上，移动 rez 根本不加载图像，因为 .class 已被告知背景图像：无。虽然相同的 .class 具有 background-image:img.jpg 以获得更高的 rez。

# java - 子字符串替换问题

> ID：12750879
> 
> 赞同：0
> 
> 时间：2012-10-05T17:04:41.200
> 
> 标签：java, android, string, str-replace

我有一个可以采用两种形式的字符串

第一种形式

```
 file:///mnt/sdcard/myfolder/myfile.txt 
```

第二种形式

```
 /file://mnt/sdcard/myfolder/myfile.txt 
```

而且我需要始终采用形式的字符串

```
/mnt/sdcard/myfolder/myfile.txt 
```

所以我使用了替换命令

```
myPath=path.replace("file://", "");
myPath= path.replace("/file:/", ""); 
```

但不幸的是不起作用

和字符串 myPath 结果

```
file:///mnt/sdcard/myfolder/myfile.txt 
```

怎么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T17:09:07.060

如果您保证您的字符串将始终采用这两种形式之一，为什么不直接使用

```
myPath = path.substring(path.indexOf("/mnt")); 
```

如果你不确定你的路径是否包含“/mnt”，你可以试试这个：

```
if (path.contains("file:"))
{
    myPath = path.substring(path.indexOf(":/") + 1);
    while (myPath.startsWith("//"))
        myPath = myPath.substring(1);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T17:07:37.257

尝试：

```
path=path.replace("file://", "");
myPath= path.replace("/file:/", ""); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T17:09:16.333

您用第二个调用覆盖第一个`myPath = path.replace()`调用，这可能不会替换任何内容并返回整个字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T17:17:59.340

这肯定会给你你想要的：

```
String mypath=path.replaceFirst("[/]?file://[/]?","/"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T17:31:22.837

尝试：

```
path = path.replaceAll("^(file://|/file:/)", ""); 
```

或者：

```
myPath=path.replace("file://", "");
myPath= **myPath**.replace("/file:/", ""); 
```

# javascript - 如何将元素附加到弹出窗口

> ID：12750884
> 
> 赞同：2
> 
> 时间：2012-10-05T17:04:54.287
> 
> 标签：javascript, jquery

我正在尝试在弹出窗口中附加更多数据并设置表格样式。

我有

```
 var popup = window.open("popup.html", "popup","width=800","height=600");
     popup.document.write(
     "<table id='dataTable'>"+
      "<tr><th>test1</th><th>test2</th><th>test3<th></th>test4</th><th>test5</th></tr>" +
      "</table>");

ajax callback data
    codes.... 
```

如何附加数据并设置表格样式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:11:59.673

用于在弹出`$("#dataTable",popup.document)`窗口中获取您的表格：

```
var popup = window.open("popup.html", "popup","width=800","height=600");
     popup.document.write(
     "<table id='dataTable'>"+
     "<tr><th>test1</th><th>test2</th><th>test3<th></th>test4</th><th>test5</th></tr>" +
     "</table>");

$("#dataTable",popup.document)
     .css("border","1px solid red") // append CSS
     .append("<tr><td>append</td></tr>"); //append HTML 
```

[这是演示](http://jsfiddle.net/SFKPp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T17:11:41.093

```
$('#dataTable').append(<your html>);
$('#dataTable').css({'style1':'value1', 'style2':'value2'}); 
```

# c - c编程理解strace -o t.txt ./a.out

> ID：12750885
> 
> 赞同：1
> 
> 时间：2012-10-05T17:04:59.053
> 
> 标签：c, stdout, stdin

我写了一个C程序。（页面底部的问题）我可以提供实际代码，但我认为没有必要回答这个问题。

```
Used a while loop with fgets to get sizeof line
Assigned that fgets to line[255] in the fgets
Assigned the line to a char* (inside the loop)
Printf the char* (also inside the loop) 
```

C 程序按预期输出。

我使用 strace -o x.txt ./a.out 来查看幕后发生的事情。

我看到了：（当然上面/下面还有很多乱码，我不明白）

```
read(3, "text\nMore text\nEven more text"..., 4096) = 72
write(1, "text\n",5) = 5
... more of the write() = #
read(3, "", 4096) = 0
close(3) 
```

问题：

1.  我得到`write(1=stdout, "text to print", #of char)`或者是这个字节#？

2.  我不明白`read(3, "", 4096) = 0`

我知道`0=stdin`, `1=stdout`, `2=stderr`, 不知道 3 是什么意思 - 也许这是文件？我不知道它为什么要进行另一次读取，我假设 4096 的缓冲区大小是多少？我最好的猜测是，因为它说 = 0 因为它的 EOF ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:11:05.710

1.  字符数

2.  您打开的文件。4096 是缓冲区大小。上次读取未能读取任何字节（0 字节）。

# opencv - 比较两幅图像特定区域的直方图？开放式CV

> ID：12750889
> 
> 赞同：3
> 
> 时间：2012-10-05T17:05:11.600
> 
> 标签：opencv, python-2.7, histogram, image-comparison

基本上，我希望能够比较两个直方图，但不是整个图像只是特定区域。我有图像 A，上面有一个特定的矩形区域，我想与另一个图像 B 进行比较。有没有办法获得图像上可定义矩形区域的直方图？我有矩形区域的 xy 位置，以及它的宽度和高度，并想得到它的直方图。我正在将opencv与python一起使用。

抱歉，如果不是很清楚:(

（我正在设置一个为电路板拍照的程序，并检查每个焊盘与完美电路板图像的一致性。如果一个焊盘关闭，程序会发出一个标志，表示特定焊盘关闭x%，而不是整个董事会。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T18:26:28.623

注意：以下是用 C++ 编写的，但我认为找到 python 的等效函数并不难。

您可以使用[本](http://docs.opencv.org/doc/tutorials/imgproc/histograms/histogram_calculation/histogram_calculation.html)教程找到图像的直方图。例如，对于我们得到的 lena 图像：

![文学家](../Images/a4915625550792357f3a9cf074556358.png)

在您的情况下，由于您有矩形坐标，您可以提取图像的 ROI：

```
// C++ code
cv::Mat image = cv::imread("lena.png", 0);
cv::Rect roiRect = cv::Rect(150, 150, 250, 250);
cv::Mat imageRoi = image(roiRect); 
```

然后用与上面相同的方法找到仅 ROI 的直方图：

![文学家](../Images/378e0a38fcda965eece7694cdc9dee1e.png)

这是你想要的（至少在理论上）还是我误解了？

# visual-studio-2010 - USBView 编译错误

> ID：12750891
> 
> 赞同：0
> 
> 时间：2012-10-05T17:05:15.260
> 
> 标签：visual-studio-2010, compiler-errors, usb

我刚刚下载了[USBView 示例应用程序](http://code.msdn.microsoft.com/windowshardware/USBView-sample-application-e3241039)，在使用 Visual Studio 2010 进行编译时遇到了一个神秘的错误。

```
1>------ Rebuild All started: Project: usbview, Configuration: Win8 Debug Win32 ------ 
1>Build started 10/5/2012 11:58:11 AM.
1>C:\Program Files\MSBuild\Microsoft.Cpp\v4.0\Platforms\Win32\Microsoft.Cpp.Win32.Targets(518,5):
error MSB8008: Specified platform toolset
(WindowsApplicationForDrivers8.0) is not installed or invalid. Please
make sure that a supported PlatformToolset value is selected.
1>
1>Build FAILED.
1> 1>Time Elapsed 00:00:00.16
========== Rebuild All: 0 succeeded, 1 failed, 0 skipped ========== 
```

任何解决此问题的想法或想法将不胜感激。我使用的是 32 位的 Windows 7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:59:43.487

我能够通过安装 Visual Studio 2012 Express 和推荐的组件、从 Microsoft.Cpp.Platform.targets 文件中删除有问题的行（双击错误消息）并编译为 Release 来解决问题。

# javascript - 避免重复听众

> ID：12750892
> 
> 赞同：2
> 
> 时间：2012-10-05T17:05:21.843
> 
> 标签：javascript, jquery, events, onclicklistener

我需要将焦点放在可排序列表的输入和文本区域元素上。
这是我的代码（1）。

a）当我加载列表时它工作正常，因为它为每个输入添加了一个监听器。
b）当我向列表中添加一个新元素时，它会复制侦听器。

应该如何避免这种情况？
也许尝试使用事件委托在正文上使用单个侦听器？有任何想法吗？
谢谢

(1)

```
setTimeout(function () {
    var setFocus = function () {
        $('.ui-sortable').find('input, textarea').click(function () {
            $(this).focus();
        });
    };
    $('.ui-sortable').on('DOMNodeInserted', setFocus);
    setFocus();
}, 0); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:18:43.697

这应该有效：

```
$('body').on('.ui-sortable input, .ui-sortable textarea', 'click', function () {
    $(this).focus();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T17:13:50.610

您应该修改代码以仅添加一次侦听器，或者首先删除旧的侦听器：

```
$('.ui-sortable').off('DOMNodeInserted').on('DOMNodeInserted', setFocus); 
```

如果您有其他不想删除的侦听器，可以在添加侦听器时使用命名空间功能，这样您就可以只删除您感兴趣的侦听器：

```
$('.ui-sortable').off('DOMNodeInserted.setFocus').on('DOMNodeInserted.setFocus', setFocus); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T17:09:44.880

您可以将其删除并重新添加

```
$('.ui-sortable').off('DOMNodeInserted').on('DOMNodeInserted', setFocus); 
```

您可以尝试像这样添加它

```
$(document).on('DOMNodeInserted', '.ui-sortable', setFocus); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-05T17:13:30.733

尝试委派事件.. 这样您就不需要在每次创建新元素时都分配事件

```
$(document).on('DOMNodeInserted', '.ui-sortable', setFocus); 
```

# c++ - 是否有与 Xcode + Mac OS X 等效的 MSDN 开发人员库？

> ID：12750893
> 
> 赞同：0
> 
> 时间：2012-10-05T17:05:25.717
> 
> 标签：c++, xcode

我开始使用 Xcode 学习 C++。我熟悉 MSDN for Windows。Mac OS X 上的 Xcode 是否有等效的开发人员资源库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:44:05.117

[Apple 在https://developer.apple.com/library/mac/](https://developer.apple.com/library/mac/)有一个开发者库

这涵盖了 Apple 的所有*平台特定*技术和 API。

如果您只是查看 Xcode 设置，也可以在 Xcode 中下载和访问这些信息。

但是，既然您说您正在学习 C++，并且您可能已经习惯了 MSDN 上的 C++ 标准库文档，您应该知道 Apple 的开发人员库不包含有关标准 C++ 库的文档。它也没有任何理由包含这些东西。这只会复制广泛可用的信息。

如果您正在寻找有关标准 C++ 库的良好参考，请查看[http://en.cppreference.com/](http://en.cppreference.com/)

# jquery - jQuery 水平滚动动画

> ID：12750895
> 
> 赞同：0
> 
> 时间：2012-10-05T17:05:52.860
> 
> 标签：jquery, horizontal-scrolling

这可能是一个非常基本的问题，因为我对 jQuery 很陌生，所以我不知道这一点。

我有一个广泛的网站，所有内容都是水平布局的。我没有在底部使用滚动条，而是在任一侧都有一个按钮，这样当您单击它时，它会在站点中向左或向右移动。

我在这里有 jQuery：

```
$(".timeline_page a.flex-prev").click(function(){
$(".timeline_page_wrapper").scrollLeft(Math.max(0, $(".timeline_page_wrapper").scrollLeft() - 500));
});

$(".timeline_page a.flex-next").click(function(){
$(".timeline_page_wrapper").scrollLeft(Math.min(1200, $(".timeline_page_wrapper").scrollLeft() + 500));
}); 
```

到目前为止，一切都很好。但我想为它制作动画，但我不知道该怎么做。我尝试的一切都会导致它无法运行。

在相关说明中，有没有办法让我知道用户何时位于右侧或左侧的末端，以便我可以更改按钮状态？

编辑：

好的，现在我有了以下代码并设法对其进行动画处理。但是，如果达到某个点，我在添加或删除一个类时做错了什么？

```
$(".timeline_page a.flex-prev").click(function(){
$(".timeline_page_wrapper").animate({
    scrollLeft: Math.max(0, $(".timeline_page_wrapper").scrollLeft() - 500)}, 650);
});

$(".timeline_page a.flex-next").click(function(){
$(".timeline_page_wrapper").animate({
    scrollLeft: Math.min(4080, $(".timeline_page_wrapper").scrollLeft() + 500)}, 650);
});

if ($(".timeline_page_wrapper").scrollLeft() === 0 {
    $(".timeline_page a.flex-prev").addClass("flex-disabled");
} else {
    $(".timeline_page a.flex-prev").removeClass("flex-disabled");
}
);

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:18:11.417

我以前用过它，它有效！在此处查看[演示](http://www.queness.com/resources/html/scroll/horizontal.html)和[教程](http://www.queness.com/post/356/create-a-vertical-horizontal-and-diagonal-sliding-content-website-with-jquery)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:07:41.490

看一下 JQuery Animate() 方法。尝试以视图/页面宽度的增量为位置设置动画。 [http://api.jquery.com/animate/](http://api.jquery.com/animate/)

您可以通过检查 scrollLeft() 中的 timeline_page_wrapper 并将其与整个内容宽度进行比较来告诉用户已结束。Scrollleft 还应该为您提供要显示的剩余数量。一个小算术会告诉你你是否已经到了页面的末尾。 [http://api.jquery.com/scrollLeft/](http://api.jquery.com/scrollLeft/)

希望这可以帮助

# jquery - jQuery.Ajax 与 Ajax.beginform 与不显眼的 JavaScript

> ID：12750898
> 
> 赞同：2
> 
> 时间：2012-10-05T17:06:05.330
> 
> 标签：jquery, ajax, asp.net-mvc-3, unobtrusive-javascript, ajax.beginform

第一次发帖，请轻点：）

我对 MVC3 比较陌生，正在工作中构建一个 webapp。

我有几个带有复选框的页面，它们可以打开/关闭功能，当它们更改时，我通过 jQuery Ajax 调用提交并向我返回 json 成功/失败，以便我可以显示一条消息。

我有一些表单，其中包含我刚刚提交的一堆字段（不是使用 Ajax）并检查模型状态是否有效等。如果不是，则重新显示带有消息的表单。我想改用 Ajax 来做到这一点。

我有一个使用 Ajax.BeginForm 的表单，它正确地提交给控制器，模型被验证，如果它有错误，我返回一个使用 UpdateTargetId 替换的部分视图。

我想做的是……如果模型有效并且保存成功，我仍然需要返回部分视图，因为无论如何 UpdateTargetId 都会替换我的表单。我想发回某种“成功”标志，这样我就可以显示一条消息，说“您的数据已保存”或其他内容。

如果 Ajax 调用成功，则 OnSuccess 触发，并且不关心模型是否有效。

我可以使用 jQuery.Ajax 提交表单并在控制器中返回返回 PartialView 以及我认为是成功还是失败？

谁能说出构建“Ajax”网络应用程序时的最佳实践是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T18:28:29.400

您可以使用纯 javascript 而不是使用`Ajax.Beginform`辅助方法来处理此问题。

```
@model ProductViewModel
<div id="divForm">
@using(Html.Beginform())
{
  @Html.TextBoxFor(x=>x.Name)
  @Html.TextBoxFor(x=>x.Location)
  <input type="submit" id="btnSave" />
}
</div>
<div id="divItem" />
<script type="text/javascript">
  $(function(){
    $("#btnSave").click(function(e){
         e.preventDefault();   // prevent the default form submit

         var form=$(this).closest("form");
         $.post(form.attr("action"),form.serialize(),function(result){
            if(result.Status=="success")
            {
              //show message and load the new partial view if needed.
              $(#divForm").hide();
              $("#divItem").html(reuslt.ViewHTML);
            }
            else
            {
               alert("Error");
            }
         });
    });
  });
</script> 
```

假设您有一个 HttpPost 操作方法，它接受我们的表单提交并返回 JSON 数据。

```
[HttpPost]
public ActionResult Edit(ProductViewModel model)
{
  // here you may validate the model and save if needed and return JSON back.
  //to do  : return JSON
} 
```

响应 JSON 应采用以下格式。

```
{ "Status" : "success", "ViewHTML" : "<p>This is some markup</p>" } 
```

[这个](https://stackoverflow.com/a/3027713/40521)答案解释了如何在 JSON 响应中返回 ViewResult。

# php - 在 php 中读取两个 csv 文件的内容并根据关键字段将它们合并到第三个文件中

> ID：12750899
> 
> 赞同：-1
> 
> 时间：2012-10-05T17:06:23.010
> 
> 标签：php, csv, merge

我在网上搜索并查看了现有答案，但找不到解决方案。我想使用 php 来完成以下任务。这是我的文件：

csv 文件 1：member.csv

```
member1|john|smith|2009
member2|adam|jones|2007
member3|susie|rose|2002 
```

csv 文件 2：classes.csv

```
member1|massage|swimming|weights
member2|gym|track|pilates
member3|yoga|running|stretches 
```

我想输出第三个名为 file3.csv 的文件，它根据成员编号的关键字段将上述两个文件合并在一起。输出应该是这样的：

```
member1|john|smith|2009|massage|swimming|weights         
member2|adam|jones|2007|gym|track|pilates    
member3|susie|rose|2002|yoga|running|stretches 
```

分隔符是一个条形字符。我只想使用 php 来做到这一点 - 没有其他语言。

我会非常感谢一个解决方案。

马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:11:09.177

1.  读取两个文件并使用键将数据存储到数组中：member1, ...

2.  在循环中写一个新的文件行：

```
foreach ($firstArray as $key => $value1) {
    $value2 = $secondArray[$key];

    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T17:19:38.797

```
<?php
$data = array();
if (($handle = fopen('file1.csv', 'r')) !== FALSE) {
    while (($line = fgetcsv($handle, 0, '|')) !== FALSE) {
        $memberId = $line[0];
        unset($line[0]);
        $data[$memberId] = $line;
    }
    fclose($handle);
}
if (($handle = fopen('file2.csv', 'r')) !== FALSE) {
    while (($line = fgetcsv($handle, 0, '|')) !== FALSE) {
        $memberId = $line[0];
        unset($line[0]);
        $data[$memberId] = array_merge($data[$memberId], $line);
    }
    fclose($handle);
}
ksort($data);       // not needed, but puts records in order by member
if (($handle = fopen('file3.csv', 'w')) !== FALSE) {
    foreach($data as $key => $value) {
        fwrite($handle, "$key|" . implode('|', $value) . "\n");
    }
    fclose($handle);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T17:54:54.000

尝试这个。它未经测试。

```
$arr_one = array();
if (($fp = fopen("member.csv", "r")) !== FALSE) {
  while (($data = fgetcsv($fp, 1000, ",")) !== FALSE) {
    $arr_one[$data[0]] = $data;
  }
  fclose($fp);
}
$arr_two = array();
if (($fp = fopen("classes.csv", "r")) !== FALSE) {
  while (($data = fgetcsv($fp, 1000, ",")) !== FALSE) {
    $arr_two[$data[0]] = $data;
  }
  fclose($fp);
}
$classes_field_count = sizeof(current($arr_two));
$members = array_keys($arr_one);
foreach ($members as $key) {
  if (!isset($arr_two[$key])) {
    $arr_two[$key] = range(0, ($classes_field_count - 1));
  }
  unset($arr_two[$key][0]);
  $result_arr[$key] = array_merge($arr_one[$key], $arr_two[$key]);      
}
if (($fp = fopen("file3.csv", "w")) !== FALSE) {
  foreach ($result_arr as $fields) {
    fputcsv($fp, $fields, '|');
  }
  fclose($fp);
} 
```

# user-interface - 平移，精确定义

> ID：12750901
> 
> 赞同：19
> 
> 时间：2012-10-05T17:06:24.577
> 
> 标签：user-interface, scroll, terminology, drag, panning

滚动和平移有什么区别？平移是否被识别为拖动图像/背景的动作，而滚动仅在您使用滚动条时？

而且，拖动和平移有什么区别？

当我拖动google maps的地图时，哪个术语合适，拖动还是平移？？？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-05T18:38:08.067

**滚动**通常涉及滚动条或鼠标上的滚轮，但我听说人们也将平移地图称为滚动（我认为不正确）。

**平移**与您描述的完全一样 - 拖动地图的动作（将其保持在相同的比例，而不是改变比例级别的**缩放**）。

**拖动 = 平移**，正如您所指的那样。

那么什么是正确的词呢？好吧，*谷歌（和其他人）在他们的地图 API 中使用了**平移/平移***这个术语，而**平移/平移**在 GIS 术语中有着广泛的历史用途。所以，从技术上讲，我认为**平移/平移**会获胜，但是，一般来说，这实际上只是术语上的差异。

# android - 如何在android的谷歌地图上用标记显示我的当前位置

> ID：12750904
> 
> 赞同：0
> 
> 时间：2012-10-05T17:06:27.923
> 
> 标签：android

请帮忙。我尝试了一个代码，它应该在谷歌地图上用标记给出我当前的位置。但它不工作。我已经通过 DDMS 和 TELNET 提供了我的位置，但仍然处于黑暗中。我应该怎么办？？代码是：

```
package com.chupamobile.android.googlemaps;

import android.location.Location;

public class GoogleMapsActivity extends MapActivity{
    private MapView myMap;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        myMap = (MapView) findViewById(R.id.mymap);
        initMap();
        initMyLocation();
    }

    /**
     * Initialise the map and adds the zoomcontrols to the LinearLayout.
     */
    private void initMap() {
        //myMap = (MapView) findViewById(R.id.mymap);

        View zoomView = myMap.getZoomControls();
        //MapController mc = myMap.getController();
        //mc.setZoom(16);
        LinearLayout myzoom = (LinearLayout) findViewById(R.id.myzoom);
        myzoom.addView(zoomView);
        myMap.displayZoomControls(true);

    }

    /**
     * Initialises the MyLocationOverlay and adds it to the overlays of the map
     */
    private void initMyLocation() {

        MyLocationOverlay myLocOverlay = new MyLocationOverlay(this, myMap);
        myLocOverlay.enableMyLocation();
        myLocOverlay.enableCompass();
        myMap.getOverlays().add(myLocOverlay);
        Toast.makeText(getApplicationContext(), "I am In"+myLocOverlay, Toast.LENGTH_LONG).show();

    }

    /*public void onLocationChanged(Location location){
        if(location!=null){
            GeoPoint point = new GeoPoint((int)(location.getLatitude()*1E6),(int)(location.getLongitude()*1E6));
            MapController mc = myMap.getController();
            mc.animateTo(point);
            mc.setZoom(16);
        }

    }
*/ 

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:30:50.970

Thenewboston有一个 4 部分的 Youtube[教程，几乎涵盖了 api 的每个部分、固定位置等。每个视频大约 5 分钟，很容易理解，我想他在第二个视频中谈到了固定位置。](http://www.youtube.com/watch?v=lywa-2-lQCg&feature=edu&list=PL2F07DBCDCC01493A)我还发现[这个](https://stackoverflow.com/questions/10266000/google-maps-api-not-placing-marker-at-fine-location)问题的公认答案也可能有助于指导您朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:36:12.207

你有没有把这个权限`<uses-library android:name="com.google.android.maps"/> and <uses-permission android:name="android.permission.INTERNET"/>`放在你的清单中？并在您的项目-> 属性-> Android 中选择了 Google API？你也有你的MD5证书吗？完整的官方教程请看这里[https://developers.google.com/maps/documentation/android/hello-mapview](https://developers.google.com/maps/documentation/android/hello-mapview)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T07:11:49.450

Downad 完整的工作演示：

[http://www.filedropper.com/androidopenstreetmapview120516a](http://www.filedropper.com/androidopenstreetmapview120516a)

如果地图未在模拟器或移动设备中显示，则更改地图 API 密钥。

# asp.net - 如何使用 ASP.NET Web API 生成 ATOM 和 RSS2 提要？

> ID：12750905
> 
> 赞同：3
> 
> 时间：2012-10-05T17:06:31.857
> 
> 标签：asp.net, asp.net-web-api, rss, atom-feed

需要哪些步骤来调整 ASP.NET Web API 的默认 XML 输出以生成 ATOM 和 RSS2 提要？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T19:55:35.940

您将需要实现自定义 MediaTypeFormatter。您可能想查看 Filip 关于[RSS 和 Atom MediaTypeFormatter for ASP.NET WebAPI](http://www.strathweb.com/2012/04/rss-atom-mediatypeformatter-for-asp-net-webapi)的博客文章。

# javascript - JavaScript 中的 XML 模式验证工具

> ID：12750907
> 
> 赞同：3
> 
> 时间：2012-10-05T17:06:59.183
> 
> 标签：javascript, xml, validation, xsd, schema

我想知道是否有一个在线解决方案可以在拥有 Schema（如 .xsd 文件）时验证 XML 文件。通过在线，我的意思是我们不应该将我们的 xml 文件发送到（可能未知的）服务器以在服务器端进行验证。对完整的在线解决方案有什么建议吗？

# java - java servlet 在 html 代码中显示图像

> ID：12750909
> 
> 赞同：0
> 
> 时间：2012-10-05T17:07:04.613
> 
> 标签：java, servlets

我有一个 servlet 作为响应返回一个包含图片的 html 页面。我将这些图片存储在图片文件夹中的文件系统中（路径：/home/andrei/Pictures）。我目前只有一张照片（名称：eu.jpg），但我会添加更多。

所以关键是在我的 html 代码中某处有这个：`<img src="/home/andrei/Pictures/eu.jpg" alt="pic" >`。但是当我得到 html 页面时，它不`t display neither the photo nor the "pic" text from alt(not sure if this is normal...). I read that it may be due to the path i gave in src but i don`知道该给什么。

那么我应该给src什么路径？
不显示替代文本是否正常，
因为我知道当它无法加载图片时，它会显示该文本。

附加信息：
IDE：Eclipse Juno
SO：Linux
服务器：Tomcat 7.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:14:38.563

您打算在连接 Web 容器（在您的情况下为 Tomcat）的浏览器中显示的任何图像都必须在容器中可见。为此，请将图像放在 webapp/ 文件夹中，并从生成正确标签的 servlet 正确链接它们，其中路径是指向文件的正确 http 链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T17:11:14.243

当您发回 HTML 响应时，客户端的浏览器将呈现文档，然后发送额外资源请求以完整显示 HTML 文档。这包括图像，因此 Tomcat 必须能够为它们提供服务。如果您不能从一开始就将它们放在 WebContent 内的文件夹中，则 servlet 必须执行移动并创建指定“公共路由”的文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T17:11:37.580

图片应该是 webapp 的一部分。绝对 FS 路径将不起作用。`<img>`将采用相对路径或网站的绝对路径。

# c# - 保持应用程序运行

> ID：12750915
> 
> 赞同：0
> 
> 时间：2012-10-05T17:07:20.117
> 
> 标签：c#, service

大家好，我创建了一个基于服务的应用程序，它与管道通信，服务应用程序工作直到包含管道服务器代码的 Windows 应用程序停止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:16:10.480

试试下面的代码。您必须将代码中的此过程与您已有的服务代码合并。将“PipeServiceName.exe”替换为调用进程的名称。此外，此代码每 5 秒检查一次。您可以通过更改 5000 数字来更改此设置。

在不了解“管道”和服务如何相互交互的情况下，很难将工作流组合在一起。

```
private readonly ManualResetEvent _shutdownEvent = new ManualResetEvent(false);
private Thread _thread;

public MyService()
{
    InitializeComponent();
}

protected override void OnStart(string[] args)
{
    _thread = new Thread(MonitorThread)
    {
        IsBackground = true
    }
}

protected override void OnStop()
{
    _shutdownEvent.Set();
    if (!_thread.Join(5000))
    {
        _thread.Abort();
    }
}

private void MonitorThread()
{
    while (!_shutdownEvent.WaitOne(5000))
    {
        Process[] pname = Process.GetProcessesByName("PipeServiceName.exe");
        if (pname.Count == 0)
        {
             // Process has stopped. ReLaunch
             RelaunchProcess();
        }
     }
}

private void RelaunchProcess()
{
    Process p = new Process();

    p.StartInfo.FileName = "PipeServiceName.exe";
    p.StartInfo.Arguments = ""; // Add Arguments if you need them

    p.Start();
} 
```

# c# - JIT错误调试

> ID：12750917
> 
> 赞同：0
> 
> 时间：2012-10-05T17:07:23.937
> 
> 标签：c#, .net, interop, jit

谁能帮我解决这个错误。如何调试这个？我制作了一个在我的机器上运行良好的代码。但是在我朋友的机器上，它给出了这个运行时错误。我在我的代码中使用互操作库来制作 ppt。

```
    有关调用的详细信息，请参阅此消息的末尾
    即时 (JIT) 调试，而不是此对话框。
    ************** 异常文本 **************
    System.Runtime.InteropServices.COMException (0x800702E4)：检索具有 CLSID {91493441-5A91-11CF-8700-00AA0060263B} 的组件的 COM 类工厂失败，原因是以下错误：800702e4 请求的操作需要提升。（来自 HRESULT 的异常：0x800702E4）。
       在 CTGOV.Form1.Export2PPT(Int32 tempIndex)
       在 CTGOV.Form1.btnDone_Click（对象发送者，EventArgs e）
       在 System.Windows.Forms.Button.OnMouseUp（MouseEventArgs 事件）
       在 System.Windows.Forms.Control.WmMouseUp（消息和 m，MouseButtons 按钮，Int32 点击）
       在 System.Windows.Forms.Control.WndProc（消息和 m）
       在 System.Windows.Forms.ButtonBase.WndProc（消息和 m）
       在 System.Windows.Forms.Button.WndProc（消息和 m）
       在 System.Windows.Forms.NativeWindow.Callback（IntPtr hWnd，Int32 msg，IntPtr wparam，IntPtr lparam）

    ************** 加载的程序集 **************
    mscorlib
        程序集版本：4.0.0.0
        Win32 版本：4.0.30319.269 (RTMGDR.030319-2600)
        代码库：file:///C:/Windows/Microsoft.NET/Framework64/v4.0.30319/mscorlib.dll
    --------------------------------------
    中国政府
        程序集版本：1.0.0.0
        Win32版本：1.0.0.0
        代码库：file:///C:/TrialsVision(trial%20version)/CTGOV.exe
    --------------------------------------
    System.Windows.Forms
        程序集版本：4.0.0.0
        Win32 版本：4.0.30319.278 构建者：RTMGDR
        代码库：file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Windows.Forms/v4.0_4.0.0.0__b77a5c561934e089/System.Windows.Forms.dll
    --------------------------------------
    系统绘图
        程序集版本：4.0.0.0
        Win32 版本：4.0.30319.282 构建者：RTMGDR
        代码库：file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Drawing/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll
    --------------------------------------
    系统
        程序集版本：4.0.0.0
        Win32 版本：4.0.30319.269 构建者：RTMGDR
        代码库：file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System/v4.0_4.0.0.0__b77a5c561934e089/System.dll
    --------------------------------------
    系统数据
        程序集版本：4.0.0.0
        Win32 版本：4.0.30319.237 (RTMGDR.030319-2300)
        代码库：file:///C:/Windows/Microsoft.Net/assembly/GAC_64/System.Data/v4.0_4.0.0.0__b77a5c561934e089/System.Data.dll
    --------------------------------------
    系统核心
        程序集版本：4.0.0.0
        Win32 版本：4.0.30319.233 构建者：RTMGDR
        代码库：file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Core/v4.0_4.0.0.0__b77a5c561934e089/System.Core.dll
    --------------------------------------
    系统文件
        程序集版本：4.0.0.0
        Win32 版本：4.0.30319.233 构建者：RTMGDR
        代码库：file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Xml/v4.0_4.0.0.0__b77a5c561934e089/System.Xml.dll
    --------------------------------------
    Microsoft.VisualBasic.PowerPacks.Vs
        程序集版本：10.0.0.0
        Win32版本：10.0.30319.1
        代码库：file:///C:/TrialsVision(trial%20version)/Microsoft.VisualBasic.PowerPacks.Vs.DLL
    --------------------------------------
    系统.数值
        程序集版本：4.0.0.0
        Win32 版本：4.0.30319.1 构建者：RTMRel
        代码库：file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Numerics/v4.0_4.0.0.0__b77a5c561934e089/System.Numerics.dll
    --------------------------------------
    微软.mshtml
        程序集版本：7.0.3300.0
        Win32 版本：7.0.3300.0
        代码库：file:///C:/Windows/assembly/GAC/Microsoft.mshtml/7.0.3300.0__b03f5f7f11d50a3a/Microsoft.mshtml.dll
    --------------------------------------
    系统配置
        程序集版本：4.0.0.0
        Win32 版本：4.0.30319.1 (RTMRel.030319-0100)
        代码库：file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Configuration/v4.0_4.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll
    --------------------------------------
    离子.Zip
        汇编版本：1.9.1.5
        Win32版本：1.9.1.5
        代码库：file:///C:/TrialsVision(trial%20version)/Ionic.Zip.DLL
    --------------------------------------
    System.Xml.Linq
        程序集版本：4.0.0.0
        Win32 版本：4.0.30319.1 构建者：RTMRel
        代码库：file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Xml.Linq/v4.0_4.0.0.0__b77a5c561934e089/System.Xml.Linq.dll
    --------------------------------------
    Microsoft.Office.Interop.PowerPoint
        程序集版本：14.0.0.0
        Win32版本：14.0.4754.1000
        代码库：file:///C:/Windows/assembly/GAC_MSIL/Microsoft.Office.Interop.PowerPoint/14.0.0.0__71e9bce111e9429c/Microsoft.Office.Interop.PowerPoint.dll
    --------------------------------------
    办公室
        程序集版本：14.0.0.0
        Win32版本：14.0.4760.1000
        代码库：file:///C:/Windows/assembly/GAC_MSIL/office/14.0.0.0__71e9bce111e9429c/office.dll
    --------------------------------------
    Microsoft.Office.Interop.Graph
        程序集版本：14.0.0.0
        Win32版本：14.0.4756.1000
        代码库：file:///C:/Windows/assembly/GAC_MSIL/Microsoft.Office.Interop.Graph/14.0.0.0__71e9bce111e9429c/Microsoft.Office.Interop.Graph.dll
    --------------------------------------
    System.Data.DataSetExtensions
        程序集版本：4.0.0.0
        Win32 版本：4.0.30319.1 构建者：RTMRel
        代码库：file:///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/System.Data.DataSetExtensions/v4.0_4.0.0.0__b77a5c561934e089/System.Data.DataSetExtensions.dll
    --------------------------------------
    ************** JIT 调试 **************
    要启用即时 (JIT) 调试，为此的 .config 文件
    应用程序或计算机 (machine.config) 必须具有
    在 system.windows.forms 部分设置的 jitDebugging 值。
    应用程序还必须通过调试进行编译
    启用。
    例如：

    启用 JIT 调试后，任何未处理的异常
    将发送到计算机上注册的 JIT 调试器
    而不是由该对话框处理。

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T18:33:22.397

您正在运行的 .NET 应用程序必须以管理员身份运行才能自动执行 Powerpoint - 因此出现“请求的操作需要提升”错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:38:29.923

听起来 Windows 用户帐户控制 (UAC) 需要提升您尝试执行的代码的权限。右键单击您的可执行文件并以管理员身份运行，或禁用 UAC。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-15T12:59:39.283

**启用 Windows 窗体的即时调试。**

默认情况下，Windows 窗体应用程序有一个顶级异常处理程序，如果程序可以恢复，它允许程序继续运行。例如，如果您的 Windows 窗体应用程序抛出未处理的异常，您将看到如下所示的对话框：

[![在此处输入图像描述](../Images/825b00056f6deeef9716e7427755f23f.png)](https://i.stack.imgur.com/ZSNW4.png)

要启用 Windows 窗体应用程序的即时调试，您必须执行以下附加步骤：

在 machine.config 或 .exe.config 文件的 system.windows.form 部分中将 jitDebugging 值设置为 true：

`<configuration>
<system.windows.forms jitDebugging="true" />
</configuration>`

# r - R语言中的变量冲突

> ID：12750923
> 
> 赞同：3
> 
> 时间：2012-10-05T17:07:57.490
> 
> 标签：r, scope

我有一个 R 脚本，它采用 R 的其他脚本并以这种方式操作它们，并且还执行它们的代码。我的脚本使用了一些变量（显然），而当其他脚本使用通用变量名时，我就陷入了混乱。我希望我可以像在胶囊中一样执行其他脚本，这样重合的变量就不会相互影响。

我一直在阅读有关环境的内容，并进行了很多尝试，但我没有理解它们的真正含义。

例子：

```
script1.txt
___________
i=sample(10:20,1)

script2.txt
___________
i=sample(10:20,1) 

myscript.txt
___________
other.script = c("script1.txt", "script2.txt")
for( i in 1:2 ) {
    source(other.script[i])
}
i==2 
```

我希望每个变量“i”都能在不影响其他变量的情况下完成其职责（特别是 myscript 中的变量，我不太关心其他变量）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T17:56:15.713

您正在寻找`sys.source`. 您走在正确的轨道上，您需要创建一个`environment`然后在该环境中运行脚本。

```
other.script = c("script1.txt", "script2.txt")
for( i in 1:2 ) {
  env<-new.env(parent = baseenv())
  sys.source(other.script[i],env)
  print(get('i',env)) # prints the value of i
}
i==2 # TRUE 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-05T17:57:24.550

处理这个问题的最好方法是创建一组函数来分割脚本捕获的功能。每个函数都在自己的环境中执行，防止变量相互干扰。理想情况下，函数不应该太长，比如 10-20 行或代码。比调用这些函数完成任务更大的脚本。如果您正确地执行此操作，您的脚本可能会简短且切中要害。我通常将这些函数存储在一个或多个脚本文件中，以供`source`需要它们的脚本编辑。您甚至可以将它们包装在一个包裹中。

您想要订购脚本的方式，所有变量都是全局的，即可以在整个程序中访问。一般来说，应该像瘟疫一样避免使用全局变量。这正是因为您的问题关注的是：我如何防止变量相互干扰。就像我说的，抽象成函数或对象是防止这种情况发生的方法。有关全局变量等的更多信息，请参见：

*   [R中的全局变量和局部变量](https://stackoverflow.com/questions/10904124/global-and-local-variables-in-r)
*   [R中的全局变量](https://stackoverflow.com/questions/1236620/global-variables-in-r?rq=1)

# postgresql - 使用 pgAdmin 管理 Cloudfoundy 上的 Postgres 数据库

> ID：12750932
> 
> 赞同：3
> 
> 时间：2012-10-05T17:08:23.263
> 
> 标签：postgresql, cloud-foundry, pgadmin

我想使用 pgAdmin 来管理 Cloudfoundy 上的 Postgres 数据库（在给定的数据库列上建立索引）。我将 pgAdmin 指向 api.cloudfoundry.com，但不知道其余的设置应该是什么，例如端口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:54:21.237

您不能使用 api.cloudfoundry.com 并期望它能够正常工作。相反，您需要做的是使用名为“隧道”的 CloudFoundry 功能。它将做的是在本地运行的 pgAdmin 工具和通过 http 在 Cf 上运行的远程数据库之间的代理通信。

这在这里描述：http: [//docs.cloudfoundry.com/tools/vmc/caldecott.html](http://docs.cloudfoundry.com/tools/vmc/caldecott.html)

请注意，如果您熟悉 eclipse/STS，则更简单的设置方法是使用 CloudFoundry 插件，如下所述：http: [//blog.cloudfoundry.com/2012/07/31/cloud-foundry-集成-for-eclipse-now-supports-tunneling-to-services/](http://blog.cloudfoundry.com/2012/07/31/cloud-foundry-integration-for-eclipse-now-supports-tunneling-to-services/)

# ios - CFStreamCreatePairWithSocketToHost 获取本地端点地址

> ID：12750935
> 
> 赞同：2
> 
> 时间：2012-10-05T17:08:38.597
> 
> 标签：ios, sockets, tcp-ip

我是 iOS/MacOS 编程的新手，还没有找到我理解的任何示例。我想只需要几行代码就可以做到这一点，如果这已经涵盖了，很抱歉，但对于我的一生，我找不到它。

我正在使用 CFStreamCreatePairWithSocketToHost 创建输入/输出流。我只想获取本地端点信息（特别是 IP 地址，真的不关心端口）。我已经从我的服务器获取了公共 IP 信息，但出于安全/日志记录的原因，我也需要本地地址。

如果重要的话，这是在 iOS 上，而不是在 MacOS 上。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T18:21:32.713

以下代码演示了如何获取本地套接字地址。它适用于 IPv4 和 IPv6 地址。（不止几行，也许有人知道更短的解决方案。）

```
#include <sys/types.h>
#include <sys/socket.h>
#include <netdb.h>

// Create socket pair:
CFReadStreamRef readStream;
CFWriteStreamRef writeStream;
CFStringRef remoteHost = CFSTR("localhost");
CFStreamCreatePairWithSocketToHost(NULL, remoteHost, 5555, &readStream, &writeStream);

// Write something (the socket is not valid before you read or write):
CFWriteStreamOpen(writeStream);
CFWriteStreamWrite(writeStream, "Hello\n", 6);

// Get the native socket handle:
CFDataRef socketData = CFWriteStreamCopyProperty(writeStream, kCFStreamPropertySocketNativeHandle);
CFSocketNativeHandle socket;
CFDataGetBytes(socketData, CFRangeMake(0, sizeof(CFSocketNativeHandle)), (UInt8 *)&socket);

// Get the local socket address from the socket handle:
struct sockaddr_storage sa;
socklen_t salen = sizeof(sa);
getsockname(socket, (struct sockaddr *)&sa, &salen);

// Get numeric host and port from socket address:
char host[NI_MAXHOST];
char service[NI_MAXSERV];
getnameinfo((struct sockaddr *)&sa, salen, host, sizeof(host), service, sizeof(service), NI_NUMERICHOST|NI_NUMERICSERV);

NSLog(@"local address: %s, local port: %s", host, service); 
```

# php - PHP 文件中的 IF 语句用于检测何时没有任何条目

> ID：12750943
> 
> 赞同：2
> 
> 时间：2012-10-05T17:09:03.807
> 
> 标签：php, if-statement

我有一份工作申请表，其中包含一个人的详细信息。

现在，这些是在单独的行中返回的。如果任何字段中都没有条目，则发送的电子邮件中会有一个空白行。

我想`IF`声明一下，如果任何字段中没有条目，它将在邮件中返回“不适用”。

例子：

```
$nrel1 = $_POST['nrel1'];
$nrel11_name = $_POST['nrel1_name'];
$nrel1_age = $_POST['nrel1_age'];
$nrel1_gender = $_POST['nrel1_gender'];
$nrel1_education = $_POST['nrel1_education'];
$nrel2_employment = $_POST['nrel2_employment']; 
```

现在，如果申请人没有在该`$nrel1_age`字段中输入，我希望它在邮件中返回“不适用”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:14:39.283

```
function valueOrNotApplicable($array, $key)
{
    if (isset($array[$key]) && !empty($array[$key]))
        return $array[$key];
    else
        return 'Not Applicable';
}

$nrel1            = valueOrNotApplicable($_POST, 'nrel1');
$nrel11_name      = valueOrNotApplicable($_POST, 'nrel1_name');
$nrel1_age        = valueOrNotApplicable($_POST, 'nrel1_age');
$nrel1_gender     = valueOrNotApplicable($_POST, 'nrel1_gender');
$nrel1_education  = valueOrNotApplicable($_POST, 'nrel1_education');
$nrel2_employment = valueOrNotApplicable($_POST, 'nrel2_employment'); 
```

It's good to check both `isset()` and `!empty()`. If you don't check for `isset()` then you may get "PHP Notice: Undefined index" warnings.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T17:12:03.330

```
$nrel1_age = empty($_POST['nrel1_age']) ? 'Not Applicable' : $_POST['nrel1_age']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T17:13:10.367

尝试

```
 $nrel1 = (!empty(trim($nrel1_age))) ? $_POST['nrel1'] : "Not applicable"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T17:11:23.837

```
if(!isset($nrel1_age) && (trim($nrel1_age)!=''))
   return "Not applicable"; 
```

这应该够了吧。干杯

**编辑**

忘了装饰部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T17:13:08.750

您可以使用如下条件运算符

```
$nrel1_age = isset($_POST['nrel1_age']) && trim($_POST['nrel1_age'])!=''?$_POST['nrel1_age']:'Not Available'; 
```

# python - 使鼠标位置相对于相机缩放级别？

> ID：12750946
> 
> 赞同：0
> 
> 时间：2012-10-05T17:09:15.700
> 
> 标签：python, opengl, camera, zooming, pyglet

我刚刚在我的小 Pyglet 游戏中启动并运行了 OpenGL 的相机缩放，但现在我面临一个问题：当我放大或缩小时，游戏对象的命中框不会明显缩放，所以游戏没有响应鼠标事件正确。更改数千个对象的属性可能有点慢，所以我想知道是否可以修改鼠标的位置。我只是不知道怎么做。缩放是通过`glOrtho()`乘以参数来完成的。

缩放代码（`self.dx`和`self.dy`是到目前为止相机的总移动，`self.zoom`是从 0.1 到 2 的乘数）：

```
pyglet.gl.glMatrixMode(pyglet.gl.GL_PROJECTION)
pyglet.gl.glLoadIdentity()
pyglet.gl.glOrtho(-screen.width / (2 * self.zoom), screen.width / (2 * self.zoom), -screen.height / (2 * self.zoom), screen.height / (2 * self.zoom), -1, 1)
pyglet.gl.glTranslatef(self.dx - screen.width / 2, self.dy - screen.height / 2, 0)
pyglet.gl.glMatrixMode(pyglet.gl.GL_MODELVIEW) 
```

**编辑**

反转鼠标坐标的缩放计算怎么样？

**编辑 2**

我处理鼠标与游戏对象碰撞的方式至少是臭名昭著的。我实际上是使用`pygame.Rect`对象来表示对象的位置，然后将其与鼠标的位置相撞。到目前为止效果很好，因为直到现在我还没有进行任何缩放。也许有一种更适合 OpenGL/3D 世界的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T16:56:55.343

如果您使用的是 pygame.Rect，您指定的是屏幕上的一个点，而不是 3d 世界中的一个点。

你应该拥有的是：
一个基类“敌人”。
任何“敌人”都必须有两个 opengl 三角形、一个纹理和一个“hitbox”对象。
hitbox 对象指定 2D 空间中的两个对角。假设 3d 坐标与两个三角形相同。您可以选择三角形来确定 hitbox，在这种情况下不需要实际的对象，只需忘记它并覆盖访问函数。
拍摄时，确定拍摄方向的 3d 矢量。将屏幕一分为二，左/右并确定它的拍摄位置。然后与向下/向上相同。然后浏览您的目标。检查可见性 1st，如果可见，检查屏幕的一侧，如果右侧，检查弹丸是否会击中。

上面说明的是如何做到这一点的众多版本之一。这是我很快想到的。我希望看到它你会意识到哪里出了问题（可能是碰撞箱与你的实际敌人完全无关）并能够根据示例修复它。

# qt - 如何使用 QAbstractTableModel.submit\revert 方法？

> ID：12750958
> 
> 赞同：3
> 
> 时间：2012-10-05T17:10:26.013
> 
> 标签：qt, pyqt, pyside

我正在尝试使用我自己的`QAbstractTableModel`-descendant 类和`QTableView`. 编辑完成后，模型会接收到它`submit()`或`revert()`插槽的信号。但是没有参数，因此模型不知道它需要提交（刷新）数据存储区的哪条记录。我试图通过 catch 设置我自己的更改跟踪`model.setData()/removeRows()/insertRows()`，但这有点乱。有正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:09:33.640

根据以下文档`QAbstractTableModel`：

> 子类化
> 
> 子类化 QAbstractTableModel 时，必须实现 rowCount()、columnCount() 和 data()。index() 和 parent() 函数的默认实现由 QAbstractTableModel 提供。表现良好的模型也将实现 headerData()。
> 
> 可编辑模型需要实现 setData()，并实现 flags() 以返回包含 Qt.ItemIsEditable 的值。

因此，您正在重新实现`setData`,`removeRows`和的事实`insertRows`是适当的。该类的其他子类也使用自己的内部缓存来跟踪正在更改的内容，以便在需要时将其提交给数据源。如果到目前为止您的方法一团糟，那么您可能只需要改进您正在做的事情，因为路径是正确的。

`setData`是您可以跟踪内部数据结构中正在更改的内容的地方。因此，例如，如果您的模型在内部是一个基本字典，并且将提交给基于 Web 的 REST 服务，那么您将管理对内部字典中数据的更改。当`submit`被调用时，您将使用该内部缓存进行必要的 REST 调用以发送数据并同步它。

# asp.net - asp.net 配置 - 安全 - 管理访问角色

> ID：12750959
> 
> 赞同：0
> 
> 时间：2012-10-05T17:10:27.230
> 
> 标签：asp.net, sql-server, vb.net, iis-7, web-config

发布项目并将其上传到我的网络服务器后，我遇到了问题。所有访问角色都消失了，任何人都可以访问任何被认为仅限于用户登录凭据的页面。我使用 asp.net 配置工具在 Visual Basic 2012 中设置了所有安全性。当我在 Visual Studio 中测试项目时，所有访问限制都在起作用。我需要更改我的 webconfig 中的某些内容吗？此外，我使用 Integrated Security=False 并为我的 SQL 数据库连接字符串提供用户名和密码，并且用户角色设置为 db_datareader 和 db_datawriter。

我解决了或者更确切地说乔尔解决了这个问题，解决方案是：

我正在查看根文件夹中的 web.config 文件，而不是每个“公共”和“私人”文件夹的 web.config。我所要做的就是将这些 web.config 文件从我的 Visual Studio 项目文件夹复制到我的网络服务器上的相应文件夹中。正是那些包含所有元素的 web.config 文件。

# c# - 指定由 wmi 创建的远程进程应与桌面交互

> ID：12750960
> 
> 赞同：0
> 
> 时间：2012-10-05T17:10:27.510
> 
> 标签：c#, wmi

我知道我可以通过 WMI 创建一个远程进程，例如：

```
 object[] theProcessToRun = { "notepad.exe" };
        var path = new ManagementPath(String.Format(@"\\{0}\root\cimv2", "win7test-hyperv"));
        var scope = new ManagementScope(path);
        var theClass = new ManagementClass(scope, new ManagementPath("Win32_Process"), new ObjectGetOptions());
        theClass.InvokeMethod("Create", theProcessToRun); 
```

但是我可以指定应该与桌面交互（如 psexec 的 -i）吗？我还希望能够指定 UI 应该与哪个用户会话进行交互？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T18:34:11.253

出于安全原因，[Win32_Process.Create 方法](http://msdn.microsoft.com/en-us/library/windows/desktop/aa389388%28v=vs.85%29.aspx)不能用于远程启动交互式进程。

# java - 使用 Java 泛型进行 JAXB 解组

> ID：12750962
> 
> 赞同：7
> 
> 时间：2012-10-05T17:10:32.153
> 
> 标签：java, jaxb, unmarshalling

我正在尝试使用 JAXB 从遗留系统中解组 XML 文档。我有一个xml结构如下：

```
<response>
    <id>000000</id>
    <results>
        <result>
<!-- Request specific xml content -->
            <year>2003</year>
            <title>Lorem Ipsum</title>
            <items>
                <item>I1</item>
                <item>I2</item>
            </items>
        </result>
        <result>
            <year>2007</year>
            <title>Dolor sit amet</title>
            <items>
                <item>K1</item>
                <item>K2</item>
            </items>
        </result>
    </results>
</response> 
```

标签指定的部分内的`<result>`标签将根据我的要求而改变。由于内容可能会发生变化，我决定对结果项使用泛型，并且我准备了带有以下注释的 java bean：

```
// imports here
@XmlRootElement(name="response")
@XmlAccessorType(XmlAccessType.FIELD)
public class XResponse<T>{
    private String id;

    @XmlElementWrapper(name="results")
    @XmlElement(name="result")
    private List<T> results;

// setters and getters
}

...

@XmlRootElement(name="result")
@XmlAccessorType(XmlAccessType.FIELD)
public class X1Result{
    private String year;
    private String title;
    @XmlElementWrapper(name="items")
    @XmlElement(name="item")
    private List<String> items;

// setters and getters
}
... 
```

我尝试通过以下代码解组 xml 文档：

```
JAXBContext context = JAXBContext.newInstance(XResponse.class, X1Result.class);
Unmarshaller um = context.createUnmarshaller();
XResponse<X1Result> response = (XResponse<X1Result>) um.unmarshal( xmlContent );

List<X1Result> results = unmarshal.getResults();
for (X1Result object : results) {
    System.out.println(object.getClass());
} 
```

我在解组过程中遇到一个问题，它无法将列表项转换为`X1Result`类。相反，它使用`org.apache.xerces.dom.ElementNSImpl`.

我应该怎么做才能让 JAXB Unmarshaller 使用`X1Result`类？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:55:25.830

我认为你应该使用继承而不是泛型。给定这样的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<response xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <id>000000</id>
    <results>
        <result xsi:type="X1Result">
            <year>2003</year>
            <title>Lorem Ipsum</title>
            <items>
                <item>I1</item>
                <item>I2</item>
            </items>
        </result>
        <result xsi:type="X1Result">
            <year>2007</year>
            <title>Dolor sit amet</title>
            <items>
                <item>K1</item>
                <item>K2</item>
            </items>
        </result>
    </results>
</response> 
```

您可以动态绑定您的`<result>`条目。你有一个顶级类型：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "XResult")
@XmlSeeAlso({
    X1Result.class
})public abstract class XResult {

} 
```

你有实现类：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "X1Result")
public class X1Result extends XResult {
    @XmlElement(name = "year")
    private String year;

    @XmlElement(name = "title")
    private String title;

    @XmlElementWrapper(name = "items")
    @XmlElement(name = "item")
    private List<String> items;
    ...
} 
```

在 XResponse 类中使用顶级类型：

```
@XmlRootElement(name = "response")
@XmlAccessorType(XmlAccessType.FIELD)
public class XResponse {
    @XmlElement(name = "id")
    private String id;

    @XmlElementWrapper(name = "results")
    @XmlElement(name = "result")
    private List<XResult> results;
    ...
} 
```

您可以使用顶级类型解组：

```
context = JAXBContext.newInstance(XResponse.class, XResult.class);
Unmarshaller unmarshaller = context.createUnmarshaller();
XResponse response = (XResponse) unmarshaller.unmarshal(new File("testfile.xml"));

List<XResult> results = response.getResults();
for (XResult object : results) {
    System.out.println(object.getClass());
} 
```

# xmpp - 在 HAproxy 中将“leastconn”设置为负载平衡方法来处理 BOSH 连接是个好主意吗？

> ID：12750963
> 
> 赞同：1
> 
> 时间：2012-10-05T17:10:50.020
> 
> 标签：xmpp, load-balancing, haproxy, basichttpbinding

我有一个 HAproxy 实例用作 BOSH（http-bind，http://xmpp.org/extensions/xep-0206.html）服务器的负载均衡[器](http://xmpp.org/extensions/xep-0206.html)。它使用“循环”负载平衡方法运行，但我尝试了一些问题，当某些实例出现故障时，所有连接都重新分配到活动实例。当死亡节点再次出现时，它们没有与其他实例相同数量的连接，并且它们没有使用相同的资源。如果其他实例宕机，会话将重新分配，一些服务器将超载，而另一些在限制范围内运行的服务器宕机，因此所有服务都中断，我需要同时重启所有实例才能按顺序尝试可以均匀地重新分配会话。

我正在阅读有关如何使用 HAproxy 配置 BOSH 负载平衡的信息，我发现了这本书：“Professional XMPP Programming with JavaScript and jQuery”。在本书中作者推荐我们[可以使用“leastconn”作为Haproxy的平衡方法](http://books.google.com.ar/books?id=rVV_pCb-zzsC&pg=PT380&lpg=PT380&dq=haproxy%20%2b%20bosh&source=bl&ots=_7tVucdm2C&sig=EFR5GRjvt53CGFAoYgO6YMxZ4a4&hl=en&sa=X&ei=hRBvUJP6LYHs8gSe-YCoCQ&ved=0CDMQ6AEwAg)。

HAproxy 文档说我们不应该对 HTTP 连接使用“leastconn”，但它说我们应该在需要很长会话的地方使用它。

我认为这种平衡方法可以帮助解决服务器宕机时的问题，因为它会在活动节点中平均重新分配会话，并且当实例再次启动时，所有新会话都将转到该实例，直到它具有与其他服务器相同数量的会话。

有没有人有这种配置的经验？为了平衡 BOSH 连接，您向我推荐了哪些 HApoxy 设置或调整？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T22:02:32.903

如果您的会话很长，并且可能是在我阅读 SMPP 时，那么 minimumconn 将提供比轮询更好的负载平衡。Roundrobin 适用于非常短的连接。

干杯

# c++ - 无法填充作为类成员的数组。C++

> ID：12750968
> 
> 赞同：3
> 
> 时间：2012-10-05T17:11:18.287
> 
> 标签：c++, arrays, class, fill

```
#include <iostream>
using namespace std;

class SomeClass {
public:
    bool someArray[4][4]={{0,0,0,0},{0,0,0,0}};
};

int main()
{
     SomeClass super;
     super.someArray={{1,1,1,0},{1,0,0,1}};  //This goes red, indicates a mistake. How do i properly fill it?

    for (int i=0;i<4;i++){
        for (int j=0;j<4;j++){
           cout<<super.someArray[i][j];
        }
        cout<<endl;
    }
return 0;
} 
```

请参阅上面代码中的注释。顺便说一句： `super.someArray[4][4]={{1,1,1,0},{1,0,0,1}};`也不起作用，它可能不应该。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:16:16.893

1.  您可能打算使用`bool someArray[2][4]`（即，具有两个元素的数组，其中包含具有四个布尔元素的数组）。

2.  在 C++ 中，您不能将一个数组分配给另一个数组；您需要复制各个元素。即，类似：

    super.someArray[0][0] = 1; super.someArray[0][1] = 1; super.someArray[0][2] = 1; super.someArray[0][3] = 0; super.someArray[1][0] = 1; super.someArray[1][1] = 0; super.someArray[1][2] = 0; super.someArray[1][3] = 1;

（如果您有一些数据来源，当然可以使用循环。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T18:04:42.097

以下使用 GNU 编译器对我有用。请注意，我用 std::tr1::array 替换了您的原始数组。这个类在分配整个数组方面更加灵活（而不是仅仅从字面量初始化数组）。

```
#include <iostream>
#include <tr1/array>
using namespace std;
using namespace tr1;
typedef array<array<bool,4>,4> array4x4;

class SomeClass {
public:
    array4x4 someArray;
    SomeClass() : someArray((array4x4){{{{0,0,0,0}},{{0,0,0,0}}}}) {}
};

int main()
{
     SomeClass super;
     super.someArray=(array4x4){{{{1,1,1,0}},{{1,0,0,1}}}};  //Now works

    for (int i=0;i<4;i++){
        for (int j=0;j<4;j++){
           cout<<super.someArray[i][j];
        }
        cout<<endl;
    }
return 0;
} 
```

但是，以下方法更接近您开始的地方，并演示了其他评论中建议的一些事情......

```
#include <iostream>
#include <algorithm>
using namespace std;

class SomeClass {
public:
    bool someArray[4][4];
    SomeClass()
       {
       bool temp[4][4] = {{0,0,0,0},{0,0,0,0},{0,0,0,0},{0,0,0,0}};
       for ( int j=0; j<4; j++ ) for ( int i=0; i<4; i++ ) someArray[j][i] = temp[j][i];
       }
};

int main()
{
     SomeClass super;
       bool temp[4][4] = {{1,1,1,0},{1,0,0,1}}; // a local source of data
       for ( int j=0; j<4; j++ ) for ( int i=0; i<4; i++ ) super.someArray[j][i] = temp[j][i];

    for (int i=0;i<4;i++){
        for (int j=0;j<4;j++){
           cout<<super.someArray[i][j];
        }
        cout<<endl;
    }
return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T20:52:43.603

```
super.someArray[4][4]={{1,1,1,0},{1,0,0,1}}; 
```

上面的行只需要：

```
super.someArray[4][4]={1,1,1,0,1,0,0,1}; 
```

**说明：** 它会自动进入数组的下一部分。如果你把它想象成一个表，一旦第一行被填满，它就会开始为下一行声明它。

所以如果你写：

```
super.someArray[4][4]={1,1,1,1,1}; 
```

它会设置：

```
someArray[0][0] 
someArray[0][1] 
someArray[0][2] 
someArray[0][3] 
someArray[1][0] 
```

都等于 1。

（我可能已经切换了数字，所以它可能是 x 和 y 的地方被改变了，我不记得 c++ 了）

# gwt - 允许/禁止 GWT 中 TabPanel 的选项卡选择

> ID：12750969
> 
> 赞同：0
> 
> 时间：2012-10-05T17:11:20.687
> 
> 标签：gwt, tabpanel

我有 4 个标签。我想阻止用户（使用 window.alert 示例）进入另一个选项卡，因为它尚未完成填充当前选项卡。用户填写完所有字段后，当前选项卡内会出现一个文本（说他可以移动到下一个选项卡）。他将能够单击下面的选项卡。

我应该使用 BeforeSelectionEvent 处理程序还是 SelectionHandler？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:21:25.167

我做这个代码来回答我的问题，但太长了

```
is there a possibility to turn it into a short function ?
 this.addBeforeSelectionHandler(new BeforeSelectionHandler<Integer>() {
              public void onBeforeSelection(BeforeSelectionEvent<Integer> event) {
                if (Application.get().getChampsObligatoire().values().contains("Fiche")) {
                    if (event.getItem().intValue() > 0){
                    event.cancel();
                    Window.alert("You must fill all fields before proceeding to the next step.");
                    }

                    }
                if (Application.get().getChampsObligatoire().values().contains("projet")) {
                    if (event.getItem().intValue() > 1){
                    event.cancel();
                    Window.alert("You must fill all fields before proceeding to the next step.");
                    }
                }
                    if (Application.get().getChampsObligatoire().values().contains("cibles")) {
                        if (event.getItem().intValue() > 2){
                        event.cancel();
                        Window.alert("You must fill all fields before proceeding to the next step.");
                        }

                        }

                    if (Application.get().getChampsObligatoire().values().contains("Ressources")) {
                        if (event.getItem().intValue() > 3){
                        event.cancel();
                        Window.alert("You must fill all fields before proceeding to the next step.");
                        }

                        }
                    if (Application.get().getChampsObligatoire().values().contains("Contrôle")) {
                        if (event.getItem().intValue() > 4){
                        event.cancel();
                        Window.alert("You must fill all fields before proceeding to the next step.");
                        }

                        }

              }

            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:31:57.433

对于 GWT 选项卡面板：

```
@Override
public boolean onBeforeTabSelected(SourcesTabEvents sender, int tabIndex)
{
    String currentTabName = widget.getTabHTML(widget.getSelectedTab()); // for reference
    String tabNameYouTryingToSelect = widget.getTabHTML(tabIndex);  // for reference

    // check some external self-written method and return true or false to allow/disallow selection
    if (isCurrentlyActiveTabBuilt()){
        return true;
    } else {
        Window.alert("You must fill all fields before proceeding to the next step.");
        return false;
    }
} 
```

# c# - WCF - 忽略客户端行为

> ID：12750973
> 
> 赞同：0
> 
> 时间：2012-10-05T17:11:32.623
> 
> 标签：c#, wcf, service

我的 WCF 客户端遇到了一些问题。我已经配置了 endpointBehaviors，但它没有加载到 Servicehost 中（但绑定已加载......）。

配置：

```
<system.serviceModel>
      <behaviors>
        <endpointBehaviors>
          <behavior name="DefaultBehavior">
            <dataContractSerializer maxItemsInObjectGraph="2147483647" />
          </behavior>
        </endpointBehaviors>
      </behaviors>

      <bindings>
        <netTcpBinding>
          <binding name="DefaultBinding" maxReceivedMessageSize="2147483647" maxBufferSize="2147483647" maxBufferPoolSize="2147483647">
            <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
                          maxArrayLength="2147483647" maxBytesPerRead="2147483647"
                          maxNameTableCharCount="2147483647" />
          </binding>
        </netTcpBinding>
      </bindings>

      <client>
            <endpoint address="..." behaviorConfiguration="DefaultBehavior" binding="netTcpBinding" bindingConfiguration="DefaultBinding" contract="..." name="..."/>
            <endpoint address="..." behaviorConfiguration="DefaultBehavior" binding="netTcpBinding" bindingConfiguration="DefaultBinding" contract="..." name="..."/>
      </client>
    </system.serviceModel> 
```

服务包装类：

```
public class ServiceWrapper<T> : IDisposable where T : class
{
    private ChannelFactory<T> factory;
    private T channel;

    private readonly NetTcpBinding binding;
    private readonly EndpointAddress endpoint;

    private readonly object lockObject = new object();
    private bool disposed;

    public ServiceWrapper(string configName)
    {
        ClientSection clientSection = ConfigurationManager.GetSection("system.serviceModel/client") as ClientSection;
        ChannelEndpointElementCollection endpointCollection = clientSection.ElementInformation.Properties[string.Empty].Value as ChannelEndpointElementCollection;

        foreach (ChannelEndpointElement endpointElement in endpointCollection)
        {
            if (endpointElement.Name != configName)
                continue;

            binding = new NetTcpBinding(endpointElement.BindingConfiguration);
            endpoint = new EndpointAddress(endpointElement.Address);

            disposed = false;
        }

        if (endpoint == null)
            throw new ConfigurationErrorsException(configName + " is not present in the config file");
    }

    public T Channel
    {
        get
        {
            if (disposed)
                throw new ObjectDisposedException("Resource ServiceWrapper<" + typeof(T) + "> has been disposed");

            lock (lockObject)
            {
                if (factory == null)
                {
                    factory = new ChannelFactory<T>(binding, endpoint);
                    channel = factory.CreateChannel();
                }
            }
            return channel;
        }
    }

    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }

    private void Dispose(bool disposing)
    {
        if (!disposed)
        {
            if (disposing)
            {
                lock (lockObject)
                {
                    if (channel != null)
                        ((IClientChannel)channel).Close();

                    if (factory != null)
                        factory.Close();
                }

                channel = null;
                factory = null;
                disposed = true;
            }
        }
    }
} 
```

我真的不知道如何继续前进。有没有人知道如何使它工作？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T18:39:00.910

尝试使用带有端点配置名称的[ChannelFactory 构造函数。](http://msdn.microsoft.com/en-us/library/ms574913.aspx)它将简化您的代码并加载所有行为。行为在 ChannelFactory (Factory.Endpoint.Behaviors) 中，而不是在绑定本身中。

# java - 如何删除正在执行的jar文件

> ID：12750975
> 
> 赞同：3
> 
> 时间：2012-10-05T17:11:38.893
> 
> 标签：java, swing, reflection, file-io, jar

我创建了一个应用程序，其中基于操作，它修改 jar 内的属性文件。

我可以使用更新的更改创建一个新的临时 jar。但是无法将jar文件重命名为现有的jar文件名。由于它正在运行，我无法删除和重命名它。

任何人都可以提出任何操作或建议来删除 jar（当前正在执行）并将临时 jar 重命名为该名称吗？

我为应用程序做了：http: [//java.net/projects_tags/jeazyprops](http://java.net/projects_tags/jeazyprops)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T18:03:28.293

你的问题是`ClassLoader`pre-java 1.7 使用的默认值 - 它锁定它加载的任何 jar 并且在执行完成之前不会释放 jar。最简单的解决方案是使用 Java 1.7，它应该可以解决这个问题。否则，您可以编写自己的自定义`ClassLoader`（呃）。默认`ClassLoader`：[http ://docs.oracle.com/javase/6/docs/api/java/net/URLClassLoader.html](http://docs.oracle.com/javase/6/docs/api/java/net/URLClassLoader.html)

**编辑**

这是 Oracle 的说明，他们在 Java 1.7 中修复了它：http: [//openjdk.java.net/projects/jdk7/features/#f584](http://openjdk.java.net/projects/jdk7/features/#f584)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T18:00:45.937

可能您需要编写一个自定义类加载器（扩展 ClassLoader），它使您能够加载/卸载 jar。如果您可以卸载 jar，您应该能够删除该 jar。

有用的链接 [http://docs.oracle.com/javase/tutorial/deployment/jar/jarclassloader.html](http://docs.oracle.com/javase/tutorial/deployment/jar/jarclassloader.html)

[我可以动态卸载和重新加载（相同的其他版本）JAR 吗？](https://stackoverflow.com/questions/728140/can-i-dynamically-unload-and-reload-other-versions-of-the-same-jar)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T18:03:33.887

我看不到替换您在程序中执行的 jar 的可能性。
建议的方法。
使用一个简单的类创建一个新 jar，该类仅启动您现有的应用程序。在启动之前，它应该检查是否`temp.jar`存在，如果存在则删除原始文件并将其重命名`temp.jar`为原始文件。在您的应用程序中创建 后`temp.jar`，使用`Runtime.exec`并退出启动器类。您的应用程序将使用新 jar 重新启动。

# silverlight-4.0 - 在 Silverlight 中与 ListBox 进行数据绑定

> ID：12750978
> 
> 赞同：0
> 
> 时间：2012-10-05T17:11:42.967
> 
> 标签：silverlight-4.0

我试图将 ListBox 项绑定到 Grid。

在 Grid 中有一个 Image 和 TextBlock。

我已成功绑定 TextBlock，但无法绑定图像。

每当我单击 ListBox 项目时，其他 TextBlocks 都会显示结果，但我看不到图像。

```
<ListBox x:Name="listBox" HorizontalAlignment="Left" ItemTemplate="{StaticResource ExtraTemplate1}" ItemsSource="{Binding Extras}" Margin="46,127,0,129" Width="200"/>
    <Grid Margin="261,127,32,129" DataContext="{Binding SelectedItem, ElementName=listBox}">
        <TextBlock HorizontalAlignment="Right" Height="29" Margin="0,0,20,8" TextWrapping="Wrap" Text="{Binding Price}" VerticalAlignment="Bottom" Width="94"/>
        <TextBlock Margin="167,14,20,41" TextWrapping="Wrap" Text="{Binding Description}"/>
        <Image HorizontalAlignment="Left" Margin="8,14,0,41" Width="143" Source="{Binding Image}"/>
    </Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:53:34.373

您提供了错误的值作为`Image`模型对象的属性（它应该是图像的有效 URI），或者您的 URI 指向不受支持的图像类型（Silverlight 4 支持 jpg 和 png）。尝试在运行时检查 VS 中的输出窗口以获取有关绑定错误的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T06:08:02.943

图片网址应该是这样的`/{projectname};component/{Folderpath}/imagename`

或采用其他图像控件添加图像源并从该图像源中引用以设置列表中图像字段的值。谢谢

# c++ - 通过 ++ 和 -- 运算符更改 C++ 中结构的地址

> ID：12750984
> 
> 赞同：4
> 
> 时间：2012-10-05T17:12:09.063
> 
> 标签：c++, struct, operator-keyword

是否可以使用 -- 或 ++ 运算符更改我当前结构的地址，即：

```
mystruct* test = existing_mystruct;
test++ // instead of using: test = test->next_p; 
```

我试图使用它，但它似乎是 const 并给了我一个错误：分配给这个（不合时宜）：

```
struct mystruct {
    mystruct* next_p;
    mystruct* prev_p;

    void operatorplusplus  () { this = next_p; }
    void operatorminusminus() { this = prev_p; }
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T17:15:42.163

对象在存在时在内存中具有恒定地址。但是，您可以将它们复制到新地址。

您尝试做的是在链表中前进。如果您重载它们，则可以使用这些运算符完成。但是您需要在一个特殊的句柄类中定义它来包裹列表节点。

**编辑**

我描述的代码看起来有点像这样：

```
class mylist
{
  struct mynode
  {
    //data
    mynode* next;
    mynode* prev;
  } *curr;

public:
 mylist& operator++() {curr = curr->next; return *this;}
}; 
```

当然，您会想要进行边界检查等，但这是一般的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T17:16:21.053

No.`this`指针的类型是`mystruct * const`，这意味着它的地址是不可更改的。

# java - logcat 跟踪中的 NullPointerException

> ID：12750985
> 
> 赞同：-2
> 
> 时间：2012-10-05T17:12:08.710
> 
> 标签：java, android, logcat

> **可能重复：**
> [启动活动时出现 NullpointerException](https://stackoverflow.com/questions/12749787/nullpointerexception-when-launching-activity)

我现在得到这个 logcat ！每次我收到此消息并强制关闭！我以前问过这个问题，但我得到一个新的错误！出！

```
FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to start activity ComponentInfo{yaAli.package313.hossein110/yaAli.package313.hossein110.know}: java.lang.NullPointerException
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:123)
    at android.app.ActivityThread.main(ActivityThread.java:4627)
    at java.lang.reflect.Method.invokeNative(Native Method)at java.lang.reflect.Method.invoke(Method.java:521)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
    at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
    at org.apache.harmony.luni.util.FloatingPointParser.parseFloat(FloatingPointParser.java:301)
    at java.lang.Float.parseFloat(Float.java:291)
    at java.lang.Float.valueOf(Float.java:330)
    at yaAli.package313.hossein110.know.onCreate(know.java:67)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
    ... 11 more 
```

应用您的答案后，我得到了新的 logcat：

```
FATAL EXCEPTION: main
java.lang.NumberFormatException: unable to parse '' as integer
at java.lang.Integer.parseInt(Integer.java:412)
at java.lang.Integer.parseInt(Integer.java:382)
at java.lang.Integer.valueOf(Integer.java:682)
at yaAli.package313.hossein110.know$1.run(know.java:37)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4627)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T17:18:21.353

从您的代码：

```
String sizefa = sharedpreferences.getString("fontsizefa",null);
...
tvfa.setTextSize(1, Float.valueOf(sizefa).floatValue()); 
```

当您的首选项不包含“fontsizefa”时，您将其设置为空。抛出异常是因为稍后您尝试将空字符串转换为浮点数。

将其更改为：

```
String sizefa = sharedpreferences.getString("fontsizefa","0.0"); 
```

或任何您想要的默认大小。

`colorfa`当它不在您的偏好中时，您也会遇到同样的问题。

# responsive-design - 同位素和媒体查询

> ID：12750989
> 
> 赞同：2
> 
> 时间：2012-10-05T17:12:44.277
> 
> 标签：responsive-design, media-queries, jquery-isotope, fluid

绝对把我的头发拉出来。[GitHub 上](https://github.com/desandro/isotope/issues/271)似乎没有提供黑白解决方案——这很奇怪，因为它似乎是一个相当简单的概念。也许我只是不明白。

基本上，我正在尝试创建一个**流畅**且**响应**迅速的投资组合 - 使用[Isotope](http://isotope.metafizzy.co/)过滤项目。过滤效果很好，4 列完全流畅，当您调整窗口大小时，一切看起来都很棒。

**但是**，对于移动设备和平板电脑布局，我只需要将**4 列**布局调整为**2 列**布局。

我试过这个：

```
$(window).load(function(){

    var $container = $('#thumbs');
    $container.isotope({
        filter: '*',
        animationOptions: {
            duration: 750,
            easing: 'linear',
            queue: false,
       },
    });

    // initialize Isotope
    $container.isotope({
      // options...
      resizable: false, // disable normal resizing
      // set columnWidth to a percentage of container width
      masonry: { columnWidth: $container.width() / 4 },
    });

    // update columnWidth on window resize
    $(window).smartresize(function(){
        $container.isotope({
            // update columnWidth to a percentage of container width
            masonry: { columnWidth: $container.width() / 4 }
        });
    });

// My attempt at using media queries to change 'columnWidth'
    $(window).resize(function() {
        var width = $(window).width();
        if (width < 768) {
            $container.isotope( {
                // update columnWidth to half of container width
                masonry: { columnWidth: $container.width() / 2 }
            });
        }
    });
}); 
```

没用:(

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T22:19:35.280

这应该可以设置您的列数。然后你只需除以`columns`。

```
var columns;

// set column number
setColumns();

// rerun function when window is resized 
$(window).on('resize', function() {
  setColumns();
});

// the function to decide the number of columns
function setColumns() {
  if($(window).width() <= 768) {
    columns = 2;
  } else {
    columns = 4;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T16:35:31.690

我认为有一种更好的方法，您仍然可以使用 css 媒体查询。在这里查看我的答案：[https ://stackoverflow.com/a/20270911/1010892](https://stackoverflow.com/a/20270911/1010892)

希望有帮助！！

# asp.net - 将gridview导出到带有冻结列的excel

> ID：12750990
> 
> 赞同：0
> 
> 时间：2012-10-05T17:12:47.317
> 
> 标签：asp.net, excel, gridview

如何将我的 gridview 导出到 excel 并在 excel 中冻结行和列？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:48:12.047

我希望它能帮助你 [http://csharpektroncmssql.blogspot.com/2011/12/export-gridview-to-excel-in-aspnet.html](http://csharpektroncmssql.blogspot.com/2011/12/export-gridview-to-excel-in-aspnet.html)

# common-lisp - ASDF 可选系统依赖项

> ID：12750996
> 
> 赞同：0
> 
> 时间：2012-10-05T17:12:59.500
> 
> 标签：common-lisp, asdf

我有一个我编写的系统，它尽可能使用 lparallel，否则可以解决它。问题是，我现在正试图在 ECL 上对其进行测试，仅在加载 lparallel 时就会出错。

有没有办法（除了`#-ecl`）来指定由实现类型参数化的系统依赖关系？我查看了 Madiera Port，但它似乎仅适用于子组件，而不适用于系统依赖项。我希望将我的 .asd 文件保留为简单的机器可读形式，没有阅读器条件等。

（旁白：当前 ECL 上的 lparallel 负载正常。我的刚刚过时了。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T16:06:21.160

据我所知，除了读者条件之外，在 ASDF 中没有直接的方法可以做到这一点。您可以改用 XCVB，或者编写一个`defsystem*`添加新语法的宏，或者（也许）`defsystem`像 madeira 那样挂钩到现有的。

在不知道您的动机的情况下，我想知道为什么`#-ecl`要避免使用简单的解决方案。您是否希望存储将 ECL 链接到不存在 lparallel 的元数据？注意`#-lparallel`并且`#+lparallel`可以在 lisp 文件中使用。

顺便说一下，lparallel 在 ECL 中对我来说很好。您正在运行最新的 ECL 吗？ECL 中有一个已知错误会导致 lparallel 测试最终挂起，但这可能不会影响所有平台。

# r - 使用函数添加以另一个为条件的字段

> ID：12750997
> 
> 赞同：1
> 
> 时间：2012-10-05T17:13:01.890
> 
> 标签：r

如果标题可能不清楚，我深表歉意。

和

```
df <- data.frame(profit = c(1, 1, 0, 0, 0, -1),
                 offerA = round(rnorm(6), 2), 
                 offerB = round(runif(6), 2), 
                 offerC = sample(1:6))

df
  profit offerA offerB offerC
1      1  -0.51   0.91      6
2      1  -0.03   0.75      4
3      0  -1.02   0.28      5
4      0   0.63   0.61      1
5      0   2.32   0.37      2
6     -1  -0.15   0.43      3 
```

我需要在以下条件下添加一个`bid`根据值命名的字段：`profit`

```
with(df,
  if (profit > 0) {
    apply(cbind(offerA, offerB, offerC), 1, max)
  }
  else if (profit = 0) {
    apply(cbind(offerA, offerB, offerC), 1, mean)
  }
  else if (profit < 0) {
    apply(cbind(offerA, offerB, offerC), 1, min)
  }
) 
```

在这个例子中，新的`df`将是：

```
df
  profit offerA offerB offerC   bid
1      1  -0.51   0.91      6     6
2      1  -0.03   0.75      4     4
3      0  -1.02   0.28      5  1.42
4      0   0.63   0.61      1  0.75
5      0   2.32   0.37      2  1.56
6     -1  -0.15   0.43      3 -0.15 
```

因为 的值`bid`是按行计算的，所以我想编写一个函数`addBid()`，以便可以使用类似`apply(df, 1, addBid)`但我想不出将上面的条件添加到函数中的好方法。我希望我的问题很清楚。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T17:26:05.520

也许这可能有用

```
bid <- function(x, ref, add=FALSE){
  ref <- match(ref,names(df))
  result <- ifelse(df[,ref]>0, apply(df[,-ref],1,max), 
         ifelse(df[,ref]==0, rowMeans(df[,-ref]),  apply(df[,-ref],1,min)) )
  if(add){
    result <- cbind(x, bid=result)
  }
  return(result)
} 
```

你的`x`data.frame在哪里，是参考`ref`变量（`profit``add``bid``add=FALSE``bid``add=TRUE`

```
set.seed(001)
df <- data.frame(profit = c(1, 1, 0, 0, 0, -1),
                 offerA = round(rnorm(6), 2), 
                 offerB = round(runif(6), 2), 
                 offerC = sample(1:6))

> bid(df, ref='profit')  # returns a vector
[1]  3.000000  4.000000  1.643333  1.033333  1.016667 -0.820000
> bid(df, ref='profit', add=TRUE) # returns a data.frame = df + bid
  profit offerA offerB offerC       bid
1      1  -0.63   0.69      3  3.000000
2      1   0.18   0.38      4  4.000000
3      0  -0.84   0.77      5  1.643333
4      0   1.60   0.50      1  1.033333
5      0   0.33   0.72      2  1.016667
6     -1  -0.82   0.99      6 -0.820000 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T18:02:50.710

最直接的方法可能是使用`transform()`或`within()`代替编写单独的函数。使用@Jilber 的示例数据（以及相同的转换逻辑），这是一个使用示例`transform()`：

```
transform(df, bid = ifelse(profit > 0, apply(df[-1], 1, max), 
                           ifelse(profit == 0, rowMeans(df[-1]), 
                                  apply(df[-1], 1, min))))
#   profit offerA offerB offerC       bid
# 1      1  -0.63   0.69      3  3.000000
# 2      1   0.18   0.38      4  4.000000
# 3      0  -0.84   0.77      5  1.643333
# 4      0   1.60   0.50      1  1.033333
# 5      0   0.33   0.72      2  1.016667
# 6     -1  -0.82   0.99      6 -0.820000 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T17:21:43.303

可能有一些更优雅的东西，但我认为这很有效：

```
foo <- function(x){
    if (x[1] > 0){
        return(max(x[-1]))
    }
    if (x[1] == 0){
        return(mean(x[-1]))
    }
    if (x[1] < 0){
        return(min(x[-1]))
    }
}

df$bid <- apply(df,1,foo)
df
  profit offerA offerB offerC       bid
1      1  -0.17   0.14      2  2.000000
2      1   1.75   0.46      5  5.000000
3      0   0.38   0.90      1  0.760000
4      0   0.34   0.35      4  1.563333
5      0   0.22   0.63      3  1.283333
6     -1  -1.09   0.34      6 -1.090000 
```

# php - 从模态窗口使用 jquery 和 php 重命名文件

> ID：12750999
> 
> 赞同：3
> 
> 时间：2012-10-05T17:13:07.970
> 
> 标签：php, jquery

我正在尝试从模式窗口重命名文件。模式窗口运行良好，用于重命名文件的 php 代码也运行良好。我尝试了许多不同的方式来发送数据而不退出。

表单获取链接图像的值：名称、目录和不同的操作：删除、更新和调整大小。因此，当我单击链接时，它会打开带有这些值的模式窗口（我还注意到，每次单击其他图像链接时该值都是相同的）问题是没有发送任何值。我认为获取值存在问题：例如 val() 是一个 jQuery 方法。.value 是 DOM 元素的属性，我想知道如何解决这个问题。

html代码：

```
 <div id="dialogo" title="Editar Imagen">
<p class="validateTips">Campo titulo requerido.</p>
    <!--action="" method="post"-->
<form id="update" >
<fieldset>
    <label for="titulo">Titulo</label>
    <input type="text" name="titulo" id="titulo" class="text ui-widget-content ui-corner-all" />
    <label for="Alt">Alt</label>
    <input type="text" name="Alt" id="Alt"  class="text ui-widget-content ui-corner-all" />
    <label for="descripcion">Descripcion</label>
    <input type="text" name="descripcion" id="descripcion"  class="text ui-widget-content ui-corner-all" />
</fieldset>
</form>
   </div> 
```

ajax/jquery 代码：

```
 <script type="text/javascript">
     $(document).ready(function(){
     var fname=$('a.ico-resize').attr("id");
     var directory=$('a.ico-resize').attr("rel");
     var deletecount=$('a.ico-resize').attr("value");
     $('#titulo').val(fname);
     $('#Alt').val(directory);
     var descripcion = $("input#descripcion").val();
     var dataString = 'descripcion='+ descripcion + '&titulo=' + titulo + '&Alt=' + Alt;
     // var data_string = $("#update").serialize();

// Damos formato a la Ventana de Diálogo
var dialog = $("#dialogo").dialog({
    // Indica si la ventana se abre de forma automática
    autoOpen: false,
    // Indica si la ventana es modal
    modal: true,
    // Largo
    //width: 400,
    // Alto
    //height: 280,
    // Creamos los botones      
    height: 300,
    width: 350,
    buttons: {

        'Rename Image': function() {
            // Mostrar Versión de PHP
            $.ajax({
                // Antes de realizar la llamada mostramos el ajax load
                beforeSend: function(){
                    $('#respuestaAjax').html('<img id="loader" src="images/loading.gif"/>');
                },
                //cache: false, // Indicamos que no se guarde en cache
                type: 'post', // Variables GET
                url:'rename_img.php', // srcript a ejecutar
                 data: dataString,

                 //'titulo=titulo&descripcion=descripcion&Alt=Alt',

                 //$("form#update").serialize(),

                 //{"file":fname,"directory":directory, "descripcion":descripcion},  // paso de datos
                // cuando es exitoso el llamado
                    success: function(response){
                     $('#respuestaAjax').html(response);
                    $('#' + deletecount).remove();
                        dialog.dialog( "close" );
                }
            });
        },
        Cerrar: function() {
            // Cerrar ventana de diálogo
            dialog.dialog( "close" );
        }
    }
});

     $("a.ico-resize").click( function(e) {
         e.preventDefault();
         // dialog.dialog("open");
           dialog.dialog('open');
    // prevent the default action, e.g., following a link
    return false;
          });
          });

        </script> 
```

php代码：

```
 <?php 

     $dir = $_POST['Alt'];
     $file = $_POST['titulo'];
      $nuevo= $_POST['descripcion'];
     $img  = $dir."/".$file;
     $imagen =  $dir."/".$nuevo;

     //unlink ($img);
      rename($img, $imagen);
      echo $imagen;
      ?> 
```

* * *

### 解决了

最后一切都适用于这段代码：

```
 <script type="text/javascript">

         $(function(){
          var fname=$('a.ico-resize').attr("id");
          var directory=$('a.ico-resize').attr("rel");
          var deletecount=$('a.ico-resize').attr("value");
          $('#titulo').val(fname);
          $('#Alt').val(directory);
          var descripcion = $('#descripcion').val(); 
          var data_string = $("#update").serialize();
          var dialog = $("#dialogo").dialog({

        autoOpen: false,    
        modal: true,    
        height: 300,
        width: 350,
        buttons: {

            Send: function(){

            str = $("#update").serialize();

                $.ajax({

                    beforeSend: function(){
                        $('#respuestaAjax').html('<img id="loader" src="images/loading.gif"/>');
                    },
                    cache: false, 
                    type: 'POST', 
                    url:'rename_img.php', 
                    data: str,
                    contentType: "application/x-www-form-urlencoded", 
                    success: function(response){

                         $('#respuestaAjax').html(response);
                         $('#' + deletecount).remove();
                         dialog.dialog( "close" );
                    }
                });
                },
                Cerrar: function() {
                    dialog.dialog( "close" );
                }
            }
        });

            $("a.ico-resize").click( function(e) {

              var id = $(this).attr('data-id');
              var rel = $(this).attr('data-rel');
              var value = $(this).attr('data-value');
             $("#update").find("#titulo").val(id);
             $("#update").find("#Alt").val(rel);

            dialog.dialog('open');
        });
        });

        </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:04:02.050

就发送本身而言，代码看起来很好。我的意思是它可能确实发送了请求，它只是错误的查询。（您可以在萤火虫的控制台中检查请求是否真的发送）。

您需要更改的是构建数据字符串的位置。一旦页面加载（在`$(document).ready`函数中）就构建它，因此在您更改模式窗口中的值后它永远不会重建。

您应该将负责构建 dataString 的代码移至`a.ico-resize`.

我也看不到`titulo`and`Alt`变量的设置位置，正如您在 Firebug 中看到的那样，它们设置错误。

试试这个：

```
var dataString = 'descripcion='+ $('#descripcion').val() + '&titulo=' + $('#titulo').val() + '&Alt=' + $('#Alt').val(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:06:20.220

dataString 值应该是这样的 JavaScript 对象

```
{Key:value, key : value .....} 
```