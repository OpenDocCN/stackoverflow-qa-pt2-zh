# StackOverflow 问答 14202000-14202999

# vb.net - 为什么跨线程调用或调用方法时会创建 MainForm 的值副本？

> ID：14202002
> 
> 赞同：1
> 
> 时间：2013-01-07T18:39:49.787
> 
> 标签：vb.net, winforms, event-handling, com-interop, invokerequired

*更新：我认为这与 MainForm 的窗口句柄的延迟实例化有关 - 但无法弄清楚这将如何导致此处看到的行为。*

应用程序通过第 3 方 COM 接口请求数据，提供回调以处理结果。在回调中，需要更新 UI - 但更新没有按预期工作。就好像 MainForm 的值副本已创建，何时`MainForm.DataReady`直接跨线程调用或调用，但 UI 更新在从事件处理程序执行时按预期工作。你能解释一下为什么吗？

*（注意：`AppDomain.CurrentDomain.Id`总是`1`在 MainForm 或 ClassB 中检查。）*

**初始代码**- 从 ClassB 实例调用 DataReady，而 MainForm 中没有 InvokeRequred /Delegate /Invoke 逻辑。应用程序 UI 更改按预期工作，MainForm`SomeListControl.EmptyListMsg = "Not Available"`更改不会“坚持”（就像应用于 MainForm 的单独副本一样）

```
 Module AppGlobals
  Public WithEvents A As ClassA
End Module

Partial Friend Class MyApplication
  Private Sub MyApplication_Startup(ByVal sender As Object,
                                          ByVal e As StartupEventArgs) Handles Me.Startup
    A = New ClassA()

  End Sub
End Class

Class MainForm

  private sub getData
    ToggleWait(True)
    SomeListControl.Clear()
    A.getData() 'Sets up the com object & callback
  end sub

  Public Sub DataReady()
    ToggleWait(False)
    ' Do something with the data
  End Sub

  Private Sub ToggleWait(toggle as Boolean)
    Application.UseWaitCursor = False
    if toggle then
      SomeListControl.EmptyListMsg = "Not Available"
    else
      SomeListControl.EmptyListMsg = "Please Wait"
    end if
  End Sub

End Class

Class ClassA

  public sub getData()
     Dim ComObj as New ComObject
     Call ComObj.setClient(New ClassB)
  End Sub

End Class

Class ClassB
  Implements IComObjectClient

  sub getdata_callback(results() as Object) handles IComObjectClient.getdata_callback
    ' Get the results
    MainForm.DataReady() 
  end sub

End Class 
```

**向 DataReady 添加了 InvokeRequred 逻辑，仍然直接从 ClassB 调用**。InvokeRequired 永远不会为真，应用程序 UI 更改按预期工作，MainForm`SomeListControl.EmptyListMsg = "Not Available"`更改不会“坚持”（就像应用于 MainForm 的单独副本一样）

```
 Class MainForm
    Public Delegate Sub DataReadyDelegate(ByVal toggle As Boolean)
    ...
    Public Sub DataReady()
        If InvokeRequired Then
            Invoke(New DataReadyDelegate()
        Else
          ToggleWait(False)
          ' Do something with the data
        End If
    End Sub
    ...
  End Class 
```

**`MainForm.DataReady`直接从 ClassB调用**得到异常：“在创建窗口句柄之前，不能对控件调用 Invoke 或 BeginInvoke。” 直到我强制创建窗口句柄。然后它与以前的行为相同，即 InvokeRequired 永远不会为真，应用程序 UI 更改按预期工作，MainForm`SomeListControl.EmptyListMsg = "Not Available"`更改不会“粘住”（就像应用于 MainForm 的单独副本一样）

```
 Class ClassB
  Implements IComObjectClient
  Public Delegate Sub DataReadDelegate()

  sub getdata_callback(results() as Object) handles IComObjectClient.getdata_callback
    ' Get the results 
    If Not MainForm.IsHandleCreated Then
      ' This call forces creation of the control's handle
      Dim handle As IntPtr = MainForm.Handle
    End If
    MainForm.Invoke(New DataReadyDelegate(AddressOf MainForm.DataReady))
  end sub

End Class 
```

**从事件处理程序执行**ClassA 和 ClassB 中定义的自定义“获取数据”事件。ClassA 监听 ClassB.got_data_event 并引发 ClassA.got_data_event，MainForm 监听 ClassA.got_data_event 并通过调用 DataReady() 来处理它。这有效 - InvokeRequired 为 true，Invoke 已执行，Application UI 和 MainForm UI 更改按预期工作。

```
 Class MainForm
    Public Delegate Sub DataReadyDelegate()
    ...
    Public Sub DataReady()
        If InvokeRequired Then
            Invoke(New DataReadyDelegate()
        Else
          ToggleWait(False)
          ' Do something with the data
        End If
    End Sub

    Public Sub _GotData_HandleEvent(ByVal resultMessage As String)
        DataReady()
    End Sub

    Private Sub MainForm_Load(sender As Object, e As EventArgs) Handles Me.Load
        ...
        ToggleWait(False)
        AddHandler A.GotData, AddressOf _GotData_HandleEvent
        ...
    End Sub
    ...
  End Class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T22:51:13.490

对比：

```
 A.getData() 
```

和：

```
 If Not MainForm.IsHandleCreated Then 
```

您在第一条语句中使用了正确的面向对象编程语法。A 是一个*对象*。Form.IsHandleCreated 属性是一个*实例*属性，它需要左侧的对象名称。但是，您使用了**类型名称**。MainForm 不是对象，它是代码中的一种类型。

这是可能的，这是一个非常讨厌的 VB.NET 功能。它的存在是为了帮助 VB6 程序员转向 VB.NET 编码，VB6 强烈建议使用表单的类型名称。在 VB4 实现任何类似对象之前从 VB1 继承的语法。

现在这肯定是一种方便。您可以通过简单地使用类型名称来引用另一个类中的表单对象。请注意您没有*使用*A 对象的便利。您通过将其设置为全局变量并将其存储在模块中来解决它。这也不会赢得任何价格，但确实允许您在任何课程中引用 A。

问题是，当您开始在另一个线程中使用假表单对象时，这种便利变得**致命。**你没想到的是这个对象有`<ThreadLocal>`范围。换句话说，当你在工作线程中使用它时，你会得到一个MainForm 类的*新*对象。这个表单对象是不可见的，你从来没有调用过它的 Show() 方法。并不是说这会起作用，线程不会泵送消息循环，因此表单不会正确地绘制自己。您观察到的另一个副作用是其 InvokeRequired 属性不起作用。它返回 False。没错，表单是在工作线程上创建的，因此您实际上不必使用 BeginInvoke()。并不是说这也行得通，它仍然是错误的对象，而不是用户正在查看的对象。

因此，一种 Q&D 解决方法是对表单对象执行与对 A 对象相同的操作，将其存储在全局变量中：

```
Module AppGlobals
  Public WithEvents A As ClassA
  Public MainWindow As MainForm
End Module 
```

并从类构造函数初始化它：

```
Class MainForm
    Sub New()
        InitializeComponent()
        MainWindow = Me
    End Sub
'' etc..
End Class 
```

现在你可以在你的类中引用 MainWindow。并且您会获得对用户正在查看的 MainForm 类的实际实例的引用。并从 MainWindow.InvokeRequired 中获取正确的返回值。

这将解决您的问题，但它仍然很丑陋且容易出错。正确的方法如下所示：

```
Public Class MainForm
    Private Shared MainWindow As MainForm

    Public Shared ReadOnly Property Instance() As MainForm
        Get
            '' Return a reference to the one-and-only instance of MainForm
            If MainWindow Is Nothing Then
                '' It doesn't exist yet so create an instance 
                '' Creating one on a worker thread will never work, so complain
                If System.Threading.Thread.CurrentThread.GetApartmentState() <> Threading.ApartmentState.STA Then
                    Throw New InvalidOperationException("Cannot create a window on a worker thread")
                End If
                New MainForm()
            End If
            Return MainWindow
        End Get
    End Property

    Protected Overrides Sub OnFormClosed(ByVal e As System.Windows.Forms.FormClosedEventArgs)
        '' Ensure that the one-and-only instance is now Nothing since it closed
        MyBase.OnFormClosed(e)
        MainWindow = Nothing
    End Sub

    Sub New()
        '' Creating more than once instance of this form can't work, so complain
        If MainWindow IsNot Nothing Then Throw New InvalidOperationException("Cannot create more than one instance of the main window")
        InitializeComponent()
        '' We need to keep track of this instance since the Instance property returns it
        MainWindow = Me
    End Sub

    '' etc...
End Class 
```

现在您可以在类中的任何位置使用 MainForm.Instance，例如 MainForm.Instance.InvokeRequired。当您遇到异常时会提醒您。

# javascript - Json 显示为 HTML 文本 - 不是原始格式

> ID：14202007
> 
> 赞同：0
> 
> 时间：2013-01-07T18:40:17.177
> 
> 标签：javascript, json, dojo

我目前正在尝试转换我必须在我的页面中显示为 html 文本的 json 数据，但是当它出现时它是 json 格式。因此，我想知道是否可以消除所有括号等并具有平面 html 段落。

```
require(["dojo"], function (dojo){

dojo.ready(function(){
// Look up the node we'll stick the text under.
var targetNode = dojo.byId("licenseContainer");  

// The parameters to pass to xhrGet, the url, how to handle it, and the callbacks.
var xhrArgs = {
url: "",
handleAs: "text",
timeout : 2000,

load: function(data){
  // Replace newlines with nice HTML tags.
  data = data.replace(/\n/g, "<br>");

  // Replace tabs with spaces.
  data = data.replace(/\t/g, "&nbsp;&nbsp;&nbsp;");

  targetNode.innerHTML = data;
},
error: function(error){
  targetNode.innerHTML = "An unexpected error occurred: " + error;
}
}

 // Call the asynchronous xhrGet
 var deferred = dojo.xhrGet(xhrArgs);
});

}); 
```

目前 json 在我的页面上显示如下：

```
[{"Relevance":"Low","Name":"Clinton","id":1,,"Paragraph":Appointed secretary of state at the start of Mr Obama's first term, in January 2009, Mrs Clinton's health has been under intense scrutiny because she is considered a strong candidate for the Democratic nomination for president should she decide to run in 2016.}] 
```

我是否能够过滤或仅指定“段落”中的数据以显示在 html 中？

任何建议或帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:56:13.610

您已将 handleAs 属性指定为“文本”，这意味着您的响应将只是纯文本。这将使从响应中解析出您想要的特定信息变得困难。将 handleAs 更改为 json，以便您从服务器检索的信息随后转换为 javascript 对象。

```
handleAs:'json' 
```

此时，您可以调用 data['Paragraph'] 或 data.Paragraph。如果您想获取其他键/值对的值，这同样适用。如果你想要 Relevance，你只需调用

```
alert(data.Relevance); 
```

编辑：另一件事，你的 json 看起来格式不正确，如果你有 handleAs:'json' 会导致错误。它应该看起来像这样

```
{"Relevance":"Low","Name":"Clinton","id":1,"Paragraph":"Appointed secretary of state at the start of Mr Obama's first term, in January 2009, Mrs Clinton's health has been under intense scrutiny because she is considered a strong candidate for the Democratic nomination for president should she decide to run in 2016."} 
```

# r - 使用 for 和 if 添加基于数据框中其他列的列值

> ID：14202008
> 
> 赞同：15
> 
> 时间：2013-01-07T18:40:18.307
> 
> 标签：r, if-statement, for-loop

我有一个这样的数据框：

```
 id        adit     diag1   diag2       
      2       3         4230    2234        
      3       5         3345    4456        
      4       6         4567    4467 
```

我想添加其他 2 列，`dse1`并`dse2`使用下面的伪代码：

```
if diag1 contains 4230 then dse1 = 1 else dse1 = 0

if diag2 contains 4567 then dse2 =1  else dse2 = 0 
```

我用这个：

```
for (i in 1 : nrow(dse)){
  for (j in 3: ncol(dse)){
     if dse[i,j] %in% ("4320"){dse$dse1 = 1}
        else{dse$dse1 = 0}
    if dse[i,j] %in% ("4567"){dse$dse2 = 1}
        else{dse$dse2 = 0} 
  }
} 
```

但这些都行不通。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-07T18:48:32.227

无需使用循环，只需使用`ifelse`，例如

```
dse = within(dse, {
    dse1 = ifelse(diag1 == 4230, 1, 0)
    dse2 = ifelse(diag2 == 4567, 1, 0)
 }) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-07T18:47:42.270

不要使用 if/else。进行矢量化，如下所示：

```
dat$dse1 <- as.numeric(dat$diag1 == 4230)
dat$dse2 <- as.numeric(dat$diag2 == 4567) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-07T18:50:41.123

像这样：

```
dse$dse1<-0
dse$dse2<-0
dse$dse1[dse$diag1==4230]<-1
dse$dse2[dse$diag2==4567]<-1 
```

请给自己一个好的 R 教程（例如[这个](http://cran.r-project.org/doc/manuals/R-intro.html)）并阅读所有关于索引向量的内容。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-07T18:49:05.403

您可以使用`transform`：

```
transform(dse, dse1 = as.numeric(diag1 == 4230),
               dse2 = as.numeric(diag2 == 4567)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-19T04:44:09.007

您还可以使用：

> 如果别的（）：

```
dat <- data.frame(id = c(2,3,4), adit = c(3,5,6),diag1 = c(4230,3345,4567), diag2 =            c(2234,4567,4467))
dat$dse1 <- ifelse(dat$diag1 == 4230,1,0)
dat$dse2 <- ifelse(dat$diag2 == 4567,1,0)
dat 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-15T15:50:09.800

使用的解决方案`tidyverse`：

```
x = data.frame(id = c(2, 3, 4), 
               adit=c(3, 5, 6), 
               diag1=c(4230, 3345, 4567), 
               diag2=c(2234, 4456, 4467))

x %>% mutate(dse1 = if_else(diag1 == 4230, 1, 0), 
             dse2 = if_else(diag2 == 4567, 1, 0)) 
```

# jquery - 使用 JQuery 切换手风琴

> ID：14202010
> 
> 赞同：1
> 
> 时间：2013-01-07T18:40:32.037
> 
> 标签：jquery, toggle, accordion

我有一个手风琴给我，它不会切换每个标签的打开和关闭。*它仅在选择另一个*标题时关闭选项卡，但我希望用户也能够在单击时关闭它。我不确定如何编辑此 Jquery 以允许这种情况发生。

```
jQuery("ul.gdl-accordion li").each(function(){
    jQuery(this).children(".accordion-content").css('height', function(){ 
        return jQuery(this).height(); 
    });
    if(jQuery(this).index() > 0){
        jQuery(this).children(".accordion-content").css('display','none');
    }else{
        jQuery(this).find(".accordion-head-image").addClass('active');
    }       

    jQuery(this).children(".accordion-head").bind("click", function(){
        jQuery(this).children().addClass(function(){
            if(jQuery(this).hasClass("active")) return "";
            return "active";
        });
        jQuery(this).siblings(".accordion-content").slideDown();
        jQuery(this).parent().siblings("li").children(".accordion-content").slideUp();          jQuery(this).parent().siblings("li").find(".active").removeClass("active");
    });
}); 
```

我假设它在`.click`函数中的某个地方，在那`if`句话中......但我不确定为什么。

我也不确定为什么将第一个选项卡默认为打开...有没有办法修改它？

[http://jsfiddle.net/FKAAM/](http://jsfiddle.net/FKAAM/)

任何意见是极大的赞赏。非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T18:45:10.393

使用 slideToggle() 代替：

```
jQuery(this).siblings(".accordion-content").slideDown();

jQuery(this).siblings(".accordion-content").slideToggle(); 
```

[http://jsfiddle.net/FKAAM/4/](http://jsfiddle.net/FKAAM/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-21T15:43:40.413

这是手风琴[链接](https://jsfiddle.net/commanderDoge/191qffeo/)和完整的 jQuery 代码：

```
jQuery(document).ready(function($){
  //you can now use $ as your jQuery object.
  $(".panel-heading").click(function() {
    $(this).parent().toggleClass('active').find('.panel-body').slideToggle('fast');
    $(".panel-heading").not(this).parent().removeClass('active').find('.panel-body').slideUp('fast');
  });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T18:44:19.147

添加：

```
collapsible: true 
```

到您的手风琴选项，然后用户将能够单击以关闭它。

（jQuery UI 手风琴：http: [//jqueryui.com/accordion/](http://jqueryui.com/accordion/)）

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-07T18:44:49.060

我会建议你使用 jQuery 手风琴

```
$(function() {
        $( "#accordion" ).accordion({
            collapsible: true
        });
    }); 
```

在此处查看[示例](http://jqueryui.com/accordion/#collapsible)。我想这就是你需要的。

# x86 - 是否有任何指令可以在 MMX 寄存器中添加所有字节？

> ID：14202013
> 
> 赞同：1
> 
> 时间：2013-01-07T18:40:36.190
> 
> 标签：x86, add, mmx

我需要计算 MMX 寄存器中的 4 个整数的总和。例如，我有这个 MMX 寄存器： ![在此处输入图像描述](../Images/016494effe9aa808b308d60b1d7fbc10.png) 我想得到这个结果（我不介意它是在同一个寄存器中还是在普通寄存器中）： ![在此处输入图像描述](../Images/7d225c50ced8e35c73a26e065a52307b.png)

我想知道是否有执行该操作的指令。我在 Windows 中使用 x86 程序集。我的第一个猜测是将 4`1`放入另一个 MMX 寄存器并调用`PMADDWD`，这样我最终得到 [X1+X2][X3+X4] 但我认为这很脏。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:44:49.643

`PMADDWD`实际上是一种很好的求和方式 - 即使您通过使用 1 的被乘数来“浪费”乘法运算，您也可以免费获得扩展（解包）操作，因此您从 a 中获得了相当多的价值单指令。

# linq - 使用 LINQ 获取不同的值

> ID：14202016
> 
> 赞同：2
> 
> 时间：2013-01-07T18:40:42.563
> 
> 标签：linq

我需要能够获得按 FileID 和 SentToID 分组的不同值

这就是我现在拥有的，它仅按 SentToID 分组，缺少一些记录。

```
var sentByResults = from v in ctx.vEmailSents
                                            where v.TypeDesc.Equals("Request")
                                             group v by v.SentTo_ID into g
                                            select g.OrderByDescending(x => x.DateSent).FirstOrDefault() into lastV
                                            select new
                                            {
                                                ClaimID = lastV.Claim_ID,
                                                SentToID= lastV.SentTo_ID,

                                            }; 
```

所以如果我有 5 条记录

```
claim id    fileid   sentToID
1            15         27
1            16         27
1            15         26
1            15         26
1            15         47 
```

现在我得到 3 条记录，每个唯一的 sentToID 一条，但我需要返回 4 条记录，每个唯一的文件 ID 中的每个唯一 ID

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T18:43:21.660

我怀疑你只是想按匿名类型分组：

```
group v by new { v.SentTo_ID, v.FileID } 
```

此外，鉴于您永远不会得到任何*空*组，您应该可以`First`使用`FirstOrDefault`.

# html - KineticJS 图层分层

> ID：14202018
> 
> 赞同：-1
> 
> 时间：2013-01-07T18:40:59.300
> 
> 标签：html, html5-canvas, layer, kineticjs

我有一个阶段和 4-5 层，每一层都有图像和形状。每次我在图层中添加一个对象时，该图层都会占用更大的 z-index 、 index 并位于其他图层的顶部。

.moveToTop .setZIndex 或其他功能不适用于图层。我使用最新版本 4.3.0 对其进行了测试。
如何定义图层的 z-index 并在每次添加/编辑对象时保持这种状态？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:44:59.057

首次创建图层时，您有：

```
layer1 = new Kinetic.Layer();
layer2 = new Kinetic.Layer(); 
```

然后将它们添加到舞台：

```
stage.add(layer1);
stage.add(layer2); 
```

这个添加到阶段最初定义了您的 z-index；

要更改索引，您必须执行 layer1.remove() 以将其从舞台上移除，然后再次添加以将其置于顶部。

# algorithm - 具体分组算法

> ID：14202023
> 
> 赞同：4
> 
> 时间：2013-01-07T18:41:19.827
> 
> 标签：algorithm, grouping

鉴于学生和导师的可用性，我正在编写一个程序来组建辅导小组。可用性在以字母表示的阻塞时间列表中给出。例如，如果学生将他的空闲时间指定为 [A, C, D]，则他在一天的第一、第三和第四个小时有空。你如何创建一个函数来获取学生列表和导师列表，并给出一个组列表，以最大化放置在一个组中的学生数量？我正在使用 Java，但我对算法比对代码本身更感兴趣。更多细节：

小组必须包含 3-6 名学生和 1 名导师。

学生只能在一个组中。

必须使满意的学生人数（放在一个组中）最大化。例如，假设我们有学生 1-6 和两个导师，在时间 A 和 B 都有可用。学生在 1:A、2:A、3:A、4:AB、5:AB、6 可用： B. 该算法应返回两组：[1, 2, 3,utor1] 和 [4, 5, 6,utor2]。这会将每个学生分配到某个小组，最好是说，将 1-5 人放在一个小组中，而将 6 人排除在外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:18:07.740

以下是帮助您入门的 3 个想法。

1.  贪心算法。将列表中的第一个学生与列表中的第一个兼容导师匹配。将列表中的第二个学生与列表中的第一个兼容导师匹配。等等

2.  找到最“流行”的可用时间，并首先匹配该时间。然后是下一个最受欢迎的，等等。

3.  找到最不“流行”的可用时间，并首先匹配该时间。然后是下一个最不受欢迎的，等等。

免责声明：我假设您正在从事与学习/爱好/管理便利相关的工作，换句话说，您的项目没有太多的钱。如果我的假设是错误的，我建议你需要更多地研究算法，或者聘请有专业知识的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T19:46:10.803

你可以把这个问题看成一个图问题：通过一组不相交的子图覆盖一个二分图，同时尊重两个分区（学生、组）并最大化一个分区的覆盖（学生）

我正在考虑这个启发式：

*   从一个空的解决方案开始
*   虽然有未分配的学生和开放（少于六个成员）组：
    *   按空闲位置的顺序对未分配的学生进行排序
    *   从列表顶部挑选六名学生（从顶部开始阅读列表，直到找到六名学生可以参加的小组）并将他们作为一个小组使用。
    *   如果您不能选择六个学生，请选择尽可能多的学生。
    *   如果你找不到三个学生组成一个小组，但你有两个：
        *   为该组找到第三个学生，该学生当前分配到您可以从（超过三个人）带走的组中，并使用他来填充该组。首选可以从未分配集中重新填充的组
        *   如果您找不到第三个人，请从不同的 3 人小组中选择一个。在该组中递归搜索他的替代者（或放弃）。您可以尝试同时从不同的三人组中移除。
    *   如果你只有一个学生，看看你是否可以让其他小组的另外两个人填补他的任何一个小组。如果需要，递归替换它们或放弃。
    *   如果您有一个学生的所有候选组都已满，请在这些组中的任何一个不能移动到未满组的人中寻找一个人。如果所有替换组都已满，则递归。
    *   如果您无法找到一种方法来调动人员以满足任何未分配的学生，请完成

请注意，这归结为：

快速找到满足大多数人的解决方案（您可以在这里停下来）。然后尝试通过找到一系列配对来插入学生：

*   在已使用和未使用的配对之间交替
*   从学生开始
*   在一堂课结束

请注意，这与在二分图中寻找交替路径是同构的，并且可以这样优化。

请注意，这可能仍然无法找到最佳解决方案，因为它永远不会替换单个组中的多个人来满足一个人。

上面的伪代码指示在每一步都使用学生列表。相反，您可以跟踪对此列表的更改并在进行更新时更新排序顺序。

* * *

更新：我没有注意到你也想指派老师。

在这种情况下，您需要在将学生分配到组时将教师分配到组。这将阻止创建某些组，但是如果没有空闲的老师，您可以从不同的组中选择老师，如果您可以为该组分配不同的老师。同样，它只是在寻找一个交替图，这次是在教师组子图中——让学生四处移动以腾出教师似乎并不可行。

您现在要覆盖的整个图表具有三个分区：学生、教师、组。老师和学生不互动，所以有两层：学生-小组，小组-老师。这两个层是独立的，除非它们必须覆盖同一组组。

# java - 将 Spring Roo 与 JSF 2.0 + Primefaces 结合时的问题

> ID：14202027
> 
> 赞同：1
> 
> 时间：2013-01-07T18:41:36.717
> 
> 标签：java, spring, jsf, primefaces, spring-roo

我在 DZone 上找到[了这个很酷的帖子：](http://java.dzone.com/articles/jsf-20-spring-roo)

我想试一试。我一步一步地按照这个例子做的，它对我很有用。在不到 5 分钟的时间里，我描述了该 Web 应用程序并开始运行。

我决定创建自己的应用程序只是为了好玩。但它没有用，我不知道为什么会这样。我相信我以完全相同的方式做每一件事，但只是使用我自己的变量名。这是我所做的每一件事：

**1- 从我的 linux 终端，创建一个文件夹并导航到它**

```
mkdir whatsup
cd whatsup 
```

**2-我启动了 roo shell 开始工作（我的 ROO_HOME 配置正确）**

```
/roo.sh 
```

> * * *
> 
> ```
>  / __ \/ __ \/ __ \ 
>   / /_/ / / / / / / / 
>  / _, _/ /_/ / /_/ /  
> /_/ |_|\____/\____/    1.2.1.RELEASE [rev 6eae723]
> 
> Welcome to Spring Roo. For assistance press TAB or type "hint" then hit ENTER. 
> ```

**3-我创建了项目定义**

```
roo> project --topLevelPackage com.hack --projectName whats-up 
```

> ```
> Created ROOT/pom.xml
> Created SRC_MAIN_RESOURCES
> Created SRC_MAIN_RESOURCES/log4j.properties
> Created SPRING_CONFIG_ROOT
> Created SPRING_CONFIG_ROOT/applicationContext.xml 
> ```

**4-我启用了持久层**

```
roo> persistence setup --provider HIBERNATE --database HYPERSONIC_IN_MEMORY 
```

> 创建 SPRING_CONFIG_ROOT/database.properties 更新 SPRING_CONFIG_ROOT/applicationContext.xml 创建 SRC_MAIN_RESOURCES/META-INF/persistence.xml 更新 ROOT/pom.xml [添加依赖 org.hsqldb:hsqldb:1.8.0.10, org.hibernate:hibernate-core:3.6 .9.Final, org.hibernate:hibernate-entitymanager:3.6.9.Final, org.hibernate.javax.persistence:hibernate-jpa-2.0-api:1.0.1.Final, org.hibernate:hibernate-validator:4.2 .0.Final, javax.validation:validation-api:1.0.0.GA, cglib:cglib-nodep:2.2.2, javax.transaction:jta:1.1, org.springframework:spring-jdbc:${spring.version }, org.springframework:spring-orm:${spring.version}, commons-pool:commons-pool:1.5.6, commons-dbcp:commons-dbcp:1.3]

**5-我创建了我的第一个实体**

```
roo> entity jpa --class ~.domain.Message 
```

> 创建 SRC_MAIN_JAVA/com/hack/domain 创建 SRC_MAIN_JAVA/com/hack/domain/Message.java 创建 SRC_MAIN_JAVA/com/hack/domain/Message_Roo_Configurable.aj 创建 SRC_MAIN_JAVA/com/hack/domain/Message_Roo_ToString.aj 创建 SRC_MAIN_JAVA/com/hack /domain/Message_Roo_Jpa_ActiveRecord.aj 创建了 SRC_MAIN_JAVA/com/hack/domain/Message_Roo_Jpa_Entity.aj

**6-我将字段添加到实体**

```
~.domain.Message roo> field number --fieldName votes --type java.lang.Integer --notNull 
```

> 更新了 SRC_MAIN_JAVA/com/hack/domain/Message.java 创建了 SRC_MAIN_JAVA/com/hack/domain/Message_Roo_JavaBean.aj

**7- 将 web 层包含到我的项目中**

```
~.domain.Message roo> web jsf setup --implementation APACHE_MYFACES --theme PEPPER_GRINDER 
```

> 创建 ROOT/src/main/webapp 创建 ROOT/src/main/webapp/index.html 创建 ROOT/src/main/webapp/viewExpired.xhtml 创建 ROOT/src/main/webapp/resources/images 创建 ROOT/src/main /webapp/resources/images/csv.png
> js 创建 ROOT/src/main/webapp/templates 创建 ROOT/src/main/webapp/templates/content.xhtml 创建 ROOT/src/main/webapp/templates/footer.xhtml 创建 ROOT/src/main/webapp/templates/ header.xhtml 创建 ROOT/src/main/webapp/templates/layout.xhtml 创建 ROOT/src/main/webapp/templates/menu.xhtml 创建 ROOT/src/main/webapp/pages 创建 ROOT/src/main/webapp/ pages/main.xhtml 更新 ROOT/pom.xml [添加依赖项 org.apache.myfaces.core:myfaces-api:2.1.5, org.apache.myfaces.core:myfaces-impl:2.1.5, org.primefaces: primefaces:3.1, org.primefaces.themes:south-street:1.0.3, org.springframework:spring-web:${spring.version}, javax.el:el-api:2.2, commons-fileupload:commons-fileupload ：1.2.2，commons-io：commons-io：2.1；添加了存储库 xhtml 创建 ROOT/src/main/webapp/templates/header.xhtml 创建 ROOT/src/main/webapp/templates/layout.xhtml 创建 ROOT/src/main/webapp/templates/menu.xhtml 创建 ROOT/src/main/ webapp/pages 创建 ROOT/src/main/webapp/pages/main.xhtml 更新 ROOT/pom.xml [添加依赖 org.apache.myfaces.core:myfaces-api:2.1.5, org.apache.myfaces.core: myfaces-impl:2.1.5, org.primefaces:primefaces:3.1, org.primefaces.themes:south-street:1.0.3, org.springframework:spring-web:${spring.version}, javax.el:el -api：2.2，commons-fileupload：commons-fileupload：1.2.2，commons-io：commons-io：2.1；添加了存储库 xhtml 创建 ROOT/src/main/webapp/templates/header.xhtml 创建 ROOT/src/main/webapp/templates/layout.xhtml 创建 ROOT/src/main/webapp/templates/menu.xhtml 创建 ROOT/src/main/ webapp/pages 创建 ROOT/src/main/webapp/pages/main.xhtml 更新 ROOT/pom.xml [添加依赖 org.apache.myfaces.core:myfaces-api:2.1.5, org.apache.myfaces.core: myfaces-impl:2.1.5, org.primefaces:primefaces:3.1, org.primefaces.themes:south-street:1.0.3, org.springframework:spring-web:${spring.version}, javax.el:el -api：2.2，commons-fileupload：commons-fileupload：1.2.2，commons-io：commons-io：2.1；添加了存储库 xhtml 更新 ROOT/pom.xml [添加依赖项 org.apache.myfaces.core:myfaces-api:2.1.5, org.apache.myfaces.core:myfaces-impl:2.1.5, org.primefaces:primefaces:3.1, org.primefaces.themes:south-street:1.0.3, org.springframework:spring-web:${spring.version}, javax.el:el-api:2.2, commons-fileupload:commons-fileupload:1.2.2 , commons-io:commons-io:2.1; 添加了存储库 xhtml 更新 ROOT/pom.xml [添加依赖项 org.apache.myfaces.core:myfaces-api:2.1.5, org.apache.myfaces.core:myfaces-impl:2.1.5, org.primefaces:primefaces:3.1, org.primefaces.themes:south-street:1.0.3, org.springframework:spring-web:${spring.version}, javax.el:el-api:2.2, commons-fileupload:commons-fileupload:1.2.2 , commons-io:commons-io:2.1; 添加了存储库 [http://repository.primefaces.org](http://repository.primefaces.org)；添加依赖 org.primefaces.themes:pepper-grinder:1.0.3; 将项目类型更新为战争] 创建 SRC_MAIN_WEBAPP/WEB-INF 创建 SRC_MAIN_WEBAPP/WEB-INF/web.xml

**8-我执行了一个包**

```
~.domain.Message roo> web jsf all --package ~.jsf 
```

> 创建 ROOT/src/main/resources/com/hack/jsf/i18n 创建 ROOT/src/main/resources/com/hack/jsf/i18n/messages_de.properties 创建 ROOT/src/main/resources/com/hack/jsf /i18n/messages_en.properties 创建 ROOT/src/main/resources/com/hack/jsf/i18n/messages_es.properties 创建 SRC_MAIN_JAVA/com/hack/jsf 创建 SRC_MAIN_JAVA/com/hack/jsf/MessageBean.java 创建 SRC_MAIN_JAVA/com /hack/jsf/converter 创建 SRC_MAIN_JAVA/com/hack/jsf/converter/MessageConverter.java 创建 SRC_MAIN_WEBAPP/WEB-INF/faces-config.xml 创建 SRC_MAIN_JAVA/com/hack/jsf/ApplicationBean.java 创建 SRC_MAIN_JAVA/com/hack /jsf/util 创建了 SRC_MAIN_JAVA/com/hack/jsf/util/LocaleBean.java 创建了 SRC_MAIN_JAVA/com/hack/jsf/util/ViewExpiredExceptionExceptionHandlerFactory。java Created SRC_MAIN_JAVA/com/hack/jsf/util/ViewExpiredExceptionExceptionHandler.java Created SRC_MAIN_WEBAPP/pages/message.xhtml Created SRC_MAIN_JAVA/com/hack/jsf/ApplicationBean_Roo_ApplicationBean.aj Created SRC_MAIN_JAVA/com/hack/jsf/ApplicationBean_Roo_Configurable.aj Created SRC_MAIN_JAVA/ com/hack/jsf/converter/MessageConverter_Roo_Converter.aj 创建 SRC_MAIN_JAVA/com/hack/jsf/converter/MessageConverter_Roo_Configurable.aj 创建 SRC_MAIN_JAVA/com/hack/jsf/MessageBean_Roo_Serializable.aj 创建 SRC_MAIN_JAVA/com/hack/jsf/MessageBean_Roo_Configurable.aj 创建SRC_MAIN_JAVA/com/hack/jsf/MessageBean_Roo_ManagedBean.ajaj 创建了 SRC_MAIN_JAVA/com/hack/jsf/converter/MessageConverter_Roo_Converter.aj 创建了 SRC_MAIN_JAVA/com/hack/jsf/converter/MessageConverter_Roo_Configurable.aj 创建了 SRC_MAIN_JAVA/com/hack/jsf/MessageBean_Roo_Serializable.aj 创建了 SRC_MAIN_JAVA/com/hack/jsf/ MessageBean_Roo_Configurable.aj 创建了 SRC_MAIN_JAVA/com/hack/jsf/MessageBean_Roo_ManagedBean.ajaj 创建了 SRC_MAIN_JAVA/com/hack/jsf/converter/MessageConverter_Roo_Converter.aj 创建了 SRC_MAIN_JAVA/com/hack/jsf/converter/MessageConverter_Roo_Configurable.aj 创建了 SRC_MAIN_JAVA/com/hack/jsf/MessageBean_Roo_Serializable.aj 创建了 SRC_MAIN_JAVA/com/hack/jsf/ MessageBean_Roo_Configurable.aj 创建了 SRC_MAIN_JAVA/com/hack/jsf/MessageBean_Roo_ManagedBean.aj

**9- 退出 roo shell**

```
~.jsf roo> quit 
```

**10-在 linux 终端，从项目内部，我确实运行了教程中建议的命令以在 tomcat 7 中执行**

```
~/hackday/whatsup$ mvn package org.codehaus.cargo:cargo-maven2-plugin:run -Dcargo.maven.containerId=tomcat7x -Dcargo.maven.containerUrl=http://archive.apache.org/dist/tomcat/tomcat-7/v7.0.22/bin/apache-tomcat-7.0.22.zip 
```

这是尝试运行时的输出：

> [INFO] 正在扫描项目... [INFO]
> [INFO] ------------------------------------ ------------------------------------- [INFO] 构建最新版本 0.1.0.BUILD-快照 [信息] ---------------------------------------------------------- -------------------------- 下载： [http://xxx.xx.xx.xx:8081/nexus/content/groups/public/ org/primefaces/themes/pepper-grinder/1.0.3/pepper-grinder-1.0.3.pom](http://xxx.xx.xx.xx:8081/nexus/content/groups/public/org/primefaces/themes/pepper-grinder/1.0.3/pepper-grinder-1.0.3.pom) 下载： [http ://maven.springframework.org/release/org/primefaces/themes/pepper-grinder/1.0.3 /pepper-grinder-1.0.3.pom](http://maven.springframework.org/release/org/primefaces/themes/pepper-grinder/1.0.3/pepper-grinder-1.0.3.pom) 下载： [http](http://maven.springframework.org/milestone/org/primefaces/themes/pepper-grinder/1.0.3/pepper-grinder-1.0.3.pom) ://maven.springframework.org/milestone/org/primefaces/themes/pepper-grinder/1.0.3/pepper-grinder-1.0.3.pom 下载 ： [http://spring-roo-repository.springsource.org/release/org/primefaces/themes/pepper-grinder/1.0.3/pepper-grinder-1.0.3.pom](http://spring-roo-repository.springsource.org/release/org/primefaces/themes/pepper-grinder/1.0.3/pepper-grinder-1.0.3.pom) 下载： [http ://repository.primefaces.org /org/primefaces/themes/pepper-grinder/1.0.3/pepper-grinder-1.0.3.pom](http://repository.primefaces.org/org/primefaces/themes/pepper-grinder/1.0.3/pepper-grinder-1.0.3.pom) 下载： [http ://repository.primefaces.org/org/primefaces/themes/pepper-grinder/1.0.3/ pepper-grinder-1.0.3.pom](http://repository.primefaces.org/org/primefaces/themes/pepper-grinder/1.0.3/pepper-grinder-1.0.3.pom) (636 B at 3.3 KB/sec) 下载： [http://xxx.xx.xx.xx:8081/nexus/content/groups/public/org/primefaces/themes/pepper- grinder/1.0.3/pepper-grinder-1.0.3.jar](http://xxx.xx.xx.xx:8081/nexus/content/groups/public/org/primefaces/themes/pepper-grinder/1.0.3/pepper-grinder-1.0.3.jar) 下载： [http ://maven.springframework.org/release/org/primefaces/themes/pepper-grinder/1.0.3/pepper-grinder-1.0.3 .jar](http://maven.springframework.org/release/org/primefaces/themes/pepper-grinder/1.0.3/pepper-grinder-1.0.3.jar) 下载： [http://maven.springframework.org/milestone/org/primefaces/themes/pepper-grinder/1.0.3/pepper-grinder-1.0.3.jar](http://maven.springframework.org/milestone/org/primefaces/themes/pepper-grinder/1.0.3/pepper-grinder-1.0.3.jar) 下载： [http ://spring-roo-repository.springsource.org /release/org/primefaces/themes/pepper-grinder/1.0.3/pepper-grinder-1.0.3.jar](http://spring-roo-repository.springsource.org/release/org/primefaces/themes/pepper-grinder/1.0.3/pepper-grinder-1.0.3.jar) 下载： [http://repository.primefaces.org/org/primefaces/themes/pepper-grinder/1.0。 3/pepper-grinder-1.0.3.jar](http://repository.primefaces.org/org/primefaces/themes/pepper-grinder/1.0.3/pepper-grinder-1.0.3.jar) 下载： [http ://repository.primefaces.org/org/primefaces/themes/pepper-grinder/1.0.3/pepper-grinder-1.0.3.jar](http://repository.primefaces.org/org/primefaces/themes/pepper-grinder/1.0.3/pepper-grinder-1.0.3.jar) 在项目最新情况下编译（默认）：编译器错误：allMessages = Message.findAllMessages() 处的 [ERROR] 错误；[错误] ^^^^^^ [错误] /home/cleanuser/hackday/whatsup/src/main/java/com/hack/jsf/MessageBean_Roo_ManagedBean.aj:72:0::0 方法 findAllMessages() 未定义对于 message = new Message() 处的 Message [ERROR] 类型错误；[错误] [错误] /home/cleanuser/hackday/whatsup/src/main/java/com/hack/jsf/MessageBean_Roo_ManagedBean.aj:198:0::0 类型不匹配：无法从消息转换为消息 [错误] 错误在消息 = 新消息（）；[错误] ^^^^ [错误] /home/cleanuser/hackday/whatsup/src/main/java/com/hack/jsf/MessageBean_Roo_ManagedBean.aj:226:0::0 类型不匹配：无法从消息转换为消息[错误] if (message.getId() 错误！= null) { [ERROR] [ERROR] /home/cleanuser/hackday/whatsup/src/main/java/com/hack/jsf/MessageBean_Roo_ManagedBean.aj:233:0::0 方法 getId() 未定义在 message.merge() 处键入字符串 [ERROR] 错误；[错误] [错误] /home/cleanuser/hackday/whatsup/src/main/java/com/hack/jsf/MessageBean_Roo_ManagedBean.aj:234:0::0 对于字符串类型未定义方法 merge() [错误] message.persist() 处的错误；[错误] [错误] /home/cleanuser/hackday/whatsup/src/main/java/com/hack/jsf/MessageBean_Roo_ManagedBean.aj:237:0::0 对于字符串类型未定义方法persist() [错误] -> [Help 1] [ERROR] [ERROR] 要查看错误的完整堆栈跟踪，请使用 -e 开关重新运行 Maven。[错误] 使用 -X 开关重新运行 Maven 以启用完整的调试日志记录。 [http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException](http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException)

我不知道如何使它工作。如您所见，我的步骤与 DZone 教程完全相同，我不知道有什么不同。有趣的是，他们的例子有效，但我的没有。

我也试过没有运气： `mvn clean install` 这会给我一个 BUILD SUCCESS 但不能让它在服务器上运行 `mvn tomcat:run` 与其他命令相同的结果

如果周围有人有与`Spring Roo`结合使用的经验`JSF`，我很感激一些帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:44:46.083

看起来好像“消息”与自动生成的代码使用的某些名称发生冲突。您会尝试使用“MyMessage”吗？

# php - 按字母和数字排序邮政编码 PHP

> ID：14202029
> 
> 赞同：-1
> 
> 时间：2013-01-07T18:41:43.273
> 
> 标签：php, sorting

在使用定制的 CMS 时，我遇到了一个问题，即我将多个邮政编码保存到与特定商店相关的数据库中。

我将它们加载到一个对象数组中

```
Array ( 
  [0] => PostalCodes Object ( 
    [ID] => 0fea73e60ef4e5809e1ec4900a1f6075
    [StoreID] => 7f0563d8e451d2342ca4b6a3b5402665
    [PostalCode] => L2E
  )
  [1] => PostalCodes Object (
    [ID] => 11e82b7f0e69dd3982352cf6b983ca9f
    [StoreID] => 7f0563d8e451d2342ca4b6a3b5402665
    [PostalCode] => L0R1S0
  )
) 
```

我的问题是，在将它们输出到每个循环之前，将它们按字母和数字混合排序的最有效方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:34:13.667

该函数称为[`usort()`](http://ca1.php.net/manual/en/function.usort.php)，您可以简单地[`strcmp()`](http://ca1.php.net/manual/en/function.strcmp.php)在邮政编码上使用。

```
function myCompare($a, $b) {
    return strcmp($a->PostalCode, $b->PostalCode)
}

usort($myarray, 'myCompare'); 
```

此外，在您未来的帖子中，请务必以更易于阅读的格式发布您的数据。很多人不会花时间阅读或重新格式化您最初发布的内容。

# google-apps-script - 我需要一个用于谷歌电子表格的脚本，它将部分单元格信息复制到一个新列中

> ID：14202035
> 
> 赞同：0
> 
> 时间：2013-01-07T18:42:13.147
> 
> 标签：google-apps-script, google-sheets

我有一个电子表格，在同一个单元格中包含以下所有信息。我需要一个将信息分开的脚本。

一个单元格中的当前格式

```
b1  o 29.26  d 18.53  
b2  o 27.54  d 14.60  
b3  o 25.57  d 10.96  
b4  o 24.37  d 11.48  
b5  o 23.34  d 0  
b6  o 0  d 0  
b7  o 0  d 0 
```

我需要`b1 o 2926 d 18.53`在自己的行和`b1`自己的列中，然后`29.26`在下一个中，然后是`18.53`.
我需要为每一行自动发生
任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-07T15:50:30.157

如果该文本块中的每个“行”都由换行符分隔，那么您可以将其分解为一个二维数组，如下所示：

```
// Block of info in 'data'
var dataRows = data.split('\n');
for (var row=0;row<dataRows.length;row++) {
  dataRows[row] = dataRows[row].split(' *');
}

sheet.getRange(1,1,dataRows.length,dataRows[0].length).setValues(dataRows); 
```

# arrays - 我是 PHP 新手，我的代码给出了通知

> ID：14202037
> 
> 赞同：-2
> 
> 时间：2013-01-07T18:42:33.470
> 
> 标签：arrays, php

```
$site=file_get_contents("$link");

$price='#<span class=price>(.*?)<\/span>#si';

preg_match_all($price,$site,$pricelist);

echo $pricelist[0]."<br>";

echo $pricelist[1]."<br>";

echo $pricelist[2]."<br>"; 
```

* * *

大家好，我是 PHP 新手。我正在尝试从另一个网站获取价目表。我试着写这段代码，它说“注意：数组到字符串的转换”。我怎样才能把这个价格列在清单上，比如：

```
<tr>
   <td><?php echo $pricelist[0] ?></td>
   <td><?php echo $pricelist[1] ?></td>
   <td><?php echo $pricelist[2] ?></td>
   <td><?php echo $pricelist[3] ?></td>
   <td><?php echo $pricelist[3] ?></td>
</tr> 
```

而且这段代码也有效：

```
<?php

$site=file_get_contents("$link");

$price='#<span class=price>(.*?)<\/span>#si';

preg_match_all($price,$site,$pricelist);

for ($a=0; $a<5; $a++){

echo $pricelist[1][$a].'<br>'; }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:45:29.943

我猜你想要这个——

```
$site=file_get_contents("$link");

$price='#<span class=price>(.*?)<\/span>#si';

preg_match_all($price,$site,$pricelist);

echo "<tr>";

for ($a=0; $a<5; $a++){

echo "<td>".$pricelist[1][$a].'</td>'; 
}
echo "</tr>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T18:46:07.743

`$pricelist[0]`（或任何索引）显然是一个数组。您发布的有效代码证实了这一点。因此，您需要确定要如何输出该数组。一个简单的解决方案是使用`print_r`

```
<tr>
   <td><?php print_r($pricelist[0]); ?></td>
   <td><?php print_r($pricelist[1]); ?></td>
   <td><?php print_r($pricelist[2]); ?></td>
   <td><?php print_r($pricelist[3]); ?></td>
   <td><?php print_r($pricelist[3]); ?></td>
</tr> 
```

# java - AWT-EventQueue-0” java.lang.ArrayIndexOutOfBoundsException：-1

> ID：14202044
> 
> 赞同：0
> 
> 时间：2013-01-07T18:42:43.903
> 
> 标签：java, swing, jdbc

> **可能重复：**
> [异常处理“AWT-EventQueue-0” java.lang.ArrayIndexOutOfBoundsException：-1](https://stackoverflow.com/questions/14201462/exception-handling-awt-eventqueue-0-java-lang-arrayindexoutofboundsexception)

我有以下错误：

```
线程“AWT-EventQueue-0”中的异常 java.lang.ArrayIndexOutOfBoundsException：-1
    在 java.util.Vector.elementData(Vector.java:730)
    在 java.util.Vector.elementAt(Vector.java:473)
    在 javax.swing.DefaultListModel.elementAt(DefaultListModel.java:266)
    在 bfpl.BFPL$1$2$17.actionPerformed(BFPL.java:1163)
    在 javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    在 javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    在 javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)

```

我的代码是：

```
 final JFrame f10=new JFrame("Match Result");
    f10.setVisible(true);
    f3.setVisible(false);
    f10.setSize(1000,1000);
    f10.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    final JPanel p10=new JPanel(new GridBagLayout());
    GridBagConstraints g10=new GridBagConstraints();
    g10.insets=new Insets(2,2,2,2);
    JLabel l53=new JLabel("Match No");
    JLabel l54=new JLabel("Team Win");
    JLabel l55=new JLabel("Team Lost");
    DefaultListModel dl6=new DefaultListModel();
    DefaultListModel dl7=new DefaultListModel();
    DefaultListModel dl8=new DefaultListModel();
    String f="SELECT Match_No,Team1,Team2 from Schedule";
    try{

        Connection con=DriverManager.getConnection("jdbc:mysql://127.0.0.1/BFPL","root","ilovepepsi");
        Statement s=con.createStatement();
        ResultSet rs=s.executeQuery(f);
        while(rs.next()){
            String z=rs.getString("Match_No");
            String z1=rs.getString("Team1");
            String z2=rs.getString("Team2");
            dl6.addElement(z);
            dl7.addElement(z1);
            dl8.addElement(z2);
        }
    }
    catch(SQLException ae){
        System.out.println("SQLException:"+ae.getMessage());
        System.out.println("SQLState:"+ae.getSQLState());
        System.out.println("VendorError:"+ae.getErrorCode());
        JOptionPane.showMessageDialog(p10,"Error in submitting data!");
    }
    JList li6=new JList(dl6);
    JList li7=new JList(dl7);
    JList li8=new JList(dl8);
    li6.setSelectionMode(ListSelectionModel.SINGLE_INTERVAL_SELECTION);
    li6.setVisibleRowCount(2);
    li7.setSelectionMode(ListSelectionModel.SINGLE_INTERVAL_SELECTION);
    li7.setVisibleRowCount(2);
    li8.setSelectionMode(ListSelectionModel.SINGLE_INTERVAL_SELECTION);
    li8.setVisibleRowCount(2);
    JButton b25=new JButton("Back");
    JButton b26=new JButton("Save");
    f10.add(p10);
    g10.gridx=0;
    g10.gridy=0;
    p10.add(l53,g10);
    g10.gridx=1;
    g10.gridy=0;
    p10.add(new JScrollPane(li6),g10);
    g10.gridx=0;
    g10.gridy=1;
    p10.add(l54,g10);
    g10.gridx=1;
    g10.gridy=1;
    p10.add(new JScrollPane(li7),g10);
    g10.gridx=0;
    g10.gridy=2;
    p10.add(l55,g10);
    g10.gridx=1;
    g10.gridy=2;
    p10.add(new JScrollPane(li8),g10);
    g10.gridx=0;
    g10.gridy=3;
    p10.add(b25,g10);
    g10.gridx=1;
    g10.gridy=3;
    p10.add(b26,g10);
    int a9=li6.getSelectedIndex();
    int a10=li7.getSelectedIndex();
    int a11=li8.getSelectedIndex();
    final String z=(String) dl6.elementAt(a9);
    final String z1=(String) dl7.elementAt(a10);
    final String z2=(String)dl8.elementAt(a11); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:45:22.327

您将 getSelectedIndex() 的结果传递给 elementAt()。如果在列表框中未选择任何内容，则该值将超出范围。

# performance - 为什么这个 PowerShell 代码（Invoke-WebRequest / getElementsByTagName）在我的机器上如此缓慢，而在其他机器上却没有？

> ID：14202054
> 
> 赞同：2
> 
> 时间：2013-01-07T18:43:01.210
> 
> 标签：performance, powershell, powershell-3.0

我在 PowerShell 中编写了一些屏幕抓取代码，并惊讶地发现解析几个 HTML 表格需要大约 30 秒。我把它剥离出来，试图找出所有时间都花在了哪里，它似乎在`getElementsByTagName`通话中。

我在下面包含了一个脚本，在我的家庭桌面、工作桌面和家庭平板上，每次迭代大约需要 1-2 秒（完整结果粘贴在下面）。但是，PowerShell 社区中的其他人报告的时间要短得多（每次迭代只有几毫秒）。

我正在努力寻找缩小问题范围的任何方法，而且 OS/PS/.NET/IE 版本似乎没有模式。

我目前正在运行它的桌面是全新的 Windows 8 安装，仅安装了 PS3 和 .NET 4.5（以及所有 Windows 更新补丁）。没有 Visual Studio。没有 PowerShell 配置文件。

```
$url = "http://www.icy-veins.com/restoration-shaman-wow-pve-healing-gear-loot-best-in-slot"
$response = (iwr $url).ParsedHtml

# Loop through the h2 tags
$response.body.getElementsByTagName("h2") | foreach {

    # Get the table that comes after the heading
    $slotTable = $_.nextSibling

    # Grab the rows from the table, skipping the first row (column headers)
    measure-command { $rows = $slotTable.getElementsByTagName("tr") | select -Skip 1 } | select TotalMilliseconds
} 
```

来自我的桌面的结果（工作 PC 和 slate 给出几乎相同的结果）：

```
TotalMilliseconds
-----------------
        1575.7633
        2371.5566
        1073.7552
        2307.8844
        1779.5518
        1063.9977
        1588.5112
        1372.4927
        1248.7245
        1718.3555
         3283.843
        2931.1616
        2557.8595
        1230.5093
         995.2934 
```

但是，[Google+ PowerShell 社区中的一些人报告了这样的结果](https://plus.google.com/communities/114336958783305019912)：

```
 TotalMilliseconds
 -----------------
           76.9098
          112.6745
           56.6522
          140.5845
           84.9599
           48.6669
           79.9283
           73.4511
           94.0683
           81.4443
           147.809
          139.2805
          111.4078
           56.3881
           41.3386 
```

我已经尝试过 PowerShell ISE 和标准控制台，没有区别。对于正在做的工作，这些时间似乎有点过时，从[Google+ 社区](https://plus.google.com/communities/114336958783305019912)的帖子来看，它可以走得更快！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-20T10:29:30.940

您是否尝试禁用进度？

```
$ProgressPreference = "SilentlyContinue" 
```

就我而言，这解决了严重的性能问题`Invoke-WebRequest`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-10T03:33:05.577

请参阅我的评论：[https ://connect.microsoft.com/PowerShell/feedback/details/778371/invoke-webrequest-getelementsbytagname-is-incredibly-slow-on-some-machines#tabs](https://connect.microsoft.com/PowerShell/feedback/details/778371/invoke-webrequest-getelementsbytagname-is-incredibly-slow-on-some-machines#tabs)

我在 64 位运行脚本时遇到了同样的缓慢，但是在 32 位模式下运行时，一切都非常快！

Lee Holmes 能够重现该问题，这是他的文章

“问题是他正在将 COM 对象通过管道传送到另一个 cmdlet——在本例中为 Select-Object。发生这种情况时，我们会尝试按属性名称绑定参数。枚举 COM 对象的属性名称非常慢——所以我们正在花费我们将 86% 的时间用于两个非常基本的 CLR API 调用：

(...) // 从 COM 类型中获取函数描述 typeinfo.GetFuncDesc(index, out pFuncDesc); (…) // 从 COM 函数描述中获取函数名 typeinfo.GetDocumentation(funcdesc.memid, out strName, out strDoc, out id, out strHelp); （……）

我们也许可以在这里用缓存做一些聪明的事情。

一种解决方法是不通过管道进入 Select-Object，而是使用语言功能：

```
# Grab the rows from the table, skipping the first row (column headers)
$allRows = @($slotTable.getElementsByTagName("tr"))
$rows = $allRows[1..$allRows.Count] 
```

"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T01:01:02.667

我在新的 Windows 8 系统上注意到了同样的现象。我有一个 104MB 的文件存储在远程 Web 服务器上，下载需要 2 到 5 分钟，具体取决于服务器负载、带宽等。通过 FF、IE10、Chrome、cURL 进行了尝试，甚至设置了一个测试 FTP 服务器并尝试了Windows FTP 命令。我一直得到相同的结果。

然而，同一个文件（这并不夸张）需要将近 3 HOURS 才能传输。

```
$file = 'C:\User\me\Desktop\file.mp4'
$site = 'http://my.site/file.mp4'
Invoke-WebRequest $site -Method Get -OutFile $file 
```

看起来很简单——站点不是 https，文件不是可执行文件或 Windows 可能认为“不安全”的任何东西，并且不需要身份验证。它只需要永远完成。

我认为我的 AV 的实时扫描可能是罪魁祸首，但禁用它并没有明显的区别。这里可能有一些内存分配在起作用吗？类似于如何将 -ReadCount 选项添加到 Get-Content 可以更快地获取大文件的内容？我找不到 Invoke-WebRequest 的任何此类选项。

# ruby-on-rails - 有没有办法判断 activerecord 查询是否达到其限制

> ID：14202056
> 
> 赞同：1
> 
> 时间：2013-01-07T18:43:05.980
> 
> 标签：ruby-on-rails, rails-activerecord

给出以下查询：

```
Cars.where(color: red).limit(5) 
```

有没有办法判断是否达到了限制。假设有 6 辆红车，是否需要单独查询才能统计红车总数？

基本上，我试图向用户发送一条消息，让他们知道由于达到允许的最大结果数，搜索受到限制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T18:52:06.653

将它组合到一个查询中的唯一方法是执行限制（6）。如果大小为 6，则删除最后一个元素并记录它们是更多的结果。

或者，单独查询 Cars.where(color: red).count。尽管这将执行单独的 SQL 查询，但计数查询有时对数据库来说非常快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T19:11:57.090

对您的问题的直接回答是，您无法在一次查询中获取此信息。您将必须运行两个查询：一个返回有限集，一个查找总数。

唯一不需要这样做的情况是当您查询结果的第一页（偏移量为 0）并且返回的结果数小于限制值时（例如，您将限制设置为 5 但得到 4 个结果背部）。

示例代码如下所示：

```
 limit = 5
    cars_scoped = Cars.where(color: red)
    cars = cars_scoped.limit(limit)
    cars_count = cars.length < limit ? cars.length : cars_scoped.count 
```

# javascript - Javascript -- "type" 在 IE8 中返回 null

> ID：14202059
> 
> 赞同：-2
> 
> 时间：2013-01-07T18:43:14.470
> 
> 标签：javascript, internet-explorer-8

IE8（不是 Firefox 或 Chrome）具有以下功能：

```
function getCachedSortType(parsers, i) {
    return (parsers) ? parsers[i].type : '';
} 
```

这是这样拉的：

```
for (i = 0; i < l; i++) {
                    c = sortList[i][0];
                    order = sortList[i][1];
                    // fallback to natural sort since it is more robust
                    s = /n/i.test(getCachedSortType(tc.parsers, c)) ? "Numeric" : "Text"; 
```

错误：“'type' 为空或不是对象”

使用此排序器的表格的每个单元格都会被填充。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:48:02.867

这意味着您的`parsers`对象不包括您`getCachedSortType`期望的项目（或`getCachedSortType`期望错误的东西！）。

您可能需要添加一些额外的防弹：

```
function getCachedSortType(parsers, i) {
    if (parsers && parsers[i] && parsers[i].type) {
        return parsers[i].type;
    } else {
        console.log(parsers);
        throw new Error('Bad parsers format!');
    }
} 
```

# android - Android GPS 坐标分散

> ID：14202062
> 
> 赞同：7
> 
> 时间：2013-01-07T18:43:32.053
> 
> 标签：android, geolocation, gps

我有下面的代码似乎工作正常：

> ```
>  // GPS Reader
>     // Criteria
>     Criteria criteria = new Criteria();
>     //criteria.setAccuracy(Criteria.ACCURACY_COARSE); // Used when we can't get a GPS Fix
>     criteria.setAccuracy(Criteria.ACCURACY_FINE); // Used when we can get a GPS Fix
> 
>     criteria.setAltitudeRequired(false);
>     criteria.setBearingRequired(false);
>     criteria.setCostAllowed(true);
>     criteria.setPowerRequirement(Criteria.POWER_LOW);
> 
>     LocationListener locationListener = new MyLocationListener();
>     LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
>     lm.requestLocationUpdates(lm.getBestProvider(criteria, true), 0, 0,
>             locationListener); 
> ```

然而，当我在谷歌地图上绘制我收集的数据时，GPS坐标在某些情况下非常分散，或者它会沿着我正在行走的路径前进，然后突然跳到一英里外的一个点然后回来。有没有什么办法解决这一问题？我猜是某种准确性检查？

**更新**：

基本上我的问题看起来像这样 - [GPS Jitter](https://1db48f04-a-62cb3a1a-s-sites.googlegroups.com/site/gpsbenchmark/the-mobile-app2/13-Results-edited.png?attachauth=ANoY7cqSdldGcP-XWENOxIIa79hluyRI9spiadiiHw9Kaqhe-apONhPdypQ_pDPprCXbeP37qWD32sBitMVXrPO6sn5-Al1XVpWSEkf_DRf4MJbKqg8rJsb_gXrN1joj6W2Gqecq8DAEbBpOpxxr-wCO9mE93pkI1wZ1pXjilBjl1PedPZS6BdI8ohuTwfR2i74N1ptO2iJ7GCiYPLedoSzYlUFFUMwivor-hdcv3lXnBrmjOWD9jP_mJeuNgyj8VNgXNbTqmcyC&attredirects=0)

**更新 2**：

我考虑过不要把这当作赏金，但我想我不妨完全了解这里发生的事情，看看我的方法是否过度杀戮。尽管我的精度为 3m 等，但我仍然遇到同样的问题，即我的坐标中有抖动。现在这可能是可用的卫星等。我不知道，但基本上我想了解如何所有这些其他应用程序，尤其是运动应用程序，是否能够在相同的情况下获得如此流畅的读数。

我在 Quora 上找到了这个[是否有任何正在运行的应用程序具有过滤 GPS 数据以获得更准确跟踪的功能？](http://www.quora.com/Mobile-Applications/Does-any-running-app-have-a-feature-of-filtering-GPS-data-to-get-more-accurate-tracking)不幸的是，它并没有深入了解我的问题，除非您可以根据需要使用卡尔曼滤波器，但肯定有不太复杂的方法，因为我怀疑大多数应用程序都在实现这一点。

无论如何，如果一位开发人员想分享他们正在做的一些伪代码，我们将不胜感激。我的意思是，如果我坚持使用卡尔曼，我会，但我确信必须有更容易实现的算法，并且希望学习这些以及如何实现它们，这很合适。

上下文：这是一个移动行人应用程序。

*相关的 SO 问题我试图从* [Create a smooth curve from a series of GPS coordinates](https://stackoverflow.com/questions/9367966/create-a-smooth-curve-from-a-series-of-gps-coordinates) [Smooth gps data](https://stackoverflow.com/questions/1134579/smooth-gps-data)中收集信息：这是一个好的开始，虽然我不确定我需要实现什么伪代码才能正确获得最小二乘拟合正常工作，这样我就有了一个样条 GPS 数据，然后我可以在谷歌地图之类的东西上查看它，以确认我做得正确。我认为问题在于，如果这是我正在处理的一般 X 和 Y 数据，而不是 GEO 坐标，我可以在 matlab 中写一些东西来测试它，然后继续。

**更新 3**

我收到的混乱 GPS 数据的图像 [https://www.dropbox.com/s/ilsf8snao2no65e/gpsdata2.png](https://www.dropbox.com/s/ilsf8snao2no65e/gpsdata2.png)

代码 [https://gist.github.com/4505688](https://gist.github.com/4505688)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T18:59:50.650

GPS 数据本身容易出错。即使您正确设置了所有 LocationManager（并且看起来确实如此），您也会在位置中看到偶尔的抖动。

**准确性**

需要注意的一件事是，GPS 精度只能让您估计接收到的 GPS 信号的计算效果。系统误差可以为您提供良好的准确度数（<10m），但仍代表较大的位置误差。这就是为什么即使您的准确度非常好，您也会看到抖动的原因。准确度测量可以很好地消除非常大的错误（>100m），但在较低的级别上，它只是给你一个计算收敛的指示。

**过滤**

过滤，就像很多事情一样，如果你做的越少越好。准确度过滤器应该能够消除大的错误，如果你最终得到一个好的阈值，你可能能够得到平滑的数据。

如果您对正在运行的应用程序的位置更改设置阈值，您也可能会获得一些好处。例如，跑步者只能随着时间的推移跑过一定的距离，通过设置上限（Usain Bolt Cutoff），您应该能够消除坏点。问题在于，如果您的第一点是错误，您最终会删除所有其他点。

**卡尔曼滤波器**

卡尔曼滤波器是一个很好的解决方案，我已经在我正在开发的导航应用程序上实现了它。结果非常合理，甚至可以在 GPS 故障或不可用的情况下进行有限的航位推算。不幸的是，我不能分享源代码，但如果你决定这样做，我可以给你一些指导。最好的结果来自 6 DoF 过滤器，您可以在其中计算加速度和速度并使用它来估计位置。这不是最简单的解决方案，但我们已经看到了很好的结果。

**最小二乘**

卡尔曼滤波器很棒，因为它可以实时用于过滤位置。它跟踪自己的状态，您不需要存储旧位置。但另一方面，如果您想对路线进行后处理，最小二乘拟合是一种最佳方式。（卡尔曼源自 LSQ 公式）。我没有做很多后期处理，但我怀疑我可以在上面挖掘一些旧教科书。然而，理论应该是相同的。

大多数 GPS 设备都非常好，从我所看到的所有测试中，我并不经常看到您在示例中看到的抖动。然而，我实施卡尔曼滤波器的一大优势和原因是您的行驶距离和速度计算更加准确

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T08:12:12.860

您得到的是因为您的标准将最佳提供商确定为`NETWORK_PROVIDER`. 它不会识别您的位置，而是为您提供覆盖您设备的手机信号塔的位置。因此，当您在任何建筑物之外时，最好使用它`GPS_PROVIDER`来获得精确的地理位置。为什么您会得到分散的坐标是因为您的设备进入了另一个蜂窝塔的范围，因此发生了位置跳跃。直接使用`GPS_PROVIDER`是您将获得的最佳解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T08:20:37.853

查看Reto Meier 的[这篇文章（包括代码）。](http://android-developers.blogspot.ru/2011/06/deep-dive-into-location.html)它应该给你很多信息来思考。您至少应该设置最小距离和时间参数。

```
lm.requestLocationUpdates(lm.getBestProvider(criteria, true), 5000, 20,
        locationListener); 
```

此外，您还可以组合多个提供商以获得目前可以得到的最佳坐标。祝你好运！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-17T01:21:10.660

一种简单的方法是丢弃任何旧的或不准确的数据，并保持经度和纬度的运行平均值。

```
private static final long WILDLY_OUT = 15;
private static final long TOO_OLD = 30000;
private static final long NO_SAMPLES = 5;

double lastLocationTime;

double calclongitude(Location location, double oldLongitude) {
    double newLongitude = oldLongitude;

    if (location.getAccuracy() < WILDLY_OUT) {
        newLongitude = (NO_SAMPLES * oldLongitude + location
                .getLongitude()) / (NO_SAMPLES + 1);
        lastLocationTime = System.currentTimeMillis();
    }

    if (lastLocationTime > TOO_OLD) {
        newLongitude = location.getLongitude();
    }

    return newLongitude;
} 
```

对纬度做同样的事情。

# linux - sftp 文件年龄：读取从 sftp 传输的尚未完成的文件

> ID：14202065
> 
> 赞同：0
> 
> 时间：2013-01-07T18:43:50.107
> 
> 标签：linux, sftp

我有一个通过 sftp 接收数据文件的 linux 服务器。这些文件包含立即导入应用程序以供使用的数据。另一个进程不断读取文件发送到的目录，以寻找要处理的新文件。

我遇到的问题是文件在完全传输之前被读取。有没有办法在文件传输之前隐藏文件？

我的一个想法是利用许多 sftp 客户端用来在文件完成之前重命名文件的 .filepart 概念。我无法控制客户端，那么有没有办法在服务器端做到这一点？

还是有其他方法可以通过权限或其他方式来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T20:07:42.310

我们已经解决了类似的问题，方法是在客户端读取文件的同一文件系统上创建一个目录，并使用 inotifywait。

您 sftp 到暂存目录并让 inotifywait 监视该暂存目录。

一旦 inotify 看到任何接收到的文件的“FILE_CLOSE”事件，您只需将文件“mv”到客户端读取的目录。

```
#!/bin/bash
inotifywait -m -e close --format "%f\n" /path/to/tmp | while read newfile
do
  mv /path/to/tmp/"$newfile" ~/real
done 
```

# css - 调整页面大小时 CSS wordpress 页脚小部件堆叠

> ID：14202068
> 
> 赞同：0
> 
> 时间：2013-01-07T18:44:00.503
> 
> 标签：css, wordpress, wordpress-theming

我正在使用 Wordpress，二十一岁儿童主题。

我有一个问题，当我调整页面大小时，我的所有 div 都移动了。在坚持不懈之后，我设法通过在我的 body html 标记周围添加一个包装来解决它。当页面调整大小时，这会阻止所有 div 移动。

```
#site-wrapper{margin: auto; margin: auto; width: 1000px;} 
```

但是，我添加了五个贯穿我的页脚的小部件区域

一 | 二 | 三 | 四 | 五

但是当页面被调整大小时，小部件区域堆叠在一起

一

二

三

四

五

其他一切都正确渲染。我尝试使用 { margin: auto; 在页脚周围添加一个包装器。边距：自动；宽度：1000px；}，这不起作用小部件仍然堆栈我也尝试相对/绝对定位到小部件项目本身，并且包装器没有成功。我认为这与

```
 float: left; 
```

在小部件项目上，但我看不到解决方法？希望有人可以指导我正确的方向！

在此先感谢，我下面的小部件项目的 CSS 如下

```
/* Footer Widget Areas */
#supplementary {
border-top: none;
width: 80%;
padding: 1.625em 7.6%;
overflow: hidden;
}

/* Three Footer Widget Areas */
#supplementary.two .widget-area {
float: left;
margin-right: 2.7%;
width: 17.78%;
}
#supplementary.two .widget-area + .widget-area {
margin-right: 0;
}

/* Three Footer Widget Areas */
#supplementary.three .widget-area {
float: left;
margin-right: 2.7%;
width: 22.18%;
}
#supplementary.three .widget-area + .widget-area + .widget-area {
margin-right: 0;
}

#supplementary.four .widget-area{
float: left;
margin-right: 3.7%;
width: 22.18%;
}

#supplementary.four .widget-area + .widget-area + .widget-area {
margin-right: 0;
}

#supplementary.five .widget-area{
float: left;
margin-right: 2.9%;
width: 16.7%;
}

#supplementary.five .widget-area + .widget-area + .widget-area + .widget-area +   .widget-area+ .widget-area{
margin-right: 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:30:55.670

我看到的第一件事就是这行代码

# 站点包装器{边距：自动；边距：自动；宽度：1000 像素；}

需要是

# 站点包装器{边距：0自动；宽度：1000 像素；}

接下来要尝试的是使用整数百分比，浏览器不喜欢分数，而是倾向于四舍五入...尝试将宽度调整为总和等于或小于 100 的整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T19:33:06.287

这不是错误。这是**设计使然**。WordPress 2011 是一个[响应](http://en.wikipedia.org/wiki/Responsive_web_design)式主题，旨在在任何尺寸的设备上看起来都不错。较小的设备没有空间在主要内容旁边呈现小部件，因此该主题以及大多数其他响应式主题将它们移动到小屏幕上的主要内容下方。

覆盖此功能似乎非常违反直觉。如果您真的不想要响应式设计（在当今时代，您应该想要一个），那么您可能应该选择不响应式的父主题。

# maven - 重用 Artifactory 的 maven repo

> ID：14202070
> 
> 赞同：0
> 
> 时间：2013-01-07T18:44:03.180
> 
> 标签：maven, artifactory

我试图弄清楚是否可以在运行 Artifactory 服务器的本地机器上*重用*Artifactory 的 maven repo。以下详细说明了我正在尝试做的事情。

我有一台运行 Artifactory 的服务器，我计划在同一台服务器上设置 Jenkins。如果可能的话，我希望服务器上只有一个 Maven 存储库。由于 Artifactory 已经在那里运行，我希望它正在维护某种 maven 存储库（我四处寻找但找不到它）。

目前，当 Jenkins 使用 Maven 构建 maven 项目时，它会将依赖的 jar 下载到服务器上的本地 maven repo（一个 .m2 文件夹）中。取而代之的是，是否可以将 maven 正在使用的 settings.xml 指向 Artifactory 下的某个本地文件夹，其中 artifactory 存储了所有 jar？基本上，我希望 maven 认为所有 jar 都已在本地 repo 中可用（由 artifactory 维护），因此它不必从 artifactory 下载所有 jar。

如果 maven 和 artifactory 可以共享同一个 repo 文件夹，这将是可能的。但是，如果 Artifactory 使用自己的结构来维护 maven 存储库（不同于 maven 的 .m2 文件夹的结构），这是不可能的。

我应该声明我对 Artifactory 的了解非常少，除了它是一个 Maven 存储库管理器这一事实。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:30:31.040

在这里回答我自己的问题，因为更多的研究表明这是不可能的。我在 SO 上发现了另一个问题：

> Artifactory 使用 Java Content Repository (JCR) 标准来存储工件。它是各种存储实现之上的抽象，包括文件系统、关系数据库等。无论如何，JCR 通过校验和管理存储（以减小大小和带宽），因此存储库不能在文件系统中直接浏览。默认实现是将二进制文件存储在文件系统中（在 $ARTIFACTORY_HOME/data/filestore 中，元数据在 Derby DB 中。

[Artifactory 如何管理存储库](https://stackoverflow.com/questions/9382510/how-artifactory-manages-repos)

Nexus 家伙的一篇博文也表明这是不可能的。 [对比 Nexus 和 Artifactory -> 对比 #2](http://www.sonatype.com/people/2009/01/contrasting-nexus-and-artifactory/)

# xml - MacroDef、属性和 xmltask

> ID：14202080
> 
> 赞同：1
> 
> 时间：2013-01-07T18:44:28.117
> 
> 标签：xml, ant, xml-parsing, xml-serialization, xmltask

```
 <target name="openAssetXMLFile">
   <for list="${LogOfCurrentAssetChanges}" delimiter="${line.separator}" param="paths">
     <sequential>
       <xmltask source="${basedir}@{paths}">
         <copy path="/x/id/text()" attrValue="true" property="type"/>
         <copy path="/x/attribute[9]/data/stringValue/text()" attrValue="true" property="uid"/> 
       </xmltask>
       <echo> ${type}</echo>
       <echo> ${basedir}@{paths}</echo>
       <echo> ${uid}</echo>
     </sequential>
   </for>       
 </target> 
```

我在这里相当无助，希望得到任何帮助。所以我有上面的构建文件片段，它使用顺序，它使用宏定义，所以一个字符串应该用@符号引用，而不是通常的$符号。

我有一个 logofcurrentassetchanges 文件，其中包含对一些 xml 文件的相对引用。现在我需要将它与当前目录连接以生成绝对引用名称。当我回显连接的字符串时，它是完美的——我的意思是，对于每个 for 循环迭代，它都会按预期打印一个不同的 xml 字符串。但是，当我在如上所示的 xmltask 中使用它时，它会为所有迭代使用第一个源吗？我是否需要刷新/清理或做一些事情来清除 xmltask 源属性的原始旧值？或者我能做些什么来解决这个问题。echo 语句的示例输出：

```
 [echo]  CSElement:1242615155986
 [echo]  /y/z/t/u/11/67/MFootsfgsgfser(e7e105ef-660f-4363-8018-638f87ba06be).main.xml
 [echo]  7d454a57-fe1a-48c1-994c-bbcbbf9f78e4
 [echo]  CSElement:1242615155986
 [echo]  /a/b/c/MORegistsfgsfgfsgerLogsfgshinLinsgsfgks.jsp.main.xml
 [echo]  7d454a57-fe1a-48c1-994c-bbcbbf9f78e4 
```

这里类型和 uid 不断重复，但打印时路径看起来正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:54:28.370

*（至少部分）*问题在于`xmltask`副本分配给 Ant 属性（名为`type`and `uid`）。Ant 属性 - 不像 ant-contrib`@`变量通常是不可变的，所以一旦你为它们设置了一个值，它们就不会改变。这就是你所看到的。

从 Ant 版本 1.8 开始，有一个任务被调用[`local`](http://ant.apache.org/manual/Tasks/local.html)，可用于将属性范围限定为当前“块”，以便您在每次`for`迭代中都有不同的值。它看起来像这样：

```
<sequential>
   <local name="type" />
   <local name="uid" />
   <xmltask source="${basedir}@{paths}">
   ... etc. 
```

# vim - vim 失去焦点时自动保存当前文件

> ID：14202082
> 
> 赞同：1
> 
> 时间：2013-01-07T18:44:44.147
> 
> 标签：vim

如何使vim在失去焦点时仅自动保存当前缓冲区，而不是此处描述的所有文件[http://vim.wikia.com/wiki/Auto_save_files_when_focus_is_lost](http://vim.wikia.com/wiki/Auto_save_files_when_focus_is_lost)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T19:27:14.170

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T18:46:22.760

而不是`:wa`（写所有），使用`:w`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-20T09:46:52.857

你也可以试试这个

```
set updatetime=1000
autocmd CursorHoldI * silent w 
```

把它放在你的 .vimrc 中

# winforms - 在 Visual Studio 2008 中运行时表单不显示更改

> ID：14202087
> 
> 赞同：0
> 
> 时间：2013-01-07T18:44:59.570
> 
> 标签：winforms, visual-studio-2008

我在 Visual Studio 中的 vb.net 程序中的表单没有显示我在运行应用程序时对它们所做的更改。他们之前一直在工作，但最终只是停下来，没有真正采取任何措施来阻止他们。我正在进行更改，例如更改背景颜色，添加按钮等控件，但它们仅显示在设计视图中，但在我运行程序时不显示。我试图清理和构建，但仍然显示同样的问题。有人可以告诉我为什么会发生这种情况以及如何实现修复吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:45:16.217

这可能是因为您将构建模式设置为“发布”。当您运行调试器时，它使用“调试”版本。将您的构建模式更改为“调试”，您应该会看到更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-19T11:23:25.233

从 \bin\Debug 中删除所有文件并再次构建应用程序。它应该可以正常工作。并确保您处于调试模式

# css - 风俗 图像/字符在中心

> ID：14202089
> 
> 赞同：11
> 
> 时间：2013-01-07T18:45:04.840
> 
> 标签：css, horizontal-line

我想重新创建这个水平规则：

![在此处输入图像描述](../Images/696ef7a814e33c49f4672e5389a8cf40.png)

我有双线，但我不确定如何在中心获得某种字符或图像。我想我也许可以使用:before 和:after，但我不知道在这种情况下如何使用它们。为了回答这个问题，让我们试着让中心角色成为一个角色。稍后我会弄清楚图像/图标。

想法？这是我的代码：

```
hr {
    display:block;
    height:1px;
    border:0;
    border-top:1px solid #444;
    border-bottom:1px solid #444;
    margin:25px 0px;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-09T05:23:51.143

这是我能够制作的屏幕截图。在[jsfiddle.net](http://jsfiddle.net/yLKNh/186/)上查看它的实际应用。

![CSS 截图](../Images/7ebd43c21cfa0a0afdf27354bd98aca6.png)

这是CSS：

```
body {
  background: #454545;
}

hr {
  font-family: Arial, sans-serif; /* choose the font you like */
  text-align: center; /* horizontal centering */
  line-height: 1px; /* vertical centering */
  height: 1px; /* gap between the lines */
  font-size: 1em; /* choose font size you like */
  border-width: 1px 0; /* top and bottom borders */
  border-style: solid;
  border-color: #676767;
  margin: 20px 10px; /* 20px space above/below, 10px left/right */
  overflow: visible;

  /* ensure 1px gap between borders */
  -webkit-box-sizing: content-box;
  -moz-box-sizing: content-box;
  -ms-box-sizing: content-box;
  -o-box-sizing: content-box;
  box-sizing: content-box;
}

hr:after {
  content: "§"; /* section sign */
  color: #999;
  display: inline; /* for vertical centering and background knockout */
  background-color: #454545; /* same as background color */
  padding: 0 0.5em; /* size of background color knockout */
}

/* opera doesn't render correctly. hide section sign */
x:-o-prefocus, hr:after {
  content: "";
} 
```

## 部分标志

要添加[部分符号](http://en.wikipedia.org/wiki/Section_sign)，您可以将[生成的内容](http://viget.com/inspire/css-generated-content)与`:before`或结合使用`:after`。剩下的棘手部分是水平居中、垂直居中和敲除边框。

## 水平居中

水平居中就像添加`text-align: center`并`hr`确保生成的内容一样简单`display: inline`。

## 垂直居中

垂直居中需要一点内联渲染的知识。一行文本占用的垂直空间由 决定`line-height`。即使`line-height`比渲染字符的大小小很多，字符仍然显示为全尺寸，但它占用的空间由`line-height`. 使用`line-height: 1px`达到垂直居中。

## 敲出边界

最后，我所知道的敲除部分标志后面的边框的唯一方法是用另一种颜色覆盖它们。在这种情况下，我们使用与文档其余部分相同的背景颜色，因此它似乎融入其中。设置适当的`background-color`，然后使用左右`padding`来控制节符号两侧的空间量。

## 边框之间的 1px 间隙

您还会注意到我正在设置`box-sizing: content-box`. 这是为了确保边框之间的间隙为1px。（另一种等效的设置是`box-sizing: border-box; height: 3px;`。）

## Opera 渲染错误

@cimmanon 指出了一些 Opera 渲染错误，所以我决定优雅地降级而不显示剖面符号。我认为只显示线条看起来仍然非常整洁和专业。如果你真的想让它在 Opera 中工作，你可以使用不同的标记，比如`<div class="hr"></div>`（当然更新 CSS 以匹配）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-10-21T05:44:19.560

当符号不是字体时，这是我认为最灵敏、最轻量和最现代的版本。

**片段**

```
hr.hr--logo {
  border-top: solid #000 1px;
  margin: 50px 0;
}
hr.hr--logo:after {
  content: url( 'logogram.svg' );
  /* Controls the position of the logo */
  left: 50%;
  position: absolute;
  transform: translateY(-50%) translateX(-50%);
  /* Controls the whitespace around the symbol */
  padding: 20px;
  background: #fff;
}
```

```
<hr class="hr--logo">
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T18:50:41.630

既然你已经有了一些 CSS，不妨给它一个背景图像和一个高度：

```
hr {
    ... your css ...
    background:url(path to your image) no-repeat center;
    height:15px;
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-07T18:47:06.957

这很愚蠢，但你可以尝试用不间断的空间制作两个半角 HR，以及它们之间的图像。

```
<hr><img><hr> 
```

标签之间没有间距或换行符。

# macos - 如何在没有 Mac 开发者计划帐户的情况下测试应用程序沙盒

> ID：14202091
> 
> 赞同：7
> 
> 时间：2013-01-07T18:45:04.980
> 
> 标签：macos, appstore-sandbox

我可以在没有 iOS 开发者计划帐户的情况下使用模拟器为 iOS 进行开发（我只是无法在设备上运行。）是否有等效的方式为 Mac 开发者计划的东西工作？在注册付费帐户之前，我想测试我的一些实用应用程序的沙盒兼容性（以及因此 App Store 分发）。如果我的应用程序不工作或至少不容易修复，那 99 美元就不值了。

我可以启用哪些项目设置来强制沙盒？我希望代码签名不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T18:52:58.267

查看[App Sandbox Design Guide](https://developer.apple.com/library/mac/#documentation/Security/Conceptual/AppSandboxDesignGuide/AppSandboxQuickStart/AppSandboxQuickStart.html#//apple_ref/doc/uid/TP40011183-CH2-SW3)，其中包含有关创建代码签名证书以测试您的应用程序的部分。您可以完全在 Keychain Access 中完成此操作，而无需付费的 Apple ID。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-14T22:39:47.250

您可以为代码签名创建自签名证书：

1.  打开钥匙串访问。
2.  选择 Keychain Access > Certificate Assistant > Create Certificate ...
3.  输入名称
4.  将“证书类型”设置为“代码签名”

然后，在 Xcode > Target > Build Settings > Code Signing 中，您应该会看到您的新证书显示在 Code Signing Identity 旁边的下拉列表中。

# c++ - VS2012中的c ++ 11线程/互斥锁实现-触发断言

> ID：14202094
> 
> 赞同：4
> 
> 时间：2013-01-07T18:45:13.063
> 
> 标签：c++, multithreading, c++11, visual-studio-2012, mutex

我想将我的代码从 boost-threads 移动到 std-threads。虽然我认为这应该很简单，但我遇到了奇怪的问题。下面的代码是一个使用 VS2012 触发断言“f:\dd\vctools\crt_bld\self_x86\crt\src\thr\mutex.c(131):unlock of unowned mutex”的最小示例。搜索这个会显示[较旧的错误报告](http://connect.microsoft.com/VisualStudio/feedback/details/688797)（我认为）应该已经修复。

```
int result = 0;
std::mutex m;
m.lock();
std::thread t1([&](){
    result = 42;
    m.unlock();
});
m.lock();
std::cout << result << std::endl;
t1.join(); 
```

有人可以向我解释为什么这不起作用吗？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-07T18:49:26.077

`m.unlock()`要求调用线程拥有互斥锁。您的代码不满足该要求（因为`unlock()`ing 线程从不调用`m.lock()`），因此程序的行为未定义。

# symfony - KnpPaginatorBundle：排序分页表（由搜索表单参数生成）

> ID：14202100
> 
> 赞同：0
> 
> 时间：2013-01-07T18:45:44.933
> 
> 标签：symfony

我正在为我的项目使用 KnpPaginatorBundle。这非常适合使用通用查询“SELECT * FROM User s”显示、分页和排序我的所有用户。

当我想对根据搜索表单的结果生成的分页表进行排序时，它不起作用，因此使用像这样的查询“SELECT * FROM User s WHERE name LIKE '%dan%'”，其中参数显然由表格填写。

现在，当我单击列标题时，它会尝试再次执行查询，但它告诉我参数为空，因为表单没有再次发布......

我怎样才能对这张表进行排序？

希望我解释得很好.. :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:48:32.200

只需设置表单方法即可**获取**。现在一切正常。

# ios - 使用 RESTKit 映射服务器错误

> ID：14202101
> 
> 赞同：1
> 
> 时间：2013-01-07T18:45:47.220
> 
> 标签：ios, restkit

我成功地使用 RESTKit 来访问 Web 服务。但是我无法将服务器错误（如 404、403 ...）映射到 RESTKit 的标准 RKErrorMessage 类。假设我从我的服务中获得以下 JSON 响应以及 403 状态代码：

```
{"errors":{"message":"Some error message"}} 
```

在我的 iOS 应用程序中，我尝试借助以下方法映射错误：

```
RKObjectMapping *errorMapping = [RKObjectMapping mappingForClass:[RKErrorMessage class
[errorMapping addPropertyMapping:[RKAttributeMapping
   attributeMappingFromKeyPath:@"message" toKeyPath:@"message"]];

statusCodes4xx = RKStatusCodeIndexSetForClass(RKStatusCodeClassClientError);

errorDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:notecardMapping 
                     pathPattern:nil keyPath:@"errors" statusCodes:statusCodes4xx]; 
```

但我得到的只是来自 RESTKit 的错误：

```
Failed mapping operation: No mappable values found for any of the attributes or relationship mappings 
```

我的错在哪里？例如，它只是描述符中的错误路径吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T22:38:41.410

您似乎在使用`notecardMapping`而不是`errorMapping`在您的响应描述符中。尝试这个：

```
RKObjectMapping *errorMapping = [RKObjectMapping mappingForClass:[RKErrorMessage class]];

[errorMapping addPropertyMapping:[RKAttributeMapping attributeMappingFromKeyPath:nil toKeyPath:@"errorMessage"]];

RKResponseDescriptor *errorDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:errorMapping
                                                                                pathPattern:nil
                                                                                    keyPath:@"errors.message"
                                                                                statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassClientError)];

[manager addResponseDescriptorsFromArray:@[errorDescriptor]]; 
```

# android - SetNextFocusDownId 行为不正确

> ID：14202107
> 
> 赞同：3
> 
> 时间：2013-01-07T18:46:16.367
> 
> 标签：android, focus, android-edittext, android-softkeyboard, next

我最近一直在为我的 Android 应用程序而苦苦挣扎。在我的应用程序中，我有一个 TableLayout，我在应用程序代码中动态填充，包括每个单元格中的 EditText，并且软键盘的“下一步”按钮行为不正确（在到达同一行中的其他单元格之前跳转到下一行）。所以我决定手动覆盖焦点更改，方法是为 EditTexts 分配 ID，然后使用 setNextFocusDownId 方法指向下一个 EditText。但这也不起作用。

我会说明情况。我的应用程序有一个包含三列的 TableLayout，这样：

```
EditText(1)      EditText(5)       EditText(10)
EditText(50)     EditText(100)     EditText(160)
EditText(500)    EditText(1000)    EditText(1600)
EditText(2500)   EditText(3000)    EditText(3500)
EditText(3800)   EditText(4000)    EditText(4500) 
```

其中括号内的数字是 EditText 的 ID。在填充此 TableLayout 时，我将 EditTexts 列表保存在名为 focusList 的 ArrayList 中，以便稍后分配 NextFocus Id。填充表格后，我调用此方法：

```
private void manageFocusList() {
    for (int i=0; i<focusList.size()-1; i++){
        focusList.get(i).setImeOptions(0x05);
        focusList.get(i).setNextFocusDownId(focusList.get(i+1).getId());
    }

    focusList.get(focusList.size()-1).setImeOptions(0x06);

} 
```

EditText 列表在 ArrayList 中正确排序，并且 EditTexts 之间的链接已成功完成。
为了测试这一点，我在按下软键盘上的 Next 按钮时放置了一些打印痕迹。这就是我得到的：

```
01-07 19:34:32.121: I/System.out(27287): My ID is: 1
01-07 19:34:32.121: I/System.out(27287): NextFocusDown: 5

01-07 19:34:32.521: I/System.out(27287): My ID is: 5
01-07 19:34:32.521: I/System.out(27287): NextFocusDown: 10

01-07 19:36:50.146: I/System.out(27287): My ID is: 10
01-07 19:36:50.146: I/System.out(27287): NextFocusDown: 50 
```

等等...

但是在应用程序中，它是这样跳转的：

```
1->5
5->50
50->100
100->160
160->1600
1600->1000
1000->500
500->2500 
```

从现在开始，它会继续做正确的事

```
2500->3000
3000->3500
3500->3800
3800->4000
4000->4500 
```

我在三星 Galaxy S3 和模拟器中都进行了测试，结果完全一样。
我希望你能帮帮我！
感谢您的时间！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T15:05:47.553

好的，经过一番研究，我终于找到了解决方案，但我不知道是什么导致了这种行为。

我必须使用 onEditorAction 事件侦听器手动请求下一个编辑文本的焦点。我必须更改的代码的唯一部分是 manageFocusList() 方法：

```
private void manageFocusList() {
    for (int i = 0; i < focusList.size() - 1; i++) {
        focusList.get(i).setImeOptions(5);
        final int nextId = focusList.get(i + 1).getId();
        focusList.get(i).setOnEditorActionListener(
                new OnEditorActionListener() {
                    @Override
                    public boolean onEditorAction(TextView v, int actionId,
                            KeyEvent event) {
                        if (actionId == EditorInfo.IME_ACTION_NEXT){
                            ((EditText) findViewById(nextId)).requestFocus();
                            return true;
                        }                               
                        return false;
                    }
                });
    }
    focusList.get(focusList.size() - 1).setImeOptions(6);
} 
```

# php - 将行按一列分组，仅在多行分组时创建更深的子数组

> ID：14202108
> 
> 赞同：1
> 
> 时间：2013-01-07T18:46:18.063
> 
> 标签：php, arrays, multidimensional-array, grouping, sub-array

我有一个像这样的多维数组：

```
Array
(
    [0] => Array
        (
            [id] => 1
            [email_id] => ok@gmail.com
            [password] => test
        )

    [1] => Array
        (
            [id] => 2
            [email_id] => check@gmail.com
            [password] => test
        )

    [2] => Array
        (
            [id] => 3
            [email_id] => an@gmail.com
            [password] => pass
        )

) 
```

在上面的数组中，`password`两个不同行的值是相同的。我需要合并具有重复值的数组以获得以下输出：

```
Array
(
     [0] => Array
            (
               [0] => Array
                (
                    [id] => 1
                    [email_id] => ok@gmail.com
                    [password] => test
                )

            [1] => Array
                (
                    [id] => 2
                    [email_id] => check@gmail.com
                    [password] => test
                )
            ) 
    [1] => Array
        (
            [id] => 3
            [email_id] => an@gmail.com
            [password] => pass
        )

) 
```

这个怎么做？我试过`array_merge()`&`foreach()`循环，但我无法得到这个输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:11:40.620

尝试，

```
$arr = array( array('id'=>1, 'email_id'=>'ok@gmail.com', 'password'=>'test'),
  array('id'=>2, 'email_id'=>'check@gmail.com', 'password'=>'test'), 
  array('id'=>3, 'email_id'=>'an@gmail.com', 'password'=>'pass'));

  $new_arr = array();
  foreach($arr as $k => $v) {
      if( is_array($arr[$k+1]) && $arr[$k]['password'] === $arr[$k + 1]['password'] )
          $new_arr[] = array($arr[$k], $arr[$k+1]);
      else if( in_array_recursive($arr[$k]['password'], $new_arr) === FALSE ) 
              $new_arr[] = $v;
  }

  function in_array_recursive( $val, $arr) {
      foreach( $arr as $v ) {
          foreach($v as $m) {
              if( in_array($val, $m ) )
                  return TRUE;      
          }
      }
      return FALSE;
  }

  print_r($new_arr); 
```

[演示](http://codepad.org/zAihKX6d)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-08-22T20:59:07.033

如果组中有多个条目，您只想在输出数组中创建更多深度。我个人不希望数据结构中出现这种可变性，因为将打印数据的代码将需要额外的麻烦来处理可能位于不同级别的关联数据行。

无论如何，这就是我如何用一个循环来做到这一点......

Foreach 循环代码：（[演示](https://3v4l.org/teeIa)）

```
$result = [];
foreach ($array as $row) {
    if (!isset($result[$row['password']])) {
        $result[$row['password']] = $row; // save shallow
    } else {
        if (isset($result[$row['password']]['id'])) {  // if not deep
            $result[$row['password']] = [$result[$row['password']]]; // make original deeper
        }
        $result[$row['password']][] = $row;  // save deep
    }
}
var_export(array_values($result));  // print without temporary keys 
```

功能代码：（[演示](https://3v4l.org/YJEMF)）

```
var_export(
    array_values(
        array_reduce(
            $array,
            function($result, $row) {
                if (!isset($result[$row['password']])) {
                    $result[$row['password']] = $row;
                } else {
                    if (isset($result[$row['password']]['id'])) {
                        $result[$row['password']] = [$result[$row['password']]];
                    }
                    $result[$row['password']][] = $row;
                }
                return $result;
            },
            []
        )
    )
); 
```

# jquery - 返回 HTML 类名的第一部分

> ID：14202109
> 
> 赞同：2
> 
> 时间：2013-01-07T18:46:18.787
> 
> 标签：jquery

我有许多表行，每个行都分配了几个类。其中一个类将是*IndexN*，其中*N*是从 0 到 5 左右的数字。

获取给定行的*N*值的最简单方法是什么。

我知道我可以使用`hasClass()`，但这需要为所有可能的*N*值调用它。我还假设我可以简单地获取`class`属性的值，但这也将包括其他类。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T19:04:04.847

```
$('tr[class*=index]').each(function(){
  var cn = /\bindex(\d+)\b/.exec($(this).attr('class'));
  console.log(cn[1]);
}); 
```

console.log 输出为 1、2、3、4

index[x] 不需要首先列出。它可以在类字符串中的任何位置

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T18:50:00.057

你可以做的是匹配`className`一个正则表达式。但它不是很优雅：

```
$("tr").each(function() {
  // surround with spaces so that each class name can be matched with spaces
  var match = / index(\d+) /g.exec(" " + this.className + " ");
  var index = match[1];
}); 
```

* * *

`className`是元素具有的以空格分隔的类字符串：

```
"foo"
"foo bar" 
```

通过用空间包围，它们变成：

```
" foo "
" foo bar " 
```

`" foo "`请注意，使用周围的空格，可以将每个类名与正确的结果进行匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T18:47:54.377

使用`*=`将匹配“包含”特定单词的

`$('tr[class*=index]')`

并检索数字（`[0]`如果索引是第一类！）：

```
var classIndex = this.className.split(' ')[0].split('index')[1]; 
```

[http://jsbin.com/awacet/1/edit](http://jsbin.com/awacet/1/edit)

**或者，如果您确定课程中除了那个之外没有其他数字，那么它真的很简单：**

```
 var classIndex = this.className.replace(/\D/g, '' ); 
```

如果你有例如：`<tr class="something index4 footer barbeque"></tr>`这将返回`4`

[http://jsbin.com/awacet/2/edit](http://jsbin.com/awacet/2/edit)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-07T18:51:37.377

```
$('.class-1')[0].className.indexOf('class-') !== -1 
```

# django - Django - 如何在表单验证中记住值并显示错误？

> ID：14202116
> 
> 赞同：1
> 
> 时间：2013-01-07T18:47:01.560
> 
> 标签：django, django-forms, django-validation

我不知道如何记住值并在表单验证中显示错误。

这是我的代码：

模板.html：

```
<form method="post" action="/submeter/anuncio/">{% csrf_token %}
    {{form_main.as_p}}
    {{form_bicyclead.as_p}}
    {{form_bicycleadcategory.as_p}}
    {{form_bicycleaditemkindandpropertyvalueform.as_p}}
    <input type="hidden" name="section" value="5" />
    <input type="submit">
</form> 
```

视图.py：

```
def submit_ad_view(request):
    if request.method == 'POST':      
        model_main = Main()
        model_main.section = Section.objects.get(pk=request.POST['section'])
        model_main.user = request.user

        model_bicyclead = BicycleAd()
        model_bicyclead.bicycleadtype = BicycleAdType.objects.get(pk=2)
        model_bicyclead.bicycleaditemkind = BicycleAdItemKind.objects.get(pk=4)
        model_bicyclead.bicycleadcondition = BicycleAdCondition.objects.get(pk=2)
        model_bicyclead.city = GeonamesLocal.objects.get(pk=4803854)

        form_main = MainForm(request.POST, instance = model_main)
        form_bicyclead = BicycleAdForm(request.POST, instance = model_bicyclead)
        form_bicycleadcategory = BicycleAdCategoryForm(request.POST)

        if form_main.is_valid() and form_bicyclead.is_valid() and form_bicycleadcategory.is_valid():
            main_f = form_main.save()

            bicyclead_f = form_bicyclead.save(commit=False)
            bicyclead_f.main = main_f
            bicyclead_f.save()

            bicycleadcategory_f = form_bicycleadcategory.save(commit=False, rel_obj=model_bicyclead)

            resultado = 'valid'
        else:
            resultado = 'n_valid'

        return render_to_response('app_p/submit_ad.html', {'form_main': form_main, 'form_bicyclead': form_bicyclead, 'form_bicycleadcategory': form_bicycleadcategory, 'form_bicycleaditemkindandpropertyvalueform': form_bicycleaditemkindandpropertyvalueform}, context_instance=RequestContext(request))
    else:
        form_main = MainForm()
        form_bicyclead = BicycleAdForm()
        form_bicycleadcategory = BicycleAdCategoryForm()
        form_bicycleaditemkindandpropertyvalueform = BicycleAdItemKindAndPropertyValueForm()

        return render_to_response('app_p/submit_ad.html', {'form_main': form_main, 'form_bicyclead': form_bicyclead, 'form_bicycleadcategory': form_bicycleadcategory, 'form_bicycleaditemkindandpropertyvalueform': form_bicycleaditemkindandpropertyvalueform}, context_instance=RequestContext(request)) 
```

关于这个模板有什么问题的一些线索，并认为没有得到错误并且不记得表单的值？

此致，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:52:07.487

我发现您的代码存在两个问题，首先是`if`您用于验证表单的问题，当第一个表单返回时`False`，其余的将不会被验证。

其次，当其中一个表单无效并且您没有向它们传递任何值时，您正在重新创建表单，因此它们最终为空且没有验证信息。

# asp.net - 使用 FindControl 从 VB.Net 代码隐藏文件中定位 ASP.Net DetailsView 中的控件不起作用

> ID：14202118
> 
> 赞同：0
> 
> 时间：2013-01-07T18:47:05.710
> 
> 标签：asp.net, vb.net, code-behind, detailsview, findcontrol

我希望 FindControl 从 VB.Net 代码隐藏文件中“查看”ASP.Net DetailsView 中的控件。它没有找到任何一个。

该页面的标记使用 MasterPage。

```
<%@ Page 
    Title="Attendance" 
    Language="vb" 
    AutoEventWireup="false" 
    MasterPageFile="~/Knowledge Academy.Master" 
    CodeBehind="Attendance.aspx.vb" 
    Inherits="Knowledge_Academy.Attendance" %>

<asp:Content 
    ID="ContentBody" 
    ContentPlaceHolderID="BodyPlaceholder" 
    runat="server"> 
```

目前，我们的 DetailsView 的属性如下所示：

```
<asp:DetailsView 
            ID="DetailsView" 
            runat="server" 
            AutoGenerateRows="False" 
            Height="50px" 
            Width="207px" 
            DataSourceID="SqlDataSourceDetails"
            DataKeyNames="ID"
            OnItemCommand="DetailsViewDetails_ItemCommand">

            <Fields> 
```

你能告诉我要包括哪些附加属性，这样这样的编码可以“看到”DetailsView 中的字段吗？

```
Protected Sub DetailsViewDetails_ItemCommand(sender As Object, e As System.Web.UI.WebControls.DetailsViewCommandEventArgs)

    Select Case e.CommandName

        Case "Add"

        Case "Edit"
            ButtonAddNewAttendance.Enabled = False

        Case "Delete"

        Case "Update"
            ButtonAddNewAttendance.Enabled = True

        Case "Insert"

        Case "New"

            Dim txtBox As TextBox
            txtBox = DetailsView.FindControl("TextBoxDateAttendanceTakenInsert")
            txtBox.Text = DateTime.Now

            Dim drpValue As DropDownList
            drpValue = DetailsView.FindControl("DropDownListClassInsert")
            drpValue.SelectedValue = 1
    End Select
End Sub 
```

目前 FindControl 在 DetailsView 中找不到任何字段并给出 Null 引用错误。

*   更新 *

ItemCommand 不是放置编码的正确位置。

我发现要让它工作，需要添加 OnDataBinding，如下所示，并确保代码隐藏文件中有一个处理程序，如下所示。

InsertItemTemplate 标记：

```
<InsertItemTemplate>
    <asp:DropDownList 
        ID="DropDownListClassInsert" 
        Runat="server"
        DataSourceID="SqlDataSourceClasses"
        DataTextField = "ClassName"
        DataValueField="ID"
        SelectedValue='<%# Bind("ClassID") %>'
        AppendDataBoundItems="True"
        ForeColor="Blue"
        OnDataBinding="DropDownListClassInsert_DataBinding">
    </asp:DropDownList>

    <asp:RequiredFieldValidator ID="RequiredFieldValidatorInsertClass" runat="server" ControlToValidate="DropDownListClassInsert" 
        ErrorMessage="Please select a Class here." Font-Bold="True" Font-Italic="True" ForeColor="Red" 
        SetFocusOnError="True" Display="Dynamic">
    </asp:RequiredFieldValidator>
</InsertItemTemplate> 
```

代码隐藏文件中的处理程序：

```
Protected Sub DropDownListClassInsert_DataBinding(sender As Object, e As EventArgs)

    Dim drpValue As DropDownList
    drpValue = DetailsView.FindControl("DropDownListClassInsert")
    drpValue.SelectedValue = intCurrentClassID
End Sub 
```

注意：intCurrentClassID 声明为：

```
Public Shared intCurrentClassID As Integer = Nothing 
```

后：

```
Public Class 
```

我希望这可以帮助其他有同样问题的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:25:13.637

我相信您想使用[Fields](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.detailsview.fields%28v=vs.100%29.aspx)属性而不是 FindControl。拥有[DataControlField](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datacontrolfield%28v=vs.100%29.aspx)后，您可以将其转换为适当的控件类型（即[CheckBoxField](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.checkboxfield%28v=vs.100%29.aspx)）。

# jquery - IE7 动态菜单和空白

> ID：14202122
> 
> 赞同：0
> 
> 时间：2013-01-07T18:47:26.323
> 
> 标签：jquery, css, internet-explorer-7

我正在开发一个将格式化的 HTML 转换为动态菜单的小脚本。这样做是为了允许表单编写者在不了解太多 JavaScript 的情况下创建动态菜单。这个想法是他们将只编写语义标记，而 javascript 代码将为他们制作菜单。

[你可以在这个小提琴](http://jsfiddle.net/fKCuw/2/)中看到演示。

基本上，它采用如下所示的 HTML：

```
<ul data-menu-horizontal="true" data-menu-width="500px">
   <li><a href="index.html">Home</a></li>
   <li><a href="index.html">Blog</a></li>
   <li><a href="index.html">News</a></li>
   <li><a href="index.html">Code</a></li>
   <li>
      <ul data-menu-horizontal="true" datamenu-header="Sub-Menu 1" data-menu-width="500px">
         <li><a href="index.html">Home</a></li>
         <li><a href="index.html">Computer Blog</a></li>
         <li><a href="index.html">More News</a></li>
      </ul>
   </li>     
   <li>
      <ul data-menu-vertical="true" data-menu-header="Sub-Menu 2" data-menu-width="500px">
         <li><a href="index.html">Home</a></li>
         <li><a href="index.html">Computer Blog</a></li>
         <li><a href="index.html">More News</a></li>
      </ul>
   </li>
</ul> 
```

...并将其转换为：

```
<ul id="13575820577141" class="menu-horizontal" style="width: 500px;">
   <li><a href="index.html">Home</a></li>
   <li><a href="index.html">Blog</a></li>
   <li><a href="index.html">News</a></li>
   <li><a href="index.html">Code</a></li>
   <li>
          <h2 class="menu-horizontal-header">Sub-Menu 1</h2>
      <ul id="13575820577142" class="menu-horizontal" style="display: none; position: absolute; width: 500px;">
         <li><a href="index.html">Home</a></li>
         <li><a href="index.html">Computer Blog</a></li>
         <li><a href="index.html">More News</a></li>
      </ul>
   </li>     
   <li>
      <h2 class="menu-vertical-header">Sub-Menu 2</h2>
      <ul id="13575820577143" class="menu-vertical" style="display: none; position: absolute; width: 500px;">
         <li><a href="index.html">Home</a></li>
         <li><a href="index.html">Computer Blog</a></li>
         <li><a href="index.html">More News</a></li>
      </ul>
   </li>
</ul> 
```

有 jQuery（从`makeMenus()`函数开始）将显示/隐藏功能分配给每个菜单和显示/隐藏相应子菜单的`ul`菜单标题（标记为）mouseover/mouseout。`h2`

显示/隐藏功能在我迄今为止测试过的所有浏览器中都非常有效。问题在于，在 IE7 中，“鼠标悬停”功能在遇到任何空白时都会中断，即使在`li`元素之间也是如此。我不想简单地删除所有额外的空格，因为需要一些空格来“美化”菜单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T01:59:42.460

哈……你永远猜不到问题出在哪里。我需要在“ul”元素上设置背景颜色。我猜 IE7 不会将透明背景视为元素框的一部分，至少就鼠标悬停而言。现在我不得不为我的菜单元素选择明确的背景颜色。多么拖沓！

感谢任何看过的人。希望这可以在未来对其他人有所帮助。

# javascript - 禁用 JS 提交验证检查

> ID：14202123
> 
> 赞同：0
> 
> 时间：2013-01-07T18:47:28.140
> 
> 标签：javascript, html, onsubmit

我真的不知道如何很好地解释这一点，所以我们开始吧。

我正在尝试在我的页面上实现 Stripe 付款按钮。单击提交按钮时，JS 验证用户输入。也就是说，我无权访问 JS 文件。

我正在尝试为用户添加选择天气以支票支付的能力（其中条纹表单元素消失，其他出现与支票支付有关）。问题是，当用户选择通过支票支付并单击提交时，运行条带表单的验证检查，它们最终失败并且提交操作被中止。

那么，当用户选择检查时，如何禁用 Stripe 操作？

预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:54:16.960

对于不同的付款方式，您应该有不同的表单，这样 Stripe 表单就不会认为它正在被提交。

无论如何，这是我对如何禁用侦听器的猜测：

```
$("#payment-form").unbind('submit'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T18:52:56.383

你有几个不同的选择。当用户选择通过支票付款时，一种方法是使用 javascript 中的事件处理程序。另一个选项（可能更简单）选项是有 2 个提交按钮，并根据用户打算如何支付来显示和隐藏它们。

# php - PHP - jpg/gif转png

> ID：14202124
> 
> 赞同：0
> 
> 时间：2013-01-07T18:47:32.190
> 
> 标签：php, image, png, gif, jpeg

我在摆弄 PHP，我已经做了很长时间了，我真的不明白我在这里做错了什么..

谁能帮我，告诉我为什么转换后的图像没有保存，而上传的文件保存得很好（顺便说一句，没有被删除）？

```
 $destination_path = getcwd().DIRECTORY_SEPARATOR."img".DIRECTORY_SEPARATOR."blog".DIRECTORY_SEPARATOR."uploads".DIRECTORY_SEPARATOR;
    $result = 0;

    $ext = pathinfo($_FILES['image']['name'], PATHINFO_EXTENSION); 
    $target_path = $destination_path . $this->input->post("postId") . ".";

    if(move_uploaded_file($_FILES['image']['tmp_name'], $target_path . $ext)) {
        switch ($ext) {
            case ".jpg": case ".jpeg":
                $image = imagecreatefromjpeg($target_path . $ext);
                imagepng($image, $target_path . "png");
                imagedestroy($image);
                break;
            case "gif":
                $image = imagecreatefromgif($target_path . $ext);
                imagepng($image, $target_path . "png");
                imagedestroy($image);
                break;
            default:
            break;
        }
        $result = 1;
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:54:08.410

`$ext`将是`jpg`or `jpeg`，并且您正在检查`.jpg`or`.jpeg`在您的`switch`语句中，因此对于这些文件，这将移至默认情况并且什么也不做。

# arrays - 给定两个数组，找到最小化和 A[i]*|B[i]-B[k]| 的索引 k

> ID：14202135
> 
> 赞同：5
> 
> 时间：2013-01-07T18:48:21.823
> 
> 标签：arrays, algorithm, data-structures

我有两个包含自然数 A 和 B 的数组，我需要找到使总和 A[i] * |B[i]-B[k]| 最小化的索引 k 从 i=0 到 n-1。（两个数组的长度相同）在 O(n^2) 中显然很容易做到，我只计算 0 到 n-1 之间的所有 k 的所有总和，但我需要更好的运行时间复杂度。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T19:49:33.353

您可以通过首先根据 B 中的值对两个数组进行排序，然后执行单次扫描，在 O(nlogn) 时间内完成此操作。

数组排序后，如果 i>k 则 B[i]>=B[k] 并且如果 i<= k 则 B[i]<=B[k]，因此总和可以重写为：

```
sum A[i] * abs(B[i]-B[k]) = sum A[i]*(B[i]-B[k])  for i=k..n-1
                            + sum A[i]*(B[k]-B[i])  for i=0..k-1

    = sum A[i]*B[i] for i=k..n-1
      - B[k] * sum A[i] for i=k..n-1
      + B[k] * sum A[i] for i = 0..k-1
      - sum A[i]*B[i] for i = 0..k-1 
```

您可以预先计算时间 O(n) 中的所有总和，然后您可以评估 O(n) 中每个位置的目标总和，并选择给出最佳分数的 k 值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-07T19:51:50.680

我相信我能做到这一点是 O(n log n)。

首先，对数组进行排序，对`B`数组应用相同的排列`A`（并记住排列）。这是 O(n log n) 部分。由于我们对所有 i 求和，因此对 A 和 B 数组应用相同的排列不会改变最小值。

使用排序`B`数组，算法的其余部分实际上是 O(n)。

对于每个 k，定义一个数组 C [k] [i] = |B[i] - B[k]|

（注意：我们实际上不会构造 C [k] ...我们只是将它用作一个概念，以便于推理。）

观察我们试图最小化（超过 k）的数量是 A[i] * C [k] [i] 的总和。让我们继续给它一个名字：

定义： S [k] = Σ A[i] * C [k] [i]

现在，对于任何特定的 k，C [k]是什么样的？

嗯，很明显，C [k] [k] = 0。

更有趣的是，由于 B 数组是排序的，我们可以去掉绝对值符号：

*   C [k] [i] = B[k] - B[i]，对于 0 <= i < k
*   C [k] [i] = 0，因为 i = k
*   C [k] [i] = B[i] - B[k]，对于 k < i < n

让我们再定义两件事。

定义： T [k] = Σ A[i] for 0 <= i < k

定义： U [k] = Σ A[i] for k < i < n

（也就是说，T [k]是 A 的前 k-1 个元素的总和。U [k]是除 A 的前 k 个元素之外的所有元素的总和。）

关键观察：给定 S [k]、 T [k]和​​ U [k]，我们可以在恒定时间内计算 S [k+1]、 T [k+1]和 U [k+1 。]如何？

T 和 U 很简单。

问题是，我们如何从 S [k]到 S [k+1]？

考虑当我们转到 C [k] [+1]时 C k 会发生什么。我们只需将 B[k+1]-B[k] 加到 C 中从 0 到 k 的每个元素上，然后从 C 中从 k+1 到 n 的每个元素中减去相同的数量（证明这一点）。这意味着我们只需添加 T [k] * (B[k+1] - B[k]) 并减去 U [k] * (B[k+1] - B[k]) 即可从 S [k]到 S [k+ 1] .

[代数... S k]的前 k 项只是 A[i] * (B[k] - B[i]) 从 0 到 k-1 的总和。

S [k+1]的前 k 项是 A[i] * (B[k+1] - B[i]) 从 0 到 k-1 的总和

它们之间的差异是 (A[i] * (B[k+1] - B[i]) - (A[i] * (B[k] - B[ i])). 分解出 A[i] 项并取消 B[i] 项以获得 A[i] * (B[k+1] - B[k]) 从 0 到 k-1 的总和，也就是 T [k] * (B[k+1] - B[k])。

同样对于 S [k]的最后 nk-1 项。

因为我们可以在线性时间内计算 S [0]、T [0]和 U [0]，并且我们可以在恒定时间内从 S [k]到 S [k+1 ，所以我们可以在线性时间内计算所有的 S] [k]。所以这样做，记住最小的，你就完成了。

使用排序排列的逆来获取`k`原始数组的 。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-07T20:15:27.560

这是 O(NlogN) 解决方案。例子

```
A 6 2 5 10 3 8 7
B 1 5 4 3  6 9 7 
```

1）首先将两个数组排序为B的顺序增加。A的元素只是与B绑定。排序后，我们得到

```
 A  6 10 5 2 3 7
 B  1 3  4 5 6 7 
```

由于B现在井井有条。我们有

```
n-1
sum A[i]|B[i]-B[k]| 
i=0

 k-1                 n-1
=sum A[i](B[k]-B[i])+ sum A[i](B[k]-B[i])
 i=0                 i=k+1
      k-1       n-1          k-1           n-1
=B[k](sum A[i] -sum A[i]) - (sum A[i]B[i]- sum A[i]B[i])
      i=0      i=k+1        i=0           i=k+1 
```

2) 我们计算数组 A 的前缀和 sumA=0 6 16 21 23 26 33

```
 i=e
With sumA sum A[i] can be calcuated in O(1) time for any s and e. 
          i=s 
```

出于同样的原因，我们可以计算 A[i]B[i] 的前缀和。所以对于每个 k，要检查它的值，只需要 O(1) 时间。所以总时间复杂度是`O(NlogN)+O(N).`

# r - 将行转换为 R 中的列以进行统计相关性分析

> ID：14202137
> 
> 赞同：1
> 
> 时间：2013-01-07T18:48:30.460
> 
> 标签：r, rows, correlation, reshape

我正在尝试将列转换为 R 中的行，而不使用 reshape（无法安装包）。我收到的数据包括属性及其相应的指标。我想计算所有这些属性之间的统计相关性——总共 16000 条记录和 800 万条记录。并非所有记录都具有相同数量的属性。

为此，我相信我必须将列转换为行，以便最终可以使用 cor 函数，例如 cor(x[,1], x[,2:16000])。如果有某种方法可以通过属性使用 cor 函数，即属性 1 和 2、属性 1 和 3、属性 1 ... N 之间的相关性，这可能完全没有必要。任何帮助将不胜感激。

```
 ID          Attribute  Metric1 
 [1,]  1         1 -1.6363007
 [2,]  2         1  1.1483294
 [3,]  3         1  2.1682566
 [4,]  4         1 -1.1823649
 [5,]  5         1 -1.3631378
 [6,]  1         2 -1.1715544
 [7,]  2         2  1.5164278
 [8,]  3         2 -1.0110274
 [9,]  4         2 -0.9421652
[10,]  5         2 -0.2105443
[11,]  6         2 -0.4143548
[12,]  7         2 -1.6170975
[13,]  8         2  1.2402303
[14,]  9         2  0.4460047
[15,]  7         3  0.1060407
[16,]  8         3  0.9796893
[17,]  9         3  0.9254911
[18,] 10         3 -1.5728600
[19,] 11         3 -0.8082675
[20,] 12         3 -1.8643084 
```

转型：

```
ID  attribute1  attribute2  attribute3
1   -1.6363007  -1.1715544  na
2   1.1483294   1.5164278   na
3   2.1682566   -1.0110274  na
4   -1.1823649  -0.9421652  na
5   -1.3631378  -0.2105443  na
6   na          -0.4143548  na
7   na          -1.6170975  0.1060407
8   na           1.2402303  0.9796893
9   na           0.4460047  0.9254911
10  na           na         -1.57286
11  na           na         -0.8082675
12  na           na         -1.8643084

test <- cbind(c(rep(1,5),rep(2,9),rep(3,6)), replicate(1,rnorm(20)))
test <- cbind(c(1:5,1:9,7:12),test) 
```

@亚伦

```
q <- matrix(nrow=20,ncol=3)
colnames(q) <- c("x","y","z")
q[,3] <- replicate(1, rnorm(20))
q[,2] <- c(101,102,103,104,105,106, 107, 108, 101,103,107,109, 104,110,102,103,106,109,108,112)
q[15:20,1] <- 10000003
q[9:14,1] <- 10000002
q[1:8,1] <- 10000001
q <- data.frame(q)
q$x <- factor(q$x)
q$y <- factor(q$y)
q$z <- factor(q$z)

with(q, {
  out <- matrix(nrow=nlevels(x), ncol=nlevels(y),
                dimnames=list(levels(x), levels(y)))
  out[cbind(x, y)] <- z
  out
}) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T18:53:33.140

不需要“reshape”或“reshape2”包。只需使用基础 R `reshape()`。假设你`data.frame`的名字是“temp”：

```
reshape(temp, direction = "wide", idvar="ID", timevar="Attribute")
#       ID Metric1.1  Metric1.2  Metric1.3
# [1,]   1 -1.636301 -1.1715544         NA
# [2,]   2  1.148329  1.5164278         NA
# [3,]   3  2.168257 -1.0110274         NA
# [4,]   4 -1.182365 -0.9421652         NA
# [5,]   5 -1.363138 -0.2105443         NA
# [11,]  6        NA -0.4143548         NA
# [12,]  7        NA -1.6170975  0.1060407
# [13,]  8        NA  1.2402303  0.9796893
# [14,]  9        NA  0.4460047  0.9254911
# [18,] 10        NA         NA -1.5728600
# [19,] 11        NA         NA -0.8082675
# [20,] 12        NA         NA -1.8643084 
```

如果您的数据是 a`matrix`而不是 a `data.frame`，则需要`data.frame`在使用前将其转换为 a `reshape()`，或者您可以使用`xtabs()`. 但是，使用`xtabs()`会创建零而不是`NA`s。这是`xtabs()`方法：

```
xtabs(Metric1 ~ ID + Attribute, tempm)
#     Attribute
# ID            1          2          3
#   1  -1.6363007 -1.1715544  0.0000000
#   2   1.1483294  1.5164278  0.0000000
#   3   2.1682566 -1.0110274  0.0000000
#   4  -1.1823649 -0.9421652  0.0000000
#   5  -1.3631378 -0.2105443  0.0000000
#   6   0.0000000 -0.4143548  0.0000000
#   7   0.0000000 -1.6170975  0.1060407
#   8   0.0000000  1.2402303  0.9796893
#   9   0.0000000  0.4460047  0.9254911
#   10  0.0000000  0.0000000 -1.5728600
#   11  0.0000000  0.0000000 -0.8082675
#   12  0.0000000  0.0000000 -1.8643084 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T19:02:22.070

使用`reshape2`

```
 acast(dat, ID~Attribute, value.var="Metric1")
           1          2          3
1  -1.636301 -1.1715544         NA
2   1.148329  1.5164278         NA
3   2.168257 -1.0110274         NA
4  -1.182365 -0.9421652         NA
5  -1.363138 -0.2105443         NA
6         NA -0.4143548         NA
7         NA -1.6170975  0.1060407
8         NA  1.2402303  0.9796893
9         NA  0.4460047  0.9254911
10        NA         NA -1.5728600
11        NA         NA -0.8082675
12        NA         NA -1.8643084 
```

# javascript - 滑块在 jQuery 选项卡中不起作用

> ID：14202147
> 
> 赞同：3
> 
> 时间：2013-01-07T18:49:03.677
> 
> 标签：javascript, jquery, jquery-ui, slider, flexslider

我想在 jQuery 选项卡中使用 2 个 jQuery Flexslider。选项卡 1 上的滑块可以正常工作，但不能在选项卡 2 中工作。

这是 JSFiddle 上代码的完整演示：

**演示：**

[http://jsfiddle.net/vH5DT/](http://jsfiddle.net/vH5DT/)

**jQuery代码：**

```
$(document).ready(function() {

    $('#tabvanilla').tabs({
        hide: "heightFade",
        show: "heightFade",
        collapsible: true
    });

    $('#flexslider1').flexslider({
        animation: "slide",
        slideshow: true,
        controlsContainer: ".flex-container1",
        directionNav: true,
        controlNav: true
    });

    $('#flexslider2').flexslider({
        animation: "slide",
        slideshow: true,
        controlsContainer: ".flex-container2",
        directionNav: true,
        controlNav: true
    });

    }); 
```

**HTML：**

```
<div id="tabvanilla">
    <ul class="tabnav">
      <li><a href="#tab1">Tab1</a></li>
      <li><a href="#tab2">Tab2</a></li>
    </ul>

    <div id="tab1" class="cf">
      <div id="flexslider1" class="flexslider">

        <ul class="slides">
          <li><img src="" /></li>
          <li><img src="" /></li>
          <li><img src="" /></li>
        </ul>

      </div>
      <div class="flex-container1"></div>

    </div><!-- div#tab1 -->

  <div id="tab2">
       <div id="flexslider2" class="flexslider">
        <ul class="slides">
            <li><img src="" /></li>
            <li><img src="" /></li>
            <li><img src="" /></li>
         </ul>

        <div class="flex-container2"></div>
      </div>

    </div><!-- div#tab2 -->
  </div><!-- div#tabvanilla --> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T19:33:02.527

您需要在可见时初始化您的 flexslider（在选项卡更改时）

我认为你可以这样做：

```
$('#tabvanilla').tabs({
    hide: "heightFade",
    show: "heightFade",
    collapsible: true,
    select: function(event, ui) {
        switch (ui.index) {
            case 0:
                // nothing to do since this is selected by default on page load
                break;
            case 1:
                $('#flexslider2').flexslider({
                    animation: "slide",
                    slideshow: true,
                    controlsContainer: ".flex-container2",
                    directionNav: true,
                    controlNav: true
                });
                break;
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T19:30:43.843

对于滑块脚本无法作用于隐藏元素的问题，有几种可能的方法 - 在每次选项卡单击时重新初始化滑块脚本，或者使用

```
position: absolute;
left: -999em; 
```

接着

```
left: auto; 
```

而不是

```
display: none; 
```

对于标签。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-17T22:16:53.270

我想为另一个适合我的解决方案做出贡献。我深入研究代码并使用 firebug 发现 Andres 是对的。问题是因为所有隐藏

*   一开始将它们的宽度设置为0。当我打开萤火虫时，一切正常，隐藏*   取合适的宽度。好吧，我这样做了：我把这段代码放在点击事件和转换之后：

    ```
    fixWidth = $next_slide.css('width'); // I take the width of the new active slide
    $flexslide_tab = $next_slide.find('.flexslider'); // Localize flexslider inside active tab
    $ul = $flexslide_tab.find('.slides'); // Localize <li> container
    $lis = $ul.find('li'); // Get all <li> elements
    $lis.each(function(i,elem) {
        $(this).css('width',fixWidth); // I adjust every <li> width from the new slide
    }); 
    ```

    我希望它会有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-20T11:43:38.967

可能这对你有帮助..

将此脚本添加到第一个选项卡内容页面

```
$(window).load(function () {
    initFlexSliders();
});

function initFlexSliders() {
        $('#carousel').flexslider({
            animation: "slide",
            controlNav: false,
            animationLoop: false,
            slideshow: false,
            itemWidth: 100,
            itemMargin: 5,
            asNavFor: '#slider'
        });

        $('#slider').flexslider({
            animation: "fade",
            controlNav: false,
            animationLoop: false,
            slideshow: false,
            sync: "#carousel",
            start: function (slider) {
                $('body').removeClass('loading');
            }
        });

    $('#carousel-1').flexslider({
        animation: "slide",
        controlNav: false,
        animationLoop: false,
        slideshow: false,
        itemWidth: 100,
        itemMargin: 5,
        asNavFor: '#slider-1'
    });

    $('#slider-1').flexslider({
        animation: "fade",
        controlNav: false,
        animationLoop: false,
        slideshow: false,
        sync: "#carousel-1",
        start: function (slider) {
            $('body').removeClass('loading');
        }
    });
} 
```

对于其他选项卡，将其插入内容的底部。

```
初始化FlexSliders();
```

# css - CSS - IE7 中的媒体查询

> ID：14202148
> 
> 赞同：1
> 
> 时间：2013-01-07T18:49:04.453
> 
> 标签：css, internet-explorer-7, media-queries

我正在开发一个响应式模板并使用 CSS 媒体查询。但似乎 IE7 不直接支持媒体查询。所以我寻找解决方案并找到了[respond.js](https://github.com/scottjehl/Respond)
，但我无法让它工作。

***HTML：***

```
<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
   <link rel="stylesheet" href="css/styles.css" type="text/css" media="screen" />
   <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
   <script type="text/javascript" src="js/respond.min.js"></script>
</head>
<body>

   <!-- ... -->

</body>
</html> 
```

***CSS（样式.css）：***

```
@import "reset.css";
@import "fonts.css";
@import "bootstrap.css";
@import "plugins.css";
@import "ui.css";

@media screen and (max-width: 320px) { 
    /* css */
} 
```

但是当我`@media screen and (max-width: 320px) { }`直接在我的 HTML 中包含它时它的工作。那么我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T19:07:49.957

respond.js 特别声明它无法解析通过 @import 包含的媒体查询

[https://github.com/scottjehl/Respond](https://github.com/scottjehl/Respond)

> “Respond.js 不解析通过 @import 引用的 CSS，也不适用于样式元素中的媒体查询，因为无法重新请求解析这些样式。”

# google-bigquery - 大查询 | 错误：未找到：项目

> ID：14202152
> 
> 赞同：0
> 
> 时间：2013-01-07T18:49:11.493
> 
> 标签：google-bigquery

我在 Big Query Browser Tool 中收到以下错误。

错误：未找到：项目

已验证，Big Query API 已打开并且计费也已启用。请让我知道解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T23:51:31.547

请参阅[查询操作中的 BigQuery 错误：找不到项目 ID](https://stackoverflow.com/questions/14224485/bigquery-error-in-query-operation-project-id-not-found/14226091#14226091)。

通过 appengine 创建的项目似乎存在问题。让我知道您的项目是否属于这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T03:32:06.090

我发现如果（何时）在您的浏览器中禁用 cookie，就会发生此错误。让我知道这是否可以解决此问题。您还可以通过其他方法（即 API 等）进行测试，以确保您的帐户实际已启用 - 这是 URL - [BigQuery API 文档的 URL](https://developers.google.com/bigquery/docs/developers_guide)

# performance - 争论我的算法是正确的并且在范围内

> ID：14202154
> 
> 赞同：0
> 
> 时间：2013-01-07T18:49:15.860
> 
> 标签：performance, algorithm, correctness

我正在处理一些算法分配，并被问到以下问题：在 O(n) 中对一个数组进行排序，其中元素 'r' 或 'w' 就位，因此 'r' 总是在 'w' 之前。因此，如果输入看起来像 [w,r,w,r,w,r,w,w]，则在算法运行后数组看起来像 [r,r,r,w,w,w,w,w] .

从概念上讲，这似乎很清楚。我必须使用两个边界变量来保存第一个“w”元素的位置，一个用于最后一个“r”元素。

我的代码如下所示：

```
char[] A = new char[] { 'w', 'r', 'w', 'r', 'w', 'r', 'w', 'w' };

int lastRedPosition = A.Length - 1;
int firstWhitePosition = 0;

for (int i = firstWhitePosition ; i < A.Length; i++)
{
    // determine the first red from the right e.g. the lastred, ending at the firstwhite position
    for (int j = lastRedPosition; j > firstWhitePosition; j--)
    {
        if (A[j] == 'r')
        {
            lastRedPosition = j;
            break;
        }
    }

    for (int k = firstWhitePosition; k < lastRedPosition; k++)
    {
        if (A[k] == 'w')
        {
            firstWhitePosition = k;
            break;
        }
    }

    A[firstWhitePosition] = 'r';
    A[lastRedPosition] = 'w';
} 
```

现在我认为它在 O(n) 中运行，直观地说，尽管嵌套了 for 循环。这是因为，总而言之，数组只被遍历一次。因为我们使用 lastRedPosition 和 firstWhitePosition 变量来跟踪我们的位置。

然而，我发现很难更正式地激励这一点，因为相同的嵌套 for 循环......有人可以给我一些指向正确directopm的指针吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T19:27:39.400

这不只是快速排序的第 1 次迭代吗？

你从左边扫描直到你点击'w'。然后你从右边扫描直到你点击'r'。然后你交换这两个元素并继续。当两台扫描仪走到一起时，你停下来。

那是 O(n)。

编辑：如：

```
int i = 0, j = n-1;
while(true){
  while(a[i]=='r' && i<n) i++;
  while(a[j]=='w' && j>0) j--;
  if (i >= j) break;
  swap(a[i], a[j]);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T20:09:24.677

第一个问题是您的算法不正确。如果数组中只有`'w'`s 或只有`'r'`s，您仍然在外循环结束时将a`'w'`和 an写入数组。`'r'`

在这种情况下，您的代码实际上需要`Θ(N²)`时间。假设一切都是`'r'`：

```
char[] A = new char[] { 'r', 'r', 'r', 'r', 'r', 'r', 'r', 'r' };

int lastRedPosition = A.Length - 1;
int firstWhitePosition = 0;

for (int i = firstWhitePosition ; i < A.Length; i++)
{
    // determine the first red from the right e.g. the lastred, ending at the firstwhite position
    for (int j = lastRedPosition; j > firstWhitePosition; j--)
    {
        if (A[j] == 'r')
        {
            lastRedPosition = j;
            break;
        }
    } 
```

`j`现在是`A.length - 1 - i`。在第一次迭代中，它`'r'`立即找到了一个，后来，已经将`i` `'w'`s 写入数组的最后一个条目，并且`lastRedPosition`是其中第一个条目的索引，因此`except for the first iteration,`j` 恰好递减一次。

```
 for (int k = firstWhitePosition; k < lastRedPosition; k++)
    {
        if (A[k] == 'w')
        {
            firstWhitePosition = k;
            break;
        }
    } 
```

`firstWhitePosition`始终为 0.`k`递增，直到它变为`lastRedPosition`没有找到 a `'w'`，因此`firstWhitePosition` *不会更改*。因此`k`是递增的`A.length - 1 - i`次数。

总和`i`的`~N²/2`增量为`k`。

```
 A[firstWhitePosition] = 'r';
    A[lastRedPosition] = 'w';
} 
```

您必须检查是否`A[firstWhitePosition]`实际是`'w'`和`A[lastRedPosition]`实际`'r'`。如果没有，你就完成了。你的外循环应该检查`firstWhitePosition < lastRedPosition`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T19:00:14.153

仅仅因为整个数组只被遍历一次并不会自动使其成为 O(n)。事实是，在最不理想的情况下（这是 big-O 的定义），整个数组实际上会被遍历两次，第二次遍历发生在外循环内，使其成为 O(n^2)。

如果您可以保证数组中只有 r 和 w，则 O(n) 方法只是遍历数组一次，计算有多少 r 和 w，然后自己重​​建数组。这实际上是 2 次遍历，使其成为 O(2n)，但通常这些系数会被丢弃。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T19:00:36.457

更容易看出您是否将外部循环转换为`while`运行直到`firstWhitePosition`和`lastRedPosition`相遇的循环。很明显，这两个变量一起只遍历数组一次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T19:03:42.467

从技术上讲，这是 O(N)；但是，从性能的角度来看，它是 O(2N)，这意味着在平均情况下它的速度是可能的一半。那是因为您的外部循环每个元素执行一次，并且它们之间的内部循环遍历每个元素，这意味着迭代次数是元素的两倍。

您的想法是正确的，但是如果不是遍历每个元素的外部循环，而是在您“知道”所有`r`s 都在所有 s 的左侧时就停止了`w`呢？

换句话说，您首先从数组的右端扫描一个`r`（应该在左边），从左边扫描一个`w`（应该在右边）。如果 位于`w`左侧`w`，则应交换它们并继续；但是，如果您的“最后一个 r”索引位于“第一个 w”索引的左侧，那么您就完成了，应该终止整个函数。相反，您当前的实现会不断循环（和交换）。这就是效率低下。正如亨利建议的那样，我会用 while 循环替换外部 for 循环，终止条件是 last`r`在 first 的左侧`w`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-08T22:03:54.250

1.  遍历数组一次，计算 'r' 和 'w' 的数量，将它们存储为 numberR 和 numberW。将非 'r' 和非 'w' 字符存储在名为 S2 的 StringBuffer 中。

2.  将 numberR 'r's 打印到新的 StringBuffer S1 中。将 S2 附加到 S1。将 numberW 的 'w' 附加到 S1。

3.  从 StringBuffer 中获取字符数组。

总成本：O(n)

# javascript - 在没有指针事件的重叠 div 上禁用鼠标事件

> ID：14202155
> 
> 赞同：0
> 
> 时间：2013-01-07T18:49:22.257
> 
> 标签：javascript, css, html, cross-browser

我有一个`div`with`onClick`事件，但由于重叠，它没有检测到鼠标`div`。我不能把它放在^第一个下面，所以改变`z-index`它不是一种选择。

有没有办法在没有指针事件的情况下禁用 2 ^(nd) `div`的鼠标事件？我需要这个是跨浏览器的。

要求的样品。现在所有事件都会触发警报：

```
<div class="buttonDiv" onClick="buttonAction()"></div>
<div class="filterDiv"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:18:02.080

你可以试试这个：

HTML

```
<div class="buttonDiv" onClick="buttonAction(event)">
  OUTER
  <div class="filterDiv">INNER</div>
</div> 
```

Javascript

```
var buttonAction = function(e) {
  if(e.target.className == "buttonDiv") {
    //code here
    alert('got here');
  }
} 
```

示例：http: [//jsfiddle.net/aFRcd/1/](http://jsfiddle.net/aFRcd/1/)

基本上在点击时，您发送点击`event`，然后您可以查看实际点击了哪个 div`event.target`

您会注意到在示例中单击 OUTER 会触发警报，而 INNER 不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:04:44.327

我能找到的唯一解决方案是将鼠标移动事件附加到画布并将按钮的坐标与按钮的位置和尺寸进行比较。这是一种痛苦，但至少它完成了工作

# php - 删除除空格以外的所有字母数字字符？

> ID：14202161
> 
> 赞同：2
> 
> 时间：2013-01-07T18:49:54.360
> 
> 标签：php, regex

> **可能重复：**
> [正则表达式删除字母数字和空格以外的任何内容（在 PHP 中）](https://stackoverflow.com/questions/8107815/regular-expression-to-remove-anything-but-alphanumeric-spaces-in-php)

我试图得到

```
//before preg_replace -> Hi (Jimmy),

$string = preg_replace('/[^\da-z]/i', '', $string);

//after current preg_replace -> HiJimmy
//what it should be -> Hi Jimmy 
```

preg_replace 删除所有字母数字字符，除了空格。这可能吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-07T18:50:25.290

只需在您的组中添加一个空间：

```
$string = preg_replace('/[^\da-z ]/i', '', $string);
//                              ^ Notice the space here 
```

# python - Xpath 返回超出预期（python、urllib、lxml）

> ID：14202162
> 
> 赞同：1
> 
> 时间：2013-01-07T18:49:57.887
> 
> 标签：python, xpath, lxml, urllib

我正在尝试从网站检索第一个下载链接，但我的代码返回的不止于此，我不知道为什么。

这是我的一段代码：

```
site_search = "http://mp3skull.com/mp3/tubidy.html"
user_agent = 'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/20100101 Firefox/17.0'

class MyOpener(FancyURLopener, object):
    version = user_agent
myopener = MyOpener()
page = myopener.open(site_search)
html = etree.HTML(page.read())

xpath = "//a[@style = 'color:green;'][1]/@href"
filtered_html = html.xpath(xpath)
print(filtered_html) 
```

我的代码返回：

```
['http://megdadhashem.wapego.ru/files/56727/tubidy_mp3_e2afc5.mp3', 'http://dc357.4shared.com/img/1396413489/41200d37/dlink__2Fdownload_2FOfQCGDtd_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc337.4shared.com/img/1394581159/99fd9e7/dlink__2Fdownload_2FoENbSCE2_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc337.4shared.com/img/1394580769/9e8391f3/dlink__2Fdownload_2Fu4IeKpFK_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc337.4shared.com/img/1386745964/e7f6dcb/dlink__2Fdownload_2F303C_5FUCB_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc337.4shared.com/img/1386568212/616a9b6e/dlink__2Fdownload_2Fcw_5FeT72M_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc540.4shared.com/img/1386000196/b6a127da/dlink__2Fdownload_2FEyTD5P9j_3Ftsid_3D20130107-14410-24515ba/preview.mp3', 'http://dc337.4shared.com/img/1330719927/4f96e0d1/dlink__2Fdownload_2FiYGiVen4_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc242.4shared.com/img/1328992471/f164c1bb/dlink__2Fdownload_2Fsgz8qSBW_3Ftsid_3D00000000-000000-000000/preview.mp3', 'http://dc539.4shared.com/img/1317978255/68f8329d/dlink__2Fdownload_2FSi_5Fka2Pm_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc402.4shared.com/img/1236310800/70345122/dlink__2Fdownload_2FYWU0Aksu_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc150.4shared.com/img/1236293916/681798eb/dlink__2Fdownload_2Fhe_5FMHVoM_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc263.4shared.com/img/1233805806/ab16f2f1/dlink__2Fdownload_2FFp1E7eV8_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc392.4shared.com/img/1194298272/dda6a2b0/dlink__2Fdownload_2Fq1Y3PdRO_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc392.4shared.com/img/1186905892/803a5130/dlink__2Fdownload_2FubH7xctu_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc429.4shared.com/img/1183115738/125793e3/dlink__2Fdownload_2F9Y3zzp-K_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc459.4shared.com/img/1181881278/421221cb/dlink__2Fdownload_2FjstpNTCi_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc453.4shared.com/img/1181881110/18d5b026/dlink__2Fdownload_2F8mmM2BcS_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc120.4shared.com/img/1181875882/25fa514a/dlink__2Fdownload_2F0_5F0UxQuu_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc471.4shared.com/img/1181868760/9121abb8/dlink__2Fdownload_2Fq2ykXJ7Q_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc381.4shared.com/img/1177326344/661ba359/dlink__2Fdownload_2FHztHPN1O_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc201.4shared.com/img/1146076462/de8d83e2/dlink__2Fdownload_2Fqaumhl-G_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc352.4shared.com/img/1142200306/a439f02c/dlink__2Fdownload_2FECiq0Wc8_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc392.4shared.com/img/1137314077/bf9aa3d8/dlink__2Fdownload_2F1ZQOMJ9O_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc362.4shared.com/img/1128611400/34471996/dlink__2Fdownload_2FEF12Czzg_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc196.4shared.com/img/1124868095/a0646612/dlink__2Fdownload_2FruOhPkHz_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc508.4shared.com/img/1124145685/1257f194/dlink__2Fdownload_2FPUqL0qz8_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc337.4shared.com/img/1120296900/3946f5cc/dlink__2Fdownload_2FqsLK3WC9_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc337.4shared.com/img/1091112724/d363d3c4/dlink__2Fdownload_2FylEZuq80_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc394.4shared.com/img/1086814685/542051eb/dlink__2Fdownload_2FiRSSrUEu_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc340.4shared.com/img/1086805965/4423758d/dlink__2Fdownload_2FAXmv12yD_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc397.4shared.com/img/1086804062/6d2abcc4/dlink__2Fdownload_2FIWWI8tmV_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc339.4shared.com/img/1086802960/a99eb9bb/dlink__2Fdownload_2FlxGG5VBU_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc402.4shared.com/img/1086799043/2637e6a9/dlink__2Fdownload_2FSjcCMKQ5_3Ftsid_3D20130107-14410-24515ba/preview.mp3', 'http://dc352.4shared.com/img/1086798986/4d8501c0/dlink__2Fdownload_2Fk1ZHbbCa_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc364.4shared.com/img/1086798016/93968106/dlink__2Fdownload_2FgNBZbBqG_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc253.4shared.com/img/1086794519/4f34e1c4/dlink__2Fdownload_2FBZWIHqC4_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc337.4shared.com/img/1086790487/f7ee8aea/dlink__2Fdownload_2FbvASkRUI_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc337.4shared.com/img/1084754225/3a8f1481/dlink__2Fdownload_2FY2rkufif_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc495.4shared.com/img/1039479528/73f2fa3c/dlink__2Fdownload_2FKWsm3WJ-_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc145.4shared.com/img/975452680/1597c3a2/dlink__2Fdownload_2FQ2VX9l6W_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc252.4shared.com/img/933590669/b1f79b67/dlink__2Fdownload_2F0hbdsF2M_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc120.4shared.com/img/885049589/d1a62f17/dlink__2Fdownload_2FmC_5F1JDXl_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc224.4shared.com/img/884702525/bb0c917b/dlink__2Fdownload_2F46GnfVxK_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc337.4shared.com/img/849169766/fd8d3498/dlink__2Fdownload_2F-hynMHjn_3Ftsid_3D20130107-14410-24515ba/preview.mp3', 'http://dc431.4shared.com/img/844202587/a88f9c21/dlink__2Fdownload_2F85HCohcN_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc184.4shared.com/img/838092829/30bd6ae8/dlink__2Fdownload_2Ffil3BIUA_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc430.4shared.com/img/838091664/324b51b5/dlink__2Fdownload_2FfrzQcwBu_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc441.4shared.com/img/838089810/882d2f3e/dlink__2Fdownload_2FqUMmG5Zl_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc190.4shared.com/img/838088957/cb5b72cb/dlink__2Fdownload_2FiR6VJUSC_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc433.4shared.com/img/838087554/32bca43/dlink__2Fdownload_2Ff3_5Fn7pKY_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc316.4shared.com/img/838086255/c9df8b35/dlink__2Fdownload_2FKMBk8wZI_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc445.4shared.com/img/838084096/55ee8966/dlink__2Fdownload_2FM9Qw6AwI_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc415.4shared.com/img/838082894/9098e62e/dlink__2Fdownload_2F8DGix4I5_3Ftsid_3D20130107-14410-24515ba/preview.mp3', 'http://dc233.4shared.com/img/838081788/99dc7397/dlink__2Fdownload_2Ft-4IKE5C_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc445.4shared.com/img/838081320/6ae1bbf3/dlink__2Fdownload_2FBy95Sp_5FU_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc387.4shared.com/img/838079502/f5b07bd1/dlink__2Fdownload_2FF_5FyXSg9E_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc429.4shared.com/img/842513873/dbab9cf3/dlink__2Fdownload_2FeNLkoppN_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc424.4shared.com/img/827830064/127ba0d9/dlink__2Fdownload_2Fj8emrNnO_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc270.4shared.com/img/822099181/7483e90e/dlink__2Fdownload_2F7xIdA4q6_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc308.4shared.com/img/822092067/d5a08c83/dlink__2Fdownload_2FM26G9oiJ_3Ftsid_3D20130107-14410-24515ba/preview.mp3', 'http://dc198.4shared.com/img/800516614/3d006c3d/dlink__2Fdownload_2Fdz18B2dB_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc388.4shared.com/img/793902768/4eeb6c1d/dlink__2Fdownload_2FnRMBB2bB_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc362.4shared.com/img/788822785/d1e8e98f/dlink__2Fdownload_2Fqs2Ky8y6_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc183.4shared.com/img/788819652/6b419587/dlink__2Fdownload_2FlnWIeFyL_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc391.4shared.com/img/788813387/c7f33dca/dlink__2Fdownload_2FvmPZSPCp_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc198.4shared.com/img/788809769/eb1c5c4b/dlink__2Fdownload_2F0r6tlUex_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc280.4shared.com/img/788804149/2fcd9aa6/dlink__2Fdownload_2FBZSQjBQM_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc280.4shared.com/img/788803303/35275a6b/dlink__2Fdownload_2FsH4BjUMw_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc198.4shared.com/img/781278584/363504d6/dlink__2Fdownload_2Fof2zYynb_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc405.4shared.com/img/717415145/3d6233e1/dlink__2Fdownload_2FkxXODf-m_3Ftsid_3D20130107-14410-24515ba/preview.mp3', 'http://dc376.4shared.com/img/717284773/98545fac/dlink__2Fdownload_2FrreBjY6x_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc397.4shared.com/img/716180972/4a4cac7d/dlink__2Fdownload_2FPLBlw3hR_3Ftsid_3D20130107-14410-24515ba0/preview.mp3', 'http://dc302.4shared.com/img/7074 
```

我知道从我的结果中获取第一个链接并不难，但我很好奇为什么我首先会获得这么多链接。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:57:11.003

//something[1] 返回它们各自父级的所有值。(//something)[1] 将返回文档中的第一个东西。

所以你必须使用：

```
(//a[@style = 'color:green;'])[1]/@href 
```

# sql - Like 和 DisLike 的 SQL 数据库结构

> ID：14202168
> 
> 赞同：0
> 
> 时间：2013-01-07T18:50:30.193
> 
> 标签：sql, sql-server, database, relational-database

我是网络编程新手，需要一些专家建议。我正在为我的一个网站项目使用 SQL 数据库。我的网站将显示带有“喜欢”和“不喜欢”按钮的主题列表。登录的用户将能够点击每个主题的“喜欢”或“不喜欢”按钮。我能够记录每个主题的好恶。因此，如果用户单击某个主题，它将显示该特定主题的喜欢和不喜欢的数量，但是我想要实现的是当有人单击特定的用户个人资料时，它应该显示用户喜欢或不喜欢的所有主题. 例如，当我们点击 Facebook 中的用户个人资料时，它会显示该特定用户的所有评论或点赞，我该如何做类似的事情。我想知道实现这个和查询数据的数据结构谢谢大家。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T18:56:05.240

如果您有一个主题表和一个用户表，您将添加一个链接到两者的点赞表。像这样的东西：

```
User
----------
ID (int, PK)
Name (string)
etc...

Topic
----------
ID (int, PK)
Title (string)
etc...

Like
----------
ID (int, PK)
UserID (int, FK to User.ID)
TopicID (int, FK to Topic.ID)
IsLike (boolean)
etc... 
```

因此，任何时候用户“喜欢”某些东西，您都可以在该表设置`IsLike`中添加一条记录`true`。如果他们“不喜欢”某些东西，那么您将该表设置添加`IsLike`到`false`. 您可以更改术语/名称/类型/等。但总体思路是一样的。“like”成为 a`User`和 a之间的链接记录`Topic`。

因此，在显示主题时，您只需从链接表中选择与该主题相关联的记录数。并且在显示用户时，您从链接表中选择与该用户关联的记录。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T19:04:44.013

![在此处输入图像描述](../Images/380b7483714fa48709f5704351b2c29c.png)

这是您可以使用的简单模式。isLike 是一个布尔值，如果喜欢，则为 true，如果不喜欢，则为 false。

按主题查询总喜欢不喜欢

```
 Select Count(*), Topic,isLike FROM LikesDislikes GROUP BY Topic,isLike 
```

对于用户的所有喜欢的主题

```
 SELECT topic FROM likesdislikes WHERE userName = 'user' AND isLike = true; 
```

等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T18:57:05.923

您可以拥有三个 SQL 表：

主题评分用户

然后，您可以通过 Ratings 表将 Users 表链接到 Topics 表并进行查询：

```
select * from Topics where RatingsUserID = UsersUserID 
```

（伪代码）

# c# - POX SVCUtil 生成的类转换

> ID：14202173
> 
> 赞同：0
> 
> 时间：2013-01-07T18:50:48.243
> 
> 标签：c#, wcf, web-services, xml-serialization, svcutil.exe

我使用 SVCUTIL 从 XSD 生成一个类。我很难弄清楚如何获取传入的请求对象并从对象中检索“MsgType”值。

我想通过这样做，我可以简单地使用以下方法访问数据：

```
request.Request.MsgType 
```

然而，事情并没有这么简单。'request' 给我的唯一选项是： Equals GetHashCode GetSchema GetType Nodes ReadXML ToString WriteXML

为了访问 MsgType，我需要对序列化对象进行某种类型的转换吗？

```
public ServiceProviderTic callRequestFunc(ServiceProviderTic request) {
      //How do I get request.Request.MsgType Value?
} 
```

生成类中的根元素：

```
using System.Runtime.Serialization;

[assembly: System.Runtime.Serialization.ContractNamespaceAttribute("", ClrNamespace="")]

[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Runtime.Serialization", "3.0.0.0")]
[System.Runtime.Serialization.DataContractAttribute(Name="RequestType", Namespace="")]
[System.Runtime.Serialization.KnownTypeAttribute(typeof(ResponseType))]
[System.Runtime.Serialization.KnownTypeAttribute(typeof(DateTimeInfoType))]
[System.Runtime.Serialization.KnownTypeAttribute(typeof(OriginType))]
[System.Runtime.Serialization.KnownTypeAttribute(typeof(LocaleInfoType))]
[System.Runtime.Serialization.KnownTypeAttribute(typeof(ProductType))]
[System.Runtime.Serialization.KnownTypeAttribute(typeof(ValueType))]
[System.Runtime.Serialization.KnownTypeAttribute(typeof(AuthInfoType))]
public partial class RequestType : object, System.Runtime.Serialization.IExtensibleDataObject
{

private RequestType.MsgTypeType MsgTypeField;

[System.Runtime.Serialization.DataMemberAttribute(IsRequired=true)]
public RequestType.MsgTypeType MsgType
{
    get
    {
        return this.MsgTypeField;
    }
    set
    {
        this.MsgTypeField = value;
    }
}

 [System.Runtime.Serialization.DataContractAttribute(Name="RequestType.MsgTypeType", Namespace="")]
public enum MsgTypeType : int
{
    [System.Runtime.Serialization.EnumMemberAttribute()]
    act = 0
}
}

[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Runtime.Serialization", "3.0.0.0")]
[System.Xml.Serialization.XmlSchemaProviderAttribute("ExportSchema")]
[System.Xml.Serialization.XmlRootAttribute(IsNullable=false)]
public partial class ServiceProviderTic : object, System.Xml.Serialization.IXmlSerializable
{

private System.Xml.XmlNode[] nodesField;

private static System.Xml.XmlQualifiedName typeName = new System.Xml.XmlQualifiedName("ServiceProviderTic", "");

public System.Xml.XmlNode[] Nodes
{
    get
    {
        return this.nodesField;
    }
    set
    {
        this.nodesField = value;
    }
}

public void ReadXml(System.Xml.XmlReader reader)
{
    this.nodesField = System.Runtime.Serialization.XmlSerializableServices.ReadNodes(reader);
}

public void WriteXml(System.Xml.XmlWriter writer)
{
    System.Runtime.Serialization.XmlSerializableServices.WriteNodes(writer, this.Nodes);
}

public System.Xml.Schema.XmlSchema GetSchema()
{
    return null;
}

public static System.Xml.XmlQualifiedName ExportSchema(System.Xml.Schema.XmlSchemaSet schemas)
{
    System.Runtime.Serialization.XmlSerializableServices.AddDefaultSchema(schemas, typeName);
    return typeName;
} 
```

XML:

```
<ServiceProviderTic>
<Request>
<MsgType>act</MsgType> 
```

XSD 架构

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" attributeFormDefault="unqualified">
<xs:element name="ServiceProvideTic" nillable="false">
<xs:annotation>
<xs:documentation></xs:documentation>
</xs:annotation>
<xs:complexType>
<xs:sequence>
<xs:element name="Version" type="xs:string" nillable="false"/>
<xs:choice>
<xs:element name="Request" type="RequestType" nillable="false"/>
<xs:element name="Response" type="ResponseType" nillable="false"/>
</xs:choice>
</xs:sequence>
</xs:complexType>
</xs:element>
<xs:complexType name="RequestType">
<xs:annotation>
<xs:documentation> Request Information</xs:documentation>
</xs:annotation>
<xs:sequence>
<xs:element name="MsgType" nillable="false">
<xs:simpleType>
<xs:restriction base="xs:string">
<xs:enumeration value="act"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:29:36.017

[在此处查看](http://msdn.microsoft.com/en-us/library/bb412178%28v=vs.100%29.aspx)有关创建支持 XML 和 JSON 的 REST Web 服务的一些好的建议（请参阅 WebHttpBehavior 类）

除此之外，我不确定你的 XSD 是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T00:41:00.987

经过几天的学习和弄清楚如何在不使用旧时尚方式的情况下访问数据。这是我想出的：

Microsoft 提供了 XSD 和 SVCUTIL 用于将 xsd 转换为类并使它们可序列化。我被困在这个项目上的原因是因为复杂的类型，我以前从未这样做过。我用了：

命令提示符：XSD.exe ServiceProviderTic.xsd /CLASSES

其中生成了 ServiceProviderTic.cs

我创建了一个网络服务：

界面：

```
[OperationContract]
[WebInvoke(Method = "POST", UriTemplate="/MyService", RequestFormat = WebMessageFormat.Xml, ResponseFormat = WebMessageFormat.Xml, BodyStyle = WebMessageBodyStyle.Bare)]
    XElement callRequestFunc(XElement request); 
```

班级：

```
public XElement callRequestFunc(XElement request)
    {
        ServiceProviderTic requestSer = Utility.DeserializeData(request);

        if (requestSer.Item.GetType() == typeof(RequestType))
        {
            RequestType reqObj = (RequestType)requestSer.Item;
            string datapiece = reqObj.MsgType.ToString();
        }

        XElement responseSer = Utility.SerializeData(requestSer);

        return responseSer;
    }
} 
```

XElement 帮助我接受普通旧 xml (POX) 并以普通旧 xml 响应。下面是序列化和反序列化我的 xelement 的辅助函数。我还包含了额外的代码，这些代码删除了我不需要的命名空间。

```
public class Utility
{

    public static ServiceProviderTic DeserializeData(XElement request)
    {
        var ser = new XmlSerializer(typeof(ServiceProviderTic));
        return (ServiceProviderTic)ser.Deserialize(request.CreateReader());
    }

    public static XElement SerializeData(ServiceProviderTic response)
    {
        using (var memoryStream = new MemoryStream())
        {
            using (TextWriter streamWriter = new StreamWriter(memoryStream))
            {
                var xmlSerializer = new XmlSerializer(typeof(ServiceProviderTic));
                xmlSerializer.Serialize(streamWriter, response);
                return Utility.RemoveAllNamespaces(XElement.Parse(Encoding.ASCII.GetString(memoryStream.ToArray())));
            }
        }
    }

    public static XElement RemoveAllNamespaces(XElement source)
    {
        return !source.HasElements
                   ? new XElement(source.Name.LocalName)
                   {
                       Value = source.Value
                   }
                   : new XElement(source.Name.LocalName, source.Elements().Select(el => RemoveAllNamespaces(el)));
    }
} 
```

我希望这对将来的人有所帮助！

# javascript - Javascript 和正则表达式删除文本

> ID：14202175
> 
> 赞同：1
> 
> 时间：2013-01-07T18:50:57.030
> 
> 标签：javascript, jquery, regex

我有一个 ul，每个 li 都有一个孩子，就像这样：

```
<ul>
    <li><a href="#">Belts (2)</a></li>
    <li><a href="#">Tenis (92)</a></li>
    <li><a href="#">T-Shirts (368)</a></li>
</ul> 
```

我需要删除括号和里面的数字，但让其余的，即：

```
<ul>
    <li><a href="#">Belts</a></li>
    <li><a href="#">Tenis</a></li>
    <li><a href="#">T-Shirts</a></li>
</ul> 
```

如何使用 jquery 和正则表达式来做到这一点？我不知道！:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T18:52:35.803

```
$("ul li a").html(function(i, html) {
    return html.replace(/\(\d*\)/, "");
}); 
```

**演示：http:** [//jsfiddle.net/JVVvQ/](http://jsfiddle.net/JVVvQ/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T18:53:14.667

```
$('a').text(function (_, v) {
    return v.replace(/ \(\d+\)$/, '');
}); 
```

这是小提琴：http: [//jsfiddle.net/63H2T/](http://jsfiddle.net/63H2T/)

# javascript - Javascript 手风琴 - 全部折叠

> ID：14202176
> 
> 赞同：0
> 
> 时间：2013-01-07T18:51:24.763
> 
> 标签：javascript, jquery, accordion

我创建了一个javascript手风琴，它在一个手风琴始终打开时工作，我想知道如何修改我的代码，以便手风琴在再次单击时也可以关闭 - 以便所有折叠？

```
 $('.accordion-bottom').hide();

    $('.accordion-link').on('click', global.toggleAccordian);

    };

    global.toggleAccordian = function(e){
        var $Arrow = $(this).find('.arrow');
        var $parentDiv = $(this).parent();
        var $bottomAccordion = $parentDiv.siblings('.accordion-bottom');
        var $accordionLi = $parentDiv.parents().eq('1');

        var $siblingLis = $accordionLi.siblings('li');
        var $siblingBotAccordions = $siblingLis.find('.accordion-bottom');
        var $siblingArrows = $siblingLis.find('.arrow');

     $siblingArrows.addClass('arrow-down');

    if (!$accordionLi.hasClass('active')){
        $bottomAccordion.slideDown('slow');
        $Arrow.removeClass('arrow-down');
        $siblingBotAccordions.stop().slideUp('slow');
    }

    e.preventDefault();
    return false;
} 
```

html:

```
<ul class="accordion">
        <li>
           <div class="item-inner-padding accordion-item">
               <div class="accordion-top">
            <a href="#" class="accordion-link">Title<span class="arrow arrow-down">Down</span></a>

               </div>
            <div class="accordion-bottom">

            </div>
            </div>
       </li>
</ul> 
```

# iphone - 相同视图控制器的 2 个实例：一个在 TabBarController 中不起作用

> ID：14202177
> 
> 赞同：4
> 
> 时间：2013-01-07T18:51:34.390
> 
> 标签：iphone, ios, interface-builder

我尝试了很多选择，但没有一个有效。问题很简单：

我有一个 UITabBarController，它非常适合 5 个选项卡。

我的问题位于第一个和第二个选项卡上：我需要在每个选项卡下使用相同的视图控制器，但当然有 2 个不同的实例。

我尝试添加 2 个不同的导航控制器，它们都指向与根控制器相同的视图控制器。这样我可以在每个导航控制器上自定义选项卡文本和图标（我主要在界面构建器中工作）。

```
 __ NavController 1 _
             /                    \
TabController -- NavController 2 -- ViewController 
```

使用此配置：只有第一个选项卡有效（由 NavController1 处理的那个），第二个不显示视图（我绝对不知道显示的是哪个视图，但它是空的、黑色的并且有一个默认的空蓝色导航栏） . 如果我只保留一个从导航控制器到我的视图控制器的链接，如下所示：

```
 __ NavController 1 
             /                    
TabController -- NavController 2 -- ViewController 
```

第二个标签完美地工作！

另一种选择是将 NavController 链接两次，但在这种情况下，我需要根据选项卡索引以编程方式配置标题和图像，我不确定在哪里可以执行此操作。

所以 ：

*   这是正常行为吗？
*   IB有解决方案吗？
*   如果我需要以编程方式设置选项卡外观，我应该在哪里执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:53:59.850

您应该能够在 IB 中执行此操作。只需添加两个导航控制器作为两个选项卡的基本控制器，将根视图控制器添加到每个选项卡（不仅仅是您在问题中显示的一个），然后将这些根视图控制器的类更改为您的子类。

**编辑后**

如果您有一个作为根视图控制器之一制作的复杂场景，您可以复制并粘贴它，另一个将出现在 IB 窗口左侧的对象列表中（以及画布上，但它就在另一个上面，所以你需要把它拖下来才能看到它）。您可以将第二个导航控制器连接到它。您可以这样做，或者拖入两个不同的 UIViewController 并将它们都更改为您的子类（如果您需要为 2 个不同的实例提供不同外观的界面）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T19:38:12.953

如果您想以编程方式执行此操作，您可以在您的应用程序委托中使用与此类似的代码。

```
UITabBarController *tbc = [[UITabBarController alloc] init];

MyViewController *mvc1 = [[MyViewController alloc] init];
MyViewController *mvc2 = [[MyViewController alloc] init];
mvc1.title=@"One";
mvc2.title=@"Two";
mvc1.tabBarItem.image=[UIImage imageNamed:@"one.png"];
mvc2.tabBarItem.image=[UIImage imageNamed:@"two.png"];

UINavigationController *nc1 = [[UINavigationController alloc] initWithRootViewController:mvc1];
UINavigationController *nc2 = [[UINavigationController alloc] initWithRootViewController:mvc2];

[tbc setViewControllers:[NSArray arrayWithObjects:nc1,nc2, nil]];

self.window.rootViewController = tbc; 
```

# syntax - 这个带有下划线、内联接口和赋值的变量声明是什么？

> ID：14202181
> 
> 赞同：7
> 
> 时间：2013-01-07T18:51:47.427
> 
> 标签：syntax, go

这段 Go 代码片段是做什么的？

```
var _ interface {
    add(string) error
} = &watcher{} 
```

我相信`&watcher{}`返回两件事，第一个被丢弃，第二个被分配给......一个接口？[我在 Github 上的fswatch](https://github.com/davecheney/fswatch/blob/master/fswatch_test.go)中找到了代码。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-07T19:00:36.540

此构造将声明一个具有[空白标识符](http://golang.org/ref/spec#Blank_identifier)名称的变量，其类型由类型文字给出；在这种情况下是一个接口定义。接下来是初始化表达式——在这种情况下是一个指向复合文字的指针。

该片段的整体功能是静态地确保 a`*watcher`满足所述接口，因为`_`变量不会以任何方式实现，并且只能观察到初始化程序的任何可能的副作用。静态（如本例）或动态（例如调用在运行时分配给某些全局变量、注册处理程序等的函数）

# php - 启用 Zend 多字节支持

> ID：14202183
> 
> 赞同：2
> 
> 时间：2013-01-07T18:51:54.773
> 
> 标签：php, iis-7, windows-server-2008

有人可以一步一步告诉我如何在 windows server 2008 上启用 zend 多字节支持重新编译 php 吗？或者有没有办法在不重新编译的情况下启用它？任何帮助将不胜感激。

# asp.net - 将 asp.net 上的 CDN 与 scriptmanager 一起使用

> ID：14202186
> 
> 赞同：2
> 
> 时间：2013-01-07T18:52:03.527
> 
> 标签：asp.net, cdn

在阅读 asp.net cdn 站点时，我阅读了以下内容

使用 ASP.NET 4 时，您可以将所有对 ASP.NET 框架脚本的请求重定向到 CDN。从 CDN 而不是本地 Web 服务器检索脚本可以显着提高公共 ASP.NET 网站的性能。

使用 ScriptManager EnableCDN 属性将所有 ASP.NET 框架脚本请求重定向到 Microsoft Ajax CDN：

```
<asp:ScriptManager ID="ScriptManager1" EnableCdn="true" Runat="Server" /> 
```

这是否意味着在模板 asp.net 网站上，在母版页上创建的脚本管理器被删除，包括它下面的脚本？

例如，我们是否要删除它？

```
<asp:ScriptManager runat="server" >
    <Scripts>
        <%--Framework scripts--%>
        <asp:ScriptReference Name="MsAjaxBundle" />
        <asp:ScriptReference Name="jquery" />
        <asp:ScriptReference Name="jquery.ui.combined" />
        <asp:ScriptReference Name="WebForms.js" Assembly="System.Web" Path="~/Scripts/WebForms/WebForms.js" />
        <asp:ScriptReference Name="WebUIValidation.js" Assembly="System.Web" Path="~/Scripts/WebForms/WebUIValidation.js" />
        <asp:ScriptReference Name="MenuStandards.js" Assembly="System.Web" Path="~/Scripts/WebForms/MenuStandards.js" />
        <asp:ScriptReference Name="GridView.js" Assembly="System.Web" Path="~/Scripts/WebForms/GridView.js" />
        <asp:ScriptReference Name="DetailsView.js" Assembly="System.Web" Path="~/Scripts/WebForms/DetailsView.js" />
        <asp:ScriptReference Name="TreeView.js" Assembly="System.Web" Path="~/Scripts/WebForms/TreeView.js" />
        <asp:ScriptReference Name="WebParts.js" Assembly="System.Web" Path="~/Scripts/WebForms/WebParts.js" />
        <asp:ScriptReference Name="Focus.js" Assembly="System.Web" Path="~/Scripts/WebForms/Focus.js" />
        <asp:ScriptReference Name="WebFormsBundle" />
        <%--Site scripts--%>
    </Scripts>
</asp:ScriptManager> 
```

并将其替换为；

```
<asp:ScriptManager ID="ScriptManager1" EnableCdn="true" Runat="Server" /> 
```

该 CDN 现在会交付我们请求的所有文件，包括 jquery 及其子集和 ajax 控制工具包文件吗？

# android - Android：每 4 秒自动捕获图像

> ID：14202189
> 
> 赞同：0
> 
> 时间：2013-01-07T18:52:08.423
> 
> 标签：android, android-camera

我正在开发一个应用程序，当我单击一次按钮后每 4 秒自动开始捕获图像..但我收到错误..这就是我正在做的

```
buttonClick.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
             new Thread(new Runnable() {
                    public void run() {

                        while(true)
                        {
                        preview.camera.takePicture(shutterCallback, rawCallback,
                                jpegCallback);
                        try {
                            Thread.sleep(4000);
                        } catch (InterruptedException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                        }
                        }
                }).start();

    }
    }); 
```

上面的代码给出了错误..但是当我这样做时

```
buttonClick.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
                  preview.camera.takePicture(shutterCallback,jpegCallback);
}       
}); 
```

它工作正常！

这是错误日志

```
`01-07 23:53:16.892: W/dalvikvm(1625): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
01-07 23:53:16.912: E/AndroidRuntime(1625): FATAL EXCEPTION: main
01-07 23:53:16.912: E/AndroidRuntime(1625): java.lang.RuntimeException: Fail to connect to camera service
01-07 23:53:16.912: E/AndroidRuntime(1625):     at android.hardware.Camera.native_setup(Native Method)
01-07 23:53:16.912: E/AndroidRuntime(1625):     at android.hardware.Camera.<init>(Camera.java:110)
01-07 23:53:16.912: E/AndroidRuntime(1625):     at android.hardware.Camera.open(Camera.java:90)
01-07 23:53:16.912: E/AndroidRuntime(1625):     at com.android.mycamera.Preview.surfaceCreated(Preview.java:35)
01-07 23:53:16.912: E/AndroidRuntime(1625):     at android.view.SurfaceView.updateWindow(SurfaceView.java:532)
01-07 23:53:16.912: E/AndroidRuntime(1625):     at android.view.SurfaceView.dispatchDraw(SurfaceView.java:339)
01-07 23:53:16.912: E/AndroidRuntime(1625):     at android.view.ViewGroup.drawChild(ViewGroup.java:1638)
` 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:45:26.250

那可能是因为它必须在 UI 线程上，试试这个：

```
buttonClick.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        final Handler h = new Handler():
        h.post(new Runnable() {
                public void run() {
                    preview.camera.takePicture(shutterCallback, rawCallback,
                            jpegCallback);
                    h.postDelayed(this, 4000);
                    }
            });

}
}); 
```

这将在 UI 线程上每 4 秒执行一次相同的代码。不要忘记放置某种类型的标志来阻止它在您的活动暂停时执行。

# listview - 在 VB6 中将复选框列添加到 ListView

> ID：14202190
> 
> 赞同：1
> 
> 时间：2013-01-07T18:52:19.783
> 
> 标签：listview, checkbox, vb6

在我的VB6版本中，ListView控件没有`Checkboxes`属性，是否必须添加特殊的项目引用？或者我应该怎么做，根据[这个线程](http://forums.codeguru.com/showthread.php?376003-VB6-checkboxes-in-listview)属性确实存在于控件上，我已经设置的`ListView.View`财产`lvwReport`。我查看了[旧的论坛主题](http://vbcity.com/forums/t/132841.aspx)，并且该属性应该在那里，我想要实现的是与此类似的东西：

![带有复选框的示例列表视图](../Images/5ff3f36f8f0f9b281858daf88f8229ba.png)

我经常看到的一种方法是使用`lvwMyListView.ListItems(1).Checked = True`检查特定项目，但是当我使用它时，我得到的只是“未找到成员错误”。

任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T01:45:45.777

您正在使用没有**Checkboxes**属性的 VB5 版本的控件。记下属性，以便您可以重置它们。您必须先从项目的 v5 comctrl32.ocx 中删除控件，然后才能删除引用。打开组件窗口 ( `Ctrl`+ `T`)，取消选中**Microsoft Windows Common Controls 5.0** (SP?) 并选中**Microsoft Windows Common Controls 5.0 (SP6)**。如果您没有安装 VB Service Pack 6，您应该先找到它并安装它。版本 6 控件具有 checkboxes 属性。DLL 中还有其他控件，例如**Treeview**、**ProgressBar**、**Slider**和**ImageList**因此，如果您使用这些控件中的任何一个，它们也将被替换。

注意：您可以同时引用正在使用的 v5 和 v6 版本，因此您不必立即删除 v5 引用。我不会这样做，但如果您不关心，并且在您的项目中有其他 v5 控件，您可以将它与两个引用一起保留。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T19:04:38.623

您正在寻找[Checkboxes](http://msdn.microsoft.com/en-us/library/aa443527%28v=vs.60%29.aspx)属性。

# php - 使用服务器发送事件广播消息

> ID：14202191
> 
> 赞同：6
> 
> 时间：2013-01-07T18:52:26.570
> 
> 标签：php, html, sockets, broadcast, server-sent-events

我想实现一个简单的服务器发送事件应用程序，其中客户端侦听这样的 php 文件

```
<script src="eventsource.js"></script>
<script>
  var es = new EventSource('../sse.php');

  es.onmessage = function (event) {
    var data = JSON.parse(event.data);
    console.log('msg: ' + event.data);
  };

  es.onopen = function () {
    console.log('connected');
  }
</script> 
```

但是然后我需要能够广播一条消息，并且每个连接的客户端都会同时收到它。

php 文件将由另一个请求触发，它将向所有客户端“回显”一些 SSE 数据。

这可能吗？我可以采取其他路线吗？

先感谢您

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-08T21:07:29.050

PHP 在这方面不会很好。如果您有很多客户端在等待此事件，那么您将需要为每个等待的客户端提供一个 PHP 解释器实例（可能还有一个 apache 线程）。

您可能会考虑让事件驱动的服务器处理此问题。Node.JS 和 Tornado (Python) 是我过去在类似情况下使用过的两种环境。如果您使用 Node.js，您可能需要查看 socket.io ——它不使用服务器发送事件，但会让您想要的非常简单。

您可以并排拥有两个网络服务器，您当前的服务器（我假设是 Apache）和一个由您编写的用于处理等待更新的客户端。每当 PHP 服务器想要向等待的客户端发送消息时，PHP 服务器会通知另一台服务器（AMQP、ZeroMQ、redis Pub/Sub 或非公共接口上的简单 HTTP 请求都是不错的选择），然后该服务器将消息传递给任何等待的客户端。

[您可以在github](https://github.com/jeffasinger/simple-push)上看到我正在谈论的使用 node.js + socket.io（可以很容易地被 SSE 替换）的一个非常简单的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T20:47:09.363

**重要编辑：（**一天后）

经过测试，我发现这是一个非常糟糕的解决方案。

测试用例：

*   客户端：运行 8 个客户端（在一个浏览器中（Chromium，（k）ubuntu），一个选项卡，8 个 iframe）。
*   服务器 API：Apache 2.0 处理程序
*   PHP 版本 5.3.10-1ubuntu3.4

结果：

6 个 SSE 连接打开。但 2 个 SSE 连接未决。在关闭 SSE 客户端之前，服务器中的其他页面无法打开。

但是服务器可以通过 ajax 处理许多客户端（每 1 秒重复一次 ajax）。

* * *

**老答案：**

使用共享内存。

sse.php

```
<?php

header("Content-Type: text/event-stream\n\n");
header('Cache-Control: no-cache');

$key = "987654";
$permissions = 0666;
$size = 1024;

//Create or open the shared memory segment.
$segment = shm_attach($key, $size, $permissions);

$msg = ' null ';
$last_time = 0;
$time = 0;
while (1) {

    if (shm_has_var($segment, 0)) {
        $time = shm_get_var($segment, 0);
    }
    if (shm_has_var($segment, 0)) {
        $msg = shm_get_var($segment, 1);
    }
    $now = time();
    if ($last_time < $time) {
        $last_time = $time;
        echo 'data: msg(' . $msg . ') time(' . $time . ')';
        echo "\n\n";
    }

    ob_flush();
    flush();
    sleep(1);
} 
```

触发器.php

```
<?php 
if (isset($_GET['msg'])) {

    $key = "987654";// TODO: how to generate suitable key?
    $permissions = 0666;
    $size = 1024;

    $segment = shm_attach($key, $size, $permissions);

    $time = time();
    $msg = $_GET['msg'];

    shm_put_var($segment, 0, $time);
    shm_put_var($segment, 1, $msg);
    echo $time;
} 
```

**这种方式的缺点：**

1.  一秒延迟
2.  长时间打开连接。这会导致不可扩展性。

在我的实现中，sse.php 在一秒钟内只发送最后一条消息。但你可以改进它并使用数据库。（如果 trigger.php 在一秒钟内调用了 3 次，则只保存最后一条消息）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-19T23:13:44.637

对于数量限制，这是因为浏览器限制到同一服务器的连接数，您可以通过重新配置来更改。Firefox 中有相同的默认编号 (6)。

另外，我想知道如何处理服务器端的断开连接事件，如果太多的客户端使用 SSE，则有必要管理连接，即使使用其他资源（例如连接到其他服务的套接字）也是如此。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-07T19:22:20.497

所有页面**不会**同时收到相同的消息。

他们只有在连接后才会收到消息。

如果您愿意，您可以查看 WebSockets 和/或 Node.JS，它们可以允许更多“即时”消息传递。

# javascript - IE7中带有动画和绝对定位的布局滑块

> ID：14202192
> 
> 赞同：0
> 
> 时间：2013-01-07T18:52:34.653
> 
> 标签：javascript, jquery, css, internet-explorer-7

我的 Web 应用程序中有一个滑块，它是绝对定位的，并且包含一个内容 div，它也绝对定位在顶部：30px 和左、右和底部为 5px。

这是一个小提琴：http:
[//jsfiddle.net/MHNs7/](http://jsfiddle.net/MHNs7/)
源也附加了[1]。

滑块有红色背景，封闭的内容 div 是蓝色的。

在大多数浏览器中，它工作正常，但在 IE7 中，内容 div 的高度非常好 - 滑块底部没有红色“边框”。

当滑块没有动画时，这不会发生 - 如果所有 JavaScript 都被删除并且滑块最初可见，那么一切正常：http:
[//jsfiddle.net/TkZ4f/2/](http://jsfiddle.net/TkZ4f/2/)
源也被附加 [2]。

如果触发了浏览器窗口的某种“重新布局”，问题也得到了解决，但我无法很好地了解何时或为什么会发生这种“重新布局”。例如，如果我打开 IE 开发人员工具栏，就会发生这种情况。

任何提示这里发生了什么，以及如何解决它？

谢谢，
约斯特

第一个小提琴的来源（带有动画和错误）：

HTML [1]：

```
<div id="wrapper">
  <button id="toggle">toggle</button>
  <div id="slider">
    <button id="contentchange">change content</button>
    <div id="content">
      <span>Content</span>
    </div>
  </div>
</div> 
```

JS [1]：

```
jQuery(document).ready(function() { 
  var slider = jQuery('#slider');

  slider.hide();

  jQuery('#toggle').click(function() {
    var slider = jQuery('#slider');

    if (slider.is(':visible'))  {

      slider.stop().animate({
        'height': '0',
        'opacity': '0'
      }, function() {
        slider.hide();
      });
    }
    else {

      slider.show();
      slider.stop().animate({
        'height': '200px',
        'opacity': '1'
      });
    }
  });

  jQuery('#contentchange').click(function() {
    var content = jQuery('#content span');

    content.text(Math.random().toString(2).substring(10));
  });
}); 
```

CSS [1]：

```
#slider {
  position: absolute;
  width: 200px;
  height: 0;

  right: 0;
  bottom: 0;

  background-color: red;
}

#content {
  position: absolute;

  padding: 10px;

  top: 40px;
  left: 5px;
  right: 5px;
  bottom: 5px;

  background: blue;
} 
```

第二把小提琴的来源（无动画）：

HTML [2]：

```
<div id="wrapper">
  <button id="toggle">toggle</button>
  <div id="slider">
    <button id="contentchange">change content</button>
    <div id="content">
      <span>Content</span>
    </div>
  </div>
</div> 
```

没有 JS [2]。

CSS [2]：

```
#slider {
  position: absolute;
  width: 200px;
  height: 200px;

  right: 0;
  bottom: 0;

  background-color: red;
}

#content {
  position: absolute;

  padding: 10px;

  top: 40px;
  left: 5px;
  right: 5px;
  bottom: 5px;

  background: blue;
} 
```

# sql-server - 从值中删除非数字字符

> ID：14202198
> 
> 赞同：0
> 
> 时间：2013-01-07T18:52:58.487
> 
> 标签：sql-server, sql-server-2008

我正在尝试从值中删除各种字符以仅获取/显示数字字符。我可以得到诸如

```
value1: 162246xx
value2: =W035268
value3: +034567
value4: =<E04569 
```

但只有我感兴趣并得到： value1: 162246 value2: 035268 value3: 034567 value4: 04569

我可以运行什么类型的查询来检索列 X 中的所有值，不包括值中的非数字字符？谢谢你。

# c - strcpy函数的实现

> ID：14202201
> 
> 赞同：-3
> 
> 时间：2013-01-07T18:53:18.300
> 
> 标签：c

```
#include <stdio.h>
char *strcpy_(char *dst, char *src)
{
  while((*src++ = *dst++)!= '\0')
  return src;
}
main()
{
  char src_str[] = "C programming language";
  char dst_str[100];
  printf("dst_str:%s\n", strcpy_(dst_str, src_str));
} 
```

当我运行这个函数时，这个函数的输出是“编程语言”C消失了，这里发生了什么，我还有一个问题我不想使用数组来传递函数的参数意味着我不想想要使用`char src_str[] = "C programming language"`or`char dst_str[100]`而不是这个，我想使用类似`char *src_str = "C programming language"`and的指针`char *dst_str`，如果我使用，我会收到分段错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T18:56:17.807

除了以错误的方向复制之外，您还缺少`while`循环末尾的分号：

```
char *strcpy_(char *dest, char *src) {
    char *orig = dest;
    while((*dest++ = *src++)!= '\0')
        ; // <<== Very important!!!
    return orig;
} 
```

如果没有表示*空语句*的分号，则在复制第一个字符后执行`return`，这当然是不正确的。

最后，您可以跳过循环头中的零检查，如下所示：

```
while(*dest++ = *src++)
    ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T18:55:25.870

您用目标字符串覆盖源字符串。您可能希望反过来：

```
(*dst++ = *src++) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T18:56:09.857

您似乎正在复制`dest`到`src`！请注意，如果您使用了更合适的函数原型，那么编译器会发现这个错误：

```
char * strcpy(char *dest, const char *src); // <<< note the `const` !!! 
```

您还缺少一个`;`for 您的 while 循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T18:55:01.463

您将*dst*分配给*src*，而不是相反。

# dos - 按 EXIF 日期/时间排序

> ID：14202202
> 
> 赞同：0
> 
> 时间：2013-01-07T18:53:19.190
> 
> 标签：dos, rename, exif

我有一个带有 for 循环的脚本：

for /F "delims=" %%F in ('dir /B *.jpg') 调用 :renameit %%F

有什么方法可以更改 dir 命令，以便让我的文件按 EXIF 日期/时间字段排序。该脚本用于重命名图片，因此我想以图片的实际日期/时间作为排序标准来重命名它们。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:36:33.470

要使用图像中的 EXIF 数据，您必须使用第三方工具，例如[EXIFTool](http://www.sno.phy.queensu.ca/~phil/exiftool/)。

仅使用本机批处理命令，您可以仅引用文件的创建或上次修改日期/时间。

Dir 可以按创建日期或上次修改日期对文件进行排序。请参阅`dir /?` 以下内容将根据创建日期（最早的在前）对文件进行排序。

```
dir *.jpg /B /O:D /T:C 
```

您还可以在带有`for /f`循环的循环期间使用此信息，并且不使用`/b`on 选项`dir`。

还有一个`t`变量选项，其中 %%~tF 将显示相关文件的最后修改时间。StackOverflow 和网络上有很多关于如何解析所需信息的示例。

# r - 带有置信区间的箱线图并识别 r 中的特定数据点

> ID：14202205
> 
> 赞同：4
> 
> 时间：2013-01-07T18:53:53.850
> 
> 标签：r, graph, ggplot2, figure, boxplot

这是我的示例数据：

```
set.seed(1234)
myd <- data.frame (SN = 1:100, myv = round (rnorm(100, 5, 5), 2))
boxplot(myd$myv, col = "lightgreen") 
```

我想突出显示位于 4.5 到 8.2 之间的置信区间内的箱线图部分。我还想显示不属于置信区间（> 8.2 且小于 4.5）的数据点。输出如下：

![在此处输入图像描述](../Images/b53440463a7f081f6cccbe4e5862da7f.png)

我只需要实现这个目标。欢迎使用 ggplot2 或其他软件包解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T19:18:56.333

我不明白那个情节，但你可以适应差异。

```
> boxplot(myd$myv, col = "lightgreen", ylim=c(-10,18))s 
```

获得透明颜色的一种方法是使用 col2rgb 从命名颜色中提取 RGB 值，然后使用适当缩放的值传递回 rgb：

```
> col2rgb("purple")
#      [,1]
#red    160
#green   32
#blue   240
> rect(0.7, 4.5, 1.3, 8.2, col= rgb( red=160/255, green=32/255, blu=240/255, 0.4) ) 
```

需要构造一个可以选择点值的逻辑向量，也是`points`函数“计数”这些值的数量的基础：

```
> points(x=rep(1, sum( myd$myv > 8.2 | myd$myv < 4.5 )), 
         y= myd$myv[   myd$myv > 8.2 | myd$myv < 4.5 ] , 
         col="orange", pch=19, bg="orange") 
```

根据您的规格构建...：![在此处输入图像描述](../Images/6f6c7800af8a7bef0a57253fa152999d.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T20:52:30.387

这是`ggplot`答案的一个版本。从[斯文的回答开始](https://stackoverflow.com/a/14202658/892313)

```
interval <- c(4.5, 8.2)
myd <- within(myd, group <- myv >= interval[1] & myv <= interval[2]) 
```

ggplot 代码将是

```
ggplot(myd, aes(x = 0, y = myv)) +
    geom_boxplot(fill = "lightgreen") +
    annotate("rect", ymin = interval[1], ymax = interval[2],
             xmin = -1/2, xmax = 1/2, fill = "blue", alpha = 0.25) +
    geom_point(data=myd[!myd$group,], shape = 21,
               colour = "black", fill = "orange") +
    scale_x_continuous("", breaks = NULL) +
    theme_bw() 
```

箱线图本身是直截了当的。蓝色矩形是最重要的注释。这些点是在此之上绘制的，将数据限制为仅超出范围的数据（如 计算`group`）。`scale_x_continuous`摆脱了 x 轴符号，并给出`theme_bw()`了更简单的背景和网格线。

![在此处输入图像描述](../Images/b5fc0516d30c5c45640db2a95a920f54.png)

您可以通过给图层赋予 a`size`来使点变大，并且也可以进行其他调整。`geom_point`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T19:23:45.930

使用快速解决方案`gridBase`

```
set.seed(1234)
myd <- data.frame (SN = 1:100, myv = round (rnorm(100, 5, 5), 2))
boxplot(myd$myv, col = "lightgreen")
sp <- baseViewports()
pushViewport(sp$plot)
grid.rect(default.units='native', width= 1,height=8.2-4.5 ,
            gp=gpar(fill=rgb(1,0,0,0.5)), y = 3)
grid.points(x = rep(1,6) ,y=c(-4,-2,3,9,10,11),
         gp=gpar(col=rgb(1,1,0,0.5),default.units='native')) 
```

![在此处输入图像描述](../Images/fea9392d41071f647c98f824772167bc.png)

# php - 使用 HTML/PHP 表单访问数据库并输出到同一页面

> ID：14202207
> 
> 赞同：0
> 
> 时间：2013-01-07T18:54:03.577
> 
> 标签：php, html, mysql, database, forms

我有一个学校数据库，我想这样当您在数据库中搜索现有数据时，它会在输入框旁边输出。因此，无需进入新页面。这是一个有什么：

```
<form action=" " method="post">
School's name: <input type="text" name="schoolname"> <br/>
<input type="submit" name="button" value="Search">
</form>

<?php
$school      = $_POST['schoolname'];

$conn = mysql_connect("localhost", "root");
mysql_select_db("finalproject");

$sql = "select * from presentations where school like '%$school%'";

$result = mysql_query($sql, $conn) or die(mysql_error());

if ( mysql_num_rows($result) >0)
    {
    while ($newArray = mysql_fetch_array($result))
        {
        $school  = $newArray['school'];
        $date = $newArray['date'];
        $place  = $newArray['place'];
        $time = $newArray['time'];

        echo $school . ", " . $place . ", " . $date . ", " . $time . "<br />" ;
        }
    }
    else 
        {
        echo "Record not found";
        }

mysql_close($conn);
?> 
```

这是我以前用来链接到另一个页面的代码，在那里输出。但现在我只想在同一页面上输出它。我确实将一些代码从似乎不再有效的其他页面移了过来。PHP 位只输出： "0) { while ($newArray = mysql_fetch_array($result)) { $school = $newArray['school']; $date = $newArray['date']; $place = $newArray[ 'place']; $time = $newArray['time']; echo $school . ", " . $place .", " . $date .", " . $time ." " ; } } else { echo " Record not found"; } mysql_close($conn); ?>" 到我的页面输入下方。我对此真的很陌生，所以任何人的帮助将不胜感激。:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:06:19.840

您必须使用[Ajax](http://en.wikipedia.org/wiki/Ajax_(programming))向服务器发出请求，而无需重新加载页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T19:16:48.590

您可以为 ajax 部分修改这个小片段...它使用 jQuery，因此您需要将库包含到您的页面中。

```
$('#submitButtonID').click(function(){

var data = {
    schoolName: $('#schoolName').val()
};
$.ajax({
    url: "PhpPageWithQuery.php",
    type: "post",
    data: data,
    success: function(msg) {
        $('#resultsDiv).html(msg);

    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T19:33:20.157

确保您的文件扩展名是`.php`. 还要检查是否`$_POST['schooname']` `isset`以及是否继续使用 php 代码。其他一些指针，`mysql`不推荐使用扩展，因为它已被弃用。使用`mysqli`or `PDO`，如果你必须使用它，也可以清理你的输入。我把卫生用品留给你了。

```
<form action=" " method="post">
School's name: <input type="text" name="schoolname"> <br/>
<input type="submit" name="button" value="Search">
</form>

<?php

if( isset( $_POST['schoolname'] ) && strlen( trim( $_POST['schoolname'] ) ) > 0  )
{
        $school      = $_POST['schoolname'];

        $conn = mysql_connect("localhost", "root");
        mysql_select_db("finalproject");

        $sql = "select * from presentations where school like '%$school%'";

        $result = mysql_query($sql, $conn) or die(mysql_error());

        if ( mysql_num_rows($result) >0)
        {
            while ($newArray = mysql_fetch_array($result))
            {
                $school  = $newArray['school'];
                $date = $newArray['date'];
                $place  = $newArray['place'];
                $time = $newArray['time'];

                echo $school . ", " . $place . ", " . $date . ", " . $time . "<br />" ;
            }
        }
        else 
        {
            echo "Record not found";
        }

        mysql_close($conn);
}
?> 
```

# facebook-android-sdk - com_facebook_android.apk

> ID：14202209
> 
> 赞同：0
> 
> 时间：2013-01-07T18:54:10.033
> 
> 标签：facebook-android-sdk

我了解 com_facebook_android.apk 旨在安装在模拟器（没有完整的 Facebook 应用程序）上以便进行测试。

我遇到过运行我的应用程序的人没有在他们的手机上安装 Facebook 的情况。将 com_facebook_android.apk 与我的应用程序捆绑在一起是否合理，所以无论安装了什么，我都可以保证我的应用程序可以访问 Facebook？

还是 com_facebook_android.apk 只是一种测试？

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:25:51.110

我们包含的 APK 仅供开发人员测试原生 SSO（通过 Facebook 为 Android 验证您的应用程序）。如果用户没有安装本机 Facebook 应用程序，则会弹出一个 WebView 并提示他们通过该窗口登录。

不要将 Facebook APK 与您的应用程序捆绑在一起，它仅用于测试您的配置是否正确以使本机 SSO 正常工作。

# objectbrowser - 为什么对象浏览器找不到 ole32 函数？

> ID：14202212
> 
> 赞同：0
> 
> 时间：2013-01-07T18:54:20.340
> 
> 标签：objectbrowser

这可能是一个愚蠢的问题 - 就这样吧，我是新手。但我正在尝试实现一个代码片段

```
pszReturn = (char*)::CoTaskMemAlloc(ulSize); 
```

当我尝试输入函数 CoTaskMemAlloc 时，Intellisense 找不到它。现在我查了一下，我相信它位于 ole32.dll 中（我正在虚拟 WinServer 64 位 Visual Studio 2012 上“开发”）。

为什么 ole32 没有加载？是否与我的项目未注册COM有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:24:14.760

只需要包含它的头文件（objbase.h）！现在一切都很好......

# c# - 持续交付工具或框架中的 SQL 脚本

> ID：14202214
> 
> 赞同：0
> 
> 时间：2013-01-07T18:54:29.183
> 
> 标签：c#, sql-server, powershell, tfs, continuous-integration

我不确定这个问题是否重复，但我无法找到答案

我正在尝试实施持续交付最佳实践并自动部署我的 SQL 脚本，我正在使用 SQL Server 2008 和 TFS 2012

项目中的大部分数据库脚本都是按顺序编号的，每一个都是原子的

我的 SQL 脚本实际上存储在 TFS 中以及数据库项目中的不同 Visual Studio 解决方案中。

而且我想找到一种一致的方式（最佳实践），以便从这些数据库项目中自动获取 SQL 脚本并根据所选环境运行它们。

是否有任何框架或工具可以帮助我实现这一目标？

或者你们能指出我正确的方向吗？

实际上，我们正在寻找一种一致的、标准的和可重用的方法来在组织内完成此任务，因为一旦我们能够为一个项目实施此解决方案，我们就计划对所有其他内部项目执行相同的操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:08:15.150

DBDeploy.NET 很好用；它使用编号脚本来应用数据库更改。如果您编写回滚脚本，它支持回滚。我在最近的两个项目中使用过它。[http://sourceforge.net/projects/dbdeploy-net/](http://sourceforge.net/projects/dbdeploy-net/)。

# vb.net - 实体框架、异步和 WPF 线程。我到目前为止，但卡在线程上

> ID：14202215
> 
> 赞同：0
> 
> 时间：2013-01-07T18:54:38.830
> 
> 标签：vb.net, multithreading, entity-framework-5, async-await

我希望有人能指出我正确的方向；我想我已经接近了，但我从来没有做过线程并且一直停留在语法/概念上。我相信第一部分正在工作，但是我有一个关于线程所有者的可爱 WPF 错误。我知道不知何故我已经用 Dispatcher 或 BackGroundWorker 解决了这个问题，但时间越来越短了——今晚我要碰壁，无法独自解决。这是我失败的部分：

```
 Private Sub FilterData(viewSource As CollectionViewSource, Filter As Expression(Of Func(Of person, Boolean)))
    _repository.GetFilteredPersons(Filter)

    viewSource.Source = _repository.FilteredPersons
End Sub 
```

现在下一点，我相信要么是 A) 工作，要么是 B) 愚弄我，因为我还没有证明:)。

```
 Public Property FilteredPersons() As ObservableCollection(Of Person)

    Public Async Sub GetFilteredPersons(criteria As Expression(Of Func(Of Person, Boolean)))
        FilteredPersons = Await FilterPersons(criteria)
    End Sub

    Private Async Function FilterPersons(criteria As Expression(Of Func(Of Person, Boolean))) As Task(Of ObservableCollection(Of Person))
        Return Await Run(Function()
                             Dim res = New ObservableCollection(Of Person)

                             _context = New caredocsSQLEntities
                             Dim test = _context.Persons.Where(criteria).Select(Function(o) New With { _
                                  .Person = o, _
                                  .events = o.events.Where(Function(e) e.eventDateTime >= Startdate And e.eventDateTime <= Enddate).OrderByDescending(Function(x) x.eventDateTime)
                             })

                             For Each t In test
                                 res.Add(t.Person)
                             Next
                             Return res
                         End Function
        )
    End Function 
```

最后，确切的错误是`The calling thread cannot access this object because a different thread owns it`。

一旦我有机会再次吃饭和阅读，我将在几个小时内再次解决这个问题。但是，如果有人能告诉我我没有完全理解的明显愚蠢，我将不胜感激！

上下文是具有子导航过滤属性的 Entity Framework 5 ObservableCollection - 我认为代码并没有说清楚:)。

谢谢 ：）。

根据要求，我得到了例外。这发生在存储库代码中。线程的东西是一个红鲱鱼。

```
System.InvalidOperationException occurred
HResult=-2146233079
Message=The calling thread cannot access this object because a different thread owns it.
Source=System.Data.Entity
StackTrace:
   at System.Data.Objects.ELinq.QueryParameterExpression.EvaluateParameter(Object[] arguments)
   at System.Data.Objects.ELinq.ELinqQueryState.GetExecutionPlan(Nullable`1 forMergeOption)
   at System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption)
   at System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable<T>.GetEnumerator()
   at System.Data.Entity.Internal.Linq.InternalQuery`1.GetEnumerator()
   at                   System.Data.Entity.Infrastructure.DbQuery`1.System.Collections.Generic.IEnumerable<TResult>.GetEnumerator() at SomeEntity.Models.PersonRepository._Closure$__2._Lambda$__7() in E:\Dropbox\Work         Experimental\SomeEntity - Copy\SomeEntity\Models\PersonRepository.vb:line 30 
```

内部异常：

这是整个异常，它发生在这里：

```
 For Each t In test
          res.Add(t.Person)
  Next 
```

我昨晚浏览了这些文章，虽然我对它的理解更好一些，但现在我仍在努力将它应用于存储库类。这通常是语法混乱的组合，而我并没有完全理解。我有一种感觉，我应该能够将 getfiltered 居民中的部分操作拆分为 await 任务，但还没有设法弄清楚。今天的工作——如果实体框架可以这样使用！

# sql-server - 稀疏 Varchar（最大值）

> ID：14202225
> 
> 赞同：3
> 
> 时间：2013-01-07T18:55:22.087
> 
> 标签：sql-server

我有一个 Microsoft SQL Server 2008 表，其中有一个很少使用的 Varchar(max) 字段。将该字段移动到另一个表并指向该表是否更有意义？

或者如果 Varchar(max) 字段包含 null，它不会占用大量空间吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T18:59:21.747

否。SQL Server 已经为 BLOB 类型使用了单独的分配单元，请参阅[表和索引组织](http://msdn.microsoft.com/en-us/library/ms189051%28v=sql.105%29.aspx)。NULL 值在一行中只占用一位，请参阅[记录剖析](http://www.sqlskills.com/blogs/paul/inside-the-storage-engine-anatomy-of-a-record/)。

通过创建单独的表会浪费更多空间，并且检查列是否为 NULL 或具有值的成本要高得多。此外，列值可以针对较小的值进行优化和拉入行内，如果它们适合，提供显着更快的访问。总的来说，不要试图对引擎已经在推动极限的东西进行微优化，以使其尽可能高效......

如果*表*是稀疏的（这意味着它有许多（数百、数千）列，其中每行中有许多为 NULL），那么您可以使用[sparse columns](http://msdn.microsoft.com/en-us/library/cc280604.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T18:59:25.003

来自[http://msdn.microsoft.com/en-us/library/aa224016(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa224016(v=sql.80).aspx)：

> varchar 数据类型是可变长度数据类型。小于列大小的值不会右填充到列大小

varchar 仅包含长度 + 内容。

可空字段使用额外的位来存储空/非空状态，因此记录本身不会占用额外空间。

# jquery - 克隆元素不起作用jquery

> ID：14202229
> 
> 赞同：-3
> 
> 时间：2013-01-07T18:55:29.053
> 
> 标签：jquery, clone

HTML

```
<h2>Click Here</h2>
<div class="holder">
  <a href="#">One</a>
  <a href="#">Two</a>
  <a href="#">Three</a>
</div> 
```

我试图在最后一个之后一次克隆一个锚。最终结果应该是像一二三一二三等。我的想法是有一个等于第一个索引 0 的变量，这是第一个锚。并且在循环之后，如果该变量到达索引 3 以返回 0

```
var click = $(".holder a")[0];
var length = $(".holder a").length;

$("h2").click(function () {
    for (var click; click < length; click++) {
        if (click == $(".holder a")[3]) {
            click = $(".holder a")[0];
            $(click).insertAfter(".holder a:last");
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T19:00:42.780

我认为这是您想要达到的效果。

```
var $holder = $('.holder');

$('h3').on("click", function(){

    $holder.find('a').each(function(){
        $holder.append($(this).clone());
    });

}); 
```

# php - 如何在我的网站上集成微博登录？

> ID：14202232
> 
> 赞同：2
> 
> 时间：2013-01-07T18:55:54.887
> 
> 标签：php, login, social-networking, weibo

我在我们的网站上使用 facebook 功能登录。中国社交网络微博有这样的功能吗？

我在哪里可以阅读有关微博 API 或登录集成的信息？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T20:04:23.427

检查他们的 API 参考应该会有所帮助： http: [//open.weibo.com/wiki/API%E6%96%87%E6%A1%A3/en](http://open.weibo.com/wiki/API%E6%96%87%E6%A1%A3/en)

# android - rndis0 设备是如何创建的

> ID：14202233
> 
> 赞同：3
> 
> 时间：2013-01-07T18:56:00.613
> 
> 标签：android, android-networking, tethering

当我们进入android手机的设置->无线和网络选项并检查usb tether选项时，立即创建一个网络设备rndis0，我们可以从adb shell netcfg看到

我基本上想知道这个网络设备是如何创建的，通过设置应用程序调用哪个api来创建rndis0接口

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-22T15:05:35.303

`rndis0`[是用作网络共享的NIC](http://en.wikipedia.org/wiki/Network_interface_controller)时 USB 端口的名称。它可能以[RNDIS](http://en.wikipedia.org/wiki/RNDIS)协议命名，它在与计算机连接时使用。我从未能够找到以编程方式修改它的非 root 方法（因此从未找到任何 API 方法），我也没有找到任何可以修改它的非 root 应用程序。

为了正确回答您的问题，我需要**确切地**知道您要做什么，因为存在以不太直接的方式使用 Android 网络接口的有根和无根方法；下面列出了一些包含示例的链接。

以编程方式打开/关闭 USB 网络共享：
[在 android 上以编程方式启用/禁用 USB 或 Wifi 网络](https://stackoverflow.com/questions/3531801/enable-disable-usb-or-wifi-tethering-programmatically-on-android)
[共享 从代码开始/停止内置 Wi-Fi/USB 网络共享？](https://stackoverflow.com/questions/3436280/start-stop-built-in-wi-fi-usb-tethering-from-code)

以编程方式打开/关闭 WIFI：
[如何以编程方式在 Android 设备上关闭 WiFi？](https://stackoverflow.com/questions/8863509/how-to-programmatically-turn-off-wifi-on-android-device)

如果你有 root 并且不介意使用 Linux 终端弄脏你的手，你可以尝试手动设置它。但是，您的两个主要问题是 1) 一些 Android 内核只是删除了主要的 Linux 功能，以及 2) 即使您手动导入了一些默认功能（可能借助[Busybox](https://play.google.com/store/apps/details?id=stericson.busybox&hl=en)之类的工具）Android 并不总是遵循所有 Linux 规则和普通电脑一样。例如，我曾经尝试设置我的 S2 的 DHCP 范围（我在基于 Linux 的计算机上的各种发行版上轻松完成了此操作），但无论我多么努力，手机都拒绝遵守我的规则。另一方面，像 iptables 这样的工具从来没有让我失望过。

一些有用的 Linux 链接：

[ArchWiki](https://wiki.archlinux.org/) - 我所学的所有 Linux（Ubuntu、CentOS、Arch Linux、一些 Android、vanilla Linux..）的 90% 都来自这里。它们通常比那些发行版本身涵盖的更多细节涵盖其他发行版。

[iptables](http://www.cyberciti.biz/faq/rhel-fedorta-linux-iptables-firewall-configuration-tutorial/)，[iptables](https://wiki.archlinux.org/index.php/Iptables)，[更多iptables..](https://stackoverflow.com/questions/4577268/iptables-in-android)

[一般网络配置](https://wiki.archlinux.org/index.php/Network_Configuration)，[ip路由](http://www.cyberciti.biz/faq/howto-linux-configuring-default-route-with-ipcommand/)，[更多路由..](https://wiki.archlinux.org/index.php/Network_Configuration)

请记住，上述某些链接中的大部分信息不适用于 Android，因为 Android 仅实现了部分功能。不过，这绝对值得一读。

希望有帮助。

# linq - LINQ 查询以查找包含表的集合中的位置

> ID：14202239
> 
> 赞同：0
> 
> 时间：2013-01-07T18:56:30.913
> 
> 标签：linq, asp.net-mvc-4, entity-framework-5

我在编写语句以返回连接（包含）表与项目集合匹配的结果列表时遇到问题。

我正在使用 EF 5.0 实体模型。我有一个简单`VendorProfile`的表，其中包含`VendorCategories`他们选择的可以加入的 PK/FK 表`ProfileID`。

我无法弄清楚如何仅在 VendorProfiles 具有与集合匹配的 VendorCategories （从表单帖子中传递）的位置返回结果。我试图构建一个可以处理多个搜索条件的动态搜索功能，除了第一个我需要过滤结果的地方之外，所有搜索条件都有效`criteria.categories`。

```
public class CustomSearchCriteria
{
    public string name { get; set; }
    public string company { get; set; }
    public DateTime? startDate { get; set; }
    public DateTime? endDate { get; set; }
    public int[] categories { get; set; }
}

public IEnumerable<VendorProfile> Search(CustomSearchCriteria criteria)
{
    IQueryable<VendorProfile> query = _db.VendorProfiles
        .Include("VendorCategories")
        .OrderBy(v => v.ProfileID);

    if (criteria.categories != null)
        query = query.Where(v => v.VendorCategories.Contains(criteria.categories));

    if (criteria.name != string.Empty)
        query = query.Where(v => v.Name.Contains(criteria.name));

    if (criteria.company != string.Empty)
        query = query.Where(v => v.CompanyName.Contains(criteria.company));

    if (criteria.startDate != null && criteria.endDate != null)
        query = query.Where(v => v.DateCreated > criteria.startDate && v.DateCreated < criteria.endDate);

        return query.ToList();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:05:58.977

[尝试使用Queryable.All()](http://msdn.microsoft.com/en-us/library/bb534754.aspx)执行以下操作，并告诉我它是如何工作的：

编辑#1：更改查询以匹配变量类型，假设`criteria.categories`包含 VendorCategoryID 的集合。

编辑#2：根据评论将查询更改为使用 Any() 而不是 All()

```
query = query.Where(v => criteria.categories.AsQueryable().Any(cat => v.VendorCategories.Select(vendCat => vendCat.VendorCategoryID).Contains(cat)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:45:15.093

```
// assumes v.VendorCategories is int[]
if (criteria.categories != null && criteria.categories.Any())
    query = query.Where(v => v.VendorCategories.All(id => criteria.categories.Contains(id))); 
```

# c - 减去 2 size_t 的类型是什么？

> ID：14202241
> 
> 赞同：23
> 
> 时间：2013-01-07T18:56:33.780
> 
> 标签：c, size-t

应该使用 C 中的哪种类型来表示两个对象大小之间的差异？

如未`size_t`签名，类似

```
size_t diff = sizeof (small_struct) - sizeof (big_struct); 
```

显然是不正确的，在我看来，没有真正的签名等价物。

`ptrdiff_t`听起来有点诱人，但是

1.  就像它的名字所说的那样，它是用来减去指针的。
2.  我已经读过，例如像 DOS 这样的分段平台具有 64k 的最大对象大小，可以用 16 位表示。然而，远指针由一个 16 位段值和一个 16 位偏移值组成。在这样的平台上不是也可以`ptrdiff_t`使用 32 位吗？如果是这样，两个对象之间的大小差异只需要 16 位，但使用 ptrdiff_t 会给你一个 32 位宽的变量，使其不是最佳的。

那么，使用这种值的合适的便携式类型是什么？

`Edit:` 我知道 ssize_t，但它是

1.  不是标准 C 的一部分。
2.  实际上不是用于这种用途，而是用于返回大小或（负）错误值。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-07T19:07:26.373

当我真的担心这样的溢出问题时（尤其是在模算术中，“负”值包含在 以外的某个地方时`~0`）我只是将其分为两种情况：

```
if (a > b) {
    size_t diff = a - b;
} else {
    size_t diff = b - a;
    // code here subtracts diff rather than adds it, etc.
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-07T19:11:42.423

对于您正在尝试做的事情，没有一种标准数据类型可以保证 100% 安全。作为证据，想象 if`size_t`真的是 just `uint64_t`，这是完全可能的。然后没有标准的 C 数据类型可以保证具有匹配的正范围`uint64_t`并处理负值。

**因此，对您的问题的直截了当的回答是“没有数据类型”（假设严格遵守您似乎想要的标准 C）。**

但是，您不清楚您的用例，并且您可能能够利用模运算来处理“负”值。例如，[以下代码](http://ideone.com/L4Y1ih)`d2`由于模算术而导致`4`，允许代码像`size_t`签名一样工作：

```
#include <stdio.h>
#include <stdint.h>

int main()
{
    size_t d1 = sizeof(int32_t) - sizeof(int64_t);
    size_t d2 = sizeof(int64_t) + d1; // Add difference (even if d1 is "negative"*)

    printf("d1: %zu\n", d1);
    printf("d2: %zu\n", d2);

    return 0;
    // * By "negative" I mean that d1 would be negative if size_t were signed
} 
```

在您的情况下，模块化算术可能对您来说还不够，但对其他人来说可能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T19:10:45.793

没有可以保存一个`size_t`值的所有值的有符号 C 整数类型。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-03-22T16:35:44.373

你可以这样做：

```
size_t diff = std::abs(static_cast <int> (sizeof (small_struct) - sizeof (big_struct))); 
```

# java - 意外的 BigDecimal 结果。1 除以 3 得到 1。不确定为什么

> ID：14202246
> 
> 赞同：2
> 
> 时间：2013-01-07T18:56:44.740
> 
> 标签：java, bigdecimal, rounding

> **可能重复：**
> [BigDecimal 的加法](https://stackoverflow.com/questions/1846900/addition-for-bigdecimal)

我觉得我错过了一些明显的东西，但无法弄清楚它是什么。我试图用来`BigDecimal`获取两个数字之间除法的小数部分。一个很简单的例子，1.00 除以 3.00 应该是 0.(3) 重复。但是，我一直得到 1.00 的结果。

```
BigDecimal num = new BigDecimal(1.00).setScale(2);
BigDecimal divisor = new BigDecimal(3.00).setScale(2);

num.divide(divisor, BigDecimal.ROUND_HALF_UP);

System.out.print(num); 
```

我的结果是 1.00，我不知道为什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-07T18:59:37.733

的结果`num.divide`被忽略。您需要将其设置回变量

```
 BigDecimal num = new BigDecimal(1.00).setScale(2);
    BigDecimal divisor = new BigDecimal(3.00).setScale(2);

    BigDecimal result = num.divide(divisor, BigDecimal.ROUND_HALF_UP);

    System.out.print(result); 
```

这打印`0.33`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T19:00:24.453

BigDecimal 是不可变的。您需要将结果分配给变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T19:00:24.110

`num.divide`不改变`num`它返回结果。

尝试：

```
num = num.divide(divisor, BigDecimal.ROUND_HALF_UP) 
```

# php - MYSQL PHP 根据日期统计列

> ID：14202248
> 
> 赞同：0
> 
> 时间：2013-01-07T18:56:48.397
> 
> 标签：php, mysql

我正在按总计、今天、昨天、周、月和年跟踪文章视图，我想对它们进行相应的排序
我有一个跟踪每个值的视图表，ID 是文章：

![MYSQL命中表](../Images/3587c3d01f6efb6da2595b5ccbeff0fc.png)

当特定文章获得浏览量时，我将值递增到 Total、Today、Week、Month 和 Year。
到目前为止一切都很好..
但是明天早上来的时候，最好的统计方法是什么？..

例如：我需要将昨天的今天列复制到昨天列，如果星期发生了变化，我需要删除所有行在周（也有相应的月份和年份） -

我意识到我可以制作另一个表格来跟踪它是哪一天/一周/一个月/一年，并将其与 PHP 进行比较，然后使用 PHP 进行更改，但有没有更好的方法，也许我不知道？MYSQL 缓存，cronjobs 什么的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:17:24.237

如果您的网站关闭一天会怎样？谁修复了您数据库中损坏的进度？如果 1 月 31 日星期日错过更新怎么办？你所有的价值观都将消失，并享受修复它的乐趣。

您应该只将视图计数存储在*一个*地方，并操纵该数据以满足您的需求。

您应该具有的表结构：

```
TABLE Articles
  ID INT PK
  ...

TABLE Viewcount
  Date        DATE  PK
  Article_ID  INT   PK
  NumViews    INT 
```

要更新观看次数：

```
INSERT INTO Viewcount (Date, Article_ID, NumViews)
  VALUES(TODAY(), 12345, 1)
  ON DUPLICATE KEY UPDATE NumViews=NumViews+1 
```

并得到你的计数：

```
SELECT ar.ID,
  today.numviews as 'today',
  yesterday.numviews as 'yesterday',
  thisweek.sum as 'week',
  thismonth.sum as 'month',
  thisyear.sum as 'year',
  alltime.sum as 'alltime'
FROM Articles ar LEFT JOIN (
  SELECT Article_id, NumViews
  FROM Viewcount
  WHERE Date = TODAY()
) 'today'
ON ar.ID = today.Article_ID
LEFT JOIN (
  SELECT Article_id, NumViews
  FROM Viewcount
  WHERE Date = DATE_SUB(TODAY(), INTERVAL 1 DAY)
) 'yesterday'
ON ar.ID = yesterday.Article_ID
LEFT JOIN (
  SELECT Article_id, SUM(NumViews) 'sum'
  FROM Viewcount
  WHERE YEAR(Date) = YEAR()
    AND WEEK(Date) = WEEK()
  GROUP BY Article_ID
) 'thisweek'
ON ar.ID = thisweek.Article_ID
LEFT JOIN (
    SELECT Article_id, SUM(NumViews) 'sum'
  FROM Viewcount
  WHERE YEAR(Date) = YEAR()
    AND MONTH(Date) = MONTH()
  GROUP BY Article_ID
) 'thismonth'
ON ar.ID = thismonth.Article_ID
LEFT JOIN (
    SELECT Article_id, SUM(NumViews) 'sum'
  FROM Viewcount
  WHERE YEAR(Date) = YEAR()
  GROUP BY Article_ID
) 'thisyear'
ON ar.ID = thisyear.Article_ID
LEFT JOIN (
    SELECT Article_id, SUM(NumViews) 'sum'
  FROM Viewcount
  GROUP BY Article_ID
) 'alltime'
ON ar.ID = alltime.Article_ID 
```

或者只是以编程方式为您想要获取的时间段执行每个查询。

# grails - 如何为 Grails 集成测试创建示例数据源？

> ID：14202250
> 
> 赞同：4
> 
> 时间：2013-01-07T18:56:55.583
> 
> 标签：grails, datasource, integration-testing

在 Grails 2.1.x 中，我想为集成测试创建一个额外的数据源，以便我可以验证我的服务是否正在从用户指定的数据源动态提取数据。目前我的测试非常简单，例如：

```
@Test
void "get Action Types by data source name returns all action types"() {
    new ActionCache(actionType: 'Action Type 1').test.save()
    new ActionCache(actionType: 'Action Type 2').test.save()
    new ActionCache(actionType: 'Action Type 3').save()

    def result = reportService.getActionTypesByDataSource('test')
    assert result.size() == 2
} 
```

如果我在名为 DataSource.groovy 的测试环境中配置一个新的数据源，我可以通过测试`test`，但是新的数据源会出现在我的所有测试中；单元和集成。理想情况下，我想创建一个新的数据源作为集成测试的一部分，使用如下：

```
def grailsApplication

@Before
void setUp() {
    grailsApplication.config.dataSource_test = {
        dbCreate = "update"
        url = "jdbc:h2:mem:testDb;MVCC=TRUE"
    }
} 
```

但似乎数据源是在运行集成测试之前加载的，我不知道如何添加到它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T18:53:32.743

听起来自定义环境可能是要走的路。在 DataSource.groovy 中，您应该看到如下所示的部分：

```
test {
    dataSource {
        dbCreate = "update"
        url = "jdbc:h2:mem:testDb;MVCC=TRUE;LOCK_TIMEOUT=10000"
    }
} 
```

我会在测试块之后添加一个名为 integrationTest 的自定义环境，如下所示：

```
integrationTest {
    dataSource {
        dbCreate = "update"
        url = "jdbc:h2:mem:myinttestDb;MVCC=TRUE;LOCK_TIMEOUT=10000"
    }
} 
```

要在这个自定义环境中运行，您可以像这样启动 grails 应用程序：

```
grails -Dgrails.env=integrationTest run-app 
```

希望这可以帮助。

# ios - 加载进度条IOS

> ID：14202252
> 
> 赞同：-2
> 
> 时间：2013-01-07T18:57:03.973
> 
> 标签：ios, progress-bar, progress

```
-(void)startConnection
{ 
    NSString *urlString = GET_EVENTLIST_URL_STRING;

    NSURL *url = [NSURL URLWithString:[urlString stringByAddingPercentEscapesUsingEncoding:NSISOLatin1StringEncoding]];
    [urlString UTF8String];

    if (!url)
    {
        NSString *reason = [NSString stringWithFormat:@"Could not create URL from string %@", GET_EVENTLIST_URL_STRING];
        [self.delegate didGetEventListInCorrect:reason];
        return;
    }

    theRequest = [NSMutableURLRequest requestWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval: 30.0];

    // Set the HTTP method of the request to POST
    [theRequest setHTTPMethod:@"POST"];

    [theRequest setHTTPBody:[urlString dataUsingEncoding:NSUTF16StringEncoding]];

    if (!theRequest)
    {
        NSString *reason = [NSString stringWithFormat:@"Could not create URL request from string %@", GET_EVENTLIST_URL_STRING];
        [self.delegate didGetEventListInCorrect:reason];
        return;
    }
    theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];

    if (!theConnection)
    {
        NSString *reason = [NSString stringWithFormat:@"URL connection failed for string %@", GET_EVENTLIST_URL_STRING];
        [self.delegate didGetEventListInCorrect:reason];
        return;
    }

    if (theConnection)
    {
        myData = [[NSMutableData alloc]init];

    }

}

#pragma mark - Methods connection
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)aResponse
{
    // receivedData is an instance variable declared elsewhere.
    [myData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)theData
{
    // Append the new data to receivedData.
    // receivedData is an instance variable declared elsewhere.
    [myData appendData:theData];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    // finished downloading the data, cleaning up
    [self.delegate didGetEventListCorrect:myData ];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    [self.delegate didGetEventListInCorrect:@"Failed Connection"];
}

#pragma mark - Main method of LoginUrlConnection with NSURLRequest and NSURLConnection
+ (id) connectionGetEventList:(id<GetEventListURLConnectionDelegate>)aDelegate
{
    EventListURLConnection *getEventListUrlConnection = [[self alloc]init];

    getEventListUrlConnection.delegate = aDelegate;

    [getEventListUrlConnection startConnection];

    return getEventListUrlConnection;
} 
```

大家好， 这是我的 url 连接类，在我的视图控制器中，我像这样调用这个列表：“ eventconnection = [EventListURLConnection connectionGetEventList:self];” .. 我需要使用一个进度条来显示加载过程，就像这样“ [http://www.google.com.tr/imgres?hl=en&sa=X&tbo=d&biw=1063&bih=502&tbm=isch&tbnid=3fZwJc8SC_xoPM:&imgrefurl=http://www.hongkiat.com/blog/most-wanted-freebies- web-designers/&docid=VLaTiYV3nRfeXM&imgurl=http://media02.hongkiat.com/freebies-for-web-designers-2011/progress-bar.jpg&w=580&h=250&ei=jxnrUMWpOKb24QTn54CQCg&zoom=1&iact=hc&vpx=698&vpy=185&dur=704& 148&hovw=342&tx=162&ty=102&sig=114441653047551513554&page=2&tbnh=147&tbnw=319&start=16&](http://www.google.com.tr/imgres?hl=en&sa=X&tbo=d&biw=1063&bih=502&tbm=isch&tbnid=3fZwJc8SC_xoPM:&imgrefurl=http://www.hongkiat.com/blog/most-wanted-freebies-web-designers/&docid=VLaTiYV3nRfeXM&imgurl=http://media02.hongkiat.com/freebies-for-web-designers-2011/progress-bar.jpg&w=580&h=250&ei=jxnrUMWpOKb24QTn54CQCg&zoom=1&iact=hc&vpx=698&vpy=185&dur=704&hovh=148&hovw=342&tx=162&ty=102&sig=114441653047551513554&page=2&tbnh=147&tbnw=319&start=16&ndsp=14&ved=1t:429,r:19,s:0,i:142)ndsp=14&ved=1t:429,r:19,s:0,i:142 " ..我该如何管理这个？有什么想法吗？在此先感谢 ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:15:31.103

您可以使用 UISlider 来跟踪加载进度。因此，假设您使用 myData 保存内容，FILE_SIZE 是要下载的内容的字节大小，progressView 是 UISlider（实际上它也可以是包含 UISlider 子视图和指定下载百分比的 UILabel 子视图的自定义视图)，然后下面的代码片段应该这样做......

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [self.myData appendData:data];
    float percentDownloaded = (float)[self.myData length]/FILE_SIZE;
    NSLog (@"PERCENT DOWNLOADED IS %d %f : %f",[self.myData length], percentDownloaded,percentDownloaded*100);
    [self.progressView setProgress:percentDownloaded];

} 
```

# ios - pod install -bash: pod: 找不到命令

> ID：14202255
> 
> 赞同：320
> 
> 时间：2013-01-07T18:57:07.627
> 
> 标签：ios, cocoapods, pod-install

我`pod`前段时间安装的。但是，它已停止工作，因此我正在再次解决[此问题](https://github.com/CocoaPods/CocoaPods/wiki/Creating-a-project-that-uses-CocoaPods)。

但是，我几乎立即在这里遇到了一个问题：

```
pod install
-bash: pod: command not found 
```

任何建议为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：567
> 
> 时间：2013-01-07T21:09:19.210

好的，找到问题了。前段时间我升级了 Ruby 并炸毁了一大堆宝石。解决方案：

```
sudo gem install cocoapods 
```

对于非 sudo 使用：

```
export GEM_HOME=$HOME/.gem
export PATH=$GEM_HOME/bin:$PATH
gem install cocoapods --user-install 
```

* * *

## 回答 #2

> 赞同：94
> 
> 时间：2015-10-07T10:06:32.327

**在 OS X 10.11 上安装 CocoaPods**

这些说明已在所有 beta 版和 El Capitan 的最终版本上进行了测试。

**自定义 GEM_HOME**

这是您收到上述错误时的解决方案

```
$ mkdir -p $HOME/Software/ruby
$ export GEM_HOME=$HOME/Software/ruby
$ gem install cocoapods
[...]
1 gem installed
$ export PATH=$PATH:$HOME/Software/ruby/bin
$ pod --version
0.38.2 
```

* * *

## 回答 #3

> 赞同：78
> 
> 时间：2017-02-07T07:11:12.560

此步骤正常工作。

**吊舱安装**

[ 1 ] 打开终端并输入：

```
sudo gem install cocoapods 
```

Gem 将安装在 System 库中的 Ruby 中。或者在 10.11 Mac OSX El Capitan 上尝试，输入：

```
sudo gem install -n /usr/local/bin cocoapods 
```

如果出现错误“activesupport requires Ruby version >= 2.xx”，则首先通过在终端中键入来安装最新的 active support。

```
sudo gem install activesupport -v 4.2.6 
```

[ 2 ] 安装完成后会有很多提示信息，请阅读，如果没有发现错误，则表示cocoa pod安装完成。接下来，您需要设置 cocoa pod master repo。输入终端：

```
pod setup 
```

等待它会下载主仓库。大小非常大（2016 年 12 月为 370.0MB）。所以这可能是一段时间。您可以通过打开 Activity 并转到 Network 选项卡并搜索 git-remote-https 来跟踪下载。或者，您可以尝试向命令中添加详细信息，如下所示：

```
pod setup --verbose 
```

[ 3 ] 完成后会输出“Setup Complete”，您可以创建您的 XCode 项目并保存它。

[ 4 ] 然后在终端 cd 到“您的 XCode 项目根目录”（您的 .xcodeproj 文件所在的位置）并键入：

```
pod init 
```

[ 5 ] 然后通过输入终端打开项目的 podfile：

```
open -a Xcode Podfile 
```

[ 6 ] 您的 Podfile 将以文本模式打开。最初，那里会有一些默认命令。您可以在此处添加项目的依赖项。例如，在 podfile 中，键入

```
/****** These are Third party pods names ******/
pod 'OpenSSL-Universal'
pod 'IQKeyboardManager'
pod 'FTPopOverMenu'
pod 'TYMActivityIndicatorView'
pod 'SCSkypeActivityIndicatorView'
pod 'Google/SignIn'
pod 'UPStackMenu' 
```

（例如，将库添加到您的项目）。

完成对 podfile 的编辑后，保存并关闭 XCode。

[ 7 ] 然后通过输入终端将 pod 安装到您的项目中：

```
pod install 
```

根据您为项目添加到 podfile 中的库的数量，完成此操作的时间会有所不同。完成后，会有一条消息说

“Pod 安装完成！Podfile 中有 X 个依赖项，总共安装了 X 个 Pod。”

* * *

## 回答 #4

> 赞同：54
> 
> 时间：2013-08-16T04:29:02.333

安装 gem 后必须重新启动终端。或者您可以简单地打开一个新选项卡终端来修复。

* * *

## 回答 #5

> 赞同：46
> 
> 时间：2018-10-25T13:14:17.650

对于 macOS：

```
brew install --cask cocoapods 
```

原始答案（已过时）：

```
brew install cocoapods
brew cask install cocoapods-app 
```

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2013-09-30T20:27:22.267

我遇到了同样的问题，运行安装了 Ruby 2 并使用而不是系统 ruby​​ 的 Mountain Lion。

以前，我添加`PATH=/usr/local/bin:$PATH`到 my`~/.bash_profile`中是为了确保由 安装的东西（`homebrew`包括 Ruby 2）优先于系统安装的二进制文件。

无论如何，在这种情况下，我注意到 cocoapods 不会安装他们的“pod”二进制文件， `/usr/local/bin`而是安装在`/usr/local/Cellar/ruby/2.0.0-p247/bin/`

所以我添加到我的 .bash_profile 中`PATH=$PATH:/usr/local/Cellar/ruby/2.0.0-p247/bin/` ，现在 cocoapods 就像一个魅力一样工作。

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2021-07-08T06:51:41.833

对于 M1mac，人们首先安装 cocoapods

```
brew install cocoapods 
```

如果你是为 ios react-native 做这个

```
pod install 
```

* * *

## 回答 #8

> 赞同：14
> 
> 时间：2016-10-29T07:36:47.177

1.  通过此命令卸载所有 cocopods 实例

    ```
    $sudo gem uninstall cocoapods 
    ```

2.  `sudo gem install -n /usr/local/bin cocoapods`

3.  `sudo chmod +rx /usr/local/bin/`

* * *

## 回答 #9

> 赞同：11
> 
> 时间：2014-09-03T08:22:46.747

试试这个：

```
sudo gem install cocoapods -V 
```

并且您必须使用以下命令将 gem 更新到最新版本：

```
sudo gem update --system 
```

如果您想享受快速响应:)

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2017-11-16T15:30:00.397

**无 Sudo 安装**

如果您不想为此过程授予 RubyGems 管理员权限，您可以通过将 --user-install 标志传递给 gem install 或通过配置 RubyGems 环境来告诉 RubyGems 安装到您的用户目录中。我们认为后者是最好的解决方案。为此，请在您的主目录中创建或编辑 .profile 文件并添加或修改它以包含以下行：

```
export GEM_HOME=$HOME/.gem
export PATH=$GEM_HOME/bin:$PATH 
```

请注意，如果您选择使用 --user-install 选项，您仍然需要配置 .profile 文件以设置 PATH 或使用以完整路径开头的命令。您可以使用 gem which cocoapods 找出 gem 的安装位置。例如

```
$ gem install cocoapods --user-install
$ gem which cocoapods
/Users/eloy/.gem/ruby/2.0.0/gems/cocoapods-0.29.0/lib/cocoapods.rb
$ /Users/eloy/.gem/ruby/2.0.0/bin/pod install 
```

来源：[https ://guides.cocoapods.org/using/getting-started.html](https://guides.cocoapods.org/using/getting-started.html)

* * *

## 回答 #11

> 赞同：9
> 
> 时间：2014-02-27T07:18:40.877

尝试： `rbenv global system` 然后 `sudo gem install cocoapods` `pod setup`

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2014-10-12T23:26:05.727

在终端中，最好使用“sudo”运行可可豆荚的安装。在其他情况下，我收到错误消息：“您没有 /Library/Ruby/Gems/2.0.0 目录的写入权限。”

所以解决方案是：

```
sudo gem install cocoapods 
```

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2020-06-01T00:27:47.957

所以我也有同样的问题。这可能是因为您的计算机安装了旧版本的 ruby​​。所以你需要先更新你的红宝石。我的为 ruby​​ 2.6.3 版本工作。我从 sStackOverflow 得到了这个解决方案，

您需要先打开终端并输入此代码

```
curl -L https://get.rvm.io | bash -s stable 
```

然后把这个命令

```
rvm install ruby-2.6 
```

如果尚未安装 ruby​​，这将为您安装。之后只需将 ruby​​ 更新到新版本

```
rvm use ruby-2.6.3 
```

在此之后，只需将 ruby​​ 2.6.3 设为您的默认值

```
rvm --default use 2.6.3 
```

这可能会解决您的问题。你现在可以把命令

```
sudo gem install cocoapods 
```

和命令

```
pod setup 
```

我希望这很有用

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2015-10-20T12:19:11.643

这个解决方案对我有用。确保不要错过最后一个命令 ( `export PATH=$PATH:$HOME/Software/ruby/bin`)。

见此。[_](https://github.com/CocoaPods/CocoaPods/issues/3692#issuecomment-113847612)

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2018-07-03T14:13:48.350

**[从https://cocoapods.org/app](https://cocoapods.org/app)安装 cocoapods**

命令和版本不断变化

所以下载 tar 并享受

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2013-12-18T20:22:15.650

gterzian 是在正确的轨道上，但是，如果您稍后更新您的 ruby​​ 版本，那么您还必须更新您的 .profile 以指向新版本的 ruby​​ 目录。例如，当前的 ruby​​ 版本是 2.0.0-p353，因此您必须将 /usr/local/Cellar/ruby/2.0.0-p353/bin 添加到您的路径中。

更好的解决方案是将 /usr/local/opt/ruby/bin 添加到您的 PATH 中。/usr/local/opt/ruby 实际上是当前 ruby​​ 版本的符号链接，当您进行升级时自制软件会自动更新。这样你就永远不需要更新你的 PATH 并且总是指向最新版本。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2014-09-26T07:59:40.667

如果您使用自制软件安装 ruby​​，[这个](https://stackoverflow.com/a/24045162/2532070)答案对我有用。

`brew unlink ruby && brew link ruby`

OSX 10.9.4

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2015-07-01T09:27:48.277

当我写作时发生在我身上

`gem install cocoapods`

代替

`sudo gem install cocoapods`

如果也找不到 sudo 命令，请写

`export PATH=/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:$PATH`

在 sudo 命令之前

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2015-10-22T16:50:46.680

@Babul Prabhakar 是对的

重要提示：但是，如果您在使用他的解决方案后仍然收到“pod: command not found”，则此命令可以解决您的问题：

```
sudo chown -R $(whoami):admin /usr/local 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2021-01-08T20:20:30.070

Big Sur 的最佳解决方案由 _fgmx 在 Redit 上发布

进入 Xcode 12 首选项单击位置为开发人员工具/命令行工具选择 Xcode 12 为 Xcode 12 安装 cocoapods：sudo gem install cocoapods

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2015-12-14T18:33:26.707

我们在 Terminal (Mac) 中使用了不兼容的 Ruby 版本，但是一旦我们使用 RVM 切换到 Ruby 2.1.2，Cocoapods 又回来了。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-07-11T14:24:03.680

安装 pod sudo gem install cocoapods

在平台/ios 中导航 cd 平台/ios

运行 pod 安装

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2020-08-31T18:16:35.350

我正在使用 OS Catalina 并使用了 Babul Prabhakar 的解决方案。但是当我关闭终端时，吊舱仍然无法使用。

所以我把出口：

```
$ export GEM_HOME=$HOME/Software/ruby
$ export PATH=$PATH:$HOME/Software/ruby/bin 
```

在这个文件里面（把这个命令放在终端下面）：

```
nano ~/.bash_profile 
```

然后保存文件，关闭终端并再次打开它并输入：

```
pod --version 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2021-04-15T05:45:56.017

请从 -Your Disk->Library->Ruby 中删除**Ruby 文件夹**删除此文件夹并使用 sudo gem install cocoapods 命令解决我的问题。 [![在此处输入图像描述](../Images/526d6e6dfff4cd370fe38d67bae8d4ef.png)](https://i.stack.imgur.com/IlZeM.png)

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2021-06-04T06:35:20.523

这对我有用

```
sudo apt-get install ruby-dev
sudo gem install cocoapods 
```

# rest - 设计带有一长串查询参数的 RESTful 查询 API

> ID：14202257
> 
> 赞同：185
> 
> 时间：2013-01-07T18:57:07.667
> 
> 标签：rest, http-parameters

我需要设计一个 RESTful 查询 API，它根据几个过滤器返回一组对象。通常的 HTTP 方法是 GET。唯一的问题是，它至少可以有十几个过滤器，如果我们将所有这些过滤器作为查询参数传递，URL 可能会变得很长（长到足以被某些防火墙阻止）。

减少参数的数量不是一种选择。

我能想到的一种替代方法是在 URI 上使用 POST 方法并将过滤器作为 POST 正文的一部分发送。这是否反对 RESTfull（发出 POST 调用以查询数据）。

谁有更好的设计建议？

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2015-08-13T09:32:04.517

请记住，对于 REST API，这完全取决于您的观点。

REST API 中的两个关键概念是端点和资源（实体）。简单地说，端点要么通过 GET 返回资源，要么通过 POST 和 PUT 等（或以上的组合）接受资源。

可以接受的是，使用 POST，您发送的数据可能会或可能不会导致创建新资源及其关联的端点，这些端点很可能不会在 POSTed url 下“存活”。换句话说，当您发布时，您将数据发送到某处进行处理。POST 端点不是通常可以找到资源的位置。

引用[RFC 2616](http://www.rfcreader.com/#rfc2616_line2483)（省略不相关部分，突出显示相关部分）：

> # 9.5 发布
> 
> POST 方法用于请求源服务器接受请求中包含的实体作为请求行中的请求URI 标识的资源的新下级。POST 旨在允许统一的方法涵盖以下功能：
> 
> *   ...
> *   **向数据处理过程提供数据块，例如提交表单的结果；**
> *   ...
> 
> ...
> 
> POST 方法执行的操作**可能不会产生可由 URI 标识的资源**。在这种情况下，200 (OK) 或 204 (No Content) 是适当的响应状态，具体取决于响应**是否包含描述结果的实体**。
> 
> 如果在源服务器上创建了资源，则响应应该是 201 (Created)...

我们已经习惯了代表“事物”或“数据”的端点和资源，无论是用户、消息还是书籍——无论问题领域如何规定。但是，端点也可以公开不同的资源——例如搜索结果。

考虑以下示例：

```
GET    /books?author=AUTHOR
POST   /books
PUT    /books/ID
DELETE /books/ID 
```

这是一个典型的 REST CRUD。但是，如果我们添加：

```
POST /books/search

    {
        "keywords": "...",
        "yearRange": {"from": 1945, "to": 2003},
        "genre": "..."
    } 
```

这个端点没有什么是非 RESTful 的。它接受请求正文形式的数据（实体）。该数据是**搜索标准**- 与其他任何数据一样的 DTO。此端点生成资源（实体）以响应请求：**搜索结果**。搜索结果资源是一个临时资源，立即提供给客户端，无需重定向，也不会从其他一些规范 url 中暴露出来。

它仍然是 REST，除了实体不是书籍 - 请求实体是书籍搜索条件，响应实体是书籍搜索结果。

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2013-01-10T09:02:55.533

很多人已经接受这样的做法，即查询字符串过长或过于复杂（例如查询字符串不能轻松处理嵌套数据）的 GET 可以作为 POST 发送，复杂/长数据在正文中表示的请求。

在 HTTP 规范中查找 POST 规范。它非常广泛。（如果你想通过 REST 中的漏洞驾驶一艘战舰……使用 POST。）

你失去了 GET 语义的一些好处......比如自动重试，因为 GET 是幂等的，但如果你能忍受它，那么接受使用 POST 处理非常长或复杂的查询可能会更容易。

（哈哈，题外话……我最近发现，根据 HTTP 规范，GET*可以*包含一个文档正文。有一节说，解释说，“任何请求都可以有一个文档正文，除了本节中列出的那些”……并且它所指的部分没有列出任何内容。我搜索并找到了HTTP作者正在谈论的线程，这是故意的，因此路由器等不必区分不同的消息。但是，在练习很多基础设施确实会丢弃 GET 的主体。因此，您可以使用主体中表示的过滤器进行 GET，例如 POST，但您将掷骰子。）

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-05-04T23:32:58.940

简而言之：进行 POST 但使用*X-HTTP-Method-Override*标头覆盖 HTTP 方法。

**真实要求**

邮寄/书籍

**实体**

{ "title": "Ipsum", "year": 2017 }

**标头**

X-HTTP 方法覆盖：GET

在服务器端，检查头 X-HTTP-Method-Override 是否存在，然后将其值作为构建到后端最终端点的路由的方法。此外，将实体主体作为查询字符串。从后端的角度来看，请求变成了一个简单的 GET。

通过这种方式，您可以使设计与 REST 原则保持一致。

**编辑：**我知道这个解决方案最初是为了解决某些浏览器和服务器中的 PATCH 动词问题，但在问题中描述的问题很长的 URL 的情况下，它也适用于 GET 动词。

* * *

## 回答 #4

> 赞同：-11
> 
> 时间：2018-03-19T17:05:40.137

如果您使用 Java 和 JAX-RS 进行开发，我建议您使用 @QueryParam 和 @GET

当我需要查看列表时，我也有同样的问题。

参见示例：

```
import java.util.List;
import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.QueryParam;
import javax.ws.rs.core.Response;

@Path("/poc")
public class UserService {

    @GET
    @Path("/test/")
    @Produces(MediaType.APPLICATION_JSON)
    public Response test(@QueryParam("code") final List<Integer> code) {
                Integer int0 = codigo.get(0);
                Integer int1 = codigo.get(1);

        return Response.ok(new JSONObject().put("int01", int0)).build();
    }
} 
```

**URI 模式：** “poc/test?code=1&code=2&code=3

**@QueryParam**会自动将查询参数“orderBy=age&orderBy=name”转换为 java.util.List。

# vb.net - 水晶报告：SetConnection（）方法vb.net后登录失败

> ID：14202259
> 
> 赞同：0
> 
> 时间：2013-01-07T18:57:14.810
> 
> 标签：vb.net, crystal-reports

这是我一步一步的问题：

1-我在VS2010 IDE上创建了许多带有许多参数和公式字段的水晶报表 2-我的水晶报表的连接在设计时被分配给它们，并且在设计时也生成了SQL查询（所以我不想在运行时创建新数据集并为其设置水晶报表数据源）。3-当我尝试通过此代码在运行时显示水晶报告时：

```
 Dim mov As New moves2
    'mov is my report
    Dim rep As New rep
    'rep is the crystal report form 
    mov.DataSourceConnections.Item(0).SetConnection(DataBasePath, "data.accdb", "", "")
    mov.Refresh()
    rep.CrystalReportViewer1.ReportSource = mov
    rep.CrystalReportViewer1.RefreshReport()
    rep.ShowDialog()
    mov.Dispose()
    rep.Dispose() 
```

出现带有“确定”按钮的“登录失败”消息框，当单击“确定”按钮时，一切正常，报告加载数据正常，没有问题！

现在：如何跳过此错误消息，因为此软件将在客户端计算机上，并且此消息非常烦人，并且在客户端看来是错误。

非常感谢您，我正在等待您的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:10:06.880

您应该尝试使用`SetConnection`包含`useIntegratedSecurity`参数的重载并将该参数设置为 true，而不是将空字符串作为用户名和密码传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:39:36.253

经过大约一年的网络尝试和搜索，我找到了解决方案！但这太不可思议了，我应该在databaseName参数中给出数据库的完整路径！这是错误的：

```
mov.DataSourceConnections.Item(0).SetConnection(DataBasePath, "data.accdb", "", "") 
```

这是对的 ：

```
mov.DataSourceConnections.Item(0).SetConnection(DataBasePath, dataBasePath,"", "") 
```

谢谢你。

# sql - 将所有约束从一个 DB 复制到另一个 DB

> ID：14202260
> 
> 赞同：0
> 
> 时间：2013-01-07T18:57:19.430
> 
> 标签：sql, database, oracle, database-administration

能否请您协助我的测试环境在表约束方面不同步 - 我想将所有约束类型从一个数据库复制到另一个数据库。

# c++ - 在 Ubuntu 12.10 上不能无错误地包含“linux/in6.h”

> ID：14202261
> 
> 赞同：3
> 
> 时间：2013-01-07T18:57:20.910
> 
> 标签：c++, linux, ubuntu, ipv6, ipv4

如果不出现这些重新定义错误，我无法将`linux/in6.h`标头包含到我的源代码中：

```
In file included from mypmtud.cc:30:0: /usr/include/linux/in6.h:30:8: error: redefinition of ‘struct in6_addr’ In file included from /usr/include/netdb.h:28:0,
             from mypmtud.cc:23: /usr/include/netinet/in.h:198:8: error: previous definition of ‘struct in6_addr’ In file included from mypmtud.cc:30:0: /usr/include/linux/in6.h:46:8: error: redefinition of ‘struct sockaddr_in6’ In file included from /usr/include/netdb.h:28:0,
             from mypmtud.cc:23: /usr/include/netinet/in.h:239:8: error: previous definition of ‘struct sockaddr_in6’ In file included from mypmtud.cc:30:0: /usr/include/linux/in6.h:54:8: error: redefinition of ‘struct ipv6_mreq’ In file included from /usr/include/netdb.h:28:0,
             from mypmtud.cc:23: /usr/include/netinet/in.h:275:8: error: previous definition of ‘struct ipv6_mreq’ make: *** [mypmtud] Error 1 
```

如何将`linux/in6.h`文件包含到我的代码中？我需要`linux/in6.h`定义`IPV6_DONTFRAG`并`setsockopt()`理解这个选项。我包括的所有其他头文件：

```
#include <iostream>
#include <fstream>
#include <string>

#include <unistd.h>
#include <sys/socket.h>
#include <sys/types.h>
#include <sys/uio.h>

#include <sstream>
#include <ctype.h>
#include <signal.h>
#include <map>
#include <errno.h>

#include <sys/time.h>
#include <netdb.h>
#include <arpa/inet.h>
#include <netinet/in.h>
#include <netinet/ip.h>
#include <netinet/ip_icmp.h> 
```

我在 VirtualBox 4.2.6 上运行 Ubuntu 12.10。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:17:05.637

看起来与`linux/in6.h`有名称冲突`netdb.h`。如果您发现您需要的所有名称`netdb.h`都在其中，`linux/in6.h`您可以删除它，您应该没问题。此外，再次阅读它让我认为它可能已经包含在`netinet/in.h`您的内容中。

**编辑**：

（来自下面的评论：）然后让我为您分解错误消息：`/usr/include/linux/in6.h:30:8: error: redefinition of ‘struct in6_addr’ In file included from /usr/include/netdb.h:28:0`即“struct in6_addr”已在 netdb.h 中定义。Next`netinet/in.h`还提供了导致另一个冲突的结构。之后的一切都是关于`netinet/in6.h`在尝试包含`netinet/in.h`. 使用`netdb.h`和`linux/in6.h`分离的代码部分是否存在？如果是这样，请尝试不同的文件。我认为对于不同的文件，您可能遇到的任何冲突都将被删除，因为每个文件都是一种命名空间（我正在考虑 python 上下文中的命名空间）。我不是 100% 确定这一点，但我稍后会检查。

# linux - 如何编译具有指定版本依赖关系的 Qt 应用程序

> ID：14202263
> 
> 赞同：0
> 
> 时间：2013-01-07T18:57:31.677
> 
> 标签：linux, qt, deployment, dependencies

我不确定如何正确描述它，但我有以下问题。

我需要编译我的 Qt 应用程序，并且完全依赖于特定的 Qt 版本。目前，当我在 linux 上编译我的应用程序并尝试

```
ldd Application 
```

我得到以下结果

```
...
libQtCore.so.4 => /usr/local/Trolltech/...
... 
```

我想要实现的是：

```
libQtCore.so.4.8.2 => /usr/local/Trolltech/... 
```

这个要求的原因是我的应用程序的部署。我想将我的应用程序与默认 Qt 库一起分发到一个目录中。我已经将 rpath 更新到 APP/libs 目录并且一切正常，直到我尝试使用更新版本的 Qt 将我的应用程序分发到系统。

在这种情况下，我收到以下错误：

```
Cannot mix incompatible Qt library ..... 
```

# php - 复选框删除多个作业/行

> ID：14202264
> 
> 赞同：0
> 
> 时间：2013-01-07T18:57:34.623
> 
> 标签：php

嗨：我有一个旧的 php4 应用程序，我们仍然有几个客户在使用。一位客户希望在列表页面中添加一项功能，允许他们选择多个工作，然后一键删除选择的工作。

我想在当前第一列的左侧添加一列，其中包含一个复选框，用户选择任意数量的复选框，然后单击删除，删除 5、8、20 个复选框，在这种情况下实际存档。

所以我基本上想要在这个代码库中应用 gmail 中的类似功能。

任何帮助，将不胜感激。

**这是吐出工作列表页面的代码**

```
function getRequest(rn)
{
    document.forms.intake.R_NUMBER.value=rn;
    goTo('WHOLEBRIEF','display');
}

function archiveRequest(rn)
{
    if(confirm('Are you sure you want to remove this request?'))
    {
        document.forms.intake.R_NUMBER.value=rn;
        goTo('LIST','remove');
    }
}

</script>

<SCRIPT LANGUAGE="JavaScript" SRC="include/table.js"></SCRIPT>
<SCRIPT LANGUAGE="JavaScript" SRC="include/jquery.js"></SCRIPT>
<style type="text/css">
th.table-sortable {
    cursor:pointer;
    background-image:url("/images/sortable.gif");
    background-position:center left;
    background-repeat:no-repeat;
    padding-left:12px;
}
th.table-sorted-asc {
    background-image:url("/images/sorted_up.gif");
    background-position:center left;
    background-repeat:no-repeat;
}
th.table-sorted-desc {
    background-image:url("/images/sorted_down.gif");
    background-position:center left;
    background-repeat:no-repeat;
}
tr.alternates {
    background-color:#f0f0f0;
}
</style>
<input type="hidden" name="JOB_NUMBER">
 <center>
<table class="jobs" width="700" cellpadding="0" cellspacing="0">
<tr>
<td align="center">
<label>Show All Jobs</label>

<table width="1150" style="border: 1px solid #660099;" class="jobs sort01 table-autosort table-autofilter table-stripeclass:alternate table-filtered-rowcount:t1filtercount">
<thead>
<tr bgcolor="#cccccc" align="center">
<th width="50"  class="table-sortable:numeric"><label>Number</label></td>
<th width="200" class="table-filterable table-sortable:default"><label>Requested By</label></td>
<th width="200" class="table-sortable:default"><label>Project Name</label></td>
<th width="200" class="table-filterable table-sortable:default"><label>Project Category</label></td>
<th width="200" class="table-filterable table-sortable:default"><label>Job Type</label></td>  
<th width="150" class="table-sortable:date"><label>Date Submitted</label></td>
<th width="150" class="table-sortable:date"><label>Due Date</label></td>
<th width="100" class="table-filterable table-sortable:default"><label>Status</label></td>
<th width="20">&nbsp;</td>
</tr>
</thead>
<?

$i=0;
if(is_array($R)):
foreach ($R as $key=>$val):?>
<tr bgcolor="<?=getBGC($i)?>">
<td><a href="#" onclick="getReqs('<?=$R[$key]['JOB_NUMBER']?>');return false;"><?=$key?></a></td>
<td><?=$R[$key]['ANSWER']['Q_2']?></td><!--requestor name-->
<td><?=$R[$key]['ANSWER']['Q_5']?></td><!--project name-->
<td><?=$R[$key]['ANSWER']['Q_4']?></td><!--project category-->
<td><?=$R[$key]['ANSWER']['Q_25']?></td><!--job specs-->
<td align="center"><?=formatDate($R[$key]['R_DATE_SUBMITTED'],'y-m-d','m/d/y')?></td>
<td  align="center"><?=$R[$key]['ANSWER']['Q_22']?></td><!--due Date-->

<td  align="center"><?=lookupChange($R[$key]['R_STATUS'])?></td>
<td width="20">
    <?if($tKey):?>
       <a href="#" onclick="archiveRequest('<?=$R[$key]['JOB_NUMBER']?>');return false"><img src="images/b_close.gif" border="0"></a>
    <?endif;?>
    </td>
</tr>

<?$i++;endforeach;endif;?>
</table>  
</td>
</tr>
<tr><td>&nbsp;</td></tr>

</table>    </center> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:33:44.737

大招：添加名称以[]结尾的复选框。提交后，您将能够遍历多个结果并处理每个结果。

```
<input type="checkbox" name="archive[]" value="<?=$R[$key]['JOB_NUMBER']?>" /> 
```

使用表单提交这些值（看起来您可以将表格包装在表单中）。

在服务器端，您可以像这样循环遍历结果数组：

```
if(!empty($_POST['archive'])) {
    foreach($_POST['archive'] as $archiveId) {
        echo $archiveId;
        // archive the values specified
    }
} 
```

# facebook - 跟踪是否有任何朋友更改了他/她的个人资料图片图形 api 或 fql

> ID：14202269
> 
> 赞同：0
> 
> 时间：2013-01-07T18:58:15.793
> 
> 标签：facebook, facebook-graph-api, facebook-fql

关于 facebook Graph API 或 FQL，是否有直接的方法来查找在过去几天更改了他们的个人资料图片或更新了个人资料图片的朋友的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:01:21.487

**没有**

无法通过 Facebook 的 API 做到这一点。您必须设置一个 cron 作业来定期请求数据并与以前的数据进行比较。

请记住，您需要扩展访问令牌才能向当前未连接到您的应用程序的用户请求数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T20:05:28.117

您可以相当容易地找到使用 FQL 添加新头像的朋友，因为新头像最终会出现在标准化相册中。

此查询将为您获取上周添加了新头像的所有朋友的 ID：

```
SELECT owner, object_id, modified_major FROM album 
 WHERE owner IN (SELECT uid2 FROM friend WHERE uid1 = me()) 
       AND type = "profile" AND modified_major > strtotime("-1 week") 
 ORDER BY modified_major DESC 
```

当然，它不会向您显示恢复到旧头像的朋友。

检查更改需要查询`stream`表（并处理其限制）并在`story`线程中查找特定字符串。

这将处理那些将他们的个人资料照片改回他们的“个人资料”相册中已经存在的照片的朋友，但我没有得到一整周的结果。

```
SELECT updated_time, source_id, description FROM stream 
  WHERE filter_key = "others" AND strpos(description, "profile") > 0 
        AND updated_time > strtotime("-1 week") 
  LIMIT 500 
```

# android - doInBackground 未执行

> ID：14202270
> 
> 赞同：0
> 
> 时间：2013-01-07T18:58:19.723
> 
> 标签：android, android-asynctask

我正在开发一个应用程序，它将启动一个 AsyncTask 来读取磁卡数据。主线程休眠并每隔一秒检查布尔标志 waitForStripe 是否已设置为 false。如果是这样，它将继续。我可以看到 AsyncTask doInBackground 退出，但它永远不会到达 onPostExecute。最初我在 AsyncTask 的 onPostExecute 中设置了 waitForSwipe 变量。我通过在 doInBackground 末尾设置布尔值来解决这个问题，但我对没有调用 post execute 方法感到困惑。

我包括一些正确声明 onPostExecute 的日志记录。在这次运行中，onPostExecute 设置了 caMainWaitForStripe 但似乎仍然没有执行。

```
10:04:45.940: D/Ca.PocessTrans(5360): CaiSerial  
10:04:45.960: D/Ca.ProcessTrans(5360): wait for swipe, sleeping...:1  
10:04:45.960: D/CaiReader(5360): requesting startSwipeCard in background.  
10:04:45.960: D/CaiReader(5360): doInBackground main thread? false  
10:04:46.000: I/System.out(5360): top of read loop 1, started: false  
10:04:46.520: I/System.out(5360): wait for swipe  
10:04:46.520: I/System.out(5360): wait for start 1  
10:04:46.520: I/System.out(5360): top of read loop 2, started: false  
10:04:46.960: D/Ca.ProcessTrans(5360): wait for swipe, sleeping...:2  
10:04:47.030: I/System.out(5360): wait for swipe  
10:04:47.030: I/System.out(5360): wait for start 2  
10:04:47.030: I/System.out(5360): top of read loop 3, started: false  
10:04:47.540: I/System.out(5360): wait for swipe  
10:04:47.540: I/System.out(5360): wait for start 3  

... here it was just waiting for me to swipe the card  

01-08 10:04:50.090: I/System.out(5360): top of read loop 9, started: false  
01-08 10:04:50.600: I/System.out(5360): wait for swipe  
01-08 10:04:50.600: I/System.out(5360): wait for start 9  
01-08 10:04:50.600: I/System.out(5360): top of read loop 10, started: false  
01-08 10:04:50.960: D/Ca.ProcessTrans(5360): wait for swipe, sleeping...:6  
01-08 10:04:51.110: I/System.out(5360): wait for swipe  
01-08 10:04:51.110: I/System.out(5360): wait for start 10  
01-08 10:04:51.110: I/System.out(5360): top of read loop 11, started: false  
01-08 10:04:51.120: I/System.out(5360): starting data  
01-08 10:04:51.130: I/System.out(5360): read 121 - bytes:121: val: 02  

... echoing the bytes read from card  

01-08 10:04:51.490: I/System.out(5360): read 121 - bytes:121: val: 6F  
01-08 10:04:51.500: I/System.out(5360): read 121 - bytes:121: val: 03  
01-08 10:04:51.510: I/System.out(5360): wait for swipe  
01-08 10:04:51.510: I/System.out(5360): top of read loop 12, started: true  
01-08 10:04:51.520: I/System.out(5360): end data  
01-08 10:04:51.520: I/System.out(5360): Exiting card reader total read 121  
01-08 10:04:51.550: I/System.out(5360): lrc ok  
01-08 10:04:51.550: I/System.out(5360): computed checksum: 6f  
01-08 10:04:51.550: I/System.out(5360): checksum ok  
01-08 10:04:51.680: D/CaiReader(5360): RS232 setting Enc Data  
01-08 10:04:51.680: D/EpayData(5360):  setEncryptedData : good swipe  

.. echoing encrypted data  

01-08 10:04:51.680: D/CaiReader(5360): leaving 'wait for stripe'  
01-08 10:04:51.960: D/Ca.ProcessTrans(5360): wait for swipe, sleeping...:7  
01-08 10:04:52.960: D/Ca.ProcessTrans(5360): wait for swipe, sleeping...:8  
01-08 10:04:53.970: D/Ca.ProcessTrans(5360): wait for swipe, sleeping...:9  
01-08 10:04:54.970: D/Ca.ProcessTrans(5360): wait for swipe, sleeping...:10  
01-08 10:04:55.970: D/Ca.ProcessTrans(5360): wait for swipe, sleeping...:11  
01-08 10:04:56.970: D/Ca.ProcessTrans(5360): wait for swipe, sleeping...:12  
01-08 10:04:57.970: D/Ca.ProcessTrans(5360): wait for swipe, sleeping...:13  
01-08 10:04:58.970: D/Ca.ProcessTrans(5360): wait for swipe, sleeping...:14  
01-08 10:04:59.970: D/Ca.ProcessTrans(5360): wait for swipe, sleeping...:15  
01-08 10:05:00.970: D/Ca.ProcessTrans(5360): wait for swipe, sleeping...:16  
01-08 10:05:01.970: D/Ca.ProcessTrans(5360): wait for swipe, sleeping...:17  
01-08 10:05:02.970: D/Ca.ProcessTrans(5360): wait for swipe, sleeping...:18  
01-08 10:05:03.970: D/Ca.ProcessTrans(5360): wait for swipe, sleeping...:19  
01-08 10:05:04.970: D/Ca.ProcessTrans(5360): wait for swipe, sleeping...:20  
01-08 10:05:05.970: D/Ca.PocessTrans(5360): break timeout 'wait for swipe'  
01-08 10:05:06.120: D/CaiReader(5360): Done, result: Data set 
```

我非常困惑，看起来 onPostExecute 在 CaiReader (AsyncTask) 超出范围时被触发，而不是在等待滑动之后被触发。

这是异步任务：

```
class CaiReader extends AsyncTask<EpayData, Long, String> {
    private final String S_TAG = "CaiReader";

    protected void onProgressUpdate(Integer... progress) {
        Log.d("Progress", "Progress");
}
@Override
protected void onPostExecute(String result) {
    Log.d(S_TAG, "Done, result: " + result);
    // caMainWaitSwipe = false;
}
// protected void onPostExecute(Long result) {
//    Log.d(S_TAG, "Done, result: " + result);
//}

/**
 * this is controlling task. It launches  card reader.
*/
@Override
protected String doInBackground(EpayData... params) {
    Log.d(S_TAG, "requesting startSwipeCard in background.");
    showThread(S_TAG, "doInBackground");
    EpayData epayData = params[0];
    byte[] scan = caiSerialReader.readCard();
    if (scan == null) {
        return "failure";
    }
    Map<String, String> rs232Map = CaiRs232Read.parseScan(scan);
    String KSN = rs232Map.get(CaiSerialReader.RS232_KSN);
    String encBlock = rs232Map.get(CaiSerialReader.RS232_ENC_BLOCK);
    Log.d(S_TAG, "RS232 setting Enc Data");
    epayData.setEncryptedData(encBlock, KSN);
    Log.d("CAPTURE", "KSN: " + KSN);
    Log.d("CAPTURE", "encBlock: " + encBlock);
    caMainWaitSwipe = false;
    Log.d(S_TAG, "leaving 'wait for stripe' ");
    String success = "set";
    return success;
} 
```

}

调用程序：

```
if (readerType == ReaderType.RS232) {
                Log.d("Ca.PocessTrans", "CaiSerial");
                caMainWaitSwipe = true;
                int i = 0;
                CaiReader caiReader = (CaiReader) new CaiReader().execute(epayData);

                while (caMainWaitSwipe) {
                    i++;
                    if (i > 20) {
                        Log.d("Ca.PocessTrans", "break timeout 'wait for swipe'");
                    return DsiParser.timedOutError();
                    }
                    try {
                        Log.d("Ca.ProcessTrans", "wait for swipe,     sleeping...:" + i);
                        Thread.sleep(1000);
                    } catch (InterruptedException e) {
                        Log.d("Ca.ProcessTrans", "process tran     interrupted exception");
                        e.printStackTrace();
                    }
                }
                Log.d("Ca.PocessTrans", "exit rs232 wait for stripe");
            }
            if (!epayData.isReadGood()) {
                return DsiParser.swipeError();
            }
        }
        Log.d("Ca.PocessTrans", "data read");
        authorizeTransaction(epayData); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:05:28.263

我认为您的 onPostExecute 方法签名有问题。参数应该是字符串类型而不是长类型。我建议将 @Override 注释放在每个被覆盖的方法之上，以便编译器可以告诉您出了什么问题。另一件事是您不需要循环来检查状态，您可以在一个方法中完成所有这些并在 onPostExecute 上调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T19:05:57.107

目前您并没有压倒一切`AsyncTask` `onPostExecute()`，因为您正在返回但`String`收到`doInBackground()`结果，`Long`因此将您的代码更改为：

```
class CaiReader extends AsyncTask<EpayData, Long, String> {
    private final String S_TAG = "CaiReader";

    protected void onProgressUpdate(Integer... progress) {
        Log.d("Progress", "Progress");
     }
@Override
protected void onPostExecute(String result) {  //<< chnage to String
    Log.d(S_TAG, "Done, result: " + result);
}

/**
 * this is controlling task. It launches  card reader.
*/
@Override
protected String doInBackground(EpayData... params) {

     //your code here
   return null;  //<< return string from here
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T19:02:24.533

如果您的主线程正在休眠，那么它将不会调用`Async`并且您`onPostExecute()`将无法到达。每隔一秒睡一觉，或者不管你`doInBackground()`想睡多久，或者直到达到这种状态。然后，您可以将此值返回给您的主要活动、调用函数或在`UI`. 主线程不应该休眠。或者，您可以在`UI`

# spymemcached - spymemcached get() 还是 asyncget()？

> ID：14202272
> 
> 赞同：1
> 
> 时间：2013-01-07T18:58:20.837
> 
> 标签：spymemcached

在像 servlet 这样的多线程应用程序中，如果我们想使用单个 spymemcached 对象，我应该使用 get() 方法还是 asyncget() 方法从缓存中获取值？

我有点不确定我是否正确解释了 spymemcached 文档 - 所以这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-12T01:19:52.093

`asyncGet`a 和 a之间的区别在于`get`，在 asyncGet 中，您无需等待操作完成并在调用后立即返回返回值。你只是开火然后忘记。也就是说，您需要定期检查为您提供的 Future 对象句柄以获取返回值。

在 a`get`中，您等待操作完成，只要它需要，Java 线程等待对 Memcached 的调用完成并返回，即使碰巧 Memcached 中有服务器错误启动重试逻辑，您也需要等待此操作完成。

`asyncGet`因此，一个和之间的区别不在于一个`get`能够比另一个处理更多的此类请求，或者说`get`是并发的，而`asyncGet`不是。

# php - 将图像上传添加到 iframe rte

> ID：14202274
> 
> 赞同：0
> 
> 时间：2013-01-07T18:58:38.067
> 
> 标签：php, javascript, html

我有一个关于将图像插入作为 iframe 加载的简单文本编辑器的问题，我已经简单地对其进行了编码，这是标记：

```
 <iframe id="textEditor" style="width:500px; height:170px;" scrolling="no">
</iframe> 
```

这是随之而来的javascript：

```
textEditor.document.designMode="on";
textEditor.document.open();
textEditor.document.write('<head><style type="text/css">body{ font-family:arial; font- size:13px; }</style> </head>');
textEditor.document.close(); 
```

其他选项在那里但不相关，例如，这是字体控制的代码：标记：

```
 <select id="fonts" onChange="fontEdit('fontname',this[this.selectedIndex].value)">
   <option value="Arial">Arial</option>
   <option value="Comic Sans MS">Comic Sans MS</option>
   <option value="Courier New">Courier New</option>
   <option value="Monotype Corsiva">Monotype</option>
   <option value="Tahoma">Tahoma</option>
   <option value="Times">Times</option>
   </select> 
```

javascript:

```
 function fontEdit(x,y)
{
textEditor.document.execCommand(x,"",y);
textEditor.focus();
} 
```

等等，以及字体大小、颜色等的其他选项。问题是，我将如何为此添加图像上传功能？这样用户就可以随时在编辑器中上传图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:45:11.990

如果您想使用像上传这样的 ajax，那么您需要为此使用另一个 iframe，或者您可以使用像[ajax-upload](https://github.com/valums/ajax-upload)这样的库，并且在 onComplete 事件中您可以在编辑器中创建图像。

# c# - PropertyGrid 将泛型类型更改为特定类型

> ID：14202275
> 
> 赞同：0
> 
> 时间：2013-01-07T18:58:51.347
> 
> 标签：c#, reflection, types, propertygrid

所以我有两个具有两种不同类型的对象。第一个是被`ItemTypes`调用的类型`Type`，第二个只是一个`Type`被调用的泛型`SubType`。

我想要完成的是当我更改我的 ItemType 属性时，我需要我的`SubType`属性更改为我拥有的许多不同类型之一（`ConsumableSubType`,`ContainerSubType`等..）

这是我的两个属性的代码，其中包含一些属性网格的注释。

```
 [RefreshProperties(System.ComponentModel.RefreshProperties.All)]
    [TypeConverter(typeof(EnumConverter))]
    [DisplayName("Type")]
    [XmlIgnore]
    public ItemTypes _Type
    {
        get { return Type; }
        set
        {
            Type = value;
            //Do some logic in here to set _SubType to a different type
        }
    }
    [TypeConverter(typeof(EnumConverter))]
    [DisplayName("Sub Type")]
    [XmlIgnore]
    public Type _SubType { get; set; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:06:41.113

您不能在运行时更改属性的类型。但是，您可以`object`将其设为 ，然后将您喜欢的任何内容分配给它。

# algorithm - 为什么这种启发式是可以接受的？

> ID：14202277
> 
> 赞同：3
> 
> 时间：2013-01-07T18:59:16.807
> 
> 标签：algorithm, heuristics

对于井字游戏，我的讲师为井字游戏的下一步行动提出了一个可接受的启发式（意味着它永远不会高估距离），如下所示（从 O 玩家的角度来看）：

> O 的可能行数 - X 的可能行数

我想知道为什么这种启发式可以接受？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:14:55.140

它不是。

```
O..
XOX
OX. 
```

然后到目标的距离 = (3-1) = 2

到球门的实际距离，1（赢`O`）

2 > 1，因此它被高估了。

还是我错过了什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T19:14:14.253

来自[维基百科](http://en.wikipedia.org/wiki/Admissible_heuristic)：

> 如果启发式函数从不高估达到目标的成本，则称它是**可接受的**

这基本上意味着，当您有启发式方法时，只有在保证目标的实际成本高于或等于估计成本时，才可以接受。A* 寻路算法的启发式就是一个很好的例子。对于该算法，您通常使用启发式方法来估计到目标的距离，就像有一条直接通往目标的道路一样。如果您使用会高估距离的启发式算法，它可能找不到最短的路径。

# php - 在两台服务器之间传递数组

> ID：14202281
> 
> 赞同：-1
> 
> 时间：2013-01-07T18:59:25.977
> 
> 标签：php

在服务器（a）中，我有一个脚本可以做一些事情，当任务完成时它返回一个像这样的数组：

```
Array ( [1372888] => 3 - 0 [1340712] => 0 - 0 ); 
```

我需要将此数组传递给服务器（b）。可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:03:03.597

您可以使用 json 来传递数据：

服务器 A：

```
$array = array("1372888" => "3 - 0", "1340712" => "0 - 0")
$passArray = json_encode($array) ;
/// Send 
```

服务器 B：

```
// Receive data:
$array = json_decode($array,true); 
```

# python - Python：使用多处理模块作为可能的解决方案来提高我的功能的速度

> ID：14202285
> 
> 赞同：1
> 
> 时间：2013-01-07T18:59:37.433
> 
> 标签：python, multithreading, performance, optimization, multiprocessing

[我在 Python 2.7（在 Window OS 64bit 上）中编写了一个函数，以便从参考多边形（Ref）和一个或多个 ESRI shapefile 格式](http://en.wikipedia.org/wiki/Shapefile)的分段（Seg）多边形计算相交区域的平均值。代码非常慢，因为我有超过 2000 个参考多边形，并且对于每个 Ref_polygon，该函数每次都针对所有 Seg 多边形（超过 7000 个）运行。很抱歉，该函数是原型。

我想知道[多处理](http://docs.python.org/2/library/multiprocessing.html)是否可以帮助我提高循环速度或者有更多的性能解决方案。如果多处理可以成为可能的解决方案，我想知道优化以下功能的最佳方法

```
import numpy as np
import ogr
import osr,gdal
from shapely.geometry import Polygon
from shapely.geometry import Point
import osgeo.gdal
import osgeo.gdal as gdal

def AreaInter(reference,segmented,outFile):
     # open shapefile
     ref = osgeo.ogr.Open(reference)
     if ref is None:
          raise SystemExit('Unable to open %s' % reference)
     seg = osgeo.ogr.Open(segmented)
     if seg is None:
          raise SystemExit('Unable to open %s' % segmented)
     ref_layer = ref.GetLayer()
     seg_layer = seg.GetLayer()
     # create outfile
     if not os.path.split(outFile)[0]:
          file_path, file_name_ext = os.path.split(os.path.abspath(reference))
          outFile_filename = os.path.splitext(os.path.basename(outFile))[0]
          file_out = open(os.path.abspath("{0}\\{1}.txt".format(file_path, outFile_filename)), "w")
     else:
          file_path_name, file_ext = os.path.splitext(outFile)
          file_out = open(os.path.abspath("{0}.txt".format(file_path_name)), "w")
     # For each reference objects-i
     for index in xrange(ref_layer.GetFeatureCount()):
          ref_feature = ref_layer.GetFeature(index)
          # get FID (=Feature ID)
          FID = str(ref_feature.GetFID())
          ref_geometry = ref_feature.GetGeometryRef()
          pts = ref_geometry.GetGeometryRef(0)
          points = []
          for p in xrange(pts.GetPointCount()):
               points.append((pts.GetX(p), pts.GetY(p)))
          # convert in a shapely polygon
          ref_polygon = Polygon(points)
          # get the area
          ref_Area = ref_polygon.area
          # create an empty list               
          Area_seg, Area_intersect = ([] for _ in range(2))
          # For each segmented objects-j
          for segment in xrange(seg_layer.GetFeatureCount()):
               seg_feature = seg_layer.GetFeature(segment)
               seg_geometry = seg_feature.GetGeometryRef()
               pts = seg_geometry.GetGeometryRef(0)
               points = []
               for p in xrange(pts.GetPointCount()):
                    points.append((pts.GetX(p), pts.GetY(p)))
               seg_polygon = Polygon(points)
               seg_Area.append = seg_polygon.area
               # intersection (overlap) of reference object with the segmented object
               intersect_polygon = ref_polygon.intersection(seg_polygon)
               # area of intersection (= 0, No intersection)
               intersect_Area.append = intersect_polygon.area
          # Avarage for all segmented objects (because 1 or more segmented polygons can  intersect with reference polygon)
          seg_Area_average = numpy.average(seg_Area)
          intersect_Area_average = numpy.average(intersect_Area)
          file_out.write(" ".join(["%s" %i for i in [FID, ref_Area,seg_Area_average,intersect_Area_average]])+ "\n")
     file_out.close() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T19:10:42.550

您可以使用[multiprocessing](http://docs.python.org/library/multiprocessing.html)包，尤其是`Pool`类。首先创建一个函数来执行您想要在 for 循环中执行的所有操作，并且仅将索引作为参数：

```
def process_reference_object(index):
      ref_feature = ref_layer.GetFeature(index)
      # all your code goes here
      return (" ".join(["%s" %i for i in [FID, ref_Area,seg_Area_average,intersect_Area_average]])+ "\n") 
```

*请注意*，这不会写入文件本身——这会很混乱，因为您将有多个进程同时写入同一个文件。相反，它返回需要写入的字符串。还要注意，这个函数中有一些对象，`ref_layer`或者`ref_geometry`需要以某种方式到达它——这取决于你如何去做（你可以把`process_reference_object`方法放在一个用它们初始化的类中，或者它可能像定义一样丑陋他们在全球范围内）。

然后，您创建一个进程资源池，并使用以下命令运行所有索引`Pool.imap_unordered`（它自己会根据需要将每个索引分配给不同的进程）：

```
from multiprocessing import Pool
p = Pool()  # run multiple processes
for l in p.imap_unordered(process_reference_object, range(ref_layer.GetFeatureCount())):
    file_out.write(l) 
```

这将在多个进程中并行处理您的引用对象的独立处理，并将它们写入文件（以任意顺序，注意）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T19:12:05.030

Threading can help to a degree, but first you should make sure you can't simplify the algorithm. If you're checking each of 2000 reference polygons against 7000 segmented polygons (perhaps I misunderstood), then you should start there. Stuff that runs at O(n²) is going to be slow, so maybe you can prune away things that will definitely not intersect or find some other way to speed things up. Otherwise, running multiple processes or threads will only improve things linearly when your data grows geometrically.

# javascript - 使用 POST 方法的 AJAX 函数会产生以下错误。错误：返回状态码 414 Request-URI Too Large

> ID：14202288
> 
> 赞同：0
> 
> 时间：2013-01-07T18:59:50.817
> 
> 标签：javascript, ajax

我正在使用 AJAX 函数将数据传输到 PHP 文件。我传递给 AJAX 函数的数据长度为 17000 个字符。这通常对于使用 GET 方法传输来说太长了，但是人们会认为 POST 方法将允许传递如此大的变量。

这是我正在使用的 AJAX 函数：

```
function ajaxFunction(id, datatypeString, pathToFileString, variable){

    var myRequestObject = null; 

    document.getElementById(id).innerHTML = "<span>Started...</span>";

    if (window.XMLHttpRequest)
    {
        myRequestObject = new XMLHttpRequest();
    } 
    else if (window.ActiveXObject) 
    {
        try 
        {
            myRequestObject = new ActiveXObject("Msxml2.XMLHTTP");
        } 
        catch (e)
        {
            try 
            {
                myRequestObject = new ActiveXObject("Microsoft.XMLHTTP");
            } 
            catch (e) {}
        }
    }

    myRequestObject.onreadystatechange = function()
    { 
        document.getElementById(id).innerHTML = "<span>Wait server...</span>";
        if(myRequestObject.readyState == 4)
        {
            if(myRequestObject.status == 200)
            {
                // process a document here
                document.getElementById(id).innerHTML = "<span>Processing file...</span>"

                if(datatypeString == "txt"){
                    //Injects code from a text file
                    document.getElementById(id).innerHTML = myRequestObject.responseText;
                }
                else if(datatypeString == "xml"){
                    //Injects code from an XML file
                    document.getElementById(id).innerHTML = myRequestObject.responseXML.documentElement.document.getElementsByTagName('title')[0].childNodes[0].nodeValue;   // Inject the content into the div with the relevant id 
                }
                else{
                    document.getElementById(id).innerHTML = "<span>Datatype exception occured</span>";
                }

            }   
            else    
            {
                document.getElementById(id).innerHTML = "<span>Error: returned status code " + myRequestObject.status + " " + myRequestObject.statusText + "</span>";
            }   
        } 
    }; 

    myRequestObject.open("POST", pathToFileString+variable, true); 
    myRequestObject.send(null); 
} 
```

这是对该 AJAX 函数的函数调用：

```
ajaxFunction("myDiv", "txt", "processdata.php", "?data="+reallyLargeJavascriptVariable); 
```

这也是我在调用 AJAX 函数时遇到的错误：

```
Error: returned status code 414 Request-URI Too Large 
```

我在 Stackoverflow 和其他网站上四处寻找解决此问题的方法。然而，大多数答案归结为：“使用 POST 方法而不是 GET 方法来传输数据。”

但是，正如您在 AJAX 函数中看到的那样，我已经在使用 POST 方法。

所以我不确定这里发生了什么以及我的代码中要更改什么来解决这个问题。我只是希望能够将非常大的变量传递给我的函数，但是使用这个函数似乎不可能。

鉴于该错误，URI 的限制似乎是导致问题的原因。但是，我使用的是 POST 方法而不是 GET 方法，那么为什么变量仍然通过 URI 传递？由于我没有使用 GET 方法，而是像许多人在其他线程中建议的关于此问题的 POST 方法，我不确定为什么这里涉及 URI 并且似乎导致了问题。

显然 URI 对我可以传输的变量的大小进行了限制，但是我使用的是 POST 方法，那么为什么会发生此错误以及如何调整我的 AJAX 函数以使其与大型变量一起工作我想使用 AJAX 传输？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:06:18.443

当您进行 POST 时，您需要将 POST 数据传递给`.send`（您当前传递的是 null）。您还需要设置一些标题详细信息。

```
myRequestObject.open("POST", pathToFileString, true);
myRequestObject.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
myRequestObject.setRequestHeader("Content-length", variable.length);
myRequestObject.send(variable); 
```

如果您当前在变量的开头或路径的结尾传递了一个问号，请继续删除它。

# css - 我应该指定所有 4 个填充还是只覆盖其中一个也是一种好习惯？

> ID：14202289
> 
> 赞同：4
> 
> 时间：2013-01-07T18:59:52.767
> 
> 标签：css

对于给定的课程，我希望具有以下样式：

```
stlye1 {
    padding-top: 0;
    padding-right: 0;
    padding-bottom: 10px;
    padding-left: 0px;
} 
```

但这有很多重复，所以我只想写：

```
stlye1 {
    padding: 0;
    padding-bottom: 10px;
} 
```

这会是一件坏事吗？

**更新：**

当我看到 3 个值（简写）时，我不确定最后一个要适用于什么。所以我想出了上面的第二种方法来明确我想要覆盖哪个。

**更新2：**

对于速记方法，您如何具体说明以下内容：

```
stlye1 {
    padding-top: 0;
    padding-right: 0;
    padding-bottom: 10px;
    padding-left: 0px;
}

style1 {
    padding: 0 0 10px; // now i know this one, thanks!
}

stlye2 {
    padding-top: 0;
    padding-right: 10px;
    padding-bottom: 0;
    padding-left: 0px;
}

style2 {
    padding: 0 10px 0; // is this correct?
}

stlye3 {
    padding-top: 10px;
    padding-right: 0;
    padding-bottom: 0;
    padding-left: 0px;
}

style3 {
    padding: 10px 0 0; // is this correct?
}

stlye4 {
    padding-top: 0;
    padding-right: 0;
    padding-bottom: 0;
    padding-left: 10px;
}

style4 {
    padding: // i have no clue.
} 
```

**更新 3：**

简而言之，style2 和 4 不能通过仅提供 3 个值以速记格式完成。正如 PassKit 所指出的，left 和 right 不能单独用 3 个值指定。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T19:01:47.150

你为什么不直接使用速记？

```
stlye1 {
    padding: 0 0 10px; /* top (right/left) bottom */
} 
```

它在哪里：

```
padding: top right bottom left; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T19:01:44.217

虽然您的建议完全有效，但最简洁的形式是：

```
stlye1 {
    padding: 0 0 10px;
} 
```

这种速记格式分解为`padding: top(0) right(0) bottom(10px);`left 默认为 right 值，因为未指定 left 值。

对于您问题中的 4 种样式，样式 1 和 3 是正确的，但对于样式 2 和 4，请参阅下面的样式 5 和随附的注释。

作为参考，样式速记分解如下：

如果有一个值，它适用于所有 4 个属性，顶部、右侧、底部和左侧。

```
stlye1value {
    padding: 10px;
}

/* equals */

stlye1value {
    padding-top: 10px;
    padding-bottom: 10px;
    padding-left: 10px;
    padding-right: 10px;
} 
```

* * *

如果有两个值，第一个值适用于顶部和底部属性，第二个值适用于左右

```
stlye2values {
    padding: 0 10px;
}

/* equals */

stlye2values {
    padding-top: 0;
    padding-right: 10px;
    padding-bottom: 0;
    padding-left: 10px;
} 
```

* * *

如果有 3 个值，第一个应用于顶部，第二个应用于左右，第三个应用于底部。

```
stlye3values {
    padding: 0 10px 20px;
}

/* equals */

stlye3values {
    padding-top: 0;
    padding-right: 10px;
    padding-bottom: 20px;
    padding-left: 10px;
} 
```

* * *

指定所有 4 个值会按上、右、下、左的顺序设置填充（想想从顶部开始的顺时针圆圈）。

```
stlye4values {
    padding: 0 10px 20px 30px;
}

/* equals */

stlye4values {
    padding-top: 0;
    padding-right: 10px; 
    padding-bottom: 20px;
    padding-left: 30px;

} 
```

* * *

**注意：**`padding-left`如果不输入所有 4 个值或使用or ，则无法使用简写独立指定右值或左值`padding-right`。

```
style5 {
    padding-left: 10px; 
}

/* providing there are no previous padding rule for style5 equals */

style5 {
    padding: 0 0 0 10px; 
}

/* equals */

stlye5 {
    padding:0;
    padding-left:10px;
}

/* equals */

stlye5 {
    padding-top: 0;
    padding-right: 0; 
    padding-bottom: 0;
    padding-left: 10px;

} 
```

# sql - Oracle 不支持 TOP

> ID：14202300
> 
> 赞同：0
> 
> 时间：2013-01-07T19:00:25.320
> 
> 标签：sql, database, oracle

我们不能`TOP`在 ORACLE 中使用 SQL 中的命令来获取前 n 个已排序的行，因为它不支持它。但是有一些方法可以使用`rank()`and获取结果，`rownum()`但这需要内部查询。`rownum()`我想知道除了使用/`rank()`和内部查询之外是否还有其他方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:19:25.923

我不知道“rownum()”是什么。最好的方法是@PinnyM 删除的答案。. .

```
select *
from (<your query here>
      order by <your ordering>
     ) t
where rownum < xx 
```

这比使用or*好得多*，因为需要对值进行最少的处理。`row_number()``rank()``rownum`

顺便说一句，`TOP`是特定于 SQL Server 和 Sybase。其他数据库使用`LIMIT`.

# php - 如何从 XAMPP 切换到 cPanel

> ID：14202301
> 
> 赞同：0
> 
> 时间：2013-01-07T19:00:31.847
> 
> 标签：php, cpanel

我有一个我编写的 php 网站，它使用 XAMPP 运行。我想将其转移到使用 cPanel。使用 xampp 时，我必须将所有文件放在 htdocs 文件夹中才能正常工作。现在我使用不同的服务器有什么不同？

我相信我终于弄清楚了我的问题所在。我假设太多了。

在 Eclipse 中使用 localhost/project 从 xammp 工作时，如果我想添加一个文件“test.php”，我只需添加它，保存它，然后当我输入 localhost/project/test.php 时，就可以了。这似乎不是 cPanel 的工作方式。我需要以某种方式手动更新它吗？如果是这样，我该怎么做？

我也在使用 mysite.com/~lamar/test.php，这就是它在 cPanel 中的设置方式。test.php 在 S:/Lamar/www/test.php 中。这也可能是我问题的根源。

有任何想法吗？截至目前，我什至无法访问我项目的任何页面

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T19:06:39.703

根据您的主机，您可能需要查找特定文件夹，尽管很多时候您可以将文件放在您通过 FTP 进入系统后被带到的根目录中。

如果您登录并看到`www`、`htdocs`、`public_html`、`httpdocs`或`html`文件夹，请将您的文件放在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T19:03:51.963

使用 CPanel，您必须将文件放入`public_html`文件夹中。正如评论中所说，根据您的主机配置，它可能是另一个文件夹 - 在您的情况下`www`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T17:00:16.703

我遇到的问题是 Eclipse 没有更新到服务器。因此，无论我对文件进行了多少更改，它们都不会反映在网站上。我现在改用 Dream Weaver。

# html - 使用 CSS 进行数据下钻的图形地图

> ID：14202304
> 
> 赞同：2
> 
> 时间：2013-01-07T19:00:38.427
> 
> 标签：html, css, mapping

我们有一个新项目，客户是一个大型住宅区。有 10 个区域/区（第 1 区、第 2 区等），客户提供了地图。

每个区有3-4栋住宅楼，每栋楼内都有公寓楼。每栋公寓楼都有出租房间。

客户想要每个级别（整个区域、每个区、每个建筑物、每个公寓、每个房间）的图形地图。

地图没有完美的形状。 ![在此处输入图像描述](../Images/fbd6be55d13accc1de238d0e3321e8af.png) 我们已经完成了数据库，并且我们已经向下钻取了表格数据。我们正在寻找每个级别地图的 PNG，并在地图的特定区域有某种叠加的 DIV，显示绿色（可用房间）、红色（已占用）等……或像 150 - 可用、235 - 可用的计数器.

用户可以单击每个地图区域并通过深入了解其他地图来获取更多详细信息。我们已经研究过创建一个带有字段的表来动态生成 html：

```
<map name="mapDistrict"> <area shape="circle" coords="90,58,3" href=" Building/1" alt=" Building 1"> <area shape=" poly" coords="124,58,8" href=" Building/2" alt=" Building 2"> </map> 
```

有更好的解决方案吗？我们要使用 CSS、Javascript (JQUERY) .. 没有 FLASH！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:15:18.180

我已经多次绘制过这种类型的房地产地图。你正在做的事情非常有效。您可能希望使用 JS 数组或 JSON 将单位映射到坐标和每个状态。

对于整个建筑物，您可能需要查看： http: [//www.netzgesta.de/mapper/](http://www.netzgesta.de/mapper/)，它将地图区域转换为彩色叠加层。

您可能还需要考虑一些[其他方法，即简单地使用方形定位链接。](https://stackoverflow.com/questions/8857818/take-html-area-map-and-convert-to-d)

您还可以将事件连接到您的区域地图以显示叠加层：

```
<area COORDS="80,88,120,125" HREF="#" onMouseOver="showUnit('a')"> 
```

# grammar - yacc 只读第一条语法规则

> ID：14202310
> 
> 赞同：0
> 
> 时间：2013-01-07T19:00:59.287
> 
> 标签：grammar, bison, yacc

我有这个 yacc 文件

```
%error-verbose
%token  END
%token  ID
%token  INT
%token  IF
%token  ELSE
%token  WHILE
%token  FOR
%token  BREAK
%token  CONTINUE
%token  RETURN
%token  SEM
%token  LPAR
%token  RPAR
%token  PLUS
%token  MINUS
%token  MULT
%token  DIV
%token  MOD
%token  GT
%token  LT
%token  GTE /* >= */
%token  LTE /* <= */
%token  EQUAL   /* == */
%token  NEQUAL  /* != */
%token  AND
%token  OR
%token  EQ
%token  COM
%token PRINT 
%token READ
%token FLOAT
%token LABR
%token RABR
%token NUM
%token STR

/*
 *  precedentce tabLTE
 */

%right  EQ PE ME TE DE RE
%left   OR
%left   AND
%left   EQUAL NEQUAL
%left   LT GT GTE LTE
%left   PLUS MINUS
%left   MULT DIV MOD
%right  PP MM
%{
#include<stdio.h>
extern char *yyname;
extern char *yytext;
extern int yylineno;
void yyerror(char const *msg)
{
fprintf(stderr,"%s:%d:%s\n", yyname,yylineno,msg);

}
%}
%%
program
    : definitions
    ;
definitions
    : definition
    | definitions definition
    ;
definition:
    | declaration
    ;
declarations
    : /* null */
    | declarations declaration
    ;
declaration
    : INT declarator_list SEM
    ;

declarator_list
    : ID
    | declarator_list COM ID
    ;
statements
    : /* null */
    | statements statement
    ;
statement
    : expression SEM
    | SEM   /* null statement */
    | if_prefix statement
    | if_prefix statement ELSE statement
    | loop_prefix statement
    ;
if_prefix
    : IF LPAR expression RPAR
    ;
loop_prefix
    : WHILE LPAR expression RPAR
    ;
expression
    : binary
    | expression COM binary
    ;
binary
    : ID
    | LPAR expression RPAR
    | ID LPAR optional_argument_list RPAR
    | binary PLUS binary
    | binary MINUS binary
    | binary MULT binary
    | binary DIV binary
    | binary MOD binary
    | binary GT binary
    | binary LT binary
    | binary GTE binary
    | binary LTE binary
    | binary EQUAL binary
    | binary NEQUAL binary
    | binary AND binary
    | binary OR binary
    | ID EQ binary
    | ID PE binary
    | ID ME binary
    | ID TE binary
    | ID DE binary
    | ID RE binary
    ;
optional_argument_list
    : /* no actual arguments */
    | argument_list
    ;
argument_list
    : binary
    | argument_list COM binary
    ;

%%

#include <stdlib.h>
extern FILE *yyin;
int main(int argc, char **argv)
{
    int ok;
    if (argc != 2) {
        fprintf(stderr, "%s: Wrong arguments\n", argv[0]);
        return EXIT_FAILURE;
    }
    yyname = argv[1];
    if ((yyin = fopen(yyname, "r")) == NULL) {
        fprintf(stderr, "%s: %s: Invalid file\n", argv[0], argv[1]);
        return EXIT_FAILURE;
    }
    return (yyparse() ? EXIT_SUCCESS : EXIT_FAILURE);
} 
```

当输入为 int x 时；一切正常，但是当输入不是“INT”时，可以说 FOR 它会引发错误：意外 FOR 期望 INT 或 $end 所以它实际上只读取规则集中的第一条规则。此外，它一直显示应用野牛命令时无用的非终端和终端警告。

这个 yacc 文件有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:09:00.497

麻烦的是规则：

```
program
    : definitions
    ;
definitions
    : definition
    | definitions definition
    ;
definition:
    | declaration
    ;
declarations
    : /* null */
    | declarations declaration
    ;
declaration
    : INT declarator_list SEM
    ; 
```

只允许通过声明；什么都不允许`statements`作为 a 的一部分`program`。您的 FOR 不是声明，因此语法拒绝它。

“无用的非终端”警告试图告诉你：

> 你犯了大错；你的语法有错误。你试图为一些生产编写规则，但你从来没有让它被识别，所以添加它没有意义。

或者差不多...

也许你需要：

```
program
    : definitions statements
    ; 
```

或者也许您也需要允许函数作为定义，然后 FOR 语句将成为函数体的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:18:35.800

向我的 LL oracle 询问您修改后的语法：

```
Out of 15 non-terminals, 14 are reachable, 1 are unreachable:
'declarations'
Circular symbols:
definitions
definitions 
```

对圆形符号的抱怨意味着“定义”可以自己推导出来。例如，“定义”可以产生“定义定义”，但“定义”是可以为空的，所以“定义”只能产生自己，kinduva 无限循环很少有解析器生成器愿意以任何明智的方式处理。换一种方式来看，您已经将“定义”定义为可以为空的符号列表，那么您希望匹配多少个 epsilon？无穷大呢？:-)

这是 yacc/bison 风格的一个缺点，即即使语法存在问题，也试图生成*一些解析器；*如果您确切地知道自己在做什么，那将非常方便，但否则会很混乱。

但是，对于如何处理语法循环的狭窄点，这给了你一个非常无用的（但可以通过口香糖编译！）解析器。您如何允许“定义”为空但不允许“定义”？爱荷华州：

```
definitions : | definitions definition ;
definition : declaration ; 
```

尽量不要在可空性之上叠加可空性。因此，当您稍后更改为：

```
definition : declarations ; 
```

不要使“声明”可以为空（这已经由“定义”可以为空来处理）。相反，将其更改为：

```
declarations : declaration | declarations declaration ; 
```

这应该让你摆脱眼前的问题并解决一些新问题:-)

# java - 使用 Ajax 的对话范围 CDI

> ID：14202311
> 
> 赞同：1
> 
> 时间：2013-01-07T19:01:11.843
> 
> 标签：java, jsf, jakarta-ee, cdi, conversation-scope

我正在尝试使用 CDI 对话范围，但我有一些疑问： - 使用 ajax 请求时是否需要传播 cdi id？

例如：

```
 <p:spinner value='#' min="1" max="99" styleClass="spinerqtde" title="Quantidade" stepFactor="1" maxlength="2">
<f:param name="cid" value="#{carrinho.conversation.id}"></f:param>
<p:ajax update="@form" listener='#{carrinho.lstSpinerProduto}' process="@this" />
</p:spinner> 
```

因为当我不这样做时，我意识到方法“@postConstruct”被再次初始化，并创建了一个新的 CID。

托管豆代码：

```
@Named("carrinho")

@ConversationScoped
public class CCarrinho implements Serializable
{
.
.
.
 @Inject
    private Conversation conversation;
.
.
.
 @PostConstruct
    public void inicializar()
    {
    if (getConversation().isTransient())
    {
      getConversation().begin();

    }
    } 
```

谢谢。再见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:44:38.007

当前对话的 id 保存在当前视图中，当您执行回发（ajax 请求也是回发）时，对话 id 就在那里，因此您无需提供它。

# c++ - Eclipse 无法识别我的 GCC

> ID：14202313
> 
> 赞同：0
> 
> 时间：2013-01-07T19:01:17.353
> 
> 标签：c++, gcc, g++, eclipse-cdt

我相信 Eclipse 无法识别我的 gcc 编译器，因为我遇到了一些绝对不是错误的错误，例如`Symbol cout could not be resolved`

[http://img94.imageshack.us/img94/1264/gcc.png](http://img94.imageshack.us/img94/1264/gcc.png)

我是否错误地编辑了 PATH 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T22:28:24.730

这里有几个不同的问题：

首先，`#include <iostream>`是一个预处理指令，而不是 C/C++ 语句，所以它不需要尾随分号。

其次，Eclipse 中未解决的符号错误不一定与您的编译器有关，也不一定会停止编译。Eclipse*可以*自动使用您的 GCC 编译器来查找包含路径等，然后用于解析符号。以我的经验，Eclipse 的这个特性在它工作时非常好，当它不工作时有点脆弱和不透明，并且在任何时候都非常神奇。

我建议一次采取这一步：

1.  修复你的#include。
2.  从命令行找出 gcc 不起作用的原因。编辑路径后可能需要重新启动 cmd.exe。也许你的[PATH 变量太长了](http://www.charlesrcook.com/archive/2012/08/27/path-environment-variable-too-long-and-truncated.aspx)。当您对此进行调查时，也许[更好的环境编辑器会有所帮助。](http://www.rapidee.com/en/about)
3.  从 Eclipse 中构建您的项目。这将测试您的基本编译器 + IDE 工具链是否正常工作，并将帮助 Eclipse 进行自动符号和标头解析。
4.  如果此时您仍然对 Eclipse 的符号和标头解析有问题，那么您可以专门解决这个问题。（例如，您可能需要在 Eclipse 的项目设置中手动设置 #include 路径，或者您可能会发现[清理 Eclipse 索引](https://stackoverflow.com/q/3008293/25507)会有所帮助。）

# php - $_POST 检索选择框选项

> ID：14202314
> 
> 赞同：-2
> 
> 时间：2013-01-07T19:01:19.457
> 
> 标签：php

我一直在旋转我的轮子，试图弄清楚为什么我的 php 代码无法在我的表单 html 中引用选择框。这是 HTML 表单：

```
<form action="/cart.php" method="post">
     <input type="hidden" name="action" value="add" />
     <input type="hidden" name="sku" value="C3" />
<h3>Callaway</h3>
<div class="img-box">
        <p>
             <img alt="X Hot Pro Hybrid" src="/products/kona.jpg" />
             <h7>X Hot Pro Hybrid</h7>
             <br />
             <label><strong>Price:</strong> 7.99
             <br />
             <strong>Availability:</strong> In Stock
             <br />
             <strong>Hand: </strong>
             <select name="hand">
                 <option value="Right">Right</option>
                 <option value="Left">Left</option>
             </select>
         </label>
         <br />
         </p>
         <p>
             <a href="/cart.php?sku=C3&action=add" class="button">Add to Cart</a>
         </p>
     </div>
 </form> 
```

这是来自 cart.php 的行：

```
$hand = $_POST["hand"]; 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:03:09.250

你应该这样做-

```
$hand = $_POST["hand"]; 
```

由于表单方法是 POST

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T19:08:49.523

看起来表单实际上并没有发布。添加到购物车按钮只是在 URL 上传递一些参数。您必须将值添加到“添加到购物车”链接正在使用的 URL（通过 JavaScript）（可能不是一个好主意），使用实际的提交按钮或提交图像，或者让链接使用 Javascript 提交表单。

# javascript - Javascript 未在 WordPress search.php 上触发

> ID：14202316
> 
> 赞同：0
> 
> 时间：2013-01-07T19:01:34.557
> 
> 标签：javascript, wordpress, mobile, nav

有问题的网站：http: [//mtthwbsh.com](http://mtthwbsh.com)

我在页脚中运行了两个脚本 a) 使导航在某个滚动点处保持粘性 b) 切换折叠的移动导航

这适用于我网站的所有迭代，除了搜索结果，似乎 JavaScript 没有附加使移动导航出现所需的 ID，我不知道为什么。

示例：[http ://mtthwbsh.com/?s=test](http://mtthwbsh.com/?s=test)

如果您调整浏览器的大小，您会注意到导航消失而不是折叠。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:06:25.117

由于错误，您的 Javascript 未触发，因此脚本中止。

```
Uncaught TypeError: Object [object Object] has no method 'sticky' (main.js:2) 
```

问题是，您在加载粘性插件之前添加了粘性方法。所以重新安排你在之前插入的javascript `</body>`：

...

`jquery.sticky.js`

`main.js`

...

但无论如何，`problem`消失的搜索框在你的`style.css`：

```
on line 1215:
@media (max-width: 570px) {
...
     #search-form  {
      /* on line 1240 */
       display: none;
     }
...
} 
```

# azure - Azure 诊断是否在 Azure 暂存槽中运行？

> ID：14202320
> 
> 赞同：4
> 
> 时间：2013-01-07T19:01:50.173
> 
> 标签：azure, azure-diagnostics

收集 Azure 诊断数据时，暂存槽是否也将诊断数据发送到 WadPerformanceCounters 表？

如果是这样，我该如何关闭它？或者在阅读诊断信息时如何区分暂存/生产。

我不想显示关于我们网站的数据，假设它都是生​​产的，而实际上它的一部分是登台槽。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T19:22:30.243

是 - Windows Azure 诊断在生产和暂存槽中运行。这两个插槽之间唯一真正的区别是 DNS 名称。

[至于启用诊断，http: //msdn.microsoft.com/en-us/library/gg433048.aspx](http://msdn.microsoft.com/en-us/library/gg433048.aspx)有一个很好的起点。这提供了很多关于 Windows Azure 诊断信息的链接。

我不相信诊断表数据（例如，WadPerformanceCountersTable）中有一种方法可以区分生产槽和暂存槽。您可能能够根据 RowKey 值进行过滤，我认为该值包含部署 ID，并且在生产和暂存之间会有所不同。

您还可以为生产和暂存槽使用不同的存储帐户。这将是一个相当快的 .cscfg 更新，可以在运行时完成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T22:55:32.350

> 收集 Azure 诊断数据时，暂存槽是否也将诊断数据发送到 WadPerformanceCounters 表？

是的，它们最终会出现在同一张桌子上。

每个部署都有其**唯一的**部署标识符，可以在特定实例（生产或登台）的仪表板上找到

![部署 ID 仪表板](../Images/31582538ae9f8acbf0dc86a3c26d385e.png)

样品`WadPerformanceCountersTable`表

![DeploymentId 表](../Images/0c46c7364566ba63da725831736d9814.png)

* * *

为了查找与特定部署（暂存或生产）相关的日志，您可以按部署标识符过滤表，例如

```
DeploymentId eq '1a2c09bea1234bc1b5e6edb99993ab21' 
```

如果单个部署标识符的条目过多，则可以通过添加时间属性来减少条目数（例如，*在 2013 年 1 月 5 日午夜之后记录的所有具有 DeploymentId '1a2c09bea1234bc1b5e6edb99993ab21' 的*条目）

```
DeploymentId eq '1a2c09bea1234bc1b5e6edb99993ab21' and Timestamp gt datetime'2013-01-05T00:00:00Z' 
```

**请注意，这不是过滤 Azure 表存储的最佳方式（正如 Kiwi 和 Gaurav 所指出的那样。**

*任何不包含的查询都`PartitionKey`将导致全表扫描。由于`PartitionKey`在 WAD 表中表示日期/时间值，我建议使用它而不是`Timestamp`. 您可能会发现[获取诊断数据](http://gauravmantri.com/2012/02/17/effective-way-of-fetching-diagnostics-data-from-windows-azure-diagnostics-table-hint-use-partitionkey/)帖子的有效方式非常有用。*

这应该可以帮助您找出每个环境（暂存与生产）和特定部署的条目。

# javascript - jquery对话框多次打开

> ID：14202324
> 
> 赞同：0
> 
> 时间：2013-01-07T19:02:22.023
> 
> 标签：javascript, jquery, html, dialog

我有那个网址：

```
<a onClick="showDialog({$product['id']});">More Info...</a> 
```

此外，我还有：

```
function showDialog(productID)
{
    $( "#dialog-modal_"+productID ).html( "<iframe src='index.php?act=showProduct&amp;id="+productID+"' width='100%' height='100%' frameborder='0' scrolling='no'></iframe>" );
    $( "#dialog-modal_"+productID ).dialog({
    width: 810,
    height: 590,
    resizable: false,
    modal: true,
    open: function(event, ui)
    {
        event.preventDefault();
    }
    });
    container
        .dialog('option', 'title', 'Your Title')
        .dialog('option', 'buttons', {
            Close: function() {
                $(this).dialog('close');
            }
        })
        .dialog('open');

    var stateObj = { foo: "bar" };
    window.history.pushState(stateObj, "page 2", "{$info['siteurl']}/index.html#product-"+productID);

} 
```

如果我在它工作后打开它，但如果我再试一次，它就不会打开。我需要找到一种方法来“清除”当前 ID 的最后一个对话框。对于不同的对话框，它的工作，但只有一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:12:27.893

在产品循环内部：

```
<a href="javascript:" class="productOpener" data-id="{$product['id']}">more info...</a> 
```

还有你的 javascript：

```
$(".productOpener").click(function() {
    showDialog($(this).data("id"));
}); 
```

并修改您`showDialog`以在需要时创建模态 div：

```
function showDialog(productID) {
    var _modal = $("<div/>"); //add whatever styling you need
    _modal.html( "<iframe src='index.php?act=showProduct&amp;id="+productID+"' width='100%' height='100%' frameborder='0' scrolling='no'></iframe>" );
    _modal.dialog({ ... });
    ...
} 
```

# mysql - Mysql case when 和 order by issue

> ID：14202326
> 
> 赞同：1
> 
> 时间：2013-01-07T19:02:22.310
> 
> 标签：mysql

有这个查询：

```
SELECT
  count(*) as Total, 
  SUM(CASE WHEN gender = 1 then 1 ELSE 0 END) Male, 
  SUM(CASE WHEN gender = 2 then 1 ELSE 0 END) Female, 
  SUM(CASE WHEN gender = 0 then 1 ELSE 0 END) Unknown, 
  CASE 
    WHEN age>2 AND age<15 THEN '2-15' 
    WHEN age>18 AND age<25 THEN '18-25' 
  END AS var
FROM
  persons 
WHERE
  1=1 
  AND `date` > '2012-01-10'
  AND `date` < '2013-01-07' 
GROUP BY 
  CASE 
    WHEN age>2 AND age<15 THEN '2-15' 
    WHEN age>18 AND age<25 THEN '18-25'
  END 
```

结果是这样的：

```
Total Male  Female  Unknown var
29     17   12      0       NULL
7      0    7       0       18-25
3      0    3       0       2-15 
```

**第一个问题：**
为什么会导致 NULL ？怎么做才能只显示带有值的结果？

**第二个问题：**
mysql`var`在 2-15 之前用 18-25 对我的列进行排序，可能是因为数字 1 先于数字 2。但关键是作为数字的顺序，然后 2 先于 18。

干杯:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:06:57.423

这是因为所有`CASE`表达式都有一个（隐含的，默认的）`ELSE NULL`部分。因此，任何`age`未被 the`age>2 AND age<15`或`age>18 AND age<25`条件捕获的值都会导致该`NULL`值被分组。

解决方案是在`WHERE`子句中再添加一个限制：

```
WHERE 1=1 
AND `date` > '2012-01-10' AND `date` < '2013-01-07' 
AND ( (age>2 AND age<15) OR (age>18 AND age<25) )        -- this 
```

* * *

对于第二个问题，您可以使用 on 函数`age`来避免对`var`（字符串）进行比较：

```
 ORDER BY MIN(age) 
```

要不就：

```
ORDER BY age 
```

以上都不是 SQL 标准，但它在 MySQL 中工作，在默认的非 ANSI 设置下。如果你想 100% 看书，你可以稍微改变一下`var`：

```
SELECT count(*) as Total, 
  SUM(CASE WHEN gender = 1 then 1 ELSE 0 END) Male, 
  SUM(CASE WHEN gender = 2 then 1 ELSE 0 END) Female, 
  SUM(CASE WHEN gender = 0 then 1 ELSE 0 END) Unknown, 
  CASE 
    WHEN age>2 AND age<15 THEN '02-15'                    -- this was changed
    WHEN age>18 AND age<25 THEN '18-25' 
  END AS var
FROM persons 
WHERE 1=1 
  AND `date` > '2012-01-10' AND `date` < '2013-01-07' 
  AND ( (age>2 AND age<15) OR (age>18 AND age<25) )
GROUP BY 
  CASE 
     WHEN age>2 AND age<15 THEN '02-15' 
     WHEN age>18 AND age<25 THEN '18-25' 
  END
ORDER BY var ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T19:07:06.560

**第一个答案**：
它是NULL，因为它不满足您的任何年龄条件。像这样向 WHERE 添加一个子句应该这样做：

```
WHERE (age > 2 AND age < 15) OR (age > 18 AND age < 25) 
```

**第二个答案**：
你是对的，它是按字符串排序的（因为它们就是这样）。`ORDER ASC`只需通过执行或更改排序的方向`ORDER DESC`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T20:17:32.647

你得到`NULL`

因为它不符合您的 CASE

```
 CASE 
WHEN age>2 AND age<15 THEN '2-15'    // U HAVE BETWEEN 2-15
WHEN age>18 AND age<25 THEN '18-25'   // u have between 18-25

   // but u dont have between 15-18 
   //and u get null because your value is between 15-18 
```

所以尝试在该范围内添加其他案例。

第二个问题，因为它们是字符串，而不是数字。

尝试按年龄排序

# c# - 如何从内存中运行下载的文件？

> ID：14202328
> 
> 赞同：6
> 
> 时间：2013-01-07T19:02:23.380
> 
> 标签：c#, download, bytearray, webclient, exe

> **可能重复：**
> [加载一个 EXE 文件并使用 C# 从内存中运行它](https://stackoverflow.com/questions/3553875/load-an-exe-file-and-run-it-from-memory-using-c-sharp)

我正在使用 WebClient 类从 Web 服务器下载 .exe。有没有一种方法可以在不先将其保存到磁盘的情况下运行 .exe？

为了完整起见，让我向您展示我到目前为止所拥有的。

这是我用来开始下载的代码：

```
WebClient webClient = new WebClient();
webClient.DownloadDataCompleted += new DownloadDataCompletedEventHandler(webClient_DownloadDataCompleted);
webClient.DownloadDataAsync(new Uri("http://www.somewebsite.com/calc.exe")); 
```

在 (webClient_DownloadDataCompleted) 方法中，我只是从参数 e 中获取字节：

```
private void webClient_DownloadDataCompleted(object sender, DownloadDataCompletedEventArgs e)
{
    Byte[] downloadedData = e.Result;
    // how to run this like a .exe?
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:06:34.173

如果您`.exe`是 .NET 程序，则可以[加载程序集并运行其入口点](https://stackoverflow.com/q/5837958/458193)。

否则，虽然[有办法做到这一点](https://stackoverflow.com/a/305319/458193)，但我看不出将文件保存在临时目录中并从那里运行它的问题，这样痛苦少得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T19:07:34.060

看看这个线程。我想你可以解决它`VirtualAlloc`

[是否可以从 C# 中执行 x86 汇编序列？](https://stackoverflow.com/questions/959087/is-it-possible-to-execute-an-x86-assembly-sequence-from-within-c/959144#959144)

如果您的字节数组包含一个 .Net 程序集，您应该可以这样做：

```
Assembly assembly = AppDomain.Load(byteArray)
Type typeToExecute = assembly.GetType("ClassName");
Object instance = Activator.CreateInstance(typeToExecute); 
```

# c# - 调度计时器滴答重复进程

> ID：14202332
> 
> 赞同：0
> 
> 时间：2013-01-07T19:02:46.893
> 
> 标签：c#, windows-phone-7

我正在为我正在从事的项目实施计时器。每当按下按钮时都会触发计时器。

第一次按下时，它会设置定时器的持续时间，然后启动定时器。每当计时器滴答时，程序就会减少持续时间并将其打印到屏幕上。它工作得很好......直到你在计时器运行时再次按下按钮。当您执行此操作时，tick 事件中的操作会发生您在按钮运行时按下按钮的次数。

我的 XAML 看起来像这样。

```
<Grid Grid.Row="1">
    <Grid.RowDefinitions>
        <RowDefinition Height="*" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <TextBlock x:Name="tBox" Text="TIMER" Grid.Row="0" HorizontalAlignment="Center" Style="{StaticResource PhoneTextTitle2Style}"/>
    <TextBlock x:Name="timer" Text="00"  Grid.Row="1" HorizontalAlignment="Center" Style="{StaticResource PhoneTextTitle1Style}"/>
</Grid>

<Button 
    Grid.Row="1" 
    Grid.Column="0"
    Content="Online" 
    HorizontalAlignment="Center"
    Width="200"
    Height="75" Click="trigger" /> 
```

我的 C# 看起来像这样：

```
public partial class MainPage : PhoneApplicationPage
{
    int duration = 0;
    int converted = 0;
    int count = 0;
    DispatcherTimer tmr = new DispatcherTimer();

    // Constructor
    public MainPage()
    {
        InitializeComponent();
    }

    private void trigger(object sender, RoutedEventArgs e)
    {
        resetTimer();
        timer.Text = "30";
        tmr.Interval = TimeSpan.FromSeconds(1);
        tmr.Tick += OnTimerTick;
            tmr.Start();
    }

    void OnTimerTick(object sender, EventArgs args)
    {
        converted = duration - 1;
        timer.Text = converted.ToString();
        duration = converted;
        tBox.Text = strConvert;
        count = count + 1;
        if (duration == 0)
        {
            tmr.Stop();
        }
    }

    void resetTimer()
    {
        count = 0;
        DispatcherTimer tmr = new DispatcherTimer();
        tmr.Interval = TimeSpan.FromSeconds(0);
        duration = 30;
        converted = 0;
        tmr.Stop();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:08:05.280

不要`Tick`在方法中为事件添加处理程序。添加`Tick`事件处理程序，设置间隔，并在创建窗口时（即在构造函数中）创建一次计时器，然后在按下按钮时仅创建`Start`计时器。

按下按钮时也不应创建新计时器；您可以并且应该重新使用现有的计时器。

您实际上并没有多次触发计时器。`Tick`发生的情况是，每次按下按钮时，您都向事件添加了相同的方法作为处理程序，因此*当*您的方法被多次调用时`Tick`事件触发时。调用已经运行的计时器不会导致它多次触发，它只会重置它的间隔（我认为这是需要的）。*`Start`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T19:09:22.507

重写 reset 方法以在关闭现有计时器之前不创建新的计时器引用。

```
void resetTimer()
{
    count = 0;
    tmr.Stop();
    tmr.Interval = TimeSpan.FromSeconds(0);
    duration = 30;
    converted = 0;
} 
```

同样，在页面加载时设置 Tick 事件处理程序

```
// Constructor
public MainPage()
{
    InitializeComponent();
    timer.Text = "30";
    tmr.Interval = TimeSpan.FromSeconds(1);
    tmr.Tick += OnTimerTick;
}

private void trigger(object sender, RoutedEventArgs e)
{
        resetTimer();
        tmr.Start();
} 
```

更是如此，

您应该在 tick 方法执行时停止计时器，除非您可以在 tick 方法需要一段时间执行时多次运行它

```
 void OnTimerTick(object sender, EventArgs args)
    {
tmr.Stop();        
converted = duration - 1;
        timer.Text = converted.ToString();
        duration = converted;
        tBox.Text = strConvert;
        count = count + 1;
tmr.Start();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T19:09:32.243

问题是每次调用 trigger() 时，您都在添加 OnTimerTick 处理程序方法的新实例，我从它的签名中假设是每当用户单击按钮时。

我会做两件事之一；要么删除/禁用 trigger() 方法主体中的按钮，因此用户不能多次单击它，要么在附加对 OnTimerTick 的引用之前检查 Tick 事件以确保它为空（没有处理程序）。*

# android - Android：如何将数据放入对话框中？

> ID：14202342
> 
> 赞同：0
> 
> 时间：2013-01-07T19:03:31.527
> 
> 标签：android, dialog

如何使用构建器将数据注入我的对话框？

我想在 R.layout.history 上使用一个适配器（在课程的第 3 行设置为视图）。但看来我不能在 FireMissiles 类中做到这一点。

如何在该视图上使用适配器来填充数据？

```
public class FireMissilesDialogFragment extends DialogFragment {
    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {

        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());

        // Get the layout inflater
        LayoutInflater inflater = getActivity().getLayoutInflater();
        builder.setView(inflater.inflate(R.layout.history, null));

        builder.setTitle("History");

        return builder.create();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:06:20.757

> 如何在该视图上使用适配器来填充数据？

您可以使用 AlertDialog.Builder 类并调用`setItems()`或`setMultipleChoiceItems()`传递数据数组并让对话框为您填充 ListView。

或者您可以像平常一样创建自己的 ListView（或 Spinner 等）并将此布局传递给任何 Dialog 的`setContentView()`方法。（您不一定需要使用 AlertDialog.Builder。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T19:22:49.743

我希望 layout.history 的类型是 ListView 或 AdapterView。您可以这样做：

ListView lview = (ListView)inflater.inflate(R.layout.history, null);

lview.setAdapter（适配器）；// 将适配器作为 FireMissilesDialogFragment 的构造函数传递

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T19:23:42.017

而不是这一行：

```
builder.setView(inflater.inflate(R.layout.history, null)); 
```

它同时创建和设置视图，像这样拆分它们：

```
View v = infalter.inflate(R.layout.history, null));
// ... Some code here that sets up the view with your data.
builder.setView(v); 
```

您希望 v 与 R.layout.history 的根布局具有相同的类型。`v.findViewById()`您可以像获得任何动态创建/引用的 ViewGroup 一样获得它的孩子。

# perl - 如何在 perl 中创建一个 while 循环？

> ID：14202343
> 
> 赞同：-1
> 
> 时间：2013-01-07T19:03:39.953
> 
> 标签：perl, while-loop

我编写了一些代码，可以将文件从一个文件夹复制和移动到另一个文件夹。这段代码本身就可以正常工作，但是当我尝试在代码中添加一个while循环时，我不断收到错误。当我测试它时，while循环本身也可以正常工作。我似乎无法弄清楚代码有什么问题。我是使用 Perl 的新手，想知道是否有人能指出我哪里出错了。任何帮助都会很棒。谢谢。:)

```
 use File::Copy;
    use File::Find;
    my @source = qw (source);
    my $target  = q{target};

    while 
    {sleep (5);
    find(
      sub {
        if (-f) {
          print "$File::Find::name -> $target";
          copy($File::Find::name, $target)
            or die(q{copy failed:} . $!);

        }
      },
      @source
     ); 
    } 
```

编辑：对不起，我不认为我很清楚。我希望这段代码每 X 秒循环一次。我将其设置为 5 秒以进行测试。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T19:06:42.593

您缺少指示何时退出循环的表达式。

```
while (EXPR) { ... }
      ^^^^^^ 
```

如果你想要一个无限循环，你可以使用

```
while (1) { ... }
for (;;) { ... }
loop { ...}           # use syntax qw( loop ); 
```

# android - adb 启动但不响应

> ID：14202346
> 
> 赞同：1
> 
> 时间：2013-01-07T19:03:49.000
> 
> 标签：android, eclipse, adb

我正在使用eclipse，有时还直接使用adb。无论哪种方式，adb 服务器都会启动，但 eclipse 和 adb 命令 app 都无法建立连接。Eclipse 给出错误：与 adb 的连接已关闭...您必须重新启动...我通过尝试调试我的应用程序来尝试来自 Eclipse 的连接；从命令行我尝试 adb logcat。

自从我更新了 android sdk 工具和平台工具以来，这个问题在过去一周左右一直是间歇性的。我刚刚再次分别更新到 21.0.1 和 16。现在问题是 100% 一致的，我无法调试任何代码:(

我在 Window 7 上运行 eclipse 和 adb。我正在尝试连接到 Nexus 7 或 Kyocera CS170。

我试过使用任务管理器来杀死 adb。如果任一设备已插入，adb 会自动重新启动，但仍无法连接。如果没有插入，我可以通过 adb 命令行启动它。然后，插入设备后，它仍然无法连接。

任何想法？

# java - 使用隐藏输入 type=file 触发表单提交

> ID：14202349
> 
> 赞同：0
> 
> 时间：2013-01-07T19:03:51.480
> 
> 标签：java, jquery, jsp

我有一个按钮，点击时会使用“type=file”调用输入标签

**javascript代码：**

```
 <table>
  <tr>
    <td  >
     <button type="button" style="width:207px" onclick="ClickMe()">Click</button>

    </td>
  </tr>
 </table>

  <form action="/uploadExcelservlet" name="uploadExcelFile" method="POST"            enctype="multipart/form-data" >
   <input type="file" class="Hello" name ="Hello">
  </form> 
```

当点击被选中时。我尝试调用“Hello”来打开浏览窗口。

用户选择一个文件。如何在此处检索文件名，以便将其发布到服务器并在服务器中检索文件。

**.js 文件：**

```
function ClickMe()
{
var frm = document.Hello;
$(function() {
     $(".Hello").click();
          $("[name='Hello']").change(function () {
              alert('here');
              if($(this).val()!=""){
                  frm.submit();
              }
           });
    })
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:19:26.387

将您的 js 代码更改为

```
 $(function () {
    $("[name='Hello']").change(function () {
      alert($(this).val());
      if ($(this).val() != "") {
        $("form").submit();
      }
    });
  })

  function ClickMe() {
    $(".Hello").click();
  } 
```

在这里查看[演示](http://jsfiddle.net/WJrhp/2/)

# database-design - 一个表可以连接两个表中的任何一个

> ID：14202354
> 
> 赞同：0
> 
> 时间：2013-01-07T19:04:13.633
> 
> 标签：database-design

（我知道这可能是重复的，但我无法通过搜索找到任何答案）

我有一张包含一些信息的表格，可以加入用户或公司。我看到解决这个问题的三种方法：

1.  给表一个 join_user_id 列和一个 join_company_id 列，并且只填写两者之一。
2.  创建一个 join_id 列和一个 joins_with_table 列
3.  复制主表，以便有两个版本，一个只有一个 join_user_id，一个只有一个 join_company_id。

我立即排除 3，因为它不干。我的问题是，其中哪一个是真正的规范化设计（或者都不是）？

我如何处理以下缺点： 1\. 留下一堆空的，如果第三张桌子来了不会优雅地增长，我如何简洁地加入？2\. 如何强制执行外键约束？如何简洁地加入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:16:27.917

不声称这是最佳实践，或者即使它适用于您的情况，但第四个选项可能是将共同的列`user`和`company`表保留在单独的表中（也许`user_comp_base`）。`user_details`然后，用户和公司详细信息可以使用与`company_details`表中相同的键进入单独的`user_company_base`表（该表可能还包含一个列，告诉哪个表包含该行的详细信息）。

然后你只需要`join_id_user_comp_base`在你的表中解决外键约束和简洁连接的问题。当然，如果需要详细信息，这是以加入另一个表 ( `user_details`OR )为代价的。`comp_details`

**编辑：**我认为这个概念被称为表继承。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T20:26:09.400

1 或 2 都不是第三种范式，因为在一个列中设置一个值会告诉您有关另一列中的值的一些信息（这不是主键）。这打破了完全依赖于 3NF 所需的主键的特性。

我肯定会排除选项 2，因为创建外键会很棘手/不可能，并且可能会导致混淆列中值的含义。如果有人改`joins_with_table`列不改`join_id`列，你可能不知道！

要在 3NF 中对此进行建模，您需要创建两个新表，一个用于用户，一个用于公司。这些将有`original_table_id, user_id`（或公司），以`original_table_id`作为主键。然后，您需要验证一个表或另一个表中是否只有一个条目。

就个人而言，我仍然会考虑将这些作为原始表中的额外列，除非您认为您可能会添加更多需要有条件地引用的表。你不应该设计来避免空值，所以我不会担心这个。如果您需要在此表中返回有关公司和用户的信息，则此解决方案和额外表方法都需要对`user`and表进行外部连接，因此查询复杂性没有真正的区别。`company`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T00:29:59.460

> 其中哪一个是真正的规范化设计（或都不是）？

所有这些都是“标准化”的，但并非所有这些都同样有用。

> 1）留下一堆空洞，不会优雅地成长。

大多数 DBMS 相当有效地存储 NULL。通常是一个字节，在理想情况下，在某些 DBMS 上甚至只有一个位。

您可以使用 CHECK 来确保其中一个是非 NULL。

> 2）如何强制执行外键约束？

理论上，您可以`joins_with_table`向下迁移 FK，然后在引用表中使用 CHECK 以确保正确的类型。显然，这很尴尬并且浪费空间（除非 DBMS 支持计算/虚拟列）。

您可以依赖触发器或（上帝保佑）应用程序逻辑，但应尽可能首选声明性约束，因为它们的简单性、健壮性和速度。

> 我立即排除 3，因为它不干。

不幸的是，关系数据库通常不支持我们都熟悉的面向对象编程的概念，因此可能会遭受一些不必要的重复。例如，在这种情况下，表继承（其中基表定义“结构”，子表定义特定 FK）将是减轻重复的理想选择。

事实上，一些重复并不是世界上最糟糕的事情，只要你不让爆炸不成比例。

> 如何简洁地加入？

我不确定我是否理解您的问题-请澄清。根据您的需要，JOIN 不仅会受到表设计的极大影响，还会受到[键设计](https://stackoverflow.com/a/13975260/533120)的影响。

* * *

总而言之，我可能会选择（1），除非您预计其他可能需要（3）的差异。

# objective-c - 自定义 MKOverlayView 绘图

> ID：14202355
> 
> 赞同：1
> 
> 时间：2013-01-07T19:04:16.560
> 
> 标签：objective-c, ios, mkoverlay

我正在尝试创建一个自定义`MKOverlayView`类，该类自正常以来绘制覆盖，`MKOverlay`并且`MKOverlayView`不适合我正在构建的应用程序的需求。

我在绘制多边形叠加层时遇到问题；它看起来没有我让`MKOverlayView`画出来的那么好，我的意思是边缘不清晰，当你放大地图时都是像素化的。由于某种原因，从点到点的线也不会被绘制。

此外，在放大某些多边形时，绘图会被剪掉，直到我再次缩小。

这是我的绘图代码

```
- (void)drawMapRect:(MKMapRect)mapRect zoomScale:(MKZoomScale)zoomScale inContext:(CGContextRef)context{
MapOverlay *newOverlay = (MapOverlay *)self.overlay;
CGColorRef ref2 = [newOverlay.strokeColor CGColor];
CGContextSetLineWidth(context, newOverlay.lineWidth);
CGColorRef ref = [newOverlay.fillColor CGColor];

int _countComponents = CGColorGetNumberOfComponents(ref);

if (_countComponents == 4) {
    const CGFloat *_components2 = CGColorGetComponents(ref);
    CGFloat red     = _components2[0];
    CGFloat green = _components2[1];
    CGFloat blue   = _components2[2];
    CGFloat alpha = _components2[3];

    CGContextSetRGBFillColor(context, red, green, blue, alpha);

}

for (int i=0; i<newOverlay.coordinates.count; i++){
    if(i % 2 == 0) {
        CLLocationCoordinate2D p;
        p.latitude =  (CLLocationDegrees)[(NSString *)[newOverlay.coordinates objectAtIndex:i+1]floatValue];
        p.longitude =  (CLLocationDegrees)[(NSString *)[newOverlay.coordinates objectAtIndex:i] floatValue];
        //CLLocation *p = [[CLLocation alloc] initWithLatitude:(CLLocationDegrees)[(NSString *)[newOverlay.coordinates objectAtIndex:i+1] floatValue] longitude:(CLLocationDegrees)[(NSString *)[newOverlay.coordinates objectAtIndex:i] floatValue]];
        MKMapPoint point = MKMapPointForCoordinate(p);
        CGPoint point2 = [self pointForMapPoint:point];
        if (i==0){
            CGContextMoveToPoint(context, point2.x, point2.y);
        }else{
            CGContextAddLineToPoint(context, point2.x, point2.y);
        }
    }

}
CGContextDrawPath(context, kCGPathFillStroke);
//CGContextStrokePath(context);
} 
```

我发现关于自定义类以及如何在地图上绘制的信息很少，`MKOverlayView`但这些是我用来执行此操作的 2 个教程

[http://spitzkoff.com/craig/?p=65](http://spitzkoff.com/craig/?p=65)

[http://i.ndigo.com.br/2012/05/ios-maps-with-image-overlays/](http://i.ndigo.com.br/2012/05/ios-maps-with-image-overlays/)

**更新**

我有一种感觉，它可能与叠加层的边界框有关，因为如果我返回`bounding box of the world`它，它会显示得很好，但绘制所有可能的叠加层显然效率不高。

这是我在自定义 MKOverlay 类中找到叠加层边界框的方法

```
- (MKMapRect)boundingMapRect{

double maxY = 0;
double minY = 0;
double maxX = 0;
double minX = 0;

for(NSUInteger i = 0;i < coordinates.count; i++) {
    if(i % 2 == 0) {
        CLLocationCoordinate2D tempLoc;
        tempLoc.latitude =(CLLocationDegrees)[(NSString *)[coordinates objectAtIndex:(NSUInteger)i + 1] floatValue];

        tempLoc.longitude = (CLLocationDegrees)[(NSString *)[coordinates objectAtIndex:(NSUInteger)i] floatValue];

        MKMapPoint tempPoint = MKMapPointForCoordinate(tempLoc);
        if(i == 0){
            minX = tempPoint.x;
            minY = tempPoint.y;
            if(tempPoint.x > maxX){
                maxX = tempPoint.x;
            }
            if (tempPoint.y > maxY){
                maxY = tempPoint.y;
            }
        }else{
            if(tempPoint.x > maxX){
                maxX = tempPoint.x;
            }
            if(tempPoint.x < minX){
                minX = tempPoint.x;
            }
            if (tempPoint.y > maxY){
                maxY = tempPoint.y;
            }
            if(tempPoint.y < minY){
                minY = tempPoint.y;
            }
        }

    }
}

MKMapRect b2 = MKMapRectMake(minX, maxY, minX-maxX, minY-maxY);

return b2;
//return MKMapRectWorld;
} 
```

# java - Android：我如何动画到我当前的位置

> ID：14202356
> 
> 赞同：0
> 
> 时间：2013-01-07T19:04:31.617
> 
> 标签：java, android, google-maps, gps, location

如何使我的应用程序动画到我当前的位置？我的部分代码如下所示：

```
compass.enableMyLocation();
                lm = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
                lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 20000, 0, this); 
```

我知道，我必须使用 animateTo 方法。但是我怎样才能将我当前的位置代码和 animateTo 结合起来呢？

```
controller.animateTo(???);
          controller.setZoom(16); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:27:30.467

您似乎正在使用 Google Maps Android API v1，该版本现已[弃用](https://developers.google.com/maps/documentation/android/v1/)。该 API 有一个内置的覆盖，即`MyLocationOverlay`专门针对这种场景。

不过，我建议将您的应用升级为使用[Google Maps Android API v2](https://developers.google.com/maps/documentation/android/)。此 API 没有针对此场景的现成（内置）功能，但可以通过几行代码来实现，如[本答案所示](https://stackoverflow.com/a/13753518/1103584)。

# php - 自动登录中的 setcookie 和 header

> ID：14202359
> 
> 赞同：0
> 
> 时间：2013-01-07T19:04:50.870
> 
> 标签：php, cookies, login

我想在用户注册后自动登录。我有相同的登录脚本，注册后它不起作用。有什么问题？这是一个有点旧的脚本，但我真的想让它再次工作。 [http://pastie.org/private/ibfebmgzfo6ovug0pnjudg](http://pastie.org/private/ibfebmgzfo6ovug0pnjudg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:11:51.753

我强烈建议不要使用该脚本或大幅更改它。使用 MD5 散列密码已过时，密码通过`POST-request`纯文本传递到此页面。此外，它还容易受到 SQL 注入的影响。一点都不安全。

# java - 使用 Shell.getToolBar() 时是否可以防止在 Mac OS 的 SWT 中拖动 shell？

> ID：14202360
> 
> 赞同：2
> 
> 时间：2013-01-07T19:04:58.903
> 
> 标签：java, macos, swt, toolbar

可以使用 SWT 3.7 中引入的 Shell.getToolBar() 将任何类型的自定义控件放入 SWT 中的外壳修剪区域。需要创建一个具有 SWT.SEPARATOR 样式的 ToolItem 并为其分配一个自定义控件。我的“自定义控件”是整个工具栏区域，包​​括一些基于复合的自定义小部件。

请参阅此错误评论以了解我大致所做的事情：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=222859#c124](https://bugs.eclipse.org/bugs/show_bug.cgi?id=222859#c124)

问题是用户可以通过单击统一工具栏的“空白”区域来拖动外壳。看来我的自定义控件被视为“空白空间”。我的一个控件支持拖放。但是，当它放在统一的工具栏区域时，拖动是拖动外壳，而不是应该拖动的小部件内容。实际上，两者同时发生。所以我需要做的就是以某种方式阻止事件被进一步处理。将 SWT.MouseDown 的侦听器附加到我的自定义控件并将 event.doit 设置为 false 不起作用。

# uml - ActionExecutionSpecification 和 BehaviorExecutionSpecification

> ID：14202361
> 
> 赞同：9
> 
> 时间：2013-01-07T19:05:09.200
> 
> 标签：uml, sequence-diagram, specifications

关于UML规范上层结构，我读到了

## ActionExecutionSpecification 和 BehaviorExecutionSpecification

*   它们之间有什么区别？*   在哪些情况下我应该使用它们中的每一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:41:07.340

`ActionExecutionSpecification`和都是`BehaviorExecutionSpecification`的专业化`ExecutionSpecification`。它们用于分别映射到`Action`和`Behavior`概念。

`Action`有关 UML和`Behavior`语义的更多信息，请参阅相应的上层结构章节。

# tomcat - Tomcat 重启后 Tomcat webapps 消失

> ID：14202362
> 
> 赞同：0
> 
> 时间：2013-01-07T19:05:10.537
> 
> 标签：tomcat, web-applications, amazon-web-services, amazon-ec2

我正在运行 Tomcat 4.1（客户端需要它）并且 webapps 已经安装/分解在 webapps 文件夹中。我使用 install webapp via directory 将其放入 Tomcat 管理器，一切正常。

但是，当我重新启动 Tomcat 时，webapps 从 Tomcat 管理器中消失了。

任何想法为什么会这样？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T03:58:02.663

其原因是以下行内的应用程序`.xml`文件内部`Tomcat\webapps\`指向错误的应用程序位置：

```
docBase="C:\Program Files\Apache Software Foundation\Tomcat 4.1\server\webapps\corepath" 
```

修复该参数以指向机器上的实际位置解决了该问题。现在在 Tomcat 启动时，所有应用程序都被加载回 Tomcat。

# ruby - 通过网络套接字扩展多通道发布/订阅

> ID：14202365
> 
> 赞同：3
> 
> 时间：2013-01-07T19:05:18.060
> 
> 标签：ruby, websocket, eventmachine, em-websocket

我一直在研究[这个要点](https://gist.github.com/957367)，它提供了通过 websockets 进行通道 pub/sub 样式通信的最小功能实现。

对于多个通道，我们可以拥有`EM::Channel`可以根据要求动态创建的实例的本地哈希。我关心的是如何扩展此设置以支持服务器实例集群，或者有哪些替代方案可通过可用于集群部署的 Web 套接字促进通道发布/订阅？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-01T19:12:22.093

[Jet](http://jetbus.io)协议提供严格的发布/订阅（无轮询）语义并且是开源的。它比订阅“Channels”强大得多（在 Jet 措辞中称为“Fetching”。

# xcode - 如果框架列表为空，如何将 Xcode 4 中的核心基础框架添加到裸命令行工具？

> ID：14202366
> 
> 赞同：8
> 
> 时间：2013-01-07T19:05:18.760
> 
> 标签：xcode, xcode4, frameworks, command-line-tool

我使用 Xcode 4.5 创建了一个新的命令行工具（创建 Mac OS X 命令行应用程序的方法），但我现在想为其添加一个框架。构建阶段的框架列表为空。

我可以添加我编写的 .h/.m 目标 C 类头文件和实现文件，但我不知道如何将“命令行工具”制作成旧 Xcode 可能有不同模板的东西；一个命令行应用程序（不是 Cocoa 应用程序），它可以访问 Core Foundation 框架，或者我选择添加到它的任何其他框架。

另外，Xcode 3 中曾经有一个“ [Core Foundation Tool](https://stackoverflow.com/questions/2697883/how-do-you-create-a-simple-objective-c-command-line-project-in-xcode) ”选项，现在在哪里？

（更新：我在 Target Dependencies 中单击“+”，这似乎很明智，但它只给了我要添加的内容的空列表。我认为必须在其他地方进行更改才能使内容显示在 Target Dependencies ，如果我可以说，这对新用户来说并不完全清楚。因此，这个公共服务消息、问题和答案。嘿，Apple，你如何将其更改为“链接库或框架”，以便框架一词出现在那里。当我们唯一知道的词是框架时，让我们猜测我们是在添加库还是依赖项，令人困惑。）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-07T19:13:14.003

转到“将二进制文件与库链接”选项，然后单击 +。它位于 Xcode 项目设置的 Build Phases 页面上。您可能想要折叠 Target Dependency 和 Compile Sources 部分，以便 Link Binaries 部分在您的屏幕上完全可见。

![在此处输入图像描述](../Images/9a5873eece1469cc766fabd8154a9aaf.png)

脚注：

我的错误是在 Target Dependencies 部分单击“+”，我认为我可能会“添加对 CoreFoundation 的依赖”，这不是你所做的。当我认为 Xcode 没有互换使用框架和库术语时，我还发现将二进制文件与库链接令人困惑，在这种情况下，令人困惑。隐藏加号图标也无济于事，您必须滚动才能访问它，否则会折叠两个顶部部分。在我看来，Xcode 充满了“用户界面非常混乱”的领域：

![在此处输入图像描述](../Images/40ae62dfd5b713e4c1efa29423dc9b71.png)

此外，`#import <CoreFoundation/CoreFoundation.h>`根据需要添加到您的实施 (.m) 文件中。

# selenium - 如何连续检查警报是否存在？

> ID：14202367
> 
> 赞同：0
> 
> 时间：2013-01-07T19:05:18.447
> 
> 标签：selenium, selenium-webdriver

我正在测试 Gmail 未读邮件计数，一切正常，但由于互联网速度慢，我收到“某些功能无法加载警报”如何处理？

我的问题是：我需要不断检查警报，因为它可以随时出现，如果它出现，那么只有我可以关闭它。即使我们使用单独的线程来检查警报是否存在

```
public void checkAlert() 
{
    try 
    {
        WebDriverWait wait = new WebDriverWait(driver, 2);
        wait.until(ExpectedConditions.alertIsPresent());
        Alert alert = driver.switchTo().alert();
        alert.accept();
    } 
    catch (Exception e) 
    {
       //exception handling
    }
} 
```

它也行不通，我想任何想法！！！！！！！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:06:44.060

我认为 GMail 在自定义弹出窗口中显示消息（实际上它是 div 看起来像弹出窗口）。警报类只能与本机 java 脚本弹出窗口一起使用。

# sas - 在数据集的行内排名 [sas]

> ID：14202371
> 
> 赞同：4
> 
> 时间：2013-01-07T19:05:29.167
> 
> 标签：sas

假设我有一个包含`n`行和`p`列的数据集，因此数据集中的每个条目都包含一个实数。我正在寻找一种方法来对`p`每一行中的列进行排名。这个排名的输出应该是一个包含平局`p`的排名的长度向量。

所以，假设我的数据集有 5 列。第一行可能类似于`row 1 = {10, 13, 3, 3, -4}`. 我想对这一行进行一些操作，最后得到结果`row 1 ranks = {3, 4, 2, 2, 1}`。第二行可能是这样`row 2 = {8, 3, -6, 5, 2}`的，这一行的结果应该是`row 2 ranks = {5, 3, 1, 4, 2}`.

此功能是否在 SAS 中实现？我生成的代码不考虑平局，但它们经常发生，以至于纠正错误完成的行排名需要不合理的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T19:53:28.297

有趣的问题；这是一种可能的解决方案：

```
data have;
   p1=10; p2=13; p3=3;  p4=3; p5=-4; output;
   p1=8;  p2=3;  p3=-6; p4=5; p5=2;  output;
run;

data want;
   set have;
   array p(*) p1-p5;
   array c(*) c1-c5;
   array r(*) r1-r5;

   /* Copy vector to temp array and sort */
   do i=1 to dim(p); 
      c(i) = p(i); 
      end;
   call sortn(of c(*));

   /* Search new sorted array for the original position */
   do i=1 to dim(c);
      if i = 1 then rank=1;
      else if c(i) ne c(i-1) then rank + 1;
      do j=1 to dim(p);
         if p(j) = c(i) then do;
            r(j) = rank;
            end;
         end;
      end;

   /* PUT statement to see result in log */
   put +3 p(*)
     / +3 c(*)
     / +3 r(*);

   drop i j rank c1-c5;
run; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T19:47:11.533

在我看来，您需要几个数组才能做到这一点。

1.  数组 1：存储排名的数组
2.  数组 2：对值进行排序的数组
3.  数组 3：原始未更改的数据

我现在没有时间编写代码，但是使用这样的东西会做很多繁重的工作：

[http://support.sas.com/kb/24/754.html](http://support.sas.com/kb/24/754.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T20:20:38.217

即使 OP 说他不使用 IML 以防其他人发现这个有用的搜索，也不妨添加这个。IML 确实是解决这个问题的最简单方法，因为它基本上是一个向量/矩阵问题......

```
proc iml;
p={10 13 3 3 -4, 5 6 5 2 3};
r=j(2,5,.);
print p r;
do i = 1 to nrow(p);
  r[i,]=ranktie(p[i,]);
end;
print p r;
quit; 
```

它确实对待尝试与 OP 略有不同，因此需要一些工作才能使其与请求的解决方案完全一样 - 但一般来说，1,2.5,2.5,4,5 [或 1,2,2,4,5]可能是您真正想要的，而不是 1,2,2,3,4。4 和 5 应该保持 4 和 5，而不是移动到 3 和 4，当 2 和 3 并列时。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-07T21:31:51.570

只是为了好玩，鉴于 OP 对想要一个带有等级的新数据集的回答，这里是 PROC RANK 方法。可能不会比数据步骤快，但在多种情况下可能更简单、更容易使用，并且具有额外的优势，即您不会在编码中真正犯错误（没有实际崩溃）。

```
data have;
input id x1-x5;
datalines;
1 10 13 3 3 -4
2 5 6 5 2 3
;;;;
run;

proc transpose data=have out=temp;
by id;
var x1-x5;
run;
proc rank data=temp out=temprank;
var col1;
by id;
run;
proc transpose data=temprank out=want(drop=_name_ _label_);
by id;
var col1;
id _name_;
run; 
```

# sprite - 在 Corona SDK 中控制 Z 深度的正确方法是什么？

> ID：14202376
> 
> 赞同：1
> 
> 时间：2013-01-07T19:05:57.783
> 
> 标签：sprite, coronasdk, zbuffer

在 Corona SDK 中控制 Z 深度的正确方法是什么？

看起来精灵本身并没有存储任何 Z 信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T12:52:22.650

他们其实已经...

所有精灵都属于一个组（即使它是默认组）。

z 顺序是组索引（即：组中的第一个精灵首先渲染，依此类推）。

您不能将其更改为任意值，因为精灵不能共享一个插槽，组数组上也不能有“洞”。

但是有函数 sprite.toFront() 和 sprite.toBack()

我个人创建了更多组来控制排序，我的一个应用程序是雪球，我创建了三个组，一个用于背景，一个用于前景，它们之间有一层雪，这样我没有每帧执行 background.toBack() 和 foreground.toFront() 。

# javascript - jquery masonry 不能处理奇怪的窗口分辨率

> ID：14202377
> 
> 赞同：0
> 
> 时间：2013-01-07T19:05:58.307
> 
> 标签：javascript, responsive-design, resolution, jquery-masonry

你可以在这里看到它[http://obecadmin.dev.f13.cz/](http://obecadmin.dev.f13.cz/)，分辨率从 1000 到大约 1400，几乎每个奇数（1379 等）宽度分辨率都会导致框位于彼此下方而不是两列......任何想法有什么问题？

整个网站都是响应式的，所以每个 for 是 50%，砌体是用

```
columnWidth: function(containerWidth) {
    return (containerWidth / 2);
}, 
```

我试图 Math.floor 容器宽度/2，因为我认为它计算的宽度错误（应该有+1px），但它只会导致错误的定位发生在甚至分辨率上。

Github 问题在这里[https://github.com/desandro/masonry/issues/274](https://github.com/desandro/masonry/issues/274)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:23:07.557

好像你的问题是奇数。尝试这个

```
columnWidth: function(containerWidth) {
    var size = (containerWidth / 2);

    if(!isEven(size))
        size = size + 1;
    return size;
}

function isEven(value) {
    return (value%2 == 0);
} 
```

# datasource - 获取过滤后的数据源的数据

> ID：14202380
> 
> 赞同：7
> 
> 时间：2013-01-07T19:06:16.063
> 
> 标签：datasource, kendo-ui

我正在对数据源应用过滤器，并且我想从此数据源中检索所有过滤后的数据。

过滤器正确应用，我的 DropDownList 仅显示过滤后的项目，但是当我想使用 Javascript 获取数据时，我正在检索每一个数据，而不仅仅是过滤后的数据。

这是一些代码：

```
dropdownProduct.dataSource.query({ filter: filter }); 

var data = dropdownProduct.dataSource.data(); 
```

在数据变量中，我拥有所有数据。就像我说的那样，查询正在运行，因为我的下拉列表仅显示过滤后的数据。

我该怎么做才能让数据变量中只有过滤后的数据？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-07T19:12:46.440

这是因为过滤是在客户端应用的 - **data**方法返回所有数据。您需要使用**[view](http://docs.kendoui.com/api/framework/datasource#view)**方法仅检索对最终用户可见的数据。

# iframe - 使 iframe 不可见

> ID：14202392
> 
> 赞同：6
> 
> 时间：2013-01-07T19:06:51.390
> 
> 标签：iframe

我在网站上显示了一个 iframe。我想做的是在我的网站上显示 iframe，但要让它在用户查看它时不会意识到它是 iframe。现在，当您“右键单击” iframe 时，它​​会显示“查看框架源”。有没有办法摆脱它，所以用户只会认为 iframe 是网站的一部分而不是 iframe？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T19:11:02.493

```
<iframe width="700" scrolling="no" height="400" frameborder="0" src="yourFramePage.html" seamless="seamless"> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T19:16:10.753

您可以绑定到右键单击并阻止默认操作。要实现相同的功能，请查看[此问题](https://stackoverflow.com/questions/706655/bind-event-to-right-mouse-click)。但是，这只有在您可以控制 iframe 中的 html 页面时才可行。

一个可行的替代~~方案 我所知道的唯一替代方案~~是 iframe 中的`seamless`属性（新的 HTML5 添加），它在浏览器中并没有得到一致的支持。（当前浏览器支持仅限于 chrome）。

对于其他浏览器，您可以做一些肤浅的事情，例如：

```
 iframe[seamless]{
    background-color: transparent;
    border: 0px none transparent;
    padding: 0px;
    overflow: hidden;
} 
```

无论如何，没有完全证明的解决方案，因为最终用户始终可以使用 html 的源代码。如果可能，请尝试使用 ajax 重新实现您的解决方案。如果您在自己的网站中显示第三方网站内容，那么我强烈建议您不要伪装区别，以便内容看起来是您网站的一部分。

[更新]

如果您确实有使用 iframe 的令人信服的理由，disqus 评论平台的创建者的[这个演示文稿提供了一种有见地的方法来模拟无缝 iframe。](http://benvinegar.github.com/seamless-talk)演示的重点是使用`window.postMessage`启用父 html 文档和 iframe 之间的通信。

# javascript - 在同一根目录下获取和下载

> ID：14202393
> 
> 赞同：0
> 
> 时间：2013-01-07T19:06:54.343
> 
> 标签：javascript, node.js, express

所以我有这条路线**支付/交易**，它可以获取所有数据。我想做的是在不添加任何新路由或查询参数的情况下获取 CSV 文件，因此我的路由看起来像**payment/transactions.csv**并根据 mime 类型发送响应。我正在使用 NODEJS 和 EXPRESS。非常感谢您的帮助！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:22:47.580

你可以像这样修改你的路线：

```
app.get("/payment/transactions(:extension?)", function... 
```

这会为您的路线添加一个可选参数，您可以使用`req.params.extension`.

* * *

附注：我更愿意检查`req.accepts`属性以查看客户端请求的类型。见[http://expressjs.com/api.html#req.accepts](http://expressjs.com/api.html#req.accepts)

# javascript - 文本区域的多选选项

> ID：14202394
> 
> 赞同：0
> 
> 时间：2013-01-07T19:06:55.810
> 
> 标签：javascript

我仍在学习 javascript，我当前的应用程序有问题
从这个[小提琴](http://bit.ly/Vyncl1)，它不起作用，但它可以大致显示我想要实现的目标。

如果我选择 Banana & Mouse，我的输出将是：
Banana is yellow
Mouse is small

我想知道如何通过单击按钮来调用第二个函数，以及如何在这种情况下重用我的代码，因为最后还有另外 5 个选择选项。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:21:16.670

您可以将 id 作为参数传递给函数并相应地操作每个元素值。

```
function displayResult (fruitId,sizeId) {
    var selTag = document.getElementById(fruitId);
    var fruit=selTag.options[selTag.selectedIndex].text;
    if (fruit=="Apple") {
      fruit = fruit + " is red";
    } else if (fruit=="Orange") {
      fruit = fruit + " is orange";
    } else if (fruit=="Banana") {
      fruit = fruit + " is yellow";
    }
    selTag = document.getElementById(sizeId);
    var animal=selTag.options[selTag.selectedIndex].text;
    if (animal=="Elephant") {
      animal = animal + " is big";
    } else if (animal=="Mouse") {
      animal = animal + " is small";
    } else if (animal=="Whale") {
      animal = animal + " is enormous";
    }
    document.getElementById('mytextbox').value = fruit+"\n"+animal;;
} 
```

[**演示**](http://jsfiddle.net/6bz3r/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T19:22:37.880

你可以让它更简单。但这是您正在寻找[的链接](http://jsfiddle.net/6bz3r/2/)

```
function displayResult (selId) {
    var selTag = document.getElementById(selId);
    var fruit=selTag.options[selTag.selectedIndex].text;
if (fruit=="Apple") {
  fruit = fruit + " is red";
} else if (fruit=="Orange") {
  fruit = fruit + " is orange";
} else if (fruit=="Banana") {
  fruit = fruit + " is yellow";
}
  document.getElementById('mytextbox').value = fruit;
  animalText();
}

function animalText(){
  var selTag = document.getElementById("size");
    var _size=selTag.options[selTag.selectedIndex].text;

  if (_size=="Elephant") {
  _size = _size + " is big";
} else if (_size=="Mouse") {
  _size = _size + " is small";
} else if (_size=="Whale") {
  _size = _size + " is enormous";
}

      document.getElementById('mytextbox').value = document.getElementById('mytextbox').value +"\n"+ _size;
} 
```

# c# - 检查列表中重复项的更好方法

> ID：14202396
> 
> 赞同：-2
> 
> 时间：2013-01-07T19:07:00.757
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-validation

我正在使用验证属性将对象列表从视图发布到控制器时检查是否有任何重复项。它有效，但我想知道是否有更好的方法可以遵循（可能是添加客户端验证）。任何反馈表示赞赏。

```
[AttributeUsageAttribute(AttributeTargets.Property, AllowMultiple = true, Inherited = false)]
public class DuplicateObjectAttribute : ValidationAttribute
{
    public override bool IsValid(object value)
    {
       if (value != null)
       {
         if (value.GetType() == typeof(List<OrdersVM>))
         {
             List<OrdersVM> objOrdersList = (List<OrdersVM>)value;
             if (objOrdersList != null && objOrdersList.Count > 0)
             {
                 if (objOrdersList.Select(p => p.OrderId).Distinct().Count() != objOrdersList.Select(p => p.OrderId).Count())
                 return false;
             }
         }
       }
       return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T20:08:30.010

你做的方式还不够好吗？我做类似的事情：

```
var duplicates = listOfItems
    .GroupBy(i => i)
    .Where(g => g.Count() > 1)
    .Select(g => g.Key);

foreach (var d in duplicates)
    ;//dosomething 
```

它基于 MSDN 条目，[Find Duplicates using LINQ](http://blogs.msdn.com/b/ericwhite/archive/2008/08/19/find-duplicates-using-linq.aspx)

# php - 安全性 - 基于用户内容包含文件

> ID：14202401
> 
> 赞同：1
> 
> 时间：2013-01-07T19:07:25.843
> 
> 标签：php, security, nginx, include

出于安全原因以及我不想将静态文件暴露给未经授权的人，每个请求都会传递给 PHP。

我担心有人通过`$_SERVER["REQUEST_URI"]`变量注入一些恶意代码的可能性。我试图删除子文件夹引用，但我仍然不知道它是否安全。

**Nginx**

```
rewrite ^ /index.php last; 
```

**索引.php**

```
<?php
    $uri = $_SERVER["REQUEST_URI"];
    $uri = strlen ($uri) > 1 ? substr ($uri, 1) : "index.html";
    $uri = preg_replace ("/\/?\.\./", "", $uri, -1); // Remove sub-folders

    if (file_exists (getcwd () . "/" . $uri)) {
        $extension = substr ($uri, strrpos ($uri, "."));

        switch ($extension) {
            case ".css": $mime = "text/css"; break;
            case ".js": $mime = "application/javascript"; break;
            default:
                $info = finfo_open (FILEINFO_MIME_TYPE);

                $mime = finfo_file ($info, $uri);

                finfo_close ($info);
            break;
        }

        if ($mime === false)
            header ("Content-Type: text/html; charset=utf-8"); // Default
        else
            header ("Content-type: " . $mime);

        require ($uri);
    }
    else {
        // Error, blah blah blah
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:13:09.170

是的，您担心 LFI（本地文件包含）攻击。这是可能的。当前，当您检查 . URI 中的 / 和 \ 字符，这将防止目录遍历攻击。这是相当不错的。如您所料，如果您包含这样的文件：

index.php?file=something.php 并在 index.php 中包含 $_GET['file'];

攻击者可以读取服务器中的每个文件，如下所示：index.php?file=../../../../../../../../../../etc/密码

所以你必须采取措施。这是 Imperva 关于如何防止 LFI 和 RFI（远程文件包含）攻击的一篇非常好的文章： [https ://www.imperva.com/lg/lgw.asp?pid=463](https://www.imperva.com/lg/lgw.asp?pid=463)

无需注册： [http ://www.slideshare.net/Imperva/how-to-prevent-rfi-and-lfi-attacks](http://www.slideshare.net/Imperva/how-to-prevent-rfi-and-lfi-attacks)

也在这里：http: [//25yearsofprogramming.com/blog/2011/20110124.htm](http://25yearsofprogramming.com/blog/2011/20110124.htm)

# python - Google 电子表格 API 错误

> ID：14202406
> 
> 赞同：2
> 
> 时间：2013-01-07T19:07:38.757
> 
> 标签：python, google-spreadsheet-api

我正在尝试使用 python 脚本访问谷歌文档中的电子表格。但是在执行以下“标准”示例时，我总是会出错：

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

import time
import gdata.spreadsheet.service

if __name__ == "__main__":

    email = 'email@gmail.com'
    password = 'secret'
    weight = '180'
    # Find this value in the url with 'key=XXX' and copy XXX below
    spreadsheet_key = '0AiKRVC_dEsdfafdC1Id2FGdGVMR1pHb3E4UGlmbUYxS1E'
    # All spreadsheets have worksheets. I think worksheet #1 by default always
    # has a value of 'od6'
    worksheet_id = 'od6'

    spr_client = gdata.spreadsheet.service.SpreadsheetsService()
    spr_client.email = email
    spr_client.password = password
    spr_client.source = 'Example Spreadsheet Writing Application'
    spr_client.ProgrammaticLogin()

    # Prepare the dictionary to write
    dict = {}
    dict['date'] = time.strftime('%m/%d/%Y')
    dict['time'] = time.strftime('%H:%M:%S')
    dict['weight'] = weight
    print dict

    entry = spr_client.InsertRow(dict, spreadsheet_key, worksheet_id)
    if isinstance(entry, gdata.spreadsheet.SpreadsheetsList):
        print "Insert row succeeded."
    else:
        print "Insert row failed." 
```

它根本行不通。我总是收到以下错误

```
{'date': '01/07/2013', 'weight': '180', 'time': '19:58:44'}

Traceback (most recent call last):
  File "/Path/to/Project//Python2GoogleDocs/src/P2GTest.py", line 31, in <module>
    entry = spr_client.InsertRow(dict, spreadsheet_key, worksheet_id)
  File "/Library/Python/2.7/site-packages/gdata/spreadsheet/service.py", line 339, in InsertRow
    converter=gdata.spreadsheet.SpreadsheetsListFromString)
  File "/Library/Python/2.7/site-packages/gdata/service.py", line 1236, in Post
    media_source=media_source, converter=converter)
  File "/Library/Python/2.7/site-packages/gdata/service.py", line 1358, in PostOrPut
    'reason': server_response.reason, 'body': result_body}
gdata.service.RequestError: {'status': 400, 'body': 'We&#39;re sorry, a server error occurred. Please wait a bit and try reloading your spreadsheet.', 'reason': 'Bad Request'} 
```

这里出了什么问题？电子邮件和密码正确，我从文档本身的 url 中提取了电子表格密钥。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T23:56:23.547

确保字典中的列与电子表格中的列匹配。如果它们不在工作表中，您将收到错误消息。此外，虽然这不是您的问题，但您要确保您的字典键是小写的列名，所有空格都替换为`_`'s。这是另一个潜在错误的来源（并且不止一次让我绊倒:)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:10:30.703

尝试一个名为[python-google-spreadsheet](https://github.com/yoavaviram/python-google-spreadsheet)的库（我写的）。它旨在使您尝试做的事情比直接使用 API 简单得多。

# c# - 为什么在 RelayCommand 中使用弱引用？

> ID：14202408
> 
> 赞同：3
> 
> 时间：2013-01-07T19:07:40.363
> 
> 标签：c#, mvvm-light, weak-references

我最近从 MVVMLight 3 升级到 4，并注意到我的命令坏了。事实证明，在新的 RelayCommand（在 3.5 版中实现）中使用弱引用导致我使用的代码构造失败。我知道有一些关于内存泄漏的弱引用的论点，我只是不明白。

这失败了：

```
private void InitCommand()
{
    Command = new SwitchMainGridCommand<SwitchMainGridToolViewModel>(this).Command;
} 
```

失败是指当我使用已初始化并绑定到的 Command 属性时，它的支持方法已被垃圾收集，并且 Command 无法执行。有趣的是，Command 对象仍然存在，只是 SwitchMainGridCommand 上的支持属性现在消失了。在 RelayCommand 中的弱引用之前，Command 的引用也保持支持属性可用，即使 SwitchMainGridCommand 没有被显式保留。

这成功了：

```
SwitchMainGridCommand<SwitchMainGridToolViewModel> _refHolder = null;

private void InitCommand()
{
    _refHolder = new SwitchMainGridCommand<SwitchMainGridToolViewModel>(this);
    Command = _refHolder.Command;
} 
```

在分配了 Command 的 ViewModel 上创建 _refHolder 类变量将阻止收集 _refHolder.Command 引用的方法/属性。

我想这是弱引用的期望行为，我只是不确定为什么需要它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:42:09.787

这是 MSDN 上关于弱引用与强引用的文章： [MSDN Goodness](http://msdn.microsoft.com/en-us/library/aa970850.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T11:06:10.277

也许，我重复一遍也许是因为这个原因：

在 MvvmLight 逻辑和其他 mvvm 样式中，ViewModel 使用定位器“链接”到视图。现在，当您的 xaml 页面向前移动到下一页时，上一页的 Vm 仍然存在，使用命令 weak 可以轻松释放内存。

第二个很简单，可以更好地控制对象的生命周期，让定位器唯一持有 Viewmodel 的引用，因此唯一可以决定何时何地释放

我希望这可以帮助你，我觉得如果 vm 仍然存在一段时间并不重要，主要是当你的软件不使用非常大的内存时。alloc 和 dealloc 影响严重影响软件的性能

# c# - DragLeave 事件在循环中触发

> ID：14202413
> 
> 赞同：1
> 
> 时间：2013-01-07T19:08:02.097
> 
> 标签：c#, wpf, drag-and-drop

我正在实现拖放功能。我只是想在拖动进入并且鼠标悬停在画布上时添加元素，并在拖动离开画布时`ObservableCollection`删除。`ObservableCollection`

不幸`DragLeave`的是，`DragEnter`即使光标在画布上并且我不移动它，它也会不断触发。为什么会发生？

# android - 以编程方式将新项目附加到 LinearLayout？

> ID：14202420
> 
> 赞同：0
> 
> 时间：2013-01-07T19:08:16.197
> 
> 标签：android

我正在尝试在 iPhone 上创建类似可编辑 UITableView 的东西。

![在此处输入图像描述](../Images/04ae6d446cd7440773fc9c5c65348f31.png)

我在列表末尾添加了一个按钮来添加新项目，这相当于 iphone 上的“+”按钮，这会将用户带到要添加的项目列表。我的问题是，当他们选择一个时，我不知道如何将其添加到列表中。

```
 <LinearLayout
            android:key="application_preferences"
            android:title="Applications">
    </LinearLayout> 
```

如何以编程方式在 LinearLayout 中附加视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:25:41.263

您可以使用[`addView`](http://developer.android.com/reference/android/view/ViewGroup.html#addView%28android.view.View%29)将子视图添加到 a `ViewGroup`，但也可以考虑仅使用[`ListView`](http://developer.android.com/reference/android/widget/ListView.html)而不是 a `LinearLayout`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T19:26:19.207

您的问题不是很清楚，但如果您尝试以编程方式向线性布局添加视图，只需使用`Layout Inflater`

```
LayoutInflater localLayoutInflater =(LayoutInflater)getBaseContext().getSystemService("layout_inflater");
 View myView = localLayoutInflater.inflate(R.layout.custom_layout, null);
 final LinearLayout ll=(LinearLayout)findViewById(R.id.linearlayoutID);
 ll.addView(myView); 
```

# java - java 程序的 UI 组件显示为空白框

> ID：14202421
> 
> 赞同：11
> 
> 时间：2013-01-07T19:08:22.167
> 
> 标签：java, user-interface

当我在我的计算机上运行 Java 程序（如 DbVisualizer 和 OpenProj）时，一些 UI 组件（如按钮、图像、复选框、滚动条等）显示为空白框。当您打开程序时，这些组件中的一些通常会首先正常显示，然后当您将鼠标悬停在它们上方时会变为空白。

我已经更新了 JRE 和视频驱动程序，并`-Dsun.java2d.noddraw=true;-Dsun.java2d.d3d=false;`按照 Java 论坛中的建议使用 调整了 JAVA_OPTS，但到目前为止，这些提议的解决方案都没有奏效。

我不认为这是特定于操作系统的问题，因为我检查了其他一些具有完全相同配置的操作系统（Windows Vista）和硬件的 PC，其中许多都没有出现这个问题。

可以在这里看到这种情况的屏幕截图：

![GUI 空白框](../Images/bcb3b0d56c1bec7914964450d0d29511.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-06T19:14:27.477

那些 JAVA_OPTS 必须用空格而不是分号分隔！

使用 jVisualVM 连接到应用程序并验证“JVM Arguments”部分是否包含您所需的所有选项。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-05T12:14:05.087

在使用 windows 基本主题时，我经常会发现许多图形故障。移动窗口会在其自身后面创建一个在背景窗口上方的轨迹，并且 UI 控件有时在鼠标悬停之前不会出现。

如前所述，尝试使用 Windows 航空主题，如果您不喜欢航空外观，只需关闭透明度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-10T09:08:56.037

我怀疑禁用 DirectDraw 将解决此问题，并且您尝试禁用它是不成功的。

正如 Ryan 所指出的，这些选项的格式似乎不正确。删除分号并在它们之间放置一个空格，或者更好的是，只使用`sun.java2d.d3d=false`. 该`sun.java2d.noddraw`标志已被[Java SE6u10](http://docs.oracle.com/javase/7/docs/technotes/guides/2d/flags.html#noddraw)废弃，现在设置为 true 与设置的效果相同`sun.java2d.d3d=false`。无需同时设置。

格式不正确的影响可以看下面的代码：

```
public class WrongArgs {
    public static void main(String[] args) {
        System.out.println("sun.java2d.noddraw: " + System.getProperty("sun.java2d.noddraw"));
        System.out.println("sun.java2d.d3d: " + System.getProperty("sun.java2d.d3d"));
    }
} 
```

使用 args 运行此代码：“-Dsun.java2d.noddraw=true;-Dsun.java2d.d3d=false;” 产生：

> sun.java2d.noddraw：真；-Dsun.java2d.d3d=假；
> 
> sun.java2d.d3d：空

使用参数“-Dsun.java2d.noddraw=true -Dsun.java2d.d3d=false”运行

> sun.java2d.noddraw：真
> 
> sun.java2d.d3d：假

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-10T08:18:11.663

这看起来更像是图形驱动程序问题。注意缺少的东西是如何通过将位图数据直接传输到图形卡来绘制的图像（图标、复选框）。在这种情况下， `sun.java2d.noddraw=false`and`sun.java2d.d3d=false`更像是一种黑客攻击，真的。

我会做的是：

*   检查我是否使用最新版本的 Java（如果您使用的是 64 位系统，切换到 64 位 Java 不会有什么坏处）
*   检查您的图形驱动程序，确保它们是最新版本
*   检查 Windows 服务包

也尝试使用改变[外观](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html)；也许这会有所帮助。

# javascript - 将电子邮件转换为 contentEditable 中的按钮

> ID：14202422
> 
> 赞同：1
> 
> 时间：2013-01-07T19:08:23.507
> 
> 标签：javascript

我正在尝试使用正则表达式将电子邮件转换为 contentEditable 内的按钮，但我意识到处理光标位置、添加删除功能等需要太多时间。我期望的样子是：

![在此处输入图像描述](../Images/7ac717942d54cb848138caefe9ca1af1.png)

我的第一个想法是使用一个文本区域，漂浮在一个 div 中。那也许是一个更好的主意。

但是......是否有一些著名的开放库来实现它？我已经看到很多标签库可以像 SO 上的标签栏一样，但我正在寻找需要的东西：

*   一个容器
*   匹配某些东西的正则表达式
*   将其转换为按钮
*   按退格键删除它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:17:13.757

[fcbkcomplete 插件](http://www.emposha.com/javascript/fcbkcomplete.html)怎么样？

# git - 将子分支重新从主分支

> ID：14202428
> 
> 赞同：6
> 
> 时间：2013-01-07T19:08:54.690
> 
> 标签：git, git-branch

仍然在GIT周围环绕我的头......

我错误地从另一个分支创建了一个分支。看起来像这样：

```
 c1...c2
                   /
            b1...b2...b3
           /
a1...a2...a3...a4 
```

打算这样做：

```
 b1...b2...b3
           /
a1...a2...a3...a4
           \
            c1...c2 
```

我认为有一些方法可以解决这个问题，但是在使用文档等一段时间后。我没有看到它。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:29:17.007

从`c2`分支：

```
git rebase --onto a3 b2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T22:51:14.747

假设您的分支是 a,b & c ，如果您从**b创建分支****c**而不是从分支**a创建它**

 ****这就是我要解决的问题

```
git rebase --onto a b c 
```****

# python - Don't convert newline when reading a file

> ID：14202438
> 
> 赞同：4
> 
> 时间：2013-01-07T19:09:32.937
> 
> 标签：python

I'm reading a text file:

```
f = open('data.txt')
data = f.read() 
```

However newline in `data` variable is normalized to LF ('\n') while the file contains CRLF ('\r\n').

How can I instruct Python to read the file as is?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-07T19:13:30.253

In Python 2.x:

```
f = open('data.txt', 'rb') 
```

As [the docs](http://docs.python.org/2/library/functions.html#open) say:

> The default is to use text mode, which may convert '\n' characters to a platform-specific representation on writing and back on reading. Thus, when opening a binary file, you should append `'b'` to the mode value to open the file in binary mode, which will improve portability. (Appending `'b'` is useful even on systems that don’t treat binary and text files differently, where it serves as documentation.)

In Python 3.x, there are three alternatives:

```
f1 = open('data.txt', 'rb') 
```

This will leave newlines untransformed, but will also return `bytes` instead of `str`, which you will have to explicitly `decode` to Unicode yourself. (Of course the 2.x version also returned bytes that had to be decoded manually if you wanted Unicode, but in 2.x that's what a `str` object is; in 3.x `str` is Unicode.)

```
f2 = open('data.txt', 'r', newline='') 
```

This will return `str`, and leave newlines untranslated. Unlike the 2.x equivalent, however, `readline` and friends will treat `'\r\n'` as a newline, instead of a regular character followed by a newline. Usually this won't matter, but if it does, keep it in mind.

```
f3 = open('data.txt', 'rb', encoding=locale.getpreferredencoding(False)) 
```

This treats newlines exactly the same way as the 2.x code, and returns `str` using the same encoding you'd get if you just used all of the defaults… but it's no longer valid in current 3.x.

> When reading input from the stream, if newline is None, universal newlines mode is enabled. Lines in the input can end in '\n', '\r', or '\r\n', and these are translated into '\n' before being returned to the caller. If it is '', universal newlines mode is enabled, but line endings are returned to the caller untranslated.

The reason you need to specify an explicit encoding for `f3` is that opening a file in binary mode means the default changes from "decode with `locale.getpreferredencoding(False)`" to "don't decode, and return raw `bytes` instead of `str`". Again, from [the docs](http://docs.python.org/3/library/functions.html#open):

> In text mode, if encoding is not specified the encoding used is platform dependent: locale.getpreferredencoding(False) is called to get the current locale encoding. (For reading and writing raw bytes use binary mode and leave encoding unspecified.)

However:

> 'encoding' … should only be used in text mode.

And, at least as of 3.3, this is enforced; if you try it with binary mode, you get `ValueError: binary mode doesn't take an encoding argument`.

So, if you want to write code that works on both 2.x and 3.x, what do you use? If you want to deal in `bytes`, obviously `f` and f1`are the same. But if you want to deal in`str`, as appropriate for each version, the simplest answer is to write different code for each, probably`f`and`f2`, respectively. If this comes up a lot, consider writing either wrapper function:

```
if sys.version_info >= (3, 0):
    def crlf_open(path, mode):
        return open(path, mode, newline='')
else:
    def crlf_open(path, mode):
        return open(path, mode+'b') 
```

Another thing to watch out for in writing multi-version code is that, if you're not writing locale-aware code, `locale.getpreferredencoding(False)` almost always returns something reasonable in 3.x, but it will usually just return `'US-ASCII'` in 2.x. Using `locale.getpreferredencoding(True)` is technically incorrect, but may be more likely to be what you actually want if you don't want to think about encodings. (Try calling it both ways in your 2.x and 3.x interpreters to see why—or read the docs.)

Of course if you actually know the file's encoding, that's always better than guessing anyway.

In either case, the `'r'` means "read-only". If you don't specify a mode, the default is `'r'`, so the binary-mode equivalent to the default is `'rb'`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-07T19:12:58.807

You need to open the file in the binary mode:

```
f = open('data.txt', 'rb')
data = f.read() 
```

(`'r'` for "read", `'b'` for "binary")

Then everything is returned as is, nothing is normalized

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-18T12:43:23.657

You can use the [codecs module](https://docs.python.org/3/library/codecs.html?highlight=codecs#codecs.open) to write 'version-agnostic' code:

> Underlying encoded files are always opened in binary mode. No automatic conversion of `'\n'` is done on reading and writing. The mode argument may be any binary mode acceptable to the built-in `open()` function; the `'b'` is automatically added.

```
import codecs
with codecs.open('foo', mode='r', encoding='utf8') as f:
    # python2: u'foo\r\n'
    # python3: 'foo\r\n'
    f.readline() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T19:15:39.987

Just request "read binary" in the `open`:

```
f = open('data.txt', 'rb')
data = f.read() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T19:16:44.257

Open the file using `open('data.txt', 'rb')`. See the [doc](http://docs.python.org/2/library/functions.html#open).

# php - 防止自动注销 cakephp

> ID：14202439
> 
> 赞同：0
> 
> 时间：2013-01-07T19:09:35.740
> 
> 标签：php, cakephp, logout

我将 cakephp 2 与 AuthComponent 一起使用来对我的 web 应用程序上的用户进行身份验证。至关重要的是，用户不会在很长一段时间内自动注销（至少 24 小时，更长或无限期最好）。原因是我们在 cakephp webapp 中存储了许多东西，这些东西必须在几秒钟内可供当前登录的用户使用，而无需强迫他输入密码。出于这个原因，我已经设置`Security.level`并且`low`我也实现了

```
Configure::write('Session.timeout', 3000); 
```

这应该让用户在他退出之前有两天的时间。然而，有时用户仍然会被注销，即使他在同一分钟内已经处于活动状态。我真的不知道它何时发生以及如何重现它，但我想知道我是否可能遗漏了什么，其他策略是否可能有助于解决我的问题。

作为网络服务器，我在 Ubuntu 12.04 上使用标准 apache，没有任何特殊的配置更改！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:21:08.413

为了让它有效地工作，您将分两部分进行。我无法具体说明您正在使用的组件，但我可以提供一般的操作理论。

PHP 会话永远不应该被认为会持续很长时间。当用户在站点上时，它们将处于活动状态，但最终会被清除。那么如何让用户会话“永不过期”呢？

当用户登录时，您将创建一个唯一的一次性哈希。此哈希将由用户存储为 cookie，您还应该在数据库中引用它（与哈希关联的用户）

此哈希提供了一个替代登录路径。如果用户返回站点并且没有会话，而不是将 定向到登录页面，您会查看用户是否有 cookie。如果他们这样做，您可以重新登录。

现在重要的是只允许该哈希使用一次。在使用哈希创建会话后，您需要生成一个新的会话并使用新的哈希更新 cookie 和数据库。

需要记住的一些事项：

*   散列应该是唯一的，并使用随机数据生成。它不应该是可以轻易伪造的东西。
*   如果用户使用多个设备访问您的站点，则每个设备可能都有自己唯一的哈希，请在数据库设计中记住这一点。
*   使用 SSL 是一个好主意，这样哈希就不会被轻易嗅探。
*   哈希应该在一定时间内过期，这样旧的哈希就不能用于登录站点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-28T16:38:19.273

```
CREATE TABLE cake_sessions (
  id varchar(255) NOT NULL default '',
  data text,
  expires int(11) default NULL,
  PRIMARY KEY  (id)
); 
```

然后在 core.php 中将会话设置更改为：

```
Configure::write('Session', array(
    'defaults' => 'database',
    'timeout' => 43200,
    'cookieTimeout' => 43200
)); 
```

此设置适用于 1 个月的会话

# excel - Excel 中的直接幂回归

> ID：14202441
> 
> 赞同：0
> 
> 时间：2013-01-07T19:09:56.227
> 
> 标签：excel, matlab, regression, solver

我想获得`R^2`几对`X v/s Y`数据的值。

在 Matlab 中可以很容易地完成。

但是在 excel 中，我相信需要创建具有对数值或其他内容的新列。在 Excel 中是否有直接、简洁、基于公式的 Matlab 式方法来执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:20:30.113

Matalb 是*Excel 的下一代*;) 所以与 Matalb 相比，Excel 肯定是乏味的。但不要失去动力，因为它仍然是一个基于矩阵的 (Row,Col)*竞技场*......

这是一个可以尝试的功能：

[`RSQ`功能](http://office.microsoft.com/en-sg/excel-help/rsq-function-HP010342863.aspx)。

`RSQ(known_y's,known_x's)`

不同方式的参考：

*   [在 Excel 中计算 R 方](http://www.ehow.com/how_5117357_calculate-r_squared.html)

* * *

编辑：

如果您需要对数，则可能必须使用以下内容：

`=RSQ(y-range,LN(x-range))`

# java - GridBagLayout 中的对齐问题

> ID：14202442
> 
> 赞同：2
> 
> 时间：2013-01-07T19:10:02.113
> 
> 标签：java, swing, jpanel, jlabel, gridbaglayout

请看下面的代码

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class TestForm extends JFrame
{
    private JLabel heightLabel, weightLabel, waistLabel, neckLabel, hipsLabel,bfPercentageLabel;

    private JTextField heightTxt, weightTxt, waistTxt, neckTxt, hipsTxt;

    private JPanel centerPanel;
    private JPanel southPanel;
    private JLabel endTargetWeightLabel;
    private JLabel endTargetWeightResultLabel;
    private JLabel fatMustLoseLabel;
    private JLabel fatMustLoseResultLabel;

      public TestForm()
      {
        //Declaring instance variables  
        heightLabel = new JLabel("Height: ");
        weightLabel = new JLabel("Weight: ");
        waistLabel = new JLabel("Waist: ");
        neckLabel = new JLabel("Neck: ");
        hipsLabel = new JLabel("Hips: ");        
        bfPercentageLabel = new JLabel("The Orginal Test Score Is: ");

        heightTxt = new JTextField(7);
        weightTxt = new JTextField(7);
        waistTxt = new JTextField(7);
        neckTxt = new JTextField(7);
        hipsTxt = new JTextField(7);

        endTargetWeightLabel = new JLabel("Your End Target Performance is: ");
        fatMustLoseLabel = new JLabel("Sammple Performance You Must Lose: ");

        endTargetWeightResultLabel = new JLabel("d");
        fatMustLoseResultLabel = new JLabel("e");

        this.add(createNorthPanel(),"North");
        this.add(createCenterPanel(),"Center");
        this.add(createSouthPanel(),"South");
        this.add(new JPanel(),"West");
        this.add(new JPanel(),"East");
        this.setTitle("The Test Form");
        this.pack();
        this.setLocationRelativeTo(null);
        this.setVisible(true);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    }

    private JPanel createNorthPanel()
    {
        JPanel northPanel = new JPanel();

        northPanel = new JPanel();
        northPanel.setLayout(new FlowLayout());

        JLabel logoLabel = new JLabel();
        logoLabel.setIcon(new ImageIcon(getClass().getResource("/images/TESTING-LOGO.gif")));

        northPanel.add(logoLabel);

        return northPanel;
    }

    private JPanel createCenterPanel()
    {
        centerPanel = new JPanel();

        GridBagLayout gbl = new GridBagLayout();
        GridBagConstraints gbc = new GridBagConstraints();

        centerPanel.setLayout(gbl);

        gbc.gridx = 1;
        gbc.gridy = 1;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,0,0,0);
        centerPanel.add(heightLabel,gbc);

        gbc.gridx = 2;
        gbc.gridy = 1;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,0,0,0);
        centerPanel.add(heightTxt,gbc);

        gbc.gridx = 3;
        gbc.gridy = 1;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,10,0,0);
        centerPanel.add(weightLabel,gbc);

        gbc.gridx = 4;
        gbc.gridy = 1;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,-10,0,0);
        centerPanel.add(weightTxt,gbc);

        gbc.gridx = 1;
        gbc.gridy = 2;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,0,0,0);
        centerPanel.add(waistLabel,gbc);

        gbc.gridx = 2;
        gbc.gridy = 2;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,0,0,0);
        centerPanel.add(waistTxt,gbc);

        gbc.gridx = 3;
        gbc.gridy = 2;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,10,0,0);
        centerPanel.add(neckLabel,gbc);

        gbc.gridx = 4;
        gbc.gridy = 2;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,-10,0,0);
        centerPanel.add(neckTxt,gbc);

        gbc.gridx = 5;
        gbc.gridy = 2;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,7,0,0);
        centerPanel.add(hipsLabel,gbc);

        gbc.gridx = 6;
        gbc.gridy = 2;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(15,5,0,0);
        centerPanel.add(hipsTxt,gbc);

        gbc.gridx = 1;
        gbc.gridy = 5;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(50,0,0,0);
        gbc.gridwidth = 6;
        centerPanel.add(bfPercentageLabel,gbc);

        centerPanel.setBorder(BorderFactory.createTitledBorder("The Testing Form"));

        centerPanel.setPreferredSize(centerPanel.getPreferredSize());
        centerPanel.validate();

        return centerPanel;

    }

     private JPanel createSouthPanel()
    {
        southPanel = new JPanel();

        GridBagLayout gbl = new GridBagLayout();
        GridBagConstraints gbc = new GridBagConstraints();

        southPanel.setLayout(gbl);

        gbc.gridx = 1;
        gbc.gridy = 1;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(10,0,0,0);
        southPanel.add(endTargetWeightLabel,gbc);

        gbc.gridx = 2;
        gbc.gridy = 1;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(10,5,0,0);
        southPanel.add(endTargetWeightResultLabel,gbc);

        gbc.gridx = 1;
        gbc.gridy = 2;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(10,0,0,0);
        southPanel.add(fatMustLoseLabel,gbc);

        gbc.gridx = 2;
        gbc.gridy = 2;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.insets = new Insets(10,5,0,0);
        southPanel.add(fatMustLoseResultLabel,gbc);

        southPanel.setPreferredSize(new Dimension(centerPanel.getWidth(),100));
        southPanel.setBorder(BorderFactory.createTitledBorder("See Your End Target Weight"));

        return southPanel;
    }

    public static void main(String[]args)
    {
        try
        {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
            new TestForm();
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }

    }
} 
```

以上是可能的最大缩短代码。删除更多元素将不会显示原始错误。

好的。现在的问题是关于对齐。运行代码后，您将看到以下内容。

![在此处输入图像描述](../Images/98455a18d11235eee19b34bb48f32dc5.png)

正如您在其中看到的那样， 中的元素`southPanel`与`centerPanel`. 这意味着，我希望`southPanel`JLabels 进入`centerPanel`JLabels 开始的同一行。但它最终以这种方式结束。我希望 JLabels`southPanel`出现在 JLabels`centerPanel`开始的同一行中。我所说的清楚地显示在下图中。我该怎么做？请帮忙！

![在此处输入图像描述](../Images/f0e23749b6f2b7e465569ceeb354c7c5.png)

PS：我也附上了“测试图像”，因此您可以根据需要进行测试。 ![在此处输入图像描述](../Images/f5cf11fcbaaf28a1e1c5fcc8ef4e3de4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:20:58.370

由于每个面板都是水平居中的，除非它们具有相同的宽度，否则它们不会对齐。将它们放在一个公共面板中并共享一个`GridBagLayout`.

您可以更改顶层布局以左对齐您的组件（例如，在另一个`GridBagLayout`带有 WEST/LEFT 锚点的组件中）。

旁注：那些负面的插图会给你带来麻烦。旁注2：不要手动设置gridx和gridy，而是查看`REMAINDER` 旁注3：你的大部分gbc都是相同的。重复使用它们。

```
this.setLayout(new GridBagLayout());
this.add(createLeftPanel(), gbc);
... 
```

# php - 匹配/省略php preg regex中的多行

> ID：14202443
> 
> 赞同：1
> 
> 时间：2013-01-07T19:10:04.763
> 
> 标签：php, regex

目前在 PHP preg_match 语句中有一个正则表达式 `preg_match($regex,trim($searchText),$matches);`

使用的正则表达式是（不带分隔符）

```
Primary Redeemer: (?<name>.*), (?<phone>.*), (?<email>.*).*[.\r\n\s]*.*Valid Travelers:.*[.\r\n\s]*.*Valid Days: (?<date_in>\d{4}\/\d{2}\/\d{2}) - (?<date_out>\d{4}\/\d{2}\/\d{2}).*[.\r\n\s]*.*Item: (?<desc>.*) \/.*[.\r\n\s]*.*Voucher #: (?<voucher>\d+)  Itin. #:(?<itin>\d+) 
```

符合以下`$searchText`条件就好了（如预期的那样）

```
Booking
1 Travelers -- Vehicles: 1 (TBA),   
    Primary Redeemer: Joe Schmoe, 1 (555) 5555555, schmoe@joe.com
    Valid Travelers: Joe Schmoe, Sue Schmoe, Schmoe twins, 
    Valid Days: 2012/01/01 - 2012/02/02
    Item: Some Item Purchased - weekly 12345 / 
    Voucher #: 10835756  Itin. #:153244150897 
```

返回 $matches 数组中的各种命名元素。但是，我们引入了一个新元素（航班），它可能在出发和返回时都有 1 条或更多条线路。

```
Booking
1 Travelers -- Vehicles: 1 (TBA),   
    Primary Redeemer: Joe Schmoe, 1 (555) 5555555, schmoe@joe.com
    Valid Travelers: Joe Schmoe, Sue Schmoe, Schmoe twins, 
    Valid Days: 2012/01/01 - 2012/02/02
    Flight ABC to DEF
        AL  1234  departs ABC 01/01/2012 06:15 arrives BCD 01/01/2012 08:45
        AL  2345  departs BCD 01/01/2012 09:40 arrives DEF 01/01/2012 11:33
    Flight DEF to ABC 
        AL  3456  departs DEF 02/02/2012 10:50 arrives BCD 02/02/2012 13:12
        AL  4567  departs BCD 02/02/2012 14:00 arrives ABC 02/02/2012 15:30
    Item: Some Item Purchased - weekly 12345 / 
    Voucher #: 10835756  Itin. #:153244150897 
```

在捕获（和/或丢弃）可能出现的可变飞行信息行时遇到一些障碍，同时保持匹配/返回的其余部分完好无损。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:17:39.570

不知道为什么`.`不适合你，但`[\s\S]*`（或`([\s\S]*)`捕获）应该可以抓住飞行块：

```
<?php

  $regex = "/Primary Redeemer: (?<name>.*), (?<phone>.*), (?<email>.*).*[.\r\n\s]*.*Valid Travelers:.*[.\r\n\s]*.*Valid Days: (?<date_in>\d{4}\/\d{2}\/\d{2}) - (?<date_out>\d{4}\/\d{2}\/\d{2}).*[.\r\n\s]*[\s\S]*Item: (?<desc>.*) \/.*[.\r\n\s]*.*Voucher #: (?<voucher>\d+)  Itin. #:(?<itin>\d+)/";

  $searchText = <<<SEARCHTEXT_HEREDOC
Booking
1 Travelers -- Vehicles: 1 (TBA),
    Primary Redeemer: Joe Schmoe, 1 (555) 5555555, schmoe@joe.com
    Valid Travelers: Joe Schmoe, Sue Schmoe, Schmoe twins,
    Valid Days: 2012/01/01 - 2012/02/02
    Flight ABC to DEF
        AL  1234  departs ABC 01/01/2012 06:15 arrives BCD 01/01/2012 08:45
        AL  2345  departs BCD 01/01/2012 09:40 arrives DEF 01/01/2012 11:33
    Flight DEF to ABC
        AL  3456  departs DEF 02/02/2012 10:50 arrives BCD 02/02/2012 13:12
        AL  4567  departs BCD 02/02/2012 14:00 arrives ABC 02/02/2012 15:30
    Item: Some Item Purchased - weekly 12345 /
    Voucher #: 10835756  Itin. #:153244150897
SEARCHTEXT_HEREDOC;

  preg_match($regex,trim($searchText),$matches);

  echo "\n";
  foreach($matches as $match) {
    echo "  -> ".$match;
    echo "\n";
  }
  echo "\n";
?> 
```

结果：

```
 -> Primary Redeemer: Joe Schmoe, 1 (555) 5555555, schmoe@joe.com
    Valid Travelers: Joe Schmoe, Sue Schmoe, Schmoe twins,
    Valid Days: 2012/01/01 - 2012/02/02
    Flight ABC to DEF
        AL  1234  departs ABC 01/01/2012 06:15 arrives BCD 01/01/2012 08:45
        AL  2345  departs BCD 01/01/2012 09:40 arrives DEF 01/01/2012 11:33
    Flight DEF to ABC
        AL  3456  departs DEF 02/02/2012 10:50 arrives BCD 02/02/2012 13:12
        AL  4567  departs BCD 02/02/2012 14:00 arrives ABC 02/02/2012 15:30
    Item: Some Item Purchased - weekly 12345 /
    Voucher #: 10835756  Itin. #:153244150897
  -> Joe Schmoe
  -> Joe Schmoe
  -> 1 (555) 5555555
  -> 1 (555) 5555555
  -> schmoe@joe.com
  -> schmoe@joe.com
  -> 2012/01/01
  -> 2012/01/01
  -> 2012/02/02
  -> 2012/02/02
  -> Some Item Purchased - weekly 12345
  -> Some Item Purchased - weekly 12345
  -> 10835756
  -> 10835756
  -> 153244150897
  -> 153244150897 
```

# c# - 更改 ASP.NET Web API 的媒体类型格式化程序的响应标头

> ID：14202445
> 
> 赞同：15
> 
> 时间：2013-01-07T19:10:08.267
> 
> 标签：c#, asp.net, asp.net-mvc-4, asp.net-web-api, mediatypeformatter

我创建了一个 ASP.NET Web API 控制器，它在操作上返回一个强类型对象，如下所示：

```
// GET api/iosdevices/5
public iOSDevice Get(string id) {
  return new iOSDevice();
} 
```

我创建了一个 BufferedMediaTypeFormatter 来处理 iOSDevice 类型：

```
public class iOSDeviceXmlFormatter : BufferedMediaTypeFormatter
{
    public iOSDeviceXmlFormatter() {
        SupportedMediaTypes.Add(new MediaTypeHeaderValue("text/xml"));
        SupportedMediaTypes.Add(new MediaTypeHeaderValue("application/xml"));
        SupportedMediaTypes.Add(new MediaTypeHeaderValue("text/html"));
    }

    public override void WriteToStream(Type type, object value, Stream writeStream, HttpContent content) {
        content.Headers.ContentType = new MediaTypeHeaderValue("application/xml");
        iOSDevice device = (iOSDevice)value;
        using (XmlWriter writer = XmlWriter.Create(writeStream)) {
            writer.WriteStartElement("iOSDevice");
            if (device.identifierForVendor != Guid.Empty) {
                writer.WriteElementString("identifierForVendor", device.identifierForVendor.ToString());
                writer.WriteElementString("userInterfaceIdiom", device.userInterfaceIdiom);
                writer.WriteElementString("systemName", device.systemName);
                writer.WriteElementString("systemVersion", device.systemVersion);
                writer.WriteElementString("model", device.model);
            }
            writer.WriteEndElement();
        }
        writeStream.Close();
    }
} 
```

我的问题是当我捕获类型“text/html”（例如，有人试图从他或她的网络浏览器访问 API）时，响应类型是“text/html”而不是“application/xml”。我想覆盖响应类型，以便用户获得“application/xml”而不是“text/html”的响应。

我无法在 ApiController 类型中访问常规 MVC 控制器上的“响应”属性，我不知所措。如何覆盖媒体类型格式化程序正在处理的此操作的响应类型？

**编辑：有用的说明**

我以前尝试过这个：

```
var response = Request.CreateResponse<iOSDevice>(HttpStatusCode.Accepted, device);
response.Headers.Remove("Content-Type");
response.Headers.Add("Content-Type", "application/xml; charset=utf-8");
return response; 
```

它声称我“滥用”了标题。

但是当我使用下面 Filip 的直接设置 Content 的示例时，它起作用了！

```
var response = Request.CreateResponse();
response.Content = new ObjectContent<iOSDevice>(device, new iOSDeviceXmlFormatter());
return response; 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-07T19:20:01.927

当您在格式化程序中写入流时，标头已经发送。

你可以这样做：

```
 public HttpResponseMessage Get(string id) {
    {
        var value = new iOSDevice();
        var response = Request.CreateResponse();
        response.Content = new ObjectContent(typeof(iOSDevice), value, new iOSDeviceXmlFormatter());
        //set headers on the "response"
        return response;
    } 
```

或者您可以这样做（将此方法添加到您的格式化程序）：

```
 public override void SetDefaultContentHeaders(Type type, HttpContentHeaders headers, string mediaType)
    {
        base.SetDefaultContentHeaders(type, headers, mediaType);
        headers.ContentType = new MediaTypeHeaderValue("application/xml");
    } 
```

这是我如何使用`SetDefaultContentHeaders`自定义格式化程序的示例：http: [//www.strathweb.com/2012/09/generate-kindle-mobi-ebooks-with-your-asp-net-web-api/](http://www.strathweb.com/2012/09/generate-kindle-mobi-ebooks-with-your-asp-net-web-api/)

```
 public override void SetDefaultContentHeaders(Type type, HttpContentHeaders headers, MediaTypeHeaderValue mediaType)
   {
      if (CanWriteType(type) && mediaType.MediaType == supportedMediaType)
      {
         headers.ContentType = new MediaTypeHeaderValue("application/octet-stream");
         headers.ContentDisposition = new ContentDispositionHeaderValue("attachment");
         headers.ContentDisposition.FileName = "ebook.mobi";
      }
      else
      {
         base.SetDefaultContentHeaders(type, headers, mediaType);
      }
   } 
```

# android - 阅读音频文件

> ID：14202454
> 
> 赞同：0
> 
> 时间：2013-01-07T19:10:44.113
> 
> 标签：android

有人可以告诉我如何指定以字节为单位读取音频文件的路径。我已经能够在列表视图中列出来自 sd 卡的歌曲。此外，我已将原始文件夹中存在的音频文件读入字节。但是我无法指定从列表视图中读取所选歌曲的路径。

以下是我的代码：

```
 String[] proj = {
                   MediaStore.Audio.Media._ID,
                   MediaStore.Audio.Media.DATA,
                   MediaStore.Audio.Media.DISPLAY_NAME,
                   MediaStore.Video.Media.SIZE 
                  };
            musiccursor = managedQuery(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,proj, null, null, null);
            count = musiccursor.getCount();
            musiclist = (ListView) findViewById(R.id.PhoneMusicList);
            musiclist.setAdapter(new MusicAdapter(getApplicationContext()));

            musiclist.setOnItemClickListener(musicgridlistener);
            mMediaPlayer = new MediaPlayer();

            //To read audio file in bytes
            InputStream in = getApplicationContext().getResources().openRawResource(R.raw.Audio);

            DataInputStream data = new DataInputStream(in);
            BufferedReader br = new BufferedReader(new InputStreamReader(data));
//Adapter
public View getView(int position, View convertView, ViewGroup parent) 
            {
                  System.gc();
                  TextView tv = new TextView(mContext.getApplicationContext());
                  String id = null;
                  if (convertView == null) 
                  {
                        music_column_index = musiccursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DISPLAY_NAME);
                        musiccursor.moveToPosition(position);

                        id = musiccursor.getString(music_column_index);
                        music_column_index = musiccursor.getColumnIndexOrThrow(MediaStore.Audio.Media.SIZE);
                        musiccursor.moveToPosition(position);

                        id += " Size(KB):" + musiccursor.getString(music_column_index);
                        tv.setText(id);
                  } 
                  else
                        tv = (TextView) convertView;
                  return tv;
            } 
```

在这里，我正在读取已放置在 raw 文件夹中的文件。但是，我需要阅读列表中已选择的音频文件，但我不知道如何引用它。

# maven - maven 3 surefire 和 maven gwt 排除/包含问题

> ID：14202458
> 
> 赞同：2
> 
> 时间：2013-01-07T19:10:59.727
> 
> 标签：maven, gwt, maven-surefire-plugin

我有一个配置了 maven-surefire-plugin 的根 pom 和一个配置了 gwt-maven-plugin 的 gwt 模块 pom。升级到 Maven 3 后，出现奇怪的错误。

该项目的配置与此处描述的类似：[将 GwtTest 测试与标准单元测试分开](https://web.archive.org/web/20130112082646/http://mojo.codehaus.org:80/gwt-maven-plugin/user-guide/testing.html)

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-surefire-plugin</artifactId>
  <version>2.6</version>
  <configuration>
    <useSystemClassLoader>true</useSystemClassLoader>
    <useManifestOnlyJar>false</useManifestOnlyJar>
    <forkMode>always</forkMode>
    <properties>
      <property>
        <name>usedefaultlisteners</name>
        <value>false</value>
      </property>
      <property>
        <name>listener</name>
        <value>org.uncommons.reportng.HTMLReporter,org.uncommons.reportng.JUnitXMLReporter</value>
      </property>
    </properties>
    <argLine>-server -Xmx8192m -XX:MaxPermSize=1024M -XX:+CMSClassUnloadingEnabled</argLine>
    <excludes>
      <exclude>**/*GwtTest*.java</exclude>
    </excludes>
  </configuration>
</plugin> 
```

和

```
<plugin>
  <groupId>org.codehaus.mojo</groupId>
  <artifactId>gwt-maven-plugin</artifactId>
  <version>2.5.0</version>
  <dependencies>
    <dependency>
      <groupId>com.google.gwt</groupId>
      <artifactId>gwt-user</artifactId>
      <version>${gwt.version}</version>
    </dependency>
  </dependencies>
  <configuration>
  <modules>
    <module>my.app.gwt</module>
  </modules>
  <runTarget>/</runTarget>
  <extraJvmArgs>-Xss512m -Xmx2048m -XX:MaxPermSize=256M</extraJvmArgs>
  <hostedWebapp>${project.build.directory}/${project.build.finalName}</hostedWebapp>
  <includes>**/*GwtTestSuite.java</includes>
  <copyWebapp>true</copyWebapp>
  <logLevel>INFO</logLevel>
  <persistentunitcache>false</persistentunitcache>
  <draftCompile>${gwt.draftCompile}</draftCompile>
  <deploy>${project.build.directory}/${project.build.finalName}/WEB-INF/deploy</deploy>
  <disableCastChecking>true</disableCastChecking> 
  <mode>htmlunit</mode>
  <skipTests>${skipGwtTests}</skipTests></configuration>
  <executions>
    <execution>
      <id>gwt-compile</id>
      <goals>
        <goal>compile</goal>
      </goals>
      <phase>compile</phase>
    </execution>
    <execution>
      <id>gwt-test</id>
      <goals>
        <goal>compile</goal>
        <goal>test</goal>
      </goals>
      <phase>test</phase>
    </execution>
  </executions>
</plugin> 
```

它适用于 maven 2，但使用 maven 3 我得到：

```
[ERROR] Failed to execute goal org.codehaus.mojo:gwt-maven-plugin:2.5.0:test (gwt-test) on project my-webapp: Unable to parse configuration of mojo org.codehaus.mojo:gwt-maven-plugin:2.5.0:test: When configuring a basic element the configuration cannot contain any child elements. Configuration element 'excludes'. -> [Help 1] 
```

似乎gwt插件无法解析surefire插件的分层样式。

只有当我将 gwt 插件中的所有排除/包含设置为一个逗号分隔的字符串行时，它才会编译，但这对我不起作用，因为我需要全局排除 gwt 测试，并在本地包含它们。

但是，包含/排除部分会合并，因此两个不兼容的语法定义将无法一起工作。

我希望有人能给我一个提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T05:30:40.367

您可以使用直接的 Maven Surefire 运行 GWTTestCases，请参阅[此链接](http://jectbd.com/?p=380)。

# ruby - 从 Ruby 调用 Perl 脚本

> ID：14202460
> 
> 赞同：1
> 
> 时间：2013-01-07T19:11:04.177
> 
> 标签：ruby, perl, bash

我目前正在尝试找出一种从 Ruby 调用 Perl 脚本的方法，并将其输出，就好像我在终端中一样，如果需要，我可以提供输入。

我已经想出了如何做到这一点并在事后获得输入，但由于 Perl 脚本仍在运行，我无法运行其他任何东西。

我应该注意我不能编辑 Perl 脚本。提供了这些脚本，并且制作了这个 Ruby 脚本，以使运行所有 Perl 脚本的过程更容易，并确保它们的顺序正确。

```
upgradestatus =  `#{upgradearray[arraylocation]}` 
```

这将是我的代码的相关部分。我尝试了其他一些如何做到这一点的变体，但每次我都会遇到相同的情况。当脚本开始运行时，它需要输入，所以它就在那里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:34:08.730

您无法使用反引号`%x`或作为普通子 shell 执行您想要的操作，因为它们无法查看子命令输出的输出。

您可以使用 Open3[`popen2`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open3/rdoc/Open3.html#method-c-popen2)或[`popen3`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open3/rdoc/Open3.html#method-c-popen3)方法来完成。它们让您发送到被调用程序的 STDIN 流，并从 STDOUT 接收数据。`popen3`还可以让您查看/捕获 STDOUT 流。不幸的是，在被调用的程序返回其信息之前，您通常必须先发送然后关闭 STDIN 流，这可能是 Perl 脚本的情况。

如果您需要更多控制，请考虑使用 Ruby 的内置[`Pty`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/pty/rdoc/PTY.html)模块。它旨在让您通过脚本机制与正在运行的应用程序对话。您必须设置代码来查找提示，然后通过发回适当的数据来响应它们。它可以很简单，也可以是主要的 PITA，具体取决于您正在与之交谈的代码。

这是`open`命令的示例：

```
PTY.open {|m, s|
p m      #=> #<IO:masterpty:/dev/pts/1>
p s      #=> #<File:/dev/pts/1>
p s.path #=> "/dev/pts/1"
}

# Change the buffering type in factor command,
# assuming that factor uses stdio for stdout buffering.
# If IO.pipe is used instead of PTY.open,
# this code deadlocks because factor's stdout is fully buffered.
require 'io/console' # for IO#raw!
m, s = PTY.open
s.raw! # disable newline conversion.
r, w = IO.pipe
pid = spawn("factor", :in=>r, :out=>s)
r.close
s.close
w.puts "42"
p m.gets #=> "42: 2 3 7\n"
w.puts "144"
p m.gets #=> "144: 2 2 2 2 3 3\n"
w.close
# The result of read operation when pty slave is closed is platform
# dependent.
ret = begin
        m.gets          # FreeBSD returns nil.
    rescue Errno::EIO # GNU/Linux raises EIO.
        nil
    end
p ret #=> nil 
```

# c# - App.Xaml 中的 WPF CrossThreadException 与 BackgroundWorker

> ID：14202462
> 
> 赞同：0
> 
> 时间：2013-01-07T19:11:27.347
> 
> 标签：c#, wpf, backgroundworker

我的 App.Xaml 中有这个：

```
public App()
{
    _backgroundWorker = new BackgroundWorker();
    _backgroundWorker.DoWork += new DoWorkEventHandler(DoBackgroundWork);
    _backgroundWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(BackgroundCompleted);
    _backgroundWorker.RunWorkerAsync();

    _splashView = new SplashView();
    _splashView.Show();
} 
```

该`DoBackgroundWork`方法执行一些数据库设置，然后`BackgroundCompleted`事件关闭`_splashView`并显示`_mainView`.

但是，修改`_splashView`from中的任何内容`BackgroundCompleted`都会导致跨线程异常，我认为这是后台工作人员旨在解决的问题。我猜这与 backgroundworker 的工作方式有关`App.Xaml`。也许这是做启动画面的坏方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:31:57.670

后台工作人员使用 SynchronizationContext。这是从内存中获取的，但我认为它没有在 App 构造函数中初始化。

在构造 BW 之前，请检查 SynchronizationContext.Current 是否为空。还要检查 SynchronizationContext.Current 在构造 BW 之前和完成方法中是否相同。

如果不是，您需要稍后在此过程中移动代码... App.OnStartUp 应该没问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T19:43:44.557

> 也许这是做启动画面的坏方法？

除非我误解了您的问题，否则我认为没有必要这样做来显示启动画面。只需选择图像，然后在“属性”窗口中单击`BuildAction`下拉菜单并选择`SplashScreen`. 另外，我认为您可以通过消除 来简化流程`BackgroundWorker`，除非您的数据功能需要很长时间。我相信您添加它是为了适应启动画面的显示/隐藏。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-07T19:22:27.383

无法保证哪个线程的事件处理程序`OnWorkCompleted`将用于执行。

见类似问题[BackgroundWorker OnWorkCompleted throws cross-thread exception](https://stackoverflow.com/questions/818767/backgroundworker-onworkcompleted-throws-cross-thread-exception)

您必须使用`Invoke`或`BeginInvoke`方法从后台线程修改可视元素。您可以直接在要修改其属性的对象上调用它，或者使用`Dispatcher`.

编辑：根据与亚当的对话

对在初始线程（而不是 BackgroundWorker 的）上运行的事件处理程序`SynchronizationContext`具有预期的效果。[http://msdn.microsoft.com/en-us/magazine/gg598924.aspx](http://msdn.microsoft.com/en-us/magazine/gg598924.aspx)。（见图2）`OnWorkCompleted`

如果 BackgroundWorker 是在 SynchronizationContext 初始化之前创建并运行的，那么`OnWorkCompleted`它将在可能与 BackgroundWorker 相同的线程上执行。

谢谢亚当。

# android - 安卓：传感器监听器

> ID：14202464
> 
> 赞同：2
> 
> 时间：2013-01-07T19:11:31.493
> 
> 标签：android, android-sensors

我正在构建一个小型应用程序，我需要仅在设备在我手中而不是在口袋中时才检测设备的运动。

现在，我构建了应用程序，但是当我走路或跑步时传感器事件被触发并且手机在我的口袋里？

无论如何，只有当有人拿着设备时才调用传感器更改？

谢谢，拉梅什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:43:08.443

您可以使用[ACTION_USER_PRESENT](http://developer.android.com/reference/android/content/Intent.html#ACTION_USER_PRESENT)意图首先检查电话是否正在使用或处于待机状态。之后，您可以实施[加速度计](http://developer.android.com/reference/android/hardware/Sensor.html#TYPE_ACCELEROMETER)来检测运动。这是一个例子：

```
public class SensorsActivity extends Activity implements SensorEventListener {
      private SensorManager sensorManager;

      @Override
      public void onCreate(Bundle savedInstanceState){

          super.onCreate(savedInstanceState);
          setContentView(R.layout.activity_sensors);

          sensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);

          sensorManager.registerListener(this,
                  sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
                  SensorManager.SENSOR_DELAY_NORMAL);
      }

      public void onAccuracyChanged(Sensor sensor,int accuracy){

      }

         public void onSensorChanged(SensorEvent event){
              // check sensor type
          if(event.sensor.getType()==Sensor.TYPE_ACCELEROMETER){
                        // TODO after accelerometer detected do something here
          }
      }
} 
```

对于您的[ACTION_USER_PRESENT](http://developer.android.com/reference/android/content/Intent.html#ACTION_USER_PRESENT)检测，您将需要一个[BroadcastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)：

```
public class SensorReceiver extends BroadcastReceiver {

      @Override
      public void onReceive(Context context, Intent intent) {
            String action = intent.getAction();

            if (action.equals(Intent.ACTION_USER_PRESENT)) {
                  // TODO notify the user is present
            }
      }
} 
```

*并在您的Manifest.xml*中声明它，如下所示：

```
<receiver android:name=".SensorReceiver">
        <intent-filter android:enabled="true" android:exported="false">
            <action android:name="android.intent.action.USER_PRESENT" />
        </intent-filter>
</receiver> 
```

希望能帮助到你！

# mysql - SQL组合3条语句；可能吗？

> ID：14202468
> 
> 赞同：1
> 
> 时间：2013-01-07T19:11:45.733
> 
> 标签：mysql, sql, sql-update, sql-insert

我有 3 个要合并为一个的语句；就这样我可以学习有没有这样做？

插入

```
INSERT INTO plants (name, latin_name, type, stock, price, flower_colour, foilage_colour, features, sun_exposure, soil_type, hardiness, competance, height, spread, description, flowering_season)
VALUES
(dandelion, `Taraxacum officinale`, weed, 12, 1.99, white, green, flower, `full sun`, alkaline, `annual hardy`, low, 12cm, 7cm, d, summer) 
```

更新

```
UPDATE plants SET flower_colour='white', soil_type='clay', height='15cm', spread='4cm', description='Weed' AND price='£1.99' 
```

删除

```
DELETE FROM plants WHERE name='dandelion' AND type='weed' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:20:19.590

我要问的第一个问题是“你为什么要这样做”？给定您的示例，您插入、更改然后删除一个条目。除非有隐藏的逻辑，例如更新数据其他元素的触发器，否则数据层的状态不会因为这三个命令的执行而改变。

此外，您的 UPDATE 语句在语法上不正确；`AND`只能在`WHERE`or`HAVING`子句中使用，所以我认为您在那里错误地省略了一些东西。

确实没有任何方法可以将插入、更新和删除组合到一个命令中。您通常可以从您使用的任何代码层将所有三个命令作为一个“脚本”发送，或者将这些 SQL 命令封装到一个存储过程中并执行它，但是每个语句的作用与底层数据非常不同，这就是为什么它们重新开始使用不同的命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T19:24:59.157

你的 RDBMS 是不可能的。

# c++ - 继承类的向量

> ID：14202469
> 
> 赞同：1
> 
> 时间：2013-01-07T19:11:46.467
> 
> 标签：c++, class, stdvector

当我尝试制作形状的总体矢量时，在这个地方有不同的形状，如“八面体”、“长方体”、“球体”……

我试图做类似的事情[http://www.cplusplus.com/forum/general/2710/](http://www.cplusplus.com/forum/general/2710/)但第 121 - 136 行

```
if (shape_type == 0) {
  sphere->set_shape(Coordinates, Properties, mode);
  ShapeVector.push_back(sphere);
}
else if (shape_type == 2) {
  ellipsoid->set_shape(Coordinates, Properties, mode);
  ShapeVector.push_back(ellipsoid);
}
else if (shape_type == 3) {
  cuboid->set_shape(Coordinates, Properties, mode);
  ShapeVector.push_back(cuboid);
}
else if (shape_type == 4) {
  octahedron->set_shape(Coordinates, Properties, mode);
  ShapeVector.push_back(octahedron);
} 
```

但我得到了错误

main.cpp:122:54：警告：“球体”可能在此函数中未初始化使用 [-Wuninitialized] main.cpp:126:57：警告：“椭圆体”可能在此函数中未初始化使用 [-Wuninitialized] main。 cpp:130:54: 警告: 'cuboid' 可能在此函数中未初始化使用 [-Wuninitialized] main.cpp:134:58: 警告: 'octahedron' 可能在此函数中未初始化使用 [-Wuninitialized]

如果有人有建议，我将不胜感激。如果你想要它，完整的文件在下面。

```
#include <iostream>
#include <cstring>
#include <fstream>
#include <vector>
#include <sstream>
#include <cstdio>
#include "ShapeContainer.H"

using namespace std;

int main () {

  //    Declaration of Variables    //
  vector <double> input;
  vector <double> BoundingBoxDimension; // Will be in the form X,Y,Z,dX,dY,dZ

  //    Note: shape_type follows same convention as Stat3D 
  //        0 = Sphere
  //        1 = Cylinder
  //        2 = Ellipsoid
  //        3 = Cuboid
  //        4 = Octahedron
  unsigned int shape_type;
  unsigned int mode;
  vector <double> Coordinates; //   Coordinates of Center of each shape 

  //    Properties of the shape
  //        For:
  //            Spheres:    r
  //            Cylinders:  R,h,v1,v2,v3
  //            Ellipsoid:  a,b,c,a1,a2,a3,b1,b2,b3 ... will calculate c1,c2,c3
  //            Cuboid:     a,b,c,a1,a2,a3,b1,b2,b3 ... will calculate c1,c2,c3
  //            Octahedron: a,b,c,a1,a2,a3,b1,b2,b3 ... will calculate c1,c2,c3
  vector <double> Properties;
  double item;
  string line;

    vector <Shape*> ShapeVector;
  ShapeContainer SC;

  //////    These are some default options used in development
  //////        feel free to delete them when finished
  string inputFileName = "../Cuboid.in";
  string Stat3DFileName = inputFileName;
  string T3DFileName = inputFileName;

  Stat3DFileName.insert(Stat3DFileName.rfind("."), "_Rewrite");
  T3DFileName.insert(T3DFileName.rfind("."), "_T3D"    );

  //    Set some options    //
  bool ReWriteStat3D = true;

  //    Set Shapes  //
  //        (if need to add a new shape, add shape here)
  Sphere* sphere;
  Ellipsoid* ellipsoid;
  Cuboid* cuboid;
  Octahedron* octahedron;

  //    Open File   //
  ifstream inputFile (inputFileName.c_str());

  if ( !inputFile.is_open() ) {
    cout << "Can not find specified input file,\n  " << inputFileName.c_str() << "\nplease check the file and try again.\n";
    return 0;
  }

  //    Read File Contents  //

  //    Gets Bounding Box Dimensions from First Line of File    //
  getline(inputFile, line);
  istringstream iss(line); //   Get a line of data corresponds to 1 item.
  while (iss >> item) {BoundingBoxDimension.push_back(item);}; //   Parses the data from the line
  if (BoundingBoxDimension.size() == 0) {
    cout << "Bounding box does not follow recognized format.\nPlease have the first line be either\ndx dy dz\nor\nx y z dx dy dz\n";
    return 0;
  }
  else if (BoundingBoxDimension.size() == 3) {BoundingBoxDimension.insert(BoundingBoxDimension.begin(),3,0);};
  SC.set_BoundingBox(BoundingBoxDimension);
  //    Takes number of particles and total number
  //        of rows and does not record them
  getline(inputFile, line);
  getline(inputFile, line);

  //    Get Data for each shape starting at line
  while (getline(inputFile, line)) {
    istringstream iss(line); // Get a line of data corresponds to 1 item.
    input.resize(0,0);

    while (iss >> item) {input.push_back(item); }; //   Parses the data from the line

    //  Set shape type  //
    shape_type=input[0]; // What type of shape is it?

    //  Set Mode (Stat3D) / Property (T3D) //
    mode=input[1]; //   What material is it (mode Stat3D/ Property T3D)

    //  Set coordinates //
    Coordinates.push_back(input[2]); // x
    Coordinates.push_back(input[3]); // y
    Coordinates.push_back(input[4]); // z

    //  Puts sizing and orientation into Properties
    for (unsigned int i = 5; i < input.size(); i++) {Properties.push_back(input[i]);};

    //  Calculates the c1,c2,c3 of shapes defined that way
    if (Properties.size() == 9)
      {
      double length;
      length = sqrt(pow(Properties[3],2)+pow(Properties[4],2)+pow(Properties[5],2));
      for (unsigned int PC = 3; PC <= 5; PC++) {Properties[PC] = Properties[PC] / length;}

      length = sqrt(pow(Properties[6],2)+pow(Properties[7],2)+pow(Properties[8],2));
      for (unsigned int PC = 6; PC <= 8; PC++) {Properties[PC] = Properties[PC] / length;}

        Properties.push_back(Properties[4]*Properties[8]-Properties[6]*Properties[7]);
        Properties.push_back(Properties[5]*Properties[6]-Properties[3]*Properties[8]);
        Properties.push_back(Properties[3]*Properties[7]-Properties[4]*Properties[6]);
      };

    if (shape_type == 0) {
      sphere->set_shape(Coordinates, Properties, mode);
      ShapeVector.push_back(sphere);
    }
    else if (shape_type == 2) {
      ellipsoid->set_shape(Coordinates, Properties, mode);
      ShapeVector.push_back(ellipsoid);
    }
    else if (shape_type == 3) {
      cuboid->set_shape(Coordinates, Properties, mode);
      ShapeVector.push_back(cuboid);
    }
    else if (shape_type == 4) {
      octahedron->set_shape(Coordinates, Properties, mode);
      ShapeVector.push_back(octahedron);
    }
    Coordinates.clear();
    Properties.clear();
  }

  inputFile.close(); // Closes Input File

/*
  //    Prints out the shapes
  ofstream T3DFile (T3DFileName.c_str());
  PrintT3D(T3DFile, SC);
  T3DFile.close();

  //    If option ReWriteStat3D is set to true, a new file for Stat3D is created 
  if (ReWriteStat3D == true) {
    ofstream Stat3DFile (Stat3DFileName.c_str());
    PrintStat3D(Stat3DFile, SC);
    Stat3DFile.close();
  };
*/
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T19:14:55.867

`Sphere* sphere;`声明一个未初始化的`Sphere`指针。编译器警告你做错了——你应该把它初始化为有意义的东西：

```
Sphere* sphere = new Sphere; 
```

或者，更好的是：

```
vector <std::shared_ptr<Shape> > ShapeVector;
//...
std::shared_ptr<Shape> sphere(new Sphere);
//... 
```

这样你就有了相同的语义，并且也正确地使用了 RAII。但是，如果您使用第一个版本，则需要`delete`手动存储内存，而使用智能指针时则不需要。

**无论你做什么，不要忘记`Shape::~Shape()`应该是`virtual`**

# gmail - 使用 OAuth2 访问只读 Gmail 提要

> ID：14202471
> 
> 赞同：1
> 
> 时间：2013-01-07T19:11:54.080
> 
> 标签：gmail, google-oauth

我正在使用 OAuth 2.0 访问具有范围的 Gmail `https://mail.google.com/mail/feed/atom`。您是否知道是否可以通过授权弹出窗口指示我们需要**只读**访问的方式请求访问（范围）。

现在弹出消息说“查看和管理您的邮件” - 在 Gmail 中查看和管理您的邮件。这个“管理”部分让许多用户感到沮丧，而我们只需要查看它们。

谢谢，康斯坦丁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:21:20.220

AFAIK，目前没有记录在案的 OAuth2 只读 Gmail 访问范围。您可以向[GMail 产品论坛](http://productforums.google.com/forum/#!forum/gmail)提交功能请求；-)

[GMail](http://support.google.com/mail/bin/static.py?hl=en&page=suggestions.cs)页面还有一个专门的建议功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T19:45:19.210

我认为这是只读的：`https://www.googleapis.com/auth/gmail.readonly`

# javascript - 在指定时间后调用函数而不更改 DOM

> ID：14202472
> 
> 赞同：0
> 
> 时间：2013-01-07T19:11:54.233
> 
> 标签：javascript, jquery, dom

假设您想在按下触发大量更改的按钮后在 DOM 中没有更改 3 秒后显示警报。

通过 jQuery 获得按钮的示例：

```
$someButton.on('click',function(){
  setInterval(function(){
    if( noChangesSinceLastTime()){
      time += 100;  
    }
    else{
      time = 0;
    } 

    if( time == 3000){
      alert("3 seconds without changes!");
    }

  },100);
}); 
```

假设该按钮上的 click 事件有一些其他绑定，可以执行一系列用于 DOM 操作的函数。

我怎样才能实现`noChangesSinceLastTime()`功能？

## 更多关于我的具体问题

我有一个 HTML+JS+CSS 幻灯片，它可以与网络中的许多同时客户端一起使用。

当新客户加入时，他会自动被发送到其他人正在观看的当前幻灯片的开头。

我想要做的是，在它完成加载当前幻灯片之后，触发将新客户端与其他客户端同步所需的点击（因为幻灯片内的每次点击都会触发一个动画步骤，并且大多数幻灯片都有多个步骤）。

我无法在 JS 幻灯片中添加回调，因为它不是我制作的混淆 JS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:14:16.637

这只是伪代码，但你可以尝试这样的事情：

```
timer = setTimeout(function(){
   alert("3 seconds without changes!");
}, 3000);

if(/*some change happens*/) {
   clearTimeout(timer);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T19:33:49.027

你可以监听所有的[**DOM Mutatation**事件](http://en.wikipedia.org/wiki/DOM_events#Common.2FW3C_events)，并在其中任何一个被触发时设置一个标志。

然后在间隔函数中，您可以检查该标志并执行您想要的任何逻辑。=）。

问候，

# objective-c - 在ios中打开视频到时间偏移

> ID：14202473
> 
> 赞同：0
> 
> 时间：2013-01-07T19:11:55.780
> 
> 标签：objective-c, ios

我想在 ios 应用程序中打开一个 mp4 网络资产到一组特定的时间偏移，例如章节，2:31 到 10 分钟的视频

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:01:16.060

使用 AVAssetReader 并在开始读取帧之前设置时间范围：

```
CMTimeRange timeRange = CMTimeRangeMake(startTime, kCMTimePositiveInfinity);
assetReader.timeRange = timeRange; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T19:17:06.593

大概你有一个[MPMoviePlayerController](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html)已经用来播放电影，我建议查看控制器上的`initialPlaybackTime`和`endPlaybackTime`属性来设置电影播放的起点和终点。

# html - 如何获取网页上任何指定像素的颜色？

> ID：14202476
> 
> 赞同：7
> 
> 时间：2013-01-07T19:11:56.233
> 
> 标签：html

我最初的搜索表明，出于安全原因，我可能无法做到这一点，但我还是会问。如何获取网页上**任何指定像素的颜色？**
更具体地说，这是我自己的网页，其中包含背景颜色、图像、css-modified-elements。我需要知道完全渲染的网页上特定像素的颜色。该信息不能来自屏幕抓取，因为我想修改我完全呈现的页面。

哎哟！！！有人真的因为提出真正的问题而“减去 1”我吗？艰难的人群！

更具体地说：我想向网页添加一个用户可移动的画布元素，该元素在视觉上改变画布悬停在网页上的部分。将画布元素视为用户可以在网页上移动的放大镜。但我希望画布元素产生的实际效果是滤色器（因此需要基础颜色）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:14:27.280

[https://chrome.google.com/webstore/detail/eye-dropper/hmdcmlfkchdmnmnmheododdhjedfccka?hl=en](https://chrome.google.com/webstore/detail/eye-dropper/hmdcmlfkchdmnmnmheododdhjedfccka?hl=en)

好的，这里有更多细节......

使用 Chrome 插件，您可以加载您的页面，并使用小滴管工具选择您有兴趣查找颜色的页面部分。这是直截了当的，但对你的“编辑”来说，它是一种屏幕抓取。不确定您是否可以使用 chrome。

如果你不能使用插件，你有能力通过右键选择html元素吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T19:18:56.287

不能用脚本+技巧来完成。也许通过插件

如果您可以设置服务器端浏览器来为您呈现页面 - 那可能会起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-20T16:49:33.757

您可以在 DOM 更新时使用[html2canvas](https://github.com/niklasvh/html2canvas)库将您的网页重新渲染到画布上，然后从画布中获取像素信息。

但是，听起来您尝试实现的目标可能与 css 过滤器有关。[这是一个 css 过滤器可以做什么的演示。](http://html.adobe.com/webplatform/graphics/customfilters/cssfilterlab/) 您需要使用相同的 HTML 渲染两个图层，其中顶层应用了过滤器并被裁剪以仅覆盖所需的区域。

# android - 如何使用新的 Android 开发者控制台上传草稿应用程序？

> ID：14202479
> 
> 赞同：3
> 
> 时间：2013-01-07T19:12:00.537
> 
> 标签：android, apk, in-app-billing

Android 要求您通过开发者控制台上传具有计费权限的 APK 以开始测试真正的应用内计费。这在旧的开发者控制台中很紧张，但在新的开发者控制台中，一旦您上传 APK，它就会自动激活，并且无法取消激活。

我看到了一个[相关的问题](https://stackoverflow.com/questions/13902554/android-publishing-draft-apks-and-in-app-billing-testing-how/13902919#13902919)，他们建议使用旧的开发者控制台，但开发者控制台不允许我使用旧的控制台，因为我们的应用列表包含本地化内容。

**更新**更清楚地说，它让我切换回旧控制台，但我的应用程序附近有一条消息说

> 此应用已本地化图像和/或视频，请在新的开发者控制台中进行编辑。

而不是编辑按钮。

我见过[其他人](http://www.mail-archive.com/android-developers@googlegroups.com/msg226381.html)有同样的问题没有解决方案。

有什么解决方法可以通过新的开发者控制台上传草稿 apk 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T06:12:01.600

简而言之，你不能。似乎“一键发布”被宣传为一项功能。他们最终可能会添加某种草案支持，但谁知道呢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T10:39:58.080

现在，可以选择停用当前发布的 APK。至少，一周前我可以使用新的 Google Developer Console 做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T22:01:59.783

我联系了谷歌。看起来在这种状态下没有什么可做的。即使我删除本地化的商店内容，它也不会让我使用旧控制台。他们说草案 apk 支持**很快就会到来**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T19:18:12.480

前往右上角或导航至 play.google.com/apps/publish?switch_back=1 即可访问旧版开发者控制台

# .htaccess - 如何防止加载 .htaccess 指令

> ID：14202485
> 
> 赞同：1
> 
> 时间：2013-01-07T19:12:31.747
> 
> 标签：.htaccess

我有一系列存储在 .htaccess 文件中的 mod_rewrite 指令。它们都已经过测试并且可以完美运行。

我想在堆栈顶部插入一个新指令，该指令基本上执行如下：

*   如果 URL 等于某个地址，则不执行任何其他指令

这可能吗？

**修正**

*   我想赶上[http://mydomain.com/mydir/mysubdir/index.html](http://mydomain.com/mydir/mysubdir/index.html)
*   如果 URL 与我在上面的项目符号中列出的地址不完全匹配，那么我希望 .htaccess 指令来处理请求

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:16:51.090

在这里试试这个：

```
RewriteRule ^myrule$ - [L] 
```

这是一种不做任何事情的规则，它的标记是这是应该执行的[`[L]`最后一个规则。](http://httpd.apache.org/docs/2.4/rewrite/flags.html#flag_l)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T19:18:42.793

将`[L]`标志放在规则的末尾

更新：

```
RewriteRule ^(mydir|mydir1)($|/) - [L] 
```

mydir 和 mydir1 现在被排除在外

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T19:17:10.690

使用[最后一个](http://httpd.apache.org/docs/2.2/rewrite/flags.html#flag_l)或`[L]`标志作为您的重写规则。

# ruby - 评估 Ruby while 循环底部的退出条件

> ID：14202487
> 
> 赞同：1
> 
> 时间：2013-01-07T19:12:42.973
> 
> 标签：ruby

我有一个关于 Ruby 循环的非常基本的问题。

编写的这个程序返回第 i 个素数 +1（即示例应返回 17）。我知道我可以简单地 return `cand-1`，但我想知道检查是否在循环底部找到答案`while`并且只有在没有找到答案时才增加的“Ruby 方式”是什么。

```
def ith_prime(i)
  pI = 0 # primes index
  divs = []
  cand = 2

  until pI == i do 
    if divs.find { |div| cand%div == 0 } == nil
        divs << cand
        pI += 1
    end
    cand += 1
  end
  cand
end

puts ith_prime(7)
> 18 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T19:22:48.850

我使用`loop`而不是`while`或`until`大部分时间。这样我可以将退出条件放在循环中的任何位置。

我会这样写（如果我理解正确的话）：

```
def ith_prime(i)
  pI = 0 # primes index
  divs = []
  cand = 2

  loop do
    unless divs.find { |div| cand%div == 0 }
      divs << cand
      pI += 1
    end

    break if pI == i

    cand += 1
  end

  cand
end 
```

# xml - 使用 XSLT 从网站中提取数据

> ID：14202489
> 
> 赞同：1
> 
> 时间：2013-01-07T19:12:53.217
> 
> 标签：xml, xslt, xhtml, cross-domain

我正在尝试学习 XSLT，但遇到了一个问题。我想做的事情是从网站中提取一些数据，用 xslt 模板对其进行转换，最后将其显示在我自己的 xhtml 页面中。

假设我有一个 xml 文件（这将是我的 xhtml 站点）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<?xml-stylesheet type="text/xsl" href="myXSLTFile.xsl"?>

<!--here I want to have markup produced by xslt file--> 
```

问题是如何实现这一目标？我希望我的 xslt 文件在来自特定网站（例如[http://www.example.com](http://www.example.com)）的节点上工作，并将结果生成到我自己的 xml 文件中。

如果您发现我的解释令人困惑，请询问，我会尝试更好地解释该问题。

编辑。我举个例子。假设我们有这个页面：[http](http://www.w3.org/TR/xhtml1/) ://www.w3.org/TR/xhtml1/ 。我想开发 XSLT 文档，从完整目录中提取章节标题并将它们放入我自己的 xml 文件中的表格中。**我遇到的问题是如何在我的 xslt 文件中引用页面：[http](http://www.w3.org/TR/xhtml1/) ://www.w3.org/TR/xhtml1/以便它在其节点上工作**（这个页面是用 xhtml 编写的，所以我没有担心将html转换为xml）。

编辑2。经过进一步研究，Thomas W. 的答案似乎是问题的解决方案，但您必须处理 XSS 问题（LarsH 答案中的提示）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:14:52.117

绕过 XSS 限制的几种方法...请参阅[AJAX 和跨站点脚本以读取标头](https://stackoverflow.com/questions/5533207/ajax-and-cross-site-scripting-to-read-the-header)

*   添加本地 PHP 或其他服务器页面以代理到其他网站。
*   使用[CORS](http://www.nczonline.net/blog/2010/05/25/cross-domain-ajax-with-cross-origin-resource-sharing/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T20:12:52.653

理论上，你可以做类似的事情

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="test.xsl"?>
<page href="http://www.w3.org/TR/xslt/index.htm"/> 
```

并有一个样式表

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://www.w3.org/1999/xhtml">

  <xsl:template match="/">
    <html>
      <head></head>
      <body>
        <xsl:for-each select="document(*/@href)//h:h2">
          <xsl:copy-of select="."/>
        </xsl:for-each>
      </body>
    </html>
  </xsl:template>

</xsl:stylesheet> 
```

但这并不真正适用于浏览器（在我看来，仅限 Chrome）。一个原因可能是阻止加载外部页面的 XSS 安全功能。

# javascript - 如何防止 IE 修改“跨站脚本防护”页面

> ID：14202495
> 
> 赞同：0
> 
> 时间：2013-01-07T19:13:08.763
> 
> 标签：javascript, jquery, internet-explorer

> **可能重复：**
> [是什么触发“Internet Explorer 已修改此页面以帮助防止跨站点脚本。”？](https://stackoverflow.com/questions/11045665/what-triggers-internet-explorer-has-modified-this-page-to-help-prevent-cross-si)

当我通过 JavaScript 重定向页面时，IE 正在修改我的页面并将 # 自动添加到超链接中。

这是我看到的消息：

> Internet Explorer 已修改此页面以帮助防止跨站点脚本。
> 点击这里查看更多信息...

![在此处输入图像描述](../Images/687988fc72cb32fff64b8b8851b6323c.png)

我想以编程方式阻止 IE 这样做。

# ios - Node JS udp 广播未读取——node js 和 iOS

> ID：14202496
> 
> 赞同：1
> 
> 时间：2013-01-07T19:13:10.137
> 
> 标签：ios, node.js, udp, broadcast, gcdasyncsocket

这是我的代码（节点的javascript）：

```
var dgram = require('dgram');
var message = new Buffer("why hello beautiful");

var client = dgram.createSocket("udp4");
client.bind(41234);
client.setBroadcast(true);
client.send(message, 0, message.length, 41234, "134.71.147.255");

console.log('msg sent');

client.close(); 
```

这是我的计算机运行节点的 ifconfig（我认为唯一相关的事情——如果我错了，请纠正我）：

```
inet addr:134.71.146.49  Bcast:134.71.147.255  Mask:255.255.254.0
UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1 
```

udp 广播既不会在我的 iOS 应用程序上收到，也不会通过数据包检查器可见。怎么了？！iOS 应用使用 GCDAsyncUdpSocket 框架：

```
- (void) initUDPlistener {
    NSLog(@"initUDPlistener");

    udpSocket = [[GCDAsyncUdpSocket alloc] initWithDelegate:self delegateQueue:dispatch_get_main_queue()];

    NSError *error = nil;
    if (![udpSocket bindToPort:UDP_PORT error:&error]) //does the port matter? i dont know
    {
        return;
    }
    if (![udpSocket beginReceiving:&error])
    {
        return;
    }

    [udpSocket enableBroadcast:YES error:nil];
    [udpSocket sendData:[self pack:@"iOS to bcast"] toHost:UDP_BCAST_ADDR port:UDP_PORT withTimeout:-1 tag:0];

}

#pragma mark -
#pragma mark Delegate UDP methods

- (void)udpSocket:(GCDAsyncUdpSocket *)sock didReceiveData:(NSData *)data
      fromAddress:(NSData *)address
withFilterContext:(id)filterContext

{
    NSLog(@"niets."); 
    NSString *msg = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
    if (msg)
    {
        NSLog(@"iets gekregen");
    }
    else
    {
        NSLog(@"Error convertion");

    }

    NSLog(@"HMMMM");

}

-(void) udpSocket:(GCDAsyncUdpSocket *) sock didSendDataWithTag:(long)tag {//called. and packet inspector recieves the packet when it is sent OUT from the iOS app. 

    NSLog(@"written data tag: %ld", tag);
}

-(void) udpSocket:(GCDAsyncUdpSocket *)sock didConnectToAddress:(NSData *)address { //never called

    NSLog(@"connected to some address");
} 
```

会发生什么：“didReceiveData”不会从节点广播中调用。但是，当它发出自己的消息时，它会被调用。

另一方面，iOS 应用程序成功广播，我能够在我的数据包检查器上拦截该数据包。但是，相同的数据包检查器不会显示应该来自 Node 的数据包。

我在节点上做错了什么？我认为我在节点中所做的是问题所在。

# routes - webapp2 - 带参数的处理程序路由

> ID：14202501
> 
> 赞同：0
> 
> 时间：2013-01-07T19:13:50.363
> 
> 标签：routes, webapp2

我以这种方式定义了路线：

```
webapp2.Route(r'/v/<link:\d+>', handler=View), 
```

现在我想创建另一个特定的 Route `link`。就像是：

```
webapp2.Route(r'/test', handler=View('specific link')), 
```

有没有办法以这种方式创建路线？或者我应该创建新的处理程序并在这个处理程序中调用另一个预定义的处理程序`link`？如果是，我该如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:53:09.543

有一种方法可以为 RequestHandler 提供带有默认参数的字典：

```
webapp2.Route(r'/test', handler=View, defaults={'link': 'default_link'}), 
```

# r - Lasso r 代码 - 它有什么问题？

> ID：14202509
> 
> 赞同：6
> 
> 时间：2013-01-07T19:14:28.277
> 
> 标签：r, regression, lasso-regression, lars

我正在尝试使用 lars 包进行套索回归，但似乎无法让 lars 位工作。我输入了代码：

```
diabetes<-read.table("diabetes.txt", header=TRUE)
diabetes
library(lars)
diabetes.lasso = lars(diabetes$x, diabetes$y, type = "lasso") 
```

但是，我收到一条错误消息：rep(1, n) 中的错误：无效的 'times' 参数。

我试过这样输入：

```
diabetes<-read.table("diabetes.txt", header=TRUE)
library(lars)
data(diabetes)
diabetes.lasso = lars(age+sex+bmi+map+td+ldl+hdl+tch+ltg+glu, y, type = "lasso") 
```

但随后我收到错误消息：'lars 错误（age+sex + bmi + map + td + ldl + hdl + tch + ltg + glu, y, type = "lasso") : object 'age' not found'

我哪里错了？

编辑：数据 - 如下，但还有 5 列。

```
 ldl          hdl          tch          ltg          glu
1   -0.034820763 -0.043400846 -0.002592262  0.019908421 -0.017646125
2   -0.019163340  0.074411564 -0.039493383 -0.068329744 -0.092204050
3   -0.034194466 -0.032355932 -0.002592262  0.002863771 -0.025930339
4    0.024990593 -0.036037570  0.034308859  0.022692023 -0.009361911
5    0.015596140  0.008142084 -0.002592262 -0.031991445 -0.046640874 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T19:56:00.817

`lars::lars`似乎没有公式接口，这意味着您不能对列名使用公式规范（而且它不接受“data =”参数）。有关此主题和其他“数据挖掘”主题的更多信息，您可能想要获取经典文本的副本：“统计学习要素”。尝试这个：

```
# this obviously assumes require(lars) and data(diabetes) have been executed.
> diabetes.lasso = with( diabetes, lars(x, y, type = "lasso"))
> summary(diabetes.lasso)
LARS/LASSO
Call: lars(x = x, y = y, type = "lasso")
   Df     Rss       Cp
0   1 2621009 453.7263
1   2 2510465 418.0322
2   3 1700369 143.8012
3   4 1527165  86.7411
4   5 1365734  33.6957
5   6 1324118  21.5052
6   7 1308932  18.3270
7   8 1275355   8.8775
8   9 1270233   9.1311
9  10 1269390  10.8435
10 11 1264977  11.3390
11 10 1264765   9.2668
12 11 1263983  11.0000 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T19:57:01.433

我认为某些混淆可能与该软件包`diabetes`附带的数据集具有不寻常的结构这一事实有关。`lars`

```
library(lars)
data(diabetes)
sapply(diabetes,class)
##        x         y        x2 
##   "AsIs" "numeric"    "AsIs" 

sapply(diabetes,dim)
## $x
## [1] 442  10
## 
## $y
## NULL
## 
## $x2
## [1] 442  64 
```

换句话说，`diabetes`是一个包含“列”的数据框，这些“列”*本身就是矩阵*。在这种情况下，`with(diabetes,lars(x,y,type="lasso"))`还是`lars(diabetes$x,diabetes$y,type="lasso")`可以正常工作的。（但`lars(x,y,type="lasso")`不会，因为 R 不知道在数据框中查找`x`和`y`变量。）`diabetes`

但是，如果您正在读取自己的数据，则必须自己将响应变量和预测矩阵分开，例如

```
X <- as.matrix(mydiabetes[names(mydiabetes)!="y",])
mydiabetes.lasso = lars(X, mydiabetes$y, type = "lasso") 
```

或者你可以使用

```
X <- model.matrix(y~.,data=mydiabetes) 
```

# c++ - 映射比较器运算符重载

> ID：14202527
> 
> 赞同：0
> 
> 时间：2013-01-07T19:15:48.790
> 
> 标签：c++, map, comparator, functor

我正在尝试使用 Comparator 进行地图的关键比较。

```
std::map<SomePointer,SomeValue, SomeComparator> testMap;

class SomeComparator
{
   SomeComparator( ){ }

   bool operator()( const SomePointer& sp1, const SomePointer& sp2) const
   {
      return sp1 == sp2;
   }
} 
```

我的问题是我是否需要重载 operator() 或其他东西以允许 map::find 使用适当的比较器来比较两个指针并检索匹配的指针。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T19:18:41.840

对于地图，您需要提供一种`<`比较类型——具体来说是“严格的弱排序”。当 A 不小于 B 且 B 不小于 A 时，它推论相等。

但是，要回答您实际提出的问题：如果您提供上述比较器函子，则`operator()`该函子会超载。否则，您可以重载`operator<`您的密钥类型。

# java - 检查一个 ArrayList 的元素是否存在于其他

> ID：14202528
> 
> 赞同：1
> 
> 时间：2013-01-07T19:15:59.193
> 
> 标签：java, collections, arraylist

我有两个数组列表

```
ArrayList<String> a1
ArrayList<String> a2 
```

我想检查 a1 的所有元素是否都存在于 a2 中。这就是我从关于 SO 的问题中得到的

```
if (Arrays.asList(a2).containsAll(Arrays.asList(a1)))
{a2ContainsA1=true;} 
```

这没有给出一致的结果......有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T19:24:02.173

不确定我是否正确理解了您的问题，您为什么要使用`Arrays.asList()`？

试过这个：

```
 ArrayList<String> a1 = new ArrayList<String>();
    ArrayList<String> a2 = new ArrayList<String>();

    a1.add("a");
    a1.add("b");
    a2.add("b");
    a2.add("a");

    System.out.println(a2.containsAll(a1)); 
```

它输出`true` 添加一个额外的元素`a1`将失败（如预期的那样）：

```
 ArrayList<String> a1 = new ArrayList<String>();
    ArrayList<String> a2 = new ArrayList<String>();

    a1.add("a");
    a1.add("b");
    a1.add("c");
    a2.add("b");
    a2.add("a");

    System.out.println(a2.containsAll(a1)); 
```

它输出`false`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T19:22:15.343

我认为将两个 ArrayLists 转换为 Set 对象然后使用 set 操作来确定一个是否是另一个的子集会更容易。这也将满足@fge 关于重复性的评论：

```
ArrayList<String> a1 = ...;
ArrayList<String> a2 = ...;

public boolean isSubset(ArrayList<String> a1, ArrayList<String> a2) {
   Set<String> s1 = new HashSet(a1);
   Set<String> s2 = new HashSet(a2);

   return s1.containsAll(s2);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T19:48:33.263

你已经有了你的列表`a1`和`a2`这里，你想要的是告诉所有独特的元素`a1`是否也在`a2`. 因此，您只需要测试：

```
a1.containsAll(a2) 
```

`Arrays.asList()`将从您作为参数提供的所有元素中构建一个列表（即使“所有元素”只是一个元素）。实际上，您当前的代码尝试查看包含 list 对象的单元素列表是否包含另一个包含*list* *object* `a1`的单元素列表中的所有元素。当且仅当列表和相等时，这是正确的，也就是说，如果这两个列表在相同的索引处包含相同的元素，根据合同。 *`a2``a1``a2``List`*

 *这肯定不是你想要的！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T19:19:20.463

您可以遍历其中一个数组并包含其中的每个元素

```
boolean a2ContainsA1 = true;
for(String str: a2){
    if(!a1.contains(str)){
      a2ContainsA1 = false;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-07T19:22:01.157

您应该尝试（假设您不想保留 a1，或者克隆它）

```
boolean conditionVerified = a1.removeAll(a2).isEmpty(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-07T19:43:01.820

您可以使用[ListUtils](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/ListUtils.html#isEqualList%28java.util.Collection,%20java.util.Collection%29)`isEqualList()`的方法，例如 -

```
ArrayList<String> a1 = new ArrayList<String>();
ArrayList<String> a2 = new ArrayList<String>();

boolean isEqual = ListUtils.isEqualList(a1,a2); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-07T19:48:01.393

```
boolean contains = true;
for(int i=0 ; i<a1.size() ; i++)
{
  if(!a2.contains(a1[i])
      contains = false;
} 
```

这是你要找的吗？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-03-21T15:00:16.443

disjoint 似乎是一个不错的候选者。

```
check if disjoint using !Collections.disjoint(list1, list2); 
```

[http://www.tutorialspoint.com/java/util/collections_disjoint.htm](http://www.tutorialspoint.com/java/util/collections_disjoint.htm)上的基本示例*

# java - 嵌套元素列表的 JAXB 注释

> ID：14202529
> 
> 赞同：15
> 
> 时间：2013-01-07T19:16:08.023
> 
> 标签：java, xml, jaxb

我有以下 XML：

```
<mappings>
    <mapping>
        <parameter attr = "value">asdas</parameter>
        <parameter attr = "value2">d123asdsad</parameter>
        <parameter attr = "value3">0</parameter>
    </mapping>
    <mapping>
        <parameter attr = "value">23123s</parameter>
        <parameter attr = "value2">qwerty</parameter>
        <!-- more parameter elements -->
    </mapping>
    <!-- more mapping elements -->
</mappings> 
```

我有以下 java 类将其映射到：

```
@XmlRootElement(name = "mappings")
public class Mappings { 
    @XmlElement(name = "mapping")
    private List<Mapping> mMappings;

    public List<Mapping> getMappings() {
        return mMappings;
    }

    public void setMappings(List<Mapping> aMappings) {
        this.mMappings = aMappings;
    }
}

public class Mapping {
    @XmlElement(name = "parameter")
    private List<Parameter> mParameters;

    public List<Parameter> getParameters() {
        return mParameters;
    }

    public void setParameters(List<Parameter> aParameters) {
        this.mParameters = aParameters;
    }
}

public class Parameter {
    @XmlAttribute(name = "attr")
    private String mName;

    @XmlValue
    private String mValue;

    public String getName() {
        return mName;
    }

    public void setName(String aName) {
        this.mName = aName;
    }

    public String getValue() {
        return mValue;
    }

    public void setValue(String aValue) {
        this.mValue = aValue;
    }
} 
```

当我尝试用

```
JAXBContext context = JAXBContext.newInstance(BundleMappings.class);
Unmarshaller um = context.createUnmarshaller();
mappings = (BundleMappings)um.unmarshal(new File(myFile)); 
```

我收到这个错误

```
If a class has @XmlElement property, it cannot have @XmlValue property. 
```

我需要参数来同时具有'attr'属性和内容，那么我做错了什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-07T19:22:14.823

默认情况下[**，JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现将公共属性（get/set 方法）和带注释的字段视为映射（和单独的）。默认映射是`@XmlElement`这样您的属性将被视为以这种方式映射。

**解决方案#1**

由于您正在注释需要`@XmlAccessorType(XmlAccessType.FIELD)`在类中添加的字段。

```
@XmlAccessorType(XmlAccessType.FIELD)
public class Parameter {
    @XmlAttribute(name = "attr")
    private String mName;

    @XmlValue
    private String mValue;

    public String getName() {
        return mName;
    }

    public void setName(String aName) {
        this.mName = aName;
    }

    public String getValue() {
        return mValue;
    }

    public void setValue(String aValue) {
        this.mValue = aValue;
    }
} 
```

**解决方案#2**

注释 get（或 set）方法。

```
public class Parameter {
    private String mName;

     private String mValue;

    @XmlAttribute(name = "attr")
    public String getName() {
        return mName;
    }

    public void setName(String aName) {
        this.mName = aName;
    }

    @XmlValue
    public String getValue() {
        return mValue;
    }

    public void setValue(String aValue) {
        this.mValue = aValue;
    }
} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html](http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html)
*   [http://blog.bdoughan.com/2011/06/jaxb-and-complex-types-with-simple.html](http://blog.bdoughan.com/2011/06/jaxb-and-complex-types-with-simple.html)

* * *

**更新**

您还需要使用属性`@XmlElement`上的注释`mappings`来指定元素名称应该是`mapping`.

```
@XmlRootElement(name = "mappings")
public class Mappings { 
    private List<Mapping> mMappings;

    @XmlElement(name="mapping")
    public List<Mapping> getMappings() {
        return mMappings;
    }

    public void setMappings(List<Mapping> aMappings) {
        this.mMappings = aMappings;
    }
} 
```

# android - ParseException：使用 KML 在 Google 地图中绘制路线时格式不正确（令牌无效）

> ID：14202535
> 
> 赞同：0
> 
> 时间：2013-01-07T19:16:35.323
> 
> 标签：android, xml-parsing, google-places-api

我是 google map place api 的新手。我想在两点之间画一条路线。我正在使用完整代码中的代码（部分）。在这里，我遇到了异常。任何人都可以帮助我。为什么我得到这个例外。

提前致谢。

```
String url = RoadProvider.getUrl(26.9114976,75.8065347, placeLatitide, placeLongitude);
InputStream is = getConnection(url);
InputSource inputSource = new InputSource(is);
inputSource.setEncoding("UTF-8");
mRoad = RoadProvider.getRoute(inputSource);
mHandler.sendEmptyMessage(0);

public static Road getRoute(InputSource is) {
    KMLHandler handler = new KMLHandler();
    try {
            SAXParser parser = SAXParserFactory.newInstance().newSAXParser();
            parser.parse(is, handler);
    } catch (ParserConfigurationException e) {
            e.printStackTrace();
    } catch (SAXException e) {
            e.printStackTrace();  //HERE I am getting exception
    } catch (IOException e) {
            e.printStackTrace();
    }
    return handler.mRoad;
} 
```

例外：：`org.apache.harmony.xml.ExpatParser$ParseException`在第 1 行，第 821 列：格式不正确（无效标记）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:44:43.400

[http://maps.google.com/maps?f=d&hl=en&saddr=26.9114976,75.8065347&daddr=26.857126,75.812721&ie=UTF8&0&om=0&output=kml](http://maps.google.com/maps?f=d&hl=en&saddr=26.9114976,75.8065347&daddr=26.857126,75.812721&ie=UTF8&0&om=0&output=kml)

我使用这种方法在android中的两点之间绘制路线。

这种通过解析 KML 文件从 Google 中提取 Google Directions 的方式自 2012 年 7 月起不再可用（因为 Google 改变了检索 Google Directions 的结构，现在我们只能通过 JSON 或 XML 获取），我将我的代码迁移到JSON 而不是 KML。

有效。！！

谢谢

# javascript - Google Chart Full Screen On Click

> ID：14202553
> 
> 赞同：2
> 
> 时间：2013-01-07T19:17:31.380
> 
> 标签：javascript, jquery, google-visualization

Is there a way to make a Google Chart full screen on click?

I've been playing around with this for hours

JS -

```
 $('#chart_div').on('click', function(e) {
     $(this).css({
         width: "100%",
         height: "100%",
         margin: "0",
         border: "none"

     });
 }); 
```

CSS -

```
#chart_div {
    width: 100 px;
    height: 100 px;
    margin: 20 px;
    background - color: red;
    border: 1 px solid black;
}
body, html {
    height: 100 % ;
} 
```

​</p>

HTML - You are free to copy and use this sample in accordance with the terms of the Apache license ([http://www.apache.org/licenses/LICENSE-2.0.html](http://www.apache.org/licenses/LICENSE-2.0.html))

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>
        Google Visualization API Sample
    </title>
    <script type="text/javascript" src="http://www.google.com/jsapi"></script>
    <script type="text/javascript">
        google.load('visualization', '1', {
            packages: ['corechart']
        });
    </script>
    <script type="text/javascript">
        google.load("visualization", "1", {
            packages: ["corechart"]
        });
        google.setOnLoadCallback(drawChart);

        function drawChart() {
            var data = google.visualization.arrayToDataTable([
                ['Year', 'Sales', 'Expenses'],
                ['November', 1000, 400],
                ['December', 1170, 460],
                ['January', 660, 1120],
                ['February', 690, 1120],
                ['March', 780, 1120],
                ['April', 820, 1120],
                ['May', 660, 1120],
                ['June', 1030, 540]
            ]);

            var options = {
                title: '',
                backgroundColor: 'none',
                legend: {
                    position: 'none'
                },
                hAxis: {
                    title: 'Year',
                    titleTextStyle: {
                        color: 'grey'
                    }
                },
                chartArea: {
                    left: 40,
                    top: 10,
                    width: 900,
                    height: 350
                }
            };

            var chart = new google.visualization.AreaChart(document.getElementById('chart_div'));
            chart.draw(data, options);
        }

        $('#chart_div').on('click', function(e) {
            $(this).css({
                width: "100%",
                height: "100%",
                margin: "0",
                border: "none"

            });
        });
    </script>
</head>

<body style="font-family: Arial;border: 0 none;">
    <div id="chart_div"></div>
</body>

</html>
​ 
```

​</p>

[http://jsfiddle.net/FbKEL/5/](http://jsfiddle.net/FbKEL/5/)

Any help is much appreciated.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T19:21:26.697

Can't you just call drawChart again?

```
$('#chart_div').on('click',function(e){
    $(this).css({
        width:"100%",
        height:"100%",
        margin:"0",
        border:"none"  
    });
    drawChart();
}); 
```

See [here](http://jsfiddle.net/FbKEL/6/)

# c# - 互斥量与信号量有何关系？

> ID：14202554
> 
> 赞同：4
> 
> 时间：2013-01-07T19:17:36.940
> 
> 标签：c#, multithreading, mutex, semaphore

补充：好的，所以我可以分离互斥锁和信号量，我只想知道我的计数器想法对吗？即Release减一和WaitOne加一，只有当计数器大于零时才允许运行。这个说法对吗？

我有一些运行良好的代码：按顺序运行 first() second() third()。

我只想知道信号量中的计数器是如何工作的？我知道它是计数器。就是说Release减一，WaitOne加一，只有计数器大于零才允许运行。正确的？

但是我读了关于另一件事的书，互斥量，书中说互斥量 Waitone 减一，释放加一，所以互斥量与信号量相反？正确的？

代码：

```
using System;

namespace Algorithm.MultiThread
{
    class Semaphore
    {
        System.Threading.Semaphore s1, s2;
        public Semaphore()
        {
            s1 = new System.Threading.Semaphore(1, 5);
            s2 = new System.Threading.Semaphore(1, 5); //initialize as start counter 1
        }

        public void first()
        {
            Console.WriteLine("First");
            s1.Release(); // minus one
        }

        public void second()
        {
            s1.WaitOne(); //add one two times
            s1.WaitOne();
            Console.WriteLine("Second");
            s2.Release();
        }

        public void third()
        {
            s2.WaitOne(); // add one two times
            s2.WaitOne();
            Console.WriteLine("Third");

        }

        public void startnum(object obj)
        {
            int i = (int)obj;
            switch (i)
            {
                case 1:
                    first();
                    break;
                case 2:
                    second();
                    break;
                case 3:
                    third();
                    break;
                default:
                    break;
            }
        }

        public static void test()
        {
            Semaphore s = new Semaphore();
            System.Threading.Thread t1 = new System.Threading.Thread(new System.Threading.ParameterizedThreadStart(s.startnum));
            System.Threading.Thread t2 = new System.Threading.Thread(new System.Threading.ParameterizedThreadStart(s.startnum));
            System.Threading.Thread t3 = new System.Threading.Thread(new System.Threading.ParameterizedThreadStart(s.startnum));
            t1.Start(3);
            t2.Start(2);
            t3.Start(1);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T19:22:08.713

互斥体基本上是信号量的一种特殊情况。它可以被认为（即使它实际上不会被实现为）一个从 1 开始并且永远不能大于 1 的信号量。

想象 a`Semaphore`作为整数的`mutex`包装器，a 作为布尔值的包装器。它只有两种状态，自由或锁定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T19:24:05.340

互斥量就像拥有一个只允许一个线程的信号量。

互斥量只允许一次访问一个资源，而信号量可以设置为允许任何预设数量的并发访问一个资源或一段代码。

编辑：

如果它们被命名，两者都可以在不同的进程中使用。

# java - Spring Web Flows - getInteger() 与 getRequiredInteger()

> ID：14202555
> 
> 赞同：0
> 
> 时间：2013-01-07T19:17:39.657
> 
> 标签：java, spring, spring-webflow

我有一个关于 getInteger() 和 getRequiredInteger() 方法之间差异的快速问题。

```
public void foo(RequestContext requestContext){
    MutableAttributeMap flowScope = requestContext.getFlowScope();
    String bar = flowScope.getString("bar","bar"); // (attributeName, defaultValue)
    String baz = flowScope.getRequiredString("baz");
} 
```

唯一的区别是使用 getInteger()，如果在地图中找不到属性名称，您可以定义默认值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:24:01.470

根据[Spring Web Flow API](http://static.springsource.org/spring-webflow/docs/2.3.x/javadoc-api/index.html) ，两者之间的区别与异常抛出有关-

`getRequiredInteger()`- 返回映射中的整数属性值，如果属性不存在且类型正确，则抛出异常。

`getInteger()`- 返回映射中的整数属性值，如果没有找到值则返回默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T19:20:49.850

不，主要区别在于 getRequiredInteger 如果属性名称不在地图中，则会引发异常。

# c# - 为什么 WPF 在 Windows 8 中不显示 Windows 8 样式的按钮

> ID：14202562
> 
> 赞同：14
> 
> 时间：2013-01-07T19:18:22.517
> 
> 标签：c#, .net, wpf, vb.net, xaml

这是一个 Windows 8 风格的按钮：

![](../Images/cbccf0429ffce5743632c2d0dd636598.png)

这是 .NET 4.5 WPF 应用程序中的一个按钮：

![](../Images/66f5669e4fc191ec28ac6a4f01a5e647.png)

任何想法为什么 WPF 不显示本机 Windows 8 样式按钮？有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-07T19:22:43.227

您可以做的是使用[HERE](http://www.rudiv.se/Blog/programming/windows-8-release-preview-button-textbox-style-wpf)中的自定义 WPF 样式。

下面是在多个状态下应用于同一 WPF 应用程序的样式的屏幕截图。上装明显是 Aero 主题，下装则是新应用的款式。

![](../Images/f92f92b49a1a5765c7211b55b394c5b7.png)

这是[XAML](https://web.archive.org/web/20130722034224/http://www.rudiv.se/win8_theme_xaml.htm)的链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T19:37:35.640

WPF 不使用任何本机 Windows 控件 - 它为不同的 Windows 版本提供了自己的控件和样式。在 Windows 7 上，您可以找到以下程序集

```
PresentationFramework.Aero.dll
PresentationFramework.Classic.dll
PresentationFramework.Luna.dll
PresentationFramework.Royale.dll 
```

我猜想有一个适用于 Windows 8 的新版本。由于 WPF 不是基于本机控件构建的，因此可以在 Windows 7 上拥有 XP 风格的 WPF 应用程序，在 Windows XP 上拥有 Windows 7 风格的应用程序。

如果您想比 WPF 提供的开箱即用更好地匹配本机 Windows 8 UI，您将必须创建自己的样式 - 可能基于 WPF 提供的样式。

# ios - iOS 5：UIWebView 不从 Excel 文件中复制文本

> ID：14202565
> 
> 赞同：1
> 
> 时间：2013-01-07T19:18:41.747
> 
> 标签：ios, uiwebview, copy, xlsx, uipasteboard

我使用 UIPasteboardChangedNotification 来检测用户何时复制突出显示的文本

```
-(void)viewDidLoad {
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(receiveClipBoardNotification:) 
                                                 name:@"UIPasteboardChangedNotification"
                                               object:nil];
} 
```

这在 iOS 6 上完美运行，但是 appPasteBoard.string 在 iOS 5 上返回 nil

```
-(void)receiveClipBoardNotification:(NSNotification *) notification {
    UIPasteboard *appPasteBoard = [UIPasteboard generalPasteboard];
    NSLog(@"%@", appPasteBoard.string);
} 
```

此问题仅发生在 xls 和 xlsx 文件中。它适用于其他类型的文件，例如 pdf、docx、pptx、rtf、pages、key 等。

# python - 如何一步安装多个python扩展

> ID：14202573
> 
> 赞同：1
> 
> 时间：2013-01-07T19:19:03.470
> 
> 标签：python

是否可以收集许多 Python 扩展并一步安装它们？我有一个用于经常需要在多台机器上重新创建的开源项目的 Python 构建环境。每次我们需要这样做时，双击一堆 python 扩展 exe 是很痛苦的。

理想情况下，我想将完整的构建环境、Python、扩展、系统环境变量等打包到一步安装过程中。但是单步扩展安装也会有所帮助。这可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-07T19:23:23.183

是的，您可以这样做...`pip(python indexed package)`您的系统中安装了吗？如果没有，则安装它...并将所有扩展名放入一个文本文件中...说 requirements.txt...

这是通过运行

`pip freeze > requirements.txt`

然后通过使用 pip 你可以安装它......通过使用这个命令......

`pip install -r requirements.txt`...

它将安装文件中提到的所有扩展...

你可以在这里找到 pip 包[pip](http://pypi.python.org/pypi/pip) 可能会帮助你...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T19:23:50.667

您可以使用[Distribute](http://packages.python.org/distribute/)定义包的依赖项，当您要求安装包时，easy_install 或[pip将安装所有依赖项。](http://pypi.python.org/pypi/pip)

# java - 如何使用 Tomcat 和 MySQL 配置 Eclipse

> ID：14202575
> 
> 赞同：0
> 
> 时间：2013-01-07T19:19:14.457
> 
> 标签：java, mysql, jsp, jdbc

我正在尝试在 Eclipse 中使用 JSP 从 MySQL 表中获取行。我的 Tomcat 服务器已启动，jConnector 在 JRE 库中，我的代码是：

```
import java.sql.Connection;
import java.sql.DriverManager;

public class DBConnection {
    public Connection getDBConnection() throws Exception{
        Class.forName("com.mysql.jdbc.Driver").newInstance();
        Connection  conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/mydb","myuname","mypass");
        return conn;
    }
} 
```

JSP是：

```
<jsp:useBean id="dbConn" scope="request" class="dbConn.DBConnection"/>
<%
  Connection conn=dbConn.getDBConnection();
    Statement stmt = conn.createStatement();
    ResultSet rs = stmt.executeQuery("select * from user");
%>
<html>
...
<body>
<%while (rs.next()){ %>
<h1><%=rs.getString(2) %></h1>
<%} %>
</body>
</html>
<%
  if(conn!=null)
    conn.close();
%> 
```

最后的结果是

> 错误：根本原因
> 
> javax.servlet.ServletException：java.lang.ClassNotFoundException：com.mysql.jdbc.Driver

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T20:59:15.223

> *jConnector 在 JRE 库中*

这是不正确的。您应该将 JAR 文件放到 Web 项目的`/WEB-INF/lib`文件夹中。这基本上应该是您需要做的所有事情。此文件夹中的所有内容最终都在 webapp 的运行时类路径中。如果您还摆弄了项目的*构建路径*属性，那么我建议您撤消这一切。否则，它现在或将来可能会破坏或混淆其他东西。

### 也可以看看：

*   [找不到加载 JDBC org.postgresql.Driver 的类](https://stackoverflow.com/questions/7904756/class-not-found-loading-jdbc-org-postgresql-driver)

* * *

**与具体问题无关**：十年以来强烈反对在 JSP 文件中编写 Java 代码。我建议在普通的 Java 类中编写 Java 代码，并学习 servlet 来控制 HTTP 请求。

### 也可以看看：

*   [如何避免 JSP 文件中的 Java 代码？](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files)
*   [我们的 Servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)
*   [使用 MVC 和 DAO 模式在 JSP 页面的 HTML 中显示 JDBC ResultSet](https://stackoverflow.com/questions/5003142/jsp-using-mvc-and-jdbc)

# java - 根据数字而不是时间排序

> ID：14202576
> 
> 赞同：0
> 
> 时间：2013-01-07T19:19:17.783
> 
> 标签：java

我有几千行看起来像这样（显然有不同的数字）：

```
9994 ms - Total Recall DVD: 
99945 ms - classical music: 
99946 ms - ruth rendell: 
99949 ms - house beautiful january 1964: 
9995 ms - Killing Lincoln: 
9995 ms - TITLE:THE INTERCEPT AND AUTHOR:Wolf: 
9995 ms - TITLE:the amazing spiderman: 
9995 ms - everywhere russo: 
9995 ms - treasure yourself: 
9995 ms - what to expect when you're expecting: 
99952 ms - building endurance: 
9996 ms - Number the stars: 
9996 ms - The son of neptune: 
9996 ms - forsate saga, Narrowed By: LIBRARY: 
```

如果我将此文件读入java，按查询时间排序的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T19:23:43.063

问题是当您将文件作为*字符串*处理时，您将获得字典顺序。那不是你想要的。

我强烈建议您在读入文件时，将每一行解析为一个完整条目。之后，应该很容易创建[`Comparator`](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)基于时间进行比较的 a （无论您将毫秒数存储为 a`long`还是使用类似[Joda Time](http://joda-time.sf.net)的`Duration`类型）。虽然您*可以*改为实现类（`Album`或其他）[`Comparable`](http://docs.oracle.com/javase/7/docs/api/java/util/Comparable.html)，但我认为这里没有“自然”的排序顺序 - 能够在不同情况下通过各种不同的比较进行排序是有意义的。只需通过`Comparator`进入[`Collections.sort`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)，你会没事的。

一般来说，我建议尽早将数据从文本转换为“更完整”的对象模型，然后尽可能长时间地将数据保持在更丰富的格式中。当您将数据作为字符串处理时，您将遇到这类问题……而当您拥有丰富的数据时，各种事情都会变得容易得多。

在整个代码中应用此原则（尽可能多地使用“自然”类型的数据，而不仅仅是字符串表示）。它会让你的生活变得简单很多。尽可能避免使用 JDBC 参数等进行转换，并让每个变量真正代表它所说的:)

# c# - 文件从应用程序上传到云而不暴露信用

> ID：14202578
> 
> 赞同：1
> 
> 时间：2013-01-07T19:19:25.000
> 
> 标签：c#, file-upload, cloud, storage

我有一个面向最终用户的图像上传应用程序（C# 桌面），我想切换到云（存储）（VPS 是昂贵且无限的托管服务提供商不允许图像托管脚本）。为此，我需要在我的应用程序中嵌入登录凭据（交付给最终用户），并可能根据更改更新它们。因此，出于安全原因（破解和上传不是图像的东西），这对我来说不是一个解决方案。

一种解决方案是托管一个 PHP 脚本，以便我的应用程序上传到该脚本（检查它是否是图像），然后将该图像重新上传到云存储。问题是，我使用双倍带宽。

是否有任何云托管模型使我能够（无需支付双倍带宽或运行 PHP 应用程序或其他神学的额外费用）或如何“隐藏”信用？

我每天有大约 5000 名 uniqe 访问者，每个时刻大约有 70 名用户在线（谷歌分析）。我在免费应用程序中提供免费服务，没有添加，所以我没有收入，我真的会尽量以最低的托管成本保持这种状态:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:35:35.863

试用 Google App Engine 和 Blobstore。它相对易于使用（抱歉，不支持 PHP！）并且在指定的限制内免费，因此您无需花钱即可开发。

[https://developers.google.com/appengine/docs/python/blobstore/overview](https://developers.google.com/appengine/docs/python/blobstore/overview)

这个怎么运作：

1.  您的 C# 应用 GET 到一个简短的 Python 脚本，该脚本仅返回一个包含随机键的 URL（Google 提供给您的 Python 脚本）

2.  您的 C# 应用程序使用适当的 mime 类型 POST 到该 URL。

3.  上传完成后，您的 C# 应用程序将被重定向到最终 URL。该 URL 将再次成为 Python 脚本，然后将记录上传的 URL（和任何元数据）以防止它成为孤立的。

使用 Google App Engine 的另一个优势是它们提供了最终处理的图像转换（裁剪、缩放）——例如，允许您请求缩略图，而无需先下载完整大小的图像。

对于第 3 步，您可以将 URL（实际上只是 blobstore 条目 ID）记录到您的主应用程序。关键是：您不想丢失该随机密钥，因为这是检索图像文件的唯一方法。

# java - 普特特拉斯不工作

> ID：14202582
> 
> 赞同：2
> 
> 时间：2013-01-07T19:19:42.830
> 
> 标签：java, android

我有多个变量要从一个活动传递到另一个活动。

我在第一个活动中有这个：

```
public void onClick(View v) {
    switch(v.getId()){
    case R.id.bStartGame:
    Intent i = new Intent(StartScreen.this, GameScreen.class);
    Bundle extras = new Bundle();
    extras.putString("Name 0", sName0);
    extras.putString("Name 1", sName1);
    extras.putString("Name 2", sName2);
            .
            .
            .
    i.putExtras(extras);
    StartScreen.this.startActivity(i);
    finish();
    break; 
```

在第二个活动中，我有这个：

```
 Intent i = getIntent();
 Bundle extras = i.getExtras();
 String name0 = extras.getString("Name 0");

 TextView test = (TextView) findViewById(R.id.tvTEST);
 test.setText(name0); 
```

但是，当我这样做时，textview 什么也没显示。我怎样才能解决这个问题？

编辑：在第一个活动中，我有：

```
 name0 = (EditText) findViewById(R.id.etName0);
 sName0 = name0.getText().toString(); 
```

对于所有其他名称及其相关参考资料也是如此。

另外，为了澄清起见，name0 是编辑文本，sName0 是字符串，“Name 0”是键。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T19:28:29.073

您显示的代码没有任何问题。

```
String name0 = extras.getString("Name 1"); 
```

`name0`这里有正确的值：`""`. 如果它没有正确发送额外内容，它会是`null`，并且会给你一个`NullPointerException`on `.setText()`。

```
extras.putString("Name 1", sName0);
extras.putString("Name 1", sName1); 
```

在这里，您`"Name 1"`用 的值覆盖`sName1`，这可能是空白的。我假设您想发送`sName0`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T19:53:36.020

在您显示的代码中 sNameXX 尚未声明或初始化。您将它们正确发送到其他活动。

# android - 更新地图叠加层

> ID：14202584
> 
> 赞同：1
> 
> 时间：2013-01-07T19:19:54.487
> 
> 标签：android

我在理解 Android 中 Maps API 的概念时遇到了一些麻烦。每次我想在地图上绘制新的东西时，我都会创建一个新的叠加层，这对吗？乍一看，这似乎非常低效。整个层结构是否已经成熟，我根本不必担心性能，还是我错过了诸如 updateOverlay 之类的东西？或者当我扩展 Overlay 类并在之后调用 MapView.invalidate() 时，我会实现自己的 updateOverlay() 方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:48:48.347

您只需创建一次叠加层并将其添加到 MapView。然后你需要在*MapView上调用***postInvalidate()**，这样新的叠加层就会出现在屏幕上。如果没有此调用，将创建覆盖，但不会显示。

 *由于活动生命周期中的 onResume() 方法总是在应用程序启动或刚唤醒时调用，因此您希望在 onResume() 中启用位置跟踪并在 onPause() 中禁用它。**MyLocationOverlay 类**中有一个有用的方法：**runOnFirstFix()**这个方法允许你设置一个代码，一旦我们有位置就运行：

```
@Override
public void onResume()
{
    super.onResume();
    whereAmI.enableMyLocation();
    whereAmI.runOnFirstFix( new Runnable() {
        public void run() {
            mapController.setCenter(whereAmI.getMyLocation());
        }
    });
 } 
```

之后，您不需要自己做任何事情，因为 MyLocationOverlay 正在获取位置更新并将闪烁的蓝点放在该位置。

```
@Override
public void onPause()
{
    super.onPause();
    whereAmI.disableMyLocation();
} 
```*

# ruby-on-rails - simple_form 登录问题

> ID：14202590
> 
> 赞同：0
> 
> 时间：2013-01-07T19:20:28.600
> 
> 标签：ruby-on-rails, simple-form

首先，我对 Rails 很陌生——我正在玩一个小登录应用程序，让它一切正常，并决定尝试简单的表单——但是我无法让我的登录表单与 gem 一起使用。

**这是我曾经和曾经工作过的；**

```
<h2>Log In</h2>

<%= form_tag sessions_path do %>

  <div class="field">
    <%= label_tag :email %>
    <%= text_field_tag :email, params[:email] %>
  </div>

  <div class="field">
    <%= label_tag :password %>
    <%= password_field_tag :password %>
  </div>

  <p><%= link_to "Forgotten Password?", new_password_reset_path %></p>

  <div class="field">
    <%= check_box_tag :remember_me, 1, params[:remember_me] %>
    <%= label_tag :remember_me %>
  </div>

  <div class="actions"><%= submit_tag "Log In" %></div>

<% end %> 
```

**这是我试图将其更改为使用简单形式的内容。**

```
<h2>Log In</h2>

<%= simple_form_for :sessions, :url => sessions_path, :html => { :class => 'form-vertical' } do |f| %>

    <%= f.input :email, :required =>false, :label => 'Email Address',:placeholder => 'Email Address' %>

    <%= f.input :password, :required =>false, :label => 'Password',:placeholder => 'Password' %>

  <label class="checkbox">
    <%= check_box_tag :remember_me, 1, params[:remember_me] %>
    Remember me
  </label>

  <p>
    <%= link_to "Forgotten Password?", new_password_reset_path %>
  </p>

  <%= f.button :submit "Login" %>

<% end %> 
```

在我尝试登录之前，这似乎可以正常工作 -**当我登录时，它总是显示我的无效用户名和密码消息**- 我无法弄清楚我哪里出错了。任何帮助将非常感激！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:24:37.853

在案例 1 中，您可能会收到参数：`{ :email => '...', ....}`在案例 2 中，`:sessions => { :email => '...', ....}`

检查 params.inspect

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T03:33:44.090

知道了！非常感谢 Zabba 为我指明了正确的方向；

我的第二种方法有效；

```
<%= simple_form_for :sessions, :url => sessions_path, :html => { :class => 'form-vertical' } do |f| %>

        <%= f.input :email, :required =>false, :label => 'Email Address',:placeholder => 'Email Address' %>

        <%= f.input :password, :required =>false, :label => 'Password',:placeholder => 'Password' %>

      <label class="checkbox">
        <%= check_box_tag :remember_me, 1, params[:remember_me] %>
        Remember me
      </label>

      <p>
        <%= link_to "Forgotten Password?", new_password_reset_path %>
      </p>

      <%= f.button :submit "Login" %>

    <% end %> 
```

**但是我没有更新我的控制器，所以我有；**

```
 def create 
    user = User.find_by_email(params[:email])
    if user && user.authenticate(params[:password])
        ...
  end 
```

**我必须更新到；**

```
 def create 
    user = User.find_by_email(params[:sessions][:email])
    if user && user.authenticate(params[:sessions][:password])
        ...
  end 
```

谢谢扎巴！

# c++ - C++：二维数组作为类成员

> ID：14202593
> 
> 赞同：0
> 
> 时间：2013-01-07T19:20:32.867
> 
> 标签：c++, arrays, segmentation-fault

在我大学的 C++ 课上，我必须实现一个有向加权图。作为内部表示，我必须实现一个二维数组，它存储有关图中顶点之间的边的信息。

好的，我已经用重载的 [] 运算符实现了一个 C++ 类“TwoDimArray”。

只要我在 main() 中实例化 TwoDimArray 的对象，它就可以正常工作。但它不作为类成员。

我的图形表示类是“DirectedGraph”，并且有一个 TwoDimArray* 类型的私有成员“adjacencyMatrix”。

在我的 DirectedGraph 类的构造函数中，我打算最初用零填充数组，表示“节点 i 和 j 之间没有边”。

好吧，这就是一切都出错的地方。我可以写到坐标 [0][2] （当用 3 个节点初始化图形时，所以数组应该有 3x3 个单元格）。尝试在地址 [1][0] 处写入时，分配操作因分段错误而崩溃。因此，赋值操作成功 n 次，从 n+1 开始失败（其中 n 是顶点数）。

任何想法我做错了什么？

我的 TwoDimArray 类（第一个标题，然后是实现）：

```
#ifndef TWODIMARRAY_H_INCLUDED
#define TWODIMARRAY_H_INCLUDED

class TwoDimArray{

 private:

   int* pArr;
   int rows;
   int cols;

 public:

   TwoDimArray(int rows, int cols);
   int* operator[](int row);
   ~TwoDimArray();

};

#endif // TWODIMARRAY_H_INCLUDED 
```

实施：

```
#include <TwoDimArray.h>

TwoDimArray::TwoDimArray(int nrOfRows, int nrOfCols){

   rows = nrOfRows;
   cols = nrOfCols;

   //allocate memory
   pArr = new int[rows * cols];

 }

int* TwoDimArray::operator [](int row){

   return &pArr[row * cols];
}

  TwoDimArray::~TwoDimArray(){

   delete[] pArr;
} 
```

有向图标题：

```
 #define DIRECTEDGRAPH_H_INCLUDED
    #include <string>
    #include <list>
    #include <Vertex.h>
    #include <TwoDimArray.h>

    using namespace std;

    /**
     * DOCUMENTATION
     * ======================
     * object oriented Implementation
     * of the abstract
     * Datatype Directed Graph
     * as C++ class
    */

    class DirectedGraph{

       private:

          int maxVertices;
          list<Vertex> vertices;
          TwoDimArray* adjacencyMatrix;
          bool edgeExists(string srcName, string tgtName);
          int vertexExists(string vName);

       public:

          //DirectedGraph();
          DirectedGraph(int maxVertices);
          ~DirectedGraph();

          void AddVertex(Vertex& v);
          void AddEdge(Vertex& source, Vertex& target, int weight);

          int getMaxVertices() const;
          list<Vertex> getVertexNames()const;

          void PrintGraph();

    };

    #endif // DIRECTEDGRAPH_H_INCLUDED 
```

有向图实现（仅构造函数）：

```
 DirectedGraph::DirectedGraph(int maxV){

       this->maxVertices = maxV;

       //initialize the array
       this->adjacencyMatrix = new TwoDimArray(maxV, maxV);

       int i = 0;
       int j = 0;

       for(i = 0; i <= maxVertices - 1; i++){

          for(j = 0; j <= maxVertices - 1; j++){

             // ==> the fatal assignment
             //fails at i = 1 and j = 0

             *adjacencyMatrix[i][j]=0;
             cout << "assigned " << i << " " << j << "with 0"<<endl;
          }
       }
    } 
```

有什么建议么？我想将类成员声明为 TwoDimArray* 而不是 TwoDimArray 是不行的，否则它不会编译。

我还尝试过的是：

```
 DirectedGraph::DirectedGraph(int maxV){

       this->maxVertices = maxV;
               //try to instantiate TwoDimArray 
       TwoDimArray myArr(maxV, maxV);
       this->adjacencyMatrix = myArr;

       int i = 0;
       int j = 0;

       for(i = 0; i <= maxVertices - 1; i++){

          for(j = 0; j <= maxVertices - 1; j++){

             // ==> the fatal assignment
             //fails at i = 1 and j = 0
             myArr[i][j]=0;
             cout << "assigned " << i << " " << j << "with 0"<<endl;
          }
       }
    } 
```

但它同时失败了。我对 C++ 中的指针逻辑不是很熟悉，我必须承认......

有什么建议么？

提前感谢罗兰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T19:23:51.330

你违反了[三法则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)。解决这个问题的最简单方法是避免直接分配内存：

```
class TwoDimArray{
 private:
   std::vector<int> arr;
   int rows;
   int cols;
 public:
   TwoDimArray(int rows, int cols) : arr(rows * cols);
   int* operator[](int row) { return &arr[cols*row]; }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T19:23:18.663

一个问题是您没有为`TwoDimArray`.

这打破了以下内容：

```
 TwoDimArray myArr(maxV, maxV);
   this->adjacencyMatrix = myArr; 
```

可能还有其他代码。

请参阅[什么是三法则？](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)

# c++ - 在 Windows XP 32 位上安装 GSL 以用于代码块

> ID：14202598
> 
> 赞同：1
> 
> 时间：2013-01-07T19:20:49.567
> 
> 标签：c++, windows, installation, gsl

我正在尝试在 Windows XP 上安装 Gnu Scientific Library (GSL)，但这对我来说非常困难。我找到了这个网站

[http://gnuwin32.sourceforge.net/packages/gsl.htm](http://gnuwin32.sourceforge.net/packages/gsl.htm)

我从中下载了“完整包，源除外”并安装。但这只有 6.2MB 大，我发现它非常小。这个对吗？我很乐意在这方面得到一些帮助。

我不明白为什么这必须如此困难。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T04:56:09.377

我也是初学者，但我只是设法让它在带有代码块 12.11 的 Windows 8 上运行。

*   从您提到的文件安装 gsl。最好使用不带空格的文件路径（不确定此处是否相关，只需阅读此建议以安装其他库）

*   在代码块中，创建项目后：

*   右键单击项目名称

*   点击构建选项

*   在打开的窗口的右侧，选择项目的名称（树的根）

*   选择链接器设置选项卡

*   点击添加

*   浏览到 gsl 安装的 lib 目录并选择 libgsl.a

*   libgslcblas.a 相同

*   选择搜索目录选项卡

*   单击添加并选择 gsl 安装的包含目录。

从这一点开始，一切对我来说都很好。

祝你好运。

# javascript - Array.size() 与 Array.length

> ID：14202601
> 
> 赞同：442
> 
> 时间：2013-01-07T19:21:13.473
> 
> 标签：javascript, arrays

两者有什么区别？

所以我知道这`array.size()`是一个函数，而`array.length`它是一个属性。是否有使用一个的用例？一个更有效率吗？（我想`.length`会明显更快，因为它是一个属性而不是一个方法调用？）为什么要使用较慢的选项？是否有一些浏览器与其中一种不兼容？

```
 var x = [];
  console.log(x.size());
  console.log(x.length);
  console.log(x.size()==x.length);
  x =[1,2,3];
  console.log(x.size());
  console.log(x.length);
  console.log(x.size()==x.length); 
```

将打印：

```
 0, 0, true
  3, 3, true 
```

* * *

## 回答 #1

> 赞同：596
> 
> 时间：2013-01-07T19:32:16.270

## Array.size() 不是一个有效的方法

**始终使用长度属性**

有一个库或脚本将 size 方法添加到数组原型，因为这不是本机数组方法。这通常是为了添加对自定义 getter 的支持。使用它的一个例子是当你想获得一个数组的内存大小时（这是我能想到的唯一对这个名字有用的东西）。

不幸的是，Underscore.js 定义了一个`size`实际返回对象或数组长度的方法。因为不幸的是，函数的长度属性被定义为函数声明它们必须使用替代方法的命名参数的数量，并且选择了大小（计数会是更好的选择）。

* * *

## 回答 #2

> 赞同：172
> 
> 时间：2013-01-07T19:23:23.697

`.size()`**不是**`Array`（至少在我知道的任何浏览器中都没有）的本机 JS 功能。

`.length` **应该**使用。

* * *

# 如果

`.size()` ***确实***在您的页面上工作，请确保您没有包含任何额外的库，例如[原型](http://prototypejs.org/doc/latest/language/Array/prototype/size/)与`Array`原型混在一起。

## 或者

您的浏览器上可能有一些插件与`Array`原型不符。

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2016-05-25T13:44:10.393

该`.size()`函数在 Jquery 和许多其他库中可用。

该`.length`属性仅在索引为整数时有效。

该`length`属性**将**适用于这种类型的数组：

```
var nums = new Array();
nums[0] = 1; 
nums[1] = 2;
print(nums.length); // displays 2 
```

该`length`属性**不适**用于这种类型的数组：

```
var pbook = new Array(); 
pbook["David"] = 1; 
pbook["Jennifer"] = 2;
print(pbook.length); // displays 0 
```

因此，在您的情况下，您应该使用该`.length`属性。

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2013-07-24T20:07:57.207

`.size()`是 jQuery 的，很可能您对将 jQuery 库导入到他的项目的其他人感到困惑或从其他人那里获取。

如果你已经导入了[jQuery](http://jquery.com/)并且你会写 like `$(array).size()`，它会返回数组长度。

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2017-06-19T10:02:16.357

`array.length`不一定是数组中的项目数：

```
var a = ['car1', 'car2', 'car3'];
a[100] = 'car100';
a.length; // 101 
```

数组的长度比最高索引大一。

如前所述，`Array.size()`这不是一个有效的方法。

[更多信息](https://stackoverflow.com/questions/28811911/find-array-length-in-javascript)

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2018-11-14T08:59:09.887

属性 'length' 为带有数字键的数组返回 (last_key + 1)：

```
var  nums  =  new  Array();
nums [ 10 ]  =  10 ; 
nums [ 11 ]  =  11 ;
log.info( nums.length ); 
```

将打印 12！

这将起作用：

```
var  nums  =  new  Array();
nums [ 10 ]  =  10 ; 
nums [ 11 ]  =  11 ;
nums [ 12 ]  =  12 ;
log.info( nums.length + '  /  '+ Object.keys(nums).length ); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-07-21T12:10:11.083

.size() 方法从 jQuery 1.8 开始被弃用。改用 .length 属性

见：[https ://api.jquery.com/size/](https://api.jquery.com/size/)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-06-15T14:57:24.397

大小检测重复，它将返回唯一值的数量

```
const set1 = new Set([1, 2, 3, 4, 5, 5, 5, 6]);
console.log(set1.size);
// expected output: 6 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-03-16T07:42:15.607

其实`.size()`不是纯 JavaScript 方法，[Set](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set)[`.size`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set/size)对象有个 accessor 属性，有点像但不是函数方法，就像我说的，它是一个 Set 对象的 accessor 属性，用来显示唯一的个数Set 对象中的（唯一）元素。`.size()`

> size 访问器属性返回 Set 对象中（唯一）元素的数量。

```
const set1 = new Set();
const object1 = new Object();

set1.add(42);
set1.add('forty two');
set1.add('forty two');
set1.add(object1);

console.log(set1.size);
// expected output: 3 
```

And[`length`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/length)是一个可迭代对象（数组）的属性，它返回该数组中元素的数量。该值是一个无符号的 32 位整数，在数值上始终大于数组中的最高索引。

```
const clothing = ['shoes', 'shirts', 'socks', 'sweaters'];

console.log(clothing.length);
// expected output: 4 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-03-26T18:04:05.607

我们可以使用**.length**属性来设置或返回数组中元素的数量。**返回值是一个数字**

```
> set the length: let count = myArray.length;
> return lengthof an array : myArray.length 
```

如果我们需要过滤重复值并获取集合中元素的数量，我们可以为您提供 .size。

> ```
> const set = new set([1,1,2,1]); 
>  console.log(set.size) ;` 
> ```

# python - selenium 是否写入和读取 webelement 值

> ID：14202609
> 
> 赞同：5
> 
> 时间：2013-01-07T19:21:35.067
> 
> 标签：python, selenium

我第一次使用 Python2.7 和 selenium 进行自动化。现在我可以写和读下面的 HTML 内容了吗？

***单选按钮***

```
<form name="myWebForm" action="mailto:youremail@email.com" method="post">
<h4>Please select your favorite food category.</h4>
<input type="radio" name="food" /> : Italian<br />
<input type="radio" name="food" /> : Greek<br />
<input type="radio" name="food" /> : Chinese<br />
<h4>Please select your gender.</h4>
<input type="radio" name="gender" /> : Male<br />
<input type="radio" name="gender" /> : Female<br />
</form> 
```

***单选列表***

```
 <select size="3" name="selectionField" multiple="yes" > 
      <option value="CA" >California -- CA </option>
      <option value="CO" >Colorado -- CO</option>
      <option value="CN" >Connecticut -- CN</option>
    </select> 
```

***定义列表***

```
<dl>
<dt>Coffee</dt>
<dd>- black hot drink</dd>
<dt>Milk</dt>
<dd>- white cold drink</dd>
</dl> 
```

***复选框***

```
<form name="myWebForm" action="mailto:youremail@email.com" method="post">
<p>Please select every sport that you play.</p>

Soccer: <input type="checkbox" name="sports" value="soccer"  /><br />

Football: <input type="checkbox" name="sports" value="football"  /><br /> 

Baseball: <input type="checkbox" name="sports" value="baseball"  /><br /> 

Basketball: <input type="checkbox" name="sports" value="basketball"  />

</form> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T20:07:39.027

是的，检查 xpath

```
x = brower.select_element_by_xpath('//option[contains(text(), "CO"]')
x.text (print the div text) 
x.click() clicks the div 
```

要不就

```
brower.select_element_by_xpath('//option[contains(text(), "CO"]').click() 
```

阅读列表，这应该有效；

```
for i in browers.select_elements_by_xpath('//select[@name="selectionField"]//option'):
    print i.text 
```

您可以选择列表、单选按钮、跨度等，只要学习 Xpath 就值得付出努力。

# linux - 从字符串中获取特定的文本部分

> ID：14202619
> 
> 赞同：0
> 
> 时间：2013-01-07T19:22:31.127
> 
> 标签：linux, bash, sed, awk, grep

我有一个字符串，我需要提取两个部分 - 它们因 PHP 语言文件而异。希望有人可以提供帮助，字符串是：

```
$_LANG['FIELD1'] = "FIELD2"; 
```

我需要抓住 FIELD1 和 FIELD2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:31:45.800

这应该这样做：

```
# space seperated
$ sed -n "s/.*_LANG\['\([^']*\)'] = .\(\w*\).*/\1 \2/p" file
FIELD1 FIELD2

# newline seperated 
$ sed -n "s/.*_LANG\['\([^']*\)'] = .\(\w*\).*/\1\n\2/p" file
FIELD1
FIELD2 
```

或使用`grep`积极的[后视](http://www.regular-expressions.info/lookaround.html)：

```
$ grep -Po "(?<=_LANG\[')[^']*" file
FIELD1

$ grep -Po '(?<=_LANG\[.FIELD1.\] = ")[^"]*' file
FIELD2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T04:50:10.647

```
awk -F "[\"']" '{ print $2, $4 }' file 
```

# c# - 将字节数组传输到代码域给我一个错误

> ID：14202626
> 
> 赞同：0
> 
> 时间：2013-01-07T19:22:56.277
> 
> 标签：c#, codedom

嘿，伙计们，我正在做一个项目，我必须生成一个包含另一个可执行文件的字节数组的可执行文件，基本上我的程序加载一个可执行文件并将所有相应的字节存储在一个数组中，然后我给 codedom 可执行文件的源代码构建然后我循环遍历包含可执行文件的字节数组，并将其添加到 codedom 源中的新字节数组，然后再使用 codedom 编译

在编译 program2 之前，有没有更简单的方法将 bytearray 从 program1 传递到 program2 的源？

我应该提到我已将源分成 3 个部分，以便我可以将 bytearray :S 添加到源字符串 Oo

我已经查看了完成的代码，它没有任何问题，但是当我用 codedom 编译它时，我得到了以下错误

```
Error: C\Users\*myname*\AppData\Local\Temp\ycfx9ffp.0.cs(1,246) : error CS0031: Constant value '197185' cannot be converted to a 'byte' 
```

而且我不知道如何调试该字符串大声笑：S

这是我用来向源添加字节的循环：

```
foreach(byte mybyte in stryker)
        {
            if (mybyte != stryker[stryker.Length - 1])
                part2 += mybyte + ", ";
            else
                part2 += mybyte;
        }
        string source = part1 + part2 + part3; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:39:42.763

正如 500 指出的那样，如果字节数组中有一个字节与最后一个字节相同，那么您的代码将无法正常工作，这很可能。

修复代码的最简单方法可能是使用库方法来组合字节：

```
part2 = string.Join(", ", stryker); 
```

Bu 在源代码中有一个字节数组对我来说听起来不是一个好主意。我认为您应该改用嵌入式资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T19:35:03.733

这部分：

```
if (mybyte != stryker[stryker.Length - 1])
                part2 += mybyte + ", "; 
```

似乎假设“stryker”中的字节是唯一的 - 也就是说，最后一个值 (stryker[stryker.Length - 1]) 不会出现在其他任何地方。

是这样吗？

# razor - telerik grid detailtview Razor vb.net 语法

> ID：14202628
> 
> 赞同：0
> 
> 时间：2013-01-07T19:23:05.543
> 
> 标签：razor, telerik-grid, vb.net-2010

我需要语法方面的帮助

我有下面的剃刀代码。但我没有得到详细的视图。当我使用下面的代码时，将呈现细节网格，然后是普通的客户网格。对象是客户，详细视图是此客户的一些设置吗？有人可以帮我语法吗？

谢谢！

```
 @(Html.Telerik.Grid(Model) _
            .Name("CustomerGrid") _
                .DataBinding(Function(dataBinding) dataBinding.Server() _
                                        .Update("SaveCustomer", "Admin")) _
        .DataKeys(Function(keys) keys.Add(Function(o) o.CustomerID)) _
        .DetailView(Function(dt) dt.Template(Sub(tt)
                                 Html.Telerik.Grid(tt.MessageSettings) _
                                 .Name("MessageSetting" & tt.CustomerID) _
                                 .Columns(Function(dc) {
                                                dc.Bound(Function(dd) dd.CustomerMessageSettingsID), _
                                                dc.Bound(Function(dd) dd.Free)
                                              }).Render
                        End Sub)) _
        .Columns(Function(c) { _
                        c.Bound(Function(o) o.CompanyName).Width(200), _
                        c.Bound(Function(o) o.Credits), _
                        c.Bound(Function(o) o.Address), _
                        c.Bound(Function(o) o.City), _
                        c.Command(Function(d) { _
                            d.Edit.ButtonType(GridButtonType.Image) _
                        }) _
                    }) _
.Filterable _
.Groupable _
.Editable(Function(e) e.Mode(GridEditMode.InLine)) _
.Pageable() _
.Sortable() _
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:53:42.143

我建议你使用`LoadContentFrom()`

```
.DetailView(details => details.ClientTemplate(    
 Html.Telerik().TabStrip()
 .Items(items =>
                {
items.Add().Text("MyView").LoadContentFrom("PartialActionResult", "Controller", New With { _
        .param1 = "<#= ID#>" _
    })
 }) // End of item Tabs
                .ToHtmlString()
                ) // End of Detail View Client Template
                ) // End of Detail View 
```

# php - phpcloud 使用 MySQL 连接上传 zf2 时出错

> ID：14202630
> 
> 赞同：0
> 
> 时间：2013-01-07T19:23:15.107
> 
> 标签：php, mysql, zend-framework2

我的 php ZendFramework2 代码在本地运行良好，但是当我将其提交到 php-cloud 时，它显示数据库连接错误。请在此处查看页面-> [http://roommates.my.phpcloud.com/roommate/album/index](http://roommates.my.phpcloud.com/roommate/album/index)

ZF2 是否需要 application.ini 文件？不知道如何进行..

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:25:24.087

您的代码使用本地管道连接到您的 mysql 服务器。如果 mysql 服务器在本地运行，与您的代码在同一台服务器上，并且当前已启动。您的连接信息应该有效。否则你的 application.ini 文件需要为 mysql 指定连接信息。

# php - Kohana 片段缓存和数据库结果

> ID：14202633
> 
> 赞同：0
> 
> 时间：2013-01-07T19:23:18.520
> 
> 标签：php, kohana

我正在尝试使用 Fragment 助手类优化我的 Kohana (3.2.2) 应用程序，但我才意识到我做错了。

型号_文章：

```
 public function get_articles()
    {
        /*
         * This is just a PDO wrapper, I don't like the kohana built in
         * database module
         */
        $db = DB::instance();

        $article_stmt = $db->prepare("SELECT * FROM articles");
        $article_stmt->execute();
        return $article_stmt->fetchAll();
    } 
```

控制器_文章：

```
 public function action_index()
    {
        $this->template->content = View::factory('welcome/index');

        $this->template->content->articles = Model::factory('article')->get_articles();
    } 
```

风景：

```
 <?php if ( ! Fragment::load('home.articles')): ?>

            <!-- cache test -->

            <?php foreach($articles as $article) echo $article->title . PHP_EOL ?>

            <?php Fragment::save(); ?>
        <?php endif; ?> 
```

您可以看到，无论视图中发生什么，查询总是被执行。我希望仅在缓存更新时执行查询。但是将模型对象传递给视图会破坏我猜的一些 MVC 约定？！有人可以告诉我怎么做吗？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T08:32:07.707

缓存处理是控制器应该做的，而不是视图。

将其从视图移动到控制器并感到高兴。我没有使用 Fragment 模块，但我想您会理解要点：

```
public function action_index()
{
    $this->template->content = View::factory('welcome/index');
    if ( ! $articles = Fragment::load('home.articles') )
    {
        // It's better to use separate view for articles list
        $articles = View::factory('articles/list', array('articles' => Model::factory('article')->get_articles());
        // Hope not just an output can be captured but argument can also be passed to the save() method of the module
        Fragment::save($articles);
    }
    $this->template->content->articles = $articles;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:50:22.943

您必须在视图中进行查询（如果您扩展`Controller_Template`了）或在控制器中回显（如果您扩展了`Controller`）。

例子

Controller_Article（**扩展控制器**）：

```
public function action_index()
{
    if ( ! Fragment::load('home.articles')):

        $template = View::factory('my_template_view');

        $template->content = View::factory('welcome/index');
        $template->content->articles = Model::factory('article')->get_articles();

        echo $template->render();   // If you won't print anything,
                                    // don't use fragments

        Fragment::save();   // Save the OUTPUT, but DOES NOT save variables
    endif;
} 
```

Controller_article（**扩展 Controller_Template**）：

```
public function action_index()
{
    $this->template->content = View::factory('welcome/index');
} 
```

查看（欢迎/索引）：

```
<?php
    // echo $articles;     // Now Controller is not binding this variable
    if ( ! Fragment::load('home.articles')):

        // Variable - Does NOT save in Fragment
        $articles = Model::factory('article')->get_articles();

        // ECHO = save to Fragment
        foreach($articles as $article) echo $article->title . PHP_EOL;

        Fragment::save();   // Save the OUTPUT, but DOES NOT save variables
    endif;
?> 
```

如果要保存变量，请使用[Kohana Cache](http://kohanaframework.org/3.3/guide/cache)。

# hadoop - hadoop list 命令是否显示状态不是 1 的作业？

> ID：14202637
> 
> 赞同：1
> 
> 时间：2013-01-07T19:23:30.083
> 
> 标签：hadoop, mapreduce

我知道`hadoop job -list`commnad 列出了*当前正在运行的作业*，即状态为**1 (Running)**的作业。但它是否列出了失败的工作？我的意思是我可以得到这样的输出：

```
1 jobs currently running
JobId   State   StartTime       UserName
job_200808111901_0001   3       1218506470390   abc
job_200808111901_0002   2       1218506470390   xyz 
```

请注意，上述作业的状态为**3 (Failed)**和**2 (Succeeded)**。

我对 Hadoop 很陌生，所以如果这个问题太简单，请原谅我。我试图用谷歌搜索，但所有的例子都只列出了状态为 1 的工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:50:20.583

只需添加`all`，您将得到您想要的。

执行类似的东西：`hadoop job -list all`.

示例输出如下所示：

```
$ hadoop job -list all
0 jobs submitted
States are:
    Running : 1 Succeded : 2    Failed : 3  Prep : 4
JobId   State   StartTime   UserName    Priority    SchedulingInfo 
```

有关 hadoop 命令的更多详细信息，尤其是`hadoop job`，请阅读[此处](http://hadoop.apache.org/docs/r0.19.1/commands_manual.html#job)。

# jakarta-mail - MyEclipse 中的 JavaMail 异常：javax.mail.SendFailedException：发送失败；嵌套异常是：javax.mail.MessagingException：

> ID：14202638
> 
> 赞同：0
> 
> 时间：2013-01-07T19:23:31.987
> 
> 标签：jakarta-mail

我正在使用邮件开发一个简单的 Web 应用程序，以 MyEclipse8.0.1 和 Weblogic8.0 作为服务器。以下是我发送电子邮件的代码，它适用于控制台，但是当我使用 myeclipse 和 Weblogic 运行它时，它显示以下错误：

javax.mail.SendFailedException：发送失败；嵌套异常是：javax.mail.MessagingException：无法连接到 SMTP 主机：smtp.gmail.com，端口：465

这是我在jsp中的代码：

```
<%
try {
        Properties p = new Properties();
        p.put("mail.transport.protocol","smtp");
        p.put("mail.smtp.host","smtp.gmail.com");
        p.put("mail.smtp.port","465");  
        p.put("mail.smtp.auth","true");
        p.put("mail.smtp.debug","true");
        p.put("mail.smtp.starttls.enable", "true");
        p.put("mail.smtp.ssl.enable", "true");
        p.put("mail.smtp.socketFactory.class","javax.net.ssl.SSLSocketFactory");
        p.put("mail.smtp.socketFactory.port", "465");
        p.put("mail.smtp.socketFactory.fallback", "false");
        java.security.Security.addProvider(new com.sun.net.ssl.internal.ssl.Provider());
        Session s = Session.getInstance(p,new javax.mail.Authenticator() {
            protected PasswordAuthentication getPasswordAuthentication() {
                return new PasswordAuthentication("user","pass");}});
        Message msg = new MimeMessage(s);
        msg.setFrom(new InternetAddress("toaddr@gmail.com"));
        msg.setRecipients(Message.RecipientType.TO, InternetAddress.parse("toAddr@gmail.com"));
        msg.setSentDate(new java.util.Date());
        msg.setSubject("MySub");
        msg.setText("Body");
        Transport.send(msg);
        out.println("Mail sent successfully");
}
catch (Exception e)
{
  //e.printStackTrace();
  System.out.println("Exception : " + e);
  out.println("Exception : " + e);
}

%> 
```

这里发生的一件有趣的事情是，当我通过启动 MyEclipse Tomcat 服务器并运行代码来尝试相同的代码时，它成功地发送到我的 gmail 帐户，因为它正在从控制台程序工作。但是当我再次使用 Weblogic 8.0 尝试上述代码时，它显示异常“javax.mail.MessagingException：无法连接到 SMTP 主机：smtp.gmail.com，端口：465”。

我不知道出了什么问题，无论是在代码中还是在服务器中的某些特殊设置中。所以请高手指点一下。非常感谢，提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:21:33.740

JavaMail FAQ[提供了调试连接问题的技巧](http://www.oracle.com/technetwork/java/javamail/faq/index.html#condebug)。

Tomcat 和 WebLogic 是否在同一台机器上运行？可能有防火墙或防病毒产品阻止您连接。

# ruby - 续集：未找到 DB2 适配器

> ID：14202640
> 
> 赞同：0
> 
> 时间：2013-01-07T19:23:39.333
> 
> 标签：ruby, db2, sequel

好的，我一直在尝试连接到 DB2 数据库。我一直在尝试使用 Sequel，希望构建一些 PORO 来访问我的 DB2 数据库中的数据。

所以在安装了Sequel之后，我一直在尝试在irb中做以下事情

```
require 'sequel'
DB = Sequel.connect('db2://myuser:mypass@myhost.com:10000/mydatabase') 
```

这给了我以下错误：

```
Sequel::AdapterNotFound: LoadError: cannot load such file -- db2/db2cli 
```

查看 sequel 中 DB2 Adapter 的 sequel 源代码，这是从这个 require 语句生成的

```
require 'db2/db2cli' 
```

所以我安装了我认为可能需要的所有 gem：db2、ibm_db 和 dbi。我还下载了 CLI 并将其放在我的系统路径中并下载了 DB2 Express C。无论我尝试什么，我都无法通过这个 require 语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T20:38:04.840

您可能想要安装`ibm_db`和使用`ibmdb://...`而不是`db2://...`. 适用于 gem 形式不可用`db2://...`的旧驱动程序（您可以在[http://rubyforge.org/frs/download.php/8264/ruby-db2-0.4.4.tar.gz](http://rubyforge.org/frs/download.php/8264/ruby-db2-0.4.4.tar.gz)获得它）。`db2/db2cli`

# regex - awk 根据第一个字符合并行

> ID：14202641
> 
> 赞同：0
> 
> 时间：2013-01-07T19:23:40.673
> 
> 标签：regex, bash, ssh, awk

我正在尝试编写一个命令来将文本包文件转换为自动密钥文件。texter 文件的格式如下：

```
.abbr
This would be the replacement text for the line above in texter.
.day
Have a GREAt day!
.but
But some of the 
information takes up multiple lines
.how
However all the abbreviations 
start with a "." and 
then x lines of text to be 
```

我需要将每一个都放在一个单独的文件中，或者将缩写及其替换文本以下列格式打印到相应的字段中：

```
 "items": [
{
    "usageCount": 0, 
    "omitTrigger": false, 
    "prompt": false, 
    "description": "description", 
    "abbreviation": {
        "ignoreCase": false, 
        "wordChars": "[\\w]", 
        "immediate": false, 
        "abbreviation": "ABBREVIATION GOES HERE", 
        "backspace": true, 
        "triggerInside": false
    }, 
    "hotkey": {
        "hotKey": null, 
        "modifiers": []
    }, 
    "phrase": "REPLACEMENT TEXT GOES HERE", 
    "modes": [
        1
    ], 
    "showInTrayMenu": false, 
    "matchCase": false, 
    "filter": null, 
    "type": "phrase", 
    "sendMode": "kb" 
```

我很确定我可以使用 awk 处理格式化部分，但我如何才能获取正确的缩写及其适当的替换文本。这是我想出的将其打印到可以格式化的单个文件的方法，但它给了我关于关闭 f 的错误：

```
awk '/^\./ {f="$title\."++d} f{print > f} /^\./ {close f; f=""}' 
```

我写的这个脚本也不起作用：

```
#!/bin/sh

while read line
do
   if echo $line | grep "^\."; then
       line_no=`echo $line | awk -F "\." '{ print $2 }'
   elif echo $line | grep "^\."; then
       : #ignore
   else
       echo "$line" >> t2ak.$line_no
   fi
done < Default.texter 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:15:26.080

这可能对您有用：

```
csplit -n5 -z file '/^\./' '{*}' 
```

这会将每个缩写放在一个单独的文件中，然后使用 sed 或 awk 使用生成的文件填写模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T19:45:43.470

尝试使用`"\n\."`as`awk`的记录分隔符正则表达式。

# java - 服务器套接字一直读取数据，直到我从 Java 中的客户端关闭套接字

> ID：14202654
> 
> 赞同：2
> 
> 时间：2013-01-07T19:24:19.497
> 
> 标签：java, sockets, bufferedreader, outputstream

我无法使用 java 从客户端获取服务器中的数据以下是我的服务器代码：

```
 public void UpdateClients() throws Exception{

    Socket socktmp=null;

    try
    {
        socktmp= mainSocket.accept();
        rdr= new BufferedReader( new InputStreamReader(socktmp.getInputStream()));
        String t="";
        String name="";
        while((t=rdr.readLine())!=null){     <<<<< **it stops here**
            name=t;
        }
        //rdr.close();
        LstClient.AddClient(name, socktmp);

        objwriter = new ObjectOutputStream(socktmp.getOutputStream());
        objwriter.writeObject(LstClient.clients);
        objwriter.flush();  
        objwriter.close();
   }
   catch(Exception ex){
        throw new Exception("Unable to Update Clients. Error :" + ex.getMessage());
   }
      finally{
        try{
            if(mainSocket!=null){
                mainSocket.close();
            }
            if(socktmp!=null){
                socktmp.close();
            }
            if(rdr!=null)
            {
                rdr.close();
            }
            if(objwriter!=null)
            {
                objwriter.close();
            }

        }
        catch(Exception ex1){
            throw new Exception("Unable to close streams after opeining. Error :"+ ex1.getMessage());
        }

   }

} 
```

以下是我的客户代码：

```
public Client(String serverIp,int port,String name) throws Exception{

    try{
        if(mainSock!=null){
        mainSock.close();
        }
        mainSock= new Socket(serverIp, port);
        writer= new BufferedWriter(new OutputStreamWriter(mainSock.getOutputStream()));

        writer.write(name);
        writer.flush();
        **//writer.close();**
        Thread.sleep(1500);
        objin = new ObjectInputStream(mainSock.getInputStream());
        Hashtable<String,Socket> lst= new Hashtable<String , Socket>();
        lst = (Hashtable<String, Socket>) objin.readObject();
        cl = new LstClient();
        LstClient.clients = lst;
        System.out.println(LstClient.clients.size());
        objin.close();

    }
    catch(Exception ex){
        throw new Exception("Error : "+ ex.getMessage());
    }
    finally{
        if(mainSock!=null){
            mainSock.close();

        }
        if(writer!=null){
            writer.close();
        }
        if(objin!=null){
            objin.close();
        }

    }

} 
```

当我在客户端关闭写入器时，我只在服务器中获取数据或光标在服务器端读取行。但是当我在客户端关闭编写器后尝试阅读时，它说套接字已关闭，所以没有关闭它会在服务器端的 readline 上暂停，请帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T19:27:04.240

使用 readLine 时我很常见的错误是忘记发送新行。

您正在发送没有换行的文本，即`\n`等待它被发送。

尝试添加`write('\n');`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T19:28:06.557

因为您正在阅读[`readLine()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/BufferedReader.html#readLine%28%29)，这将阻塞，直到遇到回车。在您的姓名末尾添加“\n”。或者更好的是，使用 a[`PrintWriter`](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/PrintWriter.html)并编写 using`println`

# c - C中的RLE压缩

> ID：14202655
> 
> 赞同：-1
> 
> 时间：2013-01-07T19:24:22.763
> 
> 标签：c

我正在尝试制作一个对提供给用户的输入字符串进行 RLE 压缩的程序，但是当我尝试运行它时，我遇到了分段错误，但我不知道我的错误在哪里......

这是我的代码：

```
#include <stdio.h>
#include <string.h>

char * rle_convert(char str[500]);

char str_out[500];

int main(void) {
    char str[500];
    printf("give a string : ");
    fgets (str, 500, stdin );
    strcpy(str,rle_convert(str));
    printf("%s",str);
}

char * rle_convert(char str[500]) {
    int i,j,k=0,sum;
    for (i=0; i<(strlen(str)-1); i+sum) {
            sum=1;
            for (j=i; str[j]==str[j++]; j++ ) sum++;
            if (sum>1) {
                    str_out[k]=sum+48;
                    str_out[k++]=str[i];
            }
            else str_out[k]=str[i];
            k++;
    }
    return str_out;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:31:07.010

一个错误在这里：

```
for (i=0; i<(strlen(str)-1); i+sum) {
                             ^^^^^ 
```

你的意思是写`i += sum`吗？

另一个错误是由于以下方面的双重增量：

```
 for (j=i; str[j]==str[j++]; j++ ) sum++;
                              ^^^   ^^^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T19:34:06.023

我立即看到的一件事是您`j`在每次迭代中递增两次。也许你的意思`str[j] == str[j+1]`是条件。但是，即使你这样做了，在那个嵌套循环中，你仍然可以到达数组边界之外的区域。您需要确保不仅上述条件为真，而且仍在*有效*`str[j]`范围内。

后来你说

```
str_out[k]=sum+48;
str_out[k++]=str[i]; 
```

这绝对不是你想要的。你想要的可能`str_out[k++]`在两个任务中，否则第二个任务会抵消第一个任务。

再说一次，如果`sum`等于`1`，则不保存重复次数，只保存字符。我怀疑这就是你想要的，因为解码结果数组的代码将无法区分计数和值。因此，您可能希望将`if`正文用于两种情况（无条件）。

另外，正如另一个答案中提到的，第一个循环将永远持续下去，因为你没有`i`在外`for`循环的 step 部分增加。

# vb.net - VB - Excel，如果所选单元格有新文本，则在 worksheet.copy() 上崩溃

> ID：14202656
> 
> 赞同：0
> 
> 时间：2013-01-07T19:24:24.020
> 
> 标签：vb.net, excel-2010

我是 VB 新手，在尝试复制工作表时遇到了令人沮丧的崩溃。

调用`worksheet.Copy()`在大多数情况下都有效，但是当用户在单元格中输入文本并且没有取消选择该单元格或按下 Enter 键时，它会崩溃并显示消息“工作表类的复制消息失败”和错误代码 -2146827284。谁能告诉我为什么会这样？

这是整个子（当用户单击 excel 功能区中的按钮时调用）

```
Friend Sub CheckSheet(ByRef worksheet As Microsoft.Office.Interop.Excel.Worksheet, ByVal testType As List(Of String), ByRef guide As List(Of String), ByRef display As Dictionary(Of String, Boolean), ByRef URL As String)

        'Read the labels and units from the current worksheet
        Dim readings = loadReadings(worksheet, 3, 3, 4)
        If readings Is Nothing Then 'If the readings are not successfully loaded
            Exit Sub
        End If

        'Create a copy of the workbook to be processed to put the results in
        Dim originalFilename As String = Application.ActiveWorkbook.FullName
        Dim using1904system As Boolean = Application.ActiveWorkbook.Date1904

        worksheet.Copy() 'FIXME Crash here if selected cell has newly entered text

        worksheet = Application.ActiveWorkbook.ActiveSheet
        Application.ActiveWorkbook.Date1904 = using1904system 'Make sure the new worksheet uses the same date option

        'Get requests from worksheet
        Dim cellMap = New Dictionary(Of String, Range)
        Dim allRequests = getRequests(worksheet, readings, cellMap, 5, testType, guidelines, 1, 2, 3)

        'Gets the results from the server and outputs them to a new Excel workbook
        Dim success = processResults(allRequests, URL, worksheet, display, cellMap, 5, originalFilename, testType, guidelines)
        If Not success Then
            Exit Sub
        End If

        'Set focus to the checked worksheet
        worksheet.Activate()

    End Sub 
```

**编辑：**

我试图通过选择不同的单元格以编程方式取消选择单元格，例如：

```
worksheet.Range("A1").Activate() 
```

但这似乎没有任何影响（崩溃仍然发生）。我的插件只在用户明确指示这样做时调用复制方法，所以如果用户停止在单元格中输入文本并单击按钮运行我的插件，它们似乎是一个非常安全的假设完成在框中输入文本。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-07T19:50:47.173

此问题的原因是 Excel 等待用户 - Excel 是一个以用户为中心的应用程序，您的所有操作都必须等到用户完成数据输入。我认为这种行为很有用，因为此时单元格的文本在技术上是未定义的，因此如果用户编辑单元格，按下按钮然后完成输入数据，您将产生废话结果 - 您将使用旧数据，这是没有用的。

我看过这个线程：[如何检测一个单元格被选中用于在 excel 中编辑](https://stackoverflow.com/questions/3572633/how-to-detect-a-cell-is-selected-for-editing-in-excel) 这应该会有所帮助否则，您可以将代码包装在 try...catch 块中并解析返回的错误代码。如果是您的错误代码，则会显示一条消息，例如“哎呀，请完成编辑文本框”。但我认为事件会更好。

# android - 在选项卡中的片段之间调用方法

> ID：14202662
> 
> 赞同：0
> 
> 时间：2013-01-07T19:24:49.430
> 
> 标签：android, methods, android-fragments, android-activity, android-tabhost

我目前有一些片段都组织在选项卡中，我希望片段 A 调用片段 B 中的方法。所以我知道我需要调用活动，然后调用 B 中的函数，我见过有人提到使用

```
ExampleFragment fragment = (ExampleFragment)  
 getFragmentManager().findFragmentById(R.id.example_fragment);

fragment.<specific_function_name>(); 
```

我遇到了一个问题，因为我的片段添加了一个选项卡侦听器而不是片段管理器，所以我不知道如何使用它来调用方法。这是我的标签的添加方式。

```
public class fifaActivity extends Activity {

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    final ActionBar bar = getActionBar();
    bar.setTitle(TourneyName);
    bar.setDisplayHomeAsUpEnabled(true);
    bar.setIcon(R.drawable.fifa);
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        bar.addTab(bar
            .newTab()
            .setText("Tables")
            .setTabListener(
                    new TabListener<fifa.tables>(this, "tables",
                            fifa.tables.class)));

        bar.addTab(bar
            .newTab()
            .setText("Knockouts")
            .setTabListener(
                    new TabListener<fifa.knockouts>(this, "tables",
                            fifa.knockouts.class)));

    if (savedInstanceState != null) {
        bar.setSelectedNavigationItem(savedInstanceState.getInt("tab", 0));
    }
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putInt("tab", getActionBar().getSelectedNavigationIndex())

}

public static class TabListener<T extends Fragment> implements
        ActionBar.TabListener {
    private final Activity mActivity;
    private final String mTag;
    private final Class<T> mClass;
    private final Bundle mArgs;
    private Fragment mFragment;

    public TabListener(Activity activity, String tag, Class<T> clz) {
        this(activity, tag, clz, null);
    }

    public TabListener(Activity activity, String tag, Class<T> clz,
            Bundle args) {
        mActivity = activity;
        mTag = tag;
        mClass = clz;
        mArgs = args;

        mFragment = mActivity.getFragmentManager().findFragmentByTag(mTag);
        if (mFragment != null && !mFragment.isDetached()) {
            FragmentTransaction ft = mActivity.getFragmentManager()
                    .beginTransaction();
            ft.detach(mFragment);
            ft.commit();
        }
    }

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        if (mFragment == null) {
            mFragment = Fragment.instantiate(mActivity, mClass.getName(),
                    mArgs);
            ft.add(android.R.id.content, mFragment, mTag);
        } else {
            ft.attach(mFragment);
        }
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        if (mFragment != null) {
            ft.detach(mFragment);
        }
    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {

    }

} 
```

任何有关如何从 fifa.tables 片段调用方法到 fifa.knockouts 片段的帮助将不胜感激。

谢谢，奥利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:39:48.460

您只需创建一个将由托管 Activity 实现的接口。Fragment A 会将 Activity 的引用作为这个接口实例，当它要调用 Fragment B 中的函数时，它会调用接口中的函数。在宿主Activity的接口实现中，Activity会调用Fragment B中的函数。

编辑：

我将展示一些例子。

您需要创建一个“Fragment A”将用于调用“Fragment B”中的方法的接口，例如：

```
public interface FragmentBMethodsCaller{
    void callTheMethodInFragmentB();
} 
```

现在，您需要实现它。假设您的活动称为 HostActivity：

```
public class HostActivity extends Activity implements FragmentBMethodsCaller{
    ...
    public void callTheMethodInFragmentB(){
         --Implementation--
    }
    ...
} 
```

现在，您需要在 Fragment A 中调用它：

```
FragmentBMethodsCaller fbmc = (FragmentBMethodsCaller)getActivity();
fbmc.callTheMethodInFragmentB(); 
```

祝你好运。

# android - SMSManager for Chinese, Nullpointer

> ID：14202666
> 
> 赞同：0
> 
> 时间：2013-01-07T19:25:10.087
> 
> 标签：android, smsmanager

我正在尝试使用 SMSManager 发送带有中文字符的短信。它适用于英语和德语，但不幸的是不适用于中文。

我的日志：

```
 01-07 20:23:56.200: W/System.err(15742): java.lang.NullPointerException
01-07 20:23:56.200: W/System.err(15742):    at android.os.Parcel.readException(Parcel.java:1266)
01-07 20:23:56.204: W/System.err(15742):    at android.os.Parcel.readException(Parcel.java:1248)
01-07 20:23:56.204: W/System.err(15742):    at com.android.internal.telephony.ISms$Stub$Proxy.sendText(ISms.java:561)
01-07 20:23:56.204: W/System.err(15742):    at android.telephony.SmsManager.sendTextMessage(SmsManager.java:109)
01-07 20:23:56.204: W/System.err(15742):    at com.app.myapp.MainActivity.sendSms(MainActivity.java:158)
01-07 20:23:56.204: W/System.err(15742):    at com.app.myapp.MainActivity.buttonClick(MainActivity.java:103)
01-07 20:23:56.204: W/System.err(15742):    at java.lang.reflect.Method.invokeNative(Native Method)
01-07 20:23:56.204: W/System.err(15742):    at java.lang.reflect.Method.invoke(Method.java:521)
01-07 20:23:56.204: W/System.err(15742):    at android.view.View$1.onClick(View.java:2067)
01-07 20:23:56.204: W/System.err(15742):    at android.view.View.performClick(View.java:2408)
01-07 20:23:56.204: W/System.err(15742):    at android.view.View$PerformClick.run(View.java:8818)
01-07 20:23:56.204: W/System.err(15742):    at android.os.Handler.handleCallback(Handler.java:587)
01-07 20:23:56.204: W/System.err(15742):    at android.os.Handler.dispatchMessage(Handler.java:92)
01-07 20:23:56.204: W/System.err(15742):    at android.os.Looper.loop(Looper.java:123)
01-07 20:23:56.204: W/System.err(15742):    at android.app.ActivityThread.main(ActivityThread.java:4627)
01-07 20:23:56.208: W/System.err(15742):    at java.lang.reflect.Method.invokeNative(Native Method)
01-07 20:23:56.208: W/System.err(15742):    at java.lang.reflect.Method.invoke(Method.java:521)
01-07 20:23:56.208: W/System.err(15742):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:871)
01-07 20:23:56.208: W/System.err(15742):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:629)
01-07 20:23:56.208: W/System.err(15742):    at dalvik.system.NativeStart.main(Native Method) 
```

这就是我发送短信的方式

```
SmsManager smsManager = SmsManager.getDefault();
                    for (int i = 0; i < numbers.size(); i++) {
                        smsManager.sendTextMessage(numbers.get(i), null,
                                message, null, null);
                    } 
```

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-28T09:54:44.167

我有同样的问题，我可以解决它只是限制字符数。在英语中，允许 160 个字符。在中文中，只能使用 70 个字符（每个字符需要更多的字节来表示）。

因此，要对其进行测试，只需将 message 替换为 message.substring(0, 69) 即可。

要正确解决问题，必须发送拆分消息，检查： http: [//www.programering.com/a/MTM4EjMwATE.html](http://www.programering.com/a/MTM4EjMwATE.html)

# codeigniter - Codeigniter 下载计数器错误

> ID：14202671
> 
> 赞同：0
> 
> 时间：2013-01-07T19:25:29.443
> 
> 标签：codeigniter

我在codeigniter中工作。

```
if($this->userfile_model->view_file($downloadid)){                                              
                        $filedetail=$this->userfile_model->view_file($downloadid);
                        $path = 'userfiles/'.$filedetail['filename'];   
                        $companydetail=$this->company_model->view_company($companyId);
                        $create['company_info']=$companydetail['id'];
                        $create['ip']=$_SERVER['REMOTE_ADDR'];  
                        $create['file_info']=$filedetail['id'];                 
                        if($this->download_model->create($create)){                                                                                             
                                $this->zip->read_file($path); 
                                $this->zip->download($filedetail['filename'].'.zip');   
                                $total=$filedetail['download_count']+1;
                                $update['download_count']=$total;
                                $this->userfile_model->update($update,$filedetail['id']);
                        }
                    } 
```

上面的代码正在工作。但我有一个错误。对于每次下载，我都会在数据库中获得 4 个计数。

该文件仅下载一次，但在数据库中保存了四条记录，时间戳差异为 2-4 秒

如果我的详细信息不清楚，请告诉我。

谢谢大家。

# java - 受信任的加载程序试图加载沙盒资源

> ID：14202678
> 
> 赞同：2
> 
> 时间：2013-01-07T19:25:44.263
> 
> 标签：java

为什么我一直收到这个？

```
 Exception in thread "Thread-14" java.lang.SecurityException: trusted loader attempted to load sandboxed resource from http://xxxx/framework/lib/simplecaptcha.jar 
```

网址已删除，但可以正常工作。

我应该怎么做才能摆脱出现的“安全对话”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:46:57.823

Oracle 在他们的网站上有一篇关于这个问题的详尽文章：

[http://docs.oracle.com/javase/6/docs/technotes/guides/jweb/mixed_code.html](http://docs.oracle.com/javase/6/docs/technotes/guides/jweb/mixed_code.html)

[http://docs.oracle.com/javase/6/docs/technotes/guides/jweb/mixed_code.html#manifest](http://docs.oracle.com/javase/6/docs/technotes/guides/jweb/mixed_code.html#manifest)

（而且我想公平地说，这是谷歌*第二次*点击“安全异常可信加载程序”。）

# nsis - 安装程序编译期间打开文件时出错

> ID：14202680
> 
> 赞同：2
> 
> 时间：2013-01-07T19:25:55.787
> 
> 标签：nsis

在运行脚本来创建 NSIS 安装程序时，我遇到了一个我无法弄清楚的错误。该脚本复制创建安装程序所需的文件，然后调用`makensis`以构建 setup.exe。

在使用 编译期间`makensis`，尝试包含在`makensis`调用之前复制的目录结构时出现错误。

错误是：`File: failed opening file "..\..\..\My\Long\Path\Name\To\File.ext"`

`File /r`它在距离用于包含目录结构的命令深 5 个目录的特定文件上可靠地失败。总路径长度为 180 个字符，因此它不会太长。

即使在重新启动或删除并重新创建整个目录结构后，此错误仍然存​​在。更糟糕的是，它在另一台机器上运行良好。

我已经使用 Process Monitor 来观察目录中文件的使用情况，并且在复制完成后没有任何东西正在打开文件。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T08:13:16.370

完整路径（当前目录 + 相对路径）必须小于 260 个字符。

您确定您的流程监视器过滤器是正确的，应该采取某种类型的操作然后失败？如果[CreateFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)失败，则会打印“文件：打开文件失败”消息...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-23T05:02:00.820

我遇到了同样的错误，完整路径小于 260 个字符。

# 问题

> 文件：第 77 行的脚本“C:\TFS\XYZProject\Releases\NullsoftInstaller\XYZWin7Installer.nsi”中的错误打开文件“\FOLDERSHARE\XYZSRelease\XYZV1.2.2\AutoCompleteMenu.dll”错误——正在中止创建过程

# 原因

由于某种原因，当文件位于文件夹共享上时，它无法正常工作（我很肯定这是对公司网络环境的更改），因为它以前可以正常工作。

# 解决方案

将所有文件放在**C:\Temp**或其他本地目录中。

# matlab - 当 A 为 [3x3xN] 时，是否有解决系统 Ax=B 的捷径，即多于一个矩阵？

> ID：14202682
> 
> 赞同：4
> 
> 时间：2013-01-07T19:26:12.770
> 
> 标签：matlab

我想尝试在没有循环的情况下实现它......

我有 A，作为 A[3x3xN] 或 [3,3,N]，对于每个 N，它都是一个不同的矩阵。

和 B 作为 [3x1xN] 当然......

如何在不进行循环的情况下解决它并且每次都使 A^-1 * B ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:34:11.750

```
Z = cellfun(@(a,b) a\b, ... %# Solve for each pair
            num2cell(A,[1 2]), ... %# Make a cell array containing each slice
            num2cell(B,[1 2]), ... %# Make a cell array containing each slice
            'UniformOutput',false);
Z = cat(3,Z{:}); %# Merge the results to a 3x1xN array 
```

[`num2cell`](http://www.mathworks.com/help/matlab/ref/num2cell.html#btj8y8e-1)有关使用的功能的更多详细信息，请参阅[`cellfun`](http://www.mathworks.com/help/matlab/ref/cellfun.html)文档。

让我们将其速度与 for 循环进行比较：

```
clc, clear

N = 100000;
D = 10;
A = rand(D,D,N);
B = rand(D,1,N);

tic
Z = cellfun(@(a,b) a\b, ...
            num2cell(A,[1 2]),num2cell(B,[1 2]),'UniformOutput',false);
Z = cat(3,Z{:});
toc

tic
Z2 = zeros(D,1,N);
for i = 1:N
    Z2(:,:,i) = A(:,:,i) \ B(:,:,i);
end
toc

all(isequal(Z,Z2)) 
```

我的结果如下：

```
Elapsed time is 2.130507 seconds.
Elapsed time is 1.306873 seconds. 
```

我尝试了不同的`D`值并得到了相似的比率。乔纳斯的赌注是正确的！

# php - 如何在 PHP 中找到重叠的日期周期/日期范围？

> ID：14202687
> 
> 赞同：8
> 
> 时间：2013-01-07T19:26:37.307
> 
> 标签：php, date, datetime, compare, overlap

如果我有两个日期范围（例如 5 月 1 日 - 5 月 31 日和 5 月 23 日 - 6 月 5 日），那么在 PHP 中找出这两个时期重叠多少天的最佳方法是什么（所以它会返回 9）？有没有办法使用 DatePeriod 对象来做到这一点？

**编辑（希望）澄清我的问题：**

基本上我想要一个函数，给定任何两个日期范围，将返回两个日期范围之间共同的天数。如果有重叠，它将返回重叠天数，否则它将返回 0。我认为这可以通过为每个范围创建一个日期数组来完成，循环它们以找到相同的日期，并使用变量来计数匹配的数量 - 但我正在寻找更优雅的东西。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-07T21:01:19.680

感谢@phpisuber01 和[确定两个日期范围是否重叠](https://stackoverflow.com/questions/325933/determine-whether-two-date-ranges-overlap/)在这里提供了基本逻辑。这四个变量需要是 DateTime 对象：

```
function datesOverlap($start_one,$end_one,$start_two,$end_two) {

   if($start_one <= $end_two && $end_one >= $start_two) { //If the dates overlap
        return min($end_one,$end_two)->diff(max($start_two,$start_one))->days + 1; //return how many days overlap
   }

   return 0; //Return 0 if there is no overlap
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T19:34:50.553

没有任何*真实*信息可以以此为基础。这是一个基本示例，说明如何使用该[`DateTime`](http://php.net/manual/en/class.datetime.php)对象计算天数差异。

```
$datetime1 = new DateTime('2013-05-23');
$datetime2 = new DateTime('2013-05-31');
$interval = $datetime1->diff($datetime2);
echo $interval->format('%R%a days'); //returns 8 days 
```

我假设您知道如何将您的字符串转换为可用的时间戳/格式。

# javascript - 使用主干模型和集合设计应用程序

> ID：14202689
> 
> 赞同：2
> 
> 时间：2013-01-07T19:26:45.957
> 
> 标签：javascript, model-view-controller, design-patterns, backbone.js

我正在尝试使用主干编写我的应用程序，但我对它还很陌生。我的应用程序基本上是向用户展示他所有的照片和相册。我对它的设计有一些疑问。

从照片开始是模特的明显候选人。所以

```
var Photo = Backbone.Model.extend({}) 
```

然后我创建了一组照片。

```
var PhotoCollection = Backbone.Collection.extend({}) 
```

这是为了向用户显示“所有照片”、“特定日期上传的照片”等（注意它与相册不同）

现在我的问题是关于专辑，专辑是模型还是收藏？

在相册视图中，我将在网格布局中向用户展示他的所有相册，其中包含照片数量和相册名称以及其他一些属性。因此，将专辑作为 Backbone 模型并将专辑集合作为 Backbone 集合是有意义的。

但是当用户点击相册时，我必须请求该相册中的所有照片。所以，专辑就变成了收藏。但是如果我将专辑写成集合，我如何表示一组专辑？它会是一个集合吗？

我希望这听起来不会令人困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T20:32:45.357

根据经验， a`Backbone.Collection`应该映射到一个 REST 集合资源，并且 a 映射到该集合`Model`中的一个项目。这不是绝对必要的，但 Backbone 的大部分内容都是围绕这种思维方式构建的。这是一个例子：

```
/photos    -> PhotoCollection
/photos/id -> Photo
/albums    -> AlbumCollection
/albums/id -> Album 
```

如果你有这样一个清晰的 RESTful 结构，那么我建议你构建你的模型结构来镜像它。

When you start building *relations* between different models, Backbone is not so opinionated, and you're free to set things up the way you want. Often it's simplest to think of relations between different models in terms of `is` and `has` relations. In you case it's a little bit tricky, because one could think that `Album is a collection of photos`, but also that `Album has photos`.

I would lean towards a `has` relationship here, mainly because an `Album` probably is more than just a collection of photos - it will have a title and other such properties of its own. In RESTful terms a collection cannot have any properties of its own. So we say that `Album has a PhotoCollection`.

Let's say these are your `Photo` and `PhotoCollection`:

```
var Photo = Backbone.Model.extend({});

var PhotoCollection = Backbone.Collection.extend({
  model: Photo,
  filterByDate: function(date) {
    //just some method
    return this.filter(function(photo) { return photo.get('date') === date; });
  }
}); 
```

And similarly an `Album` and `AlbumCollection`.

```
var Album = Backbone.Model.extend({
  initialize: function(attributes) {
    //make model.photos a PhotoCollection and initialize it with passed photos
    this.set('photos', new PhotoCollection(attributes.photos || []);
  }
});

var AlbumCollection = Backbone.Collection.extend({
  model: Album
}); 
```

Then you can access album's photos just like you would any other collection of photos:

```
album.get('photos').filterByDate('2012-12-24'); 
```

If you need the albums `PhotoCollection` to have different behavior from a normal `PhotoCollection`, you can simply extend from base collection and use it instead.

```
var AlbumPhotoCollection = PhotoCollection.extend({ ... }); 
```

It's hard to speculate further without knowing more about how your application looks, but in any case this would feel like a natural way of doing it.

# jdo - BLOB/TEXT 列需要指定长度

> ID：14202695
> 
> 赞同：0
> 
> 时间：2013-01-07T19:27:49.147
> 
> 标签：jdo, datanucleus

同时具有以下对象图：

```
public class SecureDetails{
    @Persistent(defaultFetchGroup = "true", table = "sc_details_emails")
    @Join(column = "sc_details_pk")
    @Element(column = "email")
    private List<String> emails;
} 
```

当 datanucleus 尝试自动创建模式时，我不断收到此异常（已激活**DEBUG**日志记录级别，并且为了简洁起见，堆栈跟踪被截断）：

```
21:09:24 DEBUG (Log4JLogger.java:58)-[main] Creating foreign key constraint : "sc_details_emails_fk1" in catalog "" schema ""
21:09:24 DEBUG (Log4JLogger.java:58)-[main] ALTER TABLE sc_details_emails ADD CONSTRAINT sc_details_emails_fk1 FOREIGN KEY (sc_details_pk) REFERENCES sc_details (sc_details_id) 
21:09:24 ERROR (Log4JLogger.java:115)-[main] An exception was thrown while adding/validating class(es) : BLOB/TEXT column 'sc_details_pk' used in key specification without a key length
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: BLOB/TEXT column 'sc_details_pk' used in key specification without a key length
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.Util.getInstance(Util.java:386)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1053)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4096)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4028)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2490)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2651)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2728)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2678)
    at com.mysql.jdbc.StatementImpl.execute(StatementImpl.java:894)
    at com.mysql.jdbc.StatementImpl.execute(StatementImpl.java:732)
    .
    .
    . 
```

我尝试使用注释的值一次指定注释参数，另一次使用注释`serialized`的值`false`指定注释参数，但这仍然没有解决问题。我尝试这样做是因为我认为 datanucleus 正在构建二进制列，这就是我必须指定长度的原因。而且我什至没有指定长度，因为我不知道应该在哪里指定它！`@Element``@Persistence``false`

**编辑：** Datanucleus 从头开始​​创建整个数据库。我只使用 SQL 查询只有 3 个配置表，并且没有与它们相关的映射。

我正在使用 datanucleus v3.1.3 和 MySQL v5.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:05:34.843

令人惊讶的是，一个干净的构建解决了这个问题！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-08T08:15:25.587

因此，您没有让 DataNucleus 创建所有模式，并且某处有一个 BLOB 列与您提供的（小）元数据不一致。解决方案：让 DataNucleus 生成模式，或者实际呈现模式，以便人们可以告诉你它有什么问题。

# javascript - document.createElement 不工作

> ID：14202699
> 
> 赞同：1
> 
> 时间：2013-01-07T19:28:24.910
> 
> 标签：javascript, jquery

我正在使用 jQuery 库创建一个插件。

在这里，我将**String.prototype**存储在一个变量中，然后我使用这个变量来扩展我的 Sting 对象。这工作正常。

```
// String Prototyping store in a variable
// Save bytes in the minified version of js
var StrProto = String.prototype;
String.prototype.toProperCase = function () {
  return this.replace(/\w\S*/g, function (txt) {
    return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
  });
};
// working fine
alert("yogesh kumar".toProperCase()); 
```

在下一种情况下，我正在创建存储在 **abc变量中的 m****函数 xyz** ，这也可以正常工作。

 **```
function xyz(x){
  alert(x)
}
var abc = xyz;
// working fine
abc("yogesh kumar"); 
```

在最后一种情况下，我将**document.createElement**存储在变量 **标签**中并使用标签创建按钮。但这不起作用。

```
var tag=document.createElement;
$(document.createElement("button")).html("document.Element").appendTo("#myDiv");

// not working
$(tag("button")).html("tag").appendTo("#myDiv"); 
```

请检查 jsFiddle 上的链接：

> [点击这里](http://jsfiddle.net/yoku2010/hA2pJ/)

**错误：**

*在 Chrome 中*

*   未捕获的类型错误：非法调用

*在火狐中*

*   错误：NS_ERROR_XPC_BAD_CONVERT_JS：无法转换 JavaScript 参数

**为什么会出现这个错误？**

**解决办法是什么？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T19:40:11.300

您正在获得对作为文档成员的函数的引用。当您直接调用该引用时，它的上下文现在是窗口而不是文档。这是一个例子：

[http://jsfiddle.net/DeCNx/](http://jsfiddle.net/DeCNx/)

```
var foo = {
  createElement: function(tagname) {
    if (this._secretvarthatisneeded) {
      console.log(tagname + " Element Created!");
    }
  },
  _secretvarthatisneeded: true
}

foo.createElement("FOOBAR"); // works

var bar = foo.createElement;
bar("BARFOO"); // doesn't work
bar.call(foo,"BARBAR") // works 
```

由于上下文丢失，`bar()`调用没有导致`console.log();`

显然这只是为了简化演示。

更新：对于您正在使用的用途，我建议您这样做：

```
$.createElement = function(tagName,attributes){
    return $(
        document.createElement(tagName),
        attributes ? attributes : {}
    )
} 
```

现在您可以简单地执行`$.createElement("button").html("tag").appendTo("#myDiv");`它，它既快速又易于阅读。但是请注意，IE 的输入存在问题，如果您正在创建输入元素，我建议使用`$("<input type='text' />")`而不是 this。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-07T19:37:01.507

使用[`bind()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)将本机 JS 方法“分配”给变量的方法：

```
var ce = document.createElement.bind(document);
var elem = ce('div');
alert(elem.nodeName); 
```

适用于现代浏览器，包括 IE9+。对于较旧的浏览器，请使用包装函数。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-07T19:29:58.633

jQuery 可以为您[创建新元素](http://api.jquery.com/jQuery/#jQuery2)，如下所示：

```
$("<button />").html("document.Element").appendTo("#myDiv"); 
```

要了解您的方法不起作用的原因，请阅读下面[的@Kevin 评论](https://stackoverflow.com/questions/14202699/document-createelement-not-working/#comment19692498_14202716)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-07T19:39:27.510

发生这种情况是因为在其内部`document.createElement`使用。`this`当你像`document.createElement()`then一样调用它时，它`this`被设置为`document`. 但是，当您将其保存为变量时，则`this`不再是`document`，而是`window`。

您需要使用上下文调用它。

```
var tag = document.createElement;  // you are saving the function, not its context
var btn = tag.call(document, 'button'); // you need to set the context 
```

如果您的浏览器支持它，您还可以使用`.bind`：

```
var tag = document.createElement.bind(document);
var btn = tag('button'); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-07T19:39:38.457

此错误的原因是该方法丢失了其上下文。该方法`createElement()`必须在`document`对象的上下文中调用。

在控制台中试试这个：

```
var tag = document.createElement;
tag.call(document, "div");  // no error
tag("div");  // error 
```

为什么`createElement()`必须在上下文中调用的具体细节是特定于`document`实现的，但很容易猜到。

因此，要维护上下文，请为以下内容创建一个函数包装器`document.createElement()`：

```
function tag(tagName) {
    return document.createElement(tagName);
} 
```

当然，jQuery 也会为你创建元素：

```
$("<div>");  // new div element 
```**

# git - 基于主 Git 项目创建子项目。

> ID：14202707
> 
> 赞同：3
> 
> 时间：2013-01-07T19:28:55.220
> 
> 标签：git, version-control, web-deployment

我对 Git 比较陌生，因为我只将它用于基本操作（拉取、提交、推送）。我有一个主要的 Web 项目，我想在我的基础库/项目中进行转换，以供未来的 Web 开发使用。
新页面/项目将以此为基础并实现它们自己的内容，它们完全相互独立，并且不一定受版本控制（至少最终页面托管为仅 ftp 访问），但如果主 git 项目得到更新我希望子项目也能得到更新，我认为 Git 的魔力可以在这里发挥作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T20:27:24.230

我会将核心、库或样板代码保留为单独的项目。您可以将该代码作为[子模块](http://git-scm.com/book/en/Git-Tools-Submodules)包含到使用项目中。

您还可以让子项目分叉库，然后确保每个子项目将库添加为上游远程，并以这种方式提取样板。[在此处](https://help.github.com/articles/fork-a-repo)阅读“配置遥控器” ，或询问 Goog。

使用 .gitignore 将事情排除在版本控制之外，尽管我认为这没有必要。

# mysql - 需要 SQL 查询协助

> ID：14202708
> 
> 赞同：0
> 
> 时间：2013-01-07T19:29:07.593
> 
> 标签：mysql, sql

这个查询的哪一部分是错误的？

```
Select COUNT ORDER_ID 
FROM customer_orders_delivery 
WHERE delivery_status_code LIKE 'Dispatched%' 'Processing%' 
```

你能帮忙修一下吗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:30:08.547

看起来好像该语句旨在执行此操作：

```
SELECT COUNT(order_id) 
  FROM customer_orders_delivery
 WHERE delivery_status_code LIKE 'Dispatched%'
    OR delivery_status_code LIKE 'Processing%' 
```

`COUNT()`是一个聚合函数，我们希望在表达式周围有开括号和闭括号，例如 `COUNT(1)`, `COUNT(*)`,`COUNT(order_id)`

语法的其余部分看起来没问题，直到文字`'Processing%'`. 文字在那里无效。看起来好像查询旨在返回该列以 开头`'Dispatched'`或该列以 开头的行`'Processing'`。

# objective-c - Restkit Post 总是进入失败部分

> ID：14202710
> 
> 赞同：2
> 
> 时间：2013-01-07T19:29:18.213
> 
> 标签：objective-c, ios, web-services, post, restkit

我有一个 restkit 函数，我调用一个 web 服务来检查我的登录凭据。在这次通话中，我将我的电子邮件和密码作为参数。在这里你可以看到代码。

```
RKObjectManager *manager = [RKObjectManager managerWithBaseURL:[NSURL URLWithString:@"http://****.com/nl/webservice/"]];

NSDictionary *dictionary = [[NSDictionary alloc]initWithObjectsAndKeys:_txtLogin.text,@"email",_txtPass.text,@"pwd", nil];
      NSLog(@"till here");
NSMutableURLRequest *request = [manager requestWithObject:nil method:RKRequestMethodPOST path:@"company-user/login/apikey/key*****?" parameters:dictionary];
      NSLog(@"till here2");
RKObjectRequestOperation *operation = [manager objectRequestOperationWithRequest:request success:^(RKObjectRequestOperation *operation, RKMappingResult *result) {
    NSLog(@"till here3");
    NSLog(@"Loading mapping result: %@", result);
}failure:^(RKObjectRequestOperation *operation, NSError *error){
    //Failure
    NSLog(@"error is:%@ ",error);
    NSLog(@"FAILUREE!");
}];

      NSLog(@"till here4");
[operation start];
      NSLog(@"till here5"); 
```

但由于某种原因，我去了失败的部分。它首先给了我一个状态 200，然后是一个错误。你可以在这里看到我的日志。

```
2013-01-07 20:33:45.858 Offitel2[26195:c07] till here
2013-01-07 20:33:45.859 Offitel2[26195:c07] till here2
2013-01-07 20:33:45.860 Offitel2[26195:c07] till here4
2013-01-07 20:33:47.252 Offitel2[26195:c07] till here5
2013-01-07 20:33:47.254 Offitel2[26195:c07] I restkit.network:RKHTTPRequestOperation.m:152 POST 'http://virtuele-receptie.preview.sanmax.be/nl/webservice/company-user/login/apikey/key12345678?'
2013-01-07 20:33:47.255 Offitel2[26195:c07] I restkit.network:RKHTTPRequestOperation.m:179 POST 'http://virtuele-receptie.preview.sanmax.be/nl/webservice/company-user/login/apikey/key12345678?' (200 OK) [0.0005 s]
2013-01-07 20:33:47.255 Offitel2[26195:c07] error is:Error Domain=org.restkit.RestKit.ErrorDomain Code=1001 "No response descriptors match the response loaded." UserInfo=0xa869130 {NSErrorFailingURLStringKey=http://virtuele-receptie.preview.sanmax.be/nl/webservice/company-user/login/apikey/key12345678?, NSLocalizedFailureReason=A 200 response was loaded from the URL 'http://virtuele-receptie.preview.sanmax.be/nl/webservice/company-user/login/apikey/key12345678?', which failed to match all (0) response descriptors:, NSLocalizedDescription=No response descriptors match the response loaded., keyPath=null, NSErrorFailingURLKey=http://virtuele-receptie.preview.sanmax.be/nl/webservice/company-user/login/apikey/key12345678?, NSUnderlyingError=0xa8695b0 "No mappable object representations were found at the key paths searched."} 
2013-01-07 20:33:47.256 Offitel2[26195:c07] FAILUREE! 
```

有人可以帮我吗？

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:28:19.337

如果您希望对调用 Web 服务的响应执行对象映射，则必须提供响应描述符。请查看[https://github.com/RestKit/RestKit/wiki/Object-Mapping](https://github.com/RestKit/RestKit/wiki/Object-Mapping)以获取说明和示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T20:45:39.843

我也在问同样的问题，“**难道我只能读取 json 文件吗？没有对象映射？** ”我发现的解决方案是 RestKit 0.20 使用 AFNetworking。因此，如果您需要在没有映射的情况下发出请求，请执行下一步。

```
[AFNetworkActivityIndicatorManager sharedManager].enabled = YES;

AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:@"http://****.com/nl/webservice/"]];
NSDictionary *params     = [NSDictionary dictionaryWithObjectsAndKeys:
                            _txtLogin.text, @"email",
                            _txtPass.text,  @"pwd",
                            nil];
[httpClient postPath:@"company-user/login/apikey/key*****?" parameters:params success:^(AFHTTPRequestOperation *operation, id responseObject) {
    NSData *jsonData = [operation.responseString dataUsingEncoding:NSUTF8StringEncoding];
    NSError *error = nil;

    NSDictionary *jsonDict =    [NSJSONSerialization JSONObjectWithData: jsonData
                                                                options: NSJSONReadingMutableContainers
                                                                  error: &error];
    NSLog(@"%@", jsonDict);
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"[HTTPClient Error]: %@", error.localizedDescription);
}]; 
```

# node.js - 检查客户端的身份验证，向服务器发送请求，nodejs

> ID：14202713
> 
> 赞同：0
> 
> 时间：2013-01-07T19:29:46.887
> 
> 标签：node.js, authentication

我是服务器端，使用 nodejs 我想检查客户端请求的身份验证。我的意思是，我想检查是否是有效或合格的人向我（服务器）发送请求。什么是最好的方法？

服务器~客户端认证

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T06:16:22.857

我还没有实现这个 - 一直在使用 oAuth 进行 API 验证 - 但将使用类似于[http://www.quietless.com/kitchen/building-a-login-system-in-node-js-and的东西-mongodb/](http://www.quietless.com/kitchen/building-a-login-system-in-node-js-and-mongodb/)用于用户登录/验证。

# scala - Type Bounds 中的下划线 (_) 是否有特殊含义？

> ID：14202714
> 
> 赞同：9
> 
> 时间：2013-01-07T19:29:51.650
> 
> 标签：scala, types, existential-type, type-bounds

我试图理解 Scala 的存在类型。

有什么区别：

```
def foo[X <: Bar] = 3 
```

和

```
def foo[_ <: Bar] = 3 
```

还是它们不仅仅是未命名的类型参数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T20:18:32.330

这里`_`确实只是一个未命名的类型参数，不多也不少。`def foo[_ <: Bar] = 3`未使用和未使用的`def foo[X <: Bar] = 3`地方没有区别。`X`

**更新**：

回应：“我想不出未使用类型的用例，我将不胜感激”：

请注意，这与询问如果不使用参数的目的是什么几乎相同，例如：

```
def foo( x: Int ) = 123 
```

通常这样做的一个很好的理由是该方法符合某些其他 API 中预期的形状。例如，您希望将方法（或者更确切地说它的 eta-expansio）传递给另一个需要参数的方法。举例：

```
scala> List(1,2,3).map(foo)
res0: List[Int] = List(123, 123, 123) 
```

另一种可能性是您的方法是覆盖：

```
trait A {
  def foo( x: Int ): Int
}

trait B extends A {
  def foo( x: Int ) = 123
} 
```

同样的道理也适用于类型参数。以最重要的情况为例：

```
trait A {
  def foo[X <: Bar]: Int
}

trait B extends A {
  def foo[_<:Bar] = 3
} 
```

`B.foo`在其实现中不需要类型参数，但它必须存在（尽管未命名）以符合它覆盖的方法。

# c# - 可以使用 Ajax.ActionLink 指定表单属性

> ID：14202715
> 
> 赞同：0
> 
> 时间：2013-01-07T19:29:56.963
> 
> 标签：c#, asp.net, asp.net-mvc-4, asp.net-ajax

我正在寻找一种将 POST 属性数据指定到 Ajax.ActionLink 的方法。我最好的猜测是这样的：

```
Ajax.ActionLink( "My Link", 
                 "SomeAction", 
                 "SomeController", 
                 new AjaxOptions { HttpMethod = "Post" }, 
                 { myParameter = "myValue" } ) 
```

不幸的是，这会导致添加`&myParameter=myValue`到 URL。

如果它有任何相关性，我最终会尝试通过参数将防伪令牌注入到请求中`__RequestVerificationToken`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:37:30.270

当您使用操作方法时，您将受制于它如何实现它们。另一种方法是使用 JQuery，它可以让您完全控制流程，通过以下方式发布数据：

```
$.ajax({
  type: "post",
  url: "..",
  data { myParameter: "myvalue" },
  .
  .
}); 
```

# sql - SQL WHERE 子句没有过滤掉空列

> ID：14202717
> 
> 赞同：0
> 
> 时间：2013-01-07T19:30:00.133
> 
> 标签：sql, sql-server, tsql

我不明白为什么我在运行 SQL 查询时会得到某些结果。这是查询：

```
SELECT A.flag, B.type, B.aID
FROM A
LEFT JOIN B ON B.aID = A.aID
WHERE A.startDate = '2013-01-07'
    AND (A.flag = 1 OR B.type IS NOT NULL) 
```

aID 是表 A 上的主键。

这是我得到的结果：

```
flag type aID
---- ---- ----
0    NULL NULL 
```

我原以为不会有结果。我很困惑，因为 A.flag 不是 1 而 B.type 是 null，这似乎与我的 WHERE 子句相反。请注意，表 B 上的该行没有匹配项，因为 B.aID 在结果中为空。当我只使用其中一个`A.flag = 1`而`B.type IS NOT NULL`不是两者运行查询时，没有返回结果而不是返回一个结果。

奇怪的是，当我将 SELECT 语句中的 B.type 替换为 ISNULL(B.type, 'X') 时，没有返回任何结果。当我添加`AND B.type IS NOT NULL`到 LEFT JOIN 时也会发生同样的情况。

为什么我会得到这个结果？

**编辑：示例数据**

这是一个使用两个不同的开始日期从表 A 中获取行的查询：

```
SELECT * FROM A
WHERE A.startDate IN ('2013-01-07', '2012-11-23') 
```

我得到以下结果（为清楚起见，省略了 6 列）：

```
aID     cID  sID  psID startDate               flag 
------- ---- ---- ---- ----------------------- -----
23844   75   72   86   2013-01-07 00:00:00     0    
23940   75   72   86   2012-11-23 00:00:00     1    
21061   76   73   87   2012-11-23 00:00:00     0    
21293   76   74   88   2012-11-23 00:00:00     0    
21477   77   75   89   2012-11-23 00:00:00     0    
21711   78   76   90   2012-11-23 00:00:00     0    
21944   79   77   91   2012-11-23 00:00:00     0    
22176   80   78   92   2012-11-23 00:00:00     0    
22410   81   79   93   2012-11-23 00:00:00     0    
22643   82   80   94   2012-11-23 00:00:00     0    
23344   83   81   95   2012-11-23 00:00:00     0    
22876   84   82   96   2012-11-23 00:00:00     0    
23639   85   83   97   2012-11-23 00:00:00     0    
23109   89   84   98   2012-11-23 00:00:00     0    

(14 row(s) affected) 
```

使用我们为 2013-01-07 找到的 aID，我们可以从下一个查询中看到表 B 中没有对应于该开始日期的条目。

```
SELECT * FROM B
WHERE B.aID = 23844 
```

这不返回任何结果。

使用我们在 2012 年 11 月 23 日找到的 aID，我们可以看到除了其中一个之外，所有这些都在表 B 中具有相应的条目。

```
SELECT * FROM B
WHERE B.aID IN (23940,
    21061,
    21293,
    21477,
    21711,
    21944,
    22176,
    22410,
    22643,
    23344,
    22876,
    23639,
    23109) 
```

结果：

```
bID   aID    type  duration iMinutes
----- ------ ----- -------- ---------
5836  21061  M     0        0
5893  21293  M     0        0
5916  21477  M     0        0
5975  21711  M     0        0
6033  21944  M     0        0
6092  22176  M     0        0
6150  22410  M     0        0
6208  22643  M     0        0
6266  22876  M     0        0
6530  23109  M     0        0
6382  23344  M     0        0
6478  23639  M     0        0

(12 row(s) affected) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:05:04.447

事实证明，这是因为该数据库（2008 年）上没有安装服务包。其他安装了 SP1 的数据库没有这个问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-08T09:01:08.847

It's because you are doing a LEFT (OUTER) JOIN. Perhaps an INNER JOIN is what you had in mind?

# objective-c - 有弹性的 UIBezierPath 线？

> ID：14202718
> 
> 赞同：3
> 
> 时间：2013-01-07T19:30:05.543
> 
> 标签：objective-c, ios, uibezierpath, touchesbegan, touchesmoved

我想用我的手指画一条直线，它会根据我与原点的距离自动调整大小。

因此，如果我在中间触摸屏幕并将手指滑出，当我的手指在屏幕上移动时，一条线似乎会“伸展”并围绕原点旋转。当我抬起我的手指。目标点应最终确定并创建一条线。我可以在屏幕上拖动手指并在屏幕上“绘制”，但这不是我想要做的。

我认为 UIBeizerPath moveToPoint 会有所帮助，但它只会把事情搞砸。

我究竟做错了什么？

```
- (id)initWithFrame:(CGRect)frame
{
     //default line properties
    myPath=[[UIBezierPath alloc]init];
    myPath.lineCapStyle=kCGLineCapRound;
    myPath.miterLimit=0;
    myPath.lineWidth=lineWidth;
    brushPattern=[UIColor blackColor];
 }

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    CGPoint curPoint = [[touches anyObject] locationInView:self];

    lastPoint = curPoint;

    [myPath moveToPoint:lastPoint];
    [pathArray addObject:myPath];
    [self setNeedsDisplay];
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{

    CGPoint curPoint = [[touches anyObject] locationInView:self];

    myPath.lineWidth=lineWidth;
    brushPattern=[UIColor redColor]; //red to show it hasn't been added yet.
    [myPath moveToPoint:tempPoint];
    [self setNeedsDisplay];
}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

    CGPoint curPoint = [[touches anyObject] locationInView:self];

    myPath.lineWidth=lineWidth;

    brushPattern=[UIColor blackColor]; //finalize the line with black color
    [myPath addLineToPoint:curPoint];
    [self setNeedsDisplay];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T20:02:51.750

这是一个概念。从您开始拖动手指的位置到松开的位置绘制一条线，并在您拖动手指时对其进行动画处理。它通过制作, 在您移动手指时`CAShapeLayer`重置来做到这一点。`path`

这应该证明基本思想：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    UIPanGestureRecognizer *gesture = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePanGesture:)];
    [self.view addGestureRecognizer:gesture];
}

- (CAShapeLayer *)createShapeLayer:(UIView *)view {
    CAShapeLayer *shapeLayer = [[CAShapeLayer alloc] init];

    shapeLayer.fillColor = [UIColor clearColor].CGColor;
    shapeLayer.strokeColor = [UIColor redColor].CGColor;
    shapeLayer.lineWidth = 3.0;

    [view.layer addSublayer:shapeLayer];

    return shapeLayer;
}

- (void)handlePanGesture:(UIPanGestureRecognizer *)gesture {
    static CAShapeLayer *shapeLayer;
    static CGPoint origin;

    if (gesture.state == UIGestureRecognizerStateBegan) {
        shapeLayer = [self createShapeLayer:gesture.view];
        origin = [gesture locationInView:gesture.view];
    } else if (gesture.state == UIGestureRecognizerStateChanged) {
        UIBezierPath *path = [UIBezierPath bezierPath];
        [path moveToPoint:origin];
        CGPoint location = [gesture locationInView:gesture.view];
        [path addLineToPoint:location];
        shapeLayer.path = path.CGPath;
    } else if (gesture.state == UIGestureRecognizerStateEnded ||
               gesture.state == UIGestureRecognizerStateFailed ||
               gesture.state == UIGestureRecognizerStateCancelled) {
        shapeLayer = nil;
    }
} 
```

或者，在 Swift 3 中：

```
override func viewDidLoad() {
    super.viewDidLoad()

    let pan = UIPanGestureRecognizer(target: self, action: #selector(handlePan(_:)))
    view.addGestureRecognizer(pan)
}

private func createShapeLayer(for view: UIView) -> CAShapeLayer {
    let shapeLayer = CAShapeLayer()
    shapeLayer.fillColor = UIColor.clear.cgColor
    shapeLayer.strokeColor = UIColor.red.cgColor
    shapeLayer.lineWidth = 3.0

    view.layer.addSublayer(shapeLayer)

    return shapeLayer
}

private var shapeLayer: CAShapeLayer!
private var origin: CGPoint!

func handlePan(_ gesture: UIPanGestureRecognizer) {
    if gesture.state == .began {
        shapeLayer = createShapeLayer(for: gesture.view!)
        origin = gesture.location(in: gesture.view)
    } else if gesture.state == .changed {
        let path = UIBezierPath()
        path.move(to: origin)
        path.addLine(to: gesture.location(in: gesture.view))
        shapeLayer.path = path.cgPath
    } else if gesture.state == .ended || gesture.state == .failed || gesture.state == .cancelled {
        shapeLayer = nil
    }
} 
```

* * *

如果您不使用`CAShapeLayer`，但您想跟踪以前的路径，则必须为这些旧路径维护一个数组，并构建一个包含所有旧路径的路径，可能类似于：

```
@interface CustomView ()

@property (nonatomic) CGPoint originPoint;
@property (nonatomic) CGPoint currentPoint;
@property (nonatomic) NSMutableArray *previousPaths;

@end

@implementation CustomView

- (id)initWithFrame:(CGRect)frame {
    self = [super initWithFrame:frame];
    if (self) {
        [self configure];
    }
    return self;
}

- (id)init {
    return [self initWithFrame:CGRectZero];
}

- (id)initWithCoder:(NSCoder *)aDecoder {
    self = [super initWithCoder:aDecoder];
    if (self) {
        [self configure];
    }
    return self;
}

- (void)configure {
    _previousPaths = [[NSMutableArray alloc] init];
}

- (void)drawRect:(CGRect)rect {
    [[UIColor redColor] setStroke];

    UIBezierPath *drawPath = [UIBezierPath bezierPath];

    drawPath.lineCapStyle = kCGLineCapRound;
    drawPath.miterLimit = 0;
    drawPath.lineWidth = 3.0;

    for (UIBezierPath *path in self.previousPaths)
        [drawPath appendPath:path];

    UIBezierPath *path = [self pathForCurrentLine];
    if (path)
        [drawPath appendPath:path];

    [drawPath stroke];
}

- (UIBezierPath *)pathForCurrentLine {
    if (CGPointEqualToPoint(self.originPoint, CGPointZero) && CGPointEqualToPoint(self.currentPoint, CGPointZero))
        return nil;

    UIBezierPath *path = [UIBezierPath bezierPath];
    [path moveToPoint:self.originPoint];
    [path addLineToPoint:self.currentPoint];

    return path;
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    self.originPoint = [[touches anyObject] locationInView:self];
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    if ([event respondsToSelector:@selector(predictedTouchesForTouch:)]) {
        touch = [[event predictedTouchesForTouch:touch] lastObject] ?: touch;
    }
    self.currentPoint = [touch locationInView:self];

    [self setNeedsDisplay];
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    self.currentPoint = [[touches anyObject] locationInView:self];
    [self.previousPaths addObject:[self pathForCurrentLine]];
    self.originPoint = self.currentPoint = CGPointZero;

    [self setNeedsDisplay];
}

@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T19:35:17.860

UIBezierPath 正在根据您的指示构建路径。想象一支笔。当您说“moveToPoint：”时，它会将笔移动到该点。当您说“lineToPoint：”时，它会放下笔并将其从当前位置移动到新点。等等。

为了获得您想要的效果，您需要在触摸移动时创建一条新路径，从原始点到当前触摸位置绘制一条线。

# actionscript-3 - AS3：Hittest 无法及时捕捉拖动的物体

> ID：14202722
> 
> 赞同：1
> 
> 时间：2013-01-07T19:30:16.970
> 
> 标签：actionscript-3

我使用 startDrag() 来拖动对象 A，当它碰到对象 B 时，函数停止拖动。问题是，如果我将对象 A 拖入对象 B 的速度过快，它会在对象 B 内停止拖动。我的手是否比每帧检查 48 次碰撞的函数更快？

```
var A:MovieClip;
addEventListener(MouseEvent.MOUSE_DOWN,dad);
addEventListener(Event.ENTER_FRAME,update);
function dad(e:MouseEvent)
{
    A = MovieClip(e.target);
    A.startDrag();
}
function update(e:Event)
{
    if (A !=null && A.hitTestObject(B))
    {
        A.stopDrag();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:46:32.280

尝试使用 MouseEvent.MouseMove 事件而不是 MouseEvent.EnterFrame。

另外，考虑一下：命中测试检测对象是否碰撞。它对分离碰撞的物体没有任何作用。如果您的对象在帧之间移动 10 个像素，则对象将测试为碰撞，但最多可能有 10 个像素的重叠。使用 stopDrag() 不足以分离对象。

根据重叠对象的形状，分离它们的任务可能很简单，也可能非常复杂。如果它们本质上都是圆形的，那很容易。如果它们都是凹多边形，那么您将陷入数学伤害的世界。

以下是我过去用于简单游戏的一些分离方法。 [Circle-Cirle 碰撞与分离](http://plasticsturgeon.com/2011/03/actionscript-collision-detection-u-circle-circle-collision-detection/) [Circle-Line 碰撞与分离](http://plasticsturgeon.com/2011/03/actionscript-collision-detection-2-circle-line-collision-detection/)

（是的，你的手比那快:-)）

# php - PHP 如何将我的变量压缩到 FOR 循环中？

> ID：14202725
> 
> 赞同：0
> 
> 时间：2013-01-07T19:30:38.947
> 
> 标签：php

我有一个用于一些 PHP 函数的变量列表。我知道我可以简化这段代码，但我不确定如何。我尝试了 for(){} 循环，但还没有弄清楚如何使结果可用。

**这是我的变量**

```
 $saveData_1  = post_data($url_1);
    $saveData_2  = post_data($url_2);
    $saveData_3  = post_data($url_3);
    $saveData_4  = post_data($url_4);
    $saveData_5  = post_data($url_5);
    $saveData_6  = post_data($url_6);
    $saveData_7  = post_data($url_7);
    $saveData_8  = post_data($url_8);
    $saveData_9  = post_data($url_9);
    $saveData_10 = post_data($url_10);
    $saveData_11 = post_data($url_11);
    $saveData_12 = post_data($url_12);
    $saveData_13 = post_data($url_13);
    $saveData_14 = post_data($url_14);
    $saveData_15 = post_data($url_15);
    $saveData_16 = post_data($url_16);
    $saveData_17 = post_data($url_17);
    $saveData_18 = post_data($url_18);
    $saveData_19 = post_data($url_19);
    $saveData_20 = post_data($url_20); 
```

**这是我尝试过的**

```
for($i = 0; $i<20; $i++) {
        $saveData = '$saveData_'.$i;
        $postData = 'post_data($url_'.$i.')';   
        print($saveData. '=' .$postData. ';');
    } 
```

这在大多数情况下都有效，它会打印出我的变量列表。但我不知道，如何使它可用，而不是将它们打印到浏览器中显示的页面，而是将它们“打印”到我的 php 脚本中。

基本上我的目标是编写上面的变量，而不必每次都实际编写一个新变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T19:34:34.177

如果我理解您的要求正确，您想要拥有可以使用的实际“变量”，例如`$saveData_16`，但又不想输入每个变量？

如果是这种情况，您可以使用所谓的[variable-variable](http://php.net/manual/en/language.variables.variable.php)：

```
$varName = 'saveData_16';
$postName = 'url_16';
$$varName = post_data($$postName); 
```

注意变量名称的双`$$`前缀。

这可以放入一个循环中：

```
for ($i = 0; $i < 20; $i++) {
    $varName = 'saveData_' . $i;
    $postName = 'url_' . $i;
    $$varName = post_data($$postName);
} 
```

变量变量可能很难记住并且难以跟上，尤其是当它们包含与现有变量相似的名称/值时。如果他们这样做，他们可以轻松地覆盖代码中的重要变量。如果这是一个潜在问题，您可能应该避免它们。

变量变量的替代方法，但在同一主题上，如果您的值确实来自`$_POST`（基于 function-name `post_data()`），您可以查看 PHP 的[`extract()`](http://php.net/manual/en/function.extract.php)函数，它为您执行相同的“提取”：

```
extract($_POST); 
```

我建议不要使用`extract()`，除非您非常清楚需要什么。它可以轻松覆盖使用与发布字段相同名称的其他变量。它确实提供了一个可选的第二个参数`$extract_type`，它是一个指定提取行为的标志，通过它，您可以告诉它*不要*覆盖现有变量：

```
extract($_POST, EXTR_SKIP); 
```

尽管如此，这可能会因为简单地忘记可选标志而引起头痛 - 所以如果这是一个风险，我会避免使用这个功能。

作为*另*一种选择，您可以将结果存储到一个数组中并按原样使用该数组。我个人支持这种方法，如果您使用字符串作为数组索引，它可以像使用变量一样可读（并且比变量变量更具可读性）。

如果您当前正在使用`$_POST`，那么您应该已经准备就绪 - 它已经是数组形式了。但是，如果您以不同的方法获取数据，则始终可以使用以下方法构建自己的数组：

```
// build your array
$saveData = array();
for ($i = 0; $i < 20; $i++) {
    $urlName = 'url_' . $i;
    $saveData['url_' . $i] = post_data($$urlName);
}

// access a value
echo $saveData['url_4']; 
```

我不是 100% 确定你的`$url_#`变量是什么，所以我在数组示例中将其保留为变量变量；如果它只是一个字符串，则可以将其替换为字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T19:33:12.993

您需要使用数组。我将输入一个示例并将其添加到此评论中。但是您要使用的是数组变量。一个数组可以容纳所有这些，您可以轻松地迭代（循环）它。

给你：

```
<?php
/* what the heck?  You need arrays ;-)
$saveData_1  = post_data($url_1);
$saveData_2  = post_data($url_2);
$saveData_3  = post_data($url_3);
$saveData_4  = post_data($url_4);
$saveData_5  = post_data($url_5);
$saveData_6  = post_data($url_6);
$saveData_7  = post_data($url_7);
$saveData_8  = post_data($url_8);
$saveData_9  = post_data($url_9);
$saveData_10 = post_data($url_10);
$saveData_11 = post_data($url_11);
$saveData_12 = post_data($url_12);
$saveData_13 = post_data($url_13);
$saveData_14 = post_data($url_14);
$saveData_15 = post_data($url_15);
$saveData_16 = post_data($url_16);
$saveData_17 = post_data($url_17);
$saveData_18 = post_data($url_18);
$saveData_19 = post_data($url_19);
$saveData_20 = post_data($url_20);
*/

$saveData = array();  // just a formality. You don't need to delcare variable types in PHP.
for ($i = 1; $i < 21; $i++) {
    $var = 'url_'.$i;
    $saveData[$i] = post_data($$var);
}

// now all your stuff is in $saveData
// what's in savedata 20?  this is:
echo $saveData[20];

// you could skip all of this and just use the $_POST superglobal
$_POST[$url_20]

// I'm curious to see what you are doing, because this process should be re-thought. 
```

# python - Tkinter python 退出/退出崩溃

> ID：14202726
> 
> 赞同：2
> 
> 时间：2013-01-07T19:30:40.450
> 
> 标签：python, crash, tkinter, exit, quit

我正在制作一个 GUI，并想添加一个退出按钮来关闭窗口。唯一的问题是，当我使用以下代码添加按钮时：

`root = Tk()`

`Exit = Button(root, text = "Quit", command = root.quit()).grid(row = 6, column = 1)`

GUI 窗口崩溃。我正在运行 Windows 7 和 Python 3.2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T19:35:57.820

尝试这个：

```
root = Tk()

Exit = Button(root, text = "Quit", command = root.quit).grid(row = 6, column = 1) 
```

在 root.quit() 我去掉了括号。看看能不能解决问题

# visual-studio - 与非 Resharper 用户协作处理 Visual Studio 项目

> ID：14202727
> 
> 赞同：0
> 
> 时间：2013-01-07T19:30:42.393
> 
> 标签：visual-studio, resharper

如果我在我的计算机上安装了 resharper，并且我与另一个没有 resharper 的开发人员在 Visual Studio 项目上协作，resharper 是否会对项目进行更改，从而阻止其他非 Resharper 用户从事该项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T19:33:27.300

不，Resharper 不会将项目文件修改到影响代码本身并使其无法运行的程度。

我安装了 resharper 一段时间，然后删除了它，我的项目仍然像我安装它之前一样工作。

# c - C：如何将任意数组放入可用内存中？（基本的）

> ID：14202729
> 
> 赞同：0
> 
> 时间：2013-01-07T19:30:43.880
> 
> 标签：c, arrays, memory

所以，我正在尝试制作一个简单的程序来反转字符串。当谈到 C 时，我*非常*耳目一新，尤其是在理解记忆方面。这是我的代码：

```
#include <stdio.h>
#include <string.h>

void reverser(char to_bb[]){
    int counter = strlen(to_bb);      /* size of entry */
    char reversed[counter];         /* creating blank array of same size */
    int counter2 = 0;
    for(counter - 1; counter >= 0; counter--){     /* loop to swap chars */
            reversed[counter2] = to_bb[counter];
            counter2++;
    }
    printf("The reversed: %s\n", reversed);
}

int main(){
    char to_be_reversed[20];
    puts("Enter the string to be reversed: ");
    scanf("%19s", to_be_reversed);
    reverser(to_be_reversed);
    return 0;
} 
```

问题是，我不断收到总线错误。我使用`sizeof(to_bb)`并了解到它是 4 位，表示`to_bb[]`只是我的 void 函数中的一个指针。我尝试了很多方法来提取字符串以便我可以操纵它（即调用它的元素），但我没有找到成功。我尝试`strcpy()`使用`*`.

感谢您的任何建议。记忆被证明是难以理解的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:42:54.737

您首先将`\0`字符放入数组中，然后创建一个空字符串。

快速修复，改变

```
for(counter - 1; counter >= 0; counter--){ 
```

进入

```
for(--counter; counter >= 0; counter--){ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T20:26:19.663

您需要学习使用警告进行编译：

```
gcc -Wall yourfile.c

In function 'reverser':
11: 5: warning: statement with no effect [-Wunused-value] 
```

`for`语句的第一部分是赋值：`counter - 1`不进行赋值。因此它什么也不做，因此你会收到一个警告，告诉你你没有做任何有用的事情。

您可能想了解的另一个真正有用的运算符是运算符`,`。它允许您在循环体中使用更少的行来完成这样的循环。

```
for(counter -= 1; counter >= 0; counter--, counter2++)     /* loop to swap chars */ 
```

最后，您没有考虑`NULL`终结者。该函数[`strlen()`](http://www.cplusplus.com/reference/cstring/strlen/)为您提供字符串中*不包括*`NULL`终止符的字符数。

因此，您应该在循环附加它之后自己考虑这一点，例如：

```
char reversed[counter+1];
int counter2 = 0;
for(counter - 1; counter >= 0; counter--, counter2++)     /* loop to swap chars */
        reversed[counter2] = to_bb[counter];
reversed[counter2] = '\0';
printf("The reversed: %s\n", reversed); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T19:36:57.983

在 中`for`，更改`counter - 1`为`counter = counter-1`或，等效地，`--counter`。

在 的大小上再添加一个字符`reversed`并将其设置为`'\0'`，使其以空值结尾。或者，您可以使用以下命令限制打印的字符数：

```
printf("The reversed: %.*s\n", counter2, reversed); 
```

# java - Selenium WebDriver 和 Highchart 测试

> ID：14202731
> 
> 赞同：3
> 
> 时间：2013-01-07T19:31:01.537
> 
> 标签：java, html, selenium, highcharts, selenium-webdriver

我知道这个问题之前已经在 SO 和其他网站上提出过，但我还没有找到明确的答案——他们中的大多数人说这不容易做到，但我想确保这是最终的判决。

这是我的情况：

我正在使用 Selenium WebDriver (Java) 测试使用 Highcharts (http://www.highcharts.com) 的网站。

我基本上想获取当您将鼠标悬停在 Highchart 折线图上的每个数据点上时出现的小工具提示弹出窗口中显示的信息。

查看网页的 HTML 代码，我注意到有`<g class="highcharts-tooltip"...`. 我还注意到，当您移动鼠标时，`(X,Y)`值会`...transform="translate(X,Y)">`发生变化，然后会更改工具提示中显示的信息。

知道了这一点，我的方法就是以某种方式获取所有`(X,Y)`值并将它们插入`transform`字段并获取工具提示数据。但我不知道如何`(X,Y)`通过 Selenium 以编程方式获取所有值。

过去有没有人解决过这个问题，或者有更好的方法来获取必要的信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T22:10:18.993

我开始创建一个库来使用 HighCharts，我目前拥有的可以在这里找到：

[https://github.com/Ardesco/Powder-Monkey/tree/master/src/main/java/com/lazerycode/selenium/graphs](https://github.com/Ardesco/Powder-Monkey/tree/master/src/main/java/com/lazerycode/selenium/graphs)

很难提供一个处理 HighCharts 的通用库，因为各个图表上的自定义选项可以修改 SVG 标记相当多。希望以上内容在一定程度上有所帮助。

随着我做的更多，它将被更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:26:17.143

折线图必须有背景才能工作。如果图表是使用 .setBackgroundColour(null) 创建的，则不会将“矩形”添加到 html 中。

我能够将背景颜色重新添加到主体背景颜色中。但是，我会尝试找出一种没有“rect”的方法。

# html - 如何显示大于实际 div 大小的背景图像？

> ID：14202735
> 
> 赞同：0
> 
> 时间：2013-01-07T19:31:32.033
> 
> 标签：html, css, image

我想显示大于实际 div 大小的图像并将其滚动到 div 内。

图像应该在 div 后面，并且图像的一部分是隐藏的。

要查看所有图像，我应该滚动它。

[demojsFFidle](http://jsfiddle.net/centerwow/BZeLR/29/)

```
<div id="wrapper">
    <img src="http://i53.tinypic.com/2ymznmx.jpg" width="100" height="100" />
</div>

#wrapper {
  border: 1px solid black;
  width:80px;
  height;80px;
  margin:10px;
  z-index:4;
}
img {
    border: 1px solid red;
   display: inline-block;
} 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:34:44.067

添加`overflow: scroll;`到您的 div。这将允许用户在 div 内滚动以查看背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T19:36:22.890

要在 div 后面显示图像...尝试使用 z-index 属性...并在您的 css 中添加滚动...

就像是...

```
your_css {
z-index:2;
overflow:scroll;
} 
```

可能有帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T19:45:59.747

您可以添加`overflow:auto;`到`#wrapper`div。这样，滚动条将仅在需要时显示。

`overflow:hidden;`如果您根本不想显示滚动条，您可以添加。

JSFiddle：http: [//jsfiddle.net/BZeLR/30/](http://jsfiddle.net/BZeLR/30/)

# haskell - Haskell 中带参数的 I/O 函数的正确类型

> ID：14202739
> 
> 赞同：1
> 
> 时间：2013-01-07T19:31:47.283
> 
> 标签：haskell

我想实现一个根据性别提出不同问题的功能。但是我没有给它正确的类型。

```
askDifferentQuestion :: String -> IO String
askDifferentQuestion sex = do
  putStrLn "ciao"

main = do
  sex <- getLine
  askDifferentQuestion sex 
```

如果我执行我得到

```
test.hs:3:3:
    Couldn't match expected type `String' with actual type `()'
    Expected type: IO String
      Actual type: IO ()
    In the return type of a call of `putStrLn'
    In a stmt of a 'do' block: putStrLn "ciao"
Failed, modules loaded: none. 
```

为什么我做错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T19:35:14.757

的类型`putStrLn`不是。`String -> IO ()``String -> IO String`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T20:41:19.753

类型`IO String`表示运行时产生的输入/输出操作`String`。照原样，`askDifferentQuestion`结果为`()`，这通常表示一个无关紧要的值。这是因为要运行的唯一操作是`putStrLn`其类型为`IO ()`，*即*，您运行它只是为了它的副作用。

假设您的类型是正确的，请将 的定义更改为`askDifferentQuestion`提示用户*和* `return`响应。例如

```
askDifferentQuestion :: String -> IO String
askDifferentQuestion sex = putStrLn (q sex) >> getLine
  where q "M" = "What is the airspeed velocity of an unladen swallow?"
        q "F" = "How do you like me now?"
        q "N/A" = "Fuzzy Wuzzy wasn’t fuzzy, was he?"
        q "N" = "Why do fools fall in love?"
        q "Y" = "Dude, where’s my car?"
        q _ = "Why do you park on a driveway and drive on a parkway?" 
```

# netbeans - 如何将现有的 Java 项目转换为 NetBeans 上的 JavaFX 项目？

> ID：14202740
> 
> 赞同：1
> 
> 时间：2013-01-07T19:31:55.210
> 
> 标签：netbeans, javafx-2, javafx, netbeans-7

我在 NetBeans 7.2.1 上有一个常规 Java 项目，我想将其转换为 JavaFX 项目。有没有一种自动的方法可以做到这一点，还是我必须创建一个新项目并将我的源代码导入其中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T20:59:28.483

NetBeans 7.2.1 中没有将常规 NetBeans java 项目转换为 JavaFX 项目的转换实用程序 - 创建一个新的 JavaFX 项目并将旧源导入其中。

# javascript - 将 javascript 变量声明为特定类型

> ID：14202743
> 
> 赞同：29
> 
> 时间：2013-01-07T19:31:58.910
> 
> 标签：javascript, variables, variable-declaration

标题说明了一切，但我将提供更多说明：

在看到所有变量都声明为 type 的许多 javascript 示例`var`，并看到对其他数据类型的支持之后，为什么不声明特定数据类型的变量？意思是，为什么不是这样：

`string hello = 'Hello, World'`

用来代替

`var hello = 'Hello, World'`

查看像[OReilly Javascript 之](http://oreilly.com/javascript/excerpts/learning-javascript/javascript-datatypes-variables.html)类的网站表明存在其他类型的保留字。同样，为什么不使用它们？它不会像这样：`typeof(variable)==='string';`不再需要吗？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-01-07T19:33:17.147

很简单，JavaScript 变量没有类型。这些*值*具有类型。

该语言允许我们编写如下代码：

```
var foo = 42;
foo = 'the answer';
foo = function () {}; 
```

所以在变量声明中指定类型是没有意义的，因为类型是由变量的值决定的。这在“动态”语言中相当普遍。

# php - Magento - 子类别的元描述

> ID：14202748
> 
> 赞同：0
> 
> 时间：2013-01-07T19:32:22.480
> 
> 标签：php, magento, categories

如何获得子类别的 metaDescription（主要类别可以正常工作）？这些不起作用：

```
$category->load();
if ($title) {
  $headBlock->setTitle($title);
}
if ($description = $category->getMetaDescription()) {
   $headBlock->setDescription($description);
} 
```

我尝试了很多东西，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-21T05:40:37.330

这对我有用：

```
<?php
$cur_category=Mage::getModel('catalog/category')->load($_category->getId());
$layer = Mage::getSingleton('catalog/layer');
?>   

<p class="subcategory-meta-description">
    <?php echo $cur_category->getMetaDescription(); ?>
</p> 
```

# java - 如何使用 java hibernate 注释添加二级索引？

> ID：14202756
> 
> 赞同：3
> 
> 时间：2013-01-07T19:33:06.183
> 
> 标签：java, database, hibernate, postgresql, hibernate-annotations

我有以下

```
package model.database;

import static javax.persistence.GenerationType.IDENTITY;

import java.io.Serializable;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table( name = "DB_ACCOUNT_BILLING" )
public class AccountBilling implements Serializable
{
    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    private long userId;
    private String firstName;
    private String lastName;
    private String username;
    private String password;

    public AccountBilling()
    {
    }

    @Id
    @GeneratedValue( strategy = IDENTITY )
    @Column( name = "USER_ID", unique = true, nullable = false )
    public long getUserId()
    {
        return userId;
    }

    public void setUserId( long userId )
    {
        this.userId = userId;
    }

    @Column( name = "FIRST_NAME", unique = false, nullable = false, length = 20 )
    public String getFirstName()
    {
        return firstName;
    }

    public void setFirstName( String firstName )
    {
        this.firstName = firstName;
    }

    @Column( name = "LAST_NAME", unique = false, nullable = false, length = 20 )
    public String getLastName()
    {
        return lastName;
    }

    public void setLastName( String lastName )
    {
        this.lastName = lastName;
    }

    @Column( name = "USERNAME", unique = true, nullable = false, length = 20 )
    public String getUsername()
    {
        return username;
    }

    public void setUsername( String username )
    {
        this.username = username;
    }

    @Column( name = "PASSWORD", unique = false, nullable = false, length = 20 )
    public String getPassword()
    {
        return password;
    }

    public void setPassword( String password )
    {
        this.password = password;
    }

} 
```

我想将用户名作为二级索引，但我不确定我应该使用什么 Hibernate 注释来指定它。另外，目前对于主索引检索，我执行以下操作：

```
 session.beginTransaction();

    AccountBilling accountBilling = (AccountBilling) session.get( AccountBilling.class, (long) primaryIndex ); 
```

但是我怎么能做二级索引检索呢？

任何帮助/建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:32:17.763

要让 Hibernate 创建索引，您可以使用注解[`Index`](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/annotations/Index.html)...。

要按用户名检索 AccountBilling，您可以使用查询：

```
String hql = "select a from AccountBilling a where a.userName = :userName";
AccountBilling result = session.createQuery(hql)
                               .setString("userName", userName)
                               .uniqueResult(); 
```

# ios - 通过无线方式将 iOS 应用程序加载到设备

> ID：14202758
> 
> 赞同：0
> 
> 时间：2013-01-07T19:33:14.087
> 
> 标签：ios

> **可能重复：**
> [iOS 安装没有应用商店的应用](https://stackoverflow.com/questions/3848916/ios-installing-apps-without-app-store)

我为住在不同城市的朋友构建了一个 iOS 应用程序。我有一个标准的 99 美元/年的开发者帐户，用于构建它。是否可以通过无线方式将其传输到他的设备？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:36:03.560

是的，TestFlight 应该可以：

[https://www.testflightapp.com/](https://www.testflightapp.com/)

自己还没有尝试过，但看起来很有希望。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T19:36:38.293

是的，有很多方法可以做到这一点。您必须配置他的设备来测试它，然后您可以将 IPA 文件发送给他（使用 XCode 中的存档创建），并让他通过 iTunes 安装它。或者，您可以在 TestFlight(http://www.testflightapp.com) 上注册并使用 TestFlight 做同样的事情。我们使用 TestFlight 是因为我们有多个 beta 测试人员，这是一项非常有用的服务。

# mysql - 微调 MySQL 服务器配置以获得更好的性能

> ID：14202761
> 
> 赞同：5
> 
> 时间：2013-01-07T19:33:22.557
> 
> 标签：mysql

我需要帮助调整我的 mysql 服务器以获得更好的性能。我有很多资源，但它仍然表现不佳。我点击最多的一张表中只有 350 万条记录。

我需要帮助专注于更改哪些设置以获得更好的性能。

一个简单的查询，例如

```
SELECT label,
COUNT(ObjectKey) AS labelcount
FROM db.results
GROUP BY label
ORDER BY labelcount DESC
LIMIT 30

EXPLAINED:

'1', 'SIMPLE', 'results', 'index', NULL, 'label_index', '258', NULL, '9093098', 'Using index; Using temporary; Using filesort' 
```

需要 44 秒。

这是我的设置。

```
SHOW VARIABLES LIKE '%buffer%';

'bulk_insert_buffer_size', '8388608'
'innodb_buffer_pool_instances', '1'
'innodb_buffer_pool_size', '16106127360'
'innodb_change_buffering', 'all'
'innodb_log_buffer_size', '10485760'
'join_buffer_size', '131072'
'key_buffer_size', '304087040'
'myisam_sort_buffer_size', '70254592'
'net_buffer_length', '16384'
'preload_buffer_size', '32768'
'read_buffer_size', '65536'
'read_rnd_buffer_size', '262144'
'sort_buffer_size', '262144'
'sql_buffer_result', 'OFF'

SHOW VARIABLES LIKE 'innodb%'

innodb_data_home_dir,
innodb_doublewrite, ON
innodb_fast_shutdown, 1
innodb_file_format, Antelope
innodb_file_format_check, ON
innodb_file_format_max, Antelope
innodb_file_per_table, OFF
innodb_flush_log_at_trx_commit, 0
innodb_flush_method,
innodb_force_load_corrupted, OFF
innodb_force_recovery, 0
innodb_io_capacity, 200
innodb_large_prefix, OFF
innodb_lock_wait_timeout, 50
innodb_locks_unsafe_for_binlog, OFF
innodb_log_buffer_size, 10485760
innodb_log_file_size, 536870912
innodb_log_files_in_group, 2
innodb_log_group_home_dir, .\
innodb_max_dirty_pages_pct, 75
innodb_max_purge_lag, 0
innodb_mirrored_log_groups, 1
innodb_old_blocks_pct, 37
innodb_old_blocks_time, 0
innodb_open_files, 300
innodb_purge_batch_size, 20
innodb_purge_threads, 0
innodb_random_read_ahead, OFF
innodb_read_ahead_threshold, 56
innodb_read_io_threads, 4
innodb_replication_delay, 0
innodb_rollback_on_timeout, OFF
innodb_rollback_segments, 128
innodb_spin_wait_delay, 6
innodb_stats_method, nulls_equal
innodb_stats_on_metadata, ON
innodb_stats_sample_pages, 8
innodb_strict_mode, OFF
innodb_support_xa, ON
innodb_sync_spin_loops, 30
innodb_table_locks, ON
innodb_thread_concurrency, 10
innodb_thread_sleep_delay, 10000
innodb_use_native_aio, ON
innodb_use_sys_malloc, ON
innodb_version, 1.1.8
innodb_write_io_threads, 4 
```

这是我的表解释。

[http://pastebin.com/PX6qDHCd](http://pastebin.com/PX6qDHCd)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T19:51:23.897

由于这取决于许多因素，您可以使用[MySQL Primer](http://www.day32.com/MySQL/)和/或[MySQL Tuner](https://github.com/rackerhacker/MySQLTuner-perl)脚本为您的服务器找到合适的设置。

由于 MySQL 需要创建一个临时表来执行查询，它也可能与糟糕的磁盘 i/o 有关。

# f# - Specflow 在 F# 步骤程序集中忽略步骤

> ID：14202766
> 
> 赞同：1
> 
> 时间：2013-01-07T19:33:36.753
> 
> 标签：f#, specflow

我正在使用 VS2010、SpecFlow 1.9.0、NUnit 2.6.2 和 ReSharper 7.1。我有一个来自示例的功能文件：

```
Feature: SpecFlowFeature1
    In order to avoid silly mistakes
    As a math idiot
    I want to be told the sum of two numbers

@mytag
Scenario: Add two numbers
    Given I have entered 50 into the calculator
    And I have entered 70 into the calculator
    When I press the add button
    Then the result should be 120 on the screen 
```

我在单独的 F# 程序集中实现了步骤定义：

```
[<TechTalk.SpecFlow.Binding>]
module StepDefinitions

open TechTalk.SpecFlow
open NUnit.Framework

let [<Given>] ``I have entered (.*) into the calculator`` (a: int) =
    ScenarioContext.Current.Pending()

let [<When>] ``I press the add button`` =
    ScenarioContext.Current.Pending()

let [<Then>] ``the result should be (.*) on the screen`` (r: int) =
    ScenarioContext.Current.Pending() 
```

我已经通过 app.config 中的 stepAssemblies 标签告诉 SpecFlow 在哪里可以找到它们

但是，当我运行测试时，它会找到 Given 和 Then 步骤，而不是 When 步骤。我得到的错误是：

```
No matching step definition found for one or more steps.
using System;
using TechTalk.SpecFlow;

namespace MyNamespace
{
    [Binding]
    public class StepDefinitions
    {
        [When(@"I press the add button")]
        public void WhenIPressTheAddButton()
        {
            ScenarioContext.Current.Pending();
        }
    }
}

Given I have entered 50 into the calculator
-> pending: StepDefinitions.I have entered (.*) into the calculator(50)
And I have entered 70 into the calculator
-> skipped because of previous errors
When I press the add button
-> No matching step definition found for the step. Use the following code to create one:
        [When(@"I press the add button")]
        public void WhenIPressTheAddButton()
        {
            ScenarioContext.Current.Pending();
        }

Then the result should be 120 on the screen
-> skipped because of previous errors 
```

我是不是在某个地方出了问题，还是 F# 支持存在错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T10:44:20.263

C#的正确翻译其实是

```
let [<When>] ``I press the add button``() =
    ScenarioContext.Current.Pending() 
```

注意额外的`()`. 由于原始版本中缺少此功能，因此该函数具有不同的签名，这意味着未找到它。

# javascript - 在依赖于 $filter 的 AngularJs 控制器中测试 $scope

> ID：14202767
> 
> 赞同：19
> 
> 时间：2013-01-07T19:33:45.103
> 
> 标签：javascript, angularjs, jasmine

我已经阅读了一些教程和基本示例，但我很难为我的控制器编写单元测试。我已经看到代码片段实例化控制器并让角度注入`$rootScope`对象，该对象又用于为控制器创建新`scope`对象。但我不知道为什么`ctrl.$scope`？**未定义**：

```
 describe('EmployeeCtrl', function () {
    var scope, ctrl, $httpBackend;

    beforeEach(inject(function (_$httpBackend_, $rootScope, $controller, $filter) {
        $httpBackend = _$httpBackend_;       

        scope = $rootScope.$new();
        ctrl = $controller('EmployeeCtrl', { $scope: scope});
        expect(ctrl).not.toBeUndefined();
        expect(scope).not.toBeUndefined();   //<-- PASS!      
        expect(ctrl.$scope).not.toBeUndefined();  //<-- FAIL!       
    }));
}); 
```

我最终使用了`scope`变量而不是，`ctrl.$scope`但是在我的第一次测试中，我无法弄清楚如何在我的控制器中对**函数变量进行单元测试：**

**控制器：**

```
 function EmployeeCtrl($scope, $http, $filter, Employee) {
  var searchMatch = function (haystack, needle) {
   return false;
  }
 } 
```

**破碎的单元测试：**

```
it('should search ', function () {                
    expect(ctrl.searchMatch('numbers','one')).toBe(false);
}); 
```

这就是我得到的

> TypeError: Object # has no method 'searchMatch'

您如何测试该功能？作为一种解决方法，我将我的方法移动到 $scope 以便我可以测试，`scope.searchMatch`但我想知道这是否是唯一的方法。

最后，在我的测试中似乎`$filter` **也未定义**，你如何注入它？我试过这个但没有奏效：

```
ctrl = $controller('EmployeeCtrl', { $scope: scope, $filter: $filter }); 
```

谢谢

**更新：** 上面提到的注入 $filter 的方法工作得很好。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-11T09:07:58.387

我的理解是，在 Angularjs 中，当应用程序启动并且控制器修改范围时，您将范围对象传递给控制器​​。控制器不再被调用。

在 Angularjs 中，控制器真正在做的是初始化作用域：控制器只运行一次。如果您理解这一点，您就会意识到向控制器询问范围是这样的：

```
currentScope = myController.scope; 
```

没有意义。

（顺便说一句，我在 Angular 中不喜欢的一件事是他们选择的名称。如果“控制器”正在做的是初始化范围，那么它就不是真正的控制器。Angular 中有很多这样的东西API）。

我认为测试“控制器”的“正确”方法是在 Jasmine *beforeEach*子句中从头开始创建一个新的空白范围，并使用“控制器”来**初始化**一个新的空白范围，如下所示：

```
var ctrl, myScope;

beforeEach(inject(function($controller, $rootScope) {
    myScope = $rootScope.$new();
    ctrl = $controller('myController', {
        $scope: myScope
    });
})); 
```

然后测试新创建的范围是否具有预期的属性：

```
it('In the scope, the initial value for a=2', function() {
            expect(myScope.a).toBe(2);
}); 
```

换句话说，您不测试控制器；您测试控制器创建的范围。

所以，你做对了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-04T23:01:08.513

这是另一种可能更易于遵循的模式：

```
var $scope;
beforeEach(module(function ($provide) {
  $scope = {
    // set anything you want here or nothing
  };
  $provide.value('$scope', $scope);
}));

var ctrl;
beforeEach(inject(function ($controller) {
  ctrl = $controller('MyController');
}));

it('should test something...', function () {
  // $scope will have any properties set by
  // the controller so you can now do asserts
  // on them.
}); 
```

您可以使用相同的模式为 $location 和 $window 以及其他设置值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T20:01:08.773

只有两种可能：

添加`searchMatch`到范围（如您所述）或

返回`searchMatch`函数：

```
function EmployeeCtrl($scope, $http, $filter, Employee) {
  return {
    searchMatch: function (haystack, needle) {
      return false;
    }
  };
 } 
```

如果它真的必须保持私密，那么您将不得不测试使用它的功能。

要获得`$filter`，您可以尝试以下操作：

```
var $filter = angular.injector(['ng']).get('$filter'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-24T07:48:38.313

要测试过滤器，请执行以下操作以获取目标过滤器：

```
var ctrl, myScope, $filter;
beforeEach(inject(function(_$filter_){
    $filter = _$filter_;
})) 
```

如果您的过滤器名称为“AccountTimeZone”，请执行以下操作：

```
let accountTimeZoneFilter = $filter('AccountTimeZone'); 
```

# javascript - 像 theverge.com 一样缩放到顶部的浮动标题

> ID：14202770
> 
> 赞同：1
> 
> 时间：2013-01-07T19:33:50.520
> 
> 标签：javascript, jquery, html, css, web

我真的很喜欢[theverge.com](http://theverge.com)的浮动标题。当您向下滚动时，标题保持固定在顶部，当您向下滚动到某个点时，会出现 The Verge 徽标，允许您向上放大。

如何重现类似的标头，可以仅使用 HTML 和 CSS 来完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:35:53.583

用 CSS 试试这个

```
.fixedHeader {
    position:fixed;
    top: 0;
} 
```

您应该使用 jQuery 构建的小按钮。因此，您必须检查属性**scrollTop**以了解何时应显示按钮。如果您单击按钮，您应该使用 jQuery 将 scrollTop 属性**.animate()**回零 (0)。

[演示](http://jsfiddle.net/algorhythm/VaFxU/)

这里有小按钮和点击事件：

[演示](http://jsfiddle.net/algorhythm/VaFxU/3/)

# logic - 比较没有年份的月份和日期

> ID：14202772
> 
> 赞同：0
> 
> 时间：2013-01-07T19:33:53.827
> 
> 标签：logic

所以，我基本上有 4 个字段：M1 D1，M2 D2

它们代表第 1 个月第 1 天，第 2 个月第 2 天

例子：

*   10 月 1 日 10 月 1 日 5 日 31 日至 5 月 31 日（跨越两个不同的年份）
*   6、1、7、4 6 月 1 日至 7 月 4 日
*   7、5、8、1 7 月 5 日至 8 月 1 日
*   8、2、9、30 8 月 2 日至 9 月 30 日

基本上我有一个月和一天，想知道它在其中哪一条记录之间。我不需要任何特定于语言的东西，但是我确实将它们放在一个表中，并试图用 SQL 解决问题。我只是希望有人能帮助我理解逻辑。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T22:16:58.107

这是我想出的适用于每一天的逻辑：

```
WHERE (m BETWEEN m1 AND m2 AND d BETWEEN d1 AND d2)
OR (m BETWEEN m1 AND m2 AND ( (m = m1 AND d >= d1) OR (m = m2 AND d <= d2) OR (m > m1 AND m < m2) ))
OR (m1 > m2 AND ( m >= m1 OR m <= m2) AND d BETWEEN d1 AND d2)
OR (m1 > m2 AND ( m >= m1 OR m <= m2) AND ( (m = m1 AND d >= d1) OR (m = m2 AND d <= d2) OR (m > m1 OR m < m2) )) 
```

我还更新了示例以包含原件中未实现的情况：

*   10,6 至 5,5
*   5,6 至 7,4
*   7,5 至 8,1
*   8,2 至 10,5

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T19:41:16.537

因此，您在变量中有月份和日期，并且想要匹配记录。我认为最简单的逻辑是将这些值转换为可比较的“数字”。就像是：

```
from t
where (month*100+day between m1*100+d1 and m2*100+d2 and m1*100+d1 <= m2*100+d2) or
      (month*100+day not between m2*100+d2+1 and m1*100+d1-1and m2*100+m2 < m1*100+d1) 
```

“100”的规则只是它大于当时最长的月份（31），并且它产生的东西在第一种情况下看起来很合理（1001 和 531）。

# asp.net - asp.net url 重写智能排除 scriptresource.axd

> ID：14202775
> 
> 赞同：1
> 
> 时间：2013-01-07T19:34:10.117
> 
> 标签：asp.net, regex, url-rewriting, web-config

我正在使用 intelligencia.urlrewriter 来处理我的 url 路由。我正在使用 asp.net，问题出现在 ScriptResource.axd 文件被重写的地方，所以我需要在我的规则中添加一个排除项，但无法弄清楚。

这是我的规则：

```
<rewrite url="/pages/(.+)" to="/routed_pages/Page.aspx?slug=$1" /> 
```

使用此规则，ScriptResource.axd 被重写为 /pages/ScriptResource.axd 并导致错误。

这是支持页面：[http ://urlrewriter.net/index.php/support](http://urlrewriter.net/index.php/support)

任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T05:53:24.650

我终于能够通过这样做来完成：

```
<rewrite url="^(/.+(\.axd)(\?.+)?)$" to="$1" processing="stop" />
<rewrite url="/pages/(.+)" to="/routed_pages/Page.aspx?slug=$1" /> 
```

# javascript - javascript函数对象和this

> ID：14202779
> 
> 赞同：0
> 
> 时间：2013-01-07T19:34:19.850
> 
> 标签：javascript

在以下两种情况下，这有什么区别？

情况1

```
var Person = function() { this.name="Allen Kim" }
Person.name; //undefined 
```

案例2

```
var Person = function() { this.name="Allen Kim" }
var me = new Person();
me.name // Allen Kim 
```

只是想了解这个范围在这两种情况下是如何工作的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T19:36:10.757

JavaScript 中的每个函数本身就是一个对象。因此从函数本身`Person.name`检索`name`属性，该属性从未设置过；因此`undefined`.

您可以直接尝试我的设置：

```
Person.name = "John";
Person.name; // "John" 
```

* * *

通过在构造函数中分配属性时

```
this.name = "Allen Kim"; 
```

您正在该实例上设置属性。然后，当您使用以下命令实例化对象时：

```
var me = new Person(); 
```

您的构造函数会将`name`属性添加到`me`，因为`this`引用正在创建的对象。

* * *

`new`以下是 JavaScript 引擎在使用关键字调用构造函数时采取的基本步骤：

1.  调用构造函数并将其`this`设置为新的干净对象。
2.  将新对象的内部`[[Prototype]]`属性设置为构造函数的`prototype`（在某些实现中，可以通过 获得[`__proto__`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/proto)）。
3.  将新对象的属性设置为对构造函数的引用（因此您可以通过 访问原型，`constructor`而不是非标准的）。`me.__proto__``me.constructor.prototype`
4.  返回所述对象。

[请注意，这是一个非常基本的解释。这里没有包括许多其他的东西，但这应该给你它的要点。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T19:36:28.003

在第一种情况下，您正在寻找函数本身的静态属性。

第二种情况，您通过调用构造函数返回具有该属性的对象的实例。这不是范围的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T19:36:45.310

```
var Person = function() { this.name="Allen Kim" }
Person.name; //undefined due to the fact that there is no Person object. 
```

* * *

```
var Person = function() { this.name="Allen Kim" }
var me = new Person();
me.name // Allen Kim --> Person `me`'s name 
```

# java - 在 Java 中使用 INNER JOIN 插入

> ID：14202781
> 
> 赞同：1
> 
> 时间：2013-01-07T19:34:24.840
> 
> 标签：java, mysql, sql, database, sqlite

表雇主

```
CREATE TABLE "Employer" ("employerID" INTEGER PRIMARY KEY  NOT NULL ,
"name" CHAR,
"industry" CHAR,
"contact1" CHAR,
"contact2" CHAR,
"email" CHAR,
"website" CHAR,
"facts" CHAR,
"phone" VACHAR) 
```

表作业

```
CREATE TABLE "Job" ("jobID" INTEGER PRIMARY KEY  NOT NULL ,
"employerID" INTEGER,
"title" CHAR,
"description" CHAR,
"type" CHAR,"salary" CHAR,
"benefits" CHAR,
"vacancies" INTEGER,
"closing" CHAR,
"requirement" CHAR,
"placement" BOOL,
"applyTo" CHAR,
"status" CHAR,
"posted" CHAR, 
"location" CHAR)

 try {  
    //String sqlStm = "INSERT INTO Job (employerID,title,description,type,salary,benefits,vacancies,closing,requirement,placement,applyTo,status,posted,location) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?) INNER JOIN Employer ON Job.employerID = Employer.employerID"; 
   String sqlStm = "SET @SELECTED_ID = (SELECT employerID FROM Employer WHERE name = '"+comboEmployer.getSelectedItem().toString()+"') INSERT INTO Job (employerID,title,description,type,salary,benefits,vacancies,closing,requirement,placement,applyTo,status,posted,location)VALUES (@SELECTED_ID,?,?,?,?,?,?,?,?,?,?,?,?,?)";
       pst = conn.prepareStatement(sqlStm);

    pst.setString(2,txtTitle.getText());
     pst.setString(3,areaDescription.getText());
      pst.setString(4,comboType.getSelectedItem().toString());
       pst.setString(5,txtSalary.getText());
        pst.setString(6,areaBenefits.getText());
         pst.setString(7,txtVac.getText());
          pst.setString(8,txtDate.getDateFormatString().toString());
           pst.setString(9,areaReq.getText());
            pst.setString(10,comboPlace.getSelectedItem().toString());
             pst.setString(11,txtWeb.getText());
              pst.setString(12,comboStatus.getSelectedItem().toString());
               pst.setString(13,"01-01-2013");
                pst.setString(14,txtLoc.getText());
                   pst.executeUpdate();
   } catch (Exception e) {
        JOptionPane.showMessageDialog(null,e);
    } finally {
        try {
            rs.close();
            pst.close();
        } catch (Exception e) {
        }
    }  
} 
```

我试图允许用户向系统添加工作，并且表单要求他们从`Employer`表中选择雇主。我不确定如何将所选雇主与`JCombobox`工作联系起来。即`Job`表中的employerID 应与`employer`表的employerID 匹配。我设法做到了`Select`声明，

```
 sql = "SELECT Job.jobID as 'Job ID', Employer.name as'Company', Job.title as 'Role', Job.type as 'Type', Job.closing as 'Closing Date' FROM Job INNER JOIN Employer ON Job.employerID=Employer.employerID ORDER BY Employer.name"; 
```

但不确定如何`INSERT`进入 sqlite 管理器。继承人的形式：![在此处输入图像描述](../Images/9cc435918f40c700665a2a40d340bfe6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:43:44.810

您可以从前端编码本身处理它。Combobox 有两个东西 - 值和文本。ComboBox 项的值应为 Job id，文本应为 Description。使用您的`Select`查询检索此部分。然后您可以插入 Selected 选项的值。因此将插入作业 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T19:53:10.870

我想我明白你想要做什么。您正在尝试使用表单上输入的值添加到“工作”表。由于雇主的下拉框是文本形式，并且“雇主”表只接受雇主 ID，因此您需要将雇主名称转换为雇主 ID 的内容。

试试这个代码。它是用普通 SQL 编写的，因此您可能需要对 SQLite 进行一些小的调整

```
SET @SELECTED_ID = (SELECT employerID
                   FROM Employer
                   WHERE name = @your_text_box_variable)

INSERT INTO Job (employerID,title,description,type,salary,benefits,vacancies,closing,requirement,placement,applyTo,status,posted,location) 
VALUES (@SELECTED_ID,?,?,?,?,?,?,?,?,?,?,?,?,?) 
```

从本质上讲，我们从表单中获取雇主名称的值（使用变量@your_text_box_variable 传输）并拉回与该名称关联的雇主 ID。然后我们可以使用这个雇主 ID 插入到“工作”表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T20:01:35.060

您`JComboBox`应该包含类型的对象`Employer`。这个 Employer 类至少应该包含雇主的 ID（以便能够唯一地识别他）和雇主的名称（在组合框中显示）。

要插入新工作，只需从组合框中获取选定的雇主，获取其 ID，然后将其传递给您的查询（不应有任何内部连接）：

```
insert into job (employerID,title, ...) values (?, ?, ...) 
```

# html - iphone显示屏中的滑块

> ID：14202793
> 
> 赞同：0
> 
> 时间：2013-01-07T19:35:14.693
> 
> 标签：html, jquery-ui, css, twitter-bootstrap

我正在尝试使用引导带响应 css 来减小滑块的宽度以在 iphone 中显示它但我无法做到这一点你能帮我吗 [http://jsfiddle.net/CXkQp/4/](http://jsfiddle.net/CXkQp/4/)

截图 [https://docs.google.com/file/d/0B3IBJKENGE7RQkk1eEI3TDNoN2c/edit](https://docs.google.com/file/d/0B3IBJKENGE7RQkk1eEI3TDNoN2c/edit)

在下面提供我的代码

```
<div id="banner" class="clearfix" style="border-bottom: 2px solid #cacaca;">
          <div class="bx-wrapper" style="width:100%; position:relative; margin-top: 0px; margin-bottom: 0px;">
              <div class="bx-window" style="position:relative; overflow:hidden; width:100%">

                <div class="container">

                                <div id="da-slider" class="da-slider" style="margin-top: 0px; margin-bottom: 0px; height: 300px; background-position: 247950% 0%;">
                                  <div class="da-slide da-slide-toleft" style="width: 100%">
                                    <h2><img src="http://www.defie.co/docs/examples/frontpage_rotate1A.jpg" alt="image01"></h2>
                                    <div class="da-img"><img src="http://www.defie.co/docs/examples/frontpage_rotate1B.jpg" alt="image01"></div>
                                  </div>
                                  <div class="da-slide da-slide-toleft" style="width: 100%">
                                    <h2><img src="http://www.defie.co/docs/examples/frontpage_rotate2A.jpg" alt="image01"></h2>
                                    <div class="da-img"><img src="http://www.defie.co/docs/examples/frontpage_rotate2B.jpg" alt="image01"></div>
                                  </div>
                                  <div class="da-slide da-slide-fromright da-slide-current" style="width: 100%;">
                                    <h2><img src="http://www.defie.co/docs/examples/frontpage_rotate3A.jpg" alt="image01"></h2>
                                    <div class="da-img"><img src="http://www.defie.co/docs/examples/frontpage_rotate3B.jpg" alt="image01"></div>
                                  </div>
                                  <nav class="da-arrows" style="width: 100%">
                                    <span class="da-arrows-prev"></span>
                                    <span class="da-arrows-next"></span>
                                  </nav>
                                <nav class="da-dots"><span class=""></span><span class=""></span><span class="da-dots-current"></span></nav></div>
                                  </div>

              </div>
          </div>
      </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T03:00:10.840

有几点可以帮助您入门。在您的 jsFiddle 中，您的容器 div @ line 120 似乎没有结束标记。

此外，您希望滑块可以缩放，但它不在流动的行 div 内。我认为您的引导网格需要工作。仔细检查流体网格的结构：http: [//twitter.github.com/bootstrap/scaffolding.html#fluidGridSystem](http://twitter.github.com/bootstrap/scaffolding.html#fluidGridSystem)

希望这可以帮助。

# javascript - 如何注册回调并通过网站刷新将其持久化？

> ID：14202798
> 
> 赞同：1
> 
> 时间：2013-01-07T19:35:30.040
> 
> 标签：javascript, callback, coffeescript

我试图在我的程序开始时注册一个回调方法，然后在我的 Web 应用程序生命周期的不同时间调用它。回调工作正常，直到我刷新浏览器，之后我使用的类变量被重置。这样做的正确方法是什么？现在我执行以下操作 -

```
class MyManager
    @registerCallback : (callback) ->
        @callback = callback 
```

它的名字就像 -

```
MyManager.registerCallback myMethod 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-20T13:18:02.703

我知道这个问题很老，但我认为这可以帮助某人：

```
// persist while window is open
sessionStorage.myMethod = (function (msg) { alert(msg) }).toString()

// persist forever (while user keeps browser data)
localStorage.myMethod = (function (msg) { alert(msg) }).toString() 
```

然后以这种方式运行函数：

```
// execute from sessionStorage
eval("(" + sessionStorage.myMethod + ")('Hello World!')");

// execute from localStorage
eval("(" + localStorage.myMethod + ")('Hello World!')"); 
```

# ios - 从缓存响应中停止 NSURLConnection sendAsynchronousRequest

> ID：14202803
> 
> 赞同：3
> 
> 时间：2013-01-07T19:35:51.530
> 
> 标签：ios, nsurlconnection, objective-c-blocks

我打电话

```
[NSURLConnection sendAsynchronousRequest:request
                                   queue:queue
                       completionHandler:^(NSURLResponse * response, NSData *data, NSError *error) 
```

请求将*cachePolicy*设置为*NSURLRequestReloadIgnoringLocalCacheData*

此调用是否缓存响应？如果是这样，我如何确保它不会？我意识到它不会从缓存中检索任何东西，但我想确保它也不会留下任何东西。我找不到明确的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T20:03:10.990

快速测试表明它似乎正常缓存了结果。

完全避免缓存的方法是实现一个[NSURLConnectionDataDelegate](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSURLConnectionDataDelegate_protocol/Reference/Reference.html)委托，`nil`从[connection:willCacheResponse:](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSURLConnectionDataDelegate_protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSURLConnectionDataDelegate/connection:willCacheResponse:)返回，然后使用
[[NSURLConnection connectionWithRequest:delegate:]](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html#//apple_ref/occ/clm/NSURLConnection/connectionWithRequest:delegate:)使用委托发送请求。

要自己测试它是否缓存，您可以尝试上述禁用缓存并设置断点的方法`connection:willCacheReponse:`，看看它是否被调用。如果它被调用，请求通常会被缓存。

# php - 从 $_POST 中拆分变量

> ID：14202812
> 
> 赞同：0
> 
> 时间：2013-01-07T19:36:18.317
> 
> 标签：php

我想将我的变量从表单中拆分出来，并将它们一个一个地输入到 Mysql 数据库中。我的表 4 字段将是：UserID、Status、HowLate、PassFail 在下面的这个示例中，UserID 将是 75 和 76，但将来可以是来自用户 ID 的任何 #。我对如何将这些动态变量插入数据库感到困惑，因为我不知道每次它们会是什么。我唯一的静态模式是当我循环遍历 foreach （ $_POST as $key => $value ）任何帮助

```
$results = print_r($_POST, true); 
```

表单中的样本数据

```
75=PRESENT

d75=on time

cc75=passed

76=LATE

d76=10 minutes

cc76=failed 
```

我想写一个查询，如：

```
insert into attendance (UserID, Status, HowLate, PassFail) values (76, 'Late', '10 minutes', 'failed') 
```

也可以把这当成一个班级的学生，所以一次有 20 条记录返回

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:46:25.510

我猜你这样做的原因是因为你不知道你可以在 HTML 表单中发送多维数组。我建议一种方法，例如。

```
<input name="users[1][userid]" />
<input name="users[1][status]" />
<input name="users[1][howlate]" />
<input name="users[1][passfail]" />

<input name="users[2][userid]" />
<input name="users[2][status]" />
<input name="users[2][howlate]" />
<input name="users[2][passfail]" /> 
```

然后在php中您可以通过以下方式访问它们。

```
foreach( $_POST['users'] as $key => $user )
{
    $userID = $user['userid'];  // same for the other fields. 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T19:48:42.450

分配你的变量（如果你没有使用 PDO，你应该避免 SQL 注入）例如：

```
$userId = $_POST['userId']; // assuming that is what your field id is from the html form
$status = $_POST['status']; 
```

等等

然后插入数据库表：

```
insert into attendance (UserID, Status, HowLate, PassFail) values ($userId, '$status' etc. 
```

# c++ - Qt 线程：信号/插槽 2 个对象（1 个单例）在主线程中创建并在另一个线程中调用

> ID：14202814
> 
> 赞同：1
> 
> 时间：2013-01-07T19:36:22.847
> 
> 标签：c++, qt

我有一个问题：我有 2 个对象，它们都在主线程中创建和连接。其中一个对象是单例。现在我想从另一个线程中的单例调用一个方法并在其中发出一个信号。问题是，在发出信号后未调用连接的插槽。我做错了什么还是 connect() 没有能力？

第二个线程应该处理一些文件夹并从发出信号的单例对象中调用一个方法，以及处理的结果。

代码看起来像这样（不工作）：

```
void main() {
    Singleton* singleton = Singleton::getInstance();
    ShowResult* show = new Showesult();
    connect(singleton, SIGNAL(itemsset(Items)), show, SLOT(showresult(Items)));
    Process* p = new Process();
    QThread thread;
    p->moveToThread(thread);
    connect(&thread, SIGNAL(started()), p, SLOT(process()));
    thread.start();
}

class Process : public QObject {
    public:
        Process(){}

    public slots:
        void process() {
            // Do some work
            Singleton::getInstance()->setItems(someitems);
        }
};

class Singleton : public QObject {
    public:
        Singleton(){}

        Singleton* getInstance() {
            return instance;
        }

        void setitems(Items) {
            //Set items
            emit itemsset();
        }

    signals:
        void itemsset(Items);
};

class ShowResult : public QObject {
    public:
        ShowResult(){}

    public slots:
        void showresult(Items) {
            //THIS Slot is not called...
        }
} 
```

谢谢你的帮助...

# javascript - 无法从 asp 按钮调用 blockUI 函数

> ID：14202823
> 
> 赞同：0
> 
> 时间：2013-01-07T19:37:04.107
> 
> 标签：javascript, asp.net, vb.net, jquery-blockui

首先，它确实可以作为常规按钮工作：

```
<input type="button" value="Block" id="btnBlock" name="btnBlock"/> 
```

但我还需要处理 asp:button，我试过这个：

```
<asp:Button ID="btnBlock" runat="server" Text="Block" OnClientClick="btnClick"/> 
```

但它不起作用，只是发送一个 JS 错误（已编辑）：

> Microsoft JScript 运行时错误：“btnBlock”未定义

我的 JS blockUI 函数：

```
<script language="javascript" type="text/javascript">
$(document).ready(function() {
   $('#btnBlock').click(function() {
        $.blockUI({ message: $('#myForm') });
    });
});
</script> 
```

我也试过将blockUI函数改成这个，但它似乎不起作用，它无法识别脚本中的asp代码：

```
<script language="javascript" type="text/javascript">
$(document).ready(function() {
   $('#<%= btnBlock.ClientID %>').click(function() {
        $.blockUI({ message: $('#myForm') });
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:54:37.990

在你的 asp 按钮标记中，你有

```
OnClientClick="btnClick" 
```

这将设置在引发 Button 控件的 Click 事件时执行的客户端脚本。那就是触发的事件会寻找一个名为 btnClick 的 javascript 函数。问题是您正在通过 jQuery $(selector).click(someFunction); 连接点击事件。以及在 OnClientClick 事件中。

更改 asp 按钮控件以删除 OnClientClick 事件：

```
<asp:Button ID="btnBlock" runat="server" Text="Block" /> 
```

保持 javascript 相同。

# google-maps - 为所有标记和标记簇自动打开 Google 地图信息窗口

> ID：14202825
> 
> 赞同：2
> 
> 时间：2013-01-07T19:37:26.510
> 
> 标签：google-maps, google-maps-api-3, markerclusterer

我使用 Google Maps api v3 版本创建了 Google Map。这是“标准”谷歌地图，充满了标记和集群。每个标记和集群都有自己的信息窗口，当最终用户单击它时显示。

我需要的是，当加载地图时，打开地图上显示的所有标记和集群的所有 InfoWindows。

现在，只有当我点击它们时才会显示它们：

```
google.maps.event.addListener(markerGreenCluster, 'clusterclick', function(markerGreenCluster) {

  var content = '';
  var info = new google.maps.MVCObject;
  info.set('position', markerGreenCluster.center_);
  var infowindow = new google.maps.InfoWindow();
  aIWgreen.push(infowindow);
  var center = markerGreenCluster.getCenter();
  var size = markerGreenCluster.getSize();
  var markers = markerGreenCluster.getMarkers();

  // more code goes here...

}) 
```

我注意到问题出在集群定义中，并且方法**`markerGreenCluster.getSize();`**它返回已抓取标记的数量，并且它可以在加载整个地图后返回它，或者类似的东西。

您能帮我在加载地图时如何实现所有 InfoWindows 都打开（显示）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:11:52.510

为此，我要做的是创建一个 InfoWindows 对象并将其存储到标记中。像这样的东西

```
function CreateMarker(Lat, Lng, Title, Content) {
  var aInfoWin = new google.maps.InfoWindow({
    content: Content,
    position: new google.maps.LatLng(Lat,Lng)
    });

  var aMarker = new StyledMarker({
    title: Title,
    position: new google.maps.LatLng(Lat,Lng),
    MyInfoWin: aInfoWin
    });

  aMarker.MyInfoWin.open();
} 
```

您可以像访问其他属性一样访问您喜欢的标记信息窗口（事件、代码......）。

未经测试的代码，只是为了得到这个想法

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T09:09:33.357

infowindows 仅在单击时打开，因为您仅在单击事件侦听器上创建它们。将创建信息窗口的代码从单击处理程序中移出，改为窗口加载事件处理程序。

# android - 如何从Android中的另一个应用程序关闭/发送到后台活动？

> ID：14202827
> 
> 赞同：2
> 
> 时间：2013-01-07T19:37:29.157
> 
> 标签：android, process, android-activity

我正在尝试构建一个像 Android 应用程序一样的 AppLock，但我遇到了一个难题（对我来说）：我设法通过轮询系统日志来检测给定应用程序何时启动，并将锁定屏幕放在前面启动的应用程序。我的问题是：例如，如果为锁定屏幕提供了无效密码或在输入密码之前按下了后退按钮，我如何解除必须保护的已启动活动（当然还有锁定屏幕）？我尝试使用具有正确包名称的 killBackgroundProcess ，但它似乎不起作用，我在任何地方都找不到相关答案。

还有一个问题：是否有可能以某种方式完全阻止应用程序启动，形成我的应用程序而不是覆盖它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T08:23:39.980

好吧，我找到了一个像魅力一样的替代解决方案！如果提供了无效密码（例如），我不会关闭被阻止的应用程序，而是将手机的主屏幕带到前面，它会隐式地将被阻止的应用程序发送到后台。希望它能帮助其他有同样问题的人。

# url - 是否可以从 firefox 插件操作 url 栏中的文本？

> ID：14202828
> 
> 赞同：0
> 
> 时间：2013-01-07T19:37:31.663
> 
> 标签：url, firefox, firefox-addon, browser

我正在开发一个必须将选定文本复制到 url 栏的小型 firefox 插件。我尝试了这段代码来测试如何操作 url 栏：

```
gBrowser.selectedBrowser.currentURI =  Services.io.newURI("about:home", null, null); 
```

但这似乎没有任何作用，有没有人有关于如何操作 url 栏文本的示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T03:29:25.267

我最好的猜测是它无法完成。我基于搜索中相关结果的缺乏`awesomebar methods properties`，以及想象如果 Mozilla 确实使 AwesomeBar 可写会发生的[恶作剧类型。](http://www.fraudwatchinternational.com/phishing-fraud/phishing-web-site-methods/#hover)此外， [Mozilla 将](https://developer.mozilla.org/en-US/docs/XUL/Property/selectedBrowser) `selectedBrowser`您在上面的部署描述为“只读属性”。

我能想到的最好的建议是 Helbrax[对那个特殊轮子](http://www.codeproject.com/Articles/27079/JavaScript-Awesome-Bar)的重新发明。

根据您要完成的任务，*[更改自动完成行为 - Firefox](http://kb.mozillazine.org/Changing_autocomplete_behavior_-_Firefox)*可能会有所帮助。

# java - 在 mySQL 或 mongo 等数据库中流口水知识

> ID：14202829
> 
> 赞同：0
> 
> 时间：2013-01-07T19:37:32.457
> 
> 标签：java, drools

我们有可以存储在数据库中的 Drools 知识我可以在 Drools 中使用数据库表来存储知识吗？目前我们使用电子表格。如果您需要更多信息，请告诉我提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:25:28.543

这似乎与[Drools 有关：在数据库中存储规则](https://stackoverflow.com/questions/4392664/drools-storing-rules-in-database)。请看另一篇文章。它可能会回答你的问题。希望这可以帮助。

# php - 从 php mysql 转换为 mysqli mysqli_fetch_array

> ID：14202831
> 
> 赞同：2
> 
> 时间：2013-01-07T19:37:37.943
> 
> 标签：php, mysqli

我正在将程序从 mysql 库转换为 mysqli。

编辑：更多上下文

我有以下代码调用一个类

```
case "purchasing";
    $tab = 'purchasing';
    require $classes . 'purchasing.php';
    $purchases = new Purchase_list($search_term, $scope);
    require $templates . 'header.php';
    require $templates . 'purchasing.php';
    break; 
```

下面包含 get_result 的类是 Purchase_list Purchase list 基本上确定要从数据库中检索哪些行，运行查询并将结果分配给 $this->result

这部分显然是有效的，因为我有一个有效的结果。然后 $templates 。'采购.php'; 显示这些结果。

出于故障排除的目的，purchase.php 仅包含

```
while ($row = $purchases->get_result()) {

} 
```

我在一个看起来像这样的类中有一个函数

```
function get_result() {

    $results = mysqli_fetch_array($this->result);        
    if($results === FALSE) {
        return false;
    }else {
        $results['OPENAMT'] = ($results['Puramt'] - $results['Recamt']);

        return $results;
    }

} 
```

如果我注释掉 $results['OPENAMT'] 代码，一切正常，没有注释该代码会导致浏览器请求超时。此代码使用 mysql 扩展而不是 mysqli

任何人都可以阐明这里实际发生的事情。

$results 上的 var_dump 在尝试返回之前给出

```
array(11) {
  [0]=> string(5) "23074"
  ["Purno"]=> string(5) "23074"
  [1]=> string(3) "AEC"
  ["Vendno"]=> string(3) "AEC"
  [2]=> string(10) "11/28/2012"
  ["Purdate"]=> string(10) "11/28/2012"
  [3]=> string(4) "0.00"
  ["Puramt"]=> string(4) "0.00"
  [4]=> string(4) "0.00" 
  ["Recamt"]=> string(4) "0.00"
  ["OPENAMT"]=> float(0)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:10:19.597

我不完全知道你为什么会遇到这个问题，但我希望这可能会有所帮助。

而当没有更多行要获取时`mysql_fetch_array`返回，则返回.`FALSE``mysqli_fetch_arrays``NULL`

`$results`从来没有，`=== FALSE`而且您总是会进入`else`街区，并且可能会返回一些垃圾并发出警告。

结果，`while`循环调用`get_result()`永远不会结束，因为我没有得到`false`它，而是*我不知道是什么*。

# java - 深拷贝，JUnit 测试 Java

> ID：14202833
> 
> 赞同：1
> 
> 时间：2013-01-07T19:37:56.327
> 
> 标签：java, junit, deep-copy

我正在尝试执行一个对象的深层副本，然后在不更改原始对象的情况下修改新对象。为了测试功能，我使用 JUnit 来确保功能正常工作。

目前的测试基本上是抄袭《质量效应3》游戏并更改当前配音演员。

游戏课

```
@Override
protected Object clone(){
    Game obj = new Game(getTitle(), getLeadVoiceActor(), getRating());
    return obj;
} 
```

JUnit 测试

```
@Before
public void setUp() {
    p1 = new Person("Mark", "Meer");
    g1 = new Game("Mass Effect 3", p1, 5);
}

@Test
public void testClone() throws CloneNotSupportedException {
    //This works
    Game g2 = (Game)g1.clone();
    assertEquals(g2, g1);
    assertNotSame(g2, g1);

    //This doesn't even though the lead voice actor is now different
    p1 = g1.getLeadVoiceActor();
    p1.setFirstName("Jennifer");
    p1.setLastName("Hale");
    assertFalse(g2.equals(g1));
    assertEquals("Jennifer Hale", g1.getLeadVoiceActor().toString());
    assertEquals("Mark Meer", g2.getLeadVoiceActor().toString());
} 
```

测试因 junit.framework.assertionfailederror 而失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T19:53:30.893

如果你的问题是：*为什么原版游戏中的人和克隆游戏中的人是一样的？*，那么答案就是你不是深克隆而是浅克隆。

调用`getLeadVoiceActor()`并将结果分配给克隆游戏会将对该人的*引用*传递给克隆游戏。它不会复制任何内容。要制作副本，您需要

```
protected Object clone(){
    Game obj = new Game(getTitle(), (Person) getLeadVoiceActor().clone(), getRating());
    return obj;
} 
```

或者

```
protected Object clone(){
    Game obj = new Game(getTitle(), 
                        new Person(getLeadVoiceActor().getFirstName(), getLeadVoiceActor().getLastName()), 
                        getRating());
    return obj;
} 
```

请注意，`clone()`不鼓励使用 复制构造函数。如果你实现克隆，那么你应该使用`super.clone()`.

另请注意，如果 Person 是不可变的，则不必克隆它。

# python - Plone/Python 创建用户帐户

> ID：14202834
> 
> 赞同：2
> 
> 时间：2013-01-07T19:38:02.030
> 
> 标签：python, plone, user-accounts

我有一个 Plone 实例（4.2.2）正在运行，需要自动创建用户帐户。我真的很想使用外部 Python 脚本或其他一些基于 Linux 的命令行实用程序（例如“curl”）来执行此操作。

如果我使用 curl，我可以进行身份​​验证以访问“@@new_user”页面，但我似乎无法在标题中获得正确的 POST 设置。

如果我不使用 curl 而是使用 Python 脚本，是否有任何实用程序或库可以做到这一点？我尝试过使用诸如`Products.CMFCore.utils.getToolByName`“portal_registration”之类的库 - 但我似乎无法让它在常规脚本（没有请求/上下文的脚本）中工作。

该脚本需要在服务器上每 N 分钟运行一次（用户信息是从外部数据库中获取的）。我还需要没有密码 - 并选择向用户发送电子邮件以设置他们自己的密码的选项，并且我需要将此用户添加到预定义的组中。

有什么建议——也许是另一个更能满足这些要求的实用程序或内置库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T15:48:59.347

有许多脚本用于批量导入用户。一个很好的是 Tom Lazar 的 CSV 导入[http://plone.org/documentation/kb/batch-adding-users](http://plone.org/documentation/kb/batch-adding-users)。如果您需要从命令行运行 Tom 的脚本，例如作为 cron 作业，可以很容易地将 Tom 的脚本调整为作为 Zope“运行”脚本运行。“运行”脚本是使用 Zope 或 ZEO 客户端实例通过“bin/client5 run my_script.py”等命令处理的脚本。

然而，这样的策略是单向的。这听起来像是您与 Martijn 的对话，您可能会通过创建一个可插入的身份验证系统 (PAS) 插件来提供与外部数据库源的连接来获得更好的效果。这种策略的好处是您可以非常精确地确定哪些用户属性具有哪些来源（外部数据库或 Plone 成员属性管理器）。文档（如 MJ 所示）位于[http://plone.org/documentation/manual/developer-manual/users-and-security/pluggable-authentication-service/referencemanual-all-pages](http://plone.org/documentation/manual/developer-manual/users-and-security/pluggable-authentication-service/referencemanual-all-pages)。

确保查看是否已经为您的外部数据源编写了插件。已经有许多身份验证方案和数据库的插件（如 LDAP 和 SQLAlchemy）。

# .net - Tasks.Future.Create 是什么/在哪里，它的等价物是什么？

> ID：14202835
> 
> 赞同：0
> 
> 时间：2013-01-07T19:38:07.043
> 
> 标签：.net, multithreading, f#, task

我正在查找[有关 F# 优化的这篇文章，](http://flyingfrogblog.blogspot.nl/2009/07/ocaml-vs-f-burrows-wheeler.html)并对提及`Tasks.Future.Create`. 它似乎在未来创建一个任务，并且似乎遵循[Futures 和 Promise](http://en.wikipedia.org/wiki/Futures_and_promises)模式。在其他一些地方也提到了相同的方法，例如在[基准测试 F#、Java、C# 的这个线程中](http://www.microsoftfaqs.com/msg/144633051.aspx)，它也在 F# 代码中使用。

我想知道，上述 F# 代码是否会复制到此处以供参考，以防链接失效，与类似的东西完全相同`Tasks.Task<T>`，还是我应该使用不同的线程原语？

```
open System.Threading

let inline sort cmp (a: _ array) =
  let inline swap i j =
    let t = a.[i]
    a.[i] <- a.[j]
    a.[j] <- t
  let rec qsort l u =
    if l < u then
      swap l ((l + u) / 2)
      let mutable m = l
      for i=l+1 to u do
        if cmp a.[i] a.[l] < 0 then
          m <- m + 1
          swap m i
      swap l m
      if u-l > 1000 then
        let m = m
        let f = Tasks.Future.Create(fun () -> qsort l (m-1))
        qsort (m+1) u
        f.Value
      else
        qsort l (m-1)
        qsort (m+1) u
  qsort 0 (a.Length-1)

let inline cmp (str: _ array) i j =
  let rec cmp i j =
    if i=str.Length then 1 else
      if j=str.Length then -1 else
        let c = compare str.[i] str.[j] in
        if c<>0 then c else
          cmp (i+1) (j+1)
  cmp i j

let bwt (str: byte array) =
  let n = str.Length
  let a = Array.init n (fun i -> i)
  sort (fun i j -> cmp str i j) a
  Array.init n (fun i -> str.[(a.[i] + n - 1) % n]) 
```

注意：我猜这是 TPL 预览版中的一种方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T20:12:40.197

你是对的。它可以追溯到一篇关于[任务并行库设计的](http://research.microsoft.com/apps/pubs/default.aspx?id=77368)论文。引用论文的相关部分：

> Futures 是任务的变体，其中关联的操作计算结果：
> 
> ```
> delegate T Func<T>();
> class Future<T> : Task{
>   Future (Func<T> function);
>   T Value{ get; } // does an implicit wait
> } 
> ```
> 
> 未来由具有 Func 类型的委托构造，其中 T 是委托的返回类型。未来的结果是通过 Value 属性检索的，该属性在内部调用 Wait 以确保任务已完成并已计算出结果值。由于调用了 Wait ，因此调用 Value 将抛出在计算未来值期间引发的任何异常。可以将期货视为返回结果值或异常值。

现在在 TPL 中，您可以使用[Task](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)类完成所有操作。正如@Daniel 所说，您的示例可以写成：

```
let f = Task.Factory.StartNew(fun () -> qsort l (m-1))
qsort (m+1) u
f.Result 
```

我认为当你有一个具有复杂依赖关系的任务图时，未来模式会更加有用。[您可能想在优秀的Parallel Programming with Microsoft .NET](http://msdn.microsoft.com/en-us/library/ff963556.aspx)（其中包含许多优秀的[F# 示例](http://parallelpatterns.codeplex.com/SourceControl/changeset/view/69940#812665)）一书中了解有关该模式的更多信息。

# c - sizeof 未显示预期输出

> ID：14202839
> 
> 赞同：7
> 
> 时间：2013-01-07T19:38:15.573
> 
> 标签：c, structure, sizeof, bit-fields

```
#include <stdint.h>
#include <stdio.h>

typedef union {
    uint64_t u[2];
    struct {
        uint64_t a:30;
        uint64_t b:30;
        uint64_t c:30;
        uint64_t d:30;
        uint64_t e:8;
    }x;
} mystruct;

int main()
{
    printf("Size %d\n", sizeof(mystruct));
} 
```

我正在尝试在 64 位机器上编译它。预期的输出是 16，但我得到了 24。我知道这里发生了一些对齐，但我不确定为什么 struct x 正好是 16 个字节。有人可以解释一下吗。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T19:43:03.510

来自 C 标准：

> （C99，6.7.2.1p10）“[...] 如果剩余空间不足，不适合的位字段是否被放入下一个单元或与相邻单元重叠是实现定义的。”

因此，在您的实现中，它们不会重叠：`a`并且`b`成员在一个单元中，`c`并且`d`在另一个单元中，并且`e`在另一个单元中：`8 + 8 + 8 = 24`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-07T19:44:11.697

对于 64 位机器，字段`a`并`b`使用结构体中第一个 64 位值的 60 位，`c`并`d`使用结构体中下一个 64 位值的 60 位，然后因为`e`是 8 位它不能放入该 64 位值剩余的 4 位，因此需要另一个 64 位值。因此 8x3 = 24 字节。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-07T19:45:18.523

位字段的元素永远不会重叠两个内存“单元”（在您的情况下，内存单元是 64 位元素）。

除了位域实现依赖于编译器这一事实之外，您的位域结构很可能实际上以以下方式存储在内存中：

```
struct {
    uint64_t a:30;
    uint64_t b:30;
    uint64_t :4;
    uint64_t c:30;
    uint64_t d:30;
    uint64_t :4;
    uint64_t e:8;
    uint64_t :56;
}x; 
```

# iis-7 - ASP.Net MVC Intranet App 在通过 IIS 运行时不断提示凭据

> ID：14202840
> 
> 赞同：1
> 
> 时间：2013-01-07T19:38:16.987
> 
> 标签：iis-7, asp.net-mvc-4, windows-authentication

我正在尝试设置一个 ASP.Net MVC 4 Intranet 应用程序以使用 Windows 身份验证。如果我通过 VisualStudio 的开发服务器运行应用程序，它就可以工作。但是，如果我尝试通过 IIS 7 访问该站点，则始终提示用户输入凭据。这是我的网络配置：

```
 <system.web>
    <authentication mode="Windows" />
    <authorization>
        <deny users="?" />
    </authorization>
</system.web> 
```

我还禁用了匿名身份验证并在 IIS 管理器中启用了 Windows 身份验证。为了使我的网站通过 IIS 工作，我缺少什么？

# c# - 谷歌地图监听器从外部链接打开个人信息窗口

> ID：14202843
> 
> 赞同：1
> 
> 时间：2013-01-07T19:38:28.123
> 
> 标签：c#, asp.net, google-maps-api-3

我有一个谷歌地图，可以从 linq 源正确地绘制我的位置。我还可以单击标记以查看信息窗口中的内容。

在标记了我所有位置的地图下方，我显示了标记位置数据的列表。我想从该数据创建一个链接，该链接将在地图上打开相应标记的信息窗口。我只能在加载页面时显示所有标记，但不能显示单个标记。

```
 var currentlyOpenedInfoWindow = null;

function init_map(map_canvas_id, lat, lng, zoom, markers, infoWindowContents) {
    var myLatLng = new google.maps.LatLng(lat, lng);

    var options = {
        zoom: zoom,
        center: myLatLng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var map_canvas = document.getElementById(map_canvas_id);

    var map = new google.maps.Map(map_canvas, options);

    if (markers && markers.length > 0) {
        var bounds = new google.maps.LatLngBounds();

        for (var i = 0; i < markers.length; i++) {
            var marker = new google.maps.Marker(markers[i]); 

            marker.setMap(map);

            bounds.extend(marker.getPosition());

            if (infoWindowContents && infoWindowContents.length > i)
                createInfoWindow(map, marker, infoWindowContents[i]);

        }

        map.fitBounds(bounds);
        map.setCenter(bounds.getCenter());

    }   
}

function createInfoWindow(map, marker, infoWindowProperties) {
    var info = new google.maps.InfoWindow(infoWindowProperties);

    google.maps.event.addListener(marker, 'click', function() {
        if (currentlyOpenedInfoWindow != null)
            currentlyOpenedInfoWindow.close();

        info.open(map, marker);
        currentlyOpenedInfoWindow = info;

    });

} 
```

数据是从我的页面后面的代码中调用的，并绘制为：

```
// Loop through each nearby location and build up the JavaScript to place the markers
            var locations = new List<string>();
            var infoWindowContents = new List<string>();

            DataView nearbyLocations = schoolData_Record.DefaultView;
            var count = 1;

            foreach (DataRowView location in nearbyLocations)
            {
                locations.Add(string.Format(
                                @"{{ 
                                                title: ""{0}"", 
                                                position: new google.maps.LatLng({1}, {2}),
                                                icon: ""../../Frontend/Images/v2/GoogleMaps/NumberToImageHandlerCS.ashx?number={3}""
                                            }}",
                                   location["Name"],
                                   location["Latitude"],
                                   location["Longitude"],
                                   count
                                )
                              );

                infoWindowContents.Add(string.Format(
                                @"{{ 
                                                content: ""<div class=\""infoWindow\""><b>Store #{0}</b><br />{1}<br />{2}, {3} {4}</div>""
                                            }}",
                                   location["Name"],
                                   location["StreetAddress"],
                                   location["city"],
                                   location["State"],
                                   location["Zipcode"]
                                )
                           );

                count++;

            }

            var locationsJson = "[" + string.Join(",", locations.ToArray()) + "]";
            var overlayContentsJson = "[" + string.Join(",", infoWindowContents.ToArray()) + "]";

            // Inject the Google Maps script
            ClientScript.RegisterStartupScript(this.GetType(), "Google Maps Initialization",
                                               string.Format("init_map('map_canvas', {0}, {1}, 13, {2}, {3});", lat, lng, locationsJson, overlayContentsJson), true);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T20:11:29.713

我遇到了同样的麻烦——你需要在一个外壳中创建标记——这是我在我的项目中使用的代码，你应该能够从中破解它。

```
var markers = new Array();
var markerLatLongs = new Array();
var markerBounds = new google.maps.LatLngBounds( );
var infoWindows = new Array();

function initialize() {
    var mapOptions = {
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById('map'),
        mapOptions);
    bPolygon.setMap(map);
    map.fitBounds( bLatLongBounds );

    createMarkers();
    createInfoWindows();
}

function createMarkers() {
    for (var j = 0; j < sites.length; j++)
    {
        var osRef = new OSRef(sites[j].easting, sites[j].northing);
        var latLong = osRef.toLatLng();
        markerLatLongs[j] = new google.maps.LatLng(latLong.lat.toFixed(6),latLong.lng.toFixed(6))
        markerBounds.extend(markerLatLongs[j]);
        markers[j] = new google.maps.Marker({
            position: markerLatLongs[j],
            map: null,
            title: sites[j].siteName
        });    

    }

}

function createInfoWindows() {
    for (var i = 0; i < sites.length; i++) {
        (function(i){
           infoWindows[i] = new google.maps.InfoWindow({maxWidth:200, content: '<div class="info-window-content"><strong>'+sites[i].siteName+'</strong><p>'+sites[i].summary+'</p><a class="green-link" href="http://'+sites[i].url+'" target="_blank">Read more...</a></div>'});
           google.maps.event.addListener(markers[i], 'click', function(e) {
              infoWindows[i].open(map, this);
           });
        })(i);
    }
} 
```

# python - Flask 请求是否在另一个请求开始之前运行完成？

> ID：14202844
> 
> 赞同：3
> 
> 时间：2013-01-07T19:38:35.370
> 
> 标签：python, flask

我问是因为我想知道是否可以使用文本文件作为简单应用程序的数据存储。如果每个处理程序都运行完成，那么我应该能够在该请求期间修改文本文件而不必担心冲突，假设我在每个请求结束时关闭文件。

这可行吗？为了将文本文件用作 Flask 应用程序中的数据存储，我需要做些什么特别的事情吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T20:09:03.290

归根结底，一个 Flask 应用程序就是一个[WSGI](http://www.python.org/dev/peps/pep-0333/)应用程序，这意味着它只是一个看起来像这样的 Python 函数......

```
def simple_app(environ, start_response):
    # environ is a dict, start_response is a callable.
    # This function should call start_response, then return an iterable of strings
    # that make up the body of the response. 
```

Flask 以调用flask 包中的许多其他函数的方式实现此功能，最终将控制权交给您。到那时，数据结构已经发生了变化，但整个过程只是一种轻松编写正确实现这一功能的代码的方法。

此函数由 Web 服务器调用（有时使用某些模块，例如 Apache 的[modwsgi](http://code.google.com/p/modwsgi/)模块）。当然，这个宏大的函数必须加载到 Python 的某个实例中才能被调用。

假设您的 Web 服务器有一个 wsgi 模块。当 Web 服务器启动时，该模块将创建一个最多具有四个线程的 Python 进程。当一个新请求进来时，它会抓取一个未使用的线程，并在其上调用上述函数。然后，Flask 的所有其余部分和您的应用程序代码都被调用，仍然在该线程中。然而，另一个请求调用了相同的函数，但现在在另一个线程中。之所以能这样，是因为 Flask 已经明确地让在这样的多线程模式下运行成为可能，但是 Flask 实际上并没有控制它是否在多个线程中运行。当然，一个进程和四个线程是完全任意的：您的服务器可以很好地使用多个进程和十几个线程。或者一个进程一个线程。

所以，真正的答案与 Flask 无关，因为 Flask 只是一个使用 WSGI 协议编写的应用程序。[关于多线程](http://www.python.org/dev/peps/pep-0333/#thread-support)状态的WSGI 协议决策...

> 线程支持或缺乏线程支持也依赖于服务器。可以并行运行多个请求的服务器还应该提供以单线程方式运行应用程序的选项，以便非线程安全的应用程序或框架仍然可以与该服务器一起使用。

因此，如果您真的希望在单线程模式下运行 Flask 应用程序，则需要查看您的特定服务器和/或模块以了解 WSGI 应用程序是如何运行的。服务器/模块可能有办法将您的应用程序配置为在单个线程中运行。

Regarding whether forcing a single-threaded system and storing items in a text file is a good idea, that's pretty subjective.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T19:42:21.457

我相当肯定没有任何保证。但是，这取决于您运行应用程序的方式。例如，如果您使用 Heroku+gunicorn，则不会保留 Heroku 上在请求期间更改的所有文件，即文件是短暂的。因此，如果您要更改文本文件，更改将不会持续到下一个请求。另一个提供者 PythonAnywhere 对他们的文件系统没有那么严格，但同样，请求不能保证在下一个开始之前完成一个请求。此外，对于现代 Web 服务器，这将是一个无用的应用程序（或更准确地说是服务器）。

此外，如果您想要一个小型数据库，只需使用 sqlite。只要它安装在系统上，python 就带有一个与之交互的库（如果我没记错的话）。

# c# - 如何动态修改 .exe.manifest？

> ID：14202845
> 
> 赞同：1
> 
> 时间：2013-01-07T19:38:50.643
> 
> 标签：c#, permissions, manifest, executable, system-administration

我有一个 exe 清单，VS 嵌入到 exe 中。但是我处于需要动态修改它的情况。这可能吗？

# oracle - 无法启动 Oracle

> ID：14202846
> 
> 赞同：0
> 
> 时间：2013-01-07T19:39:13.233
> 
> 标签：oracle, oracle11g

我在 Centos 6.3 上安装了最新版本的 Oracle 11g。但由于某种原因，我无法连接到 SQL plus。这是 listener.ora 的内容：

```
# listener.ora Network Configuration File: /u01/app/oracle/product/11.2.0/dbhome_1/network/admin/listener.ora
# Generated by Oracle configuration tools.

LISTENER =
  (DESCRIPTION_LIST =
    (DESCRIPTION =
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1521))
      (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.1.104)(PORT = 1521))
    )
  )

ADR_BASE_LISTENER = /u01/app/oracle 
```

我在 shell 中输入：

```
[oracle@localhost bin]$ ./lsnrctl start

LSNRCTL for Linux: Version 11.2.0.1.0 - Production on 07-JAN-2013 21:37:32

Copyright (c) 1991, 2009, Oracle.  All rights reserved.

Starting /u01/app/oracle/product/11.2.0/dbhome_1//bin/tnslsnr: please wait...

TNSLSNR for Linux: Version 11.2.0.1.0 - Production
System parameter file is /u01/app/oracle/product/11.2.0/dbhome_1/network/admin/listener.ora
Log messages written to /u01/app/oracle/diag/tnslsnr/localhost/listener/alert/log.xml
Listening on: (DESCRIPTION=(ADDRESS=(PROTOCOL=ipc)(KEY=EXTPROC1521)))
Listening on: (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=192.168.1.104)(PORT=1521)))

Connecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=IPC)(KEY=EXTPROC1521)))
STATUS of the LISTENER
------------------------
Alias                     LISTENER
Version                   TNSLSNR for Linux: Version 11.2.0.1.0 - Production
Start Date                07-JAN-2013 21:37:32
Uptime                    0 days 0 hr. 0 min. 0 sec
Trace Level               off
Security                  ON: Local OS Authentication
SNMP                      OFF
Listener Parameter File   /u01/app/oracle/product/11.2.0/dbhome_1/network/admin/listener.ora
Listener Log File         /u01/app/oracle/diag/tnslsnr/localhost/listener/alert/log.xml
Listening Endpoints Summary...
  (DESCRIPTION=(ADDRESS=(PROTOCOL=ipc)(KEY=EXTPROC1521)))
  (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=192.168.1.104)(PORT=1521)))
The listener supports no services
The command completed successfully
[oracle@localhost bin]$ 
```

然后我尝试启动 SQL 加上这个：

```
[oracle@localhost bin]$ ./sqlplus sys@oracle AS SYSDBA

SQL*Plus: Release 11.2.0.1.0 Production on Mon Jan 7 21:38:27 2013

Copyright (c) 1982, 2009, Oracle.  All rights reserved.

Enter password: 
ERROR:
ORA-12154: TNS:could not resolve the connect identifier specified

Enter user-name: 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:44:41.977

确保 $TNS_ADMIN 指向 tnsnames.ora 和 sqlnet.ora 所在的目录。

# tree - 如何重新加载树的选定节点

> ID：14202847
> 
> 赞同：7
> 
> 时间：2013-01-07T19:39:23.563
> 
> 标签：tree, extjs4, reload, treenode

删除节点的一​​个叶子后，我需要重新加载树。重新加载整个商店的问题是，它太慢了。这就是为什么我只想重新加载一个删除其叶子的节点。

我试过这个..但它说空...

```
Ext.getCmp('myTree').root.reload(); 
```

我也试过

```
var tempParent = Ext.getCmp('myTree').getSelectionModel().getSelection()[0].parentNode;
Ext.StoreMgr.lookup('myStore').load( {node: tempParent}); 
```

这也无济于事......有没有人有类似的问题已经解决？

**更新**

```
var node = Ext.getCmp('myTree').getSelectionModel().getSelection()[0].parentNode.get('id'); 
```

这确实给了我父节点......但是当我加载它时

```
Ext.getCmp('myTree').store.load({ node: node }); 
```

我收到这个错误

> TypeError：b.getId 不是函数

**第二次更新——**

这就是我的树的样子

*   第一个节点

    *   第一片叶子
*   第二节点

    *   第一片叶子

现在，当我删除第二个节点的第一个叶子时......第一个节点出现在第二个节点下

*   第一个节点

    *   第一片叶子
*   第二节点

    *   第一个节点

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T00:40:08.157

以下是如何刷新树的特定节点。在您的情况下，您可能希望刷新需要显示更改的父节点：

```
 refreshRow:function(id){
        var node = this.store.getNodeById(id);
        if (node){
            this.store.load({node:node});
        }
     } 
```

**更新**

根据您提供的信息，我的结论是您正在尝试在树中的多个位置使用特定服务器生成的 ID 填充相同的节点。树商店不支持这一点。即使其余节点信息相同，每个节点也必须具有唯一的 ID。

# ruby-on-rails - 扩展 Spree::Product 型号/类别

> ID：14202851
> 
> 赞同：5
> 
> 时间：2013-01-07T19:39:34.640
> 
> 标签：ruby-on-rails, e-commerce, spree

我在我的 Rails 3.2 应用程序中使用 Spree，我想扩展 Spree 的 Product 类以更好地满足我的需求，例如与我的应用程序中的另一个模型建立关系。最好的方法是什么？我在项目文档中找不到任何关于它的信息

如果我想向 Product 资源添加新的属性/字段怎么办？我也找不到它的迁移：/

提前致谢 ：）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-07T19:42:19.300

最好的办法是`product_decorator.rb`在您的应用程序中创建一个。

这将如下所示：

```
Spree::Product.class_eval do
  ...
end 
```

在那里，您可以随意修改您想要的任何内容！

[这是相关](https://guides.spreecommerce.org/developer/customization/logic.html)的文档。

要将新字段添加到现有模型，请运行如下迁移：

```
# migration
class AddSubscribableFieldToVariants < ActiveRecord::Migration
  def change
    add_column :spree_variants, :subscribable, :boolean, default: false
  end
end 
```

然后在模型中添加以下内容：

```
# spree/variants_decorator.rb
Spree::Variant.class_eval do
  attr_accessible :subscribable
end 
```

# asp.net - asp.net 页面中的事件

> ID：14202855
> 
> 赞同：0
> 
> 时间：2013-01-07T19:39:44.277
> 
> 标签：asp.net, events

我想在用户离开页面时执行查询。当用户离开页面时，asp.net 页面中是否有任何事件发生？非常感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T19:46:05.747

不，当用户离开页面时没有服务器事件，因为用户并没有真正“进入”页面。服务器向浏览器发送一个页面，然后浏览器显示它，服务器不知道浏览器中发生了什么。

您可以在浏览器中捕获`onbeforeunload`，它在浏览器即将加载新页面时触发。但是请注意，它也会在回发时触发，因此您可能必须跟踪正在发生的事情以确定用户是否真的要转到不同的页面。

另请注意，该`onbeforeunnload`事件不是标准的，因此可能并非每个浏览器都支持它。

# css - 背景图像：for :visited links？

> ID：14202856
> 
> 赞同：6
> 
> 时间：2013-01-07T19:39:48.097
> 
> 标签：css, css-selectors

是否可以将 background-image: 属性添加到访问的链接？

```
 a.coolLinks:visited{
     background-image:url("http://www.ledr.com/colours/black.jpg");
} 
```

谢谢

编辑：所以看起来这是一个安全漏洞，这就是为什么它不能完成。没有迹象表明浏览器阻止了这种 CSS 样式。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-07T19:42:56.793

根据大多数规范，您的代码是正确的。但是，[许多浏览器](https://hacks.mozilla.org/2010/03/privacy-related-changes-coming-to-css-vistited/)认为访问链接上的背景图像可能侵犯用户隐私，因此不允许这样做。

观察这个例子：

```
<p><a href="/unvisited">Unvisited link</a></p>

<p><a href="http://jsfiddle.net/">Visited Link</a></p>

<style>
a {
  background:red url("http://placekitten.com/100/101?image=2") center center no-repeat;
  display: block;
  height: 200px;
  width: 200px;
  overflow: hidden;
  text-align: center;
  background-color: red;
}

a:visited {
  background:blue url("http://placekitten.com/100/100?image=1") center center no-repeat;
}
</style> 
```

（也在[http://jsfiddle.net/Yq5GY/1/](http://jsfiddle.net/Yq5GY/1/)）。Firefox 忽略访问链接的背景图像声明，并且从不显示独奏小猫。**您可以使用背景颜色**进行一些区分。无论如何，仅依赖图像的可用性很差。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T19:54:17.827

正如@KatieK 所建议的那样，大多数浏览器不允许将背景图像 [甚至像背景颜色这样的其他规则] 设置为`:visited`链接，因为这是一个隐私问题。您可以使用以下链接阅读它：

1.  [隐私相关更改](http://hacks.mozilla.org/2010/03/privacy-related-changes-coming-to-css-vistited/)
2.  [报告的错误](https://bugzilla.mozilla.org/show_bug.cgi?id=147777#c160)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T20:03:00.923

[:visited 的 MDN 规范](https://developer.mozilla.org/en-US/docs/CSS/%3avisited)，你会注意到 background-image 是不允许的。

# java - 如何在 iframe 中显示临时文件？

> ID：14202859
> 
> 赞同：1
> 
> 时间：2013-01-07T19:39:59.037
> 
> 标签：java, jsf, jasper-reports

我正在使用 Java、Jasper Reports 和 JSF。我想生成 PDF 格式的报告，并且可以以`iframe`类似的方式显示它，因为在同一页面上能够将过滤器放入报告等等..即使我粘贴报告，报告也会正确生成为临时文件浏览器中的路径将显示正确。但是将该路由放入 iframe 中，我收到以下错误：

```
Not allowed to load the local resource: file :/ / / C :/ Users / Juanes ~ 1/AppData/Local/Temp/reportePedidosTemporal1922509630584311367.pdf 
```

这是我的代码：

```
public void prueba(AjaxBehaviorEvent evento)
{
    try
    {   
         Map<String, Object> parametros = new HashMap<String, Object>();
         parametros.put("autor", "Juan Esteban");
         parametros.put("titulo", "Reporte de Pedidos");

         List<PedidosVO> listaPedidos = new ArrayList<PedidosVO>();

         for (int i = 1; i <= 10; i++) 
         { 
              PedidosVO pedido = new PedidosVO(""+i,"Cliente:"+i,(i+1));
              pedido.setPuntos(i);
              listaPedidos.add(pedido); 
         }

        JasperDesign design = JRXmlLoader.load("C:\\Reportes\\Reporte2Pedidos.jrxml");

        JasperReport reporte = JasperCompileManager.compileReport(design);

        //-**-**-/*-/ 

        JasperPrint jasperPrint = JasperFillManager.fillReport(reporte, parametros,new JRBeanCollectionDataSource(listaPedidos));

        byte[] flujo  = JasperExportManager.exportReportToPdf(jasperPrint);
        File tempFile = File.createTempFile("reportePedidosTemporal",".pdf");
        System.out.println(tempFile.setReadable(true));
        escribirByte(tempFile,flujo);
        tempFile.deleteOnExit();

        if(tempFile.exists())
        {
            System.out.println("RUTA : "+tempFile.getPath());
            url = tempFile.getPath();
        }
    }
    catch(Exception e)
    {
        e.printStackTrace();
    }

} 
```

任何想法，建议将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:43:04.273

您需要有一个指向您加载到 iframe 中的 PDF的*URL 。*就目前而言，您正在尝试直接从文件系统加载文件。这意味着您的站点将尝试直接从最终用户的文件系统加载文件，这显然是不允许的。

在您的服务器上生成 PDF，然后生成指向它的 URL。然后将其设置为 iframe 源。

# c++ - 将数组传递给发送 UDP 数据包的函数

> ID：14202863
> 
> 赞同：0
> 
> 时间：2013-01-07T19:40:25.633
> 
> 标签：c++, arrays, sockets

我正在使用 Winsock2 套接字通过 UDP 传输一些数据。我在将数组传递到 sendTo() 函数以发送数据时遇到困难。

我已经编写了一个 mySocket 类以供将来重用，并且我目前有以下方法，该方法有效。

```
bool MySocket::sendData()
{
short int values[] = {1000,2000,3000,4000,5000};
int ret = sendto( sd,(const char*)values, sizeof(values) , 0, (sockaddr *)&sin, sizeof(sin) );
if(ret == SOCKET_ERROR)
{
    return false;
}
return true;
} 
```

现在我想传入一个数组而不是

```
short int values[] = {1000,2000,3000,4000,5000}; 
```

所以新功能看起来像：

```
bool MySocket::sendData(short int data[])
{
     short int * values = data;
int ret = sendto( sd,(const char*)&values, sizeof(data) , 0, (sockaddr *)&sin, sizeof(sin) );
if(ret == SOCKET_ERROR)
{
    return false;
}
return true;
} 
```

当函数被调用时，调用将是：

```
short int data[] = {1000,2000,3000,4000,5000}; //Or some other pre-assembled list of short ints
if(socket->sendData(data))
    cout << "Server: Packet Sent" << endl;
else
    cout << "Server_Error: Packet failed to send" << endl; 
```

我似乎只是在获取数据或值的指针地址。我一直在玩“&”和指针，但除了第一个数字（指针指向的位置）之外，还没有找到正确的方法来传输任何东西。我主要用 C# 编写代码，现在切换回 C++ 使我的指针技能相当生疏。

我将如何传递或使用传入的数组来正确发送它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:46:10.877

`MySocket::sendData`得到的应该是指向数据的指针，而不是指针的地址。`sizeof`将不是检查元素数量的正确方法。确实，这将是`sizeof`您所说的指针。此外，您应该传递`(const char *)values`给`sendto`. 那会做的。要计算要发送的字节数，请将元素数乘以`sizeof(short)`。所以我建议你将元素的数量作为附加参数传递给`MySocket::sendData`. 它看起来像这样：

```
bool MySocket::sendData(short int data[], int n_data)
{
    int ret = sendto(sd, (const char*)values, n_data * sizeof(short) , 0, (sockaddr *)& sin, sizeof(sin));
    if(ret == SOCKET_ERROR)
    {
        return false;
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T19:53:30.357

您需要将数据数组的大小显式传递给您的发送函数。这是 C 和 C++ 的微妙之处之一 - 数组类型在作为函数参数传递时会*衰减为指针，因此您会丢失数组大小信息。*只需执行以下操作：

```
bool sendInts( short* data, size_t count ) {
    int rc = ::send( data, count * sizeof( short ), ... );
    // handle errors etc.
} 
```

或者更好的是`std::vector<short>`，参考：

```
bool sendInts( const std::vector<short>& data ) {
    assert( data.size() > 0 );
    int rc = ::send( &data[0], data.size() * sizeof( short ), ... );
    // handle errors etc.
} 
```

# sql-server-2008 - 除了游标之外，在 SQL Server 中识别数字范围的更好方法

> ID：14202869
> 
> 赞同：1
> 
> 时间：2013-01-07T19:41:15.570
> 
> 标签：sql-server-2008, cursor

我们有一个保存服务记录的 SQL Server 数据库。每个服务记录都有一个服务 ID。服务 ID 由日期、客户编号、服务代表以及当天每个订单增加 1 的增量部分组成。此外，我们的服务技术人员可以在任何站点拥有多个服务记录，因此也有一个主服务 ID 分配给服务 ID。主服务 ID 是该站点的第一个服务 ID。因此，如果该站点上只执行一项服务，则服务 ID 和主服务 ID 可以相同。如果有多个服务正在执行，则服务 ID 和主服务 ID 将不同。

我的任务是查看服务 ID 中是否存在任何空白。因此，我创建了一个查询，用于标识每个主要服务 ID 的最低服务 ID。我需要一种方法来为每个部分生成服务 ID 和主服务 ID 之间的所有服务 ID。我正在使用光标，因为我想不出另一种方法来做到这一点。所以我的问题是必须有更好的方法来做我想做的事情。谁能指出我正确的方向？

这是我的光标：

```
DECLARE @ServiceID as Varchar(12), 
        @ MainServiceID as Varchar(12),
        @TempSCR as Varchar(12)

DECLARE db_RecSet CURSOR FOR 
SELECT [ServiceID], Max([MainServiceID]) as MainServiceID
FROM Service_Table
WHERE MainServiceID like '12%'
AND [MainServiceID] <> [ServiceID]
GROUP BY [ServiceID]

OPEN db_RecSet
FETCH NEXT db_RecSet INTO @ServiceID, @ MainServiceID

WHILE (@@FETCH_STATUS = 0)
    BEGIN
        SET @TempSCR = @ServiceID
        WHILE @TempSCR <= @ MainServiceID
            BEGIN
            INSERT INTO [Temp_Identifiy_Possible_SCRHeader](ServiceID, MainServiceID)
                VALUES (@TempSCR, @ MainServiceID)
            SET @TempSCR = @TempSCR +1
            END 
        FETCH NEXT FROM db_RecSet INTO @ServiceID, @ MainServiceID
    END
CLOSE db_RecSet
DEALLOCATE db_RecSet 
```

# sql-server - 自然键审计表

> ID：14202873
> 
> 赞同：0
> 
> 时间：2013-01-07T19:41:36.757
> 
> 标签：sql-server, database, database-design, relational-database

我正在使用自然键而不是主键的代理键设计 SQL Server 表。我遇到的问题是它不适用于我过去与代理键表一起使用的审计表格式。通常，我将创建一个审计表，该表与被审计的表具有相同的列。正在审计的表上的触发器将新行写入审计表，该行与更新或删除之前的行状态相匹配。为了强制执行完整性，我使用代理键和修改日期列作为表的复合 PK。如果我不使用代理键，那么如果构成复合键的列之一发生更改，我将无法跟踪更改。

```
Log table example with Surrogate Key:

LogId (PK)
LogType
Data
ModifedDate
ModifedBy

LogAudit Table for Log table with Surrogate Key:

LogId (PK)
LogType
Data
ModifedDate (PK)
ModifedBy 

Log table example with Natural Key:

LogType (PK)
Data
ModifedDate (PK)
ModifedBy

LogAudit Table for Log table with Natural Key:
LogType 
Data
ModifedDate
ModifedBy 
```

如果 LogType 或 ModifiedDate 更改，您如何跟踪 Audit 表中 Natural Key Log 表记录的更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T19:00:28.443

我认为您误解了这里的基本概念。

如果确实是表`{LogType, ModifedDate}`中的自然键`Log`（情况 2），那么在第一个示例中它是备用键 (AK)（唯一）也是正确的。

所以`Log`第一个例子中的表格看起来像这样。

```
LogId        (PK)
LogType      (AK1.1)
Data
ModifedDate  (AK1.2)
ModifedBy 
```

所以，对于一个给定`{LogID}`的`{LogType, ModifedDate}`不能改变，反之亦然。

但是，这不是你想要完成的。答案可能是您的`Log`表一开始就没有“自然键”。

* * *

**根据评论**编辑****

 **作为经验法则，对于创建基于行的审计表：

1.  复制原始表结构（列）。

2.  将`ChangedAt`（日期时间）和`ChangedBy`列添加到表中。

3.  将`ChangedAt`列添加到原始 PK。

4.  将 PK 列的副本添加到表中。这是为了捕获任何 PK 变化。

5.  使用 ON UPDATE CASCADE 添加 FK，ON DELETE NO ACTION。这可以防止硬删除，因此请使用软删除。

6.  从原始表上的 AFTER INSERT、UPDATE 触发器填充。

*示例 1*

```
 Table: {ID, SomeData}                               ; key: {ID} 
audit table: {ID, SomeData, ChangedAt, ChangedBy, ID_CPY} ; key: {ID, ChangedAt} 
```

*示例 2*

```
 Table: {UserID, UserOrderNo, SomeData}                       ; key: {UserID, UserOrderNo} 
audit table: {UserID, UserOrderNo, SomeData, ChangedAt, ChangedBy, UserID_CPY, UserOrderNo_CPY} ; key: {UserID, UserOrderNo, ChangedAt} 
```

*示例 3*（根据您的描述）

```
 Table: {LogType, ModifedDate, SomeData}                       ; key: {LogType, ModifedDate} 
audit table: {LogType, ModifedDate, SomeData, ChangedAt, ChangedBy, LogType_CPY, ModifedDate_CPY} ; key: {LogType, ModifedDate, ChangedAt} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T19:54:22.313

嗯，特别是那个自然键很奇怪。拥有两组密钥（自然密钥和代理密钥）没有任何限制。我会混合两个表，我将使用 LogID 进行 PK，并为 LogType+ModifiedDate 创建一个唯一索引，这样你就有一个用于连接表的字段 PK（我认为这是一件好事），你有你的业务/自然无论您需要什么，密钥（仍然是唯一的，但不是主要的）。**

# python - 如何根据正在执行的脚本的相对路径加载配置文件？

> ID：14202874
> 
> 赞同：3
> 
> 时间：2013-01-07T19:41:37.723
> 
> 标签：python, path, relative-path

堆栈溢出，

下面是我脚本的前几行：

```
from ConfigParser import SafeConfigParser
from docopt import docopt
import core as scrappy

ARGS = docopt(__doc__, version=scrappy.__version__)
if not ARGS['PATH']:
    ARGS['PATH'] = './'

# load config file
CFG = SafeConfigParser()
if not CFG.read(ARGS['--cfg']):  # call to CFG.read also loads file if it exists
    raise IOError('Configuration file not found.') 
```

我要读取的配置文件与上述脚本位于同一目录中。默认情况下，docopt 将此文件的路径设置为`./file.conf`（我已经`file.conf`用相同的结果对此进行了测试）。

总是调用脚本的最后一行，提示找不到文件。我通过打印 的输出确认了这一点`os.getcwd`，这表明脚本的执行目录是终端指向的目录。

是什么赋予了？

我该怎么做才能指向配置文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T20:02:54.723

使用`__file__`预定义的模块属性。像这样：

```
module_dir = os.path.dirname(__file__)
CFG = SafeConfigParser()
cfg_full_path = os.path.join(module_dir, ARGS['--cfg'])
if not CFG.read(cfg_full_path): 
    ... 
```

# margins - Stata - 边际效应

> ID：14202875
> 
> 赞同：-1
> 
> 时间：2013-01-07T19:41:41.750
> 
> 标签：margins, stata

有没有人可以简单地通过程序 mymargin 并检查任何不一致和可能的扩展/改进，...程序应该估计由 if 和 in 选择的样本中任何变量的边际效应应该建立在保存的结果的基础上以前的 logit 回归。

```
capture program drop mymargin

program mymargin, rclass
version 10.1
syntax varlist(max=1 numeric) [if] [in] [, atmean]
marksample touse
quietly count if `touse' == 1
if `r(N)' == 0 {
error 301
}   

local res me mme
tempname `res'
quietly summarize `varlist' if `touse'==1, detail

scalar `me' = // TBU
display as txt "Marginal effect of" `var' ": " `me'

if "`atmean'" == "atmean" {
matrix r = r(stats)
scalar `me' = normalden(_b[sex]*r[2,1]+_b[ageinyears]*r[3,1] +_b[meduc]*r[4,1] +_b[hhinc]*r[5,1] +_b[area]*r[6,1] + _b[_cons])
}
display as txt "Mean marginal effect of" `var' ": " `me'    

foreach r of local res {
return scalar `r' = ``r''
}

return scalar N = r(N)      // return the number of observations
return local var `varlist'  // return the name of the variable
return  // TBU, return the (mean) marginal effect

end

mymargin hhinc
return list
display me
display mme 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T10:15:59.457

如果只是因为假设您有五个按指定顺序指定的预测变量，这将得到我的不及格分数：

```
scalar `me' = normalden(_b[sex]*r[2,1]+_b[ageinyears]*r[3,1] +_b[meduc]*r[4,1] +_b[hhinc]*r[5,1] +_b[area]*r[6,1] + _b[_cons]) 
```

此外，该`summarize`命令将消除`r(stats)`任何先前命令留下的任何内容。

无论 Stack Overflow 的一般政策如何，我都会亲自帮助完成看起来像是课程作业的事情。请参阅您大约一周前的上一篇文章。

# c# - 列不存在服务器错误 - 但 sql 服务器管理说它存在

> ID：14202876
> 
> 赞同：1
> 
> 时间：2013-01-07T19:41:41.500
> 
> 标签：c#, asp.net, mysql, sql, datatable

我正在尝试从 mysql 2008 数据库中导入一个字段。我写了这个小代码（我以前用过几次） - 它一直给我这个服务器错误：

> “先前登录”列不属于表 Table。
> 
> 第 47 行：DateTime userEntry = Convert.ToDateTime(ds1.Tables[0].Rows[0]["Previous Login"]);

但它确实存在！当我在sql服务器管理中使用相同的查询时，它工作正常，所以我猜返回数据很好，知道我哪里出错了吗？

谢谢！

```
 {
    SqlConnection con = new SqlConnection();
    con.ConnectionString = "server=(local);database=PhilipsMaterials;Integrated Security=SSPI;";
    con.Open();
    DataSet ds = new DataSet();
    DataTable dt = new DataTable();
    // SQL Query that returns only the messages from the last 2 weeks starting with the most recent one.
    string sql = "Select * From Messages Where DATEDIFF(DAY,Date,GETDATE()) <= 14 ORDER BY Date Desc";
    SqlDataAdapter da = new SqlDataAdapter(sql, con);
    da.Fill(ds);
    dt = ds.Tables[0];
    showMsgs.DataSource = ds;
    showMsgs.DataBind();

    // new message notification
    string username = Convert.ToString(Session["username"]);
    username = username.Substring(username.IndexOf("\\") + 1);

    DataSet ds1 = new DataSet();
    DataTable dt1 = new DataTable();
    string sqluser = "Select * From [PhilipsMaterials].[dbo].[Employees] Where username='" + username + "'";
    SqlDataAdapter da1 = new SqlDataAdapter(sqluser, con);
    da.Fill(ds1);
    dt1 = ds1.Tables[0];
    DateTime userEntry = Convert.ToDateTime(ds1.Tables[0].Rows[0]["Previous Login"]);

    DateTime lastMsg = new DateTime();
    lastMsg = Convert.ToDateTime(ds.Tables[0].Rows[0]["Date"]);
    int compared = DateTime.Compare(userEntry, lastMsg);
    if (compared < 0) { notification.Visible = true; }
    con.Close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:47:18.320

如果您的列名包含空格，您需要某种转义 - 尝试使用`[Previous Login]`与在 SQL 语句中相同的方式作为列名。

并且 - 正如对问题的评论中提到的那样 - 看看[SQL 注入以及如何避免它](http://msdn.microsoft.com/en-us/library/ms161953.aspx)。

# java - 运行java程序时，报告找不到类

> ID：14202879
> 
> 赞同：1
> 
> 时间：2013-01-07T19:41:46.490
> 
> 标签：java

该文件`FactoryDemo.java`已成功编译，其中有

```
package home.city.Desktop.factorydemo; 
```

我用 using 编译`javac -d / FactoryDemo.java`，没有报错。

但是当我尝试使用运行它时`java home.city.Desktop.factorydemo.FactoryDemo`，它会报告：

```
Exception in thread "main" java.lang.NoClassDefFoundError: home/city/Desktop/factorydemo/FactoryDemo
Caused by: java.lang.ClassNotFoundException: home.city.Desktop.factorydemo.FactoryDemo
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: home.city.Desktop.factorydemo.FactoryDemo. Program will exit. 
```

我已经尝试了很多次，但我找不到问题的解决方案。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:47:54.327

您编译的类必须位于名为： `home/city/Desktop/factorydemo`

在 Unix 上，只需运行以下命令： `mkdir -p home/city/Desktop/factorydemo; mv FactoryDemo.class home/city/Desktop/factorydemo/`

为了获得最佳实践，只需将您的 Java 源文件也移动到该文件夹​​中，以便编译器将文件输出到正确的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T20:11:25.897

FactoryDe​​mo 类是在根目录下创建的，您应该键入以下命令（. 而不是 /）

```
javac -d . FactoryDemo.java 
```

它`home.city.Desktop.factorydemo`从当前目录开始创建目录。

如果你想在根目录下创建类。您必须键入以下命令才能执行。

```
java -classpath / home.city.Desktop.factorydemo.FactoryDemo 
```

# hibernate - 如何在 hql 中访问地图的键或值

> ID：14202884
> 
> 赞同：3
> 
> 时间：2013-01-07T19:42:15.023
> 
> 标签：hibernate, map

假设我有以下课程：

```
@Entity
public class CompanyImpl extends BaseEntity {

    @OneToMany(cascade=CascadeType.ALL)
    private Map<Cat,Flight> flightCats; 
```

Cat 和 Flight 类都有一个“name”属性。我怎样才能：

1.  选择在他们的 flightCats 地图中有名为“Meow”的猫的公司
2.  选择在他们的 flightCats 地图中有名为“Ocean”的航班的公司

我想到了类似的东西

```
from CompanyImpl co where co.flightCats.cat.name='Meow' 
```

但它不起作用:(

* * *

**编辑：**经过一番谷歌搜索后，我发现此[链接](https://forum.hibernate.org/viewtopic.php?p=2431045)建议使用 theta 样式连接进行查询：

```
from CompanyImpl co left join co.flightCats cf where 
(cf in indices(co.flightCats)) and (cf.name = 'Ocean') 
```

这个查询对我来说很奇怪，我无法理解。有趣的是，它**通过 Flight 对象的名称**（地图的值）来限制结果，无论我使用的是 indices() 还是 elements() ！！！

谁能给我解释一下这是怎么回事？？！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:45:07.417

(N)Hibernate 文档中没有很好地记录它，但它被记录在案：

它有特殊的 HQL 功能：`indices()`和`elements()`

尝试这样的事情：

```
from CompanyImpl co where indices(co.flightCats).name='Meow' 
```

[NHibernate HQL 文档在第 14 章](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html)中提到了索引和元素。

# c++ - 头文件导入行为异常

> ID：14202889
> 
> 赞同：0
> 
> 时间：2013-01-07T19:42:34.223
> 
> 标签：c++

> **可能重复：**
> [带有标题的循环依赖项。使用 #ifndef 和 #define](https://stackoverflow.com/questions/6573878/circular-dependencies-with-headers-using-ifndef-and-define)

我尝试导入一个头文件，其中包含一个扩展至该头文件中的类的类，但它不起作用：S

瓷砖草.h：

```
#ifndef TILEGRASS_H_
#define TILEGRASS_H_

#include "Tile.h"

class TileGrass : public Tile
{
    public:
        TileGrass(unsigned char);
};

#endif /* TILEGRASS_H_ */ 
```

瓷砖.h：

```
#ifndef TILE_H_
#define TILE_H_

class Tile
{
    public:
        Tile(unsigned char);
        unsigned char id;
};

#include "TileGrass.h"

extern Tile* tiles[256];
TileGrass tileGrass = TileGrass(0);

#endif /* TILE_H_ */ 
```

这样做会给我错误：错误：'TileGrass'没有命名类型

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:45:26.713

乍一看，我看到两个错误：

*   一个不必要的循环包含（`Tile.h`不需要包含`TileGrass.h`- 您可以重新组织文件以删除包含）
*   `TileGrass tileGrass = TileGrass(0);`是一个定义，它在一个标题中，所以如果你多次包含标题，你会得到一个多重定义错误。如果你想要一个全局（**重新考虑**），你必须使用`extern`.

# java - 使用 servlet 在浏览器中显示 PDF

> ID：14202892
> 
> 赞同：3
> 
> 时间：2013-01-07T19:42:41.060
> 
> 标签：java, javascript, pdf, servlets

我想在浏览器中显示 PDF 文件。我在 JS 中有 pdf 的路径，我正在调用从 java 中获取 PDF 作为 servlet。这是我到目前为止所拥有的：

JavaScript：

```
RequestManager.getJSON(Config.server + "getPDF.json?pdfPath=" + this.pathToPdfFile, (function(data){
        $("#" + this.divId).append('<object id="' + this.pdfObjectId + '" data="' + data + '" type="application/pdf" width="600" height="800"></object>');
        ResizeManager.addResizeHandler(this.pdfObjectId, this.divId, -10, -10);
    }).bind(this)); 
```

爪哇：

```
@RequestMapping("/getPDF")
public void pdfPathToServlet(Model model, HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException
{
    String pdfPath = request.getParameter("pdfPath");
    if (pdfPath == null || pdfPath.equals(""))
        throw new ServletException("Invalid or non-existent file parameter in UrlServlet servlet.");

    if (pdfPath.indexOf(".pdf") == -1)
        pdfPath += ".pdf";

    File pdf = new File(pdfPath);
    String pdfName = pdfPath.substring(pdfPath.lastIndexOf("/") + 1, pdfPath.length());
    logger.debug(pdfName);
    ServletOutputStream stream = null;
    BufferedInputStream buf = null;
    try 
    {
        stream = response.getOutputStream();
        response.setContentType("application/pdf");
        response.setHeader("Content-Disposition", "inline; filename='" + pdfName + "'");
        FileInputStream input = new FileInputStream(pdf);
        response.setContentLength((int) pdf.length());
        buf = new BufferedInputStream(input);
        int readBytes = 0;
        while ((readBytes = buf.read()) != -1)
            stream.write(readBytes);
    } 
    catch (IOException ioe) 
    {
        throw new ServletException(ioe.getMessage());
    } 
    finally 
    {
        if (stream != null)
            stream.close();
        if (buf != null)
            buf.close();
    }
} 
```

我的问题是这将我的浏览器中的*二进制输出*显示为文本。

我不确定我做错了什么。我尝试将标题更改为附件而不是内联，但这显示了同样的事情。我相信我想要内联，因为我希望在浏览器中显示它而不是下载它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T20:38:49.943

您的 JavaScript 部分没有意义。您正在获取 PDF 文件作为 ajax 响应，然后尝试将其设置为元素的`data`属性。`<object>`该`data`属性必须指向一个真实的 URL，而不是文件内容。相应地修复您的 JS：

```
$("#" + this.divId).append('<object id="' + this.pdfObjectId + '" data="' + Config.server + "getPDF.json?pdfPath=" + this.pathToPdfFile + '" type="application/pdf" width="600" height="800"></object>'); 
```

网络浏览器将负责在给定的 URL 上发送适当的 HTTP 请求，并使用 Adob​​e Acrobat Reader 插件初始化/呈现元素——`<object>`如果有的话，我宁愿将下载链接。`<a href="pdfURL">PDF</a>``<object>`

* * *

**与具体问题无关**，Java 代码根本不是 servlet 的一部分，而是 Spring MVC 操作。我建议您直接阅读[我们的 Servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)以了解它们的真正含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T19:51:13.687

```
response.setHeader("Content-Disposition", "attachment;filename=" + pdfName); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-07T19:50:27.590

```
 response.setHeader("Content-Disposition", "inline; filename='" + pdfName + "'"); 
```

您不能显示 PDF 内联。它需要单独在自己的页面（或 Iframe）上。

# c# - 在 JavaScript 中转换 .NET UTC 时间

> ID：14202900
> 
> 赞同：0
> 
> 时间：2013-01-07T19:43:18.533
> 
> 标签：c#, javascript

> **可能重复：**
> [如何格式化 JSON 日期？](https://stackoverflow.com/questions/206384/how-to-format-a-json-date)

我有一个使用 JQuery 的 HTML 页面。我的 JQuery 访问了一个 .NET Web 服务，该服务执行以下操作：

```
return DateTime.UtcNow; 
```

返回的示例值如下所示：

```
"/Date(-62135578800000)/" 
```

在我的 JavaScript 中，我尝试按如下方式解析日期：

```
var lastOrderDate = GetValueFromService();
var d = new Date(parseInt(lastOrderDate));
alert(d); 
```

当警报语句被触发时，我在警报窗口中看到“无效日期”。我究竟做错了什么？

# c# - 许多常量的 XML 文档

> ID：14202902
> 
> 赞同：3
> 
> 时间：2013-01-07T19:43:26.953
> 
> 标签：c#, documentation, sandcastle

有没有办法将 XML 文档*摘要*标记与类中的常量放在同一行？

我有一个定义了许多常量返回值的类，并且每个之间都有注释行，这使得阅读和维护有点困难。（同样的问题也适用于枚举值。）

下面的代码显示了我的代码现在的外观示例。如果有办法，我想保持这种状态。

```
public class MyUtilClass
{
    public static int  UTIL_SUCCESS         = 0;   // This is an example comment for success.
    public static int  UTIL_WARNING_LEVEL_1 = 1;   // This is an example comment for warning level 1.
    public static int  UTIL_WARNING_LEVEL_2 = 2;   // This is an example comment for warning level 2.
    public static int  UTIL_FAILED          = 3;   // This is an example comment for failure.
} 
```

我正在使用[http://shfb.codeplex.com/](http://shfb.codeplex.com/)来生成我的文档。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T19:50:08.257

不，我认为您必须将 XML 文档包含在它所记录的内容之上。但是，您可以将摘要标签及其内容放在一行中：

```
/// <summary>Some content</summary>
public static int  UTIL_SUCCESS         = 0; 
```

# google-chrome - Chrome 扩展插件能力？

> ID：14202906
> 
> 赞同：0
> 
> 时间：2013-01-07T19:43:47.417
> 
> 标签：google-chrome, google-chrome-extension, firefox-addon

我正在为 Chrome 构建一个扩展，它为用户提供了一个基本的 API。我希望其他开发人员能够将他们自己的功能添加到我的 API 中。例如，一些开发人员提供了一个新的“插件”（它只是 JavaScript 代码），我希望用户能够将该插件下载到他们的扩展中。

我面临的主要问题是：

*   *如何将新代码永久加载到扩展中？*

理想情况下，我想将代码添加到扩展的 JavaScript 中，但我无法写入文件；我的印象是我受到 JavaScript 的限制——这是真的吗？

虽然我也许可以动态加载新代码（通过下载一些脚本），但该代码只会在当前运行中保留，并且不会永久添加。相反，一旦用户重新加载扩展，它就会消失。

到目前为止，我能看到的唯一解决方案是创建一个登录系统，在其中保存每个用户下载的插件，并为他提供每次打开扩展程序时加载它们的强制选项。

这种方法很杂乱，不切实际，因为我不想每次都让用户登录。事实上，我非常想避免使用任何登录系统。

我想要的是类似于 GreaseMonkey 扩展的功能，即允许用户编写脚本并允许其他用户下载它们的能力。

我显然希望创建一个比 GreaseMonkey 更小更简单的扩展，但像 GreaseMonkey 这样的东西或多或少是我正在寻找的。

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:49:56.840

所有的“插件”都将是独立的 chrome 扩展。然后，您可以使用[Message Passing](http://developer.chrome.com/extensions/messaging.html)向每个已安装的扩展发送消息，并且插件应该具有类似于以下内容的代码：

```
if recieve "some identifying key"
then respond "information about this plugin" 
```

现在您的主扩展知道安装了哪些插件，并且可以使用`chrome-extension://[extensionID]/file.js"`.

这应该让你开始:)

# class - 是否可以在 NetLogo 中创建类？

> ID：14202909
> 
> 赞同：2
> 
> 时间：2013-01-07T19:44:28.883
> 
> 标签：class, netlogo

我在互联网上搜索了这个，但找不到任何答案。我想在 NetLogo 中创建类，但就目前而言，唯一的方法是使用 Java 创建一个扩展。

是否可以在 NetLogo 中定义和使用类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:40:10.607

品种是 NetLogo 与大多数面向对象语言实现的“类”最接近的东西。

```
breed [agents agent] 
```

NetLogo 不固定对象的方法。在 Netlogo 中定义方法后：

```
to doit []
....
end 
```

那么你可以通过做

```
ask agents [doit] 
```

但你也可以

```
breed [puppies puppy]
ask puppies [doit] 
```

有点像[mixins](http://en.wikipedia.org/wiki/Mixin)。

# qt - Qt Creator IDE 中的自定义字体

> ID：14202913
> 
> 赞同：1
> 
> 时间：2013-01-07T19:44:56.763
> 
> 标签：qt, ubuntu, qt-creator, ubuntu-12.04

我在我的 Ubuntu 12.04 LTE 上成功安装了 Consolas 字体，如此[处](http://www.wikihow.com/Install-TrueType-Fonts-on-Ubuntu)所述。它在我的终端应用程序中看起来很棒，但 Qt Creator IDE 不建议我在其文本编辑器中使用 Consolas。此外，Qt Creator 也看不到其他一些系统字体，但同时它有一些自己的字体，例如 Utopia。

有人知道如何在 Qt Creator 中提供可用的系统字体或在 Qt Creator 的自定义版本中硬编码其他字体吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T14:35:44.807

我找到了一种解决方法。来自 Ubuntu Software Center 的 Qt Creator 看起来非常好，它找到了我所有的系统字体。唯一的缺点是现在可用的最新版本是 2.5。

# php - 发送响应 - PHP API

> ID：14202917
> 
> 赞同：0
> 
> 时间：2013-01-07T19:45:08.830
> 
> 标签：php, xml, api

我已经使用 php 构建了一个自定义 api，它是一个通过发布 xml 数据工作的简单 api。我正在努力发布到 api 的代码是：

```
<?php 
$xml_data = '<document>
 <first>'.$first.'</first>
 <last>'.$last.'</last>
 <email>'.$email.'</email>
 <phone>'.$phone.'</phone>
 <body>TEST</body>
</document>';
        $URL = "url";
        $ch = curl_init($URL);
        curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
        curl_setopt($ch, CURLOPT_POST, 1);
        curl_setopt($ch, CURLOPT_HEADER, 0);
        curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: text/xml'));
        curl_setopt($ch, CURLOPT_POSTFIELDS, "$xml_data");
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        $output = curl_exec($ch);
        curl_close($ch);
        $Response = curl_exec($ch);    
    curl_close($ch);
    echo "Responce= ".$responce;
?> 
```

另一方面，上面的代码发布到：

```
<?php 
$postdata = file_get_contents("php://input"); 
$xml = simplexml_load_string($postdata);
$first = $xml->first;
$last = $xml->last;
$email = $xml->email;
$phone = $xml->phone;
?> 
```

然后我将这些 php 变量发送到数据库。所有这些代码都在工作！

但我的问题是：如何将回复发送回发帖方？如何使用 curl_init 发送到 curl_exec？

任何帮助都会很棒！谢谢杰森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:49:59.223

我想你想要：

```
 echo "Responce= ".$Response;
                   ^^^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T20:17:01.257

要返回响应，您需要执行与任何其他内容相同的操作，设置标题并回显您的输出。例如，要返回 xml 响应，从处理 post 数据的脚本执行以下操作

```
<?php 
$postdata = file_get_contents("php://input"); 
$xml = simplexml_load_string($postdata);
$first = $xml->first;
$last = $xml->last;
$email = $xml->email;
$phone = $xml->phone;

// do your db stuff

// format response
$response = '<response>
    <success>Hello World</success>
</response>';
// set header
header('Content-type: text/xml');
// echo xml identifier and response back
echo chr(60).chr(63).'xml version="1.0" encoding="utf-8" '.chr(63).chr(62);
echo $response;
exit;
?> 
```

您应该看到从返回的响应`curl_exec()`

# java - 生成小的 ascii 字符串列表

> ID：14202921
> 
> 赞同：2
> 
> 时间：2013-01-07T19:45:21.160
> 
> 标签：java

我想在 java 中创建一个生成器类，以生成下一个最小的唯一 ascii 字符串，其中生成的字符串必须以 aZ 开头，并且每个后续字母可以是 aZ 或 0-9。

这些字符串用于缩小 javascript 文件中的变量。

关于执行此操作的工具的任何建议或关于您如何实现的一些粗略代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:51:31.447

如果您需要使用不同的字符选择，您可以使用

```
public static void main(String... ignored) {
    String prev = "";
    for (int i = 0; i < 40000000; i++) {
        String s = asId(i);
        if (s.length() > prev.length())
            System.out.print(prev + "\n" + s + " to ");
        prev = s;
    }
}

static char[] CHARS = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".toCharArray();

public static String asId(long number) {
    StringBuilder sb = new StringBuilder();
    long div = number < 52 ? 1 : 52;
    while (div <= number / 62) div *= 62;
    while (div > 0) {
        sb.append(CHARS[((int) (number / div % 62))]);
        div /= 62;
    }
    return sb.toString();
} 
```

印刷

```
0 to Z
10 to ZZ
100 to ZZZ
1000 to 
```

* * *

您可以在 Java 中使用以下内容。

```
public static String asId(long number) {
    return (char) ('a' + number % 26) 
        + (number >= 26 ? Long.toString(number / 26, 36) : "");
} 
```

如果您担心负数，您可以使用。

```
public static String asId(long number) {
    long lowBit = number & 1;
    long highBits = number >>> 1;
    return (char) ('a' + highBits % 13 + lowBit) 
        + (number >= 26 ? Long.toString(highBits / 13, 36) : "");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T20:21:16.070

这里有一些想法（没有完全测试！！！）

```
import java.lang.*;
import java.util.*;

public class Test
{
    static class VariablesIterator implements Iterator<String>
    {
        private List<Character> characters = new ArrayList<Character>();

        private List<Integer> indices = new ArrayList<Integer>();

        public VariablesIterator(String start)
        {
            char[] cs = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".toCharArray();

            for (char c : cs)
            {
                characters.add(c);
            }

            for (int i = 0; i < start.length(); ++i)
            {
                indices.add(characters.indexOf(start.charAt(i)));
            }
        }

        public boolean hasNext()
        {
            return true;
        }

        public String next()
        {
            String current = "";

            for (int i = 0; i < indices.size(); ++i)
            {
                current += characters.get(indices.get(i));
            }

            Integer last = indices.get(indices.size() - 1);

            if (indices.size() != 1 && last != 2*26 + 10 - 1 || indices.size() == 1 && last != 2*26 - 1)
            {
                indices.set(indices.size() - 1, last + 1);
            }
            else
            {
                indices.add(0);
            }

            return current;
        }

        public void remove()
        {
            throw new UnsupportedOperationException();
        }
    }

    static class Variables implements Iterable<String>
    {
        public Iterator<String> iterator()
        {
            return new VariablesIterator("a");
        }
    }

    public static void main(String[] args)
    {
        Scanner in = new Scanner(System.in);

        for (String variable : new Variables())
        {
            System.out.println(variable);
            in.nextLine();
        }
    }
} 
```

# javascript - 如何在全局范围内将回调传递给 onerror 方法？

> ID：14202928
> 
> 赞同：1
> 
> 时间：2013-01-07T19:45:52.880
> 
> 标签：javascript, indexeddb

我有一段 IndexedDB 的代码

```
GetObj = function(storeName, key, callback){
    var db = indexedDB.db;
    if(db){
    var transaction = db.transaction([storeName], transactionType.READ_ONLY);  
    var obj = undefined;
    transaction.oncomplete = function(event) {              
        if(callback){
            callback(obj);
        }
    }; 
    var objectStore = transaction.objectStore(storeName);  
    var request = objectStore.get(key);  
    request.onerror = function (e){
        console.log("onError: in", e); 
        if (callback) {
            callback(-1);//error
        }       
    }
    request.onsuccess = function(event) {  
        obj = request.result;            
    };
   }    
} 
```

我想全局定义 request.onerror 函数，以便我可以为所有 onerror 重用该函数（而不是将其复制粘贴到所有地方）。问题是如何传递回调？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T19:54:08.117

只需在更高的范围内定义它：

```
var onerrorHandler = function (e, callback){
    console.log("onError: in", e); 
    if (callback) {
        callback(-1);//error
    }       
}; 
```

然后将其用于回调：

```
... snip
var request = objectStore.get(key);  
request.onerror = function (e) {
    onerrorHandler(e, callback);
};
... snip 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-08T05:50:36.080

我宁愿避免全局错误处理程序。

如您所见，代码并没有真正减少，而是扩展为包含另一个包装函数。这样做时，错误堆栈跟踪不会告诉哪个请求导致错误。

# python - cxfreeze 错误：必须指定脚本或模块列表

> ID：14202932
> 
> 赞同：-1
> 
> 时间：2013-01-07T19:45:58.803
> 
> 标签：python

我是一个 python 菜鸟，所以这可能是一个愚蠢的问题，但是当我尝试使用 cxfreeze 将 python 脚本导出到 exe（使用 python 3.3）时，我得到了这个：

`cxfreeze.py: error: script or a list of modules must be specified`

这是我使用的命令：

`cxfreeze.py script.py --target-dir dist`

脚本已复制到`C:\Python33\Scripts`目录中。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-06T19:31:57.937

我有一个类似的命令在工作......然后它停止了。事实证明，添加`C:\Cygwin64\bin`到我的路径会导致该消息出现并且没有 cx_Freeze 可以正常工作。请注意，我确实安装了 Windows 和 Cygwin Python，所以我假设我的问题与找到的冲突库有关。

请注意，我实际上是从 Windows 7 中的 cmd.exe 提示符针对使用 Python 3.4 调用 cx_Freeze 的生成文件调用 MinGW Make。

# jenkins - Jenkins 的字符串参数与文本参数

> ID：14202938
> 
> 赞同：30
> 
> 时间：2013-01-07T19:46:23.920
> 
> 标签：jenkins

`String Parameter`在参数化的 Jenkins 作业中，和之间有什么区别`Text Parameter`？我什至没有在[文档中看到提到文本参数](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Build)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-07T21:54:00.793

在 Jenkins 中添加了文本参数，但在 Hudson 中不存在（至少在过去）

主要区别在于 Text 参数支持多行，而 String 一个不支持

**更新**

这是请求此功能的原始票证
[https://issues.jenkins-ci.org/browse/JENKINS-5577](https://issues.jenkins-ci.org/browse/JENKINS-5577)

它看起来不像是为詹金斯*设计的东西。*而是有人要求它，然后有人说他们有一个可用的实现。Kohsuke 将它添加到主 Jenkins，但从我读到的内容来看，它有很多错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-11T12:36:38.590

使用字符串参数可以传递完整的字符串值，而如果字符串值太长，则不能使用多行字符串参数。詹金斯版 2.73.1。

# sql - 使用局部变量的 SQL 选择数据检索

> ID：14202940
> 
> 赞同：1
> 
> 时间：2013-01-07T19:46:26.700
> 
> 标签：sql, sql-server, tsql

我正在尝试编写一个包含一些级联条件逻辑的 SQL 语句。我有几个需要返回的字段，但它们的值取决于先前确定的字段。例如，buysell_flag 依赖于 spotfwd_flag 值，而 counter_amt 和 given_amt 依赖于 buysell_flag 值，依此类推。

我很快发现我无法将数据检索查询和变量分配查询组合在同一个空间中，所以我尝试了各种方法，但无法返回我想要的数据。这是客户的模板，他们将编辑此 SQL 并将其粘贴到程序中。它并不总是相同的，因此我无法处理程序或存储过程或 UDF 中的逻辑。我尝试使用表格，但是在插入表格并为其选择内容时，我遇到了同样的问题。您可以在下面看到我的尝试，但如果无法完成，请告诉我 - 否则，我愿意接受任何和所有建议！谢谢！

```
 DECLARE @trans_type nvarchar(255), @trade_date nvarchar(255), @settle_date nvarchar(255), 
@order_id nvarchar(255), @oaexecbroker nvarchar(255), @exec_broker nvarchar(255),
@ostatus nvarchar(255), @trade_id nvarchar(255), @reference_price nvarchar(255), 
@given_ccy nvarchar(255), @spotfwd_flag nvarchar(255), @buysell_flag nvarchar(255),
@counter_ccy nvarchar(255), @counter_amt nvarchar(255), @given_amt nvarchar(255),
@oacct_cd nvarchar(255)

SELECT 
@trans_type = o.trans_type,
@settle_date = o.settle_date,
@order_id = o.order_id,
@oaexecbroker = oa.exec_broker,
@exec_broker = o.exec_broker,
@ostatus = o.status,
@trade_id = oa.trade_id,
@reference_price = o.exec_price,
@given_ccy = o.target_crrncy,

--o.trans_type    AS trans_type, 
--  o.trade_date    AS trade_date, 
--  o.settle_date   AS settle_date, 
--  o.order_id      AS order_id, 
--  oa.exec_broker  AS oaexecbroker, 
--  o.exec_broker   AS exec_broker, 
--  o.status        AS ostatus, 
--  oa.trade_id     AS trade_id, 
--  o.exec_price    AS reference_price, 
--  o.target_crrncy as given_ccy, 
    -- for spot/fwd

    @spotfwd_flag = CASE 
        WHEN LEFT(o.inv_class_cd,1) = 'F' THEN ('FWD')
        WHEN LEFT(o.inv_class_cd,2) = 'CU' THEN ('SPOT')
    ELSE 'SPOT'
    END, -- must be spot or fwd
    --for buysell   

    @buysell_flag = CASE
        WHEN @spotfwd_flag = 'FWD' THEN 
            CASE
                WHEN o.target_crrncy = o.to_crrncy THEN 'BUY'
                ELSE 'SELL'
            END
    ELSE
        CASE 
            WHEN o.trans_type = 'BUYL' THEN 'BUY'
            ELSE 'SELL'
        END
    END, -- must be buy or sell

    @counter_amt = CASE 
        WHEN @buysell_flag = 'BUY' Then oa.exec_amt
        ELSE oa.exec_qty
    END,

    @given_amt = CASE
        WHEN @buysell_flag = 'SELL' THEN oa.exec_amt
        ELSE oa.exec_qty
    END, 

    @counter_ccy = CASE 
        WHEN o.target_crrncy = o.to_crrncy THEN o.from_crrncy
        ELSE o.to_crrncy
    END,

    @oacct_cd = CASE 
        WHEN f.udf_char6 = 'Y' THEN (oa.acct_cd + oa.custodian)
        ELSE oa.acct_cd 
    END 
FROM   ts_order_alloc oa 
    LEFT OUTER JOIN ts_order o 
    ON oa.order_id = o.order_id 
    LEFT OUTER JOIN cs_fund f 
    ON oa.acct_cd = f.acct_cd 
--  LEFT OUTER JOIN csm_security s 
--  ON o.sec_id = s.sec_id 
--WHERE  s.sec_typ_cd IN ( 'CFWD', 'CURR' ) 
--  AND o.status IN ( 'READY','ACCT' ) 
--  AND oa.usr_class_cd_2 = 'GTSSREADY' 

select @trans_type as trans_type,
    @trade_date    AS trade_date, 
    @settle_date   AS settle_date, 
    @order_id      AS order_id, 
    @oaexecbroker  AS oaexecbroker, 
    @exec_broker   AS exec_broker, 
    @ostatus        AS ostatus, 
    @trade_id     AS trade_id, 
    @reference_price   AS reference_price, 
    @given_ccy as given_ccy,
    @buysell_flag as buysell_flag,
    @spotfwd_flag as spotfwd_flag,
    @given_ccy as given_ccy,
    @counter_ccy as counter_ccy,
    @given_amt as given_amt,
    @counter_amt as counter_amt 
```

编辑：

我期望根据给定的变量取出行。我有这么多变量的原因是我试图让它符合 SQL 错误消息。

应该像这样出来：

```
trans_type  trade_date  settle_date order_id    oaexecbroker    exec_broker ostatus trade_id    reference_price given_ccy   buysell_flag    spotfwd_flag    given_ccy   counter_ccy given_amt   counter_amt
BUYL    NULL    2010-04-06 00:00:00.000 1442084139  3PCITI  3PCITI  Ready   1389278710  1.50705 GBP BUY SPOT    GBP USD 604292  910699 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T03:14:33.823

如果我正确理解了这个问题，您需要做的是封装计算的逻辑，以便以后使用这些计算的结果。

根据计算的输入，有许多不同的方法可以做到这一点。

*   如果逻辑只涉及单个表中单行中的值*，*则可以定义[计算列](http://msdn.microsoft.com/en-us/library/ms186241.aspx)来封装逻辑。这是如何工作的，当您`SELECT`计算列的值时，计算会自动完成。当您需要非常频繁地重用相同的逻辑时，此方法适用，因为这是对表结构的永久更改。

*   封装逻辑的一种好方法是在视图中。这有点像持久列，除了结果可以组合来自多个表的数据。由于视图只能包含单个`SELECT`语句，因此您可以将其与此处介绍的任何其他方法结合使用。

*   派生表。这听起来很花哨，但概念很简单：将一个语句的结果`SELECT`用作另一个`SELECT`语句的输入。举个例子：

    ```
    DECLARE @test table
    (
        Col1 int,
        Col2 int
    );

    -- Result query (2)    
    SELECT
        a.Col1,
        (
            CASE
                WHEN a.Col3 < a.Col1 THEN 1  -- Use the computation
                ELSE 5
            END
        ) AS Col4
        FROM
        (
            -- Derived table (1)
            SELECT
                Col1,
                Col2 + Col1 AS Col3  -- Compute
                FROM @test t1
        ) a; 
    ```

    最内层查询首先发生 (1)，在外层查询 (2) 中，您可以使用内层查询的结果。继续嵌套，直到计算中不再有“层”。

*   公用表表达式 (CTE)。这类似于派生表，但语法略有不同，它们使您能够在主查询中多次重用逻辑。从本质上讲，CTE 就像只存在于单个查询中的视图。这是与上面相同的示例，使用 CTE 而不是派生表：

    ```
    DECLARE @test table
    (
        Col1 int,
        Col2 int
    );

    WITH a AS
    (
        -- CTE (1)
        SELECT
            Col1,
            Col2 + Col1 AS Col3  -- Compute
            FROM @test t1
    )
        -- Result query (2)    
        SELECT
            a.Col1,
            (
                CASE
                    WHEN a.Col3 < a.Col1 THEN 1  -- Use the computation
                    ELSE 5
                END
            ) AS Col4
            FROM a; 
    ```

对于您发布的查询，您将需要超过 2 层，因此您可能需要组合其中一些方法，或者只使用派生表来处理所有内容。最主要的是，应用这些方法后，您可能会发现不需要使用任何标量变量！

# jquery - 延迟加载图像会破坏锚链接

> ID：14202943
> 
> 赞同：2
> 
> 时间：2013-01-07T19:46:36.713
> 
> 标签：jquery, hyperlink, anchor, lazy-loading

我有一个单页网站，我在其中使用此脚本延迟加载图像：[http](http://appelsiini.net/projects/lazyload)
://appelsiini.net/projects/lazyload 现在，我在该页面上也有锚链接，例如`#footer`. 启用脚本后，指向延迟加载图像下方位置的锚链接会中断，因为加载图像时，内容会被下推。

所以不知何故需要重新计算位置，但我无法理解这背后的技术。我在这里找到了来自 Mozilla 的错误报告，其中存在完全相同的问题：[https](https://bugzilla.mozilla.org/show_bug.cgi?id=718321) ://bugzilla.mozilla.org/show_bug.cgi?id=718321 ，但我仍然无法理解他们是如何解决的。[在这里查看](https://github.com/mozilla/kitsune/commit/663d946)他们的 Git 更改日志实际上显示了他们是如何解决该问题的，但是因为我不了解必要的步骤，所以我无法重新创建它。

即使启用了延迟加载，如何重新计算锚位置以使锚链接再次工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-02-06T22:15:06.127

这是一个使用我自己的 jQuery 动画的实现。

**HTML**

```
<a href="#myDestinationAnchor" class="someClassName">Location</a> 
```

**JavaScript**

```
 // When the user clicks on an anchor with a class name "someClassName"...
$('body').on('click', 'a.someClassName', function(e) {

    // Get the hash. In this example, "#myDestinationAnchor".
    var targetSelector = this.hash;
    var $target = $(targetSelector);

    // Animate the scroll to the destination...
    $('html, body').animate(
        {
            scrollTop: $target.offset().top // Scroll to this location.
        }, {
            // Set the duration long enough to allow time
            // to lazy load the elements.
            duration: 2000,

            // At each animation step, check whether the target has moved.
            step: function( now, fx ) {

                // Where is the target now located on the page?
                // i.e. its location will change as images etc. are lazy loaded
                var newOffset = $target.offset().top;

                // If where we were originally planning to scroll to is not
                // the same as the new offset (newOffset) then change where
                // the animation is scrolling to (fx.end).
                if(fx.end !== newOffset)
                    fx.end = newOffset;
            }
        }
    );
}); 
```

[jQuery Animate](http://api.jquery.com/animate/)的参考。

PS 我正在使用[jQuery Lazy](https://github.com/eisbehr-/jquery.lazy)插件进行延迟加载。对这个插件没有特别的依赖（我知道），但我想我会提到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T23:26:45.577

好的，所以我对延迟加载图像进行了很好的阅读，并且我还设法解决了上述问题，但最后我没有使用它。你为什么问？因为虽然延迟加载图像有一些优点，但总是有很多缺点——触摸设备、旧浏览器和 Internet Explorer 以及当然 SEO 的问题，因为谷歌的机器人不会执行 JavaScript 或进入`<noscript>`标签，所以他们看到的只是占位符图片。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T20:52:01.430

因为我必须使用延迟加载，所以会要求您详细说明您是如何解决问题的（在您选择不使用它之前）。但是，我已经为自己制定了解决方案。鉴于我的网站是一个寻呼机/线性体验（[http://thomasgrist.tumblr.com/](http://thomasgrist.tumblr.com/)），它只是一次又一次地跳转到下一个锚点，我只需要提前加载一定数量（在视口中可见）我可以使用延迟加载插件中的阈值设置：http: [//www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)（无论如何，谢谢你让我走上了正确的道路）

# sql - SQLite - 在范围内选择随机日期时间

> ID：14202944
> 
> 赞同：3
> 
> 时间：2013-01-07T19:46:44.080
> 
> 标签：sql, random, sqlite

我不熟悉 SQLite。有人可以帮我生成随机日期时间值吗？

我试图从这个开始（它用于 MS-SQL）：

```
select dateadd(
               millisecond, 
               cast(86400000 * RAND() as int), 
               convert(time, '00:00')
               ); 
```

但 sqlite 返回错误：`invalid column millisecond`。

我需要一些东西，它允许生成具有指定最小和最大日期的随机日期时间，但**现在我认为只需要知道如何将数字转换为日期**。

我使用 SQLite 版本 3.7.15.1。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T20:49:19.027

该[`random()`函数](http://www.sqlite.org/lang_corefunc.html#random)生成随机 64 位整数。带有参数
的[`strftime()`函数](http://www.sqlite.org/lang_datefunc.html)`'%s'`将日期/时间字符串转换为自 1970 年以来的秒数。带有修饰符
的[`datetime()`函数](http://www.sqlite.org/lang_datefunc.html)`'unixepoch'`将秒数转换为日期/时间字符串。

要将随机整数转换为所需的秒范围，请使用模运算符 ( `%`)，将最小/最大日期之间的秒差作为范围，并将其添加到开始日期。例如，以下将生成 2000 年 1 月的随机时间戳：

```
SELECT datetime(strftime('%s', '2000-01-01 00:00:00') +
                abs(random() % (strftime('%s', '2000-01-31 23:59:59') -
                                strftime('%s', '2000-01-01 00:00:00'))
                   ),
                'unixepoch'); 
```

# sql - Oracle：按月分区表

> ID：14202945
> 
> 赞同：0
> 
> 时间：2013-01-07T19:46:45.550
> 
> 标签：sql, oracle, date, partitioning

我的解决方案（德语几个月）：

```
PARTITION BY LIST ((to_char(GEBURTSDATUM, 'Month'))) 
(  
  PARTITION p1 VALUES('JANUAR'),  
  PARTITION p2 VALUES('Februar'), 
  PARTITION p3 VALUES('MÄRZ'),  
  PARTITION p4 VALUES('APRIL'), 
  PARTITION p5 VALUES('MAI'),  
  PARTITION p6 VALUES('JUNI'), 
  PARTITION p7 VALUES('JULI'), 
  PARTITION p8 VALUES('AUGUST'),
  PARTITION p9 VALUES('SEPTEMBER'),
  PARTITION p10 VALUES('OKTOBER'), 
  PARTITION p11 VALUES('NOVEMBER'),
  PARTITION p12 VALUES('DEZEMBER') 
); 
```

由于该`to_char`功能，这不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T19:50:54.723

在 11g 中，您可以通过定义虚拟列来使用基于函数的分区：[http ://www.oracle-base.com/articles/11g/partitioning-enhancements-11gr1.php#virtual_column_based_pa​​rtitioning](http://www.oracle-base.com/articles/11g/partitioning-enhancements-11gr1.php#virtual_column_based_partitioning)

否则，您必须为分区月份手动定义和维护一个单独的列。

我建议在任何一种情况下都使用月份数字而不是名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-16T11:55:05.523

如果表有日期列，下面的语句可以作为从今天开始每月分区的例子（Oracle 11g）：

```
PARTITION BY RANGE (date_column)
            INTERVAL (NUMTODSINTERVAL(1,'month') )
             (PARTITION p_first VALUES LESS THAN ('16-MAY-2016')); 
```

# javascript - 函数参数是原生元素还是 jQuery 集？

> ID：14202946
> 
> 赞同：3
> 
> 时间：2013-01-07T19:46:51.713
> 
> 标签：javascript, jquery

我正在用 JavaScript 编写一个通用的帮助函数。它访问`className`元素的属性。

但由于我使用的是 jQuery，事实证明有时作为参数传递的元素实际上是一个数组（一个 jQuery 集）。

如果参数是元素，则使用参数的最简单方法是什么，或者如果参数是集合，则从集合中获取第一个元素是什么？jQuery 有这方面的工具吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T19:48:05.743

你总是想要一个原生元素？每个 jQuery 对象都有一个属性`jquery`（包含 jQuery 版本），因此您可以使用它来检查您获得的元素是否可能是 jQuery 对象：

```
obj = obj.jquery ? obj[0] : obj; 
```

如果你不喜欢打鸭子：

```
obj = (obj instanceof jQuery) ? obj[0] : obj; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-07T19:49:44.677

您可以使用以下方法测试对象是否为 jQuery 对象`instanceof`：

```
if (myObject instanceof jQuery) {
    // use $.each to loop over myObject and get class names of all
    // or just use myObject[0].className to return only the first
} else {
    // it's not a jQuery object
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T19:50:58.313

如果您想将单个元素、元素数组或 jQuery 对象传递给同一方法，请执行以下操作：

```
function stuff(element) {
    element = [].concat(element)[0];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T19:51:31.557

*如果你必须同时*处理jQuery 对象和非 jQuery 元素，这就有点困难了。请记住，jQuery 集合中的每个元素可能有不同`className`的 s，即第一个和其他元素可能不一样。

它的效率有点低，但这会起作用：

```
function (obj) {
   var className = $(obj).get(0).className;
} 
```

包装一个 jQuery 对象`jQuery()`什么都不做，但是包装元素允许你通过`.get`. 这是低效的，因为您可能有额外的`$()`电话。

如果这不好，你可以检查一下，`obj.hasOwnProperty('className')`因为 jQuery 对象*通常*不应该有它，但我认为这风险更大。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T19:54:37.350

> jQuery 对象是元素还是元素数组？

严格来说，两者都不是。

jQuery 对象是具有某些 Array 功能的 Javascript 对象。在大多数方面，您可以将其用作元素数组。

* * *

如果 jQuery 对象可能包含多个元素，而您只想要第一个，则可以使用以下[`first`方法](http://api.jquery.com/first/)获取：

```
elements = elements.first(); 
```

如果参数可以是元素、元素数组或 jQuery 对象，则可以将其包装在 jQuery 对象中以处理所有情况：

```
elements = $(elements).first(); 
```

# bash - 对输入的文件名执行 nohup 的 Shell 脚本

> ID：14202947
> 
> 赞同：1
> 
> 时间：2013-01-07T19:46:55.903
> 
> 标签：bash, shell

我不断地运行命令，比如

```
nohup psql -d db -f foo1.sql >& foo1.out &
nohup psql -d db -f foo2.sql >& foo2.out & 
```

我想知道如何创建一个 shellscript，它将文件名参数（如 foo1.sql）作为输入并运行上面的命令。

如何编写一个名为 test 的脚本，以便该命令`./test foo1.sql`将执行该命令

```
nohup psql -d db -f foo1.sql >& foo1.out & 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:53:03.660

试试这个

```
#!/bin/bash

outputFile="$(echo $1 | cut -d\. -f 1).out"

nohup psql -d db -f "$1" >& "$outputFile" & 
```

`./test(foo1.sql)`它不是用but调用的`./test foo1.sql`，如编辑问题后所示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T19:59:37.153

调用脚本的语法是：

```
./stest foo1.sql 
```

有一个内置的外壳叫做`test`，所以不要调用你的脚本。传递参数时不需要括号。

脚本非常简单：

```
if (( $# < 1 ))
then
    echo "Insufficient arguments" >&2
    exit 1
fi

name=${1%%\.*}
nohup psql -d db -f "$1" >& "$name.out" & 
```

# c++ - 等待逐步生成的向量的片段

> ID：14202950
> 
> 赞同：2
> 
> 时间：2013-01-07T19:47:15.790
> 
> 标签：c++, concurrency

我想在 C++ 中实现以下内容，但我不知道哪一种是更简单的并发管理方法。

我有一个线程`Producer`正在将元素添加到 vector 的后面`V`。一旦添加了一个元素，它就被认为是只读的。为了简单起见，假设我可以使用一个不会在增长时使迭代器失效的向量，或者我将使用读写互斥锁来处理锁​​定。但是向量的读者有一个问题：他们可能想要访问 的多个连续元素`V`，其中一些可能尚未生成。

在任何给定时刻，`V`都有一些元素，我将用“o”表示，并且有一些可能`Producer`会添加更多元素，我将用“w”表示。因此， `V` *概念上*的数据如下所示：

```
o o o o w w w w 
```

我强调“概念上”，因为我不想将物理放入`V`尚未生成的元素/假人中。现在，其中一位读者对尚未完全生成`R`的部分感兴趣：`V`

```
o o o o w w w w
    | | | |
    ---R--- 
```

因此，R 需要等待`V`增长，直到它包含 R 想要的所有元素。我可以在任何给定时刻`j`使用最高生成元素的索引来增加索引。`V`问题是，是否有一种简单的方法`R`可以等待该索引的特定值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:05:09.157

假设您有一个消费者，您可以执行以下操作：

```
 ...
    pthread_mutex_lock(&mtx);
    while (array.size() < targetSize) {
        pthread_cond_wait(&cv, &mtx);
    }
    // read data from array
    // remove data from array consumed
    pthread_mutex_unlock(&mtx);
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T21:05:36.613

好的，基于聊天，我相信这里的问题不是如何*正确*同步，而是如何*最大限度地减少仍然无法进行的线程的虚假唤醒*。

（作为参考，这根本不是我从原始问题中得到的印象）。

所以，我们可以做一个简单的实现，它保留明确控制哪些阅读器被安排......

```
#include <queue>
#include <thread>

// associate a blocked reader's desired index with the CV it waits on
struct BlockedReadToken {
    int index_;
    std::condition_variable cv_;
    explicit BlockedReadToken(int index) : index_(index) {}
};
struct TokenOrder {
    bool operator() (BlockedReadToken const *a,
                     BlockedReadToken const *b)
    {
        return a->index_ < b->index_;
    }
};

class BlockedReaderManager
{
    std::priority_queue<BlockedReadToken*,
                        std::vector<BlockedReadToken*>, TokenOrder> queue_;
public:
    // wait for the actual index to reach the required value
    void waitfor(std::unique_lock<std::mutex> &lock,
                 int required, int const &actual)
    {
        // NOTE: a good pooled allocator might be useful here
        // (note we only allocate while holding the lock anyway,
        // so no further synchronization is required)
        std::unique_ptr<BlockedReadToken> brt(new BlockedReadToken(required));
        queue_.push(brt.get());
        while (actual < required)
            brt->cv_.wait(lock);
    }
    // release every reader blocked waiting for the new actual index
    // (don't wake any whose condition isn't satisfied yet)
    void release(std::unique_lock<std::mutex> &lock, int actual)
    {
        while (!(queue_.empty() || queue_.top()->index_ > actual)) {
            queue_.top()->cv_.notify_one();
            queue_.pop();
        }
    }
}; 
```

还有一些容器的包装器，它为读者使用这种阻塞机制：

```
template <typename RandomAccessContainer>
class ProgressiveContainer
{
    int size_;
    std::mutex mutex_;
    BlockedReaderManager blocked_;
    RandomAccessContainer container_;
public:
    typedef typename RandomAccessContainer::size_type size_type;
    typedef typename RandomAccessContainer::value_type value_type;

    void push_back(value_type const &val) {
        std::unique_lock<std::mutex> guard(mutex_);
        container_.push_back(val);
        ++size_;
        blocked_.release(guard, size_);
    }
    void check_readable(int index) {
        // could optimistically avoid locking with atomic size here?
        std::unique_lock<std::mutex> guard(mutex_);
        if (size_ < index)
            blocked_.waitfor(guard, index, size_);
    }
    // allow un-locked [] access and require reader to call check_readable?
    value_type& operator[](int index) {
        return container_[index];
    }
    value_type& at(int index) {
        check_readable(index);
        return container_[index];
    }
}; 
```

# ide - 网络风暴错误？项目窗格丢失，我碰到热键了吗？

> ID：14202951
> 
> 赞同：1
> 
> 时间：2013-01-07T19:47:17.500
> 
> 标签：ide, webstorm

IT 让我升级到 V5，但我看不到我的目录列表。
也许我碰到了一个我不知道的热键？您可以在此处查看屏幕截图[http://dl.dropbox.com/u/23768853/help.jpg](http://dl.dropbox.com/u/23768853/help.jpg)

我正在梳理所有的偏好，但到目前为止还没有，有人知道如何让它回来吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:09:37.067

固定的 ！IT 将应用程序重新复制到应用程序文件夹中，webstorm 再次正常工作。令人惊讶的是，即使在安装损坏后该应用程序也可以运行。

# php - 在类包装器中缓存 PDO 准备好的语句

> ID：14202953
> 
> 赞同：3
> 
> 时间：2013-01-07T19:47:27.023
> 
> 标签：php, mysql, pdo, prepared-statement

我正在将旧（杂乱）代码从 mysql_query() 更新为 PDO。

我知道使用准备好的语句对安全性和性能都有好处，但是要发挥性能方面的作用，必须先进行准备，然后再执行多次。这意味着对我的代码进行重大重写，这可能不值得提高性能，但后来我想知道我是否可以用另一种方式来做。

我提出的解决方案是将 PDO 类包装如下：

```
 class PDOCached extends PDO {

      private $PreparedStatementCache;

      public function prepare($query) {

          if (!isset($this->PreparedStatementCache[$query])) {              
                $this->PreparedStatementCache[$query]=parent::prepare($query);
          }

          return $this->PreparedStatementCache[$query];
      }
 } 
```

它有效（即我得到相同的结果），但我不清楚它是否允许我利用性能提升。任何反馈/意见表示赞赏。

注意：我知道这没有考虑 $driver_options，但是对于这个练习来说这并不重要。

* * *

更新：

我已经修改了类以使缓存成为可选：

```
 class PDOCached extends PDO {

      private $PreparedStatementCache;

      // WARNING: Does not take into account $driver_options
      public function prepare($query, $cached=false) {

          if (!$cached) return parent::prepare($query);

          if (!isset($this->PreparedStatementCache[$query])) {  
                // WARNING: Assumes try/catch error handling            
                $this->PreparedStatementCache[$query]=parent::prepare($query);
          }

          return $this->PreparedStatementCache[$query];
      }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:56:57.853

从技术性能的角度来看，您是正确的。您将从缓存 PDOStatement 中受益（必须在同一连接中使用）。但是，在同一个 Mysql 连接和 PHP 请求中多久运行一次查询，继续执行另一个查询，然后返回到第一个查询？这似乎会让人感到困惑，并可能导致错误地更改绑定变量（如果您使用 bindParam()）。

我认为你会从中找到的性能提升只是微优化，你只会增加复杂性——这不是一件好事，因为它已经足够复杂了，你需要花时间尝试清理你的循环查询以不有重叠的嵌套查询需要。

顺便说一句：仅安全性就足以成为转向准备好的陈述并投入转换时间的充分理由。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-01-25T15:13:40.200

我在持久层 PDO 包装类中使用了缓存的准备好的语句模式，该类包含一个“永久”绑定到查询结果的变量数组作为其成员之一。这样我就可以将其用作迭代器。

# java - 在 Java 中有没有一种方法来定义 char 类型的枚举

> ID：14202959
> 
> 赞同：5
> 
> 时间：2013-01-07T19:47:58.037
> 
> 标签：java, enums

我想知道我们是否可以拥有 char 类型的 enaum 值？我想做这样的事情：

```
public enum Enum    {char X, char Y};
...
Enum a=Enum.X
if (a=='X')
{// do something} 
```

**无需调用任何额外的函数将 enum 转换为 char**（因为我希望它已经是 char ）。有没有办法这样做？

*   事实上，我试图通过这种方式定义一个 char 类型的受限变量，它只接受两个 char 值“X”或“Y”之一。因此，如果我们提供其他任何内容，例如“z”，编译器就会抱怨。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-07T19:51:59.663

不。

但是转换方法一点也不难。

```
public enum SomeChar {
    X('X'), Y('Y');

    public char asChar() {
        return asChar;
    }

    private final char asChar;

    SomeChar(char asChar) {
        this.asChar = asChar;
    }
} 
```

进而：

```
if (a.asChar() == 'X') { ... } 
```

如果您不喜欢 asChar 字段/构造函数，您甚至可以将 getter 实现为`return name().charAt(0)`.

如果您使用的是[lombok](https://projectlombok.org/)，这将变得更加容易：

```
@RequiredArgsConstructor
@Getter
public enum SomeChar {
    X('X'), Y('Y');
    private final char asChar;
}

if (a.getAsChar() == 'X') { ... 
```

* * *

顺便说一句，命名的枚举`Enum`会令人困惑，因为大多数人会`Enum`在源代码中看到并假设它是`java.lang.Enum`. 通常，隐藏常用/导入的类名是危险的，并且类不会比`java.lang.*`（始终导入）更常见。

# objective-c - 宏编译器错误：当参数名称出现在别处时出现“解析问题”

> ID：14202963
> 
> 赞同：0
> 
> 时间：2013-01-07T19:48:29.507
> 
> 标签：objective-c, macros, preprocessor-directive

我尝试制作一个简单的宏来在 iOS 中创建和显示一个简单的“ok”对话框：

```
#define ALERT_DIALOG(title,message) \
do\
{\
    UIAlertView *alert_Dialog = [[UIAlertView alloc] initWithTitle:(title) message:(message) delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];\
    [alert_Dialog show];\
} while ( 0 ) 
```

如果我尝试在我的代码中使用它：

```
ALERT_DIALOG(@"Warning", @"Message"); 
```

我得到错误：

> 解析问题。预期的 ']'

并且错误似乎指向第二个`@`之前`"Message"`。

但是，如果我只是复制粘贴宏，我不会收到此错误：

```
NSString *title = @"Warning";
NSString *message = @"Message";
do
{
    UIAlertView *alert_Dialog = [[UIAlertView alloc] initWithTitle:(title) message:(message) delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert_Dialog show];
} while ( 0 ); 
```

是否反对在宏中使用 Objective-c 结构？或者那是别的什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:14:07.140

你的宏的问题是***两个出现***的`message`in

```
... [[UIAlertView alloc] initWithTitle:(title) message:(message) ... 
```

替换为`@"Message"`，导致

```
.... [[UIAlertView alloc] initWithTitle:(@"Warning") @"Message":(@"Message") ... 
```

这会导致语法错误。

I don't think that it is really worth defining this as a macro, but if you do, you have to use macro arguments which do not occur at places where they should not be expanded, e.g.

```
#define ALERT_DIALOG(__title__,__message__) \
do\
{\
    UIAlertView *alert_Dialog = [[UIAlertView alloc] initWithTitle:(__title__) message:(__message__) delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];\
    [alert_Dialog show];\
} while ( 0 ) 
```

or similar.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T19:56:40.703

您可以将其声明为 C 函数，而不是将其声明为宏：

```
void ALERT_DIALOG(NSString *title, NSString *message) {
    UIAlertView *alert_Dialog = [[UIAlertView alloc] initWithTitle:(title) message:(message) delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];\
    [alert_Dialog show];
} 
```

# ruby-on-rails - 需要在控制器中授权 active_admin/devise ：仅索引显示编辑销毁

> ID：14202966
> 
> 赞同：1
> 
> 时间：2013-01-07T19:48:46.197
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, activeadmin

我试图在我的控制器中要求授权 purcahses_controller.rb 这只是一个带有 Show Edit Destroy 的订单模型。我可以在 active_admin 中查看它，url 是 localhost/admin/purchases。但问题是我也可以在 localhost/purchases 上查看它。它列出了所有订单并允许所有功能。如果用户没有登录，我想用一个简单的未经授权的消息来路由到 rooturl。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T20:32:05.120

您可以执行以下操作，它将为您提供重定向到您认为合适的任何路径的选项。

在文件中

> 配置/初始化程序/active_admin.rb

进行以下更改

```
config.authentication_method = :authenticate_active_admin_user! 
```

然后在您的应用程序控制器中添加如下内容：

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  def authenticate_active_admin_user!
    authenticate_user!
    unless current_user.superadmin?
      flash[:alert] = "Unauthorized Access!"
      redirect_to "/admin/login"
    end
  end
end 
```

在您的 purchase_controller 中添加以下 before_filter 行：

```
before_filter :authenticate_active_admin_user! 
```

希望这会有所帮助！〜凯文

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-13T23:16:35.007

`authenticate_active_admin_user`使您可以访问管理员身份验证用户，这将引导您获得授权，无论您在管理员中调用什么。

```
controller do 
  skip_before_action :authenticate_active_admin_user, only: :action
end 
```

[https://www.rubydoc.info/gems/nsm-activeadmin/0.2.2/ActiveAdmin%2FResourceController%3Aauthenticate_active_admin_user](https://www.rubydoc.info/gems/nsm-activeadmin/0.2.2/ActiveAdmin%2FResourceController%3Aauthenticate_active_admin_user)

[https://github.com/activeadmin/activeadmin/blob/master/lib/active_admin/base_controller.rb#L38](https://github.com/activeadmin/activeadmin/blob/master/lib/active_admin/base_controller.rb#L38)

# javascript - 检查字符串是否包含任何图像标签的最简单方法是什么？

> ID：14202976
> 
> 赞同：5
> 
> 时间：2013-01-07T19:49:40.603
> 
> 标签：javascript, jquery

例如我有文字：

```
"testestestestt testestestes <img src='image.jpg'>" 
```

我想编写检查字符串是否为`img`标签并返回的函数`true`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-07T19:50:38.000

使用正则表达式：

```
"testestestestt testestestes <img src='image.jpg'>".match(/<img/) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T19:52:27.747

```
var str = "testestestestt testestestes <img src='image.jpg'>";
var hasImg = !!$('<div />').html(str).find('img').length 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T21:41:01.107

显然，不建议使用正则表达式来解析 HTML，但是，根据您使用它的方式，您可能希望确保`img`标签具有相应的结束标签。这是一个稍微健壮的正则表达式：

```
if("<img>TestString</img>".match(/<img[^<]*>[\w\d]*<\/img>|<img[^\/]*\/>/i))
{
  alert('matched');
}
else
  alert('nope'); 
```

匹配的测试用例：

```
- blahsdkfajsldkfj<img blah src=\"\">iImmage123dfasdfsa</img>
- blahsdkfajsldkfj<img>iImmage123dfasdfsa</img>asdfas
- <img src=\"\"></img>
- <img></img>
- <img /> 
```

无与伦比的测试用例：

```
- <img (other regex would match this)
- <img> 
```

匹配后，您可以使用 XML 或 HTML 解析器轻松处理它，然后检查它是否具有`src`属性等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-10T15:04:14.480

实际上，给出的答案很快，但他们可能会面临一些错误预测的特殊情况，`img tags`例如`I posted my <picture> in <imgur>`

```
`I posted my <picture> in <imgur>`.match(/<img/)
// ["<img", index: 25, ...] 
```

此外，在现代浏览器中，与[此答案](https://stackoverflow.com/a/5296314/10321531)相对应的字符串中有更快的“<img”关键字搜索版本。

```
"testestestestt <img src='image.jpg'>".indexOf('<img') > -1 
```

但最可靠的方法是要么使用完整的`img tag`正则表达式匹配器，要么让浏览器完成它们已经完成的事情。

```
const hasImage = htmlString => {
  var div = document.createElement('div');
  div.innerHTML = htmlString

  return Boolean(div.querySelector('img'));
}

// tests
hasImage("testestestestt <img src='image.jpg'/>")
// true
hasImage("testestestestt <img src='image.jpg/>")
// false
hasImage("I posted my <picture> in <imgur>")
// false 
```

`hasImage`函数深受[这个答案的启发](https://stackoverflow.com/a/494348/10321531)

# python - Python 中的管道输出：数据和消息的多个通道？

> ID：14202982
> 
> 赞同：2
> 
> 时间：2013-01-07T19:49:57.900
> 
> 标签：python, command-line

我正在做一些 python 编程，我想将一个程序的输出“管道”到另一个程序。使用 sys.stdin 和 sys.stdout 很容易做到这一点。但是，我还希望能够将信息和警告消息打印到终端。是否有任何（简单）方法可以拥有多个通道，将消息打印到终端，但将数据发送到另一个程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T19:54:52.407

您可以`stderr`用于终端输出和`stdout`管道。

您可能会发现[subprocess.Popen](http://docs.python.org/2/library/subprocess.html#popen-constructor)很有用。它生成另一个程序作为一个单独的进程，并允许您定义文件描述符`stdin`，`stdout`并`stderr`根据您的意愿。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-07T19:56:26.740

这几乎[`logging`](http://docs.python.org/2/library/logging.html)就是构建模块的目的。您可以将消息记录到您可以从代码中的任何位置任意创建和命名的记录器，然后通过将处理程序附加到记录器，将数据推送到您想要的任何消费者或消费者。

如果这对你不起作用，moooeeeep 的 subprocess 建议可能是下一个最好的探索途径。这是完成与覆盖 sys.stdout 相同的事情的一种文明方式，这是只有野蛮人和体弱者应该做的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T21:30:09.883

正如其他人所说，`stdout`用于数据和`stderr`用户交互。以下是在最近的 python 版本（即 3.x 和 2.6 或更高版本）中如何做到这一点：

```
import sys
print("data", file=sys.stdout)
print("more data") # sys.stdout is the default

print("user interaction", file=sys.stderr) 
```

结果：

```
#!/usr/bin/env python
desktop➜  ~  ./tmp.py            
data
more data
user interaction
desktop➜  ~  ./tmp.py > /dev/null 
user interaction
desktop➜  ~  ./tmp.py 2&> /dev/null 
data
more data 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T23:25:55.010

老实说，当我想快速做到这一点时，我不会弄乱代码，我只是使用 tee。它是一个 *nix 实用程序，可以完成您所说的拆分管道以进行显示和管道的操作。您可以进一步限制使用 grep 显示的内容。非常适合调试使用管道的东西。如果这是您的生产系统的一部分，尽管除非您必须这样做，否则我可能不会使用管道传递信息。如果这样做，请记录您的错误/警告和 tail -f 您的日志。

我不知道真正的 python 答案，但它完成了工作。

# facebook - facebook like button bug（带有冷缓存）

> ID：14202984
> 
> 赞同：0
> 
> 时间：2013-01-07T19:49:59.360
> 
> 标签：facebook, facebook-graph-api, facebook-like, facebook-javascript-sdk

我正在询问有关如何继续报告以下错误的建议：

*****我将错误描述为使用“隐私浏览”，因为这是我可以可靠地重现它的方式；实际问题发生在浏览器具有纯冷缓存时，例如清除 cookie 和所有内容时，例如

以“隐私浏览”模式启动任何浏览器，转到（带冷缓存）任何“喜欢按钮”URL，例如

[https://www.facebook.com/plugins/like.php?href=https://www.facebook.com/BatePapoUOL&send=false&layout=button_count&width=450&show_faces=false&action=like&colorscheme=light&font=arial&height=21](https://www.facebook.com/plugins/like.php?href=https://www.facebook.com/BatePapoUOL&send=false&layout=button_count&width=450&show_faces=false&action=like&colorscheme=light&font=arial&height=21)

单击“喜欢”后，页面变为空白，并且在 firebug 的（和类似的）网络页面上记录了一些网络错误。

响应头如下（请注意其内容长度为零）：

```
HTTP/1.1 200 OK
Cache-Control: private, no-cache, no-store, must-revalidate
Expires: Sat, 01 Jan 2000 00:00:00 GMT
Pragma: no-cache
Strict-Transport-Security: max-age=0
X-Content-Type-Options: nosniff
X-WebKit-CSP: default-src *;script-src https://*.facebook.com http://*.facebook.com https://*.fbcdn.net http://*.fbcdn.net *.facebook.net *.google-analytics.com *.virtualearth.net *.google.com 127.0.0.1:* *.spotilocal.com:* chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl 'unsafe-inline' 'unsafe-eval' https://*.akamaihd.net http://*.akamaihd.net;style-src * 'unsafe-inline';connect-src https://*.facebook.com http://*.facebook.com https://*.fbcdn.net http://*.fbcdn.net *.facebook.net *.spotilocal.com:* https://*.akamaihd.net ws://*.facebook.com:* http://*.akamaihd.net;
X-XSS-Protection: 1; mode=block
Content-Type: text/html; charset=utf-8
X-FB-Debug: P5P8mjHfEje2BZgxUL+/gi9dj8+wrPR0zMMSlwrdAAo=
Date: Mon, 07 Jan 2013 19:08:53 GMT
Connection: keep-alive
Content-Length: 0 
```

我还尝试为我的喜欢按钮完成@此 URL 的新代码无济于事： [https ://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:21:01.093

Facebook正在解决这个问题。更多信息在这里

[https://developers.facebook.com/bugs/403206233093888](https://developers.facebook.com/bugs/403206233093888)

# javafx-2 - JavaFX 2 的便携性如何？

> ID：14202987
> 
> 赞同：7
> 
> 时间：2013-01-07T19:50:17.297
> 
> 标签：javafx-2, portability

我正在考虑在我的**64 位 Windows 7 机器上启动一个****JavaFX**项目。我正在做的是设计一个全屏控制台应用程序。除了条形码扫描仪之外，它不是交互式的。

 **我正在为我认为是 Ubuntu 笔记本电脑或其他一些 Linux 变体设计这个，尽管不同的 Windows 操作系统也是可能的（以及 32 位）。据我了解，Java FX 版本 2.x 在可移植性方面比其前身有了很大进步，但我想在这里询问社区他们在部署 JavaFX 应用程序方面的经验。

**您是否在各种不同的架构上成功使用过它们？您遇到过哪些问题？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T21:02:07.973

查看 EstiMate 以获取可通过双击运行的一体化 jar 示例。

[https://bitbucket.org/atill/estimate/downloads](https://bitbucket.org/atill/estimate/downloads)

它需要安装 Java7u10。我计划稍后使用 javafx maven 插件为它制作一个合适的安装程序。 [https://github.com/zonski/javafx-maven-plugin](https://github.com/zonski/javafx-maven-plugin)。我没有在 Linux 或 Mac 上测试过它，但它确实适用于 winXP 32 位和 64 位 windows7。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T00:41:35.407

只要您的条形码扫描仪在 ubuntu 上的工作方式与在 win 上的工作方式相同，并且您不使用任何外部库，您就不会注意到应用程序中这些系统之间的差异。

我发现在 ubuntu 上安装 oracle JRE 是最困难的任务。（使用 JRE_HOME 等）即使在 Archlinux 上也比 ubuntu 更容易。

尽管如此，一旦设置了 JRE，您的应用程序甚至可以在 Raspberry Pi（它是 ARM 而不是 x86）上运行

记住系统之间的文件系统差异。**

# ios - iOS 创建 Numbers (CSV) 文件并打开？

> ID：14202996
> 
> 赞同：0
> 
> 时间：2013-01-07T19:51:11.320
> 
> 标签：ios, cocoa-touch, csv

任何人都知道我是否创建了一个 CSV 文件，将其存储在应用程序的 Document 文件夹中，是否可以使用*Apple 的 Numbers 应用程序*打开它？

任何用于打开 Numbers 应用程序的示例代码，非常感谢。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:00:22.520

好的，经过更多的挖掘，我找到了答案。

如果你实现了 QuickLook *QLPreviewController* ()。然后你可以很容易地打开一个网址：

```
#import <QuickLook/QuickLook.h>
- (IBAction)previewCSV:(id)sender
{
    [_previewController reloadData]; // triggers the refresh (if your file changes)
    [self presentModalViewController:_previewController animated:YES];
}

- (NSInteger)numberOfPreviewItemsInPreviewController:(QLPreviewController *)controller
{
    return 1;
}

- (id <QLPreviewItem>)previewController:(QLPreviewController *)controller previewItemAtIndex:(NSInteger)index
{
    NSLog(@"%s", __FUNCTION__);
    return [NSURL fileURLWithPath:@"path/to/your/app/document/folder/file.csv"];
} 
```

这将打开预览窗口，您将获得（免费 ;-）一个操作按钮（右上角），允许您使用已安装的应用程序（电子邮件、PDF、Numbers 等）打开文件。您还可以打印 (AirPrint)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T20:22:41.977

> 任何人都知道我是否创建了一个 CSV 文件，将其存储在应用程序的 Document 文件夹中，是否可以使用 Apple 的 Numbers 应用程序打开它？

不，你不能。您可以创建一个并将其存储到用户 iCloud，以便可以从 Numbers 应用程序访问它。由于 Apple 的沙盒限制，其他应用程序无法访问存储在您的应用程序目录中的项目。

> 任何用于打开 Numbers 应用程序的示例代码，非常感谢。

Numbers 没有公开的自定义 URL 方案。从您自己的应用程序中启动 Numbers 应用程序的唯一方法是让用户打开兼容的文件扩展名（.xls、.numbers、.csv）并选择 Numbers 作为应用程序来打开它。