# StackOverflow 问答 15601000-15601999

# url-rewriting - rewriterules 删除 url 中间的 .php

> ID：15601000
> 
> 赞同：1
> 
> 时间：2013-03-24T16:28:45.237
> 
> 标签：url-rewriting

我在将 url 从`/video.php/test-video`to重写时遇到问题`/video/test-video`

我目前使用：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?/$1 [L]
#RewriteRule ^/video/(.*)$ /video.php?/$1 [L] 
```

我已经`rewrite index.php/url-with-white-list`到了`/url-with-white-list`。现在我有了一个使用数据库中 url 的 video.php 文件。

我只是想改写`video.php/url-of-the-video`为`video/url-of-the-video`

我对 index.php 的重写有效，但我无法对 video.php 进行重写。

有任何想法吗 ？

提前，非常感谢！

有什么建议吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:32:28.943

解决方案：

```
RewriteCond %{REQUEST_URI}  ^(.*)video/(.*)
RewriteRule (.*)video/(.*)$ /video.php?/$2 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?/$1 [L] 
```

# vhdl - 关于 FPGA 中的顺序代码

> ID：15601001
> 
> 赞同：2
> 
> 时间：2013-03-24T16:29:02.500
> 
> 标签：vhdl, fpga

在VHDL中，`process`所有步骤都将按顺序执行，但我想知道FPGA如何按顺序执行步骤。我对如何在 FPGA 中生成顺序分配、功能和类似内容感到非常困惑，那么任何人都可以对这个话题有所了解吗？

```
process(d, clk)  
begin    
  if(rising_edge(clk)) then  
    q <= d;  
  else
    q <= q;  
  end if;    
end process; 
```

这只是一个简单 D-Latch 的代码，但如何在 FPGA 中实现呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T18:22:02.840

它不是按顺序“执行”的，而是合成器按顺序解释代码，并创建适合这种解释的硬件设计。

例如，如果您`signal`在时钟进程中为 a 赋值两次，第一个赋值将被忽略，而第二个赋值生效（请记住 a仅在语句`signal`末尾赋值，而不是立即赋值）：`process`

```
signal a : UNSIGNED(3 downto 0) := (others => '0');

(...)

process(clk)
begin
  if(rising_edge(clk)) then
    a <= a - 1;
    a <= a + 1;
  end if;
end process; 
```

上述过程将始终递增`a`1。类似地，如果您在`if`语句中有第二个赋值，则合成器将简单地创建两条路径`a`- 当语句未满时递减，当`if`语句未满时递增。

如果你使用变量，想法是一样的——尽管使用了中间值，因为变量会立即采用它们的新值。

但这一切都归结为合成器完成`process`了以顺序方式解释您的所有“魔术”，然后生成执行您所描述的硬件。

您的示例基本上描述了一个 d 触发器（Xilinx FPGA 工具 iirc 区分锁存器和触发器，因为触发器是边沿敏感的，而锁存器是电平敏感的），尽管方式与通常推荐的方式不同。

您基本上可以编写与以下相同的代码：

```
process(clk)
begin
  if(rising_edge(clk)) then
    q <= d;
  end if;
end process; 
```

在其他情况下，它将自动保持其值。这将作为 FPGA 内部的触发器实现。大多数 FPGA 由查找表和触发器块组成，可以映射很多不同的硬件。上面的代码将简单地绕过查找表，并且只使用其中一个块的触发器。

您可以通过查看特定 FPGA 的数据表来了解有关内部工作原理的更多信息。例如，对于 Spartan3 系列 FPGA，请查看[Xilinx Spartan3 FPGA 系列数据表的第 24 页](http://www.xilinx.com/support/documentation/data_sheets/ds099.pdf)

# html - 想知道所有分配给一个元素的 CSS

> ID：15601002
> 
> 赞同：-1
> 
> 时间：2013-03-24T16:29:16.043
> 
> 标签：html, css

嗨，我有一个博客，我想添加一个可以在[http://css-tricks.com/](http://css-tricks.com/)页脚看到的元素（当你向下滚动时，会看到一段关于 Codepen 和 ShopTalk 的文章）我想将它添加到我的博客页脚我有 HTML，但我不知道要添加什么 CSS。

我拥有的 HTML 是

```
<div class="bottom-footer-part footer-codepen">
  <a class="footer-logo" href="http://codepen.io">
    <img alt="CodePen Logo" src="http://cdn.css-tricks.com/wp-content/themes/CSS-Tricks-10/images/footer-logo-codepen.png">
  </a>
  <p>
    <a href="http://codepen.io">
      CodePen
    </a>
    is a social code playground for web designers and developers. Build demos, find inspiration, or troubleshoot code. With <a href="http://blog.codepen.io/documentation/pro-features/">CodePen PRO</a> you can teach students, pair program, host files, and more!
  </p>
</div>

<div class="bottom-footer-part footer-shoptalk">
  <a class="footer-logo" href="http://shoptalkshow.com">
    <img alt="ShopTalk Logo" src="http://cdn.css-tricks.com/wp-content/themes/CSS-Tricks-10/images/footer-logo-shoptalk.png">
  </a>
  <p>
    <a href="http://shoptalkshow.com">
      ShopTalk
    </a>
     is a podcast about all things web design and development hosted by Dave Rupert and me. The show is recorded live and covers the week in #hotdrama and listener Q&amp;A.
   </p>
</div> 
```

请参阅不要推荐我使用我尝试过的 Firebug，但我无法找到所有分配的 CSS。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T16:32:58.290

DOM 获取的简单性：

```
console.log(document.getElementById('textBox1').style); 
```

检查您的开发工具并查看所有对象的属性。如果需要，您可以遍历它们。

结果在我的 div 上：

```
CSSStyleDeclaration
0: "color"
alignmentBaseline: ""
background: ""
backgroundAttachment: ""
backgroundClip: ""
backgroundColor: ""
backgroundImage: ""
backgroundOrigin: ""
backgroundPosition: ""
backgroundPositionX: ""
backgroundPositionY: ""
backgroundRepeat: ""
backgroundRepeatX: ""
backgroundRepeatY: ""
backgroundSize: ""
baselineShift: ""
border: ""
borderBottom: ""
borderBottomColor: ""
borderBottomLeftRadius: ""
borderBottomRightRadius: ""
borderBottomStyle: ""
borderBottomWidth: ""
borderCollapse: ""
borderColor: ""
borderImage: ""
borderImageOutset: ""
borderImageRepeat: ""
borderImageSlice: ""
borderImageSource: ""
borderImageWidth: ""
borderLeft: ""
borderLeftColor: ""
borderLeftStyle: ""
borderLeftWidth: ""
borderRadius: ""
borderRight: ""
borderRightColor: ""
borderRightStyle: ""
borderRightWidth: ""
borderSpacing: ""
borderStyle: ""
borderTop: ""
borderTopColor: ""
borderTopLeftRadius: ""
borderTopRightRadius: ""
borderTopStyle: ""
borderTopWidth: ""
borderWidth: ""
bottom: ""
boxShadow: ""
boxSizing: ""
captionSide: ""
clear: ""
clip: ""
clipPath: ""
clipRule: ""
color: "rgb(255, 255, 255)"
colorInterpolation: ""
colorInterpolationFilters: ""
colorProfile: ""
colorRendering: ""
constructor: CSSStyleDeclarationConstructor
content: ""
counterIncrement: ""
counterReset: ""
cssText: "color: rgb(255, 255, 255); "
cursor: ""
direction: ""
display: ""
dominantBaseline: ""
emptyCells: ""
enableBackground: ""
fill: ""
fillOpacity: ""
fillRule: ""
filter: ""
float: ""
floodColor: ""
floodOpacity: ""
font: ""
fontFamily: ""
fontSize: ""
fontStretch: ""
fontStyle: ""
fontVariant: ""
fontWeight: ""
glyphOrientationHorizontal: ""
glyphOrientationVertical: ""
height: ""
imageRendering: ""
kerning: ""
left: ""
length: 1
letterSpacing: ""
lightingColor: ""
lineHeight: ""
listStyle: ""
listStyleImage: ""
listStylePosition: ""
listStyleType: ""
margin: ""
marginBottom: ""
marginLeft: ""
marginRight: ""
marginTop: ""
marker: ""
markerEnd: ""
markerMid: ""
markerStart: ""
mask: ""
maxHeight: ""
maxWidth: ""
minHeight: ""
minWidth: ""
opacity: ""
orphans: ""
outline: ""
outlineColor: ""
outlineOffset: ""
outlineStyle: ""
outlineWidth: ""
overflow: ""
overflowX: ""
overflowY: ""
padding: ""
paddingBottom: ""
paddingLeft: ""
paddingRight: ""
paddingTop: ""
page: ""
pageBreakAfter: ""
pageBreakBefore: ""
pageBreakInside: ""
parentRule: null
pointerEvents: ""
position: ""
quotes: ""
resize: ""
right: ""
shapeRendering: ""
size: ""
speak: ""
src: ""
stopColor: ""
stopOpacity: ""
stroke: ""
strokeDasharray: ""
strokeDashoffset: ""
strokeLinecap: ""
strokeLinejoin: ""
strokeMiterlimit: ""
strokeOpacity: ""
strokeWidth: ""
tableLayout: ""
textAlign: ""
textAnchor: ""
textDecoration: ""
textIndent: ""
textLineThrough: ""
textLineThroughColor: ""
textLineThroughMode: ""
textLineThroughStyle: ""
textLineThroughWidth: ""
textOverflow: ""
textOverline: ""
textOverlineColor: ""
textOverlineMode: ""
textOverlineStyle: ""
textOverlineWidth: ""
textRendering: ""
textShadow: ""
textTransform: ""
textUnderline: ""
textUnderlineColor: ""
textUnderlineMode: ""
textUnderlineStyle: ""
textUnderlineWidth: ""
top: ""
unicodeBidi: ""
unicodeRange: ""
vectorEffect: ""
verticalAlign: ""
visibility: ""
webkitAnimation: ""
webkitAnimationDelay: ""
webkitAnimationDirection: ""
webkitAnimationDuration: ""
webkitAnimationFillMode: ""
webkitAnimationIterationCount: ""
webkitAnimationName: ""
webkitAnimationPlayState: ""
webkitAnimationTimingFunction: ""
webkitAppearance: ""
webkitAspectRatio: ""
webkitBackfaceVisibility: ""
webkitBackgroundClip: ""
webkitBackgroundComposite: ""
webkitBackgroundOrigin: ""
webkitBackgroundSize: ""
webkitBorderAfter: ""
webkitBorderAfterColor: ""
webkitBorderAfterStyle: ""
webkitBorderAfterWidth: ""
webkitBorderBefore: ""
webkitBorderBeforeColor: ""
webkitBorderBeforeStyle: ""
webkitBorderBeforeWidth: ""
webkitBorderEnd: ""
webkitBorderEndColor: ""
webkitBorderEndStyle: ""
webkitBorderEndWidth: ""
webkitBorderFit: ""
webkitBorderHorizontalSpacing: ""
webkitBorderImage: ""
webkitBorderRadius: ""
webkitBorderStart: ""
webkitBorderStartColor: ""
webkitBorderStartStyle: ""
webkitBorderStartWidth: ""
webkitBorderVerticalSpacing: ""
webkitBoxAlign: ""
webkitBoxDirection: ""
webkitBoxFlex: ""
webkitBoxFlexGroup: ""
webkitBoxLines: ""
webkitBoxOrdinalGroup: ""
webkitBoxOrient: ""
webkitBoxPack: ""
webkitBoxReflect: ""
webkitBoxShadow: ""
webkitColorCorrection: ""
webkitColumnAxis: ""
webkitColumnBreakAfter: ""
webkitColumnBreakBefore: ""
webkitColumnBreakInside: ""
webkitColumnCount: ""
webkitColumnGap: ""
webkitColumnRule: ""
webkitColumnRuleColor: ""
webkitColumnRuleStyle: ""
webkitColumnRuleWidth: ""
webkitColumnSpan: ""
webkitColumnWidth: ""
webkitColumns: ""
webkitDashboardRegion: ""
webkitFilter: ""
webkitFontFeatureSettings: ""
webkitFontKerning: ""
webkitFontSizeDelta: ""
webkitFontSmoothing: ""
webkitFontVariantLigatures: ""
webkitGridColumn: ""
webkitGridColumns: ""
webkitGridRow: ""
webkitGridRows: ""
webkitHighlight: ""
webkitHyphenateCharacter: ""
webkitHyphenateLimitAfter: ""
webkitHyphenateLimitBefore: ""
webkitHyphenateLimitLines: ""
webkitHyphens: ""
webkitLineAlign: ""
webkitLineBoxContain: ""
webkitLineBreak: ""
webkitLineClamp: ""
webkitLineGrid: ""
webkitLineSnap: ""
webkitLocale: ""
webkitLogicalHeight: ""
webkitLogicalWidth: ""
webkitMarginAfter: ""
webkitMarginAfterCollapse: ""
webkitMarginBefore: ""
webkitMarginBeforeCollapse: ""
webkitMarginBottomCollapse: ""
webkitMarginCollapse: ""
webkitMarginEnd: ""
webkitMarginStart: ""
webkitMarginTopCollapse: ""
webkitMarquee: ""
webkitMarqueeDirection: ""
webkitMarqueeIncrement: ""
webkitMarqueeRepetition: ""
webkitMarqueeSpeed: ""
webkitMarqueeStyle: ""
webkitMask: ""
webkitMaskAttachment: ""
webkitMaskBoxImage: ""
webkitMaskBoxImageOutset: ""
webkitMaskBoxImageRepeat: ""
webkitMaskBoxImageSlice: ""
webkitMaskBoxImageSource: ""
webkitMaskBoxImageWidth: ""
webkitMaskClip: ""
webkitMaskComposite: ""
webkitMaskImage: ""
webkitMaskOrigin: ""
webkitMaskPosition: ""
webkitMaskPositionX: ""
webkitMaskPositionY: ""
webkitMaskRepeat: ""
webkitMaskRepeatX: ""
webkitMaskRepeatY: ""
webkitMaskSize: ""
webkitMatchNearestMailBlockquoteColor: ""
webkitMaxLogicalHeight: ""
webkitMaxLogicalWidth: ""
webkitMinLogicalHeight: ""
webkitMinLogicalWidth: ""
webkitNbspMode: ""
webkitPaddingAfter: ""
webkitPaddingBefore: ""
webkitPaddingEnd: ""
webkitPaddingStart: ""
webkitPerspective: ""
webkitPerspectiveOrigin: ""
webkitPerspectiveOriginX: ""
webkitPerspectiveOriginY: ""
webkitPrintColorAdjust: ""
webkitRtlOrdering: ""
webkitSvgShadow: ""
webkitTextCombine: ""
webkitTextDecorationsInEffect: ""
webkitTextEmphasis: ""
webkitTextEmphasisColor: ""
webkitTextEmphasisPosition: ""
webkitTextEmphasisStyle: ""
webkitTextFillColor: ""
webkitTextOrientation: ""
webkitTextSecurity: ""
webkitTextSizeAdjust: ""
webkitTextStroke: ""
webkitTextStrokeColor: ""
webkitTextStrokeWidth: ""
webkitTransform: ""
webkitTransformOrigin: ""
webkitTransformOriginX: ""
webkitTransformOriginY: ""
webkitTransformOriginZ: ""
webkitTransformStyle: ""
webkitTransition: ""
webkitTransitionDelay: ""
webkitTransitionDuration: ""
webkitTransitionProperty: ""
webkitTransitionTimingFunction: ""
webkitUserDrag: ""
webkitUserModify: ""
webkitUserSelect: ""
webkitWritingMode: ""
whiteSpace: ""
widows: ""
width: ""
wordBreak: ""
wordSpacing: ""
wordWrap: ""
writingMode: ""
zIndex: ""
zoom: ""
__proto__: CSSStyleDeclarationPrototype
getPropertyCSSValue: function getPropertyCSSValue() {
getPropertyPriority: function getPropertyPriority() {
getPropertyShorthand: function getPropertyShorthand() {
getPropertyValue: function getPropertyValue() {
isPropertyImplicit: function isPropertyImplicit() {
item: function item() {
removeProperty: function removeProperty() {
setProperty: function setProperty() {
__proto__: Object 
```

**详细的**

```
console.log(document.getElementById('textBox1').style.color); 
```

..将导致：

```
color: "rgb(255, 255, 255)" 
```

**循环（基本示例，可能需要改进）**

```
var styles = document.getElementById('textBox1').style;

for (var i in styles) {
    if (
        i !== '0'
        && styles[i] != ''
        && styles[i] != undefined
        && styles[i] != null
        && styles.hasOwnProperty(i)
        && styles[i].length != undefined) {

        console.log(i + ' : ' + styles[i] + ' : ' + styles[i].length);
    }
} 
```

..返回：

```
color : rgb(255, 255, 255) : 18
cssText : color: rgb(255, 255, 255);  : 27 
```

**笔记**

这些调用似乎没有获取继承的样式！例如，如果节点的父节点有`font-size: 16px`，则该`fontSize`属性将*不会*被继承。因此，您必须遍历 DOM 树，直到到达实际的节点，然后收集所有样式。然而，这也需要你知道哪些会被继承，哪些不会。这将是代码方面的一大麻烦。

如果有人可以评论以更有效地做到这一点，我会全神贯注:)

**更多差异**

如果您使用 Stylesheet 调用，您将获得一个调用 的方法`parentStyle`，如下所示：

```
var rules = document.styleSheets[0].cssRules;

//console.log(rules);

for (var i in rules) {
    var selector = rules[i].selectorText;

    if (selector != undefined) {
        var regex = selector.match(/textBox1/g);

        if (regex !== null && regex.length > 0) {
            console.log(rules[i].style);
        }
    }
} 
```

..你会在里面找到这个信息：

```
parentRule: CSSStyleRule
constructor: CSSStyleRuleConstructor
cssText: "#textBox1 { color: red; }"
parentRule: null
parentStyleSheet: CSSStyleSheet
selectorText: "#textBox1"
style: CSSStyleDeclaration
type: 1
__proto__: CSSStyleRulePrototype 
```

请注意，此方法要求您通过正在调用的样式表设置所有样式。此示例也仅适用于选择找到的第一个样式表。如果您有多个样式表，则需要循环匹配或预先知道索引。

**资源**

*   [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)
*   [jQuery 可以获取与元素关联的所有 CSS 样式吗？](https://stackoverflow.com/questions/754607/can-jquery-get-all-css-styles-associated-with-an-element)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T16:42:17.107

使用 Chrome 开发人员工具，通过右键单击页脚并单击“检查元素”，您可以浏览元素并查看 CSS 样式。

# windows - 如何正确包含 windows.h 并将最低版本设置为 XP

> ID：15601003
> 
> 赞同：1
> 
> 时间：2013-03-24T16:29:18.787
> 
> 标签：windows, visual-c++, dll, include, windows-xp

我目前正在构建一个 C++ DLL，我在主 DLL`.cpp`文件的顶部有它。这目前正在引起警告`"Warning C4005: '_WIN32_WINNT' : macro redefinition"`。我做错了什么？

我需要包含`windows.h`，`SDKDDKVer.h`并将最低 Windows 版本设置为 XP。如何更正我的代码？

```
// System Includes
#define WIN32_LEAN_AND_MEAN
#include <windows.h>
#include <d3d9.h>

// Windows Version
#define _WIN32_WINNT _WIN32_WINNT_WINXP
#include <SDKDDKVer.h> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T16:45:41.060

您应该首先包含 SDK 内容：

```
// Windows Version
#define _WIN32_WINNT 0x0501     // _WIN32_WINNT_WINXP
#include <SDKDDKVer.h>

// System Includes
#define WIN32_LEAN_AND_MEAN
#include <windows.h>
#include <d3d9.h> 
```

# vb6 - 在 Windows 7/8 问题中从 VB6 打开 Word 文档

> ID：15601005
> 
> 赞同：0
> 
> 时间：2013-03-24T16:30:05.997
> 
> 标签：vb6, shellexecute

我有一个旧的 VB6 应用程序，可以打开一个 Word 文档 (.doc)。它在 Windows XP 上运行了很长时间。我的问题是，当我在 Windows 7 或 Windows 8 上安装应用程序时，代码会打开 Word，但不会显示实际文档。当它打开 Word 时，我可以导航到文件并完美打开它，因此文件没有问题。似乎我在这里遗漏了一些简单的东西，但是经过大量搜索和阅读后，我无法确定它。

我已经确定 Word 是与 Windows 7 和 8 计算机上的 .doc 文件相关联的程序，所以不是这样。

这是我用来打开文档的代码：

```
Dim iret As Long
iret = ShellExecute(hwnd, vbNullString, QuoteFilePath & File1.FileName,  vbNullString, "c:\", SW_SHOWNORMAL) 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:18:55.407

这个特殊文件夹实际上不应该用于存储用户文档的原因有很多。微软甚至第 3 方已经开始将其用于完全不同的目的。根据安装的应用程序，您甚至可以在这里找到 DLL。

如果您误导用户使用此文件夹，他们可能会删除对某些其他程序的操作至关重要的文件。

但是，如果您坚持这样做，请注意，通过文字字符串值引用文件夹是不安全的，因为它可能会根据用户的语言设置出现在不同的别名下。它甚至可能通过行政行动转移到其他地方。

也没有必要屈从于使用非 COM ShellExecute 入口点，至少可以追溯到 Shell32.dll 的 5.0 版。

这应该至少从 WinXP 向前工作：

```
Option Explicit

Private Const ssfCOMMONDOCUMENTS As Long = &H2E
Private Enum SHOW_WINDOW
    SW_HIDE = 0
    SW_SHOWNORMAL = 1
    SW_SHOWMINIMIZED = 2
    SW_SHOWMAXIMIZED = 3
    SW_SHOWNOACTIVATE = 4
    SW_SHOW = 5
    SW_SHOWMINNOACTIVE = 7
    SW_SHOWDEFAULT = 10
End Enum

Private Shell As Object
Private Path As String

Private Sub File1_Click()
    On Error Resume Next
    'Works on XP through Vista, fails on Win7:
    'Shell.ShellExecute File1.FileName, , Path, "open", SW_SHOWNORMAL

    'Works on XP through Win7:
    Shell.ShellExecute Path & "\" & File1.FileName, , , "open", SW_SHOWNORMAL
    If Err Then
        MsgBox "Error " & CStr(Err.Number) & " " & Err.Description
    End If
End Sub

Private Sub Form_Load()
    Set Shell = CreateObject("Shell.Application")
    With Shell.NameSpace(ssfCOMMONDOCUMENTS).Self
        Path = .Path
    End With
    With File1
        .Pattern = "*.doc"
        .Path = Path
    End With
End Sub 
```

# c# - 如何使用 C# 在 for 循环中播种数据

> ID：15601006
> 
> 赞同：2
> 
> 时间：2013-03-24T16:30:08.993
> 
> 标签：c#

我在 C# 中有以下类：

```
public partial class Application
{
    public Application()
    {
        this.TestAccounts = new List<TestAccount>();
    }

    public int ApplicationId { get; set; }
    public string Name { get; set; }
    public byte[] RowVersion { get; set; }
    public System.DateTime ModifiedDate { get; set; }
    public virtual ICollection<TestAccount> TestAccounts { get; set; }
} 
```

我想使用以下内容插入一些应用程序名称为“aa”、“bb”和“xx”的记录：

```
List<Application> applications;

public void seedData() {
    var a = new Application { Name = "xx" };
    applications.Add(a);
} 
```

有没有一种方法可以将创建新应用程序记录的行包含在 for 循环中，然后对其进行排序并插入三个应用程序，而不是我一个一个地对它们进行编码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T16:33:11.980

您可以为此使用 LINQ：

```
var names = new[] {"A", "B", "C"};
var apps = names.Select(x => new Application { Name = x });
applications.AddRange(apps); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T16:35:31.313

如果我正确理解了这个问题，那么您的`seedData()`方法可能如下所示：

```
public void seedData()
{
    const string[] names = new string[] { "xx", "bb", "xx" };
    foreach (string name in names)
        applications.Add(new Application { Name = name });
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T16:36:10.353

您可以使用[对象或集合初始化器](http://msdn.microsoft.com/en-us/library/vstudio/bb384062.aspx)

```
List<Application> applications = new List<Application>()
{ 
  new Application(){Name="aa"}, 
  new Application(){Name="bb"}, 
  new Application(){Name="xx"}
}; 
```

无需将应用程序名称存储在单独的数组中并循环对其进行初始化。
我还认为生成的代码更清晰。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T16:35:33.907

如果您想使用`for`循环，这是一种方法：

```
var names = new List<string>(new string[] { "aa", "bb", "xx" });

for(int i = 0; i < 3; i++)
{
    var a = new Application { Name = names[i] };
    applications.Add(a);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-24T16:38:18.200

您可以使用：

```
 public static IList<Application> CreatesApp(IEnumerable<string> names)
    {
      return names == null ? new List<Application>() : 
             names.Select(name => new Application() { Name = name }).ToList();
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-24T16:54:31.003

使用线程。和 .join

例如创建一个创建线程并返回其引用的函数，即：createAppThread(Application app)

所以你的 for 循环可以是

```
//code from Cuong Le's answer
names = new[] {"A", "B", "C"};
for (int i=0;i<names.length();i++){
  Application app=new Application { Name = "xx" };//create your app object
  Thread th = createAppThread(app);
  Thread.join(th);

} 
```

此方法可能会阻塞 ui 线程一段时间，但它会起作用。

# php - 如何将 404 页面与 php 页面加载脚本连接起来

> ID：15601007
> 
> 赞同：0
> 
> 时间：2013-03-24T16:30:12.780
> 
> 标签：php, http-status-code-404, loading, inclued

我的 Hompeage 正在使用此脚本加载站点：

```
<?php
            if(!isset($_GET['id'])) $id = 'home';
            else $id = $_GET['id'];
            include($id.'.php');
        ?> 
```

你们中有人知道如何将 404 错误页面与之连接吗？意思是，如果 Php 找不到页面，它会将用户发送到 404 页面。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T16:34:31.880

如果由于文件不存在而要重定向用户，则应使用服务器的指令，在 Apache 中它位于 .htaccess 文件中。

如果你想重定向用户，因为不存在的 id 所以它想要 non=existent 文件，你可以重定向他：

```
if($_GET['id']) ... is not existent ){ // type your criteria here
  header('Location: your_404_page.php');
  die();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T16:36:25.800

可能是这样的？

```
<?php

if( !isset( $_GET['id'] ) )
{
    $id = 'home';
}
else
{
    $id = $_GET['id'];
}

if ( is_file( $id . '.php' ) )
{
    include( $id . '.php' );
}
else
{
    include( '404.php' );
}

?> 
```

# iterator - 迭代由整数值指定的次数的更好方法？

> ID：15601008
> 
> 赞同：1
> 
> 时间：2013-03-24T16:30:35.033
> 
> 标签：iterator, dart

我有一些代码，例如：

```
for (var i = 0; i < 5; i++) {
  // do something
} 
```

这只是我不想写的很多样板。Ruby中是否有类似的[时间：](http://www.ruby-doc.org/core-1.9.3/Integer.html#method-i-times)

```
5.times do |i|
  // something
end 
```

在 Dart 中可能看起来像：

```
5.times(doSomething); 
```

或者

```
5.times((i) => doSomething); 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:16:49.640

不，Dart 没有（还没有？）有类似的结构。我们讨论过`for (var i in 1.to(5)) doSomething;`，但到目前为止还没有添加。

# git - 将远程 'origin/develop' 合并到 'origin/master' 的 Git 工作流程

> ID：15601016
> 
> 赞同：2
> 
> 时间：2013-03-24T16:32:01.747
> 
> 标签：git, merge, git-remote

'develop' 和 'master' 的生命周期是无限的，将 GitHub 远程 'origin/develop' 分支合并和标记到远程 'origin/master' 而远程'master' 领先于远程'develop' 的最佳工作流程是什么?

用于更新文件（自述文件）和标记“主”的方案...

一切都同意...

```
$ git log develop ^master
$ git log master ^develop
$ git log master ^origin/master
$ git log master ^origin/develop
$ git log develop ^origin/develop
$ git log develop ^origin/master 
```

切换到“开发”...

```
**$ git branch**
* develop
  master 
```

编辑 README.md 文件。

提交到本地回购...

```
**$ git commit -a**
[develop 47c8393] Updated branching model
 1 file changed, 18 insertions(+), 6 deletions(-)
 rewrite README.md (81%) 
```

将“开发”推送到远程“开发”...

```
**$ git push origin develop**
Counting objects: 5, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 745 bytes, done.
Total 3 (delta 1), reused 0 (delta 0)
To git@github.com:xxx/xxx.git
   038cb2b..47c8393  develop -> develop 
```

切换到“大师”...

```
**$ git checkout master**
Switched to branch 'master' 
```

将“开发”合并为“大师”...

```
**$ git merge --no-ff develop**
Merge made by the 'recursive' strategy.
 README.md | 18 +++++++++++++++---
 1 file changed, 15 insertions(+), 3 deletions(-) 
```

标记“大师”...

```
**$ git tag -a v3.0.2** 
```

将'master'推送到远程'master'......

```
**$ git push --tags origin master**
Counting objects: 2, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (2/2), done.
Writing objects: 100% (2/2), 442 bytes, done.
Total 2 (delta 0), reused 0 (delta 0)
To git@github.com:xxx/xxx.git
   038cb2b..5750fa7  master -> master
 * [new tag]         v3.0.2 -> v3.0.2 
```

**GitHub 现在报告远程“master”比远程“develop”（合并）早 1。他们不应该同意吗？...**

```
**$ git log origin/master ^origin/develop**
commit 5750fa78ff81f41ef2327c2f4595f98c0413e245
Merge: 038cb2b 47c8393
Author: 
Date:   

Merge branch 'develop' 
```

**如果'master'合并回'develop'，HEAD指向'develop'，这是一个问题吗？新的“开发”是否应该从新的“主”分支（不支持“开发”的无限寿命）？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T19:19:18.820

在 git 中，合并/变基发生在本地，所以如果你想让两个遥控器同意，你必须先让他们在本地同意。

在 master 上执行命令`git merge --no-ff develop`会创建一个新的提交，`master`其中包含 上的所有提交`develop`。这个新`master`的提交与任何提交都不相同`develop`，即使只有一个提交`develop`。

使用`--no-ff`总是会创建一个新的提交，所以它总是会确保分支是不同的——如果你组合提交也是如此，不管如何。

如果您想保持分支相同，请查看使用`git rebase`代替的工作流`git merge`，例如（[A Rebase Workflow for Git](http://randyfay.com/content/rebase-workflow-git)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T17:24:25.733

您应该合并*本地*分支，并推出结果。即，合并开发为大师。如果您不想弄乱本地分支，请为此创建分支，进行合并推回，然后将其删除。甚至为此创建一个克隆。

# python - 条件如果字符串仅包含变量和整数 Python

> ID：15601029
> 
> 赞同：1
> 
> 时间：2013-03-24T16:33:44.450
> 
> 标签：python, regex, string, integer, conditional-statements

所以，我正在编写 Python 3 中的脚本，我需要这样的东西

```
control_input=input(prompt_029)
if only string_029 and int in control_input:
    #do something
else:
    #do something else 
```

基本上，我要求具有以下条件的代码：

```
if control_input == "[EXACT_string_here] [ANY_integer_here]" 
```

代码在 Python 3 中会是什么样子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T16:42:11.020

你想要的是做一个[正则表达式](http://www.regular-expressions.info/)匹配。看看[re 模块](http://docs.python.org/2/library/re.html)。

```
>>> import re
>>> control_input="prompt_029"
>>> if re.match('^prompt_[0-9]+$',control_input):
...     print("Matches Format")
... else:
...     print("Doesn't Match Format")
... 
Matches Format 
```

正则表达式`^prompt_[0-9]+$` 匹配以下内容：

```
^        # The start of the string 
prompt_  # The literal string 'prompt_'
[0-9]+   # One or more digit 
$        # The end of the string 
```

如果数字必须包含恰好三个数字，那么您可以使用`^prompt_[0-9]{3}$`或 最多三个然后尝试`^prompt_[0-9]{1,3}$`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T16:45:37.500

没有正则表达式

```
>>> myvar = raw_input("input: ")
input: string 1
>>> myvar
'string 1'
>>> string, integer = myvar.strip().split()
>>> "[EXACT_string_here] [ANY_integer_here]" == "{} {}".format(string, integer)
True 
```

# ef-code-first - 首先在Entity Framework 5代码中更改从基类继承的属性的数据类型

> ID：15601032
> 
> 赞同：3
> 
> 时间：2013-03-24T16:33:55.347
> 
> 标签：ef-code-first, entity-framework-5

我正在开发一个针对 SQL Server 数据库使用 EF 5 Code First 的应用程序。我的一些域对象继承自`DomainEntity`包含共享属性的基本抽象类，例如`Id`, `DateCreated`,`DateModified`等。

默认情况下，EF`datetime`为类型的属性创建列`DateTime`。我一直在寻找一种方法来告诉它`smalldatetime`为`DomainEntity`.

我尝试了以下方法：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder) 
{
    base.OnModelCreating(modelBuilder);

    modelBuilder.Ignore<DomainEntity>();   
    modelBuilder.Entity<DomainEntity>()
        .Property(e => e.DateCreated).HasColumnType("smalldatetime"); 
} 
```

不幸的是，以上没有效果。如果我删除该`Ignore<DomainEntity>`行，那么 EF 会创建一个名为`DomainEntities`.

唯一可行的方法是`DateTime`在 的每个子类中显式映射属性`DomainEntity`，但显然这是不切实际的，因为我有几十个这样的类。

我正在尝试做的事情有可能吗？

* * *

## 更新

当我用数据注释装饰基类的日期属性时，它就起作用了 `[System.ComponentModel.DataAnnotations.Schema.Column(TypeName="smalldatetime")]`。

尽管我真的更愿意将这个特定于数据库的映射信息保留在 EF 上下文中，并且不在我的 POCO 中。

# php - 拆分表列中的数据以进行搜索

> ID：15601044
> 
> 赞同：0
> 
> 时间：2013-03-24T16:34:57.267
> 
> 标签：php, mysql, csv

当我遇到这个问题时，我正在使用 php 中的一个简单的 mysql 表，我想知道是否有解决方案。

该表以逗号分隔格式保存用户名和他的位置。

```
 id|user|locations
------------------
 1 |abc | A, B, C
------------------
 2 |xyz | P, Q, R 
```

我想知道是否有任何方法可以编写 mysql 查询，以便它返回一个位置为 A 的用户。基本上，如果逗号分隔值中的一个值匹配，则应返回记录。

我知道将它们存储为单独的记录是一种更好的方法，但我只是好奇这样的检索是否可能。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T16:37:28.133

理想情况下，您应该考虑规范化数据，这样您就不会存储逗号分隔的列表。

但是如果你不能改变表结构，MySQL 有一个[`FIND_IN_SET()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)函数可以用来返回与你想要的值匹配的行：

```
select id, user, locations
from yourtable
where find_in_set('A', locations) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/82f7a/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T16:41:41.067

我们认为

以下查询可能会对您有所帮助 -

SELECT * FROM `table`WHERE `column`REGEXP '(^|,)A($|,)'

你可以有一个有用的链接 -

[如何查询表的逗号分隔字段以查看数字是否在字段内](https://stackoverflow.com/questions/9907856/how-to-query-comma-delimited-field-of-table-to-see-if-number-is-within-the-field)

# node.js - 如何一般过滤所有 socket.io 事件数据

> ID：15601049
> 
> 赞同：3
> 
> 时间：2013-03-24T16:35:36.617
> 
> 标签：node.js, socket.io

如果我做

```
socket.emit("eventname",data); 
```

我正在向套接字*发送一个事件。*如果我想过滤这个发射，我会附加一个函数并使用这个函数

```
function emit(socket,eventname,data)
{
  .. // process event data
  socket.emit(eventname,data); // emiting processed
} 
```

但我想以某种方式覆盖对象以方便地处理或修改所有输出（和输入事件数据），例如*修剪*对象的字符串。O 还会为语法异常添加一个过滤器，以避免可能导致进程崩溃的错误格式的 json 或注入过滤器......

如何在不直接修改 socket.io 代码但以某种方式重写的情况下做到这一点。对不起，如果这个问题很愚蠢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T18:09:55.803

你可以重新定义 socket.emit

```
socket.__emit = socket.emit

socket.emit = function (channel, data) {
  //process data;
  socket.__emit(channel, data);
}; 
```

# caching - Kohana ORM 缓存/缓存设计方法

> ID：15601054
> 
> 赞同：1
> 
> 时间：2013-03-24T16:35:58.093
> 
> 标签：caching, kohana-orm, kohana-3.2

这个问题与 Kohana ORM *AND* Caching 模块有关。如果重要，我使用 3.2 版。我试图研究相信我，但我真的找不到一些好的答案......所以这里是：

1.  `ORM::cached()`和`ORM::serialize()`和的正确使用方法是什么`ORM::$reload_on_wakeup`？
    我见过很多两行代码示例，但在用户指南/api 上从来没有真正可靠的东西......

2.  `'caching' => true`启用 Cache 模块和in 有什么区别`Kohana::init`？

3.  对于以下特定情况，有人有什么推荐的方法吗？我有一个目录页面，在分析后，我意识到两个非常昂贵的操作：

    *   我每次都查询数据库中每个项目的货币模型，当货币信息真正可以重用时。
    *   我每次都为每个项目的库存项目查询数据库，这是一个昂贵的查询，我希望我可以缓存它直到库存水平发生变化。

我找到但无法完全回答我的问题的参考资料：http:
[//forum.kohanaframework.org/discussion/1782/tip-for-caching-orm-objects/p1](http://forum.kohanaframework.org/discussion/1782/tip-for-caching-orm-objects/p1) [http://forum.kohanaframework.org/discussion/ 10600/does-kohana-orm-and-cache-work-together/p1](http://forum.kohanaframework.org/discussion/10600/does-kohana-orm-and-cache-work-together/p1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-24T07:50:57.673

刚刚发现您的问题，可能为时已晚，但可能对其他人有用：

1.  缓存，将强制查询生成器缓存数据库查询。它使用了 KOhana:cache 方法（文件缓存），我正在尝试为此找到解决方法。
2.  为文件搜索启用缓存，如 Kohana/Core.php 文件中所述：是否对 [Kohana::find_file] 使用内部缓存，不适用于 [Kohana::cache]。由 [Kohana::init] 设置
3.  启用缓存 true 以加快文件搜索，并启用缓存模块，我正在研究一种使用模块使用的实例缓存数据库查询的方法。那会比使用文件缓存更好。也许我错过了一些东西，但现在卡在那里。

# c++ - c++模板函数用const参数叠加参数推导

> ID：15601057
> 
> 赞同：1
> 
> 时间：2013-03-24T16:36:01.213
> 
> 标签：c++, templates, overloading

我有以下设置：

```
template <typename T>
void foo(T& t);
void foo(const int& t);

void f()
{
    int i;
    foo(i); //Unresolved reference to "void foo<int>(int &)"
    foo(const_cast<const int&>(i)); //Unresolved reference to "void foo(int const &)"
} 
```

**在第一次调用 foo 时，编译器尝试调用模板版本，因为非模板版本的参数与i**的类型不匹配。在第二次调用中，调用了非模板版本。我正在使用 Microsoft C++ 编译器版本 10。这是标准行为吗？如果类型不完全匹配，即使它只有一个 const 修饰符，那么调用模板函数？

编辑：我知道这两个函数没有定义，我只是指出链接器抱怨什么，以便更清楚编译器想要调用什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T16:46:09.500

**是**的，根据 C++11 标准，这种行为是正确的。

在第一种情况下，参数是对非`const`整数的引用。两种重载都可以解决此调用，但函数模板允许完美匹配，而非模板重载需要限定转换。

在第二种情况下，两者都是完美匹配，但其中一个重载**不是**函数模板，因此它是比函数模板更好的候选者。根据 § 13.3.3/1，事实上：

> 鉴于这些定义，**如果对于所有参数 i，ICSi(F1) 不是比 ICSi(F2) 更差的转换序列，则可行函数 F1 被定义为比另一个可行函数 F2 更好的函数**，然后
> 
> — 对于某些参数 j，ICSj(F1) 是比 ICSj(F2) 更好的转换序列，或者，如果不是，
> 
> — 上下文是通过用户定义的转换（见 8.5、13.3.1.5 和 13.3.1.6）和从 F1 的返回类型到目标类型（即被初始化的实体的类型）的标准转换序列进行的初始化是比从 F2 的返回类型到目标类型的标准转换序列更好的转换序列。[ ... ] 或者，如果不是这样，
> 
> — **F1 是非模板函数，F2 是函数模板特化**，或者，如果不是，
> 
> — [...]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T16:44:11.807

> 这是标准行为吗？如果类型不完全匹配，即使它只有一个 const 修饰符，那么调用模板函数？

是的，这是由标准明确定义的。

如果没有完全匹配，则使用模板，因为实例化的模板版本总是比需要转换的版本*更好*的匹配（即使是`int &`转换`int const&`）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-24T16:43:41.643

这应该工作

```
#include <iostream>

template <typename T>
void foo(T& t) {}
void foo(const int& t){}

void f() 
{
    int i;
    foo(i); //Unresolved reference to "void foo<int>(int &)"
    foo(const_cast<const int&>(i)); //Unresolved reference to "void foo(int const &);
}

int main()
{
    f();
} 
```

# php - 在查询中输入数字

> ID：15601065
> 
> 赞同：0
> 
> 时间：2013-03-24T16:36:39.363
> 
> 标签：php, mysql

我已经被困了一段时间，我确信这是一个简单的解决方法，但我就是找不到答案。

我正在尝试删除表中的一行，但我放入查询中的变量未被识别。在下面的 $remove 查询中，如果我输入与行对应的数字，则查询可以正常工作，但是当我使用变量时它不会。

```
if (isset($_POST['remove']))
{

 $remove = $_POST['remove'];
 //echo $remove; print the number entered

 $query ="DELETE dogid FROM regdogs WHERE dogid = $remove ";
 if($query_run = mysql_query($query)){
 $query_num_rows = mysql_num_rows($query_run);

 if($query_num_rows==1)
      echo 'Entry removed ';
 else
      echo 'Not removed ';  
 } 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T16:38:43.383

```
$query ="DELETE FROM regdogs WHERE dogid = $remove "; 
```

尝试这个。这只是一个语法错误。

同样，请转到***mysqli_***方法。***mysql_***方法已弃用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T16:45:08.920

我希望这是一个可以接受的答案——因为你的问题是如何向查询中添加参数，我觉得它是相关的。

如果只添加`$remove`, 即`$_POST['remove']`，您将允许用户执行任意 SQL 命令。想象一下有人发布`1 OR 1=1`为参数。您的 SQL 查询会说`DELETE dogid FROM regdogs WHERE dogid = 1 OR 1=1`并删除整个表。相反，`mysql_real_escape_string`在处理用户输入时始终使用。您的整个代码如下所示：

```
if (isset($_POST['remove']))
{

 $remove = mysql_real_escape_string($_POST['remove']);
 //echo $remove; print the number entered

 $query ="DELETE FROM regdogs WHERE dogid = $remove ";
 if($query_run = mysql_query($query)){
 $query_num_rows = mysql_num_rows($query_run);

 if($query_num_rows==1)
      echo 'Entry removed ';
 else
      echo 'Not removed ';  
 } 
```

（当然，大家都说mysql_*已经过时了，这绝对是对的。我假设你刚刚开始使用PHP。由于大多数教程仍然使用mysql_*，所以现在绝对没问题。一旦你更熟悉了它，考虑切换到 mysqli 或 PDO。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T16:41:45.747

查询应修改为

```
DELETE FROM regdogs WHERE dogid = $remove 
```

尝试打印查询

```
echo $query; 
```

和

发布结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T16:41:58.773

我想你只需要这个：

```
 $query ="DELETE FROM regdogs WHERE dogid = $remove "; 
```

# javascript - django通过javascript登录

> ID：15601070
> 
> 赞同：1
> 
> 时间：2013-03-24T16:36:56.723
> 
> 标签：javascript, ajax, django

我正在尝试将 django 用于我的网站。我使用此代码实现了登录：7

```
user_django = authenticate(username=email, password=passw)
login(request, user_django) 
```

使用 django rest 框架正在工作。但是当我将它与 ajax 请求一起使用时，我认为它不存储 cookie。我还使用 django 函数来检查用户是否已登录：

```
if request.user.is_authenticated():
        return Response('1')
    else:
        return Response('0') 
```

但它总是返回 0。我是否必须在客户端做任何特别的事情来存储登录信息？

我的 javascript 登录：

```
function userLogin(){
    var user_email = $('#login_user_email').val();
    var user_pwd   = $('#login_user_pwd').val();

    var data = {email:user_email, password:user_pwd};

    $.ajax(prefix+ 'userLogin/', {
        success: function(output, status, xhr){
            $('#login_btn').click();
        },
        data: data,
        type: 'POST'
    });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:05:34.213

这对我来说是一个熟悉的问题，并且可能与 SO 上的其他问题重复，

看看这些，你就会找到解决办法。

*   [Django CSRF 检查因 Ajax POST 请求而失败](https://stackoverflow.com/questions/5100539/django-csrf-check-failing-with-an-ajax-post-request)
*   [在 Django 中通过 AJAX 发布参数时出现“CSRF 令牌丢失或不正确”](https://stackoverflow.com/questions/6506897/csrf-token-missing-or-incorrect-while-post-parameter-via-ajax-in-django)
*   [jQuery + AJAX + Django = CSRF ？](https://stackoverflow.com/questions/7214909/jquery-ajax-django-csrf)

# hibernate - 休眠条件与连接中的子查询

> ID：15601074
> 
> 赞同：2
> 
> 时间：2013-03-24T16:37:19.380
> 
> 标签：hibernate, join, subquery, criteria

有什么方法可以在 join 子句中使用 Criteria API 子查询。我有这样的 SQL

```
select ud.email as email,ul.last_login as last_login,
ul.login_count as login_count, fb_count, m_count from user_details ud
left outer join user_logins userlogins1_ on ud.user_id=ul.user_id
left outer join 
(select count(feedback_id) as fb_count,user_id from user_feedback group by user_id) as uf
on ud.user_id=uf.user_id 
left outer join (select count(mapid) as m_count,user_id from maps group by user_id) as m 
on ud.user_id=m.user_id order by ud.email asc 
```

我看到一些 Criteria 在 join 中不支持 Subquery，但仅在 select 或 where 子句中支持。这是真的？

我没有找到一种方法来重写上述方法。请帮助/建议我如何进行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T03:13:07.617

简单的答案是：你不能。这样做的问题是休眠不知道如何映射连接的结果，因为它没有创建它。

# javascript - 同时交换图像和标题

> ID：15601076
> 
> 赞同：0
> 
> 时间：2013-03-24T16:37:49.260
> 
> 标签：javascript, jquery, image, caption

我有一个我正在尝试制作的图片库 到目前为止，它工作正常。我的问题是，无论我如何尝试，当我使用 javascript 将它们换出时，我都无法让每个图像都有自己的标题。现在，在有人为这个问题对我感到不满之前，我已经看过这里，发现有些人如何使用 html 添加标题，但是当我交换图像时，它就不起作用了。我想也许可以创建一个空的 div 并使用 javascript 插入 html 文本，但我怎样才能加载与适当图片匹配的标题？数组是这里唯一的选择吗？这是我有问题的页面。

[我的网站](http://cisweb.bristolcc.edu/~rmailloux11/mm/Final/feat.html)

我将“照片” div 留空，以便将图像加载到其中。到目前为止一切正常。只是对字幕感到困惑。

这是javascript代码

```
$('#gallery img').each(function(i) {
    var imgFile = $(this).attr('src');
    var preloadImage = new Image();
  var imgExt = /(\.\w{3,4}$)/;
  preloadImage.src = imgFile.replace(imgExt,'_h$1');

    $(this).hover(
        function() {
            $(this).attr('src', preloadImage.src);
        },
        function () {
        var currentSource=$(this).attr('src');
            $(this).attr('src', imgFile);
    }); // end hover
}); // end each

$('#gallery a').click(function(evt) {
evt.preventDefault();   
var imgPath = $(this).attr('href');
var oldImage = $('#photo img');
var newImage = $('<img src=" ' + imgPath + ' ">');
newImage.hide();
$('#photo').prepend(newImage);
newImage.fadeIn(1000);
oldImage.fadeOut(1000,function(){
$(this).remove();
});
});
$('#gallery a:first').click(); 
```

还有我的html

```
<div id="main">         <!-- Main Content -->

<div id="photo">
</div>

<div id="gallery">
<a href="images/home1_h.jpg"><img src="images/home1.jpg" alt="home 1"></a>
<a href="images/home2_h.jpg"><img src="images/home2.jpg" alt="home 2"></a>
<a href="images/home3_h.jpg"><img src="images/home3.jpg" alt="home 3"></a>
<a href="images/home4_h.jpg"><img src="images/home4.jpg" alt="home 4"></a>
<a href="images/home5_h.jpg"><img src="images/home5.jpg" alt="home 5"></a>
<a href="images/home6_h.jpg"><img src="images/home6.jpg" alt="home 6"></a>
</div>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:55:59.947

我会这样做

```
$('#gallery img').click(function(evt) {  
    var elem = $(this);
    var oldImage = $('#photo img');
    $('#photo').prepend($('<img src=" ' + elem.attr('src') + ' ">').hide().fadeIn(1000));
    oldImage.fadeOut(1000,function(){
       $(this).remove();
       $("#caption").html(elem.attr('alt')); // set the caption
    });
});

$('#gallery img:first').trigger('click'); 
```

并作为 html

```
<div id="main">         <!-- Main Content -->

<div id="photo">
   <div style="text-align:center" id="caption"></div>
</div>

<div id="gallery">
    <img src="images/home1_h.jpg" alt="home 1">
    <img src="images/home2_h.jpg" alt="home 2">
    <img src="images/home3_h.jpg" alt="home 3">
    <img src="images/home4_h.jpg" alt="home 4">
    <img src="images/home5_h.jpg" alt="home 5">
    <img src="images/home6_h.jpg" alt="home 6">
 </div>

</div> 
```

和一点 css

```
#gallery img {
     opacity: 0.8;
     cursor: pointer;
}
#gallery img:hover {
     opacity: 1
} 
```

# sql - SQL 声明选择插入

> ID：15601079
> 
> 赞同：-1
> 
> 时间：2013-03-24T16:38:15.653
> 
> 标签：sql, sql-server, select, insert

我试图让这个查询在选择的所有结果上运行。
但问题是 select from`LOG_ITEM201303`只返回一个结果。
所以这意味着`INSERT INTO`每次我运行这个脚本时，该子句只影响一行。
但我想要做的是获得所有结果（总共 600 多个）并逐行插入所有结果。

```
DECLARE @charkey int, @charname varchar(16), @item int

SELECT @charkey = CHAR_KEY, @charname = NAME, @item = ITEMNUM
FROM LOG_ITEM201303
where 
(   
    ITEMNUM = 14317
OR  ITEMNUM = 14318
OR  ITEMNUM = 15478
OR  ITEMNUM = 15479
OR  ITEMNUM = 14301
OR  ITEMNUM = 14302
OR  ITEMNUM = 15476
OR  ITEMNUM = 15477
OR  ITEMNUM = 15018
OR  ITEMNUM = 15019
OR  ITEMNUM = 15020
OR  ITEMNUM = 15021
OR  ITEMNUM = 15022
OR  ITEMNUM = 15023
OR  ITEMNUM = 15024
OR  ITEMNUM = 15025
OR  ITEMNUM = 14437
OR  ITEMNUM = 14438
OR  ITEMNUM = 15656
OR  ITEMNUM = 15657
OR  ITEMNUM = 15658
OR  ITEMNUM = 15659
OR  ITEMNUM = 15660
OR  ITEMNUM = 15661
OR  ITEMNUM = 15662
OR  ITEMNUM = 15663
) AND (KIND = 133) AND (Convert(varchar, OCCUR_TIME,111) < '2013/03/22')

SELECT @charkey, @charname, @item

INSERT INTO game.dbo.Mail_Item_Table
(ItemNumber, ItemInfo, ReceiveDate)
VALUES
(@item, (SELECT CONVERT(BINARY(16), REVERSE(CONVERT(BINARY(16), @item)))), NULL)

INSERT INTO game.dbo.Mail_Message_Table
(Message)
VALUES
('Automated Message from the ADMIN.')

INSERT INTO game.dbo.Mail_List_Table
(ReceiverCharKey, MailListIndex, MailItemIndex, MailMessageIndex, Sender, Receiver, SendDate)
VALUES 
(@charkey,
(SELECT TOP 1   MailListIndex+1 as last_entry
 FROM           game.dbo.Mail_List_Table
 WHERE          sender = 'SEND0R'
 ORDER BY MailListIndex DESC),
(SELECT TOP 1   MailItemIndex AS last_entry
 FROM           game.dbo.Mail_Item_Table
 ORDER BY       MailItemIndex DESC),
(SELECT TOP 1   MailMessageIndex AS last_entry
 FROM           game.dbo.Mail_Message_Table
 ORDER BY       MailMessageIndex DESC),
 'SEND0R', '@charname', getdate()) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T17:05:34.407

主要问题是您选择单个变量 - 仅适用于单行 - 因为每个变量只能保存一个值。另外：对于一般的 SQL，您应该避免“逐行”（也称为***RBAR*** - *row-by-agonizing-row*）方法 - 这只是一个糟糕的设计，并且会扼杀您可能从集合中获得的任何性能基于的方法。尽可能避免它！

相反，您需要做的是直接将数据插入到目标表中`SELECT` - 不使用介于两者之间的任何变量......或者如果您需要使用相同的数据进行多次插入（就像您在此处的情况一样） ，您需要将初始结果存储`SELECT`在**表变量**中（而不是每行的单个变量）

所以尝试这样的事情：

```
-- define a table variable to hold the data
DECLARE @TemporaryData TABLE (charkey int, charname varchar(16), item int)

-- initial SELECT - insert data into table variable    
INSERT INTO @TemporaryData(charkey, charname, item)
   SELECT CHAR_KEY, NAME, ITEMNUM
   FROM LOG_ITEM201303
   WHERE ( ..... ) 

-- insert data from the table variable into the first table    
INSERT INTO game.dbo.Mail_Item_Table(ItemNumber, ItemInfo, ReceiveDate)
   SELECT 
       item, 
       CONVERT(BINARY(16), REVERSE(CONVERT(BINARY(16), item)))), 
       NULL
   FROM @TemporaryData

-- unrelated to the table variable ...    
INSERT INTO game.dbo.Mail_Message_Table(Message)
VALUES('Automated Message from the ADMIN.')

-- insert data from table variable into yet another table...    
INSERT INTO game.dbo.Mail_List_Table(ReceiverCharKey, MailListIndex, MailItemIndex, MailMessageIndex, Sender, Receiver, SendDate)
  SELECT
      charkey,
     (SELECT TOP 1 MailListIndex+1 as last_entry
      FROM game.dbo.Mail_List_Table
      WHERE sender = 'SEND0R'
      ORDER BY MailListIndex DESC),
     (SELECT TOP 1 MailItemIndex AS last_entry
      FROM game.dbo.Mail_Item_Table
      ORDER BY MailItemIndex DESC),
     (SELECT TOP 1 MailMessageIndex AS last_entry
      FROM game.dbo.Mail_Message_Table
      ORDER BY MailMessageIndex DESC),
     'SEND0R', 
     charname, 
     getdate()
   FROM @TemporaryData 
```

# java - 使用 java apache 默认执行程序获取进程 ID

> ID：15601082
> 
> 赞同：0
> 
> 时间：2013-03-24T16:38:28.603
> 
> 标签：java, apache-commons-exec

我正在编写一个使用 apache 的默认执行程序运行命令行的代码。我找到了获取退出代码的方法，但我找不到获取进程 ID 的方法。

我的代码是：

```
protected void runCommandLine(OutputStream stdOutStream, OutputStream stdErrStream, CommandLine commandLine) throws InnerException{
DefaultExecutor executor = new DefaultExecutor();
    PumpStreamHandler streamHandler = new PumpStreamHandler(stdOutStream,
            stdErrStream);
    executor.setStreamHandler(streamHandler);
    Map<String, String> environment = createEnvironmentMap();
try {
        returnValue = executor.execute(commandLine, environment);
    } catch (ExecuteException e) {
       // and so on...
        }
        returnValue = e.getExitValue();
        throw new InnerException("Execution problem: "+e.getMessage(),e);
    } catch (IOException ioe) {
        throw new InnerException("IO exception while running command line:"
                + ioe.getMessage(),ioe);
    }
} 
```

我应该怎么做才能获得 ProcessID？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T17:14:33.650

无法使用 apache-commons API（也无法使用底层[Java API](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html)）来检索进程的 PID。

“最简单”的事情可能是让你的外部程序以这样一种方式执行，即程序本身以某种方式在它生成的输出中返回它的 PID。这样您就可以在您的 java 应用程序中捕获它。

很遗憾java没有导出PID。[十多年来](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4244896)，它一直是一个功能请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-18T09:57:13.693

在 Java 9 及更高版本中有一种方法可以检索 Process 对象的 PID。但是，要访问 Apache Commons Exec 中的 Process 实例，您将需要使用一些未记录的内部结构。

这是一段适用于 Commons Exec 1.3 的代码：

```
DefaultExecutor executor = new DefaultExecutor() {
    @Override
    protected Process launch(final CommandLine command, final Map<String, String> env, final File dir) throws IOException {
        Process process = super.launch(command, env, dir);
        long pid = process.pid();
        // Do stuff with the PID here... 
        return process;
    }
};
// Build an instance of CommandLine here
executor.execute(commandLine); 
```

# delphi - 设置列编辑器位置

> ID：15601084
> 
> 赞同：1
> 
> 时间：2013-03-24T16:38:37.027
> 
> 标签：delphi, delphi-5

这让我发疯了很多年。在 IDE 中，我已将对象检查器 (OI) 扩大到大约 2-1/2"，但列编辑器和字段编辑器等都会弹出 Borland 认为我应该具有 OI 集的宽度。

每次使用它们时，我都必须将编辑器从 OI 中拖出。也许我变老了，脾气暴躁，但它开始让我疲惫不堪。

有什么办法（甚至破解）我可以设置这些编辑器在 D5 中弹出的位置吗？我不在乎它是否正是我想要的位置，只要它不覆盖 OI 即可。我尝试了 Ctrl-Close 的东西，但什么也没做。

谢谢

# visual-studio-2010 - Windows 7 下的 ClickOnce/Excel-VSTO

> ID：15601092
> 
> 赞同：2
> 
> 时间：2013-03-24T16:39:23.173
> 
> 标签：visual-studio-2010, excel, windows-7, vsto, clickonce

我们在 VS2010 中开发了一个 .Net 4.0 VSTO Excel 插件，我们正在通过 ClickOnce 进行部署。我们的可部署文件在 Windows XP 上似乎很好，但在 Windows 7 上安装时问题很大。这些问题似乎都与何时需要通过 Excel 删除插件有关（即它已被 Excel 软删除[例如，由于失败等） ]，然后用户通过 Excel | Options | AddIns | Manage | COM AddIns 对话框将其“删除”。

上述情况会导致在发生上述情况后重新安装插件，它不会在 Excel 中公开 - 即 Excel 插件选项卡（如果安装了一个或多个插件，通常会出现）永远消失。当我们正在开发/调试时，它变得更加成问题，因为我们正在重命名/删除 AddIn 实例 - 以至于在 Windows 7 上开发 VSTO 不再可行

请注意，加载项*不在*硬删除（禁用）列表中 - 它已被删除。我尝试安装/重新安装/卸载、重新启动、删除注册表项（清理缓存/卸载后）、从 C:\Documents and Settings\\Local Settings\Apps\2.0 删除文件系统文件、清除缓存（通过mage 和/或 rundll32 根据[Clear the .NET-downloaded application cache without Mage?](https://stackoverflow.com/questions/2418542/clear-the-net-downloaded-application-cache-without-mage-exe)）。XP 和 Windows 7 之间的行为似乎存在明显差异。

有没有人遇到过类似的问题？

我能看到的唯一替代方案是具有完全成熟的 MSI 的部署项目，但是这远不及整洁 - 需要本地管理员访问权限等

非常感谢
特拉维斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:50:36.610

不确定您是否已阅读有关使用 Clickonce 发布 Office 解决方案的教程。如果你还没有，你可以通过下面的链接找到它们。值得阅读。

[http://msdn.microsoft.com/en-us/library/vstudio/bb772100(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/bb772100(v=vs.100).aspx)
[http://msdn.microsoft.com/en-us/library/vstudio/bb608591(v= vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/bb608591(v=vs.100).aspx)

关于使用 windows 安装程序，这并不是很难做到，尤其是使用 Visual Studio 2010 安装项目。这是一个非常详细的教程，可以指导您完成所有这些。当我尝试部署 Excel 加载项时，它帮助了我很多，我希望它也能以某种方式帮助你。

[http://msdn.microsoft.com/en-us/library/ff937654.aspx](http://msdn.microsoft.com/en-us/library/ff937654.aspx)

此外，您可能想问自己这些问题，以确定使用 Clickonce/Windows 安装程序是否是正确的选择。

> 在选择部署技术时，您无需将自己限制在一个选项中。关键是为正确的工作选择正确的工具。虽然没有单一的规则或简单的答案，但您可以使用一些通用指南来帮助您针对您的特定需求做出最佳决策。

*   应用程序是否安装任何 COM 组件？
*   应用程序是否需要为 COM-Interop 注册任何组件？
*   应用程序是否安装任何服务？应用程序是否必须安装到特定位置或全局程序集缓存 (GAC)？
*   应用程序是否有任何基于操作系统或运行时环境有条件安装的组件？
*   应用程序在安装时是否需要用户输入？
*   应用程序是否需要配置系统级服务，例如 Active Directory 或 COM+？
*   安装应用程序后，它是否会创建文件、写入注册表或以某种方式影响系统，从而在删除应用程序时留下资源？

> 如果您对其中任何一个问题的回答是肯定的，那么 Windows Installer 是满足您需求的最佳选择。但是，如果您不需要解决上面列表中描述的场景，那么 ClickOnce 是您的部署解决方案的理想选择。如果您想利用 ClickOnce 提供的独特优势，那么在应用程序设计过程的早期了解 ClickOnce 的功能至关重要。使用 ClickOnce 部署应用程序的早期版本，但后来才意识到需要迁移到 Windows Installer，这将创建一个困难的升级路径，可以通过仔细的前期规划来避免。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T17:03:29.527

根据我的经验，在我的一个生产项目中，我们也使用了 MSI。并且避免了点击一次的问题。所以我的回答是——是的，你需要安装 MSI Project 或 MSI。通过 MSI 安装，您可以使用默认的 MSI 项目或外部的，例如 Wix 或 Wise Installer 或其他东西。使用自定义安装程序的第二种方式要困难得多。

对于删除的情况，我使用了缓存和注册表中的法师和手动删除加载项。它有帮助，但看起来像黑客。

此外，每次处理 VSTO ClickOnce 不清楚时，我都考虑过使用一些外部库。不幸的是，由于项目需要，我没有这样的机会使用第 3 方来简化我的工作。但是您可以检查并尝试。可能是[Add-in-Express](http://www.add-in-express.com/)库会对您有所帮助，尤其是当它们有良好的技术支持时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-21T22:51:59.167

我们发现，让 ClickOnce 在 Windows 7 上为 VSTO 工作的方法是在 Excel 中执行此操作 - 即

*   添加/删除程序：卸载
*   电子表格 | 选项 | 插件 | 通讯 | 去
*   添加 | 浏览到 ClickOnce setup.exe | 好的 | ETC
*   关闭 Excel
*   进入 Excel
*   插件出现

我确定您可以使用添加/删除程序卸载（版本控制），因此用户不必手动卸载

ClickOnce 在工作时是 gr8 - 这是到达那里的旅程，需要加强大风格

# list - 如何在 Dart 中创建一个没有预定义长度并为其位置分配值的列表？

> ID：15601095
> 
> 赞同：0
> 
> 时间：2013-03-24T16:39:35.067
> 
> 标签：list, dart, declare

我正在使用 Dart 开发我的第一个应用程序，该应用程序之前是在 JavaScript 中创建的。在我的 JavaScript 语句中，我声明了一个 List，并将值分配给前三个位置，如下所示：

```
serpF var = new List ();
serpF [0] = 10;
serpF [1] = 10;
serpF [2] = 10; 
```

我如何在 Dart 中做同样的事情？[我已经阅读了“ http://blog.sethladd.com/2011/12/lists-and-arrays-in-dart.html](http://blog.sethladd.com/2011/12/lists-and-arrays-in-dart.html) ”中的 Seth Ladd 的列表和数组的文档，并且我已经尝试了所有方法，但它是是不可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T17:28:42.573

JavaScript 代码在 Dart 中不起作用，因为访问列表末尾是错误的。Dart 与许多其他语言一样，因为这是一种捕获逻辑错误的方法。

您可以做的是将元素添加到列表中：

```
var serpF = new List();  // This list has length == 0.
serpF.add(10);
serpF.add(10);
serpF.add(10); 
```

您可以使用*方法级联*来缩短代码：

```
var serfP = [];
serpF..add(10)..add(10)..add(10); 
```

如果您确实知道长度，您也可以尝试其他 List 构造函数之一：

```
var serfP = new List.filled(3, 10);
var serfP = new List.generate(3, (i) => 10); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T18:13:24.593

除了斯蒂芬建议您还可以做的事情之外，我还可以：

```
var serpF = [10, 10, 10]; 
```

或者

```
var serpF = new List();
serpF.length = 3;
serpF[0] = 10;
serpF[1] = 10;
serpF[2] = 10; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T23:47:55.913

您还可以使用`List.generate()`构造函数：

```
var list = new List.generate(3, (_) => 10, growable: true);
print(list); // Prints [10, 10, 10]. 
```

第一个 arg 指定列表中元素的数量，第二个 arg 使用回调为每个元素分配一个值，第三个 arg 确保列表不是固定宽度的。

# python - python中的等高线图

> ID：15601096
> 
> 赞同：14
> 
> 时间：2013-03-24T16:39:36.213
> 
> 标签：python, matplotlib, contour

我将如何使用在 python 中创建一个计数网格`matplotlib.pyplot`，其中网格是一种颜色，`z`变量低于零，另一种颜色`z`等于或大于零？我不是很熟悉，`matplotlib`所以如果有人能给我一个简单的方法，那就太好了。

到目前为止，我有：

```
x= np.arange(0,361)
y= np.arange(0,91)

X,Y = np.meshgrid(x,y)

area = funcarea(L,D,H,W,X,Y) #L,D,H and W are all constants defined elsewhere.

plt.figure()
plt.contourf(X,Y,area)
plt.show() 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-24T17:13:30.350

您可以使用`levels`contourf 中的关键字来执行此操作。

![在此处输入图像描述](../Images/a2ebcc31fe85848c8c3512b47c16989d.png)

```
import numpy as np
import matplotlib.pyplot as plt

fig, axs = plt.subplots(1,2)

x = np.linspace(0, 1, 100)
X, Y = np.meshgrid(x, x)
Z = np.sin(X)*np.sin(Y)

levels = np.linspace(-1, 1, 40)

zdata = np.sin(8*X)*np.sin(8*Y)

cs = axs[0].contourf(X, Y, zdata, levels=levels)
fig.colorbar(cs, ax=axs[0], format="%.2f")

cs = axs[1].contourf(X, Y, zdata, levels=[-1,0,1])
fig.colorbar(cs, ax=axs[1])

plt.show() 
```

您可以通过选择不同的颜色图来更改[颜色](http://dept.astro.lsa.umich.edu/~msshin/science/code/matplotlib_cm/)；使用 vmin、vmax；等等

# iphone - Objective-C 中的私有变量强吗？

> ID：15601097
> 
> 赞同：7
> 
> 时间：2013-03-24T16:39:40.170
> 
> 标签：iphone, objective-c, xcode, automatic-ref-counting, private-members

所以搜索 Stack Overflow 这似乎是如何在 Objective-C 中创建私有变量：

```
@interface ClassName()
{
@private
    NSArray* private;
}
@property (strong, nonatomic) NSArray* public;
@end 
```

现在这就是我感到困惑的地方。该属性被声明为`(strong, nonatomic)`，但私有变量没有任何类型。那么 arc 是如何知道它是否强大的呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-24T16:52:23.163

实例变量是`__strong`默认的。

来自[Apple 的 ARC Transition Guide](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)，关于变量（假定包括实例变量）：

> __strong 是默认值

然后：

> 使用 ARC，实例变量默认是强引用——直接将对象分配给实例变量确实会延长对象的生命周期

这一直有效，直到该属性通过 连接到 ivar `@synthesize`。此时，属性的所有权限定符优先。但是，如果您将一个属性声明为非强属性，然后手动实现 setter 和 getter，您还必须手动声明支持 ivar 的所有权限定符。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-24T16:54:24.157

在属性的情况下，关联实例变量的所有权隐含在属性的所有权中：

请参阅[http://clang.llvm.org/docs/AutomaticReferenceCounting.html](http://clang.llvm.org/docs/AutomaticReferenceCounting.html)：

> 如果一个属性是合成的，那么关联的实例变量是由@synthesize 声明可能隐含地命名的实例变量。如果关联的实例变量已经存在，则其所有权资格必须等于属性的所有权；否则，将使用该所有权资格创建实例变量。

一般来说，Objective-C 对象默认是强的：

> 如果一个对象声明为具有可保留对象所有者类型，但没有显式所有权限定符，则其类型被隐式调整为具有 __strong 限定符。

请注意，由于 LLVM 4.0 编译器（Xcode 4.4），`@synthesize`语句和关联的实例变量是自动创建的，因此您只需要声明属性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-24T16:44:58.263

限定符`@property`指定了综合设置器和其他 ARC 插入代码的行为。变量本身并不是很强大，它们只是内存位置。所以你现在已经把它编码得很好了。

使其私有（和强）的方法是在 .m 文件中的一个类别中声明它是强的。

```
// .h
// nothing

// .m
@interface ClassName()
@property (strong, nonatomic) NSArray* myStrongPrivateProperty;
@end

// that's it 
```

# python - (Python) 运行 pylab.legend() 命令时出错

> ID：15601098
> 
> 赞同：0
> 
> 时间：2013-03-24T16:40:19.407
> 
> 标签：python, matplotlib, scatter-plot

我试图让 legend() 命令工作，但徒劳无功，当我运行下面的代码时，在调用 pl.legend() 的行中出现以下错误：

```
 AttributeError                            Traceback (most recent call last)
<ipython-input-226-5b8a32c5300f> in <module>()
----> 1 leg = pl.legend(numpoints=3)

/usr/lib/pymodules/python2.7/matplotlib/pyplot.pyc in legend(*args, **kwargs)
   2798 @docstring.copy_dedent(Axes.legend)
   2799 def legend(*args, **kwargs):
-> 2800     ret =  gca().legend(*args, **kwargs)
   2801     draw_if_interactive()
   2802     return ret

/usr/lib/pymodules/python2.7/matplotlib/axes.pyc in legend(self, *args, **kwargs)
   4482 
   4483         if len(args)==0:
-> 4484             handles, labels = self.get_legend_handles_labels()
   4485             if len(handles) == 0:
   4486                 warnings.warn("No labeled objects found. "

/usr/lib/pymodules/python2.7/matplotlib/axes.pyc in get_legend_handles_labels(self, legend_handler_map)
   4317             label = handle.get_label()
   4318             #if (label is not None and label != '' and not label.startswith('_')):
-> 4319             if label and not label.startswith('_'):
   4320                 handles.append(handle)
   4321                 labels.append(label)

AttributeError: 'int' object has no attribute 'startswith' 
```

编码，

```
 import numpy as np
    import pylab as pl
    x = np.linspace(0, 2*np.pi, 100)
    pl.plot(x, np.sin(x), "-x", label=u"sin")
    pl.plot(x, np.random.standard_normal(len(x)), 'o', label=u"rand")
    leg = pl.legend(numpoints=3) 
```

这很奇怪，因为对其他人来说它似乎工作正常。我正在使用 Python 64 位

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T21:38:50.873

你真的需要`pylab`吗？

```
import numpy as np
#import pylab as pl
import matplotlib.pyplot as plt

x = np.linspace(0, 2*np.pi, 100)
plt.plot(x, np.sin(x), "-x", label=u"sin")
plt.plot(x, np.random.standard_normal(len(x)), 'o', label=u"rand")
leg = plt.legend(numpoints=3)

plt.show() 
```

# haskell - 将当前时间转换为 Int (Haskell)

> ID：15601100
> 
> 赞同：2
> 
> 时间：2013-03-24T16:40:31.180
> 
> 标签：haskell, time, io

我一直在寻找一种简单的方法来尝试将当前时间（可能是自午夜以来的秒数，或小时、分钟、秒）转换为 int。谁能指出我正确的方向？我查看了图书馆并没有成功。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T17:19:05.467

要获得自午夜以来的时间`Int`非常简单：

```
import Data.Time.Clock
main = do
  currTime <- getCurrentTime
  let timed = floor $ utctDayTime currTime :: Int
  print timed 
```

对于踢腿和咯咯笑，这是它的快速功能

```
integralTime :: (Integral a) => IO a
integralTime = getCurrentTime >>= return.floor.utctDayTime 
```

这是有效的，因为`TimeDiff`（它是一个`RealFrac`实例）可以被`floor`编辑为一个积分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T17:34:29.910

在搜索“haskell datetime”时，我在 Google 上的第一次点击与 Tim 给出的链接相同。您必须`getCurrentTime :: IO DateTime`在此处获取当前时间，然后`diffUTCTime :: UTCTime -> UTCTime -> NominalDiffTime`计算差异（以秒为单位）。

[http://hackage.haskell.org/packages/archive/datetime/0.1/doc/html/Data-DateTime.html](http://hackage.haskell.org/packages/archive/datetime/0.1/doc/html/Data-DateTime.html) [http://hackage.haskell.org/packages/archive/time/1.1.4/doc/html /Data-Time-Clock.html#t:UTCTime](http://hackage.haskell.org/packages/archive/time/1.1.4/doc/html/Data-Time-Clock.html#t:UTCTime)

# ios - 如何等到异步调用完成，包括完成块（AFNetworking）

> ID：15601101
> 
> 赞同：0
> 
> 时间：2013-03-24T16:40:31.803
> 
> 标签：ios, cocoa-touch, objective-c-blocks, grand-central-dispatch, afnetworking

一开始
我有这个

```
ZTCAPIClient *api = [ZTCAPIClient sharedClient];
__block BOOL sessionSuccess = NO;
//Get session
[api getPath:@"api-getsessionid.json" parameters:nil success:^(AFHTTPRequestOperation *operation, id JSON) {
    NSMutableDictionary *dict = [self dealWithZTStrangeJSON:JSON];
    if ([dict count]) {
        NSLog(..something..);
        sessionSuccess = YES;
        NSLog(@"inside:%u",sessionSuccess);
    } else {
        NSLog(@"ERROR: Get no session!");
        sessionSuccess = NO;
    }
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"ERROR: %@",error);
    sessionSuccess = NO;
}];
[api.operationQueue waitUntilAllOperationsAreFinished];
NSLog(@"outside:%u",sessionSuccess); 
```

但我会得到：

```
outside:0
inside:1 
```

我知道这是异步的原因。于是在网上搜了一下，后来发现是这样的：[等到多个操作执行——包括完成块（AFNetworking）](https://stackoverflow.com/questions/10643797/wait-until-multiple-operations-executed-including-completion-block-afnetworki)

所以我尝试一下：

```
ZTCAPIClient *api = [ZTCAPIClient sharedClient];
__block BOOL sessionSuccess = NO;
dispatch_group_t group = dispatch_group_create();
//Get session
dispatch_group_enter(group);
[api getPath:@"api-getsessionid.json" parameters:nil success:^(AFHTTPRequestOperation *operation, id JSON) {
    NSMutableDictionary *dict = [self dealWithZTStrangeJSON:JSON];
    if ([dict count]) {
        NSLog(..something..);
        sessionSuccess = YES;
        NSLog(@"inside:%u",sessionSuccess);
    } else {
        NSLog(@"ERROR: Get no session!");
        sessionSuccess = NO;
    }
    dispatch_group_leave(group);
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"ERROR: %@",error);
    sessionSuccess = NO;
    dispatch_group_leave(group);
}];
//[api.operationQueue waitUntilAllOperationsAreFinished];
dispatch_group_wait(group, DISPATCH_TIME_FOREVER);
dispatch_release(group);
DLog(@"outside:%u",sessionSuccess); 
```

然后我什么都没有……没有输出。

哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T02:11:05.483

您可能没有得到任何输出，因为您的程序永远不会超过对`dispatch_group_wait`. 如果确实如此，那么您将看到“外部”日志语句。

如果`dispatch_group_wait`永远不会返回，那么组中肯定还有一些东西。在您的示例代码中，您将一件事添加到组中`dispatch_group_enter`，然后在 api 调用的成功或失败处理程序中将其删除`dispatch_group_leave`。这意味着`dispatch_group_leave`由于某种原因没有被调用。

我怀疑这些块没有被调用的原因是它们将在运行外部代码的同一个调度队列上异步调用。如果是这种情况，那么它们在返回之前无法运行，`dispatch_group_wait`并且`dispatch_group_wait`在块运行之前无法返回。这称为[死锁](http://en.wikipedia.org/wiki/Deadlock)。（编辑：或者，调用成功或失败块的程序的某些部分可能是导致死锁的部分。无论哪种方式，结果都是块不能被调用，因为`dispatch_group_wait`永远不会返回。）

另一种可能性是该方法`-dealWithZTStrangeJSON:`由于某种原因永远不会返回。如果是这种情况，则将调用成功块（您可以在其第一行设置断点以进行验证），但它永远不会到达`dispatch_group_leave`.

无论哪种情况，我都建议您考虑以另一种方式解决您的问题，而不是等待操作完成。也许您可以在成功处理程序内部返回后执行您计划做的事情`dispatch_group_wait`（或者另一种思考方式是成功或失败处理程序可以调用一个方法来执行您当前正在执行的操作`dispatch_group_wait`——无论哪种方式都行，但有时我发现通过调用一个方法而不是将所有代码放在一个块中更容易保持我的代码井井有条。如果你想在成功之间共享一些代码，这可能特别有用和故障块）。

# php - 简单的重构

> ID：15601103
> 
> 赞同：-1
> 
> 时间：2013-03-24T16:40:38.617
> 
> 标签：php, refactoring

如何重构此代码，以便我只有 1 行用于分配 $filename 值。

```
$i = 1;
$filename = $config->PHOTO_PATH . $list->ID . "_" . $i . ".jpg"
while(file_exists($filename)) 
{
    doSomething();
    $i++;
    $filename = $config->PHOTO_PATH . $list->ID . "_" . $i . ".jpg";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T16:43:51.270

```
$i = 1;

$ok=true;
while($ok) 
{
    $filename = $config->PHOTO_PATH . $list->ID . "_" . $i++ . ".jpg";
    $ok=file_exists($filename)
    if ($ok){
       doSomething();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T17:01:57.893

```
$filename = 'prefix' .
            (preg_replace('/prefix([0-9]+)suffix/', '$1', array_pop(glob('prefix*suffix'))) + 1) .
            'suffix'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T16:44:54.093

```
$i = 1;
do {
    doSomething();
    $filename = sprintf('%s%s_%d.jpg', $config->PHOTO_PATH, $list->ID, $i++);
} while (file_exists($filename)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T16:42:05.317

只需替换以下代码：

```
$i++;
$filename = $config->PHOTO_PATH . $list->ID . "_" . $i . ".jpg"; 
```

对于这个：

```
$filename = $config->PHOTO_PATH . $list->ID . "_" . ++$i . ".jpg"; 
```

# delphi - TControlClass 作为通用 TControl 参数？

> ID：15601104
> 
> 赞同：4
> 
> 时间：2013-03-24T16:40:53.173
> 
> 标签：delphi, generics

我有类`TLuaClassTemplate<T: TControl, constructor> = class`并尝试将它的方法`class procedure RegisterClass(L: Plua_State; p: TPrintProc; container: TComponent; vm: TLuaVm); static;`与存储在 TDictionary 中的 TControlClass 引用一起使用

```
 TClassNameToComponentDict = TDictionary<string, TControlClass>;
  TClassNameToComponentPair = TPair<string, TControlClass>;

...
  ClassNameToComponent := TClassNameToComponentDict.Create;
  ClassNameToComponent.Add('TButton', TButton);
  ClassNameToComponent.Add('TPanel', TPanel);
  ClassNameToComponent.Add('TEdit', TEdit); 
```

但我在尝试使用它时遇到问题

```
 enum: TClassNameToComponentPair;
  ctx: TRttiContext;
  cls: TControlClass;
begin
  for enum in vm.ClassNameToComponent do begin
    //TLuaClassTemplate<enum.Value>.RegisterClass(vm.LS, PrintGlobal, container, vm);
    cls := TControlClass((ctx.FindType(enum.Key) as TRttiInstanceType).MetaClassType);
    TLuaClassTemplate<cls>.RegisterClass(vm.LS, PrintGlobal, container, vm);
  end; 
```

我已经尝试了当前可见（通过搜索找到）和注释选项。但错误是`Undeclared identifier: 'TLuaClassTemplate'`在`TLuaClassTemplate<TButton>.RegisterClass(vm.LS, PrintGlobal, container, vm);`工作时。

如何在这里使用 TControlClass 作为通用参数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T16:57:40.343

您遇到的问题是泛型的实例化要求类型参数在编译时是已知的。你的代码`cls`在编译时是未知的，它只在运行时确定。这意味着这`TLuaClassTemplate<cls>`是泛型的无效实例化。

这里的底线是泛型为您的代码提供参数化，但必须在编译时提供参数。由于您直到运行时才知道参数，因此您无法使用泛型解决您的问题。

好吧，我说不能，但你可以使用 RTTI 来调用你的泛型方法。为此，您需要确保每个可能的实例化类型都包含在可执行文件的类型列表中。但是这样做真的会破坏泛型的目的！使用标准运行时参数比使用编译时通用参数要容易得多。

# android - Android ldpi 设备应该使用 mdpi 资源吗？

> ID：15601107
> 
> 赞同：1
> 
> 时间：2013-03-24T16:41:09.213
> 
> 标签：android, resources, dpi

我发布了一个应用程序图标，其中包含 mdpi、hdpi、xhdpi 和 xxhdpi 图像。我收到了一些反馈，在 ldpi 设备上没有使用我的图标，而是使用了来自 android 的默认图标。

这是为什么 ？我的应用程序有一个 drawable-ldpi 文件夹，但它是空的。我应该删除它吗？这是特定于启动器图标的吗？

编辑：我在可绘制文件夹中没有任何图像，只有 xml 形状或选择器。我在 240 x 320 像素的 ldpi 屏幕上看到了这个问题（运行 Android 2.3.6 的三星 Galaxy Y）。我说的是这个应用程序：[http](http://code.google.com/p/morpion-1vs1/) ://code.google.com/p/morpion-1vs1/ （代码是公开的，否则我应该为存储库付费，我知道活动有点混乱）

这是使用的图标：![在此处输入图像描述](../Images/5cc88effba0cb2fefb0862be5fe3538e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T16:47:32.423

将应用程序启动器图标“j5oDi.png”的 36x36 像素大小版本放入“drawable-ldpi”。

* * *

启动器图标大小在此处描述：[启动器图标 -> 大小和格式](http://developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html)

您应该在每个资源文件夹中都有不同大小的图标文件：

*   res/drawable-ldpi (120 dpi - 低密度屏幕): **36x36** px
*   res/drawable-mdpi（160 dpi - 中等密度屏幕）：**48x48** px
*   res/drawable-hdpi（240 dpi - 高密度屏幕）：**72x72** px
*   res/drawable-xhdpi（320 dpi - 超高密度屏幕）：**96x96**像素。

# c# - 没有外部登录的 SimpleMembership？

> ID：15601114
> 
> 赞同：0
> 
> 时间：2013-03-24T16:41:53.943
> 
> 标签：c#, asp.net-mvc, simplemembership

我刚开始写一些关于 SimpleMembership 的文章，我真的很喜欢它，但我更喜欢没有外部登录（Facebook、Twitter、OAuth）。默认情况下不启用它们，但几乎在每个帐户模型或视图中都有一部分用于外部登录。

是否可以“删除”或“禁用”此功能，是否有任何文章与之相关？

# facebook - Facebook 登录 如何进行

> ID：15601115
> 
> 赞同：0
> 
> 时间：2013-03-24T16:41:53.943
> 
> 标签：facebook, login

我是 facebook 登录系统的新手。我想问一下，在获得权限后，如何使用作为get参数传递的代码在PHP SDK中为用户检索令牌...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:49:37.373

我猜你甚至没有阅读 Facebook 文档

你可以开始阅读这个

[https://developers.facebook.com/docs/concepts/login/](https://developers.facebook.com/docs/concepts/login/)

在这里您可以了解如何使用 php SDK [https://developers.facebook.com/docs/howtos/login/server-side-login/检索令牌](https://developers.facebook.com/docs/howtos/login/server-side-login/)

# mysql - SQL max 涉及 3 个表的计数

> ID：15601117
> 
> 赞同：0
> 
> 时间：2013-03-24T16:41:59.753
> 
> 标签：mysql, join, count, group-by, sql-order-by

我有一张`Customers`带有`CustomerID`and`PhoneNumber`的桌子，第二张桌子`Orders`有`CustomerId`and`OrderNumber`和第三张桌子`OrderDetails`有`OrderNumber`, `PriceOfOneUnit`and `UnitsOrdered`。我需要找到`PhoneNumber`最大订单的客户 ( `PriceOfOneUnit * UnitsOrdered`)。在加入 3 个表后，执行`count(PriceOfOneUnit*UnitsOrdered)`as`A1`然后 `Group By CustomerId Order By A1 DESC LIMIT 1 显然不起作用。任何人都可以帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:23:49.827

试试这个，

```
SELECT  cus.CustomerId, cus.PhoneNumber
FROM    Customers cus
        INNER JOIN Orders a 
            ON cus.CustomerId = a.CustomerId
        INNER JOIN OrderDetails b
            On a.OrderNumber  = b.OrderNumber 
GROUP   BY cus.CustomerId, cus.PhoneNumber
HAVING  SUM(b.PriceOfOneUnit * b.UnitsOrdered) = 
        (
            SELECT  SUM(b.PriceOfOneUnit * b.UnitsOrdered) totalOrdersAmount
            FROM    Orders aa
                    INNER JOIN OrderDetails bb
                        On aa.OrderNumber  = bb.OrderNumber
            GROUP   BY aa.CustomerId
            ORDER   BY totalOrdersAmount DESC
            LIMIT   1
        ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T16:50:49.407

如果我们相信您的话，而您想要的是最大的单个订单项而不是最大的订单，您可以找到最大的订单项，然后找到它所属的订单，然后找到下该订单的客户. 您可以使用虚拟聚合函数从 orderDetails 中拉回订单 ID。

编辑：好的，对于刚开始的人，我认为根据维恩图思考并使用所谓的内联视图和子查询会更清楚：

```
select customername, phone
from customer
inner join

(

     select o.id, customerid from orders o
     inner join
      ( 
        select od.orderid from orderdetail od
        where (od.qty * od.itemprice) =
            (
              select max(od.qty * od.itemprice)
              from orderdetail as od
            ) 

      ) as biggestorder
    on o.id = biggestorder.orderid

 ) as X
on customer.id = X.customerid 
```

括号内的每个查询都返回一个可以与其他集合连接/相交的集合。

# ember.js - 如何渲染hasMany关系数据？

> ID：15601118
> 
> 赞同：11
> 
> 时间：2013-03-24T16:42:00.853
> 
> 标签：ember.js, ember-data

在呈现 URL /#/persons/1 时，如何获取以下示例代码来呈现人员数据以及该人员的电话号码。我尝试循环使用电话号码，`{{#each phoneNumber in phoneNumbers}}`但我这边必须有一个基本的理解错误。

现在我只得到：

![在此处输入图像描述](../Images/37466a2873ac09168b732e57ba525a6f.png)

应用程序.js

```
App = Ember.Application.create({
  LOG_TRANSITIONS: true,
  rootElement: '#container'
});

// Router
App.Router.map(function() {
  this.resource('persons', function() {
    this.resource('person', { path: ':person_id' });
  });
  this.resource('phoneNumbers', function() {
    this.resource('phoneNumber', { path: ':phone_number_id' });
  });
});

App.PersonsRoute = Ember.Route.extend({
  model: function() {
    return App.Person.find();
  }
});

App.PhoneNumbersRoute = Ember.Route.extend({
  model: function() {
    return App.PhoneNumber.find();
  }
});

// Models
App.Store = DS.Store.extend({
  revision: 11,
  adapter: 'DS.FixtureAdapter'
});

App.Person = DS.Model.extend({
  firstName: DS.attr('string'),
  lastName: DS.attr('string'),
  phoneNumbers: DS.hasMany('App.PhoneNumber')
});

App.PhoneNumber = DS.Model.extend({
  number:  DS.attr('string'),
  person: DS.belongsTo('App.Person')
});

App.Person.FIXTURES = [{
  id: 1,
  firstName: 'X',
  lastName: 'Smith'
}, {
  id: 2,
  firstName: 'Y',
  lastName: 'Smith'
}];

App.PhoneNumber.FIXTURES = [{
  id: 1,
  person_id: 1,
  number: '20'
}, {
  id: 2,
  person_id: 1,
  number: '23'
}, {
  id: 3,
  person_id: 2,
  number: '42'
}]; 
```

索引.html

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Phone book</title>
  </head>
  <body>
    <div id='container'></div>

    <script type="text/x-handlebars" data-template-name="application">
      {{outlet}}
    </script>

    <script type="text/x-handlebars" data-template-name="persons">
      <p>All people:</p>
      <ul>
        {{#each controller}}
          <li>{{firstName}} {{lastName}}</li>
        {{/each}}
      </ul>
      {{outlet}}
    </script>

    <script type="text/x-handlebars" data-template-name="person">
      <h1>{{firstName}} {{lastName}}</h1>
      {{#if phoneNumbers.length}}
        <ul>
          {{#each phoneNumber in phoneNumbers}}
            <li>{{phoneNumber.number}}</li>
          {{/each}}
        </ul>
      {{/if}}
    </script>

    <script type="text/x-handlebars" data-template-name="phone_numbers">
      <ul>
        {{#each controller}}
          <li>{{number}}</li>
        {{/each}}
      </ul>
      {{outlet}}
    </script>

    <script type="text/x-handlebars" data-template-name="phone_number">
      <h1>{{number}}</h1>
    </script>    

  </body>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script type="text/javascript" src="js/handlebars.js"></script>
  <script type="text/javascript" src="js/ember.js"></script>
  <script type="text/javascript" src="js/ember-data.js"></script>
  <script type="text/javascript" src="js/app.js"></script>
</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T17:01:36.180

Ember-data 在这方面不像 ActiveRecord：当你使用时，你必须有一个属性，它是记录的 s`has_many`数组。`id`在互惠模型中，拥有所有者的外键是不够的。

尝试添加`phoneNumbers: [1, 2]`到您的第一个`Person`夹具和`phoneNumbers: [3]`第二个夹具。

如果您使用的是 RESTAdapter，则将`phone_number_ids`改为使用这些键名。如果您使用`active_model_serializers`，您可以使用该`embed`功能自动包含一个 id 数组。

# ios - 如何将包含格式为@“MM/dd/YYYY h:mm a”的日期的字符串转换为UTC秒数

> ID：15601124
> 
> 赞同：-1
> 
> 时间：2013-03-24T16:42:14.890
> 
> 标签：ios, objective-c, ios5, ios6

如果我得到格式的字符串日期`@"MM/dd/YYYY h:mm a"`并且我有日期的时区（字符串日期），我怎样才能将它转换为 UTC 数字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:25:11.757

尝试这个

```
 NSString *dateString = @"03/23/2012 09:17 PM";
    //It is assumed that the time in dateString wrt local time zone
    NSDateFormatter *dateFormatter = [NSDateFormatter new];
    [dateFormatter setDateFormat:@"MM/dd/yyyy h:mm a"];

    NSDate*date = [dateFormatter dateFromString:dateString];

    NSTimeInterval timeInSeconds = [date timeIntervalSince1970]; 
```

# javascript - 从 JQuery 图像中的 error() 事件中检索 HTTP 状态代码。

> ID：15601125
> 
> 赞同：0
> 
> 时间：2013-03-24T16:42:15.900
> 
> 标签：javascript, jquery

我需要通过 Javascript 加载图像，但如果失败，请知道 404 和 500 错误之间的区别。

我有将图像加载到“img”标签中的代码，如下所示：

```
var img = $('<img />').attr('src', url)
    .load(function() {
        // Do something.
    })
    .error(function(ev) {
        // What sort of error?
    }); 
```

在 error() 函数中，我似乎无法判断错误是 500 还是 404。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:08:56.593

像这样处理和测试[http状态页面](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)

`**[DEMO](http://jsfiddle.net/UQTY2/38/)**`

```
var img = $('<img />')
    .load(function() {
        // Do something.
    })
    .error(function(jqXHR, error, errorThrown) {  
       if(jqXHR.status&&jqXHR.status==404)
       {
            alert(jqXHR.responseText); 
       }
       else
       {
           alert("Something went wrong");
       }
    })
    .attr('src', url); 
```

# javascript - 应用程序范围的 jquery 脚本

> ID：15601128
> 
> 赞同：0
> 
> 时间：2013-03-24T16:42:25.780
> 
> 标签：javascript, jquery, ruby-on-rails, facebook

我使用一些 Facebook JS 脚本进行用户身份验证等。我想以适当不显眼的方式将它们作为应用程序范围的脚本放置。

目前我将脚本作为部分脚本并从我的应用程序头中调用它：

```
<%# render 'layouts/facebook_app_scripts' %> 
```

该脚本有效，但非常突兀。我想让它不引人注目。这一点尤其重要，因为我使用了各种各样的 API，而且变得一团糟。

您不需要完整地查看它（如果您需要查看脚本来回答这个问题，我认为您不会有任何帮助，因为这是一个一般问题，不是特定于脚本的）

您应该知道它包含动态创建的链接，例如：

```
window.top.location = "<%= Facebook::SITE_URL.to_s %>/logout"; 
```

这意味着将它放在 assets/javascript 文件夹中的 .js 文件中是行不通的，因为 .js 文件无法访问 rails 生成的变量。

那么如何将我的 javascript 与动态生成的链接从 rails 视图转移到一个不显眼的 javascript 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:52:18.193

查看[这个项目](https://github.com/siong1987/facebook_js)，将所有 Facebook JS SDK 作为 gem 包含在内

# html - HTML5 画布线 - 我怎样才能让它们看起来更平滑？

> ID：15601131
> 
> 赞同：1
> 
> 时间：2013-03-24T16:42:58.883
> 
> 标签：html, canvas, line

我想画线条，但它们有锋利的边缘，例如，如果你用线条写一个词。在 Photoshop 中，您可以使用不那么锐利的画笔，或者您可以采用高分辨率并缩小。HTML5 画布线也有一个很好的技巧吗？

```
 canvas.addEventListener('mousemove', function(e) {
        this.style.cursor = 'pointer';
        if(this.down) {
             with(ctx) {
                beginPath();
                moveTo(this.X, this.Y);
                lineTo(e.pageX , e.pageY );
                strokeStyle = red;
                ctx.lineWidth=1;
                stroke();
             }
             this.X = e.pageX ;
             this.Y = e.pageY ;
        }
    }, 0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:52:54.143

正如您所发现的，当您让用户使用 mousemove 绘制折线时，您最终会得到一个绘制非常锯齿状线的点列表。

你需要做的是：

*   减少点数
*   使生成的路径与用户预期的形状保持一致。

所以你想从“之前”到“之后”：

![在此处输入图像描述](../Images/4987bfee27034e2ae5f0ef2fa7804d2b.png)

**Ramer-Douglas-Peucker 多边形简化算法**

您可以使用 Ramer-Douglas-Peucker (RDP) 多边形简化算法来做到这一点。它减少了折线的“锯齿状”，同时保持了预期路径的本质。

以下概述了 RDP 的工作原理及其能够实现的目标：http: [//ianqvist.blogspot.com/2010/05/ramer-douglas-peucker-polygon.html](http://ianqvist.blogspot.com/2010/05/ramer-douglas-peucker-polygon.html)

感谢 Matthew Taylor，这是 RDP 算法的 javascript 实现：[https ://gist.github.com/rhyolight/2846020](https://gist.github.com/rhyolight/2846020)

在 Matthew 的暗示中，“epsilon”是一个数字，表示您希望与原始“锯齿状”保持多近。

# c# - 如何在 WinForms 中创建一个阻止父级的窗口

> ID：15601143
> 
> 赞同：1
> 
> 时间：2013-03-24T16:43:54.400
> 
> 标签：c#, winforms, visual-studio-2010

我在 C# 中使用 Windows 窗体构建的程序中有一个订单表单页面，我想制作它，以便用户可以使用单独的弹出窗口将项目添加到订单中，该窗口显示用户可以从中获取的产品列表选择。一旦选择了一个项目，弹出窗口关闭并且一个项目被添加到订单表格中，项目添加过程可以根据需要重复。

我的问题是，除了显示窗口之外，我如何将从一种形式中选择的订单的详细信息传递到另一种形式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T16:51:25.177

使用对话框。

如果您调用[`.ShowDialog()`](http://msdn.microsoft.com/en-us/library/c7ykbedk.aspx)a `Form`，它将阻塞直到表单关闭。

这意味着您可以执行以下操作：

```
// la la normal code
var itemSelect = new ItemSelectionForm();
itemSelect.ShowDialog();
// Check that they have selected something
if (itemSelect.ItemList.SelectedItem != null)
{
    // Item adding code
    // ...
    // Use itemSelect.ItemList.SelectedItem as the selected item from the popup form
} 
```

# c - 堆栈中的自动变量占用了多少内存空间

> ID：15601144
> 
> 赞同：4
> 
> 时间：2013-03-24T16:44:07.460
> 
> 标签：c, function, compiler-construction, stack, local-variables

我读到 C 中的函数可能会使用基于本地堆栈的变量，并且只需将堆栈指针减少所需的空间量即可分配它们。这总是以**四字节块的**形式完成（如果我没记错的话）。但是，如果运行如下代码怎么办：

```
 void foo(void)
{
   char str[6];
   ......
} 
```

var`str`占用什么大小？根据四字节块的`6`字节或字节。`6 × 4`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T16:47:59.587

四字节块规则只是意味着堆栈指针必须指向一个四的倍数的地址。在这种情况下，分配 8 个字节满足该规则，并且这样的块足够大，可以容纳一个只有 2 个填充字节的 6 字符数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T17:11:37.817

数据对齐是 CPU 要求，这意味着对齐量从一个 CPU 更改为另一个，请记住这一点。

谈到堆栈数据对齐，`gcc`例如使用名为`-mpreferred-stack-boundary=n`where the data will bealigned to的选项保持数据对齐`2^n`。默认情况下， 的值为`n`4，这使得堆栈对齐为 16 字节。

这意味着您会发现自己在堆栈内存中分配了 16 个字节，尽管您明确分配的只是一个整数。

```
int main()
{
        char ar[6] = {1,2,3,4,5,6};
        int x = 10;
        int y = 12 + (int) ar[1] + x;
        return y;
} 
```

在我的 CPU 上使用 gcc 编译此代码会生成以下程序集（仅发布堆栈分配指令）：

```
subl    $32, %esp 
```

但是为什么是32？我们正在分配恰好适合 16 个字节的数据。好吧，gcc 需要保存 8 个字节`leave`，`ret` 这使得所需的总内存为 24。
但是，对齐要求是 16 字节，因此 gcc 需要分配堆栈空间，以便它由 16 字节块组成; 将 24 字节变为 32 可以解决问题。
您将有足够的空间来存放变量，`ret`and`leave`和它由两个 16 字节的块组成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T17:32:41.753

如果你有：

```
char str[6];
int a;
char b;
char c; 
```

堆栈将有足够的大小来包含所有这些变量，并且可以被 4 整除（或任何需要对齐）。但是每个变量不需要在同一边界上对齐（尽管可能有硬件要求）。

在我的系统上，编译上述内容并打印出堆栈变量的地址（为简洁起见，前导数字被删除）：

```
&str    -- 18
&a      -- 12
&b      -- 10
&c      -- 11 
```

即编译器将安排堆栈对齐，但不需要填充变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T17:01:27.937

我猜你对**数据大小**和**数据对齐**感到困惑。没有一般规则，但是，在现代计算机上，您的变量将存储在 6 个字节中。另一方面，下一个元素不一定会存储在下一个字节中。这称为**数据结构填充**。

**字对齐**架构（每个变量都必须从字长倍数的地址开始）变得越来越少见。对于 SPARC 或 x86 等新处理器，变量是**自对齐的**。这意味着它们必须从一个是其类型大小倍数的地址开始。

因此，在非外来计算机上没有“四字节卡盘规则”。在您的示例中，`str`将存储 6 个字节。例如，如果您声明一个对齐为 8 个字节的变量（例如`double`在 x86 上），您的编译器将插入 2 个填充字节。

对齐由编译器根据您的体系结构固定。所以标准没有定义任何关于它的东西。您可以在[Wikipedia](http://en.wikipedia.org/wiki/Data_structure_alignment)上找到更多信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-24T17:03:04.060

分配 4 字节块的规则并非在所有情况下都有效。例如，ARM eabi 要求对齐 64 位整数并在 8 字节边界上加倍。

通常分配的空间与数据打包成结构的规则相匹配。所以`char[6]`实际上需要 6 个字节（通常），但是数据的填充（对于下一个字段）可以使用更多的字节。

例子：

```
struct X
{
    char field1[6];
}; 
```

所以结构 X 大小将是`8`

```
structure Y
{
    char field1[2];
    double field2;
}; 
```

结构 Y 通常类似于`8`,`12`或`16`字节，具体取决于架构。

相同的规则适用于自动堆栈变量：通常填充不是由您正在使用的类型决定，而是由您将使用的下一个类型决定。规则有时有点模糊。

# paypal - paypal 立即购买 退货

> ID：15601146
> 
> 赞同：1
> 
> 时间：2013-03-24T16:44:13.887
> 
> 标签：paypal

输入 type="hidden" name="rm" value="0" 结束交易后 Paypal 返回 URL 定义在 input type="hidden" name="return"**没有** 包含在 GET 中的付款变量，

如果我在结束交易后设置输入类型 =“隐藏”名称 =“rm”值 =“2”，则在 URL 中定义的输入类型 =“隐藏”名称 =“返回”在 POST 中包含付款变量，但是当浏览器发出警报时如果买家不点击确定，则将离开安全连接，重定向**总是**在 POST 中不包含付款变量的情况下开始......

我需要返回 URL 包含在 GET 中的付款变量，有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:02:02.917

如果您想使用 GET 方法，最好使用 PDT，而不是设置返回 URL 和 rm 变量。这将始终将变量作为 get 方法返回，并允许您验证返回的变量是否来自 PayPal。

# java - 制作许多通用对象的最佳方法

> ID：15601147
> 
> 赞同：3
> 
> 时间：2013-03-24T16:44:47.087
> 
> 标签：java, oop, class

**背景**

对于课堂，我制作了一个线性链接哈希表。它存储一个链表数组，每当调用 get 或 put 时，键都会被散列并以数组大小取模。然后在生成的链表（我也实现了）上调用 get 或 put。

我有一个`ST`（符号表）界面。它很像`Map`，但一些`Map`必需的操作对我来说太混乱了，无法实现。实现这个接口，我实现了链表、红黑树、线性探测哈希表和线性链接哈希表。

我想做一个类似于接受任意委托符号表类型的线性链接哈希表的东西。例如，使用红黑树类型对其进行初始化将创建一个红黑树表，而 get 和 put 函数将委托给这些红黑树。

我认识到我的实现几乎肯定比库提供的慢，而且我最好在实际代码中使用它们。我只是在尝试和学习。

**问题**

向我的哈希表提供类型的最佳方法是什么，以便哈希表将包含该类型的表，并且调用将委托给这些符号表？

我不能使用泛型，因为我无法初始化它们，我需要在构造和重新调整大小时进行初始化。

我考虑过提供一个所需类型的空白符号表来启动，然后使用该`copy`方法，但似乎应该有更好的方法。在那儿？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T16:59:09.980

您可能`Factory`还需要提供一个来创建所需支持结构的实例。

一个简单的例子，其中 a`Map`委托给 another `Map`：

```
public static interface Supplier<T> {

    T get();
}

public static class DelegatingMap<K, V> implements Map<K, V> {

    private final Map<K, V> backingMap;

    public DelegatingMap(final Supplier<Map<K, V>> backingMapSupplier) {
        backingMap = backingMapSupplier.get();
    }

    @Override
    public int size() {
        throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
    }

    @Override
    public boolean isEmpty() {
        throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
    }
    //etc...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T17:03:54.360

由于类型擦除，在运行时对象不会自动跟踪它们的类型参数，这就是`new T()`不编译的原因。

您可以通过要求调用者为您提供`Class`类型参数的对象来解决此问题，然后您可以使用它来创建新实例。当然，使用反射绕过编译时检查（特别是，编译器不会检查符号表实现是否具有所需的构造函数），以及您的 IDE 可能提供的任何静态分析（构造函数上的调用层次结构不会显示任何来电者）。

或者，您可以要求调用者为您提供工厂对象，该对象可以按需创建符号表实现。这更灵活（例如，调用者可以选择构造函数参数）和静态类型安全，但也更冗长......

# linux - linux会调度进程还是线程？

> ID：15601155
> 
> 赞同：31
> 
> 时间：2013-03-24T16:45:09.613
> 
> 标签：linux, multithreading, process, kernel, scheduling

在阅读了[这个](https://stackoverflow.com/questions/9154671/distinction-between-processes-and-threads-in-linux)SO question 之后，我有一些疑问。请帮助理解。

调度涉及决定何时运行进程以及运行多长时间。

1.  linux内核是否调度线程或进程？由于内核内部没有区分进程和线程，调度程序如何处理它们？

2.  每个线程的数量是如何决定的？一个。如果为一个进程决定了一个时间量（比如 100us），那么该进程的所有线程之间是否共享？或 b。每个线程的量子由调度程序决定？

注意：问题 1 和 2 是相关的，可能看起来相同，但只是想弄清楚事情是如何工作的，它们都在这里发布。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-24T16:52:23.550

Linux 调度程序（在最近的 Linux 内核上，例如至少 3.0）正在调度*可调度的任务*或简单的*任务*。

一个任务可能是：

*   单线程进程（例如由`fork`没有任何线程库创建的）
*   多线程进程中的任何线程（包括其主线程），特别是 Posix 线程（pthreads）
*   内核任务，它们在内核内部启动并停留在内核领域（例如`kworker`, `nfsiod`, `kjournald`,`kauditd`等`kswapd`...）

换句话说，多线程进程中的线程像非线程（即单线程）进程一样被调度。

低级[clone(2)](http://man7.org/linux/man-pages/man2/clone.2.html)系统调用创建用户级可调度任务（可用于创建`fork`-ed 进程或线程库的实现，如*pthread*）。除非你是低级线程库的实现者，否则不想`clone`直接使用。

AFAIK，对于多线程进程，内核（几乎）不是调度进程，而是调度内部的每个单独的线程（包括主线程）。

^(其实调度中有一些线程组和[亲](https://en.wikipedia.org/wiki/Processor_affinity)和的概念，但我不是很了解)

如今，处理器通常具有多个内核，并且每个内核都在运行一个任务（在某个特定时刻），因此您确实有多个并行运行的任务。

CPU 量子时间分配给任务，而不是进程

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-08-14T16:50:52.150

POSIX 线程规范的 NPTL 实现将线程视为内核中的不同进程，具有唯一性`task_struct`（因此`pid`也是唯一的），因此每个线程本身都是可调度的，如前所述。因此，每个线程都有自己的时间片，并像上面提到的进程一样被调度。

顺便说一句，目前Linux调度器不仅可以调度单个任务（一个简单的进程），还可以调度进程组甚至用户（所有进程，属于一个用户）作为一个整体。这允许实现组调度，其中 CPU 时间首先在进程组之间分配，然后在这些组中分配给单个线程。

Linux 线程不直接对进程或线程进行操作，而是与*可调度实体*一起工作。代表`struct sched_entity`。公平地说，每个进程/线程都是一个`sched_entity`，但反过来可能不是真的。

要了解详细的进程调度，请参阅[此处](https://tampub.uta.fi/bitstream/handle/10024/96864/GRADU-1428493916.pdf?sequence=1)

# ios - 以下 iPhone 应用程序崩溃的原因可能是什么

> ID：15601162
> 
> 赞同：0
> 
> 时间：2013-03-24T16:45:43.220
> 
> 标签：ios, crash-reports, urbanairship.com, crash-log

我在我的应用程序中使用 UrbanAirship，它在使用应用程序时突然崩溃，并在应用程序启动时显示崩溃报告选项，这是崩溃日志：

```
Hardware Model:      iPhone5,2
Process:         OlympusiPhone [5075]
Path:            /Users/USER/OlympusiPhone.app/OlympusiPhone
Identifier:      com.olympus.app
Version:         16.0
Code Type:       ARM
Parent Process:  launchd [1]

Date/Time:       2013-04-07T11:48:30Z
OS Version:      iPhone OS 6.1.2 (10B146)
Report Version:  104

Exception Type:  SIGSEGV
Exception Codes: SEGV_ACCERR at 0xf0000008
Crashed Thread:  28

Thread 0:
0   libsystem_kernel.dylib              0x3a6a9e80 _semaphore_wait_trap + 8
1   SpringBoardServices                 0x37a0fc4b _SBSProcessAssertionCreateForPID + 423
2   UIKit                               0x343a2d6d -[UIApplication beginBackgroundTaskWithExpirationHandler:] + 69
3   OlympusiPhone                       0x00130d1d -[UAAnalytics enterBackground] (UAAnalytics.m:305)
4   CoreFoundation                      0x32426349 __CFXNotificationPost + 1421
5   Foundation                          0x32d3db7f -[NSNotificationCenter postNotificationName:object:userInfo:] + 71
6   UIKit                               0x3436f133 -[UIApplication _handleApplicationSuspend:eventInfo:] + 819
7   UIKit                               0x342e52d1 -[UIApplication handleEvent:withNewEvent:] + 2469
8   UIKit                               0x342e47ad -[UIApplication sendEvent:] + 73
9   UIKit                               0x342e41ef _UIApplicationHandleEvent + 6199
10  GraphicsServices                    0x35ffb5f7 _PurpleEventCallback + 591
11  GraphicsServices                    0x35ffb227 PurpleEventCallback + 35
12  CoreFoundation                      0x324aa3e7 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 35
13  CoreFoundation                      0x324aa38b __CFRunLoopDoSource1 + 139
14  CoreFoundation                      0x324a920f __CFRunLoopRun + 1383
15  CoreFoundation                      0x3241c23d _CFRunLoopRunSpecific + 357
16  CoreFoundation                      0x3241c0c9 _CFRunLoopRunInMode + 105
17  GraphicsServices                    0x35ffa33b _GSEventRunModal + 75
18  UIKit                               0x343382b9 _UIApplicationMain + 1121
19  OlympusiPhone                       0x000bae9f main (main.m:32)

Thread 1:
0   libsystem_kernel.dylib              0x3a6aa5d0 _kevent64 + 24
1   libdispatch.dylib                   0x3a5e1378 _dispatch_mgr_thread + 36

Thread 2:
0   libsystem_kernel.dylib              0x3a6a9e30 _mach_msg_trap + 20
1   CoreFoundation                      0x324aa2bb __CFRunLoopServiceMachPort + 131
2   CoreFoundation                      0x324a9031 __CFRunLoopRun + 905
3   CoreFoundation                      0x3241c23d _CFRunLoopRunSpecific + 357
4   CoreFoundation                      0x3241c0c9 _CFRunLoopRunInMode + 105
5   WebCore                             0x3841b395 _ZL12RunWebThreadPv + 445
6   libsystem_c.dylib                   0x3a6130e1 _pthread_start + 309

Thread 3:
0   libsystem_kernel.dylib              0x3a6a9e30 _mach_msg_trap + 20
1   CoreFoundation                      0x324aa2bb __CFRunLoopServiceMachPort + 131
2   CoreFoundation                      0x324a9031 __CFRunLoopRun + 905
3   CoreFoundation                      0x3241c23d _CFRunLoopRunSpecific + 357
4   CoreFoundation                      0x3241c0c9 _CFRunLoopRunInMode + 105
5   Foundation                          0x32d6988d +[NSURLConnection(Loader) _resourceLoadLoop:] + 309
6   Foundation                          0x32ded231 __NSThread__main__ + 973
7   libsystem_c.dylib                   0x3a6130e1 _pthread_start + 309

Thread 4:
0   libsystem_kernel.dylib              0x3a6a9e30 _mach_msg_trap + 20
1   CoreFoundation                      0x324aa2bb __CFRunLoopServiceMachPort + 131
2   CoreFoundation                      0x324a9031 __CFRunLoopRun + 905
3   CoreFoundation                      0x3241c23d _CFRunLoopRunSpecific + 357
4   CoreFoundation                      0x3247ac4b _CFRunLoopRun + 99
5   OlympusiPhone                       0x0011d303 +[UA_ASIHTTPRequest runRequests] (UA_ASIHTTPRequest.m:4795)
6   Foundation                          0x32ded231 __NSThread__main__ + 973
7   libsystem_c.dylib                   0x3a6130e1 _pthread_start + 309

Thread 5:
0   libsystem_kernel.dylib              0x3a6ba08c ___psynch_cvwait + 24
1   libsystem_c.dylib                   0x3a60b875 _pthread_cond_timedwait + 45
2   JavaScriptCore                      0x363f0dfb __ZN3WTF15ThreadCondition9timedWaitERNS_5MutexEd + 107
3   JavaScriptCore                      0x36503537 JSC::BlockAllocator::blockFreeingThreadMain() + 83
4   JavaScriptCore                      0x36516033 _ZN3WTFL19wtfThreadEntryPointEPv + 15
5   libsystem_c.dylib                   0x3a6130e1 _pthread_start + 309

Thread 6:
0   libsystem_kernel.dylib              0x3a6ba08c ___psynch_cvwait + 24
1   libsystem_c.dylib                   0x3a615cfd _pthread_cond_wait + 41
2   JavaScriptCore                      0x364966e1 JSC::SlotVisitor::drainFromShared(JSC::SlotVisitor::SharedDrainMode) + 145
3   JavaScriptCore                      0x36496625 JSC::MarkStackThreadSharedData::markingThreadMain() + 145
4   JavaScriptCore                      0x36516033 _ZN3WTFL19wtfThreadEntryPointEPv + 15
5   libsystem_c.dylib                   0x3a6130e1 _pthread_start + 309

Thread 7:
0   libsystem_kernel.dylib              0x3a6ba594 ___select + 20
1   libsystem_c.dylib                   0x3a6130e1 _pthread_start + 309

Thread 8:
0   libsystem_kernel.dylib              0x3a6a9e30 _mach_msg_trap + 20
1   CoreFoundation                      0x324aa2bb __CFRunLoopServiceMachPort + 131
2   CoreFoundation                      0x324a9031 __CFRunLoopRun + 905
3   CoreFoundation                      0x3241c23d _CFRunLoopRunSpecific + 357
4   CoreFoundation                      0x3241c0c9 _CFRunLoopRunInMode + 105
5   WebCore                             0x384b5cd1 _ZN7WebCoreL15runLoaderThreadEPv + 145
6   JavaScriptCore                      0x36516033 _ZN3WTFL19wtfThreadEntryPointEPv + 15
7   libsystem_c.dylib                   0x3a6130e1 _pthread_start + 309

Thread 9:
0   libsystem_kernel.dylib              0x3a6a9e30 _mach_msg_trap + 20
1   CoreFoundation                      0x324aa2bb __CFRunLoopServiceMachPort + 131
2   CoreFoundation                      0x324a9031 __CFRunLoopRun + 905
3   CoreFoundation                      0x3241c23d _CFRunLoopRunSpecific + 357
4   CoreFoundation                      0x3241c0c9 _CFRunLoopRunInMode + 105
5   AudioToolbox                        0x31efc90b GenericRunLoopThread::Entry(void*) + 139
6   AudioToolbox                        0x31edd9f5 CAPThread::Entry(CAPThread*) + 297
7   libsystem_c.dylib                   0x3a6130e1 _pthread_start + 309

Thread 10:
0   libsystem_kernel.dylib              0x3a6ba08c ___psynch_cvwait + 24
1   libsystem_c.dylib                   0x3a615cfd _pthread_cond_wait + 41
2   JavaScriptCore                      0x363f0dcd __ZN3WTF15ThreadCondition9timedWaitERNS_5MutexEd + 61
3   WebCore                             0x3862fe81 WTF::PassOwnPtr<WebCore::StorageTask> WTF::MessageQueue<WebCore::StorageTask>::waitForMessageFilteredWithTimeout<bool ()(WebCore::StorageTask*)>(WTF::MessageQueueWaitResult&, bool (&)(WebCore::StorageTask*), double) + 57
4   WebCore                             0x3862fe35 WebCore::StorageThread::threadEntryPoint() + 125
5   JavaScriptCore                      0x36516033 _ZN3WTFL19wtfThreadEntryPointEPv + 15
6   libsystem_c.dylib                   0x3a6130e1 _pthread_start + 309

Thread 11:
0   libsystem_kernel.dylib              0x3a6ba08c ___psynch_cvwait + 24
1   libsystem_c.dylib                   0x3a615cfd _pthread_cond_wait + 41
2   CoreMedia                           0x32a027c9 _FigSemaphoreWaitRelative + 269
3   MediaToolbox                        0x334f494f fpa_AsyncMovieControlThread + 55
4   CoreMedia                           0x32a2088b figThreadMain + 195
5   libsystem_c.dylib                   0x3a6130e1 _pthread_start + 309

Thread 12:
0   libsystem_kernel.dylib              0x3a6ba08c ___psynch_cvwait + 24
1   libsystem_c.dylib                   0x3a615cfd _pthread_cond_wait + 41
2   CoreMedia                           0x32a027c9 _FigSemaphoreWaitRelative + 269
3   MediaToolbox                        0x334f494f fpa_AsyncMovieControlThread + 55
4   CoreMedia                           0x32a2088b figThreadMain + 195
5   libsystem_c.dylib                   0x3a6130e1 _pthread_start + 309

Thread 13:
0   libsystem_kernel.dylib              0x3a6a9e30 _mach_msg_trap + 20
1   MediaToolbox                        0x334fab81 FigExpressNotificationThread + 101
2   CoreMedia                           0x32a2088b figThreadMain + 195
3   libsystem_c.dylib                   0x3a6130e1 _pthread_start + 309

Thread 14:
0   libsystem_kernel.dylib              0x3a6bad98 ___workq_kernreturn + 8
1   libsystem_c.dylib                   0x3a6087f6 _pthread_wqthread + 366

Thread 15:
0   libsystem_kernel.dylib              0x3a6bad98 ___workq_kernreturn + 8
1   libsystem_c.dylib                   0x3a6087f6 _pthread_wqthread + 366

Thread 16:
0   libsystem_kernel.dylib              0x3a6bad98 ___workq_kernreturn + 8
1   libsystem_c.dylib                   0x3a6087f6 _pthread_wqthread + 366

Thread 17:
0   libsystem_kernel.dylib              0x3a6bad98 ___workq_kernreturn + 8
1   libsystem_c.dylib                   0x3a6087f6 _pthread_wqthread + 366

Thread 18:
0   libsystem_kernel.dylib              0x3a6bad98 ___workq_kernreturn + 8
1   libsystem_c.dylib                   0x3a6087f6 _pthread_wqthread + 366

Thread 19:
0   libsystem_kernel.dylib              0x3a6bad98 ___workq_kernreturn + 8
1   libsystem_c.dylib                   0x3a6087f6 _pthread_wqthread + 366

Thread 20:
0   libsystem_kernel.dylib              0x3a6bad98 ___workq_kernreturn + 8
1   libsystem_c.dylib                   0x3a6087f6 _pthread_wqthread + 366

Thread 21:
0   libsystem_kernel.dylib              0x3a6bad98 ___workq_kernreturn + 8
1   libsystem_c.dylib                   0x3a6087f6 _pthread_wqthread + 366

Thread 22:
0   libsystem_kernel.dylib              0x3a6bad98 ___workq_kernreturn + 8
1   libsystem_c.dylib                   0x3a6087f6 _pthread_wqthread + 366

Thread 23:
0   libsystem_kernel.dylib              0x3a6bad98 ___workq_kernreturn + 8
1   libsystem_c.dylib                   0x3a6087f6 _pthread_wqthread + 366

Thread 24:
0   libsystem_kernel.dylib              0x3a6bad98 ___workq_kernreturn + 8
1   libsystem_c.dylib                   0x3a6087f6 _pthread_wqthread + 366

Thread 25:
0   libsystem_kernel.dylib              0x3a6bad98 ___workq_kernreturn + 8
1   libsystem_c.dylib                   0x3a6087f6 _pthread_wqthread + 366

Thread 26:
0   libsystem_kernel.dylib              0x3a6bad98 ___workq_kernreturn + 8
1   libsystem_c.dylib                   0x3a6087f6 _pthread_wqthread + 366

Thread 27:
0   libsystem_kernel.dylib              0x3a6bad98 ___workq_kernreturn + 8
1   libsystem_c.dylib                   0x3a6087f6 _pthread_wqthread + 366

Thread 28 Crashed:
0   libobjc.A.dylib                     0x3a1c15d0 _objc_msgSend + 16
1   OlympusiPhone                       0x001345c3 -[UASQLite executeUpdate:] (UASQLite.m:299)
2   OlympusiPhone                       0x001369af __45-[UAAnalyticsDBManager addEvent:withSession:]_block_invoke_0 (UAAnalyticsDBManager.m:108)
3   libdispatch.dylib                   0x3a5e0793 _dispatch_call_block_and_release + 11
4   libdispatch.dylib                   0x3a5e3b3b _dispatch_queue_drain + 143
5   libdispatch.dylib                   0x3a5e167d _dispatch_queue_invoke + 45
6   libdispatch.dylib                   0x3a5e4613 _dispatch_root_queue_drain + 211
7   libdispatch.dylib                   0x3a5e47d9 _dispatch_worker_thread2 + 93
8   libsystem_c.dylib                   0x3a6087f1 _pthread_wqthread + 361

Thread 29:
0   libsystem_kernel.dylib              0x3a6bad98 ___workq_kernreturn + 8
1   libsystem_c.dylib                   0x3a6087f6 _pthread_wqthread + 366

Thread 28 crashed with ARM Thread State:
    r0: 0x1d8aee90     r1: 0x37f89fb0     r2: 0x3a83a4c0     r3: 0x1cd33cd0 
    r4: 0xf0000000     r5: 0x00000004     r6: 0x1d8aee90     r7: 0x08b0eec8 
    r8: 0x1cd33cd0     r9: 0x0dfe27ec    r10: 0x00000004    r11: 0x1cdc2e50 
    ip: 0x3a813718     sp: 0x08b0ee88     lr: 0x3241fbfd     pc: 0x3a1c15d0 
  cpsr: 0x20000030 
```

这次崩溃的原因可能是什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:07:32.687

问题出在 UrbanAirship 库的 v1.3.6 上。Urban Airship 也进行分析，虽然我没有使用它，但 UrbanAirship 将事件存储在他们的数据库中，并且该代码导致了崩溃。

要解决此问题，请使用库 v1.3.7+。

要使用，请删除旧引用并添加新引用。

希望这可以帮助。

# php - 注册成功后将用户重定向到索引页面并显示弹出窗口

> ID：15601165
> 
> 赞同：0
> 
> 时间：2013-03-24T16:45:56.010
> 
> 标签：php

```
 if (isset($_GET['success']) && empty ($_GET['success'])) {
            echo 'Thank you for registering your service with us!';
            } else {

    //if no errors register user
    if (empty($_POST) === false && empty($errors) === true) {

        $daysavailable='';
        foreach ($_POST['DaysAvailable'] as $value)
        {

        $daysavailable .=$value." ";

        }

        //$test = "Monday, Tuesday";
        $register_info= array (
            'MemberID'  => $_POST['MemberID'],
            'OddJobName'    => $_POST['OddJobName'],
            'Description'   => $_POST['Description'],
            'DaysAvailable' => $daysavailable,
            );
        register_job($register_info);
        if(success){
        echo"<script type=\"text/javascript\">".
            "alert('success');".
            "</script>";
        exit ();
    } else if (empty($errors) === false){
        //otherwise output errors
        echo output_errors($errors);
    }
    } 
```

查看以前的帖子，我更改了代码以添加：

```
 if(success){ //ADDED CODE
            echo"<script type=\"text/javascript\">".
                "alert('success');".
                "</script>"; 
```

完整代码：

```
 if (isset($_GET['success']) && empty ($_GET['success'])) {
            echo 'Thank you for registering your service with us!';
            } else {
    //if no errors register user
    if (empty($_POST) === false && empty($errors) === true) {

        $daysavailable='';
        foreach ($_POST['DaysAvailable'] as $value)
        {

        $daysavailable .=$value." ";

        }

        $register_info= array (
            'MemberID'  => $_POST['MemberID'],
            'OddJobName'    => $_POST['OddJobName'],
            'Description'   => $_POST['Description'],
            'DaysAvailable' => $daysavailable,
            );
        register_job($register_info);

        if(success){ //ADDED CODE
        echo"<script type=\"text/javascript\">".
            "alert('success');".
            "</script>";

        exit ();
    } else if (empty($errors) === false){
        //otherwise output errors
        echo output_errors($errors);
    }
    } 
```

现在我弹出一个窗口，但在同一页面上，“成功”是未定义的同意。

我想要发生的是，当用户成功注册时，他们将被重定向到 index.php，并且当此页面打开时，我需要一个弹出窗口来显示告诉用户他们已成功注册。

我对 PHP 不是很好（从上面可能很清楚）所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T16:51:12.920

在你的注册页面做

```
 if ($success) {
    header('Location: index.php?success=true');
  } 
```

在你的 index.php

```
 if ($_GET['success']) {
      echo"<script type=\"text/javascript\">".
            "alert('success');".
            "</script>";
  } 
```

# c# - 从文本文件中读取数字并替换为其他内容

> ID：15601168
> 
> 赞同：-6
> 
> 时间：2013-03-24T16:46:12.040
> 
> 标签：c#, io

我的文本文件看起来像这样

我的文本.txt

```
1\. This is line one
2\. This is line two
3\. This is line three
..... 
```

现在我想使用 c# 读取 mytext.txt ，然后像这样替换这些行并将其保存到文本文件中。

```
Number. This is line one
Number. This is line two
Number. This is line three
..... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T16:56:08.667

我会给你代码，但解释每个步骤的作用，以便你可以从中学习：

```
// assume that System.IO is included (in a using statement)
// reads the file, changes all leading integers to "Number", and writes the changes
void rewriteNumbers(string file)
{
    // get the lines from the file
    string[] lines = File.ReadAllLines(file);
    // for each line, do:
    for (int i = 0; i < lines.Length; i++)
    {
        // trim all number characters from the beginning of the line, and
        // write "Number" to the beginning
        lines[i] = "Number" + lines[i].TrimStart('0', '1', '2', '3', '4', '5', '6', '7', '8', '9');
    }
    // write the changes back to the file
    File.WriteAllLines(file, lines);
} 
```

# oauth-2.0 - LinkedIn RestSharp 和 OAuthBase 示例

> ID：15601171
> 
> 赞同：0
> 
> 时间：2013-03-24T16:46:21.613
> 
> 标签：oauth-2.0, linkedin, restsharp

有人曾经将 C# 与库[RestSharp](http://restsharp.org/)和[OAuthBase](https://code.google.com/p/oauth/)结合使用，以便与 LinkedIn 进行一些交互吗？

我正在寻找一个使用这些工具进行适当授权（oAuth 2.0）并使用 LinkedIn 上的共享 API 发布帖子的工作示例。

到目前为止，我已经成功地使用这些工具来获取有效的访问令牌（例如，我可以使用它来获取个人资料信息），但是通过共享 API 发布让我陷入了身份验证。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T23:35:49.913

结果比我想象的要简单得多......（不是吗？）

要考虑的要点是：oAuth 2.0 不需要签名、nonce、时间戳、授权标头……这些都不需要。

如果您想使用 sahres API 并使用 oAuth2.0 在 LinkedIn 上发帖...不需要 OAuthbase。

只需按照此处所述的 oauth 2.0 身份验证流程进行操作：http: [//developer.linkedin.com/documents/authentication](http://developer.linkedin.com/documents/authentication)

然后您可以使用以下代码作为起点：

```
var shareMsg = new
            {
                comment = "Testing out the LinkedIn Share API with JSON",
                content = new
                {
                    title = "Test post to LinkedIn",
                    submitted_url = "http://www.somewebsite.com",
                    submitted_image_url = "http://www.somewebsite.com/image.png"
                },
                visibility = new
                {
                    code = "anyone"
                }
            };

            String requestUrl = "https://api.linkedin.com/v1/people/~/shares?oauth2_access_token=" + accessToken;

            RestClient rc = new RestClient();
            RestRequest request = new RestRequest(requestUrl, Method.POST);
            request.AddHeader("Content-Type", "application/json");
            request.AddHeader("x-li-format", "json");

            request.RequestFormat = DataFormat.Json;
            request.AddBody(shareMsg);

            RestResponse restResponse = (RestResponse)rc.Execute(request);
            ResponseStatus responseStatus = restResponse.ResponseStatus; 
```

编码快乐！！

# matlab - matlab怎么找不到匿名函数？

> ID：15601172
> 
> 赞同：5
> 
> 时间：2013-03-24T16:46:28.727
> 
> 标签：matlab

运行脚本时出现一个奇怪的错误：

```
Unable to find function @(x) exp(x) within H:\blabla\myClass.m. 
```

当我调试时，我得到：

```
34  b=myAnonymousFunction(a)
K>> myAnonymousFunction(3)
Unable to find function @() exp(x) within HH:\blabla\myClass.m.
K>> class(myAnonymousFunction)
ans =
function_handle 
```

我试图制作的一个最小的例子工作得很好。

你有什么想法错误来自哪里以及它意味着什么？因为他显然可以找到精神错乱的定义……啊……myAnonymousFunction。这只是一个错误吗？我[在 matlabcentral 上读过一些东西，](http://www.mathworks.com/matlabcentral/newsreader/view_thread/92070)但它已经 7 岁了，没有给出解释。

进一步说明：

我在 Windows 8 64 位下运行 MATLAB 2012 b。源文件最初是在 64 位 Linux 下编写的。

我认为这无关紧要，但 myAnonymousFunction 是 myClass 中函数的参数并存储在单元格数组中。所以它是这样的：文件 myClass.m：

```
classdef myclass < handle
  properties
    x=1337;
    myAnonymousFunctions;
  end
  methods
   function new = myClass(myAnonymousFunctions)
     new.myAnonymousFunction=myAnonymousFunction
   end
   function show(o)
     disp(myAnonymousFunction{1}(o.x));
   end
  end
end 
```

并被称为

```
myMyclass = myClass({@(x)exp(x)})
myMyClass.f(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T19:14:26.537

可能的解决方法：**重新启动 Matlab**。

重新启动 MATLAB 后，问题没有发生......到目前为止。

我猜有问题的 ML 调试器有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T20:40:40.233

在类中使用匿名函数时，我也收到了同样的错误。该函数存储为 Matlab 类中的一个字段，如下所示：

dataBlockObj.processStream(dataBlockObj.activeProcessStreamIndex).func=@(x) x;

我一直在调试代码，但是当我在没有设置任何断点的命令行上运行代码时发生了错误。我的解决方案也是重新启动 Matlab。我在 Windows 2008 服务器上运行 Matlab 2012b 64 位。

# php - 了解自动加载和 spl_autoload_register

> ID：15601174
> 
> 赞同：2
> 
> 时间：2013-03-24T16:46:49.280
> 
> 标签：php, autoload, spl-autoload-register

我有一个小的框架，在我的脚本中我使用自动加载（我现在才知道我需要开始在我的脚本中摆脱这个功能）

我现在正在尝试使用 Twilio API，在他们的代码中，他们使用 spl_autoload_register 函数。当我对我的一个类进行新调用时，在脚本的其余部分中调用 twilio 代码的逻辑块发生故障后

我的文件结构是这样的

```
/classes/
    autoload.php
    DB_Connect.php

/classes/Twilio/

/sms/Twilio/Services/
    twilo.php 
```

正在崩溃的脚本看起来像这样

```
<?php 

include(classes/autoload.php);

if($something_is_true){
    requrie_once(sms/Twilio/Services/Twilio.php);
    //here is where the spl_autoload_register() is called
}

$connection = new DB_Connect();
//script is broken here 
```

我现在需要在 Classes 文件夹中做什么才能使所有类都正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T16:52:01.803

原因可能是你的自动加载器[（`__autoload()`）被完全替换一次`spl_autoload_register()`被调用](http://php.net/manual/en/function.spl-autoload-register.php)：

> 如果您的代码具有现有的 __autoload() 函数，则必须在 __autoload 堆栈上显式注册此函数。这是因为 spl_autoload_register() 将通过 spl_autoload() 或 spl_autoload_call() 有效地替换 __autoload() 函数的引擎缓存。

您可以在几秒钟内更新您的脚本以使其正常工作，因为只需稍作更改即可正确注册您的自动加载器。

目前它看起来像这样：

```
function __autoload($class) {
    // ...
} 
```

像这样更改它（假设您正在运行 PHP 5.3）：

```
spl_autoload_register(function ($class) {
    // ...
}); 
```

在 PHP 5.3 之前添加这个应该也可以工作：

```
spl_autoload_register('__autoload'); 
```

# objective-c - 为什么某个协议在没有实现它的类的情况下工作？

> ID：15601178
> 
> 赞同：2
> 
> 时间：2013-03-24T16:47:23.210
> 
> 标签：objective-c, protocols, uikeyinput

我在委托和数据源等协议方面做了很多工作，最近我使用该`UIKeyInput`协议进行了一些工作。我已经习惯了这样的事情，`self.tableView.delegate = self`但`UIKeyInput`我不需要那样。但是我实现的协议方法（例如`insertText:`等）仍然被调用。

有人可以向我解释这是如何工作的吗？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T16:57:20.497

Cocoa Touch 框架有一个“响应者链”的概念，它是如何确定在哪里传递 UI 输入事件的。“第一响应者”位于响应者链的头部。当 iOS 有键盘输入事件时，它会检查当前的第一响应者是否支持 UIKeyInput 协议，如果支持则调用这些方法。

您不需要为另一个对象注册为 UIKeyInputDelegate，因为框架将这些消息的接收者定义为第一响应者。

# python - 理解 Python 中的“def main”和“重载”

> ID：15601181
> 
> 赞同：-3
> 
> 时间：2013-03-24T16:47:36.110
> 
> 标签：python, functional-programming, overloading

我经常看到一些代码

```
def main(A,B)
    some steps 
```

被描述为“主函数的重载”，在阅读了有关 Python 的更具体的内容后，我知道这不是真的，因为：

*   Python是一种*无损类型*语言
*   Python 中的函数/方法甚至不知道给定参数的类型，python 也不关心

我也不确定实例和“静态方法”或“类方法”之间是否有真正的区别，可能它们是同一件事，唯一的区别是使用装饰器，但这可能与我的在花了这么多时间使用 C/C++ 之后，第一种使用函数式语言的方法。

更重要的是，在 Python 中，第一个缩进级别用作入口点（如 C/C++ 中的 main() ），所以我不明白为什么你应该在与真正的第一个不同的缩进级别定义 main一。

我对 Python 关键字的一般想法是关键字具有特殊的语义值而不是真正定义的语法（可能是因为 C++ 不太“惯用”，我真的不知道如何解释），它们被使用作为某事的占位符，它们为应用它们的部分赋予了特殊含义。还有像`__name__`这样的特殊变量仅用于存储特殊信息，仅此而已。

在我的大脑中存储了所有这些小信息之后，我仍然不明白第一个代码示例的真正含义：

*   main() 函数有什么特别之处？
*   如果它不是真正的“main”，那么定义类似“main”函数的意义何在？
*   如果没有输入，Python如何决定调用哪个函数？
*   `__init__.py`解释器读取文件和其他文件的方式有区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:15:47.110

python 中的 main() 只是一个函数名。常见的成语

```
if __name__ == '__main__':
    #do something 
```

是找出此文件中的代码作为程序运行而不是作为模块导入的快捷方式。

因为 python 旨在实现无类型，所以社区非常重视约定和最佳实践。这不能提供与编译器相同级别的可预测性，但它有助于避免混乱。可读性是 Python 的核心价值，像这样的习语提供了有价值的结构。

Python 不像其他语言那样支持函数重载。在强类型语言中，您可能会编写具有相同名称但输入参数不同的同一函数的多个版本：

```
void DoSomething (int a) {};
void DoSomething (float f) {};
void DoSomething (string s){}; 
```

在 python 中没有等效的成语。在大多数情况下，它是不需要的：对于数字运算，您并不真正关心传入的数字是浮点数、整数还是其他数字——只要它们支持正确的运算符即可。这就是“鸭子打字”的蟒蛇咒语的用武之地 - 如果它像鸭子一样走路并且像鸭子一样嘎嘎叫，那么它就是一只鸭子。因此，python 函数惯用[地在传入参数上查找函数或运算符，而不是检查它们的类型](https://stackoverflow.com/questions/14435122/does-this-approach-to-python-duck-typing-mixed-with-isinstance-make-sense?rq=1)。

至于实例与静态方法：在 python 中，每个实例方法都隐式地将拥有的实例作为函数的第一个参数：

```
class Test(object):
    def __init__(self, arg):
        self.variable = arg
    def example(self):
        print self.variable

fred = Test(999)  # note: no 'self' passed here
fred.example()
>>> 999
joe = Test(-1)
joe.example()
>>> -1 
```

类方法获取类类型，而不是实例，作为隐式的第一个参数。类方法可以看到类级别的变量，这些变量是在类范围内而不是在实例范围内定义的——但它们对特定实例一无所知。

```
class TestCls (Test)
   CLASS_VARIABLE = "hello"
   # other behavior inherited from Test

   @classmethod
   def class_example(cls):
       print cls.CLASS_VARIABLE

barney = TestCls(123)
barney.example()
>>> 123
barney.class_example() # again, no explicit class passed in
>>> 'hello' 
```

静态方法根本没有隐式参数：

```
class TestStatic (TestCls):
    CLASS_VARIABLE = 'goodbye'
    # inherited stuff again
    @staticmethod
    def static_test():
        print "behold, I have no implicit argument" 
```

静态和类方法也不需要调用实例：

```
wilma = TestStatic(123)
wilma.static_test()  # you can call from an instance
>>> behold, I have no implicit argument
# or not:
TestStatic.static_test()
>>> behold, I have no implicit argument 
TestStatic.class_example()
>>> goodbye # the method is inherited, but the class variable come from this class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T16:58:54.413

要回答您的问题：

### `main()`功能

它没有什么特别之处。您必须自己调用它，方法是：

```
def main():
    print "This is main"

if __name__ == "__main__":
    main() 
```

### 为什么使用`main()`

您可能会这样做的原因是为了以方便的方式将您的主要入口点代码放在一起。例如，如果您在 中创建一些变量`main()`，它们将不是全局变量，这样可以避免污染全局命名空间。`main()`如果您从另一个模块导入模块（而不是直接作为脚本运行），它还会阻止函数运行。如果您不想在导入时进行一些初始化（例如，打印消息），但您确实想在作为独立脚本运行时进行初始化，这可能很有用。

### Python如何决定调用哪个函数

Python 不支持这种意义上的“重载”。在给定的命名空间中只能有一个具有给定名称的函数。如果你创建了第二个同名的函数（或同一个类中同名的第二个方法），你会完全覆盖第一个。

### `__init__.py`

这个问题与您的其他问题无关。但不，它不会以不同的方式处理它们。它在不同的时间处理它们（当您导入包时，而不是包中的模块时），但它们中的代码与任何其他 Python 文件中的代码运行相同。

# php - 保存和检索搜索过滤器

> ID：15601188
> 
> 赞同：0
> 
> 时间：2013-03-24T16:48:28.937
> 
> 标签：php, json, serialization

我正在尝试保存搜索过滤器并在用户选择时恢复它，

例如，

有查车页面，

输入是：

```
Car Name
Car Model
Car Maker
Car Year
Car Mileage
Car Owner 
```

我需要允许用户保存搜索过滤器，例如，用户可以保存

```
Car Name : 5 Series
Car Model: BMW
Car Maker: -
Car Year: - 
```

所以他们可以保存它`search filter`，然后使用这个过滤器来恢复它。

我目前使用 jquery 序列化所有输入并使用 保存到数据库中`json_encode`，现在我的问题是如何使用从数据库中检索到的 json_encoded 数据将其恢复回来？

在 MySQL 上保存数据： `{"Car":{"car_id":"","car_name":"e60","car_model":"5series","car_maker":"bmw","car_year":""}}`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T16:55:14.047

您可以使用[`json_decode()`](http://php.net/manual/en/function.json-decode.php)从其 JSON 序列化形式中获取对象。

然而，JSON 并没有存储 PHP 所存储的所有信息。如果您不需要 PHP 领域之外的任何内容的 JSON 版本，您可以考虑直接[`serialize()`](http://php.net/manual/en/function.serialize.php)/ [`unserialize()`](http://www.php.net/manual/en/function.unserialize.php)。更好的是使用适合您的数据库的表单，以便您以后可以在需要时对其进行查询。

# c# - 重命名后 DotNetZip 损坏

> ID：15601189
> 
> 赞同：1
> 
> 时间：2013-03-24T16:48:38.700
> 
> 标签：c#, compression, dotnetzip

我正在使用[DotNetZip](http://dotnetzip.codeplex.com/)库重命名 zip 存档中的文件。

这是我正在使用的代码：

```
void RenameFile(string existingArchive, string oldName, string newName)
{
    using (ZipFile zip = ZipFile.Read(existingArchive))
    {
        ZipEntry targetFile = zip.Entries.FirstOrDefault(f =>
            f.FileName.ToLower() == oldName.ToLower());

        //targetFile is not null.

        targetFile.FileName = newName;
        zip.Save();
    }
} 
```

我遇到的问题是重命名操作后，zip 已损坏。当我使用 WinRAR 浏览它时，我重命名的文件有一个重复的条目（两个条目都是相同的，具有新名称）。当我尝试提取它时，WinRAR 在两个相同的条目上抛出一个 CRC 错误。

我试过保存到不同的文件名，但没有运气。

我正在使用库的 v1.9.1.8（精简版）。

**更新：**

重命名后删除其中一个重复条目似乎有效并且没有明显的副作用。尽管如此，一个不那么老套的方法还是受欢迎的。

```
void RenameFile(string existingArchive, string oldName, string newName)
{
    using (ZipFile zip = ZipFile.Read(existingArchive))
    {
        ZipEntry targetFile = zip.Entries.FirstOrDefault(f =>
            f.FileName.ToLower() == oldName.ToLower());

        //targetFile is not null.

        targetFile.FileName = newName;

        //if the file was duplicated, remove one of the duplicates:
        var dupFiles = zip.Where(f => f.FileName == newName).ToList();
        if (dupFiles.Count > 1)
        {
            zip.RemoveEntries(dupFiles.Skip(1).ToList());
        }

        zip.Save();
    }
} 
```

**更新 2：**

由于答案表明源文件可能是问题所在，我在[这里上传了一个示例 zip 文件（24kb）](https://dl.dropbox.com/u/2817180/test.zip)

这是我用来验证它是否存在此问题的代码：

```
using (ZipFile zip = ZipFile.Read("test.zip"))
{
    ZipEntry entry = zip.Entries.FirstOrDefault(e => Path.GetFileName(e.FileName) == "test.max");
    entry.FileName = Path.Combine(Path.GetDirectoryName(entry.FileName), "newname.max");
    zip.Save(@"test2.zip");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T18:44:45.007

我无法使用我放置的随机 ZIP 文件和最新的稳定 1.9.1.8 Reduced 预编译二进制文件或最新的 Reduced 源代码重现您的问题。您在 ZIP 存档中发布的代码我可以使用 Windows 资源管理器和 7zip（我没有 WinRAR）成功打开和提取文件。

请注意，[Anders Gustafsson 的方法](https://stackoverflow.com/a/15659453/146622)和[您的方法](https://stackoverflow.com/q/15601189/146622)都使用相同`ZipFile`的内部数据结构，因此应该没有区别，您的代码应该可以正常工作。

```
public ZipEntry this[String fileName]
{
    get
    {
        if (_entries.ContainsKey(fileName))
            return _entries[fileName];
        return null;
    }
}

public ICollection<ZipEntry> Entries
{
    get { return _entries.Values; }
} 
```

也许这是您使用的源 ZIP 文件的问题，或者该 ZIP 的完整路径（太长？），或者您选择的新旧文件名？或者您可能打开了另一个应用程序，以某种方式阻止 DotNetZip 删除旧条目？

* * *

## 更新：发现问题！

这个问题确实是您的 ZIP 文件所独有的，但实际上它是 DotNetZip 中的一个错误。

当库从 ZIP 文件中读取文件条目时，它会完全按照 ZIP 文件指定的文件名将其存储在 的`Filename`属性中`ZipEntry`，然后将此文件名作为键存储在`_entries`字典中。在您的情况下，`Filename`您的文件条目的属性具有以下值：

```
C:\Users\rotem\Documents\3dsmax\scenes\test.max

```

然后，当您更改`Filename`属性的值时，DotNetZip 会从中删除当前条目`_entries`并重新添加具有新文件名的条目。

要删除当前条目，它会*规范化当前文件名*并从`_entries`. 因此，它试图以这个规范化的文件名作为键来删除一个条目：

```
用户/rotem/Documents/3dsmax/scenes/test.max

```

`_entries`当然，该文件名没有密钥。它要删除的条目有一个`C:\`前缀和所有反斜杠。因此，旧条目不会被删除。

但 DotNetZip 没有注意到这一点并继续。它将条目设置`Filename`为规范化的新文件名：

```
用户/rotem/Documents/3dsmax/scenes/newname.max

```

然后将条目重新添加到`_entries`字典中。现在，同一个文件条目有两个条目：一个是规范化的新文件名，另一个是非规范化的旧文件名。这就是你所有问题的来源。

我建议 DotNetZip 断言它确实删除了一个重命名条目。它应该*规范化*分配给属性或其支持字段的任何文件名`ZipEntry.Filename`，或者用作`_entries`.

* * *

已在 DotNetZip CodePlex 页面上创建[问题 #16130 。](https://dotnetzip.codeplex.com/workitem/16130)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:00:30.267

*您的方法似乎很合理，因此DotNetZip*库中很可能存在错误。

**但是**，如果您查看*DotNetZip* CodePlex 站点上的[C# 示例，](http://dotnetzip.codeplex.com/wikipage?title=CS-Examples&referringTitle=Examples)*更新 zip 存档*部分，您会看到重命名存档中现有条目的推荐 (?) 方法是：

 **```
zip[oldName].FileName = newName; 
```

这意味着您的方法将更改为：

```
void RenameFile(string existingArchive, string oldName, string newName)
{
    using (ZipFile zip = ZipFile.Read(existingArchive))
    {
        zip[oldName].FileName = newName;
        zip.Save();
    }
} 
```

据我从测试中可以看出，上述方法按预期工作，并且 indexer 属性`this[string fileName]`似乎使不区分大小写的文件名匹配**

# javascript - 是否可以切换浏览器选项卡？

> ID：15601190
> 
> 赞同：0
> 
> 时间：2013-03-24T16:48:40.367
> 
> 标签：javascript, browser, tabs, cross-browser

这是我的要求，

我正在开发一个很老的企业应用程序，它只支持 IE 浏览器。现在，用户有可能从此应用程序中打开多个选项卡/窗口。[我使用jQuery idleTimer Plugin](https://github.com/paulirish/jquery-idletimer/)为我们的目的编写了一个自定义超时插件。当倒计时达到 10 或小于 10 时，我需要切换到此选项卡/窗口以使用户知道该页面会在 10 秒内过期。

那么，有没有解决方案呢？我试过`window.focus()`但不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T16:53:21.320

没有一种跨浏览器的方式可以切换 100% 可靠的选项卡，尤其是在较新的浏览器中。它在大多数较新的浏览器中被主动阻止。作为用户，我很高兴在大多数情况下这很困难，而在其他情况下则不可能做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-06T09:26:12.390

如果我正确理解您的问题，在一个页面中为 Javascript 警报设置超时然后移动到另一个选项卡，超时后出现的警报将触发选项卡切换。

```
setTimeout(function(){ 
    alert("Switched tabs");
}, 
5000); 
```

# php - 来自纯 javascript 的 ajax 调用不返回来自远程 php 文件的响应（没有 jQuery）

> ID：15601191
> 
> 赞同：0
> 
> 时间：2013-03-24T16:48:43.587
> 
> 标签：php, javascript, ajax, http-headers, cross-domain

我正在使用纯 javascript 对驻留在**远程服务器**中的 PHP 文件进行 ajax 调用。但它没有返回响应。

进行 ajax 调用的页面在我的**localhost**中。

这是ajax调用代码：

```
if (window.XMLHttpRequest) {
        xmlhttp=new XMLHttpRequest();
    }
    else{
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function(){
        if (xmlhttp.readyState==4 && xmlhttp.status==200){
            if(xmlhttp.responseText == 1){
                document.getElementById("update").innerHTML = "Update Successfull";
            }
        }
    }
    //https://flo2go-airteliptv.rhcloud.com
    xmlhttp.open("POST",'https://xyz.com/purchasereturn.php',true);
    xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xmlhttp.send("setflag=1"); 
```

远程服务器上的 PHP 代码是这样的：

```
<?php
header('content-type: application/javascript; charset=utf-8');
    $purchasevalue = 0;
    while($purchasevalue != 1){
        $query = "SELECT * FROM purchase WHERE purchase_id = 1";
        $result = mysql_query($query);
        while($row = mysql_fetch_array($result)){
            $purchasevalue = $row['purchase_flag'];
        }
    }
    //$purchasevalue = "{purchase:$purchasevalue}";
    echo $purchasevalue;
?> 
```

我怎样才能得到回应？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:51:47.310

你为什么问`if(xmlhttp.responseText == 1){`xmlhttp.responseText 是实际的响应，我看到你返回 json 所以它永远不会返回 1 所以它永远不会进入 if

# jquery - 占据整个容器宽度的jQuery动画菜单下拉菜单

> ID：15601192
> 
> 赞同：0
> 
> 时间：2013-03-24T16:48:43.580
> 
> 标签：jquery, css, drop-down-menu, jquery-animate

我正在尝试编辑以下 jQuery 动画菜单，以便 subtext div 的宽度是绝对 600px，而不是相对于父菜单列表项的宽度。

[点击这里获取代码](http://tinyurl.com/ckgkhjf)

我尝试将绝对位置添加到 subtext 类，但没有奏效。

例如，当我将鼠标悬停在“关于”菜单项时，这就是我想要得到的。

![在此处输入图像描述](../Images/0959443891b1e21fb820ec136a1b50da.png)

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T19:00:03.863

*   [使用 jQuery 动画演示](http://jsfiddle.net/Matt_Coughlin/x7UPk/1/)
*   [使用 CSS 过渡的演示](http://jsfiddle.net/Matt_Coughlin/JLkJM/3/)   （在 IE9 和更早版本中没有动画）

以下是一些最重要的样式：

```
ul {
    list-style: none;     /* Get rid of bullets on li tags */
    position: relative;   /* Use relative position here, but not on li tags */
}
li {
    /* position: relative; */   /* Remove this style, to make all dropdown
                                   divs appear at the same location */
}
a {
    outline: none;   /* Get rid of outline on links */
}
.subtext {
    overflow: hidden;
    height: 0;
    position: absolute;
    z-index: 1;
}
li:hover .subtext {
    z-index: 2;   /* Make sure the active menu dropdown is on top */
}
/* Apply background color to both the li tags and the dropdown divs */
.green,  .green  .subtext { background-color: #6AA63B; }
.yellow, .yellow .subtext { background-color: #FBC700; }
.red,    .red    .subtext { background-color: #D52100; }
.purple, .purple .subtext { background-color: #5122B4; }
.blue,   .blue   .subtext { background-color: #0292C0; } 
```

带有 CSS 过渡的版本添加了以下样式：

```
.subtext {
    -webkit-transition: height 0.6s;
       -moz-transition: height 0.6s;
            transition: height 0.6s;
}
li:hover .subtext {
    height: 200px;
} 
```

两个演示都使用相同的 HTML 和大部分相同的 CSS。这两个版本都不需要编辑现有的 HTML。带有 CSS 过渡的版本不需要 jQuery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T18:58:38.343

这是实现此目的的一种方法：

`position: relative;`从 li 中删除，添加`display: none;`到`height:0;`.subtext

然后修改javascript代码如下：

```
//When mouse rolls over
$("li").mouseenter(function(){
    $('.subtext').hide(); // remove this for a fancier effect
    $(this).find('.subtext').css({backgroundColor: $(this).css('backgroundColor')})
    $(this).find('.subtext').stop().animate({height:'250px'},{queue:false, duration:600, easing: ''}).show()
});

//When mouse is removed
$("li").mouseleave(function(){
    $(this).find('.subtext').stop().animate({height:'0px'},{queue:false, duration:600, easing: ''}, function() {$(this).find('.subtext').hide()})
}); 
```

[JsFiddle 演示](http://jsfiddle.net/vuRLF/)

# ruby-on-rails - 用户创建的排行榜的 Rails 模型结构

> ID：15601201
> 
> 赞同：0
> 
> 时间：2013-03-24T16:49:31.870
> 
> 标签：ruby-on-rails, ruby, data-structures, rails-models, model-inheritance

我正在寻找一个应用程序，允许多个用户创建自己的表，用字段和“参赛者”填充这些表。

我正在尝试背负我按照 Rails 教程 ( [http://ruby.railstutorial.org/ruby-on-rails-tutorial-book](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book) ) 所做的工作，因此我使用在那里创建的用户模型。

我目前的想法是有以下布局：

```
**User**
- ID
- Name
- Email
- Password
- Created at
- Updated at
- has_many(tables)

**Table**
- ID
- belongs_to (user) through (user.id)
- Title
- Field 1 (string)
- Field 2 (string)
- Field ... (string)
- Field 10 (string)
- has_many(contestants)

**Contestant**
- ID
- belongs_to (table) through (table.id)
- Name
- Field 1 value
- Field 2 value
- Field ... value
- Field 10 value 
```

但是，我手动填充（并且必须限制）字段的数量似乎很混乱，而且我真的不知道我将如何考虑想要创建具有较少字段的表的用户。

此外，我不确定参赛者模型在字段值的标题（和类型）上的继承，即有时该字段希望是一个 int，有时是一个字符串。

我是否以正确的方式解决这个问题，或者是否有更好的结构或一些我没有利用的 Ruby/Railisms？

# excel - 如何删除Excel中多列之间的重复数据？

> ID：15601202
> 
> 赞同：0
> 
> 时间：2013-03-24T16:49:33.357
> 
> 标签：excel

该表表示每个项目的关键字。关键字每一项都有重复的条目，一个关键字放在一个单元格中，不同的条目可以有不同数量的关键字。我应该如何删除excel中每个项目的重复项。

例如：
项目关键字
A -> 123 234 456 123 234
B -> 23 456 23 567

而删除重复关键字后，应该是：
item keywords
A -> 123 456 234
B -> 23 456 567

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T00:18:23.507

假设每列包含一个关键字，这将遍历您可以设置的范围内的行，并且它将删除在该行中多次出现的所有关键字。

```
Sub DeleteDuplicateKeywords()

Dim rng As Range
Dim r As Long 'row iterator
Dim rowRng As Range ' a separate range for each ROW in rng.
Dim c As Long 'column iterator
Dim sKeyword As String
Dim bReview As Boolean

bReview = MsgBox("Do you want to preview which cells will be deleted?", vbYesNo)

Set rng = Range("B13:E18") '<-- change this as necessary for your requirements.

For r = 1 To rng.Rows.Count  'iterate over each ROW in the range

    Set rowRng = rng.Rows(r)

    For c = rowRng.Columns.Count To 1 Step -1 'iterate backwards over the columns, ignoring the first column.

        sKeyword = rowRng.Cells(c).Value 'assign the cell value to a variable

        'Check to see if this keyword exists more than once in this row
        If Application.WorksheetFunction.CountIf(rowRng, sKeyword) > 1 Then
            'if it does, then delete it.
            If bReview Then
                rowRng.Cells(c).Interior.ColorIndex = 39
            Else:
                rowRng.Cells(c).Delete Shift:=xlToLeft
            End If
        End If
    Next
Next

End Sub 
```

# algorithm - 为什么动态规划问题的朴素解决方案需要指数级时间？

> ID：15601204
> 
> 赞同：3
> 
> 时间：2013-03-24T16:49:55.920
> 
> 标签：algorithm, time-complexity, dynamic-programming

我正在努力理解这个问题：

*给你一块长方形布，尺寸为 X 乘 Y，其中 X 和 Y 是正整数，以及可以使用该布制作的 n 个产品的列表。对于 [1,n] 中的每个产品 i，您知道需要一个尺寸为 ai×bi 的矩形布，并且该产品的最终售价为 ci。假设 ai、bi 和 ci 都是正整数。您有一台机器可以将任何矩形布片水平或垂直切成两块。设计一种算法，找到切割 X 乘 Y 块布的最佳策略，以便由所得块制成的产品给出最大的销售价格总和。您可以随意制作任意数量的给定产品副本，如果需要，也可以不制作。*

尽管我实际上已经正确地实现了动态编程解决方案，但我很难理解/证明为什么一个简单的问题解决方案会在指数时间内运行。我认为这首先表明对指数算法缺乏了解，但我现在主要关心的是上述情况。

我知道动态编程解决方案允许我通过记忆我已经完成的工作来节省工作。动态规划的运行时间应该是 O((W*H)(n+w+h)) 或 O(n^3)/多项式。这是因为我正在尝试每个可能的布片宽度和高度。对于每个可能的布块宽度和高度，我尝试每种可能的垂直、水平和块尺寸切割。（我也有点困惑，为什么 n 在时间复杂度中是必要的，因为如果你尝试每一个可能的水平和垂直切割，也应该尝试每一个可能的部分）。

如果我关闭了记忆，那应该给我蛮力方法，这涉及解决整个树。这应该是多项式或 O(2^n)。为什么？具有 O(2^n) 时间复杂度的算法不应该由二叉树表示吗？看起来这个问题的天真的解决方案不会是二元的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:40:45.290

**线性优化**

*   可以使用线性规划\优化来解决超过 1 个变量的问题，

*   时间：O(n)

*   空间：O(1)

**动态规划**

*   解决关于 k 变量的问题可以通过动态规划\优化来完成，

*   时间：O(Π{ Si } * T(Δ Ij) * c) for i: 1..k，其中 Si 是第 i 个可变域大小，Ij 是第 j 个输入大小，c 是计算次数的“常数”在模型中

*   空间：O(Π{ Si }) 基本上需要的存储空间是|S| 维矩阵

**讨论：**

〜基本上你提到的是2变量的情况，解决2变量问题的简单动态规划的最佳版本将具有O（（W * H）（n + w + h））或通常 O(3^n) “输入大小泛化为 n”

~ 我曾经使用维特比动态规划算法编写了一个语言学相似性库，该算法在隐马尔可夫模型上使用概率 N-gram max-min 函数（存储为 3D 矩阵）

~ 如果你有兴趣，它是用 Java 编写的：[下载](https://www.box.com/khaledkhunaifer-opensource/1/706250008/6628026012/1)

资料来源：

*   [通过示例进行动态规划](http://www.webmath.iitkgp.ernet.in/breadth/ma23011/lectnotes07/Dynamic_Programming-4.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-04T03:11:49.307

为了帮助了解为什么它是 2^n（二叉树），将可能的削减视为是/否决定：我在这里削减吗？还是这里？还是这里？每个是/否二元决策都会产生一个必须检查的可能性子树。

这个问题没有用二叉树表示的原因是因为我们只对叶子感兴趣。具体来说，在最优叶子中。从根到那片叶子的路径是最优切割的解决方案。树本身就是可能的解空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T18:19:07.003

这个问题听起来像是背包问题的衍生问题（即，从给定的空间中获得尽可能多的价值）。考虑到这一点，请看[这里](http://www.geeksforgeeks.org/dynamic-programming-set-10-0-1-knapsack-problem/)。有一节解释了简单的解决方案（并用二叉树表示），并显示了重叠的子问题。

如果你不明白你的问题与背包问题的相同之处，你应该从那里开始。

# java - 依赖注入是不是有点类似于 AOP？

> ID：15601207
> 
> 赞同：0
> 
> 时间：2013-03-24T16:50:21.803
> 
> 标签：java, dependency-injection, proxy, spring-aop

在工作中与同事进行了讨论：我们很困惑 AOP 是否与 DI 有点相似，因为代理对象开始发挥作用@AOP，并阅读（下文）Spring DI 也使用动态代理来创建对象

[http://www.postsharp.net/blog/post/Anders-Hejlsberg-Dead-Body.aspx](http://www.postsharp.net/blog/post/Anders-Hejlsberg-Dead-Body.aspx)

> 现在所有的依赖注入框架都带有一些类似 AOP 的特性：当你需要一个接口的实现时，你不会收到实现本身，而是会收到一个代理（称为 DynamicProxy），这个代理在调用最终实施。`It looks like AOP, it smells like AOP,`但它很难与成熟的 AOP 框架相提并论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T17:07:24.523

我想说的是，使用依赖注入使基于动态代理的 AOP 更易于使用，因此是一条自然的路径。

但是你可以在不使用 AOP 的情况下使用依赖注入，也可以在不使用依赖注入的情况下使用 AOP。顺便说一句，代理不仅用于实现 AOP，还用于解决循环依赖关系或能够将较小范围的对象（例如，请求范围的对象）注入到较大范围的对象（例如，单例范围的对象）中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T18:06:02.163

*   **依赖注入**是将组件注入到需要其行为的组件中。
*   **面向方面的编程**是关于将横切关注点应用于代码（实际上是关于坚持[开放/封闭原则](https://en.wikipedia.org/wiki/Open/closed_principle)）。

使用 DI 时，AOP 会变得更加自然。您可以使用代理来做到这一点，但我个人的偏好是通过应用好的旧[装饰器](https://en.wikipedia.org/wiki/Decorator_pattern)来做到这一点。

> 它看起来像 AOP，闻起来像 AOP，但很难与成熟的 AOP 框架相提并论。

我完全不同意这篇声明的作者。根据我的经验，PostSharp 之类的工具可以让您解决应用程序中的设计缺陷。在处理遗留应用程序或无法更改的设计（例如处理`INotityPropertyChanged`接口）时，这可以使这些工具非常强大。然而，虽然这些工具允许您在不修复设计的情况下添加 AOP 功能，但这些设计缺陷仍然会在项目的整个生命周期中困扰您。

一个简单的例子是可测试性。像这样的工具并没有解决应用程序的可测试性问题，而依赖注入模式确实解决了这个问题。由于这些工具在编译时编织切面，这使得在没有切面的情况下测试代码非常困难（这是您在进行单元测试时需要做的事情，有时甚至在集成测试时也是如此）。您将不得不使用编译器指令做一些巧妙的技巧，但这只能解决部分问题，因为您仍然想测试这些方面，但只是孤立地测试，就像您想孤立地测试每段代码一样（这就是单元测试是关于）。即使你能解决它，你的代码仍然很难维护。无法维护的代码是由设计缺陷引起的。

文章的作者说：

> 第一个问题是动态代理仅允许您将方面添加到服务的显式边界，您选择公开为接口的那些。即使您愿意，也不能向私有或静态方法添加方面。

他对此完全正确，但是如果您想为私有或静态方法添加方面，那么您的设计就有问题：修复设计！

> 第二个问题更具戏剧性。当您沉迷于 AOP 的一些好处时，即使您不需要依赖注入，您也开始使用动态代理，仅仅因为动态代理的要求而改变代码的体系结构。这是错误的。AOP 不需要您更改代码的体系结构。

再一次，作者是对的：使用 PostSharp 时，您不需要更改 AOP 的体系结构。但是如果设计不正确，应用方面仍然要困难得多，即使使用 PostSharp 之类的工具也是如此。并且不要忘记使用 PostSharp 的无属性 AOP 只有在使用商业版本时才有可能。使用属性应用 AOP 仍然会导致高耦合和维护问题。所有 DI 工具（至少对于 .NET）都可以免费使用，并且默认使用无属性。

好的设计根本没有其他选择，当拥有像 PostSharp 这样的正确设计工具在大多数情况下变得多余时。它们在某些边缘情况下仍然是有益的（并且在这些情况下可能非常*有益），但根据我的经验，当您的设计是*[SOLID](https://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)时，这些情况很少见。

现在问题显然变成了：什么是好的 SOLID 设计？根本没有现成的、始终有效的设计可以应用于所有应用程序。我设计的每个应用程序都是不同的，尽管在过去几年中我看到了某些可能对您也有益的重复模式。[我过去在这里](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91)、[这里](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=92)和[这里](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=95)都写过这个。这些文章中描述的模式已经成为我帮助设计和构建的许多应用程序的基本构建块。这些模式的关键成分是 SOLID。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T13:53:07.153

不：

1) 依赖注入工具（控制反转容器）通常*带有*AOP/拦截工具（例如Castle Windsor 带有Castle DynamicProxy），但这是一种方便——IoC 工具不需要具有此功能。

2）无需依赖注入即可使用AOP工具。例如，无论您使用什么 IoC 工具，PostSharp 都可以独立工作。另一个例子：您*可以*在没有 IoC 容器的情况下使用 Castle DynamicProxy，但我无法想象您想要的许多场景。

（很抱歉在我的回答中使用了 .NET 工具，因为我对 Java 工具不太熟悉）。

# java - 从preparedStatment中提取完整的sql以写入文件？

> ID：15601208
> 
> 赞同：0
> 
> 时间：2013-03-24T16:50:22.547
> 
> 标签：java

我有一个对 mysql 数据库进行大量写入的 java 应用程序。重要的是不要丢失数据，因此如果 mysql 连接中断并且有人关闭了应用程序，应用程序队列中的数据就会丢失。

我需要找到一种在应用程序关闭时将查询正确写入文件的方法，以便下次启动时我可以加载未保存的数据并尝试处理它。

问题是我找不到从`preparedStatement`系统中查看最终 sql 语句的方法，并且查询的数据不容易写入文件，因为它们都来自各种对象。

有没有办法获取完整的查询，以便在数据库连接消失时将其写入文件？

我认为不是 - 除了自己构建 sql 之外，还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:54:31.093

你可以做

```
preparedStatement.toString() 
```

如果您使用的是 JDBC MySQL 驱动程序。

或者，您可以使用[Log4JDBC](http://log4jdbc.sourceforge.net)

# php - 向嵌套数组添加更多元素

> ID：15601213
> 
> 赞同：0
> 
> 时间：2013-03-24T16:51:00.950
> 
> 标签：php

如果我有这样的数组：

```
Array
(
    [0] => Array
        (
            [user_id] => 1
            [item_id] => 2
            [quant] => 3
        )

    [1] => Array
        (
            [user_id] => 5
            [item_id] => 5
            [quant] => 6
        )

) 
```

如何继续向其中添加元素以获得此结果：

```
Array
(
    [0] => Array
        (
            [user_id] => 1
            [item_id] => 2
            [quant] => 3
        )

    [1] => Array
        (
            [user_id] => 5
            [item_id] => 5
            [quant] => 6
        )

    [2] => Array
        (
            [user_id] => 7
            [item_id] => 8
            [quant] => 9
        )

) 
```

我尝试了一些函数，如 array_merge 和 array_push，但没有成功。问题是在向其中添加更多数组时单独处理每个嵌套数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T16:53:04.857

你试过了吗

```
$arr[] = array('user_id' => 9, 'item_id' => 10, 'quant' => 12); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T16:53:28.467

```
 $array1 = array()
 $array2 = array(); 
```

如果你想将 array2 附加到 array1 只需使用

```
$array1[] = $array2; 
```

或使用 array_push

```
array_push($array1,$array2); 
```

见键盘[http://codepad.org/x0T5CeXf](http://codepad.org/x0T5CeXf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T16:54:11.893

你可以像这样简单地走，

```
$array = array();

$obj = array('user_id' => 99, 'item_id' => 99, 'quant' => 99);

$array[] = $obj; 
```

为了简化它，你可以创建一个这样的函数；

```
function addElement($element) {
     $array[] = $element;
}

addElement($obj); 
```

如果您要添加许多对象，这可以使事情变得更简单。

# php - 使用字段集图例创建表单会产生错误

> ID：15601215
> 
> 赞同：0
> 
> 时间：2013-03-24T16:51:00.947
> 
> 标签：php, forms, cakephp, input, cakephp-2.0

尝试使用“输入”生成表单时遇到一些问题

```
<?php 
  echo $this->Form->create('Post');
  echo $this->Form->inputs(array( 'legend' => 'Personal information', 'name', 'nickname', 'age', 'email')); 
  echo $this->Form->inputs(array( 'legend' => 'Employment information', 'company', 'started_work', 'description')); 
?> 
```

输出：警告 (2)：array_keys() 期望参数 1 为数组，给定为 null [CORE\Cake\View\Helper\FormHelper.php，第 848 行]

当我删除 $this->Form->create('Post'); 它成功生成，但它没有输出......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:15:53.617

您是否仔细检查过：
a) 您的 Post.php 模型存在且名称正确
b) 您的帖子表存在于您的数据库中
c) 您的应用程序连接到数据库正常吗？

当 FormHelper 调用“_introspectModel”方法并返回 null 时出现错误。_introspectModel 方法应该返回有关模型中字段的信息等等。但是，如果它无法从模型中检索到所需的信息，那么它将返回 null 而不是数组。这就是导致您遇到错误的原因。

仔细检查与您的 Post 模型相关的所有内容，如果您仍然无法修复错误，请更新您的问题并粘贴您的 Post 模型中的代码。

# ms-access - 比较两个 Access 数据库 VBA - 唯一连接

> ID：15601216
> 
> 赞同：0
> 
> 时间：2013-03-24T16:51:03.400
> 
> 标签：ms-access, vba

需要比较两个访问数据库。请指导 1.如何使用 VBA 连接多个数据库 2.如何动态选择连接哪个数据库 3.如何查找匹配是否唯一/如果不匹配则将结果插入不同的表 4.查询匹配

```
First Database (Actually set of database files of same type - date wise)
(Called Database 1 for easy understanding):
File Names are : 
2013-03-01.mdb
2013-03-02.mdb
2013-03-03.mdb
Each file will have over a million records - Hence speedy comparison required.

Fields
ID  RowInfo     Description     Value       Region  

Database 2 :
2013-03.mdb
Fields
Table 1 :   InvoiceNumber   Value CompanyName       Date    
Table 2 :   InvoiceNumber   Region
Table 3- Match Result:InvoiceNumber Value ID RowInfo Description CompanyName Date
Table 4- Match Result:InvoiceNumber Value ID RowInfo Description CompanyName Date 
```

对于 Database2 中的每个 Invoice，在数据库 1 中查找（在 Date 列中指定的文件中）。根据 Region 和 Value 在 Database1 中找到对应的匹配项。如果未提及区域，则仅基于值。如果未找到匹配项，请同时检查 Date+1 文件。但必须确保唯一匹配。没有两个 InvoiceNumber 应该与 Database1 中的相同 ID（在相同日期内）匹配。

对于每个 Invoice ，如果 DB1 中存在唯一匹配，则将结果插入 DB2 的表 3。如果有多个匹配项（单个 Invoice 的 DB1 中有多个 ID），则将结果插入表 4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:02:19.500

在 2013-03-01.mdb 文件中添加来自 2013-03-02.mdb 和 2013-03-03.mdb 数据库的链接表并使用 DLookup 搜索链接表不是更简单吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T21:42:19.880

> 1.  如何使用VBA连接多个数据库

文件 -> 获取外部数据 -> 链接表

> 1.  如何动态选择要连接的数据库

最好创建一个查询，将所有“数据库 1”数据库中的表联合起来。

> 1.  如何查找匹配是否唯一/如果不将结果插入不同的表

我想你说你的匹配标准是：

> 对于 Database2 中的每个 Invoice，在数据库 1 中查找（在 Date 列中指定的文件中）。根据 Region 和 Value 在 Database1 中找到对应的匹配项。如果未提及区域，则仅基于值。如果未找到匹配项，请同时检查 Date+1 文件。但必须确保唯一匹配。没有两个 InvoiceNumber 应该与 Database1 中的相同 ID（在相同日期内）匹配。

建议代码：

```
INSERT INTO Table3
WHERE DCOUNT("[InvoiceNumber]", "[big_union_query]", _
    "( [Region] = " & [Region] & " AND [Value] = " & [Value] & " ) OR " & _
    "( [Region] IS NULL AND [Value] = " & [Value] & " )" _
    ) = 1;

INSERT INTO Table4
WHERE DCOUNT("[InvoiceNumber]", "[big_union_query]", _
    "( [Region] = " & [Region] & " AND [Value] = " & [Value] & " ) OR " & _
    "( [Region] IS NULL AND [Value] = " & [Value] & " )" _
    ) = 1; 
```

> 1.  查询匹配

有几种方法。

一种是编写两个 INSERT 查询，一个用于填充表 3，一个用于填充表 4。

另一种方法是编写一个 VBA 脚本，该脚本从“数据库 2”中的发票执行大 SELECT，遍历它们，并逐个处理它们。“一对一”的方法会很慢。有很多开销。但它为您提供了控制权并允许您在运行时进行调试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T22:09:47.687

**re: 1.如何使用VBA连接多个数据库**

在 Access 中，您可以使用链接表 ( `External Data > Import & Link`) 来操作驻留在另一个数据库文件中的表。事实上，多用户 Access 数据库应始终使用“拆分”数据库格式，其中“后端”文件包含表，“前端”包含其他所有内容（查询、表单、报告等）。前端使用链接表来访问后端的“真实”表。（有关 VBA 如何适应这一点，请参阅下一点。）

**re: 2.如何动态选择连接哪个数据库**

手动方法涉及使用 Access 中的“链接表管理器”将现有表链接“指向”到不同的文件。如有必要，这也可以（毫不奇怪）使用 VBA 自动化，但使用链接表管理器是合乎逻辑的起点。

**回复：3.如何查找匹配是否唯一/如果不将结果插入不同的表**

如果两个“目标表”具有完全相同的结构，那么您应该考虑只维护一个这样的表，其中包含一个额外的列来区分它包含的记录。在这种情况下，额外的列将类似于 [SourceRowCount]，其中值 =1 对应于“表 3”，值 >1 对应于“表 4”。您仍然可以通过创建保存的查询将它们视为查询和报告中的单独“表”......

*   查询名称：[Invoice_unique_match]，条件：“WHERE [SourceRowCount]=1”

*   查询名称：[Invoice_non_unique_match]，条件：“WHERE [SourceRowCount]>1”

...并且仍然在同一个表中提供所有记录，以防有时您想要选择（或聚合或报告）记录，而不管它们的“唯一性”状态如何。

# meteor - Meteor 中的 JSON 端点

> ID：15601218
> 
> 赞同：7
> 
> 时间：2013-03-24T16:51:05.870
> 
> 标签：meteor

有没有办法使用流星在页面中返回直接文本？假设有人请求 domain.com/get/that-thing，而我只想返回字符串“52”，以便请求者知道 that-thing 有“52”的东西。据我了解，这在 Meteor 中是不可能的，因为标题等总是包含在内。

2个可行的技巧：写入一个名为“that-thing”的文件，以预期可能会调用“that-thing”。这在一般情况下不起作用。放置一个反向代理，将一些请求重定向到非流星后端。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-04-07T22:29:58.663

我今天必须解决这个问题并使用**Iron-Router**服务器端路由：[https ://github.com/EventedMind/iron-router/blob/master/DOCS.md#server-side-routing](https://github.com/EventedMind/iron-router/blob/master/DOCS.md#server-side-routing)

简单的例子：

```
Router.map(function () {
  this.route('api', {
    path: '/api',
    where: 'server',
    action: function () {
      var json = Collection.find().fetch(); // what ever data you want to return
      this.response.setHeader('Content-Type', 'application/json');
      this.response.end(JSON.stringify(json));
  }
});
}); 
```

这将返回一个有效的 JSON“页面”，然后您可以随意使用它。

感谢@Akshat 的回答：[Meteor Iron-Router without Layout Template or JSON View](https://stackoverflow.com/questions/22915857/meteor-iron-router-without-layout-template-or-json-view/22916375#22916375)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T17:41:15.847

路由器支持这个；查看服务器端路由：[https ://github.com/tmeasday/meteor-router](https://github.com/tmeasday/meteor-router)

# html - 如何垂直/向上过渡？

> ID：15601223
> 
> 赞同：0
> 
> 时间：2013-03-24T16:51:32.300
> 
> 标签：html, css

下面的代码有效，但是当鼠标悬停在选项卡上时，选项卡会垂直向下扩展。如何向上扩展？

```
ul.nav li a {
-webkit-transition: all 0.3s ease-out;
background: #cbcbcb ;
color: #174867;
padding: 7px 5px 7px 5px;
width: 50px;
height:100px;
display: block;
text-decoration: none;
-webkit-box-shadow: 2px 2px 4px #888;
}

ul.nav li a:hover {
background: #ebebeb ;
color: #67a5cd;
padding: 80px 5px 0px 5px;
} 
```

```
<div class="navbox">
<ul class="nav">
<li><a href="#">Bad</a></li>

</ul>
</div> 
```

[http://jsfiddle.net/jtwsJ/1/](http://jsfiddle.net/jtwsJ/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:09:08.357

1.  为你定义一个`margin-top`元素

2.  在`hover`通过您增加元素高度的值减少该边距

[**演示**](http://jsfiddle.net/jtwsJ/2/)

```
ul.nav li a {
    -webkit-transition: all 0.3s ease-out;
    background: #cbcbcb ;
    color: #174867;
    padding: 7px 5px 7px 5px;
    width: 50px;
    height:100px;
    margin-top: 200px;
    display: block;
    text-decoration: none;
    -webkit-box-shadow: 2px 2px 4px #888;
}

ul.nav li a:hover {
    margin-top: 100px;
    height: 200px;
    background: #ebebeb ;
    color: #67a5cd;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T17:06:41.113

想到的最简单的方法是相对定位元素，然后更改`top`属性以将其向上移动到您要添加到框中的数量。

1.  添加`position: relative`和`top: 0`到非悬停状态。

2.  添加`top: -66px`到悬停状态。

这会导致这样的[事情](http://jsfiddle.net/wnEYb/2/)。（注意我在顶部添加了额外的空间，所以你可以看到它向上移动而不是离开屏幕）。

# node.js - Handlebars helper 检索使用它的文件的基本名称

> ID：15601236
> 
> 赞同：2
> 
> 时间：2013-03-24T16:52:32.807
> 
> 标签：node.js, templates, handlebars.js, helper, helpers

我正在寻找一种方法来创建一个助手，它只呈现放置模板的文件的基本名称，并且不需要任何额外的参数，例如：`{{ basename }}`.

换句话说，如果我在两个部分中使用这个助手，比如`header.hbs`and `navbar.hbs`，我希望每个部分的名称都会在输出中呈现在它们被使用的任何地方。

我已经找了几个小时，找不到任何答案。任何方向或指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T00:45:42.330

**在不了解您的设置的情况下，这是一种方法。**

您需要在渲染函数中注册一个助手。然后您将调用渲染而不是编译。请注意，以下内容适用于后端，但您可以轻松地将其适应您的环境。

*Handlebars 对您的环境没有概念，因此您需要在某个地方全局设置它。*

```
exports.render = function (name, req, context) {
    if (isBrowser()) {
        throw new Error('Render cannot be called client-side.');
    }
    handlebars.registerHelper('basename', function() {
        var host = globalBasenameSetFromEnvironment;
        return  host;
    });
    if (!handlebars.templates[name]) {
        throw new Error('Template Not Found: ' + name);
    }
    return handlebars.templates[name](context);
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-11T01:17:20.480

这是渲染文件时需要在上下文中公开的内容。

例如，假设我们在文件路径“some/template.hbs”中有一个模板，它在

```
Basename is: "{{basename}}" 
```

我们可以这样渲染：

```
var fs = require('fs');
var hbs = require('handlebars');

var filepath = 'some/template.hbs';
var tmpl = fs.readFileSync(filepath, 'utf8');

var fn = hbs.compile(tmpl);
var str = fn({
  path: filepath,
  basename: path.basename(filepath)
});
console.log(str);
// Basename is: "template.hbs" 
```

# iphone - iOS：一个请求可以发送多少个推送通知？

> ID：15601243
> 
> 赞同：13
> 
> 时间：2013-03-24T16:53:10.683
> 
> 标签：iphone, ios, push-notification, apple-push-notifications

我正在使用 APNS python 包装库来发送推送通知。Apple 文档说消息的有效负载限制为 256 字节。但是由于一个请求可以发送多个 PN，我想知道在同一个请求中允许的消息数量是否有限制？

发送大量（1000+）推送通知的正确方法是什么？Apple 服务器是否限制连接/秒或 PN/秒以避免垃圾邮件？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-24T18:10:22.100

正如乔纳森在评论中所说，Apple 没有在 APNS 文档中指定限制。

由于您通过 TCP 连接将通知作为二进制数据发送，因此单个请求中发送的通知数量取决于 TCP 缓冲区的大小。

您不必为每个请求发送一个通知。在这种情况下，我不确定“单个请求”一词是否有意义（因为它们不会为每个发送的通知返回响应）。Apple 鼓励您尽可能长时间地保持连接打开。只要它是打开的，你可以写任意多的字节（属于多个推送通知）。

编辑 ：

Apple 最近编辑了他们[关于推送通知的技术说明](https://developer.apple.com/library/ios/#technotes/tn2265/_index.html)：

> 推送通知吞吐量和错误检查
> 
> 使用 APN 没有上限或批量大小限制。iOS 6.1 新闻稿称，APNs 自成立以来已发送超过 4 万亿条推送通知。在 WWDC 2012 上宣布，APN 每天发送 70 亿条通知。
> 
> 如果您看到吞吐量低于每秒 9,000 条通知，则您的服务器可能会受益于改进的错误处理逻辑。

# iphone - 关闭 MFMailComposeViewController 后 UITextField 无法显示键盘

> ID：15601245
> 
> 赞同：2
> 
> 时间：2013-03-24T16:53:23.210
> 
> 标签：iphone, keyboard, uitextfield, mfmailcomposeviewcontroller

我有一个问题，即在显示 UITextField 时键盘正确显示，但在 MFMailComposeViewController 出现并关闭后无法显示。光标出现在文本字段中，但没有键盘。

基本上，当用户点击“创建预设”按钮时，UIView 会添加到包含 UITextField 的当前视图中：

```
[self.view addSubview:createPresetView];
[presetNameField becomeFirstResponder]; 
```

这样可行。用户可以添加多个新的预设，每次添加视图时，文本字段成为第一响应者，并出现键盘。为了排除 presetNameField 不在视图层次结构中的问题，我还尝试在 1 秒延迟后执行 becomeFirstResponder - 结果相同。

接下来，可以使用标准的 MFMailComposeViewController 通过电子邮件共享预设：

```
MFMailComposeViewController *mailView = [[MFMailComposeViewController alloc] init];
[mailView setMailComposeDelegate:appController];
[mailView setSubject:@"New preset"];
[mailView setMessageBody:@"\n\nMail from app" isHTML:NO];
[appController presentModalViewController:mailView animated:YES]; 
```

据我所知，邮件撰写视图正确关闭：

```
[controller.view endEditing:YES]; // I added this as a test to ensure the mail view resigns first responder, no difference.
[self dismissModalViewControllerAnimated:YES];
[controller release];
controller = nil; 
```

但是现在 Create Preset 按钮添加了带有文本字段的视图，将文本字段设置为第一响应者，但没有出现任何键盘。

我已经检查了当我在文本字段上成为 FirstResponder 时发生了什么。文本字段本身是有效的，并向 canBecomeFirstResponder 返回 YES。

我发现的唯一潜在线索是 [presetNameField becomeFirstResponder]*总是*返回 NO（甚至在显示邮件视图之前）。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:01:55.850

MFMailComposeViewController 会像您期望的那样接受第一响应者。没有将 firstResponder 返回到您的文本字段的内置机制。但是你可以在`viewWillAppear:`.

你甚至可以这样做，只有当从呈现的视图控制器（如 MFMailCompose）返回时，如下所示：

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    // this is optional, if you care about context of presentation
    if (!self.isBeingPresented) {  // if we're not on our way up the stack of vcs
        [self.presetNameField becomeFirstResponder];
    }
} 
```

# python - 在 Windows 上使用 git-remote-hg

> ID：15601246
> 
> 赞同：6
> 
> 时间：2013-03-24T16:53:23.883
> 
> 标签：python, git, mercurial, hg-git

根据这个答案[https://stackoverflow.com/a/13354944/867294](https://stackoverflow.com/a/13354944/867294)应该很容易设置 git 以使用 mercurial “没有依赖关系或任何东西”。

这在 Windows 上似乎并不顺利。

我尝试遵循本指南

[https://github.com/msysgit/msysgit/wiki/Guide-to-git-remote-hg](https://github.com/msysgit/msysgit/wiki/Guide-to-git-remote-hg)

在修复 makeFile 以在我的系统上工作并构建 git 之后，我无法调用 git-remote-hg，因为它抱怨它找不到 python 解释器，所有这些都很难正确配置。所以我手动调用它

```
C:/Python27/python.exe git-remote-hg clone C:/TestMercurialRepo 
```

这现在给了我以下错误。

```
Traceback (most recent call last):
  File "git-remote-hg", line 99, in <module>
    sys.exit(HgRemoteHelper().main(sys.argv))
  File "d:\development\msysgit\git\git_remote_helpers\helper.py", line 196, in m
ain
    repo = self.get_repo(alias, url)
  File "git-remote-hg", line 33, in get_repo
    if repo.capable('branchmap'):
  File "c:\Python27\lib\site-packages\mercurial\repoview.py", line 205, in __get
attr__
    return getattr(self._unfilteredrepo, attr)
AttributeError: 'mqrepo' object has no attribute 'capable' 
```

我怎样才能解决这个问题 ？
如果任何地方都有预构建版本，那将是非常棒的，因为我觉得我正在做很多事情来让它工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-19T18:18:40.037

我今天让它在 Windows 上工作。基本上，由于 msysgit 发行版不支持 Python，我使用 Felipe 的 git-remote-hg.py 文件并使用 py2exe 将其打包为可执行文件。之后，我将所有的 py2exe 输出放到我的 Git 安装目录下的“libexec”文件夹中，它就可以工作了。

为了让它工作，你需要：

1.  蟒蛇 2.7
2.  [Mercurial Python 模块（此处](http://mercurial.selenic.com/downloads)为 Windows 安装程序）
3.  [py2exe（此处](http://sourceforge.net/projects/py2exe/files/py2exe/0.6.9/)为 Windows 安装程序）
4.  Felipe 的 git-remote-hg python 脚本（[在此处](https://github.com/felipec/git/blob/fc/master/git-remote-hg.py)保存原始文件）

创建一个名为 setup.py 的文件，其中包含：

```
from distutils.core import setup
import py2exe

setup(console=['git-remote-hg.py']) 
```

将文件保存到您的文件系统并运行以下命令：

```
python setup.py py2exe --include mercurial 
```

py2exe 将生成一个名为“dist”的文件夹，其中包含输出。将该文件夹的内容复制到 Git 主安装文件夹下的 libexec\git-core 文件夹中（例如，C:\Program Files(x86)\Git）。

现在，您应该可以使用 Git 客户端从 Mercurial 存储库进行克隆了。

（注意：我写这些步骤有点匆忙，所以如果我遗漏了任何内容，请回帖）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T17:24:39.577

我将不得不进一步调查，但这看起来`git-remote-hg`可能取决于安装的特定版本的 Mercurial。特别是`repo`对象支持该`capable`方法的对象。

这看起来像是 git-remote-hg 代码中的错误。任何足够新的 Mercurial 版本`repoview`也足够新，以至于每种 repo 对象都应该支持该`capable`方法。所以我猜测有问题的对象是由 git-remote-hg 创建的。

无论如何，很明显 git-remote-hg 使用 Mercurial Python 代码来完成它的工作。所以它们之间存在依赖关系。

[此外，您的回溯与https://github.com/felipec/git/blob/fc/remote/hg/contrib/remote-helpers/git-remote-hg](https://github.com/felipec/git/blob/fc/remote/hg/contrib/remote-helpers/git-remote-hg)的代码不匹配，因此很难调试您的设置.

# jquery - 无法调用 null 的方法“html”

> ID：15601257
> 
> 赞同：-2
> 
> 时间：2013-03-24T16:54:23.267
> 
> 标签：jquery, html

我遇到了 jQuery 的问题：

> 无法调用 null 的方法“html”

代码：

```
var currenthtml = $('div.welcome').html();
var newhtml = ' Mod Loaded';
var totalhtml = currenthtml+' '+newhtml;
$('div.welcome').html(totalhtml); 
```

我第一次尝试加载它，它失败了，然后如果我第二次加载它，它就可以工作。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-24T16:59:59.420

请检查，

您的 jquery 代码是否是在`$(document).ready(function()`JQuery 的函数中编写的。

您也可以尝试在 HTML 末尾编写您的 JQuery 代码。

正如我们看到您的问题一样，我们了解到第一次执行 JQuery 代码时，HTML DOM 没有得到该`'div.welcome'`部分。

希望这对您有所帮助。

谢谢。

# jquery - Facebook 如何在单击时切换其通知中心图标以显示带有通知的相应 DIV？

> ID：15601264
> 
> 赞同：0
> 
> 时间：2013-03-24T16:54:47.170
> 
> 标签：jquery, css, html

Facebook 如何在单击时切换其通知中心图标以显示带有通知的相应 DIV？

你们所有人都至少与 Facebook 网站左上角靠近徽标的 Facebook 通知中心进行了交互。他们是怎么锻炼的？

这是下面的图片将说明我正在谈论的 Facebook 通知中心 ![FB_NCToggle](../Images/f73759ef8b0fef9bb3cb286204991f07.png)

这是我用来锻炼的示例代码..

```
 <style>
        div, a {
            display: block;
        }

        body {
            width: 500px;
            margin: 100px auto;
        }

        a {
            border: 1px solid #ccc;  
            background: #ececec;  
            -webkit-border-radius: 3px;  
            padding: 5px 20px;  
            text-align: center;
            color: red;
            text-decoration: none;
        }

        #one {
            margin-bottom: 30px;
        }

        .dn_js {
            display: none;
        }

        .db_js {
            display: block;
        }

    </style>

    <div class="wrap">
        <div id="one">
            <a href="#" data-open="frdz" class="aTggl active">Friends</a>
            <div id="frdz" class="innerWrap dn_js">Mike</div>
        </div>
        <div id="two">
            <a href="#" data-open="Ntfn" class="aTggl">Noticiations</a>
            <div id="Ntfn" class="innerWrap dn_js">Peter</div>
        </div>
    </div> 
```

这是JS

```
 <script type="text/javascript">
        $(document).ready(function (e) {
            $(".aTggl").on("click", function(e) {
                e.preventDefault();
                var $this = $(this);

                $(".active").removeClass("active");

                $this.addClass("active").parent().siblings().children(".innerWrap").addClass("dn_js");

                var content_show = $(this).data("open");
                $("#"+content_show).addClass("db_js"); 
            });
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:18:47.713

在做了一些小的阅读之后，我尝试编写一些代码，它确实有效并且有点满足我的问题的全部内容。如果 ypu 家伙不介意，您可以查看我的代码并告诉我要改进、添加或删除的内容。

这是[jsFiddle 演示](http://jsfiddle.net/code_pippen/dyk3B/2/)。谢谢你。

这也是来自上述演示的代码。

```
<div id="nc_wrap">
    <div class="one nc_node"> 
      <a class="node_link" data-nc="frd_rqst">Friend Requests</a>
      <div id="frd_rqst" class="ncInnerWrap dn_js">F_R Notfz</div>
    </div>

    <div class="two nc_node">
      <a class="node_link" data-nc="msg_nc">Messages</a>
      <div id="msg_nc" class="ncInnerWrap dn_js">Msg Notfz</div>
    </div>
</div>

     #nc_wrap {
    display:block;
    width:100%;
    height:40px
}
       .one, .two {
    display:inline-block;
    width:40%;
    height:100%;
    float:left;
    background-color:#ddd
}
.one a, .two a {
    display:block;
    text-align:center;
    line-height:100%;
    height:100%;
    padding:0;
    margin:0;
    cursor:pointer;
}
.one {
    margin-right: 5%;
}
.activeNC {
    background-color: red;
}
.dn_js {
    display:none;
}
.db_js {
    display:block;
}

        $(document).ready(function () {
    $(".nc_node").on("click", ".node_link", function (event) {
        event.preventDefault();
        var $this = $(this);
        var nc_panel = $("#" + $this.data("nc"));

        $('.nc_node a').not($this).removeClass('activeNC').next(".ncInnerWrap").removeClass("db_js").addClass("dn_js");
        //$($this).stop(true, true).toggleClass("activeNC");
        $this.toggleClass("activeNC").next(".ncInnerWrap").toggleClass("db_js dn_js");
    });

    /*$(this).on("click", function(){
        $(".node_link").removeClass("activeNC");

        return false;
    });
    */
}); 
```

# azure - 将带有 CE 4 数据库的 MVC 4 项目部署到 Azure 后 -> 打开网站时出现错误“不允许访问数据库文件”

> ID：15601265
> 
> 赞同：0
> 
> 时间：2013-03-24T16:55:12.410
> 
> 标签：azure

我通过 Web-Role 将我的 ASP.NET MVC 4 Web 项目（SimpleMembershipProvider，EF CF）推送到 Windows Azure 到 Azure 云服务。在我的 Web 项目中，我使用位于“App_Data”下的 CE4 数据库 (.sdf) 数据库。

发布过程完成后，我在浏览器中打开我的网站，我收到以下错误：

> 不允许访问数据库文件。[ 1914，文件名 = E:\sitesroot\0\App_Data\xyzDb.sdf,SeCreateFile]
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Data.SqlServerCe.SqlCeException：不允许访问数据库文件。[1914，文件名 = E:\sitesroot\0\App_Data\LivescoreDb.sdf,SeCreateFile]

为了让站点运行，我通过远程桌面将我的远程桌面连接到我在 azure 上的虚拟系统，并且必须将“网络服务”帐户“Wite Access”提供给“E:\sitesroot\0\App_Data”文件夹。

我的 Web.Config 连接字符串：

> name="xyzConnection" connectionString="数据源=|DataDirectory|\xyzDb.sdf" providerName="System.Data.SqlServerCe.4.0"

之后我的网站运行！

我有可能改变这种不良行为。

例如，我试图在项目中更改我的数据库文件的位置，但后来我找不到将相对路径放置到连接字符串的方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:26:14.620

也许[这篇](http://www.bartlannoeye.be/blog/deploying-your-site-with-sql-ce-4.0-to-shared-webhosting-part-2)文章可以提供帮助（见底部）。

我认为，总的来说，在 Azure 中使用 SQL CE 数据库并不是一个可以很好地涵盖所有情况的方案，例如：

1.  如果您最终需要该 Web 角色的多个实例，他们*每个*人都将拥有自己的数据库副本，因此您的用户可能会根据他们点击的实例看到不一致的行为
2.  如果您将应用程序再次部署/刷新/重新启动到 Azure，则无法保证 App_Data 文件夹中的数据（或文件系统上的任何文件，实际上）将被保留（更有可能会被删除）所以如果您的用户已将数据输入数据库（通过您的应用程序），您更新了应用程序，他们回来后可能会发现所有工作都丢失了

因此，根据您的用例，您可能会发现自己承担了相当大的风险（除非您从未更新应用程序代码或需要为您的应用程序提供超过 1 个 Web 角色实例）。

“更好”（用引号括起来，因为它可以是一个相对术语或一个带有含义的术语）是使用[SQL Azure](http://www.windowsazure.com/en-us/home/features/data-management/)作为您的云数据库，如果您没有访问权限，您可以使用例如[SQL Express](http://www.microsoft.com/en-us/sqlserver/editions/2012-editions/express.aspx)在本地进行数据库开发到本地的任何其他 SQL Server 版本。这将克服多个 Web 角色的问题（因为您的数据库独立于它们中的任何一个），并且如果您需要重新部署（或类似）到您的 Web 角色，因为数据位于单独的数据存储中。

**警告：**我不确定你会发现从 SQL CE 到另一个 SQL 版本有多少工作，但是似乎有为此定义的途径，例如[这里](https://stackoverflow.com/questions/5716668/migrate-from-sqlce-4-to-sql-server-2008)、[这里](http://our.componentone.com/2010/08/20/upsizing-to-sql-server-from-sql-server-ce-4-beta/)、[这里](http://erikej.blogspot.com/2010/02/how-to-use-exportsqlce-to-migrate-from.html)和[这里](http://technet.microsoft.com/en-us/library/gg592944.aspx)

# asp.net-mvc - 根据下拉（MVC）加载 PartialView 的最佳方法

> ID：15601267
> 
> 赞同：0
> 
> 时间：2013-03-24T16:55:16.083
> 
> 标签：asp.net-mvc, jquery, asp.net-mvc-4, asp.net-mvc-partialview

让我解释一下场景是什么。在下图中，我有一个下拉列表和一个 div 框，下拉列表始终有两个选项，当更改此选项时，应该在 div 框中加载一个 PartialView。

当页面第一次加载时，应该显示下拉菜单的第一个选项。

![在此处输入图像描述](../Images/9d95592d048463732ee2d2916499ab10.png)

现在我将向您展示我的代码。

```
 [HttpGet]
    public ActionResult Monitor(short id, string viewBy = "class")
    {
        var model = db.Assignments.Find(id);

        List<SelectListItem> list = new List<SelectListItem>()
        {
            new SelectListItem() { Text = "Class", Value = "class" },
            new SelectListItem() { Text = "TEKS", Value = "teks" }
        };

        MonitorViewModel vm = new MonitorViewModel
        {
            AssignmentId = model.AssignmentId,
            AssignmentName = model.Name,
            ViewBy = list,
            SelectedView = viewBy
        };

        return View(vm);
    }

    public ActionResult MonitorContentView(short assignmentId, string viewBy)
    {
        if (viewBy.Equals("class"))
            return MonitorByClass(assignmentId);
        else
            return MonitorByTEKS(assignmentId);
    }

    public ActionResult MonitorByClass(short assignmentId) { ... }
    public ActionResult MonitorByTEKS(short assignmentId) { ... } 
```

我的剃刀观点

```
@model Contoso.MvcApplication.ViewModels.Stats.MonitorViewModel
@{
    ViewBag.Title = "Monitor";
}

<hgroup>
    <h2>Monitor</h2>
    <h3>@Model.AssignmentName</h3>
</hgroup>

<div>
    <span>View by: </span>@Html.DropDownListFor(model => Model.SelectedView, Model.ViewBy, new { id = "monitorViewByDropDown" })
</div>

@using (Html.BeginForm(new { id = "monitorForm" })) {
<div id="monitor-content-view">
    @Html.Action("MonitorByClass", new { assignmentId = @Model.AssignmentId })
</div>
} 
```

因此，当用户更改下拉值时，应该必须通过 AJAX（我还没有实现）调用`MonitorContentView`在其中传递值来获取部​​分视图。

我在做什么是一个很好的实现？还是有其他更好的方法？我想知道加载局部视图的方式是否很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:44:47.487

如果您在 中有一个复杂的视图`monitor-content-view`，则该视图由`MonitorByClass`或返回，`MonitorByTEKS`那么最好返回一个`ViewResult`。如果代表上述两种方法的每个视图都没有那么复杂，那么最好返回一个 json 结果并在客户端填充您的视图。如果两个视图共享公共字段，其中某些字段根据调用的方法隐藏/显示，那就更好了。

# java - 如何将 Long 值 < 10 的零前缀用于 DB Id？

> ID：15601270
> 
> 赞同：0
> 
> 时间：2013-03-24T16:55:24.430
> 
> 标签：java, identifier

有人可以就如何为 ID 小于 10 的输出给出零前缀给出一些建议吗？例如，我想在输出标签中显示一个单一的 ID 值，它是 DB 中的 Long 类型，就是这个值`4`，但在我想显示的某个标签上的输出中以前导零的形式，所以`04`我找到了一些案例，但它是关于`int primitive type`所以它有一些我无法解决的问题，

到目前为止我有这个代码：

```
public String getCode() {           
    PackageVersion packVer = BeanFactory.getHotelDAOService(PackageVersion.class).findOne(selectedDealerCodeId);
    if(packVer.getId() < 10){       
        String id = String.format("%0d", packVer.getId());
    }
    return id;
} 
```

以上这种方法不起作用，如果有人对此有更好和合适的解决方案，请让我在这里发帖，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T16:57:31.193

只需更改此行：

```
String id = String.format("%0d", packVer.getId()); 
```

至

```
String id = String.format("%02d", packVer.getId()); 
```

这将确保至少使用 2 个空格来打印数字，并且格式将用零填充它以实现这一点。
您也可以摆脱该`if`语句，我认为通过查看代码片段它不会做任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T17:00:22.877

您正在寻找的格式是，`%02d`但考虑到您正在做的事情的简单性，您最好使用以下代码段：

```
if (packver.getId() < 10) {
  return "0" + packver.getID();
}
return "" + packver.getID(); 
```

优化器将在幕后使用此代码做正确的事情，而`format()`可能会愚弄它。

您的代码中有一个严重的错误，该错误`id`未在您返回的范围内定义，因此该代码甚至无法编译。一般形式是这样的：

```
String id;
if (someCondition) {
  id = someValue;
} else {
  id = otherValue;
}

return id; 
```

在您的特定情况下， if 和 else 子句是相同的，因此您可以完全摆脱分支。

```
return String.format("%02d", packver.getID()); 
```

# php - json数据没有被拉进highcharts

> ID：15601273
> 
> 赞同：-1
> 
> 时间：2013-03-24T16:55:39.473
> 
> 标签：php, ajax, json, highcharts

我对 JSON 和 highchart 有疑问：我正在使用 ajax 从 php mysql 获取数据并获得响应，但问题是我无法将数据放入 highchart 系列中。任何人都可以帮助我解决这个问题，我对 highcharts 完全陌生。我的 moto 是根据从 mysql 表中获取的月份将数据月收入显示到图表中。

我从 chart_income.php 文件的 ajax 调用中得到低于 JSON 的信息。请参阅 PHP 代码。

**JSON：**

```
[{"month":"1","total":"4500"},{"month":"2","total":"20"},{"month":"3","total":"8300"}] 
```

这是jquery代码：

```
$(document).ready(function () {
    function requestData() {
        $.ajax({
            type: 'POST',
            url: 'ajax/chart_income.php',
            datatype: 'json',
            success: function (data) {
                alert(data);
                chart.series[0].setData(data.month);
            },
            cache: false
        });
    };

    var chart;
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'demo_chart',
            type: 'line',
            events: {
                load: requestData
            }
        },
        xAxis: {
                categories: []
            },
        yAxis: {
            title: {
                text: 'INR'
            }
        },
        series: [{
                //name: 'Random data',
                data: []
            }
        ]
    });

}); 
```

PHP代码：

```
<?php
$total_yearly_income = $db->query("SELECT MONTH(income_date) as month_updated, COUNT(income_date) as month_updates, SUM(income_amount) as month_total FROM mt_income WHERE income_date BETWEEN '2013-01-01 00:00:00' AND '2013-03-23 23:59:59' GROUP BY MONTH(income_date)");
$i=0;
if ($total_yearly_income) {
    if ($db->num_rows($total_yearly_income)) {
        while ($res = $db->fetch_array($total_yearly_income)) {
            $month = $res["month_updated"];
            $total = $res["month_total"];
            $array[] = array("month" =>$month,"total"=>$total);
        }
        echo json_encode($array);
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:31:45.043

Highcharts 期望数据指定 x,y 值。有两种方法可以做到这一点：

```
var data = [[1,4500],[2,20] 
```

或者

```
var data = [{x:1,y:4500},{x:2,y:20}] 
```

一旦你有了这种格式的数据（来自 php，或者通过将返回的数据处理成正确的格式），你调用：

```
chart.series[0].setData(data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T09:31:32.360

您的数字数据应该具有数字类型，而不是字符串。为此，您可以在 PHP 中设置它并在此图中生成 JSON：

[{“月”：1，“总计”：4500}]

或使用 parseFloat() 函数将字符串值替换为数字，然后在 setData() 中使用正确的 JSON；

我还建议建议使用有关预处理数据的文章：http: [//docs.highcharts.com/#preprocessing](http://docs.highcharts.com/#preprocessing)

# wpf - WPF DataGrid 绑定不起作用 caliburn micro

> ID：15601278
> 
> 赞同：2
> 
> 时间：2013-03-24T16:56:14.633
> 
> 标签：wpf, binding, datagrid, caliburn.micro, caliburn

我不明白为什么它不起作用..

这是我的课

```
public class Article : Screen
{
    public string Code { get; set; }
    public string Description{ get; set; }
    public decimal Cost{ get; set; }
    public decimal Price{ get; set; }
} 
```

这是 DataGrid 的 XAML 代码：

```
 <DataGrid Height="211" HorizontalAlignment="Left" 
        Margin="12,31,0,0" VerticalAlignment="Top" Width="521" 
        AutoGenerateColumns="False" ItemsSource="{Binding List}">
        <DataGrid.Columns>
            <DataGridTextColumn Binding="{Binding Path=Code}" Header="Code" />
            <DataGridTextColumn Binding="{Binding Path=Description}" Header="Description" />
            <DataGridTextColumn Binding="{Binding Path=Cost}" Header="Cost" />
            <DataGridTextColumn Binding="{Binding Path=Price}" Header="Price" />
        </DataGrid.Columns>
    </DataGrid>
    <Button Content="Button" Height="39" HorizontalAlignment="Left" 
            Margin="223,262,0,0" VerticalAlignment="Top" Width="110"
            x:Name="AllArticles"/> 
```

这是我的视图模型

```
[Export(typeof(IShell))]
public class ArtsViewModel : Screen
{
    public List<Article> List = new List<Article>();

    public void AllArticles()
    {
        Recover recover = new Recover();  //a model called Recover
        List = recover.Import().Articles; //return a List of Article
        NotifyOfPropertyChange("List");
    }    
} 
```

为什么数据网格不起作用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T17:27:02.957

*要在Caliburn.Micro*中启用绑定约定，通常`x:Name` 在 XAML 中使用该属性。如果您不是将`List`属性显式绑定到`ItemsSource`您的 ，而是`DataGrid`使用如下命名约定：

```
<DataGrid x:Name="List" Height="211" HorizontalAlignment="Left" 
    Margin="12,31,0,0" VerticalAlignment="Top" Width="521" 
    AutoGenerateColumns="False"> 
```

我相信后续绑定应该可以按需要工作。

哦，你还需要创建`List`一个属性而不是一个字段：

```
public List<Article> List { get; private set; } 
```

如果您想确保对 的修改`List`正确反映在您的数据网格中，您还应该使您的`List`属性`IObservableCollection`带有支持字段：

```
private IObservableCollection<Article> _list;
public IObservableCollection<Article> List { 
    get { return _list; }
    set {
        _list = value;
        NotifyOfPropertyChange(() => List);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T17:02:47.770

a) 您是否设置了 DataContext？

b）尝试“Binding =“{Binding Code}”（没有路径=），对我来说很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-24T17:02:34.677

对于我的 UWP 应用，我发现 x:Name 约定不起作用，我需要使用可绑定集合并直接绑定到 ItemsSource。然后我使用 Path=PropertyName 来指定列。

XAML：

```
<controls:DataGrid Grid.Row="3" Grid.Column="1" Grid.ColumnSpan="3"  ItemsSource="{Binding RawCSVData}" AutoGenerateColumns="false">
        <controls:DataGrid.Columns>
            <controls:DataGridTextColumn Header="Time" Binding="{Binding Path=Time}"/>
            <controls:DataGridTextColumn Header="Signal" Binding="{Binding Path=Signal}"/>
            <controls:DataGridTextColumn Header="Response" Binding="{Binding Path=Response}"/>

        </controls:DataGrid.Columns>
    </controls:DataGrid> 
```

CSVData.cs：

```
public class CSVData: Screen
{
    public double Time { get; set; }
    public double Signal { get; set; }
    public double Response { get; set; }
} 
```

ViewModel.cs 片段：

```
public BindableCollection<CSVData> RawCSVData { get; set; } 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-08-03T10:48:37.253

```
 private void _bookeditpage_ConfirmBook(Book _book, bool _isnewone) 
     {
        if (_isnewone)
        {
            Books.Add(_book);
        }
        else
        {
            //doesn't refresh datagrid
            SelectedBook = _book;
            //

            //works fine :)

            SelectedBook.BookName = _book.BookName;
            SelectedBook.IsPrenum=_book.IsPrenum;
            SelectedBook.Publisher=_book.Publisher;

           //
        }
    } 
```

# javascript - 使用 JavaScript 的滑动面板

> ID：15601279
> 
> 赞同：1
> 
> 时间：2013-03-24T16:56:16.790
> 
> 标签：javascript, slide

我发现的这个例子正是我想要的：http: [//jsfiddle.net/sg3s/RZpbK/](http://jsfiddle.net/sg3s/RZpbK/)感谢作者[sg3s](https://stackoverflow.com/users/893918/sg3s)[](http://jsfiddle.net/sg3s/RZpbK/%20)

```
jQuery(function($) {

    $('a.panel').click(function() {
        var $target = $($(this).attr('href')),
            $other = $target.siblings('.active'),
            animIn = function () {
                $target.addClass('active').show().css({
                    right: -($target.width())
                }).animate({
                    left: 0
                }, 500);
            };

        if (!$target.hasClass('active') && $other.length > 0) {
            $other.each(function(index, self) {
                var $this = $(this);
                $this.removeClass('active').animate({
                    left: -$this.width()
                }, 500, animIn);
            });
        } else if (!$target.hasClass('active')) {
            animIn();
        }
    });

}); 
```

但我遇到了一个小问题。我希望面板从右侧“打开”和“关闭”。我不熟悉javascript，我无法正确调整它。

谁能帮我这个 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:00:26.700

像这样？

[http://jsfiddle.net/RZpbK/845/](http://jsfiddle.net/RZpbK/845/)

我所做的只是将 animIn 修改为：

```
 animIn = function () {
            $target.addClass('active').show().css({
                left: +($target.width())
            }).animate({
                left: 0
            }, 500);
        }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T17:13:31.850

根据您之前的评论，这更符合您的要求吗？

[http://jsfiddle.net/RZpbK/847/](http://jsfiddle.net/RZpbK/847/)

只是将其更改为 animIn 立即执行，而不是在淡出完成后作为回调执行。

```
$this.removeClass('active').animate({
                left: -$this.width()
            }, 500);
            animIn(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T17:03:21.657

只需在两个地方都`left: -($target.width())`替换为`left: $target.width()`

# javascript - 使用href="../foo/"获取路径名（相对于主机）

> ID：15601281
> 
> 赞同：1
> 
> 时间：2013-03-24T16:56:18.947
> 
> 标签：javascript, jquery, href, relative-path

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T16:59:13.017

在 HTML5 浏览器中，您可以使用`this.pathname`：

```
$('a').each(function () {
    console.log(this.pathname);
}); 
```

[**小提琴**](http://jsfiddle.net/6BpWG/)

`pathname`是[Anchor 元素](https://developer.mozilla.org/en-US/docs/DOM/HTMLAnchorElement)的属性，而不是 jQuery 对象的属性。

编辑：锚的`pathname`属性在 HTML5 中已经标准化，但即使是 IE6 本身也支持它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T16:59:10.273

利用

`$(this).attr('href')`

该`.attr()`方法提取属性。[您可以在http://api.jquery.com/attr/](http://api.jquery.com/attr/)上查看文档

# c# - 获取“普通”.NET 类以在 Windows 8 上工作

> ID：15601282
> 
> 赞同：0
> 
> 时间：2013-03-24T16:56:22.243
> 
> 标签：c#, .net, windows, windows-8, windows-store-apps

我通常会编写很多 C#/.NET 应用程序，所以我想我会先尝试这种组合来编写 Windows Store 应用程序。然而，我最近遇到了很多麻烦，因为这些课程似乎已经养成了消失的习惯。我目前正在尝试编写一个简单的 FTP 应用程序，但是`FTPWebRequest`缺少该类，当我尝试为 Cmd 创建一个 Metro-Style 终端时，我注意到`Process`缺少该类。有没有办法让这些课程回来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:01:31.800

本质上，你不能。可能有一些相关的[WinRT 类](http://msdn.microsoft.com/en-in/library/windows/apps/br211377.aspx)可用，但 WinRT 应用程序是沙盒化的，不一定具有与普通桌面应用程序相同的灵活性。

有关更多详细信息，请参阅：http: [//blogs.msdn.com/b/b8/archive/2012/05/17/delivering-reliable-and-trustworthy-metro-style-apps.aspx](http://blogs.msdn.com/b/b8/archive/2012/05/17/delivering-reliable-and-trustworthy-metro-style-apps.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T17:02:31.773

不，你不能让他们回来，因为他们不在那里。创建 Windows 应用商店应用时，您的目标是不同版本的框架。另一个例子是，当您以 .NET 紧凑框架为目标时，与“普通”框架中相同的调用将不可用。

# java - Java 在定时器运行前终止

> ID：15601285
> 
> 赞同：1
> 
> 时间：2013-03-24T16:56:34.310
> 
> 标签：java, multithreading, swing, timer

我有以下代码

```
new Timer(300, this).start(); 
```

和这个

```
public void actionPerformed(ActionEvent e) {
   //do something
} 
```

在同一个类中实现`ActionListener`.

问题是程序在代码`actionPerformed`有机会运行之前终止。至少我认为这是正在发生的事情！

当它无关时，我如何告诉java继续运行？

谢谢！

**编辑**：这是一个 javax.swing.Timer

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T17:02:19.287

`Timer`uses daemon s -`Thread`它们不会阻止程序退出。

您使用的是，`javax.swing.Timer`但它看起来不像您在`Swing`环境中运行。

您需要使用 a`java.util.Timer`并确保使用`new Timer(false)`. 这将使用非 daemon 构建它，以`Thread`保持应用程序打开。

这意味着您需要调用`cancel()`才能`Timer`退出应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T17:01:55.517

只要所有非守护线程都完成，Java 程序就会终止。因此，请保持主线程或至少一个非守护线程运行。

# node.js - jsdom 和 $(document).ready

> ID：15601289
> 
> 赞同：3
> 
> 时间：2013-03-24T16:56:54.773
> 
> 标签：node.js, jsdom

我看起来当我通过 运行页面时`jsdom`，页面脚本中的`$(document).ready`块没有被执行。

这是html：

```
<html>
<body>
  If everything works, you should see a message here:  <h2 id="msg"></h2>

  <script>
    var checkpoint1 = true
    var checkpoint2 = false
    $(document).ready(function(){
      checkpoint2 = true
      $('#msg').html("It works, it works, it works!")
    })
  </script>
</body>
</html> 
```

和编码：

```
fs = require('fs');
htmlSource = fs.readFileSync("public/examples/test_js_dom.html", "utf8");

global.jsdom = require("jsdom");

jsdom.defaultDocumentFeatures = {
  FetchExternalResources   : ['script'],
  ProcessExternalResources : ['script'],
  MutationEvents           : '2.0',
  QuerySelector            : false
};

doc = jsdom.jsdom(htmlSource)
window = doc.createWindow()
jsdom.jQueryify(window, "http://code.jquery.com/jquery-1.8.3.min.js", function(){
  console.log(window.checkpoint1);
  console.log(window.checkpoint2);
  console.log(window.$().jquery)
  console.log("body:");
  console.log(window.$('body').html());
}); 
```

和输出：

```
Bee@cleanroom:~/projects/notjs$ test/jsdom.js
true
false   
1.8.3
body:

      If everything works, you should see a message here:  <h2 id="msg"></h2>

      <script>
        var checkpoint1 = true
        var checkpoint2 = false
        $(document).ready(function(){
          checkpoint2 = true
          $('#msg').html("It works, it works, it works!")
        })
      </script>
    <script class="jsdom" src="http://code.jquery.com/jquery-1.8.3.min.js"></script> 
```

我究竟做错了什么？

为满足荒谬的stackoverflow比率添加细节。

```
Bee@cleanroom:~/projects/notjs$ npm ls jsdom
notjs@1.0.0 /Users/Bee/projects/notjs
├─┬ jquery@1.8.3
│ └── jsdom@0.2.19
└── jsdom@0.3.3
Bee@cleanroom:~/projects/notjs$ node -v
v0.8.15
Bee@cleanroom:~/projects/notjs$ npm -v
1.1.66 
```

[解决方案]：

感谢 Dave 引导我找到正确的答案。

我认为完整的 jsdom 答案是这样的；不要使用 jsdom.jQuerify，添加脚本标签以在页面内脚本上方的页面中加载 jQuery（因为它需要在浏览器中加载页面）。

html:

```
 ...
    If everything works, you should see a message here:  <h2 id="msg"></h2>

    <script src="http://notjs.org/vendor/jquery-1.8.3.min.js"></script>
    <script>
      var checkpoint1 = true
      var checkpoint2 = false
      $(document).ready(function(){
        var checkpoint2 = true
    ... 
```

代码：

```
 ...
    doc = jsdom.jsdom(htmlSource)
    window = doc.createWindow()
    window.addEventListener('load',  function(){
      console.log(window.checkpoint1);
      console.log(window.checkpoint2);
      console.log(window.$().jquery)
      console.log("body:");
      console.log(window.$('body').html());
    });
    ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T17:06:54.697

第一次解析您的脚本时，jQuery 尚未加载，因此`$`未定义。这意味着`$(document).ready`未定义，因此未设置您的功能。您应该已经在控制台中看到了有关此问题的警告。解决方案是在创建 document.ready 函数之前确保 jQuery 已经加载。我不熟悉 jsdom，但是有两种方法可以解决这个问题：

1.  将生成的`<script>`标签移到您的内联脚本上方。jsdom 可能会也可能不会。
2.  将您的内联脚本移到 jsdom 回调中，在那里您拥有所有 console.log 函数。因为此时 jQuery 已被加载。编辑：实际上我认为 jsdom 就像一个预处理器？在这种情况下，这个不起作用，你需要做（1）。

# php - 在 OO PHP 中捕获异常

> ID：15601290
> 
> 赞同：0
> 
> 时间：2013-03-24T16:57:00.743
> 
> 标签：php, oop, class, error-handling

我有一堂课`Person`。

我想在我的脚本中添加错误处理，也就是说，用户输入了错误的电子邮件地址，脚本会告诉他们。通常根本不是问题，但现在我正在使用我不熟悉的领域的 OO 类。

所以。我想我想知道如何处理多个异常。还是我需要一次尝试**每一**行代码并抓住每一行？这似乎有点过分了。理想情况下，我想做以下事情：

```
try {
    $people[$new]->set_fullname($_POST['name']);
    $people[$new]->set_active(true);
    $people[$new]->set_add1(rEsc($_POST['add1']));
    $people[$new]->set_add2(rEsc($_POST['add2']));
    $people[$new]->set_add3(rEsc($_POST['add3']));
    $people[$new]->set_add4(rEsc($_POST['add4']));
    $people[$new]->set_postcode(rEsc($_POST['postcode']));
    $people[$new]->set_phone(rEsc($_POST['phone']));
    $people[$new]->set_email(rEsc($_POST['email']));
} catch {
      echo 'Caught exception: ',  $e->getMessage(), "\n";       
} 
```

但是在我的错误处理中，我怎样才能捕获多个错误？我想将所有错误消息推送到一个数组中，并在网页中很好地显示它们。据我在 php.net 上看到的，我似乎一次只能捕获一条错误消息。

我真的需要`try {} catch {}`每一行代码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T17:55:17.800

恕我直言，这不应该首先引发异常。只需遍历字段并将可能的错误添加到某个`$errors`数组。

用户搞砸字段并不是个例。我什至不认为用户对象应该能够验证电子邮件地址。这似乎是表单的责任。

我也想知道`rEsc`你正在使用什么功能。您不仅使用了一个`global`功能，将来几乎不可能将其换成其他功能（紧密耦合），而且名称选择不当。我也看不出你为什么要在那个地方逃避东西（我想这就是事情的作用）。仅在使用数据时转义/清理数据。而且我想知道您在转义数据的原因是什么，因为如果是用于数据库输入，则有更好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T17:00:23.500

```
try {
    $people[$new]->set_fullname($_POST['name']);
    $people[$new]->set_active(true);
    $people[$new]->set_add1(rEsc($_POST['add1']));
    $people[$new]->set_add2(rEsc($_POST['add2']));
    $people[$new]->set_add3(rEsc($_POST['add3']));
    $people[$new]->set_add4(rEsc($_POST['add4']));
    $people[$new]->set_postcode(rEsc($_POST['postcode']));
    $people[$new]->set_phone(rEsc($_POST['phone']));
    $people[$new]->set_email(rEsc($_POST['email']));
} catch (Exception $e) {
      echo 'Caught exception: ',  $e->getMessage(), "\n";       
} catch (EmailFormatException $em) {
      echo 'Caught exception: '. $e->getMessage();
} 
```

就这样继续

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T23:04:23.890

这是我将如何设计的：

*   在 Person 类上创建一个 validate() 方法，该方法验证每个属性并返回一个向用户解释错误的字符串数组。如果没有错误，让方法返回 null。
*   根本不要使用异常。他们很慢；它们使代码维护复杂化（并且您看到了迄今为​​止所采取的方法中的症状）
*   移除用于设置 Person 对象属性的自定义方法。PHP 不是 Java。直接设置属性。

把这一切放在一起：

```
class Person {

    public $name;
    public $address1;
    public $address2;

    public function validate() { }

} 
```

然后你的代码：

```
$obj = new Person();
$obj->name = "Bob";
$obj->address1 = "1 Elm St.";
$validationResult = $obj->validate();
if ( $validationResult != null) { // there were errors
    print_r($validationResult);
} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-24T17:33:56.323

您可以创建一个 foreach 语句，在循环内使用 try/catch 设置需要验证的数据，以便使用错误填充数组，如下所示：

```
$errors = [];
foreach (['field1', 'field2', ...] as $field) {
    try {
        $method = "set_{$field}";
        $people[$new]->$method(rEsc($_POST[$field]));
    } catch (Exception $e) {
        $errors[] = $e->getMessage();
    }
} 
```

# android - Intent.ACTION_VIEW - 多个文件

> ID：15601292
> 
> 赞同：8
> 
> 时间：2013-03-24T16:57:14.133
> 
> 标签：android, android-intent

我需要显示多个文件（图像、音乐或视频各 2 个或更多，但只有一种类型）。给定一系列缩略图或文件名，用户应该能够选择复选框并预览选择。如果用户选择多个图像，我希望能够只显示那些选择的图像。如果他选择多个 mp3 文件，我希望只能播放这些歌曲。

如果用户只选择一个文件，这很容易做到：

```
Intent i = new Intent(Intent.ACTION_VIEW);  

if (someType == IMAGE) {
   i.setDataAndType(Uri.fromFile(imageFile),"image/*");
}
else 
   if (sometype == VIDEO) {
      i.setDataAndType(Uri.fromFile(videoFile),"video/mp4");
   }
   else if (someType == MUSIC) {
       i.setDataAndType(Uri.fromFile(musicFile),"audio/mpeg");
   }  
startActivity(i); 
```

但是，如果用户选择一种类型中的两个或多个，我如何构建使用用户可能已安装的任何图像/音频/视频应用程序的意图？不想编写自定义播放器/查看器，因为我知道现有应用程序可以做到这一点。

我正在尝试模仿名为“AllShare Play”（[https://www.samsung.com/us/2012-allshare-play/](https://www.samsung.com/us/2012-allshare-play/)）的云应用程序的功能。这个应用程序完全符合我在我的应用程序中需要做的事情 - 允许用户“预览”多个文件，并仅使用标准的“画廊”应用程序用于图像、标准音乐应用程序用于歌曲等。在每种情况下，只有选定的文件使用每个 Android 设备加载的标准应用程序显示或播放，所以我知道无需编写查看器或播放器就可以做到。

任何人都知道如何通过 Intent.ACTION_VIEW 将多个文件发送到外部应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-06-19T05:47:22.353

没有将 multible 发送到 ACTION_VIEW 的 android 标准。

[但是ACTION_SEND_MULTIPLE](https://developer.android.com/reference/android/content/Intent#ACTION_SEND_MULTIPLE)有一个标准，其中文件通过 EXTRA_STREAM 传输。

有关工作的 sendmultible 示例，请参阅[Secure-Photo-Viewer](https://github.com/Somethingweirdhere/Secure-Photo-Viewer)：您从图库应用程序中选择多个图像并将它们发送到 Secure-Photo-Viewer。

如果您的应用程序是此意图的唯一发送者和接收者，您也可以使用与 ACTION_VIEW 相同的机制。

要了解有关意图通信的更多信息，您可以使用[意图拦截](https://github.com/k3b/intent-intercept/)应用程序，该应用程序允许发送和接收多种类型的意图

这是我用来发送多个图像的代码

```
 Intent sendIntent = new Intent();
        sendIntent.setType("image/*");
        if (selectionCount == 1) {
            Long imageId = mSelectedItems.first();
            sendIntent.setAction(Intent.ACTION_SEND);
            sendIntent.putExtra(EXTRA_STREAM, getUri(imageId));
        } else {
            sendIntent.setAction(Intent.ACTION_SEND_MULTIPLE);

            ArrayList<Uri> uris = new ArrayList<Uri>();

            for (Long mSelectedItem : mSelectedItems) {
                uris.add(getUri(mSelectedItem));
            }
            sendIntent.putParcelableArrayListExtra(EXTRA_STREAM, uris);
        }
        startActivity(sendIntent); 
```

# wordpress - Wordpress 自定义帖子模板页面/2 循环不起作用

> ID：15601297
> 
> 赞同：0
> 
> 时间：2013-03-24T16:57:32.783
> 
> 标签：wordpress, custom-post-type

我在自定义模板的侧边栏中有一个循环，并且在加载页面时它可以完美运行。该页面是 -

[http://ere.doneready.com/senior-consultants](http://ere.doneready.com/senior-consultants)

但是，当我单击“下一步”按钮即此页面时，循环（显示名称列表）不起作用 -

[http://ere.doneready.com/senior-consultants/page/2/](http://ere.doneready.com/senior-consultants/page/2/)

任何人都可以帮忙吗？以下是我使用的代码 -

```
 <div id="people-sidebar-content">

<div id="custom-search-form-for-people">    
    <form method="get" id="searchform" action="<?php echo esc_url( home_url( '/' ) ); ?>">
        <div id="custom-search-form-label"><label for="s" class="assistive-text"><?php _e( 'SEARCH' ); ?></label></div>
        <span id="search-box-box"><input class="search-box" type="text" name="s" id="s" /></span>
        <span id="search-box-button"><input type="image" name="submit" id="searchsubmit" SRC="http://www.doneready.com/ere/wp-content/themes/ere/images/search_button.png" HEIGHT="17" WIDTH="20" BORDER="0" ALT="Submit Form"></span>
    </form>
</div>

<div id="people-sidebar-content-usable" class="senior-consultants-active">

<div id="sidebar-for-people">
<a class="directors" href="http:/www.ere.doneready.com/directors/">Directors</a><br />
<a class="finance-admin" href="http:/www.ere.doneready.com/finance-and-admin/">Finance & Admin</a><br />
<a class="senior-consultants" href="http:/www.ere.doneready.com/senior-consultants/">Senior Consultants</a><br />
<div id="actual-people-list">
<?php $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
$args=array(
   'post_type'=>'staff',
   'posts_per_page' => 99,
   'paged'=>$paged,
   'staff_categories'=>'Senior Consultants'
);
$temp1 = $wp_query;
$wp_query= null;
$wp_query = new WP_Query($args);
if ( $wp_query->have_posts() ) : while ( $wp_query->have_posts() ) : $wp_query->the_post(); 
?>
<div class="actual-people-list-single">
<a href ="<?php the_permalink(); ?>">
<?php echo esc_html( get_post_meta( get_the_ID(), 'staff_short_name', true ) ); ?>
</a>
</div>
<?php
endwhile; endif;
/* PageNavi at Bottom */
$wp_query = null;
$wp_query = $temp1;
wp_reset_query(); 
?>
</div>
<a class="consultants" href="http:/www.ere.doneready.com/consultants/">Consultants</a><br />
<a class="technical-support" href="http:/www.ere.doneready.com/technical-support/">Technical Support</a>
</div>

</div><!--END PEOPLE-SIDEBAR-CONTENT-USABLE-->
</div><!--END PEOPLE-SIDEBAR-CONTENT-->

</div><!--END CONTENT CONTAINER-->
</div><!--END PAGE-WRAP--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:22:35.463

欢迎来到 StackOverflow，首先尝试至少半广泛地搜索档案，因为这个问题存在许多变体。这是我对一个非常相似的问题的回答的链接，它对我有用，它可能对你有用：

[在 WordPress 中制作单页博客](https://stackoverflow.com/questions/13146515/making-a-single-page-blog-in-wordpresss/15517916#15517916)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:25:18.173

解决了。我使用了一个新循环，代码现在看起来像这样 -

```
<div id="people-sidebar-content">

<div id="custom-search-form-for-people">    
    <form method="get" id="searchform" action="<?php echo esc_url( home_url( '/' ) ); ?>">
        <div id="custom-search-form-label"><label for="s" class="assistive-text"><?php _e( 'SEARCH' ); ?></label></div>
        <span id="search-box-box"><input class="search-box" type="text" name="s" id="s" /></span>
        <span id="search-box-button"><input type="image" name="submit" id="searchsubmit" SRC="http://www.doneready.com/ere/wp-content/themes/ere/images/search_button.png" HEIGHT="17" WIDTH="20" BORDER="0" ALT="Submit Form"></span>
    </form>
</div>

<div id="people-sidebar-content-usable" class="senior-consultants-active">

<div id="sidebar-for-people">
<a class="directors" href="http:/www.ere.com.my/directors/">Directors</a><br />
<a class="senior-consultants" href="http:/www.ere.com.my/senior-consultants/">Senior Consultants</a><br />
<div id="actual-people-list">
<?php
$args = array( 'post_type' => 'staff', 'staff_categories'=>'Senior Consultants', 'posts_per_page' => 50 );
$loop = new WP_Query( $args );
while ( $loop->have_posts() ) : $loop->the_post();
?>
<div class="actual-people-list-single">
<a href ="<?php the_permalink(); ?>">
<?php echo esc_html( get_post_meta( get_the_ID(), 'staff_short_name', true ) ); ?>
</a>
</div>
<?php
endwhile;
?>
<?php
wp_reset_query(); 
?>
</div>
<a class="consultants" href="http:/www.ere.com.my/consultants/">Consultants</a><br />
<a class="technical-support" href="http:/www.ere.com.my/technical-support/">Technical Support</a>
<a class="finance-admin" href="http:/www.ere.com.my/finance-and-admin/">Finance & Admin</a><br />
</div> 
```

# django - Django-tables2：更改列标题中显示的文本

> ID：15601300
> 
> 赞同：12
> 
> 时间：2013-03-24T16:57:49.057
> 
> 标签：django, django-tables2

我正在使用 MySQL 视图（Create View as Select ...），并成功地将视图连接到这样的模型：

```
#models.py
class Dashboard(models.Model):
    devenv = models.CharField(max_length=30, primary_key=True)
    numberofissues = models.BigIntegerField()
    class Meta:
        managed=False
        db_table = 'stability_dashboard' 
```

我还设法使用示例中的样板代码在表格中显示数据：

```
#tables.py
class DashboardTable(tables.Table):
    class Meta:
        model = Dashboard
        attrs = {'class': 'paleblue'}

#views.py
def dashboard(request):
    table = DashboardTable(Dashboard.objects.all())
    RequestConfig(request).configure(table)
    return render(request, 'uptime/dash.html', {'table': table}) 
```

我现在想将每列中显示的标题更改为更易于理解的内容，包括空格，例如，而不是 'devenv' => 'Development Environment'

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-27T09:12:42.900

只需在 tables.py 中添加要覆盖其名称的列。例如

```
#tables.py
将 django_tables2 导入为表
从模型导入仪表板

类仪表板表（表。表）：
  devenv = tables.Column(verbose_name= '开发环境' )

  元类：
    模型 = 仪表板
    attrs = {'class': '淡蓝色'}

```

另一个（可能更 DRY）解决方案是保留 tables.py 并在模型定义中添加 verbose_name ：

```
#models.py
类仪表板（模型。模型）：
    devenv = models.CharField(max_length=30, primary_key=True, verbose_name='开发环境')
    numberofissues = models.BigIntegerField(verbose_name='问题数量')
    元类：
        托管=假
        db_table = '稳定性_仪表板'

```

# google-chrome - Chrome-Ext：如何将参数值从 popup.js/background.js 传递到内容脚本？

> ID：15601302
> 
> 赞同：1
> 
> 时间：2013-03-24T16:58:05.533
> 
> 标签：google-chrome, google-chrome-extension

我发现有很多帖子教我们如何使用 sendRequest 和`OnRequest.addListener`函数将值从内容脚本传递到后台脚本。

但是，我想将用户输入参数传递给内容脚本。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T17:26:13.567

根据您注入内容脚本的方式，您可以采用不同的方式。首先，如果您使用匹配模式并通过清单注入，并且您需要基于某些事件的数据，`content script`那么您将需要执行以下操作：

**内容脚本**

```
chrome.extension.sendMessage({text:"getStuff"},function(reponse){
  //This is where the stuff you want from the background page will be
  if(reponse.stuff == "test")
    alert("Test received");
}); 
```

**背景.js**

```
chrome.extension.onMessage.addListener(function(message,sender,sendResponse){
  if(message.text == "getStuff")
    sendResponse({stuff:"test"}); //This would be where you send your stuff
}); 
```

如果您正在执行程序化注入并且您在注入时拥有数据，那么这样的事情会起作用。我假设您已经知道如何获取要注入的选项卡：

**背景.js**

```
//given tab is the tab ID you already have
chrome.tabs.executeScript(tab,{file:"contentScript.js"},function(){
  chrome.tabs.sendMessage(tab, {stuff:"test"});
}); 
```

**contentScript.js**

```
chrome.extension.onMessage.addListener(function(message,sender,sendResponse){
  //This is where the stuff you want from the background page will be
  if(message.stuff == "test")
    alert("Test received");
}); 
```

如果您需要将数据从弹出窗口发送到您已经注入的内容脚本，那么您可以执行以下操作：

**Popup.js**

```
chrome.tabs.query({active:true,currentWindow:true}, function(tab) {
  chrome.tabs.sendMessage(tab[0].id, {stuff:"test"});
}); 
```

**contentScript.js**

```
chrome.extension.onMessage.addListener(function(message,sender,sendResponse){
  //This is where the stuff you want from the background page will be
  if(message.stuff == "test")
    alert("Test received");
}); 
```

无论您如何注入脚本，只要您选择了所需的选项卡，这将起作用。

# node.js - 如何使用 node-orm2 编写 OR 条件？

> ID：15601304
> 
> 赞同：1
> 
> 时间：2013-03-24T16:58:07.597
> 
> 标签：node.js, orm

有可能做这样的事情吗？

```
User.find({'$or': [{user_id: 1}, {user_id: 2}]}, function(err, items){

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T20:25:37.680

是的，对于 node-orm2，您可以使用“或”找到。

例子 ：

```
User.find({
        user_id : [ "1", "2" ]
}) 
```

这将返回 used_id = 1 或 used_id = 2 的对象。这就像一个“IN”条件。

# html - HTML 日期输入：用箭头设置日期（而不是年份）

> ID：15601306
> 
> 赞同：1
> 
> 时间：2013-03-24T16:58:22.030
> 
> 标签：html, date

有没有办法设置日期 HTML5 输入以用箭头更改日期而不是年份？

# html - 如何处理 w3c 验证器报告并修复错误

> ID：15601307
> 
> 赞同：1
> 
> 时间：2013-03-24T16:58:29.563
> 
> 标签：html, w3c-validation

[由于我在www.mobo-fahrschule.ch](http://www.mobo-fahrschule.ch)的网页在我的 nexus7 上显示不正确（没有滚动条），我试图检查我的语法是否正确。

我曾经通过 w3c 验证器运行我的页面并得到一个可怕的报告（26 个错误）。不幸的是，我什至无法修复关于`<meta http-equiv="content-language" content="de">`. 每当我在网上搜索更正时，我都会得到答案，声明是正确的，但没有如何在根元素上指定，正如报告告诉我的那样。

到目前为止，我虽然是一个相当有能力的 Web 开发人员，但要么验证器告诉我胡说八道，要么我与新技术完全不同步。谁能指出我正确的来源，以便我能够“修复”这些错误？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T17:07:48.013

对于`<meta>`错误：语言定义现在设置在根元素上，如下所示：

```
<!DOCTYPE html>    
<html lang="de">
    <!-- content -->
<html> 
```

其中许多错误来自过时的使用，例如`align`, `width`, `cellpadding`, `cellspacing`(...) 属性。您使用的是 HTML5 文档类型，那么您不应该使用 xHTML 属性。验证器不会告诉你胡说八道，你不同步。

您应该查看[HTML5 规范](http://www.w3.org/html/wg/drafts/html/master/)和[HTML5 Boilerplate](http://html5boilerplate.com/)（一个前端模板，您可以在其中找到许多答案和有用的东西）。

要了解 HTML4 和 HTML5 之间的所有区别，请查看[此处](http://www.w3.org/TR/html5-diff/)。

# sorting - 根据相关性对向量进行排序

> ID：15601320
> 
> 赞同：1
> 
> 时间：2013-03-24T17:00:12.340
> 
> 标签：sorting, correlation

这个问题[https://math.stackexchange.com/questions/338646/sort-vectors-according-to-their-distance-between-them](https://math.stackexchange.com/questions/338646/sort-vectors-according-to-their-distance-between-them)是关于基于它们之间的距离对向量进行排序。如何根据向量之间的相关系数对向量进行排序。我想做的是根据向量在数据集中的“重要性”对向量进行排序。如果我们有 N 个向量，那么排序将是 V1,V2,...,Vn，其中 V1 和 Vn 的相关性低于其他向量。V1 和 V2 彼此之间最相关......等等。我正在考虑使用皮尔逊系数作为相关系数。这可能吗？或者您对这个问题有任何想法吗？是否有一个好的算法可以做到这一点，或者我们应该找到每对向量之间的相关系数，然后找到两个相关性较低的向量，然后对两个相关性较低的向量之间的所有向量进行排序。

谢谢阅读和回答:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:03:47.200

皮尔森会工作。通常的点积、Manhattan 等也会如此。

当然，您意识到这需要一个*matrix*。

向量 1 与自身完全相关，因此其值为 1.0。（想象一下在矩阵的对角线上。）然后下一个值 (1, 2) 显示向量 1 如何与向量 2 相关，依此类推到 (1, n)。

矩阵是对称的，因为 (i, j) = (j, i)。

对于`n`向量，`nxn`需要计算相关性。

# cocos2d-iphone - cocos2d通过触摸无间隙拖动精灵

> ID：15601326
> 
> 赞同：0
> 
> 时间：2013-03-24T17:00:53.967
> 
> 标签：cocos2d-iphone

我正在尝试通过触摸来拖动精灵。如果触摸在精灵之外，它不应该移动。

当用户触摸精灵并拖动它时，会在后面绘制一条路径。这条路径不应被破坏（如路径之间的间隙）。任何时候都应该有一条一致的路径。

我正在使用 mysprite.position 将精灵的新位置设置为与当前触摸位置相同。但是，如果用户触摸稍微偏离路径的点，则会出现间隙。我也尝试使用 CCMoveTo 动作，但这会延迟路径绘制，如果用户绘制速度非常快，那么精灵跟在后面看起来很糟糕。

```
-(void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
[mySprite runAction:[CCMoveTo actionWithDuration:0.0f position:touchLocation]];

-(void) ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
   if(CGRectContainsPoint([mySprite boundingBox], currentTouchPoint)){
        CGPoint translation = ccpSub(currentTouchPoint, lastTouchPoint);
        CGPoint newPos = ccpAdd(mySprite.position, translation);
        mySprite.position = newPos;
        [touchPoints addObject:NSStringFromCGPoint(currentTouchPoint)];
        [touchPoints addObject:NSStringFromCGPoint(lastTouchPoint)];
    }
} 
```

任何建议如何实现它？

# xml - 一次返回两个 XML 节点

> ID：15601327
> 
> 赞同：2
> 
> 时间：2013-03-24T17:01:03.030
> 
> 标签：xml, xpath

我正在尝试获取具有`qux`某个属性的兄弟姐妹的属性列表，在这种情况下`x`，在属性`foo`和它的兄弟姐妹`y`的属性中。`foo`

```
//node[@foo="x" and following-sibling::node[@foo="y"]]/@qux | //node[@foo="y" and preceding-sibling::node[@foo="x"]]/@qux 
```

这将创建一个列表，但与单独运行两个部分并将它们添加在一起相同，除了顺序。我需要一个`qux`彼此相邻的列表，所以每行两个`qux`元素的列表，显然是兄弟姐妹匹配的地方。

这可以在 xpath 中完成吗？如果可以，怎么做？如果没有，xquery 会完成这项工作吗？

编辑：示例文件和输出：

```
<database>
  <ds version="1">
    <node>
     <node foo="x" qux="hello"/>
     <node foo="y" qux="world"/>
    </node>
  </ds>
  <ds version="1">
    <node>
     <node>
       <node foo="x" qux="another"/>
       <node foo="y" qux="sentence"/>
       <node foo="y" qux="example"/>
       <node foo="z" qux="irrelevant"/>
     </node>
    </node>
  </ds>
  <ds version="1">
    <node>
      <node foo="y" qux="not"/>
      <node foo="z" qux="returned"/>
    </node>
  </ds>
</database> 
```

请注意，我感兴趣的节点的深度是未知的，因此（我认为）使用 //node 是必要的。

查询应返回：

```
hello world
another sentence
another example 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:20:54.317

使用单个 XPATH 语句获得结果并不容易——XPATH 真的是为 XML 导航而设计的。XSL 用于 XML 转换（这确实是您想要做的，即将属性列表 [hello][world] 转换为字符串“hello world”..）所以这里是获得所需结果所需的 XSL -

```
<?xml version="1.0" encoding="UTF-8"?>
<?altova_samplexml file:///C:/Users/Damien/Desktop/testXML.xml?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"     
xmlns:fo="http://www.w3.org/1999/XSL/Format"  
xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-
functions">
<xsl:template match="/">    
    <xsl:for-each select="//node[@foo='x' and following-
 sibling::node[@foo='y']]/@qux | //node[@foo='y' and preceding-
 sibling::node[@foo='x']]/@qux">
        <xsl:value-of select="."/>
        <xsl:text> </xsl:text>
    </xsl:for-each>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T16:00:21.653

根据 OP 对 XPath 2.0 解决方案的兴趣：

**这个 XPath 2.0 表达式**：

```
for $n in //node[@foo eq 'x' and following-sibling::*[1][self::node[@foo eq 'y']]]
 return
   ( ($n|$n/following-sibling::*[1])/@qux/string(), '&#xA;') 
```

**产生想要的结果**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T17:50:08.110

由于缺乏对要求的完全理解，但这样的事情不会起作用吗？

```
//@qux[../@foo = 'x' or ../@bar='y'] 
```

# php - date时差收入计算

> ID：15601328
> 
> 赞同：1
> 
> 时间：2013-03-24T17:01:09.017
> 
> 标签：php

我有以下代码，它显示了两个日期之间的差异。现在我想根据这个差额计算我的收入，基本费率为每小时 8 美元，但由于 dateTime 将差额返回给我的方式，我没有做到这一点。有什么想法吗？

```
$lastUpdate = new DateTime($lastUpdate['lastUpdate']);
$currentTime = new DateTime("2013-03-24 19:45:55");
$interval = $lastUpdate->diff($currentTime);
echo "difference " . $interval->y . " years, " . $interval->m." months, ".$interval->d." days " . $interval->h . " hours " . $interval->i . " minutes " . $interval->s . " seconds"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T17:16:26.660

从差异中获取总秒数，将它们除以 3600 和倍数。

尝试这样的事情：[http ://www.php.net/manual/en/dateinterval.format.php#102271](http://www.php.net/manual/en/dateinterval.format.php#102271)

只是这里的一部分代码给你一个想法：

```
 //...
  public function to_seconds() 
  { 
    return ($this->y * 365 * 24 * 60 * 60) + 
           ($this->m * 30 * 24 * 60 * 60) + 
           ($this->d * 24 * 60 * 60) + 
           ($this->h * 60 * 60) + 
           ($this->i * 60) + 
           $this->s; 
  } 
  //... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T17:18:10.807

解决方案是转换为秒并乘以`8/3600`

```
$lastUpdate  = new DateTime($lastUpdate['lastUpdate']);
$currentTime = new DateTime("2013-03-24 19:45:55");
$interval    = $lastUpdate->diff($currentTime);
//generate time string
$timeStr     = "";
if($interval->y >0) { $timeStr .= $interval->y ." year"   .($interval->y==1 ? " ": "s "); }     
if($interval->m >0) { $timeStr .= $interval->m ." month"  .($interval->m==1 ? " ": "s "); }      
if($interval->d >0) { $timeStr .= $interval->d ." day"    .($interval->d==1 ? " ": "s "); }
if($interval->h >0) { $timeStr .= $interval->h ." hour"   .($interval->h==1 ? " ": "s "); }
if($interval->i >0) { $timeStr .= $interval->i ." minute" .($interval->i==1 ? " ": "s "); }
if($interval->s >0) { $timeStr .= $interval->s ." second" .($interval->s==1 ? " ": "s "); }
//add up all seconds
$seconds = ($interval->y * 365* 24 * 60 * 60)
         + ($interval->m * 30 * 24 * 60 * 60)
         + ($interval->d * 24 * 60 * 60)
         + ($interval->h * 60 * 60)
         + ($interval->i * 60)
         +  $interval->s;
//multiply by your wage (in seconds)
$hourly_rate = 8.00;
$pay         = ($seconds * $hourly_rate)/3600;
$pay         = round($pay,2,PHP_ROUND_HALF_UP); //round to nearest cent
//print out the resulting time, rate & cost statement
printf("Total time of %sat hourly rate of $%.2f equates to $%.2f\n",$timeStr,$hourly_rate,$pay); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T17:18:38.383

为什么你不使用 strtotime 来达到你的目的

```
$lastUpdate = strtotime($lastUpdate['lastUpdate']);
$currentTime = strtotime("2013-03-24 19:45:55");
$interval = ($currentTime - $lastUpdate)/(3600);
$interval = round($interval,2);
$income   = $interval*8;
echo $interval."hours"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T17:20:03.377

如果您希望输出漂亮，则需要保留现有的内容并计算一些新变量。

```
$years = $interval->y * 365 / 24; // give it that it's not a leap year 
$months = $interval->m * 730; // approximation of how many hours are in a month
// ... so on
$grandSummation = $years + $months + $days + $hours + $seconds; 
$finalBaseApproximation = $grandSummation * 8; 
echo "Your income is $" . $finalBaseApproximation; 
```

# android - 在活动中添加指向网站的简单链接

> ID：15601334
> 
> 赞同：0
> 
> 时间：2013-03-24T17:01:46.643
> 
> 标签：android

我正在寻找一个简单的教程来添加活动链接。例如“忘记密码”，点击链接后，浏览器会打开指定的url。非常感谢 问候， 马可

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:05:00.517

这是一种方式：

[http://android-developers.blogspot.com/2008/03/linkify-your-text.html](http://android-developers.blogspot.com/2008/03/linkify-your-text.html)

您还可以使用 HTML to Text 函数：

[如何在 TextView 中显示 HTML？](https://stackoverflow.com/questions/2116162/how-to-display-html-in-textview)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T17:05:23.633

将 URL 更改为您想要的任何内容。

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setData(Uri.parse("http://www.mywebsite.com/"));
context.startActivity(intent); 
```

# jquery - ajaxForm 的问题

> ID：15601335
> 
> 赞同：0
> 
> 时间：2013-03-24T17:01:48.303
> 
> 标签：jquery, ajaxform

所以，这是我遇到的问题：我正在尝试使用 jQuery 和 ajaxForm（表单插件）提交表单。但是，当我单击提交按钮时，我没有得到任何响应（也没有错误）。表单上有必填字段，我目前期望的响应是一个警报，通知我缺少一个（或多个）必填字段，并详细说明哪些字段需要数据才能成功完成表单。

该应用程序是在 CodeIgniter 中构建的，这就是表单操作看起来如此的原因。

这是我的 jQuery 代码：

```
$(function () {

  $("#div_id").dialog({

    autoOpen: false,
    closeOnEscape: true,
    modal: true,
    width: 600,
    title: "A Title",
    buttons: {

      "SUBMIT": function() {

        $("#form_id").ajaxForm({

          dataType: "json",
          success: function(response) {

            response = $.parseJSON(response);
            alert(response['message']);
          }
        });
      },
      "CANCEL": function() {

        // Some clean up here
        $("#div_id").dialog("close");
      }
    },
    close: function() {

      // Some clean up here
      $("#div_id").dialog("close");
    }
  });
}); 
```

这是表单标签：

```
<form method="post" id="form_id" action="/controller/function"> 
```

另外，我在 ajaxForm 插件中正确链接。所以，这个问题并不存在。我仍在学习 jQuery，任何帮助表示赞赏。我也一直在浏览[http://www.malsup.com/jquery/form/](http://www.malsup.com/jquery/form/)和 jQuery 文档，但没有找到答案。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:19:46.053

我已经解决了这个问题。对于将来找到此问题和答案的任何人，这就是我必须做的：

首先，这是一个示例 onload 函数（假设您使用的是 jQuery）：

```
$(function () {
  $("#div_id").dialog({

  autoOpen: false,
  closeOnEscape: true,
  modal: true,
  width: 600,
  title: "Your Title",
  buttons: {

    "SUBMIT": function() { $("#form_id").submit() },
    "CANCEL": function() {

      // Other clean-up functions here
      $("#div_id").dialog("close");
    }
  },
  close: function() {

    // Other clean-up functions here
    $("#div_id").dialog("close");
  }
  });
}); 
```

确保您的 submit() 调用放在里面

```
function(){ } 
```

当我不这样做时，我的表单会在页面加载后一直尝试提交自己。当我将它们放在上面的代码行中时，它停止了。

* * *

## 接下来的一切都在上面的 onload 函数之后。

其次，设置您的 ajaxForm 选项变量：

```
var ajaxFormOptionsVariable = {

  beforeSubmit:  ajaxFormPreSubmitFunction,
  success:       ajaxFormPostSubmitFunction,
  type:          "post",
  dataType:      "json"
}; 
```

现在，简要介绍一下您的 ajaxForm 选项。应该很明显（但可能不是 - 这没关系）是你可以为你的变量命名任何你想要的。可能不太明显的是，对于页面上的每个表单对话框，您都需要一个单独的变量。小心你的命名！

命名为“beforeSubmit”函数和“success”函数的函数也可以任意命名。如果您有不同的表单需要不同的处理，那么您需要为每个表单定义不同的功能。再次，小心你的命名！

您的“beforeSubmit”功能是可选的。您也可以将“get”用于“type”，我知道“dataType”还有其他选项，但我不知道它们（目前不需要它们）。但是，如果您不希望您的数据作为 json 对象提交，那么请对插件进行一些研究以找到您的选择。

第三，实例化您的 ajaxForm 对象：

```
$('#form_id').ajaxForm(ajaxFormOptionsVariable); 
```

第四，定义你的“beforeSubmit”和“success”函数：

```
function ajaxFormPreSubmitFunction(response, statusText, xhr, $form) {

  // Whatever processing you want to do before the form is submitted - 
  // probably validation
}

function ajaxFormPostSubmitFunction(response, statusText, xhr, $form) {

  // Whatever processing you want to do after the form is submitted
  // This is where displaying a message to the user happens
} 
```

关于提供给回调函数的参数的几句话。首先，响应是您从服务器返回的任何内容。第二，你不需要

```
response = $.parseJSON(response); 
```

响应会自动解析。在我的脚本的提交后回调中，我实际上返回了一个数组，其中一个元素是真/假值，另一个是我想向用户显示的任何消息，如下所示：

```
if (response['result'] == true) {

  $("#success_dialog").html(response['message']);
  $("#success_dialog").dialog("open");
}
else {

  $("#error_dialog").html(response['message']);
  $("#error_dialog").dialog("open");
} 
```

所以，就是这样。为了完成这项工作，我的代码全错了。经过一番挫折，我让它工作了。我想回来分享它，以便可以将问题标记为已回答（以防止任何人在我解决此问题后浪费时间），并帮助将来可能偶然发现此消息的任何人。

# c - libmemcached - memcached_mget 似乎阻塞

> ID：15601340
> 
> 赞同：3
> 
> 时间：2013-03-24T17:02:07.193
> 
> 标签：c, asynchronous, nginx, memcached, libmemcached

我有一个 memcached 服务器。我使用 libmemcached C api 与之交互。我正在使用非阻塞模式和无回复模式（行为标志）。

如果有帮助，我还在 nginx C 模块中使用 libmemcached。

问题是 memcached_mget 似乎被阻塞了，即对于延迟约为 40 毫秒的服务器，memcached_mget 需要 40 毫秒才能完成。这并不完全是异步的。

这是我正在使用的代码：

```
const char* localKeys[2] = {"key1", "key2"};
size_t k_length[2] = {4, 4};

gettimeofday(&t1, NULL);
ngx_log_debug1(NGX_LOG_DEBUG_HTTP, log, 0, "no block: %d ", memcached_behavior_get(memc, MEMCACHED_BEHAVIOR_NO_BLOCK));
ngx_log_debug1(NGX_LOG_DEBUG_HTTP, log, 0, "no reply: %d ", memcached_behavior_get(memc, MEMCACHED_BEHAVIOR_NOREPLY));
retFt = memcached_mget(memc, localKeys, k_length, 2);
gettimeofday(&t2, NULL);

ngx_log_debug2(NGX_LOG_DEBUG_HTTP, log, 0, "memcached_mget duration (microseconds): %d, result : %d", t2.tv_usec - t1.tv_usec, retFt);

retFt = memcached_fetch_execute(memc, fp, &callback_struct, 1); 
```

我正在使用 ASCII 协议。也尝试使用二进制文件，但没有帮助。我也试过 memcached_mget_execute。我正在使用 tc 模拟延迟，如下所示：

```
tc qdisc add dev lo root netem delay 20ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-07T19:11:46.533

libmemcached 的 API 总是阻塞的。“非阻塞”模式只是在套接字上设置该标志。如果您使用该标志，libmemcached 会通过调用 poll() 进行自己的阻塞。

# c++ - If/else if not execution 即使它出现在 while 循环内满足条件

> ID：15601341
> 
> 赞同：0
> 
> 时间：2013-03-24T17:02:17.697
> 
> 标签：c++, while-loop, if-statement

和标题说的差不多。我到了这个彩票号码分配的最后一点，我不确定为什么在调试时没有显示第二组 if/else if 语句。我知道 if/else 语句是互斥的 - 但不应该一个 if 然后另一个 if 都测试吗？这是代码。

```
count=0;
while(count<5)
{
    if(lottery[count] == user[count])
    {
        lotto = lottery[count];
        cout<<"So, you matched numbers with "<<lotto <<".\n";
        tally++;
    }
        if(tally==5 && count == 5)
        {
            cout<<"Congratulations, you're the grand prize winner!";
        }
        else if(tally < 5 && count == 5)
        {
            cout<<"A total of "<<tally<<" of your lottery picks matched.";
        }
        else if(tally == 0 && count == 5)
        {
            cout<<"Caution. The following comment is an inside joke. Read at your own risk.";
            cout<<"Bet you feel like a total loser huh? Nothing matched.";
        }

    count++;
} 
```

我知道为了简单起见，我可能应该用 for 循环替换 while 循环，但我对 while 更满意。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T17:03:09.290

`count`执行块时永远*不会*出现。`5``if`

一旦它变成`5`，条件失败并且循环停止。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-24T17:03:27.730

`count`在您的条件需要的地方，永远不会等于`5`while 循环内部。`if-else`如果您在`count` *之前*增加，`if-else`则可能满足其中一个条件（取决于 的值`tally`）。

# c# - Backgroundworker c# 端口监听器

> ID：15601349
> 
> 赞同：0
> 
> 时间：2013-03-24T17:02:46.227
> 
> 标签：c#, port, backgroundworker

我正在尝试停止正在运行的 UDP 侦听器，`BackgroundWorker;`这是我的代码：

```
 private void bw_DoWork(object senderx, DoWorkEventArgs e)
    {
        BackgroundWorker worker = senderx as BackgroundWorker;

        while(true)
        {
            Debug.WriteLine("run");
            if ((worker.CancellationPending == true))
            {
                Debug.WriteLine("cancel pending");
                e.Cancel = true;
                newsock.Close();
                serverStatus = false;
                break;
            }
            else
            {
                try
                {
                    Debug.WriteLine("waiting for reponse..");
                    data = newsock.Receive(ref sender);
                    (STUCK HERE IF NO RESPONSE) 
```

所以基本上，如果我没有收到 UDP 响应，它会卡在接收循环中，并且`bw.CancelAsync()`不会检查调用。

我怎么解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:10:01.173

您正在混合异步调用和同步调用。您需要使接收异步或重载`CancelAsync()`函数以关闭套接字（这将使接收调用返回）。

如果您不能重载该`CancelAsync()`函数，那么您可以创建一个自定义取消函数来关闭套接字并调用`CancelAsync()`.

# c# - 在 XNA 4.0 游戏中实现水效果（飞溅）

> ID：15601354
> 
> 赞同：0
> 
> 时间：2013-03-24T17:02:55.510
> 
> 标签：c#, xna, 2d, xna-4.0, effects

*编辑：GameDev SE 上的问题链接：* [https ://gamedev.stackexchange.com/questions/51656/implementing-water-effects-splashes-into-xna-4-0-game](https://gamedev.stackexchange.com/questions/51656/implementing-water-effects-splashes-into-xna-4-0-game)

我正在创建一个 2D XNA 游戏，并遇到了一个关于向 XNA 游戏添加水效果（飞溅）的教程，但是在将它实施到我的游戏中后，我无法缩小它。目前它占据了整个屏幕。

水类看起来像这样

```
class Water
{
    struct WaterColumn
    {
        public float TargetHeight;
        public float Height;
        public float Speed;

        public void Update(float dampening, float tension)
        {
            float x = TargetHeight - Height;
            Speed += tension * x - Speed * dampening;
            Height += Speed;
        }
    }

    PrimitiveBatch pb;
    WaterColumn[] columns = new WaterColumn[201];
    static Random rand = new Random();

    public float Tension = 0.025f;
    public float Dampening = 0.025f;
    public float Spread = 0.25f;

    RenderTarget2D metaballTarget, particlesTarget;
    SpriteBatch spriteBatch;
    AlphaTestEffect alphaTest;
    Texture2D particleTexture;

    private float Scale { get { return spriteBatch.GraphicsDevice.Viewport.Width / (columns.Length - 1f); } }

    List<Particle> particles = new List<Particle>();
    class Particle
    {
        public Vector2 Position;
        public Vector2 Velocity;
        public float Orientation;

        public Particle(Vector2 position, Vector2 velocity, float orientation)
        {
            Position = position;
            Velocity = velocity;
            Orientation = orientation;
        }
    }

    public Water(GraphicsDevice device, Texture2D particleTexture)
    {
        pb = new PrimitiveBatch(device);
        this.particleTexture = particleTexture;
        spriteBatch = new SpriteBatch(device);
        metaballTarget = new RenderTarget2D(device, device.Viewport.Width, device.Viewport.Height);
        particlesTarget = new RenderTarget2D(device, device.Viewport.Width, device.Viewport.Height);
        alphaTest = new AlphaTestEffect(device);
        alphaTest.ReferenceAlpha = 175;

        var view = device.Viewport;
        alphaTest.Projection = Matrix.CreateTranslation(-0.5f, -0.5f, 0) *
            Matrix.CreateOrthographicOffCenter(0, view.Width, view.Height, 0, 0, 1);

        for (int i = 0; i < columns.Length; i++)
        {
            columns[i] = new WaterColumn()
            {
                Height = 240,
                TargetHeight = 240,
                Speed = 0
            };
        }
    }

    // Returns the height of the water at a given x coordinate.
    public float GetHeight(float x)
    {
        if (x < 0 || x > 800)
            return 240;

        return columns[(int)(x / Scale)].Height;
    }

    void UpdateParticle(Particle particle)
    {
        const float Gravity = 0.3f;
        particle.Velocity.Y += Gravity;
        particle.Position += particle.Velocity;
        particle.Orientation = GetAngle(particle.Velocity);
    }

    public void Splash(float xPosition, float speed)
    {
        int index = (int)MathHelper.Clamp(xPosition / Scale, 0, columns.Length - 1);
        for (int i = Math.Max(0, index - 0); i < Math.Min(columns.Length - 1, index + 1); i++)
            columns[index].Speed = speed;

        CreateSplashParticles(xPosition, speed);
    }

    private void CreateSplashParticles(float xPosition, float speed)
    {
        float y = GetHeight(xPosition);

        if (speed > 120)
        {
            for (int i = 0; i < speed / 8; i++)
            {
                Vector2 pos = new Vector2(xPosition, y) + GetRandomVector2(40);
                Vector2 vel = FromPolar(MathHelper.ToRadians(GetRandomFloat(-150, -30)), GetRandomFloat(0, 0.5f * (float)Math.Sqrt(speed)));
                CreateParticle(pos, vel);
            }
        }
    }

    private void CreateParticle(Vector2 pos, Vector2 velocity)
    {
        particles.Add(new Particle(pos, velocity, 0));
    }

    private Vector2 FromPolar(float angle, float magnitude)
    {
        return magnitude * new Vector2((float)Math.Cos(angle), (float)Math.Sin(angle));
    }

    private float GetRandomFloat(float min, float max)
    {
        return (float)rand.NextDouble() * (max - min) + min;
    }

    private Vector2 GetRandomVector2(float maxLength)
    {
        return FromPolar(GetRandomFloat(-MathHelper.Pi, MathHelper.Pi), GetRandomFloat(0, maxLength));
    }

    private float GetAngle(Vector2 vector)
    {
        return (float)Math.Atan2(vector.Y, vector.X);
    }

    public void Update()
    {
        for (int i = 0; i < columns.Length; i++)
            columns[i].Update(Dampening, Tension);

        float[] lDeltas = new float[columns.Length];
        float[] rDeltas = new float[columns.Length];

        // do some passes where columns pull on their neighbours
        for (int j = 0; j < 8; j++)
        {
            for (int i = 0; i < columns.Length; i++)
            {
                if (i > 0)
                {
                    lDeltas[i] = Spread * (columns[i].Height - columns[i - 1].Height);
                    columns[i - 1].Speed += lDeltas[i];
                }
                if (i < columns.Length - 1)
                {
                    rDeltas[i] = Spread * (columns[i].Height - columns[i + 1].Height);
                    columns[i + 1].Speed += rDeltas[i];
                }
            }

            for (int i = 0; i < columns.Length; i++)
            {
                if (i > 0)
                    columns[i - 1].Height += lDeltas[i];
                if (i < columns.Length - 1)
                    columns[i + 1].Height += rDeltas[i];
            }
        }

        foreach (var particle in particles)
            UpdateParticle(particle);

        particles = particles.Where(x => x.Position.X >= 0 && x.Position.X <= 800 && x.Position.Y - 5 <= GetHeight(x.Position.X)).ToList();
    }

    public void DrawToRenderTargets()
    {
        GraphicsDevice device = spriteBatch.GraphicsDevice;
        device.SetRenderTarget(metaballTarget);
        device.Clear(Color.Transparent);

        // draw particles to the metaball render target
        spriteBatch.Begin(0, BlendState.Additive);
        foreach (var particle in particles)
        {
            Vector2 origin = new Vector2(particleTexture.Width, particleTexture.Height) / 2f;
            spriteBatch.Draw(particleTexture, particle.Position, null, Color.White, particle.Orientation, origin, 2f, 0, 0);
        }
        spriteBatch.End();

        // draw a gradient above the water so the metaballs will fuse with the water's surface.
        pb.Begin(PrimitiveType.TriangleList);

        const float thickness = 20;
        float scale = Scale;
        for (int i = 1; i < columns.Length; i++)
        {
            Vector2 p1 = new Vector2((i - 1) * scale, columns[i - 1].Height);
            Vector2 p2 = new Vector2(i * scale, columns[i].Height);
            Vector2 p3 = new Vector2(p1.X, p1.Y - thickness);
            Vector2 p4 = new Vector2(p2.X, p2.Y - thickness);

            pb.AddVertex(p2, Color.White);
            pb.AddVertex(p1, Color.White);
            pb.AddVertex(p3, Color.Transparent);

            pb.AddVertex(p3, Color.Transparent);
            pb.AddVertex(p4, Color.Transparent);
            pb.AddVertex(p2, Color.White);
        }

        pb.End();

        // save the results in another render target (in particlesTarget)
        device.SetRenderTarget(particlesTarget);
        device.Clear(Color.Transparent);
        spriteBatch.Begin(0, null, null, null, null, alphaTest);
        spriteBatch.Draw(metaballTarget, Vector2.Zero, Color.White);
        spriteBatch.End();

        // switch back to drawing to the backbuffer.
        device.SetRenderTarget(null);
    }

    public void Draw()
    {
        Color lightBlue = new Color(0.2f, 0.5f, 1f);

        // draw the particles 3 times to create a bevelling effect
        spriteBatch.Begin();
        spriteBatch.Draw(particlesTarget, -Vector2.One, new Color(0.8f, 0.8f, 1f));
        spriteBatch.Draw(particlesTarget, Vector2.One, new Color(0f, 0f, 0.2f));
        spriteBatch.Draw(particlesTarget, Vector2.Zero, lightBlue);
        spriteBatch.End();

        // draw the waves
        pb.Begin(PrimitiveType.TriangleList);
        Color midnightBlue = new Color(0, 15, 40) * 0.9f;
        lightBlue *= 0.8f;

        float bottom = spriteBatch.GraphicsDevice.Viewport.Height;
        float scale = Scale;
        for (int i = 1; i < columns.Length; i++)
        {
            Vector2 p1 = new Vector2((i - 1) * scale, columns[i - 1].Height);
            Vector2 p2 = new Vector2(i * scale, columns[i].Height);
            Vector2 p3 = new Vector2(p2.X, bottom);
            Vector2 p4 = new Vector2(p1.X, bottom);

            pb.AddVertex(p1, lightBlue);
            pb.AddVertex(p2, lightBlue);
            pb.AddVertex(p3, midnightBlue);

            pb.AddVertex(p1, lightBlue);
            pb.AddVertex(p3, midnightBlue);
            pb.AddVertex(p4, midnightBlue);
        }

        pb.End();
    }
} 
```

然后在 Game1.cs 我有以下 LoadContent 方法

```
protected override void LoadContent()
    {
        // Create a new SpriteBatch, which can be used to draw textures.
        spriteBatch = new SpriteBatch(GraphicsDevice);
        font = Content.Load<SpriteFont>("Font");
        particleImage = Content.Load<Texture2D>("metaparticle");
        backgroundImage = Content.Load<Texture2D>("sky");
        rockImage = Content.Load<Texture2D>("rock");
        water = new Water(GraphicsDevice, particleImage);
        .
        .
        .
    } 
```

在我的更新方法中，我有以下内容（以及游戏的其他代码，我只是展示了水的部分）

```
protected override void Update(GameTime gameTime)
    {
        lastKeyState = keyState;
        keyState = Keyboard.GetState();
        lastMouseState = mouseState;
        mouseState = Mouse.GetState();

        water.Update();

        Vector2 mousePos = new Vector2(mouseState.X, mouseState.Y);
        // if the user clicked down, create a rock.
        if (lastMouseState.LeftButton == ButtonState.Released && mouseState.LeftButton == ButtonState.Pressed)
        {
            rock = new Rock
            {
                Position = mousePos,
                Velocity = (mousePos - new Vector2(lastMouseState.X, lastMouseState.Y)) / 5f
            };
        }

        // update the rock if it exists
        if (rock != null)
        {
            if (rock.Position.Y < 240 && rock.Position.Y + rock.Velocity.Y >= 240)
                water.Splash(rock.Position.X, rock.Velocity.Y * rock.Velocity.Y * 5);

            rock.Update(water);

            if (rock.Position.Y > GraphicsDevice.Viewport.Height + rockImage.Height)
                rock = null;
        } 
```

然后在 Draw 方法中我有以下内容（当活动枚举是 InGame 时）

```
case ActiveScreen.InGame:

                water.DrawToRenderTargets();
                level.Draw(gameTime, spriteBatch);
                DrawHud();
                spriteBatch.Begin();
                spriteBatch.Draw(backgroundImage, Vector2.Zero, Color.White);

                if (rock != null)
                    rock.Draw(spriteBatch, rockImage);
                spriteBatch.End();
                water.Draw();

                break; 
```

我的问题是这显然占据了整个屏幕。我知道为什么它占据了整个屏幕，但我不知道如何缩小它并将其设置在游戏中的固定位置。如果有人能通读这篇文章并指导我如何成功地缩小规模，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T00:14:35.520

请注意

`private float Scale { get { return spriteBatch.GraphicsDevice.Viewport.Width / (columns.Length - 1f); } }`

创建一个与整个屏幕对应的 Scale。在你的 Draw() 和 DrawToRenderTargets() 方法中

```
Vector2 p1 = new Vector2((i - 1) * scale, columns[i - 1].Height);
Vector2 p2 = new Vector2(i * scale, columns[i].Height); 
```

这意味着向量（水柱）的顶部将从屏幕的开头开始。这就是你需要做出改变的地方。

# r - R 中的错 误：当我尝试应用外部函数时：

> ID：15601359
> 
> 赞同：-4
> 
> 时间：2013-03-24T17:03:12.317
> 
> 标签：r, contour, outer-join

这是我的代码： Step1：定义一个我稍后将使用的反函数

```
inverse = function (f, lower = -100, upper = 100) {
  function (y) uniroot((function (x) f(x) - y), lower = lower, upper = upper)[1]
} 
```

第2步：这是我的函数及其逆：

```
F1<-function(x,m1,l,s1,s2){l*pnorm((x-m1)/s1)+(1-l)*pnorm((x+m1)/s2)}

F1_inverse = inverse(function(x) F1(x,1,0.1,2,1) , -100, 100)

F2<-function(x,m2,l,s1,s2){l*pnorm((x-m2)/s1)+(1-l)*pnorm((x+m2)/s2)}

F2_inverse = inverse(function(x) F1(x,1,0.1,2,1) , -100, 100) 
```

Step3：这是我结合上述功能的最终功能（我确定功能是正确的）：

```
copwnorm<-function(x,y,l,mu1,mu2,sd1,sd2) {
  (l*dnorm(((F1_inverse(pnorm(x))$root-mu1)/sd1))*
    dnorm(((F2_inverse(pnorm(y))$root-mu2)/sd1)))
} 
```

第 4步：我想为第 3 步中的函数创建等高线图`enter code here`：

```
x<-seq(-2,2,0.1)
y<-seq(-2,2,0.1)

z<-outer(x,y,copwnorm)

contour(x,y,z,xlab="x",ylab="y",nlevels=15) 
```

这是问题来了，当我尝试应用函数外部（x，y，copwnorm）时，它给了我一个错误：'zeroin'中的函数值无效。请问如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T21:07:28.523

我认为假设为每个必需`outer(x, y, FUN)`的对调用函数参数 ( ) 一次是一个非常普遍的误解。实际上，在创建所有可能的对之后，仅调用*一次*，将 的每个元素与 的每个元素组合在一起，其方式类似于函数。`FUN``x[i]``y[j]``outer``FUN`*`x``y``expand.grid`*

 *我将用一个例子来说明：考虑这个函数，它是产品的包装器，每次调用它时都会打印一条消息：

```
f <- function(x,y)
{
    cat("f called with arguments: x =", capture.output(dput(x)), "y =", capture.output(dput(y)), "\n")

    x*y
} 
```

这个函数是“自然”矢量化的，所以我们可以用矢量参数调用它：

```
> f(c(1,2), c(3,4))
f called with arguments: x = c(1, 2) y = c(3, 4) 
[1] 3 8 
```

使用`outer`：

```
> outer(c(1,2), c(3,4), f)
f called with arguments: x = c(1, 2, 1, 2) y = c(3, 3, 4, 4) 
     [,1] [,2]
[1,]    3    4
[2,]    6    8 
```

注意生成的组合。

如果我们不能保证函数可以处理向量参数，有一个简单的技巧可以确保函数在组合中的每一对只被调用一次`Vectorize`：这将创建另一个函数，该函数为参数中的每个元素调用一次原始函数：

```
> Vectorize(f)(c(1,2),c(3,4))
f called with arguments: x = 1 y = 3 
f called with arguments: x = 2 y = 4 
[1] 3 8 
```

所以我们可以用它做一个“安全” `outer`：

```
> outer(c(1,2), c(3,4), Vectorize(f))
f called with arguments: x = 1 y = 3 
f called with arguments: x = 2 y = 3 
f called with arguments: x = 1 y = 4 
f called with arguments: x = 2 y = 4 
     [,1] [,2]
[1,]    3    4
[2,]    6    8 
```

在这种情况下，结果是相同的，因为是以向`f`量化的方式编写的，即因为`"*"`是向量化的。但是如果你的函数没有考虑到这一点，直接使用它`outer`可能会失败或者（更糟）可能会给出错误的结果。*

# java - 检测 Activity 是否在前台并以编程方式激活按钮

> ID：15601365
> 
> 赞同：0
> 
> 时间：2013-03-24T17:03:36.197
> 
> 标签：java, android, parsing, android-activity, listener

我有一个在后台接收更新的 CustomReceiver。我正在尝试让应用程序检查主 Activity 是否在前面。如果是这样，则应以编程方式强制单击按钮。

我的应用程序是关于同步列表的，所以如果有人更新列表并且你在上面，我想强制本地刷新。

怎么做？

注意：如果用户正在处理列表，我**不想**做任何事情。

我尝试了类似以下的方法：

```
try {
    List_Items li = new List_Items();
    li.refresh.performClick();
    Log.d("never_got", "here");
    } catch (Exception e) {

    } 
```

因此，如果 Activity 不在前面，它将捕获异常，但不会按下按钮。有任何想法吗？

# c# - 如何在 C# 中显示一行随机数而不是一列？

> ID：15601368
> 
> 赞同：1
> 
> 时间：2013-03-24T17:03:48.843
> 
> 标签：c#, output

这是程序：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplicationlotto
{
    class Program
    {
        const int LIMIT = 7;

        static void Main(string[] args)
        {
            int[] lotto = new int[LIMIT];
            int lotDigits;

            Random rnd = new Random();

            foreach (int sub in lotto)
            {
                lotDigits = rnd.Next(0, 8);
                Console.WriteLine(lotDigits);

            }

        }
    }
} 
```

我希望它连续显示 7 个随机数字，形成一个 7 位“乐透号码”，所以它看起来像“5902228”而不是：

5

9

0

2

2

2

8

我尝试使用“0：D7”，它给了我一堆零，最后几位数字是其他数字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T17:04:42.287

使用`Console.Write`代替`Console.WriteLine`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T17:12:22.730

您应该`string`在之前创建您的预期`WriteLine`，下面是使用 LINQ`Enumerable.Range`并`string.Join`使用更少的代码行：

```
private static void Main(string[] args)
{
    var random = new Random();
    var numbers = Enumerable.Range(0, 7)
                            .Select(x => random.Next(0, 9));

    var output = string.Join(string.Empty, numbers);

    Console.WriteLine(output);
} 
```

或使用`Aggregate`：

```
var output = Enumerable.Range(0, 7)
                       .Aggregate(string.Empty, 
                               (str, i) => str += random.Next(0, 9)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T17:05:19.417

使用`Console.Write`代替 `Console.WriteLine`

`Console.WriteLine`- 在控制台窗口中添加一个额外的行，因此每个数字出现在不同的行中。

```
foreach (int sub in lotto)
{
    lotDigits = rnd.Next(0, 8);
    Console.Write(string.Format("{0}\t", lotDigits));
} 
```

### 您应该将数字分开，以免它们看起来像一个单独的数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T17:06:05.143

```
foreach (int sub in lotto)
{
        lotDigits = rnd.Next(0, 8);
        Console.Write(string.Format("{0} ", lotDigits));
} 
```

# python - Python正则表达式匹配带有空格的数字

> ID：15601369
> 
> 赞同：2
> 
> 时间：2013-03-24T17:03:50.167
> 
> 标签：python, regex

我是正则表达式新手，我需要一些帮助。我有代表表格的文本。我知道它将由 7 列组成：

```
| int | int mixed with -. | unicode string with everything | float | float | int | float | 
```

问题是浮点数是用千位之间的空格表示的（1234,43 => 1 234,43）。此外，字符串可以包含空格并以数字结尾。我尝试了这样的事情（对于每一行都带有新行字符）：

```
regex = re.compile(r"(\d+) ([\d.-]+) (.*) ([\d+ ]?\d+,\d+) ([\d+ ]?\d+,\d+) (\d+) ([\d+ ]?\d+,\d+)$", re.UNICODE)
w = regex.findall(line) 
```

不幸的是，它并不适用于所有情况。一些测试数据：

```
49 602 DSKOD SMCX 262,59 1 131,30 1 1 131,30
49 602 DSKOD SMCX 3 5 262,59 1 131,30 1 1 131,30
50 61-201 łóćźż 1 2 669,50 334,75 1 334,75
51 1-214 AÓŻĆÓDS" 70,35 350,18 3 105,53 
```

我得到的数千个案例是有问题的：

```
[]
[]
[(u'50', u'61-201', u'\u0142\xf3\u0107\u017a\u017c 1 2', u'669,50', u'334,75', u'1', u'334,75')]
[(u'51', u'1-214', u'A\xd3\u017b\u0106\xd3DS"', u'70,35', u'350,18', u'3', u'105,53')] 
```

在第三个示例中，我希望`2`字符串的末尾位于下一列。你知道有一些线索如何在 Python 2.7 上正确匹配吗？稍后我将与这个 unicode 战斗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T17:19:19.237

问题是`[\d+ ]?`。这匹配零个或一个数字加空格。另一个问题是使用空格作为列分隔符和在没有某种引用的字段内，但这适用于您的数据。我还更改了第二列，它有一个额外的`.`和第三列只抓取非空格字符：

```
#!python3
# coding: utf-8
import re

data = '''\
49 602 DSKOD SMCX 262,59 1 131,30 1 1 131,30
49 602 DSKOD SMCX 3 5 262,59 1 131,30 1 1 131,30
50 61-201 łóćźż 1 2 669,50 334,75 1 334,75
50 61-201 łóćźż 1 669,50 334,75 1 334,75
51 1-214 AÓŻĆÓDS" 70,35 350,18 3 105,53
'''.splitlines()

regex = re.compile(r"(\d+) ([\d-]+) (.*?) ((?:\d{1,3})?(?:\ \d{3})*,\d{2}) ((?:\d{1,3})?(?:\ \d{3})*,\d{2}) (\d+) ((?:\d{1,3})?(?:\ \d{3})*,\d{2})", re.UNICODE)
for line in data:
    print(regex.match(line).groups()) 
```

输出：

```
('49', '602', 'DSKOD SMCX', '262,59', '1 131,30', '1', '1 131,30')
('49', '602', 'DSKOD SMCX 3', '5 262,59', '1 131,30', '1', '1 131,30')
('50', '61-201', 'łóćźż 1', '2 669,50', '334,75', '1', '334,75')
('50', '61-201', 'łóćźż', '1 669,50', '334,75', '1', '334,75')
('51', '1-214', 'AÓŻĆÓDS"', '70,35', '350,18', '3', '105,53') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T17:21:33.970

我将把它分成几行：

```
r = re.compile(r"(\d+) 
                 ([\d.-]+) 
                 ([^ ]*) 
                 ((\d+ ?)+,\d+) 
                 ((\d+ ?)+,\d+) 
                 (\d+) 
                 ((\d+ ?)+,\d+)$", re.UNICODE) 
```

更改在 unicode 部分，不要那么贪婪并避免空格，然后在浮动部分。它将有浮点数没有逗号的问题。

在你的第一行：

```
In [21]: r.findall(l)
Out[21]: 
[('49',
  '602',
  'DSKODSMCX',
  '2 262,59',
  '262',
  '1 131,30',
  '131', #!
  '1',
  '1 131,30',
  '131')] #! 
```

标有 #! 的行 是额外的捕获，由我用来重复“\d\d\d”模式的嵌套组产生。

在另一个样本上：

```
In [23]: l2 = '49 602-1 DKSAJ 231 442 123,2 1 123 123,4 1 1 533 123,2'

In [24]: r.findall(l2)
Out[24]: 
[('49',
  '602-1',
  'DKSAJ',
  '231 442 123,2',
  '123',
  '1 123 123,4',
  '123',
  '1',
  '1 533 123,2',
  '123')] 
```

# python - Spyne 是否支持代理？

> ID：15601372
> 
> 赞同：0
> 
> 时间：2013-03-24T17:03:59.637
> 
> 标签：python, spyne

我想使用 Spyne 通过 SOAP 调用 ASP.Net Web 服务。Spyne 是否支持代理？

（我使用的是 Python 2.6）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:48:40.770

Spyne 作为 Soap 客户端的解决方案并不是那么好。我建议你看看[suds](https://fedorahosted.org/suds/)。

# php - 向 WooCommerce 布局添加其他内容？

> ID：15601373
> 
> 赞同：1
> 
> 时间：2013-03-24T17:04:06.127
> 
> 标签：php, woocommerce

我正在尝试向 WooCommerce 插件添加其他内容（例如横幅图像、附加循环），但在尝试输出此类内容时遇到了麻烦。

我正在尝试在s之后的模板区域中`<div>`使用`<img>`标签制作 WooCommerce 输出 s ，但没有任何结果。`wrapper-end.php``<div>`

我也尝试在`<?php woocommerce_content(); ?>`in之后放置额外的内容`woocommerce.php`，但之后它会为每一页复制自己。

我很困惑。可能吗？难道我做错了什么？

![Woocommerce 布局](../Images/79682d321ca1bfe233b545d6aad7f6ed.png)

我正在尝试做这样的事情。

有人可以分享他们的经验吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T20:18:06.160

如果您不使用 catch-all`woocommerce_content()`功能，而是使用 hooks，您可以通过将所有文件从 复制到`woocommerce/template`来单独自定义每个页面`yourtheme/woocommerce`。有关更多信息，请参阅[woocommerce 文档](http://docs.woothemes.com/document/third-party-custom-theme-compatibility/#usinghooks)。

模板还将向您展示可用于放置内容的其他挂钩和过滤器。

# java - 如何在java中读取用c#编写的二进制文件

> ID：15601374
> 
> 赞同：-1
> 
> 时间：2013-03-24T17:04:08.993
> 
> 标签：java, binaryfiles

我必须阅读用 c# 编写的二进制文件。我知道这种文件格式。我想知道是否可以。如果可能的话，我该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T17:13:19.973

您的问题非常模棱两可，但我假设您在问“我如何读取二进制文件？” 在这种情况下，答案是使用 a`FileInputStream`来读取所有字节。如果您知道文件路径，则可以使用以下代码从文件中读取所有字节：

```
byte[] readBytes(string filepath)
{
    File file = new File(filepath);
    FileInputStream stream = new FileInputStream(file);
    // create buffer of the correct size
    byte[] buffer = new byte[file.length()];
    // read in the data
    stream.read(buffer);
    return buffer;
} 
```

# asp.net - 是否可以在 oracle 11g express edition 中存储图像？

> ID：15601375
> 
> 赞同：1
> 
> 时间：2013-03-24T17:04:20.790
> 
> 标签：asp.net, oracle, oracle11g

是否有任何其他数据类型允许将图像存储到数据库中？

Oracle 11g 速成版中出现的数据类型列表如下图所示。

![在此处输入图像描述](../Images/8523226c0d55e9da51c52c30e95073db.png)

请帮忙！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T17:10:39.210

使用 BLOB。不是传统的 LONG RAW。

# c# - 如何解决子查询

> ID：15601380
> 
> 赞同：1
> 
> 时间：2013-03-24T17:04:47.057
> 
> 标签：c#, sql-server, database

我有这样的数据

```
Sr_No/ AccessionNo  / Roll_nO   / Price
---------------------------------------    
1  /     101     /      45   /     1000
2  /     102        /   46     /   2000
3   /    101       /    43    /    500 
```

我写了这个查询

```
select * 
from Circulation 
where MAX(sr_no) in (select * 
                     from circulation 
                     where accessionno = @accessionno) 
```

我想获取文本框给出加入号的值，它应该是最大值，`Sr_No`并且信息`Sr_NO`自动递增。

我的查询不起作用

我是一名学生，几个月前开始使用 c#

对不起，我的英语不好

我收到了这个错误

> 聚合可能不会出现在 WHERE
> 子句中，除非它位于 HAVING 子句或选择列表中包含的子查询中，并且被聚合的列是外部引用。
> 当不使用 EXISTS 引入子查询时，选择列表中只能指定一个表达式。

当我输入 101 作为登录号时，我想要那个。所以它会返回这个信息

```
3   /    101       /    43    /    500 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:10:17.847

你可能想要这样的东西：

```
SELECT * 
FROM Circulation 
WHERE sr_no = (SELECT MAX(sr_no)
               FROM circulation 
               WHERE accessionno = @accessionno) 
```

您想从中选择列等于表中所有值的最大值的`Circulation`行- 对吗？`sr_no``sr_no`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T17:07:14.160

`SQL Server`支持*公用表表达式*和*窗口函数*。`ROW_NUMBER()`将按`SR_NO`降序排列每个`AccessionNo`. 因此， 的值`1`是针对最高的`SR_NO`per给出的`AccessionNo`。

```
WITH records
AS
(
    SELECT  Sr_No, AccessionNo, Roll_nO, Price,
            ROW_NUMBER() OVER(PARTITION BY AccessionNo ORDER BY Sr_No DESC) rn
    FROM    Circulation 
)
SELECT  Sr_No, AccessionNo, Roll_nO, Price
FROM    records
WHERE   rn = 1 
```

但如果一个`AccessionNo`已经给出，一个简单的`TOP`就可以完成你的工作。

```
SELECT   TOP 1 * 
FROM     Circulation 
WHERE    accessionno = @accessionno
ORDER BY Sr_no DESC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T17:08:25.993

```
SELECT TOP 1 * 
FROM Circulation 
WHERE accessionno = @accessionno
ORDER BY Sr_no DESC 
```

此外，最好不要使用 SELECT * 而是使用列名。

# networking - 如果 TCP 是面向连接的，为什么数据包遵循不同的路径？

> ID：15601389
> 
> 赞同：30
> 
> 时间：2013-03-24T17:05:57.503
> 
> 标签：networking, tcp, ip, packets

据我所知，如果必须设计互联网应用程序，我们应该使用面向连接的服务或无连接服务，但不能同时使用两者。

Internet的面向连接的服务是TCP，无连接的服务是UDP，两者都驻留在Internet协议栈的传输层。

Internet 的唯一网络层是 IP，它是一种无连接服务。所以这意味着我们设计的任何应用程序最终都会使用 IP 来传输数据包。

面向连接的服务使用相同的路径来传输所有的数据包，而无连接的服务则不然。

因此我的问题是

如果设计了面向连接的应用程序，它应该使用相同的路径传输数据包。但是IP通过使用不同的路由打破了这个规则。那么从这个意义上说，TCP和IP是如何协同工作的呢？这完全让我感到困惑。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-24T17:40:35.937

我的朋友，您混淆了两个不同层的功能。

TCP是面向连接的，因为在两端之间建立了连接，它们可以协商不同的事情，例如拥塞控制机制等。
传输层协议的一般目的是提供进程到进程的传递，这意味着它对路由一无所知；您的数据包如何到达终端系统超出了他们的范围，他们只关心数据包是如何在两个终端进程之间传输的。

另一方面，IP 是 Internet 的网络层协议，它关注的是终端系统之间的数据传递，但它是无连接的，它不维护任何连接，因此每个数据包都独立于其他数据包进行处理。
离开您的系统后，每个路由器都会选择它认为适合每个数据包的路径，并且该路径可能会根据可用性/拥塞情况而改变。

这如何回答你的问题？
TCP 将确保数据包到达另一个进程，它不会关心它们是如何到达那里的。
另一方面，IP 根本不会关心它们是否到达另一端，它只会根据它认为最适合特定数据包的内容转发每个不同的数据包。

注意：
假设 IP 是面向连接的，这是否意味着数据包将遵循相同的路径？不一定，这取决于这一层的“连接”一词的含义，如果它意味着协商与安全相关的某些选项，例如，您可能仍然让所有数据包通过 Internet 上的不同路由转发。

**编辑：**
不过，不要让您感到困惑，网络层及以下的大多数面向连接的服务意味着连接在建立时也会建立所有“数据包”必须遵循的虚拟路径，以获取更多信息，请阅读：
[虚拟电路](http://en.wikipedia.org/wiki/Virtual_circuit)和[帧中继网络](http://en.wikipedia.org/wiki/Frame_Relay)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-11-13T12:41:45.207

这个链接很好地回答了你的问题[http://www.tcpipguide.com/free/t_ConnectionOrientedandConnectionlessProtocols-3.htm](http://www.tcpipguide.com/free/t_ConnectionOrientedandConnectionlessProtocols-3.htm)

> 有些人认为这（TCP）就像在更高网络层的电路交换的“模拟”；这可能是一个有点可疑的类比。尽管可以使用 TCP 连接在设备之间来回发送数据，但所有这些数据确实仍以数据包的形式发送；设备之间没有真正的电路。这意味着 TCP 必须处理分组交换通信的所有潜在缺陷，例如数据丢失或以错误顺序接收数据片段的可能性。

TCP 协议处理 IP 数据包无序到达或丢失的问题，让您感觉它们是通过单个 FIFO 通道到达的。是的，TCP 足够聪明地做到这一点，不需要专用的底层通道。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T17:23:51.763

TCP协议由发送/接收机器实现，一旦数据包离开发送机器，它们所经过的路由器对TCP一无所知，它们只是使用IP将数据包从源端获取到目的地。然后，目标机器的工作就是使用 TCP 确保所有数据包都到达并且它们以正确的顺序到达。互联网本身对 TCP 一无所知，它只是一个层（通常是软件），用于连接到无连接介质（互联网）。

因此，一旦数据包离开目的地，它可以沿着任何路径（大部分）只要到达目的地，而不管更高级别的协议（例如 TCP 或 UDP）。

我的意思是，它有点复杂，但据我所知，这是一般的想法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-07T10:51:42.780

正确参考我的短点，

**1）**面向连接的意思是==>保留资源（缓冲区，cpu，带宽等）..但是“在哪里？？”。（在哪里保留资源？？这是您困惑的原因，所以以下是答案。）。

**2）**面向传输层的连接意味着==>在两端进程/端口上保留资源。（由于TCP是传输层，那么它的职责是只保留两端进程的资源，而不管中间发生了什么小路。）

**3）**面向网络层的连接意味着==>在网络层保留资源。（现在，在数据包从源到目的地的整个过程中，网络层也存在于所有中间路由器（但不是传输层）。因此，如果网络层的任何协议都是面向连接的，它的职责是在所有中间路由器上预留资源，即所有数据包都必须遵循相同的中间路径，但 IP 连接较少，因此不会预留中间资源。数据包可能遵循不同的路径等）

**#结论：** ==> 中间路径由网络层决定，因此如果 IP 则路径可能不同。（IP 可能包含 TCP），但 TCP 负责两个 End 进程的资源预留，与数据包的中间路径无关。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-02T10:59:39.907

路由器仅在三层（物理层、数据链路层和网络层）上工作，因此路由器将仅根据信息做出决定。网络层（IP 协议），因此在路由器上没有关于其 TCP 或 UDP 的信息

# javascript - document.getElementsByTagName("svg_text") 不工作

> ID：15601392
> 
> 赞同：0
> 
> 时间：2013-03-24T17:06:07.640
> 
> 标签：javascript, svg

```
document.createSvg = function(tagName) {
   var svgNS = "http://www.w3.org/2000/svg";
   return this.createElementNS(svgNS, tagName);
};

var svgPie = document.createSvg("svg");
metric_name = document.createSvg("g");

text_metric = document.createSvg("text");
text_metric.appendChild(document.createTextNode(data[i]['name']));
text_metric.setAttribute("name",data[i]['name']);
text_metric.setAttribute("text-anchor","start");
text_metric.setAttribute("font-size","13");
text_metric.setAttribute("id", data[i]['id']);

resetList =  document.getElementsByTagName("text");

alert(resetList[0]); 

metric_name.appendChild(text_metric);
svgPie.appendChild(metric_name); 
```

以上警报给了我未定义的信息。能否给出解决的原因和解决方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T17:34:29.293

您在执行`document.getElementsByTagName('text')`时从未将 SVG 附加到 DOM，因此结果始终为空。

你可以做...

```
document.body.appendChild(svgPie);
resetList =  document.getElementsByTagName("text");
alert(resetList[0]); 
```

它会起作用。

# jquery - 获取 ul 的当前活动类

> ID：15601393
> 
> 赞同：0
> 
> 时间：2013-03-24T17:06:08.883
> 
> 标签：jquery, css, class, html-lists

假设您有以下内容。

```
 .pic {
      display: none;
    }

    .pic.show {
      display: block;
    }

    <ul>
       <li class='pic show'><img src="1.jpg"></li>
       <li class='pic'><img src="2.jpg"></li>
       <li class='pic'><img src="3.jpg"></li>
       <li class='pic'><img src="4.jpg"></li>
    </ul> 
```

我想编写一个简单的动态 jQuery，它会找到具有 class = 'pic show' 的 li。

所以我的问题是，你将如何找到`class = 'pic show'`应用了当前类的 li ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:07:19.410

用于`$("ul li.show")`查找具有类 show 的 li 元素，该类是 ul 的子元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T17:07:06.310

使用与 CSS 中相同的选择器：

```
$('.pic.show') 
```

如果要指定它必须是一个`li`元素：

```
$('li.pic.show') 
```

# javascript - 鼠标悬停时显示下拉菜单

> ID：15601394
> 
> 赞同：2
> 
> 时间：2013-03-24T17:06:14.800
> 
> 标签：javascript, jquery, html, css, web-applications

每当有人将鼠标悬停在图像上时，我都会尝试使用下拉菜单。

```
 <div>
        <img id="whoimg" onmouseover="forImg(this)" src="/static/images/whoisitfor.png" height="70" style="cursor:pointer;">
    </div>

    <div style="position: absolute; right:30px; top: 23px;">
        <span style="font-weight: bold;font-size:30px; color: #C4066B;">FOR</span>
    </div>

</div> 
```

我能够编写 onmouseover 函数。但是由于我是 Web 开发的新手，所以我不知道下一步该做什么。我有三个水平放置的图像，包括上面的一个。

```
function forImg()
{
alert("FOR");
} 
```

我已经尝试过 javascript，但我无处可去。不知道该怎么办...请帮助我

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T17:14:38.277

您想在图像鼠标悬停时显示下拉菜单；

*让这成为你的菜单：*

```
 <div id="nav_menu">
            <ul>
                <li id="l1">AAAAA</li>
                <li>BBBBB</li>
                <li>CCCCC</li>
                <li>DDDDD</li>
            </ul>
   </div> 
```

在您的图像上绑定事件，如下所示：

```
$('#whoimg').mouseover( function(){
    $('#nav_menu').slideDown();
}); 
```

## [演示小提琴](http://jsfiddle.net/mohammadAdil/7WLkZ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T17:18:30.417

我强烈建议为此使用 CSS。如果您进行一些谷歌搜索，有很多可用的教程......或者您可以采取简单的方法并使用这样的网站： http: [//cssmenumaker.com/css-drop-down-menu](http://cssmenumaker.com/css-drop-down-menu)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T17:18:37.153

在这里查看它是如何工作的...我相信这会对您有所帮助...不要忘记评价。

祝你好运！

* * *

```
<!DOCTYPE html>
<html>
<head>
<script>
function bigImg(x)
{
x.style.height="64px";
x.style.width="64px";
}

function normalImg(x)
{
x.style.height="32px";
x.style.width="32px";
}
</script>
</head>
<body>

<img onmouseover="bigImg(this)" onmouseout="normalImg(this)" border="0" src="smiley.gif" alt="Smiley" width="32" height="32">

<p>The function bigImg() is triggered when the user moves the mouse pointer over the image.</p>
<p>The function normalImg() is triggered when the mouse pointer is moved out of the image.</p>

</body>
</html> 
```

# javascript - 在页面上将两个元素 - 图表 - 放在彼此下方

> ID：15601395
> 
> 赞同：1
> 
> 时间：2013-03-24T17:06:29.270
> 
> 标签：javascript, css, svg, d3.js

我有一段绘制图表的 D3.js 代码，它的宽度、高度等设置如下：

```
<script>

    var margin = {top: 20, right: 20, bottom: 30, left: 40},
            width = 960 - margin.left - margin.right,
            height = 500 - margin.top - margin.bottom; 
```

它在页面上画得很好。 **确切地说：来自此来源的脚本标签：** [https ://github.com/mhemesath/r2d3/blob/master/examples/scatterplot/scatterplot.html](https://github.com/mhemesath/r2d3/blob/master/examples/scatterplot/scatterplot.html)

然后我复制粘贴另一段绘制条形图的 D3.js 代码，其宽度、高度等设置如下：

```
<script type="text/javascript">

    //Width and height
    var w = 500;
    var h = 100;
    var barPadding = 1; 
```

**确切地说：此源代码中的脚本标签：http:** [//alignedleft.com/content/3.tutorials/10.d3/130.making-a-bar-chart/demo/10.html](http://alignedleft.com/content/3.tutorials/10.d3/130.making-a-bar-chart/demo/10.html)

我怎么能告诉他们不要相互重叠，我只是想让他们第一个显示，然后在它的底部显示下一个......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T17:33:05.160

一种方法是创建两个单独的 svg 元素并将它们都附加到正文中。请参阅[此要点以进行演示](http://bl.ocks.org/AndrewStaroscik/5232739)。请注意，每个 svg var 都有自己的名称（svgOne 和 svgTwo）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T17:56:38.140

您的问题有两种选择：

1.  不同的 SVG 元素：正如我上面的朋友所指出的，您可以放入两个具有不同类名的不同 svg 标签。

    ```
    var svg1 = d3.select(body)
                  .append(svg)
                  .attr('class', 'chart1')

    var svg2 = d3.select(body)
              .append(svg)
              .attr('class', 'chart2') 
    ```

然后你可以只使用变量

```
 svg1.append('rect').data().enter()
          svg2.append('rect').data().enter() 
```

2.  使用分组 (G) 标签：这允许您对 svg 中的各种图表但不同的 G 标签进行分组。您可以将它们视为 Html 的 Div 标签。

您可以看到 d3 的以下帖子： [redraw function with g containers](https://stackoverflow.com/questions/9804295/redraw-function-with-g-containers)

# java - 无法在客户端和服务器中为 arp 访问 java 中的 Socket 类

> ID：15601396
> 
> 赞同：0
> 
> 时间：2013-03-24T17:06:35.137
> 
> 标签：java, sockets

我正在为使用 Socket 的 java 中的 arp 开发客户端和服务器程序。当我编译它时，我得到这样的错误代码看起来像这样。Stack Overflow 向我询问有关我的代码的更多详细信息，但我没有有关此代码的更多详细信息。

```
import java.io.*;
import java.net.*;
import java.net.Socket.*;
class arpserver
{
    public static void main(String args[])throws IOException
    {
        try
        {
            ServerSocket soc = new ServerSocket(2500);
            System.out.println("Server started");
            Socket client = null;
            client = soc.accept();
            String str;
            PrintStream ps = new PrintStream(client.getOutputStream());
            BufferedReader br = new BufferedReader(new InputStreamReader(client.getInputStream()));
            Runtime r = Runtime.getRuntime();
            Process p = r.exec("ifconfig eth0");
            BufferedReader pin=new BufferedReader(new InputStreamReader(p.getInputStream()));
            String haddr = "";
            String ipaddr = br.readLine();
            int flag = 0;
            while((str = pin.readLine())!=null)
            {
                System.out.println(str);
                if((str.indexOf("HWaddr")) != -1)
                {
                    int tlen = str.length();
                    int hlen = tlen - 19;
                    haddr = str.substring(hlen,tlen);
                }
                else if ((str.indexOf(ipaddr)) != -1)
                {
                    flag = 1;
                }
            }
            if (flag == 1)
                ps.println(haddr);
            ps.close();
            br.close();
            pin.close();
            client.close();
            soc.close();
        }
        catch(IOException io)
        {
            System.err.println("Exception : " + io.toString());
        }
    }
} 
```

在编译期间我收到此错误

```
S:\>javac arpserver.java
arpserver.java:12: cannot access Socket
bad class file: .\Socket.java
file does not contain class Socket
Please remove or make sure it appears in the correct subdirectory of the classpa
th.
Socket client = null;
^
1 error 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T19:17:24.127

看起来您可能有一个本地`Socket.java`文件并且该文件无法编译。此自定义`Socket`类与您的类位于同一包（根？）中，因此在您尝试访问`arpserver`的类之前选择它。`java.net.Socket`

作为一个独立的类，你的`arpserver`类应该编译——至少，一个原始的“复制粘贴”对我来说编译得很好。

# jquery - 内部 jQuery 在 chrome、IE、FF 中不起作用

> ID：15601398
> 
> 赞同：0
> 
> 时间：2013-03-24T17:06:49.590
> 
> 标签：jquery, internet-explorer, google-chrome, firefox

当我从 Aptana Studio 3 打开预览编辑器时，下面的 jQuery 代码确实有效。不幸的是，当我使用 Chrome、IE 或 FF 打开我的网页时，jQuery 不起作用

```
<script>
        $(document).ready(function() {
            $('input[type="text"],input[type="password"],select,:submit').addClass("idleField");  
            $('input[type="text"],input[type="password"],select').focus(function() {  
                $(this).removeClass("idleField").addClass("focusField");  
                if (this.value == this.defaultValue){  
                    this.value = '';  
                }
                if(this.value != this.defaultValue){  
                    this.select();  
                }  
            });

            $('input[type="text"],input[type="password"],select').blur(function() {  
                $(this).removeClass("focusField").addClass("idleField");  
                if ($.trim(this.value == '')){
                    this.value = (this.defaultValue ? this.defaultValue : this.value);  
                }
            });

            $('#DOBM,#DOBY').change(function() {
                if ($('#DOBM').val() == '04'||$('#DOBM').val() == '06'||$('#DOBM').val() == '09'||$('#DOBM').val() == '11') {
                    $("#DOBD option[value='31']").remove();
                    if ($("#DOBD option[value='29']").length == 0){
                        $("#DOBD").append("<option value='29'>29</option>");
                    }
                    if ($("#DOBD option[value='30']").length == 0){
                        $("#DOBD").append("<option value='30'>30</option>");
                    }
                }
                if ($('#DOBM').val() == '01'||$('#DOBM').val() == '03'||$('#DOBM').val() == '05'||
                $('#DOBM').val() == '07'||$('#DOBM').val() == '08'||$('#DOBM').val() == '10'||$('#DOBM').val() == '12'){
                    if ($("#DOBD option[value='29']").length == 0){
                        $("#DOBD").append("<option value='29'>29</option>");
                    }
                    if ($("#DOBD option[value='30']").length == 0){
                        $("#DOBD").append("<option value='30'>30</option>");
                    }
                    if ($("#DOBD option[value='31']").length == 0){
                        $("#DOBD").append("<option value='31'>31</option>");
                    }
                }
                if ($('#DOBM').val() == '02'){
                    $("#DOBD option[value='31']").remove();
                    $("#DOBD option[value='30']").remove();
                    $("#DOBD option[value='29']").remove();
                    if (($('#DOBY').val() % 4 == 0)&&($('#DOBY').val() % 100 != 0)||($('#DOBY').val() % 400 == 0)){
                        $("#DOBD").append("<option value='29'>29</option>");
                    }
                }
            })
        })
    </script> 
```

有人知道为什么它不起作用吗？我是编程新手，非常感谢任何帮助/建议。谢谢！

编辑：这是小提琴应该发生的事情：

编写 jQuery 的前两个块是为了更改表单输入上的 CSS。在焦点上，输入将更改为“focusField”，因此将具有 .css 文件中的新 CSS 属性。在模糊时，它变回类“idleField”。

如果用户没有输入，则返回默认值。如果用户输入了一些东西，它会保留他的输入。这确实有效。

我的 jQuery 代码的其余部分是更新一个月中的天数。如果选择的月份是 04||06||09||11，则删除第 31 天并附加第 29,30 天（如果它们不存在）。如果选择的月份是 01||03||05||07||08||10||12，则如果不存在天，则附加天 29、30、31。最后一个街区是二月 (02)。删除第 31、30、29 天。如果是闰年，则追加第 29 天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:37:43.067

我在你的小提琴中改变了一些东西，现在它正在工作

看看这是不是你想要的

## [小提琴](http://jsfiddle.net/mohammadAdil/29qVB/)

*   你最后有不必要的括号 `})`

# express - 应用视图缓存不起作用

> ID：15601408
> 
> 赞同：1
> 
> 时间：2013-03-24T17:07:20.630
> 
> 标签：express

我对 Express 还很陌生，遇到了问题。我将 node_env 设置为生产，并且 app.get('view cache') 返回 true。但是，它似乎没有缓存我的基于玉的视图。我可以看到 304，但我的视图渲染仍然每次都被调用。

我是否误解了此设置的用途？

编辑：我猜这个设置实际上只是为了让视图模板在生产中表现更好。我是否假设快递不支持动态生成的视图内容的缓存？

我注意到添加 res.header('Cache-Control', 'max-age=60, must-revalidate');

有没有更清洁的方法来做到这一点？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:16:26.343

When the 'view cache' setting is true, it caches the compiled javascript of the jade templates.

It doesn't however, cache the jade into a fully static document.

If you wished to do this, you could render the jade once in your app and store the result as a file or in memory. Then you just serve this rendered jade to your client.

# c - 如何检查一个值是否代表一个地址

> ID：15601411
> 
> 赞同：1
> 
> 时间：2013-03-24T17:07:25.190
> 
> 标签：c, pointers, memory-management

我正在用 C 语言编写一个函数，该函数将一个数组作为输入并给出两个数组作为输出。该函数将写入作为参数传入的数组。作为防止内存错误的“故障安全”，我想检查传递给函数的指针是否是有效的内存地址，如果是，则释放它。这是我到目前为止的代码，其中我仍然不确定的部分已被删除：

```
int fft( double* signal, double* real, double* imag, int size ) {
    double retVal;

    /*initialize output arrays*/
    if( /*real is a valid memory address */ ) {
        free( real );
    } 
```

我如何检查这`real`是一个有效的内存地址，当我尝试释放它时不会出现段错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T17:09:32.943

对此只有一个答案：你不能。

如果它是一个有效的指针，它指向一个有效的地址。没有标准的方法来判断是否在堆上分配了一块内存。

唯一的解决方案是您需要一个指针指向堆分配的内存块的参数。或者更好的是，让函数的*调用者释放调用者分配的内存。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T17:22:17.463

有时您可以检查您是否对某个指针具有写访问权。例如，在 Windows 中，您可以使用[IsBadWritePtr](http://msdn.microsoft.com/ru-ru/library/windows/desktop/aa366716%28v=vs.85%29.aspx)函数。

请注意，此函数已过时，不是线程安全的，不建议使用。您可以将其解读为“不要使用它”。

此外，您不能释放一些任意地址。您无法确定您使用的内存分配是否与操作系统使用的相同。`malloc`除了使用/`realloc`调用获得的地址之外，您无法释放地址。

在您的情况下，最好遵循 WinAPI 指南：需要两个具有大小的指针，如果没有结果空间，则返回错误代码。或者，您可以要求两个指向指针的指针，然后自己分配内存，返回数据并指定调用者必须释放内存。

```
int fft( double* signal, double** real, double** imag, int size ) {
   int retval_size = 256;
   *real = (double*)malloc(sizeof(double) * retval_size);
   *imag = (double*)malloc(sizeof(double) * retval_size);
   ...
} 
```

# css - 创建相互连接的图像网格

> ID：15601418
> 
> 赞同：0
> 
> 时间：2013-03-24T17:08:15.187
> 
> 标签：css, grid

我正在尝试制作一个相互连接良好的图像网格。

这是我的网格： [http ://www.yannickluijten.be/test2](http://www.yannickluijten.be/test2)

并非每张图片都具有相同的高度，所以这就是问题所在：我希望第四张图片（灰色）出现在第一张图片（绿色）下方，并且我不想使用 3 列。我怎样才能做到这一点？

```
.img1 {
    width: 300px;
    height: 200px;
    float: left;
    background: green;
}

.img2 {
    width: 300px;
    height: 400px;
    float: left;
    background: blue;
}

.img3 {
    width: 300px;
    height: 300px;
    float: left;
    background: yellow;
}

.img4 {
    width: 300px;
    height: 400px;
    float: left;
    background: gray;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:37:05.933

使用 CSS 浮动时，无法控制可变高度浮动元素何时应该“环绕”到左边缘，而不会导致其中一些元素之间出现不需要的垂直间距。

[像jQuery Masonry](http://masonry.desandro.com/demos/basic-single-column.html)这样的马赛克插件就是为这类事情而设计的。不确定它是否可以让您控制哪张照片出现在哪一列中，但它可能工作得很好。

您可以使用[CSS columns](http://www.w3.org/TR/css3-multicol/)，但它对哪张照片应该出现在哪一列中提供有限的控制，并且它在 IE9 或更早版本中不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T17:23:16.753

```
.img4 {
width: 300px;
height: 400px;
float: left;
background: gray;
clear: both;
} 
```

第四张图片位于第一行，但不完全位于第一张图片下方。

# matlab - Matlab~线性方程？

> ID：15601419
> 
> 赞同：2
> 
> 时间：2013-03-24T17:08:16.357
> 
> 标签：matlab, equation

有人知道如何在 MATLAB 中求解这个方程吗？

```
F_I*cosd(alpha_I) - F_C(cosd(alpha_C)) = 0  
F_I*sind(alpha_I) - F_T_1 + F_C*sind(alpha_C) = 0  
F_T_1*abs(x_F_C-x_T_1) - F_I*sind(alpha_I)*abs(x_F_C-x_F_I) - F_I*cosd(alpha_I)*abs(y_F_C-y_F_I) = 0 
```

我知道：

> alpha_I | F_T_1 | x_F_C | x_T_1 | x_F_I | y_F_C | y_F_I

我不知道（也想知道）：

> F_I | F_C | 阿尔法_C

问题出在 F_C*cosd(alpha_C) 中，这是两个变量，所以我不知道在 A 中的 Ax=B 矩阵中写什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:39:44.337

第三个方程只包含一个未知数，即`F_I`。因此，您可以明确地解决这个问题，只剩下两个方程和两个未知数：

```
F_I= (F_T_1*abs(x_F_C-x_T_1)/(sind(alpha_I)*abs(x_F_C-x_F_I)+cosd(alpha_I)*abs(y_F_C-y_F_I)) 
```

现在你的前两个方程基本上是形式

```
a*sind(b)=c
a*cosd(b)=d 
```

与a，b未知。将它们分开以获得

```
tand(b) = c/d 
```

这给了你 b (alpha_C)，现在求解 a (F_C) 是微不足道的。

# mysql - SQL 重复触发器

> ID：15601420
> 
> 赞同：0
> 
> 时间：2013-03-24T17:08:17.573
> 
> 标签：mysql, sql, triggers, mysql-workbench

我有一个简单的数据库类项目，我有实现这种逻辑的商店数据库：对于订单表中的每个客户，当客户确认他的订单时，我们有 type = 'CART' 的订单，他的订单将其类型更改为'ORDER'，我们创建一个为我们的客户提供新的 CART。现在我想编写触发器，允许我控制每个客户只有一个 CART。

我写这样的东西

```
DELIMITER $$
USE `newshop`$$
CREATE
DEFINER=`root`@`localhost`
TRIGGER `newshop`.`cart_check`
BEFORE INSERT ON `newshop`.`order`
FOR EACH ROW
BEGIN
DECLARE msg VARCHAR(255);
DECLARE count_pn INTEGER;
SELECT count(*) INTO count_pn FROM newshop.order
    where newshop.order.type = NEW.type 
    and NEW.user_id = newshop.order.user_id
    and NEW.type = 'CART' 
    or NEW.type = 'cart' 
    LIMIT 1;
if count_pn > 0 THEN
BEGIN
    set msg = 'Oh no';
    SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = msg;
end;
ELSE
BEGIN
    set msg = 'Oh yeah';
    SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = msg;
END;
END IF;
END$$ 
```

然后，当我尝试为 id = 1 的用户插入类型为购物车的新订单时，已经有一个购物车 - 此触发器不允许我这样做，如果我尝试为另一个用户添加购物车，那不会'没有购物车 - 这个触发器也不允许我这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:12:17.240

否则，您还有**SIGNAL SQLSTATE=45000**，这是未处理的异常，它将导致返回失败。

```
 SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = msg; 
```

# mysql - 生成红宝石脚手架的问题

> ID：15601423
> 
> 赞同：1
> 
> 时间：2013-03-24T17:08:45.413
> 
> 标签：mysql, ruby-on-rails, scaffolding

所以我已经设置了我的数据库并尝试为我制作的应用程序生成一些脚手架。我得到这个错误，我有点困惑。有什么建议吗？谢谢！

```
rails generate scaffold product title:string description:text image_url:string
/Users/Cameron/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/psych.rb:203:in `parse': (<unknown>): could not find expected ':' while scanning a simple key at line 18 column 3 (Psych::SyntaxError)
from /Users/Cameron/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/psych.rb:203:in `parse_stream'
from /Users/Cameron/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/psych.rb:151:in `parse'
from /Users/Cameron/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/psych.rb:127:in `load'
from /Users/Cameron/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.13/lib/rails/application/configuration.rb:115:in `database_configuration'
from /Users/Cameron/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.13/lib/active_record/railtie.rb:78:in `block (2 levels) in <class:Railtie>'
from /Users/Cameron/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.13/lib/active_support/lazy_load_hooks.rb:36:in `instance_eval'
from /Users/Cameron/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.13/lib/active_support/lazy_load_hooks.rb:36:in `execute_hook'
from /Users/Cameron/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.13/lib/active_support/lazy_load_hooks.rb:43:in `block in run_load_hooks'
from /Users/Cameron/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.13/lib/active_support/lazy_load_hooks.rb:42:in `each'
from /Users/Cameron/.rvm/gems/ruby-1.9.3-p392/gems/activesupport-3.2.13/lib/active_support/lazy_load_hooks.rb:42:in `run_load_hooks'
from /Users/Cameron/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.13/lib/active_record/base.rb:720:in `<top (required)>'
from /Users/Cameron/.rvm/gems/ruby-1.9.3-p392/gems/activerecord-3.2.13/lib/active_record/railtie.rb:88:in `block in <class:Railtie>'
from /Users/Cameron/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.13/lib/rails/initializable.rb:30:in `instance_exec'
from /Users/Cameron/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.13/lib/rails/initializable.rb:30:in `run'
from /Users/Cameron/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.13/lib/rails/initializable.rb:55:in `block in run_initializers'
from /Users/Cameron/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.13/lib/rails/initializable.rb:54:in `each'
from /Users/Cameron/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.13/lib/rails/initializable.rb:54:in `run_initializers'
from /Users/Cameron/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.13/lib/rails/application.rb:136:in `initialize!'
from /Users/Cameron/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.13/lib/rails/railtie/configurable.rb:30:in `method_missing'
from /Users/Cameron/depot/config/environment.rb:5:in `<top (required)>'
from /Users/Cameron/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.13/lib/rails/application.rb:103:in `require'
from /Users/Cameron/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.13/lib/rails/application.rb:103:in `require_environment!'
from /Users/Cameron/.rvm/gems/ruby-1.9.3-p392/gems/railties-3.2.13/lib/rails/commands.rb:25:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T17:15:02.357

这可能是您`config/database.yml`文件中的问题。错误来自 Psych，它是 Ruby 的 YAML 解析引擎。我不知道在 a 期间读取的任何其他 YAML 文件，我可以通过在我的文件中`rails g scaffold`引入一个错字来重现该失败。`database.yml`

有一些[在线 YAML 验证器](http://yaml-online-parser.appspot.com/)，您可以将文件粘贴到其中以帮助调试它。或者如果您找不到问题，请将其添加到上面的问题中。

# iphone - iphone中游戏的自动化任务

> ID：15601426
> 
> 赞同：1
> 
> 时间：2013-03-24T17:08:59.507
> 
> 标签：iphone, ios5, automation, ui-automation

我想知道是否有可能创建一个用于任务自动化的脚本，尤其是在 iphone 游戏中。

Tiny Tower、Hay day、Enchant U 等游戏。

这是我在 iphone 上发现的一些游戏，可以很好地测试自动化任务。

如果可能的话，有人可以告诉我在哪里可以找到执行此操作的教程吗？甚至我应该使用什么程序来做到这一点？

我很好奇它是否有可能建立诸如金点之类的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:26:32.073

看看 UIAutomation：

[http://blog.manbolo.com/2012/04/08/ios-automated-tests-with-uiautomation](http://blog.manbolo.com/2012/04/08/ios-automated-tests-with-uiautomation)

[http://www.cocoacontrols.com/posts/2012/11/13/introduction-to-uiautomation-testing-on-ios-video-slides](http://www.cocoacontrols.com/posts/2012/11/13/introduction-to-uiautomation-testing-on-ios-video-slides)

[http://blog.ideveloper.tv/automated-ui-testing-for-ios/](http://blog.ideveloper.tv/automated-ui-testing-for-ios/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-12T17:53:43.063

现在有 iOS 开关控制，您可以使用它来自动执行某些动作、扫描屏幕的某些部分等等。

这是[Apple的文档](https://support.apple.com/en-us/HT201370)。网络上还有很多视频和教程，教您如何在某些游戏中使用它。

# java - scrollPane 无法获得滚动条

> ID：15601427
> 
> 赞同：1
> 
> 时间：2013-03-24T17:09:04.700
> 
> 标签：java, eclipse, swing, jscrollpane, jscrollbar

我有一个滚动窗格，我在我的代码中动态填写。问题是我无法让它扩大范围。

我已经尝试了很多可以在网上找到的提示，但没有任何提示出现。

我循环出 10 个组件，但大小始终保持不变。

```
 B = new JScrollPane();
     B.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
       B.setViewportBorder(null);

          B.setBounds(12, 53, 330, 400);

       //making the scrollPane

       loadArtists(country); 

       // loading the method with the content

    contentPane.add(B);

       // the content method

               public void loadArtists(String country){
    ArrayList<Artist> top10A = Methods.getTopArtist(country); // top atrister

    B.removeAll();

    String [] genre =Methods.getGenreArtist(country);                                           
    Component2[] comp = new Component2[10]; // skriv ut infohållare

    for (int i = 0; i < top10A.size(); i++) {
        comp[i] = new Component2(this);
        comp[i].setBounds(0, 0, 327, 68);
        comp[i].setLocation(0, 0 + space2);
        ImageIcon[] panel= new ImageIcon[10];

        int lyssnare = top10A.get(0).getListeners();

        try {
                URL url2 = new             URL((top10A.get(i).getImageURL(ImageSize.valueOf("MEDIUM"))));  
                panel[i]= new ImageIcon(url2);
            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                panel[i]= new ImageIcon(GUI.class.getResource("/bilder/super.jpg"));
                e.printStackTrace();

            }

        comp[i].setInfo(panel[i],top10A.get(i).getListeners(), top10A.get(i).getName().toString(), String.valueOf(i+1),genre[i],lyssnare,"");

        B.add(comp[i]);
        space2 = space2 + 75;

               //B.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);

         B.repaint();
    }
} 
```

好的，这就是我所在的位置。我会得到卷轴，但它只能让我滚动 1 毫米。如果我删除 setBounds 整个滚动窗格就会消失。我不知道如何解决它。对不起，如果我有点愚蠢，但这是我的第一个“真正的程序”：

```
 scroll1 = new JScrollPane();
     scroll1.setViewportBorder(null);

         scroll1.setBounds(12, 53, 330, 400);

          setComponents = new JPanel();

 contentPane.add(scroll1);

 scroll1.setViewportView(setComponents);
 GroupLayout gl_testP = new GroupLayout(setComponents);
 gl_testP.setHorizontalGroup(
    gl_testP.createParallelGroup(Alignment.LEADING)
        .addGap(0, 307, Short.MAX_VALUE)
 );
 gl_testP.setVerticalGroup(
    gl_testP.createParallelGroup(Alignment.LEADING)
        .addGap(0, 398, Short.MAX_VALUE)
 );
 setComponents.setLayout(gl_testP);

 loadArtists(country);     

 public void loadArtists(String country){
    ArrayList<Artist> top10A = Methods.getTopArtist(country); // top atrister

    setComponents.removeAll();

    String [] genre =Methods.getGenreArtist(country);                                           
    Component2[] comp = new Component2[10]; // skriv ut infohållare

    for (int i = 0; i < top10A.size(); i++) {
        comp[i] = new Component2(this);
        comp[i].setBounds(0, 0, 327, 68);
        comp[i].setLocation(0, 0 + space2);
        ImageIcon[] panel= new ImageIcon[10];

        int lyssnare = top10A.get(0).getListeners();

        try {
                URL url2 = new URL((top10A.get(i).getImageURL(ImageSize.valueOf("MEDIUM")))); // skapa array av artist bilder
                panel[i]= new ImageIcon(url2);
            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                panel[i]= new ImageIcon(GUI.class.getResource("/bilder/super.jpg"));
                e.printStackTrace();
                System.out.println(panel[i]+" "+"saknar bild");
            }

        comp[i].setInfo(panel[i],top10A.get(i).getListeners(), top10A.get(i).getName().toString(), String.valueOf(i+1),genre[i],lyssnare,"");

        setComponents.add(comp[i]);
        space2 = space2 + 75;
         scroll1.setViewportView(setComponents);

         //B.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);

         setComponents.repaint();
    }
} 
```

好的。所以我“修复”了它。

```
 setComponents.setPreferredSize(new Dimension(1,750)); 
```

这不是最优的，因为它不会让我动态地增加内容。但是，当我不需要循环超过 10 个组件时，这并不重要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T17:16:40.770

```
B.setBounds(12, 53, 330, 400); 
```

不要在组件上使用 setBounds() 方法。

Swing 旨在与布局管理器一起使用。当添加到滚动窗格的组件的首选大小大于滚动窗格的大小时，滚动条将自动出现。布局管理器为您进行这些计算。

有关更多信息和示例，请参阅 Swing 教程中有关[使用布局管理器的部分。](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T17:24:48.577

除了 Rob Camick 给出的很好的建议之外，您还直接从 JScrollPane 中删除所有组件并尝试将组件直接添加到 JScrollPane 中，而忽略了 JViewport 不应该被弄乱并且需要将可视化组件添加到 JScrollPane 的视口中，而不是 JScrollPane 本身。

因此，您可以通过将组件传递到 JScrollPane 的构造函数中来将组件添加到 JScrollPane 的视口中，或者`setViewportView(...)`如果您想交换它所拥有的视图，则可以改为调用 JScrollPane 的方法。

顺便说一句，请尝试使用更好的变量名称、符合 Java 命名标准的名称（例如变量名称应以小写字母开头）以及使您的代码自注释的有意义的名称。变量名 B 不符合这些建议中的任何一个。

此外，您的整个程序都缺乏体面的布局管理器。您似乎希望向 JScrollPane 添加多个组件。考虑创建一个由 JScrollPane 的视口持有的 JPanel，给它一个适当的布局，可能是 GridLayout(....) 并将多个组件添加到这个 JPanel。

如需更具体和信息丰富的帮助，请考虑创建和发布[SSCCE](http://SSCCE.org)。

# c - 存储和打印大于 2^64 的整数值

> ID：15601430
> 
> 赞同：9
> 
> 时间：2013-03-24T17:09:10.013
> 
> 标签：c, types, multiprecision

我正在尝试编写一个程序来查找梅森素数。使用 unsigned long long 类型，我能够确定第 9 个梅森素数的值，即 (2^61)-1。对于较大的值，我需要一种可以存储大于 2^64 的整数值的数据类型。

我应该能够使用这种数据类型的运算符，如`*`, `*=`,和。`>``<``%`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T17:14:14.603

你不能用 C 原生类型做你想做的事，但是有一些库可以处理任意大[的数字，比如 GNU 多精度算术库](http://gmplib.org/)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-24T17:18:34.667

要存储大量数字，有很多选择，下面按偏好递减的顺序给出：

1）使用其他人在github上开发的第三方库，codeflex等为您提到的语言，即C。

2) 切换到其他语言，例如具有内置大数处理能力的 Python、支持 BigNum 的 Java 或 C++。

3) 开发自己的数据结构，可以是字符串（其中 100 个字符长度可以指 100 个十进制数字）及其自定义操作，如加法、减法、乘法等，就像 C++ 中的复数库是以这种方式开发的. 此选择可能意味着您的研究和教育目的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-24T17:22:48.043

所有这些人的基本意思是，64 位 CPU 将无法仅通过一条指令来添加这些巨大的数字，但您需要一种能够添加这些数字的**算法。**这样的算法必须将这 2 个数字分段处理。

他们列出的库将允许您这样做，一个很好的练习是自己开发一个（只是学习如何完成的算法/功能）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-24T17:15:23.420

数据类型大于 64 位没有标准方法。您应该检查系统的文档，其中一些定义了 128 位整数。但是，要真正拥有灵活大小的整数，您应该使用其他表示形式，例如使用数组。然后，由您来定义运算符`=`、`<`、`>`等。

幸运的是，[GMP](http://gmplib.org/)等库允许您使用任意长度的整数。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-24T17:14:06.690

看看[GNU MP Bignum 库](http://gmplib.org/)。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-04-28T07:05:46.513

使用双 :)

它会解决你的问题！

# jpa - JPA 一对多查询

> ID：15601432
> 
> 赞同：0
> 
> 时间：2013-03-24T17:09:15.387
> 
> 标签：jpa

我有两个类**Inverter**和**Log**，其中 Inverter 有很多 Logs **(1:n)**。每个日志作为一个时间戳属性。

当我查询逆变器时，我通过“Inverter.getLog()”获取所有日志，这很好。

但是，我想创建一个返回逆变器的查询，只使用选定的日志：

```
select t from Inverter t, Log l WHERE t.id = :id AND l.timestamp >= :date 
```

这给了我一大堆结果，但是我想用 Logs.timestamp >= :date 得到 1 Inverter

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T17:20:20.953

您的查询要求所有满足条件的逆变器和日志，而不在它们之间进行任何连接。

而且您不能只加载部分日志列表的逆变器。实体代表您在数据库中真正拥有的内容，而不是特定查询的结果。

我将只使用`em.find()`通过 ID 获取逆变器，并使用以下查询来获取满足条件的所有日志：

```
select log from Inverter inverter 
inner join inverter.logs log 
WHERE inverter.id = :id AND log.timestamp >= :date 
```

我将创建一个包含逆变器及其部分日志列表的对象。

# winforms - 如何在列表视图/窗口表单前面添加新项目

> ID：15601434
> 
> 赞同：0
> 
> 时间：2013-03-24T17:09:20.290
> 
> 标签：winforms, listview

我创建了一个 ListView 并且在我的程序中我需要在我的程序运行时添加项目，并且每个项目都必须位于列表的顶部，直到添加新项目。我怎样才能做到这一点？我试过了；

```
ListView.Item.Add(0, item); 
```

但它不工作/

第二个问题是；是否有可能某个项目始终位于此列表的顶部，我可以以某种方式提升它的价值吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T17:22:11.970

如果你总是想在顶部插入一个项目，你可以使用[Items.Insert()](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.objectcollection.insert.aspx)方法来做到这一点

```
ListView.Items.Insert(0, item); 
```

要在 ListView 中编辑项目值，只需将其值更改如下

```
ListView.Items[listViewItemIndex].Text = "New name"; 
```

如果你想保持一个项目总是在最简单的有一个 if 语句，将新项目插入位置 1 而不是 0。确保 ListView 中的项目数至少为一个，否则你会得到一个异常。

# c++ - 与字符串文字比较会导致未指定的行为、错误

> ID：15601438
> 
> 赞同：-1
> 
> 时间：2013-03-24T17:09:47.720
> 
> 标签：c++, string, menu

```
#include <iostream> //include header files

using namespace std;

int main () //start of main body

{

int num; //declaring integer

int control=1; //declaring integer

while(control==1)//start of loop, as long as condition is true
{
    cout << "Press 1 for coffee" << endl; //writes to standard o/p
    cout << "Press 2 for tea" << endl;
    cout << "Press 3 for hot chocolate" << endl;
    cout << "Press 4 for soft drink" << endl;
    cout << "Press 5 to exit" << endl;
    cin >> num;

if (num == 1) //code to execute if integer = 1
{
    cout << "coffee selected" << endl;
}
else if (num == 2) //code to execute integer = 2
{
    cout << "tea selected" << endl;
}
else if (num == 3) //code to execute if integer = 3
{
    cout << "hot chocolate selected" << endl;
}
else if (num == 4) //code to execute if integer = 4
{
    cout << "soft drink selected" << endl;
}
else if (num == 5) //code to execute if integer = 5
{
    cout << "Exit Program" << endl;
    control=0;
}

} 
```

}

这是我修改后的代码，它有效。但是我不确定初始化 num 整数，所以我把它省略了，但代码仍然执行并正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T17:11:59.237

错误是您正在将`int`( `num`) 与字符串文字（例如`"1"`. 这个特定的字符串文字有 type `const char[2]`，它衰减到`const char*`，因此编译器错误。

例如，您需要将数字与数字进行比较

```
if (num == 1) { .... } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T17:12:20.160

您正在尝试将数字与字符串文字进行比较。**不是**一个好计划。尝试

`if(num==1)`

不是

`if(num=="1")`

其次，`num`未定义。尝试为它设置一个值。

C++ 编译器会给您错误，因为您无法比较两种不同的数据类型。[在此处](http://www.functionx.com/cpp/Lesson08.htm)阅读有关比较的更多信息

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T17:12:20.970

由于您要求用户输入整数，因此您不需要`menu`成为类型。`string`只需使用

```
if (num == 1) 
```

不是

```
if (num == "1") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-24T17:11:48.013

您在这里将整数与字符串进行比较`num == "1"`。相反，使用`num == 1`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-24T17:15:11.497

首先，您的 num 未初始化。当您更改此设置时，还将比较从更改`num == "1"` 为 `num == 1`

当前，您在这样做时将输入​​放入`menu`变量中，`getline (cin, menu, '\n');`如果您想将输入存储在`num`.

除了这是非常*好的*代码，我会选择 4)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-24T17:12:58.043

整数与字符串进行比较:)

```
num == "1" 
```

不允许，顺便说一句，我认为您想要的不是“num”，而是“menu”，它是一个字符串？

# android - 无法从 android sdk 构建 OpenglES2.0 示例

> ID：15601443
> 
> 赞同：2
> 
> 时间：2013-03-24T17:10:28.837
> 
> 标签：android, opengl-es, opengl-es-2.0, adt

我是android开发的新手，刚刚安装了android SDK。当我将 BasicGLSurfaceViewActivity 示例添加到工作区时，IDE 会显示很多错误，例如：

*   GLES20 无法解析 GLES20TriangleRenderer.java
*   导入android.opengl.GLES20 无法解析BasicGLSurfaceView.java

项目清单中的目标 SDK 版本为 11。

我从 sdk/samples/andriod-17 中获取了这个样本。

我在 SDK 管理器中安装了与 API-11 和 API-17 相关的所有软件包。

SDK中存在GLES20示例应该意味着支持GLES20，不是吗？可能出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T16:07:36.690

找到解决方案：将 project.properties 文件中的“target”变量更改为 7 以上。Android 文档说：“从 Android 2.2（API 级别 8）开始，框架支持 OpenGL ES 2.0 API 规范。”

# javascript - 对象不支持此属性或方法 document.querySelector

> ID：15601447
> 
> 赞同：1
> 
> 时间：2013-03-24T17:10:56.367
> 
> 标签：javascript, html, internet-explorer, browser

我正在 IE7 上测试一行代码，但它给了我以下错误：

> 对象不支持此属性或方法，它引用

这是有问题的问题线：

```
var checked = document.querySelector('[name="answer1"]:checked'); 
```

这是整个代码

**问题1：你喜欢培训吗？**

```
<input name="q4" value="Yes" type="radio"> Yes
<input name="q4" value="No" type="radio"> No
<br>
<button id="getval">cick here</button>

<script type="text/javascript"> 
document.getElementById('getval').onclick = function() {
    var checked = document.querySelector('[name="q4"]:checked');
    alert(checked ? checked.value : 'Not selected');
}
</script> 
```

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-17T13:14:16.100

`querySelector`仅[在 IE8+ 中可用](http://caniuse.com/queryselector)。要在 IE7 中通过选择器进行查询，您需要[Sizzle](http://sizzlejs.com/)之类的东西，它是 jquery 中内置的 CSS 选择器查询代码的独立版本。或者，如果您更喜欢更轻、更无缝的东西，您可以使用[此处描述](https://github.com/inexorabletash/polyfill/blob/master/polyfill.js#L655)的 polyfill ，如下所示：

```
if (!document.querySelectorAll) {
  document.querySelectorAll = function (selectors) {
    var style = document.createElement('style'), elements = [], element;
    document.documentElement.firstChild.appendChild(style);
    document._qsa = [];

    style.styleSheet.cssText = selectors + '{x-qsa:expression(document._qsa && document._qsa.push(this))}';
    window.scrollBy(0, 0);
    style.parentNode.removeChild(style);

    while (document._qsa.length) {
      element = document._qsa.shift();
      element.style.removeAttribute('x-qsa');
      elements.push(element);
    }
    document._qsa = null;
    return elements;
  };
}

if (!document.querySelector) {
  document.querySelector = function (selectors) {
    var elements = document.querySelectorAll(selectors);
    return (elements.length) ? elements[0] : null;
  };
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T17:13:44.617

旧的 IE 没有`querySelector`. 您必须使用引擎，例如 sizzle（这就是 jQuery 中的内容）、zest 等

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T17:15:45.560

在 IE 9+ css3 选择器中，您正在使用的选择器受支持..

[http://caniuse.com/queryselector](http://caniuse.com/queryselector)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-17T11:52:46.007

您可以参考[created-a-queryselector-for-ie-that-runs-at-native-speed](http://ajaxian.com/archives/creating-a-queryselector-for-ie-that-runs-at-native-speed) 和[添加-document-queryselectorall-support-to-ie-7](http://www.codecouch.com/2012/05/adding-document-queryselectorall-support-to-ie-7/)

好的，您可以使用 jquery $('#selector') ，因为它等于 queryselector，您可以为此包含 jQuery。

# objective-c - 如果应用程序未运行，则响应 GURL 苹果事件

> ID：15601450
> 
> 赞同：0
> 
> 时间：2013-03-24T17:11:07.057
> 
> 标签：objective-c, macos, appleevents, launch-services

我有一个应用程序从自定义注册的 URL 协议响应“GURL”（获取 URL）苹果事件。它已正确注册并且在应用程序已经运行时工作正常，但如果应用程序尚未运行，它将仅启动应用程序，但不会像 API 指示的那样响应 url。

我不太确定 Xcode 从外部源启动时如何立即附加到进程，所以我不确定应用程序是否使用指示 url 的参数启动？如果不是，有没有办法确定应用程序在启动时是从 GURL 苹果事件启动的？

我正在通过以下方式初始化处理程序：

```
- (void)applicationWillFinishLaunching:(NSNotification *)notification
{
    // Register the URL handler
    NSAppleEventManager* manager = [NSAppleEventManager sharedAppleEventManager];
    [manager setEventHandler:self
                 andSelector:@selector(getUrl:withReplyEvent:)
               forEventClass:kInternetEventClass
                  andEventID:kAEGetURL];
} 
```

# javascript - Twitter Bootstrap - 如何在工具提示弹出窗口和元素之间添加更多边距

> ID：15601451
> 
> 赞同：15
> 
> 时间：2013-03-24T17:11:10.483
> 
> 标签：javascript, jquery, css, twitter-bootstrap

我没有尝试过任何事情，因为我无法理解工具提示和元素之间的空间是从引导程序中创建/添加的，通常工具提示确实靠近触发工具提示事件的元素。

我只是想让工具提示稍微远离元素，以便从工具提示和元素中添加更多边距。

如果可能的话，我想了解如何在 css 中执行此操作，以及是否可以将其用于右、左、上、下工具提示。

希望问题很清楚。

这是工具提示在我的应用程序上的外观：

![在此处输入图像描述](../Images/a1d2594c837b8a5a2058607883af03f9.png)

这就是我想做的事情以及之后的样子：

![在此处输入图像描述](../Images/b5f1647a89a09c05c727d29f6d8c9ace.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-24T17:30:44.563

这是顶部工具提示的默认 CSS：

```
.tooltip.top {
  padding: 5px 0;
  margin-top: -3px;
} 
```

您可以在自己的 CSS 中覆盖它：

```
.tooltip.top {
  margin-top: -10px;
} 
```

请注意，此代码仅适用于顶部的工具提示，您需要调整 CSS 以适应其他 3 个方向：

```
.tooltip.top    { margin-top: -10px; }
.tooltip.right  { margin-left: 10px; }
.tooltip.bottom { margin-top: 10px;   }
.tooltip.left   { margin-left: -10px; } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-05-07T09:11:38.707

这是完整的 Bootstrap 4 解决方案

```
.bs-tooltip-top {
    top: -10px !important;
}

.bs-tooltip-right {
    left: 10px !important;
}

.bs-tooltip-bottom {
    top: 10px !important;
}

.bs-tooltip-left {
    left: -10px !important;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-10-28T18:27:01.280

这将适用于**引导程序 4v**

类名发生了相当大的变化：

*   **.bs-工具提示-底部**
*   **.bs-tooltip-top**
*   **.bs-tooltip-right**
*   **.bs-工具提示-左**

例子：

```
.bs-tooltip-bottom { 
    margin-top: 10px; 
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T17:32:19.520

在 bootstrap.css 中，您将找到以下代码：

```
.tooltip.top {
  padding: 5px 0;
  margin-top: -3px;
}

.tooltip.right {
  padding: 0 5px;
  margin-left: 3px;
}

.tooltip.bottom {
  padding: 5px 0;
  margin-top: 3px;
}

.tooltip.left {
  padding: 0 5px;
  margin-left: -3px;
} 
```

更改或覆盖边距以更改工具提示与悬停元素的距离。

IE 要为工具提示的顶部位置设置更大的距离，请`.tooltip.top`像这样设置类：

```
.tooltip.top {
  padding: 5px 0;
  margin-top: -70px;
} 
```

# image - 如何在JavaCV中比较两个图像并绘制矩形这两个图像中不同的部分

> ID：15601454
> 
> 赞同：2
> 
> 时间：2013-03-24T17:11:32.073
> 
> 标签：image, javacv

我想使用 JavaCV 比较两个图像，并绘制一个矩形，其中这些图像与下面的示例不同。

![在此处输入图像描述](../Images/73ebb3c4c1fac7fa08d41cb3add05241.png)

我尝试了下面的代码，但它需要一个图像作为输入，并且会在图像中的所有对象上绘制矩形。

```
IplImage img=cvLoadImage("image_path_and_name.jpg");
        CvSize cvSize = cvSize(img.width(), img.height());
        IplImage gry=cvCreateImage(cvSize, img.depth(), 1);
        cvCvtColor(img, gry, CV_BGR2GRAY);
        cvThreshold(gry, gry, 200, 255, CV_THRESH_BINARY);
        cvAdaptiveThreshold(gry, gry, 255, CV_ADAPTIVE_THRESH_MEAN_C, CV_THRESH_BINARY_INV, 11, 5);

        CvMemStorage storage = CvMemStorage.create();
        CvSeq contours = new CvContour(null);

        int noOfContors = cvFindContours(gry, storage, contours, Loader.sizeof(CvContour.class), CV_RETR_CCOMP, CV_CHAIN_APPROX_NONE, new CvPoint(0,0));

        CvSeq ptr = new CvSeq();

        int count =1;
        CvPoint p1 = new CvPoint(0,0),p2 = new CvPoint(0,0);

        for (ptr = contours; ptr != null; ptr = ptr.h_next()) {

            CvScalar color = CvScalar.BLUE;
            CvRect sq = cvBoundingRect(ptr, 0);

                System.out.println("Contour No ="+count);
                System.out.println("X ="+ sq.x()+" Y="+ sq.y());
                System.out.println("Height ="+sq.height()+" Width ="+sq.width());
                System.out.println("");

                p1.x(sq.x());
                p2.x(sq.x()+sq.width());
                p1.y(sq.y());
                p2.y(sq.y()+sq.height());
                cvRectangle(img, p1,p2, CV_RGB(255, 0, 0), 2, 8, 0);
                cvDrawContours(img, ptr, color, CV_RGB(0,0,0), -1, CV_FILLED, 8, cvPoint(0,0));
                count++;

        }

        cvShowImage("contures",img);
        cvWaitKey(0) 
```

;

输出：

![在此处输入图像描述](../Images/9bcb74e21c90ca385c999131d2954b51.png)

如果有人知道如何做到这一点，请告诉我。提前致谢！

# hibernate - hibernate session和连接池的区别和关系？

> ID：15601460
> 
> 赞同：15
> 
> 时间：2013-03-24T17:11:52.787
> 
> 标签：hibernate, session, connection

我对休眠会话和连接池感到困惑，它们是一回事吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-24T17:17:14.600

Hibernate 是一个 ORM，它是 SQL 数据库和 POJO 之间的一层。

连接池提供了一种存储和重用`java.sql.Connection`实例以提高速度和稳健性的方法。

hibernate`Session`是围绕 a 的包装器`Connection`，以便您无需直接编写 SQL 即可保存 POJO。

因此，休眠`Session`是对`Connection`. `Connection`s 保存在连接池中。

当您调用`SessionFactory.openSession`hibernate 首先`Connection`从提供的连接池中获取一个。`Session`然后它围绕它创建一个`Connection`并返回它。

# ruby-on-rails - 我无法在 rails 3.2 Windows 上安装 sqlite3

> ID：15601462
> 
> 赞同：0
> 
> 时间：2013-03-24T17:12:01.583
> 
> 标签：ruby-on-rails, sqlite

这是我的错误： C:>gem install sqlite3-ruby 临时增强 PATH 以包含 DevKit... 构建本机扩展。这可能需要一段时间... 错误：安装 sqlite3-ruby 时出错：错误：无法构建 gem 原生扩展。

```
C:/Ruby200-x64/bin/ruby.exe extconf.rb 
```

检查 sqlite3.h... *** extconf.rb 失败 *** 由于某种原因无法创建 Makefile，可能缺少必要的库和/或头文件。检查 mkmf.log 文件以获取更多详细信息。您可能需要配置选项。

提供的配置选项： --with-opt-dir --without-opt-dir --with-opt-include --without-opt-include=${opt-dir}/include --with-opt-lib -- without-opt-lib=${opt-dir}/lib --with-make-prog --without-make-prog --srcdir=. --curdir --ruby=C:/Ruby200-x64/bin/ruby --with-sqlite3-dir --without-sqlite3-dir --with-sqlite3-include --without-sqlite3-include=${sqlite3- dir}/include --with-sqlite3-lib --without-sqlite3-lib=${sqlite3-dir}/ --enable-local --disable-local C:/Ruby200-x64/lib/ruby/2.0.0 /mkmf.rb:431:in `try_do': The compiler failed to ge nerate an executable file. (RuntimeError) You have to install development tools first. from C:/Ruby200-x64/lib/ruby/2.0.0/mkmf.rb:562:in`try_cpp' from C:/Ruby200-x64/lib/ruby/2.0.0/mkmf.rb:1086:in `block in find_header ' from C:/Ruby200-x64/lib/ruby/2.0.0/mkmf.rb:892:in`block in checks_for' from C:/Ruby200-x64/lib/ruby/2.0 .0/mkmf.rb:337:in`block (2 levels) in p ostpone' from C:/Ruby200-x64/lib/ruby/2.0.0/mkmf.rb:307:in`从 C:/Ruby200-x64/lib/ruby/2.0.0/mkmf.rb:337:in`block in postpone' from C:/Ruby200-x64/lib/ruby/2.0.0/mkmf.rb:307:in`打开' 从 C:/Ruby200-x64/lib/ruby/2.0.0/mkmf.rb:333: in 打开'`postpone' from C:/Ruby200-x64/lib/ruby/2.0.0/mkmf.rb:891:in`来自 C:/Ruby200-x64/lib/ruby/2.0.0/mkmf.rb:1085:in 的检查_for `find_header' from extconf.rb:34:in`'

Gem 文件将继续安装在 C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/sqlit e3-1.3.7 以供检查。结果记录到 C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/sqlite3-1.3.7/ext/sqlite3/gem_make.out

宝石文件：来源“ [https://rubygems.org](https://rubygems.org) ”

```
 gem 'rails'
     gem 'jquery-rails'
     gem 'bootstrap-sass', '2.0.0'
     gem 'bcrypt-ruby'
     gem 'faker', '1.0.1'
     gem 'will_paginate'
     gem 'bootstrap-will_paginate', '0.0.5'

     group :development, :test do
     gem 'sqlite3', '1.3.5'
     gem 'rspec-rails', '2.12.2'
     gem 'guard-rspec', '0.5.5'
    end

    # Gems used only for assets and not required
    # in production environments by default.
    group :assets do
      gem 'sass-rails', '3.2.4'
      gem 'coffee-rails', '3.2.2'
      gem 'uglifier', '1.2.3'
    end

    group :test do
       gem 'capybara', '1.1.2'
       gem 'factory_girl_rails', '1.4.0'
        gem 'cucumber-rails', '1.2.1', require: false
       gem 'database_cleaner', '0.7.0'
       gem 'rb-fsevent', '0.4.3.1', :require => false
        gem 'growl', '1.0.3'
       gem 'guard-spork', '0.3.2'
        gem 'spork', '0.9.2'
       gem 'launchy', '2.1.0'
       gem 'ffi', '1.1.0'
     end 
```

我已经安装了 DevKit。我正在运行 ruby​​ 2.0.0。一切都在 Ruby 1.9.3 上完美运行。谁能帮我？

我尝试过的事情：

```
 1\. bundle install (I do not know why it just skips sqlite3)
     2\. gem install sqlite3
     3\. gem install sqlite3-ruby
     4\. I've also included the -- --with-sqlite3-dir=/usr/local/lib on each of those lines 
```

当我进行捆绑安装时，它会跳过 sqlite3 gem 并正常安装所有其他 gem。

我已经安装了 devkit，然后我去了 sqlite3 网站，得到了 windows 的 .dll 和 exe 文件，并将它放在我的 ruby​​2.0 bin 文件夹中。

编辑：另外，当我运行 rails server 并加载 locahost:3000 时，它告诉我运行 gem install activerecord-sqlite3-adapter

当我运行它时，它说没有这样的 gem 并将其包含在我的 gemfile 中，但它包含在我的 gemfile 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T18:00:30.227

更改为 rails 版本 3.0.9。

我只知道如何更改新应用程序：

```
rails _3.0.9_ new APP_NAME 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T16:26:14.600

在 Windows 上为 Ruby 2.0 安装 sqlite3 gem 时出现问题（ABI 损坏）。幸运的是，有人制作了一个可以让您安装 sqlite3 的软件包： [https ://groups.google.com/forum/?fromgroups=#!topic/rubyinstaller/gedIaMryCFQ](https://groups.google.com/forum/?fromgroups=#!topic/rubyinstaller/gedIaMryCFQ)

另请参阅： [让 Ruby on Rails 环境工作和安装 sqlite3](https://stackoverflow.com/questions/15574693/getting-ruby-on-rails-environment-working-and-installing-sqlite3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:26:43.973

> 我认为您可以使用[http://railsinstaller.org/中的 railsinstaller](http://railsinstaller.org/)
> 
> 并重新安装你的 ruby​​ 和 rails 它将为我工作

但这不是 Ruby 2.0

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T14:25:05.733

我认为您可以使用 [http://railsinstaller.org/中的 railsinstaller](http://railsinstaller.org/)

并重新安装你的 ruby​​ 和 rails 它将为我工作

# javascript - jQuery Fancybox 表单

> ID：15601463
> 
> 赞同：2
> 
> 时间：2013-03-24T17:12:01.690
> 
> 标签：javascript, jquery, html, css, fancybox

我最近开始学习 JQuery，我做得很好。不过，我正在使用[FancyBox](http://fancybox.net) ，但遇到了一些麻烦。

我想在 a`<div>`而不是 iframe 中显示一个表单。我不知道如何 `<div style="display: hidden;">`用 FancyBox 显示一个。

[http://jsfiddle.net/nLcMh/21/](http://jsfiddle.net/nLcMh/21/)

我有一个隐藏的 div 标签内的表单，我想使用 FancyBox 来显示它。Fancybox 是一种 JQuery 灯箱。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T17:35:21.347

如果你需要更多选择的东西，试试这个小提琴：

```
$("a.openform").click(function () {
        $.fancybox(
                $('.form').html(),
                {
                    'width'             : 950,
                    'height'            : 1100,
                    'autoScale'         : false,
                    'transitionIn'      : 'none',
                    'transitionOut'     : 'none',
                    'hideOnContentClick': false,
                    'onStart': function () {
                      //On Start callback if needed  
                    }
                 }
            );
    }); 
```

[http://jsfiddle.net/RQQ5r/1/](http://jsfiddle.net/RQQ5r/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T17:33:49.323

更新小提琴： http: [//jsfiddle.net/nLcMh/28/](http://jsfiddle.net/nLcMh/28/)
将链接更改为`<a href="#form" class="openform">See Form</a>`

# sql - 如何在 SQL 中显示多个表中的数据

> ID：15601464
> 
> 赞同：4
> 
> 时间：2013-03-24T17:12:04.170
> 
> 标签：sql, database, join

我对 SQL 比较陌生。我试图弄清楚如何满足这个条件：`customer_id, customer_last_name, order_id,order_item_id, product_name`为居住在弗吉尼亚州的任何客户展示。

到目前为止，我有这个，但我不确定如何一起显示这些值。任何帮助将不胜感激。

```
SELECT customer_id, cust_first_name
FROM demo_customers
WHERE cust_state= 'VA'

SELECT order_id
FROM demo_orders
WHERE customer_id= '1' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T17:14:40.557

你需要一个`JOIN`

```
SELECT customer_id, cust_first_name, order_id, order_item_id, product_name
FROM demo_customers
INNER JOIN demo_orders on demo_orders.customer_id = demo_customers.customer_id
WHERE cust_state= 'VA' 
```

# laravel - 设置默认值并在 Laravel 4 表单中使用错误输入？

> ID：15601465
> 
> 赞同：2
> 
> 时间：2013-03-24T17:12:08.450
> 
> 标签：laravel, laravel-4

我正在使用 Laravel 4 及其内置的表单组件。我正在尝试设置它，以便我可以为表单提供一组默认值，但如果用户提交并且验证器失败，它将使用先前输入中的值。然而，下面的代码总是失败。出于某种原因，会话值“threw_error”始终为真，即使表单抛出错误也是如此。

似乎一切都是通过会话完成的，这就是我设置 __old_input 的原因，它是表单使用的内部键。我究竟做错了什么？我应该像这样使用 __old_input，还是有更好的方法来实现这个目标？

我正在使用资源丰富的控制器，所以下面的 index() 是 GET /，而 store() 是 POST /。

```
class Admin_DetailsController extends Admin_BaseController
{
    public function index()
    {           
        $details = Detail::all();

        // this is always true for some reason?
        if(!Session::get('threw_error', false))
        {
            Session::put('__old_input', $details);          
        }

        $data['message'] = Session::get('message');

        $this->layout->nest('content', 'admin.details.index', $data);
    }

    public function store()
    {
        $validator = $this->makeValidator();
        if($validator->fails())
        {
            return Redirect::to('/admin/details')->withErrors($validator)->withInput()->with('threw_error', 1);
        }

        // process normally
    }
}

// in view
{{ Form::text('some_field') }} 
```

**编辑：**尽管 Session::flashInput($details) 比手动调用 __old_input 更好，但此代码或多或少按预期工作。我尝试删除表单中的一些字段以查看它是否存在，这确实有效。换句话说，我认为这是我本地版本的 PHP 或某些配置或其他东西的问题 - 而不是 Laravel 问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T18:38:33.947

从 Laravel 4 开始，您可以使用[Form::model($model, array)](https://github.com/laravel/framework/blob/master/src/Illuminate/Html/FormBuilder.php#L124)而不是`Form::open(array)`

然后您不必将值传递给 Form 辅助方法。它将从模型中获取值，但首先，它会检查是否有 oldInput，因此该值将是旧的。

看看这个[方法](https://github.com/laravel/framework/blob/master/src/Illuminate/Html/FormBuilder.php#L745)。这是一个很小的变化，但真的很聪明:)

但要使其正常工作，您必须使用输入重定向回来

```
Redirect::back()->withInput(); 
```

像这样：

```
public function createNew()
{
    $data = array(
        'model' => new Model();
    );

    $this->layout->nest('content', 'admin.details.form', $data);
}

public function store()
{
    $validator = $this->makeValidator();
    if($validator->fails())
    {
        return Redirect::back()
            ->withErrors($validator)
            ->withInput();
    }
}

// In the view
{{ Form::model($model, array(...)) }}

    // The first time it will be null
    // But if the validation fails, it will be the old value 
    {{ Form::text('some_field', 'Some fields title') }} 

{{ Form::close()}} 
```

PS 而不是使用`Session::flashInput()`，您可以使用`Input::old()`

# java - jar 未加载。请参阅 Servlet 规范 2.3，第 9.7.2 节。违规类：javax/servlet/Servlet.class

> ID：15601469
> 
> 赞同：102
> 
> 时间：2013-03-24T17:12:20.937
> 
> 标签：java, eclipse, maven, tomcat7

我正在运行一个 Maven 项目，它也是一个动态 Web 项目。我在 Maven 中使用了所有 Spring 库。我创建了`web.xml`，但是当我启动我的 Tomcat 7 服务器时，我收到以下消息：

```
INFO: validateJarFile(C:\Users\mibvzd0\workspace\.metadata\.plugins\
org.eclipse.wst.server.core\tmp2\wtpwebapps\hapi_hl7\WEB-INF\lib\
servlet-api-2.4.jar) - jar not loaded.
See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class 
```

我尝试从 中删除 servlet `webapp/lib`，但没有成功。让我知道在我的情况下应该做什么。

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2013-03-24T17:23:52.573

servlet API .jar 文件不能嵌入到 webapp 中，因为很明显，容器的类路径中已经包含这些类：它实现了这个 jar 中包含的接口。

依赖项应该在Maven pom的`provided`范围内，而不是默认范围内：`compile`

```
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>javax.servlet-api</artifactId>
    <version>3.1.0</version>
    <scope>provided</scope>
</dependency> 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-05-23T09:48:27.947

当 servlet api jar 文件已经加载到容器中并且您尝试再次从`lib`目录加载它时，您会收到此警告消息。

> Servlet 规范说不允许在 webapps目录中包含***servlet.jar 。***`lib`

*   `servlet.jar`只需从您的`lib`目录中删除即可摆脱警告消息。
*   如果在`lib`目录中找不到 jar，请扫描构建路径并删除 jar。

* * *

```
C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\project\WEB-INF\lib 
```

如果您正在运行一个 Maven 项目，请将`javax.servlet-api`依赖项更改为`provided`pom.xml 中的范围，因为容器本身已经提供了 servlet jar。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-04-09T03:13:11.593

要修复它，请将**范围**设置为**提供**。这告诉 Maven 使用代码 servlet-api.jar 仅用于编译和测试，但不将其包含在 WAR 文件中。部署的容器将在运行时“提供”servlet-api.jar。

```
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>servlet-api</artifactId>
    <version>2.5</version>
    <scope>provided</scope>
</dependency> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-10T20:23:48.000

您可能会发现以下 Windows 命令行可用于跟踪有问题的 jar 文件。它创建文件夹中所有 jar 中所有类文件的索引。从您部署的应用程序的 lib 文件夹中执行，然后在 index.txt 文件中搜索有问题的类。

```
for /r %X in (*.jar) do (echo %X & jar -tf %X) >> index.txt 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-12-29T15:38:15.773

[Maven 依赖范围](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope)

> **provided**：这很像 compile，但表示您***希望*****JDK**或**容器**在运行时提供依赖项。例如，在为 Java 企业版构建 Web 应用程序时，您可以将***Servlet* API**和相关 Java EE API的依赖设置为**提供**的范围，因为***Web 容器提供了这些类***。此范围仅在编译和测试类路径上可用，并且不可传递。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-16T08:57:55.430

我一直在努力解决这个问题，并且尝试了许多“解决方案”。

然而，最后，唯一有效并且实际上花了几秒钟的时间完成的是：**删除并重新添加新的服务器实例**！

基本上，我在 Eclipse 中的 Servers 下右键单击了我的 Tomcat 服务器并将其删除。接下来，我添加了一个新的 Tomcat 服务器。清理并重新部署了应用程序，我摆脱了这个错误。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-24T15:55:30.150

检查以下目录中的 jar 文件 el-api.jar :C:\apache-tomcat-7.0.39\lib\el-api.jar 如果它存在，则在您的 Web 应用程序 WEB-INF\lib\ 的此目录中el-api.jar jar 应该被移除

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-14T08:59:21.767

当您的 URL 格式错误时，可能会发生此错误。

例如。如果您编写了@WebServlet("login")，则会显示此错误。正确的是@WebServlet("/login")。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-10-02T22:20:41.480

通常，当您看到此消息时，它是良性的。如果它说

```
INFO: validateJarFile(/<webapp>/WEB-INF/lib/servlet-api-2.5.jar) - jar not loaded. 
See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class 
```

这意味着它忽略了您的 servlet-api-2.5.jar，因为 tomcat 已经有该 jar 的内置版本，所以它不会使用您的。通常这不会导致问题。

但是，如果它说`WEB-INF/lib/my_jar.jar - jar not loaded...Offending class: javax/servlet/Servlet.class`

然后你可以做什么（在我的例子中，它是一个带阴影的罐子）运行

$ mvn 依赖：树

并发现您对“某物”具有传递依赖关系，该“某物”依赖于 servlet-api 或类似的 jar（例如：）`tomcat-servlet-api-9.0.0`。因此，在您的 pom 中添加一个排除项，例如：（在我的情况下，tomcat，在您的情况下，可能是其他答案中提到的那些）：

```
 <dependency>
    ...
    <exclusions>
      <exclusion>
        <groupId>org.apache.tomcat</groupId>
        <artifactId>tomcat-servlet</artifactId>
      </exclusion>
    </exclusions> 
</dependency> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-02-20T14:05:09.183

缺少 JAX-WS 依赖库“jaxws-rt.jar”。

去这里[http://jax-ws.java.net/](http://jax-ws.java.net/)。下载 JAX-WS RI 发行版。解压并将“jaxws-rt.jar”复制到Tomcat库文件夹“{$TOMCAT}/lib”。重新启动 Tomcat。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-10-19T19:50:42.350

*排除项和`provided`依赖项在子项目中不起作用。*

如果您在 Maven 项目中使用继承，则*必须*`pom.xml`在父文件中包含此配置。*如果您使用继承*`<parent>...</parent>`，您的 pom.xml中将有一个部分。所以你的父母会有这样的事情：*`pom.xml`*

 *```
<groupId>some.groupId</groupId>
<version>1.0</version>
<artifactId>someArtifactId</artifactId>
<packaging>pom</packaging>
<modules>
    <module>child-module-1</module>
    <module>child-module-2</module>
</modules>
<dependencies>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet.jsp</groupId>
        <artifactId>jsp-api</artifactId>
        <version>2.1</version>
        <scope>provided</scope>
    </dependency>
</dependencies> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-11-24T11:25:55.300

来自[https://stackoverflow.com/a/9941668/778517](https://stackoverflow.com/a/9941668/778517)

我做了`mvn dependency:tree`，结果是

```
(...)
[INFO] +- org.zkoss.zk:zkspring-core:jar:3.2.0:compile
[INFO] |  +- org.springframework:spring-beans:jar:3.0.7.RELEASE:compile
[INFO] |  +- org.springframework:spring-context:jar:3.0.7.RELEASE:compile
[INFO] |  |  \- org.springframework:spring-asm:jar:3.0.7.RELEASE:compile
[INFO] |  +- org.springframework:spring-web:jar:3.0.7.RELEASE:compile
[INFO] |  \- org.reflections:reflections:jar:0.9.5-RC2:compile
[INFO] |     +- com.google.collections:google-collections:jar:1.0:compile
[INFO] |     +- ch.qos.logback:logback-classic:jar:0.9.9:runtime
[INFO] |     |  \- ch.qos.logback:logback-core:jar:0.9.9:runtime
[INFO] |     +- com.google.code.gson:gson:jar:1.4:compile
[INFO] |     \- javax.servlet:servlet-api:jar:2.5:compile
(...) 
```

所以在 pom.xml, zkspring-core 我添加了排除标签

```
(...)
             <groupId>org.zkoss.zk</groupId>
             <artifactId>zkspring-core</artifactId>
             <version>3.2.0</version>
+            <exclusions>
+                <exclusion>
+                <groupId>javax.servlet</groupId>
+                <artifactId>servlet-api</artifactId>
+                </exclusion>
+            </exclusions>
             </dependency>
(...) 
```

在我跑之后`mvn dependency:tree`javax.servlet:servlet-api:jar:2.5:compile 是干净的

```
(...)
[INFO] +- org.zkoss.zk:zkspring-core:jar:3.2.0:compile
[INFO] |  +- org.springframework:spring-beans:jar:3.0.7.RELEASE:compile
[INFO] |  +- org.springframework:spring-context:jar:3.0.7.RELEASE:compile
[INFO] |  |  \- org.springframework:spring-asm:jar:3.0.7.RELEASE:compile
[INFO] |  +- org.springframework:spring-web:jar:3.0.7.RELEASE:compile
[INFO] |  \- org.reflections:reflections:jar:0.9.5-RC2:compile
[INFO] |     +- com.google.collections:google-collections:jar:1.0:compile
[INFO] |     +- ch.qos.logback:logback-classic:jar:0.9.9:runtime
[INFO] |     |  \- ch.qos.logback:logback-core:jar:0.9.9:runtime
[INFO] |     \- com.google.code.gson:gson:jar:1.4:compile
(...) 
```

* * *

## 回答 #13

> 赞同：-4
> 
> 时间：2015-08-13T12:41:33.240

`servlet.jar`从源文件夹中删除，`web-inf/lib`因为它在 tomcat`lib`文件夹中可用，然后它工作正常*

# javascript - javascript 无法读取未定义的属性“宽度”

> ID：15601478
> 
> 赞同：2
> 
> 时间：2013-03-24T17:13:04.940
> 
> 标签：javascript, object, scope

我正在编写一个具有一些独特属性的地形生成器，但我一直在努力解决范围问题。这似乎是一个菜鸟问题，但我已经搜索了档案，但没有找到任何可以说明问题的东西。我在一个函数中有一个函数（我不熟悉这个对象范例），我试图从另一个对象访问一个内部函数。在代码中，我在 Chrome 控制台中收到一个错误，上面写着“未捕获的 TypeError：无法读取未定义的 Waxy.js:45 BoundingBox Waxy.js:45（匿名函数）的属性'宽度'”调用'时，错误发生在最后一行bounds.width' 我需要公开这个函数但是如何？

以下是相关代码：

```
//A wrapper class for an int triple
var Point = (function(dimensions) {
  var x = function() {return dimensions.x || 0}
  var y = function() {return dimensions.y || 0}
  var z = function() {return dimensions.z || 0}
})//end Point

//a working set, rectangular prism
var BoundingBox = (function(dimensions) {
  var lowerBound = function(){return Point(dimensions[0])}
  var upperBound = function(){return Point({x:dimensions[1].x + dimensions[0].x, y:dimensions[1].y + dimensions[0].y, z:dimensions[1].z + dimensions[0].z})}

  var width = function() {return this.upperBound.x - this.lowerBound.x}
  var depth = function() {return this.upperBound.y - this.lowerBound.y}
  var height = function() {return this.upperBound.z - this.lowerBound.z}

  var contains = function(cOffset, cDims) {
    return !((cOffset.x < this.lowerBound.x || cOffset.y < this.lowerBound.y || cOffset.z < this.lowerBound.z) ||
      (cDims.x > this.upperBound.x || cDims.y > this.upperBound.y || cDims.z > this.upperBound.z))
  }
  var intersects = function(iOffset, iDims) {
    return ((iOffset.x >= this.lowerBound.x && iOffset.y >= this.lowerBound.y && iOffset.z >= this.lowerBound.z) ||
      (iDims.x <= this.upperBound.x && iDims.y <= this.upperBound.y && iDims.z <= this.upperBound.z))
  }
  var iterator = function() { return BoxIterator(this) }

})//end BoundingBox

//stores terrain value for each x,y,z in a working set (BoundingBox)
//each property in a list has a value for each node in working set
var MapData = (function(workingSet, properties) {
  var bounds = workingSet
  var props = properties
  var data = []
  //make sure property name is spelled right
  var map = function(x,y,z,property) {return data[x,y,z,props.indexOf(property)] }
  var terrainMap = function(x,y,z) {return map(x,y,z,'terrain')}
  //!isEmpty equiv. isTerrain
  var isEmpty = function(x,y,z) {return map(x,y,z,'terrain')===0}
  var tempMap = function(x,y,z){return map(x,y,z,'temperature')}

})//end MapData

//create a sheet of terrain drops
var DropSheet = (function(opts) {
  var depth = opts.depth
  var width = opts.width
  var rate = opts.rate
  var generate = function() {
    for(var i = 0; i<depth * width; i++) {
      drop[i] = Math.random() <= rate
    }
    return drop
  }
})//end DropSheet

//simulated annealing
var WaxyGenerator = (function(opts) {
  var initialTemp = opts.initialTemp || 1.0
  var fillPercent = opts.fillPercent || 0.35
  var conductivity = opts.conductivity || 0.04
  var freezing = opts.freezing || 0.1
  var floorTemp = opts.floorTemp || 0.0
  var bounds = opts.bounds || BoundingBox([{x:0,y:0,z:0}, {x:80,y:80,z:80}])
  //each property in propertyList has its own map data
  var propertyList = opts.propertyList || ['terrain', 'temperature']
  var materials = opts.materials || ['grass', 'dirt', 'grass_dirt', 'obsidian', 'whitewool', 'brick']
  //map of data
  var data = MapData(bounds, propertyList)
  //create a drop sheet
  var sheetMaker=DropSheet({width:bounds.width, depth:bounds.depth, rate:fillPercent})
  //some functions...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:17:49.257

创建 BoundingBox 时，应使用`new`关键字，如`opts.bounds || new BoundingBox([{x:0,y:0,z:0}, {x:80,y:80,z:80}])`. 此外，要使对象的属性公开而不是私有，您需要将它们分配给`this`，如下所示：

```
this.width = function() {return this.upperBound.x - this.lowerBound.x} 
```

最后，在使用`width`的时候，需要调用它，因为它是一个函数；`bounds.width()`. 你可以像这样使它成为一个变量（如果它不会改变）：

```
this.width = this.upperBound.x - this.lowerBound.x; 
```

但很明显，如果 upperBound 或 lowerBound 发生变化，变量不会随它们而变化。

# php - 未设置引用变量

> ID：15601484
> 
> 赞同：0
> 
> 时间：2013-03-24T17:13:49.473
> 
> 标签：php, reference, unset

我创建了一个类来存储配置值。

我的 Config 类的代码：

```
class Config
{
protected static $params = array();
protected static $instance;

private function __construct(array $params=NULL){
    if(!empty($params)){
        self::$params = $params;
    }
}

public static function init(array $params=NULL){
    if(!isset(self::$instance))
        self::$instance = new Config($params);
}

public static function getInstance(){
    return self::$instance;
}

public static function initialized(){
    return isset(self::$instance);
}

public static function get($name)
{
    $ref = &self::$params;
    $keys = explode('.', $name);
    foreach ($keys as $idx => $key):
        if (!is_array($ref) || !array_key_exists($key, $ref))
            return NULL;
        $ref = &$ref[$key];
    endforeach;
    return $ref;        
}

public function delete($name){
    $ref = &self::$params;
    $keys = explode('.', $name);
    foreach ($keys as $idx => $key):
        if (!is_array($ref) || !array_key_exists($key, $ref))
            return NULL;
        $ref = &$ref[$key];
    endforeach;

    unset($ref);        
}

public function set($name, $value) {

    $ref = &self::$params;
    $keys = explode('.', $name);
    foreach ($keys as $idx => $key) {
        if (!is_array($ref)) {
            return false;
            throw new Exception('key "'.implode('.', array_slice($keys, 0, $idx)).'" is not an array but '.gettype($ref));
        }
        if (!array_key_exists($key, $ref)) {
            $ref[$key] = array();
        }
        $ref = &$ref[$key];
       }

    $ref = $value;
    return true;
}

public function getAll(){
    return self::$params;
}

public function clear(){
    self::$params = array();
} 
```

}

配置方法使用点格式：

```
Config::set("test.item","testdrive"); //store in class, array["test"]["item"]="testdrive" 
```

但是，我试图创建一种删除值的方法，例如：

```
Config::delete("test.item"); 
```

在 get 和 set 方法中，我使用引用变量来查找正确的项目，但我不知道如何删除引用的变量。如果我使用`unset($ref)`，`Config::$params`不受影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:23:25.540

当您这样做时，`$ref = &$ref[$key];`将`$ref`保留 的**值**（不是 ref）`$ref[$key]`，因此最好应用哪个`unset()`将`$ref[$key]`取消其引用，如下所示：

```
public function delete($name){
    $ref = &self::$params;
    $keys = explode('.', $name);
    foreach ($keys as $idx => $key):
        if (!is_array($ref) || !array_key_exists($key, $ref))
            return NULL;
    endforeach;

    unset($ref[$key]);        
} 
```

# android - 如何在没有任何参考的情况下关闭所有打开的警报对话框

> ID：15601490
> 
> 赞同：3
> 
> 时间：2013-03-24T17:14:07.103
> 
> 标签：android, android-alertdialog

我的游戏中有重启选项。但问题是当我按下重新启动时，现有活动中可能有一些打开的警报对话框。

当我按下重新启动时，我想关闭所有打开的 Alertdialog（如果有）。我对打开的警报对话框没有任何参考（可以是 o、1 或多个）。

有什么方法可以随时关闭活动中所有打开的警报对话框而无需任何参考？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T17:34:10.627

首先，您可以将所有对话框分配给一个成员变量，例如

```
private Vector<AlertDialog> dialogs = new Vector<AlertDialog>();

@Override
protected Dialog onCreateDialog(int id) {
  switch (id) {
    case DIALOG_ALERT:
      Builder builder = new AlertDialog.Builder(this);
      ...
      AlertDialog dialog = builder.create();
      dialogs.add(dialog);
      dialog.show();
   }
   return super.onCreateDialog(id);
} 
```

之后，您可以使用对话框的方法来测试对话框是否显示`isShowing()`（查看从类`android.app.Dialog`[http://developer.android.com/reference/android/app/AlertDialog.html](http://developer.android.com/reference/android/app/AlertDialog.html)继承的方法），例如

```
public void closeDialogs() {
   for (AlertDialog dialog : dialogs)
      if (dialog.isShowing()) dialog.dismiss();
} 
```

或者你可能会像*Pragnani*所说的那样完成并重新开始你的活动。取决于你的重启按钮在哪里......

# javascript - HTML：输入类型按钮 - 相当于 defaultValue 的值

> ID：15601499
> 
> 赞同：1
> 
> 时间：2013-03-24T17:14:54.480
> 
> 标签：javascript, button, input

我需要使用 type="button" 更改输入的值。另一个函数通过将“value”属性与“defaultValue”属性进行比较来检查它的值是否已更改（但这不是重点……）。除了 type="button" 的输入之外，这对其他所有内容都适用。由于某种原因，浏览器也会更改默认值。但为什么？

**注意：没有 jQuery！**

这是一个简化的测试代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="de" lang="de">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <script type="text/javascript">
            function d(input)
            {
                alert("value: "+ input.value +"\ndefaultValue: "+ input.defaultValue);
            }
        </script>
    </head>
<body>
    <input type="button" value="0" onclick="d(this); this.value=1; d(this);" />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:00:38.687

Put the definition of d directly in the global scope : [http://jsfiddle.net/UQTY2/34/](http://jsfiddle.net/UQTY2/34/)

```
 window.d = function (input) {
       alert("value: " + input.value + "\ndefaultValue: " + input.defaultValue);
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T18:01:48.180

Nice question! It doesn't work with ***type="reset"*** too.
That's because they don't have specified *data type* and they are just *buttons*.
You can save the first value of the button and then use it. I wrote an example for you:

```
<!DOCTYPE HTML>
<html>
    <head></head>
    <body>
        <input id="test" type="button" value="Old text" onclick="d(this); this.value='Hello, new text';"/>
        <script type="text/javascript">
            var defaultValueOfInput = document.getElementById("test").value;
            function d(button){
                alert("Value: "+button.value+"\ndefaultValue: "+defaultValueOfInput);
            }
        </script>
    </body>
</html> 
```

***EDIT:*** Updated my code.

# sbcl - （列表（列表....））

> ID：15601510
> 
> 赞同：-2
> 
> 时间：2013-03-24T17:15:36.390
> 
> 标签：sbcl

```
(list '+ 3 5) 
```

（+ 3 5）

```
(list (+ 3 5)) 
```

(8)

```
(list (list '+ 3 5)) 
```

((+ 3 5))

为什么第三行的结果与第二行的结果不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T05:11:27.763

在第二个示例中`(+ 3 5)`，计算数字 3 和 5，然后通过将对应于符号 的函数应用于数字 3 和 5 来计算整个表达式`+`。（数字对自己进行计算。这就是为什么你不需要`'`在第一个示例中添加它们。）

在第一个示例中，Lisp 计算`'+`（产生符号`+`）以及 3 和 5，然后将函数`list`应用于它们，这只不过是创建一个（计算的）参数列表。

第三个示例对内部列表执行相同的操作：评估整个​​内容，就像在第一个示例中一样。这导致`(+ 3 5)`. 然后将函数的外部实例`list`应用于此结果，并在其周围包装另一个列表。

而不是第三个例子，也许你想要这个：

```
(list (funcall #'+ 3 5)) 
```

在这种情况下，`#'`告诉 Lisp 去获取与`+`. Common Lisp 通常以与存储符号的常规值不同的方式存储函数。符号的正常求值获得常规符号值，而求值`#'your-symbol`获得关联的函数（如果存在）。

然后`funcall`将获得的函数应用于`#'+`3 和 5。然后将该操作的值传递给`list`, 以生成`(8)`。

（有更精确的方式来表达这些，但我试图将这些想法传达给初学者。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T08:16:23.347

LIST 是一个从它的参数创建列表的函数。当一个 s 表达式被求值时，Lisp 检查它的第一个元素，如果它是一个函数（LIST 是一个函数），它首先遍历列表中的每个元素，对它们求值并将值作为参数传递给函数。

在第二行中，您将内部形式（即（+ 3 5））评估为 8，外部（list）调用创建一个包含 1 个元素的列表。

在第三行中，您对 list 进行了内部调用，以 3 元素列表 (+ 3 5) 作为值。它不是 lisp 将进一步评估的形式，您刚刚创建了以符号 + 作为头部的列表。评估外部列表调用将给出另一个 1 元素列表（其中包含 3 元素列表作为头部）。

希望能帮助到你。

# ruby-on-rails - 在设计上显示用户名

> ID：15601512
> 
> 赞同：0
> 
> 时间：2013-03-24T17:15:39.390
> 
> 标签：ruby-on-rails, devise

我正在为用户使用 Devise，但是当我尝试显示用户名和姓氏时，在视图页面中我只看到 0。

**看法：**

```
 <% if user_signed_in?%>
        <div id="admin_bar">
            <ul>
                <li>Lapini lūgti, <%= current_user.name %> <%= current_user.surname %> administratora panelī!</li>
            </ul>
        </div>  
    <% end %> 
```

**用户迁移：**

```
class CreateUsers < ActiveRecord::Migration
  def change
    create_table :users do |t|

      t.integer :name,      :null => false
      t.integer :surname,   :null => false

      t.timestamps
    end
  end
  def self.down
    drop_table :users
  end
end 
```

将设计添加到我的用户的设计迁移：

```
class AddDeviseToUsers < ActiveRecord::Migration
  def self.up
    change_table(:users) do |t|
      ## Database authenticatable
      t.string :email,              :null => false, :default => ""
      t.string :encrypted_password, :null => false, :default => ""

      ## Recoverable
      t.string   :reset_password_token
      t.datetime :reset_password_sent_at

      ## Rememberable
      t.datetime :remember_created_at

      ## Trackable
      t.integer  :sign_in_count, :default => 0
      t.datetime :current_sign_in_at
      t.datetime :last_sign_in_at
      t.string   :current_sign_in_ip
      t.string   :last_sign_in_ip

      ## Confirmable
      # t.string   :confirmation_token
      # t.datetime :confirmed_at
      # t.datetime :confirmation_sent_at
      # t.string   :unconfirmed_email # Only if using reconfirmable

      ## Lockable
      # t.integer  :failed_attempts, :default => 0 # Only if lock strategy is :failed_attempts
      # t.string   :unlock_token # Only if unlock strategy is :email or :both
      # t.datetime :locked_at

      ## Token authenticatable
      # t.string :authentication_token

      # Uncomment below if timestamps were not included in your original model.
      # t.timestamps
    end

    add_index :users, :email,                :unique => true
    add_index :users, :reset_password_token, :unique => true
    # add_index :users, :confirmation_token,   :unique => true
    # add_index :users, :unlock_token,         :unique => true
    # add_index :users, :authentication_token, :unique => true
  end

  def self.down
    # By default, we don't want to make any assumption about how to roll back a migration when your
    # model already existed. Please edit below which fields you would like to remove in this migration.
  end
end 
```

和我的用户模型：

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, :name, :surname
  # attr_accessible :title, :body
end 
```

我在这里缺少什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T17:20:19.957

通常人们的名字和姓氏是字符串，而不是整数。而不是这个：

```
t.integer :name,      :null => false
t.integer :surname,   :null => false 
```

用这个：

```
t.string :name,      :null => false
t.string :surname,   :null => false 
```

# php - 调用 C++ 与编写 php 函数？

> ID：15601520
> 
> 赞同：-2
> 
> 时间：2013-03-24T17:16:28.410
> 
> 标签：php, c++, exec

我试图思考哪个会更好。我可以只做一些基准测试，但做一两个示例可能不如让其他人了解有用。我正在尝试做一些数学运算，并且正在考虑用 C++ 编写一个程序并使用管道来获取数据。执行 exec 的开销是多少，是否有一般指导方针说明一种方法何时比另一种方法更快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:30:16.637

几周前，我用不同的 for 循环（大约 1x10⁶ 次）测试了 C/Cpp 的速度与 PHP 的速度。

* * *

> 简单的循环，如基本的或稍微复杂的数学运算，只显示出非常小的时间差。我不记得了，但大约 1 到 3 秒（对于 1x10⁶ 操作）。

-

> 对于更复杂的函数，例如应用于大文本或真正大而复杂的数学的字符串操作，时间差更大。在我的情况下，解析一个大文本，这一百万次，时间差大约是 5 - 10 分钟。

**稍微跑题** 关键也是 PHP 函数的重新创建，实现的函数总是更快。如果有某个 PHP 函数，请使用它。

我希望这会有所帮助。问候

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-24T17:24:39.563

PHP 很容易访问。这一切都可以通过网页访问，并且更容易显示。它固有地构建了许多数学函数和数据库，如 MySQL 和 MongoDB，使得返回数据变得非常容易。

# javascript - 使用 api v3 绘制多条编码折线

> ID：15601524
> 
> 赞同：2
> 
> 时间：2013-03-24T17:16:46.083
> 
> 标签：javascript, google-maps-api-3

我有一组编码多段线，从方向服务的结果中检索，并将它们存储在一个 php 数组中。

使用下面的代码，我可以添加一条折线。如何修改它以同时添加多条折线？

```
var code = '_mjsB{qp{LvAe@xImCjGgBf@St@Qf@Un@e@Hm@Pc@VW^MhAc@`B{@lAw@zCyA`@KvEyB`Ao@PQNK';

var paths = google.maps.geometry.encoding.decodePath(code);

var flightPath = new google.maps.Polyline({
  path:pathss,
  strokeColor: "#0000FF",
  strokeOpacity: 1.0,
  strokeWeight: 2
}); flightPath.setMap(map); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:13:29.170

您是否希望所有多段线都具有相同的样式，或者它们是否需要为不同的多段线提供不同的样式？让我们假设它们现在是相同的；让我知道它们是否需要不同，我们可以调整代码。

因此，首先，编写 PHP 代码以生成编码路径的 JavaScript 数组。我会让你整理这部分。

然后，在 JavaScript 中编写一个简单的循环来解码每个路径并将其添加到地图中：

```
// These are the encoded paths generated from PHP
var encodedFlightPaths = [
    '...first-path...',
    '...second-path...',
    '...third-path...'
];

addEncodedPaths( encodedFlightPaths );

function addEncodedPaths( encodedPaths ) {
    for( var i = 0, n = encodedPaths.length;  i < n;  i++ ) {
        addEncodedPath( encodedPaths[i] );
    }
}

function addEncodedPath( encodedPath ) {
    var path = google.maps.geometry.encoding.decodePath( encodedPath );

    var polyline = new google.maps.Polyline({
        path: path,
        strokeColor: "#0000FF",
        strokeOpacity: 1.0,
        strokeWeight: 2
    });
    polyline.setMap( map );
} 
```

# magento - Magento 添加到购物车按钮直接到 magento/index.php/checkout/cart/ 页面

> ID：15601525
> 
> 赞同：1
> 
> 时间：2013-03-24T17:16:53.037
> 
> 标签：magento, magento-1.7

我正在为我的 magento 在线商店使用购物者主题。我正在 Xampp 上开发它。几乎所有的东西都完成了，但是出现了一个新问题。

> 当我单击添加到购物车按钮时，它应该使用 ajax/js 并将产品添加到包中。但它把我带到了这个页面 magento/index.php/checkout/cart

谁能告诉我如何才能留在受人尊敬的页面上并将产品添加到购物车。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:39:06.097

在

管理员 -> 系统 -> 配置 -> （销售）结帐 -> 购物车

设置“添加产品重定向到购物车后”=否

# javascript - 使用字符串作为对象的引用

> ID：15601526
> 
> 赞同：-2
> 
> 时间：2013-03-24T17:17:14.503
> 
> 标签：javascript, jquery, forms, object, reference

我想将几个选项作为对象传递给我的 jQuery 插件。我就是这样做的：

```
$("#contact-form").formValidate({
    contactname: {
        "minLength": 5
    },
    contactemail : {
        "minLength": 4
    },
    contactsubject : {
        "minLength": 10
    },
    contactmessage : {
        "minLength": 25
    }
}); 
```

在我的函数中，我想使用作为表单字段输入 id 的字符串来引用对象。

```
$.fn.formValidate = function(options) {
        //...
        var $this = $(this);
        var id = $this.attr("id");
        var length = options.id.minLength;
       //...
} 
```

此解决方案不起作用。

//编辑

```
(function($, window, document, undefined ) {
    $.fn.formValidate = function(options) {
        /*
         * Deafults values for form validation.
         */
        var defaults = {
            minLength: 5,
            type : "text",
            required : true
        };

        var methods = {
            error : function(id) {
                $(id).css("border", "1px solid red");
            }
        }
        var settings = $.extend({}, defaults, options);
        console.log(options);

        this.children().each(function() {
            var $this = $(this);
            var tagName = $this[0].nodeName;
            var inputType = $(this).attr("type");
            var id = $this.attr("id");
            console.log(id);
            var property = options[id].minLength;

            if (tagName == "INPUT") {
                console.log("property: " + property);
                console.log("--------------------------");
                $(this).keyup(function() {
                    if ($this.val().length > 0) {
                        $this.css("border", "1px solid red");
                    } else {
                        $this.css("border", "1px solid #ccc");
                    }
                });
            } 
        });
        return this;
    };
}(jQuery)); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T17:19:00.200

[JavaScript 对象也可用作关联数组。](http://www.quirksmode.org/js/associative.html)

表单`options.id.minlength`访问名称为字符串文字“id”的属性。

相反，您需要`options[id].minlength`访问名称为变量值的属性的表单`id`。

* * *

此外，`id`可能没有您认为的价值。由于`$this`似乎是对*#contact-form*的引用，`id`因此将具有值“contact-form”。如果您想访问表单内的元素集合，请尝试使用[`$this.find('input,textarea,select')`](http://api.jquery.com/find/).

# artificial-intelligence - 多人游戏的人工智能？

> ID：15601534
> 
> 赞同：-1
> 
> 时间：2013-03-24T17:18:10.133
> 
> 标签：artificial-intelligence, game-engine, multiplayer, depth-first-search, brute-force

我正在考虑为可能有两到四个玩家的游戏构建 AI。在该领域进行一些研究，看起来标准的极小极大方法都不起作用，除非你构建一个“偏执狂”的人工智能，假设所有玩家都想得到它，并且可以有效地被视为一个更大的对手，需要更多转身。

游戏的部分问题在于棋盘非常大，在任何给定的回合中，任何玩家通常都有数百个动作可用。此外，某些移动可能允许玩家再次移动。除非您积极修剪，否则这会使任何广度优先搜索都变得非常昂贵。

就上下文而言，该游戏与跳棋大致相似，但在大约 4 倍大的棋盘上进行。

有适合这种游戏的算法吗？还是我最好的选择是在没有任何移动树搜索的情况下使用启发式算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:54:56.023

你有多个问题，在这里。

简单的问题是，“我该怎么处理这个巨大的移动空间？” 一个很好的答案是，带有板评估启发式的树搜索。基本概念是，由于搜索空间太大而无法直接处理，因此您尽可能向前搜索，并在最后使用您对游戏本身的了解来评估哪些叶子是最好的。

例如，国际象棋中有一条粗略的规则，兵值 1，象和马值 3，车值 5，皇后值 9，所以在搜索过程结束时，您可以使用棋盘评估函数计算双方的点总和并将其用作评估函数。（警告：那个特定的评估函数非常粗略。好的函数将取决于棋子的位置，被检查等。董事会评估函数不是容易弄清楚的。）

困难的问题是，“我如何处理两个以上的玩家？” 这是一个非常难的问题。处理它的一种方法是假设每个玩家都严格要求赢得比赛，并相应地调整搜索算法。这与假设所有对立的参与者都在合作和协调*并不完全相同。*我相信 Russell 和 Norvig 在 AIMA 中关于对抗性搜索的章节中有几页专门介绍了这个想法。不过，AIMA 在这个话题上所拥有的只是多玩家 AI 方向的手势。

多人——也就是说，多智能体——人工智能比单智能体人工智能要困难得多。

# ios - 使 UIPageControl 在每个页面上停止

> ID：15601538
> 
> 赞同：0
> 
> 时间：2013-03-24T17:18:34.170
> 
> 标签：ios, xcode, uiwebview, uiscrollview, uipagecontrol

我有 3 个页面，它们都包含 youtube 视频（网络视图），这些网络视图位于滚动视图内。我使用了一个教程来执行此操作，在该教程中，每次您向任一方向滑动时，它都会在下一页停止（例如在 ios 主屏幕中），但是我的只是继续移动，然后根据滑动动作的时间长度停止。

这是我在.m中的代码：

```
#import "FeaturedVideosViewController.h"

@interface FeaturedVideosViewController ()

@end

@implementation FeaturedVideosViewController

@synthesize scrollView, pageControl;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad {
[super viewDidLoad];

pageControlBeingUsed = NO;
{
    CGRect frame;
    frame.origin.x = self.scrollView.frame.size.width * 3;
    frame.origin.y = 0;
    frame.size = self.scrollView.frame.size;

    UIView *subview = [[UIView alloc] initWithFrame:frame];
        [self.scrollView addSubview:subview];

}

self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width * 3, self.scrollView.frame.size.height);

self.pageControl.currentPage = 0;
self.pageControl.numberOfPages = 3;
[WebView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.youtube.com/embed/wYkIhYtN7yA"]]];
[WebView2 loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.youtube.com/embed/4O7kTOTg1UE"]]];
[WebView3 loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.youtube.com/embed/vmUW41m93oY"]]];
}

- (void)scrollViewDidScroll:(UIScrollView *)sender {
if (!pageControlBeingUsed) {
    // Switch the indicator when more than 50% of the previous/next page is visible
    CGFloat pageWidth = self.scrollView.frame.size.width;
    int page = floor((self.scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
    self.pageControl.currentPage = page;
}
}

- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView {
pageControlBeingUsed = NO;
}

- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView {
pageControlBeingUsed = NO;
}

- (IBAction)changePage {
// Update the scroll view to the appropriate page
CGRect frame;
frame.origin.x = self.scrollView.frame.size.width * self.pageControl.currentPage;
frame.origin.y = 0;
frame.size = self.scrollView.frame.size;
[self.scrollView scrollRectToVisible:frame animated:YES];

// Keep track of when scrolls happen in response to the page control
// value changing. If we don't do this, a noticeable "flashing" occurs
// as the the scroll delegate will temporarily switch back the page
// number.
pageControlBeingUsed = YES;
}

- (void)didReceiveMemoryWarning {
// Releases the view if it doesn't have a superview.
[super didReceiveMemoryWarning];

// Release any cached data, images, etc that aren't in use.
}

- (void)viewDidUnload {
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
self.scrollView = nil;
self.pageControl = nil;
}

@end 
```

例如，我将如何让它在每个页面上停止，例如 ios 主屏幕？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T18:03:58.747

您是否将 UIScrollView 的[pagingEnabled](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html)设置为 YES。

```
- (void)viewDidLoad {
    [super viewDidLoad];
    // EXISTING CODE
    self.scrollView.pagingEnabled = YES;
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-13T06:25:53.580

单击 UIScrollView，然后在右侧（属性检查器）勾选启用分页。或者您也可以以编程方式设置它

```
scrollView.pagingEnabled = yes; 
```

而已...

# postgresql - md5() 适用于文字，但不适用于列数据

> ID：15601551
> 
> 赞同：7
> 
> 时间：2013-03-24T17:19:35.863
> 
> 标签：postgresql, md5

在测试[PostgreSQL 的`md5()`功能](http://www.postgresql.org/docs/9.1/static/functions-string.html)时，我注意到非常奇怪的行为：

**按预期工作**

```
SELECT md5('abc')
--"900150983cd24fb0d6963f7d28e17f72" 
```

**但是在查询中使用 md5() 函数：**

```
SELECT request_id, md5(request_id)
FROM Request
ORDER BY request_id 
```

导致此错误：

```
ERROR:  function md5(integer) does not exist
LINE 1: SELECT request_id, md5(request_id)
                           ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.

********** Error **********

ERROR: function md5(integer) does not exist
SQL state: 42883
Hint: No function matches the given name and argument types. You might need to add explicit type casts.
Character: 20 
```

如果该函数在第一个查询中起作用，它怎么可能*不存在？***我究竟做错了什么; `md5()`在 SELECT 查询中使用的正确方法是什么？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-24T17:21:01.407

该函数需要文本作为参数。投射它：

```
SELECT request_id, md5(request_id::text)
FROM Request
ORDER BY request_id 
```

不存在名为 md5 的接受整数参数的函数，但您可以创建它：

```
create function md5(integer)
returns text as $$

select md5($1::text);

$$ language sql immutable; 
```

那么md5会有3个签名：

```
=> \df md5
                          List of functions
   Schema   | Name | Result data type | Argument data types |  Type  
------------+------+------------------+---------------------+--------
 pg_catalog | md5  | text             | bytea               | normal
 pg_catalog | md5  | text             | text                | normal
 public     | md5  | text             | integer             | normal 
```

正如对此答案的评论中所指出的，整数文本表示的 md5 哈希可能不是您想要的。要获得二进制的哈希，`bytea`应使用接受参数的 md5 签名：

```
select md5(('\x' || right('0000000' || to_hex(200), 8))::bytea);
               md5                
----------------------------------
 b7b436d004c1cc0501bee9e296d2eaa4 
```

并替换之前创建的函数：

```
create or replace function md5(integer)
returns text as $$

select md5(('\x' || right('0000000' || to_hex($1), 8))::bytea);

$$ language sql immutable; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T22:37:28.233

一般来说，取整数的 md5 没有多大意义。您似乎试图掩盖一个序列，使其按顺序显示为半随机。如果是这样，有一个更好的方法：

使用[`pseudo_encrypt`PostgreSQL wiki 上列出的函数](http://wiki.postgresql.org/wiki/Pseudo_encrypt)。这比尝试取整数的 md5 然后（大概）截断它要明智得多。

上面*没有*提供强大的加密随机性，但您的方法也没有。如果您出于安全原因需要您的请求 ID 真正不可预测，而不仅仅是一目了然，您应该使用强大的加密随机数生成器，并准备好使用时间窗口等处理重复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T17:22:16.910

这个错误有点误导；该`md5()`函数存在，只是不适用于*整数*。使用嵌入式`CAST()`函数将整数字段转换为文本，它将起作用：

```
SELECT request_id, md5(CAST(request_id AS TEXT))
FROM Request
ORDER BY request_id

--1;"c4ca4238a0b923820dcc509a6f75849b"
--2;"c81e728d9d4c2f636f067f89cc14862c"
--etc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-08T17:41:15.487

> 我只是想生成一个不明显、不重复的值，可用于查找记录。

你需要的是一个双射哈希。我`CRC`在自定义 C 函数中使用 CPU 函数。对于没有该功能的 CPU，可以使用查找表。

这种方法保证为每个唯一的 32 位输入提供一个唯一的“随机查找”数字。

如果您知道如何生成 C 函数（不是微不足道的），那么查找如何使用 CRC 将是一项简单的任务。

# c# - C# - 使用委托从数组中删除元素

> ID：15601555
> 
> 赞同：-3
> 
> 时间：2013-03-24T17:20:11.533
> 
> 标签：c#, arrays

问题解决了。从我的数组中创建了一个新列表，并删除了列表中的元素，并将我的初始数组设置为我的 list.ToArray。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T17:28:01.037

是的，你不能删除`element`，`tab`因为`tab`被声明为不支持方法的*数组`[]`*`Remove`，如果可能，声明`tab`为，这样你就`List<T>`可以调用`Remove``List<T>`

# php - codeigniter如何在连接表中上传图像

> ID：15601561
> 
> 赞同：0
> 
> 时间：2013-03-24T17:20:27.503
> 
> 标签：php, image, codeigniter, upload, photo

好的，所以我搜索并尝试了谷歌的所有内容，但我被卡住了。我正在尝试在我现有的 CodeIgniter 项目上使用上传功能。我想上传它们，然后以 64x64 像素大小在我的视图上显示它们，而实际大小为 320x320 像素。

我加入了两个表以从另一个表中获取“名称”字段，因此当我需要添加新数据时，我可以在我的添加数据视图中显示它们，并且我设法做到了，但我对如何放置上传代码/函数因为我有这个“add_data”函数，我用它来保存我在“tambah_mahasiswa”视图中发布的内容到数据库。我试图将 'do_upload' 函数与 'add_data' 函数结合起来，但它仍然无法正常工作。我该如何解决这个问题？

这是我在 tb_mahasiswa 表上的照片字段：

```
Field   Type        Attributes
photo   blob        BINARY 
```

这是我的控制器代码 = 'controlpanel' ：

```
class Controlpanel extends CI_Controller
{
    private $path_uploads;
    private $path_uploads_thumb;
    function __construct()
    {
        parent::__construct();
                $this->cek_login();
        $this->load->model('modelku');

        $this->path_uploads = realpath( APPPATH . '../uploads/');
        $this->path_uploads_thumb = APPPATH . '../uploads/thumbnail';
    }

function add_data()
    {
        $this->load->library('form_validation');
        $this->load->helper('url');

        $data['prodi']=$this->modelku->get_prodi_all();

        $this->form_validation->set_rules('nim','Nomor Induk Mahasiswa','required|exact_length[7]');
        $this->form_validation->set_rules('nim','Nomor Induk Mahasiswa','required|integer');
        $this->form_validation->set_rules('nama','Nama Lengkap Mahasiswa','required');
        $this->form_validation->set_rules('prodi','Prodi','required');
        $this->form_validation->set_rules('tanggal_lahir','Tanggal lahir','required');
        $this->form_validation->set_rules('email','Email','required|valid_email');
        $this->form_validation->set_rules('jenis_kelamin','Jenis Kelamin','required');
        $this->form_validation->set_rules('alamat','Alamat','required');
        $this->form_validation->set_rules('telepon','Telepon','required');

        if($this->form_validation->run())
        {
                        $nim = $this->input->post('nim');
                        $nama = $this->input->post('nama');
                        $prodi = $this->input->post('prodi');
                        $tanggal_lahir = date('Y-m-d',strtotime($this->input->post('tanggal_lahir')));
                        $email = $this->input->post('email');
                        $jenis_kelamin = $this->input->post('jenis_kelamin');
                        $alamat = $this->input->post('alamat');
                        $telepon = $this->input->post('telepon');
                        $photo = $this->input->post('photo');

                        $data_mahasiswa = array('nim'=>$nim,'nama'=>$nama,'prodi'=>$prodi, 'tanggal_lahir'=>$tanggal_lahir,
                                                'email'=>$email, 'jenis_kelamin'=>$jenis_kelamin,'alamat'=>$alamat,
                                                'telepon'=>$telepon,'photo'=>$photo);
                        ('controlpanel/index');
                } else {
            $this->load->view("tambah_mahasiswa",$data);
            }
    }

function do_upload()
    {
        $config['upload_path'] =  $this->path_uploads;
        $config['allowed_types'] = 'gif|jpg|png';
        $config['max_size'] = '100';
        $config['max_width']  = '1024';
        $config['max_height']  = '768';

        $this->load->library('upload', $config);

        if ( ! $this->upload->do_upload())
        {
            $error = array('error' => $this->upload->display_errors());

            $this->load->view('tambah_mahasiswa', $error);
        }
        else
        {
            $upload_data = $this->upload->data();
            $this->load->view('controlpanel_view', $data);
            $file_name = $upload_data['file_name'];
            $config['image_library']='gd2';
            $config['source_image']=$this->path_uploads . '\\' . $file_name;
            $config['new_image']=$this->path_uploads_thumb . $file_name;
            $config['create_thumb']=TRUE;
            $config['maintain_ratio']=TRUE;
            $config['width']=320;
            $config['height']=320;

            $this->load->library('image_lib',$config);

            if(!$this->image_lib->resize())
            {
                echo $this->image_lib->display_errors();
            } else {
                echo "Berhasil di unggah!";
            }
        }
    } 
```

这是我的观点 = 'tambah_mahasiswa' ：

```
<!DOCTYPE html>
<html>
<head>
<title>PHP Framework</title>
    <link rel="stylesheet" href="<?php echo base_url() ?>asset/css/style.css"/>
</head>
<body>

<h3>Tambah Data Mahasiswa</h3>

    <?php echo form_open('controlpanel/add_data'); ?> 
    <?php echo form_open_multipart('controlpanel/do_upload'); ?> 

<table width="30%" border="0">
    <tr>
    <td>NIM <sup>*</sup></td>
    <td>:</td>
        <td>
            <?php echo form_input(array('name'=>'nim', 'maxlenght'=>'7', 'size'=>'10'),set_value('nim'))?> <?php echo form_error('nim','<span style="color:red;"><small>','</div></span>') ?> </br> 
        </td>
    </tr>

    <tr>
    <td>Nama <sup>*</sup></td> 
    <td>:</td>
        <td>
            <?php echo form_input(array('name'=>'nama', 'maxlenght'=>'35', 'size'=>'15'),set_value('nama'))?> <?php echo form_error('nama','<span style="color:red;"><small>','</div></span>') ?> </br>
        </td>
    </tr>

        <td>Prodi <sup>*</sup> </td> 
    <td>:</td>
    <td>
        <?php
                    foreach($prodi as $item_prodi)
                    {
                        $array_prodi[$item_prodi->kode]=$item_prodi->namaprodi;
                    }
                echo form_dropdown('prodi',$array_prodi);
                ?>
    </td>
    </tr>

    <tr>
    <td width='30%'>Tanggal Lahir <sup>*</sup></td> 
    <td>:</td>
        <td>
            <?php echo form_input(array('name'=>'tanggal_lahir', 'maxlenght'=> '10', 'placeholder'=>'yyyy-mm-dd', 'size'=>'15', 'id'=>'tanggal_lahir'),set_value('tgl_lahir'))?> <?php echo form_error('tgl_lahir','<span style="color:red;"><small>','</small></span>') ?>
        </td>
    </tr>

    <tr>
    <td>Jenis Kelamin <sup>*</sup></td> 
    <td>:</td>
        <td>
            <?php echo form_radio('jenis_kelamin', 'L', TRUE)?> Laki-laki
            <?php echo form_radio('jenis_kelamin', 'P')?> Perempuan
        </td>
    </tr>

    <tr>
    <td>Alamat <sup>*</sup></td> 
    <td>:</td>
        <td>
            <?php echo form_textarea(array('name'=>'alamat','rows'=>'10','cols'=>'30'),set_value('alamat'))?> <?php echo form_error('alamat','<span style="color:red;"><small>','</small></span>') ?> </br>
        </td>

    </tr>

    <tr>
    <td>Propinsi </td> 
    <td>:</td>
        <td>
        <?php echo form_input(array('name'=>'propinsi', 'maxlenght'=>'15', 'size'=>'17','id'=>'propinsi'))?> <?php echo form_error('propinsi','<span style="color:red;"><small>','</small></span>') ?> </br>
    </td>
    </tr>

    <tr>
    <td>No. Telp </td> 
    <td>:</td>
        <td>
        <?php echo form_input(array('name'=>'telepon', 'maxlenght'=>'15', 'size'=>'17'))?> <?php echo form_error('telp','<span style="color:red;"><small>','</small></span>') ?> </br>
    </td>
    </tr>

    <tr>
    <td>Email <sup>*</sup> </td> 
    <td>:</td>
        <td>
        <?php echo form_input(array('name'=>'email', 'maxlenght'=>'30','placeholder'=>'name@example.com', 'size'=>'17'),set_value('email'))?> <?php echo form_error('email','<span style="color:red;"><small>','</small></span>') ?> </br>
    </td>
    </tr>

    <tr>
    <td>Photo </td> 
    <td>:</td>
        <td>
        <?php echo form_input(array('name'=>'photo', 'type'=>'file', 'size'=>'20'),set_value('photo')) ?>
        </br>
    </td>
    </tr>

    <tr>
    <td>
        <?php echo form_submit(array('type'=>"submit", 'name'=>"mysubmit", 'value'=>"Save"))?>
    </td>
    </tr>

    <?php echo form_close();?>

</table>
</body>
</html> 
```

PS：我在我的项目中为图像文件创建了文件夹：

```
 - myproject\uploads\thumbnail 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T19:00:58.717

我可以从上面给出的代码中看到，在控制器类“Controlpanel”中，您已经定义了一个函数 do_upload()。

但是，在同一个控制器函数 do_upload 中，您正在调用具有不同类名“upload”的函数，这是一个库类。

**$this->upload->do_upload()**

您需要将控制器类名称“Controlpanel”更改为“上传”，或者您可以尝试将当前控制器类中的 do_upload 函数的名称更改为其他名称，然后您可以按照当前代码继续操作。

您还应该确保视图页面上的表单名称应该与 do_upload 函数中的表单名称相同。

# windows - 在 AutoIt for Windows 7 中，如果一段时间没有用户交互，我如何只运行脚本？

> ID：15601562
> 
> 赞同：-1
> 
> 时间：2013-03-24T17:20:30.097
> 
> 标签：windows, scripting, autoit

我正在尝试制作一个脚本，如果用户在一段时间内没有执行任何操作（键盘或鼠标），则窗口焦点会切换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:17:33.770

当用户空闲 30 秒时，此脚本将激活记事本：

```
#include <Timers.au3>

while (true)
    $idleTime = _Timer_GetIdleTime()

    if $idleTime > 30000 and not WinActive("Untitled - Notepad") Then
        WinActivate("Untitled - Notepad")
    EndIf

    Sleep(1000)
WEnd 
```

# regex - 正则表达式空格词边界

> ID：15601563
> 
> 赞同：5
> 
> 时间：2013-03-24T17:20:37.050
> 
> 标签：regex

我有这个表情

```
\b[A-Za-z]+\b 
```

如果我给`abc@de mnop`，它匹配`abc`, `de`and `mnop`，但我希望它只匹配`mnop`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-24T17:24:22.330

`\b`是单词边界。

所以，`\b`类似于`[^a-zA-Z0-9_]`ie`\b`会**检查**除了`word`

您可以改用此正则表达式

```
(?<=\s|^)[a-zA-Z]+(?=\s|$)
-------- --------- ------
   |         |       |->match only if the pattern is followed by a space(\s) or end of string/line($)
   |         |->pattern
   |->match only if the pattern is preceded by space(\s) or start of string\line(^) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-24T17:26:27.780

`\b`意味着`(?:(?<!\w)(?=\w)|(?<=\w)(?!\w))`。这将匹配字母和之间的位置`@`。

你可以写：

```
(?<!\S)[A-Za-z]+(?!\S) 
```

`(?!\S)`相当于`(?=\s|$)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-09T19:31:33.367

`Regex word boundary doen't match(\b) matching and whitespace`

样品中只有白色是

```
abc@de mnop   
      ^ 
```

尝试`\s([A-Za-z]+)\b`

`\s`锚点在哪里，根本不是边界

# css - 有没有办法让网站在没有媒体查询的情况下做出响应

> ID：15601567
> 
> 赞同：3
> 
> 时间：2013-03-24T17:20:53.097
> 
> 标签：css, media-queries

我有一个博客：[创意博客技巧](https://www.seebeetee.com "认知行为疗法")。我试图让它响应，但我发现它太复杂而无法与之交互`media queries`，它确实需要很多时间。

我正在寻找一种更简单的方法来使我的网站具有响应性。有什么方法可以在不使用的情况下使网站响应`media queries`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T17:36:08.677

还有百分比宽度、最大宽度、最小宽度和类似的 css 命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T17:30:06.223

我认为没有媒体查询的唯一方法是使用 Javascript。

通过“javascript 响应式布局”进行谷歌搜索，我发现[ResponseJS](http://responsejs.com/)似乎无需处理媒体查询。

我还建议您寻找一些 CSS 框架，例如[Columnal](http://www.columnal.com/)和[1140](http://cssgrid.net/)，它们可以让您在设计响应式布局时更加轻松。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-22T20:56:46.723

当然，您可以在没有媒体查询的情况下使您的网站具有响应性。

不仅如此，您使用媒体查询的次数越少，您的网站就越容易维护。设计一个网站以使用更少的媒体查询是一个很好的设计目标。这可能很棘手，但绝对值得付出努力。

我强烈建议您研究 css **flex**，但您仍然可以使用浮点数、内联块、百分比。这不是太难的 css 明智的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-22T20:44:49.130

您可以使用 Javascript onresize 和 onload 并检查文档宽度并相应地更改 body 元素（或其他元素）上的类。

我认为媒体查询不太容易出错，尽管您对查询语法的痛苦和耗时是正确的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T19:48:29.387

我完全同意，您可能会对仅使用百分比可以完成的事情感到惊讶。但我建议设置视口大小： `<meta name=viewport" content="width=device-width, initial-scale=1">` 使用视口标签和百分比是一个很好的开始方式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-14T05:31:54.770

如果不是媒体查询，那么您可以使用引导程序、骨架等框架。还有通量和其他 css 以及以 % 为单位的宽度和高度

# c++ - 需要 std::unordered_map 构造函数的示例

> ID：15601568
> 
> 赞同：1
> 
> 时间：2013-03-24T17:20:53.360
> 
> 标签：c++, c++11, constructor, unordered-map

假设我使用自己的类作为`std::unordered_map`

```
class MyClass {
public:
    int a, b;
} 
```

[www.cplusplus.com](http://www.cplusplus.com/reference/unordered_map/unordered_map/unordered_map/)列出了以下可以使用的构造函数：

```
explicit unordered_map ( size_type n,
                         const hasher& hf = hasher(),
                         const key_equal& eql = key_equal(),
                         const allocator_type& alloc = allocator_type() ); 
```

你能举个例子说明我如何使用上面的构造函数来构造我的所有参数`std::unordered_map<MyClass, std::string>`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T17:39:17.007

有[三个 std::unordered_map 构造函数](http://en.cppreference.com/w/cpp/container/unordered_map/unordered_map)，它们将哈希和相等函子的实例作为参数。此示例显示如何使用其中之一：

```
struct MyHash {
  std::size_t operator()(const MyClass& k) const { .... }
};

struct MyEqual {
  bool operator()(const MyClass& lhs, const MyClass& rhs) const { .... }
};

std::unordered_map<MyClass, std::string, MyHash, MyEqual> m(42, // bucket count 
                                                            MyHash(), 
                                                            MyEqual()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T17:26:08.853

编写一个能够用作内部键的类`unordered_map`不是免费的，他们需要一个自定义的哈希对象。

```
struct MyHash {
  std::size_t operator()(const MyClass& k) const
  {
    // You may want to use a better hash function
    return static_cast<std::size_t>(k.a) ^ static_cast<std::size_t>(k.b);
  }
}; 
```

然后，将哈希函数作为模板参数传递给映射（它使用默认构造函数构造哈希对象，因此您无需手动传递）：

```
std::unordered_map<MyClass, std::string, MyHash> m; 
```

或者，您可以在命名空间内提供散列函数`std`。

```
namespace std {
  template <>
  struct hash<MyClass> {
    std::size_t operator()(const MyClass& k) const; // same as before
  };
} 
```

现在，它完全符合预期：

```
std::unordered_map<MyClass, std::string> m; 
```

除了对 的特殊要求外`unordered_map`，您还需要定义一个`operator==`. 即使这也可以通过模板参数进行自定义，我建议将其编写为全局函数。

# c++ - 邻接表实现

> ID：15601570
> 
> 赞同：0
> 
> 时间：2013-03-24T17:20:59.647
> 
> 标签：c++, arrays

我正在尝试实现一个简单的邻接列表。我知道数组的索引是此时顶点的键。

例如：如果我有格式的边缘：（开始，结束，成本）（1,2,4）（2,3,5）（1,3,27）（3,4,8）

我会有一个数组

## [0] -> 空

## [1] -> 2|4 -> 3|27 -> 空

## [2] -> 3|5 -> 空

## [3] -> 4|8 -> 空

一个问题是持有边缘的容器有指针，但插入其中的元素（边缘）没有。我迷路了。

编辑这篇文章，因为我不知道如何在评论中添加代码。

```
struct Node{
       Edge *head;
       Node *next;
}

Node *root;

void adjacencyList::insert(const Edge &edge)
{

  if(root == NULL)
   {
      root = new Node;
      root->head = edge;
    }
  else
    {
      while(root != NULL)
        {          
          root = root->next;
          if(root == NULL);
          {
            root = new Node;
            root->head = edge;
            root = root ->next;

          }
        }
     }
} 
```

边缘对象有 3 个属性（源、目标、成本） 现在它什么也不做，只是在链表中不断添加边缘。如何按来源分隔列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T17:59:06.250

邻接表不一定是链表。即使是这样，*也不要自己*实现（侵入式）链表，使用现有的实现。

但是，我们走了；只有一个（节点，成本）对的向量：

```
typedef std::pair<int, int> weighted_node_t;
typedef std::vector<std::vector<weighted_node_t>> graph_t; 
```

然后您可以如下表示您的图形（使用 C++11 初始化语法）：

```
graph_t graph{
    {},
    {{2, 4}, {3, 27}},
    {{3, 5}},
    {{4, 8}}
}; 
```

现在让我们假设您想要遍历图形（深度优先搜索），您将执行以下操作（再次，C++11 语法，因为它更简洁）：

```
void dfs(graph_t const& graph, std::vector<bool>& visited, int node) {
    visited[node] = true;
    for (auto const& neighbor : graph[node])
        if (not visited[neighbor])
            dfs(graph, visited, neighbor.first);
} 
```

并这样称呼它：

```
std::vector<bool> visited(graph.size());
dfs(graph, visited, 1); 
```

# javafx-2 - JavaFX 2 裁剪 Shape 对象

> ID：15601572
> 
> 赞同：0
> 
> 时间：2013-03-24T17:21:02.960
> 
> 标签：javafx-2, shape

我需要创建其中有空白空间的 Shape 对象。一个例子可以在下面看到： ![在此处输入图像描述](../Images/80d8392b9c93bc0e3ba3601844916c83.png)

目前，空白区域是另一个白色矩形，尽管我实际上希望它为空 - 请参阅蓝色矩形后面。那可能吗？我找不到任何解决方案来实现这种效果。这是我的代码：

```
package StackPaneTest;

import javafx.application.Application;
import javafx.fxml.FXML;
import javafx.fxml.FXMLLoader;
import javafx.fxml.Initializable;
import javafx.scene.Group;
import javafx.scene.Node;
import javafx.scene.Scene;
import javafx.scene.layout.StackPane;
import javafx.scene.shape.Rectangle;
import javafx.scene.shape.Shape;
import javafx.stage.Stage;

import java.io.IOException;
import java.net.URL;
import java.util.ResourceBundle;

public class StackedPaneController extends Application
        implements Initializable {

    @FXML //  fx:id="panelBlock"
    private StackPane panelBlock; // Value injected by FXMLLoader
    @FXML
    private Rectangle body;
    @FXML
    private Rectangle redBox;

    public static void main(String[] args) {
        launch(args);
    }

    @Override // This method is called by the FXMLLoader when initialization is complete
    public void initialize(URL fxmlFileLocation, ResourceBundle resources) {
        Shape newShape = Shape.subtract(body, redBox);
        panelBlock.getChildren().add(0, newShape);
        panelBlock.getChildren().remove(body);

    }

    @Override
    public void start(Stage primaryStage) {
        primaryStage.setTitle("The test");
        Group root = new Group();

        try {
            root.getChildren().add((Node) FXMLLoader.load(getClass().getResource("StackedPaneBlock.fxml")));
        } catch (IOException e) {
            e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
        }

        Scene scene = new Scene(root, 400, 400);
        primaryStage.setScene(scene);
        primaryStage.show();

    }
} 
```

FXML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.paint.*?>
<?import javafx.scene.shape.*?>
<?import javafx.scene.text.*?>

<AnchorPane id="AnchorPane" maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="400.0" prefWidth="600.0" xmlns:fx="http://javafx.com/fxml" fx:controller="StackPaneTest.StackedPaneController">
  <children>
    <StackPane fx:id="panelBlock" layoutX="136.0" layoutY="74.0" prefHeight="126.0" prefWidth="185.0">
      <children>
        <Rectangle fx:id="body" arcHeight="5.0" arcWidth="5.0" fill="DODGERBLUE" height="200.0" stroke="BLACK" strokeType="INSIDE" width="200.0" />
        <Rectangle fx:id="redBox" arcHeight="5.0" arcWidth="5.0" fill="RED" height="48.99658203125" stroke="BLACK" strokeType="INSIDE" width="59.0" />
      </children>
    </StackPane>
  </children>
</AnchorPane> 
```

我的代码输出如下： ![在此处输入图像描述](../Images/904f6832b4b5809f6193dc5096d68d02.png)

如您所见，减去的形状从原始位置移动。我真的需要用 FXML 来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T18:47:41.240

Shape.subtract 应该可以正常工作：

```
public class Test extends Application {
    @Override
    public void start(final Stage stage) throws Exception {
        final Rectangle outer = new Rectangle(0,0,200,200);
        final Rectangle inner = new Rectangle(50,50,100,100);

        final Shape result = Shape.subtract(outer, inner);
        result.setFill(Color.DODGERBLUE);

        final Group group = new Group();
        group.getChildren().add(result);

        stage.setScene(new Scene(group));
        stage.show();
    }

    public static void main(String[] args) {
        Application.launch(args);
    }
} 
```

上面的清单会产生您想要的结果。如果它不起作用，请发布具体的错误消息/结果的屏幕截图。

# javascript - 如何在通过 Ajax 加载的文件内容上使用 xpath？

> ID：15601574
> 
> 赞同：1
> 
> 时间：2013-03-24T17:21:21.647
> 
> 标签：javascript, jquery, ajax

典型：

```
 $.ajax({
            url: schedule.link,
            context: document.body
        }).done(function(data) {
            // tutt ok, quindi scrivo il file
            console.log (data);
        }).error(function (jqXHR, textStatus, errorDescription ) {
            // segnalo il problema
            logga("Error " + error.description);
        }); 
```

**如何在`data`通过 ajax 接收时使用 xPath？**

我需要简单地获取`//ul.result`xpath

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:07:43.677

你必须这样做（如果你使用 jQuery）：

```
$.ajax({
        url: schedule.link,
        context: document.body
    }).success(function(data) {
        // gives you the html inside the matching expression
        alert($('xpathexpr', data).html());
    }).error(function (jqXHR, textStatus, errorDescription ) {
        // segnalo il problema
        logga("Error " + error.description);
    }); 
```

# model - 跨集合的多个关系加入

> ID：15601575
> 
> 赞同：1
> 
> 时间：2013-03-24T17:21:23.583
> 
> 标签：model, laravel, laravel-4, eloquent

鉴于以下要点：[https ://gist.github.com/atrauzzi/6674488eb4fbd7a45671](https://gist.github.com/atrauzzi/6674488eb4fbd7a45671)

`Users have and belong to many Applications.`

`Applications have many PushMessages.`

`PushMessages belong to one Application.`

我希望能够为与用户相关的每个应用程序获取所有 PushMessage。

从`QueryCode.php`要点来看，我必须改变什么才能让事情正常进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T20:11:30.350

```
PushMessage::leftJoin(Application::getTable(), Application::getTable().'.id', '=', PushMessage::getTable().'.application_id')->leftJoin(...)->where(Application::getTable().'.user_id','=',1)->select(PushMessage::getTable().'.*')->get(); 
```

Eloquent 实际上只是将方法调用卸载到 fluent 查询构建器。虽然，我建议将此特定查询包装在一个方法中，或将其放入存储库中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T17:30:52.487

我会使用 PushMessage 类来查询它们。

```
$user = User::find(Auth::user()->id);
$pushMessages = PushMessage::whereIn('application_id', $user->applications()->lists('id')); 
```

# c# - 查询不同实体中的一种类型

> ID：15601576
> 
> 赞同：1
> 
> 时间：2013-03-24T17:21:26.363
> 
> 标签：c#, nhibernate, queryover

这是我的域模型的一小部分摘录：

```
public class Chain
{
    public IList<Product> Products { get; set; }
}

public class Store
{
    public Chain Chain { get; set; }
    public IList<Product> Products { get; set; }
} 
```

现在我需要在`Product`in`Store` **和**关联的`Chain`. 问题是如何扩展对存储在所有物中的产品的查询`Chain`？

这是我到目前为止所拥有的：

```
var subQuery = QueryOver.Of<Store>()
    .Where(s => s.Id == searchCriteria.StoreId)
    .Select(s => s.Id);

Store storeAlias = null;
var query = _session.QueryOver<Product>()
    .JoinAlias(p => p.Stores, () => storeAlias)
    .WithSubquery.WhereProperty(() => storeAlias.Id).In(subQuery);
    //// some more clauses... 
```

我怎样才能做到这一点？请注意：`Chain`财产`Store`可能是`null`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:26:54.500

我相信这应该有效。我没有在本地数据库上尝试过，但应该让你朝着正确的方向前进。

```
Product product = null;
Store store = null;
Chain chain = null;

//01\. Load Products from Store

var productsFromStores 
     = QueryOver.Of(() => product)
             .JoinAlias(() => product.Stores, () => store)
             .Where(() => store.Id == searchCriteria.StoreId)
             .Select(Projections.Distinct(Projections.Id()));

//02\.  If Chain DOES NOT refer Store 
  var productFromChains 
         = QueryOver.Of(() => store)
             .JoinAlias(() => store.Chain, () => chain)
             .JoinAlias(() => chain.Products, () => product)
             .Where(() => store.Id == StoreId)
             .Select(Projections.Distinct(
                     Projections.Property(() => product.Id)));

//03\. Load Products from present either in the Store and or the chains
var products 
     = session.QueryOver(() => product)
       .Where(
             Restrictions.Or(
             Subqueries.WhereProperty(() => product.Id)
                                     .In(productsFromStores),
             Subqueries.WhereProperty(() => product.Id)
                                     .In(productFromChains))); 
```

仅供参考：请注意，这可能不是处理您的查询的最理想方式。当我看到使用`IN ()`和子查询时，我总是畏缩不前。

如果 Chain 中确实有一个 Store，那么 //02 可以写成

```
//Load Products from Chains
//02\.  If Chain DOES refer to a Store 
  var productFromChains 
         = QueryOver.Of(() => chain)
              .JoinAlias(() => chain.Store, () => store)
              .JoinAlias(() => chain.Products, () => product)
              .Where(() => store.Id == searchCriteria.StoreId)
              .Select(Projections.Distinct(
                           Projections.Property(() => product.Id))); 
```

# ruby - 我不能让程序通过测试

> ID：15601580
> 
> 赞同：-3
> 
> 时间：2013-03-24T17:21:51.067
> 
> 标签：ruby

我不明白为什么程序测试失败并且找不到错误。也许其他人可以给我一个提示？这是程序代码：

```
class Fiction_Generator
  def location_adj
    location_adj = ["alternative-timeline", 
       " Tolkeinesque", 
       " Neo-noir", 
       " Alternate-history", 
       " Ancient", 
       " Post-apocalyptic", 
       " Dystopian", 
       " Metaphorical", 
       " Anachronistic", 
       " Leather-clad" , 
       " Coal-powered", 
       " Dragon-filled"]
    item_adj = location_adj[rand(location_adj.length)]
  end
  def location_noun
     location_noun = [
       " America",
       " Japan",
       " Soviet Russia",
       " Steampunk Britain",
       " Medieval Europe",
       " Egyptian empire",
       " Atlantis",
       " Terraformed Mars",
       " Antarctica",
       " One-way spaceflight",
       " Outer Rim world",
       " Set from Road Warrior"]
     item_noun = location_noun[rand(location_noun.length)]
  end
  def protagonist
     protagonist = [
       " Ferris Bueller wannabe",
       " student of metaphysics",
       " milquetoast office drone",
       " schlub with mild <abbr>OCD</abbr>",
       " farm boy with dreams",
       " techno-obsessed geek",
       " brooding loner",
       " wisecracking mercenary",
       " idealistic revolutionary",
       " journeyman inventor",
       " collector of oddities",
       " rocketman of the 24th century"]
     item_protagonist = protagonist[rand(protagonist.length)]
  end
  def discovery
     discovery = [
       " magic ring",
       " arcane prophecy",
       " dusty tome",
       " crazy old woman",
       " alien artifact",
       " enchanted sword",
       " otherworldly portal",
       " dream-inducing drug",
       " encrypted data feed",
       " time-traveling soldier",
       " exiled angel",
       " talking fish"]
     item_discovery = discovery[rand(discovery.length)]
  end
  def adversary
    adversary = [
       " a megalomaniacal clown",
       " a government conspiracy",
       " a profit-obsessed corporation",
       " a sneering witch",
       " supernatural monsters",
       " computer viruses made real",
       " murderous robots",
       " an army led by a sadist",
       " forces that encourage conformity",
       " a charismatic politician on the rise",
       " humanity's selfish nature",
       " his own insecurity vis-a-vis girls"]
     item_adversary = adversary[rand(adversary.length)]    
  end
  def assistant
     assistant = [
       " sarcastic female techno-geek",
       " tomboyish female librarian",
       " shape-shifting female assassin",
       " leather-clad female in shades and red leather jacket",
       " girl who's always loved him for himself",
       " bookish female scholar with mousy brown hair",
       " cherubic girl with pigtails and spunk",
       " female who inexplicably becomes attracted to the damaged protagonist for  unstated reasons"]
    item_assistant = assistant[rand(assistant.length)]
  end
  def inventory
    inventory = [
       " wacky pet",
       " electric chainsaw",
       " closet full of assault rifles and one bullet",
       " reference book",
       " meat cleaver",
       " facility with magic",
       " condescending tone",
       " discomfort in formal wear"]
    item_inventory = inventory[rand(inventory.length)]
  end
  def conflict
    conflict = [
       " a fistfight atop a cable car",
       " a daring rescue preceding a giant explosion",
       " a demonic sacrifice",
       " a philosophical argument punctuated by violence",
       " a false victory with the promise of future danger",
       " the invocation of a spell at the last possible moment",
       " eternal love professed without irony",
       " the land restored to health",
       " authorial preaching through the mouths of the characters",
       " convoluted nonsense that squanders the reader's goodwill",
       " wish-fulfillment solutions to real-world problems",
       " a cliffhanger for the sake of prompting a series"] 
    item_conflict = conflict[rand(conflict.length)]
  end
  def title_adj
    title_adj = [
       " Time",
       " Micro",
       " Aero",
       " Cosmo",
       " Reve",
       " Necro",
       " Cyber",
       " Astro",
       " Psycho",
       " Steam",
       " Meta",
       " Black"]
    item_title_adj = title_adj[rand(title_adj.length)]
  end
  def title_noun
    title_noun = [
       " punks",
       " mechs",
       " noiacs",
       " opolis",
       " nauts",
       " phages",
       " droids",
       " bots",
       " blades",
       " trons",
       " mancers",
       " Wars"] 
    item_title_noun = title_noun[rand(title_noun.length)]
  end
  def title
    title_adj + title_noun
  end
  def story
    "In a(n)" + location_adj + location_noun + " a young" + protagonist + " stumbles          
     across a(an)" + discovery + " which spurs him into conflict with" + adversary + "     
     with the     help of a" + assistant + " and her" + inventory + " culminating in" +
     conflict
  end
  def all
    puts "Your story is called: " + #{title}
    puts "And it goes like this:"
    puts #{story}
  end
end

fict_gen = Fiction_Generator.new

fict_gen.all 
```

测试是：

```
require "#{File.dirname(__FILE__)}/Fiction_Generator.rb"

  describe Fiction_Generator do

    before(:all) do
      @fict_gen = Fiction_Generator.new

    end

    it "should load up location adjectives" do
      @fict_gen.location_adj.size.should == 12
    end

    it "should load up location adjectives" do
      @fict_gen.location_adj.should include("coal-powered")
    end

    it "should load up location nouns" do
      @fict_gen.location_noun.size.should == 12
    end

    it "should load up location nouns" do
      @fict_gen.location_noun.should include("Japan")
    end

    it "should load up protagonist" do
      @fict_gen.protagonist.size.should == 12
    end

    it "should load up protagonist" do
      @fict_gen.protagonist.should include("collector of oddities")
    end

    it "should load up discovery" do
      @fict_gen.discovery.size.should == 12
    end

    it "should load up discovery" do
      @fict_gen.discovery.should include("encrypted data feed")
    end

    it "should load up adversary" do
      @fict_gen.adversary.size.should == 12
    end

    it "should load up assistant" do
      @fict_gen.assistant.size.should == 8
    end

    it "should load up inventory" do
      @fict_gen.inventory.size.should == 8
    end

    it "should load up conflict" do
      @fict_gen.conflict.size.should == 12
    end

    it "should load up title adjectives" do
      @fict_gen.title_adj.size.should == 12
    end

    it "should load up title noun" do
      @fict_gen.title_noun.size.should == 12
    end

    it "should randomly generate a title for the story" do
      @fict_gen.title.should be_true
    end

    it "should randomly generate a story using an item from each array" do
      @fict_gen.story.should be_true
    end

    after(:all) do
      puts "your story is called #{@fict_gen.title} "
      puts "and it goes like this:"
      puts @fict_gen.story
    end 
end 
```

很抱歉代码很长，但我真的需要这个帮助。

它给出以下错误消息：

```
1) Fiction_Generator should load up location adjectives
Failure/Error: @fict_gen.location_adj.size.should == 12
  expected: 12
       got: 8 (using ==)
# ./fiction_spec.rb:21:in `block (2 levels) in <top (required)>'

2) Fiction_Generator should load up location adjectives
Failure/Error: @fict_gen.location_adj.should include("coal-powered")
  expected " Dragon-filled" to include "coal-powered"
# ./fiction_spec.rb:25:in `block (2 levels) in <top (required)>'

3) Fiction_Generator should load up location nouns
Failure/Error: @fict_gen.location_noun.size.should == 12
  expected: 12
       got: 11 (using ==)
# ./fiction_spec.rb:29:in `block (2 levels) in <top (required)>'

4) Fiction_Generator should load up protagonist
Failure/Error: @fict_gen.protagonist.size.should == 12
   expected: 12
       got: 30 (using ==)
# ./fiction_spec.rb:38:in `block (2 levels) in <top (required)>'

5) Fiction_Generator should load up protagonist
Failure/Error: @fict_gen.protagonist.should include("collector of odditi

   expected " student of metaphysics" to include "collector of oddities"
# ./fiction_spec.rb:42:in `block (2 levels) in <top (required)>'

6) Fiction_Generator should load up discovery
Failure/Error: @fict_gen.discovery.size.should == 12
   expected: 12
        got: 13 (using ==)
# ./fiction_spec.rb:47:in `block (2 levels) in <top (required)>'

7) Fiction_Generator should load up discovery
Failure/Error: @fict_gen.discovery.should include("encrypted data feed")
   expected " crazy old woman" to include "encrypted data feed"
# ./fiction_spec.rb:51:in `block (2 levels) in <top (required)>'

8) Fiction_Generator should load up adversary
Failure/Error: @fict_gen.adversary.size.should == 12
   expected: 12
        got: 26 (using ==)
# ./fiction_spec.rb:55:in `block (2 levels) in <top (required)>'

9) Fiction_Generator should load up assistant
Failure/Error: @fict_gen.assistant.size.should == 8
   expected: 8
        got: 27 (using ==)
# ./fiction_spec.rb:59:in `block (2 levels) in <top (required)>'

10) Fiction_Generator should load up inventory
Failure/Error: @fict_gen.inventory.size.should == 8
   expected: 8
        got: 10 (using ==)
# ./fiction_spec.rb:63:in `block (2 levels) in <top (required)>'

11) Fiction_Generator should load up conflict
Failure/Error: @fict_gen.conflict.size.should == 12
   expected: 12
        got: 44 (using ==)
# ./fiction_spec.rb:67:in `block (2 levels) in <top (required)>'

12) Fiction_Generator should load up title adjectives
Failure/Error: @fict_gen.title_adj.size.should == 12
   expected: 12
        got: 6 (using ==)
# ./fiction_spec.rb:71:in `block (2 levels) in <top (required)>'

13) Fiction_Generator should load up title noun
Failure/Error: @fict_gen.title_noun.size.should == 12
   expected: 12
        got: 7 (using ==)
# ./fiction_spec.rb:74:in `block (2 levels) in <top (required)>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:51:45.000

您在此处列出的所有错误都发生在您的初始化方法中。在每种情况下，错误都是相同的，“参数数量错误（0 代表 1）”。

这意味着你需要看看你是如何构造你的 Fiction_Generator 对象的。在这种情况下，您的初始化方法要求您传入一个 IO 对象。所以不仅仅是使用

```
 fict_gen = Fiction_Generator.new 
```

您需要在新方法中传递 IO 对象

```
 fict_gen = Fiction_Generator.new(#IO object here) 
```

编辑：

所以你从上面的代码中删除了构造函数方法，现在我不知道你的初始化方法是什么样的，所以我写的可能不再适用。但是错误仍然存​​在于您的初始化方法中，因此请集中精力。

# php - PHP 从网站上抓取数据

> ID：15601584
> 
> 赞同：1
> 
> 时间：2013-03-24T17:22:18.100
> 
> 标签：php, screen-scraping

我对编程非常陌生，需要一些帮助来从网站获取数据并将其传递到我的 PHP 脚本中。

该网站是[http://www.birthdatabase.com/](http://www.birthdatabase.com/)。

我想插入一个名称（名字和姓氏）并检索结果。我知道您可以通过在 URL 中传递名称来查询该站点，但是我在抓取结果时遇到了问题。

[http://www.birthdatabase.com/cgi-bin/query.pl?textfield=FIRST&textfield2=LAST&age=&affid=](http://www.birthdatabase.com/cgi-bin/query.pl?textfield=FIRST&textfield2=LAST&age=&affid=)

我正在使用 file_get_contents($URL) 函数来获取页面，但之后需要帮助。具体来说，如果该名称有多个结果，我只想从某个状态中抓取结果。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T18:02:45.073

你需要很棒的 simple_html_dom 类。

使用这个类，您可以使用与 jQuery 类似的方式查询网页的 DOM。

首先在您的页面中包含该类，然后使用此代码段获取页面内容：

```
$html = file_get_html('http://www.birthdatabase.com/cgi-bin/query.pl?textfield=' . $first . '&textfield2=' . $last . '&age=&affid='); 
```

然后你可以使用 CSS 选择来抓取你的数据（像这样）：

```
$n = 0;
foreach($html->find('table tbody tr td div font b table tbody') as $element) {
    @$row[$n]['tr']  = $element->find('tr')->text;
    $n++;
}

// output your data
print_r($row); 
```

# ios - 带有包含进度条的单元格的 UITableView

> ID：15601588
> 
> 赞同：0
> 
> 时间：2013-03-24T17:22:34.190
> 
> 标签：ios, uitableview, uiprogressview

我有一个包含 2 种单元格的表格视图，一个普通的字幕类型单元格和一个包含 progressView 的自定义单元格。当委托调用完成百分比方法时，该单元格（表格视图中只有一个单元格可以有进度条）需要更新进度视图。

这是代码：

```
- (void)finishedPercent
{
    percent += 0.01;

    // reload cell
    //NSLog(@"received percent");
    [self.tableView beginUpdates];
    [self.tableView reloadRowsAtIndexPaths:@[indexPathOfRunningFormula] withRowAnimation:UITableViewRowAnimationNone];
    [self.tableView endUpdates];
} 
```

它更新非常，偶尔从接近零跳跃到 90% 或类似的东西。

这是输出的一部分

```
2013-03-24 19:15:53.285 FutureSight[5455:12e07] *** Assertion failure in -[_UITableViewUpdateSupport _setupAnimationsForNewlyInsertedCells], /SourceCache/UIKit_Sim/UIKit-2380.17/UITableViewSupport.m:1145
2013-03-24 19:16:03.850 FutureSight[5455:16003] percent done
2013-03-24 19:16:04.325 FutureSight[5455:16103] percent done
2013-03-24 19:16:04.372 FutureSight[5455:16103] percent done
2013-03-24 19:16:04.478 FutureSight[5455:16003] *** Assertion failure in -[UITableView _endCellAnimationsWithContext:], /SourceCache/UIKit_Sim/UIKit-2380.17/UITableView.m:909
2013-03-24 19:16:04.477 FutureSight[5455:12e07] percent done
2013-03-24 19:16:07.727 FutureSight[5455:16103] percent done
2013-03-24 19:16:07.790 FutureSight[5455:16103] percent done
2013-03-24 19:16:07.801 FutureSight[5455:16003] *** Assertion failure in -[UITableView _endCellAnimationsWithContext:], /SourceCache/UIKit_Sim/UIKit-2380.17/UITableView.m:909 
```

问题是什么？

将代码更改为

```
- (void)finishedPercent
{
    percent += 0.01;
    PSFormulaProgressCell *cell = (PSFormulaProgressCell *)[self.tableView cellForRowAtIndexPath:indexPathOfRunningFormula];
    cell.progress.progress = percent;

//    // reload cell
    NSLog(@"received percent");
//    [self.tableView beginUpdates];
//    [self.tableView reloadRowsAtIndexPaths:@[indexPathOfRunningFormula] withRowAnimation:UITableViewRowAnimationNone];
//    [self.tableView endUpdates];
} 
```

仍然不起作用，它显示进度条但更新填充它..

```
FutureSight(6368,0xb0115000) malloc: *** error for object 0xff39fd0: double free
*** set a breakpoint in malloc_error_break to debug
FutureSight(6368,0xb0365000) malloc: *** error for object 0xff392c0: double free
*** set a breakpoint in malloc_error_break to debug
2013-03-24 20:27:13.188 FutureSight[6368:12e03] received percent
2013-03-24 20:27:13.189 FutureSight[6368:15503] received percent
2013-03-24 20:27:13.252 FutureSight[6368:15503] received percent
2013-03-24 20:27:13.321 FutureSight[6368:15407] received percent
2013-03-24 20:27:13.383 FutureSight[6368:12e03] received percent
2013-03-24 20:27:13.444 FutureSight[6368:15407] received percent
2013-03-24 20:27:13.444 FutureSight[6368:12e03] received percent
2013-03-24 20:27:13.509 FutureSight[6368:12e03] received percent
2013-03-24 20:27:13.509 FutureSight[6368:15407] received percent
2013-03-24 20:27:13.579 FutureSight[6368:15503] received percent
FutureSight(6368,0xb0261000) malloc: *** error for object 0x7a0c400: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug
2013-03-24 20:27:13.846 FutureSight[6368:15407] received percent
2013-03-24 20:27:13.846 FutureSight[6368:12603] received percent 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:40:30.097

您应该只更新 UIProgressView，而不是整个单元格。不需要'reloadRowsAtIndexPaths'。

# c++ - 奇怪的 C++ 内存问题。常量指针被改变

> ID：15601592
> 
> 赞同：-1
> 
> 时间：2013-03-24T17:23:05.727
> 
> 标签：c++, multithreading, sockets, pointers

找到解决方案

问题描述：我使用的是旧的 C 库，并且有一个类接收 const char * 作为函数中的参数。该函数正在创建一个动态对象并将其存储在使用 const char * 作为参数的链表中。

问题是这样做之后，传递给函数的 const char * 在类外的内存中被修改了。这破坏了节点中的数据。

解决方案：使用 std::string 作为类中的数据类型。当 const char * 作为值传递给字符串时，字符串会为您处理内存管理。

我学到的是？使用 C++ 时，请始终使用字符串，并且仅在某些 C 库中需要时才将 char * 与 string.c_str() 一起使用。

多谢你们。你救了我的周末。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:37:13.383

buff 在堆栈上创建。您将 buff 传递给 Cache.find，最终它成为您节点的键。下次处理连接时，buff 占用的内存已被重用，因为您已退出声明 buff 的函数。所以你的钥匙消失/被丢弃。从根本上说，您有指向不再有效的内存的指针。

这就是为什么您不应该尝试自己滚动，而是使用 std::map 的原因。

另外，您似乎有多个线程在没有任何同步的情况下修改全局变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T17:33:42.130

你可以进一步简化它。通过浏览代码，这是我的猜测。本质上，您做错的是：

```
const char* a;
{
  std::string f("foo");
  a = f.c_str();
}
doSomethingWith(a); 
```

我的建议：完全远离`char*`。如果在某些地方您绝对必须使用它们，请了解对象生命周期以及如何保持指针不会以任何方式延长该生命周期。我并不是说“在`char*`你更好地理解它们之前不要使用它们”——我认为我对它们理解得很好，并且仍然尽可能避免使用它们。我的意思是“如果您正在使用 C 代码（或在这方面看起来像 C 代码的 C++ 代码），请使用它们。”</p>

另外，上面的评论是绝对正确的。尽可能减少您的问题（这可能已经给您答案）并在此处以独立的方式描述它。

# highslide - 修改 Highslide 行为 - （点击 - 下一步）

> ID：15601595
> 
> 赞同：0
> 
> 时间：2013-03-24T17:23:16.047
> 
> 标签：highslide

任何人都可以建议一种修改 Highslide 的方法，以便当用户单击图像时将转到下一个图像而不是关闭？我还想禁用关闭图像的关闭图像单击。

感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:55:34.660

对于“点击下一步”，将其添加到您的 highslide 配置文件（在脚本之后加载），或将其放在页面主体的标签中（也在脚本加载之后）：

```
hs.Expander.prototype.onImageClick = function() {
    return hs.next();
} 
```

您还需要更改 hs.lang.restoreTitle 的工具提示。

这需要 highslide-full.js。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T18:02:41.810

为了防止在图像外部单击时“关闭”，请使用大于 0 的 hs.dimmingOpacity，然后将其添加到您的配置中：

```
hs.onDimmerClick = function() {
    return false;
} 
```

如果您不想要任何背景变暗，请将 hs.dimmingOpacity 设置为某个很小的值，例如 0.01。

这需要 highslide-full.js。

# python - 如何插入和替换另一个列表中的单词列表或python中的字符串

> ID：15601598
> 
> 赞同：0
> 
> 时间：2013-03-24T17:23:27.777
> 
> 标签：python, string, list, split, replace

我正在尝试用`[NOUN]`上面的单词替换一个字符串。我一无所知！

下面是我的代码-它返回很多错误-变量story是一个字符串，listOfNouns是一个列表-所以我尝试通过拆分将字符串转换为列表。：

```
def replacement(story, listOfNouns):   
    length = len(story1)
    story1 = story.split()
    for c in range(0,len(story1)):
        if c in listOfNouns:
             story1[c]= 'NOUN'
             story = ''.join(story)      
    return story 
```

这是我在调用上述函数时收到的错误消息
`replacement("Let's play marbles", ['marbles'])`：

```
Traceback (most recent call last):
  File "<pyshell#189>", line 1, in <module>
    replacement("Let's play marbels", ['marbels'])
  File "C:/ProblemSet4/exam.py", line 3, in replacement
    length = len(story1)
UnboundLocalError: local variable 'story1' referenced before assignment 
```

如何用另一个列表中的另一个元素替换新的 story1 列表？

如何修改元组并返回新字符串 - 应该说：
`Let's play [NOUN]`???

有人可以帮忙吗？我迷路了，我已经尝试了几个小时，使用我在 Python/Java 中的所有知识来解决这个问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T17:46:43.640

这是解决问题的更短更简单的方法。

```
def replacement(story, nouns):
    return ' '.join('[NOUN]' if i in nouns else i for i in story.split()) 
```

**输出**

```
In [4]: replacement('Let\'s play marbles, I\'m Ben', ['marbles', 'Ben'])
Out[4]: "Let's play [NOUN], I'm [NOUN]" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T17:27:06.750

错误“分配前引用”指的是：

```
length = len(story1)
story1 = story.split() 
```

您应该首先分配story1，然后获取它的长度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T17:49:57.260

问题在于在设置story1的值之前计算story1的长度。

这是一个固定版本，它也以更“pythonic”的方式进行迭代，并修复了加入原始字符串而不是拆分字符串的错误。

```
def replacement(story, listOfNouns):   
    story1 = story.split()
    for i,word in enumerate(story1):
        if word in listOfNouns:
             story1[i] = '[NOUN]'
    return ' '.join(story1)      

print(replacement("Let's play marbles", ['marbles'])) 
```

输出：

```
Let's play [NOUN] 
```

这是另一种解决方案，它使用正则表达式一次有效地替换单词的所有实例，而不替换包含该单词的部分单词。

```
import re

stories = [
    'The quick brown fox jumped over the foxy lady.',
    'Fox foxy fox lady ladies lady foxy fox']

def replacement(story, listOfNouns):
    story = re.sub(r'''
        (?ix)   # ignore case, allow verbose regular expression definition
        \b      # word break
        (?:{})  # non-capturing group, string to be inserted
        \b      # word break
        '''.format('|'.join(listOfNouns)),'[NOUN]',story) # OR all words.
    return story

for story in stories:
    print(replacement(story,'fox lady'.split())) 
```

输出：

```
The quick brown [NOUN] jumped over the foxy [NOUN].
[NOUN] foxy [NOUN] [NOUN] ladies [NOUN] foxy [NOUN] 
```

# c# - Web 服务器上的主机数据库

> ID：15601600
> 
> 赞同：-1
> 
> 时间：2013-03-24T17:23:33.843
> 
> 标签：c#, sql-server-2008

我的桌面应用程序带有托管在本地网络上的 SQL Server 数据库。现在我的客户想在网络上的某个地方托管数据库，这样员工就可以使用桌面应用程序从任何地方访问它，而不仅仅是在办公室。

而且我想知道我是否可以将数据库移动到虚拟主机并像在本地网络中一样透明地连接到它？对不起，我是菜鸟，我还没有为网络编码......

将 SQL Server 数据库迁移到 Web 托管有多容易？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T17:26:35.623

出于安全原因，如果没有别的原因，将数据库直接暴露给 Web 上的客户端，这不是一个好主意。

这可以使用 Web API 来实现 - 客户端连接到的 Web 上的编程接口，它本身在幕后使用数据库。

使用这样的 API 可以让您控制客户端的操作、允许连接的客户端、添加身份验证和授权层等等。

Microsoft [Web API](http://www.asp.net/web-api)就是为这样的事情而设计的。

# php - clean_string 函数过于激进

> ID：15601601
> 
> 赞同：0
> 
> 时间：2013-03-24T17:23:36.470
> 
> 标签：php, mysql, database

我有一个 clean_string 函数应用于我的应用程序中的文本条目，但我担心它过于激进。向数据库提交带有单引号或双引号的文本会导致它打印出奇数字符。

**clean_string 函数**

```
<?php
/*
        ini_set('display_errors', 1);
    error_reporting(E_ALL);
*/
    function clean_string($string) {
        $string = trim($string);
        $string = utf8_decode($string);
        $string = str_replace("#", "&#35", $string); $string = str_replace("%", "&#37", $string);

        if (mysql_real_escape_string($string)) {
            $string = mysql_real_escape_string($string);
        }

        if (get_magic_quotes_gpc()) {
            $string = stripslashes($string);
        }

        return htmlentities($string);
    }
?> 
```

在文本字段中输入诸如“Hello”或“world”之类的文本会产生以下结果： ![激进的 clean_string](../Images/0513ad6a62207d5e7c29378de4bd094b.png)

clean_string 函数被调用如下：

```
//Clean
    if ($submit == 'Submit') {
        $submit = clean_string($_POST['submit']);
        require_once("db_connect.php");

        $watchlist_name = clean_string($_POST['watchlist-name']);
        $watchlist_description = clean_string($_POST['watchlist-description']);
        $watchlist_category = $_POST['watchlist-category'];

        $existing_watchlist_name = clean_string($_POST['existing-watchlist']);

        $addWatchlist_bad_message = '';
        $addWatchlist_good_message = '';

        if ($db_server) {
            // Add new Watchlisth
            if (!empty($watchlist_name)) {
                $watchlist_name = clean_string($watchlist_name);
                $watchlist_description = clean_string($watchlist_description);
                mysql_select_db($db_database);

                // Create new Watchlist
                $insert_new_watchlist = "INSERT INTO watchlists (user_id, name, description, category) VALUES ('$user_id', '$watchlist_name', '$watchlist_description', '$watchlist_category')";
                mysql_query($insert_new_watchlist) or die("Insert failed. " . mysql_error() . "<br />" . $insert_new_watchlist);

                // Insert film into new Watchlist
                $add_new_film = "INSERT INTO watchlist_films (watchlist_id, film_id) VALUES (" . mysql_insert_id() .", '$rt_id')";
                mysql_query($add_new_film) or die("Insert failed. " . mysql_error() . "<br />" . $add_new_film);
                $addWatchlist_good_message = '<div class="alert alert-success">Watchlist created successfully, and film added!</div>';?>
                <script>
                    $('a.add-watchlist').trigger('click');
                </script><?php
            } else if (!empty($existing_watchlist_name)) {
                mysql_select_db($db_database);

                // Select existing Watchlist
                $existing_watchlist_select = "SELECT watchlist_id FROM watchlists WHERE name = '$existing_watchlist_name'";
                $existing_watchlist_select_result = mysql_query($existing_watchlist_select);
                $existing_watchlist_id = mysql_result($existing_watchlist_select_result, 0);

                // Add film to existing Watchlist
                $insert_into_existing = "INSERT INTO watchlist_films (watchlist_id, film_id) VALUES ('$existing_watchlist_id', '$rt_id')";
                mysql_query($insert_into_existing) or die("Insert failed. " . mysql_error() . "<br />" . $insert_into_existing);
                $addWatchlist_good_message = '<div class="alert alert-success">Film successfully added to existing Watchlist!</div>';?>
                <script>
                    $('a.add-watchlist').trigger('click');
                </script><?php
            }
        } else {
            $addWatchlist_bad_message = '<div class="alert alert-error">Error: could not connect to the database.</div.';?>
            <script>
                $('a.add-watchlist').trigger('click');
            </script><?php
        }
        require_once("db_close.php");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:34:03.100

您可以在检索和回显数据时去除斜杠，或者使用 str_replace 将其过滤掉。

# r - 如何在 R 中创建具有特定间隔的向量？

> ID：15601609
> 
> 赞同：49
> 
> 时间：2013-03-24T17:24:22.253
> 
> 标签：r, vector, intervals

我有一个关于创建向量的问题。如果我这样做`a <- 1:10`，“a”的值是 1,2,3,4,5,6,7,8,9,10。

我的问题是如何创建一个元素之间具有特定间隔的向量。例如，我想创建一个值从 1 到 100 但仅以 5 为间隔计数的向量，这样我就得到了一个值为 5,10,15,20,...,95,100 的向量

我认为在 Matlab 中我们可以做到`1:5:100`，我们如何使用 R 做到这一点？

我可以尝试做`5*(1:20)`，但有更短的方法吗？（因为在这种情况下，我需要知道整个长度（100），然后除以间隔的大小（5）得到 20）

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2013-03-24T17:25:27.870

在 R 中，等效函数是`seq`，您可以将其与选项一起使用`by`：

```
seq(from = 5, to = 100, by = 5)
# [1]   5  10  15  20  25  30  35  40  45  50  55  60  65  70  75  80  85  90  95 100 
```

* * *

除了`by`您还可以有其他选项，例如`length.out`和`along.with`。

**length.out**：如果要获取 0 到 1 之间的总共 10 个数字，例如：

```
seq(0, 1, length.out = 10)
# gives 10 equally spaced numbers from 0 to 1 
```

**together.with**：它将您提供的向量的长度作为输入，并提供来自 1:length(input) 的向量。

```
seq(along.with=c(10,20,30))
# [1] 1 2 3 
```

虽然，`along.with`建议`seq_along`在这种情况下使用，而不是使用该选项。从文档中`?seq`

> `seq`是通用的，这里只描述默认的方法。请注意，无论参数名称如何，它都会在**第一个参数的类上分派。**如果只使用一个参数来调用它，这可能会产生意想不到的后果，意在将其作为一起使用。with：在这种情况下使用要好得多`seq_along`。

**seq_along：**代替`seq(along.with(.))`

```
seq_along(c(10,20,30))
# [1] 1 2 3 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-05-11T14:42:50.013

使用代码

```
x = seq(0,100,5) #this means (starting number, ending number, interval) 
```

输出将是

```
[1]   0   5  10  15  20  25  30  35  40  45  50  55  60  65  70  75
[17]  80  85  90  95 100 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-07T06:00:20.293

通常，我们希望将向量划分为多个区间。在这种情况下，您可以使用函数，其中 (a) 是向量， (b) 是区间数。（假设你想要 4 个间隔）

```
a <- 1:10
b <- 4

FunctionIntervalM <- function(a,b) {
  seq(from=min(a), to = max(a), by = (max(a)-min(a))/b)
}

FunctionIntervalM(a,b)
# 1.00  3.25  5.50  7.75 10.00 
```

因此，您有 4 个间隔：

```
1.00 - 3.25 
3.25 - 5.50
5.50 - 7.75
7.75 - 10.00 
```

您还可以使用剪切功能

```
 cut(a, 4)

# (0.991,3.25] (0.991,3.25] (0.991,3.25] (3.25,5.5]   (3.25,5.5]   (5.5,7.75]  
# (5.5,7.75]   (7.75,10]    (7.75,10]    (7.75,10]   
#Levels: (0.991,3.25] (3.25,5.5] (5.5,7.75] (7.75,10] 
```

# jquery - 尝试在 jQuery 中选择同级值

> ID：15601611
> 
> 赞同：0
> 
> 时间：2013-03-24T17:24:27.780
> 
> 标签：jquery, jquery-selectors

在这样的代码中：

```
 for(var i=0; i<arSelectedFields.length; i++) {
            $("td[class='ms-formlabel']").each(function() {
                var txtCol = $.trim($(this).text()); // field name
                var fvalue = "";    //field value
                if(txtCol == arSelectedFields[i]) {

                    $("td[class='ms-formlabel'] + td[class='ms-formbody']").each(function() {; // ignoring any field formatting; use html(), if needed
                            fvalue = $(this).text();
                            if(fvalue != "") PrintingHTML += "\n<tr><td class='formlabel'>" + txtCol + "</td><td class='xdata'>" + fvalue + "</td></tr>";
                            else PrintingHTML += "\n<tr><td class='formlabel'>" + txtCol + "</td><td class='xdata'>&nbsp;</td></tr>";
                            fvalue = "";

                    });  //each()
                    return false;
                } //else return false; 
            });
        } 
```

我有这样的声明：

```
$("td[class='ms-formlabel'] + td[class='ms-formbody']").each(.... 
```

我真正想要的是

```
$(this)...td[class='ms-formbody']").each(... 
```

但无法让它工作。换句话说，我只想要`td[class='ms-formbody']`当前选择的行中存在的 （基于 的值`td[class='ms-formlabel']`）。我能得到的最接近的是我展示的方式，它从顶部开始收集 formbody 元素，而不仅仅是适用于当前选定 formlabel 的元素。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:30:05.457

如果我理解正确，您正在寻找的是：

```
$(this).siblings("td[class='ms-formbody']").each(.. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T17:30:42.627

尝试

```
$(this + " td[class='ms-formbody']").each(... 
```

或者

```
$(this).find("td[class='ms-formbody']").each(... 
```

是否有理由为类使用属性等于选择器？你应该只写：`td.ms-formbody`

# java - Java 单选按钮变量错误

> ID：15601612
> 
> 赞同：1
> 
> 时间：2013-03-24T17:24:37.577
> 
> 标签：java, swing, variables, button, radio

所以这现在有效，我修复了变量调用错误。但我得到：

```
Exception in thread "main" java.lang.NullPointerException
    at Radio.buildPanel(Radio.java:56)
    at Radio.<init>(Radio.java:33)
    at Radio.main(Radio.java:74) 
```

我的 GUI 弹出但空白，现在是什么？我现在无法弄清楚问题是什么。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Radio extends JFrame 
{

    private JPanel Panel;
    private JPanel buttonPanel;
    private JTextField base;
    private JTextField width;
    private JRadioButton squareArea;
    private JRadioButton parallelogramArea;
    private JLabel messageLabel;
    private JTextField text;
    private final int WINDOW_WIDTH = 550;
    private final int WINDOW_HEIGHT = 550;
    private ButtonGroup radioButtonGroup;
    private JRadioButton radioButton1;
    private JRadioButton radioButton2;
    double pTotal;
    double sTotal;

    public Radio()
    {
        setSize(WINDOW_WIDTH, WINDOW_HEIGHT);
        setTitle("Area Calculator");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setVisible(true);
        buildPanel();
        add(Panel);

    }

    public void init()
    {
     setLayout(new BorderLayout());
     add(buttonPanel, BorderLayout.SOUTH);
    }
    private void buildPanel() 
    {
        JLabel messageLabel1 = new JLabel("Please enter the base: ");
        JTextField base = new JTextField(10);
        JLabel messageLabel2 = new JLabel("Please enter the width: ");
        JTextField width = new JTextField(10);
        JRadioButton squareArea = new JRadioButton("Choice 1", true);
        JRadioButton parallelogramArea = new JRadioButton("Choice 2");
        ButtonGroup group = new ButtonGroup();
        JButton calcButton = new JButton("Calculate");
        calcButton.setBackground(Color.BLUE);
        calcButton.setForeground(Color.PINK);
        calcButton.addActionListener(new CalcButtonListener());
        Panel.add(messageLabel1);
        Panel.add(base);
        Panel.add(messageLabel2);
        Panel.add(width);
        group.add(squareArea);
        group.add(parallelogramArea);
        buttonPanel.add(squareArea);
        buttonPanel.add(parallelogramArea);
        Panel.add(calcButton);
        Panel.add(buttonPanel);
    }

    public static void main (String[] args)
    {

        Radio radio = new Radio();
    }

    private class CalcButtonListener implements ActionListener
    {
        @Override
        public void actionPerformed(ActionEvent e) 
        {

            if (parallelogramArea.isSelected());
            {
                pTotal = Double.parseDouble(base.getText()) * Double.parseDouble(width.getText());
                JOptionPane.showMessageDialog(null, "The Area is: " + pTotal);
            }

            if (squareArea.isSelected())
            {

                 sTotal = Double.parseDouble(base.getText()) * Double.parseDouble(width.getText());
                 JOptionPane.showMessageDialog(null, "The Area is: " + sTotal);
            }
        }
    }
} 
```

解决这个问题非常重要，在此先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:28:14.167

您正在调用此`buildPanel();`方法。

这是错误的，因为此方法接受两个参数作为参数。

所以调用这个方法就像``buildPanel(str1,str2);`

```
private void buildPanel(String width1, String base1){
      .............
} 
```

## 编辑

声明您未声明的所有变量。

```
String base1 = null; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T17:28:56.823

在 Eclipse 中，转到*Window* - *Show view*菜单，然后选择打开名为“Problems”的视图。此视图应始终打开。它包含所有编译错误和警告。虽然存在编译错误（标记为红色），但您甚至不应该尝试运行您的程序。

似乎尝试使用未定义的变量，并且您正在调用一个方法`buildPanel(String, String)`，将两个字符串作为参数而不传递任何参数。在问题视图中双击一个编译错误，eclipse会将光标放在问题所在的行。

在学习如何编译程序和解决这些基本错误之前，您是如何使用 Swing 的？这就像在学习驾驶之前尝试驾驶法拉利一样。从基础开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T17:29:23.460

您对范围有疑问。例如，您`parallelogramArea`在`buildPanel()`方法的范围内定义，并且试图从另一个范围内（内部类的范围`CalcButtonListener`）访问它。

此外，您在`buildPanel()`没有两个 String 参数的情况下调用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T17:29:30.423

第一个错误意味着当您调用`buildPanel(String, String)`时需要使用 2 个字符串参数传递给函数。目前你没有传递参数。第二个错误意味着您尝试使用的变量未定义，因为范围问题意味着当您尝试在方法中使用它们时未定义它们。

# c - 使用 C_INCLUDE_PATH 的 gcc 标头搜索路径

> ID：15601616
> 
> 赞同：3
> 
> 时间：2013-03-24T17:24:46.943
> 
> 标签：c, gcc, header, include-path, user-profile

我对以下包含文件（使用 GCC）感到困惑

我在文件夹 AAA 中有 Ac 和 Bc

和 Bh 在文件夹 BBB

在交流：

```
#include <stdio.h>
#include "B.h"

main()
{
    errPrint();
} 
```

在公元前：

```
#include <stdio.h>
#include "B.h"
void errPrint(void)   
{
    printf("err info\n");
} 
```

单位：

```
#ifndef _B_H
#define _B_H
void errPrint(void);
#endif 
```

现在我运行命令：

`#gcc -I /BBB A.c B.c -o exeobj`

没关系。但是在其他文件夹中我必须使用“-I”来指定标题似乎有点无聊。所以我编辑我的“/etc/profile”文件并添加

```
C_INCLUDE_PATH=/BBB  
export C_INCLUDE_PATH 
```

指定头文件夹，然后

```
echo $C_INCLUDE_PATH 
```

它显示了正确的路线。但是当我编译时：

```
#gcc -c A.c B.c 
```

错误显示：

```
error: B.h: No such file or directory 
```

我不知道哪里出错了，任何人都有线索，欢迎任何建议。

注意：我是新手，还不能使用 Makefile ......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:28:29.353

在交流：

```
#include <stdio.h>
#include <B.h>

main()
{
    errPrint();
} 
```

在公元前：

```
#include <stdio.h>
#include <B.h>
void errPrint(void)   
{
    printf("err info\n");
} 
```

如果要使用`#include "file.h"`你必须指定路径示例：`"/BBB/B.h"`

有关更多信息，您可以阅读 [C 标准](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1124.pdf)第 6.10.2 节第 2 至第 4 段。

**编辑**：测试后。请尝试一下。

```
echo -e "C_INCLUDE_PATH=/BBB\nexport C_INCLUDE_PATH" >> ~/.bash_profile

source ~/.bash_profile 
```

现在

```
gcc A.c B.c 
```

祝你好运:)

# service - AngularJS指令通信没有相同的父级

> ID：15601619
> 
> 赞同：0
> 
> 时间：2013-03-24T17:24:51.987
> 
> 标签：service, angularjs, directive, concept

假设我有一个包含一些数据的指令，我想在第二个组件（指令或其他）中的其他位置插入它，而不需要控制器链接它们。

例如，以 angularjs 网页的 zippy 为例，但我们没有将**输入**`<div ng-controller="Ctrl3">`中的数据竞价到**zippy 指令**，而是有两个独立的组件：

 ****```
 <!-- first component with data -->
    <div ng-controller="aCtrl">

    Title: <input ng-model="title"> <br>
    Text: <textarea ng-model="text"></textarea>
    </div>

    <hr>
    <!-- a second component wanting to show the data -->
    <div class="zippy" zippy-title="Details: {{title}}...">{{text}}</div> 
```

我的问题是如何在 Angularjs 中很好地链接它们？

我尝试通过服务，注册数据更改，然后尝试通过注入指令或通过控制器将其与我的 DOM 绑定，但未成功。

（我想在另一个指令“窗口”中显示指令中包含的数据，但我不想用控制器包装我的所有代码只是为了绑定数据）

有没有办法做得很好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T20:55:10.740

这是一种使用触发自定义事件的服务的解决方案`$rootScope`，然后在指令的控制器中侦听事件

```
app.factory('SharedData',function($rootScope){
    return{
        data:{text : 'World', title:'Foo bar'},
        upDate:function(prop,val){
           this.data[prop]=val;
           $rootScope.$emit('dataUpdate',prop)
        }
    }
});

app.controller('aCtrl', function ($scope,SharedData) {
    angular.forEach(SharedData.data,function(value,key){
        $scope[key] = value;
        $scope.$watch(key,function(){
            SharedData.upDate(key,$scope[key]);
        });
    });
});

app.directive('zippy',function($rootScope,SharedData){
    return{
        restrict:'C',
        replace:false,
        scope:{},
        controller:function($scope) {
            $rootScope.$on('dataUpdate',function(event,prop) {
                $scope[prop] = SharedData.data[prop];
            });
        }
    }
}); 
```

**[Plunker 演示](http://plnkr.co/edit/B1OQmvMb14yaI7QVic32?p=preview)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-20T11:16:36.150

除了发出事件或将指令包装到父控制器中之外，还有另一种选择（顺便说一句，这些选项没有错）。另一种选择是拥有一个通用服务/工厂，您可以在其中注册任意指令控制器，然后在其他相关或非相关指令中使用这些注册的控制器。

下面有一个服务`directiveCommunicator`，你可以在其中获取、设置和取消设置指令控制器（如果需要，你可以使用工厂，这只是我使用服务的偏好）。然后，我们有另外 2 个指令，称为`foo`and `bar`，这些`foo`指令注册了要使用的控制器，而该控制器又被`bar`指令使用。请注意，`foo`和`bar`指令与父/子无关

```
// Service used to register/use any arbitrary controller
app.service('directiveCommunicator',
    function()
    {
        var _controllers = {};

        this.get =
            function(id)
            {
                if (!(id in _controllers)) {
                    return null;
                }

                return _controllers[id];
            };

        this.set =
            function(id, controller)
            {
                _controllers[id] = controller;
            };

        this.unset =
            function(id)
            {
                if (!(id in _controllers)) {
                    return;
                }

                delete _controllers[i];
            }
    }
);

app.directive('foo',
    [
        'directiveCommunicator',
        function(directiveCommunicator)
        {
            return {
                'restrict': 'A',
                'scope':
                    {
                        'colour': '='
                    },
                'controller':
                    function($scope)
                    {
                        // We register out controller with a unique ID so we can use it in other directives
                        directiveCommunicator.set('colourBox', this);

                        // We also unregister it once we get destroyed, otherwise we'll be leaking memory
                        $scope.$on('$destroy',
                            function()
                            {
                                directiveCommunicator.unset('colourBox');
                            }
                        );

                        this.changeColour =
                            function(colour)
                            {
                                $scope.$apply(
                                    function()
                                    {
                                        $scope._colour = colour;
                                    }
                                );
                            }
                    },
                'link':
                    function($scope, $element, $attr)
                    {
                        $scope._colour = $attr.colour;

                        $scope.$watch('_colour',
                            function()
                            {
                                $element.attr('class', $scope._colour);
                            }
                        );
                    }
            }
        }
    ]
);

app.directive('bar',
    [
        'directiveCommunicator',
        function(directiveCommunicator)
        {
            return {
                'restrict': 'A',
                'scope':
                    {
                        'colour': '='
                    },
                'link':
                    function($scope, $element, $attr)
                    {
                        $element.text($attr.colour);

                        $element.bind('click',
                            function()
                            {
                                // We get the registered controller and call the 'changeColour' method on it
                                var ctrl = directiveCommunicator.get('colourBox');

                                ctrl.changeColour($attr.colour);
                            }
                        );
                    }
            }
        }
    ]
); 
```

我做了一个小**[Plunker](http://plnkr.co/edit/iPhD0fNHZ0yMTclQNxz4?p=preview)**演示来查看`foo`和`bar`操作。该`foo`指令只是一个小方形 div，您可以在其中更改关联控制器中的背景。`bar`是另一个不相关的指令，它将调用`foo`的控制器方法`changeColour`并根据提供的属性更改颜色。

尚未在生产中使用此设置，您还需要处理注销控制器，但应该可以。您还可以在方法中使用第三个参数`directiveCommunicator.set`作为控制器的范围，该方法将自动添加到 $destroy/unregister 设置中，因此不必再`directiveCommunicator.unset`调用****

# c++ - 在 Linux 中在 Eclipse 上编译 glew

> ID：15601622
> 
> 赞同：1
> 
> 时间：2013-03-24T17:25:32.070
> 
> 标签：c++, linux, eclipse, opengl

我已经为 c++ 开发人员（使用 CDT）下载了 Eclipse。我还通过终端安装了 freeglut3 和 glew 库。我将 -lglut -lGLEW 和 -lGL 添加到链接器。问题是，在 IDE 中，一些方法被标记为红色，好像没有找到一样。按构建，编译代码，但是当我运行它时，显示黑屏，但没有呈现任何内容，好像应该由 GLEW 导入的方法不存在。如果我转到标题，它会打开包含所有方法声明的有效 glew.h 文件。 ![在此处输入图像描述](../Images/a09b79acdb9bdd719a65b62f4328e076.png)

这在带有 Ubuntu 的 VMWare 虚拟机和专用的 Linux Mint 上网本中都发生过，所以可能是我遗漏了一些东西。

**[编辑]**代码取自这里：[OpenGL linux tutorial](http://ogldev.atspace.co.uk/www/tutorial03/tutorial03.html)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T19:44:38.567

红色标记的方法只是 eclipse 扫描仪无法正常工作的标志。如果您的代码在没有警告和错误的情况下编译和链接，则无需担心。您应该专注于您的代码，因为您的 gl 代码中肯定存在逻辑错误（例如，相机未指向场景）。

# tags - 再次使用 Git 时，如何在 Teamcity 中签出标签/发布？

> ID：15601624
> 
> 赞同：1
> 
> 时间：2013-03-24T17:25:42.403
> 
> 标签：tags, clone, teamcity

在使用 Teamcity 时，我想指定克隆的标签，以便在下一个构建步骤中将正确的版本部署到生产环境中。

我通常在“开发”阶段指定“master”，因此我将当前快照版本部署到此环境，因此我试图指定“/tags/projectName-1.0”用于生产部署。

由于无法克隆标签，我总是在 VCS 源上收到错误消息。

如何指定从现有标签克隆？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T17:25:42.403

要指定要从标签克隆（无论出于何种原因），您必须以以下格式指定它：

refs/tags/projectname-1.0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:26:10.797

在您的 vcs 根目录中有一个名为 Branch Name 的框：它包含类似 refs/tags/build-v0.2.2.55 的内容，其中 build-v0.2.2.55 是您现有的标签。

# python - 从具有关系的字典中的最大值生成新字典

> ID：15601628
> 
> 赞同：0
> 
> 时间：2013-03-24T17:25:52.933
> 
> 标签：python, dictionary, max

我有一本看起来像这样的字典：

```
stats = {'a':1,'b':2,'c':2} 
```

我需要生成一个具有最大值的字典......可以有联系：

```
max_only = {'b':2,'c':2} 
```

生成值最大的新字典的最pythonic和最快的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T17:27:35.763

首先，您需要确定最大值：

```
max_value = max(stats.itervalues()) 
```

然后构建你的`max_only`字典：

```
max_only = {k: v for k, v in stats.iteritems() if v == max_value} 
```

对于 Python 3，分别替换`itervalues()`和`iteritems()`with`values()`和`items()`。

更容易找到*一个*最大的键值对：

```
dict(max(stats.iteritems(), key=lambda kv: kv[1])) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T18:03:33.853

```
Almost the above answer:
new_stats = {}
for key,values in stats.items():
  if values == max(stats.values()):
    new_stats[key] = values 
```

# r - R中的BayesTree包图提取

> ID：15601629
> 
> 赞同：2
> 
> 时间：2013-03-24T17:25:54.247
> 
> 标签：r, plot, bayesian, par

我在 R 中使用 BayesTree 包。使用作者的示例：

```
##simulate data (example from Friedman MARS paper)
f = function(x){
10*sin(pi*x[,1]*x[,2]) + 20*(x[,3]-.5)^2+10*x[,4]+5*x[,5]
}
sigma = 1.0 #y = f(x) + sigma*z , z~N(0,1)
n = 100 #number of observations
set.seed(99)
x=matrix(runif(n*10),n,10) #10 variables, only first 5 matter
Ey = f(x)
y=Ey+sigma*rnorm(n)

##run BART
set.seed(99)
bartFit = bart(x,y)
plot(bartFit) # plot bart fit 
```

执行 plot(bartFit) 时，它会生成两个图“绘图方法将 mfrow 设置为 c(1,2) 并制作两个图。” 我希望只使用此命令生成的第二个图。有没有一种简单的方法可以只提取第二个情节？

这也提供：

```
## S3 method for class 'bart':
plot((
   x,
   plquants=c(.05,.95), cols =c('blue','black'),
   ...)) 
```

我对 R 比较陌生，一般来说，如果一个命令给出的情节超过 1 个，你怎么能选择你想要的特定情节？例如，在线性模型 (lm) 绘图命令中，您还可以获得多个绘图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:11:08.203

好的，我没有解决方案，但也许我正在做某事。首先，我试图弄清楚`bartFit`第二个图上绘制了哪些列表元素。您可以使用 . 查看 bart 的结构`str(bartFit)`。似乎第二个情节是从`$y`and创建的`$yhat.train.mean`，当您查看它时，这似乎是正确的：

```
plot(bartFit$yhat.train.mean ~ bartFit$y) 
```

但它显然缺少酒吧。所以我决定改变策略，`traceback()`看看这些情节是如何创建的。没有运气，直到我更改了 x-scale 的名称以强制出错。

```
plot(bartFit, xlab="something") 
```

这给了我只有第一个情节，错误信息，但也有能力`traceback()`。在那里，我可以看到第二个情节是使用以下方法创建的：

```
4: plot.default(x$y, qm, ylim = range(ql, qu), xlab = "y", ylab = "posterior interval for E(Y|x)", ...)
3: plot(x$y, qm, ylim = range(ql, qu), xlab = "y", ylab = "posterior interval for E(Y|x)", ...) 
```

但这不好。我不知道是什么`qm`，也不知道`ylim`范围从何而来。所以我开始玩`par`. 在那里，我发现了非常非常粗略的解决方案，使用`par`参数`mfg`来“强制”仅绘制第二个情节。这仍然会为一个情节留下空白空间，但不会绘制它。但它的行为也很奇怪。棘手的一个。

```
plot(bartFit)
par(mfg=c(1,2))
plot(bartFit) 
```

# c# - C# 排序链表

> ID：15601630
> 
> 赞同：-1
> 
> 时间：2013-03-24T17:25:58.693
> 
> 标签：c#, list, sorting

[使用此处](http://www.functionx.com/csharp1/examples/linkedlist.htm)的示例/教程如何按零件编号对该列表进行排序？目前该列表只是按照用户添加的顺序打印：

```
 for(int i = 0; i < Parts.Count; i++)
    {
        CarPart part = Parts.Retrieve(i);
        Console.WriteLine("\nCar Part Information");
        Console.WriteLine("Part #:      {0}", part.PartNumber);
        Console.WriteLine("Description: {0}", part.PartName);
        Console.WriteLine("Unit Price:  {0:C}", part.UnitPrice);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:58:58.500

如果您需要能够在中间插入和删除很多，您可以考虑使用 SortedDictionary，例如：

（注意：这要求 PartNumber 是唯一的；不同的部分不能有相同的 PartNumber）

```
using System;
using System.Collections.Generic;

namespace Demo
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            var parts = new SortedDictionary<string, CarPart>(); // Key is a string.

            var part = new CarPart{PartNumber = "NumberOne", PartName = "NameOne", UnitPrice = 100.0m};
            parts.Add(part.PartNumber, part);

            part = new CarPart{PartNumber = "NumberTwo", PartName = "NameTwo", UnitPrice = 100.0m};
            parts.Add(part.PartNumber, part);

            part = new CarPart{PartNumber = "NumberThree", PartName = "NameThree", UnitPrice = 100.0m};
            parts.Add(part.PartNumber, part);

            part = new CarPart{PartNumber = "NumberFour", PartName = "NameFour", UnitPrice = 100.0m};
            parts.Add(part.PartNumber, part);

            foreach (var p in parts)
            {
                // Part numbers printed out in *alphabetical* order (because they are strings).

                Console.WriteLine("Part number = " + p.Value.PartNumber);
            }
        }
    }

    public sealed class CarPart
    {
        public string PartNumber;
        public string PartName;
        public Decimal UnitPrice;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T17:33:42.577

```
foreach(part in Enumerable.Range(0,Parts.Count)
                            .Select(i => Parts.Retrieve(i))
                            .OrderBy(p => p.PartNumber))
{
        Console.WriteLine("Part #:      {0}", part.PartNumber);
} 
```

但如果你`ListOfParts`能回来就更好了`IEnumerable<CarPart>`

它可能是这样的

```
public IEnumerable<int> AllParts
{
    get
    {
        for (Current = Head; Current != null; Current = Current.Next)
        {
            yield return Current;
        }
    }
} 
```

用法是

```
foreach(part in Parts.AllParts.OrderBy(p => p.PartNumber))
{
    Console.WriteLine("Part #:      {0}", part.PartNumber);
} 
```

# php - 用于使用 preg_replace_callback 评估 html 的 if/else 条件的 PHP 正则表达式模式

> ID：15601632
> 
> 赞同：2
> 
> 时间：2013-03-24T17:26:02.343
> 
> 标签：php, html, regex, preg-replace-callback

我想要一个正则表达式模式来评估手动创建的 html 标签中的 if/else，如下所示：

```
<if condition="$condition">
    Return value if true
<else/>
    Return value if false
</if> 
```

而且，更具体地说：

```
<if condition="$condition">
    Return value if true
<elseif condition="$another_condition"/>
    Return value if the above is true
<elseif condition="$more_condition"/>
    Return value if the above is true
<else/>
    Return value if non of the above is true
</if> 
```

基本上，我想获取所有“条件”的反向引用返回值，以及“返回值”，以练习将 php 变量打印到 html 文件。例子：

*   在第一个中，$2 是 $condition，$3 是返回值，如果为真，则为 $4，如果为假
*   在第二个中，$2 是 $condition，$3 是如果为真，$4 是第二个条件，$5 是上述条件如果匹配的返回值，以此类推。

我需要一个可以重新调整的模式（如果有的话）

```
<else/> 
```

或者

```
<else condition="blah"> 
```

或多次出现，以正确返回反向引用的值。

这样做的目的是使用一个 php 文件（带有预定义变量）来包含一个 html 模板，并根据 php 变量将值打印出来，而不是直接使用

```
<?php if ($condition) { $result; } ?> 
```

在 html 模板中。

**例子：**

PHP 文件：

```
<?php

  function callback()
  {
    $precondition  = eval('return ' . $matches[1] . ';');

    // Prewritten function for parsing boolean from string
    $condition = parse_boolean($precondition); 

    // Restrict result to boolean only
    if (is_bool($condition))
    {
        // This need better coding based on multiple <elseif ../>
        $ret = ($condition ? $matches[2] : $matches[4]);
    }

    return $ret;      
  }

  $a = 5;
  $b = 6;

  $content = file_get_contents('/html/file/path.html');

  $pattern = 'I need this pattern';
  $output  = preg_replace_callback($pattern, 'callback', $content);

  echo $output;
?> 
```

HTML 文件：

```
<if condition="$a == $b">
    a is equal with b
<elseif condition="$a > $b">
    a is larger than b
<elseif condition="$a < $b">
    a is smaller than b
</if> 
```

运行 PHP 文件时，它将打印：

```
a is smaller than b 
```

我希望得到一个具体的答案，或者任何其他方法来修复我自己编写的代码（不是很好恕我直言）。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:32:50.453

尝试这样的事情：

**PHP**

```
$file = file_get_contents('regexhtml.html');
$html = new DOMDocument();
$html->loadHTMLFile('regexhtml.html');

$conditions = array();
$matches = array();

$ifs = $html->getElementsByTagName('cond');

foreach ($ifs as $if_s) {
     // If
     $ifs1 = $if_s->getElementsByTagName('if');

     $counter = 0;
     foreach ($ifs1 as $if_s1) {
        $conditions[count($conditions)]['if_'.$counter] = array(
            'condition' => $if_s1->getAttribute('condition'),
            'message' => trim($if_s1->nodeValue)
        );
        $counter++;
     }

     // Else-if
     $ifs2 = $if_s->getElementsByTagName('elseif');

     $counter = 0;
     foreach ($ifs2 as $if_s2) {
        $conditions[count($conditions)]['elseif_'.$counter] = array(
            'condition' => $if_s2->getAttribute('condition'),
            'message' => trim($if_s1->nodeValue)
        );
        $counter++;
     }

     // Else
     $ifs3 = $if_s->getElementsByTagName('else');

     $counter = 0;
     foreach ($ifs3 as $if_s3) {
        $conditions[count($conditions)]['else_'.$counter] = array(
            'message' => trim($if_s1->nodeValue)
        );
        $counter++;
     }
}

echo '<pre>';
print_r($conditions);
echo '</pre>'; 
```

您会收到一些警告，因此请`error_reporting('E_NONE');`忽略无效的 HTML 警告。只要您有 xHTML/HTML5 投诉浏览器，它就应该支持自定义标签。

**HTML (regexhtml.html)**

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Title</title>
</head>
<body>
    <cond>
        <if condition="$a == $b">
            a is equal with b
        </if>
        <elseif condition="$a > $b">
            a is larger than b
        </elseif>
        <elseif condition="$a < $b">
            a is smaller than b
        </elseif>
        <else>
            a is smaller than b
        </else>
    </cond>
</body>
</html> 
```

**输出**

```
Array
(
    [0] => Array
        (
            [if_0] => Array
                (
                    [condition] => $a == $b
                    [message] => a is equal with b
                )

        )

    [1] => Array
        (
            [elseif_0] => Array
                (
                    [condition] => $a > $b
                    [message] => a is equal with b
                )

        )

    [2] => Array
        (
            [elseif_1] => Array
                (
                    [condition] => $a < $b
                    [message] => a is equal with b
                )

        )

    [3] => Array
        (
            [else_0] => Array
                (
                    [message] => a is equal with b
                )

        )

) 
```

您现在可以随心所欲地处理输出。剥离它以制作正则表达式或任何你想用它做的事情。

要匹配 PHP 变量（如`$a`），您可能需要一些范围操作；

```
// These won't practically exist, but only as strings in the Array() object
$html_a1 = '12';
$html_b1 = '23';

// Storing the string-based code into new variables
$a1 = eval('return $html_a1;');
$b1 = eval('return $html_b1;');

echo eval('return $html_a1;').'<br /><br />';

if ($a1 == $b1) {
    echo 'a is equal with b';
}
elseif ($a1 > $b1) {
    echo 'a is larger than b';
}
elseif ($a1 < $b1) {
    echo 'a is smaller than b';
}
else {
    echo 'Something else';
} 
```

使用该`DOMDocument()`库，您也可以根据需要立即写回结果（[http://www.php.net/manual/en/class.domdocument.php](http://www.php.net/manual/en/class.domdocument.php)），因此您无需手动重建 HTML。该库还允许您写回被操纵的 HTML。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T18:33:58.277

也许这会对你有所帮助，我使用[preg_replace()](http://www.php.net/manual/en/function.preg-replace.php)有多种模式，我假设你信任创建“HTML 文件”的人：

```
$a = 5;
$b = 7;
$html = '<if condition="$a == $b">
    a is equal with b
<elseif condition="$a > $b">
    a is larger than b
<elseif condition="$a < $b">
    a is smaller than b
</if>';

$new_html = preg_replace(array('/<if condition="(.*)">\s*(.*)/', '/<elseif condition="(.*)">\s*(.*)/', '/<\/if>/'), array('if($1){'.PHP_EOL.'echo "$2";', '}elseif($1){'.PHP_EOL.'echo "$2";', '}'), $html);
eval($new_html); // result
var_dump($new_html); // This is to view the "final" code 
```

# java - Java SQL 异常：解析可调用语句时出错

> ID：15601637
> 
> 赞同：0
> 
> 时间：2013-03-24T17:26:20.917
> 
> 标签：java, mysql

我正在尝试从 Java 应用程序中调用 MySQL 存储过程。但是我收到以下错误：`java.sql.SQLException: Internal error when parsing callable statement metadata (missing parameter type)`。

从应用程序外部调用时，存储过程可以正常运行。此外，应用程序确实成功连接到数据库。

*   MySQL 服务器：5.5.27
*   java版本“1.7.0_15”
*   Java(TM) SE 运行时环境 (build 1.7.0_15-b03)
*   Java HotSpot(TM) 64 位服务器 VM（内部版本 23.7-b01，混合模式）

任何帮助将不胜感激。谢谢！

Java 代码：

```
protected Connection mysql;
...
try {
    CallableStatement query = this.mysql.prepareCall("{call spInsertUser(?,?,?,?,?,?,?)}");
    query.setString(1, "user");
    query.setString(2, "password");
    query.setString(3, "test");
    query.setString(4, "test");
    query.setString(5, "test");
    query.setString(6, "test");
    query.setString(7, "test");
    query.execute();
    query.close();
    this.mysql.close();
}
catch (SQLException e) {
    e.printStackTrace();
} 
```

MySQL 存储过程

```
CREATE DEFINER = `root`@`localhost` PROCEDURE `spInsertUser`(IN `nick` varchar(30),IN `pass` varchar(255),IN `param1` varchar(255),IN `param2`varchar(255),IN `param3` varchar(22), IN `param4` varchar(255), IN `param5` varchar(255))
    SQL SECURITY INVOKER
BEGIN
  DECLARE uid INT DEFAULT 0;

  # check if nick exists
  DECLARE userExists INT DEFAULT 0;
  SELECT count(*) INTO userExists FROM users WHERE nick = nick;
  IF (userExists > 0) THEN
    # do nothing if nick already exists
    # SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'User already exists!';
  ELSE
    # if nick doesn't exist, insert it
    INSERT INTO users (nick, pass, param1, created, active, param2) VALUES (nick, pass, param1, UNIX_TIMESTAMP(), 0, param2);
    SELECT LAST_INSERT_ID() INTO uid;

    IF (uid IS NOT NULL AND uid > 0) THEN
      # create email
      INSERT INTO emails (uid, email) VALUES (uid, email);
    END IF;
  END IF;
END 
```

错误：

```
java.sql.SQLException: Internal error when parsing callable statement metadata (missing parameter type)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1078)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:989)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:975)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:920)
at com.mysql.jdbc.DatabaseMetaData.getCallStmtParameterTypes(DatabaseMetaData.java:1836)
at com.mysql.jdbc.DatabaseMetaData.getProcedureOrFunctionColumns(DatabaseMetaData.java:4305)
at com.mysql.jdbc.DatabaseMetaData.getProcedureColumns(DatabaseMetaData.java:4146)
at com.mysql.jdbc.CallableStatement.determineParameterTypes(CallableStatement.java:856)
at com.mysql.jdbc.CallableStatement.<init>(CallableStatement.java:629)
at com.mysql.jdbc.JDBC4CallableStatement.<init>(JDBC4CallableStatement.java:47)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.CallableStatement.getInstance(CallableStatement.java:523)
at com.mysql.jdbc.ConnectionImpl.parseCallableStatement(ConnectionImpl.java:4313)
at com.mysql.jdbc.ConnectionImpl.prepareCall(ConnectionImpl.java:4397)
at com.mysql.jdbc.ConnectionImpl.prepareCall(ConnectionImpl.java:4371)
at pack.File.method(File.java:65) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:20:43.953

虽然它肯定不是最理想的解决方案，但我`DROP`会重新定义（相同的）存储过程来规避这个错误。元数据似乎有些腐败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-09T15:57:25.323

就我而言，我发现当参数定义时名称和类型之间没有空格时，会引发错误

```
CREATE DEFINER = `root`@`localhost` PROCEDURE `spInsertUser`(IN `nick` varchar(30),IN `pass` varchar(255),IN `param1` varchar(255),IN `param2`varchar(255),IN `param3` varchar(22), IN `param4` varchar(255), IN `param5` varchar(255)) 
```

`param2`varchar(255) 必须是`param2`varchar(255)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-16T08:50:30.927

你需要检查你的sql代码，检查空格。

```
CREATE DEFINER=`root`@`localhost` PROCEDURE `verifyregister`(IN `cdkey` varchar(16), IN `ingsid` int, IN `inusername` varchar(128) character set utf8, OUT `retcode` int) 
```

# c++ - 使用 fstream（Windows 窗体、C++/CLI）写入和读取时出现问题

> ID：15601638
> 
> 赞同：0
> 
> 时间：2013-03-24T17:26:27.417
> 
> 标签：c++, winforms, file, c++-cli, fstream

我正在创建一个小程序来从串行端口（可能）接收多路复用的串行数据，但是在涉及读取和写入我的输出文件的功能时遇到问题。一切都使用 Windows 窗体编译得很好。

**这是应该发生的事情：[下面的代码片段]**

在程序开始时，创建一个文件并插入：

```
DC1
DC2
DC3
DC4
JUNK: 
```

~blah blah blah，COMport 发生了，我们得到一个包含一个数据的字符串~

我们来到了“WriteToFile”函数，它传递了一条数据。（比如 0.95）“NumberCheck”过滤所有非数字（但包括'.'）部分的数据（以防垃圾）。读取文件的每一行，将其长度添加到计数中并检查数据将进入哪个“区域”。如果它是正确的行，则停止行读取，因为标记应指向文件中该行末尾的位置。（fs 是一个故障安全计数器，以防发生奇怪的事情）。然后我找到从那个位置到结尾的文件长度，调整 temp 的大小以适应，用标记之后的内容（包括那个位置）填充 temp，然后在标记处输出我的数据和 temp ...理论上将我的数据插入正确的地方。

**我遇到的问题**是，在第一次运行“WriteToFile”之后，文件行什么也没有出现，所以标记永远找不到它的位置。此外，即使在刷新文本文件后也没有任何变化的迹象（这是实现流的正确方法吗？）

**以下是相关代码：** 打开文件：

```
//opening file with the name in the textbox
string myfilename = txtboxCONT;
myfilename.append(".txt");
myfilename="test.txt"; //temporary name, DELETE BEFORE PUBLISH <<.
fstream myfile(myfilename,ios::in | ios::out | ios::trunc);
if (!myfile.is_open())          
    throw;

//initial file set-up
int i;
for (i=1;i<=4;i++)
    myfile << "DC" << i << "\n";
myfile << "JUNK:";
myfile.flush(); 
```

还有我的写作功能：

```
void WriteToFile(fstream &myfile, string& data, int zone)
{
    data = NumberCheck(data); //filters out non-numeric data, returns "null" if nothing left.
    if (data=="null")       //if the filter leaves no valid output, no need to write.
        return;

    myfile.seekg(0);     //set initial position at the start?
    string fileline, srch, out;
    stringstream ss; //for int to string conversion
    ss << zone;
    srch="DC";
    srch.append(ss.str());
    int fs=1, marker=0;
    while(fs<=4)        //test each line if it beins with DC(zone)
    {
        getline(myfile, fileline);
        marker = marker + fileline.length() + 1;
        if (srch==fileline.substr(0,3))
            break;
        fs++;
    }

    if (fs!=5)
    {
        //can't avoid overwriting so... this is gon' suck...
        string temp;
        myfile.seekg(0,ios::end);
        int length = myfile.tellg();
        length = length - marker;
        temp.resize(length);
        myfile.seekg(marker);
        myfile.read(&temp[0],temp.size());
        myfile.seekp(marker);
        myfile << ',' << data << temp;
    }
    else
    {
        myfile.seekp(0,ios::end);
        myfile << ',' << data;
    }
    myfile.flush();
    data.clear();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:59:54.593

为什么不使用`string::find`, 来找出 DC1、DC2、DC3 ？

看看[字符串库](http://www.cplusplus.com/reference/sstream/stringstream/?kw=stringstream)。

顺便说一句，我不能对你的问题发表评论。

你应该这样做：

```
#include <iostream>
#include <string>
#include <fstream>
#include <sstream> 

using namespace std;

void WriteToFile(fstream &myfile, string& data, int zone)
{

    string fileline, srch;
    stringstream ss; //for int to string conversion
    ss << zone;
    srch="DC";
    srch.append(ss.str());

    int offset; 
    while(!myfile.eof())
    {
        getline(myfile, fileline);
        if ((offset = fileline.find(srch, 0)) != string::npos)
        {
            cout << "My search " << srch << endl;
        }
    }

    myfile.clear();
    myfile.seekg(0, ios::beg);

    // Write here

}

int main()
{
    string myfilename = "test";
    myfilename.append(".txt");
    myfilename="test.txt"; //temporary name, DELETE BEFORE PUBLISH <<.
    fstream myfile(myfilename,ios::in | ios::out | ios::trunc);
    if (!myfile.is_open())          
    throw;

    //initial file set-up
    int i;
    for (i=1;i<=4;i++)  myfile << "DC" << i << "\n";
    myfile << "JUNK:";
    myfile.flush();

    string write = "blalblablab";
    WriteToFile(myfile, write, 1);
    WriteToFile(myfile, write, 2);
    WriteToFile(myfile, write, 3);

    WriteToFile(myfile, write, 4);

    getchar();
    return 0;
} 
```

# ruby-on-rails - Ruby on Rails 安装是否需要对系统目录的写入权限和对 Internet 的无防火墙出站访问？

> ID：15601643
> 
> 赞同：0
> 
> 时间：2013-03-24T17:26:39.160
> 
> 标签：ruby-on-rails, ruby, macos

我有一个具体的建设性问题，这可能是一个更普遍的问题。

具体来说，我试图将 Ruby on Rails 安装在用户目录中，而不是安装在整个系统上。（Mac OS X）。最新的 ruby​​ 和 libyaml的*编译适用于这些命令：*

```
cd ruby-1.9.3-p392/ ; ./configure --prefix=/Users/username/local ; make install
cd yaml-0.1.4/ ; ./configure --prefix=/Users/username/local ; make install 
```

我将 LD_LIBRARY_PATH 设置为本地 lib 目录：

```
$ echo $LD_LIBRARY_PATH
/Users/username/local/lib 
```

但它不会让我安装 rails gem：

```
gem install rails
/Users/username/local/lib/ruby/1.9.1/yaml.rb:56:in `<top (required)>':
It seems your ruby installation is missing psych (for YAML output).
To eliminate this warning, please install libyaml and reinstall your ruby. 
```

即使我在 /Users/username/local/lib 中有这些：

```
libyaml-0.2.dylib
libyaml.a
libyaml.dylib
libyaml.la 
```

如果我能得到这个具体问题的答案，我就不会卡住了。 *libyaml 实际上必须在 /usr/local/lib 中吗？*

（实际上如果答案是肯定的，我仍然会被卡住，但我会知道放弃！）

更一般地说，Ruby on Rails 安装是否需要对系统目录的写入权限和对 Internet 的无防火墙出站访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:44:21.407

在您的主目录 RVM 中安装 Ruby on Rails 是 IMO 最简单的方法。看看[https://rvm.io/](https://rvm.io/)

我写了安装过程的详细说明：http: [//xyzpub.com/en/ruby-on-rails/3.2/rails3-install-osx.html](http://xyzpub.com/en/ruby-on-rails/3.2/rails3-install-osx.html)

# c# - 如何暴露WhenAny等

> ID：15601656
> 
> 赞同：0
> 
> 时间：2013-03-24T17:28:04.563
> 
> 标签：c#, wpf, reactiveui

我确定我错过了一些东西，或者让自己陷入了一个奇怪的沮丧角落，但这就是我想要做的。

我有一个 WPF 应用程序，使用 Unity 作为 IoC。我有许多具有接口的服务。我通过接口处理我的服务，以便可以轻松地更换服务，或者我可以为最终用户提供选择。所有标准接口编程的东西。

实际上，我所有的服务都实现了 ReactiveObject。我现在想做一些命令处理的东西，并试图让 CanExecute 行为正常工作。

我的基本问题是我不能使用WhenAny，除非我将接口转换为物理实现（从而获得用于编译的完整类型层次结构，可以看到WhenAny）。但是，这种转换违反了接口，意味着我失去了交换实现的能力。

是否有一个 ReactiveUI 接口暴露了 WhenAny 等，我可以从中派生我的服务接口，从而能够使用 ReactiveUI 的强大功能，同时保持非特定类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T06:21:06.520

为什么不能在作为接口的实例上使用WhenAny？从 ReactiveUI 4.x 开始，WhenAny 应该在*每个*对象上。

如果您仍在使用 3.x，则可以这样编写接口：

```
interface ICoolInterface : IReactiveNotifyPropertyChanged
{
    /* ... */
} 
```

# facebook - Facebook 登录仅适用于一位用户

> ID：15601661
> 
> 赞同：0
> 
> 时间：2013-03-24T17:28:17.180
> 
> 标签：facebook, login

我正在使用 js sdk 并且有一个奇怪的问题。当我使用我的 fb 帐户（fb 应用程序的所有者）时，登录工作得很好......但如果我尝试使用不同的帐户使用它，我得到：

```
"An error occurred. Please try again later." 
```

请分享一些想法和指针......只是为了知道在哪里寻找问题。

如果有帮助，js登录功能就是这样：

```
window.fbAsyncInit = function() {
    API = FB;

    API.init({
        appId      : '460342137362549',
        status     : true, // check the login status upon init?
        cookie     : true, 
        xfbml      : true  // parse XFBML tags on this page?
    });

    API.getLoginStatus(function(response) {
        $rootScope.$broadcast('facebookInitDone');

        if (response.status === 'connected') {
            getUser();
            status = 'connected';
        } else if (response.status === 'not_authorized') {
            status = 'not_authorized';
        } else {
            status = 'not_logged_in';
        }
    });

};

service.login = function(successFunc) {

    //if there is no init done yet, no internet or delay
    if(status === '') {
        return false;
    }

    API.login(function(response) {

        if (response.authResponse) {
            getUser();

            if(successFunc) {
                successFunc();
            }
        } else {
            $rootScope.$broadcast('facebookUserLoginCanceled');
        }
    }, {scope: 'email,user_photos'});
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:31:23.317

这可能与 Facebook 中的应用程序配置有关。您应该确保在 Facebook 的应用程序设置中禁用沙盒模式。启用沙盒模式后，只有应用开发者可以访问应用。

# c# - 从 blob 下载在本地工作，但在发布后不能

> ID：15601670
> 
> 赞同：1
> 
> 时间：2013-03-24T17:29:06.573
> 
> 标签：c#, visual-studio, download, cloud, azure-blob-storage

我正在创建一个网站，可用于将文件上传到云端并下载相同的文件。当我在本地运行时尝试下载文件时，一切正常。将文件发布到 Azure 后，状态显示文件已下载，但文件在下载位置不可用。提前致谢

```
//My Download Code
` protected void OnDownloadImage(object sender, CommandEventArgs e)
  {
     var account = CloudStorageAccount.FromConfigurationSetting("DataConnectionString");
     var client = account.CreateCloudBlobClient();
     CloudBlobContainer blobContainer = client.GetContainerReference("Gallery");
     var blobUri = (string)e.CommandArgument;
     var srcBlob = this.GetContainer().GetBlobReference(blobUri);
     srcBlob.FetchAttributes(new BlobRequestOptions { BlobListingDetails = BlobListingDetails.Metadata });
     var path = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.DesktopDirectory));
     path = path + @"\AJStorage";
     Directory.CreateDirectory(path);
     path = path + "\\" + Path.GetFileName(srcBlob.Metadata["FileName"]);
     srcBlob.DownloadToFile(path);
     this.status.Text = "File Download Successful. File Location : " + path;
   }` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T19:08:48.743

我想我理解这个问题。您正在尝试将文件下载到桌面 - 但这将是 Web 服务器的桌面（您几乎可以肯定没有权限）而不是用户的桌面（这可能是您所追求的）。如果是，你不能直接这样做。而是尝试将文件发送到 HTTP 响应流。（我使用的是 Microsoft.WindowsAzure.StorageClient 中的 DownloadToStream）

# c++ - Bencode的Qt解析方法

> ID：15601671
> 
> 赞同：0
> 
> 时间：2013-03-24T17:29:17.897
> 
> 标签：c++, qt, parsing, lexical-analysis

我正在创建一个简单的[Qt](http://qt-project.org/) [Bencode](http://en.wikipedia.org/wiki/Bencode)解析器，作为熟悉[QString](http://qt-project.org/doc/qt-5.0/qtcore/qstring.html)类的练习。

我当前的方法创建了一个 Bencode 对象，其行为类似于扫描仪，并通过递增地推进字符串指针 ( `pos`) 进行解析，从而生成如下所示的代码 (`bEncoded`是 Bencode [QString](http://qt-project.org/doc/qt-5.0/qtcore/qstring.html) )：

```
void Bencode::parseInteger() {
    qDebug() << "Parsing an Integer";

    if(bEncoded.at(pos) != intChar) {
        qDebug() << "No leading i for integer";
        return;
    }
    pos++;
    QString buf;
    if(bEncoded.at(pos).isNumber() || bEncoded.at(pos) == negChar) {
        buf.append(bEncoded.at(pos));
        pos++;
    }
    while(bEncoded.at(pos).isNumber()) {
        buf.append(bEncoded.at(pos));
        pos++;
    }
    if(!bEncoded.at(pos).unicode() == 'e') {
        qDebug() << "No training e for integer";
        return;
    }
    pos++;
    qDebug("Integer: %i", buf.toInt());
} 
```

我想知道这是否是一种简洁的方法。好像我在滥用`QString::at()`和`QChar==`。当我看到它时，我认为 RegEx 可能更简洁，但我想我也会在这里征求一些意见。

那么 - 如何改进这种方法？

所有代码在这里：[https ://github.com/jif/Bencode](https://github.com/jif/Bencode)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T19:34:23.293

所以我想我找到了一种内存密集度较低的方法。我可以使用 QString::mid() 来提取子字符串，而不是到处创建 QChar 并进行比较。例如，整数解析器变为：

```
int Bencode::parseInteger() {
    qDebug() << "Parsing an Integer";

    // Validate the integer
    if(currentChar() != intChar) {
        qDebug() << "No leading i for integer";
        return 0;
    }
    pos++;
    int len = bEncoded.indexOf(endChar,pos)-pos;
    if(len>0) {
        int intBuf = bEncoded.mid(pos,len).toInt();
        qDebug("Integer: %i", intBuf);
        pos = pos+len+1;
        return intBuf;
    } else {
        qDebug("Integer sytax error at %i",pos);
        return 0;
    }
} 
```

对我来说看起来更简洁:)

# php - mysql代码中真正令人讨厌的错误

> ID：15601675
> 
> 赞同：-1
> 
> 时间：2013-03-24T17:29:42.290
> 
> 标签：php, mysql, function, fetch

我目前收到错误：

> 警告：mysql_fetch_assoc() 期望参数 1 是资源，布尔值在第 23 行的 C:\xampp\htdocs\Project\core\functions\image.php 中给出

我已经尝试了 mysql_error 并返回：

> 查询为空

我查看了查询，似乎没有任何问题，我不明白我做错了什么。

这是代码：

```
function get_images($album_id) {
    $album_id = (int)$album_id;

    $images = array();

    $image_query = mysql_query("SELECT `image_id`, `timestamp`, `ext` FROM `images` WHERE `album_id`=$album_id AND `customers_custnum`=".$_SESSION["customers_custnum"]);
    while ($images_row = mysql_fetch_assoc($image_query)) {
        $images[] = array(
            'id' => $images_row["image_id"],
            'album' => $images_row["album_id"],
            'timestamp' => $images_row["timestamp"],
            'ext' => $images_row["ext"]
        );
    }
    return $images;
} 
```

任何帮助将不胜感激！谢谢你的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:37:04.097

首先，您不应该使用`mysql_*`函数。[看这里](http://php.net/manual/en/function.mysql-query.php)的大红框。考虑改用[PDO](http://php.net/manual/en/book.pdo.php)或[MySQLi](http://php.net/manual/en/book.mysqli.php)。

其次，看起来您可能对[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)持开放态度。你应该[逃避你的查询](http://php.net/manual/en/function.mysql-real-escape-string.php)。

第三，您应该始终进行错误检查。根据[mysql_fetch_assoc()](http://php.net/manual/en/function.mysql-fetch-assoc.php)的文档：

> 返回与获取的行相对应的字符串关联数组，如果没有更多行，则返回 FALSE。

所以你应该做类似的事情：

```
$res = mysql_fetch_assoc($query);
if(!$res) {
   die('Query error: ' . mysql_error());
} 
```

虽然，您可能希望不那么残酷，而不是简单地消亡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T17:33:18.680

尝试添加一些错误处理，以便您可以看到错误和您尝试执行的 SQL，例如

```
$sql="SELECT `image_id`, `timestamp`, `ext` FROM `images` WHERE `album_id`=$album_id AND `customers_custnum`=".$_SESSION["customers_custnum"];

$image_query = mysql_query($sql);
if ($image_query){
  while ($images_row = mysql_fetch_assoc($image_query)) {
    $images[] = array(
        'id' => $images_row["image_id"],
        'album' => $images_row["album_id"],
        'timestamp' => $images_row["timestamp"],
        'ext' => $images_row["ext"]
    );
  }  
  return $images;
}
else
{
   $err=mysql_error();
   print "FAILED: $err while executing $sql";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T17:37:14.710

您的查询有问题。这就是**mysql_query**返回**FALSE**而不是结果集或**"resource"**的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T17:38:20.190

你的查询是错误的。 **正确的查询是**：

```
$image_query = mysql_query("SELECT `image_id`, `album_id`, `timestamp`, `ext` FROM `images` WHERE `album_id`=$album_id AND  `customers_custnum`=".$_SESSION['customers_custnum']); 
```

`album_id`您在查询字符串中丢失了。`Edit`您的查询和代码将起作用`perfectly`。

# ios - 用户时间线的 Twitter JSON URL

> ID：15601676
> 
> 赞同：0
> 
> 时间：2013-03-24T17:29:48.483
> 
> 标签：ios, twitter, hashtag

我有一个简单的问题，在我的 iOS 应用程序中，我有 twitter 搜索 api。我正在寻求实现对 hastags 和用户时间线的搜索。对于 hastags，我有网址：[http](http://search.twitter.com/search.json?q=%23HASHTAGHERE) ://search.twitter.com/search.json?q=%23HASHTAGHERE但我无法找到用户时间线的 JSON 网址。如果有人能指出这一点，那就太好了。谢谢你

HATAG 的电流：

> ```
> NSString *urlString = [NSString stringWithFormat:@"http://search.twitter.com/search.json?q=&ands=%@&phrase=&rpp=50",searchTerm];
>   NSURL *url = [NSURL URLWithString:urlString];       //Setup and start async download 
> ```
> 
> NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url]; NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T05:38:13.390

用户时间线的 URL：[https ://api.twitter.com/1.1/statuses/user_timeline.json](https://api.twitter.com/1.1/statuses/user_timeline.json)

来源：[https ://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline](https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline)

请注意，这适用于 iOS 5+，因为它使用`TWRequest`

```
 NSURL *getTimeline = [NSURL URLWithString:@"https://api.twitter.com/1.1/statuses/user_timeline.json"];

    NSDictionary *parameters = [NSDictionary dictionaryWithObjectsAndKeys:
                               <twitter screen name goes here>, @"screen_name",
                                nil];

    TWRequest *twitterRequest = [[TWRequest alloc] initWithURL:getTimeline
                                                    parameters:parameters
                                                 requestMethod:TWRequestMethodGET];

//Set a twitter account (Gotten from iOS 5+)
    [twitterRequest setAccount:self.twitterAccount];

    [twitterRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error)
     {
         if (!error)
         {             
             JSONDecoder *decoder = [[JSONDecoder alloc] initWithParseOptions:JKParseOptionNone];
             NSArray *twitterTimeline = [decoder objectWithData:responseData];

         }
         else
         {
             //Deal with error
         }

     }]; 
```

如果您只想要一个没有任何身份验证等的 JSON 时间线，那么您可以使用： [http://api.twitter.com/1/statuses/user_timeline.json?screen_name=(screen-name-here)](http://api.twitter.com/1/statuses/user_timeline.json?screen_name=(screen-name-here))

# solr - 如何使用 Solr 和 Google Places API 同时过滤结果？

> ID：15601677
> 
> 赞同：0
> 
> 时间：2013-03-24T17:29:51.097
> 
> 标签：solr, google-places-api

我想使用 Apache Solr 过滤内容，然后使用 Google Places API 过滤结果，反之亦然。实际上我想从谷歌地方使用[这个](https://developers.google.com/places/documentation/search#PlaceSearchRequests)API。

所以我想过滤两个位置（使用 Google Places API）和一些功能（使用 Apache Solr）。这可能吗？如果可以怎么办？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T19:54:41.770

这是一个悬而未决的问题，所以我不确定您需要什么语言、平台等。另外，你开始了吗？如果是这样，请发布您的代码，以便我们添加。

如果没有代码，我能想到的回答这个问题的唯一方法是概念上：

要调用 Solr 和 Google Places，您只需使用 HTTP URL 请求。

对于 Google 地方信息，这可以是：

```
https://maps.googleapis.com/maps/api/place/nearbysearch/output?Key&lat&long&radius 
```

其中 Key、Lat、Long 和 Radius 只是您可以/应该使用的一些参数。

对于 Solr，这可以是：

```
http://localhost:8983/solr/select?q=*:*&wt=json 
```

哪里`*:*`意味着向 Solr 询问 json 格式的所有内容。显然，您还希望为此添加参数以调用特定功能，但重点是回答问题，您可以使用 HTTP URL 请求查询这两个问题，然后将必要的参数添加到每个 URL 的末尾。

根据您选择的语言，调用这些 URL 的代码看起来会有所不同，但效果是一样的。

将 wt=json 保留为 Solr 参数可能也是一个好主意，因为 Google Places 也会以 json 格式返回其结果 - 因此在这两个结果中使用 json 可能会更容易和更快。

我希望这有帮助。如果有帮助，请随时发表评论或跟进问题。

# c - 使用 shmctl 删除共享内存段

> ID：15601683
> 
> 赞同：18
> 
> 时间：2013-03-24T17:30:20.720
> 
> 标签：c, linux, shared-memory

我对 linux 感到`man pages`困惑`shmctl()`。我使用以下命令：`shmctl (id , IPC_RMID , 0)`删除共享段。这`man pages`似乎与记忆的寿命相矛盾。

[手册页](http://linux.die.net/man/2/shmctl)指出：

> IPC_RMID
> 
> 标记要销毁的段。该段只有在最后一个进程将其分离后才会真正被销毁（即，当相关结构 shmid_ds 的 shm_nattch 成员为零时）。调用者必须是所有者或创建者，或者具有特权。如果段已被标记为销毁，则将设置 IPC_STAT 检索的相关数据结构中 shm_perm.mode 字段的（非标准）SHM_DEST 标志。

如果我是正确的，我相信这意味着如果您有两个都附加到共享内存的进程（让我们称它们为`Process1`和`Process2`），`Process1`则可以创建共享内存、附加、分离、破坏共享内存并最终终止。然后内存将仍然存在，直到`Process2`也分离。

这个对吗？

其次，这句话是什么`man pages`意思：

> 调用者必须确保一个段最终被销毁；否则它的错误页面将保留在内存或交换中。

这使得它看起来像`Process1`，因为它标记了要删除的段，需要阻塞直到所有其他进程被分离，以确保内存被删除。但这似乎与上述说法相矛盾。我也不知道如何做到这一点（如果应该这样做的话），所以如果是这样的话，你能否解释一下我将如何去做。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-24T20:12:38.637

你的第一个推理是正确的。共享段将一直存在，直到两者都存在：它被标记`IPC_RMID`并且最后一个进程分离。

第二个片段的目的是提醒您，在使用共享内存的解决方案中，您需要有一些进程将其标记为销毁，否则它将永远保留在内存/交换中。`IPC_RMID`在创建段后立即使用可能是个好主意。

如果不确定是否成功释放内存，可以使用`ipcs`程序列出剩余的段。

# php - 为什么在 SimpleTest 中包含 web_tester.php 会使测试完成 1/2

> ID：15601690
> 
> 赞同：0
> 
> 时间：2013-03-24T17:30:56.593
> 
> 标签：php, simpletest

我试图按照 SimpleTest 网站上的示例进行操作，每当我包含 web_tester.php 时，状态栏就会从 1/1 完成变为 1/2 完成。为什么是这样？

例如，我尝试创建一个示例测试用例，它具有以下代码：

```
<?php
    require_once('simpletest/autorun.php');
    require_once('simpletest/web_tester.php');

    class TestOfLastcraft extends WebTestCase {

        function testHomepage() {
            $this->assertTrue($this->get('http://www.lastcraft.com/'));
        }
    }
?> 
```

当我在浏览器中查看此文件时，绿色状态栏显示 1/2 测试已完成。它试图运行的其他测试是什么/在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T04:03:05.930

您应该在代码中包含以下代码，这一行可以假装 Simpletest 将 WebTestCase 计为 TestCase。

```
SimpleTest::ignore( 'WebTestCase' ); 
```

# matplotlib - ipython --pylab on cygwin: TclError: no display name and no $DISPLAY environment variable

> ID：15601695
> 
> 赞同：4
> 
> 时间：2013-03-24T17:31:34.627
> 
> 标签：matplotlib, cygwin, tkinter, ipython

我最近按照此处的说明安装了 ipython：http: [//ardiyu07.blogspot.com/2012/04/ipython-012-installation-in-cygwin.html](http://ardiyu07.blogspot.com/2012/04/ipython-012-installation-in-cygwin.html)。

当我运行时，`'ipython --pylab'`我收到以下错误消息。我用谷歌搜索并找到了有关此错误的帖子，但在不同的上下文中。当我使用 --pylab 参数启动 ipython 时，就会发生我的问题。我知道这与 matplotlib gui 交互有关，但不确定到底是什么。我很感激指导。

```
$ ipython --pylab
Python 2.7.3 (default, Dec 18 2012, 13:50:09)
Type "copyright", "credits" or "license" for more information.

IPython 0.13.1 -- An enhanced Interactive Python.
?         -> Introduction and overview of IPython's features.
%quickref -> Quick reference.
help      -> Python's own help system.
object?   -> Details about 'object', use 'object??' for extra details.

Welcome to pylab, a matplotlib-based Python environment [backend: TkAgg].
For more information, type 'help(pylab)'.
[TerminalIPythonApp] GUI event loop or pylab initialization failed
---------------------------------------------------------------------------
TclError                                  Traceback (most recent call last)
/usr/lib/python2.7/site-packages/IPython/core/interactiveshell.pyc in enable_pylab(self, gui, import_all)
   2780         # Now we must activate the gui pylab wants to use, and fix %run to take
   2781         # plot updates into account
-> 2782         self.enable_gui(gui)
   2783         self.magics_manager.registry['ExecutionMagics'].default_runner = \
   2784         mpl_runner(self.safe_execfile)

/usr/lib/python2.7/site-packages/IPython/lib/inputhook.pyc in enable_gui(gui, app)
    526         e = "Invalid GUI request %r, valid ones are:%s" % (gui, guis.keys())
    527         raise ValueError(e)
--> 528     return gui_hook(app)
    529

/usr/lib/python2.7/site-packages/IPython/lib/inputhook.pyc in enable_tk(self, app)
    322         if app is None:
    323             import Tkinter
--> 324             app = Tkinter.Tk()
    325             app.withdraw()
    326             self._apps[GUI_TK] = app

/usr/lib/python2.7/lib-tk/Tkinter.pyc in __init__(self, screenName, baseName, className, useTk, sync, use)
   1683                 baseName = baseName + ext
   1684         interactive = 0
-> 1685         self.tk = _tkinter.create(screenName, baseName, className, interactive, wantobjects, useTk, sync, use)
   1686         if useTk:
   1687             self._loadtk()

TclError: no display name and no $DISPLAY environment variable 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:37:49.460

输入`startxwin`cygwin 终端（您将需要 cygwin setup.exe 中提供的 X11 库）然后您可以`ipython --pylab`从新的终端窗口运行类似的命令，该命令`plot(range(10))`将打开一个新窗口，但您还需要调用`plt.draw()`绘图与原生 pylab 不同，与原生 pylab 相比，cygwin 中绘图的窗口控制也很差。

在此过程中我不需要编辑任何安装文件，您可能需要“pip uninstall matplotlib”并重新安装，直到您通过 cygwin setup.exe 安装了所需的库（tkinter 和我相信 X11-devel 库是必需的） .

通过 ez_setup.py 获取 setuptools

```
wget http://peak.telecommunity.com/dist/ez_setup.py
python ez_setup.py
easy_install pip 
pip install numpy 
pip install ipython
pip install matplotlib 
```

# android - 使用 onTouchEvent 添加对象

> ID：15601700
> 
> 赞同：1
> 
> 时间：2013-03-24T17:31:50.937
> 
> 标签：android, opengl-es-2.0

我希望有人能提供帮助——我正在 Opengl es 2.0 中开发动态壁纸。除了一个区域，我对一切都很好。当用户触摸屏幕时，我希望在该特定点出现一个新对象。但我无法让它工作。

这是我的渲染器代码

```
 public class Renderer implements GLSurfaceView.Renderer 
{

     private final Context mActivityContext;

     private float x = 0;

     private float y = 0;

     private Object mObject;

    public Renderer(final Context activityContext){ 

    mActivityContext = activityContext;

}

public void onSurfaceCreated(GL10 glUnused, EGLConfig config){

        if (mObject!=null){

            //code below initiates textures and shaders
        mObject.onSurfaceCreated(mActivityContext);

        }

            //view matrix code goes here

}

public void onSurfaceChanged(GL10 glUnused, int width, int height)  {

//setup projection matrix 
```

}

```
public void onDrawFrame(GL10 glUnused) {

    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT | GLES20.GL_DEPTH_BUFFER_BIT);

     if (mObject!=null){

     mObject.drawParticle();

     mObject.update();

                }

}

 public void onTouchEvent(MotionEvent me) {

        if (me.getAction() == MotionEvent.ACTION_DOWN) {
        x = me.getX();
        y = me.getY();

        //add new object 
        mObject = new Object (x,y);

}

}
} 
```

当我触摸屏幕时，什么也没有发生（没有添加对象）。请问我做错了什么？

非常感谢期待。

# ms-access - 有没有办法破解/恢复 MDE 文件的密码？

> ID：15601701
> 
> 赞同：0
> 
> 时间：2013-03-24T17:31:57.660
> 
> 标签：ms-access, vba

我有一个很久以前创建的 mde 文件，需要进行一些更改。现在我没有源代码或 mdb 文件的备份。有没有办法获取 mdb 文件。我用谷歌搜索，但大多数链接都是针对 excel 的。任何专家都可以在这个问题上指导我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T10:36:05.737

据我所知，唯一可以恢复 MDE/ACCDe 的服务是由[EverythingAccess](http://www.everythingaccess.com/mdeconversion.htm)的人提供的。

我不知道该服务的质量/成本，但[他们的一些其他产品](http://www.everythingaccess.com/vbwatchdog.htm)的实施显示了我对 MS Access 内部结构的深入了解，这是我在其他地方从未见过的。
纯粹的巫术。

# node.js - express.js 中 app.use 和 app.get 的区别

> ID：15601703
> 
> 赞同：255
> 
> 时间：2013-03-24T17:32:04.140
> 
> 标签：node.js, express

我对express和node.js有点陌生，我无法弄清楚app.use和app.get之间的区别。看来您可以同时使用它们来发送信息。例如：

```
app.use('/',function(req, res,next) {
    res.send('Hello');
    next();
}); 
```

似乎与此相同：

```
app.get('/', function (req,res) {
   res.send('Hello');
}); 
```

* * *

## 回答 #1

> 赞同：259
> 
> 时间：2013-03-24T17:44:48.657

[`app.use()`](http://expressjs.com/api.html#app.use)旨在将[中间件](http://expressjs.com/api.html#middleware)绑定到您的应用程序。这`path`是一个“ *mount* ”或“ *prefix ”路径，并将中间件限制为仅适用于以它****开头***的任何请求的路径。它甚至可以用来嵌入另一个应用程序：

```
// subapp.js
var express = require('express');
var app = modules.exports = express();
// ... 
```

```
// server.js
var express = require('express');
var app = express();

app.use('/subapp', require('./subapp'));

// ... 
```

通过指定`/`为“ *mount* ”路径，`app.use()`将响应以 开头的任何路径`/`，它们都是所有路径，并且与使用的 HTTP 动词无关：

*   `GET /`
*   `PUT /foo`
*   `POST /foo/bar`
*   等等

[`app.get()`](http://expressjs.com/en/api.html#app.get)另一方面，它是 Express[应用程序路由](http://expressjs.com/api.html#app.VERB)`GET`的一部分，用于在使用HTTP 动词请求时匹配和处理特定路由：

*   `GET /`

而且，您的示例的等效路由`app.use()`实际上是：

```
app.all(/^\/.*/, function (req, res) {
    res.send('Hello');
}); 
```

* * *

（*更新：试图更好地展示差异。*）

包括 在内的路由方法`app.get()`是方便的方法，可帮助您更精确地调整对请求的响应。它们还添加了对[参数](http://expressjs.com/en/guide/routing.html#route-parameters)和`next('route')`.

每个`app.get()`都调用`app.use()`，因此您当然可以`app.use()`直接使用它来完成所有这些操作。但是，这样做通常需要（可能不必要地）重新实现不同数量的样板代码。

例子：

*   对于简单的静态路由：

    ```
    app.get('/', function (req, res) {
      // ...
    }); 
    ```

    对比

    ```
    app.use('/', function (req, res, next) {
      if (req.method !== 'GET' || req.url !== '/')
        return next();

      // ...
    }); 
    ```

*   对同一路线使用多个处理程序：

    ```
    app.get('/', authorize('ADMIN'), function (req, res) {
      // ...
    }); 
    ```

    对比

    ```
    const authorizeAdmin = authorize('ADMIN');

    app.use('/', function (req, res, next) {
      if (req.method !== 'GET' || req.url !== '/')
        return next();

      authorizeAdmin(req, res, function (err) {
        if (err) return next(err);

        // ...
      });
    }); 
    ```

*   带参数：

    ```
    app.get('/item/:id', function (req, res) {
      let id = req.params.id;
      // ...
    }); 
    ```

    对比

    ```
    const pathToRegExp = require('path-to-regexp');

    function prepareParams(matches, pathKeys, previousParams) {
      var params = previousParams || {};

      // TODO: support repeating keys...
      matches.slice(1).forEach(function (segment, index) {
        let { name } = pathKeys[index];
        params[name] = segment;
      });

      return params;
    }

    const itemIdKeys = [];
    const itemIdPattern = pathToRegExp('/item/:id', itemIdKeys);

    app.use('/', function (req, res, next) {
      if (req.method !== 'GET') return next();

      var urlMatch = itemIdPattern.exec(req.url);
      if (!urlMatch) return next();

      if (itemIdKeys && itemIdKeys.length)
        req.params = prepareParams(urlMatch, itemIdKeys, req.params);

      let id = req.params.id;
      // ...
    }); 
    ```

> 注意：Express 对这些功能的实现包含在其[`Router`、`Layer`和`Route`](https://github.com/expressjs/express/tree/4.16.3/lib/router).

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2013-03-24T17:45:11.310

`app.use`是 Express 所依赖的中间件框架 Connect 的“低级”方法。

这是我的指导方针：

*   `app.get`如果要公开 GET 方法，请使用。
*   如果`app.use`您想添加一些中间件（HTTP 请求到达您在 Express 中设置的路由之前的处理程序），或者如果您想使您的路由模块化（例如，公开一组路由来自其他 Web 应用程序可以使用的 npm 模块）。

* * *

## 回答 #3

> 赞同：53
> 
> 时间：2016-11-16T09:47:47.017

简单的 app.use 表示“在所有请求上运行”
app.get 表示“在 GET 请求上运行，对于给定的 URL”</p>

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2013-03-24T17:38:47.940

`app.get`当[HTTP 方法](http://www.w3schools.com/tags/ref_httpmethods.asp)设置为时调用`GET`，而`app.use`不管 HTTP 方法如何调用，因此定义了一个位于 express 包允许您访问的所有其他 RESTful 类型之上的层。

* * *

## 回答 #5

> 赞同：28
> 
> 时间：2018-05-29T11:01:30.683

`app.use`&之间的区别`app.get`：

`app.use`→ 一般用于在你的应用程序中引入中间件，可以处理所有类型的 HTTP 请求。

`app.get`→ 仅用于处理 GET HTTP 请求。

`app.use`现在， &之间存在混淆`app.all`。毫无疑问，它们有一个共同点，即两者都可以处理所有类型的 HTTP 请求。但是有一些差异建议我们将 app.use 用于中间件，将 app.all 用于路由处理。

1.  `app.use()`→ 只需要一次回调。
    `app.all()`→ 它可以接受多个回调。

2.  `app.use()`只会查看 url 是否以指定路径开头。
    但是，`app.all()`将匹配完整路径。

例如，

```
app.use( "/book" , middleware);
// will match /book
// will match /book/author
// will match /book/subject

app.all( "/book" , handler);
// will match /book
// won't match /book/author   
// won't match /book/subject    

app.all( "/book/*" , handler);
// won't match /book        
// will match /book/author
// will match /book/subject 
```

3.  `next()`call inside`app.use()`将调用下一个中间件或任何路由处理程序，但`next()`call inside`app.all()`将仅调用下一个路由处理程序（`app.all()`等`app.get/post/put...`）。如果后面有任何中间件，将被跳过。因此，建议将所有中间件始终放在路由处理程序之上。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2019-10-11T14:31:35.230

除了上面的解释，我的经验是：

```
app.use('/book', handler); 
```

将匹配所有**以“/book”开头**的请求作为 URL。所以它也匹配 '/book/1' 或 '/book/2'

```
app.get('/book') 
```

**仅匹配具有完全匹配的**GET 请求。它不会处理像'/book/1'或'/book/2'这样的URL

因此，如果您想要一个处理所有路由的全局处理程序，那么您`app.use('/')`可以选择。`app.get('/')`将仅处理根 URL。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-10-21T17:01:30.783

到目前为止，我发现了 3 个主要差异。第三个不是那么明显，你可能会觉得它很有趣。express 的区别是一样的`router`。这意味着`router.use()`and`router.get()`或 other `post`, `put`, `all`, etc 方法也有相同的区别。

1

*   `app.use(path, callback)`将响应任何 HTTP 请求。
*   `app.get(path, callback)`只会响应`GET`HTTP 请求。同理，`post`,`put`等会响应其相应的请求。`app.all()`响应任何 HTTP 请求，因此在这一部分中是相同的`app.use()`。`app.all()`

2

*   `app.use(path, callback)`将匹配请求路径的前缀，如果请求路径的任何前缀匹配路径参数，则响应。比如如果路径参数是`"/"`，那么它会匹配`"/"`,`"/about"`等`"/users/123"`。
*   `app.get(path, callback)`这里 get 将匹配整个路径。其他 HTTP 请求和`app.all()`. 例如，如果路径参数是`"/"`，那么它只会匹配`"/"`。

3

`next('route')` **不适**用于`app.use()`. 它仅适用于其他 HTTP 请求`app.get()`和`app.all()`其他类似功能。

根据**快递文件**：

> next('route') 仅适用于使用 app.METHOD() 或 router.METHOD() 函数加载的中间件函数。
> 
> METHOD 是中间件函数处理的请求的 HTTP 方法（例如 GET、PUT 或 POST），小写。

从这里我们将使用关键字 METHOD 代替`get`, `post`,`all`等。
但是什么是`next('route')`？！

让我们来看看。

## 下一个（'路线'）

我们看到，`app.use()`或者`app.METHOD()`可以采取几个回调/中间件函数。

从**快递文档**中：

> 中间件函数是可以访问请求对象 (req)、响应对象 (res) 和应用程序请求-响应周期中的下一个中间件函数的函数。next 中间件函数通常由名为 next 的变量表示。
> 
> 如果当前中间件函数没有结束请求-响应循环，它必须调用 next() 将控制权传递给下一个中间件函数。否则，请求将被挂起。

所以我们看到每个中间件函数要么调用下一个中间件函数要么结束响应。这对于`app.use()`和也是一样的`app.METHOD()`。

但有时在某些情况下，您可能希望跳过当前路由的所有下一个回调函数，但也不想立即结束响应。因为也许还有其他路线应该匹配。所以要跳过当前路由的所有回调函数而不结束响应，可以运行`next('route')`. 它将跳过当前路由的所有回调函数并搜索以匹配下一个路由。

例如**（来自快速文档**）：

```
app.get('/user/:id', function (req, res, next) {
  // if the user ID is 0, skip to the next route
  if (req.params.id === '0') next('route')
  // otherwise pass the control to the next middleware function in this stack
  else next()
}, function (req, res, next) {
  // send a regular response
  res.send('regular')
})

// handler for the /user/:id path, which sends a special response
app.get('/user/:id', function (req, res, next) {
  res.send('special')
}) 
```

看，在某种情况下`(req.params.id === '0')`，我们想跳过下一个回调函数，但又不想结束响应，因为有另一条具有相同路径参数的路由将被匹配，并且该路由将发送一个特殊的响应。`METHOD`（是的，多次使用相同的路径参数是有效的。在这种情况下，所有路由都将匹配到响应结束）。所以在这种情况下，我们运行`next('route')`并且跳过当前路由的所有回调函数。这里如果条件不满足，那么我们调用下一个回调函数。

这种`next('route')`行为仅在`app.METHOD()`函数中是可能的。

**从快速文档**中回顾：

> next('route') 仅适用于使用 app.METHOD() 或 router.METHOD() 函数加载的中间件函数。

由于跳过当前路由的所有回调函数在 中是**不可能**的`app.use()`，所以在这里我们应该小心。`app.use()`我们应该只使用在任何情况下都不需要跳过的中间件函数。因为我们要么必须结束响应，要么从头到尾遍历所有的回调函数，我们根本不能跳过它们。

您可以访问[这里](https://expressjs.com/en/guide/using-middleware.html)了解更多信息

# python - 使用 python 和 psycopg2 将数据从 S3 复制到 AWS redshift

> ID：15601704
> 
> 赞同：16
> 
> 时间：2013-03-24T17:32:08.200
> 
> 标签：python, psycopg2, amazon-redshift

我在执行复制命令以从 python 将数据从 S3 加载到 Amazon 的 Redshift 时遇到问题。
我有以下复制命令：

```
copy moves from 's3://<my_bucket_name>/moves_data/2013-03-24/18/moves'
credentials 'aws_access_key_id=<key_id>;aws_secret_access_key=<key_secret>'
removequotes
delimiter ','; 
```

当我使用 SQL Workbench/j 执行此命令时，一切都按预期工作，但是当我尝试使用 python 和 psycopg2 执行此命令时，命令通过 OK，但没有加载数据，也没有引发错误。
尝试了以下两个选项（假设 psycopg2 连接正常，因为它是）：

```
cursor.execute(copy_command)  
cursor.copy_expert(copy_command, sys.stdout) 
```

两者都通过而没有警告但尚未加载数据

想法？

谢谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-27T01:19:26.853

我已经成功地使用了这个精确的设置（psycopg2 + redshift + COPY）。你后来答应了吗？SQL Workbench 默认为自动提交，而 psycopg2 默认为打开事务，因此在您在连接上调用 commit() 之前数据将不可见。

完整的工作流程是：

```
conn = psycopg2.connect(...)
cur = conn.cursor()
cur.execute("COPY...")
conn.commit() 
```

我不相信 copy_expert() 或任何 cursor.copy_* 命令可与 Redshift 一起使用。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-12-05T00:53:20.027

首先，确保事务已*提交*。

```
conn = psycopg2.connect(conn_string)
cur = conn.cursor()
cur.execute(copy_cmd_str)
conn.commit() 
```

您也可以通过以下方式确保事务提交（确保释放资源），

```
with psycopg2.connect(conn_string) as conn:
    with conn.cursor() as curs:
        curs.execute(copy_cmd_str) 
```

当连接退出 with 块时，如果该块没有引发异常，则事务被*提交*。如果出现异常，事务将回滚。

其次，当要加载的数据需要很长时间并且超过 connect_timeout （并且无法提交）时，即使执行*提交也无济于事。*因此，当显式提交没有帮助时，请尝试增加超时时间。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-11-29T20:44:07.903

如果您使用的是 sqlalchemy，则复制命令不会自行自动提交。这对我有用：

```
from sqlalchemy import create_engine
eng = create_engine(...)
command = """
copy command here
"""
conn = eng.connect()
result = conn.execution_options(autocommit=True).execute(command)
result.close() 
```

* * *

## 回答 #4

> 赞同：-8
> 
> 时间：2013-03-24T22:20:28.163

语法应该类似于 DDL 语句

```
# Create table
c.execute('''CREATE TABLE stocks
             (date text, trans text, symbol text, qty real, price real)''') 
```

# sql-server-2008 - 用百万个空行填满表格的有效方法

> ID：15601707
> 
> 赞同：1
> 
> 时间：2013-03-24T17:32:22.347
> 
> 标签：sql-server-2008, tsql, insert, common-table-expression

您知道用大量空行填充表格的任何有效方法吗？使用子句插入它们 `WHILE`并不是很有效。用空行填充表格肯定有比这更好的方法：

```
DECLARE @CNT int
SET @CNT = 1
WHILE @CNT < 3
BEGIN
INSERT INTO TAB VALUES( '1' )
SET @CNT = @CNT + 1
END 
```

我还想知道，是否可以在`SELECT`不使用任何现有表的情况下使用子句和 CTE（公用表表达式）显示 1 百万行（编号从 1 到 1000000）。

我将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T17:37:01.633

这是一种生成数字序列的方法：

```
SELECT TOP (1000000) n = CONVERT(INT, ROW_NUMBER() OVER (ORDER BY s1.[object_id]))
INTO yourtable
FROM sys.all_objects AS s1 CROSS JOIN sys.all_objects AS s2
OPTION (MAXDOP 1);

CREATE UNIQUE CLUSTERED INDEX n ON yourtable(n)
-- WITH (DATA_COMPRESSION = PAGE)
; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/6477b/1) of 100 numbers being created。

此代码来自[@Aaron Bertrand 的](https://stackoverflow.com/users/61305/aaron-bertrand)文章[Generate a set or sequence without loops – part 1](http://www.sqlperformance.com/2013/01/t-sql-queries/generate-a-set-1)。本文还包括其他生成数列的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T17:34:59.313

```
CREATE PROCEDURE dorepeat()
BEGIN
    SET @x = 0;
    REPEAT 
        INSERT INTO your_table (value) VALUES ("");
        SET @x = @x + 1; 
    UNTIL @x > 999999 END REPEAT;
END 
```

我认为这样的事情非常快。

# c++ - boost::iostreams::mapped_file 文件路径问题

> ID：15601708
> 
> 赞同：0
> 
> 时间：2013-03-24T17:32:27.570
> 
> 标签：c++, filesystems, memory-mapped-files, boost-iostreams

我在使用 boost 的 mapped_file iostreams 库时遇到了问题。

提升文档：[mapped_file](http://www.boost.org/doc/libs/1_38_0/libs/iostreams/doc/classes/mapped_file.html#mapped_file_params_size)

在阅读了我可以阅读的所有文档和示例之后，我仍然无法让下面的代码工作。我假设当您将 new_file_size 和路径传递给 mapped_file_params 类时，当我使用参数中的 mapped_file_params 对象调用 mapped_file 的构造函数时，它将在所需位置打开（并创建）文件。但它唯一要做的就是在项目工作目录中创建一个名称怪异的文件，例如“%F8/134”，而不是我告诉它的地方。也许我错了，应该在将文件指定给 mapped_file 之前创建文件？阅读文档后，我假设它在您填写 new_file_size 参数时创建了一个新文件。并指定文件名。

以前有人经历过吗？关于如何解决这个问题的任何建议？

这是代码：

```
boost::iostreams::mapped_file_params param(filename); // filename is a std::string with the correct path
param.flags = boost::iostreams::mapped_file::mapmode::readwrite;
param.new_file_size = sizeNeeded; // sizeNeeded is the size of the data
param.length = sizeNeeded;
boost::iostreams::mapped_file fileMap(param); // at this point the file is created
… 
```

谢谢你的时间，

亚历山大

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T14:14:52.030

首先，我不确定**mapmode::readwrite**的支持程度以及 boost::iostream 库的维护程度。出于好奇，我在使用 g++-4.7.2 编译的 Ubuntu 12.04 上尝试了您使用 boost 1.52 稍微“修改”的代码。我还没有看到“奇怪的名字”的问题。该文件是用正确的名称创建的，但**mf.open( param )**尚未完成，因为文件中的**mmap**引发异常：[mapped_file.cpp](http://www.boost.org/doc/libs/1_52_0/libs/iostreams/src/mapped_file.cpp)

```
void* data = 
    ::BOOST_IOSTREAMS_FD_MMAP( 
        const_cast<char*>(p.hint), 
        size_,
        readonly ? PROT_READ : (PROT_READ | PROT_WRITE),
        priv ? MAP_PRIVATE : MAP_SHARED,
        handle_, 
        p.offset );
if (data == MAP_FAILED)
    cleanup_and_throw("failed mapping file"); 
```

如果您可以升级到更新的版本，我会这样做。此外，您可以在调试模式下构建 boost 库并跟踪代码以查看出错的地方。[在这里您可以找到一些在调试模式下](http://www.boost.org/boost-build2/doc/html/bbv2/overview/invocation.html)构建 boost 库的提示

# php - PHP 和 vb.NET 2008 的等效 md5 哈希

> ID：15601713
> 
> 赞同：1
> 
> 时间：2013-03-24T17:32:47.623
> 
> 标签：php, hash, md5

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim source As String = TextBox1.Text
    Using md5Hash As MD5 = MD5.Create()
        Dim hash As String = GetMd5Hash(md5Hash, source)
        TextBox2.Text = hash
    End Using
End Sub 
```

我用上面的代码生成了一个 32 个字符的 md5。“1234567”的 md5 以 **fcea920f7412b5da7be0cf42b8c93759**给出，但我希望 md5 哈希生成为 **d38f0d62daf542c5f10d8f29adacae17**，因为它是由 PHP 的 md5() 函数生成的。

如何在 VB.NET 中生成等效的 md5 哈希？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T07:12:25.327

编码是问题。您在 VB.NET 中用于生成哈希的编码与 PHP 使用的编码不同。您必须使用 PHP 在从 VB.NET 生成散列时使用的相同编码。它可能是这样的：

```
Dim BytesArray() As Byte
BytesArray = System.Text.Encoding.UTF8.GetBytes("Your Input String) 
```

# java - 如何使用 listview 和联系人创建本地联系人列表？

> ID：15601720
> 
> 赞同：0
> 
> 时间：2013-03-24T17:33:38.700
> 
> 标签：java, android, contactscontract

使用以下代码，我正在使用联系人姓名和相应的复选框填充列表视图。

目前，代码只是将整个列表吐到日志中。

我打算从列表中获取选定的联系人并将它们存储在本地，以便它们可以在应用程序的其他活动中使用。

请问您能提供一些指导吗？

我查看了 android 文档以及这里的许多帖子。我现在在这件事上寻求你的帮助。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);

    setContentView(R.layout.nominatecontactsactivitytest);

    this.getListView().setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
    this.getListView().setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);

    Cursor cursor = managedQuery(ContactsContract.Contacts.CONTENT_URI,null, null, null, null);
    startManagingCursor(cursor);
    String[] columns = new String[] { ContactsContract.Contacts.DISPLAY_NAME};

    int[] to = new int[] { android.R.id.text1 };

    SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_multiple_choice, cursor, columns, to);
    this.setListAdapter(adapter);

    Button finishButton = (Button) this.findViewById(R.id.finishButton);
    finishButton.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            SimpleCursorAdapter adapter = (SimpleCursorAdapter) nominateContactsActivity.this.getListAdapter();
            Cursor cursor = adapter.getCursor();

            cursor = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,null,null, null);
            ListView lv = nominateContactsActivity.this.getListView();
            SparseBooleanArray selectedItems = lv.getCheckedItemPositions();

            for (int i = 0; i < selectedItems.size(); i++) {
                int selectedPosition = selectedItems.keyAt(i);
                cursor.moveToPosition(selectedPosition);

                strName=cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
                strTelNo = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));                                                      
                Log.d("NAME: ",strName);
                Log.d("NUM: ", strTelNo);

                }cursor.close();
            }
        });
    } 
```

非常感谢。

编辑：

好的，所以我将使用 sharedpreferences 来存储一个序列化的联系人数组。

不过，我仍然面临实际生成这个数组的问题——有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:57:28.317

I think the best way to share data through your application is to use a Singleton which contain all your data. Here is a good tutorial:

[http://www.roseindia.net/java/beginners/SingletonPattern.shtml](http://www.roseindia.net/java/beginners/SingletonPattern.shtml)

You can also use SharedPreferences if you want persistance between launches of your app:

[http://developer.android.com/reference/android/content/SharedPreferences.html](http://developer.android.com/reference/android/content/SharedPreferences.html)

# android - android后台服务获取位置

> ID：15601724
> 
> 赞同：2
> 
> 时间：2013-03-24T17:33:49.577
> 
> 标签：android, service, android-asynctask, location

我创建了一个可以启动后台服务的应用程序。此服务的目的是监控手机上使用的应用程序，并将此数据与时间戳和坐标一起保存到手机上的 SQLite。

找到应用程序并使用时间戳保存的部分工作正常。但是该位置的部分不起作用。我以前曾与 locationlisteners 合作过，但经过数小时和多次尝试后，我放弃了。我不确定在哪里放置我的位置监听器？现在我已经创建了一个新的内部类，但是当我运行它时，我收到一个错误，说我需要运行 Looper.prepare() 但这没有帮助。然后它说每个线程只能创建一个弯针。

我现在觉得无论我尝试什么都是错误的，因此我希望你们中的一些人可以帮助我。

```
package com.dtu.applogger;

import java.util.Calendar;
import java.util.Timer;
import java.util.TimerTask;

import android.app.Activity;
import android.app.ActivityManager;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.location.LocationProvider;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.IBinder;
import android.os.Looper;
import android.util.Log;
import android.widget.Toast;

public class loggerService extends Service{
DBAdapter dbadapter;
public MyLocationListener mMyLocationListener;
private NotificationManager mNM;
private int NOTIFICATION = 10002; //Any unique number for this notification
protected String latitude;
protected String longitude;
int counter= 0;
static final int UPDATE_INTERVAL= 5000;
private Timer timer= new Timer();
public loggerService() {
    // TODO Auto-generated constructor stub

}

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub

    return null;
}
private void showNotification() {
    // In this sample, we'll use the same text for the ticker and the expanded notification
    CharSequence text = "TITLE";

    // Set the icon, scrolling text and timestamp
    Notification notification = new Notification(R.drawable.call_log, text, System.currentTimeMillis());

    // The PendingIntent to launch our activity if the user selects this notification
    PendingIntent contentIntent = PendingIntent.getActivity(this, 0,
            new Intent(this, MainActivity.class), 0);

    // Set the info for the views that show in the notification panel.
    notification.setLatestEventInfo(this, "Service is running", text, contentIntent);

    // Send the notification.
    mNM.notify(NOTIFICATION, notification);
}
public int onStartCommand(Intent intent, int flags, int startId){
    //showNotification();
    new DoBackgroundTask().execute();
    Toast.makeText(this,  "Service started", Toast.LENGTH_LONG).show();
    return START_STICKY;

}

private class DoBackgroundTask extends AsyncTask{
    String oldPackageName = "com.dtu.applogger";
    DBAdapter dbadapter = new DBAdapter(loggerService.this);

    public DoBackgroundTask() {

    }
    protected String findApp(){
        final LocationManager lm = (LocationManager) loggerService.this.getSystemService(Context.LOCATION_SERVICE);
        ActivityManager am = (ActivityManager) loggerService.this.getSystemService(Activity.ACTIVITY_SERVICE);
        String packageName = am.getRunningTasks(1).get(0).topActivity.getPackageName();

        if(!packageName.equals(oldPackageName) && !packageName.equals("com.dtu.applogger")){
            //save oldPackageName and packageName in DB     
            mMyLocationListener = new MyLocationListener();
            lm.requestLocationUpdates(LocationManager.PASSIVE_PROVIDER, 0, 0, mMyLocationListener);
            String lat = latitude;
            String lng = longitude;

            String mydate = java.text.DateFormat.getDateTimeInstance().format(Calendar.getInstance().getTime());
            String txt = packageName + " : " + mydate;
            dbadapter.open();
            if(packageName.equals("com.android.launcher")){
                dbadapter.saveLog(mydate, oldPackageName, lat, lng);
            }else{
                dbadapter.saveLog(mydate, packageName, lat, lng);
            }

            dbadapter.close();
            oldPackageName = packageName;
            return txt;
        }
        if(packageName.equals(oldPackageName)){
            return null;
        }
        return null;
    }
    @Override
    protected Object doInBackground(Object... params) {
        timer.scheduleAtFixedRate(new TimerTask() {
            public void run() {
                String txt = findApp();
                if(txt != null){
                    Log.d("APP OPEN", "===== " + txt.toString());
                }
            Log.d("loggerService", String.valueOf(++counter));
            }
            }, 0, UPDATE_INTERVAL);

        // TODO Auto-generated method stub
        return null;
    }
}

private class MyLocationListener implements android.location.LocationListener{

    @Override
    public void onLocationChanged(Location location) {
        int lat = (int) (location.getLatitude()*1E6);
        int lng = (int) (location.getLongitude()*1E6);
        latitude = Integer.toString(lat);
        longitude = Integer.toString(lng);
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

}

public void onDestroy(){
    super.onDestroy();
    timer.cancel();

    Toast.makeText(this, "Service Destroyed", Toast.LENGTH_LONG).show();

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:07:20.530

你把事情弄得太复杂了，doInBackground 已经在一个线程中，所以下面的代码应该没问题。

```
@Override
protected Object doInBackground(Object... params) 
{
            while (!isCancelled())
            {
               String txt = findApp();
               if(txt != null)
               {
                    Log.d("APP OPEN", "===== " + txt.toString());
                }
                Log.d("loggerService", String.valueOf(++counter));
                try
                {
                    Thread.sleep(UPDATE_INTERVAL);
                }
                catch (InterruptedException e1)
                {

                }
            }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T23:05:58.713

我现在已经通过在“DoOnBackgroundTasK”上使用实现 LocationListener 并删除了另一个内部类 MyLocationListener 来解决它。虽然我曾尝试过，但现在它可以工作了。虽然只使用 NETWORK_PROVIDER，但如果我使用 PASSIVE_PROVIDER，我会得到一个 RuntimeException。对此有何解释？

我已经粘贴了代码

```
 public class loggerService extends Service{
DBAdapter dbadapter;

private NotificationManager mNM;
private int NOTIFICATION = 10002; //Any unique number for this notification
protected String latitude;
protected String longitude;
int counter= 0;
static final int UPDATE_INTERVAL= 5000;
private Timer timer= new Timer();
public loggerService() {
    // TODO Auto-generated constructor stub

}

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub

    return null;
}
private void showNotification() {
    // In this sample, we'll use the same text for the ticker and the expanded notification
    CharSequence text = "TITLE";

    // Set the icon, scrolling text and timestamp
    Notification notification = new Notification(R.drawable.call_log, text, System.currentTimeMillis());

    // The PendingIntent to launch our activity if the user selects this notification
    PendingIntent contentIntent = PendingIntent.getActivity(this, 0,
            new Intent(this, MainActivity.class), 0);

    // Set the info for the views that show in the notification panel.
    notification.setLatestEventInfo(this, "Service is running", text, contentIntent);

    // Send the notification.
    mNM.notify(NOTIFICATION, notification);
}
public int onStartCommand(Intent intent, int flags, int startId){
    //showNotification();
    new DoBackgroundTask().execute();
    Toast.makeText(this,  "Service started", Toast.LENGTH_LONG).show();
    return START_STICKY;

}

private class DoBackgroundTask extends AsyncTask implements LocationListener{
    String oldPackageName = "com.dtu.applogger";
    DBAdapter dbadapter = new DBAdapter(loggerService.this);

    public DoBackgroundTask() {

    }
    protected String findApp(){

        ActivityManager am = (ActivityManager) loggerService.this.getSystemService(Activity.ACTIVITY_SERVICE);
        String packageName = am.getRunningTasks(1).get(0).topActivity.getPackageName();

        if(!packageName.equals(oldPackageName) && !packageName.equals("com.dtu.applogger")){
            //save oldPackageName and packageName in DB     
            String lat = latitude;
            String lng = longitude;

            String mydate = java.text.DateFormat.getDateTimeInstance().format(Calendar.getInstance().getTime());
            String txt = packageName + " : " + mydate;
            dbadapter.open();
            if(packageName.equals("com.android.launcher")){
                dbadapter.saveLog(mydate, oldPackageName, lat, lng);
                Log.d("LATITUDE ", lat.toString());
                Log.d("LONGITUDE ", lng.toString());
            }else{
                dbadapter.saveLog(mydate, packageName, lat, lng);
            }

            dbadapter.close();
            oldPackageName = packageName;
            return txt;
        }
        if(packageName.equals(oldPackageName) || packageName.equals("com.dtu.applogger")){
            return null;
        }
        return null;
    }
    protected void onPreExecute()
    {
        final LocationManager lm = (LocationManager) loggerService.this.getSystemService(Context.LOCATION_SERVICE);

//
//REQUEST LOCATION UPDATE WORKS WITH NETWORK BUT NOT WITH PASSIVE???
//

        lm.requestLocationUpdates(LocationManager.PASSIVE_PROVIDER, 0, 0, this);
    }
    @Override
    protected Object doInBackground(Object... params) {
        while (!isCancelled()){
                String txt = findApp();
                if(txt != null){
                    Log.d("APP OPEN", "===== " + txt.toString());
                }
            Log.d("loggerService", String.valueOf(++counter));
            try
            {
                Thread.sleep(UPDATE_INTERVAL);
            }
            catch (InterruptedException e1){
            }
        }

        // TODO Auto-generated method stub
        return null;
    }
    @Override
    public void onLocationChanged(Location location) {

        latitude = String.valueOf(location.getLatitude());
        longitude = String.valueOf(location.getLongitude());

    }
    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }
    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }
    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }
}

public void onDestroy(){
    super.onDestroy();
    timer.cancel();

    Toast.makeText(this, "Service Destroyed", Toast.LENGTH_LONG).show();

}

} 
```

# zend-framework - 如何在 Zend 控制器或表单中验证文件上传时的文件名长度

> ID：15601729
> 
> 赞同：0
> 
> 时间：2013-03-24T17:34:18.587
> 
> 标签：zend-framework, file-upload, long-filenames

我尝试为从我的 Zend 表单上传的文件名的长度添加一个验证器。我不知道我是否应该在**表单本身**或`Zend_File_Transfer_Adapter_Http`处理上传中添加这个验证器。但是，现在我正在尝试第二件事 - 请参阅下面的代码。如果要上传的文件名的长度超过 40 个字符，我希望控制器使用错误标志进行重定向。

**`$upload`即使使用 41 个字符长的文件名也会导致有效 - 为什么？**

```
$upload = new Zend_File_Transfer_Adapter_Http();

$upload->addValidators(
        array(
            array('validator' => 'StringLength', 'options' => array(
                'min' => 0,
                'max' => 40))
        )
);

if (!$upload->isValid()) {
    $this->_redirect('/customer/uploadfile/groupid/'.$groupId.'/flag/XXX-TODO-Failure');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:02:15.773

看起来您没有使用显示的代码验证任何内容。

如下更改该行以引用文件名，例如...

```
if(!$upload->isValid( $filenameToValidate ) { 
```

... }

还要记住文件名不是帖子，而是在 $_FILES 超全局中找到。

# android - 接收广播后后台服务被杀死

> ID：15601737
> 
> 赞同：1
> 
> 时间：2013-03-24T17:35:07.967
> 
> 标签：android, service, broadcastreceiver

我有一个广播接收器，它接收`android.intent.action.DOWNLOAD_COMPLETE`从 Android`DownloadManager`类完成的下载。广播接收器在 XML 中定义如下：

```
<receiver android:name=".DownloadReceiver" >
  <intent-filter>
    <action android:name="android.intent.action.DOWNLOAD_COMPLETE" />
  </intent-filter>
</receiver> 
```

如果我保持活动正常进行，每件事都会运作良好。但是，如果服务在后台运行时活动没有运行，则会导致每次`DOWNLOAD_COMPLETE`广播进入时都会杀死后台服务器。

广播接收器是：

```
public class DownloadReceiver extends BroadcastReceiver {
    public void onReceive(Context context, Intent intent) {
       // it will cause MyService to be killed even with an empty implementation!
   }
} 
```

服务是：

```
public class MyService extends Service {

    @Override
    public IBinder onBind(Intent intent) {
        Log.w(TAG, "onBind called");

        return null;
    }

    @Override
    public void onCreate() {
        super.onCreate();

        Log.w(TAG, "onCreate called");

    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        super.onStartCommand(intent, flags, startId);

        Log.w(TAG, "onStartCommand called");

        return START_NOT_STICKY;
    }

    @Override
    public void onDestroy() {
        super.onDestroy();

        Log.w(TAG, "onDestroy called");
    }
} 
```

Activity 启动服务：

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

            startService();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);

    return true;
}

public void startService() {
    Intent start = new Intent(getApplicationContext(), MyService.class);
    startService(start);
}

public void stopService() {
    Intent stop = new Intent(getApplicationContext(), MyService.class);
    stopService(stop);
}
} 
```

知道为什么在活动未运行时服务会被广播杀死吗？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:05:33.260

您从哪里拨打电话`stopService()`？

`Activity`如果您在您的 's中拨打电话`onPause()`，`onStop()`或者`onDestroy()`您`Service`每次离开您的电话`Activity`或当您的电话`Activity`被系统破坏时都会停止。

从您发布的代码中，我看不到`BroadcastReceiver`或系统广播与您之间的任何联系。`Service`

# asp.net - 由于 mime 类型不匹配 (ASP.NET)，CSS 被忽略

> ID：15601741
> 
> 赞同：1
> 
> 时间：2013-03-24T17:35:15.330
> 
> 标签：asp.net

我在我的本地主机（Windows 7）上运行网站。我收到“由于 mime 类型不匹配而忽略了 CSS”。Javascript 和图像也没有加载。

我在本地 IIS 上启用了匿名身份验证。我的本地 IIS 上安装了静态内容功能。

我的 web.config 文件：

```
<authentication mode="Forms">
  <forms loginUrl="/Login.aspx" timeout="30" path="/" protection="All" />
</authentication>
<authorization>
  <deny users ="?" />
  <allow users = "*" />
</authorization> 
```

仍然没有加载 CSS、Javascript 和图像。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:38:49.407

您需要允许所有用户访问静态资产。查看[https://stackoverflow.com/a/1923328/254973](https://stackoverflow.com/a/1923328/254973)以查看需要添加到 web.config 的一些示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-12T13:23:37.970

请记住，`allow=*`在较新版本的 IIS 配置中不包括未经身份验证的用户。对于未经身份验证的用户访问您的文件，您的 web.config 中也必须有`allow=?`。

您`deny=?`的问题是您在未登录时无法加载图像或样式表。

# java - 我应该使用哪个泽西版本？

> ID：15601743
> 
> 赞同：2
> 
> 时间：2013-03-24T17:35:23.503
> 
> 标签：java, maven, jersey

我正在尝试将 Jersey 客户端添加到项目中。我遇到了两个 Jersey 实现。来自 Sun 的一个，现在应该已经过时了，但是可以工作。

```
 <dependency>
        <groupId>com.sun.jersey</groupId>
        <artifactId>jersey-client</artifactId>
        <version>1.17.1</version>
    </dependency> 
```

来自 glassfish 项目的另一个，但是它给出了一个缺少的工件错误。

```
 <dependency>
        <groupId>org.glassfish.jersey</groupId>
        <artifactId>project</artifactId>
        <version>2.0-m13-2</version>
    </dependency> 
```

你知道我应该使用哪个 Jersey 依赖项吗？（我只需要客户端部分）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T17:39:10.693

`com.sun.jersey:jersey-client`是您需要使用的。

# c++ - Clang 在 C++03 模式下支持哪些 C++11 扩展？

> ID：15601745
> 
> 赞同：3
> 
> 时间：2013-03-24T17:35:51.960
> 
> 标签：c++, c++11, clang

`-Wc++11-extensions`在 C++03 模式下编译时，较新版本的 Clang 支持某些 C++11 扩展，但可能会在打开时发出警告。例如，编译这段代码：

```
std::map<int, int> foo;
for(auto &i : foo) {
} 
```

导致`clang test.cpp -std=c++03`这些警告：

```
test.cpp:5:6: warning: 'auto' type specifier is a C++11 extension
      [-Wc++11-extensions]
        for(auto &i : foo) {
            ^
test.cpp:5:14: warning: range-based for loop is a C++11 extension
      [-Wc++11-extensions]
        for(auto &i : foo) { 
```

但编译成功并生成正确的代码。但是，尝试使用例如统一初始化 ( `std::map<int, int> foo{{1,2},{3,4}};`) 失败并出现语法错误。

就我而言，我有一个现有的不可变库，由于某些兼容性问题，它只能在 C++03 模式下编译；开发人员表示他们将在“不久的将来”支持 C++11。我现在想使用 C++11 功能针对这个库编写代码，这样当他们使他们的库与 C++11 兼容时，我就不必再次“现代化”代码。Clang 的 C++11 扩展似乎非常适合此目的，但我不确定我可以使用什么。Clang 的 C++11 扩展是否记录在某处？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T18:53:33.490

您可以在这里使用两个“功能测试”宏：

`__has_feature`和`__has_extension`

这些类似函数的宏采用单个标识符参数，即功能名称。`__has_feature`如果 Clang 支持该功能并在当前语言标准中标准化，则`__has_extension`评估为 1；如果不支持，则评估为 0，而如果 Clang 在当前语言中支持该功能（作为语言扩展或标准语言功能） ，则评估为 1如果不是，则为 0。

这些宏和标识符记录在这里：

[http://clang.llvm.org/docs/LanguageExtensions.html](http://clang.llvm.org/docs/LanguageExtensions.html)

在您的具体示例中，以下 HelloWorld 提供的信息最多：

```
#if __has_extension(cxx_generalized_initializers)
#warning __has_extension(cxx_generalized_initializers) is true
#else
#warning __has_extension(cxx_generalized_initializers) is false
#endif

#if __has_feature(cxx_generalized_initializers)
#warning __has_feature(cxx_generalized_initializers) is true
#else
#warning __has_feature(cxx_generalized_initializers) is false
#endif

#if __has_extension(cxx_range_for)
#warning __has_extension(cxx_range_for) is true
#else
#warning __has_extension(cxx_range_for) is false
#endif

#if __has_feature(cxx_range_for)
#warning __has_feature(cxx_range_for) is true
#else
#warning __has_feature(cxx_range_for) is false
#endif

int main()
{
} 
```

对我来说，使用 -std=c++03 它输出：

```
test.cpp:4:2: warning: __has_extension(cxx_generalized_initializers) is false [-W#warnings]
#warning __has_extension(cxx_generalized_initializers) is false
 ^
test.cpp:10:2: warning: __has_feature(cxx_generalized_initializers) is false [-W#warnings]
#warning __has_feature(cxx_generalized_initializers) is false
 ^
test.cpp:14:2: warning: __has_extension(cxx_range_for) is true [-W#warnings]
#warning __has_extension(cxx_range_for) is true
 ^
test.cpp:22:2: warning: __has_feature(cxx_range_for) is false [-W#warnings]
#warning __has_feature(cxx_range_for) is false
 ^
4 warnings generated. 
```

而使用 -std=c++11 时，输出变为：

```
test.cpp:2:2: warning: __has_extension(cxx_generalized_initializers) is true [-W#warnings]
#warning __has_extension(cxx_generalized_initializers) is true
 ^
test.cpp:8:2: warning: __has_feature(cxx_generalized_initializers) is true [-W#warnings]
#warning __has_feature(cxx_generalized_initializers) is true
 ^
test.cpp:14:2: warning: __has_extension(cxx_range_for) is true [-W#warnings]
#warning __has_extension(cxx_range_for) is true
 ^
test.cpp:20:2: warning: __has_feature(cxx_range_for) is true [-W#warnings]
#warning __has_feature(cxx_range_for) is true
 ^
4 warnings generated. 
```

对于您的用例，您可以在代码为`__has_extension(cxx_generalized_initializers)`true 时使用新功能并使用新功能，否则在 false 时解决它。然后，您的代码将在您升级 clang 或使用的语言模式更改时自动适应。

至于支持哪些语言功能，哪些不支持，文档可能会有所帮助，但我发现编写上述测试是评估我当前的 clang 版本的最快和最准确的方法。

# shell - 链接命令错误（链接：...之后缺少操作数）

> ID：15601746
> 
> 赞同：1
> 
> 时间：2013-03-24T17:35:58.273
> 
> 标签：shell, hyperlink, ubuntu-12.04

我正在尝试运行一个 shell 脚本，该脚本利用**链接**命令来回收一个通用脚本，以便它可以在多个目录中运行。*子目录中的脚本调用名为share*的并行子目录中的共享脚本。调用脚本的内容如下（调用脚本和共享脚本都命名为Allrun）：

```
link ../share/Allrun 
```

该命令应该将此脚本与“share”子目录中实际包含果汁的脚本链接。

现在，这是我在执行上面的代码时得到的：

```
link: missing operand after `../share/Allrun'
Try `link --help' for more information. 
```

我正在使用 Ubuntu-12.04LTS。我尝试运行的脚本用于验证计算流体动力学问题。这是我确信在不同条件下运行的脚本的来源；如果您遵循主“Allrun”脚本中的命令，您将看到它正在尝试做什么：

[http://www.opencae.jp/svn/OpenFOAM-VandV-SIG/AIJ-PWEAB/trunk/CaseB/](http://www.opencae.jp/svn/OpenFOAM-VandV-SIG/AIJ-PWEAB/trunk/CaseB/)

非常感谢您提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:40:32.753

`link`总是有两个参数：现有文件，以及作为第一个链接创建的新文件。如果您要做的是在当前目录中创建指向 Allrun 的硬链接，您需要：

```
link ../share/Allrun Allrun 
```

考虑使用`ln`代替，它允许您省略目标并且更加标准。

# android - 带有过滤器的 ArrayAdapter 的 ArrayIndexOutOfBoundsException

> ID：15601748
> 
> 赞同：10
> 
> 时间：2013-03-24T17:36:06.743
> 
> 标签：android, android-arrayadapter

我得到了`ArrayIndexOutOfBoundsException`下面给出的`ArrayAdapter`启用过滤的自定义实现。我看到过滤代码返回正确的结果集，但是在过滤后呈现视图时，我得到一个异常。我在这里做错了什么。任何帮助都会受到重视。

```
import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.Filter;
import android.widget.ImageView;
import android.widget.TextView;
import com.syntrio.iwm.act.R;

public class IWMArrayAdapter<T> extends ArrayAdapter<T>{

    Activity activity;
    List<T> mItems;
    String[] icons;
    boolean isArrowNeeded=false;
    boolean isIconNeeded=false;
    private ItemsFilter mFilter;

    public IWMArrayAdapter(Activity context,List<T> items) {
        super(context, R.layout.item_row,items);
        activity=context;
        mItems=items;
    }

    public void setIcons(String[] iconList){
        if(iconList!=null && iconList.length>0){
            icons=iconList;
            isIconNeeded=true;
        }
    }
    public void setArrowNeeded(){
        isArrowNeeded=true;
    }

    @Override
    public View getView(int position, View convertView,ViewGroup parent) {
        View row = convertView;
        if (row == null) {
            LayoutInflater inflater = activity.getLayoutInflater();
            row = inflater.inflate(R.layout.item_row_array, parent, false);
        }
        TextView label = (TextView) row.findViewById(R.id.label);
        label.setText(mItems.get(position).toString());
        ImageView icon;
        ImageView arrow;
        if(isIconNeeded){
            icon = (ImageView) row.findViewById(R.id.row_image);
            if(icons.length==1){
                icon.setImageResource(activity.getResources().getIdentifier(icons[0], "drawable", "com.syntrio.iwm.act"));
            }
            else{
                icon.setImageResource(activity.getResources().getIdentifier(icons[position], "drawable", "com.syntrio.iwm.act"));
            }
            icon.setVisibility(View.VISIBLE);
        }
        if(isArrowNeeded){
            arrow = (ImageView) row.findViewById(R.id.row_arrow);
            arrow.setImageResource(activity.getResources().getIdentifier("arrow", "drawable", "com.syntrio.iwm.act"));
            arrow.setVisibility(View.VISIBLE);
        }

        return (row);
    }

    public Filter getFilter() {
        if (mFilter == null) {
            mFilter = new ItemsFilter();
        }
        return mFilter;

    }

    private class ItemsFilter extends Filter {
        @Override
        protected FilterResults performFiltering(CharSequence constraint) {
            FilterResults results = new FilterResults();
            // We implement here the filter logic
            if (constraint == null || constraint.length() == 0) {
                // No filter implemented we return all the list
                results.values = mItems;
                results.count = mItems.size();
            }
            else {
                // We perform filtering operation
                List<T> itemsList = new ArrayList<T>();

                for (T t : mItems) {
                    if (t.toString().toUpperCase().startsWith(constraint.toString().toUpperCase()))
                        itemsList.add(t);
                }

                results.values = itemsList;
                results.count = itemsList.size();

            }
            return results;
        }

        @Override
        protected void publishResults(CharSequence constraint,
                FilterResults results) {

            // Now we have to inform the adapter about the new list filtered
            if (results.count == 0){
                notifyDataSetInvalidated();
            }
            else {

                List<T> lst = (List<T>)results.values;
                 List<T> itemsList = new ArrayList<T>(lst);
                 //this.items=mItems;
                mItems =itemsList;              
                notifyDataSetChanged();
            }

        }

    }

} 
```

例外是：

```
03-24 16:52:11.608: E/AndroidRuntime(947): FATAL EXCEPTION: main
03-24 16:52:11.608: E/AndroidRuntime(947): java.lang.IndexOutOfBoundsException: Invalid index 1, size is 1
03-24 16:52:11.608: E/AndroidRuntime(947):  at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:257)
03-24 16:52:11.608: E/AndroidRuntime(947):  at java.util.ArrayList.get(ArrayList.java:311)
03-24 16:52:11.608: E/AndroidRuntime(947):  at com.syntrio.iwm.IWMArrayAdapter.getView(IWMArrayAdapter.java:50)
03-24 16:52:11.608: E/AndroidRuntime(947):  at android.widget.AbsListView.obtainView(AbsListView.java:1409)
03-24 16:52:11.608: E/AndroidRuntime(947):  at android.widget.ListView.measureHeightOfChildren(ListView.java:1216)
03-24 16:52:11.608: E/AndroidRuntime(947):  at android.widget.ListView.onMeasure(ListView.java:1127)
03-24 16:52:11.608: E/AndroidRuntime(947):  at android.view.View.measure(View.java:8313)
03-24 16:52:11.608: E/AndroidRuntime(947):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
03-24 16:52:11.608: E/AndroidRuntime(947):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
03-24 16:52:11.608: E/AndroidRuntime(947):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
03-24 16:52:11.608: E/AndroidRuntime(947):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
03-24 16:52:11.608: E/AndroidRuntime(947):  at android.view.View.measure(View.java:8313)
03-24 16:52:11.608: E/AndroidRuntime(947):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
03-24 16:52:11.608: E/AndroidRuntime(947):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
03-24 16:52:11.608: E/AndroidRuntime(947):  at android.view.View.measure(View.java:8313)
03-24 16:52:11.608: E/AndroidRuntime(947):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:531)
03-24 16:52:11.608: E/AndroidRuntime(947):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
03-24 16:52:11.608: E/AndroidRuntime(947):  at android.view.View.measure(View.java:8313)
03-24 16:52:11.608: E/AndroidRuntime(947):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
03-24 16:52:11.608: E/AndroidRuntime(947):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
03-24 16:52:11.608: E/AndroidRuntime(947):  at android.view.View.measure(View.java:8313)
03-24 16:52:11.608: E/AndroidRuntime(947):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
03-24 16:52:11.608: E/AndroidRuntime(947):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
03-24 16:52:11.608: E/AndroidRuntime(947):  at android.view.View.measure(View.java:8313)
03-24 16:52:11.608: E/AndroidRuntime(947):  at android.view.ViewRoot.performTraversals(ViewRoot.java:839)
03-24 16:52:11.608: E/AndroidRuntime(947):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
03-24 16:52:11.608: E/AndroidRuntime(947):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-24 16:52:11.608: E/AndroidRuntime(947):  at android.os.Looper.loop(Looper.java:130)
03-24 16:52:11.608: E/AndroidRuntime(947):  at android.app.ActivityThread.main(ActivityThread.java:3683)
03-24 16:52:11.608: E/AndroidRuntime(947):  at java.lang.reflect.Method.invokeNative(Native Method)
03-24 16:52:11.608: E/AndroidRuntime(947):  at java.lang.reflect.Method.invoke(Method.java:507)
03-24 16:52:11.608: E/AndroidRuntime(947):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-24 16:52:11.608: E/AndroidRuntime(947):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-24 16:52:11.608: E/AndroidRuntime(947):  at dalvik.system.NativeStart.main(Native Method) 
```

更新：添加异常

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-24T18:08:13.793

您需要在您的 custom中实现[getCount](http://developer.android.com/reference/android/widget/ArrayAdapter.html#getCount%28%29)`ArrayAdapter`方法。调用其适配器上的`ListView`该方法以找出它将显示多少项。你需要这样的东西：

```
public int getCount () {
    return mItems.size ();
} 
```

# ruby-on-rails - 将文件上传到 S3 时出错：缺少必需的：bucket 选项

> ID：15601750
> 
> 赞同：1
> 
> 时间：2013-03-24T17:36:20.330
> 
> 标签：ruby-on-rails, ruby, file-upload, amazon-s3, paperclip

我正在尝试使用回形针将数据上传到 s3。我不断收到以下错误

> 缺少必需的 :bucket 选项
> 
> app/controllers/documents_controller.rb:64:in `block in update' app/controllers/documents_controller.rb:63:in`update'

我已使用适当的 s3 凭据更新了我的 config/environments/development.rb。在本地运行我的应用程序时出现此错误，尚未在 Heroku 上尝试过。任何建议我还缺少什么？

**文件.rb**

```
class Document < ActiveRecord::Base
  attr_accessible :documentId, :name, :docstack

  has_attached_file :docstack, styles: {
    thumb: '200x200',
    medium: '33x300>'
  }
end 
```

**发展.rb**

```
config.paperclip_defaults = {
  :storage => :s3,
  :s3_credentials => {
    :bucket => ENV['bucket'],
    :access_key_id => ENV['123'],
    :secret_access_key => ENV['key']
  }
} 
```

**更新：** 参考[这个](https://devcenter.heroku.com/articles/paperclip-s3#define-the-file-attribute-in-the-model)博客谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T08:06:17.233

我之前遇到过类似的问题并看到相同的错误消息。请务必在 rails 控制台中检查 ENV 变量是否设置正确（“$ ENV['AWS_BUCKET']”）。尽管正确导出了 env 变量，但我的一个返回 nil。重新启动终端后，它按预期工作..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T19:15:43.180

您是否定义了`ENV`变量值？

尝试添加此文件，

```
# /config/initializers/env.rb

ENV['s3_bucket'] = 'XXX'
ENV['s3_access_key_id'] = 'XXX'
ENV['s3_secret_access_key'] = 'XXX' 
```

并将此代码`development.rb`归档，

```
# /config/environments/development.rb

config.paperclip_defaults = {
  :storage => :s3,
  :s3_credentials => {
    :bucket => ENV['s3_bucket'],
    :access_key_id => ENV['s3_access_key_id'],
    :secret_access_key => ENV['s3_secret_access_key']
  }
} 
```

然后将其添加`env.rb`到您的`.gitignore`文件中，这样您的凭据就不会存储在 GIT 中，

```
# /.gitignore

/config/initializers/env.rb 
```

# scala - 类型类和子类化

> ID：15601751
> 
> 赞同：3
> 
> 时间：2013-03-24T17:36:29.257
> 
> 标签：scala, typeclass

假设我有一个类型类：

```
trait ToString[T] {
  def toString(t: T): String
} 
```

还有以下皮条客：

```
implicit def ToStr[T: ToString](t: T) = new {
  def toStr: String = implicitly[ToString[T]] toString t
} 
```

现在让我们测试一下：

```
class A
implicit object AToString extends ToString[A] {
  def toString(a: A) = "A"
}
(new A).toStr // A 
```

很好，到目前为止。但是如果我引入一个子`B`类`A`：

```
class B extends A
(new B).toStr // could not find implicit value for evidence parameter of type ToString[B] 
```

所以我尝试了：

```
implicit def foo[X: ToString, Y <: X]: ToString[Y] = new ToString[Y] {
  def toString(y: Y): String = implicitly[ToString[X]] toString y
} 
```

但后来我得到：

```
(new B).toStr // diverging implicit expansion for type ToString[...] 
```

如果子类没有可用的类型类，我该怎么做才能自动使用超类的类型类？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-24T17:44:51.430

您应该使“ToString”的类型参数逆变：

```
trait ToString[-T] {
  def toString(t: T): String
}

implicit def ToStr[T: ToString](t: T) = new {
    def toStr: String = implicitly[ToString[T]] toString t
}

class A
implicit object AToString extends ToString[A] {
    def toString(a: A) = "A"
}

(new A).toStr // A

class B extends A
(new B).toStr // A 
```

您可以在此处找到有关 scala 方差的一些详细信息：

*   [http://blogs.atlassian.com/2013/01/covariance-and-contravariance-in-scala/](http://blogs.atlassian.com/2013/01/covariance-and-contravariance-in-scala/)

# php - 使用php的Mysql选择查询

> ID：15601756
> 
> 赞同：-1
> 
> 时间：2013-03-24T17:36:41.243
> 
> 标签：php, mysql, select

我正在尝试从表“学生”中获取所有行。但它只返回数组中的第一行。如何获取数组中的所有行？

我的代码是-

```
<?php
  // con ref
  $dbCon = mysql_connect("localhost","root","") or die("connection problem".mysql_error());
  // db con
  mysql_select_db("mysql_db",$dbCon);
  $sql = "select * from student ";
  $data = mysql_query($sql);
  $row = mysql_fetch_array($data);
  print_r($row);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T17:41:30.747

根据[mysql_fetch_array()](http://php.net/manual/en/function.mysql-fetch-array.php)上的文档：

> 以关联数组、数值数组或两者的形式获取结果行

注意**一个**结果。

您将需要遍历所有行，例如：

```
while($row = mysql_fetch_array($data)) {
   // Use $row here..
} 
```

此外，您应该注意**不推荐**`mysql_*`使用函数。[看这里](http://php.net/manual/en/function.mysql-query.php)的大红框。考虑改用[PDO](http://php.net/manual/en/book.pdo.php)或[MySQLi](http://php.net/manual/en/book.mysqli.php)。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T17:39:30.430

您需要遍历结果。

```
while( $row = mysql_fetch_array($data) ) {
    print_r($row);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T17:41:22.483

```
<?php
// Make a MySQL Connection
$query = "SELECT * FROM example"; 

$result = mysql_query($query) or die(mysql_error());

while($row = mysql_fetch_array($result)){
echo $row['name']. " - ". $row['age'];
echo "<br />";
}
?> 
```

如何迭代结果的示例。

[http://www.tizag.com/mysqlTutorial/mysqlfetcharray.php](http://www.tizag.com/mysqlTutorial/mysqlfetcharray.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T17:45:49.613

第一站使用 msql_ 它已被弃用。第二名阅读手册- [http://php.net/manual/en/function.mysql-fetch-array.php](http://php.net/manual/en/function.mysql-fetch-array.php)

它清楚地表明该函数`mysql_fetch_array`返回一行**

# vim - Vim Basic - 如何打开多个文件

> ID：15601758
> 
> 赞同：1
> 
> 时间：2013-03-24T17:36:57.700
> 
> 标签：vim

如果我打开控制台并输入

```
vim example.* 
```

虽然有 3 个文件`example.html`，`example.css`并且`example.js`

Vim 将打开，但我如何在这些文件之间切换？

在 Vim 中打开多个文件有哪些不同的变体？我熟悉标签，但我很想知道你最喜欢的方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T18:03:45.423

如果您更喜欢拆分页或标签页，可以添加`-o`//参数（请参阅 参考资料`-O`）。但是对于许多参数，默认*参数列表*仍然是最实用的解决方案，特别是因为您可以通过.`-p``:help starting`*`:argdo`*

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T17:39:03.607

您用于`:n`跳到下一个文件。从头开始重新启动`:rew`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T17:38:42.627

您可以`split file.c`在 vi 编辑器的命令行中使用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T18:52:41.510

使用`vim -p file1 file2`它将在选项卡中打开文件。使用`:tabnext`和`:tabprev`导航甚至更好：`map gl :tabnext<cr>`然后`map gh :tabprev<cr>`您可以更快地更改选项卡。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T10:12:38.793

有很多插件可以简化 Vim 中的缓冲区管理。

我正在使用[buxeplorer](http://www.vim.org/scripts/script.php?script_id=42)，但[minibufexplorer](http://www.vim.org/scripts/script.php?script_id=159)也很受欢迎。

如果您想要一个通用的答案，而不使用特定的插件，那么周围有一些[文章](http://vim.wikia.com/wiki/Easier_buffer_switching)。*

# c# - Sharepoint - 使用 C# 打开存储在 Sharepoint 文档库中的 word doc 文件

> ID：15601759
> 
> 赞同：2
> 
> 时间：2013-03-24T17:36:57.840
> 
> 标签：c#, sharepoint, sharepoint-2010

我正在使用 Visual Studio，C# 进行编码。如上所述，有什么方法可以打开存储在 Sharepoint 文档库中的 word 文件？只需要打开word文件让我阅读。不必编辑或删除。

我试过： System.Diagnostics.Process.Start("iexplore.exe",url) 但它似乎不起作用。

尝试了以下代码。显示我的标签没问题。但是 doc 这个词也不会启动。

```
protected void GridView1_RowCommand(Object sender, GridViewCommandEventArgs e)
    {
        if (e.CommandName == "Select")
        {
            int index = Convert.ToInt32(e.CommandArgument);
            GridViewRow row = GridView1.Rows[index];
            this.Label1.Text = "You selected " + row.Cells[4].Text + ".";
            System.Diagnostics.Process.Start(@"C:\Users\Administrator\Desktop\Test\Test.docx");
        }  
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T17:58:27.853

这可能比听起来要困难得多。如果您尝试从服务器端对象模型执行此操作，那么您很可能会在会话 0 中运行。会话 0 是用于服务的特殊 Windows 会话，它不允许产生新进程。要解决这个问题，您必须使用 Windows API 让用户登录并控制他们的会话，从而退出会话 0。我不会在这条路上走得更远，因为您没有指定您实际上正在这样做。

如果您只是想下载存储在 SharePoint 文档库中的 Word 文档，然后在客户端启动它，您可以使用以下命令下载并打开该文档：

```
ClientContext clientContext = new ClientContext("http://SharePoint/");
string serverRelativeUrlOfFile = "SharedDocuments/file.docx";
string fileDestinationPath = @"C:\Documents\file.docx";

using (FileInformation sharePointFile =
    Microsoft.SharePoint.Client.File.OpenBinaryDirect(clientContext, serverRelativeUrlOfFile))
{
    using (Stream destFile = System.IO.File.OpenWrite(fileDestinationPath))
    {
        byte[] buffer = new byte[8 * 1024];
        int byteReadInLastRead;
        while ((byteReadInLastRead = sharePointFile.Stream.Read(buffer, 0, buffer.Length)) > 0)
        {
            destFile.Write(buffer, 0, byteReadInLastRead);
        }
    }
}

System.Diagnostics.Process.Start(@"C:\Documents\file.docx"); 
```

编辑：注意，这使用了 SharePoint2010 客户端对象模型，因为会话 0 隔离使服务器端对象模型的步骤变得相当困难，除非有要求，否则我不会在这里详细说明。

编辑：在评论之后，很明显您正在尝试使用 Webpart 在客户端下载和执行文件。上面的代码来自 SharePoint 2010 客户端对象模型，但是是 C# 版本。既然我已经向您展示了正确的 C# 版本，那么将其转换为 JavaScript 版本应该很容易。这会将文件下载到客户端。下载文件后，使用以下 JavaScript/ActiveX 执行文件：

```
 var objShell = new ActiveXObject("Shell.Application");
 var strArguments = "";
 var strDirectory = "";
 var strOperation = "open";
 var intShow = 1;
 objShell.ShellExecute(FileLocation, strArguments, strDirectory, strOperation, intShow); 
```

替换正确参数的地方。请注意，这只能在 Internet Explorer 上工作——因为这个显然非常不安全的 ActiveX 部分被每个半体面的浏览器阻止了——而且我只在 IE8 上测试过它。

# javascript - 二维数组对角检查循环

> ID：15601760
> 
> 赞同：0
> 
> 时间：2013-03-24T17:36:59.787
> 
> 标签：javascript, for-loop

我试图创建一个二维数组并在对角线上放置四个“X”并创建一个双循环来检测和计算 X 的数量，它可以工作，但它不能正确地完成工作，它真正做的是计算 X 的数量在每一行，我的问题是如何让它只计算对角线上的 X？

```
 var creatematrix = function (nbRang, nbColumn) {
        var result = Array(nbRang);
        for (var i=0; i<nbRang; i++) {
            result[i] = Array(nbColumn);
        }
        return result;
    };

    var m = creatematrix(6, 7); 
```

例如，如果我这样做

```
 m[4][1] = "X";
      m[3][2] = "X";
      m[2][3] = "X";
      m[1][4] = "X";

      m[5][3] = "O";
      m[3][3] = "O";
      m[4][3] = "O";
      m[2][4] = "O"; 
```

或者这个结果是一样的

```
 m[1][1] = "X";
    m[2][1] = "X";
    m[3][1] = "X";
    m[4][1] = "X";

    m[5][3] = "O";
    m[3][3] = "O";
    m[4][3] = "O";
    m[2][4] = "O"; 
```

这是我所拥有的：

```
 var sumX = 0;
   for(var k = 5; k >= 0  ; k--){
       if(sumX == 4){
           alert("player 1 won");
       }
       for(var i = 0 ; i<= 6; i++){
           if(m[k][i]== "X" ){
               sumX += 1;
               break;
           }
           if(m[k][i]== "O" ){
              sumX = 0;         
           }
       }
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:44:44.677

```
function getCount(m){
    var count =0;
    for(var i=0; i<m.length; i++)
    {
      if(m[i][m.length-i-1] === "X")
      {
         count++;
      }
    }

    return count;
} 
```

这将沿着对角线向下并检查每个值。

您还可以使用

```
function getCount(m){
    return m.reduce(function(prev,current,index,arr){ 
      return prev + current[arr.length-index-1];},0);
} 
```

[JSFiddle](http://jsfiddle.net/LknbJ/)

# javascript - 绘制二维分层地图javascript

> ID：15601762
> 
> 赞同：1
> 
> 时间：2013-03-24T17:37:03.667
> 
> 标签：javascript, 2d, layer, tiles

我用 javascript 构建一个 2d rpg 游戏并使用画布，有点像 browserquest。

我知道如何绘制一个简单的 2d 数组以在画布上显示单层平铺地图。

但是为了在玩家四处移动等时获得更好的效果，我希望能够在 Tiled 中创建分层瓦片地图。我在考虑这些层：

背景层保存地面信息和草，岩石等

玩家/对象层保存玩家所在位置和对象所在位置的信息。

碰撞层来保存用户将碰撞和不会碰撞的位置。

前景层来保存玩家可以移动到后面的瓷砖，即。树顶，房屋顶等。

这听起来好吗？

我的问题：

我将如何从平铺地图编辑器加载保存为 JSON 的地图数据？然后我如何使用这些信息在画布上显示它？

另外，我将如何从我的玩家级别检查图层的详细信息？例如，当它们位于不同的层时，我将如何检查碰撞？

提前感谢您的帮助

汤姆

编辑：我使用 TILED 创建了一个 json tilemap：

```
{ "height":15,
 "layers":[
    {
     "data":[79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 28, 29, 30, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 28, 29, 30, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 28, 29, 30, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 28, 29, 30, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 12, 13, 13, 13, 13, 111, 29, 30, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 28, 29, 29, 29, 29, 29, 29, 30, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 28, 29, 128, 45, 45, 45, 45, 46, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 28, 29, 30, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 28, 29, 30, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 12, 13, 13, 13, 13, 13, 111, 29, 112, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 79, 28, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 79, 28, 29, 128, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 79, 28, 29, 30, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 28, 29, 30, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 28, 29, 30, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79, 79],
     "height":15,
     "name":"background",
     "opacity":1,
     "type":"tilelayer",
     "visible":true,
     "width":20,
     "x":0,
     "y":0
    }, 
    {
     "data":[0, 0, 0, 0, 0, 149, 150, 151, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 165, 166, 167, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 168, 0, 0, 0, 181, 182, 183, 0, 0, 0, 0, 0, 0, 0, 0, 168, 0, 0, 0, 0, 0, 0, 0, 222, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 237, 0, 0, 0, 245, 246, 247, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 152, 0, 0, 0, 168, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 152, 222, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 152, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 152, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 168, 0, 0, 0, 0, 0, 0, 0, 0, 0, 149, 150, 151, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 165, 166, 167, 0, 0, 0, 152, 0, 237, 0, 0, 0, 0, 0, 0, 245, 246, 247, 0, 168, 181, 182, 183],
     "height":15,
     "name":"background_objects",
     "opacity":1,
     "type":"tilelayer",
     "visible":true,
     "width":20,
     "x":0,
     "y":0
    }, 
    {
     "height":15,
     "name":"collisions",
     "objects":[
            {
             "height":32,
             "name":"",
             "properties":
                {

                },
             "type":"",
             "visible":true,
             "width":100,
             "x":-3,
             "y":192
            }, 
            {
             "height":31,
             "name":"",
             "properties":
                {

                },
             "type":"",
             "visible":true,
             "width":32,
             "x":159,
             "y":448
            }, 
            {
             "height":30,
             "name":"",
             "properties":
                {

                },
             "type":"",
             "visible":true,
             "width":94,
             "x":385,
             "y":448
            }, 
            {
             "height":31,
             "name":"",
             "properties":
                {

                },
             "type":"",
             "visible":true,
             "width":33,
             "x":511,
             "y":160
            }, 
            {
             "height":27,
             "name":"",
             "properties":
                {

                },
             "type":"",
             "visible":true,
             "width":32,
             "x":320,
             "y":258
            }, 
            {
             "height":30,
             "name":"",
             "properties":
                {

                },
             "type":"",
             "visible":true,
             "width":31,
             "x":128,
             "y":97
            }],
     "opacity":1,
     "type":"objectgroup",
     "visible":true,
     "width":20,
     "x":0,
     "y":0
    }, 
    {
     "data":[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 206, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 197, 198, 199, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 213, 214, 215, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 221, 0, 0, 0, 229, 230, 231, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 206, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 197, 198, 199, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 213, 214, 215, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 221, 0, 0, 0, 0, 0, 0, 229, 230, 231, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
     "height":15,
     "name":"foreground",
     "opacity":1,
     "type":"tilelayer",
     "visible":true,
     "width":20,
     "x":0,
     "y":0
    }],
 "orientation":"orthogonal",
 "properties":
{

},
 "tileheight":32,
 "tilesets":[
    {
     "firstgid":1,
     "image":"..\/..\/..\/..\/..\/..\/..\/xampp\/htdocs\/DIS\/images\/mountain_landscape_23.png",
     "imageheight":512,
     "imagewidth":512,
     "margin":0,
     "name":"level_1",
     "properties":
        {

        },
     "spacing":0,
     "tileheight":32,
     "tilewidth":32
    }],
 "tilewidth":32,
 "version":1,
 "width":20
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:51:45.490

javascript 框架“Melon JS”可以导入 Tiled TMX 地图。最好使用类似的东西（而不是重新发明轮子）。这是一个链接：

[http://www.melonjs.org/](http://www.melonjs.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T17:09:44.963

@Chris Nash 感谢您的建议！

我找到了一个关于使用来自 tiled 的 JSON 加载分层 tilemaps 的教程，我想我将遵循该教程。

如果有人[使用 Json 加载器用于平铺地图编辑器](http://blog.hashrocket.com/posts/using-tiled-and-canvas-to-render-game-screens)

# ios - IOS：如何在循环内使用 UIAlertView

> ID：15601766
> 
> 赞同：1
> 
> 时间：2013-03-24T17:37:13.590
> 
> 标签：ios, objective-c, cocoa-touch, uialertview

我一直在研究这个问题一段时间，但找不到有效的解决方案。我正在创建一个游戏，其中每个玩家都被分配了一个随机名称。在游戏结束时，如果一个或多个玩家的分数使他们有资格进入历史排行榜，我想遍历所有玩家，显示一个 UIAlertView，他们可以在其中输入他们的真实姓名，然后将该姓名保存回我的玩家对象。但是，我无法让循​​环停止、显示警报视图、等待响应，然后继续。有人可以帮帮我吗？

这是我的循环：

```
for (int i = 0; i < [leaderboard count]; i++) {
    NSDictionary *player = [[NSDictionary alloc] initWithDictionary:[leaderboard objectAtIndex:i]];
    if ([[player valueForKey:@"isCurrentPlayer"] isEqualToString:@"YES"]){
        // getRealPlayerName takes in a name parameter and displays an alertview
        [self performSelectorOnMainThread:@selector(getRealPlayerName:) withObject:[player valueForKey:@"playerName"] waitUntilDone:YES];
        // nameFromAlertView is a local variable that is set when the user enters a name in the alertview.
        [player setValue:[self nameFromAlertView] forKey:@"playerName"];
        [player setValue:@"" forKey:@"isCurrentPlayer"];
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T18:06:54.710

你不能循环执行。

而是将用户和点保存在数组中，调用显示 UIAlertView 的方法。从数组中获取第一个用户信息并从数组中删除这些信息。设置警报视图的委托。一旦输入了第一个信息，就会调用 UIAlertView 的委托方法（`alertView:didDismissWithButtonIndex:`）。你处理输入的信息，然后检查数组中是否还有东西，如果有，再次调用第一个方法

* * *

```
-(void)promptForInput
{
    self.currentUserInfo = userArray[0]; //userarray is mutable, self.currentUserInfo is a property for the current user
    [userArray removeObject:self.currentUserInfo];
    //configure UIAlertView
    alertView.delegate = self;

}

//once the user hit a altertview button, this delegate method gets called
-(void)alertView:(UIAlertView)alertView didDismissWithButtonIndex:(NSUInteger)idx
{
     //save/process entered data, self.currentUserInfo hold the current user.

    if([userArray count]> 0){
        [self promptForInput];
    }
} 
```

* * *

如果您熟悉块，您还可以使用第三方代码，它允许使用块而不是委托。但是在块中你会做基本相同的事情：只要数组中的用户未被处理，就调用另一个块。

新增内容之一：[Mugunth Kumar — 基于块的 UIAlertView 和 UIActionSheet](http://blog.mugunthkumar.com/coding/ios-code-block-based-uialertview-and-uiactionsheet/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T18:06:11.537

只有当程序控制返回到主运行循环时，才会显示警报视图并处理事件。因此在等待

```
[self performSelectorOnMainThread:@selector(getRealPlayerName:) withObject:[player valueForKey:@"playerName"] waitUntilDone:YES]; 
```

完全阻止显示警报视图。

你可以做的是：

*   为第一个玩家启动警报视图。
*   在`alertView:didDismissWithButtonIndex:`委托函数中，记录数据并为下一个玩家（如果不是最后一个玩家）启动一个新的警报视图。

您必须将当前玩家索引存储在类的属性中。或者，您可以将当前索引分配给`myAlertView.tag`.

# javascript - 在 dom-load 上隐藏内容

> ID：15601768
> 
> 赞同：0
> 
> 时间：2013-03-24T17:37:17.537
> 
> 标签：javascript, dom

我正在制作一个应该美化某个网站的 chrome 扩展。我隐藏了 domload 上的所有元素，除了一个。但它的问题是每次网站加载时，首先加载所有内容，然后隐藏。这是我的代码

```
window.onload = function(){

var all = document.getElementsByTagName("div");
var viewer = document.getElementById("viewer").style;

for (var i=0, max=all.length; i < max; i++) {
    all[i].style.visibility='hidden';
}

viewer.visibility='visible';

}; 
```

我希望有比我现在做的更好的方法来做到这一点，它基本上是加载所有内容，隐藏所有内容，然后使某个组件可见。整个过程非常缓慢，用户可以在页面加载时看到我试图隐藏的内容。

有没有办法通过 javascript 指定要加载哪些内容，或者使整个过程足够快以至于不被注意到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:40:44.910

这里的 jQuery 将是你的朋友。它非常快。

```
$(document).ready(function() {
  $('div').not('#viewer').hide();
}); 
```

# javascript - Google Books API 总是返回 saleability="NOT_FOR_SALE"

> ID：15601770
> 
> 赞同：0
> 
> 时间：2013-03-24T17:37:19.620
> 
> 标签：javascript, jquery, json, google-books

我正在玩[Google Books API](https://developers.google.com/books/)。我使用以下 jQuery 代码来获取按图书 ISBN 搜索的图书结果：

```
$.ajax({
    dataType: "jsonp",
    url: 'https://www.googleapis.com/books/v1/volumes',
    data: {q: 'isbn:' + myIsbn, country: 'UK'},
    crossDomain: true,
    success: function(data){
        console.info('Google Books API retrieved:');
        console.info(data);
    },
    error: function(){
        console.log(arguments)
    }
}); 
```

我面临的问题是，无论我搜索什么书，`salesInfo.salablity`总是“NOT_FOR_SALE”

```
"saleInfo" : { "country" : "GB",
               "isEbook" : false,
               "saleability" : "NOT_FOR_SALE"
             } 
```

任何想法为什么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:50:57.667

来自[谷歌开发者的网站](https://developers.google.com/resources/api-libraries/documentation/books/v1/java/latest/com/google/api/services/books/model/Volume.SaleInfo.html#setSaleability%28java.lang.String%29)

*适销性意味着：*

> 这本书在上述国家/地区的 Google 电子书店中是否有售或免费提供。可能的值为 FOR_SALE、FREE、NOT_FOR_SALE 或 FOR_PREORDER。返回的值可能为空

可能，您要搜索的书在您要搜索的国家/地区可能无法（**在 Google 电子书店**）出售。

# jquery - Seaside 中的定期 JQuery 更新

> ID：15601771
> 
> 赞同：5
> 
> 时间：2013-03-24T17:37:27.073
> 
> 标签：jquery, smalltalk, seaside

我正在使用 Seaside（Squeak 4.2 中的 2.8）并且通常更新如下：

```
html div 
    onClick: ((html jQuery: '#asdf') load html: [:h|h text: 'qwer'])
    ; with: 'asdf'. 
```

但这一次，我必须**定期更新一个 div**。

我`periodicalEvaluator`在另一个项目中使用过 PT，但是在这个项目中我不能，我必须坚持使用 JQ。

我尝试`delay:millis`在我能想到的所有组合中使用 JQInstance：

```
onClick: (((html jQuery id: 'chattertext') delay: 1000; yourself) load html: [:h| self renderTextOn: h])
; onClick: (((html jQuery id: 'chattertext') delay: 1000) load html: [:h| self renderTextOn: h])
; onClick: (((html jQuery id: 'chattertext') delay: 1000; load) html: [:h| self renderTextOn: h])
and others 
```

由于某种原因，更新是即时的，而不是**我需要的 1000 毫秒**之后。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T19:14:22.687

看一下 JQuery 功能测试套件附带的示例：

```
JQRepeatingFunctionalTest>>#renderContentOn: html
  html paragraph
    script: (html jQuery this load
      html: [ :r | self renderTimeOn: r ];
      interval: 1 seconds); 
  with: [ self renderTimeOn: html ] 
```

示例在[这里](http://demo.seaside.st/javascript/jquery/repeatedajaxcalls)运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T18:22:00.780

jQuery 的`delay`功能只适用于效果[1]。

要实现您想要的，只需使用 Javascript 的 setTimeout 或 setInterval 函数：

```
onClick: (((html jQuery id: 'chattertext') load html: [:h| self renderTextOn: h]) timeout: 1000) 
```

[1] [http://api.jquery.com/delay/](http://api.jquery.com/delay/)

# ruby - 写 `:name => "String"` 和 `name: "String"` 有什么区别？

> ID：15601772
> 
> 赞同：-1
> 
> 时间：2013-03-24T17:37:35.620
> 
> 标签：ruby, hashrocket

写有区别吗

```
parameter: "String" 
```

和更长的

```
:parameter => "String" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T17:41:15.633

第一个在 Ruby 1.8 中不起作用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T17:45:45.460

它们都构造了一个哈希键值对。在大多数情况下，它们是可以互换的。该`parameter: "String"`语法是在 Ruby 1.9 中引入的，并以[JSON](http://en.wikipedia.org/wiki/JSON)为模型。

有一些差异/陷阱。最大的问题是较新的语法不处理带引号的键。在 1.8 样式的哈希中，您可以这样做：

```
:"multi word key" => some_value 
```

在 1.9 样式的哈希中，这是一个语法错误：

```
"multi word key": some_value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T17:39:21.830

没有不同。

我更喜欢第二种语法，因为我认为在进行简要概述时更容易看到。

在 Ruby 1.9.x 和 2.0.0 中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T20:41:49.760

它只是一个语法糖。

如果你在 irb 中看到 Ruby 1.8.7

```
1.8.7 :004 > {:name => 'String'}
 => {:name=>"String"} 
```

和 1.9.3

```
1.9.3p392 :002 > {name: 'String'}
 => {:name=>"String"} 
```

两者都返回相同的格式。

# php - 是否支持 1 个查询中的多插入？

> ID：15601773
> 
> 赞同：3
> 
> 时间：2013-03-24T17:37:36.077
> 
> 标签：php, zend-framework2

我有产品提要并希望将其插入 ZF2 的一个查询中。ZF2 中是否有任何使它更容易的功能？

我的博客： http: [//programming-tips.in](http://programming-tips.in)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:43:58.867

在 ZF1 中，为了实现这一点，我扩展了 Mysql Adapter 并添加了一个 extendedInsert 方法。

当然，更简单的方法是用上面评论的事务/提交包围您的插入。就需要多少时间而言，在单个事务中推动多个插入与执行扩展插入大致相同。另外，您应该能够使用准备好的语句并且只需遍历您的数组以插入所有记录。

# php - 通过 Graph API 在 facebook 时间轴上发布大图像/图片

> ID：15601777
> 
> 赞同：0
> 
> 时间：2013-03-24T17:38:03.180
> 
> 标签：php, facebook, facebook-graph-api, facebook-timeline

我想在我的页面时间线上发布照片状态，但无法发布。我可以发布状态、链接、缩略图链接等。我只想通过 Graph API 发布照片状态。我正在使用 PHP。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T18:01:04.903

try this **if you have picture url**

```
$picUrl = 'http://somedomain.com/picture.jpg';
$photoId = $facebook->api("me/photos","POST",array('url'=>$picUrl,'message'=>"status message")); 
```

**OR if you have image file on your machine**

```
$imgPath = '@' . realpath($imgfile);
$photoId = $facebook->api("me/photos","POST",array('image'=>$imgPath,'message'=>"status message")); 
```

# java - 需要停止txt文件中的单词覆盖JAVA

> ID：15601778
> 
> 赞同：1
> 
> 时间：2013-03-24T17:38:05.483
> 
> 标签：java, file, text, joptionpane

嗨，我正在尝试使用 .txt 文件创建一个单词列表，在该文件中我从 JOptionPane 窗口中取出用户的输入，并将其存储在文本文件的新行中。我遇到的问题是，当我输入多个单词时，它会覆盖已经存在的数据。我希望它跳过一行并将其添加到当前列表中。这是我的代码：

```
public static void Option1Method() throws IOException
{
     FileWriter aFileWriter = new FileWriter("wordlist.txt");
     PrintWriter out = new PrintWriter(aFileWriter);
     String word = JOptionPane.showInputDialog(null,"Enter word or phrase: ");

     out.println(word);

     out.close();
     aFileWriter.close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:00:27.440

只需在文件编写器的末尾加上 true 即可使其切换到附加模式：

```
public static void Option1Method(){
   FileWriter aFileWriter = null;
   PrintWriter out = null;
      try {
         aFileWriter = new FileWriter("wordlist.txt",true);
         out = new PrintWriter(aFileWriter);
         String word = JOptionPane.showInputDialog(null, "Enter word or phrase: ");
         out.println(word);
      } catch (IOException iOException) {
      } catch (HeadlessException headlessException) {
      } finally {
         out.close();
         try {
            aFileWriter.close();
         } catch (IOException iOException) {
         }
      }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T17:43:50.113

问题是您在方法结束时关闭了流。每次调用它时，它都会重新创建 FileWriter 和 PrintWriter，获取输入，将其添加到文件中，然后再次关闭它。解决此问题的一种方法可能是创建一个静态 String 对象，并每次都向其中添加用户输入。在程序结束时，将该字符串写入文件，然后关闭它。

# ruby-on-rails - 在 Rails 中的开发人员之间同步数据库数据

> ID：15601780
> 
> 赞同：1
> 
> 时间：2013-03-24T17:38:24.613
> 
> 标签：ruby-on-rails, git

我们是两个使用 Git 开发 Rails 应用程序的开发人员。

我们如何在彼此之间共享开发数据库中存储的数据？

在开发中，我们使用 SQLite3，在生产中使用 PostgreSQL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:02:04.563

理想情况下，如果您的生产数据库在 Postgresql 中，那么您的开发环境也应该有 Postgresql。

运行一个通用的 Postgresql 实例，并且两个开发人员都可以连接到同一个实例。

# iphone - GLfloat 动态数组声明

> ID：15601781
> 
> 赞同：0
> 
> 时间：2013-03-24T17:38:25.587
> 
> 标签：iphone, ios, objective-c, xcode

我在 Objective-C 中动态声明 GLfloat 数组时遇到了一些问题。这是我正在使用的代码：

```
GLfloat *m_bindPositions;

@implementation

int nVerts           = [self m_countVertices];
m_bindPositions      = (GLfloat*)malloc((nVerts * 3) * sizeof(GLfloat)); 
```

本例中的 nVerts 等于 6704。

如果我要运行 sizeof(m_bindPositions) 它应该返回 80448。

它目前返回 4。这让我相信分配有错误

记忆，我不完全确定为什么。任何帮助将非常感激。

```
Thanks 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T17:48:02.220

`sizeof`在这种情况下，返回指针的大小，而不是指针指向的数据。

但是，编译器是处理 sizeof 的，它不会基于 malloc 动态返回值，因此您不能使用`sizeof`(或除 之外的任何其他东西，`malloc_size()`它将返回等于或大于allocation，表示分配块的大小。

# ajax - 在 Chrome 扩展中不断使用 ajax 发送数据

> ID：15601783
> 
> 赞同：1
> 
> 时间：2013-03-24T17:38:34.690
> 
> 标签：ajax, google-chrome, google-chrome-extension

是否可以将数据从 google chrome 扩展程序发布到另一个页面，例如每分钟？有人打开 chrome，然后每分钟都会将信息发送到我的页面。谢谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:48:58.923

是的，这是很有可能的。一个简短的简单示例：

**背景页面**

```
//These make sure that our function is run every time the browser is opened.
chrome.runtime.onInstalled.addListener(function() {
  initialize();
});
chrome.runtime.onStartup.addListener(function() {
  initialize();
});
function initialize(){
  setInterval(function(){sendData()},60000);
}
function sendData(){
  //Assuming data contains the data you want to post and url is the url
  $.post(url,data);
} 
```

**清单.json**

我们需要为我们发布的位置请求主机权限。类似于“ [http://www.example.com/postHere.php](http://www.example.com/postHere.php) ”的东西。有关更多信息，请参阅[匹配模式](http://developer.chrome.com/extensions/match_patterns.html)。

```
{
  "name": "Chrome post test",
  "version": "0.1",
  "description": "A test for posting",
  "manifest_version": 2,
  "permissions": [
    "http://www.example.com/postHere.php"
  ],
  "background": {
    "scripts": ["jquery-1.8.3.min.js","background.js"],
    "persistent": true
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T17:52:45.040

试试`setInterval()`。您应该在后台页面中将您的逻辑包装在其中。`"content_security_policy": "script-src 'self' 'unsafe-eval'; object-src 'self'"`如果您正在执行字符串，请不要忘记添加您的 manifest.json。有关更多信息，您可能需要浏览[此](https://developer.chrome.com/extensions/contentSecurityPolicy.html)。

# jar - 反编译编辑多个相互依赖的jar文件

> ID：15601784
> 
> 赞同：0
> 
> 时间：2013-03-24T17:38:36.627
> 
> 标签：jar, java

嘿，我是 Java 新手，正在努力学习它。我已经学会了最好的学习方法是阅读和了解其他软件是如何工作的，然后在我自己的应用程序中实现更好的方法。所以我开始反编译我已经知道 jd-gui 并用它来反编译或编辑 jar 文件。但是现在我有多个 jar 文件并且它们是相互依赖的，我试图谷歌但找不到任何好的东西。帮助会很棒。

主要问题。如何编辑或反编译多个相互依赖的 jar 文件。

我不想做任何违法或错误的事情只是想学习

# android - 有效地为 SoundPool 加载声音（全局 SoundPool？）

> ID：15601794
> 
> 赞同：2
> 
> 时间：2013-03-24T17:39:22.987
> 
> 标签：android, performance, audio, soundpool

我正在创建一个游戏，它有一系列声音可以在不同的活动中播放。

在 onCreate 中加载声音会极大地阻碍 FPS，我想知道是否有更有效的加载声音的方法，或者创建一个可以由活动调用的全局声音池的方法。

如果我在我的主菜单活动中创建了一个公共音池，它可以在以后的活动中播放吗？

谢谢安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-06T07:28:47.127

我总是创建一个单独的 Sound 类（某种实用程序），它具有所有的播放、加载、卸载等方法。我以静态方式从我的所有活动中访问这些内容。确保您使用应用程序上下文来加载声音，以免最终导致内存泄漏（如果您使用活动上下文）

# c# - Html 敏捷包解析 oid

> ID：15601797
> 
> 赞同：0
> 
> 时间：2013-03-24T17:39:29.867
> 
> 标签：c#, html, html-agility-pack

这是完整的 html 代码： http: [//pastebin.com/WLwDCVZ0](http://pastebin.com/WLwDCVZ0)

我用敏捷包解析了所需的节点。代码：

```
var html = new HtmlDocument();
html.LoadHtml(request.Get("http://www.odnoklassniki.ru").ToString());
var h1 = html.DocumentNode.SelectSingleNode(@"/html[1]/body[1]/div[1]/div[3]/div[2]"); 
```

h1 包含：

```
<!--{"uid":"aocrgdowcvpgtiymx0qqvblirnscijwdrcw","toolbar":true,"restrictedNIM":false,"restrictedMusic":false,"massUploadFix":true,"valentineActive":false,"navFactoryReqTimeout":3000,"discussionsRestricted":false,"share.urlPattern":"((?:(?:https?|ftp)://|(?:mailto:)?[-\\w!#$%\u0026'*+/\u003d?^`{|}~][-\\w!#$%\u0026'*+/\u003d?^`{|}~\\.]*@)?(?:(?:(?:(?:[\\wа-яА-Я-]+)\\.){1,5})(?:com|net|org|biz|info|name|pro|asia|aero|cat|coop|eco|jobs|mobi|museum|post|tel|travel|xxx|edu|gov|int|mil|рф|испытание|xn--[\\w-]*|[a-z]{2})|(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))(?::\\d{1,5})?(?:/(?:[\\w/а-яА-Я\\-\\.,/~!#$%\u0026*+;:\u003d?\\[\\]'@()]*[\\wа-яА-Я/])?)?)","friendOnlinePopupDuration":25000,"premIc":true,"tinkoffPromoLink":"http://www.odnoklassniki.ru/apps/Tinkoff?tcsbanner\u003dodn_ok_bonus","valentineSamePresentIconRotateDelay":100,"configToolbarShowSpamExplanation":false,"lastName":"Иванова","menuWait":100,"configToolbarNotificationsEnableUnsubscribeAppEventsButton":true,"video.player.url":"http://stg.odnoklassniki.ru/static/odklvp/0-0-83/odklvp.swf?preferHd\u003d1\u0026noUpload\u003d1","menuBrief":true,"menuShow":500,"d_disc_ids":{"USER_ALBUM":6,"MOVIE":9,"USER_PHOTO":4,"SCHOOL_FORUM":10,"CITY_NEWS":13,"GROUP_TOPIC":1,"USER_FORUM":5,"USER_2LVL_FORUM":7,"SHARE":8,"GROUP_MOVIE":12,"GROUP_PHOTO":2,"HAPPENING_TOPIC":11,"CHAT":14,"USER_STATUS":3},"n.f.collapseEnabled":false,"pcId":"aocrgdowcvpgtiymx0aosttobwcoktbnwll","maxUsersInPopup":3,"notificationsRestricted":false,"toolbarNotificationsHideEnabled":true,"showSendOverlayLink":false,"visaOnlinePromoLink":"http://odnoklassniki.ru/apps/online-payments-test?view\u003dvisapromo","video.up-meta.url":"http://in.video.mail.ru/","groupOffComments":true,"displayCloseLinkWithMFVisaPromo":true,"configHintEnter":false,"communitySpamEnabled":true,"isUSt":false,"restrictedDisc":false,"menuStrict":true,"mms.groupIds":["aocrgdowcvpgtiymx0rgqrvvkoexjbmjrgp","aocrgdowcvpgtiymx0rmdrfqrjqyjhmhkgts","aocrgdowcvpgtiymx0rbuixcrnynjvsiqopz"],"app.feature.openlinks.enabled":true,"oid":"567334127898","menuClose":100,"bannerTargeting":{"v":{"d":"25","r":"307","n":"Анжела","m":"1","i":"567334127898"},"u":"AAAAhBe/yRoAAAE9nXB67Xpb+4YKHvKyVcA+tuqR8z8\u003d","t":"obLD1AAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAQAAAAAABkBxQcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAc\u003d"},"firstName":"Анжела","configToolabrRemoveConversation":true,"mpid":{"photoId":"491764025626"},"layoutConfig":"313542320128","friendOnlinePopupPosition":"right","dEnbl":true,"lbaidl":true,"male":false,"app.feature.openlinks.statuses.enabled":true,"overlayCategory":"1","restricted":false,"plainTooltips":true,"configHintSound":false,"dDelay":300000,"dItClosedSz":0,"dItSz":3,"dDelayPd":600000,"hasWishList":false,"overlayLinkGenderMask":2,"configToolbarSmilesVersion2":true}--> 
```

如果我必须为`oid`var 获取值（567334127898），接下来我需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:49:16.547

我假设 oid 只能包含数字？如果我错了，请纠正我。

```
var match = Regex.Match(h1,"\"oid\":\"(?<oid>\\d+)\"");

string oid = match.Groups["oid"].Value;
Console.WriteLine(oid); 
```

其中 h1 是您使用 Html Agility Pack 解析的节点的内容（作为字符串）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T18:47:57.640

HTML 注释中有一个 JSON 字符串。

您可以使用 Newtonsoft.Json 库。

删除 html 注释字符串： `<!-- -->`.

然后你可以像这样提取数字：

```
String JsonStr = "{\"uid\":\"aocrgdowcvpgtiymx0qqvblirnscijwdrcw\",\"toolbar\":true,\"restrictedNIM\":false,\"restrictedMusic\":false,\"massUploadFix\":true,\"valentineActive\":false,\"navFactoryReqTimeout\":3000,\"discussionsRestricted\":false,\"share.urlPattern\":\"((?:(?:https?|ftp)://|(?:mailto:)?[-\\\\w!#$%\\u0026'*+/\\u003d?^`{|}~][-\\\\w!#$%\\u0026'*+/\\u003d?^`{|}~\\\\.]*@)?(?:(?:(?:(?:[\\\\w\u0430-\u044F\u0410-\u042F-]+)\\\\.){1,5})(?:com|net|org|biz|info|name|pro|asia|aero|cat|coop|eco|jobs|mobi|museum|post|tel|travel|xxx|edu|gov|int|mil|\u0440\u0444|\u0438\u0441\u043F\u044B\u0442\u0430\u043D\u0438\u0435|xn--[\\\\w-]*|[a-z]{2})|(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))(?::\\\\d{1,5})?(?:/(?:[\\\\w/\u0430-\u044F\u0410-\u042F\\\\-\\\\.,/~!#$%\\u0026*+;:\\u003d?\\\\[\\\\]'@()]*[\\\\w\u0430-\u044F\u0410-\u042F/])?)?)\",\"friendOnlinePopupDuration\":25000,\"premIc\":true,\"tinkoffPromoLink\":\"http://www.odnoklassniki.ru/apps/Tinkoff?tcsbanner\\u003dodn_ok_bonus\",\"valentineSamePresentIconRotateDelay\":100,\"configToolbarShowSpamExplanation\":false,\"lastName\":\"\u0418\u0432\u0430\u043D\u043E\u0432\u0430\",\"menuWait\":100,\"configToolbarNotificationsEnableUnsubscribeAppEventsButton\":true,\"video.player.url\":\"http://stg.odnoklassniki.ru/static/odklvp/0-0-83/odklvp.swf?preferHd\\u003d1\\u0026noUpload\\u003d1\",\"menuBrief\":true,\"menuShow\":500,\"d_disc_ids\":{\"USER_ALBUM\":6,\"MOVIE\":9,\"USER_PHOTO\":4,\"SCHOOL_FORUM\":10,\"CITY_NEWS\":13,\"GROUP_TOPIC\":1,\"USER_FORUM\":5,\"USER_2LVL_FORUM\":7,\"SHARE\":8,\"GROUP_MOVIE\":12,\"GROUP_PHOTO\":2,\"HAPPENING_TOPIC\":11,\"CHAT\":14,\"USER_STATUS\":3},\"n.f.collapseEnabled\":false,\"pcId\":\"aocrgdowcvpgtiymx0aosttobwcoktbnwll\",\"maxUsersInPopup\":3,\"notificationsRestricted\":false,\"toolbarNotificationsHideEnabled\":true,\"showSendOverlayLink\":false,\"visaOnlinePromoLink\":\"http://odnoklassniki.ru/apps/online-payments-test?view\\u003dvisapromo\",\"video.up-meta.url\":\"http://in.video.mail.ru/\",\"groupOffComments\":true,\"displayCloseLinkWithMFVisaPromo\":true,\"configHintEnter\":false,\"communitySpamEnabled\":true,\"isUSt\":false,\"restrictedDisc\":false,\"menuStrict\":true,\"mms.groupIds\":[\"aocrgdowcvpgtiymx0rgqrvvkoexjbmjrgp\",\"aocrgdowcvpgtiymx0rmdrfqrjqyjhmhkgts\",\"aocrgdowcvpgtiymx0rbuixcrnynjvsiqopz\"],\"app.feature.openlinks.enabled\":true,\"oid\":\"567334127898\",\"menuClose\":100,\"bannerTargeting\":{\"v\":{\"d\":\"25\",\"r\":\"307\",\"n\":\"\u0410\u043D\u0436\u0435\u043B\u0430\",\"m\":\"1\",\"i\":\"567334127898\"},\"u\":\"AAAAhBe/yRoAAAE9nXB67Xpb+4YKHvKyVcA+tuqR8z8\\u003d\",\"t\":\"obLD1AAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAQAAAAAABkBxQcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAc\\u003d\"},\"firstName\":\"\u0410\u043D\u0436\u0435\u043B\u0430\",\"configToolabrRemoveConversation\":true,\"mpid\":{\"photoId\":\"491764025626\"},\"layoutConfig\":\"313542320128\",\"friendOnlinePopupPosition\":\"right\",\"dEnbl\":true,\"lbaidl\":true,\"male\":false,\"app.feature.openlinks.statuses.enabled\":true,\"overlayCategory\":\"1\",\"restricted\":false,\"plainTooltips\":true,\"configHintSound\":false,\"dDelay\":300000,\"dItClosedSz\":0,\"dItSz\":3,\"dDelayPd\":600000,\"hasWishList\":false,\"overlayLinkGenderMask\":2,\"configToolbarSmilesVersion2\":true}";

Newtonsoft.Json.Linq.JContainer Properties = Newtonsoft.Json.JsonConvert.DeserializeObject(JsonStr) as Newtonsoft.Json.Linq.JContainer;

Newtonsoft.Json.Linq.JToken jToken = Properties.SelectToken("oid");

String Number = jToken.ToString(); 
```

# java - 如何从for循环中获取变量

> ID：15601799
> 
> 赞同：-1
> 
> 时间：2013-03-24T17:39:40.057
> 
> 标签：java, for-loop

我正在尝试制作一个 for 循环，它使我有 1000 个对象并将它们放置到随机生成的点 (x, y)。所以这里是代码。我一直在努力解决这么多小时，我也一直在网上搜索，但还没有找到任何方法来做到这一点。在那个循环之后，我尝试将这些对象添加到某种雷达中。

这是代码（所以问题是我不知道如何从循环中获取变量并使其出现在循环之外）：

```
case "look": {

        System.out.print("You are at: " +px +", " +py);
        System.out.println("");

        StringBuilder objects = new StringBuilder(); //That's something i found out form the net..
        while (objnum>=0){ objnum--;   //Creates randomly 1000objects around the map
        int objid = (int)(Math.random() * 11 + 1);    //int objnum is 1000, told above
        int objx = (int)(Math.random() * 10000 + 1);  
        int objy = (int)(Math.random() * 10000 + 1);}
        board.spawnObject(new BoardObject(objectid, objx, //That's something i found out form the net..
                    objy, objnum));

        for(int x=px-2 ; x< px+3 ; x++ ){ //px=player position
        for(int y=py-2 ; y< py+3 ; y++ ){ //this is how radar is created
        if(objid==1 && x==objx && y==objy){board[x][y]=1;}
        else if(objid==2 && x==objx && y==objy){board[x][y]=2;}
        else if(objid==3 && x==objx && y==objy){board[x][y]=3;} //That's where i need info from the loop..
        else if(objid==4 && x==objx && y==objy){board[x][y]=4;}
        else if(objid==5 && x==objx && y==objy){board[x][y]=5;}
        else if(objid==6 && x==objx && y==objy){board[x][y]=-1;}
        else if(objid==7 && x==objx && y==objy){board[x][y]=-2;}
        else if(objid==8 && x==objx && y==objy){board[x][y]=-3;}
        else if(objid==9 && x==objx && y==objy){board[x][y]=-4;}
        else if(objid==10 && x==objx && y==objy){board[x][y]=-5;}
            if(x==px && y==py){
                board[x][y]=6;}//<- this shows players position on radar
            if(board[x][y]==-1){
                System.out.print("[sto]");
            }else if(board[x][y]==0){
                System.out.print("[___]");//<- This works well..
            }else if(board[x][y]==-2){
                System.out.print("[box]");
            }
            else if(board[x][y]==-3){
                System.out.print("[ppl]");
            }
            else if(board[x][y]==-4){
                System.out.print("[pit]");
            }
            else if(board[x][y]==-5){
                System.out.print("[brk]");
            } //That's how radar shows dots/objects 
            else if(board[x][y]==1){
                System.out.print("[kid]");
            }
            else if(board[x][y]==2){
                System.out.print("[tre]");
            }
            else if(board[x][y]==3){
                System.out.print("[pet]");
            }
            else if(board[x][y]==4){
                System.out.print("[bus]");
            }
            else if(board[x][y]==5){
                System.out.print("[???]");
            }
            else if(board[x][y]==6){
                System.out.print("[You]");} //<- This works well..
        }
        System.out.println();
    }; }break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:48:56.473

只需使用像 Vector 这样的 Collection 接口类来存储对象，然后从循环外部访问它们。点击此链接：[http ://docs.oracle.com/javase/6/docs/api/java/util/Collection.html](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T17:53:05.610

您必须在范围外创建一个变量，如果条件为真，则在循环外更改变量的值，因此：

```
class example {
int number = 0;
.....

for (int i = 0; i < 10; i++) {
    if (i == 5) {
        number = 5;
    }
} 
```

如果条件为真，则 number 变为 5，要获取此数据，您可以创建 getter 和 setter。

但是，如果您想将所有这 1000 个对象存储在 1 个对象中，我建议使用数组（列表），因此：

```
class Example {
ArrayList<Integer> object = new ArrayList<Integer>();

case.....
object.add(objx)
object.add(objy)
} 
```

# java - 尝试创建 JFileChooser--公共变量？

> ID：15601802
> 
> 赞同：0
> 
> 时间：2013-03-24T17:39:58.510
> 
> 标签：java, swing, jfilechooser

在我之前的问题中，我说过我对 Java 的 JFrame 功能有些陌生。我正在尝试创建一个 JFileChooser，它将获取一个目录，其中`setup.exe`将保存一个名为的文件。不过，这无关紧要。我收到此错误：

```
C:\Users\b\Downloads\files\thankyousanta>javac UpdateMechanism.java
UpdateMechanism.java:31: error: <identifier> expected
        fc.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
                               ^
UpdateMechanism.java:31: error: <identifier> expected
        fc.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
                                                             ^
UpdateMechanism.java:33: error: <identifier> expected
        openButton.addActionListener(openButton);
                                    ^
UpdateMechanism.java:33: error: <identifier> expected
        openButton.addActionListener(openButton);
                                               ^
4 errors 
```

...对于此代码：

```
import java.awt.event.*;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.FontFormatException;
import java.awt.GraphicsEnvironment;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.net.URL;
import java.util.Scanner; 

import javax.swing.filechooser.*;
import javax.swing.JEditorPane;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JButton;
import javax.swing.JTextArea;
import javax.swing.JScrollPane;
import javax.swing.JFileChooser;
import javax.swing.BoxLayout;
import javax.Swing.SwingUtilities;
import javax.swing.BorderFactory;
import javax.swing.border.EmptyBorder;
import javax.imageio.ImageIO;

public class definitiveVoid extends JFileChooser implements ActionListener {
    JFileChooser fc = new JFileChooser();
    fc.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
    JButton openButton = new JButton("The update is waiting on you.");
    openButton.addActionListener(openButton);
}
public class UpdateMechanism extends JPanel
                                implements ActionListener {

    public void actionPerformed(ActionEvent e) {
        if (e.getSource() == openButton) {
            int returnVal = fc.showOpenDialog(UpdateMechanism.this);
            if (returnVal == JFileChooser.APPROVE_OPTION) {
                File file = fc.getSelectedFile();

            } else {
                // operation cancelled
            }
        } else {
            // destroy life
        }
    }
    private static String readURL(String targetURL) {
        String returnish = "";
        try {
            URL tempURL = new URL(targetURL); 
            Scanner s = new Scanner(tempURL.openStream()); 
            while (s.hasNextLine()) {
                returnish = returnish+s.nextLine(); 
            }
        } catch (IOException e) {
            System.out.println(e); 
        }
        return returnish;
    }

    private static String readFile(String targetFile) { 
        String returnString = "";
        try {
            File tempFile = new File(targetFile);
            Scanner s = new Scanner(tempFile);
            while (s.hasNextLine()) {
                returnString = returnString + s.nextLine(); 
            }
        } catch(IOException e) { 
            // !
            System.out.println(e);
        }
        return returnString;
    }

    private static void showGUI() {
        JFrame frame = new JFrame("The Neverhood Restoration Project");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(new Dimension(1024, 600));
        frame.setExtendedState(frame.MAXIMIZED_BOTH);
        frame.getContentPane().setBackground(new Color(0xA64343));

        File fileCheck = new File("C:/Program Files (x86)");
        String returnString = null;
        String rootDirectory = null;
        if (fileCheck.exists()) {
            rootDirectory = "C:/Program Files (x86)/DreamWorks Interactive"; 
            String checkFile = rootDirectory+"/Neverhood/version.txt"; 
            File tempFile = new File(checkFile);
            if (tempFile.exists()) {
                returnString = readFile(checkFile);
            } else {
                returnString = "It appears you do not have the Neverhood Restoration Project installed, or you are using an earlier version."; 
            }
        } else {
            rootDirectory = "C:/Program Files/DreamWorks Interactive";
            String checkFile = rootDirectory+"/Neverhood/version.txt"; 
            File tempFile = new File(checkFile);
            if (tempFile.exists()) {
                returnString = readFile(checkFile);
            } else {
                returnString = "It appears you do not have the Neverhood Restoration Project installed, or you are using an earlier version.";
            }
        }
        if (returnString.equals(readURL("http://theneverhood.sourceforge.net/version.txt"))) {
            returnString = "You are updated to the recent version!"; 
        } else { 
            returnString = "It appears you're not updated.";
        }

        JLabel headerLabel = new JLabel("The Neverhood Restoration Project");
        headerLabel.setHorizontalAlignment(JLabel.CENTER);
        JPanel heapPanel = new JPanel();
        heapPanel.setLayout(new BoxLayout(heapPanel, BoxLayout.PAGE_AXIS));
        heapPanel.setPreferredSize(new Dimension(500, heapPanel.getPreferredSize().height));
        JTextArea heapLabel = new JTextArea(50, 50);        
        heapLabel.setLineWrap(true);
        heapLabel.setWrapStyleWord(true);
        heapLabel.setEditable(false);
        heapLabel.setBorder(BorderFactory.createEmptyBorder(10, 20, 10, 20));
        heapLabel.setFont(new Font("Serif", Font.PLAIN, 14));
        heapLabel.append("Current version: "+readURL("http://theneverhood.sourceforge.net/prettyversion.txt")+".\nInstalled version: "+readFile(rootDirectory+"/Neverhood/prettyversion.txt")+".\n"+returnString+"\n" + 
            "You can read the full version of the document to the left at http://theneverhood.sourceforge.net."
            + "\nBelow is the download button. Just click, choose your directory to save setup.exe in and enjoy!");
        heapPanel.add(heapLabel);

        try {
            Font sFont = Font.createFont(Font.TRUETYPE_FONT, new File("DUGFB___.TTF"));
            sFont = sFont.deriveFont(Font.PLAIN, 48);
            GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
            ge.registerFont(sFont);
            headerLabel.setFont(sFont);
        } catch (FontFormatException | IOException e) {
            System.out.println(e);
        }

        BufferedImage icoImage = null;
        try {
            icoImage = ImageIO.read(
                frame.getClass().getResource("/nhood.bmp"));
        } catch (IOException e) {
            System.out.println(e);
        }
        frame.setIconImage(icoImage);

        JEditorPane updateLog = new JEditorPane();
        JScrollPane scrollPane = new JScrollPane(updateLog);
        updateLog.setEditable(false);

        try {
            updateLog.setPage("http://theneverhood.sourceforge.net/");
        } catch (IOException e) {
            updateLog.setContentType("text/html");
            updateLog.setText("<html>The application could not load the webpage.</html>");
        }

        frame.add(headerLabel, BorderLayout.NORTH);
        frame.add(scrollPane);
        frame.add(heapPanel, BorderLayout.EAST);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                showGUI();
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T17:48:15.683

在 Java 中，公共类必须在它们自己的文件中定义，并且与类名具有相同的名称（带有 .java 后缀）。

`definitiveVoid`您在文件中定义了一个名为的公共类`UpdateMechanism.java`。你试图将代码直接放在这个类中，而不是任何方法。那不是有效的Java。

摇摆是困难和复杂的。在了解 Java 基础之前不要尝试使用它。

此外，按照惯例，Java 中的类以大写字母开头。

# ruby - “这是一个存根，用于索引”在大多数方法中？

> ID：15601804
> 
> 赞同：15
> 
> 时间：2013-03-24T17:40:03.587
> 
> 标签：ruby, rubymine

我正在调查宝石，我到处都发现了这个`curses.rb`：`curses`

```
def attrset(attrs)
    #This is a stub, used for indexing
end
# bkgdset(ch)
#  
# Manipulate the background of the current window
# with character Integer +ch+
# 
# see also Curses.bkgdset
def bkgdset(ch)
    #This is a stub, used for indexing
end
# bkgd(ch)
#  
# Set the background of the current window
# and apply character Integer +ch+ to every character.
# 
# see also Curses.bkgd
def bkgd(ch)
    #This is a stub, used for indexing
end
# Returns an Interer (+ch+) for the character property in the current window.
def getbkgd()
    #This is a stub, used for indexing
end 
```

我不明白存根部分。真正完成所有工作的代码在哪里？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-24T17:42:47.917

您是否有机会使用 RubyMine 的“转到定义”（或者那里叫什么）来查看这个？

如果是这样，那么可能的原因是这些方法是用 C 实现的，而 IDE 无法向您显示 ruby​​ 代码，因为没有。但它知道方法签名，并生成那些虚假的主体以帮助其智能感知（方法名称完成等）。

# android - [android] opencv 中的分水岭示例

> ID：15601810
> 
> 赞同：3
> 
> 时间：2013-03-24T17:40:38.330
> 
> 标签：android, image, opencv, image-processing

目前正在尝试

```
<code>
public Mat onCameraFrame(CvCameraViewFrame inputFrame) {
        mRgba = inputFrame.rgba();
        Imgproc.Canny(mRgba, markers, 80, 90);
        Mat threeChannel = new Mat();
        Imgproc.cvtColor(mRgba, threeChannel, Imgproc.COLOR_BGR2GRAY);
        Imgproc.watershed(threeChannel, markers);
        return threeChannel;
}

</code> 
```

但是，它失败了

```
CvException [org.opencv.core.CvException: /home/reports/ci/slave/50-SDK/opencv/modules/imgproc/src/segmentation.cpp:147: error: (-210) Only 8-bit, 3-channel input images are supported in function void cvWatershed(const CvArr*, CvArr*) 
```

您能否建议如何适当地使用 Canny/Sobel 边缘检测中的标记来提供分水岭算法？Android-specifics 会很有帮助，因为这是我的第一个 Android 项目。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T18:49:50.413

该错误表明输入图像`watershed()`必须是**8 位 3 通道**图像。调用后`cvtColor()`，打印的通道数`threeChannel`。**如果它输出1**，请不要感到惊讶。

`mRgba`直接通过，`watershed()`看看会发生什么。我以前的答案之一是[使用 watershed 的工作代码](https://stackoverflow.com/a/11441676/176769)，您可以将其用于测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-07T16:50:33.600

您只需将图像从 4 通道转换为 3 通道。例如

```
Imgproc.cvtColor(mat , mat, Imgproc.COLOR_BGRA2BGR); 
```

# java - 从java中删除firefox配置文件文件夹

> ID：15601811
> 
> 赞同：0
> 
> 时间：2013-03-24T17:40:42.633
> 
> 标签：java

我正在使用一个临时的 Firefox 配置文件文件夹启动一个 Firefox。当用户关闭 Swing UI 时，我正在使用 java.lang.Process#destroy 销毁进程。当我立即尝试删除该文件夹时，它会引发异常，因为 firefox 进程尚未终止。

当进程完全终止而不添加延迟（Thread.sleep）时，有没有办法删除目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:46:53.833

如果您从 Java 作为 Proces 启动 Firefox，您可以使用[Process.waitFor()](http://tinyurl.com/bebusn2)来等待 Firefox 终止。然后删除临时文件夹。

# javascript - 为什么我尝试的解决方案不起作用？

> ID：15601813
> 
> 赞同：0
> 
> 时间：2013-03-24T17:40:52.397
> 
> 标签：javascript

当我在控制台中运行代码时，浏览器停止工作（假设堆栈溢出）。

我想出了几种不同的算法来解决这个问题，但我认为这个不会导致任何 SO。

**问题：**

> 三角形数的序列是通过添加自然数生成的。所以第 7 个三角形数是 1 + 2 + 3 + 4 + 5 + 6 + 7 = 28。前十项是：
> 
> 1, 3, 6, 10, 15, 21, 28, 36, 45, 55, ...
> 
> 让我们列出前七个三角形数的因数：
> 
> 1:1
> 
> 3：1 3
> 
> 6：1,2,3,6
> 
> 10：1,2,5,10
> 
> 15：1,3,5,15
> 
> 21: 1,3,7,21
> 
> 28：1、2、4、7、14、28
> 
> 我们可以看到 28 是第一个有五个以上除数的三角形数。
> 
> 第一个有超过 500 个除数的三角形数的值是多少？

**失败的解决方案：**

```
function divisors(n){
    var counter = 0;
    var triangle = 3;
    var triangle_add = 2;
    while (counter < n){
        for (var i = 1; i = triangle; i++){
            if (triangle % i === 0){
                counter++;
            }
        };
        if (counter < n){
            triangle_add++;
            triangle = triangle + triangle_add;
            counter = 0;
        };
    };
    return triangle;
};

console.log(divisors(501)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T21:29:48.290

您的解决方案不起作用，因为很可能它非常慢。通过以下方法可以更快地解决此问题：

1.  [使用埃拉托色尼筛法](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)找出所有小于某个 N 的素数（例如，输入 N=100'000）。它相当快。
2.  正如我们从初等数学中知道的那样，每个数字都可以写成**X=p1^i1*p2^i2*...*pn^in**的形式，其中 pj 是素数，ij 是相应素数的幂。X 的除数等于**(i1+1)*(i2+1)*...*(in+1)**因为我们可以通过许多不同的方式形成一个将成为 X 的除数的数。拥有一个数组对于素数，X 的除数可以很快计算出来（代码还有待优化的地方）：

    ```
    int divisorCount(long long X)
    {
        int c = 1;
        for (int i = 0; PRIMES[i] <= X; ++i)
        {
            int pr = PRIMES[i];
            if (X % pr == 0)
            {
                int p = 1;
                long long r = X;
                while (r % pr == 0)
                {
                    r = r / pr;
                    ++p;
                }
                c *= p;
            }
        }
        return c;
    } 
    ```

3.  使用上述函数遍历所有三角形数并计算除数。第 i 个三角形数是**i * (i + 1) / 2**，因此无需保留变量，每次递增并添加它。

# performance - 重用现有数据库，还是使用新数据库？（用于应用程序性能）

> ID：15601814
> 
> 赞同：-1
> 
> 时间：2013-03-24T17:41:06.450
> 
> 标签：performance, database-design, architecture, content-management-system, oracle11g

我有一个现有的 Oracle 11g 数据库，上面运行着一个高事务量应用程序。我有另一个应用程序（一个 CMS），我不确定从性能方面来说，重用现有的 Oracle DB 是否有意义，或者在另一台物理机器上使用单独的数据库。这两个应用程序不共享公共数据。

我的问题是：Oracle 11g（企业版）是否具有允许同时访问两个完全独立的数据集的功能，唯一的性能限制是可用的物理/虚拟服务器资源？

[这个问题](https://stackoverflow.com/questions/696682/mysql-many-tables-or-many-databases)不适用，因为我的数据集完全不相关（它们在 MySQL 上）。我查看了 Oracle 对应用程序性能的建议，但[本文](http://www.oracle.com/technetwork/database/performance/perf-guide-wp-final-133229.pdf)并未针对在同一数据库上运行不同数据集的不同应用程序优化性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:22:04.043

对您的问题的直接回答是：不，如果不考虑基础设施的任何变化，Oracle 没有进行这种分离的功能。

据我所知，您对 Oracle 的选择是：

1) 单实例。

1.1）只有一个节点（你现在的情况，对吧！？）。Oracle Enterprise 可扩展添加节点，因此此选项不会扩展，并且同一数据库中的两个模式/数据集将相互影响。

1.2) 添加更多节点。您可以添加更多节点来分担负载（使用 RAC）。管理会更加复杂，许可成本也会上升。但在这种情况下，可扩展性仅受您的预算限制。

2) 不同机器中的两个独立实例。相当于在 MySql 中使用新数据库（不介意功能和定价的差异）。

MySql 在许多方面不如 Oracle，但在设置成本方面明显优于 Oracle。不太确定维护/开发成本。

# html - 权限仅授予 Android Manifest 中的系统应用

> ID：15601819
> 
> 赞同：1
> 
> 时间：2013-03-24T17:41:21.533
> 
> 标签：html

当我在清单中插入此权限时，它显示错误“权限仅授予系统应用程序”

实际上，我使用此权限来开发基于 Oauth2 令牌的应用程序。但我无法启用此权限。可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T10:35:39.990

`MODIFY_PHONE_STATE`权限仅授予系统应用程序。

供您参考，有 2 种类型的 Android 应用程序：系统和用户

> **用户应用程序**只是您通过 Google Play 商店、亚马逊应用程序商店或侧载安装的所有正常应用程序。这些进入您的 Android 手机的 /data 分区，这是可用于用户数据和应用程序的内部存储器的一部分。
> 
> **系统应用程序**基本上是预装在您的 ROM 中的应用程序。在标准的 Android 用户环境中，用户没有对 /system 分区的写入权限，因此无法直接安装或卸载系统应用程序。
> 
> 为了在您的 Android 设备上安装应用程序作为系统应用程序， **您的设备必须是 root 或安装了自定义恢复（或两者）。**

话虽如此，该错误实际上是错误的，因为您有有效的代码并且编译应该可以工作。如果它发出警告会更好。在 Eclipse 中，您可以轻松修复它。只需前往：

```
Window -> Preferences -> Android -> Lint Error Checking. 
```

从列表中找到**ProtectedPermission**并将严重性设置为错误以外的内容（例如信息）。这样你的项目仍然可以编译。

# python - 是换行符“\n” 2 个字符还是 1 个字符

> ID：15601824
> 
> 赞同：8
> 
> 时间：2013-03-24T17:41:51.900
> 
> 标签：python, io

所以我有一个file.txt：

```
>>012345
>> (new line) 
```

当我打电话时：

```
b=a.read(7)
print b 
```

这会给我

```
 012345
 (with a newline here) 
```

所以我看到它已经读取了接下来的 7 个字符，将“\n”计为单个字符。但是当我使用 seek 时，它似乎将“\n”视为两个字符：

```
position = a.seek(-2,2)
b=a.read(1)
print b 
```

这将打印一个新的空白行而不是 5。

这两种方法对“ `\n`”的处理方式不同吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-24T17:44:16.127

Python默认以*文本模式打开文件。*以文本模式打开的文件会自动转换为平台原生换行符约定`\n`。

`\r\n`您很可能在 Windows 上使用换行约定打开了一个文件。

如果您不希望发生这种翻译，请以二进制模式打开文件。有关详细信息，请参阅该[`open()`函数](http://docs.python.org/2/library/functions.html#open)的文档：

> 默认是使用文本模式，它可以`'\n'`在写入和读取时将字符转换为特定于平台的表示。因此，在打开二进制文件时，应附加`'b'`到模式值以二进制模式打开文件，这将提高可移植性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T17:54:47.967

您不必自己处理这个问题。Python 随附电池。:-)

如果换行符困扰您，请仅`read()`使用整个文件并使用[`splitlines()`](http://docs.python.org/2/library/stdtypes.html#str.splitlines)字符串方法；

```
In [21]: test = 'foo \nbar bla\n baz\r\n'

In [22]: test.splitlines()
Out[22]: ['foo ', 'bar bla', ' baz'] 
```

请注意，这只会删除行尾的空格。

# python - Python statsmodels 安装在熊猫上出现导入错误

> ID：15601825
> 
> 赞同：1
> 
> 时间：2013-03-24T17:41:58.140
> 
> 标签：python, ubuntu

我正在尝试使用 easy_install安装 statsmodels（ [http://statsmodels.sourceforge.net ）（如此处推荐：](http://statsmodels.sourceforge.net) [http](http://statsmodels.sourceforge.net/install.html) ://statsmodels.sourceforge.net/install.html ）。我正在使用 Ubuntu 12.04 LTS。

问题是我在熊猫上收到 ImportError ：

```
File "/usr/lib/python2.7/dist-packages/setuptools/command/easy_install.py", line 1094, in run_setup
  run_setup(setup_script, args)
File "/usr/lib/python2.7/dist-packages/setuptools/sandbox.py", line 30, in run_setup
  lambda: execfile(
File "/usr/lib/python2.7/dist-packages/setuptools/sandbox.py", line 72, in run
  return func()
File "/usr/lib/python2.7/dist-packages/setuptools/sandbox.py", line 32, in <lambda>
  {'__file__':setup_script, '__name__':'__main__'}
File "setup.py", line 201, in <module>
File "setup.py", line 53, in check_dependency_versions
ImportError: statsmodels requires pandas 
```

但是，我已经安装了 Pandas（尽管是从源代码而不是通过 easy_install 构建的）：

```
>>> import pandas
>>> pandas.__version__
    '0.10.1'
>>> pandas.__path__
    ['/usr/local/lib/python2.7/dist-packages/pandas-0.10.1-py2.7-linux-i686.egg/pandas'] 
```

我怀疑 easy_install 正在查看错误的目录，但我不确定如何更改设置。我对么？如果不是，可能是什么问题？

非常感谢您提前提供的帮助！

编辑 - 这里分别是 easy_install、pip 和 python 的位置：

```
x@ubuntu:~$ which easy_install
/usr/bin/easy_install
x@ubuntu:~$ which pip
/usr/bin/pip
x@ubuntu:~$ which python
/usr/bin/python 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T20:28:46.573

Pandas 安装在`/usr/local/lib/python2.7/dist-packages`（请参阅您的第二个粘贴块），这很可能意味着`/usr/local/lib/python2.7/`. 但是，您`easy_install`在`/usr/lib/python2.7/dist-packages`（您的第一个粘贴块中的第一行），这意味着在`"/usr/lib/python2.7`.

我认为问题源于`pandas`已为第一个 python 解释器安装的事实，`easy_install`指的是第二个解释器并试图`statsmodels`为第二个解释器安装。

我要求查看输出的原因`which python`是检查多个 python 安装中的哪一个是您的默认安装。根据您编辑的帖子，我认为这`/usr/bin/python`是一个符号链接`/usr/local/python`或类似的东西。您可以通过运行来验证这一点`ls -l /usr/bin | grep python`。

解决方案是选择您的一位口译员并仅使用它。由于已经将一个设置为您的默认设置（即在您打开终端并键入时调用`python`），我建议您使用它。然后[安装 pip](http://www.pip-installer.org/en/latest/installing.html) - 请参阅“使用 get-pip”部分。然后使用 pip 安装 statsmodels: `sudo pip install statsmodels`。祝你好运！

# php - Yii中对同一个外部表的多次引用

> ID：15601828
> 
> 赞同：0
> 
> 时间：2013-03-24T17:42:18.357
> 
> 标签：php, yii, relational-database

我对 Yii 开发很陌生，我发现自己一开始就陷入了困境。

在我的项目中，我有一个表，其中两列都指向一个外部表。就像是：

```
table "item":
- user_id_1
- user_id_2

table "user":
- id 
```

所以一个项目我总是与两个用户相关联，但我不想区分它们，我希望能够做类似的事情

```
$item->users 
```

获得两个用户。反之亦然：

```
$user->items 
```

获取在 user_id_1 或 user_id_2 中引用用户 ID 的所有项目。

这听起来对吗？有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T03:48:57.907

Yii 的 ActiveRecord 实际上只设置为处理一对一和一对多的关系——你似乎在描述一对二的关系。

处理此问题的一种方法是建立一个[MANY_MANY 关系](http://www.yiiframework.com/doc/guide/1.1/en/database.arr#declaring-relationship)，但只需将它用于两个用户而不是“许多”。您将需要设置一个`user_item`将用户连接到项目的表，而不是将密钥直接嵌入表中。*如果您只*需要强制执行两个用户到项目，则需要在项目模型中编写一些额外的验证代码。Item 中的关系看起来像这样，您可以随意调用`$item->users`：

```
public function relations() {
  return CMap::mergeArray(parent::relations(),array(
    'users'=>array(self::MANY_MANY, 'User', 'user_item(item_id,user_id)'),
  ));
} 
```

新的关联表将如下所示：

```
user_item:
-- user_id
-- item_id 
```

如果您确实需要像这里一样使用两个单独的 user_id 外键字段，则需要为每个字段设置一个 ActiveRecord HAS_ONE 关系，如下所示：

```
public function relations() {
  return CMap::mergeArray(parent::relations(),array(
    'user1' => array(self::BELONGS_TO, 'User', 'user_id_1'),
    'user2' => array(self::BELONGS_TO, 'User', 'user_id_2'),
  ));
} 
```

*但是*，您仍然可以`$item->users`使用类似这样的函数启用调用语法，这将在一个数组中返回两个用户：

```
public function getUsers() {
  return array(
    $this->user1,
    $this->user2,
  );
} 
```

这利用了 Yii 的`__get()`方法覆盖，它允许你调用`$item->getUsers()`like `$item->users`。

您可以在 User 模型中设置类似的东西，为`user_id_1`和设置两个 HAS_MANY 关系`user_id_2`，以及一个`getItems`返回合并结果数组的方法。

但我认为最简单的选择是建立一个 MANY_MANY 关系（并使用它一个 ONE_TWO 关系）。

# sql - Postgresql ltree 查询以查找具有最多孩子的父母；不包括根

> ID：15601829
> 
> 赞同：1
> 
> 时间：2013-03-24T17:42:35.663
> 
> 标签：sql, postgresql, tree, ltree

我正在使用 PostgreSQL，并且有一个表，其路径列的类型为`ltree`.

我要解决的问题是：给定整个树结构，除根外，哪个父级拥有最多的子级。

示例数据如下所示：

```
path column = ; has a depth of 0 and has 11 children its id is 1824 # dont want this one because its the root
path column = ; has a depth of 0 and has 1 children its id is 1823
path column = 1823; has a depth of 1 and has 1 children its id is 1825
path column = 1823.1825; has a depth of 2 and has 1 children its id is 1826
path column = 1823.1825.1826; has a depth of 3 and has 1 children its id is 1827
path column = 1823.1825.1826.1827; has a depth of 4 and has 1 children its id is 1828
path column = 1824.1925.1955.1959.1972.1991; has a depth of 6 and has 5 children its id is 2001
path column = 1824.1925.1955.1959.1972.1991.2001; has a depth of 7 and has 1 children its id is 2141
path column = 1824.1925.1955.1959.1972.1991.2001; has a depth of 7 and has 0 children its id is 2040
path column = 1824.1925.1955.1959.1972.1991.2001; has a depth of 7 and has 1 children its id is 2054
path column = 1824.1925.1955.1959.1972.1991.2001; has a depth of 7 and has 0 children its id is 2253
path column = 1824.1925.1955.1959.1972.1991.2001; has a depth of 7 and has 1 children its id is 2166
path column = 1824.1925.1955.1959.1972.1991.2001.2054; has a depth of 8 and has 0 children its id is 2205
path column = 1824.1925.1955.1959.1972.1991.2001.2141; has a depth of 8 and has 0 children its id is 2161
path column = 1824.1925.1955.1959.1972.1991.2001.2166; has a depth of 8 and has 1 children its id is 2389
path column = 1824.1925.1955.1959.1972.1991.2001.2166.2389; has a depth of 9 and has 0 children its id is 2402
path column = 1824.1925.1983; has a depth of 3 and has 1 children its id is 2135
path column = 1824.1925.1983.2135; has a depth of 4 and has 0 children its id is 2239
path column = 1824.1926; has a depth of 2 and has 5 children its id is 1942
path column = 1824.1926; has a depth of 2 and has 11 children its id is 1928 # this is the row I am after
path column = 1824.1926; has a depth of 2 and has 2 children its id is 1933
path column = 1824.1926; has a depth of 2 and has 2 children its id is 1989
path column = 1824.1926.1928; has a depth of 3 and has 3 children its id is 2051
path column = 1824.1926.1928; has a depth of 3 and has 0 children its id is 2024
path column = 1824.1926.1928; has a depth of 3 and has 2 children its id is 1988 
```

所以，在这个例子中，id 为**1824**的行（根）有 11 个孩子，id 为**1928**的行有 11 个深度为 2 的孩子；这是我追求的那一行。

我是 ltree 和 sql 的新手。

（这是一个修订后的问题，在[Ltree find parent with most children postgresql](https://stackoverflow.com/questions/15594565/ltree-find-parent-with-most-children-postgresql)关闭后添加了示例数据）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T22:26:16.917

### 解决方案

要查找具有最多子节点的节点：

```
SELECT subpath(path, -1, 1), count(*) AS children
FROM   tbl
WHERE  path <> ''
GROUP  BY 1
ORDER  BY 2 DESC
LIMIT  1; 
```

...并排除根节点：

```
SELECT *
FROM  (
   SELECT ltree2text(subpath(path, -1, 1))::int AS tbl_id, count(*) AS children
   FROM   tbl
   WHERE  path <> ''
   GROUP  BY 1
   ) ct
LEFT   JOIN (
   SELECT tbl_id
   FROM   tbl
   WHERE  path = ''
   ) x USING  (tbl_id)
WHERE  x.tbl_id IS NULL
ORDER  BY children DESC
LIMIT  1 
```

假设根节点有一个空`ltree`( `''`) 作为路径。可能是`NULL`。然后使用`path IS NULL`...

您示例中的获胜者实际上是`2001`，有 5 个孩子。

[**-> SQL小提琴**](http://sqlfiddle.com/#!12/416de/1)

### 如何？

*   使用[附加模块](http://www.postgresql.org/docs/current/interactive/ltree.html)[**`subpath(...)`**](http://www.postgresql.org/docs/current/interactive/ltree.html#LTREE-FUNC-TABLE)提供的功能。[`ltree`](http://www.postgresql.org/docs/current/interactive/ltree.html)

*   获取路径中具有**负偏移量的***最后一个节点*，它是元素的直接父节点。

***   计算该父节点出现的频率，排除根节点并取剩余的具有最高计数的节点。

    *   用于[`ltree2text()`](http://www.postgresql.org/docs/current/interactive/ltree.html#LTREE-FUNC-TABLE)从中提取值`ltree`。

    *   如果多个节点具有相同的最多子节点，则在示例中选择任意一个。** 

 **### 测试用例

这是我必须做的工作才能得到一个有用的测试用例（在修剪一些噪音之后）：

请参阅[SQLfiddle](http://sqlfiddle.com/#!12/416de/1)。

换句话说：请记住下次提供一个有用的测试用例。

### 附加列

回复评论。
首先，扩展测试用例：

```
ALTER TABLE tbl ADD COLUMN postal_code text
              , ADD COLUMN whatever serial;
UPDATE tbl SET postal_code = (1230 + whatever)::text; 
```

看一看：

```
SELECT * FROM tbl; 
```

只需`JOIN`在基表中生成父级：

```
SELECT ct.*, **t.postal_code**
FROM  (
   SELECT ltree2text(subpath(path, -1, 1))::int AS tbl_id, count(*) AS children
   FROM   tbl
   WHERE  path <> ''
   GROUP  BY 1
   ) ct
LEFT   JOIN (
   SELECT tbl_id
   FROM   tbl
   WHERE  path = ''
   ) x USING  (tbl_id)
**JOIN  tbl t USING (tbl_id)**
WHERE  x.tbl_id IS NULL
ORDER  BY children DESC
LIMIT  1;
```**

# javascript - 为什么链式 filter() 调用会重新触发它的函数？

> ID：15601832
> 
> 赞同：2
> 
> 时间：2013-03-24T17:42:56.570
> 
> 标签：javascript, jquery, jquery-mobile, filter

我习惯做这样的事情：

```
$(some_elements)
   .filter(function() { return $(this).jqmData("locked") !== true; })
       .jqmData('locked', true )
       .each( function(){
         // stuff
       }); 
```

所以我的过滤器调用会选择所有“解锁”的元素，在它们上运行一个函数并将它们锁定，所以下次它们被排除在外。

现在我正在尝试在小部件工厂函数中使用这个过滤器：

```
...
_create: function() {
    var self = this;
    self.refresh( true );
},

refresh: function ( create ) {
...
    $filter
        .submit( function( e ) {
            e.preventDefault();
            search.blur();
        })
        .bind( "submit", function() {
            return false;
        })
        .filter(function() { return this.getAttribute( "data-override" ) !== false; })
            .find( "input" )
                .bind( "keyup change input", self.filter( e, kids ) )
                .end()
            .end()
        .prepend( o.target || $( container ) );
},
... 
```

当我在这里使用它时，对`filter()`重新触发我的`_create`函数的调用，我不知道为什么。如果我离开过滤器，一切正常，所以它必须在我的过滤调用中。

**问题**：
我在 filter() 函数中做错了什么？

**编辑：**
所以这不是链接但有效：

```
 $filter
    .submit( function( e ) {
        e.preventDefault();
        search.blur();
    })
    .prependTo( $( o.target ) || $( el ) );

 if ( $(this).jqmData("override") === false ) {
    $filter
        .find( "input" )
        .bind( "keyup change input", function() {
            self.filter( e, kids );
        });
 } 
```

虽然这不会（重新触发`_create`）：

```
$filter
    .submit( function( e ) {
        e.preventDefault();
        search.blur();
    })
    .filter( function() {
        console.log($(this).data("override"))
        return $(this).data("override");
    })
    .find("input")
        .bind( "keyup change input", function() {
            self.filter( e, kids );
    })
    .end()
    .end()
    .prependTo( $( o.target ) || $( el ) ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:47:49.097

这两个事件处理程序完全相同：

```
.submit( function( e ) {
        e.preventDefault();
        search.blur();
    })
    .bind( "submit", function() {
        return false;
    }) 
```

这个立即执行函数并返回结果：

```
.bind( "keyup change input", self.filter( e, kids ) ) 
```

并且可能应该是：

```
 .bind( "keyup change input", function() {
       self.filter( e, kids );
    })
    .end() .... 
```

你最终会得到：

```
$filter.on('submit',function (e) {
    e.preventDefault();
    search.blur();
}).filter(function() {
    return $(this).data("override");
}).find("input").on('keyup change input', function() {
    self.filter(e, kids);
}).end().end().prepend(o.target || $(container); 
```

或者

```
$filter.prependTo(o.target || $(container)
       .on('submit',function (e) {
           e.preventDefault();
           search.blur();
     }).filter(function() {
           return $(this).data("override");
     }).find("input")
       .on('keyup change input', function() {
           self.filter(e, kids);
 }); 
```

# ruby-on-rails - rails 3 observe_form 没有路线匹配

> ID：15601835
> 
> 赞同：0
> 
> 时间：2013-03-24T17:43:33.037
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, upgrade, observer-pattern

我正在尝试将 rails 2 应用程序升级到 rails 3。在我看来，observe_form 有问题。

`<%= observe_form 'lead', :url => { :action => :update_price }, :frequency => 0.1 %>`

我在 view/ 文件夹中有一个 _update_price.rjs 部分，在控制器中有一个方法：

```
 def update_price
    unless request.xhr?
      redirect_to :controller => 'index'
    else
      set_price_group

      render :partial => "update_price", 
             :locals  => { :services => params[:service], 
                           :spectr   => params[:spectr]   }
    end
  end 
```

这是一个错误：没有路线匹配 {:action=>"update_price", :controller=>"go"}

我的路线：

```
 $ rake routes
     about        /about(.:format)                   go#about
advantages        /advantages(.:format)              go#advantages
                  /:controller/:action/:id(.:format) :controller#:action
                  /:controller/:action/:id.:format   :controller#:action
      root        /                                  go#index 

```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:59:12.497

您应该将缺少的路线添加到您的路线文件中

编辑：将 update_price 操作添加到您的路线文件

# git - Git不会让我合并

> ID：15601842
> 
> 赞同：5
> 
> 时间：2013-03-24T17:44:03.267
> 
> 标签：git, merge, branching-and-merging, git-merge

晚上好！

我知道这很常见，互联网上可能有数千个答案，但我找不到一个有帮助的答案。

我有两个本地分支机构：

> *   掌握
> *   MK

我对 Mk 做了很多更改，提交了这些，然后切换到 MASTER 以合并这两个分支。但也有冲突。所以现在我在 MASTER 分支上，不能再切换到 Mk，但需要用 Mk 覆盖我的 MASTER。

它一直在说

> 错误：您对以下文件的本地更改将被合并覆盖

有没有办法做到这一点？

```
 git mergetool --tool=meld    #No files need merging
 git merge -s theirs Mk       #Could not find merge strategy 'theirs'.
 git merge -X recursive=theirs Mk   # error: Your local changes to the following files 
```

将被合并覆盖

而且我还没有将我的更改推送到我的在线存储库。

我可以看到所有更改的提交，但无法访问其代码。

前段时间刚开始使用 git，但以前从未遇到过这样的麻烦。我非常感谢我能得到的任何帮助：s

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T17:52:53.377

既然没有[`--theirs`策略](https://stackoverflow.com/a/2303198/6309)（即使有[办法模拟它](https://stackoverflow.com/questions/4911794/git-command-for-making-one-branch-like-another/4912267#4912267)），你能不能：

*   将第一个 master 合并到 mk：`git checkout mk && git merge -s ours master`
*   合并 mk 到 master（快进）：`git checkout master && git merge mk`

该`-s ours`策略将确保您`mk`在发生冲突时保留版本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-14T09:17:09.993

可以肯定的是，您使用的是一份干净的 MASTER 工作副本。

```
git merge -s recursive -X theirs Mk 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T20:32:16.243

我不知道如何更改主分支的某些文件的文件权限。

混帐差异：

```
diff --git a/app/Resources/views/base.html.twig b/app/Resources/views/base.html.twig
old mode 100644
new mode 100755 
```

我提交了所做的更改：

```
git commit --all -m "changes permissions from 644 to 755" 
```

之后我能够合并分支，就好像什么都没发生过一样

```
git merge Mk 
```

虽然我知道这不是最优雅的解决方案。但我很高兴我的代码回来了！现在我只需要弄清楚如何撤消此权限更改。不过感谢您的大力帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-09T20:50:27.373

> > 错误：您对以下文件的本地更改将被合并覆盖

这通常是因为您有*未提交*的更改将被覆盖。所以首先你需要通过（1）提交或（2）存储来处理：

```
git add .; git commit -m "committing my workz"
# or
git add.; git stash 
```

现在尝试合并。也许你们有冲突。您希望 from 的所有更改`mk`优先于 中的任何内容`master`，因为 git 有时对检测冲突有点过于敏感（例如，没有真正的冲突），或者因为承诺的人`master`是个傻瓜：

```
git checkout master
git merge mk
# oh noes! merge conflicts
# CONFLICT (content): Merge conflict in foo_bar.txt
git checkout mk -- foo_bar.txt
git commit 
```

繁荣！螺丝`master`。你不是我的主人。

注意：`git checkout`通常用于重新指向`HEAD`（并更新您的工作目录）到分支/标签/SHA/whatever，但如果您这样做`git checkout SHA -- file`，它不会重新指向您的`HEAD`，而是会更新您在之后传递的文件`--`以反映该文件/您传递的 SHA 中的路径内容。您可以传递路径而不是确切的文件，它将检查该路径中不同的所有文件。

# php - JSONArray 无法转换为 JSONObject

> ID：15601848
> 
> 赞同：0
> 
> 时间：2013-03-24T17:44:27.167
> 
> 标签：php, android, json

我收到以下错误：

```
Error parsing data org.json.JSONException: Value [] of type org.json.JSONArray cannot be converted to JSONObject 
```

这是我拥有的 Android 和 PHP 代码：

```
private void eventUpdatePoint(String eventStatus,int lat,int lon){

    JSONParser jsonParserEUP = new JSONParser(); 
        try
        {   
            List<NameValuePair> params = new ArrayList<NameValuePair>(); 
            params.add(new BasicNameValuePair("longtitude", Integer.toString(lon))); 
            params.add(new BasicNameValuePair("latitude", Integer.toString(lat)));
            params.add(new BasicNameValuePair("eventstatus", eventStatus));
            String url_updatePoint = "http://10.0.2.2/android_connect/event_update_point.php";
            JSONObject json = jsonParserEUP.makeHttpRequest(url_updatePoint,"POST", params);
            Log.d("Response", json.toString()); 
        }
        catch(Exception e)
        {
            e.printStackTrace();
            Log.d("ERROR:","ERROR:"    + e.getClass().getName() + ":" + e.getMessage());
        }
    } 
```

php代码：

```
$response = array(); if (isset($_POST['longtitude']) && isset($_POST['latitude']) &&isset($_POST['eventstatus'])) { 
    $longtitude = $_POST['longtitude']; 
    $latitude = $_POST['latitude']; 
    $eventstatus = $_POST['eventstatus'];

    $e_id=0;
    $score=0;

    require_once __DIR__ . '/db_connect.php'; 

    $db = new DB_CONNECT(); 

    $result = mysql_query("SELECT id FROM cordinates WHERE longtitude=$longtitude AND latitude=$latitude") or die(mysql_error()); 
    while ($row = mysql_fetch_array($result)) { 

            $e_id = $row["id"];  
        } 
    $result = mysql_query("SELECT score FROM point WHERE e_id=$e_id") or die(mysql_error()); 

    if (mysql_num_rows($result) > 0) {

        while ($row = mysql_fetch_array($result)) { 

            $score = $row["score"];  
        } 
        if($eventstatus=="inc")
        {   
            $score+=10;
            $result = mysql_query("UPDATE point SET score=$score where e_id=$e_id") or die(mysql_error());  
            $response["success"] = 1; 
             $response["message"] ="Score point increased";
        }
        else if($eventstatus=="dec")
        {   
            $score-=10;
            $result = mysql_query("UPDATE point SET score=$score where e_id=$e_id") or die(mysql_error());
            $response["success"] = 0; 
             $response["message"] ="Score point decreased";
        }
    } 
    echo json_encode($response); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:57:03.783

您正在使用的网络服务返回一个 JSONArray。您必须使用 JSONArray 类型的对象来存储它。您不能使用 JSONObject。

更改此行：

```
JSONObject json = jsonParserEUP.makeHttpRequest(url_updatePoint,"POST", params); 
```

...对此：

```
JSONArray json = jsonParserEUP.makeHttpRequest(url_updatePoint,"POST", params); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T17:48:41.320

记录您的回复。如果它以“[”开头并以“]”结尾，您必须将其存储在“JSONArray”类型的变量中。注意您的日志，您的回复必须是“JSONArray”，所以只需保存您的响应类型为“JSONArray”的变量。

# javascript - 在 ASP.NET 项目中调试 javascript

> ID：15601849
> 
> 赞同：1
> 
> 时间：2013-03-24T17:44:32.423
> 
> 标签：javascript, jquery, asp.net, debugging, visual-studio-2012

我刚刚开始做 js 开发，我在服务器端、XAML 等方面的经验。我习惯于智能和良好的调试体验。

现在我在挣扎。在 VS2012 中使用 javascript 调试 asp.net 的最佳组合是什么？我正在使用 jQuery。我想保存调试断点，然后像往常一样编辑/启动/调试/停止/编辑/启动...。

现在当我有 VS 调试器时，它会缓存 js 文件，它真的不起作用。我必须在每次重新启动时清除浏览器缓存。像这样工作是真正的 PITA。F12 工具也不是很好。*每次*重新启动应用程序时，我都必须找到我需要的 js 并设置断点。

有经验的人，对减轻疼痛有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:57:44.433

You can use VS2012 to debug the JS by adding the breakpoints as usual then attaching to the IE process after allowing access to debug JS in IE through the settings. That will let you step through the JS as you would code when debugging as normal

Guide (old but still works the same): [http://www.codeproject.com/Articles/18921/Using-Visual-Studio-to-Debug-JavaScript-in-IE](http://www.codeproject.com/Articles/18921/Using-Visual-Studio-to-Debug-JavaScript-in-IE)

# perl - Perl 嵌套散列的散列

> ID：15601850
> 
> 赞同：4
> 
> 时间：2013-03-24T17:44:36.620
> 
> 标签：perl, perl-data-structures

我在弄清楚如何根据文本输入在 perl 中创建嵌套哈希时遇到了一些麻烦。

我需要这样的东西

```
my % hash = {
key1 => \%inner-hash,
key2 => \%inner-hash2
} 
```

但是我的问题是我不知道先验会有多少内部哈希。为此，我编写了以下片段来测试是否可以在循环中创建 str 变量，并将其引用存储在数组中，然后再取消引用。

```
{
    if($line =~ m/^Limit\s+$mc_lim\s+$date_time_lim\s+$float_val\s+$mc\s+$middle_junk\s+$limit  \s+$value/) {
        my $str = $1 . ' ' . $2 . ' ' . $7;
        push (@test_array_reference, \$str);
     }
}
foreach (@test_array_reference) {  
    say $$_;
} 
```

Perl 死于非标量运行时错误。我在这里有点迷路了。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T19:26:11.777

要回答您的第一个（主要？）问题，如果您浏览文本并随时创建它们，您不需要知道要创建多少哈希。此示例使用由空格分隔的字符串中的单词作为键，但您可以使用任何输入文本来满足您的目的。

```
my $text = 'these are just a bunch of words';
my %hash;

my $hashRef = \%hash;           # create reference to initial hash
foreach (split('\s', $text)){
    $hashRef->{$_} = {};        # create anonymous hash for current word
    $hashRef = $hashRef->{$_};  # walk through hash of hashes
} 
```

您还可以引用任意内部哈希并通过以下方式设置值，

```
$hash{these}{are}{just}{a}{bunch}{of}{words} = 88;
$hash{these}{are}{just}{a}{bunch}{of}{things} = 42;
$hash{these}{things} = 33; 
```

为了形象化这一点，`Data:Dumper`可能会有所帮助，

```
print Dumper %hash; 
```

这会产生，

```
$VAR1 = 'these';
$VAR2 = {
          'things' => 33,
          'are' => {
                     'just' => {
                                 'a' => {
                                          'bunch' => {
                                                       'of' => {
                                                                 'things' => 42,
                                                                 'words' => 88
                                                               }
                                                     }
                                        }
                               }
                   }
        }; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T22:07:40.513

创建哈希哈希非常简单：

```
my %outer_hash = {}; 
```

不是完全必要的，但这基本上意味着散列的每个元素都是对另一个散列的引用。

想象一个由员工编号键入的员工哈希：

```
$employee{$emp_num}{first} = "Bob";
$employee{$emp_num}{last}  = "Smith";
$employee{$emp_num}{phones}{cell} = "212-555-1234";
$employee{$emp_num}{phones}{desk} = "3433"; 
```

这种表示法的问题是一段时间后它变得相当难以阅读。输入箭头符号：

```
$employee{$emp_num}->{first} = "Bob";
$employee{$emp_num}->{last}  = "Smith";
$employee{$emp_num}->{phones}->{cell} = "212-555-1234";
$employee{$emp_num}->{phones}->{desk} = "3433"; 
```

像这样的复杂结构的一个大问题是你失去了`use strict`发现错误的能力：

```
$employee{$emp_num}->{Phones}->{cell} = "212-555-1234"; 
```

哎呀！我用`Phones`而不是`phones`. 当您开始使用这种类型的复杂结构时，您应该使用面向对象的语法。幸运的是，[perlobj](http://perldoc.perl.org/perlobj.html)教程很容易理解。

顺便说一句，复杂的数据结构处理和使用面向对象的 Perl 的能力让你进入了大联盟。这是编写更强大和更复杂的 Perl 的第一步。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-24T17:56:48.317

```
my $hashref = { hash1 => { key => val,... },
                hash2 =>  { key => val,..}  }; 
```

你也可能想在`m//x`你的正则表达式中使用修饰符，它几乎不可读。

# css - 在 CSS3 中完全展开/折叠

> ID：15601858
> 
> 赞同：-1
> 
> 时间：2013-03-24T17:45:01.643
> 
> 标签：css

在我负责前端开发的时候，我只能通过 CSS 加 javascript 来实现展开/折叠行为。是否已经可以完全在 CSS3 中编写展开/折叠解决方案？

编辑：我打算做的是这样的事情，[但](http://www.adipalaz.com/experiments/jquery/expand.html)这里使用的是 jQuery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T18:22:56.467

从[这里](http://css-tricks.com/the-checkbox-hack/)借用并稍作调整：

```
/* Default State */
div {
   background: green;
   width: 400px;
   height: 100px;
   line-height: 100px;
   color: white;
   text-align: center;
    display: none;
}

/* Toggled State */
input[type=checkbox]:checked ~ div {
   display: block
} 
```

[小提琴](http://jsfiddle.net/Dxvf7/)。

此处使用 FadeIn 进行高级展示：（已编辑，不需要评论中指出的关键帧！）[http://jsfiddle.net/Dxvf7/2/](http://jsfiddle.net/Dxvf7/2/)

```
/* Default State */
 div.container > div {
    background: green;
    width: 400px;
    height: 100px;
    line-height: 100px;
    color: white;
    text-align: center;
    opacity: 0;
    height: 0;
    -webkit-transition: all 2s linear;
    -moz-transition: all 2s linear;
    -o-transition: all 2s linear;
    transition: all 2s linear;
}
/* Toggled State */
 div.container > input[type=checkbox]:checked ~ div {
    opacity: 1;
    height: auto;
} 
```

# ajax - webmatrix 中的 jQuery/Ajax 简单表单发布

> ID：15601859
> 
> 赞同：0
> 
> 时间：2013-03-24T17:45:04.783
> 
> 标签：ajax, jquery, razor, webmatrix

有人可以告诉我我需要的代码，以便此表单无需刷新即可更新数据库？

```
@{
Layout = "~/_template1.cshtml";

var db = Database.Open("stayinflorida");
var CurrentUser = WebSecurity.CurrentUserId;
var userdetails = ("SELECT * from UserProfile WHERE UserId='8'");
var quserdetails = db.QuerySingle(userdetails, CurrentUser);

if (IsPost){
var updateuserdetails = "UPDATE UserProfile SET FirstName = @0, LastName = @1 WHERE UserID='8'";
db.Execute(updateuserdetails, Request["FirstName"], Request["LastName"]);
}
}

<h1>My Details</h1>
<hr>
<form method="post" action="~/Account/MyDetails.cshtml">
<fieldset>
<label>First Name</label>
<input class="input-xlarge" type="text" name="FirstName" placeholder=".input-xlarge" value="@quserdetails.FirstName">
<br>
<label>Last Name</label>
<input class="input-xlarge" type="text" name="LastName" placeholder=".input-xlarge" value="@quserdetails.LastName">
<button type="submit" class="btn btn-success">Update</button>
<button type="submit" class="btn btn-success">Cancel</button>
</fieldset>
</form> 
```

我写的作品，但我必须按 F5 才能更新，这不是我想要的。我想使用 jQuery/ajax，但我只是不知道代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:50:11.733

如果你想使用 AJAX，你需要一些 JavaScript。jQuery 库简化了这一点。这是我写的一篇使用 WebMatrix 进行 AJAX 更新的文章：http: [//www.mikesdotnetting.com/Article/176/WebMatrix-and-jQuery-Forms-Part-2-Editing-Data](http://www.mikesdotnetting.com/Article/176/WebMatrix-and-jQuery-Forms-Part-2-Editing-Data)

# memory - 我应该如何为我不知道大小的许多（1000+）数组分配内存？

> ID：15601862
> 
> 赞同：1
> 
> 时间：2013-03-24T17:45:20.003
> 
> 标签：memory, dynamic, cuda, neural-network

我正在使用 CUDA 库实现一个尖峰神经网络，我真的不确定如何处理以下事情：

1.  将内存 (cudaMalloc) 分配给许多不同的数组。到目前为止，只需“手动”使用 cudaMalloc 就足够了，因为我不必制作超过 10 个左右的数组。但是，我现在需要为数千个数组创建指针并分配内存。

2.  如何决定为每个数组分配多少内存。阵列的高度为 3（1 行用于突触后神经元 ID，1 行用于突触后神经元上的突触数量，1 行用于突触的功效），但它们的长度不确定，会随时间变化与传出突触的数量。

我听说 CUDA 中的动态内存分配非常慢，因此玩弄了分配每个数组所需的最大内存的想法，但是每个神经元的传出突触数量从 100 到 10,000 不等，所以我认为这是不可行的，因为我有大约 1000 个神经元。

如果有人可以建议我如何为 GPU 上的许多数组分配内存，和/或如何为上述任务编写快速动态内存分配代码，我将非常感激。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:39:34.647

如果你真的想这样做，你可以调用任意`cudaMalloc`多次；但是，这可能不是一个好主意。相反，尝试弄清楚如何布局内存，以便块中的相邻线程尽可能访问 RAM 的相邻元素。

这可能有问题的原因是线程一次以 32 个为一组执行（一个扭曲）。NVidia 的内存控制器非常智能，因此如果相邻线程请求 RAM 的相邻字节，它会将这些负载合并为一个可以有效执行的请求。相反，如果 warp 中的每个线程都在访问一个随机内存位置，则整个 warp 必须等待 32 个内存请求完成。此外，对卡内存的读取和写入一次发生整个高速缓存行，因此如果线程在从高速缓存中逐出之前未使用所有读取的 RAM，则会浪费内存带宽。如果您不针对线程块内的连贯内存访问进行优化，预计会出现 10 倍到 100 倍的减速。

（旁注：上述讨论仍然适用于 G80 后的卡；第一代 CUDA 硬件（G80）甚至更加挑剔。如果程序员想要合并行为，它还需要对齐的内存请求。）

# java - 设置操作错误的非法语法

> ID：15601865
> 
> 赞同：0
> 
> 时间：2013-03-24T17:45:55.493
> 
> 标签：java, jsf

我有一个名为 FtManagedBean.java 的 bean

我有一个下面的jsf：

```
 <h:inputText value="#{ftManagedBean.beginDate}" style="width:95%;"  id="beginDateTxt" /> 
```

如您所见，我使用降低第一个字母的 bean 并收到此错误：

```
 value="": Illegal Syntax for Set Operation 
```

为什么它将值视为空值？

这些是 getter 和 setter：

```
public String getBeginDate() {
    return beginDate;
}

public void setBeginDate(String beginDate) {
    this.beginDate = beginDate;
} 
```

# c# - 如何计算帕斯卡三角形中给定行和列的数字？

> ID：15601867
> 
> 赞同：-11
> 
> 时间：2013-03-24T17:46:04.397
> 
> 标签：c#, algorithm, pascals-triangle

我正在尝试创建一个函数，给定行和列，将计算帕斯卡三角形中该位置的值。

### 例子：

```
val = GetPasVal(3, 2); // returns 2 
```

所以在这里我指定第 3 行第 2 列，如您所见：

```
 1
         1  1
       1   2   1 
```

...应该是2。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T17:50:17.880

帕斯卡三角形包含[二项式系数](http://en.wikipedia.org/wiki/Binomial_coefficient)C(n,k)；有一个非常方便的递归公式

```
C(n, k) = C(n-1, k-1) + C(n-1, k) 
```

您可以使用此公式计算二项式系数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-26T11:56:45.310

使用 Armen 方程实现帕斯卡三角形的递归代码将如下所示：

```
using System;
using System.Collections.Generic;

public class Program
{
  public void Main()
   {        
    for(int i =0 ; i<5;i++)
    {
        int sum = 1;
        Console.WriteLine();
        for(int j =0 ; j<=i;j++)
        {
            Console.Write(pascal(i,j));
            //Console.Write(sum); //print without recursion
            sum= sum *(i-j) / (j + 1);              
        }
    }           
}

  public int pascal(int x, int y)
  {
    if((x+1)==1 || (y+1)==1 || x==y)
    {
        return 1;
    }
    else
    {
        return pascal(x-1,y-1)+ pascal(x-1,y);
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-03T22:22:47.823

Combinations 中有一个公式可以计算出帕斯卡三角形中任何位置的值：

它通常是这样调用`n choose k`和编写的：

```
n choose k = n! / k!(n-k)! 
```

表示法：`n choose k`也可以写成`C(n,k)`, `nCk`.

```
static void Main(string[] args)
{
    var x = GetPasVal(3, 2);
    Console.WriteLine(x);
}

public static long GetPasVal(int row, int col)
{
    int factOfRow = 1,i;
    for(i = 1;i<=(row - 1);i++)
        factOfRow *= i;
    int factOfRowMinusCol = 1;
    for(i = 1;i<=(row - 1)- (col - 1);i++)//check out below link to understand condition 
         factOfRowMinusCol *= i;
    int factOfCol = 1;     
    for(i = 1;i<= (col - 1);i++)
        factOfCol *=i;   
    int fact = factOfRow / (factOfCol * factOfRowMinusCol);
    return fact;
} 
```

[https://www.mathsisfun.com/pascals-triangle.html](https://www.mathsisfun.com/pascals-triangle.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-16T03:11:11.693

```
for row in range(10):
print('{: ^45}'.format(' '.join(str(pascal(row, col)) for col in range(row+1)))) 
```

使用上面的代码打印出你的帕斯卡三角形，从而修改代码。前 10 个应如下所示：

```
 1
                 1 1                     
                1 2 1                    
               1 3 3 1                   
              1 4 6 4 1                  
            1 5 10 10 5 1                
          1 6 15 20 15 6 1               
         1 7 21 35 35 21 7 1             
       1 8 28 56 70 56 28 8 1            
     1 9 36 84 126 126 84 36 9 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-28T13:39:14.340

GetPasVal 方法将计算帕斯卡三角形中的所有数字，直到您给出的点（高度），然后该方法将返回该行上的索引值（宽度）。这是你可以使用的东西。这很简单。你只需要使用一个锯齿状数组。

```
 static void Main(string[] args)
    {
        var x = GetPasVal(3, 2);
        Console.WriteLine(x);
    }

    public static long GetPasVal(int height, int width)
    {
        long[][] triangle = new long[height][];
        for (int i = 0; i < height; i++)
        {
            triangle[i] = new long[i + 1];
            triangle[i][0] = 1;
            triangle[i][i] = 1;
            if (i >= 2)
            {
                for (int j = 1; j < i; j++)
                {
                    triangle[i][j] = triangle[i - 1][j - 1] + triangle[i - 1][j];
                }
            }
        }
        return triangle[height - 1][width - 1];
    } 
```

# vb.net - Visual basic（T 或 V）

> ID：15601868
> 
> 赞同：0
> 
> 时间：2013-03-24T17:46:07.537
> 
> 标签：vb.net

在 VB.NET 中创建类或其他元素时，例如：

```
Public Class Class1(Of T)

End Class 
```

这段代码中的“(Of T)”是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:48:17.570

`(Of T)`是泛型类型参数。这意味着您可以：

*   在类代码中引用 T，不知道 T 的类型。
*   构造 class 的实例`Class1`，将任何类型 T 传递给它。

这用于构造可以对不同类型进行操作的类，而无需在编译时知道类型。除其他外，这对于集合类非常有用，您可以在其中创建一次集合（例如：列表），然后为您可能需要的任何特定类型创建一个`List (Of String)`或`List(Of DateTime)`等等。

另外，请参阅[这篇 MSDN 文章关于 VB.NET 中的泛型](http://msdn.microsoft.com/en-us/library/w256ka79.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T17:48:52.587

这意味着类型参数，这意味着该类能够处理您在创建期间指定的类的对象。例如`List (Of T)`.

# css - 在包含 div 的一个内联显示的两个图像旁边放置一个 div

> ID：15601869
> 
> 赞同：0
> 
> 时间：2013-03-24T17:46:13.637
> 
> 标签：css, image, html, position, inline

考虑以下[站点](http://www.penandpixelmedia.com/Best_Technique)。

我试图在女人的图片旁边放置一个大约 300 像素宽、大约 400 像素高的 div。我试图将 div 显示为内联但无济于事。我试图向左漂浮，但再次没有运气。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:51:29.697

您可以使用以下 CSS 将其放置在图像旁边：

```
.emailForm {
    width: 260px; /* anything above 260px will fall over to the next line */
    /*float: right;*/ /* remove float */
    display: inline-block; /* inline-block since you want specific width and height */
    height: 434px;
    border: 1px solid black;
} 
```

*注意：*很确定您正在使用它，但如果您没有使用它，请使用 Firebug 或 Chrome 开发工具来轻松完成此类任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T17:52:21.567

尝试这个，

```
 <div id="wrap">
 <div id="nextTo"></div>
 <img id="woman" src="#" width="600px" height="400px" />
 </div> 
```

CSS

```
 #wrap {width: 1000px; margin: 0 auto;}
 #nextTo {float: right; max-height: 400px;} 
```

这将确保您的图像是固定宽度的。例如，如果您有一个 1000 像素宽的包装 div，则该`#nextTo`div 将是图像占用的其余部分（在我的示例中为 400 像素）。

将`max-height`属性添加到`#nextTo`div 可确保 div 不会落在图像下方，但不确定这是否是您所追求的。

# python - 设置向导，如 Python 中的脚本

> ID：15601870
> 
> 赞同：4
> 
> 时间：2013-03-24T17:46:13.850
> 
> 标签：python, linux, installation

我正在编写一个简单的*设置向导*，例如 Python 中的脚本。基本上它会提示用户输入一些值并回答一些是/否问题。根据用户输入，脚本将创建目录、创建和初始化配置文件、创建符号链接、设置权限等。

当用户做出选择时，会采用不同的路径，目录结构和符号链接的存在可能会有所不同。每个步骤都可能出现许多问题，可能需要用户更改他们的输入或回滚整个事情。

1 - 这是编写此脚本的最佳方法吗？这个文本菜单设置向导是个好主意吗？

2-是否有一个模块可以帮助简化这个过程，这样我就不会重新发明轮子？

3-我应该在用户做出选择时实际执行每个步骤还是等到最后一次做所有事情？

4-记住已经创建的结构以便我可以编写回滚函数的最佳方法是什么？

我不想要任何代码作为答案；感谢任何建议、意见或外部链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T17:58:07.830

我不做 GUI 的东西。您可以编写一个，但假设您完全在命令行上执行此操作。

1.  我建议在产生物理副作用之前接受所有用户输入。换句话说，在用户完成所有选项之前不要开始创建目录。Python 文档工具 Sphinx 就是一个很好的例子。当用户启动时，它会询问用户许多问题`quickstart`。Sphinx 直到最后才生成物理目录和配置文件。这样就省去了“记住”的累人。分支太多。不要那样做。在最后完成整个设置。

2.  要看。如果你想制作一个简单的命令行界面，Python 有 argpase 来制作命令行选项。使用构建在 argparse 之上的[docopt](http://docopt.org/)库可以实现上述操作。但是，如果您想拥有命令行，这很有用。如果您的脚本只需要调用“python script.py”然后开始询问用户问题，我不知道有任何有用的库可以处理设置内容。

实际上我正在开发一个，`dcoprompt`但它还没有完成。[https://bitbucket.org/yeukhon/docprompt](https://bitbucket.org/yeukhon/docprompt) 基本上它应该允许你写下你的设置提示然后记住它们。代码库很糟糕，效率不高。你可以试试，但由于这个学期的作业量很大，我要到夏天才能完成这个功能。

所以答案是否定的。您必须自己编写代码。只是很多原始输入和很多变量。

1.  再次，等到最后产生副作用。

2.  再次，等到最后产生副作用。

* * *

**编辑**

假设您等到最后创建目录和符号链接，并且在其中一个步骤 IOError 发生时，您想要撤消整个设置。如果您创建的只是目录、文件和符号链接，请将它们添加到列表字典中。请参阅我的编辑。

```
def physical_setup(...):
    memory = {
        'dirs': [],
        'symlinks': [],
        'files': []
    }
    try:
        # start doing physical setup
        memory['dirs'].append('/tmp/dir1')        
        os.path.mkdir('/tmp/dir1')

    # catching all exceptions is considered a bad practice but sometimes be a little badass
    except Exception as e:
        for key, valist in memory.iteritems():
            if key == 'dirs':
                for dir in valist:
                    shutil.rmtree(dir) 
```

**重要**：上面的代码有一个问题，您应该在删除文件夹之前取消链接、删除文件和目录。因为如果文件是已删除目录的一部分，您将不得不静默捕获异常。很多代码。只需取消链接，删除文件和目录。

# javascript - $.getJSON - 在 url 中使用参数时无法捕获响应

> ID：15601873
> 
> 赞同：2
> 
> 时间：2013-03-24T17:46:22.353
> 
> 标签：javascript, jquery, getjson

从昨天开始，我一直在努力使用以下代码。

```
function findLocation(){

  alert(1);

  $.getJSON( "http://www.omc4web.com/geoip/geoip.php", 
    {ip: "127.0.0.1",
    callingurl: "www.thissite.com" }, 
    function( result ){
      alert(2);
      $.each(result, function(i, field)
      {
        alert(i); 
        if(i=="country")
        { 
          country_code = field;
        }

      });
    })

} 
```

它似乎不想超越 php 脚本的调用。返回的数据是 `{"country":"US","store":"US"}`，但函数似乎不想处理它，我从来没有得到警报（2）。我已经在 php 脚本中放置了监视器，我可以看到它确实使用正确的参数被调用，并且它确实返回了预期的数据。

如果您从浏览器调用[http://www.omc4web.com/geoip/geoip.php?ip=127.0.0.1&callingurl=www.thissite.com ，您将看到返回的数据。](http://www.omc4web.com/geoip/geoip.php?ip=127.0.0.1&callingurl=www.thissite.com)

调用不带参数的 URL 的同一段代码行为正确，但上述设置不正确。

我剩下的几根头发会感谢一些帮助。

附加信息：

*   header('内容类型：应用程序/json'); 在 php 脚本上设置

*   在 chrome 和 firefox 上试过

*   萤火虫上没有错误显示只是一个空白的响应屏幕

*   从本地主机运行脚本，但如果它是一个跨域问题，为什么我能够对亚马逊进行类似的调用（没有参数）？`$.getJSON("http://freegeoip.net/json/",function(result){`与流行的 flickr 示例一样工作正常。

*   我在用`<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>`

提前致谢

奥西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:52:46.267

我认为这是一个跨域问题。我猜您可以使用`freegeoip.net`，因为您使用的是**JSONP**。尝试查看 jQuery 文档以了解如何使用 JSONP：[jQuery.getJSON()](http://api.jquery.com/jQuery.getJSON/)

# html - 延迟：悬停使用CSS？

> ID：15601874
> 
> 赞同：3
> 
> 时间：2013-03-24T17:46:27.743
> 
> 标签：html, css, hover

我有一个菜单，其中 onHover 显示一个信息框，告诉按钮的作用。如何应用延迟，以便在我将鼠标悬停在按钮上一秒钟后出现框？

**HTML：**

```
<td class="info"><a id="login-edit_account" href="../login-edit_account.php">Edit account<span><div id="pointer"></div><p style="font-size:11px">Edit user's information.</p></span></a></td> 
```

**CSS：**

```
td.info                     {
                            position:relative; /*this is the key*/
                            z-index:24; background-color:#ccc;
                            color:#000;
                            text-decoration:none
                            }

td.info:hover               {
                            z-index:25;
                            background-color:#fff
                            }

td.info span                {
                            display: none;
                            transition: 0s display;
                            }

td.info:hover span          { /*the span will display just on :hover state*/
                            display:block;
                            position:absolute;
                            top:42px; left:7px;
                            width:210px;
                            border:2px solid #0cf;
                            padding: 5px;
                            background-color:#fff; color:#000;
                            text-align: center;
                            -webkit-transition-delay:5s;
                            }

#pointer                    {
                            border:solid 10px transparent;
                            border-bottom-color:#0cf;
                            position:absolute;
                            margin:-27px 0px 0px 10px;
                            } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T19:08:08.893

这真的很简单。例子：

```
a {
    -webkit-transition: 1s 3s;
}

a:hover {
    background-color: red;
} 
```

当用户悬停链接时，浏览器会等待 3 秒。只有当这些秒过去后，背景才会变为红色（在这种情况下，过渡时间为 1 秒）。

这是一个小提琴：http: [//jsfiddle.net/joplomacedo/VP7hE/](http://jsfiddle.net/joplomacedo/VP7hE/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T17:47:54.077

是的，您可以使用 CSS3 的[过渡](http://www.w3schools.com/css3/css3_transitions.asp)来延迟`:hover`效果。

> CSS 过渡是 CSS3 规范集的一部分，提供了一种在更改 CSS 属性时控制动画速度的方法。您可以使属性更改在一段时间内发生，而不是让属性更改立即生效。例如，如果您将元素的颜色从白色更改为黑色，通常这种更改是瞬时的。启用 CSS 过渡后，更改会按照加速曲线的时间间隔发生，所有这些都可以自定义。

在您的情况下，我认为您需要关注[转换延迟](https://developer.mozilla.org/en-US/docs/CSS/transition-delay)属性。

以下是一些关于使用转换/示例用例的有用链接：

[https://developer.mozilla.org/en-US/docs/CSS/transition-delay](https://developer.mozilla.org/en-US/docs/CSS/transition-delay)

[http://css-tricks.com/transition-delay-delays/](http://css-tricks.com/transition-delay-delays/)

[http://designshack.net/articles/css/create-stunning-effects-with-css-transition-delays/](http://designshack.net/articles/css/create-stunning-effects-with-css-transition-delays/)

# javascript - 使用 jQuery + Coffeescript 的 AJAX 调用未正确生成

> ID：15601878
> 
> 赞同：0
> 
> 时间：2013-03-24T17:47:07.360
> 
> 标签：javascript, jquery, ajax, coffeescript

我有以下咖啡脚本：

```
$(document).ready ->`
        $.ajax 'http://www.omdbapi.com/?i=tt1285016',
               type: 'GET'
               dataType: 'json'
               error: (jqXHR, textStatus, errorThrown) -> $('body').append "AJAX Error: #{textStatus}"          
               success: (data, textStatus, jqXHR) -> $('body').append "Successful AJAX call: #{data}" 
```

但是，这会生成以下对我来说不合适的 Javascript：

```
(function() {
  $(document).ready(function() {
    return $.ajax('http://www.omdbapi.com/?i=tt1285016');
  });

  ({
    type: 'GET',
    dataType: 'html',
    error: function(jqXHR, textStatus, errorThrown) {
      return $('body').append("AJAX Error: " + textStatus);
    },
    success: function(data, textStatus, jqXHR) {
      return $('body').append("Successful AJAX call: " + data);
    }
  });

}).call(this); 
```

谁能告诉我这是哪里出错了？

谢谢，亚当

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:04:39.983

我无法编译您当前的代码 ( `CoffeeScript version 1.6.1`)，但如果您在编译```后删除该符号`$(document).ready ->`

```
(function() {

  $(document).ready(function() {
    return $.ajax('http://www.omdbapi.com/?i=tt1285016', {
      type: 'GET',
      dataType: 'json',
      error: function(jqXHR, textStatus, errorThrown) {
        return $('body').append("AJAX Error: " + textStatus);
      },
      success: function(data, textStatus, jqXHR) {
        return $('body').append("Successful AJAX call: " + data);
      }
    });
  });

}).call(this); 
```

* * *

我不确定如何`CoffeeScript`处理换行符，但我猜您正在系统上编译带有`Windows end-of-lines`( `CRLF`)的文件`*nix`，这会导致问题。

我这么说是因为类似于以下代码：

```
 $(document).ready ->

        $.ajax 'http://www.omdbapi.com/?i=tt1285016',

      type: 'GET'

      dataType: 'html'

      error: (jqXHR, textStatus, errorThrown) -> $('body').append "AJAX Error: #{textStatus}"

      success: (data, textStatus, jqXHR) -> $('body').append "Successful AJAX call: #{data}" 
```

编译为您发布的那个。（请注意，第 3 行之后有一个换行符`,`）

# c# - LINQ：填充列表 具有来自 2 个不同模型的属性

> ID：15601883
> 
> 赞同：0
> 
> 时间：2013-03-24T17:47:19.893
> 
> 标签：c#, linq

我有一个包含 ID 和名称的列表，我想用其他两个列表中的属性填充它。

```
List<Foo> foolist = foo.fromdatasource(); // for all items in this list
List<Bar> = barlist from bar.datasource(); // fill a new list with Name property from this list

List<ViewModel> viewModel = new List<ViewModel>();

foreach (Foo foo in foolist)
{
   viewmodel.Add(new ViewModel
   {
      Id = foo.Id
      Name = barlist.Where(f => f.Id == b.Id).Select(s => s.Name)
   });
} 
```

最后一行没有给我来自 barlist 的项目的名称，该名称对应于来自傻瓜的 id。有谁知道这样做的正确方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T17:49:28.420

用下面的行替换你的最后一行：

```
Name = barlist.First(f => f.Id == b.Id).Name; 
```

要获得更多约束以避免`null`异常，您可以编写：

```
var viewModels = foo.Select(f => {
    var bar = barlist.FirstOrDefault(b => f.Id == b.Id);

    return new ViewModel() { 
        Id = f.Id, 
        Name = bar == null? null : bar.Name 
    };
}); 
```

您也可以使用该方法`SingleOrDefault`代替`FirstOrDefault`，这是相同的结果，因为我猜您`Id`是独一无二的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T17:50:11.873

什么是`b`或`b.ID`？

如果它是某种东西并且您想使用它，那么

```
Name = barlist.FirstOrDefault(f => f.Id == foo.Id).Name; 
```

否则

```
Name = barlist.FirstOrDefault(f => f.Id == b.Id).Name; 
```

# c# - 检查其他进程的文本框是否是活动控件

> ID：15601887
> 
> 赞同：0
> 
> 时间：2013-03-24T17:47:40.207
> 
> 标签：c#, vb.net, winforms, pinvoke

我想通过文本框句柄检查其他进程文本框控件是否是其他进程主窗口中的活动控件。

代码应如下所示：

```
Dim TheMainWinDowHandle As IntPtr = Process.GetProcessesByName("proccessName")(0).MainWindowHandle
If TheMainWinDowHandle <> IntPtr.Zero Then
    Dim TextBoxHandle As IntPtr = FindWindowEx(TheMainWinDowHandle, 0, "Edit", "TextBox Inner Text")
    If TextBoxHandle <> IntPtr.Zero Then
        Dim TheActiveHandleInTheMainWindow As IntPtr = GetActiveHandleFrom(TheMainWinDowHandle) 'TheActiveHandleInTheMainWindow = The Focused Control Handle Of "TheMainWinDow".
        If TheActiveHandleInTheMainWindow = TextBoxHandle Then
            MsgBox("The TextBox Is onFocus")
        Else
            MsgBox("The TextBox Is Not In Focus.")
        End If
    End If
End If 
```

我该怎么做（c#/vb.net）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T20:13:10.423

我找到了答案：
使用`GetForegroundWindow`函数获取用户当前正在使用的窗口。
使用该`GetWindowThreadProcessId`函数获取此窗口和您的窗口的 ID。
使用该`AttachThreadInput`函数将线程的消息队列与拥有另一个窗口的线程临时关联。
使用`GetFocus`函数获取 hWnd! 再次使用该`AttachThreadInput`函数断开与其他线程的连接。
资料来源： http: [//www.codeproject.com/Articles/34752/Control-in-Focus-in-Other-Processes](http://www.codeproject.com/Articles/34752/Control-in-Focus-in-Other-Processes)

# filesystems - Meteor 服务器专用文件和临时下载

> ID：15601895
> 
> 赞同：1
> 
> 时间：2013-03-24T17:48:04.570
> 
> 标签：filesystems, meteor

**在 Meteor 中，是否有可以放置*不会*发送给客户端的 .zip 的文件夹？**

**第二个问题：如何在应用程序上制作临时下载链接，一段时间后会自毁？**

这个想法是只有服务器才能访问这个文件。`/server`似乎不起作用，因为我放置在那里的任何不是代码的文件都不包含在最终包中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:36:14.183

# 我的解决方案 - Heroku 文件系统

这可能不是解决此问题的最佳方法 - 但是，对于需要将文件与应用程序捆绑在一起而客户端无法看到的其他任何人，这就是我的做法。

请注意，删除安全文件已完成*，因为 Heroku 不会在重新启动时保留文件系统更改*。

*   将文件放在文件夹中名为“securefiles”或类似文件夹的`/public`文件夹中。
*   这些被编译到`/static`包中命名的文件夹中。请注意，如果您使用的是 Heroku buildpack，则服务器工作目录的实际路径是`/app/.meteor/heroku_build/app/`.
*   接下来，在服务器启动时，检测应用程序是否已捆绑。您可以通过检查`static`文件夹的存在来做到这一点，并且可能还有其他文件是捆绑包独有的。
*   如果您被捆绑，请使用`ncp`. 我为此目的制作了一个陨石包，用于`mrt add ncp`将节点复制工具添加到您的项目中。我建议复制到应用程序的根目录，因为这对客户端不可见。
*   接下来，从`static`.

此时，您拥有只能由服务器访问的文件。这是一些示例咖啡脚本来做到这一点：

```
Meteor.startup ->
   fs = __meteor_bootstrap__.require 'fs'

   bundled = fs.existsSync '/app' #Checking /app because on heroku app is stored in root / app
   rootDir = if bundled then "/app/.meteor/heroku_build/app/" else "" #Not sure how to get the path to the root directory on a local build, this is a bug
   if fs.existsSync rootDir+"securefiles"
       rmDir rootDir+"securefiles"
   #Do the same with any other temporary folders you want to get rid of on startup

   #now copy out the secure files
   ncp rootDor+'static/securefiles', rootDir+'securefiles', ()->
       rmdir rootDir+'static/securefiles' if bundled 
```

## 安全/临时文件下载

[请注意，此代码依赖于`random`包和我的包`ncp`]

正如我在我的项目中所做的那样，添加到这个系统以支持临时文件下载非常容易。以下是如何运行`url = setupDownload("somefile.rar", 30)`以创建临时文件下载链接。

```
setupDownload = (dlname, timeout) ->
    if !timeout?
        timeout = 30
    file = rootDir+'securefiles/'+dlname
    return '' if !fs.existsSync file
    dlFolder = rootDir+'static/dls'
    fs.mkdirSync dlFolder if !fs.existsSync dlFolder
    dlName = Random.id()+'.rar' #Possible improvement: detect file extension
    dlPath = dlFolder+'/'+dlName
    ncp file, dlPath, () ->
        Fiber(()->
            Meteor.setTimeout(() ->
                fs.unlink dlPath
            , 1000*timeout)
        ).run()
    "/dls/"+dlName 
```

也许我会为此做一个包。让我知道你是否可以使用类似的东西。

# c++ - 使用 C++ 中的指针通过引用传递数组

> ID：15601912
> 
> 赞同：0
> 
> 时间：2013-03-24T17:49:54.603
> 
> 标签：c++, pointers, reference, pass-by-reference

在一些使用指针和引用的新领域中，我试图通过引用将数组传递给使用指针的函数，但是无论我尝试什么，我都会遇到错误，我确信问题很容易解决，但我只是我似乎无法理解它，任何人都可以看到我犯的错误吗？任何帮助都会有很大帮助，谢谢

```
#include<iostream>
#include<cmath>
#include <iomanip>
#include <cstdio>   
#include <cstdlib>
#include <new>

using namespace std;

//Inline function 
inline double getFahrenheit(double theCelsius)
{ 
//Convert the celcius to farenheit   
return (theCelsius + 32) * 5 / 9;  
}

void outputWeather(double *temperaturesArray, const string WEEK_DAY_NAMES[], const     double MAX_NUMBER)
{
     //this is a counter that will increment through the days and various 
     int counter;
     //reset the counter to 0 so we can use it again       
     counter = 0;
     //print a header       
     cout << "THIS WEEKS TEMPERATURE REPORT " << endl;
     //print a divider 
     cout << "=============================" << endl;
     //while the counter is less than 7 repeat again
     while(counter < MAX_NUMBER)
     {
         //print out the temperatures by day          
         cout << WEEK_DAY_NAMES[counter] << "     " << temperaturesArray[counter] << "\370C    " << getFahrenheit(temperaturesArray[counter]) <<"\370F    "<< endl;
         //increase the counter by 1
         counter +=1;  
     }
}

//Function that will determine whether or not the value the user entered was numeric     and within the range
double checkValidation(string weekDay)
{
 //Create a variable to store a valid number
 double validNumber;

 //This will hold the value for the lowest  
 const double MIN_NUMBER = 1;
 //This will hold the value for the highest temperature
 const double MAX_NUMBER = 365;
 //This will hold the value for the valid number that the user will eventually enter 
 validNumber = 0.0;

 //This will alert the user to enter a temperature for that day of the week
 cout << "Please enter the temperature for " << weekDay << endl;
 //This will take in teh value the user entered for teh temperature 
 cin >> validNumber; 

     //If the text the user entered was not numeric start again             
 if(cin.fail())            
 {
     //C++ built in methods for clearing the cin                     
     cin.clear();              
     fflush(stdin);

     //alert the user what they typed was wrong 
     cout << "invalid input. please try again and enter a numeric value" << endl; 
     //pass in the weekeday and start over
     checkValidation(weekDay);                     
 } 
 else 
 {
     //if teh number falls outside the range
     if(validNumber < MIN_NUMBER || validNumber > MAX_NUMBER)
     {
         //Alert the user that it was outside the range           
         cout << "invalid input. please try again and enter a value between -90 and 60" << endl; 
         //pass in the weekday and try again          
         checkValidation(weekDay);
     }

 }
 //return the valid number    
 return validNumber;  

}

int main()
{
    //this is a counter that will increment through the days and various 
    int counter;
    //a constant to hold the variable for the number of days
    const int MAX_COUNTER = 7;
    //an array that will hold all the days of the week
    const string WEEK_DAY_NAMES[] = 
    { 
          "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday" 
    };

    //this will hold all of teh temperatures
    double temperaturesArray[MAX_COUNTER]; 
    //start the counter off at 0      
    counter = 0; 

    //begin telling the user to enter temperatures by printing a header
    cout << "Please enter the temperature for every day of the week " << endl;
    //while the counter is less than 7 we will repeat
    while(counter < MAX_COUNTER)
    {                                                       
    //add temperature to the array 
    temperaturesArray[counter] = checkValidation(WEEK_DAY_NAMES[counter]); 
    //add 1 to the counter            
    counter +=1;                     

    }

    double * arrayPointer = new double[MAX_COUNTER];

    arrayPointer = &temperaturesArray;

    outputWeather(arrayPointer, WEEK_DAY_NAMES, MAX_COUNTER);       

system("PAUSE");
return 0;              
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T17:57:47.587

In C++, the size of an array is encoded into its type.

There is no general "array of doubles" type. But there is an "array of 7 doubles" type, and an "array of 13 doubles" type, and so on.

So to pass an array *as an array*, and not simply as a pointer, to a function, you need to encode the precise type in the function's signature.

It won't be "a function which takes an array", but "a function which takes an array of size 7".

The way to do that is as follows:

```
void f(double (&arr)[7]); 
```

Or of course, you can template it, if the array size is not fixed:

```
template <size_t N>
void f(double (&arr)[N]); 
```

But really, what you're trying to do shouldn't be done using raw arrays at all.

Use the standard library vector.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T18:04:05.390

简而言之，更换线路

```
arrayPointer = &temperaturesArray; 
```

和

```
arrayPointer = temperaturesArray; 
```

使代码编译。

请注意，它`arrayPointer`是类型`double*`并且`temperaturesArray`是类型`double[MAX_COUNTER]`(with `MAX_COUNTER = 7`)。因此，您可以分配`arrayPointer`给 a 的地址，`double`但不能分配`arrayPointer`给 a 的地址`double[MAX_COUNTER]`。这就是原始代码试图做的事情，因此无法编译。

另一方面， a 的每个元素`double[MAX_COUNTER]`都是 a `double`。特别是，第一个元素是 a `double`，您可以将其地址分配给`arrayPointer`：

```
arrayPointer = &temperaturesArray[0]; 
```

上面的修复只是这条线的一个合体糖。实际上，当您将“*类型 T 的数组*”（例如`double[MAX_COUNTER]`）类型的对象分配给“类型 T 的*指针*”时，编译器会执行所谓的*数组到指针的转换*，这意味着分配第一个的地址数组元素指向指针。

现在对您的代码（使用提供的修复）做一点评论，特别是以下几行：

```
double * arrayPointer = new double[MAX_COUNTER];
arrayPointer = temperaturesArray; 
```

`MAX_COUNTER`上面的第一行分配堆内存来存储类型对象的数组`double`。然后将该数组的第一个元素的地址分配给`arrayPointer`。

然后，以下行重新分配`arrayPointer`给 的第一个元素的地址`temperaturesArray`。因此，堆分配数组的第一个元素的地址丢失了，您不能再使用`delete`它了。请记住，每次调用都`new`必须与调用匹配`delete`（否则您会出现内存泄漏）。但是，在这种特殊情况下，最好不要调用`delete`. 实际上，您应该消除对的调用，`new`因为堆内存从未使用过。更准确地说，您可以删除上面的第一行。

# c++ - opengl 4中的每个顶点照明问题

> ID：15601915
> 
> 赞同：0
> 
> 时间：2013-03-24T17:50:01.040
> 
> 标签：c++, opengl, glsl, lighting

我有一个由只有 8 个顶点的立方体组成的模型，并且我遇到了每个顶点定向照明的问题。[不是整个模型一次被点亮，每个立方体似乎都像这样](http://screencloud.net/v/z5gG)单独点亮。

这是我的顶点着色器：

```
layout(location = 0)in vec3 vp;
layout(location = 1)in vec3 color;
layout(location = 2)in vec3 normal;

out vec3 fColor;

uniform mat4 model;
uniform mat3 nm;
uniform mat3 partNM;
uniform mat4 modelPart;
uniform mat4 view;
uniform mat4 projection;

void main () {
    gl_Position = modelPart * vec4(vp, 1.0f);
    gl_Position = model * gl_Position;
    gl_Position = view * gl_Position;
    gl_Position = projection * gl_Position;

    mat3 normalMatrix =  partNM*nm;
    vec3 normalDirection = normalize(normalMatrix*normal);
    vec3 lightDirection = normalize(vec3(-1.0, 1.0, -1.0));

    vec3 diffuseReflection = clamp(dot(normalDirection, lightDirection),0.0,1.0);
    fColor = color+diffuseReflection;
} 
```

和我的片段着色器：

```
in vec3 fColor;
out vec4 frag_colour;

void main () {
    frag_colour = vec4(fColor.xyz,1.0);
} 
```

这是我用来设置法线矩阵的函数：

```
void Shader::setNormalMatrix(string name,glm::mat4 matrix) {
    glm::mat3 nm = glm::transpose(glm::inverse(glm::mat3(matrix)));
    unsigned int location = glGetUniformLocation(program, name.c_str());
    glUniformMatrix3fv(location, 1, false, &nm[0][0]);
} 
```

以及为我的立方体生成顶点和法线的函数：

```
std::vector<float> Cube::createCube(float size,float x,float y,float z,float r, float g, float b) {
    VertexType points[8];

    points[0].x = (x*size)+0.0f;
    points[0].y = (y*size)+0.0f;
    points[0].z = (z*size)+size;
    points[0].nx = 0.577350; 
    points[0].ny = 0.577350;
    points[0].nz = -0.577350;
    points[0].r = r;
    points[0].g = g;
    points[0].b = b;

    points[1].x = (x*size)+size;
    points[1].y = (y*size)+0.0f;
    points[1].z = (z*size)+size;
    points[1].nx = -0.577350; 
    points[1].ny = 0.577350;
    points[1].nz = -0.577350;
    points[1].r = r;
    points[1].g = g;
    points[1].b = b;

    points[2].x = (x*size)+size;
    points[2].y = (y*size)+size;
    points[2].z = (z*size)+size;
    points[2].nx = -0.577350;
    points[2].ny = -0.577350;
    points[2].nz = -0.577350;
    points[2].r = r;
    points[2].g = g;
    points[2].b = b;

    points[3].x = (x*size)+0.0f;
    points[3].y = (y*size)+size;
    points[3].z = (z*size)+size;
    points[3].nx = 0.577350; 
    points[3].ny = -0.577350;
    points[3].nz = -0.577350;
    points[3].r = r;
    points[3].g = g;
    points[3].b = b;

    points[4].x = (x*size)+0.0f;
    points[4].y = (y*size)+0.0f;
    points[4].z = (z*size)+0.0f;
    points[4].nx = 0.577350; 
    points[4].ny = 0.577350;
    points[4].nz = 0.577350;
    points[4].r = r;
    points[4].g = g;
    points[4].b = b;

    points[5].x = (x*size)+size;
    points[5].y = (y*size)+0.0f;
    points[5].z = (z*size)+0.0f;
    points[5].nx = -0.577350; 
    points[5].ny = 0.577350;
    points[5].nz = 0.577350;
    points[5].r = r;
    points[5].g = g;
    points[5].b = b;

    points[6].x = (x*size)+size;
    points[6].y = (y*size)+size;
    points[6].z = (z*size)+0.0f;
    points[6].nx = -0.577350; 
    points[6].ny = -0.577350;
    points[6].nz = 0.577350;
    points[6].r = r;
    points[6].g = g;
    points[6].b = b;

    points[7].x = (x*size)+0.0f;
    points[7].y = (y*size)+size;
    points[7].z = (z*size)+0.0f;
    points[7].nx = 0.577350; 
    points[7].ny = -0.577350;
    points[7].nz = 0.577350;
    points[7].r = r;
    points[7].g = g;
    points[7].b = b;
    std::vector<float> rPoint;
    for(VertexType p:points) {
        rPoint.push_back(p.x);
        rPoint.push_back(p.y);
        rPoint.push_back(p.z);
        rPoint.push_back(p.r);
        rPoint.push_back(p.g);
        rPoint.push_back(p.b);
        rPoint.push_back(p.nx);
        rPoint.push_back(p.ny);
        rPoint.push_back(p.nz);
    }
    return rPoint;
} 
```

模型分为几部分，这就是为什么我有两个正常矩阵和模型矩阵；一个用于整个模型，一个用于模型的单个部分。我的代码有问题，还是我需要使用每片段照明来修复这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T17:58:12.607

您的问题是网格的拓扑。在立方体的拐角处，三个面相交。这些面中的每一个都有不同的法线。这会在法线的拓扑中产生不连续性。或者说得更简单一些。每个角必须使用 3 个顶点，每个面一个，面法线指向正确的方向。

当您使用它时，您可以删除那些无论如何都不可见的立方体面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T17:54:03.480

原因是您将每个立方体渲染为单独的模型。因此，着色器将每个模型运行一次，在您的情况下，每个立方体运行一次。为了解决这个问题，您需要将整个模型（您的机器人）渲染为一个模型，具有一组顶点，而不是一组立方体。

# c# - CompilationRelaxations.NoStringInterning 实际上是如何工作的？

> ID：15601916
> 
> 赞同：6
> 
> 时间：2013-03-24T17:50:02.430
> 
> 标签：c#, string-interning

我在演示 NoStringInterning 时遇到问题

```
[assembly: System.Runtime.CompilerServices.CompilationRelaxations(System.Runtime.CompilerServices.CompilationRelaxations.NoStringInterning)]

    class Program
    {
        static void Main(string[] args)
        {
            String s1 = "Friday";
            String s2 = "Friday";
            String s3 = "Friday";
            String s4 = "Friday";
            String s5 = "Friday";
            String s6 = "Friday";
            String s7 = "Friday";
            String s8 = "Friday";
            String s9 = "Friday";
            // etc...
            Console.WriteLine(Object.ReferenceEquals(s1, s2));
            Console.WriteLine(Object.ReferenceEquals(s1, s3));
            Console.WriteLine(Object.ReferenceEquals(s1, s4));
            Console.WriteLine(Object.ReferenceEquals(s1, s5));
            Console.WriteLine(Object.ReferenceEquals(s1, s6));
            Console.WriteLine(Object.ReferenceEquals(s1, s7));
            Console.WriteLine(Object.ReferenceEquals(s1, s8));
            Console.WriteLine(Object.ReferenceEquals(s1, s9));
            // etc... 
```

我已经尝试使用 .NET CLR 2、3、4.. 作为输出，我得到的只是一堆 True。我期待一堆假！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T18:01:00.627

The [documentation](http://msdn.microsoft.com/da-dk/library/system.runtime.compilerservices.compilationrelaxations.aspx) states that the attribute:

> Marks an assembly as not requiring string-literal interning.

In other words, it does not prevent the compiler from doing string interning, just providing a hint that it is not required. The documentation is a little bit sparse in this area, but this also seems to be the conclusion in [this MSDN forum post](http://social.msdn.microsoft.com/Forums/en-US/clr/thread/c1c1d969-8d6b-4aaf-b7f4-3febedf3cd18/).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-24T18:45:59.380

不是踢开的门，但显然该属性不会像您认为的那样起作用。在 MSDN 和 CLI 规范中，它的文档都很差。从它在 CLR 中的使用对我来说唯一明显的是，当它打开时，编译器只需要确保在模块级别内嵌相同的字符串。这有许多与内联、ngen-ed 和混合模式程序集相关的副作用。

接下来将迫使我解释模块和程序集之间的确切区别。我不能，模块是奇怪的野兽，在常见的 .NET 编程中没有实际用途。最好忘记这个属性是相关的。除非您有使用 /target:module 选项运行 C# 编译器的自定义构建系统，否则 C# 编译器始终在程序集级别实习，因此您的测试将始终产生“真”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T17:59:29.247

NoStringInterning 的 MSDN 描述说

“将程序集标记为不需要字符串文字实习。”

说程序集不需要实习与说应该关闭该功能是不同的。AFAIK 没有办法做到这一点（NGEN 除外）。

# java - 需要一个循环重复用户输入的次数

> ID：15601917
> 
> 赞同：4
> 
> 时间：2013-03-24T17:50:07.057
> 
> 标签：java, for-loop

我需要这个任务的帮助。**这是我需要程序执行的操作：

> *   编写一个程序，提示用户进行多次迭代。
> *   然后程序应该循环多次。
> *   程序的每个循环都应提示用户输入一个数字并将其添加到运行总数中。
> *   完成后打印运行总计。

我无法让程序在用户输入时循环多次。我知道这是一个简单的修复，但我似乎无法弄清楚。我是否对循环使用了错误的语句？

```
Scanner guess = new Scanner(System.in);

int count =0;
int sum=0;
int num;

System.out.println("Enter a number");
num = guess.nextInt();

for(count =0; count <= num; count++)
{
    sum +=num;
    System.out.println("Your results are:"+sum);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T17:55:35.927

如果你从 0 开始，那么你会想要改变

```
for(count =0; count <= num; count++) 
```

至

```
for(count =0; count < num; count++) 
```

因为它从 0 开始，所以这是第一次迭代，而 1 是第二次，依此类推。

此外，您需要每次都不断询问用户。所以你会想在循环中做这样的事情：

```
sum += guess.nextInt(); 
```

最后，您不想每次都打印总和，只是在 END 处。所以在循环之后，打印总和。

您可能认为 have`sum += num`会要求用户输入另一个数字，但 num 只是用户输入的第一个数字（它不会改变）。每次迭代都需要获取用户的输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T17:53:05.210

您正在使用`<=`您应该`<`在您的`for`语句中使用的地方，否则您将绕过循环一到多次；并且您应该提示将数字添加到循环中，并包含适当的代码以跟踪那里的运行总和。

像这样的东西：

```
Scanner guess = new Scanner(System.in);

int count =0;
int sum=0;
int num, N;

System.out.println("How many numbers will you enter?");
N = guess.nextInt();

for(count =0; count < N; count++)
{
    System.out.println("Enter a number");
    num = guess.nextInt();
    sum +=num;
}

    System.out.println("The sum of the numbers entered is:"+sum); 
```

# php - 将文件从小程序发布到 PHP

> ID：15601921
> 
> 赞同：1
> 
> 时间：2013-03-24T17:50:15.593
> 
> 标签：php, file-upload, applet

关于将文件上传到 HTTp 请求（来自小程序），我有几个问题。这就是我所关注的：我正在使用 Applet 的机器人截取屏幕截图并将其存储在本地文件系统中。我在本地文件系统上保存的文件需要上传到 Apache，最终被 PHP 访问。

```
public void sendBufferedImage(File file, BufferedImage screenImage, String urlPath) throws Exception
        {
             ImageIO.write(screenImage, "GIF", file); // This is to store the file in  
                                   a temp location on the local file system.
                 url = new URL(urlPath);
                 urlcon = (HttpURLConnection) url.openConnection();
                 urlcon.setRequestMethod("POST");
                 urlcon.setDoOutput(true);
                 urlcon.connect();
                 out = new DataOutputStream(urlcon.getOutputStream());
                 out.write(file.getPath().getBytes());
         } 
```

这是否完成了将文件写入 HTTP 请求？

1.  如果是这样，读取 HTTP 请求应该如何从写入 HTTP 请求的字节数组中获取文件句柄？
2.  只能通过字节数组将文件写入 HTTP 请求吗？
3.  从 HTTP 请求中获取文件句柄时 php 代码的外观示例将有很大帮助。

谢谢，

# java - 如何使用 AspectJ 在 Eclipse 中启用调试符号？

> ID：15601922
> 
> 赞同：0
> 
> 时间：2013-03-24T17:50:16.860
> 
> 标签：java, eclipse, aspectj

我正在尝试使用 aspectJ 访问参数的名称，但我总是得到**arg0**而不是*真实*名称。我发现我应该在[AspectJ JoinPoint 问题](https://stackoverflow.com/questions/5720494/aspectj-joinpoint-question)中使用 -g 参数激活 java 调试选项，但这对我不起作用......

**这是我的java代码：**

```
private Set<Collection<String>> s;
private Collection<String> c;

public HashCodeProperty() {
    s = new HashSet<Collection<String>>();
    c = new ArrayList<String>();
}

/**
 * method that satisfy property
 */
public void satisfy() {
    c.add("this is ok");
    s.add(c);
    System.out.println("Collection is in Set: " + s.contains(c));
}

/**
 * method that violate the property
 */
public void violate() {
    c.add("this is ok");
    s.add(c);
    c.add("don't do this");
    System.out.println("Collection is in Set: " +s.contains(c));
} 
```

**这是我的 AspectJ 代码：**

```
pointcut addElementsToHashCodeSet() : call (* Set.add(..));

declare warning: addElementsToHashCodeSet(): "pointcut: addElementsToHashCode()";

after(): addElementsToHashCodeSet() { 
    monitorHashCode.addElementsToHashCode((MethodSignature)thisJoinPoint.getSignature());

public void addElementsToHashCode(MethodSignature methodSignature) { 
    System.out.println("\naddElementsToHashCode.");

    // We need to access to real PARAMETER NAME
    // Then we will concatenate with method and full class name
    String firstParameterName = methodSignature.getParameterNames()[0];
    // Add firstParameterName to an array that will contain all 
    // the name of the collections inserted into the HasSet 
    System.out.println("\nfirstParameterName: "+firstParameterName);
} 
```

**电流输出：**

第一个参数名称：arg0

**我需要作为输出：**

第一个参数名称：c

**我有这两个选择：**

![Java 编译器选项](../Images/b3e5ea44866564df519c3e8c4971d3a4.png)

![AspectJ 编译器选项](../Images/163f25cc69e3cadee7644170f454a182.png)

我还需要激活什么？

非常感谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:28:17.660

我找到了一种更好的方法来了解变量的名称（标识符），方法如下：

```
before(Collection c): addElementsToHashCodeSet() && args(c) 
```

通过这种方式，我们可以获得对变量**c**的直接引用。

不需要在 Eclipse 中激活调试符号。

可以使用以下代码实现所需的解决方案：

仪表师：

```
package fr.imag.ufrima.tat.tp6.aspects;

import java.util.Collection;
import java.util.Set;

import fr.imag.ufrima.tat.tp6.aspects.monitor.MonitorHashCode;

/**
 * Techniques Avancées de Test
 * 
 * @author Rodmar CONDE
 *
 * Instrumentator for validation of HashSet classes.
 * 
 * Secures the usage of HashSet that include Collections in preventing 
 * more elements to be added to the collections once they are added. 
 * 
 * Monitor code is provided in a separate class: MonitorHashCode.
 */
public aspect InstrumentationHashCode {

    private MonitorHashCode monitorHashCode;

    public InstrumentationHashCode() {
        monitorHashCode = new MonitorHashCode();
    }

    pointcut addElementsToHashCodeSet() : call (* Set.add(..));

    declare warning: addElementsToHashCodeSet(): "pointcut: addElementsToHashCode()";

    before(Collection c): addElementsToHashCodeSet() && args(c) { 
        monitorHashCode.addElementsToHashCode(c);                   
    }

    pointcut addElementsToCollection() : call (* Collection.add(..));

    declare warning: addElementsToCollection(): "pointcut: addElementsToCollection()";

    after(String s): addElementsToCollection() && args(s) {
        monitorHashCode.addElementsToCollection(thisJoinPoint.getTarget());     
    }

} 
```

监视器：

```
package fr.imag.ufrima.tat.tp6.aspects.monitor;

import java.util.ArrayList;
import java.util.Collection;
import java.util.List;

/**
 * 
 * @author Rodmar CONDE
 * 
 * Monitor used to prevent adding elements to a collection that has already been added to a HashMap
 *
 */
public class MonitorHashCode {
    /**
     *  Stores the system identity hashcode of the collections that are added to the monitored HashCode 
     */
    private List<Integer> collectionsAddedToHashSet;

    public MonitorHashCode() {
        System.out.println("Monitor created.");
        collectionsAddedToHashSet = new ArrayList<Integer>();
    }

    /**
     * Adds the system identity hashcode of the passed collection to the list
     * 
     * @param c Collection to be added to the list
     */
    public void addElementsToHashCode(Collection c) { 
        System.out.println("\naddElementsToHashCode.");

        collectionsAddedToHashSet.add(System.identityHashCode(c));
        System.out.println("\nCollection has been added to HashMap.");
    }

    /**
     * 
     * Before adding the element, search if the collection exists already
     * in the list, if so print an error.
     *
     * @param pointCutTarget
     */
    public void addElementsToCollection(Object pointCutTarget) { 
        System.out.println("\naddElementsToCollection.");

        int systemIdentityHashCode = System.identityHashCode(pointCutTarget);
        boolean isContained = collectionsAddedToHashSet.contains(systemIdentityHashCode);
        System.out.println(String.format("currentCollection: %s systemIdentityHashCode: %d - isContained: %s", pointCutTarget, systemIdentityHashCode, isContained));
        if (isContained) {
            System.out.println("Error: you have already added this collection into a hashmap, you can not add more elements into it!");
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:52:43.470

我阅读它的方式是询问 Set.add(..) 方法的第一个参数的（内部）名称。这永远不会是您定义的名称，因为它是 Java-API 的一部分。您想要的是传递给该参数的**值的名称。**

这些值应该可以通过[JoinPoint.getArgs()-method](http://www.eclipse.org/aspectj/doc/next/runtime-api/org/aspectj/lang/JoinPoint.html#getArgs%28%29)作为 Object[] 使用，但我不确定如何获取它们的名称。不过应该可以通过反射来实现。

# java - 添加到哈希映射内部的哈希映射

> ID：15601924
> 
> 赞同：2
> 
> 时间：2013-03-24T17:50:18.960
> 
> 标签：java, hashmap

这是我所拥有的：

```
HashMap<String,HashMap<Integer,Integer>> data =
            new HashMap<String,HashMap<Integer,Integer>>(); 
```

但是我无法为此添加值，因为内部哈希图没有名称（注意：它不应该）。我实际上是在尝试将数组列表添加到 HashMap 中的第一个 Integer 所以我正在尝试类似：

```
data.put(var, data.get(array.get(x), y)); 
```

它非常不喜欢它，我完全不知道该怎么做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T17:56:14.350

注意

```
HashMap<String,HashMap<Integer,Integer>> data =
            new HashMap<String,HashMap<Integer,Integer>>(); 
```

仅创建“外部” HashMap 实例。在此语句之后，您有一个空的 HashMap，它将字符串作为键和`HashMap<Integer, Integer>`值。

`HashMap<Integer, Integer>`您可以使用以下方法添加to的实例`data`：

```
data.put("myKey", new HashMap<Integer, Integer>()); 
```

之后，您可以将整数值添加到第二个 HashMap：

```
data.get("myKey").put(123, 456); // use 123 as key and 456 as value 
```

取回值：

```
data.get("myKey").get(123); // returns 456 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T18:00:31.897

您必须首先获取内部哈希映射：

```
HashMap<Integer,Integer> innerData = data.get(var); 
```

然后你可以把你的价值放进去：

```
innerData.put(x, y); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T17:54:35.447

```
HashMap<String,HashMap<Integer,Integer>> data =
            new HashMap<String,HashMap<Integer,Integer>>();
((Map)data.get( "keyname" )).get(1); 
```

随后：

```
 ((Map)data.get( "keyname" )).get( 1 ).put(2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T17:56:10.943

这样做：

```
data.put( var, new HashMap(intKey, intVal)); 
```

其中 intKey 和 intVal 是 Integer 类型的 Key 和 Integer 类型的值。

# python - python，另一个文件中的对象实例

> ID：15601927
> 
> 赞同：0
> 
> 时间：2013-03-24T17:51:19.613
> 
> 标签：python, object, import

这可能是一个愚蠢的问题，但无论如何我都会问它。我有一个生物文件和一个模拟文件，每个文件都包含一个同名的类。在 Simulation 类的 init 中，我需要初始化两个 Creature 对象。我已经导入了生物文件，但是当我尝试 bio.Creature() 我得到

```
Traceback (most recent call last):
  File "/Users/lego90511/Documents/workspace/creatureSim/simulation.py", line 2, in <module>
    import creature
  File "/Users/lego90511/Documents/workspace/creatureSim/creature.py", line 3, in <module>
    import simulation
  File "/Users/lego90511/Documents/workspace/creatureSim/simulation.py", line 86, in <module>
    sim = Simulation(5)        
  File "/Users/lego90511/Documents/workspace/creatureSim/simulation.py", line 6, in __init__
    self.creatures = {creature.Creature(4, 4, 3, 4, 4, 3, 10):"", creature.Creature(4, 4, 3, 4, 4, 3, 10):"", }
AttributeError: 'module' object has no attribute 'Creature'" 
```

我究竟做错了什么？

以下是相关代码：

模拟：

```
import creature
from random import randint
class Simulation():
    def __init__(self, x):
        self.creatures = {creature.Creature():"", creature.Creature():"", }
        ... 
```

生物：

```
class Creature:
    def __init__(self, social, intelligence, sensory, speed, bravery, strength, size):
        self.traits = [social, intelligence, sensory, speed, bravery, strength]
        ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T18:43:07.890

你有一个循环依赖。`creature`正在 importing `simulation`，而后者又试图 import `creature`，所以它失败了。您需要以不同的方式构建文件以消除循环性 - 将两个类放在一个文件中，或者将一个导入移动到函数中。

# facebook - Facebook FB api - 关于访问令牌

> ID：15601928
> 
> 赞同：0
> 
> 时间：2013-03-24T17:51:24.893
> 
> 标签：facebook, facebook-graph-api

每个允许访问我的应用程序的用户都将拥有一个访问令牌

或者

一个访问令牌可以处理操作，例如，将照片上传到用户相册？

我知道访问令牌最多可以过期 60 天，所以我是否需要为我的数据库中的每个用户保存此访问令牌，并且当请求来自该用户时，为他加载访问令牌？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T18:07:59.530

[每个允许该应用程序的用户都将拥有一个访问令牌，其中将包括用户授予您的应用程序的所有权限。在此处](http://developers.facebook.com/docs/concepts/login/access-tokens-and-types/)阅读有关用户访问令牌的更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T18:07:33.217

每个允许访问 fb 应用程序的用户都将拥有不同的访问令牌，这将是唯一的。

Access Token 是根据来自客户端的浏览器会话、AppID 和 App Secret 生成的。在基于 Web 服务器的应用程序中，为用户保存应用程序令牌并不是绝对要求。但是像 HootSuite 这样的应用程序会保存用户凭据和访问令牌，以供以后用于获取 facebook 提要和其他服务。

所以这取决于应用程序的要求。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T18:12:08.683

当然，每个用户都会在上下文中向您发送另一个访问令牌以使用用户会话。

> 访问令牌是一个随机字符串，提供对 Facebook API 的临时安全访问。
> 
> 令牌标识用户、应用程序或页面会话，并提供有关授予权限的信息。

在用户访问上下文中：

> 您可以使用此令牌代表用户执行 API 调用，包括读取、发布和删除，具体取决于您的应用程序拥有的权限。例如，您可以使用用户访问令牌检索用户的朋友列表或将新照片发布到他们的时间轴。

[http://developers.facebook.com/docs/concepts/login/access-tokens-and-types/](http://developers.facebook.com/docs/concepts/login/access-tokens-and-types/)

是的，如果你不想重建它，你必须记住这个访问令牌。但在许多 API 中，这是“自动”完成的，例如在 PHP SDK 中，访问令牌存储在用户 cookie 中。如果您实现更复杂的用户流程，您必须记住访问令牌或每次重新生成它（[http://developers.facebook.com/docs/concepts/login/login-architecture/](http://developers.facebook.com/docs/concepts/login/login-architecture/)）。**请记住，该访问令牌将过期，您将不得不重新生成它**（相信已经授予的权限）。

仅供参考：如果您想保留离线访问（在没有用户会话的情况下执行应用程序活动），您将考虑离线访问，但已弃用：http: [//developers.facebook.com/roadmap/offline-access-removal/](http://developers.facebook.com/roadmap/offline-access-removal/)

希望它揭示了问题。

# mongodb - 不同字段范围查询的mongodb索引策略

> ID：15601933
> 
> 赞同：16
> 
> 时间：2013-03-24T17:51:53.437
> 
> 标签：mongodb, indexing, nosql

我几乎所有的文档都包含 2 个字段，开始时间戳和结束时间戳。在我的每个查询中，我都需要获取选定时间段内的元素。所以开始应该在选定的值之后，最终应该在选定的时间戳之前。

查询看起来像

```
db.collection.find({start:{$gt:DateTime(...)}, final:{$lt:DateTime(...)}}) 
```

那么对于这种情况最好的索引策略是什么？

* * *

顺便说一句，这对性能更好 - 将日期存储为日期时间或 unix 时间戳，这本身就是长值

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-24T19:37:00.883

*也为baloo*的答案添加了更多内容。

关于时间戳与长问题。通常 MongoDB 服务器不会看到差异。BSON 编码长度相同（64 位）。根据驱动程序的编码，您可能会在客户端看到不同的性能。例如，在 Java 端 a 使用 10gen 驱动程序渲染时间戳，因为`Date`它比`Long`. 有些[驱动程序](http://www.allanbank.com/mongodb-async-driver/)试图避免这种开销。

另一个问题是，如果您关闭索引第一个字段的范围，您将看到性能改进。因此，如果您使用*baloo*建议的索引：

```
db.collection.ensureIndex({start: 1, final: 1}) 
```

如果您查询的是：

```
db.collection.find({start:{$gt:DateTime(...),$lt:DateTime(...)}, 
                    final:{$lt:DateTime(...)}}) 
```

从概念上讲，如果您将索引视为一棵树，则封闭范围会限制树的两侧，而不仅仅是一侧。如果没有封闭范围，服务器必须“检查”所有`start`大于提供的时间戳的条目，因为它不知道 和 之间的`start`关系`final`。

您甚至可能会发现使用单个字段索引的查询性能并没有更好，例如：

```
db.collection.ensureIndex({start: 1}) 
```

大部分节省来自第一个字段的修剪。不会出现这种情况的情况是查询被索引覆盖，或者结果的排序/排序可以从索引中得出。

HTH - 抢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T17:56:20.767

您可以使用[复合索引](http://docs.mongodb.org/manual/core/indexes/#index-type-compound)来为多个字段创建索引。

```
db.collection.ensureIndex({start: 1, final: 1}) 
```

使用[explain()](http://docs.mongodb.org/manual/reference/explain/)比较不同的查询和索引，以充分利用数据库

# jsf - 将无状态 bean 注入托管 bean 会产生空指针

> ID：15601934
> 
> 赞同：1
> 
> 时间：2013-03-24T17:52:05.890
> 
> 标签：jsf, jakarta-ee, managed-bean, stateless

我有一个 ManagedBean，它注入了一个无状态 bean，但它总是给我一个用于注入的空指针。我在这里做错了什么？（我正在学习 JSF，它只是一个例子，所以请忽略类的命名等）

有两个不同的罐子（web.jar 和 services.jar）

托管豆

```
@ManagedBean
@RequestScoped
public class HelloPB
{
    @Inject
    private ExamServiceBase examService;

    private String name = "";

    public String getName()
    {
        Exam exam = examService.getSingleExam();
        return exam.getName();
    }

    public void setName(final String name)
    {
        //this.name = name;
    }

    public String getHello()
    {
        if ( name == null || name.length() < 1 )
        {
            return null;
        }
        return "Hello " + name;
    }
} 
```

无状态bean

```
@Stateless
public class ExamServiceBase implements ExamService{

    @PersistenceContext(name="QuestifyPersistUnit")
    private EntityManager em;

    public Exam getExam(String id){
        return em.find(Exam.class, id);
    }

    public Exam getSingleExam(){
        return em.find(Exam.class, "9E69F3EE-AE9E-4D53-B531-35504EDA450F");
    }   
} 
```

索引.xhtml

```
<h:body>
    <h:outputScript name="jsf.js" library="javax.faces" target="body">
    </h:outputScript>
    <h1>JSF 2 Demo</h1>
    <h:form>

        <h:inputText id="name" value="#{helloPB.name}">
            <f:ajax render="helloTextOutput" />
        </h:inputText>

        <h:commandButton value="Say Hi via Ajax">
            <f:ajax execute="name" render="helloTextOutput" />
        </h:commandButton>
        <h:outputText id="helloTextOutput" value="#{helloPB.hello}" />
    </h:form>

</h:body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T21:05:41.277

我有一个类似的问题。确保最初在您的应用程序中有一个文件 WEB-INF/beans.xml。它也可以是一个空文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org /2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/beans_1_0.xsd"> 
```

然后尝试使用从 postcostruct 方法注入的 Bean。就我而言，它以这种方式工作。

```
@PostConstruct
void init() {
Exam exam = examService.getSingleExam();
} 
```

# php - 如何制作类似于 CodeIgniter 用户指南中的弹出式目录？

> ID：15601935
> 
> 赞同：0
> 
> 时间：2013-03-24T17:52:19.787
> 
> 标签：php, jquery, html, css, codeigniter

[https://www.codeigniter.com/user_guide/tutorial/index.html](https://www.codeigniter.com/user_guide/tutorial/index.html)

访问该链接并查找页面右上角的目录按钮。我想把它应用到我正在制作的网页上。

你把这种设计技术叫做什么？有关如何操作的教程的任何链接？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T19:17:56.800

要创建该菜单，您可以使用 css 和 jquery。创建一个div

`position:absolute;top:-400px;width:auto;height:430px;`

然后你用 jquery 为它制作动画。点击时，设置 top:0px。您还可以使用动画 jquery 函数。乐：

`$(document).ready(function(){ $('div a').click(function(){ $(this).parent().css('top','0px'); $(this).addClass('opened');
$(this).click(function() { if($(this).hasClass('opened')){ $(this).parent().css('top','-280px'); } }) }); });`

`<div style="width:100%;background-color:red;position:absolute;height:300px;top:-280px;"><a href="javascript:void(0)" style="width:80px;height:20px;background-color:black;bottom:0;position:absolute;"></a></div>`

这是一个示例代码。从这里你可以编辑它，你可以动画它。祝你好运！

# java - 斑马打印机塞尔维亚拉丁字符

> ID：15601937
> 
> 赞同：3
> 
> 时间：2013-03-24T17:52:24.767
> 
> 标签：java, android, zebra-printers

我遇到了 Zebra 打印机 RW220 无法打印塞尔维亚拉丁字符（如 čćžšđ）的问题。我开发了一个使用打印机的安卓应用程序。打印部分基于 Zebra SDK。这是代码的一部分：

```
private byte[] getConfigLabel() {
    PrinterLanguage printerLanguage = printer.getPrinterControlLanguage();
    byte[] configLabel = null;
    if (printerLanguage == PrinterLanguage.ZPL) {
        try {
            configLabel = "^XA^FO17,16^GB379,371,8^FS^FT65,255^A0N,135,134^FDTEST^FS^XZ".getBytes("UTF-8");
        } catch (UnsupportedEncodingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } else if (printerLanguage == PrinterLanguage.CPCL) {
        String cpclConfigLabel = "! 0 200 200 780 1\r\n" + "T ARIAL9PT.CPF 0 60 10 ABCČĆŽŠĐ\r\n"
        + "PRINT\r\n";
        configLabel = cpclConfigLabel.getBytes();
    }
    return configLabel;
} 
```

使用的字体是 Arial，我使用 Zebra Utilities 将其转换为 CPF，用于打印机。我还将字符添加到字体中，但它不会打印它们。在本例中，它只打印 ABC。并且使用系统字体，它会打印一些奇怪的字符。我还尝试在“T ARIAL9PT.CPF 0 60 10 ABCČĆŽŠĐ\r\n”之前添加“ENCODING UTF-8”行，但它没有做任何事情，与系统字体相同。我怎样才能让它打印塞尔维亚拉丁字符？谢谢。

编辑：ISO-8859-2 打印 Č 和 Ć，但不打印 Ž。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:46:47.913

终于解决了，解决方法是使用“CP1250”编码，也就是Windows-1250。

# jquery - 使用jsPlumbs，在调整窗口大小时重绘线条？

> ID：15601939
> 
> 赞同：5
> 
> 时间：2013-03-24T17:52:45.603
> 
> 标签：jquery, jsplumb

我正在与 jsplumbs 做一件简单的事情。我只是用一条直线连接 div，那么在调整窗口大小时如何重绘线条？所以它总是跟随 div 的中心。我可以使用 z-index 将行放在 div 下方吗？如果我必须将一个 div 与其他几个 div 连接，那么从一个 div 中绘制多条线的最佳方法是什么？

到目前为止，这是我的代码：

[http://jsbin.com/esuvuw/1/edit](http://jsbin.com/esuvuw/1/edit)

谢谢你的帮助

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-09T12:03:56.197

给你：

```
 $(window).resize(function(){
      jsPlumb.repaintEverything();
  }); 
```

将此添加到您的代码中。我刚刚遇到了这个 repaintEverything() 函数并提醒了你的帖子。

[http://jsbin.com/esuvuw/9/edit](http://jsbin.com/esuvuw/9/edit)表明这是有效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:39:46.770

我也以这种方式更改了您的代码：

```
jsPlumb.bind("ready", function(connection, e) {

jsPlumb.addEndpoint('block-1', ['BottomCenter'], []);
jsPlumb.addEndpoint('block-2', [], ['BottomCenter']);
jsPlumb.draggable('block-1');
jsPlumb.draggable('block-2');
jsPlumb.connect({

   source: "block-1", 
   target: "block-2",
   connector: 'Straight'

});
}); 
```

代码并不完美。我现在没有时间 - 抱歉。但是现在，当您拖动 div，然后更改窗口大小时，一切正常。

# html - 用图像替换html表单按钮

> ID：15601943
> 
> 赞同：0
> 
> 时间：2013-03-24T17:52:56.230
> 
> 标签：html, forms

我有以下表格。我用图像“login_button_1.jpg”替换按钮。它工作正常，唯一的问题是当我将鼠标箭头放在图像上时，它仍然是一个箭头，它不是向用户显示这是一个可以单击的按钮的手。如何改变这一点并使鼠标指针成为手而不是箭头？

```
<div class="homepageTable" width:40px; margin-right:auto; margin-left:auto; style="text-align:right" >                      
 <form action="register_form.php" method="POST" id="register_form">                     

    Name <input type="text" size="25" name="name" placeholder="first name"><br/>
    Surname <input type="text" size="25" name="surname" placeholder="last name"><br/>

    <input type="submit" value="" name="submit" style="background:url('img/login_button_1.jpg') no-repeat; width:300px; height:80px; border:none;"/>                                     
  </form>                      
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:54:42.213

尝试添加`cursor: pointer`内部输入样式，如下所示：

```
<input type="submit" value="" name="submit" style="background:url('img/login_button_1.jpg') no-repeat; width:300px; height:80px; border:none; cursor: pointer"/> 
```

# mysql - 解释计划需要很长时间

> ID：15601946
> 
> 赞同：0
> 
> 时间：2013-03-24T17:53:05.127
> 
> 标签：mysql, sql, query-optimization, sql-execution-plan, full-table-scan

我试图弄清楚为什么查询需要这么长时间，所以我可以优化它。

我用 EXPLAIN 试过了：

```
EXPLAIN SELECT * FROM (
SELECT p.*, ol. prod_id olpid
FROM products p LEFT JOIN orderlines ol
ON p. prod_id = ol. prod_id ) pol
WHERE pol. olpid IS NULL
ORDER BY category , prod_id; 
```

当我在我的工作台上运行它时，我在 10 分钟（600 秒）后得到连接丢失的错误代码。在我设置了`Index`in之后`Prod_ID`，查询会在大约一秒（完美）内回答，在此之前，几乎不可能得到答案。也`EXPLAIN PLAN`可以在几秒钟内执行它。在使用索引**之前**，我仍然想在查询上使用 EXPLAIN 。

这里有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:56:58.203

您在这里不需要子查询。请改用此查询：

```
SELECT p.*, ol.prod_id olpid
FROM products p LEFT JOIN orderlines ol
ON p.prod_id = ol.prod_id
WHERE ol.prod_id IS NULL
ORDER BY category, prod_id; 
```

您的初始查询需要更长的时间来执行，因为您使用的是子查询。子查询需要完全执行，然后可以应用 WHERE 条件，最后对记录进行排序。这也是您使用 EXPLAIN 查询速度慢的原因。

# ssl - 如何在自定义域 Meteor 应用上添加 SSL？

> ID：15601950
> 
> 赞同：3
> 
> 时间：2013-03-24T17:53:12.970
> 
> 标签：ssl, meteor

meteor.com 默认通过添加 https:// 来处理 ssl

但是当使用origin.meteor.com CNAME的自定义域使用meteor.com时，https：//然后给我这个chrome警告：

[http://clip2net.com/s/4NDmdR](http://clip2net.com/s/4NDmdR)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T05:41:01.660

如果您想在您的域中获得经过认证的 ssl 证书，则必须自己托管。每个域都必须有自己的证书。他们很难解决这个问题。这不是流星独有的，而是任何共享主机。

# php - 使用 Doctrine 2 在实体更新时创建相关实体

> ID：15601956
> 
> 赞同：1
> 
> 时间：2013-03-24T17:54:02.210
> 
> 标签：php, events, doctrine-orm, doctrine

我正在尝试使用 Doctrine 2 事件回调来创建新的相关实体，但遇到了一些问题。我确信这种方法是非常错误的，但这里是背景：

我基本上有一个 Document 实体和一个 Log 实体，当创建一个新 Document 时，我使用 prePersist 回调来创建一个具有“已创建”状态的相关 Log 实体。这行得通。

我还想在进行更改时创建一个具有“已更新”状态的相关日志实体，我尝试使用 preUpdate 添加这些相关实体，但正如阅读文档所预期的那样，它不起作用：

> 在这种情况下，永远不允许对更新实体的关联进行更改，因为 Doctrine 不能保证在刷新操作的此时正确处理引用完整性。

[http://docs.doctrine-project.org/en/2.0.x/reference/events.html](http://docs.doctrine-project.org/en/2.0.x/reference/events.html)

所以我的问题是，这样做的正确方法是什么？

# matlab - Matlab中的无限电影动画

> ID：15601964
> 
> 赞同：1
> 
> 时间：2013-03-24T17:55:18.723
> 
> 标签：matlab, infinite-loop

从我之前的问题中，我试图了解如何在 Matlab 中创建帧或播放动画。我已经澄清了一切，但现在我正试图弄清楚如何无限播放它。例如，让我们考虑两个代码片段。我上一个问题的第一个

```
x = 0:0.1:10;
FRAMES = 32;                  %// Total number of frames
for k = 1:FRAMES
    ph = k * 2 * pi / FRAMES; %// Accumulate phase
    plot(x, sin(x + ph))      %// Generate plot
    grid, axis equal
    M(k) = getframe;          %// Capture frame
end

%// Play movie 10 times
movie(M, 10) 
```

这将播放电影 10 次。但是让我们考虑一下我正在尝试做的第二种情况

```
for k = 1:16
    plot(fft(eye(k+16)))
    axis equal
    M(k) = getframe;
end
while 1
movie(M,10)
end 
```

它开始一个动画，几秒钟后它停止。我已经`movei(M,10)`投入

```
while 1

end 
```

因为我想无限地播放它或创建一个无限循环。但它没有正确地完成它的工作。所以请给我建议。Matlab 是否可以创建无限电影？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T18:30:40.513

你可以拍电影(M,inf)

# java - 摆动输入元件的错误状态

> ID：15601965
> 
> 赞同：-5
> 
> 时间：2013-03-24T17:55:20.020
> 
> 标签：java, swing, highlight

我正在创建输入验证以检查不同字段之间的有效关系。所以如果输入的数据是错误的，我想标记错误的组件。

例如，如果一个字段未填充，则必须突出显示

可以将组件转换为任何错误状态吗？例如 jtextfield、jcombobox...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T18:03:28.590

使用[`JComponent#setBackground()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#setBackground(java.awt.Color))，例如：

```
txt.setBackground(new Color(255, 186, 186)); 
```

![在此处输入图像描述](../Images/f0a99734ac6e4f4647bf3b1d9efc768d.png)

或者也许为文本设置红色？[`JComponent#setForeground()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#setForeground(java.awt.Color))

```
txt.setForeground(Color.RED); 
```

![在此处输入图像描述](../Images/31e72778f3035790c12267d08ab103ab.png)

# c - C - 内存分配问题 - 需要解释

> ID：15601966
> 
> 赞同：0
> 
> 时间：2013-03-24T17:55:21.433
> 
> 标签：c, pointers, structure, c-strings

最近，我遇到了一个 C 指针的问题。如您所见，我有一个从 STDIN 读取数据的循环。问题是我不太明白我做了什么。

我为这个 struct_CONTAINER 结构分配了内存。我希望里面有一个长度为 BUFFER_SIZE 的 c 字符串数组。如果我理解正确，这个数组包含 BUFFER_SIZE (char *) 对象 - 这意味着这个数组的权重将是 8 * BUFFER_SIZE 字节（每个 char 指针最多 8 个字节）。因此，例如，如果 BUFFER_SIZE 的值定义为 10，那么这为我们提供了该数组的 80 个字节，并且可能整个结构将具有相似的大小。

问题是我能够使用大于 BUFFER_SIZE 的值迭代该指针，这对我来说很奇怪 - 内存不是 NULL。我知道在那个循环中我可能试图访问其他一些已经分配的内存。但我不确定。如果有人会很好，并告诉我我在做什么是对和错的。内存分配可能太大。提前致谢！

```
char *item = NULL;

if( dup2( STDIN_FILENO, fdin ) < 0 ){
    perror( "dup2(  )" );
    exit( errno );
}

memset( reading, '\0', BUFFER_SIZE );

struct struct_CONTAINER{
    char *container[BUFFER_SIZE];
};

while( ( r_control = read( fdin, reading, BUFFER_SIZE-1 ) ) > 0 ){
    item = &shmemContainer->container[i++];
    strcpy(item, reading);
    memset( reading, '\0', BUFFER_SIZE );
} 
```

编辑：我忘了告诉你什么是“项目”变量的类型

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:00:10.790

您的 struct 成员`container`的`char*`类型意味着它的字符串数组。您正在分配 `item`字符串的地址`char**`并尝试调用`strcpy(item, reading);`

您至少在以下陈述之一中做错了。

```
 item = &shmemContainer->container[i++];
        ^   is wrong 
 strcpy(item, reading);
         ^ or this is wrong 
```

**[ANSWER]** （*正如您评论的第一点是您的代码中的错误*）
因为运算符的[优先级`->`更高`&`](http://www.swansontec.com/sopc.html)。编译代码时应该会收到警告。

*   如果第一个表达式`item = &shmemContainer->container[i++];` 是错误的，可以这样写：

    `item = (&shmemContainer)->container[i++];`

*   如果`strcpy(item, reading);` 是错误的，请纠正它：

    `strcpy(*item, reading);`

正如我从您的 while 循环中了解到的那样，您想从`fdin`字符串数组中读取字符串，您可以这样做：

```
while( ( r_control = read( fdin, reading, BUFFER_SIZE-1 ) ) > 0 ){
    reading[r_control] = '\0'; // null ternimate
    strcpy(shmemContainer->container[i++],reading) ;
    memset( reading, '\0', BUFFER_SIZE );
} 
```

代码`reading[r_control] = '\0';` 添加了这个，因为你第一次失踪`memset()`时，记住`read()`它不会`\0`自行终止字符串。

**编辑**：
考虑@Digikata 的评论，因为您正在`strcpy()`确保`container[]`为每个字符串分配内存。

我的建议：

`container[]`是字符串数组，因此您可以在 while 循环中分配内存，例如：

```
i = 0;
while( ( r_control = read( fdin, reading, BUFFER_SIZE-1 ) ) > 0 ){
    reading[r_control] = '\0'; // null ternimate
    shmemContainer->container[i] = malloc(strlen(reading) + 1);
    strcpy(shmemContainer->container[i++],reading) ;
    memset( reading, '\0', BUFFER_SIZE );
} 
```

如果您丢失，则添加内存分配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T18:39:37.333

C 不会阻止您索引超出预期的内存位置。例如：

```
char astring[5] = "0123";  // there is a zero at index 4 
char* ptr = astring;       // ptr[4] == 0

printf("%c", ptr[5]);  // reads a byte beyond the end of the string array 
```

您的代码需要在逻辑上防止这种情况发生，因为那里经常有数据，但是编写它（有时甚至读取它）会导致未定义的行为。因此，在您的代码中，容器以外的区域读取为非 NULL 是正常的。

顺便说一句，如果您了解指向 c 字符串的 char* 类型与分配的内存区域之间的区别，例如上面代码中的“ptr”和“astring”变量，您的问题并不清楚。您的示例代码没有为字符串分配任何内存。

# c++ - 带有结构的 C++ 的 stl priority_queue

> ID：15601973
> 
> 赞同：12
> 
> 时间：2013-03-24T17:56:07.150
> 
> 标签：c++, struct, priority-queue

我们如何将 STL`priority_queue`用于 struct ？任何关于 push & popping 的**说明，其中 struct 有多种数据类型？**
说：`struct thing { int a; char b;} glass[10];`。
现在我如何使用'int a'将这个结构放在priority_queue上进行排序？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-24T18:02:08.267

这是对您原始问题的略微修改的答案，您无缘无故地[删除了该答案。](https://stackoverflow.com/questions/15601827/using-stl-priority-queue-with-struct-in-c/)`int`原件包含足够的信息让您弄清楚这一点，但在这里：提供一个使用for 比较的小于比较。

您需要做的就是提供一个函子，该函子通过严格的弱排序实现小于比较，或者为您的类实现相同的小于运算符。该结构满足要求：

```
struct thing
{
    int a;
    char b;
    bool operator<(const thing& rhs) const
    {
        return a < rhs.a;
    }
}; 
```

然后

```
std::priority_queue<thing> q;
thing stuff = {42, 'x'};
q.push(stuff);
q.push(thing{4242, 'y'}); // C++11 only
q.emplace(424242, 'z'); // C++11 only    
thing otherStuff = q.top();
q.pop(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-24T18:02:18.320

重载`<`运算符`thing`：

```
struct thing
{
    int a;
    char b;

    bool operator<(const thing &o) const
    {
        return a < o.a;
    }
};

priority_queue<thing> pq;

thing t1, t2, t3;

// ...

pq.push(t1);
pq.push(t2);

// ...

t3 = pq.top();
pq.pop(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-07-10T16:53:32.337

您需要实现一个比较函数或重载运算符来告诉优先级队列您想要对自定义数据进行排序的顺序。当优先级队列对您的数据进行排序时，它将需要一种方法来知道如何在它们之间进行比较。您必须通过将函数传递给自定义数据类或结构中的优先级队列或重载运算符来指定这一点。

你可以检查[这个](https://stackoverflow.com/a/43183813/7277505)答案。[这](https://stackoverflow.com/a/43183813/7277505)可能会帮助你。我试图解释将优先级队列用于自定义数据类型的多种方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-05T18:00:05.013

你可以这样做！

```
struct example{
   int height;
   int weight;
};

struct comp{
        bool operator()(struct example a, struct example b){
         //Sorting on the basis of height(Just for example)
            return (a.height > b.height);
        }
    };

// And here comes your priority queue
 priority_queue<struct example, vector<struct example>, comp> pq;
struct example your_obj;
pq.push(your_obj); 
```

# javascript - jQuery 内的 html 正文

> ID：15601979
> 
> 赞同：0
> 
> 时间：2013-03-24T17:56:32.653
> 
> 标签：javascript, jquery

我正在做一个小项目，它涉及显示新闻提要。该新闻提要通过 PHP 循环循环，但这并不重要。我遇到问题的领域是 html 和 jquery 把它搞砸了。html是这样设置的。它本身就完美无缺：

```
<div class="popup">
<div class="title">
    <a href="#" style="margin:0"><img src="" /></a>
    <a href="#"><?php echo $name; ?> &middot;</a>
    <div id="form">
        <form>
            <input type="hidden" name="event" value="123" />
            <input type="submit" name="reply" class="button" value="Respond" />
        </form>
    </div>
    <div class="clear"></div>
</div>
</div> 
```

CSS也没有什么花哨的。标题类只是有一些填充，链接浮动到左边。这就是为什么最后有一门课程可以清除它们的原因。

但是有一个技术性。div 标题在 jquery 弹出框中。因此，当用户单击另一个链接时，会显示弹出 div。通常这个弹出窗口是隐藏的。

我想在我的 html 中使用带有该表单的 ajax。所以我开始构建表单，并在 div id 'form' 的结束 div 标记之后添加了这段代码。

```
<script type="text/javascript">
    $(function() {  
      $(".button").click(function() {  
            //More  
      });  
    });  
</script> 
```

一旦我把代码放在那里，一切都搞砸了。弹出 div 不应该显示。我无法弄清楚发生这种情况的原因。jQuery正常吗？有没有人遇到过这个问题？有什么建议么？

谢谢

**编辑**

完整的 html 不起作用

```
<div id="popup" class="popup">  
<div class="popup-feed">
    <div class="feed-box">
        <div class="feed-box-title">
            <a href="#" style="margin:0"><img src="#" /></a>
            <a href="#">Alex &middot;</a>

            <div id="contact_form">
                <form>
                    <input type="hidden" name="event" value="<?php echo $status["id"]; ?>" />
                    <input type="submit" name="rsvp<?php echo $staus["id"]; ?>" value="<?php echo $rsvpStatus; ?>" />
                </form>
            </div>
<script type="text/javascript">
    $(function() {  
      $(".button").click(function() {  
            //More  
      });  
    });  
</script>
            <div class="clear"></div>
        </div>

        <div class="feed-content">
            <?php /*Content*/ ?>
        </div>
    </div>
</div>
</div><script type="text/javascript">$(function () { $('#popup').modalPopLite({ openButton: '#1', closeButton: '#close', isModal: false }); }); </script> 
```

它的 javascript [http://alexkonetchy.com/example/modalPopLite.php](http://alexkonetchy.com/example/modalPopLite.php)和[http://alexkonetchy.com/example/popup.php](http://alexkonetchy.com/example/popup.php)

CSS [http://alexkonetchy.com/example/popup.css](http://alexkonetchy.com/example/popup.css)

请注意，这些 javascript 或 css 代码都不是我的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:02:41.253

我为你创建了一个小小提琴演示。您必须阻止默认的按钮单击事件。

```
$(function() {  
      $(".button").on('click', function(event) {  
            //More  
          alert('Your Ajax goes here');
          event.preventDefault();
      });  
    }); 
```

[http://jsfiddle.net/K3fxq/](http://jsfiddle.net/K3fxq/)

# r - Rpart - NA 处理

> ID：15601982
> 
> 赞同：3
> 
> 时间：2013-03-24T17:56:41.060
> 
> 标签：r, na, rpart

我正在为 Rpart 包中的 NA 功能而苦苦挣扎。我得到了以下数据框（代码如下）

```
 Outcome VarA VarB
1       1    1    0
2       1    1    1
3       1   NA    1
4       0    0    1
5       0    0    0
6       0   NA    0 
```

我正在尝试拟合做出完美预测的 Rpart 对象。逻辑规则应该是它预测：

*   如果 VarA=1，预测=1
*   如果 VarA=0，预测=0
*   如果 VarA=NA，则使用 VarB（如果 VarB=0，预测=0）

但是，我正在努力寻找正确的代码，以正确的方式将 VarA 的 NA 值“传递给树”。我曾尝试使用`usesurrogates`and `na.control`，但无济于事......请在下面找到我的代码。

PS。如果 VarA 可以读取，rpart 就可以工作，`VarA=c(1,1,2,0,0,2)`但不幸的是，对于我正在处理的更大数据框来说，这不是一个很好的解决方案......

```
library(rpart)
Outcome=c(1,1,1,0,0,0)
VarA=c(1,1,NA,0,0,NA)
VarB=c(0,1,1,1,0,0)
dg=as.data.frame(cbind(Outcome, VarA, VarB))        
dg
fit=rpart(Outcome ~ VarA + VarB, data=dg, method="class",na.action = na.pass,control=rpart.control(usesurrogate=1, minsplit=1, cp=0.001))
fit

newdata=dg
newpred=predict(fit,newdata=newdata,type = "class")
dh=cbind(dg,newpred)
dh 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-22T20:18:50.253

我拿走了您的代码并对其进行了修改以使用`NA`您想要的处理逻辑。

```
library(rpart)
Outcome=c(1,1,1,0,0,0)
VarA=c(1,1,NA,0,0,NA)
VarB=c(0,1,1,1,0,0)
dg=as.data.frame(cbind(Outcome, VarA, VarB))        
dg 
```

我改变了这些行：

```
dg$VarC <- ifelse(is.na(dg$VarA), ifelse(df$VarB == 1, 1, 0), dg$VarA)
fit=rpart(Outcome ~ VarC, data=dg, method="class", na.action = na.pass, control=rpart.control(usesurrogate=1, minsplit=1, cp=0.001)) 
```

其余的都是一样的：

```
fit

newdata=dg
newpred=predict(fit,newdata=newdata,type = "class")
dh=cbind(dg,newpred)
dh 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T07:25:52.010

这是我从您的上述问题中了解到的，您想在 varA 失败时使用 VarB：-

```
VarA [is.na(VarA )] <-VarB[is.na(VarA )] 
```

但是您的预测完全取决于 VarA(fit)，因此在将 VarA 传递给 rpart 之前对其进行更改。您将获得预测的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-15T21:00:46.413

尝试使用以下内容自动替换 VarA：

```
VarA [is.na(VarA )] <- 2 
```

这应该用 2 替换所有 NA。

# iphone - 如何在 cocos2d iphone 动画期间更改精灵的不透明度？COCOS2D

> ID：15601987
> 
> 赞同：0
> 
> 时间：2013-03-24T17:56:59.397
> 
> 标签：iphone, cocos2d-iphone, ccsprite

我想在重复永远移动动画期间改变精灵的不透明度。

```
How can I solve this? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:00:03.803

由于您想与另一个动作（您的`CCRepeatForever`）一起执行此操作，因此您应该使用`CCSpawn`能够在同一时刻执行多个动作的动作，例如：

```
id action1 = [CCEaseOut actionWithAction:[CCActionTween actionWithDuration:0.1 key:@"opacity" from:0 to:255]
id action2 = your movement action
id action3 = [CCSpawn actionOne:action1 two:action2];
id action4 = [CCRepeatForever actionWithAction:action3]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-23T09:56:03.117

我通过更新 CCSprite.cpp 文件（在文件夹 2d>sprite-nodes 内）解决了这个问题。搜索此行：

> 无效 Sprite::setSpriteFrame(SpriteFrame *spriteFrame)

在这种方法中，您应该添加：

```
if (_opacityModifyRGB) {
  updateColor();
} 
```

并解决了！现在您可以为图层设置不透明度，并且在其中添加的所有动画都会保留其不透明度。记得添加**`setCascadeOpacityEnabled(true);`**到图层。

您可以查看此链接以获取更多信息：[https ://github.com/cocos2d/cocos2d-x/issues/15696](https://github.com/cocos2d/cocos2d-x/issues/15696)

# xcode - 访问嵌套字典

> ID：15601989
> 
> 赞同：0
> 
> 时间：2013-03-24T17:57:07.080
> 
> 标签：xcode, plist, nsdictionary

我在这里过得很糟糕！我有一个 plist 文件，如以下链接所示：

[http://postimg.org/image/63rhs59qf/](http://postimg.org/image/63rhs59qf/)

我需要的是在表格视图中包含药物名称（Drug1、Drug2 等），当单击相应的 url 时，它们来自的部分将传递给另一个视图控制器。

我不需要知道用于传递数据等的所有代码，我只需要知道如何访问数据并将其从 plist 中获取到本地数组/字典中！

我无法理解它，我很确定我真的不懂 plists，任何帮助都会非常感激！

皮特

ps 如果有帮助，我准备重新设计 plist 文件 - 下面的照片可能是更好的选择？上帝我不知道！

[http://postimg.org/image/wzapyj5ht/](http://postimg.org/image/wzapyj5ht/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:28:52.320

要从 Root 获取所有字典，请使用以下
获取存储在应用程序包中的 Plist 路径

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"myDrugList" ofType:@"plist"]; 
```

从 plist 中读取 ROOT，它将返回包含所有部分的根字典

```
NSDictionary *sectionDictionary = [NSDictionary dictionaryWithContentsOfFile:filePath]; 
```

阅读特定部分的字典

```
NSDictionary *section1 = [sectionDictionary objectForKey:@"Section1"]; // returns Section1
NSDictionary *section2 = [sectionDictionary objectForKey:@"Section2"]; // returns Section2 
```

阅读药物价值

```
NSString *drug1 = [section1 objectForKey:@"Drug1"]; // returns value for Drug1 
```

# awk - Awk: Characters-frequency from one text file?

> ID：15601997
> 
> 赞同：1
> 
> 时间：2013-03-24T17:57:51.537
> 
> 标签：awk, character, cjk, frequency-analysis, word-frequency

**Given a multilangual .txt files** such as:

```
But where is Esope the holly Bastard
But where is 생 지 옥 이 군
지 옥 이
지 옥
지
我 是 你 的 爸 爸 ！
爸 爸 ！ ！ ！
你 不 會 的 ！ 
```

I **counted space-separated words' word-frequency using this Awk function** :

```
$ awk '{a[$1]++}END{for(k in a)print a[k],k}' RS=" |\n" myfile.txt | sort 
```

Getting the elegant :

```
1 생
1 군
1 Bastard
1 Esope
1 holly
1 the
1 不
1 我
1 是
1 會
2 이
2 But
2 is
2 where
2 你
2 的
3 옥
4 지
4 爸
5 ！ 
```

**How to change it to count characters-frequency ?**

* * *

**EDIT:** For **Characters-frequency,** I used (@Sudo_O's answer):

```
$ grep -o '\S' myfile.txt | awk '{a[$1]++}END{for(k in a)print a[k],k}' | sort > myoutput.txt 
```

For **word-frequency**, use:

```
$ grep -o '\w*' myfile.txt | awk '{a[$1]++}END{for(k in a)print a[k],k}' | sort > myoutput.txt 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T18:03:04.303

一种方法：

```
$ grep -o '\S' file | awk '{a[$1]++}END{for(k in a)print a[k],k}' 
3 옥
4 h
2 u
2 i
3 B
5 ！
2 w
4 爸
1 군
4 지
1 y
2 l
1 E
1 會
2 你
1 是
2 a
1 不
2 이
2 o
1 p
2 的
1 d
1 생
3 r
6 e
4 s
1 我
4 t 
```

使用重定向将输出保存到文件：

```
$ grep -o '\S' file | awk '{a[$1]++}END{for(k in a)print a[k],k}' > output 
```

对于排序输出：

```
$ grep -o '\S' file | awk '{a[$1]++}END{for(k in a)print a[k],k}' | sort > output 
```